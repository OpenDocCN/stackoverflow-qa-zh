# StackOverflow 问答 11354000-11354999

# java - 从java中的另一个类更改实例的方法

> ID：11354000
> 
> 赞同：1
> 
> 时间：2012-07-05T23:37:14.260
> 
> 标签：java, methods

我试图从另一个类中更改一个实例的方法。这是可能的，如果可以，我该怎么做？

我试图在运行时重写整个方法。我只希望为类的一个实例更改方法，并且所有其他实例的方法应该保持不变。我希望这能消除一些困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:49:28.603

不，这是不可能的。

方法定义是按类而不是实例存储的（无论如何都是不可变的）。您可以做的一件事是为每个实例存储一个可调用对象并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:01:37.560

我认为您需要提供更多详细信息，也许还需要一些示例代码才能获得足够的答案。话虽如此，如果类 Foo 扩展类 Bar，类 Foo 可以覆盖类 Bar 的方法。那是你想要做的吗？

# php - 通过 Javascript/AJAX/JSON/PHP 将数据从 JQuery 传递到数据库

> ID：11354009
> 
> 赞同：-1
> 
> 时间：2012-07-05T23:38:56.557
> 
> 标签：php, javascript, ajax, json, jquery

我试图通过使用 MVC 模型的 JQuery、AJAX/JSON 和 PHP 从我的 HTML 代码向我的数据库添加数据。下面是我想要实现的一个小样本。

在我的前端，我有一个带有不同选项的复选框和一个名为“添加”的按钮。从这里选择的元素由我已经正确测试过的 Javascript 函数拾取，一旦完成，我调用另一个 Javascript 函数来执行 AJAX/JSON 。我仍然对将数据发送到 PHP 的实际 AJAX/JSON 过程感到新鲜。

我的 Javascript 函数：

```
function add_fruits(fruit_name, fruit_type){
    var success = "Fruit added";
    var error = "Fruit not added";

    var params = {
        'fruit_name' : fruit_name,
        'fruit_type' : fruit_type
    };

    $.ajax({
        type: "POST",
        url: "add_fruits.php",
        async: false,
        data: params,
              success: function(success){
                  alert(success);
              },
              error: function(error){
                  alert(error);
              }
    });
} 
```

我的PHP函数：

```
<?php
header("Access-Control-Allow-Origin: *");
header('Content-type: application/json');

require_once 'lib/connection_files.php';

if($_SERVER['REQUEST_METHOD'] =='POST')
{
    $fruit_name = no_sql_injection($_POST['fruit_name']);
    $fruit_type = no_sql_injection($_POST['fruit_type']);

    $fruits = new fruits();
    $result = $fruits->add_fruits($fruit_name, $fruit_type);
    $tmp = mysql_num_rows($result);

    if($result == 1)
    {//RESULT must return 1 to verify successful insertion to database
        //send confirmation to front end
    }
    else
    {
        //send error message to front end
    }
}
else{
    //tell front end there was error sending data via AJAX
}
?> 
```

请注意， add_fruits() 函数负责对数据库进行查询，我没有在此处包含它，因为它与我的问题无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:44:24.863

只需`echo`在您的 PHP 中执行：

**PHP**

```
else {
    //send error message to front end
    echo "Error Adding Fruits";
} 
```

**JS**

```
success: function(data) {
    if (data == "1") {
        //data added to db
    }
    else {
        alert(data);
    }
} 
```

# jquery - 添加类到fancybox图像弹出

> ID：11354011
> 
> 赞同：0
> 
> 时间：2012-07-05T23:39:00.403
> 
> 标签：jquery, fancybox

我需要在我网站的 2 个不同位置使用稍微不同的 fancybox 实现。

一个使用一组图像，一个仅使用一个图像。

我在叠加层中添加了一些样式以实现图像组所需的样式，但是我不需要单个图像的附加样式，因为它填充了白色“框架”的底部以为导航创建空间坐。这只是在我需要删除的单个图像中显示为空白区域。

有没有办法通过单个图像的图像链接将一个类发送到覆盖层，以便我可以删除这个空白？

```
<a href="/assets/Uploads/_resampled/croppedimage640480-site.jpg" class="fancybox">
    <img src="/assets/Uploads/_resampled/croppedimage181118-site.jpg" alt="site">
</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T01:44:02.293

如果使用 fancybox v2.x 添加这个选项

```
beforeShow : function(){
 $(".fancybox-inner").find("img").addClass("newClass");
} 
```

它将添加`newClass`到fancybox内的图像（`img`标签）

以防万一，如果使用 fancybox v1.3.4 添加

```
"onComplete": function(){
 $("#fancybox-content").find("img").addClass("newClass");
} 
```

# map - 如何通过在openlayers中画一条线来选择特征？

> ID：11354018
> 
> 赞同：0
> 
> 时间：2012-07-05T23:40:48.520
> 
> 标签：map, openlayers, openstreetmap

[在 openlayers 选择框](http://dev.openlayers.org/docs/files/OpenLayers/Control/SelectFeature-js.html#OpenLayers.Control.SelectFeature.box)下有一个选项。但是，我想在画线时选择特征（用 shift 键向下自由手绘）。在我的脚本中，我已经实现了绘图和选择选项。我可以独立地画线和选择（多个）特征。现在，我想合并这两个。我想选择那些被我画的线触及的特征数据。有没有可用的示例？

在这里，我给出了示例代码 -

```
//Selection property---------------------------------------
            var selectControl = new OpenLayers.Control.SelectFeature(
                [vectorLayer],
                {
                    clickout: true, toggle: true,
                    multiple: true, hover: false,
                    toggleKey: "ctrlKey", // ctrl key removes from selection
                    multipleKey: "shiftKey" // shift key adds to selection
                }
            );
            map.addControl(selectControl);
            selectControl.activate();

var draw = new OpenLayers.Control.DrawFeature(
                vectorLayer, OpenLayers.Handler.Path,
                {displayClass: "olControlDrawFeaturePoint", title: "Draw Features", handlerOptions: {holeModifier: "altKey"}}
            ); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:19:42.763

您必须注册事件“sketchcomplete”，该事件将在 layer-bo-be-selected 中的所有要素上运行，并检查它是否与草图线共享几何。

像这样的东西，不幸的是我现在无法测试它。

```
vectorLayer.events.register('sketchcomplete', vectorLayer, sketchCompleteFunc);

function sketchCompleteFunc(obj) {

    for (var i=0;i<layer-to-be-selected.features.length;i++) {
         if (layer-to-be-selected.features[i].geometry.intersects(obj.geometry)) {
             selectControl.select(layer-to-be-selected.features[i])
         }

    }
} 
```

# ipad - 用户触摸屏幕时如何更改uiview颜色

> ID：11354019
> 
> 赞同：0
> 
> 时间：2012-07-05T23:40:51.917
> 
> 标签：ipad

我正在创建一个 ipad 应用程序，我有一个按钮可以创建一个带有红色填充和蓝色边框的矩形。当我触摸创建的矩形时，我想更改边框颜色。我应该使用哪个语句？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:05:37.390

yourRect 和borderColor 是iVar。您必须为每次触摸矩形时更改颜色的逻辑编写方法 changeBorderColor。

```
- (void) init
{
  yourRect = CGRectMake(100,100, 200,200);
  borderColor = [UIColor blueColor];

  UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    singleTap.numberOfTapsRequired = 1;     
    [self addGestureRecognizer:singleTap:];
    [singleTap release];
}

-(void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer
{
    CGPoint tapLocation = [gestureRecognizer locationInView:shareView];

    if(CGRectContainsPoint(yourRect, tapLocation))
    {
        borderColor = [self changeBorderColor]; //Change color
    }
}

- (void)drawRect:(CGRect)rect;
{   
    CGContextRef context = UIGraphicsGetCurrentContext(); 

    CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
    CGContextFillRect(context, yourRect);

    CGContextSetStrokeColorWithColor(context, borderColor.CGColor);
    CGContextStrokeRect(context, yourRect);
} 
```

# opengl - 快速捕获 OpenGL 帧缓冲区？

> ID：11354024
> 
> 赞同：2
> 
> 时间：2012-07-05T23:41:14.067
> 
> 标签：opengl, capture, framebuffer

我想知道 FRAPS 如何捕获 OpenGL 帧缓冲区，因为它的性能似乎比重复调用要好得多`glReadPixels`（即使没有保存任何内容）。

我有一个简单的 OpenGL 演示，如下所示：

[http://puu.sh/Gat5](http://puu.sh/Gat5)

我知道将无意义的帧速率与以毫秒为单位的实际帧时间进行比较，但我将在这里使用它进行简单的比较。

正常运行时，我得到的平均帧率远远超过 8000。

当 FRAPS 以全尺寸锁定到 60 fps 进行录制时，帧速率会降低到 240。

当调用`glReadPixels`并且不执行其他操作时，帧率为 225。

FRAPS 如何在合理的时间内记录*和保存输出？*它是否使用使用非常轻量级编码格式的录制线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:17:02.833

正如 Ben Voigt 所说，当仅捕获（即调用 glReadPixels）每秒 30 或 60 帧时，减速不那么明显。

# jquery - jQuery - 从选择中生成价格，动态求和列，发布总金额表格

> ID：11354025
> 
> 赞同：1
> 
> 时间：2012-07-05T23:41:28.107
> 
> 标签：jquery, select, sum, option, dynamically-generated

我想创建的是一个表：

1.  selection of country [when selected it generates the description in shipment-field and the respective price in the price-field]
2.  固定产品名称和固定价格 [简单:-)]
3.  配件的选择[它在价格字段中生成相应的价格]
4.  产生的总金额合计 3 个价格
5.  用表单方法=“post”提交总金额

[图片示例](http://www.ideata.it/download/Shipment.png)
这是需要 jQuery 实现的代码的想法：

```
<form action="product.php" method="post">
<h2>Select Country shipment</h2>
<select>
<option>USA $1.00</option>
<option>CANADA $2.00</option>
<option>EUROPE $3.00</option>
</select>
<br />
<br />
<table border="1" cellpadding="5">
<tr>
<td width="200"></td>
<td width="60"><strong>Price</strong></td>
</tr>
<tr>
<td>Product</td>
<td>10.00</td>
</tr>
<tr>
<td><span id="shipment_text"></span></td>
<td><span id="shipment_price"></span></td>
</tr>
<tr>
<td>
<select>
    <option value=""></option>
    <option value="Accessory1">Accessory 1 - $1.00</option>
    <option value="Accessory2">Accessory 2 - $2.00</option>
    <option value="Accessory3">Accessory 3 - $3.00</option>
</select></td>
<td><span id="accessory_price"></span></td>
</tr>
<tr>
<td align="right"><strong>Total</strong></td>
<td><span id="total"></span></td>
</tr>
</table>
<br />
<input type="hidden" id="total" name="amount" value="" />
<input type="submit" value="Submit">
</form> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:02:01.320

要在更改国家/地区选择时执行某些操作，请使用以下命令：

```
$("#country").change(function() {
    /*update description and shipping price/*
}); 
```

请注意，您需要添加`id="country"`到国家/地区选择。然后，您可以对其他选择执行类似的操作。

或者，您可以将相同的事件附加到所有选择，并在事件处理程序中获取所有选定的选项，以便一切都发生在同一个地方：

```
$("select").change(function() {
    var country = $("#country option:selected").val();
    var accessory = $("#accessories option:selected").val();
    /* Update all selects, prices, and total accordingly */
}); 
```

请注意，您应该将`value`所有选项的属性作为标识符。这些可能是原始数字的价格。使用[window.parseFloat()](http://www.w3schools.com/jsref/jsref_parsefloat.asp)将属性字符串转换为数字。

这里的重要概念是[.change()](http://api.jquery.com/change/)和[:selected](http://api.jquery.com/selected-selector/)。

至于提交表单，您的提交按钮应该可以解决问题。如果要手动控制请求和参数，可以使用[$.post()](http://api.jquery.com/jQuery.post/)，该文档页面上有一个示例。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:10:51.983

**工作演示** [http://jsfiddle.net/aRDXD/1/](http://jsfiddle.net/aRDXD/1/) **或** [http://jsfiddle.net/tyAmg/](http://jsfiddle.net/tyAmg/)

让我知道这是否有助于删除我的帖子。

另请注意`:)`，您的金额在`$`但总金额在`euro`：P

**代码**

```
$('select').on('change', function(){
    var sum = 0;
    $('.sum').each(function(){

       sum += parseInt($(this).attr("value").replace('$',''));
    });

    $('#total').html(sum);
}); 
```

**HTML**

```
<form action="product.php" method="post">
<h2>Select Country shipment</h2>
<select class="sum">
<option value="$1.00">USA $1.00</option>
<option value="$2.00">CANADA $2.00</option>
<option value="$3.00">EUROPE $3.00</option>
</select>
<br />
<br />
<table border="1" cellpadding="5">
<tr>
<td width="200"></td>
<td width="60"><strong>Price</strong></td>
</tr>
<tr>
<td>Product</td>
<td class="sum" value="10.00">10.00</td>
</tr>
<tr>
<td><span id="shipment_text"></span></td>
<td><span id="shipment_price"></span></td>
</tr>
<tr>
<td>
<select class="sum">
    <option value=""></option>
    <option value="1.00">Accessory 1 - $1.00</option>
    <option value="2.00">Accessory 2 - $2.00</option>
    <option value="3.00">Accessory 3 - $3.00</option>
</select></td>
<td><span id="accessory_price"></span></td>
</tr>
<tr>
<td align="right"><strong>Total</strong></td>
<td><span id="total"></span></td>
</tr>
</table>
<br />
<input type="hidden" id="total" name="amount" value="" />
<input type="submit" value="Submit">
</form> 
```

# python - 如何正确分发基于python-fabric的python应用程序

> ID：11354028
> 
> 赞同：1
> 
> 时间：2012-07-05T23:42:38.343
> 
> 标签：python, deployment, distributed, fabric

我的应用程序有一个用于控制 Linux 主机场的 python 脚本。更准确地说，我有一个集群数据库管理系统。该脚本实现了控制集群的例行任务——启动节点、停止节点、获取节点状态等。

现在脚本是用 python 编写的，只有标准的 python 库。它使用 paramiko 通过 ssh 访问远程主机。它非常丑陋，对于脚本的开发人员和维护人员来说毫无用处。

我想切换到[python-fabric](http://fabfile.org/)。

我的问题是：如何正确编写脚本并将其打包到发行版中（包、tar.gz 等）？

主要的应用程序构建系统是 CMake，并使用该`configure_file`语句从模板生成我的脚本，并替换 C++ 应用程序、库等的完整路径。

我希望构建脚本：

1.  使用 virtualenv 创建一个单独的环境
2.  在单独的环境中安装 pip
3.  在单独的环境中安装fabric
4.  运行由 virtualenv 生成的“激活”脚本并从中调用东西

这种解决方案有什么缺点？您还能提出哪些其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:02:17.907

我认为您没有得到任何答复，因为您的问题太模糊了。

Fabric 是一种简化自动化 ssh 命令的工具。您可以按照与从命令行通过`run()`in fabric 完全相同的方式执行您列出的任何操作。这是一个很棒的工具。

`virtualenv new_env`变成`run('virtualenv new_env')`例如。就打包而言，您可以像打包任何 python 包（使用 setup.py 文件）一样打包它。

如果您热衷于简化构建/部署，请开始使用 Fabric，如果遇到[文档](http://docs.fabfile.org/en/1.4.2/index.html#documentation)未涵盖的任何问题，请返回此处。

# java - 在 OSX 上使用捆绑的 JRE

> ID：11354036
> 
> 赞同：16
> 
> 时间：2012-07-05T23:43:13.957
> 
> 标签：java

一段时间以来，我们的 Java 应用程序已经与 Windows 上的 JRE 预先捆绑在一起。我们有一个用 C 编写的小启动器应用程序，它使应用程序使用我们预先捆绑的 JRE。现在，随着 Apple 对慢慢杀死 Java 的讨伐，我们决定在 OSX 上使用类似的东西是谨慎的。在 OSX 上使用预捆绑的 JRE 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T08:36:37.723

我是@Daniel 在他的回答中链接的博客文章的作者。我成功捆绑了 OpenJDK 并在 Mac App Store 上发布了一个 Java 应用程序。

首先，让我纠正已接受答案中的一些问题。

*   捆绑 OpenJDK 并重新分发它是完全合法的。
*   OpenJDK 不仅仅在 Lion 上运行，我在前 Lion 到 Mountain Lion 上都使用过它。它需要修补才能在 32 位操作系统上运行。
*   OpenJDK 处于测试阶段，但运行复杂的 Swing 应用程序仍然是可以接受的。[OSX 存在一些问题，但我在这篇文章](http://www.intransitione.com/blog/take-java-to-app-store)中描述了如何解决这些问题。

无需像@Matteo 的回答中所述创建任何脚本，您可以使用由 Oracle 发布的名为[AppBundler](http://www.intransitione.com/blog/take-java-to-app-store)的应用程序来创建将启动您的应用程序并创建本机捆绑包的本机可执行文件。AppBundler 还将生成一个 Info.plist 文件，其中包含有关如何启动应用程序的信息，例如要启动的可执行文件的名称、Java 参数等...

从 10.7.5 及更高版本开始，如果您不希望在用户首次出现时显示您的应用来自身份不明的开发者的对话框，则您的应用必须与 Gatekeeper 兼容并签名（因此您必须注册付费的 Mac 开发者计划）打开它。

要在 App Store 上部署，您的应用程序还必须能够在沙盒环境中工作，但如果您将其分发到 App Store 之外，则不是严格要求。

注意 AppBundler 缺少一些有用的功能，你可能对[这个 fork](https://bitbucket.org/infinitekind/appbundler)感兴趣。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T19:31:44.080

即使我觉得这是一个坏主意（见下文），您也可以捆绑一个像 OpenJDK 这样的 JVM，然后使用一个调用您的`java`可执行文件的小脚本启动您的应用程序。

**注意：我不知道是否允许重新分发JVM（合法），您应该在下载前检查协议**

*   您将遇到的第一个问题是，目前只有 Apple 版本或*Oracle Java 7u6 Mac OS X Port Developer Preview Release*（这只是一个预览版）。（例如， http: [//jdk7.java.net/macportpreview/](http://jdk7.java.net/macportpreview/)）。当苹果停止提供自己的版本时，这将在未来发生变化。因此，目前您只能在 Lion 上运行预览。但我会给你一个例子。

*   下载安装程序，挂载磁盘映像，右键单击插件，选择“显示包内容”解压`Home`文件夹，其中包含 JRE

*   然后你可以检查

    ```
    $ ./Home/bin/java
    java version "1.7.0_06-ea"
    Java(TM) SE Runtime Environment (build 1.7.0_06-ea-b18)
    Java HotSpot(TM) 64-Bit Server VM (build 23.2-b08, mixed mode) 
    ```

    然后我会重命名`Home`为`jre`

*   如果您将此文件夹与您的应用程序打包在一起，您只需包含一个小脚本

    ```
    #!/bin/sh
    ./jre/bin/java -classpath myniceapplication.jar 
    ```

*   为了能够构建应用程序，您需要一个`applicationname.app/Contents/MacOS`包含脚本的文件夹（应命名为`applicationname`）。

*   现在看来您需要在这些脚本中使用绝对路径

    ```
    /Path/applicationname.app/Contents/MacOS/jre/bin/java -classpath myniceapplication.jar 
    ```

    我想有更好的解决方案来构建 Mac OS X 应用程序包，但我不是专家。这个例子只是为了表明它可以工作。

总结：

*   检查是否允许重新分发 JRE（并检查哪些是条件）

*   我不会这样做，因为每次有 JRE 安全更新时您都必须保持更新并更新您的应用程序

*   作为用户，我会比随机开发人员（不是个人 :-) 更信任 Oracle 来获得 JRE

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T10:09:23.087

[此博客文章](http://www.intransitione.com/blog/take-java-to-app-store/)中有一些关于在您的应用程序中捆绑 JRE 并使其能够提交到 App Store 的详细说明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-22T19:55:50.983

以下是 Oracle 自己关于如何捆绑 JRE 以在 Apple 上分发的分步指南：http: [//docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-23T11:08:37.563

虽然这个回复是在最初的问题之后很久，如果其他人可能对仍在寻找答案的人感兴趣。
我在一个名为 Pyxis Bundler 的小型应用程序的开发团队中，它可以为 OSX 捆绑应用程序，用户可以选择从他们的 CLASSPATH 中包含 JRE，可以选择特定的 JRE 或无。
该应用程序将生成一个结构合理的 Mac Application Bundle，包括图标和启动画面，用户甚至可以将版本号写入启动画面。此外，它可以从 PNG 文件创建多分辨率 Apple 图标图像（用作现代 ICNS 文件）。这是一个易于使用的 GUI 应用程序，其中设置会自动保存，从而可以轻松更新应用程序。唯一的先决条件是开发人员使用正确的包名称。不允许使用单个单词的包名称。更多信息可从[https://explorepyxis.com](https://explorepyxis.com) 免费试用。请向公司发送电子邮件以请求相同的内容。

# ruby-on-rails-3.1 - 使用不同的 RackSubUri 安装门卫提供程序和客户端

> ID：11354037
> 
> 赞同：0
> 
> 时间：2012-07-05T23:43:53.020
> 
> 标签：ruby-on-rails-3.1, oauth-2.0

我安装

```
git://github.com/applicake/doorkeeper-provider-app.git
```

和

```
git://github.com/applicake/doorkeeper-devise-client.git
```

和

```
RackBaseURI /提供者
```

和

```
RackBaseURI /客户端
```

分别使用apache2和passenger。

现在一些 OAuth 重定向不再起作用。

提供者应重定向到 [https://example.org/provider/users/sign_in](https://example.org/provider/users/sign_in) 但转到 [https://example.org/users/sign_in](https://example.org/users/sign_in)

我想我已经通过编辑 config/initializers/devise.rb 在客户端正确处理了客户端的重定向

```
config.omniauth :doorkeeper, DOORKEEPER_APP_ID, DOORKEEPER_APP_SECRET,         :client_options => {
:site => DOORKEEPER_APP_URL,
:authorize_url => "#{DOORKEEPER_APP_URL}/provider/oauth/authorize",
:ssl => {:ca_path => "/etc/ssl/certs"}
} 
```

但如上所示，我无法在提供程序中找到要做什么。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:25:08.673

Oauth 或 Doorkeeper 似乎不知道 RackBaseURI /provider

所以我尝试调整路线

```
devise_for :users, path: "provider/users" 
```

用于生成路径。它创建：

```
new_user_session GET    /provider/users/sign_in(.:format)        {:action=>"new", :controller=>"devise/sessions"}
user_session POST   /provider/users/sign_in(.:format)        {:action=>"create", :controller=>"devise/sessions"} 
```

但是我有一个新问题，即传入的 url 不再被识别！因此，为相同的操作提供额外的路径：

```
devise_scope :user do
get  "/users/sign_in" , to:  "devise/sessions#new"
post "/users/sign_in" , to: "devise/sessions#create"
end 
```

我已经把它拼凑在一起，没有遇到文档告诉这是这样做的方法。

# c++ - 使用正则表达式替换 1 次迭代中的所有匹配项

> ID：11354040
> 
> 赞同：0
> 
> 时间：2012-07-05T23:44:09.073
> 
> 标签：c++, regex, boost-regex

是否可以在 1 次迭代中搜索不同的模式并替换匹配项？

例如，如果我有字符串

```
"Hey {Apple}, where is {Carrots|Peas|Cucumber}?" 
```

是否可以在 1 次迭代中替换大括号内的所有内容，使其看起来像：

```
"Hey fruit, where is vegetables? 
```

我问的原因是因为我当前的实现首先搜索在花括号内只有一个值的所有模式（1 次迭代），然后在（2 次迭代）之后搜索具有 3 个值的花括号，因此采用 x - 迭代次数，其中 x = "{}"。

谢谢大家，我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:54:09.010

这并不是一个真正的正则表达式问题，因为在字符串中进行替换超出了正则表达式的范围。

也就是说，这取决于模式的多样性。如果您有一组相对较少的模式，那么您可以设置一个从字符串到替换的 Map，并让您的输出迭代器查找它获得的每个匹配项的替换值。

例如，“Apple”会映射到“Fruit”，“Carrots”会映射到“vegetables”，“Peas”也会映射到“vegetables”等。

# mysql - Liquibase DB 独立插入语句

> ID：11354041
> 
> 赞同：2
> 
> 时间：2012-07-05T23:44:13.413
> 
> 标签：mysql, database, oracle, liquibase

我有一个使用 Liquibase 定义的 Oracle/MySql/PostgreSql 架构。我有一些插入语句。现在我想编写`<insert>`支持所有三个数据库的标签，这样如果它是 MySql，它将使用自动增量功能和 Oracle 的序列。我可以在不复制`<insert>`标签的情况下实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T19:24:55.993

其实我觉得这比你想象的还要痛苦。我相信您必须使用不同的变更集来执行此操作。请参阅[使用例如序列时如何区分数据库](https://stackoverflow.com/questions/11246009/how-do-i-differentiate-between-databases-when-using-e-g-sequence)。

所以你会有：

```
<changeSet id="x" author="y">
  <preConditions>
    <dbms type="oracle"/>
  </preConditions>
  ...
</changeSet>
<changeSet id="xx" author="y">
  <preConditions>
    <dbms type="mysql"/>
  </preConditions>
  ...
</changeSet>
<changeSet id="xxx" author="y">
  <preConditions>
    <dbms type="postgres"/>
  </preConditions>
  ...
</changeSet> 
```

# javascript - JQuery Animate 函数在动画之前跳转到屏幕顶部

> ID：11354046
> 
> 赞同：0
> 
> 时间：2012-07-05T23:44:59.327
> 
> 标签：javascript, jquery, animation, scrolltop

我对 Jquery 比较陌生，所以如果这很明显，请随时打我一巴掌。我有这个小脚本，它将通过它的边距移动一个 div 并将浏览器滚动到新内容。应用时，页面跳到顶部，然后跳回然后动画。这是JS。

```
 var onoff = true;

     $('#archive').click(function() {

        if(onoff == true)
        {
            $('#footer').animate({marginTop: 0}, 300);
            onoff = false;

        } else
        {
            $('html, body').animate({
                 scrollTop: $("#archive").offset().top
             }, 2000);

            $('#footer').animate({marginTop: -171}, 300);
            onoff = true;
        }

     }); 
```

如果这是一个重复的问题，任何帮助将不胜感激和抱歉，如果是，我找不到。

谢谢，-S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:58:21.930

可能是因为你需要一个 preventDefault

```
$('#archive').click(function(evt) {
   evt.preventDefault()

... 
```

# c# - 在 C# 中，如何显示隐藏窗口？

> ID：11354048
> 
> 赞同：0
> 
> 时间：2012-07-05T23:45:18.120
> 
> 标签：c#, window

我试图设置 System.Diagnostics.Process 对象的 WindowState 但这不起作用。WinAPI ShowWindow 函数也没有，因为它需要一个我无法获取的窗口句柄，因为我要显示的窗口是隐藏的（这意味着当我在 Process 对象上调用 MainWindowHandle 时，它​​的 MainWindowHandle 默认为零。）

有人能告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:57:44.083

仅仅因为 MainWindowHandle 为零，并不一定意味着您无法获得窗口的句柄。按照惯例，MainWindowHandle 是应用程序创建的第一个窗口，但它可能有点偶然。让它返回零并不罕见。

您应该使用[EnumWindows](http://msdn.microsoft.com/en-us/library/ms633497%28VS.85%29.aspx)来查找进程拥有的窗口。

# objective-c - 在运行时向objective-c类的实例添加方法

> ID：11354049
> 
> 赞同：4
> 
> 时间：2012-07-05T23:45:20.107
> 
> 标签：objective-c, runtime

我想知道是否有办法将实例方法添加到类的“实例”中。

场景是我正在使用 EKEventEditViewController，并且在这个类中有一个 UITableView，有一个名为“EKEventEditor”（非公共 AFAIK）的委托（UITableViewDelegate）。它没有实现 tableView:willDisplayCell:forRowAtIndexPath: 方法，我试图用它来禁用某些单元格。

所以我试图向实例添加一个方法，但我在 Obj-C 运行时中只能找到 class_addMethod 调用，它将方法添加到类而不是实例。由于“EKEventEditor”是私有的，我不能只是扩展它并自己添加该方法。

有什么提示吗？

这是我正在使用的代码，我试图添加的函数（willDisplayCell_）没有被调用。

```
- (void)navigationController:(UINavigationController *)navigationController 
  willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {

if ([navigationController isKindOfClass:[EKEventEditViewController class]]) {

UITableViewController *rootController = (UITableViewController*)[(UINavigationController*)navigationController visibleViewController];
if ([rootController isKindOfClass:[UITableViewController class]]) {
  UITableView *eventTableView = (UITableView*)[rootController view];

  class_addMethod([eventTableView.delegate class], 
                  @selector(tableView:willDisplayCell:forRowAtIndexPath:), 
                  (IMP)willDisplayCell_, "v@:@@@");
}}} 

void willDisplayCell_(id self, SEL cmd, UITableView *tableView, UITableViewCell *cell, NSIndexPath *indexPath) {
  NSLog(@"CALLED?");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:52:41.860

这就是你想要的功能。这会将（实例）方法添加到类的*所有实例*中。* 无法仅将方法添加到一个特定实例中。**

但是，您可能想考虑使用[Category](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html)，它*确实*允许您扩展`@implementation`您无法控制的类。但是，这仅在您可以导入该类的 primary 时才有效`@interface`，而且听起来可能并非如此。

* * *

*如果你想添加一个类方法，你可以用元类作为第一个参数来调用函数。

`forwardInvocation:`** 除非我正在处理一些覆盖和可能的 libffi 的诡计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T05:41:43.330

这是适合您的[REKit](https://github.com/zuccoi/REKit)。它使您能够在实例级别添加/覆盖方法。

使用 REKit，您可以将方法添加到`eventTableView.delegate`如下所示：

```
[eventTableView.delegate
    respondsToSelector:@selector(tableView:willDisplayCell:forRowAtIndexPath:)
    withKey:nil
    usingBlock:^(id receiver, UITableView *tableView, UITableViewCell *cell, NSIndexPath *indexPath) {
        // Do something…
    }
]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T07:52:37.990

[这是完全可能的，而且非常有用](https://github.com/mralexgray/AtoZ.framework/blob/Core/AtoZ/Categories/NSObject-Utilities.h)......考虑在没有子类化的情况下改变实例的功能等等......

```
@interface NSObject (AZOverride)
/** Dynamically overrides the specified method on this particular instance.
* The block's parameters and return type must match those of the method you 
* are overriding. However, the first parameter is always "id _self", which 
* points to the object itself.
* You do have to cast the block's type to (__bridge void *), e.g.:
*
*    [self az_overrideSelector:@selector(viewDidAppear:)
*            withBlock:(__bridge void *)^(id _self, BOOL animated) { ... }];
*/
- (BOOL)az_overrideSelector:(SEL)selector withBlock:(void *)block;
/** To call super from the overridden method, do the following:
*    SEL sel = @selector(viewDidAppear:);
*    void (*superIMP)(id, SEL, BOOL) = [_self az_superForSelector:sel];
*    superIMP(_self, sel, animated);
* This first gets a function pointer to the super method and then you call it.
*/
- (void *)az_superForSelector:(SEL)selector;
@end 
```

# sqlite - SQLite：编辑字段，全文更新？

> ID：11354050
> 
> 赞同：2
> 
> 时间：2012-07-05T23:45:33.160
> 
> 标签：sqlite, full-text-search

在 SQLite 3 中

如果我更新具有全文索引的字段，全文索引会更新，还是需要手动更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:23:22.307

例如，这取决于。如果您使用“外部内容 FTS4 表”，它不会自动更新。

来自[http://www.sqlite.org/fts3.html#section_6_2_2](http://www.sqlite.org/fts3.html#section_6_2_2)

```
CREATE TABLE t2(id INTEGER PRIMARY KEY, a, b, c, d);
CREATE VIRTUAL TABLE t3 USING fts4(content="t2", b, c);

INSERT INTO t2 VALUES(2, 'a b', 'c d', 'e f');
INSERT INTO t2 VALUES(3, 'g h', 'i j', 'k l');
INSERT INTO t3(docid, b, c) SELECT id, b, c FROM t2;
-- The following query returns a single row with two columns containing
-- the text values "i j" and "k l".
--
-- The query uses the full-text index to discover that the MATCH 
-- term matches the row with docid=3\. It then retrieves the values
-- of columns b and c from the row with rowid=3 in the content table
-- to return.
--
SELECT * FROM t3 WHERE t3 MATCH 'k';

-- Following the UPDATE, the query still returns a single row, this
-- time containing the text values "xxx" and "yyy". This is because the
-- full-text index still indicates that the row with docid=3 matches
-- the FTS4 query 'k', even though the documents stored in the content
-- table have been modified.
--
UPDATE t2 SET b = 'xxx', c = 'yyy' WHERE rowid = 3;
SELECT * FROM t3 WHERE t3 MATCH 'k'; 
```

但也可以通过触发器解决。

> 一些用户可能希望使用数据库触发器来保持全文索引相对于存储在内容表中的文档集保持最新，而不是单独写入全文索引和内容表。例如，使用前面示例中的表：

# ruby-on-rails-3 - 制作一个 div（谷歌地图）100% 的高度，这样它就可以填补 twitter bootstrap 中导航栏和页脚之间的空白

> ID：11354052
> 
> 赞同：1
> 
> 时间：2012-07-05T23:45:40.070
> 
> 标签：ruby-on-rails-3, css, google-maps-api-3, twitter-bootstrap

我正在使用 twitter 引导程序，并且还在 rails 应用程序的页面底部实现了一个贴纸页脚栏。我在中间有一个两栏页面，基本上是一个带有右侧栏的主页。

在主页中，我有一个画布 div，我想用谷歌地图填充。这是一个地图应用程序，所以我想让它拉伸 nar 栏和页脚之间的整个空间长度。宽度 100% 似乎可以填充列，但高度不起作用。

有人有什么建议吗？我在下面包含了当前代码：

当前 bootstrap_and_override.css

```
 @import "twitter/bootstrap/bootstrap";

 html, body {
    height: 100%;
 }

 body { 
    padding-top: 0;
 }

 .navbar {
    margin-bottom: 5px;
 }

 footer {
     color: #CCC;
     background: #006890;
     padding: 5px 0 5px 5px;
     border-top: 1px solid #006890;
 }
 footer a {
     color: #999;
 }
 footer a:hover {
    color: #efefef;
 }
 .wrapper {
     min-height: 100%;
     height: auto !important;
     height: 100%;
     margin: 0 auto -30px;
 }
 .push {
     height: 30px;
 }

 .logo {
     padding-top: 7px
 }

 #map_canvas { 
     height: 800px;
     width: 100%;
     background-color: #cccccc;
      }

 @import "twitter/bootstrap/responsive";

 // Set the correct sprite paths
 @iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
 @iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

 // Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
 // Note: If you use asset_path() here, your compiled boostrap_and_overrides.css will not 
 //       have the proper paths. So for now we use the absolute path.
 @fontAwesomeEotPath: '/assets/fontawesome-webfont.eot';
 @fontAwesomeWoffPath: '/assets/fontawesome-webfont.woff';
 @fontAwesomeTtfPath: '/assets/fontawesome-webfont.ttf';
 @fontAwesomeSvgPath: '/assets/fontawesome-webfont.svg';

 // Font Awesome
 @import "fontawesome";

 // Your custom LESS stylesheets goes here

 @navbarBackground: #ccc;
 @navbarBackgroundHighlight: #fff;
 @navbarBrandColor: #000;
 @navbarHeight: 68px;
 @gridGutterWidth: 0px; 
```

当前页面内容：

```
 <div class="row-fluid">
   <div class="span9">

    <div id="map_canvas" style="width:100%; height: 800px;"></div>

   </div>
   <div class="span3">Right Column</div>
 </div>

 <% content_for :head do %>

 <script type="text/javascript"
   src="https://maps.googleapis.com/maps/api/js?sensor=false">
      </script>
     <script type="text/javascript">
       function initialize() {
         var myOptions = {
           center: new google.maps.LatLng(35.17380831799959, -94.39453125),
             zoom: 5,
           mapTypeId: google.maps.MapTypeId.ROADMAP
          };
     var map = new google.maps.Map(document.getElementById("map_canvas"),
         myOptions);
   }
 </script>

 <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:39:22.413

如果你希望地图是 100%，你至少需要改变这个：

```
#map_canvas { 
     height: 800px;
     width: 100%;
     background-color: #cccccc;
} 
```

和这个：

```
<div id="map_canvas" style="width:100%; height: 800px;"></div> 
```

到高度 100%。

如果这没有帮助，涉及百分比大小的地图 div 的问题将在 Mike Williams 的 v2 教程的此页面中讨论：[第 20 部分 使用地图 div 的百分比高度](http://econym.org.uk/gmap/basic19.htm)，几乎所有问题在 v3 中都是相同的。

# image - svn 或 git 用于存储图像文件？

> ID：11354053
> 
> 赞同：0
> 
> 时间：2012-07-05T23:45:47.703
> 
> 标签：image, git, svn

我想使用 svn/git 进行图像备份。
图像由 jpg/psd/其他与图像相关的二进制文件组成。

这主要用于备份目的。我不需要跟踪旧版本。
存储库使“删除”变得困难。这就是为什么我考虑将它们用于备份目的

想知道 svn/git 是否更适合这个？

（这个问题应该交给超级用户吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:05:23.517

存储库不一定会使删除变得困难。只需`rm -rf *`使用任何其他操作系统或 GUI 执行类似命令，您的文件就会消失。

如果您不需要版本控制，为什么不将它们复制到可移动存储？外部磁盘很便宜，许多其他媒体既便宜又防重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:53:23.013

好吧，我个人更喜欢 GIT 而不是 SVN。我不认为像“图像”这样的细节应该定义您使用的内容，而是您更喜欢作为版本控制系统的内容。GIT 现在似乎风靡一时，那么为什么不这样做呢？如果您喜欢，它也有一些很棒的 GUI，而 SVN GUI 似乎有些缺乏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:05:44.360

我读过很多帖子，对于较大的存储库，GIT 的速度要快得多。（我只是不知道是由“更大”的存储库定义的文件的大小或数量）而且大多数新软件似乎都在 GIT 上，所以它一定有一些吸引很多人的东西。因此，我会选择 GIT :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:06:17.010

仅使用版本控制系统来存储二进制文件通常是一个坏主意。

我也不确定我的意图是否正确：
不过，如果您想使用 VCS 来存储您处理图片的“会话状态”，并且 Photoshop 的撤消功能不够好，或者您不想要以不同的名称手动存储图片...

**git 是首选武器，因为它可以在本地使用。**

图像文件往往更大，因此网络传输会随着时间的推移而变慢，而且 git 本身的工作速度比 svn 快。（当然，svn 也可以在本地设置，但更麻烦。）
如果需要，可以在使用 git 时使用远程存储库。但与 SVN 不同，您也可以在缺少网络连接时使用 git。

图形前端的可用性不应该成为决策者，因为对于这两个系统来说都存在很好的工具。

# episerver - EpiServer 社区问题。使用管理员登录时拒绝访问

> ID：11354056
> 
> 赞同：2
> 
> 时间：2012-07-05T23:46:12.537
> 
> 标签：episerver

我们最近部署了一个基于 EpiServer CMS 6 和 Relate Plus 2 的网站。

一切正常，但 CMS 存在一个奇怪的问题：

当我们使用“管理员”帐户登录时，该帐户是管理员、社区管理员、社区版主、WebAdmins 和 WebEditors 组的成员，我们可以转到 CMS 并访问所有选项卡（例如管理员、编辑、访问者组、报告）。但是，同一帐户确实可以看到“社区”菜单，但看不到“审核模式”和“管理员模式”子菜单。

如果我们尝试直接通过他们的 url 访问社区管理员（或审核）页面，我们会得到“拒绝访问”。

有没有人经历过类似的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:42:58.183

访问权限部分有一个小错误。
您需要查看这是否是 web.config 文件中存在的内容：

```
<allow roles="CommunityAdmins,Administrators,..." />
    <deny users="*" /> 
```

并不是：

```
<deny users="*" />
<allow roles="CommunityAdmins,Administrators,..." /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:02:41.703

在 web.config 中：检查“EPiServerCommunity”位置元素中的 AdministratorsGroupName 设置和授权设置。

还要检查 episerver.shell/protectedeModules 是否包含以下内容：

```
<add name="Community" resourcePath="~/EPiServerCommunity">
  <assemblies>
    <add assembly="EPiServer.Community.Web.Administration"/>
    <add assembly="EPiServer.Community.Gadgets"/>
  </assemblies>
</add> 
```

# linux - 如何使用 SED 删除不是 [ACGTN] 的字符

> ID：11354065
> 
> 赞同：0
> 
> 时间：2012-07-05T23:47:00.593
> 
> 标签：linux, unix, sed

如何用 sed 替换任何不是“A”、“C”、“G”、“T”、“N”的字符串？

例如我有以下数据：

```
>AFCCCCC 1
cagktgagtgataaggc
>AFCGH22 1
cagntgagtgstaaggc 
```

我想删除不以'>'开头的不是[ACGTN]的每个字符

因此我希望得到这个输出：

```
 >AFCCCCC 1
 cagtgagtgataaggc
 >AFCGH22 1
 cagntgagtgtaaggc 
```

请注意，我删除了第一个和第二个序列的“k”和“s”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:07:00.383

试试这个：

```
sed '/^>/!s/[^ACGTN]//ig' input.txt 
```

# sqlite - SQLite：从文本正文中删除 HTML 注释

> ID：11354066
> 
> 赞同：0
> 
> 时间：2012-07-05T23:47:04.533
> 
> 标签：sqlite, sql-update

我有一个包含 html 格式数据的数据库。

是否有我可以使用的更新查询来删除其中的所有 HTML 注释？

```
<!-- Some comment --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:52:19.277

SQLite 的字符串操作非常有限。我强烈建议使用具有良好连接器的平台（如 .NET）并浏览您的列表，逐个更新。使用正则表达式（egad！）或适当的东西来删除 HTML 注释。

# java - 查找动作事件结束的视图（按钮）

> ID：11354069
> 
> 赞同：3
> 
> 时间：2012-07-05T23:47:35.123
> 
> 标签：java, android, android-menu

**问题**

我正在寻找一种效果，即最初按下一个按钮会将其他 3 个按钮的可见性从消失变为可见。在向一个新可见的按钮滑动并结束后，我想启动一个不同的活动。

我的问题是，无论我使用哪种方法来获取视图的位置（使用 Rect 对象，findNearestTouchable）和位置触摸事件（使用带有 ACTION_UP 的 onTouch/Gestures），它们似乎永远不会匹配，我永远无法返回我想要的视图；

**所需的功能**

从按下按钮开始并在另一个按钮上结束的动作事件，以返回它结束的按钮的 id/view 对象。

我的 main_menu.xml

 `````
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Button"        
        android:tag="1"

        />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
        android:layout_marginBottom="36dp"
        android:layout_marginRight="19dp"
        android:layout_toLeftOf="@+id/button1"
        android:text="Button"
        android:visibility="gone"
        android:tag="3" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button3"
        android:layout_alignBottom="@+id/button3"
        android:layout_toRightOf="@+id/button3"
        android:text="Button"
        android:visibility="gone" 
        android:tag="2"/>

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button3"
        android:layout_alignBottom="@+id/button3"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dp"
        android:text="Button"
        android:visibility="gone"
        android:tag="4" />

</RelativeLayout> 
````  `当前对 Activity 的尝试，未设置 `foundit`（我对完全不同的实现非常开放）

 `````
public class Menu extends Activity {
    private GestureDetector gestureDetector;
    View.OnTouchListener gestureListener;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menu);

        gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                View findViewById2 = findViewById(R.id.button2);
                View findViewById3 = findViewById(R.id.button3);
                View findViewById4 = findViewById(R.id.button4);
                findViewById2.setVisibility(View.VISIBLE);
                findViewById3.setVisibility(View.VISIBLE);
                findViewById4.setVisibility(View.VISIBLE);
                return gestureDetector.onTouchEvent(event);
            }
        };
        View button = findViewById(R.id.button1);
        button.setOnTouchListener(gestureListener);

    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {

            View foundit = null;
            ViewGroup menu = (ViewGroup) findViewById(R.id.button1).getParent();
            for (int numChildren = menu.getChildCount(); numChildren >= 0; --numChildren) {
                View child = menu.getChildAt(numChildren - 1);
                if (child instanceof Button) {
                    Rect bounds = new Rect();
                    child.getHitRect(bounds);
                    if (bounds.contains((int) e2.getX(), (int) e2.getY())) {
                        foundit = child;
                    }
                }
            }
            if (foundit != null) {
                Log.i("found", "FOUND IT");
            }
            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }
    }

} 
````  `有没有人有任何见解？

**编辑**：

测试以下内容：

 `````
 gestureListener = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            View findViewById2 = findViewById(R.id.button2);
            View findViewById3 = findViewById(R.id.button3);
            View findViewById4 = findViewById(R.id.button4);
            findViewById2.setVisibility(View.VISIBLE);
            findViewById3.setVisibility(View.VISIBLE);
            findViewById4.setVisibility(View.VISIBLE);
            if (event.getAction() == MotionEvent.ACTION_UP) {
                Log.i("TOUCH X IS", Float.toString(event.getRawX()));
                Log.i("TOUCH Y IS", Float.toString(event.getRawY()));
            }
            for (int numChildren = ((ViewGroup) v.getParent())
                    .getChildCount(); numChildren >= 0; --numChildren) {
                View child = ((ViewGroup) v.getParent())
                        .getChildAt(numChildren - 1);
                if (child instanceof Button) {
                    Rect bounds = new Rect();
                    child.getHitRect(bounds);
                    Log.i(child.getTag().toString() + " CENTER X IS",
                            Float.toString(bounds.exactCenterX()));
                    Log.i(child.getTag().toString() + " CENTER Y IS",
                            Float.toString(bounds.exactCenterY()));
                }
            }
            return false;
        }
    }; 
````  `产生以下 LogCat 输出：

`07-06 01:12:58.245: TOUCH X IS(20965): 394.0`

 `07-06 01:12:58.245: TOUCH Y IS(20965): 297.0

07-06 01:12:58.245: 4 CENTER X IS(20965): 392.0

07-06 01:12:58.245: 4 CENTER Y IS(20965): 219.0

07-06 01:12:58.245: 2 CENTER X IS(20965): 240.0

07-06 01:12:58.250: 2 CENTER Y IS(20965): 219.0

07-06 01:12:58.250: 3 CENTER X IS(20965): 95.0

07-06 01:12:58.250: 3 CENTER Y IS(20965): 219.0

07-06 01:12:58.250: 1 CENTER X IS(20965): 240.0

07-06 01:12:58.250: 1 CENTER Y IS(20965): 345.0`  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-20T07:47:28.110

获取子视图，如果它在线性布局或网格布局中可以通过下面的方法。

|*| 如果视图垂直放置在 LinearLayout 中，我已经向你展示了如何获取 SubView。

```
NamVyuVar.setOnTouchListener(new View.OnTouchListener()
{
    @Override
    public boolean onTouch(View view, MotionEvent MsnEvtPsgVar)
    {
        switch (MsnEvtPsgVar.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                Log.d("TAG", "onTouch: ACTION_DOWN");
                break;

            case MotionEvent.ACTION_MOVE:
                LinearLayout NamLloVav = (LinearLayout)view;
                float SubVyuHytVal = NamLloVav.getChildAt(0).getHeight();
                float TchPntYcoVal = MsnEvtPsgVar.getY();
                int NamIdxVal = (int) (TchPntYcoVal / SubVyuHytVal);

                View NamIdxVyuVav = NamLloVav.getChildAt(NamIdxVal)

            // CodTodo With the Indexed View NamIdxVyuVav :

                break;

            case MotionEvent.ACTION_UP:
                Log.d("TAG", "onTouch: ACTION_UP");
                break;
        }
        return true;
    }
}); 
```

|*| 同样，如果您想获得子视图，如果视图水平放置在 LinearLayout 内，则更改为 3 行以下。

```
float SubVyuWdtVal = NamLloVav.getChildAt(0).getWidth();
float TchPntXcoVal = MsnEvtPsgVar.getX();
int NamIdxVal = (int) (TchPntXcoVal / SubVyuWdtVal); 
```

|*| 同样的技术也可以应用于网格布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:53:15.267

在您的手势监听器中，检查 MotionEvent 何时为 MotionEvent.ACTION_UP 并使用坐标 event.getX() 和 event.getY()，然后确定在这些坐标处的视图。

```
public boolean onTouch(View view, MotionEvent event) {
  if (event == MotionEvent.ACTION_UP) {
    int x = event.getX();
    int y = event.getY();
    //find what view is at x, y
  }
} 
```

当按下第一个按钮时（使用 onClick 或当运动事件为 ACTION_DOWN 时），您将触发一些标志。然后，当他们抬起手指时，上面的内容就会被解雇。

**编辑**：一定要使用 event.getY() 而不是 event.getRawY()。计算方式不同，按钮边界的计算方式与 getY() 相同```````

# coldfusion - 为什么 ColdFusion 服务器会误解上传文件的 MIME 类型？

> ID：11354070
> 
> 赞同：2
> 
> 时间：2012-07-05T23:47:36.533
> 
> 标签：coldfusion, mime-types

我有一个允许用户上传支持文件的应用程序。我正在使用 cffile 标签来保存文件。

标签如下所示：

```
<cffile action="upload" 
        destination="path..."
        nameconflict="makeunique"
        ACCEPT="application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/pdf, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
        filefield="outline"> 
```

上传了一个 .xls 文件并生成了一个错误，指出上传的文件“application/octet-stream”未被接受。

问题是为什么 .xls 电子表格文件被服务器解释为具有“应用程序/八位字节流”mime 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:55:58.300

我怀疑客户端的浏览器没有配置为为 .xls 文件选择正确的 mime 类型。最有可能的是，mime 类型的 application/octet-stream 是在请求​​中的 HTTP 标头中发送的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:12:55.077

忘记该`accept`属性，因为即使客户端浏览器发送正确的 MIME 类型，CF（9 及以下）也只会检查文件扩展名。

只需上传文件，然后根据您的白名单检查文件扩展名。

没有`accept`，你甚至不会得到那个例外。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T02:57:39.050

## 我认为下面的答案不正确，但我将其留在这里以帮助完成讨论。请参阅下面的评论。-mk

呃哦...我讨厌不同意 Sun Flower 但这里的问题是*服务器*上的扩展映射而不是客户端上的映射。文件到达服务器，ColdFusion 根据扩展名“查找”mime 类型。从未在您的服务器上安装过 Excel，很可能没有关联的 mime 类型。请记住，*任何依赖于客户*的东西都不会在这里为您提供帮助。文件到达，它有一个扩展名，并且扩展名必须与*服务器*知道的内容相匹配。

如果这是 Windows，您可以将 mime 类型添加到 IIS（只需搜索“mime 类型 - IIS6 或 IIS7 以获取说明），*我相信*它会自动将关联的 mime 类型添加到底层注册表配置单元。否则它是注册表黑客。我要从这里记忆中去，我太累了，无法查找 :)

* * *

抱歉 - 错过了关于应用程序/八位字节流的问题。这是任意文件的默认 mime 类型。有点包罗万象。

# java - 清除现有图表并添加新数据

> ID：11354073
> 
> 赞同：0
> 
> 时间：2012-07-05T23:47:41.057
> 
> 标签：java, teechart

我创建了一个图表，并希望将其完全清除并重新使用新数据。

我将如何彻底清除所有系列/画线等的图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:23:48.977

您可以使用下面的代码。Java 版本中没有 TChart.clear() 方法，就像其他 TeeChart 版本一样。我已将此 (TJ71016243) 添加到愿望清单中，以便在下一个版本中实施。

```
tChart1.removeAllSeries();
tChart1.getTools().removeAll(tChart1.getTools()); 
```

# android - 平板电脑的 Android 布局

> ID：11354077
> 
> 赞同：0
> 
> 时间：2012-07-05T23:48:27.170
> 
> 标签：android, xml, android-layout, screen

我正在尝试使我的应用程序适用于所有设备，但我在这样做时遇到了麻烦。我怎样才能摆脱这个差距？![在此处输入图像描述](../Images/3159cb46cac5a48a2bee266e62351b0c.png)

这是它应该看起来的样子： ![在此处输入图像描述](../Images/cde04fd816f569f248b123acf2a434a4.png)

它在我的手机上运行良好，但在这个平板模拟器上不行。我可以使用什么技术来解决这个问题？我已经阅读了支持多种屏幕尺寸的文章，但我无法充分利用它。这是代码：

```
<ImageView
    android:id="@+id/terranlogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_centerHorizontal="true"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:src="@drawable/zerglogo" />

<CheckBox
    android:id="@+id/ck_t1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/terranlogo1"
    android:layout_centerHorizontal="true" />

<CheckBox
    android:id="@+id/ck_p1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/protosslogo1"
    android:layout_below="@id/protosslogo1"
    android:layout_marginLeft="25dp" />

<CheckBox
    android:id="@+id/ck_z1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/zerglogo1"
    android:layout_below="@id/zerglogo1"
    android:layout_marginLeft="25dp" />

<ImageView
    android:id="@+id/terranlogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_below="@id/ck_t1"
    android:layout_centerHorizontal="true"
    android:src="@drawable/terranlogo" />

<ImageView
    android:id="@+id/protosslogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:layout_below="@id/ck_p1"
    android:src="@drawable/protosslogo" />

<ImageView
    android:id="@+id/zerglogo2"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/ck_z1"
    android:src="@drawable/zerglogo" />

<CheckBox
    android:id="@+id/ck_t2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/terranlogo2"
    android:layout_centerHorizontal="true" />

<CheckBox
    android:id="@+id/ck_p2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/protosslogo1"
    android:layout_below="@id/protosslogo2"
    android:layout_marginLeft="25dp" />

<CheckBox
    android:id="@+id/ck_z2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/zerglogo1"
    android:layout_below="@id/zerglogo2"
    android:layout_marginLeft="25dp" />

<Spinner
    android:id="@+id/s_answertime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="80dp" />

<Spinner
    android:id="@+id/s_gametime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/s_answertime"
    android:layout_alignBottom="@+id/s_answertime"
    android:layout_centerHorizontal="true" />

<Spinner
    android:id="@+id/s_mistakenumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="80dp" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ck_t2"
    android:layout_marginRight="18dp"
    android:layout_marginTop="17dp"
    android:gravity="center_vertical|center_horizontal"
    android:text="Choose your opponets race(s) and your race(s)"
    android:textSize="30dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/s_gametime"
    android:gravity="center_vertical|center_horizontal"
    android:text="Answer Time"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignParentRight="true"
    android:gravity="center_vertical|center_horizontal"
    android:text="Mistakes \nAllowed"
    android:textSize="15dp" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/s_gametime"
    android:layout_centerHorizontal="true"
    android:gravity="center_vertical|center_horizontal"
    android:text="Game Length"
    android:textSize="15dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:18:41.057

尝试将属性添加`android:layout_below="@id/textview4`到 s_answertime。您可能需要移动 textview4 使其高于 s_answertime：

```
 <CheckBox
    android:id="@+id/ck_z2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/zerglogo1"
    android:layout_below="@id/zerglogo2"
    android:layout_marginLeft="25dp" />
<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ck_t2"
    android:layout_marginRight="18dp"
    android:layout_marginTop="17dp"
    android:gravity="center_vertical|center_horizontal"
    android:text="Choose your opponets race(s) and your race(s)"
    android:textSize="30dp" />

<Spinner
    android:id="@+id/s_answertime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="80dp"
    android:layout_below="@id/textview4 />\ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:04:34.207

简单地制作另一个布局怎么样？

将具有相同名称的 XML 文件放入“layout-xlarge”文件夹，或者如果您需要将其放在一个文件中，请尝试使用带有权重属性 (layout_width/height = 0dp) 的 LinearLayout 来扩展您的视图元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:48:08.463

```
 android:layout_below="@id/textview4 />\
                 <?xml version="1.0" encoding="utf-8"?> 

        <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <Spinner
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/Spinner"
        /> 
```

# facebook - 如何在没有滚动条的情况下将页面标签高度设置为自动？

> ID：11354083
> 
> 赞同：1
> 
> 时间：2012-07-05T23:49:25.693
> 
> 标签：facebook, tabs, height, scrollbar

如果 iframe 中的页面大于 800 像素，我的页面选项卡总是有滚动条。我看到在该高级设置中有一个“将画布高度设置为流体”，但这似乎没有帮助。我尝试了其他建议，例如添加

```
 <script type="text/javascript">
    window.fbAsyncInit = function() {
    FB.Canvas.setSize();
   }
   // Do things that will sometimes call sizeChangeCallback()
   function sizeChangeCallback() {
    FB.Canvas.setSize();
   }
   </script> 
```

但似乎不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:52:52.730

尝试在您的 CSS 文件或 HTML 文件的标题中添加此 CSS 样式，

```
<style type="text/css">
body { overflow:hidden; }
</style> 
```

在这里，我回答了一个类似的问题 - [https://stackoverflow.com/a/11324976/555760](https://stackoverflow.com/a/11324976/555760)，
关于画布`setSize()`，`setDoneLoading()`并且`setAutoGrow()`，

```
FB.Canvas.setSize({ width: 810, height: 950 });

FB.Canvas.setDoneLoading( function(response) {
    console.log(response.time_delta_ms);
    FB.Canvas.setAutoGrow();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T19:54:26.613

在尝试了上述建议和许多其他可能的修复后，唯一有效的方法是创建一个新的 facebook 应用程序。

我确实使用了以下代码：

```
window.fbAsyncInit = function() {
FB.Canvas.setAutoGrow();
} 
```

但即使这样也行不通，直到我创建了一个新应用程序。我不确定，但我认为原始应用程序可能已损坏或太旧。

# c# - GC.Collect() 没有立即收集？

> ID：11354086
> 
> 赞同：5
> 
> 时间：2012-07-05T23:49:42.560
> 
> 标签：c#, garbage-collection, destructor, finalizer

在聊天的讨论过程中，我编写了这个控制台应用程序。

## 代码：

```
using System;

class Program
{
    static void Main(string[] args)
    {
        CreateClass();
        Console.Write("Collecting... ");
        GC.Collect();
        Console.WriteLine("Done");
    }

    static void CreateClass()
    {
        SomeClass c = new SomeClass();
    }
}

class SomeClass
{
    ~SomeClass()
    {
        throw new Exception();
    }
} 
```

## 结果：

```
Collecting... Done

Unhandled Exception: System.Exception: Exception of type 'System.Exception' was
thrown.
   at SomeClass.Finalize() 
```

我本来希望该应用程序在打印*之前崩溃。* `Done`

我不太关心如何制作它。我的问题是，**为什么不呢？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T23:55:41.653

不能在单个垃圾收集过程中收集具有终结器的对象。这些对象被移动到`f-reachable`队列中，并一直保留在那里，直到调用终结器。只有在那之后，它们才能被垃圾收集。

以下代码更好，但无论如何您都不应该依赖它：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

此外，在终结器中抛出异常对我来说似乎太残酷了，即使是出于测试目的。

此外，终结器的有趣副作用：如果`this`在终结器中存储引用（将其分配给某个静态变量），具有终结器的对象仍然可以“复活”自身（有效地防止自身的垃圾收集）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T23:53:14.240

你读过[文档](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)吗？

> 使用此方法**尝试**回收所有不可访问的内存。

它不是一个命令，它是一个请求，它可能会也可能不会如你所愿。无论如何，这通常不是一个好主意（有时由于某些过程而创建了很多很多小的、短暂的对象，在这种情况下调用*可能是*有益的`GC.Collect`，但这种情况很少见）。

由于您似乎不是在尝试解决真正的问题，而是在玩弄 GC，这是我必须提供的最佳建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T15:11:16.923

在最常见的垃圾收集器实现中，在垃圾收集周期内不能运行任何托管用户代码。 `Finalize`方法算作用户代码。虽然理论上系统可以在`Finalize`方法执行时冻结所有其他用户代码，但这种行为会增加多核系统上垃圾收集的明显成本，并增加死锁的可能性。为避免这些问题，系统不会将`Finalize`方法作为垃圾回收的一部分运行，而是构建一个对象列表，这些对象需要`Finalize`方法运行（该列表称为“freachable queue”）。列表本身被认为是一个有根引用，因此任何被 freachable 队列中的对象引用的对象都将被认为是强根的，至少直到系统从队列中检索 freachable 对象，运行它的`Finalize`方法，并丢弃参考。

微软关于终结的早期文档非常混乱，因为它表明当这些方法运行时，终结对象持有引用的对象可能不存在。事实上，所有这些对象都保证存在；不确定的是他们是否已经`Finalize`运行了他们的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T11:43:59.677

1.  GC.Collect() 将那些未被引用且具有终结器方法的对象放入终结器队列。
2.  它将通过调用 finalize 方法来清除终结器队列。

如果上述两点很清楚，那么您的代码在静态方法中保存了对 SomeClass 的引用。这意味着它在程序的 main 方法执行之前仍然存在。

如果您希望您的应用程序在打印“完成”之前崩溃，则首先使您的 SomeClass 对象无效，然后调用 GC.Collect。它会将您的对象放入终结器队列中，但它再次希望 GC 何时清除该队列。如果您希望 GC 清除该队列并调用终结器，则调用 GC.WaitForPendingFinalizers()。您的线程将等到您的终结器被调用，然后它将继续。我修改了您的代码以获得所需的输出。我没有抛出异常，而是在终结器中打印了一条语句。

```
class Program
    {
        static void Main(string[] args)
        {
            CreateClass();
            Console.Write("Collecting... ");
            GC.Collect();
            GC.WaitForPendingFinalizers();
            Console.WriteLine("Done");

            Console.ReadLine();
        }

        static void CreateClass()
        {
            SomeClass c = new SomeClass();
            c = null;
        }
    }

    class SomeClass
    {
        ~SomeClass()
        {
            Console.WriteLine("Finalized...");
        }
    } 
```

# python - 无法从 cmd 行运行 Python

> ID：11354090
> 
> 赞同：4
> 
> 时间：2012-07-05T23:49:55.160
> 
> 标签：python, python-3.x

我是一名编程（和 Python）新手。我无法在 WinXP 64 位笔记本电脑的命令提示符下运行任何 python 脚本。我分配了路径并通过输入 set path 来确认它。我有 Python32。我收到以下消息：

```
>>>python hello.py

File <”stdin”&gt; , Line1
  Python hello.py
             ^
SyntaxError: Invalid syntax 
```

以下是我尝试过的脚本：

```
#!/usr/bin/python
message = "Hello, world!"
print(message) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T23:52:31.037

你应该输入这个

```
python hello.py 
```

在 dos/cmd 提示符下，而不是在 Python 解释器中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T00:00:29.997

像这样做：

转到目录（在我的示例中为 python32）并键入`python hello.py`.

如果您只输入`python`cmd 那么它将启动 python 解释器，然后`python hello.py`返回语法错误。

![在此处输入图像描述](../Images/31ecf388d0cf96a7ada656037660f418.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:05:44.357

在解释器中执行此操作的另一种方法是仅导入不带 .py 的模块名称，例如，在您的情况下：

```
>>>import hello 
```

会回来

```
Hello, World! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T23:53:09.670

您正在 Python shell 中键入命令，请在 DOS 提示符下执行。

IE，

```
 C:\somepath\> python hello.py 
```

因为你已经在路径上有了 python 可执行文件（第 1 个问题通常是当事情不起作用时），你应该设置好去。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T23:54:04.260

`python`是您用来运行脚本的命令，因此您可以在 shell 中运行它。在 Windows 中，这将是命令提示符（运行>“cmd”）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T23:57:12.180

您在 python 解释器中，而不是在 windows 命令行中。

要打开 Windows 命令行，请转到

**开始 -> 所有程序 -> 附件 -> 命令提示符**

然后，您需要切换到存储 hello.py 的目录。如果它在您的桌面上，您将执行以下操作：

```
cd Desktop 
```

然后你可以这样做：

```
python hello.py 
```

它会起作用的。

# java - 带有 log4j 配置的码头

> ID：11354092
> 
> 赞同：2
> 
> 时间：2012-07-05T23:50:29.750
> 
> 标签：java, log4j, jetty, slf4j

我能够很好地为我的 Web 应用程序设置 log4j，但是在配置码头日志消息以使用 log4j 时遇到了困难。我不断收到这个

```
Establishing start.log on Thu Jul 05 16:44:54 PDT 2012
log4j:WARN No appenders could be found for logger (org.eclipse.jetty.util.log).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我实际上将我的 log4j.properties 文件复制并粘贴到了我的码头主页（lib 等，上下文，资源，webapps）的每个目录中。我目前在 lib/ext 中有 log4j-1.2.17.jar、slf4j-api-1.6.5.jar 和 slf4j-log4j12-1.6.5.jar，jetty 似乎可以检测到。

有任何想法吗？谢谢

# android - OpenGL ES 2.0 中滚动列表的淡入淡出效果

> ID：11354094
> 
> 赞同：1
> 
> 时间：2012-07-05T23:50:49.317
> 
> 标签：android, opengl-es, scroll, effects, fragment-shader

我正在尝试在 Android 上的 OpenGL ES 2.0 中创建一个滚动列表，并且我希望列表的内容在列表到达顶部或底部时淡出。现在我正在片段着色器中实现它，但它非常慢。

这是我的着色器

```
precision mediump float;

uniform bool uEnableTexture;
uniform sampler2D uTexture;
uniform bool uEnableFade;
uniform float uTopFade;
uniform float uBottomFade;
uniform float uFadeWidth;

varying vec4 vPosition;
varying vec2 vTexCoord;
varying vec4 vColor;

void main(){
    if (uEnableTexture) {
        gl_FragColor = texture2D(uTexture, vTexCoord) * vColor;
    } else {
        gl_FragColor = vColor;
    }

    if (uEnableFade) {
        if (vPosition.y > uTopFade) {
            gl_FragColor = gl_FragColor * 0.0;
        } else if (vPosition.y > uTopFade - uFadeWidth) {
            gl_FragColor = gl_FragColor * (1.0 - (vPosition.y - (uTopFade - uFadeWidth)) / uFadeWidth);
        } else if (vPosition.y < uBottomFade) {
            gl_FragColor = gl_FragColor * 0.0;
        } else if (vPosition.y < uBottomFade + uFadeWidth) {
            gl_FragColor = gl_FragColor * (1.0 + (vPosition.y - (uBottomFade + uFadeWidth)) / uFadeWidth);
        }
    }
} 
```

这是我想要达到的效果。 ![效果截图](../Images/c8beb67127e5e5a164ad9c5c50d418b2.png)

有没有更有效的方法来实现这一目标？

编辑：我可以通过使用单独的程序并仅在需要淡入淡出时使用此着色器来改进这一点。

```
void main(){
    gl_FragColor = texture2D(uTexture, vTexCoord) * vColor;

    if (vPosition.y > uTopFade - uFadeWidth) {
        gl_FragColor = gl_FragColor * (1.0 - (vPosition.y - (uTopFade - uFadeWidth)) / uFadeWidth);
    } if (vPosition.y < uBottomFade + uFadeWidth) {
        gl_FragColor = gl_FragColor * (1.0 + (vPosition.y - (uBottomFade + uFadeWidth)) / uFadeWidth);
    }
} 
```

我可以通过将其拆分为另外两个着色器来加快速度，一个用于顶部，一个用于底部，或者使用 uFadeWidth 来确定方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:16:32.390

您最好的选择可能不是在着色器中进行数学运算，而是预先计算一个 1 像素宽且与视口一样“高”的“渐变纹理”。

在这个纹理中，您可以存储每个屏幕*y*的淡入淡出值。

然后，在您的着色器中，您将得到另一个`texture2D`调用和一个乘法。

# c# - 是否可以在应用程序域上限制性能或设置配额？

> ID：11354097
> 
> 赞同：2
> 
> 时间：2012-07-05T23:51:12.297
> 
> 标签：c#, performance, appdomain

我知道我可以查看某些计数器，例如内存使用情况，但我可以对单个应用程序域施加限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:29:55.043

我曾经在一个我们试图做类似事情的系统上工作。

使用常规的 .NET CLR，您只能获得非常粗糙的控件。您可以找出 AppDomain 正在使用多少内存，但它往往不是最新的，并且随着内存压力的增加 - 变得完全不可靠。

但是，如果您愿意达到通过 C++ 托管 CLR 并使用[CLR Hosting APIs](http://msdn.microsoft.com/en-us/magazine/cc163567.aspx#S2)的水平，则可能有一种方法可以做到这一点。

我被告知可以做一些事情，例如拦截来自托管 CLR 的内存分配请求。您也可以限制 I/O 请求和 CPU 利用率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T00:12:39.203

不，没有内置机制来限制 .Net 应用程序在 AppDomain 级别（甚至在进程级别）上的任何资源使用。它包括内存使用率、网络使用率、CPU 使用率。

您可以在 AppDomains 的 .Net 级别上设置权限限制（代码访问安全），但控制量基本上停在那里。

唯一的内置机制是限制整个进程的内核使用 CPU。剩下的就交给申请处理了。

# c++ - 自动依赖生成

> ID：11354098
> 
> 赞同：0
> 
> 时间：2012-07-05T23:51:16.513
> 
> 标签：c++, gcc, compilation, makefile, dependencies

我正在阅读[制作手册中的](http://www.makelinux.net/make3/)[自动依赖生成](http://www.makelinux.net/make3/make3-CHP-2-SECT-7)，但我无法弄清楚为什么需要此功能。我正在从事并从头开始编写的项目的结构如下：

*   每个单元（库）都有自己的文件夹
*   每个 .cpp 文件应包含来自同一目录的同名的单个 .h 文件。好的，这条规则可能有点过于严格，比如在循环依赖的情况下，在这种情况下，我可能会包含另一个 .h 文件，就像下一条规则中描述的那样
*   在 .h 文件中包含其他头文件时，如果依赖项位于另一个单元（库）中，请始终使用相对于项目根目录的路径。否则，只需包含文件名。

在makefile中，我传递`-I .`给编译器。当它在X目录中遇到一个.cpp文件时，它会在同一个目录（或目录中）搜索.h文件`.`。在解析 .h 文件时，它会遇到相对于`.`文件夹的包含，因此它会知道在哪里查找它们。

`-M`现在，如果代码可以像我上面描述的那样结构化，为什么有人要生成一个带有标志的依赖项列表并使用 sed 来生成一个晦涩的 .d 文件（依赖项 fie）？我看不到从代码文件生成特定依赖项列表的意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:03:28.227

因为在实践中，每个源文件都会依赖多个头文件。如果每次这些标头发生更改时您都没有重新编译源文件，那么您很有可能会得到一个不一致的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T15:55:48.540

这就是[makepp](http://makepp.sourceforge.net/ "可靠的 GNU 替代品")的工作原理。自动检测依赖关系。在您的情况下，您甚至不需要生成文件（如果您不介意在命令中指定目标）。

内置的链接器规则具有自动推断目标文件的优点。如果您说`makepp proggie`，它将扫描 proggie.c（或 .cpp 或您拥有的任何内容）以查找包含语句。对于每个语句，它将查看是否有可以构建的匹配 .o 文件，如果有，则递归扫描。然后以这种方式发现的所有 .o 文件都被构建并链接在一起。

或者你的makefile可以是一个单行，以避免每次都指定目标：

```
$(phony all): proggie 
```

# javascript - Backbone.js 事件和内存管理

> ID：11354100
> 
> 赞同：2
> 
> 时间：2012-07-05T23:52:13.703
> 
> 标签：javascript, backbone.js

我想使用 Backbone.js 来处理一些事件，但我对循环引用和内存管理没有信心。假设我有一些名为 EventStation 的静态事件源 - 所以，在脚本的开头我说：

```
var source = new EventSource(); 
```

`source`旨在为页面的生命而活，这很好。现在，我还有一个事件消费者：

```
var EventConsumer = Backbone.Model.extend({
    initialize: function(params) {
        source.on("some_event",this.onSomeEvent,this);
    }
});

function later() {
    var consumer = new EventConsumer();

    // consumer now gets leaked... (I think)
} 
```

我`later()`在某个时候打电话 - 最后，我不再可以访问消费者，除非我去挖掘`source`. 我想我需要添加一些新功能`EventConsumer`，比如

```
cleanup: function() {
    source.off("some_event",this.onSomeEvent,this);
} 
```

然后在`later()`.

这似乎......不像我想要的那样干净。有没有办法更好地做到这一点？如果我使用 DOM 事件，这会有所不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T01:51:30.240

读这个：

[http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

虽然它专门讨论了视图，但它适用于任何事件绑定对象。

还有这个：

[Backbone.js：重新填充或重新创建视图？](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view/7607853#7607853)

Johnny Oshika 用他的“bindTo”方法和“unbindAll”方法管理事件绑定和解除绑定的想法非常出色。我强烈建议在为您管理事件的对象中使用这些方法。

如果你想要一个实现，我将它内置到我的 Backbone.Marionette 框架中，在这里：

[https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.bindto.js](https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.bindto.js)

此代码是 MIT 许可的开源代码，因此您可以自由复制它并在任何您想要的地方使用它......无需使用 Marionette 来获得此功能。

要使用 BindTo 对象，请将其扩展为您自己的对象：

```
 var source = _.extend({}, Backbone.Marionette.BindTo); 
```

或将其用作原型：

```
 var source = Object.create(Backbone.Marionette.BindTo); 
```

然后绑定将事件源作为第一个参数传递的事件，之后使用所有标准 Backbone 事件参数：

```
 source.bindTo(myObj, "some_event", this.doStuff, this); 
```

并解开一切，

```
 source.unbindAll(); 
```

我的实现文档可以在这里找到：

[https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.bindto.md](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.bindto.md)

# html - 仅当值以 http 开头时，html 链接是否相对？

> ID：11354114
> 
> 赞同：0
> 
> 时间：2012-07-05T23:53:22.817
> 
> 标签：html, hyperlink

例如 html

```
<a href="www.yahoo.com">free e-mail and news</a> 
```

被视为相对但

```
<a href="http://www.yahoo.com">free e-mail and news</a> 
```

到[yahoo.com](http://www.yahoo.com)的链接。这就是它的全部吗，链接是绝对的唯一方法是它以 http 还是 https 开头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:00:58.543

如果一个 URL`absolute`以任何 access 开头，则称它是有格式的`protocol`。
一般语法是：

```
protocol://hostname/other_information 
```

以下是绝对 URL 的一些示例：

1.  [http://example.org/absolute/URI/with/absolute/path/to/resource.txt](http://example.org/absolute/URI/with/absolute/path/to/resource.txt)
2.  [ftp://example.org/resource.txt](ftp://example.org/resource.txt)
3.  骨灰盒:issn:1535-3613
4.  jdbc:mysql://localhost:3306/test?autoReconnect=true
5.  邮箱：ravi@somedomain.com
6.  jar:file:/home/username/Desktop/some.jar

相对 URL 是相对于浏览器、控制台或工作区上某个位置的当前路径。

例如
，如果您在`http://yahoo.com/`页面上并且任何链接指向`/mail`而不是，`http://mail.yahoo.com`那么它是相对于 yahoo 网络路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:59:29.947

> 绝对链接定义 Web 文件或文档的特定位置，包括：用于获取文档的协议、从中获取它的服务器、它所在的目录以及文档本身的名称。下面是一个绝对链接的例子：

```
<a href="http://www.domain.com/pagename.html"></a> 
```

> 通过相对链接，搜索引擎蜘蛛和浏览器已经知道当前文档的位置。因此，如果您链​​接到同一目录中的另一个文档，则无需写出完整的 URL。只有文件名是必需的。下面是一个相对链接的例子：

```
<a href="pagename.html"></a> 
```

[**参考。**](http://www.webpronews.com/absolute-vs-relative-links-which-is-better-for-the-search-engines-2004-08)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:59:33.117

是的。请参考下面的链接，它解释了超链接的语法。

[HTML 基础：超链接语法——绝对、相对和根相关](http://designisphilosophy.com/tutorials/html-basics-hyperlink-syntax-absolute-relative-and-root-relative/)

> 绝对超链接是包含 URL 的所有元素的完整地址。它们总是以某个版本的 http:// 开头，后跟域名（例如 www.designisphilosophy.com）和可选的页面/文件夹。当链接到当前站点之外的具有不同域名的页面时，使用绝对超链接。

# browser - Eclipse Juno 内部 Web 浏览器不可用 (Ubuntu)

> ID：11354115
> 
> 赞同：6
> 
> 时间：2012-07-05T23:53:25.773
> 
> 标签：browser, ubuntu-12.04, eclipse-juno

我在 Ubuntu Precise 上安装了 Eclipse (Juno)，但无法使用 Eclipse 的内部网络浏览器。我收到此错误：

SWT 浏览器控件不可用

我四处搜寻，并没有找到可行的解决方案。

谢谢你的帮助！

麦克风

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T00:08:54.690

我确实找到了一个有效的解决方案：

sudo apt-get install libwebkitgtk-1.0-0

不过，我不确定为什么。

麦克风

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T02:12:21.103

在 Linux 下，SWT 浏览器小部件可以使用 Mozilla XULRunner 或 Webkit [1](http://www.eclipse.org/swt/faq.php#browserlinux)。我在 Linux 发行版中包含的 Web 浏览器、XULRunner 和 SWT 接受的内容之间存在版本冲突。使用 Webkit 似乎是一种更简单的方法。如果您同时安装了 XULRunner 和 Webkit，请参见图[2](http://www.eclipse.org/swt/faq.php#browserwebkitgtk)选择特定的工具包。

# python - Python确保对象出现在列表末尾

> ID：11354117
> 
> 赞同：1
> 
> 时间：2012-07-05T23:53:41.420
> 
> 标签：python, list, sorting

我有一个工作课程。这是带有一些示例作业的简化版本：

```
class Job:
    def __init__(self, type):
        self.type = type
    def __repr__(self):
        return '< %s >' % self.type

job1 = Job('Copy')
job2 = Job('Delete')
job3 = Job('Scan')

jobs = [job1,job2,job3] 
```

在我的应用程序中，作业被随机添加到`jobs`列表中（从数据库中），但我需要确保所有`Delete`作业最后发生。我能想到的最简单的方法是确保将`Delete`作业移动到列表的末尾，然后按顺序处理列表。但是，当排序标准是类的属性时，我不确定如何做到这一点，并且是否可以保证在处理作业时列表将按顺序迭代？任何建议都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T23:56:01.330

```
jobs.sort(key=lambda x:x.type=="Delete") 
```

键将`False`用于“复制”或“扫描”作业以及`True`“删除”作业。由于`True`> `False`“删除”作业将被排序到最后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:58:08.477

保证排序是稳定的，所以只需实现`__cmp__`：

```
class Job:
    def __init__(self, type):
        self.type = type
    def __repr__(self):
        return '< %s >' % self.type
    def __cmp__(self, other):
        if self.type == 'Delete':
            return 0 if other.type == 'Delete' else 1

        return -1 if other.type == 'Delete' else 0 
```

并在处理前对列表进行排序：

```
jobs.sort() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:56:47.487

这是一个`'Delete'`在线性时间内将工作转移到最后的函数。但它不会保持秩序。`sort`在半排序数据和短列表上使用可能会更快，但我想我会发布一个替代方案，因为[gnibbler](https://stackoverflow.com/a/11354133/577088)击败了我到排序选项（并且在启动时做得更好）。

```
def shift_delete_jobs(jobs):
    end = len(jobs) - 1
    for i in reversed(range(len(jobs))):
        if jobs[i].type == 'Delete':
            jobs[end], jobs[i] = jobs[i], jobs[end]
            end -= 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T23:57:10.807

我会做一个工作容器类：

```
class JobContainer(object):
  def __init__(self, jobs):
    self.jobs = jobs

  def get_type(self, type, invert=False):
    return [job for job in jobs if (job.type == type) ^ invert]

  def get_jobs(self):
    return self.get_type('Delete', invert=True) + self.get_type('Delete') 
```

然后像这样使用它：

```
jobs = JobContainer([job1, job2, job3])
print jobs.get_jobs() 
```

任何关于如何改进`get_jobs`功能的建议都会很棒，因为它看起来有点讨厌。

# c++ - 在 OpenGL 中显示立方体的问题

> ID：11354129
> 
> 赞同：1
> 
> 时间：2012-07-05T23:55:45.717
> 
> 标签：c++, opengl, glsl

我目前正在尝试遵循[本教程](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-4-a-colored-cube/)。但是有一些问题，对于初学者来说，因为我在 Mac 上，GLSL 语言的最大值为 1.5（我决定使用 1.1）并且本教程需要 3.3，本教程也使用不同的窗口系统（我正在使用他们正在使用的 GLUT GLFW[在这里](http://code.google.com/p/opengl-tutorial-org/source/browse/#hg/tutorial04_colored_cube)查看所有站点教程的完整源代码）。我目前已经重新安排了代码，让它在我的电脑上运行：

```
//OpenGL and GLEW
#include <GL/glew.h>
//Include GLUT
#ifdef __APPLE__
# include <GLUT/glut.h>
#else
# include <GL/glut.h>
#endif
//Some standard libraries
#include <vector>
#include <string>
#include <stdio.h>
#include <fstream>
#include <math.h>
//For transofmations.
#include "glm.hpp"
#include "transform.hpp"
//max macro for my Mac.
#define max( a, b ) ( ((a) > (b)) ? (a) : (b) )

//Vertex data for cube. Direct copy and paste for the coordinates from the website.
static const GLfloat g_vertex_buffer_data[] = { 
        -1.0f,-1.0f,-1.0f,
        -1.0f,-1.0f, 1.0f,
        -1.0f, 1.0f, 1.0f,
        1.0f, 1.0f,-1.0f,
        -1.0f,-1.0f,-1.0f,
        -1.0f, 1.0f,-1.0f,
        1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        -1.0f,-1.0f,-1.0f,
        -1.0f,-1.0f,-1.0f,
        -1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f,-1.0f,
        1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f, 1.0f,
        -1.0f,-1.0f,-1.0f,
        -1.0f, 1.0f, 1.0f,
        -1.0f,-1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f,-1.0f,
        1.0f,-1.0f,-1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
        1.0f, 1.0f,-1.0f,
        -1.0f, 1.0f,-1.0f,
        1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f,-1.0f,
        -1.0f, 1.0f, 1.0f,
        1.0f, 1.0f, 1.0f,
        -1.0f, 1.0f, 1.0f,
        1.0f,-1.0f, 1.0f
};

//Color data for cube. Direct copy and paste from the site.
static const GLfloat g_color_buffer_data[] = {
    0.583f,  0.771f,  0.014f,
    0.609f,  0.115f,  0.436f,
    0.327f,  0.483f,  0.844f,
    0.822f,  0.569f,  0.201f,
    0.435f,  0.602f,  0.223f,
    0.310f,  0.747f,  0.185f,
    0.597f,  0.770f,  0.761f,
    0.559f,  0.436f,  0.730f,
    0.359f,  0.583f,  0.152f,
    0.483f,  0.596f,  0.789f,
    0.559f,  0.861f,  0.639f,
    0.195f,  0.548f,  0.859f,
    0.014f,  0.184f,  0.576f,
    0.771f,  0.328f,  0.970f,
    0.406f,  0.615f,  0.116f,
    0.676f,  0.977f,  0.133f,
    0.971f,  0.572f,  0.833f,
    0.140f,  0.616f,  0.489f,
    0.997f,  0.513f,  0.064f,
    0.945f,  0.719f,  0.592f,
    0.543f,  0.021f,  0.978f,
    0.279f,  0.317f,  0.505f,
    0.167f,  0.620f,  0.077f,
    0.347f,  0.857f,  0.137f,
    0.055f,  0.953f,  0.042f,
    0.714f,  0.505f,  0.345f,
    0.783f,  0.290f,  0.734f,
    0.722f,  0.645f,  0.174f,
    0.302f,  0.455f,  0.848f,
    0.225f,  0.587f,  0.040f,
    0.517f,  0.713f,  0.338f,
    0.053f,  0.959f,  0.120f,
    0.393f,  0.621f,  0.362f,
    0.673f,  0.211f,  0.457f,
    0.820f,  0.883f,  0.371f,
    0.982f,  0.099f,  0.879f
};

//Used to check if shaders are working. (http://content.gpwiki.org/index.php/OpenGL:Codes:Simple_GLSL_example is where I got this from)
void printLog(GLuint obj)
{
    int infologLength = 0;
    int maxLength;

    if(glIsShader(obj))
        glGetShaderiv(obj,GL_INFO_LOG_LENGTH,&maxLength);
    else
        glGetProgramiv(obj,GL_INFO_LOG_LENGTH,&maxLength);

    char infoLog[maxLength];

    if (glIsShader(obj))
        glGetShaderInfoLog(obj, maxLength, &infologLength, infoLog);
    else
        glGetProgramInfoLog(obj, maxLength, &infologLength, infoLog);

    if (infologLength > 0)
        printf("%s\n",infoLog);
}

//Loads the vertex and fragment shader.
GLuint LoadShaders(const char * vertex_file_path,const char * fragment_file_path){

    // Create the shaders
    GLuint VertexShaderID = glCreateShader(GL_VERTEX_SHADER);
    GLuint FragmentShaderID = glCreateShader(GL_FRAGMENT_SHADER);

    // Read the Vertex Shader code from the file
    std::string VertexShaderCode;
    std::ifstream VertexShaderStream(vertex_file_path, std::ios::in);
    if(VertexShaderStream.is_open())
    {
        std::string Line = "";
        while(getline(VertexShaderStream, Line))
            VertexShaderCode += "\n" + Line;
        VertexShaderStream.close();
    }

    // Read the Fragment Shader code from the file
    std::string FragmentShaderCode;
    std::ifstream FragmentShaderStream(fragment_file_path, std::ios::in);
    if(FragmentShaderStream.is_open()){
        std::string Line = "";
        while(getline(FragmentShaderStream, Line))
            FragmentShaderCode += "\n" + Line;
        FragmentShaderStream.close();
    }

    GLint Result = GL_FALSE;
    int InfoLogLength;

    // Compile Vertex Shader
    printf("Compiling shader : %s\n", vertex_file_path);
    char const * VertexSourcePointer = VertexShaderCode.c_str();
    glShaderSource(VertexShaderID, 1, &VertexSourcePointer , NULL);
    glCompileShader(VertexShaderID);
    printLog(VertexShaderID);

    // Compile Fragment Shader
    printf("Compiling shader : %s\n", fragment_file_path);
    char const * FragmentSourcePointer = FragmentShaderCode.c_str();
    glShaderSource(FragmentShaderID, 1, &FragmentSourcePointer , NULL);
    glCompileShader(FragmentShaderID);
    printLog(FragmentShaderID);

    // Link the program
    fprintf(stdout, "Linking program\n");
    GLuint ProgramID = glCreateProgram();
    glAttachShader(ProgramID, VertexShaderID);
    glAttachShader(ProgramID, FragmentShaderID);
    glLinkProgram(ProgramID);

    // Check the program
    glGetProgramiv(ProgramID, GL_LINK_STATUS, &Result);
    glGetProgramiv(ProgramID, GL_INFO_LOG_LENGTH, &InfoLogLength);
    std::vector<char> ProgramErrorMessage( max(InfoLogLength, int(1)) );
    glGetProgramInfoLog(ProgramID, InfoLogLength, NULL, &ProgramErrorMessage[0]);
    fprintf(stdout, "%s\n", &ProgramErrorMessage[0]);

    //Clean up.
    glDeleteShader(VertexShaderID);
    glDeleteShader(FragmentShaderID);

    return ProgramID;
}

void display() {
    //Enable depth.
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LESS);
    //Clear screen.
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //Create the vertexbuffer.
    GLuint vertexbuffer;
    glGenBuffers(1, &vertexbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data,  GL_STATIC_DRAW);

    //Create the color buffer.
    GLuint colorbuffer;
    glGenBuffers(1, &colorbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, colorbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_color_buffer_data), g_color_buffer_data, GL_STATIC_DRAW);

    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glVertexAttribPointer(
                          0,
                          3,
                          GL_FLOAT,
                          GL_FALSE,
                          0,
                          (void*)0
                          );

    glEnableVertexAttribArray(1);
    glBindBuffer(GL_ARRAY_BUFFER, colorbuffer);
    glVertexAttribPointer(
                          1,
                          3,
                          GL_FLOAT,
                          GL_FALSE,
                          0,
                          (void*)0
                          );

    //Draw the cube. 12 triangles, 3 vertices per triangle thus 12*3.
    glDrawArrays(GL_TRIANGLES, 0, 12*3);

    //Clean Up.
    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);

    //Display on screen
    glutSwapBuffers();
}

int main(int argc, char** argv) {

    //Init stuff.
    glutInit(&argc, argv);

    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
    glutInitWindowSize(400, 300);
    glutCreateWindow("Triangle");

    GLenum err = glewInit();
    if (GLEW_OK != err)
    {
        /* Problem: glewInit failed, something is seriously wrong. */
        fprintf(stderr, "Error: %s\n", glewGetErrorString(err));
    }
    fprintf(stdout, "Status: Using GLEW %s\n", glewGetString(GLEW_VERSION));

    //Create the shaders.
    GLuint programID = LoadShaders("/Users/person/Programming/C++/OpenGL Cube/OpenGL Cube/v.vsh", "/Users/person/Programming/C++/OpenGL Cube/OpenGL Cube/f.fsh");

    glUseProgram(programID);

    //Set the camera and stuff.
    glm::mat4 Projection = glm::perspective(45.0f, 4.0f/3.0f, 0.1f, 100.0f);

    glm::mat4 View = glm::lookAt(
                                 glm::vec3(4.0f,3.0f,3.0f),
                                 glm::vec3(0.0f,0.0f,0.0f),
                                 glm::vec3(0.0f,1.0f,0.0f)
                                 );

    glm::mat4 Model = glm::mat4(1.0f);

    glm::mat4 MVP = Projection * View * Model;

    GLuint MatrixID = glGetUniformLocation(programID, "MVP");
    glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

    //Get stuff to display.
    glutDisplayFunc(display);

    glutMainLoop();
    return 0;
} 
```

顶点着色器代码：

```
#version 110

uniform mat4 MVP;
attribute vec2 position;
attribute vec3 vertexColor;

varying vec4 fragmentColor;

void main() {
    gl_Position = MVP * vec4(position, 0.0, 1.0);
    fragmentColor = vec4(vertexColor, 1.0);
} 
```

片段着色器代码：

```
#version 110

varying vec4 fragmentColor;

void main() {
    gl_FragColor = fragmentColor;
} 
```

目前我的立方体看起来像这样：

![真棒立方体](../Images/ce9d8a2c7f699151c7f487ec9cccb078.png)

着色器编译良好，没有错误消息。

很抱歉，如果这看起来代码太多或什么的，但我真的不知道要删减什么，如果你有什么要我特别指出的，请询问。

**更新**

谢谢蒂姆的建议，但我仍然遇到一些问题（尽管看起来更好）。我在显示函数中更改了以下代码行，所以我不假设哪个属性是哪个：

```
GLuint loc1;
loc1 = glGetAttribLocation(program, "position");
glEnableVertexAttribArray(loc1);
printf("%d\n", loc1);
glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
glVertexAttribPointer(
                      loc1,
                      3,
                      GL_FLOAT,
                      GL_FALSE,
                      0,
                      (void*)0
                      );

GLuint loc2 = glGetAttribLocation(program, "vertexColor");
glEnableVertexAttribArray(loc2);
printf("%d\n", loc2);
glBindBuffer(GL_ARRAY_BUFFER, colorbuffer);
glVertexAttribPointer(
                      loc2,
                      3,
                      GL_FLOAT,
                      GL_FALSE,
                      0,
                      (void*)0
                      ); 
```

除了创建一个全局变量`program`之外，`programID`我还可以在我的显示函数中使用它的值。现在看起来像这样：

![在此处输入图像描述](../Images/97f432d651ec1b89413ebd2fa956b5a5.png)

任何人有任何进一步的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T00:10:50.487

一方面，假设属性的位置是不好的。您任意假设“顶点”是属性 0，而“颜色”是属性 1。这是一个危险的假设。您想要调用`glGetAttribLocation`以获取他们的真实位置，或者`glBindAttribLocation`在链接之前调用以将变量分配给位置。

您混乱的结果看起来几乎就像您提供顶点作为颜色，反之亦然。

此外，您正在着色器中读取 2d 顶点，同时提供 3d 顶点信息。您可能希望保持一致。

# javascript - 除非我事先调用 alert('time waste')，否则 JQuery css() 效果会反转？

> ID：11354135
> 
> 赞同：0
> 
> 时间：2012-07-05T23:56:14.593
> 
> 标签：javascript, jquery, internet-explorer

代码段以插件方法运行，即`$.fn.insideThisMethod()`在页面加载时调用。在方法内部，它调用

`$obj.css('height',$(window).height());`

在 Chrome 中运行良好。IE9 但是我遇到以下情况： 在页面加载时，我可以看到一瞬间（当 jquery 尚未被触发时）`$obj`出现的背景。到目前为止，一切都很好。然后，当页面加载运行 jquery 代码时，背景中的另一个对象出现在它的位置，即由于`$obj`某种原因消失了。防止这种情况的唯一方法是`alert('whatever');`在进行上述调用之前将 a 放入 jquery 代码中`$obj.css()`。在这种情况下`$obj`，它应该在屏幕上的位置不会消失，一切都很好。请注意，如果我在调用 后发出警报，`$obj.css()`单击`$obj`确定后仍会从视图中消失。

我知道这是含糊的，但把它放在这里以防这可能是 jquery noobs 遇到的已知错误，并且以某种方式很容易纠正。

我猜这与它在浏览器加载时运行有关，可能一个资源还没有准备好，一旦警报框被解除就准备好了。

编辑：尝试将上述内容包装在`$(document).ready(function(){})`; 但行为没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:06:31.240

尝试：

```
$obj.css('height',$(window).height() + 'px'); 
```

或者：

```
$obj.height($(window).height()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:30:39.323

我怀疑你找不到窗口高度的问题。尝试提醒窗口高度

如果窗口高度为零，则尝试在 window.load instread of document ready 处运行您的代码

```
 $(window).load(function(){
    $obj=$("SOME_SELECTOR");
    $obj.css('height',$(window).height()+'px')
  }) 
```

如果窗口高度正确，那么

有时应用样式不会强制浏览器呈现页面。在这种情况下，它与任何父元素的定位或某些元素的高度宽度有关。但我发现无论何时都很难调试。

解决方法是在元素或父元素或最后的主体上添加或删除类。

所以尝试 1 以下 1 by 1

```
$obj.css('height',$(window).height() +'px' ).addClass("dummyCalss").removeClass("dummyCalss");

or 

$obj.css('height',$(window).height() +'px' ).parenet().addClass("dummyCalss").removeClass("dummyCalss");

or

$obj.css('height',$(window).height() +'px' );
$("body").addClass("dummyCalss").removeClass("dummyCalss"); 
```

# mysql - MySQL UNIQUE 和 INDEX 在列上的使用

> ID：11354137
> 
> 赞同：1
> 
> 时间：2012-07-05T23:56:32.417
> 
> 标签：mysql, indexing, unique-index

我想为名为“用户名”的列添加快速查找和唯一性的索引。我看到一个选项可以选择`UNIQUE`或`INDEX`。我应该创建两者，还是只使用 UNIQUE？

我没有使用用户名作为主键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:59:31.613

在 MySQL 中，每当你创建一个属性`UNIQUE`时，它也会被`INDEX`-ed 。一些数据库设计者也喜欢将`UNIQUE`属性显式定义为`INDEX`，但无论您选择什么，结果都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T01:35:18.347

`UNIQUE``INDEX`为大多数数据库自动创建一个。因此，要回答您，您应该只创建一个，即`UNIQUE`. [您可以在此处](https://dba.stackexchange.com/questions/2783/does-making-a-field-unique-make-it-indexed)找到MySQL的相关线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:04:21.083

表上的主键也自动成为 mySql 中的索引。因此，如果您想让列成为索引和唯一键，则可以创建如下表：

```
 CREATE TABLE `users` (
    `username`,
     PRIMARY KEY (`username`),
     UNIQUE KEY `new_mmp_id` (`username`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

因此，最后，您在`username`字段上拥有一个索引，该索引本身就是一个唯一字段。它也是主键，自动成为索引。您从未解释表中的特定字段，例如您是否需要自动增量 id 字段

`Should I create both, or just go with UNIQUE?`

如果你必须在列上有唯一的字段`username`，那么你应该定义。创建两者，如果没有，则只需将用户名设置为作为索引的主键。

我建议你阅读这篇文章 [http://www.xaprb.com/blog/2009/09/12/the-difference-between-a-unique-index-and-primary-key-in-mysql/](http://www.xaprb.com/blog/2009/09/12/the-difference-between-a-unique-index-and-primary-key-in-mysql/)

[MySQL中的索引与键有什么区别](https://stackoverflow.com/questions/1401572/what-are-differences-between-index-v-s-key-in-mysql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:08:52.967

我的预感是`UNIQUE`会给你最好的性能提升，但`INDEX`也会给你一个提升。我认为您不想使用的唯一原因`UNIQUE`是您不希望 MySQL 在您执行 an`INSERT`或 an时处理检查唯一值`UPDATE`。

我认为你不需要两者。但我不是专家。

# android - 断电后无法启动 Android 虚拟设备

> ID：11354148
> 
> 赞同：0
> 
> 时间：2012-07-05T23:58:04.163
> 
> 标签：android, sdk, adb

我在 Win7 上运行了最新的 SDK，并设置了一些 AVD。但是，几天前停电了，从那时起，我就不会启动任何 avd。在 Eclipse IDE 中，控制台输出中没有指示 AVD 正在运行。如果我运行 AVD 管理器并尝试从那里启动，我会看到一个进度条，其标题为“正在为 AVD 'MyAVD' 启动模拟器”。

为了尝试解决此问题，我删除了所有 AVD，卸载了整个 SDK 并重新安装，但问题仍然存在。除此之外，当我运行 adb get-state 时，我得到了“未知”的返回值。

这让我有点发疯，任何帮助将不胜感激！我宁愿不走系统擦除的路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:14:34.713

似乎电源故障对注册表和/或视频驱动程序文件造成了一些损坏。删除驱动程序，也运行注册表以删除所有引用，然后重新安装 ATI 驱动程序。模拟器现在工作正常。

# python - Python：无法在 Matplotlib 中渲染 Tex

> ID：11354149
> 
> 赞同：60
> 
> 时间：2012-07-05T23:58:08.477
> 
> 标签：python, ubuntu, matplotlib, osx-snow-leopard, tex

我最近将我的笔记本电脑升级到了 Snow Leopard，将 TeX 更新到了 3.1415926 版（TeX Live 2011/MacPorts 2011_5），并安装了 Python 2.7.3。在所有这些安装之后，我运行 macport selfupdate 和 macport upgrade outdated。但是，现在当我尝试在 matplotlib 中使用 TeX 时，我收到以下信息：

```
LaTeX was not able to process the following string:'lp'
Here is the full report generated by LaTeX: 

This is pdfTeX, Version 3.1415926-2.3-1.40.12 (TeX Live 2011/MacPorts 2011_5)
 restricted \write18 enabled.  
entering extended mode (./64a53cc27244d5ee10969789771e33fa.tex
LaTeX2e <2009/09/24>
Babel <v3.8l> and hyphenation patterns for english, dumylang, nohyphenation, cz
ech, slovak, dutch, ukenglish, usenglishmax, basque, french, german-x-2009-06-1
9, ngerman-x-2009-06-19, german, ngerman, swissgerman, italian, polish, portugu
ese, spanish, catalan, galician, ukenglish, loaded.
(/opt/local/share/texmf-texlive-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/opt/local/share/texmf-texlive-dist/tex/latex/base/size10.clo))

! LaTeX Error: File `type1cm.sty' not found.

Type X to quit or <RETURN> to proceed, or enter new name. (Default extension: sty)

l.3 \renewcommand
             {\rmdefault}{pnc}^^M
No pages of output. 
```

与上[一个问题](https://stackoverflow.com/questions/6082126/tex-in-matplotlib-on-mac-os-x-and-tex-live)类似，我尝试通过以下方式在我的 python 代码中设置路径：

```
os.environ['PATH'] = os.environ['PATH'] + ':/opt/local/bin/latex' 
```

既然`which latex`屈服了`/opt/local/bin/latex`。但是，这不起作用，并显示相同的错误消息。我还尝试了 tex 的路径，以及上一个问题中的示例。不用找了。

然后我尝试通过以下方式强制可能丢失的包：

```
matplotlib.rcParams['text.latex.preamble']=[r"\usepackage{amsmath}"] 
```

但是，这也不起作用。

我可以让我的情节发挥作用的唯一方法是说`rc('text', usetex=False)`，这并不理想。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2016-05-13T20:33:33.587

在 Ubunutu 14.04 机器上，上述答案的组合有效。我`sudo apt-get install`的`dvipng`,`texlive-latex-extra`和`texlive-fonts-recommended`包 并且成功了：

```
$ sudo apt-get install dvipng texlive-latex-extra texlive-fonts-recommended 
```

编辑：从 Matplotlib 3.2.1 开始，您现在还需要该包`cm-super` （请参阅[https://github.com/matplotlib/matplotlib/issues/16911](https://github.com/matplotlib/matplotlib/issues/16911)）

```
$ sudo apt-get install dvipng texlive-latex-extra texlive-fonts-recommended cm-super 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-07-06T07:32:49.763

错误消息说您缺少`type1cm`包裹。似乎[MacPorts 将其作为`texlive-latex-extra`](https://trac.macports.org/wiki/TeXLivePackages).

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2020-03-27T16:13:06.797

我必须将`cm-super`软件包安装在 ubuntu 衍生版本中（从 Ubuntu 18.04 派生的 [jupyter/minimal-notebook ）](https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html#jupyter-minimal-notebook)`$ sudo apt-get install cm-super`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-02T19:57:31.413

在 Arch 上，你必须安装三个包：`texlive-core`, `texlive-latexextra`, `texlive-fontsextra`.

# f# - 在 F# 中匹配元组的不完整模式

> ID：11354156
> 
> 赞同：3
> 
> 时间：2012-07-05T23:59:28.310
> 
> 标签：f#, pattern-matching, tail-recursion, guard-clause

我定义一个点

```
type TimeSeriesPoint<'T> = 
    { Time : DateTimeOffset
      Value : 'T } 
```

和一系列

```
type TimeSeries<'T> = TimeSeriesPoint<'T> list 
```

我假设这个列表中的点是按时间排序的。

我正在尝试压缩两个时间序列，一般来说，它们会同时具有点，但其中任何一个都可能缺少一些点。

知道为什么我会在下面的代码中收到不完整模式匹配的警告吗？

```
let zip (series1 : TimeSeries<float>) (series2 : TimeSeries<float>) =
    let rec loop revAcc ser1 ser2 =
       match ser1, ser2 with
       | [], _ | _, [] -> List.rev revAcc
       | hd1::tl1, hd2::tl2 when hd1.Time = hd2.Time ->
           loop ({ Time = hd1.Time; Value = (hd1.Value, hd2.Value) }::revAcc) tl1 tl2
       | hd1::tl1, hd2::tl2 when hd1.Time < hd2.Time ->
           loop revAcc tl1 ser2
       | hd1::tl1, hd2::tl2 when hd1.Time > hd2.Time ->
           loop revAcc ser1 tl2
    loop [] series1 series2 
```

如果我这样写，我不会收到任何警告，但它是尾递归的吗？

```
let zip' (series1 : TimeSeries<float>) (series2 : TimeSeries<float>) =
    let rec loop revAcc ser1 ser2 =
       match ser1, ser2 with
       | [], _ | _, [] -> List.rev revAcc
       | hd1::tl1, hd2::tl2 ->
           if hd1.Time = hd2.Time then
               loop ({ Time = hd1.Time; Value = (hd1.Value, hd2.Value) }::revAcc) tl1 tl2
           elif hd1.Time < hd2.Time then
               loop revAcc tl1 ser2
           else 
               loop revAcc ser1 tl2
    loop [] series1 series2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:06:16.060

对于第一种情况，编译器只看到守卫并且不够聪明，无法推断它们何时应用/不应用 - 您可以通过删除最后一个 where 保护来解决此问题。

第二个我猜它是尾递归的，但在这些情况下最好的办法是用一个大的输入列表进行测试，看看你是否不会崩溃

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:20:01.467

一般来说，`when`在最后一个模式中有一个守卫是一种反模式。

在中，您可以通过删除冗余保护`zip`来实现相同的效果：`zip'`

```
let zip (series1: TimeSeries<float>) (series2: TimeSeries<float>) =
    let rec loop revAcc ser1 ser2 =
       match ser1, ser2 with
       | [], _ | _, [] -> List.rev revAcc
       | hd1::tl1, hd2::tl2 when hd1.Time = hd2.Time ->
           loop ({ Time = hd1.Time; Value = (hd1.Value, hd2.Value) }::revAcc) tl1 tl2
       | hd1::tl1, hd2::tl2 when hd1.Time < hd2.Time ->
           loop revAcc tl1 ser2
       | hd1::tl1, hd2::tl2 ->
           loop revAcc ser1 tl2
    loop [] series1 series2 
```

这两个函数都是尾递归的，因为在递归调用`loop`.

# git - 不一致的接收后挂钩失败

> ID：11354161
> 
> 赞同：0
> 
> 时间：2012-07-05T23:59:58.717
> 
> 标签：git, git-post-receive

我已经设置了一个工作流程，在该工作流程中我推送到服务器上的一个裸仓库，然后一个接收后挂钩将文件复制到提供该站点的文件夹中。

但是，我发现我以这种方式设置的站点中只有 50% 实际工作，另外 50% 的 post-receive 挂钩似乎没有将任何文件复制到站点目录中。

删除服务器上的所有内容并重新启动通常可以解决问题，但我想知道是否有技巧可以让这些更可靠地工作，或者是否有快速解决问题的方法 - 目前我：

1.  检查 post-receive 钩子中的路径是否正确
2.  确保接收后挂钩是可执行文件

一旦我更新/检查了这些东西，我还有什么需要做的吗？

# c# - C#解析没有名称的Json文件

> ID：11354163
> 
> 赞同：2
> 
> 时间：2012-07-06T00:00:15.393
> 
> 标签：c#, json, silverlight, parsing

所以，部分Json文件是这样的：

```
{
"number":"23",
"name":{
    "":"LJames"   <----------- look at this line
},
"Gender":"Male",
... 
```

我正在尝试解析它，只要名称字段存在（没有名称与值匹配），`DataContractJsonSerializer`将无法读取它。

任何有这种Json文件经验的人请分享一些想法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:32:15.657

您可以尝试使用[Json.NET](http://james.newtonking.com/projects/json-net.aspx)来解析它。它通常比 DataContractJsonSerializer 工作得更好，并且具有更好的性能。我不确定这是否会解决您的问题。

如果您考虑一下，在 C# 中生成的对象会是什么样子？从这样的 JSON 字符串...

```
{
     "name" : { "first" : "James" }
} 
```

...我希望映射到具有“name”属性的 C# 对象，并且该“name”属性将引用具有“first”属性的对象（这将是一个字符串，值为“James”） .

因此，如果您删除键值“first”，解析器将如何知道如何映射（或如何命名）属性？C# 中没有无名属性。

我建议将您的 Json 文件（如果可能）重新格式化为如下所示：

```
{
    "number":"23",
    "name": "LJames",
    "Gender":"Male",
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:00:55.750

使用正则表达式将此空引号替换为您选择的变量名称，例如：

```
 json = Regex.Replace(json , "\"\":", "\"playerName\":", RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:22:37.660

有一个名为[jansson](http://www.digip.org/jansson/)的库，用于`C`和`C++`. 我不熟悉，`C#`但也没有理由不在那里工作。但是，如果你想自己创建一个解析器，我会告诉你，写一个正则表达式作为你的 delim：例如 `String delim = "{} :\n\t"`；您的解析器基本上是：如果`:`在线，则检索值作为`key`:`value`对，如果`{`继续解析直到`}`找到。我怀疑您在编写这样的解析器时会遇到任何麻烦。

# ruby - 在 Ruby 命令行应用程序中处理数据存储

> ID：11354169
> 
> 赞同：2
> 
> 时间：2012-07-06T00:00:37.550
> 
> 标签：ruby, database, command-line

我决定用 Ruby 编写一个小程序来处理我不起眼的财务跟踪需求。它基本上是一个分类帐，一个跟踪收入和支出并进行各种数据聚合的程序。我在命令行中很舒服，这就是为什么我决定把东西放在那里，而不是让它成为一个图形应用程序。

那么问题来了：我应该使用什么样的后端来存储数据？我考虑过 sqlite，但我愿意接受建议。如果我最终应该使用 SQL 数据库，我应该考虑使用 ORM 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T00:06:32.333

SQLite 可以很好 - 如果您需要能够回滚到以前的状态，它很容易从命令行使用，易于备份，并且易于版本化。

有一个很好的 ORM，叫做 Sequel，我在做非 Rails 的事情时非常喜欢它：http: [//sequel.rubyforge.org/](http://sequel.rubyforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:08:10.467

你有多少数据？他们经常改变吗？

对于短数据序列，我经常将 HERE 文档与 YAML 结合使用。

一个例子：

```
require 'yaml'

YAML.load(DATA).each{|account, data| 
  sum = 0
  data.each{|x| sum += x }
  puts "%s: %i" % [ account, sum ]
}

__END__
account1:
- 1
- 2
- 3
- 4
account2:
- 10
- 20
- 30
- 40 
```

`DATA`是一个 IO 对象，包含**END**之后的内容。

这允许您在脚本中进行数据更改，您不需要 DB-Editor。

如果您想修改程序中的数据并存储结果，我推荐 - 如 Benjamin - SQLITE 和 Sequel。

# requirejs - 如何通过 Sublime Text 2 构建系统运行 RequireJS 优化器

> ID：11354170
> 
> 赞同：1
> 
> 时间：2012-07-06T00:00:43.383
> 
> 标签：requirejs, sublimetext2

我的构建配置看起来像这样。

```
{
  "cmd": ["node r.js -o app.build.js"],
  "working_dir": "$project_path"
} 
```

Sublime 错误日志如下所示：

```
[Errno 2] No such file or directory
[cmd:  [u'node r.js -o app.build.js']]
[dir:  /Users/janjarfalk/Desktop/Projects/Template]
[path: /Users/janjarfalk/Desktop/Projects/Template]
[Finished] 
```

Sublime 控制台看起来像这样：

```
Running node r.js -o app.build.js 
```

如果我在终端的“/Users/janjarfalk/Desktop/Projects/Template”中运行“node r.js -o app.build.js”，它就可以工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:45:56.767

ST2[文档](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/file_processing/build_systems.html)显示 cmd 值应该是相同的命令，但拆分为字符串数组，因此在您的配置中它看起来像 ["node", "r.js", "-o", "app.build.js "]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T00:07:01.000

这是我的构建

**建立工作的步骤**

第 1 步：为 cmd 安装节点

当然你需要 node js 来编译 r.js

第 2 步：创建项目

菜单 --> 项目 --> 保存

第 3 步：创建 r.js 构建文件

将路径保存在项目文件夹之外，以免与项目文件混淆

我做一个 .../build/app.build.js

其中 build 文件夹还包含 r.js

第 4 步：为 sublime text 创建一个构建插件

菜单 --> 工具 --> 构建系统 --> 新的构建系统

```
{
    "cmd": ["node", "r.js", "-o", "app.build.js"], 
    "working_dir" : "${project_path:${folder}}/../build"
} 
```

另存为 RJS.sublime-build

请注意，我使用 ${project_path:${folder}} 而不是绝对路径，因此我不必为每个项目创建新的构建工具，只需保持相同的相对路径

# python - 通过实现 __get__ 描述符来编写瘦对象代理

> ID：11354171
> 
> 赞同：3
> 
> 时间：2012-07-06T00:00:45.350
> 
> 标签：python, selenium

我正在尝试使用[`__get__`](http://docs.python.org/reference/datamodel.html#object.__get__)描述符在某种类型的数据上创建一个思考代理，以便客户端代码可以方便地使用它（最好通过示例显示）：

```
class Value(object):
    def __init__(self, val):
        self.val = val
    def __get__(self, instance, owner):
        return self.val

class Container(object):
    x = Value(1)
    y = [ Value(2), Value(3) ]

c = Container()
assert c.x == 1
assert c.y[0] == 2 # fails. 
```

现在，我主要知道它为什么会失败，所以我想知道是否有更好的方法来实现我的目标，即包装数据，这样当客户端访问它时，他们只需直接访问 Value 对象（实际上，方法会在返回之前`__get__`做一些事情）`self.val`

## 细节

我试图解决的实际案例是帮助编写用于硒测试用例的[PageObjects和 PageElements 的实用程序代码。](http://code.google.com/p/selenium/wiki/PageObjects)我想为测试作者提供一种简洁的方式来编写表单的 PageObjects：

```
class MyLogin(PageObject):
    username_text_box = PageElement(By.ID, "username")
    password_text_box = PageElement(By.ID, "password")
    submit_button = PageElement(By.CLASS_NAME, "login-button")

driver = webdriver.Firefox()
driver.get("http://mypage.com")
login_page = MyLogin(driver)
login_page.username_text_box.send_keys("username01")
login_page.password_text_box.send_keys("XXXX")
login_page.submit_button.click() 
```

我正在尝试将在 PageElement 类中获取实际[WebElement](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)的业务封装起来，并且我希望允许客户端在访问 PageElement 对象后能够访问 WebElement。能够拥有列表，字典有助于使 PageObject 实例更清晰，并对相关的 PageElements 进行分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:47:51.437

如果您还想代理数组访问器，则需要添加一个额外的代理。这是一个使用 x 的 property() 的示例，因为它只是一个属性，以及 y 的数组代理访问器。

self._ *x 和 self.* _y 是真实值的内部私有访问器

```
import functools

class array_proxy(object):
    def __init__(self, accessor):
        self.accessor = accessor

    def __getitem__(self, key):
        return self.accessor(key)

class Value(object):
    def __init__(self, val):
        self.val = val

class Container(object):
    def __init__(self):
        self.__x = Value(1)
        self.__y = [Value(2), Value(3)]
        self.y = array_proxy(functools.partial(Container.get_y_element, self))

    @property
    def x(self):
        val = self.__x.val
        # do stuff with val
        return val

    def get_y_element(self, key):
        val = self.__y[key].val
        # do stuff with val
        return val

c = Container()
assert c.x == 1
assert c.y[0] == 2 
```

如果您可以强制其他人直接使用 get_y_element ，那么代理它会更简单一些，并且对于用户访问它时发生的事情更加明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:47:14.567

Python_noob 的回答很好。

它可以变得更简单，更不通用 - 以便于理解。

问题是描述符协议只是与类属性“工作”。在您放置的示例代码段中，类属性是 list `y`，而不是其中的`Value`对象。

如果你只是实现可以创建一个序列类来替换`__getitem__`对项目的调用，`__get__`你应该得到你想要的行为：

```
class Value(object):
    def __init__(self, val):
        self.val = val
    def __get__(self, instance, owner):
        return self.val

class ValueList(list):
    def __getitem__(self, item):
        return list.__getitem__(self,item).__get__(self.instance, self.instance.__class__)

class Container(object):
    def __init__(self, *args, **kw):
        self.y = ValueList(self.__class__.y)
        self.y.instance = self
        # ...

    x = Value(1)
    y = [ Value(2), Value(3) ]

c = Container()
assert c.x == 1
assert c.y[0] == 2 # works. 
```

请注意，序列类无法自动知道它属于哪个实例 - 因此必须在实例化时显式设置。（示例中的您的 Value 将在其方法中遭受同样的命运`__init__`：它不知道其 Container 实例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:45:37.620

我解决了 jsbueno 和 python_noob 都在接近的实现。然而，他们的两个实现都不符合我允许测试作者编写简单的声明性页面对象的标准。

```
import inspect
import weakref
class Value(object):
    def __init__(self, val):
        self.val = val
    def __get__(self, instance, owner):
        return self.val

def get_value_from_proxy(obj, inst):
    if isinstance(obj, Value):
        return obj.__get__(inst, inst.__class__)
    else:
        return obj 

class ValueList(list):
    def __init__(self, instance, *args, **kwargs):
        list.__init__(self, *args, **kwargs)
        self.instance = weakref.ref(instance)
    def __getitem__(self, idx):
        return get_value_from_proxy(list.__getitem__(self, idx), self.instance() )

class ValueDict(dict):
    def __init__(self, instance, *args, **kwargs):
        dict.__init__(self, *args, **kwargs)
        self.instance = weakref.ref(instance)
    def __getitem__(self, key):
        return get_value_from_proxy(dict.__getitem__(self, key), self.instance() )

class BaseContainer(object):
    def __init__(self):
        for el in inspect.getmembers(self):
            if isinstance(el[1],list):
                setattr(self, el[0], ValueList(self, el[1]))
            elif isinstance(el[1],dict):
                setattr(self, el[0], ValueDict(self, el[1]))

class Container(BaseContainer):
    x = Value(1)
    y = [ Value(2), Value(3) ]
    z = {"test":Value(4)}

c = Container()
assert c.x == 1
assert c.y[0] == 2
assert c.z["test"] == 4 
```

# objective-c - 如何在 ios sdk 中创建 1 位图像？

> ID：11354178
> 
> 赞同：1
> 
> 时间：2012-07-06T00:02:26.153
> 
> 标签：objective-c, ios4, image-processing, uiimageview

我想将图像转换为 1 位图像以进行 ocr 读取。我尝试根据阈值替换像素，但结果太暗太黑我正在使用 c++ 库

```
ImageWrapper* Image::autoLocalThreshold() {
    const int local_size=8;
    // now produce the thresholded image
    uint8_t *result=(uint8_t*) malloc(m_width*m_height);
    // get the initial total
    int total=0;
    for(int y=0; y<local_size; y++) {
        for(int x=0; x<local_size; x++) {
            total+=(*this)[y][x];
        }
    }
    // process the image
    int lastIndex=m_width*m_height-(m_width*local_size/2+local_size/2);
    for(int index=m_width*local_size/2+local_size/2; index<lastIndex; index++) {
        int threshold=total/64;
        if(m_imageData[index]>threshold*0.9)
            result[index]=0;
        else
            result[index]=255;
        // calculate the new total
        for(int index2=index-m_width*local_size/2-local_size/2; index2<index+m_width*local_size/2-local_size/2; index2+=m_width) {
            total-=m_imageData[index2];
            total+=m_imageData[index2+local_size];
        }
    }
    return Image::createImage(result, m_width, m_height, true);
} 
```

谁能给我一个想法如何正确地做它并创建一个 1 位图像（黑白）图像？

在此先感谢。我将感谢您的帮助

# install4j - 捆绑 jvm 和 Windows 归档媒体类型的 install4j 问题

> ID：11354181
> 
> 赞同：1
> 
> 时间：2012-07-06T00:02:55.750
> 
> 标签：install4j

这个问题是关于 install4j 4.2.8 的。

我们正在使用 install4j 为我们的 java 应用程序创建一个“windows 存档”类型的媒体文件。尽管大多数用户都乐于下载我们的 .exe 安装程序，但有些客户需要 msi，因此我们使用此 .zip 工件作为使用第三方工具创建的 msi 的基础。

除非涉及到合并捆绑的 jre（非共享），否则这可以正常工作。似乎默认情况下，install4j 使用 pack200 算法压缩 jre 层次结构中的某些 jar 文件（例如 rt.jar），并在第一次运行启动器可执行文件时解压缩它们。

这个过程显然适用于从 exe 安装程序安装的安装，但似乎在我们的 msi 安装（如前所述是从 windows .zip 工件创建的）中失败了很多时间。我查看了 install4j 手册，看看是否有某种方法可以关闭此压缩，但 jre 包创建工具似乎没有任何此类参数可以这样做。而且这种行为很好，所以不用它就很好。

关于为什么在某些情况下解包过程可能会失败的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:01:59.500

第一次调用生成的启动器时会完成解包过程。您可以调用具有立即返回以可靠地解压 JRE 库的主类的虚拟启动器。

# ios - 故事板错误 - iOS 5.1 - Xcode 4.3.3

> ID：11354184
> 
> 赞同：3
> 
> 时间：2012-07-06T00:03:27.717
> 
> 标签：ios, storyboard, xcode4.3

在我的 iOS 项目中（仅使用 xcode），我继续遇到一个问题，即在情节提要编辑器中呈现给我的布局在某些更改后会自动修改（我无法具体确定）。问题如下： TabBarController 出于某种原因开始以横向显示。一些 NavigationControllers 也做了同样的事情。我无法再查看或编辑嵌套视图上的导航栏。我再也看不到编辑视图上的标签栏了。标签栏项目。当我在模拟器中运行应用程序时，一切正常。如果我在更改默认显示设置之前进行了设置，它仍然可以正常工作。

这是问题的屏幕截图：

![http://imgur.com/GnyvD](../Images/c12aa0e1fe694028c6b21ae4a86fdc75.png)

在我的项目过程中，我的故事板一直向我展示这个错误。我通过 git 重置修复了一次，另一次通过重建整个情节提要修复了它。这两种解决方案都工作了很长一段时间，但我宁愿有一个永久的解决方案。任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:25:32.450

我发现了问题所在。当同样的事情发生时，我的项目被折腾了。

首先，我想我知道它是如何发生的，我将一个视图控制器放置在情节提要上，并没有将它连接到任何视图，也没有给它一个标识符。XCODE 发出警告，但我不得不关闭项目，当我重新打开时，这发生了。

解决问题，很简单。遍历每个视图控制器（如导航控制器、tableview 控制器等）并确保**Orientation**和**Top Bar**并设置为**Inferred**。重要的是，所有这些都是推断的，否则会发生这种情况。

注意：此设置位于每个视图的*Attributes Inspector下*

# bash - 在 Bash 脚本中使用循环变量来传递不同的命令行参数

> ID：11354186
> 
> 赞同：1
> 
> 时间：2012-07-06T00:03:40.680
> 
> 标签：bash, cluster-computing

我有一个 C++ 程序，我使用命令行将两个双精度值作为输入传递给它

```
int main(int argc, char *argv[]){
    double a,b;
    a = atof(argv[1]);
    b = atof(argv[2]);
    further code..... 
```

我使用该实用程序在集群上运行代码，`qsub`并且我有一个名为“jobsub.sh”的 Bash 脚本来提交如下所示的作业：

```
#!/bin/csh -f
hostname
cd /home/roy/codes/3D             # Change directory first -- replace Mysubdir
set startdir = `pwd`               # Remember the directory we're in
if( ! -d /scratch/$USER ) then
    mkdir /scratch/$USER       # Create scratch directory
endif                              # If it does not exist
#cp infile12 /scratch/$USER     # Copy input file to scratch directory
cd /scratch/$USER                  # Change to scratch directory
#rm *.*
$HOME/codes/3D/autoA100.out 2.1 2.2          # Run a program
cp * $startdir         # Copy outputfiles back to where we started 
```

在我做的终端`qsub jobsub.sh`。

但是，我想为不同的值运行相同的可执行文件，`a`并`b`在不同的内核上并行运行。是否可以在 Bash 脚本中编写一个`for`循环，以便我可以执行类似的操作，

```
for i=1;i<=10;i++ {
   $HOME/codes/3D/autoA100.out 2+i*0.1 2+i*0.2
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:26:40.310

如果您将执行脚本提交给批处理加载程序，那么就无法像您想要的那样让一个简单的循环执行，因为*整个脚本*都在*每个节点*上运行。但是，大多数批处理加载程序都会向用户提供环境变量。

例如，PBS 有`$PBS_ARRAYID`，它指定作业运行时的唯一 ID。因此，您的脚本可以具有以下内容，而不是使用循环：

```
a=$(echo "2+($PBS_ARRAYID+1)*0.1" | bc -l)
b=$(echo "2+($PBS_ARRAYID+1)*0.2" | bc -l)
$HOME/codes/3D/autoA100.out $a $b 
```

请注意我在上面添加`1`了`$PBS_ARRAYID`因为 ID 开始于`0`而您的循环开始于`1`. 还值得一提的是，虽然 bash 本身可以做一些算术运算，但它不能处理实数。这就是为什么我不得不调用`bc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:26:27.387

您始终可以在后台运行作业（在这种情况下，shell 将继续执行下一条指令）

```
MY_PIDS=
for i in 1 2 3 4 5 6 7 8 9 10
do
    yourjob "$(a i)" "$(b i)" &   # Note the ampersand (background)
    MY_PIDS="$MY_PIDS "$!         # Do not write the $! inside the quotes, bash will
                                  # break (better, don't use bash but plain sh)
done

# Wait wor each job to complete and cleanup
for p in $MY_PIDS
do
    wait "$p"
    echo "Return code of job $p is $?"
    do_cleanup_for "$p"
done 
```

但当然，您需要确保并行运行的作业不会互相踩踏（例如写入同一个文件）。

# ruby-on-rails - 让变量名有顺序

> ID：11354187
> 
> 赞同：1
> 
> 时间：2012-07-06T00:04:01.097
> 
> 标签：ruby-on-rails, rspec, factory-bot

有没有办法给 let 变量名添加一个序列？有点像这样：

```
5.times do |n|
    let (:"item_'#{n}'") { FactoryGirl.create(:item, name: "Item-'#{n}'") }
end 
```

然后像这样的测试可以工作：

```
5.times do |n|
    it { should have_link("Item-'#{n}'", href: item_path("item_'#{n}'") }
end 
```

它将导致对正确排序的测试，但只是试图了解基础知识。

编辑：有一个错字，我删除了单引号，而 let 调用似乎正在工作

```
let! (:"item_#{n}") { FactoryGirl.create(:item, name: "Item-#{n}") } 
```

如果我使用，测试通过了一个案例：

```
it { should have_link("Item-0", href: item_path(item_0) 
```

但如果我使用，则不适用于序列：

```
it { should have_link("Item-#{n}", href: item_path("item_#{n}") 
```

我已经验证问题出在 href 路径中。在路径中使用时如何插入 item_n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T01:25:50.350

使用另一个问题的答案，我发现了如何从字符串中获取 ruby​​ 变量的结果，使用`send`. 另外，我确实喜欢 Erez 的回答，因为我想使用 let 变量，因为懒惰的评估。这是我的工作：

```
describe "test" do
  5.times do |n|
    # needs to be instantiated before visiting page
    let! (:"item_#{n}") { FactoryGirl.create(:item, name: "item-#{n}") }
  end

  describe "subject" do
    before { visit items_path }

    5.times do |n|
      it { should have_link("item-#{n}", href: item_path(send("item_#{n}"))) }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:42:41.410

发生这种情况是因为在`it { should have_link("Item-#{n}", href: item_path("item_#{n}")`href 中的值不是字符串而是 ruby​​ 变量。

在你的情况下我会做的是：

```
before do
  @items = []
  5.times do |n|
    @items << FactoryGirl.create(:item, name: "Item-#{n}")
  end
end 
```

在规范本身中：

```
@items.each do |item|
  it { should have_link(item.name, href: item_path(item)) }
end 
```

# asp.net - 无法在安全上下文下访问 SQL Server 数据库

> ID：11354188
> 
> 赞同：0
> 
> 时间：2012-07-06T00:04:09.380
> 
> 标签：asp.net, sql-server-2008-r2, windows-authentication

我正在尝试将 Windows 帐户信息存储在我的数据库中。我像往常一样创建了数据库并运行了 aspnet_regsql.exe。选择“Windows 身份验证”并输入正确的服务器和数据库后出现以下错误：

SQL 错误号为 916，SqlException 消息为：在当前安全上下文下，服务器主体“”无法访问数据库“”。

在寻找解决方案后，我已经进入了 SQL Server Management Studio 2008-R2 并且未选中排序规则，因为这对于其他有同样错误的人来说似乎是个问题。但是，我仍然遇到同样的错误。

关于做什么的任何建议？

# c# - 在 C# 中访问 Windows 注册表

> ID：11354190
> 
> 赞同：0
> 
> 时间：2012-07-06T00:04:25.480
> 
> 标签：c#, winforms, registry, sql-server-2012-express

我正在尝试借助以下代码在本地计算机上安装所有 SQL 实例：

```
RegistryKey rk = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\Microsoft SQL Server");
string[] instances = (string[])rk.GetValue("InstalledInstances");

if (instances.Length > 0)    //Error
{
    foreach (string instance in instances)
    {
        MessageBox.Show(instance);
    }
} 
```

它给出了以下例外：

> 你调用的对象是空的。

我已经手动检查了“注册表编辑器”并且存在指定的键，我的系统上也有两个 SQL 实例。

现在请告诉我为什么它没有访问所需的键值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:09:39.907

我在我的 64 位机器上运行了你的代码。它工作得很好。确保您的平台设置为 AnyCPU 或 x64 但不是 x86

![在此处输入图像描述](../Images/0887a9d80ac685c2d574a52b33110c6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:24:12.090

这一行可能是问题 string[] instances = (string[])rk.GetValue("InstalledInstances");

因为 RegistryKey.GetValue Method (String) 返回一个对象，而您将其转换为 string[]

在将其转换为 string[] 之前，您应该检查返回的值是否不为空

# php - PHP Mailer 发送时事通讯

> ID：11354194
> 
> 赞同：0
> 
> 时间：2012-07-06T00:04:58.400
> 
> 标签：php, email

想知道你们是否可以帮我一点，因为我正在搞乱 PHP 邮件程序，我修改了这段代码，但是从这里[http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html)

通过 PHP 邮件程序（使用不同的脚本）发送单个电子邮件可以正常工作，但是现在尝试从数据库中使用下面的脚本发送到多个电子邮件目前不起作用..你能发现它有什么问题吗？虽然我想知道它是否真的对数据库中的电子邮件做了任何事情。我有点困惑。

该脚本确实成功并打印了名称，但没有发送任何电子邮件！至少没有收到..（也不是垃圾邮件）有什么帮助吗？对不起，如果这很明显！

```
 <?php
 // Grab our config settings
 require_once($_SERVER['DOCUMENT_ROOT'].'/mail/config.php');

 // Grab the FreakMailer class
 require_once($_SERVER['DOCUMENT_ROOT'].'/mail/lib/MailClass.inc');

 //set execution time limit to 5 minutes 

 $safeMode = ( @ini_get("safe_mode") == 'On' || @ini_get("safe_mode") === 1 ) ? TRUE : FALSE;
 if ( $safeMode === FALSE ) {
  set_time_limit(300); // Sets maximum execution time to 5 minutes (300 seconds)
   // ini_set("max_execution_time", "300"); // this does the same as "set_time_limit(300)"
 }

 echo "max_execution_time " . ini_get('max_execution_time') . "<br>";

       //db connection
  $con = mysql_connect("xx","xx","xx");
 if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }

 mysql_select_db("xx", $con);

 // Setup body
 $textBody = "Dear {MEMBER_NAME},\n\nTEST";
 $htmlBody = "Dear {MEMBER_NAME},<br /><br />TEST";

 // instantiate the class
 $mailer = new FreakMailer();

 // Get the user's Email
 $sql = mysql_query("SELECT displayname,email FROM engine4_users2")or die(mysql_error());

 //lets reset the time limit of the server everytime an email is sent to bypass maximum
  while (1==1) {
   set_time_limit(30); // sets (or resets) maximum  execution time to 30 seconds)
   // .... put code to process in here

    while($row = mysql_fetch_object($sql))
    {
    // Send the emails in this loop.
    $member_name = $row->displayname;

    if($row->MailType == 'html')
    {
    $mailer->Body = str_replace('{MEMBER_NAME}', $member_name, $htmlBody);
    $mailer->IsHTML(true);
    $mailer->AltBody = str_replace('{MEMBER_NAME}', $member_name, $textBody);
    }
    else
    {   
    $mailer->Body = str_replace('{MEMBER_NAME}', $member_name, $textBody);
    $mailer->isHTML(false);
    }
    $mailer->Send();
    $mailer->ClearAddresses();
    $mailer->ClearAttachments();
    $mailer->IsHTML(false);
    echo "Mail sent to: " . $member_name . "<br />";
    }

   usleep(1000000); // sleep for 1 million micro seconds - will not work with Windows servers / PHP4
   // sleep(1); // sleep for 1 seconds (use with Windows servers / PHP4
        if (1!=1) {
     break;
   }
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:20:23.087

你不使用phpmailer有什么原因吗？下载 phpmailer 的 .php 文件并使用此代码，就像一个魅力：

```
<?php
 $sql = mysql_query("SELECT displayname,email FROM engine4_users2")or die(mysql_error());

//
//

require_once('../../mailer/class.phpgmailer.php');
require_once ('../../mailer/class.smtp.php');
require_once('../../mailer/phpmailer.lang-en.php');

$debug = new SMTP();
$debug->do_debug = 2;

while ($record = mysql_fetch_array ($sql)) {
$mail = new PHPGMailer();
$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host = "mail.zzxxyyhost.com"; // SMTP server
$mail->Port = 26; //designated port, could be different, check your host
$mail->SMTPAuth = TRUE; //smtp authentication may be false, check your host
$mail->Username = "username"; //username
$mail->Password = "password"; //password

$mail->From = "from@someone.com"; 
$mail->FromName = "fromsomeone";

$mail->AddBCC($record['email'], $record["displayname"]); //use bcc for hidden emails    
$mail->Subject = "$record["displayname"]";
$mail->Body = "Your body";

            if(!$mail->Send())
            {
               echo 'Message was not sent.';
               echo 'Mailer error: ' . $mail->ErrorInfo;
            }
    // Clear all addresses and attachments for next loop
    $mail->ClearAddresses();
    $mail->ClearAttachments();
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:38:12.987

您永远不会将用户的地址设置为邮件程序。

```
$mailer->AddAddress($row->email); 
```

之前`send()`被调用。因为您在循环中发送邮件，所以每个用户都会收到一封邮件，并且不会看到其他地址。

（您链接的文档示例不完整，因为下面的评论显示）

你也可以只放一个

```
$mail->AddBCC($row->email); 
```

在循环和循环之后的其余邮件程序代码中，向所有人发送一封邮件，但是除了密件抄送地址之外，您还需要一个（虚拟）地址作为收件人才能发送邮件。

```
if($row->MailType == 'html') 
```

您没有在查询中选择 MailType。您是否启用了错误报告？

# php - 替换 PHP 字符串中的特殊字符的问题

> ID：11354195
> 
> 赞同：2
> 
> 时间：2012-07-06T00:05:19.020
> 
> 标签：php, encoding, character-encoding, normalize

我试图用普通字符替换 PHP 字符串中的特殊字符（如用 o 替换 ó 和用 a 替换 á）。我尝试使用 PHP Normalizer::normalize 函数，如下代码所示：

```
if (!Normalizer::isNormalized($word, Normalizer::FORM_C))
{
    echo "original: ".$word;
    $word = Normalizer::normalize($word, Normalizer::FORM_C);

    echo "\tnormalized: ".$word."<br />";
    exit; // see if it worked without having to go through every file
} 
```

但是，Normalizer::normalize 返回 null 并且该代码的输出是：

`original: adiós normalized:`

由于这种方法似乎不起作用，我去找了一个应该删除特殊字符的函数。这是功能：

```
function normalize ($string) {
    $table = array(
        'Š'=>'S', 'š'=>'s', 'Đ'=>'Dj', 'đ'=>'dj', 'Ž'=>'Z', 'ž'=>'z', 'Č'=>'C', 'č'=>'c', 'Ć'=>'C', 'ć'=>'c',
        'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A', 'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E',
        'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O',
        'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss',
        'à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e',
        'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o',
        'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b',
        'ÿ'=>'y', 'Ŕ'=>'R', 'ŕ'=>'r',
    );

    return strtr($string, $table);
} 
```

然而，这段代码没有明显的效果，并返回了与传入的字符串相同的字符串。

我正在从 Windows 7 中的 *.txt 文件中获取我的字符串。我从来都不擅长编码，希望能在这个问题上提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:56:40.270

此页面有一个很棒的提示：[如何从文本中删除变音符号？](https://stackoverflow.com/questions/1770250/how-to-remove-diacritics-from-text)这是我的版本：

```
/** Normalize a string so that it can be compared with others without being too fussy.
*   e.g. "Ádrèñålînë" would return "adrenaline"
*   Note: Some letters are converted into more than one letter, 
*   e.g. "ß" becomes "sz", or "æ" becomes "ae"
*/
function normalize_string($string) {
    // remove whitespace, leaving only a single space between words. 
    $string = preg_replace('/\s+/', ' ', $string);
    // flick diacritics off of their letters
    $string = preg_replace('~&([a-z]{1,2})(?:acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml|caron);~i', '$1', htmlentities($string, ENT_COMPAT, 'UTF-8'));  
    // lower case
    $string = strtolower($string);
    return $string;
} 
```

这很好，因为与上面提到的 iconv 方法不同，字符集之间没有转换（它们是一个雷区）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T00:40:21.063

我将您的代码复制并粘贴到我的编辑器中，发生了一些有趣的事情。而不是得到`adios`我得到`adjiós`。请注意`j`d 之后的中间。这是来自`'đ'=>'dj',`表格地图的第一行。显然，我的编辑将 更改`đ`为常规`d`，然后它不会将`ó`. 我删除了这个键/值对，突然它对我有用。您确定您的编辑器中的所有键都是正确的（您的编辑器是否接受替代字符集？）这是我的测试文件（已`đ`删除：

```
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
</head>
<body>
<?php

function normalize ($string) {
    $table = array(
        'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj', 'Ž'=>'Z', 'ž'=>'z', 'C'=>'C', 'c'=>'c', 'C'=>'C', 'c'=>'c',
        'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A', 'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E',
        'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O',
        'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss',
        'à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e',
        'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o',
        'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b',
        'ÿ'=>'y', 'R'=>'R', 'r'=>'r',
    );

    return strtr($string, $table);
}

$word = 'adiós';
$length = strlen($word);

echo 'original: '. $word;
echo '<br />';
echo 'normalized: '. normalize($word); 
echo '<br />';
echo 'loop: ';

for($i = 0; $i < $length; $i++) {
    echo normalize($word[$i]);
}

?>

</body>
</html> 
```

当我用`'d' => 'dj'`数组映射中的每个字符循环时，我正确地得到了`adjios`

# bash - 拼凑视频

> ID：11354197
> 
> 赞同：1
> 
> 时间：2012-07-06T00:05:25.853
> 
> 标签：bash, video

是否可以创建逐帧构建的视频文件、mp4 或其他文件？基本上，我有一个 ip 摄像头每隔 X 秒将图像传输到服务器。我想通过 cron 作业获取从上次运行到当前时间的所有图像，并从中创建一个视频，如果视频存在，则将图像附加到末尾。

理想情况下，我希望在单个视频文件中保留滚动一小时的视频，并将滚动 6 小时的静止图像全部保存在 bash 脚本中以进行 croned。每个静止图像的大小约为 30k，大小为 640x480。就像现在一样，我有滚动的 6 个小时的剧照工作。

我猜它没有那么简单`cat image.jpg >> video.mp4`。如果我真的可以附加文件，我会对运动 jpeg 感到满意。

这是在 Linux 系统上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:43:12.923

门编码器解决方案。

```
#assuming that your image sequence has correct modification times
ls -rt1 *.jpg > list_of_images.txt

mencoder -nosound \
  -ovc lavc -lavcopts vcodec=mpeg4 \
  -mf fps=25:type=jpg 'mf://@list_of_images.txt' \
  -o video.avi 
```

Mencoder 来自 Mplayer 包。您可能需要使用 -lavcopts 才能获得最佳结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:13:03.777

VirtualDub 可以从多个图像中制作视频。它还支持一些自动化。它也有一些非常有用的文档。你应该看看[http://virtualdub.org/](http://virtualdub.org/)

# teamcity - 是否可以从 TeamCity 构建中获取原始构建日志？

> ID：11354203
> 
> 赞同：12
> 
> 时间：2012-07-06T00:05:52.753
> 
> 标签：teamcity

是否可以从 TeamCity 构建中获取原始构建日志？我编写了一个自定义测试运行程序，它作为命令行构建步骤运行，并通过将行打印`##teamcity...`到标准输出来报告测试结果。TeamCity 的构建日志在识别它们时似乎将它们剥离。我想查看原始输出以帮助调试我的测试运行器。

**更新：** 显然这根本不可能。neverov（我假设 JetBrains 的 Dimitry Neverov？）已经解释了这一点并给出了解决方法，所以我接受了他的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-30T12:16:49.300

您可以通过查看代理`/logs`目录来查看构建代理的原始输出。这显示了在 TeamCity 控制台中显示的构建输出中隐藏的未解析数据。

例如`c:\TeamCity-Agent\logs\teamcity-build.log`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T12:34:28.497

您可以通过单击构建日志页面上的“下载完整构建日志”来下载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T20:08:16.097

当您提到问题中的行时，我不太清楚这是否是您在谈论的内容`##teamcity...`，但这是我目前正在为命令行构建步骤所做的事情（这就是我目前所做的一切）：

```
##teamcity[testStarted name='dummyTestName' captureStandardOutput='true']

echo "Do your command-line build steps here."

##teamcity[testFinished name='dummyTestName'] 
```

这是一种 hacky 解决方法，但它会导致 stdout/stderr 显示在 TeamCity Web UI 的构建日志页面上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-21T10:56:42.593

我看到这个问题是很久以前（大约 10 年前）提出的，但在 TeamCity 中没有任何变化。

我遇到了与测试记者类似的问题，并找到了一种无需连接到构建代理并从那里获取原始日志的方法（这可能很困难）。我的解决方案不涵盖整个构建日志，但在通过构建步骤中的自定义脚本运行步骤时会很有帮助。

所以解决方案是添加`| tee e2e_raw.log`到所需的构建步骤脚本中。例如，我们通过运行 docker-compose 命令在 Docker 中运行测试： [![在此处输入图像描述](../Images/2511f119c7a92545ac5a23077e00c494.png)](https://i.stack.imgur.com/Vk7sp.png)

`tee`将所有输出复制到文件中。原始输出将是相同的，并将由 TeamCity 照常解析。

您还应该在 artifacts 字段中添加一行，以使 build 能够收集新创建的 artifact（Build General 设置）： [![在此处输入图像描述](../Images/c5d5a6b18763b9223643942d41d8ebb5.png)](https://i.stack.imgur.com/8QVdN.png)

之后，您将在 artifacts 选项卡中看到一个新存档，其中包含此构建步骤的原始日志： [![在此处输入图像描述](../Images/7149dfa408780fa673023dc6decdf3d7.png)](https://i.stack.imgur.com/sjFI7.png)

[![在此处输入图像描述](../Images/a3abf8aac7b5514ac4bfe3c51cfddd9c.png)](https://i.stack.imgur.com/2I9O9.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-14T22:22:10.487

在我面前有很好的答案。我要补充一点，您的 TeamCity 主机拥有构建的日志文件，您可以在命令行上获取它们。

进去看看`<TeamCity Data Directory>/system/artifacts/<project ID>/<build configuration name>/<internal_build_id>/.teamcity/logs`。

这对我很重要，因为

1.  TeamCity 代理上的日志在一天左右后被删除，但主服务器上的日志仍然可用。
2.  我想在机器本身上对它们进行 grep，而不必下载多个相当大的日志文件或使用我的网络浏览器进行多个页面查看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-22T18:59:04.863

构建日志中有一个选项可以查看“详细/详细” - 它显示了所有服务消息。我从 TC9 开始就看到了。

# excel - 如果第三个字母等于

> ID：11354204
> 
> 赞同：5
> 
> 时间：2012-07-06T00:05:55.553
> 
> 标签：excel, excel-formula

我有一个包含任何 4 个字母的单元格，例如 akei、skiw。我怎么问

“如果第三个字母是 i 则等于 True”

我在想类似的东西

"=if(a1="??i?", True, False)"

但这不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T00:10:34.493

```
=MID(A1,3,1) = "i" 
```

应该可以使用，您不需要使用`IF`，使用等号的评估将返回`TRUE`或`FALSE`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T00:17:49.107

MID 功能可让您选择文本的一部分，如果您设置位置开始和您想要的字符数

```
=MID(A1,3,1) = "i" 
```

所以你只需将它与“i”进行比较

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:30:19.893

如果您像这样使用 COUNTIF，则可以使用通配符方法

`=COUNTIF(A1,"??i?")`

这将返回 1 或 0 并有效地测试两件事，即 A1 包含 4 个字符，第三个是“i”

与 MID 一样，这不区分大小写，因此 XXIX 和 zziz 都将返回 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T15:54:39.733

所以我遇到了类似用途的这个问题：扩展实验室样本的编号系统，每个数字区分不同的东西，第三个数字表示加热曲线

生成的函数用于为不知道我的逻辑的人扩展这些代码：

```
=IF(MID(B2,3,1) = "1", "Temp1°C for 1 hour", "Temp2°C for X hours") 
```

# objective-c - 使用音频队列服务录制 aac 时保存到缓冲区而不是文件

> ID：11354206
> 
> 赞同：5
> 
> 时间：2012-07-06T00:06:05.030
> 
> 标签：objective-c, audio, audio-streaming, audio-recording, audioqueueservices

我的目标是以 AAC 格式录制音频并将其作为流通过网络连接发送。

我正在使用音频队列服务，并且我的代码基于 SpeakHere 示例。我知道要写入文件，它使用 AudioFileWritePackets() 函数。

这是回调函数：

```
void MyInputBufferHandler(void* inUserData,
                          AudioQueueRef inAQ,
                          AudioQueueBufferRef inBuffer,
                          const AudioTimeStamp * inStartTime,
                          UInt32 inNumPackets,
                          const AudioStreamPacketDescription* inPacketDesc) {

    Recorder *aqr = (Recorder *)inUserData;

    if (inNumPackets > 0) {
        // write packets to file
        AudioFileWritePackets(aqr->mRecordFile, FALSE,
                              inBuffer->mAudioDataByteSize,
                              inPacketDesc, aqr->mRecordPacket, 
                              &inNumPackets, inBuffer->mAudioData);

        aqr->mRecordPacket += inNumPackets;
    }

    // if we're not stopping, re-enqueue the buffe so that it gets filled again
    if ([aqr IsRunning])
        AudioQueueEnqueueBuffer(inAQ, inBuffer, 0, NULL);
} 
```

起初我以为*AudioFileWritePackets*是通过直接写入`inBuffer->mAudioData`. 但是，当我手动将 mAudioData 的内容写入文件时，解码似乎不起作用。

在检查和比较*AudioFileWritePackets*写入文件的原始数据以及我只是将 mAudioData 写入文件的原始数据时，他们似乎已经附加了一个标题。

由于我不知道*AudioFileWritePackets()*内部是如何工作的，我的问题是，我怎样才能将录制的音频写入缓冲区（或流，如果你更喜欢这样称呼它）而不是文件，这样我就可以稍后通过网络连接发送它？

同样，简而言之，这就是我需要的：以 aac 格式录制音频并通过网络连接流式传输音频。

谢谢！我一直在寻找我的头蓝色...

PS：如果你指出我现有的项目，请确保它们是我需要的。我真的觉得我一直在寻找所有可能的项目>.<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T12:18:38.657

这应该会有所帮助。

检查“SpeechToTextModule.m”中的[“HandleInputBuffer”方法。](https://github.com/iz3/SpeechToText/blob/master/iPhone-Speech-To-Text-Library/SpeechToTextModule.m)

# google-maps - 谷歌地图查询参数说明

> ID：11354211
> 
> 赞同：5
> 
> 时间：2012-07-06T00:06:26.573
> 
> 标签：google-maps

我正在网站中实现一项功能，我通过 5 个输入框获取用户的位置，然后需要在谷歌地图中显示位置，

我知道这个过程被称为地理编码，但在做了一些搜索后，我再次遇到了这个链接，

[http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

这个链接告诉我们可以将位置作为查询字符串参数传递给谷歌地图的 url。

这个过程是否有效，他们是否以这种方式对其使用有任何限制

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T01:29:48.453

我经常去 Google Maps 查询参数的地方就是[这个 mapki 页面](http://alvarestech.com/temp/routeconverter/RouteConverter/navigation-formats/src/main/doc/googlemaps/Google_Map_Parameters.htm)。为 google 地图创建 URL 会将您的用户定向到 google 的网站，并受[google maps 使用条款的](http://www.google.com/intl/en_us/help/terms_maps.html)约束。

请参阅[原始问题](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)中的链接，mapki 链接已失效。

来自[谷歌地图参数](http://mapki.com/wiki/Google_Map_Parameters)的内容（注意这指的是原始的[http://maps.google.com](http://maps.google.com)，而不是“新的”谷歌地图，看起来它可能最初是由 Mike Williams 创作的）：

> 谷歌地图参数
> 
> 来自 Google Mapki（不再存在）
> 
> 以下是可以传递给 maps.google.com 的一些参数的列表。如果您想让 Google 地图显示行车路线，您可能需要传递此类参数，这些参数在 API 下不可用。
> 
> *   **q= 查询**- 在 q 参数中传递的任何内容都被视为已输入到 maps.google.com 页面上的查询框中。尤其是：
> 
> 查找精确地址并在指定点显示标记和信息框
> 
> 城镇名称或邮政编码的前半部分会导致区域与标记或信息框一起显示
> 
> 精确位置可以指定为纬度、经度、十进制形式（52.123N、2.456W 或 52.123、-2.456）或度、分和秒（52 7 22.8N,2 27 21.6W 或 52 7 22.8,-2 27 21.6) 或度和分 (52 7.38N,2 27.36W 或 52 7.38,-2 27.36)。
> 
> 括号 () 中添加的任何文本都以粗体显示在信息窗口和侧边栏中，似乎没有办法导致换行，但您可以使用 %A0 作为“无换行空间”，以防止在您所在的位置发生换行不想要他们。
> 
> 单词“to”和“from”会激活行车路线功能。
> 
> 单词“near”或“loc:”会激活本地搜索功能
> 
> space-ampersand-space（在 URL 中使用 +%26+ 或 %20%26%20，而不是 +&+ 或 +&+ 否则＆符号将被视为分隔符）可以在两条街道的名称之间使用以指定路口。
> 
> 也可以在 at 符号后指定位置，以十进制形式 (@52.123,-2.456)。与使用不带 at 符号的相同值相比，这提供了更低的缩放级别。使用这种格式会干扰查询参数的其他选项。@ 符号而不是“near”或“loc:”往往会导致仅显示一个业务结果，比较（兰开夏郡 Hallows Road Blackpool 附近的教堂）返回 1000 多个结果到（Lancashire 的 Church @ Hallows Road Blackpool）返回一个结果。
> 
> 可以使用 Google 地球 .KML/.KMZ 文件或包含 GeoRSS 数据的 RSS 提要的完整 URL，其中包含的信息将显示在地图上。
> 
> *   **ll =**地图中心的纬度、经度 - 注意顺序。只接受十进制格式。如果在没有查询的情况下使用，则地图以该点为中心，但不显示标记或信息窗口
> *   **sll=**执行业务搜索的点的纬度、经度。您可以使用它来执行偏离中心的业务搜索。谷歌使用它，以便“链接到此页面”可以记录在执行业务搜索后已移动中心的地图。
> *   **spn =**近似的纬度/经度跨度。如果没有 &z 参数，将调整缩放级别以适应。使用此 Mapki 工具查找经纬度。
> *   **sspn=** ?? 纬度/经度……什么？
> *   **hl=**宿主语言 - 仅支持几种语言，例如 &hl=fr 表示法语。
> *   **t =**地图类型。可用选项是“m”地图、“k”卫星、“h”混合
> *   **saddr=**源地址。在询问行车路线时使用此选项，括号中添加的任何文本都以粗体显示在侧栏中
> *   **daddr=**目标地址。在询问行车路线时使用此选项，任何添加在括号中的文本都会以粗体显示在侧栏中“+to:”子句可以附加到目的地以请求多个目的地路线，例如“&dadr=Blackpool+to:Manchester+to:括号中的 Leeds" 文本也可以添加到 "+to:" 子句中。
> *   **mrad=**附加目标地址。如果您在旅途中获得了三分，则可以使用 &saddr、&daddr 和 &mrad 代替“+to:”子句。
> *   **start=**跳过第一个 (start-1) 匹配项
> *   **num=**最多显示此匹配数。有效范围是 0 到 10（但 0 有点无意义）。
> *   **near=**可以用作查询的位置部分，而不是将整个事物放入 &q 中。
> *   **f=**控制要显示的查询表单的样式。&f=d 显示“方向”表单（两个输入框：from、to），&f=l 显示“本地”表单（两个输入框：what、where）。否则显示默认搜索表单（单输入）。
> *   **output=html**使用与 Google Maps 合并之前的旧式 Google Local 页面格式，带有小地图和大侧边栏。
> *   **output=js**输出 Google 地图使用的 JavaScript 对象字面量和函数调用，包括行车路线的编码折线数据，以及 HTML 格式的舞台信息。
> *   **output=kml**输出包含代表当前地图的完整地标信息的 KML 文件。
> *   **output=nl**输出一个包含 NetworkLink 包装器的小型 KML 文件，该包装器链接到一个 URL，Google 地球和 Google 地图可以从中获取地标信息。
> *   **latlng=**这是一个奇怪的。它需要三个用逗号分隔的数字。前两个数字（大概代表纬度和经度乘以 1000000）被忽略。第三个数字似乎是特定企业的 Google 内部“公司 ID”编号。例如 &latlng=0,0,14944637421527611642 代表布莱克浦社区教会。指定此参数会对引用该业务的页面执行 Google 搜索，并显示一个小地图。其他参数，尤其是 &q，必须具有有效的内容（但不必与目标业务相关）才能正常工作。
> *   **cid=**类似于 latlng，但生成不同的地图大小。它需要三个用逗号分隔的数字。前两个数字（大概代表纬度和经度乘以 1000000）被忽略。第三个数字似乎是特定企业的 Google 内部“公司 ID”编号。例如 &cid=0,0,14944637421527611642 代表布莱克浦社区教会。指定此参数会显示已识别公司位置的大地图。其他参数，尤其是 &q，必须具有有效的内容（但不必与目标业务相关）才能正常工作。
> *   **vp=**此参数的存在会导致 maps.google.com 切换到版权服务模式。它不是返回绘制地图的 html，而是以 Javascript 格式返回有关版权所有权的信息。&vp 参数指定视点（即地图的中心）。版权服务仅在同时提供 &spn 和 &z 参数时才起作用，指示跨度和缩放。可选参数是 &t，它指定地图类型，&key 指定执行请求的站点的 API 密钥。例如[http://maps.google.com/maps?spn=0.030372,0.068665&z=6&t=h&vp=53.859462,-3.038235](http://maps.google.com/maps?spn=0.030372,0.068665&z=6&t=h&vp=53.859462,-3.038235)
> *   **om=**此参数的存在值不是 1 会导致关闭概览图。如果参数被省略，或者显示为值 1，则概览图是打开的。
> *   **ie=**可用于指定字符集。例如 &ie=UTF8。
> *   **pw=**激活打印模式并开始打印。目前 &pw=1 似乎有问题，但使用 &pw=2 之类的设置是可以的。
> *   **z=**设置缩放级别。
> *   **iwloc=**指定信息窗口的显示位置。在商业搜索中，&iwloc=A 到 &iwloc=J 将在相应的商业标记上打开信息窗口，如果当前显示的是绿色大箭头，&iwloc=near 会将其放置在绿色大箭头上。&iwloc=addr 可用于地图搜索以明确请求在地址上打开信息窗口，但无论如何这是默认设置。路线搜索支持 &iwloc=start、&iwloc=end 和 &iwloc=pause1 等。
> *   **layer=t**激活流量覆盖
> *   **msa=b**与“maps.google.com/ms”结合使用时激活“我的地图”侧边栏。没有“/ms”，它什么也不做，没有“&msa=b”，“/ms”什么都不做。
> *   **msa=0**参与“我的地图”处理。可能指定“我的地图”服务器编号。
> *   **msid=**指定我的地图标识符。与“maps.google.com/ms”和 &msa=0 结合使用时，会显示相应的“我的地图”。
> *   **mrt=kmlkmz**跳过正常搜索并直接转到用户创建的内容。仅当查询包含位置和要搜索的内容时才有效。例如 q=hotel&near=london&mrt=kmlkmz 或 q=hotel+in+london&mrt=kmlkmz。
> *   **view=**可用于选择文本视图（view=text）或法线贴图视图（view=map）
> *   **dirflg=h**开启“Avoid Highways”寻路模式。取自“ [http://mapki.com/wiki/Google_Map_Parameters](http://mapki.com/wiki/Google_Map_Parameters) ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:49:04.683

是的，它是有效的，这是[Google 文档](https://developers.google.com/maps/documentation/geocoding/)

其中还包括[使用限制](https://developers.google.com/maps/documentation/geocoding/#Limits)

# python - 从用户输入创建动态命名的变量

> ID：11354214
> 
> 赞同：10
> 
> 时间：2012-07-06T00:06:37.403
> 
> 标签：python

我只是在学习编程，并且正在学习 Python 作为我的第一语言。作为一个练习，我正在尝试编写一个地址簿程序。用户使用命令提示符创建新联系人。新联系人是 Contacts 类的对象实例。

我知道如何从代码中实例化一个类对象，但是如何根据用户输入创建一个具有变量名的对象呢？假设我提示用户输入名称——我如何获取该信息并将其用作新对象的变量名称？

谢谢！！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-06T00:09:37.583

从评论中可以看出，您所问的问题在这里不止一次被问到。“如何创建动态命名的变量”。

**答：**不要这样做。有可能有更好的方法来解决问题。

**解释：**

如果您要创建动态命名的变量，那么一旦创建它们，您就无法很好地处理它们。当然有办法检查全局和局部范围，看看有什么。但事实是，您应该对正在创建的内容拥有明确的控制权。

您应该做的是将它们放入字典中：

```
people = {}
name = raw_input("What name? ") # "person"
people[name] = User(name)

print people
# {'person': <User: "person">}

print people.keys()
# ['person'] 
```

这样您就不会在命名空间中创建任意变量。你现在有一个键和对象的字典作为值。允许用户提供的输入来驱动变量的命名也是一种蠕虫。

有关更多信息，只需在此处搜索相同主题并查看大量示例说明您为什么不应该这样做。无论您看到什么示例向您展示如何使用 globals() 等，请接受我的建议，不要走那条路。爱和享受……也许拥抱和亲吻，你的字典。

参考：

*   [如何通过 while 循环动态创建变量？](https://stackoverflow.com/questions/5036700/how-can-you-dynamically-create-variables-in-python-via-to-a-while-loop)
*   [是否可以在 Python 中“动态”创建局部变量？](https://stackoverflow.com/questions/8799446/is-it-possible-to-dynamically-create-local-variables-in-python) （不要这样做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:32:35.190

您不清楚为什么要实例化名称被确定为运行时的对象，如您所愿。重要的是要意识到这不是常见的做法。

但是，可以使用 setattr 内置：

```
setattr(someobject, name, user) 
```

更正常的用法是使用字典。因此，如果您有多个用户实例并想要存储它们，您可以将它们存储在如下的字典中。这将允许您按名称引用对象。

```
class User(object):

    def __init__(self, name):
        self.name = name

users = {}

name = raw_input("What name?")
users[name] = User(name)

print users
print users['Andre'].name 
```

样本输出：

```
What name?Andre
{'Andre': <__main__.User object at 0x7f6b418a8710>}
Andre 
```

# c++ - 如何跨 DLL 边界跟踪内存

> ID：11354215
> 
> 赞同：4
> 
> 时间：2012-07-06T00:06:40.723
> 
> 标签：c++, malloc, new-operator, delete-operator

我想要高性能的运行时内存指标，所以我编写了一个基于重载`new`&的内存跟踪器`delete`。它基本上可以让您在堆中进行分配并分析有关它们的所有内容 - 碎片、大小、时间、数量、调用堆栈等。但是，它有两个致命缺陷：它无法跟踪在其他 DLL 中分配的内存以及何时拥有对象被传递给 DLL，反之亦然，崩溃随之而来。还有一些较小的缺陷：如果用户使用`malloc`而不是`new`未跟踪；或者如果用户定义了一个类`new`/ `delete`。

我怎样才能消除这些缺陷？我认为我必须通过重载`new`/从根本上错误地解决这个问题`delete`，有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:21:59.697

实现这一点的正确方法是使用 detours 和在其自己的进程中运行的单独工具。流程大致如下：

1.  在远程进程中创建内存分配。
2.  将加载您的 dll 的小型加载程序的代码放在那里。
3.  调用`CreateRemoteThread`将运行您的加载程序的 API。
4.  从加载的 dll 内部在 alloc/dealloc 函数上建立绕行（钩子、拦截器）。
5.  处理呼叫，跟踪活动。

如果您以这种方式实现您的工具，那么从哪个 DLL 或直接从 exe 调用内存分配例程并不重要。此外，您可以跟踪任何流程的活动，不一定是您自己编译的。

MS Windows 允许检查远程进程的虚拟地址空间的内容。您可以在直方图中总结以这种方式收集的虚拟地址空间的使用情况，如下所示：

![在此处输入图像描述](../Images/46709e24523b8831073ed2160ef6ffb0.png)

从这张图片中你可以看到你的目标进程中存在多少大小的虚拟分配。

![在此处输入图像描述](../Images/0331406005d7cb5f73b3372fc2332b82.png)

上图显示了 32 位 MSVC DevEnv 中虚拟地址空间使用情况的概览。蓝色条纹意味着一块承诺的埃默里，洋红色条纹 - 保留。绿色是地址空间中未被占用的部分。

您可以看到较低的地址非常分散，而中间区域则不是。高地址的蓝线 - 加载到进程中的各种 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:21:37.467

您应该找出`new`/`delete`和`malloc`/调用的常见内存管理例程`free`，并拦截它们。它通常是`malloc`/`free`最后，但请检查以确保。

在 UNIX 上，我会使用`LD_PRELOAD`一些重新实现这些例程的库。在 Windows 上，你必须稍微破解一下，但[这个链接](http://us.generation-nt.com/answer/modifying-default-win32-heap-management-help-28758902.html)似乎很好地描述了这个过程。它基本上建议您使用[Microsoft Research 的 Detours](http://research.microsoft.com/en-us/projects/detours/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:22:06.177

在模块之间传递对象的所有权从根本上是有缺陷的。它出现在您的自定义分配器中，但还有很多其他情况也会失败：

*   编译器升级，并且只重新编译一些 DLL
*   混合来自不同供应商的编译器
*   静态链接运行时库

仅举几个。从分配它的同一模块中释放每个对象（通常通过导出删除函数，例如`IUnknown::Release()`）。

# macos - 如何使用终端大写当前目录中的所有文件？

> ID：11354219
> 
> 赞同：0
> 
> 时间：2012-07-06T00:07:28.787
> 
> 标签：macos, svn, command-line, terminal

我正在尝试使用以下命令将当前工作目录中的所有文件大写：

```
ls | awk '{system("svn mv " $0 " " toupper(substr($0,1,1)) substr($0,2))}' 
```

然而，我收到以下错误消息：

```
svn: '.' is not a working copy
svn: '.' is not a working copy
svn: '.' is not a working copy
svn: '.' is not a working copy 
```

我在osx上。能否请你帮忙？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:51:12.997

你不应该在脚本中使用 ls ， ls 是用于数据的人工呈现（并且会让你的脚本在名称中出现空格，特殊文件夹，如 . 和 .. 像这里等等......），请尝试：

```
for f in *;do;svn mv $f $(echo $f| tr '[a-z]' '[A-Z]');done 
```

[有关其他案例转换的替代方案，请参见此处](https://stackoverflow.com/questions/2264428/converting-string-to-lower-case-in-bash-shell-scripting)，我使用了 tr，因为此处不需要 awk。

# java - Spinner 中的自定义项目数

> ID：11354220
> 
> 赞同：0
> 
> 时间：2012-07-06T00:07:53.280
> 
> 标签：java, android, spinner

全部-我有一个应用程序，用户可以在其中输入游戏中玩家的姓名。他/她可以进入2-4名球员。该应用程序获取名称并将它们放入微调器中。当用户输入 4 名玩家时效果很好，但当他们只输入 2 或 3 名玩家时，微调器有 2 或 1 个（分别）空白空间。当用户输入的玩家数量少于 4 时，我该如何做到这一点，只有该数量的名称出现在微调器中（没有空格）。这是我正在使用的代码：

```
String[] items = new String[] {"No Owner", message, message2, message3, message4};
Spinner spinner = (Spinner) findViewById(R.id.owner);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, items);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

消息 = 播放器 1，消息 2 = 播放器 2，等等。

欢迎使用示例代码，感谢您的宝贵时间。编辑：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    String message2 = intent.getStringExtra(MainActivity.ANOTHER_MESSAGE);
    String message3 = intent.getStringExtra(MainActivity.YET_ANOTHER);
    String message4 = intent.getStringExtra(MainActivity.AND_ANOTHER);

setContentView(R.layout.next_main); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:29:38.250

您可以检查哪些消息是空的，然后根据该信息修改您的 items 数组。目标是将数组传递给您的 ArrayAdapter，其中没有多余的空格

编辑：

```
List<String> playersList = new ArrayList() ;
        if(!message.equals("")){
            playersList.add(message);
        }
        etc..  

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, playersList); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:40:22.067

由于您要将玩家姓名导入字符串，因此我会运行字符串比较以查看每个字符串是否与默认值匹配，如果没有玩家填充该位置。换句话说，如果 `message.compareTo("")` 返回 0，则不要将其包含在 中`items`，它最好用作 ArrayAdapter。你可以通过一个简单的 if 块来做到这一点。

示例代码：

```
ArrayAdapter items = new ArrayAdapter<String>(this, int textViewResourceId);    

if (message.compareTo("") != 0) {
    items.add(message);
}
if (message2.compareTo("") != 0) {
    items.add(message2);
}
.... 
```

您将继续处理其余的项目，使用生成的数组（您可以使用 拉出`toString()`）来生成 Spinner。

编辑：修复了构造函数代码。

编辑 2：在构造函数中修复了 textViewResourceId。

# javascript - 使用 jQuery更改特定文本的文本

> ID：11354221
> 
> 赞同：1
> 
> 时间：2012-07-06T00:07:53.903
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:20:25.600

如果您有目标`tr`，那么您可以使用以下代码在`a`其中找到标签：

```
tr.find("a").text("text here"); 
```

如何找到`tr`真正取决于您所处的环境以及您的目标`tr`是如何与其他人区别开来的。

例如，如果它是“第一个”tr，您可能会说：

```
var tr = $("tr").first(); 
```

如果它是事件发生的元素（例如点击事件）：

```
var tr = $(this); 
```

如果您遇到目标的子元素，`tr`您可能会说：

```
var tr = $(this).closest("tr"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:21:09.823

# c# - 从屏幕继承的单元测试视图模型 (Caliburn.Micro)

> ID：11354223
> 
> 赞同：1
> 
> 时间：2012-07-06T00:08:17.833
> 
> 标签：c#, unit-testing, mvvm, tdd, caliburn.micro

我已经开始学习 TDD，并且遇到了 ViewModel 测试。我使用 Caliburn.Micro 作为我的 MVVM 框架，并且我的 ViewModel 继承自 Screen。

当我创建尝试测试 ViewModel 时，我收到此错误：

> 'Caliburn.Micro.Screen' 类型在未引用的程序集中定义。您必须添加对程序集“Caliburn.Micro”的引用

这个可以吗？我认为将我的类与框架隔离是正确的路径，但我不知道该怎么做（保留框架通过从 Screen 继承而带来的好处）

谢谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:47:54.650

是的，可以添加参考。唯一的选择是动态创建类型，这并没有真正为您提供太多优势。

我假设您的 ViewModel 不会尝试显示任何屏幕。如果是这样，您将需要对其进行子类化以获得可以进行单元测试的版本。

我没有使用过 Caliburn.Micro，但您的 ViewModel 继承自 Screen 听起来有点奇怪。通常使用 MVVM，ViewModel 知道 View 但不会从其中继承。快速的 Google 搜索表明，在 Caliburn.Micro 中，ViewModel 实现了 IScreen 接口，而不是从 Screen 继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:16:05.867

对 Screen 的依赖是否也会带来很多其他的东西……如果不是，可能没什么大不了的。

ViewModel 是表示层的一部分，通常与您使用的 GUI 框架耦合。推论：当 GUI 框架发生变化时，ViewModel 可能需要重新设计/丢弃，除非您为它设计（将业务逻辑与演示文稿并将其向下推）。如果您对此段落感到愤怒，请查看Robert Martin在 NDC Oslo[上关于清洁架构的演讲（可在线获取）](http://vimeo.com/43612849)

# java - 条纹 JsonResolution 在 Hibernate 多对一映射上导致 stackoverflowerror

> ID：11354224
> 
> 赞同：0
> 
> 时间：2012-07-06T00:08:22.880
> 
> 标签：java, json, stripes

我一直在网上试图解决这个问题。

我有一个对象，它已通过使用成功映射（包括 JsonResolution）但是当我将多对一映射用于不同的关系时，JsonResolution 会导致 stackoverflow 错误，我认为它陷入了该关系的循环中。我已经尝试过延迟加载、Hibernate.Initialize 等，但没有运气，我认为需要在 JsonResolution 端或映射进行更正。

```
<set name="Audits" table="audits" inverse="true" lazy="false" fetch="select">
            <key>
                <column name="entityId" not-null="true" />
            </key>
            <one-to-many class="Audit" />
        </set>

<many-to-one name="person" class="Person" column="personId" not-null="false" unique="true" /> 
```

代码：

```
@HandlesEvent("getall")
    public Resolution getall() {
        if(!User.isLoggedInUserAdmin()) { return null; }
        EventDTO eDTO = new EventDTO();
        Session s = DBUtil.GetHibernateSession();
        List<Event> events = s.createCriteria(Event.class)
                .setMaxResults(2)
                .add(Restrictions.eq("type", "Accident"))
                .addOrder(Order.desc("id"))
                .list();
        if(events.isEmpty()) { 
            eDTO.setStatus("success");
        } else {
            for(int i=0; i< events.size(); i++) {
                Hibernate.initialize(events.get(i).getPerson());
            }
            eDTO.setEntities(events);
            eDTO.setStatus("success");
        }
        JsonResolution j = (JsonResolution) new JsonResolution(eDTO);
        s.close();
        return j;
    } 
```

错误：

```
net.sourceforge.stripes.exception.StripesServletException: ActionBean execution threw an exception.
    net.sourceforge.stripes.controller.DispatcherServlet.service(DispatcherServlet.java:183)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:247)
root cause

java.lang.StackOverflowError
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.json.JSONObject.populateMap(JSONObject.java:937)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONArray.<init>(JSONArray.java:171)
    org.json.JSONObject.wrap(JSONObject.java:1524)
    org.json.JSONObject.populateMap(JSONObject.java:939)
    org.json.JSONObject.<init>(JSONObject.java:272)
    org.json.JSONObject.wrap(JSONObject.java:1539)
    org.json.JSONObject.populateMap(JSONObject.java:939) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:22:55.060

可能序列化无法处理循环引用（事件 -> 人员和人员 -> 事件）。尝试使用您自己的序列化实现（我不知道您是否可以插入自己的序列化器）或使用另一个库（可能是[Gson](http://code.google.com/p/google-gson/)？）进行序列化。

# python - 当方法名称仅在运行时已知时，如何使用 Python 调用 XML RPC 方法？

> ID：11354225
> 
> 赞同：0
> 
> 时间：2012-07-06T00:08:23.250
> 
> 标签：python, xml-rpc

我在下面有一些调用 XML RPC 方法的 Python 代码：

```
from xmlrpclib import ServerProxy

s = ServerProxy("http://localhost:8000")
s.SomeMethod('parameter') 
```

但是，当方法的名称 ( `SomeMethod`) 仅在运行时已知时会发生什么？当方法的名称在变量中时，有什么方法可以调用方法？

我已经尝试了以下方法，但它们都不起作用：

```
s['SomeMethod']('parameter')
s.__getattr__('SomeMethod')('parameter')
getattr(s, 'SomeMethod')('parameter') 
```

他们都返回：

```
xmlrpclib.Fault: <Fault -32601: 'Method not found'> 
```

* * *

**进一步编辑：**这开始变得非常奇怪。当我使用`s['SomeMethod']('parameter')`时，远程服务器报告我试图调用 XML 方法`__getattr__`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:27:13.173

`getattr`按预期工作。如果我尝试获取`repr`返回值，它会失败，因为 ServerProxy 类没有公开“repr”方法。因此，如果从交互式提示中，我只需键入：

```
>>> getattr(proxy, "is_even")
Traceback (most recent call last):
(...)

xmlrpclib.Fault: <Fault 1: '<type \'exceptions.Exception\'>:method "is_even.__repr__" is not supported'> 
```

但我可以这样做：

```
>>> a = getattr(proxy, "is_even")
>>> a(5)
False
>>> 
```

（使用的服务器端截图来自 Python 的 cmlrpc 文档： [http](http://docs.python.org/library/xmlrpclib.html) ://docs.python.org/library/xmlrpclib.html ）

# ms-access - VBA函数在特定情况下添加尾随零

> ID：11354226
> 
> 赞同：0
> 
> 时间：2012-07-05T22:49:35.457
> 
> 标签：ms-access

我试图创建一个函数，该函数将通过字符串部分给出数字的值。我尝试的各种版本都没有按计划工作，我在[http://www.utteraccess.com/forum/Find-number-string-Ins-t1746052.html](http://www.utteraccess.com/forum/Find-number-string-Ins-t1746052.html)上找到了一个代码片段。

我试图从中提取值的字符串如下所示：
`A11, A21A23, A25, A23A21, etc.`
在一些特殊情况下，字符串是：
`A23 D0, A23 D1, A23A21 D0, etc.`

出于某种原因，在包含 D 的实例中，代码将为 D 后面的任何数量添加一个零。因此`A23 D0`返回：`23`，但它应该`A23 D1`返回`230`。 `A23 D3`返回`23000`，依此类推。

我对 VBA 相当陌生，我无法弄清楚是什么导致字母 D 添加尾随零，而其他字母代替 D 没有相同的效果。

VBA 脚本如下：

```
Public Function GetNumFromStringFloating(strText As String, Optional intPos As Integer = 1) As String
'? GetNumFromStringFloating("12*TLG AUTVTG18871890AAUG")    = 12
'? GetNumFromStringFloating("12*TLG AUTVTG18871890AAUG",3)  = 12
'? GetNumFromStringFloating("12*TLG AUTVTG18871890AAUG",14) = 18871890
'? GetNumFromStringFloating("12*TLG AUTVTG18871890AAUG",-1) = 18871890  (Reverse Search)
Dim X As Integer
If intPos > 0 Then
    For X = intPos To Len(strText)
        If IsNumeric(Mid(strText, X, 1)) Then
            GetNumFromStringFloating = val(Mid(strText, X) & "")
            Exit For
        End If
    Next X
Else
    For X = Len(strText) To Abs(intPos) Step -1
        If IsNumeric(Mid(strText, X, 1)) Then
            GetNumFromStringFloating = val(Mid(strText, X) & "")
        Else
            If GetNumFromStringFloating <> "" Then Exit For
        End If
    Next X
End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:47:47.530

像这样的东西可能适合：

```
Function getnum(sText)
''A11, A21A23, A25, A23A21
Dim sNum As String

''Skip the first letter
For i = 2 To Len(sText)
    If IsNumeric(Mid(sText, i, 1)) Then
        sNum = sNum & Mid(sText, i, 1)
    Else
        Exit For
    End If
Next

getnum = sNum
End Function 
```

# .net - 任何人都可以在 VS2012 的 C++/CLI 中使用 System.Windows.Input.ICommand 吗？

> ID：11354233
> 
> 赞同：0
> 
> 时间：2012-07-06T00:09:14.637
> 
> 标签：.net, c++-cli, visual-studio-2012, icommand

我的目标是 .Net 4.0，但使用 VS2012 来支持我现有的项目。我们到处使用命令在 WPF 中进行绑定。

当我在外部依赖项中探索 System.dll 时，似乎 System.Windows 命名空间完全缺失。

我在这里错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T18:55:11.067

> System.dll 中似乎完全缺少 System.Windows 命名空间

没错，该命名空间仅存在于 WPF 程序集中。您需要添加对 PresentationCore 的引用。您最好也添加对其他常见的引用，以防万一，PresentationFramework、WindowsBase 和 System.Xaml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:29:29.793

[`System.Windows.Input.ICommand`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)列出支持的框架配置文件[的文档：](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)

> .NET Framework - 支持：4、3.5、3.0
> 
> .NET Framework 客户端配置文件 - 受以下版本支持：4、3.5 SP1

VS2012 试图引导您进行 Metro 应用程序开发，但 Metro 配置文件中没有一些内容。

# android - 想要按钮在淡出时无法点击，Vice Versa

> ID：11354235
> 
> 赞同：1
> 
> 时间：2012-07-06T00:09:29.083
> 
> 标签：android, animation, clickable

我有一个带有两个按钮的表格行，并且在三秒钟内没有触摸 WebView 后，我使用动画将整个表格行淡出。触摸 WebView 后，表格行会淡入。但是，我注意到虽然表格行淡出（并且按钮不可见），但按钮仍然是可点击的。我尝试在淡出动画之后立即将表格行可见性设置为 View.GONE，然后在淡入动画之前将可见性设置为 View.VISIBLE，但无济于事；当我将它设置为 View.VISIBLE 时，它似乎被忽略了，因为一旦表格行消失，它就不会在屏幕触摸时重新出现；

```
TableRow tr;
Animation fade_in = new AlphaAnimation(0.0f, 1.0f);
Animation fade_out = new AlphaAnimation(1.0f, 0.0f);
WebView loss_source_dest;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loss);
    getStrings();
    findIDs();

    fade_in.setDuration(750);
    fade_out.setDuration(750);
    fade_out.setStartOffset(3000);
    initial_fade.setDuration(750);
    fade_in.setFillAfter(true);
    fade_out.setFillAfter(true);
    tr.startAnimation(fade_out);
    loss_source_dest.setOnTouchListener(new View.OnTouchListener() 
    {
        public boolean onTouch(View v, MotionEvent event) 
        {
            tr.setVisibility(v.VISIBLE);
            tr.startAnimation(fade_in);
            tr.startAnimation(fade_out);
            tr.setVisibility(v.GONE);
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:54:54.897

[带有 wait() 方法的线程](https://stackoverflow.com/questions/5791307/wait-for-3-seconds-or-user-click?answertab=active#tab-top)应该做你想做的事。您不仅需要为动画设置偏移量，还需要为 View.GONE 设置偏移量。

这也可以帮助：

```
myButton.setEnabled(false); 
```

您只需要在需要时启用/禁用按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:33:52.953

好的，这里似乎有一些问题。

1) 要修复在调用 setVisibility(View.GONE) 后仍可点击的按钮，这里有一个解决方案... [android View with View.GONE 仍然接收 onTouch 和 onClick](https://stackoverflow.com/questions/4728908/android-view-with-view-gone-still-receives-ontouch-and-onclick)。（我已尝试将此添加到您的解决方案中）。

2) startAnimation 方法调用是非阻塞的，因此最好的解决方案是使用 AnimationListener 来检测哪个动画已完成，然后将按钮的可见性设置为 View.GONE。

```
TableRow tr;
Animation fade_in = new AlphaAnimation(0.0f, 1.0f);
Animation fade_out = new AlphaAnimation(1.0f, 0.0f);
WebView loss_source_dest;

public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.loss);
getStrings();
findIDs();

fade_in.setDuration(750);

fade_out.setDuration(750);
fade_out.setStartOffset(3000);
fade_out.setAnimationListener(new AnimationListener(){
      public void onAnimationStart(Animation anim)
      {
      }
      public void onAnimationRepeat(Animation anim)
      {
      }
      public void onAnimationEnd(Animation anim)
      {
          tr.setVisibility(View.GONE);
      }
});
initial_fade.setDuration(750);
// fade_in.setFillAfter(true); (Removed)
// fade_out.setFillAfter(true); (Removed)

tr.startAnimation(fade_out);
loss_source_dest.setOnTouchListener(new View.OnTouchListener() 
{
    public boolean onTouch(View v, MotionEvent event) 
    {
        tr.setVisibility(v.VISIBLE);
        tr.startAnimation(fade_in);
        tr.startAnimation(fade_out);
        return false;
    }
}); 
```

我希望我有帮助:)

# javascript - 我可以将什么样的参数传递给 XMLHttpRequest.send()？

> ID：11354236
> 
> 赞同：0
> 
> 时间：2012-07-06T00:09:32.623
> 
> 标签：javascript, ajax

我有一个看起来像这样的请求

```
var xhr = new XMLHttpRequest();
[...]
xhr.send("param1=" + obj.param1 + "&param2=" + val); 
```

我真的更喜欢写类似的东西

```
xhr.send( {"param1": obj.param1, "param2": val} ); 
```

(A) 有可能这样做吗？

(B) 我在哪里可以找到可以回答这个问题的规范？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:22:16.833

> 有可能这样做吗？

目前没有，但草案中包含了这些内容：http: [//www.w3.org/TR/XMLHttpRequest/#the-send-method](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)。XmlHttpRequest 应该能够发送 ArrayBuffers、Blobs、Documents、字符串和 FormData 对象（[html5rocks 中的示例](http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-formdata)）。

但是，不支持发送对象 - 它们需要可序列化。您可以将它们作为 JSON 字符串发送，或使用众多库函数之一来生成 URL 参数字符串（如[`jQuery.param()`](http://api.jquery.com/jQuery.param/)）。

> 我在哪里可以找到可以回答这个问题的规范？

我已经链接了上面的规范，但对于浏览器支持，您需要查看[兼容性表](https://developer.mozilla.org/en/xmlhttprequest#Browser_compatibility)或浏览器的文档（例如[MDN](https://developer.mozilla.org/en/DOM/XMLHttpRequest#send%28%29)上的 FF ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:42:48.653

你可以用 jQuery 轻松地做这种事情： `jQuery.ajax({ url: http://yoururl.com, data: {"param1": obj.param1, "param2": val}});`

# c# - C# 中的类实例通信

> ID：11354238
> 
> 赞同：3
> 
> 时间：2012-07-06T00:09:44.047
> 
> 标签：c#, design-patterns, instance

我正在制作一个有几个类的游戏，每个类都执行某种特定的任务。

我对 OOP 完全陌生，我想知道我应该怎么做才能让我的类实例在彼此之间进行通信，而不会重复使用静态类、方法和属性，这似乎是一件可怕的事情。

我是自学成才的程序员，我意识到我做了很多不好的做法。到目前为止，我设法使这两个类都成为静态的，但我想知道我应该怎么做才能使我的代码尽可能好。

另外，如果您能向我推荐一些资源/书籍/文章，那将是很好的，这样我就可以阅读有关该主题的更多信息（实例之间的通信）。

这是一段代码，所以你明白我在说什么。

```
class Program
{
    static void Main(string[] args)
    {
        Class1 instance1 = new Class1();
        Class2 instance2 = new Class2();

        // infinite loop
        while (true)
        {
            instance1.UpdateMethod(someValue);
            instance2.UpdateMethod();
        }
    }
}

class Class1
{
    int Property;
    UpdateMethod(int argument)
    {
        Property += argument;
        if(Property == 3000)
        {
            // I should change the state of instance2
        }
    }
}

class Class2
{
    UpdateMethod()
    {
        if(Time.GetTime() == SomeTime)
        {
            // here I want to change the state of instance1
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:17:28.393

对于常见设计模式的概述，我推荐

[http://en.wikipedia.org/wiki/Category:Software_design_patterns](http://en.wikipedia.org/wiki/Category:Software_design_patterns)

`Class1`如果和之间存在自然关系`Class2`，那么一个实例持有对另一个实例的引用是很常见的。例如，如果您有一个`Player`类，而玩家有一个`Weapon`，请像这样定义您的类：

```
public class Player
{
    public Weapon Weapon { get; set; }
    // Other properties
} 
```

特别是在您的情况下，您似乎想`Class1`从`Class2`. 我建议您定义一个`Class2`包含 的相关实例的属性`Class1`，就像上面的示例一样。

这称为[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)。

> 在软件工程中，复合模式是一种分区设计模式。复合模式描述了一组对象将以与对象的单个实例相同的方式处理。组合的目的是将对象“组合”成树结构以表示部分整体的层次结构。实现复合模式可以让客户统一处理单个对象和组合。

另一种经常用于作用于对象实例的模式是[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

> 在面向对象的编程中，命令模式是一种设计模式，其中对象用于表示和封装以后调用方法所需的所有信息。此信息包括方法名称、拥有该方法的对象和方法参数的值。始终与命令模式相关的三个术语是客户端、调用者和接收者。客户端实例化命令对象并提供稍后调用该方法所需的信息。调用者决定何时调用该方法。接收者是包含方法代码的类的一个实例。使用命令对象可以更轻松地构建需要委托的通用组件，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:17:40.533

我会建议你两个链接和他们的内容是免费阅读

[http://msdn.microsoft.com/en-us/library/dd460654.aspx](http://msdn.microsoft.com/en-us/library/dd460654.aspx)

更多关于模式更好的细节是[http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep](http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep)

最后一个来自鲍勃叔叔对 OOD 原则的良好解释[http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:19:59.533

如果你需要从另一个类改变一个对象的状态，你需要一个对它的引用。常见的方法是通过构造函数：

```
public class Class2
{
    private readonly Class1 instance;

    public Class2(Class1 instance)
    {
        this.instance = instance;
    }

    public void UpdateMethod()
    {
        if(VisualStyleElement.TaskbarClock.Time.GetTime() == SomeTime)
        {
            // here I want to change the state of instance1
            this.instance.SomeProperty = "Some Value";
        }
    }
} 
```

或通过传递给方法的参数

```
public class Class2
{
    public void UpdateMethod(Class1 instance)
    {
        if (VisualStyleElement.TaskbarClock.Time.GetTime() == SomeTime)
        {
            // here I want to change the state of instance1
            instance.SomeProperty = "Some Value";
        }
    }
} 
```

在第一种情况下，您可以这样称呼它：

```
Class2 instance2 = new Class2(instance1);
instance2.UpdateMethod(); 
```

在第二种情况下，您可以这样称呼它：

```
Class2 instance2 = new Class2();
instance2.UpdateMethod(instance1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:30:34.113

欢迎来到 OOP 的世界！要理解的一件重要事情是**继承**的概念。继承与什么**有关**。孩子是人，母亲是人。

请看一下这个模型：

```
public class Person
    {
        protected string Name;

        public string WhatsYourName()
        {
            return this.Name;
        }
    }

    public class Mother: Person
    {
        public Mother(string personName)
        {
            this.Name = personName;
        }
    }

    public class Child : Person
    {
        public Mother MyMother { get; set; }

        public Child(string personName)
        {
            this.Name = personName;
        }

        public string WhoAreYou()
        {
            return string.Format("My name is {0} and my mom is {1}", this.Name, this.MyMother.WhatsYourName());
        }
    } 
```

现在，对象如何相互交谈？有很多方法可以实现这一点，但都归结为一个简单的概念：**引用**。当您创建一个对象 (x = new ...) 时，您正在创建一个新**实例**，并且您有它的**引用**。

现在，看看这个：

```
static void Main(string[] args)
{
    Mother mary = new Mother("Mary");
    Child bobby = new Child("Bobby");

    bobby.MyMother = mary;

    Console.WriteLine(bobby.WhoAreYou());

    Console.ReadLine();
} 
```

看看我们什么时候设置鲍比的妈妈？我们正在传递它的**对象引用**。

请看一下这段代码，我相信它会有所帮助。

此外，我强烈建议您阅读有关**设计模式**的内容。也许从这里开始：http: [//www.dofactory.com/Patterns/Patterns.aspx/](http://www.dofactory.com/Patterns/Patterns.aspx/)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T01:02:27.547

这完全取决于什么`Class1`和`Class2`是什么以及它们是否需要耦合。如果他们做不相关的事情并且不需要相互了解，您可以使用事件来传达他们之间的变化：

```
class Program
{
    static void Main(string[] args)
    {
        Class1 instance1 = new Class1();
        Class2 instance2 = new Class2();

        instance1.CriticalValueReached += instance2.DoSomething;
        instance2.TimeoutElapsed += instance1.DoSomething;

        // infinite loop
        while (true)
        {
            instance1.UpdateMethod(someValue);
            instance2.UpdateMethod();
        }
    }
}

class Class1
{
    int Property;

    public event Action CriticalValueReached;

    public UpdateMethod(int argument)
    {
        Property += argument;
        if (Property == 3000)
            RaiseCriticalValueReached();
    }

    public void DoSomething()
    {
        // Whatever...
    }

    private void RaiseCriticalValueReached()
    {
        var handler = CriticalValueReached;
        if (handler != null)
            handler();
    }
}

class Class2
{
    public event Action TimeoutElapsed;

    public UpdateMethod()
    {
        if (Time.GetTime() == SomeTime)
            RaiseTimeoutElapsed();
    }

    public void DoSomething()
    {
        // ...
    }

    private void RaiseTimeoutElapsed()
    {
        var handler = TimeoutElapsed;
        if (handler != null)
            handler();
    }
} 
```

# error-handling - ubuntu 生产中的 Sinatra 和自定义漂亮错误

> ID：11354239
> 
> 赞同：0
> 
> 时间：2012-07-06T00:10:07.277
> 
> 标签：error-handling, sinatra, rack, production-environment

我在扯头发。在我的 Mac 上，显示了我想向用户显示的自定义漂亮错误。当我部署到我的 ubuntu 机器时，我会收到一条最小的黑白错误消息。

我有 sinatra 错误处理，就像这样

```
set :raise_errors, false
set :show_exceptions, false

not_found do
    erb :'errors/not_found'
end 
```

我认为这是因为我正在运行 nginx 和瘦（在 ubuntu 上），但如果我绕过这个堆栈并直接运行，我仍然在 ubuntu 上遇到问题。

```
ruby start.rb #I get a minimal black and white error 
```

或者

```
rackup -E production config.ru  #I get a minimal black and white error 
```

或者

```
rackup -E development config.ru  #I get rack stack trace 
```

无论我如何开始，即使我使用 Rack::ShowExceptions，我的 Mac 上都会出现相当大的错误。我正在运行 ruby​​ 1.9.2 和 sinatra 1.3.2。

关于如何在生产中向用户提供漂亮错误的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:27:00.077

好的，在数周内多次尝试修复此问题失败后，我意识到我在做一些愚蠢的事情。我的生产 config.yaml 中缺少 [email_errors][to]。这打破了我的error_handler。如果我在将“use Rack::ShowExceptions”添加到我的 config.ru 时阅读了机架堆栈跟踪，我会看到问题，除了我没有阅读它，因为 error_handler 抛出了我期望的相同错误测试错误。愚蠢的监督。

# php - 无法使用 ssh php mysql 创建我的数据库

> ID：11354240
> 
> 赞同：0
> 
> 时间：2012-07-06T00:10:16.647
> 
> 标签：php, mysql, database

嘿伙计们，我在实际创建数据库时遇到了一些麻烦。

我的教授为我们提供了一个 .data 文件，其中包含需要运行以创建表并将数据插入其中的所有查询。我运行以下代码行：

```
mysql -u user -p pass >use dbname.data 
```

但是当我尝试查询数据库或对其执行任何操作时，它告诉我数据库中没有任何表。我也试过以下没有运气：

```
mysql -u user -p pass >create dbname.data
mysql -u user -p pass >create database dbname.data 
```

有人可以在这里指出我正确的方向吗？我的时间不多了，我的教授根本没有帮助！

提前致谢。

编辑：

我运行了以下命令，它运行了一堆查询“查询正常，1 行受影响”

```
use databasename;
source dbfilename.data 
```

但现在当我运行这些时：

```
use databasename;
show tables; 
```

它说“空集”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:14:47.957

尝试这个

mysql -u user -p pass dbname < file.data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:16:55.890

检查 .data 文件是否有任何“USE databasename”查询以及数据库名称是否与您期望的相同。

# url - URL中的隐藏空间

> ID：11354246
> 
> 赞同：0
> 
> 时间：2012-07-06T00:10:42.840
> 
> 标签：url, redirect, spaces, http-redirect

当我访问[http://sweatingthebigstuff.com/lending-club-loans-to-avoid/](http://sweatingthebigstuff.com/lending-club-loans-to-avoid/)时，我得到一个 404 页面。但是当我两次按退格键时，它会删除`/`但不会删除，`d`所以那里有一个隐藏的空间。一旦我删除它，它就可以工作。

我的 URL 中如何存在隐藏空间，我可以做些什么来检测并在`.htaccess`文件中删除它吗？否则，我添加的每个重定向都必须是每个重定向之一。

***编辑：***

以下是我认为可能与`.htaccess`文件相关的内容：

```
RewriteCond %{REQUEST_URI} !\.[^./]+$
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://sweatingthebigstuff.com/$1/ [R=301,L]

RedirectMatch 301 ^/[0-9]{4}/[0-9]{2}/[0-9]{2}/(.+)$ /$1 
```

它实际上看起来像这样：`http://sweatingthebigstuff.com%E2%80%8B/lending-club-loans-to-avoid%E2%80%8B/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:24:42.447

尝试改变

```
RewriteCond %{REQUEST_URI} !\.[^./]+$
RewriteCond %{REQUEST_URI} !(.*)/$ 
```

至

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# ios - 将分数发布到 Graph Api - 分数

> ID：11354255
> 
> 赞同：1
> 
> 时间：2012-07-06T00:11:53.940
> 
> 标签：ios, facebook, api, leaderboard

我正在尝试使用 Facebook 的 Score Api 为我的 iOS 游戏创建排行榜，但我坚持将分数发布到 /USER_ID/scores。

这是我的代码：

```
NSMutableDictionary *params =  [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                @"2000", @"score",
                                self.facebook.accessToken, @"access_token",
                                nil];

[self.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/scores", self.userId]
                          andParams:params 
                      andHttpMethod:@"POST" 
                        andDelegate:delegate]; 
```

但是，我收到此错误：

Domain=facebookErrDomain Code=10000 “操作无法完成。（facebookErrDomain 错误 10000。）” UserInfo=0x6ba2fd0 {error={type = mutable dict, count = 3, entries => 2 : {contents = "type"} = {contents = "OAuthException"} 3 : {contents = "message"} = {contents = "(#15) 必须使用应用程序访问令牌调用此方法。"} 6 : {contents = "code"} = 15 } }

我还尝试使用应用访问令牌。没有解决

publish_actions 权限已授予应用程序。

文档中提到应该使用应用访问令牌，但使用应用访问令牌出现此错误

```
 error =     {
    code = 102;
    message = "A user access token is required to request this resource.";
    type = OAuthException;
}; 
```

使用用户访问令牌给了我这个错误：

```
error =     {
    code = 15;
    message = "(#15) This method must be called with an app access_token.";
    type = OAuthException;
}; 
```

# php - Tableau 票证 - POST 以获取票证返回登录表单，而不是票证 ID

> ID：11354258
> 
> 赞同：5
> 
> 时间：2012-07-06T00:12:06.927
> 
> 标签：php, cakephp, tableau-api

我看到 StackOverflow 周围没有多少 Tableau 专家，但也许有人以前遇到过这个问题，并且知道解决方案。我是 Tableau 的菜鸟，所以如果这个问题是空洞的，请原谅我。提前致谢！

**系统**

我们设置 Tableau 的方式是在与 Web 服务器分开的服务器上。该应用程序是用 PHP 编写的，使用稳定版 CakePHP 2.2.0。

```
10.0.0.10 - webserver
10.0.0.11 - tableau 
```

为了让客户查看 Tableau 生成的报告，我们使用了受信任的身份验证票证系统，在该系统中，客户会获得一个带有特定票证的 URL。然后，客户端使用此票证直接向 tableau 服务器请求报告。

一个例子：

1.  客户端[获取 http://example.com/reports/view/3](http://example.com/reports/view/3) - 内部为 10.0.0.10。
2.  服务器 POST 到 10.0.0.11，并要求客户端查看报告 3 的票证
3.  Tableau Server 使用一个数字（例如 987654321）回复帖子。
4.  服务器使用页面响应客户端的 GET，包括票证。
5.  客户端获取[http://tableau.example.com/trusted/987654321/view3](http://tableau.example.com/trusted/987654321/view3)
6.  Tableau Server 根据票证验证客户端 IP，并使用报告的 HTML 进行响应。

**问题**

问题是这样的：当代码要求提供 tableau 票号（上面的步骤 2 和 3）时，Tableau 服务器会响应身份验证页面，而不是票证 ID。如果我注释掉 $postdata 数组中的“target_site”参数，tableau 不会以登录页面响应，而是简单地说“-1”。

生成可信 URL 的 PHP 代码：

```
<?php
public function get_trusted_url($view = 'book2sheet1') {
    $email = $this->Auth->user();
    $email = $email['Email']; //This email is registered as a Tableau user!

    $postdata = http_build_query(
        array(
            'username' => $email,
            'target_site' => 'oursite', //If I comment this line out, Tableau no longer returns an auth page and instead simply returns "-1"
            'client_ip' => $_SERVER['REMOTE_ADDR']
        )
    );

    $opts = array('http' =>
        array(
            'method'  => 'POST',
            'header'  => 'Content-type: application/x-www-form-urlencoded',
            'content' => $postdata
        )
    );

    $context = stream_context_create($opts);

    $ticket = file_get_contents('http://10.0.0.11/trusted/', false, $context);
    if($ticket > 0) {
        return 'http://tableau.example.com/t/rg/trusted/' . $ticket . '/' .$view . '?:embed=yes&:comments=no&:toolbar=yes';
    } else {
        echo 'failure'; //debug
        print_r($ticket); //debug - this prints out the auth page
        return false;
    }
} 
```

任何帮助将不胜感激！正如我所提到的，我是 Tableau 的菜鸟 :)

返回的登录 html 的图像，使用转储到页面`print_r('ticket')`

![tableau auth 登录页面转储](../Images/3dc9c96716ff1003fcfcf1e2127c7f51.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:05:56.860

我要做的第一件事是确保 Trusted Ticketing 在真空中运行。此链接[http://ttrequest.notlong.com](http://ttrequest.notlong.com)   会将您带到一个文件夹中，该文件夹包含一个简单的 HTML/JavaScript 页面，您可以使用它来确保所有内容都正确配置。然后，更仔细地查看您的代码。

为 target_site 提供一个值（甚至是零长度字符串）是必要的，因为它可以告诉我们您正在为哪个 Tableau 站点请求票证。空白/零长度字符串 = “默认站点”，本质上。

我对 PHP 知之甚少，但 Tableau 提供了一些我过去使用过的示例代码。它不用于`file_get_contents()`进行 POST，而是依靠`http_parse_message()`……它对我有用：

```
 Function get_trusted_ticket_direct($server, $user, $targetsite) {

  $remote_addr = $_SERVER['REMOTE+ADDR'];  
  $params = array(
    'username' => $user,
    'client_ip' => $remote_addr,
    'target_site' => $targetsite
      );

    $ticket= http_parse_message(http_post_fields("http://$server/trusted", $params))->body;

  if ($ticket > 0) {
     return $ticket;
  }
  else
    return 0;
} 
```

老实说，我不知道在 PHP 社区中 file_get_contents() 是否被视为比 http_parse_message() 更好的方法（也许有人可以对此发表评论），但示例代码是可靠的，除了它仍然没有' t 包括对 target_site 参数的引用（因为它是在 Tableau 具有多租户之前编写的）。

示例代码位于 C:\Program Files (x86)\Tableau\Tableau Server\7.0\extras\embedding\php

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:08:44.533

您必须使用站点 ID 而不是“名称”。还要注意站点名称和 ID 不是同一个字符串，因为这会导致返回 html 页面；确保您的站点名称和 ID 不同！

# java - 了解 Java 中的数组索引

> ID：11354259
> 
> 赞同：2
> 
> 时间：2012-07-06T00:12:07.403
> 
> 标签：java, arrays

我有一个关于 Java 如何处理数组的简短问题。下面是我的代码：

```
//import java.util.Arrays;
import static java.lang.System.out;

public class Arrays
{       
    public static void main(String[] args)
    {           
        String [][] multiArray = new String[10][8];

        int k = 1;
        while (k <= 61) {out.print('-'); k++;}
        out.println ();

        for (int i = 0; i < multiArray.length; i++)
        {
            for (int j = 0; j < multiArray[i].length; j++)
            {
                multiArray[i][j] = i + "" + j;
                out.print ("| " + multiArray[i][j] + " ");  
            }
            out.println ("|");
        }           
        k = 1;
        while (k <= 61) {out.print('-'); k++;}
        out.println();          
    }       
} 
```

我知道您必须创建一个双“for”循环来打印两个维度的值，并且您必须拥有：

```
 multiArray[i].length 
```

以便它知道参考第二维的长度。我只是不明白它是如何工作的。

我对此感到困惑的是：在程序的最开始，在我声明我的数组之后，如果我写了如下语句：

```
 system.out.println (multiArray.length); 
```

它将打印 10 的值，这是我在第一维中声明的长度。但是，如果我创建一些随机变量，如“int a = 0”或“int idontgetthis = 0”，然后我写：

```
 system.out.println (multiArray[a].length); 
```

它以某种方式知道打印第二维的长度 8。所以我的问题是，它怎么知道如何做到这一点？这太痛苦了！！哈哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T00:15:53.503

因为`multiArray`真的是数组数组。`multiArray[a]`对对象的引用也是如此。该对象本身就是一个数组。该数组有一个长度 (8)，以及一个名为`length`which 的属性可用于返回该长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:29:11.293

你可以试试这样看。

```
public class Arrays{
  public static class EightStrings {
    public String[] strings = new String[8];
  }
  EightStrings[] tenOfThem = new EightStrings[10];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:00:00.463

基本上，这是一个概念混淆，通过这样做：

`String[] array;`

您**声明**您将拥有一个长度未知的字符串数组。
调用：`System.out.println(array.length)`此时将失败并出现编译错误，因为`array`尚未**初始化**（因此编译器无法知道它有多长）。

通过做：

`String[] array = new String[8]`

您声明您将拥有字符串数组并对其进行**初始化**，指定它将有 8 个字符串的空间，然后编译器为这 8 个字符串分配空间。需要注意的重要一点是，即使编译器现在知道您将在数组中存储 8 个字符串，它也会用 8 个空值填充它。

所以此时调用`System.out.println(array.length)`将返回 8（编译器知道大小），但调用`System.out.println(array[1])`将返回 a `Null Pointer Exception`（其中有 8 个空值）。

现在，在您提供的示例中，您要声明一个**二维数组**，这是一个包含其他数组的数组。

二维数组初始化为`String[][] multiarray = new String[10][8];`，逻辑与简单数组相同，`new String`**[10]**`[8];`表示包含其他数组的数组的长度，`new String[10]`**[8]**`;`表示包含的数组的长度。

所以`system.out.println(multiArray[x].length);`在初始化多数组之后做被翻译为“第 X 个包含数组的长度是多少？”，由于您的初始化，编译器现在知道所有包含数组的长度是 8，即使它们现在充满了空值.

希望它有助于增加更多的理解！

# jquery - jquery 空白/灰色显示对话框的页面

> ID：11354260
> 
> 赞同：2
> 
> 时间：2012-07-06T00:12:21.507
> 
> 标签：jquery, jquery-ui, modal-dialog

如何清除显示对话框的页面。下面是我的代码 HTML：

```
<style>
.ui-dialog, .ui-dialog-content {
 border:1px solid #cde68c;
 border-bottom:0px;
 background-color: white !important;
 color: #333;
 font: 12px/180% Arial, Helvetica, sans-serif;
}
.ui-dialog-titlebar {
 display:none;
}
#ui-dialog-title-dialog {
 color: yellow !important;
 text-shadow: none;
}
.ui-dialog-buttonpane {
 border:1px solid #cde68c;
 border-top:0px;
 margin-bottom: 1%;
}

</style>
        <div id="dialog">
            <p><span id="emailNotice"></span></p>
        </div> 
```

Javascript：

```
$j(document).ready(function() {

    $j('#dialog').dialog('open');
    $j('#emailNotice').html('show some notice text abcd');  

    $j('#dialog').dialog({
        modal:true,
        autoOpen: false,
        width: 600,
        buttons: {
            "Ok": function() {
                $j(this).dialog("close");
            },
            "Cancel": function() {
                className: 'cancelButtonClass',
                $j(this).dialog("close");
            }
        }
    });
}); 
```

**尝试过**

```
<style>
.ui-dialog, .ui-dialog-content {
 border:1px solid #cde68c;
 background-color: white !important;
 color: #333;
 line-height: 180%;
 font-family: Arial, Helvetica, sans-serif;
}
.ui-dialog-titlebar {
 display:none;
}
#ui-dialog-title-dialog {
 color: yellow !important;
 text-shadow: none;
}
.ui-dialog-buttonpane {
 border:1px solid #cde68c;
 border-top:0px;
 margin-bottom: 1%;
}

ui-widget-overlay { 
    background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x;
    opacity: 50;
    filter:Alpha(Opacity=50);  
}
</style> 
```

**也试过了**

```
$j('#dialog').dialog('open');
                 $j("#dialog").dialog("widget")
                 .next(".ui-widget-overlay")
                 .css("background", "#f00ba2");
....
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:24:14.830

像这样更改默认的 jQueryUI 类：

```
.ui-widget-overlay { 
    background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x !important;
    opacity: 100 !important;
    filter:Alpha(Opacity=100) !important;  
} 
```

只需将颜色和不透明度更改为您喜欢的颜色和不透明度，这将在模式打开时应用于页面。

如果`!important`不起作用，则说明您的设置有问题。

也许你没有 jQueryUI 功能齐全。确保您的元素中同时链接/引用了 jQueryUI js 和 css 文件。

# mysql - 在用户查询之后编写 MYSQL

> ID：11354265
> 
> 赞同：0
> 
> 时间：2012-07-06T00:12:39.923
> 
> 标签：mysql

我正在构建一个用户可以关注其他用户并被关注的应用程序。

用户还可以查看另一个用户正在关注谁。

现在假设**user1**正在查看**user2**关注的人，我需要找到 user2 关注的所有人员 ID，并将其与 user1 关注的人进行比较。

*而不是*只返回与 user1 和 user2 匹配的所有用户的 ID（我在其他论坛中看到过），我需要检索所有 user2 的以下 ID 和用户名以及一个指示被关注人是否是的标志紧随其后的是 user1。

我已经让它在 PHP 中工作，每个查询都有一个双 for 循环，但我担心这段代码会很昂贵，并且使用单个 MYSQL 查询会更好地优化。

相关表和列：

```
following_table
  follower_id
  followed_id
  following: varchar -- 'true' or 'false'

user_table
  user_id
  user_name 
```

这是我的PHP代码：

```
$user_id1 = '1991';
$myFollowingQuery = "SELECT following_table.followed_id, user_table.user_name
                     FROM following_table 
                     INNER JOIN user_table ON
                     following_table.followed_id = user_table.user_id
                     WHERE following_table.following = 'true'
                     AND following_table.follower_id = '$user_id1'";

$user_id2 = '1985';
$userFollowingQuery = "SELECT following_table.followed_id, user_table.user_name
                       FROM following_table 
                       INNER JOIN user_table ON
                          following_table.followed_id = user_table.user_id
                       WHERE following_table.following = 'true'
                       AND following_table.follower_id = '$user_id2'";

$userFollowingResult = mysql_query($userFollowingQuery) 
                             or doResponse('error',"Couldn't connect to the database");
$myFollowingResult = mysql_query($myFollowingQuery) 
                             or doResponse('error',"Couldn't connect to the database");

            for($i = 0; $i< mysql_num_rows($userFollowingResult);$i++){

$loopArray = array(followed_id => mysql_result($userFollowingResult,$i,"followed_id"),
                   followed_name => mysql_result($userFollowingResult,$i,"user_name"));

for($j = 0; $j< mysql_num_rows($myFollowingResult);$j++){
  if(mysql_result($userFollowingResult,$i,"followed_id")
     ==mysql_result($myFollowingResult,$j,"followed_id")) {
     $loopArray['is_following'] = 'true';
     break;
  }
  if($j==mysql_num_rows($myFollowingResult)-1){
    $loopArray['is_following'] = 'false';
    break;
  }
}

$resultArray[$i] = $loopArray;
}

echo json_encode($resultArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:27:46.263

这是一个简化的查询：

[http://sqlfiddle.com/#!2/6b8d6/3](http://sqlfiddle.com/#!2/6b8d6/3)

```
SELECT
  user.user_id,
  user.user_name,
  he.follower_id AS follower_id,
  IF(me.followed_id,1,0) AS metoo

FROM       following AS he

INNER JOIN user
   ON user.user_id = he.followed_id

LEFT  JOIN following AS me
   ON me.follower_id = 1
  AND me.followed_id = he.followed_id

WHERE he.follower_id = 2 
```

# jquery - jQuery 和隐藏 :after / :before 伪类

> ID：11354270
> 
> 赞同：17
> 
> 时间：2012-07-06T00:13:48.910
> 
> 标签：jquery, css

> **可能重复：**
> [jQuery 和伪类](https://stackoverflow.com/questions/8968992/jquery-and-pseudo-classes)

我尝试通过 jQuery 以多种方式隐藏 :after 伪类，但没有成功，我找到了另一种解决方案，方法是在包含 :after 内容的 div 下添加一种空 div 然后完全隐藏 div 所以它给出相同的效果。

但是，我只是好奇是否有人设法找到隐藏 :after 或 :before 的方法。这是我尝试过的但不起作用的方法。

```
$('.search_box:after').hide();
$('.search_box:after').css('display', 'none'); 
```

只是为了给你上下文，我有一个包含搜索表单等的 div，当搜索处于活动状态时，我想在 div 下启用一个小箭头指示器，指向找到的项目列表（使用 :after 通过 CSS ) 并且当什么都没有找到时，或者它默认为完整的列表（因为什么都没有找到），那么我想隐藏它。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-06T00:32:30.353

你不可以做这个。最好的办法是在元素上使用一个类来切换伪元素的显示。

```
<style>
    .search_box:after {
        content: 'foo';
    }
    .search_box.hidden:after {
        display: none;
    }
</style>
<script>
    //Instead of these 2 lines
    //$('.search_box:after').hide();
    //$('.search_box:after').css('display', 'none');

    //Use
    $('.search_box').addClass('hidden');
</script> 
```

**现场示例**- [http://jsfiddle.net/4nbnh/](http://jsfiddle.net/4nbnh/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T00:24:25.877

您可以动态添加一个`<style>`块来覆盖它。给它一个`id`，您可以在需要时将其删除。

演示：http: [//jsfiddle.net/ThinkingStiff/TRLY2/](http://jsfiddle.net/ThinkingStiff/TRLY2/)

脚本：

```
$( '#hello' ).click( function () {

    if( $( '#pseudo' ).length ) {
        $( '#pseudo' ).remove();
    } else {
        var css = '<style id="pseudo">#hello::after{display: none !important;}</style>';
        document.head.insertAdjacentHTML( 'beforeEnd', css );
    };

} ); 
```

​HTML：

```
<div id="hello">hello</div>​ 
```

CSS：

```
#hello::after {
    content: "goodbye";        
}​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T00:29:00.657

ThinkingStiff 有一个很好的主意。

您还可以为您的搜索框添加和删除一个类，并且只使用 after 标记。

`.hide:after { display:none }`类似于和的东西`.show:after { /* normal css */ }`。然后只需用 javascript 交换这些类。

编辑：混淆名称

# objective-c - SegmentedControl 始终为零

> ID：11354272
> 
> 赞同：1
> 
> 时间：2012-07-06T00:14:20.513
> 
> 标签：objective-c, ios, uisegmentedcontrol

我正在尝试构建一个掷骰子的应用程序。一点都不花哨。但是，我使用分段控件来确定骰子的数量和骰子的边数。

这是`RollPressed`代码。

```
#import "DiceBrain.h"
#import "ViewController.h"

@interface ViewController ()
@property (readonly) DiceBrain *brain;
@end

@implementation ViewController

- (DiceBrain *) brain {
    if (!brain) brain = [[DiceBrain alloc] init];
    return brain;
}

- (IBAction)RollPressed:(id)sender {
    int num_dice = dice.selectedSegmentIndex;
    int num_sides = sides.selectedSegmentIndex;
    NSLog(@"Number of Dice is %u and Number of Sides is %u", num_dice, num_sides);
    int result = [self.brain RollDice:num_dice Sides: num_sides];
    display.text = [NSString stringWithFormat:@"%g", result];
}

@end 
```

根据那里的NSLog，我总是使用零。当然，使用这个逻辑来掷骰子会导致显示器向我显示类似的东西`3.82652e-308.` 用于掷骰子的逻辑是

```
- (int)RollDice:(int)dice Sides:(int)num_sides{
    total = 0;

    for (int i = 0; i < dice; i++) {
        total += (arc4random() % num_sides) + 1;
    }

    return total;
} 
```

什么可能导致分段控制给我这样时髦的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:18:33.553

听起来像您的 IBOutlets`sides`并`dice`没有连接。

检查它们的价值；它可能是NULL。

# c# - 从用户控件调用时，jquery 函数不起作用

> ID：11354275
> 
> 赞同：0
> 
> 时间：2012-07-06T00:14:59.503
> 
> 标签：c#, jquery, asp.net, user-controls

我有一个包含 2 个用户控件的 aspx 页面

UC1：编辑页面 - 这有用于编辑或数据输入的字段。

UC2：通知页面 - 这有一个带有 jquery 功能的简单消息框

在我的 aspx 中，我有这个功能：

```
public void ShowMessage(string status, string message)
    {
        Notification1.Message = message; //this is my user control UC2
        Notification1.Status = status;
        Notification1.DataBind();
    } 
```

现在，当我的 aspx 页面需要显示一条消息时，这可以正常工作，但是当我希望用户控件 1 显示类似（无效字段或错误数量）之类的消息时，它什么也不做。现在它被调用了，但 jquery 只是没有对它做出反应。

在 UC2 -notification 用户控件中，这就是我所拥有的：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.js"></script>
<script type="text/javascript">
function showMsg(classname) {
    $("#MsgBox").attr('class', classname);
    $("#MsgBox").show().delay(5000).fadeOut();
}
</script>
<div id="MsgBox" class="info"><asp:Label ID="lblMessage" runat="server" /></div> 
```

代码隐藏

```
 public string Status{ get; set; }
    public string Message { get; set; }
    public override void DataBind()
    {
        if (Message != string.Empty)
        {

            lblMessage.Text = Message;
            Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "showMsg('" + Status + "');", true);
        }

    } 
```

这就是我将函数从用户控件调用到 aspx 页面的方式：

```
((myaspxpage)this.Page).ShowMessage("error", "This is my error message."); 
```

任何帮助都感激不尽！如果需要更多详细信息，请告诉我.. 提前致谢。

**编辑：我尝试将 jquery 和消息框放在我的编辑页面中，看看它是否会以这种方式工作，但事实并非如此 所以看来 jquery 在用户控件中无法正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:54:30.873

将您的`DataBind()`方法代码移动到`OnPreRender`. 这应该有效。原因是您不知道页面周期的哪​​个步骤（初始化、加载、绑定...）中的哪个代码会更改`Message`属性。

就像您的情况一样，您似乎有一个按钮单击事件，您可以在其中设置`Message`属性。这为时已晚，因为您的`Notification1`控件已经是数据绑定的。

将其保留为最新阶段使其工作：

```
protected override void OnPreRender()
    {
        if (Message != string.Empty)
        {

            lblMessage.Text = Message;
            Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "showMsg('" + Status + "');", true);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:17:24.203

我发现错误是我在 aspx 页面中调用函数的按钮位于更新面板内，我需要添加触发事件以使其工作。感谢大家的帮助，是更新面板导致错误： (

# php - PHP中安全性的最佳方法？

> ID：11354277
> 
> 赞同：0
> 
> 时间：2012-07-06T00:15:09.993
> 
> 标签：php, mysql, security, xss

我实际上是在获取用户的输入，将其存储在 MySQL 数据库中，然后将其输出给同一用户和其他用户。

现在，我正在应用`mysql_real_escape_string()`用户输入的所有内容，并且每当回显某些内容（然后通过 AJAX 显示给用户）时，我都会应用`htmlspecialchars()`.

这个可以吗？有更好的吗？我想要一个简单、安全的解决方案，让文本保持干净。最好，我还想在文本进入数据库*之前对其进行保护，因为在这里一致性对我很重要。*

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:29:26.767

如果您的意思是“干净”，就像“安全”一样，那`htmlspecialchars()`很好。您可能想要使用`htmlentities()`，它对所有字符进行编码，而不仅仅是特殊字符。

一些字符通过`htmlentities()`and `htmlspecialchars()`（那些不在 Latin1 中的字符），因此，您可能希望“UTF-8 证明”您的输出。您可以使用我找到的这个函数作为对 PHP 文档[的评论。](http://www.php.net/manual/en/function.htmlentities.php#107985)

```
// Unicode-proof htmlentities.
// Returns 'normal' chars as chars and weirdos as numeric html entites.
function superentities( $str ){
    // get rid of existing entities else double-escape
    $str = html_entity_decode(stripslashes($str),ENT_QUOTES,'UTF-8');
    $ar = preg_split('/(?<!^)(?!$)/u', $str );  // return array of every multi-byte character
    foreach ($ar as $c){
        $o = ord($c);
        if ( (strlen($c) > 1) || /* multi-byte [unicode] */
            ($o <32 || $o > 126) || /* <- control / latin weirdos -> */
            ($o >33 && $o < 40) ||/* quotes + ambersand */
            ($o >59 && $o < 63) /* html */
        ) {
            // convert to numeric entity
            $c = mb_encode_numericentity($c,array (0x0, 0xffff, 0, 0xffff), 'UTF-8');
        }
        $str2 .= $c;
    }
    return $str2;
} 
```

至于在进入数据库时​​转义数据，您可以在插入数据库之前应用 htmlentities。然后，当你输出时，你可以再做一次，但**一定不要双重编码**，否则你将无法读取任何内容。这是一个例子。

```
//Decode existing htmlentities
$OutputStringRaw = html_entity_decode(stripslashes($str),ENT_QUOTES,'UTF-8');

//Now you can apply htmlentities (or wtv else) w/o fear of double encoding.  
$OutputStringClean = htmlentities($OutputStringRaw); 
```

但实际上，最好只将条目留在数据库中而不转义 html。当你插入你的数据时，要么使用[PDO](http://ca3.php.net/manual/en/intro.pdo.php)（这里有[一个好的教程](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)），要么继续使用你一直在使用的 mysql_real_escape_string。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T01:39:00.743

您可以在文本进入数据库之前使用 md5 加密来保护文本。但是现在使用 md5 哈希并不那么安全，它是可解密的。如果有人可以访问您的数据库，他们将能够解密密码。您可以使用 bcrypt，我认为这是一种非常好的加密方法。

# iphone - iPhone 应用程序：表情符号 unicode

> ID：11354279
> 
> 赞同：3
> 
> 时间：2012-07-06T00:15:22.823
> 
> 标签：iphone, objective-c, unicode, emoji

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:06:56.047

我相信`str = [str stringByReplacingOccurrencesOfString:@"Ô" withString:@"ü"];`这就是你想要做的。

`stringByReplacingOccurrencesOfString:withString:`不会更改您正在调用的字符串，但会返回一个带有替换字符的新字符串。

# wpf - 如何将 RoutedCommand 获取到新的 ViewModel？

> ID：11354282
> 
> 赞同：0
> 
> 时间：2012-07-06T00:15:39.857
> 
> 标签：wpf, xaml, mvvm, routed-commands

我有一个相对简单的分层数据主从 WPF 窗口，使用 MVVM 开发，其中 Window 指向一个 ViewModel，该 ViewModel 将 ViewModel 作为其属性之一公开用于详细视图：

```
Public Class MasterViewModel
Inherits ViewModelBase ' Contains an implementation of CommandSink
Private WithEvents _ViewerSelection As DetailViewModel
Public Property ViewerSelection As DetailViewModel
    Set(value As DetailViewModel)
        _ViewerSelection = value
        RaisePropertyChanged("ViewerSelection")
    End Set
    Get
        Return _ViewerSelection
    End Get
End Property 
```

`ViewModelBase`包含 Josh Smith 的[VMCommanding](http://www.codeproject.com/Articles/28093/Using-RoutedCommands-with-a-ViewModel-in-WPF)代码的实现，我使用 Roslyn 的东西将其移植到 Visual Basic。

Window 的 XAML 看起来基本上是这样的，其中包含不相关的细节和很多右括号被省略。

在“Master”中选择一个项目`ListBox`会将`DataContext`“Detail”`ListBox`设置为相应的 DetailViewModel。在该列表框中选择第二个项目会将`DataContext`“详细信息”框更改为所选内容的相应 DetailViewModel。出于性能原因，一旦选择，DetailViewModel 将被保留并在`DataContext`“详细信息”框中切换进出。

在“详细信息”中选择一个项目`ListBox`会触发一个 RoutedCommand，它应该被“主”框中选择的 ViewModel 捕获。但是，`RoutedCommand`s 永远不会将焦点转移到正确的 DetailViewModel；该命令始终被与第一个“主”列表框选择相对应的 DetailViewModel 捕获。

我需要做些什么不同的事情？

```
<dx:DXWindow 
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
xmlns:local="clr-namespace:MyProject" 
Title="{Binding ProjectTitle}" 
local:CommandSinkBinding.CommandSink="{Binding}">
<dx:DXWindow.Resources>
         <local:MasterViewModel x:Key="MViewM"/>
</dx:DXWindow.Resources>
<dx:DXWindow.DataContext>
    <Binding Source="{StaticResource MViewM}" />
</dx:DXWindow.DataContext>
<Grid>
        <ListBox ItemsSource="{Binding MasterListBox}">
        <-- Selecting an item in the top list box causes a change to the DataContext
        <ListBox ItemTemplate="{StaticResource MaterialDataTemplate}" 
                Name="DetailListBox" 
                DataContext="{Binding ViewerSelection}" 
                ItemsSource="{Binding Materials}" 
                local:CommandSinkBinding.CommandSink="{Binding}" 
                SelectionMode="Multiple">
            <ListBox.CommandBindings>
                <local:CommandSinkBinding  Command="local:DetailVM.Filter"/>
            </ListBox.CommandBindings>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="local:DetailVM.Filter" CommandParameter="{Binding ElementName=DetailListBox, Path=SelectedItems}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:32:56.000

我通过使用`DelegateCommands`Prism 库解决了这个问题。

# c# - 存储过程中的 SQL IN 子句

> ID：11354287
> 
> 赞同：0
> 
> 时间：2012-07-06T00:16:50.173
> 
> 标签：c#, sql, sql-server-2005, stored-procedures

我有一个 C# 应用程序，它传入以下数据：

数据集ID = 10；用户 ID = 1; varnames = "'ACT97','ACTCHNG','ACTQTR2','ACTSCOR2'";

存储过程是：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[s_LockCheck]
-- Add the parameters for the stored procedure here
@varNames VARCHAR(max),
@datasetID INT,
@userID INT
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON

SELECT COUNT(*) as locked FROM VarLocks WHERE var_name IN (@varNames) AND dataset_id = @datasetID AND user_id != @userID AND is_locked = 1

END 
```

但是当我这样称呼它时，当它应该高于它时，它返回的计数为 0：

```
exec s_LockCheck "'ACT97','ACTCHNG','ACTQTR2','ACTSCOR2'", 88, 14 
```

上面的每个 ACTXXX 都是列 var_name 中的一个 varname。

为什么它没有正确执行 IN 子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:35:33.580

有几种方法可以做到这一点：

1.  动态 SQL，如本文所述： http: [//asheej.blogspot.com/2012/04/how-to-use-ms-sql-in-clause-with.html](http://asheej.blogspot.com/2012/04/how-to-use-ms-sql-in-clause-with.html)

2.  在变量中指定每个项目（如果你有很多，这会变得很丑）：

    @var1 varchar(20)、@var2 varchar(20)、@var3 varchar(20)

3.  编写一个拆分函数将字符串转换为表变量，其中有很多。这是我个人最喜欢的一个：http: [//dataeducation.com/faster-more-scalable-sqlclr-string-splitting/](http://dataeducation.com/faster-more-scalable-sqlclr-string-splitting/)

4.  使用表值参数 (2008)：[http ://www.techrepublic.com/blog/datacenter/passing-table-valued-parameters-in-sql-server-2008/168](http://www.techrepublic.com/blog/datacenter/passing-table-valued-parameters-in-sql-server-2008/168)

5.  这是使用 CHARINDEX 的一个小技巧（注意这种方法是 Non-Sargable）：

你的字符串是这样的：'abc，def'

使用`CHARINDEX`，您可以使用分隔符填充搜索字符串和要在搜索字符串中查找的值。因此，使用我的小示例，字符串将变为 ',abc,def,' 请注意开头和结尾处的额外逗号。然后对字段数据做同样的事情。如果您的数据中有逗号，则必须将分隔符换成其他内容，例如 char(2) 或分号等。

然后执行搜索：

```
WHERE CHARINDEX ( ',' + expressionToFind + ',' , ',' + expressionToSearch ',') > 0 
```

分隔符填充可防止搜索找到“abcabc”，但会找到“abc”，完全匹配。

如果您使用的是 2005，我会使用一个非常快速的拆分功能，这样您就可以避免使用动态 SQL。

# sql-server - 在 Ubuntu 上使用 perl 的未定义符号 SQLAllocHandle

> ID：11354288
> 
> 赞同：1
> 
> 时间：2012-07-06T00:17:08.983
> 
> 标签：sql-server, perl, ubuntu, unixodbc

似乎 perl 程序正在尝试加载 ODBC.so 文件，而不是应该使用的 freetds 文件。它给出了符号查找错误消息。试图在 ODBC.so 中找到 SQLAllocHandle

有没有人遇到过这个错误？刚安装完驱动程序，所以我完全不知所措，完全糊涂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:57:01.273

发现了问题。iodbc 驱动程序正在影响 unixodbc 驱动程序。所以我从 /usr/lib 中删除了 iodbc 文件。

删除 DBD::ODBC 模块，然后重新安装它。

固定的。

# sql-server - 从 ntext 转移到 nvarchar(max) 是否有任何问题

> ID：11354290
> 
> 赞同：1
> 
> 时间：2012-07-06T00:17:33.990
> 
> 标签：sql-server, database, sql-server-2008

是否担心将我的列类型从 text/ntext 更改为 varchar(max)/nvarchar(max)？

它会破坏任何东西吗？例如，具有 ntext 参数的存储过程...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T00:36:38.370

有一些问题，例如，如果您当前正在使用以下功能：

*   [`UPDATETEXT`](http://msdn.microsoft.com/en-us/library/ms189466.aspx)
*   [`WRITETEXT`](http://msdn.microsoft.com/en-us/library/ms186838.aspx)
*   [`READTEXT`](http://msdn.microsoft.com/en-us/library/ms187365.aspx)
*   [`TEXTPTR`](http://msdn.microsoft.com/en-us/library/ms176068.aspx)

您可能希望搜索您的代码库以识别这些 - 如果您使用 ad hoc SQL，则对您的应用程序和/或源代码控制进行 grep，或者使用以下命令搜索存储过程等：

```
SELECT OBJECT_SCHEMA_NAME([object_id]), OBJECT_NAME([object_id])
  FROM sys.sql_modules
  WHERE [definition] LIKE '%WRITETEXT%'
     OR [definition] LIKE '%READTEXT%'
     OR [definition] LIKE '%UPDATETEXT%'
     OR [definition] LIKE '%TEXTPTR%'; 
```

您还可以使用以下参数识别过程和函数（我包括了`TEXT`和`NTEXT`）：

```
SELECT OBJECT_SCHEMA_NAME([object_id]), OBJECT_NAME([object_id]), name
  FROM sys.parameters
  WHERE system_type_id IN (35, 99); 
```

以及具有这些列类型的表/视图/TVF，使用：

```
SELECT OBJECT_SCHEMA_NAME([object_id]), OBJECT_NAME([object_id]), name
  FROM sys.columns
  WHERE system_type_id IN (35, 99); 
```

或者 - 我不确定所有 API / 提供程序 - 但有些可能会在交换`ntext`参数时遇到问题`nvarchar`（并且您可能必须显式更改某些代码以指定 -1 的最大长度）。当这些类型仍然流行时（~1999 年），我从事界面代码工作已经有很长时间了，所以如果我的记忆模糊不清，我深表歉意。

如果您的存储过程继续采用`NTEXT`参数，您不应该有任何重大更改，但您不希望长时间保持这种状态。

大多数情况下，您应该体验到更好的性能、更轻松的数据操作以及与新类型的整体改进兼容性。别介意面向未来！

# string - 有没有一种 Groovier 方法可以将破折 号添加到字符串中？

> ID：11354293
> 
> 赞同：8
> 
> 时间：2012-07-06T00:17:42.873
> 
> 标签：string, groovy

我有以下代码，它有效，但我想知道是否有一种“groovier”的方式来做到这一点：

```
/**
   * 10 digit - #-######-##-#
   * 13 digit - ###-#-######-##-#
   * */
private formatISBN(String isbn) {
  if (isbn?.length() == 10) {
    def part1 = isbn.substring(0, 1)
    def part2 = isbn.substring(1, 7)
    def part3 = isbn.substring(7, 9)
    def part4 = isbn.substring(9, 10)
    return "${part1}-${part2}-${part3}-${part4}"
  } else if (isbn?.length() == 13) {
    def part1 = isbn.substring(0, 3)
    def part2 = isbn.substring(3, 4)
    def part3 = isbn.substring(4, 10)
    def part4 = isbn.substring(10, 12)
    def part5 = isbn.substring(12, 13)
    return "${part1}-${part2}-${part3}-${part4}-${part5}"
  } else {
    return isbn
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T02:30:26.393

您可以首先使用`[]`字符串运算符来获取子字符串，而不是`substring`删除中间变量。例如在以下情况下`length == 10`：

```
"${isbn[0]}-${isbn[1..6]}-${isbn[7..8]}-${isbn[9]}" 
```

现在，那里有一些重复。相反，您可以先获取所有`isbn`细分，然后再`.join`使用`'-'`：

```
[isbn[0], isbn[1..6], isbn[7..8], isbn[9]].join('-') 
```

而且，更进一步，`isbn`您可以列出您想要获取的范围，然后使用以下命令同时获取它们，而不是每次都引用`collect`：

```
[0, 1..6, 7..8, 9].collect { isbn[it] }.join('-') 
```

如果您要进行代码打高尔夫球，您还可以执行以下操作：

```
('-'+isbn)[1, 0, 2..7, 0, 8..9, 0, 10] 
```

我会让你弄清楚它是如何工作的，但我想把它留在生产代码上可能不是一个好主意，除非你想给未来的维护者一个惊喜，呵呵。

* * *

此外，请注意格式 when`length == 13`与 for 相同`length == 10`但具有不同的前缀，然后您可以在这种情况下重用相同的函数。整个功能（通过几个测试）将是：

```
/**
 * 10 digit - #-######-##-#
 * 13 digit - ###-#-######-##-#
 **/
def formatIsbn(isbn) {
    switch (isbn?.length()) {
        case 10: return [0, 1..6, 7..8, 9].collect { isbn[it] }.join('-')
        case 13: return isbn.take(3) + '-' + formatIsbn(isbn.drop(3))
        default: return isbn
    }
}

assert formatIsbn('abcdefghij') == 'a-bcdefg-hi-j'
assert formatIsbn('abcdefghijklm') == 'abc-d-efghij-kl-m' 
```

* * *

现在，我认为该代码中有一些难闻的气味。可以`isbn`吗`null`？至少对我来说，这看起来不像是一个需要担心其参数的无效性的函数，或者至少通过阅读它的名称并不清楚（`formatIsbnOrNull`如果 ISBN 字符串和 null 值都是公认）。`NullPointerException`如果 null 值无效，则在访问时让它爆炸，`isbn.length()`以便调用者知道他们传递了错误的参数，而不是默默地返回相同的 null。

最后也是一样`return ISBN`。该函数是否期望接收一个既不是 10 也不是 13 个字符长的字符串？如果没有，最好`throw new IllegalArgumentException()`让来电者知道他们打错了电话。

* * *

最后，我不确定这是否是最“可读”的解决方案。另一种可能的解决方案是为格式设置一个字符串，例如`'###-#-######-##-#'`然后将`#`s 替换为`isbn`字符。我认为它可能更自我记录：

```
def formatIsbn(isbn) {
    def format = [
        10: '#-######-##-#',
        13: '###-#-######-##-#'
    ][isbn.length()]
    def n = 0
    format.replaceAll(/#/) { isbn[n++] }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T03:30:11.577

考虑将方法添加到 String 类，如此处所示。请注意，这个答案是对流行病答案（re：collect）中一个聪明建议的转折。

笔记：

`asIsbn`此代码用()扩充字符串。

范围[0..2]不需要调用`asIsbn`()，但是使用`collect`两次的对称性是不可抗拒的。

Groovy 返回 中的最后一个表达式`if/else`，因此不需要“return”

```
/**
 * 10 digit - #-######-##-#
 * 13 digit - ###-#-######-##-#
 **/
String.metaClass.asIsbn = { ->
    if (delegate.length() == 10) {
        [0, 1..6, 7..8, 9].collect { delegate[it] }.join('-')
    } else if (delegate.length() == 13) {
        [0..2, 3..12].collect { delegate[it].asIsbn() }.join('-')
    } else {
        delegate
    }
}

assert "abcdefghij".asIsbn() == 'a-bcdefg-hi-j'
assert "abcdefghijklm".asIsbn() == 'abc-d-efghij-kl-m'
assert "def".asIsbn() == "def"
String s = null 
assert s?.asIsbn() == null 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T02:34:25.523

我会尝试使用`Regex`...

还有一件事：很清楚，查看捕获组，您的字符串对于所需格式的外观。

```
private formatISBN(String isbn) {
    if (isbn?.length() == 10) {
        m = isbn =~ /(\d{1})(\d{6})(\d{2})(\d{1})/
        return "${m[0][1]}-${m[0][2]}-${m[0][3]}-${m[0][4]}"
    } else if (isbn?.length() == 13) {
        m = isbn =~ /(\d{3})(\d{1})(\d{6})(\d{2})(\d{1})/
        return "${m[0][1]}-${m[0][2]}-${m[0][3]}-${m[0][4]}-${m[0][5]}"        
    } else {
        return isbn
    }
} 
```

顺便说一句，@epidemian 建议使用反向引用很棒！我认为代码看起来像：

```
private formatISBN(String isbn) {
    if (isbn?.length() == 10) {
        return isbn.replaceAll(/(\d{1})(\d{6})(\d{2})(\d{1})/, '$1-$2-$3-$4')
    } else if (isbn?.length() == 13) {
        return isbn.replaceAll(/(\d{3})(\d{1})(\d{6})(\d{2})(\d{1})/, '$1-$2-$3-$4-$5')
    } else {
        return isbn
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T01:32:41.837

不知道我是否更喜欢这个。我也会将位置图设为静态决赛。

```
private isbnify(String isbn) {
  def dashesAt = [ 10: [[0,1], [1,7], [7,9],  [9,10]],
                   13: [[0,3], [3,4], [4,10], [10,12], [12,13]]]
  def dashes = dashesAt[isbn?.length()]
  (dashes == null) ? isbn 
                   : dashes.collect { isbn.substring(*it) }.join('-')
} 
```

IMO，范围可以减少混乱：

```
private isbnify3(String isbn) {
  def dashesAt = [ 10: [0, 1..6, 7..8, 9],
                   13: [0..2, 3, 4..9, 10..11, 12]]
  def dashes = dashesAt[isbn?.length()]
  dashes == null ? isbn : dashes.collect { isbn[it] }.join("-")
} 
```

使用带有两个累加器的注入，也应该很容易做一个破折号位置列表版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T19:27:46.553

这应该是对@everton 的评论，但我还没有达到所需的 50 名声望。所以这个答案实际上只是@everton 答案的一个建议变体。

通过将前 3 位数字设为可选，减少一个正则表达式。缺点是如果 ISBN 为 10 个字符，则必须删除前导“-”。（我也更喜欢`\d`。`\d{1}`）

```
private formatISBN(String isbn) {
  String result = isbn.replaceAll(/^(\d{3})?(\d)(\d{6})(\d{2})(\d)$/,
                                  '$1-$2-$3-$4-$5')
  if (result) {
    return result.startsWith('-') ? result[1..-1] : result
  } else {
    return isbn // return value unchanged, pattern didn't match
  }
}

println formatISBN('1234567890')
println formatISBN('9991234567890')
println formatISBN('123456789') // test an ISBN that's too short
println formatISBN('12345678901234') // test an ISBN that's too long 
```

# mfc-feature-pack - MFC MDI 选项卡式应用程序的 CMFCVisualManager 自定义主题

> ID：11354295
> 
> 赞同：0
> 
> 时间：2012-07-06T00:17:59.920
> 
> 标签：mfc-feature-pack

是否有人拥有或可以使用 CMFCVisualManager 为 MFC MDI 选项卡式应用程序自定义主题创建示例？我什至可以付钱。。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:37:18.917

您已经在 MFC 源代码中提供了示例，例如 CMFCVisualManagerVS2005、CMFCVisualManagerOfficeXP。只需从其中一个继承并更改您想要的位。

# java - java中的if语句

> ID：11354301
> 
> 赞同：0
> 
> 时间：2012-07-06T00:19:07.140
> 
> 标签：java

这可能是一个简单的问题，但...

在java中是否可以检查一个整数是否等于一个或另一个值而不重复变量检查..

例如，这应该工作

```
int n = 0;
if ((n == 1) || (n == 2)) {
//do stuff
} 
```

但是有可能创造出这样的东西吗？

```
int n = 0;
if (n == 1 || 0) {
//do stuff
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T00:20:14.237

不，您需要重复变量：

```
if (n == 1 || n == 2) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T00:22:58.930

不可能直接在 Java 中执行此操作，但您可以编写一个函数轻松地为您执行此操作。

```
static boolean equalsAny(int n, int ... numbers)
{
   for (int num : numbers)
      if (n == num)
         return true;
    return false;
} 
```

那么你需要做的就是`if (equalsAny(n,1,2)) {/* do stuff */ }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:02:50.440

你正在寻找一个`case`声明。

```
switch(n) {
  case 1:
  case 2:
    // Do something.
    break;
} 
```

这可能听起来很滑稽，但我是认真的！`case`a和statement之间的区别`if`通常仅仅是代码在未来的发展方式。如果您真的只想在变量设置为离散数量的值时做某事，那么您应该使用`case`语句或者可能是`enum`s。

# c# - c#在应用程序中验证phpbb论坛用户

> ID：11354315
> 
> 赞同：-1
> 
> 时间：2012-07-06T00:20:48.597
> 
> 标签：c#, login, phpbb

我想对我的软件进行简单的身份验证。我知道我将需要使用 HttpWebRequest 并发送帖子数据/标题，但我无法弄清楚....有没有人有任何例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:21:11.223

抱歉信息不足。我已经能够通过创建一个自定义 phpbb 论坛登录 php 页面来解决这个问题，该页面采用用户名/密码参数，并将请求从我的软件应用程序发送到我创建的这个 php 并等待响应并查看 php 是否能够验证登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:19:57.917

有一个更好的方法，不幸的是我丢失了我的 Phpbb 应用程序，但它是基于[这里提供的代码](http://www.phpbb.com/community/viewtopic.php?f=71&t=2132397)

它为 phpbb 创建一个标头，并存储 cookie，让您可以使用它做很多事情。

# c# - 视图状态键的长度会影响视图状态的大小吗？

> ID：11354320
> 
> 赞同：3
> 
> 时间：2012-07-06T00:21:17.827
> 
> 标签：c#, asp.net, performance, viewstate

有人建议 ViewState 中使用的键的大小会导致性能问题，因为视图状态的大小会更大，因此会增加页面大小，从而增加渲染。

虽然我可以看到较大的键可能会导致视图状态大小的增加，但我不确定影响是否如此显着。

例如，确实会`ViewState["MySpecialProperty"]`导致 ViewState 比`ViewState["x"]`? 如果确实如此，那么差异是否真的足以成为标准网络应用程序中的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:33:36.563

viewstate 键的长度确实会影响 viewstate 的大小。然而，它只是最小的。从我在“MySpecialProperty”与“x”上进行的小型测试中，差异有 20 个左右的字符。如果您有更长的密钥，也不是它可以加起来。

但是，您应该关注存储在视图状态中的值而不是键，因为这将消耗更多空间。

一些参考资料：

*   [http://www.codeproject.com/Articles/101888/ViewState-Various-ways-to-reduce-performance-overh](http://www.codeproject.com/Articles/101888/ViewState-Various-ways-to-reduce-performance-overh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:24:40.673

> 例如，ViewState["MySpecialProperty"] 会导致比 ViewState["x"] 更大的 ViewState 吗？

是的，`ViewState`随着键/值对的编码，结果会更大。

> 这种差异真的足以成为标准 Web 应用程序中的一个问题吗？

国际海事组织，没有。我会更担心您放入了多少对，`ViewState`以及您是否真的需要将该信息传递给客户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:26:50.997

嗯，是的，它会影响 ViewState 的大小，正如您提到的，如果您只向 ViewState 添加一个变量，这并不重要，**另一方面，如果您开始编写变量，例如`x`，阅读代码会很痛苦，所以更好地平衡有利于代码的可读性**

在考虑这样的事情以提高性能之前，请创建一些负载测试并根据结果做出正确的决定。

ASPX 页面的性能非常重要，[看看 8 秒规则](http://en.wikipedia.org/wiki/Network_performance#8-second_rule)

但是，您可以尝试以其他方式提高与 ViewState 相关的性能，基本上，为不需要它的控件禁用 ViewState

了解更多信息：

[http://www.guidanceshare.com/wiki/ASP.NET_2.0_Performance_Guidelines_-_View_State](http://www.guidanceshare.com/wiki/ASP.NET_2.0_Performance_Guidelines_-_View_State)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T00:27:01.983

直奔马口：[msdn viewstate](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

> ...默认情况下，页面的视图状态位于名为 __VIEWSTATE 的隐藏表单字段中。这个隐藏的表单域很容易变得非常大，大约几十千字节。不仅 __VIEWSTATE 表单域会导致下载速度变慢，而且每当用户回发网页时，这个隐藏的表单域的内容必须在 HTTP 请求中回发，从而延长了请求时间，以及...
> 
> **观看状态的成本**
> 
> 没有什么是免费的，视图状态也不例外。每当请求 ASP.NET 网页时，ASP.NET 视图状态都会对性能造成两个影响：
> 
> 1.  在所有页面访问中，在保存视图状态阶段，Page 类为其控件层次结构中的所有控件收集集体视图状态，并将状态序列化为 base-64 编码字符串。（这是在隐藏的 __VIEWSTATE 表单字段中发出的字符串。）类似地，在回发时，加载视图状态阶段需要反序列化持久化的视图状态数据，并更新控件层次结构中的相关控件。
> 2.  __VIEWSTATE 隐藏表单域为客户端必须下载的网页增加了额外的大小。对于某些视图状态繁重的页面，这可能是数十千字节的数据，调制解调器用户可能需要几秒钟（或几分钟！）才能下载。此外，回发时，__VIEWSTATE 表单字段必须在 HTTP POST 标头中发送回 Web 服务器，从而增加了回发请求时间。
> 
> 如果您正在设计一个通常由通过调制解调器连接的用户访问的网站，您应该特别关注视图状态可能会添加到页面的膨胀。幸运的是，有许多技术可以用来减少视图状态的大小。我们将首先了解如何选择性地指示服务器控件是否应保存其视图状态。如果控件的状态不需要在回发中持久化，我们可以关闭该控件的视图状态跟踪，从而节省该控件原本会添加的额外字节。接下来，我们将研究如何从页面的隐藏表单字段中完全移除视图状态，将视图状态存储在 Web 服务器的文件系统中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T00:32:31.727

从[这里](http://msdn.microsoft.com/en-us/library/bb386448.aspx)：

> 默认情况下，视图状态数据存储在页面中的隐藏字段中，并使用 base64 编码进行编码。此外，视图状态数据的散列是通过使用机器验证码 (MAC) 密钥从数据创建的。哈希值被添加到编码的视图状态数据中，结果字符串存储在页面中。

因此，逐字节计算，是的，当您使用更长的键进行输入时，您的视图状态会更长，因为应该将更多字符转换为 base64。但这从来都不是一个大问题，因为与数据长度的大小相比，密钥的大小（通常）非常小。

# xcode - Xcode 在 Safari 中打开 target=_blank 链接

> ID：11354324
> 
> 赞同：3
> 
> 时间：2012-07-06T00:22:08.387
> 
> 标签：xcode, uiwebview, external-links

我对 Xcode 很陌生...我有一个单页 iOS 应用程序，它只有一个 UIWebView 打开一个特定的 URL。我希望页面中的任何链接都`target="_blank"`必须在 Safari 中打开，而不是在应用程序中。

有人能告诉我如何做到这一点吗？（我到处搜索）并告诉我在哪些文件中以及将代码放在哪里？非常感谢你！

**编辑**

我在 ViewController.m 文件中实现了以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Add line below so that external links & PDFs will open in Safari.app
    webView.delegate = self;

    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.example.com/"]]];

}

// Add section below so that external links & PDFs will open in Safari.app
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:request.URL];
        return false;
    }
    return true;
} 
```

但是对于该行`webView.delegate = self;`，我收到一条黄色警告，上面写着： **Assigning to 'id'from incompatible type 'UIWebViewViewController *const_strong'**

这是什么错误，如何在 Xcode 中修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:45:16.787

也许以下关于 SO 的答案可以解决您的问题，或者至少给您一些关于如何实现您想要做的事情的想法： [UIWebView open links in Safari](https://stackoverflow.com/questions/2899699/uiwebview-open-links-in-safari)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T19:49:29.603

这是我们解决它的方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    first.delegate = (id)self;
                [first loadRequest:[NSURLRequest requestWithURL:[NSURL      URLWithString:@"http://www.website.com"]]];
}

// Add section below so that external links & PDFs will open in Safari.app
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request     navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeOther) {
        NSString *checkURL = @"http://www.linkyouwanttogotoviasafari.com";
        NSString *reqURL = request.URL.absoluteString;
        if ([reqURL isEqualToString:checkURL])
             {
                 [[UIApplication sharedApplication] openURL:request.URL];
            return false;
    }
        else {
            return true;
        }
    }
    return true;
} 
```

# ruby-on-rails - 如何禁止在 Ruby-On-Rails 批量分配中分配一个或多个字段？

> ID：11354331
> 
> 赞同：0
> 
> 时间：2012-07-06T00:23:50.810
> 
> 标签：ruby-on-rails

我对这个批量分配问题有点困惑。这是我的问题

假设我有一个具有以下属性的用户模型：名称登录密码电子邮件

在编辑期间，会触发更新方法：

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user]) 
   ....
end 
```

在我看来，保护大多数（如果不是全部）这些属性是有意义的，因为我不希望密码/电子邮件/登录名受到损害。所以我会在模型中这样做

attr_accessible ：名称

因此，除了名称之外的所有其他属性都无法批量分配。

如果我这样做，有效的编辑表单将如何工作？是否需要在更新方法@user.email = params[:user][:email]等中一一分配属性？还是我误解了什么（可能）？

谢谢！

编辑：

更加具体：

通常您会看到带有受保护的管理属性的示例。这是有道理的。

但是密码或电子邮件属性呢？这些通常不受保护。为什么密码或电子邮件不受保护？这可能意味着可能有人可以重置电子邮件并重置密码或重置密码属性并获得对系统的访问权限，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:35:51.603

观看此 railscasts [http://railscasts.com/episodes/26-hackers-love-mass-assignment/](http://railscasts.com/episodes/26-hackers-love-mass-assignment/)

您正在以错误的方式考虑批量分配安全性。attr_accessbile 不会向公众公开密码值（您将使用 filter_parameter 隐藏该值）。

这样想，你有一个用户表单。您希望用户能够使用密码创建帐户，但您不希望他们能够将自己添加为管理员（他们可以通过 sql 注入或操纵 POST 参数来做到这一点）。为了防止这种情况，您可以将 :name、:password、:email 添加到 attr_accessible 并省略 admin 字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:33:30.257

想法是过滤控制器中的参数，[如此处所述](http://weblog.rubyonrails.org/2012/3/21/strong-parameters/)。

```
class PeopleController < ActionController::Base
  # This will raise an ActiveModel::ForbiddenAttributes exception because it's using mass assignment
  # without an explicit permit step.
  def create
    Person.create(params[:person])
  end

  # This will pass with flying colors as long as there's a person key in the parameters, otherwise
  # it'll raise a ActionController::MissingParameter exception, which will get caught by 
  # ActionController::Base and turned into that 400 Bad Request reply.
  def update
    redirect_to current_account.people.find(params[:id]).tap do |person|
      person.update_attributes!(person_params)
    end
  end

  private
    # Using a private method to encapsulate the permissible parameters is just a good pattern
    # since you'll be able to reuse the same permit list between create and update. Also, you
    # can specialize this method with per-user checking of permissible attributes.
    def person_params
      params.required(:person).permit(:name, :age)
    end
end 
```

# xcode - 界面构建后Xcode崩溃？

> ID：11354333
> 
> 赞同：1
> 
> 时间：2012-07-06T00:24:11.193
> 
> 标签：xcode, macos

有人遇到过 Xcode 4.3.3 在 OSX Lion (10.7.4) 上崩溃的问题吗？我正在尝试编写一个 GUI 界面，一切都很完美，直到我今天打开它继续工作。该文件最终将成为医学诊断的专家系统。

包含所有程序文件的 zip 文件位于此处 ( [http://www.mediafire.com/?14slv9xhb45214t )。](http://www.mediafire.com/?14slv9xhb45214t)除了设计界面，还没有走得太远。

我也包括下面的崩溃报告。

* * *

```
Process:         Xcode [9714]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.3.3 (1178)
Build Info:      IDEApplication-1178000000000000~3
App Item ID:     497799835
App External ID: 8553856
Code Type:       X86-64 (Native)
Parent Process:  launchd [273]

Date/Time:       2012-07-05 20:13:12.925 -0400
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9

Interval Since Last Report:          197037 sec
Crashes Since Last Report:           12
Per-App Interval Since Last Report:  8746 sec
Per-App Crashes Since Last Report:   10
Anonymous UUID:                      7C84D886-82A8-4652-B690-46D441C4DABB

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4E3002
ASSERTION FAILURE in /SourceCache/IDESourceEditor/IDESourceEditor-1175/Classes/IDESourceCodeAdjustNodeTypesRequest.m:412
Details:  symLoc should be an instance inheriting from DVTTextDocumentLocation, but it is <IBDocumentMemberLocation: 0x401dc9a40>
Object:   <IDESourceCodeAdjustNodeTypesRequest: 0x401f137e0>
Method:   -_processFoundSymbolResults:
Thread:   <NSThread: 0x40010a220>{name = (null), num = 1}
Hints:   None
Backtrace:
  0  0x000000010556eb9f -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in IDEKit)
  1  0x0000000104a1f5d5 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x000000010a625908 -[IDESourceCodeAdjustNodeTypesRequest _processFoundSymbolResults:] (in IDESourceEditor)
  3  0x0000000104a3ffc7 __DVTAsyncPerformBlock_block_invoke_0 (in DVTFoundation)
  4  0x00007fff826cadfc __CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK__ (in CoreFoundation)
  5  0x00007fff82682f02 __CFRunLoopDoBlocks (in CoreFoundation)
  6  0x00007fff826aab35 __CFRunLoopRun (in CoreFoundation)
  7  0x00007fff826aa486 CFRunLoopRunSpecific (in CoreFoundation)
  8  0x00007fff8727b4d3 RunCurrentEventLoopInMode (in HIToolbox)
  9  0x00007fff87282781 ReceiveNextEventCommon (in HIToolbox)
 10  0x00007fff8728260e BlockUntilNextEventMatchingListInMode (in HIToolbox)
 11  0x0000000105b64e31 _DPSNextEvent (in AppKit)
 12  0x0000000105b64735 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 13  0x0000000105b61071 -[NSApplication run] (in AppKit)
 14  0x0000000105ddd244 NSApplicationMain (in AppKit)
 15  0x000000010499beec (in Xcode)
 16  0x0000000000000002

objc[9714]: garbage collection is ON
abort() called 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:22:45.827

Xcode 崩溃可能是由损坏的项目文件引起的。这在我身上发生过几次。

Xcode 似乎不能容忍任何错误，甚至不允许您进行版本控制。如果您正在使用版本控制，您可以尝试在命令行中修复它。

您可能想要重新创建您的项目。您应该能够将源文件和 .XIB 复制到新项目中。

# java - VHD Java 库

> ID：11354335
> 
> 赞同：1
> 
> 时间：2012-07-06T00:24:13.163
> 
> 标签：java, virtualization, disk, vhd, diskimage

我正在寻找可以打开 .vhd 文件的 Java 库。我想创建一个可以在其中导航的程序。我也希望它是跨平台的。我已经用谷歌搜索了一段时间的图书馆，但一无所获。我只[在 stack overflow 上找到了一个未解决的](https://stackoverflow.com/questions/5245167/java-library-for-windows-vhd-api)**老**问题。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:11:11.040

考虑[`libguestfs`](http://libguestfs.org/)。`libguestfs`是一个 C 库，但它[有一个 Java 绑定](http://libguestfs.org/guestfs-java.3.html)。

它[声称是跨平台的](http://libguestfs.org/guestfs-faq.1.html#does_libguestfs_need___libvirt___kvm___red_hat___fedora__)，可在 Linux 和 Mac OS X 上运行，并且“[s] 一些 virt 工具已被移植到 Windows”。检查您需要的功能是否适用于 Windows。

`libguestfs`确实支持 VHD 图像（**在格式名称下`vpc`**）。

### 获取 libguestfs

包含该`com.redhat.et.libguestfs`包的 Java 绑定作为源代码分发 tarball 的一部分提供。这可以从[`libguestfs`下载页面](http://libguestfs.org/download/)获得；选择最新版本，当前[为 1.18.8](http://libguestfs.org/download/1.18-stable/libguestfs-1.18.8.tar.gz)。

或者，可以从 Maven 存储库中获得预编译的 JAR。

无论哪种方式，在 Windows 上，您可能都必须`libguestfs`自己编译本机库。

# sql - SQL 的 VBA 问题

> ID：11354338
> 
> 赞同：1
> 
> 时间：2012-07-06T00:24:25.793
> 
> 标签：sql, ms-access, vba

我正在将此代码用于 Access 2010 数据库，我的 SQL 语句的语法似乎有问题，但我终生无法弄清楚如何正确格式化该语句。预先感谢您的任何帮助！

```
qdf = db.CreateQueryDef("Company_State_Q")

Dim strSQLSearch As String

strSQLSearch = "SELECT [Company Information].Company_Name, " & _
"[Company Information].Industry" & _
"FROM Company Information" & _
"WHERE [Company Information].State ='" & stateV & "'" & _
"ORDER BY [Company Information].Company_Name;"

qdf.SQL = strSQLSearch 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T00:37:43.173

你应该使用...

```
Debug.Print strSQLSearch 
```

...在您构建`strSQLSearch`字符串后的代码中。然后，您可以在“立即”窗口中查看该字符串（使用`Ctrl`+去那里`g`）。

在即时窗口中，我将值设置`stateV`为“CA”并像这样测试您的字符串：

```
stateV = "CA" : ? "SELECT [Company Information].Company_Name, " & _
"[Company Information].Industry" & _
"FROM Company Information" & _
"WHERE [Company Information].State ='" & stateV & "'" & _
"ORDER BY [Company Information].Company_Name;"
SELECT [Company Information].Company_Name, [Company Information].IndustryFROM Company InformationWHERE [Company Information].State ='CA'ORDER BY [Company Information].Company_Name; 
```

一旦你真正看到完整的`strSQLSearch`字符串，就很容易发现多个问题：

1.  `IndustryFROM`应该`Industry FROM`
2.  `FROM Company Information`应该`FROM [Company Information]`
3.  `InformationWHERE`应该`Information WHERE`
4.  `'CA'ORDER`应该`'CA' ORDER`

`SELECT`考虑在语句的各个部分之间使用换行符。db 引擎对换行符而不是空格非常满意。而且您可能会发现将语句作为几行而不是一长行来阅读更容易。

```
Dim strSQLSearch As String
strSQLSearch = "SELECT ci.Company_Name, ci.Industry" & vbCrLf & _
    "FROM [Company Information] AS ci" & vbCrLf & _
    "WHERE ci.State ='" & stateV & "'" & vbCrLf & _
    "ORDER BY ci.Company_Name;"
Debug.Print strSQLSearch 
```

同样在代码的开头，您有...

```
qdf = db.CreateQueryDef("Company_State_Q") 
```

它似乎`qdf`必须是一个 DAO.QueryDef 对象，所以我认为您应该使用`Set`关键字来分配给它。

```
Set qdf = db.CreateQueryDef("Company_State_Q") 
```

# android - Android - 当新项目滚动到视图中时，带有自定义适配器的列表视图失败

> ID：11354350
> 
> 赞同：0
> 
> 时间：2012-07-06T00:26:41.663
> 
> 标签：android

列表视图有一点问题。它工作正常，有一个例外：当我向下滚动到列表视图的底部时，我得到一个空指针异常。使用调试器，我已经验证了 arraylist 的加载顺序完全正确，并且日期标签在它们应该在的位置。但是，一旦我开始滚动到必须看到新项目的位置，就会出现错误。我不确定为什么会发生这种情况，并且仅当列表滚动到足以使某些元素弹出而其他元素需要进入视野时。

```
 public class MyCustomBaseAdapter extends BaseAdapter {
 private static ArrayList<Object> searchArrayList;

 private LayoutInflater mInflater;

 public MyCustomBaseAdapter(Context context, ArrayList<Object> results) {

  searchArrayList = results;
  mInflater = LayoutInflater.from(context);
 }

 public int getCount() {
  return searchArrayList.size();
 }

 public Object getItem(int position) {
  return searchArrayList.get(position);
 }

 public long getItemId(int position) {
  return position;
 }

public int getItemViewType(int position) {
    Object item = getItem(position);

    if(item instanceof Appointment) {
        return 0;
    } else {
        // It's a section title:
        return 1;
    }
}

public View getView(int position, View convertView, ViewGroup parent) 
{
    Object item = getItem(position);

    if(convertView == null) 
    {
        // Create item view for first time
        if(item instanceof Appointment) 
        {   // inflate appointment list view item layout
            convertView = mInflater.inflate(R.layout.calendar_item, null);
        } 
        else 
        {   // inflate title section list view item layout
            convertView = mInflater.inflate(R.layout.calendar_item_header, null); 
        }
    }

    // Update list view item view according to type:
    if(item instanceof Appointment) 
    {
        Appointment a = (Appointment) item;

        ViewHolder holder;

        holder = new ViewHolder();
        holder.txtAttendee = (TextView) convertView.findViewById(R.id.attendee);
        holder.txtSummary = (TextView) convertView.findViewById(R.id.summary);
        holder.txtStarts = (TextView) convertView.findViewById(R.id.starts);
        holder.txtEnds = (TextView) convertView.findViewById(R.id.ends);
        holder.txtCategories = (TextView) convertView.findViewById(R.id.categories);

        convertView.setTag(holder);
        convertView.setPadding(4, 4, 4, 16);

        holder.txtAttendee.setText(a.GetAttendee());  // exception here
        holder.txtSummary.setText(">" + a.GetSummary());
        String st = a.GetDTStart().toString();
        String en = a.GetDTEnd().toString();

        holder.txtStarts.setText(st.substring(0,16));
        holder.txtEnds.setText(en.substring(0,16)); 

        String cat = a.GetCategories();
        holder.txtCategories.setText(cat);

    } 
    else if(item instanceof String)
    {
        // Item is a section header string:
        String label = (String) item;
        // Retrieve label TextView from convertView... etc...
        HeaderHolder holder;

        holder = new HeaderHolder();

        holder.txtHeader = (TextView) convertView.findViewById(R.id.header);

        convertView.setTag(holder);
        convertView.setPadding(2,2,2,2);
        convertView.setClickable(false);
        convertView.setFocusable(false);

        holder.txtHeader.setText(" " + label);
    }

    return convertView;
}

 static class ViewHolder 
 {
     TextView txtAttendee;
     TextView txtSummary;
     TextView txtStarts;
     TextView txtEnds;
     TextView txtCategories;
 }

 static class HeaderHolder
 {
     TextView txtHeader;

 }
} 
```

我在第 2414 行的“ViewRoot.deliverKeyEventToViewHierarchy”处得到一个空指针异常。

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:39:08.167

无法准确说出您的代码在哪里失败。您引用了 Android 代码中的异常点。我们需要查看整个堆栈跟踪，特别是它在代码中的开始位置，以及代码中的相应行（您发布的代码片段没有行号）。

至少一个问题是您在`getView()`. 在when 不为null 的情况下，类型和item 的类型`convertView`之间没有联系。可能是您夸大的两个视图中的任何一个的回收版本。它不一定与项目的类型相匹配。`convertView``convertView`

然后，您尝试在 中查找特定视图`convertView`，这些视图可能存在也可能不存在。瞧，NPE。

如果您要混合这样的视图，则每次都必须添加一个新视图；你不能使用`convertView`.

如果你想使用`convertView`，并且在一个列表中确实有不同类型的东西，你需要创建一个 uber-view 来合并每种类型的视图。然后根据项目的类型使一个部分或另一个部分可见，并隐藏另一部分。

# c++ - 在模板类中重载下标运算符

> ID：11354353
> 
> 赞同：4
> 
> 时间：2012-07-06T00:26:59.970
> 
> 标签：c++, generics, operator-overloading

我正在尝试实现一个通用（模板）双向链表，类似于 C#.NET 实现。

我想构建一个“捷径”方法来获取具有特定索引的元素，并决定使用下标运算符。我就像在说明中那样做，并想出了这样的东西。

```
template <typename  T>
class List
{
public:
    T& operator[] (int index) 
    { 
        return iterator->GetCurrentValue(); //iterator is of type Iterator<T> and returns T&
    }
}; 
```

但是，当我在我的代码中使用它时：

```
List<int>* myList = new List<int>();
...
int value=myList[i]; //i is int 
```

我得到一个编译器错误：`main.cpp:18: error: cannot convert 'List<int>' to 'int' in initialization`在最后一行。

我尝试它返回值，而不是引用，但仍然是同样的错误。

为什么将`int`返回值解释为`List<int>`？

我正在使用带有 Cygwin gcc-c++ 的 NetBeans。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:29:21.303

> 为什么将`int`返回值解释为`List<int>`？

它不是。 `myList`是指向 a 的指针`List`，它不是 a`List`本身。你需要使用`(*myList)[i]`.

在这种情况下，您不太可能真的需要动态分配，所以我的建议是不要使用指针，也不要使用`new`.

# ruby-on-rails - ruby on rails：即使重新加载页面，也可以在时间 X 更改登录客户端浏览器位置的可靠方法？

> ID：11354355
> 
> 赞同：1
> 
> 时间：2012-07-06T00:27:01.347
> 
> 标签：ruby-on-rails, redirect, redis, real-time, faye

**我需要在某个时间 X 更改客户端的浏览器位置。即使用户重新加载页面，它也必须是可靠的，它应该重定向到位置 X**

以下是我目前（不完美）的实现：

*我需要一种方法来使这个解决方案变得可靠，或者如果它更适合的话，这是一个替代解决方案。IT 共享代码片段很复杂，所以我想重新构建并讨论这个概念，并讨论如何明智地编码实现缺失的差距以保持这个问题的可监督性。*

**当前解决方案：**

*   我目前正在使用 redis 和 faye 在时间 X 将数据发送到订阅的频道（在客户端）
*   这意味着当 redis 后台调度程序在某个时间 X 推送/发送此数据时，将触发一个 jquery 事件（url 的重定向）（这总是在将来）

问题是这并不可靠，因为在页面重新加载时，推送/发送的数据永远不会被接收并变得无用。

即使可以保存最后 10 次发送/推送，我们也可以将其称为“历史”，但可以读取它，但说用户断开连接，执行此数据将是无用的，因为它会迟到而不是及时.

*我怎样才能克服这个问题？我更喜欢保留负载服务器端，而不是使用客户端每 1 秒轮询一次服务器以检查是否收到数据。这根本不会*扩展*，如果应用程序的使用量增加，这将成为一个大问题。*

**对这个概念有什么想法可以使其稳固或使用另一种方法来实现该想法的稳固实现？任何意见想法建议欢迎提前感谢！**

# java - 如何将图像与从相机拍摄的图像匹配？安卓

> ID：11354356
> 
> 赞同：1
> 
> 时间：2012-07-06T00:27:01.563
> 
> 标签：java, android, image, image-processing, android-camera

嗨，在我的应用程序中，我有一个打印的调色板。我有一个从 android sdk 构建的相机应用程序。我的目标是在手机捕获调色板时从调色板中检测单个颜色。我怎样才能做到这一点？例如我的调色板是这样的， ![调色板](../Images/af303f39979be3ca2848fabe4981feb4.png)

我的目标是检测所有 15 种颜色或至少检测相机应用程序中正方形的中间点。

# opengl - 来自 glMapBufferARB 的指针在另一个上下文中使用

> ID：11354360
> 
> 赞同：0
> 
> 时间：2012-07-06T00:27:30.460
> 
> 标签：opengl, rendering, gpu

我想用 2 个 GPU 进行并行渲染。因此需要从 GPU1 回读，然后将像素绘制到 GPU2。

我在每个屏幕上创建了两个窗口，并连接了自己的 GPU。每个窗口都有两个线程。

但是，readpixel+drawpixel 是一个瓶颈。因此考虑使用异步 PBO 方法：2 个 PBO 用于回读，2 个 PBO 用于以替代方式回退。

我的问题是：

1.  从 glMapBufferARB 返回的指针可以在另一个线程和不同的 GPU 中使用吗？
2.  如果没有，我必须将数据复制到主内存并复制到另一个 GPU，瓶颈将是 CPU->GPU 复制。有没有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:37:15.503

是的，任何线程都可以使用 glMapBuffer 形式的指针——即使没有 GL 上下文。只要记住同步线程并且不要在线程完成它的工作之前调用 glUnmapBuffer 指针.h

# php - 如何通过使用另一个 post_type 的新主题中的标签来检索帖子

> ID：11354361
> 
> 赞同：0
> 
> 时间：2012-07-06T00:27:33.520
> 
> 标签：php, wordpress

如何通过使用另一个 post_type 的新主题中的标签检索帖子

例如，我正在建立一个电影院网站..

该网站是

对于电影 - 我正在使用帖子 - 电影在那里发布.. 对于演员 - 我正在使用 post_type ： persoane ， Taxonomy ： lista。

如何检索布鲁斯威利斯播放的电影

* * *

这部电影有布鲁斯威利斯标签....（这是 wp 中的常规帖子）

在布鲁斯威利斯页面中，我想检索具有布鲁斯威利斯标签的电影....

总之，我想展示演员出演的电影

我知道请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:38:02.460

不确定，但你可以试一试

```
$args = array(
'tax_query' => array(
    array(
        'taxonomy' => 'lista',
        'field' => 'slug',
        'terms' => get_query_var('term')
    )
)
);
$query = new WP_Query( $args );
while ( $query->have_posts() ) : $query->the_post();
    echo  the_title().'<br />';
    echo the_content();
endwhile;
wp_reset_postdata(); 
```

[**看看这个。**](http://codex.wordpress.org/Class_Reference/WP_Query#Parameters)

# javascript - 如何测试 NaN？

> ID：11354373
> 
> 赞同：48
> 
> 时间：2012-07-06T00:29:51.153
> 
> 标签：javascript, if-statement, nan

> **可能重复：**
> [比较 Javascript 中的 NaN 值是否相等](https://stackoverflow.com/questions/8965364/comparing-nan-values-for-equality-in-javascript)

谁能告诉我为什么这不起作用？

```
if(inbperr == NaN) {
    document.getElementById('inbclo').value = "N/A";
}
else {
    document.getElementById('inbclo').value = "%" + inbperr;
} 
```

我希望它返回“%NaN”，而不是返回百分比值或“N/A”。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-06T00:32:03.970

`NaN`是不寻常的：它们不等于任何东西，甚至它们自己。您需要使用`isNaN(inbperr)`来判断一个值是否为 NaN。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T00:34:06.623

NaN 不是数字。少数 JavaScript 有毒类型之一。它可以将整个表达式简化为 NaN。

[http://www.crockford.com/javascript/encyclopedia/](http://www.crockford.com/javascript/encyclopedia/)

# css - CSS 流体布局 - 文本扩展区域

> ID：11354375
> 
> 赞同：0
> 
> 时间：2012-07-06T00:30:10.517
> 
> 标签：css, word-wrap, fluid-layout

我有以下 HTML 和 CSS：http: [//jsfiddle.net/j8aFS/1/](http://jsfiddle.net/j8aFS/1/)

当您减小窗口大小时，由于自动换行，红色框和文本会在灰色区域上展开。

我能做些什么来防止这种情况发生？我可以防止这种情况吗？

到目前为止我已经尝试过：

*   使用 CSS`white-space: nowrap;`属性，但这似乎不是最好的解决方案。
*   只是在红色框下方留出空间，但这确实对设计影响太大。

我想要实现的目标：灰色框应该增长，所以红色框永远不会在灰色框上扩展。红框内的文字不应该被剪掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:37:05.750

*   你可以`width: 180px`为你的红框设置一个
*   小屏幕的视口。
*   如果你不把你的盒子放在绝对位置，下面的盒子也会飘下来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:37:12.880

你想要发生什么？

如果您制作灰色框`position relative`并将其溢出设置为隐藏，则红色框将被切断。

```
.div1 {
    height: 62%;
    background-color: grey;
    overflow: hidden;
    position: relative;
} 
```

[演示](http://jsfiddle.net/j8aFS/2/)

除非您为红色框指定设置宽度，否则使窗口变小会导致它变高并溢出。您可以隐藏它（我的解决方案），让它溢出（当前行为）或不做绝对位置，让它使灰色框变大。在您的问题中，您根本不清楚您想要它做什么。

[**更新的演示**](http://www.cssdesk.com/3FusC)

# mysql - 将英文日期转换为“日期”类型的值？

> ID：11354380
> 
> 赞同：-2
> 
> 时间：2012-07-06T00:30:36.767
> 
> 标签：mysql, date, casting

请建议我如何将字符串`"12 march 2004"`转换为日期数据类型的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:51:07.443

使用该[`str_to_date`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)功能。它有两个参数：输入字符串和格式说明符字符串。

对于您的示例，您可以使用以下内容：

```
STR_TO_DATE("12 march 2004", "%e %M %Y") 
```

对于格式说明符表，请转到[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)。

# regex - 如何编写配置单元正则表达式以匹配条件 1 或条件 2 并返回任何匹配项？

> ID：11354382
> 
> 赞同：0
> 
> 时间：2012-07-06T00:31:11.133
> 
> 标签：regex, hive

我需要在我的正则表达式中有“或”逻辑。

1.  例如，从“foobar435”我需要三个数字，所以“435”
2.  但是从“barfoo543”开始，我需要三个数字之前的三个字母，所以“foo”

单独地，正则表达式将是 "foobar([0-9]){3}" 来获得第一个案例，而 "[a-zA-Z]{3}([0-9]{3})[a- zA-Z]{3}" 得到第二种情况。如何使用一个正则表达式同时获得两种情况？那么，如果第一个正则表达式匹配，则返回“435”，但如果不匹配，则返回“foo”？

我正在使用蜂巢，所以理想情况下我只想打一个电话。到目前为止，我已经...

```
REGEXP_EXTRACT(myString, 'foobar([0-9]){3}', 1) AS columnName 
```

不知道如何将第二种情况添加到其中。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:56:26.997

您可以为此使用[环视。](http://www.regular-expressions.info/lookaround.html)

在您的第一种情况下，您想匹配前面有“foobar”的三个数字（使用后向）：

`(?<=foobar)[0-9]{3}`

在第二种情况下，您希望匹配三个字母前面三个字母（使用后向查找）和后跟三个数字（使用前瞻）：

`(?<=[a-zA-Z]{3})[a-zA-Z]{3}(?=\d{3})`

请注意，如果我正确解释了您的要求，看起来您将数字部分与表达式中的第二个字母部分翻转了。

现在您有了两个表达式，您只需要将它们与“或”结合起来：

`(?<=foobar)[0-9]{3}|(?<=[a-zA-Z]{3})[a-zA-Z]{3}(?=\d{3})`

要注意的一件事是，这还将匹配两端带有附加单词字符的单词，即“xfoobar435x”。如果不希望这样做，`\b`请在lookbehinds 的开头和lookahead 的末尾添加一个单词边界。

# ios - 我应该重命名图像文件以获得更快的访问/更少的内存吗？

> ID：11354384
> 
> 赞同：0
> 
> 时间：2012-07-06T00:31:15.757
> 
> 标签：ios, xcode

我在我的应用程序中使用了大约 3000 个 jpeg。图像名称和简要描述存储在读入 momd 的 SQL 数据库中。一个图像一次出现在屏幕上。

这些图像有各种各样的名称，一些直接来自相机、DSC1014，而另一些则很长，例如 A5_09-DOUBLE-DECKER-BRIDGE 和 2012-05-13_19-06-22_790。

我没有注意到我的 iPod 或 iPad 上的内存或访问时间有任何问题，但想知道它是否有助于内存或访问时间给图片提供短名称，例如 img001 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:34:34.817

缩短名称几乎肯定不会在内存或访问时间方面给您带来明显的优势。如果您希望缩短访问时间，您应该考虑为您的表使用索引（如果您还没有这样做的话）。

# c++ - 使用 AWE 分配内存

> ID：11354385
> 
> 赞同：1
> 
> 时间：2012-07-06T00:31:17.200
> 
> 标签：c++, winapi, awe

我正在使用启用了 PAE 和 8GB 物理内存的 32 位 Windows XP SP3。

我想要的只是使用 AWE 从黑暗面分配内存 - 即隐藏的 4GB - 所以我写了我给了我的用户`Lock pages in memory`权利然后我写了以下代码：

```
#include <windows.h>
#include <stdio.h>

BOOL EnableAWE();

int main()
{
    if(!EnableAWE())
    {
        printf("Can not enable AWE on this system.\n");
        return 1;
    }

    HANDLE hProcess = GetCurrentProcess();
    SIZE_T byts = ~0u >> 1;
    LPVOID ptr = VirtualAllocEx(hProcess, NULL, byts, MEM_PHYSICAL | MEM_RESERVE, PAGE_READWRITE);

    if (ptr == NULL)
    {
        printf("Allocation failed for requested memory size.\n");
        return 1;
    }

    VirtualFreeEx(hProcess, ptr, 0, MEM_RELEASE);

    return 0;
}

BOOL EnableAWE()
{
    HANDLE hToken = NULL;

    TOKEN_PRIVILEGES tp;
    tp.PrivilegeCount = 1;
    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

    if(!OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY | TOKEN_ADJUST_PRIVILEGES, &hToken)) return FALSE;
    if (!LookupPrivilegeValue(NULL, SE_LOCK_MEMORY_NAME, &(tp.Privileges[0].Luid))) return FALSE;
    if (!AdjustTokenPrivileges(hToken, FALSE, &tp, sizeof(TOKEN_PRIVILEGES), NULL, NULL)) return FALSE;

    return TRUE;
} 
```

该函数`EnableAWE`始终返回 true，但是当我尝试使用`VirtualProtect`它分配 2GB 时失败，错误代码为 87，这意味着`The parameter is incorrect.`

我不知道哪个参数不正确。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:44:35.233

嗯，`VirtualAlloc`不分配AWE内存。（`AllocateUserPhysicalPages`实际分配内存。）它保留可以映射 AWE 内存的虚拟地址空间。而且您的进程没有 2GB 的可用虚拟地址空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:59:46.730

您发布的代码中没有调用 VirtualProtect。另外，您是否使用 /LARGEADDRESSAWARE 进行编译？

无论如何，我怀疑你无法在 Win32 上获得 2GB 的连续地址空间，即使使用 PAE。尝试减少字节，看看是否有帮助。

# sql - 我可以使用纯 SQL 返回一个包含比起始值少一个值的范围吗？

> ID：11354387
> 
> 赞同：2
> 
> 时间：2012-07-06T00:31:56.360
> 
> 标签：sql, sqlite

给定如下表：

```
sqlite> CREATE TABLE movies( start_time int );
sqlite> INSERT INTO movies( start_time ) VALUES( 5 );
sqlite> INSERT INTO movies( start_time ) VALUES( 10 );
sqlite> INSERT INTO movies( start_time ) VALUES( 15 );
sqlite> INSERT INTO movies( start_time ) VALUES( 20 );
sqlite> INSERT INTO movies( start_time ) VALUES( 25 );
sqlite> INSERT INTO movies( start_time ) VALUES( 30 );
sqlite> INSERT INTO movies( start_time ) VALUES( 35 );
sqlite> 
```

假设我有两个时间点，开始时间为 17，结束时间为 34。我想要一个返回具有以下值的行的查询：**15, 20, 25, 30**。

让我失望的是 15... 我知道 17 包含在与 15 关联的文件中，但我不希望其他行小于开始时间（例如 10 和 5）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:43:01.583

```
SELECT start_time
FROM movies
WHERE start_time BETWEEN cast(17 / 5 as int) * 5
    AND cast(34 / 5 as int) * 5 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!5/61a69/10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T01:03:10.723

在我看来，这个问题有点未明确（并且没有 id 工作是不现实的）。也就是说，对于您的特定示例表，以下工作：

```
select * from movies
where
  start_time > 17 and start_time < 34
  or start_time in (select max(start_time) from movies
                    where start_time <= 17) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:53:31.113

我确信有一种更清洁的方法可以做到这一点，但这是我关于如何实现这一点的想法。

```
SELECT start_time
FROM movies
WHERE start_time 
BETWEEN 17 - (SELECT start_time FROM movies GROUP BY DESC LIMIT 1) AND 34 - (SELECT start_time FROM movies GROUP BY DESC LIMIT 1) 
```

# delphi - 结果总是正确的？

> ID：11354391
> 
> 赞同：-1
> 
> 时间：2012-07-06T00:32:19.103
> 
> 标签：delphi

我试图返回一个函数的值，以告诉我某个位置在该位置是否有熔岩或水。

问题是即使那里有熔岩或水，它仍然返回 true。水、熔岩和苍蝇的值来自玩家生物的列表。如果该生物具有水，熔岩或可以飞行的能力，那只是得到。我只是相应地将它们标记为真/假。位置是一个TPOINT。它将所有这些加载到一个函数中，只要函数 CheckLocation 返回 true，那么它的位置就可以了

```
 if FMyPlayers.Player[i].Values['water']='yes' then
       canwater := true;
   if FMyPlayers.Player[i].Values['Lava']='yes' then
       canlava := true;
   if FMyPlayers.Player[i].Values['fly']='yes' then
       canfly := true;
   cansnow := true;
   if checkLocation(position,cansnow,canlava,canwater,canfly) = False then
      exit;

function TBaseGameForm.checkLocation(position :Tpoint;Cansnow,canlava,canwater,canfly:bool):Bool;
begin
RESULT := True;
if canfly = true then
   RESULT := true
else begin
  if FGamePlay.waterLocations.IndexOfName('x'+inttostr(Position.x)+inttostr(Position.Y)) <> -1 then begin    //Check location
     Showmessage('Cant move there due to water');
     RESULT := FALSE;
   end;
  if FGamePlay.LavaLocations.IndexOfName('x'+inttostr(Position.x)+inttostr(Position.Y)) <> -1 then begin    //Check location
     Showmessage('Cant move there due to lava');
     RESULT := False;
    end;
  end;
end; 
```

运行时，我检查 WaterLocations 中的值

```
[0]  x47
[1]  y47
[2]  x58
[3]  y58 
```

Position.x 和 Position.y 的值是 (4,7) 因此它应该返回 false 因为 x47 在列表中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T01:30:57.507

就像@SertacAkyuz 说的那样，问题在于您使用`IndexOfName()`. 你需要`IndexOf()`改用。

`CheckLocation()`您的函数中还有另一个错误。您将忽略除`canfly`. 如果`canwater`或`canlava`为 True，您的函数将在任何水/熔岩位置返回 False。您需要检查该位置是否确实与播放器的功能相匹配。如果`canwater`为真，则无需检查该位置是否为水。熔岩也是如此。

试试这个：

```
canwater := (FMyPlayers.Player[i].Values['water'] = 'yes');
canlava := (FMyPlayers.Player[i].Values['Lava'] = 'yes');
canfly := (FMyPlayers.Player[i].Values['fly'] = 'yes'); 
cansnow := true; 
if not CheckLocation(position, cansnow, canlava, canwater, canfly) then 
  Exit; 
```

.

```
function TBaseGameForm.CheckLocation(position: TPoint; cansnow, canlava, canwater, canfly: Boolean): Boolean; 
var
  loc: String;
begin 
  Result := True;
  if (not canfly) and ((not canwater) or (not canlava)) then
  begin
    loc := Format('x%d%d', [Position.X, Position.Y]);

    if (not canwater) and (FGamePlay.waterLocations.IndexOf(loc) <> -1) then
    begin
      Showmessage('Cant move there due to water'); 
      Result := False;
      Exit;
    end;

    if (not canlava) and (FGamePlay.LavaLocations.IndexOf(loc) <> -1) then
    begin
      Showmessage('Cant move there due to lava'); 
      Result := False;
      Exit;
    end;
  end; 
end; 
```

话虽如此，我同意@sarnold 的观点，即您的坐标系需要一些调整。只要您的 x/y 坐标都是个位数，就可以了。但如果它们是多位数字，它将不起作用。至少，您应该在 Y 坐标前面加上前缀，例如：

```
[0]  x4y7
[1]  x5y8

loc := Format('x%dy%d', [Position.X, Position.Y]); 
```

就个人而言，我根本不会使用 a`TStrings`来保存这样的整数值。我会改用`TList`of`TPoint`实例，例如：

```
waterLocations: TList;

function FindLocation(List: TList; Position: TPoint): Integer;
begin
  for Result := 0 to List.Coun-1 do
  begin
    with PPoint(List[Result])^ do
    begin
      if (X = Position X) and (Y = Position.Y) then Exit;
    end;
  end;
  Result := -1;
end; 
```

.

```
if (not canwater) and (FindLocation(FGamePlay.waterLocations, Position) <> -1) then
begin
  Showmessage('Cant move there due to water'); 
  Result := False;
  Exit;
end; 
```

或者，如果您使用的是支持泛型的现代 Delphi 版本，则`TList<TPoint>`：

```
waterLocations: TList<TPoint>;

function FindLocation(List: TList<TPoint>; Position: TPoint): Integer;
begin
  for Result := 0 to List.Coun-1 do
  begin
    with List[Result] do
    begin
      if (X = Position X) and (Y = Position.Y) then Exit;
    end;
  end;
  Result := -1;
end; 
```

.

```
if (not canwater) and (FindLocation(FGamePlay.waterLocations, Position) <> -1) then
begin
  Showmessage('Cant move there due to water'); 
  Result := False;
  Exit;
end; 
```

甚至是`TDictionary`存储任何给定 X/Y 坐标指定的位置类型的单个：

```
type
  locType = (locLand, locWater, locLava, locSnow);

locations: TDictionary<TPoint, locType>; 
```

.

```
function TBaseGameForm.CheckLocation(position: TPoint; cansnow, canlava, canwater, canfly: Boolean): Boolean; 
var
  loc: locType;
begin 
  Result := True;
  if not canfly then
  begin
    locations.TryGetValue(Position, loc);
    case loc of
      locWater: begin
        if not canwater then
        begin
          Showmessage('Cant move there due to water'); 
          Result := False;
        end;
      end;
      locLava: begin
        if not canlava then
        begin
          Showmessage('Cant move there due to lava'); 
          Result := False;
          Exit;
        end;
      end;
    end;
  end; 
end; 
```

# c++ - 对 NPN_PluginThreadAsyncCall 的序列调用

> ID：11354397
> 
> 赞同：0
> 
> 时间：2012-07-06T00:32:58.597
> 
> 标签：c++, firefox, npapi

在我的插件中，我创建了一个线程（在我的例子中使用 pthread）来监听外部事件。当事件发生时，我想与 JavaScript 进行通信。据我了解，我只能在插件线程中调用 NPN_* 方法。因此，我需要在我的线程中使用 NPN_PluginThreadAsyncCall 来调用其他 NPN_* 方法进行 JavaScript 通信。所以一个简单的流程是

我现在面临的问题是，如果外部连续发生，例如两个不同数据输入的事件，有时我会在回调中收到两次相同的数据（在一半的时间内返回两个不同的数据）。我想这是因为 NPN_PluginThreadAsyncCall 是一个异步调用，当两个连续的事件回调时，NPN_PluginThreadAsyncCall 被调用两次，在第一个事件回调到 JavaScript 之前，数据已被第二个调用覆盖。

最初，我要返回的事件数据是一个全局变量。但是我也尝试将其更改为局部变量，它似乎没有帮助。有没有其他方法可以让我的代码成为与 JavaScript 对话的顺序调用？

我做了一些研究，发现了这个，[How to callback plugin thread on Safari 5.1 on OSX?](https://stackoverflow.com/questions/7924653/how-to-callback-plugin-thread-on-safari-5-1-on-osx) . 但我还是不太明白（我在 Windows 上工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:33:10.520

听起来您只是在覆盖数据（如果在可以处理第一个异步调用之前发生两个事件）。

有两种方法可以解决这个问题：

*   使用`userData`参数`NPN_PluginThreadAsyncCall`来传递你的数据
*   使用线程安全容器（例如`std::list`或`queue`受互斥锁保护）来存储事件数据（事件将数据放入，异步处理程序检索并处理它）

您链接的问题是针对`NPN_PluginThreadAsyncCall`不可用或不工作的不同问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:48:57.853

您可以将其实现为互斥的[std::deque](http://www.cplusplus.com/reference/stl/deque/)，其中第一个插入的数据是您弹出的第一个数据。

只要确保您不会同时推送或弹出（使用互斥锁）。这就是我在我的插件中使用的:)

# neo4j - 在 Cypher 中，如果关系不存在，我该如何创建关系；如果确实如此，请更新属性

> ID：11354401
> 
> 赞同：19
> 
> 时间：2012-07-06T00:33:36.080
> 
> 标签：neo4j, graph-databases, cypher

在 Neo4J 的 Cypher 中，给定两个节点，如果它们之间没有关系，我想创建一个权重属性为 1 的关系（类型为 Foo）。如果这种关系已经存在，我想增加它的权重属性。

有没有在单个 Cypher 查询中执行此操作的好方法？谢谢！

编辑：一些额外的细节：节点已经创建，唯一的，并且在索引中。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-06T04:51:05.020

这正是我们`CREATE UNIQUE`在 1.8 中添加的原因。

```
START a=node(...), b=node(...)
CREATE UNIQUE a-[r:CONNECTED_TO]-b
SET r.weight = coalesce(r.weight?, 0) + 1 
```

阅读更多关于`CREATE UNIQUE` [这里](http://docs.neo4j.org/chunked/snapshot/query-create-unique.html)，问号[在这里，并](http://docs.neo4j.org/chunked/snapshot/query-where.html#where-default-true-if-property-is-missing)[在这里](http://docs.neo4j.org/chunked/snapshot/query-function.html#functions-coalesce)合并。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-01T03:08:15.617

为了完成 Andres 的回答，属性末尾的问号现在是 Neo4j 2 的错误。所以请求将是：

```
MATCH a, b
WHERE a(...) AND b(...)
CREATE UNIQUE a-[r:CONNECTED_TO]->b
SET r.weight = coalesce(r.weight, 0) + 1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-10T22:56:54.547

为了将来参考，CREATE UNIQUE 已被弃用（请参阅[此处](https://neo4j.com/docs/cypher-manual/current/clauses/create-unique/)）。看起来你可以用 MATCH 和 MERGE 做类似的事情：

```
 MATCH (a:Person {name: 'Wonder Woman'})
                MERGE (b:Person {name: 'Aries'})
                MERGE (a)-[r:FOUGHT]->(b)
                ON CREATE SET r.weight = 1
                ON MATCH SET r.weight = r.weight + 1 
```

所以在这里，神奇女侠至少与白羊座战斗过一次，否则它会增加重量。

# javascript - 当我进入一个函数时，如何保持 `this` 的值？

> ID：11354404
> 
> 赞同：3
> 
> 时间：2012-07-06T00:34:06.110
> 
> 标签：javascript, scope

`this`当我进入一个函数时，我怎样才能保持它的值，我失去了以前的值`this`

例如，在这种情况下，我如何才能访问`testFunction`.

```
admin = function()
{
    this.testFunction = function()
    {
    alert('hello');
    }

    this.test2Function = function()
    {
        $.ajax({
            url:'',
            success: function()
            {
                 this.testFunction();
                 // here I got an error undefined 
            }
        });
     }
} 
```

我试图将 this 的值保留在这样的 self var 上

```
this.self = this; 
```

但不工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T00:37:56.607

您需要使用[闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)。在 JavaScript 中执行此操作的惯用方式是：

```
function foo(){
   //Store this in outer scoped variable.
   // It will be available to anything within this scope
   var that = this;

   innerCall(function(){
      that.doSomething();
   });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T00:36:06.327

```
admin = function()
{
    var top = this;
    this.testFunction = function()
    {
    alert('hello');
    }

    this.test2Function = function()
    {
        $.ajax({
            url:'',
            success: function()
            {
                 top.testFunction();   // should work :)
            }
        });
     }
} 
```

函数中定义的所有局部变量，通过整个函数传播（可以访问），包括该函数中定义的所有函数。

因此`var top = this;`，它将通过所有内部函数和在`admin`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:36:02.770

有多种方法取决于您和大局，哪一种适合

```
admin = function()
{
    this.testFunction = function()
    {
    alert('hello');
    }

    this.test2Function = function()
    {
        $.ajax({
            url:'',
            success: this.testFunction
        });
     }
} 
```

或者

```
admin = function()
{
    var testFunction = function()
    {
    alert('hello');
    }

    this.test2Function = function()
    {
        $.ajax({
            url:'',
            success: testFunction 
        });
     }
} 
```

或者

admin = function() { this.testFunction = function() { alert('hello'); }

```
 var testFucntion = this.testFunction;

    this.test2Function = function()
    {
        $.ajax({
            url:'',
            success: function(){ testFucntion(); } 
        });
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:48:12.910

[通过参考谷歌风格指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#this)，所有答案都是正确的，仅供记录：

> 因为这很容易出错，所以将它的使用限制在需要它的地方：
> 在对象方法中的构造函数
> 中（包括在创建闭包时）

IMO，最好的方法是[Josh 的回答](https://stackoverflow.com/a/11354432/231917)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-13T15:07:21.867

另一种避免处理的潜在有效方法`this`是制作回调参数：

```
admin = function()
{
    this.testFunction = function()
    {
        alert('hello');
    }

    this.test2Function = function(successCallback)
    {
        $.ajax({
            url:'',
            success: function()
            {
                 if(typeof(successCallback) === 'function') {
                     successCallback(); 
                 }
            }
        });
     }
}

//usage:
admin.test2Function(admin.testFunction); 
```

# scala - 奇怪的折叠范围问题

> ID：11354406
> 
> 赞同：1
> 
> 时间：2012-07-06T00:34:09.573
> 
> 标签：scala, fold, scoping

我在调试事务查询块时遇到了这个问题。

出于某种原因，尽管在 fold left/fail 操作中发生了连接回滚，但成功/正确的结果也被回滚了。

例子：

```
// returns Either[String, Int]
db.handle withSession { implicit ss: Session=>
  ss.withTransaction {
    val result = for {
      u  <- either(User.insert(User(model)), ss)
      ur <- either(UserRole.insert( UserRole(u) ), ss)
      m  <- either(Membership.insert(Membership(u)), ss)
    } yield u

// bad: rollback occurs regardless of left/right outcome
result fold( {ss.rollback; Left(_)}, Right(_) )

// good: rollback occurs as expected on left outcome only
result fold( e=>{ss.rollback; Left(e)}, Right(_) ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:04:32.070

考虑以下稍微简单的示例：

```
def foo[A, B](e: Either[A, B]) = e.fold(
  { println("Launch the missiles!"); Left(_) },
  Right(_)
) 
```

每次调用时，导弹都会发射`foo`，因为我们传递的第一个参数并不完全是一个函数：它是一个计算函数的块，无论是否使用该函数，该块都会被计算。

有关此行为的更详细讨论，请参阅Jesse Eichar 的[这篇博客文章](http://daily-scala.blogspot.com/2010/05/return-value-of-block.html)。

# android - Android NDK 原生函数调用问题

> ID：11354411
> 
> 赞同：1
> 
> 时间：2012-07-06T00:34:52.110
> 
> 标签：android, android-ndk, native

我正在尝试编写一个使用 GNU Scientific Library (GSL) 的 Android 应用程序。特别是，我对 'libgslcblas.so' 的 BLAS 实现很感兴趣。我决定利用 Android NDK 编写一个 Java 程序来加载库并进行适当的函数调用。

为了测试它是如何工作的，我尝试编写一个简单的程序来加载“libm.so”并进行任意函数调用。正如我能想到的，这似乎是一个微不足道的 NDK 用例，但我遇到了以下问题：

```
07-05 18:11:07.264: I/System.out(1298): debugger has settled (1464)
07-05 18:11:07.583: D/dalvikvm(1298): No JNI_OnLoad found in /system/lib/libm.so 0x41345988, skipping init
07-05 18:11:07.903: W/dalvikvm(1298): No implementation found for native Lissm/libctest/LibCtest;.sqrt (D)D 
```

我的代码如下：

```
package issm.libctest;

import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;

public class LibCtest extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        TextView  tv = new TextView(this);
        setContentView(R.layout.activity_lib_ctest);

        double x = sqrt(4);

        tv.setText( "Sine of: " + x);
        setContentView(tv);
    }

    public native double sqrt(double x);

    static
    {
        System.load("/system/lib/libm.so");
    }
} 
```

我真的不明白这个问题。正如我所说，这是我能想到的最简单的 NDK 用法。有人可以帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T01:22:34.480

阅读 JNI。简而言之，不能通过 NDK 从 Java 调用任意全局 C 函数。为了可调用，函数需要一个非常具体的签名，大致如下：

```
void Java_com_mypackage_MyClass_MyMethod(JNIEnv *jni, jobject thiz, jint arg1); 
```

在 Java 方面，这将是`MyClass`package中的类方法`com.mypackage`：

```
native void MyMethod(int arg1); 
```

显然，香草`sqrt`不符合要求。因此，您需要为打算从 Java 调用的每个函数提供一个 Java 友好的包装器。考虑到这一点，您可能希望为仅是数学原语的高级概念提供包装器。Java/C 边框凌乱；你越少越少越好。

此外，该库需要从专门针对 Android 的源构建。NDK 有这方面的工具。用于其他平台（例如 Linux 或 Windows）的现成二进制文件将无法使用。

编辑：`javah`来自 JDK 的工具可以采用带有一堆`native`声明的 Java 类，并使用虚拟实现制作骨架 H/C 文件。本质上，是按照 JNI 规则将方法原型从 Java 转换为 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:56:53.040

确保您尝试使用的库（及其依赖项）是为目标平台（Android Native 平台）构建的。

# jquery - 如何调用 http://addr?param... 获取每个 jquery 解析返回的参数？

> ID：11354421
> 
> 赞同：0
> 
> 时间：2012-07-06T00:36:43.503
> 
> 标签：jquery, asp.net-mvc

如何从 jquery 调用 http:get/ajax 并解析返回令牌？

```
http://localhost/getstuff?id=2  // end point is from asp.net mvc4 web api 
```

输出：

> ```
> <StuffList>    
>    <Stuff id="2" stuff="thestuff"/>
> </StuffList> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:30:19.353

您可以使用该[`$.ajax`](http://api.jquery.com/jQuery.ajax/)方法。因此，假设服务器正确地将响应 Content-Type 标头设置为`text/xml`并发送了您在问题中显示的 XML，jQuery 将自动构建一个您可以操作的 XML 文档：

```
$.ajax({
    url: '/api/values',
    type: 'GET',
    success: function (result) {
        // result is the XML, you could do any selectors on it
        // for example var stuff = $('Stuff[id=2]', result);

        var stuff = $('Stuff', result);
        var id = stuff.attr('id');
        var someStuff = stuff.attr('stuff');

        alert(id);
        alert(someStuff);
    }
}); 
```

# scala - 使用 classManifest 提供具有上限的 Class 对象

> ID：11354427
> 
> 赞同：2
> 
> 时间：2012-07-06T00:37:19.213
> 
> 标签：scala, generics, manifest, type-erasure

假设我需要提供一个方法，该方法带有一个`java.lang.Class`表示某个父类的子类的对象`A`。我需要从另一个方法执行此操作，该方法具有一个上界类型绑定到的泛型参数`A`。

我认为这可能有效：

```
class A
def f(clazz: java.lang.Class[_ <: A]) = ()
def g[T <: A : Manifest] = f(classManifest[T].erasure) 
```

但它没有：

```
<console>:9: error: type mismatch;
 found   : java.lang.Class[_$1(in method g)] where type _$1(in method g)
 required: java.lang.Class[_ <: A]
         def g[T <: A : Manifest] = f(classManifest[T].erasure)
                                                       ^ 
```

为什么编译器无法确定它`T`确实是 的子类`A`？无论如何我可以帮助它吗？或者我应该以完全不同的方式处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:57:03.057

它不起作用，因为它[`erasure`具有 type`Class[_]`](http://www.scala-lang.org/api/current/scala/reflect/ClassManifest.html)，它是一种存在类型。这意味着`Class`对象`erasure`被某种类型参数化，但它是哪种类型并不重要。上面`erasure`没有类型。`Class[T]`

该方法`f`需要一个类型的参数，`Class[_ <: A]`该参数是已知的某个类型的子类型`A`。此上限不一定由上述`Class[_]`类型确保。

**解决方案**：你知道`erasure`有一个正确的类型，只是这个类型没有暴露在`ClassManifest`对象中。简单地投射它：

```
classManifest[T].erasure.asInstanceOf[Class[A]] 
```

编辑：

如果你有一个子`B`类`A`：

```
scala> class A

scala> def f(clazz: java.lang.Class[_ <: A]) = ()

scala> def g[T <: A : Manifest] = f(classManifest[T].erasure.asInstanceOf[Class[A]])

scala> g[A]

scala> class B extends A

scala> g[B] 
```

# facebook - 喜欢按钮和来自朋友的帖子/链接的评论

> ID：11354428
> 
> 赞同：0
> 
> 时间：2012-07-06T00:37:30.773
> 
> 标签：facebook, facebook-graph-api

我正在为 Facebook 编写一个应用程序，它可以浏览朋友发布的共享链接。

我的目标是，我从朋友分享的链接中动态加载信息。这部分很容易并且已经完成。现在我想加载该帖子的评论以及喜欢该朋友帖子的选项。然而，这是一个关于如何解决的谜......

我尝试使用“喜欢按钮插件”，但这喜欢链接帖子的链接。不是帖子。我可以为 URL 参数想出的所有东西都让我喜欢 URL，而不是它背后的帖子。

我可以使用 FQL 通过 POST 请求使用 /post_id/likes 来点赞帖子，但是我必须从头开始创建按钮，这可能适用于点赞按钮，但不适用于整个评论插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:49:07.283

如果我正确理解你的问题。您可以设置like按钮的目标网址。一种方法是：

```
<fb:like href="the target website"></fb:like> 
```

根据[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

> href - 要喜欢的 URL。XFBML 版本默认为当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:15:15.460

根据 Facebook，这是设计使然：http: [//developers.facebook.com/bugs/502608973087012](http://developers.facebook.com/bugs/502608973087012)

一种解决方法是使用 Graph API：http: [//developers.facebook.com/docs/reference/api/post/#likes](http://developers.facebook.com/docs/reference/api/post/#likes)

# objective-c - 如何从一组点中获取三角形的点索引

> ID：11354431
> 
> 赞同：2
> 
> 时间：2012-07-06T00:37:54.780
> 
> 标签：objective-c, graphics, opengl-es, 3d, polygons

我不确定我问的问题是否正确，但我刚刚开始学习 OpenGL ES 2.0，我正在遵循的教程让我通过在结构中定义点然后创建定义三角形的“索引”数组来创建网格使用点列表。有没有办法获取大量点并自动计算三角形？它们是相对顺序的（即 x 和 y 是有序网格） z 可以变化。似乎应该有一个函数或算法来为我处理索引。

```
1--2--3--4--5--6--7--8--9--10
|  |  |  |  |  |  |  |  |  |
11-12-13-14-15-16-17-18-19-20
|  |  |  |  |  |  |  |  |  |
21-22-23-24-25-26-27-28-29-30 
```

示例：我希望点 1,2,11 是三角形，然后是 2,11,12 和 3,12,13，依此类推。

[http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial) <-- 如果有帮助，这是我正在使用的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:35:21.723

在这方面有很多研究。绘制三角形条带通常比绘制单个三角形要快得多，因为您只需为 N 个三角形指定 N+1 个点，而不是 3*N 个点。

大多数研究是采用任意网格（例如来自 Delauney 三角剖分）并将其转换为最小数量的条纹。

# ios - 设置 UINavigationController 的标题

> ID：11354434
> 
> 赞同：1
> 
> 时间：2012-07-06T00:38:19.167
> 
> 标签：ios, uinavigationcontroller, title

我有一个`UITabBarController`设置 5 个选项卡的选项卡，这些选项卡在屏幕上放置了一个`ViewController`我放置的实例`UINavigationController`：

```
UINavigationController *nc = [[UINavigationController alloc]init];
[self.view addSubview:nc.view]; 
```

它完美地工作（选项卡和导航栏），但是将选项卡的标题设置到栏上时出现问题。

我尝试放入`self.title = @"something";`-`- (id)init`第`- (void)viewDidLoad`一个什么也没做，第二个改变了我的标签标题，而不是导航栏。

我的问题是：把我的代码放在哪里，或者我应该做些什么改变？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T01:27:15.040

在您的`UIViewController`中，执行以下操作：

```
self.navigationItem.title = @"your title"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T13:40:09.247

为了解决这个tabbar-navigationbar问题，我走了很长一段路，终于找到了完整的解释视频。我的问题不是设置标题本身，而是关于如何以正确的顺序拆分视图。

运行良好的层次结构：

*   查看与`UITabBarController`
    *   查看与`UINavigationController`
        *   在选项卡和导航栏之间查看任何内容

然后即使设置`self.title`第三个也可以使它工作。尽管如此，要区分标签栏标题和导航栏标题，您需要按照@looyao 所说的方式进行操作。

[完整的分步视频](http://www.youtube.com/watch?v=LBnPfAtswgw)（代码可能已过时 - 2009，但解释使其仍然有价值）

# asp.net - 用 ASP.NET 开发“PHP 风格”？

> ID：11354435
> 
> 赞同：0
> 
> 时间：2012-07-06T00:38:55.610
> 
> 标签：asp.net

我正在（慢慢地）学习 ASP.NET，试图完全避免使用 WebForms，但我发现 MVC、ORM、EF 和其他所有东西都有点不知所措。我对 HTML、HTTP、CSS、C# 和 BCL 非常熟悉。

我对 PHP (ewww) 有一点经验，但我发现它对于超小型任务具有部署和便利的优势。

我想要一个“快速入门”，我可以只使用一个文件，我可以在其中手动连接到数据库，运行一些 sql，然后遍历结果以生成一些 HTML。少量的 Visual Studio 魔法是可以接受的。;)

我是否缺少某种微框架或“基本项目模板”？

* * *

这类似于[这个关于用 ruby​​ 做同样事情的问题](https://stackoverflow.com/questions/5776339/php-style-web-development-on-ruby-creating-microframework-for-that)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:58:06.223

查看 ASP.NET 网页、WebMatrix 和新的 Razor 语法，听起来就像您正在寻找的那样：

[http://www.asp.net/web-pages](http://www.asp.net/web-pages)

我强烈建议学习 MVC 框架，但这应该是一个好的开始，如果/当您决定使用 MVC 时，这将是相关知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:58:11.590

如果您对 MVC、EF 等感到不知所措，请查看 ASP.NET 网页：

*   [http://www.asp.net/web-pages/tutorials](http://www.asp.net/web-pages/tutorials)

这是一个很好的起点，你学到的一些东西，例如 Razor 可以应用于 ASP.NET MVC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:57:10.277

如果您想同时避免 WebForms，那么您可以使用 Handler。

我可以理解您为什么要在学习时这样做，但请记住 WebForms 绝对不是敌人。

```
<%@ WebHandler Language="C#" Class="MyNamespace.Handler" %>

using System.Web;
using System.Data.SqlClient;

namespace MyNamespace
{
    public class Handler : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            context.Response.ContentType = "text/html";
            context.Response.Write("<html><body>");
            string connectionString = ""; // todo: fill in your connection string
            int numThings;
            using (var connection = new SqlConnection(connectionString))
            using (var query = new SqlCommand("select count(*) from Lights", connection))
            {
                numThings = (int)query.ExecuteScalar();
            }
            context.Response.Write("<h1>There are {0} lights!</h1>");
            context.Response.Write("</body></html>");
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

# algorithm - 自下而上的堆构造是否完全取决于 (n+1) 是 2 的幂这一事实？

> ID：11354444
> 
> 赞同：2
> 
> 时间：2012-07-06T00:40:10.460
> 
> 标签：algorithm, data-structures, computer-science, complexity-theory, binary-heap

自下而上的堆构造不完全取决于 (n+1) 是 2 的幂这一事实吗？（其中 n 是节点数）。

例如，考虑 n = 21 的情况。 (n +1) 不是 2 的幂 - 这将如何工作？

您将创建第一个插入 (n+1)/2 个节点，即 11 个节点。然后，您将插入 (n+1)/4 个节点作为先前插入的节点的父节点，即 5.5 个节点。但是“半个节点”怎么插入呢？**每当 n 不是 2 的幂时，您总是会在某个级别上获得十进制的节点插入量 - 您如何处理这个问题？**

我考虑删除一定数量的节点，以便剩余节点是 2 的幂，从剩余节点中构建一棵树，然后在完成后将删除的节点冒泡到树中。但是对于大量节点，这变得不可行：即节点数 = 1600。最接近 2 的幂是 1024，这意味着您必须冒泡 576 个节点，这相对耗时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:57:28.730

不，不需要发生这种情况。请记住，二叉堆的最后一层可能缺少节点。这意味着在第一步中，您以一种最终得到堆集合的方式组合节点，这样这些堆将形成堆的最后两层。并非所有这些堆都必须是完整的堆。他们中的一些人会有失踪的孩子。

如果您选择要省略的子节点数，使剩余节点数比 2 的完美幂少 1，则可以照常进行自下而上的构造。结果将是一个完整的二进制堆。

希望这可以帮助！

# php - 如何使用 Netbeans 在 htdocs 之外拥有 yii 保护的文件夹

> ID：11354452
> 
> 赞同：7
> 
> 时间：2012-07-06T00:40:43.707
> 
> 标签：php, netbeans, yii, document-root, htdocs

我目前正在开发一个使用 Yii 框架的 PHP Web 应用程序。

由于我想阻止从 Web 浏览器直接访问 Yii 所需的某些文件，我将框架和受保护的文件夹都移到了 htdocs 文件夹之外。

结果，我最终得到了以下文件夹设置：

> /apache22/htdocs
> 
> /apache22/htdocs/myproject/index.php -- Yii 引导文件
> /apache22/htdocs/myproject/css
> /apache22/htdocs/myproject/js
> /apache22/htdocs/myproject/images
> 
> /apache22/vendor/yii-1.1.10 -- 文档根目录外的 Yii 框架文件夹
> 
> /apache22/htdocs-private/myproject/protected
> /apache22/htdocs-private/myproject/runtime

如您所见，只有引导文件和其他一些必需的 css、js 和图像文件可以直接从 Web 浏览器访问。所有其他文件，例如 Yii 核心框架和 Yii 在受保护和运行时文件夹中生成的特定应用程序私有文件都位于我的应用程序 Web 根目录之外。

虽然按照 Yii 框架的建议，这种设置很好且安全，但是当将它们全部放在 Netbeans 中时，我无法进行这种分离。似乎 Netbeans 不允许我将同一项目中的文件放在我的网络服务器的不同文件夹级别中。

我想知道唯一的解决方案是否是创建单独的 netbeans 项目：一个用于公共网站部分，另一个用于私有网站部分。

有什么建议么 ？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:08:55.497

虽然它可能只是部分解决您的问题，但您可以为您的项目添加额外的包含路径。

假设`/apache22/htdocs/myproject/`是您的项目文件夹。

*   右键单击项目名称
*   选择“属性”
*   选择“PHP 包含路径”
*   单击“添加文件夹...”
*   添加`/apache22/htdocs-private/myproject/`

它现在应该出现在“包含路径”下的左侧边栏中。但看起来你无法从那里提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:42:24.637

我有这个路径结构：

NetbeansProjects/myproject/www NetbeansProyects/myproject/protected

这完全在 Web 服务器路径之外。然后，当我想测试我的代码时，我使用一个简单的 shell 脚本（它可以是 Windows 上的 .bat）将文件复制到它们需要的位置。因此，当我想测试时按 F6，一切都会被“部署”

为了能够做到这一点，您应该配置您的项目以在“运行配置”上执行您的“部署脚本”。这是我的，我相信你可以将它改编为 Windows：

**运行方式：**脚本（在命令行中运行）

**PHP 解释器：** /bin/bash

**索引文件：** up_sync.sh

**工作目录：** /home/user/NetbeansProjects/myproject/

up_sync.sh 文件将是您的 .bat 文件，它将目录复制到各自的位置。

# javascript - 将 Javascript 代码隐藏到旧版浏览器

> ID：11354453
> 
> 赞同：1
> 
> 时间：2012-07-06T00:40:56.823
> 
> 标签：javascript, browser, obsolete

好吧，我认为这有点愚蠢，但是，我想知道是否有任何方法可以在不影响现代浏览器代码的情况下从旧浏览器中隐藏 Javascript 代码。

是的，我知道有`<noscript></noscript>`标签显示旧浏览器的消息，但有时非常旧的浏览器出于任何原因将 JS 代码显示为文本，如果无法识别。

我希望你明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:42:39.930

```
<script>
<!--
    Your code here
//-->
</script> 
```

# asp.net - 从 asp.net Web 应用程序中使用 Lucene.Net 线程安全

> ID：11354455
> 
> 赞同：10
> 
> 时间：2012-07-06T00:42:04.967
> 
> 标签：asp.net, singleton, lucene.net

因此，我一直在研究从 Web 应用程序中实现 Lucene.Net 索引搜索和写入的最佳方法。我提出以下要求：

*   需要允许并发搜索和访问索引（查询并行运行）
*   会有多个索引
*   索引搜索完全是最新的（“实时”）不是必需的
*   运行作业以某种频率更新索引（每个索引的频率不同）
*   显然，希望以遵循 lucene“最佳实践”并且可以很好地执行和扩展的方式来完成所有这些

我找到了一些有用的资源，以及一些关于 SO 的好问题，比如[这个](https://stackoverflow.com/questions/8195166/in-lucene-how-can-i-find-out-if-the-indexsearcher-or-indexwriter-is-being-used)

按照那篇文章的指导，我决定尝试一个单例模式，其中包含一个为管理索引而构建的包装器的并发字典。

为了简单起见，我假设我只管理一个索引，在这种情况下，包装器可以成为单例。这最终看起来像这样：

```
public sealed class SingleIndexManager
{
    private const string IndexDirectory = "C:\\IndexDirectory\\";
    private const string IndexName = "test-index";
    private static readonly Version _version = Version.LUCENE_29;

    #region Singleton Behavior
    private static volatile SingleIndexManager _instance;
    private static object syncRoot = new Object();

    public static SingleIndexManager Instance
    {
        get
        {
            if (_instance == null)
            {
                lock (syncRoot)
                {
                    if (_instance == null)
                        _instance = new SingleIndexManager();
                }
            }

            return _instance;
        }
    }
    #endregion

    private IndexWriter _writer;
    private IndexSearcher _searcher;

    private int _activeSearches = 0;
    private int _activeWrites = 0;

    private SingleIndexManager()
    {
        lock(syncRoot)
        {
            _writer = CreateWriter(); //hidden for sake of brevity
            _searcher = new IndexSearcher(_writer.GetReader());
        }
    }

    public List<Document> Search(Func<IndexSearcher,List<Document>> searchMethod)
    {
        lock(syncRoot)
        {
            if(_searcher != null && !_searcher.GetIndexReader().IsCurrent() && _activeSearches == 0)
            {
                _searcher.Close();
                _searcher = null;
            }
            if(_searcher == null)
            {
                _searcher = new IndexSearcher((_writer ?? (_writer = CreateWriter())).GetReader());
            }
        }
        List<Document> results;
        Interlocked.Increment(ref _activeSearches);
        try
        {
            results = searchMethod(_searcher);
        } 
        finally
        {
            Interlocked.Decrement(ref _activeSearches);
        }
        return results;
    }

    public void Write(List<Document> docs)
    {
        lock(syncRoot)
        {
            if(_writer == null)
            {
                _writer = CreateWriter();
            }
        }
        try
        {
            Interlocked.Increment(ref _activeWrites);
            foreach (Document document in docs)
            {
                _writer.AddDocument(document, new StandardAnalyzer(_version));
            }

        } 
        finally
        {
            lock(syncRoot)
            {
                int writers = Interlocked.Decrement(ref _activeWrites);
                if(writers == 0)
                {
                    _writer.Close();
                    _writer = null;
                }
            }
        }
    }
} 
```

从理论上讲，这应该允许索引的线程安全单例实例（这里称为“索引测试”），其中我有两个公开公开的方法，`Search()`可以`Write()`从 ASP.NET Web 应用程序中调用，而无需担心线程安全？（如果这不正确，请告诉我）。

现在有一件事给我带来了一些麻烦：

如何`Application_End`在 Global.asax.cs 文件中优雅地关闭这些实例，以便如果我想在 IIS 中重新启动我的 Web 应用程序，我不会遇到一堆 write.lock 失败等？

目前我能想到的只有：

```
public void Close()
{
    lock(syncRoot)
    {
        _searcher.Close();
        _searcher.Dispose();
        _searcher = null;

        _writer.Close();
        _writer.Dispose();
        _writer = null;
    }
} 
```

并调用它`Application_End`，但如果我有任何活跃的搜索者或作者，这会导致索引损坏吗？

非常感谢任何帮助或建议。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T14:42:24.130

Lucene.NET 是*非常*线程安全的。我可以肯定地说`IndexWriter`和`IndexReader`类上的所有方法都是线程安全的，您可以使用它们而不必担心同步。您可以摆脱所有涉及围绕这些类的实例进行同步的代码。

也就是说，更大的问题是使用来自 ASP.NET 的 Lucene.NET。 [ASP.NET 出于多种原因回收应用程序池](https://stackoverflow.com/q/5187397/50776)，但是，在关闭一个应用程序域时，它会启动另一个应用程序域来处理对站点的新请求。

如果您尝试使用`FSDirectory`不同的`IndexWriter`/访问相同的物理文件（假设您使用的是基于文件系统的文件） `IndexReader`，那么您将收到一个错误，因为该文件的锁定尚未由尚未释放的应用程序域释放还没有被关闭。

为此，推荐的最佳实践是控制处理对 Lucene.NET 的访问的进程；这通常意味着创建一个服务，您可以在其中通过 Remoting 或 WCF（最好是后者）公开您的操作。

这样做的工作量更大（因为您必须创建所有抽象来表示您的操作），但您可以获得以下好处：

*   服务进程将始终启动，这意味着客户端（ASP.NET 应用程序）不必担心争夺所需文件`FSDirectory`。他们只需要调用服务即可。

*   您正在更高层次上抽象您的搜索操作。您不是直接访问 Lucene.NET，而是定义这些操作所需的操作和类型。一旦你把它抽象出来，如果你决定从 Lucene.NET 转移到其他搜索机制（比如[RavenDB](http://ravendb.net/)），那么就需要改变合同的*实现了。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T14:47:17.687

*   打开 IndexWriter 可能是一项繁重的操作。你可以重复使用它。
*   在 Write(...) 中有一个锁以确保事务行为，在方法返回之前将所有文档添加并写入磁盘。对 Commit() 的调用可能是一个冗长的操作（它可能导致段合并）。如果需要，您可以将其移动到后台线程（这会引入一些添加的文档在提交中写入的场景，一些在另一个中）。
*   在您的 Search(...) 方法中不需要无条件锁定。你可以检查你是否有一个 _searcher 实例，并使用它。在 Write(...) 中将其设置为 null 以强制使用新的搜索器。
*   我不确定您是否使用了 searchMethod，它看起来像是收集器更适合的东西。

```
public sealed class SingleIndexManager {
    private static readonly Version _version = Version.LUCENE_29;
    private readonly IndexWriter _writer;
    private volatile IndexSearcher _searcher;
    private readonly Object _searcherLock = new Object();

    private SingleIndexManager() {
        _writer = null; // TODO
    }

    public List<Document> Search(Func<IndexSearcher, List<Document>> searchMethod) {
        var searcher = _searcher;
        if (searcher == null) {
            lock (_searcherLock) {
                if (_searcher == null) {
                    var reader = _writer.GetReader();
                    _searcher = searcher = new IndexSearcher(reader);
                }
            }
        }

        return searchMethod(searcher);
    }

    public void Write(List<Document> docs) {
        lock (_writer) {
            foreach (var document in docs) {
                _writer.AddDocument(document, new StandardAnalyzer(_version));
            }

            _writer.Commit();
            _searcher = null;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-19T18:50:05.677

您还可以在 IIS 中禁用应用程序池重叠设置，以避免在一个应用程序池关闭（但仍持有 write.lock）并且 IIS 正在为新请求准备另一个应用程序池时出现 Lucene write.lock 问题。

# vba - 在 Excel 中以编程方式隐藏活动工作簿

> ID：11354456
> 
> 赞同：13
> 
> 时间：2012-07-06T00:42:07.870
> 
> 标签：vba, excel, screen

我正在研究基于工作簿的 VBA 项目。该代码会打开一个新工作簿并调用一个外部 API，该 API 会在这个新工作簿的多个工作表中下载并插入一堆数据。我停用`Application.Screenupdating = False`了屏幕更新（但是，一旦 API 插入数据，屏幕就会切换到新工作簿。我怎样才能防止这种情况发生？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-06T07:15:57.553

可以使用隐藏活动工作簿

```
ActiveWorkbook.Windows(1).Visible = False 
```

如果有问题的工作簿不是活动工作簿和/或添加一个循环，例如工作簿有多个窗口，您可能需要`ActiveWorkbook`用适当的参考替换。`For i = 1 To ActiveWorkbook.Windows.Count`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T01:54:40.470

您可以尝试使用 ShowWindow API 函数：

```
Public Declare Function ShowWindow Lib "user32.dll" _
    (ByVal HWND As Long, ByVal nCmdShow As Long) As Long

Const SW_HIDE as Long = 0
Const SW_SHOW as Long = 5

ShowWindow otherWorkbookApplication.Hwnd, SW_HIDE

'Your code here

ShowWindow otherWorkbookApplication.Hwnd, SW_SHOW 
```

或者，LockWindowUpdate API 函数（感谢 Chip Pearson，[http](http://www.cpearson.com/excel/vbe.aspx) ://www.cpearson.com/excel/vbe.aspx ）：

```
Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
    (ByVal ClassName As String, ByVal WindowName As String) As Long

Private Declare Function LockWindowUpdate Lib "user32" _
    (ByVal hWndLock As Long) As Long

Sub EliminateScreenFlicker()
    Dim VBEHwnd As Long

    On Error GoTo ErrH:

    Application.VBE.MainWindow.Visible = False

    VBEHwnd = FindWindow("wndclass_desked_gsk", _
        Application.VBE.MainWindow.Caption)

    If VBEHwnd Then
        LockWindowUpdate VBEHwnd
    End If

    '''''''''''''''''''''''''
    ' your code here
    '''''''''''''''''''''''''

    Application.VBE.MainWindow.Visible = False
ErrH:
    LockWindowUpdate 0&
End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T01:29:43.483

您要么需要保存并关闭目标工作簿，要么在重新打开屏幕更新之前选择原始工作簿。

# paypal - 权限 API：存储访问令牌和令牌机密以供以后使用

> ID：11354457
> 
> 赞同：0
> 
> 时间：2012-07-06T00:42:18.073
> 
> 标签：paypal

我正在使用 Permissions API 来检索访问令牌和令牌秘密，以便创建“X-PAYPAL-AUTHORIZATION”来处理退款操作。为了创建标头，我使用 PayPal SDK (OAuthSignature.getFullAuthString)。每次进行 API 调用时，我是否应该保留访问令牌和令牌秘密并创建标头？还是标题（由 getFullAuthString 重新调整的字符串）可以永远重复使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:28:54.603

理论上，您应该在每次拨打电话时生成标头，因为它的寿命有限。

实际上，paypal 永远不会使授权标头过期，因此您可以重复使用它。

他们可能有一天会修复它，所以最好坚持标准，每次都生成一个新的标题。

# java - 在 Eclipse 中导出 .jar 小程序

> ID：11354458
> 
> 赞同：5
> 
> 时间：2012-07-06T00:42:34.807
> 
> 标签：java, eclipse, jar, applet

我有一个小程序，但无法将其导出到可运行的 jar，因为它没有主类（public static void main(String args[])）我需要一个可运行的 jar，因为我有一个包含许多类的程序和包裹。我如何使这项工作。如果答案是添加一个主要方法，我应该在主要方法中添加什么？

**更新**我尝试使用普通的 .jar 但仍然没有。这是我发送的回复，以更好地描述正在发生的事情

“我仍然得到类未找到错误。我有一个 .jar 有一个“主”文件夹。然后在“主”文件夹中我有我所有的类。我的主类是 Render.class 所以在 html 中我使用这个代码打开小程序：“

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T00:47:45.853

如果它是一个小程序，它就不是一个“可运行的 jar”。幸运的是，你不需要一个。你只需要一个普通的罐子。Eclipse 将成为其中之一。

# c# - MongoDB C# CommandDocument 如何添加查询

> ID：11354460
> 
> 赞同：2
> 
> 时间：2012-07-06T00:42:50.057
> 
> 标签：c#, mongodb

如果shell中的命令是：

```
db.runCommand({"distinct":"log", "key":"cs_uri_stem"}); 
```

我发现相应的 C# 代码是：

```
var command = new CommandDocument { 
                                            { "distinct", "log" }, 
                                            { "key", "cs_uri_stem"},
                                    }; 
```

但是下面的命令呢？

```
db.runCommand({"distinct":"log", "key":"cs_uri_stem", query:{ datetime: { $gt: new ISODate("2012-07-05T19:55:18.475Z"), $lt:new ISODate("2012-07-05T20:55:18.475Z")} }}) 
```

我不知道如何在 C# 中做到这一点......

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:57:16.197

还在以下位置提问和回答：

[https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/TKZj_Qs0W5E](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/TKZj_Qs0W5E)

MongoCollection 中实际上有一个可以使用的辅助方法。您的第二个不同的命令可以用 C# 编码，如下所示：

```
var collection = database.GetCollection("log");
var query = Query.And(
    Query.GT("datetime", new DateTime(2012, 7, 5, 19, 55, 18, 475, DateTimeKind.Utc)),
    Query.LT("datetime", new DateTime(2012, 7, 5, 20, 55, 18, 475, DateTimeKind.Utc))
);
var result = collection.Distinct("cs_uri_stem", query);
foreach (var distinctValue in result)
{
    // process distinctValue
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:34:55.843

```
 Query.And(Query.GT("datetime", DateTime.UtcNow), Query.LT("datetime", DateTime.UtcNow)); 
```

# ruby - 在 Centos 6.2 上使用 RVM 1.9.3 安装 nokogiri 时遇到问题

> ID：11354464
> 
> 赞同：5
> 
> 时间：2012-07-06T00:43:07.260
> 
> 标签：ruby, centos, rvm, nokogiri, libxml2

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': 
The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first. 
```

我在我的 CentOS 6.2 服务器上使用 RVM 安装了 ruby​​ 1.9.3。当我尝试运行`gem install nokogiri`它时，它会产生下面的输出。我已经访问了 nokogiri 网站并使用 yum 安装了 libxml2 和 libxslt 依赖项：

```
sudo yum install -y gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel 
```

我还使用`rvm pkg install`并重新安装了 ruby​​ 安装了 libxml2 和 libxslt 软件包。

我一直在寻找解决方案，但我还没有找到任何东西。任何想法，将不胜感激 ：）

```
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
        ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for libxml/parser.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby
        --with-zlib-dir
        --without-zlib-dir
        --with-zlib-include
        --without-zlib-include=${zlib-dir}/include
        --with-zlib-lib
        --without-zlib-lib=${zlib-dir}/lib
        --with-iconv-dir
        --without-iconv-dir
        --with-iconv-include
        --without-iconv-include=${iconv-dir}/include
        --with-iconv-lib
        --without-iconv-lib=${iconv-dir}/lib
        --with-xml2-dir
        --without-xml2-dir
        --with-xml2-include
        --without-xml2-include=${xml2-dir}/include
        --with-xml2-lib
        --without-xml2-lib=${xml2-dir}/lib
        --with-xslt-dir
        --without-xslt-dir
        --with-xslt-include
        --without-xslt-include=${xslt-dir}/include
        --with-xslt-lib
        --without-xslt-lib=${xslt-dir}/lib
        --with-libxslt-config
        --without-libxslt-config
        --with-pkg-config
        --without-pkg-config
        --with-libxml-2.0-config
        --without-libxml-2.0-config
        --with-libiconv-config
        --without-libiconv-config
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
        from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
        from extconf.rb:114:in `<main>'

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/ext/nokogiri/gem_make.out 
```

以下是请求的 mkmf.log 的内容：

```
package configuration for libxslt
cflags: -I/usr/include/libxml2
ldflags:
libs: -lxslt -lz -lm -lxml2

package configuration for libxml-2.0
cflags: -I/usr/include/libxml2
ldflags:
libs: -lxml2

package configuration for libiconv is not found
"gcc -o conftest -I/usr/local/rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/x86_64-linux -I/usr/local/rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/backward -I/usr/local/rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1 -I. -I/opt/local/include/libxml2 -I/usr/local/include/libxml2 -I/usr/local/rvm/rubies/ruby-1.9.3-p194/include/libxml2 -I/opt/local/include -I/usr/local/include -I/usr/local/rvm/rubies/ruby-1.9.3-p194/include -I/usr/include -I/usr/include/libxml2 -I/usr/local/rvm/usr/include     -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  -g -DXP_UNIX -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline -I/usr/include/libxml2   -I/usr/include/libxml2   conftest.c  -L. -L/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -Wl,-R/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -L/opt/local/lib -Wl,-R/opt/local/lib -L/usr/local/lib -Wl,-R/usr/local/lib -L/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -Wl,-R/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -L/usr/lib -Wl,-R/usr/lib -L/usr/local/rvm/usr/lib -Wl,-R/usr/local/rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic       -lxslt -lz -lm -lxml2   -lxml2   -Wl,-R -Wl,/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -L/usr/local/rvm/rubies/ruby-1.9.3-p194/lib -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc "
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetLineNo@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsExtenderGroup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlMalloc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathIsNodeType@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrchr@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeDtd@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCtxtCompile@LIBXML2_2.6.5'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSplitQName2@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathEvalPredicate@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlRealloc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathContextSetCache@LIBXML2_2.6.25'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeURI@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlAddPrevSibling@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFindCharEncodingHandler@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashFree@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSetProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `valuePop@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathIsNaN@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeIDTable@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashRemoveEntry2@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPtrEval@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNextAncestor@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathInit@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashScan@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFd@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCompiledEval@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry3@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeParserContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathErr@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictCreateSub@LIBXML2_2.6.5'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDocSetRootElement@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathObjectCopy@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictReference@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPtrNewContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewText@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewComment@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferClose@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferCat@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeDumpOutput@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashLookup3@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHasNsProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsDigitGroup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `htmlDocContentDumpOutput@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFunc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrPrintf@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrndup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSearchNs@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDocNode@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlValidateQName@LIBXML2_2.5.4'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlMutexLock@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetAddUnique@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlValidateNCName@LIBXML2_2.5.4'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeAddContent@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetID@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFuncLookup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeRefTable@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrdup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlModuleSymbol@LIBXML2_2.6.17'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry2@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferFree@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDocText@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlUnlinkNode@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewChild@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeGetBase@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetMerge@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlMutexUnlock@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeNode@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrstr@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictLookup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGenericError@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferWriteQuotedString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDocPI@LIBXML2_2.6.15'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDocGetRootElement@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNumberFunction@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsBaseCharGroup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathWrapNodeSet@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeSetContent@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetIntSubset@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlParseURI@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetDtdAttrDesc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferAdd@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlParseDocument@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeNodeSet@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashCreate@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCastToString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCheckFilename@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `htmlDocContentDumpFormatOutput@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewMutex@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlLoadExternalEntity@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlModuleOpen@LIBXML2_2.6.17'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCompile@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `htmlNewDoc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathStringFunction@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDocCopyNode@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlAddID@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewNs@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewParserCtxt@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathConvertString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewNsProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetDocEntity@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeGetSpacePreserve@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathOrderDocElems@LIBXML2_2.5.6'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewParserContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictCreate@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFree@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterFuncNS@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathDebugDumpObject@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictQLookup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGenericErrorContext@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathEvalExpression@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `htmlNewDocNoDtD@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashLookup2@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferWriteString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFilename@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrncat@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrlen@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCharInRange@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDoc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlAddChild@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetCharEncodingName@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathRegisterVariableLookup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeCompExpr@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewCString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrncasecmp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXIncludeProcessFlags@LIBXML2_2.6.3'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsCombiningGroup@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetCreate@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashScanFull@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `inputPush@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrEqual@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `valuePush@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetNsList@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsBlankNode@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlURIEscapeStr@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCmpNodes@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCreateURI@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNextPrecedingSibling@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathIsInf@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictFree@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferCCat@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCompiledEvalToBoolean@LIBXML2_2.6.27'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferCreateFile@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSaveUri@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDocProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeParserCtxt@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeMutex@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewDocNodeEatName@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNodeSetAdd@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStringTextNoenc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSearchNsByHref@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathStringEvalNumber@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewCDataBlock@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewValueTree@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferCreate@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry2@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeNodeList@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStringText@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathEval@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlOutputBufferFlush@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBufferContent@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNsLookup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlParserGetDirectory@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlUTF8Strloc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashRemoveEntry@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFreeObject@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewBoolean@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlUTF8Strpos@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrncmp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlIsID@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathFunctionLookupNS@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCtxtUseOptions@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlGetNsProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathCastNodeToString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNewTextLen@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeListGetString@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashAddEntry@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlAllocOutputBuffer@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlModuleClose@LIBXML2_2.6.17'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlSetNsProp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathConvertNumber@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrcasecmp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlNodeGetContent@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrcmp@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCreateIntSubset@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlFreeDoc@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlCopyCharMultiByte@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashUpdateEntry3@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlDictOwns@LIBXML2_2.6.0'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStrcat@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlStringCurrentChar@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlXPathNewNodeSet@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `htmlSetMetaEncoding@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlHashLookup@LIBXML2_2.4.30'
/usr/local/rvm/usr/lib/libxslt.so: undefined reference to `xmlBuildURI@LIBXML2_2.4.30'
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T19:10:34.547

我以某种方式解决了这个问题。我删除了除 zlib 之外的所有 rvm 包（libxml2、iconv、libxslt 等），`rvm pkg uninstall <package>`然后使用重新安装了 1.9.3`rvm reinstall 1.9.3`

然后我做了一个`gem install nokogiri`，它工作得很好......

我不完全明白为什么它现在可以工作，也许 libxml2、iconv、libxslt rvm 包不好？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T03:36:25.660

原因是 gem install nokogiri 调用`path/to/your/gems/ruby-1.9.3-p194/gems/nokogiri-1.5.5/ext/nokogiri/extconf.rb`，并且在`extconf.rb`文件中，

> LIB_DIRS = [ # 首先在 /opt/local 中搜索 macports '/opt/local/lib',
> 
> ```
> # Then search /usr/local for people that installed from source
> '/usr/local/lib',
> 
> # Check the ruby install locations
> LIBDIR,
> 
> # Finally fall back to /usr
> '/usr/lib', 
> ```

但是你的 libxml2 库可能不在上面的路径中。所以你必须确保 extconf.rb 可以找到你的 libxml2 库 **我的解决方案：** 我的 centos 是 64 位，libxml2 安装在 /usr/lib64，我复制`usr/lib64/libxml2.so`到`/usr/lib/libxml2.so` 修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:56:34.187

核心问题似乎是您为 Lion 编译的 rvm/brew/port/whatever 二进制文件将具有一些过时/删除的库依赖项，从而导致更高级别软件的编译和运行时问题。我在我的系统上修复了这个问题，方法是对我所有的 brew 和端口管理的软件包进行核对，重新编译/重新安装我的所有依赖项，重新编译我的 RVM 管理的 ruby​​ 1.9.3-p194，最后“gem install nokogiri”工作没有问题。

我浪费了很多时间试图说服我过时的编译包工作。相反，只需重新安装上述内容（确保您实际上是在重新编译/链接），就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T03:31:04.670

```
sudo yum groupinstall "Development tools" 
```

（在 CentOS 7.0.1406 核心上）

# ruby-on-rails - 使用 ActiveRecord select() 创建临时属性的优缺点

> ID：11354469
> 
> 赞同：3
> 
> 时间：2012-07-06T00:43:39.473
> 
> 标签：ruby-on-rails, activerecord, select

自从我使用纯 SQL（无 ORM）从 PHP 切换到 Rails/AR 以来，[我](http://blog.grayproductions.net/articles/five_activerecord_tips)一直在寻找类似第 4 点所述的内容 。

简而言之，如果您`.select()`在执行聚合、计算或附加操作的查询上添加一个`IF()`，那么 AR 可确保您返回的所有记录都具有正确填充`AS alias`的额外（临时）属性。`alias`（临时作为其他查询的结果将没有该属性）

正如博客文章所指出的，这意味着您可以使用单个查询进行多次计数。您还可以通过从相关表中提取列或在列之间进行计算并将结果放在结果记录的临时/一次性属性中来对数据进行非规范化。

这看起来很棒，所以我的问题是为什么我不经常看到这样做以及是否有很好的风格理由来避免它。

我的一位同事担心它可能会造成混淆，因为其他人搜索`def alias`永远不会找到它。我可以看到对可能广泛传递的记录执行此操作是一个坏主意，以便`.alias()`从创建它的查询中完全删除对的调用，但是对于报告或简单的显示/索引操作似乎它会非常安全和有用。

这也只是“如果我们定期执行此操作就不会令人困惑”的情况，即`(def|AS) alias`当人们不知道某物来自何处时，他们会很快学会搜索。

我想更广泛地说，我从来不明白为什么你不会在查询中做这样的简单计算，如果可以的话——最好让它们在已经迭代集合的 C 代码中运行，而不是在 Ruby 中运行的第二个循环中运行，后者如果您不执行上述操作，则通常是必需的。在不涉及 PL/SQL 或存储过程的情况下，为什么不将尽可能多的工作推入高度优化的 DB 层呢？特别是不是业务逻辑的简单东西。

我很想知道是否有充分的理由这不是好的风格或可能出错的例子，或者是否有其他人将其用作标准习语并且不会对此感到惊讶。

# java - 如何在不退出 JVM/应用程序的情况下关闭并打开 JFrame？

> ID：11354473
> 
> 赞同：-1
> 
> 时间：2012-07-06T00:43:59.180
> 
> 标签：java, swing, jframe, jbutton

如何在不退出 JVM/整个应用程序的情况下关闭并打开 JFrame？我希望只退出并立即打开 JFrame，而不关闭 JFrame1，也不主要退出 JVM/整个应用程序。我想用 JButton 来做。

我想要一个这样的 JButton： JButton("我关闭这个 JFrame 并立即打开它，以便再次执行构造函数，而不退出 JVM/应用程序");

我想要但我不知道该怎么做是：我需要一种方法，当您单击窗口的“x”时，以同样的方式关闭 JFrame 窗口。如下： JFrame.close(); //就像一个窗口的“x” JFrame.setVisible(true)

谢谢。

JFrame 功能的打印在这里：
![在此处输入图像描述](../Images/8efe0fc1b20dac515bade20a3f856b43.png)

**我做了一个自我回答**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:46:13.127

我用谷歌搜索，我找到了解决方案，是这样的：

```
 WindowEvent closingEvent = new WindowEvent(frame, WindowEvent.WINDOW_CLOSING);
       Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(closingEvent);
       frame.setVisible(true); 
```

它使用 WindowEvent 来执行与“x”单击相同的操作。

无论如何谢谢你们的帮助！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T00:56:31.663

不要显示“子”JFrame，因为应用程序通常只显示一个 JFrame。您正在谈论的工作，即依赖于父窗口的窗口的工作是模态或非模态 JDialog 的用途，如果关闭将永远不会导致应用程序退出的窗口。尽管已经说过这也考虑其他替代方案，例如使用 CardLayout 来交换 JComponents 或 JTabbedPane。

请理解，JDialog 可以显示与任何 JFrame 上显示的 GUI 一样复杂和丰富的 GUI。

编辑，关于：

> 我在 JFrame 有一个 JTable，是的，我想再次实例化 JFrame 以显示不同的 GUI 状态，关闭和打开 JFrame，因为代码在其构造函数上。

代码可以移出构造函数。对于 GUI 中的状态更改，我强烈建议您使用 CardLayout。将您的 JTable 放入 JPanel，然后交换 JFrame 的 contentPane 持有的 JPanel。如果您没有在视图中弹出和弹出窗口，则用户界面会更加流畅。

**编辑 2**
好的，如果你想显示一个编辑 JTable 行的窗口，我会做的是创建一个 JPanel 来保存 JTextFields 中的行中的数据，然后在 JOptionPane.showConfirmDialog(. ..)，然后使用 JTextFields 保存的数据来编辑您的 JTable 行。我不会为此创建一个单独的 JFrame。

**编辑 3** 例如：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

@SuppressWarnings("serial")
public class Foo1 extends JPanel {
   private static final String[] COLUMN_NAMES = { "Foo", "Bar", "Licious" };
   private static final Object[][] DATA = { { 1, "Abaddon", "A" },
         { 2, "Beelzebub", "B" }, { 3, "Chuck", "C" }, { 4, "Dagon", "D" },
         { 5, "Eisheth", "E" }, {6, "Forneus", "F"}};
   private DefaultTableModel tableModel = new DefaultTableModel(DATA,
         COLUMN_NAMES);
   private JTable table = new JTable(tableModel);

   public Foo1() {
      JPanel bottomPanel = new JPanel();
      bottomPanel.add(new JButton(new EditRowAction()));

      setLayout(new BorderLayout());
      add(new JScrollPane(table));
      add(bottomPanel, BorderLayout.PAGE_END);
   }

   private class EditRowAction extends AbstractAction {
      public EditRowAction() {
         super("Edit Row");
         putValue(MNEMONIC_KEY, KeyEvent.VK_E);
      }

      @Override
      public void actionPerformed(ActionEvent arg0) {
         int rowIndex = table.getSelectedRow();
         if (rowIndex != -1) {
            Object[] row = new Object[table.getColumnCount()];
            for (int column = 0; column < row.length; column++) {
               row[column] = tableModel.getValueAt(rowIndex, column);
            }
            MyRowPanel myRowPanel = new MyRowPanel(row);
            int result = JOptionPane.showConfirmDialog(Foo1.this, myRowPanel,
                  "Edit Row Information and Press \"OK\"", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
            if (result == JOptionPane.OK_OPTION) {
               for (int col = 0; col < row.length; col++) {
                  tableModel.setValueAt(myRowPanel.getFieldText(col), rowIndex,
                        col);
               }
            }
         }
      }
   }

   private class MyRowPanel extends JPanel {
      private JTextField[] textFields;

      public MyRowPanel(Object[] row) {
         textFields = new JTextField[row.length];
         for (int i = 0; i < row.length; i++) {
            textFields[i] = new JTextField(String.valueOf(row[i]), 10);
            add(textFields[i]);
         }
      }

      public String getFieldText(int index) {
         // check first that index is not out of range and throw exception if it
         // is
         if (index < 0 || index > textFields.length) {
            throw new ArrayIndexOutOfBoundsException("for index = " + index);
         }

         return textFields[index].getText();
      }

   }

   private static void createAndShowGui() {
      Foo1 mainPanel = new Foo1();

      JFrame frame = new JFrame("Foo1");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

**编辑4**关于：

> 是的，我理解您的观点，它确实有效，也就是说，我将识别已编辑的行并替换为较新的值。但实际上，我想刷新以将真实数据持久保存在数据库中，而不是化妆“编辑”JTable。

好的，那么在上面的代码示例中，我将在显示 JOptionPane 和我的 if 块内部后立即创建一个 PreparedStatement，并在 PreparedStatement 上调用 executeUpdate（当然是在后台线程中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:41:49.760

如果您只想关闭并重新打开嵌套框架而不退出 JVM/整个应用程序，您应该更改嵌套框架的“ **defaultCloseOperation** ”属性。

查看我的简单示例并注意 setDefaultCloseOperation 的用法：

```
 JFrame mainFrame = new JFrame("Main Frame");
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    final JFrame nestedframe = new JFrame("Nested Frame");
    nestedframe.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    JButton btn = new JButton("Close & Reopen Nested Frame");
    btn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            nestedframe.dispose();
            nestedframe.setVisible(true);
        }
    });

    mainFrame.getContentPane().add(btn);
    mainFrame.setSize(350, 200);
    nestedframe.setSize(250,150);

    mainFrame.setLocation(0,0);
    nestedframe.setLocation(400,0);

    mainFrame.setVisible(true);
    nestedframe.setVisible(true); 
```

# ruby-on-rails - 如何从巫术应用用户属性中删除用户名

> ID：11354474
> 
> 赞同：0
> 
> 时间：2012-07-06T00:44:19.867
> 
> 标签：ruby-on-rails, ruby, sorcery

我在 Rails 应用程序上使用巫术进行身份验证，我想知道如何从 User 模型中删除用户名。我成功地使用电子邮件地址登录，但我仍然在数据库中的每个用户上看到这个`username: nil`

我该如何摆脱它？迁移应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:03:10.687

```
remove_column :users, :username 
```

# c++ - MFC CEdit 失去焦点处理程序

> ID：11354475
> 
> 赞同：1
> 
> 时间：2012-07-06T00:44:34.467
> 
> 标签：c++, mfc, cedit

我正在使用文档/视图架构创建一个 MFC 程序。在视图中，我调用了一个扩展 CEdit 的单元类来绘制一个文本框。但是，当我尝试为该文本框捕捉失去焦点的消息时，它没有任何反应。我试图覆盖 PreTranslateMessage 但这没有用。

这是 CGridView.cpp 类中的代码：

```
void CGridView::OnInsertText()
{
    CWnd* pParentWnd = this;
    CellText* pEdit = new CellText(&grid, pParentWnd);

    Invalidate();   
    UpdateWindow();
} 
```

CellText.cpp：

```
CellText::CellText(Grid *pgrid, CWnd* pParentWnd)
{

    int *pcoordinates = pgrid->GetSelectedCellCoodrinates();
    cedit.Create(ES_MULTILINE | WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER, CRect(*pcoordinates+10, *(pcoordinates+1)+10, *(pcoordinates+2)-10, *(pcoordinates+3)-10), pParentWnd, 1);

    cell = pgrid->GetSelectedCell();
    pgrid->SetCellType(cell, "text");

    grid = pgrid;
}

BEGIN_MESSAGE_MAP(CellText, CEdit)
    ON_WM_KILLFOCUS()
    ON_WM_KEYDOWN()
END_MESSAGE_MAP()

// CellText message handlers

void CellText::OnKillFocus(CWnd* pNewWnd)
{
    CEdit::OnKillFocus(pNewWnd);

    CString str;
    GetWindowTextW(str);
    grid->SetCellText(cell, str);

    cedit.DestroyWindow(); 
}

BOOL CellText::PreTranslateMessage(MSG* pMsg) 
{
    if(pMsg->message==WM_KEYDOWN)
    {
        if(pMsg->wParam==VK_UP)
        {

        }
    }   

    return CWnd::PreTranslateMessage(pMsg);
} 
```

当我调试时，根本不会调用 onkillfocus 和 pretranslatemessage。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:14:54.377

您必须`EN_KILLFOCUS`在父窗口中处理通知代码。您不必从 CEdit 派生来执行此操作。

[EN_KILLFOCUS 通知代码](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761682%28v=vs.85%29.aspx)

**更新：**

> 编辑控件的父窗口通过 WM_COMMAND 消息接收此通知代码。
> 
> **wParam：** LOWORD 包含编辑控件的标识符。HIWORD 指定通知代码。
> 
> **lParam:** - 编辑控件的句柄。

# c# - MS UNITY：如何访问我的所有模块的字典？

> ID：11354476
> 
> 赞同：0
> 
> 时间：2012-07-06T00:44:43.547
> 
> 标签：c#, prism, unity-container, containers, ioc-container

我正在使用 MS Unity 容器。我所有的模块都需要使用一个公共对象，我在其中添加字典中的值，如下所示：

```
Dictionary<Type,  Func<BaseItem, BaseItemViewModel>> Maps 
```

当我使用 viewModel 时，这个会收到通用字典。

一位小伙伴告诉我一些关于配置 Unity 的事情，但我对 Unity 的了解很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:31:00.960

创建一个服务并统一注册它。

例如

```
public interface ICommonDataService
{
     Dictionary<Type,Func<BaseItem, BaseItemViewModel>> GetMaps();
}

public class CommonDataService : ICommonDataService
{
    public Dictionary<Type,Func<BaseItem, BaseItemViewModel>> GetMaps()
    {
         //Implementation
    }
} 
```

然后在你的引导程序中注册统一

```
protected override void ConfigureContainer()
    {
        base.ConfigureContainer();
        Container.RegisterType<ICommonDataService, CommonDataService>(new ContainerControlledLifetimeManager());
} 
```

然后你可以有这个注入或使用[ServiceLocator](http://msdn.microsoft.com/en-us/library/ff921142%28v=pandp.20%29.aspx)从接口解析实例...

# c#-4.0 - 使用 FTP/C#/BizTalk 与 IBM AS400 通信

> ID：11354479
> 
> 赞同：0
> 
> 时间：2012-07-06T00:45:42.407
> 
> 标签：c#-4.0, biztalk, ibm-midrange

我必须使用 FTP 与 IBM AS400 系统通信。需要发出的不仅仅是 get 和 put 命令。本质上需要使用 QUOTE RCMD SBMJOB 命令向 AS400 提交作业，该命令将要求 AS400 运行它的一些程序。

对于通信平台，我有两种选择（a）使用 C# 和（b）使用 BizTalk 的 FTP 适配器。

对于 C#，我查看了 MSDN ( [http://msdn.microsoft.com/en-us/library/ms229718](http://msdn.microsoft.com/en-us/library/ms229718) )，但看不到如何提交作业，因为有限的 FTP 命令被公开。

对于 BizTalk 适配器，我不确定如何实现。

有人对使用 C# 或 BizTalk 完成此任务的最佳方法有建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:28:20.227

在 C# 中，您可以运行可以调用 CL 或 RPG 程序的存储过程。

另一种选择是您可以直接在 SQL 中调用 CL 命令。如果我不希望返回任何数据，这是我用来执行此操作的通用方法：

```
public static bool RunCmd(string cmdText, iDB2Connection cn)
{
    bool rc = true;

    // Construct a string which contains the call to QCMDEXC.
    string pgmParm = String.Format("CALL QSYS/QCMDEXC('{0}', {1})", 
                     cmdText.Replace("'", "''").Trim(), 
                     cmdText.Trim().Length.ToString("0000000000.00000"));

    using (cn)
    {
        using (iDB2Command cmd = new iDB2Command(pgmParm, cn))
        {
            try { cmd.ExecuteNonQuery(); }
            catch { rc = false; }
        }
    }

    // Return success or failure
    return rc;
} 
```

由于 FTP 可能是您最简单的选择，[这篇简短的文章](http://search400.techtarget.com/tip/Execute-remote-commands-using-FTP)应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:27:50.947

我假设您没有 HIS 服务器 DB2 适配器的必要许可，因为这是可行的方法。可以在[此处找到许可信息](http://social.msdn.microsoft.com/Forums/is/biztalkr2adapters/thread/774fa114-4735-45e1-b906-2e17f8b9186e)

如果您必须使用 FTP 适配器，您可以使用：

SYSCMD 调用 PGM(MYCLPGM) PARM('MYCLPARM')

而不是上面列出的 QUOTE 命令

# google-apps-script - 指定从哪一行开始编辑 Google 脚本

> ID：11354480
> 
> 赞同：0
> 
> 时间：2012-07-06T00:46:02.767
> 
> 标签：google-apps-script, triggers, google-sheets

我希望谷歌电子表格上的这个 onEdit 脚本从第 2 行开始，它跳过我的标题行，但我不能让它与我现有的代码一起工作？有人可以帮助一个菜鸟吗？

```
function onEdit(e)
{
  var ss = e.source.getActiveSheet();
  var rr  = e.source.getActiveRange();

//comment 2 lines below if you want it working on all sheets, not just on 2nd one
  if(ss.getIndex()!= 1)
    if(ss.getIndex()!= 2) 
      if(ss.getIndex()!= 3) 
  return;
 ///

  var firstRow = rr.getRow();
  var lastRow = rr.getLastRow();

//the last modified date will appear in the 43th column which is the Last Update Column
  for(var r=firstRow; r<=lastRow; r++)
    ss.getRange(r, 43).setValue(new Date());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T19:34:19.057

只需检查当前行是否在标题内，然后退出触发器：

```
function onEdit(e)
{
  var rr = e.range;
  var ss = e.range.getSheet();

  var headerRows = 1;  // # header rows to ignore

  if (rr.getRow() <= headerRows) return;
  ... 
```

# android - 无法选择 ListViewItem

> ID：11354482
> 
> 赞同：-3
> 
> 时间：2012-07-06T00:46:16.430
> 
> 标签：android, listview

我的列表视图中有一个可检查的项目

```
public class CheckableMessageOut extends RelativeLayout implements Checkable{
    public CheckableMessageOut(Context context) {
        super(context);
    }

    public CheckableMessageOut(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    LinearLayout wrapper;
    private boolean checked = false;

    @Override
    public void setChecked(boolean b) {
        if (checked!=b){
            if (b){
                wrapper.setBackgroundResource(R.drawable.label_msg_out_selected);
            } else {
                wrapper.setBackgroundResource(R.drawable.label_msg_out);
            }
        }
        checked = b;
    } 
```

我这样用

```
<ru.kurganec.vk.messenger.ui.helper.CheckableMessageOut xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"

        >
    <LinearLayout
            android:id="@+id/wrapper"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/label_msg_out"
            android:orientation="vertical">
        <TextView
                android:id="@+id/text_msg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"

                android:text="ad"

                />
        <LinearLayout
                android:id="@+id/list_attach"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:orientation="vertical">
        </LinearLayout>
    </LinearLayout>

    <TextView
            android:id="@+id/text_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@id/wrapper"

            android:text="06.06"/>

</ru.kurganec. 
```

vk.messenger.ui.helper.CheckableMessageOut>

有时我以编程方式将一些视图添加到@id/list_attach，然后发生了一些奇怪的事情。我无法选择带有附加视图的项目。

整体看起来是这样的。

![不能选择带照片的消息，但可以选择其他（不带照片）的消息](../Images/b8bacab24b293134e462ac779c72e5e6.png)

说选中我的意思是选中。我设置了这个字段 mList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

为什么我不能选择项目？

* * *

更新

片段类[http://pastebin.com/BZRhahbi](http://pastebin.com/BZRhahbi)这是我的应用程序的主要部分，所以它看起来像“神级”反模式

适配器类[http://pastebin.com/Av7ntUmG](http://pastebin.com/Av7ntUmG)

适配器的物品类[http://pastebin.com/MdYc7Ksw](http://pastebin.com/MdYc7Ksw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:00:41.067

我解决了问题

如果您在 ListView 中有可点击的视图，只需将其添加到根视图

```
 android:descendantFocusability="blocksDescendants" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:15:15.920

我想你的问题可能在这里：

```
@Override
    public void setChecked(boolean b) {
        if (checked!=b){
            if (b){
                wrapper.setBackgroundResource(R.drawable.label_msg_out_selected);
            } else {
                wrapper.setBackgroundResource(R.drawable.label_msg_out);
            }
        }
        checked = b;
    } 
```

尝试：

```
@Override
    public void setChecked(boolean b) {
        if (checked!=b){
                wrapper.setBackgroundResource(R.drawable.label_msg_out_selected);
              else {
                wrapper.setBackgroundResource(R.drawable.label_msg_out);
            }
        }
        checked = b;
    } 
```

if(b) 是不必要的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:09:34.667

我认为实现这种行为的更好方法是使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)。这样，系统将在状态更改期间处理切换可绘制对象。您可以通过 XML 定义这样的可绘制对象。

例如 res/drawable/item_bg.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/item_bg_checked" android:state_checked="true"/>
    <item android:drawable="@drawable/item_bg_normal" android:state_checked="false"/>

</selector> 
```

并将其设置为可检查布局的背景资源：

```
<ru.kurganec.vk.messenger.ui.helper.CheckableMessageOut xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/item_bg"> 
```

并且您的可检查布局代码应该是这样的：

```
public class CheckableMessageOut extends RelativeLayout implements Checkable{
public CheckableMessageOut(Context context) {
    super(context);
}

public CheckableMessageOut(Context context, AttributeSet attrs) {
    super(context, attrs);
}

LinearLayout wrapper;
private boolean checked = false;

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    if (checked) {
        final int[] states = super.onCreateDrawableState(extraSpace + 1);
        mergeDrawableStates(states,
                new int[] { android.R.attr.state_checked });
        return states;
    }
    return super.onCreateDrawableState(extraSpace);
}

@Override
public void setChecked(boolean c) {
    if (checked != c) {
        checked = c;
        refreshDrawableState();
    }
} 
```

一定要重写*onCreateDrawableState(int)*方法，并在需要时将状态 android.R.attr.state_checked 添加到可绘制状态数组中，并在检查状态更改时调用*refreshDrawableState() 。*

如果有任何问题，请查看这篇[文章。](http://www.charlesharley.com/2012/programming/custom-drawable-states-in-android/)

# c# - 在 CreateUserWizard 中将值存储到 Profile 会在 aspnet_Users 中创建同一用户的 2 个副本

> ID：11354483
> 
> 赞同：3
> 
> 时间：2012-07-06T00:47:16.383
> 
> 标签：c#, asp.net, profile, createuserwizard

使用向导创建用户。创建用户后，我分配了一个配置文件变量。调用 profile.Save() 时，会创建第二个用户。我在 web.config 中有 automaticSaveEnabled="false"。有趣的是，这在调试期间不会发生！

```
public void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {

        Int32 li_con_id = 406;

        TextBox tbx_username = (TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("UserName");
        if (tbx_username != null)
        {
            ls_username = tbx_username.Text;
        }

        // Store Con ID in user profile:
        UserProfile profile = UserProfile.GetUserProfile(ls_username);
        profile.con_id = Convert.ToString(li_con_id);
        profile.Save();

    } 
```

这是个人资料代码：

```
using System.Web.Profile;
using System.Web.Security;

namespace WebApp
{
public class UserProfile : ProfileBase
{
    public static UserProfile GetUserProfile(string username)
    {
        return Create(username) as UserProfile;
    }

    public static UserProfile GetUserProfile()
    {
        return Create(Membership.GetUser().UserName) as UserProfile;
    }

    [SettingsAllowAnonymous(false)]
    public string Description
    {
        get { return base["Description"] as string; }
        set { base["Description"] = value; }
    }

    [SettingsAllowAnonymous(false)]
    public string Location
    {
        get { return base["Location"] as string; }
        set { base["Location"] = value; }
    }

    [SettingsAllowAnonymous(false)]
    public string con_id
    {
        get { return base["con_id"] as string; }
        set { base["con_id"] = value; }
    }
}
    }
Web.config
   <profile inherits="WebApp.UserProfile" automaticSaveEnabled="false">
    <providers>
      <clear />
      <add name="AspNetSqlProfileProvider"                type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" />
    </providers>
  </profile> 
```

创建了两个用户：第二个用户与配置文件相关联。删除 profile.Save() 会导致根本不创建任何配置文件条目，即使使用 automaticSaveEnabled="true" 也是如此。我想不通！

# php - 如何包含带有 $_GET 函数和 htaccess 链接的页面？

> ID：11354484
> 
> 赞同：0
> 
> 时间：2012-07-06T00:47:19.347
> 
> 标签：php, .htaccess

目前正在开发一个网站，并且想知道如何使用 $_Get 函数将页面包含到主索引中（仅更改某些区域的内容而不是整个页面）。

文件可能类似于 index.php（包含内容页面）、news.php（索引上的默认页面显示）、members.php、about.php、guides.php、downloads.php、sonsons.php 等。

我相信（如果我没记错的话）与 $_Get 方法的链接通常看起来像这样 index.php?pid=about

我还想了解如何将链接（通过 htaccess？）更改为如下链接： www.mywebsite.com/about/ 而不是 mywebsite.com/index.php?pid=about

自从我做任何 PHP 以来已经有一段时间了，并且不记得上面的事情是如何完成的。

我的工作预览可以在[www.survivaloperations.net/dev/上找到](http://www.survivaloperations.net/dev/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:53:11.607

您会将所有文件放在 pages 文件夹中，只是常规的 .php 文件。

你的 index.php 看起来像这样：

```
include('pages/'. $_GET['pid']. '.php'); 
```

所以你的文件看起来像：

```
pages/home.php
pages/contact.php 
```

你会去：

```
index.php?pid=home
index.php?pid=contact 
```

分别

您还希望控制允许哪些 $_GET 值。我建议使用 php 开关：

```
 switch($_GET['pid']) {
      case "home": include("home.php"); break;
      case "contact": include("contact.php"); break;
      case "thing": include("thing.php"); break;
      default: include("404.php"); break;
 } 
```

与一堆 else if 语句相比，该开关需要更少的代码，并允许在输入无效 pid 时显示默认的“404”类型页面。它还可以保护用户免于访问他们不应该访问的任何内容...例如“../db.php”或其他内容（不确定是否可以访问父目录，但仍然可以）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T00:55:55.857

在使用 $_GET 之前，您必须清除标签以确保安全。

```
$pid = strip_tags($_GET['pid']);
include("$path/" . $pid . ".php"); 
```

但是...为了安全起见，我更喜欢其他代码。

```
$pid = strip_tags($_GET['pid']);
switch($pid) {
   'sub01' : include("$path/01.php"); break;
   'sub02' : include("$path/02.php"); break;
   default : include("$path/main.php");
} 
```

# android - 裁剪图像功能最低 SDK - Android

> ID：11354485
> 
> 赞同：2
> 
> 时间：2012-07-06T00:47:22.967
> 
> 标签：android, image, crop

我想从 SDCard 中获取图像，对其进行裁剪，然后将裁剪后的图像放到 imageview 中。

在这个网站上寻找它，我发现了这个代码 [https://stackoverflow.com/a/5337988/1458576](https://stackoverflow.com/a/5337988/1458576) ，它似乎工作正常（使用 android 的内置画廊）。

我在 ICS (CyanogenMod 9) 中测试了这段代码，裁剪功能使用了人脸检测。

谁能告诉我使用这个功能的android最低sdk版本是多少？或者更好的方法来做“拍摄/裁剪/获取图像”？

它与2.1兼容？？

***编辑*** 自动回答

它在以下设备上运行良好（已测试）： - SGS GT-i9000 默认 rom (2.2) - SGS GT-i9000 CM7 和 CM9 -SG3 GT-i5800 默认库存 rom (2.2) 和 CM7。

它使用默认的“画廊”或其他通过市场安装的工具，如 QuickPik。

我使用此代码发布了一个应用程序并且没有错误（+5k 下载）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:56:46.643

我无法告诉您此代码的最低 SDK 是多少，但我在 GitHub 中找到了一个不错的代码，用于在不使用 Android Gallery 应用程序的情况下裁剪图像，这可能会给您在某些设备上带来问题

[https://github.com/biokys/cropimage](https://github.com/biokys/cropimage)

# objective-c - 核心数据从不同位置存储、加载和删除数据

> ID：11354487
> 
> 赞同：0
> 
> 时间：2012-07-06T00:47:47.863
> 
> 标签：objective-c, ios, core-data

我即将开始一个新的 IOS 项目，我将使用 Core Data 作为我为最终用户存储数据的主要方式。我在应用程序的规划阶段遇到了一个问题，即如何保存、加载和删除核心数据对象。以下是我能想到的三种可能的方法：

**方法 1**
在 Application Delegate 中创建一个通用数据对象，我将使用该`UISharedApplication`方法将其检索到每个视图控制器中。这意味着当应用程序启动时，它将创建一个带有 Getter 和 Setter 的对象。
**方法二**
创建数据模型类（Subclass of`NSObject`) 并在每个视图控制器中初始化它。这意味着每个视图控制器都必须拥有自己的 NSManagedObjectContext（应用程序委托将在启动时提供），它将在初始化时传递给数据模型类。这意味着在整个视图控制器中，它将使用它自己的数据模型类并从中调用方法。
**方法 3**
让每个单独的视图控制器自己进行保存。例如，a`-(IBAction)didAdd;`将所有代码保存到数据库中。这将使进行有效的数据调用变得更加容易，因为它可以`NSFetchResultsController`根据视图控制器（批量大小等）进行正确的设置。

我不确定哪种方法对我来说是最好的方法，如果你们中的任何人可以让我知道哪种方法最好，或者如果没有一种方法是好的，那么最好的方法是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:06:31.763

还有一个方法4，和你的方法1类似：把你的数据访问代码放到一个模型类中，做成一个*单例*。这是在不同控制器之间共享模型状态的标准方式。将所有数据管理代码放入该单例模型有助于避免代码重复。

# database - 基于邮政编码的纬度和经度

> ID：11354490
> 
> 赞同：21
> 
> 时间：2012-07-06T00:47:58.007
> 
> 标签：database, api, geolocation

我的要求是获取特定邮政编码的纬度和经度值。是否有任何 API 可用于获取这些信息。由于我在一家公司工作，因此我们团队的要求是找到特定邮政编码的纬度和经度值。所以我们正在考虑为此建立一个新的服务。那么，如果我们将邮政编码传递给我们的服务，我们可以使用什么可靠的数据源来获取这些信息。或者我可以向我的 PM 提出关于此要求的最佳方法是什么。任何指针将不胜感激。

顺便说一句，该数据源应该包含世界上所有的邮政编码、纬度和经度。不是那么准确，但大多数情况下它应该覆盖超过 95% 的覆盖率。

**更新**

我做了一些研究，发现我可以为此使用 Maxmind 数据，但 Maxmind 数据并未涵盖所有邮政编码列表。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-06T14:03:50.537

您可以从这里下载不同国家的邮政编码和相应的经纬度值：（这是开源数据，免费）

[http://download.geonames.org/export/dump/](http://download.geonames.org/export/dump/)

然后，您可以将数据导入数据库并进行查询。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-06T00:56:24.993

请查看[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)和[Yahoo! 地点查找器](http://developer.yahoo.com/geo/placefinder/)。

它们都具有地理编码功能，这正是您想要的（从部分或完整地址获取地图（纬度、经度）坐标）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T16:36:28.247

如果您需要商业级，请考虑： http: [//greatdata.com](http://greatdata.com)。如果您不需要这种质量水平，[这里](http://greatdata.com/resources)列出了一些其他来源的优缺点（值得一读，以了解 zip、zcta、usps、人口普查等数据版本之间的差异）。

ps-您说的是“整个世界”，但您的其他回答和“邮政编码”一词本身似乎主要暗示美国。上述链接超越了美国，而不是整个世界。

关于已经提到的 Google API，请注意[Google 的 TOS](https://developers.google.com/maps/documentation/geocoding/)。具体来说：“注意：地理编码 API 只能与谷歌地图一起使用；地理编码结果不显示在地图上是被禁止的。”

我是greatdata的员工。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-05T22:31:15.393

GeoNames 有一个很好的简单 API，覆盖范围很好。（[文档](http://www.geonames.org/export/web-services.html#postalCodeSearch)）

示例用法： [http ://api.geonames.org/postalCodeSearch?postalcode=98122&maxRows=10&username=demo](http://api.geonames.org/postalCodeSearch?postalcode=98122&maxRows=10&username=demo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T00:55:04.893

这个怎么样：http: [//www.boutell.com/zipcodes/](http://www.boutell.com/zipcodes/)？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-13T19:44:49.800

我有一种情况，全国有 12 个仓库，我需要找到最近的一个有物品库存的仓库。我的简单解决方案是取目标邮政编码与 12 个仓库之间的差值的绝对值。然后，只需按邮政编码的最低到最高差异对它们进行排序，并按该顺序查询库存。似乎只获得 ABS(zip1 - zip2) 就会产生两个邮政编码之间的最近距离。

# c# - Twitter API 身份验证密钥未找到异常

> ID：11354491
> 
> 赞同：0
> 
> 时间：2012-07-06T00:48:05.153
> 
> 标签：c#, api, windows-phone-7, twitter, oauth

我已经阅读了所有关于使用 WP7 的 twitter api 的教程。这是我第一次使用 oauth，它可能会很混乱。我正在努力做到这一点，以便我的用户可以在推特上发布消息和图片。我浏览了关于 oauth 和其他几个教程的本教程（但我正在使用这个 atm）：

[http://sudheerkovalam.wordpress.com/2010/08/28/a-windows-phone-7-twitter-application-part-1/#comment-251](http://sudheerkovalam.wordpress.com/2010/08/28/a-windows-phone-7-twitter-application-part-1/#comment-251)

在 stackoverflow 上还发现了一些关于在此处发布照片的帮助：

[直接上传图片到推特](https://stackoverflow.com/questions/10430165/upload-image-directly-to-twitter-in-wp7)

但是对于上面博客文章中描述的身份验证部分，我一直在“”行上得到一个“KeyNotFoundException”，`OAuthTokenKey = parameters["oauth_token"];`我试图弄清楚，但在我第一次这样做时无法想出任何东西。其他地方似乎没有太多帮助，因为每个教程都使用了难以组合的不同技术，所以我来找你们。如果您知道修复方法，请告诉我！或者，如果您知道最近有一个很好的教程，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:36:57.580

我为 LINQ to Twitter 示例更新了将[图片直接上传到 twitter](https://stackoverflow.com/questions/10430165/upload-image-directly-to-twitter-in-wp7/11024456#11024456)的代码，为方便起见，在此重复：

```
 private void PostButton_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrWhiteSpace(TweetTextBox.Text))
            MessageBox.Show("Please enter text to tweet.");

        ITwitterAuthorizer auth = SharedState.Authorizer;
        if (auth == null || !auth.IsAuthorized)
        {
            NavigationService.Navigate(new Uri("/OAuth.xaml", UriKind.Relative));
        }
        else
        {
            var twitterCtx = new TwitterContext(auth);

            var media = GetMedia();

            twitterCtx.TweetWithMedia(
                TweetTextBox.Text, false, StatusExtensions.NoCoordinate, StatusExtensions.NoCoordinate, null, false,
                media,
                updateResp => Dispatcher.BeginInvoke(() =>
                {
                    HandleResponse(updateResp);
                }));
        }
    } 
```

此页面上有一个示例，您可以加载和测试：

[http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20Samples](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20Samples)

我认为问题的一部分可能是我在上一页发布了一个同步示例，该示例适用于客户端和 Web 应用程序，但不适用于 WP7。

在 Windows Phone 中执行 OAuth 时的一个重要提示是，您必须将模拟器上的时钟设置为当前时间。还要注意时区，这可能会让事情变得很糟糕。OAuth 使用必须与 Twitter 服务器同步的时间戳。

我最近还修复了一些与 Twitter 最近更改相关的问题，因此如果您在其他查询中遇到问题，可下载源代码在这里，您可以在其中获取最新更改：

[http://linqtotwitter.codeplex.com/SourceControl/list/changesets](http://linqtotwitter.codeplex.com/SourceControl/list/changesets)

乔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:32:06.817

试试这个进行身份验证，它对我很有用，我在我的应用程序中使用它：

[http://igrali.com/2012/06/17/twitter-authentication-from-windows-phone-app/](http://igrali.com/2012/06/17/twitter-authentication-from-windows-phone-app/)

之后，您将获得使用此处提供的样本之一上传照片所需的信息。

请记住，您在问题中提到的第一篇博客文章是从 2010 年开始的。从那时起，Twitter 方面的情况可能已经发生了变化（并且可能已经发生了变化！）。

# android - 在 Android 中以编程方式将图像移动到图库

> ID：11354492
> 
> 赞同：2
> 
> 时间：2012-07-06T00:48:07.463
> 
> 标签：android, image, move

这个问题可能在其他地方被问过，但对我没有用。

我将图像保存在 app-private 文件夹中，用户可以选择将其移动到 Android 画廊。所以我的问题是如何做到这一点？

这是我的代码

```
String outPath = "new path which is gallery";
  File outFile = new File(outPath);
  // File (or directory) to be String                                       
sourcePath="image in the app-private folder";
  File file = new File(sourcePath);

   // Destination directory 
    boolean success = file.renameTo(new File(outFile, "name of image"));   
 System.out.println("success: "+success); 
```

这里的成功总是“假的”

# jmeter - jmeter 以秒而不是毫秒显示响应时间

> ID：11354494
> 
> 赞同：1
> 
> 时间：2012-07-06T00:48:21.500
> 
> 标签：jmeter

jmeter 中是否有设置以秒而不是毫秒显示所有值。我通常使用 excel 手动进行转换，但希望有某种方法可以自动进行转换。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:12:56.213

我能够找到一个临时解决方案。我使用了额外目录中捆绑的 xsl 文件并将显示时间部分编辑为此

```
<xsl:template name="display-time">
    <xsl:param name="value" />
    <xsl:value-of select="format-number(($value div 1000),'0 s')" />
</xsl:template> 
```

然后运行以下命令 xsltproc jmeter-results-detail.xsl results.jtl > results.html

生成的文件以秒为单位显示响应时间。

# multithreading - 在这种情况下，我是否需要一个线程安全的字符串列表来防止死锁？

> ID：11354497
> 
> 赞同：2
> 
> 时间：2012-07-06T00:48:50.627
> 
> 标签：multithreading, delphi, events, thread-safety, deadlock

我正在使用一个简单的静态线程池，其中有 4 个线程，每个线程都有一个队列，用于处理字符串列表中的各个行。在每个线程完成其队列中的一个请求后，它会同步一个事件，该事件在父线程中处理。这是通过在完成`DoComplete()`后调用来完成的，如下所示：

```
procedure TDecoderThread.DoComplete(const Line: Integer; const Text: String);
begin
  FLine:= Line;
  FText:= Text;
  Synchronize(SYNC_OnComplete);
end;

procedure TDecoderThread.SYNC_OnComplete;
begin
  if assigned(FOnComplete) then
    FOnComplete(Self, FText, FLine); //Triggers event which is handled in parent thread
end; 
```

另一方面，在它们的父线程中，这些事件通过以下过程处理：

```
procedure TDecoder.ThreadComplete(Sender: TDecoderThread; const Text: String;
  const Line: Integer);
begin
  FStrings[Line]:= Text; //Updates the original line in the list with the new text
end; 
```

由于我有 4 个不同的线程，每个线程都可能`OnComplete()`同时调用这个事件，我是否还需要担心线程保护这个`FStrings: TStrings`？`OnComplete()`写入此字符串列表时，两个线程同时触发其事件是否会导致其父线程中的死锁？或者主线程是否足够聪明，可以等到其中一个完成后再处理另一个？

PS - 是的，这个小项目是试图回答其他人在 SO 上提出的[另一个先前的问题](https://stackoverflow.com/questions/11352059/divide-work-and-assign-task-to-an-array-of-threads)，得到的答案大不相同，但为了让自己更熟悉多线程，我还是继续这个示例项目.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:06:00.740

由于`OnComplete`事件是由 触发的`Synchronize()`，因此您不需要在`FStrings`列表周围使用线程安全锁，因为对列表的所有访问都是通过主线程委托的，因此一次`OnComplete`只能实际运行一个事件处理程序。如果您不使用，则如果正在添加/删除项目并因此重新分配列表内存，或者如果其他线程正在从 读取值，而线程仍在运行，则`Synchronize()`需要这样的锁定。如果处理线程是唯一访问的线程，则不会存在并发访问单个项目的风险，因此不需要锁。`FStrings``FStrings``FStrings`

# mysql - 从保留整行的一列中删除重复项

> ID：11354500
> 
> 赞同：1
> 
> 时间：2012-07-06T00:49:08.323
> 
> 标签：mysql

```
id | userid | total_points_spent
1  | 1      | 10
2  | 2      | 15
3  | 2      | 50
4  | 3      | 5
5  | 1      | 15 
```

使用上表，我首先要删除`userid`保留最大行的重复项`total_points_spent`，如下所示：

```
id | userid | total_points_spent
3  | 2      | 50
4  | 3      | 5
5  | 1      | 15 
```

然后我想对 的值求和`total_points_spent`，这将是简单的部分，结果是`70`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:18:34.717

我不确定您的“删除”是删除还是选择。以下是仅选择 max totalpointspend 记录的查询。

```
SELECT tblA.* 
  FROM ( SELECT userid, MAX(totalpointspend) AS maxtotal
           FROM tblA
           GROUP BY userid ) AS dt
INNER JOIN tblA 
    ON tblA.userid = dt.userid
   AND tblA.totalpointspend = dt.maxtotal           
ORDER BY tblA.userid 
```

# php - 构造函数中的 PHP 访问属性

> ID：11354501
> 
> 赞同：2
> 
> 时间：2012-07-06T00:49:11.873
> 
> 标签：php, oop, constructor

我在访问构造函数中的属性时遇到问题：

```
Class MyClass{

    public $stuff   = false;

    public function __construct(){
        if($this->stuff){ echo('It works!'); }
    }

} 
```

通过以下方式调用：

```
$myclass = new MyClass;
$myclass->stuff = true; 
```

它仍然返回 false（因此没有“它有效！”）。

我知道构造函数不会看到变量，但是有没有实现这一点的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:51:34.017

在设置属性之前调用构造函数。将`if`始终评估为假。

如果要设置`MyClass::stuff`，请通过构造函数参数进行设置，例如：

```
public function __construct($stuff = false){
    if($this->stuff = $stuff){
        echo('It works!');
    }
} 
```

```
$myclass = new MyClass(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:14:43.373

我没有看到 $stuff 的意义

```
public $stuff   = false; 
```

一个实例变量，它设置为 false 并在构造函数中立即检查。这个变量不会改变，除非它被实例化。我认为您可能一直在寻找的是一个静态变量。

```
Class MyClass{

    public static $stuff = false;

    function __construct(){ // you don't have to specify the constructor as public
        if (self::$stuff){ 
           echo 'You got some stuff!'; 
        } else { 
           echo 'You ain\'t got stuff!'; 
        }
    }

}

$myclass = new MyClass(); // You ain't got stuff!

MyClass::$stuff = true;
$myclass = new MyClass(); // You got some stuff! 
```

如果它打算成为一个实例变量，那么您唯一需要的就是在子类化时

```
Class MyClass{

    public $stuff = false;

    function __construct(){ 
        if ($this->stuff){ 
           echo 'You got some stuff!'; 
        } else { 
           echo 'You ain\'t got stuff!'; 
        }
    }

}

class MySubClass extends MyClass {    
    public $stuff = true;    
}

$mysub = new MySubClass() // You got some stuff! 
```

如果您只想将东西传递给构造函数，为什么还要定义实例变量？以下内容不应该足够吗？除非您以后必须参考它，在这种情况下，蒂姆库珀的回答。

```
Class MyClass {

   function __construct($stuff = false){
      if ($stuff){ 
         echo 'You got some stuff!'; 
      } else { 
         echo 'You ain\'t got stuff!'; 
      }
   }
} 
```

# c# - Enterprise Library 5 中的 RetryPolicy 不起作用

> ID：11354507
> 
> 赞同：0
> 
> 时间：2012-07-06T00:50:46.287
> 
> 标签：c#, entity-framework, enterprise-library, azure-sql-database

我正在开发一个小型应用程序，用于将大量数据从一个数据库转换和导入到另一个数据库。为此，我使用实体框架和一些自定义扩展来一次提交一页项目，批量为 1000 个左右。由于这可能需要一段时间，我也有兴趣确保如果在运行时连接出现问题，整个事情不会停止。

[在本文](http://blogs.msdn.com/b/appfabriccat/archive/2010/12/11/sql-azure-and-entity-framework-connection-fault-handling.aspx)之后，我选择了 Enterprise Library 5.0 中的瞬态故障处理应用程序块（请参阅案例 2：具有事务范围的重试策略）。这是我以 ObjectContext 扩展形式实现的示例，它使用专注于 Sql Azure 内容的重试策略将对象添加到上下文并尝试保存它们：

```
public static void AddObjectsAndSave<T>(this ObjectContext context, IEnumerable<T> objects)
    where T : EntityObject
{
    if(!objects.Any())
        return;

    var policy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>
        (10, TimeSpan.FromSeconds(10));
    var tso = new TransactionOptions();
    tso.IsolationLevel = IsolationLevel.ReadCommitted;

    var name = context.GetTableName<T>();

    foreach(var item in objects)
        context.AddObject(name, item);

    policy.ExecuteAction(() =>
    {
        using(TransactionScope ts = new TransactionScope(TransactionScopeOption.Required, tso))
        {
            context.SaveChanges();

            ts.Complete();
        }
    });
} 
```

代码运行良好，直到我通过在运行时暂停本地 Sql Server 实例来实际测试重试策略。它几乎立即便便，这很奇怪。您可以看到我已将策略配置为每隔 10 秒重试一次；它要么忽略间隔，要么未能捕获错误。我怀疑是后者，但我是新手，所以我真的不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:36:26.780

我怀疑 SqlAzureTransientErrorDetectionStrategy 不包括您正在模拟的错误。此策略实施 SQL Azure 引发的特定错误。查看此代码以了解此策略实现了哪些错误：[http ://code.msdn.microsoft.com/Reliable-Retry-Aware-BCP-a5ae8e40/sourcecode?fileId=22213&pathId=1098196556](http://code.msdn.microsoft.com/Reliable-Retry-Aware-BCP-a5ae8e40/sourcecode?fileId=22213&pathId=1098196556)

要处理您试图捕获的错误，您可以通过实现 ITransientErrorDetectionStrategy 接口来实现自己的策略。

# php - RewriteRule 在 .htaccess 文件中不起作用

> ID：11354509
> 
> 赞同：0
> 
> 时间：2012-07-06T00:51:02.667
> 
> 标签：php, html, .htaccess, mod-rewrite, redirect

我在 Stack 上发现了几个问题，其中有很多例子，但是我已经尝试了书中的每个人，但都没有用。

我正在尝试转换。

```
www.domain.com/title/index.php?id=70048305 
```

至

```
www.domain.com/title/70048305 
```

我希望它可以双向转换。当他们使用查询字符串和干净的 url 输入时。

我的重写有什么问题？

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^title/(.+)$ index.php?id=$1 [L,QSA] 
```

我应该注意，我已将此 .htaccess 文件放在根目录和 /title/ 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:56:44.023

尝试这个

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-+/]+)$ index.php?id=$1
RewriteRule ^([a-zA-Z0-9-+/]+)/$ index.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:56:42.260

不匹配`^title/(.+)$`你只需要匹配这样的数字`^title/([\d]+)/?`

否则，

```
www.domain.com/title/index.php?id=70048305 
```

将匹配并重定向到：

```
index.php?id=index.php?id=70048305 
```

# java - 赋值的左侧必须是变量 CharAt

> ID：11354514
> 
> 赞同：1
> 
> 时间：2012-07-06T00:51:33.727
> 
> 标签：java, string, variable-assignment

我目前有以下Java代码。

```
public class lesson8
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();

        String user;
        int length, counter, spacecounter;
        spacecounter=0;
        c.print("Enter a string. ");
        user = c.readLine();

        length = (user.length()-1);

        for (counter=0;counter<length;counter++) 
        {
            if (user.charAt(counter) = "") 
            {
                spacecounter++;
            }
        }

        c.println("There are "+spacecounter+" spaces in your string.");
        c.println("There are "+counter+" characters in your string.");

        // Place your program here.  'c' is the output console
        // main method
    }
} 
```

我在这部分收到一个错误：

```
 if (user.charAt(counter) = "") 
```

错误是

> 赋值的左边必须是一个变量。

我将其更改为“==”，但现在我收到另一个错误：

> 左子表达式“char”的类型与右子表达式“java.lang.String”的类型不兼容。

我将如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T00:57:33.727

那么，之所以

```
if (user.charAt(counter) = "") 
```

给出的错误是“=”是java中的赋值运算符，所以左边必须是一个变量。话虽这么说，你可能真的想要

```
if (user.charAt(counter) == ' ') 
```

它使用比较运算符 (==) 和空格字符 (' ')。（“”是一个空字符串）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T00:54:50.373

您正在对比较运算符使用赋值。

改变

```
if (user.charAt(counter) = "") 
```

到

```
if (user.charAt(counter) == "") 
```

更新：
您在比较时也有错误。您还应该使用`single quotes ( ' )`来比较 a `char`，否则它不会被编译。

```
if (user.charAt(counter) == '') 
```

但这也不会被编译，因为没有定义*零*长度字符。
您应该比较一个有效字符，例如 ' ' 表示*空格*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:53:28.407

您想使用相等运算符`==`，而不是赋值运算符`=`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T00:54:47.037

"==" 将确保右侧的值与左侧的变量相同。

“=”是一个赋值运算符，用于给变量赋值，而不是比较它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-02T03:11:14.450

我的代码中出现了同样的错误。添加括号解决了这个错误

从改变

```
if(isNotNullorEmpty(operator)) 
                ArrayList<String> result =  getOperatorAndTypeforName(name ); 
```

到

```
if(isNotNullorEmpty(operator)){ 
                ArrayList<String> result = getOperatorAndTypeforName(name );
} 
```

# hadoop - 在 hadoop 中找不到 shell 脚本

> ID：11354516
> 
> 赞同：0
> 
> 时间：2012-07-06T00:51:42.950
> 
> 标签：hadoop, hadoop-streaming

我是 hadoop 和 hadoop 流的新手，所以这个错误可能很明显，我想念。

我运行了一个内联 awk 映射器命令，它工作正常。

```
hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-1.0.3.jar -input input -output output -mapper "/usr/bin/awk -F'\t' '\$1==\"and\"'" -reducer NONE 
```

但是，当我将 awk 命令放入文件并运行它时。我在集群中的所有机器上都得到了 Java IOException。

```
hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-1.0.3.jar -input one_to_one/part* -output 4 -mapper test.sh -reducer NONE -file test.sh 
```

测试.sh

```
/usr/bin/awk -F '\t' '(NR == 1) {print NR,OFS,$0;}' 
```

例外：

```
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:432)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 9 more
Caused by: java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
    ... 14 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 17 more
Caused by: java.lang.RuntimeException: configuration exception
    at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:230)
    at org.apache.hadoop.streaming.PipeMapper.configure(PipeMapper.java:66)
    ... 22 more
Caused by: java.io.IOException: Cannot run program "/Users/hadoop/tmp/taskTracker/hadoop/jobcache/job_201207051227_0012/attempt_201207051227_0012_m_000000_0/work/./test.sh": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:214)
    ... 23 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:59:27.557

尝试：

1.  在你的 test.sh 中添加一个 hash/she-bang：

    `#!/bin/bash`

2.  将 -file 修改为 -files

    `hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-1.0.3.jar -input one_to_one/part* -output 4 -mapper test.sh -reducer NONE -files test.sh`

# go - 应用程序自动构建版本控制

> ID：11354518
> 
> 赞同：218
> 
> 时间：2012-07-06T00:52:00.960
> 
> 标签：go

每次编译 Go 应用程序时是否可以自动增加次要版本号？

我想在我的程序中设置一个版本号，带有一个自动递增部分：

```
$ myapp -version
MyApp version 0.5.132 
```

0.5 是我设置的版本号，132 是每次编译二进制文件时自动递增的值。

这在 Go 中可能吗？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2012-07-06T03:57:34.093

Go 链接器 ( [go tool link](http://golang.org/cmd/link/) ) 有一个选项来设置未初始化的字符串变量的值：

> ```
> -X importpath.name=value
>   Set the value of the string variable in importpath named name to 
> ```

价值。请注意，在 Go 1.5 之前，此选项采用两个单独的参数。现在它需要在第一个 = 符号上拆分一个参数。

作为构建过程的一部分，您可以使用它设置版本字符串变量。您可以`go`使用`-ldflags`. 例如，给定以下源文件：

```
package main

import "fmt"

var xyz string

func main() {
    fmt.Println(xyz)
} 
```

然后：

```
$ go run -ldflags "-X main.xyz=abc" main.go
abc 
```

为了`main.minversion`在构建时设置构建日期和时间：

```
go build -ldflags "-X main.minversion=`date -u +.%Y%m%d.%H%M%S`" service.go 
```

如果您在没有`main.minversion`以这种方式初始化的情况下进行编译，它将包含空字符串。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-09-07T20:48:42.073

另外，我想发布一个如何使用 git 和 makefile 的小示例：

```
--- Makefile ----

# This how we want to name the binary output
BINARY=gomake

# These are the values we want to pass for VERSION and BUILD
# git tag 1.0.1
# git commit -am "One more change after the tags"
VERSION=`git describe --tags`
BUILD=`date +%FT%T%z`

# Setup the -ldflags option for go build here, interpolate the variable values
LDFLAGS_f1=-ldflags "-w -s -X main.Version=${VERSION} -X main.Build=${BUILD} -X main.Entry=f1"
LDFLAGS_f2=-ldflags "-w -s -X main.Version=${VERSION} -X main.Build=${BUILD} -X main.Entry=f2"

# Builds the project
build:
    go build ${LDFLAGS_f1} -o ${BINARY}_f1
    go build ${LDFLAGS_f2} -o ${BINARY}_f2

# Installs our project: copies binaries
install:
    go install ${LDFLAGS_f1}

# Cleans our project: deletes binaries
clean:
    if [ -f ${BINARY} ] ; then rm ${BINARY} ; fi

.PHONY: clean install 
```

make 文件将创建两个可执行文件。一种是执行功能一，另一种是以功能二为主入口：

```
package main

import (
        "fmt"
)

var (

        Version string
        Build   string
        Entry   string

        funcs = map[string]func() {
                "f1":functionOne,"f2":functionTwo,
        }

)

func functionOne() {
    fmt.Println("This is function one")
}

func functionTwo() {
    fmt.Println("This is function two")
}

func main() {

        fmt.Println("Version: ", Version)
        fmt.Println("Build Time: ", Build)

    funcs[Entry]()

} 
```

然后运行：

```
make 
```

你会得到：

```
mab@h2470988:~/projects/go/gomake/3/gomake$ ls -al
total 2020
drwxrwxr-x 3 mab mab    4096 Sep  7 22:41 .
drwxrwxr-x 3 mab mab    4096 Aug 16 10:00 ..
drwxrwxr-x 8 mab mab    4096 Aug 17 16:40 .git
-rwxrwxr-x 1 mab mab 1023488 Sep  7 22:41 gomake_f1
-rwxrwxr-x 1 mab mab 1023488 Sep  7 22:41 gomake_f2
-rw-rw-r-- 1 mab mab     399 Aug 16 10:21 main.go
-rw-rw-r-- 1 mab mab     810 Sep  7 22:41 Makefile
mab@h2470988:~/projects/go/gomake/3/gomake$ ./gomake_f1
Version:  1.0.1-1-gfb51187
Build Time:  2016-09-07T22:41:38+0200
This is function one
mab@h2470988:~/projects/go/gomake/3/gomake$ ./gomake_f2
Version:  1.0.1-1-gfb51187
Build Time:  2016-09-07T22:41:39+0200
This is function two 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-03-10T18:02:00.397

# 用于`ldflags`设置`main`包中的变量：

带文件`main.go`：

```
package main

import "fmt"

var (
    version string
    build   string
)

func main() {
    fmt.Println("version=", version)
    fmt.Println("build=", build)
} 
```

然后运行：

```
go run \
  -ldflags "-X main.version=1.0.0 -X main.build=12082019" \ 
  main.go 
```

建造：

```
go build -o mybinary \
  -ldflags "-X main.version=1.0.0 -X 'main.build=$(date)'" \ 
  main.go 
```

* * *

# 用于`ldflags`在`non-main`包中设置变量：

带文件`config.go`：

```
package config

import "fmt"

var (
    Version string
)

func LogVersion() {
    fmt.Println("version=", Version)
} 
```

您还需要文件`main.go`：

```
package main

import (
    "fmt"
    "github.com/user/repo/config"
}

func main() {
    config.LogVersion()
} 
```

首先构建你的二进制文件：

```
go build -o mybinary main.go 
```

找到要设置的变量名的完整路径：

```
go tool nm <path_to_binary> | grep Version 
```

再次运行并构建二进制文件，但使用`ldflags`：

```
go run \
  -ldflags "-X github.com/user/repo/config.Version=1.0.0" \
  main.go --version       

go build -o mybinary \
  -ldflags "-X github.com/user/repo/config.Version=1.0.0" \
  main.go 
```

* * *

灵感来自[https://github.com/golang/go/wiki/GcToolchainTricks#include-build-information-in-the-executable](https://github.com/golang/go/wiki/GcToolchainTricks#including-build-information-in-the-executable)

* * *

另外，如果您正在使用`goreleaser`，请阅读此[https://goreleaser.com/environment/#using-the-mainversion](https://goreleaser.com/environment/#using-the-mainversion)：

> 默认明智的 GoReleaser 设置三个 ldflags：
> 
> main.version：当前 Git 标记 main.commit
> ：当前 git commit SHA
> main.date：根据 RFC3339 的日期

* * *

如果你想看到这个在行动：[https ://github.com/hoto/fuzzy-repo-finder/blob/master/pkg/config/config.go](https://github.com/hoto/fuzzy-repo-finder/blob/master/pkg/config/config.go)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-07-28T20:26:32.677

在构建混合的命令行应用程序和库项目时，我无法使用该`-ldflags`参数，因此我最终使用 Makefile 目标来生成包含我的应用程序版本和构建日期的 Go 源文件：

```
BUILD_DATE := `date +%Y-%m-%d\ %H:%M`
VERSIONFILE := cmd/myapp/version.go

gensrc:
    rm -f $(VERSIONFILE)
    @echo "package main" > $(VERSIONFILE)
    @echo "const (" >> $(VERSIONFILE)
    @echo "  VERSION = \"1.0\"" >> $(VERSIONFILE)
    @echo "  BUILD_DATE = \"$(BUILD_DATE)\"" >> $(VERSIONFILE)
    @echo ")" >> $(VERSIONFILE) 
```

在我的`init()`方法中，我这样做：

```
flag.Usage = func() {
    fmt.Fprintf(os.Stderr, "%s version %s\n", os.Args[0], VERSION)
    fmt.Fprintf(os.Stderr, "built %s\n", BUILD_DATE)
    fmt.Fprintln(os.Stderr, "usage:")
    flag.PrintDefaults()
} 
```

但是，如果您想要一个原子增加的构建号而不是构建日期，您可能需要创建一个包含最后一个构建号的本地文件。您的 Makefile 会将文件内容读入一个变量，将其递增，将其插入`version.go`文件而不是日期，然后将新的内部版本号写回文件。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-07-22T20:20:39.847

在给定以下程序的 Windows 操作系统上

```
package main

import "fmt"

var (
    version string
    date    string
)

func main() {
    fmt.Printf("version=%s, date=%s", version, date)
} 
```

您可以使用构建

```
go build -ldflags "-X main.version=0.0.1 -X main.date=%date:~10,4%-%date:~4,2%-%date:~7,2%T%time:~0,2%:%time:~3,2%:%time:~6,2%" 
```

日期格式假设您的环境`echo %date%`是`Fri 07/22/2016`并且`echo %time%`是`16:21:52.88`

然后输出将是：`version=0.0.1, date=2016-07-22T16:21:52`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-06-18T02:29:38.920

使用多`-ldflags`：

```
$ go build -ldflags "-X name1=value1 -X name2=value2" -o path/to/output 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-15T00:13:23.250

在其他答案的基础上，使用最近的 go 版本，还可以将 buildid 写入 ELF 部分——尽管从程序中读取它并不容易。

我使用以下内容向两者写入相同的值：

```
BuildInfo:= "BUILD #x, branch @ rev built yymmdd hh:mm:ss"
// note the nested quotes "''" required to get a string with 
// spaces passed correctly to the underlying tool
ldFl := fmt.Sprintf("-X 'main.buildId=%s' -s -w '-buildid=%s'", BuildInfo, BuildInfo)
args := []string{
    "build",
    "-ldflags", ldFl,
    "-trimpath",
    "-gcflags", "-dwarf=false",
}
buildpath:="path/to/my/cmd"
args=append(args,buildpath)
buildCmd:=exec.Command("go", args...) 
```

我将它与`mage`用 go 编写的构建工具一起使用。您不需要上面的额外标志，但我选择这些标志是为了从发布二进制文件中删除尽可能多的信息。

（题外话：Mage 比 Make 之类的东西需要更多的前期工作，但比基于 make 的构建系统更容易扩展/维护——另外，你不必在 go 和其他语法之间切换心理齿轮。）

# python - BeautifulSoup 无法正确读取文档

> ID：11354521
> 
> 赞同：1
> 
> 时间：2012-07-06T00:52:32.853
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试抓取 NBA 球员的统计数据，目的是对他们进行一些机器学习，我发现这些“可打印的球员文件”有一堆漂亮而整洁的统计数据。不幸的是，我正在尝试使用 BeautifulSoup 来解析 html，但它根本不起作用。例如：

```
from bs4 import BeautifulSoup
import codecs
import urllib2

url = 'http://www.nba.com/playerfile/ray_allen/printable_player_files.html'
html = urllib2.urlopen(url).read()
soup = BeautifulSoup(html)

with open('ray_allen.txt', 'w') as f:
    f.write(soup.prettify())
    f.close() 
```

给我一个看起来像这样的文件：

```
<html>
 <head>
  <!--no description was found-->
  <!--no title was found-->
  <!--no keywords found-->
  <!--not article-->
  <script>
   var site = "nba";
var page = "player";
  </script>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <script language="Javascript">
   &lt;!--
var flashinstalled = 0;
var flashversion = 0;
MSDetect = "false";
if (navigator.plugins &amp;&amp; navigator.plugins.length) {
    x = navigator.plugins["Shockwave Flash"];
    if (x) {
        flashinstalle   d       =       2   ;   

           i   f       (   x   .   d   e   s   c   r   i   p   t   i   o   n   )       {   

               y       =       x   .   d   e   s   c   r   i   p   t   i   o   n   ;   

               f   l   a   s   h   v   e   r   s   i   o   n       =       y   .   c   h   a   r   A   t   (   y   .   i   n   d   e   x   O   f   (   '   .   '   )   -   1   )   ;   

           }   

       }       e   l   s   e   

           f   l   a   s   h   i   n   s   t   a   l   l   e   d       =       1   ;   

       i   f       (   n   a   v   i   g   a   t   o   r   .   p   l   u   g   i   n   s   [   "   S   h   o   c   k   w   a   v   e       F   l   a   s   h       2   .   0   "   ]   )       {   

           f   l   a   s   h   i   n   s   t   a   l   l   e   d       =       2   ;   

           f   l   a   s   h   v   e   r   s   i   o   n       =       2   ;   

       }   
[...] 
```

然后继续进行另外 3000 多行，然后完成（我添加了 [...]）：

```
[...]
   &lt;   /   b   o   d   y   &gt;   

   &lt;   /   h   t   m   l   &gt;
  </script>
 </head>
</html> 
```

我还尝试了“http://www.basketball-reference.com/players/a/allenra02.html”，但那个给了我这个错误：

> 回溯（最后一次调用）：文件“test.py”，第 9 行，在 f.write(soup.prettify()) UnicodeEncodeError：'ascii' 编解码器无法在位置 6167 编码字符 u'\xb7'：序数不在范围内(128)

也许我应该使用其他东西来解析 html？还是这些问题之一很容易解决？我在这里读到的内容似乎表明使用 BeautifulSoup 对我来说应该让事情变得容易而不是困难！

编辑：行：

```
print soup.prettify() 
```

适用于终端的第二页，所以当它尝试写入文件时会发生一些事情——这不是 BeautifulSoup 的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:48:19.137

这与在 4.0.3 中修复的[错误 972466](https://bugs.launchpad.net/beautifulsoup/+bug/972466)呈现相同的症状。我建议升级到 Beautiful Soup 4 的最新版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T02:08:21.303

这看起来像是 BeautifulSoup 4 中的一个错误。

`from bs4 import BeautifulSoup`我通过更改为使用 BeautifulSoup 3（在 Ubuntu 中打包）尝试了您的代码`from BeautifulSoup import BeautifulSoup`，并且它按预期工作。当我使用 v4（运行代码不变）时，我重现了您的问题。该错误似乎在解析器中而不是在`prettify`因为打印`soup`对象显示相同的问题。

[请在https://bugs.launchpad.net/beautifulsoup/](https://bugs.launchpad.net/beautifulsoup/)将其作为错误提交。同时，使用版本 3。

# javascript - HTML5/JavaScript 2.5D - 在自己的平面上建立基础

> ID：11354522
> 
> 赞同：4
> 
> 时间：2012-07-06T00:52:51.327
> 
> 标签：javascript, html, 3d, 2d, 2.5d

所以，我真的很想开始一个模仿这种 2.5D 风格的 HTML5/JavaScript 项目：http: [//superflashbros.net/2009/02/22/blue-rabbits-climate-chaos/](http://superflashbros.net/2009/02/22/blue-rabbits-climate-chaos/)

我个人试图远离第三方脚本，只保留代码的核心纯 JavaScript。但是，我对三角的了解并不是最好的，那么解决这个观点的最合适的方法是什么？我本质上想要一个用 2D 精灵制作的游戏，但是地平面（可能还有建筑物，如 Flash 游戏）被倾斜以赋予它 3D 感觉。我不想制作“模式 7”引擎（即像马里奥赛车这样的 SNES 游戏），因为据我了解，它是分段绘制的。

我应该研究任何建议或资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T05:45:34.610

我只要求您阅读更多有关此的内容，并且您知道，我尝试做这个并且取得了不错的结果，但是由于我的新工作，我停止了该项目。

无论如何，您可以查看一些用 javascript 编写的游戏引擎，供初学者参考，以下是您可能会感兴趣的知名游戏引擎列表：

1-[三.Js](https://github.com/mrdoob/three.js/)

2- [GameQuery（JQuery 插件）](http://gamequeryjs.com/)

3-[等基因发动机](http://www.isogenicengine.com/)

您还可以查看这篇博文了解更多信息[66+ 面向严肃开发者的开源 JavaScript 游戏引擎](http://ntt.cc/2011/01/31/66-open-source-javascript-game-engine-for-serious-developers.html)

**注意：** 我知道您喜欢编写自己的 javascript 并相信我这是一个**非常好的**习惯，但是我的建议是至少尝试一个 Javascript 游戏引擎（如果您可以尝试多个，那会很好）看看如何不同的引擎工作以及它们如何在引擎盖下运行，我的朋友会启发您并帮助您了解这些引擎，甚至制作自己的引擎（这**并非**不可能）。

我并不是说您应该尽可能多地尝试（因为这显然毫无意义），但我告诉您使用选择的引擎制作小型（如果可能的话）游戏，我的意思是了解 Javascript 如何游戏引擎在 2D 中工作，然后使用 WebGL 技术转移到 2.5D 甚至 3D。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T04:17:04.427

我检查了你的参考游戏，明白你所说的“2.5D”是什么意思。据我了解，解决此问题的最佳方法是通过转换对象的 x,y 坐标来创建伪三维。您将拥有一个为您进行转换的函数，这是我对示例的最佳猜测。

```
// This function takes in a x- and y-coordinates of an object corner and returns the
// coordinates of the corresponding back corner of an object.
var transform = function(x,y) {
  // The farther the character is from the object, the more skew there would be.
  // Here "char" is your globally recognized game character. If it was not in the scope
  // of the function you'd have to pass it as a parameter.
  var skew = (char.x > x) ? (char.x - x) : (x - char.x);
  var newx = (skew * 0.1); // obviously this would be variable depending on your liking

  // If the object corner is not on the ground (y == 0) then subtract from it's value,
  // otherwise add.
  var newy = (y > 0) ? (y - 10) : (y + 10);
}; 
```

在我的示例`10`中，是更改 y 坐标的距离单位数量。这就是您的示例游戏的表现方式。希望我的意见有帮助

里根

# google-app-engine - WebOb 0.9 在 WebOb 1.1.1 之前的 sys.path 上

> ID：11354523
> 
> 赞同：3
> 
> 时间：2012-07-06T00:52:53.820
> 
> 标签：google-app-engine

我正在构建一个 GAE python 2.7 应用程序。在调试过程中，我注意到 webapp2 使用的 Request 类是基于 webob 0.9 中的类，而不是我在 app.yaml 中指定的版本：

```
libraries:
- name: webob
  version: "1.1.1"
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: "2.6" 
```

问题似乎在于 dev_appserver.py 修改了 sys.path，在读取 app.yaml 之前添加了各种第三方库，因此不知道要添加到 sys.path 的版本（如果有）。例如：

```
EXTRA_PATHS = [
  DIR_PATH,
  os.path.join(DIR_PATH, 'lib', 'antlr3'),
  os.path.join(DIR_PATH, 'lib', 'django_0_96'),
  os.path.join(DIR_PATH, 'lib', 'fancy_urllib'),
  os.path.join(DIR_PATH, 'lib', 'ipaddr'),
  os.path.join(DIR_PATH, 'lib', 'jinja2'),
  os.path.join(DIR_PATH, 'lib', 'protorpc'),
  os.path.join(DIR_PATH, 'lib', 'PyAMF'),
  os.path.join(DIR_PATH, 'lib', 'markupsafe'),
  os.path.join(DIR_PATH, 'lib', 'webob_0_9'),
  os.path.join(DIR_PATH, 'lib', 'webapp2'),
  os.path.join(DIR_PATH, 'lib', 'yaml', 'lib'),
  os.path.join(DIR_PATH, 'lib', 'simplejson'),
  os.path.join(DIR_PATH, 'lib', 'google.appengine._internal.graphy'),
] 
```

我正在寻找解决方法；现在我将修改我的本地 dev_appserver.py 副本，但下次升级时它会被清除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:08:33.140

1）您可以使用devappserver2。（devappserver2 现在是实验性的，但不支持 Python 2.5）

```
import devappserver2
devappserver2.fix_sys_path() 
```

将`devappserver2.fix_sys_path`webob-1.2.3、webapp2-2.5.1 和 jinja2-2.6 添加到 sys.path。

[https://code.google.com/p/appengine-devappserver2-experiment/](https://code.google.com/p/appengine-devappserver2-experiment/)

或者

2) Google App Engine 1.7.6 预发布 SDK 可用。

[https://groups.google.com/forum/?fromgroups=#!topicsearchin/google-appengine/webob/google-appengine/qyT3mvTd2RU](https://groups.google.com/forum/?fromgroups=#!topicsearchin/google-appengine/webob/google-appengine/qyT3mvTd2RU)

它解决了这个问题。

> *   修复了新的 dev_appserver 的问题，让 fix_sys_path 将必要的库添加到 sys.path 使其现在与测试平台兼容。 [https://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=45](https://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=45)

# android - Android/Facebook - 为什么 Facebook 登录页面一直在变化？

> ID：11354527
> 
> 赞同：2
> 
> 时间：2012-07-06T00:53:26.320
> 
> 标签：android, facebook, image, login, screen

从昨天开始，我在使用 Facebook API 的 Android 应用程序中加载的 Facebook 登录页面似乎一直在变化。有时我会得到这个屏幕（这是我一直得到的）：

![Facebook_Screen_1](../Images/02f264f91acda53965127cd0c654edb5.png)

但现在，有时，我会看到这个屏幕：

![Facebook_Screen_2](../Images/c88389ece00c0a87fc9d2154240c6824.png)

我不知道发生了什么。我只是使用 WebView 加载登录屏幕，代码如下：

```
 LinearLayout webViewContainer = new LinearLayout(getContext());
    mWebView = new WebView(getContext());
    mWebView.setVerticalScrollBarEnabled(false);
    mWebView.setHorizontalScrollBarEnabled(false);
    mWebView.setWebViewClient(new FbDialog.FbWebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl(mUrl);
    mWebView.setLayoutParams(FILL);
    mWebView.setVisibility(View.INVISIBLE);

    webViewContainer.setPadding(margin, margin, margin, margin);
    webViewContainer.addView(mWebView);

    mContent.addView(webViewContainer, new LayoutParams(400, 550)); 
```

有没有人知道发生了什么？从昨天开始还有其他人遇到同样的问题吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:11:57.697

他们可能正在 A/B 测试一个新的登录屏幕。因此提到了“替代登录”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:16:56.157

据我所知，它实际上是一个通过用户代理定向的链接。两者之间呈现的页面不同。具体来说，第一个是移动网站，而另一个网站是桌面版。尝试使用用户代理并对其进行硬编码以使用移动版本。

# android - Android SQLite - 无法访问除 sql_master 表之外的表

> ID：11354530
> 
> 赞同：1
> 
> 时间：2012-07-06T00:53:31.247
> 
> 标签：android, database, sqlite, cursor

这是我的代码

```
 String queryTenants = "select * from tenants";
       String queryProperties = "select * from properties";
       String queryLeases = "select * from leases";
       String queryPayments = "select * from payment_history ";
       String queryCredit = "select * from credit_standing";
       String queryMaster = "select * from sqlite_master";

       Cursor curT=myDataBase.rawQuery(queryTenants,null);
       Cursor curP=myDataBase.rawQuery(queryProperties,null);
       Cursor curL=myDataBase.rawQuery(queryLeases,null);
       Cursor curPa=myDataBase.rawQuery(queryPayments,null);
       Cursor curC=myDataBase.rawQuery(queryCredit,null);
       Cursor curM=myDataBase.rawQuery(queryMaster,null);

       curT.moveToFirst();
       curP.moveToFirst();
       curL.moveToFirst();
       curPa.moveToFirst();
       curC.moveToFirst();
       curM.moveToFirst();curso

       System.out.println("Tenanst" + curT.getCount());
       System.out.println("Properties" + curP.getCount());
       System.out.println("Leases" + curL.getCount());
       System.out.println("Payments"+curPa.getCount());
       System.out.println("Credit"+curC.getCount());
       System.out.println("Master" + curM.getCount()); 
```

每个表的每个 cursor.count 返回 0，除了主表。使用 SQLite 浏览器，我可以清楚地看到其他表填充了行和列，但我无法访问它们。请帮忙

# c++ - 从客户端应用程序调试到动态库

> ID：11354535
> 
> 赞同：2
> 
> 时间：2012-07-06T00:54:14.867
> 
> 标签：c++, windows, linux, dll, shared-libraries

假设我在调试模式下编译了一个动态库（Windows DLL 和/或 Linux 共享对象文件，.so）以供动态链接到它的客户端应用程序使用。我的源代码可供客户端应用程序开发人员使用。

我需要对以下调试场景进行一些说明。我一直理解/假设为了让客户端应用程序调试到我的库中（例如，为了让客户端应用程序开发人员在调试时进入我的源代码，比如说使用`F10`in `MS VC++`），他们实际上必须自己构建了我的库的本地副本（可以访问我的源代码），或者至少可以在本地访问我的源代码而无需构建它（不确定这是否足够？）。

我说得对吗？换句话说，如果客户端应用程序动态链接到我自己动态构建的应用程序，我认为仅仅为库提供调试符号（MS VC++ 中的 PDB 文件）是不够的。感谢是否有人可以帮我解决这个问题？Linux 的情况如何？我的理解又和上面一样。现在，如果我编译了一个静态库（Windows LIB 和/或 Linux 库 .a）；我的理解是，他们不需要我的源代码的本地构建副本（我还没有尝试过这个）？

我的前提是否正确？如果没有，有人可以提供一些详细的解释，最好用一个例子吗？感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:19:48.540

I have more experience with Windows than linux. But I would think the concept is similar.

> if the client application is linking dynamically to my application which has itself been built dynamically.

I'm not quite sure if I understand "building dynamically". You might be confused with the dynamic aspect of dll? dll is linked at runtime (not build time) to allow a part of component to be deployed without a full app. For example, an app on Windows that rely on a dll provided by the OS are not impacted when Windows updates that dll as long as the interface is maintained. The only difference between a dll and exe is that dll's entry function is dllmain as opposed to main in exe.

(The only "dynamic build" concept I can think of is building templated classes. But I don't think that's what you mean here.)

Hence, debugging a .dll isn't different from debugging a .exe, it's just that .dll is a separate binary file from the executable. All the source code provide is allowing debugger to align the stepping with lines in source code. When source code is not available, then debugger can still step through assembly code with symbols.

When situation doesn't allow, then developers who are good at reading assembly code can do debugging with only symbols and no source code.

You can usually build a binary with optimized option, then compiler might optimize the assembly code so much that source code alignment in the debugger might not be possible. This usually happens with released code. In those cases when you step through the code, you sometimes see the line or condition jumps that are seemingly different from what you would expect. There is the same on .exe, .exe with libs, or .dll. This is probably why you thought it is always necessary to build your own binary to debug dlls?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:35:02.213

根据要求，这是我的评论作为答案。由于它只解决了 Windows 方面的问题，任何拥有 Linux（或 Mac！）部分答案的人都可以自由编辑它（我已将此标记为社区 wiki 答案）。

* * *

对于 VC++，只需要调试构建 DLL + 匹配 PDB + 匹配源即可。困难的部分是让他们都匹配;-)

此外，如果源文件与编译 DLL 时的路径相同，它会更顺利地工作，但 Visual Studio 也完全能够提示您手动浏览源文件（如果有的话）。

# python - 从 Python 文件中读取包含整数的行？

> ID：11354544
> 
> 赞同：12
> 
> 时间：2012-07-06T00:55:20.837
> 
> 标签：python, file-io, casting

我有这样的文件格式：

```
9 8 1
3 4 1
...
... 
```

现在，我想将每一行作为三个整数。

当我使用

```
for line in f.readlines():
    print line.split(" ") 
```

脚本打印了这个：

```
['9', '8', '1\r\n']
['3', '4', '1\r\n']
...
... 
```

如何将每一行作为三个整数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T00:56:26.950

使用您拥有的代码并解决如何将列表转换为整数的具体问题：

您可以遍历每一行并将字符串转换为`int`使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)的以下示例：

鉴于：

```
line =['3', '4', '1\r\n'] 
```

然后：

```
int_list = [int(i) for i in line] 
```

将产生一个整数列表

```
[3, 4, 1] 
```

然后您可以通过下标（0 到 2）访问。例如

`int_list[0]`包含`3`,

`int_list[1]`包含`4`,

等等

* * *

一个更精简的版本供您考虑：

```
with open('data.txt') as f:
    for line in f:
        int_list = [int(i) for i in line.split()]
        print int_list 
```

使用的好处`with`是，它会在您完成或遇到异常时自动为您关闭文件。

**更新**：

根据您在下面的评论，如果您想要 3 个不同变量中的数字，例如`a`和`b`，`c`您可以执行以下操作：

```
 for line in f:
       a, b, c = [int(i) for i in line.split()]
       print 'a = %d, b = %d, c = %d\n' %(a, b, c) 
```

得到这个：

```
 a = 9, b = 8, c = 1 
```

这取决于每行有 3 个数字。

*在旁边：*

请注意，您还可以使用以下形式的“生成器表达式”（GE）代替“列表理解”（LC）：

```
 a, b, c = (int(i) for i in line.split()) 
```

对于您使用 3 个整数的特殊问题，这并没有太大的区别，但为了完整性，我将其展示出来。对于较大的问题，LC需要更多的内存，因为它会一次在内存中生成一个完整的列表，而GE则根据需要一个一个地生成一个值。如果您好奇，这个 SO 问题[Generator Expressions vs. List Comprehension将为您提供更多信息。](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T00:59:46.060

```
with open("myfile.txt") as f:
    for line in f:
        int_list = [int(x) for x in line.split()] 
```

你没有说你想对整数列表做什么，可能有更好的方法来迭代它们，这取决于。

如果您“需要将值作为三个不同的变量”，那么“

```
a, b, c = int_list 
```

虽然你也可以使用：

```
int_list[0]
int_list[1]
int_list[2] 
```

如预期的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:59:12.480

```
line.strip().split(" ") 
```

会做。

更完整，所有行在一个大字符串中仍然完好无损：

```
data = f.read().strip()    # loose final \n
[ int(x.split(" ")) for x in data.split('\n')] 
```

会给你一个列表，其中包含你想要的每一行的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T01:01:25.550

这段代码应该可以解决您的问题：

```
f = open(filepath)
for line in f:
    intList = map(int, line.strip().split())
    print intList
f.close() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T01:16:07.077

如果您想将整数存储在三个变量中：

```
with open('data1.txt') as f:
    for line in f:
        a,b,c=(int(x) for x in line.split()) 
        print a,b,c 
```

**输出：**

```
9 8 1
3 4 1 
```

# ios - 用于“查找我的朋友”功能的 iOS API

> ID：11354546
> 
> 赞同：4
> 
> 时间：2012-07-06T00:55:55.703
> 
> 标签：ios, api, social

我想利用 iOS（5.x 和/或更早版本）的“查找我的朋友”功能，但没有找到任何 API 来为开发人员支持此功能。有谁知道是否/在哪里可以在文档中找到功能挂钩？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T01:03:28.513

我不确定您是否要求 API 直接利用 Find My Friends 功能，或者您是否要求类似的东西，但 Find My Friends 是一个应用程序，而不是 API，Apple 没有提供任何 API 或库以将一个人的应用程序与 Find My Friends 集成。我相信您可以使用[Core Location](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocation_Framework/_index.html)框架实现您自己的 Find My Friends 类型的应用程序。

您也可以查看[位置感知编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)，了解如何获取用户的位置、获取与方向相关的事件等。

还有一个名为“[如何制作类似于 Apple 的 Find My Friends 的应用程序](http://www.linkedin.com/groups/How-make-app-simliar-Apples-72283.S.113130561)”的 LinkedIn 讨论，其中包含一些有用的信息，说明您将如何实现类似于 Find My Friends 功能的功能。

希望这可以帮助！

# z3 - 定义自定义量词

> ID：11354548
> 
> 赞同：2
> 
> 时间：2012-07-06T00:56:12.087
> 
> 标签：z3, quantifiers

我试图让 Z3 验证一些在符号中使用迭代最大值的正式证明。例如，对于 fa 函数 (↑i: 0 ≤ i < N: f(i)) 指定 f 在应用于 0 和 N 之间的值时的最大值。它可以很好地公理化为：

(↑i: p(i): f(i)) ≤  x <=> (∀i: p(i): f(i) ≤ x)

在 i 的类型上使用 pa 谓词。有没有办法在 Z3 中定义这样的量词？

制定我的证明非常方便，所以我想尽可能地接近这个定义。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:18:23.780

在 Z3 中没有直接定义此类绑定器的方法。Z3 基于经典的简单排序一阶逻辑，其中唯一的绑定器是通用和外部量化。特别是，Z3 不允许您直接编写 lambda 表达式。使用包含嵌套绑定器的 Z3 证明定理的一种方法是首先应用 lambda-lifting，然后尝试证明得到的一阶公式。

在您的示例中，您想定义一个常量 max_p_f。具有以下属性：

```
forall i: p(i) => max_p_f >= f(i)
(exists i: p(i) & max_p_f = f(i)) or (forall i . not p(i)) 
```

说（假设在域上定义了上界等）您必须为要应用 max 函数的每个 p,f 组合创建常量。

定义这样的函数是高阶逻辑证明助手的标准。Isabelle 定理证明器在将证明义务映射到一阶后端（E、Vampire、Z3 等）时应用类似于上述的转换。

# c++ - c++eclipse错误错误解释

> ID：11354559
> 
> 赞同：10
> 
> 时间：2012-07-06T00:57:17.437
> 
> 标签：c++, eclipse

我在使用 Eclipse C++ 时遇到问题。我的项目编译并运行，但 eclipse (juno) 一直说有数千个错误。例如，我的代码中有一个函数 SetRun，eclipse 提到了这个错误：“调用无效参数'候选者是：void SetRun(?)'”，而 SetRun 的类型是 static void SetRun (uint32_t run);

我有很多类似的错误，其中eclipse似乎不理解函数的类型并放了一个'？反而。

我也有很多这样的错误：“符号'*'无法解析。”

我认为这都是同一个问题的一部分。

我该怎么做才能让 eclipse 停止告诉我这些错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T07:51:01.443

我尝试了建议的解决方案，但它对我不起作用。帮助关闭项目的代码分析。我去了属性-> C/C++ 通用-> 代码分析。选择使用项目设置并关闭所有错误。这当然是非常烦人和不幸的，我很高兴知道它何时得到正确修复。遗憾的是，我们无法使用任何其他体面的 IDE 所具有的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T01:08:32.487

实际上 Eclipse 是某种不稳定的项目。尝试清理和刷新项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-18T16:37:36.827

在 Eclipse 中：

*   右键项目，
*   点击属性
*   通过单击箭头在左侧树视图中展开*“C/C++ 常规”项目，（仅单击项目本身不会展开子选项）*
*   从子选项中选择*“预处理器包括路径、宏等”。*
*   单击选项卡*“Providers”并选中**“CDT GCC Built-in Compiler Settings [Shared]”*旁边的框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T17:32:37.347

在试图让 CODAN 运行一些用于 Mac 的代码时，我遇到了很多这样的错误。我的 Mac SDK 库是通过符号链接包含在[这个问题](https://stackoverflow.com/questions/8067329/how-to-include-apple-frameworks-on-eclipse-cdt)中的（但不是全部 - 请继续关注！）最后，结果证明我没有包含所有标题。例如，我有以下函数调用：

```
IORegistryEntryGetParentEntry(service, kIOServicePlane, &parent); 
```

这给出了错误：

```
Invalid arguments 'Candidates are: ? IORegistryEntryGetParentEntry(?,?,?)' 
```

`IOKit/IOKitLib.h`现在，在（我确实有）中定义的函数的正确签名是：

```
kern_return_t IORegistryEntryGetParentEntry(
    io_registry_entry_t     entry,
    const io_name_t         plane,
    io_registry_entry_t    *parent ); 
```

现在，如果我们采用第一个参数并跟踪类型定义，我们会得到：

```
typedef io_object_t         io_registry_entry_t; (in IOKit/IOTypes.h)
typedef mach_port_t         io_object_t; (in IOKit/IOTypes.h)
typedef mach_port_name_t    mach_port_t; (in mach/port.h)
typedef natural_t           mach_port_name_t; (in mach/port.h) 
```

进而！我没有包含定义的`__darwin_natural_t`。这个包含实际上是`i386`在我的符号链接目录中没有的。添加它完成了链：

```
typedef __darwin_natural_t  natural_t; (in i386/vm_types.h)
typedef unsigned int        __darwin_natural_t; (in i386/_types.h) 
```

最后，CODAN 知道参数 1`IORegistryEntryGetParentEntry()`应该是什么类型，错误变为：

```
Invalid arguments 'Candidates are: kern_return_t IORegistryEntryGetParentEntry(io_registry_entry_t ,?,io_registry_entry_t*)' 
```

我对其他参数重复了这个“类型跟踪”，发现错误消失了（我什至不需要重建索引，但是 YMMV）。当然，您需要找到您需要的标头，并确保*它们*已包含在内 - 以上只是一个示例！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-30T15:24:15.087

我在一些功能上也遇到了同样的问题。事实证明，在几次 typedef 之后，参数是一个 __int64，它没有定义（不是标准的）。我只需要在我的项目中定义它，这就解决了问题。

Project->Properties->C/C++ General->Paths and Symbols->Symbols->C++ Source File->add

名称：__int64

值：长长

（或者代替“long long”也许你可以使用[这个答案](https://stackoverflow.com/a/2221618/773334 "使用 __int64")中的一个值）

编辑：

顺便说一句，我在 Eclipse bugzilla 中看到了关于这个问题的错误报告，所以将来可能不需要定义 __int64

# iphone - 如何构造CoreData谓词以获取location.name =“ABC”的所有活动（带位置）？

> ID：11354566
> 
> 赞同：0
> 
> 时间：2012-07-06T00:57:59.897
> 
> 标签：iphone, ios, database, sqlite, core-data

在我的数据模型中，我有：

```
Activity(name, sponsor, Location*) // one activity may have many Locations
Location(name, street, suburb, state, postcode) 
```

而且我需要一种方法来获取具有指定位置名称的活动，例如，用户想知道“ICT Building”中的所有活动，那么如何构造查询的谓词？

就像是：

```
"Location.name == ICT Building" ? 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:04:44.230

`managedObjectContext`在您的上下文中使用它：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
    entityForName:@"Activity" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
NSString *locationName = @"ICT Building";
NSPredicate *pred = [NSPredicate predicateWithFormat:@"Location.name CONTAINS %@", locationName];
[fetchRequest setPredicate:pred];
NSError *error = nil;
NSArray *objects = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

这将返回一个包含托管对象的数组，其中名称为 ICT Building。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:26:41.510

我终于弄明白了。改变

```
@"Location.name == %@" 
```

到

```
@"Location.name CONTAINS %@" 
```

在@CoreCode 的回答中。

# facebook - 关键字统计的批量请求？

> ID：11354570
> 
> 赞同：1
> 
> 时间：2012-07-06T00:58:45.067
> 
> 标签：facebook, batch-processing, keywordstats

目前，请求关键字统计信息的唯一方法是针对单个广告组。我正在尝试检索数千个广告的所有关键字统计信息。有什么方法可以批量处理这些调用以加快速度，所以我不会用这么多请求敲击服务器？

# jquery - jquery下拉列表

> ID：11354572
> 
> 赞同：0
> 
> 时间：2012-07-06T00:58:53.190
> 
> 标签：jquery, drop-down-menu

我正在通过 json 在客户端获取 4 个下拉列表的页面加载数据。

我需要能够将下拉列表中的内容保存到一个变量中，以供以后在页面上使用。

你看，list2 依赖于 list1。因此，当我在 list1 中选择一个值时，我需要过滤掉 list 2 中的相应值。

完成后，我将用过滤后的内容替换 list2 的全部内容。

如果用户需要进行“重做”，我只需将完整值再次移动到下拉列表中，直到它再次被过滤掉。

问题是我想确定如何将值正确保存（因为它们将是一个 id 和文本值）只是一个 var 变量。

更进一步，当我需要将完整列表放回实际下拉列表中时，执行此操作的 jQuery 语法是什么？

为了收集我发现过滤匹配的值的集合，我假设我只有一个 foreach 循环，但我如何将它分配给我的过滤下拉列表？这基本上就像在服务器端的 C# 中将值添加到下拉列表中一样。

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:42:59.160

如果您想实际获取这些值并将它们放入一个数组中，您可以尝试这样的事情。

```
function getValues(dropDownId) {
    var values = new Array();
    $("#" + dropDownId).children().each(function (i, element) {
        values[i] = {id: element.id, value: element.value};
    });
    return values;
}

function setValues(dropDownId, values) {
    var dropDown = $("#" + dropDownId);
    for (var i = 0; i < values.length; i++) {
        var newItem = $("<option></option>");
        newItem.prop("id", values[i].id);
        newItem.text(values[i].value);
        dropDown.append(newItem);
    }
} 
```

当你想获取值时，只需调用 getValues，传入选择元素的 id。保存返回的值，然后调用 setValues 并传入相同的 id 以及保存的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:19:13.830

你的问题不清楚，但如果我没看错，你需要将 a 的当前内容保存`<select/>`到一个变量中，以便以后使用它。

看看[jQuery .clone()](http://api.jquery.com/clone/)

* * *

请参阅此[工作小提琴](http://jsfiddle.net/zuul/tDTHp/)示例！^(显示 cloned`option`被附加到 a`div`)

**假设这个 HTML：**

```
<select id="foobar">
  <option value="1">01</option>
  <option value="2">02</option>
  <option value="3">03</option>
  <option value="4">04</option>
  <option value="5">05</option>
</select> 
```

您可以`select`使用以下方法获取内容：

```
$(function() {
  var $selectContents = $('#foobar option').clone();
}); 
```

# ruby-on-rails - 将 Carrierwave 与 Cloudfront 结合使用

> ID：11354578
> 
> 赞同：1
> 
> 时间：2012-07-06T00:59:31.917
> 
> 标签：ruby-on-rails, carrierwave

我将 CarrierWave 用于图像，并将 Amazon Cloudfront 用作 CDN（没有 S3）。

问题是这样的：`@user.image_url`返回非 CDN URL，即使我已经相应地配置了我的资产：

```
 # /config/environments/production.rb
  config.action_controller.asset_host = Proc.new { |source, request|
    if ['jpg','jpeg','png','gif','bmp'].include?(source.split('.').last)
      unless request.ssl?
        "http://cdn.domain.com"
      else
        "https://ge95v2x8h9t3.cloudfront.net"
      end
    end
  } 
```

如何让 CarrierWave`asset_host`像使用其他资产一样使用我的 proc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:25:55.380

您可以将carrierwave 配置为使用自定义asset_host（`config.fog_host`...在自述文件中记录）。虽然没有记录，但您也可以使用 Proc - 或任何响应 :call 的东西 - 在运行时确定字符串：

[https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/storage/fog.rb#L107](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/storage/fog.rb#L107)

我不确定`config.fog_host`直接指向 Rails' 的方法`config.asset_host`，但我确信必须有一种方法来获取对它的引用——即使您必须使用非公共接口。不过，我不知道这在开发过程中会有多大帮助……您可能希望从 localhost 提供资产并从 Cloudfront 提供上传。

# google-chrome-extension - 如何使用实验性的 offscreenTab API？

> ID：11354587
> 
> 赞同：0
> 
> 时间：2012-07-06T01:00:19.920
> 
> 标签：google-chrome-extension, offscreentabs

我一直在寻找示例和参考，但一无所获。我在 offscreenTab 源代码中发现了一条注释，提到它不能从背景页面实例化（它没有与 offscreenTab 相关的选项卡）。在其他地方我发现提到弹出窗口也与选项卡没有关系。

如何在 Chrome 扩展程序中成功创建 offscreenTab？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:14:54.950

根据文档，[`offscreenTabs.create`](http://code.google.com/chrome/extensions/experimental.offscreenTabs.html)不会在后台页面中运行。尽管没有明确提及，API 也不能在内容脚本中使用。通过一个简单的测试，弹出窗口似乎与背景页面有相同的限制。

唯一剩下的选项是在 Chrome 扩展程序的上下文中运行的选项卡。最简单的方法是在后台/弹出窗口中使用以下代码：

```
chrome.tabs.create({url: chrome.extension.getURL('ost.htm'), active:false});
// active:false, so that the window do not jump to the front 
```

`ost.htm`是一个帮助页面，它创建选项卡：

```
chrome.experimental.offscreenTabs.create({url: '...'}, function(offscreenTab) {
    // Do something with  offscreenTab.id !
}); 
```

要更改 URL，请使用[`chrome.experimental.offscreenTabs.update`](http://code.google.com/chrome/extensions/experimental.offscreenTabs.html#method-update).

`offscreenTab.id`是一个 tabId，应该与[`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)API 一起使用。但是，至少在 Chrome 20.0.1130.1 中，情况并非如此。API的所有方法`tabs`都无法识别返回的 tabID。

一种解决方法是使用[清单文件](http://code.google.com/chrome/extensions/manifest.html)注入内容脚本，例如：

```
{"content_scripts": {"js":["contentscript.js"], "matches":["<all_urls>"]}}
// contentscript.js:
chrome.extension.sendMessage({ .. any request .. }, function(response) {
    // Do something with response.
}); 
```

背景页面的附录：

```
chrome.extension.onMessage.addListener(function(message, sender, sendResponse) {
    // Instead of checking for index == -1, you can also see if the ID matches
    // the ID of a previously created offscreenTab
    if (sender.tab && sender.tab.index === -1) {
        // index is negative if the tab is invisible
        // ... do something (logic) ...
        sendResponse( /* .. some response .. */ );
    }
}); 
```

使用内容脚本，您可以完全访问页面的 DOM。但不是全局对象。如果要在页面上下文中运行代码，则必须注入脚本（请参阅[此答案）。](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)

另一个可能有用的 API 是[`chrome.webRequest`](http://code.google.com/chrome/extensions/webRequest.html)API。它可用于修改标头/中止/重定向请求。注意：它不能用于读取或修改响应。

目前，该`offscreenTabs`API 是实验性的。要使用它，您必须通过 启用实验性 API `chrome://flags`，并将其添加`"permissions":["experimental"]`到您的清单文件中。一旦不再是实验性的，请使用`"permissions":["offscreenTabs"]`.

# php - 无法定位或检索上传的图形视频数据

> ID：11354591
> 
> 赞同：1
> 
> 时间：2012-07-06T01:01:37.213
> 
> 标签：php, facebook, facebook-graph-api

我正在开发我的第一个 facebook 应用程序，我的应用程序使用 GET graph-videos 将视频上传到应用程序，然后在用户墙上发布视频链接。

下面是来自developers.facebook.com 的代码片段，我用它来将视频文件上传到Facebook。我的问题是，当视频完成上传时，不会返回任何数据，而且跟踪我需要检索到已上传视频的链接是一项不可能完成的任务，这些链接是应用程序第二部分所需的。

```
$post_url = "https://graph-video.facebook.com/343226535752652/videos?"
. "title=" . $video_title. "&description=" . $video_desc 
. "&". $access_token;

$result = $facebook->api('/me/feed/', 'post', $attachment); 
```

我已经尝试了无数次调用图形并更改 GET 图形参数，同时使用图形资源管理器监视差异，但我没有运气。

任何关于我所有上传的视频都隐藏或我的代码中的错误的建议或想法将不胜感激！

# ruby - Ruby 的 FuckItJS 等价物

> ID：11354593
> 
> 赞同：0
> 
> 时间：2012-07-06T01:01:47.557
> 
> 标签：ruby, metaprogramming, rubinius

> 他妈的它
> 
> Javascript 错误 Steamroller
> 
> FuckItJS 使用最先进的技术来确保您的 JavaScript 代码运行，无论您的编译器喜欢与否。
> 
> 技术
> 
> 通过称为 Eval-Rinse-Reload-And-Repeat 的过程，FuckItJS 反复编译您的代码，检测错误并将这些行从脚本中删除。为了在如此暴力的过程中生存下来，FuckItJS 在每次迭代后都会重新加载自己，从而允许 onerror 处理程序捕获您编写得非常糟糕的代码中的每一个错误。

我正在确定`lib/my_file.rb`导致 Rubinius 出现以下错误的代码：

```
$ ruby lib/my_file.rb 
An exception occurred running lib/my_file.rb
    Error trying to compile /path/to/lib/my_file.rb (Rubinius::CompileError)

Backtrace:
 Rubinius::Compiler.compiler_error at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                      /lib/compiler/compiler.rbc:11
        Rubinius::Compiler.compile at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                      /lib/compiler/compiler.rbc:62
  Rubinius::CodeLoader#compile_file at kernel/delta/codeloader.rb:146
     Rubinius::CodeLoader#load_file at kernel/delta/codeloader.rb:118
   Rubinius::CodeLoader#load_script at kernel/delta/codeloader.rb:61
   Rubinius::CodeLoader.load_script at kernel/delta/codeloader.rb:90
            Rubinius::Loader#script at kernel/loader.rb:618
              Rubinius::Loader#main at kernel/loader.rb:762

Caused by: undefined method `body' on an instance of Rubinius::AST::SplatValue. (NoMethodError)

Backtrace:
  Kernel(Rubinius::AST::SplatValue)#body (method_missing) at kernel/delta/kernel.rb:79
  Rubinius::AST::OpAssign1#initialize at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/compiler/ast/operators.rbc:136
 Rubinius::Melbourne#process_op_asgn1 at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/melbourne/processor.rbc:332
      Rubinius::Melbourne#file_to_ast at /private/var/folders/3x
                                         /y_8y8vr53ws_kxj97km79q5h0000gn/T
                                         /ruby-build.20120706090940.39603
                                         /rubinius-1.2.4/lib/ext/melbourne
                                         /melbourne.cpp
       Rubinius::Melbourne#parse_file at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/melbourne.rbc:83
 Rubinius::Compiler::FileParser#parse at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/compiler/stages.rbc:219
  Rubinius::Compiler::Parser(Rubinius::Compiler::FileParser)#run at \
          /Users/agrimm/.rbenv/versions/rbx-1.2.4/lib/compiler/stages.rbc:202
               Rubinius::Compiler#run at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/compiler/compiler.rbc:332
           Rubinius::Compiler.compile at /Users/agrimm/.rbenv/versions/rbx-1.2.4
                                         /lib/compiler/compiler.rbc:58
     Rubinius::CodeLoader#compile_file at kernel/delta/codeloader.rb:146
        Rubinius::CodeLoader#load_file at kernel/delta/codeloader.rb:118
      Rubinius::CodeLoader#load_script at kernel/delta/codeloader.rb:61
      Rubinius::CodeLoader.load_script at kernel/delta/codeloader.rb:90
               Rubinius::Loader#script at kernel/loader.rb:618
                 Rubinius::Loader#main at kernel/loader.rb:762 
```

目前我正在评论我的部分代码以查看导致错误的原因。是否有可以自动化此过程的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:36:29.970

他妈的.rb

[https://github.com/programble/fuckit.rb](https://github.com/programble/fuckit.rb)

# ios - SendSynchronousRequest 触发后台过期处理程序 - IOS

> ID：11354598
> 
> 赞同：0
> 
> 时间：2012-07-06T01:02:36.620
> 
> 标签：ios

这就是我在应用程序进入后台时启动后台任务的方式，

```
 void applicationDidEnterBackground:(UIApplication *)application
{
    btId = UIBackgroundTaskInvalid;
    UIApplication* cuiApplication = [UIApplication sharedApplication];

    void (^backgroundTimeRemainingExtenderHandler)() = ^() {

        NSTimeInterval timeRemaining1 = [cuiApplication backgroundTimeRemaining];

        if(btId != UIBackgroundTaskInvalid){
            [proximityEngine StopEngine];
            [cuiApplication endBackgroundTask:btId];
            btId = UIBackgroundTaskInvalid;
        }
    };

    btId= [cuiApplication beginBackgroundTaskWithExpirationHandler:backgroundTimeRemainingExtenderHandler];

    if(bgmanager != nil){
        [bgmanager BeginBackgroundTaskMainLoop];
    } 
} 
```

我的问题是当我的后台任务调用时：

NSURLConnection 发送同步请求

即使有更多的剩余时间，也会调用到期块，我该如何防止这种情况？

问候 ，

詹姆士

编辑 ：

阅读下面的答案后：查询剩余时间时，我还有 596 秒，但 IOS 仍然调用过期块处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:27:20.593

`beginBackgroundTaskWithExpirationHandler:`是应用程序在进入后台后请求一些额外的后台时间来进行一些整理的方法。但是，iOS 保留决定它将为您提供多少时间（如果有的话）的权利，并且如果您未能在规定的时间内结束，则终止您的进程。

您不能无限期地在后台执行，也不能选择自己的时间限制。您可以查询您分配`backgroundTimeRemaining`的内容，但这几乎是全部范围。

根据[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler%3a)，处理程序被称为“在应用程序的剩余后台时间达到 0 之前不久”。所以你应该期望`backgroundTimeRemaining`不完全为零。

话虽这么说，如果您的 URL 连接尚未完成，那么您只需在某处指出它未完成并在您下次从后台返回时处理错误，通常是重试。这就是您的过期处理程序应该做的事情，并且它需要快速完成。

但是，分配给您的应用程序的额外时间是不可协商的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:38:42.530

在我的特殊情况下 - 我不太清楚为什么它的行为方式，我在与 beginbackgroundtask 线程不同的线程上执行任务，在 sendsync 在该线程中返回后，backgroundtask 被操作系统中断。在 beginbackground 原始线程中调用 sendsync 时，不会发生。不确定它是否合乎逻辑，我做错了什么或操作系统错误。

# vim - VIM：每次拆分不同的字体大小

> ID：11354601
> 
> 赞同：4
> 
> 时间：2012-07-06T01:03:05.050
> 
> 标签：vim

是否可以在 vim 的不同拆分视图中设置不同的字体大小？我经常使用 :vsplit 在一个视图中打开文档并在另一个视图中获取源代码，并且希望使用更大的字体来阅读文档而不是编码。但是，我所有的尝试都是在所有打开的视图中更改字体。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T01:05:16.213

Vim 建立在经典的终端模型之上：整个屏幕必须是完全等宽的。无法在屏幕的不同部分独立控制文本的大小。更可惜的是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T03:38:45.740

类型`:help 'guifont'`：

```
'guifont' 'gfn'     string  (default "")
            global
            {not in Vi}
            {only available when compiled with GUI enabled} 
```

我们可以看到：`guifont`是一个全局选项。因此，当您更改它时，它会影响所有窗口。

将来，这个选项可以是`global or local to buffer/window`（如`cm`）。

# c++ - 编译器是否同样对待 int 和 bool 类型？

> ID：11354602
> 
> 赞同：3
> 
> 时间：2012-07-06T01:03:07.603
> 
> 标签：c++, types

如果我有以下代码：

```
int a = 1;
bool b = 1; 
```

a等于b吗？甚至程序可能会返回它们相同，它们实际上在低级别的所有方面都相等吗？

另外，如果我使用代码（伪），例如：

```
if (a)
then execute(); 
```

会`execute()`跑吗？我在寻求理论上的答案，我无法用实验说服自己，因为这不是自然科学。谢谢你们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T01:05:44.300

我认为您可以[通过正确的实验](http://ideone.com/FVLXp)来说服自己：

```
#include <type_traits>

int main() {
    int a = 1;
    bool b = 1;
    static_assert(! std::is_same<decltype(a), decltype(b)>::value,
                  "No, they are not the same on all aspects");
} 
```

也许两者之间最重要的区别是`bool`只能有两个值：`true`and `false`, while`int`可以有更多。这是[另一个](http://ideone.com/kIavK)显示此结果的实验​​：

```
#include <cassert>

int main() {
    int a = 2;
    bool b = 2;
    assert(a != b);
} 
```

这两种类型可能看起来很相似，因为两者之间存在隐式转换。任何为零的积分表达式都可以隐式转换为`false`，任何不为零的积分表达式都可以隐式转换为`true`。在相反的方向，`false`可以隐式转换为零，并`true`转换为一。这导致上面的代码最终测试 if 2 != 1。

现在问题`execute();`的片段中是否调用的问题的答案应该很明显：该值`a`将`bool`在`if`语句中转换为 a ，并且由于它不为零，因此它将转换为`true`并导致调用`execute()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T01:09:44.760

`true`当在布尔上下文中使用时，非零数值或指针表达式将计算为。同样，零表达式的计算结果为`false`。但是，an`int`和 a`bool`是不同的类型，所以它们并不相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T01:30:50.357

> a等于b吗？甚至程序可能会返回它们相同，它们实际上在低级别的所有方面都相等吗？

这完全取决于您的意思*equal*。类型不同，这意味着内存中的表示可能会有所不同（编译器可以自由地将这两者表示为完全相同，但也可以自由地做其他事情）。在大多数编译器/架构中，`bool`只占用一个字节的存储空间并且`int`具有更大的大小（通常为 4 个字节，但这取决于架构）。

除了不同的大小，编译器会以不同的方式处理这两种类型（不仅仅是加载和存储到内存，而且操作也会不同。您只能将 0 和 1 存储在 bool 中，这意味着某些操作可能会使用它例如，在[本文中](http://markshroyer.com/2012/06/c-both-true-and-false/)，您会发现一个条件测试的实现不同的情况（注意，本文有一个未定义行为的情况，导致 a`bool`对两者进行评估，`true`而`false`对于编译器假设的测试只能`bool`是 0 或 1，这不会发生在`int`)

从逻辑的角度来看，语言决定了不同类型在操作中的使用方式，特别是如果您尝试在程序中比较`a`和`b`，表达式的结果将是`true`. 请注意，这并不意味着它们*完全相同*，该语言定义了一组转换规则，用于将两个变量转换为相同的类型，并在该类型中执行比较。在这种情况下，转换将是`int`。变量将`bool`转换为`0`if`false`或`1`if `true`。

> 另外，如果我使用代码（伪），例如：`if (a) execute()`，execute() 会运行吗？

是的。在这种情况下， 内部的条件`if`需要一个`bool`值，因此转换将是 from`int`到`bool`。`false`如果整数值为，则该标准定义转换为 yield `0`，`true`否则，有效地执行等效于`if (a!=0)`。由于`a`is `1`，条件成立`execute()`并将被评估。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T01:12:50.003

该线程讨论了与字符相比的 c++ 布尔值，但它会让您对引擎盖下发生的事情有一个很好的了解。[为什么 c++ 中 char 和 bool 的大小相同？](https://stackoverflow.com/questions/266870/why-is-a-char-and-a-bool-the-same-size-in-c)

# java - 通过调用和对象与类有什么区别

> ID：11354617
> 
> 赞同：0
> 
> 时间：2012-07-06T01:05:40.493
> 
> 标签：java

通过对象调用方法与通过类调用方法有什么区别。

例如鲍勃班

```
public class SecretNumber() {
    public static int secretNumber = 2;
    public static void changeSecretNumber(){
        secretNumber++;
    }
} 
```

如果我像对象一样称呼它会有什么区别

```
SecretNumber secretNumber = new SecretNumber();
secretNumber.changeSecretNumber(); 
```

vs这样称呼它

```
SecretNumber.changeSecretNumber(); 
```

一种方法如何影响另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:14:45.500

结果是一样的。

您应该通过类名而不是通过实例调用它，因为*不会发生动态调度*。

如果你这样做，大多数编译器也会给你一个警告。[有人争辩说它应该是编译错误](https://stackoverflow.com/questions/610458/why-isnt-calling-a-static-method-by-way-of-an-instance-an-error-for-the-java-co?lq=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:08:05.237

*在 Java 中，除非*类方法是“静态的”，否则*只能*通过对象实例调用它。

 *这是一个将其声明为“静态”的方法的示例：

*   [http://www.leepoint.net/notes-java/flow/methods/50static-methods.html](http://www.leepoint.net/notes-java/flow/methods/50static-methods.html)

    public static double mean(int[] p) { int sum = 0; // 所有元素的总和 for (int i=0; i

[http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:08:43.423

第二种形式不是有效的 Java。只有声明了类的方法，您才能调用它们`static`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T01:09:36.653

通过类调用方法是静态方法。除非您将该方法声明为静态方法，否则编译器会给您一个编译错误。*

# php - 在子文件夹中搜索

> ID：11354618
> 
> 赞同：1
> 
> 时间：2012-07-06T01:05:41.893
> 
> 标签：php, search, subdirectory

我需要将搜索扩展到子文件夹。

我需要一些帮助来修改和添加这个脚本的功能：

```
<?php 
if(isset($_GET['s']) and $_GET['s'] != '') { 
    $dir = 'dir/sub-dir'; 
    $ext = '.htm'; 
    $search = $_GET['s']; 
    $results = glob("$dir/*$search*$ext"); 
    if(count($results) != 1) { 
        foreach($results as $item) { 
            echo "<li><a href='$item'>$item</a></li>\r\n";     
        } 
    } 
    if(count($results) == 1) { 
        $item = $results[0]; 
        echo "<li color='blue'><a href='$item'>$item - only result</a></li>\r\n"; 
    } 
    if(count($results) == 0) { 
       echo "<li>no results to display</li>\r\n";    
    } 
} 
else { 
?> 
<form action=''> 
<input name='s'> 
<input type='submit'> 
</form> 
<?php 
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:54:12.093

我在我的网站上的一个页面中做了类似的事情，我尝试使用一些新的递归目录列表函数，它们对我的应用程序不起作用，但它们可能对你有用。检查此页面。 [http://php.net/manual/en/class.recursivedirectoryiterator.php](http://php.net/manual/en/class.recursivedirectoryiterator.php)

PHP 中内置了其他类似的函数，这些函数链接到该页面。

对我来说，我使用 ajax 来调用我围绕 scandir() 构建的 php 函数，然后将它传递给要列出的下一个文件夹。这很好用，因为它始终是当前目录的子文件夹。这样我也可以让它在嵌套列表中展开。

# c# - 在 C# 中创建对象的通用列表

> ID：11354620
> 
> 赞同：9
> 
> 时间：2012-07-06T01:05:44.737
> 
> 标签：c#, list, generics, object, quadtree

作为介绍，我正在为个人学习目的创建一个基本的四叉树引擎。我希望这个引擎能够处理许多不同类型的形状（目前我正在使用圆形和正方形），它们都将在窗口中移动并在发生碰撞时执行某种动作。

这是我目前拥有的形状对象：

```
public class QShape {
    public int x { get; set; }
    public int y { get; set; }
    public string colour { get; set; }
}

public class QCircle : QShape {
    public int radius;
    public QCircle(int theRadius, int theX, int theY, string theColour) {
        this.radius = theRadius;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
}

public class QSquare : QShape {
    public int sideLength;
    public QSquare(int theSideLength, int theX, int theY, string theColour) {
        this.sideLength = theSideLength;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
} 
```

现在我的问题是，如何`List<T> QObjectList = new List<T>();`在 C# 中创建一个通用列表（ )? 一个实现的例子也会有帮助。

我只知道这个问题有一个愚蠢的答案，但无论如何我都会很感激任何帮助。我正在尝试回到 C#；显然已经有一段时间了……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T01:14:35.300

您需要使用向下转换

将对象存储在带有基类的列表中

```
 List<QShape> shapes = new List<QShape> 
```

然后，如果您知道对象是什么，则可以安全地向上转换对象，例如

```
if(shapes[0] is QSquare)
{
     QSquare square = (QSquare)shapes[0]
} 
```

您还可以隐式向下转换对象

```
QSquare square = new Square(5,0,0,"Blue");
QShape shape =  square 
```

[有关更多信息，请阅读此处的向上转换和向下转换部分](http://www.c-sharpcorner.com/UploadFile/pcurnow/polymorphcasting06222007131659PM/polymorphcasting.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T01:15:24.223

你应该实现一个`Interface`. 例如

```
public interface IHasLength
{
    int Length;
} 
```

然后在实现中你可以做

```
public class QSquare : QShape, IHasLength {
    public int sideLength;
    public QSquare(int theSideLength, int theX, int theY, string theColour) {
        this.sideLength = theSideLength;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
    public int Length { get { return sideLength; } }
}
public class QCircle : QShape, IHasLength {
    public int radius;
    public QSquare(int theSideLength, int theX, int theY, string theColour) {
        this.sideLength = theSideLength;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
    public int Length { get { return radius; } }
} 
```

最后，在您的列表中：

```
List<IHasLength> shapesWithSomeLength = new List<IHasLength>(); 
```

现在，您的列表可以包含任何实现的内容，`IHasLength`无论它是 a `QCircle`、`QShape`，甚至是`QDuck`您想要的 a ，只要它实现了`IHasLength`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T02:00:41.950

这是你想要的吗？

```
public class QShape
{
    protected QShape() { }
    public int x { get; set; }
    public int y { get; set; }
    public string colour { get; set; }
}

public class QCircle : QShape
{
    public int radius;
    public QCircle(int theRadius, int theX, int theY, string theColour)
    {
        this.radius = theRadius;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
}

public class QSquare : QShape
{
    public int sideLength;
    public QSquare(int theSideLength, int theX, int theY, string theColour)
    {
        this.sideLength = theSideLength;
        this.x = theX;
        this.y = theY;
        this.colour = theColour;
    }
}
class Program
{
    static void Main(string[] args)
    {
        List<QShape> list = new List<QShape>();
        list.Add(new QCircle(100, 50, 50, "Red"));
        list.Add(new QCircle(100, 400, 400, "Red"));
        list.Add(new QSquare(50, 300, 100, "Blue"));

        foreach (var item in list.OfType<QCircle>())
        {
            item.radius += 10;
        }

        foreach (var item in list.OfType<QSquare>())
        {
            item.sideLength += 10;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T01:15:49.213

您可以将它们存储在 a 中`List<QShape>`，但这意味着您无法访问特定于类型的属性。

通常，您可以通过在基类中提供公共接口并在子类中覆盖行为来解决此问题。通过这种方式，一个通用的界面可以隐藏各种不同的行为。例如，一个`Grow`方法可以隐藏不同形状的增长项目的复杂性，并且可以在不明确知道它正在操作的形状的情况下调用。

```
public abstract class QShape {
    public abstract void Grow(int amt);
}
public class QSquare : QShape {
    private int sideLength;
    public override void Grow(int amt)
    {
        sideLength+=amt;
    }
}
public class QCircle : QShape {
    private int radius;
    public override void Grow(int amt)
    {
        radius+=amt;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T01:09:15.023

我觉得我错过了一些东西，但是......

```
List<QCircle> circleObjects = new List<QCircle>(); 
```

和

```
List<QSquare> squareObjects = new List<QSquare>(); 
```

会很好地工作。

编辑：

啊，没看懂在问什么。

是的，因为你`QCircle`和`QSquare`类继承自`QShape`，你可以这样做。

```
List<QShape> shapes= new List<QShape>(); 
```

值得注意的是，如果您想访问该列表`radius`中所有`QCircle`' 的属性，那么您将不得不根据类型过滤列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T01:13:19.270

您可以使用 Ian Mercer 的评论`List<QShape>`

以下是你将如何填写它：

```
List<QShape> shapes = new List<QShape>();
QCircle circle = new QCircle(); 

shapes.Add(circle); 
```

拆箱：

```
QCircle circle = (QCircle) shapes[0]; 
```

如果需要从基类中调用方法，无需拆箱，直接使用即可。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-06T01:20:24.237

## 存储

您的类定义已经走在正确的轨道上。您需要做的是创建一个`List`超类（在本例中为`QShape`），它将能够容纳您的所有形状。

这是一个如何制作它的示例：

```
List<QShape> objects = new List<QShape>();

objects.add(new QCircle(...));
objects.add(new QSquare(...)); 
```

## 访问

这里的问题是区分列表中的所有内容后是什么。这是通过C#的`getType()`and方法完成的。`typeof()`（[乔恩斯基特对如何做到这一点有一个很好的答案](https://stackoverflow.com/questions/3561202/check-if-instance-of-a-type)）。基本上，它看起来像这样：

```
if(objects.get(some_position).getType() == typeof(QCircle))
  QCircle circle = objects.get(some_position);
else if(/* like above with QSquare */)
  QSquare square = objects.get(some_position); 
```

完成此操作后，您可以像平常一样继续使用您的对象。但是，如果您尝试从列表中访问它们，则只能使用具有的方法和变量`QShape`，因为放入列表中的每个对象都将被强制转换为它。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-10-24T10:43:10.460

```
public Class abstract  Base<T>
{
    public abstract List<T>GetList();
} 
```

然后这样做

```
public class className:Base<ObjectName>
{
    public override List<T>GetList()
    {
        //do work here 
    }
} 
```

# javascript - Javascript获取当前页面并根据URL向元素添加类

> ID：11354622
> 
> 赞同：0
> 
> 时间：2012-07-06T01:06:04.153
> 
> 标签：javascript, jquery

我正在使用导航栏，并且我希望在元素页面上的元素上有一个活动类。

例如，我需要 jQuery 来检查当前页面的 url，如果 url 是`http://supjamess.tumblr.com/`，它会将类添加`active`到`a`element `.index`，`http://supjamess.tumblr.com/ask`并将类添加`active`到`a`element `.ask`，依此类推。

如果有人可以提供代码，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:08:40.023

我的示例需要 jQuery：

```
if ( window.location.pathname == '/' ) {
    var url_class = 'index';
} else {
    // Very first part of the path, so /path/to/url returns 'path'
    var url_class = window.location.pathname.split('/');
    url_class = url_class[1];
}

$('a.' + url_class).addClass('active'); 
```

这基本上是获取 URL 的路径名组件（在域之后和查询字符串之前，[请参见此处](http://davidwalsh.name/javascript-window-location)），然后检查它是否为“/”，即索引并手动将 URL 类设置为“索引” .

否则，它会获取 URL 的第一个组件，因此`/ask`返回`ask`、`/questions/bar`返回`questions`、`/users/edit/5`返回`users`、 `/tagged/layouts`返回`tagged`等。

然后 jQuery 将该类添加`active`到具有给定类的任何元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:10:28.980

基于 location.pathname 的开关

```
 if (location.pathname == "/") {
      $("a.index").addClass("active");
 } else if (location.pathname == "ask") {
      $("a.ask").addClass("active");
 }
 ... and so on 
```

额外的页面添加了额外的 else if 语句，因此代码变为：

```
 if (location.pathname == "/") {
      $("a.index").addClass("active");
 } else if (location.pathname == "/ask") {
      $("a.ask").addClass("active");
 } else if (location.pathname == "/tagged/layout") {
      $("a.layout").addClass("active");
 } else if (location.pathname == "/YOUR PATH") { // to add aditional pages, replace CAPS
      $("a.CLASS OF NAV LINK").addClass("active");
 } 
```

您可以在 jsfiddle.net 或您自己的控制台（大多数浏览器中的 f12）中试用和试验 javascript

# php - 私有 PHP 数组中无法识别的函数

> ID：11354633
> 
> 赞同：0
> 
> 时间：2012-07-06T01:09:00.880
> 
> 标签：php

我有以下代码基于这个用于制作自定义 WordPress 小部件[的出色模板：](https://gist.github.com/1229641)

```
<?php class DRCC_Feat extends WP_Widget {
function dr_post_select_list() {
    $drcc_posts_args = array(
        'post_type' => array( 'post', 'page', 'tribe_events' ),
        'numberposts' => -1,
        'orderby' => 'title',
        'order' => 'ASC'
    );
    $drcc_posts = get_posts( $drcc_posts_args );
    $dr_posts_array = array();
    foreach( $drcc_posts as $post ) {
        $dr_posts_array[$post->ID] = $post->post_title;
    }
    return $dr_posts_array;
}

protected $widget = array(
'description' => 'Custom widget for my client.',
'do_wrapper' => true,
'view' => false,    
'fields' => array(
    array(
        'name' => 'Post to Feature',
        'desc' => 'Enter the IDs of any posts, pages, etc. If more than one, separate with commas.',
        'id' => 'dr_feat_ids',
        'type' => 'select',
        'options' => dr_post_select_list(),
        'std' => ''
    )
)
);

// some more stuff here, but the error is above and the code works when I make 'options' somethings hard-coded.

} ?> 
```

我正在尝试调用`dr_post_select_list()`受保护的`$widget`数组以动态生成帖子列表，但是`Parse error: syntax error, unexpected '(', expecting ')'`在引用其中包含`dr_post_select_list()`函数的行时出现错误。就好像它不承认它是一个函数。

我在别处试过这个功能，效果很好。我已经尝试将数组公开，但这并没有改变任何东西。我尝试将函数输出保存在数组中并将变量放入数组中

我感觉到我在做一些根本错误的事情。

tl; dr - 在类中的数组中调用的方法不运行（或似乎被识别为方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:39:27.680

您缺少`}`功能的结束。

将您的代码替换为以下内容：

```
<?php
class DRCC_Feat extends WP_Widget {

    protected $widget = array(
            'description' => 'Custom widget for my client.',
            'do_wrapper' => true,
            'view' => false,
            'fields' => array(
                array(
                    'name' => 'Post to Feature',
                    'desc' => 'Enter the IDs of any posts, pages, etc. If more than one, separate with commas.',
                    'id' => 'dr_feat_ids',
                    'type' => 'select',
                    'options' => 'dr_post_select_list',
                    'std' => ''
                )
            )
    );

    function dr_post_select_list() {
        $drcc_posts_args = array(
            'post_type' => array( 'post', 'page', 'tribe_events' ),
            'numberposts' => -1,
            'orderby' => 'title',
            'order' => 'ASC'
        );
        $drcc_posts = get_posts( $drcc_posts_args );
        $dr_posts_array = array();
        foreach( $drcc_posts as $post ) {
            $dr_posts_array[$post->ID] = $post->post_title;
        }
        return $dr_posts_array;
    }
} 
```

已编辑：移动了类内的所有代码，更正了错误。看看这篇关于在数组中存储函数的文章。与说JS略有不同。 [您可以将函数存储在 PHP 数组中吗？](https://stackoverflow.com/questions/1499862/can-you-store-a-function-in-a-php-array)

# opencl - 什么是 AMD/ATI Radeon 6000 系列 GPU 架构？

> ID：11354638
> 
> 赞同：1
> 
> 时间：2012-07-06T01:09:34.163
> 
> 标签：opencl, gpu, amd-processor

见问题。我可以找到关于 5000 系列和 7000 系列的文档，但没有关于 6000 系列的真正说明。这对于尝试接近 OpenCL 的理论最大吞吐量很有用。

到目前为止，我已经找到了[AMD 的编程指南 (pdf)](http://developer.amd.com/sdks/amdappsdk/assets/amd_accelerated_parallel_processing_opencl_programming_guide.pdf)。这涵盖了 5000 和 7000 系列。但它只是顺便提到了6000系列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:49:44.313

我对6000系列gpu的理解是和5000s非常相似，除了69xx更接近7000s。

69xx gpus (Cayman) 使用 VLIW4 指令集，该系列中的 6870 及更低型号使用 5000 gpus 中的 VLIW5 架构。

我在 wiki 上找到了更多相关信息：

[北部群岛](http://en.wikipedia.org/wiki/Northern_Islands_%28GPU_family%29)

[AMD 显卡比较（北岛）](http://en.wikipedia.org/wiki/Comparison_of_AMD_graphics_processing_units#Northern_Islands_.28HD_6xxx.29_series)

我发现其他有用的东西是谷歌图像搜索“amd X 框图”，其中 X 是以下 gpu 代号之一：Cedar、Caicos、Turks、Juniper、Barts、Cayman、Antilles 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:36:00.500

6000s与5000s基本相同。唯一真正显着的区别是 Cayman 是 VLIW4，而该系列中的其他产品（例如 Barts）是 VLIW5，就像之前的 R600 架构几代一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T03:34:24.587

如果您正在寻找 Cayman (6950/6970) 架构 (VLIW 4)，请查看[http://www.realworldtech.com/cayman](http://www.realworldtech.com/cayman)

高温高压

# php - 从 mysql 数据库中检索数据

> ID：11354642
> 
> 赞同：0
> 
> 时间：2012-07-06T01:09:55.610
> 
> 标签：php, mysql, wordpress

我有一个 mysql 数据库，它是为使用 wordpress 的网站创建的，当使用 wordpress 发布一些文本时，它会将其存储在该数据库中。当我尝试使用 php 文件提取此文本时，它返回 null，但如果我删除此文本并手动将其写入（无 wordpress），它会很好地提取它。因为它是使用wordpress创建的，所以我需要做些什么来提取这个文本？表结构如下，字段：post_content 类型：longtext。谢谢您的帮助

代码：

```
$query = "SELECT post_content FROM meiplay_posts WHERE post_type = 'portfolio'";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result))
    $output[] = $row;
print(json_encode($output)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:53:54.763

Wordpress 为您提供了一个类，可让您更轻松地在数据库上运行查询。参考：[http ://codex.wordpress.org/Class_Reference/wpdb#SELECT_a_Column](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_a_Column)

尝试：

```
$result = $wpdb->get_col($wpdb->prepare("SELECT `post_content` FROM `meiplay_posts` WHERE post_type = 'portfolio'")); 

if ($result) 
{
   echo $result->post_content;
   echo json_encode($result);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:15:44.653

添加一些错误处理：

```
$result = mysql_query($query) or die(mysql_error()); 
```

如果出现问题，这将导致打印错误消息`mysql_query`。希望错误消息会有所帮助。

此外，[文档`mysql_query`说](http://www.php.net/manual/en/function.mysql-query.php)：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

所以我建议使用 PHP 作者推荐的库。

还：

```
$query = "SELECT post_content FROM meiplay_posts WHERE post_type = 'portfolio'"; 
```

您确定`post_type = 'portfolio'`存在的列吗？尝试在没有`WHERE`部件的情况下进行选择，看看你是否得到任何东西。也许它略有不同，比如`Portfolio`而不是`portfolio`?

# javascript - 为什么点击处理程序不能在这个 Raphael 对象上工作？

> ID：11354644
> 
> 赞同：0
> 
> 时间：2012-07-06T01:10:29.167
> 
> 标签：javascript, svg, event-handling, raphael, dom-events

我目前的项目是一张美国的热图：

[http://up.massrelevance.com/cnbc/top-states/heatmap.html](http://up.massrelevance.com/cnbc/top-states/heatmap.html)

它是在 Raphael 和几个预先打包的库的帮助下呈现的，以生成状态的路径。在我的代码中，我生成了一个代表每个状态的 Raphael 对象的引用数组；然后我对它们进行迭代，`projection.map`使用 Raphael 的`.click()`方法为每个（实际的 Raphael 对象存储在）附加一个点击处理程序：

```
Heatmap.prototype.stateClick = function() {
  var projection, 
      state, 
      _this = this;
  for (state in this.projections) {
    projection = this.projections[state];
    console.log(state);
    console.log(projection.map[0]);
    (function(state, projection) {
      projection.map.click(function() {
        _this.overlay.update(state, _this.states[state]);
        _this.overlay.reveal();
      });
    })(state, projection);
  }
}; 
```

这适用于 50 个州中的 48 个。但是，由于某种原因，阿拉斯加（AK）和俄克拉荷马（OK）似乎没有获得点击处理程序——也就是说，当我点击它们时，什么也没有发生。

在控制台查看`console.log`上面代码中调用的输出，我看不出 AK & OK 的 Raphael 对象与任何其他状态的对象之间有任何差异，所以我对可能的原因感到困惑。

谁能确定或猜测发生了什么，或者建议我如何进一步调试？是否有任何关于如何绘制这些形状（例如，可能不是完全封闭的路径？）可能导致点击处理程序无法附加的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:24:04.363

嘘，想通了。我在阿拉斯加 (AK) 的州代码中打错字，而不是使用 OK。这就解释了为什么这是两个问题状态。我研究了一个多小时，直到休息后，用一双崭新的眼睛，我立即发现了这个错字。

# javascript - 如何在 Javascript 中解析一个 Cookie 中的多个值

> ID：11354645
> 
> 赞同：0
> 
> 时间：2012-07-06T01:11:05.620
> 
> 标签：javascript, cookies

我有一个 cookie，它在一个 cookie 中存储 5 个用逗号分隔的值。我可以按如下方式检索 ExampleCookie 的值（例如）：

var CookieValue = readCookie('ExampleCookie'); //返回 Foo,Bar,Foo1,FooFighter,Bar2

如何解析 CookieValue 以分配单个变量，以便我可以为 5 个部分中的每一个分配一个变量？

我已经找到了用 PHP 但不是 javascript 来做到这一点的方法。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:15:25.280

使用 String.split(delimiter) 方法

```
var array = readCookie('ExCook').split(","); 
```

参考： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:25:23.977

我很快意识到这更多的是关于拆分的问题，而不是关于 cookie 的问题。这是我想出的。

```
var splits = ExampleCookie.split(","); 
var slot1 = splits[0]; 
var slot2 = splits[1]; 
var slot3 = splits[2]; etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:18:33.093

您需要从字符串创建一个数组：

```
CookieParams = CookieValue.split(",");
CookieParams[0] = Foo
CookieParams[1] = Bar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T01:18:54.450

您可以通过 split() 方法将 CookieValue 拆分为数组中的各个值。

var valList = CookieValue.split(','); // ["Foo", "Bar", "Foo1", "FooFighter", "Bar2"]

然后，如果您希望将值分配给各个变量，则需要遍历数组并手动进行分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T01:19:35.060

[JSON.stringify 和 JSON.parse](http://www.json.org/js.html)是你最好的最干净的赌注（恕我直言）

```
var values = JSON.parse(readCookie('ExampleCookie'));

createCookie('ExampleCookie',JSON.stringify(values)); 
```

这具有能够在对象/数组中设置键值的额外好处。

假设您使用的是在[quirks 模式下](http://www.quirksmode.org/js/cookies.html)找到的函数，只需确保字符串化的 cookie 值不会超过大多数浏览器中的[4000 字符限制](http://manicode.blogspot.co.nz/2009/08/real-world-cookie-length-limits.html)。

# java - C++ 和 Java OOP 访问控制违规：访问对等对象的私有字段

> ID：11354649
> 
> 赞同：0
> 
> 时间：2012-07-06T01:12:15.810
> 
> 标签：java, c++, private-members

我实例化一个类的两个对象，一个对象访问和更改另一个对象的私有字段。我认为这违反了私有访问控制。它打破了 OOP 中的封装。但是，我发现 C++ 和 Java 似乎都允许这种“违规行为”。请告诉我为什么允许这种“违规行为”！

示例 C++ 代码：

```
#include <iostream>
using namespace std;

class Person
{
    private:
        int age;
    public:
        void changeAge(Person & p, int k) // change peer object's private fields
        {
            p.age = k;
        };

        Person(int k)
        {
            age = k;
        };

        void showAge()
        {
            cout << this->age << endl;
        };
};

int main()
{
    Person a(10);
    a.showAge();
    Person b(11);
    b.changeAge(a, 20); // I think the compiler SHOULD generate access violation error
    a.showAge();
    b.showAge();
    return 0;
}; 
```

输出是：

```
10
20
11 
```

您可以为 Java 编写类似的代码，并且您将获得相同的输出。

我查阅了[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html) 我了解私有字段在类级别是可见的。我相信这可能是发生这种“违规”的唯一可行原因。（如果可以，请添加更多理由！）

但是，我认为允许这种“违规”是没有意义的，因为它破坏了 OOP 中的封装。我们都是人类这一事实并不意味着我可以访问和修改您的私人资料。如果可以的话，它不再是你的“私人物品”。

请赐教！“违规”是 C++ 和 Java 的错误吗？如果我错了，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:18:05.450

这绝对不是任何一种语言的“错误”。它们已经很成熟，并且被设计成以这种方式运行。访问控制在类级别而不是对象级别运行。因此，当`Person`将某些东西设为私有时，这意味着只有`Person`类中的代码可以操作它，但所讨论的对象是无关紧要的。

关键是将对象内部的知识隔离到特定的代码片段中，而不是确保一个对象不能操纵另一个对象。

不要错误地认为 OOP 是一套完善的规则。许多不同的语言实现了与OO不同的想法，并且它们之间存在差异。如果某个资源明确地告诉您 OO “意味着”任何特定的东西，那么它们就是在误导您。语言设计者和程序作者有很多可以解释的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T01:19:10.487

至少在 C++ 中，如果您无法访问同一类的另一个对象的私有字段，那么您就无法编写复制构造函数，也无法编写大量有用的运算符和其他东西。解决它的唯一方法是公共访问器方法，但是任何人都可以调用访问器方法，而你的情况会比现在更糟！

如果你仔细想想，C++ 和 Java 都有 CLASS 级别的封装，而不是 OBJECT 级别的封装。有点假设同一类的其他对象（即运行相同方法的其他对象）不会对同一类的对象做任何太愚蠢的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:21:48.910

私有字段只能由它们所在的类访问。如果您有 2 个对象，Person A 和 Person B，它们都是 Person 的，并且都需要能够被类中的方法操作。正如其他人所说，保护是其他类能够操纵数据，而不是对象。

所以不，这不是违规行为。

# java - 将简单的 java.util.Maps 持久化到表的 Hibernate 动态映射模式替代方案？

> ID：11354654
> 
> 赞同：1
> 
> 时间：2012-07-06T01:14:00.037
> 
> 标签：java, hibernate

对于我的应用程序，我不希望任何 ORM 工具抓取我的域对象并尝试推断表/列结构。相反，我有一个简单的 HashMap 键/值对，我想将其转换为数据库表中的一行，并且我想将数据库查询结果作为映射列表返回。

我一直在使用 hibernate 的动态映射模式，指定实体名称映射而不是类映射。在大多数情况下它都可以工作，但是 hibernate 似乎很重，尤其是在嵌套地图和列表方面。

我已经研究过编写自定义 tupilizer 或类型，但它们似乎也有点重。

是否有任何其他流行的 ORM/持久性库支持类似于休眠动态映射的功能？我看了一点 DataNucleus 和 iBatis，但似乎找不到 HashMap 类型模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:33:25.803

如果您不使用映射功能，为什么要使用休眠？

为什么不直接使用 spring 的 JDBC 功能（甚至直接使用 jdbc）并编写一个将任何行转换为 HashMap 的 RowMapper？这可以使用 ResultSetMetaData 轻松完成。

# wpf - 文本框和 RichTextbox wpf 之间的区别？

> ID：11354655
> 
> 赞同：9
> 
> 时间：2012-07-06T01:14:06.573
> 
> 标签：wpf, textbox, richtextbox

Textbox 和 RichTextbox 看起来一样。但不知道有什么区别。请告诉我，当我必须在 wpf 中使用 TextBox 和 RichTextbox 时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T01:56:22.963

请参阅此[Microsoft](http://msdn.microsoft.com/en-us/library/aa970779.aspx)对 TextBox 和 RichTextBox 之间差异的概述。

从上面的链接：

> RichTextBox 和 TextBox 都允许用户编辑文本，但是，这两个控件用于不同的场景。当用户需要编辑格式化的文本、图像、表格或其他丰富的内容时，RichTextBox 是更好的选择。例如，编辑需要格式、图像等的文档、文章或博客最好使用 RichTextBox 完成。TextBox 比RichTextBox 需要更少的系统资源，它是仅需要编辑纯文本（即在表单中使用）时的理想选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:38:48.007

关于控件使用场景的差异已经说了很多。

一个重要的*技术*差异是 TextBox 支持 DataBinding，而 RichTextBox 不支持，这使得在 MVVM 应用程序中使用起来有点讨厌。如果您想要一个带有 DataBinding 工具的 RichTextBox，请查看CodePlex 上的[扩展 WPF 工具包。](http://wpftoolkit.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:21:53.717

如果您想更多地控制文本颜色、类型、字体、对齐方式等样式，则主要使用**RichTextBox 。**因此，您可以在 Microsoft Word 中执行的任何操作都可以使用 RichTextBox 执行。它可用于轻松保存或显示 .rtf 文件。

**文本框**基本上用于显示或获取一行输入。您可以拥有一个多行文本框，主要用于显示或获取多个单行文本框，让您不必管理多个文本框。还可以使您的 UI 更加整洁。

所以基本上主要区别在于样式。如果您只想要简单明了的东西，请使用 TextBox。如果您想要一些花哨的东西，例如样式、颜色，请使用 RichTextBox。

看看这个：

*   [http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/a06ab05a-fbde-47ef-89c5-a7a57f32ffd3](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/a06ab05a-fbde-47ef-89c5-a7a57f32ffd3)

# ruby-on-rails - 错误：安装 capybara-webkit 时出错：

> ID：11354656
> 
> 赞同：118
> 
> 时间：2012-07-06T01:14:08.070
> 
> 标签：ruby-on-rails, ruby, gem, capybara, capybara-webkit

有关如何修复的任何建议？

```
gem install capybara-webkit -v '0.11.0'
Building native extensions.  This could take a while...
ERROR:  Error installing capybara-webkit:
        ERROR: Failed to build gem native extension.

        /home/durrantm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
sh: qmake: not found

Gem files will remain installed in /home/durrantm/.rvm/gems/ruby-1.9.3-p194/gems/capybara-webkit-0.11.0 for inspection.
Results logged to /home/durrantm/.rvm/gems/ruby-1.9.3-p194/gems/capybara-webkit-0.11.0/./gem_make.out 
```

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-07-23T23:50:23.307

如果您在 Ubuntu 中，请执行

```
sudo apt-get install qt4-dev-tools libqt4-dev libqt4-core libqt4-gui 
```

如果您在 Mac 上

```
brew install qt 
```

接着

```
gem install capybara-webkit -v '0.11.0' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-07-29T07:19:48.347

对于 Ubuntu 16.04

`sudo apt-get install qt-sdk`

其次是

`gem install capybara-webkit -v '1.11.0'` 或替换为您要安装的任何版本。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-11T05:51:33.973

您可能缺少 qt 库。有关为您的平台安装它们的说明，请参阅[capybara-webkit wiki 。](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-05T01:07:23.013

`brew install qt`只会安装（截至 2015 年 8 月 4 日）`4.8.6`，它会为您提供此消息。

```
WARNING: The next major version of capybara-webkit will require at least version 5.0 of Qt. You're using version 4.8.6. 
```

相反，如果你这样做

```
brew install qt5
brew link --force qt5 
```

你不会得到那个错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-22T22:50:49.263

在 El Capitan 或 Yosemite 上，您可能需要 `brew install qt55` 按照[此处](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)的文档进行操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-29T10:22:11.897

对于 Ubuntu 20.04，您可以安装 qt5-default 包

```
sudo apt-get install g++ qt5-default libqt5webkit5-dev gstreamer1.0-plugins-base gstreamer1.0-tools gstreamer1.0-x 
```

然后安装所需版本的 gem：

```
gem install capybara-webkit -v '1.11.0' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-21T12:26:51.230

在 Fedora 上有点复杂。我做了下一个需要一段时间的：

```
$ sudo dnf install make gcc-c++ gdb qt5*-devel qt-creator
$ export QMAKE=/usr/bin/qmake-qt5
$ gem install capybara-webkit 
```

然后它起作用了！

[在 capybara-webkit wiki 上查看更多信息](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#fedora-24-25)

# java - Java 有哪些 Delta 编码/压缩算法库？

> ID：11354657
> 
> 赞同：1
> 
> 时间：2012-07-06T01:14:14.780
> 
> 标签：java, algorithm, diff, delta

因此，我正在阅读有关[delta encoding](https://en.wikipedia.org/wiki/Delta_encoding)的内容，并且正在四处寻找一些很好的例子。我*认为*谷歌浏览器使用类似的东西来更新补丁，[rsync](https://en.wikipedia.org/wiki/Rsync#Algorithm)可能，维基百科的文章暗示很多在线备份工具都使用它。

我很好奇是否有任何好的 Java 库可以做这种工作？似乎有大量的 *nix 和基于 C 的工具，但很少或没有 Java 等价物除了压缩数据结构之外做得更多。

无论如何，这对我来说是一个全新的概念，所以我很想了解有关它的任何内容，特别有兴趣看到有人使用 Java 来做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T06:06:29.027

我知道这是一个非常古老的问题，但我决定在这里发布这个问题，以防其他人偶然发现同样的问题。

这是我目前正在使用的。这真的很简单，而且效果很好。

[https://code.google.com/p/xdeltaencoder/](https://code.google.com/p/xdeltaencoder/)

不过，您需要确保对源进行校验和（在我的情况下为 fileAJson），因为它不会自动为您执行此操作！

无论如何，下面的代码：

```
//Create delta
String[] deltaArgs = new String[]{fileAJson.getAbsolutePath(), fileBJson.getAbsolutePath(), fileDelta.getAbsolutePath()};
XDeltaEncoder.main(deltaArgs);

//Apply delta
deltaArgs = new String[]{"-d", fileAJson.getAbsolutePath(), fileDelta.getAbsolutePath(), fileBTarget.getAbsolutePath()};
XDeltaEncoder.main(deltaArgs);

//Trivia, Surpisingly this also works
deltaArgs = new String[]{"-d", fileBJson.getAbsolutePath(), fileDelta.getAbsolutePath(), fileBTarget.getAbsolutePath()};
XDeltaEncoder.main(deltaArgs); 
```

[仅通过文件之间的差异更新数据（Java 的增量）](https://stackoverflow.com/questions/21330954/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:54:17.130

Wikipedia[列出了 VCDIFF delta 格式的几个 Java 实现](https://en.wikipedia.org/wiki/VCDIFF)。

该`rsync`算法还存在 Java 实现，可用于创建二进制差异。它们似乎还没有准备好生产，但是如果您只想查看代码，它们就可以了。请参阅[适用于 Java 的任何好的 rsync 库？](https://stackoverflow.com/questions/1246255/any-good-rsync-library-for-java).

# c# - 试图通过 .NET Linq 中的 where 子句集合找到一些标签

> ID：11354675
> 
> 赞同：1
> 
> 时间：2012-07-06T01:16:38.977
> 
> 标签：c#, .net, linq, .net-4.0

我正在尝试从单词列表中找到与名称相同的所有标签。

例如 ：-

```
public class Tag
{
   public int Id { get; set; }
   public string Name { get; set; }
   public string UserId { get; set; }
}

// Arrange.
var searchWords = new List<string>(new [] {"c#", ".net", "rails"});
var tags = new Tags
               {
                   new Tag { Name = "c#" },
                   new Tag { Name = "pewpew" },
                   new Tag { Name = "linq" },
                   new Tag { Name = "iis" }
               };

// Act.
// Grab all the tags given the following search words => 'c#' '.net' and 'rails'
// Expected: 1 result.
var results = ???

// Assert.
Assert.NotNull(results);
Assert.Equal(1, results.Count);
Assert.Equal("c#", results.First()); 
```

我一直在尝试使用`Any`，或者`Contains`我的代码无法编译。

注意：可以是 .NET 4.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T01:20:55.480

这对你有用吗？

```
var results = tags.Where(t => 
    searchWords.Contains(t.Name, StringComparer.InvariantCultureIgnoreCase)); 
```

另请注意，因为`results`您`IEnumerable<T>`将需要使用方法`results.Count()`而不是断言中的属性`results.Count`。 `Count`是`ICollection`接口定义的属性。

# javascript - 从 .html 页面获取 JSON 数据

> ID：11354676
> 
> 赞同：0
> 
> 时间：2012-07-06T01:16:49.023
> 
> 标签：javascript, jquery, html, json

我有一个动态 html 页面，我想使用 JSON 传递一个字符串。

以前，我只使用 PHP 完成此操作，例如：

```
$data->pagedata=$pagedata;
echo json_encode($data); 
```

我想知道是否有办法使用 JavaScript 或 JQuery 来做这个客户端？

该字符串将存储在 Javascript 变量中。我想使用 JQuery 从另一个网站检索该字符串。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:42:16.150

JSON 在特定的 URL 上？

如果您使用的是 JQUERY，则可以使用 load() 函数 - [http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:45:52.067

有一些方法可以做到这一点

1.  如果您的第 1 页通过 window.open 调用第 2 页，则第 2 页可以通过 window.parent.{variable name} 或 window.top.{variable} 访问所有第 1 页的 js 变量。当您在第 1 页的 iframe 中嵌入第 2 页时，这也可用

2.  如果您的第 1 页通过重定向调用第 2 页，则只能通过 url 传递变量。搞笑：[http](http://www.abc.com/?json=) ://www.abc.com/?json= {urlencodejson}。然后在第 2 页中使用 javascript 检索该编码的 json。

# php - 协助表格提交和“？” 从 URL 中删除

> ID：11354683
> 
> 赞同：0
> 
> 时间：2012-07-06T01:17:56.983
> 
> 标签：php, javascript, html, form-submit

我想知道如何发送用户在文本框中输入的任何内容；到最后`<form action=`。如果一个人无法访问网站代码源，那将如何处理？

```
<!DOCTYPE html>
<html>
    <head>
    <style type="text/css">
        a:link {color:#687BC6;}
        a:visited {color:#0F0;}
        a:hover {color:#000;}
        a:active {color:#0A0;}
    </style>
    </head>    
    <body>
        <form name="form1" method="get" action="http://www.blah.com/right-now/" target="_blank">
        <table border="0" cellpadding="2" cellspacing="0">
        <tr><td>ZC:</td>
        <td><input name="fld-zip" type="text" maxlength="7" size="15"></td></tr>
        <tr><td>&nbsp;</td>
        <td><input type="submit" name=Submit value="Submit this"></td></tr>
        </table>
        </form>
    </body>
</html> 
```

几乎是在问如何***将文本框中***的内容添加到 URL ***/ 的末尾？***当您单击提交按钮时。

所以它显示：文本框 - “11722” URL = [http://www.blah.com/right-now/11722](http://www.blah.com/right-now/11722)

有没有办法通过 css/html/php/js 做到这一点？每次我单击提交按钮时，它只会添加一个“？” 最后，它被切断了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:34:50.713

我会在页面顶部做这样的事情。

```
<?php
if (!(empty($_GET['fld-zip']))){ //check if the var is empty
$url = "http://www.blah.com/right-now/"; 
$page = $_GET['fld-zip'];
header("location:$url . $page"); //if its all good then redirect to the correct page
}
?> 
```

这可能可以通过多种不同的方式完成，但应该可以。

这 ？是否存在，因为表单是使用 get 提交的，它不会消失也不应该。在 HTML 表单中阅读 GET 和 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:36:58.373

添加这样的脚本

```
function formSubmit(){
   document.getElementById('frm1').setAttribute('action', "http://www.google.com/right-now/" +   document.form1["fld-zip"].value)
   document.form1["fld-zip"].value = '';
   return true;
} 
```

然后将`onsubmit`事件添加到您的表单

```
<form id="frm1" name="form1" method="get" action="http://www.blah.com/right-now/" target="_blank" onsubmit="return formSubmit()"> 
```

工作示例[http://jsfiddle.net/FtRKp/4/](http://jsfiddle.net/FtRKp/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:39:13.623

如果您使用 GET，链接应该类似于“http://www.blah.com/right-now?variable1=11722&variable2=11733。问号在变量的开头。它是如何被切断的？

如果您使用[http://www.blah.com/right-now/](http://www.blah.com/right-now/)作为操作，请确保[http://www.blah.com/right-now/index.php](http://www.blah.com/right-now/index.php)具有逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T01:44:58.630

因为您基本上只想打开一个新窗口，其中将文本框中输入的值连接到 url；稍微改变你的表单，使用按钮而不是提交，并使用 jquery(cleaner imo) 和一个简单的 js 函数将它完全放在一起并从表单中触发它`onClick="doForm()"`。

```
<script>
function doForm(){
   var param = $("#fld-zip").val();
   window.open ("http://www.blah.com/right-now/" + param,"openwindow");
}
</script>

<form name="form1" method="get" action="" target="_blank">
  ZC:<input name="fld-zip" id="fld-zip" type="text" maxlength="7" size="15">
     <input type="button" name="Submit" onClick="doForm()" value="Submit this">
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:02:00.140

好吧，我只是试一试......我不知道它是否会工作......做一件事，使用两个文件..一个获取邮政编码..

=>在文件1中，使用表格..提交后，将邮政编码发送到虚拟文件（第二个文件）即，action =“dummy.php”

=>在虚拟文件中将邮政编码分配给变量'$a'

```
$a=$_GET['zip']; 
```

现在使用 javascript

```
<script>
function a()
{
newwindow=open("http://www.blah.com/rightnow/'$a'",window,"height=900,width=1100");
}
</script> 
```

# python - pyparsing 是否知道解析时递归表达式的深度？

> ID：11354685
> 
> 赞同：3
> 
> 时间：2012-07-06T01:18:07.540
> 
> 标签：python, recursion, pyparsing

我喜欢定义`parseAction`with的能力`pyarsing`，但我遇到了特定用例的障碍。取输入字符串和以下简单语法：

```
from pyparsing import *

line = "[[one [two [three] two [three [four]]] one] zero]"
token = Word(alphas)

# Define the simple recursive grammar
grammar = Forward()
nestedBrackets = nestedExpr('[', ']', content=grammar) 
grammar << (token | nestedBrackets)

P = grammar.parseString(line)
print P 
```

我希望结果是：

```
[('one',1), [('two',2), [('three',3)], ('two',2), [('three',3), [('four',4)]]] one], ('zero',0)] 
```

即解析每个`token`并返回一个带有标记和深度的元组。我知道这可以在解析后完成，但我想知道是否可以使用`parseAction`. 这是我对全局变量的错误尝试：

```
# Try to count the depth
counter = 0
def action_token(x):
    global counter
    counter += 1
    return (x[0],counter)
token.setParseAction(action_token)

def action_nest(x):
    global counter
    counter -= 1
    return x[0]
nestedBrackets.setParseAction(action_nest) 
```

给予：

```
[('one', 1), ('two', 2), ('three', 3), ('two', 3), ('three', 4), ('four', 5), ('one', 3), ('zero', 3)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T02:30:44.097

执行此操作（保留其余部分）：

```
def openB(s, l, t):
    global count
    count += 1
def closeB(s, l, t):
    global count
    count -= 1

opener = Literal("[").setParseAction(openB)
closer = Literal("]").setParseAction(closeB)

nestedBrackets = nestedExpr(opener, closer, content=grammar) 
```

问题是嵌套不取决于匹配的嵌套*组*的数量，而是取决于匹配的开括号数量与匹配的闭括号数量。因此，您需要在解析开/关括号时调整计数，而不是在解析组时。因此，您需要在组分隔符上设置 parseAction，而不是组本身。

此外，您的示例嵌套了一层（至少在我看来）。“零”实际上应该是一，因为它在括号的一级内，同样其他所有内容都应该向上移动一。如果您真的希望最外面的“零”具有零级等等，您需要初始化`count`为-1。

# cocos2d-iphone - cocos2d 子类化精灵来处理触摸？

> ID：11354689
> 
> 赞同：2
> 
> 时间：2012-07-06T01:18:45.563
> 
> 标签：cocos2d-iphone, touch, sprite, layer, cocos2d-x

我是 cocos2d(-x) 世界的新手。

我想检测精灵的触摸，教程/示例似乎建议使用图层来检测触摸并找到带有边界框的适当精灵。

子类化精灵以允许触摸检测通常是一个坏主意吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T23:01:48.153

*注意：此答案可能已过时。我在 2012 年回答了这个问题。*

这不是一个坏主意。这是我的做法：

头文件：

```
#include "cocos2d.h"
using namespace cocos2d;
class TouchableSprite : public cocos2d::CCSprite, public CCTargetedTouchDelegate {
    public:
    virtual void onEnter();
    virtual void onExit();
    virtual bool ccTouchBegan(CCTouch* touch, CCEvent* event);
    virtual void ccTouchMoved(CCTouch* touch, CCEvent* event);
    virtual void ccTouchEnded(CCTouch* touch, CCEvent* event);
}; 
```

cpp文件：

```
#include "TouchableSprite.h"
void TouchableSprite::onEnter(){
    // before 2.0:
    // CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this, 0, true);

    // since 2.0: 
    CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(this, 0, true);
    CCSprite::onEnter();
}
void TouchableSprite::onExit(){
    // before 2.0:
    // CCTouchDispatcher::sharedDispatcher()->removeDelegate(this);

    // since 2.0:
    CCDirector::sharedDirector()->getTouchDispatcher()->removeDelegate(this);
    CCSprite::onExit();
}
bool TouchableSprite::ccTouchBegan(CCTouch* touch, CCEvent* event){
    //do whatever you want here
    return true;
}
void TouchableSprite::ccTouchMoved(CCTouch* touch, CCEvent* event){
    //do what you want
}
void TouchableSprite::ccTouchEnded(CCTouch* touch, CCEvent* event){
    //do your job here
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-25T13:07:31.667

在 cocos2d-x 3.0 alpha 中你可以试试这个：

```
auto listener = EventListenerTouchOneByOne::create();

listener->setSwallowTouches(true);

listener->onTouchBegan = [&](Touch* touch, Event* event){

    if (this->getBoundingBox().containsPoint(this->convertTouchToNodeSpace(touch))) {
        return true;
    }
    return false;

};

Director::getInstance()->getEventDispatcher()->addEventListenerWithSceneGraphPriority(listener, this); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T16:28:04.467

在一个地方处理触摸会更好，更清晰。但我想，没有人能阻止你这样做

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-06T17:01:01.760

您不需要子类化精灵来检测触摸。

在这里，关注这个[LINK](http://www.raywenderlich.com/tutorials "关联")是开始使用 Cocos2d 的好地方

# iphone - 重新组织标签栏项目

> ID：11354696
> 
> 赞同：1
> 
> 时间：2012-07-06T01:19:37.507
> 
> 标签：iphone, uitabbaritem

我有一个包含 5 个标签栏项目的应用程序。我想重新组织它们，所以我想将最后一个位置项移动到第 4 个位置。

是否有捷径可寻？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:45:50.660

@houbysoft 的回答是正确的，只是更多的细节：

`@property(nonatomic, copy) NSArray *viewControllers`您可以致电：`UITabBarController`

请注意，这将返回一个`NSArray`. 为了使用它，您需要创建一个可变副本。然后，您可以使用`exchangeObjectAtIndex:withObjectAtIndex:`then 将其传递回`setViewControllers:`整个事情可能如下所示：

```
NSMutableArray *myArray = [[myTabBar viewControllers] mutableCopy];
[myArray exchangeObjectAtIndex:4 withObjectAtIndex:3];
[myTabBar setViewControllers:myArray]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:23:41.783

是的; 你可以问你[`UITabController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)的`viewControllers`阵列。

拥有它后，根据需要移动项目，然后使用`[yourUITabBarController setViewControllers:yourNewViewControllersArray]`.

# android - webm 无法在 Android 上播放

> ID：11354708
> 
> 赞同：10
> 
> 时间：2012-07-06T01:21:16.493
> 
> 标签：android

我的印象是 webm 在 Android 上播放，但我无法在我的 Galaxy Nexus 上播放视频。我没有在手机上的浏览器中尝试过，直接在 VideoView 中。是否需要一些神奇的设置组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:33:53.507

是的，webm 在 android 上运行得很好。但是，要知道 HTML5 视频总是很棘手。

最好的检查方法是在浏览器中加载一个 webm 文件：http: [//clips.vorwaerts-gmbh.de/big_buck_bunny.webm](http://clips.vorwaerts-gmbh.de/big_buck_bunny.webm)

视频可能无法为您播放的原因有很多，包括：

*   webm 文件可能未正确编码
*   您正在使用不处理 webm 文件的视频播放应用程序
*   将数据传输到手机时丢失数据完整性
*   您的操作系统的当前版本可能存在问题（尽管如果您是 2.2 或更高版本，则确实不应该存在）

使用 html5 视频生成器来查看您的手机上正在播放哪些视频格式（webm 和 mp4 应该）[http://sandbox.thewikies.com/vfe-generator/](http://sandbox.thewikies.com/vfe-generator/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T15:40:45.890

在我的nexus4上开发时，我确实遇到了同样的错误/问题（在华为y300和y303手机上它工作得很好！）。在开发人员选项中切换到 NuPlayer 解决了这个问题。显然，在我的情况下，已弃用的 AwesomePlayer 无法播放 webm。

Nexus 4 安卓版本 5.1

这里也谈到了：[https ://github.com/Floens/Clover/issues/2](https://github.com/Floens/Clover/issues/2)

# c++ - 不一致的clock_gettime性能

> ID：11354717
> 
> 赞同：4
> 
> 时间：2012-07-06T01:24:19.657
> 
> 标签：c++, time

我正在尝试为一些 C++ 代码计时，但结果很奇怪。我编写了这个测试程序来尝试隔离正在发生的事情。谁能解释一下结果？这是在 Ubuntu 11.04 和 EC2 中高 CPU 实例上运行的（如果相关）

```
#include <iostream>
#include <time.h>
using namespace std;

int main()
{
    timespec startTime, currentTime;
    long elapsed;

    for (int i=0; i<5; i++) {
        clock_gettime(CLOCK_REALTIME, &startTime);
        sleep(1);
        clock_gettime(CLOCK_REALTIME, &currentTime);
        elapsed = currentTime.tv_nsec - startTime.tv_nsec;
        cout << elapsed << " nanoseconds elapsed" << endl;
        cout << "1000000000 expected" << endl;
    }
    return 0;
} 
```

输出：

```
109044 nanoseconds elapsed
1000000000 expected
133713 nanoseconds elapsed
1000000000 expected
197287 nanoseconds elapsed
1000000000 expected
143396 nanoseconds elapsed
1000000000 expected
111871 nanoseconds elapsed
1000000000 expected 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:27:14.340

您还必须考虑到当前时间可能已经滚动到下一秒。纳秒字段仅告诉您在当前秒内您在时间上走了多远。

```
 elapsed = (currentTime.tv_sec - startTime.tv_sec) * 1000000000
              + currentTime.tv_nsec - startTime.tv_nsec; 
```

# javascript - 使用 JqGrid 的 Grails 使用 List() 进行内联编辑

> ID：11354718
> 
> 赞同：0
> 
> 时间：2012-07-06T01:24:32.900
> 
> 标签：javascript, jquery, json, grails, jqgrid

我正在使用 Grails 设置 JqGrid 并进行内联编辑。当用户选择特定单元格时，会出现一个下拉框。

我想从表格中填充此下拉列表，但无法将各个部分连接在一起。这是我到目前为止的代码......

```
$(document).ready(function() {

    jQuery("#task_list").jqGrid({
          ...

          colModel:[
          {name:'foo', editable:true, edittype:'select', editOptions:{values: ${com.project.inf.Domain.list()}}},
          ... 
```

${com.project.inf.Domain.list()} 创建一个以逗号分隔的项目列表，我希望将其显示为下拉列表中的选项。但是，似乎 editOptions 只接受名称：值对。有没有一种简单的方法来重新格式化 List() 以使其被接受？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:54:11.147

Yo lo resolví asi:

**看法：**

{name:'listaDinamica',width:90, editable: true, editrules:required:true},edittype:'select',

编辑选项：{值：'${slcustomer}'}}，

**控制器：**

类 TablaModeloController {

```
TablaModeloService tms=new TablaModeloService()
def slcustomer= tms.llenaClientes()
def sl=Customer.list()

def index() {} 
```

...

**服务：**

类 TablaModeloService {

    def llenaClientes(){

        定义客户=''

            Customer.list().each{

            客户+=it.id+":"+it.firstName+";"

        }

        客户=客户[0..-2]

        返回客户 }

}

完美的特拉巴哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:52:25.263

经过一些实验和阅读教程，我找到了解决这个问题的方法。我必须创建一个自定义控制器操作并使用“dataUrl”选项来使用它，如下所示：

```
{name:'foo', width:100, editable:true, edittype:'select', 
editoptions: {dataUrl:'${createLink(controller:"bar",action:"listAsSelect")}'}} 
```

将以下内容作为“bar”控制器中的 listAsSelect 操作：

```
def listAsSelect={
    def lst = Bar.findAll()

    StringBuffer buf = new StringBuffer("<select>")
    lst.each{
        buf.append("<option value=\"${it.id}\">")
        buf.append(it.toString())
        buf.append("</option>")
    }
    buf.append("</select>")

    render buf.toString()
} 
```

# android - Android XML 解析错误 - Parsed SQUARES

> ID：11354719
> 
> 赞同：2
> 
> 时间：2012-07-06T01:24:59.737
> 
> 标签：android, xml

我已经解析了 2 个不同的 xml 文件，但是当我解析法语版本时，它有正方形和奇怪的符号！我该怎么做才能使它清晰易读？![在此处输入图像描述](../Images/f967bd242e33f5ae6f8b72f5ea5c7a2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:17:42.367

您的程序似乎无法处理法语中使用的某些重音字符（ç、é、â 等）。但是，根据我的经验，手机可以很好地处理这些字符。在解析某些信息的过程中可能会混淆/丢失。我会考虑以不同的方式解析（可能使用不同的编码选项）或试图找出更好的方法在屏幕上显示这些字符......

# php - PHP从服务器获取响应

> ID：11354721
> 
> 赞同：0
> 
> 时间：2012-07-06T01:25:09.657
> 
> 标签：php, response

我对 PHP 有点困惑。这是一个简单的问题

我想提交一个表格。例如：

```
<form name='formname' action='code.php' method="POST">
    <input name='inputname' type='text'/>
    <input type='submit'>
</form> 
```

因此，服务器获取输入的任何内容，并且为了参数，它添加`cool`到文本的末尾并回显`$inputname.'cool text you got there';`

如何获得该响应并在我的 javascript 中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:31:07.690

您的响应将在`code.php`或`code.php`重定向到的页面中。

基本上，您提交表单，它加载 code.php，表单输入使用的任何逻辑都到那里并与数据库交互，然后您选择如何从那里重定向用户。

如果您想查看 inputname 表单输入是否已设置，您可以执行以下操作：

```
<?php
        if(isset($_POST["inputname"]))
        {
            $inputname = $_POST["inputname"];
            echo $inputname;
        }
        else
        {
            echo "inputname not set!";
        }
?> 
```

为了让它在你的 javascript 中使用，一种可能的方法是在 url 中添加一个变量：

```
./mypage.php?input=yourinputname 
```

然后，在带有表单的主页（或您重定向到的任何页面）上，您可以使用 PHP 检查是否`$_GET['input']`存在，然后根据需要回显它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:33:59.187

如果你想要它在新页面上 - 所以提交表单，浏览器会转到表单中指定的 PHP 页面。然后你会有这样的东西..

```
<?php
$input = $_POST['input'] . 'Cool text you got there!';
?>
...
<script type="text/javascript">
var varName = '<?php echo $input ?>';
</script> 
```

但是，如果您想要没有 jQuery 的 AJAX 样式 - 您将使用[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)通过拦截表单的事件处理程序将 PHP 脚本中的数据直接获取到网页中。

# ruby-on-rails - 如何以一对多的关系链接到页面？

> ID：11354722
> 
> 赞同：0
> 
> 时间：2012-07-06T01:25:38.180
> 
> 标签：ruby-on-rails, ruby, paperclip, ruby-on-rails-3.2

我正在使用回形针和导轨。我遵循了本教程： [使用 Paperclip 和 Rails 3 上传多个文件（屏幕截图）](http://www.emersonlackey.com/article/paperclip-with-rails-3 "使用 Paperclip 和 Rails 3 上传多个文件（截屏）")

我有一个画廊模型，里面有很多画廊照片。

我没有链接到视图中的原始图像，而是在 photoimage 中创建了一个 show 方法，但出现以下错误：

```
undefined method `galleryphoto_path' for #<#<Class:0x007f40a0000c20>:0x00000005385d60> 
```

这是我的代码：

```
<% for asset in gallery.galleryphotos %>
  <%= link_to image_tag(asset.photo.url(:thumb)), url_for(asset) %>
<% end %> 
```

这是我的画廊照片控制器：

```
class GalleryphotosController < ApplicationController
  load_and_authorize_resource

  def show
    @gallery = Gallery.find(params[:gallery_id])
    @galleyphoto = @gallery.galleyphotos.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @gallery }
    end
  end
 end 
```

这是我的路线：

```
 resources :galleries do
    resources :galleryphotos
  end 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:55:29.210

助手将`url_for`找不到模型的路线，`Galleryphoto`因为它取决于`Gallery`模型。它在路由中被声明为嵌套资源，因此在 url 中`Galleryphoto`没有 a 就不存在 a 。`Gallery`

要解决此问题，请执行以下任一操作：

```
<%= link_to image_tag(asset.photo.url(:thumb)), url_for(gallery, asset) %> 
```

或者

```
<%= link_to image_tag(asset.photo.url(:thumb)), gallery_galleryphoto_path(gallery, asset) %> 
```

# ruby-on-rails - 如何在两个 Rails 模型之间创建关联

> ID：11354724
> 
> 赞同：1
> 
> 时间：2012-07-06T01:26:52.810
> 
> 标签：ruby-on-rails, ruby, rails-models

这是一个新手问题，但我仍在学习如何在 Rails 中的两个模型之间创建关联。我有一个用户模型和一个 journal_entry 模型。日记条目属于用户并且用户有_many 日记条目。我创建了如下所示的迁移：

```
class AddJournalEntriesToUsers < ActiveRecord::Migration
  def change    
    add_column :journal_entries, :user_id, :integer
  end
end

class AddIndexToJournalEntries < ActiveRecord::Migration
  def change
    add_index :journal_entries, [:user_id, :created_at]
  end
end 
```

这是我的用户模型的样子：

```
class User < ActiveRecord::Base
  authenticates_with_sorcery!

  attr_accessible :email, :password, :password_confirmation

  has_many :journal_entries, dependent: :destroy

  validates_confirmation_of :password, :message => "should match confirmation", :if => :password
  validates_length_of :password, :minimum => 3, :message => "password must be at least 3 characters long", :if => :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email

end 
```

这是我的 journal_entry 模型的样子：

```
class JournalEntry < ActiveRecord::Base
  attr_accessible :post, :title, :user_id

  belongs_to :user

  validates :user_id, presence: true

  default_scope order: 'journal_entries.created_at DESC'
end 
```

但是当我去创建一个新的日记帐分录时，`/journal_entries/new`我只是一个验证错误，上面写着“用户不能为空”。因此，即使我已登录并且我的 db/schema.rb 中有一个 user_id 列，user_id 也不会添加到日志条目中：

```
create_table "journal_entries", :force => true do |t|
    t.string   "title"
    t.text     "post"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end 
```

此外，这是我在 journal_entries/new 上用来创建日记条目的表单：

```
<%= form_for(@journal_entry) do |f| %>
  <% if @journal_entry.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@journal_entry.errors.count, "error") %> prohibited this journal_entry from being saved:</h2>

      <ul>
      <% @journal_entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :post %><br />
    <%= f.text_area :post %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

What am I missing here? Do I need to add the user_id as a hidden field on the form?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:26:35.173

i bet, that u forget something like

```
def create
    @journal_entry = @user.journal_entries.build(params[:journal_entry])
    # @journal_entry = current_user.journal_entries.build(params[:journal_entry])
    if @journal_entry.save
    .. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T03:40:57.517

journal_entry model should look like

```
class JournalEntry < ActiveRecord::Base
  attr_accessible :post, :title, :user_id
  belongs_to :user
  validates :user_id, presence: true
  default_scope order: 'journal_entries.created_at DESC'
end 
```

This should work!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:39:42.693

You need to add user_id to your `attr_accessible` call, if you look at your logs it is probably warning you that it can't mass assign it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T16:09:15.540

Ok, so I got this working by adding the user to the create action in my journal_entries_controller.rb. Here's the code I used, but is this the "rails way" to do this?

```
def create
  @user = current_user
  @journal_entry = @user.journal_entries.build(params[:journal_entry])
  if @journal_entry.save
    flash[:success] = "Journal entry created!" 
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T16:17:51.560

you have it right this time. You added the user association to the journal model which loads the user in the controller before displaying it in the view. You do need the hidden fields in your form which you added, since you are using a stateless protocol. On the update/create action, double check that the user posting is the user using and save.

# android - Android - 如何删除布局中的视图（动态添加的视图）

> ID：11354729
> 
> 赞同：6
> 
> 时间：2012-07-06T01:27:44.880
> 
> 标签：android, view

当我努力删除 RelativeLayout（动态）中的视图时，我收到一条消息错误 - 强制关闭。

添加视图：（layout是relativelayout，Sunanim的扩展View）

```
SunAnim rotateImg = new SunAnim(this);  
rotateImg.setTag("imgsun");
layout.addView(rotateImg); 
```

删除视图：（CloudAnim <=> SunAnim）

```
class CountDownRunner implements Runnable{
        // @Override
        public void run() {
                while(!Thread.currentThread().isInterrupted()){
                    try {

                        Thread.sleep(1000);
                        delAnim ++;
                        SunAnim rotateImg = (SunAnim)layout.findViewWithTag("imgsun");
                        CloundAnim cl = (CloundAnim)layout.findViewWithTag("imgcl");
                        if (rotateImg != null && delAnim == 15) {
                            ((RelativeLayout)rotateImg.getParent()).removeView(rotateImg);   
                            layout.invalidate();
                            delAnim = 0;
                            Log.d("Rotate","Deleted");
                        }
                        if (cl != null && delAnim == 15) {
                            ((RelativeLayout)cl.getParent()).removeView(cl); 
                            layout.invalidate();
                            delAnim = 0;
                            Log.d("CL","Deleted");
                        }

                    } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                    }catch(Exception e){
                    }
                }
        }
    } 
```

最后 - Logcat T_T ：

```
07-06 08:14:36.326: E/AndroidRuntime(3733): Uncaught handler: thread main exiting due to uncaught exception
07-06 08:14:36.373: E/AndroidRuntime(3733): java.lang.NullPointerException
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1255)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.View.draw(View.java:6277)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.View.draw(View.java:6277)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.drawChild(ViewGroup.java:1524)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.View.draw(View.java:6277)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1883)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewRoot.draw(ViewRoot.java:1332)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1097)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1613)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.os.Looper.loop(Looper.java:123)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at android.app.ActivityThread.main(ActivityThread.java:4203)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at java.lang.reflect.Method.invoke(Method.java:521)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
07-06 08:14:36.373: E/AndroidRuntime(3733):     at dalvik.system.NativeStart.main(Native Method) 
```

我应该修复它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-06T11:54:10.067

您正在尝试从 ui 线程以外的线程访问视图。您最好使用 Handler 实现或简单地使用

```
layout.post(() -> layout.invalidate()); 
```

在 ui 线程中执行视图操作。

有关更多详细信息，请参阅 [https://developer.android.com/guide/components/processes-and-threads](https://developer.android.com/guide/components/processes-and-threads)

但是，请注意，您不能从 UI 线程或“主”线程以外的任何线程更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:45:41.307

您是否尝试过在 removeView 循环中调用 layout.postInvalidate() 而不是 layout.validate()？

# node.js - Node JS 异步 requestHandler（用于路由）

> ID：11354730
> 
> 赞同：0
> 
> 时间：2012-07-06T01:27:49.003
> 
> 标签：node.js, asynchronous

我正在阅读[The Node Beginners book](http://www.nodebeginner.org/)并且对 node js 请求处理的“同步方式”有疑问。那么我的意思是假设我的网站有 2 个页面启动和上传（根据教程），我对 2 个页面发出并发请求，然后请求被串行处理（比如第一次启动将被获取，然后上传将被获取）。如果我的网站每秒接收 100 个请求（并且我只运行一个节点进程），所有这些请求都将被串行处理。所以对路由器没有意义吗
调用 setTimeOut 中的所有 requestHandlers（类似于 setTimeOut(handler(response), 0) ）？这样，路由器的任务将仅限于调用处理程序并移动到下一个请求等待。当然，页面需要时间来加载，具体取决于其大小和操作，但至少时间用于完成重要工作，而不是仅仅等待其他页面。

我也知道节点运行一个进程。但它确实运行多个线程不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:05:02.290

为了回答你的最后一个问题，你用 JavaScript 为 Node 程序编写的所有代码都在一个线程中运行；异步 I/O 任务由[libuv](https://github.com/joyent/libuv/)抽象出来。

我认为您没有以足够细化的方式考虑您的两个请求；你说，

> 首先将获取开始，然后将获取上传

但是，实际上，Web 请求和响应是由各种 IO 任务组成的，而不仅仅是您在 JavaScript 程序中所做的处理。例如，当数据通过套接字为“start”处理程序流式传输时，数据也可以为“upload”处理程序流式传输到程序中。

# facebook - 在设备 oauth 流程中出现错误 400

> ID：11354735
> 
> 赞同：0
> 
> 时间：2012-07-06T01:28:23.963
> 
> 标签：facebook, oauth

发布 http 帖子时：

```
https://graph.facebook.com/oauth/device?type=device_code&client_id=myclientid 
```

我收到 http 400 错误。我在这里做错了吗？device_code 应该不是 device_code 吗？这里看起来不是这样：

[https://developers.facebook.com/docs/authentication/devices/](https://developers.facebook.com/docs/authentication/devices/)

我刚刚开始尝试无浏览器的 facebook 身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:45:32.043

好吧，点击[https://graph.facebook.com/oauth/device?type=device_code&client_id=myclientid](https://graph.facebook.com/oauth/device?type=device_code&client_id=myclientid)会给你一个非常清晰的错误消息：

```
{
   "error": {
      "message": "Unsupported type: 'device_code'. Supported types: web_server, user_agent, client_cred, username",
      "type": "OAuthException",
      "code": 1
   }
} 
```

链接的[规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-05#section-3.7.1)虽然说：

```
type
         REQUIRED.  The parameter value MUST be set to "device_code". 
```

正如[Facebook](https://developers.facebook.com/docs/authentication/devices/)所说：

> 然而，规范和我们的实现都在不断完善，因此应该会出现一些细微的差异。

这可能是实现和文档之间的一些临时故障。

无论如何，您确定您已经可以访问设备身份验证吗？

> 请注意，我们目前正在与数量有限的合作伙伴一起测试设备身份验证。它目前不可用于一般用途，我们不接受额外的访问申请。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T04:46:54.013

如果您使用以下 URL（仅更改 appId），您将获得结果。它将返回一个代码、ID、验证 URI 等。事实是设备流 api 仅适用于上述 appId 并且由 facebook 提供。没有其他 AppId 不起作用。一切都会返回这样的错误

```
{
"error": {
  "message": "Unsupported type: 'device_code'. Supported types: web_server, user_agent, client_cred, username",
  "type": "OAuthException",
  "code": 1
         }
} 
```

# c++ - 代理调用功能如何工作？

> ID：11354737
> 
> 赞同：4
> 
> 时间：2012-07-06T01:28:43.713
> 
> 标签：c++, templates

这是类似于我在“C++ 中的隐藏特性”一文中读到的代理调用函数的源代码

唯一让我感到困惑的部分是那些运算符重载函数。他们是什么类型的运营商？（它们当然看起来不像普通的 operator()，为什么即使没有指定返回类型，它也会返回一个函数指针？

谢谢！

```
template <typename Fcn1, typename Fcn2>
class Surrogate {
public:
    Surrogate(Fcn1 *f1, Fcn2 *f2) : f1_(f1), f2_(f2) {}

    // Overloaded operators.
    // But what does this do? What kind of operators are they?
    operator Fcn1*() { return f1_; }
    operator Fcn2*() { return f2_; }

private:
    Fcn1 *f1_;
    Fcn2 *f2_;
};

void foo (int i)
{
    std::cout << "foo: " << i << std::endl;
}

void bar (double i)
{
    std::cout << "bar: " << i << std::endl;
}

int main ()
{
    Surrogate<void(int), void(double)> callable(foo, bar);

    callable(10);       // calls foo
    callable(10.1);     // calls bar

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T01:32:36.067

它们是 Fcn1* 和 Fcn2* 的隐式类型转换运算符。

在表达式“callable(10)”中，编译器使用 Surrogate 中定义的第一个类型转换运算符将 callable 转换为指向具有 int 参数的函数的指针。然后调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:33:09.947

调用`callable(10);`实际上是`*(callable.operator void(*)(int))(10);`.

编译器已经发现`callable`在函数调用表达式中使用了它。现在，对于函数调用表达式，编译器想要一个函数、函数指针或带有`operator()`- 的对象，正如您已经知道的那样。

在这种情况下，`callable`这些都不是。但`callable`可以*转换*为其中之一，即转换为函数指针。给定调用表达式，特别是`int`参数，重载决策选择`void(*)(int)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T01:42:33.183

这些只是用户定义的转换运算符。用户定义的转换运算符是 C++ 语言的一个基本特性，这意味着您可以在 C++ 书籍或一些教程中了解它们。

语言规范的第 12.3.2 节描述了语法，但是编译器管理它们使用的规则分散在整个文档中并且相对广泛。即它不是可以或应该在 SO 帖子中解释的东西。

找一本书。如果您对书中的某些内容不清楚，请回到这里。

# python - 使用导入的模块进行 python 测试

> ID：11354739
> 
> 赞同：2
> 
> 时间：2012-07-06T01:29:00.590
> 
> 标签：python, mocking, python-mock

一般来说，我对使用模拟和测试还很陌生。这是我第一次尝试模拟整个导入的模块。所以例如我有

```
try:
    import redis
except:
    redis = None 
```

然后稍后在代码中我检查redis

```
if redis is None:
     return 
```

如何将模拟对象或类设置到 redis 命名空间，这样我就不必在 CI 服务器上安装 redis？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:34:25.653

名称只是名称，您可以在文件/全局范围内将任何内容分配给“redis”名称，使用任何一个`import`或普通的旧分配。

像这样：

```
import mock_redis as redis 
```

...或者：

```
def mock_redis(): pass 
```

顺便说一句，您的例外条款应缩小为仅处理`ImportError`.

# ios - App Store 未来发布日期

> ID：11354752
> 
> 赞同：0
> 
> 时间：2012-07-06T01:31:18.203
> 
> 标签：ios, app-store, app-store-connect, appstore-approval

有什么方法可以更改当前“等待审核”的当前版本的发布日期？我在权利和定价中找到了“设置可用日期”，但这表示它将更改所有版本的可用日期，包括当前在 App Store 中的版本，而我当前的版本将被删除。

基本上我希望我的更新在我说的时候发布（有点像你第一次上传二进制文件时的选项）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:38:45.557

当您在 iTunes Connect 中将应用程序标记为准备上传时，您可以选择立即发布或等待开发者发布。如果它没有“等待审核”很长时间，您可以拒绝二进制文件并重新上传，这次选择“等待开发人员发布”选项。

# c# - 如何在 Excel 中显示主从行

> ID：11354753
> 
> 赞同：1
> 
> 时间：2012-07-06T01:31:37.420
> 
> 标签：c#, excel, master-detail

是否可以使用 C# 在 Excel 中显示主子行？

例如，第一行有两个孩子，所以会有一个加号。当用户单击它时，将显示子项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:34:23.297

是的，您可以使用数据透视表来做到这一点。[http://office.microsoft.com/en-us/excel-help/expand-collapse-or-show-details-in-a-pivottable-or-pivotchart-report-HP010175905.aspx](http://office.microsoft.com/en-us/excel-help/expand-collapse-or-show-details-in-a-pivottable-or-pivotchart-report-HP010175905.aspx)

# java - 过去 24 小时的求和时间

> ID：11354756
> 
> 赞同：3
> 
> 时间：2012-07-06T01:32:01.900
> 
> 标签：java, time, calendar, hour

我有以下方法来总结时间：

```
public static String sumTime(String date1, String date2) throws ParseException {
    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat formatter = new SimpleDateFormat("HH:mm:ss.SSS");

    Date d1 = formatter.parse(date1);
    Date d2 = formatter.parse(date2);
    calendar.setTime(d2);

    d1 = DateUtils.addHours(d1, calendar.get(Calendar.HOUR_OF_DAY));
    d1 = DateUtils.addMinutes(d1, calendar.get(Calendar.MINUTE));
    d1 = DateUtils.addSeconds(d1, calendar.get(Calendar.SECOND));
    d1 = DateUtils.addMilliseconds(d1, calendar.get(Calendar.MILLISECOND));

    return formatter.format(d1);
} 
```

DateUtils 来自[Apache Commons Lang 3](http://commons.apache.org/lang/download_lang.cgi)
它非常适合我想要的，除非总和大于 24 小时。

例如：

```
String time = "00:00:00.000";

try {
    for (int i = 0; i < 24; i++) {
            time = sumTime(time, "01:00:00.123");
    }

    System.out.println(time);
} catch (ParseException e) {
    e.printStackTrace();
} 
```

结果是：

```
00:00:02.952 
```

但这就是我想要的：

```
24:00:02.952 
```

有没有（简单的）方法可以做到这一点？
我不介意使用不同的库/方法，只要我得到正确的结果。

请记住，时间*总是*从 00:00:00.000 开始；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:37:04.957

你有没有想过用天来表示每组 24 小时？您可以在 sumTime 方法中添加一些内容，并让它添加天数。SimpleDateFormater 可以使用天数，也许这会有所帮助：

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:51:43.047

`java.util.Date`在这方面没有那么强。有关正确处理此问题的库，请参阅[Joda Time](http://joda-time.sourceforge.net/)。

我现在无法访问安装。代码将接近此：

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("HH:mm:ss.SSS");
DateTime start = dtf.parseDateTime(date1);
DateTime end = dtf.parseDateTime(date2);
PeriodFormatter pf = new PeriodFormatterBuilder()
 .printZeroAlways().appendHours().appendSeparator(":")
 .appendMinutes().appendSeparator(":")
 .appendSeconds().appendSeparator(":")
 .appendMillis3Digit().toFormatter();
return pf.print(new Period(start, end, PeriodType.time())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:08:12.400

`Date`不是使用正确的东西类。`Date`是一瞬间，而不是“日期差异”。

正如有人已经建议的那样，正确的做法是使用像[Joda Time这样的库。](http://joda-time.sourceforge.net/ "乔达时间")如果您不想这样做 - 这里有一个可能的选择：

自己将字符串解析为小时、分钟和秒，然后自己添加。

不过，我鼓励您研究一个“被广泛接受”的库。在我的解决方案中可能有些事情我没有想到。此外，您还添加了所有错误检查。

这是启动代码：

```
public class TimeInterval {
short milliSeconds;
short seconds;
short minutes;
int hours;

public TimeInterval (String dateString) {
    // HHHHHH:MI:SS.SSS
    Pattern pattern = Pattern.compile("(\\d+):(\\d\\d):(\\d\\d)\\.(\\d\\d\\d)");
    Matcher matcher = pattern.matcher(dateString);
    if ( matcher.find() ) {
        hours = Integer.parseInt(dateString.substring(matcher.start(1), matcher.end(1)));
        minutes = Short.parseShort(dateString.substring(matcher.start(2), matcher.end(2)));
        seconds = Short.parseShort(dateString.substring(matcher.start(3), matcher.end(3)));
        milliSeconds = Short.parseShort(dateString.substring(matcher.start(4), matcher.end(4)));
    }
}

private TimeInterval() {
}

public TimeInterval add(TimeInterval interval) {
    TimeInterval ret = new TimeInterval();
    ret.milliSeconds = (short) ((interval.milliSeconds + milliSeconds)%1000);
    int carry = (interval.milliSeconds + milliSeconds)/1000;
    ret.seconds = (short) ((interval.seconds + seconds)%60 + carry );
    carry =(interval.seconds + seconds)/60;
    ret.minutes = (short) ((interval.minutes + minutes)%60 + carry);
    carry = (interval.minutes + minutes)/60;
    ret.hours = (interval.hours + hours + carry);
    return ret;
}

@Override
public String toString() {
    return String.format("%d:%02d:%02d.%03d", hours, minutes, seconds, milliSeconds);
}
} 
```

使用此类，您的程序将如下所示：

```
TimeInterval time = new TimeInterval("00:00:00.000");

try {
    for (int i = 0; i < 24; i++) {
      time = time.add(new TimeInterval("01:00:00.123"));
    }

    System.out.println(time.toString());
} catch (ParseException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T03:26:28.240

您是否尝试过实际上直接支持此类事情的 Joda-Time？

```
 PeriodFormatterBuilder builder = new PeriodFormatterBuilder();
    builder.printZeroAlways()
        .minimumPrintedDigits(2)
        .appendHours()
        .appendSeparator(":").appendMinutes()
        .appendSeparator(":").appendSeconds()
        .appendSeparator(".").appendMillis3Digit();

    PeriodFormatter formatter = builder.toFormatter();
    PeriodParser parser = builder.toParser();

    String s1 = "11:00:00.111";
    String s2 = "23:00:00.111";

    MutablePeriod p1 = new MutablePeriod();
    MutablePeriod p2 = new MutablePeriod();
    parser.parseInto(p1, s1, 0, Locale.getDefault());       
    parser.parseInto(p2, s2, 0, Locale.getDefault());       
    p1.add(p2);

    System.out.println(formatter.print(p1)); 
```

印刷

```
34:00:00.222 
```

# http - 代理重新验证 http 标头

> ID：11354757
> 
> 赞同：0
> 
> 时间：2012-07-06T01:32:08.093
> 
> 标签：http, caching, proxy

我一直在试图弄清楚为什么某些旧配置使用 Cache-Control HTTP 标头字段的 proxy-revalidate 指令。我遇到了 HTTP 规范这一部分的作者的[这篇](http://www.hpl.hp.com/personal/ange/archives/archives-96/http-wg-archive/2775.html)存档文章，他在其中承认该指令对其预期目的没有用（在[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.4)中描述）。这仍然是普遍观点吗，该指令可以用于其他用途吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:23:39.360

你可能误解了 Jeffrey Mogul 想要表达的意思。他没有说*代理重新验证*没有用。他只是说有一个用例，*proxy-revalidate*是不够的。

在这个用例中，应该强制共享缓存在使用条目响应后续请求之前重新验证与源服务器的任何响应，*无论它仍然是新鲜的还是已经过时*的。

此用例不能用当前的指令集表示，因为*proxy-revalidate*仅适用于过时的响应，而*max-age*适用于非共享和共享缓存。这就是为什么他建议使用一个附加指令*proxy-maxage*，它可以为共享缓存指定不同的生命周期。

# iphone - ftp下载请求阻塞如何处理

> ID：11354761
> 
> 赞同：0
> 
> 时间：2012-07-06T01:33:15.493
> 
> 标签：iphone, objective-c, ftp

我正在使用 ftp 协议下载文件。现在，为了检查处理错误的能力，我正在模拟一些网络错误的发生。处理网络 inputStream 的代码如下：

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
// An NSStream delegate callback that's called when events happen on our 
// network stream.
{
#pragma unused(aStream)
    assert(aStream == self.networkStream);
    switch (eventCode) {
    case NSStreamEventOpenCompleted: {
       self.connected = YES; 
    } break;
    case NSStreamEventHasBytesAvailable: {
        NSInteger       bytesRead;
        uint8_t         buffer[32768];

        // Pull some data off the network.
        bytesRead = [self.networkStream read:buffer maxLength:sizeof(buffer)];
         DLog(@"%@,byteRead:%d",self.urlInput,bytesRead);   
        if (bytesRead == -1) {
            [self _stopReceiveWithStatus:@"Network read error"];
        } else if (bytesRead == 0) {
            [self _stopReceiveWithStatus:@"success"];
        } else {
            NSInteger   bytesWritten;
            NSInteger   bytesWrittenSoFar;

            bytesWrittenSoFar = 0;
            do {
                bytesWritten = [self.fileStream write:&buffer[bytesWrittenSoFar] maxLength:bytesRead - bytesWrittenSoFar];
                DLog(@"%@,bytesWritten:%d",self.urlInput,bytesWritten);
                assert(bytesWritten != 0);
                if (bytesWritten == -1) {
                    [self _stopReceiveWithStatus:@"File write error"];
                    break;
                } else {
                    bytesWrittenSoFar += bytesWritten;
                }
            } while (bytesWrittenSoFar != bytesRead);
        }
    } break;
    case NSStreamEventHasSpaceAvailable: {
        assert(NO);     // should never happen for the output stream
    } break;
    case NSStreamEventErrorOccurred: {
        [self _stopReceiveWithStatus:@"Stream open error"];
    } break;
    case NSStreamEventEndEncountered: {
      assert(NO);
    } break;
    default: {
        assert(NO);
    } break;
}
} 
```

如果我手动关闭wifi或关闭我的无线路由器（网络连接标志关闭），将返回“NSStreamEventErrorOccurred”并正确终止下载过程。但是，如果我关闭调制解调器，同时保持无线路由器打开（网络连接标志打开）。下载过程卡在“NSStreamEventHasBytesAvailable”的情况下。即使我打开互联网连接，它仍然卡住。

我想知道它为什么卡住以及如何检测到这种错误。我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:10:20.133

首先，感谢考虑这一点并运行测试。许多开发人员假设“网络连接将始终有效”。

`NSStream`其次，您使用FTP 下载似乎有点奇怪；你知道`NSURLConnection`支持FTP，对吧？除非您正在做一些非常奇怪的事情，否则您应该使用内置的[URL 加载工具](https://developer.apple.com/library/ios/#documentation/cocoa/conceptual/urlloadingsystem/urlloadingsystem.html)。

在任何情况下，这里的问题是[*原则上*](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)应用程序（或计算机）无法确定连接中是否存在暂停，因为连接失败（并且应该重新启动或取消）或者因为它只是运行缓慢（在这种情况下需要耐心）。

当你的调制解调器重新连接时，活动的 TCP 会话没有恢复，我有点惊讶。这表明当调制解调器链路断开或您的 IP 在重新连接时发生变化时，您的 ISP 的路由器可能会断开连接，但这对您的问题并不重要。

TCP 会话通常最终会在一段时间不活动后被操作系统（或上游路由器）超时，但这可能是一个不可接受的长时间。所以你可能需要做的就是实现一个超时。

What I'd probably do (assuming you stay the course with `NSStream` as discussed above) is have an `NSTimer` firing off periodically - maybe every 15 seconds - and have the callback compare the current time to a timestamp that you set on each `NSStreamEventHasBytesAvailable` event. If the timestamp is too old (say, more than 15 seconds), cancel or restart the download as desired and notify the user.

But again, take a look at just using `NSURLConnection`.

# ruby-on-rails - 如何将实例变量传递给 RSpec 共享示例

> ID：11354763
> 
> 赞同：37
> 
> 时间：2012-07-06T01:33:36.173
> 
> 标签：ruby-on-rails, rspec2

我正在使用 RSpec (2.10.1) 在模型上测试验证，并提取了一些代码与其他模型验证共享。验证首先写在 Companies 表上，因此代码如下所示：

```
# support/shared_examples.rb
shared_examples "a text field" do |field, fill, length|
  it "it should be long enough" do
    @company.send("#{field}=", fill * length)
    @company.should be_valid
  end

  etc...
end 
```

用法是：

```
# company_spec.rb
describe Company do
  before { @company = Company.new( init stuff here ) }

  describe "when address2" do
    it_behaves_like "a text field", "address2", "a", Company.address2.limit
  end

  etc...
end 
```

我想将`@company`作为参数传递给共享示例，以便我可以为不同的模型重用代码，如下所示：

```
# support/shared_examples.rb
shared_examples "a text field" do |model, field, fill, length|
  it "it should be long enough" do
    model.send("#{field}=", fill * length)
    model.should be_valid
  end

  etc...
end 
```

用法是：

```
# company_spec.rb
describe Company do
  before { @company = Company.new( init stuff here ) }

  describe "when address2" do
    it_behaves_like "a text field", @company, "address2", "a", Company.address2.limit
  end

  etc...
end 
```

但是，当我这样做时，我得到`undefined method 'address2' for nil:NilClass`. 似乎`@company`没有通过（不在范围内？）我如何让这样的事情起作用？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-06T06:11:15.517

问题是示例组内与钩子内`self`不同，因此即使它具有相同的名称，它也不是同一个实例变量。`self``before`

我建议您用于`let`以下情况：

```
# support/shared_examples.rb
shared_examples "a text field" do |field, fill, length|
  it "it should be long enough" do
    model.send("#{field}=", fill * length)
    model.should be_valid
  end
end

# company_spec.rb
describe Company do
  describe "when address2" do
    it_behaves_like "a text field", "address2", "a", Company.address2.limit do
      let(:model) { Company.new( init stuff here ) }
    end
  end
end 
```

# ruby-on-rails - 安装 debugger-linecache (1.1.1) 时出错，Bundler 无法继续

> ID：11354768
> 
> 赞同：26
> 
> 时间：2012-07-06T01:34:25.433
> 
> 标签：ruby-on-rails, ruby, gem, gemfile

知道如何解决这个问题吗？

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/home/durrantm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for vm_core.h... no
checking for vm_core.h... no
Makefile creation failed
**************************************************************************
No source for ruby-1.9.3-p194 provided with debugger-ruby_core_source gem.
************************************************************************** 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-07T14:57:53.090

更新到更新的 ruby​​ 补丁版本后，我遇到了这个问题。不幸的是，头文件 gem "debugger-ruby_core_source" 在 Gemfile.lock 中被锁定为早期版本，因此它没有所需的头文件。

您需要做的就是通过执行以下操作更新该 gem：

```
bundle update debugger-ruby_core_source 
```

之后您应该可以捆绑安装。

如果您不使用捆绑程序，则只需在尝试安装调试器之前安装最新版本：

```
gem install debugger-ruby_core_source 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T02:07:13.213

另一种选择是切换到使用 ruby`p125`​​ ，例如

```
rvm install 1.9.3-p125
rvm use 1.9.3-p125 --default 
```

我有 ruby​​ 1.9.3-p194，显然它没有我需要的调试/线路缓存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T10:09:30.580

打开终端，转到项目目录并使用删除 Gemfile.lock

```
 rm Gemfile.lock 
```

删除 Gemfile.lock 并运行

```
bundle install 
```

这将创建新的 Gemfile.lock 所以很容易做到:)

为我工作。

# nhibernate - 每个请求的 ServiceStack NHibernate 会话

> ID：11354769
> 
> 赞同：8
> 
> 时间：2012-07-06T01:34:41.260
> 
> 标签：nhibernate, servicestack

我开始构建一个应用程序，我打算使用 ServiceStack。只想知道处理 NHibernate ISession 或其他“每个请求”上下文特定会话对象的最佳实践/好方法是什么。

我想在 Ioc 中注册一个 ISessionFactory 就像：

```
container.Register<ISessionFactory>(sessionFactory); 
```

并在需要时获取一个新的 Session 对象......或者直接提供会话对象：

```
container.Register<ISession>(c => sessionFactory.OpenSession()).ReusedWithin(ReuseScope.None); 
```

或者通过 Global.asax BeginRequest 事件处理 ISession 和默认事务：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    var session = factory.OpenSession();
    ITransaction itrans = session.BeginTransaction();
    Context.Items.Add("session", session);
    Context.Items.Add("trans", itrans);
} 
```

所以，我有点迷茫，鉴于上述技术或类似技术，如 EF 或其他 Rest-Services 框架，最佳实践是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:08:32.683

使用 HttpHandler 为每个请求创建一个会话是我发现的最常见的方法。Ayende 解释说创建会话真的很轻量级。[http://ayende.com/blog/4123/what-is-the-cost-of-opening-a-session](http://ayende.com/blog/4123/what-is-the-cost-of-opening-a-session)

Ayende 实际上有一系列帖子，其中他逐渐构建了数据访问解决方案。每篇文章都解释了他为什么做了他所做的事情，以及到目前为止所采取的步骤需要解决哪些问题。从这里开始：http: [//ayende.com/blog/4803/refactoring-toward-frictionless-odorless-code-the-baseline](http://ayende.com/blog/4803/refactoring-toward-frictionless-odorless-code-the-baseline)

最后，[http://nhforge.org/blogs/nhibernate/archive/2011/03/03/effective-nhibernate-session-management-for-web-apps.aspx](http://nhforge.org/blogs/nhibernate/archive/2011/03/03/effective-nhibernate-session-management-for-web-apps.aspx)

以上所有内容都是每个请求的会话变体。所有人的共同点是不必手动担心创建会话/事务。他们将自动提交/回滚事务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T20:50:47.153

我知道这是一个老问题，但我想我会继续向任何对替代答案感兴趣的人展示我们是如何做到这一点的。

因此，我们在新的 ServiceStack API 中使用了 ServiceRunner：

```
public class BaseServiceRunner<TRequest> : ServiceRunner<TRequest>
{
    public BaseServiceRunner(AppHost appHost, ActionContext actionContext)
    : base(appHost, actionContext) { }

    public override void OnBeforeExecute(IRequestContext requestContext, TRequest request)
    {
        var req = request as MyRequestType;

        if(req == null)
            base.OnBeforeExecute(requestContext, request);

        var factory = TryResolve<NHibernate.ISessionFactory>();
        var session = factory.OpenSession();
        var trans = session.BeginTransaction(IsolationLevel.ReadCommitted);

        requestContext.SetItem("session", session);
        requestContext.SetItem("transaction", trans);
    }        

    public override object OnAfterExecute(IRequestContext requestContext, object response)
    {
        var trans = requestContext.GetItem("transaction") as ITransaction;
        if (trans != null && trans.IsActive)
            trans.Commit();

        var session = requestContext.GetItem("session") as ISession;
        if (session != null)
        {
            session.Flush();
            session.Close();
        }

        return base.OnAfterExecute(requestContext, response);
    }

    public override object HandleException(IRequestContext requestContext, TRequest request, Exception ex)
    {
        var req = request as MyRequestType;
        if(req != null)
        {
            var trans = requestContext.GetItem("transaction") as ITransaction;
            if (trans != null && trans.IsActive)
                trans.Rollback();

            var session = requestContext.GetItem("session") as ISession;
            if (session != null)
            {
                session.Flush();
                session.Close();
            }
        }
        return base.HandleException(requestContext, request, ex);
    }        
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T03:55:38.243

有关如何以最佳方式同时使用 ServiceStack 和 NHibernate 的完整示例，请参阅此博客文章：

[http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/](http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/) 这是上面帖子中使用的 AppHost 示例：

```
public class Global : HttpApplication
{
    public class SampleServiceAppHost : AppHostBase
    {
        private readonly IContainerAdapter _containerAdapter;
        public SampleServiceAppHost(ISessionFactory sessionFactory)
            : base("Service Stack with Fluent NHibernate Sample", typeof(ProductFindService).Assembly)
        {
            base.Container.Register<ISessionFactory>(sessionFactory);
        }

        public override void Configure(Funq.Container container)
        {
            container.Adapter = _containerAdapter;
        }
    }

    void Application_Start(object sender, EventArgs e)
    {
        var factory = new SessionFactoryManager().CreateSessionFactory();

        (new SampleServiceAppHost(factory)).Init();
    }
} 
```

# eclipse - SWT：删除复合中不可见的组件空间

> ID：11354770
> 
> 赞同：1
> 
> 时间：2012-07-06T01:34:41.413
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp, composite

我在一个composite0中放了三个composite(1,2,3)，所以它们都基于 `composite0.setLayout(new FormLayout())`. 我现在遇到的问题是，我使composite3不可见：（`composite3.setVisible(false);`我不想删除数据，仍然需要那个组件，但只是不希望它显示在UI上），现在componite2之后有很大的差距。如何消除大间隙（用于放置复合材料2）？提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:37:51.450

我有一个可观察的数据绑定，但它假定控件位于 GridLayout 内。我使用它在向导页面中显示和隐藏组合和小部件，具体取决于复选框的选择状态。

要使用它，请使用以下内容进行设置：

```
DataBindingContext dbc = new DataBindingContext();
Button button = new Button(composite, SWT.CHECK);
IObservableValue target = SWTObservables.observeSelection(button);
dbc.bindValue(target, new HideControlObservable(someControl)); 
```

这是可观察的：

```
/**
 * Observable to control the presence (visibility and size) of any control
 * within a grid layout.
 * <p>
 * Changing the value of this observable will do two things:
 * <ol>
 * <li>Set the visibility of the control</li>
 * <li>Set the size of the control to zero when the control is invisible.</li>
 * </ol>
 * So, when using this observable, the control will not only be invisible,
 * but it will be gone, completely. Normally, when setting the visibility of
 * a control to <code>false</code>, the control will not be displayed but
 * will still take all the space on the screen.
 * </p>
 * <p>
 * <strong>Note:</strong> this observable works for controls within a
 * <strong>GridLayout only</strong>.
 * </p>
 */
public class HideControlObservable extends WritableValue implements IValueChangeListener {
    private final DataBindingContext dbc = new DataBindingContext();
    private final ISWTObservableValue sizeObservable;
    private final Point size = new Point(0, 0);
    private final Control control;

    public HideControlObservable(Control control) {
        super(control.getVisible(), Boolean.class);
        this.control = control;

        UpdateValueStrategy never = new UpdateValueStrategy(UpdateValueStrategy.POLICY_NEVER);
        dbc.bindValue(SWTObservables.observeVisible(control), this, never, null);

        sizeObservable = SWTObservables.observeSize(control);
        sizeObservable.addValueChangeListener(this);

        if (!control.isVisible()) {
            GridData gd = (GridData) control.getLayoutData();
            if (gd == null) {
                gd = new GridData();
            }
            gd.exclude = true;
            control.setLayoutData(gd);
            control.setSize(new Point(0, 0));
        }
    }

    @Override
    public void doSetValue(Object value) {
        super.doSetValue(value);
        Boolean bool = (Boolean) value;
        if (bool) {
            GridData gd = (GridData) control.getLayoutData();
            if (gd == null) {
                gd = new GridData();
            }
            gd.exclude = false;
            control.setLayoutData(gd);
            control.setSize(size);
            control.getParent().layout();
        } else {
            GridData gd = (GridData) control.getLayoutData();
            if (gd == null) {
                gd = new GridData();
            }
            gd.exclude = true;
            control.setLayoutData(gd);
            control.setSize(new Point(0, 0));
            control.getParent().layout();
        }
    }

    @Override
    public synchronized void dispose() {
        sizeObservable.dispose();
        super.dispose();
    }

    @Override
    public void handleValueChange(ValueChangeEvent event) {
        Point newSize = (Point) event.getObservableValue().getValue();
        if (newSize.x > size.x) {
            size.x = newSize.x;
        }
        if (newSize.y > size.y) {
            size.y = newSize.y;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:27:20.750

[官方 SWT 示例的片段 313](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet313.java)应该可以帮助您。您基本上`FormData`根据您是要显示还是隐藏它来设置不同的 Composite3。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-09T21:24:27.227

```
 FormData data = new FormData();
        data.left = new FormAttachment(0, 100, EditorPanel.SPACING);
        data.top = new FormAttachment(section1, EditorPanel.SPACING);
        data.height = 0;
        data.width = 0;
        addSectionFormData(a, b, c);
        a.setLayoutData(data);
        b.setLayoutData(data); 
```

这解决了问题！:)

# javascript - 使用 localStorage 中的存储值加载 Knockout Observable

> ID：11354774
> 
> 赞同：1
> 
> 时间：2012-07-06T01:35:00.150
> 
> 标签：javascript, knockout.js

我该怎么做呢？我尝试使用基于此处代码构建的扩展器来做到这一点：[https ://github.com/jimrhoskins/knockout.localStorage](https://github.com/jimrhoskins/knockout.localStorage)

它将值保存到 localStorage 就好了，但是在重新加载页面时，Knockout 似乎忽略了设置值并使用数组中的第一个选项覆盖它。

```
<select data-bind="value: pageSize, options: search_filter_data.page_sizes, optionsText: 'label'"></select>

page_sizes: [{
        value: 10,
        label: '10 Per Page'
    }, {
        value: 25,
        label: '25 Per Page'
    }, {
        value: 50,
        label: '50 Per Page'
    }, {
        value: 9999,
        label: 'All'
    }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T21:06:48.320

使用***optionsValue***属性，如本例所示：

> 示例：http: [//jsfiddle.net/gurkavcu/kA8W3/](http://jsfiddle.net/gurkavcu/kA8W3/)

```
<select data-bind="value: pageSize, options: page_sizes,
        optionsText: 'label', optionsValue: 'value' "></select>

function ViewModel() {

    this.page_sizes =  [{       
        value: 10,
        label: '10 Per Page'
    }, {        
        value: 25,
            label: '25 Per Page'
    }, {
        value: 50,
        label: '50 Per Page'
    }, {       
        value: 9999,
        label: 'All'
    }]; 

    this.pageSize = ko.observable(25);

};

$(function() {  

    var viewModel = new ViewModel();
    ko.applyBindings(viewModel); 

})​ 
```

# ruby - 服务器和客户端之间的通信

> ID：11354775
> 
> 赞同：1
> 
> 时间：2012-07-06T01:35:09.290
> 
> 标签：ruby, sockets

一直在关注本教程：[http](http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm) ://www.tutorialspoint.com/ruby/ruby_socket_programming.htm （找不到更完整的）

我启动并运行它。除了我不知道如何让客户端向服务器发送消息（并响应它），反之亦然。我该如何做到这一点？

有很多文档，但似乎都没有详细说明这一点。

# java - 将 pom.xml 中的目标...永久标记为已忽略

> ID：11354778
> 
> 赞同：0
> 
> 时间：2012-07-06T01:36:04.693
> 
> 标签：java, m2e

我在 Eclipse 中有一个使用 m2e 的 web 项目。我有一个关于 pom.xml 中缺少工件的错误，我单击了将 pom.xml 中的目标 ... 永久标记为已忽略。发生的事情是它不再从我的存储库中复制 jar 文件。如何撤消此操作。不知道我这样做时更改了哪个配置文件或设置文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:38:57.837

我假设您使用的是 m2e v1.1。在这个版本中，您可以选择层次结构中的哪个 pom 被标记为忽​​略其生命周期映射。如果它不在当前项目的 pom 中，它将是其中一个父项目中的 pom。这是对正在发生的事情的一个很好的解释：

[https://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html](https://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html)

因此，您可以在工作区中的所有 pom.xml 文件中对该术语进行文件搜索，`pluginManagement`然后您会找到您要查找的内容。

# ruby-on-rails - 无法从 Google Drive 中检索文件元数据，404

> ID：11354779
> 
> 赞同：3
> 
> 时间：2012-07-06T01:36:12.930
> 
> 标签：ruby-on-rails, google-drive-api

我在使用 Google Drive API 时遇到了一些非常奇怪的问题。

在这里忍耐一下，有很多要解释的。

我最初使用我的一个 Google 帐户使 API 工作——`test@google.com`为简单起见，我们称之为它。我让 Google Picker UI 正常工作，它正确显示了我的云端硬盘帐户中的文件列表。

我将它设置为我的 APP_ID，并且我有一些服务器端逻辑，它使用官方gem 使用端点`google-ruby-api-client`连接到 Drive API 。`drive.files.get`然后我可以使用以下代码段下载文件的元数据：

```
require 'google/api_client'

client = Google::APIClient.new

# client ID and secret from Google APIs Console
client.authorization.client_id = "{CLIENT_ID}"
client.authorization.client_secret = "{SECRET}"
client.authorization.redirect_uri = "http://myapp.com/users/auth/gdrive"
# access token stored in database from oauth2 flow
client.authorization.access_token = "TOKEN"

client.authorization.scope = [
  "https://www.googleapis.com/auth/drive.file",
  "https://www.googleapis.com/auth/userinfo.email",
  "https://www.googleapis.com/auth/userinfo.profile"
]
result = client.execute!(
  :api_method => 'drive.files.get',
  :version => 'v2',
  :parameters => { 'fileId' => params[:file_id] }) 
```

使用`test@google.com`我尝试过的帐户，结果返回文件的元数据，我可以下载文件。都是桃色的。

当我使用*不同*的Google 帐户时，问题就来了。我可以访问 Picker 中的文件，但是当`fileId`使用上述方法将请求发送到服务器时，我只是不断收到 404 错误，说文件不存在。我还尝试使用 google 提供的 OAuth 2.0 Playground 访问文件的元数据，但奇怪的是我仍然收到该错误，但我在使用该`test@google.com`帐户时也收到相同的 404 错误。

我唯一能真正想到的是，我提交了一个包含所有 Google Drive 详细信息的应用程序版本，并通过 Chrome Webstore 安装了该应用程序。在我意识到它作为一个启用驱动器的应用程序向所有人显示后，我立即将其删除并将 manifest.json 文件更改回其正常的非驱动器启用状态。我确实读到您应该通过 Chrome Webstore 安装该应用程序才能正常工作，但我也读到情况不再如此。您安装的 Chrome Webstore 应用程序是否存储在 Google 的云端某处，以便他们知道它是为特定帐户安装的？还是只是在本地安装了网络商店应用程序？我很混乱。

我在这里想念什么？我已经很久没有对 API 感到如此沮丧了。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:56:43.473

感谢 Ali Afshar 的回答——解决方案（目前）是暂时使用 Google Drive 的全部范围，而不仅仅是`drive.file`范围。

例如，而不是使用这个范围，

```
https://www.googleapis.com/auth/drive.file 
```

改用这个：

```
https://www.googleapis.com/auth/drive 
```

# php - 如何使用 php 和 curl 从谷歌地图中提取多个数据？

> ID：11354781
> 
> 赞同：-1
> 
> 时间：2012-07-06T01:36:50.603
> 
> 标签：php, curl

这是我正在尝试运行的简单代码，但它没有输出任何数据。有人可以帮忙吗？谢谢！！

```
<?php

$addr = "Hotels in ottawa canada";
$a = urlencode($addr);
$geocodeURL = 
"https://maps.googleapis.com/maps/api/geocode/json?address=$a&sensor=false&key=my key";

$ch = curl_multi_init($geocodeURL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_multi_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

$geocode = json_decode($result);

$lat = $geocode->results[$i]->geometry->location->lat;
$lng = $geocode->results[$i]->geometry->location->lng; 
echo $formatted_address = $geocode->results[$i]->formatted_address;
echo $geo_status = $geocode->status;
echo $location_type = $geocode->results[0]->geometry->location_type;
echo $location_type = $geocode->results[$i]->geometry->premise;
echo $street_address = $geocode->results[$i]->street_address;

?> 
```

[社会分类广告](http://fonolive.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:28:32.180

如果您希望将多个地址并行传递给 google api，然后将结果解析为一个，我会整理一个小示例来完成此操作并修复您的 curl 多代码。希望能帮助到你。

```
<?php 
$urls = array(
'http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true',
'http://maps.googleapis.com/maps/api/geocode/json?address='.urlencode('Hotels').'&sensor=true');

$response = curl_get_multi($urls);

//Handle response array
foreach($response as $json){
    $result = json_decode($json);
    //echo $result->status.' ';

    //Iterate each result
    foreach($result->results as $res){
        //lat
        echo $res->geometry->location->lat.' ';
        //lng
        echo $res->geometry->location->lng.' ';
        //formatted_address
        echo $res->formatted_address.' ';
        //location_type
        echo $res->geometry->location_type.' ';
        echo '<br/>';
    }
    echo '<hr />';
}

/**
 * Curl multi function
 *
 * @param Array $urls
 * @return Array
 */
function curl_get_multi($urls) {
    $curly = array();
    $result = array();

    $mh = curl_multi_init();
    foreach ($urls as $id=>$url) {
        $curly[$id] = curl_init();
        curl_setopt($curly[$id], CURLOPT_URL,            $url);
        curl_setopt($curly[$id], CURLOPT_HEADER,         0);
        curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curly[$id], CURLOPT_TIMEOUT,        2);
        curl_setopt($curly[$id], CURLOPT_USERAGENT,      'CurlRequest');
        curl_setopt($curly[$id], CURLOPT_REFERER,        $url);
        curl_setopt($curly[$id], CURLOPT_AUTOREFERER,    true);
        curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, true);

        curl_multi_add_handle($mh, $curly[$id]);
    }
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);
    foreach($curly as $id => $c) {
        $result[$id] = curl_multi_getcontent($c);
        curl_multi_remove_handle($mh, $c);
    }
    curl_multi_close($mh);
    return $result;
}
?> 
```

# python - 超级混乱的python多重继承 super()

> ID：11354786
> 
> 赞同：9
> 
> 时间：2012-07-06T01:37:15.987
> 
> 标签：python, inheritance, methods, super

我正在玩python中的多重继承，我遇到了一个我无法理解它是如何发生的情况。

这是继承布局：

```
 A       F
  /   \     |
 B     C    |   
  \    |   /
    \  |  /   
       D 
```

大家熟悉的ABCD钻石。加上一个额外的“F”类，我把它扔进去是为了好玩。

这是代码：

```
class A(object):
    def foo(self, call_from):
        print "foo from A, call from %s" % call_from
        super(A, self).foo("A")

class B(A):
    def foo(self, call_from):
        print "foo from B, call from %s" % call_from
        super(B, self).foo("B")

class C(A):
    def foo(self, call_from):
        print "foo from C, call from %s" % call_from
        super(C, self).foo("C")

class F(object):
    def foo(self, call_from):
        print "foo from F, call from %s" % call_from

class D(B, C, F):
    def foo(self):
        print "foo from D"
        super(D, self).foo("D") 
```

输出：

```
>>> d = D()
>>> d.foo()
foo from D
foo from B, call from D
foo from C, call from B
foo from A, call from C
foo from F, call from A 
```

方法解析顺序：

```
>>> D.__mro__
(<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <class '__main__.F'>, <type 'object'>) 
```

*   `foo from C, call from B`代替`foo from C, call from D`
*   `foo from F, call from A`只是简单地把我赶走......

似乎`super()`是根据方法解析顺序链接起来并忽略类之间的关系，但我不确定。

有人可以指出正确的方向来理解这种行为吗？

请记住，我正在尝试理解语言本身。不试图解决实际问题。所以我没有这个用例。但如果有人能指出一个用例，那就太好了:)

* * *

> 更新：
> 
> 总而言之 - super() 只是让您知道接下来要根据 mro 调用什么。不需要父母。虽然 mro 基于继承层次结构构建，但 mro 本身并不是继承层次结构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T01:43:08.927

的重点`super()`是遵循方法解析顺序。这就是为什么你告诉它你自己的班级，而不是你的父母班级。程序员很难预测接下来会调用哪个类，因此您可以自行`super()`处理。

你已经从 D 调用了 B，那么你怎么能从 D 调用 C？D.foo() 只能调用另一个 foo()，因为那里只有一个函数调用。这将是一个线性的调用链，因此必须对类进行线性化，这就是方法解析顺序的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T20:36:57.943

有时我发现在父类上调用 super 很有用。前任。

```
class TmpClass0(object):
    def tmp_method(self):
        print 'TmpClass0 tmp_method'

class TmpClass1(TmpClass0):
    def tmp_method(self):
        print 'TmpClass1 tmp_method' 
```

现在我想从 TmpClass2 的实例中使用 TmpClass0 的 tmp_method。

```
class TmpClass2(TmpClass1):                                                                               
    def tmp_method(self):
        super(TmpClass1, self).tmp_method() 
```

结果：

```
In [107]: tmp_class2 = TmpClass2()                                                                                  

In [108]: tmp_class2.tmp_method()                                                                                   
TmpClass0 tmp_method 
```

# internet-explorer - IE9 桌面浏览器的@Media 查询

> ID：11354789
> 
> 赞同：2
> 
> 时间：2012-07-06T01:38:07.903
> 
> 标签：internet-explorer, internet-explorer-9, media-queries

我在使用 IE9 桌面的 @media 查询时遇到问题。我创建了一个网站，当有人缩小浏览器的大小时，整个布局会根据“屏幕”大小而变化。整个布局会更改以适应屏幕尺寸。

然而，当谈到桌面上的 IE9 时，什么都没有发生。出现原始布局（专为 1024 分辨率构建）。所以任何说 768 屏幕尺寸（或更低）的人都会看到布局“流血”。IT 不会为他们改变。

该网站可在 Chorme、Firefox 甚至 Opera 中使用，但在 IE9 桌面版中无法使用

这是我的呼吁：

```
@media screen and (min-width: 768px) and (max-width: 959px){
bunch of settings
}

@media screen and (min-width: 480px) and (max-width: 767px){
bunch of settings
}

@media screen and (max-width: 320px) {
bunch of settings
} 
```

^^^ 当我缩小浏览器大小时，IE9 无法识别这些。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:54:43.860

从 IE9 开始支持 CSS3 媒体查询，因此您的媒体查询应该可以工作。我的直接猜测是您打开了[兼容性视图](http://windows.microsoft.com/en-US/internet-explorer/products/ie-9/features/compatibility-view)，将其关闭，您的媒体查询应该可以工作。

* * *

我将您的最终媒体查询更新为：

```
@media screen and (max-width: 479px) {
    bunch of settings
} 
```

我的猜测是，当您调整 ie9 浏览器的大小时，它永远不会达到 320 的最大宽度。它被卡在 320 到 480 之间的某个位置，这意味着您的媒体查询设置都没有得到满足 - 因此它默认为 1024。将最大宽度更改为仅比先前视口的最小值 (480-1 = 479) 低一个，将解决此问题。

要么，要么在ie9无法识别但其他浏览器没有问题的查询中您的规则中一定存在一些问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T14:58:56.773

IE9 确实支持媒体查询。切换订单轮次，它们应该可以工作。

```
@media screen and (max-width: 320px) {
   bunch of settings
}

@media screen and (min-width: 480px) and (max-width: 767px){
   bunch of settings
}

@media screen and (min-width: 768px) and (max-width: 959px){
   bunch of settings
} 
```

# ruby-on-rails - 在不同模型之间链接字段

> ID：11354790
> 
> 赞同：0
> 
> 时间：2012-07-06T01:38:17.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

这个问题与：[创建rails连接表后如何链接表单有关](https://stackoverflow.com/questions/11313872/how-to-link-form-after-creating-rails-join-table)

我有一个带有类别字段的产品模型，但是需要将每个类别放在单独的行中，而不是用逗号分隔它们所在的行。所以我创建了一个类别和 ProductCategory 模型，并添加了所有适当的关联。

如何将旧产品模型中的类别字段链接到新类别表，以便用户输入新产品并添加类别时，它将保存到类别表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:48:11.560

关于设置accept_nested_attributes_有一个很棒的Railscast，因为它应该正是您正在寻找的。我会通过告诉您观看而不是复制代码来为您提供更好的服务。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# jquery - 无法在 BPopup 框中包含 Nicedit 富文本编辑器。方向混乱

> ID：11354791
> 
> 赞同：1
> 
> 时间：2012-07-06T01:38:23.457
> 
> 标签：jquery, popup, textarea, nicedit, bpopup

我是 Jquery 的新手，并试图在我的项目中使用它。

我有一个页面，使用 bPopup。在 bPopup 中，我在弹出 div 中包含 nicedit。但是富文本工具栏似乎搞砸了。谁知道怎么修它？

下面是输出的代码和示例。

![在此处输入图像描述](../Images/a37b92214711466cacaf6114eefbe4ee.png)

nicedit 的工具栏似乎混淆了方向。但是当我在普通网页（没有弹出窗口）中使用 nicedit 时，它可以完美地工作。

index.php----

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

    <script type = "text/javascript" src = "http://code.jquery.com/jquery-1.7.2.min.js"></script> <!--This is for the interface-->
    <script type = "text/javascript" src = "http://dinbror.dk/downloads/jquery.bpopup-0.7.0.min.js"></script>
    <script type="text/javascript" src="http://js.nicedit.com/nicEdit-latest.js"></script> 

</head>
<body>

<button>POP IT UP</button>

<div style = "position: relative; display:none; width:500px; height:500px; background-color:white; border-radius: 10px 10px 10px 10px; box-shadow: 0 0 25px 5px #999;">

<textarea id = "area1" name = "area1" cols = "40">
This is the default text in text box.
</textarea>
<script>
bkLib.onDomLoaded(function() {
    new nicEditor().panelInstance('area1');

});
</script>
</div>

<h1 style = "background-color : white">This is the content
   <script>
    // Semicolon (;) to ensure closing of earlier scripting
    // Encapsulation
    // $ is assigned to jQuery
    ;(function($) {
         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('button').on('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
                $('div').bPopup({
                    position: ['auto', 'auto'], //x, y
                    modal: true, //A transperant black layer behind
                    positionStyle: 'fixed', //Fix the popup in the middle
                    scrollbar: false,

                });

            });

        });

    })(jQuery);
    </script>

</body>
</html> 
```

# c# - 用于 ASP.NET MVC 的优秀 A/B 测试框架

> ID：11354792
> 
> 赞同：3
> 
> 时间：2012-07-06T01:38:24.083
> 
> 标签：c#, asp.net-mvc, ab-testing

我一直在查看 Patrick McKenzie 的 ABingo (http://www.bingocardcreator.com/abingo) 的rails 并想知道是否有 ASP.NET MVC 的等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:36:03.723

这是 ABingo 实现的 ASP.NET (MVC) 端口：

[http://www.fairtutor.com/fairlycertain/](http://www.fairtutor.com/fairlycertain/)

*   虽然我没有亲自尝试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T01:34:10.780

我不熟悉 ABingo，但你可以看看[http://diy.abtestmaster.com/developers](http://diy.abtestmaster.com/developers)

免责声明：这是我个人为使用 asp.net mvc 进行的 A/B 测试而开发的一个框架，当时我对现有的内容不满意。

# iphone - UIScrollView 上的高性能、可变长度的渐变边缘

> ID：11354796
> 
> 赞同：2
> 
> 时间：2012-07-06T01:39:09.040
> 
> 标签：iphone, objective-c, ios, core-animation, core-graphics

我试图在`UIScrollView`具有相当复杂的层次结构的 a 上产生一些褪色边缘，其长度可以在滚动时轻松调整。这基本上是我想要达到的效果（注意褪色边缘）：

![在此处输入图像描述](../Images/5c0f90e0c5633d8a1bc9eb496a00de90.png)

棘手的部分是：

1.  背景是动态的
2.  我希望褪色边缘随着用户滚动而“增长”；也就是说，当没有滚动时它们不存在，但是一旦滚动开始，淡入淡出效果会随着增加而`contentOffset`增加
3.  类似于没有。2、滚动完成后，淡入淡出的边缘应该平滑收缩

我已经`CAGradientLayer`使用用作`mask`视图层的自定义来获得我想要的大部分内容，但问题是它在性能方面还不够。然后我尝试按需切换面具，即。当滚动开始时，掩码被设置，当滚动停止时，掩码被移除。根据Apple文档，这种工作（有一些错误），但我后来发现动态更改掩码具有未定义的行为。我还没有确定一个基于 CoreGraphics 的解决方案，我不确定它是否可行或者性能是否会更好。我也不能使用图像来模拟渐变，因为内容和背景都是动态的。

这是`CAGradientLayer`我创建的自定义子类的实现：

```
- (id) init {
    self = [super init];
    if (self) {
        self.anchorPoint = CGPointZero;

        self.startPoint = CGPointMake(0.0, 0.5);
        self.endPoint = CGPointMake(1.0, 0.5);

        CGColorRef transluscentColor = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;
        CGColorRef opaqueColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;

        self.colors = [NSArray arrayWithObjects:
                       (id)opaqueColor,
                       (id)transluscentColor, 
                       (id)opaqueColor, 
                       (id)opaqueColor,
                       (id)transluscentColor,
                       (id)opaqueColor, nil];
        self.locations = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:1.0f], nil];
    }

    return self;
}

- (void) setAbsoluteStartPoint:(CGPoint)startPoint endPoint:(CGPoint)endPoint {
    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    self.startPoint = CGPointMake(startPoint.x / self.bounds.size.width, startPoint.y / self.bounds.size.height);
    self.endPoint = CGPointMake(endPoint.x / self.bounds.size.width, endPoint.y / self.bounds.size.height);
    [CATransaction commit];
}

- (void) setGradientStartLength:(CGFloat)startLength endLength:(CGFloat)endLength animated:(BOOL)animated {
    CGFloat deltaX = (self.endPoint.x - self.startPoint.x);
    CGFloat deltaY = (self.endPoint.y - self.startPoint.y);

    // use the side whose change is largest as our base length
    CGFloat sideLength = (deltaX > deltaY ? self.bounds.size.width * deltaX : self.bounds.size.height * deltaY);

    CGFloat startRatio = MAX((startLength / sideLength), 0.0f);
    CGFloat endRatio = 1.0f - MAX((endLength / sideLength), 0.0f);

    NSArray *locations = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:startRatio],
                          [NSNumber numberWithFloat:endRatio],
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:1.0f], nil];

    [CATransaction begin];
    if (animated) {
        [CATransaction setAnimationDuration:0.5];
        [CATransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
    }
    else {
        [CATransaction setDisableActions:YES];
    }

    self.locations = locations;
    [CATransaction commit];
} 
```

当与 my 一起使用时`UIScrollView`，我基本上只是调整图层`position`以匹配`contentOffset`，然后在`setGradientStartLength:endLength:animated:`不使用动画的情况下调整大小（虽然动画不会减慢速度）。

就像我说的，这会做我想要的，但不是我需要的性能水平（帧率从 60fps 下降到 30 左右，它用作滚动视图`mask`）。而且我还没有想出一个不使用该`mask`属性的好方法，我认为这是我必须这样做的方式。

我的猜测是，这可以使用与上面类似的代码来实现，但使用我的层作为子层而不是视图的`mask`. 但是我还没有确定当图层用作子图层时如何添加这样的淡入淡出效果，而且我还没有看到任何其他人这样做的例子。

谁能在这里指出我正确的方向？我发现 Apple 关于这些事情的文档非常有限。

# android - 声音在安卓设备上不起作用。在模拟器上运行良好

> ID：11354798
> 
> 赞同：3
> 
> 时间：2012-07-06T01:39:17.993
> 
> 标签：android, audio, media-player, emulation

我尝试过几种方式更改声音方案。我研究了 Uri 和 SoundPool，但我不确定我是否正确使用它们。这是 MediaPlayer 的工作代码：

```
 final Context context;
 MediaPlayer media;

 void play()
{

 media=MediaPlayer.create(context, R.raw.soundFile);
 media.start();
 } 
```

正如我所说，它在模拟器上运行良好。这是一个 ogg 声音文件，但我尝试过 mp3 和 wav。

这是崩溃的日志文件：

```
D/AndroidRuntime(  981): Shutting down VM
W/dalvikvm(  981): threadid=1: thread exiting with uncaught exception (group=0x4
0a9c228)
E/AndroidRuntime(  981): FATAL EXCEPTION: main
E/AndroidRuntime(  981): android.content.res.Resources$NotFoundException: File r
es/raw/ouch.ogg from drawable resource ID #0x7f040000
E/AndroidRuntime(  981):        at android.content.res.Resources.openRawResource
Fd(Resources.java:1081)
E/AndroidRuntime(  981):        at android.media.MediaPlayer.create(MediaPlayer.
java:762)
E/AndroidRuntime(  981):        at Seven.Circle.GameView.onTouchEvent(GameView.j
ava:185)
E/AndroidRuntime(  981):        at android.view.View.dispatchTouchEvent(View.jav
a:5579)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTransformedTou
chEvent(ViewGroup.java:1965)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTouchEvent(Vie
wGroup.java:1692)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTransformedTou
chEvent(ViewGroup.java:1965)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTouchEvent(Vie
wGroup.java:1692)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTransformedTou
chEvent(ViewGroup.java:1965)
E/AndroidRuntime(  981):        at android.view.ViewGroup.dispatchTouchEvent(Vie
wGroup.java:1692)
E/AndroidRuntime(  981):        at com.android.internal.policy.impl.PhoneWindow$
DecorView.superDispatchTouchEvent(PhoneWindow.java:1982)
E/AndroidRuntime(  981):        at com.android.internal.policy.impl.PhoneWindow.
superDispatchTouchEvent(PhoneWindow.java:1441)
E/AndroidRuntime(  981):        at android.app.Activity.dispatchTouchEvent(Activ
ity.java:2414)
E/AndroidRuntime(  981):        at com.android.internal.policy.impl.PhoneWindow$
DecorView.dispatchTouchEvent(PhoneWindow.java:1930)
E/AndroidRuntime(  981):        at android.view.View.dispatchPointerEvent(View.j
ava:5759)
E/AndroidRuntime(  981):        at android.view.ViewRootImpl.deliverPointerEvent
(ViewRootImpl.java:2963)
E/AndroidRuntime(  981):        at android.view.ViewRootImpl.handleMessage(ViewR
ootImpl.java:2522)
E/AndroidRuntime(  981):        at android.view.ViewRootImpl.processInputEvents(
ViewRootImpl.java:862)
E/AndroidRuntime(  981):        at android.view.ViewRootImpl.handleMessage(ViewR
ootImpl.java:2531)
E/AndroidRuntime(  981):        at android.os.Handler.dispatchMessage(Handler.ja
va:99)
E/AndroidRuntime(  981):        at android.os.Looper.loop(Looper.java:154)
E/AndroidRuntime(  981):        at android.app.ActivityThread.main(ActivityThrea
d.java:4894)
E/AndroidRuntime(  981):        at java.lang.reflect.Method.invokeNative(Native
Method)
E/AndroidRuntime(  981):        at java.lang.reflect.Method.invoke(Method.java:5
11)
E/AndroidRuntime(  981):        at com.android.internal.os.ZygoteInit$MethodAndA
rgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(  981):        at com.android.internal.os.ZygoteInit.main(Zygot
eInit.java:551)
E/AndroidRuntime(  981):        at dalvik.system.NativeStart.main(Native Method)

E/AndroidRuntime(  981): Caused by: java.io.FileNotFoundException: This file can
 not be opened as a file descriptor; it is probably compressed
E/AndroidRuntime(  981):        at android.content.res.AssetManager.openNonAsset
FdNative(Native Method)
E/AndroidRuntime(  981):        at android.content.res.AssetManager.openNonAsset
Fd(AssetManager.java:503)
E/AndroidRuntime(  981):        at android.content.res.Resources.openRawResource
Fd(Resources.java:1078)
E/AndroidRuntime(  981):        ... 26 more 
```

直到现在我还没有注意到“E/AndroidRuntime(981): FATAL EXCEPTION: main E/AndroidRuntime(981): android.content.res.Resources$NotFoundException: File res/raw/ouch.ogg from drawable resource ID #0x7f040000 "，这确实是我正在寻找的错误。我愿意接受有关快速修复的建议。在那之前我会继续调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:09:00.723

提供错误的 LogCat 记录将有很大帮助。另外，尝试查看那里生成的错误日志，看看您是否可以发现“由”标签并阅读相关的错误消息，该消息应该指向文件中标记错误的行号。

（编辑：你能看到你是否在日志中发现任何用户创建的文件，因为日志没有焦点，我看不到整个内容）

# javascript - IE 对象预期映射 API v3 onload 外部 .js 函数

> ID：11354800
> 
> 赞同：0
> 
> 时间：2012-07-06T01:39:38.443
> 
> 标签：javascript, html, google-maps-api-3, dom-events, onload

我有一个小的 Google maps v3 脚本，可以在所有适当的浏览器上正常工作，但是当它遇到 IE 时，无论我使用什么事件处理程序或编写属性的不同方式，我都会收到“预期对象”错误。帮助！

这里的脚本：

```
function include(filename)
{
    var head = document.getElementsByTagName('head')[0];

    script = document.createElement('script');
    script.src = filename;
    script.type = 'text/javascript';

    head.appendChild(script)
}

include('geoxml3.js');
include('v3_epoly.js');

  var geoXml = null;
    var map = null;
    var geocoder = null;
    var toggleState = 1;
    var infowindow = null;
    var marker = null;
    var Ploc = null;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
//Voting Locations: Array element id = voting pct!
    var Vloc = new Array();
        Vloc[1] = 's';
        Vloc[2] = 's';
        Vloc[3] = 's';
        Vloc[4] = 's';

 function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();  
    geocoder = new google.maps.Geocoder();
    infowindow = new google.maps.InfoWindow({size: new google.maps.Size(150,50) }); 
    var latlng = new google.maps.LatLng(32.5890, -96.308871);

    var myOptions = {
      zoom: 10,
      center: latlng,
      mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

     map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('directionsPanel')); 
    geoXml = new geoXML3.parser({
        map: map,
        suppressInfoWindows: true,
        polygonOptions: {clickable: false}, 
        });
    geoXml.parse('qvote.kml');
    // exml = new EGeoXml({map: map, singleInfoWindow: true, createpolygon: createPoly});
  }

function showAddress(address) {
    var contentString = '';
    Ploc = null;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
      var point = results[0].geometry.location;
          map.setCenter(point);
          if (marker && marker.setMap) marker.setMap(null);
          marker = new google.maps.Marker({
              map: map, 
              position: point
          });
        for (var i=0; i<geoXml.docs[0].gpolygons.length; i++) {
          if (geoXml.docs[0].gpolygons[i].Contains(point)) {
            contentString = address+'<br>'+geoXml.docs[0].placemarks[i].name;
    //      contentString += '<br>'+point+'<br>polygon#'+i;
            Ploc = geoXml.docs[0].placemarks[i].name;
            i = 999; // Jump out of loop
          }
        }

        google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        if (Ploc) calcRoute(address);
        });
    google.maps.event.trigger(marker,'click');
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
}
function calcRoute(addy) {
  var start = addy;
  var end = Vloc[parseInt(Ploc)];
  var request = {
    origin:start, 
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
} 
```

该页面在这里：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<HTML xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script defer="defer" type="text/javascript" src="calvoteroute.js"></script>
<title>Voter Map</title> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 

<style type="text/css"> 
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
.bla {
    font-family: Verdana, Geneva, sans-serif;
}
</style>
</head>
<body onLoad='initialize()'>

<div><img src="img/pollingbanner.png" width="663" height="126"/></div>
<div><form action="#" onsubmit="showAddress(this.address.value); return false;" style="height:100%; width:100%; padding:0px 0px 0px 0px; background:none;"> 
    <p>
      <label class="bla">Enter the voter's address to find location:</label> 

      <input type="text" size="40" name="address" value="3003 S. Washington, Kaufman TX 75142" class="address" /> 
    <input type="submit" value="Go Vote!"/>
    <br />
    Scroll below to see the current Polling locations
</form></div>
<div style="width: 100%; display: table;">
    <div style="display: table-row">
        <div id="map_canvas" style="width:663px; height:600px; display: table-cell;"></div>
        <div id="directionsPanel" style="width: 200px; height: 600px; display: table-cell;"></div>    
        </div>
</div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:37:53.160

指向您的地图的链接可以让我们知道问题出在哪里（即使使用 IE 的调试器）。

猜测。IE 有用地在数组末尾添加了一个额外的空对象，并在末尾添加了一个“悬挂逗号”（逗号后面没有任何内容）的匿名对象。就像你在这里：

```
geoXml = new geoXML3.parser({
    map: map,
    suppressInfoWindows: true,
    polygonOptions: {clickable: false},   <----------------- bad in IE...
    }); 
```

这可能不是问题或唯一的问题，但它会导致 IE 出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:05:16.587

我用：处理了这个事件， `google.setOnLoadCallback(initialize);`它在 IE 8/9 中显示得很好。

# php - 如何在codeigniter中对COUNT查询执行num_rows（）？

> ID：11354802
> 
> 赞同：5
> 
> 时间：2012-07-06T01:39:54.063
> 
> 标签：php, mysql, codeigniter

这有效：

```
 $sql = "SELECT id
                FROM `users`
                WHERE `account_status` = '" . $i . "'"; 
        $query = $this->db->query($sql);
        var_dump($query->num_rows()); 
```

但这不会：

```
 $sql = "SELECT COUNT(*)
                FROM `users`
                WHERE `account_status` = '" . $i . "'"; 
        $query = $this->db->query($sql);
        var_dump($query->num_rows()); 
```

如何对 COUNT(*) 查询执行 num_rows？第二种方式是否有更好的性能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T01:42:56.153

做 a`COUNT(*)`只会给你一个包含行数而不是结果本身的单数行。

要访问`COUNT(*)`你需要做

```
$result = $query->row_array();
$count = $result['COUNT(*)']; 
```

第二个选项执行得更好，因为它不需要将数据集返回给 PHP，而只是一个计数，因此更加优化。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-06T08:25:18.743

在 CI 中其实很简单，你只需要

```
$this->db->where('account_status', $i);
$num_rows = $this->db->count_all_results('users');
var_dump($num_rows); // prints the number of rows in table users with account status $i 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-13T05:27:42.060

```
$query->num_rows() 
```

查询返回的行数。注意：在本例中，$query 是查询结果对象分配给的变量：

```
$query = $this->db->query('SELECT * FROM my_table');

echo $query->num_rows(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-06T01:44:34.500

COUNT() 查询中的 num_rows 字面意思总是 1。它是一个没有 GROUP BY 子句的聚合函数，因此所有行都组合在一起。如果你想要计数的*值*，你应该给它一个标识符`SELECT COUNT(*) as myCount ...`，然后使用你访问结果的正常方法（第一个，唯一的结果）并获取它的 'myCount' 属性。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-16T12:49:44.877

根据[CI Docs](https://www.codeigniter.com/userguide3/database/query_builder.html#limiting-or-counting-results)，我们可以使用以下内容，

```
$this->db->where('account_status', $i); // OTHER CONDITIONS IF ANY
$this->db->from('account_status'); //TABLE NAME
echo $this->db->count_all_results(); 
```

如果我们想在没有任何条件的情况下获取表中的总行数，简单使用

```
echo $this->db->count_all_results('table_name'); // returns total_rows presented in the table 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-10T06:58:25.107

这是我解决上述问题的方法

**模型**

```
$this->db->select('count(id) as ids');
$this->db->where('id', $id);
$this->db->from('your_table_name'); 
```

谢谢

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-06T01:44:09.283

这只会返回 1 行，因为您只是选择了`COUNT()`. 在这种情况下，您将使用`mysql_num_rows()`on 。`$query`

如果要获取每个`ID`' 的计数，请添加`GROUP BY id`到字符串的末尾。

性能方面，永远不要`*`在查询中使用。如果一个表中有 100 个唯一字段，并且您想全部获取它们，则写出全部 100，而不是`*`. 这是因为`*`必须重新计算它必须去多少个字段，每次它抓取一个字段，这需要更多的时间来调用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-06T02:01:46.567

我建议不要使用相同的参数进行另一个查询，而是立即运行`SELECT FOUND_ROWS()`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-08-24T21:32:45.387

```
 $list_data = $this->Estimate_items_model->get_details(array("estimate_id" => $id))->result();
    $result = array();
    $counter = 0;
    $templateProcessor->cloneRow('Title', count($list_data));
    foreach($list_data as $row) {
        $counter++;
        $templateProcessor->setValue('Title#'.$counter, $row->title);
        $templateProcessor->setValue('Description#'.$counter, $row->description);
        $type = $row->unit_type ? $row->unit_type : "";
        $templateProcessor->setValue('Quantity#'.$counter, to_decimal_format($row->quantity) . " " . $type);
        $templateProcessor->setValue('Rate#'.$counter, to_currency($row->rate, $row->currency_symbol));
        $templateProcessor->setValue('Total#'.$counter, to_currency($row->total, $row->currency_symbol));   
    } 
```

# jqgrid - 带有 web api 的 jqgrid 没有被填充

> ID：11354805
> 
> 赞同：0
> 
> 时间：2012-07-06T01:40:12.753
> 
> 标签：jqgrid

我对 jqGrid 很陌生。我正在尝试使用 asp.net web api 加载简单的 jqgrid。api 发回 emailDto 的列表。emailDto 是具有 3 个公共属性的普通类

问题是 jqgrid 没有被填充。很感谢任何形式的帮助。

```
function dataBindToGrid() {
        var lastsel;
        $("#emailgrid").jqGrid({
            url: '/api/email/',
            datatype: "json",
            mytype: 'GET',
            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
            colNames: ['Address ID', 'Type', 'Email'],
            colModel: [{ name: 'Address_ID', width: 70, primaryKey: true, editable: false, sortable: false, hidden: false, align: 'left' },
                    { name: 'Email_Type', width: 70, editable: true, align: 'left', sortable: false },
                    { name: 'Email_Address', width: 200, editable: true, align: 'left', sortable: false }

            ],
            onSelectRow: function (id) {
                if (id && id !== lastsel) {
                    var grid = $("#emailgrid");
                    grid.restoreRow(lastsel);
                    grid.editRow(id, true);
                    lastsel = id;
                }
            },
            //This event fires after all the data is loaded into the grid
            gridComplete: function () {
                //Get ids for all current rows
                var dataIds = $('#emailgrid').jqGrid('getDataIDs');
                for (var i = 0; i < dataIds.length; i++) {
                    //Put row in edit state
                    $("#emailgrid").jqGrid('editRow', dataIds[i], false);
                }
            },
            rowNum: 3,
            viewrecords: true,
            caption: "Email Addresses"
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:53:09.347

当为 jsondatatype 配置时，jqGrid 需要以下 json 格式的数据：

```
{ 
  "total": "xxx", 
  "page": "yyy", 
  "records": "zzz",
  "rows" : [
    {"id" :"1", "cell" :["cell11", "cell12", "cell13"]},
    {"id" :"2", "cell":["cell21", "cell22", "cell23"]},
      ...
  ]
} 
```

返回的数据必须与此匹配，否则它将不起作用。这是默认的 json 结构（您可以根据需要更改它）。根据您使用的浏览器，您应该能够看到 ajax 请求和响应以及在网格自身构建时发送和返回的数据（Firefox 使用 firebug，IE 使用开发人员工具栏）

按照[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:18:25.683

解决了！

刚刚添加到下面的 jqGrid 中，它就可以工作了。

```
jsonReader: {
                repeatitems: false,
                page: function () { return 1; },
                root: function (obj) { return obj; },
                records: function (obj) { return obj.length; }
            }, 
```

# jquery - 如何使用 jQuery Masked Input Plugin 预填充 9？

> ID：11354807
> 
> 赞同：10
> 
> 时间：2012-07-06T01:40:28.963
> 
> 标签：jquery, mask, maskedinput

我正在使用来自 digitalBush 的 Masked Input Plugin for jQuery，它使用起来非常简单。

在某些情况下，我想为客户端预先填充数据，所以对于这样的事情：

```
.mask("123999") 
```

客户将看到：

```
123___ 
```

并且需要插入最后 3 位数字。在我想预先填充数字 9 之前它工作正常，以显示如下内容：

```
129___ 
```

当我制作面具时`"129999"`，用户看到`12____`

甚至可以使用对用户可见的此插件进行掩码`129___`吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T07:03:31.273

您可以像这样重新定义屏蔽输入定义：

```
$.mask.definitions['9'] = '';
$.mask.definitions['d'] = '[0-9]'; 
```

然后使用这个掩码：

```
.mask("129ddd") 
```

# javascript - 如何制作一个非常基本的所见即所得？

> ID：11354810
> 
> 赞同：0
> 
> 时间：2012-07-06T01:40:38.823
> 
> 标签：javascript

您知道如何使用 javascript 制作 html 编辑器或所见即所得吗？我尝试了很多编辑器，但似乎我尝试过的所有编辑器都没有给我想要的结果。

我希望可用的命令是：

大胆的

斜体

强调

插入图片

复制粘贴是可以的，但我想限制的是，当有人粘贴可点击的链接、表格或任何具有 html 格式的东西时，除了这 4 个命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:44:16.073

这可能是您正在寻找的。它是 jQuery。只需通过#id 将其连接到文本区域，您就可以开始摇滚了。您可以禁用按钮以制作最基本的编辑器。

```
<script type="text/javascript" src="jquery.wysiwyg.js"></script>
<script type="text/javascript">
$(function() {
    $('#wysiwyg').wysiwyg();
});
</script>

<textarea id="wysiwyg"></textarea> 
```

这里：[http ://akzhan.github.com/jwysiwyg/](http://akzhan.github.com/jwysiwyg/)

试试这个 [http://nicedit.com/index.php](http://nicedit.com/index.php)

# javascript - 如何在美国的 SVG 地图上创建州之间 的统一差距？

> ID：11354812
> 
> 赞同：0
> 
> 时间：2012-07-06T01:40:56.547
> 
> 标签：javascript, canvas, svg, raphael, html5-canvas

我目前的项目是一张美国的热图：

[http://up.massrelevance.com/cnbc/top-states/heatmap.html](http://up.massrelevance.com/cnbc/top-states/heatmap.html)

每个状态都是它自己的 Raphael 对象，目前，我为每个状态使用 2px 白色笔画来表示其边界。

但是，我正在尝试匹配在每个状态之间具有均匀间隙的组合 - 以及背后的阴影：

[http://www.evernote.com/shard/s223/sh/00da56ce-658a-40f2-ae2f-b2b1c470f845/f4b490b7a409511974496b5d8beb7ffb](http://www.evernote.com/shard/s223/sh/00da56ce-658a-40f2-ae2f-b2b1c470f845/f4b490b7a409511974496b5d8beb7ffb)

从视觉的角度来看，我基本上需要将地图中的白线更改为透明/空白空间，以便阴影显示出来。

有没有一种相对简单的方法来实现这一点？到目前为止我的想法：

*   远景愿望，但如果存在的话，请使用某种“负面”笔触。一个透明的笔触将是不可见的，但是一个“切穿”任何路径/笔触/填充在它下面的图层以显示背景的笔触将是一个微不足道的修复。
*   删除笔画并使用 Raphael 的`transform`属性将[`.attr()`](http://raphaeljs.com/reference.html#Element.attr)每个状态按比例缩小一小部分（例如，5%）。我试过这个并且效果相当好，但需要注意的是状态不是对称的，因此它们基于通常不理想的中心点进行缩放（许多状态偏离中心并略微相互重叠）。该中心点可以更改，但这将涉及大量州的大量繁琐试验和错误。
*   使用与投影颜色匹配的笔触颜色模拟状态之间的间隙。这将足够接近，但北部/西部各州顶部和左侧的阴影色笔划将是一个赠品。

我将不胜感激任何提示、想法或建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:53:06.853

SVG 中没有像负笔画这样的东西。但是，您可以做的是缩小填充区域，以便获得所需的间隙，并避免使用笔划。

您可以使用实验`Element.blur(amount)`方法（需要 SVG 过滤器支持，因此在 Safari 5 或 IE9 中不起作用）。它应该在所有其他浏览器中都能正常工作，包括 IE10。

# c# - 每隔几分钟执行一次 global.asax 中的方法

> ID：11354814
> 
> 赞同：4
> 
> 时间：2012-07-06T01:42:11.663
> 
> 标签：c#, asp.net, multithreading, timer, webserver

每 x 分钟执行 Global.asax 文件中的方法的最有效方法是什么？有没有办法让 ASP.NET 服务器运行一个后台线程，该线程在一段时间后触发一个滴答事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T01:52:51.423

您可以在 Global.asax 的 Application_Start 中有一个计时器，但这不是很灵活，因为您需要向应用程序发出请求以启动计时器。但是，按照 Haacked 的详细说明，这样做是有危险的：

*   [http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

一个更好的方法是有一个 Web 服务作为 ASP.NET 应用程序的接口，并有一个 Windows 服务在预定的时间间隔调用你的 Web 服务：

更多细节在这里：

*   [http://msdn.microsoft.com/en-us/magazine/cc163821.aspx](http://msdn.microsoft.com/en-us/magazine/cc163821.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:02:57.870

您可以结合使用 HTTPModule 和 ASP.NET TIMER 来执行此操作

[http://technico.qnownow.com/2012/04/06/create-custom-http-module-to-periodically-refresh-cache-or-some-other-work/](http://technico.qnownow.com/2012/04/06/create-custom-http-module-to-periodically-refresh-cache-or-some-other-work/)

（或者）

您可以使用 AJAX Timer 控件。

[http://technico.qnownow.com/2012/06/12/refresh-gridview-intervals-using-ajax-timer/](http://technico.qnownow.com/2012/06/12/refresh-gridview-intervals-using-ajax-timer/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T01:46:17.160

将一个`System.Timers.Timer`对象`Application_Start ()`放入`Global.asax`.

[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

# datetime - 如何更改日期时间对象的日期格式？

> ID：11354820
> 
> 赞同：0
> 
> 时间：2012-07-06T01:43:02.020
> 
> 标签：datetime, sqlanywhere

目前，我有一个日期时间对象

```
DateTime theDateTime = DateTime.ParseExact(dateAndTime, "d MMMM yyyy hh:mm tt", provider); 
```

它成功地将其转换为日期时间（从字符串），例如：

2012 年 7 月 6 日上午 9:30:00

我如何将其转换为 2012/07/06 09:30:00（24 小时格式）？这样我就可以使用 C# 将它插入到数据库中？？

PS：我使用的是 Sybase SQL Anywhere 12，根据我的阅读，他们需要格式为年/月/日，时间为 24 小时格式，对吗？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:57:28.520

DateTime 本身没有格式。日期和时间在内部存储为数字。通常，数据库提供者的类负责将 DateTime 转换为正确的格式。

如果 Sybase 只接受格式化为字符串的日期，则需要使用 DateTime.ToString 方法并使用[正确的格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4)对其进行格式化。

你是如何构建插入命令的？您是使用数据库参数还是只是构建一个包含插入语句的字符串？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:11:35.153

SQL Anywhere 12 的默认日期格式为 YYYY-MM-DD HH:NN:SS.SSS

这可以使用 timestamp_format 数据库选项进行配置/更改，但是：

[timestamp_format 选项](http://dcx.sybase.com/index.html#1201/en/dbadmin/timestamp-format-option.html)

该设置可以通过 SQL 永久更改，例如：

```
SET OPTION PUBLIC.timestamp_format = '<format here>'; 
```

或临时更改（基于每个连接），例如：

```
SET TEMPORARY OPTION timestamp_format = '<format here>'; 
```

当然，如果您的代码中已经有一个 datetime 对象，您应该能够将该值传递给参数化查询。它不必作为字符串传递。

# jquery - ie8/jquery 问题

> ID：11354823
> 
> 赞同：0
> 
> 时间：2012-07-06T01:43:12.987
> 
> 标签：jquery, internet-explorer-8

我的 jquery 代码存在 IE8 问题。据我所知，当我更改 dom 文档中的某些内容时，如果更改很小，它就会起作用。所以这有效：

```
$("#element").html("<p>hi</p>"); 
```

但是以下不起作用，其中变量是更复杂的 dom 元素，例如 Web 表单。

```
$("#element").html(variable); 
```

我应该如何插入或更改 ie8 的 dom？谢谢，

垫

# git - Adobe AIR 应用程序的 Jenkins CI 服务器设置（使用 FlexUnit4 和 GitHub 作为存储库）

> ID：11354827
> 
> 赞同：3
> 
> 时间：2012-07-06T01:43:50.083
> 
> 标签：git, air, continuous-integration, jenkins, flexunit4

我有一个用 Robotlegs 1.5.2 编写的 Adob​​e AIR 应用程序。使用的单元测试框架是 FlexUnit4。我已经为使用 CakePHP 2.x 和 PHPUnit 的单元测试框架编写的项目设置了 Jenkins CI。我的 Jenkins CI 服务器在 Rackspace 上的 Ubuntu 11.10 上。

我打算为 Adob​​e AIR 应用程序项目使用相同的 Jenkins 服务器。我正在使用 git 和 github，不打算切换到 maven。我找到了这个[教程](http://newtriks.com/2011/07/19/configuring-a-ci-server-with-git-on-ubuntu-amazon-ec2/)，但它看起来很吓人，而且它是在 2011 年编写的。

我想知道是否有另一种方法，或者这是最好的方法。我想详细了解如何**在部署 Adob​​e AIR 应用程序之前在还运行 FlexUnit4 测试的 Jenkins 上设置 CI。**

Adobe AIR 应用程序将部署在服务器上供人们下载。

我更喜欢那些在过去 6 个月中至少有一次设置它的经验的人的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:33:13.913

这是可行的，但我认为这不是一件容易的事。

要在服务器上执行测试，服务器需要安装 flash player 或 adobe air。您可以使用 GUI 设置从站并将 Jenkins 配置为使用[分布式构建](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)运行，或者您可以使用[xvfb](http://en.wikipedia.org/wiki/Xvfb)。

您将需要构建 AIR 测试运行程序并执行它。尽管您说您不打算切换到 Maven，但我发现它是在闪存上进行单元测试和代码覆盖的最简单途径。此[演示文稿](http://tv.adobe.com/watch/max-2011-develop/maven-and-jenkins-for-enterprise-flex-applications/)可能对您有用。没有 maven 也可以做到，但您可能会花费大量时间编写构建脚本。[此外，我发现它是唯一无需使用flexcover](http://code.google.com/p/flexcover/)修改 sdk 即可提供覆盖率报告的解决方案。看看[这篇](http://www.sonatype.com/people/2010/04/flex-test-coverage-kept-simple-with-flexmojos/)文章。

相比之下，让 Jenkins 与 Git/Github 一起工作很容易。

# ipython - ipython 重新加载 ipython_config.py

> ID：11354830
> 
> 赞同：2
> 
> 时间：2012-07-06T01:44:10.547
> 
> 标签：ipython

在 ipython 中，我有`ipython_config.py`

当我对此文件进行更改时，如何重新加载 ipython ？（无需重启 ipython）

例如更改提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:50:44.707

据我所知，您不能 - 当您启动 IPython 时会读取该文件。您可以在 IPython 运行时更改任何配置的值：

```
%config PromptManager.in_template = "\\#>>>" 
```

不过，这不会存储在配置文件中。

# c++ - decltype 和成员函数（不是指针）类型

> ID：11354841
> 
> 赞同：1
> 
> 时间：2012-07-06T01:46:54.343
> 
> 标签：c++, visual-c++, c++11, decltype, visual-c++-2012

```
struct C
{
    int Foo(int i) { return i; }

    typedef decltype(C::Foo) type;
}; 
```

由于没有像成员函数类型这样的类型（没有，是吗？），我希望`C::type`是`int (int)`.

但以下内容无法使用 Visual C++ 2012 RC 进行编译：

```
std::function<C::type> f; 
```

那么是什么类型`decltype(C::Foo)`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T02:10:10.413

代码格式错误：成员函数名（例如 ）只有几种`C::Foo`使用方式，而这不是其中之一（有效使用的完整列表可以在 C++ 语言标准中找到，请参阅 C ++11 §5.1.1/12)。

在您的示例的上下文中，您唯一能做的就是获取成员函数的地址`&C::Foo`, 以形成指向成员函数的指针，类型为`int (C::*)(int)`。

由于代码格式错误，编译器应该拒绝它。此外，它会根据`C::Foo`使用方式产生不一致的结果；我们将看看下面的不一致。

请报告[Microsoft Connect](http://connect.microsoft.com/VisualStudio)上的错误。或者，让我知道，我很乐意报告这个问题。

* * *

如果您有一个类型，但您不知道该类型是什么，您可以通过以一种导致编译器发出错误的方式使用它来找出该类型的名称。例如，声明一个类模板并且从不定义它：

```
template <typename T>
struct tell_me_the_type; 
```

然后稍后，您可以使用您感兴趣的类型实例化此模板：

```
tell_me_the_type<decltype(C::Foo)> x; 
```

由于`tell_me_the_type`尚未定义，因此定义`x`无效。编译器*应该*在它发出的错误中包含类型`T`。Visual C++ 2012 RC 报告：

```
error C2079: 'x' uses undefined struct 'tell_me_the_type_name<T>'
with
[
    T=int (int)
] 
```

编译器认为那`C::Foo`是 type `int (int)`。如果是这种情况，那么编译器应该接受以下代码：

```
template <typename T>
struct is_the_type_right;

template <>
struct is_the_type_right<int(int)> { };

is_the_type_right<decltype(C::Foo)> x; 
```

编译器不接受此代码。它报告以下错误：

```
error C2079: 'x' uses undefined struct 'is_the_type_right<T>'
with
[
    T=int (int)
] 
```

所以，`C::Foo`既是类型`int (int)`又不是类型`int (int)`，这违反了不矛盾的[原则](http://en.wikipedia.org/wiki/Law_of_noncontradiction)。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T01:53:01.173

> 那么是什么类型`decltype(C::Foo)`呢？

它不是类型，因为使用 just`C::Foo`是不正确的。

# mercurial - hg忘记还是忽略更好？

> ID：11354845
> 
> 赞同：3
> 
> 时间：2012-07-06T01:47:59.677
> 
> 标签：mercurial

我有一些不需要提交的二进制文件。我需要它们用于本地。我应该这样做`hg forget binary-folder/`还是将这一行添加到`.hgignore`？

`glob:binary-folder/*`

哪一个更好？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T01:52:54.557

以下引用来自Martin Geisler 的[这个邮件列表帖子](https://www.mercurial-scm.org/pipermail/mercurial/2009-August/027072.html)。

> 可以跟踪或不跟踪文件，您可以使用“hg add”来跟踪文件，使用“hg remove”或“hg forget”来取消跟踪。使用不带标志的 'hg remove' 将删除文件并取消跟踪它，'hg forget' 将简单地取消跟踪它而不删除它。
> 
> 未跟踪的文件会在“hg status”中显示一个问号，除非它们与 .hgignore 文件匹配。因此，当您“忘记”一个文件时，它通常会在“hg status”中显示为未跟踪，除非您的 .hgignore 中有与所述文件匹配的行。
> 
> 被跟踪的文件永远不会受到 .hgignore 文件的影响。

对于您的情况，显然忽略将是首选。

# javascript - javascript不显示表格值html

> ID：11354846
> 
> 赞同：0
> 
> 时间：2012-07-06T01:48:02.500
> 
> 标签：javascript, jquery, html, qtip2

我正在创建一个 JavaScript 应用程序，当您将鼠标悬停时，会弹出一个小窗口，显示有关单元格中显示的值的信息。该功能如下图所示。但是，当我加载页面时，当我将鼠标悬停在单元格上时没有显示任何内容，尽管当我从 firebug 的终端运行该功能时，它开始按预期工作。为什么想法为什么？

```
$(document).ready(function()
        {
            $('#mytable td').qtip({
                content : {
                    text : function(api){
                        return "Time spend: " + $(this).html();
                    }
                },
                position : {
                    my : 'top left',
                    target : 'mouse',
                    viewport : $(window),       //keep it on-screen at all time if possible
                    adjust : {
                        x : 10, y : 10
                    }
                },
                hide : {
                    fixed : true                // Helps to prevent the tooltip from hiding occassionaly when tracking!
                },
                style : 'ui-tooltip-shadow'
            });
        }); 
```

和 HTML

```
<div id="mytable">
<table id="mytable" border="1px">
<tbody>
<tr>
<td style="background-color: rgb(0, 191, 255);">1</td>
<td style="background-color: rgb(0, 191, 255);">1</td>
<td style="background-color: rgb(0, 191, 255);">1</td> 
```

这只是表格的一个示例。表本身很大（热图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:18:19.360

请为其添加覆盖和显示属性，看看它是否有效。

例如：

```
$(this).qtip({
      overwrite: false, // make sure it can't be overwritten
      content: 'bla bla bla'
      show: {
         ready: true // make sure it show on first mouseover
      }
   }) 
```

# c++ - 类 WCF 原生 C++ 库

> ID：11354852
> 
> 赞同：3
> 
> 时间：2012-07-06T01:49:30.323
> 
> 标签：c++, wcf, gcc

我正在寻找一个用于本机 C++ 的库（库源代码必须与 gcc 兼容并且可在 Linux 和 Windows 之间移植），它可以执行 WCF 以非常基本的形式执行的操作 - 即客户端-服务器环境中的 OperationContracts 和 DataContracts，具有数据交换二进制格式（二进制序列化）。

理想情况下，我想使用一个库来实现这一点。因此，如果有一个库已经可用，可以将 OperationContracts 和 DataContracts 编译成丰富的 C++ 类，其中包含用于反射的元数据，这些元数据可以在我们的代码中使用，并且内置客户端-服务器 TCP 通信（即 WCF 功能的基本实现，无需完全兼容WCF），请指点我。

如果没有，我自己实现它们（不太可能由于时间限制），我可以对 DataContracts 使用 boost::serialization 但我将如何实现 OperationContracts？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:11:40.563

它不一定与 gcc 兼容——因此它与此处提出的确切问题有些相切——但我想包括对[Windows Web Services API](http://msdn.microsoft.com/en-us/library/dd430435%28VS.85%29.aspx)的引用，它是Microsoft 与 WCF 对应的本机代码（适用于 Windows 系统）。

从[这篇次要文章](http://msdn.microsoft.com/en-us/magazine/ee335693.aspx)：

> WWS 从头开始​​设计为 SOAP 的完全本机代码实现，包括对许多 WS-* 协议的支持。严格来说，WWS 是通过 C API 公开的，这使得与其他语言和运行时的互操作性非常简单，但 C++ 开发人员可能会受益最多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:56:36.167

Apache Thrift 是您可能会考虑的另一种选择，

[http://en.wikipedia.org/wiki/Apache_Thrift](http://en.wikipedia.org/wiki/Apache_Thrift)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:06:25.093

我找到了一个适合 Delta V Software 称为“RCF”（远程呼叫框架）的目的。它是开源的（GPLv2 或 195 美元的封闭源代码）。到目前为止，在我的测试中，它运行良好。据该网站称，惠普、爱立信和西门子等公司都是该图书馆的用户。

# ruby-on-rails - 如何在回形针的after_post_process回调中访问处理器#make返回的结果？

> ID：11354855
> 
> 赞同：1
> 
> 时间：2012-07-06T01:49:53.277
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在尝试允许上传 pdf 文件。pdf 文件上传后，a`Paperclip::Processor`会在其 make 实例方法中将其转换为文本文件。然后，我想解析文本文件以填充`ActiveRecord`类。如何访问处理器在其 make 实例方法中返回的已处理文件？

代码骨架在这里：

```
module Paperclip
  class PdfToText < Processor
    ...
     def make
      dst = File.new(..)
      #do something to dst
      dst
     end
  end
end

class Xyz < ActiveRecord::Base
  has_attached_file :source_file, ..., :processors =>[:pdftotext]

  after_post_process :do_it

  def do_it
    # I would like to access the dst file returned in make of the processor PdfToText
  end
end 
```

欣赏你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:24:28.007

那这个呢？

```
source_file.queued_for_write[:original].path 
```

# javascript - 为什么将 TrackballControls 应用于相机以外的对象时会向后？

> ID：11354856
> 
> 赞同：1
> 
> 时间：2012-07-06T01:50:32.313
> 
> 标签：javascript, three.js

正如标题所说，当我将 TrackballControls 应用于球体网格时，它们无法正常工作。它向后工作，因此横向拖动会垂直移动球体，反之亦然。

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:15:46.713

这不是实现这一点的最干净的方式，但是......你试过这样做吗？

```
controls.rotateSpeed = - 1.0; 
```

# scala - 在 Play/Scala 中使用相同的键但不同的值创建一个 json

> ID：11354857
> 
> 赞同：-1
> 
> 时间：2012-07-06T01:50:47.240
> 
> 标签：scala, playframework

这是我想要实现的目标：

```
{ "user-list" : {
      "user" : [
           "username" : "foo"
       },

       {
           "username" : "bar"
       }
     ]
  }
} 
```

我使用播放框架和 scala。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:03:59.293

正如之前的评论者已经指出的那样，鉴于您的 json 代码无效（尝试[JSONLint](http://jsonlint.com/)）并且我们不知道它来自哪里（字符串？（案例）数据库中的类？文字），如何帮助您并不明显?) 以及你想用它做什么。

与您接近的有效 json 代码将是：

```
{
  "user-list": {
    "user": [
      { "username": "foo" },
      { "username": "bar" }
    ]
  }
} 
```

根据您的结构包含多少附加信息，以下内容可能就足够了（V1）：

```
{
  "user-list": [
    { "username": "foo" },
    { "username": "bar" }
  ]
} 
```

甚至（V2）：

```
{ "user-list": ["foo", "bar"] } 
```

按照[Play 文档](http://scala.playframework.org/documentation/2.0.2/ScalaJson)，您应该能够生成 V1：

```
val jsonObject = Json.toJson(
  Map(
    "user-list" -> Seq(
      toJson(Map("username" -> toJson("foo"))),
      toJson(Map("username" -> toJson("bar")))
    )
  )
) 
```

和 V2：

```
val jsonObject = Json.toJson(
  Map(
    "user-list" -> Seq(toJson("foo"), toJson("bar"))
  )
) 
```

# c# - 如何在 Mac 上的 Mono 中获取网络接口列表？

> ID：11354858
> 
> 赞同：4
> 
> 时间：2012-07-06T01:50:57.960
> 
> 标签：c#, mono, monomac

在 MonoDevelop 中针对 OS X 上的 Mono/.NET 4.0 创建一个 Mono 控制台应用程序，用作 TCP 套接字服务器。

以下代码行失败（您通常会在 Windows 端使用）：

```
var interfaces = NetworkInterface.GetAllNetworkInterfaces(); 
```

...有错误`System.DllNotFoundException: iphlpapi.dll`

最好我能说这仅在 Windows 和 Linux 上受支持。但是，似乎还有另一种为 Mac 设计的方法：

```
System.Net.NetworkInformation.MacOsNetworkInterface.GetAllNetworkInterfaces(); 
```

虽然这似乎被 MonoDevelop 识别，但它无法编译并出现`The type or namespace 'MacOsNetworkInterface' does not exist in the namespace 'System.Net.NetworkInformation'.`错误。已经引用了 System 和 System.Net。

我错过了什么？

**编辑：**发现当我在 MonoDevelop 中创建新的 C# 控制台应用程序时确实有效，但在现有项目（ [NetworkComms.net](https://bitbucket.org/MarcF/networkcomms.net/wiki/Home "网络通讯网")`NetworkInterface.GetAllNetworkInterfaces()` ）中不起作用- 它们的目标相同，Mono，.NET 4.0 具有相同的引用和v4 .0.0.0，有什么区别？`System``System.Net`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:22:07.890

如果您需要调用低级 OS X API/框架，[MonoMac](http://www.mono-project.com/MonoMac)是您的最佳选择。然而，并不是所有的 OS X 框架都绑定在 MonoMac 中。从 Apple Developer 文档中，我认为您需要[SystemConfiguration API](https://developer.apple.com/library/mac/#documentation/Networking/Reference/SysConfig/_index.html)中的函数，这些函数目前不受 MonoMac 的约束。

但是您始终可以使用 DllImport 自己为缺少的函数创建绑定。我最近使用 DiskArbitration 框架（也没有绑定）完成了它，您可以将其用作参考：[http ://git.gnome.org/browse/banshee/tree/src/Backends/Banshee.Osx /Banshee.Hardware.Osx/LowLevel?id=136fcbcc2e0421aba6be79306dc111fdabb3c749](http://git.gnome.org/browse/banshee/tree/src/Backends/Banshee.Osx/Banshee.Hardware.Osx/LowLevel?id=136fcbcc2e0421aba6be79306dc111fdabb3c749)

# eclipse - 未绑定的类路径容器：Eclipse Juno 中的“JRE 系统库 [OSGi/Minimum-1.2]”

> ID：11354865
> 
> 赞同：3
> 
> 时间：2012-07-06T01:52:25.980
> 
> 标签：eclipse, classpath

对于我的课程，我从教授提供给我们的在线资源中导入了代码，并尝试在 Eclipse Juno 中运行它（我不确定哪个版本会有所不同）我收到错误消息“未绑定的类路径容器：' JRE System Library [OSGi/Minimum-1.2]' in project 'cs112'" 我研究了这个问题的几个答案并尝试了多种解决方案，包括构建路径和添加我命名为 JRE 的库，以及设置正确的执行环境！我可能做错了什么？请帮忙！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T02:19:36.113

在首选项（菜单窗口，首选项）中，找到“Java”、“已安装的 JRE”。您应该至少有一个 JRE，最好有一个可用的 JDK。然后，在同一部分中，有一个子部分“执行环境”。

您尝试使用的项目要求“OSGi/Minimum-1.2”。“执行环境”首选项部分允许您查看和调整可用 JRE 如何映射到请求的执行环境。如果您的所有 JRE 都没有被列为与请求的环境兼容，您可能必须

1.  安装新的 JRE 或 JDK，例如最近的 Java 1.7
2.  *并且*，这很重要，通过将新 JRE 添加到“已安装的 JRE”中来告诉 Eclipse。选择“添加”->“标准VM”->指向“jdk1.7.xxx”。

# java - Xquery 使用 XQJ JSR 225

> ID：11354866
> 
> 赞同：0
> 
> 时间：2012-07-06T01:52:37.507
> 
> 标签：java, xquery, jsr286, jsr, jsr223

我有以下java代码。我正在使用 XQJ 使用 XQJ api 编写一个测试 XQuery 程序。我已经下载了 JSR-000225 XQuery API for Java 1.0 Final Release，并将 xqjapi.jar 添加到我的类路径中。java代码简单如下

```
import javax.xml.xquery.XQConnection;
import javax.xml.xquery.XQDataSource;
import javax.xml.xquery.XQException;

public class SaxonExtJavaObject {

public static void main(String[] args) throws XQException, InstantiationException,       IllegalAccessException, ClassNotFoundException {

  XQDataSource xqds = (XQDataSource)
          Class.forName("com.jsr225.xqj").newInstance();

       // obtain a connection
       XQConnection con = xqds.getConnection("usr", "passwd");
       System.out.println("connected");
}
} 
```

我的问题是我有以下异常

```
 Exception in thread "main" java.lang.ClassNotFoundException: com.jsr225.xqj
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) 
```

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:20:39.667

您仍然需要一个产品（即 XQuery 处理器）作为实际数据源；[您可以在http://xqj.net/](http://xqj.net/)上找到支持的实现列表

与 JDBC 非常相似，尽管有一个接口定义了数据库允许的操作，但您需要一个执行所选任务的实现（例如 MySQL、PostgreSQL 或 DB2）。

有用Java 编写的 XML 数据库的 XQJ 实现：[BaseX](http://xqj.net/basex/)、[eXist](http://xqj.net/exist/)
以及[Zorba](http://www.zorba-xquery.com/html/documentation/2.5.0/xqj)、[MarkLogic](http://xqj.net/marklogic/)（商业）和[Sedna](http://xqj.net/sedna/)（用 C/C++ 编写）的接口。

在您的示例中，您引用了 Saxon，有关使用 Saxon 和 XQJ 的信息可以在[Saxon 的文档中找到](http://www.saxonica.com/documentation/using-xquery/api-query/xqj.xml)

我希望这有助于澄清一些事情。

迈克尔

# c++ - C++：输入和输出流运算符：关联性

> ID：11354871
> 
> 赞同：3
> 
> 时间：2012-07-06T01:53:35.590
> 
> 标签：c++, input, operators, associativity

**理论上的输入/输出流操作符关联性：**

左到右

（例如，据此：[Sait Mary's University website](http://cs.smu.ca/~porter/csc/ref/cpp_operators.html)

**实践中的输入/输出流运算符关联性：**

```
#include <iostream>

int func0() {
  std::cout << "func0 executed" << std::endl;
  return 0;
}

int func1() {
  std::cout << "func1 executed" << std::endl;
  return 1;
}

int func2() {
  std::cout << "func2 executed" << std::endl;
  return 2;
}

int main() {
  std::cout << func0() << func1() << func2() << std::endl;
  return 0;
} 
```

输出（MSVCPP 2010、2012）：

```
func2 executed
func1 executed
func0 executed
012
Press any key to continue . . . 
```

此示例演示以从右到左的顺序调用函数（尽管它们的值按预期的从左到右打印）。

**问题：** 此代码示例如何与关于 LEFT TO RIGHT 执行的标准词相关联？为什么函数执行按从右到左的顺序执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:56:51.390

关联性定义了 operator<< 调用的顺序，它将以这种方式发生：`((((std::cout << func0()) << func1()) << func2()) << std::endl);`. 评估 operator<< 的参数的顺序是实现定义的，但是 iirc，这就是您在此处测试的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:11:31.233

> 此代码示例如何与关于 LEFT TO RIGHT 执行的标准词相关联？

根据需要，打印语句的输出为 012。

> 为什么函数执行按从右到左的顺序执行？

因为这完全取决于实施。除了少数例外，该标准完全没有说明计算运算符参数的顺序。这些例外是逗号运算符、三元运算符`a ? b : c`和布尔短路运算符`&&`和`||`。（如果运算符重载，这些不是序列点）。您不应该依赖于计算操作数的顺序。关联性和参数的顺序是不同的概念。

# android - 返回的 LinearLayout 在 PreferenceActivity 的子类中为 null

> ID：11354872
> 
> 赞同：0
> 
> 时间：2012-07-06T01:53:37.137
> 
> 标签：android

我的库项目中有一个 SettingsActivity，它是 PreferenceActivity 的子类

oncreate 方法如下所示

```
addPreferencesFromResource(R.xml.preferences);
setContentView(R.layout.main); 
```

preference.xml 文件的结构类似于元素 PreferenceScreen -> PreferenceCategory -> Preference 我的主要 main.xml 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical">

  <!--Listview will be replaced by preferences  -->

  <ListView android:id="@android:id/list"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" />

</LinearLayout> 
```

上面的类 SettingsActivity 是在另一个项目中的子类，看起来像这样

```
public class SettingsActivityFree extends SettingsActivity 
{
       private AdView adView;

       @Override
   protected void onCreate(Bundle savedInstanceState) 
       {        
    super.onCreate(savedInstanceState);

            //...

            // layout returned will be null ..
            LinearLayout layout = (LinearLayout)findViewById(R.layout.main);

            // Add the adView to it
            layout.addView(adView);
       } 
```

问题是我试图从父类中获取 LinearLayout 以便我可以在其中添加我的东西，但由于某种原因它返回 null ，我在 SettingsActivity 类中有 LinearLyout 的原因是因为我想在其中放置一些广告等首选项的顶部，并且没有将特定于广告的代码放入库项目中

请告知如果我在这里遗漏了什么，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:09:38.437

首先你需要给你的 LinearLayout 一个`id`using `android:id="@+id/whatever"`。然后您可以使用`findViewById(R.id.whatever)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:06:05.867

你真的应该检查开发者网站。你没有正确地做到这一点。查看有关 ListView 和 ListActivity 的文档。在使用它之前了解它是如何工作的。

也作为提示：

你不这样做`(LinearLayout)findViewById(R.layout.main);`

检索视图时，您会在`R.id.(whatever)`not in 中找到它`R.layout.(whatever)`

# batch-file - 通过相同的开关、参数来安装多个 MSI 文件——在解析所有 *.MSI 模式匹配的目录之后

> ID：11354878
> 
> 赞同：0
> 
> 时间：2012-07-06T01:54:43.473
> 
> 标签：batch-file, wildcard, windows-installer

*（很抱歉没有更简洁地措辞——我不知道如何总结它。）*

我有一个很大的源文件目录——所有的 MSI 文件。与其为每个文件编写单独的命令行脚本，我更愿意：

1.  使用 *.msi 模式匹配（或类似的）调用它们中的所有......并让它们中的每一个都使用“/passive /norestart”运行。

2.  （可选）还包括“/liew”参数，并替换为“[文件名的第一部分].log”

我已经尝试过：

```
FORFILES /P 3DxSoftware64\. /M *.msi /S /C "msiexec @path /passive /norestart" 
```

...但它失败了；它只是启动“MSIEXEC /？”的对话框选项；实际上并没有调用文件 @path 本身。但是，如果我删除整个 "/C '...'" 字符串，那么它*会*正确地回显文件名（带有完整路径）。

我尝试了各种管道结果的方法，例如

```
/C echo @path | msiexec 
```

但它不起作用。

有任何想法吗？
我的消息来源，这导致了我这一点： - [http://www.ss64.com/nt/forfiles.html](http://www.ss64.com/nt/forfiles.html)

感谢您的帮助！！
- 约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:24:13.443

也许您错过了选项对话框的这一部分：

```
…
Install Options
    </package | /i> <Product.msi>
        Installs or configures a product
… 
```

这意味着您错误地调用了安装包。代替

```
msiexec @path … 
```

它应该是

```
msiexec /package @path … 
```

或者

```
msiexec /i @path … 
```

# ruby-on-rails - Gem mongo_mapper_ext (0.2.4) 的 gemspec 无效

> ID：11354879
> 
> 赞同：0
> 
> 时间：2012-07-06T01:54:54.330
> 
> 标签：ruby-on-rails, rubygems, bundler, gemfile, gemspecs

我正在尝试正确捆绑我的 Rails 应用程序，但是当我将 mongo_mapper_ext gem 添加到 Gemfile 时，我总是收到如下错误：

> 不幸的是，gem mongo_mapper_ext (0.2.4) 的 gemspec 无效。因此，Bundler 无法安装此 Gemfile。请让 gem 作者抽出坏版本来解决这个问题。有关详细信息，请参阅[http://bit.ly/syck-defaultkey](http://bit.ly/syck-defaultkey)。

即使我的 Gemfile 指定了不同于 0.2.4 的版本

```
# database
gem 'mongo', "1.4.1"
gem 'mongo_mapper'
gem 'mongo_mapper_ext', "0.2.7" 
```

对问题的根源有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T01:13:28.603

现在我有更多关于这个的信息：

如果您使用的是 bundler 1.1.x 这可能是问题所在

[https://github.com/carlhuda/bundler/issues/1715](https://github.com/carlhuda/bundler/issues/1715)

这是解决方案：

```
bundle install --full-index 
```

bundler 1.1.x 和 Rubygems 索引之间似乎存在问题。

# jquery-ui - Gmail 上下文小工具，无法显示 jQueryUI 按钮

> ID：11354882
> 
> 赞同：0
> 
> 时间：2012-07-06T01:55:33.713
> 
> 标签：jquery-ui, gmail-contextual-gadgets

**让 jQueryUI 工作/初始化 Gmail Contetual Gadget Spec 文件的 CDATA 部分内的基本按钮时遇到**问题。

这是规范文件的 CDATA 部分的第一部分。

问题是当 alert() 运行时， .button() 调用对 html 按钮没有任何作用。

我也试过 .button("refresh") 无济于事。

```
<Content type="html" view="card">
<![CDATA[
  <style type="text/css" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css"></style>
  <!-- Start with Single Sign-On -->      
  <script type="text/javascript" src="http://example.com/gadgets/sso.js"></script>
  <!-- jQuery -->
  <!-- Check for latest .. https://developers.google.com/speed/libraries/devguide -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
  <p>Version 11</p>

  <button type="submit" id="test-button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button"><span class="ui-button-text">Button</span></button>
  <script type="text/javascript">$(function() { $("#test-button").button(); alert("why?"); } );</script> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:19:01.730

您需要在最后一行`#`的选择器前面添加一个，因为它是.`test-button``test-button``id``button`

您还拥有比创建按钮所需的更多的标记。尝试更改此行：

```
<button type="submit" id="test-button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button"><span class="ui-button-text">Button</span></button> 
```

到...

```
<button id="test-button">Button</button> 
```

该`button`插件将负责从那里添加所有类以及它需要的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:46:18.400

好吧，所以..耻辱。问题是没有正确导入 jqueryUI 样式。

而不是“”，我需要使用“

```
<link rel="stylesheet" type="text/css" media="screen, projection" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css"/> 
```

# ios - 对每种类型的获取使用单独的 NSFetchedResultsController

> ID：11354889
> 
> 赞同：1
> 
> 时间：2012-07-06T01:57:09.850
> 
> 标签：ios, database, core-data, nsfetchedresultscontroller

我有一个包含许多需要检索的不同对象的数据库。我已经决定使用`NSFetchedResultsController`s 来检索和存储数据。开发人员使用多个 NSFetchedResultsController 是否是正确的协议？例如：

```
NSFetchedResultsController *loadDates = ...;
NSFetchedResultsController *loadMoreData = ...;
NSFetchedResultsController *loadMuchMoreData = ...; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:59:21.990

一般来说，您应该使用`NSFetchRequest`一次性检索数据。

然而真正有用的是在你`NSFetchedResultsController`的数据和你的`UITableViewController`子类之间建立一座桥梁。*将监视对其谓词范围内的托管对象上下文*`NSFetchedResultsController`的所有更改，并将委托方法发送到您的子类，以便您可以更新您的 UI。*`UITableViewController`*

# jquery - 如何在 jquery 中的第一个子 div 之后附加元素？

> ID：11354892
> 
> 赞同：15
> 
> 时间：2012-07-06T01:57:43.557
> 
> 标签：jquery

假设我有以下 div：

```
<div id="mydiv">
 <div>1</div>
 <div>2</div>
 <div>3</div>
 <div>4</div>
</div> 
```

我怎样才能在 jquery 或 javascript 中使我可以在“mydiv”的第一个孩子之后附加一个元素。或者是否有一些选择器允许我在第一个孩子之后选择和追加？

```
<div>
 <div>1</div>
 <div>Place to Insert Subsequent div</div>
 <div>2</div>
 <div>3</div>
 <div>4</div>
</div> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-06T02:01:49.017

您可以使用[`:first-child`](http://api.jquery.com/first-child-selector/)and执行此操作[`after`](http://api.jquery.com/after/)：

```
$("#mydiv div:first-child").after(newDiv); 
```

[演示](http://jsfiddle.net/TRu23/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-06T02:02:20.823

我更喜欢使用[`eq()`](http://api.jquery.com/eq/)而不是`first-child`因为它更灵活，如果我想将其更改为在第二或第三个 div 之后，我可以将函数中的`0`值更改为or 。`eq(0)``eq(1)``eq(2)`

```
 $("#mydiv div:eq(0)").after('<div>Place to Insert Subsequent div</div>') 
```

[http://jsfiddle.net/KjY7H/](http://jsfiddle.net/KjY7H/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T02:39:01.860

为了保持可读性，您可以将要附加的 div 存储在变量中：

```
var subsequentDiv = $('<div>Place to Insert Subsequent div</div>'); 
```

然后使用您的变量使用您喜欢的 jQuery 方法，在我的示例中，我使用“insertAfter”：

```
subsequentDiv.insertAfter('#mydiv div:eq(0)'); // selects children by its index, the first div is equal to 0  
subsequentDiv.insertAfter('#mydiv div:lt(1)'); // selects children that its index is lower than 1 (it means the second div) 
```

实现相同结果的另一种方法是使用“包含过滤器”读取 div 的内容：

```
subsequentDiv.insertAfter('#mydiv div:contains("1")'); 
```

[http://jsfiddle.net/cadence96/tyBnX/1/](http://jsfiddle.net/cadence96/tyBnX/1/)

# c# - 防止 ASP.NET 写入 cookie 并通过 CDN 将其附加到静态内容

> ID：11354894
> 
> 赞同：1
> 
> 时间：2012-07-06T01:57:54.140
> 
> 标签：c#, asp.net, optimization, session-cookies, page-load-time

有什么方法可以阻止 ASP.NET 在浏览器客户端中写入 cookie。当我查看 chrome 中的开发人员工具时，我看到：

```
Cookie:ASP.NET_SessionId=cl5kl1khetb3quyoicikdkvm 
```

这意味着为我的 Default.aspx 页面设置了 cookie。我不想将 cookie 写入客户端的原因是我使用的域 'domain.com 没有 www。如果 cookie 被写入，它将被附加到来自 CDN.domain.com 的每个静态项目服务器，包括图像、JS 代码等。

我正在考虑使用 www 来防止将 cookie 附加到 cdn.mydomain，但我想知道什么是更好的解决方案，以及将我的网站设置为不提供 cookie 是否会使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:27:09.557

禁用此特定 cookie 的正确方法是关闭应用程序的会话状态支持。

您还可以通过设置从不会设置 cookie 的 .mysite.com 域的重定向来强制所有请求始终转到 WWW 域。

安全的方法是将 CDN 完全放在单独的域上。通过这种方式，您可以在 *.mysite.com 的所有子站点之间共享 cookie，并且在诸如 cdnmysite.com 之类的地方仍然拥有无 cookie 的 CDN。您可能不需要单独的站点，只需指向同一站点的不同 CNAME 记录（我不知道亚马逊的 CDN 是否支持它或提供任何设置帮助）。

# jquery - jQuery动态设置id

> ID：11354897
> 
> 赞同：0
> 
> 时间：2012-07-06T01:58:43.047
> 
> 标签：jquery

我正在尝试通过 jQuery 动态设置一个 div id。昨天，代码似乎可以正常工作，但今天，它开始抱怨了。

有问题的循环是：

```
 socket.on('nicknames', function (nicknames) {
    $('#nicknames').empty().append($('<span>Online: </span>'));
      for (var i in nicknames) {
    $('#nicknames').append($('<div class="chatNickname" id="' + nicknames[i] + '">').text(nicknames[i]));
      }
    }); 
```

问题是，当我动态设置 ID 时，用户列表只有一个 - 本地用户。如果我将 ID 设置为静态的，它会起作用，并且整个用户列表都是可见的。

我认为这是一个语法问题，但从这个页面（http://www.dynamicdrive.com/forums/showthread.php?t=36730），我认为我做对了。

谢谢你的帮助！

整个代码是：

```
<script src="http://<?php print $_SERVER['SERVER_ADDR'] ?>:8080/socket.io/socket.io.js"></script>
<script>
  (function($){
    var myNick = 'me';
    var newlyJoined = true;
    var socket = io.connect('http://<?php print $_SERVER['SERVER_ADDR'] ?>:8080');

    socket.on('connect', function () {
      $('#chat').addClass('connected');
    });

    socket.on('announcement', function (msg) {
      $('#lines').append($('<p>').append($('<em>').text(msg)));
    });

        socket.on('nicknames', function (nicknames) {
        $('#nicknames').empty().append($('<span>Online: </span>'));
          for (var i in nicknames) {
        $('#nicknames').append($('<div class="chatNickname" id="' + nicknames[i] + '">').text(nicknames[i]));
          }
        });

    socket.on('user message', message);
    socket.on('reconnect', function () {
      $('#lines').remove();
      message('System', 'Reconnected to the server');
    });

    socket.on('reconnecting', function () {
      message('System', 'Attempting to re-connect to the server');
    });

    socket.on('error', function (e) {
      message('System', e ? e : 'A unknown error occurred');
    });

    socket.on('chat log', function(chatlog) {
      if (newlyJoined) {
    var i = 0;
    for (stamp in chatlog) {
      if (chatlog[stamp].type == 'user message') {
    var ts   = tstamp(stamp);
    var nick = chatlog[stamp].nick
    var msg  = chatlog[stamp].msg
    message(ts, nick, msg);
    i++;
      }
    }
    if (i > 0) {
      $('#lines').append($('<hr>')).append($('<small style="text-align:center; display:block; color: #888;">').text('Chat messages posted within the past half hour appear above this line.')).append($('<hr>'));
      $('#lines').get(0).scrollTop = 10000000;       
    }
    newlyJoined = false;
      }
    });

    function message (msg_time, from, msg) {
      $('#lines').append($('<p>').append($('<small>').text(msg_time)).append($('<b>').text(from), linkify(msg)));
    }

    function linkify(inputText) {
      //URLs starting with http://, https://, or ftp://
      var replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
      var replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_blank">$1</a>');

      //URLs starting with www. (without // before it, or it'd re-link the ones done above)
      var replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
      var replacedText = replacedText.replace(replacePattern2, '$1<a href="http://$2" target="_blank">$2</a>');

      //Change email addresses to mailto:: links
      var replacePattern3 = /(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim;
      var replacedText = replacedText.replace(replacePattern3, '<a href="mailto:$1">$1</a>');

      return replacedText
    }

    function tstamp(stamp) {
      var currentTime = new Date(); 
      if (typeof stamp != 'undefined') {
    currentTime.setTime(stamp);
      }
      var days = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thr', 'Fri', 'Sat');
      var day = currentTime.getDay();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      if (minutes < 10) {
    minutes = "0" + minutes;
      }
      if (hours > 11) {
    var ap = 'p';
      }
      else {
    var ap = 'a';
      }
      if (hours > 12) {
    hours = hours - 12;
      }
      return "["+ days[day] + " " + hours + ":" + minutes + ap + "m] ";
    }

    $(document).ready(function() {

      $('#nicknames').on('click', '.chatNickname', function(){ 
   alert("hello");
});

      $('input#message').focus(function() {
    if ($(this).val() == 'Type your chat messages here...') {
      $(this).val('');
    }
      });

      $('input#show-timestamps').click(function() {
    if ($(this).is(':checked')) {
      $('#messages p small').show();
    }
    else {
      $('#messages p small').hide();
    }
      })

      socket.emit('nickname', '<?php print $username ?>', function (nick) {
    if (nick != 'me') {
      myNick = nick;
      socket.emit('get log');          
      return $('#chat').addClass('nickname-set');
    }
      });

      $('#send-message').submit(function () {
    message(tstamp(), myNick, $('#message').val());
    socket.emit('user message', $('#message').val());
    clear();
    $('#lines').get(0).scrollTop = 10000000;
    return false;
      });

      function clear () {
    $('#message').val('').focus();
      };

    });
  })(jQuery);
</script>
<div id="chat">
  <div id="messages">
    <div id="nicknames">
    </div>
    <div id="lines">
    </div>
  </div>
  <form id="send-message" autocomplete="off">
    <input id="message" type="text" value="Type your chat messages here..." autocomplete="off" />
    <button>Send</button>
  </form>
</div>
<small><input id="show-timestamps" type="checkbox" checked="checked" /> Show timestamps</small>a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:11:25.547

许多问题，据我了解，主要是您正在使用`for...in`. 您必须使用常规`for`循环来执行此操作。此外，该`append()`方法采用 html 字符串，因此您将对象包装在 jQuery 中两次。然后，您忘记关闭标记中的 div 并且您不需要使用`text()`只需将其添加到 html 中。最后，为了获得最佳性能，将所有标记缓存在一个变量中并最后附加所有内容以避免多次 DOM 回流，这很昂贵。

```
socket.on('nicknames', function (nicknames) {
  var divs = []
  for (var i = 0, l = nicknames.length; i < l; i++)
    divs.push(
      '<div class="chatNickname" id="'+ nicknames[i] +'">'+
        nicknames[i] +
      '</div>'
    )
  $('#nicknames')
    .empty()
    .append(
      '<span>Online: </span>'+
      divs.join('')
    )
}) 
```

在哪里`nicknames`声明？JavaScript 没有变量引用，除非你传入一个对象，在这种情况下它看起来像是一个数组，所以我猜你可能不需要`nicknames`参数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:15:53.053

尝试以下操作：

```
socket.on('nicknames', function (nicknames) {
    $('#nicknames').empty().append($('<span>Online:</span>'));
    for (var i in nicknames) {
        var attrs = {
            'class': 'chatNickname',
            'id': nicknames[i],
            'text': nicknames[i]
        };
        $('#nicknames').append($('<div>',attrs));
    }
}); 
```

**[演示](http://jsfiddle.net/ricardolohmann/nBSJN/)**

# javascript - JSON 的 AJAX 获取取消

> ID：11354898
> 
> 赞同：0
> 
> 时间：2012-07-06T01:58:47.630
> 
> 标签：javascript, json

我正在尝试在 reddit 上获取某个页面的 JSON 文件，但它无缘无故地取消了..

这是我试图用 JSON 解析的 URL。[http://reddit.com/r/VillagePorn/.json](http://reddit.com/r/VillagePorn/.json)

**更新代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title>Sin título 1</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>    
    <script type="text/javascript">
$(document).ready(function () {    

                $.ajax({
    type: "GET",
    dataType: "json",
    url: "http://reddit.com/r/VillagePorn/.json?jsonp=?",
    success: function (data) {    
    $.each(data.data.children, function(i,item){
        $("<img/>").attr("src", item.data.url).appendTo("#res");
    });

    }
});
});​
</script>
</head>
<body>

<div id="res"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:11:43.940

这是一个工作示例：http: [//jsfiddle.net/fuRkG/](http://jsfiddle.net/fuRkG/)

我认为问题在于 url ，您需要添加**jsonp=?** 在末尾

基于上一个问题的回答：[如何使用 JSON 从 Reddit API 中提取 url 数据](https://stackoverflow.com/questions/8191105/how-to-extract-url-data-from-reddit-api-using-json)

# php - 有没有可能按顺序从 PHP Web 应用程序获取 JSON 的方法

> ID：11354900
> 
> 赞同：1
> 
> 时间：2012-07-06T01:59:07.210
> 
> 标签：php, ios, json

我正在构建一个查询数据库的 IOS 应用程序。我总是把结果弄得乱七八糟，在应用程序的某些功能中，比如评论，让它们井井有条是至关重要的。很明显 JSON 正在返回一个字典，但我需要排序的结果。这是服务器端代码：

```
function sendResponse($status = 200, $body = '', $content_type = 'text/html') {
  $status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status);
  header($status_header);
  header('Content-type: ' . $content_type);
  echo $body;
}

$result = array();
$i = 0;
$sqlGetComments = mysqli_query($link, "SELECT * FROM photo_comments WHERE photo_id='$photoID' ORDER BY post_date DESC");
while ($row = mysqli_fetch_array($sqlGetComments)) {
  $result[$i] = array(
      'photoID' => $row['photo_id'],
      'userID' => $row['userID'],
      'username' => $row['username'],
      'comment' => $row['comment'],
      'postedDate' => $row['post_date'],
    );
    $i++;
} // end while

sendResponse(200, json_encode($result)); 
```

我有解析它的 IOS 代码，但与我需要它的顺序不符。所以必须有一些我可以在服务器端做的事情。

更新，这是客户端代码：

```
[request setCompletionBlock:^{
    NSString *responseString = [request responseString];
   [self updateComments:responseString];
}];

- (void)updateComments:(NSString *)update {
     NSDictionary *root = [update JSONValue];
     NSEnumerator *enumerator = [root keyEnumerator];
     id key;
     while (key = [enumerator nextObject]) {
        NSDictionary *value = [root objectForKey:key];
       _photoID = [value objectForKey:@"photoID"];
       NSString *photoID = [value objectForKey:@"photoID"];
       NSString *userID = [value objectForKey:@"userID"];
       NSString *username = [value objectForKey:@"username"];
       NSString *comment = [value objectForKey:@"comment"];
       NSString *postedDate = [value objectForKey:@"postedDate"];

       NSString *cellString = [NSString stringWithFormat:@"%@ \n %@ \n %@", username, comment, postedDate];

       [_queryResultsMessage addObject:cellString];
     }
     [_tableView reloadData];
} 
```

这是打印输出，请记住注释字段中的“测试”字符串是 JSON 字符串应该如何打印出来：

```
{"1":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 6","postedDate":"7 hrs ago"},"2":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 5","postedDate":"8 hrs ago"},"3":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 4","postedDate":"8 hrs ago"},"4":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 3","postedDate":"8 hrs ago"},"5":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 2","postedDate":"8 hrs ago"},"6":{"photoID":"1","userID":"17","username":"kismet","comment":"Test 1","postedDate":"8 hrs ago"}} 
```

它可以打印出来，但我猜它在分配给 NSDictionary 时会变得混乱。如果没有人有任何答案，我会尝试通过将它分配给 NSArray 来摆弄它，看看我是否能以某种方式解析它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T21:36:11.317

需要一点客户端 IOS 黑客

对于那些仍然对解决方案感兴趣的人：

```
NSDictionary *userData = [update JSONValue];
NSArray *keys = [[userData allKeys] sortedArrayUsingSelector:@selector(compare:)];
NSMutableArray *array = [NSMutableArray arrayWithCapacity: [keys count]];

int i = 0;
for (NSString *key in keys) {
    [array addObject: [userData objectForKey: key]];
    i++;
}

for (NSDictionary *myDict in array) {
    NSString *comment = [myDict objectForKey:@"comment"];
    NSLog(@"USERCOMMENT %@", comment);
} 
```

按顺序返回 JSON：

```
USERCOMMENT Test 6
USERCOMMENT Test 5
USERCOMMENT Test 4
USERCOMMENT Test 3
USERCOMMENT Test 2
USERCOMMENT Test 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:06:37.750

值得注意的是 - 您正在请求从 MySQL 订购的项目 - 因此，PHP 正在按顺序生成 JSON。

因此，我只是建议在 PHP 中编辑循环...

```
while ($row = mysqli_fetch_array($sqlGetComments)) {
  $result[$i] = array(
      'photoID' => $row['photo_id'],
      'userID' => $row['userID'],
      'username' => $row['username'],
      'comment' => $row['comment'],
      'postedDate' => $row['postedDate'],
      'orderBy' => $i
    );
    $i++;
} // end while 
```

...并通过 Obj-C 中的“orderBy”组织它们。

请注意，我所做的只是向 JSON 项目添加一个额外的变量 - “orderBy”；由于 MySQL 结果将按正确的顺序排列，因此以正确的顺序解析，这个“orderBy”变量可以像一个键一样起作用。

自从我使用 iOS SDK 以来已经有一段时间了——但我很确定它们将是一种对 NSMutableArray 进行排序的方法；如果不是 - 一个简单的循环可以工作；使用 x 的键请求每个对象，而 x < NSMutableArray 的长度。但是，我会查找“正确”的做法，因为那会让我烦恼！

**我建议调查结果乱序背后的真正原因！那不应该发生！**我在 iOS 中没有做过类似的事情，但我认为这不是请求 JSON 时的正确行为。

故障排除步骤可能是在浏览器或桌面环境中检查返回的 JSON，并确保 PHP 正确返回它，然后查看它是如何返回到应用程序的 - 确保所有数据都存在以及是否存在顺序失真的模式.

*编辑：我注意到你说它返回了一个字典数组。我的错。* 我确实发现[了另一个对字典数组进行排序的问题](https://stackoverflow.com/questions/864412/is-there-an-easy-way-of-sorting-a-plist-array-of-dictionaries-by-key-value)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:07:46.427

在您的 MySql 查询中，您正在对 进行排序`post_date`，但`postedDate`在将其添加到结果数组时请参考。两者都存在吗？

如果`post_date`实际上不存在，那么您的数据库查询未按预期排序...

# core-data - Core Data NSMutable 设置麻烦

> ID：11354901
> 
> 赞同：0
> 
> 时间：2012-07-06T01:59:27.103
> 
> 标签：core-data, nsfetchedresultscontroller, nsmutableset

好的，我正在尝试获取 NSMutable 集。是的，我之前有一篇关于此的帖子，但这略有不同。我有一个玩家实体和一个团队实体。它被设置为一对多关系......在不同的视图控制器上，我将玩家添加到团队中。现在我正试图让球队的球员出现在表格视图中......我正在获取如下信息。

```
- (NSFetchedResultsController *)fetchedResultsController {
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSString *entityName = @"Team"; 
NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

// 2 - Request that Entity

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
_managedObjectContext = delegate.managedObjectContext;

// 4 - Sort it 
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"players"
                                                                                 ascending:NO
                                                                                  selector:@selector(localizedCaseInsensitiveCompare:)]];

// 5 - Fetch it
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.managedObjectContext
                                                                      sectionNameKeyPath:nil 
                                                                               cacheName:nil];
_fetchedResultsController.delegate = self;

return _fetchedResultsController; 
```

}

然后在索引路径处的行的单元格上，我将 Player 对象设置为获取的结果，如下所示

```
 Player *p = [_fetchedResultsController objectAtIndexPath:indexPath]; 
```

然后，我像这样设置单元格的标题。

```
cell.textLabel = p.firstName; 
```

我收到错误原因：'to-many key not allowed her

我想知道我做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:28:43.063

弄清楚了！我正在对一对多关系进行排序，这在核心数据中是不可以的。我切换到对播放器对象进行排序，并添加了一个谓词来找到我需要的合适的播放器。

# android - 查看 Android 应用的共享偏好设置？

> ID：11354904
> 
> 赞同：18
> 
> 时间：2012-07-06T02:00:00.630
> 
> 标签：android, debugging, sdk, sharedpreferences, preferences

当我在 Eclipse 中处理我的应用程序时，有没有办法在模拟器中调试应用程序时查看我对应用程序的共享首选项所做的更改？提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T02:38:53.193

在模拟器中运行项目，然后从 Eclipse 中选择菜单 Windows-> 打开透视图 ->DDMS。
从选项卡设备中，选择模拟器名称，然后转到文件资源管理器，展开数据->数据->您的包名，您应该会看到共享参考 xml 文件（*仅适用于模拟器或有根设备*）。最后，将此文件导出到 windows。
请参阅[http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)
**更新**：
另一种方式，您可以收听共享偏好更改：

```
SharedPreferences.OnSharedPreferenceChangeListener prefListener = 
new SharedPreferences.OnSharedPreferenceChangeListener() {
  public void onSharedPreferenceChanged(SharedPreferences prefs,String key) {
if (key.equals("YourKey")) 
     {
          //Get this
     } 
 }

SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);          
preferences.registerOnSharedPreferenceChangeListener(prefListener); 
```

请参阅[SharedPreferences.onSharedPreferenceChangeListener 没有被一致地调用](https://stackoverflow.com/questions/2542938/sharedpreferences-onsharedpreferencechangelistener-not-being-called-consistently)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T04:44:39.393

在模拟器上运行 --> 进入文件资源管理器 --> 可以看到 data/data/yourapplication 的 package/Sharedpreferences.xml

# c++ - windows高性能计数器的分辨率是多少？

> ID：11354905
> 
> 赞同：3
> 
> 时间：2012-07-06T02:00:01.687
> 
> 标签：c++, windows

这似乎是一个非常基本的问题，但是，在划分输出时

`QueryPerformanceCounter`，`QueryPerformanceFrequency`结果值是多少，即秒、毫秒、微秒？

我问是因为我正在将一些代码从 Windows 移植到 Linux，而且我没有方便的 Windows 机器来试验。一些谷歌搜索没有为我提供具体的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-20T20:48:25.440

我们更新了 QueryPerformanceCounter 的文档，上面 RDTSC 和 QueryPerformanceCounter 精度的比较不太对。如需更多信息，请参阅

[http://msdn.microsoft.com/en-us/library/windows/desktop/dn553408(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dn553408(v=vs.85).aspx)

埃德布里格斯微软公司

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T02:02:46.317

> 一些谷歌搜索没有为我提供具体的答案。

“QueryPerformanceCounter”的第一个 Google 搜索结果：MSDN 文档[`QueryPerformanceCounter()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904.aspx)

这就是它要说的：

> **参数**
> 
> *lpPerformanceCount* [出]
> 
> 类型：**LARGE_INTEGER***
> 
> 指向接收当前性能计数器值的变量的指针，**以 counts 为单位**。

“QueryPerformanceFrequency”的第一个 Google 搜索结果：MSDN 文档[`QueryPerformanceFrequency()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905.aspx)

这就是它要说的：

> **参数**
> 
> *lpFrequency* [输出]
> 
> 类型：**LARGE_INTEGER***
> 
> 指向接收当前性能计数器频率的变量的指针，**以每秒计数为单位**。如果安装的硬件不支持高分辨率性能计数器，则此参数可以为零。

从获得的值`QueryPerformanceCounter()`以计数为单位。从中获得的值`QueryPerformanceFrequency()`以每秒计数为单位。使用一点维度分析：

```
(counts) / (counts/second) = seconds 
```

因此，两个值相除的结果以秒为单位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T02:17:44.983

至少据我所知，QPF 通常取决于两个来源之一。至少有一次，大多数单处理器系统使用处理器的时间戳计数器寄存器，通过 RDTSC 指令访问。

多处理器系统（以及没有 TSC 寄存器的旧系统）通常使用主板的板载 1.024 MHz 时钟。在多处理器/多核系统上，处理器/内核的时间戳计数器可能不同步，因此时间戳计数器可能会给出相当无意义的结果（包括负时间段）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T02:19:38.643

尽管 In silico 回答了这个问题，但如果您正在寻找更高的计时器分辨率，您可以使用`rdtsc`汇编指令。`rdtsc`比使用 CPU 时钟（与主板时钟相反）要`QueryPerformanceCounter`准确约 1000 倍。`QueryPerformanceFrequency`该方法看起来像这样：

```
void QueryRDTSC(__int64* tick) {
 __asm {
  xor eax, eax
  cpuid
  rdtsc
  mov edi, dword ptr tick
  mov dword ptr [edi], eax
  mov dword ptr [edi+4], edx
 }
} 
```

**有趣的事实**：由于石英晶体较大，较慢的主板时钟也更容易受到[时钟漂移的影响。](http://en.wikipedia.org/wiki/Clock_drift)当然，您是否想深入研究高分辨率时序取决于时序在您的应用中的重要性。快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:27:16.547

Windows 7 引入了一种为`QueryPerformanceCounter`.

该函数被假定为具有最精细的粒度，但必须查看其准确性：返回的值`QueryPerformanceFrequency`既不是观察到的精确值，也不是常数。特别是较旧的系统会遭受严重的热漂移。

我在[这里](https://stackoverflow.com/questions/5801813/c-usleep-is-obsolete-workarounds-for-windows-mingw/11470617#11470617)写了一些更多的细节。

# c# - 在 C# 中将新结构分配给数组时会发生什么？

> ID：11354907
> 
> 赞同：6
> 
> 时间：2012-07-06T02:00:40.843
> 
> 标签：c#, memory-management, data-structures, struct

假设我有一个 C# 结构：

```
struct Foo{
    int mA;
    public int A {get {return mA;}}
    int mB;
    public int B {get {return mB;}}

    public Foo(int a, int b)
    {
        mA = a;
        mB = b;
    }
} 
```

然后我创建 Foo 的数组：

```
Foo[] foos = new Foo[10]; 
```

当我这样做时会发生什么？

```
foos[1] = new Foo(20, 10); 
```

如果 Foo 是一个类，则 Foo[] 将持有一个指向堆上 Foo 对象的指针，并且该指针将更改为新的 Foo 对象（旧对象留待回收）。

但是由于结构是值类型，新的 Foo(20, 10) 会物理覆盖之前由 foos[1] 持有的相同内存位置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T02:45:35.517

实际上，与相关数组槽关联的内存由值填充。给定您的代码，一个小示例显示了发生的情况。请看内联评论。这是一个发布版本。

```
static void Main(string[] args)
{
    Foo[] foos = new Foo[10];
    foos[1] = new Foo(127, 255);
    Console.ReadLine();
} 
```

上面的代码是JIT编译如下

```
// Method setup
00280050 55              push    ebp
00280051 8bec            mov     ebp,esp
00280053 56              push    esi

// Create instance of Foo[]
00280054 b98a141d00      mov     ecx,1D148Ah
00280059 ba0a000000      mov     edx,0Ah
0028005e e8b121f4ff      call    CORINFO_HELP_NEWARR_1_VC (001c2214)
00280063 8bd0            mov     edx,eax

// Array range check 
00280065 837a0401        cmp     dword ptr [edx+4],1
00280069 7624            jbe     

// Assign foos[1] = new Foo(127, 255)  
0028006b 8d4210          lea     eax,[edx+10h]  <-- load location of foos[1] in eax
0028006e ba7f000000      mov     edx,7Fh        <-- load 127 in edx
00280073 beff000000      mov     esi,0FFh       <-- load 255 in esi
00280078 8910            mov     dword ptr [eax],edx    <-- move the value 127 to foos[1]
0028007a 897004          mov     dword ptr [eax+4],esi  <-- move the value 255 to foos[1] + offset

// This is just for the Console.ReadLine() part + rest of Main
0028007d e8d2436305      call    mscorlib_ni!System.Console.get_In() (058b4454)
00280082 8bc8            mov     ecx,eax
00280084 8b01            mov     eax,dword ptr [ecx]
00280086 8b402c          mov     eax,dword ptr [eax+2Ch]
00280089 ff501c          call    dword ptr [eax+1Ch]

// Epilog
0028008c 5e              pop     esi
0028008d 5d              pop     ebp
0028008e c3              ret

//Exception handling
0028008f e8f05e7f70      call    clr!JIT_RngChkFail (70a75f84)
00280094 cc              int     3 
```

简而言之，代码将常量加载到寄存器中，然后将这些寄存器的值复制到与数组实例的相关部分关联的内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:08:30.493

`foos[1]`将包含`new Foo(20, 10);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:46:06.197

创建一个结构数组会在每个槽中创建一个默认值实例。在 C# 中，调用 C#`new`中的结构会创建一个新的临时实例（很可能在堆栈上）并将一个结构分配给另一个总是通过用前者中相应字段的内容覆盖后者的所有字段来改变后者的实例. 因此，该语句 使用默认值`foos[1] = new Foo(20,10);`创建一个新的临时实例`Foo`，将该实例传递给参数化构造函数，将该临时实例的所有字段复制到数组槽 1 中保存的实例，然后丢弃该临时实例。

顺便说一句，vb.net 中相应语句的行为略有不同。Saying`foos(1) = New Foo(20,10)`会将 的所有字段重置`foos(1)`为其默认值，然后传递`foos(1)`给参数化构造函数。`foos(1)`如果任何代码在构造函数运行时尝试访问，则这种差异可能很重要。

# regex - 正则表达式单词宏，在一个范围内找到两个单词，然后将这些单词斜体化？

> ID：11354909
> 
> 赞同：6
> 
> 时间：2012-07-06T02:00:49.423
> 
> 标签：regex, vba, search, ms-word

所以，我才刚刚开始了解正则表达式，我发现学习曲线相当陡峭。但是，stackoverflow 在我的实验过程中非常有帮助。我想写一个特定的单词宏，但我还没有找到方法。我希望能够在文档中找到彼此相距 10 个左右的单词，然后将这些单词斜体化，如果这些单词相隔超过 10 个单词或顺序不同，我希望宏不要斜体那些话。

我一直在使用以下正则表达式：

```
\bPanama\W+(?:\w+\W+){0,10}?Canal\b 
```

但是，它只能让我将整个字符串作为一个整体进行操作，包括中间的随机单词。此外 .Replace 函数只允许我用不同的字符串替换该字符串，而不会更改格式样式。

有没有经验更丰富的人知道如何完成这项工作？甚至有可能做到吗？

* * *

编辑：这是我到目前为止所拥有的。我有两个问题。首先，我不知道如何从匹配的正则表达式中只选择“巴拿马”和“运河”这两个词，然后只替换这些词（而不是中间词）。其次，我只是不知道如何替换与不同格式匹配的正则表达式，只有不同的文本字符串 - 可能只是因为不熟悉单词宏。

```
Sub RegText()
Dim re As regExp
Dim para As Paragraph
Dim rng As Range
Set re = New regExp
re.Pattern = "\bPanama\W+(?:\w+\W+){0,10}?Canal\b"
re.IgnoreCase = True
re.Global = True
For Each para In ActiveDocument.Paragraphs
  Set rng = para.Range
  rng.MoveEnd unit:=wdCharacter, Count:=-1
  Text$ = rng.Text + "Modified"
  rng.Text = re.Replace(rng.Text, Text$)
Next para
End Sub 
```

* * *

好的，感谢下面蒂姆威廉姆斯的帮助，我得到了以下解决方案，在某些方面它有点笨拙，它绝不是纯正则表达式，但它*确实*完成了工作。如果有人对如何解决这个问题有更好的解决方案或想法，我会很高兴听到它。同样，我通过搜索和替换功能强制更改有点令人尴尬，但至少它有效......

```
Sub RegText()
Dim re As regExp
Dim para As Paragraph
Dim rng As Range
Dim txt As String
Dim allmatches As MatchCollection, m As match
Set re = New regExp
re.pattern = "\bPanama\W+(?:\w+\W+){0,13}?Canal\b"
re.IgnoreCase = True
re.Global = True
For Each para In ActiveDocument.Paragraphs

  txt = para.Range.Text

  'any match?
  If re.Test(txt) Then
    'get all matches
    Set allmatches = re.Execute(txt)
    'look at each match and hilight corresponding range
    For Each m In allmatches
        Debug.Print m.Value, m.FirstIndex, m.Length
        Set rng = para.Range
        rng.Collapse wdCollapseStart
        rng.MoveStart wdCharacter, m.FirstIndex
        rng.MoveEnd wdCharacter, m.Length
        rng.Font.ColorIndex = wdOrange
    Next m
  End If

Next para

Selection.Find.ClearFormatting
Selection.Find.Font.ColorIndex = wdOrange
Selection.Find.Replacement.ClearFormatting
Selection.Find.Replacement.Font.Italic = True
With Selection.Find
    .Text = "Panama"
    .Replacement.Text = "Panama"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
Selection.Find.ClearFormatting
Selection.Find.Font.ColorIndex = wdOrange
Selection.Find.Replacement.ClearFormatting
Selection.Find.Replacement.Font.Italic = True
With Selection.Find
    .Text = "Canal"
    .Replacement.Text = "Canal"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll

Selection.Find.ClearFormatting
Selection.Find.Font.ColorIndex = wdOrange
Selection.Find.Replacement.ClearFormatting
Selection.Find.Replacement.Font.ColorIndex = wdBlack
With Selection.Find
    .Text = ""
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T23:11:14.777

我离成为一个体面的 Word 程序员还有很长的路要走，但这可能会让你开始。

编辑：更新以包含参数化版本。

```
Sub Tester()

    HighlightIfClose ActiveDocument, "panama", "canal", wdBrightGreen
    HighlightIfClose ActiveDocument, "red", "socks", wdRed

End Sub

Sub HighlightIfClose(doc As Document, word1 As String, _
                     word2 As String, clrIndex As WdColorIndex)
    Dim re As RegExp
    Dim para As Paragraph
    Dim rng As Range
    Dim txt As String
    Dim allmatches As MatchCollection, m As match

    Set re = New RegExp
    re.Pattern = "\b" & word1 & "\W+(?:\w+\W+){0,10}?" _
                 & word2 & "\b"
    re.IgnoreCase = True
    re.Global = True

    For Each para In ActiveDocument.Paragraphs

      txt = para.Range.Text

      'any match?
      If re.Test(txt) Then
        'get all matches
        Set allmatches = re.Execute(txt)
        'look at each match and hilight corresponding range
        For Each m In allmatches
            Debug.Print m.Value, m.FirstIndex, m.Length
            Set rng = para.Range
            rng.Collapse wdCollapseStart
            rng.MoveStart wdCharacter, m.FirstIndex
            rng.MoveEnd wdCharacter, Len(word1)
            rng.HighlightColorIndex = clrIndex
            Set rng = para.Range
            rng.Collapse wdCollapseStart
            rng.MoveStart wdCharacter, m.FirstIndex + (m.Length - Len(word2))
            rng.MoveEnd wdCharacter, Len(word2)
            rng.HighlightColorIndex = clrIndex
        Next m
      End If

    Next para

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:34:24.630

如果您一次只做两个单词，那么这对我有用，遵循您的练习路线。

```
foo([a-zA-Z0-9]+? ){0,10}bar 
```

**解释：** 将抓取单词 1 ( `foo`)，然后匹配任何由字母数字字符 ( `[a-zA-Z0-9]+?`) 后跟空格 ( `) 组成的单词，10 次 ( `{0,10}`)，然后是单词 2 ( `bar`)。`

 `这**不**包括句号（不知道您是否想要它们），但如果您只想在正则表达式中添加`.`after `0-9`。

所以你的（*伪代码*）语法将*类似于*：

```
$matches = preg_match_all(); // Your function to get regex matches in an array

foreach (those matches) {
    replace(KEY_WORD, <i>KEY_WORD</i>);
} 
```

希望它有所帮助。下面的测试，突出了它匹配的内容。

* * *

**工作过：**

`foo this that bar`废话_

这`foo economic order war bar`

**没用**

富经济秩序。战吧

全球 foo 秩序已经存在了几个世纪，在这段时间里，人们发展出不同而复杂的贸易关系，以应对农业和酒吧等情况`

# python - 为什么直接运行脚本不起作用但“python script_name.py”起作用

> ID：11354912
> 
> 赞同：0
> 
> 时间：2012-07-06T02:01:33.103
> 
> 标签：python, shell, shebang

我写了一个脚本来从网站上抓取数据。当我使用“python script.py”运行它时它可以工作，但是当 chmod +x 并直接从 shell 运行时，它不能正常工作（不覆盖输出文件）

这是我的代码（尝试使用 HTMLParser）：

```
#!/usr/bin/env python

from HTMLParser import HTMLParser
import urllib
import codecs
import string

FILE_NAME = 'kq.txt'
LINK = 'http://kqxs.vn/'

class MyHTMLParser(HTMLParser):
    """Parser get content in first table in site"""
    def __init__(self):
        self.reset()
        self.fed = []
        self.found = False
        self.done = False
    def handle_starttag(self, tag, attrs):
        if tag == "table":
            self.found = True
        if tag == "/table":
            self.found = False

    def handle_endtag(self, tag):
        if tag == "table":
            self.done = True

    def handle_data(self, data):
        if self.found and not self.done:
            self.fed.append(data)

    def get_data(self):
        return self.fed

#read data from URL
response = urllib.urlopen(LINK)
#print response.headers['content-type']
html = response.read()

html = unicode(html, 'utf-8')

parser = MyHTMLParser()
parser.feed(html)

result = parser.get_data()
#write to file
fw = codecs.open(FILE_NAME, 'w', 'utf-8')
#line.strip() remove string contains only spaces
#[fw.write(line + '\n') for line in result if line.strip()]
fw.writelines(line + '\n' for line in result if line.strip())

fw.close()

print "Done! data printed to file %s" %(FILE_NAME) 
```

这是我的外壳的结果

```
famihug@hvn:/home/famihug%~/bin/leecher.py; cat ~/bin/kq.txt                [0]
Done! data printed to file kq.txt
Giải đặc biệt
**92296** 

**(HERE I RUN IT FROM INSIDE VIM with !python %)**
famihug@hvn:/home/famihug/bin%vim leecher.py                                [0]

Done! data printed to file kq.txt

Press ENTER or type command to continue
zsh: suspended  vim leecher.py
famihug@hvn:/home/famihug/bin%cat kq.txt                                   [20]
Giải đặc biệt
****88705**** 

famihug@hvn:/home/famihug/bin%/usr/bin/env python                           [0]
Python 2.6.6 (r266:84292, Sep 15 2010, 15:52:39) 

famihug@hvn:/home/famihug/bin%python                                        [0]
Python 2.6.6 (r266:84292, Sep 15 2010, 15:52:39) 
```

脚本仍然打印出最后一行*完成！数据打印到文件 kq.txt*但实际上并没有。如果我删除 kq.txt 文件，它运行良好。如果我在 kq.txt 中稍作更改（更改一个数字），它也能正常工作。

谁能解释为什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:05:57.413

我解决了我的问题！

因为我使用带有文件名的相对路径，所以当我运行时：

```
famihug@hvn:/home/famihug%~/bin/leecher.py; cat ~/bin/kq.txt                [0] 
```

它在**/home/famihug/**中创建了一个新的**kq.txt**，而不是在**/home/famihug/bin/** 这就是为什么当**cat ~/bin/kq.txt**

 ******解决方案是：使用绝对路径而不是相对路径：

```
def fix_path(filename):
    filepath = os.path.realpath(__file__)
    path = os.path.dirname(filepath)
    fixed = os.path.join(path, filename)
    return fixed

fw = codecs.open(fix_path(FILE_NAME), 'w', 'utf-8') 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-07-06T03:06:30.560

我不知道，但尝试 chmod 755 script_name 这可能是由于没有权限对过度文件。但实际上，我不知道，我无法测试它，因为我不在我的电脑上，我正在使用朋友的电脑。当我拿回我的电脑时，我会再次提问。******

# python-2.7 - werkzeug 获得空流

> ID：11354916
> 
> 赞同：1
> 
> 时间：2012-07-06T02:02:04.570
> 
> 标签：python-2.7, werkzeug

> *   输入内容类型是多部分/表单数据。在这种情况下，流将是空的，表单将包含常规的 POST / PUT 数据，文件将包含上传的文件作为 FileStorage 对象。*   输入内容类型为 application/x-www-form-urlencoded。然后流将为空，表单将包含常规的 POST / PUT 数据，文件将为空。*   输入内容类型都不是它们，流指向带有输入数据的 LimitedStream 以供进一步处理。

根据 werkzeug 的文档，我将 header 中的 content-type 设置为“text/plain”，但流仍然是空的。我的代码如下：

```
def hello_world(environ, start_response):
    CHUNKSIZE = 65563
    request = Request(environ)
    print environ["wsgi.input"].readline()
    print request.base_url
    print request.data[:100]
    print len(request.data)
    print request.headers
    print request.form
    print request.stream.readline() 
```

# asp.net - 用于数据读取应用程序和报告生成的 ASP.Net 框架

> ID：11354918
> 
> 赞同：-2
> 
> 时间：2012-07-06T02:02:21.577
> 
> 标签：asp.net, asp.net-mvc, entity-framework, architecture, webformsmvp

我一直在寻找开发 ASP.Net Web 应用程序的最佳框架。
它将使用数据库 MS SQL Server 2000 (它必须处理其他应用程序)
Web 服务器配备了 .Net 4.0 框架

该应用程序主要是读取数据并显示给用户。很少写入数据库。它还应该有一个生成报告的选项。

我应该选择哪种架构解决方案来开发这样的应用程序？

什么是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:14:14.987

Asp.net Webform 会更容易，特别是如果您需要在 gridview 中呈现报告，它还使您能够拖放大量控件以进行快速开发。您可以编写最少的代码来实现读取数据并显示给用户，例如在gridview的aspx页面中定义数据源。

另一方面，MVC 要求您自己编写 Html 的每一部分，虽然有一些自动生成的 razer 视图，您获得了更多的控制并摆脱了视图状态，但开发和学习需要更多的时间。

无论选择哪种架构，都应该使用 EF，它是用于编写多层应用程序的 ORM 工具

# xslt - 将小数部分提取到 XSL 模板中的变量中

> ID：11354920
> 
> 赞同：4
> 
> 时间：2012-07-06T02:02:26.253
> 
> 标签：xslt, format, decimal

在执行 ceil 函数之前，我需要将小数点后的 2 个位置（货币金额，因此最多只需要 2 个位置）存储在 XSL 变量中。

```
<xsl:element name="BaseFare"><xsl:value-of select="ceiling(BaseAmount/Amount * (1 - ($promoDisc div 100)))"/></xsl:element> 
```

例如。如果金额的结果是 499 并且 promoDisc = 8%，那么折扣金额将为 459.08 - 我需要将“08”（带零）存储在一个变量中以备后用，同时我返回上限金额 (460)在输出 XML 中。以为我可以只做一个字符串函数并将小数点后的 2 个字符读入变量而不是做任何数学运算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:07:13.020

有多种方法可以进行此提取：

**I. 使用数字的字符串表示**：

```
concat('.',substring(substring-after($x, '.'), 1, 2)) 
```

**二、使用标准数学函数**：

```
$x - floor($x) 
```

这将计算为任何正数的小数部分`$x`。

使用以下函数之一：**[`format-number()`](http://www.w3.org/TR/xslt#function-format-number)**, **[`round()`](http://www.w3.org/TR/xpath/#function-round)**, **[`round-half-to-even()`](http://www.w3.org/TR/xpath-functions/#func-round-half-to-even)**（仅 XPath 2.0 / XSLT 2.0 可用的最后一个函数）将其四舍五入到小数点后两位。

在 XSLT 1.0 中，从正数中准确获取小数点后两位小数的数字的一种方法（截断不四舍五入）是：

```
format-number(
              floor(100* $x) div 100
             -
              floor(floor(100* $x) div 100),
              '.00'
              ) 
```

**以下是所描述方法的完整示例：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">

   <xsl:value-of select=
   "concat('.',substring(substring-after(0.12543, '.'), 1, 2))"/>
=========
   <xsl:value-of select=
      "format-number(0.12543, '.00')"/>
=========
   <xsl:value-of select=
    "format-number(
                   floor(100* 999.12543) div 100
                  -
                   floor(floor(100* 999.12543) div 100),
                   '.00'
                   )
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，结果是：**

```
 .12
=========
   .13
=========
   .12 
```

# jquery - jQuery 创建对象

> ID：11354921
> 
> 赞同：21
> 
> 时间：2012-07-06T02:02:32.557
> 
> 标签：jquery, oop

我将如何在 jQuery 中创建一个对象，然后继续制作该对象的几个不同实例，即

创建一个名为 box 的对象，其中包含一个名为 color 的变量。

然后用不同的存储颜色制作这个对象的几个实例。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-06T02:23:19.627

`Javascript`在using中创建对象的另一种方法，从**dom**`JQuery`获取数据并将其传递给对象**Box ，例如，将它们存储在****Boxes**数组中，可以是：

 ******```
var box = {}; // my object
var boxes =  []; // my array

$('div.test').each(function (index, value) {
    color = $('p', this).attr('color');
    box = {
        _color: color // being _color a property of `box`
    }
    boxes.push(box);
}); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-06T02:10:44.660

也许你想要这个（javascript中的oop）

```
function box(color)
{
    this.color=color;
}

var box1=new box('red');    
var box2=new box('white'); 
```

[**演示。**](http://jsfiddle.net/AeFMF/)

[**了解更多信息。**](https://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-06T05:47:40.983

我实际上找到了使用 jQuery 方法的更好方法

```
var box = {

config:{
 color: 'red'
},

init:function(config){
 $.extend(this.config,config);
}

};

var myBox = box.init({
 color: blue
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T02:11:07.747

你总是可以让它成为一个功能

```
function writeObject(color){
    $('body').append('<div style="color:'+color+';">Hello!</div>')
} 
```

`writeObject('blue')`➜![在此处输入图像描述](../Images/2ac969ab476cb440da4b62be281d7c3f.png)******

# cairo - 开罗径向渐变

> ID：11354928
> 
> 赞同：8
> 
> 时间：2012-07-06T02:03:27.520
> 
> 标签：cairo, radial-gradients

我在开罗使用径向渐变，但没有得到预期的结果。我得到的径向渐变比我预期的要模糊得多，而且我似乎无法摆弄色标以获得所需的结果。这是代码：

```
cairo_pattern_t *pat;

pat = cairo_pattern_create_radial(100.0, 100.0, 0.0, 100.0, 100.0, 20.0);
cairo_pattern_add_color_stop_rgba(pat, 0, 0, 0, 0, 1);
cairo_pattern_add_color_stop_rgba(pat, 1, 0, 0, 0, 0); 
```

这是我正在谈论的图像。

![径向梯度](../Images/5992c0e0b854965c47bf6fdce8aa0399.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T07:23:10.450

#cairo IRC 频道建议（感谢公司！）使用 cairo_mask() 而不是 cairo_paint() 来绘制渐变。这导致平方而不是线性进展。

我在lua中做了以下事情。对不起语言，但原型化更容易。这将 1:1 映射到 C API，翻译起来应该不难：

```
cairo = require("lgi").cairo

s = cairo.ImageSurface(cairo.Format.ARGB32, 200, 100)
c = cairo.Context(s)
c:set_source_rgb(1, 1, 1)
c:paint()

p = cairo.Pattern.create_radial(50, 50, 0, 50, 50, 20)
p:add_color_stop_rgba(0, 0, 0, 0, 1)
p:add_color_stop_rgba(1, 0, 0, 0, 0)

c:save()
c:rectangle(0, 0, 100, 100)
c:clip()
c.source = p
c:paint()
c:restore()

p = cairo.Pattern.create_radial(50, 50, 2, 50, 50, 25)
p:add_color_stop_rgba(0, 0, 0, 0, 1)
p:add_color_stop_rgba(1, 0, 0, 0, 0)

c:translate(100, 0)
c:save()
c:rectangle(0, 0, 100, 100)
c:clip()
c.source = p
c:mask(p)
c:restore()

s:write_to_png("test.png") 
```

对我来说，第二个圆圈（那个是 cairo_mask() 的黑色源）看起来更像你想要的：

![lua 代码生成的图像](../Images/dd8bebe32eaad7d3bc67ad36330fb741.png)

# html - 悬停滚动 Div 视差

> ID：11354930
> 
> 赞同：0
> 
> 时间：2012-07-06T02:03:43.710
> 
> 标签：html, scroll, hover, slide, parallax

我正在尝试重新创建该站点的主页... [http://spooz-creation.com/](http://spooz-creation.com/)

我想在用户窗口（蓝色）中左右滑动一个包含其他 div（黄色）的大 div（绿色）。加载后，内容 div（绿色）将像示例站点一样位于用户窗口的中心。还有一个带有导航元素的静态标题（粉红色）。

我真的希望滚动像示例站点一样悬停激活。此外，我希望内容 giv（绿色）高度根据用户窗口高度灵活。

在所有这些之上添加视差效果将是史诗般的，但如果复杂，则并非完全需要。

！！！！！！（线框示例）！！！！！！ [http://lpaoriginal.files.wordpress.com/2012/07/desktop.jpg](http://lpaoriginal.files.wordpress.com/2012/07/desktop.jpg)

请帮忙！几天来我一直在努力解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:29:44.933

这个 JQuery 插件可能完全符合您的要求。

[视差](http://stephband.info/jparallax/)

一直将它用于我目前正在从事的项目。关于它的好处是您可以将插件限制为仅 x 轴或仅 y 轴。

# c++ - c++ 和 SDL 中的游戏程序。“SLD_Flip”错误

> ID：11354931
> 
> 赞同：1
> 
> 时间：2012-07-06T02:03:43.897
> 
> 标签：c++, sdl

我已经开始用 SDL 用 C++ 制作游戏。我的代码是：

主文件

```
#include "SDL/SDL.h"
#include "gameSystem.h"

int main(int argc, char *args[])
{
    gameSystem systemHandler;
    SDL_Surface *buffer;
    SDL_Event event;
    while(event.type != SDL_QUIT)
    {
        SDL_PollEvent(&event);
        SLD_Flip(buffer);
    }
} 
```

游戏系统.cpp

```
#include "SDL/SDL.h"
#include "gameSystem.h"

gameSystem::gameSystem()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_WM_SetCaption("GameName", NULL);
    SDL_Surface *buffer;
    bool fullscreen = false;
    if (fullscreen == true)
        {buffer = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE | SDL_FULLSCREEN);}
    else
        {buffer = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE);}
}

gameSystem::~gameSystem()
{
    SDL_Quit();
} 
```

游戏系统.h

```
class gameSystem
{
    public:
        gameSystem();
        ~gameSystem();
    private:
        SDL_Surface *buffer;
}; 
```

我的链接器选项包括： -lmingw32 -lSDLmain -lSDL -lwinmm -sdl_Mixer

我收到以下错误：main.cpp 第 12 行的“错误：'SLD_Flip' 未在此范围内声明”。

所有其他 SDL 功能似乎都很好。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:08:03.120

你拼错了。应该是`SDL_Flip`，不是`SLD_Flip`。

此外，您还没有`buffer`在`main`. 您没有在`gameSystem::gameSystem()`;中设置它的值 变量超出范围。

# java - Java 中的comapareTo 方法是如何工作的？

> ID：11354932
> 
> 赞同：-3
> 
> 时间：2012-07-06T02:04:14.067
> 
> 标签：java, compareto

谁能解释以下代码是如何工作的？

```
public int compareTo(Object o) {
    if (o instanceof Item) {
        return date1.compareTo( ((Item) o).getDate2());
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:08:46.983

它检查对象 o 是否是一个项目，然后比较它们，比较函数返回值 -1、0 和 1。

如果它返回值 0，则表示对象相同，如果返回 -1 或 1，则表示它们不相同。

最后的返回是默认捕获，因此如果对象 o 不是该项目类型，则返回不匹配。

# ibm-mq - 备份操作期间队列管理器数据和日志指的是什么？

> ID：11354934
> 
> 赞同：2
> 
> 时间：2012-07-06T02:04:21.323
> 
> 标签：ibm-mq, mq

根据 IBM MQ 的信息中心，我们可以备份队列管理器数据以备份和恢复 QMGR。步骤之一是获取 qmgr 数据和日志文件目录的副本。我的问题是数据和日志文件目录的特别含义是什么？我的以下理解正确吗？

```
data directory ---- /var/mqm/qmgrs/QMGR01/
log  directory ---- /var/mqm/log/QMGR01/ 
```

另一种是 MQ 具有非持久性和持久性消息类型。**至于非持久化，消息是否只存储在内存中？一旦发生什么崩溃，它就无法恢复。Rgt？**但是，**持久消息可以在该崩溃中幸存下来。但是持久消息通常存储在哪里呢？**

请帮帮我。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:19:02.370

是的，您的目录正确。只需确保如果您进行文件系统备份，则 QMgr 当时已关闭。

请注意，时间点备份通常不是备份 QMgr 的好策略。无论当时 QMgr 上的任何消息都将在 QMgr 恢复时重新传递，除非您采取措施阻止这种情况发生。如果 QMgr 在集群中，则在恢复时它将与集群不同步。

通常备份 QMgr 的方法是保存对象定义、访问控制列表、任何出口及其 parm 文件。恢复 QMgr 是使用`crtmqm`创建一个新实例并在所有定义中运行的问题。

非持久性消息存储在内存中，直到它们溢出内存，然后它们被存储到磁盘上的队列文件中。如果队列被标记为，`NPMCLASS(HIGH)`那么 QMgr 将尝试通过有序关闭和重新启动来保存和恢复非持久消息，但如果 QMgr 崩溃，则会丢弃它们。

如果写出同步点，则在将控制权返回给调用程序之前，持久性消息会被强化到队列和日志文件中。`COMMIT`如果持久消息是在同步点下写入的，WMQ 允许对消息进行延迟缓存写入，但确保在从命令返回控制权之前将它们全部刷新。

# c++ - 为什么 std::getline 不阻塞？

> ID：11354936
> 
> 赞同：5
> 
> 时间：2012-07-06T02:04:29.233
> 
> 标签：c++, objective-c, macos, objective-c++, getline

我在 Objective-C 类中有这段代码（在 Objective-C++ 文件中）：

```
+(NSString *)readString
{
    string res;
    std::getline(cin, res);
    return [NSString stringWithCString:res.c_str() encoding:NSASCIIStringEncoding];
} 
```

当我运行它时，我每次都会得到一个零长度的字符串。从来没有机会在命令行输入。没有。当我将此代码逐字复制到`main()`中时，它可以工作。我在构建设置下打开了 ARC。我不知道发生了什么。OSX 10.7.4，Xcode 4.3.2。

它*是*一个控制台应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T02:26:53.880

这意味着有输入等待在输入上读取。您可以清空输入：

```
cin.ignore(std::numeric_limits<std::streamsize>::max();
std::getline(cin, res); 
```

如果发生这种情况，则意味着您没有在之前的读取中从输入流中读取所有数据。上面的代码会在尝试阅读更多内容之前丢弃任何用户输入。

这可能意味着您正在混合`operator>>`阅读`std::getline()`用户输入。您可能应该选择一种技术并在整个应用程序中使用它 (std::getline()) （您可以混合使用它们，您只需要更加小心并在使用 operator>> 后删除 '\n' 以确保任何后续的 std ::getline() 不会混淆..

如果您想读取一个数字，请读取该行，然后解析该行外的数字：

```
std::getline(cin, line);
std::stringstream  linestream(line);

linestream >> value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-25T15:09:40.207

你可以简单地做：

```
cin.ignore(); 
```

或使用

```
cin.clear();
cin.sync(); 
```

使用前`getline()`

# java - 如何在特定线程上运行我的代码？

> ID：11354950
> 
> 赞同：7
> 
> 时间：2012-07-06T02:07:56.907
> 
> 标签：java, android, multithreading, handler

如何在特定线程上运行我的代码？

如果“特定线程”是主 ui 线程，我可以使用 runOnUiThread 方法。

但是“特定线程”不是ui Thread，“特定线程”不是我制作的。

“特定线程”是由某个图书馆制作的。

但我可以访问“特定线程”。

像这样，`Thread theSpecificThread = getThread();`

如何在 runOnUiThread(new Runnable()) 等特定线程上运行我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:22:39.117

您必须安排线程调用它。如果这个线程被隐藏在一个不透明的库中，不调用任何可访问的方法或事件，并且没有提供任何信号通知它做你能做的事情，那么我担心你有一个大问题。

# php - 解决一个坏的Url 来清理php 中的Url？

> ID：11354951
> 
> 赞同：0
> 
> 时间：2012-07-06T02:07:57.123
> 
> 标签：php

当我浏览一个网站时，我得到了很多像这样的坏网址。 `http://example.com/../../.././././1.htm` `http://example.com/test/../test/.././././1.htm` `http://example.com/.//1.htm` `http://example.com/../test/..//1.htm`

所有这些都应该是`http://example.com/1.htm`。如何使用 PHP 代码来做到这一点，谢谢。

PS：我使用[http://snoopy.sourceforge.net/](http://snoopy.sourceforge.net/) 我的数据库中有很多重复的链接，' `http://example.com/../test/..//1.htm`'应该是' `http://example.com/1.htm`'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:53:00.990

您可以这样做，假设您提供的所有网址都应该是`http://example.com/1.htm`：

```
$test = array('http://example.com/../../../././.\./1.htm',
              'http://example.com/test/../test/../././.\./1.htm',
              'http://example.com/.//1.htm',
              'http://example.com/../test/..//1.htm');

foreach ($test as $url){
    $u = parse_url($url);
    $path = $u['scheme'].'://'.$u['host'].'/'.basename($u['path']);
    echo $path.'<br />'.PHP_EOL;
}
/* result
http://example.com/1.htm<br />
http://example.com/1.htm<br />
http://example.com/1.htm<br />
http://example.com/1.htm<br />
*/

//or as a function @lpc2138
function getRealUrl($url){ 
    $u = parse_url($url); 
    $path = $u['scheme'].'://'.$u['host'].'/'.basename($u['path']);

    $path .= (!empty($u['query'])) ? '?'.$u['query'] : ''; 
    return $path;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:22:42.813

你可以做一些花哨的正则表达式，但这很好用。

```
fixUrl('http://example.com/../../../././.\./1.htm');

function fixUrl($str) {
    $str = str_replace('../', '', $str);
    $str = str_replace('./', '', $str);
    $str = str_replace('\.', '', $str);

    return $str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:54:05.923

您似乎正在寻找一种[算法来删除点段](https://www.rfc-editor.org/rfc/rfc3986#section-5.2.4)：

```
function remove_dot_segments($abspath) {
    $ib = $abspath;
    $ob = '';
    while ($ib !== '') {
        if (substr($ib, 0, 3) === '../') {
            $ib = substr($ib, 3);
        } else if (substr($ib, 0, 2) === './') {
            $ib = substr($ib, 2);
        } else if (substr($ib, 0, 2) === '/.' && ($ib[2] === '/' || strlen($ib) === 2)) {
            $ib = '/'.substr($ib, 3);
        } else if (substr($ib, 0, 3) === '/..' && ($ib[3] === '/' || strlen($ib) === 3)) {
            $ib = '/'.substr($ib, 4);
            $ob = substr($ob, 0, strlen($ob)-strlen(strrchr($ob, '/')));
        } else if ($ib === '.' || $ib === '..') {
            $ib = '';
        } else {
            $pos = strpos($ib, '/', 1);
            if ($pos === false) {
                $ob .= $ib;
                $ib = '';
            } else {
                $ob .= substr($ib, 0, $pos);
                $ib = substr($ib, $pos);
            }
        }
    }
    return $ob;
} 
```

这将删除`.`and`..`段。任何其他段的删除，如空段 ( `//`) 或`.\.`不符合标准，因为它会更改路径的语义。

# java - 使用 switch 语句测试加权随机数

> ID：11354953
> 
> 赞同：-1
> 
> 时间：2012-07-06T02:08:11.027
> 
> 标签：java

我正在使用它来尝试创建加权随机数：

```
int choice_weight[] = { 25, 25, 25, 25 };
int num_choices = choice_weight.length;
Random random = new Random();
int i;
int sum_of_weight = 0;

for (i = 0; i < num_choices; i++) {
    sum_of_weight += choice_weight[i];
}

int rnd = random.nextInt(sum_of_weight);
System.out.println(rnd);

for (i = 0; i < num_choices; i++) {
    if (rnd < choice_weight[i])
        rnd -= choice_weight[i];
} 
```

我正在使用 swtich 语句来测试并查看案例是否为：

```
case 1:

case 2:

case 3:

case 4: 
```

问题是`random.nextInt(sum_of_weight)`生成 100 到 0 之间的数字，这是基于我的 25、25、25、25 的 4 个权重。我需要一个数字来匹配可能的情况 1-4 之一？还是我应该改变我的测试方法？

整个过程让我有点困惑，非常感谢一些帮助。

因此，基本上选择特定数字的几率为 25%。此外，我将在整个程序的生命周期中更改百分比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:22:28.300

在测试您的号码时，您不应该“增加”您的范围吗？IE：

```
System.out.println(rnd);

int winner=0;
int rangeHigh=0;
for (i = 0; i < num_choices; i++) {
   rangeHigh += choice_weight[i];
   if (rnd < rangeHigh){
      winner = (i+1);
      break;
   }
}
System.out.println("lucky winner number: " + winner); 
```

基本上，您正在生成一个介于 0-99 之间的数字并检查您的值是否为：

```
1\. < 25  //bucket 1 - [0-24]
2\. < 50  //bucket 2 - [25-49]
3\. < 75  //bucket 3 - [50-74]
4\. < 100  //bucket 4 - [75-99] 
```

第二次看你的方式也可以工作（带调整）：

```
int winner = 0;
for (i = 0; i < num_choices; i++) {
    if (rnd < choice_weight[i]){
       winner = i+1;
       break;
    }
    rnd -= choice_weight[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:22:05.497

我您想使用 4 个案例进行测试，您可以测试 1 到 25 之间的数字；25 - 50; 51 - 75; 和 76-100。

您可以将开关设置为：

```
case 1 ((num >1)&&(num<25))... 
```

依此类推...这样您将始终获得测试结果。

希望有帮助。

# css - 绝对定位的元素被另一个元素的边距移动

> ID：11354955
> 
> 赞同：4
> 
> 时间：2012-07-06T02:08:12.730
> 
> 标签：css, positioning, margin, absolute

这是我针对以下问题的 jsFiddle：http: [//jsfiddle.net/arelia/Rruxf/](http://jsfiddle.net/arelia/Rruxf/)

我想要一个位于正文顶部的页眉和一个位于正文底部的页脚。我在页眉和页脚之间有一个内容 div（位置：相对），当我在 div 周围设置边距时，我绝对定位的页眉和页脚从它们的顶部/底部位置移动了该边距的高度（这也发生在我尝试在 div 中的段落上方和下方设置边距）。在小提琴中，您可以看到页脚没有附加到底部，即使它是绝对定位的（我继续并将页眉设为静态，因为静态给出了预期的结果）。**如何将页眉和页脚定位到正文的顶部和底部，而不让中间的内容移动这两个元素？**如果 position: absolute 元素被移出流程，为什么会影响它们的位置呢？

我试过在这里和谷歌搜索“CSS 边距影响绝对”和其他一些短语无济于事。我在开发人员工具中使用它时发现了这一点：

*   指标显示 body 是 html 元素的高度减去一个边距（仍然影响页脚的边距）。因此，body 必须拉伸到内容 div 的高度，因为在 body 内的文档流中没有其他东西可以定义其高度。但是该高度在内容结束处而不是在边距之后结束。它不应该包括边距吗？
*   如果我将主体的高度设置为 100%，页脚将自身定位到视口的底部，然后在我滚动时保持固定在该位置。为什么它不将自己附加到身体的底部而不是视口的底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:11:52.370

## 回答你的最后两个问题

*   “但是[正文]的高度在内容结束的地方而不是在边距之后结束。它不应该包括边距吗？” *回答*： 不，`body`高度本身不受其中元素下边距的影响。
*   “如果我将身体的高度设为 100%……为什么它不将自己附加到身体的底部而不是视口的底部？” *答案*：它*附加*到底部，`body`因为通过设置高度，`100%`您已将 设置`body`为视口高度。

## 以相反的顺序回答您的主要问题

*   “如果位置：绝对元素被移出流程，为什么会影响它们的位置呢？” *答*：影响他们位置的是那个身体元素的位置。在回答上面第一个问题时，内部元素上的边距会导致内部元素`body`远离视口的底部，从而导致其`body`自身与视口的底部间隔该距离。然后，当您将元素定位到 时`body`，它会出现间隙，因为主体未与视口底部齐平。这就是您在小提琴的页脚区域看到的内容。
*   “如何将页眉和页脚定位到正文的顶部和底部，而不让中间的内容移动这两个元素？” *答案*：亚当的原始答案`fixed`是一种方法，严格基于您的粗体问题（他已经修改了它）。但是，您在评论中澄清了您真正想要的是“如果内容很短，我希望页脚在视口底部。如果内容很长，我希望它跟随内容并触摸左下角和右下角这页纸。” 亚当最初的定位答案`fixed`不会实现这一点（正如他也意识到的那样）。相当：

## 做这个

```
html {height: 100%}
body {min-height: 100%;}

div {
    margin: 20px 20px 0 20px; /* eliminate your bottom margin */
    padding-bottom: 50px; /* use bottom padding to get space for footer */
} 
```

[见短内容小提琴。](http://jsfiddle.net/Rruxf/3/)

[请参阅长内容小提琴。](http://jsfiddle.net/Rruxf/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T02:37:27.197

看着你的评论，我想我明白你想要达到的目标。你可以使用这个：

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

以下是如何将它与现有代码集成：

[http://jsfiddle.net/wJSZD/](http://jsfiddle.net/wJSZD/)

# notifications - 越狱 iphone 重新安装应用程序，但通知 BadgeNumber 仍然存在

> ID：11354956
> 
> 赞同：1
> 
> 时间：2012-07-06T02:08:15.110
> 
> 标签：notifications, apple-push-notifications, jailbreak, reinstall

有安装在越狱iphone上的应用程序。我们还实现了 APNs 功能。所以问题是：

1.  该应用程序收到五个通知，图标上显示的 BadgeNumber 是五个。

2.  然后我卸载该应用程序，然后重新安装它。

3.  重新安装完成后，图标上的 BadgeNumber**仍显示为 5**。

====>我认为重新安装完成后，BadgeNumber 应该**为零**。这样对吗？

# java - 为什么“array instanceof Iterable”不能在 Java 中编译？

> ID：11354958
> 
> 赞同：16
> 
> 时间：2012-07-06T02:08:28.110
> 
> 标签：java, arrays, compiler-errors

```
Object[] array = new Object[]{};
System.out.println((array instanceof Serializable));//passed
System.out.println((array instanceof Cloneable));//passed 
```

此代码编译并运行。输出是：

```
true
true 
```

但是，此代码无法编译：

```
System.out.println((array instanceof Iterable));//not passed 
```

Eclipse 编译器报告：

> 不兼容的条件操作数类型 Object[] 和 Iterable

我发现数组只能在接口`Serializable`和`Cloneable`使用操作时进行比较`instanceof`。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T02:30:48.063

根据[JLS，Java SE 7 版本](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)，§ [15.20.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.2)（类型比较运算符`instanceof`）：

> 如果将*RelationalExpression*转换为*ReferenceType*将作为编译时错误被拒绝，则`instanceof`关系表达式同样会产生编译时错误。在这种情况下，`instanceof`表达式的结果永远不会是真的。

并且 § [15.16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16) (Cast Expressions) 规定：

> 如果操作数的编译时类型可能永远不会根据强制转换规则（第[5.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5)节）强制转换为强制转换运算符指定的类型，则这是一个编译时错误。

最后，第[5.5.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)节（引用类型转换）指出：

> 给定一个编译时引用类型*S*（源）和一个编译时引用类型 *T* （目标），如果由于以下规则没有发生编译时错误，则存在从*S*到*T*的强制转换。
> 
> *[...]*
> 
> 如果*S*是数组类型*SC* []，即 SC 类型的组件*数组*：
> 
> *   如果*T是接口类型，则除非**T*是类型 `java.io.Serializable`或类型`Cloneable`（数组实现的唯一接口），否则会发生编译时错误。

因此，Java*要求*您进行测试以查看数组类型是否是`java.lang.Iterable`导致编译时错误的实例。

如果你想尝试让它工作（总是 return `false`），你可以将数组转换为`Object`first ，如下所示：

```
System.out.println((((Object)array) instanceof Iterable)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T02:13:42.397

您混淆了对象在 foreach 循环中的适用性以及`Iterable`数组未实现的接口。

foreach 语法支持数组和 Iterable。

这并不意味着数组是可迭代的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:26:59.200

我猜是因为两者`Serializable`都是`Cloneable`标记接口，而 as`Iterable`不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T02:35:02.620

因为java是一种静态语言，所以编译器知道数组不会`Iterable`在编译时出现，编译器知道这`array instanceof Iterable`永远不会是真的，所以它会触发编译时错误来警告你。

# c++ - C++ 读取文件

> ID：11354960
> 
> 赞同：1
> 
> 时间：2012-07-06T02:08:31.587
> 
> 标签：c++, input

如果我打开一个新文件进行输入，并且我`input >> listSize;`在 while 循环之外调用然后继续调用`input >> anothervariable`，它会自动在文件中前进还是会再次读取第一行？

例子：

```
input >> listSize;
BaseStudent* studentlist = new BaseStudent[listSize.atoi()];
while (!input.eof())
{
         input >> anothervariable; // I want this to start on the second line, not the first

} 
```

输入文件如下所示，我们可以对模式进行编码（忽略多余的空行）：

```
12

Bunny, Bugs

Math 90 86 80 95 100 99 96 93

Schmuckatelli, Joe

History 88 75 90

Dipwart, Marvin

English 95 76 72 88

Crack Corn, Jimmy

Math 44 58 23 76 50 59 77 68

Kirk, James T. 

English 40 100 68 88

Lewinsky, Monica

History 60 72 78

Nixon, Richard

English 35 99 70 70

Lincoln, Abraham

History 59 71 75

Clinton, William

Math 43 55 25 76 50 58 65

Duck, Donald

English 34 100 65 65

Duck, Daffy

History 55 70 70

Bush, George

Math 44 54 29 75 50 55 60 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:14:38.587

当您从流中读取数据时，将使用该数据。
下次将从最后一点读取“up-to”

尽管流运算符 >> 将跳过继续进行的空白，但不会读取对象之后的空白（如果您的输入是面向行的，这可能会很痛苦，因为您不容易看到新行）。

解决此问题的最佳方法是一次显式读取行，然后解析该行：

```
std::string    line;
std::getline(input, line);   // Read a line

// Now look what is in the line.
std::stringstream  linestream(line);
linestream >> dataItem1 >> dataItem2 >> dataItem3; /// etc. 
```

另请注意：

```
 // This is not good. If there are any errors in your file it will loop forever.
 while (!input.eof()) 
```

使用以下方法循环输入是正常的：

```
 while(input >> data)
 {
      // If you get in here then the read worked.
 }
 // You will fall out of the loop when
 //   1) EOF
 //   2) There is an error. 
```

因此，如果我们结合这两种技术：

```
 std::string line1;  // Name,
 std::string line2;  // Scores
 std::string empty;  // Empty line in data file.

 while(std::getline(input, line1) && std::getline(line, empty) && std::getline(input, line2))
 { 
       //  line1 => Bunny, Bugs
       //  empty => 
       //  line2 => Math 90 86 80 95 100 99 96 93

       // Enter the loop only if we get a name and a score line
      std::getline(line, empty); // Optionally read a trailing line (there may not be a last one);

      // dataStream   => Math 90 86 80 95 100 99 96 93
      std::stringstream dataStream(line2);
      std::string   subject;
      int score;

      dataStream >> subject;   // subject => Math
      while(dataStream >> score)
      {
          // We read another score from the data line;

          // score is 90 first time 86 second time etc.
      }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:38:43.650

其他人已经指出，您的问题的答案是“是”，所以我不会担心那部分。

至于其余的，我想我会写得有点不同。您的文件显然代表结构化数据，我会编写代码以合理地直接反映这一事实。我首先定义一个反映文件中数据的结构：

```
struct test_scores {   // maybe not tests. Change if appropriate
    std::string student;
    std::string course;
    std::vector<int>
}; 
```

然后，我将编写一个函数来从文件中读取其中一项：

```
std::istream &operator>>(std::istream &is, test_scores &ts) { 
    // for the moment assuming there are no blank lines in the file.
    std::getline(is, ts.student);
    std::string temp;
    std::istringstream buffer(temp);
    buffer >> ts.course;
    int score;
    while (buffer>>score)
        ts.scores.push_back(score);
    return is;
} 
```

然而，在 C++ 中，读取任何数量的数据确实比在数据前面加上计数更容易。鉴于存在该计数，最简单的做法可能就是阅读并忽略它：

```
std::string ignore;
std::getline(infile, ignore); 
```

然后我们可以很容易地读取真实数据：

```
std::vector<test_scores> student_scores;
test_scores tmp;

while (infile >> tmp)
    student_scores.push_back(tmp); 
```

...或者，我们可以使用 C++ 的handy-dandy`istream_iterator`来进一步简化代码：

```
std::vector<test_scores> student_scores((std::istream_iterator<test_scores>(infile)),
                                         std::istream_iterator<test_scores>()); 
```

就是这样——它定义了向量并从输入文件初始化它，所有这些都在一个（相当）简单的操作中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:10:12.317

Thew 文件指针总是超过你已经读过的。

# node.js - 如果应用程序被机器人访问，请勿启动会话

> ID：11354961
> 
> 赞同：3
> 
> 时间：2012-07-06T02:08:34.003
> 
> 标签：node.js, express, user-agent, bots

在我的 Node.js 应用程序中，每次新客户端以典型方式访问应用程序时，我都会初始化会话

```
app.use(express.session({ secret: config.secret.session, store: new RedisStore())); 
```

这是里面`app.configure`。

现在，如果我不想通过正则表达式传递用户代理来检测用户代理属于机器人，我不想过滤来自机器人的流量并且不创建会话，我该怎么办，例如

```
/bot|index|spider|crawl|wget|slurp|Mediapartners-Google/i 
```

但是我把这个条件放在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:07:43.370

我会像这样使用文件 robots.txt：

```
User-agent: *
Disallow: / 
```

[资源](http://en.wikipedia.org/wiki/Robots_exclusion_standard)

# javascript - 如何从数字中扣除百分比并使用 Javascript 或 Jquery 将差异分配给 innerHTML 属性？

> ID：11354963
> 
> 赞同：0
> 
> 时间：2012-07-06T02:08:44.333
> 
> 标签：javascript, jquery

我使用 php 和 jquery 自定义支付网关解决方案。在我传递数据（即客户地址、电话、购买金额等）之前，我想从购买/产品金额中扣除 2.9%（这将是我的个人服务费），然后将余额传递给用于处理的支付网关。我将如何使用 PHP 做到这一点？

```
var $adjustedamount;
var $mypercentage = 0.029;

function computemypercentage($original_price){

$adjustedamount =  ($original_price += ($original_price * $mypercentage)); 
return $adjustedamount;
}
document.getElementById("trueamount").innerHTML= computemypercentage(29.99); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:30:28.190

正如我已经在评论中所说，请确保在服务器端完成**任何有关金钱的计算。**JavaScript 非常适合提供更好的用户体验，但不适用于关键业务逻辑。

原因是修改这些值太容易了。拉起任何现代浏览器并打开开发人员工具。您可以随意更改表单值和 JavaScript，默认情况下使来自客户端的任何内容不可信。

至于将值分配给某个元素...您的代码应该可以正常工作：http: [//jsfiddle.net/yPC3K/](http://jsfiddle.net/yPC3K/)

# desire2learn - 在 Desire2Learn 中设置“最高分数”

> ID：11354965
> 
> 赞同：0
> 
> 时间：2012-07-06T02:08:57.250
> 
> 标签：desire2learn

Web 服务是否允许用户更新作业中的 Max Score 值？例如，我上传了一个我的最高分数为 15 的课程，我想为同一班级上传相同的作业，但分数不同，为 12。如果是这样，需要拨打哪个电话来更新分数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:45:52.823

是的，您可以[更新成绩对象并在](http://docs.valence.desire2learn.com/res/grade.html#put--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-%28D2LID-gradeObjectId%29)[GradeObject Resource](http://docs.valence.desire2learn.com/res/grade.html#Grade.GradeObject)中设置最高分值。

# node.js - 将 node.js 应用程序添加为 Apache 别名？

> ID：11354966
> 
> 赞同：2
> 
> 时间：2012-07-06T02:09:46.280
> 
> 标签：node.js, tomcat, apache2, integration

将 Apache Tomcat Web 应用程序连接到现有 Apache 网站时，可以加载 mod_jk 以在 Apache 中为 Web 应用程序提供别名。

是否有用于将 node.js 连接到 Apache 的类似模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:52:48.333

Node 不像 Tomcat 那样是应用服务器。它本身就是一个本地网络/Web 服务器（并且作为自己的独立进程运行），所以如果你想将 Apache 连接到 Node 应用程序，最简单的方法就是使用 Apache 的[内置代理支持](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)。

在大多数情况下，让 Node 自己充当 Web 服务器可能更有效，因为它的 HTTP 支持是完整且高效的。它有许多 Web 框架，例如[Express](http://expressjs.com/)、Strata 或 RESTify，以及处理诸如有效地服务静态资源之类的中间件库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T14:17:43.000

Plesk 现在有一个 Node 扩展。它是无缝的，具有广泛的功能并且免费：[http ://ext.plesk.com/packages/28f799af-1ff4-4bb8-9c87-a04f0f23d32e-jxcore-support](http://ext.plesk.com/packages/28f799af-1ff4-4bb8-9c87-a04f0f23d32e-jxcore-support)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:43:59.850

在这里找到了[答案](http://arguments.callee.info/2010/04/20/running-apache-and-node-js-together/)并在我自己的本地网络服务器上进行了测试。

就像@othiym23 说你必须使用 Apache 的[mod_proxy](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)和[mod_rewrite](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)才能使它工作。

您可以在 .htaccess 文件中添加一个相对简单的规则，例如：

```
<IfModule mod_rewrite.c>
 RewriteEngine On

 RewriteRule ^tiddlywiki5.*$ http://whereNodeDotJSIsRunning:8080/ [P]

</IfModule> 
```

这将产生一个 URL `http://yourApacheServer.com/tiddlywiki5/`，您可以从该 URL 通过 Apache2 访问您的 node.js 服务器。`[P]`规则末尾的标志用于通过mod_proxy[将](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)请求转发到不同的服务器，并将其返回给用户，就像他们正在访问一样`http://yourApacheServer.com/tiddlywiki5/`

# grails - Grails Jasper 隐藏参数

> ID：11354973
> 
> 赞同：2
> 
> 时间：2012-07-06T02:10:39.573
> 
> 标签：grails, jasper-reports, ireport

我正在创建一个基本报告，其中我可以将控制器传递的域模型传递给视图并将该实例用作报告的参数。

这里是`<g:jasperReport>`视图中的部分[.gsp]

> 注意：${user} 是域类中的 User 实例，具有以下字符串属性：lastName、firstName、middleName

```
<g:jasperReport 
  jasper="reportByUser"
  format="pdf, html">
    <input type="hidden" name="u_lastName" value="${user.lastName}" />
    <input type="hidden" name="u_firstName" value="${user.firstName}" />
    <input type="hidden" name="u_middleName" value="${user.middleName}" />
</g:jasperReport> 
```

这里是里面的部分xml代码`reportByUser.jrxml`

```
<parameter name="user_lastName" class="java.lang.String" />
<parameter name="user_firstName" class="java.lang.String" />
<parameter name="user_middleName" class="java.lang.String" /> 
```

问题是当我在 grails 上运行报告时，任何一种格式都会返回一个空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-25T02:12:05.280

在：

```
<g:jasperReport 
  jasper="reportByUser"
  format="pdf, html">
    <input type="hidden" name="u_lastName" value="${user.lastName}" />
    <input type="hidden" name="u_firstName" value="${user.firstName}" />
    <input type="hidden" name="u_middleName" value="${user.middleName}" />
</g:jasperReport> 
```

您正在传递：name=" **u** _lastName"

但是在碧玉文件中是specting：name =“ **user** _lastName”

核实...

# socket.io - SenchaTouch2.0 + socket.io : 如何在 SenchTouch2.0 中使用 socket.io.js

> ID：11354974
> 
> 赞同：2
> 
> 时间：2012-07-06T02:10:43.553
> 
> 标签：socket.io, sencha-touch-2

事实上，我曾尝试过，但失败了。现在代码是：

```
function include(path){ 
var a=document.createElement("script");
a.type = "text/javascript"; 
a.src=path; 
var head=document.getElementsByTagName("head")[0];
head.appendChild(a);
} 
include("app/controller/node_modules/socket.io-client/dist/socket.io.js");

Ext.define('WGTalk.controller.guest', {
extend: 'Ext.app.Controller',

config:{
    refs:{
        viewMsg:'#viewMsg',
        txtMsg:'#txtMsg'
    },
    control:{
        '#btSend':{
            tap:'doSend'
        }
    }
},

launch:function(){
        var socket = io.connect('http://localhost:8080');

        socket.on('connect',function(){
            console.log("connected server");
        });

        socket.on('disconnect',function(){
            console.log("server closed");
        });

        socket.on('message',function(data) { 
            console.log('Received a message from the server: ',data); 
        });
},

doSend:function(){
    var msg = this.getTxtMsg().getValue();
    var msgStore = this.getViewMsg().getStore();
    msgStore.add({name:msg,age:'180'});
    this.getTxtMsg().setValue("");
}
}); 
```

错误是：***ReferenceError: Can't find variable: io @"var socket = io.connect('http://localhost:8080'); " ***

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T02:11:22.597

在你的 app.json 中，要加载像 socket.io 这样的外部 javascript 资源，修改如下：

```
/**
 * List of all JavaScript assets in the right execution order.
 * Each item is an object with the following format:
 * ...
 */
"js": [
    {
        "path": "socket.io.js",
        "x-bootstrap": true
    },
    {
        "path": "json.js",
        "x-bootstrap": true
    },
    ... 
 ] 
```

如果您的移动应用程序是客户端，则上述 .js 是客户端 socket.io。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:47:24.880

像这样在 index.html 中声明 io socket

```
<script src="http://yourip:port/socket.io/socket.io.js"></script> 
```

# python - Python GAE datastoreAttributeError：“NoneType”对象没有属性

> ID：11354978
> 
> 赞同：0
> 
> 时间：2012-07-06T02:10:57.747
> 
> 标签：python, google-app-engine, syntax-error, google-cloud-datastore

运行下面的代码，我收到了这个错误：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\CG\Documents\ud\contract\main.py", line 81, in get
    numBook = contract.book_number
AttributeError: 'NoneType' object has no attribute 'book_number' 
```

由于我将这个初始行放在 bd 合同中（如[这里](https://stackoverflow.com/questions/2787319/gae-errorattributeerror-nonetype-object-has-no-attribute-user-is-member)和其他类似问题所建议的那样）：

```
first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
                if first_query is None: # Puting something in db if it's empty
                    first_record = Contract(book_number = 1, initial_page = 1, final_page = 1)
                    first_record.put() 
```

我还进行了测试以验证查询是否没有返回：

```
first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
    if first_query is None: # Puting something in db if it's empty
        first_record = Contract(book_number = 1, initial_page = 1, final_page = 1)
        first_record.put()
    else:         
        numBook = 0
        numInitialPage = 0
        numFinalPage = 0 
```

当我打印这个时： q = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")

我明白了：

当我打印这个：

```
contract = q.get() 
```

我**没有**

如何解决使 put() 工作的问题？

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class Contract(db.Model):
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    date = db.DateTimeProperty(auto_now_add=True)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
            if first_query is None: # Puting something in db if it's empty
                first_record = Contract(book_number = 1, initial_page = 1, final_page = 1)
                first_record.put()
        q = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
        contract = q.get() # return only the first entity
        numBook = contract.book_number
        numInitialPage = contract.initial_page
        numFinalPage = contract.final_page
        template_values = {"person": "",
                                       "nacionality": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": "",
                                       "numBook": numBook,
                                       "numInitialPage": numInitialPage,
                                       "numFinalPage": numFinalPage,
                                       }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")
        numBook = self.request.get("numBook")
        numInitialPage = self.request.get("numInitialPage")
        numFinalPage = self.request.get("numFinalPage")

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            a = Person(firstName = person_name,
                                   nacionality = user_nacionality,
                                   maritalStatus = user_maritalStatus,
                                   profession = user_profession,
                                   SSN = int(user_SSN),
                                   driverLicense = int(user_driverLicense)
                                   #address = user_address
                                   )
            a.put()
            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s&numBook=%s&numInitialPage=%s&numFinalPage=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
witness, owner, contractType, address, numBook, numInitialPage, numFinalPage))

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        geted_person_name = self.request.get('person')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_profession = self.request.get("profession")
        geted_user_maritalStatus = self.request.get("maritalStatus")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_person_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        geted_address = self.request.get('address')
        geted_owner = self.request.get("owner")
        geted_witness = self.request.get("witness")
        geted_contractType = self.request.get("contractType")
        geted_dateToday = dateToday()
        your_contract = jinja_environment.get_template('your_contract.html')
        geted_numBook = self.request.get('numBook')
        geted_numInitialPage = self.request.get('numInitialPage')
        geted_numFinalPage = self.request.get('numFinalPage')

        contract = Contract(book_number = geted_numBook, initial_page = geted_numInitialPage, final_page = geted_numFinalPage)
        contract.put()

        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_maritalStatus,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driverLicense,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contractType,
                                "dateContract":geted_dateToday,
                                "numBook":geted_numBook,
                                "numInitialPage":geted_numInitialPage,
                                "numFinalPage":geted_numInitialPage,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

class Contract(db.Model):
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    date = db.DateTimeProperty(auto_now_add=True)

app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:17:23.437

可能是因为查询没有返回任何内容，试试这个：

```
q = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
contract = q.get() # return only the first entity
if contract is not None:
    numBook = contract.book_number
else:
    print('contract is None') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:02:02.660

试试这个：

```
first_query = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get() 
```

您必须使用**get()**来选择最后一条记录（而不是查询对象）。因此，代码将在 if 块内运行。

# ruby-on-rails - Rails：保存属性不起作用

> ID：11354981
> 
> 赞同：2
> 
> 时间：2012-07-06T02:11:14.300
> 
> 标签：ruby-on-rails

我有一个库（mylib.rb），我在其中定义了一些类和方法。它可用于控制器和视图（我已验证）。

在 mylib.rb 中，我有：

```
def admins_filled (params)
  if params[:admin_selections]
    return TRUE
  end
end

def return_admins_json (params)
  admins_list = Array.new
  params[:admin_selection].each do |admin_id|
    admins_list << admin_id
  end
  return JSON.generate (admins_list)
end 
```

在我的 categories_controller.rb 中，我有以下内容：

```
line 63:  def update
line 64:     @category = Category.find(params[:id])
line 65:    if admins_filled(params)
line 66:      params[:admins] = return_admins_json (params)
line 67:      respond_to do |format|
line 68:        if @category.update_attribute(:admins,params[:admins])
line 69:          format.html { redirect_to @category, notice: 'Category was successfully updated.' }
line 70:          format.json { head :no_content }
line 71:        end
line 72:      end
line 73:    end
line 74:
line 75:    respond_to do |format|
line 76:      if @category.update_attributes(params)
line 77:        format.html { redirect_to @category, notice: 'Category was successfully updated.' }
line 78:        format.json { head :no_content }
line 79:      else
line 80:        format.html { render action: "edit" }
line 81:        format.json { render json: @category.errors, status: :unprocessable_entity }
line 82:      end
line 83:    end
line 84: end 
```

我收到以下错误：

```
Can't mass-assign protected attributes: utf8, _method, authenticity_token, commit, action, controller, id 
```

应用程序跟踪：

```
app/controllers/categories_controller.rb:75:in `block in update'
app/controllers/categories_controller.rb:63:in `update' 
```

以下是请求参数：

参数：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"2xffx/uGVqo8/4aH7xEes0QL1Exjwa12p9g7HbEmBe0=",
 "admin_selections"=>{"admin1"=>"55",
 "admin2"=>"56",
 "admin3"=>"",
 "admin4"=>"",
 "admin5"=>"",
 "admin6"=>"",
 "admin7"=>"",
 "admin8"=>""},
 "commit"=>"Update Category",
 "id"=>"3",
 "admins"=>"[\"55\",
\"56\",
\"\",
\"\",
\"\",
\"\",
\"\",
\"\"]"} 
```

我期待更新管理员列，但看起来所有参数都已通过。我不明白发生了什么事。

添加categories.rb（模型）：

```
class Category < ActiveRecord::Base
  attr_accessible :admin1, :admin2, :admin3, :admin4, :admin5, :admins, :board1, :board10, :board2, :board3, :board4, :board5, :board6, :board7, :board8, :board9, :board_members, :curator1, :curator10, :curator2, :curator3, :curator4, :curator5, :curator6, :curator7, :curator8, :curator9, :curators, :description, :mission_statement, :name
  attr_accessible :admins, :curators, :board_members, :admin_selections
  has_many :events
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:18:06.733

您的错误消息准确地告诉您出了什么问题，它不会让您批量分配。

rails 3.2.3 有一个变化，要求您明确允许批量分配

```
config.active_record.whitelist_attributes = false 
```

[请参阅此处](http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html)了解更改

或者，您可以为模型中您希望能够更改的属性设置 attr_accessible，而不是允许批量分配，例如

```
attr_accessible :admin_selection, :commit # etc 
```

# desire2learn - Desire2Learn Grades API，最高分数为 0

> ID：11354983
> 
> 赞同：0
> 
> 时间：2012-07-06T02:11:25.437
> 
> 标签：desire2learn

是否有允许用户上传 Max Score 值为 0 的会话的 Web 服务？有服务处理吗？如果是这样，最高分数 0 需要什么才能出现在成绩项目列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:50:44.537

看来，无论是在 Web 用户界面中还是通过 API，您都无法创建显式 MaxPoints 属性为 0 的成绩对象：似乎最小值为 0.01。

# html - 如何删除Firefox中滚动条和textarea边框之间的空间？

> ID：11354986
> 
> 赞同：1
> 
> 时间：2012-07-06T02:11:33.007
> 
> 标签：html, textarea

在 Firefox 中，当我设置 textarea 样式的内边距、滚动条和边框时，内边距位于滚动条和边框之间。是否可以在滚动条和文本内容之间放置填充？

```
<textarea style="overflow: scroll; padding: 20px;"></textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:24:16.927

这个问题只存在于 Firefox 上，已经是众所周知的问题：

[https://bugzilla.mozilla.org/show_bug.cgi?id=157846](https://bugzilla.mozilla.org/show_bug.cgi?id=157846)

但是，您可以设置`padding-left: 20px;padding-top: 20px;`摆脱侧面的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T17:15:06.670

我遇到了同样的问题并使用它修复了它，`overflow-x: hidden;`但是没有使用`scroll horizontal`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T20:45:49.467

我们在 2020 年，但 Mozilla 仍然只支持两个属性：`scrollbar-color`和`scrollbar-width`.

所以，我在 Firefox v.80.0（64 位）中也有同样的行为，并设法解决了`margin-right: -1px;`

# sql - 使用 Rails，我可以使用单个表来存储简单的值（性别、头发颜色、眼睛颜色）吗？

> ID：11354987
> 
> 赞同：0
> 
> 时间：2012-07-06T02:11:33.363
> 
> 标签：sql, ruby-on-rails, activerecord

假设我有一个 Person 表来存储关于那个人的信息（很奇怪吧？）。我有性别、头发颜色和眼睛颜色等选择框。有没有一种使用单个表的好方法，而不是为每个表创建带有描述字段的单独表？也许是一个带有名称和描述字段的资源表？就这么简单吗？

```
Resources
=========
ID    Name       Description
--------------------
1     Gender     Male
2     Gender     Female
3     Eye Color  Blue
4     Eye Color  Green
5     Eye Color  Brown
6     Hair Color Black
7     Hair Color Brunette
8     Hair Color Blonde
9     Hair Color Red

Person
=========
ID  Name  Gender  Eye_Color  Hair_Color
-----------------------------------------------
1   Ryan  1       3          8 
```

这是推荐的方式还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:31:55.547

你可以这样做，这将是一个多态关联。

如果您不需要查询此信息而只是能够访问它，您可以使用序列化并将所有值存储在一列中。所以一个人记录会有一个列，我们称之为属性，它会有“eye_color：蓝色，性别：男性”等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:29:28.180

是的，就是这么简单，IMO 你的方法是正确的。但请注意，如果您选择 Ex：一个人的多种头发颜色，您的方法将不起作用。

但我相信保持代码简单，直到你需要改变它，当你有时间的时候阅读[YAGNI :)](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:42:29.290

我将创建一个名为 Physical_attributes 的单独表，并在 Person 和 Physical_attributes 之间创建一个关联表，personal_physical_attributes，我将在其中存储人员的 id、Physical_attribute 的 id 和该 Physical_attribute 的描述。

# java - javascript的jface数据绑定

> ID：11354988
> 
> 赞同：0
> 
> 时间：2012-07-06T02:11:34.830
> 
> 标签：java, php, jquery, data-binding, jface

我是一名java开发人员。我在大多数项目中使用 SWT 和 JFace 数据绑定。最近，我的任务是处理一个涉及 PHP 的不同类型的项目。我需要在服务器端使用 PHP 并在客户端使用 JavaScript 开发 Web 应用程序。到目前为止，我正在使用 jQuery 来完成所有的工作。jQuery 很好，但不足以提供快速构建 Web 界面所需的所有管道。

在桌面应用程序中，JFace 数据绑定提供了将小部件、表单、标签绑定到模型的所有功能，允许您将表单的内容同步到对象、验证表单的内容并在内容是否正常时提供反馈。

例如：对于文本字段，您可以将文本值绑定到对象的属性。添加验证以检查文本值是否为空。当为空时，显示一个工具提示，要求用户输入一个值并禁用提交按钮。

所以我问你，有没有类似于 JFace Databinding for JavaScript 的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:17:31.677

1.  [http://visualstudiomagazine.com/articles/2012/02/01/2-great-javascript-data-binding-libraries.aspx](http://visualstudiomagazine.com/articles/2012/02/01/2-great-javascript-data-binding-libraries.aspx)

2.  [http://uberpwn.wordpress.com/2010/10/10/databinding-js-objects-into-html-forms-with-jquery-datalink-and-jquery-tmpl/](http://uberpwn.wordpress.com/2010/10/10/databinding-js-objects-into-html-forms-with-jquery-datalink-and-jquery-tmpl/)

3.  [http://blogs.claritycon.com/blog/2011/02/mvvm-databinding-javascript-with-knockout-html5-boilerplate/](http://blogs.claritycon.com/blog/2011/02/mvvm-databinding-javascript-with-knockout-html5-boilerplate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T19:31:14.880

现在支持数据绑定的现代组件是 angular、aurelia 和 react（有点……+redux 快要死了）。jQuery 没有提供好的数据绑定实现。它需要手动连接所有道具更改。可能实现一些观察者/订阅者方法。

或者使用一些提供足够方便的数据绑定定义命令的数据绑定任务的组件。我用databindjs做到了。例如

```
// Lets assume that there is just simple form (target)
var simpleForm = {
   input: $('.simple .input-value'),
   output: $('.simple .output-value')
};
// And here is the simple model object (source)
var model = {
    text: 'initial value'
};

// Lets set two directional binding between [input] <-> [text]
var simpleBinding = bindTo(simpleForm, () => model, {
    'input.val': 'text',  // bind to user input
    'output.text': 'text'  // simple region that will react on user input
});
// This command will sync values from source to target (from model to view)
updateLayout(simpleBinding);
subscribeToChange(simpleBinding, () => {
    $('.simple .console').html(JSON.stringify(model));
});
// Just initialize console from default model state
$('.simple .console').html(JSON.stringify(model)); 
```

完整的解决方案[在这里](https://jsfiddle.net/rsjpa0o8/5/)

# hadoop - 关于 Hadoop 和 Hive 的基本知识

> ID：11354991
> 
> 赞同：1
> 
> 时间：2012-07-06T02:12:12.660
> 
> 标签：hadoop, hive

我最近开始使用 Hadoop。我通过 Hive 访问了一个名为 Checkout 的表。下面是数据到 HDFS 和其他信息的路径。那么如果我必须阅读以下三行，我可以获得什么信息？

```
 Path                                      Size           Record Count      Date Loaded
/sys/edw/dw_checkout_trans/snapshot/2012/07/04/00   1.13 TB       9,294,245,800      2012-07-05 07:26
/sys/edw/dw_checkout_trans/snapshot/2012/07/03/00   1.13 TB       9,290,477,963      2012-07-04 09:37
/sys/edw/dw_checkout_trans/snapshot/2012/07/02/00   1.12 TB       9,286,199,847      2012-07-03 07:08 
```

所以我的问题是——

*1) 首先，我们将数据加载到 HDFS，然后通过 Hive 查询它以获取结果？正确的？*

*2）其次，当您查看上述路径和其他内容时，我唯一感到困惑的是，当我将使用 Hive 进行查询时，我将从上述所有三个路径中获取数据？还是最近的在顶部？*

由于我对这些东西不熟悉，所以我遇到了很多问题。谁能解释我蜂巢从哪里获取数据？我们将所有数据存储在 HDFS 中，然后我们使用 Hive 或 Pig 从 HDFS 取回数据？如果有人能提供 Hadoop 和 Hive 的高级知识，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:59:03.477

我认为您需要了解 Hive 的本机表和 Hive 的外部表之间的区别。
Hive 原生表意味着你将数据加载到 Hive 中，它负责数据在 HDFS 中的存储方式。在这种情况下，我们通常不关心什么是目录结构。
Hive 外部表意味着我们将数据放在某个目录中（如果我们暂时忘记分区）并告诉 Hive - 这是表的数据。请这样对待。hive 使我们能够查询它，与其他外部或常规表连接。添加、删除数据等是我们的责任

# html - 为什么 Web Worker 不能直接调用函数？

> ID：11354992
> 
> 赞同：36
> 
> 时间：2012-07-06T02:12:13.880
> 
> 标签：html, web-worker

我们可以像这样在 HTML5 中使用 web worker：

```
var worker = new Worker('worker.js'); 
```

但是为什么我们不能调用这样的函数呢？

```
var worker = new Worker(function(){
    //do something
}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-06T02:19:20.153

这就是网络工作者的设计方式。他们必须有自己的外部 JS 文件和由该文件初始化的自己的环境。由于多线程冲突的原因，它们无法与您的常规全局 JS 空间共享环境。

不允许网络工作者直接访问您的全局变量的一个原因是，它需要两个环境之间的线程同步，这是不可用的（这会使事情变得非常复杂）。当 web worker 有自己独立的全局变量时，它们不能与主 JS 线程混淆，除非通过与主 JS 线程正确同步的消息队列。

也许有一天，更高级的 JS 程序员将能够使用传统的线程同步技术来共享对公共变量的访问，但目前两个线程之间的所有通信都必须通过消息队列，并且 web worker 无法访问主 Javascript 线程的环境。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-08T09:05:22.067

*之前有人问[过](https://stackoverflow.com/questions/10483320/teaching-worker-to-accept-code-instead-of-javascript-source-file)这个问题，但由于某种原因，OP决定删除它。*
我重新发布我的答案，以防有人需要一种从函数创建 Web 工作者的方法。

* * *

在[这篇文章](https://stackoverflow.com/a/10372280/938089?how-to-create-a-web-worker-from-a-string)中，展示了三种从任意字符串创建 Web 工作者的方法。在这个答案中，我使用的是第三种方法，因为它在所有环境中都受支持。

需要一个帮助文件：

```
// Worker-helper.js
self.onmessage = function(e) {
    self.onmessage = null; // Clean-up
    eval(e.data);
}; 
```

在您的实际 Worker 中，此帮助文件的使用如下：

```
// Create a Web Worker from a function, which fully runs in the scope of a new
//    Worker
function spawnWorker(func) {
    // Stringify the code. Example:  (function(){/*logic*/}).call(self);
    var code = '(' + func + ').call(self);';
    var worker = new Worker('Worker-helper.js');
    // Initialise worker
    worker.postMessage(code);
    return worker;
}

var worker = spawnWorker(function() {
    // This function runs in the context of a separate Worker
    self.onmessage = function(e) {
        // Example: Throw any messages back
        self.postMessage(e.data);
    };
    // etc..
});
worker.onmessage = function() {
    // logic ...
};
worker.postMessage('Example'); 
```

请注意，范围是严格分开的。变量只能使用 and 来回`worker.postMessage`传递`worker.onmessage`。所有消息都是[结构化的克隆](https://developer.mozilla.org/en/DOM/The_structured_clone_algorithm)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-14T03:13:56.150

这个答案可能有点晚了，但我写了一个库来简化网络工作者的使用，它可能适合 OP 的需要。看看：[https ://github.com/derekchiang/simple-worker](https://github.com/derekchiang/simple-worker)

它允许您执行以下操作：

```
SimpleWorker.run({
  func: intensiveFunction,
  args: [123456],
  success: function(res) {
    // do whatever you want
  },
  error: function(err) {
    // do whatever you want
  }
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-24T02:45:49.547

## WebWorkers 要点

WebWorkers 在**独立线程**中执行，因此**无法访问**您声明它们的主线程（反之亦然）。生成的范围是孤立的和受限的。这就是为什么，例如，您不能从工作人员内部访问 DOM。

* * *

## 与 WebWorkers 的通信

因为线程之间的通信是必要的，所以有一些机制可以完成它。标准的通信机制是通过消息，使用**worker.postMessage()**函数和 **worker.onMessage()**事件处理程序。

可以使用更高级的技术，包括 sharedArrayBuffers，但我的目标不是介绍它们。如果您对它们感兴趣，请阅读[此处](https://stackoverflow.com/questions/43038023/obtain-data-synchronously-from-webworker)。

* * *

## 线程函数

这就是标准带给我们的。然而，ES6 为我们提供了足够的工具来实现按需调用**的 Threaded-Function**。

**由于您可以从Blob**构建一个 Worker ，并且您的 Function 可以转换为它（使用**URL.createObjectURL**），您只需要在两个线程中实现某种*通信层*，为您处理消息，并获得一个自然的相互作用。

****考虑到一切都会异步发生，** **Promises**当然是你的朋友。**

 **应用这个理论，您可以轻松实现您描述的场景。

* * *

## 我个人的做法：ParallelFunction

我最近实现并发布了一个小型库，它完全符合您的描述。小于 2KB（缩小）。

它称为**ParallelFunction**，可在[github](https://github.com/colxi/parallel-function)、[npm](https://www.npmjs.com/package/parallel-function)和几个[CDN](https://cdn.rawgit.com/colxi/parallel-function/814e4698/parallel-function.js%22%3E%3C/script%3E)中使用。

如您所见，它完全符合您的要求：

```
// Your function...
let calculatePi = new ParallelFunction( function(n){
    // n determines the precision , and in consequence 
    // the computing time to complete      
    var v = 0;
    for(let i=1; i<=n; i+=4) v += ( 1/i ) - ( 1/(i+2) );
    return 4*v;
});

// Your async call...
calculatePi(1000000).then( r=> console.log(r) );

// if you are inside an async function you can use await...
( async function(){    
    let result = await calculatePi(1000000);
    console.log( result );
})()

// once you are done with it...
calculatePi.destroy(); 
```

初始化后，您可以根据需要多次调用您的函数。当您的函数完成执行时，将返回一个**Promise并解决。**

顺便说一句，存在许多其他库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-18T12:51:53.450

只需使用我的小插件[https://github.com/zevero/worker-create](https://github.com/zevero/worker-create)

做

```
var worker_url = Worker.create(function(e){
  self.postMessage('Example post from Worker'); //your code here
});
var worker = new Worker(worker_url); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-30T20:46:55.433

虽然它不是最佳的并且在评论中提到过，但如果您的浏览器支持 Web Workers 的 blobURL，则不需要外部文件。HTML5Rocks 是我代码的[灵感来源：](https://www.html5rocks.com/en/tutorials/workers/basics/)

```
function sample(e)
{
    postMessage(sample_dependency());
}

function sample_dependency()
{
    return "BlobURLs rock!";
}

var blob = new Blob(["onmessage = " + sample + "\n" + sample_dependency]);
var blobURL = window.URL.createObjectURL(blob);
var worker = new Worker(blobURL);

worker.onmessage = function(e)
{
    console.log(e.data);
};

worker.postMessage(""); 
```

注意事项：

*   Blob 工作人员将无法成功使用相对 URL。HTML5Rocks 链接涵盖了这一点，但它不是原始问题的一部分。

*   人们报告了将 Blob URL 与 Web Worker 一起使用的问题。我已经在 IE11（FCU 附带的任何版本）、MS Edge 41.16299（Fall Creator's Update）、Firefox 57 和 Chrome 62 上进行了尝试。不知道是否支持 Safari。我测试过的那些已经奏效了。

*   请注意，Blob 构造函数调用中的“sample”和“sample_dependency”引用隐式调用`Function.prototype.toString()`as `sample.toString()`and ，这与调用and`sample_dependency.toString()`非常不同。`toString(sample)``toString(sample_dependency)`

发布此内容是因为它是在搜索如何使用 Web Worker 而无需请求其他文件时出现的第一个 stackoverflow。

看看 Zevero 的答案，他的 repo 中的代码看起来很相似。如果您更喜欢干净的包装器，这大概就是他的代码所做的。

最后——我是这里的菜鸟，所以任何/所有的更正都值得赞赏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T02:20:21.013

按照设计，web worker 是多线程的，javascript 是单线程的“ `*”多个脚本不能同时运行。`

 `参考：[http ://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)`**

# javascript - 为什么需要 if(0) 和 if(1)

> ID：11354995
> 
> 赞同：5
> 
> 时间：2012-07-06T02:12:37.450
> 
> 标签：javascript, arcgis

查看这篇文章以获取 ArcGIS 3.0 for javascript 中的代码。[https://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.0](https://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.0)

里面有“if(0)”和“if(1)”，为什么需要这个？if(0) 不是永远为假，if(1) 不是永远为真吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:03:22.260

Dojo 构建工具就是这样做的（在给定的构建选项下），但不是为了混淆。如果您查看未构建的 dojo.js 和相应的构建的 dojo.js.uncompressed.js 文件，您可以看到构建工具正在用硬连线的真/假测试替换 has("somefeature") 调用。如前所述，这可以并且确实会创建无法访问的代码。为什么要这样做？因为这样一个智能优化编译器（例如 Google Closure）可以修剪掉所有的死代码，从而产生一个更小的文件（有时更小......这就是重点）。

从概念上讲，它是这样的：

1.  非构建代码具有动态评估的 has() 调用的“厨房水槽”。
2.  您可以使用选项来配置构建配置文件，这些选项指示您在自定义构建中需要/不想要什么。
3.  构建过程用硬连线的真/假测试替换动态 has() 调用 [用于相应的构建选项]（或者更好的查看方式是输入/输出测试）。
4.  闭包编译器在缩小期间删除“输出”代码。

查看当前的“Dojo Build System”文档和[http://jamesthom.as/blog/2012/08/03/finding-nano/](http://jamesthom.as/blog/2012/08/03/finding-nano/)了解更多信息。此外，[这里是这个过程的一个很好的低级/代码级描述](http://mail.dojotoolkit.org/pipermail/dojo-checkins/2011-June/090184.html)。

PS“if(0)/if(1)”并不是真正的混淆......有点相反。如果有人想混淆，他们更有可能有“if(a)...if(b)...if(c)...”，其中 vars 设置得很远很远。然而，minifiers 产生的混淆代码比它们自己产生的更多。在通过 Closure 运行之前和之后检查 dojo.js 源代码；最终产品与原始产品几乎没有相似之处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:16:54.763

是的，`0`永远是假的，`1`永远是真的。

但是，正如您在代码中看到的那样，该公司认为这是他们的商业机密：

```
COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions. 
```

混淆此类代码是很常见的（即使其更难阅读）。其中一种方法是插入无用的语句，比如你已经看到的`if(1)`and 。`if(0)`

[您可以在此处](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)阅读有关混淆的更多信息。

另一种可能的解释是，这些`if`语句用于代替尚未实现的真实逻辑，正如@mvbl fst 提到的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T02:19:08.163

这可以用来代替实际逻辑尚未实现的真实 if() 语句。正如@houbysoft 提到的，它们被解释为布尔值假和真。因此，他们同时使用 false 或 true 来确保内部的语句始终执行（或不执行），并打算稍后添加实际检查。

# mysql - 将所有 UTF8 字符标准化为最标准的格式

> ID：11354999
> 
> 赞同：2
> 
> 时间：2012-07-06T02:13:13.567
> 
> 标签：mysql, vb.net, collation

我使用了这段代码：

```
Public Function RemoveDiacritics(ByVal s As String) As String
    Dim normalizedString As String
    Dim stringBuilder As New StringBuilder
    normalizedString = s.Normalize(NormalizationForm.FormKD)
    Dim i As Integer
    Dim c As Char
    For i = 0 To normalizedString.Length - 1
        c = normalizedString(i)
        If CharUnicodeInfo.GetUnicodeCategory(c) <> UnicodeCategory.NonSpacingMark Then
            stringBuilder.Append(c)
        End If
    Next
    Return stringBuilder.ToString()
End Function 
```

这个很棒的功能大部分时间都有效（我忘记了我在哪里复制它并对其进行了一些修改，如果你写了请告诉我，以便我可以信任）。

在 500k 字中，以下内容仍流经此过滤器：

```
٥ (4)  <------->  5 (20321)
​​​ (4)  <------->  ​ (97)
つ (4)  <------->  ツ (17)
≈ (1)  <------->  ​≈ (1)
​◦☃β (1)  <------->  ◦☃β (2)
​☀ (1)  <------->  ☀ (14)
​​​☆ (1)  <------->  ☆ (32)
​​​​​​★☆ (1)  <------->  ★☆ (6)
​​​​☺ (2)  <------->  ☺ (266)
​☺ (5)  <------->  ☺ (266)
​♏ (3)  <------->  ♏ (19)
♚​ (2)  <------->  ♚ (33)
♚​​​​​ (1)  <------->  ♚ (33)
​​​​♧ (1)  <------->  ♧ (2)
​✽ (1)  <------->  ✽ (26)
١٥ (1)  <------->  15 (8862)
☺​ (1)  <------->  ☺ (266)
➎ (1)  <------->  5 (20321)
٥٠ (1)  <------->  50 (4155)
๙ (2)  <------->  9 (13777)
​© (1)  <------->  © (173)
​ (4)  <------->   (50)
​​© (1)  <------->  © (173)
⌣​ (1)  <------->  ⌣ (120)
oe (7)  <------->  œ (7)
​​β (1)  <------->  β (19)
​​☺ (2)  <------->  ☺ (266)
​з (1)  <------->  з (16)
​​ (17)  <------->  ​ (97)
丸ノ内店 (2)  <------->  丸の内店 (3)
❷ (1)  <------->  2 (40100)
ˆ⌣ˆ​​​​ (3)  <------->  ˆ⌣ˆ (45)
βενιζελου (1)  <------->  βενίζελου (45)
​ƪ (5)  <------->  ƪ (84)
​​​​ (3)  <------->  ​ (97)
❹❻ (1)  <------->  46 (2856)
​:þ (1)  <------->  :þ (3)
ラーメン (19)  <------->  らーめん (27)
​​​​​ (1)  <------->  ​ (97)
٩ (3)  <------->  9 (13777)
۶ (3)  <------->  6 (16464)
​♥ (4)  <------->  ♥ (18)
​’ (1)  <------->  ’ (146344)
•ˆ⌣ˆ• (7)  <------->  •ˆ⌣ˆ​​​​• (7)
つ (4)  <------->  っ (6)
​​​&gt; (1)  <------->  > (160)
​​♌ (2)  <------->  ♌ (8)
登美ヶ丘店 (1)  <------->  登美ケ丘店 (1)
​ (2)  <------->   (3)
​” (5)  <------->  ” (4389)
⌣»··✽​ (1)  <------->  ⌣»··✽ (2)
​​​​​​​ (1)  <------->  ​ (97)
トラへラント (1)  <------->  トラヘラント (3)
☆​ (1)  <------->  ☆ (32)
ԅ҈ (1)  <------->  ԅ (3)
√ (1)  <------->  ​√ (1)
ί (4)  <------->  ι (15)
​° (2)  <------->  ° (183)
​​° (1)  <------->  ° (183)
γαλατσι (1)  <------->  γαλατσί (2)
 (2)  <------->  ​ (97)
πατησιων (2)  <------->  πατησίων (12)
​​☎ (1)  <------->  ☎ (18)
ッ (1)  <------->  つ (4)
​┌п┐​ (1)  <------->  ┌п┐ (2)
​◦’⌣’◦ (1)  <------->  ◦’⌣’◦ (15)
➋ (7)  <------->  2 (40100)
ノ (4)  <------->  の (7)
えひすヒル (1)  <------->  エヒスヒル (1)
“​​ (1)  <------->  “ (5962)
​​ƪ (3)  <------->  ƪ (84)
​ツ (1)  <------->  つ (4)
​&gt; (1)  <------->  > (160)
​​ː (1)  <------->  ​ː (1)
​ː (1)  <------->  ː (2)
@​​ (1)  <------->  @ (11656)
‹ (1)  <------->  ​‹ (1)
〇 (1)  <------->  0 (431)
я۝ (1)  <------->  я (74)
新百合ケ丘店 (2)  <------->  新百合ヶ丘店 (4)
ψυχικο (1)  <------->  ψυχίκο (1)
•​”• (2)  <------->  •”• (4)
​◦ˆ▽ˆ◦ (1)  <------->  ◦ˆ▽ˆ◦ (1)
┏ (1)  <------->  ​┏ (1)
​​​ʀ (2)  <------->  ʀ (20)
​​​​​​ (1)  <------->  ​ (97)
​امين (1)  <------->  امين (2)
١٥٧٤ (1)  <------->  1574 (16)
➌ (1)  <------->  3 (27369)
ʃ​ (1)  <------->  ʃ (70)
๑ (2)  <------->  1 (57313)
εγνατια (2)  <------->  εγνατία (2)
​☎ (1)  <------->  ☎ (18)
ƾ (1)  <------->  ts (63)
‬ (1)  <------->  ​ (97)
ƍ (2)  <------->  zw (2)
κειριαδων (1)  <------->  κείρίαδων (1)
ακταιον (1)  <------->  ακταίον (2)
αστερια (1)  <------->  αστερία (4)
αστυνομικο (1)  <------->  αστυνομίκο (3)
αττικον (1)  <------->  αττίκον (1)
αφοι (1)  <------->  αφοί (6)
φιλιασ (1)  <------->  φίλίασ (3)
γευστικον (1)  <------->  γευστίκον (2)
δικαστικο (1)  <------->  δίκαστίκο (1)
χαιδαριου (1)  <------->  χαίδαρίου (1)
θεσνίκησ (1)  <------->  θεσνικησ (1)
εκδοσεισ (1)  <------->  εκδοσείσ (1)
σια (1)  <------->  σία (3)
εστια (1)  <------->  εστία (3)
μηχανικων (1)  <------->  μηχανίκων (5)
ηλιοσ (1)  <------->  ηλίοσ (2)
αγιου (1)  <------->  αγίου (32)
γεωργιου (2)  <------->  γεωργίου (18)
ελευθεριο (1)  <------->  ελευθερίο (5)
επιπλα (1)  <------->  επίπλα (2)
ίεροσ (1)  <------->  ιεροσ (9)
σταδιου (1)  <------->  σταδίου (5)
μεραρχιασ (1)  <------->  μεραρχίασ (2)
εκπαιδευσησ (1)  <------->  εκπαίδευσησ (3)
θεσσαλονικησ (1)  <------->  θεσσαλονίκησ (13)
λαμιασ (1)  <------->  λαμίασ (4)
κτίρίο (1)  <------->  κτιριο (1)
ατει (1)  <------->  ατεί (1)
κωνσταντινιδησ (1)  <------->  κωνσταντίνίδησ (1)
μεσογειων (1)  <------->  μεσογείων (15)
λαικη (1)  <------->  λαίκη (6)
χωριου (1)  <------->  χωρίου (2)
πλατεια (2)  <------->  πλατεία (113)
πολυτεχνειου (1)  <------->  πολυτεχνείου (13)
ναυτικοσ (1)  <------->  ναυτίκοσ (3)
ομιλοσ (1)  <------->  ομίλοσ (7)
νικοσ (1)  <------->  νίκοσ (2)
σίδ (1)  <------->  σιδ (1)
παιδικη (1)  <------->  παίδίκη (11)
παπαγίαννη (1)  <------->  παπαγιαννη (1)
παραδοσίακη (1)  <------->  παραδοσιακη (1)
τρίων (1)  <------->  τριων (1)
κομμωτηριο (1)  <------->  κομμωτηρίο (8)
σπιτακι (1)  <------->  σπίτακί (4)
σπιτι (2)  <------->  σπίτί (16)
φιλων (1)  <------->  φίλων (3)
για (1)  <------->  γία (2)
ταμείο (1)  <------->  ταμειο (1)
τζακί (1)  <------->  τζακι (1)
ηπειρου (1)  <------->  ηπείρου (3)
καραγιωργη (1)  <------->  καραγίωργη (1)
χωριατικο (1)  <------->  χωρίατίκο (1)
​السلام (1)  <------->  السلام (3)
٢ (1)  <------->  2 (40100)
٣٠٣ (1)  <------->  303 (406)
٥٦ (2)  <------->  56 (2242)
٢١ (1)  <------->  21 (8533)
٤ (1)  <------->  4 (19623)
١٩٥ (1)  <------->  195 (308)
٥٥١ (1)  <------->  551 (99)
٩٠ (1)  <------->  90 (1296)
٣ (1)  <------->  3 (27369)
๑๑ (1)  <------->  11 (11482)
๖ (1)  <------->  6 (16464)
๕๐ (1)  <------->  50 (4155)
๒๗ (1)  <------->  27 (4895)
๘๕ (1)  <------->  85 (1249)
๒ (2)  <------->  2 (40100)
๓ (2)  <------->  3 (27369)
ああ博多人情 (1)  <------->  あぁ博多人情 (1)
アタシンチ (1)  <------->  アタシんち (1)
アタン (1)  <------->  あたん (1)
ト (5)  <------->  と (5)
ヒッツエリア (1)  <------->  ヒッツェリア (3)
イオンモール奈良登美ケ丘 (1)  <------->  イオンモール奈良登美ヶ丘 (2)
イスミヤ (1)  <------->  いすみや (1)
ウインターラント (1)  <------->  ウィンターラント (2)
ウエルシア (1)  <------->  ウェルシア (2)
エヒス (1)  <------->  えひす (1)
サクラ (1)  <------->  さくら (2)
さんくす (1)  <------->  サンクス (50)
百合ヶ丘 (1)  <------->  百合ケ丘 (1)
シェル (1)  <------->  シエル (1)
茅ケ崎店 (2)  <------->  茅ヶ崎店 (4)
堀の内 (2)  <------->  堀ノ内 (6)
たいわ (1)  <------->  タイワ (1)
ツタヤ (1)  <------->  つたや (1)
トラック (1)  <------->  とらっく (3)
なないろ (1)  <------->  ナナイロ (1)
新百合ヶ丘 (2)  <------->  新百合ケ丘 (3)
ひすとろ (1)  <------->  ヒストロ (6)
富ケ谷 (1)  <------->  富ヶ谷 (3)
御幸ヶ原町 (1)  <------->  御幸ケ原町 (2)
ホンハトゥル (1)  <------->  ホンハトウル (2)
マルシケ (1)  <------->  まるしけ (1)
マルヤ (1)  <------->  まるや (2)
つるや (1)  <------->  ツルヤ (2)
くりえいと (2)  <------->  クリエイト (7)
ゆう (1)  <------->  ユウ (1)
ハン (1)  <------->  はん (1)
ふぅ (1)  <------->  ふう (2)
らーめん専門店 (1)  <------->  ラーメン専門店 (2)
あんと (1)  <------->  アント (1)
らいふ (1)  <------->  ライフ (5)
能ケ谷 (1)  <------->  能ヶ谷 (2)
新百合ケ丘エルミロート店 (1)  <------->  新百合ヶ丘エルミロート店 (3)
れすとらん (1)  <------->  レストラン (15)
中華ソハ (1)  <------->  中華そは (10)
串かつ (2)  <------->  串カツ (3)
九州らーめん (1)  <------->  九州ラーメン (1)
シン (1)  <------->  しん (1)
八ケ崎 (1)  <------->  八ヶ崎 (4)
まつもと (1)  <------->  マツモト (1)
向ケ丘遊園駅 (1)  <------->  向ヶ丘遊園駅 (1)
月見ヶ丘 (2)  <------->  月見ケ丘 (3)
日ノ出町 (1)  <------->  日の出町 (1)
幡ケ谷 (1)  <------->  幡ヶ谷 (7)
江ノ島店 (1)  <------->  江の島店 (1)
さくらラウンシ (1)  <------->  サクララウンシ (3)
大イチョウ (1)  <------->  大いちょう (1)
イチョウ (1)  <------->  いちょう (1)
さとう (1)  <------->  サトウ (2)
いちょう並木 (1)  <------->  イチョウ並木 (1)
横浜らーめん (1)  <------->  横浜ラーメン (1)
サスケ (1)  <------->  さすけ (1)
馬見ケ崎 (1)  <------->  馬見ヶ崎 (2)
サカイ (1)  <------->  さかい (2)
保土ケ谷区天王町 (1)  <------->  保土ヶ谷区天王町 (1)
樋ノ口 (1)  <------->  樋の口 (2)
ミンミン (1)  <------->  みんみん (2)
関ケ島 (1)  <------->  関ヶ島 (1)
ふらいむ (1)  <------->  フライム (1)
チョコリ (1)  <------->  ちょこり (1)
やまと (1)  <------->  ヤマト (2)
すわん (1)  <------->  スワン (1)
中ムラ (1)  <------->  中むら (1) 
```

我想确保这不会流过。假设我想将所有ム转换为む

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:07:48.677

有一些资源可能对您有用。你可以在[这里](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)和[这里](http://www.joelonsoftware.com/articles/Unicode.html)找到它们。第一个是一个可能重复的问题，其中包含更多功能，可以帮助您找出问题。第二个是我在谷歌搜索你的问题时偶然发现的一篇文章。结果证明这是一本极好的读物。

更实用的是：

```
Public Function RemoveAccentMarks(ByVal s As String) As String
   Dim stringBuilder As New StringBuilder
   Dim c As Char
   For Each c In s
       Dim v As Char = Chr(Asc(c) And &H7F)
       stringBuilder.Append(v)
   Next

   Return stringBuilder.ToString
End Function 
```

（[来源](http://weblogs.asp.net/fmarguerie/archive/2006/10/30/removing-diacritics-accents-from-strings.aspx)——你需要滚动到底部，鲍勃·斯特伦兹声称这对他有用！）

希望有帮助，我很喜欢这个问题（upvote）。这很有趣，内容丰富且有趣！

-sf