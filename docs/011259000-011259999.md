# StackOverflow 问答 11259000-11259999

# symfony - 如何从 symfony2 中的 config.yml 访问“web”文件夹

> ID：11259003
> 
> 赞同：4
> 
> 时间：2012-06-29T09:08:40.350
> 
> 标签：symfony

如何从 symfony2 应用程序中的 config.yml 访问“web”文件夹？我已经尝试过 %web%、%base_dir%、%asset_dir% 并且遇到了砖墙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T10:38:13.920

在`config.yml`你可以使用`%kernel.root_dir%/../web`.

如果您想要一个方便的快捷方式，`parameters.ini`您可以定义如下内容：

```
web_dir = %kernel.root_dir%/../web 
```

然后在`config.yml`你将使用`%web_dir%`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:58:22.730

您可以使用 twig 的 assets() 函数访问您的 Web 目录中的资源。

```
<script src="{{ asset('bundles/yourbundle/js/jquery-1.7.2.min.js') }}" type="text/javascript"></script> 
```

有关更多详细信息，请参阅[http://symfony.com/doc/current/book/templating.html#linking-to-assets](http://symfony.com/doc/current/book/templating.html#linking-to-assets)。

我想你会想要避免在你的配置/参数文件中设置本地路径，尽量让一切保持动态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T08:10:58.293

在 Symfony 3.3 中，我们引入了许多更改和简化，为将于 2017 年 11 月发布的迷人的 Symfony 4.0 版本做好准备。

其中一些更改在技术上很小，但会对您的应用程序产生深远的影响。在 Symfony 应用程序中，众所周知的 Kernel 类的 getRootDir() 方法及其对应的 kernel.root_dir 参数具有误导性。

它们返回存储应用程序内核（通常是 AppKernel.php）的路径。在 Symfony 2 和 3 中，这通常是 app/ 目录，所以通常使用 %kernel.root_dir%/../var/ 或 %kernel.root_dir%/../web/ 之类的表达式。在 Symfony 4 中，内核类已被移至 src/ 目录，因此前面的表达式不会中断。

然而，鉴于大多数时候 getRootDir() 用于获取项目根目录，在 Symfony 3.3 中，我们决定向 Kernel 类添加一个名为 getProjectDir() 的新方法，它会为您提供准确的结果。

这种新方法通过查找包含 composer.json 文件的第一个目录来查找项目根目录，该目录从存储内核的目录开始，一直到找到 composer.json 为止。

实际上，这意味着您的应用程序可以简化大多数或所有使用 %kernel.root_dir% 的表达式。例如：使用 %kernel.project_dir%/web/ 而不是 %kernel.root_dir%/../web/。

**来自：** [Symfony 3.3 中的新功能：获取项目根目录的更简单方法](https://symfony.com/blog/new-in-symfony-3-3-a-simpler-way-to-get-the-project-root-directory)

# javascript - 如何在 JQuery 函数中将事件作为参数传递

> ID：11259006
> 
> 赞同：10
> 
> 时间：2012-06-29T09:08:47.963
> 
> 标签：javascript, jquery, html

嗨，我正在学习 JQuery，并且我编写了一个小函数，我在其中附加了一个带有按钮单击事件的函数。

这是 HTML 的头部元素

```
<script type="text/javascript">

    $(pageLoaded); 

    function pageLoaded() 
    {
        $("#Button1").bind("click", 
                            { key1: "value1", key2: "value2" }, 
                            function buttonClick(event) 
                            {
                               $("#displayArea").text(event.data.key1);
                            }
                            );
    }                    

</script> 
```

这是 HTML 的正文

```
<input id="Button1" type="button" value="button" />

<div id = "displayArea" style="border:2px solid black; width:300px; height:200px"> 
```

这段代码工作正常。但是当我尝试在 anonymus 方法之外编写 buttonClick 函数时，它不再起作用了。

我试着这样称呼它：

```
$("#Button1").bind("click", 
                   { key1: "value1", key2: "value2" }, 
                   buttonClick(event));

function buttonClick(var event) 
{
      $("#displayArea").text(event.data.key1);
} 
```

这是行不通的。将事件作为参数传递时我是否犯了一些错误？不使用匿名方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T09:16:16.637

您需要将 a`function reference`作为点击处理程序传递，但是您在此处执行的操作

```
$("#Button1").bind("click", 
                   { key1: "value1", key2: "value2" }, 
                   buttonClick(event)); 
```

立即调用`buttonClick(event)`和 which`return undefined`并将其设置为`click handler`. 您必须传递一个函数引用`buttonClick`，您将自动获得事件参数（jQuery 将在调用处理程序时发送它）。

**完整代码：**

```
$(function(){
   $("#Button1").bind("click", 
                   { key1: "value1", key2: "value2" }, 
                   buttonClick);

   function buttonClick(event) 
    {
      $("#displayArea").text(event.data.key1);
    } ​
}); 
```

**演示：http:** [//jsfiddle.net/joycse06/cjc9r/](http://jsfiddle.net/joycse06/cjc9r/)

* * *

**更新（基于@Tadeck 的评论）：**

如果您`function expression`这样使用，您的代码将正常工作

```
var buttonClick = function(event){
    $("#displayArea").text(event.data.key1);
}; 
```

你必须把它放在它上面`first use`。在这种情况下之前

```
$("#Button1").bind("click", ... 
```

因为`function expressions`不在`hoisted`当前范围的顶部，例如`function declaration`. 所以你可以使用它们`only after`。`expression``interpreted``JS interpreter`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:17:27.323

您的解决方案中有两个错误，您必须更改

`var`仅用于定义变量而不是函数的参数

```
function buttonClick(event)
{
    $("#displayArea").text(event.data.key1);
} 
```

另一件事是您分配事件处理程序的方式。您正在分配的返回值`buttonClick(event)`将是`undefined`. 只需将函数本身传递给它。该`event`对象将由 jQuery 自动传递

```
$("#Button1").bind("click", 
                   { key1: "value1", key2: "value2" }, 
                   buttonClick); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-16T08:12:38.093

你可以这样做：

```
$('input[name="pin-code"], input[name="work-pin"]').on({
        keypress: function(e) {
            numbersOnly(e);   //function
        }
    });

function numbersOnly(e) {    //function
    e.preventDefault();
    if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
       return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-07T19:04:07.597

这是我传递整个点击事件的方式：

```
$('#body').click({event}, onClickMethod);

function onClickMethod(evt){
    console.log("Click evt:", evt);
} 
```

# windows-phone-7 - 如何将 RGB 值转换为颜色对象？

> ID：11259010
> 
> 赞同：0
> 
> 时间：2012-06-29T09:09:10.770
> 
> 标签：windows-phone-7, colors, rgb

我得到一些颜色值，如#FF6100。现在我需要隐蔽#FF6100 到我的 Windows 手机应用程序中的颜色对象？有什么建议吗？德克萨斯州

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:14:41.787

像这样的东西会为你做这项工作：

```
public static Color GetColorFromHexString(string s)
{

    byte a = System.Convert.ToByte("FF", 16);//Alpha should be 255
    byte r = System.Convert.ToByte(s.Substring(0, 2), 16);
    byte g = System.Convert.ToByte(s.Substring(2, 2), 16);
    byte b = System.Convert.ToByte(s.Substring(4, 2), 16);
    return Color.FromArgb(a, r, g, b);
} 
```

HTH，鲁珀特。

# iphone - 在另一个视图上添加导航栏项目“返回”

> ID：11259011
> 
> 赞同：0
> 
> 时间：2012-06-29T09:09:23.147
> 
> 标签：iphone, xcode, uinavigationbar

我有一个视图“MainView”，它有一个没有任何导航控制器的导航栏，而且，它有一个没有标签栏控制器的标签栏。每个标签栏项目都有自己的视图控制器。每次我单击选项卡栏项目时，它只会删除当前视图控制器并插入另一个视图控制器。

然后，某个标签栏项目有一个视图“listview”，这个视图中有一个uitableview，当我点击uitableview中的一个项目时，它会删除当前视图并添加另一个子视图“detailview”。但这一次，我想在当前视图上添加一个导航按钮，以便我可以返回“listview”。

如何从当前视图访问“MainView”上的导航栏？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T09:41:15.777

It sounds like you are making the mistake of using only views when you should be making correct use of view controllers. If you are a new developer this is especially important to get right.

Your login screen should be a view controller, e.g. `MyLoginViewController`. This can initially be the `rootViewController` of your main window, or you can present it modally over your main content when the app launches.

After logging in, you can either replace the window's `rootViewController` with your main view controller, or dismiss the login screen if you presented it modally.

Your main view controller should be a `UITabBarController`, and if you want push/pop navigation with back buttons etc. you need to put a `UINavigationController` inside each tab, and then push the top-most view controller onto that.

This can all be done very easily using interface builder as well.

# c# - 从 IWpfTextView、ITextBuffer 或 ITextDocument 获取 IVsExpansion 对象

> ID：11259014
> 
> 赞同：0
> 
> 时间：2012-06-29T09:09:39.367
> 
> 标签：c#, wpf, visual-studio-2010, code-snippets, visual-studio-extensions

我想从扩展包中的代码将自定义片段插入 XML 文件。

当我有 IWpfTextView、ITextBuffer 或 ITextDocument 时，有人知道如何获取 IVsExpansion 对象吗？

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.textmanager.interop.ivsexpansion.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.textmanager.interop.ivsexpansion.aspx)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:09:01.413

您前几天在 MSDN VS 可扩展性论坛上也发过这个吗？如果是这样，我用一种可能的方法回答了那里（我没有尝试过，我不是编辑开发者）：

[http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/c43699d3-4ed1-4a68-b1c8-d207efc98a04](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/c43699d3-4ed1-4a68-b1c8-d207efc98a04)

简而言之，我相信您可以使用 IVsEditorAdapterFactoryService 从 ITextBuffer -> IVsTextBuffer 进行映射，并且 MSDN 说 IVsExpansion 是由实现 IVsTextBuffer 的同一对象实现的，因此如果您将 IVsTextBuffer 转换为 IVsExpansion 它应该会成功。

瑞安

# python - 如何使用 django 呈现带有复选框的复选框列表？

> ID：11259018
> 
> 赞同：-1
> 
> 时间：2012-06-29T09:09:50.990
> 
> 标签：python, django, forms, model

我想用 django 创建这个表单；

```
[ ] parent_checkbox1  
  [ ] sub_cb1_pcb1  [ ] sub_cb2_pcb1
...
[ ] parent_checkbox10
  [ ] sub_cb1_pcb10  [ ] sub_cb2_pcb10 
```

我可以使用以下方式呈现父复选框：

```
parent = forms.MultipleChoiceField(label="Parent",
                                       widget=forms.CheckboxSelectMultiple)
self.fields['parent'].choices = 'list of choices' 
```

但是如何将 sub_checkboxes 添加到父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:24:34.730

尝试改用[jQuery dynatree](http://code.google.com/p/dynatree/)插件。我想编写一个自定义小部件，但发现这个小部件更容易安装和维护。

为此，您需要输出递归 HTML：

```
<div id="tree">
   <ul>
      <li id="1">Element 1</li>
      <li id="2">Element 2
          <ul> ... </ul>
      </li>
   </ul>
</div> 
```

安装js文件并调用jquery方法：

```
$('#tree').dynatree(parameters); 
```

# google-app-engine - 实体化实体

> ID：11259022
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:00.193
> 
> 标签：google-app-engine, objectify

我可以将对象化实体（即由 注释的类`@Entity`）传递给接受的函数`com.google.appengine.api.datastore.Entity`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:47:15.860

不，Java 是一种类型化语言。您只能将 com.google.appengine.api.datastore.Entity 的子类传递给接受 com.google.appengine.api.datastore.Entity 的函数。其他任何东西都不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:37:24.500

不，实体注释不会更改对象的类型。objectify 中没有“getProperty”，但您当然可以使用反射或公共 BeanUtils 来做类似的事情。

# asp.net - 在asp.net中响应用户请求时如何避免阻塞IO操作

> ID：11259029
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:16.110
> 
> 标签：asp.net, wcf, performance

我正在处理由 asp.net/IIS 托管的 WCF 项目。此 WCF 服务有一个名为 SearchImage 的方法，如下所示：

```
string SearchImage(string query)
{
  //call bing service to get the images
  //it is very time-consuming
  return result.
} 
```

对 bing 服务的调用非常耗时。这会对服务产生很大影响。异步调用在这里没有帮助：

```
string SearchImage(string query)
{
  //async call bing service to get the images
  WaitForComplete();
  return result.
} 
```

你可以看到，我仍然需要等到 bing 返回结果。

我的问题是，有什么技术可以避免这种块 IO 问题吗？理想情况下，我想告诉 asp.net 在 bing 结果返回时做出响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:36:51.400

我曾经做过一个项目，我需要通过递归导航到所有内部链接来解析网站结构。我使用一个普通的 ASP.NET 应用程序作为前端和一个 WCF 服务（不记得它是托管在 IIS 中还是作为 Windows 服务）来完成实际工作。

由于遍历所有链接的过程可能需要很长时间才能完成（另外我需要定期通知用户进度）我实现了一个异步服务操作（[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms731177.aspx)）来执行实际解析（称为服务器端）和用于池化任务状态的同步任务（使用 AJAX 定期在客户端调用）。

此 SO 问题包含有关该主题的一些有用链接：[如何异步调用我的 WCF 服务？](https://stackoverflow.com/questions/400798/how-to-make-a-call-to-my-wcf-service-asynchronous)

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:18:52.580

不，你要做的是返回一个完整的网页，嵌入 javascript（jquery 很流行，虽然 atlas 可以更好地与 asp.net 集成），它将在页面已经呈现后执行异步调用，然后替换相关包含您加载的内容的 DOM 部分（通常用 CSS id 标记）。这样，用户会看到除了 throbber 之外的所有内容，一旦准备好，它将被最终的文本、图像或您正在加载的任何内容替换。

您可以将异步调用转到您的服务器，这样您就可以在服务器端进行额外的按摩，但这很少值得付出努力。Javascript 几乎可以处理您需要的任何按摩。

# javascript - 来自不同文件的 Javascript GetElementById

> ID：11259033
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:24.187
> 
> 标签：javascript

我有一个`href`链接到第二页的网页。第二页有一个 SWF。我希望`a`第一个网页中的标签能够`GetElementById`使用 SWF 对象。这可能吗？

编辑：我需要做的：我有一个垂直对齐的 2 个框架的主页。第二个框架根据一些按钮点击加载不同的页面。一个这样的页面是 swf。单击一个按钮时，我希望页面重定向到 swf 页面并将参数发送到 swf，这就是我需要 GetElementById 的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:24:31.963

您喜欢将参数传递给另一个 HTML 文档。您的选择是：

*   添加请求参数并在另一个页面中评估它（javascript可以访问URL并可以解析它。缺点（可能）-服务器端看到这个参数）
*   添加一些信息作为锚点 - 目标页面上的 javascript 可以对此进行评估并执行任何必要的操作。服务器看不到这个，搜索引擎也不会评估这个（通常）

# image - 基于数据库id绑定图片

> ID：11259034
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:33.170
> 
> 标签：image, windows-phone-7, binding

我正在使用 SQLite，我有一个表，其中包含带有字段的表：`id`和`name`

在我的项目中，我有文件夹 graphics/pictures 并且我的图片被命名为：1.png、2.png 等。

我将所有记录保存到 ObservableCollection 中，然后将其设置为我的 ListBox 的源。

是否有机会根据表中的 id 和文件夹中图片的名称将这些照片绑定到列表中的每个项目？

我已经尝试过类似的东西`Source="graphic/pictures/{Binding id}.png`，但这似乎是个坏方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:20:42.650

我不确定它是否有效（并且现在无法尝试）但您可以使用 StringFormat （[http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)）或返回完整路径的转换器 ( [http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx )](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:34:58.707

尝试将图像作为字符串的类

```
 public class Img
       {
        public string thumb { get; set; }
       } 
```

在代码中：

```
 for (i = 0; i < observablecollection.Length; i++)
    {
    Img sqlimage = new Img()
    {
    thumb = "/PhoneApp1;component/images/" + observablecollection[i].Id + ".jpg"
    };

    listbox1.Items.Add(sqlimage);
    }

  <ListBox  Name="listBox1" Width="Auto" HorizontalAlignment="Left" ItemsSource="{Binding Img}" DataContext="{Binding}"  HorizontalContentAlignment="Left" VerticalContentAlignment="Stretch" >
      <ListBox.ItemTemplate>
          <DataTemplate>
<StackPanel Name="ContentGrid" Grid.Row="0" Height="Auto" Orientation="Vertical" Width="Auto">
   <Image Height="165" HorizontalAlignment="Left" VerticalAlignment="Top" Width="175" Source="{Binding thumb}"/>
</StackPanel>
  </DataTemplate>
     </ListBox.ItemTemplate>
       </ListBox> 
```

# c# - .NET 远程处理约定

> ID：11259035
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:33.593
> 
> 标签：c#, .net, winforms, network-programming, remoting

我有一个使用 .NET Remoting 建立与客户端的连接的服务器端代码。通常，我知道使用在客户端和服务器之间传递对象的接口是常态，并且是一种更安全的选择，但是对于我正在建立的简单通信，我认为不需要麻烦地定义必要的类和接口。

所以对于下面的代码，因为我只是向客户端返回一个字符串，我觉得没有必要，但有些人可能会说不然，所以我在这里发布我的问题。我应该遵循一般惯例还是坚持我正在做的事情？下面显示的代码也是建立远程服务器的正确方法吗？

（不要问我为什么用remoting而不是WCF。我老板专门要求remoting，我也不知道为什么。）

```
class HttpServer
{

    [STAThread]
    public static Boolean startService()
    {
        HttpChannel channel = new HttpChannel(80);

        ChannelServices.RegisterChannel(channel);
        Type ddcServerType = Type.GetType("DDCEngine.DDCServer");
        RemotingConfiguration.RegisterWellKnownServiceType(ddcServerType, "DDCServer", WellKnownObjectMode.Singleton);
        return true;
    }
}

public class DDCServer : MarshalByRefObject
{
    public string Hello()
    {
        string r = "hello";
        return r;
    }

    [Description("Sets a new IO Point List in the DDC.")]
    public string SetIOPointList(string host, DDCService.pointInformation[] pointList)
    {

        string result;

        DDCService.LGeDDCClient ddc = new DDCService.LGeDDCClient("LGeDDC", host);

        try
        {
            result = ddc.SetIOPoint(pointList);
        }
        catch (Exception ex)
        {
            result = ex.ToString();
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:54:47.337

不使用接口的问题是您需要在客户端上包含服务器代码。这不是像这样简单的问题，但如果服务器接口变得更复杂或涉及服务器实现，则可能是一个真正的问题。

这也成为一个部署问题。每当您更改服务器实现中的某些内容时，您都必须将新的服务器实现复制到所有客户端。如果您使用的是接口，那么您唯一需要更新客户端的时间就是更改接口。服务器实现更改不会影响客户端。至少，它们不会影响客户端与服务器交互的方式。

这也可能导致安全问题。如果服务器代码中有专有信息，则该代码会在每个客户端上公开。但是，如果您使用接口，则无需包含服务器代码。

避免为服务器定义接口可能看起来更容易。但从长远来看，使用接口更安全、更容易修改和更容易部署——尤其是当有多个客户端时。

说了这么多，你应该问问你的老板为什么他要求远程处理。但在您这样做之前，请阅读 WCF 和 Remoting 之间的区别。WCF 显然是一种更强大的技术。

# actionscript-3 - 将放置在舞台上的对象添加到数组 (AS3)

> ID：11259036
> 
> 赞同：-1
> 
> 时间：2012-06-29T09:10:41.350
> 
> 标签：actionscript-3, flash-cs5

我正在做一个项目，我在舞台上放置了一堆对象（相同类型）。我想要做的是将所有这些对象添加到一个数组中。

这是我的代码，但不起作用。我知道这不是在舞台上添加东西的最佳方式，但我必须这样做。

```
package 
{   
import flash.events.Event
import flash.display.MovieClip;

public class Pellet_Manager extends MovieClip
{
    var pellets:Array = new Array();
    var pellet:Pellet;

    public function Pellet_Manager()
    {
        var pellet:Pellet;
        for (Pellet in stage)
        {
            pellet = Pellet;
            pellets.push(pellet);
        }
    }
}

} 
```

我在舞台上有 5 个 Pellet 实例，我想将它们添加到颗粒阵列中。我是否应该给每个实例一个实例名称，例如“pellet1”，然后循环检查每个实例并将其添加到数组中？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:31:06.210

1）要访问舞台，您已经将经理添加到其中，并在添加到舞台时编写回调函数

2）你的 for 循环有一些错误

希望能帮助到你！

```
 package  {   
      import flash.events.Event
      import flash.display.MovieClip;

      public class Pellet_Manager extends MovieClip  {
          var pellets:Array = new Array();
          var pellet:Pellet;

          public function Pellet_Manager()  {
              this.addEventListener (Event.ADDED_TO_STAGE, onAddedToStage, false, 0, true);
          }

          private function onAddedToStage (evt:Event) {
                var pellet:Pellet;
                for each (var pellet:Pellet in this.stage)   {
                    pellets.push(pellet);
                }
          }

      }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:19:30.240

您应该按索引遍历舞台上的孩子：

```
var pellets:Array = new Array();
var num:int = stage.numChildren;
for (var i:int ; i<num ; i++){
    pellets.push(stage.getChildAt(i));
} 
```

# html - 单选按钮标签定位

> ID：11259038
> 
> 赞同：4
> 
> 时间：2012-06-29T09:10:43.997
> 
> 标签：html, css, position

我需要将标签文本放在左侧，将单选按钮放在`div`.

这是我的代码：http: [//jsfiddle.net/mK3DV/3/](http://jsfiddle.net/mK3DV/3/)

此外，当我在代码中检查结果时，`radio checked`图像大小会有所不同。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:23:30.373

更新小提琴代码：

[http://jsfiddle.net/mK3DV/10/](http://jsfiddle.net/mK3DV/10/)

归功于 rickyduck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:36:33.920

根据您的需要提供**填充**。

```
input[type="radio"] + label
{
    background: url(http://manual.evolvesystems.ws/img/check_icon.jpg) right center no-repeat;
    background-size: 20px; 
    width: 23px;
    height: 25px;
    display:inline-block;
    padding:xx xx xx xx;
} 
```

# java - 在 Java 中从 xml 获取值到 .properties 文件

> ID：11259039
> 
> 赞同：0
> 
> 时间：2012-06-29T09:10:51.380
> 
> 标签：java, xml, properties

我在 .xml 文件中有与数据库连接相关的属性。我想在 .properties 文件中使用相同的值。是否可以从 .xml 文件中获取值并设置为 .properties？

- 谢谢

使用**loadFromXML时出现异常**

线程“主”java.util.InvalidPropertiesFormatException 中的异常：org.xml.sax.SAXException：无效的系统标识符：[http](http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd) ://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd at java.util.XMLUtils。 load(XMLUtils.java:76) at java.util.Properties.loadFromXML(Properties.java:868) at com.generalsentiment.test.quartz.CronTriggerExample.run(CronTriggerExample.java:40) at com.generalsentiment.test.quartz .CronTriggerExample.main(CronTriggerExample.java:117) 原因：org.xml.sax.SAXException：无效的系统标识符：[http ://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd](http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd) 在 java.util.XMLUtils$Resolver.resolveEntity(XMLUtils.java:190) 在 org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown Source) 在 org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source) 在org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org. apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) at java.util.XMLUtils.getLoadingDoc(XMLUtils.java:102) at java.util.XMLUtils.load(XMLUtils.java:74) ... 还有 3 个 Java 结果：1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:17:04.857

将努力使用 .properties 文件中的值创建一个 XML 属性文件。此处未指定 XML 的架构；因此假设它不是 Java XML 属性格式。

Java XML 属性文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>Hi</comment>
<entry key="foo">bar</entry>
<entry key="fu">baz</entry>
</properties> 
```

Java代码：

```
import java.util.*;
import java.io.*;

public class LoadSampleXML {
  public static void main(String args[]) throws Exception {
    Properties prop = new Properties();
    FileInputStream fis =
      new FileInputStream("sampleprops.xml");
    prop.loadFromXML(fis);
    prop.list(System.out);
    System.out.println("\nThe foo property: " +
        prop.getProperty("foo"));
  }
} 
```

[从这里](http://www.ibm.com/developerworks/java/library/j-tiger02254/index.html)引用的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:18:02.093

您是否检查了 javadocs 的属性。有一个[loadFromXML](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#loadFromXML%28java.io.InputStream%29)方法可以做到这一点。唯一的限制是 XML 文件确认一个特定的结构，并且应该有下面提到的`DOCTYPE`声明。

`<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">`

# php - PHP max_execution_time 没有超时

> ID：11259040
> 
> 赞同：5
> 
> 时间：2012-06-29T09:10:56.337
> 
> 标签：php, apache

如果睡眠被计算为超时或类似的东西，这不是常见的问题之一。好的，问题来了：我已将 PHP 的 max_execution_time 设置为 15 秒，理想情况下，当它超过设置的限制时应该超时，但事实并非如此。更改 php.ini 文件后，Apache 已重新启动，并且 ini_get('max_execution_time') 一切正常。有时脚本运行长达 200 秒，这太疯狂了。我没有任何数据库通信。该脚本所做的只是在 unix 文件系统上查找文件，并且在某些情况下重定向到另一个 JSP 页面。脚本上没有 sleep() 。

我这样计算 PHP 脚本的总执行时间：

在我设置的脚本开始处：

```
$_mtime = microtime();  
$_mtime = explode(" ",$_mtime);
$_mtime = $_mtime[1] + $_mtime[0]; 
$_gStartTime = $_mtime; 
```

和结束时间（$_gEndTime）的计算类似。
总时间是在我注册的关闭函数中计算的：

```
register_shutdown_function('shutdown');
.............
function shutdown()
{
   ..............
   ..............
   $_total_time = $_gEndTime - $_gStartTime;
   ..............
   switch (connection_status ())
    {
    case CONNECTION_NORMAL:
      ....
      break;
      ....
    case CONNECTION_TIMEOUT:
      ....
      break;
      ......
    }
} 
```

**注意：**我不能使用 $_SERVER['REQUEST_TIME'] 因为我的 PHP 版本不兼容。这很糟糕——我知道。

1）好吧，我的第一个问题显然是为什么我的 PHP 脚本即使在设置的超时限制之后仍然执行？
2) Apache 有 300 秒的 Timeout 指令，但 PHP 二进制文件不读取 Apache 配置，这应该不是问题。
3) 是否有可能让 PHP 进入睡眠模式？
4）我是否以错误的方式计算执行时间？有一个更好的方法吗？

在这一点上我很难过。PHP 向导 - 请帮助。

编辑：我刚刚发现流操作不是一些日志的原因。即使没有执行流式操作，延迟在脚本中也是随机的。上下文切换可能就是原因。但我仍然没有明确的答案。我[在 Linux 上查找了 PHP 的 Real max_execution_time，](https://stackoverflow.com/questions/10025902/real-max-execution-time-for-php-on-linux?rq=1) 但我不确定我是否想尝试一下。还有其他建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:16:59.333

`max_execution_time`仅限制*脚本*执行时间本身 -脚本的**CPU 时间**。如果操作系统上下文切换到另一个进程并在那里花费了一些时间，它也不会被计算在内。因此，测量真实世界的时间并期望在 30 秒后超时，在任何给定时间都不会成立。当然，它也忽略任何`system`,`exec`或网络时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:44:15.110

如果您需要在一段时间后超时（根据评论）为什么不打电话

```
 $startscript = microtime();

 //do some stuff

if (microtime() - $startscript > 1500)
{
  dotimeout();
}

  // do more stuff

if (microtime() - $startscript > 1500)
{
  dotimeout();
}

  // do more stuff

if (microtime() - $startscript > 1500)
{
  dotimeout();
} 
```

你明白了。不是很漂亮，但可能有用。

# php - 在 php 中的 mapreduce 函数中应用限制？

> ID：11259044
> 
> 赞同：0
> 
> 时间：2012-06-29T09:11:17.637
> 
> 标签：php, mongodb

`php, mongodb`使用功能时如何应用限制`mapreduce`？我试过这个

```
$cmd=array(// codition array
"mapreduce" => "user", 
"map" => $map,
"reduce" => $reduce,
"out" => array("inline" => 1),
"limit"=>2
);

$db=connect();
$query = $db->command($cmd);// run command 
```

但它不起作用，它提供了 2 个文档。我不能对子文档使用限制。如果我有 100 个子文档，然后我想在子文档中分页。那么它会失败。是否可以对子文档应用限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:35:01.183

在您的查询中，您可以使用 $slice: [http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)。但是，如果这是您的要求，您将无法在 MR 中对您的子目录进行分页。

我不确定你的“然后它失败了”是什么。所以我不能在那里给出可靠的答案。

顺便说一句，限制仅适用于根文档。子文档只是根文档中的数组，而不是完全独立的表。

# maven - 从 Maven antrun 插件运行 Cargo

> ID：11259045
> 
> 赞同：0
> 
> 时间：2012-06-29T09:11:18.840
> 
> 标签：maven, ant, cargo, maven-cargo

我有一个为 JBoss AS 7.1.x 创建一些 WAR 和 EAR 文件的 maven（多模块）项目。

出于一个目的，我需要将一个模块的一个生成的 EAR 文件部署到一个新的 JBoss 实例并运行它，针对它调用一些 REST Web 服务调用并停止 JBoss。然后我需要将这些调用的结果打包写入数据库。

目前，我正在尝试使用 CARGO 和 maven ant run 插件来执行此任务。

不幸的是，我无法让这三个（maven、ant run 和 CARGO）一起玩。我没有在货物的蚂蚁示例中使用的 uberjar。如何配置 ant run 任务，以便 cargo ant 任务可以创建、启动、部署我的 JBoss？理想情况下是在另一个阶段由 cargo-maven2-plugin 解包和配置的？

或者，有没有更好的方法来实现我创建数据库的目标？

我不能真正使用集成测试阶段，因为它是在打包阶段*之后执行的。*所以，我打算在编译阶段使用 ant run 来完成这一切。

再次澄清：

我需要做以下事情：启动JBoss；部署战争；等待WAR启动完成；部署 EAR 文件；等到 EAR 初始化它的数据库；调用EAR实现的一些web服务；停止 JBoss；打包数据库。

所有这些步骤都需要*严格*按顺序进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:19:11.210

下面的[部分给你一个印象如何做到这一点](https://github.com/khmarbaise/maui/blob/master/src/main/resources/it-example-container/mod-it/pom.xml)。您必须更改详细信息。在给定的情况下，我使用 Tomcat。这将下载 Tomcat 存档解压缩并在本地安装 Tomcat...

```
 <plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <configuration>
      <wait>false</wait>
      <container>
        <containerId>tomcat${tomcat.major}x</containerId>
        <zipUrlInstaller>
          <url>http://archive.apache.org/dist/tomcat/tomcat-${tomcat.major}/v${tomcat.version}/bin/apache-tomcat-${tomcat.version}.tar.gz</url>
          <extractDir>${project.build.directory}/extract/</extractDir>
          <downloadDir>${project.build.directory}/download/</downloadDir>
        </zipUrlInstaller>
        <output>${project.build.directory}/tomcat${tomcat.major}x.log</output>
        <log>${project.build.directory}/cargo.log</log>
      </container>
      <configuration>
        <home>${project.build.directory}/tomcat-${tomcat.version}/container</home>
        <properties>
          <cargo.logging>high</cargo.logging>
          <cargo.servlet.port>9080</cargo.servlet.port>
          <cargo.tomcat.ajp.port>9008</cargo.tomcat.ajp.port>
        </properties>
      </configuration>
    </configuration>
    <executions>
      <execution>
        <id>start-container</id>
        <phase>pre-integration-test</phase>
        <goals>
          <goal>start</goal>
          <goal>deploy</goal>
        </goals>
        <configuration>
          <deployer>
            <deployables>
              <deployable>
                <groupId>${project.groupId}</groupId>
                <artifactId>mod-war</artifactId>
                <type>war</type>
                <pingURL>http://localhost:9080/mod-war</pingURL>
                <pingTimeout>30000</pingTimeout>
                <properties>
                  <context>mod-war</context>
                </properties>
              </deployable>
            </deployables>
          </deployer>
        </configuration>
      </execution>
      <execution>
        <id>stop-container</id>
        <phase>post-integration-test</phase>
        <goals>
          <goal>stop</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

# sql-server - MVC Persist Collection ViewModel（更新、删除、插入）

> ID：11259046
> 
> 赞同：3
> 
> 时间：2012-06-29T09:11:21.460
> 
> 标签：sql-server, asp.net-mvc, linq, nhibernate, viewmodel

为了创建一个更优雅的解决方案，我很想知道您对持久化集合的解决方案的建议。

我有一个存储在 DB 上的集合。此集合转到视图模型中的网页。当从网页返回到控制器时，我需要将修改后的集合保存到同一个数据库中。

简单的解决方案是删除存储的集合并重新创建所有行。我需要一个更优雅的解决方案来混合集合并删除不存在的记录，更新类似记录并插入新行。

这是我的模型和视图模型。

```
public class CustomerModel
{
    public virtual string Id { get; set; }
    public virtual string Name { get; set; }

    public virtual IList<PreferredAirportModel> PreferedAirports { get; set; }
}

public class AirportModel
{
    public virtual string Id { get; set; }
    public virtual string AirportName { get; set; }
}

public class PreferredAirportModel
{
    public virtual AirportModel Airport { get; set; }
    public virtual int CheckInMinutes { get; set; }
}

// ViewModels
public class CustomerViewModel
{
    [Required]
    public virtual string Id { get; set; }
    public virtual string Name { get; set; }

    public virtual IList<PreferredAirporViewtModel> PreferedAirports { get; set; }
}

public class PreferredAirporViewtModel
{
    [Required]
    public virtual string AirportId { get; set; }

    [Required]
    public virtual int CheckInMinutes { get; set; }
} 
```

这是控制器没有优雅的解决方案。

```
public class CustomerController
{
    public ActionResult Save(string id, CustomerViewModel viewModel)
    {
        var session = SessionFactory.CurrentSession;

        var customer = session.Query<CustomerModel>().SingleOrDefault(el => el.Id == id);

        customer.Name = viewModel.Name;

        // How can I Merge collections handling delete, update and inserts ?

        var modifiedPreferedAirports = new List<PreferredAirportModel>();
        var modifiedPreferedAirportsVm = new List<PreferredAirporViewtModel>();

        // Update every common Airport
        foreach (var airport in viewModel.PreferedAirports)
        {
            foreach (var custPa in customer.PreferedAirports)
            {
                if (custPa.Airport.Id == airport.AirportId)
                {
                    modifiedPreferedAirports.Add(custPa);
                    modifiedPreferedAirportsVm.Add(airport);

                    custPa.CheckInMinutes = airport.CheckInMinutes;
                }
            }
        }

        // Remove common airports from ViewModel
        modifiedPreferedAirportsVm.ForEach(el => viewModel.PreferedAirports.Remove(el));

        // Remove deleted airports from model
        var toDelete = customer.PreferedAirports.Except(modifiedPreferedAirports);
        toDelete.ForEach(el => customer.PreferedAirports.Remove(el));

        // Add new Airports
        var toAdd = viewModel.PreferedAirports.Select(el => new PreferredAirportModel
                                                            {
                                                                Airport =
                                                                            session.Query<AirportModel>().
                                                                            SingleOrDefault(a => a.Id == el.AirportId),
                                                                CheckInMinutes = el.CheckInMinutes
                                                             });
        toAdd.ForEach(el => customer.PreferedAirports.Add(el));

        session.Save(customer);

        return View();
    }
} 
```

我的环境是 ASP.NET MVC 4、nHibernate、Automapper、SQL Server。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:15:05.423

好吧，如果“优雅”只是“不清除并重新创建所有”（未经测试）：

```
var airports = customer.PreferedAirports;
var viewModelAirports = viewModel.PreferredAirports;

foreach (var airport in airports) {
  //modify common airports
   var viewModelAirport = viewModelAirports.FirstOrDefault(m => m.AirportId == airport.AirportId);
   if (viewModelAirport != null) {
      airport.X = viewModelAirport.X;
      airport.Z = viewModelAirport.Z;
      //remove commonAirports from List
      viewModelAirports.Remove(viewModelAirport);
      continue;
   }
   //delete airports not present in ViewModel
   customer.PreferedAirports.Remove(airport);
}

//add new airports
foreach (var viewModelAirport in viewModelAirports) {
   customer.PreferedAirports.Add(new PreferredAirportModel {
             Airport = session.Query<AirportModel>().SingleOrDefault(a => a.Id == el.AirportId), 
             CheckInMinutes = el.CheckInMinutes
             });
}
session.Save(customer); 
```

# c# - 使用私有 setter 或私有字段和属性只是 getter 的自动实现属性哪个更好？

> ID：11259050
> 
> 赞同：2
> 
> 时间：2012-06-29T09:11:31.873
> 
> 标签：c#

我的问题可能是一个老话题的一部分——“属性与字段”。

我有一种情况，变量对于外部类是只读的，但需要在类内部进行修改。我可以通过两种方式来处理它：

第一的：

```
private Type m_Field;
public Type MyProperty { get { return m_Field; } } 
```

第二：

```
public Type MyProperty { get; private set; } 
```

在阅读了几篇文章（主要介绍了使用公共属性而不是公共字段的好处）之后，我不知道第二种方法是否比第一种方法有一些优势，但编写的代码更少。我很感兴趣在项目中使用哪个更好（以及为什么），或者这只是个人选择。

也许这个问题不属于SO所以我提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:14:19.630

第二个版本产生的混乱较少，但灵活性较差。我建议你使用第二个版本，直到你遇到需要第一个版本的情况，然后重构 - 无论如何更改都将是类本地的，所以不要太担心！

一般来说，少写代码是个好主意。您编写的代码越少，产生的错误就越少:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:16:58.507

无论如何，第二个几乎都会编译成第一个，因此 IMO 总是使用第二个，因为它的代码更少且更整洁。

我倾向于使用第一种方法的唯一场景是当我想*延迟*加载属性时，例如

```
private List<string> _items;
...

public List<string> Items
{
    get
    {
        if (_items == null)
        {
            _items = new List<string>();
            // load items
        }
        return _items;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T09:19:24.670

第二个版本较短，所以我认为它*通常会*更好。例外情况是，当唯一的写访问发生在构造函数中时。然后我更喜欢第一个版本，因为这允许将字段标记为`readonly`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T09:15:43.383

请通过以下问题。它看起来一样，

[https://softwareengineering.stackexchange.com/questions/72495/net-properties-use-private-set-or-readonly-property](https://softwareengineering.stackexchange.com/questions/72495/net-properties-use-private-set-or-readonly-property)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T09:14:28.957

对于调试，第二个是最好的。否则，您必须在设置字段的每个位置放置断点。使用第二个，您在属性集上放置一个断点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T09:19:24.510

就我个人而言，我更喜欢第二个版本，因为它写得更少，所以我可以用时间来做更复杂的编码......加上我认为它促进了懒惰的开发

# linq - linq 'not in' 查询没有解决我的期望

> ID：11259051
> 
> 赞同：2
> 
> 时间：2012-06-29T09:11:42.780
> 
> 标签：linq

我在 Linq 中编写了以下查询：

```
var res =  dc.TransactionLoggings
             .Where(
                x => !dc.TrsMessages(y => y.DocId != x.DocId)
              ).Select(x => x.CCHMessage).ToList(); 
```

这解决了以下问题：

```
SELECT [t0].[CCHMessage]
FROM [dbo].[TransactionLogging] AS [t0]
WHERE NOT (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[TrsMessages] AS [t1]
    WHERE [t1].[DocId] <> [t0].[DocId]
    )) 
```

总是返回 null

Basiaclly 我要写的是以下内容：

```
Select cchmessage
from transactionlogging
where docid not in (select docid from trsmessages) 
```

关于我的 LINQ 语句有什么问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:34:12.973

```
var res =  dc.TransactionLoggings
             .Where(tl => !dc.TrsMessages.Any(trsm=> trsm.DocId == tl.DocId))
             .Select(x => x.CCHMessage).ToList(); 
```

或者

```
 var trsMessagesDocId = dc.TrsMessages.Select(trsm => trsm.DocId).ToList();

   var res = dc.TransactionLoggins
                .Where(tl => !trsMessagesDocId.Contains(tl.DocId))
                .Select(tl => tl.CCHMEssage)
                .ToList(); 
```

# makefile - 多用途 Makefile？

> ID：11259063
> 
> 赞同：0
> 
> 时间：2012-06-29T09:12:41.810
> 
> 标签：makefile

我有文件`main.c`,`version1.c`和`version2.c``header.h`

`version1.c`和`version2.c`是同一个头文件 ( `header.h`) 的两种不同实现，这个头文件被`main.c`.

现在，我想

```
$ make v1
cc -c main.c
cc -c version1.c
cc -o prog main.o version1.o 
```

或者

```
$ make v2
cc -c main.c
cc -c version2.c
cc -o prog main.o version2.o 
```

取决于我使用的代码版本。

我尝试[有条件地附加到 Makefile 目标内的变量](https://stackoverflow.com/questions/2148892/conditionally-appending-to-a-variable-inside-a-makefile-target)并写道

```
.PHONY: v1 v2
OBJ = main.o
v1: OBJ += version1.o
v2: OBJ += version2.o
v1 v2: prog
prog: $(OBJ)
     cc -o prog $(OBJ)
%.o: %.c header.h
     cc -c $< 
```

但这根本行不通：

```
$ make v1
cc -c main.c
cc -o prog main.o version1.o
cc: version1.o: No such file or directory
make: *** [prog] Error 1 
```

当它出现在依赖项列表中时，它似乎在附加之前进行评估，但是当*它*`make`出现*在*命令列表中时在它之后进行评估。`$(OBJ)`

 **这是一个错误`make`吗？还是我只是做错了？我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:31:43.360

变量 ( ) 的目标特定修改`v1: OBJ += version1.o`适用于规则主体，而不是先决条件列表。这是我的做法：

```
.PHONY: v1 v2
v1: version1.o
v2: version2.o
v1 v2: main.o
    cc -o prog $^

%.o: %.c header.h
    cc -c $< 
```**

# android - 设备位置始终为空

> ID：11259065
> 
> 赞同：0
> 
> 时间：2012-06-29T09:13:07.270
> 
> 标签：android, gps, android-location

关于这个问题，我已经浏览了很多关于 SO 的帖子：尝试了[Here](https://stackoverflow.com/q/1513485/840520)、 [Here](https://stackoverflow.com/q/8524934/840520)和[Here](https://stackoverflow.com/q/8526771/840520)中的所有内容，没有任何效果。每次位置都是空的。在设备和模拟器上:(。我的 GPS 已打开，互联网已打开，我的清单具有以下权限：

`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`

我使用以下代码来获取位置，即设备的经度和纬度......但是在每种情况下我都`location`得到`null`

```
public void find_Location() {
        Log.d("Find Location", "in find_location");

        String location_context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager) getApplicationContext()
                .getSystemService(location_context);

        List<String> providers = locationManager.getProviders(true);
        for (String provider : providers) {
            locationManager.requestLocationUpdates(provider, 1000, 0,
                    new LocationListener() {
                        public void onLocationChanged(Location location) {}

                        public void onProviderDisabled(String provider) {
                        }

                        public void onProviderEnabled(String provider) {
                        }

                        public void onStatusChanged(String provider,
                                int status, Bundle extras) {
                        }
                    });
            Location location = locationManager.getLastKnownLocation(provider);

            if (location == null) {
                Toast.makeText(LbsGeocodingActivity.this, "Location Not found",
                        Toast.LENGTH_LONG).show();
            } else {
                double latitude = location.getLatitude();
                double longitude = location.getLongitude();
                Toast.makeText(LbsGeocodingActivity.this,
                        "LAT..." + latitude + "\nLONG..." + longitude,
                        Toast.LENGTH_LONG).show();
                // addr=ConvertPointToLocation(latitude,longitude);
                // String temp_c=SendToUrl(addr);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:26:13.043

我怎么会这么笨......我的坏......在设置中没有选择**使用无线网络！......这导致了所有问题！**现在我可以得到一个位置。

我花了 16 个小时才做到这一点……我的工作效率肯定会下降！:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:19:13.950

在确定位置之前需要一些时间，并且会随着时间而改变。当您检查它时，它可能还不可用。

当定位可用时，您将在 onLocationChanged 中收到通知。

# bash - 在 bash 或 sh 中，与 C/C++ 中的 #include 预处理器指令等效的是什么？

> ID：11259066
> 
> 赞同：1
> 
> 时间：2012-06-29T09:13:10.040
> 
> 标签：bash, include, sh

`#include`在 bash 或 sh 中，与 C/C++中的预处理器指令等效的是什么？

我想在单独的配置文件中保留一些路径，由 sh 脚本加载。

还有其他方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:15:48.867

它是`source`。

```
source /path/to/file.sh 
```

甚至

```
. /path/to/file.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:15:43.900

使用`source other_file`或`. other_file`；请参阅[http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins)。

# git - 如何获取有关远程分支的更多信息

> ID：11259067
> 
> 赞同：1
> 
> 时间：2012-06-29T09:13:11.177
> 
> 标签：git, github

使用`git`，如果我让`git branch --all`我可以看到所有远程分支。

是否可以通过命令行获取更多相关信息`remote branches`，
例如“创建日期”、“上次编辑日期”和“创建用户”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:16:14.857

您用于获取*本地*分支信息的任何命令也适用于*远程*分支。

IE：

```
$ git checkout origin/foo
$ git log --oneline -5
$ git show upstream/dev
# etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:19:50.210

### TL;博士

不可以。您需要获取存储库对象才能查看历史信息。

### Git 是如何工作的

Git 历史存储在提交对象中，但分支只是提交的指针。（这有点简单，但对我们的目的来说是正确的。）特别是，远程 ref 只是指向某个分支头部的指针；它不包含任何要显示的历史记录。

Git 需要检索该分支的存储库对象，以便在运行时计算历史记录。所以，在你`git fetch`为一个给定的分支运行之前，Git 没有任何东西可以提供给你这些信息。

# android - 无法使用 ADT 版本 20 创建新项目

> ID：11259069
> 
> 赞同：15
> 
> 时间：2012-06-29T09:13:20.867
> 
> 标签：android, adt

我最近更新了我的 ADT，现在是 ADT_V20。我还更新了我的 SDK 平台工具。但我无法通过 Eclipse 的项目向导创建新项目。我有 Eclipse Helios 最新版本。它与旧的 ADT 版本配合得很好。

在项目向导中，我到达了安装依赖项屏幕，其中“下一步”和“完成”按钮被禁用。我已尝试按照向导中所示“安装/升级”新版本，并且该过程已成功完成。我仍然没有启用“下一步”或“完成”按钮。

同样的事情也发生在其他 PC 上。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-29T13:21:45.733

看起来您可以通过从 SDK 管理器中卸载 Support 库，然后在向导中的提示处重新安装来解决此问题。我遇到了同样的问题，这个解决方案对我有用。

来源：[http ://code.google.com/p/android/issues/detail?id=33859](http://code.google.com/p/android/issues/detail?id=33859)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T09:34:15.347

在第二个屏幕上的新 Android 项目向导中，“选择是否创建活动，如果是，什么样的活动”

*   简单地取消选中创建活动，将启用一个新的空白活动来创建。-
*   单击完成。

他们可能会针对您很快强调的问题进行修复。

由于升级到 ADT20，我遇到了一些与 Ant build.xml 相关的问题，无法找到“com.android.ant.NewSetupTask”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T01:06:30.683

安装 ADT 版本 20 后，我在创建 1.6/API 8 项目时遇到了这个问题，因为安装了更新的（版本 20）SDK。

请一位专家尝试在没有“活动”的情况下创建它吗？

我无法在检查空白活动的情况下完成（由于缺少 API 8，它会在要求更新时尝试安装已安装的 API 9），我也不能在未选择活动的情况下完成。

在后一种情况下，即取消选中创建活动框，会出现完成按钮，创建部分项目，但不会创建项目（因为旧版本即使使用旧 API 也会这样做。

此外，没有实际迹象表明“完成”已经起作用——即使对话框仍然存在，您也必须在浏览窗格中查看新项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-06T15:08:29.513

如果以上任何一项都没有解决您的问题，请做一件事，尝试从 eclipse/plugin 目录中删除 org.apache.log4j_1.2.17.jar ！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T15:48:44.347

在 MACOSX 中，使用 Eclipse Helios IDE，这个解决方案对我不起作用。我解决了通过 SDK 工具卸载组件并通过同一个 SDK 管理器再次安装它们的问题。我尝试通过相同的新项目对话框重新安装组件，但对我不起作用，我唯一的解决方案是从 sdk 管理器卸载并重新安装。

我希望这个解决方案对你有用:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T09:12:43.443

我的解决方案是我发现我的计算机上没有安装 Android 支持库（我什至在 extras/ 下都没有 Android 文件夹。我以管理员身份运行 SDK 管理器，选择它并安装它。然后我尝试创建一个新项目，我得到了同样的错误。我点击了安装/升级，完成按钮被启用。下次我创建一个新项目时，我没有收到这个错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T10:24:36.530

就我而言，该应用程序已创建，但我没有看到它，因为它完全被欢迎启动屏幕所掩盖。当我没有看到它时，我尝试再次创建该应用程序，但它未能以静默方式完成。只有当我冒险关闭启动画面时，一切才变得清晰。

# javascript - 使用javascript将日期和时间字符串转换为dd/mm/yyyy

> ID：11259070
> 
> 赞同：1
> 
> 时间：2012-06-29T09:13:26.790
> 
> 标签：javascript, json

大家好，我正在使用 Google RSS API (ATOM) 来提取 RSS 提要。它以长字符串版本返回 JSON 格式的发布日期，例如：

```
Sun, 24 Jun 2012 17:00:00 -0700 
```

例如，如何将此字符串转换为`24/06/2012`使用 JavaScript 显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:18:52.533

你的意思是这样的：

```
var d = new Date('Sun, 24 Jun 2012 17:00:00 -0700');
var day = d.getDay();
var month = d.getMonth();
var date = d.getDate();  
var year = d.getFullYear();
var formatted = date + "/" + month + "/" + year; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:29:02.180

您还可以使用 Date.parse 函数

```
var d     = Date.parse('Sun, 24 Jun 2012 17:00:00 -0700');
var day   = new Date(d);
var month = d.getMonth();
var year  = d.getFullYear();
var formatted_date = day+'/'+month+'/'+year; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:34:25.713

前几天我发现了这个库，它非常适合在 Javascript 中处理日期，它的行为有点像 Python 的 Datetime 对象。[http://momentjs.com](http://momentjs.com) 它可以从一个字符串实例化，我认为你需要的格式是这样的：

```
var day = moment("Sun, 24 Jun 2012 17:00:00 -0700", "ddd, DD MMM YYYY HH:mm:ss Z");
console.log( day.format('dd/MM/YY') ); 
```

但是它确实说从字符串创建日期并不是特别快，我想这样做的好处更多是用于操作日期/时间，而不是简单地重新格式化它们。

# java - Java PHP 如何立即检查电子邮件地址是否存在？

> ID：11259075
> 
> 赞同：1
> 
> 时间：2012-06-29T09:13:56.793
> 
> 标签：java, php, email, verification

> **可能重复：**
> [确定电子邮件地址的健康/有效性](https://stackoverflow.com/questions/504631/determining-the-health-validity-of-an-email-address)

如何使用 Java 和 PHP 检查电子邮件地址是否实际存在？当用户在电子邮件字段中输入电子邮件地址时，表单的电子邮件旁边会显示它是有效的还是存在的电子邮件地址。首先它会检查它的格式是否正确'name@domain.com'，其次它会检查电子邮件地址是否真实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:20:09.680

即刻？不可能的。如果时间不是*那么*重要，您总是可以尝试直接与该域的 SMTP 服务器通信。（您知道，如何通过 dns MX 记录找到它，不是吗？）其中一些会给您一个“用户不存在”错误，而另一些则不会。其中一些会迫使您进入灰名单，因此整个过程可能需要几秒钟到 15 分钟左右......

关键是：如果你有一个好的验证码解决方案，我想担心虚假电子邮件并不是*什么*大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:17:10.080

你不能。您只能检查您自己的数据库以查看该电子邮件地址是否已存在用户。但是要检查它是否真实，您必须发送一封验证电子邮件并让用户单击电子邮件中的链接。这表明至少有一个人可以通过该电子邮件地址接收电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:38:15.810

没有简单的方法来验证地址是否存在于一次点击中。您可以使用正则表达式验证其格式是否正确，即使这比最初看起来要复杂。如果您将其设置得太严格，您会发现一些用户将无法注册。我会说最好只进行一些简单的验证以确保它具有@符号。为了实际验证它，大多数网站都会发送一封带有激活码/链接的验证电子邮件。它很简单，而且很有效，大多数用户现在都会熟悉这个过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:26:11.373

同上 Simeon Visser 和 raina77ow 评论

此外，由于即将出台的新法规允许域名中包含外来字符，因此检查电子邮件地址是否格式正确的唯一方法是它有一个字符后跟 @ 后跟一个字符（目前是 3 个或更多字符）那不是一个。或一个空格，后跟一个 . 然后是一些不是空格的字符（包括 .）

所以 xxxx@xxx.xx 目前可以

但新@书.中将很快生效

# python - 长时间运行的 CPU 密集型 python 脚本被调度程序发送到睡眠状态

> ID：11259076
> 
> 赞同：1
> 
> 时间：2012-06-29T09:13:57.167
> 
> 标签：python, ubuntu, sysadmin, nice

我编写了一个 CPU 密集型数据处理脚本。它已经运行了几天，但是现在（感谢发送到控制台的跟踪消息），我可以看到它没有工作（实际上，过去 10 个小时左右都没有工作。

当我运行时`top`，我注意到进程要么处于睡眠状态（S），要么处于不可中断的睡眠状态（D）。这是在浪费很多时间。

我曾经`sudo renice -10 PID`更改过进程的nice值，运行了一会儿后，我注意到进程又重新进入睡眠状态。

我的问题：

1.  我可以做些什么来强制脚本运行直到它完成（如果这意味着机器在脚本结束之前无法使用？

2.  有没有`yield`我可以在 Python 中使用的命令，它允许我定期将控制权传递给其他进程/线程，以阻止调度程序试图让我的脚本进入睡眠状态？

我在 Ubuntu 10.0.4 上使用 python 2.7.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:20:50.097

只有当有另一个进程准备好运行时，调度程序才会暂停您的进程。如果您没有其他占用 CPU 的进程，那么您的进程将大部分时间都在运行。调度程序不会仅仅因为感觉像就让您的进程进入睡眠状态。

我的猜测是您的进程无法运行是有某种原因的，例如它正在阻塞并等待 I/O 或数据。

# ef-code-first - 如何在 Entity Framework 4.3 Code First 中禁用 __MigrationHistory 表？

> ID：11259079
> 
> 赞同：11
> 
> 时间：2012-06-29T09:14:02.940
> 
> 标签：ef-code-first, entity-framework-4.3, entity-framework-migrations

我正在使用带有自定义数据库初始化程序的 Entity Framework 4.3 Code First，如下所示：

```
public class MyContext : DbContext
{
    public MyContext()
    {
        Database.SetInitializer(new MyContextInitializer());
    }
}

public class MyContextInitializer : CreateDatabaseIfNotExists<MyContext>
{
    protected override void Seed(MyContext context)
    {
        // Add defaults to certain tables in the database

        base.Seed(context);
    }
} 
```

每当我的模型发生变化时，我都会手动编辑我的 POCO 和映射，并手动更新我的数据库。

当我再次运行我的应用程序时，我收到此错误：

> ## “/”应用程序中的服务器错误。
> 
> ### 自创建数据库以来，支持“MyContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)。
> 
> **说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> **异常详细信息：** System.InvalidOperationException：支持“MyContext”上下文的模型自创建数据库以来已更改。考虑使用 Code First 迁移来更新数据库 (http://go.microsoft.com/fwlink/?LinkId=238269)。

使用 EFProfiler，我还注意到正在执行这些查询：

```
-- statement #1
SELECT [GroupBy1].[A1] AS [C1]
FROM   (SELECT COUNT(1) AS [A1]
        FROM   [dbo].[__MigrationHistory] AS [Extent1]) AS [GroupBy1]

-- statement #2
SELECT TOP (1) [Project1].[C1]          AS [C1],
               [Project1].[MigrationId] AS [MigrationId],
               [Project1].[Model]       AS [Model]
FROM   (SELECT [Extent1].[MigrationId] AS [MigrationId],
               [Extent1].[CreatedOn]   AS [CreatedOn],
               [Extent1].[Model]       AS [Model],
               1                       AS [C1]
        FROM   [dbo].[__MigrationHistory] AS [Extent1]) AS [Project1]
ORDER  BY [Project1].[CreatedOn] DESC 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T09:53:46.507

起初我确定这是因为您在 ctor 中设置了默认初始化程序，但经过一番调查，我发现初始化程序不是在创建上下文时运行，而是在您第一次查询/添加某些内容时运行。

提供的初始化程序都检查模型兼容性，所以你对它们不走运。不过，您可以轻松地制作自己的初始化程序：

```
 public class Initializer : IDatabaseInitializer<Context>
    {

        public void InitializeDatabase(Context context)
        {
            if (!context.Database.Exists())
            {
                context.Database.Create();
                Seed(context);
                context.SaveChanges();
            }
        }

        private void Seed(Context context)
        {
            throw new NotImplementedException();
        }
    } 
```

这不应该检查兼容性，如果数据库丢失，它将创建它。

更新：“上下文”应该是您的 DbContext 实现的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T18:08:44.900

将 null 传递给`System.Data.Entity.Database`'s

```
public static void SetInitializer<TContext>(
    IDatabaseInitializer<TContext> strategy
)
where TContext : DbContext 
```

为您的上下文禁用初始化。不要实施`IDatabaseInitializer`禁用它。

[https://msdn.microsoft.com/en-us/library/system.data.entity.database.setinitializer(v=vs.113).aspx](https://msdn.microsoft.com/en-us/library/system.data.entity.database.setinitializer(v=vs.113).aspx)

# c++ - 在 C++ 中注册函数以进行动态调用的好方法是什么？

> ID：11259081
> 
> 赞同：4
> 
> 时间：2012-06-29T09:14:06.123
> 
> 标签：c++, dynamic

在我目前的设置中，我有一个

```
typedef std::function<void (MyClass&, std::vector<std::string>) MyFunction;
std::map<std::string, MyFunction> dispatch_map; 
```

我用宏在其中注册了我的函数。但是，我有一个问题：参数作为字符串向量传递，我必须在函数内部进行转换。我宁愿在调度程序级别的函数之外进行这种转换。这可能吗？函数签名在编译时是已知的，并且在运行时永远不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:06:28.133

如果您可以使用 boost，那么这是我认为您正在尝试做的一个示例（尽管也可以使用`std`，但我个人坚持使用 boost）：

```
typedef boost::function<void ( MyClass&, const std::vector<std::string>& ) MyFunction;
std::map<std::string, MyFunction> dispatch_map;
namespace phx = boost::phoenix;
namespace an = boost::phoenix::arg_names;
dispatch_map.insert( std::make_pair( "someKey", phx::bind( &MyClass::CallBack, an::_1, phx::bind( &boost::lexical_cast< int, std::string >, phx::at( an::_2, 0 ) ) ) ) );
dispatch_map["someKey"]( someClass, std::vector< std::string >() ); 
```

然而，由于这种嵌套很快变得相当不可读，通常最好创建一个帮助器（自由函数，或者更好的是一个惰性函数）来进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:45:44.200

您可以使用可变参数模板和一些模板/虚拟技术走得很远。使用以下代码，您将能够执行以下操作：

```
std::string select_string (bool cond, std::string a, std::string b) {
    return cond ? a : b;
}

int main () {
    Registry reg;
    reg.set ("select_it", select_string);
    reg.invoke ("select_it", "1 John Wayne"));
    reg.invoke ("select_it", "0 John Wayne"));
} 
```

输出：

```
John
Wayne 
```

* * *

## 全面实施：

这些代码是示例性的。您应该优化它以在参数列表扩展中提供完美的转发更少的冗余。

*标头和测试功能*

```
#include <functional>
#include <string>
#include <sstream>
#include <istream>
#include <iostream>
#include <tuple>

std::string select_string (bool cond, std::string a, std::string b) {
    return cond ? a : b;
} 
```

*这有助于我们解析字符串并将结果放入元组中：*

```
//----------------------------------------------------------------------------------

template <typename Tuple, int Curr, int Max> struct init_args_helper;

template <typename Tuple, int Max>
struct init_args_helper<Tuple, Max, Max> {
    void operator() (Tuple &, std::istream &) {}
};

template <typename Tuple, int Curr, int Max>
struct init_args_helper {
    void operator() (Tuple &tup, std::istream &is) {
        is >> std::get<Curr>(tup);
        return init_args_helper<Tuple, Curr+1, Max>() (tup, is);
    }
};

template <int Max, typename Tuple>
void init_args (Tuple &tup, std::istream &ss)
{
    init_args_helper<Tuple, 0, Max>() (tup, ss);
} 
```

*这将函数指针和元组展开为函数调用（通过函数指针）：*

```
//----------------------------------------------------------------------------------

template <int ParamIndex, int Max, typename Ret, typename ...Args>
struct unfold_helper;

template <int Max, typename Ret, typename ...Args>
struct unfold_helper<Max, Max, Ret, Args...> {
    template <typename Tuple, typename ...Params>
    Ret unfold (Ret (*fun) (Args...), Tuple tup, Params ...params)
    {
        return fun (params...);
    }
};

template <int ParamIndex, int Max, typename Ret, typename ...Args>
struct unfold_helper {
    template <typename Tuple, typename ...Params>
    Ret unfold (Ret (*fun) (Args...), Tuple tup, Params ...params)
    {
        return unfold_helper<ParamIndex+1, Max, Ret, Args...> ().
               unfold(fun, tup, params..., std::get<ParamIndex>(tup));
    }
};

template <typename Ret, typename ...Args>
Ret unfold (Ret (*fun) (Args...), std::tuple<Args...> tup) {
    return unfold_helper<0, sizeof...(Args), Ret, Args...> ().unfold(fun, tup);
} 
```

*这个函数把它放在一起*：

```
//----------------------------------------------------------------------------------

template <typename Ret, typename ...Args>
Ret foo (Ret (*fun) (Args...), std::string mayhem) {

    // Use a stringstream for trivial parsing.
    std::istringstream ss;
    ss.str (mayhem);

    // Use a tuple to store our parameters somewhere.
    // We could later get some more performance by combining the parsing
    // and the calling.
    std::tuple<Args...> params;
    init_args<sizeof...(Args)> (params, ss);

    // This demondstrates expanding the tuple to full parameter lists.
    return unfold<Ret> (fun, params);
} 
```

*这是我们的测试：*

```
int main () {
    std::cout << foo (select_string, "0 John Wayne") << '\n';
    std::cout << foo (select_string, "1 John Wayne") << '\n';
} 
```

### 警告：代码在解析时需要更多验证，应该使用`std::function<>`而不是裸函数指针

* * *

根据上面的代码，编写一个函数注册表很简单：

```
class FunMeta {
public:
    virtual ~FunMeta () {}
    virtual boost::any call (std::string args) const = 0;
};

template <typename Ret, typename ...Args>
class ConcreteFunMeta : public FunMeta {
public:
    ConcreteFunMeta (Ret (*fun) (Args...)) : fun(fun) {}

    boost::any call (std::string args) const {
        // Use a stringstream for trivial parsing.
        std::istringstream ss;
        ss.str (args);

        // Use a tuple to store our parameters somewhere.
        // We could later get some more performance by combining the parsing
        // and the calling.
        std::tuple<Args...> params;
        init_args<sizeof...(Args)> (params, ss);

        // This demondstrates expanding the tuple to full parameter lists.
        return unfold<Ret> (fun, params);
    }

private:
    Ret (*fun) (Args...);
};

class Registry {
public:
    template <typename Ret, typename ...Args>
    void set (std::string name, Ret (*fun) (Args...)) {
        funs[name].reset (new ConcreteFunMeta<Ret, Args...> (fun));
    }

    boost::any invoke (std::string name, std::string args) const {
        const auto it = funs.find (name);
        if (it == funs.end())
            throw std::runtime_error ("meh");
        return it->second->call (args);
    }

private:
    // You could use a multimap to support function overloading.
    std::map<std::string, std::shared_ptr<FunMeta>> funs;
}; 
```

甚至可以考虑支持函数重载，使用多映射并根据传递的参数上的内容进行调度决策。

以下是如何使用它：

```
int main () {
    Registry reg;
    reg.set ("select_it", select_string);
    std::cout << boost::any_cast<std::string> (reg.invoke ("select_it", "0 John Wayne")) << '\n'
              << boost::any_cast<std::string> (reg.invoke ("select_it", "1 John Wayne")) << '\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:20:14.527

有趣的问题。这在 C++ 中并不是微不足道的，我在 C++11 中编写了一个独立的实现。在 C++03 中也可以这样做，但代码的可读性（甚至）会更差。

```
#include <iostream>
#include <sstream>
#include <string>
#include <functional>
#include <vector>
#include <cassert>
#include <map>
using namespace std;

// string to target type conversion. Can replace with boost::lexical_cast.
template<class T> T fromString(const string& str)
{ stringstream s(str); T r; s >> r; return r; }

// recursive construction of function call with converted arguments
template<class... Types> struct Rec;
template<> struct Rec<> { // no parameters
    template<class F> static void call
    (const F& f, const vector<string>&, int) { f(); }
};
template<class Type> struct Rec< Type > { // one parameter
    template<class F> static void call
    (const F& f, const vector<string>& arg, int index) {
        f(fromString<Type>(arg[index]));
    }
};
template<class FirstType, class... NextTypes>
struct Rec< FirstType, NextTypes... > { // many parameters
    template<class F> static void call
    (const F& f, const vector<string>& arg, int index) {
        Rec<NextTypes...>::call(
            bind1st(f, fromString<FirstType>(arg[index])), // convert 1st param
            arg,
            index + 1
        );
    }
};

template<class... Types> void call // std::function call with strings
(const function<void(Types...)>& f, const vector<string>& args) {
    assert(args.size() == sizeof...(Types));
    Rec<Types...>::call(f, args, 0);
}
template<class... Types> void call // c function call with strings
(void (*f)(Types...), const vector<string>& args) {
    call(function<void(Types...)>(f), args);
}

// transformas arbitrary function to take strings parameters
template<class F> function<void(const vector<string>&)> wrap(const F& f) { 
    return [&] (const vector<string>& args) -> void { call(f, args); };
}

// the dynamic dispatch table and registration routines
map<string, function<void(const vector<string>&)> > table;
template<class F> void registerFunc(const string& name, const F& f) {
    table.insert(make_pair(name, wrap(f)));
}
#define smartRegister(F) registerFunc(#F, F)

// some dummy functions
void f(int x, float y) { cout << "f: " << x << ", " << y << endl; }
void g(float x) { cout << "g: " << x << endl; }

// demo to show it all works;)
int main() {
    smartRegister(f);
    smartRegister(g);
    table["f"]({"1", "2.0"});
    return 0;
} 
```

此外，对于性能，最好使用 unordered_map 而不是 map，如果您只有常规 C 函数，可能会避免 std::function 开销。当然，这只有在调度时间与函数运行时间相比很重要的情况下才有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:37:34.020

如果我对您的理解正确，您想注册`void MyClass::Foo(int)`，并且`void MyClass::Bar(float)`接受将有一个演员 from `std::string`to`int`或`float`视情况而定。

为此，您需要一个辅助类：

```
class Argument {
  std::string s;
  Argument(std::string const& s) : s(s) { }
  template<typename T> operator T { return boost::lexical_cast<T>(s); }
}; 
```

这使得可以将`void MyClass::Foo(int)`和都包装`void MyClass::Bar(float)`在一个`std::function<void(MyClass, Argument))>`.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-29T09:19:51.147

不，C++ 没有为这种情况提供任何便利。

# iphone - 在 didReceiveLocalNotification 方法中识别本地通知

> ID：11259087
> 
> 赞同：0
> 
> 时间：2012-06-29T09:14:31.890
> 
> 标签：iphone, uilocalnotification

我已经在我的应用程序中设置了多个通知。

现在我想确定调用了哪个本地通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:35:21.713

当您收到本地通知时调用此函数

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif 
{
    NSLog(@"%@",[notif userInfo]);
} 
```

首先，当您安排 LocalNotification 时，然后将字典设置为`userInfo`.

```
Example:-
localNotif.userInfo = dic; 
```

在 Userinfo 字典中，您添加一个额外的 key 。当您确定收到哪种类型的本地通知时，您会收到通知

```
 -(void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif 
    {
        f ([notif.userInfo valueForKey:@"Key 1"]==@"Object 1") {

            NSLog(@"This is notification 1");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:17:26.373

要识别 UILocalNotification，

您需要设置 UIlocalNtification 的 userinfo 的属性。在 didRecieveNotification 方法之后使用此值，您可以确定调用了哪个 UILocalNotification

# environment-variables - 如何从脚本外部定义值？

> ID：11259091
> 
> 赞同：0
> 
> 时间：2012-06-29T09:14:53.003
> 
> 标签：environment-variables, nsis

我想将一些变量传递到我的`.nsi`脚本中。无论是从环境还是命令行，我该怎么做？

我[在文档](http://nsis.sourceforge.net/Docs/Chapter5.html#5.3)中找到了一个部分，建议我可以使用语法`$%envVarName%`在我的脚本中使用环境变量，但这似乎不起作用，当我有

```
File "/oname=$pluginsdir\inst.msi" "$%VERSION%-Installer-64bit.msi" 
```

我得到错误

```
File: "$%VERSION%-Installer-64bit.msi" -> no files found. 
```

`$VERSION`在我的环境中。

尝试读取环境变量或将值传递到我的脚本中的其他方式有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:34:19.607

`$%VERSION%`如果你使用应该可以工作`set VERSION=1.2.3.4`

或者您可以创建定义：`makensis -DVERSION=1.2.3.4 myscript.nsi`和`File: "${VERSION}-Installer-64bit.msi"`

# html - iPad 中的 Jquery Mobile 拆分视图

> ID：11259094
> 
> 赞同：2
> 
> 时间：2012-06-29T09:15:11.363
> 
> 标签：html, css, jquery-mobile, cordova

我是 jquery mobile 的新手。我正在使用 phonegap 和 jquery mobile(1.0.1) 开发 ipad 应用程序。我需要为我的应用程序添加拆分视图。我在谷歌搜索并找到**“ [http://asyraf9.github.com/jquery-mobile/](http://asyraf9.github.com/jquery-mobile/) ”**。

但这对我不起作用。我的问题。是否有其他关于 splitview 的教程或将**asyraf9 解决方案**添加 到我的应用程序的更好方法？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:29:20.980

我还尝试了 asyraf9 的解决方案，但它似乎效果不佳（而且也不是可配置的，除非你想在它的源代码中四处寻找）。到目前为止，它也已经好几个月没有更新了。

我最终改用 Sencha Touch，它看起来更好，而且背后有整个公司，而不是一个开发人员。它不是 jQuery 的插件，因此它不使用熟悉的 $-syntax 但这也意味着如果您希望 jquery 处理其他东西（如 xhr），它可能会正常工作。在下面的链接中查看他们的 splitview 和其他移动控件的演示。

[http://dev.sencha.com/deploy/touch/examples/production/kitchensink/](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T06:55:21.380

我正在做类似的事情。我正在使用 jQuery `.load()`，它似乎工作得很好

```
$('#sidepanel').load('path to file you're trying to load.html', function(responseText, textStatus, XMLHttpRequest){
  $('#sidepanel').trigger('create'); //this applies the jquery mobile stylings to the loaded content
}); 
```

`sidepanel`是您要将内容加载到的辅助视图的容器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T12:37:59.020

为 JQM <1.0 完成了拆分视图。它的设置方式很难与 JQM 集成，因为它基本上禁用了导航和视口，然后设置了它自己的。因此，如果您要让 splitview 工作，您将被绑定到您正在工作的单个页面。

如果您想尝试替代方案，请查看[multiview](http://www.stokkers.mobi/jqm/multiview/test/fix_triplePop.html) ( [Github](https://github.com/frequent/multiview) )，我基于 splitview 开始，但使用 JQM 导航运行。它仍在进行中，但我需要一个我正在做的项目，所以我正在修补它。

您将需要使用我修改后的 JQM 版本。JQM 内部还有两个调整，到目前为止我还无法删除。

# jquery - jQuery 使用 .text() + JSON 保存字符串并使用 .val() 读取会丢失换行符

> ID：11259096
> 
> 赞同：2
> 
> 时间：2012-06-29T09:15:28.443
> 
> 标签：jquery, ajax, json, text, line-breaks

我正在发送和检索数据以在`<textarea>`.

**发送：**

```
$.ajax({
           url: "./xxx/xxx",
           type: "POST",
           dataType: "json",
           data: JSON.stringify({
           text: $('#txtText').text(),
           xxx: $('#xxx').text()
        }) 
```

**检索**

```
if (data.d.Text != "") {
        $('#txtText').val(data.d.Text);
} 
```

结果是发送的正确文本，但**没有**换行符。我需要正确显示换行符。

我玩过`.text()`，`.html()`但`.val()`无法弄清楚。

***我正在使用 jQuery 1.7.2***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:43:58.930

您也应该使用`.val()`来检索内容，而不是`.text()`.

后者将只检索*从服务器下载的页面中*的值。

任何后续编辑只会更改字段的`.value`属性，而不是字段的文本节点子节点的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:21:49.533

添加代码以将 <br/> 替换为换行符 \n 字符

```
text_str = data.d.Text
text_str = text_str.replace("<br/>","\n"); 
$('#txtText').val(text_str); 
```

# delphi - 如何为 ListView 标题栏设置弹出菜单以及项目弹出菜单？

> ID：11259099
> 
> 赞同：7
> 
> 时间：2012-06-29T09:15:41.427
> 
> 标签：delphi, listview, popupmenu

我有一个 ListView`ViewStyle = vsReport`和两个弹出菜单：

1.  **列弹出菜单**，我想在用户右键单击标题栏时打开
2.  **项目弹出菜单**，必须在用户右键单击任何列表项/子项或项目下方的空白时打开。

显示菜单的最正确方法是什么？我应该处理哪些事件？

问题是当我设置`ListView.PopupMenu`属性时，右键单击 ListView 客户端矩形中的任何点后会出现弹出菜单。

当我处理`ListView.OnColumnRightClick`事件时，如果仅在单击列标题后触发，不包括标题栏的可用空间（在列的右侧）。

`LisView.OnMouseUp`仅在右键单击项目下方的空白后才会触发事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T13:18:26.617

您不必使用`PopupMenu`列表视图的属性，将其保留为未设置，您可以将处理程序附加到`OnContextPopup`事件并根据位置启动您想要的任何弹出菜单。例子：

```
procedure TForm1.ListViewContextPopup(Sender: TObject; MousePos: TPoint;
  var Handled: Boolean);
var
  HeaderRect: TRect;
  Pos: TPoint;
begin
  GetWindowRect(ListView_GetHeader(ListView.Handle), HeaderRect);
  Pos := ListView.ClientToScreen(MousePos);
  if PtInRect(HeaderRect, Pos) then
    PopupMenuColumns.Popup(Pos.X, Pos.Y)
  else
    PopupMenuItems.Popup(Pos.X, Pos.Y);
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:41:52.440

您可以大大简化它。创建两个弹出菜单（标题行和列各一个。`TListView.PopupMenu`在 IDE 中分配列弹出菜单。

将此用于 ListView 的事件处理程序：

```
procedure TForm1.ListView1ContextPopup(Sender: TObject; MousePos: TPoint; var Handled: Boolean);
var
  HeaderRect: TRect;
  HeaderHeight: Integer;
  Header: HWnd;
begin
  ListView1.PopupMenu := ColumnMenu;   // Default to ColumnMenu
  Header := ListView_GetHeader(ListView1.Handle);
  GetWindowRect(Header, HeaderRect);
  HeaderHeight := HeaderRect.Bottom - HeaderRect.Top;
  if MousePos.Y < HeaderHeight then
    ListView1.PopupMenu := HeaderMenu;
end; 
```

它与@Sertac 的方法略有不同，不调用`ClientToScreen`和`PtInRect`- 因为我们知道该点在 ListView 的范围内，所以对点击高度的简单测试足以知道我们是否在标题或列区域。它还确保始终至少有一个弹出菜单分配给`ListView`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:01:16.930

这就是我解决它的方法，但我不喜欢这个解决方案。如果你有更好的，请写下来，我会接受它是正确的。

```
uses
  CommCtrl;

procedure TForm1.FormCreate(Sender: TObject);
begin
  ListView.PopupMenu := TPopupMenu.Create(Self);
  ListView.PopupMenu.OnPopup := ListViewPopup;
end;

procedure TForm1.ListViewPopup(Sender: TObject);
var
  Pos: TPoint;
  SrcMenu: TPopupMenu;
  I: Integer;
  MenuItem: TMenuItem;
  Header: HWND;
  HeaderRect: TRect;
  HeaderHeight: Integer;
begin
  // Re-filling ListView's popup menu
  ListView.PopupMenu.Items.Clear();

  // Getting header height
  Header := ListView_GetHeader(ListView.Handle);
  GetWindowRect(Header, HeaderRect);
  HeaderHeight := HeaderRect.Bottom - HeaderRect.Top;
  Pos := ListView.ScreenToClient(ListView.PopupMenu.PopupPoint);

  // Clicked on header?
  if Pos.Y < HeaderHeight then
    SrcMenu := PopupMenuColumns
  else
    SrcMenu := PopupMenuItems;

  // Copying destired menu to ListView.PopupMenu
  for I := 0 to SrcMenu.Items.Count - 1 do
  begin
    MenuItem := TMenuItem.Create(FListViewPopupMenu);

    with SrcMenu.Items[I] do
    begin
      MenuItem.Action := Action;
      MenuItem.Caption := Caption;
      MenuItem.ShortCut := ShortCut;
      MenuItem.Checked := Checked;
      MenuItem.Enabled := Enabled;
      MenuItem.OnClick := OnClick;
      MenuItem.HelpContext := HelpContext;
      MenuItem.Name := Name;
      MenuItem.ImageIndex := ImageIndex;
    end;

    ListView.PopupMenu.Items.Add(MenuItem);
  end;

  ListView.PopupMenu.Images := SrcMenu.Images;
end; 
```

# java - 无法从 GraphAPI 创建相册

> ID：11259104
> 
> 赞同：0
> 
> 时间：2012-06-29T09:15:47.527
> 
> 标签：java, facebook-graph-api

虽然可以从 Facebook 的以下隐私设置创建相册，
但如果我使用 GraphAPI，则会出现以下错误。

API中没有具体的限制说明。如果您有任何从 GraphAPI 创建专辑的想法，请告诉我。 [http://developers.facebook.com/docs/reference/api/album/](http://developers.facebook.com/docs/reference/api/album/)

- 创建专辑名称的参数：albumName
隐私：{“value”：“CUSTOM”，“friends”：“SOME_FRIENDS”，“networks”：“”，“allow”：“xxxxxxx”，“deny”：“yyyyyyyyy” }

允许：特定朋友的 ID (xxxxxxx)
拒绝：家庭的 ID (yyyyyyyyy)

-错误原因
“错误”：{
“消息”：，“发生未知错误。”
“类型”：“OAuthException”，
“代码”：1
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:56:50.997

你可以试试这个：

```
$page_token = $facebook->api('/'.$page['id'],'GET',array('fields'=> 'access_token'));
            $facebook->setAccessToken($page_token['access_token']);

            $page_id = $page['id'];

        $facebook->setFileUploadSupport(true);

            $album_args = array(
               'message'=> 'test album',
               'name'=> 'Test Album'
            );

        try{

        $album = $facebook->api('/me/albums?access_token='.YOUR_ACCESS_TOKEN_HERE,'POST', $album_args);
            print_r($album);                
            $albumID = $album['id'];

            }
            catch(FacebookApiException $ex){
                echo $ex;
            } 
```

这应该在您的个人资料上创建一个相册！

# delphi - 来自 Delphi 2006 的 Unicode PChar

> ID：11259106
> 
> 赞同：0
> 
> 时间：2012-06-29T09:15:50.210
> 
> 标签：delphi, dll, unicode

我有一个用 XE2 编写的 DLL，它以 PChar 作为参数（因此是一个 unicode 字符串）。我希望在 Delphi 2006 中编写一个调用此 DLL 的应用程序。这可能吗，我如何传入 PChar 参数？如果我在 Delphi XE2 中这样做，我只会这样做：

```
tmpString := 'hello';
DLL_Call(PChar(tmpString)); 
```

我曾尝试在 Delphi 2006 中将我的 tmpString 定义为 WideString，但我相信 WideString 和 XE2 Unicode 字符串有很大不同？

有没有办法可以将字符串正确传递给 DLL？我控制着 DLL 源代码，所以我显然可以将函数定义更改为 PAnsiChar，但我不想这样做，如果可能的话，我希望从 Delphi 2006 方面获得解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:23:31.110

您需要将该函数声明为接收一个`PWideChar`. 然后使用`WideString`来容纳有效载荷。

```
function DLL_Call(S: PWideChar); stdcall; external 'mylib.dll';

......
var
  tmpString: WideString;
......
tmpString := 'hello';
DLL_Call(PWideChar(tmpString)); 
```

请记住，这`PChar`是一个别名。在 Unicode 之前的 Delphi 中，它是`PAnsiChar`. 在 Unicode Delphi 中，它是`PWideChar`. Pre-Unicode Delphi 完全能够调用任何 Unicode API，但必须`PWideChar`显式使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:27:20.223

> 我曾尝试在 Delphi 2006 中将我的 tmpString 定义为 WideString，但我相信 WideString 和 XE2 Unicode 字符串有很大不同？

他们是这样。但是，它们都可以从/转换为 C 风格的以 #0 结尾的 WideChar 数组，也就是 PWideChar。唯一的潜在问题是您不能传入包含 #0 的字符串，而不是作为终止符。

如果您尝试调用`UnicodeString`带有`WideString`参数的函数接受 a ，您的反对将是有效的，但这不是您正在做的事情。因此，您已经找到的解决方案是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:26:15.980

这实际上取决于 DLL 如何使用`PWideChar`传递给它的内容。只要 DLL 不对内存的分配方式做任何假设，它只从内存中读取或写入内存，那么 a`WideString`就可以正常工作。 `Widestring`并且`UnicodeString`由 RTL 以不同方式管理，但它们都包含 UTF-16 编码的有效负载，因此它们彼此内容兼容。两者都`#0`在其有效负载的末尾包含一个字符，这很重要，因为 DLL 只接受一个`PChar`指针，因此当转换为`PChar`. 为避免这种依赖性，您应该更新 DLL 以接受字符串长度作为参数，例如：

D2006：

```
function DLL_Call(S: PWideChar; L: Integer); stdcall; external 'mylib.dll'; 

var 
  tmpString: WideString; 

tmpString := 'hello'; 
DLL_Call(PWideChar(tmpString), Length(tmpString)); 
```

XE2：

```
function DLL_Call(S: PChar; L: Integer); stdcall; external 'mylib.dll'; 

var 
  tmpString: String; 

tmpString := 'hello'; 
DLL_Call(PChar(tmpString), Length(tmpString)); 
```

# .net - 是否存在某种方式为我的动态类型返回 PropertyInfo[]？

> ID：11259111
> 
> 赞同：1
> 
> 时间：2012-06-29T09:16:09.977
> 
> 标签：.net, object, reflection, dynamic

我想绑定我的自定义类型（使用运行时填充的属性或数据）。由于我在编译时不知道属性的数量，因此我需要创建一个包含它们和它们的值的列表。

稍后，我想将包含此对象的列表绑定到某个网格或 DropDownList。

我知道那些控件通过 DataSource 属性接收一个 DataSource（对象），当我调用 DataBind() 方法时，默认实现使用反射来获取属性和数据并写入该控件。

我有一个类型，让我们想象一下：

```
class MyDynamicDataObject {
Dictionary<string, object> _properties;

public MyDynamicDataObject() {
    _properties = new Dictionary<string, object>();
}

public void Add(string property, object value) {
    _properties.Add(property, value);   
} 
```

}

但是我需要知道“覆盖”或者说，以抽象的方式返回我的类型的属性，这些属性包含在 _properties 字典数据结构中。

我怎样才能让控件使用 DataBind 并使用默认实现（使用 Type.GetProperties） - 但不是返回我没有的类型属性，而是返回字典中包含的抽象？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:23:35.667

大多数数据绑定已经支持动态数据模型，但不支持`dynamic`数据模型。我的意思是：有这方面的现有机制，包括`ICustomTypeDescriptor`，（可能通过`TypeDescriptionProvider`）`ITypedList`，，和`PropertyDescriptor`。这是使用的机制`DataTable`和类似的机制，因此得到了很好的锻炼。由于您要绑定到一个列表，`ITypedList`因此可能是最适合实现的接口，这意味着您只需要编写一个自定义`PropertyDescriptor`来映射您的字典 API 和描述符 API。

这是一个winforms示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        using(var form = new Form())
        using(var grid = new DataGridView())
        {
            var list = new MySpecialList();
            var obj = new MyDynamicDataObject();
            obj["Foo"] = 123;
            obj["Bar"] = "def";
            list.Add(obj);
            obj = new MyDynamicDataObject();
            obj["Bar"] = "abc";
            obj["Blap"] = 123.4F;
            list.Add(obj);

            grid.DataSource = list;
            grid.Dock = DockStyle.Fill;
            form.Controls.Add(grid);
            Application.Run(form);
        }
    }
}
class MySpecialList : List<MyDynamicDataObject>, ITypedList
{
    PropertyDescriptorCollection ITypedList.GetItemProperties(PropertyDescriptor[] listAccessors)
    {
        // don't worry about sub-property access unless you need to
        if(listAccessors != null && listAccessors.Length != 0) throw new NotSupportedException();

        var allKeys = new HashSet<string>();
        foreach(var item in this)
        {
            foreach (string key in item.GetKeys()) allKeys.Add(key);
        }
        var props = allKeys.Select(key => new MyDynamicDataObjectDescriptor(key));
        return new PropertyDescriptorCollection(props.ToArray());
    }
    private class MyDynamicDataObjectDescriptor : PropertyDescriptor
    {
        public MyDynamicDataObjectDescriptor(string name) : base(name, new Attribute[0]) { }

        public MyDynamicDataObject GetObject(object component)
        {
            return (MyDynamicDataObject) component;
        }
        public override object GetValue(object component)
        {
            return GetObject(component)[Name];
        }
        public override void SetValue(object component, object value)
        {
            GetObject(component)[Name] = value;
        }
        public override bool CanResetValue(object component)
        {
            return false;
        }
        public override void ResetValue(object component)
        {
            throw new NotSupportedException();
        }
        public override bool ShouldSerializeValue(object component)
        {
            return false;
        }
        public override bool IsReadOnly
        {
            get { return false; }
        }
        public override Type ComponentType
        {
            get { return typeof (MyDynamicDataObject); }
        }
        public override Type PropertyType
        {
            get { return typeof (object); }
        }
    }

    string ITypedList.GetListName(PropertyDescriptor[] listAccessors)
    {
        throw new System.NotImplementedException();
    }
}
class MyDynamicDataObject
{
    // don't recommend inheriting this; confuses matters a lot...
    private Dictionary<string,object> props = new Dictionary<string, object>();
    public string[] GetKeys()
    {
        return props.Keys.ToArray();
    }
    public void Clear(string key)
    {
        props.Remove(key);
    }
    public object this[string key]
    {
        get
        {
            object value;
            if (!props.TryGetValue(key, out value)) value = null;
            return value;
        }
        set
        {
            props[key] = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:13:18.210

```
 public interface IDynamicObject
{
    string[] Properties { get; }
    void Clear();
    object this[string property] { get; set; }
}

public class DynamicObject : IDynamicObject
{
    readonly Dictionary<string, object> _dynamicProperties = new Dictionary<string, object>();

    public string[] Properties
    {
        get { return _dynamicProperties.Keys.ToArray(); }
    }

    public void Clear() { _dynamicProperties.Clear(); }

    public object this[string property]
    {
        get
        {
            object value;

            if (!_dynamicProperties.TryGetValue(property, out value))
                value = null;

            return value;
        }

        set
        {
            _dynamicProperties[property] = value;
        }
    }
}

public class DynamicObjectPropertyDescriptor<T> : PropertyDescriptor
    where T : IDynamicObject
{
    public DynamicObjectPropertyDescriptor(string name) : base(name, new Attribute[0])
    {

    }

    T Get(object component)
    {
        return (T)component;
    }

    public override bool IsReadOnly                                  { get { return false; } }
    public override bool CanResetValue(object component)             { return true; }
    public override void ResetValue(object component)                { Get(component)[Name] = null; }

    public override Type ComponentType                               { get { return typeof(T); } }
    public override Type PropertyType                                { get { return typeof(object); } }

    public override object  GetValue(object component)               { 
        return Get(component)[Name];
    }
    public override void    SetValue(object component, object value) { 
        Get(component)[Name] = value; 
    }

    public override bool ShouldSerializeValue(object component)      { return false; }
}

public class DynamicList<T> : List<T>, ITypedList 
    where T : IDynamicObject
{
    int bindingIndex = 0;

    public PropertyDescriptorCollection GetItemProperties(PropertyDescriptor[] listAccessors)
    {
        if (listAccessors != null && listAccessors.Length != 0)
            throw new NotSupportedException();

        if (Count == 0)
            return new PropertyDescriptorCollection(new[] { new DynamicObjectPropertyDescriptor<T>("-") });

        PropertyDescriptorCollection result = new PropertyDescriptorCollection(this[bindingIndex].Properties.Select(prop => new DynamicObjectPropertyDescriptor<T>(prop)).ToArray());

        if (++bindingIndex == Count)
            bindingIndex = 0;

        return result;
    }

    public string GetListName(PropertyDescriptor[] listAccessors)
    {
        return typeof(DynamicList<T>).Name;
    }
} 
```

要查看此工作：

```
DynamicList<DynamicObject> list = new DynamicList<DynamicObject>();

        DynamicObject a1 = new DynamicObject();

        a1["nome"] = "Goncalo Dias";
        a1["numero"] = 30337;

        DynamicObject a2 = new DynamicObject();

        a2["nome"] = "Carlos Antunes";
        a2["numero"] = 10222;

        DynamicObject a3 = new DynamicObject();

        a3["nome"] = "Tiago Rodrigues";
        a3["numero"] = 4040;

        DynamicObject a4 = new DynamicObject();

        a4["nome"] = "Digoo Martins";
        a4["numero"] = 1220;
        a4["morada"] = "Rua da esquina";

        list.Add(a1);
        list.Add(a2);
        list.Add(a3);
        list.Add(a4);

        ultraGrid1.DataSource = list;
        ultraGrid1.DataBind(); 
```

# java - 处理（2d 图形）是否适合大型项目？

> ID：11259116
> 
> 赞同：3
> 
> 时间：2012-06-29T09:16:28.947
> 
> 标签：java, graphics, clojure, 2d, processing

我将在 clojure 中开发一个体面大小的游戏，现在它将具有 2d 图形。Processing（或者更确切地说，Quil，它只是 Processing 的 clojure 包装器）是用于此目的的合适工具吗？

Processing 将自己呈现为一种快速试验不同生成和操作图形的方式的方法，而不是可扩展的 2d 图形库，但我看不出有任何明显的原因为什么不能这样使用它，只要你小心正确地将逻辑代码与渲染代码分开。

如果有更好的选择，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:41:12.170

处理当然很酷，但有点专门用于可视化/交互式动画。它还拥有自己的为可视化应用程序设计的迷你语言。虽然您可以使用它制作出不错的游戏，但您可能会开始遇到性能问题，因为这超出了通常的使用范围。

对于一个体面的游戏，我希望你最终会想要直接使用 OpenGL，在这种情况下[LWJGL](http://www.lwjgl.org/)可能是一个更好的选择。

最终，您可能需要同时使用两者来制作原型并找出最有效的方法。作为一个粗略的基准测试，您将希望以 100+ FPS 的速度渲染一个全屏的瓦片和 1,000 个精灵，而 CPU 少于 20%。如果您可以证明处理可以处理，那么您可能会没事。

您可以考虑的其他选项：

*   Swing - 适用于简单的 2D 游戏。它的优点是它内置在标准 Java 发行版中，并且有很多很好的教程。并不是真正为游戏设计的，但只要您要求不高，就可以正常工作。
*   JavaFX 2.0 - 大致打算与 Flash（富 Internet 应用程序）放在同一空间。看起来很酷，但仍然相当新。同样，对于简单的 Flash 风格的游戏来说可能还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:53:58.193

我会小心使用处理。我不确定 PC，但在 Mac 上处理可以有相当高的 CPU 使用率，这取决于你在做什么。因此，如果您的游戏是跨平台的，可能会有更好的选择。如果它是一个在线游戏，为什么不使用 Flash 呢？脚本语言相距不远，在“处理：视觉设计师和艺术家的编程手册”（Casey Reas 和 Ben Fry）一书中，后面有一个方便的小部分（第 686 - 691 页）显示了比较语法Processing、Java、Actionscript 和 Lingo，这将是帮助您入门的有用方式。

# android - Android是否支持虚拟内存

> ID：11259117
> 
> 赞同：5
> 
> 时间：2012-06-29T09:16:46.763
> 
> 标签：android, linux, memory-management, linux-kernel

Android是否支持虚拟内存概念？我读到它确实使用分页但不使用交换空间。也就是说，它在很大程度上依赖于能够 mmap() 文件并根据需要从文件中获取内核页面（并在不需要时删除这些页面）。然而，它不使用交换空间来分页脏页。

可以请一些机构详细说明吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:31:47.577

Android 确实支持虚拟内存概念。Android内核确实支持swap。您可以通过在内核源的.config文件中查找“CONFIG_SWAP=y”来确认。

但是启用交换也应该使用交换分区并运行“swapon”。因此，虽然内核支持 SWAP，但 android 内核不使用它。您也可以通过android的adb shell中的“cat /proc/meminfo”来确认它。

PS：分页和交换空间不是一回事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T05:53:28.327

以下是一些与android内存管理相关的链接。 [http://mobworld.wordpress.com/2010/07/05/memory-management-in-android/](http://mobworld.wordpress.com/2010/07/05/memory-management-in-android/) [http://android-developers.blogspot.kr/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.kr/2011/03/memory-analysis-for-android.html)

Android 使用虚拟内存但未在 android 内核中启用交换分区

# .net - 在 C++/CLI 中的 .Net 委托中封装对本机对象的引用

> ID：11259124
> 
> 赞同：0
> 
> 时间：2012-06-29T09:17:07.963
> 
> 标签：.net, c++-cli, wrapper

假设有一个静态的 .Net 方法

```
static void RegisterDelegate(Action<array<Object^>^>^ handler); 
```

在我们无法修改的某些程序集中定义。

我确实有以下代码：

```
static void HandleCallback(Action<array<Object^>^>^ handler, NATIVE_CPP_TYPE *nativeObject){
    //some code here
}

static void TestCall(NATIVE_CPP_TYPE *nativeObject){
    //RegisterDelegate(??);
} 
```

where`NATIVE_CPP_TYPE`是一些不可序列化且仅本机的类型，也无法修改。

调用`TestCall(ptrToObj)`现在应该创建一个类型的委托`Action<array<Object^>^>`。这个委托应该在被调用`HandleCallback`时调用并传递它自己的参数（对象数组）和指向最初传递给`TestCall`函数的本机对象的指针。因此，指针需要存储在某种闭包中。

你知道如何做到这一点吗？我考虑过`System::Linq::Expressions`命名空间，但是我不能用那种表达式封装原生对象。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:50:50.253

据我所知，在 C++/CLI 中你不能做托管 lambdas。当然，您可以创建自己的类来存储本机类型，然后公开一个用作委托的方法：

```
public ref class ManagedClass
{
    static void RegisterDelegate(Action<array<Object^>^>^ handler)
    {

    }
};

class NATIVE_CPP_TYPE
{

};

static void HandleCallback(array<Object^>^ handler, NATIVE_CPP_TYPE *nativeObject)
{     
    //some code here 
}  

public ref class HandleCallbackWithNativeType
{
    NATIVE_CPP_TYPE * m_pNativeObject;

public:
    HandleCallbackWithNativeType(NATIVE_CPP_TYPE *nativeObject)
    {
        m_pNativeObject = nativeObject;
    }

    void Execute(array<Object^>^ array)
    {
        HandleCallback(array, m_pNativeObject);
    }
};

static void TestCall(NATIVE_CPP_TYPE *nativeObject)
{
    // This type will act as your closure "capturing" nativeObject.
    HandleCallbackWithNativeType ^ pHandler = gcnew HandleCallbackWithNativeType(nativeObject);
    Action<array<Object^>^>^ handler = gcnew Action<array<Object^>^>(pHandler, &HandleCallbackWithNativeType::Execute);
} 
```

它不像 lambda 语法那样方便，但它可以完成这项工作。

# iphone - 无法在 ipad2 上下载应用程序

> ID：11259127
> 
> 赞同：2
> 
> 时间：2012-06-29T09:17:10.443
> 
> 标签：iphone, iis

在过去的几天里，我在 ipad 上下载应用程序时遇到了问题。

我所做的是在我的 IIS 服务器上托管 .ipa 和 .plist 并在服务器上安装证书。实际上，我正在提供用于下载应用程序的 https 链接。

每当从ipad端点击服务时，有时会出现错误：“无法连接服务器或此时无法下载并重试多次”但无法下载

我正在发送 .plist 文件的代码和我们调用 .plist 文件的 html。

plist部分的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>

<key>items</key>

<array>

<dict>

<key>assets</key>

<array>

<dict>

<key>kind</key>

<string>software-package</string>

<key>url</key>

<string>https://<ServerName>:<PortNumber>/abcV.ipa</string>

</dict>

</array>

<key>metadata</key>

<dict>

<key>bundle-identifier</key>

<string>abc</string>

<key>bundle-version</key>

<string>1.0</string>

<key>kind</key>

<string>software</string>

<key>subtitle</key>

<string>abcV.25</string>

<key>title</key>

<string>abcV.25</string>

</dict>

</dict>

</array>
</dict>
</plist> 
```

我将正文中的 itms 服务称为：

```
 <a href="itms-services://?action=download- manifest&url=https://<ServerIP>:<PortNumber>/abc.plist">Install the app</a> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:28:31.050

您是否尝试过使用普通的 http 而不是 https？

另外，当我使用 java web 服务时，url 将是

http://:port//abcV.ipa

只需检查在此之后附加 projectName 路径组件`http://<serverIP>:port/`

另外，编写一个示例 html 并检查它是否打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T21:02:38.110

您似乎在 URL 中有一个空格。证书只需要安装在 iOS 设备端。如果这不起作用，那么这里的问题可能是您的 MIME 类型。查看 Apple 文档以获取有关 itms-services:// 的 MIME 类型的更深入信息

# visual-studio-2010 - 项目引用和项目依赖有什么区别？

> ID：11259128
> 
> 赞同：26
> 
> 时间：2012-06-29T09:17:12.110
> 
> 标签：visual-studio-2010, build

我在 Visual Studio 2010 中有一个简单的解决方案，其中包含一些静态库、一些 DLL 和一个可执行文件。

一些库相互依赖（例如，DLL 需要在构建 DLL 本身之前构建两个静态库项目），似乎有两种方法可以实现这一点：

1）如果我右键单击解决方案，我可以选择“项目依赖项...”并设置构建顺序

2) 我可以右键单击 DLL 项目并选择 Properties->Framework and References 然后添加一个新的引用。

#1 和 #2 有什么区别？在 Visual Studio 2010 中表达两个项目之间的构建依赖关系的更好方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-29T13:13:49.327

“项目参考定义”和“项目依赖定义”之间的唯一区别是定义输出程序集包含/排除到主项目链接命令中的元数据。

在 Visual Studio 2010 及以后的版本中，Microsoft 希望您开始使用“框架和引用”对话框，并停止使用“项目依赖项”对话框（目前，“项目依赖项”对话框仍然存在，可能会被删除在将来）。

这是一个讨论这个的博客条目，以及 Visual Studio 开发人员之一的其他“VS2010 的项目设置更改”：

[https://devblogs.microsoft.com/cppblog/project-settings-changes-with-vs2010/](https://devblogs.microsoft.com/cppblog/project-settings-changes-with-vs2010/)

# android - 在 pdfViewer 中调整屏幕

> ID：11259131
> 
> 赞同：2
> 
> 时间：2012-06-29T09:17:34.677
> 
> 标签：android, resize, screen, pdf-viewer

我有一个查看 pdf 的应用程序，问题是 pdf 超出屏幕，如果我缩小 pdf，则没有聚焦。

我正在使用这个 SO 答案中的代码。

[使用 PDFViewer 阅读 PDF](https://stackoverflow.com/questions/11224479/open-and-view-pdf-in-my-application/11225078#11225078)

![图像1](../Images/04c4eeebf624959cb3d67f6d3d619d07.png) ![在此处输入图像描述](../Images/81d25ca55be0aa93b9996a53e8420f64.png)

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T07:55:23.023

要增加 PDFVIEWER.jar 的视图大小，请创建一个抽象类或只需在 [此处复制代码](https://github.com/jblough/Android-Pdf-Viewer-Library/blob/master/src/net/sf/andpdf/pdfviewer/PdfViewerActivity.java)

对我来说，我将课程命名为“PdfViewerActivities”

要获得所需的缩放量，请参阅单击pdf页面中缩放图标按钮时触发的logcat

"PDFVIEWER ST='阅读第 1 页，缩放：0.435'"

在私有静态最终浮点 STARTZOOM = 0.435f; 根据您所需的缩放量更改值

然后将该类扩展到您的主类

```
public class PDF_Reader extends PdfViewerActivities{

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
}

@Override
public int getPreviousPageImageResource() {
  return R.drawable.left_arrow;
}

@Override
public int getNextPageImageResource() {
  return R.drawable.right_arrow;
}

@Override
public int getZoomInImageResource() {
    return R.drawable.zoom_in;
}

@Override
public int getZoomOutImageResource() {
  return R.drawable.zoom_out;
}

@Override
public int getPdfPasswordLayoutResource() {
  return R.layout.pdf_file_password;
}

@Override
public int getPdfPageNumberResource() {
    return R.layout.dialog_pagenumber;
}

@Override
public int getPdfPasswordEditField() {
   return R.id.etPassword;
}

@Override
public int getPdfPasswordOkButton() {
   return R.id.btOK;
}

@Override
public int getPdfPasswordExitButton() {
  return R.id.btExit;
}

@Override
public int getPdfPageNumberEditField() {
   return R.id.pagenum_edit;
}
} 
```

希望对大家有帮助^_^v

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:11:26.857

最后，我使用了[APV PDF Viewer](http://code.google.com/p/apv/)中运行良好的代码。

# php - 在 php mysql 中使用随机不能随机 id？

> ID：11259132
> 
> 赞同：0
> 
> 时间：2012-06-29T09:17:42.110
> 
> 标签：php, mysql

我有一个示例代码

```
products(id, name)
1 | Apple
2 | Sony
3 | Nokia
4 | Samsung
5 | LG
6 | Motorola
7 | Ekricson 
```

和mysql：

```
SELECT id, name FROM `products` AS prod 
ORDER BY RAND(prod.id) LIMIT 5 
```

当我运行代码时，结果是：

```
4 | ...
7 | ...
1 | ...
5 | ...
6 | ... 
```

但接下来......结果是：

```
4 | ...
7 | ...
1 | ...
5 | ...
6 | ... 
```

随机运行时 Id 不改变，如何修复 ix

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:21:52.527

你应该使用`ORDER BY RAND()`而不是`ORDER BY RAND(prod.product_id)`

来自[兰德手册](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)：

```
RAND(), RAND(N)

Returns a random floating-point value v in the range 0 <= v < 1.0.
If a constant integer argument N is specified, it is used as the seed value
which produces a repeatable sequence of column values. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:21:08.290

函数内部的参数`RAND(x)`是种子，所以你每次都用相同的值播种它。相反，让它保持原样`RAND()`，它会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:28:18.577

使用这种方式：

```
SELECT id, name FROM `products` AS prod 
ORDER BY RAND() LIMIT 5; 
```

[在此处](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)查看手册

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:23:36.567

SELECT id, name FROM `products`AS prod ORDER BY `RAND()`LIMIT 5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T09:23:40.420

您可能想要的只是`ORDER BY RAND()`而不是`ORDER BY RAND(prod.id)`- 如果您给 RAND() 一个整数参数，它将用作种子值，因此您将始终获得相同的“随机”值。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)。

# deployment - Ubuntu 12.04 服务器上的 JBoss AS 7 - 部署错误

> ID：11259133
> 
> 赞同：0
> 
> 时间：2012-06-29T09:17:44.797
> 
> 标签：deployment, war, jboss7.x, ubuntu-server

## **设置**

我使用 Ubuntu 12.04 64 位设置了一个虚拟机，我想在其中运行 JBoss AS 7 并将 Nexus OSS 部署为一个 war 文件。

[本教程](http://alexander.holbreich.org/2011/11/jboss-7-setup-linux/)用于将 JBoss 设置为 linux 上的服务。我也找到[了这个线程](https://stackoverflow.com/questions/6880902/start-jboss-7-as-a-service-on-linux)，但是配置脚本配置的效果不如 JBoss 中附带的脚本`bin/init.d/`。

## **部署问题**

不，我正在尝试部署[Nexus OSS 战争文件](http://www.sonatype.org/downloads/nexus-2.0.6.war)。我有两种不同的方法。

**1.通过网络界面部署它**

我收到了这个错误

```
Request
{
  "address" => [("deployment" => "nexus")],
  "operation" => "deploy"
}
Response
Internal Server Error
{
 "outcome" => "failed",
 "failure-description" => {"JBAS014671: Failed services" =>{"jboss.web.deployment.default-host.\"/nexus-2.0.6\"" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\"/nexus-2.0.6\": JBAS018040: Failed to start context"}},
 "rolled-back" => true
} 
```

**2\. 在 /usr/local/jboss-as-7/standalone/deployments/ 中自动部署它**

```
JBAS015052: Did not receive a response to the deployment operation within the allowed timeout period [60 seconds].
Check the server configuration file and the server logs to find more about the status of the deployment. 
```

但是我可以找到任何日志。我搜索

```
/var/log/jboss
$JBOSS_HOME/standalone/log 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:21:56.697

我没有尝试过最新的 WAR，但我尝试在 JBoss AS 7、GlassFish、Geronimo 和 TomEE 上部署 Nexus WAR，但没有成功。他们都有不同的错误。从我收集到的信息来看，WAR 无法在任何 Java EE 应用服务器上运行。我只能让它在像 Tomcat 或码头这样的 servlet 容器上工作。

# windows - 如何在 Delphi 中使用 SID 设置 Windows 文件夹的权限

> ID：11259135
> 
> 赞同：0
> 
> 时间：2012-06-29T09:17:59.230
> 
> 标签：windows, delphi, winapi, delphi-7

刚才我正在考虑使用在安装软件包期间触发的小型应用程序修复本地化错误。小应用程序本质上是暴力破解应用程序数据中我们自己的文件夹的权限，以将每个人设置为完全访问权限。

问题是每个人都没有被本地化。我知道我需要使用 SID，这对每个人来说都是`S-1-1-0`. 我找不到使用 SID 设置权限的 WinAPI 函数。

刚才用到的函数`BuildExplicitAccessWithName`和`SetNamedSecurityInfo`如下图

```
function setfullaccess(foldername:string):boolean;    //B2415 MDE
var
 pDACL: PACL;
 pEA: PEXPLICIT_ACCESS_A;
 R: DWORD;
begin
 result := true;
 pEA := AllocMem(SizeOf(EXPLICIT_ACCESS));
 BuildExplicitAccessWithName(pEA, 'EVERYONE', GENERIC_ALL{GENERIC_READ},GRANT_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT{NO_INHERITANCE});
 R := SetEntriesInAcl(1, pEA, nil, pDACL);
 if R = ERROR_SUCCESS then
 begin
  if SetNamedSecurityInfo(pchar(foldername), SE_FILE_OBJECT,DACL_SECURITY_INFORMATION, nil, nil, pDACL, nil) <> ERROR_SUCCESS then result := false;
  LocalFree(Cardinal(pDACL));
 end
 else result := false;//ShowMessage('SetEntriesInAcl failed: ' + SysErrorMessage(R));
end; 
```

我应该考虑使用哪些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:32:51.807

在对 WinAPI 文档进行了一些搜索后，我找到了以下解决方案。本质上，我使用 SID 来查找“可读”名称，然后使用它。这不会是最优雅的解决方案，但它对我有用。

```
procedure TTestform.Button4Click(Sender: TObject);
var
 Sid: PSID;
 peUse: DWORD;
 cchDomain: DWORD;
 cchName: DWORD;
 Name: array of Char;
 Domain: array of Char;
 pDACL: PACL;
 pEA: PEXPLICIT_ACCESS_A;
 R: DWORD;
 foldername: String; //Temp to hardcode
begin
 foldername := 'C:\TEMP'; //Temp to hardcode
 Sid := nil;
 Win32Check(ConvertStringSidToSidA(PChar('S-1-1-0'), Sid));
 cchName := 0;
 cchDomain := 0;
 //Get Length
 if (not LookupAccountSid(nil, Sid, nil, cchName, nil, cchDomain, peUse)) and (GetLastError = ERROR_INSUFFICIENT_BUFFER) then
 begin
  SetLength(Name, cchName);
  SetLength(Domain, cchDomain);
  if LookupAccountSid(nil, Sid, @Name[0], cchName, @Domain[0], cchDomain, peUse) then
  begin
   pEA := AllocMem(SizeOf(EXPLICIT_ACCESS));
   BuildExplicitAccessWithName(pEA, PChar(Name), GENERIC_ALL{GENERIC_READ},GRANT_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT{NO_INHERITANCE});
   R := SetEntriesInAcl(1, pEA, nil, pDACL);
   if R = ERROR_SUCCESS then
   begin
    if SetNamedSecurityInfo(pchar(foldername), SE_FILE_OBJECT,DACL_SECURITY_INFORMATION, nil, nil, pDACL, nil) <> ERROR_SUCCESS then ShowMessage('SetNamedSecurityInfo failed: ' + SysErrorMessage(GetLastError));
    LocalFree(Cardinal(pDACL));
   end
   else ShowMessage('SetEntriesInAcl failed: ' + SysErrorMessage(R));
  end;
 end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T15:46:15.627

避免同时使用`lookup`和的替代方法`build`

```
var SID: JwaWinNT.PSid; // JWA clashes with Delphi XE2 Windows.Windows.PSID type
    pDACL: PACL;
    EA: EXPLICIT_ACCESS;
    SID_DATA: array[1..SECURITY_MAX_SID_SIZE] of byte;
    SID_DATA_SIZE: DWORD;

   SID_DATA_SIZE := Length(SID_DATA);
   Pointer(SID) := @SID_DATA; // @SID_DATA[Low(SID_DATA)]  for non-static arrays 

    pDACL := nil;
//   if ConvertStringSidToSid(Auth_Users_SID, SID) then
   if CreateWellKnownSid(WinAuthenticatedUserSid, nil, SID, SID_DATA_SIZE) then
   try
      EA.grfInheritance := SUB_CONTAINERS_AND_OBJECTS_INHERIT; // NO_INHERITANCE; // 0
      EA.grfAccessMode :=  GRANT_ACCESS;
      EA.grfAccessPermissions := GENERIC_ALL;

      EA.Trustee.MultipleTrusteeOperation := NO_MULTIPLE_TRUSTEE;
      EA.Trustee.pMultipleTrustee := nil;
      EA.Trustee.TrusteeType := TRUSTEE_IS_WELL_KNOWN_GROUP;
      EA.Trustee.TrusteeForm := TRUSTEE_IS_SID;
      EA.Trustee.ptstrName   := pointer(SID); 

      if ERROR_SUCCESS = SetEntriesInAcl(1, @EA, nil, pDACL) then begin

       // optional creation of PATH and 0-bytes dummy file skipped 

        SetNamedSecurityInfo(pchar(foldername), SE_FILE_OBJECT, ....  {see the author's answer above }
      end;

   finally
     LocalFree(pDACL); // SID is not allocated on heap - no need to free it
   end; 
```

也可以在[http://forum.vingrad.ru/forum/topic-374131/0.html#st_15_view_0的第 2 页对照单元检查此片段](http://forum.vingrad.ru/forum/topic-374131/0.html#st_15_view_0)

# ruby - 使用 Windows 命令 shell 无法识别 sass

> ID：11259140
> 
> 赞同：0
> 
> 时间：2012-06-29T09:18:23.470
> 
> 标签：ruby, sass

我已经在 Win 7 Enterprise 机器上安装了 ruby​​ 和 sass gem。我在整个过程中遇到了问题，必须下载 gem 并从本地安装它们以避免其他问题。

```
gem install --local sass-3.1.19.gem 
```

我正在尝试`sass --watch styles.sass:styles.css`，但我从命令行得到标准的 sass 无法识别错误。

我对红宝石真的很陌生，所以我很可能错过了一步。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T06:19:35.663

为了在不指定完整路径的情况下运行命令，您需要在`PATH`变量中包含程序的路径。

因此，如果您的程序位于`C:\Programs\rubygems\gem\sass`您需要添加`C:\Programs\rubygems\gem\`到`PATH`.

[此处](http://www.voidspace.org.uk/python/articles/command_line.shtml#path)`PATH`描述了为 Windows 命令行提示添加文件夹的过程。

对于 Windows Powershell，请在 SO 上检查[Setting Windows PowerShell path variable here。](https://stackoverflow.com/questions/714877/setting-windows-powershell-path-variable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-23T09:17:08.570

用 NPM 安装 sass 后，你得到了这个：

```
npm install -g sass 
```

> file:///C:/Users/yourName/AppData/Roaming/npm/sass -> C:/Users/Administrador/AppData/Roaming/npm/node_modules/sass/sass.js

您可以创建路径。转到环境变量 -> 系统变量 -> 路径 -> Edith ，并包含 file:///C:/Users/yourName/AppData/Roaming/npm/sass。然后，接受一切。它完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:58:30.560

是的，把路径放到我的 ruby​​ bin 确实解决了这个问题。

我的电脑 --> 右键单击​​，属性 --> 高级系统设置（左侧列） --> 环境变量 --> 在底部列表中找到路径，突出显示并编辑 --> 包含 ;c:\path-to-最后是 ruby​​\bin --> 可以通过 windows 退出。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-13T18:12:36.970

如果您使用`Windows 10 v1607 (latest update as March 2017)`，则需要执行以下步骤：

1.  右键单击开始菜单并选择`System`
2.  点击`Advanced System Settings` *（左栏）*
3.  点击`Environment variables`按钮
4.  在顶部，选择`Path`（或`PATH`），然后单击`Edit`按钮
5.  在打开的窗口中，单击`New`按钮
6.  在选定的输入区域中，输入（例如）`C:\Ruby22-x64\bin\` *（它必须是 ruby​​ 的 bin 文件夹的路径）*
7.  单击`OK`, 两次
8.  重新打开`Command-Prompt`，现在`sass`可以观看和编译你的 sass 文件了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-04T12:13:17.843

如果您安装了 Node，请使用节点终端而不是 windows/VSCode 终端。

在 Windows 开始按钮右侧的 Windows 搜索工具中搜索 Node 终端。

# c# - 调试停止 Windows 服务

> ID：11259143
> 
> 赞同：2
> 
> 时间：2012-06-29T09:18:36.993
> 
> 标签：c#, .net, wcf, windows-services

我在 VS2010 中调试 Windows 服务：

```
static void Main()
{
    #if (DEBUG)
        var s1 = new Service1();
        s1.Start();
        Thread.Sleep(Timeout.Infinite);
    #else
        ServiceBase.Run(new ServiceBase[] 
            { 
                new Service1() 
            });
    #endif
} 
```

这让我可以在调试器中运行服务。问题是，在启动时，服务打开了一个 WCF 通道，在我通过停止调试终止进程后，该通道似乎占用了一个套接字。当我停止调试或服务停止时，如何关闭此套接字。我尝试在服务析构函数以及`OnStop`and`OnShutdown`方法中设置断点，但这些都没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:52:08.913

据我所知，当您在 Visual Studio 中结束调试时，该进程只是在没有调用终结器的情况下被终止，甚至代码定位`finally`块也没有执行。

# java - 如何在 Java 中下载 .msi 文件

> ID：11259144
> 
> 赞同：0
> 
> 时间：2012-06-29T09:18:40.860
> 
> 标签：java

我想使用 Java 下载 .msi 文件。我尝试使用以下代码下载文件

```
PrintWriter out = null;
FileInputStream fileToDownload = null;
BufferedReader bufferedReader = null;
try {
        out = response.getWriter();
        fileToDownload = new FileInputStream(DOWNLOAD_DIRECTORY + FILE_NAME);
        bufferedReader = new BufferedReader(new InputStreamReader(fileToDownload));

        //response.setContentType("application/text");
        //response.setContentType("application/x-msi");
        //response.setContentType("application/msi");
        //response.setContentType("octet-stream");
        response.setContentType("application/octet-stream");
        //response.setContentType("application/x-7z-compressed");
        //response.setContentType("application/zip");
        response.setHeader("Content-disposition","attachment; filename=" +FILE_NAME );
        response.setContentLength(fileToDownload.available());

        System.out.println("\n now file download is starting");
        String NextLine = "";
        while((NextLine = bufferedReader.readLine()) != null){
            out.println(NextLine);
        }
        out.flush();                                

    } catch (IOException e) {
        out.write("<center><h2>The Installer is not Available on Server</h2></center>");
        System.out.println("\n Got Exception while getting the input Stream from the file==>"+e);
        log.error("Error::", e);
    }
    finally{
        if(null != bufferedReader){
            try {
                bufferedReader.close();
            } catch (IOException e) {
                System.out.println("\n Error in closing buffer Reader==>"+e);
                log.error("Error::", e);
            }
        }// End of if

        if(null != fileToDownload){
            try {
                fileToDownload.close();
            } catch (IOException e) {
                System.out.println("\n Error in closing input stream==>"+e);
                log.error("Error::", e);
            }
        }// End of if
    }// End of finally 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:11:02.670

在这种情况下，您无法读取二进制（msi）文件`readline()`。您的代码完全错误，无法正常工作。这是一个简单的功能，可让您做您想做的事。

```
 private void doDownload( HttpServletRequest req, HttpServletResponse resp,String filename, String original_filename )throws IOException
            {
            File f = new File(filename);
            int  length   = 0;
            ServletOutputStream op = resp.getOutputStream();
            ServletContext context  = getServletConfig().getServletContext();
            String  mimetype = context.getMimeType( filename );
            resp.setContentType( (mimetype != null) ? mimetype : "application/octet-stream" );
            resp.setContentLength( (int)f.length() );
            resp.setHeader( "Content-Disposition", "attachment; filename=\"" + original_filename + "\"" );
            byte[] bbuf = new byte[BUFSIZE];
            DataInputStream in = new DataInputStream(new FileInputStream(f));
            while ((in != null) && ((length = in.read(bbuf)) != -1)){
            op.write(bbuf,0,length);
            }
            in.close();
            op.flush();
            op.close();
        } 
```

在您的函数中创建`doDownload()`函数`servlet`并将所需参数从 或任何您喜欢的有效位置传递给该`doGet`函数`doPost`。

**参数：**

*   @param req 请求

*   @param resp 响应

*   @param filename 要下载的文件的名称。

*   @param original_filename 浏览器应该接收的名称。

# tridion - 扩展 GUI 字段

> ID：11259149
> 
> 赞同：-3
> 
> 时间：2012-06-29T09:18:54.500
> 
> 标签：tridion, tridion-2011

我想扩展各个 GUI 元素，进行一些自定义处理，然后调用默认函数。

例如：每当在组件窗口中选择特定的输入元素时，我想向与该字段关联的用户显示一个提示。

请提供一些指示。

> ### #
> 
> 很抱歉我之前尝试重新构建问题。
> 
> ### #
> 
> 实际上，我有一个包含四个字段的架构，我的要求是在焦点位于特定字段时显示帮助文本。
> 
> 其中一个字段包含国家名称：因此，当焦点位于国家名称（单个文本字段）上时，我需要在文本字段上显示“请输入国家名称”。这样编辑器就可以理解相同的内容，而无需使用 Schema Description 字段。
> 
> 所以我的问题是我们能否在组件编辑视图中捕获所有类型字段（如多媒体、RTF、单行）的事件？
> 
> 希望能够让我的问题更清楚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:09:20.873

您必须为此扩展组件编辑屏幕。我建议您阅读 Tridion GUI 扩展：

*   [www.sdltridionworld.com](http://www.sdltridionworld.com) ,
*   [SDLL直播内容](http://sdllivecontent.sdl.com/LiveContent/web/ui.xql?action=html&resource=login.html)
*   [Tridion 开发者博客](http://www.tridiondeveloper.com/)

此外，搜索 stackoverlow 可能会有所帮助：[扩展发布屏幕](https://stackoverflow.com/questions/11240878/extending-the-current-publishing-unpublishing-screen)

PowerTools 项目是一个有价值的示例来源。你可以在[这里找到](http://code.google.com/p/tridion-2011-power-tools/)

提出更具体的问题可以让我们为您提供更具体的帮助。

# magento - Magento 目录价格规则条件“包含”不起作用

> ID：11259150
> 
> 赞同：2
> 
> 时间：2012-06-29T09:18:56.733
> 
> 标签：magento, conditional-statements, catalog, magento-rules

我正在使用 Magento 并尝试使用目录价格规则创建促销活动。我想使用 SKU 作为条件。如果我执行以下操作：

**SKU 等于 N12380_Black**

它工作正常。

但是，如果我这样做：

**SKU 包含 N12380**

它根本不起作用。我需要它工作，以便我可以一次将规则应用于多个项目。Magento 版本是 1.5.0.1

此版本中是否存在可能导致问题的错误？如果是这样，有人知道解决方法吗？我根本看不出我做错了什么——我检查了所有 SKU 详细信息，但似乎没有任何效果。

如果这对任何人都有帮助，它似乎规则脚本位于**app/code/core/Mage/Rule/Model/Condition/Abstract.php**中。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:45:24.233

我还没有在 Magento 1.5.0.1 上测试过，但是在 1.4.1.1 和 1.5.1.0 上，这个目录规则都可以正常工作。也许您有一些扩展规则功能的扩展？他们中的大多数重写了标准函数，这可能会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:53:16.157

我通过使用条件“是其中之一”并列出所有 SKU 来完成这项工作 - 使用 contains 不是我正在尝试的方法。

# ios - Chrome IOS - 它只是一个 UIWebView 吗？

> ID：11259152
> 
> 赞同：60
> 
> 时间：2012-06-29T09:19:03.547
> 
> 标签：ios, chrome-ios

我不确定这是一个适合这里的问题，但适用于 IOS 的新 Chrome 应用程序只是 UIWebView 吗？

如果是这样，那么假设它与移动 Safari 之间不应该有任何渲染差异是否安全？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-03T18:26:30.890

不，它不仅仅是一个 UiWebView。Mike Pinkerton[在 chrome-team googlegroup 上的帖子](https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-dev/vYGxPx-tVKE)：

> iOS 版 Chrome 有一些 App Store 施加的相当大的技术限制，例如要求使用内置 UIWebView 进行渲染、没有 V8 和单进程模型。因此，重用关键的 Chromium 基础架构组件是一项挑战。也就是说，我们确实利用了很多代码，例如网络层、同步和书签基础设施、多功能框、指标和崩溃报告，以及越来越多的内容。

仅网络层就包含*许多*优化以增强您的浏览。这是一个快速概述：[http ://www.igvita.com/2012/06/04/chrome-networking-dns-prefetch-and-tcp-preconnect/](http://www.igvita.com/2012/06/04/chrome-networking-dns-prefetch-and-tcp-preconnect/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-09-02T04:42:29.770

从 48 版开始，iOS 版 Chrome 使用 WKWebView，这与 Safari 中使用的视图相同。

资料来源：

*   [铬博客](https://blog.chromium.org/2016/01/a-faster-more-stable-chrome-on-ios.html)
*   [Ars Technica](https://arstechnica.com/gadgets/2016/01/new-chrome-for-ios-is-finally-as-fast-and-stable-as-safari/)
*   [VentureBeat](https://venturebeat.com/2016/01/27/google-speeds-up-chrome-for-ios-with-apples-wkwebview-officially-launches-data-saver-extension-on-the-desktop/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-29T09:28:45.827

是的，你是对的……它使用 webkit 渲染引擎，带有 Chrome UI。

参考。[勇敢的火球](http://daringfireball.net/linked/2012/06/28/chrome-ios)...

> 这不是 Chrome 渲染或 JavaScript 引擎——App Store 规则禁止这样做。这是iOS系统版本的WebKit，包裹在谷歌自己的浏览器UI中

# java - 使用java轻松计算特定时期的周数

> ID：11259153
> 
> 赞同：0
> 
> 时间：2012-06-29T09:19:05.387
> 
> 标签：java

是否有任何简单的库或方法来获取某些时期的星期（从哪个日期〜日期）？

示例：有`6 weeks(variable)`（从 2012 年 7 月 1 日至 2012 年 8 月 11 日开始）。

我想将 6 周时间缩短为`2 portions (variable)`. 所以结果将是

```
1) 1 July,2012 ~ 21 July, 2012

2) 22 July,2012 ~ 11 Aug, 2012... etc 
```

使用jodatime，我可以很容易地获得某些时期之间的周数。

我所知道的是`Start Date and End Date`两者都是变量和`cutoffweeks amount`（例如6周或4周）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:40:56.397

```
final LocalDate start = new LocalDate();
final LocalDate end3 = start.plusWeeks(3) 
```

Its not exactly clear what you want, but [Joda-Time](http://joda-time.sourceforge.net/api-release/index.html) makes most things rather easy.

I guess you need something like :

```
public void doStruff(int cutOff){
  int portion = cutoff/2;
  final LocalDate start = new LocalDate();
  final LocalDate end = start.plusWeeks(portion)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:35:59.560

你可以试试这段代码：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.TimeZone;
    public class DateDiff {  
       public static void main(String[] args) {  
         String s1 = "06/01/2012";
         String s2 = "06/24/2012";
          DateDiff dd = new DateDiff();  
          Date then = null, now = null;  
          DateFormat df = DateFormat.getInstance();  
          df.setTimeZone( TimeZone.getDefault() );  

             try {  
                then = df.parse( s1 + " 12:00 PM" );  
                now = df.parse( s2 + " 12:00 PM" );  
             } catch ( ParseException e ) {  
                System.out.println("Couldn't parse date: " + e );  
                System.exit(1);  
             } 
          long diff = dd.getDateDiff( now, then, Calendar.WEEK_OF_YEAR );  
          System.out.println("No of weeks: " + diff );  
       }  

       long getDateDiff( Date d1, Date d2, int calUnit ) {  
          if( d1.after(d2) ) {    // make sure d1 < d2, else swap them  
             Date temp = d1;  
             d1 = d2;  
             d2 = temp;  
          }  
          GregorianCalendar c1 = new GregorianCalendar();  
          c1.setTime(d1);  
          GregorianCalendar c2 = new GregorianCalendar();  
          c2.setTime(d2);  
          for( long i=1; ; i++ ) {           
             c1.add( calUnit, 1 );   // add one day, week, year, etc.  
             if( c1.after(c2) )  
                return i-1;  
          }  
       }  
    } 
```

# c# - 有没有办法使用 TestCase 在 Nunit 中的对象上运行不同操作方法的列表？

> ID：11259155
> 
> 赞同：6
> 
> 时间：2012-06-29T09:19:11.473
> 
> 标签：c#, nunit

说我有以下内容：

```
 [Test]
  // would like to parameterize the parameters in call AND the call itself
  public void Test()
  {
      var res1 = _sut.Method1(1);
      var res2 = _sut.Method2("test");
      var res3 = _sit.Method3(3);

      Assert.That(res1, Is.Null);
      Assert.That(res2, Is.Null);
      Assert.That(res3, Is.Null);
  } 
```

我想使用 TestCase/TestCaseSource 属性参数化测试，包括调用本身。由于测试的重复性，需要使用稍微不同的参数调用每个方法，但我需要能够为每个不同的参数标记不同的调用。这在 Nunit 中是否可行？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T09:38:26.950

使用[TestCaseSource](http://nunit.com/index.php?p=testCaseSource&r=2.6)，您应该能够遍历一个值数组并调用所需的方法，例如：

```
[TestFixture]
public class TestClass
{
  private Sut _sut;

  public TestClass()
  {
    _sut = new Sut(...);
  }

  private IEnumerable<object> TestCases
  {
    get
    {
      var values = new object[,] { { 1, "test", 3 }, { 2, "hello", 0 }, ... };

      for (var i = 0; i < values.GetLength(0); ++i)
      {
          yield return _sut.Method1((int)values[i,0]);
          yield return _sut.Method2((string)values[i,1]);
          yield return _sut.Method3((int)values[i,2]);
      }
    }
  }

  [TestCaseSource("TestCases")]
  public void Test(object val)
  {
    Assert.That(val, Is.Null);
  }
} 
```

请注意，`_sut`实例需要在`TestClass`构造函数中实例化。`[SetUp]`在or`[TestFixtureSetUp]`方法中初始化它是不够的。

如果您需要不同`_sut`方法调用的不同实例化，您可以在构造函数中创建实例集合，并在getter的循环中`Sut`访问相关`Sut`项。或者，您甚至可以遍历getter 中的所有项目...`for``TestCases``Sut`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:29:36.423

Afaik，NUnit 中没有这样的内置机制。但是，如果测试中存在多种方法，我认为将它们拆分为单独的测试会更好。

`_sut`话虽如此，只要您总是在同一个对象（

例如，在您的 TestCaseSource 中添加一个字符串参数，并在测试方法中像这样调用它：

```
Type type = _sut.GetType();
MethodInfo methodInfo = type.GetMethod(methodName);
object result = methodInfo.Invoke(_sut, null); 
```

但是，当您要参数化的每个方法都采用不同数量的参数时，事情会很快变得复杂。调试和查看哪个测试失败也将更加困难。最好能拆分这些测试。

# perl - perl 脚本的安装脚本

> ID：11259158
> 
> 赞同：1
> 
> 时间：2012-06-29T09:19:16.400
> 
> 标签：perl, build, makefile, installation

我有简单的 perl 脚本，我想制作安装依赖项（perl 模块）的安装脚本，并`/usr/share/path`在必要时复制我的 file.perl 以询问密码。我发现有一些安装 perl 模块的解决方案（Makefile.PL、Build.PL 等）。但我的脚本不是模块。我应该如何尝试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:24:27.890

`Makefile.PL`/`ExtUtils::MakeMaker`支持`EXE_FILES`perl 脚本的参数，您可以查看如何`App::Ack`执行[此](http://cpansearch.perl.org/src/PETDANCE/ack-2.00a01/Makefile.PL)操作或查看本[教程](http://www.vromans.org/johan/articles/makemaker.html)。只需将前缀设置为您的目录，它应该为您完成工作。

# php - PHP maketime 在前一天给出 22.00

> ID：11259159
> 
> 赞同：2
> 
> 时间：2012-06-29T09:19:18.757
> 
> 标签：php, javascript

我想在 PHP 和 Javascript 中为给定的一天创建两个相等的时间戳，但是有区别....

2012 年 7 月 1 日：

**PHP**

```
$test = mktime(0,0,0,7,1,2012); gives 1341093600 
```

**JavaScript**

```
var d = Date.UTC(2012,6,1); 
var timestamp = d/1000;   gives 1341100800 
```

为什么相差2小时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:22:12.233

调用`Date.UTC`将创建一个时间戳，即 2012-07-01 UTC 的午夜。

另一方面，[mktime将做同样的事情，除了 PHP 配置使用的任何时区。](http://php.net/mktime)

换句话说，您的服务器未设置为 UTC。

最简单的解决方案可能是[strtotime](http://php.net/strtotime)：

```
$timestamp = strtotime('2012-07-01 UTC'); 
```

还有[gmmktime](http://php.net/gmmktime)或者您可以将 PHP 的时区设置为 UTC。我会[在 中执行此`.ini`](http://us2.php.net/manual/en/datetime.configuration.php#ini.date.timezone)操作，但要在代码中执行此操作，您可以使用[date_default_timezone_set](http://us2.php.net/manual/en/function.date-default-timezone-set.php)：

```
date_default_timezone_set('UTC'); 
```

* * *

作为个人喜好的说明，我避免使用 mktime。在`strtotime`和之间`DateTime`，我很少发现 mktime 会产生更清晰、更易读的代码。mktime 野兽般的参数列表使得它所在的任何行都显得很可怕。

# ios - ios 4.3 的字体问题 Futura Condensed Medium

> ID：11259161
> 
> 赞同：0
> 
> 时间：2012-06-29T09:19:21.820
> 
> 标签：ios, fonts

ios 4.3 显示字体“Futura Condensed Medium”的问题，因为它适用于 ios 5.0

有人对这个 ios 5.0 v/s 4.3 问题有想法吗？

提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T08:21:23.207

因为 iOS 4 中没有捆绑字体“Futura-CondensedMedium”。

查看 iOS 4/5/6 字体的便捷网站：[iOSFonts.com](http://www.iosfonts.com/)

Apple 的字体文档捆绑在：

*   iOS 4 → 无法找到官方列表。
*   [iOS 5](http://support.apple.com/kb/HT4980)
*   [iOS 6](http://support.apple.com/kb/HT5484)

# php - TinyMCE 文件管理器和图像管理器

> ID：11259164
> 
> 赞同：5
> 
> 时间：2012-06-29T09:19:25.370
> 
> 标签：php, javascript, image, file, tinymce

我们有 Tinymce Filemanager 和 Imagemanager。

我需要将他们两个整合在一起。在 Imagemaneger 的网页上，它说它与 Filemanager 兼容。

（[http://www.tinymce.com/enterprise/mcimagemanager.php](http://www.tinymce.com/enterprise/mcimagemanager.php)）。

但是我在任何地方都找不到这是如何工作的。我不希望 Imagemanager 和 Filemanager 分开。让他们俩一起工作是最理想的。

有谁知道在哪里可以找到演示以及如何集成它？

提前致谢，

-V

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:34:55.670

我找到了，过了一会儿。

我不记得我在哪里找到了解决方案，但这是一次地狱般的搜索。

在 filemanager`config.php`文件中，您必须编辑行最重要的是，您必须将 url 设置为 imagemanager 插件所在的位置`152/153/154/155` 。`$mcFileManagerConfig["imagemanager.urlprefix"]`

第 `config.php`128 行的 imagemanager 也是如此，编辑`$mcImageManagerConfig['filemanager.urlprefix']`到 imagemanager 路径。

# mongodb - 自动完成功能在流星中不起作用

> ID：11259165
> 
> 赞同：0
> 
> 时间：2012-06-29T09:19:25.913
> 
> 标签：mongodb, meteor

我有一个在流星中使用的自动完成文本框功能。它适用于以下硬编码数据，例如：

```
$(document).ready(function() {     
        $("#demo-input-facebook-theme").tokenInput(                    
          [{id: 7,  name: "Ruby"},{id: 11, name: "Python"},{id: 13, name: "JavaScript"}],
          {theme: "facebook"}
        );
}); 
```

现在，我已经从数据库 MongoDB 中获取数据，当我将此数据作为参数传递给自动完成功能时，它不起作用......我也使用了该方法`JSON.stringify()`。

返回的数据如下所示：

```
[{"_id":"ab170916-a44b-49f9-85ef-a34c90fb815d","Namelist_name":"Badminton"},
 {"_id":"f768e4ba-b628-4d3f-8da6-0bad31346dcc","Namelist_name":"Biking"},
 {"_id":"0bee086b-1785-40c9-9c5d-a39331c875e1","Namelist_name":"Chess"},
 {"_id":"4eae1e54-ec60-4578-8052-0bf1bccf13b1","Namelist_name":"Golf"},
 {"_id":"a0d2b89e-a2d6-4b30-8e38-779c5a886d49","Namelist_name":"Hiking"},
 {"_id":"f3a05456-38d4-40f2-86b1-eddea061fdf0","Namelist_name":"Tennis"},
 {"_id":"3669b9a2-3f87-4579-8064-82d627196fcb","Namelist_name":"Walking"},
 {"_id":"6ac6497e-82b2-40fe-8b24-152e9f42750d","Namelist_name":"Wine Tasting"},
 {"_id":"15a7ca87-aef7-43ab-945b-168647bb59aa","Namelist_name":"Yoga"},
 {"_id":"bc40d166-64ef-4e61-85cd-60064dc037cd","Namelist_name":"Zumba"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T23:58:36.843

如果您将返回的 JSON 数据与有效的测试数据进行比较，则存在一个本质区别：您`id`在 MongoDB JSON 结果中缺少该字段，而是提供了`_id`. 该`id`字段当前是用于自动完成的[jQuery tokenInput插件的硬编码默认值。](http://loopj.com/jquery-tokeninput/)

一些人已经提交了补丁，允许使用[tokenValue](https://github.com/loopj/jquery-tokeninput/issues/search?q=tokenValue)参数设置不同的密钥。

示例（未经测试）补丁：[tokenValue cannot be changed](https://github.com/loopj/jquery-tokeninput/issues/171)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T06:29:37.417

只需使用 name 关键字更改 Namelist_name。由于 jquery tokeninput 使用名称作为硬编码数据中提到的键。如果我们从[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)下载 jquery tokeninput 。我们知道关键字是“名称”。

希望这可以帮助....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T22:11:31.260

如果您使用自由文本自动完成多个项目，您可能需要查看我创建的这个包：

> [https://github.com/mizzao/meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)

# iphone - 设置允许 airplay 不仍然通过 airplay 发送声音

> ID：11259168
> 
> 赞同：3
> 
> 时间：2012-06-29T09:19:37.023
> 
> 标签：iphone, ios, audio, mpmovieplayercontroller, airplay

我正在使用媒体播放器，某些媒体无权通过 Airplay 播放，不要问为什么:)。所以当我得到那个媒体时，我设置

```
movieplayerController.allowsAirplay = NO; 
```

如果你之前玩过airplay，那么下次默认开启。通过执行上面的代码，您将在您的设备上播放电影，但声音音频路由仍通过 airplay 发送。我试图覆盖音频路由，但它并没有让步，似乎 Airplay 胜过一切。

如果我可以禁用airplay，我的问题就会解决，但我找不到任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:59:30.440

这看起来类似于[这个](https://stackoverflow.com/questions/7749770/disable-airplay-with-mpmovieplayercontroller)问题。答案提到 AirPlay 按钮应该始终可见以发送音频。

# spring - 使用 Tomcat、Spring 和 Weaver (BcelClassWeaver) 启动时出现异常

> ID：11259172
> 
> 赞同：0
> 
> 时间：2012-06-29T09:19:56.063
> 
> 标签：spring, tomcat, spring-aop

因为今天我面临一个奇怪的问题。当我在我的 tomcat (7.0.28) 中启动我的应用程序时，我得到了如下所示的数百个异常。昨天在我关闭计算机之前，一切工作正常，我在部署和启动应用程序时完全没有问题）。对于一般编织，我将 spring-instrument-tomcat-3.1.1.RELEASE.jar 放入我的 tomcat 的 lib 文件夹中。如前所述，我过去从未遇到过任何问题，并且一切正常。我没有更新任何组件，例如我的 jdk (1.7)、tomcat 或 eclipse。

我尝试删除 webapp 文件夹中的工作文件夹和应用程序，尝试删除缓存并进行了几次重新部署；一切都没有成功。我尝试了独立的tomcat和eclipse wtp（我通常使用的）；没有不同。有人知道我可以尝试什么吗？

这是我在 tomcat 启动时获得的堆栈跟踪的一小部分（此处的另一个堆栈跟踪：http: [//pastebin.com/8DZ4dh2Q](http://pastebin.com/8DZ4dh2Q)）：

```
Jun 29, 2012 10:55:16 AM org.aspectj.weaver.tools.Jdk14Trace info
INFO: Dumping to /home/xxx/./ajcore.20120629.105516.091.txt
[TomcatInstrumentableClassLoader@77b7a0] abort trouble in: 
public class org.springframework.expression.spel.support.ReflectivePropertyAccessor extends java.lang.Object implements org.springframework.expression.PropertyAccessor:
  protected final java.util.Map readerCache [Signature(Ljava/util/Map<Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey;Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair;>;)]
  protected final java.util.Map writerCache [Signature(Ljava/util/Map<Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey;Ljava/lang/reflect/Member;>;)]
  protected final java.util.Map typeDescriptorCache [Signature(Ljava/util/Map<Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey;Lorg/springframework/core/convert/TypeDescriptor;>;)]
  public void <init>():
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 46)
                    INVOKESPECIAL java.lang.Object.<init> ()V
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 48)
                    NEW java.util.concurrent.ConcurrentHashMap
                    DUP
                    INVOKESPECIAL java.util.concurrent.ConcurrentHashMap.<init> ()V
                    PUTFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 50)
                    NEW java.util.concurrent.ConcurrentHashMap
                    DUP
                    INVOKESPECIAL java.util.concurrent.ConcurrentHashMap.<init> ()V
                    PUTFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.writerCache Ljava/util/Map;
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 52)
                    NEW java.util.concurrent.ConcurrentHashMap
                    DUP
                    INVOKESPECIAL java.util.concurrent.ConcurrentHashMap.<init> ()V
                    PUTFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.typeDescriptorCache Ljava/util/Map;
                    RETURN   (line 46)
  end public void <init>()

  public Class[] getSpecificTargetClasses():
                    ACONST_NULL   (line 59)
                    ARETURN
  end public Class[] getSpecificTargetClasses()

  public boolean canRead(org.springframework.expression.EvaluationContext, Object, String) throws org.springframework.expression.AccessException:
                    ALOAD_2     // Ljava/lang/Object; target   (line 63)
                    IFNONNULL L0
                    ICONST_0   (line 64)
                    IRETURN
                L0: ALOAD_2     // Ljava/lang/Object; target   (line 66)
                    INSTANCEOF java.lang.Class
                    IFEQ L1
                    ALOAD_2     // Ljava/lang/Object; target
                    CHECKCAST java.lang.Class
                    GOTO L2
                L1: ALOAD_2     // Ljava/lang/Object; target
                    INVOKEVIRTUAL java.lang.Object.getClass ()Ljava/lang/Class;
                L2: ASTORE 4
                    ALOAD 4     // Ljava/lang/Class; type   (line 67)
                    INVOKEVIRTUAL java.lang.Class.isArray ()Z
                    IFEQ L3
                    ALOAD_3     // Ljava/lang/String; name
                    LDC "length"
                    INVOKEVIRTUAL java.lang.String.equals (Ljava/lang/Object;)Z
                    IFEQ L3
                    ICONST_1   (line 68)
                    IRETURN
                L3: NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$CacheKey   (line 70)
                    DUP
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_3     // Ljava/lang/String; name
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$CacheKey.<init> (Ljava/lang/Class;Ljava/lang/String;)V
                    ASTORE 5
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 71)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    INVOKEINTERFACE java.util.Map.containsKey (Ljava/lang/Object;)Z
                    IFEQ L4
                    ICONST_1   (line 72)
                    IRETURN
                L4: ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 74)
                    ALOAD_3     // Ljava/lang/String; name
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_2     // Ljava/lang/Object; target
                    INSTANCEOF java.lang.Class
                    INVOKEVIRTUAL org.springframework.expression.spel.support.ReflectivePropertyAccessor.findGetterForProperty (Ljava/lang/String;Ljava/lang/Class;Z)Ljava/lang/reflect/Method;
                    ASTORE 6
                    ALOAD 6     // Ljava/lang/reflect/Method; method   (line 75)
                    IFNULL L5
                    NEW org.springframework.core.convert.Property   (line 78)
                    DUP
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD 6     // Ljava/lang/reflect/Method; method
                    ACONST_NULL
                    INVOKESPECIAL org.springframework.core.convert.Property.<init> (Ljava/lang/Class;Ljava/lang/reflect/Method;Ljava/lang/reflect/Method;)V
                    ASTORE 7
                    NEW org.springframework.core.convert.TypeDescriptor   (line 79)
                    DUP
                    ALOAD 7     // Lorg/springframework/core/convert/Property; property
                    INVOKESPECIAL org.springframework.core.convert.TypeDescriptor.<init> (Lorg/springframework/core/convert/Property;)V
                    ASTORE 8
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 80)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair
                    DUP
                    ALOAD 6     // Ljava/lang/reflect/Method; method
                    ALOAD 8     // Lorg/springframework/core/convert/TypeDescriptor; typeDescriptor
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.<init> (Ljava/lang/reflect/Member;Lorg/springframework/core/convert/TypeDescriptor;)V
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 81)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.typeDescriptorCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    ALOAD 8     // Lorg/springframework/core/convert/TypeDescriptor; typeDescriptor
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
                    ICONST_1   (line 82)
                    IRETURN
                L5: ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 85)
                    ALOAD_3     // Ljava/lang/String; name
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_2     // Ljava/lang/Object; target
                    INSTANCEOF java.lang.Class
                    INVOKEVIRTUAL org.springframework.expression.spel.support.ReflectivePropertyAccessor.findField (Ljava/lang/String;Ljava/lang/Class;Z)Ljava/lang/reflect/Field;
                    ASTORE 7
                    ALOAD 7     // Ljava/lang/reflect/Field; field   (line 86)
                    IFNULL L6
                    NEW org.springframework.core.convert.TypeDescriptor   (line 87)
                    DUP
                    ALOAD 7     // Ljava/lang/reflect/Field; field
                    INVOKESPECIAL org.springframework.core.convert.TypeDescriptor.<init> (Ljava/lang/reflect/Field;)V
                    ASTORE 8
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 88)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair
                    DUP
                    ALOAD 7     // Ljava/lang/reflect/Field; field
                    ALOAD 8     // Lorg/springframework/core/convert/TypeDescriptor; typeDescriptor
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.<init> (Ljava/lang/reflect/Member;Lorg/springframework/core/convert/TypeDescriptor;)V
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 89)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.typeDescriptorCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    ALOAD 8     // Lorg/springframework/core/convert/TypeDescriptor; typeDescriptor
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
                    ICONST_1   (line 90)
                    IRETURN
                L6: ICONST_0   (line 93)
                    IRETURN
  end public boolean canRead(org.springframework.expression.EvaluationContext, Object, String) throws org.springframework.expression.AccessException

  public org.springframework.expression.TypedValue read(org.springframework.expression.EvaluationContext, Object, String) throws org.springframework.expression.AccessException:
                    ALOAD_2     // Ljava/lang/Object; target   (line 97)
                    IFNONNULL L0
                    NEW org.springframework.expression.AccessException   (line 98)
                    DUP
                    LDC "Cannot read property of null target"
                    INVOKESPECIAL org.springframework.expression.AccessException.<init> (Ljava/lang/String;)V
                    ATHROW
                L0: ALOAD_2     // Ljava/lang/Object; target   (line 100)
                    INSTANCEOF java.lang.Class
                    IFEQ L1
                    ALOAD_2     // Ljava/lang/Object; target
                    CHECKCAST java.lang.Class
                    GOTO L2
                L1: ALOAD_2     // Ljava/lang/Object; target
                    INVOKEVIRTUAL java.lang.Object.getClass ()Ljava/lang/Class;
                L2: ASTORE 4
                    ALOAD 4     // Ljava/lang/Class; type   (line 102)
                    INVOKEVIRTUAL java.lang.Class.isArray ()Z
                    IFEQ L4
                    ALOAD_3     // Ljava/lang/String; name
                    LDC "length"
                    INVOKEVIRTUAL java.lang.String.equals (Ljava/lang/Object;)Z
                    IFEQ L4
                    ALOAD_2     // Ljava/lang/Object; target   (line 103)
                    INSTANCEOF java.lang.Class
                    IFEQ L3
                    NEW org.springframework.expression.AccessException   (line 104)
                    DUP
                    LDC "Cannot access length on array class itself"
                    INVOKESPECIAL org.springframework.expression.AccessException.<init> (Ljava/lang/String;)V
                    ATHROW
                L3: NEW org.springframework.expression.TypedValue   (line 106)
                    DUP
                    ALOAD_2     // Ljava/lang/Object; target
                    INVOKESTATIC java.lang.reflect.Array.getLength (Ljava/lang/Object;)I
                    INVOKESTATIC java.lang.Integer.valueOf (I)Ljava/lang/Integer;
                    INVOKESPECIAL org.springframework.expression.TypedValue.<init> (Ljava/lang/Object;)V
                    ARETURN
                L4: NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$CacheKey   (line 109)
                    DUP
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_3     // Ljava/lang/String; name
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$CacheKey.<init> (Ljava/lang/Class;Ljava/lang/String;)V
                    ASTORE 5
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 110)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    INVOKEINTERFACE java.util.Map.get (Ljava/lang/Object;)Ljava/lang/Object;
                    CHECKCAST org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair
                    ASTORE 6
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker   (line 112)
                    IFNULL L5
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.member Ljava/lang/reflect/Member;
                    INSTANCEOF java.lang.reflect.Method
                    IFEQ L9
                L5: ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker   (line 113)
                    IFNULL L6
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.member Ljava/lang/reflect/Member;
                    GOTO L7
                L6: ACONST_NULL
                L7: CHECKCAST java.lang.reflect.Method
                    ASTORE 7
                    ALOAD 7     // Ljava/lang/reflect/Method; method   (line 114)
                    IFNONNULL L8
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 115)
                    ALOAD_3     // Ljava/lang/String; name
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_2     // Ljava/lang/Object; target
                    INSTANCEOF java.lang.Class
                    INVOKEVIRTUAL org.springframework.expression.spel.support.ReflectivePropertyAccessor.findGetterForProperty (Ljava/lang/String;Ljava/lang/Class;Z)Ljava/lang/reflect/Method;
                    ASTORE 7     // Ljava/lang/reflect/Method; method
                    ALOAD 7     // Ljava/lang/reflect/Method; method   (line 116)
                    IFNULL L8
                    NEW org.springframework.core.convert.Property   (line 120)
                    DUP
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD 7     // Ljava/lang/reflect/Method; method
                    ACONST_NULL
                    INVOKESPECIAL org.springframework.core.convert.Property.<init> (Ljava/lang/Class;Ljava/lang/reflect/Method;Ljava/lang/reflect/Method;)V
                    ASTORE 8
                    NEW org.springframework.core.convert.TypeDescriptor   (line 121)
                    DUP
                    ALOAD 8     // Lorg/springframework/core/convert/Property; property
                    INVOKESPECIAL org.springframework.core.convert.TypeDescriptor.<init> (Lorg/springframework/core/convert/Property;)V
                    ASTORE 9
                    NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair   (line 122)
                    DUP
                    ALOAD 7     // Ljava/lang/reflect/Method; method
                    ALOAD 9     // Lorg/springframework/core/convert/TypeDescriptor; typeDescriptor
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.<init> (Ljava/lang/reflect/Member;Lorg/springframework/core/convert/TypeDescriptor;)V
                    ASTORE 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 123)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
                L8: ALOAD 7     // Ljava/lang/reflect/Method; method   (line 126)
                    IFNULL L9
    catch java.lang.Exception -> E0
    |               ALOAD 7     // Ljava/lang/reflect/Method; method   (line 128)
    |               INVOKESTATIC org.springframework.util.ReflectionUtils.makeAccessible (Ljava/lang/reflect/Method;)V
    |               ALOAD 7     // Ljava/lang/reflect/Method; method   (line 129)
    |               ALOAD_2     // Ljava/lang/Object; target
    |               ICONST_0
    |               ANEWARRAY java.lang.Object
    |               INVOKEVIRTUAL java.lang.reflect.Method.invoke (Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
    |               ASTORE 8
    |               NEW org.springframework.expression.TypedValue   (line 130)
    |               DUP
    |               ALOAD 8     // Ljava/lang/Object; value
    |               ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
    |               GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.typeDescriptor Lorg/springframework/core/convert/TypeDescriptor;
    |               ALOAD 8     // Ljava/lang/Object; value
    |               INVOKEVIRTUAL org.springframework.core.convert.TypeDescriptor.narrow (Ljava/lang/Object;)Lorg/springframework/core/convert/TypeDescriptor;
    |               INVOKESPECIAL org.springframework.expression.TypedValue.<init> (Ljava/lang/Object;Lorg/springframework/core/convert/TypeDescriptor;)V
    catch java.lang.Exception -> E0
                    ARETURN
                E0: ASTORE 8   (line 132)
                    NEW org.springframework.expression.AccessException   (line 133)
                    DUP
                    NEW java.lang.StringBuilder
                    DUP
                    LDC "Unable to access property '"
                    INVOKESPECIAL java.lang.StringBuilder.<init> (Ljava/lang/String;)V
                    ALOAD_3     // Ljava/lang/String; name
                    INVOKEVIRTUAL java.lang.StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;
                    LDC "' through getter"
                    INVOKEVIRTUAL java.lang.StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;
                    INVOKEVIRTUAL java.lang.StringBuilder.toString ()Ljava/lang/String;
                    ALOAD 8     // Ljava/lang/Exception; ex
                    INVOKESPECIAL org.springframework.expression.AccessException.<init> (Ljava/lang/String;Ljava/lang/Exception;)V
                    ATHROW
                L9: ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker   (line 138)
                    IFNULL L10
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.member Ljava/lang/reflect/Member;
                    INSTANCEOF java.lang.reflect.Field
                    IFEQ L14
               L10: ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker   (line 139)
                    IFNONNULL L11
                    ACONST_NULL
                    GOTO L12
               L11: ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.member Ljava/lang/reflect/Member;
               L12: CHECKCAST java.lang.reflect.Field
                    ASTORE 7
                    ALOAD 7     // Ljava/lang/reflect/Field; field   (line 140)
                    IFNONNULL L13
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 141)
                    ALOAD_3     // Ljava/lang/String; name
                    ALOAD 4     // Ljava/lang/Class; type
                    ALOAD_2     // Ljava/lang/Object; target
                    INSTANCEOF java.lang.Class
                    INVOKEVIRTUAL org.springframework.expression.spel.support.ReflectivePropertyAccessor.findField (Ljava/lang/String;Ljava/lang/Class;Z)Ljava/lang/reflect/Field;
                    ASTORE 7     // Ljava/lang/reflect/Field; field
                    ALOAD 7     // Ljava/lang/reflect/Field; field   (line 142)
                    IFNULL L13
                    NEW org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair   (line 143)
                    DUP
                    ALOAD 7     // Ljava/lang/reflect/Field; field
                    NEW org.springframework.core.convert.TypeDescriptor
                    DUP
                    ALOAD 7     // Ljava/lang/reflect/Field; field
                    INVOKESPECIAL org.springframework.core.convert.TypeDescriptor.<init> (Ljava/lang/reflect/Field;)V
                    INVOKESPECIAL org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.<init> (Ljava/lang/reflect/Member;Lorg/springframework/core/convert/TypeDescriptor;)V
                    ASTORE 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    ALOAD_0     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor; this   (line 144)
                    GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor.readerCache Ljava/util/Map;
                    ALOAD 5     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$CacheKey; cacheKey
                    ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
                    INVOKEINTERFACE java.util.Map.put (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
                    POP
               L13: ALOAD 7     // Ljava/lang/reflect/Field; field   (line 147)
                    IFNULL L14
    catch java.lang.Exception -> E1
    |               ALOAD 7     // Ljava/lang/reflect/Field; field   (line 149)
    |               INVOKESTATIC org.springframework.util.ReflectionUtils.makeAccessible (Ljava/lang/reflect/Field;)V
    |               ALOAD 7     // Ljava/lang/reflect/Field; field   (line 150)
    |               ALOAD_2     // Ljava/lang/Object; target
    |               INVOKEVIRTUAL java.lang.reflect.Field.get (Ljava/lang/Object;)Ljava/lang/Object;
    |               ASTORE 8
    |               NEW org.springframework.expression.TypedValue   (line 151)
    |               DUP
    |               ALOAD 8     // Ljava/lang/Object; value
    |               ALOAD 6     // Lorg/springframework/expression/spel/support/ReflectivePropertyAccessor$InvokerPair; invoker
    |               GETFIELD org.springframework.expression.spel.support.ReflectivePropertyAccessor$InvokerPair.typeDescriptor Lorg/springframework/core/convert/TypeDescriptor;
    |               ALOAD 8     // Ljava/lang/Object; value
    |               INVOKEVIRTUAL org.springframework.core.convert.TypeDescriptor.narrow (Ljava/lang/Object;)Lorg/springframework/core/convert/TypeDescriptor;
    |               INVOKESPECIAL org.springframework.expression.TypedValue.<init> (Ljava/lang/Object;Lorg/springframework/core/convert/TypeDescriptor;)V
    catch java.lang.Exception -> E1
                    ARETURN
                E1: ASTORE 8   (line 153)
                    NEW org.springframework.expression.AccessException   (line 154)
                    DUP
                    NEW java.lang.StringBuilder
                    DUP
                    LDC "Unable to access field: "
                    INVOKESPECIAL java.lang.StringBuilder.<init> (Ljava/lang/String;)V
                    ALOAD_3     // Ljava/lang/String; name
                    INVOKEVIRTUAL java.lang.StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;
                    INVOKEVIRTUAL java.lang.StringBuilder.toString ()Ljava/lang/String;
                    ALOAD 8     // Ljava/lang/Exception; ex
                    INVOKESPECIAL org.springframework.expression.AccessException.<init> (Ljava/lang/String;Ljava/lang/Exception;)V
                    ATHROW
               L14: NEW org.springframework.expression.AccessException   (line 159)
                    DUP
                    NEW java.lang.StringBuilder
                    DUP
                    LDC "Neither getter nor field found for property '"
                    INVOKESPECIAL java.lang.StringBuilder.<init> (Ljava/lang/String;)V
                    ALOAD_3     // Ljava/lang/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:03:53.507

埋在完整堆栈跟踪的深处（不是您问题中的截断版本！！！）是这样的：

java.lang.ClassFormatError: org.aspectj.weaver.bcel.BcelWeaver.weave 的 org/aspectj/weaver/bcel/BcelClassWeaver(BcelWeaver.java:1694) org.aspectj.weaver.bcel.BcelWeaver.weaveWithoutDump(BcelWeaver.java :1638) 在 org.aspectj.weaver.bcel.BcelWeaver.weaveAndNotify(BcelWeaver.java:1401) 在 org.aspectj.weaver.bcel.BcelWeaver.weave(BcelWeaver.java:1187) 在 org.aspectj.weaver.tools。 WeavingAdaptor.getWovenBytes(WeavingAdaptor.java:472) 在 org.aspectj.weaver.tools.WeavingAdaptor.weaveClass(WeavingAdaptor.java:323) 在 org.aspectj.weaver.loadtime.Aj.preProcess(Aj.java:99) 在 org .aspectj.weaver.loadtime.ClassPreProcessorAgentAdapter.transform(ClassPreProcessorAgentAdapter.java:54) 在 org.springframework.context.weaving.AspectJWeavingEnabler$AspectJClassBypassingClassFileTransformer。org.springframework.instrument.classloading.WeavingTransformer.transformIfNecessary(WeavingTransformer.java:95) 处的变换（AspectJWeavingEnabler.java:104）

我不完全确定这意味着什么，但我怀疑这是问题的根源。

这可能意味着：

*   BCEL 检测到它试图读取/处理的某个类有问题，或者
*   JVM 发现类文件以`BcelClassWeaver`某种方式损坏，或者
*   别的东西。

希望这可以帮助。

# excel - 根据 Excel 2010 中项目类型的颜色格式

> ID：11259173
> 
> 赞同：0
> 
> 时间：2012-06-29T09:19:58.853
> 
> 标签：excel, formatting

我开始使用 Microsoft Excel 2010 中的项目数据库构建一个 Excel 电子表格。这些项目根据它们的类型在其属性上有一些固定的最大值。这些值根据项目的类型存储在另一个隐藏表中，当然每个值都不同。例如隐藏表是这样的：

## 类型 | 价格 | 保修单

电视 | 1683 | 4

电脑 | 1210 | 1

空调 | 第1234章 2

因此，现在每当我在主表中创建新项目时，与其他隐藏表相比，这些属性都会获得数据栏颜色格式！喜欢：

电视 | 索尼 Bravia RT219 | 第1293章 2

...而那些“1293”和“2”值需要获得一个数据栏“比较”“1293”值与最大“1683”等等...

我希望你能理解我。我必须使用哪个公式才能在 ms excel 2010 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:47:26.070

您可能可以使用工作表函数（无 vba）和条件格式来做您想做的事情

```
=INDIRECT(ADDRESS(MATCH(A1,Sheet2!A1:A3,0),2,1,1,"Sheet2")) 
```

Sheet2!A1:A3 是对您的隐藏列表的引用，我的只有 3 个

它在第一张纸上查看 A1 的值，并尝试在隐藏的纸上找到它。如果找到结果， MATCH() 将返回其行号。ADDRESS() 然后返回 sheet2 INDIRECT() 中 MATCH() 行的第二列的地址，然后获取它的值。

匹配（查找值、查找列表、匹配类型）地址（行、列、绝对值、A1/R1C1、工作表）间接（地址）

你应该能够让它使用它从第二张表中提取所有信息。

没时间解释了，但功能并不难理解

**更新**

做了一个简单的例子[https://dl.dropbox.com/u/10316127/example.xlsx](https://dl.dropbox.com/u/10316127/example.xlsx)

```
=INDIRECT(ADDRESS(MATCH([SEARCH_VALUE],Sheet2!$A:$A,0),[COLUMN],1,1,"Sheet2")) 
```

[SEARCH_VALUE] 是可见工作表中的一个单元格，其中包含您要查找的“类型”。

[COLUMN] 是与您要读取的列相对应的列号。（2 为最高价格，3 为保修）

我并没有真正理解您的最后评论，因此如果没有示例或对您需要的内容进行更详细的解释，我将无能为力。

# database - 用于远程传感器数据记录的最佳数据库

> ID：11259175
> 
> 赞同：8
> 
> 时间：2012-06-29T09:20:03.563
> 
> 标签：database, nosql, rdbms, sensors

我需要选择一个数据库来远程存储来自大量（数千到数万）传感器的数据，这些传感器每分钟大约会生成一个条目。

所述数据需要通过多种方式进行查询，从统计具有一定特征的数据到简单的输出作图。

我正在四处寻找合适的工具，我从 MySQL 开始，但我觉得它缺乏这个项目所需的可扩展性，这导致我使用我不太了解的 noSQL 数据库。

哪个数据库，无论是关系型还是非关系型，都是一个不错的选择？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T18:53:51.867

通常没有“最佳”数据库，因为它们都涉及一种或另一种权衡。您的问题也很模糊，因为除了每分钟的插入次数（每次插入多少数据？）以及您需要“可扩展性”之外，您没有说任何关于您的性能需求的内容。

这看起来也像是过早优化的情况，因为您说您“**感觉**[MySQL] 缺乏该项目所需的可伸缩性”，但听起来您并没有运行任何测试来确认这是否是一个真正的问题。获取真实数据总是比基于“感觉”做出重要的架构决策要好。

这里有一个建议：

1.  编写一个简单的测试程序，每分钟插入 10,000 行样本数据
2.  运行程序相当长的时间（几天或更长时间）以生成相当大的测试数据块
3.  运行您的查询以查看它们是否满足您的性能需求（您尚未指定——它们需要多快？它们多久运行一次？它们有多复杂？）

您在这里至少要测试两件事：您的数据库是否可以每分钟处理 10,000 次插入，以及一旦您拥有大量数据，您的查询是否能够足够快地运行。对于大型数据集，这些将成为竞争的优先事项，因为您需要索引来进行快速查询，但随着时间的推移，索引将开始减慢您的插入速度。在某些时候，出于性能和实际原因（有限的存储空间），您还需要考虑数据存档（或清除，如果不需要历史数据）。

无论您选择什么数据库，这些都会引起关注。从您告诉我们的有关您的检索需求（“计算具有某些特征的数据”和“简单的绘图输出”）的信息来看，听起来任何类型的数据库都可以。可能其他问题更重要，例如易于开发（您使用什么语言和工具？）、部署、管理、代码可维护性等。

由于这是我们正在讨论的传感器数据，您可能还想查看循环数据库 (RRD)，例如[RRDTool](http://oss.oetiker.ch/rrdtool/)，以了解该方法是否能更好地满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T13:37:57.517

在谷歌搜索“传感器数据数据库”时发现了这个问题 非常有用的搜索结果之一（连同这个 SO 问题）是这个[博客](http://tinkerman.eldiariblau.net/storing-and-publishing-sensor-data/)：

实际上我已经开始了一个类似的项目（[http://reatha.de](http://reatha.de)），但我意识到为时已晚，我使用的不是最好的技术。我的方法类似于 MySQL + PHP。最后我意识到这是不可扩展的并停止了该项目。

此外，一个很好的起点是查看[Heroku 中的数据库列表](https://addons.heroku.com/)：如果他们使用一个，那么它应该不是最差的一个。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-29T09:24:11.013

你可以尝试使用 Redis noSQL 数据库

# ios - 如何将嵌入的 youtube 视频旋转为横向模式

> ID：11259176
> 
> 赞同：6
> 
> 时间：2012-06-29T09:20:05.383
> 
> 标签：ios, youtube, embed, landscape, uiinterfaceorientation

我正在使用以下嵌入代码在 IOS 上嵌入我的 youtube 视频

```
- (NSString*)embedYouTube:(NSString*)youtube_id frame:(CGRect)frame {  
   NSString* embedHTML = @"\
   <html><head>\
   <style type=\"text/css\">\
   body {\
   background-color: transparent;\
   color: white;\
   }\
   </style>\
   </head><body style=\"margin:0\">\
   <iframe src=\"http://www.youtube.com/embed/%@?rel=0\" frameborder=\"0\" allowfullscreen width=\"%0.0f\" height=\"%0.0f\"></iframe>\
   </body></html>"; 
   NSString *html = [NSString stringWithFormat:embedHTML, youtube_id, frame.size.width, frame.size.height];

   return html;
}

//code to embed video
NSString *contentHTML;
if (currentAnswer.youtube_id != nil) {
    contentHTML = [self embedYouTube:currentAnswer.youtube_id frame:CGRectMake(CELL_TEXT_LEFT_MARGIN + CELL_AVATAR_WIDTH + CELL_SPACING, currentYAxisValue, CELL_YOUTUBEVIEW_WIDTH, CELL_YOUTUBEVIEW_HEIGHT)];
}

[webView loadHTMLString: contentHTML baseURL:nil]; 
```

当我播放视频时，它只在纵向模式下播放，而不是横向模式。这是由于“iframe”而受到的限制，有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:43:18.413

如果您的 UIViewController 也能够旋转到横向，它应该可以工作。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

在尝试旋转视频之前测试您的 UIViewController 是否能够旋转。如果您不希望您的 UIViewController 在视频不在屏幕上时能够旋转，您可以执行以下操作：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(webView && webView.superView) return YES;
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T01:47:38.867

在您的 UIViewController 中，将其视图设置为 webView：

> [自我 setView:webView];

您的 webview 没有收到发送到根视图控制器的旋转消息。`addChildViewController`如果您只为您的 webView 制作了一个单独的 View Controller，您也可以使用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:04:48.287

这与我刚刚回答的另一个问题几乎相同，[Fix Notification centerorientation after the app resume execution](https://stackoverflow.com/questions/11314314/fix-notification-center-orientation-after-the-app-resume-execution/11374837)

YouTube 视频有自己的 UIViewController 子类来呈现它们。他们实际上并没有实现 -(BOOL)shouldAutorotateToInterfaceOrientation; （我知道）所以使用你目前所处的任何方向。

如果您的应用程序没有旋转到横向，那么它也不会是横向的。设置 [UIApplication sharedApplication].statusbarOrientation 应该设置 Youtube 视频的方向，但是如果您只选择这样做，而不是执行[Michael Frederick 的](https://stackoverflow.com/a/11287026/458205)建议（以及），它可能会在视频出现时产生一些不寻常的效果（如UI 纵向但统计栏横向覆盖 UI）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T13:29:32.657

```
#define RADIANS(degrees) ((degrees * M_PI) / 180.0)

- (void) setTransformForCurrentOrientation {
    UIDeviceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    NSInteger degrees = 0;

    if (UIInterfaceOrientationIsLandscape(orientation)) {
        if (orientation == UIInterfaceOrientationLandscapeLeft) { degrees = -90; } 
        else { degrees = 90; }
    } else {
        if (orientation == UIInterfaceOrientationPortraitUpsideDown) { degrees = 180; } 
        else { degrees = 0; }
    }

    rotationTransform = CGAffineTransformMakeRotation(RADIANS(degrees));

    [UIView beginAnimations:nil context:nil];
    [webView setTransform:rotationTransform];
    [UIView commitAnimations];
} 
```

# jquery - jquery 不在 Fire Fox 中工作，但在 IE 中工作

> ID：11259182
> 
> 赞同：1
> 
> 时间：2012-06-29T09:20:22.653
> 
> 标签：jquery, internet-explorer, firefox, google-chrome

我使用以下函数进行十进制验证，它在 IE 和 Chrome 中运行良好。但在 Fire Fox 中无法运行。如果我在 Fire Fox 中运行此代码，我无法输入任何字符。如何解决这个问题？

```
 $('.decimalValidate').live('keypress', function (event) {
       var decimalval= $(this).val();
       if ((event.which > 47 && event.which < 58)) {
           return true;
       }
       if ((event.which == 8 || event.which == 46) && decimalval.indexOf('.') == -1)  {
           return true;
       }
       return false;                          
   }); 
```

这种情况在 FF 中不起作用

```
if ((event.which == 8 || event.which == 46) && decimalval.indexOf('.') == -1)  {
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:22:17.707

您可以**[`.on()`](http://api.jquery.com/on)**使用 jQuery 1.7.x 尝试此委托事件处理程序，因为`live()`已弃用。

委托事件的语法`.on()`是：

```
$(container).on(eventNaem, target, eventHandler) 
```

在这里，`container`指向任何`Static-element`不会动态显示在 DOM 中的内容。

```
$(document).on('keypress', '.decimalValidate', function(event) {

     // var decimalid = $(this).attr("id"); // I think you don't need this

    var decimalval = $(this).val(); // or this.value

    if ((event.which > 47 && event.which < 58)) {
        return true;
    }
    if ((event.which == 8 || event.which == 46) && decimalval.indexOf('.') == -1) {
        return true;
    }
    return false;
}); 
```

* * *

### 根据评论

*   `backspace`不管用

`backspace`您正在处理`delete`以下情况：

```
(event.which == 8 || event.which == 46) && decimalval.indexOf('.') == -1 
```

***像这样设置验证：***

如果您的文本框不包含`.`并且`backspace`或`delete`按键，则该条件块中的执行代码。

当您的文本框包含`.`并且您按下`backspace`或`delete`键和条件块将不执行任何`return`语句时，上述条件将失败。

* * *

### `backspace`当值包含`.`（点）时如何启用

改变条件，如：

只需`&& decimalval.indexOf('.') >= -1`从条件中删除

```
(event.which == 8 || event.which == 46) 
```

* * *

## 目标：是的，我的目标不是在输入中输入多个点（@user）

## 完整代码

```
$('.decimalValidate').on('keyup', function(e) {
    var decimalval = $(this).val();

    var decimalvalidate = ApplyDecimalFilter(decimalval, e);
    if (decimalvalidate == false) return false;
});

function ApplyDecimalFilter(id, event) {
    try {
        return NewDecimalFilter(id, event);
    } catch (e) {
        alert(e.message);
    }
}

function NewDecimalFilter(o, event) {
    if (o.match(/\./g) && o.match(/\./g).length > 1) {
        $(event.target).val(o.replace(/\.$/, ''))
        return false;
    }
    if ((event.which > 47 && event.which < 58) || event.which == 8 || event.which == 46) {
        return true;
    }
    return false;
} 
```

**[工作样本](http://jsfiddle.net/DN7zE/25/)**

# ffmpeg - 替换 MP4 视频中的 I 帧

> ID：11259187
> 
> 赞同：2
> 
> 时间：2012-06-29T09:20:42.113
> 
> 标签：ffmpeg, mpeg-4

我想用另一张图片替换 I 帧以实现重影效果。（所以 P 和 B 帧保持不变）

我如何通过 ffmpeg（或任何其他软件）做到这一点？

# actionscript-3 - #2083 尝试关闭本地连接时

> ID：11259191
> 
> 赞同：1
> 
> 时间：2012-06-29T09:21:03.727
> 
> 标签：actionscript-3, localconnection

当 connect() 失败时，我试图 close() 本地连接。但是在关闭连接时它给了我'#2083 close failed because object is not connected'。

提前致谢。

```
try{
    connServer2Client.connect("_" + clientConnectionName);
}catch (error:ArgumentError) {
     trace("in catch connection established");
    connServer2Client.close();
    connServer2Client.connect("_" + clientConnectionName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:39:35.200

Adobe 真的搞砸了 IMO。

应该有一个要检查的参数或要调用的函数，它会告诉您状态。IE

```
connected = true or false 
```

但是没有。所以最好的解决方案是多个 try catch 函数，这很糟糕！这是我使用的课程。我将 flex 与 html/javascript 一起使用，所以这是在 javascript 中，但您可以在 as3 中执行类似的操作。

```
function Connecter(){
  this.LocalConnection = new LocalConnection();
  this.LocalConnection.allowDomain("*");
  this.connectionAttempts = 0;
  this.localConnectionError = false;
  this.connected = false;
}

Connecter.prototype.openConnection = function(channel){
  try{
    this.LocalConnection.connect(channel); //will throw error if connection is opened
  } catch(e){
    this.closeConnection();
    this.LocalConnection.connect(channel); //try to reconnect again
  }
  this.connected = true;
};

Connecter.prototype.closeConnection = function(channel){
  try{
    this.LocalConnection.close(); //will throw error if connection is closed
  } catch(e){ /* Already closed */ }
  this.connected = false;
};

Connecter.prototype.connect = function(channel) {
  var self = this;
  while (self.connectionAttempts < 3 && !self.connected ) {
    self.connectionAttempts += 1;
    self.openConnection(channel);
  }
}; 
```

因此，已连接将帮助告诉您是否有 LocalConnection。

# xcode - 从XIB中的按钮执行segue

> ID：11259199
> 
> 赞同：2
> 
> 时间：2012-06-29T09:21:56.157
> 
> 标签：xcode, ios5, xib, segue

我的大部分项目都在使用故事板，但我有一个 UIScrollView，它包含从 XIB 加载的多个视图

当在 XIB 中单击按钮时，我被困在如何执行 segue

我已经做了什么。

*   将视图添加到滚动视图
*   添加了一个自定义按钮
*   在自定义按钮上添加了一个 IBAcion

主视图控制器

```
NSString *nibName = @"coverArticleView";
NSArray *nibObjects = [NSBundle.mainBundle loadNibNamed:nibName owner:self options:nil];
coverArticle *pageView = [nibObjects objectAtIndex:0];
pageView.articleTitle.text = ob.Title;
pageView.articleTitle.numberOfLines =0;
// updating some more properties here & designing the scroll view
[coverArticlesScrollView addSubview:pageView]; 
```

coverArticle.m（XIB 类）

```
- (IBAction)buttonPressed:(id)sender {
NSLog(@"button pressed");
} 
```

当打印日志“按下按钮”时，它就可以工作了。但是当按钮被按下时我如何执行 segue 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:10:54.490

[performSegueWithIdentifier:sender:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/performSegueWithIdentifier%3asender%3a)怎么样？

# java - 根据 gereric 'T' 类型验证对象实例类型

> ID：11259202
> 
> 赞同：0
> 
> 时间：2012-06-29T09:22:12.667
> 
> 标签：java

我有一个泛型类型的类：

```
class Foo<T> {
    protected boolean validateType(Object obj){
        if (obj instanceof T) {
            return true;
        }
        return false;
    }

} 
```

去测试：

```
Foo foo = new Foo<String>();
foo.validateType(new String()); // should return true
foo.validateType(new Long()); // should return false; 
```

并且有一个需要针对泛型类型“T”验证对象的函数，显然上面的代码有错误？

我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:28:36.997

就目前而言，您尝试做的事情是不可能的-泛型是通过[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)在Java中实现的，这意味着泛型参数在运行时不存在。编译器可以在那里进行类型检查，但在运行时无法区分 a`Foo<String>`和 a `Foo<Long>`。

所以如果你想要一个特定的令牌来检查，你必须自己做。进行这种检查的一种常见模式是使用`Class`对象，其好处是这些可以由编译器进行类型检查：

```
class Foo<T> {
    private final Class<T> genericClass;

    public Foo(Class<T> clazz) {
        this.genericClass = clazz;
    }

    protected boolean validateType(Object obj){
        return genericClass.isInstance(obj);
    }
} 
```

请注意，您的调用者现在需要自己传入`Class`对象；没有办法绕过这个要求，它不能由 Java 本身自动连接。

`if (x) return true; else return false;`（此外，当它与 完全相同`return x;`但更容易混淆和容易出错时使用它是一个坏主意。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:30:27.027

所以 Instance of`Foo`没有关于`T`运行时是什么的信息。

因此，您必须将 a 传递`Class<T>`给`Foo`.

```
private final Class<T> cl;

protected boolean validateType(Object ob){
    return cl.isInstance(ob);
}
... 
```

# forms - Play 的登录表单验证！2.0

> ID：11259206
> 
> 赞同：0
> 
> 时间：2012-06-29T09:22:18.960
> 
> 标签：forms, authentication, playframework, form-authentication

```
public static Result authenticate() {
    Form<LoginForm> loginForm = form(LoginForm.class).bindFromRequest();

    if (loginForm.hasErrors()) {
        return ok(views.html.Account.index.render(loginForm));
    } else {
            String email = loginForm.get().email;
            User user = User.findByUsername(email);

            if (Hash.checkPassword(loginForm.get().password, user.passwordHash)) {
                // set session
                session("email", email);
                return redirect(routes.UserController.view(user.getId()));
            } else {
                return badRequest(views.html.Account.index.render(loginForm));
            }
        }
} 
```

我们使用此代码对用户进行身份验证，但我们希望在登录过程中出现问题（无效的用户名/密码等）时显示错误消息。但是，我们在网上找不到任何关于此的文档——因为大多数关于使用 flash 获取错误消息的文档主要是针对 Play 1.x 的。

1) 我们如何向此登录功能添加错误消息？

2）我们如何在视图中访问这些错误消息？

3) Play 中的表单类（通常）如何处理！处理错误的创建和处理（以及我们如何访问它们？）

谢谢！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:12:45.077

@1）通常您通过验证添加错误。所以你的 LoginForm 应该有一个验证方法

@2) form.errors() 或 fomr.error("Field") 和 form.globalErrors()

@3）在绑定时，错误将被创建并放入表单的构造函数中。form.errors().put(key, error) 应该如何工作，因为 Map 没有被复制。但这更像是一种黑客攻击，将来可以更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T15:16:15.207

我建议`form.withError("name", "Error")` 还有`form.withGlobalError("Error")`

# jquery - jquery动画不会工作

> ID：11259208
> 
> 赞同：1
> 
> 时间：2012-06-29T09:22:24.543
> 
> 标签：jquery, html, css, jquery-animate

jQuery 新手在这里。

我想用两个按钮做一个简单的水平滚动功能。我想用动画来做。但是当我点击其中一个按钮时，什么也没有发生......

继承人的jQuery代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#right-button').click(function {
        $('#box').animate({
        left: +="200px"
        }, "fast");
    });

    $('#left-button').click(function {
        $('#box').animate({
        left: -="200px"
        }, "fast");
    });
});
</script> 
```

这是 HTML 代码：

```
<section id="main">
    <span class="scrollbutton left" id="left-button">(</span>
    <span class="scrollbutton right" id="right-button">)</span>
    <div id="box">
        <div class="column"></div>
        ...
    </div>
</section> 
```

（我也用 a-Tag 试过）

Aaaaand 这是CSS：

```
#main {
    border: solid 1px #fff;
    max-height: 480px;
    width: auto;
    display: block;
    overflow: hidden;
    background: #ddd;
}

#main #box {
    width: 2250px;
    display: inline;
    float: left;
    position: relative;
}

#main .column {
    float: left;
    display: inline;
    padding: 10px;
    width: 429px;
    border-left: solid 1px #333;
    height: 460px;
}

.scrollbutton {
    font-family: "WebSymbolsRegular";
    font-size: 30px;
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

.left {
    float: left;
}

.right {
    float: right;
} 
```

这可能是一个非常幼稚的错误，但我只是不知道它是什么......我希望你能帮助我:)

PS：你可以在这里找到它：http: [//patrickmanser.ch/pixelsword/](http://patrickmanser.ch/pixelsword/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:56:38.193

```
$('#right-button').click(function() {
        $('#box').animate({
        left: "+=200px"
        }, "fast");
    });

    $('#left-button').click(function() {
        $('#box').animate({
        left: "-=200px"
        }, "fast");
    }); 
```

功能（） ;-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:26:45.733

尝试：

```
$(document).ready(function() {
    $('#right-button').click(function {
        $('#box').animate({
        left: "+=200px"
        }, "fast");
    });

    $('#left-button').click(function {
        $('#box').animate({
        left: "-=200px"
        }, "fast");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:27:12.440

你有错误的动画函数语法，在

```
left: +="200px" 
```

+= 符号应在引号内。所以应该是这样的

```
left: "+=200px" 
```

对其他参数执行相同操作。

此外，

1.  您应该移动 .column 而不是 #box .. .column 在 #box 内。我认为它应该被移动。
2.  放置位置：相对于.column。
3.  至少从 .column 中删除 float:left 。

在这里查看工作小提琴 [http://jsfiddle.net/gaLKc/](http://jsfiddle.net/gaLKc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:34:50.787

```
 $('#right-button').click(function {
    $('#box').animate({
    left: "+=200"
    }, "fast");
}); 
```

不是“200px”应该是“=+200”

# java - 如何从 phonegap 和 android 访问相同的 sqlite 数据库？

> ID：11259209
> 
> 赞同：1
> 
> 时间：2012-06-29T09:22:26.487
> 
> 标签：java, android, html, sqlite, cordova

我正在尝试在 android 中构建一个游戏，游戏的大部分部分都是用 HTML5 编写的，一个 sqlite 数据库也是为此创建的。我想从 java 访问在 HTML5 中创建的 sqlite 数据库以添加或删除值？

有任何phonegap插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:35:45.723

请阅读此问题，这可能有助于您清楚地了解如何在 phonegap 中使用 sqlite 数据库

这里提供了一些关于 websqite 数据库的信息 [http://www.w3.org/TR/webdatabase/](http://www.w3.org/TR/webdatabase/)

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

有关此问题的更多信息，请查看此查询

[PhoneGap 上的 SQLite 数据库](https://stackoverflow.com/questions/5139302/sqlite-database-on-phonegap)

祝你好运

阿米尔汗一世。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T10:37:20.593

```
**Plugin name**
 cordova plugin add https://github.com/millerjames01/Cordova-SQLitePlugin.git

**html**
<input id="show" type="button" value="Show">

**js**

function globalError(tx, error)
   {
     alert("Error: " + error.message);
   }

var db = window.openDatabase('TabOrder', '', 'Bar Tab Orders', 2500000);
db.transaction(function(tx) {
tx.executeSql('DROP TABLE IF EXISTS SubmiteData;', null, null, globalError);
tx.executeSql('CREATE TABLE IF NOT EXISTS SubmiteData (SubmiteDataId integer 
primary  key, UserId text, AuthNo number, LocId number,ProdId number, 
CardId number, OrgLat text, OrgLng text, OrgTime text)', 
          null, 
          function()
          {
            SubmiteData("USER1",12345678,23434, 21212, 220232,
            "9", "45", "23/06/2014");

          },
          globalError);
 });

 function SubmiteData(UserId, AuthNo, LocId,ProdId, CardId, OrgLat, OrgLng, OrgTime){
 db.transaction(function(tx){
 tx.executeSql('INSERT INTO SubmiteData(UserId, AuthNo, LocId, ProdId, CardId, 
 OrgLat, OrgLng, OrgTime) VALUES (?,?,?,?,?,?,?,?)', [UserId, AuthNo, LocId,
 ProdId, CardId, OrgLat, OrgLng, OrgTime], 
            null,
            globalError
           );
 });
}

 function read(UserId, AuthNo, LocId,ProdId, CardId, OrgLat, OrgLng, OrgTime){

 db.transaction(function(tx) {
 tx.executeSql('SELECT * FROM SubmiteData',
         [],
         function(tx, results)
         { 
           for (var i=0; i<results.rows.length; i++) 
           {   
               var row=results.rows.item(i);
              // alert("Id: " + row['UserId']);
              var stringout = "LocId: " + row['LocId'] + "\n"; 
               alert(stringout); 
           } 
         },                
         globalError
        );
   });
 };

$(function()
{
    $('#show').click(read);
}); 
```

# php - 使用 Hybridauth 时如何解决此错误“发生错误 . 请稍后再试。”

> ID：11259210
> 
> 赞同：0
> 
> 时间：2012-06-29T09:22:29.567
> 
> 标签：php, hybridauth

我使用 hybridauth 连接 facebook，当我尝试连接 facebook 时出现以下错误。

```
An error occurred with <app name>. Please try again later.

API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

如何解决这个问题？

现在，当我调用页面时，它也被直接调用，但我想提供一个用户可以单击的链接，一旦用户单击，就只能在单独的弹出窗口中调用 facebook 登录，并使父页面阴影。

我在这里提出这个问题，因为我是 PHP 的新手，并且才开始在这三天内工作。

提前致谢

问候托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:19:55.143

确保您在 Facebook 应用设置中指定了**应用域**。Facebook 不允许您重定向到您指定之外的任何其他域。

在这里 https://developers.facebook.com/apps/[YOU_APP_ID]/summary

还要检查 www 和非 www 版本。

# google-app-engine - GWT-PhoneGap 整数

> ID：11259211
> 
> 赞同：0
> 
> 时间：2012-06-29T09:22:35.267
> 
> 标签：google-app-engine, gwt, cordova

我正在寻找将 gwt 与 phonegap 集成，我从 [可用于 GWT 的 Phonegap Jar 中获取](http://code.google.com/p/gwt-phonegap/)了一个，但我找不到任何资源如何使用 GWT 实现 phonegap，即我找不到如何关联 gwt 对象（如按钮、textarea、有电话间隙的事件。我确实看过[Gwt 和 phonegap 入门](http://code.google.com/p/gwt-phonegap/wiki/GettingStarted)，但这些资源仅提供有关 phonegap 可用方法的详细信息（事件、位置、计时器等）。谁能给我提供任何示例（#hello world#）如何集成 gwt 和 phonegap 或任何提供简单示例的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:51:35.423

在该存储库中还有一个用于使用 GWT 和 phonegap 的附加项目“展示”： [http ://code.google.com/p/gwt-phonegap/source/checkout?repo=showcase](http://code.google.com/p/gwt-phonegap/source/checkout?repo=showcase)

您还可以查看[mgwt](http://www.m-gwt.com/)。这是一个使用 GWT 创建移动应用程序的框架。它有很多用于移动 webkits 浏览器的小部件。它与 gwt-phonegap 一起工作得非常好。

# performance - WP 在显示页面之前是否在服务器端完成页面的渲染？

> ID：11259215
> 
> 赞同：1
> 
> 时间：2012-06-29T09:23:10.743
> 
> 标签：performance, wordpress, rendering, fouc

我项目的静态 html 页面有 javascript 动态修改的内容，这会导致 FOUC（无样式内容闪烁）。所以我默认让内容不可见，并在 DOM 准备好后将显示切换为可见。

静态 html 页面在我的本地驱动器上渲染得非常快，因此不可见状态和可见状态之间的时间差距并不明显。

但是，在项目与 WordPress 集成并放到远程服务器上后，页面渲染变得有点慢，因此时间差距变得更加明显。

当我单击超链接请求查看页面时，我希望 WordPress 在服务器端完成页面的重新渲染，然后向我显示该页面。等待 1 或 2 秒是可以的。WP能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:30:04.437

我猜这个问题是你的 CSS 没有通过网络立即加载，所以有一段时间你的 HTML 被渲染了，但是你的 CSS 没有加载。

（它也可能是动态的 Javascript 内容——如果不了解更多关于您的 Wordpress 安装和配置的信息，我无法谈论它）

预加载你的 CSS 不是 Wordpress 自己可以做的，尽管你应该注意到在第一页加载之后，浏览器会缓存你的 CSS，而且速度更快。

如果您*真的很*担心，请查找一些优化技术，例如对 CSS 等静态内容使用快速 CDN。雅虎[！例如，性能提示](http://developer.yahoo.com/performance/rules.html#cdn)非常适合所有网站性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:12:44.853

DOM Ready 在浏览器解析整个 HTML 后触发。这不仅仅是基本的 HTML 文件，它需要加载、解析和执行它在通过 HTML 时遇到的所有 css 和 javascript，然后才会触发事件（在 WP 的情况下是通常相当多）。

如果 WP 不在快速托管上（将其放在共享托管帐户上基本上只是乞求它慢一点），WP 本身生成 HTML 的速度也会很慢。像 W3TC 或 supercache 这样的页面缓存插件将有助于生成 HTML，但我敢打赌，你还有更多的前端活动会搞砸事情。

获取“高性能网站”的副本，然后在[WebPagetest](http://www.webpagetest.org/)之类的东西上对页面进行一些测试，这将使您可以看到外部资源（并捕获页面加载的视频）。这本书对于任何前端工程师理解和详细介绍前端性能问题都非常重要。

# installation - 从 inno 设置的底部面板中删除语言标签

> ID：11259216
> 
> 赞同：2
> 
> 时间：2012-06-29T09:23:14.070
> 
> 标签：installation, inno-setup

我想从底部面板中删除语言标签..就像下面的屏幕一样，它显示 NORSK..因为我选择了挪威语作为我选择的安装语言..

![在此处输入图像描述](../Images/03fbec8449827ebee4fe8ddd7bd9e5ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:48:04.517

使用该部分从脚本中清除`BeveledLabel`消息键值[`[Messages]`](http://www.jrsoftware.org/ishelp/topic_messagessection.htm)（或直接在语言文件中清除此键值`*.isl`以使此更改永久生效）：

```
[Messages]
BeveledLabel= 
```

# iphone - 文件不存储在文档目录中

> ID：11259225
> 
> 赞同：1
> 
> 时间：2012-06-29T09:23:32.933
> 
> 标签：iphone, objective-c, ios5, nsdocumentdirectory

我在文档目录中存储扩展名为 .m4a 的音频文件

我的文件第一次完美地存储在文档目录路径中，但是

之后我的文件不会存储在文档目录路径中。

在控制台中，它向我显示了整个路径，但在文档目录中

不存在。我的代码如下：

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [path objectAtIndex:0]; 
        originalFilePath  = [documentsDirectory stringByAppendingPathComponent:audioname];

        NSLog(@"Audioname:::: %@",audioname);

        NSLog(@"originalpath=%@",originalFilePath); 
```

如果您有任何想法，请与我分享。

# .net - Web.config 的最大大小是多少？

> ID：11259229
> 
> 赞同：5
> 
> 时间：2012-06-29T09:23:53.093
> 
> 标签：.net, sharepoint, error-handling, web-config

当我尝试打开我的 SharePoint 扩展网站时，收到错误 500。错误消息是：

> 无法读取配置文件，因为它超过了最大文件大小

我的`web.config`文件只有大约 260 KB，因为里面有很多`<SafeControl>`条目。删除一些旧条目并将文件减小到 186 KB 后，我的网站开始正确加载。

我的问题：

*   web.config 的最大大小是多少？
*   将来可以做些什么来避免此类问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T09:27:05.473

它没有硬编码它的定义

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp\Configuration\MaxWebConfigFileSizeInKB 
```

或在 64 位机器上

```
HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\InetStp\Configuration\MaxWebConfigFileSizeInKB 
```

默认情况下的“截止点”，除非您将其配置`MaxWebConfigFileSizeInKB`为 250Kb

请记住，您始终可以将 web.config 文件拆分为多个小文件来解决此问题，

# c# - 使用“通用类型系统”作为编码标准

> ID：11259230
> 
> 赞同：4
> 
> 时间：2012-06-29T09:23:55.120
> 
> 标签：c#, .net, coding-style, clr

我们的编码标准“规则”之一是：

> *   使用通用类型系统。例如，使用`Int32`代替`int`.

我以前没有见过类似的规则，尽管我们的其他指南大致基于 Microsoft 的[设计指南文摘](http://blogs.msdn.com/b/kcwalina/archive/2004/09/28/235232.aspx)。看起来也不是[通用类型系统](http://en.wikipedia.org/wiki/Common_Type_System)。

我发现这很不方便，因为我最终不得不重写默认的 Visual Studio 和 ReSharper 重构以转换`string`为`String`、`float`to `Single`、`long`to`Int64`等。它的应用也相当不一致（例如，不是`object`to `Object`），可能是由于它的不便，并且没有 StyleCop 规则存在以检查它是否已应用。

因此，我想知道为什么会制定此规则。有什么好的理由吗？是否有任何情况（可能是历史性的）`Int32`必须使用而不是`int`例如？

**更新**：

我通读了推荐的框架设计指南（2006 年，Cwalina 和 Adams）第 3.2.3 节*避免使用特定语言的名称*，它们指出“*避免**在标识符***中使用这些特定于语言的类型名称很重要”（我的重点）。同意。

然而，Jeffrey Richter 继续评论“*我更进一步，从不使用该语言的别名 [因为它] 没有增加任何价值并引入了巨大的混乱*”。也许这就是这条规则的来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:12:43.177

我怀疑这条规则来自对框架指南的误解。

该指南在[通用命名约定](http://msdn.microsoft.com/en-us/library/ms229045.aspx)部分中说：

> **在标识符在其类型之外没有语义含义的极少数情况下，请使用通用公共语言运行时 (CLR) 类型名称，而不是特定于语言的名称。**
> 
> 例如，将数据转换为的方法`Int16`应该命名为`ToInt16`，而不是`ToShort`因为`Short`是特定于语言的类型名称`Int16`。

如果您创建的标识符包含一个类型作为其名称的一部分，例如一组`SomeType ReadSomeType()`方法，那么您应该使用实际的类型名称`SomeType`而不是 C# 别名。

使用不同语言工作的程序员可能会将不同的含义与类型相关联。例如，如果您有一个`ReadFloat()`方法，C# 程序员会假设它返回`System.Single`，而 F# 程序员会假设它返回`System.Double`。所以你应该命名它`ReadSingle`或`ReadDouble`.

此规则不适用于在代码中用于引用类型的简单类型名称。使用您的库的程序员永远不会看到您使用了哪个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:57:42.537

对于[*Class Library Developers*](http://msdn.microsoft.com/en-us/library/ms229045.aspx)有一个建议，参考*公开*的名称：

> 在标识符在其类型之外没有语义含义的极少数情况下，请使用通用公共语言运行时 (CLR) 类型名称，而不是特定于语言的名称。

然而，据我所知，它从来都不是关于内部变量的推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:31:56.523

我想不出任何原因，但我必须警告说我只使用了框架的 3.5+ 版本，并且可能有一些我不知道的历史原因。基本上简单类型 ( `int`) 只是预定义`struct`类型 ( `System.Int32`) 的别名。一些可能会帮助您确定这样做的原因是不必要的点，直接来自 C# laungage 指南......

"*简单类型*通过保留字（`sbyte`, `byte`, ... , `int`, `long`, ... , `float`, `double`）标识，但这些保留字只是命名空间中预定义`struct`类型的别名`System`（`System.SByte`, `System.Byte`, ... `System.Int32`, 等）。因为一个简单类型给一个类型起别名`struct`, 每个简单类型都有成员. 例如`int`有声明`System.Int32`的成员和继承自的成员`System.Object`和语句

```
int i = int.MaxValue;    // System.int32.MaxValue constant.
string s = i.ToString(); // System.Int32.ToString() instance method. 
```

被允许。”

这继续下去，但一般的要点是简单类型只是别名 - 就是这样。没有理由做你所描述的事情。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:44:09.373

如果您在多语言环境中工作，或者您正在开发框架或共享库，则此规则是有意义的。

首先，它保证 CLS 支持所有使用的类型（参见[1](http://msdn.microsoft.com/en-us/library/12a7a7h3.aspx)）。其次，它避免了由于相同类型在不同.Net 语言中具有不同名称而可能造成的混淆。

我强烈推荐这本书“框架设计指南：可重用 .Net 库的约定、惯用语和模式”一书中讨论了这个主题。

[通用语言规范](http://msdn.microsoft.com/en-us/library/12a7a7h3.aspx)

# iphone - 如何完成支付交易 - 应用内购买

> ID：11259238
> 
> 赞同：0
> 
> 时间：2012-06-29T09:24:45.480
> 
> 标签：iphone, ios, ios4, in-app-purchase

我正在应用程序购买中实现（非消耗型 - 歌曲）。当用户为每首歌曲购买点击购买时，我调用**startPurchase 功能**。我的歌曲内容通过我的服务器交付。

因为当我购买了一些东西并再次尝试重新购买相同的东西时，它不会被视为购买的恢复。它会进行新的购买。委托方法被多次调用

实际上我的问题是，我点击购买并继续付款，然后购买了该商品。

再次，当我尝试购买相同的商品时，当我点击“确定”时，苹果警报显示为“**您已经购买了该商品，点击确定下载”。**这不是在**SKPaymentTransactionStateRestored**下，而是转到**SKPaymentTransactionStatePurchased**。为什么会发生这种情况? 请帮忙

请帮帮我

```
- (void)startPurchase:(NSString*)inProductId{

  if ([SKPaymentQueue canMakePayments])
  {
     myProductId = inProductId

    SKProductsRequest *productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:myProductId]];
    productsRequest.delegate = self;
    [productsRequest start];
  }
  else {
    NSLog(@"Parental-controls are enabled");
      }

}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:
  (SKProductsResponse *)response {

  NSLog(@"response received");
  SKProduct *validProduct = nil;
  int count = [response.products count];

  UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Message" message:
  [NSString stringWithFormat:@"%d",response.products.count] delegate:
  self cancelButtonTitle:@"OK" otherButtonTitles:nil];

  [alert show];
  [alert release];

  if (count > 0) {
    validProduct = [response.products objectAtIndex:0];
    NSLog(@"products available");
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:myProductId];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
  }
  else if (!validProduct) {
    NSLog(@"No products available");
  }
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        SKPayment *payment = [transaction payment];

      if([payment.productIdentifier isEqualToString:myProductId])
      {
          NSLog(@"%@payement queue payment.productIdentifier",payment.productIdentifier);

        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                NSLog(@"completeTransaction");
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                NSLog(@"failedTransaction");
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                NSLog(@"restoreTransaction");
                [self restoreTransaction:transaction];
            default:
                break;
        }
      }
    }
}

- (void)provideContent:(NSString *)productIdentifier
{
    NSLog(@"Provide Content %@", productIdentifier);

    }

- (void)recordTransaction:(SKPaymentTransaction *)transaction {
    NSLog(@"inside the recordTransaction");

}

- (void) completeTransaction: (SKPaymentTransaction *)transaction
{
    [self recordTransaction: transaction];
    [self provideContent: transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void) restoreTransaction: (SKPaymentTransaction *)transaction
{
    NSLog(@"restoreTransaction transaction inside");

   }

- (void) failedTransaction: (SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        if(transaction.error.code == SKErrorUnknown) {
            NSLog(@"Unknown Error (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorClientInvalid) {
            NSLog(@"Client invalid (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorPaymentInvalid) {
            NSLog(@"Payment invalid (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorPaymentNotAllowed) {
            NSLog(@"Payment not allowed (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }
    }
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:40:34.663

我认为您的问题添加事务服务器重复反映尝试下面的代码以避免添加事务服务器重复可能是它的工作：

```
- (void)startPurchase:(NSString*)inProductId{

  if ([SKPaymentQueue canMakePayments])
  {
     myProductId = inProductId

    SKProductsRequest *productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:myProductId]];
    productsRequest.delegate = self;
    [productsRequest start];
  }
  else {
    NSLog(@"Parental-controls are enabled");
      }

}
static bool hasAddObserver=NO;
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:
  (SKProductsResponse *)response {

  NSLog(@"response received");
  SKProduct *validProduct = nil;
  int count = [response.products count];

  UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Message" message:
  [NSString stringWithFormat:@"%d",response.products.count] delegate:
  self cancelButtonTitle:@"OK" otherButtonTitles:nil];

  [alert show];
  [alert release];

  if (count > 0) {
    validProduct = [response.products objectAtIndex:0];
    NSLog(@"products available");
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:myProductId];
    if (!hasAddObserver) {
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    hasAddObserver=YES;
    }
    [[SKPaymentQueue defaultQueue] addPayment:payment];
  }
  else if (!validProduct) {
    NSLog(@"No products available");
  }
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        SKPayment *payment = [transaction payment];

      if([payment.productIdentifier isEqualToString:myProductId])
      {
          NSLog(@"%@payement queue payment.productIdentifier",payment.productIdentifier);

        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                NSLog(@"completeTransaction");
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                NSLog(@"failedTransaction");
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                NSLog(@"restoreTransaction");
                [self restoreTransaction:transaction];
            default:
                break;
        }
      }
    }
}

- (void)provideContent:(NSString *)productIdentifier
{
    NSLog(@"Provide Content %@", productIdentifier);

    }

- (void)recordTransaction:(SKPaymentTransaction *)transaction {
    NSLog(@"inside the recordTransaction");

}

- (void) completeTransaction: (SKPaymentTransaction *)transaction
{
    [self recordTransaction: transaction];
    [self provideContent: transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void) restoreTransaction: (SKPaymentTransaction *)transaction
{
    NSLog(@"restoreTransaction transaction inside");

   }

- (void) failedTransaction: (SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        if(transaction.error.code == SKErrorUnknown) {
            NSLog(@"Unknown Error (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorClientInvalid) {
            NSLog(@"Client invalid (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorPaymentInvalid) {
            NSLog(@"Payment invalid (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }

        if(transaction.error.code == SKErrorPaymentNotAllowed) {
            NSLog(@"Payment not allowed (%d), product: %@", (int)transaction.error.code, transaction.payment.productIdentifier);
            UIAlertView *failureAlert = [[UIAlertView alloc] initWithTitle :@"In-App-Purchase Error:"
            message: @"There was an error purchasing this item please try again."
            delegate : self cancelButtonTitle:@"OK"otherButtonTitles:nil];
            [failureAlert show];
            [failureAlert release];
        }
    }
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

在你的我检查交易服务器是否添加到代码下方：

```
if (!hasAddObserver) {
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    hasAddObserver=YES;
    } 
```

hasAddObserver 变量静态 bool 数据类型是检查是否已添加容易添加检查事务服务器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:05:40.183

就 [official Apple documentation][1] 而言，这是正常行为：
“如果用户尝试购买可恢复的产品（而不是使用您实现的恢复接口），**应用程序会收到该项目的常规交易，而不是restore transaction**。但是，不会再次向用户收取该产品的费用。您的应用程序应将这些交易视为与原始交易相同的交易。"

# javascript - 防止哈希作为锚点

> ID：11259239
> 
> 赞同：0
> 
> 时间：2012-06-29T09:24:52.173
> 
> 标签：javascript, jquery, html, css

我有一个 jQuery 菜单，它是这样构建的：

```
<h3 id='300' rel='default.aspx?PageID=300#300'>Item0</h3>
<h3 id='301' rel='default.aspx?PageID=301#301'>Item1</h3>
<h3 id='302' rel='default.aspx?PageID=302#302'>Item2</h3> 
```

问题是它触发了锚功能并使页面跳转/向下滚动到单击的菜单点。

我怎样才能防止这种情况？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:27:32.993

你听说过链接吗？它们是 HTML 中非常棒的东西。

无论如何，一旦您将每个更改为：

```
<h3 id='300'><a href='default.aspx?PageID=300#300'>Item0</a></h3> 
```

然后只需`return false;`在单击处理程序的末尾添加即可覆盖该功能。

在实际页面上，确保没有任何 ID 为 300 的内容。无论如何它都不是有效的 ID，所以无论如何你都不应该有任何 ID。

# java - 从 Java 调用 Access 中的 VBA 函数

> ID：11259240
> 
> 赞同：0
> 
> 时间：2012-06-29T09:24:55.410
> 
> 标签：java, ms-access, vba, jdbc-odbc

我有一个使用 MS Access 设计的数据库，并在数据库中编写了 VBA 函数当我尝试使用 JdbcOdbc Bridge 从 Java 程序调用此函数时，我收到 SQLException 消息，意思是“未找到函数”数据库中的函数访问修饰符是“公共的”，我尝试在连接 URL 中使用“ExtendedAnsiSQL=1”，但失败了 是否缺少某些内容或无法从外部程序调用这些函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:28:18.263

MS Access 分为两部分，一个是您要连接的 Jet/ACE 数据库，另一个是“前端”，因为需要一个更好的词，它包含表单、报告和代码。如果没有应用程序的实例，我不相信您将能够在 MS Access 中引用代码。

# code-snippets - 查询中的 modx revo 片段变量

> ID：11259245
> 
> 赞同：0
> 
> 时间：2012-06-29T09:25:32.413
> 
> 标签：code-snippets, modx-revolution

我注意到片段中的查询中有一些奇怪的东西。当我有这样的查询时：

```
$sql = 'SELECT * FROM table WHERE colomn = ' . $variable; 
```

我回`$sql`显，查询内容如下：

```
SELECT * FROM table WHERE colomn = <code class="php plain">2</code> 
```

.. 这将导致错误，因为`$sql`不再有效。所以，现在我使用`strip_tags`删除`code`标签，但我发现它不是一个非常干净的方法。

我找不到有关此问题的任何信息，所以也许有人可以为我解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:56:17.883

你想用那个简单的 SQL 查询什么？MODX 使用 XPDO 来检索他们的数据。

请尝试学习这一点以获得抓地力。

[http://rtfm.modx.com/display/xPDO20/Retrieving+Objects](http://rtfm.modx.com/display/xPDO20/Retrieving+Objects)

这是开始的基本查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:12:04.983

我从来没有见过 revo 做这样的事情，只是使用普通浏览器来查看页面，而不是一些奇怪的工具？

如果您：

$sql = "SELECT * FROM table WHERE colomn = '".$variable."';";

# android - 帧内动画 - 如何删除位图大小超出 Android 中的 VM 预算错误

> ID：11259247
> 
> 赞同：1
> 
> 时间：2012-06-29T09:25:42.930
> 
> 标签：android, android-emulator

我需要使用更多图像来制作动画。所以我使用逐帧动画。但我正面临着`java.lang.OutOfMemoryError: bitmap size exceeds VM budget`。我已经搜索了互联网，但我没有任何想法。任何人请帮助我。

我尝试使用以下代码：

**活动.java**

```
scr1.setBackgroundResource(R.drawable.data9);
AnimationDrawable frameAnimation9 = (AnimationDrawable)scr1.getBackground();
frameAnimation9.start();
frameAnimation9.setOneShot(true); 
```

**数据9.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
                android:oneshot="false">
    <item android:drawable="@drawable/s1" android:duration="100" />
    <item android:drawable="@drawable/s3" android:duration="100" />
    <item android:drawable="@drawable/s5" android:duration="100" />
    <item android:drawable="@drawable/s6" android:duration="100" />
</animation-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:15:30.927

内存不足位图大小超出 VM 预算当您一次加载多个尺寸较大的图像时会发生此异常。VM 大小因设备而异，通常如果您使用的是高端设备，您可能很少会遇到此问题。对您的总图像进行像素转换后，您的总图像大小不应超过 12MB，以确保尺寸更安全。

所以你可以做的是你可以通过压缩它们来减小你的图像大小，或者你可以将所有图像组合成一个 .gif，然后使用视频视图来播放 gif。（请注意你的 gif 不是太大) 这可能会有所帮助。

# jquery - 如何编写基于编码的 twitter 样式字计数器？

> ID：11259250
> 
> 赞同：0
> 
> 时间：2012-06-29T09:25:47.517
> 
> 标签：jquery, mysqli, counter

我的表中有一个类型为`TINYTEXT`. 该字段的编码是`UTF8-UNICODE-ci`。如果中国人在该字段中输入内容，则限制为 88 个字符，但如果伊朗人在波斯语中输入内容，则限制为 135 个字符，依此类推。所以最大文本长度根据 unicode 变化。如何克服这种情况并拥有基于特定语言的单词计数器？
有办法吗？我找不到它的方法;(

PS：我已经阅读了整个[jQuery APIs](http://api.jquery.com/)，但在 PHP 中找不到类似 mb_strlen() 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:42:45.487

“字数计数器”我假设您的意思是“字符计数器”，因为您的问题是关于字符的。

构建这个计数器有两个部分：

1.  需要一种方法来计算 UTF-8 字符串中的字节数。谢天谢地，其他人已经[回答](https://stackoverflow.com/a/2848483/311572)了这个问题：

    ```
    encodeURIComponent(text).replace(/%[A-F\d]{2}/g, 'U').length 
    ```

2.  每次用户键入内容时都需要一种方法来触发计数功能。我们可以使用`keyup`事件：

    ```
    $('textarea').keyup(function () { ... }); 
    ```

这是一个完整的示例：http: [//jsfiddle.net/jefferyto/DWwQr/](http://jsfiddle.net/jefferyto/DWwQr/)

* * *

**更新：**我猜你正在寻找的是一个倒计时的计数器*，*指示用户可以输入多少个字符。

从技术上讲，这并不难计算，如果您假设 1 个字符中有多少字节：

```
(characters left) = Math.floor((255 - (num bytes in string)) / (num bytes in character)) 
```

但从用户的角度来看，这不是一个好主意：

1.  你会用作`num bytes in character`什么？

    如果您使用 1，则计数器一开始会显示 255，但这仅适用于 ASCII 字符；用户将无法输入 255 个汉字。

    您选择的任何数字对于您的部分用户来说都是不正确的。

2.  When the user starts entering text, the counter will not count down 1 by 1, as the user would expect, but rather in incomprehensible steps (incomprehensible to the user).

    Again assuming 1 byte per character for the calculation, before the user has entered any text, the counter will say 255\. If the user enters a 4-byte character, the counter would change to 251.

    It makes no sense to the user that they entered 1 character but the counter decreased by some other number.

I suggest using VARCHAR instead of TINYTEXT; the length of a VARCHAR field is defined with a number of characters instead of bytes. Doing so means your character count can be stable and correct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:24:34.937

您可以从 mysql 获取 UTF-8 并在计数之前将其转换为 javascript 中的 UTF-16。我似乎记得我曾经做过这样一个转换的旧项目。

编辑：我们使用的代码似乎起源于[这里](https://www2.konfabulator.com/forums/lofiversion/index.php/t29510.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:18:17.757

可能这会有所帮助[http://tympanus.net/codrops/2009/11/08/jmaxinput-twitter-like-textarea/](http://tympanus.net/codrops/2009/11/08/jmaxinput-twitter-like-textarea/) 我用这个 س 检查了它，它把它当作一个字符。

# asp.net - ASP.NET：如何检索登录用户的名称？

> ID：11259251
> 
> 赞同：1
> 
> 时间：2012-06-29T09:25:54.163
> 
> 标签：asp.net, vb.net, visual-studio-2010, visual-studio

下午所有，

我有一个网站，我需要知道谁在我的数据库表中插入一条记录。我有一组用户，我已将其填充到 Active Directory (AD) 组中，而他们又是唯一能够访问该站点的成员。（参见下面的 web.config 代码和 .vb 代码）

'配置文件

```
 <appSettings>
           <add key="dbConnection" value="Data Source=xxx;Initial Catalog=xxx;User ID=xxx;Password=xxx;"/>
           <add key="Users" value="Users_General_Access"/>
     </appSettings> 
```

'Vb 代码

```
 If User.IsInRole(ConfigurationManager.AppSettings("Users")) Then

    Else
        Response.Redirect("NotAuthorised.aspx")
    End If 
```

我有一个存储过程，用于将表单字段中的数据插入数据库，它工作正常。

我遇到的问题是我没有要求用户登录，因为他们可以通过 AD 设置登录。但是我需要获取用户名，以便我可以将其填充到我的数据库表中以说明谁添加了该记录。

是否有一些我可以用来获取此信息的 VB 代码？

非常感谢贝蒂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T09:29:29.367

```
HttpContext.Current.User.Identity.Name 
```

或仅 `User.Identity.Name`根据 OP 的代码`User`在范围内

会给你用户名。使用可以访问其他信息使用

`User.Identity`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T09:31:10.403

您可以通过以下方式使用您的应用程序获取当前用户名：

```
string loggedUser = HttpContext.Current.User.Identity.Name.ToString(); 
```

一旦你有了这个，你可以存储在数据库中

将loggedUser传递给数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:44:07.117

正如其他人所说，您可以使用`User.Identity.Name`.

如果您在 web.config 中添加正确的标签，您还可以摆脱检查角色成员身份的代码。仅当事先不知道角色名称并且无法将其存储在 web.config 文件中时，检查代码中的成员身份才有用，例如。当角色来自数据库时。

您可以使用[位置](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)标签指定有权访问特定页面[的角色：](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)

```
<configuration>
 ....
 <location path="MySecurePage.aspx">    
      <system.web>    
           <authorization>    
                <allow roles="Administrators,MyGroup" />    
                <deny users="*"/>
           </authorization>    
      </system.web>    
 </location> 
</configuration> 
```

# tomcat7 - 部署问题当 unpackWARs 在 tomcat7 中为 false 时

> ID：11259252
> 
> 赞同：0
> 
> 时间：2012-06-29T09:25:57.417
> 
> 标签：tomcat7

我正在尝试在 Tomcat 7.0.27 中部署我的 grails 应用程序

我的应用程序库目录包含一些属性文件以及罐子。在 tomcat server.xml 中，当我将 unpackWARs 设置为 false （压缩部署）时，apache-tomcat-7.0.27/work/Catalina/localhost/_/WEB-INF/lib 目录仅包含 Jars 而不是我拥有的属性文件我的应用程序库。我也尝试将属性文件放在tomcat lib中，但没有锁...... tomcat中是否有任何配置可以解决此问题？

此外，当 unpackWARs 为 false 时，apache-tomcat-7.0.27/work/Catalina/localhost/_/WEB-INF/ 中只有两个文件夹 lib 和 classes。这也产生了一个新问题，因为我的应用程序也在 WEB-INF 中搜索其他一些文件夹。这适用于 unpackWARs true。

对上述两个问题的任何帮助都会受到重视

为了克服以上两个问题，我可以将unpackWARs设置为true，但是提取war有问题。假设我的 war 文件名为 ROOT.war 并且 ROOT 文件夹已经存在于 webapps 中，那么服务器启动时不提取 ROOT.war 并且我的应用程序使用旧的 ROOT 文件夹。清理现有提取的战争文件夹 ROOT 的最佳方法应该是什么？现在，我正在删除启动 stipt /etc/init.d/tomcat 中现有的 ROOT 文件夹。

我应该设置 unpackWars true 还是 false ？

非常感谢提前..

我使用的操作系统是 RHEL 5.2 .. 如果您需要更多信息，请告诉我

问候，普拉尚特·古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:27:58.327

只需使用 unpackwars true 并让 tomcat 替换旧目录和文件，里面的所有内容都会被覆盖。无需使用启动脚本删除。

如果您不想替换 ROOT，请不要调用文件 ROOT.war。

# oracle - Oracle 复合触发器 - 如何存储和“使用”已删除的行？INDEX BY 表？

> ID：11259254
> 
> 赞同：3
> 
> 时间：2012-06-29T09:26:02.747
> 
> 标签：oracle, triggers, delete-row, ora-04091

我现在正在为 Oracle 中的 DELETE 触发器进行长期斗争，该触发器在删除一行后，会从剩余的行中选择一个新的 MAX 值并将其写入另一个表。在偶然发现烦人的 ORA-04091 变异表错误（在 FOR EACH ROW 时无法读取表）后，我切换到 Oracle 的复合触发器。

我怎样才能最好地存储已删除的行（每行有多个值，因为只有在删除的分数可能是高分而不是低分时，进一步检查才会更新）？我担心如果多个触发事件交叉触发并且例如为“DeletedMatches”运行高分更新，该全局临时表可能会以一团糟而告终，这些“DeletedMatches”实际上并没有被删除，而是由触发事件之前注册。

我可以创建一个表，它 a) 仅在此触发器中本地存在 b) 可以像普通数据库表或临时表一样在 SQL 中使用？

每当匹配被删除时，以下（伪）代码将更新 CurrentHighScores 表（旧的高分消失并由最高的剩余分数代替）。

```
CREATE TABLE GameScores (
    MatchId number not null --primary key
    Player  varchar(255) not null,
    Game    varchar(255) not null, -- PacMan, Pong, whatever...
    Score   number not null );

-- High score for each game:
CREATE TABLE CurrentHighScores (
    HiScId number not null --primary key
    Player  varchar(255) not null,
    Game    varchar(255) not null,
    HighScore   number not null );

create or replace TRIGGER UpdHiScoreOnMatchDelete
FOR DELETE ON GameScores 
COMPOUND TRIGGER
    TYPE matchtable IS TABLE OF GameScores%ROWTYPE INDEX BY SIMPLE_INTEGER;
    DeletedMatches matchtable;
    MatchIndex SIMPLE_INTEGER := 0;

BEFORE EACH ROW IS -- collect deleted match scores
BEGIN
  MatchIndex:= MatchIndex+ 1;
  DeletedMatches(MatchIndex).Game := :old.Game;
  DeletedMatches(MatchIndex).Score := :old.Score;
  -- don't want to set every column value, want to 
      -- do like: INSERT :old INTO DeletedMatches;
      -- don't want the Index either!
END BEFORE EACH ROW;

AFTER STATEMENT IS
BEGIN
    UPDATE CurrentHighScores hsc 
    SET hsc.HighScore=(
      select max(gsc.Score) from GameScores gsc
      where hsc.Game=gsc.Game)
    where hsc.Game IN (
      select del.Game from DeletedMatches del where hsc.HighScore = del.Score)
      -- won't work, how can I check within the SQL if a row 
              -- for this game has been deleted, or anyhow integrate 
              -- DeletedMatches into the SQL, without a cursor?
              -- Optional further cond. in subselect, to update only 
              -- if deleted score equals highscore: 
    and exists(
      select 1 from GameScores where Game=hsc.Game); 
      -- ignore games without remaining match scores.

    -- Delete/set zero code for games without existing scores omitted here.
END AFTER STATEMENT; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T10:01:23.187

“烦人”的变异表错误几乎总是表明设计不佳，通常是非规范化的数据模型。这似乎适用于这种情况。如果您需要维护汇总值、计数、最大值等，为什么不使用 Oracle 的内置功能？Oracle 为我们提供了专门用于处理摘要的 MATERIALIZED VIEW 对象。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14223/basicmv.htm#i1006519)。

在您的情况下，将 CurrentHighScores 替换为物化视图。

```
CREATE MATERIALIZED VIEW CurrentHighScores 
BUILD IMMEDIATE
REFRESH FAST
as select 
( 
    Player , 
    Game    , 
    max(score) as HighScore  
from GameScores 
group by player, game ; 
```

您还需要在 GameScores 上构建一个 MATERIALIZED VIEW LOG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:47:45.883

对于这种情况，全局临时表完成了这项工作。收集 BEFORE EACH ROW 游标中的所有 :old 行，然后在 AFTER STATEMENT 中，将临时表与删除表连接起来，并找到已删除项目的新 MAX 值。

我担心全局 temp 中的触发条目会与其他触发事件中的条目混淆，就像 MSSQL #tempTable 一样，这是错误的，ON COMMIT DELETE ROWS 工作正常。

可惜这么简单的触发任务，要在 MSSQL 中在几个小时内完成（包括测试），花了太多时间，阅读所有 Oracle 后台。在 Oracle SQL Developer 中，人们可以很容易地在一些奇怪的、神秘的错误消息（至少以可见的行作为参考）之后查看几个小时，却发现原因是缺少行结束分号或未正确关闭堵塞。

物化视图可能是未来的选择，我的问题是：matview 数据是事务性的（如触发器所做的更改），还是延迟报告功能？我知道它可以配置为定期更新，但也可以至少几乎立即进行“快速”更新。但是，这有更多烦人的限制（例如，如果要搜索 MAX 值，则没有 Where 子句）。

# android - Android应用程序运行几个小时后消失

> ID：11259255
> 
> 赞同：0
> 
> 时间：2012-06-29T09:26:09.207
> 
> 标签：android, mobile, crash, gps

我正在开发一个移动应用程序，用于根据 GPS 距离旅行进行旅行计费，

我面临一种情况，应用程序在运行超过 10 小时后消失，任何帮助

等待回复

问候沙尚克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:31:52.597

是服务吗？还是活动？你是如何实施的？如果它只是一个活动，Android 可以在您随时失焦时删除您的应用程序。

# datetime - Python时间总是在脚本开头？

> ID：11259258
> 
> 赞同：0
> 
> 时间：2012-06-29T09:26:13.163
> 
> 标签：datetime, python-2.5

我编写的代码涉及让时间等待 10 分钟，然后再次获取时间，但在两种情况下都`datetime.time(datetime.now())`返回相同的时间，并且在这两种情况下，时间都不是我运行部件检查时间的时间，而是时间整个脚本开始执行

（例如，如果脚本在 7:05 和 7:06 开始，我检查它会告诉我它的 7:05 等的时间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:46:02.677

啊，我才意识到发生了什么，我将`datetime.time(datetime.now())`其作为默认参数传递给了一个方法

```
def timeTo12Hour(time = datetime.time(datetime.now())):
    etc... 
```

我相信它是在脚本开始时而不是在我执行该方法时进行评估的。

# android - 在 Android 中通过 Edittext 字段插入数据库

> ID：11259263
> 
> 赞同：0
> 
> 时间：2012-06-29T09:26:21.330
> 
> 标签：android, database, button, android-edittext

我是新手`Android`。我无法将数据插入我的数据库。虽然它通过 editText 字段接受文本，但它没有保存在数据库中。

`XML`我想使用按钮的`android:onClick`属性将数据插入数据库表。

当我点击我的保存按钮时，我的应用程序立即崩溃

//面试活动.java

```
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.RemoteViews.ActionException;
import android.widget.Toast;
import android.content.ContentValues;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;

public class InterviewActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.welcomeactivity);

    }

    public void onQuestionClicked(View view) {
        EditText Q = (EditText)findViewById(R.id.Questiont);
        EditText A = (EditText)findViewById(R.id.Answert);    

        Q.setVisibility(View.VISIBLE);
        A.setVisibility(View.INVISIBLE);

        Toast.makeText(this, "Enter your Question here", Toast.LENGTH_LONG).show();
    }
    public void onAnswerClicked(View view) {
        EditText Q = (EditText)findViewById(R.id.Questiont);
        EditText A = (EditText)findViewById(R.id.Answert);    

        A.setVisibility(View.VISIBLE);
        Q.setVisibility(View.INVISIBLE);

        Toast.makeText(this, "Enter your Answer here", Toast.LENGTH_LONG).show();
    }

    public void onSave(View view) {
        EditText Q = (EditText)findViewById(R.id.Questiont);
        EditText A = (EditText)findViewById(R.id.Answert);    

        String q = Q.getText().toString();
        String a = A.getText().toString();

        Toast.makeText(this,"Question :"+" " + q + "\n" +
                "Answer :"+" " + a, Toast.LENGTH_LONG).show();

    }

    public void onCancel(View view) {
        finish();
    }
} 
```

//trying.java

```
package com.ques.ans;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class trying extends SQLiteOpenHelper{

    public static final String DB_NAME = "save.db";
    public static final int DB_VERSION=2;
    public static final String TABLE="qnadb";
    public static final String SNO = "Sno";
    public static final String QUESTION = "Question";
    public static final String ANSWER = "Answer";   

    public trying(Context context) {
        super(context,DB_NAME, null, DB_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String sql = "create table TABLE (SNO integer autoincrement primary key not null, QUESTION text , ANSWER text);";
        // TODO Auto-generated method stub
        db.execSQL(sql);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE);
        onCreate(db);
    }

    public void onsaving(String q,String a) {
        SQLiteDatabase db=this.getWritableDatabase();
        ContentValues cv=new ContentValues();
        cv.put(SNO, 1);
        cv.put(QUESTION, q);
        cv.put(ANSWER, a);
        db.insert(TABLE,null, cv);
        db.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:36:43.433

所以你的`PK`（主键）使用`AUTOICREMENT`所以你不能将它添加到数据库中。尝试使用以下代码片段修复您的方法：

```
ContentValues cv = new ContentValues();
   cv.put(QUESTION, q);
   cv.put(ANSWER, a);
   db.insert(TABLE, null, cv); 
```

这也是我认为错误的。您将表名定义为`TABLE`

```
String sql = "create table TABLE (SNO integer autoincrement primary key not null, QUESTION text , ANSWER text);"; 
```

并且您`static variable`具有价值**gnadb**。这是不正确的，不是吗？

```
public static final String TABLE = "qnadb"; 
```

因此，将您的表名更改为

```
String sql = "create table qnadb (SNO integer autoincrement primary key not null, QUESTION text , ANSWER text); 
```

或更改`TABLE`变量的值。

因此，现在尝试更改此建议，然后它应该可以工作。

# .net - 添加服务失败。无法连接到远程服务器

> ID：11259264
> 
> 赞同：1
> 
> 时间：2012-06-29T09:26:28.843
> 
> 标签：.net, wcf, exception-handling

我知道这是一个常见问题解答，并且我已经阅读了所有类似的 Q 和 A，但我仍然不正确。

一般来说，我是 Web 服务和 ASP.NET 的新手。我有一个由同事编写的小型 WCF 服务应用程序，该应用程序可以在他的电脑上运行并进行演示。在我的电脑上，没有任何更改，当将其添加为服务时，我无法让它被 WCF 测试客户端程序接受（下面的错误消息）。我的同事现在请假！

项目属性设置为开始`WcfTestClient.exe`使用具有自动分配端口号的 VS 开发服务器。该项目添加了服务所需的一个`webform.aspx`和一个文件。`Global.asax`

我跑了

```
netsh http add urlacl url=http://localhost:51568/Service1.svc user=<loginname> 
```

我的问题是如何让 WcfTestClient 启动服务以及浏览器上的网络表单？

我已经查看了类似问题的各种 SO 答案，但仍然感到困惑。

> 添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。错误：无法从中获取元数据`http://localhost:51568/Service1.svc`如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅...错误 URI：`http://localhost:51568/Service1.svc`
> 元数据包含无法解析的引用：“ `http://localhost:51568/Service1.svc`”。没有端点监听`http://localhost:51568/Service1.svc`可以接受该消息。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。无法连接到远程服务器 由于目标计算机主动拒绝它，无法建立连接 127.0.0.1:51568HTTP GET 错误 URI： `http://localhost:51568/Service1.svc` 下载“ `http://localhost:51568/Service1.svc`”时出错。无法连接到远程服务器 由于目标机器主动拒绝，无法建立连接 127.0.0.1:51568

这是我的 web.config：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <services>
        <service name="Service1" behaviorConfiguration="DefaultBehavior">
            <endpoint address="http://localhost:*/Service1" binding="basicHttpBinding" contract="IService1" />
            <endpoint address="http://localhost:*/Service1/mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="DefaultBehavior">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

关于端口号让我感到奇怪的是，如果我没有将项目设置为从外部程序开始，那么浏览器会在 localhost 端口 50345 列出目录列表，这是与 51568 不同的端口号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:29:55.177

> 无法连接到远程服务器 由于目标机器主动拒绝，无法建立连接 127.0.0.1:51568

和

> 如果我没有将项目设置为从外部程序开始，那么浏览器会在 localhost 端口 50345 列出目录列表

这仅仅意味着您的 WCF 服务托管在后一个端口。您可以在项目属性的“Web”选项卡上更改此设置。

# cocos2d-iphone - 在 CCLabelBMFont 标签的 CCSprite 字符上注册触摸

> ID：11259267
> 
> 赞同：0
> 
> 时间：2012-06-29T09:26:55.133
> 
> 标签：cocos2d-iphone, label, ccsprite, touches

我遇到的问题是 CCLabelBMFont 标签的位置和组成该标签的 CCSprite 字符之一似乎不同，所以我无法管理触摸事件......

为了更详细地测试这个问题，我尝试了这个：

```
 -(id)init
    {
      if ((self = [super init])
      {
        CCLabelBMFont *label = [CCLabelBMFont labelWithString:"welcome" fntFile:@"Arial.fnt"];
        CGSize size = [[CCDirector sharedDirector] winSize];
        label.position =  ccp(size.width/2, size.height/2);
        [self addChild: self.label];

        self.isTouchEnabled = YES;
      }
    return self;
    }

    -(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
      UITouch *touch = [touches anyObject];
      CGPoint touchLocation = [touch locationInView:[touch view]];
      touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
      NSLog(@"point touched: x:%f, y:%f", touchLocation.x, touchLocation.y);

      for (CCSprite *character in [label children])
      {
        if (CGRectContainsPoint([character boundingBox], touchLocation))
        {
          [character setColor:ccRED];
        }
      }
    } 
```

无论我触摸标签上的哪个字母，它都没有变红。

我认为组成 CCLabelBMFont 的精灵的位置和标签本身不同的原因是当我插入时：

```
NSLog(@"character position: x:%f y: %f", character.position.x, character.position.y); 
```

在 ccTouchesBegan 触摸处理中，精灵的位置被列出在屏幕的左下角。

所以也许我错过了一些简单的东西，但有没有办法将精灵位置转换为与标签相同的位置，以识别标签字母上的触摸？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:13:43.773

子节点的位置是相对于其父节点的。您必须使用精灵的 convertToNodeSpace 或 convertToWorldSpace 方法来相应地转换位置。在这种情况下，您必须使用 convertToNodeSpace 和 touchLocation 作为每个精灵的输入，然后才能使用它来测试边界框碰撞。

这应该解决它：

```
for (CCSprite *character in [label children])
{
   CGPoint touchLocationNodeSpace = [character convertToNodeSpace:touchLocation];
   if (CGRectContainsPoint([character boundingBox], touchLocationNodeSpace))
   {
      [character setColor:ccRED];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:15:02.683

多亏了您的建议，并进行了一些小的修改，我终于设法使其工作，我注意到的偏移是由于用于计算组成标签的每个字符的边界框的坐标的原点。

所以通过添加：

```
CGRect boundingBox = [character boundingBox];
boundingBox.origin = CGPointZero; 
```

我在触摸检测中清除了这个偏移量。

这是 touches 的最终代码：

```
-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];

    for (CCSprite *character in [self.label children])
    {
        CGRect boundingBox = [character boundingBox];
        boundingBox.origin = CGPointZero;
        CGPoint touchLocationNodeSpace = [character convertToNodeSpace:touchLocation];
        if (CGRectContainsPoint(boundingBox, touchLocationNodeSpace))
        {
            [character setColor:ccRED];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:56:48.200

这对我有用

```
CGRect boundingBox = [character boundingBox];
boundingBox.origin = CGPointZero; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T10:15:14.747

不要用右手触摸左耳。
如果我是你，我会将它注册到这样的菜单中：（它还会即时添加缩放效果）

```
-(void)GenerateButtons
{
  CGSize s = [[CCDirector sharedDirector] winSize];
  CCLabelBMFont *myBtn=[CCLabelBMFont labelWithString:@"BLABLA" fntFile:@"comicsansms.fnt"];
  CCMenuItemLabel *lbl_=[CCMenuItemLabel itemWithLabel:shakeBtn target:self selector:@selector(myButtonPressed)];
CCMenu *menu_=[CCMenu menuWithItems:lbl_, nil];
[self addChild:menu_];
[menu_ setPosition:ccp(s.width/2,(myBtn.boundingBox.size.height))];
}

-(void)myButtonPressed{
   //do what your CCLabelBMFont should do
} 
```

# python - 在 Python 中查找在特定日期之后修改的文件/文件夹

> ID：11259273
> 
> 赞同：1
> 
> 时间：2012-06-29T09:27:30.703
> 
> 标签：python, file-io

问题 ; 从目录结构中查找在特定日期之后更改的文件/文件夹并将它们复制到另一个位置（如标题中明确说明的那样）（：

通过以下；

```
def mod():
     """Find files modified today, given a file path."""
     latest = 0
     now = time.strftime('%Y-%m-%d', time.localtime())
     dir = "/home/y33t/"
     for fname in os.listdir(dir):
         if fname.endswith(''):
             modtime = os.stat(os.path.join(dir, fname)).st_mtime
             if modtime > latest:
                 latest = modtime
                 out = time.strftime('%Y-%m-%d', time.localtime(latest))
                 if out == now:
                     print fname, "has changed today. "
                 else:
                     pass 
```

我可以确定在特定日期更改了哪些文件并将这些文件复制到某个位置。我想要实现的是保持目录结构。一个例子如下；

```
/testfolder
..somefile1
..somefile2
../testfolder2
....somefile3
....somefile4 
```

等等...

假设 somefile3 在指定日期更改，我会将其保存到另一个位置，但在保存时，级联目录结构也应保持。我怎样才能以优雅的方式实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:35:57.873

在复制之前，你应该解决阅读。`os.listdir`只会给你一个级别，而`os.walk`会让你深入每个文件。

要复制，您将首先使用`os.makedirs(target-path)`以任何深度创建从根目录到目标文件夹的所有文件夹，然后您将用于`shutil.copy`复制文件。

# ios - 如何指定我的应用仅支持 iPhone 4 和 iPhone 4s？

> ID：11259288
> 
> 赞同：1
> 
> 时间：2012-06-29T09:29:00.187
> 
> 标签：ios, iphone, ios5, device

我对需要放入 plist 文件中的参数感到非常困惑。我只想支持 iPhone 4 和 iPhone 4s。我不想支持任何其他 iPhone 型号、iPad 或 iPod Touch。

我需要什么设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:39:53.480

您可以在信息 plist 中添加一些在 iPhone 4 或更高版本中可用的键值 -

喜欢 -

```
<key>UIRequiredDeviceCapabilities</key>
    <array>
        <string>gyroscope</string>
    </array> 
```

[您可以从 - http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)查看信息列表

# events - 事件驱动系统如何工作？

> ID：11259289
> 
> 赞同：0
> 
> 时间：2012-06-29T09:29:01.397
> 
> 标签：events

这个问题困扰着我。事件处理系统如何工作？

我的理解是必须有一个循环等待消息或其他东西然后激活一部分代码。我知道这很可能是一个错误的想法，但我需要了解它是如何工作的（抽象地）？

如果有图表可以解释它会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:39:32.257

如果您询问 C# 中的事件，假设它们只是发布者/订阅者或观察者模式的实现。

[http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern) http://en.wikipedia.org/wiki/Observer_pattern

简而言之，没有等待，订阅者只需给发布者一个代码（通过委托），以便在发布者触发事件时调用。

# 64-bit - msvcr100.dll 错误 - WinXP x64

> ID：11259293
> 
> 赞同：0
> 
> 时间：2012-06-29T09:29:08.810
> 
> 标签：64-bit, windows-xp, redistributable, vcredist

我正在尝试在 XP 64 位系统上运行在 VS2010 中创建的程序。它在 XP-SP3 32 位以及所有 Windows 7 版本上运行良好。但是，在 XP 64bit 上运行时，它只是在尝试加载显示错误引用时崩溃：ModName: msvcr100.dll ModVer: 10.0.30319.1 Offset:00000000000760d9

我意识到它引用的文件与 2010 vcredist 有关，它与程序一起安装，在检查我有最新版本后发现我们正在安装的那些需要 XP-sp3（64 位 XP 不存在）。所以我尝试安装最新的 2010-SP1 Redistributable（它没有说它需要 XP-SP3）但同样的错误仍然适用。

尝试在 XP 64bit 上运行程序时，有人遇到过这样的错误吗？我是否可能认为这是由 vcredists 引起的错误方向？还是根本不可能在没有 SP3 的 XP 操作系统上运行需要 2010 vcredists 的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:31:36.757

这个问题已经解决了，它是一些旧代码构成了我们程序的启动屏幕的一部分，似乎与 vcredists 无关。该程序似乎在 XP SP2 上运行良好，所以显然有可能:)

# eventbrite - 使用复杂关键字集的搜索

> ID：11259297
> 
> 赞同：0
> 
> 时间：2012-06-29T09:29:19.683
> 
> 标签：eventbrite

我想通过包含关键字变体来进行更强大的搜索。该 api 似乎不支持通配符或自动包含变体。Eventbrite 有人可以解释如何充分利用关键字参数吗？另外，如何处理多个关键字？搜索可以处理双组或更长的组吗？可以使用布尔运算符进行搜索吗？

到目前为止，我只看到非常简单的搜索（单个单词）起作用。我能做些什么来从中获得更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:54:16.427

Eventbrite 使用[Apache Lucene / SOLR](http://lucene.apache.org/solr/)作为它的搜索后端。这提供了基本的关键字词干功能和对事件标题和描述的全文搜索。

默认情况下，使用“AND”运算符处理多个关键字：搜索“bikes”和“tacos”（关键字=bikes%20tacos），应返回所有提及“taco”或“tacos”和“bike”或“自行车”。关键字词干支持允许您自动匹配大多数英语复数形式。

如果您想查找所有提及“bikes”或“tacos”的事件，您可以使用“OR”子句分隔关键字（keywords=bikes%20OR%20tacos）。

event_search API 文档页面应包含[有关](http://developer.eventbrite.com/doc/events/event_search/)如何使用此方法的关键字参数的最新信息。您应该能够使用交互式“立即尝试！”来测试您的查询。位于该页面上的部分。

# html - 如何用颜色填充 100% 的网页

> ID：11259299
> 
> 赞同：0
> 
> 时间：2012-06-29T09:29:33.260
> 
> 标签：html, css, height, fill

有人可以帮忙吗？我有一个包含页眉、主要内容框和页脚的页面。这是正在开发中的页面的链接[My Test Page](http://hansmoolman.com/)。我遇到的问题是我所谓的“背景框”（带有深棕色顶部边框的粉红色框）。我需要它自动填充整个屏幕，就在页脚之后，但目前它只是将屏幕填充到屏幕的折叠处，所以如果我向下滚动它实际上并没有填满整个屏幕。我试过 height: auto; 和高度：100%；但这些都没有达到预期的效果。

有没有人对我可以做些什么来解决这个问题有任何建议？如果有人想要代码，我可以在这里发布，但您应该能够通过浏览器查看代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:36:45.603

如果您想确保背景框将作为其他元素的背景，您是否尝试过将其他元素嵌套到背景框中？例如：

```
<div id="backgroundBox"> Background box
    <div id="contentBox">...</div>
    <div id="footer">...</div>
</div> 
```

然后，您可以使用一些 CSS 技巧（`margin-top`例如，否定的 ）来提高`#contentBox`上面的`#backgroundBox`开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:43:16.027

快速查看您的 HTML，我认为绝对定位是您的问题。

背景框不知道文档有多大，因为它是绝对定位的，因此并没有真正附加到它上面。因此，高度 100% 使其成为窗口高度的 100%，而不是文档高度。您希望它填充文档，而不是窗口，因此您必须保留它。

去掉绝对位置，听从necaris的建议，应该没问题。

# c# - 受限权限 AppDomain 授予集问题

> ID：11259304
> 
> 赞同：4
> 
> 时间：2012-06-29T09:29:41.300
> 
> 标签：c#, appdomain

我有一些代码可以将 Razor 模板动态编译成一个程序集，我使用一组权限（不能访问文件等）执行该程序集。

这适用于我们的开发计算机和我们的测试服务器（Windows 2008 IIS7 x64 .NET 4）。但在我们的生产服务器（相同规格）上，它给出了错误：

“加载此程序集会产生与其他实例不同的授权集。（来自 HRESULT 的异常：0x80131401）”

这是代码： -

```
 public static SandboxContext Create(string pathToUntrusted, List<Assembly> references)
    {
        AppDomainSetup adSetup = new AppDomainSetup();
        adSetup.ShadowCopyFiles = "true";
        var dir = new DirectoryInfo(pathToUntrusted);
        String tempPath = Path.Combine(Path.GetTempPath(), dir.Name + "_shadow");            
        adSetup.CachePath = tempPath;

        // Our sandbox needs access to this assembly.
        string AccessPath = Path.Combine(System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath, "bin\\CommonInterfaces.WebPages.dll");
        System.IO.File.Copy(AccessPath, Path.Combine(pathToUntrusted, "CommonInterfaces.WebPages.dll"), true);
        var baseDir = Path.GetFullPath(pathToUntrusted);
        adSetup.ApplicationBase = baseDir;
        adSetup.PrivateBinPath = baseDir;

        adSetup.PartialTrustVisibleAssemblies =
            new string[] { 
                typeof(System.Web.WebPageTraceListener).Assembly.FullName,
                typeof(System.Web.Razor.RazorEngineHost).Assembly.FullName};

        //Setting the permissions for the AppDomain. We give the permission to execute and to 
        //read/discover the location where the untrusted code is loaded.
        PermissionSet permSet = new PermissionSet(PermissionState.None);
        permSet.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));

        //We want the sandboxer assembly's strong name, so that we can add it to the full trust list.
        StrongName fullTrustAssembly = typeof(Sandboxer).Assembly.Evidence.GetHostEvidence<StrongName>();

        Evidence evidence = new Evidence();

        //Now we have everything we need to create the AppDomain, so let's create it.
        AppDomain newDomain = AppDomain.CreateDomain("Sandbox", evidence, adSetup, permSet, fullTrustAssembly);

        ObjectHandle handle = Activator.CreateInstanceFrom(
            newDomain, typeof(Sandboxer).Assembly.ManifestModule.FullyQualifiedName,
            typeof(Sandboxer).FullName
            );
        //Unwrap the new domain instance into a reference in this domain and use it to execute the 
        //untrusted code.
        var newDomainInstance = (Sandboxer)handle.Unwrap();
        return new SandboxContext(newDomain, newDomainInstance);
    } 
```

任何想法为什么它会在一台服务器上有所不同？我刚刚在损坏的服务器上安装了所有出色的 Windows 更新，但没有帮助。

如果我将 PermissionSet 更改为： -

```
 PermissionSet permSet = new PermissionSet(PermissionState.Unrestricted); 
```

所有代码都有效（但可能存在安全问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T21:13:33.957

当您尝试使用不同的权限集两次将程序集加载到现有 AppDomain 时，通常会发生此错误。100 万美元的问题是它是什么程序集，以及什么 AppDomain。

我对此没有完整的答案，但您可以查看以下内容：

*   由于编组，哪些沙盒程序集（如果有）被加载到您的主应用程序域中？
*   如果您有自己的服务器代码，它是否指定[LoadOptimizationAttribute](http://msdn.microsoft.com/en-us/library/system.loaderoptimizationattribute.aspx)？
*   您的开发服务器和生产服务器是否使用不同的隔离级别？
*   生产服务器上是否还有其他应用程序共享您的某些程序集？

您还可以尝试在服务器上安装远程调试运行时，将调试器附加到托管您的应用程序的进程，并直接检查在哪个域中加载了哪些内容。为此，您可能需要 SOS 调试扩展。

[http://msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx)

# github - Github 项目页面无法显示

> ID：11259305
> 
> 赞同：1
> 
> 时间：2012-06-29T09:29:50.450
> 
> 标签：github

1.  我在我的用户页面[http://github.com/tianshuo/tianshuo.github.com/trello](http://github.com/tianshuo/tianshuo.github.com/trello)上托管了一个应用程序，这显示在[http://tianshuo.gihub.com/trello/](http://tianshuo.gihub.com/trello/)
2.  人们开始克隆我的用户页面，所以我创建了一个新的存储库`trello`来放置我的应用程序
3.  我将文件放入存储库分支`gh-pages`并从我的用户页面中删除目录
4.  Github 告诉我我的页面已更新
5.  我去[http://tianshuo.github.com/trello/](http://tianshuo.github.com/trello/)发现404错误
6.  我又更新了，Github 又告诉我我的页面更新了
7.  还是404

这是一个错误还是我做错了什么。

编辑：使用真实链接

# html - 如何在 iframe 中显示 .doc/.docx 文件？

> ID：11259307
> 
> 赞同：0
> 
> 时间：2012-06-29T09:30:03.900
> 
> 标签：html, iframe

如何在 iframe 中显示 .doc/.docx 文件？

我在用 ：

```
$(htmlId+ ' iframe').attr('src', filePath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:32:29.770

将其上传到谷歌文档，然后显示 gdocs url ...（这就是 gmail 的方式）；）

# android - 多行的操作栏标题？

> ID：11259311
> 
> 赞同：15
> 
> 时间：2012-06-29T09:30:09.157
> 
> 标签：android, android-actionbar

是否可以在多行的操作栏中创建标题？我需要一个双倍行距的标题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-22T18:26:04.620

我不太确定您是否正在寻找以下内容，但是：

actionBar.setSubtitle(String string) 在主标题下方设置第二行，字体较小。

例子：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_left_drawer_item_clicked);
        String value = getIntent().getExtras().getString("drawerItemString");

        ActionBar actionBar = getActionBar();
        // Make sure we're running on Honeycomb or higher to use ActionBar APIs
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            actionBar.setDisplayHomeAsUpEnabled(true);
        }
        actionBar.setTitle(selectedBook.getTitle());
        actionBar.setSubtitle(selectedBook.getAuthorName());

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-02T16:52:33.620

我找到了一个更好的解决方案，它在 Android 4.2.2 中完美运行，其中图标和标题是一个可点击的项目。

```
int titleId = Resources.getSystem()
        .getIdentifier("action_bar_title", "id", "android");
if (titleId > 0) {
    TextView title = (TextView) findViewById(titleId);
    title.setSingleLine(false);
    title.setMaxLines(2);
    title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
} 
```

如果您使用的是 ActionBarSherlock，请使用以下代码：

```
int titleId = Resources.getSystem()
        .getIdentifier("action_bar_title", "id", "android");
if (titleId == 0) {
    titleId = com.actionbarsherlock.R.id.abs__action_bar_title;
}
TextView title = (TextView) findViewById(titleId);
if (title != null) {
    title.setSingleLine(false);
    title.setMaxLines(2);
    title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-14T21:02:21.423

ActionBar 上的默认 TextView 不支持换行，也没有暴露的方法来设置它为换行。所以创建一个灵活的布局，像这样：**action_bar_title_layout.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

<TextView
    android:id="@+id/action_bar_title"
    style="@style/TextAppearance.AppCompat.Title"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:gravity="center_vertical"
    android:ellipsize="end"
    android:maxLines="2"/>

</LinearLayout> 
```

然后将其设置为 ActionBar 上的自定义布局：

```
ActionBar actionBar = getActionBar();
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setCustomView(R.layout.action_bar_title_layout);
((TextView) findViewById(R.id.action_bar_title)).setText(
    "This is a long text title that will wrap to multiple lines, when necessary."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:05:32.810

不可以，但您可以将图标替换为单独的徽标图形（[`android:logo`](http://developer.android.com/guide/topics/manifest/application-element.html#logo)然后[`setDisplayUseLogoEnabled()`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayUseLogoEnabled%28boolean%29)）。您可以将两行标题作为徽标图形的一部分嵌入，然后不显示原始标题字符串[`setDisplayShowTitleEnabled()`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled%28boolean%29)。AFAIK，这种组合应该有效。

# html - 通过贝宝在售票中添加预订日期

> ID：11259313
> 
> 赞同：0
> 
> 时间：2012-06-29T09:30:23.290
> 
> 标签：html, wordpress, paypal

我打算用paypal卖票。但我需要知道客户想在哪一天来。

我正在使用 Wordpress，并且我使用了几个插件，但没有一个对我有帮助。现在我正在使用 html 表单进行测试，但不是如何进行测试。

如果有人可以帮助我或告诉我如何解决它，我将不胜感激。

非常感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:35:36.780

在您安装的任何插件中，检查将数据传递给`paypal`添加自定义字段的表单，然后根据您的要求详细说明插件。

检查插件如何从 paypal（返回值）传递中获取值并检索您需要的内容。这只是一个基本的想法，提供一些代码，以便我们可以更好地帮助您。

# python - 在 Django 中通过 id 获取对象

> ID：11259322
> 
> 赞同：1
> 
> 时间：2012-06-29T09:31:14.117
> 
> 标签：python, django, django-views, django-urls

我试图在我的 django 应用程序中通过 id 获取数据。问题是我不知道用户将点击的 id 类型。我尝试在我的视图中添加以下代码，但出现此错误：

```
 ValueError at /findme/

 invalid literal for int() with base 10: 'id'

 Request Method:    GET
 Request URL:   http://127.0.0.1:8000/findme/
 Django Version:    1.4
 Exception Type:    ValueError
 Exception Value:   invalid literal for int() with base 10: 'id'

 Exception Location:    C:\Python27\lib\site-packages\django\db\models\fields\__init__.py in get_prep_value, line 537
 Python Executable:     C:\Python27\python.exe
  Python Version:   2.7.3 
```

意见

```
from meebapp.models import Meekme

def cribdetail(request):
    post=Meekme.objects.get(id='id')
    return render_to_response('postdetail.html',{'post':post, 'Meekme':Meekme},context_instance=RequestContext(request)) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:34:49.927

问题是这`'id'`是一个字符串，你需要在这里传递一个整数：

```
post=Meekme.objects.get(id='id') 
```

它很可能看起来像这样：

```
def cribdetail(request, meekme_id):
    post=Meekme.objects.get(id=meekme_id)
    return render_to_response('postdetail.html',{'post':post, 'Meekme':Meekme},context_instance=RequestContext(request)) 
```

其中`meekme_id`是作为 URL 一部分的整数。您的 URL 配置应包含：

```
url(r'^example/(?P<meekme_id>\d+)/$', 'example.views.cribdetail'), 
```

当您访问时`example/3/`，这意味着 Django 将调用`cribdetail`赋值为 3的视图`meekme_id`。有关更多详细信息，请参阅 Django [URL 文档](https://docs.djangoproject.com/en/dev/topics/http/urls/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:33:15.340

错误消息说 'id' 是整数，但您正在传递 string 。

# android - 从 onDraw() 调用 invalidate() 会导致堆栈溢出吗？

> ID：11259324
> 
> 赞同：2
> 
> 时间：2012-06-29T09:31:21.467
> 
> 标签：android, stack-overflow, ondraw, invalidation

经过一番挣扎，我确定 a`SurfaceView`不会做我想让它做的事情，即位于某些 UI 元素之上和其他 UI 元素之下。我还发现，将所有 UI 元素绘制到`SurfaceView`实际上比我试图替换的多层层次结构要慢得多。因此，我正在尝试`View`使用`onDraw()`.

我能想到的最简单的方法大致如下：

1.  现在测量时间
2.  执行有关动画状态的计算
3.  称呼`invalidate()`
4.  绘制动画在`onDraw()`
5.  返回到 1。

我已经有了一个`nextFrame()`函数，`SurfaceView`它执行步骤 1 和 2，而绘图函数实际上很简单——一条路径。我可以`nextFrame()`打电话`invalidate()`，我可以`onDraw()`打电话`nextFrame()`来表示绘图已经完成，我们准备好下一帧了。不幸的是，我可以想象这会导致问题。

`invalidate()`直接调用吗`onDraw()`？我需要像中那样实现调用线程`SurfaceView`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T11:56:01.347

不，它不会导致堆栈溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:34:18.543

当您调用 invalidate() 时，您可以假设 onDraw(canvas c) 将被调用，是的。

但是在onDraw()里面调用nextFrame要小心，一定要控制好刷新时间。

如果你想实现 onDraw(Canvas c) 方法，只需覆盖它，你就可以在那里绘制任何你想要的东西。

如果要根据当前时间控制刷新时间：

在方法 1 中，您说您正在控制当前时间：

```
//I assume you instantiate the lasTTime in the     onCreate()

void method1() {
    while (currentTime - lastTime < N) {
        currentTime = //call the current time as you do
    }
    lastTime = currentTime;
    //call method2
} 
```

# javascript - jQuery UI：指定国际化文件的位置

> ID：11259325
> 
> 赞同：0
> 
> 时间：2012-06-29T09:31:23.657
> 
> 标签：javascript, jquery, jquery-ui, internationalization

我正在尝试设置 jQuery UI 小部件，以便它们可以国际化。我将日期选择器配置如下：

```
$.datepicker.setDefaults($.datepicker.regional['fr']); 
```

这会触发尝试的 AJAX 加载，但它正在使用我不想使用的 URL ( `http://jqueryui.com/ui/i18n/ui.datepicker-fr.js`)。

它尝试使用的 URL 似乎不正确，因为它返回 Not Found 错误。此外，我有一个国际化文件的本地副本，我希望 datpicker 使用它。

如何配置 jQuery UI 查找其国际化文件的位置？我没有设法在文档中找到它，而且谷歌搜索到目前为止还没有发现任何有用的东西。

**更新**：我发现明确地包含我想要的带有`<script>`标签的本地化工作，它将日期选择器设置为正确的语言。但是，根据控制台，它仍然尝试从 jqueryui.com 加载翻译文件。如果可能的话，我想禁用它，因为它是不必要的，而且它无论如何都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:47:33.993

jQuery UI 的`datepicker`插件不执行 XHR 请求来引入 i18n 文件。

它希望您包含`<script>`标签以引入适当的 i18n 文件（例如[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/i18n/jquery.ui.datepicker-fr.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/i18n/jquery.ui.datepicker-fr.js)）。

现场示例[http://jsbin.com/obixag/2](http://jsbin.com/obixag/2)。

我猜还有别的东西在做 XHR。

# c++ - Qt中两个线程之间的事件同步

> ID：11259326
> 
> 赞同：1
> 
> 时间：2012-06-29T09:31:32.847
> 
> 标签：c++, qt, thread-synchronization

我有两个线程，假设线程“A”和线程“B”。线程“A”发布自定义QEvent到线程“B”，然后它应该等到线程“B”处理这个事件。

到目前为止我做了什么：

我的活动课程：

```
class IPCMessageEvent : public QEvent
{
public:
   IPCMessageEvent(QWaitCondition* pConditions) : QEvent(IPC_MESSAGE_RECEIVED)
                                                , mpWaitCondition(pConditions)
   { };
   ~IPCMessageEvent()
   {
      mpWaitCondition->wakeOne();
   };
private:
   QWaitCondition* mpWaitCondition;
}; 
```

我的线程“A”：

```
QWaitCondition recvCondition;
IPCMessageEvent* pEvent = new IPCMessageEvent(&recvCondition);

QCoreApplication::postEvent(gpApp, pEvent);

QMutex  mutex; 
        mutex.lock();

recvCondition.wait(&mutex, IPC_MESSAGE_WAIT_TIMEOUT); 
```

我的线程“B”：处理接收到的事件并销毁它。*~IPCMessageEvent*析构函数被调用，因此`wakeOne()`将为`recvCondition`in 线程“A”启动。

一切似乎都很好，**这只是一件事**！看起来有时*~IPCMessageEvent*的调用时间比预期的要早...

```
QCoreApplication::postEvent(gpApp, pEvent);

<---- pEvent is already destroyed here ---->

QMutex mutex; 
       mutex.lock(); 
```

所以我的`recvCondition.wait(&mutex, IPC_MESSAGE_WAIT_TIMEOUT);`将被锁定并会达到超时。

还有其他方法可以进行这种同步吗？或者也许有人对如何解决/克服这个问题有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:15:03.317

好吧，你有一个经典的**比赛条件**。您的线程 A 可能在发布事件后直接中断，然后线程 B 处理并销毁它。由于条件变量的通知仅在有人已经在等待时才有效，因此您会错过通知，从而无限期地阻塞。

因此，您需要在发布事件之前锁定互斥锁。但是，这要求您的线程 B在处理事件时**也**需要锁定此互斥锁。否则，您无法阻止竞争条件，因为线程 B 没有理由等待任何事情（或者知道它应该“等待”直到线程 A 准备好等待条件变量）。

**选择：**

如果您在两个线程（或存在于两个线程中的对象）之间使用信号/插槽连接，则可以使用`Qt::BlockingQueuedConnection`. 这确保线程 A 在发出信号后阻塞，直到线程 B 中的事件循环处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:05:23.107

谢谢约翰内斯，我真的需要尝试使用您建议的信号/插槽替代方案。

我现在所做的是：我创建了一个在线程“A”和线程“B”之间使用的 QMutex 和布尔标志。

```
bool    mIsProcessingMessage;
QMutex  mIsProcessingMessageLock; 
```

在线程“A”中，我像这样发布我的事件：

```
IPCMessageEvent* pEvent = new IPCMessageEvent();
{   // Inform everyone that we will be processing our message.
    QMutexLocker locker(&mIsProcessingMessageLock);
    mIsProcessingMessage = true;
};

QCoreApplication::postEvent(gpApp, pEvent, Qt::HighEventPriority);

forever  // Loop until event will get processed.
{
    QMutexLocker locker(&mIsProcessingMessageLock);

    if (mIsProcessingMessage == false)
       break;

    ::Sleep(2);  // Don't load up the CPU.
}; 
```

在处理我的事件时，在线程“B”中，我只是将“mIsProcessingMessage”标志设置为 true，如下所示：

```
{
   QMutexLocker locker(&mIsProcessingMessageLock);
   mIsProcessingMessage = false;
}; 
```

也许这不是最好的解决方案，但它现在有效；）

# macos - 带有 OpenGL 3.2 核心配置文件的 OS X 上的 GLUT

> ID：11259328
> 
> 赞同：9
> 
> 时间：2012-06-29T09:31:42.097
> 
> 标签：macos, opengl, glsl, glut, osx-mountain-lion

是否可以使用核心配置文件在 OS X Lion 或 OS X Mountain Lion 上使用 GLUT（所以我可以使用 GLSL 1.50）？

我可以使用内置的 GLUT 还是需要使用 FreeGLUT 等第三方库？

是否有任何简单的“Hello world”应用程序可用于带有 XCode 项目或 make-file 的 OS X？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T19:30:20.347

You need at least Mac OS X Lion (OS X 10.7 or higher) for the basic support of OpenGL 3.2\. To use the OpenGL 3.2 Core Profile, just add

```
glutInitDisplayMode(GLUT_3_2_CORE_PROFILE | ... | ...); 
```

in your `main`-function. You can check it by

```
std::printf("%s\n%s\n", 
        glGetString(GL_RENDERER),  // e.g. Intel HD Graphics 3000 OpenGL Engine
        glGetString(GL_VERSION)    // e.g. 3.2 INTEL-8.0.61
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:49:09.830

GLUT 不支持 OpenGL 3.2，因为它不提供指定所需 OpenGL 上下文版本的功能。此外，GLUT 的功能依赖于 OpenGL 3.2 Core Profile 不可用的 API。

您必须切换到 FreeGLUT 或 GLFW。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T08:02:21.223

flyx 是错误的，OpenGL 3.2 是添加核心和兼容性配置文件的版本（不是 3.3）。但是，Apple 根本不支持兼容性配置文件（没有理由，他们就是不支持）。GLUT 作为一个框架出现在 xcode 中，你可以这样使用它。所以你可以用一种完全非标准的、特定于平台的方式来做。

# php - 将 URL 中的“+”替换为“%2B”

> ID：11259331
> 
> 赞同：0
> 
> 时间：2012-06-29T09:32:00.580
> 
> 标签：php, wordpress

我在我的网站上使用以下代码来显示由 TimThumb 脚本生成的缩略图：

```
<img src="timthumb.php?src=<?php echo $image_url[0]; ?>&h=100&w=150" /> 
```

它工作正常，除非图像 URL 包含“+”。我认为它将“+”视为一个空间。有没有一种简单的方法可以用 '%2B' 替换 '+' 符号？对不起，我不是编码员，但我想它会像“str_replace”这样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:34:37.467

不，会的[`urlencode()`](http://php.net/manual/en/function.urlencode.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:36:15.323

正如 Ignacio 所说，您可以使用 urlencode，但是，让[http_build_query](http://php.net/http_build_query)为您处理它通常更容易：

```
<img src="timthumb.php?<?php echo htmlspecialchars(http_build_query(array(
    'src' => $image_url[0],
    'h' => 100,
    'w' => 150,
))); ?>"> 
```

在这种情况下，urlencode 看起来更短更清晰，但是，我发现 http_build_query 倾向于更好地泛化（尤其是在参数数量不固定时）。

# php - PHP / MySQL 获取和处理数据总数，有效计数

> ID：11259332
> 
> 赞同：0
> 
> 时间：2012-06-29T09:32:15.797
> 
> 标签：php, mysql, count

我必须为一个网站创建一些函数，这些函数将从 MySQL 数据库中获取大量数据，以多种方式处理它并以 HTML 和 excel 格式生成表格/图表，但不知道最有效的获取方式是什么，存储和处理数据将在 PHP 中。

到目前为止，我只是使用 PHP 提交返回行的 SQL 语句，然后进入我从中调用相关信息的对象，但是新函数最多可以返回 18,000 行，我需要从中获取平均值、计数等。

看来我必须为计数/平均值制作一堆 SQL 语句，或者使用 PHP 来做类似的事情。我需要遍历 18,000 行多达 20 次。哪种方式更可取，或者有人有更好的主意吗？

感谢您提供任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:41:37.880

Wherever possible use mysql's in-built functions for processing data. Normally mysql functions like avg, count are much efficient compared to php

# ios - UIWebview loadHTMLString 不想显示

> ID：11259338
> 
> 赞同：0
> 
> 时间：2012-06-29T09:32:35.273
> 
> 标签：ios, xcode, uiwebview

为了修复 ios 中链接的 UITextview 蓝色问题（我想要白色链接），我在自定义弹出窗口中实现了 UIWebview

在我的弹出控制器中，我有以下代码（ uiwebview 在 xib 中设置为隐藏）

```
- (void) showWebView:(NSString *)htmlText{
    [webView setHidden:FALSE];
    [txtContent setHidden:TRUE];

    NSString * htmlString = [NSString stringWithFormat:@"<html><head><style type='text/css'>body {background-color:transparent; } p { color:white; font-family:Helvetica; font-size:14px; } a { color:white; }</style></head><body><p>%@</p></body></html>", htmlText];
    webView.delegate = self;

    NSLog(@"htmlstring  %@",htmlString);
   [webView loadHTMLString:htmlString baseURL:nil];

} 
```

（txtContent 是我隐藏的 uiTextview）

在我的主控制器中，我有以下内容：

```
SwbPopup * popup =  [[SwbPopup alloc] initWithNibName:@"SwbPopup" bundle:nil];

[[self.view superview] addSubview:popup.view];
popup.view.center = CGPointMake([self.view superview ].center.y, [self.view superview].center.x - ([self.view superview].frame.size.width / 4) );

[popup showWebView:popupBloodglucoseLevel]; 
```

（popbloodglucoselevel 是一个字符串，其中包含我的弹出消息和链接）

当我不在xib中隐藏webview时，它确实显示（每次）但也不想加载html....

**更新** 我实现了以下所有委托方法，但没有一个被调用：s

```
 - (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{   
    //[myActivityIndicatorView stopAnimating];

    NSLog(@"ERROR");
    NSLog([NSString stringWithFormat: @"%d", [error code]]);
}

- (void)webViewDidStartLoad:(UIWebView *)webView{
    NSLog(@"Started loading");
}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
    NSLog(@"Finished loading");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:36:42.383

您是否尝试过实施

```
[– webView:didFailLoadWithError:][1] 
```

在您的委托中查看加载 HTML 时发生了什么？

在 iOS5 下，我发现有时 UIWebView 不会加载它的内容，如果

```
<meta charset="utf-8"></meta> 
```

（或其他等效的字符集规范）不存在于 HTML 中。

# javascript - 通过 Google Chrome 扩展程序使用蓝牙

> ID：11259340
> 
> 赞同：2
> 
> 时间：2012-06-29T09:32:44.903
> 
> 标签：javascript, google-chrome-extension, bluetooth

我看到最近发布了用于使用蓝牙的实验性 API，我想进行一些测试。我查看了[http://code.google.com/chrome/extensions/trunk/experimental.bluetooth.html](http://code.google.com/chrome/extensions/trunk/experimental.bluetooth.html)上的官方文档，但即使是最简单的示例也行不通。当然，为了使用实验性 API，我之前正确设置了权限。

我的 background.js 看起来像这样：

```
function booleanCallback(result) {
    alert(result.toString());
}

chrome.experimental.bluetooth.isPowered(booleanCallback); 
```

不管怎样，`result`总是`undefined`。对此有什么想法吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:23:44.387

蓝牙 API 目前仅在 Chrome 操作系统上实现。[在Windows](http://code.google.com/p/chromium/issues/detail?id=135470)、[Mac](http://code.google.com/p/chromium/issues/detail?id=135472)和[Linux](http://code.google.com/p/chromium/issues/detail?id=135467)上的实施存在未解决的问题。当 API 在更多平台上可用时，您可能希望为其中的一项或多项加注星标以进行更新。

# java - 如何在 Java 中制作 3D 圆角 JLabel？

> ID：11259352
> 
> 赞同：2
> 
> 时间：2012-06-29T09:33:41.090
> 
> 标签：java, swing, border, jlabel, paintcomponent

我知道有一种方法可以扩展 JLabel 以绘制 3D 边框和一种绘制圆形边框的方法，但是您如何同时获得这两者？这是我的代码

```
protected void paintComponent(Graphics g) {
     g.setColor(getBackground());
     g.fillRoundRect(0, 0, getWidth()-1, getHeight()-1, 25, 25);
     g.fill3DRect(10, 10, 30, 30, true);
     super.paintComponent(g); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:46:31.597

[`LineBorder`](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/LineBorder.html)与圆角或[`TextBubbleBorder`](https://stackoverflow.com/a/8463742/418556).

![](../Images/49a61ca3ed27f9b299bb7d4cc2f5135a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:57:13.310

您参考此代码来创建圆角 JLabel：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;

public class RoundedLineBorder extends JPanel {

    public RoundedLineBorder() {
        super(true);
    setLayout(new BorderLayout());

        JLabel label = new JLabel("Rounded Corners");

        label.setHorizontalAlignment(JLabel.CENTER);

    LineBorder line = new LineBorder(Color.blue, 2, true);

        label.setBorder(line);

        add(label, BorderLayout.CENTER);
    }

    public static void main(String s[]) {
         JFrame frame = new JFrame("Rounded Line Border");
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame.setSize(500, 200);
         frame.setContentPane(new RoundedLineBorder());
         frame.setVisible(true);
    }
} 
```

# android - ListView 自定义行不能完全点击

> ID：11259354
> 
> 赞同：0
> 
> 时间：2012-06-29T09:33:45.603
> 
> 标签：android, android-listview

我正在创建一个应用程序，其中我使用自定义行布局在 ListView 中显示来自数据库的信息，该行布局使用 SimpleCursorAdapter 填充。我还为 ListView 处理 onItemClickListner。

我的自定义行布局如下：

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:descendantFocusability="blocksDescendants"
android:focusableInTouchMode="true"
android:padding="10dip" >

<ImageView android:id="@+id/imageButtonAccount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:src="@drawable/icon_account" />

<TextView
    android:id="@+id/TextViewAccount"
    style="@style/textView_normal_bold_style"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="16dip"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:textSize="@dimen/text_size_large" />
</LinearLayout> 
```

但是我有一个问题，如下所示：
当我单击 ListView 行的上方内容时，它只执行单击事件，但我想要的是当我单击一行中的任何位置时，应该执行单击操作。但它的行为并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:31:27.633

您的行的 XML 应该具有该属性

```
android:layout_width="fill_parent" 
```

# salesforce - 如何从 Salesforce 标注调用 WSDL 中的方法

> ID：11259356
> 
> 赞同：1
> 
> 时间：2012-06-29T09:33:52.907
> 
> 标签：salesforce, callouts

我是销售人员的新手，我试图通过从销售人员调用 wsdl 文件来获得响应。
我不知道如何从 HTTP 标注中调用 WSDL 的方法

代码是这样的：-

//HTTP请求
HttpRequest req = new HttpRequest();
req.setEndpoint('domain.com/webservices/wwservice.php?wsdl');
req.setMethod('GET');

我正在调用来自 TestMethod 的 HTTP 请求和响应。
我得到的结果是 System.HttpResponse[Status=null, StatusCode=0] 。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:57:42.043

首先，您需要将 WSDL 下载到本地计算机，然后将 WSDL 上传到 Salesforce.com（Apex-->Generate from WSDL）。这将生成实际调用 WSDL 中描述的 Web 服务所需的 Apex 类。

无论如何，这一切都在这里描述：http: [//www.salesforce.com/us/developer/docs/apexcode/Content/apex_callouts_wsdl2apex.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_callouts_wsdl2apex.htm)

# c# - 正则表达式匹配字符串中的两个单词

> ID：11259357
> 
> 赞同：1
> 
> 时间：2012-06-29T09:33:53.377
> 
> 标签：c#, asp.net, regex

我有一个字符串

> "13572_BranchInformationReport_2012-06-28.zip","13572_BranchInformationReport_2012-06-28.zip",0,"184296"," `Jun 28` 1:30","/icons/default.gif"

如果我想`Jun 28`使用 c# 从这个字符串中提取，可能是什么正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:39:49.110

这似乎是一个 CSV 记录。如果是这样，我建议使用标准[的 string.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)函数来提取单个组件并通过修剪包含日期的标记来提取日期，如果没有更简单的方法来实现您的需要，则应使用正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T09:41:32.533

如果您知道月份名称缩写的格式，则可以使用以下内容：

`@"((Jan|Feb|Mar|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s[0-9]+)(?<!\s)"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:39:38.227

假设字符串的结构始终相同：

```
@".*\"".\"".*\"".\""([\w]+ [\w]+) .*\"".\"".*" 
```

然后我们

```
match.Groups[1] 
```

# cytoscape-web - 节点内的标签显示 cytoscape.js

> ID：11259359
> 
> 赞同：2
> 
> 时间：2012-06-29T09:34:01.613
> 
> 标签：cytoscape-web

有没有办法在节点内部显示一个节点标签，例如 cytoscape desktop 默认情况下呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T13:05:46.160

我为节点设置了 css 样式，它可以工作：

```
"text-valign" : "center"
"text-halign" : "center" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T13:45:12.663

是的，您可以使用[Wiki StyleObject 描述](https://github.com/cytoscape/cytoscape.js/wiki/StyleObject)`labelValign`中解释的属性来控制它。例如：

```
var myStyle = {
    selectors: {
        "node": {
            labelValign: "middle",
            ... } } }

$("#cy").cy({style: myStyle, ... }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T16:59:32.633

从官方和实际文档来看 - text-valign 和 text-halign 是要走的路。然而，它们当然不是 CSS 属性。可能的选项是： text-halign - 左、中或右；text-valign - 顶部、中心或底部。

这些选项仅适用于节点，不适用于边。

[更多信息的官方文档](http://js.cytoscape.org/#style/labels)

# sql-server - SQL 匹配多行

> ID：11259360
> 
> 赞同：2
> 
> 时间：2012-06-29T09:34:02.623
> 
> 标签：sql-server, relation

```
relationID     sessionID_Ref     userID_Ref
1              1                 1
2              1                 2
3              2                 1
4              2                 3
5              3                 1
6              3                 2
7              3                 3 
```

好吧！我正在构建一个可以向一群人发送消息的消息传递系统。但是我坚持使用这个 SQL 查询，根据我发送消息的用户，在哪里可以找到 sessionID。

例如：如果我 (userID: 1) 向 userID 2 发送消息，SQL Query 应该返回 sessionID: 1

如果我向用户 ID 2 和 3 发送消息，它会返回：sessionID: 3

我可以使用 MSSQL 使用单个 sql 查询来执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:37:50.690

可能是这样的：

```
select sessionID_Ref
from tablename
group by sessionID_Ref
having count(distinct userID_Ref) = 2
   and min(userID_Ref) = 1
   and max(userID_Ref) = 2 
```

* * *

这是一个完整的例子：

```
create table #tablename (
    relationID int,
    sessionID_Ref int,
    userID_Ref int
)

insert into #tablename values(1,1,1)
insert into #tablename values(2,1,2)
insert into #tablename values(3,2,1)
insert into #tablename values(4,2,3)
insert into #tablename values(5,3,1)
insert into #tablename values(6,3,2)
insert into #tablename values(7,3,3)

create table #users (
    users int
)

insert into #users values(1)
insert into #users values(3)

select t.sessionID_Ref from #tablename t
inner join #users u on t.userID_Ref = u.users
inner join (
    select t.sessionID_Ref
    from #tablename t
    group by t.sessionID_Ref
    having COUNT(t.userID_Ref) = (select COUNT(*) from #users)
) aux on aux.sessionID_Ref = t.sessionID_Ref
group by t.sessionID_Ref
having COUNT(t.userID_Ref) = (select COUNT(*) from #users)

drop table #tablename
drop table #users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:39:26.880

```
    选择前 1 个 sessionID_Ref
    FROM 表 AS table_2
    WHERE (userID_Ref = 28 或
                          userID_Ref = 11) 和
                              ((SELECT COUNT(*) AS Expr1
                                  FROM 表 AS table_1
                                  WHERE (sessionID_Ref = table_2.sessionID_Ref) AND (userID_Ref = 28) OR
                                                        (sessionID_Ref = table_2.sessionID_Ref) AND (userID_Ref = 11)) = 2) AND
                              ((SELECT COUNT(*) AS Expr1
                                  FROM 表 AS table_1
                                  WHERE (sessionID_Ref = table_2.sessionID_Ref)) = 2)

```

这行得通，但必须有更快的方法....

# postgresql - Ant、execute-sql-script 和 PostgreSQL 错误

> ID：11259361
> 
> 赞同：1
> 
> 时间：2012-06-29T09:34:10.007
> 
> 标签：postgresql, ant

我们使用 Ant 在我们的测试环境中创建一个数据库，任务如下

```
<execute-sql-script
    driver=org.postgresql.Driver
    url=jdbc:postgresql://127.0.0.1:5432/lakshmi_testapp?searchpath=lakshmi_stdcmp
    user=lakshmi_stdcmp
    password=********
    classpathid=execute-sql.classpath
    sqlfile=/var/lib/jenkins/jobs/Lakshmi-Testapp-PostgreSQL/workspace/target/lakshmi-std-cmp-opu.sql
/> 
```

示例文件：

```
create table PersistentOrder (
    dbId int8 not null,
    orderActionsBinary oid,
    orderActionsText text,
    orderIssuerId varchar(255),
    orderIssuerName varchar(255),
    orderType varchar(255),
    returnType int4,
    uuid varchar(255),
    primary key (dbId)
);

create table REVINFO (
    REV int4 not null,
    REVTSTMP int8,
    primary key (REV)
); 
```

如果我尝试使用 psql 或 pgAdmin 执行文件，我没有错误，但是当通过 Ant 执行时，我得到：

```
[sql] Executing resource: /var/lib/jenkins/jobs/Lakshmi-Testapp-PostgreSQL/workspace/target/lakshmi-std-cmp-opu.sql
[sql] Failed to execute:   create table if not exists PersistentOrder ( dbId int8 not null, orderActionsBinary oid, orderActionsText text, orderIssuerId varchar(255), orderIssuerName varchar(255), orderType varchar(255), returnType int4, uuid varchar(255), primary key (dbId) )
[sql] org.postgresql.util.PSQLException: ERROR: syntax error at or near "not"
[sql]   Position: 19
[sql] Failed to execute:   create table if not exists REVINFO ( REV int4 not null, REVTSTMP int8, primary key (REV) )
[sql] org.postgresql.util.PSQLException: ERROR: syntax error at or near "not"
[sql]   Position: 19
[sql] Failed to execute:   drop sequence if exists hibernate_sequence
[sql] org.postgresql.util.PSQLException: ERROR: current transaction is aborted, commands ignored until end of transaction block
[sql] Failed to execute:  create sequence hibernate_sequence;
[sql] org.postgresql.util.PSQLException: ERROR: current transaction is aborted, commands ignored until end of transaction block
[sql] 0 of 4 SQL statements executed successfully 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:42:05.747

> if not exists

came with version 9.1\. What version do you use?

# java - 启动处理应用程序时计算机重新启动

> ID：11259366
> 
> 赞同：0
> 
> 时间：2012-06-29T09:34:20.200
> 
> 标签：java, awt, processing, awtrobot

我的问题是，当我在处理中运行以下代码时，我的电脑重新启动..

```
import java.awt.AWTException;
import java.awt.Robot;

Robot robot;

void setup() {
  size(400, 400);
  try { 
    robot = new Robot();
  } 
  catch (AWTException e) {
     e.printStackTrace();
  }
  robot.mouseMove(screenWidth/2, screenHeight/2);
}

void draw() {
  //println(frameCount);
} 
```

我已经在另一台计算机上尝试了相同的代码，它运行良好..有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:33:40.273

你需要使用

```
Robot [whatever name preferably r] = new Robot(); 
```

不是

```
robot = new Robot(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T16:36:09.800

这是我的解决方法，以供将来参考。

* * *

> 我已将preferences.txt 文件修改为~/.processing 文件夹，将java.awt.* 库添加到preproc.imports.list 字段中，并在代码中注释了两个import 子句。现在它可以工作了，但这不是一个好的和确定的解决方案..

# javascript - Internet Explorer、ajax 和 cookie 过期

> ID：11259368
> 
> 赞同：2
> 
> 时间：2012-06-29T09:34:27.103
> 
> 标签：javascript, ajax, internet-explorer, jquery, cookies

我创建了一个登录表单，它使用 ajax 将信息发送到一个 cookie 设置为 15 天后过期的 php 页面。除了 IE（用 IE9 测试）之外，所有浏览器都运行良好。cookie 是在 IE 中创建的，但仅在我关闭浏览器之前有效。之后，如果我再次打开 IE 浏览器，cookie 就会被删除。

PHP：

```
$time = time() + 3600 * 24 * 15; setcookie("op_logged", $info, $time); 
```

有什么我需要做的吗？

谢谢

# box-api - 如何使用 box.net API 了解上传/下载进度？

> ID：11259370
> 
> 赞同：2
> 
> 时间：2012-06-29T09:34:31.543
> 
> 标签：box-api

我想知道API是否有办法在发送或接收文件时获取上传或下载进度？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:58:42.880

我们目前不通过 API 返回正在进行的上传/下载状态，仅返回成功/失败时的状态。这似乎是一个好主意，尤其是对于较大的文件，我们将在构建 API 时考虑这一点。

# dynamics-crm - 未正确解析设置 PartyList 值

> ID：11259372
> 
> 赞同：1
> 
> 时间：2012-06-29T09:34:37.353
> 
> 标签：dynamics-crm, dynamics-crm-2011

我在触发 OnLoad 的服务活动表单上附加了一些 Javascript。它检索与服务案例（与服务活动相关）关联的 TechId，并尝试将服务活动的资源默认设置为该用户。

![未解析资源的屏幕截图](../Images/2f331794fceebb44d533ad739250e0c0.png)

正如您在上面的屏幕截图中看到的那样，它将正确的“名称”插入到“资源”字段中，但由于图标“已损坏”，它似乎无法正确解析它。如果我删除它并手动添加相同的用户，一切正常。如果我尝试按图像中的样子保存此活动，则会生成一个错误，指出调度引擎有问题。

我用来设置这个值的代码是；

```
function SetTechId()
{
if (Xrm.Page.getAttribute("resources").getValue() == null)
{
    if (Xrm.Page.getAttribute("regardingobjectid").getValue() != null)
    {
        var caseId = Xrm.Page.getAttribute("regardingobjectid").getValue()[0].id;

        var endPoint = getODataEndPoint();
        var odataSelect = endPoint + "/IncidentSet?$select=new_new_fieldtechs_incident/OwnerId,new_new_fieldtechs_incident/OwningUser&$expand=new_new_fieldtechs_incident&$filter=IncidentId eq guid'" +  caseId + "'";

        $.ajax({
               type: "GET",
               contentType: "application/json; charset=utf-8",
               datatype: "json",
               url: odataSelect,
               beforeSend: function (XMLHttpRequest) { XMLHttpRequest.setRequestHeader("Accept", "application/json"); },
               success: function (data, textStatus, XmlHttpRequest) 
                   {
                        if (data.d != null)
                        {
                            var fieldTech = data.d.results[0];
                            var ownerId = fieldTech.new_new_fieldtechs_incident.OwnerId;

                            //because the resources field in the service activity is a partylist, we need to treat this differently
                            var partylist = new Array();
                            partylist[0] = new Object();
                            partylist[0].id = ownerId.Id; //Guid (i.e., Guid of User or Contact etc)
                            partylist[0].name = ownerId.Name; //Name (i.e., Name of User or Contact etc)
                            partylist[0].entityType = "account"; //entity schema name of account or contact

                            Xrm.Page.getAttribute("resources").setValue(partylist);
                        }
                   },
               error: function (XmlHttpRequest, textStatus, errorThrown) { }
        });
    }
}
}

function getODataEndPoint() {
return Xrm.Page.context.prependOrgName("/xrmservices/2011/OrganizationData.svc"); 
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:39:15.953

“托尼·哈雷”真的是一个`account`还是一个`systemuser`？

```
partylist[0].entityType = "account"; //entity schema name of account or contact 
```

# r - 回顾特定时间窗口内的实例

> ID：11259380
> 
> 赞同：0
> 
> 时间：2012-06-29T09:35:00.163
> 
> 标签：r, time, split, apply

我有以下关于服务使用的数据集。人们被允许签入和签出服务，因此有一个输入的服务日期和一个离开的服务日期。在进一步的另一个场合，他们可能会再次进入服务并在几天后离开。

我希望能够知道一个人每次使用该服务（用一行表示），他/她在上一年使用该服务的次数是多少。

### 我试过的

我计算了一个服务使用指数来表示第 n 次使用服务。接下来，我使用索引来计算自上次使用服务以来的天数。从那里我被困住了。我不知道我应该如何回顾过去。

我很困惑，并希望获得有关如何进行的任何提示。我想使用`lapply`将每个人子集到自己的数据框中，但之后我该如何回顾？

谢谢。

### 数据集

```
read.table("http://dl.dropbox.com/u/822467/dataset.csv", sep = ",", header = TRUE) 
```

### 进一步说明我需要什么

以下是来自主题 22 的数据。该主题共有 5 次服务使用情况。对于没有第一次使用的服务，我会回顾他进入该服务之前的 1 年。例如，对于该服务的第二次使用，我会查看进入日期，即`14/08/2009`. 然后我会查看以前的服务使用情况，看看有多少落在`15/08/2008 to 14/08/2009`. 我需要为每个主题的所有服务使用实例执行此操作。

```
SubID   Entered_Service Left_Service    Service_Usage_Index Days_Since_Last_Service_Use_Ended
22      09/06/2008      13/06/2008      1                   NA
22      14/08/2009      17/08/2009      2                   427
22      21/03/2010      22/03/2010      3                   216
22      25/03/2010      31/03/2010      4                   3
22      21/06/2010      24/06/2010      5                   82 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:51:02.827

这不是最优雅的解决方案，但我会按照以下方式进行（如果我理解正确你的问题）：

```
data <- read.table("http://dl.dropbox.com/u/822467/dataset.csv", sep = ",", header = TRUE)
# first, define your dates as dates so you can compare them
strptime(data[,2],format="%d/%m/%Y") -> entry
strptime(data[,3],format="%d/%m/%Y") -> exit
strptime("31/12/2011",format="%d/%m/%Y") -> end
strptime("01/01/2011",format="%d/%m/%Y") -> start
# then select all rows from 2011
data[(entry<=end & entry>=start) | (exit<=end & exit>=start),] -> data2011
# then see how many rows correspond to each user ID
summary(as.factor(data2011$SubID)) 
```

**编辑**

基于相同的想法，我希望它能解决问题：

```
data <- read.table("http://dl.dropbox.com/u/822467/dataset.csv", sep = ",", header = TRUE)
data[!is.na(data[,1]),]->data
result <- rep(NA,length=nrow(data))

for(i in unique(data$SubID)){
# Loop through each subject
    data[data$SubID==i,]->temp
    if(nrow(temp)>1){
        for(j in 2:nrow(temp)){
            strptime(temp[j,2],format="%d/%m/%Y") -> end
            end - 365*24*3600 -> start
            # There might be a better way to substract a year to a date but I don't know it...
            strptime(temp[,2],format="%d/%m/%Y") -> entry
            strptime(temp[,3],format="%d/%m/%Y") -> exit
            nrow(temp[(entry<end & entry>=start) | (exit<end & exit>=start),]) -> result[data$SubID==i & data[,2]==temp[j,2]]
            }
        }
    }

result -> data$result 
```

# c - 为什么变量总和返回乘法？

> ID：11259381
> 
> 赞同：0
> 
> 时间：2012-06-29T09:35:03.087
> 
> 标签：c, arrays, operations

在以下代码中：

```
void fusioneArray(int v[], int vL, int w[], int wL[], int *fusione)
{
   int i,j,temp;
   int k=0;
   printf("%d",wL+vL);

   for(i=0;i<vL;i++)
   {
       fusione[k]=v[i];
       k++;
   }

   for(j=0;j<wL;j++)
   {
       fusione[k]=w[j];
       k++;
   }
}

int main()
{
    int v[5]={1,2,3,4,5};
    int w[5]={5,4,3,2,1};
    int i=0;
    int fusione[10];
    fusioneArray(v,5,w,5,fusione);
} 
```

你能解释一下为什么 vL+wL 返回 * 而不是 + 吗？（25 个而不是 10 个）...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:38:26.380

因为`wL`是代码中的指针，因此您正在执行指针算术而不是标准整数算术：

wL+vL = wL + vL*sizeof(int)

由于 a`int`在大多数平台上是 4 字节，因此您会`wL+vL`变成`5+5*4 = 25`，这就是您得到的结果。只需`int wL[]`用正确的替换，`int wL`您将获得所需的行为。

# html - div 的渐变底色

> ID：11259382
> 
> 赞同：1
> 
> 时间：2012-06-29T09:35:12.680
> 
> 标签：html, css, css-transitions

我想要一个 div 的渐变底色。如下图所示。是否可以在 css3 中使用，或者应该使用图像。

任何帮助appriciated。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:38:00.543

是和否。

是的，这是可能的。[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)之类的工具可以轻松创建 CSS3 代码。例如，这有点像你想要的： http: [//www.colorzilla.com/gradient-editor/#ffffff+75,cccccc+100 ;Custom](http://www.colorzilla.com/gradient-editor/#ffffff+75,cccccc+100;Custom)

不，您应该始终拥有渐变的后备图像。不是所有的浏览器都支持它，也不是所有的浏览器都支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T10:32:32.753

这将只在元素的底部创建一个渐变，并且不会随着元素的高度而拉伸。它是固定的`100px`。

```
.style {
    padding-bottom:100px;
    background: -moz-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,0.1) 100%); /* FF3.6-15 */
    background: -webkit-linear-gradient(top, rgba(0,0,0,0) 0%,rgba(0,0,0,0) 50%,rgba(0,0,0,0.1) 100%); /* Chrome10-25,Safari5.1-6 */
    background: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(0,0,0,0) 50%,rgba(0,0,0,0.1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
    background-position: center bottom;
    background-size: 100px 100px;
    background-repeat: repeat-x;
} 
```

# c# - 有什么方法可以捕捉融合图？

> ID：11259383
> 
> 赞同：0
> 
> 时间：2012-06-29T09:35:15.723
> 
> 标签：c#, javascript, fusioncharts

在这里，我正在尝试使用 javascript 在单击按钮时将融合图表捕获为图像。
这是我的javascript代码：

```
var initiateExport = false;

        function exportCharts() {
            var exportFormat = 'JPG';
            initiateExport = true;
            for (var chartRef in FusionCharts.items) {
                if (FusionCharts.items[chartRef].exportChart) {
                    document.getElementById("linkToExportedFile").innerHTML = "Exporting...";
                    FusionCharts.items[chartRef].exportChart({ "exportFormat": exportFormat });

                }
                else {

                    document.getElementById("linkToExportedFile").innerHTML = "Please wait till the chart completes rendering...";
                }
            }
        }

        function FC_Exported(statusObj) {
            if (initiateExport) {
                initiateExport = false;
                document.getElementById("linkToExportedFile").innerHTML = "";
            }

            if (statusObj.statusCode == "1") {

                document.getElementById("linkToExportedFile").innerHTML += "Export successful. View it from <a target='_blank' href='" + statusObj.fileName + "'>here</a>.<br/>";
            }
            else {
                document.getElementById("linkToExportedFile").innerHTML += "Export unsuccessful. Notice from export handler : " + statusObj.notice + "<br/>";

            }
        } 
```

问题是在图像捕获之前，进度条显示“正在捕获数据”。我想绕过它（因为我有另一个代码在等待它完成），以便直接在按钮上单击生成图像。如果它不可能通过javascript 有人可以建议使用**c#**的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:05:09.153

本质上，这些 Flash 图表需要一些时间来完成从图表的 Flash 显示中捕获图像数据。它不能在一个实例中完成。

这就是为什么出现进度条的原因，它指示图像数据捕获的进度。

您可以在图表的 XML 中隐藏进度条设置`showExportDialog="0"`。但是，内部进展将继续。

图像捕获完成后，如果您使用服务器端导出，Flash 会将数据发布到服务器端脚本（导出处理程序）。

如果您使用客户端导出功能，Flash 图表会引发名为 FC_ExportDataReady 的事件。您可以在窗口/全局范围内侦听此事件定义具有相同名称的函数。此事件以 JavaScript 对象的形式提供图像数据（流）。流对象包含 RLE 格式的图像数据以及图像的元数据。

因此，不可能通过单击按钮立即生成图表的图像快照。这需要一些时间。

That is the reason why the FC_Exported calback event is provide so that you can listen to this event and and get a confirmation of the completion and then carry on with your own code.

# c# - .Net 中的 RSync 客户端

> ID：11259387
> 
> 赞同：1
> 
> 时间：2012-06-29T09:35:37.813
> 
> 标签：c#, .net, rsync

> **可能重复：**
> [是否有任何使用 rsync 的 .NET API？](https://stackoverflow.com/questions/999751/is-there-any-net-api-using-rsync)

对于一个项目，我需要找到一个 RSync 库来与带有 rsync 的 linux 服务器进行一些交互。

我已经用谷歌搜索了很多，但我没有找到任何匹配的东西：

[https://github.com/kolosy/rsync.net](https://github.com/kolosy/rsync.net) -->似乎没有维护，没有文档

[http://www.kolosy.com/wordpress/?p=8](http://www.kolosy.com/wordpress/?p=8) --> 死网站

即使是商业图书馆，也没什么大不了的。

# tfs - 在 itemgroup 之间映射数据

> ID：11259388
> 
> 赞同：1
> 
> 时间：2012-06-29T09:35:41.477
> 
> 标签：tfs, msbuild, itemgroup

我有两个项目组

```
<ItemGroup>
    <Device Include="device1">    
     <Cdname>code1</Cdname>
    </Device>
     <Device Include="device2">    
      <Cdname>code2</Cdname>
    </Device>
    <Device Include="device3">    
      <Cdname>code3</Cdname>
    </Device>
    <Device Include="device4">    
      <Cdname>code4</Cdname>
    </Device>
    <Device Include="device4">    
      <Cdname>code4</Cdname>
    </Device>
    <Device Include="device5">    
      <Cdname>code5</Cdname>
    </Device>
    <Device Include="device6">    
      <Cdname>code6</Cdname>
    </Device>
    <Device Include="device7">    
      <Cdname>code7</Cdname>
    </Device>
    <Device Include="device8">    
      <Cdname>code8</Cdname>
    </Device>
    <Device Include="device9">    
      <Cdname>code9</Cdname>
    </Device>
    <Device Include="device10">    
      <Cdname>code10</Cdname> 
```

## 取决于

```
 <Device Include="device1000">    
      <Cdname>code1000</Cdname>
    </Device>
</ItemGroup> 
```

和

```
<ItemGroup>
  <Gpdname Include="d:\gpd\gpd1.GPD">
       <GPDFile>gpd1.GPD</GPDFile>
   </Gpdname>
   <Gpdname Include="d:\gpd\gpd2.GPD">
        <GPDFile>gpd2.GPD</GPDFile>
   </Gpdname>
</ItemGroup> 
```

我的目标如下

```
 <Target Name="CopyGPD" Inputs="@(Gpdname)" Outputs="d:\%(Device.Cdname)\drvs\gpd\%(GPDFile)"> 
```

复制过程完成后，gpd1.GPD 和 gpd2.GPD 从 d:\gpd 复制到 d:\drvs\gpd\gpd1.GPD 和 d:\drvs\gpd\gpd2.GPD

但我想把它复制到

d:\code1\drvs\gpd\gpd1.GPD

d:\code1\drvs\gpd\gpd2.GPD

d:\code2\drvs\gpd\gpd1.GPD

d:\code2\drvs\gpd\gpd2.GPD

d:\code3\drvs\gpd\gpd1.GPD

d:\code3\drvs\gpd\gpd2.GPD

d:\code4\drvs\gpd\gpd1.GPD

d:\code4\drvs\gpd\gpd2.GPD

d:\code5\drvs\gpd\gpd1.GPD

d:\code5\drvs\gpd\gpd2.GPD

取决于 - - - - - - - - -

d:\code1000\drvs\gpd\gpd1.GPD

d:\code1000\drvs\gpd\gpd2.GPD

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:17:51.603

如果您不坚持确切的顺序（`gdp1.GDP`然后`gdp2.GDP`是每个顺序`Cdname`），这将起到作用（感谢[Phil Cupp：我不想忘记的 MSBuild 技巧](http://philcupp.wordpress.com/2009/10/12/msbuild-tricks-i-don%E2%80%99t-want-to-forget/)）：

```
<Target Name="Cartesian_Device_GDP">
    <ItemGroup>
        <C Include="@(Device)">
            <A>%(Device.Cdname)</A>
        </C>
    </ItemGroup>

    <ItemGroup>
        <D Include="@(C)">
            <B>%(Gpdname.GPDFile)</B>
        </D>
    </ItemGroup>

    <CreateItem Include="@(D)">
        <Output TaskParameter="Include" ItemName="CombinedDeviceGDP" />
    </CreateItem>
</Target>

<Target Name="Msg" DependsOnTargets="Cartesian_Device_GDP">
    <Message Text="D:\%(CombinedDeviceGDP.A)\drvs\gpd\%(CombinedDeviceGDP.B)" />
</Target> 
```

# performance - 快速将 RGBA 转换为 ARGB

> ID：11259391
> 
> 赞同：7
> 
> 时间：2012-06-29T09:35:49.917
> 
> 标签：performance, rgba, argb

我正在尝试将 rgba 缓冲区转换为 argb，有什么方法可以改进下一个算法，或者有其他更快的方法来执行此类操作吗？考虑到 alpha 值在 argb 缓冲区中一次并不重要，并且应该始终以 0xFF 结束。

```
int y, x, pixel;

for (y = 0; y < height; y++)
{
    for (x = 0; x < width; x++)
    {
     pixel = rgbaBuffer[y * width + x];
     argbBuffer[(height - y - 1) * width + x] = (pixel & 0xff00ff00) | ((pixel << 16) & 0x00ff0000) | ((pixel >> 16) & 0xff);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-13T19:47:43.930

我将只关注交换功能：

```
typedef unsigned int Color32;

inline Color32 Color32Reverse(Color32 x)
{

    return
    // Source is in format: 0xAARRGGBB
        ((x & 0xFF000000) >> 24) | //______AA
        ((x & 0x00FF0000) >>  8) | //____RR__
        ((x & 0x0000FF00) <<  8) | //__GG____
        ((x & 0x000000FF) << 24);  //BB______
    // Return value is in format:  0xBBGGRRAA
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:25:37.250

假设代码没有错误（只是效率低下），我猜你想要做的就是每秒交换一次（偶数）字节（当然还有反转缓冲区），不是吗？

因此，您可以通过以下方式实现一些优化：

*   避免移位和屏蔽操作
*   优化循环，例如节省指数计算

我将重写代码如下：

```
int y, x;

for (y = 0; y < height; y++)
{
    unsigned char *pRGBA= (unsigned char *)(rgbaBuffer+y*width);
    unsigned char *pARGB= (unsigned char *)(argbBuffer+(height-y-1)*width);
    for (x = 4*(width-1); x>=0; x-=4)
    {
        pARGB[x  ]   = pRGBA[x+2];
        pARGB[x+1]   = pRGBA[x+1];
        pARGB[x+2]   = pRGBA[x  ];
        pARGB[x+3]   = 0xFF;
    }
} 
```

请注意，更复杂的索引计算仅在外循环中执行。对于每个像素，rgbaBuffer 和 argbBuffer 都有四个访问权限，但我认为这不仅仅是通过避免按位运算和索引计算来实现的。另一种方法是（如在您的代码中）一次获取/存储一个像素（int），并在本地进行处理（这可以节省内存访问），但除非您有一些有效的方法来交换两个字节并设置本地 alpha （例如一些内联汇编，以便确保所有内容都在寄存器级别执行），它不会真正帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T13:52:23.967

您提供的代码非常奇怪，因为它洗牌的不是 rgba->argb，而是 rgba->rabg 的颜色分量。

我已经制作了这个例程的正确和优化版本。

```
int pixel;
int size = width * height;

for (unsigned int * rgba_ptr = rgbaBuffer, * argb_ptr = argbBuffer + size - 1; argb_ptr >= argbBuffer; rgba_ptr++, argb_ptr--)
{
    // *argb_ptr = *rgba_ptr >> 8 | 0xff000000;  // - this version doesn't change endianess
    *argb_ptr = __builtin_bswap32(*rgba_ptr) >> 8 | 0xff000000;  // This does
} 
```

我做的第一件事是简化你的洗牌表达。很明显，XRGB 只是 RGBA >> 8。我还删除了每次迭代时数组索引的计算，并使用指针作为循环变量。这个版本比我机器上的原始版本快大约 2 倍。

如果此代码适用于 x86 CPU，您还可以使用 SSE 进行混洗。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-16T00:33:08.667

我已经很晚了。但是在动态生成视频时我遇到了完全相同的问题。通过重用缓冲区，我可以只为每一帧设置 R、G、B 值并且只设置 A 一次。

见下面的代码：

```
byte[] _workingBuffer = null;
byte[] GetProcessedPixelData(SKBitmap bitmap)
{
    ReadOnlySpan<byte> sourceSpan = bitmap.GetPixelSpan();

    if (_workingBuffer == null || _workingBuffer.Length != bitmap.ByteCount)
    {
        // Alloc buffer
        _workingBuffer = new byte[sourceSpan.Length];

        // Set all the alpha
        for (int i = 0; i < sourceSpan.Length; i += 4) _workingBuffer[i] = byte.MaxValue;
    }

    Stopwatch w = Stopwatch.StartNew();
    for (int i = 0; i < sourceSpan.Length; i += 4)
    {
        // A
        // Dont set alpha here. The alpha is already set in the buffer
        //_workingBuffer[i] = byte.MaxValue;
        //_workingBuffer[i] = sourceSpan[i + 3];

        // R
        _workingBuffer[i + 1] = sourceSpan[i];

        // G
        _workingBuffer[i + 2] = sourceSpan[i + 1];

        // B
        _workingBuffer[i + 3] = sourceSpan[i + 2];
    }
    Debug.Print("Copied " + sourceSpan.Length + " in " + w.Elapsed.TotalMilliseconds);

    return _workingBuffer;
} 
```

这让我在 iPhone 上的 (1920 * 1080 * 4) 缓冲区大约需要 15 毫秒，约为 8mb。

这对我来说还远远不够。我的最终解决方案是执行偏移内存复制（C# 中的 Buffer.BlockCopy），因为 alpha 并不重要。

```
 byte[] _workingBuffer = null;
    byte[] GetProcessedPixelData(SKBitmap bitmap)
    {
        ReadOnlySpan<byte> sourceSpan = bitmap.GetPixelSpan();
        byte[] sourceArray = sourceSpan.ToArray();

        if (_workingBuffer == null || _workingBuffer.Length != bitmap.ByteCount)
        {
            // Alloc buffer
            _workingBuffer = new byte[sourceSpan.Length];

            // Set first byte. This is the alpha component of the first pixel
            _workingBuffer[0] = byte.MaxValue;
        }

        // Converts RGBA to ARGB in ~2 ms instead of ~15 ms
        // 
        // Copies the whole buffer with a offset of 1
        //                                      R   G   B   A   R   G   B   A   R   G   B   A
        // Originally the source buffer has:    R1, G1, B1, A1, R2, G2, B2, A2, R3, G3, B3, A3
        //                                   A  R   G   B   A   R   G   B   A   R   G   B   A
        // After the copy it looks like:     0, R1, G1, B1, A1, R2, G2, B2, A2, R3, G3, B3, A3
        // So essentially we get the wrong alpha for every pixel. But all alphas should be 255 anyways.
        // The first byte is set in the alloc
        Buffer.BlockCopy(sourceArray, 0, _workingBuffer, 1, sourceSpan.Length - 1);

        // Below is an inefficient method of converting RGBA to ARGB. Takes ~15 ms on iPhone 12 Pro Max for a 8mb buffer (1920 * 1080 * 4 bytes)
        /*
        for (int i = 0; i < sourceSpan.Length; i += 4)
        {
            // A
            // Dont set alpha here. The alpha is already set in the buffer
            //_workingBuffer[i] = byte.MaxValue;
            //_workingBuffer[i] = sourceSpan[i + 3];

            byte sR = sourceSpan[i];
            byte sG = sourceSpan[i + 1];
            byte sB = sourceSpan[i + 2];

            if (sR == 0 && sG == byte.MaxValue && sB == 0)
                continue;

            // R
            _workingBuffer[i + 1] = sR;

            // G
            _workingBuffer[i + 2] = sG;

            // B
            _workingBuffer[i + 3] = sB;
        }
        */

        return _workingBuffer;
    } 
```

代码注释了它是如何工作的。在我的同一部 iPhone 上，大约需要 2 毫秒，这对于我的用例来说已经足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-04T06:52:32.167

使用汇编，以下是针对英特尔的。

此示例交换红色和蓝色。

```
void* b = pixels;
UINT len = textureWidth*textureHeight;

__asm                                                       
{
    mov ecx, len                // Set loop counter to pixels memory block size
    mov ebx, b                  // Set ebx to pixels pointer
    label:                      
        mov al,[ebx+0]          // Load Red to al
        mov ah,[ebx+2]          // Load Blue to ah
        mov [ebx+0],ah          // Swap Red
        mov [ebx+2],al          // Swap Blue
        add ebx,4               // Move by 4 bytes to next pixel
        dec ecx                 // Decrease loop counter
        jnz label               // If not zero jump to label
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-27T12:33:55.293

`(pixel << 24) | (pixel >> 8)`将 32 位整数向右旋转 8 位，这会将 32 位 RGBA 值转换为 ARGB。这有效，因为：

*   `pixel << 24`丢弃左边的部分，`RGB`导致.`RGBA``A000`
*   `pixel >> 8`丢弃右侧的部分，`A`导致.`RGBA``0RGB`
*   `A000 | 0RGB == ARGB`.

# html - 带有数据属性的 HTML 验证错误

> ID：11259393
> 
> 赞同：-2
> 
> 时间：2012-06-29T09:35:58.430
> 
> 标签：html, facebook, validation

我从[http://validator.w3.org](http://validator.w3.org)收到如下验证错误

1) 错误第 136 行，第 34 列：没有属性“data-href”

2) 错误第 136 行，第 259 列：没有属性“数据发送”

3) 第 136 行，第 259 列：没有属性“data-send”

4) 第 136 行，第 278 列：没有属性“data-layout”

5) 第 136 行，第 304 列：没有属性“data-width”

6) 错误第 136 行，第 326 列：没有属性“data-show-faces”

我的代码是

```
<div class="fb-like"  data-href="{$url->job($details.jkey,$details.seocountry,$details.seocity,$details.seoindustry,$details.seojobtitle,$details.seoqulurl,$details.seojobSubCatagory)}" data-send="true" data-layout="button_count" data-width="100" data-show-faces="true"></div> 
```

请帮我解决这些错误。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:39:25.973

我猜你用错了[`doctype`](http://www.whatwg.org/specs/web-apps/current-work/#the-doctype)。确保您的文档以：

```
<!doctype html> 
```

[`data-*`](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)除非您使用 HTML5 文档类型，否则[属性无效。](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)

此外，这些看起来像 HTML 验证错误，而不是 CSS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-04T16:51:00.857

从 HTML 中删除 data- 属性。然后在调用 facebook 之前使用 javascript 添加属性。

下面是一个使用 jQuery 的例子：

```
<div id="fb-root"></div>
<div class="fb-like"></div>

var jQueryFBLike = $(".fb-like");
jQueryFBLike.attr("data-send", "false");
jQueryFBLike.attr("data-layout", "button_count");
jQueryFBLike.attr("data-width", "85");
jQueryFBLike.attr("data-show_faces", "false");

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js#appId=&xfbml=1";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T09:56:16.960

更改您的文档类型。

示例代码：

```
<!DOCTYPE html>
<html>
<head>
<title>sample</title>
</head>
<body>
<div class="fb-like"  data-href="{$url->job($details.jkey,$details.seocountry,$details.seocity,$details.seoindustry,$details.seojobtitle,$details.seoqulurl,$details.seojobSubCatagory)}" data-send="true" data-layout="button_count" data-width="100" data-show-faces="true"></div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-25T12:10:18.300

```
<div class="fb-like" data-href="http://www.facebook.com/pages/Your-Page" data-send="false" data-width="350" data-show-faces="false" data-font="arial"></div> 
```

对于 XHTML 过渡替换为：

```
<script language="javascript" type="text/javascript">

//<![CDATA[

document.write('<div class="fb-like" data-href="http://www.facebook.com/pages/Your-Page" data-send="false" data-width="350" data-show-faces="false" data-font="arial"><\/div>');

//]]>

</script> 
```

对于 HTML 4.01 过渡不要忘记手动转义 </div>，替换为：

```
<script type="text/javascript">
document.write('<div class="fb-like" data-href="http://www.facebook.com/pages/Your-Page" data-send="false" data-width="350" data-show-faces="false" data-font="arial"><\/div>');
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T11:44:49.083

它还会抛出带有短标签的错误！经过大量的谷歌搜索后，我附上了 JavaScript，`CDATA`以便与 4.01 一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-21T06:20:41.897

您可以使用：

```
 <script type="text/javascript">                (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                fjs.parentNode.insertBefore(js, fjs);
            } (document, 'script', 'facebook-jssdk'));</script>
         <script language="javascript" type="text/javascript">
            //<![CDATA[
             document.write('<div class="fb-like" data-href="https://www.facebook.com/virtualservicez" data-layout="button" data-action="recommend" data-show-faces="true" data-share="false"></div>');
             //]]>
        </script> 
```

这适用于我的网站

# database - CakePHP：一列 -> 一个 TRUE

> ID：11259394
> 
> 赞同：0
> 
> 时间：2012-06-29T09:35:59.497
> 
> 标签：database, cakephp, boolean, cakephp-2.0

希望有人可以帮助我：

我想要一个包含一个且仅一个`TRUE`值的列。我想为一行设置一个值`TRUE`（或“1”），并确保剩余的行是`FALSE`（或“0”）。

如何使用 CakePHP 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:15:43.997

您不能在数据库级别强制执行此操作（好吧，如果您使用触发器，则可以）因此您必须使用 Model::beforeSave() 强制执行它

类似于以下内容：

```
public function afterSave() {

    if ($this->data['Model']['field'] == 1) {
        // set all other records to false
        $this->updateAll(array('field'=>0));
    }

} 
```

保存记录时，它应该是唯一将“字段”设置为 true 的记录。

# php - 可以左右加入mysql吗

> ID：11259398
> 
> 赞同：0
> 
> 时间：2012-06-29T09:36:12.003
> 
> 标签：php, mysql, join

我需要 3 个与同一事物相关的表。

例如，1 具有用户信息，1 具有该用户的页面信息，而另一个具有该用户的页面选项。

全部通过 user_id 连接

有可能做到这一点。

```
SELECT * 
FROM users 
LEFT JOIN page_info ON users.id=page_info.user_id 
RIGHT JOIN page_settings ON user.id=page_settings.user_id 
WHERE users.id=$id 
```

还是我会被击败使用 2 个查询

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:26:20.927

我认为您误解了 a`LEFT`和`RIGHT`外部联接的作用：阅读[A Visual Explanation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

在您的情况下，`users`表格首先出现（即在所有其他表格的“左侧”），我怀疑您希望两个联接都是`LEFT`外部联接？那是：

```
SELECT *
FROM   users 
  LEFT JOIN page_info     ON users.id = page_info.user_id 
  LEFT JOIN page_settings ON users.id = page_settings.user_id 
WHERE  users.id = $id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:40:49.000

Yes, you can.

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# batch-file - 在批处理文件中编辑html文件

> ID：11259401
> 
> 赞同：1
> 
> 时间：2012-06-29T09:36:18.940
> 
> 标签：batch-file, replace, cmd

我有一个脚本，可以在其中读取要编辑的 html 文件。在这里，我粘贴了调用 :remove_redundant_columns 子例程的代码。

它应该从每行的开头删除空格/空格并从 html 文件中删除。唯一的问题是它在几乎空的行中添加了像 = 这样的额外文本，只有几个选项卡。

我下载的 html 文件来自 hidemyass.com/proxy-list/1

```
call parse_proxy.bat remove_redundant_columns !FILENAME!
exit /b

:remove_redundant_columns
REM Remove whitespaces from begin of lines and <span></span>
FOR /f "tokens=*" %%t in (%1) do (
   SET S=%%t
   SET S=!S:^<span^>^</span^>=!
   if NOT "!S!"=="" >>$tmp$ echo !S!
   )
del %1
REN $tmp$ %1
exit /b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:46:23.213

如果你相信，那是你唯一的问题......你需要检查你的变量 S 是否包含内容。

这是必需的，因为对未定义变量的替换不会产生未定义/空变量，新内容将是替换文本。

```
:remove_redundant_columns
REM Remove whitespaces from begin of lines and <span></span>
FOR /f "tokens=*" %%t in (%1) do (
   SET S=%%t
   if defined S (
     SET S=!S:^<span^>^</span^>=!
     >>$tmp$ echo !S!
   )
) 
```

正如 dbenham 所说，您遇到了许多其他问题，
另外一个问题是`echo !S!`命令本身。

`ECHO`对不同的内容有一些令人讨厌的副作用。
如果内容为空（或只有空格），那么它将打印它的当前状态
`ECHO IS OFF` 如果内容是`OFF`或`ON`它不会被回显，它只会改变状态。
如果内容是`/?`，它将回显帮助而不是`/?`.

要解决这个问题，您可以简单地更改`ECHO !S!`为`ECHO(!S!`，所有问题都消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:12:40.093

jeb 已经解决了您的 = 问题（一旦将额外的 IF DEFINED 检查添加到他的答案中）。但是您可能至少还有一个其他问题。

我同意乔伊的观点，你不应该像这样使用批处理来操作 HTML。但是，如果你真的想...

您的潜在问题是 HTML 通常会在其中`!`散布字符。`!`您的代码使用延迟扩展，但是当它包含字符时会导致 FOR 变量扩展损坏。解决方案是在循环中打开和关闭延迟扩展。

```
:remove_redundant_columns
setlocal disableDelayedExpansion
REM Remove whitespaces from begin of lines and <span></span>
(
  FOR /f "usebackq eol= tokens=*" %%t in ("%~1") do (
    SET S=%%t
    setlocal enableDelayedExpansion
    if defined S SET "S=!S:<span></span>=!"
    for /f "eol= tokens=*" %%S in ("!S!") do if "%%S" neq "" echo %%S
    endlocal
  )
) >>$tmp$
move /y $tmp$ "%~1"
exit /b 
```

对代码所做的其他细微更改：

*   搜索和替换可以通过使用引号来简化，这样特殊字符就不需要转义了。
*   您可以用一个 MOVE 替换 DEL 和 REN。
*   如果您使用一组外部括号重定向一次，重定向会更有效（更快）
*   您可能需要搜索包含空格和/或特殊字符的文件名，在这种情况下，您需要引用该名称。但这需要 FOR /F "USEBACKQ" 选项。

***编辑***

修改代码以`<span></span>`在替换后去除前导空格，以消除仅包含空格和/或制表符的行的可能性。

还将 EOL 设置为空格以防止剥离以 ; 开头的行

# maven-3 - 如何停用 flyway:clean 配置文件中的目标

> ID：11259404
> 
> 赞同：4
> 
> 时间：2012-06-29T09:36:34.910
> 
> 标签：maven-3, flyway

我正在使用 flyway maven 插件来迁移数据库：

```
<build>
[...]
     <plugin>
                <groupId>com.googlecode.flyway</groupId>
                <artifactId>flyway-maven-plugin</artifactId>
                <version>1.6.1</version>
                <configuration>
                    <user>${hibernate.connection.username}</user>
                    <password>${hibernate.connection.password}</password>
                    <driver>${driver}</driver>
                    <url>${url}</url>
                </configuration>
            </plugin> 
```

我有三个环境（dev、pre、pro）和每个环境的配置文件。每个环境都设置了自己的属性，因此我可以使用 flyway 设置具体配置文件并迁移到我想要的 DB。

Flyway 有一个干净的目标，这个目标允许删除模式中的所有对象而不删除模式本身。

有什么方法可以仅在我的一个个人资料中停用此目标？（很明显：P）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:40:39.147

您可以使用 none 阶段覆盖 prod 配置文件中 flyway 插件的调用：http: [//thomaswabner.wordpress.com/2010/02/16/howto-disable-inherited-maven-plugin/](http://thomaswabner.wordpress.com/2010/02/16/howto-disable-inherited-maven-plugin/)

# php - 在 Ubuntu 中编写 .htaccess 文件

> ID：11259410
> 
> 赞同：0
> 
> 时间：2012-06-29T09:36:46.500
> 
> 标签：php, wordpress, .htaccess, wordpress-theming

我有一个域`http://www.mydomain.com`。我的根文件夹结构是这样的。

*   根

    -WordPress

我想将所有请求重定向到 wordpress 文件夹。我用谷歌搜索并写了这样的文件

```
RewriteEngine on
rewritecond %{http_host} http://mydomain.com/ [nc]
rewriterule (.*)$ http://mydomain.com/wordpress [r=301,nc] 
```

我现在收到 404 File not found 错误。我什至尝试使用另一种技术来创建索引文件并使用`header('location:/wordpress1)`，这很好用，但是每当我在 Wordpress 中上传主题时，它都会给我 500 Internal srver Error .. 任何可以帮助我的人 **注意：我正在标记 php因为他们可能会使用这个文件**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:33:10.683

HTTP_HOST 变量包含客户端向其发出 HTTP 请求的服务器名称。在您的情况下是 mydomain.com。当前条件永远不会匹配。重写主机和重定向到子目录是不同的问题。

```
RewriteEngine on
RewriteBase   /

# This will redirect mydomain.com URIs to www.mydomain.com
RewriteCond  %{HTTP_HOST}  ^mydomain\.com$             [NC]
RewriteRule  ^.*$          http://www.mydomain.com/$0  [R=301,L] 

# This will do an INTERNAL redirect to the wordpress folder
RewriteCond  $0            !^wordpress/
RewriteRule  ^.*$          wordpress/$0 
```

第二条规则的条件是防止内部重定向循环。$0 设置为“整个匹配字符串”。

同时删除索引文件和位置。正如您所发现的，这是一种无效的语法，并且对新手有各种副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:14:39.917

尝试

```
 RewriteEngine on
 RewriteCond $1 !^(index\.php|wordpress/wp_content)
 RewriteRule ^(.*)$ /wordpress/index.php/$1 [L] 
```

第二行是例外。您可能需要添加更多以包含 html 需要包含的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T20:37:38.880

RewriteCond $0 !^wordpress/ RewriteRule ^.*$ wordpress/$0 这是最好的方法。

# c - 如何在 GTK 中进行简单的形状绘制？

> ID：11259412
> 
> 赞同：3
> 
> 时间：2012-06-29T09:36:58.937
> 
> 标签：c, gtk, draw

我是 Gtk 的新手，想要简单地绘制圆形和矩形等形状。我正在查看[gnome 教程](http://developer.gnome.org/gtk-tutorial/2.90/book1.html)和 hello word 示例。但是曲线部分没有记录。我想知道是否有人可以指出我应该看什么的正确方向，也许我需要包含一些其他补充库来绘制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:18:27.083

GTK 2 和 3 中首选的绘图 API 是 Cairo。但是，如果您需要开发一个图表程序，其节点可以对事件做出反应，您还需要使用画布，例如[GooCanvas](https://live.gnome.org/GooCanvas/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:42:53.860

查看有关 GtkDrawingArea 的[http://developer.gnome.org/gtk3/3.2/GtkDrawingArea.html](http://developer.gnome.org/gtk3/3.2/GtkDrawingArea.html)，以及有关 Gdk-Drawing- 的[http://developer.gnome.org/gdk/stable/gdk-Drawing-Primitives.html](http://developer.gnome.org/gdk/stable/gdk-Drawing-Primitives.html)原语和你在旅途中。

您还可以使用此链接进一步了解开罗，直接[查看 http://www.cairographics.org](http://www.cairographics.org)

# apache - 虚拟主机在 zend 框架中不起作用

> ID：11259414
> 
> 赞同：2
> 
> 时间：2012-06-29T09:37:00.760
> 
> 标签：apache, zend-framework, virtualhost, ubuntu-11.04

以下是我在 /etc/apache2/sites-available 中的虚拟主机：

```
<VirtualHost *:80>

DocumentRoot "/var/www/roomstays/public"

ServerName roomstays

#This should be omitted in the production environment
SetEnv APPLICATION_ENV development

<Directory "/var/www/roomstays/public">
Options Indexes MultiViews FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory>

</VirtualHost> 
```

它还在 /etc/apache2/sites-enabled 文件夹上启用

以下是我的主机文件：

```
127.0.0.1   localhost
127.0.0.1   roomstays

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

我在 var/www/roomstays 中配置了我的网站。但是当我进入房间时，它没有打开网站并显示此消息：

有用！

这是此服务器的默认网页。

Web 服务器软件正在运行，但尚未添加任何内容。

虚拟主机有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:07:55.360

如何为 Zend Project 设置虚拟主机：

在位置 /var/www/ 中创建名为 'roomstays' 的项目（文件夹）

放入文件 /etc/hosts 行：

```
127.0.0.1 roomstays.test 
```

在 /etc/apache2/sites-available/ 中创建名为“roomstays.conf”的文件并放入：

```
<VirtualHost *:80>
    ServerName 127.0.0.1
    ServerAlias roomstays.test
    DocumentRoot /var/www/roomstays/public/
    SetEnv APPLICATION_ENV "development"
    <Directory /var/www/roomstays/public/>
        Options All
        AllowOverride All
        Order Allow,Deny
        Allow From All
    </Directory>
</VirtualHost> 
```

将该文件“roomstays.conf”复制到位置 /etc/apache2/sites-enabled/

重新启动 apache，打开浏览器并输入“roomstays.test”，这对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:02:55.387

Three things to check:

**1\. Sites enabled**

Make sure your virtual host file is in /etc/apache2/sites-**enabled**.

**2\. NameVirtualHost**

Make sure you have this somewhere in the apache config:

```
NameVirtualHost *:80 
```

I have it in /etc/apache2/ports.conf (can't remember if thats the standard on Ubuntu)

**3\. Remove default virtual host**

If none of the above works, you can rename your virtual host to something like /etc/apache2/sites-enabled/000000-myhost. This will ensure your virtual host file is loaded first. Alternatively remove /etc/apache2/sites-enabled/000-default

Remember to restart apache after each change...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T09:58:43.670

它与本地主机不冲突吗？尝试分配不同的 IP 地址，例如

```
127.0.0.2 
```

并确保您已将具有别名的目录添加到 apache 日志文件目录中

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-13T19:51:51.123

```
<VirtualHost *:80>
    ServerName overstock.local
    DocumentRoot "C:\xampp\htdocs\overstock"
 <Directory "C:\xampp\htdocs\overstock">
    AllowOverride All
   </Directory>

 </VirtualHost> 
```

然后将 htaccess 更改为

```
 Options +FollowSymLinks -MultiViews
   RewriteEngine On
   RewriteBase /overstock/

   RewriteCond %{REQUEST_URI} !/public [NC]
 RewriteRule ^(.*)$ public/$1 [L] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T19:21:15.820

这就是我为解决这个问题所做的。复制 etc/apache2/sites-available 中的虚拟主机文件并将其粘贴到 etc/apache2/sites-enabled。转到您的浏览器并刷新，您会看到它工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T17:49:21.807

确保**# Virtual hosts**行在您的**httpd.conf**文件中处于活动状态。

通常，它位于：/etc/apache2/httpd.conf

要编辑文件，您需要 root 权限，因此：

```
sudo vim /etc/apache2/httpd.conf 
```

取消注释该行

```
Include /private/etc/apache2/extra/httpd-vhosts.conf 
```

保存文件**ESC + :wq + Enter**

重启你的 apache

# php - edraw如何使用php打开文件HttpOpenFileFromStream

> ID：11259417
> 
> 赞同：1
> 
> 时间：2012-06-29T09:37:04.287
> 
> 标签：php, file

在 php 中使用 HttpOpenFileFromStream 绘制打开文件

我在加载事件中使用这个 javascript 代码

```
document.OA1.HttpInit();
document.OA1.HttpAddpostString("DocumentID", "sample5.docx");
document.OA1.HttpOpenFileFromStream("http://localhost/rte/action_open_file.php", "Word.Application");

php code action_open_file.php

  header("http/1.1 200 OK");
  $doc_file_name = $_REQUEST["DocumentID"];
  $file_size = filesize($doc_file_name);
  $file = fopen($doc_file_name,"r");
  $data = fread($handle,$file_size);
  fwrite($handle,$data);
  fclose($handle); 
```

但它会在网页中打开空文件，但 sample5.docx 有一些文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:58:04.497

你的JS代码很好。只需将您的`action_open_file.php`代码替换为以下内容：

```
<?php     
    $filename = $_REQUEST["DocumentID"];

    echo "Get Stream Successfully!";

    echo "EDA_STREAMBOUNDARY";

    $fp=fopen("$filename","r");

    print fread($fp,filesize("$filename"));

    fclose($fp);

    echo "EDA_STREAMBOUNDARY";
    exit();
?> 
```

# python - 在 PyCuda 中实现一个新类

> ID：11259419
> 
> 赞同：1
> 
> 时间：2012-06-29T09:37:24.463
> 
> 标签：python, cuda, pycuda

我是使用 pycuda 的初学者，到目前为止，我已经从“Cuda by example”一书中学到了一些如何编写内核的基本知识，我的下一个任务是使用一个已经用 C++ 编写的类，里面的内核。如何将此 .h 文件导入 pycuda？我是否必须使用 boost python 来传输这个 .h 以便可以像 python 中的任何其他模块一样导入它？问题是我只需要内核中的这个特殊变量。此类用于计算导数，我将写几行代码，以便您了解它是如何构造的：

adoublecuda.h：

```
namespace adtl {
class adouble {
public:
    // ctors
    __device__ __host__ inline adouble();
    __device__ __host__ inline adouble(const double v);
    __device__ __host__ inline adouble(const adouble& a);

    __device__ __host__ inline adouble operator - () const;
    __device__ __host__ inline adouble operator + () const; 
```

...ETC。

我在 C-CUDA 中使用这个类，只需输入 #include “adoublecuda.h”，现在我想在 PyCUDA 中包含同样的东西。我只在内核内部使用这个类（我不需要 main 内部的双变量）。那么我是否必须使用 boost python 才能将此头文件包含到 PyCuda 中？

任何建议将不胜感激，感谢您帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:55:36.653

如果它仅在设备代码内部使用，并且您不打算进行任何元编程，那么您实际上不需要使用 Python 或 PyCUDA 做任何事情来使其工作。只需将您的设备代码编译为一个 CUBIN 对象（所以使用`nvcc -cubin`），然后使用`driver.module_from_file()`.

[您可以在我的这个](https://stackoverflow.com/a/5919737/681865)较旧的答案中看到一个完整的示例。

# ajax - 在 Spring MVC 中打开新窗口

> ID：11259421
> 
> 赞同：0
> 
> 时间：2012-06-29T09:37:38.460
> 
> 标签：ajax, spring-mvc

我是 Spring Framework 的新手。我想在单击链接时调用一个新窗口，但该页面包含通过数据库检索的数据。怎么做？并且该数据由具有模型和视图方法类型的控制器检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:57:18.423

您可以像在同一窗口中打开页面一样执行操作，只是链接应该包含一个`target="_blank"`属性：

```
<%-- define the URL of the link --%>
<c:url var="theUrl" value="/someAction">
    <c:param name="someParamName" value="someParamValue">
</c:url>

<%-- generate the link --%>
<a href="${fn:escapeXml(theUrl)}" target="_blank">Click here</a> 
```

# mysql - 如何重写查询以避免记录为 log_queries_not_using_indexes

> ID：11259423
> 
> 赞同：0
> 
> 时间：2012-06-29T09:37:48.813
> 
> 标签：mysql, logging, stored-procedures, indexing

我有以下存储过程：

```
CREATE PROCEDURE testProc(IN p_idProject INTEGER)
BEGIN
DECLARE nowTime DATETIME;
SET @nowTime = NOW();

     SELECT 
         idCustomer 
     FROM NextCalls WHERE @nowTime-nextCall = 
         (SELECT MAX(@nowTime - nextCall) 
          FROM NextCalls 
          WHERE idProject = p_idProject AND nextCall < @nowTime) 
     LIMIT 1;
END $$ 
```

列上设置了索引`nextCall`。`mysql-slow.log`不幸的是，它作为未正确使用索引的查询被登录到文件中。这个过程非常非常频繁地使用，我很乐意避免错误的索引。是否可以重写以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:45:42.500

您只是选择最旧的 nextCall。无需执行任何计算，您只需使用`ORDER BY`：

```
SELECT idCustomer 
FROM NextCalls 
WHERE idProject = p_idProject AND nextCall < CURRENT_TIMESTAMP
ORDER BY nextCall
LIMIT 1 
```

# video - 制作演示视频

> ID：11259425
> 
> 赞同：0
> 
> 时间：2012-06-29T09:37:54.577
> 
> 标签：video

大家好，在我提交大学考试的期末项目之前的最后三天，除了一个很好的演示文稿外，一切都准备好进行期末演示文稿了。起初我在 Microsoft Power Point 中做了一个，但它看起来不是很酷。

我刚刚有了一个演示文稿的想法，即创建一个包含有关我的项目信息的幻灯片的不同图像的视频，在背景中添加一些音乐，并且在某些时候音乐的音量将被调低，并且与我交谈的 mp3 将开始播放。

到现在为止，这不是我在 power point 中做不到的事情，我希望你们能推荐另一个软件，因为我还想在演示文稿中添加另一个视频，实际上是另一个视频，它正在与我交谈并将我的手指向视频中的不同主题.我以前从来没有这样做过，也不知道我应该如何从一个视频中剪切那部分，然后将其添加到另一个视频中。

任何人都可以推荐一个易于学习的好软件，可以实现这一目标并具有简单的学习曲线吗？还有一些教程。像我这样的初学者可以在 3 天内完成吗？

这将是我想做的一个例子：

[示例视频](http://www.youtube.com/watch?v=3jZ_Ns3Sqqo)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:16:08.310

@hasanyasin 提供的示例看起来更像是一个 impress.js 演示文稿，您可以[**在此处找到其代码和示例**](http://bartaz.github.com/impress.js/#/bored)

impress.js 包含一些易于编辑的示例，您可以在其中轻松嵌入图像（静态或动画）、视频、音频等。您无需具备高级技能即可创建类似专业的演示文稿。

无论如何，您希望在视频中做的事情可以通过专业的非线性编辑系统来实现，例如 Sony Vegas 或 Adob​​e Premiere，其中 Sony Vegas 是最容易学习的。

如果您习惯了基于 Microsoft 的产品（PhotoShop、Corel Draw、Office、Movie Maker 等），那么您几乎可以开始使用了。

将您置于动态图像、视频、转场、文本和其他媒体前面的过程称为“色度键”，可以在 Sony Vegas 8（以及以前/以后的版本）的“效果”选项卡中访问。有关如何创建色度键效果的视频教程可以通过删除术语“色度键索尼维加斯”在 youtube 上找到，这里是一个示例：[http ://www.youtube.com/watch?v=KMgxQCwfrcs](http://www.youtube.com/watch?v=KMgxQCwfrcs)

基本上你在多层工作。按照您希望它们出现在屏幕上的顺序将元素放置在时间线中，添加背景、输入/输出转换和其他元素。请记住，顶层将是屏幕上的“前端”元素。之后在最顶部插入蓝/绿屏视频，应用色度键效果，选择滴管并选择视频中的背景，然后调整阈值以免在视频中出现鬼影。

您将需要使用“事件平移和裁剪”工具来为某些静态项目（例如图片）创建“移动”效果，即使您希望视频在屏幕上“飞行”。只需在 youtube 中使用“Pan and Crop Sony Vegas”进行搜索，您将获得大量结果。这是一个例子：[http ://www.youtube.com/watch?v=lpvJ6Dhz63M](http://www.youtube.com/watch?v=lpvJ6Dhz63M)

是的……你可以在几个小时内创造出很棒的结果。试一试，将您发布的视频的链接发回给我们。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:50:41.793

看看这个：

[https://s3.amazonaws.com/hasanyasin/stackoverflow/p-0-nofont.svg](https://s3.amazonaws.com/hasanyasin/stackoverflow/p-0-nofont.svg)

每个现代浏览器都应该正确呈现它。您可以使用箭头键导航并通过鼠标滚轮或 Ctrl 和 +/- 键放大/缩小。

它是在[Inkscape](http://inkscape.org/)上使用[Sozi](http://sozi.baierouge.fr/wiki/en%3ainstall)扩展制作的。如果你喜欢你所看到的，这很容易做到。我相信这很酷。

不过要小心。不要在视觉上花费太多时间。真正能给你带来成功的是内容。即使你创造了一个伟大的项目，把它讲好又是另一回事。不要让这些事情分散你对真正目标的注意力：尽可能清晰有效地展示你的项目。视觉只是化妆，如果脸在自然状态下是美丽的，化妆可能只是增加一点点触感，除此之外别无他法。另一方面，极端或不当使用它会使美丽的脸看起来如此丑陋，甚至令人不安。

我希望你的演讲会非常成功。:)

更新：对不起，当我搜索并上传我想举的文件时，我忘记了我的第一段。演示文稿，如果你会在那里，不如视频好。你总是比视频生动 1000 倍。让演示文稿留在后面，进行现场直播。也许您的环境与我在脑海中的想象完全不同；但是从 PowerPoint 演示文稿切换到带有音乐的视频听起来有点过头了。我希望我也不过分。请接受这是一个普通老头的谦卑观点。

UPDATE2：看到你的编辑后，我看到你决定把自己放在视频中。该示例中的那个人是在“绿屏”前拍摄的，然后从软件背景中删除。对于绿屏，搜索“绿屏提示”或类似的东西，你会发现它不是 3 天的业务。我知道你现在看起来真的很酷；但请相信我，如果其他人都在制作 PowerPoint 演示文稿，而你放了一段视频并希望其他人观看它并说“哇，这太棒了”，也许你的朋友会这么说；但你的教授不会。当你在那里时，它是最好的。那个视频中的那个人更愿意在这里和我面对面交谈。他制作了那个视频，因为他不能来和我面对面交谈。把视频放在那里并躲在一旁不会让你看起来很好。

# java - 如何通过单击表格行进入活动？

> ID：11259430
> 
> 赞同：0
> 
> 时间：2012-06-29T09:38:20.853
> 
> 标签：java, android

我正在制作一个简单的应用程序。它也是我的第一个应用程序......

它有一个带有菜单的活动，我在表格行中创建了每个菜单选项。每个表格行包含一个图像按钮和一个文本描述。当我们点击每个表格行时，我想去另一个活动。我怎么做？？

是否可以使用单个类文件来显示多个布局文件（即每个菜单的内容）？

或者

除了 tableRow 之外，还有其他方法可以创建这样的菜单并使用它转到另一个 Activity 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:59:10.907

首先，让我们看看如何通过单击表格行进入另一个活动。在 XML 文件属性的表行中给出以下语法：

```
android:onClick="onClick" 
```

然后在你的活动中，在创建方法之后把这一行

```
public void onClick(View v){

 Intent intent=new Intent(v.getContext(),newActivityname.class);
 startActivityForResult(intent,0);

} 
```

通过这样做，当您单击表格行时，您将被重定向到另一个活动名称`newActivityname`。

其次，是的，您可以根据某些条件为相同的活动设置不同的布局文件。例如，如果我们想按照整数值条件放置布局文件，而不是像这样

```
int flag=0;

if(flag==0){
  setContentView(R.layout.xml1);
}
if(flag==0){
      setContentView(R.layout.xml2);
    }
if(flag==1){
      setContentView(R.layout.xml3);
    }
if(flag==3){
      setContentView(R.layout.xml4);
    } 
```

像这样基于某些条件，您可以设置布局。

对于您的第三个查询，请更具体，以便我们回答您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:58:47.083

在您的 xml 中，您可以为 TableRow 提供 id，然后 onClick 调用下一个活动，如下面的代码，在您的下一个活动中，您可以使用简单的 if-else 逻辑处理 setcontentview() 方法，并使用从前一个意图传递的值（例如rowId=1 用于第一行等）并设置您所需的布局，这可能会有所帮助。

```
TableRow tableRow=(TableRow)findViewById(R.id.LayoutFirstRow);
tableRow.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        startActivity(new Intent(presentActivity.this, destinationActivity.class));             
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:04:57.313

尝试：

```
TableRow tablerow = new TableRow(this);
tablerow.setId(2000+i); //set id here
tablerow.setOnClickListener(getOnClickTableRow(tablerow));
//your code...

View.OnClickListener getOnClickTableRow(final TableRow tablerow)  {
    return new View.OnClickListener() {
        public void onClick(View v) {

            //START ACITIVYT HERE
             Intent intent=new Intent(CURRENT_ACTIVITY.this,Activityname.class);
             startActivity(intent);
        }
    };
} 
```

# oracle - 实体框架和 Oracle 客户端 - 存储过程问题

> ID：11259433
> 
> 赞同：2
> 
> 时间：2012-06-29T09:38:27.153
> 
> 标签：oracle, entity-framework-4, plsql

我在项目中使用带有 Oracle 的实体框架并尝试从 EF 调用存储过程。程序如下

```
Create or Replace Procedure usp_RotaPlateProductie_Select(
    p_afdelingId in varchar2,
    p_productTypeId in varchar2,
    p_productieData out sys_refcursor)
IS 
Begin
    Open p_productieData for
        Select rp.Batchnummer, cppo.Productnummer, p.Omschrijving, pra.Bruto_In_Meters
        From Rotaplateproductie rp inner join Productieresultaatrtplrol pra
        on rp.Batchnummer = pra.Batchnummer inner join Cpiplusproductieorder cppo
        on pra.ProductieNummer = cppo.ProductNummer inner join Product p
        on cppo.Productnummer = p.Productnummer Where rp.Afdelingid = p_afdelingId
        and rp.producttype = p_productTypeId; 
END; 
```

但是当 EF 执行该函数时，我收到以下错误

```
ORA-06550: line 1, column 8:
PLS-00306: wrong number or types of arguments in call to 'USP_ROTAPLATEPRODUCTIE_SELECT.
ORA-06550: line 1, column 8:
PL / SQL: Statement IGNORED. 
```

我正在使用以下代码调用此过程

```
public ObjectResult<RotaPlateProductie> Search_RotaPlateProductie(global::System.String p_AFDELINGID, global::System.String p_PRODUCTTYPEID)
    {
        ObjectParameter p_AFDELINGIDParameter;
        if (p_AFDELINGID != null)
        {
            p_AFDELINGIDParameter = new ObjectParameter("P_AFDELINGID", p_AFDELINGID);
        }
        else
        {
            p_AFDELINGIDParameter = new ObjectParameter("P_AFDELINGID", typeof(global::System.String));
        }

        ObjectParameter p_PRODUCTTYPEIDParameter;
        if (p_PRODUCTTYPEID != null)
        {
            p_PRODUCTTYPEIDParameter = new ObjectParameter("P_PRODUCTTYPEID", p_PRODUCTTYPEID);
        }
        else
        {
            p_PRODUCTTYPEIDParameter = new ObjectParameter("P_PRODUCTTYPEID", typeof(global::System.String));
        }

        return base.ExecuteFunction<RotaPlateProductie>("Search_RotaPlateProductie", p_AFDELINGIDParameter, p_PRODUCTTYPEIDParameter);
    } 
```

这里RotaPlateProductie是我绑定结果集的实体请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:54:30.177

您必须添加配置；您的情况应该如下：

```
<oracle.dataaccess.client
    <settings>
      <add name="rp.usp_RotaPlateProductie_Select.RefCursor.p_productieData" value="implicitRefCursor bindinfo='mode=Output'" />...
   <settings>
</oracle.dataaccess.client 
```

# android - Android 布局未按预期布局自定义视图

> ID：11259436
> 
> 赞同：0
> 
> 时间：2012-06-29T09:38:35.043
> 
> 标签：android, android-layout, android-view

我正在使用自定义视图制作 Android 应用程序。我以前做过很多次，但这次我似乎遇到了一个奇怪的问题。

尝试通过 XML 或布局编辑器进行布局时，我的自定义视图未按预期布局。当我将其中一个视图放在现有视图的右侧时，它似乎与左侧对齐。我附上了一张图片来说明我的意思 ![布局问题](../Images/cd01cd7b5536d2bb85c80f6fa130fc86.png)

我不确定是什么原因造成的，任何其他视图似乎都不会发生这种情况，并且以前的应用程序从未发生过这种情况，尽管我为自定义视图使用了类似的代码。

有没有人遇到过这样的问题？如果是这样，有什么建议吗？

如果需要，我可以提供视图的代码和其他可能相关的代码。

编辑 - 好的，按照要求进行编码，希望它不会冒犯任何人太多。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.offthemap.sudokusolver.SudokuButton
    android:id="@+id/sudokuButton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true" />

<com.offthemap.sudokusolver.SudokuButton
    android:id="@+id/sudokuButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/sudokuButton2" />

</RelativeLayout> 
```

自定义视图：

```
package com.offthemap.sudokusolver;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;

public class SudokuButton extends View 
{
private static Bitmap background, border, borderSelected;
private static Bitmap[] number;
private static int size = 100;
private int numberIndex = -1;

public SudokuButton(Context context, AttributeSet attrs) 
{
    super(context);
    Resources res = getResources();
    if (background == null){background = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.background), size, size, false);}
    if (border == null){border = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.border), size, size, false);}
    if (borderSelected == null){borderSelected = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.borderselected), size, size, false);}
    if (number == null)
    {
        number = new Bitmap[]{
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.one), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.two), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.three), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.four), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.five), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.six), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.seven), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.eight), size, size, false),
                Bitmap.createScaledBitmap(BitmapFactory.decodeResource(res, R.drawable.nine), size, size, false)
                };
        }
}

public void increaseNumber()
{
    numberIndex++;
    if (numberIndex == 9){numberIndex = -1;}
    invalidate();
}

public void setNumber(int newNumber)
{
    numberIndex = newNumber;
}

public static void setSize(int newSize)
{
    size = newSize;
}

protected void onDraw(Canvas canvas)
{
    canvas.drawBitmap(background, 0, 0, null);
    if (numberIndex != -1)
    {
        canvas.drawBitmap(number[numberIndex], 0, 0, null);
    }
    canvas.drawBitmap(border, 0, 0, null);
}

@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
 {
    setMeasuredDimension(measureWidth(widthMeasureSpec),    measureHeight(heightMeasureSpec));
 }

private int measureWidth(int measureSpec)
{
    int preferred = background.getWidth();
    return getMeasurement(measureSpec, preferred);
    }

private int measureHeight(int measureSpec)
{
  int preferred = background.getHeight();
  return getMeasurement(measureSpec, preferred);
}

private int getMeasurement(int measureSpec, int preferred)
{
    int specSize = MeasureSpec.getSize(measureSpec);
    int measurement = 0;

    switch(MeasureSpec.getMode(measureSpec))
  {
    case MeasureSpec.EXACTLY:
        measurement = specSize;
        break;
    case MeasureSpec.AT_MOST:
        measurement = Math.min(preferred, specSize);
        break;
    default:
        measurement = preferred;
        break;
  }
    return measurement;
}
} 
```

第二次编辑 - 似乎这只是使用静态位图的一个问题，不知道为什么会发生，但删除它似乎可以解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:49:13.407

您可以在定义 layout_Right_of 的位置发布您的 xml 吗？

有时是一个问题，如果您在引用视图之前或之后定义，我的意思是您在哪里使用 de @+id 或 @id 如果它已经定义。

- 编辑 -

```
public class SudokuButton extends View 
{ 
```

至：

```
public class SudokuButton extends RelativeLayout 
```

和：

```
<com.offthemap.sudokusolver.SudokuButton
android:id="@+id/sudokuButton1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_toRightOf="@+id/sudokuButton2" /> 
```

至：

```
<com.offthemap.sudokusolver.SudokuButton
android:id="@+id/sudokuButton1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_toRightOf="@id/sudokuButton2" /> 
```

因为已经在 R 的预览组件中定义了。

两条评论，尝试从自定义组件中的相对或线性布局之类的 ViewGroup 扩展，另一件事是您可以在没有 @+id 的情况下从第二个组件引用到第一个组件

问候，亚历克斯。

# git - 如何推送具有子模块的分叉存储库？

> ID：11259437
> 
> 赞同：1
> 
> 时间：2012-06-29T09:38:35.770
> 
> 标签：git, git-submodules

有一个`A`项目，A项目有一个子模块`S`
A
|-S
|-B
|-C

> A repo：git@github.com：**benjamin** / *A* .git
> S repo：git@github.com：**owner** / *S* .git

为了贡献一些错误修复，我分叉了`A`存储库并克隆了它。

`$ git clone git@github.com:benjamin/A.git`

然后下载`submodule S`我命令的

`$ git submodule init`
`$ git submodule update`

好的，代码树做得很好，我在一个文件`A`和一个文件中修复了错误`S`。
要提交并推送这两个文件，

```
$ cd S
$ git add modified_file
$ git commit -a -m 'submodule commit'
$ git push 
```

但推是行不通的。

> 错误：对所有者/S.git 的权限拒绝本杰明。
> 致命：远端意外挂断

我也应该分叉`S`存储库吗？在这种情况下你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:58:16.837

是的，子模块本身就是一个 git repo。
你需要

*   分叉两个回购，
*   克隆他们两个，
*   `A`在和本地之间建立一个符号链接`S`（只是为了你的代码编译，即不要打扰`S`本地的子模块状态）
*   在两个本地仓库中提交您的更改并将它们推送到您各自的分支
*   提出两个拉取请求（一个用于`A`，一个用于`S`）

只有维护者`A`才能`S`：

*   应用您的拉取请求`S`并提交
*   应用您的拉取请求`A`
*   提交，记录（子模块）`A`的新 SHA1和.`S``A`

* * *

[Mark Longair](https://stackoverflow.com/users/223092/mark-longair)提到您可以：

*   克隆你的叉子`A`
*   `git submodule init`
*   `git submodule update`（这将克隆`S`到正确的 SHA1，但使用 ' `S`' 作为远程，而不是 ' `forked-S`'）
*   `cd S`
*   `git remote set-url origin <SSH-url-of-fork-of-S>`
*   `git checkout -b my-changes-to-S`：创建一个分支以记录您的本地修改，并避免处于[分离`HEAD`模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)。

# facebook - 如何查看我已发布的“news.reads”操作的聚合？

> ID：11259439
> 
> 赞同：2
> 
> 时间：2012-06-29T09:38:44.197
> 
> 标签：facebook, facebook-opengraph, aggregation

我有一个 Facebook 应用程序想要将文档读取发布到用户的 OpenGraph。

由于`read`是保留的内置动作，因此 my `object`s 必须具有 type `article`。读取到用户图表的发布工作正常，最后一次读取也显示在用户的时间轴上。

![在此处查看已读“第三杂志”的成功展示](../Images/d8444e7c6eb2641245ab5afad45217bb.png)

此外，我还设置了一些聚合器，可以显示最后 5 次阅读、最受欢迎的作者等。问题是我无法在我的时间线/个人资料或用户的应用程序部分的任何地方找到这些聚合器。

![在此处查看设置的对象、操作和聚合器](../Images/5bf4abbce392252741df361e0ae7047c.png)

**是否无法控制/显示内置动作和对象的聚合器？**
我有一种感觉，因为我可以设置它们并且（例如） Spotify 也使用内置`music.song`对象，如下所示 - 这基本上也是我想要的。

![聚合，我正在寻找](../Images/2b5ea851abd590f2563a7a1bbfb30d95.png)

不过，我在应用程序的时间线部分看到的只是：

![聚合，我得到](../Images/9a011bbefcce9fbeba028a89e807e29b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:48:51.503

我相信您无法控制 facebook 何时显示您的聚合，因为您在打开的图表设置中定义了它们，因为 facebook 使用所谓的“GraphRank”来确定是否显示您的聚合。计算如下：

> GraphRank = 亲和力 * 权重 * 交互次数 * 时间

*   亲和度（分数）：这是查看用户和操作创建者之间的关系。

*   权重：如果两个用户经常相互交互，则打开图表中各自的动作被评为高于没有相同兴趣且在 Facebook 上没有密切联系的用户。

*   交互：用户与应用程序交互的频率以及朋友对社交渠道中的活动的反应如何（如果没有人点击已发布的操作，则对 GraphRank 不利）。

*   时间：如果一个应用程序被不规律地使用或只使用一次，从长远来看，动作会受到较少的关注，并且在时间轴上的呈现也会不那么显眼。

见这篇文章： http: [//www.insidefacebook.com/2011/12/27/edgerank-and-graph-rank-defined/](http://www.insidefacebook.com/2011/12/27/edgerank-and-graph-rank-defined/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:30:02.287

这不是实际问题的完美答案，但我仍然能够解决问题。如果其他人在同一地点，您可能会从我的学习中受益：

我正在构建的应用程序想要将`read`操作推送到用户的 OpenGraph。我的聚合问题是我从内置`news.reads`操作中读取的内容没有聚合。直到今天，我也不知道为什么。

相反，我设法创造了自己的`read`行动。它没有连接到内置的，存在于我自己的命名空间中。
这个动作现在也可以连接到我自己的对象，并且不绑定到`article`对象 - 就像内置的一样。

拥有自己的动作和对象，按照[聚合的说明](https://developers.facebook.com/docs/opengraph/define-units/)创建任意数量的聚合是轻而易举的事。它们实际上也出现在我的测试用户的个人资料中。是的。

# php - Yii CListView 分页自定义

> ID：11259441
> 
> 赞同：0
> 
> 时间：2012-06-29T09:38:46.433
> 
> 标签：php, pagination, yii

有没有办法自定义 Yii CListView 分页对象来显示

前 1 页，共 n 页 下一页

而不是

上一个 1,2,3 下一个 ?

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:42:10.440

您不能通过简单地将参数传递给 CLinkPager 以修改其输出来做到这一点。所以，没有*更优雅的方法了*。

但是您可以通过扩展 CLinkPager 来非常轻松地覆盖 Pager 类，只需按以下方式更改 createPageButtons()-Method：

```
Yii::import('web.widgets.pagers.CLinkPager');
class YourLinkPager extends CLinkPager{
    /**
 * Creates the page buttons.
 * @return array a list of page buttons (in HTML code).
 */
protected function createPageButtons()
{
    if(($pageCount=$this->getPageCount())<=1)
        return array();

    list($beginPage,$endPage)=$this->getPageRange();
    $currentPage=$this->getCurrentPage(false); // currentPage is calculated in getPageRange()
    $buttons=array();

    // first page
    $buttons[]=$this->createPageButton($this->firstPageLabel,0,self::CSS_FIRST_PAGE,$currentPage<=0,false);

    // prev page
    if(($page=$currentPage-1)<0)
        $page=0;
    $buttons[]=$this->createPageButton($this->prevPageLabel,$page,self::CSS_PREVIOUS_PAGE,$currentPage<=0,false);

    /* 
             * !!! change has been made here !!!
             */
    $buttons[]='<li>Page '.$this->getCurrentPage(false).' of '.$this->getPageCount().'</li>';

    // next page
    if(($page=$currentPage+1)>=$pageCount-1)
        $page=$pageCount-1;
    $buttons[]=$this->createPageButton($this->nextPageLabel,$page,self::CSS_NEXT_PAGE,$currentPage>=$pageCount-1,false);

    // last page
    $buttons[]=$this->createPageButton($this->lastPageLabel,$pageCount-1,self::CSS_LAST_PAGE,$currentPage>=$pageCount-1,false);

    return $buttons;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:48:54.267

[http://www.yiiframework.com/forum/index.php/topic/5776-customise-the-clinkpager/](http://www.yiiframework.com/forum/index.php/topic/5776-customise-the-clinkpager/)

# java - Try...catch vs if...else 异常 - Java

> ID：11259442
> 
> 赞同：2
> 
> 时间：2012-06-29T09:38:47.387
> 
> 标签：java, if-statement, try-catch

如果我想从`args[0]`数组中获取用户输入，但万一我（用户）忘记定义它，我想要一个提示出现 - 使用`if`块来确定数组项是否更好？是否为空，或捕获异常？那么，这是

```
public class Stuff {
    static Scanner input = new Scanner(System.in);
    public static void main(String[] args) {
        String foo;
        if(args.length > 0) {
            foo = args[0];
        }
        else {
            foo = getString("Input? ");
        }
    }
    public static String getString(String prompt) {
        System.out.print(prompt + " ");
        String answer = input.nextLine();
        return answer;
    }   
} 
```

好于或差于

```
public class Stuff {
    static Scanner input = new Scanner(System.in);
    public static void main(String[] args) {
        String foo;
        try {
            foo = args[0];
        }
        catch(ArrayIndexOutOfBoundsException e) {
            foo = getString("Input? ");
        }
    }
    public static String getString(String prompt) {
        System.out.print(prompt + " ");
        String answer = input.nextLine();
        return answer;
    }   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:41:40.843

您的第一个示例仍将引发异常，因为在 if 语句中您仍在访问不存在的索引。

如果您想使用 if 语句，那么您应该检查数组的长度是否大于您尝试访问的索引，例如：

```
if(args.length > 0)
    foo = args[0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T09:43:19.260

IMO，if-else 在这种情况下更好/更快。

当你在一个方法中并且你想告诉调用者出错了，而你不能用返回值来做这件事时，就会使用抛出异常。

但正如乔恩泰勒所说，你的 if 语句不会那样工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T09:49:04.250

你需要测试`args.length`而不是阅读`args[0]`

但除了该错误之外，最好使用`if/else`以下原因：

*   它使代码更清晰
*   它具有更好的性能（尽管在这种情况下不相关）
*   没有异常情况（预计 args 数组在某些情况下可能为空，例如“用户错误”，因此代码应该能够处理它）。异常抛出应该保留给*不应该发生*的异常情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T09:45:26.590

您真正需要的只是一行代码。

```
final String foo = args.length > 0? args[0] : getString("Input? "); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T09:41:57.233

使用 if 块检查数组是否为空，方便快捷。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T09:45:52.687

鉴于 Jon Taylor 证明的更正，我更喜欢带有 if 的版本。

不仅是为了提高速度（在你的例子中我猜这不会明显），而且因为带有 if 的代码更好地解释了它的意图，简化了代码的未来维护。

# python - “./postinstall”失败，返回码 [超时]

> ID：11259445
> 
> 赞同：1
> 
> 时间：2012-06-29T09:39:00.417
> 
> 标签：python, django, dotcloud

当我运行“dotcloud push training”时...运行 postinstall 脚本需要很长时间并在下面出现错误。我创建了一个新帐户。cd 投影并运行命令：“dotcloud create training”和“dotcloud push training”，但没有任何变化。
任何人都可以帮助我吗？请

```
Running postinstall script...
ERROR: deployment aborted due to unexpected command result: "./postinstall" failed with return code [Timeout] 
```

安装后

```
#!/bin/sh
#python createdb.py
python training/manage.py syncdb --noinput
python mkadmin.py
mkdir -p /home/dotcloud/data/media /home/dotcloud/volatile/static
python training/manage.py collectstatic --noinput 
```

要求.txt

```
Django==1.4
PIL==1.1.7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:52:19.217

试试这个作为你的安装后。它可能有助于定位错误（扩大肯的建议）：

```
#!/bin/bash
# set -e makes the script exit on the first error
set -e
# set -x will add debug trace information to all of your commands
set -x

echo "$0 starting"

#python createdb.py

python training/manage.py syncdb --noinput
python mkadmin.py
mkdir -p /home/dotcloud/data/media /home/dotcloud/volatile/static
python training/manage.py collectstatic --noinput

echo "$0 complete" 
```

更多调试信息可在[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:05:08.867

任何诸如“./postinstall failed with return code”之类的错误消息都意味着您的 postinstall 脚本存在问题。

为了在 dotCloud 上轻松调试安装后执行，您可以执行以下操作：

假设您的应用是“拉面”，而您的服务是“www”。

```
$ dotcloud -A ramen run www
> ~/current/postinstall 
```

它将重新执行安装后，但这次从您的会话开始，因此您将能够轻松更新安装后代码并重新运行它，而无需一次又一次地推送。

找到根本原因后，在本地修复它并重新推送您的应用程序。

# php - 无法显示 jpeg 图像

> ID：11259446
> 
> 赞同：0
> 
> 时间：2012-06-29T09:39:08.657
> 
> 标签：php, image, xampp, jpeg

我正在使用 XAMPP 编写一些网页，但无法显示 jpeg 图像。也许我必须更改一些配置文件，有人可以告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:44:59.543

您需要检查是否启用或禁用了 GD 支持..为此转到：localhost/ 然后单击 phpinfo() 选项卡..然后搜索“GD”...如果启用或禁用 GD 支持..如果禁用，您需要将其更改为启用以使用图像..希望它对您有所帮助.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:49:30.957

检查嵌入在您网页中的文件的路径可能是它们没有链接到它们各自的对象......

使用[Firebug](http://getfirebug.com/)查找文件的路径，无论它们是错误的还是正确的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:10:35.950

您需要检查图像是否正确加载：检查此示例：

```
<?php
$the_path_to_image = '/path/to/image';
header('Content-Type: image/jpeg');
echo file_get_contents($the_path_to_image); 
```

# java - XMLPullParser 特殊字符

> ID：11259448
> 
> 赞同：0
> 
> 时间：2012-06-29T09:39:20.473
> 
> 标签：java, android, xml, special-characters, xmlpullparser

我使用 XMLPullParser 解析一个 XML 文档，该文档不幸包含一些特殊字符，如：或 &... 似乎这些字符中断了解析过程，并且只显示了这些字符之后的文本，而不是之前的文本（如果特殊字符出现在一些文本内容的中间）。我无法控制这个 XML 文件，所以我必须在解析文档时解决这个问题。

我怎样才能做到这一点？我已经做了一些研究，结果表明我能够实现一个名为 ENTITY_REF 的 eventType，但我不知道如何处理这种方法。

会很高兴一些提示。

我的解析器：

```
 while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_TAG) {
            currentTag = xpp.getName();

        } else if (eventType == XmlPullParser.TEXT) {

            if ("title".equals(currentTag)) {
                currentEvent.setTitle(xpp.getText());
                System.out.println("Event title: " + xpp.getText());
            } 
        } else if (eventType == XmlPullParser.END_TAG) {
            if ("event".equals(xpp.getName())) {
                events.add(currentEvent);
                currentEvent = new Event();
            }
        }  else if (eventType == XmlPullParser.ENTITY_REF) {
            System.out.println("Entity REF: " + xpp.getText());
        }

        eventType = xpp.nextToken();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:34:10.667

与 SAX 一样，XMLPullParser 是一个非常低级的解析接口，它以相当大的可用性代价实现了高性能。解析器可以自由地将文本节点分解为片段，并且您的代码需要接受一系列片段并将它们组装成实际的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:38:48.837

你为什么不扩展`DefaultHandler`它更容易使用并使你的代码更可重用。我想你不会遇到这样的问题。

# android - 如何将消息从服 务发送到活动

> ID：11259453
> 
> 赞同：7
> 
> 时间：2012-06-29T09:39:28.250
> 
> 标签：android, service, android-asynctask, message

我构建了一个创建服务的 AsyncTask，现在我想从服务发送到 AsyncTask 消息。我在 AsyncTask 上的代码是：

```
 class ResponseHandler extends Handler {
  public void handleMessage(Message message) {
       // Toast.makeText(this, "message from service",Toast.LENGTH_SHORT).show();
 } 
```

如果我错了，希望它会处理来自服务的消息纠正我的错误。

并且从服务中尝试这样做

```
 Message message = Message.obtain(null, MyService.ADD_RESPONSE_HANDLER);
     message.replyTo = messenger;
      try {
             myService.send(message);
             catch (RemoteException e) {
             e.printStackTrace();
         } 
```

但我的错误是在行中找不到符号：

```
 MyService.ADD_RESPONSE_HANDLER
  message.replyTo = messenger;
  try {
  myService.send(message); 
```

我需要添加什么？请给我一个可以完成工作的代码。多谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:42:05.777

One way is using `ResultReceiver`. Here is my complete blog post which I had recently posted with an Example.

[`How to update Activity from Service using ResultReceiver`](http://www.lalit3686.blogspot.in/2012/06/how-to-update-activity-from-service.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T09:46:18.230

要从服务向 Activity 发送消息或任何数据，您需要注册一个**自定义广播接收器**。请参阅这些教程以从服务向 Activity 发送数据：

[服务和活动之间的通信 - 第 1 部分](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

[使用接收器自定义意图和广播](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)

# bash - 如何激活 FULL $var 完成

> ID：11259456
> 
> 赞同：2
> 
> 时间：2012-06-29T09:39:33.680
> 
> 标签：bash, variables, ubuntu, debian, bash-completion

在 Debians BASH 下，我可以执行以下操作：

```
foo=/path/to/some/file

cat $f[TAB] 
```

如您所见，我可以通过按 TAB 来自动完成变量 $foo。

在 Ubuntu (11) 下，行为不一样（我在 bashrc 中激活了“/etc/bash_completion”）。

这是有效的：

```
echo $f[TAB] 
```

这个不工作：

```
cat $f[TAB] 
```

谁能给我一个提示，如何让最后一个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:08:52.093

`cat`您可以通过执行以下操作删除提供的完成规范`/etc/bash_completion`：

```
complete -r cat 
```

或者您可以查看是否在`/etc/bash_completion`您正在使用的 Bash 版本中修改工作中提供的完成选项：

```
complete -F _longopt -o filenames -o bashdefault cat 
```

如果您使用的是最新的 Bash 4.2 补丁版本，有一个选项可能会有所帮助（我没有尝试过）：

```
shopt -s direxpand 
```

# regex - 正则表达式从路径中删除最后一个文件夹

> ID：11259471
> 
> 赞同：7
> 
> 时间：2012-06-29T09:40:32.757
> 
> 标签：regex

使用正则表达式我需要从路径中删除最后一个文件夹：

```
Example : C:\Temp\Dir1\

Output : C:\Temp\ 
```

请不要建议我可以使用 c# 或其他编程语言来执行此操作。我真的需要正则表达式。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T09:43:26.790

代替

```
[^\\]+\\?$ 
```

凭什么。这也适用于`C:\Temp\Dir1`（无尾随反斜杠）之类的路径。驱动器的根目录失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:06:43.333

另一个解决方案是与小组合作：

```
\w\:(\\\w+)*(\\\w+\\) 
```

用空字符串替换第二组。

[演示](http://regexr.com?31d6c)

但是，我承认，乔伊的解决方案要……苗条得多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T01:23:46.843

对于mac文件路径`oldPath.replace(/[^\/]+\/?$/,'')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-17T20:33:14.327

在java中，这对我来说是这样的：

```
String filepath = "C:\Temp\Dir1\"   
filePath = filePath.replaceAll("[^\\\\]+$", ""); 
```

输出：C:\Temp\

要删除尾部反斜杠，请执行以下操作：

```
String filepath = "C:\Temp\Dir1\"   
filePath = filePath.replaceAll("[^\\\\]+$", "").replaceAll("[\\\\]?$", ""); 
```

输出：C:\Temp

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-18T15:11:53.113

[^\\\/]+[\\\/]?$

上面将匹配正斜杠和反斜杠路径的最后一个目录：

Windows 样式：
C:\Users\ **vscheidegger**
C:\Users\ **vscheidegger\**

Linux 风格：
/mnt/media/ **vscheidegger**
/mnt/media/ **vscheidegger/**

# php - 在 MySQL 中，如何将此字符串转换为日期？

> ID：11259473
> 
> 赞同：0
> 
> 时间：2012-06-29T09:40:40.557
> 
> 标签：php, mysql

我正在创建一个带有 php 前端的 mysql 数据库。它将使用的数据是从另一个更大的数据库中提取的，并包含一个日期/时间字段，如下所示 - 20120301073136 - 记录事件发生的时间。

我知道这可能是 UNIX 时间戳？没有把握。

我想在我的 PHP 网页的表格中将此字段显示为可读的日期和时间 -

即类似 01-Mar-2012 07:31:36 或类似的东西

我应该尝试用 SQL 命令转换它还是让 PHP 格式化它？而且，这样做的代码是什么？

顺便说一句，重要的是我可以将数据（在 SQL 和 PHP 表中）排序为日期顺序 - 即按照这些事件发生的顺序。

提前感谢您的帮助 - 我已经在这里学到了很多

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:43:18.737

您可以`datetime`直接在 SQL 查询中将其转换为 a。例子：

```
select cast(20120301073136 as datetime) 
```

您也可以订购它而无需转换它，因为它是格式中的数字 `YYYYMMDDHHmmss`

```
select * from yourTable
order by yourDateTimeField 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:44:30.827

您应该使用 MYSQL DATE 函数。在提出简单问题之前检查文档。 [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

您还可以使用 ORDER BY 直接在查询中对日期进行排序。

# c++ - 将 char 数组中的数字存储到 VC++ 中的 INTEGER 变量中。

> ID：11259474
> 
> 赞同：0
> 
> 时间：2012-06-29T09:40:47.807
> 
> 标签：c++, c, visual-c++, char

我的场景如下：（C++）

在 char a[10] 中，数组 a[] 具有元素（数字），例如 '1'、'2'、'3' 等......

说 a[0] = '1';
a[1] = '2';
a[2] = '3';

现在 a[] 存储 3 个字符“1”、“2”和“3”。**我想将其存储为 123（整数 123）的 int。**

如何在 C++ 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:44:21.117

`a[3] = 0`是必须的。如果您的字符串不是以空值结尾的，则大多数方法都不起作用。

之后就很简单了`number = atoi(a)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T09:44:11.537

取决于 a[2] 之后的值是什么......

```
int total = 0;

for ( int i = 0; i < a[i]; i++ ) {
    total *= 10;
    total += a[i] - '0';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:50:10.143

```
#include <iostream>

int array2int(char a[]) {
  int i = 0;
  int value = 0;
  while (a[i]) {
    value *= 10; 
    value += a[i] - '0';
    i++;
  }
  return value;
};

int main(void) {
  char a[10] = "123";
  int value = array2int(a);
  std::cout << value << std::endl;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T11:37:37.183

```
#include <iostream>
int ca2int(char *array, size_t len){
    int v = 0;
    while(len--)
        v = 10*v + *array++ - '0';
    return v;
}

int main(){
    char a[10];
    a[0] = '1';
    a[1] = '2';
    a[2] = '3';

    std::cout << ca2int(a, 3);
} 
```

# javascript - File upload not not working on upload button

> ID：11259476
> 
> 赞同：0
> 
> 时间：2012-06-29T09:40:52.477
> 
> 标签：javascript, jquery, asp.net, jquery-plugins

I am trying to upload file on server using jquery and web handler. All works fine but issue is when i click on file upload control it pops up a file selection window, after i select file it directly started file uploading. My issue is i want upload file on different control's click event(i.e. On button click event).

Here is my code which i am currently working.

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="jquery-1.2.6.min.js" type="text/javascript"></script>
    <script src="jquery.ajax_upload.0.6.min.js" type="text/javascript"></script>
    <link href="default.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" language="javascript">
        $(document).ready(function () {

            var button = $('#fuAttachment'), interval;
            $.ajax_upload(button, {
                action: 'FileUploader.ashx',
                name: 'myfile',
                onSubmit: function (file, ext) {
                    if (ext == "jpg") {
                        return true;
                    }
                    else {
                        alert("Invalid File Type.");
                        return false;
                    }
                    //  this.disable();
                },
                onComplete: function (file, response) {
                    window.clearInterval(interval);
                    $('<li></li>').appendTo('.files').text(file);
                }
            });
        });
    </script>
</head>
<body>
<form>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td class="web_dialog_title">
                    <asp:Label ID="Label2" Text="Add Attachment" runat="server"></asp:Label>
                </td>
                <td class="web_dialog_title align_right">

                </td>
            </tr>
            <tr>
                <td colspan="2">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblAtchTitle" runat="server" Text="Attachment :"></asp:Label>
                </td>
                <td>
                    <input type="file" id="fuAttachment" runat="server" />
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblAtchType" runat="server" Text="Type :"></asp:Label>
                </td>
                <td>
                    <select id="ddlAtchType" runat="server">
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="lblAttachDesc" runat="server" Text="Description :"></asp:Label>
                </td>
                <td>
                    <textarea id="txtAttachDesc" runat="server" cols="13" rows="4"></textarea>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    <table border="0" width="100%" cellpadding="0" cellspacing="0">
                        <tr>
                            <td>
                                <asp:Button ID="btnAddAttach" runat="server" Text="Attach" />
                                <input type="submit" runat="server" name="Submit" value="Submit" id="btnSub" />
                            </td>
                            <td>
                                <input type="reset" value="Reset" id="btnAttachReset" name="Reset" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <ol class="files">
                    </ol>
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

I want my upload process should start on `btnSub` click event. If anyone knows than please help me.........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:29:37.673

你可以使用jquery uploadify

[示例代码链接——下载](http://midnightprogrammer.net/post/Upload-Files-In-RAZOR-With-jQuery-Uploadify-Plugin.aspx)

# c# - 如何让 ToolTip 绑定与 ComboBox 一起使用？

> ID：11259479
> 
> 赞同：16
> 
> 时间：2012-06-29T09:41:06.207
> 
> 标签：c#, wpf, xaml, tooltip

目前我有一个 ComboBox 定义为：

```
<ComboBox Name="comboItems" ItemsSource="{Binding Path=EnumDataItems}"
            DisplayMemberPath="Description" 
            ToolTip="{Binding Path=ToolTip}" // never displays the value
            SelectedValuePath="Value" SelectedValue="{Binding Path=Value}" /> 
```

除工具提示外，一切正常。它应该绑定到的属性；`ToolTip` *确实*包含一个值。我确信这一点，因为当我执行以下操作时，我看到一个结果确认 ToolTip 包含一个值：

```
<ComboBox Name="comboItems" ItemsSource="{Binding Path=EnumDataItems}" 
            DisplayMemberPath="ToolTip" // I replaced 'Description' with 'ToolTip'
            ToolTip="{Binding Path=ToolTip}"
            SelectedValuePath="Value" SelectedValue="{Binding Path=Value}"/> 
```

替换`Description`为`ToolTip`我可以看到 ToolTip 的值出现在屏幕上。然而

```
ToolTip="{Binding Path=ToolTip}" 
```

还是不行。如果我尝试按如下方式显示 ToolTip：

```
ToolTip="ToolTip" 
```

它只显示单词“工具提示”。

我怎样才能`ToolTip`显示一个值？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-29T09:51:36.480

如果 a `ToolTip`for each`ComboBoxItem`是你想要的，你可以这样做：

```
<ComboBox.ItemContainerStyle>
    <Style>
        <Setter Property="Control.ToolTip" Value="{Binding ToolTip}" />
    </Style>
</ComboBox.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-29T09:52:42.673

`ToolTip="{Binding Path=ToolTip}"`绑定到`ToolTip`当前组合框的属性`DataContext`（包含`EnumDataItems`属性的对象）。假设您要设置`ToolTip`为`ComboBox`当前选定项目的`ToolTip`属性值，这应该可以解决问题：

```
ToolTip="{Binding Path=SelectedItem.ToolTip, RelativeSource={RelativeSource Self}}" 
```

# android - Actionbar how to change view on item click

> ID：11259482
> 
> 赞同：3
> 
> 时间：2012-06-29T09:41:17.843
> 
> 标签：android, adapter, android-actionbar, click

How can I change view of item in drop down navigation list in action bar on click? After click, I want that displayed item shows another view (in layout it is set as invisible). I've got `onNavigationItemSelected` method from `ActionBar.OnNavigationListener` but it does not pass view of the item clicked but just position of item in navigation spinner. Or in other words, why can I not get reference to selected view from actionbar spinner? (like I can get view with `listview onItemClick` from `OnItemClickListener()`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T17:33:05.770

`ActionBar`的`Spinner`资源 id 是：`android:id/action_bar_spinner`

获取`Spinner`资源id：

```
int resId = getResources().getIdentifier("action_bar_spinner", "id", "android"); 
```

`Spinner`使用资源 id获取对小部件的引用：

```
final Spinner spinner = (Spinner) getWindow().getDecorView().findViewById(resId); 
```

现在您将能够访问所选视图：

```
CheckedTextView v = (CheckedTextView) spinner.getSelectedView(); 
```

您可以立即在以下位置修改所选视图`OnNavigationListener`：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getFragmentManager().beginTransaction()
    .replace(android.R.id.content, new MyFragment())
    .commit();

    SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this,
            R.array.action_list, android.R.layout.simple_spinner_dropdown_item);

    getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

    int resId = getResources().getIdentifier("action_bar_spinner", "id", "android");
    final Spinner spinner = (Spinner) getWindow().getDecorView().findViewById(resId);

    this.getActionBar().setListNavigationCallbacks(mSpinnerAdapter, new ActionBar.OnNavigationListener() {

        @Override
        public boolean onNavigationItemSelected(int itemPosition,
                long itemId) {
            CheckedTextView v = (CheckedTextView) spinner.getSelectedView();
            // Modify selected view.
            return true;
        }

    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:36:28.260

我只是想弄清楚这一点并设法追踪它。

用于[`setSelectedNavigationItem`](http://developer.android.com/reference/android/app/ActionBar.html#setSelectedNavigationItem%28int%29)执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:14:19.200

使用您的 navigationListener，您可以尝试以下操作：

```
OnNavigationListener navigationListener = new OnNavigationListener() {

  @Override
  public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    View convertView = null;
    View view = adapter.getView(itemPosition, convertView, null);
    TextView myTextView = (TextView) view
        .findViewById(R.id.my_textView);
    Toast.makeText(getBaseContext(), myTextView.getText(),
        Toast.LENGTH_LONG).show();

    return true;
  } 
```

然后，您将通过适配器检索该项目。我现在唯一的问题是修改检索到的参考内容。我似乎无法让它工作。

我希望它有帮助

# c# - 我在实体框架中找不到带有 lambda 表达式的“包含”方法？

> ID：11259483
> 
> 赞同：39
> 
> 时间：2012-06-29T09:41:20.720
> 
> 标签：c#, .net, entity-framework

我正在使用实体框架，但在此示例中找不到包含方法：

```
using(ArticleExtractorEntities db=new ArticleExtractorEntities())  
{
    Preference pref= db.Preferences.Include( 
```

在这里，我只找到带有参数（字符串路径）的函数，我没有找到任何其他重载，那么如何将 Include 与 lambda 表达式一起使用？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-29T09:42:19.660

它不在 System.Linq 中。添加

```
using System.Data.Entity 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-12-07T21:11:53.587

更新。对于那些寻找如何使用 .Include() 扩展您的 linq 查询的人

不再是：

```
using System.Data.Entity; 
```

使用 netcoreapp1.0 它是：

```
using Microsoft.EntityFrameworkCore; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:44:32.797

您可以[按照此博客文章中所示](http://msmvps.com/blogs/matthieu/archive/2008/06/06/entity-framework-include-with-func-next.aspx)实现它：

```
public static class ObjectQueryExtension
{
    public static ObjectQuery<T> Include<T>(this ObjectQuery<T> mainQuery, Expression<Func<T, object>> subSelector)
    {
        return mainQuery.Include(FuncToString(subSelector.Body));
    }
    private static string FuncToString(Expression selector)
    {
        switch (selector.NodeType)
        {
            case ExpressionType.MemberAccess:
                return ((selector as MemberExpression).Member as Reflection.PropertyInfo).Name;
            case ExpressionType.Call:
                var method = selector as MethodCallExpression;
                return FuncToString(method.Arguments[0]) + "." + FuncToString(method.Arguments[1]);
            case ExpressionType.Quote:
                return FuncToString(((selector as UnaryExpression).Operand as LambdaExpression).Body);
        }
        throw new InvalidOperationException();
    }
    public static K Include<T, K>(this EntityCollection<T> mainQuery, Expression<Func<T, object>> subSelector)
        where T : EntityObject, IEntityWithRelationships
        where K : class
    {
        return null;
    }
    public static K Include<T, K>(this T mainQuery, Expression<Func<T, object>> subSelector)
        where T : EntityObject
        where K : class
    {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:46:03.220

请看以下文章：

[http://www.thomaslevesque.com/2010/10/03/entity-framework-using-include-with-lambda-expressions/](http://www.thomaslevesque.com/2010/10/03/entity-framework-using-include-with-lambda-expressions/)

[http://msmvps.com/blogs/matthieu/archive/2008/06/06/entity-framework-include-with-func-next.aspx](http://msmvps.com/blogs/matthieu/archive/2008/06/06/entity-framework-include-with-func-next.aspx)

# delphi - 禁用/停用具有已发布属性的自定义组件

> ID：11259487
> 
> 赞同：1
> 
> 时间：2012-06-29T09:41:34.587
> 
> 标签：delphi, constructor, delphi-7, custom-component

我正在开发一个自定义组件，`Delphi -7`其中我有一些`published`属性

```
 private
     { Private declarations }
     FFolderzip  ,Fimagezip,Ftextzip,FActivatezipComp   : Boolean;
     FMessagebo : string;
   published
    { Published declarations }
    {component Properties}
    {#1.Folder Zip}
    property ZipFolder : Boolean read FFolderzip  write FFolderzip  default False;
    {#2.Send imagezip ?}
    property ZipImage : Boolean read Fimagezip   write Fimagezip   default False;
    {#3.text files}
    property ZipText : Boolean read Ftextzip   write Ftextzip   default False;
    {#4.message}
    property ZipMessage: String read FMessagebo write FMessagebo ; 
    {#5.Activate }
    property ActivateZipper: Boolean read FActivatezipComp write  FActivatezipComp Default false;
   end; 
```

当用户将组件放在应用程序上时，`ActivateZipper`属性会为用户提供一个选项来激活/启用或停用/禁用组件执行。该组件创建一个文件，所以在构造函数中我有这个，`CreateATextFileProc`将在应用程序文件夹中创建文件。所以如果我检查构造函数`ActivateZipper`是真还是假..

我有一个`constructor`

```
 constructor TcomProj.Create(aOwner: TComponent);
     begin
       inherited;
       if ActivateZipper then CreateATextFileProc;
     end; 
```

`ActivateZipper`即使我在对象检查器中将其设置为 true，它也始终为 false 。如何禁止组件使用已发布的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T16:33:38.737

构造函数为时过早。设计时属性值尚未流入组件。您需要等到组件的`Loaded()`方法被调用，然后才能对这些值进行操作。如果您在运行时动态创建组件，您还需要一个属性设置器，因为没有 DFM 值，因此`Loaded()`不会被调用。

```
type
  TcomProj = class(TComponent)
  private 
    ...
    procedure SetActivateZipper(Value: Boolean);
  protected
    procedure Loaded; override;
  published 
    property ActivateZipper: Boolean read FActivatezipComp write SetActivateZipper; 
  end; 

procedure TcomProj.SetActivateZipper(Value: Boolean);
begin
  if FActivatezipComp <> Value then
  begin
    FActivatezipComp := Value;
    if ActivateZipper and ((ComponentState * [csDesigning, csLoading, csLoading]) = []) then
      CreateATextFileProc; 
  end;
end;

procedure TcomProj.Loaded;
begin
  inherited;
  if ActivateZipper then CreateATextFileProc; 
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:12:50.097

> `ActivateZipper`即使我在对象检查器中将其设置为 True，它也始终为 False。

您的激活码现在放置在构造函数中。有几件事：

*   在构造函数中，所有私有字段都被初始化为零（0、''、null、nil，取决于类型）。如果您没有另外设置，则一旦创建组件，这些字段将保持为零。
*   当您使用对象检查器更改属性时，组件已经创建。
*   你的代码永远不会运行。
*   如果您确实想在创建时对其进行初始化，则还要更改默认存储说明符。

您需要的是一个*属性设置器*，只要通过对象检查器或代码更改属性，就会调用该设置器：

```
 private
    procedure SetZipperActive(Value: Boolean);
  published
    property ZipperActive: Boolean read FZipperActive write SetZipperActive default False;

procedure TcomProj.SetZipperActive(Value: Boolean);
begin
  if FZipperActive <> Value then
  begin
    FZipperActive := Value;
    if FZipperActive then
      CreateATextFile
    else
      ...
end; 
```

您可能会考虑在设计时关闭此功能，因为您可能只希望在运行时进行实际压缩。然后测试`csDesigning`标志[`ComponentState`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponentState)：

```
procedure TcomProj.SetZipperActive(Value: Boolean);
begin
  if FZipperActive <> Value then
  begin
    FZipperActive := Value;
    if csDesigning in ComponentState then
      if FZipperActive then
        CreateATextFile
      else
        ...
end; 
```

# apache - No ErrorDocument 500 redirect when using with mod_rewrite

> ID：11259488
> 
> 赞同：1
> 
> 时间：2012-06-29T09:41:37.113
> 
> 标签：apache, mod-rewrite, wsgi, web.py, errordocument

I'm trying to make my own ErrorDocument 500 page while using web.py framework.

The problem is that ErrorDocument directive is not working. I have builtin error message instead of my custom one. And also have "Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request"

If I change

```
ErrorDocument 500 /cgi-bin/error500.py 
```

to

```
ErrorDocument 500 "Blast! It's 500 error 
```

it works fine.

Also if I set `RewriteEngine off` ErrorDocument redirect works correctly.

Thank you for your suggestions.

.htaccess:

```
<Files code.py>
    SetHandler wsgi-script
    Options ExecCGI FollowSymLinks
</Files>

<IfModule mod_rewrite.c>      
  RewriteEngine on  
  RewriteBase /
  RewriteCond %{REQUEST_URI} !^(/.*)+code.py/
  RewriteRule ^(.*)$ code.py/$1 [PT]
</IfModule>

ErrorDocument 500 /cgi-bin/error500.py 
```

# android - 3 different XML parse using single SAX parser handler

> ID：11259492
> 
> 赞同：0
> 
> 时间：2012-06-29T09:41:55.197
> 
> 标签：android

How to parse 3 different xml file.XML files are as follow

```
<?xml version="1.0" encoding="UTF-8"?>
<login>
    <item>
        <user_id>id</user_id>
        <user_name>Piron</user_name>
        <user_status>false</user_status>
        </item>
    </login>
<?xml version="1.0" encoding="UTF-8"?>
<logout>
    <logout_item>
        <user_id>id</user_id>
        <user_name>kumar</user_name>
        <user_status>true</user_status>
        </logout_item>
    </logout>
<?xml version="1.0" encoding="UTF-8"?>
<registration>
    <registration_item>
        <user_id>id</user_id>
        <user_name>name</user_name>
        <user_status>user already exist</user_status>
        </registration_item>
</registration> 
```

How to parse them using a single SAX Handler(startElement() and endElement()) in android?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:50:37.403

是的，你可以尝试这样的事情：

```
public void startElement(String uri, String localName, String qName,
                         Attributes attributes) throws SAXException {

    currentElement = true;

    if (localName.equals("login") 
        || localName.equals("logout") 
        || localName.equals("registration"))
    {
        /** Start **/
        youList = new YourmodelList();
    } else if(localName.equals("user_id")) {
        youlistList = new YourmodelList();
    } else if(localName.equals("user_name")) {
        youlistList = new YourmodelList();
    } else if (localName.equals("user_status")) {
        youlistList = new YourmodelList();
    } else if (localName.equals("registration")) {
        youlistList = new YourmodelList(); 
    }
} 
```

# java - 转义引号

> ID：11259502
> 
> 赞同：2
> 
> 时间：2012-06-29T09:42:28.367
> 
> 标签：java

我正在尝试将字符串保存到数据库中，我需要引号成为字符串的一部分：

```
String password = "\"foo\""; 
```

我期望数据库中的值是`"foo"`（包括引号）但是斜线也被存储。斜杠是否应该只是一个转义字符而不是在编译时保存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T09:44:49.583

> 然而，斜线也被存储。

不在您发布的字符串中。您发布的字符串中有五个字符：

```
"
F
○
○
"
```

可能是您用来查看的任何内容都显示了转义的引号，因此很明显它们没有分隔字符串。

你可以这样证明：

```
public class ShowString {
    public static final void main(String[] args) {
        String password = "\"foo\"";
        int    index, len;

        for (index = 0, len = password.length(); index < len; ++index) {
            System.out.println("[" + index + "]: " + password.charAt(index));
        }
    }
} 
```

输出：

```
[0]：“
[1]：f
[2]：○
[3]：○
[4]：“
```

# html - CSS Bug with inline ul li in IE7

> ID：11259503
> 
> 赞同：0
> 
> 时间：2012-06-29T09:42:32.443
> 
> 标签：html, css, internet-explorer-7, drop-down-menu

I've got a little issue with a inline menu, bug only appears in ie7\. The only menu li that has another menu underneath it, is not inline with the rest, the rest seem to appear pushed down.

HTML

```
<div id="topnav">
<ul id="jsddm">
<li id="">
<a id="" href="/">Home</a>
</li>
<li id="">
<a href="/about.aspx">About</a>
<ul style="visibility: hidden;">
<li>
<a href="/about/board.aspx">Board</a>
</li>
<li>
<a href="/about/contact.aspx">Contact</a>
</li>
</ul>
</li>
<li>
<a href="/practices.aspx">Practices</a>
</li>
<li>
<a href="/how-we-work.aspx">How we work</a>
</li>
<li>
<a href="/patients.aspx">Patients</a>
</li>
<li>
<a href="/news-links.aspx">News &amp; Links</a>
</li>
<li>
<a href="/link.aspx">Link</a>
</li>
</ul>
</div> 
```

CSS

```
 #jsddm
{   margin: 0;
    padding: 0;
    width: 100%;
}

#jsddm li
{   
    display: inline-block;
    list-style: none;
    font: 12px Tahoma, Arial;
    width: 100px;
    text-align: center;
}

*+html #jsddm li { display:inline }
* html #jsddm li { display:inline }

#jsddm ul li
{   
    display: block;
    font: 12px Tahoma, Arial;
}

#jsddm li ul
{   
    margin: 0 0 0 0;
    padding: 0;
    position: absolute;
    visibility: hidden;
    border-top: 0px solid white;
    *margin: 0 0 0 -50px; /* IE 7 and below */
     /* margin: 0 0 0 -50px\9; IE 8 and below */
}

#jsddm ul li ul li
{           
    font: 12px Tahoma, Arial
}

#jsddm li a
{
    display: block;
    background: #009EE0;
    padding: 0;
    line-height: 28px;
    text-decoration: none;
    border-right: 0px solid white;
    width: 70px;
    color: #EAFFED;
    white-space: nowrap;
    font-weight: bold;
    width: 100%;
}

#jsddm li a:hover
{   background: #1A4473}

#jsddm li ul li
{   
    float: none;
    *margin: -2px 0 0 0;
    *padding:0;
}

+html #jsddm li ul li {  }

#jsddm li ul li a
{
    width: auto;
    background: #009EE0
    font-weight: bold;
}

#jsddm li ul li a:hover
{   background: #0E559C } 
```

It uses a jquery function to display the dropdownmenu but it does'nt effect the static html/css.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:52:18.413

IE7 不支持`inline-block`。尝试浮动其中的元素 - [http://jsfiddle.net/SsDnd/1/](http://jsfiddle.net/SsDnd/1/)

```
#jsddm li
{   
    display: inline-block;
    list-style: none;
    font: 12px Tahoma, Arial;
    width: 100px;
    text-align: center;
    *float: left;
} 
```

# javascript - 在 TreePanel 中设置节点的图标

> ID：11259507
> 
> 赞同：2
> 
> 时间：2012-06-29T09:42:57.660
> 
> 标签：javascript, extjs, window, extjs4

ExtJS 4：

我创建了一个树形面板。我想为其节点设置我自己的图标，所以我为每个节点使用了 iconCls 属性。它的工作。但是当我展开一个节点时，它会返回到其正常的“打开文件夹”图标。

```
var treeObject = {
text: "BANK OF AMERICA 1",
cls: "enterprise",
children: [
    {
        text: "core outputs",
        cls: "businessUnit",
        iconCls: 'abc'
    }
],
iconCls: 'abc',
leaf: "false",
expanded: true,
type: "enterprise"
}
treePanel.setRootNode(treeObject); 
```

请提出一些建议来避免这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:50:45.673

尝试像这样指定您的 css 类，以防止使用 extjs 的默认类覆盖

```
.x-grid-tree-node-expanded .x-tree-icon-parent.abc{
  background: url(abc) x y no-repat !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T08:23:27.203

从 Ext Js 4.0.6 开始，您可以使用`icon`config on`Ext.data.NodeInterface`来设置节点图标 - 只需在模型上定义一个名为“icon”的字段，将其用于您的树存储...

```
Ext.define('ModelForTreeNodes', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'icon', type: 'string', defaultValue: "Images/nodeicon.png" },
        // other fields
    ],
    // other config options
}); 
```

然后您可以通过简单地设置节点上的图标字段来更改图标......就是这样。

```
var node = myTree.getStore().getNodeById(nodeId);
node.set('icon', 'Images/newIcon.png'); 
```

# objective-c - Copy file to App Document folder automatically

> ID：11259508
> 
> 赞同：1
> 
> 时间：2012-06-29T09:42:59.433
> 
> 标签：objective-c, ios, ipad

I want to copy set of files from project resource folder to the app document folder automatically at the time of app first launch. Can I do this. Do I need to do it through the code.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T10:24:36.090

```
BOOL success;
NSError *error;

NSFileManager *fileManager = [NSFileManager defaultManager];

NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Data.txt"];

success = [fileManager fileExistsAtPath:filePath];
if (!success) {     
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"txt"];
    success = [fileManager copyItemAtPath:path toPath:filePath error:&error];

} 
```

在应用程序中确实完成了带有选项的启动

# asp.net-mvc-3 - asp.net mvc3 formauthentication,custom role provider-Jquery auto load tabs not working..

> ID：11259509
> 
> 赞同：1
> 
> 时间：2012-06-29T09:43:12.487
> 
> 标签：asp.net-mvc-3, jquery-ui, asp.net-membership, jquery-tabs, roleprovider

I am creating dynamically loading tabs using jquery Ui tabs in my ASP.NET mvc3 project.

Here i have a product page. The product page contains left menus like Customer,Address,Contact,etc..

Here my process is when i click one my left menus, the tab created dynamically with Grid records.

And,

I'm creating a custom role provider and I set a Authorize attribute specifying a role in my controller and it's working just fine, like this:

[Authorize(Roles="SuperAdmin")] public class SuperAdminController : Controller ...

If one user doens't have access to this controller, And click one of my left menu means, he's redirected to login page. Its also working fine.

The problem is after the user logged in it didn't redirect the proper page in tab content area.

If my problem not understandable means please let me know..

Thanks Advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:52:20.893

如果您仔细检查浏览器中的 URL，您会发现当您通过 Ajax 加载某些内容时，该 URL 并没有改变。这实际上是 Ajax 的重点，您不会加载整个页面，对吗？

现在，由于在您尝试使用 Ajax 加载内容时未保存状态，因此您的重定向 URL 只是您最初加载的页面。这就是为什么您无法返回要加载的选项卡的原因。

# php - 将 reCAPTCHA 响应更改为 alert() 而不是加载新页面

> ID：11259510
> 
> 赞同：2
> 
> 时间：2012-06-29T09:43:13.380
> 
> 标签：php, recaptcha

`alert();`我正在使用 reCAPTCHA，如果 CATPCHA 被错误地填写为而不是加载新页面，我想显示响应。我怎样才能做到这一点？

这是表单操作：

```
<form id="form" method="POST" action="verify.php"> 
```

在 verify.php 文件中使用这个：

```
<?php
  require_once('recaptchalib.php');
  $privatekey = "(my key)";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

  if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  } else {
    // Your code here to handle a successful verification
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:48:48.503

在表单提交上调用您的方法，例如-

```
<form id="form" method="POST" action="verify.php" onsubmit="mymethod()" > 
```

或者使用 jquery，类似的东西——

```
<script>

    $("form").submit(function() {
      if ($("input:first").val() == "correct") {
        $("span").text("Validated...").show();
        return true;
      }
      $("span").text("Not valid!").show().fadeOut(1000);
      return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:47:02.697

您可以为新页面上的警报编写 Javascript。

```
if (!$resp->is_valid) {

  // What happens when the CAPTCHA was entered incorrectly
  echo("<script>alert('The reCAPTCHA wasn't entered correctly. Go back and try it again.');</script">);
  die();

} else {
  // Your code here to handle a successful verification
} 
```

# image - 导入对象的图片以进行绘图？

> ID：11259527
> 
> 赞同：1
> 
> 时间：2012-06-29T09:44:26.337
> 
> 标签：image, matlab, 3d, plot

我正在编写一个程序来模拟追逐者跟随目标的运动。追赶者应该有一个摄像头，并根据目标图像，跟随目标。

现在，我使用 4 个正方形平面点来表示追逐者的相机。因此，为了追逐，我正在更新这 4 个点在 3D 图中的位置以表示追逐者的运动。

我想知道是否可以导入一张实际相机的图片并使用它而不是现在的 4 个点，以达到审美目的？如果是，如何？

我对 MATLAB 不是很熟悉，所以如果您能详细而具体地回答您的问题，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:51:37.160

这是一个简单的示例（基于[此](https://stackoverflow.com/a/3719528/97160)）：

```
%# grayscale image
img = imread('cameraman.tif');

%# x/y/z coords of image corners
[X,Z,Y] = meshgrid([-1 1],[1 -1],0);

%# plot image in 3D space
figure, colormap gray
h = surf(X,Y,Z,img, 'CDataMapping','scaled', ...
    'FaceColor','texturemap', 'EdgeColor','none');
set(gca, 'XLim',[-2 2], 'YLim',[-4 0], 'ZLim',[-2 2], 'Box','on')

%# move image along the Y-dimension
t = linspace(0,-4,20);
for i=1:numel(t)
    set(h, 'YData',t(i)*ones(size(Y)))
    pause(.1)
end 
```

我创建了结果的动画，我什至使用了相机图像:)

![动画](../Images/340c697aa07bc70cf6c11437ba01c2e8.png)

# c# - 将内存块读入数组？

> ID：11259529
> 
> 赞同：0
> 
> 时间：2012-06-29T09:44:29.527
> 
> 标签：c#

我正在使用下面的方法来读取内存中的字节。我想读取彼此非常接近的内存地址中的值。以前，我一直在对内存中的每个字节进行单独调用，并使用 for 循环将结果添加到数组中。这变得非常低效，所以我想修改下面的代码来读取一大块内存，然后尝试对数组进行迭代以提取我想要的字节。我花了一些时间试图解决它，但真的很挣扎。仅供参考，此方法读取指针，然后如果该值是指针，则读取该指针，依此类推，直到到达静态地址，然后读取该地址处的字节值。

```
[DllImport("kernel32", EntryPoint = "ReadProcessMemory")]
private static extern byte ReadProcessMemoryByte(int Handle, int Address, ref byte Value, int Size, ref int BytesRead);

public static byte ReadPointerByte(string EXENAME, int Pointer, int[] Offset)
{
    byte Value = 0;
    checked
    {
        try
        {
            Process[] Proc = Process.GetProcessesByName(EXENAME);
            if (Proc.Length != 0)
            {
                int Bytes = 0;
                int Handle = OpenProcess(PROCESS_ALL_ACCESS, 0, Proc[0].Id);
                if (Handle != 0)
                {
                    foreach (int i in Offset)
                    {
                        ReadProcessMemoryInteger((int)Handle, Pointer, ref Pointer, 4, ref Bytes);
                        Pointer += i;
                    }
                    ReadProcessMemoryByte((int)Handle, Pointer, ref Value, 2, ref Bytes);
                    CloseHandle(Handle);
                }
            }
        }
        catch
        { }
    }
    return Value;
} 
```

到目前为止我所拥有的：

```
 private void label1_Click(object sender, EventArgs e)
    {
        int[] valuesSeperated[200];
        List<byte> PreArray = new List<byte>();
        Process[] test = Process.GetProcessesByName("MyProcess"); //Get process handle 
        int baseAddress = test[0].MainModule.BaseAddress.ToInt32(); //Get base address
        byte ReadX  = MyClass.ReadPointerByte("MyProcess", BaseAddress, new int[] { 0xc, 0x0, 0x2 }); //call memory reading function (including memory offsets)
        PreArray.Add(ReadX);
                byte[] PreArrayToInt = PreArray.ToArray();
                int[] MYConvertedBytes = PreArray ToInt.Select(x => (int)x).ToArray();
                foreach (int i in MYConvertedBytes)
{
valuesSeperated // (don't really know what to do here, if the read was successful I would have a long number at [0], so now need to seperate these as if I had read each one in memory one at a time. 
}

string TestString = MYConvertedBytes[0].ToString();
                label1.Text = TestString;
    } 
```

总结一下：我不知道如何使用上述方法读取更大的内存块（一次说 200 个地址）。我不知道如何最好地从结果数组中提取值以形成一个新数组，该数组现在已分离字节。请询问是否有任何不清楚的地方，我很新，真的很想学习，所以任何提示/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:48:31.437

您的互操作签名在我看来完全错误。

c签名是：

```
BOOL WINAPI ReadProcessMemory(
  __in   HANDLE hProcess,
  __in   LPCVOID lpBaseAddress,
  __out  LPVOID lpBuffer,
  __in   SIZE_T nSize,
  __out  SIZE_T *lpNumberOfBytesRead
); 
```

它应该是这样的：

```
[DllImport("kernel32", EntryPoint = "ReadProcessMemory",SetLastError=true)]
private static extern unsafe bool NativeReadProcessMemory(IntPtr processHandle, IntPtr baseAddress, byte* buffer, IntPtr size, out IntPtr bytesRead);

static unsafe void ReadProcessMemory(IntPtr processHandle, IntPtr baseAddress, byte[] buffer,int start, int size)
{
    fixed(byte* pBuffer=buffer)
    {
        IntPtr bytesRead;
        if(!NativeReadProcessMemory(processHandle, baseAddress, pBuffer+start,(IntPtr)size, out bytesRead))
           throw new Win32Exception(Marshal.GetLastWin32Error());
        if((int)bytesRead!=size)
            throw new Exception("Incomplete read");//User better exception type here
    }
} 
```

# xslt - 从 xslt 中的每个循环中断

> ID：11259532
> 
> 赞同：0
> 
> 时间：2012-06-29T09:44:39.337
> 
> 标签：xslt, for-loop, break

如果不等于 0 或 100，我必须从`for-each`循环中中断。`@PercentOfAmountActive`

这是我的 XML：

```
<SamplePointSet Id="1" StartDate="2012-01-01T04:00:00Z" CalendarId="1" Cyclic="6" ForAttribute="0" ObjectId="0" ProbabilityFunctionId="0" TableNumber="0" TimePeriodId="4" ParentId="1">
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="1" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="2" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="3" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="4" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="5" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="6" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="7" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="8" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="9" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="10" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="100" Sequence="11" SamplePointSetId="1" />
    <SamplePoint NumberOfActiveTimePeriods="30" PercentOfAmountActive="0" Sequence="12" SamplePointSetId="1" />
  </SamplePointSet> 
```

下面是xslt代码

```
<xsl:for-each select=".../CM:SamplePointSet/CM:SamplePoint">
  <xsl:variable name="varActiveTimePeriod" select="./@NumberOfActiveTimePeriods * $varMultiple"/>
  <xsl:variable name="varPercentOfAmountActive" select="./@PercentOfAmountActive"/>

  <!-- . . . some Condition To break if (percent of amount active) not 0 or 100 -->

  <xsl:value-of select="CMXsltExtObject:SetRecurenceRule($varActiveTimePeriod, $varPercentOfAmountActive, $varCalendarFrequency)"/>
</xsl:for-each> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:02:00.810

避免 XSLT 中的 for-each 循环。相反，在可能的情况下，将您的节点应用于模板，使用 XPath 仅针对那些合适的节点。

您可以通过仅将模板应用于这些节点来实现中断效果......

*   其`@PercentOfAmountActive`属性等于 0 或 100
*   其前面的兄弟姐妹都`@PercentOfAmountActive`没有不等于 0 或 100 的属性。

这是一个简化的示例，您可以在[此 XMLPlayground](http://www.xmlplayground.com/AMuPU0)上运行它。

**XML**

```
<root>
    <node attr='0'>hello 1</node>
    <node attr='100'>hello 2</node>
    <node attr='0'>hello 3</node>
    <node attr='100'>hello 4</node>
    <node attr='1'>hello 5</node>
    <node attr='0'>hello 6</node>
    <node attr='100'>hello 7</node>
</root> 
```

**XSLT**

```
<xsl:template match='/'>
    <ul>
        <xsl:apply-templates select='root/node[(@attr = 0 or @attr = 100) and not(preceding-sibling::*[@attr != 0 and @attr != 100])]' />
    </ul>
</xsl:template>

<xsl:template match='node'>
    <li><xsl:value-of select='.' /></li>
</xsl:template> 
```

仅输出前四个节点，模拟一旦我们遇到不合适的节点时的“中断”效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:31:06.093

xsl:for-each 指令不是循环，它是从输入序列到输出序列的映射。您在程序术语中描述为“循环”中的“中断”实际上是说您希望映射仅选择输入序列中第一个属性值不等于 1 或 100 的项目之前的那些项目。

最有效的解决方案可能是使用兄弟递归：

```
<xsl:template match="SamplePointSet">
    <xsl:apply-templates select="SamplePoint[1]"/>
</xsl:template>

<xsl:template match="SamplePoint">
  ... some processing ...
  <xsl:if test="@A = 1 or @A = 100">
    <xsl:apply-templates select="following-sibling::SamplePoint[1]"/>
  </xsl:if>
</xsl:template> 
```

# javascript - 如何将 id-aes256-GCM 与 Node.JS 加密一起使用？“TypeError：DecipherFinal 失败”

> ID：11259534
> 
> 赞同：17
> 
> 时间：2012-06-29T09:44:59.073
> 
> 标签：javascript, security, node.js, cryptography, express

我想使用经过身份验证的加密方案（如 AES-GCM）加密 Node.js 中的一些数据。

如果我运行以下示例代码

```
app.get("/test", function(req,res)  {
  var key = "12345678901234567890123456789012";
  var iv = "123456789012"; 
  var cipher = crypto.createCipheriv("id-aes256-GCM",key.toString("binary"),iv.toString("binary"));
  var decipher = crypto.createDecipheriv("id-aes256-GCM",key.toString("binary"),iv.toString("binary"));

  console.log(decipher.update(cipher.update("bla")));
  console.log(decipher.update(cipher.final()));
  console.log(decipher.final());
}); 
```

我没有得到控制台输出，但出现错误消息“TypeError：DecipherFinal 失败”。如果我使用密码 AES-256-CTR 而不是“id-aes256-GCM”，则此代码可以正常工作并在控制台上打印“bla”。

我究竟做错了什么？

**编辑：**

进一步调查显示， cipher.update("bla") 返回“â”（单个字符...奇怪）并且 cipher.final() 返回一个空字符串。我认为这不可能是正确的密文，至少应该具有明文的大小......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T08:34:14.040

OpenSSL 中的 GCM 模式工作正常。它也已经通过其他实现进行了测试。我知道[PolarSSL SSL 库](https://polarssl.org)有自己的 AES GCM 实现，PolarSSL 可以与 OpenSSL 一起正常工作。

AES 的 GCM 加密模式需要特定的 GCM 相关参数。当前的 NodeJS API 无法将这些值提供给 OpenSSL。因此，调用失败，但没有出现干净的错误。（这更像是一个 OpenSSL 问题而不是 NodeJS 问题）。

（StevenLoomen 在评论中也指出了原因，但我想给大家一个答案）

# c++ - 如何使用 cmake 调试 gcc 代码

> ID：11259538
> 
> 赞同：-1
> 
> 时间：2012-06-29T09:45:12.330
> 
> 标签：c++, gcc, cmake

我有一个使用 gcc(4.1) 开发并使用 CMAKE MakeFiles 编译的 c++ 应用程序。代码很大，调试起来很困难。我不知道如何使用 cmake Utility 逐行调试代码。知道怎么做吗？

提前致谢 ：） 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:55:35.120

CMake 是一个增强 makefile 定义的系统（它是一个创建特定于平台的 makefile 的元系统）。它不是调试器。您可以使用 gdb 进行调试。

为确保您的程序被正确编译以进行调试，请确保传递给 gcc 的标志包括`-O0`，这意味着没有优化，以及`-g`用于调试信息，或者`-ggdb`生成非常适合 gdb 的格式（另请参见[http://gcc.gnu .org/onlinedocs/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)）。

# php - 列出数据库中的表格内容

> ID：11259539
> 
> 赞同：0
> 
> 时间：2012-06-29T09:45:13.250
> 
> 标签：php, mysql, database

编写了一个脚本来打印数据库中存在的所有表的内容......但不幸的是我在某个地方出错了。谁能告诉我错误在哪里？

```
$sql = "SHOW TABLES FROM $dbName";
$result = mysql_query($sql);

if (!$result) {
    echo "DB Error, could not list tables\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

for ($i=1; $i<=5; $i++)
  {

while ($row = mysql_fetch_row($result)) 
{
echo "Table: {$row[0]}\n";
$sql_1 = "SELECT * FROM {$row[0]}";
$result_1 = mysql_query($sql_1);
$row_1 = mysql_fetch_row($result);
echo "$row_1";
}
}

mysql_free_result($result);

?> 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:52:34.477

首先，你不需要

```
for ($i=1; $i<=5; $i++) 
```

此外， $row_1 是一个数组，所以要打印它使用类似

```
print_r($row_1); 
```

而且可能不是表中唯一的行，所以使用像这样的构造

```
while ($row = mysql_fetch_row($result)) 
{
echo "Table: {$row[0]}\n";
$sql_1 = "SELECT * FROM {$row[0]}";
$result_1 = mysql_query($sql_1);
while ($row_1 = mysql_fetch_row($result_1/*There was also an error*/)) 
   print_r($row_1); /*Print_r or other function to print an array*/
} 
```

# c# - 在 C# 中像地图一样加载我的本地图像，包括平铺加载、缩放、定义简单的覆盖对象，例如图钉

> ID：11259540
> 
> 赞同：0
> 
> 时间：2012-06-29T09:45:14.667
> 
> 标签：c#, .net, winforms, maps

我想以图像格式（bmp 或 png 或 jpg 或任何图片格式）将我自己的地图加载到 winform。它应该具有缩放功能，我想在多个屏幕上显示它（例如：扩展监视器）

我的问题的第二部分是关于放置覆盖对象（可能只是可点击的图像），如谷歌地图图钉。

如果需要任何其他信息，请在评论中询问

Tnx 亲爱的专家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:44:42.307

在网上搜索“bing地图瓦片系统”

查看网站[http://msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

这就是 BING 和 Google 地图的实施方式，无疑是最佳实践，同时搜索 Bing Map Tile Server，Microsoft 发布了创建您自己的切片服务器的指南，这些是在您的本地服务器上使用来自 Bing Map 的图像的指南我想你会有自己的形象......

# java - Java：替换字符串中的字符

> ID：11259549
> 
> 赞同：0
> 
> 时间：2012-06-29T09:45:47.790
> 
> 标签：java, string

我有一个`String`表示时间值并以以下格式存储的：

```
1:31:25 
```

我想替换冒号并将格式更改为：

```
1h 31m 25s 
```

Java 中的什么函数可以让我用`'h '`and替换前两个冒号`'m '`，用`'s'`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T09:51:48.347

你可以这样做：

```
String[] s = myString.split(":");
String.format("%sh %sm %ss", s); 
```

甚至紧凑！

```
String.format("%sh %sm %ss", myString.split(":")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T09:47:30.803

重复使用[String.replaceFirst()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)方法可以帮助您。

只需将您的第一个 ':' 替换为 'h'，然后再次申请 'm' 等。

还有其他选项，根据您的情况，可能更合适/更强大等。

[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)在这里可能很有用，可以帮助您解析/拆分这样的字符串。

或者考虑到您正在解析/输出时间，可能还值得一看[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)及其解析/输出日期/时间组合的能力。

事实上，如果您将该日期存储为一个字符串，您可能需要修改该决定。将其存储为日期对象（任何变体）更安全，可以保护您免受无效值的影响，并允许您对这些值执行算术等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T09:49:16.807

```
String time = "1:31:25";
String formattedTime = time.replaceFirst(":","h ").replaceFirst(":","m ").concat("s"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T09:49:27.130

```
String input = "1:31:25";
String[] tokens = input.split(":");
String output = tokens[0] + "h " + tokens[1] + "m " + tokens[2] + "s"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T09:50:42.840

您可以使用正则表达式和替换：

```
 String input = "1:31:25";
    String expr = "(\\d+):(\\d+):(\\d+)";
    String substitute = "$1h $2m $3s";
    String output = input.replaceAll(expr, substitute); 
```

另一种方法是通过 Date 解析和输出字符串：

```
 DateFormat parseFmt = new SimpleDateFormat("HH:mm:ss");
    DateFormat displayFmt = new SimpleDateFormat("H'h' mm\'m' ss's'");
    Date d = parseFmt.parse(input);
    output = displayFmt.format(d); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T10:03:20.810

```
String[] timeStr = "1:31:25".split(":");
StringBuffer timeStrBuf = new StringBuffer();
timeStrBuf.append(timeStr[0]);
timeStrBuf.append("h ");
timeStrBuf.append(timeStr[1]);
timeStrBuf.append("m ");
timeStrBuf.append(timeStr[2]);
timeStrBuf.append("s"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T09:53:21.513

使用**拆分（）**

```
String s = "1:31:25";
String[] temp = s.split(":");
System.out.println(s[0]+"h"+" "+s[1]+"m"+" "+s[2]+"s"); 
```

# jquery - 通用页脚不显示在 second.html 中

> ID：11259552
> 
> 赞同：0
> 
> 时间：2012-06-29T09:45:50.893
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

嗨，我有一个单独的页脚页面作为 footer.html 并且我想在所有其他 html 文件中使用它，但它仅显示在 index.html（我在 phonegap 项目中的应用程序的主文件或起始页）中，而在其他页面不显示。我的 footer.html 是：

```
 <!DOCTYPE html>
   <html>
   <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="docsdemos-style-override.css" />
<script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>
<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" charset="utf-8" src="js/main.js"></script>
<script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

  </head> 

    <body>

<div data-role="navbar" data-iconpos="top">
    <ul>
        <li><a class="ui-btn-active" href="#page1" data-theme="a"
        data-icon="home"> Home </a></li>
        <li><a href="#page3" data-theme="a" data-icon="plus"> Feeds </a>
        </li>
        <li><a href="#page7" data-theme="a" data-icon="grid"> Gadgets
        </a></li>
        <li><a href="#page9" data-theme="a" data-icon="info"> Profile
        </a></li>
        <li><a href="#page14" data-theme="a" data-icon="gear">
        Settings </a></li>
    </ul>
</div>
   </body>
    </html> 
```

我的 index.html 是：

```
<!DOCTYPE html>
 <html>
 <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery Mobile: Demos and Documentation</title>

<link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="docsdemos-style-override.css" />
<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
<!-- Uncomment following line to access PhoneGap APIs (not necessary to use PhoneGap to package web app) -->
<!-- <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>-->

<script type="text/javascript">
    $('[data-role=page]').live('pageshow', function (event, ui)
    {
        $("#" + event.target.id).find("[data-role=footer]").load("footer.html", function()
        {
                $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });
 </script>

 </head> 
 <body> 
  <div data-role="page" id="jqm-home" class="type-home">
<div data-role="content">

    <div class="content-secondary"> 

        <ul data-role="listview" data-inset="true" data-theme="c"      data-dividertheme="f">
            <li data-role="list-divider">Overview</li>
            <li><a href="second.html" >First</a></li>
            <li><a href="#">Features</a></li>
            <li><a href="#">Accessibility</a></li>
            <li><a href="#">Supported platforms</a></li>
        </ul>

    </div><!--/content-primary-->   

</div>

<div data-role="footer" data-theme="d" data-position="fixed">
</div>  

 </div>
 </body>
 </html> 
```

而 second.html 为：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery Mobile: Demos and Documentation</title>

<link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />
<link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
<link rel="stylesheet" href="docsdemos-style-override.css" />
<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
<!-- Uncomment following line to access PhoneGap APIs (not necessary to use PhoneGap to     package web app) -->
<!-- <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>-->

<script type="text/javascript">
    $('[data-role=page]').live('pageshow', function (event, ui)
    {
        $("#" + event.target.id).find("[data-role=footer]").load("footer.html", function()
        {
                $("#" + event.target.id).find("[data-role=navbar]").navbar();
        });
    });
 </script>

</head> 
 <body> 
 <div data-role="page" id="jqm-home" class="type-home">
<div data-role="content">

    <div class="content-secondary"> 

        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f">
            <li data-role="list-divider">2nd page</li>
            <li><a href="index.html" >Second</a></li>
            <li><a href="#">Features</a></li>
            <li><a href="#">Accessibility</a></li>
            <li><a href="#">Supported platforms</a></li>
        </ul>

    </div><!--/content-primary-->   

</div>

<div data-role="footer" data-theme="d" data-position="fixed">
</div>  

 </div>
 </body>
 </html> 
```

这里在 second.html 页脚不显示。当我单击第一个列表控件时，还有一个查询转到 second.html 文件，但有时它不去，有时只出现黑屏。为什么会这样？

提前致谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:03:27.907

默认情况下，jQuery Mobile 使用 ajax 来加载页面。因此，在您的情况下，当您引用`second.html`它时，它将通过 ajax 加载`page`div 并注入当前 DOM，因此在该 html 页面上定义的任何 javascript 都不会执行。

在你的 index.html 中试试这个

```
<li><a href="second.html" rel="external">First</a></li> 
```

或者

```
<li><a href="second.html" data-ajax="false">First</a></li> 
```

这样它将重新加载整个`second.html`页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:55:48.787

second.html 文件代码中会有一些 HTML 验证问题，这就是它不显示页脚的原因

# mongodb - 使用 $near 时的 Mongodb 地理空间索引错误

> ID：11259553
> 
> 赞同：0
> 
> 时间：2012-06-29T09:45:51.890
> 
> 标签：mongodb, geospatial

尝试使用 $near 而不是 geoNear 时收到错误消息。该错误没有给出任何理由：

{$err: "使用 geoNear 命令而不是 $near 查询", "code": 13501}

如果我使用 geoNear 代替它，但我想知道为什么 $near 不...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:45:52.263

显然分片是问题所在：

“$near 目前不适用于分片。有一项改进可将其转换为服务器上的 geoNear。”

[https://groups.google.com/forum/#!msg/mongodb-user/N8lZHRg1GY4/tXYQWy_s6cQJ](https://groups.google.com/forum/#!msg/mongodb-user/N8lZHRg1GY4/tXYQWy_s6cQJ)

# ruby-on-rails-3 - Rails 3 从远程使用 javascript 渲染部分：真正的调用

> ID：11259557
> 
> 赞同：0
> 
> 时间：2012-06-29T09:46:00.143
> 
> 标签：ruby-on-rails-3, gmaps4rails

`remote: true`我在我的 Rails 3 应用程序控制器中有一个调用`HotelsController`，它执行`show_map`操作。很简单。

```
<%= link_to "Map", show_hotel_map_path(@hotel.id), remote: true %>
<div id="hotel_map"></div> 
```

`show_hotel_map`动作很基本

```
def show_hotel_map
  @hotel = Hotel.find(params[:id])
  respond_to do |format|
    format.html
    format.js
  end
end 
```

`show_hotel_map.js.erb`旨在使用渲染的`map`Google Maps 地图在 JQuery-UI 对话框中渲染部分内容

```
$("#hotel_map").dialog({
  autoOpen: true,
  height: 'auto',
  width: 'auto',
  modal: true,
  closeOnEscape: true,
  position: 'center',
  resizable: false,
  title: "Map",
  open: function(){
      $("#hotel_map").html("<%= escape_javascript(render partial: "map") %>")
  }
}); 
```

`_map.html.erb`partial 什么都不做，只执行`render_map`助手

```
<%= render_map %> 
```

`render_map`助手用`Gmaps4Rails`gem渲染地图来完成所有工作

```
module HotelsHelper

  def render_map
    if @hotel.address.latitude && @hotel.address.longitude
      map = @hotel.address.to_gmaps4rails
    else
      geo = Gmaps4rails.geocode("#{@hotel.continent.name}, #{@hotel.country.name}, #{@hotel.location.name}")[0]
      map = [{lat: geo[:lat], lng: geo[:lng]}].to_json
    end
    gmaps(:markers => { :data => map, :options => { :draggable => true } })
  end
end 
```

问题是`Gmaps4Rails`gem 为正确的谷歌地图处理渲染了一些 javascript，但显然这个 javascript 被视图`escape_javascript`调用 截断了`show_map.js.erb`。因此，当我单击`"Map"`链接时，正在呈现 JQuery-UI 对话框，但它没有任何有效负载，因为没有执行 Javascript。`render_map`helper 本身就可以完美地工作，所以我想这不是`Gmaps4Rails`gem 的问题。是否有任何解决方法，以便我可以执行该javascript？我能想到一些黑客，但也许有更多的铁路方式来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:14:16.177

好的，它可能关心的人，我使用 Gmaps4Rails wiki 中描述的 UJS 技术解决了它

[https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS)

它不是很干燥，但我想没有太多其他选择。

# servlets - 如何在 web.xml 中配置 url 映射来限制访问？

> ID：11259563
> 
> 赞同：5
> 
> 时间：2012-06-29T09:46:13.590
> 
> 标签：servlets, web.xml

我在以下结构中只有几页。

```
--Project
  |---WebContect
      |----Admin/ *
      |----Author/ * 
      |----Readonly/ * 
      |----Index.jsp 
```

我想限制用户访问和下`Admin`的页面。我不希望任何人访问这些页面。如果有人试图这样做，应该被重定向到.`Author``Readonly``index.jsp`

我想到的最简单的解决方案是使用`Filter`，但我正在尝试找出是否可以使用`web.xml`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T13:06:01.067

如果您希望*没有人*能够直接访问这些页面，只需将它们放在`/WEB-INF`文件夹中即可。

```
Project
 `-- WebContect
      |-- WEB-INF
      |    |-- Admin
      |    |-- Author
      |    `-- Readonly
      `-- Index.jsp 
```

This way the pages are not publicly accessible, but only by a servlet which performs a forward. When the enduser attempts to access it directly, all he will get is a HTTP 404 error.

An alternative is configuring a role-less `<security-constraint>`.

```
<security-constraint>
    <display-name>Restrict direct access to certain folders</display-name>
    <web-resource-collection>
        <web-resource-name>Restricted folders</web-resource-name>
        <url-pattern>/Admin/*</url-pattern>
        <url-pattern>/Author/*</url-pattern>
        <url-pattern>/Readonly/*</url-pattern>
    </web-resource-collection>
    <auth-constraint />
</security-constraint> 
```

When the enduser attempts to access them, all he will get is a HTTP 403 error.

Either way, it isn't possible to redirect the enduser to `index.jsp` this way. Only a `Filter` can do that. You *could* configure the `index.jsp` as error page location for 404 or 403

```
<error-page>
    <error-code>404</error-code>
    <location>/index.jsp</location>
</error-page> 
```

But this would cover *all* 404's (or 403's), not sure if that is what you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:53:17.067

你试过这个吗？（网址映射示例）

```
<security-constraint>   
                <web-resource-collection>   
                        <web-resource-name>Protected Area</web-resource-name>   
                        <url-pattern>/*</url-pattern>   
                </web-resource-collection>   

                <auth-constraint>   
<--! These are the groups in AD -->   
                        <role-name>Engineering</role-name>   
                        <role-name>Migration Expert</role-name>   
                        <role-name>Developers</role-name>   

                </auth-constraint>   
        </security-constraint>   

  <security-constraint>   
   <web-resource-collection>   
      <url-pattern>/update/*</url-pattern>   
   </web-resource-collection>   
  </security-constraint>   

        <login-config>   
                <auth-method>BASIC</auth-method>   
                <realm-name>Services Portal</realm-name>   
        </login-config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:27:20.873

if you want to grand access to pages/folders by role permission you have to have a **security-constraint** in your web-xml file

```
 <security-constraint>
    <web-resource-collection>
      <web-resource-name>DESC_OF_FOLDER</web-resource-name>
      <url-pattern>/users/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>REGISTERED_USER_ROLE</role-name>
    </auth-constraint>
  </security-constraint> 
```

The role can be acquired by this code if you are using standard Jaas authentication

```
 if ((request.getUserPrincipal().getName()) != null) {
            String userName = request.getUserPrincipal().getName().trim();
            .....

            if (request.isUserInRole("REGISTERED_USER_ROLE")) {
                .....
            } 
         } 
```

Hope this helps

**UPDATE**

And for the redirection to the login page you should have also something like this in the web.xml

```
<form-login-config>
  <form-login-page>/login.jsp</form-login-page>
  <form-error-page>/error.jsp</form-error-page>
</form-login-config> 
```

# mysql - MySQL 存储和返回 id 的性能

> ID：11259564
> 
> 赞同：1
> 
> 时间：2012-06-29T09:46:17.153
> 
> 标签：mysql, sql, performance

我有一个 API，我需要记录查询中返回的表中的哪些 id，并在另一个查询中，返回基于 id 日志排序的结果。

例如：

表`products`有一个称为PK`id`的`users`PK 称为`id`。我可以创建一个日志表，每个返回的 id 都有一个插入/更新。我想知道它的性能和设计。

本质上，对于 API 中返回的每个 ID，我会：

```
INSERT INTO log (product_id, user_id, counter) 
    VALUES (@the_product_id, @the_user_id, 1) 
    ON DUPLICATE KEY UPDATE counter=counter+1; 
```

..我要么有一个 id 列作为 PK，要么是 product_id 和 user_id 的组合（替代。将这两者作为唯一索引）。

所以第一个问题是它的性能（20 次插入/更新以及对 API 中我的选择调用的影响） - 是否有更好/更智能的方法来记录这些 ID？从网络服务器日志中提取？

其次是包含记录数据的选择语句的性能，以允许用户在每个请求中查看新产品（一个简化的示例，我会指定表字段而不是 * 在现实生活中）：

```
SELECT p.*, IFNULL(
    SELECT log.counter 
    FROM log 
    WHERE log.product_id = p.id 
    AND log.user_id = @the_user_id
, 0 ) AS seen_by_user 
FROM products AS p
ORDER BY seen_by_user ASC 
```

在我们的数据库中，products 表有数百万行，users 表增长很快。我这样做的想法是对的，还是有更好的方法？如何优化流程，是否有可以使用的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:45:20.950

Callie，我只是想为 keymone 标记一个不同的观点，它不适合评论，因此这个答案。

性能对基础架构环境很敏感：您是在共享托管服务 (SHS)、专用私有虚拟服务 (PVS) 还是专用服务器中运行，甚至是在具有单独 Web 和数据库服务器的多服务器配置中运行。

你们的交易率和交易量是多少？在一天的 2 个交易高峰时段，您每分钟执行多少次插入/更新？您对日志计数器的陈旧性有哪些完整性要求？

是的，如果您正在执行例如每秒 3-10 次更新，那么 keymone 的观点是合适的，并且当您进入此域时，某种形式的收集过程来批量插入以允许批量插入变得必不可少。但同样重要的是 Q 是存储引擎的选择、事务性与批量拆分以及基础架构本身的选择（服务器内数据库实例与单独的数据库服务器、主/从配置......）。

但是，如果您的平均值 <1/sec，则 INSERT ON DUPLICATE KEY UPDATE 具有与等效 UPDATE 语句相当的性能，并且如果执行单行插入/更新，这是更好的方法，因为它可以确保计数的 ACID 完整性。

任何形式的 PHP 进程启动通常会在您的 Web 服务器上花费大约 100 毫秒，因此即使考虑这样做来进行异步更新也是非常疯狂的，因为性能损失远远大于更新本身。

您的 SQL 语句与您在 products 表中有“数百万行”的评论不相符，因为它将对 product 表执行完整的提取，并在每一行上执行相关的子查询。我自己会使用 LEFT OUTER JOIN，并带有某种强约束来过滤哪些产品项适合此结果集。无论它如何运行，执行任何计数更新都需要更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:36:19.610

使用这种方法，您的表现将非常糟糕。

mysql 并不完全适合日志记录，因此您可以执行以下几个步骤来获得良好的性能：

1.  而不是即时维护统计表（重复密钥位的更新，这绝对会破坏您的性能），您希望拥有一个原始日志表，您将只在其中进行插入，并且不时（比如每天）您将运行将该表中的数据聚合到实际统计表中的脚本。

2.  而不是单一的统计表 - 有一个每日统计数据，每月统计数据等。然后聚合工作将从已经聚合的东西中建立数据 - 性能非常棒。它还允许您随着时间的推移删除（或存档）统计数据粒度 - 谁在乎 2 年内的每日统计数据？或者至少是关于“实时”访问这些统计数据。

3.  不要插入到日志表中，而是使用 syslog-ng 之类的东西将这些信息收集到日志文件中（mysql 服务器 [s] 上的负载要少得多），然后将数据从原始文本文件聚合到 mysql 中（这里有很多选择，你甚至可以导入 raw如果您的聚合例程确实需要一些 SQL 灵活性，则将文件返回 mysql）

就是这样

# iphone - 故事板在 ios 4.3 及更早版本上不可用

> ID：11259569
> 
> 赞同：-3
> 
> 时间：2012-06-29T09:46:33.903
> 
> 标签：iphone, xcode

我正在开发 iphone 应用程序。当我运行应用程序时出现错误，例如“**故事板在 ios 4.3 和更早版本上不可用**”。我不知道如何解决这个问题，所以有人指导我解决这个问题。

我的 xcode 是 4.3 版本。我的iphone是2g。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:48:15.383

你对这个问题做过任何研究吗？故事板仅在 iOS SDK 5.0 及更高版本中可用。

如果您构建基于情节提要的应用程序，则必须在构建设置中选择 5.0 作为受支持最少的 iOS 版本。

反之亦然，如果您想为 4.3 构建应用程序，则不能使用故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T02:54:06.867

iOS5 [Storyboard error: Storyboards are available on iOS 4.3 and prior](https://stackoverflow.com/questions/7781483/ios5-storyboard-error-storyboards-are-unavailable-on-ios-4-3-and-prior)

IOS 4.3 不支持情节提要。

# emacs - 将 Cppcheck 与 Emacs 集成

> ID：11259570
> 
> 赞同：2
> 
> 时间：2012-06-29T09:46:43.253
> 
> 标签：emacs, cppcheck

[是否可以以比简单地在当前缓冲区上调用 shell 命令](https://stackoverflow.com/a/822144/789593)更复杂的方式将 Cppcheck 与 Emacs 集成？我希望 Emacs 能够解析 Cppcheck 的消息并将它们视为来自编译器的消息（类似于`compile`工作原理），例如`C-x ``用于访问 Cppcheck 消息的目标。

这是一些示例输出 Cppcheck：

```
$ cppcheck --enable=all test.cpp 
Checking test.cpp...
[test.cpp:4]: (error) Possible null pointer dereference: p - otherwise it is redundant to check if p is null at line 5
[test.cpp:38]: (style) The scope of the variable 'i' can be reduced
[test.cpp:38]: (style) Variable 'i' is assigned a value that is never used
[test.cpp:23]: (error) Possible null pointer dereference: p
[test.cpp:33]: (error) Possible null pointer dereference: p
Checking usage of global functions..
[test.cpp:36]: (style) The function 'f' is never used
[test.cpp:1]: (style) The function 'f1' is never used
[test.cpp:9]: (style) The function 'f2' is never used
[test.cpp:26]: (style) The function 'f3' is never used 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:55:55.997

嗯...我认为这实际上很简单。只需使用 'compile'，就像在 Mx compile 中一样，然后键入 compile 命令：

```
cppcheck --template='{file}:{line}:{severity}:{message}' --quiet <filename> 
```

其中文件名是您希望运行 cppcheck 的文件的名称。这会将 cppcheck 的输出转换为*编译*缓冲区可以解析的形式，并为您提供您获得的全部功能，例如 g++ 编译。--quiet 可能不是必需的，但因为我关心的只是我使用的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:35:42.817

> 是否可以以更复杂的方式将 Cppcheck 与 Emacs 集成

对的，这是可能的。使用flymake。我很惊讶还没有人为 cppcheck 做过这件事。

没问题，你可以自己做。添加 cppcheck 作为新版本的 flymake 工具。为此，请遵循现有示例。做起来并不太复杂，但是一到冷，就很难知道*该怎么做*。（我从未见过描述如何将新工具集成到 flymake 的指南文档）。遵循现有的工作示例可以解决该问题。

这是一个 7k 文件，将 PHP CodeSniffer 添加为 flymake 工具。[http://www.emacswiki.org/emacs/flyphpcs.el](http://www.emacswiki.org/emacs/flyphpcs.el)

7k 大部分是评论...

您应该能够对其进行修改以将任意工具添加到 flymake。关键步骤是：

1.  将您的目标文件扩展名（例如：.cpp）与执行 flymake 工作的一对函数（init 和 cleanup）相关联。

2.  定义一个函数来生成命令行，每次 flymake 扫描你的缓冲区。ths fn 获取支持缓冲区的文件的名称，并生成一个命令行。在您的情况下，它将使用所有适当的命令行参数运行 cppcheck。生成命令行的 fn 由 #1 中引用的 init fn 调用。

3.  定义一个与您的工具生成的错误消息匹配的正则表达式，并将该正则表达式添加到 flymake 列表中。这允许 flymake 从您运行的工具的输出中提取错误消息。通过解析输出，flymake 可以获取行号并突出显示缓冲区中的虚线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T10:00:17.063

您可以使用Emacs 附带的[flymake](http://www.gnu.org/software/emacs/manual/html_mono/flymake.html)。

基本思想是编写一个运行 cppcheck 的 flymake 命令，然后将输出按摩成 flymake 可以使用的格式。如果您随后在`c++`模式缓冲区中启用 flymake，您将获得即时错误突出显示。

[这](http://twitpic.com/pdcy6)是 flymake 使用我的 Python 缓冲区使用`pyflakes`.

flymake 通常期望以这种形式输出 `filename:line_number: class: message`

where`filename`是文件名，`number`是行号，`class`是类似于`error`或`warning`指示消息类型的`message`字符串，是指示实际错误的字符串。`cppcheck`输出看起来接近这个。您可能应该编写一个小包装器来将输出转换`cppcheck`为这种格式，然后添加一个钩子来为 c++ 模式打开 flymake。

使用C，在目标下添加类似`gcc -Wall -o nul -S ${CHK_SOURCES}`的东西并运行是必要的。我认为 c++ 模式会类似。`Makefile``check-syntax``flymake-mode`

有关血腥的详细信息，您应该查看[http://flymake.sourceforge.net/](http://flymake.sourceforge.net/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:11:41.983

根据答案，flymake 听起来不错。

您可以编写一个 cppcheck 解析器，但使用 cppcheck --template 选项听起来更容易。

```
cppcheck --template="{file}:{line}:{severity}:{message}" foo.cpp 
```

可能匹配flymake模式。这只是一个想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T17:31:52.650

最快的方法可能是使用 flymake 并在你的 makefile 中添加一个额外的目标。

此设置对我有用：

```
check-syntax:  cppcheck
     g++ -o nul -S ${CHK_SOURCES} $(CFLAGS)

cppcheck:
    cppcheck --enable=all --quiet --template={file}:{line}:{severity}:{message} ${CHK_SOURCES} 
```

# javascript - 未选择第一个菜单项

> ID：11259576
> 
> 赞同：0
> 
> 时间：2012-06-29T09:47:02.800
> 
> 标签：javascript, jquery, css

**问题：**

我有一个菜单，当您将鼠标悬停在父项上时，它应该显示第一项。例如，当您将鼠标悬停在“Kayaks & Canoes”上时，它*应该*突出显示第一项 2+ Person 并在右侧显示内容。

您还应该能够将鼠标悬停在 Boats 上，并且右侧的内容应该会发生变化。默认情况下应选择娱乐，但您也应该能够将鼠标悬停在钓鱼上。

目前它不显示第一个项目，但您可以将鼠标悬停在任何项目上，它会显示出来。

**我试过什么？**

```
$(document).ready(function() {
    //on hover of sub menu li then highlight itself
    $('div#new-menu-lower ul.menuul li.menuli').hover(

    function() {

        $(this).children('div#new-menu-lower ul li ul').css("display","block");
        $('div#new-menu-lower ul li ul li ul:first').css("display","block");
        $('div#new-menu-lower ul li ul li').css("display","block");
        $('div#new-menu-lower ul li ul li ul li:first').css("display","block");
        $(this).children('div#new-menu-lower ul li ul li ul').css("display","block");

    }, function() {

        $(this).children('div#new-menu-lower ul li ul').css("display","none");
        $('div#new-menu-lower ul li ul li ul:first').css("display","none");
        $('div#new-menu-lower ul li ul li:first').css("display","none");
        $('div#new-menu-lower ul li ul li ul li:first').css("display","none");
        $(this).children('div#new-menu-lower ul li ul li ul').css("display","none");

    })
}); 
```

**JSFIDDLE：http:** [//jsfiddle.net/NDMuu/7/](http://jsfiddle.net/NDMuu/7/)

如果你可以让它工作，我会接受一个使用伪类的纯 css 解决方案`:hover`，否则我认为 Jquery/JS 是要走的路？

**编辑：* *稍微更新了我的描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:57:35.480

默认情况下显示第一个项目的方法是使用`if`声明：如果父列表项是，`display: block`那么它也将是那个。当您将鼠标悬停在另一个上时，您只需要告诉其他项目是`display: none`。我没有时间修复您的所有代码，但这是开始的地方。试一试，然后我会帮你完成它。

# java - 将 jRadioButton 添加到 jTable

> ID：11259579
> 
> 赞同：0
> 
> 时间：2012-06-29T09:47:09.347
> 
> 标签：java, swing, netbeans, jtable, jradiobutton

我正在尝试添加`jRadioButton`到`jTable`. 我使用了给定的代码

```
 private class CustomCellRenderer extends DefaultTableCellRenderer {

  /* (non-Javadoc)
   * @see javax.swing.table.DefaultTableCellRenderer#getTableCellRendererComponent(javax.swing.JTable, java.lang.Object, boolean, boolean, int, int)
   */

        @Override
  public Component  getTableCellRendererComponent(JTable table, Object value,boolean isSelected, boolean hasFocus, int row, int column) {

    return new javax.swing.JRadioButton();
  }

 } 
```

但是当我运行它时，我得到`jTable`了不同颜色的列，当我单击单选按钮时没有任何反应。我正在使用netbeans。如果我尝试自定义`jTable`然后什么都不会出现在`jTable`. 给我一个正确的指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T09:53:36.147

1.  如果要编辑表格单元格的值，则必须设置`TableCellEditor`.
2.  你应该在你的渲染器中创建一个单一`JRadioButton`的并在任何地方重用它，这就是 TableCellRenderer 的目的。
3.  如果您不调用`super.getTableCellRendererComponent`，则不需要扩展`DefaultTableCellRenderer`，只需执行即可`TableCellRenderer`。

考虑阅读[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以更好地理解渲染器和编辑器的概念。

编辑：

这是一个关于如何完成这项工作的示例。当然，您必须适应您的模型，但您应该了解要点：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractCellEditor;
import javax.swing.JFrame;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class TestTable {

    public class RadioButtonCellEditorRenderer extends AbstractCellEditor implements TableCellRenderer, TableCellEditor, ActionListener {

        private JRadioButton radioButton;

        public RadioButtonCellEditorRenderer() {
            this.radioButton = new JRadioButton();
            radioButton.addActionListener(this);
            radioButton.setOpaque(false);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            radioButton.setSelected(Boolean.TRUE.equals(value));
            return radioButton;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            radioButton.setSelected(Boolean.TRUE.equals(value));
            return radioButton;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            stopCellEditing();
        }

        @Override
        public Object getCellEditorValue() {
            return radioButton.isSelected();
        }

    }

    private JFrame f;
    private JTable table;

    private class MyObjectManager {
        private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);
        private List<MyObject> objects = new ArrayList<TestTable.MyObject>();

        public void addObject(MyObject object) {
            objects.add(object);
            object.setManager(this);
            propertyChangeSupport.firePropertyChange("objects", null, object);
        }

        public List<MyObject> getObjects() {
            return objects;
        }

        public void setAsSelected(MyObject myObject) {
            for (MyObject o : objects) {
                o.setSelected(myObject == o);
            }
        }
    }

    private class MyObject {
        private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);

        private MyObjectManager manager;

        private String value;

        private boolean selected;

        public MyObject(String value) {
            this.value = value;
        }

        public PropertyChangeSupport getPropertyChangeSupport() {
            return propertyChangeSupport;
        }

        public String getValue() {
            return value;
        }

        public void setValue(String value) {
            this.value = value;
            propertyChangeSupport.firePropertyChange("value", null, value);
        }

        public MyObjectManager getManager() {
            return manager;
        }

        public void setManager(MyObjectManager manager) {
            this.manager = manager;
            propertyChangeSupport.firePropertyChange("manager", null, manager);
        }

        public boolean isSelected() {
            return selected;
        }

        public void setSelected(boolean selected) {
            if (this.selected != selected) {
                this.selected = selected;
                if (selected) {
                    manager.setAsSelected(this);
                }
                propertyChangeSupport.firePropertyChange("selected", !selected, selected);
            }
        }

    }

    protected void initUI() {
        MyObjectManager manager = new MyObjectManager();
        for (int i = 0; i < 200; i++) {
            MyObject object = new MyObject("Row " + (i + 1));
            manager.addObject(object);
        }
        table = new JTable(new MyTableModel(manager));
        table.setRowHeight(20);
        TableColumn column = table.getColumnModel().getColumn(1);
        column.setCellEditor(new RadioButtonCellEditorRenderer());
        column.setCellRenderer(new RadioButtonCellEditorRenderer());
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(table), BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);

    }

    public class MyTableModel extends AbstractTableModel implements PropertyChangeListener {

        private final MyObjectManager manager;

        public MyTableModel(MyObjectManager manager) {
            super();
            this.manager = manager;
            manager.propertyChangeSupport.addPropertyChangeListener(this);
            for (MyObject object : manager.getObjects()) {
                object.getPropertyChangeSupport().addPropertyChangeListener(this);
            }
        }

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (evt.getSource() == manager) {
                // OK, not the cleanest thing, just to get the gist of it.
                if (evt.getPropertyName().equals("objects")) {
                    ((MyObject) evt.getNewValue()).getPropertyChangeSupport().addPropertyChangeListener(this);
                }
                fireTableDataChanged();
            } else if (evt.getSource() instanceof MyObject) {
                int index = manager.getObjects().indexOf(evt.getSource());
                fireTableRowsUpdated(index, index);
            }
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public int getRowCount() {
            return manager.getObjects().size();
        }

        public MyObject getValueAt(int row) {
            return manager.getObjects().get(row);
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
            case 0:
                return getValueAt(rowIndex).getValue();
            case 1:
                return getValueAt(rowIndex).isSelected();
            }
            return null;
        }

        @Override
        public void setValueAt(Object value, int rowIndex, int columnIndex) {
            if (columnIndex == 1) {
                getValueAt(rowIndex).setSelected(Boolean.TRUE.equals(value));
            }
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 1;
        }

        @Override
        public Class<?> getColumnClass(int column) {
            switch (column) {
            case 0:
                return String.class;
            case 1:
                return Boolean.class;
            }
            return Object.class;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "Value";
            case 1:
                return "Selected";
            }
            return null;
        }

    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T09:53:53.580

1.  不建议在`getTableCellRendererComponent`方法中返回新组件。相反，始终返回相同的组件，但根据值对其进行修改。这是可能的，因为返回的组件仅用作“标记”，而不是直接添加到 Swing 层次结构中。请参阅教程中的[渲染器和编辑器部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)
2.  我在第一点中描述的内容解释了为什么你不能点击按钮。它只是表格中存在的按钮的图像，而不是真正的按钮

此外，请考虑使用 a`JCheckbox`而不是单选按钮。`TableModel`在这种情况下，当您包含`boolean`值时，您可以简单地坚持使用默认渲染器/编辑器

# ruby-on-rails - 可安装在导轨上的发动机并覆盖另一个发动机

> ID：11259580
> 
> 赞同：6
> 
> 时间：2012-06-29T09:47:17.077
> 
> 标签：ruby-on-rails, devise, overriding, rails-engines, actionview

我正在将我的标准 Rails 应用程序转换为可安装的引擎。该应用程序可与标准博客应用程序相媲美，我希望每个模型、控制器和视图都可以扩展，因此我选择了可​​挂载引擎。

我使用的其中一个宝石是 Devise，据我所知，它本身就是一种可安装的引擎。如此处所述，它可以在可安装的发动机内[使用](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-devise-inside-a-mountable-engine)。

我可以在我的引擎中部分使用它。一切工作正常，包括我像这样覆盖的一些设计控制器：

```
# config/routes.rb

Bbronline::Engine.routes.draw do
  devise_for :users, class_name: "Bbronline::User", module: :devise,
    controllers: { registrations: "bbronline/devise_overrides/registrations"}
    ...

# controllers/bbronline/devise_overrides/registrations_controller.rb
require_dependency "bbronline/application_controller"

module Bbronline

class DeviseOverrides::RegistrationsController < Devise::RegistrationsController

  def new_intermediair
    @user = User.new
  end
  ... 
```

正确的视图“views/bbronline/devise_overrides/registrations/new_intermediair.html.haml”也按预期正确加载。

但是我的问题是我在没有自定义控制器的情况下覆盖的视图没有正确加载。例如，应该登录视图所在的视图`views/bbronline/devise/sessions/new.html.haml`并且未加载。相反，标准的设计登录视图被加载，即`devise-2.1.0/app/views/devise/sessions/new.html.erb`

当然，我可以通过使用我自己的控制器覆盖每个控制器来解决这个问题，就像我对上面的 registrations_controller 所做的那样，但这看起来很丑陋。是否覆盖每个控制器都是这样做的？有没有更方便的方法可以从另一个可安装引擎中覆盖来自可安装引擎的视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T23:28:26.067

如果您不想`config.railties_order`在每个使用您的引擎的应用程序中调整，只需`require 'devise'`在您的**lib\my_engine\engine.rb**文件之上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T11:48:37.453

view_paths 的顺序不正确。检查 Devise::SessionsController 的视图路径显示：

```
Devise::SessionsController.view_paths 
=> #<ActionView::PathSet:0x007fa1bf0e36f8 @paths= [/Users/harmdewit/Dropbox/Code/projects/brightin/bbr-online/bbr-online-gem/test/‌​dummy/app/views, 
/Users/harmdewit/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/devise-2.1.‌​0/app/views, 
/Users/harmdewit/Dropbox/Code/projects/brightin/bbr-online/bbr-online-gem/app/vi‌​ews]> 
```

可安装引擎的最后一条路径应位于中间设计路径之前。解决方案是在 application.rb 中设置加载优先级，如下所示：

```
#test/dummy/config/application.rb (the app that uses my mountable engine)
...
config.railties_order = [Blog::Engine, :main_app, :all]
... 
```

这也记录在 rails api 中： http: [//api.rubyonrails.org/classes/Rails/Engine.html#label-Loading+priority](http://api.rubyonrails.org/classes/Rails/Engine.html#label-Loading+priority)

感谢 José Valim 指出了正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:58:30.067

我需要更多信息。您正在定义哪个控制器以及它从哪个控制器继承？正在渲染哪个视图，您希望渲染哪个视图？另外，`.view_paths`您的朋友是否可以在您的 Rails 控制台中尝试以下操作：

```
Devise::SessionsController.view_paths
YourApp::SomeDeviseController.view_paths 
```

这将使您更好地了解每个控制器在哪里搜索模板。

# java - DirContext：Active Directory Ldap 请求：获取具有父组的用户组

> ID：11259587
> 
> 赞同：4
> 
> 时间：2012-06-29T09:47:54.123
> 
> 标签：java, active-directory, ldap

我使用 javax.naming.directory.DirContext 为 Active Directory 创建 LDAP 请求。此请求返回具有给定名称的用户所属的组。

```
hSearchControls searchCtls = new SearchControls();
searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);
searchCtls.setCountLimit(1);
searchCtls.setReturningAttributes(new String[]{"memberOf"});
String searchFilter = MessageFormat.format("(sAMAccountName={0})", new Object[]{userName});
NamingEnumeration answer = null;
try {
    String hostDC = host.replaceAll("\\.", ",dc=");
    adSearchRequestCr = adSearchRequestCr.replace("DL3", getDomainName(host, 3));
    adSearchRequestCr = adSearchRequestCr.replace("DL2", getDomainName(host, 2));
    adSearchRequestCr = adSearchRequestCr.replace("DL1", getDomainName(host, 1));
    answer = context.search(adSearchRequestCr, searchFilter, searchCtls);
} 
```

这工作正常，但现在我需要更改此请求。更改后的请求不仅应返回用户所在的组，还应返回该组的父组等（组树）。我阅读了有关 LDAP_MATCHING_RULE_IN_CHAIN 的信息，但我仍然没有设法使用它。

请帮助使用 LDAP_MATCHING_RULE_IN_CHAIN 或类似的东西来获得请求的新目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:45:48.123

最后我自己创建了递归而不使用 LDAP_MATCHING_RULE_IN_CHAIN。首先，我得到用户所属的组。我使用属性“memberOf”检索这些组 - 该属性包含父组。然后我对父组进行相同的操作，直到我的搜索完成。这工作得很快。

# javascript - 在 JavaScript 中访问对象内的对象

> ID：11259591
> 
> 赞同：1
> 
> 时间：2012-06-29T09:48:14.173
> 
> 标签：javascript

```
var obj = {{
    data: {
        type: 'string',
        value: 'bir'
    },
    field: 'red'
    },
    {
    data: {
        type: 'string',
        value: 'bir'
    },
    field: 'green'
    }
}; 
```

你如何操纵`data`s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:00:21.343

作为一个对象数组，它可能是有效的：

```
变量对象 = [{
    数据： {
        类型：'字符串'，
        值：'比尔'
    },
    字段：'红色'
    },
    {
    数据： {
        类型：'字符串'，
        值：'比尔'
    },
    字段：'绿色'
    }
];
```

但是，再次欢迎一些上下文^^

# java - 正则表达式组合

> ID：11259594
> 
> 赞同：1
> 
> 时间：2012-06-29T09:48:20.577
> 
> 标签：java, regex, formatting

我想从 CSV（逗号分隔）文件中解析一行，如下所示：

```
Bosh,Mark,mark@gmail.com,"3, Institute","83, 1, 2",1,21 
```

我必须解析文件，而不是我想要的撇号之间的逗号';'，就像这样：

```
Bosh,Mark,mark@gmail.com,"3; Institute","83; 1; 2",1,21 
```

我使用以下 Java 代码，但它不能很好地解析它：

```
Pattern regex = Pattern.compile("(\"[^\\]]*\")");
        Matcher matcher = regex.matcher(line);
        if (matcher.find()) {
            String replacedMatch = matcher.group();
            String gr1 = matcher.group(1);
            gr1.trim();
            replacedMatch = replacedMatch.replace(",", ";");
            line = line.replace(matcher.group(), replacedMatch);
        } 
```

输出是：

```
Bosh,Mark,mark@gmail.com,"3; Institute";"83; 1; 2",1,21 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:23:45.380

这是我将`,`内部引号替换为`;`. 它**假定**如果`"`要出现在带引号的字符串中，那么它会被另一个`"`. 此属性确保从开始计数到当前字符，如果引号数`"`为奇数，则该字符位于带引号的字符串内。

```
// Test string, with the tricky case """", which resolves to
// a length 1 string of single quote "
String line = "Bosh,\"\"\"\",mark@gmail.com,\"3, Institute\",\"83, 1, 2\",1,21";

Pattern pattern = Pattern.compile("\"[^\"]*\"");
Matcher matcher = pattern.matcher(line);

int start = 0;

StringBuilder output = new StringBuilder();

while (matcher.find()) {
  // System.out.println(m.group() + "\n " + m.start() + " " + m.end());
  output
    .append(line.substring(start, matcher.start())) // Append unrelated contents
    .append(matcher.group().replaceAll(",", ";")); // Append replaced string

  start = matcher.end();
}
output.append(line.substring(start)); // Append the rest of unrelated contents

// System.out.println(output); 
```

虽然我找不到任何会像您在 中那样替换匹配组的方法失败的情况，但`line = line.replace(matcher.group(), replacedMatch);`我觉得从头开始重建字符串更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:54:23.167

这里有一个方法：

```
import java.util.regex.*;

class Main {

  public static void main(String[] args) {

    String in = "Bosh,Mark,mark@gmail.com,\"3, \"\" Institute\",\"83, 1, 2\",1,21";
    String regex = "[^,\"\r\n]+|\"(\"\"|[^\"])*\"";
    Matcher matcher = Pattern.compile(regex).matcher(in);
    StringBuilder out = new StringBuilder();

    while(matcher.find()) {
      out.append(matcher.group().replace(',', ';')).append(',');
    }

    out.deleteCharAt(out.length() - 1);
    System.out.println(in + "\n" + out);
  }
} 
```

这将打印：

```
Bosh,Mark,mark@gmail.com,"3,""研究所","83,1,2",1,21
Bosh,Mark,mark@gmail.com,"3;""研究所","83;1;2",1,21
```

在 Ideone 上测试：http: [//ideone.com/fCgh7](http://ideone.com/fCgh7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:21:40.307

这是你需要的

```
String line = "Bosh,Mark,mark@gmail.com,\"3, Institute\",\"83, 1, 2\",1,21";
    Pattern regex = Pattern.compile("(\"[^\"]*\")");
    Matcher matcher = regex.matcher(line);
    while(matcher.find()){
        String replacedMatch = matcher.group();
        String gr1 = matcher.group(1);
        gr1.trim();
        replacedMatch = replacedMatch.replace(",", ";");
        line = line.replace(matcher.group(), replacedMatch);
    } 
```

行将具有您需要的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:59:26.600

你试过让 RegExp 变得懒惰吗？另一个想法：在 [] 内你也应该使用 "。如果你这样做，你应该有预期的输出并设置了全局标志。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T10:01:55.727

你的正则表达式有问题。为什么要确保“...”表达式中没有 ]？你宁愿让正则表达式不情愿（默认是急切的，这意味着它会尽可能多地捕获）。

```
"(\"[^\\]]*\")" 
```

应该

```
"(\"[^\"]*\")" 
```

但是 nhadtdh 是对的，您应该使用适当的 CSV 库来解析它并将 , 替换为 ; 在解析器返回的值中。我相信你在谷歌搜索“Java CSV 解析器”时会找到一个解析器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T10:12:17.243

你的正则表达式不应该是 ("[^"]*") 吗？换句话说，你的第一行应该是：

```
Pattern regex = Pattern.compile("(\"[^\"]*\")"); 
```

当然，这是假设您的输入行的引用值中不能有引号。

# c - 使用 ARM Neon 内在函数的 128 位旋转

> ID：11259596
> 
> 赞同：7
> 
> 时间：2012-06-29T09:48:29.227
> 
> 标签：c, rotation, intrinsics, neon

我正在尝试使用 Neon 内在函数优化我的代码。我在 128 位数组（每个 8 位）上进行 24 位旋转`uint16_t`。

这是我的c代码：

```
uint16_t rotated[8];
uint16_t temp[8];
uint16_t j;
for(j = 0; j < 8; j++)
{
     //Rotation <<< 24  over 128 bits (x << shift) | (x >> (16 - shift)
     rotated[j] = ((temp[(j+1) % 8] << 8) & 0xffff) | ((temp[(j+2) % 8] >> 8) & 0x00ff);
} 
```

我检查了关于[Neon Intrinsics](http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html)的 gcc 文档，它没有关于矢量旋转的说明。此外，我尝试使用`vshlq_n_u16(temp, 8)`但所有移出`uint16_t`单词的位都丢失了。

如何使用霓虹内在函数来实现这一点？顺便说一句，关于 GCC Neon Intrinsics 是否有更好的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T11:49:59.063

在阅读了[Arm 社区博客](http://blogs.arm.com/software-enablement/684-coding-for-neon-part-5-rearranging-vectors/)之后，我发现了这一点：

![霓虹灯臂按位旋转](../Images/6f46084ed22cba68ae728a5e585aba06.png)

> VEXT：提取 VEXT 从一对现有向量中提取一个新的字节向量。新向量中的字节来自第一个操作数的顶部，以及第二个操作数的底部。这允许您生成一个新向量，其中包含跨越一对现有向量的元素。VEXT 可用于实现来自两个向量的数据的移动窗口，这在 FIR 滤波器中很有用。**对于置换，当对两个输入操作数使用相同的向量时，它还可用于模拟逐字节旋转操作。**

以下 Neon GCC Intrinsic 与图片中提供的程序集相同：

```
uint16x8_t vextq_u16 (uint16x8_t, uint16x8_t, const int) 
```

因此，可以通过以下方式对完整的 128 位向量（而不是每个元素）进行 24 位旋转：

```
uint16x8_t input;
uint16x8_t t0;
uint16x8_t t1;
uint16x8_t rotated;

t0 = vextq_u16(input, input, 1);
t0 = vshlq_n_u16(t0, 8);
t1 = vextq_u16(input, input, 2);
t1 = vshrq_n_u16(t1, 8);
rotated = vorrq_u16(t0, t1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T03:22:20.350

我不是 100% 确定，但我认为 NEON 没有旋转指令。

您可以使用左移、右移和或来组合所需的旋转操作，例如：

```
uint8_t ror(uint8_t in, int rotation)
{
    return (in >> rotation) | (in << (8-rotation));
} 
```

只需对 Neon 内在函数执行相同的操作即可进行左移、右移和或。

```
uint16x8_t temp;
uint8_t rot;

uint16x8_t rotated =  vorrq_u16 ( vshlq_n_u16(temp, rot) , vshrq_n_u16(temp, 16 - rot) ); 
```

请参阅[http://en.wikipedia.org/wiki/Circular_shift](http://en.wikipedia.org/wiki/Circular_shift) “实施循环班次”。

这将旋转车道内的值。如果您想旋转车道本身，请按照其他答案中的说明使用 VEXT。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-23T07:33:11.660

用于`vext.8`将向量与其自身连接，并为您提供所需的 16 字节窗口（在本例中偏移 3 个字节）。

使用内在函数执行此操作[需要强制转换](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472k/chr1359125040001.html)以使编译器满意，但它仍然是一条指令：

```
#include <arm_neon.h>

uint16x8_t byterotate3(uint16x8_t input) {
    uint8x16_t tmp = vreinterpretq_u8_u16(input);
    uint8x16_t rotated = vextq_u8(tmp, tmp, 16-3);
    return vreinterpretq_u16_u8(rotated);
} 
```

`g++5.4 -O3 -march=armv7-a -mfloat-abi=hard -mfpu=neon`（[在 Godbolt 上](https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:'%23include+%3Carm_neon.h%3E%0A%0Auint16x8_t+byterotate3(uint16x8_t+input)+%7B%0A++++uint8x16_t+tmp+%3D+vreinterpretq_u8_u16(input)%3B%0A++++uint8x16_t+rotated+%3D+vextq_u8(tmp,+tmp,+16-3)%3B%0A++++return+vreinterpretq_u16_u8(rotated)%3B%0A%7D'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:58.74704491725768,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((g:!((h:compiler,i:(compiler:arm541,filters:(___0:(),b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',jquery:'3.2.1',length:1,prevObject:(___0:(sizzle1504567511579:(undefined:(legend:!(5,0,'1')))),length:1,prevObject:(___0:(jQuery321061962331942659341:(display:''),sizzle1504567511579:(undefined:(legend:!(5,0,'1')))),length:1)),trim:'1'),libs:!(),options:'-O3+-Wall+-march%3Darmv7-a+-mfloat-abi%3Dhard+-mfpu%3Dneon',source:1),l:'5',n:'0',o:'ARM+gcc+5.4.1+(none)+(Editor+%231,+Compiler+%231)',t:'0')),header:(),k:50,l:'4',m:71.78217821782178,n:'0',o:'',s:0,t:'0'),(g:!((h:output,i:(compiler:1,editor:1),l:'5',n:'0',o:'%231+with+ARM+gcc+5.4.1+(none)',t:'0')),header:(),l:'4',m:28.21782178217822,n:'0',o:'',s:0,t:'0')),k:41.25295508274232,l:'3',n:'0',o:'',t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)）将其编译为：

```
byterotate3(__simd128_uint16_t):
    vext.8  q0, q0, q0, #13
    bx      lr 
```

计数为 16-3 意味着我们左移 3 个字节。（这意味着我们从左向量中取 13 个字节，从右向量中取 3 个字节，所以它也是右旋转 13）。

* * *

相关：x86 还具有将滑动窗口纳入两个寄存器串联的指令：（[`palignr`](http://felixcloutier.com/x86/PALIGNR.html)在 SSSE3 中添加）。

* * *

也许我错过了关于 NEON 的一些东西，但我不明白为什么 OP 的自我回答使用的是`vext.16`(vextq_u16)，它具有 16 位粒度。它甚至不是一条不同的指令，只是一个别名，`vext.8`无法使用奇数计数，需要额外的指令。 [手册`vext.8`说](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489f/CIHGAEFI.html)：

> VEXT 伪指令
> 
> 您可以将数据类型指定为 16、32 或 64，而不是 8。在这种情况下，#imm 指的是半字、字或双字，而不是指字节，并且允许的范围相应减小。

# java - 如何获取树表的选定行？

> ID：11259603
> 
> 赞同：3
> 
> 时间：2012-06-29T09:48:57.693
> 
> 标签：java, xml, jsf, tree

我有一个页面上有两列的树表。第一个是父母，第二个是孩子。子表显示为命令链接，当我单击这些链接时，它应该获取子表的 ID 并根据 ID 在下一页上显示数据。

问题是，当我选择任何一个孩子时，它会导航到下一页并仅显示与第一个孩子相关的数据，这意味着它在所有情况下都采用第一个孩子的 Id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:00:55.103

我希望这对你有帮助

```
//TreeViewer viewer use your viewer
IStructuredSelection selection = (IStructuredSelection)viewer.getSelection(); 
```

# silverlight - 如何将全景项目移近全景标题

> ID：11259607
> 
> 赞同：0
> 
> 时间：2012-06-29T09:49:13.843
> 
> 标签：silverlight, windows-phone-7, xaml, panorama-control

我有一个带有标题但没有项目标题的全景视图。现在标题（applicationTitle）和内容之间有很大的差距。有没有办法让内容更靠近顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:04:18.783

我已经用 Pivot 做到了这一点。不明白为什么不能使用全景。

使用`Margin="0, -100, 0, 0"`. 这将使您的全景图更高一点并与现有控件重叠。将页边距顶部调整为所需的值。

# php - 如何判断 copy() 是否成功？

> ID：11259609
> 
> 赞同：-1
> 
> 时间：2012-06-29T09:49:25.733
> 
> 标签：php

我可以将远程图像复制到我的服务器；

```
@copy("http://www.example.com/image.jpg", $title.'.jpg'); 
```

但我想确保它已成功复制。如果没有成功复制，我想做点什么。我怎样才能做到这一点 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:51:57.680

```
if(!copy("http://www.example.com/image.jpg", $title.'.jpg')){
    echo "failed to copy file...\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:51:33.687

**成功时返回 TRUE，失败时返回 FALSE。** - 根据我想你没有读过的文档。

# html - Firefox 在其他浏览器中的字符串中断行为？

> ID：11259611
> 
> 赞同：0
> 
> 时间：2012-06-29T09:49:27.057
> 
> 标签：html, css, firefox, break

我有一个没有空格但带有斜杠的长字符串，我想在表格单元格中显示。

Firefox 在行尾的斜线之前添加中断。如果我添加，其他浏览器只会破坏字符串

```
td {    
    word-break: break-all;
} 
```

到我的 CSS。

**火狐：**

![截图火狐](../Images/c496ba5d78b57ce3ba22ec0bf9daf77f.png)

**铬合金**

![屏幕截图铬](../Images/50118b47d7c1188546469b08dd8f6b6c.png)

**带分词的 Chrome**

![带有分词的屏幕截图 chrome](../Images/6470142efc07e7a2789671aeb29c0347.png)

是否有任何 CSS 属性可以在 Chrome 等中获得 firefox 行为？

你可以在这里找到一个演示：http: [//jsfiddle.net/rM9Dx/2/embedded/result/](http://jsfiddle.net/rM9Dx/2/embedded/result/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:32:09.903

嗨，现在你可以使用**这个了** `word-wrap:break-word;`

像这样

**CSS**

```
 div {
    width: 400px;
    border: 1px solid red;
}
.wrap{
    word-wrap:break-word;
  width:200px;
  border:solid 3px green;
} 
```

**HTML**

```
<div>
<table>
    <tr>
        <td>description:<td>
        <td><div  class="wrap">431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K431121251K
          </div></td>
    </tr>
</table>
</div> 
```

现场演示 [http://tinkerbin.com/6uNnlfow](http://tinkerbin.com/6uNnlfow)

更多信息[http://www.css3.info/preview/word-wrap/](http://www.css3.info/preview/word-wrap/)

# mysql - 使用 WHERE 子句优化 DELETE FROM

> ID：11259614
> 
> 赞同：0
> 
> 时间：2012-06-29T09:49:46.840
> 
> 标签：mysql, optimization, where, sql-delete

如何优化此查询？

```
DELETE FROM item WHERE id = 1002;
DELETE FROM item WHERE id = 1003;
DELETE FROM item WHERE id = 102232;
DELETE FROM item WHERE id = 12322; 
```

这是一条出路吗？

```
DELETE FROM item WHERE id = 1002 OR id = 1003 OR id = 102232 OR id = 12322; 
```

我非常需要专家的头脑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:51:24.463

```
DELETE FROM item WHERE id IN (1002,1003,102232,12322) 
```

它更简单，但是优化（更快？）是什么意思

# memory - php5.3魔术方法__call和Memory

> ID：11259616
> 
> 赞同：0
> 
> 时间：2012-06-29T09:49:53.213
> 
> 标签：memory, call, php-5.3

我有一个使用大量魔术方法__call 的脚本。该脚本有 15 000 次迭代，并且对象更大。每次迭代后，内存都会增长。我使用 unset 或 $val = null; 但记忆继续增长。

我能做些什么？

一个例子：

```
$data = null;
foreach ($field['method']['actions'] as $action) {
    // si l'action ne concerne pas le name space principal
    if (!array_key_exists('get', $action)) {
        continue;
    }
    if (array_key_exists('begin', $action)) {
        $data .= $action['begin'];
    }
    if (array_key_exists('action', $action)) {
        $obj = $notice->__call('get' . ucfirst($action['action']));
        $notice->clear();
        if (is_object($obj)) {
            $rsl = $obj->__call('get' . ucfirst($action['get']));
            $obj->clear();
            echo "\n" . 'get' . ucfirst($action['get']) . ' : '  . number_format(memory_get_usage());
            $data .= $rsl;
            unset($rsl);
        } else {
            $data .='';
        }
        $obj = null;
    } else {
        $data .= $notice->__call('get' . ucfirst($action['get']));
        $notice->clear();
        echo "\n" . 'get' . ucfirst($action['get']) . ' : '  . number_format(memory_get_usage());
    }
    if (array_key_exists('end', $action)) {
        $data .= $action['end'];
    }
}
//--
class Notice{
    //--

    protected $instanceObj = null;

    public function __call($name, $arguments = null) {
        $this->instanceObj = $this->$name($arguments);
        return $this->instanceObj;
    }

    public function clear(){
         $this->instanceObj = null;
     }

    //--
} 
```

日志文件示例：

```
getField : 24,446,752
getField : 24,447,352
getField : 24,447,720
getField : 24,448,096
getField : 24,483,320
getField : 24,483,336
getField : 24,483,728
...
getField : 25,267,936
...
getField : 35,596,712
... 
```

你可以看到记忆永远不会停止在眉毛上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:59:20.300

唯一的解决方案是对脚本进行多次执行。问题不是 PHP Symfony，而是生成了太多对象。所以我运行脚本 Pacquet x。否则会导致内存饱和。

# eclipse - Aptana Studio 弄乱了我在 Eclipse 中的默认编辑器设置

> ID：11259620
> 
> 赞同：0
> 
> 时间：2012-06-29T09:50:11.733
> 
> 标签：eclipse, aptana

由于我安装了“独立”Aptaba Studio，我的 Eclipse 想要在 Aptana Studio 中打开某些文件，例如“MSG.utf”。请注意，我从未安装过 Aptaba 插件。甚至在按照文档说明卸载 Aptana 之后（即在 OS X 中将应用程序文件夹移动到垃圾箱），设置也不会更改回来。相反，Eclipse 现在根本不再打开这些文件。所以：

1) 为什么 Aptana Studio 弄乱了我的 Eclipse 设置？

2) 还有哪些文件类型/Ednings 和其他设置可能会受到影响？

3）我怎样才能把它改回正常/以前？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:04:14.990

首选项->常规->编辑器->文件关联

在这里，您可以设置使用哪些编辑器打开哪些文件类型，内部和外部，还可以设置默认值。

尝试使用要打开的编辑器修改条目/添加 utf 文件的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:58:13.507

安装此插件：[http](http://eclipse-color-theme.github.com/update) ://eclipse-color-theme.github.com/update ，您、Aptana 和您的 Eclipse 布局将永远快乐！

# iphone - 如何在核心图中将 TimeInterval 设置为 xAxis 标签？

> ID：11259621
> 
> 赞同：1
> 
> 时间：2012-06-29T09:50:17.037
> 
> 标签：iphone, objective-c, ios, ipad, graph

我想在核心图中的 xAxis 标签上显示时间共振峰。我该如何设置？我显示一个示例[链接](https://stackoverflow.com/questions/5729366/moving-date-on-x-axis)

但是那个时间没有在 Xaxis 上显示，但是如果我在 xAxis DD:MM:YY 格式上显示日期，那么它确实显示了所以我在该链接代码中进行了更改，所以它会正常工作吗？谢谢

# c# - iTextSharp RAM（内存）溢出

> ID：11259625
> 
> 赞同：0
> 
> 时间：2012-06-29T09:50:26.900
> 
> 标签：c#, itextsharp

我正在基于模板生成 PDF 文档。该文档有多个页面。该文档可以有大约 5000 页。创建第 500 页时，我得到一个溢出 RAM（内存）。任何的想法？

```
public static void CreateBankBlank2012Year(string pdfTemplatePath, string directoryOutPdf, string nameOutPdf, AnnualReportsFilterParameters filterParametrs, string serverPath)
{
    // Get details salary
    IEnumerable<SalayDetailsForPdf> dataSalaryDetails = (IEnumerable<SalayDetailsForPdf>) GetSalaryData(filterParametrs);                         

    String fontPath = Path.Combine(serverPath + "\\Fonts", "STSONG.ttf");
    Font font = FontFactory.GetFont(fontPath, BaseFont.IDENTITY_H, 8);

    using (Document document = new Document())
    {
        using (PdfSmartCopy copy = new PdfSmartCopy(
            document, new FileStream(directoryOutPdf + nameOutPdf, FileMode.Create))
        )
        {
            document.Open();

            foreach (var data in dataSalaryDetails)                    
            {
                PdfReader reader = new PdfReader(pdfTemplatePath + @"\EmptyTemplateBankBlank_2012.pdf");
                using (var ms = new MemoryStream())
                {
                    using (PdfStamper stamper = new PdfStamper(reader, ms))
                    {
                        stamper.AcroFields.AddSubstitutionFont(font.BaseFont);
                        AcroFields form = stamper.AcroFields;
                                                                                                                            form.SetField("t1_address1", data.Address1);

                        form.SetField("t1_name", data.NameHieroglyphic);                                

                        // Other field ...

                        stamper.FormFlattening = true;
                    }
                    reader = new PdfReader(ms.ToArray());

                    copy.AddPage(copy.GetImportedPage(reader, 1));
                }
            }
        }                
    }
} 
```

**ps** 我正在尝试解决我的问题如下：根据模板生成空页面

```
private static void GeneratePdfFromTemplate(string directoryOutPdf, string nameOutPdf, string pdfTemplatePath, int countPages)
    {                                   
        using (Document document = new Document())
        {
            using (PdfSmartCopy copy = new PdfSmartCopy(
                document, new FileStream(directoryOutPdf + nameOutPdf, FileMode.Create))
                )
            {
                document.Open();                                        
                PdfReader reader = new PdfReader(pdfTemplatePath + @"\EmptyTemplateBankBlank_2012.pdf");
                for (int i = 0; i < countPages; i++)                    
                {                                                    
                    copy.AddPage(copy.GetImportedPage(reader, 1));                                                 
                }
                reader.Close();
                copy.Close();
            }
            document.Close();
        }            
        GC.Collect();            
    } 
```

但是在生成之后，我无法为字段设置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:26:25.663

如果其他人有兴趣，我找到了我的问题的解决方案：

```
private static void SettingFieltValue(Font font, IEnumerable<SalayDetailsForPdf> dataSalaryDetails, int selectedYear, string directoryOutPdf, string nameOutPdf, string pdfTemplatePath)
    {
    string pdfTemplate = pdfTemplatePath + @"\EmptyTemplateBankBlank_2012.pdf";
    string newFile = directoryOutPdf + nameOutPdf;

    var fs = new FileStream(newFile, FileMode.Create);
    var conc = new PdfConcatenate(fs, true);
    foreach (var data in dataSalaryDetails)
    {
        var reader = new PdfReader(pdfTemplate);
        using (var ms = new MemoryStream())
        {
            using (PdfStamper stamper = new PdfStamper(reader, ms))
            {
                stamper.AcroFields.AddSubstitutionFont(font.BaseFont);
                AcroFields form = stamper.AcroFields;

                form.SetField("t1_name", data.NameHieroglyphic);
                //Other field

                stamper.FormFlattening = true;
                stamper.Close();
            }
            reader = new PdfReader(ms.ToArray());
            ms.Close();                    
        }
        conc.AddPages(reader);
        reader.Close();
    }
    conc.Close();
} 
```

# c# - 在位于欧盟的计算机中将美国日期时间转换为欧盟日期时间？

> ID：11259626
> 
> 赞同：0
> 
> 时间：2012-06-29T09:50:34.370
> 
> 标签：c#, datetime, timezone

我从数据库中获得了一些日期时间（ExactDate）。这些时间在美国时区，我需要将它们转换为欧盟时区。

但是，如果我使用：

```
 ExactDate = (DateTime)dr["CREATE_DATE"];

           // change exact date to european time
           TimeZoneInfo info;
           info = TimeZoneInfo.FindSystemTimeZoneById("US Mountain Standard Time");
           ExactDate = TimeZoneInfo.ConvertTime(ExactDate,info); 
```

日期未正确转换，因为我的计算机将`ExactDate`视为欧洲日期。

你知道我怎么解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:58:48.220

尝试将日期从其他时区转换为 UTC

像

```
ExactDate = TimeZoneInfo.ConvertTimeToUtc(ExactDate,info); 
```

获得相应的 UTC 时间后，您可以稍后使用`.ToLocal`

希望这是你想要的。

# android - 在创建 cutomView 时不添加视图？

> ID：11259628
> 
> 赞同：2
> 
> 时间：2012-06-29T09:50:41.533
> 
> 标签：android, view, add, custom-component, android-custom-view

我需要创建一个自定义视图，它扩展了RelativeLayout，并且只需要拥有和imageView 一样大小的customView。

我的代码是：

```
public class MyCustomButton extends RelativeLayout {

ImageView buttonCoverImage;

public MyCustomButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public MyCustomButton(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public MyCustomButton(Context context) {
    super(context);

    setClickable(true);
    setFocusable(true);
    setEnabled(true);

    buttonCoverImage = new ImageView(getContext());

    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    setLayoutParams(lp);

    lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

    buttonCoverImage.setLayoutParams(new RelativeLayout.LayoutParams(100, 100));

    buttonCoverImage.setBackgroundResource(R.drawable.button_selector);
    buttonCoverImage.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            performClick();
        }
    });

    this.addView(buttonCoverImage);
}   
} 
```

在 xml 中，我创建了这样的视图：

问题是我看不到buttonCoverImage？不知何故，它没有被创建，或添加到 myCustomView... 可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:56:17.697

如果通过xml添加视图，那么android会实现构造函数

```
public MyCustomButton(Context context, AttributeSet attrs) {
    super(context, attrs);
} 
```

在你的情况下它是空的。我觉得是你的问题。

# knockout.js - 覆盖 observable/observableArray 设置方法

> ID：11259639
> 
> 赞同：4
> 
> 时间：2012-06-29T09:51:34.120
> 
> 标签：knockout.js

我处于想要覆盖`set`敲除对可观察对象的方法的情况；并举例说明我为什么要这样做，请使用以下示例代码：

```
this.magic = ko.observableArray();

// ... inside an Ajax request
var formatted = reduceAndFormat(respone);
this.magic(formatted); 
```

这重复了几次，所以我想以可能定制的 observable`reduceAndFormat`的方法移动函数的整个主体。`set`

有没有办法做到这一点？因为除了订阅可观察更新之外，在文档中没有看到太多其他内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T10:30:27.130

你可以创建一个[可写的计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)

可能是这样的：

```
// private variable
this._magic = ko.observableArray();

// property with getter and setter
this.magic= ko.computed({
    read: function(){
        return _magic();
    },
    write: function(value) {
        var formatted = reduceAndFormat(value);
        this._magic(formatted);
    }
}); 
```

# blackberry - 关注同一屏幕中的两个项目

> ID：11259643
> 
> 赞同：0
> 
> 时间：2012-06-29T09:51:40.143
> 
> 标签：blackberry, focus

嗨，我在屏幕上有三个项目：按钮 1、list2 和 Button3 当我单击按钮 1 然后单击列表时，我想要按钮 1 仍然聚焦，我在列表的项目中获得焦点，而按钮 3 没有焦点. 是否有可能在同一个屏幕上获得两个字段的 fosus？如果可能怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:45:33.483

我有一个想法，如下图所示为 button1 使用两个按钮。在单击之前和单击之后为 button1 分配处理程序。单击之前![在此处输入图像描述](../Images/359537f11a4dd7854243820f2e1e9676.png)

![点击后](../Images/ae5f2b6ab557dae6e65b81f94845ad2c.png)

# configuration - 如何以编程方式配置 log4cpp？

> ID：11259649
> 
> 赞同：0
> 
> 时间：2012-06-29T09:52:07.027
> 
> 标签：configuration, log4cpp

是否可以以编程方式配置 log4cpp？

我想通过提供以下配置文件来配置它。

```
appender root basic console
priority root DEBUG 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:45:12.693

您是指来自[http://sourceforge.net/projects/log4cpp/](http://sourceforge.net/projects/log4cpp/)的 log4cpp吗？

简短的回答是肯定的。

以下是一些示例代码，您可以根据其文档了解更多详细信息：

我的代码用于在运行时配置基于文件的 log4cpp 实例。

"priority" 是 'DEBUG', ...
"name" 这里是 'root'
"layout" 可能是 "%d{%Y-%m-%d %H:%M:%S}%c %x: %m%n"

```
// Create RollingFileAppender
log4cpp::Appender *rfileAppender = new log4cpp::RollingFileAppender(std::string(name),
        std::string(fileName),
        maxFileSize,
        maxBackupIndex,
        append,
        mode);

if (rfileAppender != NULL)
{
    // Create PatternLayout
    log4cpp::Layout *layout = new log4cpp::PatternLayout();

    if (layout != NULL)
    {
        try
        {
            // Set up Pattern
            ((log4cpp::PatternLayout *)layout)->setConversionPattern(std::string(layoutPattern));

            // Bind Layout to RollingFileAppender
            rfileAppender->setLayout(layout);

            category.setAdditivity(additivity);

            try
            {
                category.setPriority(log4cpp::Priority::getPriorityValue(std::string(priority)));
            }
            catch(std::invalid_argument &ia)
            {
                std::cerr << "Invalid Priority: "  << priority << std::endl;
                category.setPriority(log4cpp::Priority::INFO);
            }

            // Bind RollingFileAppender to Category
            category.addAppender(rfileAppender);

            return 0;
        }
        catch(log4cpp::ConfigureFailure &cf)
        {
            std::cerr << cf.what() << std::endl;
            return 1;
        }
    }
    else
    {
        std::cerr << "Cannot initialize PatternLayout" << std::endl;
        return 1;
    }
} 
```

# sql - SMSS 字符格式

> ID：11259654
> 
> 赞同：2
> 
> 时间：2012-06-29T09:52:40.750
> 
> 标签：sql, sql-server-2005, ssms

在 SSMS 2005 中，如果我插入以下字符 (‑)，它会更改相邻字母的字体，我不确定为什么。它似乎没有任何不利影响，因为它选择了我想要的数据（它们是订单号的一部分），但我想确保角色无论如何都不会改变数据。只是视觉上的变化还是角色实际发生了变化？

![在此处输入图像描述](../Images/0a8a637b052cbf195c275058f1b5f679.png)

```
SELECT 
'Hello',
'‑Hello',
'‑He110', 
```

编辑：`N`根据评论添加时输出。

![在此处输入图像描述](../Images/9805f8531fb6460d61627edca8f873f1.png)

# php - 使用 php ftp 写入文件

> ID：11259659
> 
> 赞同：1
> 
> 时间：2012-06-29T09:52:51.537
> 
> 标签：php

我正在导出一些数据，制作文件并将数据写入文件......

我的文件出现在 ftp 服务器上，但它是空的...

这是代码。

```
//Connect to the FTP server
$ftpstream = @ftp_connect('localhost');

//Login to the FTP server
$login = @ftp_login($ftpstream, 'some_login', 'some_password');
if($login) {
//We are now connected to FTP server.
//Create a temporary file
$temp = tmpfile();

//Upload the temporary file to server
@ftp_fput($ftpstream, '/httpdocs/itineraryschedule.txt', $temp, FTP_ASCII);

//Make the file writable by all
ftp_site($ftpstream,"CHMOD 0777 /httpdocs/itineraryschedule.txt");

//Write to file
$fp = fopen('var/www/vhosts/cruiseandmaritime.com/httpdocs/itineraryschedule.txt', 'w');
fputs($fp, 'some data');
fclose($fp);

//Make the file writable only to owner
ftp_site($ftpstream,"CHMOD 0644 /httpdocs/itineraryschedule.txt");
} 
```

我很困惑！

富有的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:57:43.057

去掉@看看有没有报错

还有你的路径

`$fp = fopen('var/www/vhosts/cruiseandmaritime.com/httpdocs/itineraryschedule.txt', 'w');`

似乎有点不对劲

`$fp = fopen('/var/www/vhosts/cruiseandmaritime.com/httpdocs/itineraryschedule.txt', 'w');` 也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T09:57:27.097

我不知道你正在使用的图书馆。但是代码似乎在上传之前上传了您刚刚创建的 tmpfile() 。这就是它为空的原因。

看来您是在本地编写要推送到 FTP 服务器的数据。`var/www/vhosts/cruiseandmaritime.com/httpdocs/itineraryschedule.txt`就在你的机器上。尝试上传它`ftp_fput`- 这应该可以解决问题。

# asp.net - #if （调试符号）的种类，但用于 web.config 文件

> ID：11259664
> 
> 赞同：4
> 
> 时间：2012-06-29T09:53:16.460
> 
> 标签：asp.net, web-config

我想使用不同的部分进行调试和发布配置。尝试使用“web.config 转换”功能，但它仅适用于部署。而不是当我只想在本地构建和执行应用程序时。

我可以在 web.config 中添加一个条件来选择正确的吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T10:01:10.487

如果您使用的是 Visual Studio 2010，那么您可以将它们放在不同的配置文件中。

检查[http://msdn.microsoft.com/en-us/library/wx0123s5.aspx](http://msdn.microsoft.com/en-us/library/wx0123s5.aspx)

# ruby - 捆绑器擦除记录器的格式？

> ID：11259668
> 
> 赞同：1
> 
> 时间：2012-06-29T09:53:22.717
> 
> 标签：ruby, logging, activesupport

只要我需要 gems by `Bundler.require`，我的记录器就不能再正常工作了。

```
require "logger"
logger1 = Logger.new(STDERR)

require 'bundler/setup'
Bundler.require
logger2 = Logger.new(STDERR)

logger1.info 123
logger2.info 123 
```

输出：

```
I, [2012-06-29T17:51:30.323356 #20774]  INFO -- : 123
123 
```

我什至没有`logger`在我的`Gemfile`.

```
source 'http://rubygems.org'

gem "activesupport", "~> 3.2.6", :require => ["active_support", "active_support/core_ext"] 
```

**编辑**：似乎问题出在`ActiveSupport`. 我可以`Logger`同时拥有它吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:01:04.870

`active_support/core_ext`将默认记录器格式更改为`Logger::SimpleFormatter`.

要取回旧的格式化程序，您只需要在初始化后手动分配它：

```
logger2 = Logger.new(STDERR)
logger2.formatter = Logger::Formatter.new

logger2.info 123
=> I, [2012-06-29T13:56:07.580428 #24714]  INFO -- : 123 
```

# lotus-notes - 如何在java中的lotus domino中恢复已删除的文档

> ID：11259678
> 
> 赞同：0
> 
> 时间：2012-06-29T09:54:01.097
> 
> 标签：lotus-notes, lotus-domino

我想在 lotus domino 中恢复一个废弃的文档。在什么基础上，我们可以知道已删除文档的父视图？以及我们如何才能取回文档的所有项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:11:12.890

不幸的是，Lotus Notes 没有提供通过 API 来实现这一点的方法。

Lotus Notes 中的软删除在此处解释： [http ://www-01.ibm.com/support/docview.wss?uid=swg21091152](http://www-01.ibm.com/support/docview.wss?uid=swg21091152)

另请参阅[有关如何创建显示软删除文档的视图的说明](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/Create_a_Trash_view_equivalent_in_applications_without_a_Trash_view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:18:39.707

您不需要知道已删除文档的父视图。视图根据文档中的值决定它包含哪些文档。取消删除文档将导致它出现在任何应该拥有它的视图中。

`@UndeleteDocument`您可以通过在该文档的上下文中评估来恢复 Java中的文档。恢复的文档将像以前一样具有所有项目。

# c# - 3 层架构 - 在层之间传递数据

> ID：11259679
> 
> 赞同：6
> 
> 时间：2012-06-29T09:54:01.793
> 
> 标签：c#, .net, layer, three-tier

试图实现 3 层（不是：层，我只是想在一台机器上逻辑地分离我的项目）架构我发现了很多不同的方法，我很困惑，最好的方法是什么（如果有的话）在 WinForms 应用程序中。

现在我对项目中应该存在的 3 层毫无疑问：

*   UI（表示层）
*   BLL（业务逻辑层）
*   DAL（数据访问层）

在**UI**中，我放置了所有的 WinForms。还必须有一些逻辑来用来自控件的数据填充对象并将其传递给 BLL 层。

在**DAL**中，我想使用 ADO.NET 放置用于数据操作的类和方法，例如：

```
public class OrderDAL
{
    public OrderDAL()
    {
    }

    public int Add(Order order)
    {
        //...add order to database
    }

    public int Update(Order order)
    {
        //...update order in database
    }

    //...etc.
} 
```

问题在于 BLL 和问题 - 我应该使用**数据传输对象**在层之间传递数据，还是应该传递整个类？

如果我选择使用**DTO**，那么我必须创建额外的公共类，`Order`即对 UI、BLL 和 DAL 的引用：

```
public class Order
{
    public int Id { get; set; }
    public DateTime Date { get; set; }
    public string Number { get; set; }
    public string CustomerName { get; set; }

    public Order ()
    {
    }
} 
```

并将逻辑**分离**到 BLL 中：

```
public class OrderBLL
{
    public OrderBLL()
    {
    }

    public int Add(Order order)
    {
        OrderDAL orderDAL = new OrderDAL();
        return orderDAL.Add(order);
    }

    public int Update(Order order)
    {
        OrderDAL orderDAL = new OrderDAL();
        return orderDAL.Update(order);
    }

    //...etc.
} 
```

这种方法以不同的名称被使用，其中包括：[here](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)或[here](http://www.aspdotnet-suresh.com/2010/05/introduction-to-3-tier-architecture-in_17.html)。
另一方面，一些“聪明人”和他们的追随者（比如[这里](http://martinfowler.com/bliki/AnemicDomainModel.html)）称它为[贫血域模型](http://en.wikipedia.org/wiki/Anemic_domain_model)并抱怨它是一个糟糕的设计和不应该使用的反模式。

**优点：**

*   DTO 可以很容易地通过设计来表示数据库表，
*   it's light and clear, contains only fields needed for database,
*   DAL doesn't have to reference BLL,

**The cons:**

*   anti-pattern (sounds scary ;P),
*   violation of OOP (separated properties from methods),
*   because logic is in different class, it may be more difficult to maintain when something changes.

So, the opposite approach is to pass the whole object between layers, like [here](http://www.codeproject.com/Articles/11128/3-tier-architecture-in-C): no DTO, just BLL looking like that:

```
public class Order
{
    public int Id { get; set; }
    public DateTime Date { get; set; }
    public string Number { get; set; }
    public string CustomerName { get; set; }

    public Order()
    {
    }

    public int Add()
    {
        OrderDAL orderDAL = new OrderDAL();
        return orderDAL.Add(this);
    }

    public int Update(Order order)
    {
        OrderDAL orderDAL = new OrderDAL();
        return orderDAL.Update(order);
    }
} 
```

**The pros:**

*   it's a nicely encapsulated object, following OOP rules (I suppose ;)).
*   both logic and properties are in one place, easier to maintain and debug.

**The cons:**

*   to use the object, DAL has to reference BLL (that's not how the 3-tier layer should do, isn't it?).
*   class may contain some fields that are not used in Database, as well as some fields from Database (like Id) do not represent "real life" object.

So, **it looks like whatever I choose, I'll violate some rules**. What's better way then, which should I choose? Maybe there is other approach I haven't found?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T10:01:25.977

I don't like DTOs, because they mean creating a dual hierarchy with little or no value.

I also don't like the idea of making model objects responsible for their own persistence. I prefer a separate persistence layer. Why? Model objects don't always need to be persisted to be useful. Business logic and functionality are orthogonal to persistence.

If you have two layers it's possible to keep a one way dependency graph: persistence knows about model, but model does not know about persistence. You end up with a cyclic dependency if model objects are responsible for persistence. You can never test or use model objects *without* persistence.

My advice? Don't do DTOs. Break out a separate persistence layer.

# tsql - # 在 sql server 2008 中动态拆分字符串

> ID：11259680
> 
> 赞同：0
> 
> 时间：2012-06-29T09:54:06.770
> 
> 标签：tsql, sql-server-2008r2-express

我有一个这样的字符串：

```
","","","41","20120627063343-0210600-41" 
```

我这样写了我的查询来拆分上面的字符串

```
declare @s varchar(max)
set @s = '","","","41","20120627063343-0210600-41"'
select right(replace(@s,',',''),26) as output 
```

我得到以下输出

```
output
-------
20120627063343-0210600-41" 
```

我想要上面的字符串这样的输出

```
YEAR         TIME         NO        ID
----         -----       ----      ---- 
2012-06-27    06:33:43    0210600   41 
```

帮我！

谢谢和问候，阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:26:24.513

我怀疑这将与其他人建议的子字符串方法一样*快*，但它*可能*更具可读性，无论它是另一种选择。

```
DECLARE @parsedString VARCHAR(255)
DECLARE @inputString VARCHAR(255)

SET @inputString = '","","","41","20120627063343-0210600-41"' 
SET @parsedString = REPLACE(REPLACE(REPLACE(REPLACE(@inputString, '-', '.'), '",', '.'), '"', ''), '...', '')

SELECT  PARSENAME(@parsedString, 1) as [Id],
        PARSENAME(@parsedString, 2) as [No],
        CAST(LEFT(PARSENAME(@parsedString, 3), 8) AS DATE) as [Year],
        STUFF(STUFF(RIGHT(PARSENAME(@parsedString, 3), 6), 3, 0, ':'), 6, 0, ':') as [Time] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:07:10.667

一种可能的解决方案：

```
declare @s varchar(max), @test varchar(26)
set @s = '","","","41","20120627063343-0210600-41"'
select @test = left(right(replace(@s,',',''),26),25)

select SUBSTRING(@test, 1, 4) + '-' + SUBSTRING(@test, 5, 2) + '-' + SUBSTRING(@test, 7, 2) as 'YEAR',
       SUBSTRING(@test, 9, 2) + ':' + SUBSTRING(@test, 11, 2) + ':' + SUBSTRING(@test, 13, 2) as 'TIME',
       SUBSTRING(@test, 16, 7) as 'NO',
       SUBSTRING(@test, 24, 2) as 'ID' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:02:59.287

使用[SUBSTRING](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFkQFjAA&url=http://msdn.microsoft.com/en-us/library/ms187748.aspx&ei=YH3tT5nIIqqI0QHUw6mEDg&usg=AFQjCNEDvAX_q69j_JaAjCFrW_RaA_F_Bw)函数，并假设字符串示例`20120627063343-0210600-41`总是相同的固定长度，您可以提取所需的所有部分。尝试这个：

```
declare @s varchar(max)
declare @t varchar(max)
set @s = '","","","41","20120627063343-0210600-41"'
set @t = right(@s, 26) 

select left(@t, 4) + '-' + substring(@t, 5, 2) + '-' + substring(@t, 7, 2) AS [YEAR],
    substring(@t, 9, 2) + ':' + substring(@t, 11, 2) + ':' + substring(@t, 13, 2) AS [HOUR],
    substring(@t, 16, 7) AS [NO], 
    substring(@t, 24, 2) AS [ID] 
```

# android - 我们可以用高版本的低版本替换应用程序吗

> ID：11259684
> 
> 赞同：0
> 
> 时间：2012-06-29T09:54:25.917
> 
> 标签：android

两个带有 API 的 Android apk 一个版本名称为 1.0，另一个版本名称为 1.1。我可以在 1.1 上安装 1.0 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:57:42.577

为达到这个，

您必须先**卸载**更高版本，然后再**安装**旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:09:58.057

版本名称无关紧要。只需将`android:versionCode`名为 1.0 的版本设置为高于用于名为 1.1 的版本的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:00:42.310

不，这是不可能的。

**在安装任何低版本之前，需要先卸载高版本。**

# ipad - 设备令牌 - Apple 推送通知服务

> ID：11259689
> 
> 赞同：0
> 
> 时间：2012-06-29T09:54:44.903
> 
> 标签：ipad, ios5, ios4, xcode4.2, xcode4.3

每次我打开我的应用程序时，设备令牌都会改变吗？苹果服务器每次都使用相同的设备令牌还是新的重新生成的设备令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:59:21.047

您可以查看开发人员文档，其中提到了以下内容 -

`The form of this phase of token trust ensures that only APNs generates the token which it will later honor, and it can assure itself that a token handed to it by a device is the same token that it previously provisioned for that particular device—and only for that device.`

`If the user restores backup data to a new device or reinstalls the operating system, the device token changes.`

因此，在重新安装操作系统之前，它们是 iPhone 独有的。

您可以在此处查看详细信息 - [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW12](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW12)

# android - 隐藏 sd 卡上带有照片的文件夹

> ID：11259690
> 
> 赞同：1
> 
> 时间：2012-06-29T09:54:55.243
> 
> 标签：android

我将图片保存到 SD 卡上的应用程序中。当我去画廊时，我可以看到那些照片。如何将我在应用程序中使用的图片保存在 sd 卡上，但它们必须在手机的图库中不可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:57:24.430

在您的外部文件目录中包含一个名为 .nomedia 的空文件（注意文件名中的点前缀）。这将阻止 Android 的媒体扫描仪读取您的媒体文件并将它们包含在画廊或音乐等应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-02T11:47:57.637

在存储数据时添加这两行，然后内容将自动隐藏并且图像在设备库中不可见。

```
File dstFile = new File(file.getParent(), "." + file.getName());
file.renameTo(dstFile); 
```

这对我很有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T03:45:31.693

您也可以通过将 foldername 重命名为 .foldername 在文件夹名称前放置一个点

但是将 .nomedia 文件放在文件夹中，使用 .foldername 会将所有媒体文件隐藏在一个目录中

大量 android 用户将专辑封面存储在专辑文件夹中，并且 .dirname 或 .nomedia 解决方案对画廊和音乐播放器都隐藏了所有内容。所需的功能是从图库中隐藏并在音乐播放器中显示（否则，如果我们看不到封面图片，就没有理由不删除它们吗？）

这是解决方案；将所有专辑封面图片文件重命名为`albumart.jpg`

我的详细答案可以在这里找到[阻止 sd 卡上的图像出现在画廊中？](https://stackoverflow.com/questions/5707102/stop-images-on-sd-card-from-showing-up-in-gallery/13666182#13666182)

# android - 使用异步任务实现图形的实时更新

> ID：11259691
> 
> 赞同：0
> 
> 时间：2012-06-29T09:55:06.383
> 
> 标签：android, android-asynctask

我是 android 新手，需要帮助将空心代码转换为实时更新图，显示心电图跟踪。现在让我们使用正弦曲线。所以我需要一个显示移动正弦图的图表。现在我只是一个简单的代码，它使用 aChartEngine 插件显示一个静态图。使用可扩展模式（线程/异步任务）实现移动（实时更新）图的最简单方法是什么？

```
public class LiveView extends Activity {
Button startTimer;
TextView heartRate, battery;
LinearLayout lineGraphLayout;
View lineGraph;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.liveview);
    startTimer = (Button) findViewById(R.id.bStartTimer);
    heartRate = (TextView) findViewById(R.id.tvHeartRate);
    battery = (TextView) findViewById(R.id.tvBatteryLevel);
    lineGraphLayout = (LinearLayout) findViewById(R.id.lineGraph);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    if (lineGraph == null) {
        // sample Values
        lineGraph = getLineGraphView();
        lineGraphLayout.addView(lineGraph);
    } else
        ((GraphicalView) lineGraph).repaint();
}

private View getLineGraphView() {
    int[] x = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }; // x values!
    int[] y = { 30, 34, 45, 57, 77, -89, 100, 111, 123, 145 }; 
    TimeSeries series = new TimeSeries("Lead 1");
    for (int i = 0; i < x.length; i++)
        series.add(x[i], y[i]);

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    mRenderer.addSeriesRenderer(renderer);

    View tempView = ChartFactory.getLineChartView(this, dataset, mRenderer);
    tempView.setBackgroundColor(Color.WHITE);
    return tempView;
} 
```

}

我尝试使用 TimerTask ......但应用程序只是挂起！

```
public void toCallAsynchronous() {
    TimerTask doAsynchronousTask;
    final Handler handler = new Handler();
    Timer timer = new Timer();

    doAsynchronousTask = new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            handler.post(new Runnable() {
                public void run() {
                    if (isRunning) {
                        try {
                            lineGraph = getLineGraphView();
                            lineGraphLayout.addView(lineGraph);
                            ((GraphicalView) lineGraph).repaint();

                        } catch (Exception e) {
                            // TODO Auto-generated catch block

                        }
                    }
                }
            });

        }

    };

    timer.schedule(doAsynchronousTask, 0, 50);// execute in every 500
                                                    // ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:26:28.977

我认为 a`Handler`比 an `AsycTask`or a thread 更好。处理程序直接在 UI 线程上运行并且易于实现：

```
public class LiveView extends Activity {
    //...
    RefreshHandler handler = new RefreshHandler();

    class RefreshHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            // Update your graph here
            sendMessageDelayed(obtainMessage(0), 500); // next update in 500 ms
        }
    }
} 
```

要开始实时更新，请`handler.sendMessage(handler.obtainMessage(0));`在代码中的某处调用。

# ruby - 我可以在 Windows 中将 Sass 与批处理脚本一起使用吗

> ID：11259692
> 
> 赞同：7
> 
> 时间：2012-06-29T09:55:08.977
> 
> 标签：ruby, windows, batch-file, sass

在我本地机器上的 web 项目中，我使用了一个相当简单的 Sass 设置。在同一个文件夹中，我有 /scss/style.scss 和 /css/style.css

因此，为了在工作时运行 Sass，我只需在 Ruby 终端中编写以下代码：

```
cd "C:\Users\Puppybeard\Documents\Aptana Studio 3 Workspace\Project Title"
sass --watch scss/style.scss:css/style.css 
```

工作正常，但有点麻烦，所以我试图弄清楚如何用批处理脚本做等效的事情。我尝试了以下方法，但这完全是一场灾难，我的计算机试图打开无限数量的 Ruby 控制台。

```
cd "C:\Ruby193\bin"
start ruby
cd "C:\Users\Puppybeard\Documents\Aptana Studio 3 Workspace\Project Title"
sass --watch scss/style.scss:css/style.css
exit 
```

我想我需要做的是启动 Ruby 在后台运行，而不是打开 Ruby exe。有谁知道Ruby是如何工作的，或者这就是Ruby的工作方式？显然，我是 Sass、Ruby 和批处理脚本的新手，所以您能给我的任何见解都会对我有很大帮助，谢谢。

* * *

编辑：我让它像这样工作

```
cd "\Ruby193\bin"
sass --watch "C:\Users\Puppybeard\Documents\Aptana Studio 3 Workspace\Project Title\scss\style.scss:C:\Users\Puppybeard\Documents\Aptana Studio 3 Workspace\Project Title\css\style.css" 
```

我认为它应该更整洁，并且怀疑 sass 需要设置它的 $PATH 。

* * *

编辑 2：我使用以下说明为 Ruby 设置 Path 变量：[http ://groups.google.com/group/beginning-rails/browse_thread/thread/1c68665013a60081](http://groups.google.com/group/beginning-rails/browse_thread/thread/1c68665013a60081)

在我的例子中，我需要添加的路径是 C:\Ruby193\bin 现在，当我在 web 项目的根目录中有脚本时，我需要的唯一行是：

> sass --watch scss/style.scss:css/style.css

如果我想拥有可以在计算机上的任何位置运行的东西，我可以保留将目录更改为文件夹位置的部分。但是，脚本未指定项目位置这一事实意味着我可以将其复制到使用相同结构的任何项目中。

值得努力？从长远来看，可能，是的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:17:14.090

将您原来的两个命令放入您的批处理文件中。所以 .bat 文件的内容是：

```
cd "C:\Users\Puppybeard\Documents\Aptana Studio 3 Workspace\Project Title"
sass --watch scss/style.scss:css/style.css 
```

就那么简单。像这样的批处理文件一个接一个地运行每一行上的每个命令，就像您单独键入每个命令一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-19T11:27:53.060

**如果您尝试使用这样的批处理文件更新多个 css 文件**：

```
scss A.scss ../CSS/A.css
scss B.scss ../CSS/B.css
echo Done. 
```

...但只有第一个 scss 命令行执行，并且批处理文件永远不会完成，即您永远不会看到“完成。”，这是修复它的原因和方法：

scss 实际上是一个错误的批处理文件，无法将控制权返回给您的批处理文件。我通过绕过 scss 批处理文件并运行 ruby​​ 解决了这个问题，它直接是 scss gem，如下所示：

```
ruby C:/Ruby193/bin/scss A.scss ../CSS/A.css
ruby C:/Ruby193/bin/scss B.scss ../CSS/B.css
echo Done. 
```

您需要将路径指向 ruby​​，或者在上面放置绝对路径。

# android - 在没有 AIDL 的情况下实现回调

> ID：11259697
> 
> 赞同：1
> 
> 时间：2012-06-29T09:55:44.490
> 
> 标签：android, service, aidl

如何在`LocalBinder`不使用 AIDL 的情况下实现回调？

我看过 android LocalService.java 的例子，但它只绑定到服务，没有回调到活动。我在示例中看到的唯一回调示例是 RemoteBinder.java，但它使用 AIDL，我想避免 AIDL。

谢谢！

# c# - 需要帮助 Linq Query Group By + Count

> ID：11259700
> 
> 赞同：3
> 
> 时间：2012-06-29T09:56:01.777
> 
> 标签：c#, linq

我有以下表格，其中包含 ActivityLog 的记录：

```
ID, UserId,      Category,   Created
1       11     DeAssigned    05/10/2012
2       11          LogIn    05/11/2012
3       20       Assigned    06/15/2012
4       11       Assigned    06/10/2012
5       20     DeAssigned    06/13/2012
6       20       Assigned    07/12/2012
7       11     DeAssigned    07/16/2012
8       20       Assigned    08/15/2012
... 
```

现在我**想**查询表以创建相同的结构**相同的结果，例如**：

```
var data = new[] { 
                    new { Month = "05", Assigned = 14, DeAssigned = 5, LogIn=1 },
                    new { Month = "06", Assigned = 5, DeAssigned = 2, LogIn=0 },
                    new { Month = "07", Assigned = 50, DeAssigned = 8, LogIn=0 },
                    new { Month = "08", Assigned = 15, DeAssigned = 1, LogIn=0 }
}; 
```

我所取得的成就：

```
var result = (from l in repoA.GetAll()
                      where   l.Created >= System.DateTime.Now.AddYears(-1)
                      group l by new { l.Created.Value.Month, l.Category }
                      into groups
                      orderby  groups.Key.Month 
                      select new
                                 {
                                     Month = groups.Key.Month,
                                     Category = groups.Key.Category,
                                     Count = groups.Count()
                                 }); 
```

没有最佳结果，但计算按月份分组的所有活动：

```
 [0] {Month = 6, Category = Assigned, Count = 2}
 [0] {Month = 6, Category = Designed, Count = 1}
 [0] {Month = 6, Category = LogIn, Count = 1}
 [0] {Month = 7, Category = Assigned, Count = 3} 
```

如何查询我的表格以将我的结果格式化为“水平计数”格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:19:08.127

或者更简单：

```
var result = (from l in repoA.GetAll()
                           where   l.Created >= System.DateTime.Now.AddYears(-1) 
                           group l by l.Created.Month into groups
                           orderby groups.Key ascending
                           select new
                              {
                                  Month = groups.Key,
                                  Assigned = groups.Where(g => g.Category == "Assigned").Count(),
                                  Deassigned = groups.Where(g => g.Category == "DeAssigned").Count(),
                                  LogIn = groups.Where(g => g.Category == "LogIn").Count()
                              }); 
```

# java - 如何在空的自动完成字段中返回arrayList的整个值

> ID：11259709
> 
> 赞同：0
> 
> 时间：2012-06-29T09:56:51.063
> 
> 标签：java, wicket

这是我对 autocompleteField 的实现：

```
 add(new AutoCompleteTextField<String>("hladaneSlovo") {

            private static final long serialVersionUID = 1L;

            @Override
            protected Iterator<String> getChoices(String prefix) {
                return hladaneSlova.startsWith(prefix).iterator();
            }

        }); 
```

我的 arrayList 中的方法 startWith 看起来像：

```
public List<String> startsWith(String prefix) {
    if (prefix == null || prefix.isEmpty()) {
        return this;
    } else {
        List<String> list = new LinkedList<String>();
        for (String s : this) {
            if (s.startsWith(prefix)) {
                list.add(s);
            }
        }
        return list;
    }
} 
```

所以我想在字段为空但此实现不起作用时获取所有值。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:10:15.123

代码看起来不错。您可能希望`trim()`在检查之前额外添加字符串`isEmpty()`，也许周围只有一些杂散的空格。顺便说一句，子类化`java.util.ArrayList`是一个坏主意。您应该设计自己的在`List`内部使用 a 的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:58:46.020

我找到了。In`AutoCompleteTextField`是默认值为 false`AutoCompleteSetting`的属性在哪里`setShowListOnEmptyInput`

所以我创建：

```
 AutoCompleteSettings settings = new AutoCompleteSettings();
        settings.setShowListOnEmptyInput(true); 
```

它工作:)

# android - 是否可以在不开始新活动的情况下调用 putExtras() 和 getExtra() ？

> ID：11259710
> 
> 赞同：0
> 
> 时间：2012-06-29T09:57:06.303
> 
> 标签：android

我有两个活动，它们通过每个活动的片段并排显示在一个屏幕上。当我单击一个活动上的按钮时，我想发送一个字符串，然后另一个活动应该检索我发送的字符串。

我知道用经典的方式`setString()`和`getString()`方法可以做到这一点。但我想知道，无论是否在新屏幕上打开目标活动，都可以完成`putExtra()`吗`getExtra()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:01:36.910

您可以将两个活动都**`intent`**作为**全局变量**，并尝试`putExtra()`从一个活动中使用，然后再`getExtra()`由另一个活动使用。

例如，

```
public class activityOne extends Activity
{
   public static Intent intent = null;
   @Override
   protected synchronized final void onCreate(final Bundle savedInstanceState)
   {
      intent = getIntent();
   }
}

public class activityTwo extends Activity
{
   public static Intent intent = null;
   @Override
   protected synchronized final void onCreate(final Bundle savedInstanceState)
   {
      intent = getIntent();
   }
} 
```

现在，无论您想要什么，您都可以访问他们的意图，例如`activityOne.intent,activityTwo.intent`进行**空**检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:18:20.963

您可以将意图作为广播发送，并让接收片段在该广播开始时注册到该广播（并在其销毁时取消注册）。

发送片段：

```
Intent intent= new Intent(PARAM_TRANSFER);
intent.putExtra(key, extra);
sendBroadcast(intent); 
```

接收片段：

登记：

```
IntentFilter intentFilter = new IntentFilter(PARAM_TRANSFER);
registerReceiver(mReceiver, intentFilter); 
```

注销：

```
try {
   unregisterReceiver(mReceiver);
} catch (Exception e) {} 
```

获取参数：

```
private class MyReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
     intent.getExtra(key);
  }
} 
```

# backbone.js - _.bindAll(this) 和 Uncaught TypeError：无法读取主干-relation.js 中未定义的属性“idAttribute”

> ID：11259720
> 
> 赞同：6
> 
> 时间：2012-06-29T09:57:27.600
> 
> 标签：backbone.js, backbone-relational

我有两个模型（用户和任务），它们是`Backbone.RelationalModel`.

这两个模型的关系如下：

```
// Task model

    var Task = Backbone.RelationalModel.extend({

        relations: [
            {
                type: 'HasOne',
                key: 'user',
                relatedModel: User
            }
        ],

        urlRoot: 'someUrl'

    }); 
```

然后我有一个集合，其代码如下所示：

```
var FollowerCollection = Backbone.Collection.extend({
    initialize: function () {
         _.bindAll(this);
    }
    model: User
});

var User = Backbone.RelationalModel.extend({

}); 
```

* * *

当我在 FollowerCollection 上进行提取时，出现以下错误：

```
 Uncaught TypeError: Cannot read property 'idAttribute' of undefined 
```

在主干-relation.js 的第 1565 行`backbone-relation version 0.5.0`

* * *

这里有一段backbone-relation.js的代码

```
if ( !( model instanceof Backbone.Model ) ) {
    // Try to find 'model' in Backbone.store. If it already exists, set the new properties on it.
       var existingModel = Backbone.Relational.store.find( this.model, model[ this.model.prototype.idAttribute ] ); 
```

* * *

这个问题与`_.bindAll(this)`因为如果我评论它，它可以正常工作。
为什么？有任何想法吗？

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:21:39.137

删除 _.bindAll 确实有效。

很遗憾，因为它是一个非常方便的功能。它必须与 Backbone 的某些部分严重交互。我在 v9.10

我一直使用这种方法，但有时只会出现问题（比如当你想批量添加到集合中时）。

对我来说，问题出在这个 Backbone.js 方法中：

```
// Get a model from the set by id.
get: function(obj) {
    if (obj == null) return void 0;
    this._idAttr || (this._idAttr = this.model.prototype.idAttribute);
    return this._byId[obj.id || obj.cid || obj[this._idAttr] || obj];
}, 
```

代码失败，`this.model.prototype`因为原型未定义。什么？是的。真的。

问题是当 _.bindAll 被调用时，它会绑定集合的所有属性，正如@jakee 所说。这似乎包括 Collection.model，我认为这是一个错误。

解决方案是绑定各个方法，直到解决此问题。

github上有一个现有但已关闭的问题：[https](https://github.com/documentcloud/backbone/issues/2080) ://github.com/documentcloud/backbone/issues/2080 似乎当前的维护者不喜欢这种方法，但我不明白为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T17:21:10.190

就像我的项目真的很大一样，我不得不创建我的自定义 bindAll。这里有代码，它适用于最新版本。我绑定了实例“this”的所有属性，除了那些具有原型的属性，比如集合中的 this.model

[https://gist.github.com/patrixd/8025952](https://gist.github.com/patrixd/8025952)

```
 //bindAll from underscore that allows 1 argument to bind all the functions from the prototype, 
 //or if there are more arguments they will be the only binded
 _.originalBindAll = _.bindAll;
 _.bindAll = function (that) {
      var funcs = Array.prototype.slice.call(arguments, 1),
          validKeys = [], fn;
      if (funcs.length == 0) {
      for (var i in that) {
          fn = that[i];
          if (fn && typeof fn == "function" && (!fn.prototype ||           
              _.keys(fn.prototype).length == 0))
              validKeys.push(i);
    }
    _.originalBindAll.apply(_, [that].concat(validKeys));
}
else
    _.originalBindAll.apply(_, arguments); 
```

};

# c# - 当我断开一个客户端套接字时，Windows 服务关闭

> ID：11259721
> 
> 赞同：2
> 
> 时间：2012-06-29T09:57:28.627
> 
> 标签：c#, multithreading, sockets, tcpclient

我有一个在套接字上监听的服务器。此服务器是 Windows 服务。

我的问题是：当我断开客户端连接时`socket.Disconnect(false);`，服务如此关闭，其他客户端被强制关闭或新连接被拒绝。我认为当服务杀死这个客户端线程时，服务不会回到主线程。

粘贴我用于服务的代码（服务器功能）。对线程的管理是否正确？

我运行服务器

```
this.tcpListener = new TcpListener(ipEnd);
this.listenThread = new Thread(new ThreadStart(ListenForClients));
this.listenThread.Start();

private void ListenForClients()
{
  this.tcpListener.Start();

  while (true)
  {
    //blocks until a client has connected to the server
    TcpClient client = this.tcpListener.AcceptTcpClient();

    //create a thread to handle communication
    //with connected client
    Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
    clientThread.Start(client);
  }
}

private void HandleClientComm(object client)
{
  TcpClient tcpClient = (TcpClient)client;
  NetworkStream clientStream = tcpClient.GetStream();

  byte[] message = new byte[4096];
  int bytesRead;

  while (true)
  {
    bytesRead = 0;

    try
    {
      //blocks until a client sends a message
      bytesRead = clientStream.Read(message, 0, 4096);
    }
    catch
    {
      //a socket error has occured
      break;
    }

    if (bytesRead == 0)
    {
      //the client has disconnected from the server
      break;
    }

    //message has successfully been received
    ASCIIEncoding encoder = new ASCIIEncoding();
    System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
  }

  tcpClient.Close();
} 
```

抱歉我的英语不好，感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:42:56.797

您提供的代码似乎几乎是正确的。您的应用程序崩溃的唯一原因是该行

```
NetworkStream clientStream = tcpClient.GetStream(); 
```

如果您查看[的文档`GetStream()`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.getstream)，您会发现如果客户端未连接，它可能会抛出 InvalidOperationException。因此，在客户端连接并立即断开连接的情况下，这可能是一个问题。因此，只需使用 try-catch 保护此代码。

此外，有时您可能不会得到明确的异常报告，但在多线程应用程序中会崩溃。要处理此类异常，请订阅 AppDomain.CurrentDomain.UnhandledException 事件。

# gwt - 带有 GWT 的单选按钮矩阵

> ID：11259723
> 
> 赞同：0
> 
> 时间：2012-06-29T09:57:29.957
> 
> 标签：gwt, radio-button, radio-group

我想用 GWT 创建一个单选按钮矩阵。在每一行和每一列中只能选择一个单选按钮。
想法是，使用 GWT，一个单选按钮不能属于两个不同的 RadioGroup。
你有什么想法我可以实现这个单选按钮矩阵吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:46:08.107

我想到了两种方法：

1）您可以尝试复选框并包含 if/else 语句，以便只允许从每一行中选择一个单选按钮。

2）可能使用复合材料。

3) 使用 Ext-GWT 查看此示例：[http ://www.java2s.com/Code/Java/GWT/UsingRadioGrouptogroupRedioButtonsExtGWT.htm](http://www.java2s.com/Code/Java/GWT/UsingRadioGrouptogroupRedioButtonsExtGWT.htm)

# android - 无法使用 abortBroadcast() 阻止 SMS？

> ID：11259729
> 
> 赞同：5
> 
> 时间：2012-06-29T09:58:12.027
> 
> 标签：android, sms, broadcastreceiver, messaging

我正在开发一个短信拦截器应用程序，其中我使用广播接收器和 abortBroadcast() 方法 - 正如许多人在这里建议的那样 - 以防止消息到达收件箱并提醒用户。但就我而言，当我使用模拟器发送短信时，短信不会被阻止，并到达收件箱，我也会收到错误消息：

```
06-29 09:19:05.854: E/BroadcastReceiver(868): BroadcastReceiver trying to return result during a non-ordered broadcast 
```

这不会终止模拟器中的应用程序，但是当我在手机上测试它时应用程序会终止。

是的，我已将接收者的优先级设置为较高的数字，并要求您在此处看到的权限：

```
<receiver android:name="SMSMonitor">  
    <intent-filter android:priority="9999999">
        <action android:name="android.provider.Telephony.SMS_RECEIVED"></action> 
    </intent-filter>  
</receiver>

<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.RAISED_THREAD_PRIORITY"/> 
```

最后，这是我的代码：

```
public class SMSMonitor extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        boolean isOn = loadState(context,"isOn");// is blocking enabled?
        Bundle bundle = intent.getExtras();
        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        String mAddress;
        String mBody;
        String mTime;
        if(isOn){
            // if spam blocking is enabled.
            for (int n = 0; n < messages.length; n++) {
                smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
                mAddress=smsMessage[n].getDisplayOriginatingAddress().toString();

                mBody=smsMessage[n].getDisplayMessageBody().toString();

                mTime=getTime();
                if(isBlackList( mAddress)== true) {
                    this.addLog(mAddress, mBody, mTime);
                    abortBroadcast();
                    Toast.makeText(context,"Incoming SMS was blocked and logged.", Toast.LENGTH_LONG).show();  
                }
            }
        }
    }
} 
```

[这里](http://www.mail-archive.com/android-developers@googlegroups.com/msg05015.html)有人建议不能中止 SMS 广播，因为 Android 不允许。但是我在这里看到很多人建议使用 abortBroadcast() 来阻止短信，而且我知道市场上有一些短信拦截器应用程序实际上可以阻止短信。我不知道他们是否使用 abortbroadcast。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:10:38.983

**绝对可以做到**这一点，您编写的代码非常好，

尝试将优先级从`<intent-filter android:priority="9999999">`更改为`<intent-filter android:priority="99999999">`，基本上比您给出的优先级更高，然后尝试检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:39:25.700

“从 Android 1.6 开始，传入的 SMS 消息广播 (android.provider.Telephony.SMS_RECEIVED) 以“有序广播”的形式传递——这意味着您可以告诉系统哪些组件应该首先接收广播。” 我使用的是Android 1.5 并且广播是无序的！

感谢这个人在这里[链接](https://stackoverflow.com/questions/419184/how-to-delete-an-sms-from-the-inbox-in-android-programmatically)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T11:25:51.960

它是否显示来自接收器的 Toast？可能您的 Receiver 未在 Manifest 中正确注册。

尝试改变，

```
<receiver android:name="SMSMonitor"> 
```

到

```
<receiver android:name=".SMSMonitor"> 
```

# java - 如何在 JRXML 中构建具有多个查询的数据源？

> ID：11259733
> 
> 赞同：0
> 
> 时间：2012-06-29T09:58:18.723
> 
> 标签：java, jasper-reports

我需要知道如何在 jasper 报告中动态生成报告？在我的情况下，表有 id、name、design 作为字段。我需要在一个 jrxml 文件中处理五个不同的查询。

第一个将选择整个表。第二个将选择 id,name 单独。仅第三个名字。

在这里，我成功地选择了整个表，但对如何运行其余表感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:09:32.400

除了 jschoen 提出的三个选项之外，还有第四个选项：

4)**使用子数据集在一份报告中运行多个查询。**[您可以在单个 jasper 文档中查看多个查询](https://stackoverflow.com/q/7482412/813002)的答案，以了解如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:24:05.227

您有 3 个选择：

1)**您可以将所有 5 个查询合并为一个查询。**这可能很难（有时不可能），但应该先尝试。一般来说，您报告中的数据在某种程度上与您报告的其他数据相关。将完全不相关的数据按行放在报告中似乎毫无意义。所以你应该能够做到这一点。

这是您最好的选择。您应该能够将这 5 个查询合并为一个查询。它将使您的生活更轻松，维护更轻松，更不用说初始设计更容易了。您将能够在单个 jrxml 中完成所有操作。您可以在 jrxml 中进行分组、格式化和排序等。所以仔细看看这个。如果您遇到问题，请在此站点上创建一个新问题，提供查询和表格描述，我敢打赌这里的一些 SQL 专家会帮助您。

2）**您可以完全放弃将查询放在 JRXML 中，而是通过包含所有数据的 java 传递数据源。**查看[Using a POJO as an IReport Datasouce](https://stackoverflow.com/q/2169300/3340)了解如何执行此操作的示例。

如果您不能执行上面的选项 1，这并不是一个可怕的选项。这是一个不错的折衷方案，但您仍在运行多个查询来构建数据源，这将对实际运行报告所需的时间产生负面影响。

3）**您可以使用子报表，这样每个报表都有一个查询，您可以使用上一个查询的结果来运行下一个。**这最终会为您提供报告的树形层次结构，在您的情况下，这意味着创建 5 个报告。

在您的情况下，我认为这不是一个好主意，但只是想确保您知道这是一种选择。设置将过于复杂，并且难以维护。

# php - MySQL 查询，在 2 个表之间获得正确答案

> ID：11259734
> 
> 赞同：0
> 
> 时间：2012-06-29T09:58:21.670
> 
> 标签：php, mysql

我有这个脚本，但我没有做到，它从我们的游戏服务器获取统计数据，然后将它们放入数据库中，效果很好。

我还有另一个脚本，我没有做到，它从数据库中获取数据并在网页上显示统计信息，这就是我的问题所在。

这就是我目前所拥有的：

```
 $dogtags=mysqli_fetch_array(mysqli_query($dbconn, "SELECT SUM(`Count`) FROM ".$sqlprefix."dogtags".$suffix."")); 
```

然后调用它

```
define("DOGTAGS", $dogtags['0']); 
```

问题在于，所有 3 台服务器都显示相同的狗标签，而不是每台服务器。

所以 MySQL 查询需要更改，我相信并且我需要帮助。

好的，我有 2 个表，我需要查询中的数据才能得到正确的答案

```
tbl_dogtags
KillerID
VictimID
Count

tbl_server_player
StatsID
ServerID
PlayerID 
```

我需要`KillerID`从 from中`tbl_dogtags`获取并将其与`PlayerID`from匹配`tbl_server_player`，然后执行 where `ServerID`from`tbl_server_player`来给我答案，但我不知道该怎么做。

所以像这样

SUM(Count), KillerID = PlayerID where ServerID

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:01:28.703

使用一个简单的`INNER JOIN`

```
SELECT * FROM tbl_dogtags d
INNER JOIN tbl_server_player sp ON d.KillerID = sp.PlayerId
WHERE sp.ServerID [THE_REST_OF_YOUR_CONDITION] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:38:51.447

让我自己和其他人都轻松一些。

只是要删除该统计信息。

感谢您的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:03:02.917

此查询将完成您的工作。

```
SELECT killerID FROM tbl_dogtags D, tbl_server_player P 
  ON D.KillerID=P.PlayerID 
  WHERE P.ServerId={your condition} 
```

# iphone - 保存在 NSMutableArray 中时会覆盖值

> ID：11259747
> 
> 赞同：0
> 
> 时间：2012-06-29T09:58:49.657
> 
> 标签：iphone, objective-c, ipad

我将用户信息保存在 NSMutableDictionary 中，键为“用户名”，然后将此字典保存在另一个 NSMutableDictionary 中，键为“名称”，然后将字典保存在 NSMutableArray 中。但问题是，每当我用不同的用户名保存另一个用户时，它都会覆盖 NSMutableArray 中的值。下面是我正在使用的代码

```
-(void) saveUserData:(NSString *)username 
```

{ NSLog(@"\nsaveDataBarButtonTapped \n");

```
NSLog(@"the count is %d",[[[ArraysManager sharedInstance] getTotalUserArray] count]);

NSLog(@"ArraysManager description is  %@ ",[[[ArraysManager sharedInstance] getTotalUserArray] description]);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *directory = [paths objectAtIndex:0];
NSString *userArrayFilePath = [[NSString alloc] initWithString:[directory stringByAppendingPathComponent:@"userData"]];

if (username.length != 0)
{
    [dataDictionary setObject:[NSString stringWithFormat:@"%@",username] forKey:@"username"];
    [dataDictionary setObject:[NSString stringWithFormat:@"%lf",totalValue] forKey:@"totalValue"];
    [dataDictionary setObject:[NSString stringWithFormat:@"%lf",totalPayable]  forKey:@"totalPayable"];

    [userDictionary setObject:dataDictionary  forKey:@"userDictionary"];

    [[[ArraysManager sharedInstance] getTotalUserArray] addObject:userDictionary];
    [[[ArraysManager sharedInstance] getTotalUserArray] writeToFile:userArrayFilePath atomically:NO];

    [dataDictionary removeAllObjects];
    [userDictionary removeAllObjects];

    NSLog(@"ArraysManager description is  %@ ",[[[ArraysManager sharedInstance] getTotalUserArray] description]);
}

else 
{
    UIAlertView *noNameAlertView = [[UIAlertView alloc] initWithTitle:@"No Name Found" 
                                                              message:@"Please Enter the User Name" 
                                                             delegate:self 
                                                    cancelButtonTitle:@"Ok" 
                                                    otherButtonTitles:nil, nil];
    [noNameAlertView show];
    [noNameAlertView release];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:08:07.267

我认为你应该写：

```
 [userDictionary setObject:dataDictionary  forKey:username]; 
```

（其实我不明白你为什么这样做；

```
[[[ArraysManager sharedInstance] getTotalUserArray] addObject:userDictionary]; 
```

似乎您每次都在添加相同的字典。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:01:58.517

我认为您在两种情况下都使用相同的密钥保存，因此它访问相同的数组，您需要更改不同字典的密钥。

编辑：

```
[userDictionary setObject:dataDictionary  forKey:[NSString stringWithFormat:@"name%d,nameCount"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T11:42:45.213

您正在`addObject`使用相同的`NSMutableDictionary`对象。

之后你检查过`count`房产`addObject`吗？

为了快速修复，只需`copy`将字典添加到数组中即可。

[[[ArraysManager sharedInstance] getTotalUserArray] addObject:[[userDictionary copy] autorelease];

（`autorelease`对于非 ARC 配置）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T11:15:03.413

```
[dataDictionary removeAllObjects];
[userDictionary removeAllObjects]; 
```

我认为上述两个对象都是成员变量，您正在重用这些成员变量来将数据添加到您的数组中。从字典中删除对象不会创建新的字典对象，而是在相同的内存位置进行更新。您的数组将有多个字典和子字典，但它们都有 2 个对象，它们都位于相同的内存位置。

代替这些成员变量，将它们用作局部变量。在此方法中初始化它们并将它们添加到数组中。稍后在此方法结束之前释放它们。

希望能帮助到你

# java - 使用注释的本机 hibernate/jpa 查询中的标量值问题

> ID：11259749
> 
> 赞同：1
> 
> 时间：2012-06-29T09:58:53.947
> 
> 标签：java, sql, hibernate, annotations, jpa-2.0

我正在尝试运行一个包含 group by 子句的简单 SQL 查询。

历史实体：

```
@Entity
@NamedNativeQueries(value = {
    @NamedNativeQuery(name = HistoryEntity.FIND_ALL_BY_REFERENCE,
                      query = "SELECT h.id, h.reference, h.lrn "
                          + "FROM dataHistory h "
                          + "WHERE h.reference = :referenceNumber OR h.lrn = :referenceNumber",
                      resultSetMapping = HistoryEntity.FIND_ALL_BY_REFERENCE_MAPPING),
    @NamedNativeQuery(name = HistoryEntity.FIND_REFERENCE_BY_LRN,
                      query = "SELECT h.reference as reference "
                          + "FROM dataHistory h "
                          + "WHERE h.lrn = :lrn "
                          + "GROUP BY h.reference",
                      resultSetMapping = "resultMapping")                   
})
@SqlResultSetMappings(value = {
    @SqlResultSetMapping(name = HistoryEntity.FIND_ALL_BY_REFERENCE_MAPPING, entities = {
            @EntityResult(entityClass = HistoryEntity.class, fields = {
                @FieldResult(name = "id", column = "id"),
                @FieldResult(name = "reference", column = "reference"),
                @FieldResult(name = "lrn", column = "lrn")
            })
    }),
    @SqlResultSetMapping(name = "resultMapping", columns = {
            @ColumnResult(name = "reference")
    })
})
public class HistoryEntity implements Serializable {

/**
 * @param referenceNumber Referenz (LRN oder BRN)
 * @param brnList Liste von BRNs
 */
public static final String FIND_ALL_BY_REFERENCE = "HistoryEntity.findAllByReference";

public static final String FIND_ALL_BY_REFERENCE_MAPPING = "HistoryEntity.findAllByReferenceMapping";

private Integer id;

private String reference;
private String lrn;

public HistoryEntity() {}

@Id
public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getReference() {
    return reference;
}

public void setReference(String reference) {
    this.reference= reference;
}

public String getLrn() {
    return lrn;
}

public void setLrn(String lrn) {
    this.lrn = lrn;
} 
```

在服务类中，我执行如下查询：

```
Query query = entityManager.createNamedQuery("myQuery");
query.setParameter("lrn", lrn);

List resultList = query.getResultList(); 
```

根据查询的结果，列表包含 java.lang.Character 的：

案例 1：
SQL-Result（如果我在 sql 客户端中运行 sql）：
| 参考 |
| 123456780678MMM |
| 123456781678MMM |
| 123456782678MMM |
| 123456783678MMM |

Java-List-Result（在 Java 调试视图中）：
[1, 1, 1, 1]

案例2：
SQL-结果：
| 参考 |
| 123456780678MMM |

Java 列表结果：
[1]

我正在寻找一种方法来运行一个带有标量值的简单 sql 查询（使用 hibernate/jpa）来获得一个包含结果值的列表。

有没有办法在不使用标准 api 的情况下做到这一点？

如果您需要更多信息，请告诉我！

非常感谢您的帮助。

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:18:36.617

问题是休眠中的一个错误，它将结果转换为 java.lang.Character inseat of java.lang.String。结果中仅返回每行的第一个字符。

还有一个问题对解决方案有更详细的描述：
[Hibernate native query - char(3) column](https://stackoverflow.com/questions/4873201/hibernate-native-query-char3-column)

如果我在查询中使用 cast-function 如下，它可以工作：

```
@NamedNativeQuery(name = HistoryEntity.FIND_REFERENCE_BY_LRN,
                  query = "SELECT cast(h.reference as VARCHAR(27)) as reference "
                      + "FROM dataHistory h "
                      + "WHERE h.lrn = :lrn "
                      + "GROUP BY h.reference",
                  resultSetMapping = "resultMapping") 
```

PS：我发现引用的问题很晚。对不起！

# android - Android中的帐篷屏幕

> ID：11259750
> 
> 赞同：-1
> 
> 时间：2012-06-29T09:58:57.783
> 
> 标签：android

一位朋友问我是否可以创建一个可以在另一个应用程序中将白色更改为红色/黄色或另一种颜色的 Android 应用程序，因此对所有应用程序的屏幕应用一个色调，直到它被关闭。

我不知道从哪里开始，有人知道吗？有人可以指出我阅读的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:26:00.940

我不认为你可以这样做，除非所有其他应用程序都没有 100% 透明的背景。

# .net - 如何通过命令行 (Putty) 在 Windows 中检查 .NET 框架版本和 Microsoft Visual C++ 运行时库版本

> ID：11259751
> 
> 赞同：1
> 
> 时间：2012-06-29T09:59:02.060
> 
> 标签：.net, putty

我经常使用 putty 来访问一些 Windows Server 机器。要对安装进行故障排除，我需要知道该机器安装了哪个 .NET 框架版本和 MS Visual C++ 运行时库。

由此：[问题](https://stackoverflow.com/questions/2238696/is-there-a-way-to-determine-the-net-framework-version-from-the-command-line)

我知道如何通过以下方式获取 .NET 框架版本：

```
dir %WINDIR%\Microsoft.Net\Framework\v* 
```

但不是 MS Visual C++ 运行时库。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:13:25.550

您需要查看[WinSxS](http://en.wikipedia.org/wiki/Side-by-side_assembly)文件夹。里面有*很多*东西，因为它包含跨多个架构的多个组件的多个版本。但是你应该能够从中收集到你需要的东西。

# erlang - Erlang/OTP R15B01：ct_line 替换？

> ID：11259757
> 
> 赞同：0
> 
> 时间：2012-06-29T09:59:33.790
> 
> 标签：erlang, erlang-otp

Erlang/OTP R14B04 提供了[ct_line](http://erldocs.com/R14B04/common_test/ct_line.html)，一个用于插入行号 ( ) 的解析转换器`otp_src_R14B04/lib/common_test/src/ct_line.erl`。我在 R15B01 中找不到它，所以我想它一定已经被删除了。你知道有类似功能的替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:26:31.363

由于[异常中的行号](http://erlang.org/download/otp_src_R15B.readme)已添加到运行时系统（终于！），`ct_line`因此在 R15 中删除了转换器（请参阅[提交](https://github.com/erlang/otp/commit/f43c0a51cd15b2b0f8adba4bb9ec5531dd9d8820)） 。

# android - monkeyrunner 可以与 android 通知交互吗？

> ID：11259760
> 
> 赞同：0
> 
> 时间：2012-06-29T10:00:02.107
> 
> 标签：android, monkeyrunner

我开始看 android monkeyrunner，并想用它测试我的应用程序。

我的应用程序在 android 下拉菜单中打开了一个通知，我希望 monkeyrunner 测试通知是否正常运行。是否可以使用monkeyrunner“点击”传入的通知并验证结果？

我搜索了文档，似乎我只能测试活动，但也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:57:18.880

MonkeyRunner 能够与整个设备进行交互。但是可能很难正确设置拖动事件来获取通知栏。一个更简单的方法来告诉你的通知栏中的内容可能是使用`adb shell dumpsys notification`. 你可以在 MonkeyRunner 中通过`device.shell('dumpsys notification')`.

# java - 从 tomcat5.5 迁移到 tomcat7 时出现以下 jsp 错误

> ID：11259764
> 
> 赞同：0
> 
> 时间：2012-06-29T10:00:23.277
> 
> 标签：java, tomcat7

我正在尝试迁移我的应用程序以使用 tomcat7 而不是 tomcat5.5，但出现以下错误。我在 Window 32 位机器上使用 tomcat-7.0.27：

2012 年 6 月 29 日下午 3:01:05 org.apache.jasper.compiler.TldLocationsCache tldScanJar 信息：已扫描至少一个 JAR 以查找 TLD，但未包含 TLD。启用此记录器的调试日志记录以获取已扫描但未在其中找到 TLD 的 JAR 的完整列表。在扫描期间跳过不需要的 JAR 可以缩短启动时间和 JSP 编译时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T12:29:32.543

您可以定义扫描 TLD 时要跳过的 jar 文件。这是在 conf/catalina.properties 中完成的。这将使错误（显然只是一条 INFO 消息）消失并加快应用程序的启动/编译过程。

# actionscript-3 - 修改形状 as3

> ID：11259765
> 
> 赞同：0
> 
> 时间：2012-06-29T10:00:23.823
> 
> 标签：actionscript-3, line, shapes

假设我使用 Shape.graphics 的 moveTo() 和 lineTo() 方法绘制了一条带有多条边的线。我可以稍后修改这些边缘之一吗？例如：

```
var line:Shape = new Shape();
line.graphics.lineStyle(2, 0x000000, .75);

line.graphics.moveTo(10,10);              
line.graphics.lineTo(50,50); // Can I modify coordinates of the edge created on this line? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:10:32.890

不，你不能。一旦绘制，就没有对线的引用，所以你不能修改它们。您需要清除图形并重新绘制。

# .htaccess - 301 将任意段重定向到第一个段

> ID：11259767
> 
> 赞同：1
> 
> 时间：2012-06-29T10:00:30.983
> 
> 标签：.htaccess, redirect, expressionengine, segments

我试图重定向页面，例如：

> /selected-work/project-name-1
> /selected-work/project-name-2
> /selected-work/project-name-3
> /selected-work/category/category-name

只是

> /工作/

是否有一个我可以使用的 301 重定向，它会注意到它在第一个之后有一个段，然后全部重定向？

使用 .htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:05:59.720

我设法通过这样做来排序：

> 重定向匹配 301 ^/selected-work(.*)$ [http://www.website.co.uk/work](http://www.website.co.uk/work)

现在将 /selected-work/ 之后的所有子文件夹重定向到 /work/

# java - Java中的相对路径

> ID：11259773
> 
> 赞同：1
> 
> 时间：2012-06-29T10:01:02.230
> 
> 标签：java, file, filesystems

我的程序必须使用驻留在另一个目录中的某些文件。现在我正在使用绝对路径来指定文件的位置。但我知道，与我的程序所在的位置相比，这些文件的相对位置将保持不变。如何在 Java 中使用相对路径来指定这些文件的位置？

例如我的程序驻留在

```
/home/username/project/src/com/xyz/ 
```

..目标文件在..

```
/home/username/project/secure/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:20:34.853

> 例如，我的程序位于 /home/username/project/src/com/xyz/
> 
> 目标文件位于 /home/username/project/secure/

知道程序源代码所在的位置并没有帮助。您需要知道的是程序执行时的当前目录。这实际上可以是任何东西。即使您从（例如）Eclipse 启动应用程序，应用程序启动器也允许您在运行配置中为子进程指定“当前目录”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:02:39.433

您当前的路径。

```
 currentPath= /home/username/project/src/com/xyz/; 
```

“/home/username/project/secure/”文件夹的相对路径是

```
relativePath= ../../../secure; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:17:59.173

在 Java 中，您可以使用它`getParentFile()`来遍历树。

```
File currentDir = new File(".");
File parentDir = currentDir.getParentFile(); 
```

这将是安全的，因为您没有使用系统相关的文件分隔符 (../)

# delphi - NSIS 插件“nsScreenshot”在 Windows NT 6.x 中不起作用

> ID：11259775
> 
> 赞同：6
> 
> 时间：2012-06-29T10:01:07.670
> 
> 标签：delphi, plugins, screenshot, delphi-xe, nsis

我添加了一个比原始插件晚 3 年发布的代码，但它仍然返回错误...

代码是直截了当的恕我直言......但我仍然很可能错过某些方面......

请参阅此代码：

```
{
        nsScreenshot NSIS Plugin
        (c) 2003: Leon Zandman (leon@wirwar.com)

        Re-compiled by: Linards Liepins (linards.liepins@gmail.com)
        Code by: http://www.delphitricks.com/source-code/forms/make_a_desktop_screenshot.html
        (e) 2012.
}
library nsScreenshot;

uses
  nsis in './nsis.pas',
  Windows,
  Jpeg,
  graphics,
  types,
  SysUtils;

const
  USER32 = 'user32.dll';

type
  HWND = type LongWord;
  {$EXTERNALSYM HWND}
  HDC = type LongWord;
  {$EXTERNALSYM HDC}
  BOOL = LongBool;
  {$EXTERNALSYM BOOL}

{$EXTERNALSYM GetDesktopWindow}
function GetDesktopWindow: HWND; stdcall; external USER32 name 'GetDesktopWindow';
{$EXTERNALSYM GetWindowDC}
function GetWindowDC(hWnd: HWND): HDC; stdcall; external USER32 name 'GetWindowDC';
{$EXTERNALSYM GetWindowRect}
function GetWindowRect(hWnd: HWND; var lpRect: TRect): BOOL; stdcall; external USER32 name 'GetWindowRect';
{$EXTERNALSYM ReleaseDC}
function ReleaseDC(hWnd: HWND; hDC: HDC): Integer; stdcall; external user32 name 'ReleaseDC';

function GetScreenshot(Filename: string; Hwnd: HWND; var Width: integer; var Height: integer): boolean; forward;
function ScreenShot(Bild: TBitMap; hWnd: HWND): boolean; forward;

function Grab_FullScreen(hwndParent: HWND; string_size: integer; variables: PChar; stacktop: pointer):integer; cdecl;
var
  buf: array[0..1024] of char;
  W,H: integer;
begin
  Result := 0;
  // set up global variables
  Init(hwndParent,string_size,variables,stacktop);

  // Get filename to save to
  PopString;//(@buf);

  // Get a full-screen screenshot
  if GetScreenShot(buf,GetDesktopWindow,W,H) then begin
    // Everything went just fine...

    // Push image dimensions onto stack
    PushString(PChar(IntToStr(H)));
    PushString(PChar(IntToStr(W)));

    // Push result onto stack
    PushString(PChar('ok'));
    Result := 1;
  end else begin
    // Something went wrong...
    PushString(PChar('error'));
  end;
end;

function Grab(hwndParent: HWND; string_size: integer; variables: PChar; stacktop: pointer):integer; cdecl;
var
  buf: array[0..1024] of char;
  grabWnd: HWND;
  Filename: string;
  W,H: integer;
begin
  Result := 0;
  // set up global variables
  Init(hwndParent,string_size,variables,stacktop);

  try
    // Get filename to save to
    PopString;//(@buwf);
    Filename := buf;

    // Get window handle of window to grab
    PopString;//(@buf);
    grabWnd := StrToInt(buf);
  except
    PushString(PChar('error'));
    exit;
  end;

  // Get screenshot of parent windows (NSIS)
  if GetScreenShot(Filename,grabWnd,W,H) then begin
    // Everything went just fine...

    // Push image dimensions onto stack
    PushString(PChar(IntToStr(H)));
    PushString(PChar(IntToStr(W)));

    // Push result onto stack
    PushString(PChar('ok'));
    Result := 1;
  end else begin
    // Something went wrong...
    PushString(PChar('error'));
  end;
end;

function GetScreenshot(Filename: string; Hwnd: HWND; var Width: integer; var Height: integer): boolean;
var
  bmp: TBitmap;
begin
  Result := false;

  // Get screenshot
  bmp := TBitmap.Create;
  try
    try
      if ScreenShot(bmp,Hwnd) then begin
        Width  := bmp.Width;
        Height := bmp.Height;
        bmp.SaveToFile(Filename);
        Result := true;
      end;
    except
      // Catch exception and do nothing (function return value remains 'false')
    end;
  finally
    bmp.Free;
  end;
end;

function ScreenShot(Bild: TBitMap; hWnd: HWND): boolean;
var
  c: TCanvas;
  r, t: TRect;
  h: THandle;
begin
  Result := false;

  c := TCanvas.Create;
  c.Handle := GetWindowDC(GetDesktopWindow);

  h := hWnd;
  if h <> 0 then begin
    GetWindowRect(h, t);
    try
      r := Rect(0, 0, t.Right - t.Left, t.Bottom - t.Top);
      Bild.Width  := t.Right - t.Left;
      Bild.Height := t.Bottom - t.Top;
      Bild.Canvas.CopyRect(r, c, t);
    finally
      ReleaseDC(0, c.Handle);
      c.Free;
    end;
    Result := true;
  end;
end;

function GetScreenToFile(FileName: string; Quality: Word; Percent: Word): boolean;
var
  Bmp: TBitmap;
  Jpg: TJpegImage;
begin
  Bmp := TBitmap.Create;
  Jpg := TJpegImage.Create;
  try
    Bmp.Width := GetDeviceCaps(GetDc(0), 8) * Percent div 100;
    Bmp.Height := GetDeviceCaps(GetDc(0), 10) * Percent div 100;
    SetStretchBltMode(Bmp.Canvas.Handle, HALFTONE);
    StretchBlt(Bmp.Canvas.Handle, 0, 0, Bmp.Width, Bmp.Height, GetDc(0), 0, 0, GetDeviceCaps(GetDc(0), 8), GetDeviceCaps(GetDc(0), 10), SRCCOPY);
    Jpg.Assign(Bmp);
    Jpg.CompressionQuality := Quality;
    Jpg.SaveToFile(FileName);
  finally
    Jpg.free;
    Bmp.free;
  end;
end;

function ScreenToFile(hwndParent: HWND; string_size: integer; variables: PChar; stacktop: pointer):integer; cdecl;
var
  buf: array[0..1024] of char;
  grabWnd: HWND;
  Filename: string;
  W,H: integer;
begin
  Result := 0;
  Init(hwndParent,string_size,variables,stacktop);
  try
    PopString;
    Filename := buf;
    PopString;
    grabWnd := StrToInt(buf);
  except
    PushString(PChar('error'));
    exit;
  end;
  if GetScreenToFile(Filename,W,H) then
  begin
    PushString(PChar('ok'));
    Result := 1;
  end else
  begin
    PushString(PChar('error'));
  end;
end;

  //ScreenToFile('SHOT.JPG', 50, 70);

exports Grab_FullScreen,
        Grab,
        ScreenToFile;

begin
end. 
```

搜索`ScreenToFile`。

感谢您的任何意见，。该插件对于安装程序文档生成自动化至关重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T11:42:06.813

## 1\. NSIS插件核心单元问题：

### 1.1。关于错误的字符串：

从您自己的答案帖子中得出您正在使用 NSIS 的 ANSI 版本。由于您在 Delphi XE 中编译的库代码中使用了`string`和`Char`映射`PChar`到 Unicode 字符串，因此您在 NSIS 设置应用程序和库之间传递了错误数据。

### 1.2\. 关于核心插件单元的另一种观点：

我检查了您稍作修改的插件核心单元[`NSIS.pas`](http://pastebin.com/S3ncqY89)，并且存在一些问题，这会阻止您的插件正常工作。然而，当我看到这个单元时，我首先想到的是将独立的过程和函数包装到一个类中。这就是我所做的。

### 1.3\. NSIS.pas v2.0：

由于您目前只使用了原始核心单元中的 3 个函数，因此[`your code`](http://pastebin.com/PvxxhtEg)我简化了仅使用这些函数的类（还有一个用于显示消息框的额外函数）。所以这里是修改后的插件核心单元的代码。我不是数据操作专家，所以也许可以简化以下代码，但它至少在我测试过的 Delphi XE2 和 Delphi 2009 中有效。这是代码：

```
unit NSIS;

interface

uses
  Windows, CommCtrl, SysUtils;

type
  PParamStack = ^TParamStack;
  TParamStack = record
    Next: PParamStack;
    Value: PAnsiChar;
  end;
  TNullsoftInstaller = class
  private
    FParent: HWND;
    FParamSize: Integer;
    FParameters: PAnsiChar;
    FStackTop: ^PParamStack;
  public
    procedure Initialize(Parent: HWND; ParamSize: Integer; Parameters: PAnsiChar;
      StackTop: Pointer);
    procedure PushString(const Value: string = '');
    function PopString: string;
    function MessageDialog(const Text, Caption: string; Buttons: UINT): Integer;
  end;

var
  NullsoftInstaller: TNullsoftInstaller;

implementation

procedure TNullsoftInstaller.Initialize(Parent: HWND; ParamSize: Integer;
  Parameters: PAnsiChar; StackTop: Pointer);
begin
  FParent := Parent;
  FParamSize := ParamSize;
  FParameters := Parameters;
  FStackTop := StackTop;
end;

procedure TNullsoftInstaller.PushString(const Value: string = '');
var
  CurrParam: PParamStack;
begin
  if Assigned(FStackTop) then
  begin
    CurrParam := PParamStack(GlobalAlloc(GPTR, SizeOf(TParamStack) + FParamSize));
    StrLCopy(@CurrParam.Value, PAnsiChar(AnsiString(Value)), FParamSize);
    CurrParam.Next := FStackTop^;
    FStackTop^ := CurrParam;
  end;
end;

function TNullsoftInstaller.PopString: string;
var
  CurrParam: PParamStack;
begin
  Result := '';
  if Assigned(FStackTop) then
  begin
    CurrParam := FStackTop^;
    Result := String(PAnsiChar(@CurrParam.Value));
    FStackTop^ := CurrParam.Next;
    GlobalFree(HGLOBAL(CurrParam));
  end;
end;

function TNullsoftInstaller.MessageDialog(const Text, Caption: string;
  Buttons: UINT): Integer;
begin
  Result := MessageBox(FParent, PChar(Text), PChar(Caption), Buttons);
end;

initialization
  NullsoftInstaller := TNullsoftInstaller.Create;
finalization
  if Assigned(NullsoftInstaller) then
    NullsoftInstaller.Free;

end. 
```

### 1.4\. 修改后的插件核心单元的用法：

如您所见，`NullsoftInstaller`声明了全局变量，它允许您使用我包装过您之前使用过的函数的类。这个变量中的对象实例的使用通过初始化和结束部分被简化，当库被加载和释放时，这个对象实例被创建并分配给这个变量。

所以你唯一需要在你的代码中做的就是`NullsoftInstaller`像这样使用这个全局变量：

```
uses
  NSIS;

function ScreenToFile(Parent: HWND; ParamSize: Integer; Parameters: PAnsiChar;
  StackTop: Pointer): Integer; cdecl;
var
  InputString: string;
begin
  Result := 0;

  // this is not necessary, if you keep the NullsoftInstaller object instance 
  // alive (and there's even no reason to free it, since this will be done in 
  // the finalization section when the library is unloaded), so the following
  // statement has no meaning when you won't free the NullsoftInstaller
  if not Assigned(NullsoftInstaller) then
    NullsoftInstaller := TNullsoftInstaller.Create;

  // this has the same meaning as the Init procedure in the original core unit
  NullsoftInstaller.Initialize(Parent, ParamSize, Parameters, StackTop);
  // this is the same as in the original, except that returns a native string
  InputString := NullsoftInstaller.PopString;
  NullsoftInstaller.MessageDialog(InputString, 'PopString Result', 0);
  // and finally the PushString method, this is also the same as original and
  // as well as the PopString supports native string for your Delphi version
  NullsoftInstaller.PushString('ok');
end; 
```

## 2\. Aero 合成窗口截图

这是我尝试的屏幕截图过程，`TakeScreenshot`in 代码。它需要一个额外的参数`DropShadow`，当启用 Aero 合成时，它应该截取包括窗口阴影在内的屏幕截图。但是，我找不到一种与将假窗口放在捕获的窗口后面不同的方法来做到这一点。它有一个很大的弱点；有时会发生捕获完成后假窗口未完全显示的情况，因此它会在捕获的窗口周围截取当前桌面的屏幕截图，而不是后面的白色假窗口（尚未显示）。所以设置`DropShadow`为 True 现在只是在实验阶段。

当`DropShadow`False （没有投影的屏幕截图）时，它可以正常工作。我的猜测是，由于上述 Unicode Delphi 与 ANSI NSIS 问题，您传递了错误的参数。

```
library nsScreenshot;

uses
  Windows, SysUtils, Types, Graphics, DwmApi, Forms, JPEG, NSIS;

procedure CalcCloseCrop(Bitmap: TBitmap; const BackColor: TColor;
  out CropRect: TRect);
var
  X: Integer;
  Y: Integer;
  Color: TColor;
  Pixel: PRGBTriple;
  RowClean: Boolean;
  LastClean: Boolean;
begin
  LastClean := False;
  CropRect := Rect(Bitmap.Width, Bitmap.Height, 0, 0);
  for Y := 0 to Bitmap.Height-1 do
  begin
    RowClean := True;
    Pixel := Bitmap.ScanLine[Y];
    for X := 0 to Bitmap.Width - 1 do
    begin
      Color := RGB(Pixel.rgbtRed, Pixel.rgbtGreen, Pixel.rgbtBlue);
      if Color <> BackColor then
      begin
        RowClean := False;
        if X < CropRect.Left then
          CropRect.Left := X;
        if X + 1 > CropRect.Right then
          CropRect.Right := X + 1;
      end;
      Inc(Pixel);
    end;
    if not RowClean then
    begin
      if not LastClean then
      begin
        LastClean := True;
        CropRect.Top := Y;
      end;
      if Y + 1 > CropRect.Bottom then
        CropRect.Bottom := Y + 1;
    end;
  end;
  with CropRect do
  begin
    if (Right < Left) or (Right = Left) or (Bottom < Top) or 
      (Bottom = Top) then
    begin
      if Left = Bitmap.Width then
        Left := 0;
      if Top = Bitmap.Height then
        Top := 0;
      if Right = 0 then
        Right := Bitmap.Width;
      if Bottom = 0 then
        Bottom := Bitmap.Height;
    end;
  end;
end;

procedure TakeScreenshot(WindowHandle: HWND; const FileName: string;
  DropShadow: Boolean);
var
  R: TRect;
  Form: TForm;
  Bitmap: TBitmap;
  Target: TBitmap;
  DeviceContext: HDC;
  DesktopHandle: HWND;
  ExtendedFrame: Boolean;
const
  CAPTUREBLT = $40000000;
begin
  ExtendedFrame := False;
  if DwmCompositionEnabled then
  begin
    DwmGetWindowAttribute(WindowHandle, DWMWA_EXTENDED_FRAME_BOUNDS, @R,
      SizeOf(TRect));
    if DropShadow then
    begin
      ExtendedFrame := True;
      R.Left := R.Left - 30;
      R.Top := R.Top - 30;
      R.Right := R.Right + 30;
      R.Bottom := R.Bottom + 30;
    end;
  end
  else
    GetWindowRect(WindowHandle, R);

  SetForegroundWindow(WindowHandle);
  Bitmap := TBitmap.Create;
  try
    Bitmap.PixelFormat := pf24bit;
    Bitmap.SetSize(R.Right - R.Left, R.Bottom - R.Top);
    if ExtendedFrame then
    begin
      DesktopHandle := GetDesktopWindow;
      DeviceContext := GetDC(GetDesktopWindow);
      Form := TForm.Create(nil);
      try
        Form.Color := clWhite;
        Form.BorderStyle := bsNone;
        Form.AlphaBlend := True;
        Form.AlphaBlendValue := 0;
        ShowWindow(Form.Handle, SW_SHOWNOACTIVATE);
        SetWindowPos(Form.Handle, WindowHandle, R.Left, R.Top, 
          R.Right - R.Left, R.Bottom - R.Top, SWP_NOACTIVATE);
        Form.AlphaBlendValue := 255;
        BitBlt(Bitmap.Canvas.Handle, 0, 0, R.Right - R.Left, R.Bottom - R.Top,
          DeviceContext, R.Left, R.Top, SRCCOPY or CAPTUREBLT);
      finally
        Form.Free;
        ReleaseDC(DesktopHandle, DeviceContext);
      end;
      Target := TBitmap.Create;
      try
        CalcCloseCrop(Bitmap, clWhite, R);
        Target.SetSize(R.Right - R.Left, R.Bottom - R.Top);
        Target.Canvas.CopyRect(Rect(0, 0, R.Right - R.Left, R.Bottom - R.Top),
          Bitmap.Canvas, R);
        Target.SaveToFile(FileName);
      finally
        Target.Free;
      end;
    end
    else
    begin
      DeviceContext := GetWindowDC(WindowHandle);
      try
        BitBlt(Bitmap.Canvas.Handle, 0, 0, R.Right - R.Left, R.Bottom - R.Top,
          DeviceContext, 0, 0, SRCCOPY or CAPTUREBLT);
      finally
        ReleaseDC(WindowHandle, DeviceContext);
      end;
      Bitmap.SaveToFile(FileName);
    end;
  finally
    Bitmap.Free;
  end;
end;

function ScreenToFile(Parent: HWND; ParamSize: Integer; Params: PAnsiChar;
  StackTop: Pointer): Integer; cdecl;
var
  I: Integer;
  FileName: string;
  DropShadow: Boolean;
  Parameters: array[0..1] of string;
begin
  Result := 0;
  if not Assigned(NullsoftInstaller) then
    NullsoftInstaller := TNullsoftInstaller.Create;

  NullsoftInstaller.Initialize(Parent, ParamSize, Params, StackTop);

  for I := 0 to High(Parameters) do
    Parameters[I] := NullsoftInstaller.PopString;
  FileName := Parameters[1];
  if not DirectoryExists(ExtractFilePath(FileName)) or
    not TryStrToBool(Parameters[0], DropShadow) then
  begin
    NullsoftInstaller.PushString('error');
    NullsoftInstaller.PushString('Invalid parameters!');
    Exit;
  end;

  try
    TakeScreenshot(Parent, FileName, DropShadow);
    NullsoftInstaller.PushString('ok');
    Result := 1;
  except
    on E: Exception do
    begin
      NullsoftInstaller.PushString('error');
      NullsoftInstaller.PushString(E.Message);
      NullsoftInstaller.MessageDialog(E.Message, 'Error', 0);
    end;
  end;
end;

exports
  ScreenToFile;

begin

end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T10:22:15.730

`GetDesktopWindow`可能应该是，`GetDesktopWindow()`但通常你可以（并且应该）使用 NULL 而不是 GetDesktopWindow()。此外，一个函数使用 GetDC，另一个函数使用 GetWindowDC ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T12:28:05.473

经过一番搜索，我发现以下代码适用于以下 SO 问题：

[如何在 Delphi 中截取活动窗口的屏幕截图？](https://stackoverflow.com/questions/661250/how-to-take-a-screenshot-of-the-active-window-in-delphi)

包含 NSIS 的所有其他选项导致 BitBtl 函数崩溃，可能是因为 Aero 及其相关的 DWM 雾...

另外，建议使用此功能。没有经过喷气测试...

[http://msdn.microsoft.com/en-us/library/dd162869.aspx](http://msdn.microsoft.com/en-us/library/dd162869.aspx)

尽管如此，还是有一些问题：

*   玻璃框架被绘制为透明的
*   NSIS 的文件名被转换为有点损坏的宽字符串......
*   如果您更改页面（使用 nsdialogs 和 MUI2 ），则可以仅通过对话框背景颜色绘制文件...

# git - 使用 .gitignore 忽略文件夹？

> ID：11259778
> 
> 赞同：23
> 
> 时间：2012-06-29T10:01:17.427
> 
> 标签：git, directory, gitignore

> **可能重复：**
> [在 Windows 上忽略 Git 存储库中的目录](https://stackoverflow.com/questions/343646/ignoring-directories-in-git-repos-on-windows)

我有几个文件夹，缓存分散在一个 webapp 中。

我正在使用 Git 跟踪项目。

我已将空 index.html 文件添加到每个缓存文件夹。

我想忽略`cache`文件夹的所有内容，但默认情况下文件夹是空的，因此 index.html 的原因。

我努力了

```
*cache/*
!*cache/index.html 
```

但它并没有忽视它们。

# drupal-6 - Drupal Views 6.x-2.x 无法正确渲染

> ID：11259779
> 
> 赞同：0
> 
> 时间：2012-06-29T10:01:21.680
> 
> 标签：drupal-6, drupal-views

我在我的 drupal 管理员中定义了一个视图，它输出一个博客列表。问题是，当我尝试在前端查看它时，列表会显示我在管理员中预览它时出现的标记，而不是预期的标记。

我已经`drush cc`全部运行以消除缓存问题的可能性。

我是 drupal 和视图的新手。

**稍后编辑：** 经过更多调查，我意识到如果我在管理区域的编辑视图中运行“重新扫描模板文件”，它不会选择模板，它不会显示在列表中。

视图的名称是 views-view-fields--featured-blogs--page-1.tpl

有什么想法吗？

谢谢，拉杜

# macos - Mac OS X 中 64 位 Posix 写入的问题？（HDF5 中的 2gb+ 数据集）

> ID：11259784
> 
> 赞同：1
> 
> 时间：2012-06-29T10:01:27.797
> 
> 标签：macos, file-io, posix, large-files, hdf5

我在 Mac os x (10.7) 上遇到了 HDF5 的一些问题。经过一些测试，我确认 POSIX 写入似乎存在缓冲区大小超过 2gb 的问题。我编写了一个测试程序来演示这个问题：

```
#define _FILE_OFFSET_BITS 64

#include <iostream>
#include <unistd.h>
#include <fcntl.h>

void writePosix(const int64_t arraySize, const char* name) {
    int fd = open(name, O_WRONLY | O_CREAT);

    if (fd != -1) {

        double *array = new double [arraySize];

        double start = 0.0;
        for (int64_t i=0;i<arraySize;++i) {
            array[i] = start;
            start += 0.001;
        }

        ssize_t result = write(fd, array, (int64_t)(sizeof(double))*arraySize);

        printf("results for array size %lld = %ld\n", arraySize, result);

        close(fd);
    } else {
        printf("file error");
    }
}

int main(int argc, char *argv[]) {
    writePosix(268435455, "/Users/tpav/testfolder/lessthan2gb");
    writePosix(268435456, "/Users/tpav/testfolder/equal2gb");
} 
```

输出：

```
results for array size 268435455 = 2147483640
results for array size 268435456 = -1 
```

如您所见，我什至尝试定义文件偏移量。对此我有什么可以做的，还是我应该开始寻找一种解决方法，以编写 2gb+ 块的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:43:53.347

在 HDF5 虚拟文件驱动程序中，我们将太大而无法调用的 I/O 操作分解为多个较小的 I/O 调用。POSIX I/O 的 Mac 实现采用 size_t 参数，因此我们的代码假定最大 I/O 大小将是可以放入 ssize_t 类型的变量（读/写的返回类型）中的最大值。可悲的是，事实并非如此。

请注意，这仅适用于单个 I/O 操作。您可以创建超过 2GB/4GB 障碍的文件，只是不能在一次调用中写入 >2GB。

这应该在 HDF5 1.8.10 补丁 1 中修复，该补丁将于 2013 年 1 月下旬发布。

# cordova - 应用程序在发送位置phonegap android时关闭

> ID：11259787
> 
> 赞同：0
> 
> 时间：2012-06-29T10:01:30.500
> 
> 标签：cordova, geolocation

我已经花了 3 天的时间，直到我使用 phonegap 在 android 上使用 gps 来开发应用程序。

我正在使用示例来了解它是如何工作的，但是当我尝试将位置发送到数据库时遇到了一些问题。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Device Properties Example</title>

<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError, {
        enableHighAccuracy : true,
        maximumAge : Infinity,
        timeout : 15000
    });
}

// onSuccess Geolocation
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');

    var id = 1;
    pagina = window.open( "http://mywebpage:80/open/posicionCamion.php?lat=" + position.coords.latitude + "&lon=" + position.coords.longitude + "&id=" + id);
    pagina.close();                  

    element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                        'Longitude: '          + position.coords.longitude             + '<br />' +
                        'Altitude: '           + position.coords.altitude              + '<br />' +
                        'Accuracy: '           + position.coords.accuracy              + '<br />' +
                        'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                        'Heading: '            + position.coords.heading               + '<br />' +
                        'Speed: '              + position.coords.speed                 + '<br />' +
                        'Timestamp: '          +                                   position.timestamp          + '<br />';

}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}

</script>
</head>
<body>
 <p id="geolocation">Finding geolocation...</p>
</body>
</html> 
```

如果我删除 pagina.window 和 pagina.close 行，它工作正常。但我想每 15 秒将位置发送到一个 php 文件，这个 php 文件每次都会更新数据库。

使用这些行，应用程序关闭但没有发送任何内容。有办法做我想做的事吗？

我使用网络浏览器测试了 php 文件，它工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:22:57.433

`window.open()`打开一个浏览器窗口，该窗口在设备中无法按预期工作。尝试用`window.open()`ajax 请求替换调用。

```
<script type="text/javascript">
function callAjax(url){
    var req = new XMLHttpRequest();
    req.open('GET', url, false); 
    req.send();
    if(req.status == 200 || req.status == 0) {
        alert(req.responseText);
    }
}
</script> 
```

# excel - RExcel 有哪些替代品？

> ID：11259788
> 
> 赞同：1
> 
> 时间：2012-06-29T10:01:31.010
> 
> 标签：excel, r, rexcel

我们在使用 RExcel 时遇到问题，我正在尝试寻找替代方案。我们的用户喜欢使用 Excel，而我们的开发人员喜欢在 R 中进行统计。因此，我们使用 Excel 作为数据输入的前端，在 R 中进行分析，并在 Excel 中呈现结果。

然而，由于我们在使用 RExcel 时遇到的问题，我真的很想有一个不同的解决方案。假设我们不能从等式中删除 Excel 或 R，除了 RExcel 之外，还有其他方法可以连接它们吗？我在互联网上的搜索没有帮助。

[编辑]

我被要求将其表述为 SO 可以解决的问题。我需要在 Excel 中输入数据，将其传递给 R，然后取回数据。不允许使用 RExcel，并且传输需要对用户透明。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T09:30:06.203

也许这样的替代方法是使用 ExcelDNA 和 R.Net 库在 C# 中为 Excel 编写函数。

一些信息： [https ://github.com/Excel-DNA/Samples/tree/master/UsingRDotNet](https://github.com/Excel-DNA/Samples/tree/master/UsingRDotNet) [如何让 ExcelDNA 与 R.Net 一起工作](https://stackoverflow.com/questions/29279908/how-to-get-exceldna-work-with-r-net)

# meteor - 尽管基础数据没有变化，模板仍会不断重绘

> ID：11259796
> 
> 赞同：7
> 
> 时间：2012-06-29T10:02:07.077
> 
> 标签：meteor

谁能告诉我为什么这个例子中渲染的 Live HTML 不断清除然后在无限循环中重绘？此示例代码最大化了我笔记本电脑上的 CPU ..

环境：

*   流星 0.3.7
*   Mac OS 狮子
*   在 Safari 5.1.7、Chrome Canary 22.0.1189、Chrome 21.0.1180、Firefox 11.0 和 13.0 中测试

初始项目创建：

```
meteor create test
cd test
meteor add coffeescript
mv test.js test.coffee
meteor 
```

测试咖啡：

```
Records = new Meteor.Collection("records")

if Meteor.is_client
    Template.table.records = ->
        Records.find()
    Template.table.rowCount = ->
        Records.find().count()

if Meteor.is_server
    Meteor.startup ->
        if Records.find().count() is 0
            for i in [1..1000]
                Records.insert({some:"test", data: "just", to: "check"}) 
```

测试.html：

```
<head>
  <title>test</title>
</head>

<body>
    {{> table}}
</body>

<template name="table">
    <table>
        <caption>{{rowCount}}</caption>
        {{#each records}}
        <tr>
            <td>{{some}}</td>
            <td>{{data}}</td>
            <td>{{to}}</td>
        </tr>
        {{/each}}
  </table>  
</template> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T00:15:58.243

尝试升级 Meteor。我刚刚在当前的 master 中尝试了这个确切的示例代码（在编写 0.5.2 时）。我在所有 Chrome、Firefox 和 Safari 中都打开了该页面，并且我的 CPU 使用率很低。

# php - 将临时值存储在会话数组中以在 mysql 查询中使用

> ID：11259802
> 
> 赞同：0
> 
> 时间：2012-06-29T10:02:34.800
> 
> 标签：php, mysql, session

我有一个需要用 id 列表更新的视图。因此，我将已选择从视图中删除的值存储在会话变量中，然后进入 mySQL 查询，如下所示。然后，当表单被重置时，值也会从数组中重置。

但它不起作用......这就是我所拥有的。

任何帮助，将不胜感激。

```
if($_POST['flag']=='flag'){

    //collect deleted rows
    $_SESSION['delete-row'][] = $_POST['idval'];

    //Split session array

    $idavls = join(',' , $_session['delete-row'];

    $sqlDelete = "CREATE OR REPLACE VIEW filtetbl AS SELECT * FROM `".$page['db-name']."`.`leads_tbl` WHERE ".$_SESSION['filter-view']." AND `lead_status` = '1' AND `lead_id` NOT IN (".$idvals.") ORDER BY `lead_added`";

    $result = mysql_query($sqlDelete);

    if($result){

        echo true;
        }
        else{

            echo mysql_error();

        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:21:07.357

$_session 一开始就与 $_SESSION 不同。

也不要使用 mysql_query 或类似的（因为它不安全）使用[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:06:54.643

如果没有更多信息，这很难纠正（并且有几个错误 - 可能是剪切和粘贴），所以我将一一拆开，你可以从那里开始。

1 - $_SESSION['delete-row'][] = $_POST['idval'];

如果'idval'来自多个输入（即），那么它已经是一个数组，你应该有 $_SESSION['delete-row'] = $_POST['idval']; 如果您在输入数组中循环（即尝试附加许多帖子，那么它是正确的）

2 - $idavls = join(',' , $_session['delete-row'];

$_SESSION （你说这是一种类型），你还需要一个括号/bract ar结尾

1.  *   $sqlDelete = "创建或替换视图 filtetbl AS SELECT * FROM `".$page['db-name']."`. `leads_tbl`WHERE ".$_SESSION['filter-view']." AND `lead_status`= '1' AND `lead_id`NOT IN (".$idvals.") ORDER BY `lead_added`";

首先，正如allen213 指出的那样，这是非常不安全的。即使您不使用 PDO 来确保变量的安全，请将所有输入转换为 (int)，假设 ID 是整数，或者至少将输入包装在 mysql_real_escape_string() 中。

其次，问题中的逻辑不太合理。你说你想从视图中删除 ID，但是你正在做的是重新创建视图，只删除了 $_SESSION['delete-row'] 中的那些 ID - 所以这可能会重新引入以前从视图中删除的 ID。您实际上需要保留 $_SESSION['delete-row'] 并继续添加以确保下次创建视图时，所有 ID 都会被删除。

我希望这会有所帮助。如果没有，可能需要更多代码（即您使用发送数据的表单，影响会话的任何其他内容等。

# xml - 请求和响应的 wsdl 到模式转换

> ID：11259804
> 
> 赞同：2
> 
> 时间：2012-06-29T10:02:39.953
> 
> 标签：xml, wsdl, schema

我有以下引用模式的 wsdl。根据 wsdl，我们可以有以下请求和响应 xml。我想要的是，有两组模式，一组用于请求，一组用于响应 xml。我相信我应该将 trade.wsdl 转换为模式，一个用于请求，一个用于响应。我想使用这些模式集，如果我生成 xml（就像我们在 eclipse 中的选项，从模式生成 xml），我应该能够获得请求和响应 xmls 的相同副本（使用模式集回应）。

有没有办法将 wsdl 转换为模式，一个用于请求，一个用于响应？在这种情况下 trade.wsdl，经过一些修改，我们应该有一个集合，例如 traderequest.xsd（它又引用了 trade.xsd），另一个集合 traderesponse.xsd（它又引用了 trade.xsd）

贸易.wsdl

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://com.joemo.schema.tradeservice"
    xmlns="http://com.joemo.schema.tradeservice" 
    xmlns:tr="http://com.joemo.schema.trade"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <wsdl:types>
        <xsd:schema targetNamespace="http://com.joemo.schema.tradeservice">
            <xsd:import namespace="http://com.joemo.schema.trade" schemaLocation="trade.xsd" />
        </xsd:schema>
    </wsdl:types>

    <wsdl:message name="tradeInput">
        <wsdl:part name="trade" element="tr:trade" />
    </wsdl:message>

    <wsdl:message name="tradeOutput">
        <wsdl:part name="status" element="tr:status" />
    </wsdl:message>

    <wsdl:portType name="TradeService">
        <wsdl:operation name="book">
            <wsdl:input message="tradeInput" />
            <wsdl:output message="tradeOutput" />
        </wsdl:operation>
    </wsdl:portType>

    <wsdl:binding name="TradeServiceHTTPBinding" type="TradeService">
        <wsdlsoap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="book">
            <wsdlsoap:operation soapAction="" />
            <wsdl:input>
                <wsdlsoap:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <wsdlsoap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>

    <wsdl:service name="TradeServicePorts">
        <wsdl:port binding="TradeServiceHTTPBinding" name="TradeService">
            <wsdlsoap:address
                location="http://localhost:9084/tradeService/TradeServicePorts" />
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

贸易.xsd

```
<?xml version="1.0" encoding="UTF-8"?>

<xsd:schema targetNamespace="http://com.joemo.schema.trade" xmlns="http://com.joemo.schema.trade"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <!-- web service input types -->

    <xsd:element name="trade">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="security" type="xsd:string" minOccurs="1" maxOccurs="1" />
                <xsd:element name="quantity" type="xsd:integer" minOccurs="1" maxOccurs="1" />
                <xsd:element name="comments" type="comment" minOccurs="1" maxOccurs="unbounded" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:complexType name="comment">
        <xsd:sequence>
            <xsd:element name="message" type="xsd:string" minOccurs="1" maxOccurs="1" />
            <xsd:element name="author" type="xsd:string" minOccurs="1" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>

    <!-- web service output types -->

    <xsd:element name="status">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="id" type="xsd:string" minOccurs="1" maxOccurs="1" />
                <xsd:element name="message" type="xsd:string" minOccurs="1" maxOccurs="1" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

请求 xml

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://com.joemo.schema.trade">
   <soapenv:Header/>
   <soapenv:Body>
      <com:trade>
         <security>?</security>
         <quantity>?</quantity>
         <!--1 or more repetitions:-->
         <comments>
            <message>?</message>
            <author>?</author>
         </comments>
      </com:trade>
   </soapenv:Body>
</soapenv:Envelope> 
```

响应xml

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:com="http://com.joemo.schema.trade">
   <soapenv:Header/>
   <soapenv:Body>
      <com:status>
         <id>?</id>
         <message>?</message>
      </com:status>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T11:59:33.600

我认为没有直接的方法可以从 wsdl 生成 xsd 但你可以这样做

```
1\. Create Request & Response classes , 
2\. In Request class defined  request parameter, and In Response class defined response parameter with JAXB annotation
3\. Then use this Request & Response class in Endpoint
4\. Then We are using JAXB to generate xml schema from Request and Response classes
5\. Right click on your Eclipse project -> New -> other -> Schema from Jaxb classes 
```

请按照此步骤生成 xml 架构。

# url-routing - 如何构建一个 asp.net 应用程序以在地址栏中使用语言？

> ID：11259808
> 
> 赞同：0
> 
> 时间：2012-06-29T10:02:49.593
> 
> 标签：url-routing, webforms

我希望我的 asp.net（网络表单）应用程序中的所有地址都包含所选语言，以允许搜索引擎索引两种语言内容。所以我希望它像 www.mysite.com/en/items/35 这样我应该怎么做才能拥有它，我不想为我的每种语言创建页面版本。我可以设置页面路由，但是我将如何理解在我的页面中显示的语言？我应该分析地址字符串并搜索“/en/”、“/ee/”等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:04:52.247

最简单的方法是使用[重写引擎](http://www.iis.net/download/urlrewrite)，使 url

```
www.mysite.com/en/items/35 
```

被重写为：

```
www.mysite.com/items.aspx?lang=en&id=35 
```

然后，您只需编写一些代码来查看查询字符串。

# php - 从会话中删除项目（显示删除按钮）

> ID：11259815
> 
> 赞同：0
> 
> 时间：2012-06-29T10:03:06.400
> 
> 标签：php, session

我在页面上有一个按钮，它是一个简单的输入提交按钮，它将页面 ID 发送到另一个页面上的表单以将其保存在 PHP 会话中。

我想知道如果该项目已经在您的会话中，我将如何显示删除按钮？

这是表单发送到的代码

```
<?php
session_start();
if(!in_array($_POST['event_id'], $_SESSION['event_orders'])) {
    $_SESSION['event_orders'][] = $_POST['event_id'];
}
?> 
```

带有按钮的页面实际上没有任何会话代码，但我想这将是一种类似的 IF 语句，但我不确定我应该使用的确切语法？以及如何将 ID 从会话中带走？

编辑：

像这样的东西会起作用吗？放置表单按钮。

```
<? if(isset($_SESSION['event_orders']))
{
    echo "<a href='".$_SERVER['PHP_SELF']."?delete'>delete</a>";
}
else if(!in_array($_POST['event_id'], $_SESSION['event_orders'])) {
    // echo the submit button;
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:08:52.307

您可以使用未设置功能。参考： http: [//php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:12:18.610

```
<?php
session_start();
//if request parameter delete is present then unset the array
if(isset($_REQUEST['delete']))
{
    unset($_SESSION['event_orders']);
}   
else if(isset($_SESSION['event_orders']))
{
    //displays delete link which redirects to same page with an additional request parameter as url?delete
    echo "<a href='".$_SERVER['PHP_SELF']."?delete'>delete</a>";
}
else if(!in_array($_POST['event_id'], $_SESSION['event_orders'])) {
    $_SESSION['event_orders'][] = $_POST['event_id'];
}
?> 
```

**编辑：** 我们只需要删除特定的数组项而不是完全取消设置数组。

```
<?php
session_start();
//if request parameter delete is present then unset the array
if(isset($_REQUEST['delete']))
{
    unset($_SESSION['event_orders'][$_REQUEST['delete']]);
    var_dump($_SESSION['event_orders']);
}   
else if(in_array($_POST['event_id'], $_SESSION['event_orders']))
{
    //displays delete link which redirects to same page with an additional request parameter as url?delete
    $key = array_search($_POST['event_id'], $_SESSION['event_orders']);
    var_dump($_SESSION['event_orders']);
    echo "<a href='".$_SERVER['PHP_SELF']."?delete=".$key."'>delete</a>";
}
else
{
    $_SESSION['event_orders'][] = $_POST['event_id'];
    var_dump($_SESSION['event_orders']);
}
?> 
```

# node.js - 是否可以从 node.js 作为命令行参数运行 PhantomJS

> ID：11259818
> 
> 赞同：16
> 
> 时间：2012-06-29T10:03:14.487
> 
> 标签：node.js, phantomjs

我最近打算测试从 python 运行 phantomJS 作为命令行参数，我还没有考虑到它，但已经看到了例子。因为 PhantomJS 是从命令行运行的，所以这似乎是可能的。PhantomJS 吐出的结果会直接进入一个变量。

在我走这条路之前，在 node.js 中进行这项工作实际上对我来说更有用，这让我开始思考，我可以只使用节点来运行 PhantomJS，因为程序从命令行运行并存储数据结果PhantomJS 通常会吐出一个变量？

我宁愿不使用[phantomjs-node](https://github.com/sgentle/phantomjs-node)因为它似乎使用了太多技巧。

所有这一切的原因是能够在程序执行另一个操作的同时运行 PhantomJS，并将其记录的结果数据用于其他一些东西。

简单地说，你可以在 python 中运行系统命令行的东西，我可以在 node.js 中做同样的事情吗？

干杯:)

编辑：我知道 node 和 phantom 使用不同的 js 环境，这很酷，因为我只想将 phantom 作为自己的进程运行并将所有输出数据捕获到 node.js 变量中（数据将是一对数组，字符串和浮点数。）我不想用幻像“驱动”，我会制作加载的javascript文件来做我想做的事。我想要的只是幻象输出。:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-12-09T18:48:47.753

来自 NPM：[https ://npmjs.org/package/phantomjs](https://npmjs.org/package/phantomjs)

```
var path = require('path')
var childProcess = require('child_process')
var phantomjs = require('phantomjs')
var binPath = phantomjs.path

var childArgs = [
  path.join(__dirname, 'phantomjs-script.js'),
  'some other argument (passed to phantomjs script)'
]

childProcess.execFile(binPath, childArgs, function(err, stdout, stderr) {
  // handle results
}) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-29T10:51:43.543

我想你可以为 Node.js 编写一个简单的脚本来运行；在该脚本中，`phantomjs`脚本将作为子进程运行。[您可以在这个答案](https://stackoverflow.com/a/9978162/1229023)中看到工作示例（以及一些文档的链接）。我想[这个讨论](https://stackoverflow.com/questions/9781214/node-js-parse-child-process-output-line-by-line-spawn)可能对你也有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-21T14:51:52.570

作为唐纳德德里克的答案的替代方案，您可以使用该`spawn`功能。它将允许您在子进程的输出生成后立即读取它，而不是将输出缓冲并立即返回给您。

[你可以在这里](http://www.hacksparrow.com/difference-between-spawn-and-exec-of-node-js-child_process.html)阅读更多关于它的信息。

[文档](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)中的一个示例。

```
var spawn = require('child_process').spawn,
    ls    = spawn('ls', ['-lh', '/usr']);

ls.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

ls.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

ls.on('close', function (code) {
  console.log('child process exited with code ' + code);
}); 
```

# javascript - 如何使用名称中的其他变量值创建 javascript 变量

> ID：11259819
> 
> 赞同：1
> 
> 时间：2012-06-29T10:03:20.457
> 
> 标签：javascript

嗨，我需要在 javascript 循环中创建大量变量，所以说我的循环从 0 开始循环 5 次，到它结束时应该定义以下变量：

```
variable_0
variable_1
variable_2
variable_3
variable_4 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:06:07.050

`window`这将通过在对象上注册它们来创建“全局”变量：

```
for (var i = 0; i != 5; ++i) {
    window['variable_' + i] = null;
} 
```

虽然这样做并不是很好 =/ 更好的方法是定义一个对象，您可以在其中创建动态属性。

```
var obj = {}
for (var i = 0; i != 5; ++i) {
    obj['variable_' + i] = null;
}

console.log(obj.variable_0); // null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:07:13.803

为什么不只使用数组：

```
var variable = []; 
```

如果你真的要创建 5 个变量，你需要选择它们的范围，最简单的可能是`window`，那么你可以使用方括号语法：

```
for(var i=0;i<5; i++){
    window["variable_" + i] = 0; // or anything really!
} 
```

现在可以使用以下变量：

```
window.variable_1 = 123 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:08:01.390

您只能创建可变*命名*的变量作为 的一部分`Object`：

```
obj['variable_' + i] = value; 
```

函数范围的变量没有等价物，尽管您当然可以这样做：

```
function foo() {
    var obj = {};
    for (var i = 0; ... ) {
        obj['variable_' + i] = value;
    }
} 
```

`window`您可以通过使用全局对象代替来伪造全局变量（但不应该）`obj`，如@Jack 所示。

当然在大多数情况下（并且由于您使用数字来区分变量）您真正应该做的是使用数组：

```
var myvar = [];
for (var i = 0; i < n; ++i) {
    myvar[i] = ...;
} 
```

# javascript - 由于日期格式，我猜日期验证失败

> ID：11259821
> 
> 赞同：-4
> 
> 时间：2012-06-29T10:03:21.167
> 
> 标签：javascript, jquery, regex, scripting

我有以下验证日期的正则表达式：

```
//are not both dates
if (!methods._isDate(first[0].value) || !methods._isDate(second[0].value)) {
    return options.allrules[rules[i]].alertText +   
           options.allrules[rules[i]].alertText2;
} 
```

下面的正则表达式：

```
_isDate: function (value) {
             var dateRegEx = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
             return dateRegEx.test(value);
         }, 
```

但这看起来像 mmddyy，我的日期总是 ddmmyy。

你能重写这个正则表达式吗？请检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:36:34.440

*对于**DDMMYYYY**，可选`0`的日期和月份前导，分隔符`/`或`-`，年`1900`- `2099`，不检查有效性`29.`，`30.`或`31.`月中的一天，它将是：*

```
/^(0?[1-9]|[12]\d|3[01])[\/\-](0?[1-9]|1[012])[\/\-](19\d{2}|20\d{2})$/ 
```

*要仅使用 2 位数年份格式，请使用：*

```
/^(0?[1-9]|[12]\d|3[01])[\/\-](0?[1-9]|1[012])[\/\-](\d{2})$/ 
```

# java - 中断执行长时间运行的数据库选择的线程

> ID：11259824
> 
> 赞同：2
> 
> 时间：2012-06-29T10:03:30.930
> 
> 标签：java, spring

[我的需求与这个](https://stackoverflow.com/questions/1024482/stop-interrupt-threads-blocked-on-wainting-input-from-socket)非常相似，只是我长时间运行的 IO 操作是数据库选择。

该线程中提出了一个相当有创意的解决方案，涉及在单独的线程中关闭 IO 流。但是，我并没有真正引用输入流或套接字。

当我使用 spring-jdbc 时，我什至无法关闭正在使用的连接，它不能让我访问正在使用的底层连接。我相信`JdbcTemplate.getDataSource().getConnection()`可能会从数据源返回另一个连接。

感谢我能得到的任何帮助/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:08:37.513

使用[JdbcTemplate.execute(PreparedStatementCreator, PreparedStatementCallback)](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#execute%28org.springframework.jdbc.core.PreparedStatementCreator,%20org.springframework.jdbc.core.PreparedStatementCallback%29)

在 PreparedStatementCreator 中，您可以访问 Statement，您可以将其提供给另一个线程。这个其他线程创建一个计时器，并在必要时在 Statement 上调用 .cancel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:34:03.817

正如 Istvan 提到的，PreparedStatementCreator 是要走的路。粘贴我的实现以防万一它有帮助..

```
private final long timeout = 1000; //timeout in seconds
final SqlRowSet rowSet = jdbcTemplate.getJdbcOperations().query(new PreparedStatementCreator() {
    @Override
    public PreparedStatement createPreparedStatement(Connection con) throws SQLException {
        if (timeout>0){
            Timer timer = new Timer();
            timer.schedule(new ConnectionInterrupter(con), timeout*1000);
        }
        return con.prepareStatement(queryString);
    }
}, new ResultSetExtractor<SqlRowSet>() {
    @Override
    public SqlRowSet extractData(ResultSet rs) throws SQLException, DataAccessException {
        CachedRowSet rowSet = newCachedRowSet();
        rowSet.populate(rs);
        return new ResultSetWrappingSqlRowSet(rowSet);
    }

    protected CachedRowSet newCachedRowSet() throws SQLException {
        return new CachedRowSetImpl();
    }
});
private class ConnectionInterrupter extends TimerTask {
    private final Connection connection;
    public ConnectionInterrupter(Connection connection) {
        this.connection = connection;
    }

    @Override
    public void run() {
        try {
            logger.warn("Connection timeout has occurred. Manually closing the connection ...");
            connection.close();
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

# android - 从 Google Play 安装的应用程序安装后未出现在菜单中

> ID：11259826
> 
> 赞同：1
> 
> 时间：2012-06-29T10:03:54.170
> 
> 标签：android, installation, google-play

我有个问题。我已在 Google Play 中注册并上传了我的应用程序。但是安装后，该应用程序无法打开，并且该应用程序不在菜单中。

那么我应该怎么做才能让它出现呢？

# android - Android OpenGL 适用于模拟器但不适用于手机

> ID：11259829
> 
> 赞同：1
> 
> 时间：2012-06-29T10:04:13.683
> 
> 标签：android, opengl-es, surfaceview, glulookat

我有以下渲染器代码：

```
package hello.project;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;

public class HelloOpenGLES10Renderer implements Renderer {

private Square      square;
private Square2         square2;// the square
private Context     context;
private Context     context2;
public static int w,h;

/** Constructor to set the handed over context */
public HelloOpenGLES10Renderer(Context context) {
    this.square     = new Square();
    this.square2        = new Square2();
    this.context=context;

}

public void onDrawFrame(GL10 gl) {
    /*Square.loadGLTexture(gl, this.context,Square.getSex()); 
    Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity(); 
    GLU.gluPerspective(gl, 45.0f, (float)w / (float)h, 0.1f, 100.0f);
    GLU.gluLookAt(gl, 0, 1, 5, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
    gl.glColor4f(1.0f, 1.0f, 1.0f, 2.0f);
    square.draw(gl);
    square2.draw(gl);*/

    // clear Screen and Depth Buffer
    Square.loadGLTexture(gl, this.context,Square.getSex()); 
    Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
    gl.glColor4f(1.0f, 1.0f, 1.0f, 2.0f);   
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

      // Reset the Modelview Matrix
      gl.glLoadIdentity();
     // GLU.gluLookAt(gl, 0, 0, 0, 0, 0, 0, 0, 0, 0);
      // Drawing
      gl.glTranslatef(0.0f, 0.0f, -5.0f);  // move 5 units INTO the screen
      square.draw(gl);
      square2.draw(gl); 
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    if(height == 0) {           //Prevent A Divide By Zero By
        height = 1;             //Making Height Equal One
    }

    w=width;
    h=height;
    gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
    gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
    gl.glLoadIdentity();        //Reset The Projection Matrix

    //Calculate The Aspect Ratio Of The Window
    GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
    gl.glLoadIdentity();        //Reset The Modelview Matrix
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
      // Load the texture for the square
    gl.glEnable(GL10.GL_BLEND);
    gl.glEnable(GL10.GL_TEXTURE_2D); 
    gl.glShadeModel(GL10.GL_FLAT);    //Enable Smooth Shading
    //gl.glEnable(GL10.GL_ALPHA_TEST);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    //gl.glColor4f(1.0f, 1.0f, 1.0f, 1.0f);
      Square.loadGLTexture(gl, this.context,Square.getSex());
    //  gl.glAlphaFunc(GL10.GL_GREATER, 0.5f);

      gl.glDisable(GL10.GL_DEPTH_TEST);
      gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);  //Black Background
      gl.glClearDepthf(1.0f);      //Depth Buffer Setup
      gl.glDepthFunc(GL10.GL_NEVER);    //The Type Of Depth Testing To Do

      //Really Nice Perspective Calculations
      gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);

     }
} 
```

如果我使用它的当前代码，`onDrawFrame`它非常适合模拟器，但在电话上`SurfaceView`是空白的，我什么也得不到。我在一篇文章中发现我应该使用 GLU.gluLookAt(); 而不是 gl.glLoadIdentity(); 如果我这样做（onDrawFrame 中注释的代码）它可以工作，我会得到背景，但我的纹理没有加载，无论是在手机上还是在模拟器上。我该怎么做才能加载它们并使应用程序正常工作？

EDIT1：我`GLU.gluPerspective(gl, 45.0f, (float)w / (float)h, 0.1f, 100.0f);`从函数中注释了该行`onDrawFrame`，现在它显示了我的纹理，但程序强制在几秒钟后关闭。

我得到下一个 LogCat 错误：

```
 06-29 14:28:07.126: E/Adreno200-EGL(4825): eglLockWindowSurface: failed to map the memory for fd=54 offs=7385088
 06-29 14:28:07.126: E/Adreno200-EGL(4825): egliSwapWindowSurface: oglSwapBuffer failed
 06-29 14:28:07.126: E/EglHelper(4825): eglSwapBuffers glGetError = %d1285
 06-29 14:28:07.126: E/Adreno200-EGL(4825): eglLockWindowSurface: failed to map the memory for fd=54 offs=7385088
 06-29 14:28:07.276: W/dalvikvm(4825): threadid=9: thread exiting with uncaught exception (group=0x4001d5a0)
 06-29 14:28:07.276: E/AndroidRuntime(4825): FATAL EXCEPTION: GLThread 10
 06-29 14:28:07.276: E/AndroidRuntime(4825): java.lang.RuntimeException: eglSwapBuffers failed: EGL_BAD_ALLOC
 06-29 14:28:07.276: E/AndroidRuntime(4825):    at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1084)
 06-29 14:28:07.276: E/AndroidRuntime(4825):    at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1042)
 06-29 14:28:07.276: E/AndroidRuntime(4825):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1368)
 06-29 14:28:07.276: E/AndroidRuntime(4825):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1122)
 06-29 14:28:09.268: I/Process(4825): Sending signal. PID: 4825 SIG: 9 
```

任何想法这可能意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:42:48.907

`java.lang.RuntimeException: eglSwapBuffers failed: EGL_BAD_ALLOC`主要是由于没有`glSurfaceView`正确处理而导致的错误。

您必须通知`glSurfaceView`当前活动生命周期。见这里：http: [//developer.android.com/reference/android/opengl/GLSurfaceView.html](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)

另外，你的纹理有多大，你如何确保它的格式正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:16:46.903

我的 onDrawFrame() 中有这两个函数：

```
Square.loadGLTexture(gl, this.context,Square.getSex()); 
Square2.loadGLTexture(gl, this.context,Square2.getHair()); 
```

他们不断地在每一帧重新加载，直到内存满了，它会崩溃。将其更改为：

```
if (Project.ifDraw){
        Square.loadGLTexture(gl, this.context,Square.getSex()); 
        Square2.loadGLTexture(gl, this.context,Square2.getHair());
        Project.ifDraw=false;
    } 
```

在我的项目课程中：

```
public static boolean ifDraw=true; 
```

OnClickListeners 已实现：

```
 mGLView.invalidate();
ifDraw=true; 
```

# zend-framework - 我如何实现模块子文件夹，我可以在名为 api 的模块内的文件夹中拥有多个“模块”文件夹？Zend 框架

> ID：11259831
> 
> 赞同：0
> 
> 时间：2012-06-29T10:04:29.137
> 
> 标签：zend-framework, module

我如何实现模块子文件夹，我可以在名为 api 的模块内的文件夹中拥有多个“模块”文件夹。

*   应用程序/模块/api/module1/...
*   应用程序/模块/api/module2/...
*   应用程序/模块/api/module3/...
*   应用程序/模块/模块1/...

我的目的是创建一个宁静的 api，但将所有这些新模块放在一个子目录下。

这里的另一个问题是，应用程序外部的模块可能与外部模块具有相同的名称。所以我的班级命名就像..

Api_Module1_... Api_Module2_... Api_Module3_... 模块1...

到目前为止，我似乎无法真正完成这项工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:35:00.530

打开您的 application.ini 并执行

```
;for normal modules
resources.frontController.moduleDirectory[] = APPLICATION_PATH "/modules"   

;for modules inside api
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules/api" 
```

然后在你的引导中做

```
Zend_Controller_Front::getInstance()->removeControllerDirectory('api'); 
```

这不会为 Api_Module1 工作，您需要做许多其他事情，例如创建自己的标准路由器。

# delphi - 我可以将动态数组的字典声明为值类型吗？

> ID：11259832
> 
> 赞同：5
> 
> 时间：2012-06-29T10:04:35.583
> 
> 标签：delphi, delphi-2010

我想要一个函数，它需要一个字符串字典、变量数组。所以它可以被调用：

```
 searchDictionary := TDictionary<string, array of variant>;
  searchDictionary.Add('KEY_NAME', ['X01%', '%D01']);
  aValue := TDtoClass.Search(searchDictionary) 
```

我目前正在通过

```
 searchDictionary := TDictionary<string, TList<variant>>.Create;
  searchDictionary.Add('BIN_NAME', TSearch.Values(['X01%', '%D01'])); 
```

其中 Tsearch 是一个公开的类：

```
class function TSearch.Values(const arguments: array of variant): TList<variant>;
var
list : TList<variant>;
item: variant;
begin
    list := TList<variant>.Create;
    for item in arguments do
    begin
      list.Add(item);
    end;
    Result := list;           
end; 
```

我想做的是：

```
searchDictionary.Add('BIN_NAME', ['X01%', '%D01']); 
```

代替：

```
searchDictionary.Add('BIN_NAME', TSearch.Values(['X01%', '%D01'])); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T10:58:25.300

虽然声明字典没有问题，但添加值可能会有些棘手。您可以使用特殊构造来获取所需的变体数组：

```
var
  searchDictionary: TDictionary<string, TArray<variant>>;
begin
  searchDictionary.Add('BIN_NAME', TArray<variant>.Create('X01%', '%D01'));
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T14:12:31.823

您可以为变量数组声明一个类型，以执行更多您想要的代码：

```
type
  TDynamicArrayOfVariant = array of Variant;

var
  searchDictionary: TDictionary<string, TDynamicArrayOfVariant>;
begin
  searchDictionary.Add('BIN_NAME', ['X01%', '%D01']);
end; 
```

# regex - 从 Bash 中排除多行（版本：3.2.48）

> ID：11259834
> 
> 赞同：0
> 
> 时间：2012-06-29T10:04:36.670
> 
> 标签：regex, bash, grep

这个想法是为目录中的所有文件（包括所有子目录）计算 SHA256 哈希，但排除另一个文本文件中指定的一些文件。

问题是，如果我指定要排除以下文件（参见代码下方），则只排除其中一个，而不是同时排除两者。

这是我的代码：

```
while read line
do
    if [ $line_count -eq 0 ]
    then
        exclude_files=".*/$line$"
    else
        exclude_files="${exclude_files}\|.*/$line$"
    fi

    line_count=$(( $line_count + 1 ))
done < exclude-files.txt

find . -type f -print0 | xargs -0 shasum -a 256 | grep -v -P "${exclude_files}" > ~/out.txt 
```

文件内容`exclude-files.txt`：

```
Icon\\r
.DS_Store
--- empty line --- 
```

该文件`Icon\r`是用于更改文件夹图标的特殊文件，其名称包含`CR`. （我在 Mac OS X 10.7.4 上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:17:38.283

这是因为在您的变量`\`中被识别为转义符号`|`：

```
exclude_files="${exclude_files}\|.*/$line$" 
```

您需要添加其他`\`人才能逃脱`\`以使其工作：

```
exclude_files="${exclude_files}\\|.*/$line$" 
```

此外，您正在`-P`使用`grep`. 在这种情况下，您不需要 escape `|`。因此，您完全不用反斜杠就可以使用它。

您应该选择使用哪种方式：escape 或`-P`. 两个一起用是不行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:15:47.423

如果文件名包含具有特殊含义的字符，则 grep 将不安全，也许这会有所帮助

```
cmd=(find . -type f \( )
while read line;do cmd=("${cmd[@]}" \! -name "$line" -a);done < exclude-files.txt
cmd[${#cmd[*]}-1]=\)
echo "${cmd[@]}" | cat -v
"${cmd[@]}" -print0 | xargs -0 shasum -a 256 
```

# iphone - FGallery 不在缩略图视图中开始

> ID：11259835
> 
> 赞同：1
> 
> 时间：2012-06-29T10:04:41.123
> 
> 标签：iphone, ios, xcode, thumbnails

我究竟做错了什么？FGallery 没有在缩略图视图中启动？

```
 FotosGalleryViewController *vc = [[FotosGalleryViewController alloc] initWithPhotoSource:self];
    vc.beginsInThumbnailView = YES;
    [self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:36:23.830

当我变成`showThumbnailViewWithAnimation:BOOL`公共方法并调用时：

```
[self showThumbnailViewWithAnimation:YES]; 
```

在`FGalleryViewController`它工作的范围内。但它只在缩略图视图中加载前两个图像，其余的保持灰色。单击`Close`并`See all`再次修复此问题，一切都按承诺工作？

# linux - 列出文件名和文件系统缓存中的常驻页面计数？

> ID：11259836
> 
> 赞同：1
> 
> 时间：2012-06-29T10:04:49.423
> 
> 标签：linux, file, memory, map

在 RHEL 中有没有办法列出文件名和文件系统缓存中的常驻页面计数？

# asp.net - 如何在 Visual Studio 中将大量数据（页面内容）放入 DB？

> ID：11259837
> 
> 赞同：0
> 
> 时间：2012-06-29T10:04:49.480
> 
> 标签：asp.net, database, asp.net-mvc-3, visual-studio-2010

我开始使用 ASP.NET 进行冒险，我正在创建迷你 CMS 系统，只是为了能够通过登录面板并更改相应页面的内容来更改网站的内容。问题是我的数据库中的列中有“文本”类型的字段，我无法将任何分为行的页面内容（内容文本、html 标记等）放在那里。当我尝试将操作复制/粘贴到表中的该字段（在 VS 2010 的服务器资源管理器中）时，它只复制第一行文本，仅此而已。有没有人有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:13:27.093

您正在使用哪个数据库？SQL Server 中的“文本”数据类型已过时。为什么不使用 Varchar(MAX)？

您也可以考虑[BLOB](http://msdn.microsoft.com/en-us/library/bb895234.aspx)。

您可以参考许多[开源 ASP.NET CMS 应用程序。](http://csharp-source.net/open-source/content-managment-systems)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:11:24.507

您应该考虑用户实体框架。对于开发人员来说，这是一种简单的、面向对象的方式来获取数据库中的数据。

[http://msdn.microsoft.com/en-us/library/bb386876.aspx](http://msdn.microsoft.com/en-us/library/bb386876.aspx)

这是另一个带有分步指南的教程。

[http://msdn.microsoft.com/en-us/data/gg685489.aspx](http://msdn.microsoft.com/en-us/data/gg685489.aspx)

# c++ - 在 C++ 中，如何测试与“|”结合的几个标志之一 在一个论点？

> ID：11259846
> 
> 赞同：3
> 
> 时间：2012-06-29T10:05:33.307
> 
> 标签：c++, function, arguments

我有下一个代码：

```
int main()
{
 OwnSelect(23, FD_READ | FD_WRITE); // <---- Several arguments as one
 return 0;
}

int OwnSelect(SOCKET s, long lNetworkEvents)
{
 // How can i check that FD_READ has been passed?
 if(lNetworkEvents == FD_READ)
 {
  // never here
 }
 return 0;
} 
```

无论是否已通过 FD_READ 传递了另一个 FD，我如何检查是否已通过 FD_READ。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T10:12:20.260

似乎您在这里错过了一些基本的位操作。您正在 OR'ing FD_READ 和 FD_WRITE（| = 按位或），从而将两个值指示的位设置为参数。要检查 FD_READ 是否通过，您需要将 lNetworkEvents 与 FD_READ 进行 AND 并检查结果是否等于 FD_READ，如下所示：

`if (FD_READ == (lNetworkEvents & FD_READ)) { ... }`

这当然假设 FD_READ 和 FD_WRITE 是打算以这种方式使用的值（即通常没有重叠位）。

编辑：固定，wabepper 是绝对正确的 :) 哎呀！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:14:31.813

通过使用`&`：

```
if ((lNetworkEvents & FD_READ) == FD_READ) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T10:16:38.457

```
if ( (iNetworkEvents & FD_READ) != 0 ) 
```

is what you're looking for here. This works well as long as the "argument" in question is a single bit (a boolean). For more complex operations, like those on the `floatfield` in `fmtflags`, you'll need to compare with the correct value:

```
switch (myFlags & std::ios_base::floatfiled )
{
case std::ios:base::fixed:
    //  ...

//  ...
} 
```

Finally if the field is an integral value (e.g. `0...7` on 3 bits), you'll have to both mask and shift to get the correct value. (If the value is signed, it's even more complex.)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T10:15:38.563

[http://www.cplusplus.com/doc/boolean/](http://www.cplusplus.com/doc/boolean/) - that might help you

a very simplistic explanation: imagine

```
FD_READ = 0b01
FD_WRITE = 0b10 
```

then passing `FD_READ | FD_WRITE` will give you `0b11` as argument

to check if `FD_READ` is there basically is to check if that last bit is `1`, doable by:

```
x & 0b01 // aka
x & FD_READ 
```

# php - curl +“视图状态 MAC 验证失败。”

> ID：11259847
> 
> 赞同：0
> 
> 时间：2012-06-29T10:05:38.330
> 
> 标签：php, asp.net, curl

我使用 curl 将数据发布到另一台服务器，在每次发布之间我使用一个函数来获取隐藏字段，如“__VIEWSTATE”。它以前就像一个魅力，但他们在那里更新了网站，所以我重写了我的代码以使用新的字段，但在最后一步我得到了错误：“视图状态 MAC 的验证失败。”

如果我在 webbrowser 中执行相同的步骤，它应该可以正常工作，我使用插件来获取浏览器发送的 postdata 并将其与我的脚本发送的内容进行比较，它看起来是一样的。

我对 ASP.NET 的了解很少，我可以在此处找到有关该错误的所有信息，都建议对 ASP-NET 服务器进行更改。

所以我希望这里有人可以指导我找出为什么它在浏览器中的成功率是 100%，而 curl 在该页面上的成功率是 0%，但是在以前的页面上使用相同的功能，使用 curl 可以 100% 工作。

浏览器发送的 postdata：

```
__EVENTTARGET=
__EVENTARGUMENT=
__VIEWSTATE=%2FwEPDwUKLTk2MDAxNjU3MA9kFgJmD2QWAgIDD2QWDgIFD2QWAgIBDw8WAh4EVGV4dAUfRsO2cmV0YWdzZ3J1cHBlbiBpIEfDtnRlYm9yZyBBQmRkAgcPDxYEHwAFH0bDtnJldGFnc2dydXBwZW4gaSBHw7Z0ZWJvcmcgQUIeC05hdmlnYXRlVXJsBR1%2BL0NsaWVudENhcmQuYXNweD9DbGllbnRJRD05OGRkAgkPDxYCHgdWaXNpYmxlZ2RkAgsPDxYEHwAFI0JZR0cgJiBFTkVSR0lTRVJWSUNFIFPDlkRFUlTDllJOIEFCHwEFNH4vQ3VzdG9tZXJPdmVydmlldy5hc3B4P0NsaWVudElEPTk4JkN1c3RvbWVySUQ9MjY0NDBkZAINDw8WAh8CZ2RkAg8PDxYCHwAFE1JlZGlnZXJhIGFudsOkbmRhcmVkZAIVDw8WAh8CaGQWAgIDDxBkZBYBZmQYAgUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFg0FFmN0bDAwJGJvZHkkY2hrSXNBY3RpdmUFHmN0bDAwJGJvZHkkY2hrSGFzU3VwZXJVc2VyUGVybQUfY3RsMDAkYm9keSRjaGtIYXNTdGF0aXN0aWNzUGVybQUkY3RsMDAkYm9keSRjaGtIYXNBbm51YWxSZXBvcnRTZXJ2aWNlBTBjdGwwMCRib2R5JGNoa0hhc0NvcnBvcmF0aW9uQ2hhcnRlclJlcG9ydFNlcnZpY2UFN2N0bDAwJGJvZHkkY2hrSGFzQ2VydGlmaWNhdGVPZlJlZ2lzdHJhdGlvblJlcG9ydFNlcnZpY2UFH2N0bDAwJGJvZHkkY2hrSGFzTW9uaXRvclNlcnZpY2UFK2N0bDAwJGJvZHkkY2hrSGFzRGlnaXRhbFNwYXJya2F0YWxvZ1NlcnZpY2UFJmN0bDAwJGJvZHkkY2hrSGFzUGVyc29ua29udHJvbGxTZXJ2aWNlBSVjdGwwMCRib2R5JGNoa0hhc0NvbXBhbnlSZXBvcnRTZXJ2aWNlBSRjdGwwMCRib2R5JGNoa0hhc1BlcnNvblJlcG9ydFNlcnZpY2UFHWN0bDAwJGJvZHkkY2J4UmVwb3J0c0NvbXBhbnkzBRxjdGwwMCRib2R5JGNieFJlcG9ydHNQZXJzb24zBRBjdGwwMCRtbHRDb250ZW50Dw9kZmR8z6SDM7weB%2BgWrg%2B8u3EnNPkQGA%3D%3D
__EVENTVALIDATION=%2FwEWFwKGsKOJCgK70ZWTDQLr%2BJWFDQKo1a2oCwKplfT%2BCgLRieqTAwKt6qHvAQK9rKu9AgKh%2F5ODDQKqtpTtDQLvv7CxBALa4vDGBQKCuafwDwKP1ZOjBgKsqdXxCgL6hbmQBwK%2BjaGZDQL%2FqY7cBALml%2FqcBgLYg53pDwL108DhBQLfzPnCAQLBr6dM9cK5UIsGFZ5ocJchTM8CHTFigfk%3D
ctl00%24body%24cmdSave=Spara
ctl00%24body%24txtName=BYGG+%26+ENERGISERVICE+S%C3%96DERT%C3%96RN+AB
ctl00%24body%24txtUserName=5566960836
ctl00%24body%24txtEmail=anonym%40telia.se
ctl00%24body%24txtDepartment=
ctl00%24body%24chkIsActive=on
ctl00%24body%24chkHasStatisticsPerm=on
ctl00%24body%24txtLoginName=5566960836
ctl00%24body%24txtPassword=stackoverflow
ctl00%24body%24chkHasAnnualReportService=on
ctl00%24body%24chkHasCorporationCharterReportService=on
ctl00%24body%24chkHasCertificateOfRegistrationReportService=on
ctl00%24body%24chkHasMonitorService=on
ctl00%24body%24chkHasDigitalSparrkatalogService=on
ctl00%24body%24chkHasPersonkontrollService=on
ctl00%24body%24chkHasCompanyReportService=on
ctl00%24body%24chkHasPersonReportService=on
ctl00%24body%24cbxReportsCompany3=on
ctl00%24body%24cbxReportsPerson3=on
ctl00%24body%24hidNewUser=1 
```

我的脚本正在发送的发布数据

```
Array
(
    [__EVENTTARGET] => 
    [__EVENTARGUMENT] => 
    [__VIEWSTATE] => /wEPDwUKLTk2MDAxNjU3MA9kFgJmD2QWAgIDD2QWDgIFD2QWAgIBDw8WAh4EVGV4dAUfRsO2cmV0YWdzZ3J1cHBlbiBpIEfDtnRlYm9yZyBBQmRkAgcPDxYEHwAFH0bDtnJldGFnc2dydXBwZW4gaSBHw7Z0ZWJvcmcgQUIeC05hdmlnYXRlVXJsBR1+L0NsaWVudENhcmQuYXNweD9DbGllbnRJRD05OGRkAgkPDxYCHgdWaXNpYmxlZ2RkAgsPDxYEHwAFI0JZR0cgJiBFTkVSR0lTRVJWSUNFIFPDlkRFUlTDllJOIEFCHwEFNH4vQ3VzdG9tZXJPdmVydmlldy5hc3B4P0NsaWVudElEPTk4JkN1c3RvbWVySUQ9MjY0NDBkZAINDw8WAh8CZ2RkAg8PDxYCHwAFE1JlZGlnZXJhIGFudsOkbmRhcmVkZAIVDw8WAh8CaGQWAgIDDxBkZBYBZmQYAgUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFg0FFmN0bDAwJGJvZHkkY2hrSXNBY3RpdmUFHmN0bDAwJGJvZHkkY2hrSGFzU3VwZXJVc2VyUGVybQUfY3RsMDAkYm9keSRjaGtIYXNTdGF0aXN0aWNzUGVybQUkY3RsMDAkYm9keSRjaGtIYXNBbm51YWxSZXBvcnRTZXJ2aWNlBTBjdGwwMCRib2R5JGNoa0hhc0NvcnBvcmF0aW9uQ2hhcnRlclJlcG9ydFNlcnZpY2UFN2N0bDAwJGJvZHkkY2hrSGFzQ2VydGlmaWNhdGVPZlJlZ2lzdHJhdGlvblJlcG9ydFNlcnZpY2UFH2N0bDAwJGJvZHkkY2hrSGFzTW9uaXRvclNlcnZpY2UFK2N0bDAwJGJvZHkkY2hrSGFzRGlnaXRhbFNwYXJya2F0YWxvZ1NlcnZpY2UFJmN0bDAwJGJvZHkkY2hrSGFzUGVyc29ua29udHJvbGxTZXJ2aWNlBSVjdGwwMCRib2R5JGNoa0hhc0NvbXBhbnlSZXBvcnRTZXJ2aWNlBSRjdGwwMCRib2R5JGNoa0hhc1BlcnNvblJlcG9ydFNlcnZpY2UFHWN0bDAwJGJvZHkkY2J4UmVwb3J0c0NvbXBhbnkzBRxjdGwwMCRib2R5JGNieFJlcG9ydHNQZXJzb24zBRBjdGwwMCRtbHRDb250ZW50Dw9kZmR8z6SDM7weB+gWrg+8u3EnNPkQGA==
    [__EVENTVALIDATION] => /wEWFwKGsKOJCgK70ZWTDQLr+JWFDQKo1a2oCwKplfT+CgLRieqTAwKt6qHvAQK9rKu9AgKh/5ODDQKqtpTtDQLvv7CxBALa4vDGBQKCuafwDwKP1ZOjBgKsqdXxCgL6hbmQBwK+jaGZDQL/qY7cBALml/qcBgLYg53pDwL108DhBQLfzPnCAQLBr6dM9cK5UIsGFZ5ocJchTM8CHTFigfk=
    [ctl00$body$hidNewUser] => 1
    [ctl00$body$cmdSave] => Spara
    [ctl00$body$txtName] => BYGG & ENERGISERVICE SÖDERTÖRN AB
    [ctl00$body$txtUserName] => 5566960836
    [ctl00$body$txtEmail] => anonym@telia.se
    [ctl00$body$txtDepartment] => 
    [ctl00$body$chkIsActive] => 1
    [ctl00$body$chkHasStatisticsPerm] => 1
    [ctl00$body$txtLoginName] => 5566960836
    [ctl00$body$txtPassword] => stackoverflow
    [ctl00$body$chkHasAnnualReportService] => 1
    [ctl00$body$chkHasCorporationCharterReportService] => 1
    [ctl00$body$chkHasCertificateOfRegistrationReportService] => 1
    [ctl00$body$chkHasMonitorService] => 1
    [ctl00$body$chkHasDigitalSparrkatalogService] => 1
    [ctl00$body$chkHasPersonkontrollService] => 1
    [ctl00$body$chkHasCompanyReportService] => 1
    [ctl00$body$chkHasPersonReportService] => 1
    [ctl00$body$cbxReportsCompany3] => 1
    [ctl00$body$cbxReportsPerson3] => 1
) 
```

问题：

哪些客户端差异会触发“视图状态 MAC 验证失败”错误？

（注意：上面的 postdata 以 2 种方式操作 bean，首先我用“stackoverflow”替换了密码，我还用匿名替换了电子邮件地址的用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:14:42.273

检查是否有一些 javascript 在发布之前更改值，并且在保存方面，也设置引用页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:17:01.030

使用了错误的 URL，从一开始就发送了正确的 postdata，只是发送到了错误的地方。如此简单，当你看错地方时仍然很难找到。

# c# - 在哪里加入开发团队

> ID：11259848
> 
> 赞同：3
> 
> 时间：2012-06-29T10:05:38.747
> 
> 标签：c#, java, c

我希望这个问题不是焦点。我一直想找到一种方法来提高我作为程序员的技能。我曾尝试与学校的游戏开发团队合作，并提出我自己的应用程序想法。但是这些事情对我来说进展非常缓慢，由于缺乏技巧，我的想法似乎遥不可及。我还没有学位，但我已经学习编程大约 5-6 年了。我在学习和使用编程技能方面非常有效率，但我发现我缺乏可以加入的项目，而且我不知道在哪里可以找到它们。有人认为他们可以帮助我吗？

我目前的语言是：C、C++、C#、Java、Python。我曾使用 ASP.NET 进行 Web 开发，还涉足 SQL Server。

我想学习更多并提高编程效率，我认为这是最好的方法。

# css - 如何重载特定图层的CSS3分层多个背景图片

> ID：11259851
> 
> 赞同：1
> 
> 时间：2012-06-29T10:05:55.650
> 
> 标签：css, background-image

> **可能重复：**
> [在悬停时仅更改多个背景之一](https://stackoverflow.com/questions/9845224/change-only-one-of-multiple-backgrounds-on-hover)

如果你有这样的 CSS 声明：

```
.selector {
    background: url(image.png), url(image2.png);
} 
```

并在 :hover 您只想更改第一层，例如

```
.selector:hover {
    background: url(image3.png), url(image2.png);
} 
```

有没有办法将图像更新为 image3.png 而无需重新声明堆栈的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:59:10.557

不幸的是，不，没有任何方法可以做到这一点。

# php - 重写手动创建的嵌套 JSON 以使用 PHP 内置函数

> ID：11259862
> 
> 赞同：0
> 
> 时间：2012-06-29T10:06:59.807
> 
> 标签：php, mysql, json

我的表中有一个通过 parentId 字段相互关联的记录。从数据库中获取它们时，我需要创建 JSON 对象数组，其中子记录被添加到父对象的“子”属性中：

```
[{
    //main object
    children : [
        {
            //#1st level children object
            children: [
                {
                    //#2nd level children object
                }
            ]
        }
    ]
},
{
(...)
] 
```

但是如果没有 parentId 等于当前记录的记录，则不应将此属性添加到对象中。

现在我正在手动构建 JSON 字符串：

```
//first get the parents
$q = 'SELECT * FROM table WHERE parentId = 0';
$r = mysql_query($q);
$x=1;
$nr = mysql_num_rows($r);
while($e = mysql_fetch_array($r)){
        if($x==1){
                echo '[ {       ';
        }
        else{
                echo ' { ';     
        }

        if($e['leaf']==1){
                $leaf = 'true'; 
        } else {
                $leaf = 'false';
        }

        echo '"EndDate" : "'.str_replace('T00:00:00','',$e['EndDate']).'",
                  "Id" : '.$e['Id'].',
                  "Name" : "'.$e['Name'].'",
                  "BaselineStartDate" : "'.str_replace('T00:00:00','',$e['BaselineStartDate']).'"';
        if($leaf){
                echo ',"leaf": '.$leaf.'';
        }

        childs($e['Id'], $x, $nr);
        if($x<$nr){
                echo ',';
        }       
        $x++;
}
if($x>1){
        echo ']';
}

function childs($id, $x, $nr, $x2='', $nr2=''){
        //now see if there are childern
        $q2 = 'SELECT * FROM table WHERE parentId = "'.$id.'" ';
        $r2 = mysql_query($q2);
        $nr2 = mysql_num_rows($r2);
        if($nr2>0){
                echo ',"children": [ '; 
                $x2 =1;
                while($e2 = mysql_fetch_array($r2)){

                        if($e2['leaf']==1){
                                $leaf2 = 'true';        
                        }
                        else{
                                $leaf2 = 'false';
                        }

                        echo '{
                              "EndDate" : "'.str_replace('T00:00:00','',$e2['EndDate']).'",
                                  "Id" : '.$e2['Id'].',
                                  "Name" : "'.$e2['Name'].'",
                                  "BaselineStartDate" : "'.str_replace('T00:00:00','',$e2['BaselineStartDate']).'",
                                  "leaf" : "'.$leaf2.'"';

                        childs($e2['Id'],$x,$nr,'',$x2,$nr2);
                        if($x2<$nr2){
                                echo ',';       
                        }
                        $x2++;

                }
                echo '] }';
        }
        else{
                echo ',"children" : []}';       
        }            
} 
```

有没有一种简单的方法可以使用一些内置的 PHP 功能（如 fetch_assoc 或类似的东西）使这段代码更健壮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:19:19.253

你更应该..

1.  从数据库中获取结果
2.  根据要求重新格式化（您可以使用相关代码进行一些更改[PHP 从具有关系数据的数组创建多维数组](https://stackoverflow.com/questions/11239652/php-create-a-multidimensional-array-from-an-array-with-relational-data)
3.  然后最后， json_encode 结果数组

# c# - 在 C# 中读取用 C 格式化的文件

> ID：11259864
> 
> 赞同：1
> 
> 时间：2012-06-29T10:07:03.090
> 
> 标签：c#, c, file, formatted

我有一个用 C 语言编写的二进制文件，其中包含一长串数字。首先，它随后包含 4 次 int（因此前 16 个字节是 4 个 int），然后它包含双精度数（我假设每 8 个字节一个新的双精度数）。

在任何点或其他任何地方都没有空格。现在我需要用 C# 读取数据，但到目前为止，我尝试的一切都不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T10:13:56.487

```
using (BinaryReader br = new BinaryReader(File.Open("file", FileMode.Open)))
{
  int a = br.ReadInt32();
  int b = br.ReadInt32();
  int c = br.ReadInt32();
  int d = br.ReadInt32();
  double e = br.ReadDouble();
  double f = br.ReadDouble();
  ...
} 
```

# android - 如何从 TabAdapter 中的一个选项卡中替换片段？

> ID：11259869
> 
> 赞同：2
> 
> 时间：2012-06-29T10:07:40.170
> 
> 标签：android, listview, android-viewpager, fragment

虽然我意识到嵌套片段不是一个选项，但我仍然有一个我根本无法找到答案的问题。

我正在使用 ActionBarSherlock 的 FragmentsTabPager 示例来创建一个界面，在该界面中，可以通过滑动而不是单击选项卡来翻页。我的问题是这些选项卡之一包含一个列表视图。单击此列表视图时，将启动包含新列表（具有基于单击的项目的数据）的不同片段。我该如何做到这一点？

我想你可能需要我的 BaseActivity 中的一些内容（带有 ViewPager 和 TabsAdapter 的那个

```
*snippet*

public class BaseActivity extends SherlockFragmentActivity {
TabHost mTabHost;
ViewPager  mViewPager;
TabsAdapter mTabsAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs_pager);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager)findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

    mTabsAdapter.addTab(mTabHost.newTabSpec("home").setIndicator("Home"),
            FragmentStackSupport.CountingFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("players").setIndicator("PLAYERS"),
            PlayerRankingFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("teams").setIndicator("TEAMS"),
            FederationRanksFragment.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

/**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between pages.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct paged in the ViewPager whenever the selected
 * tab changes.
 */
public static class TabsAdapter extends FragmentPagerAdapter
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }
*Snippet* 
```

BaseActivity -> 选项卡“Teams” -> Teams ListView(AllianceFragment) -> Teams Item Clicked -> Players ListView(PlayersFragment)。

最后是相关应用的截图：

![https://dl.dropbox.com/u/11917448/Screenshot_2012-06-28-13-32-21.png](../Images/30ef3443d7be3a6829ed0be620c9d1be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:06:42.207

顺便说一句，现在有了最新的支持库，刚刚添加了嵌套片段支持。请参阅 getChildFragmentManager() 方法。但要小心内存泄漏。我还在和他们玩。我将它与 PagerTabStrip 和 ViewPager 一起使用。效果很好。

# pagespeed - 为什么即使设置了缓存标头，谷歌 pagespeed 也会要求指定 ETag

> ID：11259870
> 
> 赞同：0
> 
> 时间：2012-06-29T10:07:45.653
> 
> 标签：pagespeed, yslow

[我已将缓存标头设置为遥远的未来（从现在起 1 年），并按照 YSlow（ http://developer.yahoo.com/performance/rules.html#etags](http://developer.yahoo.com/performance/rules.html#etags) ）的建议禁用了 ETags，但 Google pagespeed 似乎即使设置了缓存的标头，也需要 ETag（或 last-modified）。

“为所有可缓存资源指定 Expires 或 Cache-Control max-age 之一以及 Last-Modified 或 ETag 之一非常重要。”

这两条规则似乎相互冲突。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:52:29.083

YSlow 通常不建议删除 ETag，但对于某些环境。当不使用 ETags 时，你应该使用它`Last-Modified`。

`ETag`并且`Last-Modified`用于**重新请求已缓存且可能已过期的资源**时的*条件 GET-Requests*。

 **`Cache-Control max-age`用于确定**缓存项目的有效期**而无需再次询问。（当此规则过期时，浏览器将进行有条件的 GET ...）

所以在你的情况下：

*   浏览器将资源缓存一年。在那一年内，根本没有完成对这个资​​源的请求。它直接从本地缓存中提供。（使用`Cache-Control`标题设置。）
*   浏览器在一年过期后执行条件请求以检查是否有变化。当没有任何变化时，服务器会以`HTTP 304`空正文进行响应。在这种情况下，浏览器会继续使用其缓存项目，而无需重新传输。（使用`ETag`和/或`Last-Modified`标题设置）

（浏览器可能会也可能不会尊重您的数据。例如，即使一年尚未到期，浏览器也可能会发出有条件的请求。）

对于高度优化的站点，这`Cache-Control`一点更为重要，因为您将其设置为 faaaar 未来过期标头，并且只需更改资源的 URL 以防它发生更改。虽然这可以防止使用条件请求，但它使您能够在定义 expires 标头时非常激进，同时能够立即为每个人提供新版本的资源。这是因为新 URL 似乎是浏览器视图中的新资源。

对于 Java，存在一个名为[jawr](http://jawr.java.net/)的框架，它利用这些和其他概念，而不会对您的站点开发产生负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T17:45:56.630

`ETag`并且`Cache-Control`标头不是排他性的。您链接到的页面建议删除 ETags 的原因是减少 HTTP 标头的大小。这最多可以为您节省几个字节。这是一个用例，在哪里以及为什么同时拥有两者仍然有意义：

*   您提供`application.js`一周的有效期和一个 etag 指纹
*   一周过去了，用户回到你的站点：文件已经过期，浏览器发送一个条件请求，如果文件没有被修改，浏览器可以决定完全跳过请求文件。（Last-Modified 也有效）

如果您不提供`ETag`or `Last-Modified`，则浏览器*必须*请求并下载整个文件。

良好的相关资源：[https ://developers.google.com/speed/articles/caching](https://developers.google.com/speed/articles/caching)**

# php - 如何旋转图像并保存图像

> ID：11259881
> 
> 赞同：15
> 
> 时间：2012-06-29T10:08:22.817
> 
> 标签：php, javascript, jquery, ajax, image-rotation

在我的应用程序中，我在 div 中有一个图像，一个按钮。

当我使用 jquery 单击按钮时，我想旋转显示的图像并保存旋转的图像。

我已经使用了代码：

[http://code.google.com/p/jquery-rotate/](http://code.google.com/p/jquery-rotate/)

和jQuery代码：

```
$(function() {                                    // doc ready
                var rotation = 0;                             // variable to do rotation with
                $("#img").click(function() {
                    rotation = (rotation + 45) % 360; // the mod 360 probably isn't needed
                    $("#cropbox").rotate(rotation);
                });
            }); 
```

html代码：

```
<img src="demo_files/pool.jpg" id="cropbox" />
<input type="button" id="img" name="img" value="click" /> 
```

当我使用上面的代码时，有两个图像，一个是旧图像，另一个是旋转图像。

在这里，我想旋转相同的图像并仅显示旋转后的图像。并将旋转后的图像保存在目录中。

我如何使用 jquery 做到这一点？如果使用 jquery 不可能，那么我如何使用 php/ajax 做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-29T12:05:57.367

```
//define image path
$filename="image.jpg";

// Load the image
$source = imagecreatefromjpeg($filename);

// Rotate
$rotate = imagerotate($source, $degrees, 0);

//and save it on your server...
imagejpeg($rotate, "myNEWimage.jpg"); 
```

看一眼：

[图像旋转（）](http://php.net/manual/en/function.imagerotate.php)

和：

[file_put_contents()](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-04T05:37:21.783

图像旋转：PNG 或 JPEG 取决于文件类型并保存在您的服务器上

```
// File and rotation
$rotateFilename = '/var/www/your_image.image_type'; // PATH
$degrees = 90;
$fileType = strtolower(substr('your_image.image_type', strrpos('your_image.image_type', '.') + 1));

if($fileType == 'png'){
   header('Content-type: image/png');
   $source = imagecreatefrompng($rotateFilename);
   $bgColor = imagecolorallocatealpha($source, 255, 255, 255, 127);
   // Rotate
   $rotate = imagerotate($source, $degrees, $bgColor);
   imagesavealpha($rotate, true);
   imagepng($rotate,$rotateFilename);

}

if($fileType == 'jpg' || $fileType == 'jpeg'){
   header('Content-type: image/jpeg');
   $source = imagecreatefromjpeg($rotateFilename);
   // Rotate
   $rotate = imagerotate($source, $degrees, 0);
   imagejpeg($rotate,$rotateFilename);
}

// Free the memory
imagedestroy($source);
imagedestroy($rotate); 
```

它对我有用，试试吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-19T17:29:29.817

```
<?php //image rotate code here 
         if(isset($_POST['save']))
         {
             $degrees=90;

             $new_file=$sourceName;
             $filename ="http://localhost/dostoom/files_user/1000/4/153.jpg";
             $rotang = $degrees;
             list($width, $height, $type, $attr) = getimagesize($filename);
              $size = getimagesize($filename);
              switch($size['mime'])
              {
                 case 'image/jpeg':
                                     $source =
         imagecreatefromjpeg($filename);
                                     $bgColor=imageColorAllocateAlpha($source, 0, 0,
         0, 0);
                                     $rotation = imagerotate($source,
         $rotang,$bgColor);
                                     imagealphablending($rotation, false);
                                     imagesavealpha($rotation, true);
                                     imagecreate($width,$height);
                                     imagejpeg($rotation,$new_file);
                                     chmod($filename, 0777);
                 break;
                 case 'image/png':

                                     $source =
         imagecreatefrompng($filename);
                                     $bgColor=imageColorAllocateAlpha($source, 0, 0,
         0, 0);
                                     $rotation = imagerotate($source,
         $rotang,$bgColor);
                                     imagealphablending($rotation, false);
                                     imagesavealpha($rotation, true);
                                     imagecreate($width,$height);
                                     imagepng($rotation,$new_file);
                                     chmod($filename, 0777);
                 break;
                 case 'image/gif':

                                     $source =
         imagecreatefromgif($filename);
                                     $bgColor=imageColorAllocateAlpha($source, 0, 0,
         0, 0);
                                     $rotation = imagerotate($source,
         $rotang,$bgColor);
                                     imagealphablending($rotation, false);
                                     imagesavealpha($rotation, true);
                                     imagecreate($width,$height);
                                     imagegif($rotation,$new_file);
                                     chmod($filename, 0777);
                 break;
                 case 'image/vnd.wap.wbmp':
                                     $source =
         imagecreatefromwbmp($filename);
                                     $bgColor=imageColorAllocateAlpha($source, 0, 0,
         0, 0);
                                     $rotation = imagerotate($source,
         $rotang,$bgColor);
                                     imagealphablending($rotation, false);
                                     imagesavealpha($rotation, true);
                                     imagecreate($width,$height);
                                     imagewbmp($rotation,$new_file);
                                     chmod($filename, 0777);
                 break;
              }
         }

    ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-09T10:48:20.230

它将有助于旋转图像并将图像保存在任何角度图像中。例如，我们将图像旋转 180 度。我们可以将该图像（180 度）保存到我们的文件夹中。这里我们使用了画布。它对 ASP.NET 开发人员有帮助

```
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" id="CLoseToggle" onclick="CloseModal()">&times;</button>
                <h4 class="modal-title">Image Preview</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12 cr-img-box">
                        <asp:Image ID="CropImg" ImageUrl="" runat="server" class="north"/>
                        <canvas id="canvas"></canvas>
                        <input type="hidden" id="hfData" runat="server"/>
                        <input type="hidden" id="hdnCropImageFileLocation"/>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <div style="text-align: center;">
                    <input type="button" id="btnRotate" class="btn btn-sm btn-info" value="Rotate"/>
                    <asp:Button ID="OKFinalSave" class="btn btn-sm btn-info" Text="Submit" runat="server"
                                OnClick="OKFinalSave_Click"/>
                </div>
            </div>

        </div>

    </div>
</div> 
```

```
protected void OKFinalSave_Click(object sender, EventArgs e)
{

    string
    CropImageLocation = ConfigurationManager.AppSettings["CropFileLocation"].ToString();
    CropImageLocation = CropImageLocation + DateTime.Now.ToString("yyyyMMdd") + "\\" + LoanNumber.Value;
    string
    a = CropImageLocation + "\\" + LoanNumber.Value + "_SIGN";
    string
    base64String = hfData.Value.Replace("data:image/png;base64,", string.Empty);
    byte[]
    bytes = Convert.FromBase64String(base64String);
    string
    filePath = a;

    if (!Directory.Exists(CropImageLocation)) {
        Directory.CreateDirectory(CropImageLocation);
    }
    if (File.Exists(a)) {
        File.Delete(CropImageLocation + "\\" + LoanNumber.Value + "_SIGN");

    }

    System.IO.File.WriteAllBytes(CropImageLocation + "\\" + LoanNumber.Value + "_SIGN.jpeg", bytes);
    SaveCropedPath(LoanNumber.Value, CropImageLocation + "\\" + LoanNumber.Value + "_SIGN.jpeg");
}

<script type = "text/javascript" >
var img = null, canvas = null;
$(function () {
    $("#canvas").css("display", "none");
    img = document.getElementById('CropImg');
    canvas = document.getElementById('canvas');
    if (!canvas || !canvas.getContext) {
        canvas.parentNode.removeChild(canvas);
    } else {
        //img.style.position = 'absolute';
        //img.style.visibility = 'hidden';
    }
    RotateImage(0);
    $('#btnRotate').click(function () {
        $("#CropImg").css("display", "none");
        $("#canvas").css("display", "block");
        if (img.className == "north") {
            RotateImage(90);
            img.className = "west";
        } else if (img.className == "west") {
            RotateImage(180);
            img.className = "south";
        } else if (img.className == "south") {
            RotateImage(270);
            img.className = "east";
        } else if (img.className == "east") {
            RotateImage(0);
            img.className = "north";
        }
    });
});

function RotateImage(degree) {
    if (document.getElementById('canvas')) {
        var context = canvas.getContext('2d');
        var cw = img.width, ch = img.height, cx = 0, cy = 0;
        switch (degree) {
            case 90:
                cw = img.height;
                ch = img.width;
                cy = img.height * (-1);
                break;
            case 180:
                cx = img.width * (-1);
                cy = img.height * (-1);
                break;
            case 270:
                cw = img.height;
                ch = img.width;
                cx = img.width * (-1);
                break;
        }
        canvas.setAttribute('width', cw);
        canvas.setAttribute('height', ch);
        context.rotate(degree * Math.PI / 180);
        context.drawImage(img, cx, cy);
        document.getElementById('hfData').value = canvas.toDataURL();
    } else {
        switch (degree) {
            case 0:
                image.style.filter = 'progid:DXImageTransform.Microsoft.BasicImage(rotation=0)';
                break;
            case 90:
                image.style.filter = 'progid:DXImageTransform.Microsoft.BasicImage(rotation=1)';
                break;
            case 180:
                image.style.filter = 'progid:DXImageTransform.Microsoft.BasicImage(rotation=2)';
                break;
            case 270:
                image.style.filter = 'progid:DXImageTransform.Microsoft.BasicImage(rotation=3)';
                break;
        }
    }
}

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-11T05:53:39.367

您可以尝试我的解决方案来旋转图像

```
<?php

ob_start();

// Content type
header('Content-type: image/jpeg');

class RotateImage {
    private $_path;
    private $_degrees;

    public function __construct($path, $degrees){
        $this->_path = $path;
        $this->_degrees = $degrees;
    }

    public function rotate() {
        $image = new Imagick($this->_path);
        $image->rotateimage('black', $this->_degrees);
        echo $image->getImageBlob();
        exit();
    }

}

if($_SERVER['REQUEST_METHOD'] == 'GET'){
    $sourceImagePath = isset($_GET['image_path']) ? $_GET['image_path'] : null;
    $degrees = isset($_GET['degrees']) ? $_GET['degrees'] : 90;

    $obj = new RotateImage($sourceImagePath, $degrees);
    return $obj->rotate();
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-20T07:23:23.960

仅基于 nagarjun daram 的使用图像和画布的 Javascript 解决方案。

使用数据 URL，完整的工作示例： [https ://jsfiddle.net/f8d46umz/7/](https://jsfiddle.net/f8d46umz/7/)

请注意，跨源图像可能无法正常工作，至少在小提琴上是这样。

主要旋转代码：

```
function rotateDegrees(degrees, imgSrc, callback){
  var canvasElement = document.getElementById('canvas'); //or create
  if (!canvasElement || !canvasElement.getContext) {
    return showUnsupported();
  }
  //We use an additional img to get the sizes
  var img = document.getElementById('tmpImg'); //or create
  img.onload = function(){
      var cw = img.width,
        ch = img.height,
        cx = 0,
        cy = 0;
      switch (degrees) {
        case 90:
          cw = img.height;
          ch = img.width;
          cy = img.height * (-1);
          break;
        case 180:
          cx = img.width * (-1);
          cy = img.height * (-1);
          break;
        case 270:
          cw = img.height;
          ch = img.width;
          cx = img.width * (-1);
          break;
      }
      var context = canvas.getContext('2d');
      canvas.setAttribute('width', cw);
      canvas.setAttribute('height', ch);
      context.rotate(degrees * Math.PI / 180);
      context.drawImage(img, cx, cy);
      var result = canvas.toDataURL();
      callback && callback(result);
  }
  img.src = imgSrc;
} 
```

**注意等待图像加载到临时 img 的回调**

# html - 从左到右定位一定数量的div，然后在下部再从左到右定位

> ID：11259884
> 
> 赞同：0
> 
> 时间：2012-06-29T10:08:52.267
> 
> 标签：html, css

我有一定数量的动态生成的#divs 已知.className(All have same className) 但未知ID。我想让#divs的大小（宽度，高度）固定，然后从左到右显示它们，在一行中，如果它不适合该行，则显示到下一行。我试过 (float : left ) ，但最后一个 div 下方的元素也显示在左侧，看起来很丑 + div 的大小不同（它们的文本长度可变）。什么是 css 属性以及如何设置它来为我创造奇迹......

我不确定，但我认为应该通过为类定义某种形式的定位（绝对、相对等）来解决问题。

```
<html>
    <head>
        <style>
            .wrapperDiv{
                overflow:auto;
                background-color:green;
                position:relative;
            }

            .column{
                background-color:aqua;
                width:20em;
                height:20em;
                float:left;
                margin:2px;
            }
        </style>
    </head>
    <body>
    <form>
        <div class="wrapperDiv">
            <table class="column">
                                    <tr><td>Name<hr/></td></tr><tr><td>DataType :</td><td><select name="Name_dataType" class="dataType" onchange="typeChanged(this)" ><option value="text" selected="true" > Text </option><option value="number"  > Number </option><option value="date"  > Date </option></select></td></tr>
                                    <tr><td>Equals:</td><td> <input type="text" name="Name_equals"/></td></tr> <br/><tr><td>Contains:</td><td> <input type="text" name="Name_contains"/></td></tr><br/>
                                    </table> 

            <table class="column">
                                    <tr><td>Name<hr/></td></tr><tr><td>DataType :</td><td><select name="Name_dataType" class="dataType" onchange="typeChanged(this)" ><option value="text" selected="true" > Text </option><option value="number"  > Number </option><option value="date"  > Date </option></select></td></tr>
                                    <tr><td>Equals:</td><td> <input type="text" name="Name_equals"/></td></tr> <br/><tr><td>Contains:</td><td> <input type="text" name="Name_contains"/></td></tr><br/>
                                    </table> 

            <table class="column">
                                    <tr><td>Name<hr/></td></tr><tr><td>DataType :</td><td><select name="Name_dataType" class="dataType" onchange="typeChanged(this)" ><option value="text" selected="true" > Text </option><option value="number"  > Number </option><option value="date"  > Date </option></select></td></tr>
                                    <tr><td>Equals:</td><td> <input type="text" name="Name_equals"/></td></tr> <br/><tr><td>Contains:</td><td> <input type="text" name="Name_contains"/></td></tr><br/>
            </table> 

            <table class="column">
                                    <tr><td>DATE_OF_BIRTH<hr/></td></tr><tr><td>DataType :</td><td><select name="DATE_OF_BIRTH_dataType" class="dataType" onchange="typeChanged(this)" ><option value="text"  > Text </option><option value="number"  > Number </option><option value="date" selected="true" > Date </option></select></td></tr>
                                    <tr><td>Equals:</td><td> <input type="text" name="DATE_OF_BIRTH_equals"/></td></tr> <br/><tr><td>Greater_Then:</td><td> <input type="text" name="DATE_OF_BIRTH_greaterThen"/></td></tr><br/><tr><td>Less_Then:</td><td> <input type="text" name="DATE_OF_BIRTH_lessThen"/></td></tr><br/>
            </table> 
            <table class="column">
                                    <tr><td>DATE_OF_BIRTH<hr/></td></tr><tr><td>DataType :</td><td><select name="DATE_OF_BIRTH_dataType" class="dataType" onchange="typeChanged(this)" ><option value="text"  > Text </option><option value="number"  > Number </option><option value="date" selected="true" > Date </option></select></td></tr>
                                    <tr><td>Equals:</td><td> <input type="text" name="DATE_OF_BIRTH_equals"/></td></tr> <br/><tr><td>Greater_Then:</td><td> <input type="text" name="DATE_OF_BIRTH_greaterThen"/></td></tr><br/><tr><td>Less_Then:</td><td> <input type="text" name="DATE_OF_BIRTH_lessThen"/></td></tr><br/>
            </table> 

        </div>
    </form>
    </body>
</html> 
```

为什么表格垂直对齐从左到右变化............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:51:46.940

好的，我看到你想做的事情有一些矛盾。

首先：您说要固定 div 的大小，但后来您说 div 的大小不同，因为它们具有可变长度的文本。您必须选择两个选项之一。如果您在 div 中有可变文本，您必须知道您不能固定 div 的尺寸，除非您想冒文本溢出 div 的风险。那，或者检查您的文本以确保它适合 div。

第二：您说您正在使用float：left，但随后抱怨最后一个div（我假设是该行的最后一个）下方的元素也显示为left。如果你想让一行的第一个 div 显示在右边，你应该使用 float:right。

我希望这可以为您澄清问题。

* * *

## 更新：

好的，我发现你的代码有问题。首先，让我告诉您，您不应该使用表格进行布局。`<div>`将使您的代码更简单，并且为此目的更好。无论如何，这不是破坏你的布局的原因。这是`<br/>`您出于某种原因在表格末尾插入的一些标签。所以你的代码看起来会更好：

```
<form>
<div class="wrapperDiv">
    <table class="column">
        <tr>
            <td>Name<hr/></td></tr>
        <tr>
            <td>DataType :</td>
            <td>
                <select name="Name_dataType" class="dataType" onchange="typeChanged(this)" >
                    <option value="text" selected="true" > Text </option>
                    <option value="number"  > Number </option>
                    <option value="date"  > Date </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Equals:</td>
            <td>
                <input type="text" name="Name_equals"/>
            </td>
        </tr>
        <tr>
            <td>Contains:</td>
            <td>
                <input type="text" name="Name_contains"/>
            </td>
        </tr>
    </table> 

    <table class="column">
        <tr>
            <td>Name<hr/></td>
        </tr>
        <tr>
            <td>DataType :</td>
            <td>
                <select name="Name_dataType" class="dataType" onchange="typeChanged(this)" >
                    <option value="text" selected="true" > Text </option>
                    <option value="number"  > Number </option>
                    <option value="date"  > Date </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Equals:</td>
            <td>
                <input type="text" name="Name_equals"/>
            </td>
        </tr>
        <tr>
            <td>Contains:</td>
            <td>
                <input type="text" name="Name_contains"/>
            </td>
        </tr>
    </table>

    <table class="column">
        <tr>
            <td>Name<hr/></td>
        </tr>
        <tr>
            <td>DataType :</td>
            <td>
                <select name="Name_dataType" class="dataType" onchange="typeChanged(this)" >
                    <option value="text" selected="true" > Text </option>
                    <option value="number"  > Number </option>
                    <option value="date"  > Date </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Equals:</td>
            <td>
                <input type="text" name="Name_equals"/>
            </td>
        </tr>
        <tr>
            <td>Contains:</td>
            <td>
                <input type="text" name="Name_contains"/>
            </td>
        </tr>
    </table>

    <table class="column">
        <tr>
            <td>DATE_OF_BIRTH<hr/></td>
        </tr>
        <tr>
            <td>DataType :</td>
            <td>
                <select name="DATE_OF_BIRTH_dataType" class="dataType" onchange="typeChanged(this)" >
                    <option value="text"  > Text </option>
                    <option value="number"  > Number </option>
                    <option value="date" selected="true" > Date </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Equals:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_equals"/>
            </td>
        </tr>
        <tr>
            <td>Greater_Then:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_greaterThen"/>
            </td>
        </tr>
        <tr>
            <td>Less_Then:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_lessThen"/>
            </td>
        </tr>
    </table> 

    <table class="column">
        <tr>
            <td>DATE_OF_BIRTH<hr/></td>
        </tr>
        <tr>
            <td>DataType :</td>
            <td>
                <select name="DATE_OF_BIRTH_dataType" class="dataType" onchange="typeChanged(this)" >
                    <option value="text"  > Text </option>
                    <option value="number"  > Number </option>
                    <option value="date" selected="true" > Date </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Equals:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_equals"/>
            </td>
        </tr>
        <tr>
            <td>Greater_Then:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_greaterThen"/>
            </td>
        </tr>
        <tr>
            <td>Less_Then:</td>
            <td>
                <input type="text" name="DATE_OF_BIRTH_lessThen"/>
            </td>
        </tr>
    </table>

</div>
</form> 
```

[您可以在这里](http://jsfiddle.net/Rorok_89/GQkFW/1/)看到它在 jsfiddle 中工作。

# android - 升级到 ADT 20 后，键盘在 Intel x86 Android 模拟器上停止工作

> ID：11259888
> 
> 赞同：7
> 
> 时间：2012-06-29T10:09:08.963
> 
> 标签：android, android-emulator

我的意思是我不能再从我的笔记本电脑键盘输入安卓模拟器了。虚拟和屏幕键盘工作正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T10:15:00.200

升级到工具版本 20 后我遇到了同样的问题。我必须编辑 AVD 以添加一个选项，如下所示：

*   从 Eclipse 转到 AVD Mananger。
*   选择特定的 AVD 并单击编辑
*   转到硬件部分，单击新建。
*   选择属性名称：键盘支持
*   默认情况下，它会添加一个值“no”。只需单击值列并将其更改为“是”。
*   再次单击编辑 AVD。

这将在 config.ini 文件中为 AVD 添加一个属性 hw.keyboard=yes。它应该从那里正常工作。

# selenium - 如何通过 selenium 获取类名

> ID：11259890
> 
> 赞同：5
> 
> 时间：2012-06-29T10:09:18.750
> 
> 标签：selenium

```
 <table >
<tr class="odd First"><td>1one Cell</td><td>2one Cell</td><td>3one Cell</td><td>4one Cell</td> </tr>
<tr class="even Second"><td>Two Cell</td><td>2Two Cell</td><td>3Two Cell</td><td>4Two Cell</td></tr>
<tr class="odd Thrid"><td>1Three Cell</td><td>2Three Cell</td><td>3Three Cell</td><td>4Three Cell</td></tr>
<tr class="even Fourth"><td>1Five Cell</td><td>2Five Cell</td><td>3Five Cell</td><td>4Five Cell</td></tr>       
</table> 
```

我怎样才能得到 tr 的类名。请给我建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T10:28:48.193

使用java获取所有标签的类名。

```
List<WebElement> list = driver.findElements(By.tagName("tr"));

for(WebElement ele:list){
   String className = ele.getAttribute("class");
   System.out.println("Class name = "+className);
} 
```

这会将网页上所有标签的所有类名打印到控制台。

```
String className = selenium.getAttribute("//html/body/table/tbody/tr[1]/@class"); 
```

可能此代码可能会为您提供第一个标签的类名的值。让我知道这个是否奏效。

# hadoop - 如何在hbase中查找行键中的列数

> ID：11259893
> 
> 赞同：2
> 
> 时间：2012-06-29T10:09:28.633
> 
> 标签：hadoop, hbase

如何在 hbase 中查找行键中的列数（因为一行可以有很多列）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:48:43.503

I don't think there's a direct way to do that as each row can have a different number of columns and they may be spread over several files.

If you don't want to bring the whole row to the client to perform the count there you can write an endpoint coprocessor (HBase version for a stored procedure if you like) to perform the calculation on the region server side and only return the result. you can read a little about coprocessors [here](https://blogs.apache.org/hbase/entry/coprocessor_introduction)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-18T13:41:44.057

有一个简单的方法：

使用 hbase shell 扫描表并将输出写入中间文本文件。因为 hbase shell 输出将一行的每一列拆分为一个新行，所以我们可以只计算文本文件中的行数（减去前 6 行，即 hbase shell 标准输出和最后 2 行）。

```
echo "scan 'mytable', {STARTROW=>'mystartrow', ENDROW=>'myendrow'}" | hbase shell > row.txt
wc -l row.txt 
```

确保选择适当的行键，因为边框不包含在内。

如果您只对特定列（系列）感兴趣，请在上面的 hbase shell 命令中应用过滤器（例如 FamilyFilter、ColumnRangeFilter、...）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T03:43:22.140

感谢@user3375803，实际上您不必使用外部 txt 文件。因为我无法评论你的答案，所以我把我的答案留在下面：

```
echo "scan 'mytable', {STARTROW=>'mystartrow', ENDROW=>'myendrow'}" | hbase shell | wc -l | awk '{print $1-8}' 
```

# dns - DNS 每次都尝试几次解析

> ID：11259894
> 
> 赞同：1
> 
> 时间：2012-06-29T10:09:30.107
> 
> 标签：dns, windows-server-2008

尝试使用 dns 解析主机名时，我的域控制器似乎遇到了一些问题。它似乎确实有效，但它总是需要尝试几次，即使它的主机名我已经解决了。我一直在通过网页和下载注意到它。

这是我做的 nslookup 测试

```
C:\Users\chris.townsend>nslookup abc.com
Server:  dc.example.com
Address:  192.168.101.20

DNS request timed out.
    timeout was 2 seconds.
*** Request to dc.example.com timed-out

C:\Users\chris.townsend>nslookup abc.com
Server:  dc.example.com
Address:  192.168.101.20

Non-authoritative answer:
Name:    abc.com
Address:  199.181.132.250 
```

有些网站它第一次工作，有些则需要更多。我似乎无法弄清楚，并且在我们办公室的所有系统上都是一样的。重新启动和 /dnsflush 似乎也没有任何区别。

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:53:10.543

以防万一其他人也有同样的问题：这就是我们发现的问题-我们使用了手表守卫路由器，它似乎是导致此问题的代理

# html - 点击时字体增加和减少

> ID：11259895
> 
> 赞同：0
> 
> 时间：2012-06-29T10:09:31.240
> 
> 标签：html, css

我的页面中有一个“+”和“-”按钮。单击“+”时，我需要将字体大小增加 10 像素，再次 onclick 会将大小增加 12。“-”以同样的方式减少。我该如何为此编写css类？

```
<ul id="box">
    <li><a title="t1" id="SizePlus" href="#"></a></li>
    <li><a title="t2" id="SizeMinus" href="#"></a></li>
</ul> 

#box
{
list-style-type: none;
display: block;
clear: both;
}

#box li a 
{
display: block;
float: left;
width: 25px;
height: 25px;
margin: 0px 10px 0px 0px;
text-indent: -10000px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:19:57.927

我认为只使用 css 是不可能的。使用 javascript 试试这个链接

[http://www.wpbeginner.com/wp-themes/how-to-change-font-size-onclick-in-wordpress-with-javascript/](http://www.wpbeginner.com/wp-themes/how-to-change-font-size-onclick-in-wordpress-with-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:13:35.587

**仅使用 css 是不可能的**。**你将不得不使用javascript来实现这一点......**

 **有用的网站[http://www.shopdev.co.uk/blog/text-resizing-with-jquery/](http://www.shopdev.co.uk/blog/text-resizing-with-jquery/)**

# c# - 评论数据库未在 asp .net 中更新

> ID：11259896
> 
> 赞同：1
> 
> 时间：2012-06-29T10:09:49.380
> 
> 标签：c#, asp.net-mvc-3, relational-database

我正在尝试使用 asp.net 创建一个简单的博客应用程序。我是一个新手，正在尝试自学 c# 和 asp .net mvc。

我面临的问题是，当我尝试向帖子添加评论时，它不起作用。我确实收到了附加到帖子的评论，但它没有显示任何内容。另外，当我检查数据库时，它只包含 Null 字段，但 BlogID 字段除外。我究竟做错了什么？

我的代码如下：

博客 - 类

```
public class Blog
{
    public int BlogID { get; set; }
    public string Title { get; set; }
    public string Writer { get; set; }

    [DataType(DataType.MultilineText)]
    public string Excerpt { get; set; }

    [DataType(DataType.MultilineText)]
    public string Content { get; set; }

    [DataType(DataType.Date)]
    public DateTime PublishDate { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }
} 
```

评论 - 类

```
public class Comment
    {
        public int CommentID { get; set; }
        public string Name { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Email { get; set; }

        [DataType(DataType.MultilineText)]
        public string CommentBody { get; set; }

        public virtual int BlogID { get; set; } 
        public virtual Blog Blog { get; set; }
    } 
```

博客详细视图模型

```
public class BlogDetailsViewModel
{
    public Blog Blog { get; set; }
    public Comment Comment { get; set; }
} 
```

博客 - 详细信息控制器

```
public ViewResult Details(int id)
{

    Blog blog = db.Blogs.Find(id);
    BlogDetailsViewModel viewModel = new BlogDetailsViewModel {Blog = blog};
    return View(viewModel);
} 
```

博客详细信息 - 查看

```
@model NPLHBlog.ViewModels.BlogDetailsViewModel 
```

有代码在下面的博客详细信息页面末尾显示博客帖子 + 评论表单：

```
 @using (Html.BeginForm("Create", "Comment"))
    {
        <input type="hidden" name="BlogID" value="@Model.Blog.BlogID" />
        <div class="editor-label">
            @Html.LabelFor(model => model.Comment.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Comment.Name)
            @Html.ValidationMessageFor(model => model.Comment.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Comment.Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Comment.Email)
            @Html.ValidationMessageFor(model => model.Comment.Email)
        </div>            

        <div class="editor-label">
            @Html.LabelFor(model => model.Comment.CommentBody)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Comment.CommentBody)
            @Html.ValidationMessageFor(model => model.Comment.CommentBody)
        </div>
        <p>
            <input type="submit" value="Add Comment" />
        </p> 
```

评论 - 创建控制器

```
public class CommentController : Controller
{
    private NPLHBlogDb db = new NPLHBlogDb();

    //
    // GET: /Comment/

    public ActionResult Create(Comment c)
    {
        Blog blog = db.Blogs.Single(b => b.BlogID == c.BlogID);
        blog.Comments.Add(c);
        db.SaveChanges();
        return RedirectToAction("Details", "Blog", new { ID = c.BlogID });
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:41:49.860

找到了答案...我将评论控制器的创建操作更新为：

```
public ActionResult Create(BlogDetailsViewModel viewModel)
{
    Blog blog = db.Blogs.Single(b => b.BlogID == viewModel.Comment.BlogID);
    Comment c = viewModel.Comment;
    blog.Comments.Add(c);
    db.SaveChanges();
    return RedirectToAction("Details", "Blog", new { ID = c.BlogID });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:18:08.723

在保存之前尝试将评论与博客相关联，因为作为操作参数传递的评论实例的`Blog`属性为空：

```
public ActionResult Create(Comment c)
{
    Blog blog = db.Blogs.Single(b => b.BlogID == c.BlogID);
    blog.Comments.Add(c);

    // associate the comment with the blog that you have retrieved
    c.Blog = blog;

    db.SaveChanges();
    return RedirectToAction("Details", "Blog", new { ID = c.BlogID });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:44:20.387

我认为您应该将**HttpPost**属性添加到 Create ActionResult 方法。

```
[HttpPost]
public ActionResult Create(Comment c)
    {
        Blog blog = db.Blogs.Single(b => b.BlogID == c.BlogID);
        blog.Comments.Add(c);
        db.SaveChanges();
        return RedirectToAction("Details", "Blog", new { ID = c.BlogID });
    } 
```

# c# - 使用 EntityFramework 获取每月数据

> ID：11259897
> 
> 赞同：1
> 
> 时间：2012-06-29T10:09:51.257
> 
> 标签：c#, asp.net, linq, entity-framework

在我的表中`TimeTable`，我有诸如此类的列`Title,FromDate,ToDate`，我试图按月获得结果。为此，我尝试使用实体框架，例如，

```
DataObject.Entities entities=new DataObject.Entities();

DataObject.TimeTable timeTable     
            = entities.TimeTables.First(t=>t.FromDate.Month<=DateTime.Now.Month 
                                && t.ToDate.Month>DateTime.Now.Month)
{ 
     //
} 
```

但是在这里，它在显示错误中`t.FromDate.Month`显示错误`<System.DateTime> doesn't contain definition for Month`......我该如何解决这个问题，任何人都可以在这里帮助我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:29:42.693

问题在于您使用的方法是 .Net 框架的一部分，而 linq 无法翻译。像这样尝试处理这个问题

```
var example = entities.TimeTables.AsEnumerable().Where(
                            t=>t.FromDate.Month<=DateTime.Now.Month 
                            && t.ToDate.Month>DateTime.Now.Month); 
```

这也可以

```
var example = entities.TimeTables.ToList().Where(
                            t=>t.FromDate.Month<=DateTime.Now.Month 
                            && t.ToDate.Month>DateTime.Now.Month); 
```

**注意：**第二个将强制您获取表的所有记录，如果行数过多，将导致性能不佳

# css - 将 2 个 div 放在不同宽度的包装器中，而不固定第二个 div 的宽度

> ID：11259903
> 
> 赞同：0
> 
> 时间：2012-06-29T10:10:20.840
> 
> 标签：css, html, width, alignment

我有我的 html 是这样的...

```
<div class = "content">
    <div class = "folder-list">
    </div>
    <div class = "message-list">
    </div>
</div> 
```

现在我的**文件夹列表**div 大小是 160px。现在我希望**消息列表**div 占据内容类的其余宽度，该宽度设置为 100%（内容的宽度）。我不想修复CSS中**消息列表的宽度。**我怎样才能做到这一点？

我在两个 div 中都添加了*float:left属性。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:11:42.470

像这样写：

```
.folder-list{
 width:160px;
 float:left;
}
.message-list{
 overflow:hidden;
} 
```

检查这个[http://jsfiddle.net/BB9w6/](http://jsfiddle.net/BB9w6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:27:21.467

请检查：

CSS代码：

```
.folder-list{
    width: 160px;
    background:orange;
    float:left;
}
.message-list{
    width:100%;
    background:yellow;
} 
```

html代码：

```
<div class = "content">
    <div class = "folder-list">
    Test1
    </div>
    <div class = "message-list">
    Test2

    </div>
</div> 
```

# java - 使用 Java 在带有面板的网格中显示 ASCII 的最佳方法是什么？

> ID：11259904
> 
> 赞同：5
> 
> 时间：2012-06-29T10:10:21.040
> 
> 标签：java, roguelike

我在Java方面没有太多经验，但我正在尝试编写一个简单的类似rogue的游戏来熟悉它，我只是想知道如何创建这样的界面：

![Thomas Biskup 的 JADE 屏幕](../Images/07ead1b2baa1da03d165d4712bce9ffa.png) 有什么明显的方法可以让你去做这样的事情吗？作为 Java 新手，我真的不知道最好的方法是什么。

抱歉含糊其辞！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T11:45:27.447

JDK 中没有这样的（简单）组件——如果您不需要颜色，可以使用 JTextArea 来显示 ASCII-Art（在设置固定宽度字体之后）。您需要注意不要遇到字符集问题（如果您不坚持使用 US-ASCII 7 位）。编写一个处理彩色显示的组件（可能还有转义序列，本质上是模拟控制台窗口）不会太难，但如果您刚开始使用 Java，这可能是一个不受欢迎的挑战。

您也可以只用 Java 编写游戏，然后将 ASCII 码显示到系统控制台（您的游戏将简单地输出到标准输出）。

编辑：颜色 ASCII 可以通过将您的内部格式转换为（简单）HTML 来实现，并且可以使用 JLabel 显示 HTML。它可能不是最优雅的方法，但它的实现应该相当简单（现在硬件速度也不应该成为这种方法的问题）。这种方法建立在您可以使用 JLabel.setText() 并传递以 HTML 标记开头的字符串的能力之上。JLabel 然后将整个文本解释为 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T14:41:20.133

在这里查看 Trystan 的[Ascii 面板](https://github.com/trystan/AsciiPanel)，以及他的博客和关于制作 roguelike 的[教程](http://trystans.blogspot.com/2011/08/roguelike-tutorial-01-java-eclipse.html)。

# eclipse - 如何向 maven-war-plugin 添加配置？

> ID：11259910
> 
> 赞同：1
> 
> 时间：2012-06-29T10:10:44.740
> 
> 标签：eclipse, maven, pom.xml, maven-war-plugin

我第一次将 eclipse 与 m2e 一起使用，我想配置 maven-war-plugin 的 pom 以将正确的路径添加到我的 web.xml。如果我尝试使用“Maven Pom 编辑器”编辑有效的 pom，但整个 pom 是只读的？

我该如何解决这些问题？

问候托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:22:20.927

有效的 pom 是 Maven 的超级 pom 之间的合并，可能是其他继承的 pom 和你的项目 pom。所以改变有效的pom是没有意义的。您应该更改自己的 pom 以满足您的需求。[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/)的配置在 Maven 中像往常一样工作，如下所示：

```
 <build>
    <plugins>
      ..
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
        <configuration>
          ...here your appropriate configurations
        </configuration>
      </plugin>
      ..
    </plugins>
  </build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:17:00.640

您无法编辑有效的 pom。您只能编辑 pom。有效的 pom 是具有所有默认配置值等的 pom，以及取自父 pom 的值。编辑 pom 会改变有效的 pom。

如果您希望更改 pom 中的默认值，您可以从有效 pom 中剪切和粘贴，但仅对您需要更改的部分执行此操作。

# android - 输入文本后如何退出editText？

> ID：11259912
> 
> 赞同：2
> 
> 时间：2012-06-29T10:10:50.247
> 
> 标签：android, android-layout, android-edittext

我已经为我的程序准备了一个输入屏幕，并在其中放置了一个edittext和ImageViews。现在的问题是我能够通过虚拟键盘在edittext中键入文本，但问题是在我完成了我的文本之后我无法从编辑文本中出来，光标只停留在编辑文本框中。我在下面有一个 imageView 可以单击以继续使用该表单，但在那个时候它是不可点击的..请帮助！！！

我的代码是

我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
         android:id="@+id/begin_"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginLeft="170dp"
         android:layout_marginTop="220dp"
         android:src="@drawable/begin" />

    <ImageView
        android:id="@+id/enter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dp"
        android:layout_marginTop="30dp"
        android:src="@drawable/enter_name" />

     <ImageView
        android:id="@+id/roof"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/roof" />

     <EditText
         android:id="@+id/editText2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginLeft="180dp"
         android:layout_marginTop="180dp"
         android:ems="8"
         android:inputType="textMultiLine" 
         android:imeOptions="actionDone"/>
</FrameLayout> 
```

我的主要java类

```
package game.pack;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.*;
import android.view.inputmethod.InputMethodManager;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;

public class Begin extends Activity implements View.OnClickListener  {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

            setContentView(R.layout.entry);

        ImageView begin = (ImageView) findViewById(R.id.begin_);
        begin.setOnClickListener(this);
    }

    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.begin_:
            setContentView(new SushiMain(this));
            break;
        default:
            break;
        }
    }
} 
```

我的 android 清单是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="game.pack"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".FrontScreen"
            android:screenOrientation="landscape"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Begin"
            android:screenOrientation="landscape"
            android:label="@string/app_name" 
            >
          <intent-filter>
                  <action android:name="begingame" />
                  <category android:name="android.intent.category.DEFAULT" />
          </intent-filter>
        </activity>

        <activity
            android:name=".Sushitap"
            android:screenOrientation="landscape"
            android:label="@string/app_name" >

        <intent-filter>
                <action android:name="gameover" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:20:25.957

输入 EditText 后 ENTER KEY PRESSED 时，使用[View.OnKeyListener](http://developer.android.com/reference/android/view/View.OnKeyListener.html) for EditText 从 EditText 中删除焦点：

```
ditText.setOnKeyListener(onSoftKeyboardDonePress);

    private View.OnKeyListener onSoftKeyboardDonePress=new View.OnKeyListener() 
    {
        public boolean onKey(View v, int keyCode, KeyEvent event) 
        {
            if (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)
            {
                 // code to hide the soft keyboard
                 EditTexst.clearFocus();
                 EditTexst.requestFocus(EditText.FOCUS_DOWN);            
            }
            return false;
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:22:22.657

您需要将 xml 中的 edittext 链接到您的代码。在您的 oncreate 方法中添加

```
EditText edittext= (EditText ) findViewById(R.id.editText2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:23:43.227

您可以尝试将其放入edittext的布局文件中吗？

```
 android:focusableInTouchMode="true" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T10:15:24.263

尝试这个。

```
editTextId.clearFocus();
editTextId.requestFocus(EditText.FOCUS_DOWN); // assuming that you want to move the focus to the next View Element. If you want it to go to the previous View, use FOCUS_UP 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T10:40:34.147

如果您的应用程序需要编辑文本和旁边的图像视图..那么这是您可以使用的代码。在 layout.xml 中，您可以将此代码添加到带有图像的 edittext

```
<LinearLayout        
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white2" >

    <EditText
        android:id="@+id/et_search"
        android:layout_width="280dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
        android:drawableRight="@drawable/search_20"
        android:ems="10"
        android:hint="@string/search_brdNm" />

</LinearLayout> 
```

在您的 java 类中，您可以使用以下代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search_asset);

        mEt_search = (EditText) findViewById(R.id.et_search);

    mEt_search.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String str_searchTxt = mEt_search.getText().toString().trim();
                String str_channelNm = AppConfigurationUtils.getChannelName();
                if (str_searchTxt.length() == 0) {
                    Toast.makeText(getApplicationContext(),
                            getResources().getString(R.string.ENTER_MANDATORY),
                            Toast.LENGTH_LONG).show();
                    return;
                }

            }
        });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T12:30:49.117

大家好我的问题解决了！！！实际上，我正在从其他视图移动到该视图，在第一个视图中，我通过其布局 Id 调用当前类活动，因此在这种情况下，图像视图的行为不是普通按钮，而只是一个视图

所以在第一个视图中，我使用了一个意图来调用我在上面发布的活动的类，这成功地完成了我的任务！！！

谢谢大家的时间和努力......非常感谢！！！！

谢谢你！！！

# .net - WCF 中需要 datacontract 属性吗？

> ID：11259915
> 
> 赞同：0
> 
> 时间：2012-06-29T10:11:00.557
> 
> 标签：.net, wcf, wcf-data-services, wcf-binding

在 WCF DataContract 属性中是必需的吗？

我有一个类没有用 DataContract 标记或用 DataMember 标记属性。

当我在 4 台服务器上部署 wcf 服务时，out 4 服务在 3 台服务器上运行良好，但在 1 台服务器上失败，并显示消息“无法序列化类型‘类’。考虑使用 DataContractAttribute 属性对其进行标记，并标记您想要序列化的所有成员具有 DataMemberAttribute 属性。”

那么在 web.config 或 machine.config 或 IIS 中是否有任何设置，我可以要求在代码中使用序列化程序？或者

如果没有指定属性，我可以指定使用默认序列化程序吗？

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T15:36:29.533

不，不需要 DataContractAttribute - WCF 将推断序列化规则。我能想到的唯一要检查的是 .NET 的版本在您的所有服务器上都是相同的。

更多信息：[WCF 数据协定/序列化](https://stackoverflow.com/questions/3291122/wcf-data-contract-serialization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:31:13.620

如 MSDN 所述

> [DataContractAttribute] 指定该类型定义或实现数据协定，并且可由序列化程序（如 DataContractSerializer）序列化。为了使他们的类型可序列化，类型作者必须为他们的类型定义一个数据协定

`DataContract`您必须使用要在 WCF 服务中使用的和`DataMember`属性来装饰您的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:18:49.570

是的，将需要在`[DataContract]`WCF 服务和任何客户端之间发送的所有类的属性。

该类的所有可能包含您要发送的数据的属性都需要使用该`[DataMember]`属性进行标记。这使得定义一个包含可序列化和不可序列化数据的类成为可能——但我不推荐它。

请注意，您只能序列化数据成员，例如`public`字段或属性，但*不能*序列化方法。因此，我的建议是使用普通类，这些类除了包含要在服务和客户端之间通信的数据作为数据契约之外什么都不做。

# ruby-on-rails - Rails 3.1 Savon soap 请求给出 Timeout::Error: Timeout::Error ut using curl 我得到响应

> ID：11259917
> 
> 赞同：7
> 
> 时间：2012-06-29T10:11:10.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, soap-client, savon

我在 Rails 3.1 中使用 savon 构建肥皂客户端时遇到了麻烦。但是当我尝试从 curl 命令行发出请求时，我能够成功获得响应。我来自命令行的 curl 请求如下所示

```
curl -d @Downloads/test.xml  -H "content-type: text/xml;charset=UTF-8" -H "SOAPAction: http://services.bamnetworks.com/registration/identityPoint/create" "https://qaservices.bamnetworks.com/ws/services/IdentityPointService" -v 
```

我从中得到了这样的完美回应。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header /><soapenv:Body><identityPoint_create_response xmlns="http://services.bamnetworks.com/registration/types/1.6"><status><code>-2000</code><message> [Duplicate credential constraint violated] [com.bamnetworks.registration.types.exception.DuplicateCredentialException]</message><exceptionClass>com.bamnetworks.registration.types.exception.DuplicateCredentialException</exceptionClass> 
```

但是，当我每次收到 Savon 客户的请求时

```
HTTPI executes HTTP POST using the net_http adapter
Timeout::Error: Timeout::Error 
```

我的 Savon 请求看起来像这样

```
client = Savon::Client.new do |wsdl, http|
  http.auth.ssl.verify_mode = :none
  wsdl.document = "https://qaservices.bamnetworks.com/ws/services/IdentityPointService?wsdl"
end

begin

response = client.request :ns, :identityPoint_create_request do |soap, wsdl, http|

      http.headers['SOAPAction'] = 'http://services.bamnetworks.com/registration/identityPoint/create'
      http.headers = { "Content-Length" => "0", "Connection" => "Keep-Alive" }
      soap.namespaces["xmlns:ns0"]="http://services.bamnetworks.com/application/types/1.0"

      soap.header = {
          "ns0:appCredentials" => {
              "ns0:name"=>"XXXXXXX",
              "ns0:password"=>"XXXXXXXXX"
          }
      }
      soap.body ={
          :identification => {
              :email => {
                  :address => "mlb_user@mlb.com"
              },
              :password => { :address => { :id => 44 } }
          },
          :profileProperty => {

              :name => "birthDay",
              :value => "17"
          },
          :profileProperty =>     {
              :name => "birthMonth",
              :value => "8"
          },
          :profileProperty =>     {
              :name => "birthYear",
              :value => "1986"
          },
          :attributes! => { :identification => { :type => "email-password" } }
      }
    end 
```

我不知道我在哪里犯了错误。如果有人帮助我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:30:04.353

这可能是肥皂服务器问题尝试评论行：

```
http.headers = { "Content-Length" => "0", "Connection" => "Keep-Alive" } 
```

# jquery - jquery mobile+php认证系统

> ID：11259918
> 
> 赞同：0
> 
> 时间：2012-06-29T10:11:13.247
> 
> 标签：jquery, session, mobile

我正在用移动 jquery 和 php 编写一个身份验证系统。html代码如下：

```
 <div data-role = "page" id ="dialogo">
        <a href = "#identificacion" id = "formdialog" data-rel="dialog"> </a>
    </div>

     <div data-role = "page" id = "identificacion">
        <div id ="main"> 
            <div id ="caplogin">
                <img src = "images/vives_logo.png"/>
                <p> Acceso</p>
                <div style ="clear:both;"></div>
            </div>
            <div style ="clear:both;"></div>
            <div id ="formlogin">
            <form name ="formautentificacion" id ="formautentificacion" method = "post" action = "" data-ajax="false">
                <table>
                    <tr> <td> Login </td> <td> <input type ="text" name ="user" id ="user" size="30"/></td> </tr>
                    <tr> <td> Password </td><td><input type ="password" name ="pass" id="pass" size="30"/></td></tr>
                    <tr> <td colspan = "2" align ="right"> <input type = "submit" id = "sbmt_aut" name = "sbmt_aut" value = "ENTRAR"/></td>
                </table>
            </form>
            </div>
        </div>
    </div>

    <div data-role = "page" id = "pageclients">

        <div id = "headerpageclient">
            <a href="index.php" class ="logout" data-role="button" data-icon="delete">SALIR</a> 
        </div>
        <div id = "clientes">

        </div>
    </div>

    <div data-role = "page" id = "pagepuntosventa">
        <div id = "headerpagepuntoventa">

        </div>
    </div> 
```

我有两个 ajax 函数来启动和销毁 php 会话，并根据 ajax 响应使用 changepage 它，登录时功能正确并注销，但 safari 后退按钮不起作用并落在最后一页。

```
 $(document).delegate("#dialogo", "pageinit", function() {
    $("#formdialog").click();
})

    $(document).delegate("#identificacion", "pageinit", function() {

    $("#formautentificacion").submit(function(e){
        e.preventDefault();
        //e.stopImmediatePropagation();

        $.ajax({
            type: 'POST',
            url: 'ax/login.php',
            data:$(this).serialize(),
            cache: false,
            success: function(data)
            {
                if(data == 1)
                {
                    //$.mobile.changePage("promocion.php", {transition: "flip"});
                    //window.location = "index.php";
                    $.mobile.changePage("#pageclients", {transition: "flip"});
                }
                else
                {
                    if (data == 2)
                        alert("Usuario bloqueado, 3 intentos fallidos");
                    else
                        alert("Error en la identificación");
                }

                $("#user").val("");
                $("#pass").val("");
            }
        })
    })

    $(".logout").click(function(e){
        //e.preventDefault();
        logout();
    })
})

$(document).delegate("#pageclients", "pageinit", function() {
    seguridad();
}) 
```

用于检查会话是否开启的函数 seguridad()：

```
session_start();

include("../class/aut.php");
$aut = new aut();

$res = 0;

if (!empty($_SESSION["usuario"]) && !empty($_SESSION["token"]) )
{
    $_SESSION["usuario"] = mysql_real_escape_string($_SESSION["usuario"]);
    $_SESSION["token"] = mysql_real_escape_string($_SESSION["token"]);

    if ( $aut->checktoken($_SESSION["usuario"],$_SESSION["token"]) )
    {
        $_SESSION["token"] = md5(rand().$_SESSION["usuario"]);
        $aut->updateToken($_SESSION["usuario"], $_SESSION["token"]);
        $res = 1;
    }
    else
    {
        session_destroy();
        session_unset();
        $res = 0;
        //header("Location: index.php");
        //exit;
    }
}
else
{
    session_destroy();
    session_unset();
    $res = 0;
    //header("Location: index.php");
    //exit;
}

echo $res;
?> 
```

和功能注销：

```
function logout()
{
    $.ajax({
        type: 'GET',
        url: 'ax/logout.php',
        cache:false,
        //async: false,
        success: function(data)
        {
            $("#formdialog").click();
        }
    })
} 
```

我尝试关闭会话，然后在每个页面上使用安全功能来验证会话。但是一旦破坏了会话，我就可以返回一个页面而不是跳过对话。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:47:50.423

我认为您的问题是 jQueryMobile 在 DOM 中保留了以前访问过的页面的缓存。您应该尝试删除所有页面（或至少第一页），以便当用户重新访问它时，jQueryMobile 将重新获取其内容并触发您的会话代码。

```
$('#somepage').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:22:20.663

我制作的退出应用的按钮如下：

注销.php

```
<?php
session_start();
session_unset();
session_destroy();
?> 
```

JS

```
function logout()
{
    $.ajax({
        type: 'GET',
        url: 'ax/logout.php',
        cache:false,
        //async: false,
        success: function(data)
        {
            console.log("LOGOUT");
            //$.mobile.changePage("#dialogo");
        }

    })
    $.mobile.changePage("http://10.0.74.199/representantes");
} 
```

以及注销的链接

```
<a href="index.php" class ="logout ui-btn-right" data-role="button" data-icon="delete" data-theme="a">Salir</a> 
```

第一个页面的html：

```
<div data-role = "page" id ="dialogo">
            <a href = "#identificacion" id = "formdialog" data-rel="dialog"> </a>
        </div>

         <div data-role = "page" id = "identificacion" data-overlay-theme="f">
            <div id ="main"> 
                <div id ="caplogin">
                    <img src = "http://10.0.74.199/representantes/images/vives_logo.png"/>
                    <p> Acceso Promoción Vives </p>
                    <div style ="clear:both;"></div>
                </div>
                <div style ="clear:both;"></div>
                <div id ="formlogin">
                <form name ="formautentificacion" id ="formautentificacion" method = "post" action = ""  data-ajax="false">
                    <table>
                        <tr> <td> Login </td> <td> <input type ="text" name ="user" id ="user" size="30"/></td> </tr>
                        <tr> <td> Password </td><td><input type ="password" name ="pass" id="pass" size="30"/></td></tr>
                        <tr> <td colspan = "2" align ="right"> <input type = "submit" id = "sbmt_aut" name = "sbmt_aut" value = "ENTRAR"/></td>
                    </table>
                </form>
                </div>
            </div>
        </div> 
```

并且在第一个pageinit的时候，强制点击

```
$(document).delegate("#dialogo", "pageinit", function() {
    $("#formdialog").click();
}) 
```

如果您关闭应用程序，则使用此功能，但是当我单击后退按钮历史记录时失败，index.php 不会重定向到初始对话。有任何想法吗？

# qt4 - 如何设计一个 UI 可以很容易地用任何其他库替换 QT

> ID：11259919
> 
> 赞同：0
> 
> 时间：2012-06-29T10:11:14.823
> 
> 标签：qt4, gui-design

我即将开始设计用户界面。UI 预计会很复杂，并且会有几个屏幕，其中一个是文本编辑器。该应用程序使用 C++ 编写，为了利用一些现有功能，我决定将 Qt 用于 UI。但是，我希望能够以这样一种方式编写 UI，以便以后可以轻松地将 Qt 替换为任何其他 UI 库——甚至可以为不同的平台使用不同的库。

我倾向于在我自己的类中包含 QT 对象并在整个过程中使用我的类。这是一个好的设计吗？我更喜欢这个而不是子类化（这是 Qt 推荐的），因为子类化似乎是一个非常严格的绑定。但是，这意味着我必须为 Qt 公开的每个方法编写一个包装器，而且我也无法使用 QtCreator。

你怎么看？您能否描述选择方法的优点/缺点。如果您能指出任何示例或任何好的设计原则，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:57:49.547

你没有。GUI 库**是**抽象的。如果你真的想用不同的后端编译你的应用程序——你可以看看 WxWidgets。但请注意 - 该库与 Qt 非常不同。

# javascript - 元标记刷新在 chrome 中不起作用

> ID：11259923
> 
> 赞同：4
> 
> 时间：2012-06-29T10:11:33.370
> 
> 标签：javascript, html, google-chrome, cross-browser

下面是我的代码.. 在 IE 和 Firefox 中它工作正常.. 即 10 秒后它被重定向到 www.google.com .. 但相同的代码在 Chrome 中不起作用

```
<html>  
<head>
<title>App- Log In</title>

<meta http-equiv="refresh" content="10; url=http://www.google.com">

<script language="JavaScript">
      function noBack(){window.history.forward()}
      noBack();
      window.onload=noBack;
      window.onpageshow=function(evt){if(evt.persisted)noBack()}
      window.onunload=function(){void(0)}
</script>   

</head>

  <body>
Testing
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:44:04.507

你的问题是这一行：

```
window.history.forward() 
```

每当执行此行时，就会在 Chrome 中禁用元刷新。

我的建议是不要尝试禁用后退按钮，因为它不能可靠地工作，而且据我所知[，它无法完成](https://stackoverflow.com/questions/54539/prevent-use-of-the-back-button-in-ie)。

# php - PHP/MySQL - Prepared Statements - 这个例子中的用法是否正确？

> ID：11259930
> 
> 赞同：0
> 
> 时间：2012-06-29T10:12:21.593
> 
> 标签：php, mysql

我正在创建网站的一部分，用于处理订阅时事通讯的用户确认。

选择数据时，我在使用准备好的语句时遇到问题。

这基本上是对通过电子邮件发送给用户并通过从输入的 url 获取信息进行检索的信息进行检查。

因此，数据库中有一个字符串或“键”，它通过电子邮件发送给用户，作为我网站上一个页面的链接，用户的详细信息附加到 url。脚本检查这些键是否匹配

问题是当我运行脚本时会触发错误。这说“错误的钥匙”。

数据库中的密钥 ( `$dbkey`) 与电子邮件链接中提供的密钥相同。这与制成的钥匙相同`$key`。但问题是，在 while 循环中触发了一个错误，并且`$dbkey`没有从数据库中传递数据：

```
Notice: Trying to get property of non-object in C:\wamp\www\site\script.php on line 35 
```

在 phpmyadmin 中运行的 sql 语句确实返回了正确的结果集。

这是代码：

```
$confirm= sanitize($_GET['confirm']);
$stmt = $link->prepare("SELECT id, dbkey FROM specials WHERE id = ?");
if (!$stmt)
{
    $error = "{$link->errno}  :  {$link->error}";
    include "$docRoot/html/main/error.html.php";
    exit();
}
if (!$stmt->bind_param("i", $confirm))
{
    $error = "{$stmt->errno}  :  {$stmt->error}";
    include "$docRoot/html/main/error.html.php";
    exit();
}
if (!$stmt->execute())
{
    $error = "{$stmt->errno}  :  {$stmt->error}";
    include "$docRoot/html/main/error.html.php";
    exit();
}

$stmt->store_result();

if ($stmt->num_rows)
{
    while ($row = $stmt->fetch())
    {
    $dbKey = $row->dbkey;
    }
   $key= sanitize($_GET['key']);

    if ($dbKey !== $key)
    {
        echo 'wrong key';
    }
}
else
{
    echo 'not in database';
} 
```

我想说以这种方式连接到数据库的所有其他脚本都可以工作，但这是我第一次使用准备好的语句来选择数据。我想知道这个问题是否是由我的编码错误引起的，因此我发布了这个问题。

如果有人能发现我在这里出错的地方，或者可能提供一些关于如何调试代码以查看究竟是什么错误的建议，那将不胜感激！

谢谢！！

编辑：问题只是`$key`返回一个字符串但`$dbkey`返回空

编辑2：

```
if ($stmt = $link->prepare("SELECT id, verified, dbkey FROM specials WHERE id=?")) {

    $stmt->bind_param("i", $confirm);
    $stmt->execute();
    $stmt->bind_result($dbId, $dbVerified, $dbKey);
    $stmt->fetch();
    $stmt->close(); 

    if ($dbKey !== $key)
    {
        echo 'wrong key';
    }
    else if ($dbVerified == 1)
    {
        echo 'already activated';
    }
    else if ($dbKey == $key && dbVerified == 0)
    {
        echo 'success';
    }
}
else
}
    echo 'user not in db';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T07:06:21.350

[`$stmt->fetch()`](http://www.php.net/manual/en/mysqli-stmt.fetch.php)只返回一个布尔值，指示它是否成功，而不是其属性是当前行的字段的对象。您需要调用[`$stmt->bind_result()`](http://www.php.net/manual/en/mysqli-stmt.bind-result.php)以指定要将字段放置到哪些变量中。

在您的第二次编辑中采用的方法看起来不错，除了用户是否在数据库中的测试应该是 on `fetch()`，而不是`prepare()`（或者`num_rows`像以前一样使用）。因此：

```
if ($stmt = $link->prepare("SELECT id, verified, dbkey FROM specials WHERE id=?"))
{
    $stmt->bind_param("i", $confirm);
    $stmt->execute();
    $stmt->bind_result($dbId, $dbVerified, $dbKey);

    if ($stmt->fetch())
    {
        if ($dbVerified == 1)
        {
            echo 'already activated';
        }
        else if ($dbKey !== $key)
        {
            echo 'wrong key';
        }
        else if ($dbKey == $key && dbVerified == 0)
        {
            echo 'success';
        }
    }
    else
    }
        echo 'user not in db';
    }

    $stmt->close();
} 
```

# ios - 在 ViewController 外部调用 draw 方法

> ID：11259931
> 
> 赞同：0
> 
> 时间：2012-06-29T10:12:23.000
> 
> 标签：ios, xcode, core-graphics, cgcontextref

我正在尝试在外部类中设置一个方法，如下所示：

我的班级.m

```
- (void)drawSomeStuffInContext:(CGContextRef)context atStartingPoint:(CGPoint *)coords
{
    //draw some stuff (ignoring coords for now)
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextSetLineWidth(context, 1.0f);
    CGContextMoveToPoint(context, 10, 10); 
    CGContextAddLineToPoint(context, 100, 50);
    CGContextStrokePath(context);
} 
```

视图控制器.m

```
- (void)viewDidLoad
{
    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    CGPoint startCoords = CGPointMake(100.0, 100.0);
    [[myClass alloc] drawSomeStuffInContext:currentContext atStartingPoint:startCoords];
} 
```

该项目构建并运行，但我在日志中收到以下错误，但未绘制任何内容：

```
[...] <Error>: CGContextSetStrokeColorWithColor: invalid context 0x0
[...] <Error>: CGContextSetLineWidth: invalid context 0x0
[...] <Error>: CGContextMoveToPoint: invalid context 0x0
[...] <Error>: CGContextAddLineToPoint: invalid context 0x0
[...] <Error>: CGContextDrawPath: invalid context 0x0 
```

我一直在网上搜索类似的问题/示例，但没有运气。是否需要不同的/附加参数？我应该从其他地方调用 draw 方法`viewDidLoad`吗？非常感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:24:36.130

drawRect 没有被调用（据我所知）这意味着视图根本没有被绘制。您应该`[super initWithFrame:frame];`在 drawSomeStuffInContext 方法中调用类似 where frame is a CGRect （显然）的东西。

或者你可以调用 [[myClass alloc] initWithFrame:frame]; 在 viewController.m 的 viewDidLoad 方法中，并将起点存储在全局变量中。

# c - 用户自定义函数，类似于squeeze()

> ID：11259936
> 
> 赞同：0
> 
> 时间：2012-06-29T10:12:39.843
> 
> 标签：c

所以我正在尝试在 K&R 中进行练习。它想让我做一个类似于挤压的功能，我不明白它有什么问题。我已经在办公桌上检查过了。我不想在网上找到解决方案，我想了解为什么我的代码不起作用。

```
//removes characters that are present in both strings
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#define MAXLTR 15

void removesame(char s1[],char s2[]);

int main(void)
{
    char string1[MAXLTR],string2[MAXLTR];
    printf("Enter a string: ");
    scanf("\n%s",&string1);
    printf("\nEnter the letters/words to be removed: ");
    scanf("\n%s",&string2);
    removesame(string1,string2);
    printf("\nFinal output: %s",string1);
    getch();
}

void removesame(char s1[],char s2[])
{
    char temp[MAXLTR];
    int arraycntr,comparecntr;
    for(comparecntr = 0; comparecntr < MAXLTR; comparecntr++)
    {
        for(arraycntr = 0;arraycntr < MAXLTR;arraycntr++)
        {
            if(s1[arraycntr] == s2[arraycntr])
                s1[arraycntr] == '\t';
        }
    }
    comparecntr = 0;
    for(arraycntr = 0; arraycntr < MAXLTR; arraycntr++)
    {
        if(s1[arraycntr] != '\t')
        {
            temp[comparecntr] = s1[arraycntr];
            ++comparecntr;
        }
    }        
    for(arraycntr = 0; arraycntr < MAXLTR; arraycntr++)
        s1[arraycntr] = '\0';
    for(arraycntr = 0;arraycntr < MAXLTR; arraycntr++)
        s1[arraycntr] = temp[arraycntr];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:18:26.940

这不是一个作业，而是一个相等测试：

```
s1[arraycntr] == '\t'; 
```

你的意思是：

```
s1[arraycntr] = '\t'; 
```

如果您以高警告级别进行编译，编译器可能会发出一条消息，提醒您注意这一点。Microsoft VC 编译器发出以下警告：

> C:\devel\cpp\stackoverflow\main.c(32) : 警告 C4553: '==' : 运算符无效；你打算'='吗？

初始`for`循环仅检查相同索引中是否`s1`具有`s2`相同的值，它不检查 char in 是否`s1`存在于`s2`. 循环的终止条件`for`也应该是 和 的长度，`s1`而`s2`不是`MAXLTR`：

```
size_t arraycntr,comparecntr;
for(comparecntr = 0; comparecntr < strlen(s2); comparecntr++)
{
    for(arraycntr = 0;arraycntr < strlen(s1) ;arraycntr++)
    {
        if(s1[arraycntr] == s2[comparecntr])
            s1[arraycntr] = `\t`;
    }
} 
```

下一个`for`循环也应该使用`strlen(s1)`并且只需将空终止符分配给`temp`after：

```
comparecntr = 0;
for(arraycntr = 0; arraycntr < strlen(s1); arraycntr++)
{
    if(s1[arraycntr] != `\t`)
    {
        temp[comparecntr] = s1[arraycntr];
        ++comparecntr;
    }
}
temp[comparecntr] = '\0'; 
```

`temp`未在任何地方初始化，因此包含随机数据，除了在此期间刚刚输入的数据`for`。中没有空终止符`temp`，`s1`也将不以空终止符结尾（之后您可能会看到垃圾打印）。最后，就`strlen(temp) + 1`在填充时`s1`：

```
for(arraycntr = 0;arraycntr < strlen(temp) + 1; arraycntr++)
    s1[arraycntr] = temp[arraycntr]; 
```

会将空`+ 1`终止符复制到`s1`.

次要注意，您可以存储它而不是调用循环`strlen()`的终止条件：`for`

```
size_t chars_to_copy;
for(arraycntr = 0, chars_to_copy = strlen(temp) + 1;
    arraycntr < chars_to_copy;
    arraycntr++)
{
    s1[arraycntr] = temp[arraycntr];
} 
```

# c# - 项目路径较长时，Visual Studio 2010 SP1 无法构建

> ID：11259937
> 
> 赞同：0
> 
> 时间：2012-06-29T10:12:43.100
> 
> 标签：c#, visual-studio-2010, build, msbuild, vdproj

我有 *.vdproj 的解决方案并使用 Visual Studio 2010 SP1。

当解决方案的路径 long `d:/so/long/path/for/my/solution/my_project/trunk/`visual studio 在构建时失败，但我在错误日志或输出中没有发现任何错误：

```
========== Rebuild All: 4 succeeded, 1 failed, 0 skipped ========== 
```

当我使用 msbuild 中的 *.vdproj 构建项目时 - 构建完成且没有错误。

当我将解决方案复制到短路径`d:/my_proj/`并从 Visual Studio 构建时 - 构建完成且没有错误。

在 Win Xp x32 和 Win 2008 R2 x64 中重现的问题以及我在 c# 4.0 上编写的项目。而且我无法从 msbuild 构建解决方案，因为我使用 *.vdproj 项目。

我无法更改项目路径。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:18:20.873

看起来您遇到了 260 Win32 API 字符路径限制。

您可以使用该`subst`命令将部分路径映射到驱动器号。然后通过那条较短的路径打开解决方案。

```
subst f: d:\so\long\path\for\my\solution\my_project 
```

现在您可以将项目打开为

```
f:\trunk 
```

您也可以在 vista 及更高版本上以类似的方式使用符号链接来缩短浴。

# spring-mvc - 如何为注解@Controller创建拦截器

> ID：11259939
> 
> 赞同：1
> 
> 时间：2012-06-29T10:12:50.203
> 
> 标签：spring-mvc, aspectj, interceptor, spring2.x

我加入了一个现有项目，该项目使用 Spring mvc 的 2 种前端机制：

*   A) 控制器类扩展 org.springframework.web.servlet.mvc.SimpleFormController
*   B) 控制器类使用注解@Controller。

现在我找到了一个拦截器：

```
@Aspect
public class RequestMonitor {

    @Autowired
    private RequestMonitorService requestMonitorService;

    @Before("execution(* org.springframework.web.servlet.mvc.Controller+.handleRequest(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse))"
            + "&& args(request,response)")
    public void storeUserAccess(HttpServletRequest request, HttpServletResponse response) {
        requestMonitorService.storeUserAccess(request);
    }
} 
```

谁捕获来自 org.springframework.web.servlet.mvc.Controller 的所有请求（机制 A）

如何适应拦截所有其他带有注释“@Controller”的控制器：org.springframework.stereotype.Controller（机制B）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:38:27.423

你有[HandlerInterceptorAdapter](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/handler/HandlerInterceptorAdapter.html)类。您可以扩展它并使用子类中的方法：

```
public boolean preHandle(HttpServletRequest request, 
        HttpServletResponse response, Object handler) throws Exception

public void postHandle(
        HttpServletRequest request, HttpServletResponse response, 
        Object handler, ModelAndView modelAndView)
        throws Exception 
```

你需要注册你的拦截器，即：

```
<mvc:interceptors>
        <bean class="my.fully.qualified.package.RequestInterceptor" />
</mvc:interceptors> 
```

# asp.net - 我如何使用 wkhtmltopdf（dll 版本）asp.net？

> ID：11259942
> 
> 赞同：3
> 
> 时间：2012-06-29T10:13:04.900
> 
> 标签：asp.net, pdf, dll, wkhtmltopdf

我已经从这里下载了 wkhtmltox0.dll [http://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)。我在 asp.net 中工作，我找不到任何如何使用它的示例！我发现的只是如何使用 .exe 版本的示例，它工作得很好。

有人可以给我举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T18:50:10.600

有一个 github 项目（和 nuget 包）可以完成这一切。

[https://github.com/gmanny/Pechkin](https://github.com/gmanny/Pechkin)

[http://www.nuget.org/packages/Pechkin/](http://www.nuget.org/packages/Pechkin/)

[https://www.nuget.org/packages/Pechkin.Synchronized/](https://www.nuget.org/packages/Pechkin.Synchronized/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T11:24:31.600

For the [various](https://github.com/gmanny/Pechkin#q-why-my-web-app-hangscrashes-even-after-ive-started-using-synchronizedpechkin) [pitfalls](https://github.com/gmanny/Pechkin/pull/42) of using the [Pechkin](https://github.com/gmanny/Pechkin) wrapper, it might be safer to just call the command line with wkhtmltopdf.exe directly.

There's already a ready wrapper here: [Codaxy wkhtmltopdf](https://github.com/codaxy/wkhtmltopdf/blob/master/NuGet/Codaxy.WkHtmlToPdf/content/PdfConvert.cs).

# html - 在 Twitter Bootstrap 的 Carousel 中自定义“下一个”和“上一个”箭头

> ID：11259943
> 
> 赞同：4
> 
> 时间：2012-06-29T10:13:07.553
> 
> 标签：html, css, twitter-bootstrap

我是 Twitter Bootstrap 的新手。我试图在我的页面中心放置一个轮播灯箱。我编辑了css来这样做。但是，我发现没有地方可以编辑“下一个”和“上一个”箭头的位置。

这是我的页面。 [http://www.nienyiho.com/portfolio](http://www.nienyiho.com/portfolio)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-31T18:25:01.060

以下是 bootstrap.css 文件中的一些相关部分，以防您在 54 和 74 上找不到它

```
.carousel-control .glyphicon,
.carousel-control .icon-prev,
.carousel-control .icon-next {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 5;
  display: inline-block;
  width: 20px;
  height: 20px;
  margin-top: -10px;
  margin-left: -10px;
  font-family: serif;
}

.carousel-control .icon-prev:before {
  content: '\2039';
}

.carousel-control .icon-next:before {
  content: '\203a';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T10:25:14.857

如果你想使用 CSS 编辑它（我假设你这样做），那么它可以在 bootstrap-carousel.css 的第 54 和 74 行找到

# c# - 正则表达式匹配字符串中给定的字符串文件名

> ID：11259947
> 
> 赞同：-5
> 
> 时间：2012-06-29T10:13:32.560
> 
> 标签：c#, asp.net, regex

我有一个字符串

> PrintFileURL("13572_BranchInformationReport_2012-06-29.zip","13572_BranchInformationReport_2012-06-29.zip",0,"184277","Jun 29 1:30","/icons/default.gif")

还

> PrintFileURL("13572_IndividualInformationReportDelta_2012-06-29_033352.zip","13572_IndividualInformationReportDelta_2012-06-29_033352.zip",0,"53147","Jun 29 3:33","/icons/default.gif")

如果我想 使用 c# 从上述字符串中提取`13572_IndividualInformationReportDelta_2012-06-29_033352.zip`和提取，那么正则表达式可能是什么...？`13572_BranchInformationReport_2012-06-29.zip`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:59:29.527

这个应该完全适用于前两个文件，但如果文件名中有任何额外的特殊字符，则不会工作：

```
using System;
using System.Collections.Generic;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            const string example = "PrintFileURL(\"13572_IndividualInformationReportDelta_2012-06-29_033352.zip\",\"13572_IndividualInformationReportDelta_2012-06-29_033352.zip\",0,\"53147\",\"Jun 29 3:33\",\"/icons/default.gif\")";
            Console.WriteLine(example);

            const string pattern = "\\\"([a-zA-Z0-9\\-_]*?\\..*?)\\\"";
            var regex = new Regex(pattern);
            var result = regex.Matches(example);
            foreach (Match item in result)
            {
                Console.WriteLine(item.Groups[1]);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:24:25.160

你可以试试这个：

[正则表达式](http://gskinner.com/RegExr/?31bc5)

进而

```
var regex = new Regex("@(?<=\")(.*?)(?=\")");

var result = regex.Matches(example);
foreach (Match item in result)
{
    Console.WriteLine(item.Groups[1]);
} 
```

# javascript - 如何在 javascript 中为 Phonegap 应用程序编写进度条

> ID：11259957
> 
> 赞同：0
> 
> 时间：2012-06-29T10:14:24.737
> 
> 标签：javascript, cordova, progress-bar

我正在为 Android 开发一个 Phonegap 应用程序。在我的部分代码（在 javascript 中）中，从服务器加载图像。加载图像时，我想显示一个进度条，显示图像的加载百分比。如何我用javascript写的？你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:50:27.997

简单的方法是计算正在移动的图片数量，每次将进度条递增 1/(#ofFiles)。这样做的问题是，如果某些文件比其他文件大得多，它将不准确。

更好的解决方案是使用实际文件大小，以及所有移动文件的文件大小，所以如果有 5 个文件，其中一个比较大，那么一旦该文件完成，它将适当增加更多。

# c++ - 函数模板实例化失败

> ID：11259972
> 
> 赞同：-1
> 
> 时间：2012-06-29T10:15:37.780
> 
> 标签：c++, function, templates, instantiation

我一直在尝试强制实例化以下内容：

```
//A.h
namespace A {
    template <typename T>
    bool foo (B::C<T>, D);
} 

template bool A::foo<int> (B::C<int>, D);

//1.cpp 

namespace A {
template <typename T> 
bool foo (B::C<T>, D) {
    return false;
}
}

// 2.cpp
#include "A.h"

using namespace A;

void foo()
{///
    ...
    B::C<int> Alpha;
    foo(Alpha, Beta);
} 
```

我收到的错误消息是：

> C2785：不同的返回类型
> 
> C4667：未定义与强制实例化匹配的函数模板

这个实例化是否有明显的错误，因为错误消息似乎不相关。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-29T10:18:33.570

发生这种情况是因为模板在编​​译时被扩展，所以编译器必须知道模板化函数的定义和实现，所以你不能在一个文件中定义函数并在另一个文件中实现它

# c++ - 是否有任何工具可以重构 C++ 以符合编码标准？

> ID：11259975
> 
> 赞同：5
> 
> 时间：2012-06-29T10:15:41.900
> 
> 标签：c++, parsing, refactoring, naming-conventions

我需要处理一个大型 C++ 代码库，重命名几乎所有内容（类、参数、字段、方法等）。你知道任何可以帮助我完成这项工作的工具吗（除了文本编辑器和咖啡机）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:22:47.130

如果您使用的是 Visual Studio，那么您可以使用插件[Visual Assit X](http://www.wholetomato.com/)来重构您的代码。出于缩进目的，您可以使用[indent](http://gnuwin32.sourceforge.net/packages/indent.htm)实用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T10:29:39.673

你可以看看[Semantic Designs C++ Tools](http://www.semanticdesigns.com/Products/LanguageTools/CppTools.html)虽然我从未使用过它，但它似乎非常全面。

它基于规则并理解 C++ 语言，而不仅仅是一个 reg exp 搜索和替换实用程序，因此它可以做更多的事情。主要的警告是它是一种商业产品，但它可以为您节省时间和其他长期使用*可能*对您的公司来说是值得的。

[（顺便说一句，除了通过这个问题](https://stackoverflow.com/questions/10102610/c-refactoring-conditional-expansion-and-block-elimination)遇到它之外，我与这家公司没有任何联系。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:27:23.013

请不要投反对票，请不要删除。这不是插头。原始帖子正是要求这个。

我们公司提供这方面的服务。即，我们与客户合作，以​​确定他的编码标准到底是什么。之后，我们调整了进行重构的工具包。这是半自动过程。有些事情是通过自动重构修复的，有些事情是手动修复的。

有关更多信息，请查看网站[http://cdsan.com/Services.php#svcs_dycs](http://cdsan.com/Services.php#svcs_dycs)

# php - 从 WAMP 迁移到 LAMP：来自 PHP 的文件写入错误

> ID：11259979
> 
> 赞同：0
> 
> 时间：2012-06-29T10:15:53.013
> 
> 标签：php, linux, apache

我正在将 Web 系统从 Windows 移植到 Linux。我已经解决了大部分的小问题，但这个问题对我来说很重要。我有一个文本文件，PHP 将日志信息写入其中。目前，PHP 无法打开文件，理由是“权限被拒绝”。据我所知：

*   目录和要写入的文件有770权限
*   该目录及其下面的所有文件都归用户“web”和组“web”所有
*   Apache 由用户 'web'* 运行

*我通过运行检查了这一点：

```
ps aux | grep apache 
```

有任何想法吗？我想不通这个。我测试了将目录和文件设置为 777 权限，并且我能够写入文件 - 显然这不是一个可行的解决方法，这个文件是系统内部的，不应从外部访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:22:43.983

我要做的第一件事是更改为 777，正如您所说的那样，创建一个文件，然后查看新文件的所有者和组。

# vim - Windows7 PowerShell 在每个字符之间插入 ^@ - 如何防止？

> ID：11259981
> 
> 赞同：5
> 
> 时间：2012-06-29T10:15:58.637
> 
> 标签：vim, powershell, windows-7

希望对你来说这将是微不足道的回答。

我在 Win7 上有 gvim 和 vim。每当我将命令结果重定向到文件并使用 Vim（或 Gvim，相同效果）打开它时，我都会在每个字符之间插入二进制 0（^@ 符号）。

所以，而不是

`r96130`

我有

`^@r^@9^@6^@1^@3^@0^@`

知道如何（首选）防止它或（很好）摆脱它吗？

我尝试了替换，但显然这不仅仅是 ^@，它是一个二进制零（我认为）所以它没有被`/^@`.

编辑：

1）尝试将编码设置为 UTF-8（我正在处理的内容的编码）和 UTF-16（根据**@Philippe Wendler**的回答，谢谢），但无济于事。

2) **__PowerShell__ 是有罪的一方。**当我在常用命令行（通过`cmd`）上进行重定向时，没有副作用。只有在 PowerShell 会话上创建的文件才会插入这些二进制零。

3）**@Christian**提到的 Powershell 好东西没有帮助。当我切换到 Ubuntu 作为我的主要操作系统并在那里使用 Vim 时，我将留下未回答的问题，所以这里唯一的“解决方案”现在是不使用 PowerShell + Vim，这显然是缺乏答案。:-)

## 解决方案！

感谢**@Emperor XLII**的解决方案！在这里发布，因为它是在评论中，所以可能不够明显：

```
dir | OutFile -Encoding UTF8 test 
```

创建一个在 Vim 中出现的没有二进制零的文件。如果我使用 Encoding to OEM、ASCII 和我测试过的其他两种方式运行，也会发生同样的情况。

一个有希望的提示在于`:he 'fileencodings'`- 是的，复数，由**@Dan Fitch 撰写**，但我还没有测试它，因为我那时已经离开了 Win7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:20:31.517

Windows 内部使用[UTF-16](https://en.wikipedia.org/wiki/UTF-16)作为 Unicode 编码，这个文件看起来也使用 UTF-16，但 vim 用 8 位字符集（可能是 latin1）解释它。

尝试`:set encoding=utf-16`在 vim 中选择正确的编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:20:35.357

我遇到过同样的问题。使用`cmd`shell（或 Console2）并运行如下命令：

```
prompt> myBatFile.bat > myOutputFile.log 
```

我会得到一堆`^@`符号，我可以使用只运行以下命令的宏来摆脱它们：

```
:s/\r\(\n\)/\1/g 
```

这对我来说是可以接受的，但很烦人（我相信这是具有不同的 unix 与 Dos 样式的回车以及在文件末尾没有行尾的组合）。更糟糕的是，我在迁移到 Windows 7 后就开始使用 PowerShell。一旦发生这种情况，我不仅得到了`^@`符号，而且我还在文件开头`^M`加上了一个 （我认为那是一个字节`ÿþ`gVIM 无法正确解释的订单标记）。

无论如何，我更改了调用 bat 文件的方式，使其遵循 PowerShell 重定向方式，现在在 gVIM 中读取文件没有问题：

```
prompt> myBatFile.bat | Out-File myOutputFile.log -encoding UTF8 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T11:30:43.670

在powershell中尝试使用重定向文件

```
set-content c:\file.txt -encoding Unicode # or BigEndianUnicode 
```

你也可以用`out-file`同样的方式使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T16:10:14.173

您不必对 Powershell 的输出做任何特别的事情。您可以更改您的 vim 配置，以便它可以处理正确的编码。

查看`:he fileencodings`（注意尾随的 s）——此设置允许您选择 vim 将尝试的编码。默认情况下，Vim 7.x 将使用`ucs-bom`并尝试解码字节顺序标记，但您`vimrc`可能设置了不同的列表；确保它不是以`latin1`. 默认情况下，在我的 x64 Windows 7 机器上，通过管道传输到文件的 Powershell 命令输出可以被 vim 读取。

设置`fileencodings`为`ucs-bom`或`utf-16`应该解决您的问题。

# javascript - 启动 Selenium RC 时，user-extensions.js 中的自定义命令无法加载

> ID：11259982
> 
> 赞同：1
> 
> 时间：2012-06-29T10:16:09.167
> 
> 标签：javascript, selenium, selenium-rc, selenium-ide

我正在使用 Selenium IDE 创建一些测试。在 IDE 的选项中，我指定了一个按预期工作的 user-extensions.js 文件。以下是它的内容：

```
Selenium.prototype.doactivateEnv = function(nomDeVariable){
    storedVars[nomDeVariable] = "test";
} 
```

当我开始使用“activateEnv”命令的测试时，它运行得非常好，执行它并具有预期的行为。另一方面，当我启动 Selenium RC 服务器时，它完全无法识别该命令的存在。我所有的测试都失败并出现同样的错误：

```
info: Starting test /selenium-server/tests/TestStaticID.html
info: Executing: |activateEnv | ENV |  |
error: Unknown command: 'activateEnv'
warn: currentTest.recordFailure: Unknown command: 'activateEnv' 
```

这是我用来启动 selenium RC 服务器的：

```
D:\__Miroslav\OMC\tests>java -jar selenium-server-standalone-2.24.1.jar 
-userExtensions user-extensions.js -port 4545 -htmlsuite *chrome 
"http://localhost:8080/" TestSuite\tests.html results\results.html 
```

user-extensions.js 与服务器的 jar 文件位于同一文件夹中，我尝试过使用文件的绝对路径，但没有任何区别。另外，我尝试过使用 Firefox、Chrome 和 IE，它们都以同样的方式失败。

我觉得我错过了一些非常基本和愚蠢的东西，但我似乎无法找到它。任何帮助都会得到帮助。

编辑：我刚刚对其进行了测试，如果我在启用用户扩展的交互模式下加载 Selenium RC，它工作正常：

```
14:47:31.531 INFO - Command request: activateEnv[ENV, ] on session 887e2d2c6f884c81b0c39f32c24d523a
14:47:31.531 INFO - Got result: OK on session 887e2d2c6f884c81b0c39f32c24d523a 
```

仍然无法在 -htmlsuite 模式下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:45:45.147

好的，我不知道如何以及为什么，但它现在突然起作用了：-/我一直在为硒设置 FirefoxProfile（主要遵循本教程：[本教程](http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/)），在某些时候我只是注意到它突然开始通过测试，之前由于我的 user-extensions.js 中定义的“未知命令”而失败

我真的不知道是什么触发了它。起初我认为这是一个特殊配置文件的事实，然后我注意到我已经对 selenium-server 的论点进行了一些改动，起初我在这里引用的示例不起作用，但因为我是故障排除，试图通过删除，更改和添加参数来找出原因，最后一切都神奇地起作用了。

```
java -jar selenium-server-standalone-2.24.1.jar -port 4545 -userExtensions user-extensions.js -firefoxProfileTemplate FFProfileSelenium -htmlsuite *firefox http://localhost:8080 testSuite\tests.html testSuite\results.html
java -jar selenium-server-standalone-2.24.1.jar -port 4545 -userExtensions user-extensions.js -htmlsuite *firefox http://localhost:8080 testSuite\tests.html testSuite\results.html
java -jar selenium-server-standalone-2.24.1.jar -port 4545 -userExtensions user-extensions.js -htmlsuite *firefox http://localhost:8080/ TestSuite\tests.html results\results.html
java -jar selenium-server-standalone-2.24.1.jar -userExtensions user-extensions.js -port 4545 -htmlsuite *chrome "http://localhost:8080/" TestSuite\tests.html results\results.html 
```

起初只有前两个命令有效，另外两个失败了，但正如我所说，当我试图找出它们失败的原因时，它们开始工作了。现在所有这些都完美地执行了。
我对这个答案一点也不满意，但至少现在可以了：-/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T18:09:52.947

从过去：

当它打开并挂起时，按 Ctrl-Shift-J 看看会出现什么。对我来说，这是我的 user-extensions.js 文件中的一个问题，但对你来说可能会有所不同。

# ios - 垂直对齐 UILabel

> ID：11259983
> 
> 赞同：11
> 
> 时间：2012-06-29T10:16:12.547
> 
> 标签：ios, xcode, uilabel

我正在尝试在我的应用程序的 UILabel 视图中垂直对齐文本。问题是我希望文本与顶部垂直对齐，标签的大小为 280 x 150。我只能实现这两件事之一。如果我删除线

```
[myLabel sizeToFit]; 
```

然后文本的对齐是好的，但大小搞砸了。但是如果我添加上面的行，那么对齐就会搞砸但大小还可以。我该如何解决这个问题。

我在下面添加了代码 -

```
CGRect labelFrame = CGRectMake(22, 50, 280, 150);
UILabel *myLabel = [[UILabel alloc] initWithFrame:labelFrame];
[myLabel setText:finalRecipe];
[myLabel setBackgroundColor: [UIColor lightGrayColor]];
[myLabel setNumberOfLines:0];
[myLabel sizeToFit];
[self.view addSubview:myLabel]; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T08:23:05.240

不要`UILabel`用于此。使用`UIButton`with`UserInteractionEnabled = NO;`并且可以选择垂直或水平对齐其中的文本。

干得好：

## 迅速：

```
btnDetail.titleLabel?.numberOfLines = 5
btnDetail.titleLabel?.lineBreakMode = .byCharWrapping
btnDetail.contentVerticalAlignment = .top
btnDetail.contentHorizontalAlignment = .left
btnDetail.isUserInteractionEnabled = false
btnDetail.autoresizesSubviews = true
btnDetail.autoresizingMask = .flexibleWidth 
```

* * *

## 对象-C

```
[btnDetail.titleLabel setNumberOfLines:5];
[btnDetail.titleLabel setLineBreakMode:NSLineBreakByCharWrapping];
[btnDetail setContentVerticalAlignment:UIControlContentVerticalAlignmentTop];
[btnDetail setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
[btnDetail setUserInteractionEnabled:NO];
btnDetail.autoresizesSubviews = YES;
btnDetail.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-01T00:17:58.993

我是 FXLabel 的作者，虽然我不认识 Manish，但我相信他是想帮忙（如果他为我做广告，我当然没有要求他这样做，我也没有付钱给他 - 抱歉曼尼什！）。

FXLabel 的功能之一是它尊重标签的 UIContentMode 属性，如 Interface builder 中设置的那样。这意味着您可以设置 label.contentMode = UIViewContentModeTop; 将文本与标签视图的顶部对齐（这不适用于常规 UILabel）。相关示例在这里：

> [https://github.com/nicklockwood/FXLabel/tree/master/Examples/Text%20Alignment](https://github.com/nicklockwood/FXLabel/tree/master/Examples/Text%20Alignment)

FXLabel 是 UILabel 的一个插入子类，所以我认为它对于提出的问题来说是一个很好的解决方案。但是，如果发布者宁愿在不使用 3rd 方库的情况下解决问题（这是可以理解的），那么这里是执行此操作的代码：

```
CGRect labelFrame = CGRectMake(22, 50, 280, 150);
UILabel *myLabel = [[UILabel alloc] initWithFrame:labelFrame];
[myLabel setText:finalRecipe];
[myLabel setBackgroundColor: [UIColor lightGrayColor]];
[myLabel setNumberOfLines:0];

CGFloat fontSize = 0.0f;
labelFrame.size = [myLabel.text sizeWithFont:myLabel.font
                                minFontSize:myLabel.minimumFontSize
                             actualFontSize:&fontSize
                                   forWidth:labelFrame.width
                            lineBreakMode:myLabel.lineBreakMode];

myLabel.frame = labelFrame;
[self.view addSubview:myLabel]; 
```

注：（本文未经测试，如有错误请见谅）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-03T15:12:45.243

您需要继承 UILabel。尝试这个：

```
- (void)drawTextInRect:(CGRect)rect
{
    CGSize sizeThatFits = [self sizeThatFits:rect.size];
    rect.size.height = MIN(rect.size.height, sizeThatFits.height);

    [super drawTextInRect:rect];
} 
```

正如您所发现的，UILabel 在其边界内垂直居中文本。这里我们要求`-sizeThatFits`文本块的大小并使用它来约束传递给 UILabel 的绘图矩形，以便从标签边界的顶部绘制文本。

你甚至可以`contentMode`像这样支持被忽略的（叹气）属性：

```
- (void)drawTextInRect:(CGRect)rect
{
    CGSize sizeThatFits = [self sizeThatFits:rect.size];

    if (self.contentMode == UIViewContentModeTop) {
        rect.size.height = MIN(rect.size.height, sizeThatFits.height);
    }
    else if (self.contentMode == UIViewContentModeBottom) {
        rect.origin.y = MAX(0, rect.size.height - sizeThatFits.height);
        rect.size.height = MIN(rect.size.height, sizeThatFits.height);
    }

    [super drawTextInRect:rect];
} 
```

这里还有很多其他的解决方案和讨论： [Vertically align text to top within a UILabel](https://stackoverflow.com/questions/1054558/how-do-i-vertically-align-text-within-a-uilabel)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-03-21T16:12:05.483

在 Swift 中，JRC 的子类化`UILabel`、覆盖`drawTextInRect`和符合的解决方案`UIViewContentMode`如下所示：

```
class AlignableUILabel: UILabel {

    override func drawText(in rect: CGRect) {

        var newRect = CGRect(x: rect.origin.x,y: rect.origin.y,width: rect.width, height: rect.height)
        let fittingSize = sizeThatFits(rect.size)

        if contentMode == UIViewContentMode.top {
            newRect.size.height = min(newRect.size.height, fittingSize.height)
        } else if contentMode == UIViewContentMode.bottom {
            newRect.origin.y = max(0, newRect.size.height - fittingSize.height)
        }

        super.drawText(in: newRect)
    }

} 
```

实施只是一个简单的问题：

```
yourLabel.contentMode = UIViewContentMode.top 
```

对我来说，它就像一种魅力。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-22T14:33:47.710

有一种方法无需子类化，使用按钮或滚动您自己的。

将行数设置为 0，然后调用 sizeToFit。

```
[label setNumberOfLines:0];
[label sizeToFit]; 
```

我认为其他人链接到的更多详细信息：[在 UILabel 中将文本垂直对齐到顶部](https://stackoverflow.com/questions/1054558/vertically-align-text-within-a-uilabel)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-18T21:15:48.450

除了上述建议将行数设置为 0 并将换行符设置为 Word Wrap 之外，请务必不要指定高度限制。显示的文本会根据需要自动添加新行，并且文本始终垂直对齐到标签的顶部。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-26T13:46:10.093

您可以通过对界面构建器的约束来实现它。

1.  把你想要的行数
2.  创建一个高度足以容纳 3 行的约束，并在相关部分放置“小于或等于”。

希望这对你有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-23T14:49:21.890

我通过实现一个类别做到了你想要的：

。H

```
@interface UILabel (VerticalAlign)
- (void)alignTop;
- (void)alignBottom;
@end 
```

.m

```
@implementation UILabel (VerticalAlign)

#pragma mark
#pragma mark - Align Methods

- (void)alignTop
{
    [self setFrame:[self newLabelFrame:UIControlContentVerticalAlignmentTop]];
}

- (void)alignBottom
{
    [self setFrame:[self newLabelFrame:UIControlContentVerticalAlignmentBottom]];
}

#pragma mark
#pragma mark - Helper Methods

- (CGRect)newLabelFrame:(UIControlContentVerticalAlignment)alignment
{
    CGRect labelRect = self.frame;

    NSStringDrawingOptions options = NSStringDrawingUsesLineFragmentOrigin | NSStringDrawingTruncatesLastVisibleLine | NSStringDrawingUsesFontLeading;

    CGRect textRect = [self.text boundingRectWithSize:CGSizeMake(227.f, CGFLOAT_MAX)
                                              options:options
                                           attributes:@{NSFontAttributeName:self.font}
                                              context:nil];

    CGFloat textOffset = labelRect.size.height - textRect.size.height;

    UIEdgeInsets contentInsets;
    if (alignment == UIControlContentVerticalAlignmentTop)
    {
        if (textOffset < (labelRect.size.height/2.f))
        {
            contentInsets = UIEdgeInsetsMake(-textOffset, 0.f, 0.f, 0.f);
        }
        else
        {
            contentInsets = UIEdgeInsetsMake(0.f, 0.f, textOffset, 0.f);
        }
    }
    else
    {
        if (textOffset < (labelRect.size.height/2.f))
        {
            contentInsets = UIEdgeInsetsMake(0.f, 0.f, -textOffset, 0.f);
        }
        else
        {
            contentInsets = UIEdgeInsetsMake(textOffset, 0.f, 0.f, 0.f);
        }
    }

    return UIEdgeInsetsInsetRect(labelRect, contentInsets);
}

@end 
```

请记住，您需要将“NumberOfLines”设置为 0。此示例适用于多行选项！

实现上述类别后，您可以简单地执行以下操作：

```
[myLabel setText:finalRecipe];
[myLabel alignTop]; 
```

干杯!

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-02T18:05:49.957

不错的技巧...我为 swift 4.2/5 提供的两分钱：

```
self.optTextMessage.numberOfLines =  0
self.optTitle.lineBreakMode  = .byWordWrapping 
```

并按照建议添加 \n..

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-10-17T20:57:02.050

你可以这样做......

1.  `numberOfLines`从 IB设置标签的属性 0

2.  将您的标签设置`lineBreakMode`为`UILineBreakModeWordWrap`（**非常非常重要**）

现在无论您在标签上设置什么，只需在其上附加几个 @"\n" ......例如 -

```
[yourTextLabel setText:@"myLabel\n\n\n\n\n"]; 
```

# iphone - All 子句核心数据谓词未按预期工作

> ID：11259984
> 
> 赞同：2
> 
> 时间：2012-06-29T10:16:12.677
> 
> 标签：iphone, core-data, nspredicate

我的核心数据模型是这样的：

> 实体A <---->> 实体B <<----> 实体C

现在，我想获取`EntityB`where的对象`EntityC == nil`。

我想了很多选择：

我试过的是：

`ANY EntityB.EntityC == nil`

虽然这没有给出错误，但它并没有按我的预期工作，因为它会搜索 的所有对象`EntityA`，即使一个不是`nil`，它也需要 的那个对象`EntityA`。

所以我尝试的是：

`ALL Participant.ParticipantCategory == nil`

但这给出了一个错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“不支持的谓词（null）

我也尝试过使用子查询，但没有成功。我花了几个小时试图解决它，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:26:28.197

我认为你的谓词应该是：`Participant.ParticipantCategory == nil`

`ANY`关键字在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)描述。我认为它的行为应该如此。而且我不知道`ALL`关键字。

# javascript - Javascript图像大小和定位

> ID：11259989
> 
> 赞同：0
> 
> 时间：2012-06-29T10:16:31.860
> 
> 标签：javascript, css, ajax, image, onload

我有以下 Javascript 代码，它可以调整产品图像的大小并将它们集中在一个框中。此代码在调用 onload 时运行良好，但我有一个 ajax 调用，它返回 20 个以上的产品。当我在 ajax 调用和 onload 之后调用此函数时，它会将任何图像的大小调整为 165x165px 正方形，无论其比例如何。这里是 Javascript：

```
function resizeProductImages(optimumHeight, optimumWidth, className)
{

images = document.getElementsByTagName('img');

for(var i=0;i<images.length;i++)
{

    if(images[i].className == className)
    {

        images[i].removeAttribute("width");
        images[i].removeAttribute("height");
        images[i].style.left = "0px";
        images[i].style.top = "0px";

        h = images[i].height;
        w = images[i].width;

        if(h > w)
        {

            images[i].height = optimumHeight;

            images[i].style.position = "absolute";
            images[i].style.display = "block";

            var scaledown = optimumHeight/h;
            var realWidth = scaledown * w;

            var realHeight = optimumWidth - realWidth;
            var gaps = realHeight / 2;

            images[i].style.left = gaps+"px";

        }
        else if(w > h)
        {

            images[i].width = optimumWidth;

            images[i].style.position = "absolute";
            images[i].style.display = "block";

            var scaledown = optimumWidth/w;
            var realHeight = scaledown * h;

            var realWidth = optimumHeight - realHeight;
            var gaps = realWidth / 2;

            images[i].style.top = gaps+"px";

        }
        else if(h == w)
        {

            images[i].height = optimumHeight;
            images[i].width = optimumWidth;

        }

    }

}

}

function resizeProductCategoryImages()
{

resizeProductImages(165, 165, 'roller');

} 
```

任何想法为什么？

**编辑**

我从评论中得到了建议，并用一个变量替换了 DOM 调用，并在上面发布了新代码。

**进一步编辑**

这是因为函数调用时图像尚未加载，因此图像的尺寸为0、0。有没有办法让这个函数等到所有图像都加载完毕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:00:26.623

如果您使用的是 Jquery，您可以使用：

```
$('img.classOfYourImages').load(function(){
  resizeProductImages(165, 165, 'roller');
}); 
```

如果您不使用 jQuery，您可以执行以下操作：

```
var img = new Image();
img.onload = function() { 
   // Code goes here
};
img.src = "http://path/to/image.jpg"; 
```

你应该做一些等待所有图像被加载的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:51:33.370

如果您愿意使用 jQuery，那么您可以将您的逻辑附加到 ajax 调用的“成功”处理程序。有关示例，请参见此处的[讨论。](https://stackoverflow.com/questions/809672/how-can-i-know-when-ajax-loaded-content-finish-the-images-loading)

# actionscript-3 - 如何在没有任何补间库且没有缓动的情况下补间目标对象？

> ID：11259990
> 
> 赞同：0
> 
> 时间：2012-06-29T10:16:31.907
> 
> 标签：actionscript-3, flash

所以我想在没有任何补间库且不缓动的情况下将对象补间到 targetX 和 targetY。

我一直在我所有的补间中都使用 greensock，对于这种情况，greensock 的 DynamicPropsPlugin 将是完美的，但它只适用于俱乐部会员......

这次我需要对一个对象进行补间，使其动态变化。

我知道如何使用缓动对对象进行补间，但这次我需要在没有缓动的情况下对对象进行补间，因此在达到其第一个目标后，它将顺利地继续到下一个目标。

这是有效的代码，但问题是缓和：

```
package  
{
    import flash.display.*;
    import flash.events.*;

    /**
     * ...
     * @author me
     */
    [SWF(width="1200", height="600", frameRate="30", backgroundColor="#ffffff")]
    public class Test extends Sprite 
    {

        // first target coordinates
        private var targetX:Number=600;
        private var targetY:Number = 450;

        // second target coordinates
        private var targetX2:Number=900;
        private var targetY2:Number = 300;

        // check if first target is reached
        private var _pointReached:Boolean

        // object to tween
        private var _ball:Sprite;

        public function Test() 
        {
            init()
        }

        private function init():void 
        {
            // simple ball 
            _ball = new Sprite();
            _ball.graphics.beginFill(0xff0000);
            _ball.graphics.drawCircle( -50, -50, 50);
            _ball.graphics.endFill();
            addChild(_ball);

            addEventListener(Event.ENTER_FRAME, onLoop);
        }

        private function onLoop(e:Event):void 
        {
            var vx:Number; 
            var vy:Number; 

            if (_pointReached) { // next target
                // easing
                vx = (targetX2 - _ball.x) * .3;
                vy = (targetY2 - _ball.y) * .3;
            }else {
                // easing
                vx = (targetX - _ball.x) * .3;
                vy = (targetY - _ball.y) * .3;
            }

            // check distance
            var dx:Number = targetX - _ball.x;
            var dy:Number = targetY - _ball.y;
            var dist:Number = Math.sqrt(dx * dx + dy * dy);

            if (dist <= 0.6) {
                // first target point reached
                _pointReached = true;
            }

            // tween an object
            _ball.x += vx;
            _ball.y += vy;

        }

    }

} 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:53:14.117

试试这个（未经测试）：

```
private function onLoop(e:Event):void 
    {
        var xDistance:Number; 
        var yDistance:Number; 

        if (_pointReached) { // next target
            xDistance = _ball.x - targetX2;
            yDistance = _ball.y - targetY2;

        }else {
            xDistance = _ball.x - targetX;
            yDistance =  _ball.y - targetY;

        }

        var rotation:Number = Math.atan2(yDistance, xDistance);

        var speed:int = 2;

        // tween an object
        _ball.x -= speed * Math.cos(rotation);
        _ball.y -= speed * Math.cos(rotation);

        if (dist <= 0.6) {
            // first target point reached
            _pointReached = true;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T19:50:04.503

在您的原始代码中，在与此类似的行中：

vx = (targetX - _ball.x) * .3;

删除 * .3 部分。那是你的摩擦或放松。然后，您的代码应该可以在没有缓动的情况下工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T10:43:25.857

使用计时器类和内部计时器函数将对象移向目标。这样做直到物体到达目标位置。

# ruby-on-rails - 如何使 authlog 使用 cookie 而不是会话

> ID：11259991
> 
> 赞同：0
> 
> 时间：2012-06-29T10:16:33.680
> 
> 标签：ruby-on-rails, nginx, authlogic, squid

我们有一个使用 rails 3.0.4 和 authlogic 的站点。我们使用 ngnix 来处理前端，我正在尝试使用 squid 在 nginx 和独角兽之间进行缓存。我试图不缓存登录用户的页面，我通过跟踪`user_credentials`cookie 来做到这一点，但是鉴于 authlogic 实际上是根据会话中存储的值进行授权。用户（或浏览器，谢谢 safari）可能会删除该 cookie，并且登录用户可能会将他们的页面放入缓存中，这让人们感到难过。

那么如何使 authlogic 在 user_credential cookie 上而不是在会话上进行身份验证。

我认为这是相关的代码：

```
# Authlogic gem
acts_as_authentic do |config|
  config.transition_from_restful_authentication = true
  config.transition_from_crypto_providers = Authlogic::CryptoProviders::Sha1
  config.validates_length_of_password_field_options = {:on => :update, :minimum => 6, :if => :has_no_credentials?}
  config.validates_length_of_password_confirmation_field_options = {:on => :update, :minimum => 6, :if => :has_no_credentials?}
end 
```

# vba - Excel VBA中的不同颜色但相同的颜色索引

> ID：11259995
> 
> 赞同：3
> 
> 时间：2012-06-29T10:16:49.577
> 
> 标签：vba, excel-2007

我使用下面的代码来获取 Excel 中单元格的颜色索引。

[原始链接](http://www.vbaexpress.com/kb/getarticle.php?kb_id=190)

```
Function ConditionalColor(rg As Range, FormatType As String) As Long
  'Returns the color index (either font or interior) of the first cell in range rg. If no _
 conditional format conditions apply, Then returns the regular color of the cell. _
    FormatType Is either "Font" Or "Interior"
    Dim cel As Range
    Dim tmp As Variant
    Dim boo As Boolean
    Dim frmla As String, frmlaR1C1 As String, frmlaA1 As String
    Dim i As Long

     'Application.Volatile    'This statement required if Conditional Formatting for rg is determined by the _
    value of other cells

    Set cel = rg.Cells(1, 1)
    Select Case Left(LCase(FormatType), 1)
    Case "f" 'Font color
        ConditionalColor = cel.Font.ColorIndex
    Case Else 'Interior or highlight color
        ConditionalColor = cel.Interior.ColorIndex
    End Select

    If cel.FormatConditions.Count > 0 Then
         'On Error Resume Next
        With cel.FormatConditions
            For i = 1 To .Count 'Loop through the three possible format conditions for each cell
                frmla = .Item(i).Formula1
                If Left(frmla, 1) = "=" Then 'If "Formula Is", then evaluate if it is True
                     'Conditional Formatting is interpreted relative to the active cell. _
                    This cause the wrong results If the formula isn 't restated relative to the cell containing the _
                    Conditional Formatting--hence the workaround using ConvertFormula twice In a row. _
                    If the Function were Not called using a worksheet formula, you could just activate the cell instead.
                    frmlaR1C1 = Application.ConvertFormula(frmla, xlA1, xlR1C1, , ActiveCell)
                    frmlaA1 = Application.ConvertFormula(frmlaR1C1, xlR1C1, xlA1, xlAbsolute, cel)
                    boo = Application.Evaluate(frmlaA1)
                Else 'If "Value Is", then identify the type of comparison operator and build comparison formula
                    Select Case .Item(i).Operator
                    Case xlEqual ' = x
                        frmla = cel & "=" & .Item(i).Formula1
                    Case xlNotEqual ' <> x
                        frmla = cel & "<>" & .Item(i).Formula1
                    Case xlBetween 'x <= cel <= y
                        frmla = "AND(" & .Item(i).Formula1 & "<=" & cel & "," & cel & "<=" & .Item(i).Formula2 & ")"
                    Case xlNotBetween 'x > cel or cel > y
                        frmla = "OR(" & .Item(i).Formula1 & ">" & cel & "," & cel & ">" & .Item(i).Formula2 & ")"
                    Case xlLess ' < x
                        frmla = cel & "<" & .Item(i).Formula1
                    Case xlLessEqual ' <= x
                        frmla = cel & "<=" & .Item(i).Formula1
                    Case xlGreater ' > x
                        frmla = cel & ">" & .Item(i).Formula1
                    Case xlGreaterEqual ' >= x
                        frmla = cel & ">=" & .Item(i).Formula1
                    End Select
                    boo = Application.Evaluate(frmla) 'Evaluate the "Value Is" comparison formula
                End If

                If boo Then 'If this Format Condition is satisfied
                    On Error Resume Next
                    Select Case Left(LCase(FormatType), 1)
                    Case "f" 'Font color
                        tmp = .Item(i).Font.ColorIndex
                    Case Else 'Interior or highlight color
                        tmp = .Item(i).Interior.ColorIndex
                    End Select
                    If Err = 0 Then ConditionalColor = tmp
                    Err.Clear
                    On Error GoTo 0
                    Exit For 'Since Format Condition is satisfied, exit the inner loop
                End If
            Next i
        End With
    End If

End Function 
```

但是，如下图所示，两种不同颜色的单元格给出完全相同的颜色索引：

![在此处输入图像描述](../Images/a31633748faa31b8609a5bf37a6b5877.png)

如何解决此错误？

[我在这里](https://dl.dropbox.com/u/50358043/test%20color%20index.xlsb)附上了测试文件。请检查此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T16:25:31.853

我认为很可能造成混淆的原因是条件格式。两个 to 单元格的原始 ColorIndex 或 Color 相同。但是条件格式会“覆盖”原始颜色。然后，如果您尝试从单元格中获取 ColorIndex 或 Color 属性，则结果不是您看到的结果，而是原始/基础结果。

顺便说一句，如果您想要获得的只是单元格的 ColorIndex，您可以使用类似此代码的代码来测试我在这里描述的是否是您的情况。

```
MsgBox ActiveCell.Interior.ColorIndex

MsgBox ActiveCell.Interior.Color 
```

或者把它写在右边的下一个单元格中：

```
ActiveCell.Offset(0, 1).Value = ActiveCell.Interior.ColorIndex 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T17:02:48.017

编辑：我之前的回答并没有解决你的问题，但我认为它可能仍然与问同样问题的人有关。

您看到的问题源于使用 Colorindex 属性，而不是像 Color 这样更具体的属性。

两者的详尽解释可以参考这个地址： http: [//msdn.microsoft.com/en-us/library/cc296089 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/cc296089%28v=office.12%29.aspx)

本质上，只有 57 种可能的颜色索引值，但可用的颜色要多得多。颜色索引是指给定调色板中的索引。您碰巧偶然发现了两种具有相同索引的颜色。要使您的程序按预期运行，您应该更新 colorindex 对颜色的引用。如果不进行更改，您将继续得到令人困惑的结果。

* * *

上一个答案：如果您使用条件格式来推断应该应用其值的单元格，那么当 UDF 检查以确定条件格式是否为真时，它通常会推迟到当前单元格。

例如，如果您的条件格式公式类似于：

=MOD(行(),2)=1

每次代码命中：

```
frmlaR1C1 = Application.ConvertFormula(frmla, xlA1, xlR1C1, , ActiveCell)
frmlaA1 = Application.ConvertFormula(frmlaR1C1, xlR1C1, xlA1, xlAbsolute, cel)                      
boo = Application.Evaluate(frmlaA1) 
```

它将根据当前活动单元格而不是应用条件格式的单元格进行评估。

我做了一些实验，但根据您需要使用代码的频率，我认为最好的结果可能是增强公式。这不会解决所有问题，但您可以尝试在第一个 ConvertFormula 调用之前插入以下内容：

```
frmla = Replace(frmla, "()", "(" & cel.Address & ")") 
```

这解决了使用 Row() 或 Column() 的问题。

如果这不能完全解决您的问题，我们需要查看您的条件格式公式。

# jquery-plugins - struts 2 重置，datepicker 不适用于 jquery 插件

> ID：11259996
> 
> 赞同：0
> 
> 时间：2012-06-29T10:16:51.810
> 
> 标签：jquery-plugins, struts2, jquery-ui-datepicker

我正在使用带有 jquery 插件的 struts 2 作为日期选择器。当我将鼠标悬停在日期选择器上时，它默认显示“...”（3 个点）。当我试图改变它时，它没有任何效果。我将显示格式设置为 dd/mm/yy，但是当我按下重置按钮时，它显示的是其他格式。这是代码片段：

```
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

<sj:datepicker id="fromDate" name="searchBean.fromDate" maxDate="new Date()"  
changeMonth="true" changeYear="true"  buttonImageOnly="true"   
onCompleteTopics="onDpClose" cssStyle="width: 134px; margin-right:5px;"    
 displayFormat="dd/mm/yy" disabled="true" /> 
```

我很困惑为什么它会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:00:00.293

最后我才知道，基本上它是日期选择器工具提示中的一个错误。

# flash - 播放 Flash 时音频失真

> ID：11259998
> 
> 赞同：0
> 
> 时间：2012-06-29T10:16:56.203
> 
> 标签：flash, audio, browser

当我使用浏览器（Firefox 或 Chrome）打开视频/音频轨道时，声音非常失真。但是，当打开媒体文件或使用 Java 运行的东西时，这不会发生，所以我认为是 Flash 问题。

我已经尝试卸载 flash 并重新安装 Chrome 和 Firefox，但问题仍然存在。我目前使用的 flash 版本是 11,3,300,257。我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:36:43.847

SOLVED: Apparently it's a bug in the 11.3 version of flash. Following [this post](http://forums.adobe.com/thread/1026022) I uninstalled the 11.3 version and installed an old 10.3 one and everything worked.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:44:40.897

我发现至少对于 Fedora 系统来说，只需重新启动 pulseaudio 守护程序就足够了。因此，每当我的 chrome 抖动时，我都会执行以下操作：

```
pulseadio -k
pulseaudio --start 
```

然后重新加载页面，直到下一个 chrash 为止。