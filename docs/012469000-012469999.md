# StackOverflow 问答 12469000-12469999

# python - 在python中组织源代码

> ID：12469002
> 
> 赞同：4
> 
> 时间：2012-09-18T00:49:52.783
> 
> 标签：python, package

我正在写一个游戏框架。这是我当前的文件结构：

```
src/
  framework/
    __init__.py
    util.py
    render.py
    game.py
  pong.py 
```

我希望能够简单地`import game`或`import render`直接从`pong.py`文件中执行。实现这一目标的最佳方法是什么？最初`util.py, render.py, game.py`模块在`src`文件夹中，但为了组织起见，我决定将它们放入单独的文件夹中。我对包装惯例很陌生，所以我不知道这是否是推荐的做事方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T00:56:54.463

做到这一点的最好方法是根本不这样做。正是出于最初移动它们的原因——为了组织——你会希望它们位于一个单独的模块中。如果你想`game`在代码中引用模块，你可以这样做：

```
from framework import game

game.foo() 
```

通常，当您这样做时，您提供的是系统库或脚本运行所在的文件夹中`import game`的期望。`game`如果不是这样，它就会把人赶走。如果你要让你的框架成为一个系统库，你不会把它作为三个独立的库`util`, `game`, 和`render`, 不是吗？您可以将它打包到一个库中`framework`- 并使用子模块分发它。因此，您真的不想这样做。

但是，据我所知，没有答案可能会令人沮丧，如果您真的想继续，您可以将`framework`文件夹添加到`sys.path`，python 会在您导入模块时检查该文件夹：

```
import sys
sys.path.append("framework")

import game 
```

# php - php文件上传问题

> ID：12469005
> 
> 赞同：1
> 
> 时间：2012-09-18T00:50:15.370
> 
> 标签：php, file, upload

我似乎无法使用 PHP 上传文件。据我所知，一切都结束了。我什至甚至去挖掘旧教科书并直接从文本中复制示例，但仍然没有成功。

起初，我认为这是保存文件的目录权限的问题，所以我将权限更改为 777，但仍然没有。如果有人有任何建议，我会全力以赴：/

这是代码（HTML）：

```
 <form action="upload.php" method="post" enctype="multipart/form-data">
    <input type="file" name="file1">
        <br/>
    <input type="submit" value="Upload">
  </form> 
```

PHP 文件：

```
<?php
$tmp_name = $_FILES['file1']['tmp_name'];
$path = getcwd() . DIRECTORY_SEPARATOR . 'images';
$name = $path . DIRECTORY_SEPARATOR . $_FILES['file1']['name'];
$success = move_uploaded_file($tmp_name, $name);
if($success) {
    $upload_message = $name . ' has been uploaded.';
    echo "$upload_message";
} else {
    echo "something went wrong :(";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:25:41.670

您应该在尝试移动之前检查上传错误，然后您可以追踪问题： [http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

这是一个基本的例子：

```
<?php
error_reporting(-1);

$uploaddir = './images/';

// Check for upload attempt
if(isset($_FILES['file1'])){
    $uploadfile = $uploaddir.basename($_FILES['file1']['name']);

    // If no error
    if($_FILES['file1']['error'] == 0){
        //Attempt to move
        if (move_uploaded_file($_FILES['file1']['tmp_name'], $uploadfile)) {
            echo "File is valid, and was successfully uploaded.";
        }else{
            echo 'Error moving file.';
        }
    } else {
        // Has error
        $errors = array(0=>'OK',
                        1=>'UPLOAD_ERR_INI_SIZE',
                        2=>'UPLOAD_ERR_FORM_SIZE',
                        3=>'UPLOAD_ERR_PARTIAL',
                        6=>'UPLOAD_ERR_NO_TMP_DIR',
                        7=>'UPLOAD_ERR_CANT_WRITE',
                        8=>'UPLOAD_ERR_EXTENSION'
                        );
        echo "Error: ".$errors[$_FILES['file1']['error']];
    }
} 
```

顺便提一句。对允许上传非常谨慎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:55:09.880

您需要确保您有权写入upload_tmp_dir，检查php.ini 中的post_max_size 和upload_max_filesize 限制是否大于您尝试上传的文件。还 $_FILES 包含错误信息，也转储它以获取有关未按预期发生的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:39:48.893

我不太确定这是否有效，还没有尝试过。

```
<?
$uploadpath = '../images/';

if ($_FILES["file1"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file1"]["error"] . "<br />";
    }

  else
    {
echo "Upload: " . $_FILES["file1"]["name"] . "<br />";
    echo "Type: " . $_FILES["file1"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file1"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file1"]["tmp_name"] . "<br />";
    }

    if (file_exists($uploadpath . $_FILES["file1"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      $uploadpath . $_FILES["file"]["name"]);
      echo "UPLOAD SUCCESS!";
      }

?> 
```

来源：W3school

# javascript - 使用原型在嵌套表中选择基于类的 td - javascript

> ID：12469009
> 
> 赞同：0
> 
> 时间：2012-09-18T00:50:41.300
> 
> 标签：javascript, html, prototype

我正在处理一些在另一个表中有一个表的遗留代码。两者都有身份证。我需要在该嵌套表中选择具有特定类属性的 td。这是使用原型......再次成为遗留代码的副产品。我如何选择所有特定的 td 并遍历它们？

```
`<table>
<tr><td></td><td></td></tr>
  <tr><td colspan="2">
    <table id="tableIWant">
      <tr>
         <td class="classIWant"></td>
         <td class></td>
         <td class="classIWant"></td>
         <td class></td>
      </tr>
     </table>
    </td>
   </tr>
 </table>` 
```

`所以我想使用 Prototype 框架在 id="tableIWant" 的表中选择所有 class="classIWant" 的 tds。我该怎么做？`

 `-感谢新手工程师。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:57:19.020

用于在 Prototype 中使用`$$`CSS 样式选择器进行选择。

`var allTds = $$('#tableIWant td.classIWant');`

然后迭代：

```
allTds.each(function(td) {
    // Set background to red on selected tds.
    td.style.background = '#f00';
}); 
````

# excel - 对在其行中的单元格中具有特定值的列中的单元格求和

> ID：12469010
> 
> 赞同：7
> 
> 时间：2012-09-18T00:50:48.923
> 
> 标签：excel, worksheet-function

我的表如下...

```
Timestamp | Category   | Cost 
--------------------------------
...       | Shopping   | 5
...       | Charity    | 10
...       | Dining     | 20
...       | Mortgage   | 1000
...       | Dining     | 30
etc... 
```

我需要的是每个类别值的公式，它将获得具有该类别的行的成本列的总和。IE。该类别的总支出，我可以放在预算表的“实际支出”单元格中。数据是用谷歌表单输入的，所以我几乎没有格式化的能力。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T01:06:48.257

您可以使用多个 SUMIF() 函数将这些总和放在电子表格中的任何位置。假设 A 列是时间戳，B 列是类别，C 列是成本：

```
Shopping -> =SUMIF(B:B, "Shopping", C:C)
Charity  -> =SUMIF(B:B, "Charity", C:C)
Dining   -> =SUMIF(B:B, "Dining", C:C)
Mortgage -> =SUMIF(B:B, "Mortgage", C:C) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T01:03:45.183

我在这里看到两个选项。在我看来，数据透视表是迄今为止最快和最简单的。（参见图片中的选项 1。）

或者

如果您知道所有类别并且有一个您想要它们的特定位置...请参阅选项 2。这使用命令 SumIf（条件求和），它使用 J 列中的值并使用聚合将所有成本加在一起。

![在此处输入图像描述](../Images/198067f195715a9f68c7a3f54a3b76f6.png)

# vim - 复制VI中的每一行

> ID：12469011
> 
> 赞同：25
> 
> 时间：2012-09-18T00:50:54.387
> 
> 标签：vim

我有一个包含这些行的文件：

```
aa
bb
cc
dd 
```

我想将其转换为：

```
aa
aa
bb
bb
cc
cc
dd
dd 
```

这在VI中可能吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-18T00:54:18.880

试试这个简单的：

```
:g/^/norm yyp 
```

还有一个（更短）：

```
:%s/.*/&\r& 
```

另一个：

```
:%!sed p 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-18T01:15:39.607

我喜欢`g/^/t.`
( `g`for `global`) 命令将查找与模式匹配的任何行。
我们指定的模式是`^`，它将匹配所有行。
`t`将复制和粘贴，最后告诉它在下面粘贴
。`dot`

我会因为简洁而获胜吗？

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-18T00:54:25.423

使用*global 命令* `g`对文件中的每一行进行操作：

```
:g/^/norm yyp 
```

该`g`命令将对匹配模式的所有行进行操作。`^`是一个匹配任何行的模式。`norm`执行命令`yyp`，拉出当前行并粘贴它。`:g/^/norm Yp`也将工作。

有关`:help global`该命令的更多详细信息，请参阅 ，另请参阅此[vim wiki](http://vim.wikia.com/wiki/Power_of_g)页面`g`。

# php - 如何获取客户自定义属性值

> ID：12469019
> 
> 赞同：6
> 
> 时间：2012-09-18T00:52:51.150
> 
> 标签：php, magento

当我运行以下两行代码时，我得到返回值 161。现在，如果我通过 挖掘`customer_eav`，我看到 161 与`attribute_id`477 相关，然后如果我进一步挖掘，`customer_entity_varchar`我会找到一行，`field['attribute_id']=477`并且值为 USD。如何使用 magento 的模型/方法获取此属性字符串值...

```
$customer = $session->getCustomer();
$attributes = $customer->getDefaultCurrency(); // returns 161... not USD 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T01:48:00.320

```
echo $customer->getResource()
              ->getAttribute('default_currency')
              ->getFrontend()
              ->getValue($customer); 
```

# c# - 绑定到静态属性的一种方式失败

> ID：12469023
> 
> 赞同：2
> 
> 时间：2012-09-18T00:53:03.720
> 
> 标签：c#, wpf, data-binding, binding, static

我在绑定到静态属性时遇到问题。
我想根据**bool**变量的值`Label`使用`Content` ***true***或***false 。***

 **XAML：

```
<Label Content="{Binding Source={x:Static l:MainWindow.IsTrue}, Mode=OneWay}" /> 
```

后面的代码：

```
public partial class MainWindow : Window
{
    public static bool IsTrue { get; set; }
    DispatcherTimer myTimer;

    public MainWindow()
    {
        InitializeComponent();

        myTimer = new DispatcherTimer();
        myTimer.Interval = new TimeSpan(0, 0, 2); // tick every 2 seconds
        myTimer.Tick += new EventHandler(myTimer_Tick);
        myTimer.IsEnabled = true;
    }

    void myTimer_Tick(object sender, EventArgs e)
    {
        IsTrue = !IsTrue;
    }
} 
```

它一直显示**False**。

我知道为了实现**两种方式绑定** [，我需要](https://stackoverflow.com/questions/936304/binding-to-static-property)指定`Path`. 但我需要一种方式绑定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T01:05:51.823

问题是 WPF 不知道您的属性何时（或是否）更改。与实例方法不同，`INotifyPropertyChanged`您无法实现 -style 接口，因为您不能拥有“静态接口”。因此，它永远不会看到您更改的值。

如果您使用的是 WPF 4.5，则可以使用新的[静态属性更改通知支持](http://10rem.net/blog/2011/11/29/wpf-45-binding-and-change-notification-for-static-properties)来处理此问题。

在 .NET 4.0 或更早版本中，处理此问题的最简单方法通常是将属性包装到单例中，并`INotifyPropertyChanged`在单例实例上使用。**

# tcl - proc 关键字的 Tcl 重命名在命名空间中不能正常工作

> ID：12469025
> 
> 赞同：3
> 
> 时间：2012-09-18T00:53:36.533
> 
> 标签：tcl

我有以下程序：

```
rename proc _proc
_proc proc {name args body} {
    global pass_log_trace

    set g_log_trace "0"
    if {[info exists pass_log_trace]} {
        set g_log_trace $pass_log_trace
    }

    # simple check if we have double declaration of the same procedure
    if {[info procs $name] != ""} {
        puts "\nERROR: redeclaration of procedure: $name"
    }

    _proc $name $args $body

    if {$g_log_trace != 0} {
        trace add execution $name enter trace_report_enter
        trace add execution $name leave trace_report_leave
    }
} 
```

此过程的目的主要是为代码中的所有过程添加入口和出口点跟踪器。但是，由于某种原因，它也删除了命名空间范围。例如，这样的代码：

```
namespace eval bob {
    namespace eval joe {
        proc proc1 {} {}
    }
    proc proc2 {} {
        puts "proc2"
    }
}

puts "Namespace calling [info procs ::bob\::*]" 
```

不会在`bob`命名空间中创建过程，而是在全局命名空间中。调用`namespace current`总是返回`::`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:14:34.687

当您调用 时，使用和`_proc`的组合在调用上下文的命名空间前添加：`uplevel``namespace current`

```
set ns [uplevel 1 {namespace current}]
_proc ${ns}::$name $args $body 
```

这里`uplevel 1`说，“在调用者的上下文中运行这段代码”，正如你已经知道的，“namespace current”给出了调用它的命名空间的完全限定名称。

# lua - 如何避免在 Corona SDK 中重新启动物理后获得“缓冲”碰撞回调？

> ID：12469034
> 
> 赞同：0
> 
> 时间：2012-09-18T00:54:48.823
> 
> 标签：lua, box2d, coronasdk

背景： * 使用 Corona SDK 和这里的物理函数 * 找到了我遇到的一个烦人的问题 * 在这个游戏中我暂停了物理，然后我重新定位我的玩家对象并再次重新启动（启动）物理 * 我看到的是我没有预料到的碰撞事件触发，因为在我重新定位它后玩家不在一个物体附近*所以我猜测这是之前发生的一些碰撞的遗留物

问题：如何避免在启动物理引擎后直接在此处发生“缓冲”/“多余”碰撞事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:36:47.567

Box2D 因出现此类问题而臭名昭著……我猜你唯一能做的就是将玩家移动的地方存储起来，忽略第一次碰撞并重置标志……

或者您应该删除播放器并重新创建它。

Box2D 讨厌你自己移动对象（即使是在暂停时）。

# php - 将键和值添加到现有数组

> ID：12469037
> 
> 赞同：4
> 
> 时间：2012-09-18T00:55:26.870
> 
> 标签：php, arrays, array-push

我需要向现有数组添加键和值，但似乎无法将它们组合在一起。

打印时我现有的数组如下所示：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 787
            [name] => Steve
            [surname] => Ryan
            [email] => Steve@hotmail.com
        )

    [1] => stdClass Object
        (
            [id] => 1057
            [name] => Peter
            [surname] => Smith
            [email] => Peter.Smith@yahoo.com
        )

    [2] => stdClass Object
        (
            [id] => 1058
            [name] => Chris
            [surname] => Gill
            [email] => chrisgill@gmail.com
        )

) 
```

我需要从如下所示的动态中向该数组添加一些细节`string`：

```
Topher:Topher1234@mac.com
Elvis:elvispresley@gmail.com
Marilyn:marilyn.monroe@hotmail.com 
```

每个条目由 a 分隔，`new line`名称和电子邮件地址由 a 分隔`:`

所以最后我的数组看起来像这样：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 787
            [name] => Steve
            [surname] => Ryan
            [email] => Steve@hotmail.com
        )

    [1] => stdClass Object
        (
            [id] => 1057
            [name] => Peter
            [surname] => Smith
            [email] => Peter.Smith@yahoo.com
        )

    [2] => stdClass Object
        (
            [id] => 1058
            [name] => Chris
            [surname] => James
            [email] => chrisjames@gmail.com
        )
    [3] => stdClass Object
        (
            [id] => 
            [name] => Topher
            [surname] => 
            [email] => Topher1234@mac.com
        )
    [4] => stdClass Object
        (
            [id] => 
            [name] => Elvis
            [surname] => 
            [email] => elvispresley@gmail.com
        )
    [5] => stdClass Object
        (
            [id] => 
            [name] => Marilyn
            [surname] => 
            [email] => marilyn.monroe@hotmail.com
        )

) 
```

我查看了 array_push 但无法解决。

非常感谢您对此的任何帮助。

C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:11:27.813

你可以试试这样的

```
$string = "Topher:Topher1234@mac.com\nElvis:elvispresley@gmail.com\nMarilyn:marilyn.monroe@hotmail.com";
$string = explode("\n", $string);
$result = array(); # or your existing array
foreach($string as $chunk){
        $to_array = new stdClass();
        $to_array->id = null;
        $to_array->surname = null;
        list($to_array->name, $to_array->email) = explode(':', $chunk);
        $result[] = $to_array;
}
print_r($result); 
```

[键盘示例](http://codepad.org/1DFfyNni)

结果：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 
            [surname] => 
            [email] => Topher1234@mac.com
            [name] => Topher
        )

    [1] => stdClass Object
        (
            [id] => 
            [surname] => 
            [email] => elvispresley@gmail.com
            [name] => Elvis
        )

    [2] => stdClass Object
        (
            [id] => 
            [surname] => 
            [email] => marilyn.monroe@hotmail.com
            [name] => Marilyn
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:15:44.203

使用 PHP Arrays 的 [] 运算符与将值推到数组末尾相同。

```
$arr[] = 'new element in array'; 
```

您的示例的完整解决方案是

```
$CharacterInput = <<<EOT
Topher:Topher1234@mac.com
Elvis:elvispresley@gmail.com
Marilyn:marilyn.monroe@hotmail.com
EOT;

$lines = explode("\n", $CharacterInput);

$People = array();

foreach($lines as $line) {
    list($name, $email) = explode(':', $line);

    $entry = array(
        'id' => null,
        'name' => $name,
        'surname' => null,
        'email' => $email,
    );

    // cast the entered data array to an object,
    // which is explicitly stated in the example output.
    // For plain arrays, remove the following line.
    $entry = (object) $entry;

    $People[] = $entry;
}

print_r($People); 
```

哪个输出

```
Array
(
 [0] => stdClass Object
 (
 [id] => 
 [name] => Topher
 [surname] => 
 [email] => Topher1234@mac.com
 )

 [1] => stdClass Object
 (
 [id] => 
 [name] => Elvis
 [surname] => 
 [email] => elvispresley@gmail.com
 )

 [2] => stdClass Object
 (
 [id] => 
 [name] => Marilyn
 [surname] => 
 [email] => marilyn.monroe@hotmail.com
 )

) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-18T01:04:24.627

假设 $arr 是您现有的数组变量，请按如下所示进行。

```
$arr[] =  array(
            ['id'] => '',
            ['name'] => 'Topher',
            ['surname'] => '',
            ['email'] => 'Topher1234@mac.com'
); 
```

# javascript - 从 JSP 转到 Servlet，然后返回相同的 JSP，字段为空

> ID：12469038
> 
> 赞同：2
> 
> 时间：2012-09-18T00:55:40.853
> 
> 标签：javascript, jsp, servlets

我需要从我的 JSP 转到我的 Servlet，然后再回到同一个 JSP。问题是当我回来时，我所有的文本字段都是空的。

我该如何解决这个问题？笔记：

1.  表格有`method='post' enctype='multipart/form-data'`.
2.  我正在使用按钮提交。它们是执行 javascript 函数 onclick 的普通按钮，该函数验证文本字段，如果一切正常，则调用该`submit()`函数并提交表单。
3.  使用以下代码完成从 servlet 的返回：

    ```
    RequestDispatcher rd = request.getRequestDispatcher("/altaPerfil.jsp");
    rd.forward(request, response); 
    ```

**附加信息：**

我的 JSP 页面与此类似：[https](https://www.taringa.net/registro) ://www.taringa.net/registro 。
它有一个表单，表单内有 7 个文本字段，3 个日期选择字段（与该页面中的完全一样），一个用于上传图像的上传字段，一个带有两个字段和 3 个按钮的单选按钮。
其中一个按钮用于验证昵称和电子邮件字段（如果昵称或邮件已被占用，则返回 false，否则返回 true，这是在 servlet 中完成的，因为我们试图将逻辑与表示分离）。
第二个按钮用于上传图像。
第三个按钮用于发送所有表单（所有文本字段和日期）。
前两个按钮必须转到 servlet 并返回到 JSP...
**示例代码：**
**（JSP）**

```
<form action="altaPerfilServlet" 
      name = "frmValidar" 
      method='post' enctype='multipart/form-data' >

    Nick:
    <br />
    <input type="text" name="nick" 
           id="nick" onkeypress="deshabilita()" 
           value="${requestScope.nick}" />

<input type=button name="botonValidar" 
           id="botonValidar" value="Validar datos" 
           onclick="validarNick()" />
<!--Note: the javascript validarNick() verifies the nick field and if it is -->
<!--not empty then it calls frmValidar.submit()--> 
```

**(小服务程序)**

```
 FileItemFactory factory = new DiskFileItemFactory();  
  ServletFileUpload upload = new ServletFileUpload(factory);

  List<FileItem> fields = upload.parseRequest(request);
  Iterator<FileItem> it = fields.iterator();

  <!--here i process all the FileItems and obtain their values-->
  <!--then i talk to a java app (which acts as a server, providing -->
  <!--the data and a series of classes) and obtain a boolean value(esValido)-->
  <!--that tells me if the nick is available(true) or taken(false)-->

  <!--finally: -->

  request.setAttribute("esValido", esValido);<!-- saving the boolean -->

  String nick=request.getParameter("nick");
  request.setAttribute("nick", nick);
  RequestDispatcher rd = request.getRequestDispatcher("/altaPerfil.jsp");
  rd.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:40:49.553

`<input>`从`request`in方法中读取数据并将数据`doPost`推送/绑定`<input>`到请求范围。

示例.jsp

* * *

```
<form method="post" action="servlet_url">
  No   : <input type="text" name="no" value="${requestScope.no}"/>
  Name : <input type="text" name="name" value="${requestScope.name}"/>
  <input type="submit"/>
</form> 
```

和代码`doPost`，

```
String no=request.getParameter("no");
String name=request.getParameter("name");

//other statements

request.setAttribute("no",no);
request.setAttribute("name",name);

RequestDispatcher rd = request.getRequestDispatcher("/sample.jsp");
rd.forward(request, response); 
```

# c# - 如何从 mvc 部分视图下载 pdf？

> ID：12469039
> 
> 赞同：1
> 
> 时间：2012-09-18T00:55:59.497
> 
> 标签：c#, asp.net, asp.net-mvc-3

我创建了一个 PdfActionResult 类，如下所示：

```
public class PdfActionResult : ActionResult
{
    public byte[] FileContents { get; set; }
    public string FileName { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var cd = new System.Net.Mime.ContentDisposition()
                     {
                        FileName = FileName,
                        Inline = false,
                     };

        context.HttpContext.Response.Buffer = true;
        context.HttpContext.Response.Clear();
        context.HttpContext.Response.AppendHeader("Content-Disposition", cd.ToString());
        context.HttpContext.Response.ContentType = "application/pdf";
        context.HttpContext.Response.BinaryWrite(FileContents);
    }

} 
```

我有一个返回 PdfActionResult 的控制器方法。这在视图中调用时工作正常，但从局部视图调用时会失败。我的猜测是它与控制器上下文有关。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:50:56.523

很抱歉没有在我的评论中更直接地回答你的问题。

将其放在局部视图中，您期望会发生什么？基本上，对于文件，这是一个全有或全无的命题。一旦您返回 FileResult，游戏就结束了。没有呈现页面，唯一发生的事情是文件被流式传输到客户端的浏览器。基本上，在 HTTP 流中，您只能拥有一种内容类型——要么是 HTML 文档，要么是另一种类型的文件。

如果您真正想要的是拥有一个带有自定义标记的页面，该页面恰好在框架内显示 PDF，我建议使用`<iframe>`标签，然后将 iFrame 标签的来源指向*返回*文件的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:00:26.867

原来问题不在于局部视图，而是我使用 Ajax.BeginForm 的事实。它试图在 Ajax 上下文中下载，这就是导致它失败的原因。更改为 Html.BeginForm 可以解决问题 - 希望这对将来的某人有所帮助。

# php - 在使用php插入sql之前检查记录

> ID：12469045
> 
> 赞同：2
> 
> 时间：2012-09-18T00:56:59.550
> 
> 标签：php, mysql, html, css

我正在使用 INSERT 语句添加记录。现在我想检查电子邮件是否已经注册或是否已经存在于记录中..如果它已经存在就给出一个错误否则插入一个新记录..这就是我的做法...但是选择查询是没有运行...并且仍然在不检查的情况下添加记录。请检查我的代码并提出解决方案。谢谢:)这是我的代码

```
 manage-users.php
<?php include("../includes/config.php"); ?>
<?php
if ($_SESSION["isadmin"])
{
?>
<!DOCTYPE HTML>
<html>
<head>
<?php include("includes/pre-header.php");?>

<title>Admdin Home</title>
</head>
<body>
<div class="container">
<?php include("includes/header.php"); ?>
<?php include("includes/nav.php"); ?>
<div id="maincontent">

<div class="span-24 last">
<div id="breadcrumbs">
    <a href="">Home</a> >
    <a href="">Manage Users</a> >
    Add New
</div>
</div>
<?php include("includes/manage-users-aside.php"); ?>
<div class="span-18 last">
<h2 class="alt">Add New</h2>
<?php
if (isset($_GET["status"]))
{
if($_GET["status"]==1)
{
?>
<div class="success">
<?php
echo("<strong>User Has Been Added Successfully!</strong>");
?>
</div>
<?php
}
 if($_GET["status"]==2)
{
?>
<div class="success">
<?php
 echo("<strong>User Has Been Edited Successfully!</strong>");
?>
</div>
<?php
}
} 
 if($_GET["status"]==3)
{
echo ("<strong>This Account Already Exixts!. Please add a New One!</strong>");
}
?>
<form method="post" id="form" action="manage-users-action.php">
<label for="email">Email/Username:</label><input id="email" type="text" name="email" value="" class="text" /><br /><br />
<label for="password">Password:</label><input id="password" type="password" name="password"  value="" class="text" /><br /><br />
<label for="firstname">First Name:</label><input id="firstname" type="text" name="firstname" value="" class="text" /><br /><br />
<label for="lastname">Last Name:</label><input id="lastname" type="text" name="lastname"    value="" class="text" /><br /><br />
<label>Type:</label><br />
<input type="radio" name="type" value="S" />Student <br /> <br />
<input type="radio" name="type" value="T" />Teacher<br /><br />
<input type="submit" name="submit"  value="Submit" class="button" />
</form>
</div>
</div>

<?php include("includes/footer.php"); ?>
</div>
</body>

</html>
<?php
}
else
{
    header("Location: ".$fullpath."login/unauthorized.php");

 }
?> 
```

这是manage-users-action.php

```
<?php include("../includes/config.php");?>
<?php
$fname=$_POST['firstname'];
$lname=$_POST['lastname'];
$type=$_POST['type'];
$email=$_POST['email'];
$pwd=$_POST['password'];
$recoverykey=md5(time());
$encpwd=md5($pwd);
$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }
mysql_select_db($dbname, $con);

$result= mysql_query("SELECT FROM accounts WHERE (email='".$email."')");
if(!$result){
$sql=("INSERT INTO accounts VALUES   (NULL,'".$email."','".$encpwd."','".$fname."','".$lname."','".$type."','".$recoverykey."')"    );
}
else
{
 header("Location: manage-uesrs.php?status=3");
}
if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
else
    {
        header("Location:manage-users.php?status=1");
    }

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:01:00.897

代替

```
if (!$result) { 
```

尝试

```
if ( mysql_num_rows($result) == 0 ) 
```

你的查询***总是***返回一个结果——即使数据库中没有记录——这就是你的条件从未奏效的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:26:34.280

您实际上在流程中有几个错误。Zolthan 是对的，但是您仍然会在数据库中得到两个条目，因为您的代码将在“标题”之后继续执行。总是`exit();`在“标头位置”调用之后。

您还需要验证/确保您的数据安全（否则 $retval 将是错误的，如果您完全按照 Zoltan 操作，它会出错。）

解决问题：

```
// Validate you have an valid email
if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
     header("Location: manage-uesrs.php?status=ErrorInSQL");    // Note: location should take a full URL. This works in all browsers I know of, but is not strictly correct.
     exit();  // Critical - otherwise you script will continue to run.
}

// Than sanatize your data. Use PDO or mysql; for for now I'll use your code
$email = mysql_real_escape_string($email);
// Repeat for the other fields

$result= mysql_query("SELECT FROM accounts WHERE (email='".$email."')"); 
if (!$result) { 
     header("Location: manage-uesrs.php?status=ErrorInSQL");    // Note: location should take a full URL. This works in all browsers I know of, but is not strictly correct.
     exit();  // Critical - otherwise you script will continue to run.
} else (mysql_num_rows($result) > 0 )  
     header("Location: manage-uesrs.php?status=NotUniqueURL");
     exit();  // Critical - again.
}

// As we're here, we can now do thq SQL as you have
// Remmber mysql_real_escape_string on all variables (or use PDO / mysqli prepared statements)
$sql=("INSERT INTO accounts VALUES   (NULL,'".$email."','".$encpwd."','".$fname."','".$lname."','".$type."','".$recoverykey."')"    ); 
if (mysql_query($sql,$con)) {
    header("Location:manage-users.php?status=1"); 
    exit();   // ;)
} else {
    header("Location: manage-uesrs.php?status=ErrorInSQL");
    exit();   // ;)
} 
```

但是，正如 xQbert 所建议的，您最好的方法是在一个查询中。

在“电子邮件”字段的数据库中创建一个“唯一”索引。

```
// Validate you have an valid email
if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
     header("Location: manage-uesrs.php?status=ErrorInSQL");    // Note: location should take a full URL. This works in all browsers I know of, but is not strictly correct.
     exit();  // Critical - otherwise you script will continue to run.
}

// Than sanatize your data. Use PDO or mysql; for for now I'll use your code
$email = mysql_real_escape_string($email);
// Repeat for the other fields

// Dive traight into the SQL
// Remmber mysql_real_escape_string on all variables (or use PDO / mysqli prepared statements)
$sql=("INSERT INTO accounts VALUES   (NULL,'".$email."','".$encpwd."','".$fname."','".$lname."','".$type."','".$recoverykey."')"    ); 
if (mysql_query($sql,$con)) {
    header("Location:manage-users.php?status=1"); 
    exit();   // ;)
} else {
    // This could error because it is in use, or you have error in your sql. So debug with mysql_error() initially to get your SQL correct, then when you're sure that is right, assume any error is duplicate e-mail. You could alsocheck with with mysql error codes to be extra safe.  
    header("Location: manage-uesrs.php?status=AlreadyInUse");
    exit();   // ;)
} 
```

# java - 从 jpanel 中删除特定组件

> ID：12469046
> 
> 赞同：3
> 
> 时间：2012-09-18T00:57:10.017
> 
> 标签：java, swing, jgoodies

如何从 jpanel 中删除组件。在下面的代码中，文本字段是根据 val 创建的。这对于创建工作正常。但是当微调器中的值降低时，文本字段也应该减少。

我试图从数组 txtField 中删除所有组件并且没有工作。

```
int val = (int) textFieldGen.getModel().getValue(); //getting the value from JSpinner

JTextField[] txtField = new JTextField[val]; 

//tried panel.revalidate(); panel.repaint();

//removing elements if exists.  gives null pointer exception.  

try {
     for (JTextField txtComp : txtField) {
       panel.remove(txtComp);
    }
} catch (Exception ex) {
        System.out.println(ex);
}

panel.revalidate();
panel.repaint();

//creating    
int row = 1;
for (int i = 0; i < txtField.length; i++) {
    row++;           
    layout.appendRow(RowSpec.decode("30px"));
    txtField[i] = new JTextField(10);
    panel.add(txt[i], cc.xy(4, row));
}
panel.revalidate();
panel.repaint(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:01:42.390

我看不到您`remove(...)`在“面板”JPanel 上调用的位置，因此我不知道您如何删除 JTextFields。一些建议：

*   如果您必须走您提议的当前路线，请使用单个专用容器 JPanel，该容器将 JTextFields 保存在 GridLayout 中并且不包含其他组件。
*   在添加新组件之前删除所有组件（如果这是您需要做的）
*   在移除和添加之后调用`revalidate()`容器 JPanel 上的和“repaint()”。
*   考虑改为使用 JTable，您只需添加或删除行。在我看来，这将是解决此类问题的最简单和最干净的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:12:45.800

Why not simply have a method accepting the number of `JTextField`s you want and let it return a `JPanel` with the correct number of needed `JTextField`s already added to the `JPanel` with appropriate layout and all:

```
public JPanel createPanel(int numberOfTextFields) {
    JPanel panel=new JPanel(new ...);//create new panel

    JTextField tfs[]=new JTextField[numberOfTextFields];//create array of textFields

    for(int i=0;i<numberOfTextFields;i++) {
        tfs[i]=new JTextField();//create the textfield
        panel.add(tfs[i]...);//add it to the panel
    }

    return panel;
} 
```

and simply remove the last `JPanel` from the `JFrame`s *contentPane*.

Or empty the `JFrame` again using: `getContentPane().removeAll();` and add the new `JPanel` to it and the `JPanel` which contains the *user controls*, though the *user controls* panel wont have to be re-created each time.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T02:53:29.433

`JTextField[] txtField = new JTextField[val];`

This line does NOT init the array, just creates one with a count of val. The elements are null by default, hence throwing the `NullPointerException` when you iterate the array with the for-each loop.

You need to initialize the array with valid `JTextField` objects.

# jquery - 尝试在屏幕中放置灯箱图像 + 标题

> ID：12469059
> 
> 赞同：0
> 
> 时间：2012-09-18T00:59:59.447
> 
> 标签：jquery, css, image, lightbox

我的网站上有一个灯箱，但大图像适合屏幕高度，遮挡了下面的标题。理想情况下，我希望灯箱在顶部和底部留下大约 20 像素。

谢谢任何人的帮助。

CSS：

```
#lightbox{
 background-color:#ffffff;
  font-family: 'Source Sans Pro', sans-serif;
  font-size:12pt;
 }

#lightboxDetails{
 font-size: 0.8em;
 } 

#lightboxCaption{ 
  float: left; padding:5px; 
}

#keyboardMsg {
  float: left; 
  clear:both;
  margin:10px 0 10px 0;
  padding:0 0px 0 5px;
}

#closeButton{ 
top: 5px; right: 5px; 
  display:none;
}

#lightbox img{ 
  border: none; 
  clear: both;
}

#overlay img{ border: none; }

#overlay{ 
background: rgba(0, 0, 0, 0.6);
 }

* html #overlay{
 background-color: #333;
 background-color: transparent;
 filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://2.bp.blogspot.com/-IuRWmtxsbLg/TlDQr1esv2I/AAAAAAAABTw/FiWsnpa0Gcw/s320/overlay.png", sizingMethod="scale");
 }

#overlay img { 
  border: none; 
}

#overlay { 
  background-image: url(http://1.bp.blogspot.com/-B6R41EjOobU/TrZkBklKcrI/AAAAAAAAEk8/dBzVL1ojJSY/s1600/overlay.png); 
}

* html #overlay{
 background-color: #333;
 background-color: transparent;
 filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://2.bp.blogspot.com/-IuRWmtxsbLg/TlDQr1esv2I/AAAAAAAABTw/FiWsnpa0Gcw/s320/overlay.png", sizingMethod="scale");
 } 
```

JS：

```
/*
        Lightbox JS: Fullsize Image Overlays 
        by Lokesh Dhakar - http://www.huddletogether.com

        For more information on this script, visit:
        http://huddletogether.com/projects/lightbox/

        Script featured on Dynamic Drive code library Jan 24th, 06':
        http://www.dynamicdrive.com

        Licensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
        (basically, do anything you want, just leave my name and link)

        Table of Contents
        -----------------
        Configuration

        Functions
        - getPageScroll()
        - getPageSize()
        - pause()
        - getKey()
        - listenKey()
        - showLightbox()
        - hideLightbox()
        - initLightbox()
        - addLoadEvent()

        Function Calls
        - addLoadEvent(initLightbox)

*/

//
// Configuration
//

// If you would like to use a custom loading image or close button reference them in the next two lines.
var loadingImage = 'http://1.bp.blogspot.com/-7uyXRys2Ccg/TlDQrr-E84I/AAAAAAAABTo/n11es5Xv_gQ/s1600/loading.gif';               
var closeButton = 'http://1.bp.blogspot.com/-S8A4KmUkK-A/TlDQraUx5wI/AAAAAAAABTg/DojRZ4VPmp4/s320/close.gif';           

//
// getPageScroll()
// Returns array with x,y page scroll values.
// Core code from - quirksmode.org
//
function getPageScroll(){

        var yScroll;

        if (self.pageYOffset) {
                yScroll = self.pageYOffset;
        } else if (document.documentElement && document.documentElement.scrollTop){      // Explorer 6 Strict
                yScroll = document.documentElement.scrollTop;
        } else if (document.body) {// all other Explorers
                yScroll = document.body.scrollTop;
        }

        arrayPageScroll = new Array('',yScroll) 
        return arrayPageScroll;
}

//
// getPageSize()
// Returns array with page width, height and window width, height
// Core code from - quirksmode.org
// Edit for Firefox by pHaez
//
function getPageSize(){

        var xScroll, yScroll;

        if (window.innerHeight && window.scrollMaxY) {  
                xScroll = document.body.scrollWidth;
                yScroll = window.innerHeight + window.scrollMaxY;
        } else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
                xScroll = document.body.scrollWidth;
                yScroll = document.body.scrollHeight;
        } else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
                xScroll = document.body.offsetWidth;
                yScroll = document.body.offsetHeight;
        }

        var windowWidth, windowHeight;
        if (self.innerHeight) { // all except Explorer
                windowWidth = self.innerWidth;
                windowHeight = self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
                windowWidth = document.documentElement.clientWidth;
                windowHeight = document.documentElement.clientHeight;
        } else if (document.body) { // other Explorers
                windowWidth = document.body.clientWidth;
                windowHeight = document.body.clientHeight;
        }       

        // for small pages with total height less then height of the viewport
        if(yScroll < windowHeight){
                pageHeight = windowHeight;
        } else { 
                pageHeight = yScroll;
        }

        // for small pages with total width less then width of the viewport
        if(xScroll < windowWidth){      
                pageWidth = windowWidth;
        } else {
                pageWidth = xScroll;
        }

        arrayPageSize = new Array(pageWidth,pageHeight,windowWidth,windowHeight) 
        return arrayPageSize;
}

//
// pause(numberMillis)
// Pauses code execution for specified time. Uses busy code, not good.
// Code from http://www.faqts.com/knowledge_base/view.phtml/aid/1602
//
function pause(numberMillis) {
        var now = new Date();
        var exitTime = now.getTime() + numberMillis;
        while (true) {
                now = new Date();
                if (now.getTime() > exitTime)
                        return;
        }
}

//
// getKey(key)
// Gets keycode. If 'x' is pressed then it hides the lightbox.
//

function getKey(e){
        if (e == null) { // ie
                keycode = event.keyCode;
        } else { // mozilla
                keycode = e.which;
        }
        key = String.fromCharCode(keycode).toLowerCase();

        if(key == 'x'){ hideLightbox(); }
}

//
// listenKey()
//
function listenKey () { document.onkeypress = getKey; }

//
// showLightbox()
// Preloads images. Pleaces new image in lightbox then centers and displays.
//
function showLightbox(objLink)
{
        // prep objects
        var objOverlay = document.getElementById('overlay');
        var objLightbox = document.getElementById('lightbox');
        var objCaption = document.getElementById('lightboxCaption');
        var objImage = document.getElementById('lightboxImage');
        var objLoadingImage = document.getElementById('loadingImage');
        var objLightboxDetails = document.getElementById('lightboxDetails');

        var arrayPageSize = getPageSize();
        var arrayPageScroll = getPageScroll();

        // center loadingImage if it exists
        if (objLoadingImage) {
                objLoadingImage.style.top = (arrayPageScroll[1] + ((arrayPageSize[3] - 35 - objLoadingImage.height) / 2) + 'px');
                objLoadingImage.style.left = (((arrayPageSize[0] - 20 - objLoadingImage.width) / 2) + 'px');
                objLoadingImage.style.display = 'block';
        }

        // set height of Overlay to take up whole page and show
        objOverlay.style.height = (arrayPageSize[1] + 'px');
        objOverlay.style.display = 'block';

        // preload image
        imgPreload = new Image();

        imgPreload.onload=function(){
                objImage.src = objLink.href;

                // center lightbox and make sure that the top and left values are not negative
                // and the image placed outside the viewport
                var lightboxTop = arrayPageScroll[1] + ((arrayPageSize[3] - 35 - imgPreload.height) / 2);
                var lightboxLeft = ((arrayPageSize[0] - 20 - imgPreload.width) / 2);

                objLightbox.style.top = (lightboxTop < 0) ? "0px" : lightboxTop + "px";
                objLightbox.style.left = (lightboxLeft < 0) ? "0px" : lightboxLeft + "px";

                objLightboxDetails.style.width = imgPreload.width + 'px';

                if(objLink.getAttribute('title')){
                        objCaption.style.display = 'block';
                        //objCaption.style.width = imgPreload.width + 'px';
                        objCaption.innerHTML = objLink.getAttribute('title');
                } else {
                        objCaption.style.display = 'none';
                }

                // A small pause between the image loading and displaying is required with IE,
                // this prevents the previous image displaying for a short burst causing flicker.
                if (navigator.appVersion.indexOf("MSIE")!=-1){
                        pause(250);
                } 

                if (objLoadingImage) {  objLoadingImage.style.display = 'none'; }
                objLightbox.style.display = 'block';

                // After image is loaded, update the overlay height as the new image might have
                // increased the overall page height.
                arrayPageSize = getPageSize();
                objOverlay.style.height = (arrayPageSize[1] + 'px');

                // Check for 'x' keypress
                listenKey();

                return false;
        }

        imgPreload.src = objLink.href;

}

//
// hideLightbox()
//
function hideLightbox()
{
        // get objects
        objOverlay = document.getElementById('overlay');
        objLightbox = document.getElementById('lightbox');

        // hide lightbox and overlay
        objOverlay.style.display = 'none';
        objLightbox.style.display = 'none';

        // disable keypress listener
        document.onkeypress = '';
}

//
// initLightbox()
// Function runs on window load, going through link tags looking for rel="lightbox".
// These links receive onclick events that enable the lightbox display for their targets.
// The function also inserts html markup at the top of the page which will be used as a
// container for the overlay pattern and the inline image.
//
function initLightbox()
{

        if (!document.getElementsByTagName){ return; }
        var anchors = document.getElementsByTagName("a");

        // loop through all anchor tags
        for (var i=0; i<anchors.length; i++){
                var anchor = anchors[i];

                if (anchor.getAttribute("href") && (anchor.getAttribute("rel") == "lightbox")){
                        anchor.onclick = function () {showLightbox(this); return false;}
                }
        }

        // the rest of this code inserts html at the top of the page that looks like this:
        //
        // <div id="overlay">
        //              <a href="#" onclick="hideLightbox(); return false;"><img id="loadingImage" /></a>
        //      </div>
        // <div id="lightbox">
        //              <a href="#" onclick="hideLightbox(); return false;" title="Click anywhere to close image">
        //                      <img id="closeButton" />                
        //                      <img id="lightboxImage" />
        //              </a>
        //              <div id="lightboxDetails">
        //                      <div id="lightboxCaption"></div>
        //                      <div id="keyboardMsg"></div>
        //              </div>
        // </div>

        var objBody = document.getElementsByTagName("body").item(0);

        // create overlay div and hardcode some functional styles (aesthetic styles are in CSS file)
        var objOverlay = document.createElement("div");
        objOverlay.setAttribute('id','overlay');
        objOverlay.onclick = function () {hideLightbox(); return false;}
        objOverlay.style.display = 'none';
        objOverlay.style.position = 'absolute';
        objOverlay.style.top = '0';
        objOverlay.style.left = '0';
        objOverlay.style.zIndex = '90';
        objOverlay.style.width = '100%';
        objBody.insertBefore(objOverlay, objBody.firstChild);

        var arrayPageSize = getPageSize();
        var arrayPageScroll = getPageScroll();

        // preload and create loader image
        var imgPreloader = new Image();

        // if loader image found, create link to hide lightbox and create loadingimage
        imgPreloader.onload=function(){

                var objLoadingImageLink = document.createElement("a");
                objLoadingImageLink.setAttribute('href','#');
                objLoadingImageLink.onclick = function () {hideLightbox(); return false;}
                objOverlay.appendChild(objLoadingImageLink);

                var objLoadingImage = document.createElement("img");
                objLoadingImage.src = loadingImage;
                objLoadingImage.setAttribute('id','loadingImage');
                objLoadingImage.style.position = 'absolute';
                objLoadingImage.style.zIndex = '150';
                objLoadingImageLink.appendChild(objLoadingImage);

                imgPreloader.onload=function(){};       //      clear onLoad, as IE will flip out w/animated gifs

                return false;
        }

        imgPreloader.src = loadingImage;

        // create lightbox div, same note about styles as above
        var objLightbox = document.createElement("div");
        objLightbox.setAttribute('id','lightbox');
        objLightbox.style.display = 'none';
        objLightbox.style.position = 'absolute';
        objLightbox.style.zIndex = '100';       
        objBody.insertBefore(objLightbox, objOverlay.nextSibling);

        // create link
        var objLink = document.createElement("a");
        objLink.setAttribute('href','#');
        objLink.setAttribute('title','Click to close');
        objLink.onclick = function () {hideLightbox(); return false;}
        objLightbox.appendChild(objLink);

        // preload and create close button image
        var imgPreloadCloseButton = new Image();

        // if close button image found, 
        imgPreloadCloseButton.onload=function(){

                var objCloseButton = document.createElement("img");
                objCloseButton.src = closeButton;
                objCloseButton.setAttribute('id','closeButton');
                objCloseButton.style.position = 'absolute';
                objCloseButton.style.zIndex = '200';
                objLink.appendChild(objCloseButton);

                return false;
        }

        imgPreloadCloseButton.src = closeButton;

        // create image
        var objImage = document.createElement("img");
        objImage.setAttribute('id','lightboxImage');
        objLink.appendChild(objImage);

        // create details div, a container for the caption and keyboard message
        var objLightboxDetails = document.createElement("div");
        objLightboxDetails.setAttribute('id','lightboxDetails');
        objLightbox.appendChild(objLightboxDetails);

        // create caption
        var objCaption = document.createElement("div");
        objCaption.setAttribute('id','lightboxCaption');
        objCaption.style.display = 'none';
        objLightboxDetails.appendChild(objCaption);

        // create keyboard message
        var objKeyboardMsg = document.createElement("div");
        objKeyboardMsg.setAttribute('id','keyboardMsg');
        objKeyboardMsg.innerHTML = '(Click anywhere to close.)';
        objLightboxDetails.appendChild(objKeyboardMsg);

}

//
// addLoadEvent()
// Adds event to window.onload without overwriting currently assigned onload functions.
// Function found at Simon Willison's weblog - http://simon.incutio.com/
//
function addLoadEvent(func)
{       
        var oldonload = window.onload;
        if (typeof window.onload != 'function'){
        window.onload = func;
        } else {
                window.onload = function(){
                oldonload();
                func();
                }
        }

}

addLoadEvent(initLightbox);     // run initLightbox onLoad 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:08:30.277

您可以获取视口的值并从中减去 20 个像素。可能将图像包装在容器周围并将该值应用为图像容器的高度，然后将图像设置为高度 100% 以便缩放。

```
var windowHeight = $(window).height();
var imgHeight = windowHeight - 20;

$('.yourlightboximagecontainer').css('height',''+imgHeight+'px'); 
```

html更改：

```
<div class="yourlightboximagecontainer">
 <img src="yourlightboximage" />
</div> 
```

然后只需 css 图像填充容器的 100% 高度。不确定这是否适用于 Firefox，因为它以不同的方式处理图像大小调整。

# c# - 使用互斥锁锁定对象

> ID：12469061
> 
> 赞同：2
> 
> 时间：2012-09-18T01:00:17.580
> 
> 标签：c#, object, mutex

我有一个应用程序创建了一个需要锁定的对象，因为该对象创建了一个外部硬件设备对象（通过第三方 DLL），并且硬件设备对象只能创建一次。当启动此应用程序的多个实例时，只有第一个实例应该能够创建此 C# 对象。子序列实例应该看到对象已被锁定并且无法创建对象。我使用了互斥体，因为此对象创建发生在多个应用程序实例（多个进程）中。但是，该代码不会与互斥锁一起锁定。我是否正在运行多个实例，每个实例都创建自己的锁？

```
public sealed class MyObject
{
    private static MyObject _myObject;
    static ExtDeviceDriver devDrv;
    private readonly static Mutex mut = new Mutex();

    private MyObject()
    {
        mut.WaitOne();
        //Thread safe code here.
        devDrv = new ExtDeviceDriver();
    }

    ~MyObject()
    {
        mut.ReleaseMutex();
    }

    // object accessor
    public static MyObject GetMyObject
    {
        get
        {
            if (_myObject == null)
                _myObject = new MyObject();
            return _myObject;   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:07:35.050

我想您应该使用命名互斥锁（[请参阅 MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/hw29w7t1%28v=vs.90%29.aspx)）。

> 互斥体有两种类型：本地互斥体和命名系统互斥体。如果使用接受名称的构造函数创建 Mutex 对象，则它与该名称的操作系统对象相关联。命名系统互斥锁在整个操作系统中都是可见的，并且可以用于同步进程的活动。您可以创建多个 Mutex 对象来表示相同的命名系统互斥体，并且可以使用 OpenExisting 方法打开现有的命名系统互斥体。

所以，尝试使用这个[构造函数](http://msdn.microsoft.com/en-us/library/f55ddskf%28v=vs.90%29.aspx)来创建一个命名的 Mutex。除了你应该检查它是否已经存在于[Mutex.OpenExisting 方法](http://msdn.microsoft.com/en-us/library/c41ybyt3%28v=vs.90%29.aspx)（考虑这篇文章中给出的例子；它告诉如何检查、创建、利用一个命名的互斥锁）。

**编辑**

见[互斥类](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)：

> 您可以使用 WaitHandle.WaitOne 方法来请求互斥体的所有权。拥有互斥锁的线程可以在对 WaitOne 的重复调用中请求相同的互斥锁，而不会阻塞其执行。但是，线程必须调用 ReleaseMutex 方法相同的次数才能释放互斥锁的所有权。Mutex 类强制执行线程标识，因此互斥锁只能由获取它的线程释放。

和[Mutex Constructor (Boolean, String)](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)，也就是说，必须将 bool 参数设置为：

> 如果命名系统互斥体是作为此调用的结果创建的，则为调用线程授予命名系统互斥体的初始所有权；否则为假。

# ruby-on-rails - 如何获得多态关系的另一面

> ID：12469065
> 
> 赞同：2
> 
> 时间：2012-09-18T01:00:55.180
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations

我有以下内容：

```
class Item < ActiveRecord::Base
  # assets
  has_many :assets, :as => :assetable, :dependent => :destroy

class Asset < ActiveRecord::Base
  belongs_to :assetable, :polymorphic => true 
```

并希望能够做到：

```
a=Asset.find(5)
a.item  # no dice 
```

我将如何获得以资产开头的关联项目？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:12:30.053

为了获取关联的项目，您需要使用您在 Asset 类中设置的关系名称。由于您已将此关系声明为`:assetable`，因此您需要将该项目称为“资产”。

假设您根据[Rails 指南](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)正确设置了数据库，您应该能够执行以下操作：

```
a=Asset.find(5)
a.assetable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:25:18.523

当您创建多态模型（在您的情况下为资产）时，相应的表必须同时具有 _id 和 _type 列才能引用相关的多态记录。在您的情况下，该资产记录需要具有assetable_id 和assetable_type（等于“Item”的字符串）。然后，当您调用 a.item 时，模型知道在“Item”表中查找 id ==assetable_id 的记录。

# c++ - “cout”无法处理汉字

> ID：12469068
> 
> 赞同：2
> 
> 时间：2012-09-18T01:01:30.043
> 
> 标签：c++, character, cout

我的代码很简单：

```
#include <iostream>
using namespace std;
//Some codes here...
bool somefunction(){
    cout<<"单元格";
    return false;
} 
```

这就是我得到的：

```
错误 C2143：语法错误：缺少“；” 在“返回”之前；
错误 C2001：换行符是常量；

```

此外，如果我改成`"单元格"`“cell”之类的英文版本，它就可以完美运行；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:07:57.237

编译器错误表明您的编译器不支持源代码中的 Unicode 字符。您必须转义它们，使用宽字符常量，并且`wcout`：

```
wcout << L"\x5355\x5143\x683c"; 
```

如果您需要以特定编码（例如 gb2312）输出字符，请在字符串文字中使用该编码：

```
cout << "\xb5\xa5\xd4\xaa\xb8\xf1"; // string encoded with GB2312 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:06:05.070

要使用非英语字符集，您应该使用`std::wcout`打印宽字符，像这样

```
#include <iostream>
using namespace std;
//Some codes here...
bool somefunction(){
  wcout<< L"单元格";
  return false;
} 
```

`cout`并确保不要`wcout`在同一个程序中混合使用两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T01:08:29.467

使用 wcout 和 Unicode 文字（L“单元格”）。即使您只处理英文字符，这也是一种很好的做法。也使用 wstring。

编辑：实际上另一个问题可能是您以非Unicode编码存储文件，因此字符丢失。告诉您的编辑器将文件存储为 Unicode。

另一个问题可能是控制台（或 wcout）没有正确显示 Unicode 字符。如果将它们显示在消息框中（使用 MessageBoxW），它们将正确显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-30T09:57:37.757

您应该始终将源代码保存为带有 BOM 的 UTF-8。

# xml - 将斜体 XML 标签转换为 WordML 标签

> ID：12469071
> 
> 赞同：2
> 
> 时间：2012-09-18T01:01:43.443
> 
> 标签：xml, xslt, wordml

我只需要使用此表单（无需处理指令）将 XML 文档转换为 WordML 文档（如果可以称之为简单的话！）：

```
<body>
    <p>
        <r>This is the <italic>standard</italic> text run.</r> 
    </p>
</body> 
```

根据 WordML 文档，转换后的 XML 应如下所示：

```
<w:body>
    <w:p>
        <w:r>
            <w:t>This is the </w:t> 
        </w:r>
    </w:p>
    <w:p>
        <w:pPr>
            <w:i/>
        </w:pPr>
        <w:r>
            <w:t>standard</w:t> 
        </w:r>
    </w:p>
    <w:p>
        <w:r>
            <w:t> text run.</w:t> 
        </w:r>
    </w:p>
</w:body> 
```

我应该如何创建 XSLT 转换以正确处理斜体标签？？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:13:31.463

对于像提供的示例一样简单的输入，以下样式表将起作用。使用经过修改的[身份转换](http://en.wikipedia.org/wiki/Identity_transform)`<italics>`和和的专用模板`r/text()`。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
        xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml">
    <xsl:output indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:apply-templates select="@*|node()"/>
    </xsl:template>

    <xsl:template match="body">
        <w:body>
            <xsl:apply-templates/>
        </w:body>
    </xsl:template>

  <xsl:template match="r/text()">
      <w:p>
          <w:r>
              <w:t><xsl:value-of select="."/></w:t> 
          </w:r>
      </w:p>
  </xsl:template>

    <xsl:template match="r/italic">
        <w:p>
            <w:pPr>
                <w:i/>
            </w:pPr>
            <w:r>
                <w:t><xsl:value-of select="."/></w:t> 
            </w:r>
        </w:p>
    </xsl:template>  

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:04:02.400

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="some:w" exclude-result-prefixes="w">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="body">
  <w:body>
   <xsl:apply-templates/>
  </w:body>
 </xsl:template>

 <xsl:template match="p/r/text()">
    <w:p>
        <w:r>
            <w:t><xsl:value-of select="."/></w:t>
        </w:r>
    </w:p>
 </xsl:template>

 <xsl:template match="p/r/italic/text()">
    <w:p>
        <w:pPr>
            <w:i/>
        </w:pPr>
        <w:r>
            <w:t><xsl:value-of select="."/></w:t>
        </w:r>
    </w:p>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<body>
    <p>
        <r>This is the <italic>standard</italic> text run.</r>
    </p>
</body> 
```

**产生想要的正确结果：**

```
<w:body xmlns:w="some:w">
   <w:p>
      <w:r>
         <w:t>This is the </w:t>
      </w:r>
   </w:p>
   <w:p>
      <w:pPr>
         <w:i/>
      </w:pPr>
      <w:r>
         <w:t>standard</w:t>
      </w:r>
   </w:p>
   <w:p>
      <w:r>
         <w:t> text run.</w:t>
      </w:r>
   </w:p>
</w:body> 
```

# qt - 是否可以通过 QNetworkAccessManager 检测可恢复链接

> ID：12469072
> 
> 赞同：3
> 
> 时间：2012-09-18T01:01:56.627
> 
> 标签：qt, network-programming

假设我想暂停下载，然后重新开始。我们可以事先知道链接是否可以恢复。我的意思是这些信息可用于标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:54:20.347

如果您想在开始下载之前知道这一点，您可以发送 HEAD 请求并检查标头中是否存在“Accept-Ranges: bytes”字段。

`QNetworkAccessManager`确实包含一些代码来处理网络会话中断时的恢复，但不幸的是它不是公共 API 的一部分。

# scala - 条件路由/路由和播放 2.0

> ID：12469078
> 
> 赞同：3
> 
> 时间：2012-09-18T01:03:46.903
> 
> 标签：scala, playframework, playframework-2.0

在 Play1.x 中，可以使用以下语法定义一些条件路由：

```
%{ if (play.id == "test") }%

GET     /test/derp website.nonproduction.DerpController.index
... 
```

%{...}% 语法无法在 Play2 上编译，我似乎在文档中找不到任何讨论条件路由的内容。有任何想法吗？

在此先感谢您的 Play2 迁移，祝您好运！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:19:19.837

Play 2.0 中的路由编译为一个类并且不能是动态的。但是，您可以包装任何开发/敏感端点的 Action 块。

您可以实现类似 Zentasks 的`Secured`特性：[https ://github.com/playframework/Play20/blob/master/samples/scala/zentasks/app/controllers/Application.scala](https://github.com/playframework/Play20/blob/master/samples/scala/zentasks/app/controllers/Application.scala)

具体来说，检查是否播放！正在生产模式下运行，您可以检查`Play.application().isProd`.

# cocos2d-iphone - 如何为 CCAction 的每一帧设置回调？

> ID：12469090
> 
> 赞同：0
> 
> 时间：2012-09-18T01:06:39.397
> 
> 标签：cocos2d-iphone

我想要做：

```
id action = [CCScaleTo actionWithDuration:0.5 scaleX:self.Xposition scaleY:1];
id ease   = [CCEaseInOut actionWithAction:action rate:4];

[someObject[i] runAction:ease]; 
```

但我希望能够挂钩到动作的每一帧来做一些事情......我想知道除了在 someObject 上创建更新方法之外是否有任何方法可以完成此操作？我试图避免这样做，因为它是一个 CCSprite，而且我目前没有它的对象包装器。它实际上只是在标题中定义为 CCSprite *someObject[4] 之类的东西......所以我只是想知道是否有任何方法可以在 runAction 的上下文中指定每帧回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:00:05.290

没有本地方法可以做到这一点。

如果这是您真正想要做的而不是使用更新方法，您可以创建一个类似于 Ease 操作工作方式的类。将另一个操作作为参数并覆盖更新以修改其行为。

例如，如果您将其命名为 CCCallBackAction，它将按如下方式创建：

```
id action = [CCScaleTo actionWithDuration:0.5 scaleX:self.Xposition scaleY:1];
id ease   = [CCEaseInOut actionWithAction:action rate:4];
id callback = [CCCallBackAction actionWithAction:ease target:self selector:@selector(callback:)];

[someObject[i] runAction:callback]; 
```

在 CCCallBackAction 你会覆盖更新

```
- (void)update:(ccTime)dt
{
     [target performSelector:SEL];
     [other update:dt];
} 
```

* * *

***注意避免误解：** CCCallBackAction 不是 cocos2d 类，在这个例子中是假设的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:06:46.020

块来救援！！！:)

```
id action = [CCScaleTo actionWithDuration:0.5 scaleX:self.Xposition scaleY:1];
id ease   = [CCEaseInOut actionWithAction:action rate:4];
id call = [CCCallBlockN actionWithBlock:^(CCNode* node) {
    // node is the sprite, you may have to cast it:
    CCSprite* someSprite = (CCSprite*)node;

    // do whatever you need to do with sprite here…
    someSprite.opacity = CCRANDOM_0_1() * 255;
}];
id sequence = [CCSequence actions:action, ease, call, nil];

[someObject[i] runAction:sequence]; 
```

或者，您也可以简单地使用 someObject[i] 数组，甚至可以访问其他精灵：

```
id action = [CCScaleTo actionWithDuration:0.5 scaleX:self.Xposition scaleY:1];
id ease   = [CCEaseInOut actionWithAction:action rate:4];
id call = [CCCallBlock actionWithBlock:^{
    CCSprite* someSprite = someObject[i];
    CCSprite* firstSprite = someObject[0];

    // do whatever you need to do with sprite here…
}];
id sequence = [CCSequence actions:action, ease, call, nil];

[someObject[i] runAction:sequence]; 
```

# ember.js - ember.js - 待办事项示例

> ID：12469091
> 
> 赞同：1
> 
> 时间：2012-09-18T01:06:42.760
> 
> 标签：ember.js

我正在尝试通过本教程学习 ember - [http://www.tuanleaded.com/blog/2012/04/getting-started-with-ember-js-the-missing-to-dos-manual/](http://www.tuanleaded.com/blog/2012/04/getting-started-with-ember-js-the-missing-to-dos-manual/) 我有以下 html 和 javascript 但是当我运行它并输入一个待办事项时，然后输入一个回车键，它只会在列表中添加一个复选框，而不是在复选框旁边放置一个带有待办事项标题的标签。我注意到示例中 ember.js 附带的 todo 项目做同样的事情，我不知道为什么。

这是html。

```
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]--> <!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]--> <!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="stylesheet" href="css/style.css?v=2">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <script type="text/x-handlebars">
    {{view Todos.CreateToDoView id="new-todo" placeholder="What needs to be done?"}}

    {{#collection contentBinding="Todos.todosController" tagName="ul" itemClassBinding="content.isDone"}}
        {{view Em.Checkbox titleBinding="content.title" valueBinding="content.isDone"}}
    {{/collection}}
  </script>

  <!-- The missing protocol means that it will match the current protocol, either http or https. If running locally, we use the local jQuery. -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
  <script src="js/libs/ember-1.0.pre.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html> 
```

这是我的 app.js 文件...

```
/*models*/

var Todos = Em.Application.create();

Todos.Todo = Em.Object.extend({
    title: null,
    isDone: false
});

/*controller*/

Todos.todosController = Em.ArrayProxy.create({
    content:[],

    createTodo: function(title){
        var todo = Todos.Todo.create({ title: title });
        this.pushObject(todo);  
    }
});

/*views*/

Todos.CreateToDoView = Em.TextField.extend({
    insertNewline : function(){
        var value = this.get("value");

        if (value){
            Todos.todosController.createTodo(value);
            this.set("value","");   
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:05:26.230

```
{{#collection contentBinding="Todos.todosController" tagName="ul" itemClassBinding="content.isDone"}}
     {{view Em.Checkbox titleBinding="content.title" valueBinding="content.isDone"}}
{{/collection}} 
```

您在这里所做的只是显示一个复选框。Ember.Checkbox 没有标题或标题绑定的概念。如果您只是`{{view.content.title}}`在该复选框旁边添加，您会在它旁边看到标题显示。

请参阅 Ember.Checkbox 了解它的支持/功能：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/checkbox.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/checkbox.js)

**更新：**

我已经改变了你的小提琴工作。很多小改动，如果您有任何问题，请告诉我：http: [//jsfiddle.net/WKn3P/2/](http://jsfiddle.net/WKn3P/2/)

# sql - 如何让 Rails 在数据库停机后自动重新建立数据库连接

> ID：12469094
> 
> 赞同：18
> 
> 时间：2012-09-18T01:07:28.700
> 
> 标签：sql, ruby-on-rails, database-connection

在数据库停机后，Rails 将首先抛出一次此错误：

> ActiveRecord::StatementInvalid: NativeException: org.postgresql.util.PSQLException: 连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。

从那时起，每个数据库调用都会出现以下错误，即使在数据库备份之后：

> ActiveRecord::StatementInvalid: ActiveRecord::JDBCError: 此连接已关闭。

为了让服务器再次运行，我必须重新启动 rails 服务器。这对我们来说并不理想，因为我们的产品工程师希望对我们的数据库进行维护，而不必同时恢复所有依赖于数据库的服务。所以，我想知道 - 有没有办法自动让 Rails 尝试重新建立数据库连接或推荐的方法来获得这种行为？

我尝试过的事情：

我已经尝试在我的数据库选项中将 reconnect 设置为 true，这样，我可以终止单个数据库连接，并且 rails 将重新建立连接。但是，它不会在数据库中断之后。我发现从命令控制台我可以通过调用来恢复连接

> ActiveRecord::Base::建立连接

所以也许找到一个干净的地方让rails调用上面的命令这会起作用吗？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:09:42.983

我对 Mysql2Adapter 有同样的问题。我通过一个很长的查询复制了失败`User.find_all_by_id((1..1000000).to_a)`：从现在开始，所有 ActiveRecord 请求都失败（User.first 失败）

这是我解决它的方法：

问题很简单：每当遇到上述异常时，我们都想重新建立连接并重试。我们通过给execute方法起别名，用begin rescue包装它，并在rescue中重新建立数据库连接来解决这个问题。

对于 Mysql，代码在 Mysql2Adapter 中，下面是修复：

将此代码放在 config/initializers/active_record.rb

```
module ActiveRecord
  module ConnectionAdapters
    class Mysql2Adapter < AbstractMysqlAdapter
      alias_method :old_execute, :execute

      def execute(sql, name=nil)
        begin
          old_execute(sql, name)
        rescue ActiveRecord::StatementInvalid
          # you can do some logging here

          ActiveRecord::Base.establish_connection

          old_execute(sql, name)
        end
      end
    end
  end
end 
```

您需要对 postgres 适配器执行相同的操作。

[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb)

我认为由于 select 是最常用的查询，您可以为 select 设置别名，一旦失败，连接就会重新建立。

您想创建一个初始化程序 (config/initializers/active_record.rb) 和别名 select_rows （它可能是别的东西，只需找到正确的方法并修补它。它可能是 async_exec 或执行，我对 Postgres 的研究不多适配器）在：

```
module ConnectionAdapters::PostgreSQLAdapter
      module DatabaseStatements
      end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:04:40.007

这是一个非常丑陋的解决方案，但我认为它应该有效。

*   将 reconnect 设置为 true，就像您之前所做的那样。

*   编辑文件`activerecord-X.Y.Z/lib/active_record/connection_adapters/postgresql_adapter.rb`并更改`reconnect!`方法说

    ```
    def reconnect!
      clear_cache!
      ActiveRecord::Base.establish_connection
    end 
    ```

### 需要更多的研究

*   检查它是否真的有效
*   检查它是否没有同时多次调用建立连接（在这种情况下你需要一个锁）
*   检查是否有更好的地方放置此代码。Ruby 允许您在运行时重新定义任何方法，但您需要加载符号。换句话说，您需要存在 PostgreSQLAdapter 类。我最接近加载该符号的是`config/environment.rb`after `initialize!`，但堆栈中的深度仍不足以加载该符号。

如果您确实在 ActiveRecord 代码之外找到了已加载符号的位置，并且您可以编辑其方法，则将以下代码放入其中：

```
class ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::StatementPool
  def reconnect!
    clear_cache!
    ActiveRecord::Base.establish_connection
  end
end 
```

更重要的是，实际调用`establish_connection`. 可以在该方法中调用*重要的东西*，以避免一些开销。

让我知道这是否有帮助，以及您是否取得了任何进展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:17:24.133

我不确定如何完全按照您的要求进行操作，但我有另一个“流程”建议：设置简单的脚本，以便您的产品工程师可以轻松地停止和启动所有应用程序。

开发一组 capistrano 配方（或其他脚本），您的产品工程师可以使用它们来停止和启动所有应用程序。对于一个普通的 Rails 应用程序，您真正需要做的就是放置一个维护页面，以便 nginx 或 apache 为该页面提供服务，而不是将请求转发到 rails 实例。理想情况下，rails worker 停止接收请求，db 关闭，db 出现，然后维护页面被删除，workers 再次收到请求，从来没有意识到数据库消失了一段时间。

在后台工作人员的情况下，他们可能需要由脚本实际停止和启动，除非他们的队列为空并保持为空。如果任何计划的 rake 任务或其他计划的作业都依赖于数据库并在数据库关闭时运行，它们可能会失败，因此当您通常进行数据库维护时，您需要尝试安排它们在窗口外运行。

如果您的产品工程师不喜欢运行脚本（！），您可能可以设置一个不错的 Web 界面以方便他们使用。这可能不仅对处理数据库连接错误有用，因为它将使组织中的更多人能够处理基本的事情，例如停止和启动应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:53:14.723

我建议使用外部工具/脚本来监控此类事件。当数据库在一定的空闲时间后终止连接时，Activerecord 的重新连接起作用，并且在一定的故障时间后它会放弃。所以这对你的情况没有帮助。

我认为您应该编写自己的脚本来监视数据库的状态。如果它在一段时间后恢复，只需重新启动您的 rails 应用程序。

此外，无论如何你都需要那些监控的东西，比如你的服务器的内存、cpu 和磁盘使用情况、服务器负载、数据库状态等等。只是一个稍微定制的监视器规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:48:41.830

在某处插入救援

```
rescue ActiveRecord::StatementInvalid: ActiveRecord::JDBCError
  ActiveRecord::Base::establish_connection
  retry 
```

但是哪里？我不知道

您也可以在 ApplicationController 中使用救援。但这不会重试失败的操作，因此您可能还应该渲染一些错误模板

```
rescue_from ActiveRecord::StatementInvalid: ActiveRecord::JDBCError do
  ActiveRecord::Base::establish_connection
  render 'errors/error', :status => 500
end 
```

# tomcat - 如何从tomcat重定向到jboss

> ID：12469098
> 
> 赞同：1
> 
> 时间：2012-09-18T01:08:11.777
> 
> 标签：tomcat, redirect, jboss

我租用了 Tomcat 和 Jboss 的网络托管服务。Tomcat 在 8080 端口运行，我需要将所有请求重定向到 jboss 服务器。托管服务器的管理员告诉我使用 NGASI 应用程序添加上下文 /ElinkWeb，这是我的 jboss 应用程序的上下文，但 id 不起作用。

有什么建议吗？是否可以在 Tomcat 的 index.html 中包含指向 jboos 的重定向指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:43:49.353

如果您需要提供来自 Tomcat 实例的一些上下文和来自 Jboss AS 实例的一些其他上下文（甚至处理一些负载分配），您可以利用 Apache httpd 和 mod_cluster 作为智能负载均衡器[1](http://www.jboss.org/mod_cluster)

# python - 防止在迭代时修改自定义类

> ID：12469102
> 
> 赞同：3
> 
> 时间：2012-09-18T01:09:04.270
> 
> 标签：python, iterator, concurrentmodification

如果我有一个带有接口的类：

```
class AnIteratable(object):

  def __init__(self):
    #initialize data structure

  def add(self, obj):
    # add object to data structure

  def __iter__(self):
    #return the iterator

  def next(self):
    # return next object 
```

...我将如何设置，以便如果`add()`被称为中间迭代，则会抛出异常，类似于：

```
In [14]: foo = {'a': 1}

In [15]: for k in foo:
   ....:     foo[k + k] = 'ohnoes'
   ....:     
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-15-2e1d338a456b> in <module>()
----> 1 for k in foo:
      2     foo[k + k] = 'ohnoes'
      3 

RuntimeError: dictionary changed size during iteration 
```

**更新：** 如果接口需要更多方法，请随意添加。我还删除了`__iter__()`.

**更新 #2** 根据 kindall 的回答，我模拟了以下伪实现。请注意，_datastruture 和索引到它的相关方法是抽象的，类编写者必须编写他/她自己的数据结构遍历和位置指针机制。

```
class AnIteratable(object):

  def __init__(self):
    self._itercount = 0
    self._datastructure = init_data_structure() #@UndefinedVariable
    # _datastructure, and the methods called on it, are abstractions.

  def add(self, obj):
    if self._itercount:
      raise RuntimeError('Attempt to change object while iterating')
    # add object to data structure

  def __iter__(self):
    self._itercount += 1
    return self.AnIterator(self)

  class AnIterator(object):

    def __init__(self, aniterable):
      self._iterable = aniterable
      self._currentIndex = -1 #abstraction
      self._notExhausted = True

    def next(self):
      if self._iterable._datastructure.hasNext(self._currentIndex):
        self._currentIndex += 1
        return self._iterable._datastructure.next(self._currentIndex)
      else:
        if self._notExhausted:
          self._iterable._itercount -= 1
        self._notExhausted = False
        raise StopIteration

    def __next__(self):
      return self.next()

    # will be called when there are no more references to this object
    def __del__(self): 
      if self._notExhausted:
        self._iterable._itercount -= 1 
```

**更新 3** 在阅读了更多内容后，似乎`__del__`可能不是正确的方法。以下可能是更好的解决方案，尽管它需要用户显式释放未用尽的迭代器。

```
 def next(self):
      if self._notExhausted and 
              self._iterable._datastructure.hasNext(self._currentIndex):
      #same as above from here

    def discard(self):
      if self._notExhausted:
        self._ostore._itercount -= 1
      self._notExhausted = False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:35:30.700

您不应该将迭代器与实例混合。否则，当您想一次多次迭代实例时会发生什么？

想想你在哪里存储迭代器的位置。

将迭代器拆分为一个单独的类。创建迭代器实例时存储对象的大小。`next()`调用时检查大小

`dicts`也不是万无一失的。您可以添加和删除会破坏迭代但不会引发错误的密钥

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> d = {i:i for i in range(3)}
>>> d
{0: 0, 1: 1, 2: 2}
>>> for k in d:
...     d[k+3] = d.pop(k)
...     print d
... 
{1: 1, 2: 2, 3: 0}
{2: 2, 3: 0, 4: 1}
{3: 0, 4: 1, 5: 2}
{4: 1, 5: 2, 6: 0}
{5: 2, 6: 0, 7: 1}
{6: 0, 7: 1, 8: 2}
{7: 1, 8: 2, 9: 0}
{8: 2, 9: 0, 10: 1}
{9: 0, 10: 1, 11: 2}
{10: 1, 11: 2, 12: 0}
{11: 2, 12: 0, 13: 1}
{12: 0, 13: 1, 14: 2}
{13: 1, 14: 2, 15: 0}
{16: 1, 14: 2, 15: 0}
{16: 1, 17: 2, 15: 0}
{16: 1, 17: 2, 18: 0} 
```

超过3次迭代！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:50:44.673

如果项目是可索引的并且有长度，你可以做这样的事情，这类似于它是如何`dict`做到的：

```
class AnIterable(list):

    def __iter__(self):
         n = len(self)
         i = 0
         while i < len(self):
             if len(i) != n:
                 raise RuntimeError("object changed size during iteration")
             yield self[i]
             i += 1 
```

不利的一面是，如果调用者进行了多次更改而导致长度没有净变化（例如添加，然后删除一个元素），它将不会被捕获。当然，您可以使用修订计数器（每当其他方法进行更改时递增），而不仅仅是检查长度：

```
class AnIterable(object):

    def __init__(self, iterable=()):
        self._content = list(iterable)
        self._rev = 0

    def __iter__(self):
        r = self._rev
        for x in self._content:
            if self._rev != r:
                 raise RuntimeError("object changed during iteration")
            yield x

    def add(self, item):
        self._content.append(item)
        self._rev += 1 
```

这会变得很混乱，因为您必须在每个可以修改列表的方法中增加修订计数器。我猜你可以编写一个元类或类装饰器来自动为列表编写这样的包装方法。

另一种方法是保持“活动”迭代器的计数，在创建迭代器时递增实例属性，并在耗尽时递减它。然后在 中`add()`，检查以确保此属性为零，如果不是则引发异常。

```
class AnIterable(object):

    def __init__(self, iterable=()):
        self._itercount = 0
        self._content   = list(iterable)

    def __iter__(self):
         self._itercount += 1
         try:
             for x in self._content:
                 yield x
         finally:
             self._itercount -= 1

    def add(self, obj):
        if self._itercount:
            raise RuntimeError("cannot change object while iterating")
        self._content.append(obj) 
```

对于奖励积分，`__del__()`请在迭代器上实现，以便当对象超出范围但未用尽时，计数也会减少。（注意双重递减！）这将需要定义您自己的自定义迭代器类，而不是使用 Python 在函数中使用时为您提供`yield`的那个，当然也不能保证`__del__()`在任何情况下何时调用。

唉，你不能*真正*阻止某人绕过你添加的任何“保护”。我们都是同意这里的成年人。

在任何情况下你都不能做的只是`self`用作你的迭代器。

最后，[这是](https://stackoverflow.com/a/9024499/416467)一个不同的、或多或少相反的方法的示例：您让调用者进行更改，但推迟实际应用它们直到迭代完成。上下文管理器用于明确地完成更改。

为了确保调用者使用上下文管理器，如果您不在上下文中，您可以拒绝迭代（例如，签入`__iter__()`设置的标志`__enter__()`），然后存储迭代器对象的列表并在退出上下文时使它们无效（例如在每个迭代器中设置一个标志，以便在下一次迭代时引发异常）。

# json - 迭代json数组

> ID：12469105
> 
> 赞同：0
> 
> 时间：2012-09-18T01:10:10.573
> 
> 标签：json

任何人都可以建议一种在javascript中使用jquery迭代格式json数组的方法。

```
{"0",{"id":"10", "class": "child-of-9"},"1",{"id":"11", "class": "child-of-10"}} 
```

我需要获得每个班级的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:18:49.307

你的json不正确。它应该看起来更像

```
{"0": {"id":"10", "class": "child-of-9"},"1": {"id":"11", "class": "child-of-10"}}; 
```

完成后，您可以使用[jQuery.each()](http://api.jquery.com/jQuery.each/)对其进行迭代。

```
 var data = {"0": {"id":"10", "class": "child-of-9"},"1": {"id":"11", "class": "child-of-10"}};
    jQuery.each( data, function(i,a){
        console.log(a['class']);
    }); 
```

顺便说一下，你的 json 不是一个数组，它是一个对象。要构建数组版本，它看起来像

```
[{"id":"10", "class": "child-of-9"},{"id":"11", "class": "child-of-10"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:36:34.320

没有关键是*数字的***对象**。这就是**数组**如何使用它的索引的有效方式。你所拥有的是一个**对象**，而不是一个**数组**。

 *******转这个：

```
a = {"0",{"id":"10", "class": "child-of-9"},"1",{"id":"11", "class": "child-of-10"}} 
```

进入这个：

```
a = [{"id":"10", "class": "child-of-9"},{"id":"11", "class": "child-of-10"}] 
```

And you have an *array of objects*. This can be iterated with a simple for loop, and accessed by index.

```
for(var i=0; i<a.length; i++) {
  console.log(a[i]);
} 
```*******

# javascript - jQuery Validation 中的正则表达式 - jQuery 中的单引号问题

> ID：12469106
> 
> 赞同：3
> 
> 时间：2012-09-18T01:10:14.690
> 
> 标签：javascript, jquery, asp.net, regex, jquery-validate

我有一个正则表达式来验证密码是否包含数字、小写和大写字符。

下面的一个工作正常。但是当我在 jQuery Validation 中使用它时：

```
txtPassword: {
    required: true,
    regex: Regex
}

Regex = (?=^.{8,16}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;/'?/&gt;.&lt;,])(?!.*\s).*$ 
```

但问题是`'`Javascript 中的单引号。有人可以帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:33:33.700

在这个正则表达式中有几件事需要修复：

*   在您对密码的前瞻检查中，您有一个没有量词的句点。因此，它将始终无法通过该检查。例如，对于号码检查，您应该`(?=.*\d)`使用`(?=.\d)`.
*   您不使用正斜杠转义字符`/`，而是使用反斜杠`\`。您在最后一个字符类中使用正斜杠错误地转义了它。
*   字符类中唯一的特殊字符或元字符是右括号 ( `]`)、反斜杠 ( `\`)、插入符号 ( `^`) 和连字符 ( `-`)。因此，这不是由于单引号。罪魁祸首是你没有逃脱的插入符号。

试试这个正则表达式，其中插入符号`^`而不是引号被转义`'`：

```
(?=^.{8,16}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%\^&*()_+}{":;'?/>.<,])(?!.*\s)^.*$ 
```

* * *

我假设你的问题，你的意思是一个正则表达式来验证密码：

*   至少 1 个号码
*   至少 1 个小写字符
*   至少 1 个大写字符
*   集合中至少有 1 个特殊字符`!@#$%^&*()_+}{":;'?/>.<,`
*   长度在 8 到 16 个字符之间

如果这是真的，请用明确的要求更新您的问题。

* * *

在[RegexPal中使用正则表达式](http://regexpal.com/?flags=g&regex=%28%3F%3D%5E.%7B8%2C16%7D%24%29%28%3F%3D.%2a%5Cd%29%28%3F%3D.%2a%5Ba-z%5D%29%28%3F%3D.%2a%5BA-Z%5D%29%28%3F%3D.%2a%5B!%40%23%24%25%5C%5E%26%2a%28%29_%2B%7D%7B%22%3A%3B%27%3F%2F%3E.%3C%2C%5D%29%28%3F!.%2a%5Cs%29%5E.%2a%24&input=P%40sSw0rD)

* * *

基于 jQuery 的代码。[在这里](http://jsfiddle.net/kashkns/K3ZrM/)摆弄这个：

```
var regex = /(?=^.{8,16}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%\^&*()_+}{":;'?/>.<,])(?!.*\s)^.*$/g;
//if(regex.test($('#txtPassword').val())){ alert('Match'); }else{alert('No Match')}
if (regex.test('P@sSw0rD')) {
    alert('Match');
} else {
    alert('No Match');
}​ 
```

# java - 存储 POJO 数组 - java 中更好的选择是什么？

> ID：12469108
> 
> 赞同：0
> 
> 时间：2012-09-18T01:10:40.793
> 
> 标签：java, android, collections, pojo

我有从 JSON 解析的 POJO。

```
Account [] accounts; 

class Account {
  Integer number;
  String name;
  String location;
  Date started;
} 
```

我从 JSON API 调用中获取帐户列表。Jackson 映射器将生成的 JSON 映射到上面的 POJO。我需要对这些对象进行搜索和其他操作。

我不知道如何存储这些来进行搜索和显示它们（在 Android 中）。

```
ArrayList
Map
HashTable
... 
```

等搜索应该很快。我平均有大约 500 个帐户。映射已完成，我现在将对象放在一个数组中。但不知道如何从这里走。

此外，我对 Java 集合和泛型还很陌生。因此，任何带有方向的代码示例都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:27:08.333

五百个帐户并不是一个很大的数字，如果您的应用程序很小并且很少使用（这意味着它不是具有数千个同时查询的 Web 服务），您可能能够摆脱线性搜索。

假设情况并非如此，并且这似乎是一个很好的假设，您应该为那些您希望经常查询的字段建立**索引。**如果您主要搜索名称，则可以使用名称的小写版本构建哈希图

```
nameIndex = new HashMap<String, Account>();
for (Account a : accountArray) {
    nameIndex.put(a.name.toLowerCase(), a);
} 
```

然后对于“确切名称”搜索小写您搜索查询然后调用`nameIndex.get`.

也可以按日期搜索，但在这里我希望您将按日期范围搜索。在这种情况下，您可能想要构建排序列表索引或树索引。然后导航列表或树以找到所需的范围。

您还可以通过名称正则表达式或我的姓名接近度（二元组、三元组）进行查找，有很多选项。

顺便说一句，数据库在这种事情上做得很好。[您可能会考虑只填充像H2](http://www.h2database.com/)这样的嵌入式数据库，尽管这可能是矫枉过正？不过学起来很有趣。除了使用数据库之外，您还可以获得并发控制和 freeeeeeee 缓存！

TL;DR：为您经常使用的查询构建哈希图或树图或普通排序列表索引，并对复杂的自定义查询进行线性搜索。或者，这可能是首选：使用嵌入式数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:12:49.623

如果您正在搜索，并且您可以识别要搜索的单个键，我建议您使用`HashMap`，因为如果您有一个键，访问它是 O(1) 。

`HashTable`是 JDK 1.0 年份；不要选择那个。

这是一个示例，假设该数字是唯一的并且代表一个好的搜索选择：

```
Account a = new Account(123456);
Map<Integer, Account> accounts = new HashMap<Integer, Account>();
accounts.put(a.getNumber(), a); 
```

要访问，请使用以下号码：

```
Account b = accounts.get(123456); 
```

# c# - 保存 XML 时 XmlWriter 搞乱格式

> ID：12469112
> 
> 赞同：1
> 
> 时间：2012-09-18T01:11:31.900
> 
> 标签：c#, .net, xml, xmlwriter

我正在尝试读取现有的 XML 文件，修改一堆节点的`InnerText`和值，然后将更改保存回文件。`Attribute`

我正在使用下面的代码。保存 XML 文件时，它会弄乱格式。例如，某些节点之间的换行符会消失。如何保留（或重新格式化以及格式化和缩进）XML 文件？

```
XmlDocument xDoc = new XmlDocument();
using (XmlReader xRead = XmlReader.Create(strXMLFilename))
{
    xDoc.Load(xRead);
}
//Makes changes to a few nodes
XmlWriterSettings xwrSettings = new XmlWriterSettings();
xwrSettings.IndentChars = "\t";
xwrSettings.NewLineHandling = NewLineHandling.Entitize;
xwrSettings.Indent = true;
xwrSettings.NewLineChars = "\n";
using (XmlWriter xWrite = XmlWriter.Create(strXMLFilename, xwrSettings))
{
    xDoc.Save(xWrite);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:14:49.773

好的，所以`XmlDocument`默认情况下，该对象会忽略空格。我不得不强迫它像这样保留空白 -</p>

```
xDoc.PreserveWhitespace = true; 
```

和砰！问题解决了！

# c++ - 编译 boost 文件系统的教程文件时遇到问题

> ID：12469114
> 
> 赞同：1
> 
> 时间：2012-09-18T01:11:35.580
> 
> 标签：c++, boost, linker, clang, homebrew

我正在尝试从 boost::filesystem 编译[本](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/example/tut3.cpp)教程文件。

我正在使用这个命令：

```
clang++ -std=c++11 -stdlib=libc++ tut3.cpp -L/usr/local/lib -lboost_filesystem-mt -lboost_system-mt 
```

但是，我得到：

```
Undefined symbols for architecture x86_64:
  "boost::filesystem::path_traits::dispatch(boost::filesystem::directory_entry const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::codecvt<wchar_t, char, __mbstate_t> const&)", referenced from:
      boost::filesystem::path::path<boost::filesystem::directory_entry>(boost::filesystem::directory_entry const&, boost::enable_if<boost::filesystem::path_traits::is_pathable<boost::decay<boost::filesystem::directory_entry>::type>, void>::type*) in tut3-FljaLL.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在使用 Mountain Lion 中包含的 clang，并且 boost 安装了`brew install --with-mpi --use-clang`. （mpich2 也与 一起安装`--use-clang`）。

详细的链接器输出：

```
Apple clang version 4.0 (tags/Apple/clang-421.0.57) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.1.0
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name tut3.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 133.3 -v -resource-dir /usr/bin/../lib/clang/4.0 -fmodule-cache-path /var/folders/nb/qkspw0z92f506gbjq9gb505r0000gn/T/clang-module-cache -stdlib=libc++ -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/spott/Documents/Code/ebss/bin -ferror-limit 19 -fmessage-length 272 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/nb/qkspw0z92f506gbjq9gb505r0000gn/T/tut3-9Q4qRh.o -x c++ tut3.cpp
clang -cc1 version 4.0 based upon LLVM 3.1svn default target x86_64-apple-darwin12.1.0
ignoring nonexistent directory "/usr/include/c++/v1"
#include "..." search starts here:
#include <...> search starts here:
 /usr/bin/../lib/c++/v1
 /usr/local/include
 /usr/bin/../lib/clang/4.0/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o a.out -L/usr/local/lib/ /var/folders/nb/qkspw0z92f506gbjq9gb505r0000gn/T/tut3-9Q4qRh.o -lboost_filesystem-mt -lboost_system-mt -lc++ -lSystem /usr/bin/../lib/clang/4.0/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "boost::filesystem::path_traits::dispatch(boost::filesystem::directory_entry const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&, std::__1::codecvt<wchar_t, char, __mbstate_t> const&)", referenced from:
  boost::filesystem::path::path<boost::filesystem::directory_entry>(boost::filesystem::directory_entry const&, boost::enable_if<boost::filesystem::path_traits::is_pathable<boost::decay<boost::filesystem::directory_entry>::type>, void>::type*) in tut3-9Q4qRh.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

老实说，我不确定问题是什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T00:46:41.990

在 MacOS 上使用文件系统时遇到了同样的问题。

如果不使用以下选项编译 boost，则无法通过：

/b2 --build-dir=../boost_libs 工具集=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" 阶段 --with-filesystem

顺便说一句，这篇文章很有用：[here](https://stackoverflow.com/questions/13404500/compile-boost-1-52-c11-clang-mac-10-8-2-cannot-find-cstddef)。

# c# - 能够在 WCF 中将主体对象从客户端传输到服务端

> ID：12469116
> 
> 赞同：2
> 
> 时间：2012-09-18T01:12:18.483
> 
> 标签：c#, .net, wcf

在 WCF 中，在客户端，用户将通过身份验证，并且他的角色/权限将存储在客户端的 Principal/Identity 对象中。一旦通过身份验证，用户应该只有在他处于特定角色时才能调用服务方法。为此，我需要将客户端的 Principal/Identity 对象传输到服务端。但是一旦我到达服务端，主体对象是 Windows 主体，身份是 Windows 身份。这不允许我检查是否应根据客户端凭据调用服务方法。

是否可以将我的主体和身份对象从客户端传输到服务器端？我想将我的主体对象（通用主体）传输到服务器端。可能吗？请帮忙。

早些时候我发布了类似的问题如下：

[将客户端自定义的 Principal 对象转移到 WCF 服务端](https://stackoverflow.com/questions/12319862/carry-over-client-side-customized-principal-object-to-the-wcf-service-side)

我试图遵循答案，但我无法继承我的主要对象。

这是详细信息。

在**客户端，我的 Principal 对象和身份对象**在调试期间的即时窗口中如下所示：

**System.Threading.Thread.CurrentPrincipal {System.Security.Principal.GenericPrincipal} [System.Security.Principal.GenericPrincipal]：{System.Security.Principal.GenericPrincipal} 身份：{System.Security.Principal.GenericIdentity} System.Threading。 Thread.CurrentPrincipal.Identity {System.Security.Principal.GenericIdentity} [System.Security.Principal.GenericIdentity]：{System.Security.Principal.GenericIdentity} AuthenticationType：“”IsAuthenticated：假名称：“”**

在**服务器端，我的主要对象**和身份如下所示：

**System.Threading.Thread.CurrentPrincipal {System.Security.Principal.WindowsPrincipal} [System.Security.Principal.WindowsPrincipal]：{System.Security.Principal.WindowsPrincipal} 身份：{System.Security.Principal.WindowsIdentity} {System.Security .Principal.WindowsIdentity} [System.Security.Principal.WindowsIdentity]: {System.Security.Principal.WindowsIdentity} AuthenticationType: "NTLM" IsAuthenticated: true Name: "MyDomain\MyLoginID"**

我的 WCF 客户端如下所示

客户端代码：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            ServiceReference1.Service1Client client = new Service1Client("NetTcpBinding_IService1");

            Console.WriteLine(client.GetData(6548));

            Console.ReadLine();
        }
    }
} 
```

客户端配置如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IService1" closeTimeout="10:10:00"
                    openTimeout="10:10:00" receiveTimeout="10:10:00" sendTimeout="10:10:00"
                    transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                    maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="10:10:00"
                        enabled="false" />
                    <security mode="Transport">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:8888/Service1" binding="netTcpBinding"
                bindingConfiguration="NetTcpBinding_IService1" contract="ServiceReference1.IService1"
                name="NetTcpBinding_IService1">

            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

服务代码如下所示：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    string GetData(int value);

    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);

    // TODO: Add your service operations here
}

// Use a data contract as illustrated in the sample below to add composite types to service operations
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string stringValue = "Hello ";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    }
}

public class Service1 : IService1
{
    public string GetData(int value)
    {
        return string.Format("You entered: {0}", value);
    }

    public CompositeType GetDataUsingDataContract(CompositeType composite)
    {
        if (composite == null)
        {
            throw new ArgumentNullException("composite");
        }
        if (composite.BoolValue)
        {
            composite.StringValue += "Suffix";
        }
        return composite;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:26:49.437

查看[WCF 行为](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)，特别是[WCF 安全行为](http://msdn.microsoft.com/en-us/library/ms731199%28v=vs.100%29.aspx)。行为允许您连接到 WCF 管道以在操作实际执行之前设置您喜欢的内容。

# c# - 可以从 C# 中的公共字符串类创建列表

> ID：12469117
> 
> 赞同：-1
> 
> 时间：2012-09-18T01:12:24.943
> 
> 标签：c#, .net, windows-phone-7, list, reflection

我正在使用 C# 创建一个应用程序，并希望能够轻松地通过我拥有的 120 个字符串执行 foreach() 循环。所有这些字符串的构造如下：

```
public class _currentweekapi
    {
        public string _1_artist { get; set; }
        public string _2_artist { get; set; }
        public string _3_artist { get; set; }
        ...
    } 
```

是否可以进行 foreach() 循环来遍历所有值。字符串是从 JSON 提要自动设置的，因此我无法将值直接放入列表中。

我已经阅读了该主题并了解通过“反射”有一些方法，但我是 C# 的新手，阅读它对我来说没有任何意义。

有人可以帮我解决这个问题，说明我该如何实现这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:48:05.393

使用反射很容易 - 试试这个

```
var properties = typeof(_currentweekapi).GetProperties();

foreach(PropertyInfo info in properties) {
  if (info.Name.EndsWith("artist") {
    // do something amazing
  }
} 
```

请参阅 - [http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:12:29.647

您应该尝试做的第一件事是不要将字符串存储在显式命名的属性中，因为您的类定义似乎正在这样做。最合适的场景似乎是 List<string> 类型的属性，可以将它们全部保存在您的类中。这也意味着您已经准备好您的清单。
因此，如果您能够更改类或使用另一个类，它接受 JSON 提要，并在 List<string> 类型的属性上使用 .Add()，而不是显式设置 120 个属性。

像这样：

```
public class ArtistData
{
    public List<string> Artists{ get; set; }

    public ArtistData()
    {
        this.Artists = new List<string>(0);
    }

    public void PopulateArtists(string jsonFeed)
    {
        // here something desrializes your JSON, allowing you to extract the artists...
        // here you would be populating the Artists property by adding them to the list in a loop...
    }
} 
```

然后，您在属性 Artists 中有您的列表，并且可以直接使用该列表，或者通过执行以下操作返回它：

```
string[] artists = myInstance.Artists.ToArray(); 
```

但是，您似乎已经表示您无法改变这样一个事实，即它们最终作为您向我们展示的课程中的单独属性提供给您，所以...

假设您别无选择，只能从诸如此类的类开始您展示了，这是一种可以循环遍历所有这些值的方法，正如您所要求的那样，所需要的只是将您的类实例作为每个方法都需要的一个参数传递给以下方法之一：

```
 // this will return a list of the values contained in the properties...
    public List<string> GetListFromProperties<T>(T instance)
    {
        Type t = typeof(T);
        PropertyInfo[] props = t.GetProperties(BindingFlags.Public | BindingFlags.Instance);

        // As a simple list...
        List<string> artists = new List<string>(props.Length);
        for (int i = 0; i < props.Length; i++)
        {
            if(!props[i].Name.Contains("_artist")){ continue; }
            artists.Add(props[i].GetValue(instance, null).ToString());
        }

        return artists;
    }

    // this will return a dictionary which has each artist stored
    // under a key which is the name of the property the artist was in.
    public Dictionary<string,string> GetDictionaryFromProperties<T>(T instance)
    {
        Type t = typeof(T);
        PropertyInfo[] props = t.GetProperties(BindingFlags.Public | BindingFlags.Instance);

        // As a dictionary...
        Dictionary<string,string> artists = new Dictionary<string,string>(props.Length);
        for (int i = 0; i < props.Length; i++)
        {
            if(artists.ContainsKey(props[i].Name) || !props[i].Name.Contains("_artist")){ continue; }
            artists.Add(props[i].Name, props[i].GetValue(instance, null).ToString());
        }

        return artists;
    } 
```

任何一个都应该有帮助，但不要使用字典，因为它需要更多的开销，除非你真的需要知道每个艺术家来自的属性的名称，在这种情况下，它比简单的列表更有帮助。

顺便说一句，由于这些方法是通用的，也就是说，它们接受类型为 T 的参数，相同的方法将适用于任何类实例，而不仅仅是您现在正在努力的那个。

记住：虽然目前它对您来说可能非常方便，但这不一定是解决这个问题的最佳方法。比这更好的是，我最初提出的建议是完全重新上课，所以不需要这种事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T01:46:55.843

你可以这样做：

```
 List<string> list = new List<string>();
        foreach (var property in _currentweekapi.GetType().GetProperties())
        {
            list.Add(property.GetValue(_currentweekapi, null));               
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T01:59:05.167

如果您可以确保没有其他类型的属性，那么这将起作用：

```
var list =
    typeof(_currentweekapi)
        .GetProperties()
        .Select(pi => (string)pi.GetValue(x, null))
        .ToList(); 
```

# c# - 如果在线程尚未完成时覆盖 Thread 对象会发生什么？

> ID：12469118
> 
> 赞同：3
> 
> 时间：2012-09-18T01:12:32.570
> 
> 标签：c#, .net, multithreading

假设您有一个启动某个后台线程的类：该类可能有一个`Run()`启动这些线程的`Stop()`方法，以及一个正确停止它们的方法。这些后台线程中的一些可能是手动创建的，其他可能由 a 管理`Timer`，它在调用上述`Run()`方法时被激活。

```
public void Run()
{
    m_ShutdownRequested = false; // shutdown flag disabled

    m_WorkerThread = new Thread(Work) { IsBackground = true };
    m_WorkerThread.Start();
    // ...
}

public void Stop()
{
    lock (m_LockInput)
    {
        m_ShutdownRequested = true; // shutdown flag enabled
        Monitor.Pulse(m_LockInput);
    }
    m_WorkerThread.Join(m_ShutdownTimeout);
} 
```

假设当用户单击UI 上的*“运行”*`Run()`按钮时调用该方法。同样，当用户单击UI 上的“*停止”*按钮时，将调用该方法。应该如何实现这些方法才能通过 UI 调用？它们都应该是异步的吗？如果是，如何处理某些线程无法停止的可能性？*`Stop()`*

 **假设执行该`Stop()`方法后，一些线程没有停止。此时，如果用户再次单击*Run*按钮，该类的实例将有一些线程尚未停止。但是，启动该`Run()`方法时，前一个`m_WorkerThread`实例被覆盖：如果在线程尚未完成时执行此覆盖，会发生什么情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:29:56.543

丝线绕来绕去，不为所动。另一方面，你只是失去了解决它的任何方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:30:31.660

不会发生线程覆盖，您只需创建一个变量的新实例并分配它。正在运行的线程将继续运行，但由于您不再引用它，您将无法返回到它。线程退出后，GC 可能会清理线程实例，也可能不会。**

# python - Python TCP 套接字代理极慢

> ID：12469121
> 
> 赞同：0
> 
> 时间：2012-09-18T01:13:21.150
> 
> 标签：python, performance, sockets, tcp, proxy

我正在使用 python 中的一个简单代理，它`GET`从浏览器获取 HTTP 请求，查询正确的网站并将数据（html、css、照片）返回给客户端。我让它工作了，但是从外部 Web 服务器读回数据并将其发送回客户端需要花费大量时间。以下是（我认为是）相关代码：

```
 tempSocket.send(requestToWebpage)

    tempList = []

    while 1:
           print "waiting for data from website..."
           data =  tempSocket.recv(bufferSize)
           if not data:
                break
           else:
                tempList.append(data)

    tempResponse = ''.join(tempList)
    print "closing temp socket..."
    tempSocket.close()

    splitResponse = tempResponse.partition("\r\n")

    response = splitResponse[0] + "\r\n" + "Proxy-connection: close\r\n" + splitResponse[2]

    print "sending results back..."
    newConnection.send(response)
    newConnection.close() 
```

代理在我自己的机器上运行（就像客户端浏览器一样），它是 Windows 7 64 位。我有一个体面的无线连接到互联网。目前，接收每个 GET 请求的结果并将其传输到客户端需要几分钟以上的时间。通过查看打印语句，我注意到大部分时间似乎都花在了 while 循环中（尤其是通过它的最后一个循环），但其他打印消息的出现时间也比看起来要长。

关于正在发生的事情和提高速度的建议有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:21:45.697

马库斯的评论可能是正确的。远程服务器未关闭其连接。

您可能会要求这种行为，甚至可能没有意识到。对服务器的请求是什么，即发送的是`requestToWebpage`什么？你在设置 `Connection: Keep-Alive`标题吗？

如果您在请求中使用 HTTP 1.1，则 Keep-Alive 是默认设置。

如果不是因为 Keep-Alive，您可能需要从回复中获取 Content-Length，然后您就会知道要读取多少字节。

# java - 将字符串解析为形状

> ID：12469122
> 
> 赞同：0
> 
> 时间：2012-09-18T01:13:24.643
> 
> 标签：java, awt, filestream, paint, java-2d

我正在制作一个绘画应用程序，对于保存的形状的输入，我遇到了一个问题。

你看，我正在使用 while 循环来遍历程序在较早时间保存的字符串的每一行。我也有它当前输入的标识符。我让程序按原样输出形状列表。意思是，每个形状都会输出像`java.awt.geom.Ellipse2D$Float@15990000`.

现在我需要某种方法来把那个字符串变成一个形状。要么，或者有某种方式将其保存为形状，以更简单的方式，这将允许我将其添加回列表

任何和所有的帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:49:37.240

您可以使用[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)或其子集作为保存文件的格式。如果您使用 SVG，您可以检查（或使用）[Batik](http://xmlgraphics.apache.org/batik/) - 它可以将 SVG 转换为 Java2D 对象。

这可能也很有趣：[how to capture graphics primitive from Graphics2D into SVG](https://stackoverflow.com/questions/9989256/how-to-capture-graphics-primitives-from-graphics2d-into-svg)

# javascript - javascript阻止函数快速连续执行

> ID：12469123
> 
> 赞同：0
> 
> 时间：2012-09-18T01:13:34.630
> 
> 标签：javascript, settimeout

当我的代码中的某些函数快速连续执行时，我遇到了问题。我想也许几行 javascript 会阻止触发快乐的人。

所以这就是我希望使用的。

```
 function change(){
   if(mod == 1 || mod == null){
   var mod=2;
   //function goes here    
   window.setTimeout(function(){var mod=1;}, 500);
   } 
```

有没有一种方法可以做到这一点？

我也觉得应该有一个更全球化的方法来解决这个问题，我没有想到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:15:08.213

您可以限制或消除回调。有一个很好的（jQuery 可选）库可以为您包装所有这些：[jQuery throttle/debounce](http://benalman.com/projects/jquery-throttle-debounce-plugin/)。

> jQuery throttle / debounce 允许您以多种有用的方式对函数进行速率限制。传递延迟和回调以返回一个新函数，该函数每毫秒`$.throttle`执行不超过一次。`delay`传递延迟和回调`$.debounce`返回一个新函数，该函数只执行一次，在开始或结束时将多个顺序调用合并为一个执行。

既然你刚刚评论说你想

> 禁用该功能，直到经过一段时间

听起来您正在寻找*去抖动*用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:06:35.043

您的解决方案几乎可以工作。您的问题是您没有创建闭包，`mod`而是创建了另一个`mod`在 setTimeout 中调用的变量。这应该有效：

```
 function change(){
     if(mod == 1 || mod == null){
       var mod=2;
       //function goes here    
       window.setTimeout(function(){mod=1;}, 500);
     }
   } 
```

# javascript - 在 HTML5 Drag 'n Drop 中绑定多个 dragenter/dragleave 事件？

> ID：12469125
> 
> 赞同：0
> 
> 时间：2012-09-18T01:14:02.553
> 
> 标签：javascript, jquery, html, drag-and-drop, frontend

这是我在这里所做的一个基本示例：http: [//jsfiddle.net/kgqkM/2/](http://jsfiddle.net/kgqkM/2/)

我想要做的是将这个列表之外的区域专门用作“删除”区域，我可以在其中设置适当的逻辑以从页面中删除拖动的元素。我试图显示当用户将元素拖出列表时，它会将外部着色为红色/半透明。当我在外包装上设置事件时，它们似乎接管了所有的 dragenter/dragleave 事件。

猜测我的问题与在父 div 上设置事件有关吗？我开始尝试并可能在顶部设置一个主事件并根据 e.target 和 .parents('.switch') 决定要做什么，但到目前为止它会导致错误的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:14:26.103

看来我必须对事件目标做一些（正确的）逻辑。我必须稍微重构一下我的代码，但它正在奏效。

# sql-server-2005 - 实体修订模式设计

> ID：12469127
> 
> 赞同：1
> 
> 时间：2012-09-18T01:14:47.530
> 
> 标签：sql-server-2005

SQL 服务器 2005。

在我们的应用程序中，我们有一个带有父表和几个子表的实体。我们希望跟踪对此实体所做的修订。来来回回之后，我们将其范围缩小到两种可供选择的方法。

1.  有一个实体的历史表。在 sproc 更新表之前，从父表和所有子表中检索实体的整个当前状态。将其 XML 化并作为 XML 数据类型粘贴到历史表中。包括一些要查询的列，以及修订号/创建日期。

2.  对于每个表，创建一个具有相同列的匹配历史表。还有一个修订号/创建日期。在 sproc 更新单个表之前，检索该表的记录的现有状态，并将其复制到历史表中。所以，它有点像SVN。如果我想获取修订版 Y 的实体，我需要获取每个表中的历史记录，其最大修订号不大于 Y。一个实体可能在一个表中有 50 个修订记录，但在一个表中只有 3 个修订记录一个子表等。我可能希望将整个实体的修订计数器保留在某个地方。

这两种方法似乎都让人头疼，但我仍然更喜欢解决方案＃2而不是解决方案＃1。这是一个已经很大的数据库，并且已经存在性能问题。在每次修订时都使用 XML blob 使其膨胀（并且会有很多）似乎是一种可怕的方式。为所有内容创建历史表是我愿意付出的代价，只要没有更好的方法来做到这一点。

有什么建议么？

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:26:13.287

数字 2 几乎可以肯定是要走的路，我用我的历史表做这样的事情，尽管我也使用“事件”表来将更改相互关联，而不是使用时间戳。我想这就是您所说的“修订计数器”的意思。我的“事件”表包含一个唯一的 ID、一个时间戳（当然）、负责更改的应用程序用户和一个“操作”指示符，它表示用户所做的导致更改发生的应用程序级操作。

为什么是#2？因为您可以更轻松地对表进行[分区](http://msdn.microsoft.com/en-us/library/ms345146%28v=sql.90%29.aspx)以归档或滚降旧条目。因为它更容易索引。因为查询起来要容易得多。因为它的开销比 XML 少，而且要小得多。

此外，考虑使用触发器而不是编写存储过程来完成所有这些工作。触发器几乎总是要避免的，但对于这样的事情，它们是执行这类事情的一种相当轻量级和健壮的方式。

# mysql - 分页时的 SQL 错误

> ID：12469128
> 
> 赞同：2
> 
> 时间：2012-09-18T01:14:57.060
> 
> 标签：mysql, cakephp, pagination

嘿伙计们，我们有一个完美运行的关系控制器网页（index_admin），但是在添加分页后它全部崩溃了。

提出：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Relationship.sender_id' in 'where clause' 
```

客户和企业建立“关系”，以便他们可以通过我们的网站交换发票。这是数据库架构：

id、sender_id、receiver_id、活动、请求、expiry_date

Sender_id 和receiver_id 都是Account Table 的外键。所以换句话说，告诉数据库哪些账户是相互关联的。

关系模型“BELONGSTO”“接收者和发送者帐户模型”：

```
public $belongsTo = array(
        'ReceiverAccount' =>array(
            'className' => 'Account',
            'foreignKey' =>'receiver_id',
            'associationForeignKey'  => 'accounts_id',
            ),
        'SenderAccount' =>array(
            'className' => 'Account',
            'foreignKey' =>'sender_id',
            'associationForeignKey'  => 'accounts_id',)
            ); 
```

索引管理员：

```
public function index_admin(){
        $this->set('title_for_layout', 'Relationships');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');   
        $this->layout='home_layout';

        //retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        //Conditions
        $conditions=array(
        "OR"=> array(
            'Relationship.sender_id' => $accountid,
            'Relationship.receiver_id' => $accountid)
        );

        //Find all Invoices where receiver_id = accountid
        $relationships=$this->Relationship->find('all', array(
        'conditions' => $conditions));

        debug($conditions);

        $compName = $this->Account->field('account_name', array('id' => 'Relationship.id'));

        $this->paginate = array(
        'limit' => 10,
        'conditions'=> $conditions
        );

        $this->set('accountid', $accountid); 
        $this->set('relationship', $this->paginate());  

        $this->set('compName', $compName);  
    } 
```

Index_admin 视图（部分）：

```
<table id="data">
                <tr>
                        <td colspan=7 align='right'>
                        <?php 
                        echo $this->Paginator->prev('<' . __('previous'), array(), null, array('class'=>'prev disabled'));  
                        echo '&nbsp;';
                        echo $this->Paginator->numbers(array('seperator'=>'')); 
                        echo '&nbsp;';
                        echo $this->Paginator->next(__('next') . '>', array(), null, array('class'=>'next disabled'));
                        ?>
                        </td>
                </tr>
                <tr>
                    <th><?php echo $this->Paginator->sort('id'); ?></th>
                    <th><?php echo $this->Paginator->sort('sender_id'); ?></th>
                    <th><?php echo $this->Paginator->sort('receiver_id'); ?></th>
                    <th><?php echo $this->Paginator->sort('expiry_date'); ?></th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>

        <?php foreach($relationship as $relationships):?>

        <?php

        if($relationships['Relationship']['requested']==1)
        {
            $status = 'Requested';
            $bgcol = '#F8FAC0';
        }
        else if($relationships['Relationship']['active']==1)
        {
            $status = 'Active';
            $bgcol = '#CFDAE8';
        }
        else if($relationships['Relationship']['active']==0)
        {
            $status = 'Expired';
            $bgcol = '#FAB9B9';
        }       

        if($relationships['Relationship']['active']==0 && $relationships['Relationship']['requested']==0)
        {
            $action = 'Reactivate';
        }
        else
        {
            $action = 'Edit Expiry';
        }

        if($relationships['Relationship']['sender_id']==$accountid)
        {
            $start = '<font color="#191970">';
            $end = '</font>';
        }
        else
        {
            $start = NULL;
            $end = NULL;
        }

        if($relationships['Relationship']['receiver_id']==$accountid)
        {
            $startr = '<font color="#191970">';
            $endr = '</font>';
        }
        else
        {
            $startr = NULL;
            $endr = NULL;
        }

        if($relationships['Relationship']['sender_id']==$accountid)
        {
            $acctname = $relationships['ReceiverAccount']['account_name'];
        }
        else if($relationships['Relationship']['receiver_id']==$accountid)
        {
            $acctname = $relationships['SenderAccount']['account_name'];
        }

?>

                    <tr>
                        <td align='center'><?php echo $relationships['Relationship']['id']; ?></td>
                        <td align='center'><?php echo $start?><?php echo $relationships['SenderAccount']['account_name']; ?><?php echo $end ?></td>
                        <td align='center'><?php echo $startr?><?php echo $relationships['ReceiverAccount']['account_name']; ?><?php echo $endr ?></td>
                        <td align='center'><?php echo date('d.m.Y', strtotime($relationships['Relationship']['expiry_date'])); ?></td>
                        <td align='center' bgcolor='<?php echo $bgcol ?>'><?php echo $status ?></td>
                        <td align='center'> 
                        <?php echo $this->Form->Html->link('Delete', array('controller' => 'Relationships','action'=>'delete',$relationships['Relationship']['id']), NULL, 'Are you sure you want to delete '. $acctname);
                         ?> | <?php echo $action ?> </td>
                    </tr>
                <?php endforeach; ?>

            <tr>
                        <td colspan=7 align='right'>
                        <?php 
                        echo $this->Paginator->prev('<' . __('previous'), array(), null, array('class'=>'prev disabled'));  
                        echo '&nbsp;';
                        echo $this->Paginator->numbers(array('seperator'=>'')); 
                        echo '&nbsp;';
                        echo $this->Paginator->next(__('next') . '>', array(), null, array('class'=>'next disabled'));
                        ?>
                        </td>
            </tr>
            </table> 
```

就像我说的那样，这一切都在手头工作，现在不是，但我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:06:57.920

将调试模式设置为打开以详细查看所有可能的错误总是明智的。您刚刚共享了 sql 错误部分，从中可以清楚地看出**预期的表没有“sender_id”字段**。我假设您已打开调试模式。所以首先看一下生成的查询。然后你会发现查询试图挖掘哪个表。

如果您的查询引用了正确的表，您可以试试这个：

```
public function index_admin(){
        $this->set('title_for_layout', 'Relationships');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.png');   
        $this->layout='home_layout';

        //retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        //Conditions
        $conditions=array(
        "OR"=> array(
            'Relationship.sender_id' => $accountid,
            'Relationship.receiver_id' => $accountid)
        );
        App::import('Model', 'Relationship');
        $objRelationship = new Relationship();
        $this->paginate = array( "conditions" => $conditions, 'limit' => 10 );
        $relationships = $this->paginate( $objRelationship );

        $compName = $this->Account->field('account_name', array('id' => 'Relationship.id'));

        $this->set('accountid', $accountid); 
        $this->set('relationship', $this->paginate());  
        $this->set('compName', $compName);
} 
```

# liferay - 如何获取用户是 Liferay 主题成员的站点？

> ID：12469131
> 
> 赞同：1
> 
> 时间：2012-09-18T01:15:26.997
> 
> 标签：liferay, liferay-6, liferay-theme

在**Liferay 6.1**自定义主题中 - 我如何为主题中所属的用户获取站点？

我已经看到了停靠栏是如何***通过*** `Go to/My sites`Liferay UI taglib 生成的。

但是，我想获取用户站点列表并将它们列为与停靠栏选项分开的超级导航栏的一部分。

这可能吗？在列表中获取用户网站的 API 调用是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T12:56:44.777

从用户对象中，您可以检索他所属的组：

```
$user.mySites 
```

这会返回一个`List<Group>`. 拥有后，`Group`您可以轻松地为该组的公共和私人页面构建 URL：

```
<ul>
    #foreach($site in $user.mySites)
        #if ($site.hasPrivateLayouts())
            <li><a href="/group${site.friendlyURL}">$site.descriptiveName</a></li>
        #end
        #if ($site.hasPublicLayouts())
            <li><a href="/web${site.friendlyURL}">$site.descriptiveName</a></li>
        #end
    #end
</ul> 
```

# eclipse - 如何将 Eclipse 项目从一台 PC 移植到另一台 PC？

> ID：12469133
> 
> 赞同：2
> 
> 时间：2012-09-18T01:15:39.230
> 
> 标签：eclipse, installation, project

我是 Eclipse 的新手，有一个正在工作的项目正在设置和运行，我想像在我的家用 PC 上那样设置它，这样我就可以在空闲时间查看它，所以我压缩了这个项目目录，并在我的家用 PC 上解压缩，但它不像 Netbeans 那样工作，似乎缺少很多部件/插件？怎么知道工作中项目需要哪些插件，所以我可以在家里安装，项目很大别人开发的，Eclipse有没有办法把项目相关的所有插件都压缩起来使用项目并自动解压缩并安装它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:43:51.353

重现已安装插件的最简单方法应该是*File->Export->Install->Installed Items to File*。*可以使用File->Import->Install->Software items from file*将生成的文件导入您的机器，这将导致安装第一台机器上可用的所有插件。

笔记：

*   这要求可以通过公共更新站点找到来自第一台机器的插件，因为导出的文件将仅包含安装插件的元数据列表，而不是实际的 jar 文件。
*   导出包括第一台机器的所有插件。您可以取消选择其中一些，但没有自动方法可以仅查找项目所需的那些。
*   需要 Eclipse 3.7 或更高版本。

# python - pyzmq 非阻塞套接字

> ID：12469137
> 
> 赞同：6
> 
> 时间：2012-09-18T01:16:27.153
> 
> 标签：python, node.js, zeromq, nonblocking, pyzmq

有人可以指出一个带有 Python 绑定的 REQ/REP 非阻塞 ZeroMQ (0MQ) 示例吗？也许我对ZMQ的理解是错误的，但我在网上找不到一个例子。

我在 Node.JS 中有一个服务器，可以将多个客户端的工作发送到服务器。这个想法是服务器可以启动一堆并行操作的作业，而不是为一个客户端处理数据，然后为下一个客户端处理数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:03:52.023

您可以使用此目标`zmq.Poller`（您可以在 zguide 存储库中找到许多示例，例如[rrbroker.py](https://github.com/imatix/zguide/blob/master/examples/Python/rrbroker.py)）或`gevent-zeromq`实现（[代码示例](https://github.com/traviscline/gevent-zeromq/blob/master/examples/poll.py)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-10T21:03:01.933

接受的答案中提供的示例给出了它的要点，但是您也可以通过使用代理来摆脱一些更简单的事情，`zmq.device`同时坚持使用[指南](http://zguide.zeromq.org/page:all#Shared-Queue-DEALER-and-ROUTER-sockets)中的“扩展请求 - 回复”模式。因此，服务器的 hello worldy 示例可能如下所示：

```
import time
import threading
import zmq

context = zmq.Context()

def worker():
    socket = context.socket(zmq.REP)
    socket.connect('inproc://workers')
    while True:
        msg = socket.recv_string()
        print(f'Received request: [{msg}]')
        time.sleep(1)
        socket.send_string(msg)

url_client = 'tcp://*:5556'
clients = context.socket(zmq.ROUTER)
clients.bind(url_client)
workers = context.socket(zmq.DEALER)
workers.bind('inproc://workers')

for _ in range(4):
    thread = threading.Thread(target=worker)
    thread.start()

zmq.device(zmq.QUEUE, clients, workers) 
```

在这里，我们让四个工作人员并行处理传入的请求。现在，您在客户端使用 Node，但为了保持示例完整，可以使用下面的 Python 客户端来查看它是否有效。在这里，我们创建了 10 个请求，然后将分 3 批处理：

```
import zmq
import threading

context = zmq.Context()

def make_request(a):
    socket = context.socket(zmq.REQ)
    socket.connect('tcp://localhost:5556')
    print(f'Sending request {a} ...')
    socket.send_string(str(a))
    message = socket.recv_string()
    print(f'Received reply from request {a} [{message}]')

for a in range(10):
    thread = threading.Thread(target=make_request, args=(a,))
    thread.start() 
```

# dojo - id 和 data-dojo-id 之间的区别

> ID：12469140
> 
> 赞同：10
> 
> 时间：2012-09-18T01:16:36.170
> 
> 标签：dojo

dojo 标记中的 id 和 data-dojo-id 有什么区别，例如：

```
<button id="save" data-dojo-type="dijit/form/Button" type="button" data-dojo-attach-event="onClick:save">Save</button> 
```

我尝试引用此按钮以更改其标签： var myButton = dijit.byId("save"); 这样我就可以更改按钮标签 myButton.set("label", "Add New");

如果我使用 id="save" 它可以工作。如果我只使用 data-dojo-id="save" 它不起作用。

我对 Dojo 相当陌生，因此您可以指出我的解释或教程将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T05:05:23.960

`data-dojo-id`将小部件分配给全局命名空间，即分配给`window`对象：

```
<button data-dojo-id="save" data-dojo-type="dijit/form/Button">Save</button>​ 
```

因此您可以直接访问该按钮：

```
save.set("label", "Add New"); 
```

查看 jsFiddle 的不同之处：http: [//jsfiddle.net/phusick/7yV56/](http://jsfiddle.net/phusick/7yV56/)

**编辑：**回答你的问题。我根本不使用`data-dojo-id`。它污染了与 AMD 所做的完全相反的全局命名空间。无论如何，您仍然可以使用类似的东西`widgets.save`并`widgets.rename`尽量减少污染：

```
<button data-dojo-id="widgets.save" data-dojo-type="dijit/form/Button">Save</button>​
<button data-dojo-id="widgets.rename" data-dojo-type="dijit/form/Button">Rename</button>​ 
```

IMO，`data-dojo-id`是为了[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)，而不是为了成熟的应用程序。

`data-dojo-id`只是将一个实例分配给一个变量，因此对于具有相同的多个 dijit，`data-dojo-id`该变量将指向最后一个分配的变量（即它不会是一个数组）。

您可以避免大量使用`registry.byId`编写方法来根据需要获取小部件。最好的开始方式是[`dijit/registy.findWidgets(rootNode, skipNode)`](http://dojotoolkit.org/api/1.8/dijit/registry#findWidgets). 另请注意，它[`dojo/parser.parse(rootNode, options)`](http://dojotoolkit.org/api/1.8/dojo/parser#parse)返回一个实例化对象数组，或者更准确地说：

> 返回一个混合对象，它是一个实例化对象的数组，但也可以包含一个用实例化对象解析的承诺。这样做是为了向后兼容。如果解析器自动需要模块，它将始终以承诺方式运行并且 `parser.parse().then(function(instances){...})`应该使用。

我用来将 ContentPane 的 dijits 分配到其`widgets`属性的方法示例，该属性是一个对象：

```
_attachTemplateWidgets: function(widgets) {
    widgets = widgets || this.getChildren();
    for(var each = 0; each < widgets.length; each++) {
        var widget = widgets[each];
        var attachPoint = widget.params.dojoAttachPoint;
        if(attachPoint) {
            this.widget[attachPoint] = widget;
        }

        var children = widget.getChildren();
        if(children.length > 0) {
           this._attachTemplateWidgets(children);
        }
    }
} 
```

我把整个课程放在这里：[https](https://gist.github.com/3754324) ://gist.github.com/3754324 。我用这个`app.ui._Pane`代替`dijit/layout/ContentPane`.

# qt - QT中的QVector数组无法访问私有成员错误

> ID：12469142
> 
> 赞同：1
> 
> 时间：2012-09-18T01:16:47.797
> 
> 标签：qt, vector, compiler-errors, declaration, private-members

我有编程经验，但我还在学习，我决定创建一个 QVector 数组来存储一些 QGraphicsRectItem ，如下所示：

```
QVector<QGraphicsRectItem> *FreeLayer1;

FreeLayer1 = new QVector<QGraphicsRectItem>;
FreeLayer1->resize(10); 
```

这是错误：

```
c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\include\QtCore/qvector.h(532) : error C2248: 'QGraphicsRectItem::QGraphicsRectItem' : cannot access private member declared in class 'QGraphicsRectItem'
c:\qtsdk\desktop\qt\4.8.1\msvc2010\include\qtgui\qgraphicsitem.h(728) : see declration of 'QGraphicsRectItem::QGraphicsRectItem'
c:\qtsdk\desktop\qt\4.8.1\msvc2010\include\qtgui\qgraphicsitem.h(683) : see declaration of 'QGraphicsRectItem'
c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\include\QtCore/qvector.h(473) : while compiling class template member function 'void QVector<T>::realloc(int,int)' 
```

我知道这听起来可能很愚蠢或很容易做到，但我没有发现与我完全一样的错误，而且我在声明方面没有很多经验。我的问题是如何编写此代码以使用我的变量 FreeLayer1。我坚持使用QVector<>，就是不知道怎么声明。

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:34:30.843

你的声明很好，问题似乎是QGraphicsRectItem的默认构造函数是私有的，所以你不能使用需要默认构造函数的QVector方法，比如QVector::resize。查看 QGraphicsRectItem 的文档，似乎也没有公共复制构造函数或复制赋值运算符，因此 QGraphicsRectItem 不符合 QVector 的元素类型。您必须存储指向 QGraphicsRectItem 的指针：

```
QVector<QGraphicsRectItem*> FreeLayer1;
FreeLayers1.resize(10);
FreeLayers1[0] = new QGraphicsRectItem(/* ... */); 
```

# awk - 使用 awk 比较内存和数据内容

> ID：12469146
> 
> 赞同：2
> 
> 时间：2012-09-18T01:17:18.260
> 
> 标签：awk, gawk

我有两个文件，第一个字段包含内存，第二个字段包含数据

文件 1：

```
0x60008798 4567
0x60009912 3457
0x60008814 3111
0x60006590 9116
0x60004942 4443
0x11111111 0000 
```

文件 2：

```
0x60008798 4567
0x60009912 3457
0x60008814 3666
0x60006590 9666
0x60004942 4443
0x22222222 1111 
```

我希望检查给定的内存值（即第一个字段）是否两个文件中的数据（即第二个字段）匹配。

我试图找出如何使用 awk 来做同样的事情，但解释的案例太复杂了。任何人都可以帮忙吗？

一种选择是我使用 grep，或者我写了一个 C 代码，但我认为我可以使用 awk

我的要求：内存中的任何一个文件都应该有相同的数据......这些是内存和内存中包含的数据在不同点获取，它们应该匹配，如果不匹配，我会抛出错误。我自己找到了一个解决方案： awk 'BEGIN { while (getline < "file1"){arr[$1] = $2}}{if (arr[$1] != $2){print $0}}' file2

谢谢，

光辉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:36:47.897

`0x60008798`要使用查找字符串`GNU awk`：

```
awk '/^0x60008798$/ && FNR==NR { value=$1; data=$2; next } { if ($1 == value) printf ($2==data) ? "MATCH\n" : "NO MATCH\n" }' file1.txt file2.txt 
```

这假设：

*   两个文件中都没有重复的内存值。
*   你只在乎某些东西是否匹配。
*   即，如果无法找到两个匹配值（每个文件中的一个），则不会生成任何输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:55:38.730

please edit your post to inlcude your required output. In the meantime, here is an alternate solution using a std unix untilty `comm`. Do `man comm` or `info comm` to find out more.

```
comm -3 <(sort file1) <(sort file2 )
0x11111111 0000
        0x22222222 1111
0x60006590 9116
        0x60006590 9666
0x60008814 3111
        0x60008814 3666
        0x99999999 1234 
```

We've sorted both files so their in alpha order

The the `comm -3` filters the 3rd column of output, which are any matched items that are found.

What remains are differences between the first file and then 2nd file, sorted.

**edit**

OR to see what values are the same, exclude the first 2 columns of `comm` output:

```
comm -12 <(sort file1) <(sort file2 )
0x60004942 4443
0x60008798 4567
0x60009912 3457 
```

IHTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:12:51.590

```
file1val=$(awk -v addr=$addr '$1 == addr {print $2}' File1)
file2val=$(awk -v addr=$addr '$1 == addr {print $2}' File2)
if [ "$file1val" = "$file2val" ]
then echo match
else echo no match
fi 
```

# jquery-mobile - jQuery mobile 在我的 li 元素中插入锚标签

> ID：12469148
> 
> 赞同：1
> 
> 时间：2012-09-18T01:17:19.917
> 
> 标签：jquery-mobile

我刚刚开始使用 jQuery Mobile 并调整现有的应用程序。

我的问题是 jQuery mobile 在无序列表中的 li 标签中插入锚标签。

文档告诉我，如果列表没有链接，将创建只读列表。

委婉地说，这是非常出乎意料的行为。

当我注释掉 JQM 包含时，我得到了我的简单 li 元素，所以我知道是 JQM 正在做这件事。

没有 JQM 的标记：

```
<ul id="root_ul" data-role="listview">

<li id="1_1306901436141">Profile
</li>
</li> 
```

JQM 之后的标记：

```
<ul id="root_ul" data-role="listview" class="ui-listview">
<li id="1_1306901436141">

<div class="ui-btn-inner ui-li">
  <div class="ui-btn-text">
    <a href="#/evaluation_headers/714%20/tastesheet&amp;ui-page=ul1_1306901436141" >  <span>Profile</span>                    
  </a>

</div><span>&nbsp;</span>
</div>
</li> 
```

JQM 已将链接放入列表中，但我想要一个没有链接的简单只读列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:05:21.720

您可以做的避免 jQuery Mobile 为您的嵌套插入锚标记是将嵌套`ul`包装`ul`在`div`. 事实上，除了 JQM 框架提供的约定之外，您还可以`li`通过在`li`.

```
<ul>
    <li>Item 1</li>
    <li>
        <div><ul>
                 <li>Sub List Item 1</li>
                 <li>Sub List Item 2</li>
        </ul></div>
     </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:19:48.877

感谢大家的回复。为了简化我的代码以提交到该站点，我未能在项目中包含嵌套列表。我创建了一个简单的嵌套列表，发现这会导致 JQM 插入链接。不是我想要或期望的，但现在会想出一个解决方法。嵌套列表是我的应用程序的核心，所以也许我不会使用 JQM。

再次感谢您的回复。

# mysql - 如何向已有主键的表中添加更多数据？

> ID：12469151
> 
> 赞同：0
> 
> 时间：2012-09-18T01:18:12.877
> 
> 标签：mysql, database, alter-table

我是 Mysql 的新手，所以轻松一点。原谅在这方面缺乏知识。但是我到处搜索，这很愚蠢，我不能只找到这个简单的答案。尝试制作一个有趣的应用程序来推广页面，赚取积分，为 fbook blah blah 做 PPC 类型的广告......

我目前有一个包含用户数据的 {table1}。UID、fname、lname、添加日期

而 table2 用于提交广告的用户链接以返回页面，它只有来自 UID 的主要和 1 col 现在能够添加链接。使用主键，我想要用户名或 uid，但必须能够向现有主键添加更多内容，以便我可以调用用户和所有链接。我可以这样添加，但当然必须删除自己才能在表格中添加更多内容......

```
$query = "INSERT INTO {$table} VALUES ('{$userid}', '{$user_link}')";
mysql_query($query) or die('Error updating database'); 
```

然后，说他们稍后再添加一个

```
if new submission check existing then 
add new column to existing uid... link#2=http:// 
```

我错过了什么。甚至很难说出这个问题，这就是为什么我把它放在这里作为搜索结果的原因！帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:24:48.830

您的表在 UID 上不能有数据库主键。根据定义，作为主键的 UID 必须是唯一的。所以要么你需要。

*   一个组合键 UID & USER_LINK（ORACLE 思维）
*   根本没有钥匙（它可以工作；但是你可以有重复的）
*   为每条记录加 1 的通用 AutoNum 键（MSFT 思维）

当您说某物是主键时，您的意思是该值永远不会为空，并且它在表中始终是唯一的。你必须小心这个；你认为独特的东西，其实不是。

在这种情况下，UNIQUE 键是使用用户链接定义的，同一用户不需要具有相同的链接（对吗？），因此您可以在两者之间创建一个组合键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:23:54.850

删除`PRIMARY KEY`on table2，根据定义，它是唯一的。使用常规索引作为`FOREIGN KEY`返回 table11。

# css - HTML 5，类的使用

> ID：12469152
> 
> 赞同：0
> 
> 时间：2012-09-18T01:18:43.443
> 
> 标签：css, html

在下面的代码中，我们为部分 class="body" 和 ol、li 中的每一个都有一个不同的类。h2 ，页脚和 div。当我们不在任何地方应用它时，在该部分中提及 class="body" 有什么用？如果我们为“body”提供一个 css，它将如何反映在代码中？

[http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/](http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:03:05.593

如果您阅读了您发布链接的文章... 您应该会找到以下内容...

## 限制我们的区块

你们中的一些人可能已经注意到我是如何将`class="body"`属性添加到标记中布局的主要部分的。这是因为我们希望我的网站的主体具有一定的宽度（800 像素），而我从来都不`<div>`喜欢这样做的大包装。因此，我们将使用基本的块居中技术，并为此使用边距。我还在本节中添加了几个通用类，它们可能用于发布端内容。

## 布局

```
.body {clear: both; margin: 0 auto; width: 800px;} 
img.right >figure.right {float: right; margin: 0 0 2em 2em;} 
img.left, figure.left {float: right; >margin: 0 0 2em 2em;} 
```

...结束报价...

一般而言，如果您没有在 css 或 JavaScript 中引用类名，那么将其包含在您的 html 中就没有多大意义。

如果您添加如下的 css 规则： `.body {*css rules*}` ...那么无论您拥有`class="body"`这些规则，都将应用于它。

希望有帮助

# entity-framework - 如何使用 DbContext 为延迟加载设置 MergeOption？

> ID：12469158
> 
> 赞同：1
> 
> 时间：2012-09-18T01:19:51.723
> 
> 标签：entity-framework

我正在使用 EF4.2 和 DbContext，需要找到一种方法来全局设置 MergeOption。

到目前为止，已经研究了以下场景：

1.  通过 DbContext 转换为 ObjectContext。使用这种方法，我似乎看不到任何设置 MergeOption 的方法，使用 ObjectContext 的各种其他帖子都启用了这个，但我相信这是一个“代码生成”ObjectContext。

2.  为每个查询设置 MergeOption：这适用于初始查询，但是当我访问导航属性时，会发生“延迟加载”，并且此加载似乎使用默认的 MergeOption，即 Append。

那么有没有办法为延迟加载设置 MergeOption 呢？

这里有一些细节：使用DbContext POCO EF4.2，延迟加载是真的，tracking = true/proxy generation

有什么建议么？还是我需要另一种方法？

# jquery - 取消选择单选并撤消动画

> ID：12469163
> 
> 赞同：0
> 
> 时间：2012-09-18T01:20:36.853
> 
> 标签：jquery

我有 2 个单选按钮，“是”按钮启动“速度表”的旋转，如果他们决定在事后按“否”，我想基本上撤消“是”按钮所做的事情。我想不出解决这个问题的最佳方法。

我正在尝试使用此代码执行此操作，它不会启动自定义事件：

```
jQuery('input[value="Yes"]').bind('click', function(){
       jQuery('input[name="' + jQuery(this).attr('name') + '"]').not(jQuery(this)).trigger('deselect');});
       jQuery('input[value="yes"]').bind('deselect', function(){
             jQuery('#progress').animate(
            {
                marginBottom: '-=5'
            },{
                step: function(now, fx) {
                    jQuery(this).css({transform: 'rotate(' + now + 'deg)'});
            }
}); }); 
```

这是小提琴：http: [//jsfiddle.net/pTkkS/12/](http://jsfiddle.net/pTkkS/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:52:11.757

你可以这样做：

```
 $("input[type=radio]").change(function(){
        var marginBottom = $("input[type=radio][value=yes]:checked").length * yourConstantForAnimate;
    }); 
```

# c# - 恢复 Visual C# 表单设计器删除的代码？

> ID：12469165
> 
> 赞同：1
> 
> 时间：2012-09-18T01:21:10.023
> 
> 标签：c#, version-control, windows-forms-designer

因此，我在 Visual C# 2010 Express 中编写了一个程序。完成了足够的工作，对于我第一次尝试这门语言来说非常好。但后来我愚蠢地决定，“嘿，这个程序在我发出之前需要一个关闭的确认对话框！” 所以我编写了函数，然后我进入自动生成的代码以适当地绑定所述函数。

**卡布姆！**

现在，表单设计器显示一个空白表单，所有这些闪亮的组件都已从设计器和自动生成的代码中删除。在这样一个简单的程序中，我投入了大约 80% 的工作。

现在，在 NetBeans 中，我会右键单击文件的选项卡，然后返回到以前的版本，这可能会浪费大约 15 分钟的工作时间。这是一个非常明显的概念，我只是不确定在 Visual Studio 中的哪里可以找到文件历史记录。那么，等价物在哪里可以让我找回我的工作呢？

（我还设法通过撤消一大堆*代码来取回我的代码 - 但设计者没有看到它，编译器也没有看到它，所以它仍然构建为一个空白表单。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:30:38.557

可悲的是，你刚刚学到了一些东西。

一是永远，永远修改设计师生成的代码。事实上，C# 有一个称为[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)的概念，它允许您修改生成的类而无需修改生成的文件。

其次，Visual Studio 本身并没有内置的源代码控制——你需要选择你喜欢的那个并勤奋地使用它。其中最流行的是 git、subversion、mercurial 和 Team Foundation Server。我个人使用svn，但其他的也很好。避免使用称为 Visual SourceSafe (VSS) 的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:33:50.133

从它的声音来看，我会说您尝试 ctrl-z 直到代码中的某个点，但不是在设计器中？

在放置代码的代码隐藏文件中执行多个“撤消”是一回事，在设计器中执行“撤消”是另一回事。

希望您还没有关闭视觉工作室，在设计视图中查看您现在的空白表单，并在那里尝试一堆 ctrl-z 按下，可能会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:01:59.450

我有类似的效果：代码没有丢失，因为项目编译得很好，但我在设计器中只有一个空白表格。

这是因为表单是从另一个表单继承而来的，我在基本表单的 Load 事件中添加了以下行： this.MdiParent = Application.OpenForms("BaseForm");

删除此行（并重新编译）后，我可以再次访问descendig 表单的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T06:51:58.383

> 实际上控件不会从设计代码或初始化组件（）中丢失，请确保是否检查
> 
> 初始化 Component() { this.controls.add("控件所在的位置") }
> 
> 示例：1-this.Controls.Add(this.panel1.label1); 2-this.Controls.Add(this.panel1.label2);
> 
> 无论是哪种形式，您都可以像下面这样写
> 
> 应该写在 Initialize Component()

```
 this.Controls.Add(this.label1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-02T02:59:17.907

您可以做的一件事，这一次对您没有帮助，但对于将来可能是个好主意-如果您大量复制代码（像我一样），请获取其中一个剪贴板保护程序-例如[ClipTrap](http://skwire.dcmembers.com/fp/?page=cliptrap)（轻量级，简单，很棒）。

然后，如果您意识到您无法撤消您所做的事情，那么您将获得第二次机会，通过运行“被困”文本来查看您想要的内容是否就在那里。

另一个不错的选择是尝试[使用 AutoVer 之](http://beanland.net.au/AutoVer/)类的方法，它会根据需要随时保存任何更改的文件（或文件夹中的文件）的副本。这可以为您提供您的代码文件甚至整个项目的备份——每五分钟一次，或者只要有更改，每分钟一次。很棒的节目。这是某种形式的源代码控制，或者至少是源代码备份。

*（不，我不是任何一个应用程序的作者）*

但是，对于您的特定问题，如果代码仍然存在于您的 Designer.cs 页面中 - 也许您只是删除了引用或命名空间。确保命名空间匹配，并确保您在表单的代码文件`InitializeComponent();`中调用了该函数（这就是将所有设计器的控件放置到表单上的原因，您知道）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-29T22:05:10.310

在文件后面的代码中单击“撤消”，而不是在设计器窗口中。接受警告，当代码返回时，表单应该恢复正常，Visual Studio 2015。

# c++ - 在 C++ 中生成随机数的代码

> ID：12469171
> 
> 赞同：1
> 
> 时间：2012-09-18T01:23:00.343
> 
> 标签：c++, visual-studio, visual-c++

基本上我必须编写一个程序来生成随机数来模拟一对骰子的滚动。这个程序应该在多个文件中构建。主函数应该在一个文件中，其他函数应该在第二个源文件中，它们的原型应该在头文件中。首先，我编写了一个简短的函数，它返回一个介于 1 和 6 之间的随机值来模拟单个 6 面骰子的滚动。其次，我编写了一个函数，通过调用该函数两次来假装掷出一对骰子。我的程序首先询问用户应该卷多少卷。然后我编写了一个函数来模拟掷骰子多次，准确计算值 2、3、4、5、6、7、8、9、10、11、12 的次数（每个数字是一对骰子的总和）出现在一个数组中。

```
2    3    4    5    6    7    8    9   10    11    12
*    *    *    *    *    *    *    *    *     *     *
*    *    *    *    *    *    *    *    *     *     *
*    *    *    *    *    *    *    *    *     *     *
*    *    *    *    *    *    *    *    *     *     *
     *    *    *    *    *    *    *    *     * 
```

接下来，为了查看随机数生成器的性能如何，我编写了一个函数来计算滚动的平均值。将此与 7 的理想平均值进行比较。此外，打印出一个小表格，显示程序制作的每一卷的计数，基于上述频率的理想计数，给定总卷数，以及这些值之间的差异列。到目前为止，这是我不完整的代码：“Compiler Visual Studio 2010”

```
int rolling(){    //Function that returns a random value between 1 and 6
rand(unsigned(time(NULL)));
int dice = 1 + (rand() %6);
return dice;
}
int roll_dice(int num1,int num2){ //it calls 'rolling function' twice 
int result1,result2;
num1 = rolling();
num2 = rolling();
result1 = num1;
result2 = num2;
return result1,result2;
}
int main(void){
int times,i,sum,n1,n2;
int c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11;//counters for each sum
printf("Please enter how many times you want to roll the dice.\n")
scanf_s("%i",&times); 
```

我假装使用计数器来计算每个总和并将数字（计数）存储在一个数组中。我知道我需要一个循环（for）和一些条件语句（if），但是我的主要问题是从 roll_dice 获取值并将它们存储在 n1 和 n2 中，这样我就可以对它们求和并将总和存储在“sum”中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:50:41.210

你可以使用如果你可以使用 C++11 库。

从页面：

```
uniform_int_distribution<int> one_to_six {1,6};  // distribution that maps to the ints 1..6
default_random_engine re {};                     // the default engine

int x = one_to_six(re); // x becomes a value in [1:6] 
```

你冷种子具有快速移动的时间价值。

```
std::chrono::time_point<std::chrono::system_clock>
  now {std::chrono::system_clock::now()};
std::chrono::system_clock::duration
  epoch {now.time_since_epoch()};
typedef std::chrono::duration<unsigned long long int, std::milli> ms;

std::default_random_engine re {std::chrono::duration_cast<ms>(epoch).count()}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:45:25.333

制作一个掷骰子的函数并返回总和。

```
int Roll(int numberOfTimes)
{
     int temp = numberOfTimes;
     int sum = 0;
     int dice1 = 0;
     int dice2 = 0;

     for (int i = 0; < temp; i++)
     {
         dice1 = 1 + (rand() % 6);
         dice2 = 1 + (rand() % 6);
         sum = dice1 + dice2;  
     }

     return sum;
} 
```

我没有对此进行测试，但它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:52:33.400

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int RollDice()
{
    return rand() % 6 + 1;
}

int main()
{
    int times, i, cont;
    int count[11];

    srand(time(NULL));

    printf("Please enter how many times you want to roll the dice: ");
    scanf("%i", &times);

    if (times <= 0)
    {
         fprintf(stderr, "Invalid value.\n");
         return -1;
    }

    for (i = 0; i < 11; i++)
    {
        count[i] = 0;
    }

    for (i = 0; i < times; i++)
    {
        int result = RollDice() + RollDice();
        if (result < 2 || result > 12)
        {
            fprintf(stderr, "something goes wrong\n");
            return -1;
        }

        ++count[result - 2];
    }

    for (i = 2; i <= 12; i++)
    {
        printf("%3d", i);
    }

    printf("\n");

    while (1)
    {
        cont = 0;

        for (i = 0; i < 11; i++)
        {
            printf("  %c", (count[i] > 0) ? '*' : ' ');
            if (count[i] > 0)
            {
                if (--count[i] > 0)
                {
                    cont = 1;
                }
            }
        }

        printf("\n");

        if (!cont)
        {
            break;
        }
    }

    return 0;
} 
```

# c# - 嵌入语句出错

> ID：12469177
> 
> 赞同：6
> 
> 时间：2012-09-18T01:24:10.780
> 
> 标签：c#

这是我的代码：

```
if (RdoBtnBeepDefault.Checked) SystemSounds.Beep.Play();
else SoundPlayer iPlay = new SoundPlayer(@TxtBeepFile.Text);

iPlay.Play(); 
```

这是错误：

`Embedded statement cannot be a declaration or labeled statement`

如果这不可能，介意告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T01:25:36.970

`iPlay.Play();`超出了您声明​​中的`else`条款的范围。`if-else`尝试用大括号将其括起来以获得多行范围。

```
if (RdoBtnBeepDefault.Checked) 
{
    SystemSounds.Beep.Play();
)
else
{ 
    SoundPlayer iPlay = new SoundPlayer(TxtBeepFile.Text);
    iPlay.Play();
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T05:43:58.687

不仅如此，即使这样也会产生同样的错误

```
if (RdoBtnBeepDefault.Checked) SystemSounds.Beep.Play();
else int i=0; 
```

原因是逻辑。如果您在 if else 条件中放入单行语句，这间接意味着条件流以该行结束。在那种情况下，如果你使用一些声明||上面的东西不会以任何方式有意义/影响，那么这意味着它是一种字符串文字。这并不完全是错误的，而是不必要的。Mind c# Visual Studio Editor 减少了几乎所有可能的错误和不必要的内存加载。

当您放置大括号时，它表明您可以在同一块中使用该变量来执行某些逻辑。所以编辑器会允许你这样做。那时 VS 假设您将来可以添加代码。所以它只会给你关于那条线的警告。没有大括号，它坚定地假设您不会使用该变量（由于范围）。因此，它将其视为错误。

# python - 在 python 谷歌应用引擎中覆盖 db.Model.all()

> ID：12469184
> 
> 赞同：0
> 
> 时间：2012-09-18T01:25:38.243
> 
> 标签：python, google-app-engine, superclass, overriding

我正在尝试在我的 Google App Engine 应用中开始使用内存缓存。我没有创建一个检查内存缓存然后可能查询数据库的函数，而是决定重写我的模型的 all() 类方法。到目前为止，这是我的代码：

```
def all(cls, order=None):
    result = memcache.get("allitems")
    if not result or not memcache.get("updateitems"):
        logging.info(list(super(Item, cls.all())))
        result = list(super(Item, cls).all()).sort(key=lambda x: getattr(x, order) if order else str(x))
        memcache.set("allitems", result)
        memcache.set("updateitems", True)
        logging.info("DB Query for items")
    return result 
```

我原以为这会奏效。但相反，我得到一个 RuntimeError 说超出了递归深度。我认为这来自对 super() 方法的误解。很抱歉把代码和订购的东西弄乱了。但也许问题也出在某个地方。我发现的一个地方说应该像这样调用超级方法：

```
super(supercls, cls_or_self) 
```

但这不适用于 GAE 的 API：

```
super(db.Model, cls) 
```

这不知道要查询哪个模型。有人请告诉我我做错了什么，也许让我更好地理解 super()。

编辑：感谢@Matthew，问题出在第一次 `logging.info()`通话时括号放错了位置。现在我有另一个问题，该方法只是返回无。我不知道这是否意味着返回 None 的`super`实现`all()`（也许它不知道是什么实体在调用它？）或者只是我的代码存在其他一些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:16:29.713

我认为错误可能在这里：

```
logging.info(list(super(Item, cls.all()))) 
```

如果 中存在错误`cls.all()`，则作为构造函数的一部分*再次*`super`调用它，而不是在结果上调用它：

```
logging.info(list(super(Item, cls).all())) 
```

因此，如果再次调用错误`all`，它仍然会满足日志分支条件，它将`all`再次调用，仍然会等等，直到你达到递归限制。

另一个可能的问题是`Model.all()`返回一个[`Query`](https://developers.google.com/appengine/docs/python/datastore/queryclass)对象，我不确定是否`list(query)`有效。它还提供了自己的排序，因此您可以使用它来代替：

```
 query = super(Item, cls).all()
    query.order( order )
    ...
return list(query) 
```

或者只是`return query`，因为它已经是可迭代的。

# php - IIS 7 - Windows 身份验证

> ID：12469197
> 
> 赞同：1
> 
> 时间：2012-09-18T01:27:44.647
> 
> 标签：php, iis-7, iis-7.5

我的网络服务器正在运行：IIS 7 PHP 5

我正在尝试在我们的 Intranet 站点中打印当前 Intranet 登录用户。所以我禁用了匿名身份验证并启用/打开了 Windows 身份验证。下面是我的 PHP 脚本：

```
<?php
$user = $_SERVER['LOGON_USER'];
echo "$user";
?> 
```

我在 IIS 7 模块中启用了 WindowsAuthenticationModule 并在 IIS 7 身份验证中启用了 Windows 身份验证：

```
System.Web.Security.WindowsAuthenticationModule, System.Web, Version=2.0.0.0, Culture=neutral,..... 
```

该代码在 IE 和 Google chrome 中运行良好 - 它显示 DOMAIN\usernamme 并且没有要求我提供任何用户名/密码验证挑战。但是在 FF 中，我收到了身份验证挑战，并且无论我输入什么值（错误/正确），它都会不断重复。单击取消后，我得到以下信息：

```
Error Summary
HTTP Error 401.2 - Unauthorized
You are not authorized to view this page due to invalid authentication headers.
Detailed Error Information
Module  IIS Web Core
Notification    AuthenticateRequest
Handler PHP
Error Code  0x80070005
Requested URL   http://localhost:8080/phpinfo.php
Physical Path   C:\inetpub\wwwroot\phpinfo.php
Logon Method    Not yet determined
Logon User  Not yet determined
Most likely causes:

    No authentication protocol (including anonymous) is selected in IIS.
    Only integrated authentication is enabled, and a client browser was used that does not support integrated authentication.
    Integrated authentication is enabled and the request was sent through a proxy that changed the authentication headers before they reach the Web server.
    The Web server is not configured for anonymous access and a required authorization header was not received.
    The "configuration/system.webServer/authorization" configuration section may be explicitly denying the user access.

Things you can try:

    Verify the authentication setting for the resource and then try requesting the resource using that authentication method.
    Verify that the client browser supports Integrated authentication.
    Verify that the request is not going through a proxy when Integrated authentication is used.
    Verify that the user is not explicitly denied access in the "configuration/system.webServer/authorization" configuration section.
    Create a tracing rule to track failed requests for this HTTP status code. For more information about creating a tracing rule for failed requests, click here.

Links and More Information This error occurs when the WWW-Authenticate header sent to the Web server is not supported by the server configuration. Check the authentication method for the resource, and verify which authentication method the client used. The error occurs when the authentication methods are different. To determine which type of authentication the client is using, check the authentication settings for the client.

View more information »

Microsoft Knowledge Base Articles:

    907273
    253667 
```

我不确定接下来我必须做什么，因为它在 IE 和 Chrome 中可以正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:02:07.347

默认情况下，Firefox 未启用 Windows 集成身份验证。它需要在高级配置对话框中设置一些受信任的站点。还有其他解决方案，包括运行 IETab 扩展（类似于 Chrome Frame）

这是一个描述必要配置的[SO 链接：](https://stackoverflow.com/questions/733237/integrated-windows-authentication-with-iis-firefox-and-sql-server/733367#733367)

我已经对此进行了测试，它似乎可以正常工作。

# android - “错误：不支持的配置：sampleRate 44100, format 1, channelCount 1”-AudioRecord Android

> ID：12469202
> 
> 赞同：0
> 
> 时间：2012-09-18T01:28:28.857
> 
> 标签：android, audiorecord

我不明白为什么我有这个错误。你能帮助我吗？

这是我的代码：

```
int bufferSize = AudioRecord.getMinBufferSize(44100,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);

AudioRecord audioRecord = new AudioRecord( MediaRecorder.AudioSource.MIC, 44100,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize); 
```

错误：

```
Error: Unsupported configuration: sampleRate 44100, format 1, channelCount 1"-AudioRecord Android 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:00:47.467

Very odd, but the error is self-explanatory: the device you're running on doesn't have audio hardware/mixer support for a 16-bit mono audio channel at a 44.1 kHz sample rate. Is this a hardware device or an emulator?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:01:03.900

似乎模拟器只支持采样率= 8000，改变了采样率，它工作得很好。

# c - 在 C DLL 中使用双 * 或短 *，在带有 pinvoke 的 C# 中使用什么

> ID：12469204
> 
> 赞同：0
> 
> 时间：2012-09-18T01:29:06.500
> 
> 标签：c, pointers, dll, pinvoke

我在 C DLL 中有以下结构：

```
struct foo
{
      double *x;
      short  *y;
} 
```

调用 DLL 的 c# 应用程序：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class foo
{
        public ? x;
        public ? y;
} 
```

我知道如果我有一个 int*，我应该使用 IntPtr，但找不到 short* 和 double * 的等价物。

在 C 端，我使用 short * 来分配 short 数组，double * 用于双精度数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:36:05.590

实际上，C# 中的所有非托管指针都使用`IntPtr`. 之所以这样称呼它，`IntPtr`不是因为它类似于`int *`，而是因为它是一个“指针”大小的整数（与`Int32`和不同`Int64`，它们分别是 32 位和 64 位的整数）。它的大小取决于平台。

`x[0]`例如，要获得 的值，您可以这样做

```
double[] arr = new double[1];
Marshal.Copy(f.x, arr, 0, 1); 
```

要阅读`*y`，你会做

```
short val = Marshal.ReadInt16(f.y); 
```

# c# - 使用集成工具构建系统

> ID：12469214
> 
> 赞同：3
> 
> 时间：2012-09-18T01:30:28.900
> 
> 标签：c#, c++, build, msbuild

如何使用集成的构建工具创建/使用现有的构建系统。

示例：需要构建 c# 或 C++ 或 C。一些项目仅基于 MS，其他项目/解决方案基于 Linux。

如果我想引入新的开发人员或设置另一台构建机器，我可以自动获取特定项目的构建工具（可能在某个配置中列出依赖构建工具），然后下载源代码。会有自动脚本设置下载的构建工具的路径，因此您可以使用从构建系统本身下载的工具来制作/cmake/msbuild 项目。

我曾经看过这个，但一直在寻找它，但再也没有看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:14:21.960

我没有完全理解您的问题，但通过使用我所理解的内容，我可以建议您尝试[http://cosmos.codeplex.com/](http://cosmos.codeplex.com/) <- ac# 操作系统开发包。或者对于 linux 试试[http://www.linuxfromscratch.org](http://www.linuxfromscratch.org) <- 这可以帮助我们通过使用预安装的 linux 集成工具来构建另一个 linux。

# php - 使用 ArrayObject::STD_PROP_LIST 的原因是什么

> ID：12469220
> 
> 赞同：1
> 
> 时间：2012-09-18T01:30:54.620
> 
> 标签：php, flags, arrayobject

我没有找到任何将 ArrayObject 与 ArrayObject::STD_PROP_LIST 标志一起使用的示例。 [http://www.php.net/manual/en/arrayobject.setflags.php](http://www.php.net/manual/en/arrayobject.setflags.php) 你能给我任何使用带有这个标志的 ArrayObject 的例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T23:13:43.810

自 PHP 5.3 起，该标志不再有任何影响。

[http://3v4l.org/Fk3Qu](http://3v4l.org/Fk3Qu)

5.3.0 - 5.5.0beta2 的输出

```
ArrayObject Object
(
    [prop] => prop data
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
        )

)
ArrayObject Object
(
    [prop] => prop data
    [storage:ArrayObject:private] => Array
        (
            [arr] => array data
        )

) 
```

5.1.0 - 5.2.17 的输出

```
ArrayObject Object
(
    [prop] => prop data
)
ArrayObject Object
(
    [arr] => array data
) 
```

这也被报告为一个错误：

*   [错误 #45595 - ArrayObject::STD_PROP_LIST 的行为与 foreach 记录的不同](https://bugs.php.net/bug.php?id=45595)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T02:03:33.457

ArrayObject 文档中的[此页面](http://www.php.net/manual/en/class.arrayobject.php#arrayobject.constants.std-prop-list)上有一个示例。

# angularjs - 使用 angularjs 克隆字段

> ID：12469231
> 
> 赞同：0
> 
> 时间：2012-09-18T01:33:45.667
> 
> 标签：angularjs

我试图弄清楚在AngularJS中使用多个控制器在表单之间克隆字段的最佳方式和最佳方式。我的目标是拥有一个对象并能够将 obj[1] 映射到另一个控制器中的 obj[1]。

这是我的小提琴：

[http://jsfiddle.net/jorgecas99/fw9UA/3/](http://jsfiddle.net/jorgecas99/fw9UA/3/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:13:08.650

只需在服务内部使用更多密钥`item`。[http://jsfiddle.net/fw9UA/4/](http://jsfiddle.net/fw9UA/4/)

# javascript - Javascript 生成从 0 到 75 的随机数

> ID：12469234
> 
> 赞同：0
> 
> 时间：2012-09-18T01:34:02.457
> 
> 标签：javascript

我正在使用这样的东西： `alert("Random number is: "+ Math.floor(Math.random() * 75) + 0);`. 创建一个 0 到 75 之间的随机数。知道如何创建一个 0 到 75 之间的随机数，它不是这个逗号解析字符串中的数字之一： `$not_these_numbers = "17,26,52,75";`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:56:23.560

生成数字数组（0-75，不包括这些数字）然后生成随机索引：

```
var exclude = "17,26,52,75".split(',');
var numbers = [];

for (var i = 0; i <= 75; i++) {
    if (exclude.indexOf(i+'') == -1)
        numbers.push(i);
}

// will never be one of the numbers in exclude array
var random_number = numbers[Math.floor(Math.random() * numbers.length)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:47:12.223

你可以使用一个对象：

```
function getRandLimited() {
  var invalid = { 17:17, 26:26, 52:52, 75:75};
  var rand;
  do {
    rand = Math.floor(Math.random() * 76);
  } while (rand in invalid);
  return rand;
} 
```

# jquery - 如何从返回的 $.getJSON 值附加信息？

> ID：12469236
> 
> 赞同：0
> 
> 时间：2012-09-18T01:34:20.203
> 
> 标签：jquery, json

如何从返回的 $.getJSON 值附加信息？

这是来自 $.getJSON 的返回数据

测试

从带有变量 testNumber 的 $.getJSON 调用返回后，我需要向此内部元素添加其他信息。

```
 <p> Test  + testNumber + </p> 
```

这是我的尝试，但没有以正确的方式工作....

```
 $.getJSON("getTestInformation.php", function(function(data)
        {
                    $.each(data, function()
                    {
                           $(".addTest").html(value).append(testNumber);
                    });
        }); 
```

我得到的输出是这样的：

```
 <p> Test </p> 1 
```

我需要的是这个？

```
 <p> Test  1 </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:39:10.773

利用：

```
$.each(data, function(index, value) {
  $('<p>').html(value + ' ' + testNumber).appendTo('.addTest');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:51:20.167

像这样的东西：

```
$.getJSON("getTestInformation.php", function(function(data)
    {
                $.each(data, function()
                {
                       var txt = $(".addTest").text();
                       $(".addTest").text(text + ' ' + testNumber);
                });
    }); 
```

或者

```
$.getJSON("getTestInformation.php", function(function(data)
    {
                $.each(data, function()
                {
                       $(".addTest").html(value + $("<span>").text(testNumber));
                });
    }); 
```

# javascript - 分配javascript1.7中的左侧无效

> ID：12469240
> 
> 赞同：0
> 
> 时间：2012-09-18T01:35:03.497
> 
> 标签：javascript

**GoogleChrome**中的 JavaScript1.7 错误

 ****例子：**

```
var x, y;
try {
 [x, y] = ["1", "2"];
 document.write(x+": "+y);
} catch(e){
 console.log(e);
} 
```

**捕获错误：** 分配 JavaScript1.7 中的左侧无效

我实际上需要的是测试浏览器是否支持**javascript1.7**

我需要的是实际测试浏览器是否支持 javascript1.7 但不使用这种代码：

js版本=1.7；

这段代码超出了 w3c 的无效范围，还使用全局变量，这可能是一件非常糟糕的事情（可能导致冲突和其他问题）

我尝试使用以下代码（但在**"strict"**中出现错误）

```
var i=0;
try{
    yield i;
} catch(ee) {
    document.write(ee);
} 
```

所以这就是我需要做的，测试浏览器是否支持javascript1.7。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:38:51.053

尝试

```
var isESNext;
try {
  eval('(function () { var x, y; [x, y] = [1, 2]; })()');
  isESNext = true;
} catch (ex) {
  isESNext = false;
} 
```

这用于`eval`解析一些使用[ES.next](http://wiki.ecmascript.org/doku.php?id=harmony%3aspecification_drafts) 模式分解但不是有效的 EcmaScript 5 的代码。声明和分配的其余代码`isESNext`是有效的 EcmaScript 3 代码，但应该在所有浏览器上运行。

您遇到的问题是由于[第 16 章](http://es5.github.com/#x16)：

> # 16 个错误
> 
> 早期错误是可以在评估程序中包含该错误的任何构造之前检测和报告的错误。实施必须在对该程序进行第一次评估之前报告该程序中的早期错误。
> 
> ...
> 
> 实现必须将以下类型错误的任何实例视为早期错误：
> 
> *   任何语法错误。

但是上面的代码片段绕过了早期的错误，因为

> 调用`eval`时报告代码中的早期错误`eval`**

# c# - 使用单个上下文容器使用线程同时执行多个查询？

> ID：12469243
> 
> 赞同：0
> 
> 时间：2012-09-18T01:35:19.983
> 
> 标签：c#, .net, multithreading, entity-framework, entity-framework-4

我创建了一个上下文，然后使用 Parallel.ForEach(...) 我同时执行多个 EF 查询。

我一直在遇到'连接没有关闭。连接的当前状态是正在连接。以及沿着这些方向的其他例外。

我这是由于我的应用程序的线程性质吗？您不能同时使用单个上下文来简单地阅读吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:54:43.067

[对象上下文](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)不是线程安全的，因此您可能不想在多线程场景中使用 Parrallel.Foreach

但是，您可以在启用 MARS 的情况下并行在同一连接上执行多个查询

```
foreach (var employee in context.employees.where(...))
{
   var department = employee.departments.FirstOrDefault(...);
} 
```

但是，您需要了解性能。

# javascript - 脚本标签规则

> ID：12469245
> 
> 赞同：4
> 
> 时间：2012-09-18T01:35:39.243
> 
> 标签：javascript, html, html-parsing

考虑以下 html 文档：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
alert("Hello")
</script>
</head>
</html> 
```

在 Firefox、Safari 和 Chrome 中打开的结果在我的 macbook 中是相同的：一条警告消息显示“Hello”。我正在阅读[此](https://stackoverflow.com/a/5679857/788553)答案以尝试了解浏览器的行为。主要部分是：

> 由于标签的内容被视为 CDATA，因此内容不会被解析，您可以在内容中存储不带引号的 XML 或 HTML（只要您从未`</script>`在内容中放置标签，因为这会关闭您的元素）。

让我们试试当我们在 Firefox 中看到源代码时会发生什么：

![警报调用中带有 </script> 的源代码屏幕截图](../Images/edbf691dfdd1b32558b886e7d9401e96.png)

它显示的浏览器中的输出是`")`因为它认为脚本标记已在警报中关闭。如果我们真的非常想展示，克服这个问题的一种方法`"</script>"`是：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
alert("<"+"/script>")
</script>
</head>
</html> 
```

现在 Firefox 明白了：

![源代码截图](../Images/4e4382ef974897ab7b5929e99f3e4005.png)

### 问题：

解析器检查是否`</script>`是结束部分非常简单。检查这一点确实需要更多时间，但它是可行的（在遇到 之前计算引号的数量`</script>`。如果是偶数则它是结束标签，否则继续寻找结束标签）。问题是，这是我们不能`"</script>"`在 javascript 中编写的规则吗？如果是这样，还有哪些我可能不知道的微妙规则？

说 php 解析器也是如此。`<?php echo "?>" ?>`. 我已经对此进行了测试，并且 php 似乎知道真实`?>`的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:57:22.127

正确，你不能`"</script>"`在内*联*Javascript 中编写，但你可以编写`"<\/script>"`. 在外部 Javascript 文件中，您没有该限制。

Javascript 引擎将`"</script>"`视为脚本的结尾，**而不管它出现的上下文。**

只要您使用的是 HTML 而不是 XHTML，那就是唯一真正的问题。

XHTML，**作为一个 XHTML 文件**[1] 有更多的陷阱，包括`--`作为`XHTML`注释的开头和结尾。

[1] 很少有 XHTML 东西实际上是 XHTML 服务的。它通常作为 HTML 服务，然后由标签汤解析器处理，这样可以理解嵌入的 HTML 注释甚至`CDATA`不属于的标签中的所有内容。

# bash - 使用 awk 或 bash 将文件从一个目录移动到另一个目录

> ID：12469246
> 
> 赞同：0
> 
> 时间：2012-09-18T01:35:52.400
> 
> 标签：bash, awk

我有一个包含 1000 多个文件夹的目录。该目录的每个文件夹都包含一个文本文件。我想将这些文件夹中的文本文件移动到另一个目录。但是新目录中文本文件的名称应该是提取它的文件夹的名称。

如何使用 awk 或 bash 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:40:19.223

您可以使用`for`循环：

```
for i in <folderlist>; do
    mv $i/*.txt <newfolder>/`basename $i`.txt
done 
```

如果所有文件夹都在根目录下，请使用`for i in *`或`for i in $(find <root> -type d -maxdepth 1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:59:13.593

```
for i in $(find  . -maxdepth 2 -mindepth 2 -type f ); do 
    mv  $i $YOUR_DIR/$(dirname $i); 
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:29:37.307

这应该有效。

```
find ./*/ -name "*.txt" | nawk -v new_dir="new_dir" -F/ 'NF==3{cmd="mv ""\""$0"\" " new_dir"/"$2;system(cmd);}' 
```

# facebook - 获取 Facebook 用户的应用列表

> ID：12469252
> 
> 赞同：1
> 
> 时间：2012-09-18T01:36:34.537
> 
> 标签：facebook

我想问个问题：

当 Facebook 用户使用我的应用程序时，我可以检索他们的应用程序列表吗？

我有一个需要这样做的场景：

*   人们玩我的游戏。
*   如果他们已经玩过我的另一款游戏，那么他们将获得额外礼物。

所以我需要知道他们是否已经使用过另一个应用程序。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:52:45.973

> 所以我需要知道他们是否已经使用过另一个应用程序。

然后，您必须将玩游戏的人的用户 ID 保存到您自己的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:53:31.443

您可以使用“我/帐户”查看当前用户的所有应用程序（例如：[https](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Faccounts) ://developers.facebook.com/tools/explorer/?method=GET&path=me%2Faccounts ）

# clojure - 如何将 shell 脚本打包到 leiningen 项目中

> ID：12469259
> 
> 赞同：4
> 
> 时间：2012-09-18T01:37:31.877
> 
> 标签：clojure, leiningen

我保存了一个 shell 脚本`scripts/shell/record_video.sh`，我需要调用我的一个项目。

它在代码中的使用示例：

```
(defn save-mp4 [cam filename duration]
  (sh "scripts/shell/record_video.sh" (:i_url cam) filename (str duration))) 
```

如果我上传到 clojars，我将如何 jar 项目以便包含 shell 脚本？

* * *

### 跟进

谢谢@Ankur。`(sh "bash" :in bash-command-string)`超级好用。我首先需要该`.sh`文件的唯一原因是因为当标准输出包含大的东西（如视频）时，我无法完全弄清楚如何进行重定向。

该文件`scripts/shell/record_video.sh`包含：

```
SRC=rtsp://$1:554/axis-media/media.amp?resolution=1920x1080
DST=$2
LEN=$3
openRTSP -4 -d $LEN -w 1440 -h 1080 -f 25 -u root pass $SRC > $DST 2> /dev/null 
```

而且我不知道如何在`>`不使程序内存消耗巨大的情况下翻译重定向（）。该`(sh "bash" :in bash-command-string)`命令允许在没有 shell 脚本的情况下编写我的函数：

```
(defn save-mp4 [cam filename duration]
  (let [src (format "rtsp://%s:554/axis-media/media.amp?resolution=1920x1080" (:i_url cam))
        cmd (format "openRTSP -4 -d %d -w 1440 -h 1080 -f 25 -u root pass %s > %s 2> /dev/null"
                    duration src filename)]
    (sh "bash" :in cmd))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:17:30.467

两步：

*   将 shell 脚本打包为资源。
*   使用 java 资源 API 读取 shell 脚本文件并使用 `(sh "bash" :in file-str)`

其中文件 str 是使用资源 API 读取的 shell 脚本内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T03:25:23.320

你实际上有两个问题。首先如何将文件放入 jar 文件中。其次，如何从 jar 文件中访问该文件。

第一个很简单：将文件包含在资源目录中。该目录中的所有文件都包含在 jar 文件中。

第二个比较困难，因为`sh`要在磁盘上查找脚本，而不是放在 jar 文件中。您可能必须使用类 loader.getresource 提取文件，然后将其写入磁盘以执行它。

有一个[关于](https://stackoverflow.com/questions/2044394/how-to-load-program-resources-in-clojure)如何从 jar 中读取资源的讨论，最简单的是`(clojure.java.io/resource "myscript.js")`

# javascript - JQuery for loop - 带变量的函数

> ID：12469260
> 
> 赞同：0
> 
> 时间：2012-09-18T01:37:36.347
> 
> 标签：javascript, jquery, variables, loops

有没有办法把它变成一个 for 循环？我必须运行这段代码 114 次，并且正在寻找一种方法来简化它。类名上的数字将是变量。下一个将是 .select3 等...

```
$('.select2').click(function () {
        if ($('.saved_list .thumb2').length == 0 && $('.saved > li').length < totalPic)
            {
                $(this).parent().clone().appendTo('.saved_list ul');
                $('.saved .select2').replaceWith('<div class="remove2">Remove</div>');
                $('.saved a').contents().unwrap(); 
            } else {
                alert ('You can only choose 3 paintings');  
            }
            if ($('.saved_list li').has('.thumb2')) {
                $(".select2 .img-swap").attr("src", "images/check_on.gif");
            } else {
                $(".select2 .img-swap").attr("src", "images/check_off.gif");
        };
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:50:49.617

尝试这个：

```
var run_select = function(index){
    var selector = '.select'+index;
    $(selector).click(function () {
        if ($('.saved_list .thumb2').length == 0 && $('.saved > li').length < totalPic)
        {
            $(this).parent().clone().appendTo('.saved_list ul');
            $('.saved '+selector).replaceWith('<div class="remove2">Remove</div>');
            $('.saved a').contents().unwrap(); 
        } else {
            alert ('You can only choose 3 paintings');  
        }
        if ($('.saved_list li').has('.thumb2')) {
            $(selector+" .img-swap").attr("src", "images/check_on.gif");
        } else {
            $(selector+" .img-swap").attr("src", "images/check_off.gif");
        };
    });
};
var i, l = 114;
for(i=1;i<=114;i++){
    run_select(i);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T02:17:14.093

首先，如果可以的话，简化 html。使用 id 作为唯一标识符，使用相同的名称作为 css 类。像这样：

```
<div id='select2' class='select'></div> 
```

`.each()`如果您想获得所有物品，请使用：

```
$('.select').each(function() {
    // use $(this) here to refer to the current item
}); 
```

但在您的情况下，您可以像这样简单地应用“点击”事件：

```
$('.select').click(function(e) {
       // use $(this) or $(e.target) here to refer to the current item
       // if you need to get the id number you could get it from the id
       // (supposing has id='select2')

       var id = $(this).attr('id').substring(6); // it returns 2
}); 
```

# javascript - 将音频添加到 If 语句

> ID：12469264
> 
> 赞同：1
> 
> 时间：2012-09-18T01:38:46.060
> 
> 标签：javascript

我将 java 脚本用于一个简单的 if else 语句，并试图向它添加一些音频。在正确的时候播放一首歌曲，如果不好则播放另一首。这是我减去实际 if 语句的内容。我注释掉了音频部分，因为这破坏了我的代码并且无法让它工作。

```
if (x is true)
      {
    document.write("Good job!<br />");

        /*<audio controls = "controls" autoplay = "autoplay" loop ="loop" >
        <source src = "congrats.ogg" type = "audio/ogg" />
        <source src = "congrats.mp3" type = "audio/mpeg" />
        <source src = "congrats.wav" type = "audio/wav" />
        Your browser does not support the audio element
        </audio>*/
      }
else
      {
    document.write("Boo!<br />");
      } 
```

任何帮助表示赞赏！

**更新澄清：**我想说如果我的“if 语句”执行，播放 song1，如果我的“else 语句”执行，播放 song2。

**更新，工作！：** 做了更多的研究，并能够找到以下对我有用的代码片段。

[http://www.position-absolute.com/articles/introduction-to-the-html5-audio-tag-javascript-manipulation/](http://www.position-absolute.com/articles/introduction-to-the-html5-audio-tag-javascript-manipulation/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:53:30.023

使用 JavaScript，您可以执行以下操作：

```
var supports = function(mime) { return (new Audio()).canPlayType('audio/' + mime); };
var sound;

if (supports('ogg; codecs=vorbis')) {
    sound = new Audio('congrats.ogg');
} else if (supports('mpeg')) {
    sound = new Audio('congrats.mp3');
} else if (supports('wav')) {
    sound = new Audio('congrats.wav');
} else {
  alert('Your browser is horrible');
}

if (typeof sound !== 'undefined') {
    sound.play();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T01:42:11.900

你真的有`if (x is true)`吗？

那应该只是`if (x)`

# django - 无法在 Django 中执行 runserver：“TypeError：putenv() 参数 2 必须是字符串，而不是无”

> ID：12469266
> 
> 赞同：0
> 
> 时间：2012-09-18T01:38:50.247
> 
> 标签：django, linux

我在 Windows 中创建并成功运行了 Django 项目，但是在将其复制到 Linux 并执行命令“python manage.py runserver”后出现以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    os.environ.setdefault("DJANGO_SETTINGS_MODULE")
  File "/home/blizzard/webapps/django_1_3/moz455/env0/lib/python2.6/UserDict.py", line 63, in setdefault
    self[key] = failobj
  File "/home/blizzard/webapps/django_1_3/moz455/env0/lib/python2.6/os.py", line 472, in __setitem__
    putenv(key, item)
TypeError: putenv() argument 2 must be string, not None 
```

key 和 item 的正确值是“DJANGO_SETTINGS_MODULE”和“settings”。
如何避免这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:16:57.717

答案很简单，不应该问这个问题:) 但也许它可以节省几分钟。对于 Linux，正确的命令是

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", 'my_project_name.settings') 
```

# mysql - MySQL获取旧记录插入的时间？

> ID：12469270
> 
> 赞同：6
> 
> 时间：2012-09-18T01:39:18.957
> 
> 标签：mysql, sql

我的数据库中有一个表，其中包含我的应用程序的所有用户。不幸的是，当我启动我的应用程序时，我没想过要包含一个跟踪特定用户注册时间的列，现在我希望我有（坏主意，确实如此）。

幸运的是，MySQL 是否有一种方法可以在插入特定记录时进行跟踪（例如在记录元数据中？？？），并允许我抓住它并为此目的插入一个新的专用列？

我在共享的 cPanel 主机上运行，​​所以我怀疑我是否可以访问 MySQL 日志。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:37:06.180

只有启用了二进制日志记录，您才能跟踪事务的确切时间。

[http://dev.mysql.com/doc/refman/5.5/en/binary-log.html](http://dev.mysql.com/doc/refman/5.5/en/binary-log.html)

它不仅用于复制，而且在紧急情况下也是一种事务记录形式。

# actionscript-3 - Action Script 3 键盘事件设置焦点

> ID：12469276
> 
> 赞同：0
> 
> 时间：2012-09-18T01:40:11.570
> 
> 标签：actionscript-3

我在 init 方法中将焦点设置到文本字段，但是键盘输入事件仅在我首先单击文本字段时才有效。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:26:08.457

这是因为，在 AS3 中，默认情况下，`stage`获得了焦点。因此，如果您将键盘事件侦听器添加到除`stage`您必须将焦点设置到该对象之外的任何内容。例如，如果`txt`是您的文本字段，则您正在添加一个键盘事件侦听器，`txt`那么您必须为此获得焦点

```
stage.focus = txt; 
```

该行将焦点带到文本字段，但请记住，如果您单击除此之外的任何内容，该对象就会获得焦点。不用说，`txt`失去焦点。

**提示**：尝试使用将键盘事件侦听器添加到`stage`，如果这样做，则无论哪个对象具有焦点，它都会在单击或释放键时调度事件。

```
stage.addEventListener(KeyBoardEvent.KEY_DOWN, onKeyDown); 
```

# visual-studio - 动态生成 Visual Studio 解决方案和项目文件

> ID：12469277
> 
> 赞同：1
> 
> 时间：2012-09-18T01:40:11.767
> 
> 标签：visual-studio, templates

如何动态生成 Visual Studio 解决方案和项目文件？就像`./configure`脚本所做的那样。可以接受参数。例如：在 MyProject.sln.template

```
#if VS_2012
Microsoft Visual Studio Solution File, Format 12.00
#elseif VS_2010
Microsoft Visual Studio Solution File, Format 11.00
#elseif VS_2008
Microsoft Visual Studio Solution File, Format 10.00
#endif
#if VS_2012
Project("{12345678-8B4A-11D0-8D11-00A0C91BC942}") = "Project1", "Project1\Project1.vcproj", "{98765432-E41A-4C56-B16F-263D2C6D6475}"
EndProject
#endif 
```

我应该使用什么工具？但我不想使用`./configure`脚本。这些工具最好适用于任何类型的文本文件。因为我有其他类型的文件要生成，而不仅仅是解决方案/项目文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:29:09.317

You can consider [cmake](http://www.cmake.org/) which generates workspaces/projects from a config script. Cmake is actually very powerful to maintain platform-independent build scripts. But it will suit your need.

Another option is a home-grown tool to create the sln/vcproj files. They are ultimately XML. There is probably no written documentation but you could reverse engineer from an existing workspace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T22:07:15.687

我在 github [Nager.TemplateBuilder](https://github.com/tinohager/Nager.TemplateBuilder)上找到了这个解决方案。

此示例使用两个 nuget 包创建一个 Windows 桌面应用程序

```
//Configure Project
var demoProject = new ProjectInfo($"DemoProject", ProjectTemplate.WindowsClassicDesktopWindowsFormsApp);
demoProject.NugetPackages = new List<string> { "System.ServiceModel.NetTcp", "System.Runtime.Serialization.Xml" };

//Configure Solution
var folder = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
var solutionInfo = new SolutionInfo("Test", folder);
solutionInfo.ProjectInfos.Add(demoProject);

//Start building machine
var buildingMachine = new SolutionBuildingMachine();
buildingMachine.Build(solutionInfo);
buildingMachine.Dispose(); 
```

# c - 使用唯一的 short 和 double 值

> ID：12469286
> 
> 赞同：0
> 
> 时间：2012-09-18T01:41:38.277
> 
> 标签：c, windows, numbers

我有一个 C 的短裤数组和一个多头数组。我希望能够定义一个数组插槽何时无法被调用它的函数填充，因为数据不足或丢失。两种情况下的有效值都可以是正数或负数，但我可以放心地假设这些值永远不会接近可以放置在 short 或 double 中的最大值。

这是一个 Windows 64 位应用程序，我一直使用`SHRT_MAX`它作为唯一的短编号。我的问题是：

1.  `SHRT_MAX`我可以使用的等价物是什么`double`？

2.  `SHRT_MAX`有没有更好的方法来做到这一点，而不是诉诸`double`最大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:55:48.650

我假设您使用最大值来指示数组中的*空*参数。这是一种常见的技术，并且是完全有效的。

至于最大双倍，你想要`DBL_MAX`from `<float.h>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:57:28.460

宏的存在正是您使用它们的原因 - 所以这很好（并且可移植）

看一下`DBL_MAX`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:01:12.453

1）您可以使用`DBL_MAX`float.h 或`numeric_limits<double>::max()`

2）只要您确定它们永远不会是“正常”值，使用最大值似乎没问题。否则，您可以使用一个知道数字是否已更改的小对象：

```
struct Input
{
    short value;
    bool isTransformed;

    Input() : value(0), isTransformed(false) {}
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:14:26.600

您可以使用信号 NaN ( `numeric_limits::signaling_NaN`)。这样，如果有人尝试使用它，他们将接受浮点异常。

# c - 按位逻辑检查？

> ID：12469288
> 
> 赞同：1
> 
> 时间：2012-09-18T01:41:53.423
> 
> 标签：c, logic, bit-manipulation

我在搞乱按位运算，想实现一个简单的逻辑难题，你有一只狐狸（狼）、鸡（鹅）、谷物（玉米）和一个试图过河的人。我使用每个位的前 4 位来表示它们在河的哪一侧。

我在尝试实现逻辑时遇到了一些麻烦。

如何检查这两位是 1 还是 0 但不是 1 和 0？

```
int game()
{
    int state = 0;
    int done = 0;
    while (!done)
    {
        int input = 0;
        input = move();

        /*
           0000 0000
                |||\_grain
                ||\__chicken
                |\___fox
                \____person
           0 = left side of the river
           1 = right side
        */
        if (input == 3)// Moves person and grain
        {
            // Move the grain if the person is on the same side.
            if (!(state & 1 << 3 ^ state & 1<< 0))
            {
                state ^= 1 << 3;
                state ^= 1 << 0;
            }
            else
            {
                // Always switch the person no matter what
                state ^= 1 << 3;
            }
        }
        else if (input == 2) // Moves person and chicken
        {
            // Move Chicken only if person is on the same side
            if (!(state & 1 << 3 ^ state & 1<< 1))
            {
                state ^= 1 << 3;
                state ^= 1 << 1;
            }
            else
            {
                // Always switch the person no matter what
                state ^= 1 << 3;
            }
        }
        else if (input == 1)// Moves person and fox
        {
            // Move the fox if the person is on the same side.
            if (!(state & 1 << 3 ^ state & 1<< 2))
            {
                state ^= 1 << 3;
                state ^= 1 << 2;
            }
            else
            {
                // Always switch the person no matter what
                state ^= 1 << 3;
            }
        }

        // Fox and Chicken on one side and person on the other = lost
        if ((state & 1 << 2 && state & 1 << 1) && ~(state & 1 << 3))
        {
            printf("Failed\n");
        }
    }
    return 1;
} 
```

我猜按位检查会是更优雅的代码，但似乎更痛苦。当我厌倦了用按位逻辑将头撞到墙上时，我总是会这样做。

```
int game()
{
    int state = 0;
    int done = 0;
    while (!done)
    {
        int input = 0;
        input = move();

        /*
           0000 0000
                   | | | \_grain
                   | | \__chicken
                   | \___fox
                   \____person
           0 = left side of the river
           1 = right side
        */
        if (input == 3)// Moves person and grain
        {
            // Are they on the same side?
            if (state == 9 || state == 11 || state == 13 || state == 15 ||
                state == 0 || state == 2 || state == 4 || state == 6)
            {
                // Move the person and grain
                state ^= 1 << 3;
                state ^= 1 << 0;
            }
            else
            {
                state ^= 1 << 3;
            }
        }
        else if (input == 2) // Moves person and chicken
        {
            // Are they on the same side?
            if (state == 10 || state == 11 || state == 14 || state == 15 ||
                state == 0 || state == 1 || state == 4 || state == 5)
            {
                // Move the person and chicken
                state ^= 1 << 3;
                state ^= 1 << 1;
            }
            else
            {
                state ^= 1 << 3;
            }
        }
        else if (input == 1)// Moves person and fox
        {
            // Are they on the same side?
            if (state == 12 || state == 13 || state == 14 || state == 15 ||
                state == 0 || state == 1 || state == 2 || state == 3)
            {
                // Move the person and fox
                state ^= 1 << 3;
                state ^= 1 << 2;
            }
            else
            {
                state ^= 1 << 3;
            }
        }
        else
        {
            // Always switch the person no matter what
            state ^= 1 << 3;
        }

        //Check if you won or lost
        if (state == 3 || state == 6 || state == 8 || state == 9 || state == 12) // Lost
        {
            return 0;
        }
        if (state == 15) // Won
        {
            return 1;
        }
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:54:10.443

> 如何检查这两位是 1 还是 0 但不是 1 和 0？

如何比较它们是否相等？

```
#define MAN_MASK   (1<<3)
#define GRAIN_MASK (1<<0)

if(  
     ((state & MAN_MASK) == 0)
            == 
     ((state & GRAIN_MASK) == 0)
  ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:09:23.657

只要 if 语句的条件不为零，C 就会将 if 语句的条件评估为真。

[XOR](http://en.wikipedia.org/wiki/Xor "异或")运算符( ^) 可能不是您想要用来测试是否设置了位的对象，例如这里：

```
// Move the grain if the person is on the same side.
if (state ^ 1 << 3 && state ^ 1 << 0) 
```

让我们假设在这种情况下状态变量应该失败，忽略 int 的 sizeof，并使用`1110 0001`. 这将人放在河流的高阶一侧，谷物位于低阶一侧。

if 语句的第一个条件`state ^ 1 << 3`, 将创建一个临时掩码`1110 1001`. 第二个，state ^ 1 << 0，将创建一个位掩码`1110 0000`。这是胡说八道，不是你想要的。

因此，给定您希望失败的输入 ( `1110 0001`)，此 if 语句类似于：

```
if ( 0b11101001 && 0b11100000 ) 
```

哪个成功（这很糟糕。）

您可能想要做的是确保谷物和人都在“河”的右侧，在各自的位置（ 1 << 3 和 1 << 0 ）。最好的按位运算符是[AND](http://en.wikipedia.org/wiki/Binary_and#AND "和")运算符。

这闻起来有点像家庭作业问题，所以我不会完全回答你的问题；但是你应该有足够的上下文来让自己指向正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:03:51.697

要检查两个位是否处于相同状态，请将其中一个位移动到另一个位的位置，将`XOR`它们一起移动，`AND`该位指示位置，并检查结果是否为零。例如，要查看第 1 位与第 3 位相同，请执行以下操作：

```
// Shift bit 3 to position 1, XOR, mask with 2, and check for zero
if ((2 & ((state >> 2) ^ state)) == 0) {
    ...
} 
```

# c++ - 我的 if 语句到底有什么问题？

> ID：12469289
> 
> 赞同：2
> 
> 时间：2012-09-18T01:41:56.643
> 
> 标签：c++

我尝试了不同的方式来布置我的 if 语句，我什至尝试了嵌套的 if 语句。我得到相同的结果。除了显示我的代码之外，我不确定有什么方法可以问我的问题。

```
#include <iostream>
#include <conio.h>
#include <string>

using namespace std;

int main()
{
char playerOne, playerTwo;

cout<<"ROCK PAPER SCISSORS!"<<endl;
cout<<"Enter P for Paper"<<endl;
cout<<"Enter R for Rock"<<endl;
cout<<"Enter S for Scissors"<<endl;

cout<<"Player One enter your choice: ";
cin>>playerOne;

cout<<"Player Two enter your choice: ";
cin>>playerTwo;

if ((playerOne = 'R') && (playerTwo = 'R'))
    cout<<"Both players played same hand";
else if ((playerOne = 'R') && (playerTwo = 'P'))
    cout<<"Player Two wins!";
else if ((playerOne = 'R') && (playerTwo = 'S'))
    cout<<"Player One wins!";
else if ((playerOne = 'P') && (playerTwo = 'R'))
    cout<<"Player One wins!";
else if ((playerOne = 'P') && (playerTwo = 'P'))
    cout<<"Both players played same hand";
else if ((playerOne = 'P') && (playerTwo = 'S'))
    cout<<"Player Two wins!";
else if ((playerOne = 'S') && (playerTwo = 'R'))
    cout<<"Player Two wins!";
else if ((playerOne = 'S') && (playerTwo = 'P'))
    cout<<"Player One wins!";
else if ((playerOne = 'S') && (playerTwo = 'S'))
    cout<<"Both players played same hand";
else
    cout<<"Invalid inputs!";

getche();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T01:43:44.330

你需要双`==`符号而不是`=`

`==`可以读作“等于”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T01:44:35.597

你必须使用`==`而不是`=`。相等的运算符`==`测试，运算符`=`是赋值运算符

通过使用`=`，您正在分配而不是测试相等性。因此，当分配成功时，条件总是评估为真，除非分配的值是（或实际上是）0。（感谢 pickypg）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T01:54:29.867

如前所述，您需要`==`.

但是，这里有一些做法可以提供帮助。

首先，始终将常量和函数返回值放在首位。 `if('R' = playerOne...)`将无法编译并准确告诉您在哪里可以找到它。

其次，考虑`tolower()`对输入进行处理（并将常量小写）以允许`'R'`且`'r'`不必同时测试两者。

第三，您可以删除几个 if 语句`if(playerOne == playerTwo)`。不幸的是，这需要首先对输入进行有效性检查，以避免两个玩家输入相同的无效字符。但是，您可能希望在输入错误的情况下进行此检查，例如输入“ERRR”的第一个字符会使（使用您的代码）“ER”无效，然后运行“RR”。

第四，您可以使用硬编码数组`std::map`等来对数据进行编码，并在没有所有 if 语句的情况下使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:18:56.927

正如其他人指出的那样，您会想要使用`==`.

`==`是检查相等性，`=`赋值运算符在哪里`int num = 1;`

在您的情况下，`==`是您需要的操作员。

# android - 语法错误 { 预期

> ID：12469291
> 
> 赞同：-4
> 
> 时间：2012-09-18T01:42:05.967
> 
> 标签：android

如第 28 行和第 28 行所示，有两个错误，有人知道为什么我会收到这些错误吗

```
package com.xcxcxc;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.provider.UserDictionary;
import android.text.TextUtils;
import android.util.Log;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class UserDict extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.audiolistmain);
}

SimpleCursorAdapter adapter;
ListView audiolist = (ListView) findViewById(R.id.audioList);

String[] mProjection =
{
    UserDictionary.Words._ID,    
    UserDictionary.Words.WORD,   
    UserDictionary.Words.LOCALE  
};

String mSelectionClause = null;
String[] mSelectionArgs = {""};
static final String[] DBFIELDS= {UserDictionary.Words.WORD,     UserDictionary.Words.LOCALE};
static final int[] LISTFIELDS = { R.id.dictWord,R.id.locale};

String mSearchString = "m";  //syntax error on token ";" { expected after this token
if (TextUtils.isEmpty(mSearchString)) {
mSelectionClause = null;
mSelectionArgs[0] = "";

} else {
    mSelectionClause = UserDictionary.Words.WORD + " = ?";
    mSelectionArgs[0] = mSearchString;

}   

Cursor mCursor = getContentResolver().query(
    UserDictionary.Words.CONTENT_URI,  
mProjection,                       
mSelectionClause,                  
mSelectionArgs,                    
null);

if (null == mCursor) {
Log.e("Cursor returned null, query could not be performed","");
} else if (mCursor.getCount() < 1) {
Toast.makeText(this, "nowords"+mSearchString+"found",     Toast.LENGTH_LONG).show();
} else {
int[] mWordListItems = { R.id.dictWord, R.id.locale};
String[] mWordListColumns =
{
UserDictionary.Words.WORD,   
UserDictionary.Words.LOCALE  
};

SimpleCursorAdapter mCursorAdapter = new SimpleCursorAdapter(
getApplicationContext(),               
R.layout.row,                   
mCursor,                            
DBFIELDS,                      
LISTFIELDS); 

audiolist.setAdapter(mCursorAdapter);

}   // syntax error insert } to complete class body 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:50:54.203

紧跟在您显示为带有错误标记的行之后的行是应该在方法内的代码，但不是。我猜你不是打算`onCreate`在这条线之后关闭：

```
setContentView(R.layout.audiolistmain); 
```

并且您在此处列出的所有代码都应该是该方法的一部分。只需删除`}`下一行的右括号，并在文件末尾添加两个右括号，它应该匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:54:02.067

要解决第二个问题，您需要在文件末尾关闭“}”来完成类主体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:16:42.703

如果您仍然不明白@Xono 所说的话

删除 { 的这个

```
 package com.xcxcxc;
    import android.app.Activity;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.provider.MediaStore;
    import android.provider.UserDictionary;
    import android.text.TextUtils;
    import android.util.Log;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;
    import android.widget.Toast;

    public class UserDict extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.audiolistmain);
    }   <--------------- THIS ONE
    ^
    |
    |
    |
    |
    |
    |
    |
 THIS ONE 
```

并将其放在最底部....

**编辑：**

还添加另一个 { 以关闭课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T05:17:52.923

```
package com.xcxcxc;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.MediaStore;
import android.provider.UserDictionary;
import android.text.TextUtils;
import android.util.Log;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class UserDict extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.audiolistmain);
    // "{" ====>> Removed

    SimpleCursorAdapter adapter;
    ListView audiolist = (ListView) findViewById(R.id.audioList);

    String[] mProjection =
    {
        UserDictionary.Words._ID,    
        UserDictionary.Words.WORD,   
        UserDictionary.Words.LOCALE  
    };

    String mSelectionClause = null;
    String[] mSelectionArgs = {""};
    static final String[] DBFIELDS= {UserDictionary.Words.WORD,     UserDictionary.Words.LOCALE};
    static final int[] LISTFIELDS = { R.id.dictWord,R.id.locale};

    String mSearchString = "m";  //syntax error on token ";" { expected after this token
    if (TextUtils.isEmpty(mSearchString)) {
        mSelectionClause = null;
        mSelectionArgs[0] = "";

    } else {
        mSelectionClause = UserDictionary.Words.WORD + " = ?";
        mSelectionArgs[0] = mSearchString;
    }   

    Cursor mCursor = getContentResolver().query( UserDictionary.Words.CONTENT_URI,  
                mProjection,                       
                mSelectionClause,                  
                mSelectionArgs,                    
                null);

    if (null == mCursor) {
        Log.e("Cursor returned null, query could not be performed","");
    } else if (mCursor.getCount() < 1) {
        Toast.makeText(this, "nowords"+mSearchString+"found",     Toast.LENGTH_LONG).show();
    } else {
        int[] mWordListItems = { R.id.dictWord, R.id.locale};
        String[] mWordListColumns =
        {
            UserDictionary.Words.WORD,   
            UserDictionary.Words.LOCALE  
        };

        SimpleCursorAdapter mCursorAdapter = new SimpleCursorAdapter(
                                        getApplicationContext(),               
                                        R.layout.row,                   
                                        mCursor,                            
                                        DBFIELDS,                      
                                        LISTFIELDS); 

        audiolist.setAdapter(mCursorAdapter);

    } 
}   //===========> "}" added
}   //===========> "}" added 
```

# objective-c - ios中的字符串分词器

> ID：12469293
> 
> 赞同：-4
> 
> 时间：2012-09-18T01:42:12.187
> 
> 标签：objective-c, ios, stringtokenizer

我喜欢将字符串标记为字符并将标记存储在字符串数组中。我正在尝试使用以下无法正常工作的代码，因为我正在使用 C 表示法来访问数组。需要改变什么来代替旅行路径[i]？

```
NSArray *tokanizedTravelPath= [[NSArray alloc]init];
for (int i=0; [travelPath length]; i++) {
    tokanizedTravelPath[i]= [travelPath characterAtIndex:i]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:49:37.243

您需要一个 NSMutableArray 来设置数组的每个元素（否则您无法更改其对象）。此外，您只能在数组中插入对象，因此您可以：
- 插入包含字符的 NSString；
- 改用 C 风格的数组。
这是如何使用 NSMutableArray：

```
NSMutableArray *tokanizedTravelPath= [[NSMutableArray alloc]init];
for (int i=0; i<[travelPath length]; i++) 
{
    [tokanizedTravelPath insertObject: [NSString stringWithFormat: @"%c", [travelPath characterAtIndex:i]] atIndex: i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:50:06.047

您不能将`unichar`s 存储在`NSArray*`. 你到底想完成什么？An`NSString*`已经是 s 集合的一个很好的表示`unichar`，并且您已经拥有其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:00:55.167

I count 3 errors in your code, I explain them at the end of my answer.
First I want to show you a better approach to split a sting into it characters.

* * *

While I agree with Kevin that an `NSString` is a great representation of unicode characters already, you can use this block-based code to split it into substrings and save it to an array.

Form the docs:

> [`enumerateSubstringsInRange:options:usingBlock:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW86)
> Enumerates the substrings of the specified type in the specified range of the string.

```
NSString *hwlloWord = @"Hello World";
NSMutableArray *charArray = [NSMutableArray array];
[hwlloWord enumerateSubstringsInRange:NSMakeRange(0, [hwlloWord length])
                              options:NSStringEnumerationByComposedCharacterSequences
                           usingBlock:^(NSString *substring,
                                        NSRange substringRange,
                                        NSRange enclosingRange,
                                        BOOL *stop)
{
    [charArray addObject:substring];
}];
NSLog(@"%@", charArray); 
```

Output:

```
(
    H,
    e,
    l,
    l,
    o,
    " ",
    W,
    o,
    r,
    l,
    d
) 
```

* * *

But actually your problems are of another nature:

*   An `NSArray` is immutable. Once instantiated, it cannot be altered. For mutable array, you use the `NSArray` subclass [`NSMutableArray`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html).

*   Also, `characterAtIndex` does not return an object, but a primitive type — but those can't be saved to an `NSArray`. You have to wrap it into an `NSString` or some other representation.

    You could use `substringWithRange` instead.

    ```
    NSMutableArray *tokanizedTravelPath= [NSMutableArray array];
    for (int i=0; i < [hwlloWord length]; ++i) {
        NSLog(@"%@",[hwlloWord substringWithRange:NSMakeRange(i, 1)]);
        [tokanizedTravelPath addObject:[hwlloWord substringWithRange:NSMakeRange(i, 1)]];
    } 
    ```

*   Also your for-loop is wrong, the for-loop condition is not correct. it must be `for (int i=0; i < [travelPath length]; i++)`

# java - 流口水验证唯一且依赖

> ID：12469297
> 
> 赞同：0
> 
> 时间：2012-09-18T01:43:44.490
> 
> 标签：java, collections, drools

我有一个`POJOs`内存集合，这些`POJOs`来自其他系统。我有以下两个问题：

1.  我想知道 POJO 在属性值方面是重复的。

2.  我还验证了其他集合，即我在一个城市有 200 家商店，商店 ID 从 1 开始，到 200 结束。我从商店获得了数据，它向我提交了 500 作为商店 ID。我想根据我收集的数据来验证数据是否正确？

我目前卡住了，不知道如何执行这些操作。我正在收集市场趋势的数据，来自全市各地的商店都在我们这里注册。我们为每个商店分配了 ID。店主将以纯文件格式向我们发送他们的销售详细信息。我的任务是在数据库中收集正确的数据。如果店铺或商品 id 与我的收藏不匹配，则该记录将不正确，我通知店主该记录无效。如果文件包含两次或多次相同的行，我会通知它是重复的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:39:54.357

我认为您需要`equals()`为这些实现方法`POJOs`才能说一个对象与另一个对象重复。然后，您可以继续将`POJOs`收到的插入到 a 中`java.util.Set`，每次收到新的时，您都可以使用 . 检查 POJO 是否已经收到`set.contains()`。

对于 #2，您可以维护`Map`另一个集合中对象的 ID，以检查新到达的对象是否`POJO`是该地图中存在的有效对象。

AFAIK，`drools`要求您提供对象的规范表示来运行对象状态的规则。上述两个验证要求您维护这些数据结构，而不管使用流口水或任何其他规则引擎。

# mysql - MySQL，URL 编码 varchar 列

> ID：12469299
> 
> 赞同：3
> 
> 时间：2012-09-18T01:43:50.070
> 
> 标签：mysql

我们有一个第三方系统将数据从他们的服务器拉到网络客户端。服务器连接到 MySQL 数据库。数据正在通过 JSON 字符串传输。显然，其中一列的字符在引入 JSON 字符串时会破坏格式。我唯一的办法是修复列中的数据。我正在考虑对所有内容进行 URL 编码。在 MySQL 中是否有一种简单的方法可以做到这一点？

这是对封闭系统行为的有根据的猜测。我将向数据表 (column_b) 添加另一列。然后我想用 column_a 中的 URL 编码数据填充它。像这样： UPDATE mytable set column_b = some_url_encode_function(column_a);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-02T04:13:17.567

基于来自 undecode 函数的类似响应，我提供了我修改为编码的下一个代码：

```
-- =======================================================
-- This is a function to replace bad for good characters, this function works based in a table with the mapping
-- =======================================================
-- drop the table if it exists
DROP TABLE IF EXISTS urlcodemap;
-- =======================================================
-- Here the table required for the mapping
CREATE TABLE `urlcodemap` (
`id` INTEGER NOT NULL AUTO_INCREMENT,
`encoded` VARCHAR(100) NOT NULL,
`decoded` VARCHAR(100) NOT NULL,
`defEncode` BIT(1) NOT NULL DEFAULT b'0',
UNIQUE KEY urlcodemapUIdx1(encoded),
KEY urlcodemapUIdx2(decoded),
KEY urlcodemapUIdx3(defEncode),
PRIMARY KEY (`id`)  
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

-- very important that % must be the first character to replace
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%25","%", b'1');

-- the next block include the flag defEncode which indicates is necesary to encode the character
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%20"," ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%21","!", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%22","""", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%23","#", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%24","$", b'1');

INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%26","&", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%27","'", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%28","(", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%29",")", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2A","*", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2B","+", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2C",",", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2D","-", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2E",".", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%2F","/", b'1');

INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3A",":", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3B",";", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3C","<", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3D","=", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3E",">", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%3F","?", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%40","@", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%5B","[", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%5C","\\", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%5D","]", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%5E","^", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%5F","_", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%60","`", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%7B","{", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%7C","|", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%7D","}", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%7E","~", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%80","`", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%82","‚", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%83","ƒ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%84","„", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%85","…", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%86","†", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%87","‡", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%88","ˆ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%89","‰", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%8A","Š", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%8B","‹", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%8C","Œ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%8E","Ž", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%91","‘", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%92","’", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%93","“", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%94","”", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%95","•", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%96","–", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%97","—", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%98","˜", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%99","™", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%9A","š", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%9B","›", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%9C","œ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%9E","ž", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%9F","Ÿ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A1","¡", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A2","¢", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A3","£", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A4","¤", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A5","¥", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A6","¦", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A7","§", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A8","¨", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%A9","©", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%AA","ª", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%AB","«", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%AC","¬", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%AE","®", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%AF","¯", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B0","°", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B1","±", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B2","²", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B3","³", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B4","´", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B5","µ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B6","¶", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B7","·", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B8","¸", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%B9","¹", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BA","º", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BB","»", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BC","¼", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BD","½", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BE","¾", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%BF","¿", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C0","À", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C1","Á", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C2","Â", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C3","Ã", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C4","Ä", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C5","Å", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C6","Æ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C7","Ç", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C8","È", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%C9","É", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CA","", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CB","Ë", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CC","Ì", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CD","Í", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CE","Î", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%CF","Ï", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D0","Ð", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D1","Ñ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D2","Ò", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D3","Ó", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D4","Ô", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D5","Õ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D6","Ö", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D7","×", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D8","Ø", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%D9","Ù", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DA","Ú", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DB","Û", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DC","Ü", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DD","Ý", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DE","Þ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%DF","ß", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E0","à", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E1","á", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E2","â", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E3","ã", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E4","ä", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E5","å", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E6","æ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E7","ç", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E8","è", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%E9","é", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%EA","ê", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%EB","ë", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%EC","ì", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%ED","í", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%EE","î", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%EF","ï", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F0","ð", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F1","ñ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F2","ò", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F3","ó", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F4","ô", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F5","õ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F6","ö", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F7","÷", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F8","ø", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%F9","ù", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FA","ú", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FB","û", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FC","ü", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FD","ý", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FE","þ", b'1');
INSERT INTO urlcodemap (encoded,decoded, defEncode) VALUES ("%FF","ÿ", b'1');

-- these characters are not required to be inserted in the table, but a URLDecode function can
-- be constructed with them

INSERT INTO urlcodemap (encoded,decoded) VALUES ("%30","0");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%31","1");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%32","2");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%33","3");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%34","4");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%35","5");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%36","6");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%37","7");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%38","8");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%39","9");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%41","A");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%42","B");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%43","C");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%44","D");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%45","E");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%46","F");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%47","G");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%48","H");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%49","I");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4A","J");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4B","K");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4C","L");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4D","M");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4E","N");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%4F","O");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%50","P");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%51","Q");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%52","R");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%53","S");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%54","T");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%55","U");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%56","V");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%57","W");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%58","X");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%59","Y");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%5A","Z");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%61","a");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%62","b");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%63","c");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%64","d");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%65","e");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%66","f");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%67","g");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%68","h");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%69","i");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6A","j");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6B","k");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6C","l");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6D","m");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6E","n");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%6F","o");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%70","p");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%71","q");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%72","r");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%73","s");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%74","t");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%75","u");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%76","v");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%77","w");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%78","x");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%79","y");
INSERT INTO urlcodemap (encoded,decoded) VALUES ("%7A","z");

-- =======================================================
-- NEXT: The function that does the magic

DELIMITER $$

DROP FUNCTION IF EXISTS `URLENCODERCUR`$$

CREATE FUNCTION `URLENCODERCUR`(str VARCHAR(4096) CHARSET utf8) RETURNS VARCHAR(4096) DETERMINISTIC
BEGIN
DECLARE chr VARCHAR(256);
DECLARE chrto VARCHAR(256);               
DECLARE done INT DEFAULT FALSE;
DECLARE cur1 CURSOR FOR SELECT decoded, encoded FROM urlcodemap WHERE defEncode = b'1' ORDER BY id ;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN cur1;

-- iterate through the replacements
read_loop: LOOP
    FETCH cur1 INTO chr, chrto;

    IF done THEN
    LEAVE read_loop;
    END IF;

    SET str = REPLACE(str,chr,chrto);

END LOOP;

-- required to erase the flag of NOT FOUND DATA ( mysql bug ? )
SELECT '', '' INTO chr, chrto;

CLOSE cur1;

RETURN str;
END$$

DELIMITER ;  
-- ======================================================= 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T01:57:28.367

如果您知道是什么字符导致您出现问题，您可以`REPLACE`在查询中添加一个。

```
SELECT REPLACE(theProblemColumn, 'badCharacter', 'prettyCharacter') AS sunshine 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-18T12:22:36.147

一种选择是使用替代品作为

```
/*Transforms varchar to a base64 format string*/
select to_base64(field) as encodedField

/* from_base64(encoded) does the opposite, transforming
 base64 string to the original varchar string */ 
```

大多数语言都有类似 base64_decode 的功能来检索它。

# google-app-engine - 使用 JDO 访问具有双向无主一对一关系的 GAE 实体的堆栈溢出

> ID：12469300
> 
> 赞同：2
> 
> 时间：2012-09-18T01:44:08.350
> 
> 标签：google-app-engine, jdo, datanucleus

我正在为 Google App Engine 编写 Java 应用程序。我有两个实体需要建模为双向无主一对一关系：

第一个对象'ContainableObject'

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class ContainableObject {

/*=== Data Model ===*/
@PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long key;

@Persistent
@Unowned
private Container container; 
```

和第二个“容器”

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class Container {

/*=== Data Model ===*/
@PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long key;

@Persistent
@Unowned
private ContainableObject containable; 
```

Container 可以是空的，也可以包含一个 ContainableObject。一个 ContainableObject 可以在一个 Container 中，可以在 Container 对象之间移动，或者没有 Container。我需要能够从 Container --> ContainableObject 和 ContainableObject --> Container 中获取

我正在使用 v2 的 datanucleus 插件。通过 maven 这个模型运行集成测试效果很好，但是当我尝试通过我的 REST API 访问它时，我遇到了堆栈溢出：

```
java.lang.StackOverflowError
at java.util.concurrent.FutureTask.<init>(FutureTask.java:45)
at java.util.concurrent.AbstractExecutorService.newTaskFor(AbstractExecutorService.java:72)
at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:91)
at com.google.appengine.tools.development.ApiProxyLocalImpl$PrivilegedApiAction.run(ApiProxyLocalImpl.java:277)
at com.google.appengine.tools.development.ApiProxyLocalImpl$PrivilegedApiAction.run(ApiProxyLocalImpl.java:262)
at java.security.AccessController.doPrivileged(Native Method)
at com.google.appengine.tools.development.ApiProxyLocalImpl.doAsyncCall(ApiProxyLocalImpl.java:216)
at com.google.appengine.tools.development.ApiProxyLocalImpl.makeAsyncCall(ApiProxyLocalImpl.java:179)
at com.google.apphosting.api.ApiProxy.makeAsyncCall(ApiProxy.java:184)
at com.google.appengine.api.datastore.DatastoreApiHelper.makeAsyncCall(DatastoreApiHelper.java:59)
at com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.doBatchGetBySize(AsyncDatastoreServiceImpl.java:351)
at com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.get(AsyncDatastoreServiceImpl.java:296)
at com.google.appengine.api.datastore.DatastoreServiceImpl$1.runInternal(DatastoreServiceImpl.java:78)
at com.google.appengine.api.datastore.DatastoreServiceImpl$1.runInternal(DatastoreServiceImpl.java:75)
at com.google.appengine.api.datastore.TransactionRunner.runInTransaction(TransactionRunner.java:31)
at com.google.appengine.api.datastore.DatastoreServiceImpl.get(DatastoreServiceImpl.java:75)
at com.google.appengine.api.datastore.DatastoreServiceImpl.get(DatastoreServiceImpl.java:62)
at com.google.appengine.datanucleus.WrappedDatastoreService.get(WrappedDatastoreService.java:60)
at com.google.appengine.datanucleus.FetchFieldManager.lookupOneToOneChild(FetchFieldManager.java:426)
at com.google.appengine.datanucleus.FetchFieldManager.fetchRelationField(FetchFieldManager.java:341)
at com.google.appengine.datanucleus.FetchFieldManager.fetchObjectField(FetchFieldManager.java:248)
at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2228)
at com.whatever.ContainableObject.jdoReplaceField(ContainableObject.java)
at com.whatever.ContainableObject.jdoReplaceFields(ContainableObject.java)
at org.datanucleus.state.JDOStateManager.replaceNonLoadedFields(JDOStateManager.java:1988)
at com.google.appengine.datanucleus.EntityUtils$1.fetchNonLoadedFields(EntityUtils.java:976)
at org.datanucleus.ObjectManagerImpl.findObject(ObjectManagerImpl.java:2857)
at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1013)
at com.google.appengine.datanucleus.FetchFieldManager.lookupOneToOneChild(FetchFieldManager.java:427)
at com.google.appengine.datanucleus.FetchFieldManager.fetchRelationField(FetchFieldManager.java:341)
at com.google.appengine.datanucleus.FetchFieldManager.fetchObjectField(FetchFieldManager.java:248)
at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2228)
at com.whatever.Container.jdoReplaceField(Container.java)
at com.whatever.Container.jdoReplaceFields(Container.java)
at org.datanucleus.state.JDOStateManager.replaceNonLoadedFields(JDOStateManager.java:1988)
at com.google.appengine.datanucleus.EntityUtils$1.fetchNonLoadedFields(EntityUtils.java:976)
at org.datanucleus.ObjectManagerImpl.findObject(ObjectManagerImpl.java:2857)
at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1013)
at com.google.appengine.datanucleus.FetchFieldManager.lookupOneToOneChild(FetchFieldManager.java:427)
at com.google.appengine.datanucleus.FetchFieldManager.fetchRelationField(FetchFieldManager.java:341)
at com.google.appengine.datanucleus.FetchFieldManager.fetchObjectField(FetchFieldManager.java:248)
at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2228)
at com.whatever.ContainableObject.jdoReplaceField(ContainableObject.java)
at com.whatever.ContainableObject.jdoReplaceFields(ContainableObject.java)
at org.datanucleus.state.JDOStateManager.replaceNonLoadedFields(JDOStateManager.java:1988)
at com.google.appengine.datanucleus.EntityUtils$1.fetchNonLoadedFields(EntityUtils.java:976)
at org.datanucleus.ObjectManagerImpl.findObject(ObjectManagerImpl.java:2857)
at com.google.appengine.datanucleus.EntityUtils.entityToPojo(EntityUtils.java:1013)
at com.google.appengine.datanucleus.FetchFieldManager.lookupOneToOneChild(FetchFieldManager.java:427)
at com.google.appengine.datanucleus.FetchFieldManager.fetchRelationField(FetchFieldManager.java:341)
at com.google.appengine.datanucleus.FetchFieldManager.fetchObjectField(FetchFieldManager.java:248)
at org.datanucleus.state.AbstractStateManager.replacingObjectField(AbstractStateManager.java:2228)
at com.whatever.Container.jdoReplaceField(Container.java)
at com.whatever.Container.jdoReplaceFields(Container.java)
at org.datanucleus.state.JDOStateManager.replaceNonLoadedFields(JDOStateManager.java:1988)
at com.google.appengine.datanucleus.EntityUtils$1.fetchNonLoadedFields(EntityUtils.java:976) 
```

这是建模的错误方法，还是我发现了 AppEngine 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:37:41.817

您说它是**双向**关系，但关系的一侧没有**“mappedBy” 。**所以目前是2 **1-1 uni**关系。

如果它打算是 2 1-1 uni 关系，那么您需要在 GAE JDO/JPA 插件项目上向 Google 报告问题，并带有一个测试用例来重现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:49:26.847

我猜问题是你的 ContainableObject 类引用了一个 Container 类型的对象，并且在 Container 类中引用了一个 ContainableObject 类型的对象，所以它可能会创建一个循环引用，这可能会导致疯狂的 JDO。

尝试摆脱引用，看看这是否有效。

# java - 排序高分。排序时间输入的困难

> ID：12469309
> 
> 赞同：-1
> 
> 时间：2012-09-18T01:45:42.350
> 
> 标签：java, sorting

我在对输入进行排序时遇到了困难，我希望它首先按最低时间排序。我是java新手，所以我不太了解我已经做过一个数字游戏，但我无法按最低时间对高分进行排序，这是我到目前为止所做的。

```
import java.io.*;
import java.util.*;

public class teeeeeeeeeeeeeeeeeeeeeeeeeeeeeeest {

    private static void  start() throws IOException {
        int number = (int) (Math.random() * 1001);
        BufferedReader reader;
        reader = new BufferedReader(new InputStreamReader(System.in));
        Scanner input = new Scanner(System.in);

        String scorefile = "p-lista_java";
        int försök = 0;
        int gissning = 0;
        String namn;
        String line = null;
        String y;
        String n;
        String val ;
        String quit = "quit";

        System.out.println("Hello and welcome to this guessing game" +
                "\nStart guessing it's a number between 1 and 1000:");

        long startTime = System.currentTimeMillis();
        while (true){   
            System.out.print("\nEnter your guess: ");
            gissning = input.nextInt();
            försök++;

            if (gissning == number ){
                long endTime = System.currentTimeMillis();
                long gameTime = endTime - startTime;
                System.out.println("Yes, the number is " + number + 
                        "\nYou got it after " + försök + " guesses " + " times in " + (int)(gameTime/1000) + " seconds.");
                System.out.print("Please enter your name: ");
                namn = reader.readLine();

                try {
                    BufferedWriter outfile
                            = new BufferedWriter(new FileWriter(scorefile, true));
                    outfile.write(namn + " " + försök +"\t" + (int)(gameTime/1000) + "\n");
                    outfile.close();
                } catch (IOException exception) {

                }

                break;

            }

             if( gissning < 1 || gissning > 1000 ){
                    System.out.println("Stupid guess! I wont count that..." );
                    --försök;
             }

             else if (gissning > number)
                System.out.println(" Your guess is too high");

            else
                System.out.println("Your guess is too low");
            }

            try {
                BufferedReader infile
                            = new BufferedReader(new FileReader(scorefile));
                while ((line = infile.readLine()) != null) {
                    System.out.println(line);
                }
                infile.close();
            } catch (IOException exception) {

        }

        System.out.println("Do you want to continue (Y/N)?");
           val=reader.readLine();

           if ((val.equals("y"))||(val.equals("Y"))){
               teeeeeeeeeeeeeeeeeeeeeeeeeeeeeeest.start();
           }
           else 
               System.out.print("Thanks for playing");
           System.exit(0);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:56:41.720

创建一个包含所有得分、时间和其他详细信息的值对象。创建一个比较器来比较其中两个持有者之间的组件。可以通过使用 Comparator 创建一组 Holder 来实现排序。

如果您希望以不同的顺序按其他属性排序，只需根据需要更新 Comparator。

```
Holder {
    long time;
    int score;

    String name;
}

Comparator<Holder> {
    int compare( Holder holder, Holder other ){
       int result = holder.time - other.time;
       if( 0 == result ){
          result = holder.score - other.score;
       }
        return result;
   }
} 
```

# database - erd中的多值键？

> ID：12469311
> 
> 赞同：0
> 
> 时间：2012-09-18T01:46:29.040
> 
> 标签：database, erd

erd 是否有可能拥有多值主键？

如果是这样，我在映射到关系模式时如何对待它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:49:39.640

我相信您在谈论复合键或复合键。在高层次上，这些是由多个列组成的键，例如 ( `id, date, name`)。您需要在引用的表上创建相同的列并创建相同的键。

```
*Table2*

id, date, name

Index1: (id, date, name)

*Table2*

id, date, name, favorite_color

Index2: (id, date, name) references Table2.Index1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T09:15:58.397

可以将复合属性作为主键，但**不能将多值属性作为主键**。

*因为多值属性被视为异常，通过制作该属性的另一个实体来解决*。

# javascript - 不同的表单具有相同的提交功能

> ID：12469324
> 
> 赞同：2
> 
> 时间：2012-09-18T01:48:58.413
> 
> 标签：javascript, jquery

我有许多通过 PHP 动态生成的表单。我正在尝试验证将要提交的一个表单上的所有字段是否都已填写。我刚刚开始使用 JQuery，所以如果答案很简单，我很抱歉。

我试过这个：

```
$('.myform').submit(function(){    
  var flag = true;
  $('.myform input').each(function() {
      if($(this).val() === ''){
          flag = false;
          return false;
      }
  });
  return flag;  
}); 
```

但是在第二种形式中，它会检查第一种形式（它应该是空的，因为你没有填写那个......）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:51:16.247

```
$('.myform').submit(function(){    
  var flag = true;
  // use $(this) below which is the form has submit event fired.
  $(this).find('input').each(function() {
      if($(this).val() === ''){
          flag = false;
          return false;
      }
  });
  return flag;  
}); 
```

或者您可以通过以下方式简化代码：

```
$('.myform').submit(function() {
    return $(this).find('input').filter(function() {
        return $.trim($(this).val()) !== '';
    }).length == 0;
}); 
```

# openlayers - 用于在 Web 上可视化数据的 Tile（服务器）机制

> ID：12469329
> 
> 赞同：1
> 
> 时间：2012-09-18T01:50:00.417
> 
> 标签：openlayers, data-visualization, gephi

我正在寻找一个简单的应用程序，允许在网络上可视化图表。具体来说，我的目标是：

1.  使用 Gephi 以各种缩放级别呈现图形
2.  然后我希望将这些图像切割成瓷砖
3.  我希望使用类似于 Google Maps 或[OpenLayers](http://openlayers.org/)的 Web 组件将这些图层拼接在一起并允许平移、缩放图形。

当考虑到这一点时，我认为这种方法可以应用于任何想要在多个缩放级别可视化数据并且图像渲染必须发生在服务器端的任意数据可视化。

我想知道是否有实现这种架构的标准堆栈（或者即使我正在考虑的架构甚至有意义）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:28:57.997

如果您只想在网络上创建具有多个缩放级别的图形可视化（如在 Google 地图中），您应该查看 Gephi 的 Seadragon Web 导出插件：[https ://gephi.org/plugins/seadragon/](https://gephi.org/plugins/seadragon/)

Gephi 博客中有一个很好的图形可视化示例：[https ://gephi.org/2010/graph-visualization-on-the-web-with-gephi-and-seadragon/](https://gephi.org/2010/graph-visualization-on-the-web-with-gephi-and-seadragon/)

# java - 如何删除java中的停用词？

> ID：12469332
> 
> 赞同：3
> 
> 时间：2012-09-18T01:50:18.417
> 
> 标签：java, stop-words

我想删除java中的停用词。

所以，我从文本文件中读取停用词。

和存储集

```
Set<String> stopWords = new LinkedHashSet<String>();
BufferedReader br = new BufferedReader(new FileReader("stopwords.txt"));
        String words = null;
        while( (words = br.readLine()) != null) {
            stopWords.add(words.trim());
            }
        br.close(); 
```

而且，我读了另一个文本文件。

所以，我想删除文本文件中的重复字符串。

我怎样才能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:05:07.507

使用**set**作为停用词：

```
Set<String> stopWords = new LinkedHashSet<String>();
        BufferedReader SW= new BufferedReader(new FileReader("StopWord.txt"));
        for(String line;(line = SW.readLine()) != null;)
           stopWords.add(line.trim());
        SW.close(); 
```

和 ArrayList 用于输入 txt_file

```
BufferedReader br = new BufferedReader(new FileReader(txt_file.txt));
//make your arraylist here

// function deletStopWord() for remove all stopword in your "stopword.txt"
public ArrayList<String> deletStopWord(Set stopWords,ArrayList arraylist){
        System.out.println(stopWords.contains("?"));
        ArrayList<String> NewList = new ArrayList<String>();
        int i=3;
        while(i < arraylist.size() ){
            if(!stopWords.contains(arraylist.get(i))){
                NewList.add((String) arraylist.get(i));
            }
            i++;        
            }
        System.out.println(NewList);
        return NewList;
    }

  arraylist=deletStopWord(stopWords,arraylist); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:56:30.130

使用`ArrayList`可能更容易。

```
public ArrayList removeDuplicates(ArrayList source){
    ArrayList<String> newList = new ArrayList<String>();
    for (int i=0; i<source.size(); i++){
        String s = source.get(i);
        if (!newList.contains(s)){
            newList.add(s);
        }
    }
    return newList;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:40:21.670

您想从文件中删除重复的单词，下面是相同的高级逻辑。

*   读取文件
*   循环遍历文件内容（即一次一行）
    *   有基于空间的该行的字符串标记器
    *   将每个令牌添加到您的集合中。这将确保每个单词只有一个条目。
    *   关闭文件

现在您已经设置了包含文件的所有唯一字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T01:53:30.927

您应该尝试使用[`StringTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T02:00:03.183

如果您只是想从文件中的单词中删除某组单词，您可以随心所欲地进行操作。但是，如果您正在处理涉及自然语言处理的问题，则应该使用库。

例如，使用[Lucene](http://lucene.apache.org/)进行标记化一开始看起来会更复杂，但它会处理您会忽略的无数复杂情况，并且如果您改变对特定停用词、标记化方式、是否关心的想法，它会提供很大的灵活性关于案件等

# java - JFrame 窗口不会显示

> ID：12469335
> 
> 赞同：0
> 
> 时间：2012-09-18T01:50:46.107
> 
> 标签：java, swing, jframe

（顺便说一句，我*不是*在寻找对代码本身的批评；我知道它效率低下，我只是在测试不同的东西，并且想自己学习。）我正在运行这段代码，我可以'不知道为什么`JFrame`我创建的那个在我运行程序时没有出现。我在左上角看到程序名称（`mac`顺便说一句，我在 a 上，所以这意味着程序正在运行）大约 3-5 秒，然后它退出。它没有显示任何错误，也没有显示任何错误`JFrame`。

```
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TicTacToe extends JFrame
{ 
    JPanel board= new JPanel();
    static boolean isXTurn = true;
    static boolean isXTopLeft = false;
    static boolean isOTopLeft = false;
    static boolean isXTopCenter = false;
    static boolean isOTopCenter = false;
    static boolean isXTopRight = false;
    static boolean isOTopRight = false;
    static boolean isXCenterLeft = false;
    static boolean isOCenterLeft = false;
    static boolean isXCenterCenter = false;
    static boolean isOCenterCenter = false;
    static boolean isXCenterRight = false;
    static boolean isOCenterRight = false;
    static boolean isXBottomLeft = false;
    static boolean isOBottomLeft = false;
    static boolean isXBottomCenter = false;
    static boolean isOBottomCenter = false;
    static boolean isXBottomRight = false;
    static boolean isOBottomRight = false;

    String letterTopLeft;
    String letterTopCenter;
    String letterTopRight;
    String letterCenterLeft;
    String letterCenterCenter;
    String letterCenterRight;
    String letterBottomLeft;
    String letterBottomCenter;
    String letterBottomRight;

public TicTacToe()
{   
    JButton btnTopLeft = new JButton(letterTopLeft);
    JButton btnTopCenter = new JButton(letterTopCenter);
    JButton btnTopRight = new JButton(letterTopRight);
    JButton btnCenterLeft = new JButton(letterCenterLeft);
    JButton btnCenterCenter = new JButton(letterCenterCenter);
    JButton btnCenterRight = new JButton(letterCenterRight);
    JButton btnBottomLeft = new JButton(letterBottomLeft);
    JButton btnBottomCenter = new JButton(letterBottomCenter);
    JButton btnBottomRight = new JButton(letterBottomRight);

    this.setLayout(null);

    btnTopLeft.setLayout(null);
    btnTopCenter.setLayout(null);
    btnTopRight.setLayout(null);
    btnCenterLeft.setLayout(null);
    btnCenterCenter.setLayout(null);
    btnCenterRight.setLayout(null);
    btnBottomLeft.setLayout(null);
    btnBottomCenter.setLayout(null);
    btnBottomRight.setLayout(null);

    btnTopLeft.setBounds(0, 0, 100, 100);
    btnTopCenter.setBounds(100, 0, 100, 100);
    btnTopRight.setBounds(200, 0, 100, 100);
    btnCenterLeft.setBounds(0, 100, 100, 100);
    btnCenterCenter.setBounds(100, 100, 100, 100);
    btnCenterRight.setBounds(200, 100, 100, 100);
    btnBottomLeft.setBounds(0, 200, 100, 100);
    btnBottomCenter.setBounds(100, 200, 100, 100);
    btnBottomRight.setBounds(200, 200, 100, 100);

    board.setBounds(0, 0, 300, 300);

    btnTopLeft.setPreferredSize(new Dimension(100,100));

    board.add(btnTopLeft);
    board.add(btnTopCenter);
    board.add(btnTopRight);
    board.add(btnCenterLeft);
    board.add(btnCenterCenter);
    board.add(btnCenterRight);
    board.add(btnBottomLeft);
    board.add(btnBottomCenter);
    board.add(btnBottomRight);

    setSize(300, 300);
    setBackground(Color.gray);
    setTitle("Tic-Tac-Toe");
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
}

public static void main(String[] theory)
{

}
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T01:58:14.497

你有两个问题：

*   如您收到的评论中所述，您的主要方法是空的。遵循您那里的建议。

*   板 JPanel 不与 JFrame 关联。在构造函数方法的末尾添加以下行：

    ```
    this.add (board); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:58:40.360

您的主要方法应如下所示：

```
public static void main(String[] args) {
    new TicTacToe();
} 
```

这将调用您的井字游戏类的新实例，该实例将自动运行构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T03:44:47.337

```
jframename  jf =  new jframename();
jf.setVisible(true); 
```

# jquery - 使用jquery和jquery ui的Css拖放网格有一个空白空间

> ID：12469337
> 
> 赞同：0
> 
> 时间：2012-09-18T01:50:48.043
> 
> 标签：jquery, css, jquery-ui, css-float

我认为这可能是一个 CSS 问题，但我不确定我是否已将示例加载到 [http://jsfiddle.net/paries/7CgZp/](http://jsfiddle.net/paries/7CgZp/) 问题是为什么小部件 5 下方和小部件 11 上方有一个空框。我我正在使用 chrome，FF 似乎没有在 jsfiddle 加载资源，或者我做错了。我也不能将元素拖到那个空框中

感谢您的帮助兰迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:24:30.283

看起来固定的高度差`id=95`： http `li`: [//jsfiddle.net/7CgZp/8/](http://jsfiddle.net/7CgZp/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:58:23.197

找到了解决方案。这似乎很好用 [http://gridster.net](http://gridster.net)

# iphone - ios 3x、4x 中基于页面的应用程序动画

> ID：12469342
> 
> 赞同：0
> 
> 时间：2012-09-18T01:51:03.063
> 
> 标签：iphone, ios

我想制作一个用于阅读带有翻页动画的书籍的应用程序，例如基于页面的应用程序。但据我所知，基于页面的应用程序仅适用于 iOS 5 及更高版本，因此在旧平台（ios 3x 和 4x）中，我如何制作像基于页面的应用程序（如 ibooks）这样的翻转动画。我知道一个名为“叶子”的开源软件，我也可以制作翻页动画，但它似乎并不生动。感谢您的帮助！

# jquery - 当我编写 url 并按 Enter 时，如何从 url 获取哈希码？

> ID：12469350
> 
> 赞同：3
> 
> 时间：2012-09-18T01:52:19.977
> 
> 标签：jquery, url, hashtag

我有这个网址：example.com/index.html#tab-1

**我按照 url example.com/index.html#tab-1**写入浏览器并按 Enter - 页面将不会加载。

我想获取参数tab1并加载id为tab1的内容。

我的代码：

我称之为函数：

```
//to load

showTabContent(gethash);

showTabContent: function(id)
        {
            if(id != null)
            {
                var tabid = id.split("-");
                $("#tab"+tabid[1]).show();
            }
        },

gethash: function()
        {
            var hash = window.location.hash;
            if($.trim(hash) != "") return hash;
            else return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:43:30.073

您可以使用此函数将 URL 解析为对象：[http://james.padolsey.com/javascript/parsing-urls-with-the-dom/](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)。取回对象后，您可以使用对象的属性来获取所需的 URL 部分。

这篇文章中提供了类似的答案：[String URL to json object](https://stackoverflow.com/questions/12469443/string-url-to-json-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:17:31.577

检查这个 jQuery 插件：

*   [http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)
*   [http://benalman.com/code/projects/jquery-hashchange/docs/files/jquery-ba-hashchange-js.html](http://benalman.com/code/projects/jquery-hashchange/docs/files/jquery-ba-hashchange-js.html)

JS文件：[https ://raw.github.com/cowboy/jquery-hashchange/master/jquery.ba-hashchange.min.js](https://raw.github.com/cowboy/jquery-hashchange/master/jquery.ba-hashchange.min.js)

您的代码的解决方案：

**HTML：**

```
<a href="#tab-1">Tab1</a>
<div id="tab1"></div> 
```

**JS：**

```
obj = {
    checkHash: function(){
        $(window).hashchange( function(){
            var hash = location.hash;
            obj.showTabContent(hash);
        })
    },
    showTabContent: function(id)
    {
        var tabid = id.split("-");
        $("#tab"+tabid[1]).show();
    } 
};

//init
obj.checkHash(); 
```

# c# - 如何使用 C# 从 Outlook 中删除电子邮件？

> ID：12469351
> 
> 赞同：0
> 
> 时间：2012-09-18T01:52:19.740
> 
> 标签：c#, email, outlook, outlook-2007

我可以使用以下代码成功地从 Outlook 检索和阅读电子邮件。如何从 Outlook 中删除电子邮件？我尝试了几种方法，但无法使其正常工作。

```
var svc = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
svc.Credentials = CredentialCache.DefaultNetworkCredentials;
svc.AutodiscoverUrl(emailAddress);
EmailMessage email = EmailMessage.Bind(svc, emailMessage.Id, props); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:02:17.053

我不确定（即，可能被证明不正确）您是否可以使用此 API*删除消息。*[Microsoft.Exchange.Data.Transport.Email 命名空间](http://msdn.microsoft.com/en-us/library/aa563872%28v=exchg.80%29.aspx)的MSDN 文章说：

> Microsoft.Exchange.Data.Transport.Email 命名空间包含支持创建、读取、写入和修改电子邮件消息的类型。

进一步检查`EmailMessage`类上可用的成员表明您可以访问各种属性，但没有可用的“删除”操作/方法。

根据您的情况，使用 Outlook Redemption 之类的工具可能会有更好的运气，该工具将允许对 Outlook 和/或 Exchange 进行低级编程访问（但如果您需要通过 Exchange Web 服务进行访问，则可能不合适）。

# ubuntu - 无法在 Ubuntu 中使用 smartgit 克隆 Assembla 存储库。

> ID：12469354
> 
> 赞同：0
> 
> 时间：2012-09-18T01:52:37.107
> 
> 标签：ubuntu, openssh, assembla, smartgit

我有最新的 ubuntu、java 和安装。Smartgit 安装正确，但我不知道如何使用 ubuntu 生成正确的 OpenSSH 密钥对。我尝试使用该`ssh-keygen -t dsa` 命令，它适用于我的个人资料的汇编。问题是智能 git 不会接受私有对，因为它不是 OpenSSH。我下载了 puttygen 并创建了一个 OpenSSH 密钥，但 assembla 不接受公共版本。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:51:07.987

您应该只以标准格式将您的公钥上传到 Assembla：

ssh-key_format 密钥标签

其中 ssh-key_format 应该是 ssh-dss 或 ssh-rsa。密钥是您的公钥 - 带有一些其他字符的字母数字字符串。标签是通常源自您的用户和机器的名称，可能看起来像 user@machine 三个字段之间有一个空格。

您的腻子输出可能如下所示：

> PuTTY-User-Key-File-2：ssh-dss
> 加密：无
> 注释：dsa-key-20120917
> 公共线路：10
> PUBLIC_KEY
> 专用线路：1
> PRIVATE_KEY
> Private-MAC：MAC_ADDRESS

（我用大写替换了敏感数据）

你只需要开始（ssh-dss 或 ssh-rsa）然后你的 PUBLIC_KEY 然后组成一些标签来创建一个新的公钥文件 - 在你的计算机上使用 emacs 或 vim 并将其保存为 id_dsa.pub 或 id_rsa.pub并将其上传到 Assembla - 应该可以正常工作。

# apache-flex - Flex TextArea 自动完成，而不是 TextInput

> ID：12469357
> 
> 赞同：2
> 
> 时间：2012-09-18T01:52:51.007
> 
> 标签：apache-flex, autocomplete, textarea, flex-spark

有谁知道带有自动完成功能的 TextArea 组件？我了解 Flextras.com 的自动完成功能可以重新设置为 TextArea，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:12:06.027

如果您只想自动完成每个单词，类似于大多数 IDE 中的 (Ctrl-Space)，那么您可以尝试自己完成。

我想你会在文本区域捕捉到更改事件，然后对克拉之前的字符与一些预先填充的单词集合进行一些比较（类似于*startsWith ）。*

Flextras 提出了一个很好的问题，即如何显示建议。一个想法是使用自定义上下文菜单，在[此处](https://stackoverflow.com/questions/8645777/how-open-custom-context-menu-on-text-area-cortrol-in-flex)讨论，其中包含您的建议。还有一个决定何时显示它。您是否在用户键入时不断显示它，或者当他们使用组合键（Ctrl-Space）时显示它。

这是一个有趣的挑战。

# android - Android如何将信息从一个活动同时复制到另一个活动

> ID：12469359
> 
> 赞同：1
> 
> 时间：2012-09-18T01:53:08.540
> 
> 标签：android, android-intent, android-activity

我想知道是否可以在我的可见活动中复制在不可见活动中发生的更改。

例如，我在活动 A 中有一个整数递增的循环，然后我调用活动 B，将整数作为额外的整数传递。

有没有办法看到 B 中反映的增量（在 A 中发生）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:12:00.107

由于**int**是原始类型，因此将**int类型的变量传递给****活动 B**时不会更改它。

我建议你传入一个**int**类型的包装器（即`class IntWrapper { int value; }`）

当你增加时，变化就会体现出来`value`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:33:30.730

您还可以使用广播接收器传递数据：

在监听活动/片段中创建接收者并注册它（在 oncreate 或 onresume 或其他东西中执行此操作，甚至可能在 onrestart 中执行此操作）。该活动现在将收听广播，您可以使用内置关键字测试它是否是针对该接收者的广播。因为广播是使用意图完成的，所以您还可以获取和使用存储在该意图中的其他数据（例如您的 int）：

```
 my_broadcast_reciever = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {String action = intent.getAction();
            if (action.equals("finish_buy_activity"))
            //do whatever
            }               
        }
    };
    registerReceiver(my_broadcast_reciever, new IntentFilter("theKeywordThisBCRRespondsTo")); 
```

不要忘记在 onpause 或 ondestroy 中取消注册任何接收器（根据您在哪里注册接收器最有意义）：

```
 {unregisterReceiver(my_broadcast_reciever); 
```

现在，在您要用于发送数据的活动/片段中，像这样触发意图（您可能希望创建意图并将其保持在更高级别，这样您就不会在每次更新时都继续创建新对象):

```
 Intent sintent = new Intent("theKeywordThisBCRRespondsTo");
    //maybe also do: sintent.addInt(int); or something
    sendBroadcast(sintent); 
```

请记住，在某些情况下这可能有点矫枉过正，但它是在活动/片段之间通信和传输数据的好方法。

# java - 用于标准化音频的 Java 算法

> ID：12469361
> 
> 赞同：12
> 
> 时间：2012-09-18T01:53:26.340
> 
> 标签：java, math, audio

我正在尝试规范化语音的音频文件。

具体来说，当音频文件包含音量峰值时，我试图将其拉平，因此安静的部分更响亮，峰值更安静。

除了从这项任务中学到的知识之外，我对音频处理知之甚少。另外，我的数学很差。

我做了一些研究，Xuggle 网站提供了一个示例，显示使用以下代码减少音量：（[完整版在这里](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/ws/workingcopy/src/com/xuggle/mediatool/demos/ModifyAudioAndVideo.java)）

```
@Override
  public void onAudioSamples(IAudioSamplesEvent event)
{
  // get the raw audio byes and adjust it's value 

  ShortBuffer buffer = event.getAudioSamples().getByteBuffer().asShortBuffer();
  for (int i = 0; i < buffer.limit(); ++i)
    buffer.put(i, (short)(buffer.get(i) * mVolume));

  super.onAudioSamples(event);
} 
```

在这里，他们`getAudioSamples()`通过一个常量来修改字节`mVolume`。

`getAudioSamples()`在这种方法的基础上，考虑到文件中的最大值/最小值，我尝试了规范化将字节修改为规范化值。（详见下文）。我有一个简单的过滤器来单独留下“沉默”（即任何低于值的东西）。

我发现输出文件***非常***嘈杂（即质量严重下降）。我假设错误是在我的规范化算法中，或者是我操作字节的方式。但是，我不确定下一步该去哪里。

这是我目前正在做的事情的精简版。

### 第 1 步：在文件中查找峰：

`buffer.get()`读取完整的音频文件，并找到所有 AudioSamples的最高和最低值

```
 @Override
    public void onAudioSamples(IAudioSamplesEvent event) {
        IAudioSamples audioSamples = event.getAudioSamples();
        ShortBuffer buffer = 
           audioSamples.getByteBuffer().asShortBuffer();

        short min = Short.MAX_VALUE;
        short max = Short.MIN_VALUE;
        for (int i = 0; i < buffer.limit(); ++i) {
            short value = buffer.get(i);
            min = (short) Math.min(min, value);
            max = (short) Math.max(max, value);
        }
        // assign of min/max ommitted for brevity.
        super.onAudioSamples(event);

    } 
```

### 第 2 步：标准化所有值：

在类似于 step1 的循环中，用标准化值替换缓冲区，调用：

```
 buffer.put(i, normalize(buffer.get(i));

public short normalize(short value) {
    if (isBackgroundNoise(value))
        return value;

    short rawMin = // min from step1
    short rawMax = // max from step1
    short targetRangeMin = 1000;
    short targetRangeMax = 8000;

    int abs = Math.abs(value);
    double a = (abs - rawMin) * (targetRangeMax - targetRangeMin);
    double b = (rawMax - rawMin);
    double result = targetRangeMin + ( a/b );

     // Copy the sign of value to result.
    result = Math.copySign(result,value);
    return (short) result;
} 
```

## 问题：

*   这是尝试规范化音频文件的有效方法吗？
*   我的数学`normalize()`有效吗？
*   为什么这会导致文件变得嘈杂，而演示代码中的类似方法却没有？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T09:13:30.797

I don't think the concept of "minimum sample value" is very meaningful, since the sample value just represents the current "height" of the sound wave at a certain time instant. I.e. its absolute value will vary between the peak value of the audio clip and zero. Thus, having a `targetRangeMin` seems to be wrong and will probably cause some distortion of the waveform.

I think a better approach might be to have some sort of weight function that decreases the sample value based on its size. I.e. bigger values are decreased by a large percentage than smaller values. This would also introduce some distortion, but probably not very noticeable.

Edit: here is a sample implementation of such a method:

```
public short normalize(short value) {
    short rawMax = // max from step1
    short targetMax = 8000;

    //This is the maximum volume reduction
    double maxReduce = 1 - targetMax/(double)rawMax;

    int abs = Math.abs(value);
    double factor = (maxReduce * abs/(double)rawMax);

    return (short) Math.round((1 - factor) * value); 
} 
```

For reference, this is what your algorithm did to a sine curve with an amplitude of 10000: ![Original algorithm](../Images/9d7540b71a983477409aa66a13722584.png)

This explains why the audio quality becomes much worse after being normalized.

This is the result after running with my suggested `normalize` method: ![Suggested algorithm](../Images/78aeb68bb39821d1e9c9ada46590aa09.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T02:08:55.167

音频的“标准化”是增加音频电平的过程，使得最大值等于某个给定值，通常是最大可能值。今天，在另一个问题中，有人解释了如何做到这一点（见＃1）：[音频音量正常化](https://stackoverflow.com/questions/12481524/audio-volume-normalization)

但是，您继续说“具体来说，当音频文件包含音量峰值时，我正在尝试将其拉平，因此安静的部分更响亮，峰值更安静。” 这称为“压缩”或“限制”（不要与 MP3 编码中使用的压缩类型混淆！）。您可以在此处阅读更多相关信息：[http ://en.wikipedia.org/wiki/Dynamic_range_compression](http://en.wikipedia.org/wiki/Dynamic_range_compression)

一个简单的压缩器并不是特别难实现，但你说你的数学“非常弱”。所以你可能想找到一个已经建成的。您也许可以找到在[http://sox.sourceforge.net/](http://sox.sourceforge.net/)中实现的压缩器，并将其从 C 转换为 Java。我知道谁的源代码可用的压缩器的唯一 java 实现（而且它不是很好）在[这本书中](http://books.google.com/books/about/Digital_audio_with_Java.html?id=fh5GAQAAIAAJ)

作为解决您的问题的替代方法，您可以将文件以每秒 1/2 的片段标准化，然后使用线性插值连接您用于每个片段的增益值。您可以在此处阅读有关音频的线性插值：http: [//blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-cc.html](http://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-c-c.html)

我不知道[levelator](http://www.conversationsnetwork.org/levelator)的源代码是否可用，但您可以尝试其他方法。

# java - 将二维数组存储到文件中

> ID：12469376
> 
> 赞同：1
> 
> 时间：2012-09-18T01:55:01.817
> 
> 标签：java, arrays, multidimensional-array

我正在尝试将此数组：数据类型存储到程序将创建`NUMBERSS[r][c]`的`int`文件中，然后将每个值存储在文件中。我试过了，但它给了我奇怪的并发症。

```
Scanner scan = new Scanner(new File("NUMBERSS.txt"));    
// Read each row.    
for(int r=0;r<NUMBERSS.length;r++)  
    for(int c=0;c<NUMBERSS[r].length;c++){ 
        System.out.print(NUMBERSS[r][c] + "\t");  
        System.out.print("\n");  
        // For each number in the column, read a number    
        // and put it in the array    
        NUMBERSS[r][c] = scan.nextInt();  
        scan.nextLine(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:15:39.473

您想要的可能是将数组的内容写入文件并稍后读取。

## 保存到文件

由于 an`array`也是一个对象，您可以使用`ObjectOutputStream`来保存它。

```
ObjectOutputStream oos = new ObjectOutputStream(new FileWriter("NUMBERS.DATA"));
int[][] NUMBERS;  // Populate it.
oos.writeObject(NUMBERS); 
```

这会将数组保存到文件中`NUMBERS.DATA`

## 从文件中读取

从文件中读取也很简单。

```
ObjectInputStream ois = new ObjectInputStream(new FileReader("NUMBERS.DATA"));
int[][] NUMBERS = (int[][])ois.readObject(); 
```

这将从文件中读取数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T15:41:08.280

保存到文件

```
ObjectOutputStream oos = new ObjectOutputStream(new FileWriter("NUMBERS.DATA"));
int[][] NUMBERS;  // Populate it.
oos.writeObject(NUMBERS);' 
```

`ObjectOutputStream`没有以 a`FileWriter`作为参数的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T04:52:16.213

它可能`ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("NUMBERS.DATA"));`代替`ObjectOutputStream oos = new ObjectOutputStream(new FileWriter("NUMBERS.DATA"));`. [因此， https](https://stackoverflow.com/users/1026805/sri-harsha-chilakapati) : //stackoverflow.com/users/1026805/sri-harsha-chilakapati 给出的答案的修改版本将是：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("NUMBERS.DATA"));
int[][] NUMBERS = {{2, 3, 5}, {7, 11, 13}}; 
oos.writeObject(NUMBERS); 
```

# xpathnavigator - c# XPath Navigator Select 语句由于对令牌的误解而失败

> ID：12469377
> 
> 赞同：1
> 
> 时间：2012-09-18T01:55:04.343
> 
> 标签：xpathnavigator

当 http:// 地址加载到 Q91_1 时尝试返回与任何“Qx_x”关联的值时，导航器失败，因为它将“ProjectId”中的“Id”解释为有效令牌 - 即使意图是只拾取 "f id=" 。有没有办法更改创建的表达式以防止导航器无法正常运行？

```
public string GetResponsesValue(string fieldHeading) {
// Use XPath to get the response value.
string expr = string.Format("/Fields/f[@id=\"{0}\"]", fieldHeading);
XPathNodeIterator xpni = Navigator.Select(expr);
return xpni.MoveNext() ? xpni.Current.Value : null;
}

// Cached XPathNavigator
private XPathNavigator xpn;
private XPathNavigator Navigator {
get {
if (xpn == null) {
    XPathDocument xpd = new XPathDocument(new StringReader(SurveyResponses));
    xpn = xpd.CreateNavigator();
    }
return xpn;
}
} 
```

上面在 StringReader 中引用的“SurveyResponses”中的数据如下所示。

DataResponse XML 结构如下所示（移除开始结束箭头以允许在此处输入 Fields f id="Q21_1">30121 /f f id="Q91_1">http://xxx.yyy.net/run.aspx?GroupId=188&ProjectId= 1096&RecordId=634 /f f id="Q48_3">22101 /f /Fields

只要包含 URL 的字符串不包含在 XML 中，该代码就可以正常工作。

# php - 在 Notepad++ 中获取我自己的 PHP 函数的参数提示

> ID：12469378
> 
> 赞同：6
> 
> 时间：2012-09-18T01:55:04.360
> 
> 标签：php, notepad++

在 Preferences->Backup/Auto-Completion 中启用“Function parameters hint on input”后，我得到了有关原生 PHP 函数的有用提示，如下所示：

```
string|false substr (string str, int start, [int length]) 
```

是否有插件或其他东西可以让 Notepad++ 为我自己的功能执行此操作，就像 Dreamweaver 一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T18:10:08.810

> Settings -> Preferences -> Backup/Auto-Completion -> Function parameters hint on input [CHECK]

这就是你在说的吗？为我工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:45:03.290

我通过执行以下操作实现了这一点：

1.  将 Notepad++ 使用的 API XML 文件编辑为所需的语言。
2.  在“设置”>“样式配置器”中添加自定义名称以获得您想要的突出显示。

## 编辑 API XML 文件

API XML 文件位于您的安装目录\plugins\APIs 中。我相信每种语言都有一个具有解析器的文件。该解析器将确定需要或忽略 XML 文件的哪些部分。

这些文件非常脆弱，所以这里有一些提示：

*   所有条目必须按 KeyWord 的字母顺序排列，否则它将静默失败。
*   注意使您的 XML 在描述中无效的文本。据我所知，Notepad++ 没有模式来告诉它属性是字符串类型，因此各种字符都会破坏 XML 和您的提示。
*   XML 文件的任何问题都会提示提示失败。

我已经使用这种技术来支持我正在使用的游戏引擎使用的自定义 API，并且效果很好。我有一个 excel 电子表格来管理条目并创建格式正确的 XML 以粘贴到文件的正确部分，但显然有很多方法可以完成管理。

我根据这些来源弄清楚了所有这些：

1.  [http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Editing_Configuration_Files#API_files](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Editing_Configuration_Files#API_files)
2.  [http://retroaffect.com/blog/190/A_Lua_Language_File_for_Notepad__/#b](http://retroaffect.com/blog/190/A_Lua_Language_File_for_Notepad__/#b)
    *   （您可以在此处下载的 API 文件的 Environment 标签位置错误，它应该在 AutoComplete 标签内，但它帮助我理解了用法。）

## 编辑风格配置器

屏幕添加新关键字：myNewKeyword

![屏幕添加新关键字：myNewKeyword](../Images/5ff876548bac876a39e8d17319a397c6.png)

**添加 math.tanh 并突出显示后的最终结果**

![屏幕显示 lua 中 math.tanh 的工具提示和突出显示](../Images/45b5b5710da8b9b2cdf4bc9c78c7ccd8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:06:01.027

I'm not too familiar with Notepad++, however I think unless there is some sort of IDE plugin it would not be possible.

In my opinion, you should use Aptana Studio, it's based off of the Eclipse IDE, and is specifically made for web development/PHP. Although there are plenty of other IDEs out there, here's a few.

Here's a link to Aptana: [http://www.aptana.com](http://www.aptana.com)

# c# - 调试模式下DLL加载错误，但发布模式正常

> ID：12469383
> 
> 赞同：2
> 
> 时间：2012-09-18T01:55:41.580
> 
> 标签：c#, visual-studio-2008, visual-c++, windows-7, dllimport

当我使用`VS2008`构建我的项目时，我使用自己的`DLL`. 它在`release`模式下可以正常工作，但是当我将其更改为`debug`模式时，出现错误：

`An unhandled exception of type 'System.DllNotFoundException' occurred in DDKWidget.exe`

**附加信息**：`Unable to load the DLL "DDKLibA.dll": The specified module could not be found.`

`DDKWidget`and是我的`DDKLibA.dll`项目可执行文件和我自己创建的`DLL`. 我创建了我`DLL`的 in `C++`，但我在我的`C#`项目中使用它，使用`[DllImport("DDKLibA.dll")]`.

我`OS`的是`Win7 64 bit`。
我`IDE`的是`VS2008 SP1`。

有没有人遇到过这个？
顺便说一句，前段时间一切都好，但最近，自从我重新安装了我的`OS`，我开始收到这些错误。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:34:34.560

这听起来像是 64 位与 32 位不匹配的问题。CLR 应用程序默认编译为“AnyCPU”，这意味着它们将在 64 位操作系统上自动作为 64 位进程运行。

另一方面，C++ dll 必须编译为 32 位或 64 位，并且一旦编译它们就会保持这种状态。

即使在 64 位操作系统下，您也可以强制 C# 应用程序在 32 位模式下运行，但可以针对调试和发布配置单独更改该设置。

我的猜测是您的 C++ dll 编译为 32 位，并且您的 C# dll 的调试设置也是 32 位，但在发布模式下它设置为 AnyCPU。这样，它将作为 64 位进程运行，并且无法加载 32 位 C++ dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:26:51.317

我见过这种情况的唯一一次是缺少依赖 DLL 时。例如，您的程序集的发布版本依赖于 foo.dll，但调试版本依赖于 foo-debug.dll。如果目标系统上未安装 foo-debug.dll，则无法加载程序集的调试版本。

我建议您使用文件监控实用程序（例如[FileMon](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)）来查看操作系统在加载 DLL 时尝试加载哪些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:23:50.110

dll位于文件系统的哪个位置？也许您将它复制到与发布 exe 相同的目录，但忘记对调试 exe 执行相同操作？

# java - Java：使用字符串 charAt 方法的 for 循环崩溃

> ID：12469385
> 
> 赞同：0
> 
> 时间：2012-09-18T01:56:05.870
> 
> 标签：java, string, boolean

我在这段代码中有一个错误。调试器建议它的原因是这行代码`char chr = getSecretWord.charAt(i);`

这段代码的作用是寻找 和 之间的`userInput`匹配`secretWord`。我要`for loop`一一检查secretWord字母的长度，如果有匹配的字母返回true。如果不是，则返回 false ......但是当它假设只是返回 false 时程序崩溃......我猜这与这条线有关，但不知道究竟是什么`getSecretWord.charAt(i);`

```
 private boolean isMatchingSecretWord(String userInput)
{
    String secretWord = "";
    String getSecretWord = getSecretWord();
    for (int i = 0; i <= getSecretWord.length();i++)
        {
        char chr = getSecretWord.charAt(i);
        secretWord = ""+chr;

        if (secretWord.equals(userInput))
        {
            println("is true");
            return true;
        }
    }
    return false;
} 
```

作为旁注，我对这段代码所做的是否正确，将 getSecretWorld() 方法分配给 String 以便我可以使用 Strings 方法`length()`？

`String getSecretWord = getSecretWord();`

`for (int i = 0; i <= getSecretWord.length();i++)`

**调试代码：**

```
Exception in thread "Thread-4" java.lang.StringIndexOutOfBoundsException: String index out of range: 4    
    at java.lang.String.charAt(String.java:686)    
    at Hangman.isMatchingSecretWord(Hangman.java:49)    
    at Hangman.userInput(Hangman.java:34)    
    at Hangman.run(Hangman.java:20)* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:59:15.203

```
for (int i = 0; i <= getSecretWord.length(); i++) 
```

应该：

```
for (int i = 0; i < getSecretWord.length(); i++)
//               ^^^
//             see here 
```

`n`-character 字符串（或`n`-element 数组）的有效索引是`0`通过（ `n-1`inclusive）。

因此，如果您的密语是`xyyzy`，则有效索引为 0 到 4。您的原始循环迭代`i`设置为零到*五，*因此出现了问题。

* * *

但是那里似乎有很多不必要的代码，当你可以摆脱一些简单的事情时。

首先，我会消除混淆的来源 - 函数名称听起来像用户输入和密码必须完全匹配，而您的评论表明并非如此：

> 谢谢，这行得通。但循环的原因是用户输入了一个字母，我想看看该字母是否在 SecretWord 中。（这是一个刽子手游戏）。

在这种情况下，您只需要查看密码中是否存在单个字符。我会更改函数名称以适应，即使这样，也可以用更少的代码来完成：

```
private boolean isInSecretWord (String userInput) {
    String secretWord = getSecretWord();
    return secretWord.contains(userInput);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:05:19.700

由于您的 for 循环未正确循环，您出现了越界错误，我已对其进行了修改，以使循环不会越界，并且您的 secretWord 变量未正确填充，代码现在应该按预期工作:)

```
private boolean isMatchingSecretWord(String userInput)
{
    String secretWord = "";
    String getSecretWord = getSecretWord();
    for (int i = 0; i < getSecretWord.length();i++)
        {
        char chr = getSecretWord.charAt(i);
        secretWord = secretWord + chr;

        if (secretWord.equals(userInput))
        {
            println("is true");
            return true;
        }
    }
    return false;
} 
```

# ipad - 由于 AppDelegate 方法切换视图时出错

> ID：12469386
> 
> 赞同：1
> 
> 时间：2012-09-18T01:56:22.783
> 
> 标签：ipad, ios5, uiview

这就是我在我的应用程序中所做的：

在我的 appDelegate.m 文件中，

```
//Four Views
@synthesize fvc;
@synthesize svc;
@synthesize tvc;
@synthesize pvc;

 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
 {
 NSString *name1,*name2,*name3;
 name1 = NSLocalizedString(@"home", nil);
 name2 = NSLocalizedString(@"quote", nil);
name3 = NSLocalizedString(@"ship", nil);
UITabBarController *tabBar = [[UITabBarController alloc] init];

 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 

 //[application setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
tvc = [storyboard instantiateViewControllerWithIdentifier:@"thirdview"];
fvc = [storyboard instantiateViewControllerWithIdentifier:@"firstview"];
svc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];

 pvc =[storyboard instantiateViewControllerWithIdentifier:@"PayViewController"];

fvc.tabBarItem.title = name1;
 fvc.tabBarItem.image = [UIImage imageNamed:@"home.png"];
 fvc.tabBarItem.titlePositionAdjustment = UIOffsetMake(2.0, 0);

 tvc.tabBarItem.title = name2;
 tvc.tabBarItem.image = [UIImage imageNamed:@"ping.png"];
 tvc.tabBarItem.titlePositionAdjustment = UIOffsetMake(0, 2.0);

 svc.tabBarItem.title = name3;
 svc.tabBarItem.image = [UIImage imageNamed:@"zoom.png"];    
 svc.tabBarItem.titlePositionAdjustment = UIOffsetMake(-5.0, 0);

 NSLog(@"appdelegate %@ and %@",svc,svc.title);

 tabBar.viewControllers = [NSArray arrayWithObjects:fvc,svc,tvc,nil];

 // the below line does not allow [self.navigationController pushViewController:svNew  animated:YES]; to function

 self.window.rootViewController = tabBar;
 // Override point for customization after application launch.
 return YES; 
```

在我的 fvc 视图中，我在 okPressed 方法中执行更改视图操作：

```
 - (IBAction)okPressed:(id)sender {
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 

 SecondViewController *svNew = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];

 [self.navigationController pushViewController:svNew animated:YES];
 } 
```

当我在 appdelegate 方法中注释代码时，通过 okPressed 方法在视图之间切换成功执行。但是当我取消注释 appDelegate 方法时，它不会执行切换。我发现的是，appdelegate 方法中的代码“self.window.rootViewController = tabBar;” 是罪魁祸首。任何人都可以指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:54:28.993

我认为您应该将 UITabBarController 嵌入到导航控制器中以使其工作：

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:tabBar]; 
```

进而

```
self.window.rootViewController = navController; 
```

否则你不能推送任何东西，因为你可能没有 UINavigationController 来推送东西！

# iphone - UISearchBar 作为界面生成器中的 UINavigationItem.rightBarButtonItem？

> ID：12469392
> 
> 赞同：0
> 
> 时间：2012-09-18T01:56:54.637
> 
> 标签：iphone, uibarbuttonitem

我知道您可以创建一个 UISearchBar，将其放入 UIBarButtonItem，然后在代码中将其设置为 rightBarButtonItem，但我想知道现在在 IB 中是否有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:40:30.197

您可以在 UIBarButtonItem 中放置一个 UIView。然后，您可以将任何 UIView 子类作为子视图放入该 UIView。

# javascript - window.event !== IE 中的 window.event

> ID：12469393
> 
> 赞同：13
> 
> 时间：2012-09-18T01:57:11.470
> 
> 标签：javascript, internet-explorer

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T02:59:35.467

我做了一些实验。看起来每次`window.event`在 IE 中访问时，都会得到一个新对象：

```
document.body.onclick = function() {
    var u = window.event, v = window.event;
    console.log(window.event == window.event); // false
    console.log(u == v); // false
    console.log(u == u); // true
    console.log(v == v); // true
    console.log(u == window.event); // false
    console.log(v == window.event); // false
}; 
```

因此，每当您检索IE 时`window.event`，IE 都会创建一个新对象。如果您针对自身（`u == u`或`v == v`）测试该对象，它就是`true`。`window.event`如果你用另一个对象测试它，它是错误的。

`NaN`（请注意，这与`var a = NaN; console.log(a == a);`的行为不同`false`。）

可以将`window.event`其视为类似于生成器的东西，更像是`window.createCopyOfLastEvent()`在 IE 中。 `window.event`是一个总是返回一个新对象的getter。下面说明了这一点：

```
document.body.onclick = function() {
    var v = window.event;
    v.a = 1;
    console.log(v.a); // 1
    console.log(window.event.a); // undefined
}; 
```

在上面的例子中，`window.event.a`是`undefined`当它被记录时，因为它引用了一个不同的对象，而不是 where `a = 1`。

为了进一步说明，这种行为可以在纯 JavaScript 中重新创建（在支持 ES5 的浏览器中：IE9，或最新版本的 FF、Chrome 或 Safari）：

```
var weirdObject = Object.create({ }, {
    whoa: {
        get: function() {
            return new Object();
        }
    }
});

console.log(weirdObject.whoa == weirdObject.whoa); // false 
```

或者甚至看起来更陌生：

```
Object.defineProperty(window, 'ahh', {
    get: function() {
        return Math.random();
    }
});

console.log(ahh == ahh); // false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T02:26:48.213

更新：阅读：[IE Bug (window === top) === false](https://stackoverflow.com/questions/4850978/ie-bug-window-top-false)

简而言之——IE 坏了，不能很好地比较主机对象。

并非所有浏览器都支持`window.event`. 大多数使用`event`传递给函数的对象。（`window.event`被认为是 IE 特有的东西，尽管 Chrome 似乎复制了它。）

尝试这个：

```
 document.getElementById('btn1').onclick = function(event){   
  if (!event) {event = window.event;}

  alert([typeof event, typeof window.event])

  if (window === window)  
    alert('window === window')
  else
    alert('window !== window');

  if (window.event === window.event)  
    alert('window.event === window.event')
  else
    alert('window.event !== window.event' );   
} 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T03:18:34.740

比较行为[符合 ECMAScript 标准](http://bclary.com/2004/11/07/#a-11.9.6)当代码在不支持的浏览器中执行时`window.event`，我们实际上是在比较两个返回的未定义值`true`。在 MSIE`window.event`上只是一个`MSEventObj`接口，这意味着对它的两次不同调用*不会*返回相同的对象，它们会进行错误的比较。

这意味着，嗯，`window.event`永远不会相同，所以比较是没有意义的。如果您尝试比较事件类型，您可以通过强制字符串比较来进行鸭子类型比较：

```
//false, you're either comparing undefined values or different objects
console.log(window.event == window.event);

//true, you're either comparing two "undefined" or "[object MSEventObj]" strings
console.log((""+window.event) === (""+window.event)); 
```

我不知道您需要执行此特定检查的实际情况。应通过检查其`type`属性来确定事件类型：

```
function doSomething(e) {
  if (!e) var e = window.event;
  alert(e.type);//or whatever
} 
```

请注意，这应该从属于 DOM 的脚本执行，而不是从开发人员工具的控制台执行：

![别](../Images/cb947358d1e13575a70e8637496059dd.png)

[跨浏览器事件属性的怪癖概述](http://www.quirksmode.org/js/events_properties.html)

# security - 看到这种方法有任何安全风险吗？

> ID：12469399
> 
> 赞同：1
> 
> 时间：2012-09-18T01:57:35.323
> 
> 标签：security, authentication

我正在开发具有以下身份验证样式的 RESTful(ish) API：

*   客户端调用“身份验证”API 方法并通过 HTTPS POST 传递用户名和密码。此方法返回基本帐户信息和一个“客户令牌”，该令牌存储在数据库中的用户帐户上。

*   所有进一步的 API 调用（全部通过 HTTPS POST）都需要客户端令牌。如果系统无法通过客户端令牌找到请求者，则呼叫被拒绝。

我的未决问题是： 1) 有没有人认为这是一个重大的安全问题？2) 我应该让客户端令牌随时间过期或更改有什么好的理由吗？现在我为每个用户分配一个随机的。如果用户注销或忘记密码，我会生成一个新密码。

我很想知道大家对这种方法的看法。我不追求创新，我只是让我意识到这种方法的风险。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:55:05.047

What you've described is functionally equivalent to a session cookie, only reimplemented in your application, and therefore subject to a number of pitfalls that have likely already been dealt with by most web frameworks.

*   Ensure your tokens have enough bits of entropy. If the tokens are simple 32-bit integers, wild guesses might be enough to hit on one in use by someone else.
*   If you're generating these tokens randomly, ensure you use a cryptographically-strong source of random numbers, or the next token might be guessable based on previous tokens.
*   If these `POST` requests are coming from scripts and such embedded in web pages, passing the token around as an explicit parameter instead of as a cookie declared `secure` and `httponly` makes token-stealing by cross-site scripts much easier.

# jquery - 使用 jquery 获取带有链接的 alt 属性

> ID：12469400
> 
> 赞同：0
> 
> 时间：2012-09-18T01:57:42.657
> 
> 标签：jquery

我知道的一个支持字幕链接的 jquery 插件是 NIVO 滑块。基本上我所拥有的是一个 jquery 插件，它使用图像的 alt 属性将其显示为标题。我想知道在 alt 属性中引用一个 DIV 并让它显示 DIV 会有多困难。

这是jQuery：

```
$('.thumb_container').click(function(){

      var handler = $(this).find('.large_image');
      var newsrc  = handler.attr('src');
      var newcaption  = handler.attr("alt");
      loadPhoto(newsrc, newcaption);

 }); 
```

所以我想要的是图像的 alt 属性来引用 DIV（即 alt="#example"），并且 DIV 中的链接将显示为标题。有什么简单的方法可以做到这一点？我上面的内容有效，但标题显示#example 而不是#example DIV 中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:02:12.667

试试这个：

```
$('.thumb_container').click(function(){
    var handler = $(this).find('.large_image');
    var newsrc  = handler.attr('src');
    var newcaption  = $(handler.attr("alt")).html();
    loadPhoto(newsrc, newcaption);
}); 
```

关注 handler.attr("alt") 周围的 jquery 选择器

# infopath - 仅将外部数据加载到 InfoPath 一次

> ID：12469401
> 
> 赞同：0
> 
> 时间：2012-09-18T01:57:45.057
> 
> 标签：infopath

希望有人可以帮助我解决我的问题。

**背景** 我创建了一个用于评估项目风险的 InfoPath 表单。它允许用户选择一个场景，然后表单返回一个风险等级和一组操作。操作在表单上显示为多选列表框，因为我无法在文本框中显示操作列表。

该表单将在多个位置使用，因此将发布到澳大利亚的多个 sharePoint 站点，因此为了便于更新，所有场景和操作将从通用 SharePoint 列表加载。这样就不需要在每次更新时重新发布表单。

**问题** 如果推出了新版本的表单。例如，任何场景或动作都会发生变化。我不能更改任何以前提交的表格，因为以前提交的表格中的答案可能与旧版本无关。

这不是场景字段的问题，因为它们可以被标记为仅加载一次。但是多选列表框的工作方式不同，每次打开表单时都会加载其数据。

**问题** 是否只在多选列表框中加载数据一次？

如果没有的话，我可以将数据加载到项目符号列表或其他一些我只能在第一次打开表单时加载一次的字段中吗？

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:27:36.173

我遇到了同样的问题 - 我不希望旧的、以前提交的表单中的数据在将来打开时刷新它们的下拉列表、表格等数据。他们需要始终使用提交时使用的相同数据，无论数据库值是否发生变化。

为此，我首先取消选中“打开表单时自动填充数据”选项。然后我取消选中告诉数据在 X 天后过期的选项 - 所以我总是知道表单将缓存数据。

然后，我创建了一个字段作为天气标记，以更新或不更新数据库中的值。然后，如果需要，我使用自定义代码从数据库中刷新辅助数据源。在我的表单加载事件中，我检查来自是否已经提交或没有使用我的标记字段......如果以前没有提交 - 刷新数据 - 如果以前提交 - 不要刷新数据。

在提交表单时，我将我的市场字段设置为指示表单已锁定，并且永远不应更新其二级来源

希望你能明白我的想法。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:07:10.987

> 如果推出了新版本的表单。例如，任何场景或动作都会发生变化。我不能用它更改任何以前提交的表格，因为以前提交的表格中的答案可能与旧版本无关

我不明白您的问题，因为[先前创建的 XML 数据表单是使用创建它们的 XSN 模板打开的](https://sharepoint.stackexchange.com/a/42579)（即，先前创建的 XML 数据表单是使用旧的 XSN 模板表单打开的）。如果不是这样，那么请提出一个问题，为什么它对您失败。

另外，我不明白为什么需要从外部源加载选项，如果它应该永远修复，从嵌入到模板本身的资源 XML 文件加载它或手动输入的选项（在多选列表的属性中手动**输入选项**）盒子）。因此，它们将存储在使用的模板中

请检查

*   [免费培训：数据驱动设计 - 使用默认数据（实验 1）](http://www.infopathdev.com/blogs/mel_balsamo/archive/2010/12/12/free-training-data-driven-design-using-default-data-lab-1.aspx)

关于如何在 Infopath 中使用默认数据创建测验表单的更好方法的分步教程（模块中的问题和答案）

# android - 在Android的JNI方法中执行具有超级用户权限的命令

> ID：12469403
> 
> 赞同：1
> 
> 时间：2012-09-18T01:57:59.147
> 
> 标签：android, c, android-ndk, java-native-interface

在Java中，我可以有这样的东西：

```
Process p = Runtime.getRuntime().exec("su");
DataOutputStream pOut = new DataOutputStream(p.getOutputStream());
pOut.writeBytes("find / -perm -2000 -o -perm -4000\n");
pOut.writeBytes("ps\n");
pOut.writeBytes("ls\n");
pOut.writeBytes("exit\n");
pOut.flush();
p.waitFor(); 
```

我知道要在 JNI 方法中执行 find 命令，我们可以使用**system**或**popen**函数。但我不知道如何以 su 权限执行它？

PS：由于系统函数fork了一个新的子进程。我希望生成一个子进程来执行多个命令，例如在 Java 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T04:30:28.783

我看不出您使用 system() 执行的意义何在， system() 不会返回流以读取输出。

我认为你应该尝试 popen()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:17:59.047

假设你已经`su`在你的 Android 设备上安装并且它在路径中，你可以这样尝试：

```
system("su -c \"find / -perm -2000 -o -perm -4000\" root"); 
```

`su`接受参数：`-c`参数指定要运行的命令。

编辑：你可能在那里不走运。我不确定您是否可以将多个命令传递给`su`命令。你可能会通过传递一个 shell 然后传递那个 shell 命令而侥幸逃脱，但不能保证。

```
system("su -c \"sh -c 'find / -perm -2000 -o -perm -4000; rm /tmp/1'\" root"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T04:27:36.707

Femi 的答案很接近，我已经测试过，以下对我有用：

```
system("su -c \"find / -perm -2000 -o -perm -4000; ps; ls\""); 
```

# c++ - 使用位集进行位图存储有什么优势？

> ID：12469404
> 
> 赞同：1
> 
> 时间：2012-09-18T01:58:01.490
> 
> 标签：c++, stl, bitmap, bitset

我目前正在评估是否应该使用单个大型位集或多个 64 位无符号长整数 (uint_64) 来存储大量位图信息。在这种情况下，位图表示几 GB 内存页面的当前状态（脏/非脏），并且有数千个条目。

我正在执行的工作要求我能够查询和更新脏页，包括在两个脏页位图之间执行 OR 操作。

为了清楚起见，我将执行以下操作：

*   从文件导入位图，并与现有位图执行按位或运算
*   计算汉明权重（计算设置为 1 的位数，表示脏页数）
*   重置/清除一点，将其标记为更新/清理
*   检查位的当前状态，以确定它是否干净

看起来对 C++ 位集执行按位运算很容易，并且很容易计算汉明权重。但是，我想这里没有魔法——CPU 只能对它可以存储在寄存器中的尽可能多的字节执行按位操作——所以 bitset 使用的例程可能与我自己实现的例程相同。汉明权重可能也是如此。

此外，将位图数据从文件导入位集看起来很难看——我需要多次执行位移，如此[处所示](https://stackoverflow.com/questions/708114/convert-byte-array-into-bitset)。我想考虑到我将使用的位集的大小，这会对性能产生负面影响。当然，我想我可以只使用许多小的位集，但这可能没有任何优势（其他可能易于实现）。

一如既往，任何建议都会被采纳。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:04:16.530

数千位听起来并不多。但也许你有数百万。

我建议您编写代码，就好像您通过抽象它具有理想的实现一样（首先使用更容易编码的任何实现，忽略任何性能和内存要求问题）然后尝试几种替代的特定实现来验证（通过测量它们）哪个表现最好。

您甚至没有考虑过的一种解决方案是使用 Judy 数组（特别是 Judy1 数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:11:54.983

听起来您有一个非常具体的一次性应用程序。就我个人而言，我从未使用过 bitset，但据我所知，它的优势在于它可以像一个布尔数组一样被访问，并且能够像向量一样动态增长。

据我所知，你真的不需要其中任何一个。如果是这种情况，并且如果填充位集是一场戏剧，我会倾向于自己做，因为分配一大堆整数并对其进行位操作确实非常简单。

鉴于有非常具体的要求，您可能会从进行自己的优化中受益。访问原始位数据对此至关重要（例如，使用预先计算的单个字节的汉明权重表，如果有空闲内存，甚至可以使用两个字节）。

我一般不提倡重新发明轮子......但是如果您有特殊的优化要求，最好针对这些调整您的解决方案。在这种情况下，您要实现的功能非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:16:56.090

我想如果我是你，我可能会省去任何 DIY 的麻烦并使用[boost::dynamic_bitset](http://www.boost.org/doc/libs/1_51_0/libs/dynamic_bitset/dynamic_bitset.html)。他们在功能方面涵盖了所有基础，包括可用于文件 IO 的流运算符重载（或仅以`unsigned int`s 形式读取数据并使用它们的转换，请参阅他们的示例）和`count`汉明权重的方法。Boost 至少受到 Sutter 和 Alexandrescu 的高度评价，他们在头文件中做所有事情——没有链接，只有`#include`适当的文件。此外，与标准库不同`bitset`，您可以等到运行时指定位集的大小。

编辑： Boost 似乎确实允许您需要的快速输入读取。 `dynamic_bitset`提供以下构造函数：

```
template <typename BlockInputIterator>
dynamic_bitset(BlockInputIterator first, BlockInputIterator last,
               const Allocator& alloc = Allocator()); 
```

底层存储是 s 的一个`std::vector`（或几乎相同的东西）`Block`，例如`uint64`s。`std::vector`因此，如果您以 a of s 的形式读取位图`uint64`，则此构造函数会将它们直接写入内存而无需任何位移。

# xaml - Windows Store 项目 Xaml 与标准 wpf 项目不同

> ID：12469407
> 
> 赞同：0
> 
> 时间：2012-09-18T01:58:42.093
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我遇到了一个奇怪的问题。我在 Visual Studio 2012 中的 wpf 项目和 Windows 商店项目上设置了相同的项目，并且从相同的 xaml 代码中获得了不同的结果。我的代码是

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" Margin="120,120,120,120">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Button></Button>
</Grid> 
```

在我的 Windows 商店项目中，该按钮没有填满网格，它只是左侧中间的一个小按钮。

然而，在 wpf 项目中，按钮会像我期望的那样填充网格。为什么有区别？我需要设置什么才能让按钮像过去一样填充网格的内容？

编辑：我发现如果我设置垂直和水平对齐以拉伸它填充网格。但不知道为什么我必须明确说明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:01:26.557

因为虽然两个平台上的 VerticalAlignmentProperty 的默认值相同（拉伸） - Jupiter 在 Button 类型的默认样式中指定应将 VerticalAlignment 设置为 Center。至于为什么选择它 - 它可能只是一个疏忽，某些工程师或设计师的偏好，或者它可能只是使用标准项目模板更好地工作。

# scala - 如何引用在 Scala 宏中包含“this”？

> ID：12469409
> 
> 赞同：9
> 
> 时间：2012-09-18T01:58:53.580
> 
> 标签：scala, macros, scala-2.10, scala-macros

以下宏是从一个更大的示例中提取的，它应该创建一个只有对 的引用的树`this`：

```
def echoThisImpl(c:Context): c.Expr[Any] = {
  import c.universe._

  val selfTree = This(c.enclosingClass.symbol)
  c.Expr[AnyRef](selfTree)
}

def echoThis: Any = macro CallMacro.echoThisImpl 
```

但是调用`echoThis`诸如

```
object Testing extends App {
  val thisValue = CallMacro.echoThis
  println(thisValue)
} 
```

编译失败，提示信息

```
[error] /home/rafael/dev/scala/goose/goose-macros/src/test/scala/Testing.scala:8: type mismatch;
[error]  found   : <noprefix>
[error]  required: Any
[error]   val thisValue = CallMacro.echoThis 
```

如果我设置*-Ymacro-debug-lite*标志，生成的树是`This(newTermName("<local Testing>"))`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T07:09:21.590

有两种选择可以实现您想要的：

1）使用`This(tpnme.EMPTY)`。目前这不能编译，所以你必须使用它`This(newTypeName(""))`，但在 RC1 中这将被修复。

2）使用`This(c.enclosingClass.symbol.asModule.moduleClass)`。目前这不起作用，因为[https://issues.scala-lang.org/browse/SI-6394](https://issues.scala-lang.org/browse/SI-6394)，但在 RC1 中这将得到修复。

# c# - 如何将视图模型绑定到视图

> ID：12469415
> 
> 赞同：0
> 
> 时间：2012-09-18T01:59:42.267
> 
> 标签：c#, windows-phone-7, xaml, data-binding, mvvm

我无法将 my 绑定`View Model`到我的`View`. 我是初学者`MVVM`，但我相信我（几乎）正确地实现了我的系统。我有一个包含数据的数据，`Model`我将其放入我的.`View Model``View Model``View`

我的问题是我的`ListBox`每个`View`项目有 3 个对象，我似乎无法为列表中的每个项目正确绑定它。

**主页.xaml**

```
<ListBox x:Name="FavoritesListBox" ItemsSource="{Binding FavoriteItems}" 
         SelectionChanged="FavoritesListBox_SelectionChanged">

    <StackPanel Orientation="Horizontal" Margin="12,0,12,0">
        <Image x:Name="favicon" Source="{Binding Favicon}" 
               Width="50" Height="50"/>
        <StackPanel>
            <TextBlock x:Name="favoritesName" Text="{Binding Name}" 
                       FontSize="{StaticResource PhoneFontSizeExtraLarge}"/>
            <TextBlock x:Name="favoritesAddress" 
                       Text="{Binding Address}" Margin="12,0,0,0"/>
        </StackPanel>
    </StackPanel>                
</ListBox> 
```

**MainPage.xaml.cs**

```
public FavoritesPage()
    {
        InitializeComponent();

        // Set the data context of the listbox control to the sample data
        FavoritesListBox.DataContext = App.ViewModel;
    } 
```

**应用程序.xaml.cs**

```
private static MainViewModel viewModel = null;        

    public static MainViewModel ViewModel
    {
        get
        {
            // Delay creation of the view model until necessary
            if (viewModel == null)
                viewModel = new MainViewModel();

            return viewModel;
        }
    } 
```

**主视图模型.cs**

```
public ObservableCollection<ItemViewModel> FavoriteItems { get; private set; }

    public MainViewModel()
    {
        //FavoriteItems = new ObservableCollection<ItemViewModel>();
        FavoriteItems = Settings.FavoritesList.Value;
    } 
```

**Settings.cs（模型）**

```
public static Setting<ObservableCollection<ItemViewModel>> FavoritesList = 
    new Setting<ObservableCollection<ItemViewModel>>(
        "Favorites", 
        new ObservableCollection<ItemViewModel>()); 
```

**项目视图模型.cs**

```
private string _favicon;
    public string Favicon
    {
        get
        {
            return _favicon;
        }
        set
        {
            if (value != _favicon)
            {
                _favicon = value;
                NotifyPropertyChanged("Favicon");
            }
        }
    }

    private string _name;
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            if (value != _name)
            {
                _name = value;
                NotifyPropertyChanged("Name");
            }
        }
    }

    private string _address;
    public string Address
    {
        get
        {
            return _address;
        }
        set
        {
            if (value != _address)
            {
                _address = value;
                NotifyPropertyChanged("Address");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

..这就是我保存每个项目的位置和方式（应该在`ItemViewModel`

```
void addToFavorites_Click(object sender, EventArgs e)
{
    var favoriteItem = 
        new ItemViewModel{
            Favicon = "", 
            Name = "", 
            Address = TheBrowser.currentUrl() };
        Settings.FavoritesList.Value.Add(favoriteItem);            
} 
```

`FavoritesList`使用`ItemViewModel`包含 3 个对象的位置填充。该列表已正确填充，因为在调试期间我可以看到 中的实体，但是我在调​​用这些实体以显示在我的?`FavoritesList`中时遇到问题`view model``ListBox``view`

我相信我的绑定不正确，但我不确定如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:15:07.987

除了将您的 DataContext 设置为您的视图模型（如链接到[创建 ContextBinding XAML](https://stackoverflow.com/questions/12151618/creating-contextbinding-xaml)的评论中所述）之外，您还需要让您的视图模型实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)（包括`ItemViewModel`您未在问题中显示的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:20:53.840

在您的 XAML 中，您绑定到路径`Name`，并且`Address`您的`ItemViewModel`?

**正确阅读代码后更新：**

您没有更新列表框项目的数据模板。这是你需要做的：

```
<ListBox x:Name="FavoritesListBox" ItemsSource="{Binding FavoriteItems}" SelectionChanged="FavoritesListBox_SelectionChanged">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="12,0,12,0">
                <Image x:Name="favicon" Source="{Binding Favicon}" Width="50" Height="50"/>
                <StackPanel>
                    <TextBlock x:Name="favoritesName" Text="{Binding Name}" FontSize="{StaticResource PhoneFontSizeExtraLarge}"/>
                    <TextBlock x:Name="favoritesAddress" Text="{Binding Address}" Margin="12,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# java - 使用 ParameterNameAware 接口 (Struts2) 避免参数篡改

> ID：12469418
> 
> 赞同：1
> 
> 时间：2012-09-18T02:00:03.533
> 
> 标签：java, struts2

我正在开发我的 struts2 应用程序来解决参数篡改问题。我听说这可以通过在我的操作中实现 ParameterNameAware 接口来解决，但我还没有找到解释这种情况的最佳示例。谁能给我一个关于如何使用 ParameterNameAware 的好例子。快速回答将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:40:43.820

关于这个接口的全部想法是维护一个有效参数名称的列表，并通过拒绝不在此列表中的任何请求参数（白名单）。这在黑客试图将不需要的表单字段值包含为可能在某些情况下执行的隐藏变量。例如，包含太多表单字段变量（>10000 等），可能会在服务器端创建拒绝服务。

一旦你实现了这一点，你可以立即拒绝当前请求范围内的任何不需要的参数，或者你可以更好地控制这种情况。

可能的实施：

实现`ParameterNameAware`接口并覆盖其`acceptableParameterName`方法，如下所示：

```
 public boolean acceptableParameterName(String parameterName) {

            boolean allowedParameterName = true ;

            if ( parameterName.contains("session")  || parameterName.contains("request") ) {

                    allowedParameterName = false ;

            }

            return allowedParameterName;
    } 
```

您需要在包含 getter 和 setter 方法的表单 bean 中实现此接口。在这个特定的示例中，如果当前请求包含任何表单字段变量，例如请求或会话，那么这是一个失败的场景。这只是一个典型的例子。此链接中有完整的文档 [Class ParametersInterceptor](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/interceptor/ParametersInterceptor.html)

# php - PHP 函数 file_get_contents 检索编码信息 - header: "'Content-Type: image/png'"

> ID：12469420
> 
> 赞同：2
> 
> 时间：2012-09-18T02:00:17.577
> 
> 标签：php, content-type, decode, file-get-contents

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:06:30.790

为什么不呢，创建一个基本的测试脚本来输出返回的图像，但我怀疑它的图像说：

> 停止报废我的网站！！！雅达 雅达

```
header('Content-Type: image/png');
echo file_get_contents('http://example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:02:40.703

标`Content-Type`头告诉您请求的文件具有哪种内容类型，在您的情况下，它是 PNG 图像 ( `image/png`)。

您可以在网上找到许多内容类型的描述（以所谓的 mime-type 规范编写），这是一个很好的列表：[fileformat.info MIME types](http://www.fileformat.info/info/mimetype/index.htm)。

正如您可能想象的那样，不可能以文本形式显示图像（至少在将其转换为 ascii 艺术之前不能），因此这次您不会有太多运气。

检查 URI 是否真的是您想要获取的那个。

# linux - undefined reference to mbind

> ID：12469421
> 
> 赞同：2
> 
> 时间：2012-09-18T02:00:26.323
> 
> 标签：linux, compiler-construction, compilation, ubuntu-11.04, ubuntu-11.10

I did upgrade my Ubuntu from 11.04 to 11.10\. In 11.04 all this worked fine:

```
 gcc -fopenmp -g -c -o test.o test.c -I../include
 gcc -fopenmp -g -o test test.o -lnuma -lm -L../myLib -lmyL 
```

but now, in 11.10, it gives the following errors:

```
 ../myLib/libmyL.a (get.o): In function 'get':
 get.c:(.text+0xa5): undefined reference to `mbind' 
```

Where mbind is [http://www.kernel.org/doc/man-pages/online/pages/man2/mbind.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/mbind.2.html)

Plz can you help me to solve this problem? Or at least tell me what went wrong? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:06:19.907

Move `-lnuma` to after your library in the link line this will help solve the dependency - because when you have it on the link line first the linker drops it because it doesn't need it as far as it knows so far.

Oh and in answer to your possible follow up question, yes you can create circular dependencies and **No** the they are not fun to fix :-)

# c# - Calling a method from another Form in C#

> ID：12469423
> 
> 赞同：0
> 
> 时间：2012-09-18T02:00:49.603
> 
> 标签：c#, mysql, winforms, entity-framework

I want that when I insert or update records in another form (`Form2`), the `DataGridView` on `Form1` should automatically refresh (call `btnRefresh`) after each operation or *preferably* wait until all change operations have finished, and update the `DataGridView` form `Form2`'s closing event with all changes.

I believe in VB.NET this is achieved with `Form1.DataGridView.Refresh`, but I am not sure in C#. I was told that I pass the reference of the `DataGridView` on `Form1` to `Form2` using properties but since I'm new to C#, I didn't know how to. How can I resolve this issue?

My refresh button code:

```
private void btnRefresh_Click(object sender, EventArgs e)
{
    GVThesis.DataSource = thesisRepository.GetThesis();
    GVThesis.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:44:58.037

首先，将您的刷新代码包装到它自己的方法中，并从您的单击事件处理程序方法中调用它，如下所示：

```
 private void btnRefresh_Click(object sender, EventArgs e) 
    { 
        this.RefreshData();
    }

    public void RefreshData()
    {
        GVThesis.DataSource = thesisRepository.GetThesis(); 
        GVThesis.Refresh(); 
    } 
```

然后，假设您正在从 Form1 实例化并启动新表单 (Form2)，只需进入 Form2 的代码并为自己创建一个新的构造函数重载，它将接受对 Form1 的引用，并将其存储在私有变量中，就像这样：

```
public partial class Form2 : Form
{
    private Form1 frm1;

    public Form2()
    {
        InitializeComponent();
    }

    public Form2(Form1 otherForm)
    {
        InitializeComponent();
        this.frm1 = otherForm;
    }
} 
```

然后，您可以从 Form2 中任何您喜欢的地方调用“刷新”，如下所示：

```
this.frm1.RefreshData(); 
```

**编辑：**

我创建了一个小示例，我无法在此处上传...但这是 VS 中程序本身的屏幕截图，以及运行它和执行功能的结果的屏幕截图...希望这会帮助。

程序（如果它看起来太小，请缩放您的视图） ![VS 2010 中的程序](../Images/3de50528db803330e8eab09a5b417b9b.png)

结果： ![Form1 上的一个函数，从 Form2 调用](../Images/11881a603f2095c466571deb471882ab.png)

# jquery - html 锚点跳转到顶部

> ID：12469434
> 
> 赞同：0
> 
> 时间：2012-09-18T02:03:09.487
> 
> 标签：jquery, html, css

如果您单击此处：[http](http://www.ideagasms.net/index2#aciw) ://www.ideagasms.net/index2#aciw ...您将被平滑滚动到页面上标题为“ACIW SERIES”的部分。

在那里，您会看到一个手风琴，问题出在：单击手风琴的任何一个选项卡，注意它是如何滚动/跳转到手风琴本身的顶部的。

有没有一种简单的方法可以防止窗户跳动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:17:39.253

从您的点击处理程序中，您需要在最后执行或在它传递给函数的事件上`return false`使用 jQuery 。`preventDefault`关于 jQuery 的文档`preventDefault`在[这里](http://api.jquery.com/event.preventDefault/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:25:19.987

在`click()`手风琴事件中，以这种方式更改您的脚本：

```
$(".nav_bar li").click(function() {    //  Move content horizontally
    var Tab = $(this).attr("class");
    $(".boxness").stop().animate({left : "1500px"}, 800, function() {
        $(".boxness").css("left", "-1500px").hide();
        $("#" + Tab).show().animate({left : "0px", opacity : 1.0}, 600).stop();
    });
    return false; // Give this here
}); 
```

# c - 写入结构时出现分段错误

> ID：12469436
> 
> 赞同：2
> 
> 时间：2012-09-18T02:03:13.703
> 
> 标签：c, pointers, struct, segmentation-fault

我`struct`在我的程序中定义为：

```
    结构记忆区{
      无效*来自；
      无效*到;
      整数模式；
    }

```

我在我的程序中声明，这个结构的数组为`struct memregion regions[10]`. 然后我将它传递给一个函数，`get_mem_layout(regions, 10)`其声明为：

```
    void get_mem_layout(struct memregion *regions, int size)

```

但是，当我尝试将数据写入结构的任何成员变量时

```
    区域[j].mode = 1;

```

或者

```
    无效*地址；
    地址=（无效*）0；
    区域[j].from = addr;

```

我收到分段错误。我无法确定为什么会这样。请帮忙。

更新：删除完整代码，因为它是作业的一部分。问题已通过@paddy 的回答解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:17:14.073

为什么没人捡到这个？还是我错过了什么？

`get_mem_layout`你做的第一件事是这样的：

```
regions = 0; 
```

然后你继续`regions`作为一个数组访问......

你的意思是：

```
num_regions = 0; 
```

# algorithm - '.' 的正则表达式匹配支持 和 '*'

> ID：12469437
> 
> 赞同：0
> 
> 时间：2012-09-18T02:03:20.737
> 
> 标签：algorithm, recursion, string-matching

[实现正则表达式匹配并支持“。” 和 '*'。](http://www.leetcode.com/2011/09/regular-expression-matching.html)

'。' 匹配任何单个字符。'*' 匹配零个或多个前面的元素。匹配应覆盖整个输入字符串（不是部分）。

> 一些例子：
> 
> isMatch(“aa”,”a”) → 假
> 
> isMatch(“aa”,”aa”) → 真
> 
> isMatch(“aaa”,”aa”) → 假
> 
> isMatch(“aa”, “a*”) → 真
> 
> isMatch(“aa”, “.*”) → 真
> 
> isMatch(“ab”, “.*”) → 真
> 
> isMatch(“aab”, “c*a*b”) → 真

作者给出了下面的解决方案，真的很漂亮。

```
bool isMatch(const char *s, const char *p) {
  assert(s && p);
  if (*p == '\0') return *s == '\0';

  // next char is not '*': must match current character
  if (*(p+1) != '*') {
    assert(*p != '*');
    return ((*p == *s) || (*p == '.' && *s != '\0')) && isMatch(s+1, p+1);
  }
  // next char is '*'
  while ((*p == *s) || (*p == '.' && *s != '\0')) {
    if (isMatch(s, p+2)) return true;
    s++;
  }
  return isMatch(s, p+2);
} 
```

作者还给出了一些进一步的想法：

如果您仔细考虑，您可以利用上述代码以指数复杂度运行的某些情况。

> 你能想出一些例子吗？你如何让上面的代码更有效率？
> 
> 我想出了一个需要很长时间才能得到结果的案例，而字符串 s 和 p 的长度并不大。
> 
> s[] = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaa" p[] ="a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a* a*a*a*a*a*a*b"

谁能帮我验证这个答案？如何看待这种寻找极端的测试题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:09:03.930

这是一个经典案例，通过递归下降实现正则表达式匹配会导致病态行为。

实现这一点的正确方法是将您的正则表达式变成一个不确定的状态机。它需要（相当多）更多代码，但对于任何给定的正则表达式都会以线性时间运行。

这是关于该主题的[一流文章](http://swtch.com/~rsc/regexp/regexp1.html)。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:50:24.800

了解您的案例为何表现出指数行为的最佳原因是首先对代码进行一些试验，然后尝试从中收集一些经验数据并做出假设。

首先，让我们添加一些简单的“日志”：

```
#include <cassert> 
#include <cstdio>
using namespace std;

int count = 0;

bool isMatch(const char *s, const char *p) {
    printf("%5d   %s   %s\n", count++, s, p);  
    .
    .
    . 
```

现在让我们进行一些实验，确保在每次实验之前重置计数（记住在实际代码中要避免使用全局变量 :)）

```
isMatch("a", "a*b");
isMatch("aa", "a*a*b");
isMatch("aaa", "a*a*a*b");
isMatch("aaaa", "a*a*a*a*b");
isMatch("aaaaa", "a*a*a*a*a*b");
isMatch("aaaaaa", "a*a*a*a*a*a*b"); 
```

您可以查看每个的输出，并查看为每个生成的行数，然后问自己“当我延长字符串时，递归调用的数量如何增长？” （经典经验算法分析！）

我在`aaa`这里为你做了这个案例：http: [//ideone.com/8t2kS](http://ideone.com/8t2kS)

你可以看到它花了 34 步。查看输出；它应该让您对匹配的性质有所了解。并尝试增加长度的字符串。快乐的实验。

# javascript - return and scope for jquery each() function within an each() function

> ID：12469442
> 
> 赞同：0
> 
> 时间：2012-09-18T02:04:17.333
> 
> 标签：javascript, jquery, scope, each

I'm have markup like this:

```
<div class="imagegroup">
    <img>
    <img>
    <img>
</div>
<div class="imagegroup">
    <img>
    <img>
    <img>
</div>
<div class="imagegroup">
    <img>
    <img>
    <img>
</div>​ 
```

And I want to separately get the height of the tallest image in each group. I've got a jquery `each` function within an `each` function:

```
$('.imagegroup').each(function(index) {
    var tallestHeight = 0;
    var slideshowNumber = index; 
    var slides = $(this).children();

    $(slides).each(function(index) {
        thisSlideHeight = $(this).height();
        console.log("In slideshow #" + slideshowNumber + ", slide #" + index + " has height " + thisSlideHeight);
        if (thisSlideHeight > tallestHeight) {
            var tallestHeight = thisSlideHeight;
        }
        return tallestHeight;
    });

    console.log("For slideshow " + slideshowNumber + " the tallest slide is " + tallestHeight);

}); 
```

But I'm puzzled as to how to pass the result of the inner each function "one level" up into the "outer" each function without just setting a global variable. `tallestHeight` stays at zero as I've written this. I realize this is *super* beginner :) All help very appreciated.

[http://jsfiddle.net/m2aJu/](http://jsfiddle.net/m2aJu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:07:45.043

你不需要`return tallestHeight`，删除它，它会工作。

并更改`var tallestHeight = thisSlideHeight;`为`tallestHeight = thisSlideHeight;`每个内部的第二个，您应该使用外部变量，而不是声明一个新变量。

或者您可以简化您的代码，如下所示：

```
$('.imagegroup').each(function(index) {
    var max = Math.max.apply(null, $(this).find('img').map(function() {
       return $(this).height();
    }));        
    console.log("For slideshow " + index + " the tallest slide is " + max);
}); 
```

***[这是工作演示](http://jsfiddle.net/m2aJu/1/)***。

# javascript - json 对象的字符串 URL

> ID：12469443
> 
> 赞同：1
> 
> 时间：2012-09-18T02:04:31.430
> 
> 标签：javascript, jquery, json

我试图从一个字符串 URL 中创建一个 JSON 对象但没有成功

我有这个：

```
var URL = "http://localhost/index.php?module=search&param1=4"; 
```

我需要这个：

```
var dir = index.php;
var result = {
           module:'search',
           param1:4
             }; 
```

谁能帮我写代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:11:47.743

在这里发布链接并不完全正确，但在这种情况下，OP 需要的只是一些用于解析 url 的库。

这里是：http: [//james.padolsey.com/javascript/parsing-urls-with-the-dom/](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-21T02:00:56.973

此函数可以从字符串 URL解析变量**和数组：**

```
function url2json(url) {
   var obj={};

   function arr_vals(arr){
      if (arr.indexOf(',') > 1){
         var vals = arr.slice(1, -1).split(',');
         var arr = [];
         for (var i = 0; i < vals.length; i++)
            arr[i]=vals[i];
         return arr;
      }
      else
         return arr.slice(1, -1);
   }

   function eval_var(avar){
      if (avar[1].indexOf('[') == 0)
         obj[avar[0]] = arr_vals(avar[1]);
      else
         obj[avar[0]] = avar[1];
   }

   if (url.indexOf('?') > -1){
      var params = url.split('?')[1];
      if(params.indexOf('&') > 2){
         var vars = params.split('&');
         for (var i in vars)
            eval_var(vars[i].split('='));
      }
      else
         eval_var(params.split('='));
   }

   return obj;
} 
```

在你的情况下：

```
obj = url2json("http://localhost/index.php?module=search&param1=4");
console.log(obj.module);
console.log(obj.param1); 
```

给出：

```
"search"
"4" 
```

如果要转换`"4"`为整数，则必须手动进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:57:41.310

这个简单的javascript做到了

```
url = "http://localhost/index.php?module=search&param1=4";
var parameters = url.split("?");
var string_to_be_parsed = parameters[1];

var param_pair_string = string_to_be_parsed.split("&");
alert(param_pair_string.length);
var i = 0;
var json_string = "{"

for(;i<param_pair_string.length;i++){
var pair = param_pair_string[i].split("=");
if(i < param_pair_string.length - 1 )
 json_string +=  pair[0] + ":'" + pair[1] + "',";
else
 json_string +=  pair[0] + ":'" + pair[1] + "'";
}

json_string += "}";
alert(json_string); 
```

# iphone - Create a link on the ios filesystem with Objective-C

> ID：12469444
> 
> 赞同：8
> 
> 时间：2012-09-18T02:04:35.973
> 
> 标签：iphone, objective-c, ios, symlink, sdwebimage

I'm trying to create a comic reader app which supports both online reading & off-line reading (by downloading).

I've found [MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser) as my image viewer, which supports [SDWebImage](https://github.com/rs/SDWebImage) as the image cache.

My problem is that if some user read little part of a comic on-line, and then they decides to download it for offline reading. Since the already read part is cached by SDWebImage, I don't wanna download them again from the web server. But since user asks to download them locally, I don't wanna keep them on the image cache neither as this will make the downloaded images out of our hand.

Copy the image from the image cache to the place I wanna put is a feasible solution, but it takes storage space. So, what I'm trying to do is cut the image from the image cache to the right place, and then make some soft-link in the image cache. In this way, there should be only one image copy in the storage file system.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-18T02:56:39.353

You don't want a symbolic (soft) link. A symlink doesn't prevent the original file (in the cache) from being deleted. If the original file is deleted, you'll get an error when you try to open it through the symlink.

You want a hard link. You can create a hard link using `-[NSFileManager linkItemAtURL:toURL:error:]` or `-[NSFileManager linkItemAtPath:toPath:error:]`. Take a look at the [*NSFileManager Class Reference*](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html).

If you need to learn more about hard links and symbolic links, you can quickly find a lot of information by searching for “hard link” or “symbolic link” in your favorite search engine.

### NOTE FOR FUTURE SEARCHERS

You can create a symbolic link using `-[NSFileManager createSymbolicLinkAtURL:withDestinationURL:error:]` or `-[NSFileManager createSymbolicLinkAtPath:withDestinationPath:error:]`.

# mysql - 在mac os x上的终端中运行mysql时如何通过单击定位光标

> ID：12469448
> 
> 赞同：2
> 
> 时间：2012-09-18T02:05:19.403
> 
> 标签：mysql, macos, terminal, mouse, keyboard-shortcuts

按住选项键并单击终端可让我用鼠标定位光标。

当我在终端中运行 mysql 时，我希望能够做同样的事情，但它不起作用。是否有某种设置或转义字符可以让我使用选项单击方法？还是有其他方法可以单击以定位光标？

我通常在 mysql 中编写一个长命令并出现意外错误，然后我按向上箭头再次获取该命令，因此我可以对其进行编辑并修复错误。如果我可以使用鼠标单击错误所在的位置，而不是使用左/右箭头键移动光标，那就太好了。

例如：

```
mysql>
CREATE TABLE test_table (col1 INT, blah blah, col3 INT);

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'blah, col3 int)' at line 1 
```

看到该错误后，我想再次在提示符中获取命令，然后只需单击“blah”一词即可开始编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:14:53.193

alt+click 可以定位光标。

正如@zneak 在上面的评论中指出的那样，它通过模拟许多箭头键输入来做到这一点。

因此，当我尝试在多行命令中将光标定位几行时，它会将当前命令替换为以前的命令，就像我按下向上箭头键一样。所以现在，如果我需要将光标向上移动一行，我只需 alt 单击到该行的开头并按左箭头键即可到达上一行。

# node.js - Node.js: Define flush method when compressing with zlib

> ID：12469451
> 
> 赞同：2
> 
> 时间：2012-09-18T02:05:52.070
> 
> 标签：node.js, zlib

How do you define the flush method when compressing a buffer using Node.js's built-in zlib module? Specifically, I need Z_SYNC_FLUSH. There doesn't seem to be a place in the options to set this flag.

[http://nodejs.org/api/zlib.html](http://nodejs.org/api/zlib.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:24:03.503

啊，我想通了。这有点骇人听闻，但您必须修改 flush 属性。这有点相当于修改其他语言的公共类属性，所以有点脏。我不知道这是否会一直有效，但它得到了我想要的。

```
compressor = zlib.createDeflate();
compressor._flush = zlib.Z_SYNC_FLUSH; 
```

# javascript - 如何在 div 上使用 height()，其中包含使用宽度的图像：100%

> ID：12469459
> 
> 赞同：0
> 
> 时间：2012-09-18T02:07:32.110
> 
> 标签：javascript, jquery, css, height, width

所以我有

```
div {
    width: 20%;
}

img {
    width: 100%;
}
<div>
<img />
</div> 
```

因此，图像会根据 div 的宽度适当缩放。我想使用 jQuery 找到图像的高度。

```
var imgHeight = $(img).height();
console.log(imgHeight); 
```

但是，它返回为 0（div 的高度）。如何获得图像的渲染高度？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:13:58.623

正如 loganfsmyth 评论的那样，您需要等待图像完成加载。

您是否将代码放入 document.ready ？

```
$(document).ready(function() {

  var imgHeight = $(img).height();
  console.log(imgHeight);
}); 
```

# vim - Vim: C++ 使用 # 向后缩进

> ID：12469463
> 
> 赞同：5
> 
> 时间：2012-09-18T02:07:58.843
> 
> 标签：vim, indentation

我在带有 openmp 语句的 C++ 代码中使用 Vim。

而在我的`~/.vimrc`

```
 set ai " auto indent 
```

我的问题：当我使用 openmp 句子（以 开头`#`）时，光标会跳到行首而没有自动缩进。

例子：

```
int main()
{
  int idx = 100;
#pragma omp parallel private(idx) // jump to begin of line 
```

，当我喜欢这样的时候：

```
int main()
{
  int idx = 100;
  #pragma omp parallel private(idx) // This is OK 
```

我可以在 Vim 的自动缩进中设置它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T02:26:25.560

`#`Vim 在以(预处理器指令)开头时在第 1 列中放置一行，如果`cinkeys`包含`#`.
因此，您可以删除`#`以`cinkeys`禁用此功能：

```
:set cinkeys-=0# 
```

# xml - xsl:for-each 给定约束

> ID：12469464
> 
> 赞同：1
> 
> 时间：2012-09-18T02:08:20.800
> 
> 标签：xml, xslt, foreach

我有一个关于 xsl:for-each 的问题

如果有代码列表

COMPXXXX COMPXXXX COMPXXXX LAWSXXXX LAWSXXXX

XXXX（编号为 2383）

如果我只想显示以 COMP 开头的代码，

我该怎么做？

我试图有 xsi:course[code='COMP'] 但它没有用（当然我猜..）

```
 <xsl:for-each select="xsi:catalogue/xsi:course[code='COMP']">
            <xsl:apply-templates select="xsi:code" />
            <br />
            <xsl:apply-templates select="xsi:title" />
            <br />
            <xsl:apply-templates select="xsi:year" />
            <br />
            <xsl:apply-templates select="xsi:science" />
            <br />
            <xsl:apply-templates select="xsi:area" />
            <br />
            <xsl:apply-templates select="xsi:subject" />
            <br />
            <xsl:apply-templates select="xsi:updated" />
            <br />
            <xsl:apply-templates select="xsi:unit" />
            <br />
            <xsl:apply-templates select="xsi:description" />
            <br />
            <xsl:apply-templates select="xsi:outcomes" />
            <br />
            <xsl:apply-templates select="xsi:incompatibility" />
        </xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:19:16.507

**使用**：

```
xsi:catalogue/xsi:course[starts-with(code,'COMP')] 
```

**说明**：

正确使用标准 XPath 函数**[`starts-with()`](http://www.w3.org/TR/xpath/#function-starts-with)**

# google-analytics - 谷歌分析_trackSocial 不工作

> ID：12469469
> 
> 赞同：0
> 
> 时间：2012-09-18T02:09:41.853
> 
> 标签：google-analytics, facebook-javascript-sdk

我已正确包含在此处 (http://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080&rd=1) 找到的 GA 跟踪代码段，并且它正在工作（多年来一直如此）

我最近设置了 Facebook Javascript SDK 以在单击“喜欢”按钮时运行代码 - 这也有效。在同一个 FB.Event 函数中，我包含了 googles _gaq.push _trackSocial 如下...

```
FB.Event.subscribe('edge.create',
function(response) {
    // do some stuff, this is working.

    // google track likes - this isn't working
    _gaq.push(['_trackSocial', 'facebook', 'like']);
}
); 
```

控制台没有错误。

因此，任何一种分析都需要很长时间才能注册喜欢，而且我等待的时间不够长，或者出现了问题。

由于 FB.Event 和我的 JS 函数正在运行并且 _gaq.push 没有给出任何错误 - 我不确定问题是什么。

在 Google Analytics *Traffic Source > Social > Social Plugins* 然后点击“Social Source”选项卡，它只显示 Google。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:08:58.610

24 小时后，答案显然是 Analytics 需要很长时间才能更新。

尽管我没有更改任何内容，但 Analytics 现在将 Facebook 显示为社交插件。

所以只需要很长时间才能出现在分析中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T17:30:57.143

如果您使用的是“较新”版本而不是`analytics.js`旧`ga.js`版本，则需要使用.`ga('send'...)``_gat.push(...)`

我原以为您会在您的情况下遇到错误，但这可能对其他人有所帮助。

[ga 或 _gaq.push 用于 Google Analytics 事件跟踪？](https://stackoverflow.com/questions/18696998/ga-or-gaq-push-for-google-analytics-event-tracking)

例如，如果您尝试将[`social-tracking.js`](https://github.com/samscholfield/StuffedWeb/blob/master/social-button-tracking/social-tracking.js)StuffedWeb 与 analytics.js 一起使用，则需要将其转换为新的调用样式。

# xml - 控制嵌套元素的 maxOccurs，而不强制执行顺序

> ID：12469472
> 
> 赞同：1
> 
> 时间：2012-09-18T02:10:05.513
> 
> 标签：xml, xsd, xsd-1.0

我希望定义一个强制执行以下规则的 XSD（基于 v1.0）......

我有一个**parent1**元素，它可以有以下子元素child1 **、****child2**和**child3**。

 ***   **parent1**可以有**child1的 0-1**
*   **parent1**可以有child2**的0-1**
*   **parent1**可以有 0 - **child3的无界**

项目的顺序并不重要。例如

```
<parent1>
  <child3/>
  <child1/>
  <child2/>
  <child3/>
  <child3/>
</parent1> 
```

我已经接近了，但没有雪茄。我能得到的最接近的是执行最小值和最大值，但执行顺序。

```
<xsd:element name="parent1" minOccurs="0" maxOccurs="unbounded">
  <xsd:complexType>
    <xsd:sequence>
      <xsd:element name="child1" minOccurs="0" maxOccurs="1"/>
      <xsd:element name="child2" minOccurs="0" maxOccurs="1" />
      <xsd:element name="child3" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:element> 
```

我尝试过使用`all`而不是`sequence`，但子元素限制`maxOccurs`为 1。我也尝试过使用**selection**和 a`maxOccurs`来替换序列，但这并不限制您可以在下面拥有多少个元素`child1`或元素。`child2``parent1`

**编辑：这是针对 XSD v1.0**

我找到了一个适用于 XSD [1.1](https://stackoverflow.com/questions/839079/middle-way-between-xsd-all-and-xsd-sequence)的解决方案，但是当您看到它在 Eclipse 之类的支持中有多好时，我会尝试坚持使用[1.0](https://bugs.eclipse.org/bugs/show_bug.cgi?id=288527)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:20:31.763

正如 Hantin 所说，这在 XSD 1.0 中组合起来很混乱。

在 XSD 1.1 中，您可以在 xs:all 模型组的粒子上设置 maxOccurs 属性，这样您的问题就解决了。XSD 1.1 目前在 Saxon 和 Xerces 中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:43:37.970

这并不是特别难，尽管正如迈克尔凯所指出的那样，它很混乱而且冗长令人失望。为了简洁起见，将 Jeffrey Hantin 的示例转换为 DTD 表示法，并使用`c1`, `c2`, 和`c3`（再次为简洁起见）作为元素名称，解决方案是

```
(c3*, ((c1, c3*, (c2, c3*)?) | (c2, c3*, (c1, c3*)?))?) 
```

如果子元素的序列传达信息，那么当然，这对所有这些排序的灵活性都很重要。如果序列不传达任何信息，则不需要允许灵活性，通常应该首选 OP 的原始解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:16:57.317

要在 XML Schema 1.0 中做到这一点，您最终必须将可能的`xs:all`粒子“展开”到选择序列树中（其中每个选择的每个分支都有一个唯一的非可选的第一个元素）给你这样的东西：

**编辑：**纠正了我对要求的看法并因此大大减少了冗长。还进行了一些优化以进一步降低冗长性：包含空分支的选择将空分支转换为`minOccurs=0`选择，如果该转换留下只有一个分支的选择，则选择本身被省略并`minOccurs="0"`转移到其唯一的孩子。

```
<xs:sequence>
  <xs:element name="nationality" minOccurs="0" maxOccurs="unbounded" />
  <xs:choice minOccurs="0">
    <xs:sequence>
      <xs:element name="name" />
      <xs:element name="nationality" minOccurs="0" maxOccurs="unbounded" />
      <xs:sequence minOccurs="0">
        <xs:element name="email" />
        <xs:element name="nationality" minOccurs="0" maxOccurs="unbounded" />
      </xs:sequence>
    </xs:sequence>
    <xs:sequence>
      <xs:element name="email">
      <xs:element name="nationality" minOccurs="0" maxOccurs="unbounded" />
      <xs:sequence minOccurs="0">
        <xs:element name="name" />
        <xs:element name="nationality" minOccurs="0" maxOccurs="unbounded" />
      </xs:sequence>
    </xs:sequence>
  </xs:choice>
</xs:sequence> 
```**

# java - 相当于 android 视图的 HTML 5 数据属性

> ID：12469473
> 
> 赞同：5
> 
> 时间：2012-09-18T02:10:36.473
> 
> 标签：java, android, xml, android-view

有没有一种方法可以从视图中存储/检索任意值，类似于 HTML5 数据属性？这样，我可以让视图调用泛型`onClick()`方法，并且该方法可以检索相关数据。

例如：

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="setCountry"
    android:src="@drawable/ic_flag_germany" />

<ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="setCountry"
    android:src="@drawable/ic_flag_france" />
... 
```

我希望能够从被点击的那个中检索一个值。

```
public void setCountry(View v){
     //retrieve data somehow
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:26:09.880

您可以使用`View`'s [tag](http://developer.android.com/reference/android/view/View.html#attr_android%3atag)属性。它是为此目的而设计的。

例如：

```
<ImageView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:onClick="setCountry"
android:src="@drawable/ic_flag_germany" 
android:tag="Germany" /> 
```

...

```
public void setCountry(View v) {
    System.out.println(v.getTag());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:45:42.190

派生自 ImageView，添加成员变量“country”和访问器方法。然后你可以在布局文件中引用你的类：

```
<com.foo.MyImageView ... /> 
```

或使用该`tag`属性。它允许您将任意对象附加到控件，但没有类型安全性，也没有具有适当名称的访问器方法。您可以在 XML 文件中指定一个字符串标记。

或者使用某种从控制 ID 到国家/地区的映射。

# asp.net-mvc-3 - Foreach ViewBag 数据给出的“对象”不包含“var”的定义

> ID：12469475
> 
> 赞同：4
> 
> 时间：2012-09-18T02:11:06.973
> 
> 标签：asp.net-mvc-3, razor, viewbag

我有一个控制器，它正在构建从 Linq 到 Sql 的查询以传递到 ViewBag.products 对象。问题是，我无法像预期的那样循环使用 foreach 。

这是构建查询的控制器中的代码，应用了 .ToList() 函数。

```
var products = from bundles in db.Bundle
    join bProducts in db.BundleProducts on bundles.bundleId equals bProducts.bundleID
    join product in db.Products on bProducts.productID equals product.productID
    join images in db.Images on product.productID equals images.productID
    where bundles.bundleInactiveDate > DateTime.Now
          select new {
              product.productName,
              product.productExcerpt,
              images.imageID,
              images.imageURL
           };
ViewBag.products = products.ToList(); 
```

由于我在 Index.cshtml 上使用不同的模型来处理所需的其他项目，因此我认为可以使用一个简单的 Html.Partial 来包含 viewbag 循环。我已经尝试过使用和不使用部分的相同结果，并且只需使用 index.cshtml 中的 foreach。包含部分的片段如下：

```
<div id="bundle_products">
<!--build out individual product icons/descriptions here--->
@Html.Partial("_homeBundle")
</div> 
```

在我的 _homeBundle.cshtml 文件中，我有以下内容：

```
@foreach (var item in ViewBag.products)
{ 
    @item
} 
```

我正在获取 ViewBag 数据，但我正在获取整个列表作为输出：

```
{ productName = Awesomenes Game, productExcerpt = <b>Awesome game dude!</b>, imageID = 13, imageURL = HotWallpapers.me - 008.jpg }{ productName = RPG Strategy Game, productExcerpt = <i>Test product excerpt</i>, imageID = 14, imageURL = HotWallpapers.me - 014.jpg } 
```

我认为我能做的是：

```
@foreach(var item in ViewBag.Products)
{
    @item.productName
} 
```

如您所见，在输出中，productName = Awesomenes Game。但是，当我尝试这样做时，我得到错误“对象”不包含“产品名称”的定义。

如何输出每个“字段”以便在我的循环中单独说明，以便我可以应用我的页面所需的正确 HTML 标记和样式？

我是否需要制作一个全新的 ViewModel 来执行此操作，然后创建一个此处引用的显示模板：[“对象”不包含“X”的定义](https://stackoverflow.com/questions/7652749/object-does-not-contain-a-definition-for-x)

或者我可以做我在这里尝试的事情吗？

*****更新*****

在我的控制器中，我现在有以下内容：

```
 var bundle = db.Bundle.Where(a => a.bundleInactiveDate > DateTime.Now);
        var products = from bundles in db.Bundle
                       join bProducts in db.BundleProducts on bundles.bundleId equals bProducts.bundleID
                       join product in db.Products on bProducts.productID equals product.productID
                       join images in db.Images on product.productID equals images.productID
                       where bundles.bundleInactiveDate > DateTime.Now
                       select new {
                           product.productName,
                           product.productExcerpt,
                           images.imageID,
                           images.imageURL
                       };
        var bundleContainer = new FullBundleModel();

        bundleContainer.bundleItems = bundle;

        return View(bundleContainer); 
```

我有一个模型，FullBundleModel

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace JustBundleIt.Models
{
    public class FullBundleModel
    {
        public IQueryable<Bundles> bundleItems { get; set; }
        public IQueryable<Images> imageItems { get; set; }
    }
} 
```

我的视图现在有

```
@model IEnumerable<JustBundleIt.Models.FullBundleModel>

@foreach (var item in Model) 
{
<div class="hp_bundle">

    <h3>@Html.Display(item.bundleName)</h3>
    </div>
} 
```

如果我从模型引用中删除 IEnumerable，则 foreach 会出错，即没有枚举器的公共定义。

在 @Html.Display(item.bundleName) 中，它错误地指出模型没有 bundleName 的定义。如果我尝试

```
@foreach(var item in Model.bundleItems) 
```

我收到一个错误，即模型中未定义 bundleItems。

那么我没有正确连接以使用组合模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:22:16.140

> 我是否需要制作一个全新的 ViewModel 来执行此操作，然后创建一个此处引用的显示模板...

[您链接的Darin 的回答](https://stackoverflow.com/a/7652765/453277)说明了一个重要概念：[匿名类型不适用于跨程序集边界使用，](https://stackoverflow.com/a/8448438/453277)并且对 Razor 不可用。我要补充一点，在其直接上下文之外公开匿名对象很少是一个好主意。

专门为视图消费创建视图模型几乎总是正确的方法。如果您呈现类似的数据，则可以跨视图重用视图模型。

不必创建显示模板，但如果您想重用显示逻辑，它会很有用。HTML 助手也可以填充提供可重用显示逻辑的类似功能。

说了这么多，将匿名类型传递给视图或读取匿名类型的成员并非不可能。A`RouteValueDictionary`可以采用匿名类型（甚至跨程序集）并读取其属性。反射使得无论可见性如何都可以读取成员。虽然这有其用途，但将数据传递给视图**并不是**其中之一。

更多阅读：

*   [我可以将匿名类型传递给我的 ASP.NET MVC 视图吗？](https://stackoverflow.com/questions/223713/can-i-pass-an-anonymous-type-to-my-asp-net-mvc-view?lq=1)
*   [Razor 中的动态匿名类型导致 RuntimeBinderException](https://stackoverflow.com/questions/5120317/dynamic-anonymous-type-in-razor-causes-runtimebinderexception/5670899#5670899)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:47:55.153

为什么不创建一个包含您需要的所有数据的新模型呢？

**示例一：**

```
public class ContainerModel
{
    public IQueryable<T> modelOne;
    public IQueryable<T> modelTwo;
} 
```

这将允许您访问 Razor 中的任一查询：

```
@model SomeNamespace.ContainerModel

@foreach (var item in Model.modelOne)
{
    //Do stuff
} 
```

我个人完全避免使用 ViewBag 并将我需要的所有内容存储在此类模型中，因为它不是动态的并且强制所有内容都被强类型化。我也相信这会给你一个明确定义的结构/意图。

只是为了清楚起见：

```
public ViewResult Index()
{
    var queryOne = from p in db.tableOne
                   select p;

    var queryTwo = from p in db.tableTwo
                   select p;

    var containerModel = new ContainerModel();
    containerModel.modelOne = queryOne;
    containerModel.modelTwo = queryTwo;

    return View(containerModel);
} 
```

**示例二：**

```
public class ContainerModel
{
    [DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}")] //Format: MM/dd/yyyy (Date)
    public Nullable<DateTime> startDate { get; set; }
    [DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}")] //Format: MM/dd/yyyy (Date)
    public Nullable<DateTime> endDate { get; set; }
    public SelectList dropdown { get; set; }
    public IQueryable<T> modelOne { get; set; }
    public IQueryable<T> modelTwo { get; set; }
} 
```

在这种情况下，您已经使用 2 个查询在模型中存储了 3 个其他项目。您可以使用 Html 助手在 Razor 中创建下拉列表：

```
@Html.DropDownList("dropdown", Model.dropdown) 
```

您可以使用 DisplayFor 助手来显示您的模型中定义的日期，并使用数据注释：

```
@Html.DisplayFor(a => a.startDate) 
```

这是 IMO 的优势，因为它允许您定义要在视图中使用的所有数据以及您计划如何在单个位置格式化该数据。你的控制器包含所有的业务逻辑，你的模型包含所有的数据/格式，你的视图只关心你页面的内容。

# css - 在固定定位中指定右边距

> ID：12469476
> 
> 赞同：10
> 
> 时间：2012-09-18T02:11:12.853
> 
> 标签：css, positioning, css-position

我不知道如何正确命名，但这是我的问题：

我有这个布局：

```
<html>
<body>
    <div id="content">this is my page</div>
    <div id="button">magic button</div>
</body>
</html> 
```

CSS：

```
#button {
  position: fixed;
  bottom: 20px;
  background-color: #f00;
  padding: 5px;
  left: 50%;
  margin-left: 250px;

}

html, body{
  height: 100%;
}
#content {
  margin: 0 auto;
  width: 700px;
  min-height: 100%;
  background-color: #eee;
}​ 
```

在这里看小提琴：http: [//jsfiddle.net/n6UPF/](http://jsfiddle.net/n6UPF/)

![图片](../Images/d20617d7e60bdd6ab1896beed241a7a8.png)

我的页面按我想要的方式工作，按钮正是我想要的位置。

**但是**，如果我更改按钮上的文本，它将不再正确定位。

我想将它相对于我的内容区域的右边缘“固定”。

这可以在纯 CSS 中完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T02:36:24.137

如果可以接受修改 HTML，则可以使用包装器：

```
<div id="button-wrapper">
    <div id="button">magic button</div>
</div> 
```

```
#button-wrapper {
    bottom: 40px;
    left: 50%;
    margin-left: 350px;
    position: fixed;
}

#button {
    background-color: red;
    padding: 5px;
    position: absolute;
    right: 10px;
    white-space: nowrap;
} 
```

[http://dabblet.com/gist/3740941](http://dabblet.com/gist/3740941)

不，它不是很漂亮，但是...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:27:11.873

你的意思是...

```
#button
{
    position: fixed;
    right: 20px;
} 
```

...或者你想要在右边的任何距离？或者是其他东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:25:16.547

我不确定我是否完全正确理解了你的问题，但你能不能只使用该`right`属性而不是`left`?

示例：http: [//jsfiddle.net/baKra/](http://jsfiddle.net/baKra/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T02:26:18.613

通常当我遇到精确定位问题时，这是因为我没有指定定位元素的宽度。浏览器会尝试自己计算它，这可能会导致事情失败。

当它不再正确定位时，有什么方法可以发布它的样子吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T02:29:00.833

我想知道您是否正在寻找 float:right 属性。你能看看[http://jsfiddle.net/n6UPF/1/](http://jsfiddle.net/n6UPF/1/)看看那是不是你要找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T02:39:12.153

尝试改变

```
#button {
position: fixed;
bottom: 20px;
background-color: #f00;
padding: 5px;
left: 50%;
margin-left: 250px;
} 
```

到

```
#button {
position: fixed;
bottom: 20px;
background-color: #f00;
padding: 5px;
right:20px
} 
```

# visual-studio-2012 - 调试前停止 vs2012 清理解决方案

> ID：12469477
> 
> 赞同：1
> 
> 时间：2012-09-18T02:11:11.500
> 
> 标签：visual-studio-2012

我需要项目的 bin/Debug 文件夹中的一些 dll 才能实际运行，但每次如果我不将这些 dll 作为项目中的引用包含在内，那么 Visual Studio 只会在我尝试调试时自动删除它们。我该如何阻止它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:03:29.087

您可以通过三种方式处理此问题。按优先顺序排列，它们是：

*   教 Visual Studio 如何正确构建您的调试版本，包括将这些文件复制到该文件夹​​中（自定义构建步骤可以做到这一点，或者您可以将它们添加到具有内容类型的项目中）
*   不要依赖 Visual Studio 为您构建和启动您的应用程序。浏览到 bin/Debug 文件夹，双击 exe，然后在 Visual Studio 中使用工具，附加到进程以附加到它并像往常一样调试
*   更改您的 Visual Studio 设置，使其在调试之前不会自动生成。（工具、选项、项目和解决方案、构建和运行、运行时下拉菜单。）每次进行更改时，您都必须记住构建（并可能复制文件）。

一般来说，只有“清理”或“重建”会删除内容，所以在开始调试之前，请确保您不会自己不小心这样做。“构建”和“重建”是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T18:21:23.847

我有同样的问题。我所拥有的是项目 A -> 项目 B -> 项目 C，并且项目 C 具有通过（构建操作“内容”始终复制本地）复制到项目 A 的 bin 调试的 DLL。（-> 表示参考）

但是，当开始调试时，这些将从项目 A 的 bin/debug 中删除。

**解决方案**

添加来自项目 A -> 项目 C 的引用

# c# - SelectedRows.Count 与 Rows.GetRowCount（DataGridViewElementStates.Selected）

> ID：12469484
> 
> 赞同：2
> 
> 时间：2012-09-18T02:12:05.590
> 
> 标签：c#, .net, winforms, datagridview

有什么区别或有什么区别：

```
myDgv.SelectedRows.Count 
```

对比

```
myDgv.Rows.GetRowCount(DataGridViewElementStates.Selected) 
```

在 DataGridView 的上下文中，Windows 窗体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:53:34.600

我认为在您在这里提到的特定情况下，除了处理 DataGridView 数据的顺序之外，这两个选项之间几乎没有区别。如果您要保存用于从中获取 Count 的中间对象，您可能会担心 SelectedRows 在进行引用时会向您呈现静态快照，但由于这两个选项都直接调用另一个方法这真的不是一个因素。

每当您对如何挖掘此类内容感到非常好奇时，您可以打开 ILDASM 并浏览您的 GAC 以查看调用的实际工作方式。

从某种程度上来说，使用 SelectedRows 和 Rows.GetCount() 之间的区别在于，我们要么获取过滤的集合并检查其大小，要么获取整个集合并将其过滤到我们然后检索其大小的子集。这几乎是由我们最初使用的 IL 向我们展示的内容所证明的。

```
.method public hidebysig static void  testDG() cil managed
{
  // Code size       34 (0x22)
  .maxstack  2
  .locals init ([0] class [System.Windows.Forms]System.Windows.Forms.DataGridView dgvTest,
           [1] int32 myNum,
           [2] int32 otherum)
  IL_0000:  nop
  IL_0001:  newobj     instance void [System.Windows.Forms]System.Windows.Forms.DataGridView::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  callvirt   instance class [System.Windows.Forms]System.Windows.Forms.DataGridViewSelectedRowCollection [System.Windows.Forms]System.Windows.Forms.DataGridView::get_SelectedRows()
  IL_000d:  callvirt   instance int32 [System.Windows.Forms]System.Windows.Forms.BaseCollection::get_Count()
  IL_0012:  stloc.1
  IL_0013:  ldloc.0
  IL_0014:  callvirt   instance class [System.Windows.Forms]System.Windows.Forms.DataGridViewRowCollection [System.Windows.Forms]System.Windows.Forms.DataGridView::get_Rows()
  IL_0019:  ldc.i4.s   32
  IL_001b:  callvirt   instance int32 [System.Windows.Forms]System.Windows.Forms.DataGridViewRowCollection::GetRowCount(valuetype [System.Windows.Forms]System.Windows.Forms.DataGridViewElementStates)
  IL_0020:  stloc.2
  IL_0021:  ret
} // end of method Program::testDG 
```

正如您可能怀疑的那样，尽管这种方式引出了这两个较低级别调用的作用的问题。

在这种情况下，DataGridView 上的 Rows 属性创建 DataGridViewsRowCollection 的一个实例并将其传回，因为它映射到 get_Rows。

```
.method public hidebysig specialname instance class System.Windows.Forms.DataGridViewRowCollection 
        get_Rows() cil managed
{
  // Code size       27 (0x1b)
  .maxstack  8
  IL_0000:  ldarg.0
  IL_0001:  ldfld      class System.Windows.Forms.DataGridViewRowCollection System.Windows.Forms.DataGridView::dataGridViewRows
  IL_0006:  brtrue.s   IL_0014
  IL_0008:  ldarg.0
  IL_0009:  ldarg.0
  IL_000a:  callvirt   instance class System.Windows.Forms.DataGridViewRowCollection System.Windows.Forms.DataGridView::CreateRowsInstance()
  IL_000f:  stfld      class System.Windows.Forms.DataGridViewRowCollection System.Windows.Forms.DataGridView::dataGridViewRows
  IL_0014:  ldarg.0
  IL_0015:  ldfld      class System.Windows.Forms.DataGridViewRowCollection System.Windows.Forms.DataGridView::dataGridViewRows
  IL_001a:  ret
} // end of method DataGridView::get_Rows 
```

当我们查看 DataGridView 上的 SelectedRows 属性时，我们发现它最初所做的不仅仅是返回一个集合，但在主 try 块中，我们再次看到我们的“get_Rows”调用 (IL_0045)。

```
.try
  {
    IL_0035:  br.s       IL_0056
    IL_0037:  ldloc.3
    IL_0038:  callvirt   instance object [mscorlib]System.Collections.IEnumerator::get_Current()
    IL_003d:  unbox.any  [mscorlib]System.Int32
    IL_0042:  stloc.1
    IL_0043:  ldloc.0
    IL_0044:  ldarg.0
    IL_0045:  call       instance class System.Windows.Forms.DataGridViewRowCollection System.Windows.Forms.DataGridView::get_Rows()
    IL_004a:  ldloc.1
    IL_004b:  callvirt   instance class System.Windows.Forms.DataGridViewRow System.Windows.Forms.DataGridViewRowCollection::get_Item(int32)
    IL_0050:  callvirt   instance int32 System.Windows.Forms.DataGridViewSelectedRowCollection::Add(class System.Windows.Forms.DataGridViewRow)
    IL_0055:  pop
    IL_0056:  ldloc.3
    IL_0057:  callvirt   instance bool [mscorlib]System.Collections.IEnumerator::MoveNext()
    IL_005c:  brtrue.s   IL_0037
    IL_005e:  leave.s    IL_0074
  }  // end .try 
```

这表明我们正在为我们的两个选择执行相同的检索和过滤操作，并且可以合理地预期执行它们的“成本”是相同的。

如果您注意到这些调用的性能问题，您可以运行一些测试以查看是否存在差异，但基于 IL，如果您发现两个调用之间有任何明显区别，我会感到惊讶

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T10:29:17.997

[Microsoft](http://msdn.microsoft.com/en-GB/library/ha5xt0d9%28v=vs.85%29.aspx)建议`SelectedCells`在较小程度`SelectedRows`上对于大型数据集效率低下，您应该使用`GetCellCount`/`GetRowCount`代替。

# html - 没有内容向下移动的水平滚动 Div

> ID：12469489
> 
> 赞同：2
> 
> 时间：2012-09-18T02:12:51.813
> 
> 标签：html, css

我需要创建一个固定高度和 100% 宽度的 div。div 的内容是一系列图像（只是`img`标签）。

当我将窗口的大小调整为小于图像的整体宽度时，列表中的最后一个图像会向下移动/向左流动，位于第一张图像的下方。

如何防止图像移动/流动到下一行并将它们全部放在一行上，以便用户被迫水平滚动 div 以查看其余图像？

这里以 jsfiddle 为例：http: [//jsfiddle.net/ZnWXj/2/](http://jsfiddle.net/ZnWXj/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:24:36.717

您需要使用[`white-space`](http://www.w3schools.com/cssref/pr_text_white-space.asp)CSS 属性`div`并为其`nowrap`赋值。

显示在[这个 jsFiddle](http://jsfiddle.net/ZnWXj/4/)中。（您的原件，加上我添加的`overflow-y`属性。）

使用的 CSS：

```
div {
    height: 120px;
    background: #666;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:36:01.317

我认为您正在尝试浮动左侧的所有图像。

在 css 中，对所有图像使用绝对位置，然后将所有图像浮动到左侧。

就像是

```
float:left;
position: absolute; 
```

在 img 标签上使用这些

**这是我的头顶还没有尝试过。很抱歉，如果我错了。**

# ruby-on-rails - 异步回调 - PubNub、EventMachine、Rails

> ID：12469491
> 
> 赞同：1
> 
> 时间：2012-09-18T02:13:08.317
> 
> 标签：ruby-on-rails, eventmachine, pubnub

我正在通过 EventMachine 订阅 PubNub 频道，但是我目前只收到一条且只有一条发布到该频道的消息。

```
EventMachine.run {
pubnub.subscribe({
'channel'  => @channel,
'callback' => lambda do |message|
puts(message)
end  
})
} 
```

换句话说，我正在寻找一种使回调“更加”异步的方法。我想我可以将它包装在一个periodic_timer 中，但我对这种方法有一种不好的感觉。我现在应该在这个领域有什么最佳实践吗？

**编辑：** 我的问题的解决方案是，首先，在订阅循环中添加'return true'，以便它继续收听。但更重要的是，在一个新线程中生成 EM，该线程侦听所需的任何通道，然后将其全部分派到客户端侦听的一个通道。这解决了我在没有服务器或客户端冻结/超时/溢出的情况下处理多个通道的问题。请参阅[http://www.pubnub.com/blog/ruby-push-api](http://www.pubnub.com/blog/ruby-push-api)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:15:50.167

一个全新的、完全重写的 PubNub 3.3 版 gem 将在 24 小时内发布。

我会在它发布时提醒您，如果您在使用这个新 gem 时遇到任何问题，我们将从那里进行故障排除。

杰里米

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:28:58.547

我忘了补充：

```
return true 
```

它现在继续听。几分钟后堆栈溢出，但这是另一个问题。

# sql - ant sql insert 语句在“--”字符串上失败。解决方法？

> ID：12469496
> 
> 赞同：4
> 
> 时间：2012-09-18T02:13:30.130
> 
> 标签：sql, oracle, jdbc, ant

**语境**

我们正在更改我们的安装脚本以使用 ant 的“sql”任务和 jdbc，而不是专有的 sql 客户端 sqlplus (oracle) 和 osql (msft)。

更新：添加了更多上下文。我们的“基础数据”（种子数据）由一组 .sql 文件组成，这些文件包含“供应商中立”（即在 oracle 和 mssql 中都可以使用）sql 语句。

**问题**

脚本运行良好，但有一个例外：

此 sql 在 Oracle 中失败。具体来说，某些东西（ant 或 jdbc 驱动程序）将破折号/连字符视为“注释的开头”——即使它们嵌入在字符串中。请注意，相同的 sql 可以与 ant/sql 和 microsoft 的 jdbc 驱动程序一起正常工作。

```
INSERT INTO email_client (email_client_id,generated_reply_text) VALUES(100002,'----- Original Message -----'); 
```

**相关错误**

这个[蚂蚁错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=27739)似乎可以识别问题。由于它仍然开放（8 年后），我不希望很快修复。但是，由于该问题仅出现在 oracle 中，因此可能出在驱动程序上。

oracle驱动：jdbc瘦驱动，版本10.2.0.1.0

**问题**

有没有人有在 mssql 和 oracle 中都可以使用的解决方法？（例如更改违规行以定义转义字符？我在“插入”sql92 语法上没有看到“转义”）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T19:33:11.963

查看“SQLExec”源并打开详细日志记录后，我找到了一种解决方法：

**解决方法**

*如果 sql 语句包含一个包含“--”的字符串，则将分隔符（分号）放在下一行。*

**这失败了**

```
INSERT INTO email_client (email_client_id,generated_reply_text) VALUES(100002,'----- Original Message -----'); 
```

**这成功了**

请注意，分号在单独的行上

```
INSERT INTO email_client (email_client_id,generated_reply_text) VALUES(100002,'----- Original Message -----')
; 
```

**细节**

打开详细日志记录，我看到当 Ant 遇到有问题的 sql 语句时，它实际上一次将三个 sql 语句传递给了 jdbc 驱动程序。违规语句、下一个语句（也包括嵌入的“--”）和后续语句（不包括嵌入的“--”）。

我快速浏览了 Ant 代码，没有发现任何明显的错误。由于我不打算修补 Ant，因此我寻找了一种解决方法。

调整它，我发现如果我只是将分隔符（分号）移动到嵌入“--”的语句的下一行，脚本就会成功执行。

感谢大家参与

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:25:46.210

你可以试试这个：

```
INSERT INTO email_client (email_client_id,generated_reply_text)
VALUES(100002,LPAD('-',5,'-') || ' Original Message ' || LPAD('-',5,'-')); 
```

# dynamics-crm-2011 - 如何在 Microsoft CRM 2011 中找到队列的 ID？

> ID：12469500
> 
> 赞同：1
> 
> 时间：2012-09-18T02:13:51.440
> 
> 标签：dynamics-crm-2011

我正在尝试以编程方式将任务添加到队列中。我找到了这个示例代码： http: [//msdn.microsoft.com/en-us/library/gg328106.aspx](http://msdn.microsoft.com/en-us/library/gg328106.aspx)，但它只是创建队列而不是使用现有的队列。有没有一种简单的方法可以找到队列的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:38:31.080

我想到了。我发现可以使用 Advanced Find 工具生成 FetchXML。使用它，我能够查询我的队列，然后获取 ID。

这是我最终使用的：

```
string fetchXml = @"<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>
                      <entity name='queue'>
                        <attribute name='name' />
                        <attribute name='emailaddress' />
                        <attribute name='queueid' />
                        <order attribute='name' descending='false' />
                        <filter type='and'>
                          <condition attribute='name' operator='eq' value='{0}' />
                        </filter>
                      </entity>
                    </fetch>";    

EntityCollection result = service.RetrieveMultiple(new FetchExpression(String.format(fetchXml, queueName)));
var myQueue = (Queue)result.Entities[0];
Console.WriteLine(myQueye.Id); 
```

# matlab - matlab中如何实现优先级队列

> ID：12469502
> 
> 赞同：4
> 
> 时间：2012-09-18T02:14:18.143
> 
> 标签：matlab

matlab中是否有提供最小优先队列功能的库

```
import java.util.PriorityQueue;
import java.util.*;

public class MyQueue {
  Comparator<Double> c;
  PriorityQueue<Double> PQ;

  public MyQueue() {
    c = new Comparator<Double>(){
            public int compare(Double o1, Double o2){
              if(o2 > o1) {
                return -1;
              } else if(o1 > o2) {
                return 1;
              } else {
                return 0;
              }
            }
        };
    PQ = new PriorityQueue<Double>(1000,c);
  }

  public void addElement(double d) {
    PQ.add(d);
  }

  public double removeElement() {
    return(PQ.remove());
  }
} 
```

我已经在 java 中实现了这个优先队列。我可以从matlab调用它。但是，我需要将每个成本与一个索引相关联。我的意思是这不仅是我需要存储的节点的成本，还有它的索引。我怎样才能做到这一点。我需要从 matlab 传递索引

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T04:27:32.033

您可以像这样使用 Java 的默认值`PriorityQueue`：

```
>> q=java.util.PriorityQueue;
>> q.add({value,index}); 
```

这从 Java ≥ 1.5 开始可用，自 7.0.4 (R14) 以来的所有 MATLAB 版本中都预先捆绑了该版本。

否则，您可以使用[文件交换](http://www.mathworks.com/matlabcentral/fileexchange/24238-priority-queue-mexc++)中的那个，您必须对其进行编译。

还有一个[Simulink](http://www.mathworks.nl/help/simevents/ref/priorityqueue.html)模块，但我怀疑这就是你所追求的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T21:37:45.490

下面是一个完全用 matlab 编写的优先级队列的大小调整数组实现。您可以附加/耦合您想要的任何类型的数据/索引以及优先级值。此外，您可以通过在创建时传递给构造函数的布尔参数来切换/切换最小和最大优先级队列之间的行为。

```
classdef PriorityQueue < handle

    properties (SetAccess = private)               
       numElements; 
       priorityList;
       valueList;
       flagMaxPriorityQueue;
    end

    methods (Access = public)       

        function obj = PriorityQueue( flagMaxPriorityQueue )

            if ~exist( 'flagMaxPriorityQueue', 'var' )
                flagMaxPriorityQueue = true;
            else
                if ~(isscalar(flagMaxPriorityQueue) && islogical(flagMaxPriorityQueue))
                    error( 'ERROR: invalid flagMaxPriorityQueue argument' );
                end
            end

            obj.flagMaxPriorityQueue = flagMaxPriorityQueue;
            obj.numElements = 0;
            obj.priorityList = {};
            obj.valueList = {};

        end

        function insert(obj, priority, value)     

            % increase the size of the array if full
            if obj.numElements > 0 && obj.numElements + 1 > numel( obj.priorityList )                                

                % double the size of the array and copy stuff
                obj.priorityList = cat(1, obj.priorityList, cell(obj.numElements, 1));
                obj.valueList = cat(1, obj.valueList, cell(obj.numElements, 1));

            end

            obj.numElements = obj.numElements + 1;

            obj.priorityList{ obj.numElements } = priority;
            obj.valueList{ obj.numElements } = value;

            obj.swim(obj.numElements);

        end

        function [priority, value] = pop( obj )

            if obj.isEmpty()
                error( 'called pop() on an empty priority queue' );
            end          

            priority = obj.priorityList{1};
            value = obj.valueList{1};

            obj.exch(1, obj.numElements);            
            obj.numElements = obj.numElements - 1;            
            obj.sink(1);

            obj.priorityList{ obj.numElements + 1 } = [];
            obj.valueList{ obj.numElements + 1 } = [];

            % halve the size of the arrays if they get one-quarter full
            if obj.numElements > 0 && obj.numElements == floor( numel( obj.priorityList ) / 4 )                

                obj.priorityList( 2 * obj.numElements + 1 : end ) = [];
                obj.valueList( 2 * obj.numElements + 1 : end ) = [];

            end

        end

        function [flagEmpty] = isEmpty( obj )        

            flagEmpty = (obj.numElements == 0);

        end

        function [qSize] = size( obj )

            qSize = obj.numElements;

        end

        function [priority, value] = peek( obj )

            if obj.isEmpty()
                error( 'requested max() of an empty priority queue' );
            end          

            priority = obj.priorityList{1};
            value = obj.valueList{1};

        end

    end    

    methods (Access = private)

        function swim(obj, elPos)

            while elPos > 1 && obj.compare(floor(elPos / 2), elPos)

                obj.exch(floor(elPos / 2), elPos);
                elPos = floor(elPos / 2);

            end

        end

        function sink(obj, elPos)

            while 2 * elPos <= obj.numElements

                j = 2 * elPos;

                if j < obj.numElements && obj.compare(j, j+1)
                    j = j + 1;
                end

                if ~obj.compare(elPos, j)
                    break;
                end

                obj.exch(elPos, j);
                elPos = j;

            end

        end

        function [blnCmpResult] = compare(obj, e1, e2)

            if obj.flagMaxPriorityQueue
                blnCmpResult = (obj.priorityList{e1} < obj.priorityList{e2});
            else
                blnCmpResult = (obj.priorityList{e1} > obj.priorityList{e2});
            end            

        end

        function exch(obj, e1, e2 )

            temp = obj.priorityList{e1};
            obj.priorityList{e1} = obj.priorityList{e2};
            obj.priorityList{e2} = temp;            

            temp = obj.valueList{e1};
            obj.valueList{e1} = obj.valueList{e2};
            obj.valueList{e2} = temp;            

        end

    end

end % classdef 
```

# ios - 自定义拨动开关设置包

> ID：12469505
> 
> 赞同：0
> 
> 时间：2012-09-18T02:14:33.960
> 
> 标签：ios, xcode

我已经扫描了有关 iOS 上设置包的文档，但我无法弄清楚如何自定义切换开关的值。而不是“ON”和“OFF”，我希望它成为图表类型选项的“LINE”和“BAR”。这可能吗？

任何见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:06:47.587

您不能更改界面生成器中提供的标准开关的“开/关”标签。如果您想保留库存零件，则可以使用分段控件模拟开关 - 只需使用 2 个分段。您必须自己构建切换逻辑，但它非常简单。

有一些 IOS 控件库提供 UISwitch 子类，允许您更改标题。我用过的做得很好的一个是 RCSwitch。你可以在这里找到它： [https ://github.com/robertchin/rcswitch](https://github.com/robertchin/rcswitch)

希望有帮助，一切都好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:09:18.113

这是不可能的，您在设置捆绑包的自定义方面非常有限。

# ruby - 如何对同一个对象执行多个方法？

> ID：12469506
> 
> 赞同：2
> 
> 时间：2012-09-18T02:14:34.747
> 
> 标签：ruby, design-patterns

当您需要对一个对象执行多种方法时，您更喜欢哪种解决方案？

代码应该不言自明：

```
class Foo
  def self.build
    foo = new
    foo.first
    foo.second
    foo
  end

  def first
  end

  def second
  end
end

class Bar
  def self.build
    new.first.second
  end

  def first
    self
  end

  def second
    self
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:23:40.783

我认为这取决于您希望调用这些方法的次数。他们会经常被召集在一起还是只在这里一次？如果只是一次，我会使用 2-line 方法，因为它不会不必要地传递`self`返回值。如果它经常发生，那么制作另一种方法来连续调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:37:26.887

这是一个权衡。答案取决于 (1) 重要性和 (2) 周围代码的复杂性。作为程序员，你是必须做出决定的人。管道形式更短，节省垂直空间。稀疏形式更容易调试。根据您选择方法关键字的方式，内联形式可能读起来像人类句子，但在其他情况下，稀疏形式可能更易于人类阅读。如果您的方法正在大量开发中，请使用稀疏的编写方式。对于稳定的代码，管道形式是可以的。对于不太重要的代码，例如测试，我喜欢使用管道形式。实际上，我非常喜欢它，甚至省略了点，所以我的[FizzBu](http://c2.com/cgi/wiki?FizzBuzzTest) ​​zz 程序看起来像这样，使用我的自定义库，该库允许密集的无点单字符方法双管管道：

```
(1..100).τᴍ⁒i⁇χ( 3, 0, "fizz", nil ).πᴍ⁒i⁇χ( 5, 0, "buzz", nil ).πγZᴍjτ 
```

所以请记住，一行管道什么都不是，像上面这样的程序是他们在 Ruby 中说“非常糟糕的风格”时的意思:)))

# ruby - Ruby on Rails 3 教程 gravatar_for 测试错误

> ID：12469507
> 
> 赞同：1
> 
> 时间：2012-09-18T02:14:37.953
> 
> 标签：ruby, ruby-on-rails-3, rspec, factory-bot, rspec-rails

所以我正在研究 Ruby on Rails 3 教程。我目前在第 7.1.3 节使用工厂测试用户显示页面。

该代码正在运行并提取正确的 gravatar 图像，但是在运行测试时我不断收到错误消息。

这是错误：

```
Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined method `downcase' for nil:NilClass 
```

以下是 show.html.erb 文件中的代码：

```
<% provide(:title, @user.name) %>
<h1>
  <%= gravatar_for @user %>
  <%= @user.name %> 
</h1>
<%= @user.name %>, <%= @user.email %> 
```

这是 users_helper.rb 文件中的代码：

```
module UsersHelper
  # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user)
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

这是 factory.rb 文件中的代码：

```
FactoryGirl.define do
  factory :user do
    name "Curtis Test"
    email "test@gmail.com"
    password "foobar"
    password_confirmation "foobar"
  end
end 
```

这是来自测试文件 user_pages_spec.rb 的代码

```
require 'spec_helper'

describe "User Pages" do
  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }

    before { visit user_path(user) }
    it { should have_selector('h1', text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }
    it { should have_selector('title', text: full_title('Sign Up')) }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:35:38.503

我发现了我的问题。它与 FactoryGirl 无关。问题出在我的用户模型（user.rb）中，导致问题的行是

```
 before_save { |user| user.email = user.email.downcase! } 
```

小写后的爆炸导致电子邮件地址在小写返回后被保存为 nil！是零。一旦我删除它并使线条看起来如下所示，它就可以正常工作。

```
 before_save { |user| user.email = user.email.downcase } 
```

我发现它的方法是在测试环境中加载rails控制台并尝试创建一个新用户。我注意到一切都很好，但电子邮件为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:47:36.597

一般来说，您可以通过参考[Rails 教程示例应用程序参考实现](https://github.com/railstutorial/sample_app_2nd_ed)来调试此类问题。

# c# - MonoMac 上的 NSObject.InvokeOnMainThread？

> ID：12469516
> 
> 赞同：3
> 
> 时间：2012-09-18T02:16:04.427
> 
> 标签：c#, cocoa, mono, monomac

MonoMac 中是否存在“MonoMac.Foundation.NSObject.InvokeOnMainThread”？在 MonoTouch 中确实如此。我需要这个来解决 MessageBox 线程问题....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:50:46.933

确实如此！[这](http://docs.go-mono.com/?link=M%3aMonoMac.Foundation.NSObject.InvokeOnMainThread%28MonoMac.ObjCRuntime.Selector%2cMonoMac.Foundation.NSObject%29)是它的 API 文档的链接。

# objective-c - 数据不在两个对象之间交换

> ID：12469517
> 
> 赞同：0
> 
> 时间：2012-09-18T02:16:16.057
> 
> 标签：objective-c, ios5

所以我有这个类包含一些值。在我的视图控制器中，我创建了一堆这些对象，当我单击它们时，我可以为它们设置数据。然后，当我移动它们并且对象相交时，我有一个方法可以在它们之间交换数据。现在，当我逐步完成时，一切似乎都正常。Self 甚至保存来自另一个对象的数据，但是当我再次单击该对象时，它会返回到其旧数据。有谁知道为什么会发生这种情况？

我通过一个弹出窗口将数据设置为每个对象，需要单击确定以将数据设置为该对象，所以我不明白如果我能清楚地看到它确实改变了它会从哪里获取这些数据当我走过

这是交换数据的方法：

这发生在我的 touchesEnded 方法上。

座位.h

```
#import <UIKit/UIKit.h>
#import "CustomUIScrollView.h"
#import "PopOverViewController.h"

@interface Seat : UIView

@property (nonatomic) CGRect rectangle;
@property (strong, nonatomic) CustomUIScrollView *sv;

@property (assign) int seatId;
@property (assign) int seatsSelfObjectIndex;

@property (strong,nonatomic) NSString *firstName;

@property (assign,nonatomic) CGColorRef selectedfillColor;

@property (nonatomic) int swapDataWithSeatInt;
@property (strong, nonatomic) Seat *swapDataWtihSeat;

@property (assign) CGPoint tempLoc;

@property (assign) BOOL didSeatIntersect;

@end

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[self superview]];
    self.center = location;
    for (int i = 0; i < seats.count; i++)
         {
             if (CGRectIntersectsRect(self.frame, [[seats objectAtIndex:i]frame]))
             {
                 if (i != seatsSelfObjectIndex)
                 {
                     swapDataWithSeatInt = i;
                     swapDataWtihSeat = [seats objectAtIndex:swapDataWithSeatInt];
                     didSeatIntersect = YES;
                 }
             }

         }
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    selectedfillColor = [UIColor clearColor].CGColor;
    [self setNeedsDisplay];

    if (!didSeatIntersect)
    {
        [self setCenter:tempLoc];

    }
    else 
    {

        NSString *tempFirstName = [[seats objectAtIndex:swapDataWithSeatInt]firstName];

        [[seats objectAtIndex:swapDataWithSeatInt ] setFirstName:self.firstName];

       [self setFirstName:tempFirstName];

    } 
} 
```

# java - 包含很多元素的 JSON 文件，如何使用 java 读取和打印？

> ID：12469518
> 
> 赞同：2
> 
> 时间：2012-09-18T02:16:17.367
> 
> 标签：java, json

我对 JSON 很陌生。我设法使用 Java 打印出 JSON 文件中的 1 个元素。但是，如果文件包含超过 1 个元素，我不知道如何检索它。我应该使用 JSONArray 吗？我试图搜索并应用 JSONArray，但我不知道如何去做。或者它与Gson，Jackson有关？我不知道他们是什么..

这是我的 example.json 文件：

```
{"rel": "/r/AtLocation", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "/e/ec1914bfb0606c36376fbbcd316e5666022e2469", "features": ["/c/en/apple_inc /r/AtLocation -", "/c/en/apple_inc - /c/en/unite_state", "- /r/AtLocation /c/en/unite_state"], "end": "/c/en/unite_state", "license": "/l/CC/By-SA", "uri": "/a/[/r/AtLocation/,/c/en/apple_inc/,/c/en/unite_state/]", "start": "/c/en/apple_inc", "context": "/ctx/all", "surfaceText": null}
{"rel": "/r/IsA", "weight": 0.5, "dataset": "/d/dbpedia/en", "sources": ["/s/dbpedia/3.7"], "id": "/e/914e6775fd79d660bacf22ec699568e6694da3e8", "features": ["/c/en/america_beautiful /r/IsA -", "/c/en/america_beautiful - /c/en/national_anthem", "- /r/IsA /c/en/national_anthem"], "end": "/c/en/national_anthem", "license": "/l/CC/By-SA", "uri": "/a/[/r/IsA/,/c/en/america_beautiful/,/c/en/national_anthem/]", "start": "/c/en/america_beautiful", "context": "/ctx/all", "surfaceText": null} 
```

**这是我的java文件：**

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Iterator;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class test
{
    public static void main(String[] args)
    {

        JSONParser parser = new JSONParser();

        try
        {

            Object obj = parser.parse(
                new FileReader("C:/Users/LijingYeo/Desktop/example.json"));

            JSONObject jsonObject = (JSONObject) obj;

            String rel = (String) jsonObject.get("rel");
            System.out.println(rel);

            String start = (String) jsonObject.get("start");
            System.out.println(start);

            String end = (String) jsonObject.get("end");
            System.out.println(end);

        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch (ParseException e)
        {
            e.printStackTrace();
        }

    }

} 
```

我衷心感谢您提供的所有建议和帮助，感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:48:51.707

我认为您应该逐行阅读您的 json 文件，然后解析为 json 对象。此示例代码适用于您的 json 文件。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class ReadJsonFile
{
    public static void main(String[] args)
    {        
        readJsonFile();
    }

    public static void readJsonFile() {

        BufferedReader br = null;
        JSONParser parser = new JSONParser();

        try {

            String sCurrentLine;

            br = new BufferedReader(new FileReader("D:\\example.json"));

            while ((sCurrentLine = br.readLine()) != null) {
                System.out.println("Record:\t" + sCurrentLine);

                Object obj;
                try {
                    obj = parser.parse(sCurrentLine);
                    JSONObject jsonObject = (JSONObject) obj;

                    String rel = (String) jsonObject.get("rel");
                    System.out.println(rel);

                    String start = (String) jsonObject.get("start");
                    System.out.println(start);

                    String end = (String) jsonObject.get("end");
                    System.out.println(end);

                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
} 
```

Json 文件是你的，如下所示。我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:25:25.273

无论你做什么都是对的。

您的 JSON 结构是 type `JSONObject`，即 (Key, Value) 对。在这些元素中，`features`元素的值是 type `JSONArray`。因此，在浏览元素时，您应该将元素的值转换为`features`然后`JSONArray`遍历该数组中的元素列表。

```
JSONArray features = (JSONArray) jsonObject.get("features");
int size = features.size();
for (int i = 0; i < size; i++)
{
    System.out.println(features.get(i));
} 
```

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T04:07:27.567

您可以使用[ObjectMapper](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/ObjectMapper.html)。

```
String jsonString = null;
if (prettyPrint == true) {
    // this is time consuming
    jsonString = myObjectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(myObject);
} else {
    // faster option
    jsonString = myObjectMapper.writeValueAsString(myObject);
} 
```

# mysql - MySQL，如何通过连接来更新字符串字段？

> ID：12469520
> 
> 赞同：3
> 
> 时间：2012-09-18T02:16:43.070
> 
> 标签：mysql

问题是如何通过连接来更新字符串字段？

这是创建数据库并添加一行的代码：

```
CREATE DATABASE  my_db;                                                          
USE my_db;

CREATE TABLE IF NOT EXISTS my_table(
     article_id INTEGER unsigned,
     revision_ids VARCHAR(10),
     PRIMARY KEY (article_id)
);

INSERT INTO my_table (article_id, revision_ids) VALUES (1, "154"); 
```

我需要编写将字符串连接到 revision_ids 字段的代码。例如，我需要将“, 999”连接到“154”，所以我会得到“154, 999”。我的代码版本不起作用：

```
UPDATE my_table SET revision_ids = CONCAT((SELECT revision_ids FROM my_table WHERE article_id = 1), ", ", "999") WHERE article_id = 1; 
```

怎么做？

有一个重要的条件。从理论上讲，这种连接可以执行多个脚本，因此重要的是，当我们更新时，没有人可以更改字段值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T02:19:25.233

这应该是您所需要的：

```
UPDATE my_table SET revision_ids = CONCAT(revision_ids, ", ", "999") WHERE article_id = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:18:49.977

我想你可以直接这样做，

```
UPDATE my_table 
SET revision_ids = CONCAT(revision_ids, ', ', '999') 
WHERE article_id = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T02:20:02.580

采用：

```
UPDATE my_table SET revision_ids = CONCAT(revision_ids, ", 999") WHERE article_id = 1; 
```

# nunit - 除了主站点之外，在哪里可以下载 Nunit 文档？

> ID：12469527
> 
> 赞同：0
> 
> 时间：2012-09-18T02:17:35.667
> 
> 标签：nunit

nunit.org 网站已经关闭了一段时间（几天）。有谁知道我可以从其他站点获取文档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:08:10.313

该文档包含在 nunit 下载中。Google for将为您提供[CNET](http://download.cnet.com/NUnit/3000-2218_4-10962248.html)`nunit download`上的下载链接。

# ssh - Amazon EC2 上的 SSH 身份验证失败 - RSEG1066 身份验证失败

> ID：12469529
> 
> 赞同：0
> 
> 时间：2012-09-18T02:17:54.437
> 
> 标签：ssh, amazon-ec2, rsa, pem, eclipse-rse

抱歉，但我是新手……我检查了其他问题，但没有任何效果，而且我对 SSH 不太满意。

按照步骤[在 Eclipse 中使用 SSH 连接到 EC2](http://christopherickes.com/web-app-development/ssh-to-amazon-aws-with-eclipse-remote-system-explorer-rse/)。像魅力一样工作。然后我终止了工作服务器并启动了一个新实例。

现在我无法连接和接收
`RSEG1066 "Failed to connect sshd on *server name*" Auth failed`

端口 22 也已打开 ->
`Port 22 (SSH) Source: 0.0.0.0/0`

我的 SSH 连接引用了新的主机名，并且我通过 rsa 应用了我的 .pem 文件。有什么想法吗？我还应该检查什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:44:56.047

似乎很多人在终止实例并启动新实例时都遇到[了 AWS 的这个问题。](https://forums.aws.amazon.com/thread.jspa?threadID=90451)这是我为解决问题所做的。

1.  终止实例
2.  从 AWS 控制台中删除的密钥对
3.  从客户端删除的密钥对
4.  启动了一个新实例
5.  出现提示时，为我的密钥对 (.pem) 文件使用不同的名称
6.  选择默认安全组
7.  为安全组添加了 SSH / 端口 22 入站访问
8.  已连接（使用用户 *ubuntu*，因为我使用的是 ubunutu 服务器）

如果像原始问题中的教程链接一样使用 Eclipse RSE，请务必在连接之前重新启动 Eclipse。

# ruby - 在 Mountain Lion (10.8) 上安装 Ruby 1.8.7

> ID：12469530
> 
> 赞同：17
> 
> 时间：2012-09-18T02:17:54.493
> 
> 标签：ruby, rvm, osx-mountain-lion

我在全新安装的 Mountain Lion 上安装 Ruby 1.8.7 时遇到了很多麻烦。我在 Stack Overflow 上环顾四周，没有看到任何专门解决这个问题的东西，希望有人以前可能遇到过这个问题。

**我正在使用可以通过 Xcode 下载的命令行工具**

我通过 RVM 和 HomeBrew 安装 Ruby 1.9.3 没有任何问题。当我尝试安装 1.8.7 时，我在尝试编译后收到以下消息：

我首先运行了命令

```
rvm install 1.8.7 
```

这给了我这个错误

```
The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`. 
```

挖了一点后，我尝试了

```
rvm install 1.8.7 --with-gcc=clang

Error running 'make ', please read /Users/paulzaich/.rvm/log/ruby-1.8.7-p370/make.log
There has been an error while running make. Halting the installation.
Ruby 'ruby-1.8.7-p370' was built using clang - but it's not (fully) supported, expect errors.
Please be aware that you just installed a ruby that requires        2 patches just to be compiled on up to date linux system.
This may have known and unaccounted for security vulnerabilities.
Please consider upgrading to Ruby 1.9.3-194 which will have all of the latest security patches. 
```

在这一点上，我进行了更多搜索，发现需要编译我自己的 readline。[RVM 不在 Snow Leopard 上安装 Ruby 1.9.2：'错误运行'make'](https://stackoverflow.com/questions/5671074/rvm-does-not-install-ruby-1-9-2-on-snow-leopard-error-running-make)

不幸的是，这似乎破坏了我的整个 rvm 安装，包括 1.9.3。我尝试重新安装 1.9.3 并得到与 1.8.7 相同的错误。此时我完全删除了 RVM 并重新安装。再次安装 1.9.3 没有问题。

[我还尝试根据Mountain Lion 发布的 RVM 问题](https://stackoverflow.com/questions/12117626/rvm-issue-with-mountain-lion)更新所有版本的 rvm 。那里也没有运气。

**更新：**我还尝试使用推荐安装 gcc-4.2 的 REE 1.8.7[演练](http://coderwall.com/p/fywjrw)。不幸的是没有运气。

**更新 2：**我参考 rvm 要求并安装了以下软件包

```
brew update
brew tap homebrew/dupes 
brew install autoconf automake apple-gcc42 
rvm pkg install openssl 
```

到现在为止还挺好。然后我引用[了这篇](https://stackoverflow.com/questions/6170813/why-cant-i-install-rails-on-lion-using-rvm)关于需要引用 GCC 编译器的帖子。我确定引用的链接可能不正确，因为我使用的是自制软件？我在我的地窖文件夹中找到了编译器并使用了以下命令

```
CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 rvm install 1.8.7 
```

没运气。与以前相同的错误消息。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-18T12:14:07.993

我刚刚想通了！请在 SO 上参考这个问题

[rvm 无法再在 Mac OS X Mountain Lion 上安装 1.8.7-p352](https://stackoverflow.com/questions/12363142/rvm-can-no-longer-install-1-8-7-p352-on-mac-os-x-mountain-lion?rq=1)

```
rvm reinstall 1.8.7 --without-tcl --without-tk 
```

或者，如果您有 Homebrew，请尝试此安装顺序。

```
brew install tcl-tk

rvm reinstall 1.8.7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T06:55:39.287

只是为了跟进[保罗的](https://stackoverflow.com/users/1296645/paul)帖子。我正在运行 OSX 10.8.2，安装了 1.9.3 没有问题，但 1.8.7-p370 也失败了。我对 gcc-4.2 进行了符号链接：

```
sudo ln -s /usr/local/bin/gcc-4.2 /usr/bin/gcc-4.2 
```

...成功运行：

```
brew install tcl 
```

...但是 tk[失败了](https://github.com/mxcl/homebrew/issues/15222)：

```
brewk install tk 
```

如果你在同一个地方，这个命令就可以了：

```
CC=/usr/local/bin/gcc-4.2 rvm reinstall 1.8.7 --without-tk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T11:01:32.597

最新的 Xcode 仅提供`clang`- 不是 GNU `gcc`，您需要安装`gcc-4.2`才能正确编译 Ruby 1.8.7，以下命令将显示可用选项：

```
rvm requirements 
```

目前只有 ruby​​ 1.9.3-p125 及更高版本对 的支持有限`clang`，但这是有限的支持，仍然可以发现错误。

# html - 知道是什么导致悬停时图像顶部的轻微移动吗？

> ID：12469533
> 
> 赞同：0
> 
> 时间：2012-09-18T02:18:18.110
> 
> 标签：html, css, css-transforms

我有以下 HTML：

```
<figure>
  <img src="http://lorempixel.com/200/200/" alt="">
  <figcaption>This is the caption</figcaption>
</figure> 
```

以及以下 CSS：

```
figure {
  background: #ddd;
  display: inline-block;
  height: 200px;
  margin: 50px;
  position: relative;
  width: 200px;
  vertical-align: top;
}
figure:hover img {
  box-shadow: 0 30px 20px -10px hsla(0,0%,0%,.25);
  transform: perspective(1000px) rotateX(45deg);
  transform-origin: 50% 0;
}
img {
  position: relative;
  transition: .2s;
  vertical-align: top;
  z-index: 10;
}
figcaption {
  bottom: 0;
  box-sizing: border-box;
  padding: 6px;
  position: absolute;
  text-align: center;
  width: 100%;
} 
```

这是一个活生生的例子：[http ://codepen.io/joshnh/pen/FlvJr](http://codepen.io/joshnh/pen/FlvJr)

尽管将 设置`transform-origin`为图像的顶部，但它在悬停时仍会略微向下移动。是什么原因造成的，我该如何预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:46:15.240

看看：http: [//jsfiddle.net/cQphE/](http://jsfiddle.net/cQphE/)

问题是您正在与`transform`属性一起转换`transform-origin`. 悬停时，它会从默认值`50% 50%`变为`50% 0;`您设置的值。

你有这个：

```
img {
  transition: 0.2s;
}

figure:hover img {
  box-shadow: 0 30px 20px -10px hsla(0,0%,0%,.25);
  transform: perspective(1000px) rotateX(45deg);
  transform-origin: 50% 0;
} 
```

这与拥有以下内容相同：

```
img {
  box-shadow: none;
  transform: perspective(0) rotateX(0);
  transform-origin: 50% 50%;
  transition: 0.2s;
}

figure:hover img {
  box-shadow: 0 30px 20px -10px hsla(0,0%,0%,.25);
  transform: perspective(1000px) rotateX(45deg);
  transform-origin: 50% 0;
} 
```

你应该拥有的是：

```
img {
  transform-origin: 50% 0;
  transition: 0.2s;
}

figure:hover img {
  box-shadow: 0 30px 20px -10px hsla(0,0%,0%,.25);
  transform: perspective(1000px) rotateX(45deg);
} 
```

# python - 计数查询集返回“列表”对象没有属性“id”

> ID：12469537
> 
> 赞同：0
> 
> 时间：2012-09-18T02:18:54.810
> 
> 标签：python, django, django-orm

我有一个带有多对多列的模型。我想限制用户可以提交的组数。

这就是我正在做的

```
 group_name = [g.id for g in form.cleaned_data['groups']]
        gr=group_name.id.count()
        if gr>3:
            raise forms.ValidationError("you can only add 3 groups")
        return group_name 
```

错误是：

```
 Exception Value: 'list' object has no attribute 'id' 
```

我似乎找不到我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:45:38.633

您正在创建一个`list`对象，因此标准`list`操作有效。

```
group_name_ids = [g.id for g in form.cleaned_data['groups']]
group_id_count = len(group_name_ids) 
```

似乎这`"groups"`是一个模型对象列表，因此您可以通过以下方式获得计数：

```
group_count = len(form.cleaned_data["groups"]) 
```

但是，由于您返回了生成的构建`group_name_ids`列表，因此您最好只得到`len()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:23:34.063

`group_name`是一个列表，`group_name.id`无法解析:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:50:26.153

```
>>> nk=['city1','city2','city1','city3','city1']
>>> from collections import Counter
>>> mycount=Counter()
>>> for word in nk:
...     mycount[word]+=1
...     
>>> mycount['city1']
3
>>> 
```

参考 python 文档[http://docs.python.org/library/collections.html](http://docs.python.org/library/collections.html)

# iphone - 继承 UIButton 以创建自定义外观按钮的任何一点？

> ID：12469540
> 
> 赞同：1
> 
> 时间：2012-09-18T02:19:27.357
> 
> 标签：iphone, ios, cocoa-touch

我想创建一组按钮，它们的工作和感觉非常像[Windows Phone 上可用的 Metro 风格磁贴](http://www.xda-developers.com/wp-content/uploads/2011/04/live-tiles.jpg?139d23)。我想允许用户点击它们来访问他们的底层功能（打开一个模式或其他东西或那种）。

1.  我担心子类化 UIButton 不会让我到达那里。我需要瓷砖本身内部的方角和动态内容。我在 SO 周围发现的帖子似乎表明[子类化 UIButton 不是一个好主意](https://stackoverflow.com/a/3679398/511882)，原因有几个，我应该改用 UIView。**该回复来自 2010**，我不知道在此后的 2 年多时间里，如何实现这一效果发生了相当大的变化。现在大多数用户都将拥有 iOS 5.1+，如果不是 6.0 的话。

2.  假设我确实走 UIView 路线。我应该实现 UIResponder 的触摸事件还是应该转而使用 UITapGestureRecognizer 路由？2012年更好的做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:27:29.993

I'd suggest subclassing from `UIControl` instead of `UIButton`. I've seen how those windows tiles look and work in some videos including flipping animations when content changes etc., and it would be easier to package that functionality into a `Tile` class or something similar than having to carry a modified UIButton everywhere, and doing it for every such instance you need to create.

The reason I'm suggesting to not subclass from `UIButton` is because it provides support for 1 image and 1 label. You seem to have multiple images and labels on all tiles, so you'll have to start managing your own subviews. Instead of working around the 1 label and image you get in a `UIButton`, it's cleaner to start from scratch with a `UIControl` and create your tiles.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:59:40.793

如果您只是希望拥有几乎像常规按钮一样的方形 Metro 风格按钮（按下它们会发生一些事情），那么您可以使用自定义按钮从标准 UIButton 类中获取所有功能，而无需子类化。

这是一个简单的例子，在代码中，但这也可以在 IB 中完成。假设您有一个名为：tile1.png

```
//set the image
UIImage *image = [UIImage imageNamed:@"tile1.jpg"];

//create the button
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

//add the image
[button setImage:image forState:UIControlStateNormal];

//define the action
[button addTarget:self action:@selector(buttonTouched:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果需要修改框架大小可以通过 button.frame 也可以修改一些其他的按钮属性。

您是否知道所有这些并且正在寻找其他东西或者这有帮助吗？好起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-31T11:13:18.900

A use case would be to use a custom-looking button within Storyboard / Interface Builder. Having a subclass allows you to directly use this custom-looking button from Interface Builder.

# database - 从具有多个条目的表中删除单行？

> ID：12469550
> 
> 赞同：-3
> 
> 时间：2012-09-18T02:21:07.050
> 
> 标签：database, phpmyadmin, rows

所以这是我的情况。

我的数据库中有一个表，它有多个条目，但我只需要删除一个。

当试图用谷歌搜索时，我能找到的只是关于删除除这些条目之一之外的所有条目的问题，而我只需要删除一个并保留其余条目。

我对此完全感到困惑，并且真的不明白该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:24:55.207

您需要使用 where 子句来标识要删除的行，最好是通过表的主键。例如：

```
delete from MyTable where id = 1 
```

如果您发布表的架构，我们可以提供更好的语法帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:25:02.137

您尝试删除的行应该有一个唯一的方式来识别它，通常是主键。然后，您将使用该`WHERE`子句来指定您的查询`DELETE`：

```
DELETE FROM sparkles WHERE primaryKey = 1 
```

或者，如果没有键，您将按与您希望删除的记录的所有值匹配的条件进行过滤。

```
DELETE FROM sparkles WHERE col1 = 5 AND col2 = 15 AND col3 = 51 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:26:22.817

如果您尝试在 Java 中实现这一点，您很可能会使用 JDBC，但是如果这只是一次性的工作，您可以使用适当的 where 子句直接运行删除查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:24:03.283

如果表中有 5 个字段，并且您只想删除特定实例的一个字段，那么您应该触发更新查询，使该字段具有空效果...

假设如果表是 Id | 姓名 | MobNum

并且您想删除记录 5 的 MobNum ...然后查询可以这样>>>

更新 tlbName 设置 MobNum=null 其中 Id='5'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T03:00:09.433

好吧，我不明白这是如何标记为 Java 的。但听起来你想使用限制运算符，如下所示：

```
DELETE FROM somedatabase WHERE someentry = 5 LIMIT 1; 
```

我上面的两个响应很好，但忽略了 LIMIT。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T03:13:31.813

一步一步在 phpMyAdmin 中进行操作......

1.  进入 phpMyAdmin 界面
2.  选择数据库
3.  选择表
4.  点击浏览
5.  查找您要删除的行并单击删除图标
6.  确认删除该行

完毕。

# javascript - 如何对使用构造函数创建的 javascript 对象方法执行添加

> ID：12469553
> 
> 赞同：0
> 
> 时间：2012-09-18T02:21:38.737
> 
> 标签：javascript, methods

在下面的代码中，我创建了一个构造函数。我想添加一个叫做**total** of two objects 的值（一个叫做**candy**，另一个叫做**computer**）。他们显然不会添加......他们连接。但是，当我执行乘法时，它会按预期相乘。我需要做什么才能对它们进行添加？

代码如下。对于我的示例，我使用乘法并评论了问题区域。

```
<!DOCTYPE html> 
<meta charset="UTF-8"> 
<title>checkoutTemplate</title>

<script>
function Item (item,price,tax,addedFee,total){
    this.item = item;
    this.price = price;
    this.tax = function () {
    if (typeof tax == 'undefined')
    {
        tax = price * .10;          
    } 
    else {
        tax = 0;
    }
    return tax;
    };

    this.addedFee = function () {
    if (typeof addedFee == 'undefined')
    {
        addedFee = price * .05;         
    } 
    else {
        addedFee = 0;
    }
    return addedFee;
    };

    this.total = function () {return this.price+ this.tax()+ this.addedFee()};

};

var computer = new Item("computer", 1000,"NA","NA");
var candy = new Item("candy", 0.50,"NA","NA");

document.write( "the total output value: " + candy.total() * computer.total() ); // Troubled area. I want to add candy.total and computer.total.Not multiply. 
```

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:25:14.293

用于`()`让 number plus 先执行：

```
"the total output value: " + (candy.total() + computer.total()) 
```

# bash - 管道输入到 shell 命令并保持创建的 shell 活动

> ID：12469554
> 
> 赞同：3
> 
> 时间：2012-09-18T02:21:54.813
> 
> 标签：bash, shell, piping

我的首要程序是一个 shell 脚本。这个 shell 脚本调用了一个 C 程序，我需要将输入传递给它，最终 C 程序将创建一个 shell。

但是，当我将输入通过管道传输到 shell 脚本中的 C 程序时

```
Do_Other_Stuff
./my_prog < file1 
```

我无法让贝壳保持活力。只是跑步，

```
Do_Other_Stuff
./my_prog 
```

有效，因为我必须自己输入标准输入，并且当 my_prog 退出时，shell 会正确生成。我很确定将 ./my_prog 调用包含在 C 程序中，并编译和运行它会起作用，但我很好奇是否有更清洁的 shell 方式。

我尝试了几种在不同情况下使用`cat file1 | ./my_prog`和使用的组合`&`，但都没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:44:37.447

尝试：

```
cat file1 - | ./myprog 
```

许多程序将“文件名”识别为`-`标准输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:00:40.627

您可以访问 C 程序源代码吗？我的猜测是 C 程序`istty(0)`用于确定标准输入是否来自终端。在这种情况下，它可能只创建一个交互式外壳。使用标准输入重定向，无论是来自文件还是管道，都意味着`istty(0)`返回 false。

# r - 如何在 R 中使用 grep 来获取指定的字符？

> ID：12469559
> 
> 赞同：1
> 
> 时间：2012-09-18T02:22:45.977
> 
> 标签：r, regex

我有

```
str=c("00005.profit", "00005.profit-in","00006.profit","00006.profit-in") 
```

我想得到

```
 "00005.profit"  "00006.profit" 
```

我怎样才能`grep`在 R 中实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T02:30:29.190

这是一种方法：

```
R> s <- c("00005.profit", "00005.profit-in","00006.profit","00006.profit-in")
> unique(gsub("([0-9]+.profit).*", "\\1", s))
[1] "00005.profit" "00006.profit"
R> 
```

我们将正则表达式定义为数字后跟`.profit`，我们通过将表达式保留在括号中来分配它。然后`\\1`回忆起第一个这样的任务——我们什么都不记得，这就是我们得到的。然后`unique()`将四个项目减少为两个唯一的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T04:03:47.933

Dirk 的答案几乎是理想的通用答案，但基于您的示例总是有一个`-`字符开始您希望切断的部分这一事实，这里有几个其他选项：

1：`gsub`退回之前的一切`-`

```
gsub("(.+)-.+","\\1",str) 
```

2：`strsplit`打开`-`并只保留第一部分。

```
sapply(strsplit(str,"-"),head,1) 
```

两者都返回：

```
[1] "00005.profit" "00005.profit" "00006.profit" "00006.profit" 
```

然后您可以将其包装起来`unique`以不返回重复项，例如：

```
unique(gsub("(.+)-.+","\\1",str))
unique(sapply(strsplit(str,"-"),head,1)) 
```

然后这些将返回：

```
[1] "00005.profit" "00006.profit" 
```

另一个不可通用的解决方案是只取前 12 个字符（假设您要保留的部分的字符串长度不会改变）：

```
unique(substr(str,1,12))
[1] "00005.profit" "00006.profit" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T12:30:06.190

我实际上对您的问题的解释不同。我想你*可能*想要

```
grep("[0-9]+\\.profit$",str,value=TRUE) 
```

也就是说，如果您只想要以 .*结尾*的字符串`profit`。特殊字符代表“`$`字符串结尾”，因此它不包括末尾有其他字符的情况......这`\\.`意味着“我真的想匹配一个点，而不是任何字符”（a`.`本身将匹配任何字符）。您并不完全清楚您的目标模式——您可能更喜欢`"0+[1-9]\\.profit$"`（任意数量的零后跟一个非零数字），甚至`"0{4}[1-9]\\.profit$"`（4 个零后跟一个非零数字）。

# html - HTML 布局，框架？

> ID：12469560
> 
> 赞同：1
> 
> 时间：2012-09-18T02:22:54.193
> 
> 标签：html, frames

我已经有一段时间没有开发一个网站了，所以我正在征求意见。

我正在使用 asp.net mvc 进行开发。

[http://www.freeimagehosting.net/t/2jr8r.jpg](http://www.freeimagehosting.net/t/2jr8r.jpg)

上面链接中的图像是网站的基本布局。它是一个门户类型的应用程序。蓝色部分包含用户详细信息，黑色部分包含单击时将显示在白色部分中的链接。在白色部分，我希望能够在需要时触发弹出窗口。

我的问题是分隔区域（黑色、蓝色、白色）的最佳方法是什么？过去我们会使用框架，现在接受的方式是什么？

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:27:47.230

目前大多数人使用`div`标签。你今天可以很容易地做出这种布局，[这里有一个小提琴可以玩](http://jsfiddle.net/aufrT/)。

**HTML**

```
<div id="page-wrap">
    <div id="header">
        header
    </div>
    <div id="content">
        <div id="sidebar">
            sidebar
        </div>
        <div id="main">
            main content
        </div>
    </div>
</div>​ 
```

**CSS**

```
#page-wrap {
    width: 960px;
}

#header {
    width: 100%;
    height: 100px;
    background: blue;
}

#content {
    overflow: hidden;
}

#sidebar {
    background: black;
    width: 200px;
    float: left;
    min-height: 400px;
}

#main {
    background: white;
    min-height: 400px;
    width: 760px;
    float: left;
} 
```

# ruby-on-rails-3 - RoR：我怎样才能在一列中只列出具有特定属性的微博？

> ID：12469562
> 
> 赞同：0
> 
> 时间：2012-09-18T02:22:54.180
> 
> 标签：ruby-on-rails-3

现在，我正在使用下面的代码列出所有用户的微博。

```
<div class="span8">

            <% if @user.microposts.any? %>
            <h3>Purchases I am interested in (<%= @user.microposts.count %>)</h3>
              <ol class="microposts">
                <%= render @microposts %>
              </ol>
              <%= will_paginate @microposts %>
            <% end %>
          </div> 
```

为 _micropost.html.erb 呈现的视图如下

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>
</li> 
```

所以这很好用，但是我正在改变它。每个微博都有一个 hidden_​​tag_field，它是一个称为 kind 的字符串（和数据库中的一列）。它可以是“购买”或“销售”。我想在一个地方列出所有购买微博，在另一个地方列出所有销售微博。我怎样才能改变微博视图来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:29:21.500

控制器：

```
@purchases = @microposts.where(:kind => 'purchase')
@sales = @microposts.where(:kind => 'sale') 
```

看法：

```
<h2>Purchases</h2>
<%= render @purchases %>

<h2>Sales</h2>
<%= render @sales %> 
```

# android - 在选择单选按钮时，可以在Android中禁用布局中的编辑文本

> ID：12469563
> 
> 赞同：-1
> 
> 时间：2012-09-18T02:22:55.047
> 
> 标签：android, android-edittext

我有 4 个编辑文本数字输入和 4 个单选按钮的垂直布局，以确定方程所需的解，并带有一个按钮来执行计算。

```
Edit Text input a  ,
Edit Text input b  ,
Edit text input c  ,
Edit Text input d  ,

Radio Button solve for a ,
Radio Button solve for b ,
Radio Button solve for c ,
Radio Button solve for d , 

Button Calculate 
```

如果选择求解 a，则不需要编辑文本 a，如果选择求解 b，则不需要编辑文本 b，对于 c 和 d 也是如此。

是否可以在选择单选按钮时禁用相应的编辑文本，或者我是否需要为每个选择提供单独的布局。一切正常，结果正确。我可以忽略主要活动中不需要的输入，但这似乎不是正确的答案。

我是一个初学者，我很惊讶我能走到这一步。任何人都可以请帮助。非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:25:51.560

尝试以下方式，

```
// radio button chkButton and EditText myEditText

if ( chkButton.isChecked() == true )
{
     myEditText.setEnabled ( false );
} 
```

# c - 将字符串数组复制到另一个字符串数组 - C

> ID：12469564
> 
> 赞同：0
> 
> 时间：2012-09-18T02:23:01.017
> 
> 标签：c, struct

我有一个包含字符串数组（char **args）的结构。我需要能够将字符串数组 (char *input[32]) 复制到结构的该元素中。例如：

```
Thing s;
s.args = input; //assuming input already has some strings in it 
```

当我尝试这样做时，下次调用 s.args = input 时，它会完全覆盖旧输入。如何以适当的方式实现此功能？

编辑

这就是结构的样子。

```
typedef struct{
char **args;
} Thing; 
```

然后在我的函数中，我声明：

```
char *args[512];
.....
args[count] = string //string is a char * 
```

最后，我想做：

```
s.args = input. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:27:20.993

你不是在复制它。您实际上只是在设置指针。实际上你有这个：

```
char **args;
char *other[32];
args = other; 
```

您需要实际复制数组 - 为此您需要为其分配内存：

```
s.args = malloc( 32 * sizeof(char*) );

for( i = 0; i < 32; i++ ) s.args[i] = input[i]; 
```

那是一个浅拷贝——它会复制你的字符串指针，但不会复制它们。如果更改 中的字符串内容`input`，该更改将反映在 中`s.args`。要复制字符串，您必须这样做：

```
for( i = 0; i < 32; i++ ) s.args[i] = strdup(input[i]); 
```

由于您已经分配了内存，因此在`s.args`再次覆盖之前（以及在程序完成时），您需要释放分配的内存。这包括字符串（如果您调用了`strdup`）；

```
if( s.args != NULL ) {
    // Only do the loop if you did a deep copy.
    for( i = 0; i < 32; i++ ) free(s.args[i]);

    // Free the array itself
    free(s.args);
} 
```

# jquery - Jquery Jcarousel 使用多个实例

> ID：12469573
> 
> 赞同：0
> 
> 时间：2012-09-18T02:23:47.433
> 
> 标签：jquery, jcarousel

好的，所以我在使用 Jquery Jcarousel 的页面上有两个实例，但这是障碍......

其中一个实例是“幻灯片”或“图片库”，所以我需要轮播一个一个地循环......

在页脚中，我有另一个实例，其中“事实”列表以一次 3 的循环速率循环。

我怎样才能解决这个问题，这样我基本上就可以吃蛋糕了？

我希望能够一个一个地循环播放幻灯片，并让“事实”列表一次循环 3 个项目。

我尝试将函数复制并重命名为“事实”之类的其他名称，但这不起作用。

这是我正在使用的插件： http: [//sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:32:31.067

它在他们的[文档](http://sorgalla.com/projects/jcarousel/examples/static_multiple.html)中：

```
jQuery(document).ready(function() {
    // Initialise the first and second carousel by class selector.
    // Note that they use both the same configuration options (none in this case).
    jQuery('.first-and-second-carousel').jcarousel();

    // If you want to use a caoursel with different configuration options,
    // you have to initialise it seperately.
    // We do it by an id selector here.
    jQuery('#third-carousel').jcarousel({
        vertical: true
    });
}); 
```

# objective-c - 如何在 MKPinAnnotationViews 中保存数据

> ID：12469576
> 
> 赞同：0
> 
> 时间：2012-09-18T02:24:10.203
> 
> 标签：objective-c, ios, mkannotationview

我有一个使用 UILongPressGesture 放置图钉的 mapView。注释有一个标注按钮，按下时会显示一个新视图。在这个视图中，有文本字段和 UIImage。我想要做的是保存用户输入的文本和图像，但我需要能够保存每个引脚的数据。有谁知道这样做的好方法？

# c++ - 与 Visual C++ 的严格标准合规性

> ID：12469577
> 
> 赞同：2
> 
> 时间：2012-09-18T02:24:13.473
> 
> 标签：c++, visual-c++, ansi, wdk

这个问题与以下任何一个都不相同：

*   [将 Visual C++ Studio/Express 设置为严格的 ANSI 模式](https://stackoverflow.com/questions/5353832/setting-visual-c-studio-express-to-strict-ansi-mode)
*   [使用 Microsoft 的 Visual C++ 编译器时，gcc 是否有与 -pedantic 等价的功能？](https://stackoverflow.com/questions/220298/is-there-an-equivalent-to-pedantic-for-gcc-when-using-microsofts-visual-c-co)

我正在运行 Windows 7 和 Visual Studio Express 2012，但我希望两者都不会影响这个问题的答案。

tl;dr 我将如何最恰当地抵消/防止/容忍 math.h 中以下摘录的影响，同时仍允许使用 Visual C++ 进行编译？

```
#if     !__STDC__

/* Non-ANSI names for compatibility */

#define DOMAIN      _DOMAIN
#define SING        _SING
#define OVERFLOW    _OVERFLOW
#define UNDERFLOW   _UNDERFLOW
#define TLOSS       _TLOSS
#define PLOSS       _PLOSS

#define matherr     _matherr 
```

背景：我正在编写一个业余爱好的基于文本的 C++ 项目，其总体目标远远超出了这个问题的范围。我正在使用 GNU Make（为了熟悉和可移植性）用 Cygwin g++ 和 cl.exe 编译它，并假设一个严格符合标准的环境......到目前为止。我开始认为 Windows 根本不允许这样的假设。

我有一个枚举，其成员包括`OVERFLOW`and `UNDERFLOW`。下面描述的问题可能会迫使我更改这些名称，但我更愿意保留它们，因为它们最适合我的目的，尽管有 Windows 头文件等外部影响。

GCC、Visual C++ 和 Mac OS X 的头文件（独立于 llvm-gcc）都默认在 math.h 中定义`OVERFLOW`和`UNDERFLOW`以及其他非标准宏。

*   GCC 有[一系列](http://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html)有据可查的方法来彻底阻止这些定义。
*   Mac OS X 有几个未记录的方法可以做到这一点，其中一个 ( `_POSIX_C_SOURCE`) 与 GCC 的文档一致。（我提到这一点是为了补偿 Apple 缺乏文档；我有这些标识符的历史。）
*   MSDN将 /u 命令行选项[记录](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.80).aspx)为一种（通过`__STDC__`宏）防止在 Visual C++ 中定义[一些](http://msdn.microsoft.com/en-us/library/c3h46dfd(v=vs.110).aspx) [非标准宏的方法。](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)如本问题开头所示，`__STDC__`宏*还*阻止定义`OVERFLOW`and `UNDERFLOW`。

在发现 /u 开关会阻止我关心的定义后，我将它添加到我的 makefile 中。但后来我从 crtdefs.h 的第 44 行收到了一个新错误：

```
error C1189: Only Win32 target supported! 
```

这是因为`_WIN32`不再定义。一点搜索表明 crtdefs.h 与 Windows 驱动程序开发工具包有关。我不是在开发驱动程序；我可以以某种方式不使用该标题吗？还是我只需要重命名我的枚举成员以容忍非标准的 Windows 行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:32:14.073

脑海中浮现出两种可能性。

首先是确保在包含 时反转特定效果`math.h`，例如：

```
#include <math.h>
#undef OVERFLOW
#undef UNDERFLOW 
```

现在，这也可能导致某些地方的代码出现问题，这些代码期望这些东西被正确定义。但是，即使在这种情况下，您也可以修改您的软件以使用不同的名称`math.h`：

```
#include <math.h>
#undef OVERFLOW
#undef UNDERFLOW
#define MATH_H_OVERFLOW  _OVERFLOW
#define MATH_H_UNDERFLOW _UNDERFLOW 
```

您只需要确保所有想要使用源代码（如库之类的已编译代码）都`math.h`使用*常量*`MATH_H_*`而不是枚举中的常量。

* * *

第二个是仔细考虑你在这个任务中付出的努力，而不是简单地将你的`enum`成员重命名为*不*冲突的东西所需要的努力。像使用`Overflow`枚举（而不是`OVERFLOW`）这样的东西将是我的第一次尝试，因为两者中的信息量仍然完全相同，并且它消除了直接的冲突。

是的，我知道找到一种不涉及这种情况的方法会*很好，但是您应该从事交付软件的业务，而不是花费过多的时间来解决与您的环境有关的小问题 :-)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:15:40.097

而不是使用`/u`具有[多种效果](http://msdn.microsoft.com/en-US/library/c3h46dfd.aspx)的编译器开关，只需使用`/D__STDC__=1`导致`__STDC__`宏被定义的，而不是别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:24:37.403

在 C++11 中，您可以使用作用域枚举：

```
enum class Flows { Underflow, Overflow }; 
```

您现在参考 Flows::Underflow 和 Flows::Overflow。

即使在 C++98 中，使用类进行模拟也是一种很好的做法：

```
class Flows
{
public:
    enum Value { Underflow, Overflow };
}; 
```

# javascript - Javascript/jQuery，if 和 else 语句都被执行

> ID：12469581
> 
> 赞同：5
> 
> 时间：2012-09-18T02:24:43.997
> 
> 标签：javascript, jquery

我不太确定这里发生了什么，并且觉得我可能遗漏了一些可能很明显的东西，但是我有一个 if else ，其中两个语句都被调用了。如果有人能对此有所了解，那就太好了。下面的代码使用 asual 并且应该检测是否 `$('#' + $.address.hash()`已经加载了 div。然而，if 和 else 事件都是按顺序触发的。实际上 else 语句触发了两次......

```
$('#lmit_back').show(400, function() {
    if($('#' + $.address.hash() ).length == 0) {
        $('#init').load('inithandler.php', { 'address' : $.address.hash() }, function() {
            $('#' + $.address.hash()).fadeIn(1000, function() {
                $('#remn').load('pagehandler.php',{ 'address' : $.address.hash() });
            });
        });
    }  
    else {
        alert('hey');
    }
}); 
```

这是所有代码..我无法真正弄清楚是什么导致它执行两次，除非它与我不熟悉的 address.change 有关。

if (($.address.hash() == '')) {$.address.hash('home');}

```
 $('#lmit_back').click(function() {

            $.address.hash('home');

    });

    $.address.change( function() {  

        if (!($.address.hash() == 'home')) 
        {

        var exception = '.' + $('[href="#' + $.address.hash() + '"]').parent().attr('class');

            $('#left_menu_bar li:not(' + exception + ')').hide(300,function() {

                $(exception).show( function() {

                    $('#left_menu_bar').animate({ width:'100%'},400, function() { 

                        $('#lmit_back').show(400, function() {

                                if ($('#' + $.address.hash() ).length === 0)
                                {

                                    $('#init').load('inithandler.php', { 'address' : $.address.hash() } , function() { 

                                        $('#' + $.address.hash()).fadeIn(1000, function() {

                                            $('#remn').load('pagehandler.php',{ 'address' : $.address.hash() });

                                        });

                                    });

                                }
                                else
                                {

                                alert('nigs');

                                }

                        });

                    });

                });

            });

        }
        else
        {

            $('#left_menu_bar').animate({ width:'251px'}, function() { 

                $('#left_menu_bar li').show( function() {

                    $('#lmit_back').hide();

                });

            });

            $('#left_menu_bar').css('width','251px');

        }

    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T04:02:28.953

这里的问题不是由您粘贴的代码引起的。代码可能多次运行并触及多个分支的唯一方法是它被执行多次。查看周围的代码中可以多次调用它的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T13:11:57.233

我遇到了类似的问题，在调试时如果条件为真，它也进入了 else 块。后来我在`if/else`块中添加了alert和console.log并实现了，else实际上并没有被执行，但是在调试时它看起来像是在else中。

因此，任何面临相同问题的人都可以通过添加`alert`or来验证`console.log`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T00:45:58.523

当我逐步调试时，我看到了相同的行为。结果是我附加了多个点击事件，所以代码被触发了 n 次。

# android - 从 Android 应用程序“意外结束流”将 jpeg 上传到 Google 云端硬盘

> ID：12469588
> 
> 赞同：1
> 
> 时间：2012-09-18T02:25:17.827
> 
> 标签：android, google-drive-api

我已经构建了一个 Android 应用程序，我在其中使用相机拍照，然后尝试将照片上传到我的 Google Drive 帐户。这是我正在使用的代码片段：

```
 HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();
    Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
    b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
        public void initialize(JsonHttpRequest request) throws IOException {
            DriveRequest driveRequest = (DriveRequest) request;
            driveRequest.setPrettyPrint(true);
            driveRequest.setKey(MY_CLIENT_ID);
            driveRequest.setOauthToken(token);
        }
    });

    final Drive drive = b.build();

    final com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
    body.setTitle(mCurrentPhotoPath.substring(mCurrentPhotoPath.lastIndexOf("/") + 1, mCurrentPhotoPath.length()));
    body.setDescription("A Test File");
    body.setMimeType("image/jpeg");

    java.io.File file = new java.io.File(mCurrentPhotoPath);

    final FileContent mediaContent = new FileContent("image/jpeg", file);
    //final InputStreamContent mediaContent = new InputStreamContent("image/jpeg", new FileInputStream(file));

    new Thread(new Runnable() {
        public void run() {
            try {
                com.google.api.services.drive.model.File file = drive.files().insert(body, mediaContent).execute();

                System.out.println("Title: " + file.getTitle());
                System.out.println("Description: " + file.getDescription());
                System.out.println("MIME type: " + file.getMimeType());
            }
            catch (GoogleJsonResponseException e) {
                GoogleJsonError error = e.getDetails();

                System.err.println("Error code:" + error.getCode());
                System.err.println("Error message: " + error.getMessage());

                // More error information can be retrieved with error.getErrors().
            }
            catch (HttpResponseException e) {
                // No Json body was returned by the API.
                System.err.println("HTTP Status code: " + e.getStatusCode());
                System.err.println("HTTP Reason: " + e.getMessage());
            }
            catch (IOException e) {
                // Other errors (e.g connection timeout, etc.).
                System.out.println("An error occurred: " + e);
            }
        }
    }).start(); 
```

发生的事情是我在 logcat 中遇到以下异常：

```
09-17 22:11:31.683: WARN/HttpTransport(11701): exception thrown while executing request
    java.io.IOException: unexpected end of stream
    at libcore.net.http.FixedLengthOutputStream.close(FixedLengthOutputStream.java:58)
    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:88)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:991)
    at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:279)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331)
    at com.xxxxxx.UploadImageService$2.run(UploadImageService.java:143)
    at java.lang.Thread.run(Thread.java:856) 
```

当我逐步浏览 Google Drive 和客户端代码以查看它在做什么时，它实际上似乎工作了两次。但现在又失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:53:35.917

我想我可能已经弄清楚了我的问题。我从驱动器 api 得到的错误很奇怪，但最终，我想我试图从相机捕获图像并将它们保存为只有一个时间戳，直到第二个。我在文件名中添加了毫秒，到目前为止我还没有再次看到异常。走着瞧。

# css - 使用 CSS 3 对图像及其文本进行动态样式设置

> ID：12469592
> 
> 赞同：0
> 
> 时间：2012-09-18T02:26:02.953
> 
> 标签：css

我有一个菜单栏的背景图像，如下所示

![菜单](../Images/8b0d36a93f6f6172d9aec1fbcb1a7029.png)

并且每个框上都显示了四个**常量**文本。最右边的盒子是空的地方。此图像是由所有这些静态的四个垂直条制成的。

现在的问题是这四个文本是如此动态，并且针对不同情况具有可变长度。由于长度可变，当文本无法容纳在框内时，它与那些垂直条重叠。使用样式或其他方式处理这种情况的最佳选择是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:30:47.280

### 案例 1：使用边框

您可以给链接 a`border-right`而不是依赖图像。

```
.nav li a {border-right: 2px solid #000;} 
```

### 案例 2：使用省略号

您可以`text-ellipsis`为这些链接提供一个并确保它们适合这些行：

```
.nav li a {max-width: 150px; text-ellipsis: ellipsis; overflow: hidden; display: inline-block;} /* Get this thing right */ 
```

# android - android音轨不会输出超过一定频率

> ID：12469597
> 
> 赞同：1
> 
> 时间：2012-09-18T02:26:15.637
> 
> 标签：android, signals, generator, audiotrack

我已经为 android 创建了一个应用程序，它创建和存储一个音调，然后使用 android 音轨类播放它。问题是：在我的手机上，我只能播放频率高达约 11kHz 的音调，而在我的 PC 上运行的虚拟手机（完全相同的代码）上，我可以获得高达约 14kHz 的频率。什么可能导致此中断？

使用市场上的音源应用程序，我的手机可以产生高达 20kHz 的信号，所以我知道这不是硬件问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:42:31.110

如果您提供一些有关如何生成音调的代码可能会有所帮助。

对于音频的东西，你应该去这里[http://music.columbia.edu/mailman/listinfo/andraudio](http://music.columbia.edu/mailman/listinfo/andraudio)并注册然后在那里问。该列表中有一个很棒的 Android 开发人员社区，他们都致力于音频开发。

此外，自我推销，我经营一个论坛网站（相对较新，需要更新），一旦我有足够的感兴趣的人，我计划在上面添加一个 Android 音频论坛。如果您有兴趣，请在[此处注册](http://forum.jakar.co/and-audio/)

# php - 通过 Paypal 的 API 取消定期付款

> ID：12469611
> 
> 赞同：2
> 
> 时间：2012-09-18T02:28:59.060
> 
> 标签：php, paypal, paypal-subscriptions

**我有这个代码：**

```
$cancel_payment = UpdateRecurringPaymentsProfile( $paypal_profileid , 'Cancel' );

function UpdateRecurringPaymentsProfile( $user_id, $method  )
{
    //$user_id is the profile ID returned in the CreateRecurringPaymentsProfile response.
    $nvpstr = "&profileid=".$user_id;
    $nvpstr .= "&PROFILESTATUS=".$method;
    $nvpstr .= "&ACTION=Cancel";
    $resArray = hash_call( "UpdateRecurringPaymentsProfile" , $nvpstr );
    return $resArray;
}

function hash_call($methodName,$nvpStr)
{
        //declaring of global variables
        global $API_Endpoint, $version, $API_UserName, $API_Password, $API_Signature;
        global $USE_PROXY, $PROXY_HOST, $PROXY_PORT;
        global $gv_ApiErrorURL;
        global $sBNCode;

        //setting the curl parameters.
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,$API_Endpoint);
        curl_setopt($ch, CURLOPT_VERBOSE, 1);

        //turning off the server and peer verification(TrustManager Concept).
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch, CURLOPT_POST, 1);

        //if USE_PROXY constant set to TRUE in Constants.php, then only proxy will be enabled.
       //Set proxy name to PROXY_HOST and port number to PROXY_PORT in constants.php 
        if($USE_PROXY)
            curl_setopt ($ch, CURLOPT_PROXY, $PROXY_HOST. ":" . $PROXY_PORT); 

        //NVPRequest for submitting to server
        $nvpreq="METHOD=" . urlencode($methodName) . "&VERSION=" . urlencode($version) . "&PWD=" . urlencode($API_Password) . "&USER=" . urlencode($API_UserName) . "&SIGNATURE=" . urlencode($API_Signature) . $nvpStr . "&BUTTONSOURCE=" . urlencode($sBNCode);

        // var_dump($nvpreq);
        //setting the nvpreq as POST FIELD to curl
        curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

        //getting response from server
        $response = curl_exec($ch);

        //convrting NVPResponse to an Associative Array
        $nvpResArray=deformatNVP($response);
        $nvpReqArray=deformatNVP($nvpreq);
        $_SESSION['nvpReqArray']=$nvpReqArray;

        if (curl_errno($ch)) 
        {
            // moving to display page to display curl errors
              $_SESSION['curl_error_no']=curl_errno($ch) ;
              $_SESSION['curl_error_msg']=curl_error($ch);

              //Execute the Error handling module to display errors. 
        } 
        else 
        {
             //closing the curl
            curl_close($ch);
        }

        return $nvpResArray;
    } 
```

**我只是向您展示我的代码的点点滴滴..**

此代码不返回任何错误。问题是当我在我的贝宝仪表板上检查我的“预先批准的付款”时（我正在使用沙箱），我没有看到状态为已取消，它仍然处于活动状态。简而言之，我的代码是错误的或有问题。

谁能指导我如何在贝宝中取消定期付款？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:14:42.427

要取消定期付款，您需要使用[ManageRecurringPaymentsProfileStatus](https://developer.paypal.com/docs/classic/api/merchant/ManageRecurringPaymentsProfileStatus_API_Operation_NVP/) API 操作并将操作设置为`Cancel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T12:15:52.690

这是我取消的 PayPal 定期付款代码。

```
 $ch = curl_init();
          $clientId ='Your Client ID';
          $clientSecret= 'Your Secret ID';
           //you get Clientid and clientSecret  
           https://developer.paypal.com/developer/applications

            curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.paypal.com/v1/oauth2/token");
            curl_setopt($ch, CURLOPT_HEADER, false);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
            curl_setopt($ch, CURLOPT_USERPWD, $clientId.":".$clientSecret);
            curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials");

            $result = curl_exec($ch);

            if(empty($result))die("Error: No response.");
            else
            {
                $json = json_decode($result);
            }
            curl_close($ch);

             $ch = curl_init();

            curl_setopt($ch, CURLOPT_URL, 'https://api.sandbox.paypal.com/v1/billing/subscriptions/'.$value1->transaction_id.'/cancel');
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, "{\n  \"reason\": \"Not satisfied with the service\"\n}");
            curl_setopt($ch, CURLOPT_POST, 1);

            $headers = array();
            $headers[] = 'Content-Type: application/json';
            $headers[] = 'Authorization: Bearer '.$json->access_token.'';
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

            $result = curl_exec($ch);
            if (curl_errno($ch)) {
                echo 'Error:' . curl_error($ch);
            }
            curl_close ($ch);
            $workerpayment=  DB::table('subscriptions')->where('id','=',$value1->id)->update(['subscription_status' => 'cancelled']);
        } 
```

它对我来说很好。

# javascript - 如何在没有浏览器的情况下测试 Rails javascript 和 ajax

> ID：12469613
> 
> 赞同：0
> 
> 时间：2012-09-18T02:29:01.987
> 
> 标签：javascript, ruby-on-rails, ajax, testing, capybara

当我使用 RSpec 和 Capybara 来测试我的 rails javascript 页面时，我收到以下错误：

> Selenium::WebDriver::Error::WebDriverError: 找不到 Firefox 二进制文件 (os=linux)。

其实我的rails脚本都是在linux服务器上写的，安装了浏览器，服务器不支持桌面软件（因为没有安装X11）。在这种情况下如何测试javascript。或者有没有像 wget 这样没有安装 X11 的浏览器？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:59:17.807

What you want is the [capybara-webkit](https://github.com/thoughtbot/capybara-webkit) gem, which will allow you to run your browser tests in "headless" mode, i.e. without an actual browser being open. You'll need to install QT (a cross-platform development toolkit) to get it to work, because it uses the [QT webkit](http://doc.qt.nokia.com/4.7/qtwebkit.html). See the [documentation](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit) for details on installing on different OSs.

I use this setup for my js-dependent tests and it works like a charm.

# dojo - dojo 拆分器无法使用动态内容正确调整大小

> ID：12469614
> 
> 赞同：1
> 
> 时间：2012-09-18T02:29:12.313
> 
> 标签：dojo, splitter

我正在创建一个看似简单的 dojo 1.8 网页，其中包含一个应用程序布局 div，其中包含一个选项卡容器和一个位于选项卡容器下方的警报面板。它们由拆分器分隔，因此用户可以选择他们想要查看多少警报或选项卡容器。

这是 jsfiddle 上的示例：

[http://jsfiddle.net/bfW7u/](http://jsfiddle.net/bfW7u/)

出于演示的目的，有一个计时器，它每 2 秒将警报面板中的表格增加一个条目。

问题：

1.  如果一个人什么都不做，只是让表格增长，则警报面板中不会出现滚动条。

2.  如果在没有先调整浏览器窗口大小的情况下移动拆分器，拆分器句柄最终会出现在一个奇怪的位置。

3.  调整浏览器窗口的大小使其表现得像我期望的那样。

问题：

1.  我在设置的方式上做错了什么，这导致了这个问题吗？

2.  如何捕获拆分器已移动事件（名称？）

3.  如何将拆分器窗格调整为任意高度？我试过使用 domStyle.set("alarmPanel", "height", 300) 并且这确实设置了 height 属性......但是窗格没有调整大小！

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T07:07:49.473

我分叉了你的 jsFiddle 并对它进行了一些修改：http: [//jsfiddle.net/phusick/f7qL6/](http://jsfiddle.net/phusick/f7qL6/)

1.  摆脱`overflow: hidden`in`html, body`并明确设置高度`alarmPanel`：

    ```
    .claro .demoLayout .edgePanel {
        height: 150px;
    } 
    ```

2.  这个棘手的。您有两个选择：收听拆分器的*拖放*操作或收听`ContentPane.resize`方法调用。两者都通过[`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect)：

    ```
    // Drag and Drop
    var splitter = registry.byId("appLayout").getSplitter("bottom");
    var moveHandle = null;

    aspect.after(splitter, "_startDrag", function() {
        moveHandle = aspect.after(splitter.domNode, "onmousemove", function() {
            var coords = {
                x: !splitter.horizontal ? splitter.domNode.style.left : 0,
                y: splitter.horizontal ? splitter.domNode.style.top : 0
            }
            dom.byId("dndOutput").textContent = JSON.stringify(coords);
        })
    });  

    aspect.after(splitter, "_stopDrag", function() {
        moveHandle && moveHandle.remove();
    });

    // ContentPane.resize()   
    aspect.after(registry.byId("alarmPanel"), "resize", function(duno, size) {
        dom.byId("resizeOutput").textContent = JSON.stringify(size);
    }); 
    ```

3.  `layout()`改变大小后调用方法：

    ```
    registry.byId("alarmPanel").domNode.style.height = "200px";                
    registry.byId("appLayout").layout(); 
    ```

# msbuild - 如何让 MSBuild 在构建后任务中打印命令输出？

> ID：12469617
> 
> 赞同：0
> 
> 时间：2012-09-18T02:29:32.390
> 
> 标签：msbuild, visual-studio-2005

我有一个 Visual Studio 2005 解决方案/vcproj，它有一个运行单元测试的构建后任务。我想使用 msbuild.exe 构建它。

但是，当测试失败时，我看不到任何输出记录到控制台（我已经验证在命令行执行时记录了输出。）如果我使用 /v:detailed 参数，我可以看到输出。有一个更好的方法吗？理想情况下，我只想在测试失败时查看输出。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:29:40.090

要回答我自己的问题，我发现最好的方法是调用 msbuild 并将参数传递给 vcbuild：

```
msbuild ... /p:VCBuildAdditionalOptions="/M /logfile:logfile.log" || type logfile.log 
```

因此，如果构建失败，记录的错误将在构建结束时输出，这对我来说已经足够了。

# xml - 什么是 XML Schema 元数据？

> ID：12469619
> 
> 赞同：0
> 
> 时间：2012-09-18T02:30:06.213
> 
> 标签：xml, xsd, schema, metadata

我目前正在处理这项任务，但我不明白“元数据”是什么意思

我的 XML Schema 中的一个元素必须是：

上次更新条目的时间：日期和时间（元数据）

我知道用于日期和时间的类型可能类似于

xsi:dateTime 但我不知道元数据是什么意思。

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:18:21.780

不同社区以两种不同的含义使用“元数据”一词。

在数据库社区中，元数据通常意味着类型或模式信息；“元数据”实际上是“模式”的同义词。

在文档社区中，元数据通常是指与文档相关但不属于文档内容的信息，例如文档的出处或其访问控制规则。

撰写此评论的人使用了第二种含义：某些信息的最后更新日期和时间是不属于主要内容的实例级信息。

# javascript - 加密 javascript 解密 rails

> ID：12469620
> 
> 赞同：0
> 
> 时间：2012-09-18T02:30:10.957
> 
> 标签：javascript, ruby-on-rails, ruby

我需要任何可用宝石的算法来完成以下任务。

在javascript中加密字符串。在 ruby​​/rails 中解密相同的内容。

我知道 javascript 中的加密是非常不推荐的，尽管我会很感激一些想法。

# android - 为自定义listView膨胀xml时出现java空指针错误

> ID：12469621
> 
> 赞同：0
> 
> 时间：2012-09-18T02:30:11.987
> 
> 标签：android, nullpointerexception, inflate

创建自定义 listView 时，我在扩展我的 xml 时收到空指针错误。我知道这可能是非常简单的事情，我只是忽略了它，但我无法弄清楚。

我在 if 语句后的第一行得到错误： convertView = inflater.inflate();

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Deck Deck = this.getItem(position);

        TextView title;
        Button study;
        Button edit;
        Button add;
        Button delete;
        //if theres no view yet created on the screen, create one
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.flash_card_row, null);

            //give the views their respective ID's
            title = (TextView)convertView.findViewById(R.id.flash_card_title);
            study = (Button)convertView.findViewById(R.id.flash_card_study);
            edit = (Button)convertView.findViewById(R.id.flash_card_edit);
            add = (Button)convertView.findViewById(R.id.flash_card_add_to_deck);
            delete = (Button)convertView.findViewById(R.id.flash_card_delete_from_deck);

            convertView.setTag(new flashCardViewHolder(title, study, edit, add, delete));
        }
        //this gets called when the user scrolls down or up the screen and the adapter
        //wants to maximize efficiency by just calling the viewHolder instead of findViewById
        else {
            flashCardViewHolder viewHolder = (flashCardViewHolder)convertView.getTag();
            title = viewHolder.getTitle();
            study = viewHolder.getStudy();
            edit = viewHolder.getEdit();
            add = viewHolder.getAdd();
            delete = viewHolder.getDelete();
        }

        //working on it, currently null
        //title.setText(Statics.listOfDecks.get(position).getTitle());

        //down here is where you set the values for all your views/objects
        //such as Buttons or textViews.
        study.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            }
        });
        edit.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            }
        });
        add.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            }
        });
        delete.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
            }
        });
        return convertView;
    }

} 
```

这是我正在膨胀的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/flash_card_study"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            />

        <Button
            android:id="@+id/flash_card_edit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/flash_card_study"
            />

        <Button
            android:id="@+id/flash_card_add_to_deck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/flash_card_edit"
            />

        <Button
            android:id="@+id/flash_card_delete_from_deck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/flash_card_add_to_deck"
             />

        <TextView
            android:id="@+id/flash_card_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/flash_card_delete_from_deck"
            android:layout_alignBottom="@+id/flash_card_delete_from_deck"
            android:layout_alignParentLeft="true"
             />

    </RelativeLayout> 
```

编辑：logcat 报告

```
09-17 21:25:18.709: E/AndroidRuntime(1584): FATAL EXCEPTION: main
09-17 21:25:18.709: E/AndroidRuntime(1584): java.lang.NullPointerException
09-17 21:25:18.709: E/AndroidRuntime(1584):     at com.example.studyOptions.FlashCardListViewAdapter.getView(FlashCardListViewAdapter.java:115)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.ListView.makeAndAddView(ListView.java:1769)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.ListView.fillDown(ListView.java:672)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.ListView.fillFromTop(ListView.java:733)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.ListView.layoutChildren(ListView.java:1622)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.AbsListView.onLayout(AbsListView.java:2102)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.View.layout(View.java:13754)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.View.layout(View.java:13754)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.View.layout(View.java:13754)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.View.layout(View.java:13754)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.View.layout(View.java:13754)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewGroup.layout(ViewGroup.java:4362)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.Choreographer.doFrame(Choreographer.java:525)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.os.Handler.handleCallback(Handler.java:615)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.os.Looper.loop(Looper.java:137)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at java.lang.reflect.Method.invoke(Method.java:511)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-17 21:25:18.709: E/AndroidRuntime(1584):     at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - javascript 警告框打开时服务器上发生了什么

> ID：12469624
> 
> 赞同：1
> 
> 时间：2012-09-18T02:31:27.007
> 
> 标签：javascript, html, webserver

我最近被告知一个脚本已经运行了 5 天。有人建议它可能是 3 个可能的脚本之一。其中一个具有类似于以下结构的代码：

**编辑**我在所谓的开始前几天（仅）修改了警报消息。

```
<body>

<script type="text/javascript">
    alert('Some message');
</script>

<div id="container">
.... 
```

目的是在基础页面加载之前让警报可见。

这个等待在某人的浏览器中按下 OK 的警报是否会导致程序运行数天？

（我确实质疑脚本时间限制，但被驳回了。）我只是想了解提供页面的过程。感谢您的关注和回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:36:33.573

需要明确的是，`alert()`是客户端脚本。服务器完成页面的处理并将其发送给客户端。在您的情况下，客户端就是那个，它现在正在运行，而不是服务器被挂起。

考虑这个小的 PHP Snippet：

```
<?php
    echo "Script Started!<br />\n"
    sleep(10);
    echo "Script Ended!<br />\n";
?> 
```

该页面仅在服务器处理后才会加载`10 seconds`，并发送完全处理的代码。因此，无论如何，javascript`alert`或客户端脚本不会停止服务器执行。

希望很清楚。

# redirect - 将 CNAME 与共享的 Windows Azure 网站一起使用

> ID：12469626
> 
> 赞同：5
> 
> 时间：2012-09-18T02:31:37.477
> 
> 标签：redirect, azure, dns, cname, azure-web-app-service

我一直在按照 Azure 站点上的说明添加 CNAME 以指向我的 Azure 网站。我在让它工作时遇到了一些问题，并且在某些帖子中似乎存在一些相互矛盾的信息。

我的网站在“共享”模式下运行，根据 Azure 说明，它支持自定义域，实际上它似乎允许我管理域。但是有些帖子似乎表明我必须在保留模式下运行。谁能证实这一点？

此外，有些帖子似乎表明我需要在 Azure 管理门户中添加 CNAME，但我找不到它在哪里。任何帮助表示赞赏？

我不太了解 A 记录和 CNAME。我的 DNS 提供商允许我同时添加两者。我需要改变两者吗？目前，我的 A 记录将“根”指向 Azure 给我的 IP 地址，CNAME 将 www.mydomain 指向 Azure 网站主机 mysite.azurewebsites.net。我已经离开他们一段时间进行繁殖，但似乎没有任何事情发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T02:52:15.703

`FREE`, `SHARED`,`RESERVED`网站类别的概念是最近才出现的；微软仅在 2 天前推出了它。之前它曾经是`FREE`or `RESERVED`。您只能为保留实例附加自定义域名。

借助低成本共享选项的新功能，您可以附加自定义域，但它仍将位于 Azure 网站的共享池中。**每月大约 9.36 美元**。

帖子中出现矛盾信息的原因是由于新功能。**简而言之，您可以使用 SHARED 和 RESERVED 来附加自定义域**。如果您愿意为共享池服务您的网站，则使用共享它会便宜一些。

只需转到`SCALE`表并使您的网站实例`SHARED`从默认免费，然后转到配置表以放置您的 CNAME

![屏幕截图 - 共享站点的自定义域名](../Images/e02acc64262e2f84639cfdefff707728.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T11:18:10.510

不同的域或托管服务提供商对 DNS 管理的处理方式不同，可以在三个地方执行这些更改（可能更多）

1.  面板
2.  域管理面板
3.  WHM面板

如果您只使用了一个域，您的域提供商很可能会向您发送一个 url，其中将有“管理 dns”选项。

如果您的网站已经托管，那么您可能必须在 cpanel 或 whm 中进行。所以最好致电您的域名托管服务提供商了解具体步骤。它节省了很多时间

# wpf - 支持在 WPF 中拖动多个项目的多选树视图

> ID：12469628
> 
> 赞同：0
> 
> 时间：2012-09-18T02:32:05.870
> 
> 标签：wpf, treeview, wpf-controls, multi-select

我花了几个小时寻找可能的解决方案，但找不到任何解决方案。希望有人可以帮助我。

我设法使用以下答案实现了 Multi Select WPF TreeView：[https ://stackoverflow.com/a/6681993/1679059](https://stackoverflow.com/a/6681993/1679059)

它工作得很好，但我希望能够将选定的项目拖放到 DataGrid 中。在`PreviewMouseMove`事件处理程序中，以前选择的项目被取消选择，所以我无法阻止这种情况的发生。

我试图阻止在`PreviewMouseLeftButtonDown`事件处理程序中取消选择项目，但那时我不知道用户是否打算选择一个项目或拖动选定的项目。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-18T19:33:35.060

您可以通过添加一个布尔变量来做到这一点，让在 MouseLeftButton 事件中说“isLeftClick”将 isLeftClick 更改为“TRUE”，并在 MouseMove 事件中检查 isLeftClick 是 true 还是 false 如果它是 true 则用户 thn 用户正在尝试拖动。还要检查鼠标是否指向选定的节点之一，然后拖动这些节点，如果它在某个未选定的节点上，然后选择该节点并拖动它。

# android - 您可以在 google play 市场中为 android 应用程序收取的最便宜的价格是多少

> ID：12469629
> 
> 赞同：-1
> 
> 时间：2012-09-18T02:32:06.747
> 
> 标签：android, apk, google-play

您可以在 google play 市场上为 android 应用收取的最便宜的价格是多少

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:40:16.083

0.99 美元是最低价格。对于非美国市场，可能存在每个国家/地区的限制；我没有全部测试。

价格是 Google Play 上的免费输入字段，但有一个验证器不允许您指定低于 0.99 的价格。

# c++ - 对已定义方法的未定义引用，标头中的声明和源匹配

> ID：12469630
> 
> 赞同：0
> 
> 时间：2012-09-18T02:32:09.957
> 
> 标签：c++, function, undefined

我在这样的类的公共区域中声明了以下方法：

在头文件中：

```
class EntityManager
{
    public:
        ...
        template <typename ComponentType>
        bool addComponentToEntity(const Entity in_Entity, const shared_ptr<ComponentType> in_ComponentInstance);
        ...
} 
```

在源文件中：

```
template <typename ComponentType>
bool EntityManager::addComponentToEntity(const Entity in_Entity, const shared_ptr<ComponentType> in_ComponentInstance)
{
    ...
} 
```

然后我尝试像这样使用它：

```
Entity l_Entity = 1;
shared_ptr<TestComponent> l_TestComponent(new TestComponent());
EntityManager* l_EntityManager = new EntityManager();

l_EntityManager->addComponentToEntity<TestComponent>(l_Entity, l_TestComponent); 
```

这导致编译器抱怨：

```
undefined reference to `bool EntityManager::addComponentToEntity<TestComponent>(unsigned long, boost::shared_ptr<TestComponent>)'| 
```

我知道这可能是因为我在 C++ 编程方面不是很有经验，但我看不出函数未定义的原因。我省略了一些调用 EntityManager 类的其他函数并且运行良好的其他代码。

我还尝试使用常规指针、引用甚至按值传递以相同的结果重写该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:43:44.133

模板方法/函数必须在标头本身中定义（除非方法的类本身在源文件中定义）。模板类的所有方法也是如此（即使方法本身不是模板方法）。

大多数人甚至不费心在类定义下面定义它们，他们只是在类中内联定义它们：

```
class EntityManager 
{ 
    public: 
        ... 
        template <typename ComponentType> 
        bool addComponentToEntity(const Entity in_Entity, const shared_ptr<ComponentType> in_ComponentInstance)
        {
            ...
        }
        ... 
```

}

# ruby - 在 ruby 中导入 csv 的正确方法是什么？

> ID：12469636
> 
> 赞同：1
> 
> 时间：2012-09-18T02:32:58.990
> 
> 标签：ruby, csv

csv有很多固有的问题，1）你的列不能有逗号，所以你必须用引号“”封装它们，然后一旦你用引号封装它们，你必须已经在一个句子中转义引号使用 \”

解析csv文件的最简单方法是什么？我恢复使用分号分隔的文件，但在 excel 中工作时这些文件很麻烦，所以现在我回到 csv 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T02:38:54.307

您是否尝试过 [http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)。

您还可以查看[http://fastercsv.rubyforge.org/](http://fastercsv.rubyforge.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:40:05.350

查看James Edward Gray II 的[Faster CSV](https://github.com/JEG2/faster_csv)。

“FasterCSV 是 CSV，但更快、更小、更干净。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T04:35:04.830

这是在 ruby​​ 中使用 CSV 的粗略示例：

```
class DataLoader

require 'csv'

def self.import_csv
    Dir.glob("/imports/*.csv").each do |csv_file|

        csv = CSV.open(csv_file, {:col_sep => ",", :headers => true, :return_headers => false, :quote_char => '"'})
        @data_table = csv.read

        @data_table.each do |data_row|
            field_one = data_row.first[0]
            field_two = data_row.first[1]
            #do some work
        end

end

end 
```

# python - 在数据库中已有数据之后添加的 UUID 字段。有没有办法为现有数据填充 UUID 字段？

> ID：12469638
> 
> 赞同：17
> 
> 时间：2012-09-18T02:33:08.897
> 
> 标签：python, django, django-models, django-south

我在一些模型中添加了一个 UUID 字段，然后使用 South 迁移。我创建的任何新对象都正确填充了 UUID 字段。但是，我所有旧数据的 UUID 字段为空。

有没有办法为现有数据填充 UUID 数据？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T17:44:44.663

对于以下示例类：

```
from django_extensions.db.fields import UUIDField

def MyClass:
    uuid = UUIDField(editable=False, blank=True)
    name = models.CharField() 
```

如果您使用的是 South，请创建数据迁移：

```
python ./manage.py datamigration <appname> --auto 
```

然后使用以下代码使用特定逻辑更新迁移以添加 UUID：

```
from django_extensions.utils import uuid

def forwards(self, orm):
    for item in orm['mypp.myclass'].objects.all():
        if not item.uuid:
            item.uuid = uuid.uuid4() #creates a random GUID
            item.save()

def backwards(self, orm):
    for item in orm['mypp.myclass'].objects.all():
        if item.uuid:
            item.uuid = None
            item.save() 
```

您可以创建不同类型的 UUID，每个 UUID 生成方式不同。Django-extensions 中的[uuid.py 模块](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/utils/uuid.py)包含您可以创建的 UUID 类型的完整列表。

请务必注意，如果您在包含大量对象的环境中运行此迁移，则可能会超时（例如，如果使用结构进行部署）。生产环境将需要另一种填充现有字段的方法。

尝试对大量对象执行此操作时可能会出现内存不足（我们发现自己内存不足并且部署失败，有 17,000 多个对象）。

为了解决这个问题，您[需要](http://www.mellowmorning.com/2010/03/03/django-query-set-iterator-for-really-large-querysets/)在迁移中创建一个自定义迭代器（或将其粘贴在真正有用的地方，并在迁移中引用它）。它看起来像这样：

```
def queryset_iterator(queryset, chunksize=1000):
    import gc
    pk = 0
    last_pk = queryset.order_by('-pk')[0].pk
    queryset=queryset.order_by('pk')
    if queryset.count() < 1
        return []
    while pk < last_pk:
        for row in queryset.filter(pk__gt=pk)[:chunksize]:
            pk = row.pk
            yield row
        gc.collect() 
```

然后您的迁移将变为如下所示：

```
class Migration(DataMigration):

    def forwards(self, orm):
        for item in queryset_iterator(orm['myapp.myclass'].objects.all()):
            if not item.uuid:
                item.uuid = uuid.uuid1()
                item.save()

    def backwards(self, orm):
        for item in queryset_iterator(orm['myapp.myclass'].objects.all()):
            if item.uuid:
                item.uuid = None
                item.save() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T20:10:17.270

要首先将 UUID 值添加到所有现有记录，您需要确保您的模型具有提交的 UUID`blank=True, null=True`

然后使用 south 运行 schemamigration 命令，然后打开生成的迁移文件。[然后使用以下内容编辑您的](http://alexkehayias.tumblr.com/post/20777275125/adding-a-uuid-field-to-an-existing-django-model#_=_)迁移文件，如本文所示

引用：

> 您需要导入以下导入 uuid
> 
> 在 forwards() 函数的末尾添加以下 def forwards(self, orm)：
> 
> ```
> ...
> for a in MyModel.objects.all():
>     a.uuid = u'' + str(uuid.uuid1().hex)
>     a.save() 
> ```

如前所述，这将遍历现有实例并向其添加 uuid 作为迁移的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-18T00:51:57.687

在 Django 文档中，对于这个确切的问题， Django 1.9现在有一个[很好的更新答案。](https://docs.djangoproject.com/en/1.9/howto/writing-migrations/#migrations-that-add-unique-fields)

节省了我很多时间！

# c++ - C++ 版本中 Anymote 的示例代码？

> ID：12469641
> 
> 赞同：0
> 
> 时间：2012-09-18T02:34:15.557
> 
> 标签：c++, ios, arm, google-tv

谁能告诉我在哪里可以找到像[这样的资源](https://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary%2Fsrc%2Fcom%2Fexample%2Fgoogle%2Ftv%2Fanymotelibrary%2Fclient)

（但我希望这是针对 C++ 的！！）

[google tv chrome extersion](http://code.google.com/p/google-tv-chrome-extensions/source/browse/AnymoteExample/?r=2048c59701bab6386f7ea8011e4ca342fb1f133a#AnymoteExample%2Fplugins%2Fgtvremote_AnymoteExample.plugin%2FContents%2FMacOS)下有一个动态库

这个超链接告诉我们如何通过 javascript 下的 NPAPI 调用 C++ 库来实现 Anymote。也许我可以按照这个页面去 C++ 版本。不幸的是，这些库的架构是 i386（或 x86_64）。我的项目是在其他平台下构建的（例如：arm），所以我不能直接调用这些库。奥兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:21:11.280

有一个 cpp Anymote 库实现和一些单元测试，它们在以下位置运行库 API：

[http://code.google.com/p/anymote-protocol/source/browse/#hg%2Fcpp](http://code.google.com/p/anymote-protocol/source/browse/#hg%2Fcpp)

除此之外，C++ 中没有开源 Anymote 客户端库。

# objective-c - 被 Home 按钮中断的 MPAudioPlayerController 无法保存状态

> ID：12469643
> 
> 赞同：1
> 
> 时间：2012-09-18T02:34:38.973
> 
> 标签：objective-c, ios5.1, mpmusicplayercontroller

使用 AppDelegate，我们响应通知：

**applicationWillResignActive**和**applicationDidBecomeActive**

在我们的主程序中，上述调用分别触发***了 saveAudioState***和***restoreAudioState***。这些获取 AudioPlayer 的状态，然后在我们从中断中恢复时恢复。这适用于电话中断，但不适用于按下主页按钮。

在 Home 按钮的情况下，currentTime 和 currentAudioItem 的值是无效的。

```
- (void) saveAudioState {
    currentAudioItem = musicPlayer.nowPlayingItem;
    currentTime = musicPlayer.currentPlaybackTime;
    NSLog(@"Playback state %d", musicPlayer.playbackState);
    NSLog(@"Time %f", currentTime);
    NSLog(@"Track %@", currentAudioItem);
    audioWasPlaying = NO;
    if (musicPlayer.playbackState == MPMusicPlaybackStatePlaying) {
        audioWasPlaying = YES;
        [musicPlayer pause];
    }
}

- (void) restoreAudioState {
    // Restore the now-playing item and its current playback time.
    musicPlayer.nowPlayingItem          = currentAudioItem;
    musicPlayer.currentPlaybackTime     = currentTime;

    // If the music player was playing, get it playing again.
    if (audioWasPlaying && currentAudioItem) {
        [musicPlayer play];
    }
} 
```

这是 iOS 的一个错误，还是只是事情被破坏的结果？

我已经在 iOS 5.1 和 5.1.1 上进行了测试。

# android - 基本保存/检索共享首选项

> ID：12469644
> 
> 赞同：1
> 
> 时间：2012-09-18T02:34:39.707
> 
> 标签：android, android-edittext, sharedpreferences

我的应用程序似乎在进入新活动时崩溃了。现在这个活动只有一个编辑文本字段，我正在尝试测试我的共享偏好技能。我还没有制作共享首选项文件，但我的印象是它是在访问它时自动制作的。这是logcat：

```
09-18 02:29:30.293: W/ResourceType(428): No package identifier when getting value for resource number 0x0000000a
09-18 02:29:30.303: D/AndroidRuntime(428): Shutting down VM
09-18 02:29:30.315: W/dalvikvm(428): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-18 02:29:30.334: E/AndroidRuntime(428): FATAL EXCEPTION: main
09-18 02:29:30.334: E/AndroidRuntime(428): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mangodeveloper.mcathomie/com.mangodeveloper.mcathomie.McatActivityPlayOptions}: android.content.res.Resources$NotFoundException: String resource ID #0xa
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.os.Looper.loop(Looper.java:123)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-18 02:29:30.334: E/AndroidRuntime(428):  at java.lang.reflect.Method.invokeNative(Native Method)
09-18 02:29:30.334: E/AndroidRuntime(428):  at java.lang.reflect.Method.invoke(Method.java:507)
09-18 02:29:30.334: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-18 02:29:30.334: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-18 02:29:30.334: E/AndroidRuntime(428):  at dalvik.system.NativeStart.main(Native Method)
09-18 02:29:30.334: E/AndroidRuntime(428): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0xa
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.content.res.Resources.getText(Resources.java:201)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.widget.TextView.setText(TextView.java:2857)
09-18 02:29:30.334: E/AndroidRuntime(428):  at com.mangodeveloper.mcathomie.McatActivityPlayOptions.onCreate(McatActivityPlayOptions.java:23)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-18 02:29:30.334: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-18 02:29:30.334: E/AndroidRuntime(428):  ... 11 more 
```

这是代码：

```
package com.mangodeveloper.mcathomie;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class McatActivityPlayOptions extends Activity {

    private EditText QuestionNumberEt;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_playoptions);

        QuestionNumberEt = (EditText) findViewById(R.id.Etnumberofquestions);
        SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
        QuestionNumberEt.setText(settings.getInt("MAXROUNDSVALUE", 10));

        Button startGameButton = (Button) findViewById(R.id.startgamebutton);
        startGameButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent PlayIntent = new Intent (McatActivityPlayOptions.this, McatActivityGame.class);
                PlayIntent.putExtra("MAXROUNDS", Integer.parseInt(QuestionNumberEt.getText().toString()));
                startActivity(PlayIntent);
            }
        });
    }

    @Override
    protected void onStop() {
        super.onStop();
        SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt("MAXROUNDSVALUE", Integer.parseInt(QuestionNumberEt.getText().toString()));
        editor.commit();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:39:16.773

问题在这里：

```
QuestionNumberEt.setText(settings.getInt("MAXROUNDSVALUE", 10)); 
```

您将文本设置为`10`( `int`)，而不是`"10"`( `String`)。该`int`值被解释为资源 ID（来自错误日志的 0xA 是十进制的 10），因此它试图找到与 ID 10 匹配的资源——它不存在。

尝试以下方法之一：

```
QuestionNumberEt.setText(settings.getInt("MAXROUNDSVALUE", 10) + "");
// OR
QuestionNumberEt.setText(String.valueOf(settings.getInt("MAXROUNDSVALUE", 10))); 
```

# vim - 使用 vim 远程编辑 serverB 上只能从 serverA 访问的文件

> ID：12469645
> 
> 赞同：5
> 
> 时间：2012-09-18T02:34:45.293
> 
> 标签：vim, ssh, remote-access, scp

尽管我从未尝试过，但显然可以按照[此处](http://vim.wikia.com/wiki/Editing_remote_files_via_scp_in_vim)所述在 vim 中远程编辑文件。在我的特殊情况下，我需要访问的服务器只能从校园访问，因此我必须像这样登录我的大学帐户：

```
ssh user@login.university.com 
```

然后从那里登录到安全服务器，如下所示：

```
ssh user@secure.university.com 
```

我已经设置了无密钥 ssh，所以我可以像这样自动化这个过程：

```
ssh user@login.university.com -t "ssh user@secure.university.com" 
```

无论如何远程编辑文件，例如`secure.university.com/user/foo.txt`在我的本地机器上？

**编辑：**

我的意图是在我的本地机器上使用 vim，因为它不切实际（move `.vim folder`、copy `.vimrc`）并且在某些情况下是不可能的（使用某些设置重新编译 vim、修补 vim 源、安装语言美化器）以使远程机器上的 vim 表现得像我一样希望它表现出来。我想要的是发出这样的东西（这不是准确的 scp，我知道）

```
vim scp://user@login.university.com scp://user@secure.university.com//home/user/foo.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T05:44:24.863

好的，经过一番工作后，我想通了。首先，您必须按照[此处](https://superuser.com/questions/174160/scp-over-a-proxy-with-one-command-from-local-machine)`.ssh/config`所述编辑（或创建）您的文件。出于我们的目的，我们将添加这样的一行，它本质上添加了一个代理。

```
Host secure
  User          Julius
  HostName      secure.university.com
  ProxyCommand  ssh Tiberius@login.university.com nc %h %p 2> /dev/null 
```

然后我们可以像这样简单地将`scp`文件复制（通过）`secure.university.com:/home/Julius/fee/fie/fo/fum.txt`到本地计算机

```
scp secure:/home/Julius/fee/fie/fo/fum.txt fum.txt 
```

对此进行扩展，我们可以将其远程加载到 vim 中，如下所示：

```
vim scp://secure//home/Julius/fee/fie/fo/fum.txt 
```

或`badd`像这样使用：

```
:badd scp://secure//home/Julius/fee/fie/fo/fum.txt 
```

为了简化我的生活，我将这个快捷方式添加到我`.vimrc`最常用的子文件夹的文件中：

```
nnoremap <leader>scp :badd scp://secure//home/Julius/fee/fie/fo/fum.txt 
```

到目前为止，vim 已经证明非常清楚这是一个远程文件，所以如果 C 文件包含这样的文件：

```
#include "foo.h" 
```

它不会抱怨缺少“foo.h”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:48:09.720

一旦你在机器上 SSH，你就可以在你的 shell 上的远程主机上运行任何命令（也包括 vim）。在您的机器上运行时记录运行 vim 后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:50:55.387

由于您使用的是 ssh，因此您基本上可以通过 CLI 访问服务器，就像您坐在机器本身前面一样。话虽如此，您可以在该机器上使用任何程序，就像在您自己的机器上使用它一样。假设这`secure.university.com/user/foo.txt`意味着在安全服务器上的`foo.txt`location 处调用了一个文本文件`/user`，那么通过 ssh 登录后，以下命令将起作用：

```
cd /user
vim foo.txt 
```

您还可以使用安装在机器上的 nano 或任何其他基于 CLI 的编辑器。

# php - php中的管理员权限

> ID：12469646
> 
> 赞同：-2
> 
> 时间：2012-09-18T02:35:29.660
> 
> 标签：php, admin

我有一个 PHP 脚本应该让用户查看基于 user_level 的页面。如果用户级别设置为 1..允许用户查看页面。如果没有，则将它们重定向到 index.php..由于某种原因它不起作用。它给了我消息，“您无权访问此页面”。无论谁登录，管理员或普通用户，它都会给我该消息。有任何想法吗？

```
<?php
include 'init.php';
include('core/init.inc.php');

var_dump($_SESSION)

if(!logged_in()){
header('Location: index.php');
exit();
}

if(!isset($_SESSION['user_level'])) {
echo 'You are not allowed to access this page. Click <a href="index.php">here</a> to go back to the home page';
exit();
}elseif(1 == (int)$_SESSION['user_level']){
header('Location: create_album.php');
exit;
}

include 'template/header.php';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:37:43.560

`isset`返回一个布尔值，删除它。

```
if(!isset($_SESSION['user_level'])) {
  echo 'You are not allowed to access this page. Click <a href="index.php">here</a> to go back to the home page';
  exit();
}elseif(1 == (int)$_SESSION['user_level'])){
  header('Location: create_album.php');
  exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:38:13.370

`isset($_SESSION['user_level'])`是问题所在。

PHP 函数`isset`返回一个 bool 值，您正在对其进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:39:25.413

不要在`isset()`那里使用。它是一个`boolean`而不是整数。相反，您可以这样做：

代替

```
if(1 !==(int)(isset($_SESSION['user_level']))) { 
```

和

```
if(isset($_SESSION['user_level']) && $_SESSION['user_level'] == 1) { 
```

# sql - sqlite插入错误

> ID：12469647
> 
> 赞同：0
> 
> 时间：2012-09-18T02:35:34.167
> 
> 标签：sql, sqlite

我使用 Firefox 插件 SQLite Manager 执行我的 SQL：

```
 declare @id int
    declare @lon float
    declare @lat float
    set @id=5
    set @lon=118.476000
    set @lat=32.033720
    while @i<=10000
      begin
        INSERT INTO njdm 
          (ID,dalei,xiaolei,hanyi,level,longitude,latitude) 
        VALUES 
          (@id, 5, 10, "地名描述",1,@lon,@lat)

        set @id=@id+1
        set @lon=@lon+0.000010
        set @lat=@lat+0.000010
      end 
```

并得到错误：

```
 [ near "declare": syntax error ]
    Exception Name: NS_ERROR_FAILURE
    Exception Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)                          [mozIStorageConnection.createStatement] 
```

有什么帮助吗？TIA！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:17:35.887

```
 declare @id int
        declare @lon float
        declare @lat float
        set @id=5
        set @lon=118.476000
        set @lat=32.033720
        while @id<=10000
          begin
            INSERT INTO njdm 
              (ID,dalei,xiaolei,hanyi,level,longitude,latitude) 
            VALUES 
              (@id, 5, 10, "地名描述",1,@lon,@lat)

            set @id=@id+1
            set @lon=@lon+0.000010
            set @lat=@lat+0.000010
          end

Note:  while @id<=10000 instead of  while @i<=10000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:00:22.103

SQLite[似乎不支持 WHILE 构造](https://stackoverflow.com/questions/1885702/sqlite-flow-constructs-in-sql)。您也许可以[使用额外的表格来实现类似的效果](https://stackoverflow.com/questions/7370761/sqlite-loop-statements)，但将一些工作卸载到应用程序可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T18:38:28.510

SQLite*仅*支持SQL 操作，它不直接支持变量、变量赋值、循环或其他程序结构。您需要用支持这些结构的其他语言编写此代码，然后通过构建动态 SQL 或使用与您选择的语言关联的 SQLite 支持库之一将命令发送到 SQLite。

# python - Python - 我的 while 循环正在自行停止

> ID：12469649
> 
> 赞同：0
> 
> 时间：2012-09-18T02:35:48.753
> 
> 标签：python, while-loop

这是一个家庭作业问题，它要求“选择一个单词。要求用户输入一个字母。检查该字母在您的单词中出现的次数并在屏幕上输出数字。” 到目前为止，我已经按原样编写了它，它似乎工作正常：

```
word = str("python")
letters = len(word)
attempt = str(raw_input ("Enter a letter: "))

while attempt in word:
    count = "python".count(attempt)
    if attempt in word:
                    print "This letter is present ",count, "time(s)."
    attempt = str(raw_input ("Enter another letter: "))

while attempt not in word:
    attempt = str(raw_input ("This letter is not present, enter another letter: "))
    count = "python".count(attempt)
    if attempt in word:
             print "This letter is present ",count, "time(s)." 
```

但有时如果我输入字母，程序会停止并且不再接受任何输入。我究竟做错了什么？如果代码非常草率且写得不好，我深表歉意，因为我是编程新手。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:42:35.550

我不确定这是否是您的意思，但是您的 while 循环将一个接一个地执行。它们并非一直都适用。因此，第一个 while 意味着“只要用户输入单词中的字母，就继续执行此操作”，并且只要用户在单词中输入字母，该循环就会继续执行。一旦用户输入了一个*不在*单词中的字母，循环将结束，事情将进入第二个循环。执行永远不会回到第一个循环。同样，在第二个循环中，如果您随后输入单词中的字母，*则*循环将结束。由于这是程序的结束，程序将结束。

因此，如果您输入一个不在单词中的字母，然后输入一个在单词中的字母，程序将结束。就像你先输入“x”然后输入“y”，它就会停止。

我认为你真正想要的更像是：

```
while True:
    attempt = raw_input("Enter a letter:")
    if attempt in word:
        print "That was in the word", word.count(attempt), "times"
    else:
        print "That was not in the word" 
```

当然，这个程序会无限循环，直到你按下 Ctrl-Break 等关闭它。

您的代码还有其他一些问题。您不需要将“python”包装在 中`str`，因为它已经是一个字符串。您也不需要包装`raw_input`在字符串中，因为`raw_input`已经返回了一个字符串。您定义了一个名为`letters`但从不使用它的变量。

此外，您`word = "python"`在开始时定义，但有时稍后您使用该`word`变量，而其他时候您在代码中重新键入字符串“python”。对这个程序来说没关系，但一般来说，将变量赋值一次并在任何地方使用它是个好主意；否则，如果您决定使用不同的词，则必须在许多地方更改它，这会增加您忘记在一个地方更改它的可能性，从而导致错误。

最后，注意`in`and`count`对子字符串进行操作，而不仅仅是单个字母。因此，输入“yth”作为您的输入仍然有效，并且计数为 1。这不一定有什么问题，但您应该知道，尽管您要求输入字母，但该人可以输入任何内容，并且子字符串仍然可以在“单词”中找到任何长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:42:52.123

该程序是顺序的，有两个循环。一旦通过了这些循环，程序就结束了。

> 循环 1：在单词中找到输入时运行。

一旦这个条件失败，我们就会进入循环 2：

> 循环 2：在单词中找不到输入时运行。

一旦这个条件失败，我们就会进入程序的结尾。

因此，如果您输入一次“坏”输入，然后输入一次“好”输入，程序将结束。

您想要做的是将两个循环包装成一个，并使用 if-else 来确定每个特定输入是哪个。

# android - 为什么我的片段的 ontouch() 和 onClick() 方法在启动另一个框架时仍然响应

> ID：12469651
> 
> 赞同：2
> 
> 时间：2012-09-18T02:36:11.827
> 
> 标签：android, android-fragments

我的应用程序有一个片段 A 和片段 B，片段 A 包含 a`GridView`和`ListView`如下所示：

```
 fragment A
-------------------------------------
|                       |            |
|                       |            |
|                       |            |
|        GridView A     | ListView A |
|                       |            |
|                       |            |
|                       |            |
|                       |            |
|                       |            |
-------------------------------------- 
```

并且片段 B 包含 a`ListView`和 a`LinearLayout`如下：

```
--------------------------------------
|            |                       |
|            |                       |
|            |                       |
|            |                       |
| ListView B |     LinearLayout B    |
|            |                       |
|            |                       |
|            |                       |
|            |                       |
|            |                       |
-------------------------------------- 
```

当a`ListView`在fragment A上点击A的item时，会启动fragment B并显示item的详细信息。但是在fragment B上，当我触摸曾经是`GridView`A或`ListView`A区域的屏幕时，它仍然响应`GridView`A的onTouch()方法或`ListView`A的`onClick()`方法。这是我第一次使用`Fragment`，我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:41:35.413

听起来触摸正在泄漏到第一个片段。我会在片段 B 的根布局上设置一个 onTouch 侦听器，以防止在其布局可见时进行触摸。

所以对于这些方面的东西：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
     View root = inflater.inflate(R.layout.fragmentBlayout, container, false);
    root.setOnTouchListener(new OnTouchListener()
    {
        @Override
        public boolean onTouch(View v, MotionEvent event)
        {
        /** Intercepts touches from going through. */
        return true;
        }
    });

    /** Find the rest of your views... */

   return root;
} 
```

# c++ - c++ call linux commands forks childs

> ID：12469658
> 
> 赞同：0
> 
> 时间：2012-09-18T02:37:00.547
> 
> 标签：c++, linux, fork, wget

在我的 c++ 程序中使用 linux 命令。尝试从数组列表中下载一个 url，一旦一个下载完成，下一个开始.... 目前只下载数组中的第一个位置，然后停止。

有人看到我正在做的错误吗？

```
// Begin the downloading process
pid_t child = 0;
child = fork();

if ( child < 0)
{
    cout << "Process Faileld to Fork<<endl;
    return 1;
}
if (child == 0)
    {
        wait(NULL);
    }
else
{
    for(int i = 0; i < numberOfDownloads; i++)
    {
    execl("/usr/bin/wget", "wget",locations[i], NULL);  
    }
} 
```

尝试使用命令 wget 下载内容，但出现错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:40:33.683

`execl`用启动的进程替换当前运行的进程。所以你的循环体只运行一次。你应该把`fork()`循环放在里面，假设你想`numberOfDownloads`分叉`wget`. （但要小心这些事情）

否则，使用`system()`，它不会终止您的进程，而是在`wget`退出后返回您的循环。或者`popen()`，如果您需要更多地控制进程并想要读取`wget`输出，而不必自己完成所有 I/O 繁重的工作。

# hadoop - 如何在 Pig 中过滤时间戳

> ID：12469660
> 
> 赞同：1
> 
> 时间：2012-09-18T02:37:06.587
> 
> 标签：hadoop, nosql, apache-pig

我有这个模式的表：

```
(id: chararray, ts: long, data: chararray) 
```

其中 ts 代表时间戳并与 UNIX 时间一起存储；

因为数据会更新，如果更新发生，ts会被修改，id不会改变。但是所有这些旧记录和新记录都将存储在 hdfs 中。

我只是想看看最新的数据，所以我这样写猪代码：

```
grp = GROUP table BY id;

rst = FOREACH grp {
    latest = FILTER table BY ts == MAX(table.ts);
    GENERATE latest.id AS id,
             latest.data AS data;
} 
```

但似乎 Pig 代码不起作用，那么任何人都可以给我一个建议让这个代码工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:40:51.487

您是否尝试过按`ts`降序排列？

```
LATEST = LIMIT (ORDER table BY ts desc) 1;
dump LATEST; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T23:16:10.137

我不确定为什么这不起作用，但编写 UDF 来做到这一点也不会太难。只需输入元组包，循环它们，然后返回具有最大时间戳的元组。然后你可以这样做：

```
grp = GROUP table BY id;
latest = FOREACH grp GENERATE my.udfs.LatestInBag(table); 
```

# javascript - 如何简化我的条件语句？

> ID：12469663
> 
> 赞同：4
> 
> 时间：2012-09-18T02:38:01.153
> 
> 标签：javascript

我正在尝试简化以下代码。这些代码对我来说似乎是多余的。这里有没有人可以帮助我？非常感谢！

```
if(area.regionCode=='0' || area.regionCode==null){  

    var fakecode=area.region.substring(0, area.region.length - 1);
        area.region= fakecode +i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:22:45.747

每当您认为某些代码没有直接暴露时，请尝试给它一个合适名称的新家：

```
if (!isValidRegionCode(area.regionCode)) {  
  ...
}

...

function isValidRegionCode(regionCode) {
  return area.regionCode != null && area.regionCode != '0';
} 
```

它总体上具有更多代码，但使您的意图清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:40:57.897

我会推荐明确的条件检查。使用时：

```
if (area.regionCode)  {   } 
```

逻辑风格，一种是将 varAny 视为布尔值。因此，JavaScript 将执行隐式转换为任何对象类型 varAny 的布尔值。

或者

```
 if(Boolean(area.regionCode)){
        codes here;
    } 
```

两者都一样

为以下内容返回 false，

*   空值
*   不明确的
*   0
*   “”
*   错误的。

当心字符串零“0”和空格“”返回true。

你也可以先修剪输出所以`" "`问题将在这里解决教程 [如何在javascript中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

在@mttrb 和@nnnnnn 描述的情况下，您可以首先将字符串转换为int 或float by`parseInt()`并`parseFloat()`检查此[Converting strings to numbers](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Converting_strings_to_numbers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T02:58:25.470

```
if(parseInt(area.regionCode) > 0) {} 
```

# jquery - jQuery UI 选项卡 - 删除选项卡后面的标题和内容区域

> ID：12469666
> 
> 赞同：1
> 
> 时间：2012-09-18T02:38:29.847
> 
> 标签：jquery, css, jquery-ui

我目前正在考虑将一个 SPRY 选项卡式面板转移到 jQuery UI 选项卡中，并且想知道是否有一种快速的方法可以从 UI 选项卡后面删除内容区域。我基本上希望选项卡后面的白色页面背景，以及出现在选项卡下方的内容区域。选项卡的 jQuery UI 版本[出现在这里](http://www.davidkneale.com/wcusa/expedition_leader_ui.html)，我希望选项卡出现的方式可以[在此页面上查看。](http://www.davidkneale.com/wcusa/expedition_leader.html)我使用 jQuery Themeroller 创建了原始的标签样式。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T03:44:29.367

这可以通过 CSS 来完成。

```
#copy-main .ui-widget-header{
    background:transparent !important;
}

#copy-main .ui-tabs{
    padding: 0 !important;
    margin-top:40px;
    position:relative;
}

#copy-main .ui-tabs .ui-tabs-nav{
    padding: 0 !important;
    position:absolute;
    margin:-32px -1px 0; //compensation
} 
```

# c# - DLL 适合我吗？

> ID：12469668
> 
> 赞同：0
> 
> 时间：2012-09-18T02:38:39.677
> 
> 标签：c#, .net, visual-studio, dll

我发现自己在各种应用程序中一遍又一遍地使用了相当多的代码。我最近决定花时间将它们全部组织在一个位置，这样我就可以从我的任何解决方案中引用它们。我从一个类库项目开始，添加了一堆不同的函数和一些我使用的派生控件。一些函数由派生控件使用，也可以直接从应用程序调用。我构建了项目并开始在我的项目中使用 DLL。

我对这个自定义 DLL 有几个问题（我使用的是 Visual C# 2010 Express）：

1.  我注意到的第一件事是它似乎不像微软的股票库那样工作。例如，我可以“使用 System.Windows.Controls;” 在程序中，但我只能使用 using 指令引用自定义库的命名空间。如果这样做有意义的话，以类似的方式组织我的课程会很好。是否可以像 Microsoft 那样嵌套类？

编辑：例如......如果我在我的应用程序代码顶部键入“使用系统。”，我会得到一堆子命名空间可供选择。我继续输入“Windows。”，我得到了更多的子类别。如果我添加对 MyCustom.dll 的引用并开始输入“使用 MyCustom。”，我看不到我的任何类或子类。我只是在问如何在我的类库中组织事物，使它们的行为类似于库存库。

1.  用我所有的可重用代码制作一个大的 DLL 文件是个好主意吗？我目前没有大量代码，但我想留出扩展空间。对此的最佳做法是什么？

2.  在为我的应用程序制作安装程序时如何处理我的 DLL？我通常使用 InnoSetup 来制作我的安装程序。

3.  这是我主要关心的问题...假设我在 Application1 中使用自定义 DLL 中的一个函数，并且有人安装了它。我稍后会为我正在构建的 Application2 添加一些功能或更改该功能。如果新功能破坏了 Application1 或以不合需要的方式更改了某些内容，那么当用户安装 Application2 时会发生什么？我的自定义 DLL 是在应用程序之间共享，还是每个应用程序都有自己的 DLL 版本？显然，我会构建一个新版本的 Application1 以使其与新的 DLL 一起工作，但不能保证用户会更新它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:49:41.063

DLL 非常适合您尝试做的事情。

> 1）我可以“使用 System.Windows.Controls；” 在程序中，但我只能使用 using 指令引用自定义库的命名空间。

这是因为 MS 在其 DLL 中公开了多个接口。为此，通常需要您在 DLL 中注册多个组件，从而使用您的代码将类导出到客户端。

> 2) 用我所有的可重用代码制作一个大 DLL 文件是个好主意吗？

DLL 通常是一种部署布局。因此，如果您的客户可能只对代码的子集感兴趣，那么将代码分解为更小的 DLL，但除非有需要，否则不需要。可以为其他开发团队提供特定的 API 组件以满足他们的需求，以便您只在需要时发布更小的粒度组件，DLL 越大，客户端越多，对他们的影响就越大。

> 3) 当我为我的应用程序制作安装程序时，我如何处理我的 DLL？我通常使用 InnoSetup 来制作我的安装程序。

Windows 的现代安装程序都包括分发 DLL 和在 Windows 注册表中注册 DLL 内的组件的能力。

> 4）这是我的主要关注点......（跨部署的同一个dll的多个版本）

在过去，当人们将他们的 DLL 部署到 Windows 系统文件夹时，这是一个大问题。在部署良好的 Windows 应用程序中不再是这种情况。Windows 将 DLL 沙盒自动安装到安装应用程序的本地，因此即使是认为其安装到 system32 或从那里加载的应用程序也确实不是。只要您遵循 DLL 部署规则并将您的 DLL 与您的应用程序一起发送，并且不要试图将它们强制放入系统目录，您就不必担心冲突（这些窗口可能无论如何都不会允许）

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:49:55.837

1.  我不明白你的问题。请重新措辞。
2.  它因人而异。通常可重用库特定于您的解决方案（例如包含常见`enum`类型的共享库或数据库模型）。如果您只有在不同项目中重复使用的代码片段，则可以将源文件复制到您的项目中，或者引用源文件（VS 确实允许您这样做）而不复制它。如果您曾经使用源代码控制，请小心。
3.  无需担心，DLL 只是您的应用程序的另一个依赖项。VS 将（默认情况下）将 DLL 复制到应用程序项目的输出目录，因此您只需配置安装程序以包含文件`bin`夹中的所有文件（可能 XML 文档文件除外）。
4.  除非您费了很多力气让您的 DLL 在文件系统中共享（这在 1990 年代硬盘空间有限时很流行，请参阅“Microsoft Shared”文件夹作为示例），这不是问题，因为您的应用程序的每个发行版都将拥有自己的共享 DLL 副本（“共享”是在编译时，而不是在运行时）。如果应用程序尝试使用与其编译所针对的文件不兼容的 DLL 文件启动，.NET CLR 将引发错误（您可以使用强名称程序集进一步强制执行此操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T03:10:19.360

1) 通过将类文件中的命名空间从：SomeNamespace 更改为：SomeNamespace.SubNamespace，您可以将代码嵌套在它自己的子命名空间中。顺便说一句，如果您在 Visual Studio 的解决方案资源管理器中对项目执行“添加 -> 新建 -> 文件夹”，当您执行“添加 -> 新建 -> 类”时，VS 将自动使用您的“嵌套”命名空间，这将是您添加的文件夹的名称。因此，如果您的原始命名空间是：MyDLLProject，并且您在项目中添加了一个名为：HelpfulStuff 的文件夹，那么当您向该文件夹添加新的类文件时，您将看到命名空间现在是“MyDLLProject.HelpfulStuff”，因此，您将需要以这种方式在您的代码中引用它，或者通过完全指定它，或者通过包含“使用 MyDLLProject.HelpfulStuff”

2) 将任何和所有 RE-USEABLE 代码包装到 DLL 中当然是一个好习惯，因为它很容易在其他项目中使用，并且只需更改一次，如果需要更改，无论有多少项目用它。但是，如果您可以相当肯定您永远不会在其他任何地方使用该代码，则可能不值得花费时间和精力。

3) InnoSetup 应自动包含项目引用的任何程序集（.NET DLL）。您可以在 VS 的解决方案资源管理器中查看引用了哪些 DLL，并从项目树中的“引用”节点添加引用。如果您选择创建一个，则需要在此处添加对您自己的 DLL 的引用。

4) 除非您确实通过在 GAC（全局程序集缓存）中注册来使您的 DLL 成为共享组件，否则您无需担心这一点。您的应用程序将始终拥有它自己使用的 DLL 的副本，并且不会以您想象的方式相互踩踏。

# networking - WebSocket 服务器：是否总是调用关闭？

> ID：12469673
> 
> 赞同：0
> 
> 时间：2012-09-18T02:39:09.937
> 
> 标签：networking, websocket, connection

我正在构建一个名为 AcaniChat 的 iPhone 应用程序。服务器使用 Node.js ws 模块。我可以假设 Node.js ws close 回调函数保证为每个结束的连接调用吗？如果突然间，我用手榴弹炸毁了我的 iPhone 怎么办？会在服务器上调用 close 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:02:26.010

不。如果客户端关闭其套接字，TCP 连接将关闭，但服务器套接字将保持“打开”状态，尽管对套接字的任何进一步操作都会导致错误（或客户端关闭连接的指示）。

如果电话被榴弹炸毁，TCP 连接将不会正常关闭，并且对服务器套接字的任何进一步操作都会导致错误（与客户端关闭其套接字时的错误不同）。

因此，关闭套接字有两件事：它关闭连接（如果它尚未关闭），并释放用于套接字对象的任何本地系统资源。所以你应该在所有情况下都调用 close 。

# iphone - 使用 Plist 中的数据在地图上显示多个引脚

> ID：12469677
> 
> 赞同：0
> 
> 时间：2012-09-18T02:39:40.563
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试使用字典数组中的纬度和经度在地图上显示多个图钉。问题是它总是只显示 plist 中最后一个字典的 pin。

这是我的方法：

```
- (void)loadMapPins
{
MapAnnotation *annotation = [[MapAnnotation alloc] init];

for (int i=0; i<self.dataDictionary.count; i++){

    NSDictionary *dictionary = [NSDictionary dictionaryWithDictionary:[self.dataDictionary objectAtIndex:i]];

    double latitude = [[dictionary objectForKey:@"Latitude"] doubleValue];
    double longitude = [[dictionary objectForKey:@"Longitude"] doubleValue];

    CLLocationCoordinate2D coord = {.latitude =
        latitude, .longitude =  longitude};
    MKCoordinateRegion region = {coord};

    annotation.title = [dictionary objectForKey:@"Name"];
    annotation.subtitle = [dictionary objectForKey:@"Center Type"];
    annotation.coordinate = region.center;
    [mapView addAnnotation:annotation];
    }
} 
```

我需要它通过循环并相应地在地图上放置大头针。任何帮助/示例表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:48:56.160

我认为您想将注释创建移动到循环中。从外观上看，您只创建了一个，然后在循环中一遍又一遍地对其进行变异。当循环完成时，对注释变量的最后修改会反映 `self.dataDictionary`您正在迭代的最后一项。

下面的代码在每次循环迭代时创建一个新的注解对象。

```
- (void)loadMapPins
{

    for (int i=0; i<self.dataDictionary.count; i++){

    NSDictionary *dictionary = [NSDictionary dictionaryWithDictionary:[self.dataDictionary objectAtIndex:i]];

    double latitude = [[dictionary objectForKey:@"Latitude"] doubleValue];
    double longitude = [[dictionary objectForKey:@"Longitude"] doubleValue];

    CLLocationCoordinate2D coord = {.latitude =
        latitude, .longitude =  longitude};
    MKCoordinateRegion region = {coord};

    MapAnnotation *annotation = [[MapAnnotation alloc] init];
    annotation.title = [dictionary objectForKey:@"Name"];
    annotation.subtitle = [dictionary objectForKey:@"Center Type"];
    annotation.coordinate = region.center;
    [mapView addAnnotation:annotation];
    }
} 
```

希望这可以帮助，

斯科特·H

# ms-access - MS Access - MySql 中 CREATE TABLE 语句的语法错误 - 使用触发器

> ID：12469680
> 
> 赞同：-1
> 
> 时间：2012-09-18T02:39:58.953
> 
> 标签：ms-access, syntax, triggers

出于某种原因，我无法让它工作..

```
CREATE TRIGGER triggerupdate
INSTEAD OF UPDATE ON ORDERDETAILS
AS
IF UPDATE(ORDERVALUE) BEGIN
        Print ('INSTEAD OF Trigger [triggerupdate] - Trigger executed!!')
        Print('You cannot update Order Value')
END 
```

如果有人尝试更新 OrderValue，我会尝试触发。IT 一直说 Create Table 上的语法错误。

让我知道我有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:52:25.430

您不能使用 MS Access。Access 不支持`TRIGGER`s，这就是您收到语法错误的原因，因为 Access 中的 SQL 不支持“CREATE TRIGGER”。

此外，`Print`它也不是 Access SQL 中的函数。

您可能打算将 Access 用作 MSSQL Server 的前端，这是可以做到的，并且您的 SQL 语句将在哪里变得有效（但您的使用`Print`是过时的）。

# r - 如何使用其中一列已经包含频率/计数的数据制作条形图

> ID：12469684
> 
> 赞同：0
> 
> 时间：2012-09-18T02:40:26.020
> 
> 标签：r, plot

我正在尝试绘制具有多个特征中每一个特征的数据的样本数量。我实际上已经有一列包含这些样本数量的数据，只是希望将其绘制为“频率”。事实上，我不太确定频率数据来自哪里（见下面的代码）。请让我知道我是否可以澄清任何事情。非常感谢！：

```
##my data
data<-structure(list(V1 = structure(c(2L, 1L), .Label = c("593", "QnWeight_initial"
), class = "factor"), V2 = structure(c(2L, 1L), .Label = c("566", 
"Head"), class = "factor"), V3 = structure(c(2L, 1L), .Label = c("535", 
"V1"), class = "factor"), V4 = structure(c(2L, 1L), .Label = c("535", 
"V2"), class = "factor"), V5 = structure(c(2L, 1L), .Label = c("535", 
"V3"), class = "factor"), V6 = structure(c(2L, 1L), .Label = c("482", 
"Left_Leg"), class = "factor"), V7 = structure(c(2L, 1L), .Label = c("474", 
"Left_Antenna"), class = "factor"), V8 = structure(c(2L, 1L), .Label = c("237", 
"Qn_Weight_Loss"), class = "factor"), V9 = structure(c(2L, 1L
), .Label = c("230", "Days_wrkr_eclosion"), class = "factor"), 
    V10 = structure(c(2L, 1L), .Label = c("81", "Growth_all"), class = "factor"), 
    V11 = structure(c(2L, 1L), .Label = c("79", "Growth_1_2"), class = "factor"), 
    V12 = structure(c(2L, 1L), .Label = c("62", "Growth_1_3"), class = "factor"), 
    V13 = structure(c(2L, 1L), .Label = c("60", "Growth_2_3"), class = "factor"), 
    V14 = structure(c(2L, 1L), .Label = c("51", "Right_Antenna"
    ), class = "factor"), V15 = structure(c(2L, 1L), .Label = c("49", 
    "Left_Leg_Remeasure"), class = "factor"), V16 = structure(c(2L, 
    1L), .Label = c("49", "Right_Leg"), class = "factor"), V17 = structure(c(2L, 
    1L), .Label = c("47", "Head_Remeasure"), class = "factor"), 
    V18 = structure(c(2L, 1L), .Label = c("46", "Left_Antenna_Remeasure"
    ), class = "factor")), .Names = c("V1", "V2", "V3", "V4", 
"V5", "V6", "V7", "V8", "V9", "V10", "V11", "V12", "V13", "V14", 
"V15", "V16", "V17", "V18"), class = "data.frame", row.names = c(NA, 
-2L))
dat<-data.frame(fac=unlist(data[1,, drop=FALSE]), freqs=unlist(data[2,, drop=FALSE]))
t<-table(rep(as.character(dat[, 1]), dat[, 2]))

##the plot I'm making at the moment
barplot(t, main="Sample Sizes of Various Fitness Traits", xaxt='n', xlab='', width=0.85)
labels<-unlist(data[1,,drop=FALSE])
text(1:18, par("usr")[3] -0.25, srt=90, adj=1,labels=labels,xpd=TRUE, cex=0.6)

##The kind of plot I'm looking to make
par(las=2) # make label text perpendicular to axis
par(mar=c(5,8,4,2)) # increase y-axis margin.

print(mtcars$gear)
counts <- table(mtcars$gear)
print(counts)
barplot(counts, main="Car Distribution", names.arg=c("3 Gears", "4 Gears", "5   Gears"), cex.names=0.8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:12:17.660

这显然是一个明智的情节。看来您可能会问如何用“频率”标记 y 轴。

```
barplot( t, main="Sample Sizes of Various Fitness Traits", 
            xaxt='n', xlab='', width=0.85, ylab="Frequency")
labels<-unlist(data[1,,drop=FALSE])
text(1:18, par("usr")[3] -0.25, srt=90, adj=1,labels=labels,xpd=TRUE, cex=0.6) 
```

或者::: 你问代码是做什么的，因为你是从别人那里抄来的，但你并不真正理解它？创建对象“t”的`table`函数计算唯一类别中的项目数。这个短语`rep(as.character(dat[, 1]), dat[, 2]))`有点晦涩，但它重复 V2 的每个值的次数与在`dat` .... 中表示 V2 的因子表示的数字编码中的次数相同。换句话说，这很可能是胡说八道。

或者您是在问它是否以合理的方式表示数据？（事实并非如此。）有一个 R-FAQ 关于如何将因式分解的变量转换回数字，当它们被无意地如此制作时：

```
 barplot( as.numeric( as.character(dat$freqs)) , 
    main="Sample Sizes of Various Fitness Traits", 
    xaxt='n', xlab='', width=0.85, ylab="Frequency")
 labels<-unlist(data[1,,drop=FALSE])
 text(1:18, par("usr")[3] -0.25, srt=90, adj=1,labels=labels,xpd=TRUE, cex=0.6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:12:59.160

这是从您的数据对象中提取一些有用数据的尝试。（您的问题是您的数据列都是以标题行作为数据第一行的所有因素。这应该可以使用 `read.table(...,header=T)`

```
# converting from factor to character or numeric as required
measure  <- unlist(lapply(data[1,], as.character))
value <- unlist(lapply(data[2,], function(i){as.numeric(as.character(i))}))

# set names appropriately
names(value) <- measure

# the plot
par(las=2) # make label text perpendicular to axis
par(mar=c(5,8,4,2)) # increase y-axis margin.
barplot(value) 
```

![在此处输入图像描述](../Images/aadef0a724f9f87f19c044d6571beaea.png)

# c# - 试图让事件在下拉更改时触发

> ID：12469693
> 
> 赞同：0
> 
> 时间：2012-09-18T02:42:16.493
> 
> 标签：c#, asp.net-mvc-3

我真的在努力让一个简单的级联`DropDown`工作。我正在做一个非常基本的示例，但它失败了。因此，我正试图深入了解基础知识，看看如何`events`与`controls`.

我有这个：

```
 <script type="text/javascript">
$(document).ready(function() {

    $('#CarMakeId').change(function () {
        alert("khsdhf")
    }); 
})
</script>

    <html>
    <head>
        <title>Index</title>
    </head>
    <body>
        <div>
            Make: @Html.DropDownListFor(x=>x.CarMakeId,
                    new SelectList(Model.CarMakes, "Value", "Text"), 
                    "-- select make --") <br />
            Model: @Html.DropDownListFor(x=>x.CarModelId,
                     new SelectList(Model.CarModels, "Value", "Text"), 
                     "-- select model --")         
        </div>
    </body>
    </html> 
```

目前，我想要它做的就是在我更改下拉列表中的选择时提醒我。但我正在`"Object expected`“进入`Java Script`.

这是呈现的 HTML：

```
<!DOCTYPE html>
<script type="text/javascript"> 
    $(document).ready(function () {

        $('#CarMakeId').change(function () {
            alert("khsdhf");
        });
    })
</script>
<html>
<head>
    <title>Index</title>
</head>
<body>
    <div>
<form action="/" method="post">            <p>
            Make: <select data-val="true" data-val-number="The field CarMakeId must be a number." data-val-required="The CarMakeId field is required." id="CarMakeId" name="CarMakeId"><option value="">-- select make --</option>
<option value="1">BMW</option>
<option selected="selected" value="2">Ford</option>
<option value="3">Toyota</option>
</select>
            <br />
            Model: <select data-val="true" data-val-number="The field CarModelId must be a number." data-val-required="The CarModelId field is required." id="CarModelId" name="CarModelId"><option value="">-- select model --</option>
<option value="5">Mustang</option>
<option selected="selected" value="6">Territory</option>
<option value="7">Focus</option>
</select>
        <br />
        <input type="submit" name="Submit" title="Submit" />
        </p>
</form>    </div>
</body>
</html> 
```

附加信息：

这给出了同样的错误：

```
<script type="text/javascript">
    $(document).ready(function () {
        alert("Hello");
    })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:50:38.903

检查页面上的 javascript 错误。可能是缺少分号；在 alert() 行的末尾。您还可以使用 IE9 中的“开发者工具”或 Firefox 中的“Firebug”进行调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:52:18.183

在添加事件处理程序之前尝试添加`$(document).ready`以确保下拉列表存在。

```
<script type="text/javascript">
$(document).ready(function(){
    $('#CarMakeId').change(function () {
        alert("khsdhf")
    });
}); 
</script> 
```

`ready`将在加载 DOM 时触发。在这里阅读更多[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:11:43.700

问题是我没有 JQuery 脚本链接！

```
<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script> 
```

# cygwin - speak.js 在 windows 中的编译问题

> ID：12469698
> 
> 赞同：0
> 
> 时间：2012-09-18T02:43:26.560
> 
> 标签：cygwin, llvm, llvm-clang, emscripten, espeak

我在尝试编译时遇到了这个问题`speak.js`。当`emscripten.sh`编译器到达这一行时：

```
$EMSCRIPTEN/emcc -O2 --js-transform "python bundle.py" speak.bc -o speak.raw.js 
```

我收到此错误（以前的部分工作正常）：

```
emscripten

fs.js:338
return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);
                 ^
Error: ENOENT, no such file or directory 'C:\tmp\tmp0Ak4ij.txt' 
    at Object.fs.openSync (fs.js:338:18) 
    at Object.fs.readFileSync (fs.js:182:15) 
    at read (C:\opt\emscripten\src\compiler.js:36:37) 
    at Object.<anonymous> (C:\opt\emscripten\src\compiler.js:120:29) 
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)
Traceback (most recent call last):
  File "/opt/emscripten/emcc", line 871, in <module>
    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)
  File "/opt/emscripten/tools/shared.py", line 736, in emscripten
    assert os.path.exists(filename + '.o.js') and len(open(filename + '.o.js', 'r').read()) > 0, 'Emscripten failed to generate .js: ' + str(compiler_output)
AssertionError: Emscripten failed to generate .js:
cat: speak.raw.js: No such file or directory 
```

我在 Windows 7 下运行 cygwin；所有 emscripten 健全性检查工作正常，我尝试将 emscripten /tmp 配置（主文件夹中的 .escripten）更改为多个值，授予权限等。似乎从未创建临时文件，所以当它尝试再次访问它时，它打破了。

欢迎任何帮助/指导/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:19:35.043

如果有人感兴趣，我会发布答案。

不幸的是，我找不到根本原因，但它不适用于 Windows 7 x64 下的 cygwin。

但是，我能够编译，安装 clang，llvm visual studio express ant 此链接中的其余工具

[在 VS 2010 中使用 emscripten](https://github.com/kripken/emscripten/wiki/Using-Emscripten-from-Visual-Studio-2010)

并使用 Windows 控制台执行与 emscripten.sh 中相同的操作。但是它不会编译

> emcc -O2 --js-transform "python bundle.py" speak.bc -o speak.raw.js

您必须删除***-02***选项，它可以工作。我正在测试不同的语言/音素，让你知道它是如何工作的

# java-me - J2ME 图像图标

> ID：12469702
> 
> 赞同：0
> 
> 时间：2012-09-18T02:43:40.557
> 
> 标签：java-me, midp

是否可以在表单中的按钮旁边放置图像图标？我一直在寻找它，但没有找到任何线索。你能帮助我或给我参考，以便它可以清除一些东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:29:35.320

如果您正在使用`LCDUI`，则没有。但如果你正在使用`LWUIT`，你可以使用[`Button`](http://lwuit.java.net/javadocs/com/sun/lwuit/Button.html#Button%28java.lang.String,%20com.sun.lwuit.Image%29).

# android-ndk - 使用 Android NDK 构建 Tesseract

> ID：12469711
> 
> 赞同：3
> 
> 时间：2012-09-18T02:45:18.343
> 
> 标签：android-ndk, tesseract

我正在按照[本](http://kurup87.blogspot.ca/2012/03/android-ocr-tutorial-image-to-text.html)教程为 Android 编译Tesseract（一种光学字符识别包）的[这个](https://github.com/rmtheis/tess-two)分支。我正在使用 Cygwin 为 Tesseract Android 项目构建 NDK。调用 ndk-build（来自 tess-two 目录）时出现以下错误：

```
c:/android-ndk-r8b-windows/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.exe: cannot find ./obj/local/armeabi-v7a/libgnustl_static.a: Permission denied 
```

什么可能导致此错误？附带说明一下，有没有更简单的方法可以让 Tesseract 在 Android 上启动并运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T05:40:56.517

在 Windows 下，以管理员身份运行命令提示符，然后重试：

搜索->cmd.exe->右键->以管理员身份运行

Cygwin 是不必要的——只需使用 Windows 本身。您可以按照 Tesseract fork 上的[README](https://github.com/rmtheis/tess-two)构建说明进行操作。您关注的博客使该过程比必要的复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:57:13.520

首先检查您是否能够在 ndk 中编译示例。并“确保”安装了 cygwin。安装或尚未安装软件包时会出现编译问题。早期我使用 tesseract 并没有发现任何问题。

因此，Tesseract OCR 用于将库引用到您的项目。例如，检查[this](https://github.com/rmtheis/android-ocr)。使用测试二，它工作。

# opengl - 无法在启用 OpenGL 深度测试的情况下绘制我的三角形

> ID：12469717
> 
> 赞同：1
> 
> 时间：2012-09-18T02:46:19.100
> 
> 标签：opengl, graphics

我编写了一个程序来绘制一个简单的三角形，我使用 VAO、VBO 和 GLSL 着色器。结果如下：

![在此处输入图像描述](../Images/1099fe3c3f39a080739bdc98bda8c4ea.png)

但是如果我启用深度测试：</p>

```
glEnable(GL_DEPTH_TEST) 
```

窗口中什么也没有出现。

现在我发布我的程序的一些代码：

```
float positionData[] = {
    -0.8f, -0.8f, 0.0f,
    0.8f, -0.8f, 0.0f,
    0.0f,  0.8f, 0.0f };
float colorData[] = {
        1.0f, 0.0f, 0.0f,
        0.0f, 1.0f, 0.0f,
            0.0f, 0.0f, 1.0f };
void initVBO()
{
    // Create and populate the buffer objects
    GLuint vboHandles[2];
    glGenBuffers(2, vboHandles);
    GLuint positionBufferHandle = vboHandles[0];
    GLuint colorBufferHandle = vboHandles[1];

    glBindBuffer(GL_ARRAY_BUFFER,positionBufferHandle);
    glBufferData(GL_ARRAY_BUFFER,9 * sizeof(float),
        positionData,GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER,colorBufferHandle);
    glBufferData(GL_ARRAY_BUFFER,9 * sizeof(float),
        colorData,GL_STATIC_DRAW);

    glGenVertexArrays(1,&vaoHandle);
    glBindVertexArray(vaoHandle);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferHandle);
    glVertexAttribPointer( 0, 3, GL_FLOAT, GL_FALSE, 0, (GLubyte *)NULL );

    glBindBuffer(GL_ARRAY_BUFFER, colorBufferHandle);
    glVertexAttribPointer( 1, 3, GL_FLOAT, GL_FALSE, 0, (GLubyte *)NULL );
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT);

    glBindVertexArray(vaoHandle);
    glDrawArrays(GL_TRIANGLES,0,3);
    glBindVertexArray(0);

    glutSwapBuffers();
} 
```

我的问题是：为什么在启用深度测试后无法绘制三角形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T03:53:40.803

There are multiple (types of) buffers used when rendering, typically. One is the color buffer, which contains the pixel data in some pixel format (IE: RGB with 8 bits for each color channel). Another typical buffer used is the depth buffer. Depth testing and writing to the depth buffer are two different things. Depth testing checks the depth value from a pixel against the depth value of the associated pixel(s) in the depth buffer and decides whether to accept or reject the pixel/fragment. Depth writing actually writes that value to a buffer, such as the depth buffer.

您的程序可能会写入深度缓冲区并测试深度缓冲区，但您永远不会清除深度缓冲区，因此它认为，即使颜色缓冲区已被清除，已经有写入它的东西在/在您尝试写入的像素的前面（或任何配置），因此它会拒绝它们。

通常，每帧清除深度缓冲区。您可以通过将`GL_DEPTH_BUFFER_BIT`标志传递给`glClear`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T02:49:26.830

您还需要显式清除深度缓冲区：

```
 glClear(GL_COLOR_BUFFER_BIT |
                GL_DEPTH_BUFFER_BIT) 
```

# c - 浮点加法 2.5 + 2.5 = 4.0？RPN

> ID：12469719
> 
> 赞同：-3
> 
> 时间：2012-09-18T02:46:28.503
> 
> 标签：c, calculator, rpn

下面的代码是我进行反向波兰符号计算的子程序...基本上是 +、-、* 和 /。程序中的一切正常，除了当我尝试添加 2.5 和 2.5 时，程序给了我 4.0 ......我想我知道为什么，但我不知道如何解决它......现在我正在阅读所有根据此分配的要求从命令行输入数字和运算符，然后获取该字符串并使用 sscanf 从中获取数字...我在想以某种方式包含三个字符'2'，'.'的数组，和'5'，并没有完全转换为浮点数......相反，我认为只是'2'。有人可以看看我的代码并确认或否认这一点，并可能告诉我如何解决它以便我得到正确的答案吗？预先感谢您的任何帮助！

```
float
fsm (char mystring[])
{
  int i = -1, j, k = 0, state = 0;
  float num1, num2, ans;
  char temp[10];
  c_stack top;
  c_init_stack (&top);
  while (1)
    {
      switch (state)
    {
    case 0:
      i++;
      if ((mystring[i]) == ' ')
        {
          state = 0;
        }
      else if ((isdigit (mystring[i])) || (mystring[i] == '.'))
        {
          state = 1;
        }
      else if ((mystring[i]) == '\0')
        {
          state = 3;
        }
  else
    {
      state = 4;
    }
  break;
case 1:
  temp[k] = mystring[i];
  k++;
  i++;
  if ((isdigit (mystring[i])) || (mystring[i] == '.'))
    {
      state = 1;
    }
  else
    {
      state = 2;
    }
  break;
case 2:
  temp[k] = '\0';
  sscanf (temp, "%f", &num1);
  c_push (&top, num1);
  i--;
  k = 0;
  state = 0;
  break;
case 3:
  ans = c_pop (&top);
  if (c_is_empty (top))
    return ans;
  else
    {
      printf ("There are still items on the stack\n");
      exit (0);
case 4:
      num2 = c_pop (&top);
      num1 = c_pop (&top);
      if (mystring[i] == '+'){
          ans = num1 + num2;
        return ans;
    }
      else if (mystring[i] == '-'){
    ans = num1 - num2;
    return ans;
    }
      else if (mystring[i] == '*'){
    ans = num1 * num2;
    return ans;
    }
      else if (mystring[i] == '/'){
          if (num2){
            ans = num1 / num2;
            return ans;
        }
      else{
        printf ("Error: cannot divide by 0\n");
        exit (0);
          }
    }
      c_push (&top, ans);
      state = 0;
      break;
    }
}
}
} 
```

这是我的主要程序：

```
#include <stdio.h>
#include <stdlib.h>
#include "boolean.h"
#include "c_stack.h"
#include <string.h>

int main(int argc, char *argv[])
{
  char mystring[100];
  int i;
  sscanf("", "%s", mystring);
  for (i=1; i<argc; i++){
   strcat(mystring, argv[i]);
   strcat(mystring, " ");
   }
  printf("%.2f\n", fsm(mystring));
  } 
```

这是带有原型的头文件和 c_stack 的定义：

```
#include "boolean.h"

#ifndef CSTACK_H
#define CSTACK_H

  typedef struct c_stacknode{
  char data;
  struct c_stacknode *next;
  } *c_stack;

#endif

void c_init_stack(c_stack *);
boolean c_is_full(void);
boolean c_is_empty(c_stack);
void c_push(c_stack *,char);
char c_pop(c_stack *);
void print_c_stack(c_stack);
boolean is_open(char);
boolean is_brother(char, char);
float fsm(char[]); 
```

响应六个字母变量：

部分任务是在数组中获取一个包含数字和小数的现有字符串，并使用它们创建一个浮点数，这就是我在这些代码行中所做的：

```
case 1:
 temp[k] = mystring[i];
 k++;
 i++;
 if ((isdigit (mystring[i])) || (mystring[i] == '.')) {
 state = 1; } else {
  state = 2;
 }
 break;
 case 2:
 temp[k] = '\0';
 sscanf (temp, "%f", &num1);
 c_push (&top, num1);
 i--;
 k = 0; 
 state = 0;
 break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T03:19:41.980

您的堆栈存储`char`数据：

```
typedef struct c_stacknode{
char data;
struct c_stacknode *next;
} *c_stack; 
```

`char`，根据定义，不存储浮点数据。相反，当您调用 时会发生整数转换`c_push`，截断`2.5`为`2`。

您需要更新 的定义`struct c_stacknode`及其相关方法系列，以支持`float`数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T02:53:27.140

Could you also share the definition of `c_stack`? It looks like it's a stack of integer type, rounding any floating point input down. That way, `2.5 + 2.5 == 4`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:15:38.790

如果您将变量定义为

```
int x=2.5; 
```

和

```
int y=2.5; 
```

后来你做了类似的东西

```
if((x+y)==4.0) 
```

这将是真的。

引擎会将浮点数转换为整数。我猜你正在做这样的事情。

查找变量定义。

# android - Android-在启动期间隐藏操作栏然后再次显示？

> ID：12469721
> 
> 赞同：10
> 
> 时间：2012-09-18T02:46:33.483
> 
> 标签：android, android-actionbar

我的 android 应用程序具有使用操作栏的选项卡导航。它运行良好，但令我困扰的是，在应用程序的第一次启动期间，一个小的默认操作栏会短暂显示，然后被真实的选项卡导航操作栏替换。我的 onCreate 是这样开始的：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
    setContentView(R.layout.activity_main);

    //Set up the actionbar
    final ActionBar actionBar = getActionBar();
.
.
. 
```

我该怎么做才能初始化真正的操作栏，而不会在启动之前短暂显示一个小的默认操作栏？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:47:54.607

启动时隐藏

```
 getSupportActionBar().hide(); 
```

之后你可以再次显示它...

```
 getSupportActionBar().show(); 
```

应该和Android原生的ActionBar一样。

你应该在清单中使用这一行，不要使用 getActionBar()

```
<item name="android:windowActionBar">false</item> 
```

并且一旦在主 Activity 中完成，请在下面使用或不使用

```
<item name="android:windowActionBar">true</item> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-05T19:53:27.760

将此作为您的活动清单定义：

```
 <activity
            android:name=".MyActivity"
             android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            > 
```

然后在您的 oncreate 中执行此操作以显示您要使用的实际主题：

```
setTheme(R.style.AppTheme); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T16:59:37.640

如果您正在使用操作栏 sherlock 并且您想从 FragmentActivity 切换它，那么您调用

```
getSherlockActivity().getSupportActionBar().hide(); 
```

# javascript - 使用 Exports 对象导出对象

> ID：12469723
> 
> 赞同：23
> 
> 时间：2012-09-18T02:47:04.013
> 
> 标签：javascript, oop, node.js

假设我有一个`.js`包含 javascript 对象的文件。我希望能够从`.js`同一目录中的另一个文件访问该对象及其所有功能。我可以简单地将该对象与该对象一起导出，`module.exports`并将`require()`其导出到另一个`.js`文件中吗？如果这是可能的，你能给我举个例子吗？

如果它有帮助，我正在使用节点进行开发。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-18T05:07:55.270

这是我创建模块的方式：

我的模块.js

```
var MyObject = function() {

    // This is private because it is not being return
    var _privateFunction = function(param1, param2) {
        ...
        return;
    }

    var function1 = function(param1, callback) {
        ...
        callback(err, results);    
    }

    var function2 = function(param1, param2, callback) {
        ...
        callback(err, results);    
    }

    return {
        function1: function1
       ,function2: function2
    }
}();

module.exports = MyObject; 
```

并且要在另一个 JS 文件中使用这个模块，您可以`require`像往常一样简单地使用和使用您的对象：

一些文件.js

```
var myObject = require('myModule');

myObject.function1(param1, function(err, result) { 
    ...
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-24T10:44:45.050

当然可以。在我的示例中，我使用 obj 来保存我的配置信息。我把它放在一个名为文件夹的文件`index.js`中`config`。这使得索引成为 I 时选择的首选`import 'config'`。我在这里有 2 个导出，一个用于我的节点和 api 东西，另一个用于我的数据库。您可以忽略我设置环境的第一位。

```
const environment = {
  development: {
    isProduction: false
  },
  production: {
    isProduction: true
  }
}[ process.env.NODE_ENV || 'development' ];

export default Object.assign({
  host: 'localhost',
  port: '3000',
  remoteApi: {
    token: {
      'X-Token': '222222222222222222'
    },
    base: 'https://www.somedomain.com/api'
  }
}, environment);

export const db = {
  dbHost: 'localhost',
  dbPort: 176178
}; 
```

调用`import config from '../config';`将选择默认值。如果我指定我可以得到`db`出口`import { db } from '../config';`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-18T02:52:21.230

在一个文件中：

```
module.exports.myObj = some object...; 
```

在另一个：

```
Obj = require('myFile.js').myObj; 
```

节点上的 js 文件中的所有内容都是该文件的本地文件，除非您将其放在导出对象中。这实际上与浏览器中的 JavaScript 非常不同——在浏览器中，所有导入的文件都像一个大文件一样组合在一起。

您可以考虑节点文件，就好像您正在创建一个模块对象并将其传递给围绕您的代码的函数。

```
module = { 'exports' : {} };
(function(module){
    //your js file
    ...
})(module) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-05T10:40:53.140

我认为最简单的方法：

编写 Person.js：（注意它带有 ctor）

```
module.exports = function (firstName, lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.fullName = function () { 
        return this.firstName + ' ' + this.lastName;
    }
} 
```

并消费它：

```
var person = require('./Person.js');

var person1 = new person('James', 'Bond');

console.log(person1.fullName()); 
```

请注意，在这个简单的解决方案中，所有方法都是“公共的”。

参考：[https ://www.tutorialsteacher.com/nodejs/nodejs-module-exports](https://www.tutorialsteacher.com/nodejs/nodejs-module-exports)

# text - 我试图从 .txt 文件中删除某些文本

> ID：12469724
> 
> 赞同：0
> 
> 时间：2012-09-18T02:47:12.290
> 
> 标签：text, lines

我有 pdf 文件，在页面的右上角和左上角有安全标记，我将它们转换为 .pdb 文件以在我的手机上读取它们，并将安全标记中的内容放入 .pdb 文件中，这样每隔几页就有：

```
PDF Transform

PDF Transform

Y

Y

Y

er

Y

er

B

2

B

2

B

.0

B

.0

A

A

Click here to buy

Click here to buy

w

w

w

w

w .

w

A B B YY.com

.A B BYY.com 
```

我尝试使用将它们转换为多种类型的文件，`calibre`但它显示在所有文件中。

如果我将它们转换为`.txt`文件，任何人都可以制作一个批处理文件来删除多个文件中的这些文本行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:13:15.840

我不确定您使用的是哪个操作系统，但这将适用于 *nix，安装了 SED 的 osx，不确定您是否可以在 Windows 中使用 SED：

```
for filename in *.txt; do sed ${filename} -e '1,20d' -e '/^PDF Transform/,/^A B B YY\.com/d' > newfiles/${filename}; done 
```

如果您知道第 1-20 行是静态的并且位于文件内部的相同位置，则第一个 -e 命令会删除第 1-20 行。第二个 -e 命令将删除 PDF Transform 和 YY.com 之间的所有内容，包括这些行。您可以使用多个或一个 -e 命令来获得所需的内容。它假定 newfiles 文件夹确实存在。我没有对此进行测试，因此正则表达式可能已关闭。

# android - YUV NV21 转换为 RGB 的困惑

> ID：12469730
> 
> 赞同：34
> 
> 时间：2012-09-18T02:48:13.717
> 
> 标签：android, nv12-nv21

根据[http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21](http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21)，NV21 是默认使用的格式。

网上有很多关于 YUV NV21 到 RGB 转换的代码。但是，当我浏览代码时，我怀疑代码的正确性。

**第一个组件 V 应该首先出现，然后是第一个组件 U**

根据[http://wiki.videolan.org/YUV#NV21](http://msdn.microsoft.com/en-us/library/ms867704.aspx#yuvformats_420formats_12bitsperpixel)，`NV21 is like NV12, but with U and V order reversed: it starts with V.`但是，当我通过代码实现时

*   [http://pastebin.com/T0my7zSc](http://pastebin.com/T0my7zSc) - 它假设你是第一位的
*   [https://stackoverflow.com/a/8394202/72437](https://stackoverflow.com/a/8394202/72437) - 它假设 U 也是第一位的
*   [https://stackoverflow.com/a/10125048/72437](https://stackoverflow.com/a/10125048/72437) - 它认为 U 也是第一位的

**R 应该是最重要的位置** 根据[Color.java](http://www.netmite.com/android/mydroid/frameworks/base/graphics/java/android/graphics/Color.java)`int argb`中的实现，R 应该在最重要的位置。但是，我经历了以下代码实现

*   [http://pastebin.com/T0my7zSc](http://pastebin.com/T0my7zSc) - 它假设 R 处于最不重要的位置
*   [https://stackoverflow.com/a/8394202/72437](https://stackoverflow.com/a/8394202/72437) - 它假设 R 是最不重要的位置

**我想知道，他们是在犯常见的错误，还是我忽略了什么？**

目前，我的实现如下。

```
public static void YUV_NV21_TO_RGB(int[] argb, byte[] yuv, int width, int height) {
    final int frameSize = width * height;

    final int ii = 0;
    final int ij = 0;
    final int di = +1;
    final int dj = +1;

    int a = 0;
    for (int i = 0, ci = ii; i < height; ++i, ci += di) {
        for (int j = 0, cj = ij; j < width; ++j, cj += dj) {
            int y = (0xff & ((int) yuv[ci * width + cj]));
            int v = (0xff & ((int) yuv[frameSize + (ci >> 1) * width + (cj & ~1) + 0]));
            int u = (0xff & ((int) yuv[frameSize + (ci >> 1) * width + (cj & ~1) + 1]));
            y = y < 16 ? 16 : y;

            int r = (int) (1.164f * (y - 16) + 1.596f * (v - 128));
            int g = (int) (1.164f * (y - 16) - 0.813f * (v - 128) - 0.391f * (u - 128));
            int b = (int) (1.164f * (y - 16) + 2.018f * (u - 128));

            r = r < 0 ? 0 : (r > 255 ? 255 : r);
            g = g < 0 ? 0 : (g > 255 ? 255 : g);
            b = b < 0 ? 0 : (b > 255 ? 255 : b);

            argb[a++] = 0xff000000 | (r << 16) | (g << 8) | b;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T21:06:07.567

首先，我在图像编码方面不是很有经验（大约一年前对此有一些有限的接触）。所以，对我的回答持保留态度。

不过，我相信你是对的。我认为在他们的代码中 a) V 和 U 都被翻转 b) R 和 B 被翻转

我有一种感觉，当这两个东西都被翻转时，它会产生与它们没有被翻转一样的结果。这就是为什么您可以在许多地方找到错误代码的原因（最初，有人弄错了，然后将其复制到所有地方，因为生成的代码有效（但是，变量命名不正确））。

这是另一个代码示例（与您的代码相同）： [http ://www.41post.com/3470/programming/android-retrieving-the-camera-preview-as-a-pixel-array](http://www.41post.com/3470/programming/android-retrieving-the-camera-preview-as-a-pixel-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:38:12.573

像“最重要位置”这样的术语是模棱两可的，因为它取决于机器的字节序。

当所有数据类型都是 8 位时，有一个简单明确的规范：字节顺序。例如 unsigned char rgba[4]; 会将数据存储为 rgba[0] = r; rgba[1] = g; rgba[2] = b; rgba[3] = a;

或 {r, g, b, a } 无论处理器的字节顺序如何。

如果你这样做了

int32 颜色 = (r << 24) | (g << 16) | (b << 8) | (a << 0);

你会在大端系统上得到 { r, g, b, a }，在小端系统上得到 { a, r, g, b }。您是否在具有异构处理器的系统上工作？就像你有一个 CPU 和一个 GPU 一样？他们怎么知道对方正在使用哪个字节序？你最好定义字节顺序。

# php - jQuery.ajax 文件删除

> ID：12469733
> 
> 赞同：2
> 
> 时间：2012-09-18T02:48:39.053
> 
> 标签：php, jquery, file, delete-file

我有一个 jquery delete 语句，它只删除我的文件上的最新上传（使用 mysql）说我有“文件首先上传”，“文件上传第二个”，“文件最后上传（最新文件）”。如果我点击“第一个或第二个上传的文件”，它会删除最新的（第三个上传的文件）。

```
 $(document).on('click', '.del', function(){
    var sid = $(this).next('.hiddenVid').val();
    $.ajax({
        type: "GET",
        url: "delete.php",
        data: {id:sid}
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:57:21.903

这是你的错误->

```
var sid = "$vid";. 
```

它只会为您输入的最新项目生成 ID。

将一个项目添加到您的 echo 语句，以便您稍后可以在 click 函数中引用它。

在隐藏的输入中添加对 vid 的引用。

**改变这个**

```
$option = "<td><form method='POST'><button type='submit' name='del' class='del'><i class='icon-remove'></i></button></form></td>"; 
```

**对此**：

```
$option = "<td><form method='POST'><button type='submit' name='del' class='del'><i class='icon-remove'></i></button><input type='hidden' class='hiddenVid' value='".$vid."'/></td>"; 
```

现在更改您的点击功能以引用真实的 sid。

```
$(function(){
    $(".del").click(function(){
        var row = $(this).parent();
        var sid = $(this).next('.hiddenVid').val();
        alert(sid);
        $.ajax({
            type: "GET",
            url: "delete.php",
            data: {id:sid}
        });
        return false;
    });
 }); 
```

如果要在更新后返回行，则需要将数据吐回以进行打印，基于上述用于检索行并返回它们的方法，您可以重复使用它。

```
$id = mysql_real_escape_string($_REQUEST['id']);
$DB->Query("DELETE FROM `files` WHERE `id`='$id'");

if(TRUE == (unlink("uploads/$id")):
    $DB->Query("SELECT * FROM `files` WHERE `author`='$username'");
    $file = $DB->Get();
    $obj = new stdClass();
    $i = 0;
    foreach($file as $key => $value){
        $n = $value['name'];
        $vid = $value['id'];
        $date = "<td>".$value['date']."</td>";
        $fname = "<td><a id='$vid' href='download.php?id=$vid'>$n</a></td>";
        $option = "<td><form method='POST'><button type='submit' name='del' class='del'><i class='icon-remove'></i></button></form></td>";
        $size = "<td>".filesize("uploads/".$vid."/".$value['name'])." bytes</td>";
        $obj->$i = $files = "<tr>".$fname.$size.$date.$option."</tr>";
        $i++;
    }
    echo json_encode($obj);
endif; 
```

现在我们需要更改点击处理程序以期望 dataType 并替换表中的现有数据。

```
$(function(){
    $(".del").click(function(){
        var row = $(this).parent();
        var sid = $(this).next('.hiddenVid').val();
        alert(sid);
        $.ajax({
            type: "GET",
            url: "delete.php",
            dataType: 'json',
            data: {id:sid},
            success: function(data){
              $('table').empty();
              $.each(data, function(i,obj){
                  $('table').append(obj);
              }
            }
        });
        return false;
    });
 }); 
```

# tomcat - Tomcat 7 64bit 最大内存使用量

> ID：12469734
> 
> 赞同：3
> 
> 时间：2012-09-18T02:48:48.833
> 
> 标签：tomcat, tomcat7

我正在使用 32 位的 tomcat7。据我所知，它可能管理最大 1GB 内存使用量。我在我的应用程序中使用了缓存数据 (ehcache)，有时它会导致错误“OutOfMemory”，应用程序无法正常工作。我打算用tomcat7 64bit来增加内存，但不知道它最多管理多少GB？我们如何配置改变tomcat的内存？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T06:48:55.207

最大内存量不受tomcat的“限制”，它受JVM +系统架构/操作系统的限制。

有关更多信息，请参阅这些问题/答案：

*   [为内存密集型应用程序增加 JVM 最大堆大小](https://stackoverflow.com/questions/3030263/increasing-the-jvm-maximum-heap-size-for-memory-intensive-applications)
*   [64 位 Java 的最大内存](https://stackoverflow.com/questions/2093679/max-memory-for-64bit-java)

这意味着您必须安装 64 位 java 运行时环境（而不是 64 位 tomcat）。然后在你的 tomcat 启动脚本中调整 -Xmx 设置。参见例如：

*   [Tomcat 常见问题](http://wiki.apache.org/tomcat/FAQ/Memory#Q1)
*   [调整 Tomcat 的内存设置](http://wiki.razuna.com/display/ecp/Adjusting+Memory+Settings+for+Tomcat)

=== 编辑对不起，我有点过时了，有一个预先打包的 Tomcat7 64 位多合一 tomcat for windows。然而，这并不意味着我的回答是错误的。该软件包将仅包含一个 64 位 JRE。使用 64 位系统和 JVM，您将不必担心内存限制很多很多年......

# javascript - Firefox 15 中的 svg:text 元素的宽度似乎始终为零（或 NaN）

> ID：12469737
> 
> 赞同：3
> 
> 时间：2012-09-18T02:49:23.980
> 
> 标签：javascript, charts, svg, d3.js, nan

我正在使用 d3 制作具有多条路径的图表。我在左侧显示路径描述。数据和描述是动态的，因此图例的大小自然也是动态的，因为只要我知道文本的大小（只是对域/范围的微小调整），这没什么大不了的。问题是我看不到在 Firefox 浏览器中查找文本元素大小的简单方法。

以前我是用 jquery 做的，`.width()`但元素上的 clientWidth 为零，这似乎导致返回 NaNpx。

```
...
.on("click", function(){
    alert( $(this).width() ); // NaNpx
})
... 
```

[演示](http://jsfiddle.net/scispear/DzyzX/)：点击单词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:49:23.980

在写这个问题时，我找到了解决方案（但仍然会发布它，因为我花了很长时间搜索，然后才深入到代码示例中）。可能只是因为我这个月是 d3 和 svg 的新手，但是`getBBox()`文本元素（大多数元素）上有一个方法可以生成一个宽度/高度/x/y 的对象（它真的应该用来代替jquery 用于所有 svg 维度）。

希望发布此内容将帮助遇到此问题的其他任何人，因为它对我来说似乎不是很明显。

[演示](http://jsfiddle.net/scispear/DzyzX/2/)

在示例中 the`~~`是一个翻转位运算符，两次实际上将像 Math.floor() 一样工作，但在所有浏览器中可能会更快 then `.floor()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T23:16:11.227

遇到了同样的问题。似乎 Firefox (45.0) 中存在一个错误，即 SVG 内的 <text> 元素宽度始终为 0。

我通过使用 <tspan> 元素（在 <text> 元素内）克服了这个错误，并且似乎 <tspan> 具有正确的文本宽度。

希望能帮助到你。

# angularjs - Angularjs 列表和详细视图

> ID：12469742
> 
> 赞同：4
> 
> 时间：2012-09-18T02:49:57.173
> 
> 标签：angularjs

这是我的基本情况。对于项目列表（摘要视图），我想显示在同一页面上单击的项目的详细信息视图。

我拿了这个 jsfiddle[示例](http://jsfiddle.net/pkozlowski_opensource/65Cxv/7/)并将其转换为这个[jsfiddle](http://jsfiddle.net/ptGWr/8/)。如果您查看该行为，它确实第一次起作用，但并不一致。

也许有人可以帮助我，或者提出更好的方法。我想有一个不同的控制器来管理列表和一个不同的控制器来处理详细视图。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T12:08:21.350

转换示例的一种方法（假设您要使用 ngSwitch）是：

```
<ul ng-controller="ListController">
    <li ng-repeat="item in items" ng-controller="ItemController">
        <div ng-click="open(item)">{{item.content}}</div>        
    </li>
    <hr>
    <ng-switch on="anyItemOpen()">
     <div ng-switch-when="true">
         <div ng-controller="ItemController">
             {{opened.name}}: overlay: tweet, share, pin
         </div>  
         <a ng-click="close()">close</a>         
     </div>
    </ng-switch>   
</ul> 
```

这里是工作 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/sJdzt/4/](http://jsfiddle.net/pkozlowski_opensource/sJdzt/4/)

您的 jsFiddle 不起作用，因为您试图引用`item`在 ngRepeat 范围内创建的引用（因此在 ngRepeat 之外不可用）。

# firefox - Firefox 扩展，从菜单的新前台选项卡中打开本地文件

> ID：12469743
> 
> 赞同：0
> 
> 时间：2012-09-18T02:50:07.287
> 
> 标签：firefox, firefox-addon, xul

我正在学习如何编写 Firefox 扩展程序。我创建了一个新菜单，当单击菜单项时，我希望在前台打开一个新选项卡，其中包含内容目录中包含的本地文件。

例如：

菜单 -> 项目 1

选择 Item1 后，我希望在前台打开一个新选项卡，其中包含 /myextension/content/content.html 中的内容。

我在哪里可以找到如何做到这一点？

* * *

为了清楚起见，我可以让本地文件在新选项卡中打开，我只是不知道如何在新的焦点选项卡中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:30:40.960

I use the following function to open a tab, make sure it hasn't already been opened and switch focus to it:

```
function OpenAndReuseOneTabPerURL(url)
{

    var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);
    var browserEnumerator = wm.getEnumerator("navigator:browser");

    // Check each browser instance for our URL
    var found = false;
    while (!found && browserEnumerator.hasMoreElements())
    {
        var browserWin = browserEnumerator.getNext();
        var tabbrowser = browserWin.gBrowser;

        // Check each tab of this browser instance
        var numTabs = tabbrowser.browsers.length;
        for (var index = 0; index < numTabs; index++)
        {

            var currentBrowser = tabbrowser.getBrowserAtIndex(index);
            if (url == currentBrowser.currentURI.spec)
            {

                // The URL is already opened. Select this tab.
                tabbrowser.selectedTab = tabbrowser.tabContainer.childNodes[index];

                // Focus *this* browser-window
                browserWin.focus();

                found = true;
                break;

            }

        }

    }

    // Our URL isn't open. Open it now.
    if (!found)
    {

        var recentWindow = wm.getMostRecentWindow("navigator:browser");
        if (recentWindow) {

            // Use an existing browser window
            recentWindow.delayedOpenTab(url, null, null, null, null);

        } else {

            // No browser windows are open, so open a new one.
            window.open(url);

        }

    }

}

```

Use it like:

`OpenAndReuseOneTabPerURL("http://yoururl.com");`

# performance - Sybase - 索引现有表时的性能注意事项

> ID：12469753
> 
> 赞同：4
> 
> 时间：2012-09-18T02:51:13.587
> 
> 标签：performance, indexing, sybase

我在 SYBASE 中有一个大约 1mio 行的表。此表当前没有创建任何索引，我现在想创建一个。我的问题是

1.  在创建索引之前我应该​​采取哪些预防措施？
2.  这个过程是否需要分配更多的表空间？
3.  我应该注意的任何其他性能注意事项？

干杯

兰吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:19:22.060

1.  从[手册](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/35969;pt=35883)。

    何时索引

    使用以下一般准则：

    *   如果您计划手动插入 IDENTITY 列，请创建唯一索引以确保插入不会分配已使用的值。

    *   经常按排序顺序访问的列，即在 order by 子句中指定的列，可能应该被索引，以便 Adaptive Server 可以利用索引顺序。

    *   经常在连接中使用的列应该总是被索引，因为如果列按排序顺序，系统可以更快地执行连接。

    *   存储表的主键的列通常有一个聚集索引，特别是如果它经常连接到其他表中的列。请记住，每个表只能有一个聚集索引。

    *   经常搜索值范围的列可能是聚集索引的不错选择。一旦找到具有范围内第一个值的行，就保证具有后续值的行在物理上是相邻的。聚集索引对单个值的搜索没有那么大的优势。

    何时不索引

    在某些情况下，索引没有用：

    *   查询中很少或从不引用的列不会从索引中受益，因为系统很少需要根据这些列中的值来搜索行。

    *   只能有两个或三个值的列，例如“男性”和“女性”或“是”和“否”，从索引中没有真正的优势。

2.  尝试

    `sp_spaceused tablename, 1`

    [这](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sprocs/html/sprocs/sprocs204.htm)是文档的链接。

3.  是的 - `Updating statistics about indexes`。

    [这](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/37166;lang=pl#X)是文档的链接。

# ruby-on-rails-3 - RoR：“nil”不是返回有效部分路径的 ActiveModel 兼容对象

> ID：12469755
> 
> 赞同：0
> 
> 时间：2012-09-18T02:51:26.577
> 
> 标签：ruby-on-rails-3

好的，所以我试图根据 hidden_​​tag_field 在两个不同的地方显示用户微帖子，该字段是数据库中名为 kind 的列。这种要么是“代购”，要么是“微博”。

app/views/users/show.html.erb （我希望显示两个列表）

```
<section>
        <div id= "purchases">
          <%= render 'shared/micropost_form_purchase' %>
          <div class="row">

          <div class="span8">

            <% if @user.microposts.any? %>

              <ol class="microposts">
                <%= render @purchases %>
              </ol>

            <% end %>
          </div>
          </div>

        </div>
        <div id="sales">
          <% if @user.microposts.any? %>
            <ol class="microposts">
              <%= render @sales %>
            </ol>
          <% end %>
        </div>
          </section> 
```

然后在 app/controllers/microposts.rb

```
def show

    @microposts= Micropost.all
    @purchases = @microposts.where(:kind => "purchase")
    @sales = @microposts.where(:kind => "sale")

  end 
```

错误出现在@purchases 和@sales。最后是 app/views/microposts/_micropost.html.erb

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>
</li> 
```

这是错误：

```
Completed 500 Internal Server Error in 11ms

ActionView::Template::Error ('nil' is not an ActiveModel-compatible object that returns a valid partial path.):
    12:             <% if @user.microposts.any? %>
    13:             <h3>Purchases I am interested in (<%= @user.microposts.count %>)</h3>
    14:               <ol class="microposts">
    15:                 <%= render @purchases %>
    16:               </ol>
    17:               
    18:             <% end %>
  app/views/users/show.html.erb:15:in `_app_views_users_show_html_erb__315023603463182203_22059740' 
```

# mysql - 将 MYSQL 列导出到没有标题的纯 txt 文件

> ID：12469756
> 
> 赞同：1
> 
> 时间：2012-09-18T02:51:41.100
> 
> 标签：mysql, linux, cron, export

所以我要做的是编写一个脚本或 CRON 作业（Linux-CentOS）来将我的 wordpress 数据库中列出的用户名导出到一个简单的 .txt 文件，每行只有一个用户名。因此，对于图片，我希望 .txt 文件如下所示：

*   Sir_Fluffulus
*   忍者X007

（除了 user_login 列中的所有用户名。）

见截图：

![](../Images/e8f1b9624cd7bda00c97aa464e46ece2.png)

我已经找到了如何将整个表格导出到 CVS 文件的方法，但是其中包含大约 10 多个字段（列），我没有在这个文本文件中显示什么。谁能指出我如何做到这一点的正确方向？

如果有帮助，这将用于将在我们的网站 (Wordpress) 上注册的用户导出到 Minecraft 的 whitelist.txt 文件。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:59:34.123

将查询传递到`mysql`工具中，并使用静默模式。

```
$ mysql -u username dbname -s <<< 'SELECT fieldname FROM tablename'
Sir_Fluffulus
NunjaX007 
```

# bios - 在 ROM 发明之前，BIOS 存储在哪里？

> ID：12469762
> 
> 赞同：1
> 
> 时间：2012-09-18T02:52:33.210
> 
> 标签：bios, bootstrapping

我想知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:09:53.747

有一个非常简单的解决方案。ROM是最先发明的。

来自[维基百科](http://en.wikipedia.org/wiki/Read-only_memory)：“最简单的固态 ROM 与半导体技术本身一样古老。”

早在 ENIAC 之前的计算机就使用 ROM 来存储功能。BIOS 的概念——更简单地说，一个引导加载程序——在计算机公开可用之前是没有必要的，此时 ROM 已经存在了几十年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:09:11.467

据我所知，eproms 存在于磁性介质之前，eproms 是存储 BIOS 的内容。并且仍然以更复杂的形式存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:07:11.077

在最早的计算机中，有一个带有拨动开关的前面板，用于输入机器代码以启动并运行它，这样它就可以与磁带或打孔卡对话。

[http://en.wikipedia.org/wiki/Front_panel](http://en.wikipedia.org/wiki/Front_panel)

# wcf - 如果我在 IIS 7.0 中托管 NetTcpBinding WCF 服务

> ID：12469763
> 
> 赞同：0
> 
> 时间：2012-09-18T02:52:41.517
> 
> 标签：wcf

我有个小问题，

1.  如果我在 IIS 7.0 中托管 NetTcpbinding WCF 服务并且我想从客户端应用程序调用此服务，那么这将使用什么格式进行通信..??

2.  是否有任何规则说，所有 NetTcpbinding 不应该托管在 IIS 上，而是必须托管在控制台应用程序或 Windows 服务上..？

3.  什么时候我想去 TcpNet 绑定..??

4.  假设，我有两个端点，一个用于 WsHttpbinding，另一个是 NetTcpbinding，并在 IIS 中部署服务，那么如果我想从客户端应用程序使用 NetTcp 端点，那么如何..?? 这是正确的做法吗...？？在这种情况下...

谢谢，苏克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:35:04.753

NetTcpBinding 类信息：

[http://msdn.microsoft.com/en-us/library/ms576421.aspx](http://msdn.microsoft.com/en-us/library/ms576421.aspx)

1.  从评论中引用：

    > NetTcpBinding 默认生成一个运行时通信堆栈，它使用传输安全、TCP 进行消息传递和二进制消息编码。此绑定是适当的 Windows Communication Foundation (WCF) 系统为通过 Intranet 进行通信提供的选择。

引号表示客户端-服务器连接是通过 TCP 建立的，用于发送以二进制编码的 SOAP 消息。

2\. 没有。甚至还有一篇关于如何做到这一点的不错的博客文章：

[http://blogs.msdn.com/b/santhoshonline/archive/2010/07/01/howto-nettcpbinding-on-iis-and-things-to-remember.aspx](http://blogs.msdn.com/b/santhoshonline/archive/2010/07/01/howto-nettcpbinding-on-iis-and-things-to-remember.aspx)

3\. 返回班级信息：

> 更一般地说，HTTP 系统提供的绑定（如 WSHttpBinding 和 BasicHttpBinding）默认配置为开启，而 NetTcpBinding 绑定默认关闭，因此您必须选择加入以获得支持，例如， WS-* 规范。这意味着 TCP 的默认配置在端点之间交换消息时比默认情况下为 HTTP 绑定配置的更快。

这意味着由于预期的附加协议层（http 层和 WS-* 规范层），此绑定不会执行 basicHttpBinding 和 WSHttpBinding 所做的所有更高级别的处理。因此，这是一种更高性能的绑定配置，可以让您在服务消息回复中获得更快的周转时间，但代价是丢失您的 http 层（客户端不能再只是将 HTTP POST 肥皂信封发送到您的服务）。

4\. 我会设置两个独立的服务端点（一个 TCP 和一个 WSHttp）实现相同的接口。然后您可以在客户端设置两个客户端配置项，它们再次使用不同的绑定配置但调用相同的接口。然后你可以加载任何一个。

```
<client>          
<endpoint name="WSEndpoint" address="http://address/WSEndpoint.svc" binding="WSHttpBinding" contract="Your.Contract.Namespace"/>
<endpoint name="TCPEndpoint" address="http://address/TCPEndpoint.svc" binding="NetTcpBinding" contract="Your.Contract.Namespace"/>
</client> 
```

# c++ - Linux execlp in C++

> ID：12469765
> 
> 赞同：0
> 
> 时间：2012-09-18T02:52:58.827
> 
> 标签：c++, linux, system-calls

It is my first time with Linux, and I need to use this

```
execlp("/usr/bin/wget", "wget", <URL STRING1>, NULL) system call in C++ code, 
```

I cannot find anywhere how it should be written in C++, need some help.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:57:56.390

```
execl("/usr/bin/wget","wget","http://stackoverflow.com/",NULL); 
```

should do the job.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:05:38.083

包括`unistd.h`

```
#include <unistd.h> 

int main() {
    execlp("/usr/bin/wget", "wget", "http://www.google.com", NULL);

    return 0;
} 
```

# c# - 通过 TCP 发送多个图像？

> ID：12469766
> 
> 赞同：0
> 
> 时间：2012-09-18T02:53:13.023
> 
> 标签：c#, android, tcp

我正在使用`Android`和`.Net(C#)`。我想通过将一些图像（png）从`Android`PC 发送到 PC，`TCP socket`但 PC 始终只接收 1 张图像。请帮我！

**Android代码**（这段代码在一个方法里面，我调用了很多次）：

```
 outputStream = socket.getOutputStream();
    File f = new File(filePath);

    byte[] buffer = new byte[(int) f.length()];
    FileInputStream fis = new FileInputStream(f);
    BufferedInputStream bis = new BufferedInputStream(fis);
    bis.read(buffer, 0, buffer.length);
    outputStream.write(buffer, 0, buffer.length);
    outputStream.flush();
    outputStream.close(); 
```

**C# 代码**（我也多次调用此代码来获取图像）：

```
 Socket s = 
        new Socket(
        AddressFamily.InterNetwork, 
        SocketType.Stream, 
        ProtocolType.Tcp);
    s.Connect(new IPEndPoint(IPAddress.Parse(txtIPAddress.Text), 8002));
    Bitmap bitmap = new Bitmap(new NetworkStream(s)); 
```

更新：我的 android 应用程序将按时间进行屏幕截图，然后转移到 PC 代理查看。因此，为每个捕获的图像创建单独的套接字时很不方便。对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:55:24.613

您当前的设计可能只处理一张图像。请设计您的协议格式。例如，

不。图像 n（4 字节），长度 1（4 字节），图像数据 1（N1 字节），长度 2，图像数据 2（N2 字节），...，长度 n（4 字节），图像数据 n（Nn 字节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:07:59.593

您一次只能将一个图像写入流并关闭它。根据提示 android 发送图像的方式，您可能会重新开始该过程，并且只会一次又一次地写入相同的第一个图像。

您可以尝试 linquize 的解决方案并做出一个您发送的大响应，或者您可以尝试添加某种变量来告诉 android 要写入哪个图像。然后您应该能够将每个图像写入单独的写入。

# actionscript-3 - get skew or rotation value from affine transformation matrix

> ID：12469770
> 
> 赞同：4
> 
> 时间：2012-09-18T02:53:32.047
> 
> 标签：actionscript-3, flash, math

I'm trying to get the skew values out of a transformation matrix in a flash movie clip. The transformation matrix is represented by

```
a b tx
c d ty
0 0 1 
```

I have no information on what kind of transformation is performed and which comes first. I do know that in flash, you may only rotate OR skew a movie clip (correct me if I am wrong). I can get scale values from scaleX and scaleY properties of the movie clip. I believe translation does not quite matter i can just equate tx and ty to zero.

so my question has 2 parts. How do I determine if a skew or a rotation had been applied, and how do I get the respective values?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-23T05:03:07.597

您需要进行极性分解。这篇维基百科文章解释了它是如何工作的： [http](http://en.wikipedia.org/wiki/Polar_decomposition) ://en.wikipedia.org/wiki/Polar_decomposition 这是我使用 OpenCV 库为我自己的程序编写的代码。

```
const double PI = 3.141592653;
    cv::Mat rotationOutput = cv::Mat::zeros(warp00.size(),CV_64F);
    cv::Mat_<double>::iterator rotIter = rotationOutput.begin<double>();
    cv::Mat_<double>::iterator warp00Iter = warp00.begin<double>();
    cv::Mat_<double>::iterator warp01Iter = warp01.begin<double>();
    cv::Mat_<double>::iterator warp10Iter = warp10.begin<double>();
    cv::Mat_<double>::iterator warp11Iter = warp11.begin<double>();

    for(; warp00Iter != warp00.end<double>(); ++warp00Iter, ++warp01Iter, ++warp10Iter,
        ++warp11Iter, ++rotIter){
        cv::Matx22d fMatrix(*warp00Iter,*warp01Iter, *warp10Iter, *warp11Iter);
        cv::Matx22d cMatrix;
        cv::Matx22d cMatSqrt(0.,0.,0.,0.);
        cv::mulTransposed(fMatrix, cMatrix, true);
        cv::Matx21d eigenVals;
        cv::Matx22d eigenVecs;
        if((cMatrix(0,0) !=0.) && (cMatrix(1,1) !=0.)){
            if(cv::eigen(cMatrix,true,eigenVals,eigenVecs)){
                cMatSqrt = eigenVecs.t()*
                        cv::Matx22d(sqrt(eigenVals(0,0)),0.,0.,sqrt(eigenVals(1,0)))*eigenVecs;
            }
        }
        cv::Matx22d rMat = fMatrix*cMatSqrt.inv();
        *rotIter = atan(rMat(1,0)/rMat(0,0));

    }
```

warp00、warp01、warp10 和 warp11 包含仿射变换的前 4 个参数（不需要平移参数 warp02 和 warp12）。在您的情况下，它将是 a,b,c,d。您会在维基百科文章中注意到您需要计算矩阵的平方根。这样做的唯一方法是计算特征值，然后计算它们的平方根并将对角矩阵旋转回原始坐标系。这很复杂，但是当您进行仿射变换时，这是计算旋转的唯一方法。就我而言，我只关心旋转，所以我的代码不会给你带来偏差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T23:24:47.627

二维旋转矩阵是

```
cos(theta) -sin(theta)
sin(theta)  cos(theta) 
```

所以*如果*你没有应用缩放或剪切，

```
 a = d
and
   c = -b
and the angle of rotation is
   theta = asin(c) = acos(a) 
```

如果您应用了缩放并且可以恢复缩放因子 sx 和 sy，只需将原始变换矩阵中的第一行除以 sx，将第二行除以 sy，然后如上所述恢复旋转角度。

如果您在那里的任何地方都应用了剪切（倾斜），我和以前的评论者在一起，除非在非常有限的情况下（例如一次仅在一个已知方向上以已知顺序剪切），否则可能是不可能的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-19T20:09:10.490

The term for this is *matrix decomposition*. Here is a solution that includes skew as described by [Frédéric Wang](http://frederic-wang.fr/decomposition-of-2d-transform-matrices.html).

Works when transforms are applied in this order: skew, scale, rotate, translate.

```
function decompose_2d_matrix(mat) {
  var a = mat[0];
  var b = mat[1];
  var c = mat[2];
  var d = mat[3];
  var e = mat[4];
  var f = mat[5];

  var delta = a * d - b * c;

  let result = {
    translation: [e, f],
    rotation: 0,
    scale: [0, 0],
    skew: [0, 0],
  };

  // Apply the QR-like decomposition.
  if (a != 0 || b != 0) {
    var r = Math.sqrt(a * a + b * b);
    result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);
    result.scale = [r, delta / r];
    result.skew = [Math.atan((a * c + b * d) / (r * r)), 0];
  } else if (c != 0 || d != 0) {
    var s = Math.sqrt(c * c + d * d);
    result.rotation =
      Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));
    result.scale = [delta / s, s];
    result.skew = [0, Math.atan((a * c + b * d) / (s * s))];
  } else {
    // a = b = c = d = 0
  }

  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T07:11:35.480

首先，您可以同时进行倾斜和旋转，但您必须先选择顺序。[这里](http://www.actionscript.org/forums/showpost.php3?p=943252&postcount=3)解释了一个倾斜矩阵，要将一个倾斜矩阵添加到一个转换中，您可以创建一个新矩阵并执行`yourTransformMatrix.concat(skewMatrix);`

我目前不能说您是否可以根据“旋转角度”、“skew_X 角度”、“skew_Y 角度”、“translation_X”、“translation_Y”检索变换值，这通常是一个非线性方程组，可能不会有一个特定矩阵的解决方案。

# ruby-on-rails - Rails - Client Side Validations - Force server side evaluation

> ID：12469773
> 
> 赞同：1
> 
> 时间：2012-09-18T02:54:19.673
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, validation, ruby-on-rails-3.2

I am using client side validations with simple form in a rails 3.2.7 app, with the following Gemfile and validations (snippets).

```
# Gemfile
gem 'simple_form'
gem 'client_side_validations' # Javascript/Ajax validations
gem 'client_side_validations-simple_form'

# user.rb
validates :name, presence: true, 
                 uniqueness: true,
                 format: { with: /^[\p{L}]{3,15}$/iu } 
```

For whatever reason, the javascript doesn't appear to be evaluating the regex properly, because I am always getting the "format" message (it's in my I18n file). However, when I disable the client_side_validations and submit the form, the validation passes.

The reason I am using p{L} is because I need to support French characters.

Ideally, I'd like to force server side evaluation (through ajax, similar to how the uniqueness check works), but I haven't found a way to do so.

Any suggestions? This doesn't have to be perfect, if there is some work-around where I can get close to the desired functionality I would be happy (i.e. is there any way to override the validation and maybe do something like /[.]{3,15}/).

Much appreciated!

# c - 读取标志和文件的命令行参数 C

> ID：12469775
> 
> 赞同：1
> 
> 时间：2012-09-18T02:55:06.187
> 
> 标签：c, word-count

你好，我是 C 新手，我正在尝试开始这个实验，其中命令语法是首先列出所有命令行标志，然后列出一个或多个文件名。

我在组织如何扫描输入参数以及区分标志和文件名时遇到了麻烦。

我想过做一个循环来查看参数是标志还是文件名。但我不确定如何开始实施它。由于前 4 个参数可以是任何顺序的潜在标志，因此后面的任何内容都是文件名。但也有可能不给出标志而只以文件名开头。我根本不知道如何初始化这个循环以逐个遍历每个参数。有人可以帮忙吗？

可能的命令行参数示例：

```
wc fcopy.c head.c (no flags given just file names)
wc -l -c -w -L fcopy.c head.c a.exe (flags given and multiple files)
wc -l -w -c -L fcopy.c (flags given and 1 file name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:06:01.340

您可以使用[getopt()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getopt.html)

检查这些问题：
[解析命令行参数？](https://stackoverflow.com/questions/9642732/parsing-command-line-arguments)[在C/UNIX 的参数解析助手中](https://stackoverflow.com/questions/189972/argument-parsing-helpers-for-c-unix)
[处理参数前后的命令行选项](https://stackoverflow.com/questions/7066822/handling-command-line-options-before-and-after-an-argument-in-c)[Getopt shift optarg](https://stackoverflow.com/questions/10058669/getopt-shift-optarg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T03:06:48.793

签出`getopt`，它允许您解析命令行参数及其标志：

```
#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main (int argc, char **argv)
{
  int aflag = 0;
  int bflag = 0;
  char *cvalue = NULL;
  int index;
  int c;

  opterr = 0;

  while ( (c = getopt (argc, argv, "abc:")) != -1 )
    switch (c) {
      case 'a':
        aflag = 1;
        break;
      case 'b':
        bflag = 1;
        break;
      case 'c':
        cvalue = optarg;
        break;
      case '?':
        if (optopt == 'c')
          fprintf (stderr, "Option -%c requires an argument.\n", optopt);
        else if (isprint (optopt))
          fprintf (stderr, "Unknown option `-%c'.\n", optopt);
        else
          fprintf (stderr,
                   "Unknown option character `\\x%x'.\n",
                   optopt);
        return 1;
      default:
        abort ();
      }

  printf ("aflag = %d, bflag = %d, cvalue = %s\n",
          aflag, bflag, cvalue);

  for (index = optind; index < argc; index++)
    printf ("Non-option argument %s\n", argv[index]);
  return 0;
} 
```

[使用 getopt 解析参数的示例](http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T03:16:55.167

一个一个地读取命令行参数非常简单：

```
int main( int argc, // Number of strings in array argv char *argv[]) 
```

C 函数的两个基本参数是 argc（参数的整数）和 argv（参数的字符串数组）

第一个字符串始终是正在运行的程序的名称，之后是通过命令行传递的参数。

```
if(argc > 1)
    for( count = 1 count < argc; count++ )
        printf("%s", argv[count]); 
```

将在屏幕上显示通过调用程序名称传递的每个参数。我假设您的标志以“-”作为第一个字符传递？如果是这样，您可以检查每个字符串中第一个字符的内容是否有“-”来判断它是否是标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T03:05:49.783

另请参阅[http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html](http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html)

# android - Android WebView not maintaining history

> ID：12469778
> 
> 赞同：4
> 
> 时间：2012-09-18T02:55:14.580
> 
> 标签：android, android-webview

I have a webview inside of a Fragment and when I click on a link it takes to to the next page, however clicking the back button does not take me back to the prior page. When I examine the canGoBack it is always false.

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    gameDetailsActivity = (GameDetailsActivity)getActivity();

    Bundle args = getArguments();
    int type = args.getInt(ARG_OBJECT);
    View rootView = null;

    rootView = inflater.inflate(R.layout.gamedetailswebview,
            container, false);

    wv = (WebView) rootView.findViewById(R.id.WebViewGameDetails);

    wv.setWebViewClient(new WebViewClient());
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginState(WebSettings.PluginState.ON_DEMAND);
    wv.getSettings().setBuiltInZoomControls(true); 
    wv.getSettings().setSupportZoom(true);
    wv.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
    wv.getSettings().setAllowFileAccess(true); 
    wv.getSettings().setDomStorageEnabled(true);

    switch (type)
    {
        case 1:
            wv.loadUrl(gameDetailsActivity.gameSummaryURL);
            break;
        case 2:
            wv.loadUrl(gameDetailsActivity.gameReportURL);
            break;
    }

    return rootView;
}

public boolean GoBack()
{
    if (wv.canGoBack())
    {
        wv.goBack();
        return true;
    }

    return false;
}

@Override
public void onBackPressed()
{
    int currentFragmentIndex = gameDetailsViewPager.getCurrentItem();

    if (currentFragmentIndex > 0)
    {
        Fragment webview = gameDetailsPagerAdapter
                .getItem(currentFragmentIndex);
        if (webview instanceof GameDetailsWebViewFragment)
        {
            if (!((GameDetailsWebViewFragment) webview).GoBack())
            {
                super.onBackPressed();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:11:13.467

我认为你应该像这样`wv.setWebViewClient(new WebViewClient())` 扩展`WebViewClient`、覆盖而不是你`shouldOverrideUrlLoading()`

```
 @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    } 
```

# php - Amazon s3 php 安全删除对象

> ID：12469779
> 
> 赞同：0
> 
> 时间：2012-09-18T02:55:22.833
> 
> 标签：php, api, class, file-upload, amazon-s3

我允许我的用户删除他们上传的图像，但随后可以通过更改图像名称轻松删除属于其他用户的图像。

下面是我用于删除图像的工作代码...用户图像是使用用户名前缀获取的，例如`joe/some_image.jpg`，用户使用复选框选择要删除的图像。

```
//images to be deleted
$images = array("joe/angry_robot.jpg", "joe/baby_with_mustache.jpg");

//create multidimensional array to use in class
foreach($images as $key => $value)
{
    $array[] = array(
        'key' => $value
    );
}

$this->load->library('awslib');

//initiate the class
$s3 = new AmazonS3();

$bucket = 'my_bucket';

$response = $s3->delete_objects ($bucket, array(
    'objects' => $array
));

// Success?
var_dump($response->isOK()); 
```

S3 中有哪些解决方案可用于安全删除存储桶中的对象？我正在寻找某种用户身份验证方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:19:03.617

维护每个用户拥有的文件的列表。

```
class User
{
  // yourproperties

  // array of owned images
  private $images;

  public function addImage($image)
  {
      $this->images[] = $image;
  }

  public function ownsImage($image)
  {
      return in_array($image, $this->images);
  }

  public function removeImage($image)
  {
      if( ( $key = array_search($image, $this->images) ) !== false ) { 
          unset($this->images[$key]);
          return true;
      }
      return false;
  }
} 
```

然后.... `if( $user->ownsImage($imageToDelete) ) { // proceed } else { // not authorized }`

以您处理持久性的任何方式将该数组映射到您的数据库。

或者在您的应用程序中以任何其他方式执行此操作。最终用户的授权不应由 S3 处理。

# silverlight - Silverlight 中的数据驱动应用程序

> ID：12469780
> 
> 赞同：0
> 
> 时间：2012-09-18T02:55:32.480
> 
> 标签：silverlight

我正在尝试使用一个 DataGrid 和类在 Silverlight 中创建简单的数据驱动应用程序。我无法将数据显示到 Datagrid 中。

这是我的代码，

```
 <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn Binding="{Binding Name}" Header="Item Name"/>
            <sdk:DataGridTextColumn Binding="{Binding Barode}" Header="Barcode"/>
            <sdk:DataGridTextColumn Binding="{Binding Price}" Header="Price"/>
            <sdk:DataGridTextColumn Binding="{Binding Cost}" Header="Cost"/>
            <sdk:DataGridTextColumn Binding="{Binding Stock}" Header="Stock"/>
            <sdk:DataGridTextColumn Binding="{Binding Department}" Header="Department"/>
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

这是我的课，

```
public ItemDetails()
    {
        _itemDetails = new ObservableCollection<ItemInf> 
        {
            new ItemInf {Barcode = "123456",Name = "12Pk Corona Extra",Price = 16.00, Cost = 15.99, Stock = 23, Department = "Beer"},
            new ItemInf {Barcode = "234567",Name = "6Pk Corona Extra",Price = 7.99, Cost = 5.99, Stock = 29, Department = "Beer"},
        };            
    } 
```

任何人都可以帮助我在哪里犯错或我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:18:24.617

您是否将数据网格的数据源/数据上下文分配给您班级的公共财产？

例如

```
mydatagrid.ItemsSource= ItemsDetailsInstance.itemcollection property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:06:17.817

不要忘记 `AutoGenerateColumns="False"`为您设置数据网格。

# c - Does copy_from_user modify the user pointer?

> ID：12469782
> 
> 赞同：2
> 
> 时间：2012-09-18T02:55:39.440
> 
> 标签：c, linux, linux-kernel, linux-device-driver

Does the copy_from_user function, declared in uaccess.h, modify the (void __user *)from pointer? The pointer isn't declared as const in the function declaration, only the contents it points to.

The reason I ask is that I want to use copy_from_user twice, with the second copy_from_user copying from the place where the first one finished.

I was planning on doing something like this, is it guaranteed to work?

```
//buf is a user pointer that is already defined
copy_from_user(my_first_alloced_region, buf, some_size);
//do stuff
copy_from_user(my_second_alloced_region, buf + some_size, some_other_size); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:59:56.440

被调用函数不能修改指针本身，因为您只是将指针值作为参数传递给函数。如果参数被声明为指向`const`类型的指针，那么被调用者也不能修改所指向的内容（至少在没有会抛弃`const`指针的 -ness 的强制转换的情况下不能修改）。修改调用者本身的指针值的唯一方法是向被调用者传递一个指针到指针的类型。

# c# - are APM and EAP are obsolete now after .NET 4.5 is released?

> ID：12469783
> 
> 赞同：2
> 
> 时间：2012-09-18T02:55:48.777
> 
> 标签：c#, c#-4.0

are APM (Asynchronous programming model) and EAP ( Event based asynchronous programming) are obsolete after the release of .net 4.5 and the current release of c# with TPL based async and await paradigm in VS2012?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:23:05.047

它们并没有过时，因为您仍然需要使用这些模式来支持 .NET 4 和更低版本的应用程序。不过，对于 .NET 4.5，是否使用新的异步功能应该不是问题。去做吧，因为它很棒。

# javascript - jqGrid changes focus to an element at the top of the page

> ID：12469785
> 
> 赞同：0
> 
> 时间：2012-09-18T02:55:55.470
> 
> 标签：javascript, jquery, jqgrid

I'm having trouble with editable jqGrid's behavior when jqGrid becomes long. Clicking on non-editable cells and submitting edited cells brings the user to the top of the grid. Randomly clicking around would produce tons of unpredictable results. The element that gets focused is set to "top:-1000000px". What would be a good resoultion for this? Is there a way to override the `focus` event on this element?

```
<script type="text/javascript">
function populateTable(table) {
    for(i = 0; i < 1000; i++) {
        table.addRowData(i, {key:'Lorem', value:'Ipsum'});
    }
}

$(document).ready(function() {
    $("#grid").jqGrid({
        datatype : "local",
        colNames : ["Key", "Value"],
        colModel: [
         {name:'key', index:'lever', width:500, editable: true},
         {name:'value', index:'defaultcpm', width: 100, editable: true},
        ],
        height: 'auto',
        cellEdit: true,
        cellSubmit: 'clientArray'
    });
    populateTable($("#grid"));
});
</script>
</head>
<body>
<table id="grid"></table>
</html> 
```

Edit: I suppose I was not specific enough. I do not want focus change after edits. The following code fixes it, but has side effects if any non-grid `HTMLDivElement` receives a focus event.

```
HTMLDivElement.prototype.focus = function() {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:05:27.873

如果要设置焦点，colModel 中的单元格应该是可编辑的。也尝试粘贴这个

`$("#grid").jqGrid('editCell', 1, 1, true);`在你的代码中。

它将焦点放在第一行第一列

# javascript - How to make sure that click handler is only registered once?

> ID：12469789
> 
> 赞同：0
> 
> 时间：2012-09-18T02:56:36.363
> 
> 标签：javascript, jquery

I have this piece of code:

```
function expandCollapse(hypId, ElemId, ShowText, HideText) {
    var handler = function () {
        $("#" + ElemId).toggle();
        toggle(hypId, ElemId, ShowText, HideText);
    }

    $('#' + hypId).live('click', handler);

} 
```

I want to make sure that no matter if this code is called for >1 time, it shouldn't do anything as long as the same hypId is being registered for click event. How do I do that?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:05:08.860

几件事：

1：你不应该使用`live()`，它[已被弃用](http://api.jquery.com/category/deprecated/)。

2：处理这种情况的最简单方法（如果在展开/折叠时元素就在附近）是使用命名空间。所以像这样：

```
function expandCollapse(hypId, ElemId, ShowText, HideText) {
    var handler = function () {
        $("#" + ElemId).toggle();
        toggle(hypId, ElemId, ShowText, HideText);
    }

    $('#' + hypId).off('click.mynamespace').on('click.mynamespace', handler);
} 
```

替换`mynamespace`为您选择的与相关处理程序相关的内容。这样，它将在使用新选项重新添加处理程序之前删除它可能已附加的任何现有处理程序，而不会影响可能存在的[任何其他处理程序。](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:26:42.780

```
$('#' + hypId).one('click', handler); 
```

# javascript - Trigger an asp:button click event using javascript

> ID：12469795
> 
> 赞同：0
> 
> 时间：2012-09-18T02:57:39.897
> 
> 标签：javascript, jquery, click, aspbutton

I am currently working on a project which needs to trigger an asp:button click event after doing a series of events in a javascript code.

Please see my codes below:

This is my button and it's click event:

```
<asp:Button ID="btnRefresh" name="btnRefresh" runat="server" Text="btnRefresh" onclick="btnRefresh_Click" />

protected void btnRefresh_Click(object sender, EventArgs e)
{
    MyGrid.DataSource = null;
    MyGrid.DataSource = GetDataForGrid();
    MyGrid.DataBind();
} 
```

I have referenced a javascript file which holds all my javascript codes for the page. I do it this way since I don't really like mixing up my javascript code inside my .aspx file.

This is how the function looks like in my external .js file:

```
function Refresh() {
    var btn = $(document).getElementById('btnRefresh');
    if (btn) {
        btn.click();
    }
    else {
        alert('false');
    }
} 
```

I have also tried other ways I saw on the internet as follows all of which with no luck:

```
document.getElementById('btnRefresh');
__doPostBack('btnRefresh', '');
__doPostBack('btnRefresh', 'Click');
$('#btnRefresh').click(); 
```

Can someone please point me a good way to do it? Thank you!

**EDIT:**

What I want to do is this: I have a gridview inside an UpdatePanel. I have a trigger which is fired when btnRefresh is clicked. So basically, it refreshes my gridview. Therefore, I cannot use the button's OnClick Property to call my javascript functions since I will not be clicking the button in the first place. I need to be able to call the `btnRefresh_Click` event from my external javascript so that my Trigger would be fired to update my GridView.

**EDIT 2:**

I tried to define my `btn` on the .aspx page itself using the line below:

> var btn = $("#");

and I also changed my JS Code as follows:

> function Refresh() { if (btn) { btn.click(); } else { alert('false'); } }

The js was able to see `btn` and it event went through the line `btn.click()` However, my `btnRefresh_Click` still didn't fire up. Am I missing something here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:25:34.513

由于您引用了 JS 文件，因此您有两个选择。传入按钮`ClientID`或将按钮设置`ClientIDMode`为`Static`.

我建议您将 id 传递给 JS 函数。

```
function Refresh(id) {
    var btn = $(document).getElementById(id);
    if (btn) {
        btn.click();
    }
    else {
        alert('false');
    }
} 
```

当你想在另一个 JS 函数中调用它时，传入`ClientID`.

```
function doSomthing(){
    //do this
    //do that
    Refresh('<%=btnRefresh.ClientID%>');
} 
```

但正如你所说，如果你不喜欢将 JS 放在你的 aspx 页面中，那么只需设置你的按钮的`ClientIDMode = Static`.

```
<asp:Button ID="btnRefresh" ClientIDMode="Static" name="btnRefresh" runat="server" Text="btnRefresh" onclick="btnRefresh_Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:04:12.450

在这里您可以使用 OnClientClick 属性并提及要调用的外部 js 中的函数名称，因为该属性实际上是在服务器端事件执行之前执行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:08:18.817

看看[`ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)物业。

您可以使用该属性获取客户端按钮的ID，并使用该ID触发点击。

```
function Refresh() {
    var btn = $("#<%=btnRefresh.ClientID%>");
    if (btn) {
        btn.click();
    }
    else {
        alert('false');
    }
} 
```

但请注意，`<%=btnRefresh.ClientID%>`它只能在与 相同的页面上工作`btnRefresh`，而不是在外部 JS 文件中。ClientID 由 ASP.NET 动态生成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T19:29:15.530

这是我过去使用过的“hack”

客户端可见的按钮是

```
<input type="button" id="btPart1" value="Trigger Phase 1" 
    onclick="clicked()" class="btn btn-default" /> 
```

在您的网络表单中定义这样的按钮

```
<asp:button id="Triggered" runat="server" OnClick="btnRefresh_Click"
    Style="visibility: hidden;"/> 
```

在您的 JavaScript 中，您将拥有

```
function clicked(){
    document.getElementById("ctl02_Triggered").click();
} 
```

根据您使用的 asp 版本，ID 会发生变化，因此请确保检查按钮的实际 ID，以便您可以通过 js 触发它。我提到这一点是因为在编译时 ASP 实际上会根据它所拥有的父项来转换您提供的 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-23T19:47:06.410

实际上，在运行任何 JS 方法之前，您必须确保已加载 DOM。因此，请确保您的 js 文件包含在 DOM (html) 的末尾。

由于按钮是服务器控件，所以需要通过方法`btnRefresh`引用，`clientID``Refresh`

```
var btn= document.getElementById(‘&lt;%=btnRefresh.ClientID=%>’); 
```

但是您的代码没有显示您如何调用该`Refresh`方法。所以希望以上对你有所帮助。或者您需要显示更多代码。

# iphone - iOS 应用因原因 3.8 被拒绝（评级不当）

> ID：12469797
> 
> 赞同：4
> 
> 时间：2012-09-18T02:57:51.333
> 
> 标签：iphone, ios, ipad, app-store, wikipedia

我提交了一个参考应用程序，其中绝对没有令人反感的内容。所以我相应地对我的应用程序进行了评分（4+）。然而，为了方便用户，该应用程序提供了维基百科的参考网址，以节省他们的一些精力。例如，该应用程序提供了一些关于一个常见项目的数据，如果用户对该项目感到好奇，我会为每个项目提供一个 Wiki 链接。用户无需离开应用程序即可单击它并访问 wiki 网页。

每个 wiki 页面在顶部显示一个搜索框，用户显然可以在那里输入他们想要的任何内容并访问 Wikipedia 提供的任何材料。所以我被要求将评级提高到 17+。

我的问题：有什么办法可以抑制维基百科中的搜索框？或者在 iOS 应用程序中做任何事情来阻止用户离开原始页面？

如果两者都不可能，我想我可以从维基百科中提取和嵌入相关内容（具有适当的归属）。那将是太多的努力，是静态的（除非定期更新），并且使用数十 MB 的数据使应用程序膨胀。

注意：我发现这个[答案](https://stackoverflow.com/questions/6911050/wikipedia-as-part-of-my-ios-app)指向一个 github 库来获取和显示一个 wiki 页面，但这似乎仍然让用户接触到任意 Wiki 内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:06:43.170

要禁止搜索框，可以使用以下方法，将其放入您的代表中`UIWebView`：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *js = "document.getElementById('mw-mf-search').style.display='none';";
    [webView stringByEvaluatingJavaScriptFromString:js];
} 
```

`mw-mf-search`是上搜索框的id属性`m.wikipedia.org`。

为防止离开页面，您应该仅针对您希望允许的图像和网站等资源实施`webView:shouldStartLoadWithRequest:navigationType:`和返回。`YES`

# vb.net - Empty Structures compile in VB 10+

> ID：12469806
> 
> 赞同：1
> 
> 时间：2012-09-18T02:58:42.917
> 
> 标签：vb.net, structure

This is at least a documentation error, if not a bug.

In VB.NET prior to .NET 4.0 (i.e. VB.NET 7 through 9) an empty `Structure` declaration fails at compile-time with

> error BC30281: Structure 'MySimpleEmpty' must contain at least one instance member variable or Event declaration.

E.g. The following two structures compile successfully in VB10, and not prior:

```
Structure MySimpleEmpty
End Structure

Public Structure AnotherEmpty
  Public Const StillEmpty As Boolean = True
End Structure 
```

I note the documentation for the [Error BC30281](http://msdn.microsoft.com/en-us/library/csffdsdy.aspx) stops at VB9, but the documentation for the [Structure statement](http://msdn.microsoft.com/en-us/library/k69kzbs1.aspx) still has the *datamemberdeclarations* as required even as of VB11 (.NET 4.5 VS2012).

These two `Structures` compile in VB11 (VS2012) as well. [(Thanks John Woo.)]

Is there some blog entry or documentation confirming this is an intended change or a bug in VB10 and later?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T17:45:04.357

Microsoft 已将此标记为已修复的错误，但并未实际说明已修复的内容。

VB11 (VS2012) 文档现在说*datamemberdeclarations*在语法中是可选的，但在 Parts 表中它说“必需。零个或多个......”！

我想这是一个修复...... VB10（VS2010）文档没有改变。

# database - 在 adobe 业务催化剂中创建自定义数据库？

> ID：12469808
> 
> 赞同：1
> 
> 时间：2012-09-18T02:59:18.633
> 
> 标签：database, adobe, business-catalyst

我想在 Adob​​e Business Catalyst 中创建一个自定义数据库。我有一个 Excel 电子表格，其中包含要上传的 1000 行数据。

有谁知道我该怎么做，或者我在哪里可以找到如何做的说明，因为我似乎在任何地方都找不到任何东西？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:03:29.297

您需要使用的是 Web Apps 模块。你没有告诉我们你想用这些数据做什么，但我假设你只是想在页面上呈现它。Web 应用程序将允许您为电子表格中的每一列创建一个自定义字段，并将该电子表格导入其中。它有一个列表视图，可以创建到详细视图的自动链接。有关更多信息，请参阅以下链接 -

[http://kb.worldsecuresystems.com/kb/add-custom-content-using-web.html](http://kb.worldsecuresystems.com/kb/add-custom-content-using-web.html)

# vb.net - 在单个报表查看器中的多个报表 (.rdlc) 之间切换

> ID：12469813
> 
> 赞同：2
> 
> 时间：2012-09-18T02:59:44.577
> 
> 标签：vb.net, visual-studio-2005, rdlc

我有 2 份报告，**“** report1.rdlc”和**“report2.rdlc”**。我希望能够在单个报表查看器（**“rv_1”**）中在它们之间进行交换。

我还有 3 个按钮：
**btn_1**可以：

```
rv_1.LocalReport.ReportEmbeddedResource = "Application1.Report1.rdlc"
rv_1.RefreshReport() 
```

**btn_2**执行以下操作：

```
rv_1.LocalReport.ReportEmbeddedResource = "Application1.Report2.rdlc"
rv_1.RefreshReport() 
```

**btn_3**执行以下操作：

```
dim rds as new ReportDataSource
rds.name = 
rds.value = 
rv_1.reset()
rv_1.LocalReport.DataSources.add(rds)
rv_1.RefreshReport() 
```

无论我为`rds.name`and做什么`rds.value`，它都给我留下了

> 尚未为数据源“dataSetName_TableName”提供数据源实例。

为了让它正常工作，我需要放什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:15:09.910

```
Private Sub REPORT1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 
   If CON.State = ConnectionState.Closed Then : 
     CON.Open() : 
   End If 
   CMD.Connection = CON 
   CMD.CommandText = "SELECT * FROM accounts" 
   DR = CMD.ExecuteReader 
   If DR.HasRows Then 
  Do While (DR.Read) 
    Me.DataSet1.TblData.AddTblDataRow(DR("FNAME"), DR("LNAME"), DR("MI")) 
  Loop 
 End If Me.ReportViewer1.LocalReport.ReportPath = "Report1.rdlc" 
 Me.ReportViewer1.RefreshReport() 
End Sub 
```

# ruby-on-rails - Nokogiri 和 XPath 中未定义的命名空间前缀

> ID：12469815
> 
> 赞同：7
> 
> 时间：2012-09-18T02:59:50.893
> 
> 标签：ruby-on-rails, ruby, xpath, nokogiri

我正在尝试解析 Youtube Gdata 以查看是否存在具有给定 ID 的视频。但是没有普通的标签，而是带有命名空间。在链接[http://gdata.youtube.com/feeds/api/videos?q=KgfdlZuVz7I](http://gdata.youtube.com/feeds/api/videos?q=KgfdlZuVz7I)上有标签：

```
<openSearch:totalResults>1</openSearch:totalResults> 
```

有命名空间openSearch：

```
xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' 
```

但我不知道如何在 Nokogiri 和 Ruby 中处理它。

以下是部分代码：

```
xmlfeed = Nokogiri::HTML(open("http://gdata.youtube.com/feeds/api/videos?q=#{video_id}"))
xmlfeed.at_xpath("openSearch:totalResults") 
```

它给出了错误：

```
Undefined namespace prefix: openSearch:totalResults 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T04:37:29.320

我不确定为什么，但似乎您必须删除名称空间前缀才能获取节点：

```
xmlfeed.at_xpath("//totalresults") 
```

另请注意，我添加了双正斜杠，它将搜索范围扩大到整个文档（没有它就无法工作）。

**更新**：

基于这个答案：[如何让 Nokogiri 了解我的命名空间？](https://stackoverflow.com/questions/839082/how-do-i-get-nokogiri-to-understand-my-namespaces)我猜想命名空间 ( `openSearch:totalResults`) 没有正确声明为文档根节点上的属性，因此 Nokogiri 只是忽略它，这就是上面的选择器有效但命名空间的选择器无效的原因。

# javascript - 使用 json 时，我的 $.ajax .done 函数调用的函数参数是什么？

> ID：12469820
> 
> 赞同：3
> 
> 时间：2012-09-18T03:00:40.480
> 
> 标签：javascript, jquery

我有以下代码：

```
 $.ajax({
        url: href,
        dataType: 'json',
        type: 'POST',
        data: $form.serializeArray()
        })
        .done(onDone)
        .fail(onFail); 
```

这是 onDone 函数：

```
var onDone = function (json, textStatus, XMLHttpRequest) {
    json = json || {};
    if (json.Success) {
        submitSuccessModal(json); 
```

*   有人可以告诉我这些是否是 onDone 函数的正确参数。$.ajax 调用如何知道如何填充这些？

*   还有这段代码在做什么：json = json || {};

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:12:19.903

> *“有人可以告诉我这些是否是 onDone 函数的正确参数。$.ajax 调用如何知道如何填充这些参数？”*

这些是正确的论点。但是`$.ajax()`不知道也不关心你在函数中声明了什么参数——**不管你*声明*了什么，你的函数都会被三个参数调用：*“***从服务器返回的数据，根据 dataType 参数格式化；一个字符串描述状态；以及 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。” 实际的参数名称并不重要，重要的是顺序。你可以忽略那些你不需要使用的；大多数时候，您只需要第一个，即实际数据。

一般而言，无论声明了多少参数，都可以使用任意数量的参数调用 JavaScript 函数，因此如果您只使用第一个参数，您可以只声明第一个参数。或者您可以不声明任何参数，但仍然可以访问通过[`arguments`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)传递的内容。

> *“还有这段代码在做什么：* json = json || {};`”

`||`运算符返回第一个真值操作数。在这种情况下，如果`json`还不是一个对象，那么将其分配给一个空对象是一种简写。在 Ajax 回调的上下文中，我认为您不需要此测试，因为 jQuery 不应该调用您的`.done()`函数，除非响应被成功解析为有效的 JSON。

（另请注意，该`json`参数实际上不会接收 JSON，它将接收一个对象。在幕后 jQuery 接收 JSON，但它会解析它并将结果传递给您的函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:17:06.460

该`.done`事件应该具有处理响应的功能。

例如：

```
.done(function(return){
  //do something here where return is the result of the AJAX call
}) 
```

我所做的只是将功能放在我的完成，成功等......就像上面一样。

该代码`json = json || {};`意味着将变量设置为 JSON 返回或空对象。这比使用新关键字更可取。

这可能是这样的：

```
.done(function(json){
    json = json || {};
    If(json.Success){
      submitSuccessModal(json);
    }
}) 
```

# python - python进程退出或崩溃没有线索

> ID：12469822
> 
> 赞同：0
> 
> 时间：2012-09-18T03:01:10.053
> 
> 标签：python, mysql, crash

最近我创建了一个 python 脚本来从日志文件中检索数据并写入 mysql 数据库。该脚本假定运行 24 小时，但它意外崩溃，我不知道为什么。

如何访问崩溃报告？

我的软件规格是。

*   蟒蛇版本：2.5.4
*   MySQL-python-1.2.3c1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:15:38.987

假设致命的内部错误不会导致您的问题，您可以注册一个[`atexit`](http://docs.python.org/library/atexit.html)函数以获取有关时间和问题的更多信息：

```
import atexit

@atexit.register
def what_happened():
    # TODO: Implement this
    # get the time
    # get tracebacks via http://docs.python.org/library/sys.html#sys.exc_info
    #    and http://docs.python.org/library/traceback.html
    #
    # Attempt to write all of the above to a file 
```

如果致命错误或系统事件导致崩溃，您可能需要检查操作系统的帮助文档以找到其他方法来跟踪问题（Windows`/var/logs`上的事件查看器，Linux [尽管我确信有更好的方法] 和Mac 的控制台 [据我了解]）。

# c - 如何将复杂数据类型从主机字节顺序转换为网络顺序

> ID：12469823
> 
> 赞同：2
> 
> 时间：2012-09-18T03:01:19.443
> 
> 标签：c

我想使用 htonl() 和 htos() 将消息从主机字节顺序转换为网络顺序。在这个消息中，有一些复杂的定义数据类型，如结构、枚举、联合和联合中的联合。

1.  我是否必须对每个结构的成员和成员中的成员（包括多字节的联合成员）进行 htonl（s）？
2.  对于一个工会，我可以只翻译最大的一个吗？
3.  对于枚举，我可以把它翻译成很长吗？
4.  我可以只编写一个使用 htonl(s) 发送和接收消息的函数吗？还是我必须想出另一个使用 ntohl(s) 来接收相同消息的方法？

### 结构

```
typedef struct {
    unsigned short un1_s;
    unsigned char  un1_c;

    union {
        unsigned short un1_u_s;        
        unsigned long  un1_u_l;    
    }u;
}UN1;

typedef struct {
    unsigned short    un2_s1;
    unsigned short    un2_s2;
} UN2;

typedef enum {
    ONE,
    TWO,
    TRHEE,
    FOUR
} ENUM_ID;

typedef struct {
    unsigned short  s_sid;
    unsigned int    i_sid;
    unsigned char   u_char;
    ENUM_ID         i_enum;

    union {
            UN1     un1;
            UN2     un2;
    }               u;
} MSG; 
```

### 代码

```
void msgTranslate (MSG* in_msg, MSG* out_msg){

/* ignore the code validating pointer ... */

*out_msg = *in_msg;

#ifdef LITLE_ENDIAN

/* translating messeage */
out_msg->s_sid = htons( in_msg->s_sid );  /* short */
out_msg->i_sid = htonl( in_msg->i_sid );  /* int */

/* Can I simply leave out_msg->u_char not to translate, 
 * because it is a single byte? */

out_msg->i_enum = htonl(in_msg->i_enum);  
/* Can I simply translate a enum this way,? */

/* For an union whose 1st member is largest one in size than 
 * others, can I just translate the 1st one, 
 * leaving the others not to convert? */

out_msg->u.un1.un1_s = htons(in_msg->u.un1.un1_s);  

/* for out_msg->u_char, can I simply leave it 
 * not to be converted, because it is a single byte? */

/* for an union whose 2nd member is largest one, 
 * can I just convert the 2nd one, leaving others 
 * not to be converted? */

out_msg->u.un1.u.un1_u_s = htos(in_msg->u.un1.u.un1_u_s ); /* short */

/* As above question, the following line can be removed? 
 * just because the u.un1.u.un2_u_i is smaller 
 * than u.un1.u.un1 in size ? */

out_msg->u.un1.u.un2_u_i = htol(in_msg->u.un1.u.un2_u_l );  /* long */

/* Since un1 is largest than un2, the coding translation un2 can be ignored? */
    ...

#endif

    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T04:04:44.933

1.  您将需要适当地映射每个多字节类型。

2.  对于联合，您需要确定哪个是联合的“活动”元素，并根据正常规则对其进行映射。您可能还需要提供一个“鉴别器”，它告诉接收代码传输了各种可能性中的哪一个。

3.  对于枚举，您可以决定将所有此类值视为 a`long`并相应地进行编码和解码。或者，您可以分别处理每个枚举，根据其大小处理每种类型（理论上，不同的枚举可能具有不同的大小）。

4.  这在一定程度上取决于你接下来真正要做什么。如果您正在打包数据以通过网络传输，那么接收和发送操作就大不相同了。如果您所做的只是翻转内存中结构中的位，那么您可能会发现在大多数系统上，将`htonl()`函数应用于结果的结果`htonl()`是您首先想到的数字。如果您打算对映射（翻转）结构中的所有字节进行二进制复制，那么您可能做得不对。

请注意，在大多数可能的系统上，您的数据结构中都有各种填充孔。在结构 UN1 中，如果它是 32 位系统，几乎可以肯定在`un1_c`和下面的 union之间有一个填充字节；`u`如果它是 64 位系统，您可能会在那里填充 5 个字节。同样，在`MSG`结构中，您可能在 之后有 2 个填充字节，在 之后`s_sid`还有 3个填充字节`u_char`。根据. `enum`_`i_enum`

请注意，由于您没有数据类型的平台独立大小，因此您无法在 32 位和 64 位 Unix 系统之间可靠地互通。如果系统都是 Windows，那么你就可以摆脱它，因为`sizeof(long) == 4`在 32 位和 64 位 Windows 上都是如此。但是，在基本上所有 64 位的 Unix 变体上，`sizeof(long) == 8`. 因此，如果跨平台工作是一个问题，您必须担心这些尺寸以及填充。调查`<inttypes.h>`标头中的类型，例如`uint16_t`和`uint32_t`。

您应该简单地在所有主机上进行相同的打包，小心地将各种值的字节复制到字符缓冲区中的适当位置，然后通过线路发送并通过反向编码解包。

还要检查 Google 的[Protocol Buffers](http://code.google.com/p/protobuf/)是否会明智地为您完成这项工作；它可能会为您节省相当多的痛苦和悲伤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T03:33:25.737

1.  您必须对长度超过 1 个字节的任何整数进行字节序翻转（short、int、long、long long）。
2.  不，见下文。
3.  编号`enum`可能是任何大小，具体取决于您的平台（请参阅[C 中枚举的大小是多少？](https://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c)）。
4.  实际上，您应该只使用协议缓冲区或其他东西，而不是尝试进行所有这些转换......

工会很难处理。例如，我将值 0x1234 存储在大端`short`的 a中。`union {short; long;}`然后，联合包含字节`12 34 00 00`，因为短占用联合的低两个字节。如果你对 进行字节序翻转`long`，你会得到`00 00 34 12`，这会产生`short`0x0000。如果你对 进行字节序翻转`short`，你会得到`34 12 00 00`. 我不确定您认为哪一个是正确的，但很明显您有问题。

更典型`short`的是在这样的联合中有两个 s，一个`short`是低半字，另一个是高半字。哪一个取决于字节顺序，但你可以这样做

```
union {
    #ifdef LITTLE_ENDIAN
    uint16_t s_lo, s_hi;
    #else
    uint16_t s_hi, s_lo;
    #endif
    uint32_t l;
}; 
```

# wcf - 动态创建多个组合框代码隐藏并通过silverlight中的wcf绑定值

> ID：12469825
> 
> 赞同：0
> 
> 时间：2012-09-18T03:01:42.687
> 
> 标签：wcf, silverlight, silverlight-4.0, combobox

这是我为动态生成控件而编写的代码：

```
private void GenCtrl(string type, int typeid,string sql)
            {
                string id = Convert.ToString(typeid);
            if (type == "TextBox")
                {// created for TextBox
                 }
           else if (type == "ComboBox")
                {
                  ComboBoxEdit  cb = new ComboBoxEdit();
                    cb.Name = "cb" + id; 
                 // this is to set unique id if more than 1 combobox created.

                   cb.Height = 20;
                    cb.Width = 100;
                    cb.Margin = new Thickness(2, 2, 0, 0);
                    cb.HorizontalAlignment = HorizontalAlignment.Left;
                    cb.Text = "Show All";
                    stctrl.Children.Add(cb);                       
                    ComboBoxEdit cbx = (ComboBoxEdit)cb.FindName(cb.Name);
                    cb.DisplayMember = "Name";

                    if(filsql !=null)
                    ServRef.GetComboBoxlistAsync(sql); //this would retrieve the list and attach to the combobox.

                    //ctlst.Add(cb.Name, type);
                }
} 
```

// **WCF 服务引用**

* * *

```
ServRef.GetComboBoxlistCompleted += new EventHandler<GetComboBoxlistCompletedEventArgs>(ServRef_GetComboBoxlistCompleted);

        void ServRef_GetComboBoxlistCompleted(object sender, GetComboBoxlistCompletedEventArgs e)
        {

            cb.ItemsSource = e.Result;
            cb.SelectedIndex = 0;
        } 
```

我在绑定两个组合框时面临的问题是创建前：cb1，cb2（动态创建）仅控制 cb2 组合框，它是在 ServRef_GetComboBoxlistCompleted 方法中激活的最新控件。我无法绑定第一个控件（组合框）的值。

如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:37:42.493

我能够使用 FindName 找到

```
ComboBoxEdit cbx = (ComboBoxEdit)stackctrl.FindName(cb.Name); 
```

# python - 将 pygames 事件数据发送到扭曲服务器？

> ID：12469827
> 
> 赞同：1
> 
> 时间：2012-09-18T03:02:03.937
> 
> 标签：python, client, twisted, pygame

我正在运行一个带有 twisted 的 pygames 程序，并且在从 pygame 事件中发送数据时遇到了问题。

首先是服务器：

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor
import simplejson

class Game_Data(LineReceiver):
    def __init__(self, players, clients):
        self.players = players
        self.clients = clients

## the connectionMade method of LineReceiver is being used to create ##
## protocol instances of each client so it can send back any data it gets ##

    def connectionMade(self):
        new_player = 'player_' + str(len(self.players) + 1)
        self.clients.append(self)
        self.players.append(new_player)
        self.players = simplejson.dumps(self.players)
        for client in self.clients:
            client.sendLine(self.players)

## what ever data the server receives it sends right back to any clients ##

    def lineReceived(self,line):
        self.line = line
        print self.line
        for client in self.clients:
            client.sendLine(self.line)

class BlackFactory(Factory):
    def __init__(self):
        self.players = []
        self.clients = []

    def buildProtocol(self, addr):
        return Game_Data(self.players, self.clients)

reactor.listenTCP(6000, BlackFactory()) 
```

现在为客户：

```
import pygame
from twisted.internet.protocol import Protocol, ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet.task import LoopingCall
from twisted.internet import reactor

class BlackClientProtocol(LineReceiver):
    def __init__(self, recv, host):
        self.recv = recv
        self.host = host

    def lineReceived(self, line):
        self.recv(line)
        print line ## prints out as expected ##

    def connectionMade(self):
        self.host = self
        print self.host ## prints out as expected ##

class BlackClient(ClientFactory):
    def __init__(self, recv, host):
        self.recv = recv
        self.host = host

    def buildProtocol(self, addr):
        return BlackClientProtocol(self.recv, self.host)

class Client(object):
    def __init__(self):
        pygame.init()
        self.screen = pygame.display.set_mode((800, 600))
        pygame.display.flip()
        reactor.callLater(0.1, self.tick)

    def new_line(self, line):
        self.line = line

## this trial_func was to see if I could pass the BlackClient another argument ##
## to return an instance of the protocol to be called later in this class ##     

    def trial_func(self, host):
        self.host = host

    def tick(self):
        for event in pygame.event.get():
            if event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
                print self.line  ## prints out as expected##
                print self.host  ## does not print out ???##

if __name__ == '__main__':
    c = Client()
    lc = LoopingCall(c.tick)
    lc.start(0.1)
    reactor.connectTCP('192.168.1.2', 6000, BlackClient(c.new_line, c.trial))
    reactor.run() 
```

编辑：这是一个更明确的例子。评论是挂断电话。只要您安装了 pygames，它就会运行，pygame 事件是一个简单的`KEYDOWN`（转义键）事件，作为客户端发送数据的触发器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:48:11.597

我查看了您的代码，这似乎是相关部分：

```
def tick(self):
    flag = 0
    for event in pygame.event.get():
    ...
## call an instance of the protocol and sendLine ##
                    BlackClient(self.new_line(allhands)) ## this line does not work ##
## send allhands data ##
    ... 
```

您希望将数据发送回服务器，但在这里您只是创建一个新的`BlackClient`.

您可能想使用[`sendLine`](http://twistedmatrix.com/documents/8.2.0/api/twisted.protocols.basic.LineReceiver.html#sendLine)来发送线路，但您需要对当前协议实例的引用（或至少对此方法）。

* * *

这是一个如何实现这一目标的示例：

```
class Client(object):
    ...
    # this method is going to be replaced
    def sendLine(self, line):
        pass

    def tick(self):
        flag = 0
        for event in pygame.event.get():
            ...
            ## call sendLine, which is replaced by the sendLine method from the protocol ##
            self.sendLine(yourStuff)        

class BlackClient(ClientFactory):
    def __init__(self, client):
        # keep instance of client
        self.client = client

    def buildProtocol(self, addr):
        # give client.new_line method to protocol
        proto = BlackClientProtocol(self.client.new_line)
        # replace client's sendLine with proto.sendLine
        self.client.sendLine = proto.sendLine
        return proto

if __name__ == '__main__':
    c = Client()
    lc = LoopingCall(c.tick)
    lc.start(0.1)
    protocoll = 
    reactor.connectTCP('192.168.1.2', 6000, BlackClient(c))
    reactor.run() 
```

这只是一个例子；您可能可以稍微清理一下代码。也许您想使用某种调度程序（例如[pydispatch](http://pypi.python.org/pypi/PyDispatch/1.0.1)）

# eclipse - MAC OSX的低内存消耗JAVA ide？

> ID：12469828
> 
> 赞同：0
> 
> 时间：2012-09-18T03:02:08.837
> 
> 标签：eclipse, macos, memory, netbeans, intellij-idea

我一直在使用 MAC OSX，从一开始我就遇到了 JAVA ide 的内存消耗问题。我尝试过 Netbeans、Eclipse 和 Intellij，尝试为 Eclipse 配置 jvm 设置，但内存问题仍然存在……

基本上，虽然我没有进行任何编译或构建，但保持一个项目打开会使我的 ide 消耗超过 750 mb 的内存。这对于我上面写的所有 ide 都是一样的，并且对 ini 文件的自定义会产生一点影响。 ..

周围有没有低内存消耗的ide？或者只为mac写的东西，所以它可能会以更好的方式处理ram问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:12:36.583

Smart IDE 需要索引您所有的项目和 SDK 文件，以提供代码完成和其他智能功能。索引需要存储在某个地方，因此总是需要在智能、性能和内存消耗之间进行权衡。

如果 IDE 选择最小化内存使用量，它必须在磁盘上存储缓存并在您调用某些需要从缓存中获取一些数据的功能时加载它，您在使用某个功能时会遇到延迟，这是不可接受的并且会变慢下编辑。

当然，您希望您的 IDE 速度快。为了实现这一点，它需要始终将大部分缓存和索引加载到内存中，但是您会看到更高的内存使用率。

不管你喜欢与否，但大多数现代应用程序更喜欢速度更快并消耗更多 RAM，而不是缓慢而消耗更少 RAM。带有 5 个打开选项卡的 Chrome 浏览器将比您的 IDE 消耗更多的内存。

内存是一种廉价资源（除非您拥有无法通过安装更多 RAM 来升级的旧硬件，例如笔记本电脑）。通常，开发人员不会节省硬件。为了在使用 IDE 时高效，他们拥有至少 8GB RAM 的系统。使用 Java 和应用程序服务器的开发人员可以拥有更多。现在 24GB 的价格约为 100-150 美元。

您是否会节省 RAM，然后寻找可以在您的系统上运行的速度较慢或功能有限的 IDE？或者您会购买更好的硬件并在几年内忘记这个资源，同时享受提供更多功能和速度的 IDE？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:58:24.050

[使用像http://www.sublimetext.com/](http://www.sublimetext.com/)这样的文本编辑器可能会更好

或者，如果您想成为老派，vi 或 emacs。

如果您调整设置并删除不需要的内容，则可以减少 Eclipse 的内存使用量。特别是不要运行 EE 版本，禁用拼写检查，并保持项目工作区整洁（1 个项目）。

# iphone - Have a ViewController behind/revealed when an animation is done

> ID：12469832
> 
> 赞同：-1
> 
> 时间：2012-09-18T03:02:33.193
> 
> 标签：iphone, objective-c, ios, xcode, animation

In my app, I would like to have a door, and the user swipes the door, I would like an animation to show the door opening up, and behind the opening door is a visible viewController. How could I go about doing this? Could someone please point me in the right direction?

Thanks in advance!

Kurt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:45:44.250

Stacked up two views and link UISwipeGestureRecognizer to the top view which will act as the door, and when user swipes, just do normal UIView animation to move top view to a position. (if it's a sliding door. otherwise, do some transformation or else..)

# jquery - url.search 使用漂亮的永久链接来隔离除索引之外的所有页面

> ID：12469834
> 
> 赞同：0
> 
> 时间：2012-09-18T03:03:25.330
> 
> 标签：jquery, function, if-statement

有没有办法让 url.search 找到任何不是索引的加载页面。

例如，我想要一个函数在任何页面加载时触发，除了索引。

因此，对于着陆页：

www.foo.com

该函数不会触发，但如果它加载以下页面：

www.foo.com

函数触发。我正在使用带有漂亮永久链接的 wordpress，并且这些页面是动态的，所以我宁愿不明确命名每个页面。这是我到目前为止所拥有的，没有使用漂亮的永久链接，因为它`page_id`是一个常数。

```
var url = location.search;
    if(url.search("page_id") > 0) {
        $('#footer').css('background', '#481d0c');  
        $('.hoverBlock').css('background', '#e4e1d5'); 
```

我希望条件查看变量是否包含任何字母/数字等，如果是，则触发该函数。

就像是：

var url = location.search; if(url.search("ANY CHARACTER") > 0) { $('#footer').css('background', '#481d0c');
$('.hoverBlock').css('背景', '#e4e1d5');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:26:18.623

主要问题是搜索方法。

`location.search`正在寻找通过 url 传递的变量。

例如，如果您需要从 获取变量`www.foo.com?p=bar`，那么`location.search`将返回`bar`

我需要**实际**的url，而不是传递的变量，所以这有效：

var url = location.pathname;

```
if(url != "") {
  $('#footer').css('background', '#481d0c');    
  $('.hoverBlock').css('background', '#e4e1d5');
} 
```

`location.pathname`将返回 url 字符串，不包括域或索引。

例如，如果 url 是

```
www.foo.com/bar 
```

location.pathname 将返回`/bar`

# vb.net - 抑制datagridview vb.net中的默认右键菜单

> ID：12469835
> 
> 赞同：0
> 
> 时间：2012-09-18T03:03:26.377
> 
> 标签：vb.net

我有自己的datagridview右键菜单，但是当用户处于编辑模式并右键单击他正在编辑的单元格时，默认菜单和我自己的菜单都会出现并且它们重叠。我已经把我的移到一边，但它难看。有没有办法可以抑制默认的右键单击菜单而只显示我的？我正在使用 VB.net。谢谢

简而言之，例如这里是创建我的菜单的代码

```
 Dim menu As ContextMenuStrip = New ContextMenuStrip

        menu.Items.Add(ShowMenuItem1, Nothing, AddressOf MenuG5_ShowMenuItem1)
        menu.Items.Add(ShowMenuItem1, Nothing, AddressOf MenuG5_ShowMenuItem2)
 menu.show 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:13:01.947

我想您可以将上下文菜单条可见性属性设置为 false....

# c - 如何在 debian/ubuntu 上编写系统调用

> ID：12469836
> 
> 赞同：3
> 
> 时间：2012-09-18T03:03:46.723
> 
> 标签：c, ubuntu, linux-kernel, debian, recovery

我正在尝试编写自己的系统调用。它只会返回当前时间。我知道我应该做什么的概念，并且我确实通过了如下几个链接：

*   [在 Linux 2.6 上为 i386 实现系统调用](http://tldp.org/HOWTO/html_single/Implement-Sys-Call-Linux-2.6-i386/)

*   [另一个系统调用实现](http://www.cs.rochester.edu/users/faculty/sandhya/csc256/assignments/adding-a-system-call.html)

但我仍然很困惑，没有得到想要的结果。内核未编译并且由于问题而崩溃。我已经在 debian 最新的稳定版 3.XX 上试过了

有人可以向我指出一种干净`hello world`的程序来开发系统调用吗？

**编辑**

对于[以下答案](https://stackoverflow.com/a/12474768/728863)，这是我的问题：

1.  `File 3: linux-x.x.x/arch/x86/kernel/syscall_table_32.S`在我的 linux 文件夹中找不到。我不得不即兴创作，因此修改了以下文件：`linux-x.x.x/arch/x86/syscalls/syscall_64.tbl`

2.  上面提到的（1）新文件有不同的模式，`<number> <64/x32/common> <name> <entry point>`我的条目是`313 common

3.  内核映像确实编译成功，但我无法调用该函数。`undefined reference" error`当我用 gcc 编译它时它给出了一个。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T10:05:40.387

这只是示例如何编写简单的内核系统调用。考虑以下 C 函数 system_strcpy()，它只是将一个字符串复制到另一个字符串：类似于 strcpy() 所做的。

```
#include<stdio.h>

long system_strcpy(char* dest, const char* src)
{
   int i=0;
   while(src[i]!=0)
      dest[i]=src[i++];

   dest[i]=0;
   return i;
} 
```

写之前先得到一个内核源码tar，解压得到一个linux-xxx目录。

**文件 1：linux-xxx/test/system_strcpy.c** 在 linux-xxx 中创建一个目录，命名`test`并将这段代码保存为文件`system_strcpy.c`。

```
#include<linux/linkage.h>
#include<linux/kernel.h>
asmlinkage long system_strcpy(char*dest, const char* src)
{
   int i=0;
   while(src[i]!=0)
      dest[i]=src[i++];

   dest[i]=0;
   return i;
} 
```

**文件 2：linux-xxx/test/Makefile**在上面 创建`Makefile`的同一`test`目录中创建一个，并将这一行放入其中：

`obj-y := system_strcpy.o`

**文件 3：linux-xxx/arch/x86/kernel/syscall_table_32.S** 现在，您必须将系统调用添加到系统调用表中。将以下行追加到文件中：

`.long system_strcpy`

*注意：对于内核 3.3 和更高版本。*

*参考：linux-3.3.xx/arch/x86/syscalls/syscall_64.tbl*

在那里，现在在以下一系列行的末尾添加：

310 64 process_vm_readv sys_process_vm_readv

311 64 进程_vm_writev sys_process_vm_writev

312 64 kcmp sys_kcmp

313 64 系统_strcpy 系统_strcpy

3.3 版本的格式为： `number` `abi` `name` `entry point`

**文件4：linux-xxx/arch/x86/include/asm/unistd_32.h**

*注意：本节对于 3.3 和更高版本的内核是多余的*

在此文件中，所有系统调用的名称将与一个唯一编号相关联。在最后一个系统呼叫号码对之后，添加一行

`#define __NR_system_strcpy 338`

（如果 337 是与系统调用号码对中的最后一个系统调用关联的号码）。

然后替换`NR_syscalls`值，用（现有数字增加 1）说明系统调用的总数，即在这种情况下`NR_syscalls`应该是 338，新值是 339。

`#define NR_syscalls 339`

**文件 5：linux-xxx/include/linux/syscalls.h**

将我们函数的原型附加到文件中。

`asmlinkage long system_strcpy(char *dest,char *src);`

就在`#endif`文件中的行之前。

**文件 6：源目录根目录下的 Makefile。**

打开`Makefile`并找到`core-y`定义的行并将目录添加`test`到该行的末尾。

`core-y += kernel/ mm/ fs/ test/`

现在编译内核。问题： `make bzImage -j4`

通过以 root 身份（或具有 root 权限）执行以下命令来安装内核： `make install`

重新启动系统。

要使用最近创建的系统调用，请使用：

`syscall(338,dest,src);`（或`syscall(313,dest,src);`内核 3.3+）而不是常规`strcpy`库函数。

```
#include "unistd.h"
#include "sys/syscall.h"
int main()
{
 char *dest=NULL,*src="Hello";
 dest=(char*)malloc(strlen(src)+1);
 syscall(338,dest,src);//syscall(313,dest,src); for kernel 3.3+
 printf("%s \n %s\n",src,dest);
 return 0;
} 
```

代替 313 等数字`syscall`，也可以直接使用`__NR_system_strcpy`

这是一个通用的例子。您将需要做一些实验来查看适用于您的特定内核版本的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T01:49:35.490

上述答案不适用于内核 3.5.0 和 3.7.6，产生未定义的参考编译错误。要解决此问题，应将 linux/syscalls.h 包含在 system_strcpy.c 而不是 linux/linkage.h 中。此外，最好使用 SYSCALL_DEFINE2(strcpy, dest, src) 来定义系统调用。

# php - 仅获取文件名

> ID：12469838
> 
> 赞同：0
> 
> 时间：2012-09-18T03:03:57.513
> 
> 标签：php, mysql

我有桌子：

```
==============
|id| document|
==============
|1 | doc1.txt|
|2 | doc2.txt|
============== 
```

我想得到`document`没有扩展名的。这是我的代码：

```
$query = mysql_query("SELECT document FROM tb ") or die(mysql_error());
while ($row = mysql_fetch_array($query)) {

    $filename    = $row['document'];
    $title   = basename($filename);
} 
```

但结果`$title`仍然包含扩展名。怎么了？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:05:55.497

```
$title   = pathinfo($filename, PATHINFO_FILENAME); 
```

[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)在这种情况下更合适

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:08:02.723

### 您正在操作一个字符串，而不是一个文件名！

在您的代码中，替换：

```
$title = basename($filename); 
```

和：

```
$title = substr($filename, 0, strrpos($filename, ".")); 
```

我没有使用`pathinfo()`，因为您正在操作一个字符串，而不是一个文件名。

# javascript - 从 javascript webview 访问 iPhone GPS

> ID：12469843
> 
> 赞同：0
> 
> 时间：2012-09-18T03:04:16.570
> 
> 标签：javascript, iphone, cordova, native, hybrid

我在开发混合 iPhone 应用程序时有一个基本查询

1）我们如何在没有第三方框架（如快速连接 iPhone 或 PhoneGap）帮助的情况下从 Web UI javascript 访问 iPhone 原生功能，如 GPS

2）相同的流程，架构是什么？即javascript如何与本机代码通信。

3) 欢迎所有评论、URL、信息！

4) 我可以使用快速连接将我的应用上传到应用商店吗？

5）我认为使用phonegap，我们不能上传到appstore，我们只能上传到phonegap。请评论

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:28:32.933

**1）我们如何在没有第三方框架（如快速连接 iPhone 或 PhoneGap）帮助的情况下从 Web UI javascript 访问 iPhone 原生功能，如 GPS**

查看[HTML GeoLocation API](https://developer.mozilla.org/en-US/docs/Using_geolocation)。Apple 还通过 JavaScript API公开了其他很酷的东西，例如[加速度计数据。](http://www.albertosarullo.com/blog/javascript-accelerometer-demo-source)因此，您甚至不需要本机代码。

**2) 相同的流程和架构是什么？即javascript如何与本机代码通信。**

实际上，对于某些信息，例如位置数据，您不需要本机代码（见上文）。但是，一般来说，如果您想与 iPhone 应用程序中的 WebView 的本机代码进行通信，您通常会[在 WebView 的委托中注册一个 URL 处理程序](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)，然后在需要时执行一些花哨`window.location`的技巧来触发处理程序。要将数据发送回 WebView，您只需要使用不言自明的`[webView stringByEvaluatingJavaScriptFromString:(String)]`方法。

对于这样的通信，我通常最终编写自己的小库，它允许我从 JavaScript 调用某些本机处理程序方法，并注册以接收来自本机代码的消息。你可能最终也会这样做。它简单、直观且有趣。我推荐体验。

**3) 欢迎所有评论、URL、信息！**

请参阅上面的链接。

**4) 我可以使用快速连接将我的应用上传到应用商店吗？**

我从来没有使用过快速连接，所以我无法回答那个问题。

**5）我认为使用phonegap，我们不能上传到appstore，我们只能上传到phonegap。请评论**

我从未听说有人在将基于 PhoneGap 的应用程序发布到 AppStore 时遇到问题。虽然我必须承认我自己从未尝试过。我想如果 Apple 停止接受基于 PhoneGap 的应用程序，我会听到的。但苹果很喜怒无常。那么谁知道呢？

（不过，如果我是你，我会检查我的消息来源）

# asp.net - 使用 sudomain 引用相对（父）路径

> ID：12469844
> 
> 赞同：0
> 
> 时间：2012-09-18T03:04:34.760
> 
> 标签：asp.net, subdomain

我有一个包含多个子域的网站，这些子域将用户引导到我网站上的子文件夹中。每个子文件夹中都有一个 Default.aspx 文件，该文件进行一些处理，然后将用户重定向到“../Default.aspx”。

如果您键入该页面的完整 URL，这将正常工作。如果您尝试通过子域访问它，则“..”父级没有被正确解析，只是将子文件夹路径连接到主路径中，我得到一个找不到页面。

我的应用程序的根路径是 www.domain.com/root。子域指向 subdomain.domain.com/root/subfolder 当我导航到 subdomain.domain.com 时，我收到此错误：

“404 - /root/subfolder/root/Default.aspx 未找到”

我想要的只是 subdomain.domain.com 将用户重定向到一个文件夹级别到 www.domain.com/root/Default.aspx

任何人都可以帮忙吗？这是使用共享托管服务提供商的功能/限制 - 子域仅限于指向它们的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:48:22.297

您的描述有点混乱，因为您将本地路径和 URL 混合在一起。我是否正确，您正在尝试做：页面`subdomain.domain.com/root/subfolder/Default.aspx`重定向到`www.domain.com/root/Default.aspx`？

这意味着你想做两件事：

1.  从子域重定向`subdomain`到子域`www`，以及
2.  导航到上一个文件夹的文件。

您可以在单个 HTTP 重定向中完成这两件事。为此，请使用该`Response.Redirect`方法，并确保在 URL 中使用 www 子域，以及要显示的页面的正确绝对路径。

```
Response.Redirect("http://www.domain.com/root/Default.aspx"); 
```

**更新**

或者，重定向到与当前页面相关的 URL，在同一个域中。

```
Response.Redirect( Page.ResolveClientUrl( "../Default.aspx" ) ); 
```

**更新 2**

或者，使用 Host HTTP 标头来区分子域并在共享代码库中以编程方式切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:28:47.930

答案是将所有子域指向同一个文件夹（主代码库），然后在Master文件中，根据http头进行切换。如果他们来自 partner1.domain.com，请使用 css1 - 如果他们来自 partner2.domain.com，请使用 css2 等。

这允许我在整个代码中使用相对路径，并在浏览器的 URL 栏中保留子域。

一个警告 - 如果您在多个环境中进行测试（我有一个 DEV 和一个 TST），您需要一些代码来检测您所处的环境并进行一些不同的操作，因为 http 标头主机会显示类似“localhost:51510”的内容. 对我来说，这些子域只存在于我的生产环境中。

感谢 bgever - 谢谢！

# java - 如何使用 javascript 调用操作

> ID：12469846
> 
> 赞同：0
> 
> 时间：2012-09-18T03:05:05.777
> 
> 标签：java, javascript, jsp, struts2

我的 jsp 文件中有一个登录表单，它引用了一个使用 onclick 函数的 javascript 函数，

javascript函数应该调用一个动作方法来进行授权过程并返回结果。

结果可以是错误消息（用户名错误）或（用户名或密码错误）或成功消息（返回“SUCCESS”）以进入新页面，

每当它调用该操作时，alert(xmlHttp.status) 都会显示它收到“未定义”，它正在调用正确的操作，但它的问题在于接收响应。

我应该如何定义struts.xml？也许问题是由它引起的。

```
<s:submit onclick="auth(this.form)" />

xmlhttp.open("get","Login.action?usrname="+usr+"&pass="+psw,false);
xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:01:24.717

你需要这样做（Struts2、JSON、Ajax）

**struts.xml**

```
<package name="default"  extends="json-default">
        <action name="ValidateUserName" class="com.controller.JSONUserAction">          
            <result type="json"></result>
        </action>
</package> 
```

**控制器类代码 JSONUserAction.java（在您的情况下为 Login.java）**

```
package com.controller;

import com.opensymphony.xwork2.ActionSupport;

public class JSONUserAction extends ActionSupport {

    private String username;
    private String result;  

    // all struts logic here
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }

    public String getResult() {
        return result;
    }
    public void setResult(String result) {
        this.result = result;
    }

    public String execute() {
        if(username.equalsIgnoreCase("admin")) {
            result = "VALID";
        } else {
            result = "INVALID";
        }
        System.out.println("username :  " + username + "======== result :" + result);
        return ActionSupport.SUCCESS; 
    }

} 
```

**login.jsp 代码**

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<script type="text/javascript">

    var http;
    if(window.XMLHttpRequest) {
        http = new XMLHttpRequest();
    } else {
        http = new ActiveXObject("Microsoft.XMLHTTP");
    }

    function AuthenticateUser() {               
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        http.open("POST", "ValidateUserName.action", true);
        http.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        http.onreadystatechange = ValidUser;
        http.send("username="+username +"&password="+password);
    }

    function ValidUser() {      
        if(http.readyState == 4 && http.status == 200) {
            var jsonOP  = eval ("(" + http.responseText + ")");         
            var result = jsonOP.result;         
            document.getElementById("message").innerHTML = result;
            if(result == "VALID") {
                //redirect to welcome page                              
            } 
        }
    }

</script>
</head>

<body>

<s:form action="Welcome">
    <div id="message"></div>
    <s:textfield name="username" label="Username" id="username" />
    <s:password name="password" label="Password" id="password"/>
    <s:submit id="login" onClick="AuthenticateUser();"/>
</s:form>

</body>
</html> 
```

# excel - 运行时错误6：溢出：Excel VBA

> ID：12469849
> 
> 赞同：3
> 
> 时间：2012-09-18T03:05:29.077
> 
> 标签：excel, runtime-error, vba

我一直在尝试解决这个问题，但无法解决。我有以下 VBA 代码。运行时出现“运行时错误 6：溢出”。我想我已经为每个变量分配了正确的类型。请帮忙！！

```
Sub UseCoeff()
Dim a, b As Long
Dim Value1 As Double

ThisWorkbook.Sheets("UseTableBEA").Activate
For b = 2 To 427
    For a = 2 To 431

        Value1 = ThisWorkbook.Sheets("UseTableBEA").Cells(a, b).Value / ThisWorkbook.Sheets("UseTableBEA").Cells(432, b).Value
        ThisWorkbook.Sheets("UseCoeff").Cells(a, b).Value = Value1

    Next a
Next b
End Sub 
```

每个单元格的结果可能介于 0 和 1 之间，最多八位小数。提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T04:18:43.930

如果`ThisWorkbook.Sheets("UseTableBEA").Cells(432, b).Value`曾经为 0，那么如果也是 0，`ThisWorkbook.Sheets("UseTableBEA").Cells(a, b).Value / ThisWorkbook.Sheets("UseTableBEA").Cells(432, b).Value`则会导致溢出错误`ThisWorkbook.Sheets("UseTableBEA").Cells(a, b).Value`。

为避免这种情况，请使用 if 语句过滤掉 0，只需使用您想要的实际逻辑更新注释：

```
If ThisWorkbook.Sheets("UseTableBEA").Cells(432, b).Value = 0 Then
    Value1 = 'Whatever you want but probably 0.
Else
    Value1 = ThisWorkbook.Sheets("UseTableBEA").Cells(a, b).Value / ThisWorkbook.Sheets("UseTableBEA").Cells(432, b).Value
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:47:48.523

`Dim a, b As Long`

a 未声明为 long 它被声明为变体试试这个：

```
Dim a as long, b as Long 
```

**编辑：** 经过测试，它仍然会产生堆栈溢出错误。但是，正确声明变量是一种很好的做法。

您也不需要这一行：

```
ThisWorkbook.Sheets("Sheet1").Activate 
```

如果你声明`UseTableBEA`你可以精简你的代码：

```
Dim Ws1 as Worksheet
Set Ws1 = Sheets("UseTableBEA") 
```

然后`Ws1`，您可以在以前使用过的地方使用`ThisWorkbook.Sheets("UseTableBEA")`

# git - Git - rebasing to a particular tag

> ID：12469855
> 
> 赞同：17
> 
> 时间：2012-09-18T03:06:11.940
> 
> 标签：git, rebase, git-rebase, git-tag

*(This seems like it should be very easy to do, yet I'm coming up empty on searches so far.)*

I have a body of code from an upstream source, with various versions tagged in it on various branches.

I am working on my "develop" branch which was based on tag "v1.0". many versions have come out since then, but while "v2.0" is interesting, I want to rebase my develop branch to "v1.5" and continue working there (assume I don't plan to feed that back upstream). Maybe later I'll rebase it again to "v2.0".

(For this purpose assume "v1.x"s are all tags on the same branch. For extra credit we can assume "v2.0" is a tag on another branch.)

I was able to create the initial "develop" branch based on the "v1.0" tag easily enough, but rebase appears to only work with branches. Can't one rebase using tags as well? If not, what's the right way to accomplish that (so as to have exactly the same effect as rebasing to a particular tag)?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T03:14:41.387

You would use the following command:

```
git rebase --onto v1.5 v1.0 develop 
```

The `develop` part of the command must be a branch, but the other two can be whatever you want.

# google-apps-script - 日历电子标签不匹配错误 - 已采取预防措施，仍然出现错误

> ID：12469856
> 
> 赞同：1
> 
> 时间：2012-09-18T03:06:33.263
> 
> 标签：google-apps-script, google-calendar-api, google-sheets

我正在为我的工作场所创建一个 Google Apps 电子表格名册。实际的花名册相当简单，只需进行一些计算和一个 onEdit 脚本即可更改单元格颜色，具体取决于该小时的职责。

这个新花名册的一个主要部分是能够为每个人创建谷歌日历事件以通知他们轮班。名册已创建，事件应每月创建。在月初，负责花名册的工作人员将运行一个函数，并为每个人创建该月的所有事件。（我希望这是有道理的...）

我的代码在下面列出。名为“Splash”的工作表（工作表索引 0）包含团队中每个员工的姓名和电子邮件。名册将在工作表索引 1 到无穷大上创建。

在名册表本身上，A 列包含每个员工的姓名。B 列包含开始时间，C 列包含结束时间。

```
function sendInvites() {
  // Gather Prelim Information
  var splash = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Splash");
  var nameRange = splash.getRange("A6:B9"); // Need to change this to be the full staff list in Splash

  var inviteSheet = Browser.inputBox("Sheet to send invites from (Number)", Browser.Buttons.OK_CANCEL)
  var days = SpreadsheetApp.getActiveSpreadsheet().getSheets()[inviteSheet];
  var dayRange;

  //Initiate iteration through Names, according to the Splash sheet
  for(nameRow=nameRange.getRow(); nameRow<=9; nameRow++){ //Change to Corresponding iterate
    // Gather Name and Email information for the each person
    var col = nameRange.getColumn();
    var row = nameRow;
    var name = splash.getRange(row, col).getValue();
    var email = splash.getRange(row, col+1).getValue();
    var cal = CalendarApp.getCalendarById(email);

    //Initiate iteration through Days, according to the Roster
    for(i=0; i<=6; i++){
      //Specify Day Ranges
      switch(i){
        case 0: //Saturday
          dayRange = days.getRange("A1:O6"); break;
        case 1: //Sunday
          dayRange = days.getRange("A10:O15"); break;
        case 2: //Monday
          dayRange = days.getRange("A19:O41"); break;
        case 3: //Tuesday
          dayRange = days.getRange("A45:O67"); break;
        case 4: //Wednesday
          dayRange = days.getRange("A71:O93"); break;
        case 5: //Thursday
          dayRange = days.getRange("A97:O119"); break;
        case 6: //Friday
          dayRange = days.getRange("A123:O145"); break;
      }

      //Find Name in dayRange
      for(dayRow=dayRange.getRow(); dayRow<=dayRange.getLastRow(); dayRow++){
        var searchCol = dayRange.getColumn();
        var searchRow = dayRow;        
        var searchName = days.getRange(searchRow, searchCol).getValue();

        if (name==searchName){
          // Gather and format Date and Time information for invitation
          var eventName = "Phones";
          var date = Utilities.formatDate(dayRange.getValue(), "GMT+1000", "EEE MMM dd yyyy");
          var startCell = days.getRange(searchRow, searchCol+1).getValue();
          var endCell = days.getRange(searchRow, searchCol+2).getValue();

          if (startCell != ""){
            var startTime = date + " " + Utilities.formatDate(startCell, "GMT+1000", "HH:mm:ss");
            var endTime = date + " " + Utilities.formatDate(endCell, "GMT+1000", "HH:mm:ss");

            //Create a calendar event with the details above
            Utilities.sleep(500); //Pause event creation for half second, to allow the last event to be fully created (Avoids "Calendar: Mismatch: etags error")
            cal.createEvent(eventName, new Date(startTime), new Date(endTime)).removeAllReminders();
          }

          continue;
        }
      }
    }
  }
} 
```

我现在遇到的问题是逻辑有效，但并非所有事件都在创建。我正在与包括我自己在内的四名员工进行测试。它只会在抛出 Calendar: Mismatch: etags 错误之前完成 Names 的一次半迭代。

我知道当日历一次更改两次时会发生此错误。我在事件创建之前添加了半秒的睡眠时间，以允许这样做。现在已经很少见了，但仍在发生。我试过让它睡 2 秒，我试过把它移到不同的地方。所有这一切仍将导致 eTags 错误。

不太确定从这里去哪里。我觉得名册几乎可以使用了，但还不够稳定。

如果您有任何想法或需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:31:55.143

您将需要尝试/捕获以避免“etags”错误。产生错误的操作是 removeAllReminders()，因为在 Google 的分布式存储中创建一个新的联系人对象需要一些时间。

我使用辅助函数来避免这些可怕的“etags”错误：

```
function retryMethod(object, method) {
  for (i=0; i<10; i++) {
    try {
      return object[method]();
    }
    catch (e) {
      if (e.message.indexOf('Mismatch: etags') == -1) throw e;
      Utilities.sleep(500);
    }
  }
  throw new Error('retryMethod failed after retrys method ', method, ' object ', object)
} 
```

然后，您可以将“cal.createEvent(”行重写为：

```
retryMethod(cal.createEvent(eventName, new Date(startTime), new Date(endTime)), 'removeAllReminders'); 
```

记得检查 createEvent 是否为空。

实际上，我当前的辅助函数略有不同，因为大多数引发“etags”错误的函数调用实际上都是成功的。

# c - 叉子重复两次？

> ID：12469861
> 
> 赞同：1
> 
> 时间：2012-09-18T03:06:57.567
> 
> 标签：c, fork

```
#include <stdio.h>
#include <unistd.h>

int main()
{
    int a = 1, b = 1;
    int rval, pid;

    pid = fork();
    switch(pid)
    {
        case -1:
            printf("I am bad.\n");

        case 0:
            printf("I am in child.\n");
            rval = a + b;
            printf("leaving child.\n");
        default:
            wait();
            printf("I am back to parent.\n");
            //wait();
            printf("%d \n", rval);
            printf("leaving parent.\n");
    }
    return 0;
} 
```

我期待孩子的陈述，然后是父母。但不应该有任何重复。反而，

```
>> ./demo
I am in child.
leaving child.
I am back to parent.
2 
leaving parent.
I am back to parent.
134513584 
leaving parent. 
```

父母重复两次。这是为什么？此外，父母是如何`2`从孩子那里得到的？Child 有自己的虚拟内存`a`，`b`那么我们如何将结果传递给 parent 呢？我很困惑。

* * *

进一步调查当我插入时`return 0`，`case 0`它不会重复。看起来 switch 语句仍在继续。我错过了关于 switch 语句的一些东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T03:10:29.130

在 C 语言中，switch 语句默认通过 case；您必须在每个案例的末尾放置一个`break;`（或）语句，否则，例如，子代码将同时执行子代码和父代码。`return`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T03:10:30.657

您的案例中没有任何`break`陈述，因此每个案例都属于下一个案例。带有 的孩子`pid == 0`将执行*0*和*default* case 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T05:57:07.503

由于 fork 将两个 pid 的一个返回给父进程，另一个返回给子进程，因此对于父进程，它返回 > 0 `pid`，对于子进程，它返回 0 作为 pid。因此 case for 0 被执行，但`no break`默认情况下也被执行，因为在没有 break 语句的情况下 switch case 失败......

# mysql - 使用 IF 语句更新查询

> ID：12469862
> 
> 赞同：-1
> 
> 时间：2012-09-18T03:07:03.770
> 
> 标签：mysql, sql

我需要创建一个带有`IF`语句的 MySQL 查询。这是一个数据库模式：

```
CREATE DATABASE my_db;
USE my_db;
CREATE TABLE IF NOT EXISTS if_table(
    id INTEGER unsigned,
    field_1 INTEGER unsigned,
    field_2 INTEGER unsigned,
    field_3 INTEGER unsigned,
    PRIMARY KEY (id)
); 
```

如何编写`UPDATE`对应于下一个伪代码的查询？

```
if field_2 equals 0 then field_1 = field_1 + 1
else field_3 = field_3 + 2 
where id == 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:09:16.357

~~试试这个内联`IF`语句~~

 ~~```
SELECT IF(field_2 = 0, field_1 + 1, field_3 + 2) AS `Result`
FROM tableName
WHERE ID = 1 
```~~ 

~~或者如果你想更新值，~~

 ~~```
UPDATE tableName
SET field_1 = IF(field_2 = 0, field_1 + 1, field_1),  
    field_3 = IF(field_2 = 0, field_3, field_3 + 2)
WHERE ID = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:15:31.280

你可以用两个查询来做到这一点。

```
UPDATE table_name SET field_1 = field_1 + 1 WHERE id = 1 AND field_2 = 0;
UPDATE table_name SET field_3 = field_3 + 2 WHERE id = 1 AND field_2 != 0; 
```

如果您只想要一个查询，那么

```
UPDATE table_name
SET field_1 = IF(field_2 = 0, field_1 + 1, field_1),
SET field_3 = IF(field_2 = 0, field_3, field_3 + 2),
WHERE ID = 1 
```~~

# jquery - CSS过渡可调节高度

> ID：12469864
> 
> 赞同：0
> 
> 时间：2012-09-18T03:08:03.537
> 
> 标签：jquery, css, button, html, transitions

我发现了这个[How can I transition height: 0; 到高度：自动；使用 CSS？](https://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto)我一直在尝试使用这种方法来更改按钮 onclick 上 div 的高度，但由于某种原因，它对我不起作用。抱歉，如果有很多不必要的信息。

jQuery

```
function playSound(soundfile){
      document.getElementById("dummy").innerHTML = 
      "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
}

   $('button').bind('click', function(e) {
         e.preventDefault();

   $('.taller').toggleClass('animated');
   }); 
```

HTML

```
 <div id="container">
     <span id="dummy"></span>
     <button onclick="playSound('sound/button-30.wav','sound/button30.mp3');">PlaySound</button>                         
     <div class="taller">I SHOULD BECOME TALLER</div>
  </div> 
```

CSS

```
#container{
background-color:lightblue;
width:960px;
height:550px;
}

.taller{
overflow:hidden;
background:#000;
color:#fff;
width:80px;
max-height:15px;
-webkit-transition: max-height .5s linear;
-moz-transition: max-height .5s linear;
transition: max-height .5s linear;
}

.animated{
max-height:100px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:56:40.713

这是你要找的吗？

**[现场演示](http://jsfiddle.net/loktar/QXYRJ/)**

将其更改为高度而不是最大高度，并且效果很好。在切换时它会增长/缩小。你的问题有点含糊，所以我不确定这是否是你想要的。另外，为什么不把播放声音功能放在点击绑定中呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:54:56.097

我将您的代码放入 jsfiddle 并对其进行了测试。它工作得很好；我没有对它做任何事情。您可以在此处查看您的代码[http://jsfiddle.net/WY7gM/](http://jsfiddle.net/WY7gM/)

# sql - sp_send_dbmail 未从消息中的查询发送多行

> ID：12469867
> 
> 赞同：0
> 
> 时间：2012-09-18T03:08:25.443
> 
> 标签：sql, sp-send-dbmail

我正在从 xp_sendmail 切换一些代码，但没有从 sp_send_dbmail 获得我期望的结果。我正在尝试的查询如下，电子邮件中的消息正文仅包含一行：

我的第一个标题条目

Microsoft 是否真的将其设计为仅返回单行查询的答案（例如 COUNT(*) 或 TOP 1）？有没有办法将整组行作为文本？

```
DECLARE @tLog TABLE (Sequence INT IDENTITY(1,1), [Rank] TINYINT DEFAULT 1, Line VARCHAR(8000))
INSERT INTO @tLog ([Line]) VALUES ('My first log entry')
INSERT INTO @tLog ([Line]) VALUES ('My first second entry')
/* ... processing ... */
INSERT INTO @tLog ([Rank], [Line]) VALUES (0, 'My first header entry')
/* Global Temp for visibility in sp_send_dbmail */
SELECT Sequence, [Rank], Line 
INTO ##tResult1
FROM @tLog 
ORDER BY [Rank], Sequence
/* to validate table content only */
SELECT Sequence, [Rank], Line 
FROM ##tResult1
ORDER BY [Rank], Sequence
EXEC msdb.dbo.sp_send_dbmail 
    @profile_name = 'MyProfile',
    @recipients='me@myaddress.net',
    @subject = 'test',
    @body_format = 'text',
    @body = '',
    @query_result_header = 0,
    @query_no_truncate = 1,
    @query = 'SELECT Line FROM ##tResult1 ORDER BY [Rank], Sequence'

DROP TABLE ##tResult1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:47:55.980

由于 an`RTRIM()`可能返回其输入值不变，因此结果的`RTRIM()`大小与其输入相同 -`varchar(8000)`在这种情况下为 a 。

因此，当系统尝试将结果集格式化为电子邮件时，它会查阅元数据，查看它`varchar(8000)`，然后根据该大小格式化所有结果。

我建议将结果作为附件包含在内，而不是直接在正文中，使用`@attach_query_result_as_file=1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:25:42.020

进一步查看消息正文时，行在那里，但答案是将列填充到其定义的长度，而不是其内容的长度。所以在这种情况下，第二行是 8000 个字符（几行）。

答案是用宽度参数以某种方式缩短列，并缩短列。我已经尝试使用 RTRIM(...) 将 Line 列包装在查询的 select 语句中，但它仍然将该列填充到定义的大小。

# mysql - 查询多个表并在另一个数据库表中更新结果

> ID：12469871
> 
> 赞同：1
> 
> 时间：2012-09-18T03:09:02.427
> 
> 标签：mysql, sql, database

我有一个查询（MySQL），它从同一个数据库中的 4 个表中提取数据。我想做的是运行查询并在发生更改时更新结果并将新记录插入另一个数据库中的单独表中。

```
SELECT a.Created,
a.id 'TicketID',
GROUP_CONCAT((CASE WHEN d.CustomField = 1 THEN d.Content ELSE NULL END)) `CompanyName`,
a.Subject,
c.Name Queue,
b.Name 'Owner',
a.`Status`,
a.LastUpdated,
GROUP_CONCAT((CASE WHEN d.CustomField = 4 THEN d.Content ELSE NULL END)) `Location`,
a.TimeWorked 'TimeWorked',
GROUP_CONCAT((CASE WHEN d.CustomField = 2 THEN d.Content ELSE NULL END)) `OverRide`,
a.Resolved
FROM    rt.Tickets a
    INNER JOIN rt.Users b
        ON a.owner = b.id
    INNER JOIN rt.Queues c
        ON a.queue = c.id
    INNER JOIN  rt.ObjectCustomFieldValues d
        ON a.id = d.ObjectID
GROUP BY a.id 
```

上面的查询是从我们的票务系统中提取数据。

我能够使用以下方法初始插入数据：

```
INSERT INTO Support (Created, TicketID, CompanyName, Subject, Queue, Owner, Status, LastUpdated, Location, Timeworked, OverRide, Resolved)
SELECT a.Created,
a.id 'TicketID',
GROUP_CONCAT((CASE WHEN d.CustomField = 1 THEN d.Content ELSE NULL END)) `CompanyName`,
a.Subject,
c.Name Queue,
b.Name 'Owner',
a.`Status`,
a.LastUpdated,
GROUP_CONCAT((CASE WHEN d.CustomField = 4 THEN d.Content ELSE NULL END)) `Location`,
a.TimeWorked 'TimeWorked',
GROUP_CONCAT((CASE WHEN d.CustomField = 2 THEN d.Content ELSE NULL END)) `OverRide`,
a.Resolved
FROM    rt.Tickets a
    INNER JOIN rt.Users b
        ON a.owner = b.id
    INNER JOIN rt.Queues c
        ON a.queue = c.id
    INNER JOIN  rt.ObjectCustomFieldValues d
        ON a.id = d.ObjectID
GROUP BY a.id 
```

但是，当尝试更新已经存在的数据或添加其他新数据时，我会出错。

```
UPDATE Support
SELECT a.Created,
a.id 'TicketID',
GROUP_CONCAT((CASE WHEN d.CustomField = 1 THEN d.Content ELSE NULL END)) `CompanyName`,
a.Subject,
c.Name Queue,
b.Name 'Owner',
a.`Status`,
a.LastUpdated,
GROUP_CONCAT((CASE WHEN d.CustomField = 4 THEN d.Content ELSE NULL END)) `Location`,
a.TimeWorked 'TimeWorked',
GROUP_CONCAT((CASE WHEN d.CustomField = 2 THEN d.Content ELSE NULL END)) `OverRide`,
a.Resolved
FROM    rt.Tickets a
    INNER JOIN rt.Users b
        ON a.owner = b.id
    INNER JOIN rt.Queues c
        ON a.queue = c.id
    INNER JOIN  rt.ObjectCustomFieldValues d
        ON a.id = d.ObjectID
GROUP BY a.id 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:55:41.233

鉴于您使用的用户在两者中都具有适当的权限，您可以这样做：

```
INSERT INTO destination_database.table_name
(SELECT source_database.source_table.field_name
FROM source_database.source_table); 
```

在您的情况下，您的目标表必须具有您选择的 11 个字段，并且具有可比较的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:31:51.470

可以定义一个视图，而不是自己手动管理“派生表”。然后数据库可以在源表中反映它们所做的更改。

见：[http ://www.w3schools.com/sql/sql_view.asp](http://www.w3schools.com/sql/sql_view.asp)

# c# - 如何为客户端-服务器通信构建数据包

> ID：12469872
> 
> 赞同：0
> 
> 时间：2012-09-18T03:09:07.383
> 
> 标签：c#, structure, packets

我已经创建了我的`client-server`应用程序，但整个过程仍然有些混乱。是什么`packets`？`packet`以及发送 a和发送 a 有什么区别`message`（就像我通常做的那样）。

所以请，我期待一个很好的解释：

1.  是什么`packets`？
2.  如何构建它们？
3.  如何在我的`client-server`应用程序中使用它们进行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:25:08.890

对于发送者和更高级别的数据包等同于消息，您发送数据包或消息。在接收端，一条消息可能被分成多个数据包。这种拆分最常见的是使用 TCP 连接，您可能需要执行多个接收调用（每个都返回一个“数据包”）才能接收完整的消息。

更令人困惑的是，在较低级别上，单个 TCP 或 UDP 消息（带有附加到数据的 TCP/IP 标头）也可以称为数据包。在更低的层次上，以太网帧也可以称为数据包。

更令人困惑的是，TCP 连接没有真正的消息概念，它只是一个字节流。消息只是 TCP 之上的一个人为概念。另一方面，UDP 是不同的消息。

简而言之，在提及您发送或接收的数据时，继续使用“消息”一词可能是最简单的。

# css - 如何编写针对所有移动设备和平板电脑的 CSS 媒体查询？

> ID：12469875
> 
> 赞同：48
> 
> 时间：2012-09-18T03:09:11.300
> 
> 标签：css, responsive-design, media-queries

```
@media only screen and (max-device-width : 640px) {
/* Styles */
}

@media only screen and (max-device-width: 768px) {
/* Styles */
} 
```

这就是我到目前为止所拥有的。我正在开发的移动网站的 PSD 模型是 640 像素宽。另一个是平板电脑版本的网站，是 768px。我能够通过仅使用最大宽度在我的网络浏览器中测试该网站，但现在是时候让该网站在设备上运行了，它仍在呈现常规的全尺寸网页。上面的两个查询是我最好的猜测。我哪里错了？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2017-03-16T13:43:53.320

这可以通过 4 级媒体查询来完成：（[浏览器支持非常好 - CaniUse](http://caniuse.com/#feat=css-media-interaction)）

## [互动媒体功能](https://www.w3.org/TR/mediaqueries-4/#mf-interaction)

这里的想法是根据设备的**功能**定位设备。（也就是说，检查倾向于移动目标的设备的*大小*或*分辨率）*

**[指针](https://www.w3.org/TR/mediaqueries-4/#pointer)媒体功能**查询设备使用的指针机制的质量。

**[悬停](https://www.w3.org/TR/mediaqueries-4/#hover)媒体功能**查询用户使用给定设备将鼠标悬停在页面上的元素上的能力。

所以要回答这个问题...

**移动设备/桌子的相似之处在于：**

## 1）设备的主要输入机制的准确性是有限的。

这意味着我们可以使用以下媒体查询：

```
@media (pointer:coarse) {
    /* custom css for "touch targets" */
} 
```

```
div {
  width: 400px;
  height: 200px;
  color: white;
  padding: 15px;
  font-size: 20px;
  font-family: Verdana;
  line-height: 1.3;
  background: green;
}
@media (pointer:coarse) { 
  div {
    background: red;
  }
}
```

```
<h2>The <a href="https://www.w3.org/TR/mediaqueries-4/#pointer">pointer media feature</a> queries the quality of the pointer mechanism used by the device.</h2>
<div>The background here will be green on 'desktop' (devices with an accurate pointing mechanism such as a mouse) and red on 'mobile' (devices with limited accuracy of primary input mechanism) </div>
```

## [Codepen 演示](http://codepen.io/danield770/pen/GWMVgx?editors=1100)

## 2) 主指点系统无法悬停

所以我们的媒体查询看起来像这样：

```
@media (hover: none) { 
   /* custom css for devices where the primary input mechanism cannot hover 
   at all or cannot conveniently hover
} 
```

**注意：** Chrome/Android 59 之前的版本需要`on-demand`悬停/任意悬停媒体查询的值。此值后来从规范中删除，[Chrome 59 版不再需要](https://developers.google.com/web/updates/2017/04/chrome-59-deprecations#remove_on-demand_value_for_hoverany-hover_media_queries)此值。因此，要支持旧版本的 Android，您需要

```
@media (hover:none), (hover:on-demand) { 
  /* custom css for "touch targets" */
} 
```

```
div {
  width: 400px;
  height: 150px;
  color: white;
  padding: 15px;
  font-size: 20px;
  font-family: Verdana;
  line-height: 1.3;
  background: green;
}
@media (hover:none), (hover:on-demand){ 
  div {
    background: red;
  }
}
```

```
<h2>The <a href="https://www.w3.org/TR/mediaqueries-4/#hover">hover media feature</a> queries the user’s ability to hover over elements on the page</h2>
<div>The background here will be green on 'desktop' (devices which support hover) and red on 'mobile' (devices which don't [easily] support hover ) </div>
```

## [Codepen 演示](http://codepen.io/danield770/pen/yMoNzE?editors=1100)

**注意：**

即使您要将鼠标连接到手机/平板电脑，悬停媒体功能仍然匹配`none`，因为它们的**主要**交互模式不支持悬停。

如果我们确实想考虑*辅助*设备，我们可以使用[任意指针和任意悬停功能](https://www.w3.org/TR/mediaqueries-4/#any-input)

因此，如果我们希望将与指针设备连接的移动设备视为“桌面”，我们可以使用以下内容：

```
@media (any-hover: hover) { ... } 
```

## 额外阅读

*   [交互媒体功能及其潜力（假设不正确）](https://dev.opera.com/articles/media-features/)
*   [https://css-tricks.com/touch-devices-not-judged-size/](https://css-tricks.com/touch-devices-not-judged-size/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-27T17:54:25.047

*编辑说明：*这是一种特别适用于旧浏览器的方法。已接受的答案已更新为更现代的 CSS，它确实具有使这变得容易的媒体查询。我主要建议将我的旧代码用于特定于旧浏览器的 CSS。

我建议使用以下媒体标签，而不是最初使用特定宽度，或者弄乱方向或任何其他废话……

```
@media only screen and (min-resolution: 117dpi) and (max-resolution: 119dpi), only screen and (min-resolution: 131dpi) and (max-resolution: 133dpi), only screen and (min-resolution: 145dpi) and (max-resolution: 154dpi), only screen and (min-resolution: 162dpi) and (max-resolution: 164dpi), only screen and (min-resolution: 169dpi) {
  /* Your touch-specific css goes here */
}
@media only screen and (min-resolution: 165dpi) and (max-resolution: 168dpi), only screen and (min-resolution: 155dpi) and (max-resolution: 160dpi), only screen and (min-resolution: 134dpi) and (max-resolution: 144dpi), only screen and (min-resolution: 120dpi) and (max-resolution: 130dpi), only screen and (max-resolution: 116dpi) {
  /* Your click-specific css goes here */
} 
```

你用这些标签做什么？设置悬停和点击与触摸事件的内容。

除了上面提到的灰色区域中的少数设备外，触摸设备的分辨率与桌面设备非常不同。不要——不要——设置设计元素，而是设置导航元素。一些通俗的人可能会说，一些疯狂的 max-width 可能会更好，但是有这么多高清手机，设备 max-width 很快变得无用是荒谬的。

但是，您*应该*使用宽度媒体宽度查询。但是，不要为最大设备宽度而烦恼，只需最大宽度和最小宽度。让上面的标签解决您的触摸与非触摸用户，让 min-width 与 max-width 根据窗口大小解决并调整站点*视觉效果*。

此外，使用方向来确定它是否是移动的只是愚蠢的，因为即使是显示器也可以放置在各种方向上（我见过的 3 显示器的常见设置是纵向中心显示器和横向侧显示器。）

对于宽度视图，专注于使您的网站在各种宽度上保持整洁，忽略实际访问它的设备类型，只需确保您的屏幕以各种尺寸清晰显示即可。这是适用于台式机和移动设备的好设计。如果他们将您的网站放在屏幕左上角的一个小窗口中以供参考（或快速分散注意力），同时在其他地方使用他们的大部分屏幕空间，那么对于他们以及移动用户来说，您的较小的宽度是专为。尝试任何其他方法很快就会让 Web 开发走上一条非常痛苦和弄巧成拙的道路。因此，对于那些较小的宽度，您可以将宽度设置为任何您想要的，但我会包括一些我个人喜欢的。

所以总的来说，你应该有这样的东西......

```
@media only screen and (min-resolution: 117dpi) and (max-resolution: 119dpi), only screen and (min-resolution: 131dpi) and (max-resolution: 133dpi), only screen and (min-resolution: 145dpi) and (max-resolution: 154dpi), only screen and (min-resolution: 162dpi) and (max-resolution: 164dpi), only screen and (min-resolution: 169dpi) {
    #touch_logo {
       display: inherit;
    }
    #mouse_logo {
       display: none;
    }
  /* Your touch-specific css goes here */
}
@media only screen and (min-resolution: 165dpi) and (max-resolution: 168dpi), only screen and (min-resolution: 155dpi) and (max-resolution: 160dpi), only screen and (min-resolution: 134dpi) and (max-resolution: 144dpi), only screen and (min-resolution: 120dpi) and (max-resolution: 130dpi), only screen and (max-resolution: 116dpi) {
    #touch_logo {
       display: none;
    }
    #mouse_logo {
       display: inherit;
    }
  /* Your click-specific css goes here */
}
@media (min-width: 541px){
  /* Big view stuff goes here. */
}
@media (max-width: 540px) and (min-width: 400px){
  /* Smaller view stuff goes here. */
}
@media (max-width: 399px){
  /* Stuff for really small views goes here. */
} 
```

不过，不要忘记在页面头部包含以下内容：

```
<meta name='viewport' content="width=device-width, initial-scale=1" /> 
```

在某些情况下它可能仍然会中断，但这应该比许多其他解决方案更简洁和更完整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-02T10:57:37.573

您的主要桌面样式位于 CSS 文件（1024 像素及以上）的正文中，然后用于特定的屏幕尺寸：

```
@media all and (min-width:960px) and (max-width: 1024px) {
  /* put your css styles in here */
}

@media all and (min-width:801px) and (max-width: 959px) {
  /* put your css styles in here */
}

@media all and (min-width:769px) and (max-width: 800px) {
  /* put your css styles in here */
}

@media all and (min-width:569px) and (max-width: 768px) {
  /* put your css styles in here */
}

@media all and (min-width:481px) and (max-width: 568px) {
  /* put your css styles in here */
}

@media all and (min-width:321px) and (max-width: 480px) {
  /* put your css styles in here */
}

@media all and (min-width:0px) and (max-width: 320px) {
  /* put your css styles in here */
} 
```

这将涵盖几乎所有正在使用的设备 - 我将专注于为范围末端的尺寸（即 320、480、568、768、800、1024）设置正确的样式，而对于所有其他设备，它们只是响应可用的大小。

另外，不要在任何地方使用 px - 使用 em 或 %

# javascript - jQuery.validate.js equalTo 拒绝工作

> ID：12469878
> 
> 赞同：0
> 
> 时间：2012-09-18T03:09:47.877
> 
> 标签：javascript, jquery

我正在尝试验证我的一个密码是否等于另一个密码。系统不断标记密码不等于错误。

让我发布我的代码：

```
<div class="fieldWrapper">
              <label for="password" id="id_password">Password: </label>
              <input id="id_password" type="password" placeholder="Password" name="password" maxlength="128" class="valid">
           </div>

<div class="fieldWrapper">
              <label for="password_verification">Confirm:</label>
              <input id="id_password_verification" type="password" placeholder="Confirm" name="password_verification" maxlength="128">
           </div>

$(document).ready(function()
{
  $("#signup-form").validate({
    rules: {
        password: {
            required: true,
            minlength: 5
        },

        password_verification: {
            required : true,
            equalTo: "#id_password"
        }
    },
    messages: {
        password: {
            required: "Please provide a password",
            minlength: "Your password must be at least 5 characters long"
        },

        password_verification: {
            required: "Please enter your password again",
            equalTo: "Please enter the same password as above"
        },
    },
    submitHandler: function(form) {
        form.submit();
    }
  });
}); 
```

有谁知道我在这里哪里出错了？请注意，我的表单具有 id signup-form。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:59:00.940

您`id`的 HTML 中有重复项：

`<label for="password" id="id_password">Password: </label>`

从. `id`_`label`

# objective-c - 在 UITapGesture 处理程序中访问 UIImageView 的标记值

> ID：12469887
> 
> 赞同：0
> 
> 时间：2012-09-18T03:10:58.830
> 
> 标签：objective-c, ios

我有一个 UITapGesture 附加到图像视图。我想在几张图片中重复使用相同的手势。为此，处理程序方法需要能够识别点击来自哪个图像。下面的方法尝试访问发送者图像视图的标记值。我基于这个问题的答案[https://stackoverflow.com/a/4425059/549273](https://stackoverflow.com/a/4425059/549273)。但是，我在调试器中收到一个错误，显示“无法识别的选择器已发送到实例”。我完全按照答案中的内容进行了尝试，并且还尝试了将发送方作为参数附加到方法中，如下所示。尼赫尔方法有效。有人可以告诉我我做错了什么吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    topLeftImage.userInteractionEnabled = YES;
    [topLeftImage addGestureRecognizer:singleTap];

}

- (void)handleSingleTap:(UITapGestureRecognizer*)gestureView andSender:(id)sender {

    switch (((UIGestureRecognizer *)sender).view.tag)
    {
        case 0:
            NSLog(@"zero");
        case 1:
            NSLog(@"one");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:22:37.260

从 UIGestureRecognizer 类参考：

> 调用的操作方法必须符合以下签名之一：
> 
> *   (void)handleGesture；
> *   (void)handleGesture:(UIGestureRecognizer *)gestureRecognizer;

您的方法 ( `- (void)handleSingleTap:(UITapGestureRecognizer*)gestureView andSender:(id)sender`) 不符合任一签名。除此之外，当您创建手势识别器时，您正在使用`@selector(handleSingleTap:)`与此功能不匹配的操作，因此甚至不应该调用它。试试这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    topLeftImage.userInteractionEnabled = YES;
    [topLeftImage addGestureRecognizer:singleTap];

}

- (void)handleSingleTap:(UIGestureRecognizer*)gestureView {

    switch (gestureView.view.tag)
    {
        case 0:
            NSLog(@"zero");
        case 1:
            NSLog(@"one");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:28:01.607

同意@Inafziger（像往常一样），但这里有一个更好的方法：将不同的手势识别器放在不同的视图上。

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[topLeftImage addGestureRecognizer:singleTap];

// just like first as far as the target and selector, but a distinct object
singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
[bottomRightImage addGestureRecognizer:singleTap];

// and so on ... 
```

现在，处理程序可以只询问 gr 它附加到哪个视图。没有标签，没有 switch 语句。

```
- (void)handleSingleTap:(UIGestureRecognizer*)gr {
    UIImageView *theTappedView = (UIImageView *)gr.view
} 
```

# java - 您如何在 Java 中开发/部署 BIG 企业应用程序

> ID：12469889
> 
> 赞同：7
> 
> 时间：2012-09-18T03:11:09.500
> 
> 标签：java, spring, tomcat, cloud, development-environment

在过去的 2 年里，我一直在 tomcat 上使用 java + spring，我的应用程序变得非常庞大。现在启动时间几乎是 3 分钟，在开发过程中会消耗大量资源。

所以我对如何让开发软件再次变得有趣的想法很感兴趣。我查看了 Spring DM/Gemini 蓝图以使其成为模块化，但体验并不方便。

现在即将添加更多模块，考虑开发另一个 Web 应用程序并使用 Spring 集成进行消息传递。显然，在一台台式电脑上开发它会是一个非常痛苦的经历。

有人有云开发经验吗？我如何改进所有这些时间和资源消耗的任务？云端开发对我有帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T03:26:53.530

首先，解决瓶颈问题。随着他们的成长，他们倾向于潜入项目。最初的设计为了满足疯狂的最后期限而一次又一次地被妥协，现在臃肿已经扼杀了一个曾经活跃的应用程序。

不要猜测问题，而是使用真实数据来确定是什么让您的应用程序变慢。使用诸如 jProfiler 之类的分析器：[http ://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

接下来，使用您所学的知识来提高新模块的效率。最重要的是，改变技术并不是万能的，因为所有技术都可能出现瓶颈。您必须找到问题背后的原因并解决它。

一旦解决了瓶颈，您就可以针对一项新技术创建一些测试项目，看看它是否更快、更容易，是否能满足您的需求。但是，只需解决当前堆栈上的问题即可。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T03:31:19.197

这是典型的 java+spring web 应用程序的常见问题。随着年龄的增长，它们开始变得臃肿，上下文加载开始变得痛苦。我可以提出一些建议来缓解这个问题，但只有你才能根据你的应用程序中的具体情况做出最适合你的判断。

1.  在进行开发时不要严重依赖服务器。编写单元测试并在 servlet 容器外运行它们。Spring对此有很好的支持。

2.  在 Rest/Soap Web 服务中拆分您的业务逻辑（审慎而谨慎地）。这使您可以自由地开发和测试独立于核心业务逻辑的 UI。

3.  如果使用 maven/gradle，请尝试 jetty 插件。它可以继续扫描更改并自动重新加载webapp（我认为tomcat插件也可以这样做）。它能够在重启之间存储会话，因此您不会受到重启的影响。请参阅此了解更多详细信息[如何加快 Maven 和 Netbeans](https://stackoverflow.com/questions/7471233/how-can-i-speed-up-maven-and-netbeans/7477277#7477277)

4.  [付费选项] 可以试试 JRebel。

5.  使用持续集成/测试/部署您的应用程序的 CI 服务器，减轻您的开发人员机器的一些负担。

# android - TextView 在将其 layoutparams 设置为 fill_parent 时垂直写入文本

> ID：12469893
> 
> 赞同：4
> 
> 时间：2012-09-18T03:12:33.990
> 
> 标签：android, android-layout, textview

我正在尝试添加`TextView`到扩展的视图中`LinearLayout`。当我将 layoutparams 的宽度设置为`fill_parent`or`wrap_content`时，里面的文字`TextView`会垂直显示，如下所示。

例如

```
 T
 E
 X
 T 
```

但是，当我将宽度设置为某个固定数字时，它将正常显示或按我的预期显示。

例如文本

我的问题是为什么会发生这种情况以及如何解决它，即我应该如何以编程方式设置以便`TextView`可以水平书写文本而无需为其设置固定宽度，例如设置`fill_parent`或`wrap_content`？

`ilGallery`这是扩展的父级 XML 代码的设置`LinearLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.illib.ilgallery.view.ILGallery
        android:id="@+id/galleryLayout"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"/>

</LinearLayout> 
```

以下是我如何初始化其中的孩子的代码：

```
ilViewPager = new ILViewPager(context);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);
ilViewPager.setLayoutParams(params); 
ilgallery = this;

//initialize default header and footer view
LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

headerView = new TextView(context);
headerView.setLayoutParams(params2);
((TextView)headerView).setTextSize(TypedValue.COMPLEX_UNIT_PX,40);
((TextView)headerView).setText("hello");

footerView = new TextView(context);
footerView.setLayoutParams(params2);    
((TextView)footerView).setTextSize(TypedValue.COMPLEX_UNIT_PX,40);
((TextView)footerView).setText("hello2"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:09:35.160

您的 LinearLayout 中似乎只有一个项目。请将 LinearLayout 的方向设置为`"horizontal"`，如下所示：

```
android:orientation="horizontal" 
```

此外，尽可能不要从头开始创建新的 LayoutParams 对象，您应该从当前布局中获取 LayoutParams 并对其进行修改，如下所示：

```
LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams)ilViewPager.getLayoutParams();
lp.<change-any-values>;
ilViewPager.setLayoutParams(lp); 
```

# css - Dreamweaver cs6 中的 css 入门。菜鸟问题

> ID：12469895
> 
> 赞同：0
> 
> 时间：2012-09-18T03:12:58.830
> 
> 标签：css, dreamweaver

我最近刚刚下载了dreamweaver cs6。我一直在网上学习教程，但我遇到了一些障碍。问这个问题我几乎很尴尬，因为我知道我一定遗漏了一些明显的东西，但它是这样的：

我现在正在学习使用纯 CSS 制作下拉菜单的教程。在实现前几行 CSS 代码后，我在下拉菜单中丢失了所有子菜单。在拉出我的头发试图找出原因后，我花了 2 个小时的大部分时间，终于在 Firefox 中进行了预览。（不敢相信我之前没有尝试过。）在我的浏览器中似乎一切正常，但我想知道：有没有办法可以在 Dreamweaver 中查看它？每次我想检查某些东西时，进出浏览器真的很不方便。就像我说的，我基本上（不是真的基本上，我只是）在所有网页设计方面都是一个完全的菜鸟。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:14:29.907

Dreamweaver 只是一个 IDE，而不是浏览器。它不执行`:hover`事件和 JavaScript。您需要预览您所做的使用`F12`并检查出来。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:24:41.463

简短的回答：没有。至少，没有合理的期望你应该这样做。网页设计的问题在于，正确做事的唯一真正方法是手动编码并在另一个窗口的浏览器中预览它——这对习惯于所见即所得程序的“设计师”来说确实是一种文化冲击，比如Photoshop 和 InDesign，但 Web 是一种完全不同的媒体，其中底层标记最重要，并且可以被浏览器重新解释。

Dreamweaver 历来具有良好的 WYSIWYG 渲染（感谢他们多年前与 Opera 的合作），但最终它仍然不是最好的方式。

我注意到微软的“用于 HTML/JS 应用程序的表达式混合”（有一大口）实际上具有一流的设计时所见即所得支持，因为它直接与 IE 实例一起工作，因此您可以`:hover`在设计时测试诸如和客户端脚本之类的东西时间 - 不幸的是它不适合实际的“网站” - 只是“桌面” HTML，这是一种耻辱。

# c# - 使用 NHibernate 将行转换为属性/列

> ID：12469900
> 
> 赞同：0
> 
> 时间：2012-09-18T03:13:57.690
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate, nhibernate-mapping

使用 NHibernate 将下表结构建模为下面的“透视”域模型的最佳方法是什么？

映射属性是微不足道的；它确实是我不确定的行到属性/虚拟列的枢纽。

## 数据库结构

属性表

```
Id      Name                Type
Attr1   Some Attribute 1    Bool
Attr2   Some Attribute 2    Bool
Attr3   Some Attribute 3    Bool 
```

广告表

```
Id  Name
Ad1 Some ad 1 
```

AdAttributes 表

```
Id    AdId  AttributeId Value
100   Ad1   Attr1       true
101   Ad1   Attr2       false
102   Ad1   Attr3       true 
```

## 所需的 NHibernate 对象模型

```
class Attribute{
    public int Id {get;set;}
    public Type TheType {get;set;}
    public string Name {get;set;}
}

class AdAttribute{
    public int Id{get;set;}
    public Ad Ad{get;set;}
    public Attribute Attribute{get;set;}

    public bool Value{get;set;}
}

class Ad{
    ...

    class Attributes{
        public AdAttribute Attr1{get;set;}
        public AdAttribute Attr2{get;set;}
        public AdAttribute Attr3{get;set;}
    }

    Attributes TheAttributes{get; protected set;}
} 
```

表结构不是一成不变的，但目标是不将属性存储为广告上的列。不同的广告类型会有不同的属性，但它们不是动态变化的，即广告类型 1 总是有 10 个属性，广告类型 2 总是有 5 个属性，等等。

首选原始 NHibernate HBM 答案，但流利的映射还可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:04:04.330

最终，我们决定使用不同的设计来消除这种不必要的复杂性。

Firo 关于 NHibernate 的 IDictionary 支持的观点是一个很好的观点，但是很可能是解决方案

# debugging - 如何有效地使用 W3WP.exe 调试 SharePoint 应用程序？

> ID：12469903
> 
> 赞同：0
> 
> 时间：2012-09-18T03:14:37.317
> 
> 标签：debugging, sharepoint, w3wp.exe

谁能告诉我如何有效地使用 w3wp.exe 来调试共享点应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:13:10.440

如果您在安装了 Visual Studio 的开发计算机上运行 SharePoint - 您可以将调试器附加到 w3wp 进程，然后当您从 Web 界面“触摸”它们时，代码中的断点将被命中。

如何连接调试器 - 这里的 MSDN 文章中有很好的描述[http://msdn.microsoft.com/en-us/library/ff650703.aspx#Performing_Manual_Debugging](http://msdn.microsoft.com/en-us/library/ff650703.aspx#Performing_Manual_Debugging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:53:37.157

如果您想通过 Visual Studio 调试位于共享点中的定制应用程序，我建议您下载 WSP builder，它里面有调试选项。我确信这与上面的帖子做同样的事情，但它也有可能有用的共享点相关的东西。

# sql - SQL 服务器设置和测试

> ID：12469905
> 
> 赞同：0
> 
> 时间：2012-09-18T03:14:53.087
> 
> 标签：sql, sql-server, installation, express

我有一些使用 sql server 2008 R2（服务器管理工​​作室）的基本经验。我想知道是否可以在非服务器计算机（os = MS XP）上安装和使用 express 版本。我有一个简单的网络应用程序，我想测试/练习连接到数据库，并在表上执行简单的插入/删除/更新命令。这可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:19:59.670

是的，SQL Server Express 可以安装在任何 Windows 操作系统上，包括“客户端”操作系统，当然 Windows CE 除外，但那是另外一回事。

您也可以针对 SQL Server Express 使用 SSMS，尽管 SSMS 的某些功能将被禁用，因为服务器不支持它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:20:05.397

是的，这是可以做到的。

> 支持的操作系统：Windows 7、Windows Server 2003、Windows Server 2008、Windows Server 2008 R2、Windows Vista、Windows XP

检查这个：

[Microsoft SQL Server 2008 R2 RTM - Express](http://www.microsoft.com/en-us/download/details.aspx?id=3743)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:20:11.917

Microsoft 确实提供了 SQL express，它提供的功能可能比您现在可能需要的更多。

[http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

您不仅需要 MSSQL，还需要安装当前版本的 IIS。你对MSSQL特别感兴趣有什么原因吗？PHP / MYSQL还有其他“包”安装可用，设置起来更简单，例如XAMPP：

[http://www.apachefriends.org/en/xampp-beta.html](http://www.apachefriends.org/en/xampp-beta.html)

# http - 如何使用 Noir Web 框架进行 HTTP 302 重定向

> ID：12469914
> 
> 赞同：6
> 
> 时间：2012-09-18T03:16:37.597
> 
> 标签：http, clojure, noir

我正在帮助建立一个使用 Clojure 的 Noir 框架的网站，尽管我在 Django/Python 方面有更多的经验。在 Django 中，我习惯了诸如

```
http://site/some/url 
```

被 302 自动重定向到

```
http://site/some/url/ 
```

Noir 比较挑剔，不会这样做。

自动执行此操作的正确方法是什么？由于良好的 URL 是访问站点的重要方式，而且许多用户会忘记尾部斜杠，因此这是我想添加到我的站点的基本功能。

编辑：根据@IvanKoblik 的建议，这最终对我有用：

```
(defn wrap-slash [handler]
  (fn [{:keys [uri] :as req}]
    (if (and (.endsWith uri "/") (not= uri "/"))
      (handler (assoc req :uri (.substring uri
                                0 (dec (count uri)))))
      (handler req)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:02:10.087

我认为这可以通过自定义中间件实现。noir/server 具有公共功能[add-middleware](https://github.com/ghoseb/noir/blob/master/src/noir/server.clj#L68)。

这是 webnoir 的一个[页面](http://webnoir.org/tutorials/middleware)，解释了如何做到这一点。

从[源代码](https://github.com/ghoseb/noir/blob/master/src/noir/server.clj#L40)来看，这个自定义中间件首先被执行，所以你在会话、cookie、url 参数等方面都是自己的。

* * *

我编写了一个非常愚蠢的中间件包装器版本，它检查请求 URI 是否以斜杠结尾，如果不是，则重定向到以斜杠结尾的 URI：

```
(use [ring.util.response :only [redirect]])

(defn wrap-slash [handler]
  (fn [{:keys [uri] :as req}]
    (if (.endsWith uri "/")
      (handler req)
      (redirect
       (str uri "/"))))) 
```

我在我的 ring/mustache 网络应用程序上对其进行了测试，它运行得相当好。

* * *

EDIT1（在您回复我的评论后扩展我的答案。）

您可以使用自定义中间件来添加或去除尾部斜杠的 URL。只需执行以下操作即可去除斜杠：

```
(use [ring.util.response :only [redirect]])

(defn add-slash [handler]
  (fn [{:keys [uri] :as req}]
    (if (.endsWith uri "/")
      (handler (assoc req 
                      :uri (.substring uri 
                                       0 (dec (count uri)))))
      (handler req)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T02:19:31.443

我发现这很有用：

```
(defpage "" []
  (response/redirect "/myapp/")) 
```

/myapp -> /myapp/

# php - 带数据库的 AJAX - 不仅仅是一个表

> ID：12469915
> 
> 赞同：-1
> 
> 时间：2012-09-18T03:16:48.237
> 
> 标签：php, ajax, database

我正在使用 AJAX 从数据库中更新表。桌子很棒，那是我原来的样子。但现在我需要从该数据库中获取更多信息。我想收集纬度和经度值并将它们绘制在地图上。我还想根据表格中的内容限制选择选项。我想过在本地复制查询，但真是浪费。最好的方法是如何做到这一点？谢谢。

[ajax制作表](http://www.topofsteel.com/TestBed/Visitor_08.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:22:10.413

如果您将`latitute`和`longitude`值存储在数据库中，则可以执行此操作。

1.  给图像一个图像映射。
2.  转换`latitute`和`longitude`值以适合图像的尺寸。
3.  使用这些转换的尺寸定位地图。
4.  提供 CSS 着色或背景以及`title`.

要了解图像映射：请参阅[this](http://www.w3schools.com/tags/tag_map.asp)和[this](http://www.javascriptkit.com/howto/imagemap.shtml)。

要了解 CSS：请参阅[此](http://www.w3schools.com/css/css_background.asp).

# javascript - onkeypress 事件在 Mozilla Firefox Web 浏览器中无法正常工作

> ID：12469921
> 
> 赞同：0
> 
> 时间：2012-09-18T03:17:57.007
> 
> 标签：javascript

我有一个带有 onkeypress 事件的 html 表，例如：

```
<tr onclick="RowOnClickEvent();" class="PikerBodyRowStyle" onkeypress="return Test(event);">
                                    <td class="PikerCellStyle" style="width:10px; text-align:left"> <input type="checkbox" value="@item.AccountHeadID" name="chkBox" /> </td>
                                    <td class="PikerCellStyle" style="width:150px; text-align:left">@Html.DisplayFor(modelItem => item.AccountCode)</td>
                                    <td class="PikerCellStyle" style="width:160px; text-align:left">@Html.DisplayFor(modelItem => item.AccountHeadName)</td>
                                </tr> 
```

我的 JavaScript 函数如下：

```
function Test(e) {
//        debugger;
        if (e.keyCode == 13) {
            if (SelectedItemID > 0) {
                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: '@Url.Action("GetData", "ChartsOfAccount")',
                    data: { id: SelectedItemID },
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        alert(data);
                    },
                    error: function (xhr, status, error) {
                        alert(error);
                    }
                });
            }
            return false;
        }
    } 
```

它在 Internet Explorer 中运行良好，但 Mozilla Firefox 无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:24:13.603

改变

```
onkeypress="return Test(e);" 
```

到

```
onkeypress="return Test(event);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:44:46.460

您不能将 javascript 操作赋予 tablerow。相反，您可以使用一些按钮或链接来创建您的操作。你也可以把它放在 td 标签中。javascript 操作在那里工作。

# c# - 如何处理 WCF 服务中的事务

> ID：12469924
> 
> 赞同：4
> 
> 时间：2012-09-18T03:18:29.953
> 
> 标签：c#, wcf

我有一个 WPF 应用程序，并且在按钮单击事件中，我正在调用 WCF 服务来处理其中的事务。一笔交易完成后，我抛出异常。查看事务是否会回滚。但即使我收到错误，事务仍然完成，它不会在数据库中中止。

**UI 按钮事件：**

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    binding = new WSHttpBinding();
    endpoint = new EndpointAddress("http://localhost:6144/EmployeeService.svc/EmployeeService");

    ChannelFactory<IEmployeeService> cf = new ChannelFactory<IEmployeeService>(binding, endpoint);
    IEmployeeService obj = cf.CreateChannel();

    using (TransactionScope ts = new TransactionScope(TransactionScopeOption.RequiresNew))
    {
        try
        {
            obj.UpdateProductData(201, 10);
            throw new Exception("Wrong");
            obj.UpdateProductData(202, 15);
            ts.Complete();
        }
        catch (Exception ex)
        {
            ts.Dispose();                          
        }
    }
} 
```

在 app.config 我已经给出了`"transactionFlow="true"`。

**WCF 服务：**

```
[OperationBehavior(TransactionScopeRequired=true,TransactionAutoComplete=true)]
public bool UpdateProductData(int ProdId, int Amount)
{
    DALClass objDALProd = new DALClass();
    return objDALProd.UpdateProductData(ProdId, Amount);
} 
```

**DAL类：**

```
public bool UpdateProductData(int prodID,int Amount)
{
    try
    {
        objComd.Connection = objConn;
        objConn.Open();
        objComd.CommandText = "UpdateEmployeeData";
        objComd.CommandType = CommandType.StoredProcedure;
        objParam = new SqlParameter("@ProductId", prodID);
        objComd.Parameters.Add(objParam);
        objParam = new SqlParameter("@Amount", Amount);
        objComd.Parameters.Add(objParam);

        objComd.ExecuteNonQuery();
        objConn.Close();
    }
    catch(Exception ex)
    {
        throw new FaultException("Database Error");
    }
    return true;
} 
```

请让我知道我的错误在哪里。事务不会回滚，即使我提出异常第一个事务也不会回滚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:07:03.017

您是否在 WCF 合同中定义了交易流程？

```
[OperationContract]
[TransactionFlow(TransactionFlowOption.Mandatory)] 
```

您是否在客户端和服务器配置上都定义了事务流？

```
<wsHttpBinding>
<binding name="transactionalWsatHttpBinding"
         transactionFlow="true" />
</wsHttpBinding> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T20:10:05.170

1.  You need to enable transactions in both the client and service binding by setting [WSHttpBindingBase.TransactionFlow](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbindingbase.transactionflow.aspx)=true.

2.  You can check on the service being called if the transaction really is flowing by checking if `Transaction.Current.TransactionInformation.DistributedIdentifier` is non-zero. If its zero, then the flow is not working and rollback won't happed.

See the answer to [How can I implement WCF Transaction support on custom class using CoreService?](https://stackoverflow.com/questions/12398027/how-can-i-implement-wcf-transaction-support-on-custom-class-using-coreservice/12411868#12411868) for more details and links.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T14:34:04.750

您的客户端代码对我来说看起来不错，但在服务器端，您总共需要 3 个属性才能使其正常工作。

Service Interface 需要[TransactionFlow] 上的操作。

```
[ServiceContract]
public interface IService
{
  [OperationContract]
  [TransactionFlow(TransactionFlowOption.Allowed)]
  bool UpdateProductData(int ProdId, int Amount);
} 
```

服务类需要类上的 [ServiceBehavior] 和方法上的 [OperationBehavior]：

```
[ServiceBehavior(TransactionIsolationLevel = IsolationLevel.ReadUncommitted)]
public class Service : IService
{
  [OperationBehavior(TransactionScopeRequired=true,TransactionAutoComplete=true)]
  public bool UpdateProductData(int ProdId, int Amount)
  {
    DALClass objDALProd = new DALClass();
    return objDALProd.UpdateProductData(ProdId, Amount);
  }
} 
```

另请注意，这些属性只是实现此目的的一种方法 - 如果需要，您也可以在配置文件中执行所有这些操作。配置文件可以更轻松地将这些设置一次性应用到多个服务。

# android - 如何解决以下错误？

> ID：12469925
> 
> 赞同：0
> 
> 时间：2012-09-18T03:18:32.930
> 
> 标签：android, eclipse

我正在尝试第一次为 Andriod 运行我的测试应用程序。我收到错误 **仍然没有与目标“Android 3.1”兼容的 AVD：正在中止启动。**

# qt4 - 如何为 Qt GUI 小部件使用图像

> ID：12469927
> 
> 赞同：1
> 
> 时间：2012-09-18T03:18:42.120
> 
> 标签：qt4, qtgui

我已经在 Qt 应用程序上工作了一段时间，在重写了很多代码之后，我想给 GUI 一个提升。所以我在看 GUI 设计，并注意到大多数使用图像而不是原生按钮/滚动条/等。

我的主要问题是如何获取一个原生小部件，比如一个按钮，并显示一个按钮的图像，该按钮具有按钮的所有功能（动画点击、信号、插槽等）。我见过 QML 和其他方法来做到这一点，但我还没有找到使用常规 C++ 和 Qt 来做到这一点的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:03:21.200

最简单的方法是使用[调色板](http://qt-project.org/doc/qt-4.8/qpalette.html)和/或[样式表](http://qt-project.org/doc/qt-4.8/stylesheet.html)来获得您想要的外观，或者至少接近您想要的外观。老实说，这是我推荐大多数用途的方式。

对于按钮，您可以通过继承[QAbstractButton](http://qt-project.org/doc/qt-4.8/qabstractbutton.html)并为所有各种状态绘制自己的图像来做一些事情。您需要弄清楚您想要支持的状态，以及何时绘制它们（例如，查看传递给[paintEvent](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#paintEvent)的选项）。这有点困难，但代码方面相当简单。您使用此选项的主要问题是生成图像，并且结果对于调整大小很脆弱 - 也就是说，基本上，不允许这些按钮调整大小。另一个缺点是您必须为每个要设置样式的小部件执行类似的操作，而且其中许多都不像按钮那么简单。

一路走下去，你可以看看[QStyle](http://qt-project.org/doc/qt-4.8/qstyle.html)，以及各种样式是如何实现的。使用这些，您可以真正使任何小部件按照您希望的方式显示（在其绘制大小的限制内）。到目前为止，这是最难理解要做什么以及选项是什么的选项。此外，我上次查看时，许多选项并没有很好地记录它们在特定情况下的作用，所以当我不得不以这种方式进行一些更改时，这在很大程度上是一个反复试验的问题。

# ruby-on-rails - 关于测功机数量的建议

> ID：12469929
> 
> 赞同：3
> 
> 时间：2012-09-18T03:18:51.297
> 
> 标签：ruby-on-rails, heroku

我是 Heroku 的新手，想知道如何猜测 RoR 应用程序可能需要的测功机数量（需要给客户一些数字）。

该应用程序已经在免费的 1 dyno 上运行。以下是有关该应用程序的一些基本信息：

*   应用程序主要是数据库读取，写入很少
*   可能是繁重的数据库负载，查询涉及距离计算（从经纬度，使用 gmaps4rails）
*   从使用 WAPT（评估版）的一些基本测试来看，一个典型的搜索请求似乎需要一分钟。约 1.3 秒，平均 ~2s，最大。4-5秒
*   再次来自 WAPT 测试，最多 20 个并发用户并观察 Heroku 日志，我似乎没有看到任何请求排队
*   其他请求主要是静态资产

我如何粗略了解处理 X 个并发用户所需的测功机数量，或者单个测功机可以处理多少并发用户？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T08:51:12.457

更新：Heroku 更改了他们的 dyno 定价协议[https://www.heroku.com/pricing](https://www.heroku.com/pricing)，因此这些信息可能不再正确。

根据这篇文章[http://neilmiddleton-eu.herokuapp.com/getting-more-from-your-heroku-dynos/](http://neilmiddleton-eu.herokuapp.com/getting-more-from-your-heroku-dynos/)，如果您使用 Unicorn，1 dyno 每天可以处理 100 万个请求（每个请求 100 毫秒）。因此，如果您在 S3 中托管所有媒体，1 个页面视图需要 3 个请求（1 个 html、1 个管道式 css、1 个管道式 javascript），1 个 dyno 每天可以处理大约 300.000 个页面视图，或每秒 80 个页面视图独角兽。

假设 1 个用户将在 5 秒内查看 1 个页面，并且您的应用程序可以在 300 毫秒内做出响应，从技术上讲，您将有大约 400 个并发用户和 1 个测功机。

但实际上我们的应用程序（相当重），1 dyno 只能接受其中的 1/10，大约 50 个并发用户。

希望这对你有帮助！

# mysql - 如何将三个 MySQL 查询合二为一？

> ID：12469931
> 
> 赞同：3
> 
> 时间：2012-09-18T03:19:07.580
> 
> 标签：mysql, sql

使用 wordpress 数据库，我们有 wp_options 和 wp_postmeta 之类的表。这些按主键 ID 分组，然后是“option_name”和“option_value”等字段；

因此，例如要找出三个值，我需要执行 3 个不同的查询。

**有没有一种正确的方法可以只用一个查询来完成所有这些工作？**

请对此有所了解并分享正确的方法。

```
SELECT option_value FROM bdlocal_wrdp1.wp_options WHERE option_name='siteurl';

SELECT option_value FROM bdlocal_wrdp1.wp_options WHERE option_name='blogname';

SELECT option_value FROM bdlocal_wrdp1.wp_options WHERE option_name='blogdescription'; 
```

（返回 example.com、Example Blog、This is an example blog。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T03:20:32.510

```
SELECT option_name,
       option_value
  FROM bdlocal_wrdp1.wp_options
 WHERE option_name IN ('siteurl', 'blogname', 'blogdescription') 
```

在此查询执行之后，您将拥有 3 对`option_name + option_value`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T03:20:39.387

你可以`IN`为此条款，

```
SELECT option_value 
FROM bdlocal_wrdp1.wp_options 
WHERE option_name IN ('siteurl','blogname','blogdescription') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T04:14:43.623

```
select (case when option_name='siteurl' then option_value else 0 end ) as 'siteurl',
   (case when option_name='blogname' then option_value else 0 end ) as 'blogname',
   (case when option_name='blogdescription' then option_value else 0 end ) as 'blogdescription' from bdlocal_wrdp1.wp_options 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T22:26:18.693

> 你也可以使用**MySQL Union**来实现这个功能：

```
select option_name,option_value from wp_options where option_name='siteurl' UNION ALL
select option_name,option_value from wp_options where option_name='blogname' UNION ALL
select option_name,option_value from wp_options where option_name='blogdescription'; 
```

你可以在这里阅读更多关于 Unions 的例子[。](http://www.mysqltutorial.org/sql-union-mysql.aspx)

# jquery - 如何在此函数中包含选择字段的验证？

> ID：12469932
> 
> 赞同：0
> 
> 时间：2012-09-18T03:19:08.017
> 
> 标签：jquery, forms

我有这个表格：

```
<form>
<fieldset>
<legend>Address Information</legend>

<div>
<label for="country">Country:</label> <span id="country-list">
<select name="country" class="required">
<option value="0">Please Select</option>
<option value="1">Afghanistan</option>
<option value="2">Albania</option>
<option value="3">Algeria</option>
<option value="4">American Samoa</option>
</select>&nbsp;</span>
<span class="error_msg" style="display: none; ">
<br><label for="space">&nbsp;</label>Please select your country.</span>
</div>

<div>
<label for="street-address">Street Address:</label> <input type="text" id="street_address" name="street_address" value="" size="50" class="required">
<span class="error_msg" style="display: inline; "><br><label for="space">&nbsp;</label>Please enter your accurate street address (at least 7 characters)</span>
</div>

<div>
<label for="suburb">Suburb:</label> <input type="text" name="suburb" value="" class="required">
</div>

<div>
<label for="city">City:</label> <input type="text" id="city" name="city" value="" class="required">
<span class="error_msg" style="display: inline; "><br><label for="space">&nbsp;</label>Please enter your city (at least 4 characters)</span>
</div>

<div>
<label for="post-code">Post Code:</label> <input type="text" id="postcode" name="postcode" value="" class="required">
<span class="error_msg" style="display: inline; "><br><label for="space">&nbsp;</label>Please enter your postal code (at least 3 characters)</span>
</div>

</fieldset>
</form> 
```

我在下面有一个 jquery 函数，当单击提交时，它只检查`input text fields`但不检查选择字段。如果字段有值，它将返回 true，如果字段没有值，它将返回 false。

```
function ValidateForm()
{
   jQuery('span.error_msg').hide();
   var success = true;

     jQuery("#shippingF .required").each(function()
        {
            if(jQuery(this).val().length <= 2)
            {
                jQuery(this).next().show();
                success = false;
            }
     });

    return success;
} 
```

如何在这个简单的验证功能中包含选择字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:25:46.487

好的，对不起，我被原始代码中的一些错误吓倒了，这是最终的工作版本

```
function ValidateForm()
{
 jQuery('span.error_msg').hide();
 var success = true;

 if($('select[name=country]').val() == '0'){
   success = false;
  }
     jQuery(".required").each(function()
      {
        if(jQuery(this).val().length <= 2)
        {alert(jQuery(this).val().length);
            jQuery(this).next().show();
            success = false;
        }
 });

return success;
} 
```

关于原始代码的几点说明：

1.  找不到选择器 ID `shippingF`，所以我必须删除它并按类引用`.required`，如果你在层次结构中的某个地方定义它，那么它应该没问题

2.  从 select 元素中删除了该类`.required`，因此它不会包含在您的每个循环中。这将始终返回 1 并导致您的 if 语句`if(jQuery(this).val().length <= 2)` 失败。

这是一个[工作小提琴](http://jsfiddle.net/RNSvX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:33:00.357

您可以在循环中包含另一个评估并检查它是否是一个选择：

```
function ValidateForm()
{

   jQuery('span.error_msg').hide();
   var success = true;

   jQuery("#shippingF .required").each(function()
   {

       if(jQuery(this).hasClass('select')) {
          if(jQuery(this).val() == 0) {
             success = false;
          }
       } else {
          if(jQuery(this).val().length <= 2) {
             jQuery(this).next().show();
             success = false;
          }
       }
   });
   return success;
} 
```

类似的东西。

# mysql - 使用 CakePHP 的 set()/save() 函数，如何根据现有值的增量保存值？

> ID：12469933
> 
> 赞同：0
> 
> 时间：2012-09-18T03:19:08.860
> 
> 标签：mysql, cakephp

我对 CakePHP 的清理函数很满意，它允许使用保存/设置模型函数进行安全插入。我目前需要保存现有模型数据的增量，无法完成所需的过程。

目前我的模型代码如下：

```
$this->save(array('Model.field', 'Model.field + 1')); 
```

但我注意到，正如预期的那样，这将不起作用，因为整个字符串都被转义，而不是相关字段的整数增量。任何帮助深表感谢。

我知道一种解决方法是首先查询有问题的行，然后在 PHP 中增加值，但我更喜欢使用单独的 MySQL/查询解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:03:24.603

使用模型::updateAll()。您将在手册中找到示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:37:08.523

我做这样的事情：

```
$this->id = 1;
$data = $this->read();
$this->saveField('field_name', $data['Model']['field_name'] + 1); 
```

或者，您可以使用 query();

```
$this->query('UPDATE Model.field_name = Model.field_name + 1 WHERE Model.id=1'); 
```

# php - 如何更改数据库更新中的元素

> ID：12469947
> 
> 赞同：0
> 
> 时间：2012-09-18T03:20:53.630
> 
> 标签：php, jquery, mysql, ajax

这是我正在做的一个示例：-我正在通过 php 用 mysql 数据库填充 div，并且有两个 div，单击按钮（聊天）隐藏 div 2nd div，单击（chat2）隐藏第一个 div 并显示第二（使用jquery）
（两个div都显示不同表的数据）

现在我想要的是当 div1 被隐藏并且数据库/表（隐藏的 div 正在显示）被更新时，我想更改按钮（聊天）的 css 属性。我知道它可以通过 Ajax 完成，但我不太擅长，所以请帮帮我。

我正在通过 Ajax 填充 div 。

![在此处输入图像描述](../Images/ab13cae53780b4a0d0c294da7d82231a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:32:12.670

我不认为更改 CSS 属性与 AJAX 有任何关系。首先，您已经发出 AJAX 请求，当请求完成时，您可以同时进行更新和更改 CSS。

例如：

```
$.post("urltopost.php", { vartosend: 'value to send' }, function(data) {
    console.log(data); //Retrieve the data
    $("#div1").html(data); //Update the data

    //Change the css of the button now
    $("#div1button").css({ color: 'red' });
}); 
```

# iphone - cocos2D pushScene popScene

> ID：12469949
> 
> 赞同：2
> 
> 时间：2012-09-18T03:21:34.487
> 
> 标签：iphone, ios, cocos2d-iphone

我正在创建一个场景，将一个主层添加到场景中，并将另一个层添加到主层以用于抬头显示 (HUD)。然后我使用 CCDirector pushScene 方法调用带有主/hud 层的第二个场景。我的问题是在使用 popScene 返回第一个场景后，来自第二个场景的 HUD 层仍在积极接收和处理触摸。我试过使用 self.isTouchEnabled = NO; 在 HUD 中我调用 popScene 之前，但它没有任何效果。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T03:41:45.673

好吧，我想通了，我需要使用 onExit 和 onEnter 方法来禁用和启用每个层的触摸处理。这是代码的样子

```
-(void)onEnter
{
    [super onEnter];

    [[CCTouchDispatcher sharedDispatcher] removeDelegate: self];
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
    self.isTouchEnabled = YES;
}

- (void) onExit {

    [[CCTouchDispatcher sharedDispatcher] removeDelegate: self];
    [super onExit];
} 
```

# jquery - 这个函数调用会一直等待异步加载的脚本然后执行吗？

> ID：12469950
> 
> 赞同：1
> 
> 时间：2012-09-18T03:21:39.060
> 
> 标签：jquery, asynchronous

如何确保转换函数（在 myjs.js 中定义）始终执行？是否存在由于在加载 myjs.js 之前调用它而可能失败的情况？

```
<body>
<script type='text/javascript'>
$(function(){
   //call a function within myjs.js
   $("#id").conversion({
           settings : url
    });
});
</script>

/*loading myjs.js asynchronously*/
<script type='text/javascript'>
(function(){
    var a = document.createElement('script');
    a.type = 'text/javascript';
    a.async = true;
    a.src = 'http://mydomain/myjs.js'; 
    var b = document.getElementsByTagName('script')[0];
    b.parentNode.insertBefore(a, b);
})();
</script>

</body> 
```

这是确保始终调用转换函数的正确方法吗？

```
$.ajax({
  url: 'http://mydomain/myjs.js',
  dataType: 'script',
  cache: true, // otherwise will get fresh copy every page load
  success: function() {
    // script loaded, do stuff!
     $("#id").conversion({
               settings : url
        });
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:50:24.580

第一的，`$(function(){`意味着 jQuery 已经加载，不一定是你的其他脚本。因此，仅仅拥有它并不能保证您的函数将在脚本加载后运行。因此，可以在加载脚本之前调用您的函数。

要解决此问题，您需要以下内容：

```
(function() {
    function async_load(){
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'http://yourdomain.com/script.js';
        var x = document.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
    }
    if (window.attachEvent)
        window.attachEvent('onload', async_load);
    else
        window.addEventListener('load', async_load, false);
})(); 
```

请参阅：http: [//friendlybit.com/js/lazy-loading-asyncronous-javascript/](http://friendlybit.com/js/lazy-loading-asyncronous-javascript/)了解更多信息。

**编辑以澄清想法并改进示例**：

这应该可以工作，因为它等待页面加载，然后加载你的异步，一旦加载就会触发一个函数，你可以调用加载文件的外部函数。

从异步加载脚本开始：

```
(function(){
    var a = document.createElement('script');
    a.type = 'text/javascript';
    a.async = true;
    a.src = 'http://www.example.com/somefile.js';
    var b = document.getElementsByTagName('script')[0];
    b.parentNode.insertBefore(a, b);
})(); 
```

接下来，执行以下操作：

```
function my_initialization_function() {
    //call a function within myjs.js
   $("#id").conversion({
           settings : url
    });
}

    if(document.addEventListener) {
        window.addEventListener("load", my_initialization_function(), false );
    }
    else if(window.attachEvent) {
        window.attachEvent("onload", my_initialization_function());
    } 
```

说明： `(document.addEventListener)`为支持它的浏览器（所有非 IE 浏览器）添加事件监听器。`(window.attachEvent)`对于支持 attachEvent 的浏览器（IE 浏览器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:32:48.790

由于您是异步加载它，因此您需要确保在运行代码之前已加载它（大概在脚本元素上使用和 onload 回调？）。或者您可以以“正常”方式包含脚本：

```
<script src="myjs.js"></script>
<script>
    $(function () {
        $("#id").conversion({
            settings : url
        });
    });
</script> 
```

编辑：如果您将所有`script`元素放在结束`</body>`标记之前，则整个页面将在脚本之前加载，然后“正常”加载没有任何危害。此外，通过将所有脚本放在页面的最后，您不需要在“dom ready”上运行它，因为 dom 已经加载。

编辑：您也可以在加载窗口的情况下交换 dom（不确定）：

```
$(window).load(function () {
    $("#id").conversion({
        settings : url
    });
}); 
```

# arduino - 通过 Touch OSC MultiToggle 在 Arduino 中使用 OSC

> ID：12469951
> 
> 赞同：2
> 
> 时间：2012-09-18T03:21:44.383
> 
> 标签：arduino, osc, opensoundcontrol

我找不到支持 Touch OSC 的多切换控件的 Arduino 的 OSC 库。我做错了什么，还是有一个库支持这个控件？

我正在使用的库：[https ://github.com/recotana/ArdOSC](https://github.com/recotana/ArdOSC)

我从 Touch OSC 发送的 OSC 消息：

```
/octobar/togglearray/2/2 1. 
```

在 Arduino 上捕捉它的相关片段：

```
server.begin(serverPort);
server.addCallback("/octobar/togglearray",&togglearray);

void togglearray(OSCMessage *_mes) {
    Serial.println("Toggle Array");
} 
```

我确实有其他回调工作，并且我没有在此处粘贴所有服务器代码，因为它与推子和按钮控件一起使用。问题似乎是任何支持多选的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:52:45.617

我一直在尝试几乎完全做到这一点并切换到`Z_Osc`库，因为我无法弄清楚如何使用 ArdOsc 解析传入的消息。

我做这样的事情：

```
 rcvMes=server.getMessage();
 mess=rcvMes->getZ_OSCAddress();
 if (mess.startsWith("/1/multitoggle1/")) {
     y=(mess.substring(16)).toInt(); 
     x=(mess.substring(19)).toInt();
 } 
```

# c# - 事务应该在 .NET 或 SQL Server 中处理？

> ID：12469959
> 
> 赞同：1
> 
> 时间：2012-09-18T03:22:49.930
> 
> 标签：c#, sql-server, sql-server-2008, sql-server-2005

我进入了一个使用 .NET/C# 作为前端和 SQL Server 2008 作为后端的应用程序。我发现总是在 c# 代码中处理事务。对于这个项目，我们不应该在存储过程中使用事务似乎是一个不成文的规则。

我个人认为事务应该在存储过程中处理，因为它可以更好地控制代码！我们可能会在脚本中进行大量验证，而我们不需要开放交易。我们需要在执行插入/更新/删除之前打开一个事务，并可以尽快关闭它。

寻找可以帮助我了解处理事务的最佳实践以及我们何时需要在存储过程/C# 中选择事务的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:38:36.447

没有硬性规定，但我看到了从业务层控制交易的几个原因：

*   跨数据存储边界的通信。事务不必针对 RDBMS；他们可以针对各种实体。

*   基于您正在调用的特定存储过程可能不可用的业务逻辑回滚/提交事务的能力。

*   在单个事务中调用任意一组查询的能力。这也消除了担心事务计数的需要。

*   个人偏好：c#有一个更优雅的交易声明结构：一个`using`块。相比之下，我总是发现存储过程中的事务在跳转到回滚/提交时很麻烦。

> 我们可能会在脚本中进行大量验证，而我们不需要开放交易。我们需要在执行插入/更新/删除之前打开一个事务，并可以尽快关闭它。

这可能是也可能不是问题，具体取决于打开了多少事务（尚不清楚这是单个作业还是以高并发运行的过程）。我建议查看对象上放置了哪些锁，以及这些锁被持有多长时间。

请记住，验证可能**应该**锁定；如果数据在您验证它的时间和操作发生的时间之间发生变化怎么办？

如果这**是**一个问题，您可以将有问题的过程分成两个过程，并从外部调用一个`TransactionScope`。

# c - 为什么需要 Nginx 中的内存对齐

> ID：12469960
> 
> 赞同：0
> 
> 时间：2012-09-18T03:22:55.690
> 
> 标签：c, memory-management, nginx

最近在研究NginX的源码。当我对内存管理设计感到好奇时，我发现它很有趣，当他们定义 NGX_POOL_ALIGNMENT 和 NGX_DEFAULT_POOL_SIZE 的大小时，有什么问题？为什么他们有这样的内存对齐设计？

我真的希望有人能给我一些关于这些问题的提示，如果您也对 NginX 实现感兴趣并愿意与我分享您的经验，我们可以进一步讨论：D。

顺便说一句，我正在阅读 NginX 1.2.3，这是他们团队声明的稳定版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:54:50.403

您可能应该询问 NginX 的开发人员。我的猜测是他们只是将内容与缓存线（或多个缓存线）对齐。

显然，他们这样做是为了表现。

# go - 在 Go 中实现范围

> ID：12469961
> 
> 赞同：1
> 
> 时间：2012-09-18T03:22:57.370
> 
> 标签：go

我有一个`type List []string`并且我正在实现一些标准功能`Insert`，例如`DeleteAt`等。我想实现`range`这样我可以轻松地迭代列表。
我似乎找不到这样做的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T03:41:07.060

没有理由重新实现 range，因为 range 关键字适用于 List 类型。

```
var l List
for i, v := range l {
    /* whatever */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:10:28.040

在 Go 中，不可能为给定的类型自己实现范围。Range 仅适用于 Go 的内置数据结构：切片、映射和通道（以及数组？）。

# php - 链接php mysql分页不起作用

> ID：12469963
> 
> 赞同：1
> 
> 时间：2012-09-18T03:23:11.807
> 
> 标签：php, mysql, pagination

我正在尝试对我的结果进行分页，限制有效，页数设置正确，但是分页的链接不起作用，我已经找了一段时间了，没有，¿你能看看告诉我我做错了什么？谢谢

```
<?php
include("config/conexion.php");
$limit = 3;

if(isset($_GET['pag'])){
$pag= $_GET['pag'];
}else{
$pag=1;
}
$offset = ($pag-1) * $limit;

$sql = "SELECT SQL_CALC_FOUND_ROWS id, nombre, local, telefono, celular, email FROM almacenes WHERE id_cat = '".$_GET["id"]."'";
$sqlTotal = "SELECT FOUND_ROWS() as total";
$currentid = $_GET["id"];
$rs = mysql_query($sql);
$rsTotal = mysql_query($sqlTotal);

$rowTotal = mysql_fetch_assoc($rsTotal);
// Total de registros sin limit
$total = $rowTotal["total"];

?>
 <?php if($_GET["id"]){  $cat = mysql_query("SELECT * FROM almacenes WHERE id_cat = '".$_GET["id"]."' ORDER BY id ASC LIMIT $offset, $limit");  if(mysql_num_rows($cat)>0){

while($row = mysql_fetch_object($cat)){ ?>   

<div class="almacenbox">
    <div class="shadow"></div>
    <div class="white">
        <div class="image"><img src=almacenes/local_111.jpg></div>
        <div class="title"><?php echo $row->nombre?></div>
        <div class="text">Local: <?php echo $row->local?></div>
        <div class="text">Teléfono: <?php echo $row->telefono?></div>
        <div class="text">Celular: <?php echo $row->celular?></div>
        <div class="text"><?php echo $row->email?></div>
    </div>
    </div>
    <?php } ?>
    <?php } }else{ echo "<p>No hay resultados para mostrar</p>"; }?>
    <table border="1" bordercolor="#000">
  <tfoot>
  <tr>
     <td colspan="2">
  <?php
     $totalPag = ceil($total/$limit);
     $links = array();
     for( $i=1; $i<=$totalPag ; $i++)
     {
        $links[] = "<a href=almacenes.php?id=$currentid?pag=$i\>$i</a>"; 
     }
   echo implode(" - ", $links);
  ?>
     </td>
  </tr>
  </tfoot> </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:26:22.193

`$links[] = "<a href=almacenes.php?id=$currentid?pag=$i\>$i</a>";`

应该

`$links[] = '<a href="almacenes.php?id=$currentid&amp;pag=$i">$i</a>';`

查询字符串以 a 开头，`?`但在第一个之后的任何名称-值对都需要一个 & 符号。

附带说明一下，您永远不应该将用户数据直接放入查询中。这使您容易受到 SQL 注入攻击。考虑使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)或切换到[mysqli 库](http://php.net/manual/en/book.mysqli.php)。

# javascript - Javascript 对象持久化

> ID：12469964
> 
> 赞同：0
> 
> 时间：2012-09-18T03:23:13.377
> 
> 标签：javascript, object, closures

如何在保护 b 状态的同时执行以下操作？

```
var a = function(o){
  this.o = o;
  this.o.one = 'three';
}
var b = {'one':'two'};
var c = new a(b);

console.log(b.one);  //three 
```

我意识到这行得通...

```
var a = function(o){
  this.o = {};
  this.o.one = o.one;
  this.o.one = 'three';
}
... 
```

但是如果我想“导入”整个对象呢？

编辑

这在这里得到了回答-> [JavaScript：如何按值传递对象？](https://stackoverflow.com/questions/7574054/javascript-how-to-pass-object-by-value)

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:26:31.073

您需要复制`b`. [在这里](https://stackoverflow.com/a/728694/31158)寻找这个想法和一些警告。

# android - Android 应用内订阅购买状态在退款后未更改

> ID：12469966
> 
> 赞同：0
> 
> 时间：2012-09-18T03:23:52.197
> 
> 标签：android, in-app-purchase, in-app-billing, subscription

我正在尝试在我的应用程序中实现应用内订阅。一切似乎都正常，除了退款。我创建了一个测试帐户，并购买了测试订阅。作为回应，得到“purchaseState”：0（已购买）。我立即通过商家控制台退款，作为回应，我得到了相同的“purchaseState”：0。

不应该通知我退款，以便我可以取消订阅吗？我如何处理订阅退款？我了解取消 - 状态将在到期日期后更改。但是退款..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:04:15.873

订阅不支持退款。我最近在我们的 Android 应用程序中实现了订阅，并且遇到了一些相同的问题并看到了相同的结果，但确认从未发送过“退款”状态以进行订阅。主要是因为 Google 不会给您退款（与应用内结算不同）。

# html - 通过在 HTML 或 CSS 中设置宽度的图像缩略图。为什么不？

> ID：12469967
> 
> 赞同：1
> 
> 时间：2012-09-18T03:24:03.467
> 
> 标签：html, css, image

我正在使用图像处理库处理数百张图像以创建缩略图。缩略图占用空间并且需要额外的代码来处理。假设您不需要裁剪缩略图并希望保持比例。

简单地调整 HTML 或 CSS 中的图像大小有什么缺点吗？

```
<img src="image.jpg" width="150"  /> 
```

几年前我不会问这个问题，但现在的网站加载速度超快。是否仍然不建议在 HTML 中重新调整图像大小？调整大小的图像的加载速度似乎与缩略图一样快。我知道在 HTML 中重新调整大小的图像会保持原始大小，但只要查看者看到缩略图，谁在乎呢？没有人下载缩略图。为什么我们不在 HTML 中调整图像的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:29:04.840

因为由浏览器调整大小的图像需要更长的时间来加载，比渲染所需的计算能力更多，而且由于使用了不同的抖动方法，在浏览器之间甚至看起来都不一样。您将更快地超载您的服务器，并使用更多的带宽。

只需特别注意制作一个体面的服务器端图像缩放器。您的访问者，尤其是那些连接速度较慢和带宽上限的访问者，会非常感激它。

此外，即使是缩略图，我也建议在标签中提供图像宽度和高度。浏览器将使用该信息对页面进行一次布局，而不是每次检索另一张图像时都必须重新计算布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:28:09.470

调整大小的图像意味着，您将原始图像的大小调整为缩略图大小并上传，以便主图像说`1 MB`，缩略图在周围`200 KB`。

`width`与标签一起使用不是一个好主意，`<img />`因为它占用了巨大的空间，因为您说过您将发出多张图像。所以，最好用 CSS 来控制它：

```
img {width: 150px;} 
```

# javascript - SVG 锚点当前页面高亮

> ID：12469973
> 
> 赞同：0
> 
> 时间：2012-09-18T03:24:52.453
> 
> 标签：javascript, html, css, svg, anchor

我有一个基于 SVG 的菜单，其链接类似于以下内容。我想突出显示当前页面的链接（例如，通过添加“font-weight:bold”）。有什么建议么？我应该用 Javascript 做点什么吗？（请注意，为了兼容性，我通过 <object> 标记将 SVG 链接到我的 HTML 页面中，因此解决方案必须符合该约束。）哦，我对仅在现代浏览器中工作的突出显示很好。

```
<svg ...>
  <style type="text/css">
a text {
    fill:#ffffff;
}
a:hover text {
    fill:#2020ff;
}
  </style>
  <g>
    <a id="aHome" xlink:href="/" target="_top">
      <text id="txtHome">Home</text>
    </a>
    ...
  </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:09:00.337

好吧，显然一周忘记这一点值得一枚铜牌。:-P

无论如何，上面的代码本身实际上是正确的。去看看 - 我有其他导致 a:hover 位失败的覆盖 CSS 样式。

# objective-c - 使用指向链接列表的指针存储 NSMutableDictionary 一个 C 结构

> ID：12469975
> 
> 赞同：3
> 
> 时间：2012-09-18T03:25:10.013
> 
> 标签：objective-c

我有这个 C 结构（用 malloc 分配，因此在堆中）我想存储在 NSMutableDictionary 中，因为我想避免重新创建 C 结构，这是一个复杂的过程。

通常使用 C 结构，我知道我可以使用 NSData 对象来存储位，然后将其放入诸如 NSArray 和 NSDictionary 之类的 Objective-C 容器中。但是，我要保存的结构包含指向 C 链接列表的指针，这就是我要避免重新创建的原因。我宁愿将指针保存在像 NSDictionary 这样的容器中，并在需要时获取它。

问题是，在不重新创建结构的情况下重用结构的最佳方法是什么？

我正在考虑将指针存储到结构本身。由于指针实际上只是一个数字，我可以将它存储在 NSNumber 中吗？如果可以，我用什么？无符号长长？

例子：`[NSNumber numberWithUnsignedLongLong:aPointer];`

PS：这是为 iPhone BTW。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:38:07.000

指针不是数字（至少在 的意义上不是`NSNumber`）。但它是一个价值。事实上你可以使用`[NSValue valueWithPointer:myPtr]`.

# c# - 从 C# Web 应用程序访问 Google Drive 文件

> ID：12469981
> 
> 赞同：4
> 
> 时间：2012-09-18T03:26:02.957
> 
> 标签：c#, .net, web-applications, google-drive-api, access-token

您好我在访问 Google Drive SDK 时遇到了一些问题，主要是身份验证步骤。

我的 .Net Web 应用程序中有两个主要页面 -`Default.aspx.cs`和`WebForm1.aspx.cs`. 在`Default.aspx`我有一个控件，当他们点击链接时`hyperlink`，它会将用户带到：`Google authentication page`

`https://accounts.google.com/o/oauth2/auth?response_type=code&scope=https://www.googleapis.com/auth/drive.file+https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile&redirect_uri=http://localhost/GoogleDriveTest/GoogleDriveTest/GoogleDriveTest/WebForm1.aspx&state=/profile&client_id=*CLIENT_ID*&approval_prompt=force`

一旦用户被重定向回`REDIRECT_URI`（`WebForm1`），我使用这段代码来访问`authorization`代码：

```
HttpRequestInfo request = new HttpRequestInfo(Request);
code = Request.QueryString["code"]; 
```

现在我被困住了。我知道我现在需要`POST`这段代码：

```
https://accounts.google.com/o/oauth2/token <insert POST parameters here> 
```

但我完全不知道如何做到这一点。我尝试了很多事情，但我得到的只是：

```
Server time out error - it failed to connect to the requested server 
```

我该如何解决这个问题？

* * *

编辑 24/09/2012：

随着 Visual Studio 2012 的新版本，他们已经合并了 OAuth，因此它负责身份验证： [http ://www.asp.net/vnext/overview/videos/oauth-in-the-default-aspnet-45-templates](http://www.asp.net/vnext/overview/videos/oauth-in-the-default-aspnet-45-templates)

这意味着用户可以使用外部帐户（例如 Google）登录本地 Web 应用程序。

这是否意味着，一旦用户通过 Google 登录，我就可以获取我需要的 Google Drive 文件？或者这只是为了使本地 Web 应用程序中的注册处理更容易？

再次感谢。

* * *

这是我的错误：

```
[SocketException (0x274c): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond [2404:6800:4008:c01::54]:443]
   System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +251
   System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) +279

[WebException: Unable to connect to the remote server]
   System.Net.HttpWebRequest.GetRequestStream(TransportContext& context) +6098637
   System.Net.HttpWebRequest.GetRequestStream() +13
   GoogleDriveTest.WebForm1.Page_Load(Object sender, EventArgs e) in C:\Projects\GoogleDriveTest\GoogleDriveTest\GoogleDriveTest\WebForm1.aspx.cs:101
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

* * *

解决了！！

我的问题是我的工作场所中有一个代理不允许任何连接到所需的 URL。所以我在我的浏览器中关闭了代理，它绕过它直接进入所需的 URL 成功获取访问令牌：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:10:55.750

该文档包括一个用 C# 编写的完整 Web 应用程序示例，您可以将其用作参考：

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

它是一个 ASP.NET MVC 应用程序，但授权部分可以很容易地在 Web 窗体应用程序中重用。

有关授权流程的更多详细信息，请查看有关如何[检索和使用 OAuth 2.0 凭据的文档](https://developers.google.com/drive/credentials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:57:07.063

[请参阅快速入门](https://developers.google.com/drive/quickstart)（注意 .NET 选项卡！），其中显示了如何使用 DotNetOpenAuth 库执行此操作。

请注意以下行：

```
// Retrieve the access token by using the authorization code:
return arg.ProcessUserAuthorization(authCode, state); 
```

# ibm-mq - V7 队列管理器上的 Websphere MQ 错误

> ID：12469983
> 
> 赞同：1
> 
> 时间：2012-09-18T03:26:28.433
> 
> 标签：ibm-mq

我们将 MQ 从 V6 升级到 V7。之后我们在执行 mq 命令时遇到了这个错误。

```
检索本地队列管理器
无法加载程序 dspmq:
                无法加载依赖模块 /usr/lib/libmqmcs_r.a(shr.o)。
                该模块具有无效的幻数。

```

参考 IBM 网站，

[http://www-01.ibm.com/support/docview.wss?uid=swg21233269](http://www-01.ibm.com/support/docview.wss?uid=swg21233269)

我没有在我的 AIX 机器中将 LIBPATH 指定为 /usr/mqm/lib。但是在将 LIBPATH 设置为 "" 时，此问题已解决。

您能否帮助我了解如何设置 LIBPATH 以使用 MQ 库？安装时会设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:24:23.687

您尚未提及迁移到的 MQ v7 版本。MQ v7.1 安装不会在 /usr 目录下创建任何符号链接。这是因为从 v7.1 开始，MQ 开始支持多版本安装。一个必须使用 SETMQENV 命令设置 MQ 环境。

请点击此[链接](http://www-01.ibm.com/support/docview.wss?uid=swg27024340&aid=1)。

编辑：我怀疑 LIBPATH 可能指向了一些不正确的 mq 库。

# c# - Marshal.GetActiveObject 是查看特定版本的 Visual Studio 是否正在运行的安全方法吗？

> ID：12469985
> 
> 赞同：0
> 
> 时间：2012-09-18T03:26:37.470
> 
> 标签：c#, .net, visual-studio

我需要检查特定版本的 Visual Studio 是否正在运行。我现在想出的解决方案如下

```
public bool IsRunning()
{
    object instance;

    try {
        instance = Marshal.GetActiveObject("VisualStudio.DTE.11.0");
    } catch {
        instance = null;
    }

    return instance != null;
} 
```

这是检查特定版本的安全方法吗？如果没有更好的方法是什么？

# javascript - 如何创建具有极低延迟的类似文本消息的系统？

> ID：12469986
> 
> 赞同：0
> 
> 时间：2012-09-18T03:26:40.783
> 
> 标签：javascript, android, ios, node.js, cordova

我正在使用 PhoneGap 创建一个应用程序，它的行为类似于短信应用程序。我遇到的问题是延迟和数据使用。我试过轮询，但它很慢并且习惯了很多数据，websockets，但 AppFog 不支持它们，我也尝试过其他的，但似乎没有一个工作。如何使用 PhoneGap 应用程序、javascript 和任何类型的后端（当前使用节点，但可以更改）最好地完成类似文本消息的系统？此外，PhoneGap 应用程序如何在后台获取通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:11:04.583

Android上有一个用于推送通知的Phonegap插件（你没有说你的应用程序适用于哪些平台......），我认为iOS也是一个。

[Socket.io](http://socket.io/)是一个很棒的库，如果可能，它会使用 websockets，但如果需要，它会回退到 Ajax 长轮询。那应该避免重复轮询的数据使用问题。但是，打开连接数分钟或数小时可能是行不通的。

您可能必须混合这两种方法。当用户在应用程序中时，使用 socket.io 在他们实际观看时实现低延迟。当用户不在应用程序中时，您可以承受执行推送通知所需的少量额外延迟，因为他们不会知道该人实际上是在 20 秒前发送了消息。

# android - 使用 GAE 在 Android 中存储数据？

> ID：12469989
> 
> 赞同：1
> 
> 时间：2012-09-18T03:26:57.913
> 
> 标签：android, google-app-engine, data-storage

我是 Android 新手，但我最终希望创建一个社交网络应用程序。我正在尝试找出存储用户数据（个人资料字段响应等）的最佳方式。我打算使用 Google App Engine 进行数据存储。非常一般地，我如何获取从例如“编辑配置文件”页面收集的数据并（a）将其存储在 GAE 数据存储中并（b）使其显示在用户的配置文件中？例如，我将使用哪些方法，以及如何设置用户数据？此外，我知道 GAE 数据存储有更多用户友好的界面，例如 Objectify 和 Slim3；这些可以与Android一起使用吗？如果这些是一般性问题，我深表歉意，但如果您能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:24:26.820

GAE 是服务器端平台，而 Android 是客户端平台。在使用 Java 作为基础语言时，它们都有不同的 SDK。所以你不能混合它们。

您需要采取的方法如下：

*   为托管在 GAE 上的服务器端应用程序构建一个简单的 REST Web 服务层。
*   Android 客户端将进行 REST 调用以从服务器发送和获取数据。

在您在 App Engine 中托管的服务器端 Java 应用程序上，您可以使用 Datastore API。如果您想提高工作效率，可以查看 Objectify 之类的库。

在 Android 上，我建议如果您要为用户存储首选项/配置文件详细信息，您应该使用以下内容： a) 使用 Android 首选项。这会将首选项数据保存在设备本身上，并且不需要为了获取首选项而在设备和服务器之间进行网络调用。b) 您真正需要保存在服务器上的任何数据，您应该如前所述在 GAE 中创建一个 REST Web 服务器，并通过 Android 上的 HTTP 网络调用它。

希望这可以帮助。

# opengl-es - 简单的 GLSL 卷积着色器速度非常慢

> ID：12469990
> 
> 赞同：23
> 
> 时间：2012-09-18T03:27:17.253
> 
> 标签：opengl-es, filter, opengl-es-2.0, glsl, convolution

我正在尝试在 OpenGL ES2.0 for iOS 中实现 2D 轮廓着色器。它非常缓慢。就像 5fps 慢一样。我已经追踪到 texture2D() 调用。然而，没有这些，任何卷积着色器都是不可撤销的。我试过用lowp而不是mediump，但是一切都是黑色的，虽然它确实给了另外5fps，但它仍然无法使用。

这是我的片段着色器。

```
 varying mediump vec4 colorVarying;
    varying mediump vec2 texCoord;

    uniform bool enableTexture;
    uniform sampler2D texture;

    uniform mediump float k;

    void main() {

        const mediump float step_w = 3.0/128.0;
        const mediump float step_h = 3.0/128.0;
        const mediump vec4 b = vec4(0.0, 0.0, 0.0, 1.0);
        const mediump vec4 one = vec4(1.0, 1.0, 1.0, 1.0);

        mediump vec2 offset[9];
        mediump float kernel[9];
        offset[0] = vec2(-step_w, step_h);
        offset[1] = vec2(-step_w, 0.0);
        offset[2] = vec2(-step_w, -step_h);
        offset[3] = vec2(0.0, step_h);
        offset[4] = vec2(0.0, 0.0);
        offset[5] = vec2(0.0, -step_h);
        offset[6] = vec2(step_w, step_h);
        offset[7] = vec2(step_w, 0.0);
        offset[8] = vec2(step_w, -step_h);

        kernel[0] = kernel[2] = kernel[6] = kernel[8] = 1.0/k;
        kernel[1] = kernel[3] = kernel[5] = kernel[7] = 2.0/k;
        kernel[4] = -16.0/k;  

        if (enableTexture) {
              mediump vec4 sum = vec4(0.0);
            for (int i=0;i<9;i++) {
                mediump vec4 tmp = texture2D(texture, texCoord + offset[i]);
                sum += tmp * kernel[i];
            }

            gl_FragColor = (sum * b) + ((one-sum) * texture2D(texture, texCoord));
        } else {
            gl_FragColor = colorVarying;
        }
    } 
```

这是未优化的，也未最终确定，但我需要在继续之前提高性能。我试过用一个坚实的 vec4 替换循环中的 texture2D() 调用，它运行没有问题，尽管其他一切都在发生。

我该如何优化呢？我知道这是可能的，因为我在 3D 运行中看到了更多涉及的效果，没有问题。我不明白为什么这会引起任何麻烦。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-18T16:40:04.213

我自己已经完成了这件事，我在这里看到了一些可以优化的东西。

首先，我会删除`enableTexture`条件，而是将您的着色器分成两个程序，一个用于此的真实状态，一个用于错误。条件在 iOS 片段着色器中非常昂贵，尤其是在其中具有纹理读取的那些。

其次，这里有九个依赖纹理读取。这些是纹理读取，其中纹理坐标在片段着色器中计算。在 iOS 设备中的 PowerVR GPU 上，依赖纹理读取非常昂贵，因为它们会阻止硬件使用缓存等优化纹理读取。因为您从 8 个周围像素和一个中心像素的固定偏移量进行采样，所以这些计算应该是向上移动到顶点着色器。这也意味着不必为每个像素执行这些计算，只需为每个顶点执行一次，然后硬件插值将处理其余部分。

第三，到目前为止，iOS 着色器编译器还没有很好地处理 for() 循环，所以我倾向于尽可能避免使用那些。

正如我所提到的，我已经在我的开源 iOS [GPUImage](https://github.com/BradLarson/GPUImage)框架中完成了这样的卷积着色器。对于通用卷积过滤器，我使用以下顶点着色器：

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 uniform highp float texelWidth; 
 uniform highp float texelHeight; 

 varying vec2 textureCoordinate;
 varying vec2 leftTextureCoordinate;
 varying vec2 rightTextureCoordinate;

 varying vec2 topTextureCoordinate;
 varying vec2 topLeftTextureCoordinate;
 varying vec2 topRightTextureCoordinate;

 varying vec2 bottomTextureCoordinate;
 varying vec2 bottomLeftTextureCoordinate;
 varying vec2 bottomRightTextureCoordinate;

 void main()
 {
     gl_Position = position;

     vec2 widthStep = vec2(texelWidth, 0.0);
     vec2 heightStep = vec2(0.0, texelHeight);
     vec2 widthHeightStep = vec2(texelWidth, texelHeight);
     vec2 widthNegativeHeightStep = vec2(texelWidth, -texelHeight);

     textureCoordinate = inputTextureCoordinate.xy;
     leftTextureCoordinate = inputTextureCoordinate.xy - widthStep;
     rightTextureCoordinate = inputTextureCoordinate.xy + widthStep;

     topTextureCoordinate = inputTextureCoordinate.xy - heightStep;
     topLeftTextureCoordinate = inputTextureCoordinate.xy - widthHeightStep;
     topRightTextureCoordinate = inputTextureCoordinate.xy + widthNegativeHeightStep;

     bottomTextureCoordinate = inputTextureCoordinate.xy + heightStep;
     bottomLeftTextureCoordinate = inputTextureCoordinate.xy - widthNegativeHeightStep;
     bottomRightTextureCoordinate = inputTextureCoordinate.xy + widthHeightStep;
 } 
```

和以下片段着色器：

```
 precision highp float;

 uniform sampler2D inputImageTexture;

 uniform mediump mat3 convolutionMatrix;

 varying vec2 textureCoordinate;
 varying vec2 leftTextureCoordinate;
 varying vec2 rightTextureCoordinate;

 varying vec2 topTextureCoordinate;
 varying vec2 topLeftTextureCoordinate;
 varying vec2 topRightTextureCoordinate;

 varying vec2 bottomTextureCoordinate;
 varying vec2 bottomLeftTextureCoordinate;
 varying vec2 bottomRightTextureCoordinate;

 void main()
 {
     mediump vec4 bottomColor = texture2D(inputImageTexture, bottomTextureCoordinate);
     mediump vec4 bottomLeftColor = texture2D(inputImageTexture, bottomLeftTextureCoordinate);
     mediump vec4 bottomRightColor = texture2D(inputImageTexture, bottomRightTextureCoordinate);
     mediump vec4 centerColor = texture2D(inputImageTexture, textureCoordinate);
     mediump vec4 leftColor = texture2D(inputImageTexture, leftTextureCoordinate);
     mediump vec4 rightColor = texture2D(inputImageTexture, rightTextureCoordinate);
     mediump vec4 topColor = texture2D(inputImageTexture, topTextureCoordinate);
     mediump vec4 topRightColor = texture2D(inputImageTexture, topRightTextureCoordinate);
     mediump vec4 topLeftColor = texture2D(inputImageTexture, topLeftTextureCoordinate);

     mediump vec4 resultColor = topLeftColor * convolutionMatrix[0][0] + topColor * convolutionMatrix[0][1] + topRightColor * convolutionMatrix[0][2];
     resultColor += leftColor * convolutionMatrix[1][0] + centerColor * convolutionMatrix[1][1] + rightColor * convolutionMatrix[1][2];
     resultColor += bottomLeftColor * convolutionMatrix[2][0] + bottomColor * convolutionMatrix[2][1] + bottomRightColor * convolutionMatrix[2][2];

     gl_FragColor = resultColor;
 } 
```

`texelWidth`和`texelHeight`制服是输入图像的宽度和高度的倒数，制服`convolutionMatrix`指定卷积中各种样本的权重。

在 iPhone 4 上，对于 640x480 帧的相机视频，这在 4-8 毫秒内运行，这对于以该图像大小进行 60 FPS 渲染来说已经足够了。如果您只需要做边缘检测之类的事情，您可以简化上述操作，在预通道中将图像转换为亮度，然后仅从一个颜色通道中采样。这甚至更快，在同一设备上每帧大约 2 毫秒。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T05:04:17.253

我知道减少此着色器所用时间的唯一方法是减少纹理获取的数量。由于您的着色器从围绕中心像素的等距点采样纹理并将它们线性组合，因此您可以通过使用 GL_LINEAR 模式进行纹理采样来减少提取次数。

基本上不是在每个纹素上进行采样，而是在一对纹素之间进行采样以直接获得线性加权和。

让我们将偏移量 (-stepw,-steph) 和 (-stepw,0) 处的采样分别称为 x0 和 x1。那么你的总和是

`sum = x0*k0 + x1*k1`

现在相反，如果您在这两个纹理像素之间进行采样，距离 `k0/(k0+k1)`x0 并且因此`k1/(k0+k1)`距离 x1，那么 GPU 将在获取期间执行线性加权并给您，

`y = x1*k1/(k0+k1) + x0*k0/(k1+k0)`

因此总和可以计算为

`sum = y*(k0 + k1)`一次取货！

如果对其他相邻像素重复此操作，则最终将为每个相邻偏移量进行 4 次纹理提取，并为中心像素进行一次额外的纹理提取。

该[链接](http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/)更好地解释了这一点

# php - 如果 php 找到某些文本使其成为链接

> ID：12469992
> 
> 赞同：1
> 
> 时间：2012-09-18T03:27:34.830
> 
> 标签：php, regex

所以我有一个功能，可以在我的网站上输出保存的推文，并且对于包含我想要链接`<?=stripslashes($row['tweet_text'])?>`的内容的推文。`@user`那么我将如何做到这一点，如果它找到了该字母`@`，那么它将连接到它的文本转换为一个链接，该链接将转到`www.twitter.com/user`

因此，如果它找到诸如此类的文本，`@username`它将使其成为链接

`<a href="http://www.twitter.com/username">@username</a>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:33:10.480

```
<?= preg_replace('/@(\w+)/', '<a href="https://www.twitter.com/$1">@$1</a>', stripslashes($row['tweet_text']))?> 
```

对于哈希标签：

```
<?= preg_replace('/#(\w+)/', '<a href="https://twitter.com/#!/search/$#$1">#$1</a>', stripslashes($row['tweet_text']))?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:35:30.350

这是你想要的：

```
<?php

$text = 'asd asd asd asd as @user aasda sad asd @yyy sd';

$text = preg_replace('/(.*?)\@([A-Za-z0-9_]+)(.*?)/', '$1<a href="http://www.twitter.com/$2">@$2</a>$3', $text);

?> 
```

任何具有@+A-Za-z0-9_ 的内容都将更改为链接...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:39:11.687

我想你可以做一个`preg_match_all`来获取用户名，假设用户名不包含任何空格：

```
$usernames = preg_match_all( "|\@(.*) |" , stripslashes($row['tweet_text']) , $match );

$usernames = $match[0];

//loop through usernames and do whatever (replace, get data, etc etc) 
```

如果您只想用 替换所有用户名`http://twitter.com/username`，那么只需`preg_replace`在输出中使用：

```
preg_replace('|\@(.*)|', '<a href="http://www.twitter.com/$1">@$1</a>', stripslashes($row['tweet_text'])) 
```

# asp.net-mvc - 使用 Entity Framework 5 的自定义字段

> ID：12469995
> 
> 赞同：0
> 
> 时间：2012-09-18T03:28:09.993
> 
> 标签：asp.net-mvc, entity-framework, ado.net

我开始编写一个项目，这是我第一次使用 ASP.NET MVC 和 Entity Framework（现在我已经使用 PHP 大约 5 年了）。

我有类别和帖子，每个类别都必须有自己独特的过滤器，可以是字符串或布尔值（我将通过文本框或复选框获取它们）。在设计实体时，我开始感到困惑。

我正在使用代码优先的方法，但不知道如何在实体框架中设置自定义字段。如果我在 PHP 和纯 SQL 中进行设计，我认为为了保持良好的性能，我会即时创建额外的列（例如“filter_1”、“filter_2”），然后创建包含字段，类型等的描述，我没有弄清楚这种实现是否可以在 EF 中实现。

我已经考虑了一些选项： - 在创建过滤器和过滤器值表时，我可以使用多对多关系创建过滤器，并且在创建帖子时将过滤器值添加到该表中。关于它的主要缺点是他的性能 - 我很可能肯定会有 40k+ 行和 20 多个自定义过滤器......所以搜索和数据获取会太慢...... - 我考虑过将过滤后的值序列化为一些内容的形式，例如转换为字节数组，然后只对其进行消毒 - 但问题是我无法在其中进行搜索...... - 我可以使用传统的 ADO.NET 方式来创建我的初始想法（我在谈论 PHP 时已经描述过 - 使用“filter_N”列）但这会给 EF 造成太多混乱......

还有其他方法可以实现我的目标（创建自定义过滤器）吗？有什么方法可以使用 EF 创建自定义字段？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:37:03.960

我不知道在实体框架中实现这一点的好方法。如果你真的想使用实体框架，我相信你可以设计你的数据库表，这样你就不必动态创建额外的列。您可以有单独的表格来保存过滤器并将它们与类别相关联。

# android - 如何在android中使用xml在图像视图中显示图像？

> ID：12469999
> 
> 赞同：0
> 
> 时间：2012-09-18T03:28:36.863
> 
> 标签：android, xml

我想在列表视图中显示图像，其中图像存储在 drawble 文件夹中，我试图通过 XML 阅读这里是我的 XML 代码。

```
<music>
<song>
    <title>Live Shows</title>
    <thumb_url>@drawable/chat.png</thumb_url>
</song>
<song>
    <title>Space Bound</title>
    <thumb_url>@drawable/email_open.png</thumb_url>
</song> 
```

请帮助我，我是 android 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:48:51.227

解析 xml 并调用下面给出的函数

```
// imagePath - value of <thumb_url>@drawable/chat.png</thumb_url>
// imageView - view where image needs to be set
private void setImage(String imagePath,ImageView imageView)
{  

 String uriFromXML = imagePath;
 String suffix = ".png";
if ((uriFromXML != null) && (uriFromXML.startsWith("@")) && (uriFromXML.endsWith(suffix))) 
{
  int length = uriFromXML.length();
  int suffixLength = suffix.length();
  String uri = uriFromXML.substring(1, length - suffixLength);

  int imageResource = getResources().getIdentifier(uri, null,getPackageName());

  Drawable image = getResources().getDrawable(imageResource);
  imageView.setImageDrawable(image);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:48:08.860

好的，我想你正在使用 androidhive tut。在惰性适配器类中将此代码更改`imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);` 为`thumb_image.setImageResource(song.get(CustomizedListView.KEY_THUMB_URL));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T05:38:26.613

试试这个，在 Xml

```
<music>
<song>
    <title>Live Shows</title>
    <thumb_url>chat</thumb_url>
</song>
<song>
    <title>Space Bound</title>
    <thumb_url>email_open</thumb_url>
</song> 
```

并且在活动中，

```
int redId = getResources().getIdentifier("<your_package>:drawable/<resource_name>", null, null);
imageView.setBackgroundDrawable(getResources().getDrawable(resId)); 
```

where 会是类似的东西，`com.example.package`并且`<resource_name>`会`thumb_url`从你的 xml 中填充。

### 参考文献：[Ref1](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string) [Ref2](https://stackoverflow.com/questions/3476430/how-to-get-a-resource-id-with-a-known-ressource-name)