# StackOverflow 问答 10459000-10459999

# jquery - 将变量从 fancybox 传递到父级/iframe 到父级

> ID：10459002
> 
> 赞同：0
> 
> 时间：2012-05-05T05:01:25.903
> 
> 标签：jquery, iframe, fancybox

试图访问 iframe (fancybox) 中的内容。我已经尝试了所有方法，但我得到了 null 或 undefined。

```
$(".editdata").live('click', function() {
            var editdata_class=$(this).attr('class');
             var editdata_id=$(this).attr('id');
            alert(editdata_class);

               $.fancybox({
                 'width': 800,
                 'height': 700,
                 'type': 'iframe',
                 href:'forgotpass.php?class_data='+editdata_class+'&id_data='+editdata_id,
                    onClosed : function() {

                        var bla =$("#fancybox-frame").contents().find('#personalsizeleft').html();
                            alert(bla);
                      alert(editdata_id);
                      $('#'+editdata_id).append('hello');
                    }
                   })

             }); 
```

任何想法我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:34:13.197

```
onCleanup: function() { 
     var bla =$("#fancybox-frame").contents().find('html body').html(); alert(bla); 
     var bla =$("#fancybox-content").contents().find('#personalsizeleft').html();        
     alert(bla); }, 
```

所以把它写到父窗口，然后关闭再读一遍……如果需要的话。

# android - 我想使用“MediaStore.ACTION_IMAGE_CAPTURE”调用默认相机并在对焦模式“MACRO”下启动默认相机

> ID：10459007
> 
> 赞同：2
> 
> 时间：2012-05-05T05:01:47.823
> 
> 标签：android, android-intent, android-camera

我想使用此代码启动默认相机...但是当相机启动时，我想在对焦模式下使用默认设置启动相机作为“MACRO”模式。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);        
startActivity(intent); 
```

此时启动相机活动，它将焦点模式设置为“MACRO”。我想得到相机的设置如何设置......当我使用意图调用相机时如何设置“MACRO”对焦模式。

# c# - 有一个用于匹配需要调整的 CSS 的正则表达式

> ID：10459008
> 
> 赞同：1
> 
> 时间：2012-05-05T05:01:49.703
> 
> 标签：c#, css, regex

```
(?<selector>[^\{\s]+\w+(\s\[^\{\s]+)?)\s?\{(?<style>[^\}]*)\} 
```

以上匹配几乎所有情况。

```
audio:not([controls])
{
   display:none
} 
```

然而，像这样的任何东西（带有方括号）都不能正确匹配。

```
button,input[type="button"],input[type="reset"],input[type="submit"]
{
   cursor:pointer;-webkit-appearance:button
}
input[type="search"]::-webkit-search-decoration,input[type="search"]::-webkit-search-cancel-button
{
   -webkit-appearance:none
} 
```

这些也...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:42:53.627

**试试这个：**

```
(?<=\}\s*)(?<selector>[^\{\}]+?)(?:\s*\{(?<style>[^\{\}]+)\}) 
```

**解释：**

```
// (?<=\}\s*)(?<selector>[^\{\}]+?)(?:\s*\{(?<style>[^\{\}]+)\})
// 
// Options: case insensitive; ^ and $ match at line breaks
// 
// Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=\}\s*)»
//    Match the character “}” literally «\}»
//    Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
//       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
// Match the regular expression below and capture its match into backreference with name “selector” «(?<selector>[^\{\}]+?)»
//    Match a single character NOT present in the list below «[^\{\}]+?»
//       Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»
//       A { character «\{»
//       A } character «\}»
// Match the regular expression below «(?:\s*\{(?<style>[^\{\}]+)\})»
//    Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
//       Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
//    Match the character “{” literally «\{»
//    Match the regular expression below and capture its match into backreference with name “style” «(?<style>[^\{\}]+)»
//       Match a single character NOT present in the list below «[^\{\}]+»
//          Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
//          A { character «\{»
//          A } character «\}»
//    Match the character “}” literally «\}» 
```

* * *

*没有空白样式，图案不匹配！*

# bash - 如何在下一个 bash 上忽略 eof？

> ID：10459010
> 
> 赞同：0
> 
> 时间：2012-05-05T05:03:06.333
> 
> 标签：bash

如果我使用导出变量方法，下一个 bash shell 可以忽略 eof（按 ^D 不会退出）。但是，我希望孩子 bash 可以通过按 ^D 退出。bash 是否有任何命令行选项可以完成这项工作？

```
export ignoreeof=1
exec bash  # assume this bash's pid = 1234
bash$  ^D  
bash$  Use "exit" to leave the shell.
bash$  bash  # assume this bash's pid = 2234
bash$  ^D  <--  I wish this could exit bash(pid=2234) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:15:27.827

```
ignoreeof=0 exec bash 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:59:38.377

威廉，谢谢你的提示。

```
exec bash -o ignoreeof # assume this bash's pid = 1234
bash$  ^D  
bash$  Use "exit" to leave the shell.
bash$  bash  # assume this bash's pid = 2234
bash$  ^D  <--  exit bash(pid=2234) 
```

# php - 多张表格和一个处理页面

> ID：10459012
> 
> 赞同：5
> 
> 时间：2012-05-05T05:03:11.043
> 
> 标签：php, mysql, forms

我需要你的帮助来解决一个问题。我的主页上有两个表格，我希望用户在不同时间填写和提交。我的问题是我希望他们两个都只有一个处理页面。通常我可以在单独的页面中执行此操作。但我想知道是否可以在同一页面上进行操作。

好的.. 如果我在操作页面上提交表单 A，不会有未提交的表单 B 变量的未定义索引，当然不建议使用 GET。

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T05:15:53.160

这样做并非完全闻所未闻。很多时候，在表单元素的 action 属性中传递了一个不同的参数，比如`/submit.php?action=register`or `/submit.php?action=activate`。

所以，你有这样的代码：

```
if ($_GET['action'] == 'register') {
  // Register user
} else if($_GET['action'] == 'activate' {
  // Activate user
} 
```

但是，您也可以只更改提交按钮的值，并使两种表单的 action 属性相同：

```
if (isset($_POST['submit'])) {
  if ($_POST['submit'] == 'register') {
    // Register user
  } else if($_POST['submit'] == 'activate') {
    // Activate user
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T05:36:16.553

创建单独的 form_process 脚本，然后包含在表单页面中。

```
if(!empty($_POST)){
 include 'form_process.php';
} 
```

form_process.php 应该只包含没有回显或打印的类/函数。

或者，您可以将操作 url 设置为同一页面，然后重定向回正确的页面。

```
<form id="add-profile-form" action="form_controller.php" method="post">
    <input type="hidden" name="act" value="adding"/>
    <!-- form 1\. -->
</form> 

<form id="edit-profile-form" action="form_controller.php">
    <input type="hidden" name="act" value="editing"/>
    <!-- form 2\. -->
</form> 
```

form_controller.php

```
if(isset($_POST['act']){
    if($_POST['act'] == 'adding'){
        //process form1
    }else if($_POST['act'] == 'editing'){
        //process form2
    }

    header("Location: success.php");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T05:04:39.290

您也可以在同一页面上执行此操作。只是你需要`action`为这两种形式做同样的事情。

您需要根据源表单创建一些条件并为和编写单独的功能`Form A`。`Form B`

您可以检查@Ami 使用的参数。

`/submit.php?action=register`或者`/submit.php?action=activate`

所以，你有这样的代码：

```
if ($_GET['action'] == 'register') {
  // Register user
} else if($_GET['action'] == 'activate' {
  // Activate user
} 
```

但是，您也可以只更改提交按钮的值，并使两种表单的操作参数相同：

```
if (isset($_POST['submit'])) {
  if ($_POST['submit'] == 'register') {
    // Register user
  } else if($_POST['submit'] == 'activate') {
    // Activate user
  }
} 
```

# c# - 在哪里可以找到可用于扫描和 OCR 文档的免费 .Net (C#) 库？

> ID：10459013
> 
> 赞同：28
> 
> 时间：2012-05-05T05:03:36.457
> 
> 标签：c#, .net, open-source, document, ocr

我搜索了一个免费的 .Net (C#) 库，iIcan 可以使用它从文档扫描仪中扫描，然后对文档进行 OCR，这样我就可以从中获取文本以保存在数据库中。

经过一番搜索，我找不到任何在 Visual Studio 2010 和 .Net 4 中工作的人。有人知道任何像这样工作的库吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T15:29:33.363

您可以使用 WIA 库来控制 OCR 的扫描过程和[tesseractdotnet](http://code.google.com/p/tesseractdotnet/)。~~可在[此处](https://github.com/charlesw/tesseract-ocr-dotnet)~~找到更新的 .NET 4.0 版本。

[在此处](https://github.com/charlesw/tesseract)更新了指向 .NET 包装器的链接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T05:17:50.733

我认为这可能对你[有用 Tessnet2 一个 .NET 2.0 开源 OCR 库](http://www.pixel-technology.com/freeware/tessnet2/)

# ruby-on-rails - 无法“捆绑安装”RoR 3.0.1

> ID：10459014
> 
> 赞同：0
> 
> 时间：2012-05-05T05:03:40.500
> 
> 标签：ruby-on-rails, ruby, gem, bundler, iterm

这是我的屏幕截图的链接。[http://imgur.com/bbLud](http://imgur.com/bbLud)（所以不允许菜鸟发布照片）

问题。

尝试捆绑安装并不断抛出“此版本需要不同版本的捆绑器”错误。所以我卸载了当前版本，检查了我的 bundler 版本，它仍然出现。我再次卸载它，它告诉我它不存在。有人可以请出一个想法。

编辑： Gemfile 的内容

```
source 'http://rubygems.org'

gem 'rails', '3.0.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3-ruby', '1.0.0', :require => 'sqlite3'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Bundle the extra gems:
# gem 'bj'
# gem 'nokogiri'
# gem 'sqlite3-ruby', :require => 'sqlite3'
# gem 'aws-s3', :require => 'aws/s3'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:18:33.180

错误就在屏幕截图中，您使用的是 rails 3.0.1。

无版本卸载

```
gem uninstall bundler 
```

它会询问您要删除哪个版本，然后将其删除，选择 1.3.1 进行卸载，再次进行捆绑安装，如果仍然显示错误，请将其发回此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:39:38.140

尝试使用手动安装bundler **1.0.0**`gem install bundler --version "1.0.0"`然后再次运行`bundle install`。

**更新**：查看另一个答案中的[屏幕截图](http://imgur.com/aiTaB)，您似乎已经有了 bundler 1.0.0，顺便说一句，无论如何都要试一试。看来 bundle 命令仍然指向较新的版本，如果你运行，你会得到什么`bundle -v`？

# javascript - 如何在javascript中应用带有功能的复选框？

> ID：10459021
> 
> 赞同：3
> 
> 时间：2012-05-05T05:05:19.737
> 
> 标签：javascript, css, function, checkbox, hide

如何在javascript中应用带有功能的复选框？

未选中复选框时如何隐藏带有特定标签的帖子/对象？

我只需要知道如何在打开页面时自动检查复选框的功能，以及隐藏带有特定标签的帖子/对象的复选框。申请是否正确——

```
display:none 
```

或者 -

```
 .structural {
 position:absolute;
 left:-9999px;
 } 
```

——我在研究中发现的？

考虑到我缺乏技能，这是我所能做到的：

```
<input 
  type="checkbox"
  name="mycheckbox"
  value="yes" 
  onclick="  CheckboxChecked(this.checked,'checkboxdiv')"  
</div>
</div>

<script type="text/javascript">
 CheckboxChecked(document.myform.mycheckbox.checked,'checkboxdiv');
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:33:07.133

如果我正确理解了您的问题，则您正在尝试在选中/取消选中复选框时隐藏/显示一组元素。这应该足以让您继续前进：

[http://jsfiddle.net/HsCVq/](http://jsfiddle.net/HsCVq/)

HTML：

```
<div class="hideWhenChecked">hide text</div>
<div>dont hide text</div>
<div class="hideWhenChecked">hide text</div>
<div>dont hide text</div>
<br />
<input type="checkbox" id="myCheckBox" /> 
```

JavaScript：​</p>

```
document.getElementById('myCheckBox').addEventListener('click', function () {
    var checked = this.checked;
    var elementsToHide = document.getElementsByClassName('hideWhenChecked');

    if (checked) {
        // hide each element
    } else {
        // show each element
    }
});​ 
```

我建议研究 jQuery 之类的 javascript 框架，以使此代码更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:05:36.907

看看这个

HTML：

```
<form>
        <!-- for keeping checkbox checked when page loads use checked="checked" --->
        <input type="checkbox" name="check" onclick="toggle(this.form.check);" checked="checked">
        <input type="checkbox" name="check1"/><br>
        <br>
    </form>
    <!-- the id of this element is used in script to set visibility --->
    <div id="text" style="visibility:hidden"> 
        My visibility is based on checkbox selection 
    </div> 
```

脚本

```
<script>
    function toggle(check)
    { if(!check.checked)
    {
    document.getElementById('text').style.visibility='visible';
    }
    else
    {
    document.getElementById('text').style.visibility='hidden';
    }
    }
</script> 
```

这应该工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:33:23.313

### 使用 jQuery

对于 jQuery，这样的事情非常简单：

```
$("form").on("click", ":checkbox[name^='toggle_']", function(event){
  $( "#" + event.target.name.split('_')[1] )
    .toggle( event.target.checked );
}); 
```

但是你不应该仅仅将 jQuery 用于这样的事情——那将是矫枉过正。

### 老式的 JavaScript，你祖父的方式。

这是一个快速实现（在 IE7+ 中测试）。它的工作原理是提取相应的元素以隐藏被单击的复选框的名称。

```
<form name="myform">
  <input name="toggle_checkBox" type="checkbox" checked /> 
  <div id="checkBox">
    If checked, you'll see me.
  </div>
</form> 
```

单击此复选框将隐藏其`DIV`下方。

```
var myform = document.forms.myform;
var inputs = myform.getElementsByTagName("input");

function toggleElement () {
 var e = event.target || window.event.srcElement;
 var display = e.checked ? "" : "none" ;
 document.getElementById( e.name.split('_')[1] ).style.display = display;
}

for ( var i = 0; i < inputs.length; i++ ) {
  var chk = inputs[i];
  if ( chk.type == "checkbox" && /^toggle_/.test( chk.name ) ) {
    if ( chk.addEventListener ) {
      chk.addEventListener("click", toggleElement, false); 
    } else if ( chk.attachEvent ) {
      chk.attachEvent("onclick", toggleElement);
    }
  }
} 
```

演示：http: [//jsbin.com/ibicul/5](http://jsbin.com/ibicul/5)

# java - 如何在 UNIX 目录中的每个文件上运行 Java 程序？

> ID：10459035
> 
> 赞同：0
> 
> 时间：2012-05-05T05:08:17.050
> 
> 标签：java, shell, unix

我有一个 java 类文件，我需要在目录中的每个文件上运行它。它的形式为

java StripEnronHeaders <文件名>

我对 UNIX 很陌生，所以我想知道是否有一个 UNIX 命令或一组命令可以让我为目录中的每个文件递归地运行该 java 程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T05:09:54.440

```
find . -type f -exec java StripEnronHeaders {} \; 
```

尽管这将为您找到的每个文件执行 java。如果该应用程序可以在命令行上接受多个文件，那么这将更有效：

```
find . -type f|xargs java StripEnronHeaders 
```

# wpf - 不会将文本换行在 WPF 的文本框中

> ID：10459039
> 
> 赞同：1
> 
> 时间：2012-05-05T05:09:17.623
> 
> 标签：wpf, xaml

![在此处输入图像描述](../Images/0923f7efa422829c7738a6bdb598242b.png)当用户在文本框中输入时被包裹文本所困扰，使用“MaxWidth 来控制文本框并包裹文本但它缩小了文本框的大小。我不确定我必须如何拉伸它，即使我正在使用 HorizantalAlignment =" Stretch”，但它与其他文本框不匹配。

如果我不换行文本，那么如果文本大于文本框，则整个网格都会移动，这是否可以修复大小并换行。

这是我的 xaml 代码

```
 <DockPanel Grid.Row="1">
            <Grid Name="gLeftContent" Grid.Row="0" Background="Transparent" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30*"/>
                    <ColumnDefinition Width="30*"/>
                    <ColumnDefinition Width="30*"/>
                    <ColumnDefinition Width="10*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="0"/>
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="0" />
                    <RowDefinition Height="25" />
                    <!-- Row 14 -->
                    <RowDefinition Height="25" />
                </Grid.RowDefinitions>

                <TextBox 
                Name="tbName" 
                Text="{Binding SelectedStory.Slug, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" Validation.ErrorTemplate="{StaticResource ErrorTemplate}" 
                Width="{Binding ActualWidth, ElementName=tbName}"   **//used ActualWidth but it shrinks the text box and doesn't match with the other text box.**
                Grid.Column="1" 
                Grid.Row="5" 
                TextWrapping="Wrap" 
                d:LayoutOverrides="Height" 
                Grid.ColumnSpan="2" 
                HorizontalAlignment="Stretch" 
                LostFocus="tbSlug_LostFocus"
                >
                 <TextBox 
                Name="tbHeadline" 
                Text="{Binding SelectedStory.Headline, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" Validation.ErrorTemplate="{StaticResource ErrorTemplate}" 
                Grid.Column="1"  
                Grid.Row="6" 
                TextWrapping="Wrap" 
                d:LayoutOverrides="Height" 
                Grid.ColumnSpan="2" 
                HorizontalAlignment="Stretch" 
                LostFocus="tbHeadline_LostFocus" 
                 />
                </TextBox>
                <ItemsControl 
                Grid.Column="1" 
                Grid.Row="14" 
                Grid.RowSpan="2" 
                Grid.ColumnSpan="2" 
                cal:RegionManager.RegionName="{x:Static inf:RegionNames.MetadataGenerateImagesRegion}"/>
            </Grid>
        </DockPanel> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:19:36.840

让我们从一个干净的答案重新开始：

```
 <TextBox Name="tbName"  
        Text="{Binding SelectedStory.Slug, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" Validation.ErrorTemplate="{StaticResource ErrorTemplate}"  
        Width="Auto" Height="Auto"
        HorizontalAlignment="Stretch"  VerticalAlignment="Stretch"
        Grid.Column="1"  Grid.Row="5"  Grid.ColumnSpan="2"
        TextWrapping="Wrap"  AcceptsReturn="True"  
        LostFocus="tbSlug_LostFocus" > 
```

请在您的代码中完全替换它以避免任何遗漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:33:50.490

您需要设置 RowDefinition Height="Auto" 它可以增长以适应其他行。

绝对不应该将宽度绑定到自身。

尝试

```
 <TextBox 
            Name="tbName" 
            Text="{Binding SelectedStory.Slug, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" Validation.ErrorTemplate="{StaticResource ErrorTemplate}" 
            Grid.Column="1" 
            Grid.Row="5"  
            Grid.ColumnSpan="2" 
            TextWrapping="Wrap"
            HorizontalAlignment="Stretch"
            LostFocus="tbSlug_LostFocus" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:17:51.843

尝试添加到您的文本框中：

```
AcceptsReturn="True" 
```

尽管您的控件可能会显示换行的文本，但目前它无法接受输入键击。

# javascript - 如何在javascript中比较两个元素的位置

> ID：10459040
> 
> 赞同：0
> 
> 时间：2012-05-05T05:09:19.933
> 
> 标签：javascript, css

自本周初以来，我一直在尝试完成这项工作，但无法弄清楚。我的 HTML 文件中有两个元素。它们在同一条垂直通道上，每单击一次按钮，element1 就会向左水平移动 60ems。我必须比较这两个元素的位置，并用 if/else 语句检测 element1 是否已通过 element2。当它通过时，我想将 element1 移动到其初始位置并重新开始。但是 if 语句永远不会触发，它总是会跳转到 else 语句。

我尝试比较以下属性：

```
$('#elemet1').position();
$('#elemet1').position().left;
$('#elemet1').offset();
$('#elemet1').offsetLeft;
$('#elemet1').css("position");
$('#elemet1').css("left");
$('#elemet1').css("margin");
$('#elemet1').left; 
```

我试图比较如下位置：

```
$(function () {
      $("button").click(function () {
          var position1 = $('#element1').css("left");
          var position2 = $('#element2').css("left");
          if (position1 <= position2) {
              $("#element1").animate({left:'+=240em'}, 600);
          }
          else {
              $("#element1").animate({left:'-=60em'}, 600);
          }
      });
  }); 
```

如果你能给我一个答案或指导我到另一个帖子，我将不胜感激。先感谢您。

编辑：我使用的风格如下：

```
.element2 {
    position: relative;
    width: 60em;
    height: 40em;
    bottom: 8em;
    background: rgba(242, 210, 139, 0.6);
    border-radius: 1.2em;
    z-index: 1;
    overflow: hidden;

#element1 {
    position: absolute;
    margin-left: 180em;
    width: 60em;
    height: 40em;
    z-index: 1;
} 
```

我应该在开头提到这一点：element1 在 element2 内部：

```
 <div class="element2">
      <img id="element1" src="image/bg1.png" />
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:11:32.487

这将为您提供元素的当前位置：

```
$('#element').position().left; 
```

如果您需要相对于文档的位置（而不是相对于父元素），您可以使用：

```
$('#element').offset().left; 
```

您应该能够直接比较这些不同元素的返回值。这是一些适用于我的示例代码，请注意无需解析，因为它们总是返回像素值。

```
 var pos = Math.max($(w).scrollTop(), 38),
      top = $(ballon).position().top,
      dist = Math.abs(pos-top),
      time = dist > 1000 ? 2000 : dist / 0.15;

  if (pos + $(w).height() >= pHeight) {
    pos = pHeight - bHeight - gHeight;
    $(ballon).animate({'top': pos}, time, 'easeInOutSine');
  }
  else if (dist > 150 || pos < 100) {
    $(ballon).animate({'top': pos}, time, 'easeInOutBack');
  } 
```

# python - Django - 将包安装到 virtualenv/system 还是将它们包含在项目中更好？

> ID：10459041
> 
> 赞同：1
> 
> 时间：2012-05-05T05:09:32.440
> 
> 标签：python, django, project

可以在 python/django 中使用的大量应用程序/包是两者的一大优势。这也引发了关于处理这些已安装的应用程序/库的问题，尤其是在需要部署项目的多个环境时。

将此类第三方库安装到系统对我来说似乎并不理想。因此，经过一番研究，我发现有两种可能的方法，即 virtualenv 或将包包含在项目文件夹中。但问题是为每个项目创建一个 virtualenv 有点混乱，另一方面，在项目目录中包含大型包会增加项目大小并产生导入问题。

我在上述两种方法之间找到了一种中间立场，即将可与多个项目共享的库安装到 virtualenv 和项目中较小的项目特定库中。

例如，对于 django 项目，我会将 django 安装到 virtualenv 中，并且项目中使用的其他库（例如 xlwrt、dojango 等）包含在项目的“lib”文件夹中。

这是最好的方法还是有更好的替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T06:01:18.320

最好的方法是为每个项目使用单独的 virtualenv。它没有什么乱七八糟的（使用 virtualenvwrapper）。

在项目之间共享库始终存在潜在风险：如果您想在一个项目中升级库并在另一个项目中使用旧版本怎么办？

`pip freeze`还将列出项目的实际应用程序列表，而不是您应该手动过滤的列表。

# c# - AutoCompleteExtender 非常慢

> ID：10459046
> 
> 赞同：1
> 
> 时间：2012-05-05T05:10:49.487
> 
> 标签：c#, performance, autocompleteextender

我在评论中问了这个问题，但我认为我不应该问第二个问题来评论第一个问题。我有 AutoCompleteExtender，它非常慢。让我的列表填充 AutoCompleteExtender 的方法必须每次都从 API 获取和查询 XML。问题是我的方法，在这个方法中我无法访问 SessonState、Cookie，甚至是同一页面上静态方法的变量，所以我每次都看不到 GET 和 Query 的替代方法。虽然这很慢，真的不值得拥有。必须有另一种方法（可能不使用 AJAX 工具包）才能使其快速运行。

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static List<string> GetNames(string prefixText, int count)
 {
    //Code Here Takes long
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:45:20.807

编辑 CompletionInterval 、 CompletionSetCount 和 MinimumPerfixLength 几乎没有任何效果。

看起来这是一个非常常见的问题 - AJAX TextboxCompleteExtender 非常慢，因为它每次都查询数据 -如果其他人遇到这个问题，[CodePlex有一个很棒的开源解决方案。](http://datastructures.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:51:56.987

在采用任何特定解决方案之前，您需要弄清楚您的性能瓶颈在哪里。这将帮助您在哪里需要进行更改/修复以增加查找。

您需要检查两个方面（假设您有快速连接）：

1.  服务器端：确保您的服务器快速返回调用。尝试返回一个小的字符串数组（不要执行任何后端数据检索）。如果性能显着提高，则意味着您的服务/数据层代码存在问题，您需要优化其性能。

2.  客户端：客户端的最大因素之一是`CompletionInterval`属性。Visual Studio 设置的默认值为 1000 毫秒。我把它改成10，它变得更快了。

就我而言，瓶颈在于控制配置本身。我的服务器端已经很快了，因为我使用[trie 结构](https://en.wikipedia.org/wiki/Trie)进行快速后端数据查找和检索。我还返回了一小部分记录，打开了客户端缓存。最大的因素是`CompletionInterval`。

# git - Cygwin git rebase 失败？

> ID：10459049
> 
> 赞同：1
> 
> 时间：2012-05-05T05:10:59.133
> 
> 标签：git, cygwin, git-rebase

如果我跑

```
git rebase -i HEAD~10 
```

编辑想出了

```
git://github.com/jquery/jquery.git 
```

而不是提交。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:58:36.300

```
#!/bin/dash -e
if [ "$1" ]
then k=$(cygpath -w "$1")
elif [ "$#" != 0 ]
then k=
fi
Notepad2 ${k+"$k"} 
```

1.  如果没有路径，则不传递路径

2.  如果路径为空，则传递空路径

3.  如果路径不为空，则转换为 Windows 格式。

然后我设置这些变量：

```
export EDITOR=notepad2.sh
export GIT_EDITOR='dash /usr/local/bin/notepad2.sh' 
```

1.  EDITOR 允许脚本与 Git 一起工作

2.  GIT_EDITOR 允许脚本使用[Hub 命令](//hub.github.com)

[来源](//github.com/svnpenn/dotfiles/tree/2973070/editor)

# tsql - 无法引用 select for join 中的项目

> ID：10459051
> 
> 赞同：0
> 
> 时间：2012-05-05T05:11:05.497
> 
> 标签：tsql, stored-procedures

当有嵌套查询时，我无法确定参考范围。例如，我似乎无法在我的内部连接中引用 NoCarsFound.CU。我不明白为什么在我的联接中我不能引用以前的结果集...我想我只是不理解在我的内部联接的 ON 比较中引用以前的选择结果或引用别名的范围。

我也得到不明确的列名'CU'

所以我不断收到错误说它不知道 NoCarsFound.CU。我什至尝试引用诸如 vwInvalidCars.CU 之类的直视图，它也不理解 vwInvalidCars。

```
create procedure [Rac].[GetCarStatDetails_sp]
    @Year int,
    @CarTitle varchar(30),
    @Company varchar(31),
    @CU varchar(12),
    @UserName varchar(50)
as
BEGIN

DECLARE @CarMatch table
(
    FaceValueTol varchar(100),
    FaceValueDesc varchar(100),
    Year int,
    CU varchar(16),
    PaintTypeDesc varchar(50)

)

insert into @CarMatch
    Select  temp1.FaceValueTol,
            temp1.FaceValueDesc,      
            temp1.Year,
            temp1.CU,
            temp1.PaintTypeDesc
    from    Rac.viewCarBase as temp1  
    join (select Username, userCars.CU from Nep.viewUserCars userCars where UserName = @UserName) as userCars on userCars.CU = temp1.CU
    INNER JOIN
    (
        Select  CU,
                from Rac.vwCarFactor carfactors
        where RiskFactorTypeID not in (334,553,34334,534,7756)
        Group by    CU
    ) as temp
    on 
        and temp1.CU = temp.CU 
        and temp1.PaintTypeDesc  = temp.CalcPaintTypeDesc 
    Where
        temp1.RiskFactorTypeID=4
        and temp1.[Year]=@Year
        and (temp1.CarTitle=@CarTitle or @CarTitle='<All>')
        and (temp1.CU=@CU or @CU='<All>')

SELECT  ProductID_bo,
        Coalesce(CarTitle_bo,LTRIM(RTRIM(CarTitle))) as CarTitle, 
        Coalesce(Company_bo,LTRIM(RTRIM(Company))) as Company, 
        Coalesce(CU_bo,LTRIM(RTRIM(CU))) as CU
    FROM
        Rac.viewCarBase as NoCarsFound
        join (select Username, userCars.CU from Nep.viewUserCars userCars where UserName = @UserName) as userCars on userCars.CU = NoCarsFound.CU
    LEFT OUTER JOIN
    (
        Select  ProductID_bo,
                CarTitle_bo, 
                Company_bo,
                CU_bo,
        from (
                SELECT  ProductID as ProductID_bo,
                        LTRIM(RTRIM(CarTitle)) as CarTitle_bo, 
                        LTRIM(RTRIM(Company)) as Company_bo, 
                FROM    Rac.viewCarBase
                join (select Username, userCars.CU from Nep.viewUserCars userCars where UserName = @UserName) as userCars on userCars.CU = Rac.viewCarBase.CU
                where   ProductID in (Select ProductID from @CarMatch) and
                        and (CarTitle=@CarTitle or @CarTitle='<All>')
                        and (Company=@Company or @Company='<All>')
                        and (CU=@CU or @CU='<All>')

            ) AS SUB1

        Group By    
                    CarTitle_bo, 
                    Company_bo,
                    CU_bo,
        ON
                NoCarsFound.CU = CarsFoundDeals.CU_bo
    where 
        and (CarTitle=@CarTitle or @CarTitle='<All>')
        and (Company=@Company or @Company='<All>')
        and (CU=@CU or @CU='<All>')

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:19:18.843

我将从上面的内容中查看以下两条 SQL：

```
LEFT OUTER JOIN
(
    Select  ProductID_bo,
            CarTitle_bo, 
            Company_bo,
            CU_bo,
    from (
            SELECT  ProductID as ProductID_bo,
                    LTRIM(RTRIM(CarTitle)) as CarTitle_bo, 
                    LTRIM(RTRIM(Company)) as Company_bo, 
            FROM    Rac.viewCarBase
            join (select Username, userCars.CU from Nep.viewUserCars userCars where UserName = @UserName) as userCars on userCars.CU = Rac.viewCarBase.CU
            where   ProductID in (Select ProductID from @CarMatch) and
                    and (CarTitle=@CarTitle or @CarTitle='<All>')
                    and (Company=@Company or @Company='<All>')
                    and (CU=@CU or @CU='<All>') --<--HERE!!!!!!!!!!!!!!!!!!!!!!!!

        ) AS SUB1 
```

和

```
where 
    and (CarTitle=@CarTitle or @CarTitle='<All>')
    and (Company=@Company or @Company='<All>')
    and (CU=@CU or @CU='<All>') -- <--HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
```

Both of these appear to be referencing `CU` in a way that could potentially cause the error you are reporting.

# android - 写模式下的Android挂载系统

> ID：10459052
> 
> 赞同：2
> 
> 时间：2012-05-05T05:11:27.957
> 
> 标签：android, root, mount

我在虚拟框中有一个 android iso。
我需要以写模式挂载 /system 。
看起来好像我是 root 用户，但是当我尝试挂载它时，权限被拒绝。
以下是命令输出。

```
My shell:

root@eeepc:/ #

root@eeepc:/ # whoami
root

root@eeepc:/ # mount
rootfs / rootfs rw 0 0
proc /proc proc rw,relatime 0 0
sys /sys sysfs rw,relatime 0 0
tmpfs / tmpfs ro,relatime 0 0
/dev/sda1 /mnt ext3 rw,relatime,errors=continue,barrier=0,data=writeback 0 0
/dev/loop0 /sfs squashfs ro,relatime 0 0
/dev/loop1 /system ext4 ro,relatime,user_xattr,barrier=1,data=ordered 0 0
tmpfs /cache tmpfs rw,relatime 0 0
/dev/sda1 /data ext3 rw,relatime,errors=continue,barrier=0,data=writeback 0 0
tmpfs /dev tmpfs rw,relatime,mode=755 0 0
devpts /dev/pts devpts rw,relatime,mode=600 0 0
proc /proc proc rw,relatime 0 0
sysfs /sys sysfs rw,relatime 0 0
tmpfs /mnt/asec tmpfs rw,relatime,mode=755,gid=1000 0 0 
```

**我试图重新安装的命令：**

```
mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system
mount -o rw,remount -t yaffs2 /dev/loop1 /system
mount -o rw,remount -t ext4 /dev/loop1 /system 
```

以上所有都给予了拒绝的许可。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:32:15.627

ISO 基于只写文件系统，`ISO9660`没有提交后写入的概念。考虑尝试更改 CD 或 DVD 上的文件。

如果要更改 /system 中的文件，则需要以不同的方式解决问题。

/system 挂载点是（可能）文件的循环挂载。您可以在其顶部使用影子文件系统（祝您好运，casper 等），也可以将其内容复制到另一个文件系统并在那里玩弄它们。

例如循环挂载格式化为 ext2 的文件

[谷歌上的第一次点击](http://blog.mmassonnet.info/2009/05/making-use-of-loop-devices-on-linux.html%5d)

[首先点击 bing：](http://www.slax.org/documentation_loop_mount.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:23:20.263

所以，我无法做到这一点，但我安装了 android-x86-2.3 iso ，它现在可以工作了。

现在我有方向问题，它只适用于景观..

希望我能找到一些解决方案

# django - Django模型排除不工作

> ID：10459054
> 
> 赞同：0
> 
> 时间：2012-05-05T05:11:35.947
> 
> 标签：django, django-forms

我已经排除了 ModelForm 中的一个字段，但它似乎不会影响表单的 display `.as_p`。当我什么都没有实例化时，它甚至会显示它！

这是模型表单：

```
class WorkoutForm(ModelForm):
    class Meta:
        model = Workout
        exclude = ('user',) 
```

和相关的视图：

```
def addworkout(request, uid):    
    thisuser = get_object_or_404(User, pk=uid)
    if request.method == 'POST':
        form = WorkoutForm(request.POST)
        if form.is_valid():
            form.save() 
            return HttpResponseRedirect('/u/'+str(uid))
    else:
        w = Workout(user=thisuser)

        #creates a form for thisuser
        form = WorkoutForm(instance = w)
    return render_to_response('addworkout.html', {'form':form, 'user':thisuser},   RequestContext(request)) 
```

还有模板：

```
<body>
    <p>"{{request.path}}" </p>
    Add a new workout, {{user.name}}! 
    <form action="/u/1/addworkout" method="POST">{% csrf_token %} 
    {{ form.as_p }} 

    <input type="submit" value= "Submit" />
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:05:08.613

这是什么？

```
else:
    w = Workout(user=thisuser) 
```

不应该是这样的：

```
w = Workout.objects.get(user=thisuser) 
```

如果是这样，它是否修复了错误？

在您的`POST`请求块中，您还需要传入实例，以便`form = WorkoutForm(request.POST, instance=w)`

重新编写，您的视图应如下所示：

```
def addworkout(request, uid):
    thisuser = get_object_or_404(User, pk=uid)
    w = get_object_or_404(Workout, user=thisuser)
    form = WorkoutForm(instance = w)

    if request.method == 'POST':
        form = WorkoutForm(request.POST, instance=w)
        if form.is_valid():
            form.save() 
            return HttpResponseRedirect('/u/'+str(uid))

    return render_to_response('addworkout.html', {'form':form, 'user':thisuser},   RequestContext(request)) 
```

# java - Java RMI - 远程部署

> ID：10459057
> 
> 赞同：0
> 
> 时间：2012-05-05T05:12:03.817
> 
> 标签：java, deployment, rmi

我有一个本地工作的 JAVA RMI 应用程序（服务器和客户端）。我使用 Eclipse 和一个插件（Genady）来编写和运行这些应用程序。

我的项目分为三个部分： 1\. 服务器 2\. 接口（客户端和服务器通用） 3\. 客户端

本地部署，使用 Eclipse(+plugin)，完美运行。客户端使用公共接口（添加到“构建路径”）与服务器（在 eclipse 中的构建路径中添加公共接口）进行通信（来回）。

现在，我计划在两台不同的计算机上测试同一个系统，它们都具有 Internet 连接。现在我该怎么做？我应该在一台计算机（服务器）上安装 Apache 并将服务器 + 接口文件（类文件）放入 Web 可访问目录吗？& 然后从另一台计算机（客户端）运行客户端文件（同时具有客户端和接口类文件）？

有人可以帮我配置吗？我的意思是，关于我应该做什么才能使远程部署正常工作的分步指南？

是否必须使用 Apache（或任何 Web 服务器应用程序）？我的应用程序在不使用 Web 服务器的情况下工作的任何其他替代方案（我的意思是，像直接连接或其他什么？）？

（我觉得我已经提供了所有需要的信息。但如果需要更多信息，请询问。）

这是我最后一年的项目，我的最后一个演示即将推出！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:25:27.150

我不知道 Genady 是做什么的，因为我很少使用 Eclipse。无论如何，开发 RMI 应用程序非常容易。

打包服务器代码并在远程机器（RMI 中的 R）（又名服务器主机）上运行它，它应该在默认使用端口 1099 的注册表中注册自己，但您可以在任何您喜欢的端口中创建注册表：

```
MyRemoteInterface stub = (MyRemoteInterface) UnicastRemoteObject.exportObject(server, 0); //I don't know if this is needed anymore, or you could make the "server" extend UnicastRemoteObject
int thePortUsedInTheServer = 1099; //default
Registry registry = Registry.createRegistry(thePortUsedInTheServer);
registry.rebind("Server", stub)); 
```

打包客户端代码并在客户端（RMI 中的 M+I）上运行它，它应该在远程机器（主机+端口）中找到注册表：

```
String host = ...; //the host where the server is
int port = ...; //the port used in the server
Registry registry = LocateRegistry.getRegistry(host, port);
MyRemoteInterface stub = (MyRemoteInterface)registry.lookup("Server");
stub.myRemoteMethod(); //call your remote methods 
```

javadoc 应该可以帮助您。不需要其他任何东西，不需要 Apache 等。注意攻击性的防病毒软件、防火墙等。在您了解要点之后，这些是唯一真正的问题。

# javascript - 热图不起作用

> ID：10459058
> 
> 赞同：0
> 
> 时间：2012-05-05T05:12:26.917
> 
> 标签：javascript, google-fusion-tables

我按照示例代码创建了一个带有“热图”（我称之为热点）的融合表地图，但它不起作用。请问有人可以看一下吗？

我不知道问题出在某些语法元素（但代码没有中断）还是表单元素？另一种可能性可能是只有几个点，并且不可能仅使用这些点生成热图。但我从未听说过这样的技术问题。

```
<!DOCTYPE html>
<html>
<head>
  <style>
    #map-canvas { width:500px; height:400px; }
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layerl0;
    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(0, 0),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      layerl0 = new google.maps.FusionTablesLayer({
        query: {
          select: "'ENDERECO_GOOGLE'",
          from: 3767057
        },
        map: map
      });
      google.maps.event.addDomListener(document.getElementById('heatmap'),
        'click', function() {
         var heatmap = document.GetElementById('heatmap');
         layer.setOptions({
           heatmap: {
             enabled: heatmap.checked
           }
         });
      });           
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>
<body>
  <div id="map-canvas"></div>
  <div>
    <input id="heatmap" type="checkbox" />
    <label>Hotspots</label>
  </div>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:54:34.067

您发布的文件中有 2 个语法错误。

```
document.GetElementById();
// must be
document.getElementById(); 
```

和

```
layer.setOptions()
// must be
layerl0.setOptions() 
```

# php - 如何使用 preg_match_all 获取标签中的详细信息

> ID：10459065
> 
> 赞同：0
> 
> 时间：2012-05-05T05:13:42.953
> 
> 标签：php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:07:16.137

用正则表达式解析 HTML 不是一个好主意。有太多变数会导致事情变得混乱。

尽管如此：

```
<?php
    $scrr = "<em>Details</em>I want to <em>get</em>";

    preg_match_all('/<em>(.+?)<\/em>/is', $scrr, $match);

    print_r($match);
?> 
```

# python - 如何将我的 bytearray('b\x9e\x18K\x9a') 转换为类似的东西--> '\x9e\x18K\x9a'<---只是 str ，而不是数组

> ID：10459067
> 
> 赞同：5
> 
> 时间：2012-05-05T05:14:07.203
> 
> 标签：python, string, bytearray

如何将我的转换`bytearray('b\x9e\x18K\x9a')`为这样的东西--> `\x9e\x18K\x9a`<---只是str，而不是数组！

```
>> uidar = bytearray()
>> uidar.append(tag.nti.nai.uid[0])
>> uidar.append(tag.nti.nai.uid[1])
>> uidar.append(tag.nti.nai.uid[2])
>> uidar.append(tag.nti.nai.uid[3])
>> uidar
   bytearray('b\x9e\x18K\x9a') 
```

我尝试通过解码我的字节数组

```
uid  =  uidar.decode('utf-8') 
```

但它不能...

```
Traceback (most recent call last):
  File "<pyshell#42>", line 1, in <module>
    uid = uidar.decode("utf-8")
  File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x9e in position 0: invalid start byte 
```

请帮帮我 ...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T05:25:04.710

在 2.x 中，字符串是字节串。

```
>>> str(bytearray('b\x9e\x18K\x9a'))
'b\x9e\x18K\x9a' 
```

Latin-1 将前 256 个字符映射到它们的等效字节值，因此在 Python 3.x 中：

```
3>> bytearray(b'b\x9e\x18K\x9a').decode('latin-1')
'b\x9e\x18K\x9a' 
```

# objective-c - 混淆重新将 0.99 之前的 Cocos2d-iPhone 代码升级到当前版本 - AtlasSpriteManager

> ID：10459069
> 
> 赞同：0
> 
> 时间：2012-05-05T05:14:22.647
> 
> 标签：objective-c, cocos2d-iphone, atlassprites

在 0.99 之前的迁移指南的帮助下，我一直在快速完成代码 - [http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrating_to_0_9](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrating_to_0_9) - 但在转换中遇到了困难AtlasSpriteManager、AtlasSprite 到 CCSPrite 等对象。

我还不清楚正在做什么或当前系统在涉及 Board 对象时如何工作。（我发现的例子不包括它）。我知道我需要将 AtlasSprite 实例转换为 CCSprite。

编辑：Board 是 CCLayer 的一个实现

这是我需要升级的代码示例：

```
Board *board = [Board sharedBoard];

AtlasSpriteManager *backgroundManager = [AtlasSpriteManager spriteManagerWithFile:@"cloudBoard.png" capacity:200];

 [board addChild:backgroundManager z:0 tag:BLOCK_KEY];

 background = [AtlasSprite spriteWithRect:CGRectMake(0, 0, 480, 320) spriteManager:backgroundManager];
 background.anchorPoint = ccp(0.0, 0.0);
 background.position = ccp(0, 0);

 [backgroundManager addChild:background]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:55:01.513

我还没有完成升级，所以我用成功的运行时验证了这一点，但是 AtlasSpriteManager 和 AtlasSprite 都被替换为 CCSprite 的实例

编辑：是的，这就是答案。

# php - 找不到命令 - exec() 命令中的错误

> ID：10459070
> 
> 赞同：13
> 
> 时间：2012-05-05T05:14:24.897
> 
> 标签：php

我从 php 文件运行它

```
exec("epm package"); 
```

我在error_log中得到以下错误

```
sh: epm: command not found 
```

我在终端手动测试它工作正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T05:19:44.133

尝试输入完整路径名：

`exec("/path/to/epm package");`

您的网络服务器进程不一定会使用与您自己的帐户相同的配置进行设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T05:21:08.573

听起来好像`epm`不在您的网络服务器正在运行的用户的 PATH 环境变量中（可能是 apache）。要解决此问题，请执行以下操作之一：

*   将路径添加`epm`到 webserver-users PATH
*   提供要执行的命令的完整路径 ( `/whatever/folder/epm package`)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T05:18:30.060

我假设您在终端中测试的用户和运行 PHP 的网络服务器用户是不同的。您需要确保将 epm 包的目录导出到 webserver 用户的 PATH 环境变量。

# c - 从不兼容的指针类型传递 `combine_string' 的 arg 1

> ID：10459072
> 
> 赞同：0
> 
> 时间：2012-05-05T05:15:25.767
> 
> 标签：c

我在“new_str = combine_string(newstr, "test");" 行收到编译错误 错误：从不兼容的指针类型传递 `combine_string' 的 arg 1

```
char * combine_string(char *, char *);

....

char *new_str;
new_str = newstr(item, strlen(item));
new_str = combine_string(newstr, "test");

...

char * combine_string(char *name, char *name2)
{
    char *retval;

    retval = erealloc(retval, (strlen(name) + strlen(name2) + 1));
    if (retval != NULL)
        sprintf(retval, "%s%s", name, name2);
    else
        free(name); //Wouldn't use it any longer
    return retval;
}

...

char *newstr(char *s, int l) {
    char *rv = emalloc(l + 1);

    rv[l] = '\0';
    strncpy(rv, s, l);
    return rv;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:21:20.620

您声明它的方式`newstr`是一个函数，而`new_str`它是一个 char*。

你可能打算通过`combine_string(new_str, "test");`而不是你如何拥有它。

我可能会建议将来给您的变量和函数提供更具描述性的名称，以避免这些事情发生！

编辑：如果您想使用调用的返回值`newstr()`as arg 1 of`combine_string()`那么您将必须传递正确的参数以`newstr()`像这样

```
new_str = combine_string(newstr(other_str, length_of_other_str), "test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:18:43.370

`newstr`显然是一个函数，而不是一个`char *`

```
new_str = newstr(item, strlen(item));
new_str = combine_string(newstr, "test"); 
```

你想要：

```
new_str = combine_string(new_str, "test"); 
```

?

# php - PHP 操作字符串（如果存在组件，则查找/替换）

> ID：10459079
> 
> 赞同：1
> 
> 时间：2012-05-05T05:16:28.090
> 
> 标签：php, string, query-string, text-manipulation

我需要使用 PHP 检查特定文本组件的字符串，如果该值存在，则将其替换为新值。例如，我可能有一个这样的字符串：

```
?customerID=12345&recid=65&skip=20&type=job 
```

我需要找到“&skip=20”（它不会总是 = 20，它可以是 20、80、100 等任何数字）子字符串，并用变量（$新值）。因此，如果该字符串存在并且 $newValue = 40 新字符串将是：

```
?customerID=12345&recid=65&skip=40&type=job 
```

如果字符串是：

```
?customerID=12345&recid=65&skip=160&type=job 
```

新字符串将是 ($newValue = 180)：

```
?customerID=12345&recid=65&skip=180&type=job 
```

我很确定我应该使用这些函数——strpos、preg_match、preg_replace——但我在这方面花了太长时间，而且似乎没有更接近。如果有人可以告诉我如何使用这些或其他函数来查找子字符串并替换将不胜感激的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:17:30.643

尝试[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)

```
<?php

$str = "?customerID=12345&recid=65&skip=20&type=job";
$newStr = preg_replace_callback("/skip=([0-9]+)/i", "doIt", $str)

function doIt($match){

  return $match[1] + 20;

} 
```

# c# - 使用 WebBrowser 控件加载 PDF 文件

> ID：10459084
> 
> 赞同：0
> 
> 时间：2012-05-05T05:17:14.020
> 
> 标签：c#, winforms, webbrowser-control

我知道这个问题已经被问过了。但我找不到任何合适的答案。这是我的问题。我尝试使用Webbrowser控件在本地机器上加载pdf文件以进行打印预览。它工作正常。但问题是如果未安装adobe reader webbrowser控件不会打开文件进行预览。我的意思是说例如如果安装了Foxit reader ，那么webbrowser控件也不支持。我无法访问本地机器注册表来查找已安装的应用程序。因为应用程序也是为本地用户安装的。

```
 webBrowser1.Navigate("......"); 
```

如果 webbrowser 无法使用 adobe reader 打开文件，是否可以显示警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:40:55.543

[检测 Adob​​e Reader](http://www.matthewratzloff.com/blog/2007/06/26/detecting-plugins-in-internet-explorer-and-a-few-hints-for-all-the-others/#adobe-reader)

希望这可以帮助。

**编辑：**

```
webBrowser1.DocumentText = @"
            <html>
            <head>
                <script type='text/javascript'>
                    var isInstalled = false;
                    var version = null;
                    if (window.ActiveXObject) 
                    {
                          var control = null;
                          try {
                            // AcroPDF.PDF is used by version 7 and later
                            control = new ActiveXObject('AcroPDF.PDF');
                          } catch (e) {
                            // Do nothing
                          }
                          if (!control) 
                          {
                            try 
                            {
                              // PDF.PdfCtrl is used by version 6 and earlier
                              control = new ActiveXObject('PDF.PdfCtrl');
                            } 
                            catch (e) 
                            {
                              alert(e);
                              //return;
                            }
                          }
                          if (control) {
                                isInstalled = true;
                                version = control.GetVersions().split(',');
                                version = version[0].split('=');
                                version = parseFloat(version[1]);
                                alert('Adobe reader is installed. Version: ' + version);
                          }
                          else
                           {
                                alert('Adobe reader is not installed');
                           }
                    } 
                    else 
                    {
                      // Check navigator.plugins for ""Adobe Acrobat"" or ""Adobe PDF Plug-in""*
                    }

                </script>
            </head>
                <body>
                </body>
            </html>"; 
```

# macos - Cocoa：模拟 Macbook 上键和多媒体键

> ID：10459085
> 
> 赞同：13
> 
> 时间：2012-05-05T05:17:48.200
> 
> 标签：macos, cocoa, events, simulate

我正在尝试使用任何活动应用程序模拟上 Macbook 键

```
CGEventCreateKeyboardEvent (NULL, (CGKeyCode)keycode, true);
CGEventCreateKeyboardEvent (NULL, (CGKeyCode)keycode, false); 
```

到目前为止，我成功地找到并发送了前 4 个键的事件：

```
keycode / Key

107 - Brightness Down
113 - Brightness Up
130 - Mission Control / Expose
160 - Dashboard / Launchpad
 ?? - Keyboard lit Down
 ?? - Keyboard lit Up
 ?? - Previous Track
 ?? - Play/Pause
 ?? - Next Track
 ?? - Mute
 ?? - Volume Down
 ?? - Volume Up
 ?? - Eject 
```

但我找不到任何其他关键代码。我什至遍历了 1000 个整数，将其数字作为事件发送，似乎没有人工作 =P

**那么，有没有办法模拟这些事件呢？**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T20:14:10.970

出于某种原因，媒体键不被视为正常的键盘事件。[这篇文章](http://rogueamoeba.com/utm/2007/09/29/)显示了事件的样子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-28T22:38:47.997

截至 2017/2018 年，一些 API 发生了变化。在 Swift 中试试这个片段：

```
// Simulate illumination up
let code = NX_KEYTYPE_ILLUMINATION_UP
let event1 = NSEvent.otherEvent(with: .systemDefined, location: NSPoint.zero, modifierFlags: NSEventModifierFlags(rawValue: 0xa00), timestamp: 0, windowNumber: 0, context: nil, subtype: 8, data1: (Int((code << 16 as Int32) | (0xa << 8 as Int32))), data2: -1)
event1?.cgEvent?.post(tap: .cghidEventTap)
let event2 = NSEvent.otherEvent(with: .systemDefined, location: NSPoint.zero, modifierFlags: NSEventModifierFlags(rawValue: 0xb00), timestamp: 0, windowNumber: 0, context: nil, subtype: 8, data1: (Int((code << 16 as Int32) | (0xb << 8 as Int32))), data2: -1)
event2?.cgEvent?.post(tap: .cghidEventTap)

// Simulate illumination down
let code = NX_KEYTYPE_ILLUMINATION_DOWN
let event1 = NSEvent.otherEvent(with: .systemDefined, location: NSPoint.zero, modifierFlags: NSEventModifierFlags(rawValue: 0xa00), timestamp: 0, windowNumber: 0, context: nil, subtype: 8, data1: (Int((code << 16 as Int32) | (0xa << 8 as Int32))), data2: -1)
event1?.cgEvent?.post(tap: .cghidEventTap)
let event2 = NSEvent.otherEvent(with: .systemDefined, location: NSPoint.zero, modifierFlags: NSEventModifierFlags(rawValue: 0xb00), timestamp: 0, windowNumber: 0, context: nil, subtype: 8, data1: (Int((code << 16 as Int32) | (0xb << 8 as Int32))), data2: -1)
event2?.cgEvent?.post(tap: .cghidEventTap) 
```

（归功于[@Alex293](https://github.com/Alex293)）

这是来自我们[关于](https://github.com/pirate/mac-keyboard-brightness/issues/1)以编程方式控制键盘亮度的方法的讨论：[https ://github.com/pirate/mac-keyboard-brightness](https://github.com/pirate/mac-keyboard-brightness)

还有这个答案：[如何在可可中模拟mac媒体键](https://stackoverflow.com/questions/18470235/how-to-simulate-mac-media-keys-in-cocoa/50574142#50574142)

# ruby - rvm - 无法将版本设置为 1.9.3

> ID：10459089
> 
> 赞同：3
> 
> 时间：2012-05-05T05:17:56.100
> 
> 标签：ruby

```
$ ruby -v
$ ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

我有：

```
rvm list rubies

rvm rubies

   ree-1.8.7-2011.03 [ x86_64 ]
 * ruby-1.9.3-p125 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

但我得到：

```
$ ruby soduko.rb 
nil
nil 
```

我无法切换到 1.9.3：

```
rvm use 1.9.3
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.

$ rvm gemset create
# Noting(?)

$ rvm gemset create md
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'.

$ ruby -v
$ ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T08:12:15.877

可能需要制作新的 gemset 并将其与 ruby​​ 版本相关联。试试这个命令：

```
rvm use 1.9.3@newgemset --create --default 
```

您还应该尝试`rvm use ruby-1.9.3-p125 --default`，有时会提到补丁号有效（但据我所知，这种依赖关系仅在处理相同版本的不同补丁时才会出现，仍然值得一试）

# wpf - 如何将鼠标双击添加到数据网格项目 wpf

> ID：10459090
> 
> 赞同：2
> 
> 时间：2012-05-05T05:18:05.707
> 
> 标签：wpf

在 Windows 窗体应用程序中，我们的数据网格视图有很多事件，例如行鼠标双击或行单击以及额外的...

但是在 WPF 中我找不到这些事件。如何将行鼠标双击添加到其中包含数据网格的用户控件

我用一些不好的方式做到了，我使用了**数据网格鼠标双击事件**，并且以这种方式发生了一些错误，**但我想知道简单和标准的方式**

**我还在row_load**事件中将双击事件添加到数据网格项目，但如果数据网格有大源，它似乎会使我的程序变慢

```
private void dataGrid1_LoadingRow(object sender, DataGridRowEventArgs e)
{
    e.Row.MouseDoubleClick += new MouseButtonEventHandler(Row_MouseDoubleClick);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T05:56:20.817

您可以处理双击 DataGrid 元素，然后查看事件源以找到被单击的行和列：

```
private void DataGrid_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    DependencyObject dep = (DependencyObject)e.OriginalSource;

    // iteratively traverse the visual tree
    while ((dep != null) && !(dep is DataGridCell) && !(dep is DataGridColumnHeader))
    {
        dep = VisualTreeHelper.GetParent(dep);
    }

    if (dep == null)
        return;

    if (dep is DataGridColumnHeader)
    {
        DataGridColumnHeader columnHeader = dep as DataGridColumnHeader;
        // do something
    }

    if (dep is DataGridCell)
    {
        DataGridCell cell = dep as DataGridCell;
        // do something
    }
} 
```

[我在我写的这篇博文](http://www.scottlogic.co.uk/blog/colin/2008/12/wpf-datagrid-detecting-clicked-cell-and-row/)中详细描述了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:38:43.830

Colin 的答案非常好并且有效……我也使用此代码，这对我很有帮助，并希望与其他人分享。

```
private void myGridView_MouseDoubleClick(object sender, MouseButtonEventArgs e)
        {
            DependencyObject dep = (DependencyObject)e.OriginalSource;

            // iteratively traverse the visual tree
            while ((dep != null) && !(dep is DataGridRow) && !(dep is DataGridColumnHeader))
            {
                dep = VisualTreeHelper.GetParent(dep);
            }

            if (dep == null)
                return;

            if (dep is DataGridRow)
            {
                DataGridRow row = dep as DataGridRow;
               //here i can cast the row to that class i want 
            }
        } 
```

我想知道当所有行都被点击时我使用了这个

# c# - 将 Visual Studio 设置为不保存项目设置

> ID：10459102
> 
> 赞同：0
> 
> 时间：2012-05-05T05:19:18.827
> 
> 标签：c#, visual-studio-express

我有一个正在使用的 Windows 窗体应用程序，并且我有一些设置，在用户第一次使用该应用程序时会提示他们。（通过查看项目属性创建的设置）。

为了测试目的，我试图做的是每次我进入调试模式时都会显示它们，但目前它实际上是为我保存它们，所以我只看到一次。

我正在使用 Microsoft Visual C# 2010 Express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:30:41.143

我假设您已经有了对话框，但不知道如何确定您是否处于调试模式。

一种方法是使用预处理器

```
#if DEBUG
    // The debug code here
#else
    // The release code here
#endif 
```

这样，应用程序的编译方式会根据 Visual Studio 中的解决方案配置组合而有所不同。如果您使用调试版本并从 Visual Studio 外部启动它，您仍将运行 DEBUG 部分。

另一种可能性是检查您是否连接了调试器。

```
if (System.Diagnostics.Debugger.IsAttached)
{
    // The debug code here
}
else
{
    // The release code here
} 
```

这样，无论您是否从 Visual Studio 开始，行为都会发生变化。您可以从 Visual Studio 启动发布版本（或在启动应用程序后附加调试器）并仍然进入调试部分。

第二种选择很可能是您想要的，但是如果您希望能够将带有调试行为的测试二进制文件发送给您的客户，那么第一种选择就是要走的路。

# javascript - 如何在Javascript中正确回答文本字段时弹出一个弹出窗口

> ID：10459107
> 
> 赞同：0
> 
> 时间：2012-05-05T05:19:29.003
> 
> 标签：javascript, popup

我正在创建一个在线游戏，玩家必须在关闭弹出窗口时回答问题。如果他们回答错误，他们会收到警告，告诉他们他们是否不正确。如果他们回答正确，他们会收到下一个问题的弹出窗口。我的功能不正确，但如果正确的位工作，我无法弹出。我究竟做错了什么？请注意，我对 Javascript 很陌生，所以这几乎完全是其他人的代码。

```
 function Start1(URL1, WIDTH, HEIGHT) {
            windowprops = "left=50,top=50,width=" + WIDTH + ",height=" + HEIGHT;
            preview = window.open(URL1, "", windowprops);
        }

        function doPopup1() {
            url1 = "focus.html";
            width = 500;  // width of window in pixels
            height = 500; // height of window in pixels
            delay = 5;    // time in seconds before popup opens
            timer = setInterval("Start1(url1, width, height)", delay*1000);
        } 

        function doPopup2() {
            url2 = "q1.html";
            width = 500;  // width of window in pixels
            height = 500; // height of window in pixels
            delay = 1;    // time in seconds before popup opens
            timer = setTimeout("Start1(url2, width, height)", delay*1000);
        }        

function checkAnswer (form){
        var Answer = form.Answer.value;
        if (Answer == "2"){
            doPopup2();
        }
        else{
            alert ("Incorrect")
        }
    } 
```

```
<body OnLoad="doPopup1();"> 
```

然后是一个基本的 HTML 表格，但重要的部分是：

```
<input type="submit" name="Submit" value="Submit" onClick="checkAnswer(this.form)" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:24:16.757

我根据您的最后评论简化了您的代码并尝试了这个：

```
function Start1(URL1, WIDTH, HEIGHT) {
    console.log('Start1 called:' + URL1);
}

function doPopup2() {
    url2 = "q1.html";
    width = 500; // width of window in pixels
    height = 500; // height of window in pixels
    delay = 1; // time in seconds before popup opens
    timer = setTimeout("Start1(url2, width, height)", delay * 1000);
}

doPopup2(); 
```

在我的开发工具中，这导致错误`Start1 is not defined.`被记录到控制台。一般来说，用字符串调用 setTimeout 是一个非常糟糕的主意。您将希望用函数替换该字符串。我们将使用一个匿名函数，以便我们可以传入适当的参数。

```
function Start1(URL1, WIDTH, HEIGHT) {
    console.log('Start1 called:' + URL1);
}

function doPopup2() {
    url2 = "q1.html";
    width = 500; // width of window in pixels
    height = 500; // height of window in pixels
    delay = 1; // time in seconds before popup opens
    timer = setTimeout(function() { Start1(url2, width, height); }, delay * 1000);
}

doPopup2();​ 
```

多一点清理，这应该对你有用。确保您声明变量，`var`否则它们将成为全局变量。我猜这就是为什么你在一些地方有 url1 和 url2 的原因。

```
function showPopup(url, width, height) {
    var windowprops = "left=50,top=50,width=" + width + ",height=" + height;
    return window.open(url, "", windowprops);
}

function doPopup1() {
    var url = "focus.html";
    var width = 500; // width of window in pixels
    var height = 500; // height of window in pixels
    var delay = 5; // time in seconds before popup opens
    return setTimeout(function() {
        showPopup(url, width, height);
    }, delay * 1000);
}

function doPopup2() {
    var url = "q1.html";
    var width = 500; // width of window in pixels
    var height = 500; // height of window in pixels
    var delay = 1; // time in seconds before popup opens
    return setTimeout(function() {
        showPopup(url, width, height);
    }, delay * 1000);
}

function checkAnswer(form) {
    var answer = form.Answer.value;
    if (answer == "2") {
        doPopup2();
    }
    else {
        alert("Incorrect")
    }
}​ 
```

# php - 为什么 Ajax 不遵循成功功能？

> ID：10459108
> 
> 赞同：0
> 
> 时间：2012-05-05T05:19:28.997
> 
> 标签：php, javascript, jquery

我已经这样做了数百次，它似乎就像一个魅力。但我就是不知道这段代码有什么问题。

```
$.ajax({
        url:"<?php echo base_url() ?>admin/sold_item",
        data:{qty:sold,tprice:sold_price,id:id,uprice:uprice},
        type:"post",
        async:true,
        success:function(msg){

            if(msg=="info_saved"){
                $('#sold_data').html('Your Sold Details Have Been Saved');
                setTimeout("$.colorbox.close()",1500);
              //  setTimeout("window.location.reload()",1800);
            }
            else if(msg=="wrong"){ 
                $('#sold_data').html('Your Information is Incorrect!!Enter Data Again!!');
                setTimeout("$.colorbox.close()",1500);
               // setTimeout("window.location.reload()",1800); 
            }
        }
    }) 
```

我正在使用条件进行响应。ajax 调用的 php 代码运行良好，这是我用于 ajax 的确切代码。我有`alerted the msg variable`并且`firebug console`显示相同，但`if condition`​​只是不工作。可能是什么原因。我有尝试`switch ..case`但无济于事。请有人看看我没有看到什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:24:01.683

使用 chrome 中的开发人员工具并转到网络选项卡，然后选择屏幕左下方的 XHR 按钮。这将向您确切显示正在发生的事情，您可以阅读响应或查看错误（如果有）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T06:12:40.350

您的网址似乎错误。`admin/sold_item`没有文件扩展名。

# android - requestLocationUpdates 无限调用 onPause 和 onResume

> ID：10459109
> 
> 赞同：0
> 
> 时间：2012-05-05T05:19:43.117
> 
> 标签：android, gps

当我将以下来源放入 onResume

```
locationmanager.requestLocationUpdates(provider, 10000, 15, locationListener); 
```

它不断调用 onPause() 和 onResume() 然后重复

这出现在 android 2.2 中，但未出现在 android 4.0 中

我该如何解决？

我缺乏解释。我已经在下面的评论中做到了。当 GPS 在 onPause 上关闭时，requestLocationUpdates 在 onResume 上被撤销并重复。不知道为什么，，，如果onPause上没有removeUpdates，就运行onPause，返回onResume然后停止

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:32:10.160

在 onPause 方法中（换句话说，当活动在屏幕上不可见时），我们不想耗尽电池，所以我们不再监听位置更新。当活动再次可见时，将调用 onResume 方法。有关更多详细信息，请使用此链接[更多信息](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29)

```
locationmanager.removeUpdates(locationListener); 
```

在 onResume 方法中，我们通过指定位置的提供者、通知之间的最短时间（以毫秒为单位）、通知的最小距离（以米为单位）以及最后使用哪个 LocationListener 来处理新的更新来请求位置更新

`locationmanager.requestLocationUpdates(provider, 10000, 15, locationListener);`

更多信息使用此链接[位置侦听器](http://blog.doityourselfandroid.com/2010/12/25/understanding-locationlistener-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T20:29:42.730

对于我和那些追随我的人......这是由添加到清单许可中的一个额外字符引起的。

`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATIONx"/>`

改为

`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`

它为我修好了。

# javascript - 设置jsp页面的宽高

> ID：10459111
> 
> 赞同：0
> 
> 时间：2012-05-05T05:19:58.203
> 
> 标签：javascript, html, jsp

我有一个登录页面说 login.jsp，如果用户登录成功，那么用户将被转发到 error.jsp。在那个error.jsp中，我显示了一些文本错误。但我正在全屏显示白色背景。我希望用户应该能够看到上一页，并且在该页面的顶部，这个错误页面应该以 200 像素和 80 像素的宽度显示。如何设置jsp页面的宽高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:13:14.223

也许您的一个选择是在您想要将错误消息附加到的页面中有一个 div，然后在发生错误时修改该 div 的内容或可见性。

只是一个想法。

编辑：显然，如果您这样做，您可以在 css 文件中设置宽度和高度。

# java - 如何创建列表 类对象

> ID：10459115
> 
> 赞同：1
> 
> 时间：2012-05-05T05:20:57.813
> 
> 标签：java, generics, mockito

```
List<String> list = mock(List<String>.class); 
```

这是一个无效的语法，如何将`List<String>`类型传递给 mock()？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T05:25:14.487

简短的回答是你不能。在运行时，这只是`List.class`由于类型擦除。如果您的模拟框架需要知道类型参数，则必须有不同的方式来传递它。

# ruby - 更改默认 Aptana IP 地址

> ID：10459119
> 
> 赞同：0
> 
> 时间：2012-05-05T05:21:29.843
> 
> 标签：ruby, aptana, aptana3

我想将默认 IP 更改为 127.0.0.1 或 localhost 而不是 script/rails 服务器[http://0.0.0.0:3000](http://0.0.0.0:3000)。

我如何在 Aptana 3 中做到这一点？

```
script/rails server
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on **http://0.0.0.0:3000**
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-05-04 21:41:46] INFO  WEBrick 1.3.1
[2012-05-04 21:41:46] INFO  ruby 1.9.2 (2011-07-09) [i386-mingw32]
[2012-05-04 21:41:46] INFO  WEBrick::HTTPServer#start: pid=9588 port=3000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:25:21.320

使用命令行选项：

```
script/rails server -b 127.0.0.1 -p 80 
```

# ruby-on-rails - Ruby Rails 只有一些参数被传递给控制器

> ID：10459120
> 
> 赞同：0
> 
> 时间：2012-05-05T05:21:31.917
> 
> 标签：ruby-on-rails, ruby

我有大约 60 个字段的单一形式的用户属性，通过在一个页面上切换隐藏的 div 来单独显示。更新其他人的个人资料时，所有字段都会按预期更新。更新当前登录的配置文件 (current_user) 时，只有大约 40 个字段会更新。这是我在 current_user 配置文件的更新方法上观察到的内容：

当直接在@user = User.find(params[:id]) 之后设置断点并查看传递的参数时，60 个表单字段参数中只有大约 40 个存在。存在的会按预期更新，显然不存在的不会更新。

关于可能导致这种奇怪行为的任何线索？

**示例：users/_form.erb 上许多行为不端的表单字段之一**

```
<%= f.text_field :street_address, :placeholder => 'address..'  %> 
```

**users_controller.rb 中的更新方法**

```
# UPDATE
  def update   
    @user = User.find(params[:id])
    breakpoint_set = on_this_line
    respond_to do |format|     
      if @user.update_attributes params[:user]
        format.html do
          redirect_to("/users", :notice => 'User Profile was successfully updated.')
          format.xml  { head :ok }
        end
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:09:58.347

如果“当前登录的用户”只是一个`User`对象，那么我怀疑您看到了缓存的副作用。

如果您有两个表示同一记录的 Active Record 对象，并且它们在该记录的状态应该是什么方面存在分歧，则可能会发生不同类型的问题。例如;

```
@u1 = User.find logged_in_user_id
@u2 = User.find logged_in_user_id

@u1.update_attributes :username => "root"

@u2.username   # old username
@u2.reload
@u2.username   # "root" 
```

确保这不会发生在您身上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:18:48.557

检查参数是否从客户端移植到控制器。您可以在 Firefox + Firebug 控制台中查看。

并检查每个参数是否都在用户哈希下，因为丢失的参数可能不在同一个用户哈希中（Rails 控制器正在查看）。

# python - 端口未在 Windows 7 上使用 twisted 监听 apns 守护进程

> ID：10459121
> 
> 赞同：0
> 
> 时间：2012-05-05T05:21:34.413
> 
> 标签：python, windows-7, twisted

我正在尝试让[http://code.google.com/p/apnsd/](http://code.google.com/p/apnsd/)上的 apns 守护程序正常工作，但我遇到了网络问题。我已将守护程序配置为侦听端口 1055（但我也尝试过其他端口）。我可以启动守护进程，它似乎工作正常（包括连接到苹果服务器），但是当我键入 netstat -a 时，我看不到网络端口正在打开和监听。我在 Windows 7 上运行，并关闭了 Windows 防火墙（所以我认为这不是防火墙问题）。

我已经在各种端口上成功运行了[http://twistedmatrix.com/documents/current/core/examples/index.html](http://twistedmatrix.com/documents/current/core/examples/index.html) (simpleclient.py & simpleserv.py) 上的扭曲演示服务器和客户端，并且还可以确认端口出现在 netstat -a 中，所以我认为问题不在于 OS/python/twisted/其他必需模块的安装/配置。

我相信dameon中的相关代码（自己添加的打印语句）是：

```
print "LISTENING TCP SERVER"
print "PORT", listener_data["port"], listener_data["port"].__repr__
server = internet.TCPServer(listener_data["port"], listener)
print server 
```

我原以为在执行此行后，端口会在 netstat -a 中打开。任何人都可以提出问题所在，或提供有关如何进一步诊断的建议吗？

我认为这无关紧要，但我的 apns 守护进程配置是：

```
{
    'listeners': {
        'line': {
            'class': 'apnsd.listeners.line.LineProtocolFactory',
            # 'interface': "192.168.1.3",  #default: all interface
            'port':1055,
        },
    },

    'apps': {
        'gp': {
            'apns_dev': {
                'app_id':           "xxx",
                'app_class':        "xxx",
                'certificate_file': "F:/cert_file.pem",
                'privatekey_file':  "F:/pk_unencrypted.pem",
            },
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:15:59.303

尝试使用 twistd 而不是 main.py 来启动守护进程。

twistd 脚本是 Twisted 的实用程序，用于将扭曲的应用程序转变为服务。用法是：

```
$PYTHON_ROOT/bin/twistd apnsd -c $APNSD_CONFIG 
```

这会将 apnsd 作为守护进程启动。要不对其进行守护，只需传入 -n 参数：

```
$PYTHON_ROOT/bin/twistd -n apnsd -c $APNSD_CONFIG 
```

# javascript - jCarouselLite 和 fancybox 弹出窗口

> ID：10459122
> 
> 赞同：0
> 
> 时间：2012-05-05T05:21:58.653
> 
> 标签：javascript, jquery, fancybox, jcarousellite

我正在同时使用 jCarouselLite 和 fancybox，请看这个链接

[http://travianstation.com/index.html](http://travianstation.com/index.html)

脚本：[http ://travianstation.com/scripts/script.js](http://travianstation.com/scripts/script.js)

如果您在不向下滚动的情况下单击“图库”，则图库将在正确的位置弹出，但如果向下滚动然后单击图库，它们不在窗口的中心，并且第二个图像行位于大图像上方。

请有人指导我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:55:22.283

在您的[script.js](http://travianstation.com/scripts/script.js)文件中，您有这段代码

```
$().ready(function() {
 var $scrollingDiv = $("#fancybox-contentB");
 var $scrollingDivB = $("#fancybox-content");
 $(window).scroll(function(){                   
   $scrollingDiv.stop().animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow");            
   $scrollingDivB.stop().animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow");           
 });
}); 
```

我怀疑是在向下滚动窗口的每一小英寸上动态添加30px ，将其从屏幕上向下推（尝试在打开fancybox 时连续向下滚动窗口以查看效果。*）*`marginTop``#fancybox-content`

拥有这个功能的想法是什么？

# private - PubNub 最佳实践：如何管理私人房间？

> ID：10459123
> 
> 赞同：2
> 
> 时间：2012-05-05T05:22:59.543
> 
> 标签：private, socketchannel, multiplexing, pubnub

我正在学习 pubnub，我阅读了他们的文档，但我只是找不到如何管理多房间聊天框。

默认情况下，任何人都可以收听频道。订阅它并在上面发布很容易。

我想要的是有一个主要的公共房间（到目前为止一切都很好），但任何人也应该能够与其他人私下交谈，而不会有被其他用户阅读的风险。

这些动态房间将被标记，用户应该能够从一个到另一个。

另一个要求是与某人私下交谈不会将您踢出您订阅的其他房间（您仍然可以在聊天时收到新消息已发布到另一个房间的通知）

实现这一目标的最佳实践是什么？

*   我会使用不同的频道（动态创建）吗？
*   我会使用一个频道并根据他们的状态、伪房间 ID 或主角过滤消息吗？
*   我会使用多路复用（仅一个套接字）吗？

我需要知道实现这一目标的最佳方法，因为文档只描述了一个房间的基本场景，互联网上对此一无所知。

谢谢你。

PS：我知道 PubNub 一次不推荐超过 2 个频道（尽管我很难找到对此的解释）。

PPS：我正在使用带有 socket.io 的 punbub

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T05:21:12.237

# Socket.IO 和 PubNub 管理聊天服务的私人房间

您正在寻求一种创建多房间聊天服务的方法，可能类似于 IRC 客户端，您可以在其中加入并坐在多个聊天室（例如在 freenode.net 上）。这是可能的，并且需要一些特殊的任务才能正确完成。

您将首先打开**两个频道**，一个用于主聊天室，一个用于您的私人“ME”边聊。使用此侧专用“ME”频道，您将需要创建一个长且不可预测的 session-id 样式频道名称，通常如下所示：

```
YTQyOGFiNWEtNTZmZC00OGVhLTgxZjktMWE3ZmMyMzc3MTRhCg== 
```

这就像用户的参考 ID。此 ID 可用于私人 1 对 1 聊天，其他房间可用于**群聊**。您将使用我们称为[PubNub 访问管理器](https://www.pubnub.com/products/access-manager/)(PAM) 的访问控制管理来保护此群聊。

有关其他安全实践，您需要在我们的帮助台和知识库的[PubNub 安全支持上查看我们的安全建议指南。](https://support.pubnub.com/support/search/solutions?term=security)

现在我们已经建立了私人频道，通过您的私人服务器（一个可以提供权限的服务器）发送和接收聊天内容将可以实现安全通信，从而允许在每个用户的基础上中继消息。您可以通过阅读PubNub 上的将[事件从服务器发送到 Socket IO 客户端](https://github.com/pubnub/pubnub-api/tree/493d7fc97fb683379fc78be3ca7ad9bc97eb4200/socket.io/non-socket-io-communication)文档的这一部分来了解如何执行此操作。

第二个频道将用于所有房间的公共聊天。对于多选项卡支持，您只需通过 io.connect() 方法添加新房间，即可在 PubNub 上使用 Socket IO 的通道多路复用功能。每次打开一个新选项卡时，您都会通过 io.connect() 打开一个新的命名空间，您可以拥有无​​限的命名空间。但是请注意，您一次只能连接到不超过 2 个 PubNub 频道（您已经在问题中指出了这一点）。

这是订阅多个订阅源和类别的 PubNub Socket IO 方法：

### Socket.IO 文档

[https://github.com/pubnub/pubnub-api/tree/493d7fc97fb683379fc78be3ca7ad9bc97eb4200/socket.io#restricting-yourself-to-a-namespace](https://github.com/pubnub/pubnub-api/tree/493d7fc97fb683379fc78be3ca7ad9bc97eb4200/socket.io#restricting-yourself-to-a-namespace)

### Vimeo 上的 Socket.IO 视频

[http://vimeo.com/34496366](http://vimeo.com/34496366)

### 示例 Socket.IO 多路复用代码

[https://github.com/pubnub/pubnub-api/tree/493d7fc97fb683379fc78be3ca7ad9bc97eb4200/socket.io/multiplexing](https://github.com/pubnub/pubnub-api/tree/493d7fc97fb683379fc78be3ca7ad9bc97eb4200/socket.io/multiplexing)

作为一个快速的结论，您将使用安全的方法来建立一个私有的“ME”通道，以便在每个用户的基础上发送/接收消息。以及推送所有公共聊天室数据的公共“聊天”频道。多路复用对于公共聊天很重要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-30T23:14:26.490

上面的答案在 2012 年是正确的，但从那以后发生了很多变化。可以使用 PubNub 访问管理器启用私人聊天室，该管理器明确授予对特定频道的发布/订阅访问权限。

它的工作方式是通过访问令牌（又名“身份验证密钥”）。开发人员（您）创建一个 Auth Key（基本上是任何字符串）并将其传递给 PubNub Access Manager。然后，您为此 Auth Key 设置规则（即 Auth Key 可以发布和/或订阅哪些频道）。

此 Auth Key 提供给需要访问频道的任何设备，并在设备订阅或发布频道时使用。

基本文档可在此处获得：[http ://www.pubnub.com/docs/javascript/tutorial/access-manager.html](http://www.pubnub.com/docs/javascript/tutorial/access-manager.html)

授予 60 分钟读/写权限以将“privateChat”通道传递给 auth_key：

```
 pubnub.grant({
 channel  : 'privateChat',
 auth_key : 'abxyz12-auth-key-987tuv',
 read     : true,
 write    : true,
 ttl      : 60
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:34:43.223

要添加到前面的答案，我不确定这是否只是我的黑客行为，但为了与当前的 socket-io 库建立多通道连接，您需要设置 io.connected = false; 在传入另一个通道配置对象之前。

例如：

```
var pubnub_setup = {
  channel       : 'public_channel',
  publish_key   : 'demo',
  subscribe_key : 'demo'
};

var private_setup = {
  channel       : 'private_channel',
  publish_key   : 'demo',
  subscribe_key : 'demo'
};

// Make your public socket connections
var publicSocket = io.connect( 'http://pubsub.pubnub.com/pub_socket', pubnub_setup );
var anotherPublicSocket = io.connect( 'http://pubsub.pubnub.com/another_pub_socket', pubnub_setup);

// Set false otherwise you keep getting back the previous created socket which is
// bound to the original channel 'public_channel'
io.connected = false;
var secretSocket = io.connect( 'http://pubsub.pubnub.com/secret_mulitplex_socket_namespace', private_setup ); 
```

现在您可以继续在专用通道上创建新的秘密套接字。

# extjs4 - ExtJs：如何获取会话变量

> ID：10459124
> 
> 赞同：0
> 
> 时间：2012-05-05T05:23:08.267
> 
> 标签：extjs4

在我的 Java Web 应用程序中，当用户登录时，我将用户名和其他详细信息存储在会话中，如下所示，

```
session.setAttribute("userName",username); 
```

我正在为 UI 使用 ExtJs4。**如何**在 extJs 中获取会话变量？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:37:19.187

您不能仅使用 javascript 从服务器 Web 容器中获取会话变量。

我做同样的事情（将 userId 存储为 java 中的会话变量）。我使用`Ext.Request`对 java servlet 执行 Ajax 请求来获取它（以及有关用户的其他数据，例如 webapp 的权限设置，以启用或禁用他们无法使用的功能）。

**编辑：**

我也是 sha 的回答，我将身份验证信息传递回客户端的唯一原因是出于美观的原因 - 这样用户就不会认为他可以使用我的服务器端身份验证拒绝的 javascript 功能。如果他要欺骗 userId 或权限并尝试使用该功能，服务器端的真正身份验证将阻止他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:41:51.187

我可以支持@Geronimo 方法。在对用户进行身份验证时，您需要获取用户 ID 和/或权限。然而...

您不能只依赖存储在 JS 代码中某处的用户名/权限，因为它不容易被欺骗。如果您向用户提供一些信息，这些信息对于不同的访问级别可能会有所不同，您仍然需要对用户身份进行服务器端验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T18:00:44.443

我知道这个问题很久以前就被问过了，但是尽管有大量的观点并且没有一个明确的答案，我还是决定提供这个答案：

假设会话变量注册为 /index.php?PHPSESSID=9ebca8bd62c830d3e79272b4f585ff8f

这种情况下，可以通过JS对象“location”获取变量PHPSESSID，通过Ext.Object.fromQueryString()进行变换

所以：

```
console.log( Ext.Object.fromQueryString( location.search ) ); 
```

将为您的需要准备 PHPSESSID 变量。

# javascript - 如何设置任何页面的透明背景

> ID：10459125
> 
> 赞同：0
> 
> 时间：2012-05-05T05:23:58.673
> 
> 标签：javascript, html, jsp

我有两个 jsp 页面（home.jsp，welcome.jsp）。我想在 home.jsp 的顶部显示welcome.jsp。我希望将背景视为 home.jsp，并在该welcome.jsp 的顶部。但默认情况下，welcome.jsp 页面具有白色背景。如何设置整个jsp页面（welcome.jsp）的透明背景色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:59:26.813

首先获取`iframe`or`frame`中设置了背景颜色的元素。“ [Javascript - 从 iFrame 中获取元素](https://stackoverflow.com/questions/1088544/javascript-get-element-from-within-an-iframe)”涵盖访问`iframe`.

获取元素后，将背景颜色设置为`transparent`. 有多种方法可以做到这一点：

```
element.style.backgroundColor = 'transparent';
element.setStyle('background-color', 'transparent'); // MooTools
element.css('background-color', 'transparent');​​​​​​​​​​​​​​​​​ // jQuery 
```

参考：

*   [CSS 背景颜色属性](http://www.w3.org/TR/CSS21/colors.html)
*   [jQuery 和 CSS](http://api.jquery.com/css/)

# c++ - OpenCV 卡尔曼滤波器错误

> ID：10459126
> 
> 赞同：3
> 
> 时间：2012-05-05T05:23:59.193
> 
> 标签：c++, opencv, kalman-filter

我使用 OpenCV 来预测通过网络摄像头看到的球的运动。但是我不断收到关于 cvKalmanPredict 状态的错误，因此我将代码简化为这几行并尝试单独测试过滤器：

```
 CvKalman* kalman = cvCreateKalman(6,3,1);
        kalman->temp2 = cvCreateMat(1, 1, CV_32FC1);

        float alpha = 0.1, beta = 0.2;

        float kalmA[] = {1.0+t0/t1, 0, 0, -t0/t1, 0, 0,
                         0, 1.0+t0/t1, 0, 0, -t0/t1, 0,
                         0, 0, 1.0+t0/t1, 0, 0, -t0/t1,
                         1, 0, 0, 0, 0, 0,
                         0, 1, 0, 0, 0, 0,
                         0, 0, 1, 0, 0, 0};
        float kalmB[] = {0, 0, 1, 0, 0, 0};
        float kalmH[] = {1, 0, 0, 0, 0, 0,
                         0, 1, 0, 0, 0, 0,
                         0, 0, 1, 0, 0, 0};
        float kalmQ[] = {alpha, 0, 0, 0, 0, 0,
                         0, alpha, 0, 0, 0, 0,
                         0, 0, beta, 0, 0, 0,
                         0, 0, 0, alpha, 0, 0,
                         0, 0, 0, 0, alpha, 0,
                         0, 0, 0, 0, 0, beta};
        float kalmR[] = {alpha, 0, 0,
                         0, alpha, 0,
                         0, 0, beta};
        float kalmS[] = {0,0,0, 0, 0, 0};
        float kalmP[] = {480, 0, 0, 0, 0, 0,
                         0, 480, 0, 0, 0, 0,
                         0, 0, 480, 0, 0, 0,
                         0, 0, 0, 480, 0, 0,
                         0, 0, 0, 0, 480, 0,
                         0, 0, 0, 0, 0, 480};

        memcpy( kalman->transition_matrix->data.fl, kalmA, sizeof(kalmA) );
        memcpy( kalman->control_matrix->data.fl, kalmB, sizeof(kalmB) );
        memcpy( kalman->measurement_matrix->data.fl, kalmH, sizeof(kalmH) );
        memcpy( kalman->process_noise_cov->data.fl, kalmQ, sizeof(kalmQ) );
        memcpy( kalman->measurement_noise_cov->data.fl, kalmR, sizeof(kalmR) );

        // initialize state and covariance
        memcpy( kalman->state_post->data.fl, kalmS, sizeof(kalmS) );
        cvSetIdentity( kalman->error_cov_post, cvRealScalar(3));

        // update the control
        float t0 = 0.3;
        cvSetReal2D( kalman->temp2, 0, 0, -490 * t0 * t0 );

        const CvMat* kalmanPred = cvKalmanPredict(kalman, kalman->temp2);

        CvMat* kalmMeas = cvCreateMat(3,1,CV_32FC1);
        cvSetReal2D(kalmMeas, 0, 0, 3);
        cvSetReal2D(kalmMeas, 1, 0, 2);
        cvSetReal2D(kalmMeas, 2, 0, 5.5);
        cvKalmanCorrect(kalman, kalmMeas);
        cvReleaseMat(&kalmMeas);

        // release memory 
```

但是，在调用 cvKalmanPredict 时我仍然遇到同样的错误：

```
 OpenCV Error: Assertion failed ((D.rows == ((flags & CV_GEMM_A_T) == 0 ? A.rows : A.cols)) && (D.cols == ((flags & CV_GEMM_B_T) == 0 ? B.cols : B.rows)) && D.type() == A.type() in unknown function. file C:\Users\opencv\modules\core\src\matmul.cpp. line 2930 
```

我正在使用带有 MS Visual C++ 10 的 cmake 进行编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T08:51:18.523

### Plausible Interpretation

In reading the detailed error message, the assertation appears to be testing if A and B conform to the size of D. Presumably this check occurs prior to a computation(`cvKalmanPredict`) involving these three matrices.

Matrices A, B and D specified in the error message may be directly related to three or more of the matrices provided in the example(`A` corresponds perhaps to `kalmA` etc).

More code is required to clarify the relation, if any, between A, B and D and the declared matrices. Setting breakpoints within the openCV library may help.

Listing the matrix sizes may provide an insight:

```
Variable  Size   Variable  Size   Variable  Size 
kalmA     6x6    kalmQ     6x6    kalmR     3x3
kalmB     6x6    kalmS     6x6         
kalmH     6x6    kalmP     6x6 
```

### a. Matrix size

As `kalmR` is the only matrix differing in size, this matrix could be a source for the assertion failure.

If the assertion exclusively involved any triple combination of the other 6x6 matrices, the assertion would not be triggered, but it does fire. This suggests the matrix variable `kalmR` is a useful variable to begin tracking through the code.

This logic presumes A, B and D *map* to three of the matrices listed in the table.

### b. Transposing Matrices

The arrays may be of correct size, but could be incorrectly transposed.

The above table assumes the matrices are interpreted in a 6x6 format rather then as a 1x36 vector or its transpose, 36x1 column-format. Their associated flag in the expression `flags & CV_GEMM_B_T` prompted by the compiler, could be set to indicate whether the arrays are MxN or NxM formatted.

Alternatively, the initialization values of the offending matrices could be rewritten to conform to the format expected by openCV's GEMM(*Generalized Matrix Multiplication*) function. The operation is described as *generalized* since it encompasses more then just multiplications between two matrices.

### c. Compounding errors

The error message could be some combination of both points a. and b.

* * *

### Alternative explanation

Another interpretation is that the assertion is coded incorrectly. The presence of the B matrix in the error message appears to be inconsisent with the intent of the assertion.

```
//should that solitary B be an A?
D.rows == .. A.rows && D.cols == .. B.cols && D.type() == A.type() 
```

The final operand in the logical *and* is testing the type of the two matrices D and A.

`D.type() == A.type()`

Preceding the type-comparison, is the pair of *and*-operands comparing the number of rows of D and A, and the number of columns of D and A, respectively.

```
//simplified assertion with B replaced by A
D.rows == .. A.rows && D.cols == .. A.cols 
```

The assertion appears to be checking if two matrices are of equal dimensions, prior to making an explicit check of their type.

Any two matrices, with differing row or column count would exclude a call to `type()` in the assertion, since `&&` short-circuits. Yet in the original assertion, only one dimension of D and A is tested for equality, suggesting the check is to determine if the two matrices are compatible for multiplication.

The same logic applies when A is replaced with B:

`D.rows == .. B.rows && D.cols == .. B.cols && D.type == B.type()`

* * *

### Assertive Checks Prior to a Matrix operation

Surprisingly, from the convoluted error message emitted by the compiler, we can guess the matrix operation associated with the assertion - this can be achieved without having access to the openCV library's source code and in the absence of any openCV documentation.

There is enough information within the logical *and*-operands to partially recover a matrix equation(involving A, B and D) that is consistent with the programmed matrix equation in the openCV GEMM function(that fires the error message).

This is different from locating a particular function and line number in a file. The distinction is we are inferring the sequence of matrix operations based on the series of mathematical properties tested in the assertion.

The logic is as follows:

### a. Initial guess

The assertion's emphasis is on the variable D as it occurs in each of the *and*-operands.

The assertion hints that D must be compatible in some way with both A and B, whereas it does not mention the suitability of A with B.

Perhaps these pair of matrices were previously compared and found to be compatible in some sense.(In the error message, the presence of the bitmasks `CV_GEMM_A_T`, `CV_GEMM_B_T` pertaining to A and B, supports this view - information for A and B, unlike for D, is contained in the singular variable `flags`.

This also hints why there is no type-comparison `D.type() == B.type()` within the assertion as it would be redundant).

With this in mind and rewritting the assertion with the operands reordered to collect similar terms, we have:

```
D.rows == .. A.cols && D.type() == A.type() && D.cols == .. B.rows 
```

The comparison of D's row size with the column size of A suggests `D * A`, a multiplication operation(an addition operation would require a comparison of each matrix dimension which doesn't occur here).

Likewise for D and B - on this occasion D's column size is checked against the row size of B - this test is consistent with a multiplication operation, so we have `B * D`.

Collecting these terms together, suggests `D * A + B * D` or possibly `D * A - B * D` or some similar matrix combination is executed by the GEMM function.

### b. Second guess

Rather then continuing as a multiplicative or additive operand, D is reinvented to store the result of some sequence of matrix operations between A and B. The simplest operation-sequence is `A * B` or `A + B`.

The row and column checks in the assertion supports the former guess, `D = A * B`.

The paired variables A, B are sufficiently related to discount the other combinations such as `B = D * A` and `A = B * D`

The role of D in acting as a destination for the result, is tentatively indicated by the letter designated to this variable.

### c. Did any of the guesses recover the matrix operations?

On reading the openCV documentation, the second guess is identified as being closest to the correct description.

In particular, the openCV function, triggering the assertion, could be one of three routines: `cvMatMul`, `cvMatMulAdd` or `cvGEMM` and whose corresponding matrix operations are:

```
D =   A * B         // cvMatMul
D =   A * B +   C   // cvMatMulAdd 
D = α A * B + β C   // cvGEMM - Generalized Matrix Multiplication 
                    //          alpha, beta are scalars unlike A, B, C, D 
```

Further information on these function declarations are documented [here](http://opencv.willowgarage.com/documentation/operations_on_arrays.html#gemm)

### The bitwise `flags` variable for A and B

In the above, we have assumed that the bit fields in the `flags` variable identified by CV_GEMM_A_T and CV_GEMM_B_T. A similar discussion applies for various combinations of these flag settings.

When the bits corresponding to `CV_GEMM_A_T` and `CV_GEMM_B_T` are non-zero, the first of two assertions applies(the prime indicates the transpose operation):

```
// matrix-size selected by the conditional operator when the ...
D.rows == .. A'.rows && D.cols == .. B'.cols    // ... bit fields are set 
D.rows == .. A .cols && D.cols == .. B .rows    // ... bit fields are unset 
```

For comparison, when the subexpressions `flags & CV_GEMM_A_T` and `flags & CV_GEMM_B_T` are zero, the assertion assumes a different form.

The error message implies the flags variable represents at least the matrices A and B. The openCV documentation specifies that all three input matrices A, B and C are representable by this single variable.

### Final Point: Assertive Checks Prior to Matrix operations

In preempting the particular matrix computations the assertion alludes to, we are narrowing down the possible paths through the code and the location where the matrix algorithm resides.

To facilitate this reasoned guessing, assertions for matrix calculations should be written in a form to hint at the underlying matrix operations which they guard.

Here we have looked at simple matrix expressions. When confronted with similar error messages generated by less trivial matrix algorithms, the described approach might prove useful for deciphering the encrypted matrix operations, encoded in the triggered assertion.

### Extension: Automatically Generating Assertion Statements

There may be a way to write matrix code to enable the automatic generation of such assertions, using templates perhaps. The matrix class and matrix operations could be coded to facilitate the generation of such checks.

# bamboo - 如何在我的竹子构建中只运行一个阶段？

> ID：10459130
> 
> 赞同：10
> 
> 时间：2012-05-05T05:24:23.803
> 
> 标签：bamboo

我有一个包含两个阶段的竹子构建：构建和测试和发布。竹子的工作方式，如果 Build&Test 失败，则不会运行 Publish。这通常是我想要的东西。

但是，有时，Build&Test 会失败，但我仍然希望 Publish 运行。通常，这是一个手动过程，即使测试失败，我也想按下一个按钮，以便我可以运行 Publish 阶段。

过去，我有两个独立的计划，但我想将它们合二为一。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T21:01:54.663

从 Atlassian 帮助论坛，这里： [https ://answers.atlassian.com/questions/52863/how-do-i-run-just-a-single-stage-of-a-build](https://answers.atlassian.com/questions/52863/how-do-i-run-just-a-single-stage-of-a-build)

> 简短的回答：没有。如果你想跑一个阶段，之前的所有阶段都必须成功完成，对不起。
> 
> 您可以做的是使用隔离功能，但这涉及重新运行失败的作业（在尚未发布的 Bamboo 4.1 中，您可能必须在构建结果屏幕上按“显示更多”才能看到重新运行按钮） .
> 
> 在这种情况下可能有帮助的另一件事（但不适用于 OP）是禁用工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T13:02:33.380

一般来说，大多数 Bamboo 问题的最佳解决方案是尽可能少地依赖 Bamboo，因为您最终无法修补它。

在这种情况下，我将快速编写/重用异步依赖解析机制（类似于 GNU Make 及其目标），并从单个阶段运行它。

然后只需在类似默认`all`的目标上运行所有内容，并让用户在自定义运行变量上选择目标。

# java - java中更快的JasperReports模板编译

> ID：10459131
> 
> 赞同：0
> 
> 时间：2012-05-05T05:24:24.990
> 
> 标签：java, jasper-reports

我是 JasperReports 的新手。

在我的应用程序中，我使用 iReport 生成 JasperReports 模板并使用该模板生成 PDF。
我的应用程序是基于 Java 的大型企业应用程序，因此在我的应用程序中需要生成超过 100k 个 PDF。

我想在开始生成 pdf 时只编译一次模板文件。有什么办法可以做到吗？

还有一个问题，我想知道性能在我的应用程序中很重要，所以我也想要性能。那么，在 java 中是否有任何最好的方法可以让 jrxml 编译和 pdf 生成更快？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T18:23:21.673

一个简单的方法，你可能需要使用文件类。比较文件时间戳，如果 jrxml neweer 则编译报告再次编译。因此，您将隐式缓存。

请注意 java gc... 在开发环境中关于多次重新部署我不得不重新启动 Tomcat，生产环境没有注意到。

但是动态模板... hooo... 你很勇敢！为什么是动态的？报告应该只适用于几种情况，只是值发生变化，因此模板编译对于不同的值是相同的......

我知道我的答案是几个月之后，但对于另一个，可能有用！

# web-services - 通过 Web 服务进行通信

> ID：10459132
> 
> 赞同：0
> 
> 时间：2012-05-05T05:24:31.710
> 
> 标签：web-services, rest

这真是一个愚蠢的问题..我真的想不通所以需要帮助

基本上，我们的 Web 应用程序将与另一个软件公司的 Web 应用程序交换数据。那家公司已经公开了他们的webservice，我们可以通过他们的rest api进行crud操作。如果我们可以通过他们的 rest api 完全满足我们的要求，我的软件公司是否需要构建我们自己的 web 服务服务器？在这种情况下，公司会建立自己的 Web 服务服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:33:04.983

如果其他应用程序需要从您的应用程序请求和使用数据，您应该只需要在您这边创建一个 Web 服务。如果您只是将数据传递给他们的 API 并使用响应，那么您应该不需要创建 API。

# iphone - 如何制作自己的委托方法？

> ID：10459133
> 
> 赞同：1
> 
> 时间：2012-05-05T05:24:32.807
> 
> 标签：iphone, objective-c, xcode

我正在尝试为此创建自己的委托方法，我在 forDelegate.h 文件中声明了“Mydelegate”协议。

```
@protocol Mydelegate <NSObject>

-(void)show:(NSString *)msg;

@end 
```

然后在我的第一个 viewController 中为此创建属性。我声明了一个方法 clickMe，它在按下按钮时调用，该按钮存在于我的 firstviewcontroller .xib 文件中。

```
@class SecondViewController;

@interface ViewController : UIViewController
{
    id <Mydelegate> delegate1;

    SecondViewController *secondController;
}
@property (assign) id <Mydelegate> delegate1;

-(IBAction)clickMe:(id)sender;

@end 
```

然后在我的第二个视图控制器中采用这个协议并定义这个协议的方法之后

SecondViewController.h 文件

```
@class ViewController;
@interface SecondViewController : UIViewController <Mydelegate>
{
    ViewController *viewController; 
} 
```

SecondViewController.m 文件

```
-(void)show:(NSString *)msg
{
    NSLog(@"in delegate mathod");
}

-(void)viewDidLoad
{
    viewController =[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    viewController.delegate1=self;

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
} 
```

程序正在运行，但未调用 Mydelegate 方法“show”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:59:26.893

```
@protocol CPUPerformanceDelegate <NSObject>

-(void)getUsedCpuOperations:(float)percent;
-(void)getKernelCpuOperations:(float)percent;
-(void)getIdleCpuOperations:(float)percent;
-(void)getUserCpuOperations:(float)percent;
-(void)getNiceCpuOperations:(float)percent;

@end

@interface CPUPerformance : NSObject{

    processor_info_array_t          cpuInfo, prevCpuInfo;
    mach_msg_type_number_t          numCpuInfo, numPrevCpuInfo;
    unsigned                        numCPUs;

    NSLock                          *CPUUsageLock;

}
@property(nonatomic,assign)id<CPUPerformanceDelegate>delegate;
@property(nonatomic,retain)NSTimer                         *updateTimer;
@end 
```

然后

```
#import "CPUPerformance.h"

@implementation CPUPerformance
@synthesize delegate,updateTimer;
- (void)updateInfo
{
idlepercent = ((idle/total)*100);
                userpercent = (user/total)*100;
                syspercent = (sys/total)*100;
                nicepercent = (nice/total)*100;
                inUsepercent = (inUse/total)*100;
[delegate getIdleCpuOperations:idlepercent];
            [delegate getKernelCpuOperations:syspercent];
            [delegate getNiceCpuOperations:nicepercent];
            [delegate getUsedCpuOperations:inUsepercent];
            [delegate getUserCpuOperations:userpercent];
} 
```

最后

```
#import "CPUPerformance.h"
@interface SpecProjectFirstViewController : UIViewController<UITableViewDataSource,UITableViewDelegate,CPUPerformanceDelegate>{

    //Ivars

    NSMutableArray                  *processArray;
    //User Interface Object
    UILabel                         *cpuUsage;
    UILabel                         *cpuIdle;
    UILabel                         *cpuUser;
    UILabel                         *cpuNice;
    UILabel                         *cpuKernel;
    IBOutlet UITableView            *tableViews;
    CPUPerformance                  *cpuObject;

} 
```

==================

```
#import "SpecProjectFirstViewController.h"

@implementation SpecProjectFirstViewController

-(void)getIdleCpuOperations:(float)percent{

     [cpuIdle setText:nil];

      [cpuIdle setText:[NSString stringWithFormat:@"Idle :%.0f %%",percent]];
     [cpuIdle setTextAlignment:UITextAlignmentCenter];
}

-(void)getKernelCpuOperations:(float)percent{
    [cpuKernel setText:nil];

    [cpuKernel setText:[NSString stringWithFormat:@"Kernel :%.0f %%",percent]];
    [cpuKernel setTextAlignment:UITextAlignmentCenter];
}

-(void)getNiceCpuOperations:(float)percent{
     [cpuNice setText:nil];

    [cpuNice setText:[NSString stringWithFormat:@"Nice :%.0f %%",percent]];
    [cpuNice setTextAlignment:UITextAlignmentCenter];
}

-(void)getUsedCpuOperations:(float)percent{

    [cpuUsage setText:nil];
    [cpuUsage setText:[NSString stringWithFormat:@"Used :%.0f %%",percent]];
    [cpuUsage setTextAlignment:UITextAlignmentCenter];
}

-(void)getUserCpuOperations:(float)percent{

    [cpuUser setText:nil];

    [cpuUser setText:[NSString stringWithFormat:@"User :%.0f %%",percent]];
    [cpuUser setTextAlignment:UITextAlignmentCenter];
}
-(void)viewDidAppear:(BOOL)animated{
    cpuObject = [[CPUPerformance alloc]init];
    cpuObject.delegate = self;

    [self creatObjectsOnView];

    [super viewDidAppear:animated];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:28:34.360

这将是您问题的[有用](http://viksiphoneblog.blogspot.in/2010/09/how-to-create-own-delegates-protocol.html)答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:35:15.453

在 ViewController 的实现中，你应该调用委托的方法..

```
-(IBAction)clickMe:(id)sender
{
    [self.delegate1 show:@"Your String Param"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T05:37:28.690

在第二个视图控制器 xib 上创建一个按钮并将方法连接到该按钮，然后单击该按钮后检查您的控制台。

```
 @class ViewController;
 @interface SecondViewController : UIViewController <Mydelegate>
 {
   ViewController *viewController;

 }
 -(IBAction)showmsg;

   SecondViewController.m file

   -(void)show:(NSString *)msg
   {

    NSLog(@"in delegate mathod");

    }
   -(IBAction)showmsg
   {
    [self show:];
   }
   -(void)viewDidLoad
   {
    viewController =[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    viewController.delegate1=self;

    [super viewDidLoad];
     // Do any additional setup after loading the view from its nib.
     } 
```

# javascript - 复制 div 然后水平滚动

> ID：10459134
> 
> 赞同：0
> 
> 时间：2012-05-05T05:24:37.387
> 
> 标签：javascript, jquery, animation

我正在尝试克隆，`#main`然后将我的 ajax 结果放在那里（隐藏），这样做之后，我将使其水平滚动到左侧，隐藏当前的结果，然后显示克隆。

HTML：

```
<div class="container">
    <div id="main">
        <p>Click here to start</p>
    </div>
</div>​ 
```

CSS：

```
#main{
    width:460px;
    min-height:200px;
    background:#3F9FD9;
    margin:0 auto;
}
.container {
    position:relative;
} 
```

​</p>

Javascript：

```
$('#main').click(function(){
    //clone.html(data)
    var clone = $(this).clone().html('<p>Ajax loaded content</p>').css(
            {position:'absolute',right:'0','margin-right':'-460px',top:0}
        ).attr('class','love').insertAfter($(this));
    $(this).css({position:'relative'});
        var width = $(window).width()-$(this).outerWidth()/2;
    $('#main').animate({'left':'-'+width},4000);
}); 
```

但我坚持*如何让`#main`动画向左移动并将第二个 div 定位在中心*的想法？

* * *

[小提琴](http://jsfiddle.net/5gjbQ/1/)

**编辑：**现在我只关注如何为克隆设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T05:45:31.163

我对你的问题采取了不同的方法，这是你要找的吗？

[http://jsfiddle.net/3s7Fw/5/show](http://jsfiddle.net/3s7Fw/5/show)

我想，与其自己做一些动画，为什么不让 jQuery 的 hide 函数为我们做呢？这肯定可以做得更好，但它传达了这个想法。

**JavaScript**

```
$('.container').on('click', '.loaded-content', function(){
    $this = $(this);

    //clone.html(data)
    var clone = $this.clone().html('<p>Ajax loaded content</p>').attr("id", '');

    $this.after(clone);
    $this.hide('slow');
});​ 
```

**HTML**

```
<div class="container">
    <div id="main" class="loaded-content">
        <p>Click here to start</p>
    </div>
</div>​ 
```

**CSS**

```
#main, .loaded-content{
    width:460px;
    min-height:200px;
    background:#3F9FD9;
    margin:0 auto;
    float: left;
}
.container {
    position:relative;
    width: 920px;
} 
```

如果这不是所需的功能，那么您可能对滑块感兴趣。已经有许多不错的滑块插件可供您使用。困难的部分可能是向`addNewSlide`您选择的滑块添加一个功能，假设它还没有。

# qt - 如何在 4.6.3 中将应用方向锁定为纵向

> ID：10459135
> 
> 赞同：1
> 
> 时间：2012-05-05T05:24:55.533
> 
> 标签：qt, symbian

我想将我的应用程序限制为纵向。我能够在 Qt 4.7.3 中使用它，但无法为 Qt 4.6.3 使用相同的代码。有什么方法可以在 Qt 4.6.3 中进行 setOreintation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:26:24.533

您可以使用 Symbian 特定代码来满足您的要求。在 Main.cpp 文件中添加以下代码：

```
// Symbian specific code
    #ifdef Q_OS_SYMBIAN
    CAknAppUi* appUi = dynamic_cast<CAknAppUi*> (CEikonEnv::Static()->AppUi());
    TRAPD(error, 
    if (appUi) {
        // Lock application orientation into Portrait
        appUi->SetOrientationL(CAknAppUi::EAppUiOrientationPortrait);
    }
    );
    #endif 
```

您的 pro 文件中还有以下 LIBS：

```
LIBS += -lcone -leikcore -lavkon 
```

有关更多详细信息，请参阅此[链接](http://asmncl.blogspot.in/2012/05/qt-for-symbian-lock-application.html)。

# open-source - 用于在房间中定位人的开源机器视觉代码

> ID：10459137
> 
> 赞同：1
> 
> 时间：2012-05-05T05:25:07.633
> 
> 标签：open-source, computer-vision, robotics

有没有人看过专门介绍使用机器视觉在房间内定位人的资源，包括他们可能被部分遮挡的情况？我知道 OpenCV 和其他机器视觉包，但我正在寻找一个专注于识别房间中的人的论文/库/代码示例；很容易集成到代码中的东西，而不是一个粗略的想法，需要数周或数月的调整或增强才能合理地完成任务。我更喜欢不需要双目视觉并且可以使用单个相机的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:43:06.537

首先：您应该阅读[有关](http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf)人体检测的内容。然后你可以找到/使用实现这种检测器训练步骤的opencv代码。您将需要访问数据库以进行培训，例如[INRIA Person dataset](http://pascal.inrialpes.fr/data/human/)。

第二：如果你需要处理部分阻塞，你可能需要实现一个可以处理这个问题的人体跟踪器。[粒子过滤器](http://en.wikipedia.org/wiki/Particle_filter)可以完成这项工作。

如果您在实施方面遇到问题，请随时提出更具体的问题。

# delphi - IDA 没有识别静态编译的函数

> ID：10459149
> 
> 赞同：0
> 
> 时间：2012-05-05T05:26:51.413
> 
> 标签：delphi, reverse-engineering, malware, ida

我目前正在对似乎是静态编译的文件进行逆向工程，但是 IDA Pro 没有收到任何签名！我觉得我花了很多时间来逐步了解 IDA 应该识别的功能，但事实并非如此。

无论如何，也许我错了......有人有什么想法吗？有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:39:06.303

IDA 是一个很棒的反汇编程序，但它并不完美。某些代码，尤其是未行列/优化的代码，根本无法以自动方式分解为连贯的函数。这就是编译过程中发生的事情——连贯的代码被翻译成*机器*理解的指令，而不是*人类*理解的指令。IDA 可以做出猜测和估计，但它不能做所有事情。逆向工程总是需要一些人工解释来填补空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:55:43.873

如果 IDA 无法识别编译器（例如，启动代码发生了一些变化），则不会自动应用签名。如果 IDA 根本不知道这个编译器，它就没有任何签名。所以：

1.  如果它有签名但编译器没有被自动识别，请手动应用它们。对于 Delphi/C++ Builder，请尝试 b32vcl 或 bds。

2.  如果它没有此编译器/库的签名，您可以使用 FLAIR 工具自己创建它们（假设您可以访问原始库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T19:08:11.357

这个问题很笼统，但我会尽力给出我的意见。

如果问题是 IDA 没有正确识别 Delphi，那么您应该尝试其他软件。有一个很好的工具叫做 IDR（Interactive Delphi Reconstructor），但是请记住，它会在反汇编之前运行该软件，并且您不应该在您的 PC 上运行任何不值得信赖的程序（尝试安装虚拟机）

否则，如果问题是关于 IDA 本身，那么... IDA 一点也不完美，所以它需要逆向工程师才能运行良好，这意味着你必须静态识别一些代码、堆栈指针、变量等。如果涉及到 Hex-Rays 反编译器，还有更多需要寻找的东西。例如，它可以识别出不正确的函数约定，您必须对其进行更正，否则它可能会创建太多应该手动映射的变量。

还有一些 IDA 调情功能的数据库可能对您有用。[https://github.com/Maktm/FLIRTDB](https://github.com/Maktm/FLIRTDB)

# javascript - 在JS中将值从一个页面传递到另一个页面

> ID：10459152
> 
> 赞同：0
> 
> 时间：2012-05-05T05:27:24.867
> 
> 标签：javascript, asp.net

我有一个关于 JavaScript 的查询。

我们如何将值从一个页面传递到另一个页面？

我正在使用 ASP.NET。我的要求是，我需要验证用户，无论他的会话是否过期。如果会话过期，那么我需要显示一个带有两个文本框的弹出窗口以输入他的凭据。

在这种情况下，我无法在 ASP.NET 中做到这一点。所以尽管在 JS 的帮助下做。但没有得到想法。

我知道我们可以使用查询字符串将值从一个页面传递到另一个页面。但根据我的应用程序中不使用的安全目的。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:33:35.070

不要在 javascript 端这样做。请记住，您**不能**信任客户端。

使用 ASP.NET 来执行此操作。

请参阅本教程以获取有关使用会话的一些帮助：[http ://www.beansoftware.com/ASP.NET-Tutorials/Managing-Sessions.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Managing-Sessions.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:38:20.517

您可以将用户信息保存在会话中，例如他的 id 和当前请求时间。然后，您可以将处理上一个请求时保存的上一个请求时间与当前时间进行比较。您再次将当前请求时间保存在会话中。如果是很久以前，你会向他展示登录弹出窗口。如果您需要更安全的方式来传递登录凭据，我建议您使用 ssl 证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:30:09.210

您可以设置cookies。这也不是很安全，但它显然比查询字符串更安全，但如果你处理的东西需要比 cookie 提供的安全性更高的安全性，那么我建议你做错了。（欢迎来到堆栈）

# mysql - Password_Digest 在添加新列时出现问题

> ID：10459156
> 
> 赞同：0
> 
> 时间：2012-05-05T05:28:19.333
> 
> 标签：mysql, ruby-on-rails, rails-migrations

我的应用程序有一个用户模型，并且它已经有效地使用`has_secure_password`到这一点。 `has_secure_password`需要一个`password_digest`专栏，这就是我最近的问题。

我想创建一个字符串类型的“角色”列，将管理员与用户分开 - 但是在迁移之后，我`password_digest`被损坏了，所以每当我尝试在我的应用程序中使用它时，我都会收到一个无效的哈希错误。在 mysql 中一切都很好（`password_digest`值没有改变），但在 rails 控制台中，返回的值`User.first.password_digest`类似于：

```
\#BigDecimal:59d0c60,'0.0',9(18)

```

此外，除非我从字符串更改角色的类型，否则它会类似地搞砸（尽管像`password_digest`，它在 mysql 中完全没问题）。`password_digest`就 Rails 控制台而言，回滚迁移并删除“角色”列会导致恢复正常。

这里发生了什么？

这是我的数据库架构： ![数据库架构](../Images/142220c1e5592b8011794479c383f1fa.png)

这是直接馈送到 mysql 的 sql 查询的结果： ![MySQL 查询](../Images/1dfb88c93a35e1f9df0c098dd251c66d.png)

这是通过 rails 进行相同查询的结果（第一次）： ![Rails 查询](../Images/86067abaeae5e18a4822057558525c69.png)

这是通过 rails 进行相同查询的结果（第一次之后）： ![Rails 查询2](../Images/d87eec8be86276e5d578d0f90d041f52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:00:12.867

看起来您的查询正在自动解释。请参阅此处的文档[http://guides.rubyonrails.org/active_record_querying.html#automatic-explain](http://guides.rubyonrails.org/active_record_querying.html#automatic-explain)

# android - 在android中为首选项列表设置缓存

> ID：10459157
> 
> 赞同：0
> 
> 时间：2012-05-05T05:28:24.970
> 
> 标签：android, caching, preferences

我正在尝试在我的应用程序中更改首选项屏幕的背景。我可以通过这样做添加图像：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.applicationsettings);

        findViewById(android.R.id.list).setBackgroundDrawable(getResources().getDrawable(R.drawable.app_bg));
    } 
```

背景出现了，但是当我滚动时，它在普通列表中显示黑色缓存，我设置了缓存提示，，，但是在这里我不能这样做！有办法解决吗？

我试过：“findViewById(android.R.id.list).setDrawingCacheBackgroundColor(Color.TRANSPARENT);” 但它没有用。

**更新** 解决方案是：

```
ListView listView = (ListView)findViewById(android.R.id.list);
listView.setBackgroundDrawable(getResources().getDrawable(R.drawable.app_bg));
listView.setCacheColorHint(Color.TRANSPARENT); 
```

感谢：user370305

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:00:21.430

试试这个，

```
ListView listView = (ListView)findViewById(android.R.id.list);
listView.setBackgroundDrawable(getResources().getDrawable(R.drawable.app_bg));
listView.setCacheColorHint(Color.TRANSPARENT); 
```

让我知道发生了什么..

# php - 使用 array_merge 创建函数

> ID：10459159
> 
> 赞同：0
> 
> 时间：2012-05-05T05:28:44.397
> 
> 标签：php, arrays, function, array-merge

它不检查提到的字段是否存在。两个版本

第一个版本：

```
$error = array();
$field_sets = array('username','password','fullname','repeatpass','email');
foreach($field_sets as $fieldname){
    if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && $_POST[$fieldname] != 0)) {
        $error[] = $fieldname;
    }
} 
```

第二版：

```
(in the includes file)
function check_required_fields ($required_array){
    $error = array();
    foreach($required_array as $fieldname){
        if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && $_POST[$fieldname] != 0)) { 
            $error[] = $fieldname;
        }
    }
    return $error;
}

In the Source File:
$error = array();
$required_field = array('username','password','fullname','repeatpass','email');
$error = array_merge($error , check_required_fields($required_field , $_POST)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:09:24.133

我发现了问题。我不小心把`&&`逻辑放进去了。它应该`||`代替`&&`.

```
 if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) || $_POST[$fieldname] != 0)) 
```

# php - 使用 preg_split 返回整个字符串

> ID：10459160
> 
> 赞同：2
> 
> 时间：2012-05-05T05:28:52.433
> 
> 标签：php, regex, preg-split

我正在尝试将字符串拆分为一个或多个空格，但下面的内容不起作用..而是将整个字符串作为单个数组返回。

```
$str = 'I am a test';

$parts = preg_split('/\s+/', $str, PREG_SPLIT_NO_EMPTY);

print_r($parts); 
```

这是它返回的内容：

```
Array
(
    [0] => I am a test
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T05:48:44.327

`flags`是*第四个*参数[`preg_split`](http://us.php.net/preg-split)，而不是*第三个*。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T05:42:32.030

删除`PREG_SPLIT_NO_EMPTY`标志：`$parts = preg_split('/\s+/', $str);`

# jquery - 将元素追加到最后一个自己的 div

> ID：10459167
> 
> 赞同：0
> 
> 时间：2012-05-05T05:30:51.117
> 
> 标签：jquery, html

我`pcre`在一个 id 为 . 的单个 div 中有10 个`huge`div`mouseclick`

我试过了

```
<div id="huge">
   <div class="pcre">a</div>
    <div class="pcre">b</div>
    <div class="pcre">c</div>
    <div class="pcre">d</div>
    <div class="pcre">e</div>
    <div class="pcre">f</div>
    <div class="pcre">g</div>
    <div class="pcre">h</div>
    <div class="pcre">i</div>
    <div class="pcre">j</div>
    </div>
<script>
  $(".pcre").click(function() {
       $(this).appendTo("#huge");$(this).remove(); 
  });
</script> 
```

**但它不起作用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:33:46.630

Hiya**演示** [http://jsfiddle.net/TPHy8/4/](http://jsfiddle.net/TPHy8/4/) **或** [http://jsfiddle.net/TPHy8/6/](http://jsfiddle.net/TPHy8/6/)

您的代码中有额外的`,`逗号。删除它和宾果游戏！B-) Anyhoo 和 '.remove` 可以被删除。

希望这有助于布鲁夫！如果我还缺少其他任何东西，请告诉我！

**代码**

**更新**

```
$(".pcre").click(function(){
$(this).appendTo("#huge");
   // $(this).remove(); 
 });​

$(".pcre").click(function(){
$(this).appendTo("#huge");
    $(this).remove(); 
 });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:35:27.263

你的函数（）之前有一个额外的逗号，你也不需要 .remove();

```
<div id="huge">
   <div class="pcre">a</div>
    <div class="pcre">b</div>
    <div class="pcre">c</div>
    <div class="pcre">d</div>
    <div class="pcre">e</div>
    <div class="pcre">f</div>
    <div class="pcre">g</div>
    <div class="pcre">h</div>
    <div class="pcre">i</div>
    <div class="pcre">j</div>
    </div>
<script>
$(".pcre").click(function(){
$(this).appendTo("#huge"); 
 });</script>​ 
```

# java - 关于数组概念

> ID：10459183
> 
> 赞同：2
> 
> 时间：2012-05-05T05:34:24.947
> 
> 标签：java, arrays

我正在寻找建议，因为运行以下代码时出现错误：

```
public class Test9 {

    public static void main(String[] args) {        

        Object [] myObjects = {
                 new Integer(12),
                 new String("foo"),
                 new Integer(5),
                 new Boolean(true)
                 };
                 Arrays.sort(myObjects);
                 for(int i=0; i<myObjects.length; i++) {
                 System.out.print(myObjects[i].toString());
                 //System.out.print(" ");
                 }

    }

} 
```

我得到的错误是：

```
 Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
    at java.lang.Integer.compareTo(Unknown Source)
    at java.util.Arrays.mergeSort(Unknown Source)
    at java.util.Arrays.sort(Unknown Source)
    at Practicequestions.Test9.main(Test9.java:18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:56:32.207

```
 Object [] myObjects = {
                 new Integer(12),
                 new String("foo"),
                 new Integer(5),
                 new Boolean(true)
                 }; 
```

这是一个泛型类型数组。因此，当您尝试使用它对其进行排序时，`public static void sort(Object[] a)`会填充运行时 ClassCastException 原因数组包含不可相互比较的元素。

Array.sort() 指定对象数组按升序排列，按照其元素的自然顺序排列。还有另一种方法可以使用它 `sort(Object[] a,Comparator c)`。用你自己的逻辑实现 Comparator 并通过它。

```
Object[] myObjects = { new Integer(12), new String("foo"),
                new Integer(5), new Boolean(true) };
        Comparator<Object> comparator=new Comparator<Object>() {
            @Override
            public int compare(Object obj1, Object obj2) {
                if(obj1 instanceof String && obj2 instanceof String){
                    return String.valueOf(obj1).compareTo(String.valueOf(obj2));
                }else if(obj1 instanceof Integer && obj2 instanceof Integer){
                    return ((Integer) obj1).compareTo((Integer) obj2);
                }else if(obj1 instanceof Boolean && obj2 instanceof Boolean){
                    return ((Boolean) obj1).compareTo((Boolean) obj2);
                }else if(obj1 instanceof String && obj2 instanceof Integer){
                    return 1;
                }else if(obj1 instanceof Integer && obj2 instanceof String){
                    return -1;
                }else if(obj1 instanceof Boolean){
                    return -1;
                }else if( obj2 instanceof Boolean){
                    return 1;
                }
                return 0;
            }
        }; 
        Arrays.sort(myObjects,comparator);
        for (int i = 0; i < myObjects.length; i++) {
            System.out.print(myObjects[i].toString());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T05:38:38.660

我确实相信您面临的问题源于您调用`Arrays.sort()`阵列。

排序将尝试**比较**对象，但您发布的类型不能。比较两个整数、一个字符串和一个布尔值是否有意义？它们不能被排序，至少在没有自定义比较器的情况下不能。

尝试用 's 替换and`String`再试一次。`Boolean``Integer`

编辑：粗体，不精确的措辞。对象永远不会被铸造。它们使用 compareTo 函数进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:45:13.503

排序不会自动将您的对象转换为相同的常见类型。在将对象添加到集合之前，您必须将它们转换为字符串。

```
Object [] myObjects = { 
                 new Integer(12).toString(), 
                 new String("foo"), 
                 new Integer(5).toString(), 
                 new Boolean(true).toString() 
                 }; 
Arrays.sort(myObjects); 
for(int i=0; i<myObjects.length; i++) { 
                 System.out.print(myObjects[i].toString()); 
                 //System.out.print(" "); 
} 
```

当然，我认为这是一个理论问题，您的对象应该已经创建并存储在某个变量中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T05:45:24.107

您的问题的答案完全在堆栈跟踪中。

`Arrays.sort()`要求数组中的所有元素都实现`Comparable`，并调用该`compareTo()`方法以对数组进行排序。

*如果要比较的对象不是*另一个 Integer `compareTo()`，则类中的实现`Integer`会引发异常。

 *该`Arrays.sort()`方法不会**像**其他答案所建议的那样尝试“将对象转换为相同的类型”。发生强制转换异常是因为`compareTo()`of`Integer`是*类型化*的，但 from 的调用`Arrays.sort()`不是*类型化*的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T05:47:08.110

该`sort(Object[])`方法假设数组中的每个对象都实现`Comparable`，并使用该方法来比较元素。当它尝试比较（例如）第一个和第二个元素时，它会`Integer.compareTo(Object)`使用`String`参数进行调用。`Integer.compareTo(Object)`尝试将参数转换为 a ，`Integer`并且（自然）失败，给出 a `ClassCastException`。

底线是你（一般来说）不能`sort(Object[])`在`Object[]`数组上使用，除非：

*   数组元素非空，
*   数组元素全部实现`Comparable`，并且
*   所有元素的`compareTo()`方法都可以处理所有其他元素的类型。

在这种情况下，最后一个不正确。的`compareTo`方法`Integer`只理解其他`Integer`实例，`compareTo`方法`String`只理解其他`String`实例。

如果不满足上述任何先决条件，则需要使用该`Arrays.sort(Object[], Comparator)`方法，并提供`Comparator`适用于数组中所有元素的 a。

* * *

顺便说一句，这说明了为什么混合类型的数组和集合通常是一个坏主意。当您不知道它们的类型将是什么时，处理一堆不同的事情是很尴尬的。*

# objective-c - 如何检测子视图中的点击手势

> ID：10459184
> 
> 赞同：14
> 
> 时间：2012-05-05T05:34:26.867
> 
> 标签：objective-c, ios, uiview, touch, uitapgesturerecognizer

快速提问：我如何检测轻击手势识别器是否在它添加到的视图的子视图中？例如。如果我单击已作为子视图添加到已添加轻击手势识别器的背景的对象（例如正方形），我如何检测到它已被轻击？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-05T05:41:21.883

当针对您希望使用的任何视图调用处理程序方法时，您可以从手势识别器中获取点击点`-locationInView:`。然后，在 UIView 上使用以下方法：`- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`获取对被点击的实际子视图的引用，记住您传入的点与视图在同一坐标空间中。

一些可以帮助您入门的代码：

```
CGPoint point = [tapGestureRecognizer locationInView:parentView];
UIView *tappedView = [parentView hitTest:point withEvent:nil]; 
```

要使命中测试正常工作，视图需要将`userInteractionEnabled`属性设置为`YES`. 许多视图，例如`UILabel`s 都`NO`默认设置为这个。所以在上述之前：

```
self.subviewOfInterest.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-09T04:20:59.407

也许你应该设置为： **subviews.userInteractionEnabled = YES;** 祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:44:21.643

您可以使用**`requireGestureRecognizerToFail:`**识别子视图上的点击请参考[此](https://github.com/AalokParikh/pinch-and-uiguesture)代码

# c++ - 从数组中删除指针

> ID：10459187
> 
> 赞同：1
> 
> 时间：2012-05-05T05:35:06.537
> 
> 标签：c++

我对 C++ 还很陌生，我遇到的这个问题让我在过去 2 个小时内都感到困惑。我要做的是创建一个指向我的类 Word 对象的指针数组，因此是一个二维数组，即`**wordPtrList`. 然后我需要删除数组中某些对象的内存并将它们的指针设置为空。我在下面写了一个我想要完成的小版本。

```
int main()
{
    char *cArray;
    cArray = new char[4];
    int i;

    for (i = 0; i < 3; i++)
        cArray[i] = 'a';

    cArray[i + 1] = '\0';   //cArray is a null terminated string

    Word **wordPtrList;
    wordPtrList = new Word* [3];

    for (i = 0; i < 3; i++)
    {
        wordPtrList[i] = new Word(cArray);
    }

    wordPtrList[1]->del();
    delete wordPtrList[1];
    wordPtrList[1] = '\0';

    return 0;
}

class Word
{
private:
    char* ptr_;
    int len_;
public:
    Word(const char* word)
    {
        len_ = strlen(word);
        ptr_ = new char[len_];      
        strcpy(ptr_, word);
    }
    ~Word()
    {
        delete [] ptr_;
        ptr_ = 0;
    }

    void del()
    {
        delete [] ptr_;
        ptr_ = 0;
        return;
    }

}; 
```

但是，当我这样做时，我得到：

> 正常块后检测到调试错误堆损坏

这是在 Windows 7 上的 VS 2010 中。

所以我要问的是，如何删除对象的内存以便可以设置`wordPtrList[1]`为 Null？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:46:57.157

看看这段代码：

```
for (i = 0; i < 3; i++)
    cArray[i] = 'a';
cArray[i + 1] = '\0';   //cArray is a null terminated string 
```

问题出在`i+1`用作索引的最后一行，它超出了范围，因为当循环退出时，值`i`已经是`3`；这意味着`i+1`当`4`您分配`cArray`为：

```
cArray = new char[4]; //taken from your code 
```

解决方案是这样的：

```
cArray[i] = '\0';   //Now, it is correct. Here i is equal to 3 
```

也就是说，使用`i`代替`i+1`; 或者干脆使用`3`.

* * *

在 C++ 中，您可以[`std::fill`](http://en.cppreference.com/w/cpp/algorithm/fill)代替手动循环，如下所示：

```
std::fill(cArray, cArray + 4, 'a'); //done 
```

最好尽量避免使用`char*`with `new`，而更喜欢使用 using [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T05:49:55.803

您正在为 cArray 分配 4 个字节（意味着您有权写入字节 0 到 3），然后写入 cArray[4]。您还在 Word 构造函数中分配了一个太小的字节。

```
char *cArray;
cArray = new char[4];
int i;

for (i = 0; i < 3; i++)
    cArray[i] = 'a';
cArray[i] = '\0';   //cArray is a null terminated string - i is now 3 
```

和

```
 Word(const char* word)
 {
    len_ = strlen(word);
    ptr_ = new char[len_ + 1];      
    strcpy(ptr_, word);
 } 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:07:18.663

正如其他人所说，您基本上是在访问超出数组范围的数组索引。

我会选择 Nathan Wiebe 的解决方案。

将来，当您可以选择执行此操作时，建议使用它，`std::vector<T>`因为这将允许您将所需的任何类型存储在可动态调整大小的数组中。换句话说，如果您不访问超出向量范围的索引，您可以执行以下操作：

```
std::vector< char* > str;

for( size_t i = 0; i < str.size(); ++i )
{
   str.push_back( 'a pointer to a block of memory consisting of characters' ); 
}

class Word
{
public:
    Word( const char* str )
    {
        mStrs.push_back( str );
    }
    ~Word( void )
     {
         for( size_t i = 0; i < mStrs.size(); ++i )
         {
             if( mStrs[ i ] )
             {
                 delete mStrs[ i ];
                 mStrs[ i ] = NULL;
             }
         }

         mStrs.clear();
     }

private:
    void del( size_t index )
    {   
         if( index > mStrs.size() )
         {
              //error - throw new exception or something
         }

         delete mStrs[ index ];
    }

    std::vector< const char* > mStrs;

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T05:56:06.803

代码中有两个明显的错误（当您退出第一个循环时，变量的值是`i`多少？调用`strlen`时您是否记得考虑空终止符所需的空间？）。

另请注意，c 字符串不是“空终止”，它们是“NUL 终止”，大写字母且只有一个“L”。`NUL`是所有位都设置为零的 ASCII 控制字符的名称，在 C++ 中用 . 表示`'\0'`。在一个地方，您使用`NUL`字符作为空指针，虽然这在技术上是正确的（由于 C++ 语言的设计错误），但最好理解这两个概念是完全不同的。

# c# - 使用 File.Delete() 方法删除文件时出错

> ID：10459192
> 
> 赞同：1
> 
> 时间：2012-05-05T05:36:21.280
> 
> 标签：c#, winforms, visual-studio-2010

我在 Visual Studio 2010 中编写了一个 winform 应用程序。在其中一种形式中，用户可以浏览本地系统并选择一个图像，因此该应用程序会将该图像（使用 File.Copy() 方法）复制到其文件夹中。问题是当用户想要删除该图像（File.Delete() 方法）时，我收到如下错误：

> 无法删除此文件，因为它已被另一个进程使用。

我不知道这个错误是什么意思，因为我没有在其他进程中使用图像文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:23:46.713

> 无法删除此文件，因为它已被另一个进程使用。

该消息对程序员没有太大帮助，因为当您开发代码时，其他进程几乎总是*您的*进程。

图像文件很可能会发生这种情况，从图像文件创建图像或位图对象会*锁定*文件。创建锁是因为 GDI+ 在文件内容上创建了内存映射视图，这是一种强大的优化，可将位图数据排除在分页文件之外。对大图像很重要，它们可以包含数兆字节的像素数据。

在您在代码中显式调用其 Dispose() 方法之前，该锁将一直保留。因此，请确保在尝试将图像保存回来之前已完成。在极少数情况下，您可能需要创建图像的副本以允许您处理原始图像，请使用带有 Image 参数的 Bitmap() 构造函数重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:34:01.907

发生的事情是，当我们从 C# 代码复制文件并将其粘贴时，即使该程序维护了指向原始/复制文件的链接/信息。这不会发生在程序未复制的文件或文件夹中已存在的文件上。

另一种方法是触发复制 shell/dos 命令。[本文](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)中提供了一种方法

dos中的正常复制命令就像

> 复制 originalfilenamewithpath 目标文件名withpath。

要了解有关复制命令的更多信息，请转到 dos 并写入`copy /?`并按 Enter。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T05:42:50.957

同意 Conrad 的建议，尽管在某些极端情况下 Process Explorer 可能不可靠，或者您可以尝试[Unlocker](http://www.emptyloop.com/unlocker/)

# objective-c - 有必要初始化 NSSet 吗？

> ID：10459193
> 
> 赞同：2
> 
> 时间：2012-05-05T05:36:43.423
> 
> 标签：objective-c, xcode4, initialization, set, null

他们用 Xcode 4 改变了一些东西，所以我想知道我是否需要初始化一个 NSSet

```
NSMutableSet *variablesUsed = [NSMutableSet set]; 
```

或者是

```
NSMutableSet *variablesUsed; 
```

充足的？还是第二个选项初始化为零？这和空集一样吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T05:50:28.577

如果您只是使用`NSMutableSet *variablesUsed;`，那么您将获得一个设置为的指针，`nil`因此不会指向任何类型的集合。 `nil`意味着它被设置为空，并且与空集不同。您将无法获得任何功能，`nil`因此您需要将 variablesUsed 设置为一些“真实”集合，以便充分利用它。

当您使用`NSMutableSet *variablesUsed = [NSMutableSet set];`或`NSMutableSet *variablesUsed = [[NSMutableSet alloc] init];`将指针设置为一个全新的空集时，该集已初始化并可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:43:12.600

后者，在最新版本的运行时，将被初始化为 nil。在旧版本中，结果是未定义的，通常最好将其分配给 nil 或给它一个指向的对象。

在您的情况下，您需要在开始使用它之前对其进行初始化。

# javascript - Facebook：对话框窗口弹出 - 当导航离开时，我该怎么做？

> ID：10459199
> 
> 赞同：1
> 
> 时间：2012-05-05T05:37:41.567
> 
> 标签：javascript, jquery, facebook

当您在状态框中输入文本并单击任何超链接或单击返回按钮时，对话框窗口将显示以下消息“您确定要离开此页面吗？”？

这做完了吗？你怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:10:32.943

你需要设置一个脏标志

```
<script type="text/javascript">

var isDirty=false;
window.onbeforeunload =function() {
 if (isDirty) return "Form not saved";
}

window.onload=function() {
  document.getElementById("someFieldId").onblur=function() {
    isDirty=this.value.length>0;
  }
}
</script>

.
.
. 
```

# wordpress - 用于具有动态、用户特定页面/部分的网站的 Wordpress 或 Drupal

> ID：10459200
> 
> 赞同：0
> 
> 时间：2012-05-05T05:37:41.700
> 
> 标签：wordpress, drupal, dynamic, web

我正在考虑为承包商建造一个网站。大多数网站都是静态的，但我的问题是关于动态部分。我希望（承包商的）客户能够以用户身份登录，并能够查看网站的个人部分（仅对他可见），其中包含特定于他的不同数据、图表和图像，并且他的项目。

数据显然需要由管理员设置。

我当然假设我需要编写一些代码，但是由于我对 Wordpress 或 Drupal 没有太多经验，所以我想就哪个系统更适合我的需求获得意见。

我希望我解释得当。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:45:30.760

使用 Drupal。您将获得优秀权限系统的特权，为您的客户开发自定义 Web 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:56:21.200

Drupal 是管理大量复杂数据的方式。

Drupal 被认为既是框架又是 CMS，因此编码会更容易。
Drupal 有各种各样的模块，它们会对您有很大帮助。我建议查看*图表*模块以将图表显示到*视图*和*面板*模块以管理布局*内容访问*或有*机组*模块以管理用户。在核心中包含角色和权限系统。还有允许您为每个内容节点设置特定权限的模块。
如果我在你的位置，我会使用*仪表板*或*面板*模块为用户提供可识别的 iGoogle，如仪表板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T12:46:12.730

德鲁巴。Drupal 是超级灵活和可定制的。凭借无限数量的角色、可自定义的用户权限和强大的 API，您可以为所欲为。

不要犹豫。:)

# php - 将在 Delphi 和 PHP 中产生相同结果的字符串散列函数

> ID：10459203
> 
> 赞同：8
> 
> 时间：2012-05-05T05:38:16.150
> 
> 标签：php, delphi, hash, delphi-xe2

我需要一个字符串散列函数，它将在 Delphi XE2 和 PHP 中产生相同的结果。我有哪些选择？将优先考虑免费、简单和加密安全的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T05:57:41.713

您可以尝试 SHA1、crc32 或 md5 算法，所有这些都是 PHP 核心的一部分，也存在许多 Delphi 实现。

*   PHP [sha1](http://php.net/manual/en/function.sha1.php) , [crc32](http://www.php.net/manual/en/function.crc32.php) , [md5](http://www.php.net/manual/en/function.md5.php)
*   Delphi [Delphi 加密纲要 (DEC)](http://code.google.com/p/delphidec/) (MD5, SHA-1)
*   德尔福[SynCrypto](http://synopse.info/fossil/finfo?name=SynCrypto.pas) (MD5, SHA-1)
*   Delphi [TurboPower LockBox](http://sourceforge.net/projects/tplockbox/) (MD5, SHA-1)
*   Delphi *JwsclCryptProvider*单元部分的[Jwscl 库 (JEDI Windows Security Code Lib)](http://sourceforge.net/projects/jedi-apilib/) (MD5, SHA-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:50:44.990

您是否尝试过常见的哈希函数`\sha1()`？

# javascript - 如何退出 javascript 函数？

> ID：10459207
> 
> 赞同：69
> 
> 时间：2012-05-05T05:38:35.617
> 
> 标签：javascript, jquery

我有以下内容：

```
function refreshGrid(entity) {
    var store = window.localStorage;
    var partitionKey;
    ...
    ... 
```

如果满足“如果”条件，我想退出此功能。我该如何退出？我可以说休息、退出或返回吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-05-05T05:40:40.373

```
if ( condition ) {
    return;
} 
```

`return`退出返回的函数`undefined`。

该`exit`语句在 javascript 中不存在。

该`break`语句允许您退出*循环*，而不是函数。例如：

```
var i = 0;
while ( i < 10 ) {
    i++;
    if ( i === 5 ) {
        break;
    }
} 
```

这也适用于`for`和`switch`循环。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-05T05:40:22.877

在要退出函数的任何地方使用 return 语句。

```
if(somecondtion)
   return;

if(somecondtion)
   return false; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-05T05:40:17.150

您可以使用

`return false;`或者`return;`在你的情况下。

```
function refreshGrid(entity) {
    var store = window.localStorage;
    var partitionKey;
    ....
    if(some_condition) {
      return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-05T05:41:54.520

**如果满足就使用这个**

做

```
return true; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-05T05:40:23.507

您应该使用 return 如下：

```
function refreshGrid(entity) {
  var store = window.localStorage;
  var partitionKey;
  if (exit) {
    return;
  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-03T15:54:04.413

我在 Google App Scripts 中遇到了同样的问题，并像其他人所说的那样解决了它，但还有更多......

```
function refreshGrid(entity) {
var store = window.localStorage;
var partitionKey;
if (condition) {
  return Browser.msgBox("something");
  }
} 
```

这样，您不仅会退出函数，还会显示一条消息，说明它停止的原因。希望能帮助到你。

# java - 如何获取数组中最常见的字符？

> ID：10459216
> 
> 赞同：2
> 
> 时间：2012-05-05T05:40:41.720
> 
> 标签：java

假设我有一个这样的整数数组：{5,3,5,4,2}

我有一个返回最常见字符的方法

```
public int highestnumber(String[] num) {

        int current_number = Integer.parseInt(num[0]);
        int counter = 0;
        for (int i = 1; i < num.length; ++i) {
            if (current_number == Integer.parseInt(num[i])) {
                ++counter;

            } else if (counter == 0) {
                current_number = Integer.parseInt(num[i]);
                ++counter;

            } else {
                --counter;

            }
        }

        return current_number;
    } 
```

但是如果我有多个公共字符，那么我需要获取最接近一（1）的数字，就像我有一个这样的数组：{5,5,4,4,2};

那么该方法应该返回4，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:59:05.380

根据我对你的问题的理解，

你要做的是，

```
1\. Create ArrayList from your int[]
2\. Use HashMap for find duplicates, which one is unique
3\. Sort it as Ascending order, 
4\. First element is what you want.. 
```

**编辑：回答你的问题**

```
int[] arr = {5, 4, 5, 4, 2};
ArrayList<Integer> resultArray = new ArrayList<Integer>();
Set<Integer> set = new HashSet<Integer>();

for (int i = 0; i < arr.length; i++)
    {
     if (set.contains(arr[i]))
    {
     System.out.println("Duplicate value found at index: " + i);
     System.out.println("Duplicate value: " + arr[i]);
         resultArray.add(arr[i]);
    }
    else
    {
    set.add(arr[i]);
    }
   }
Collections.sort(resultArray);

for (int i = 0; i < resultArray.size(); i++)
{
Log.e("Duplicate Values:", resultArray.get(i) + "");
} 
```

你的需要是，

```
int values = resultArray.get(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:02:28.507

对数组进行排序，然后计算值的运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T12:27:44.967

你也可以试试这个：

```
import java.util.TreeMap;

public class SmallestFrequentNumberFinder {

    public static int[] stringToIntegerArray(String[] stringArray) {
        int[] integerArray = new int[stringArray.length];
        for (int i = 0; i < stringArray.length; i++) {
            integerArray[i] = Integer.parseInt(stringArray[i]);
        }
        return integerArray;
    }

    public static int getSmallestFrequentNumber(int[] numbers) {
        int max = -1;
        Integer smallestFrequentNumber = null;
        TreeMap<Integer, Integer> frequencyMaper = new TreeMap<Integer, Integer>();

        for (int number : numbers) {
            Integer frequency = frequencyMaper.get(number);
            frequencyMaper.put(number, (frequency == null) ? 1 : frequency + 1);
        }

        for (int number : frequencyMaper.keySet()) {
            Integer frequency = frequencyMaper.get(number);
            if (frequency != null && frequency > max) {
                max = frequency;
                smallestFrequentNumber = number;
            }
        }
        return smallestFrequentNumber;
    }

    public static void main(String args[]) {
        String[] numbersAsString = {"5", "5", "4", "2", "4", "4", "2", "2"};
        final int[] integerArray = stringToIntegerArray(numbersAsString);
        System.out.println(getSmallestFrequentNumber(integerArray));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T07:03:36.633

快速的方式。为每个数字创建一个计数器 int 数组一个元素。遍历数组一次并为每个数字增加相应的计数器数组。将最大数字设置为第一个计数器元素，然后通过并将最大数字更改为当前元素，只有当它大于最大数字时，才返回最大数字。

```
public int highestNumber(String[] num){
    int[] count = new int[10];
    int highest_number = 0;
    int highest_value = 0;

    for(int i = 0; i < num.length; i++)
        count[Integer.parseInt(num[i])]++;;

    for(int i = 0; i < count.length; i++)
        if(count[i] > highest_value){
            highest_number = i;
            highest_value = count[i];
        }

    return highest_number;
} 
```

慢 10 倍，但没有其他阵列。创建三个整数，一个用于数字，两个用于计数。为每个 int 遍历数组一次，并在每次显示时递增当前计数，如果大于最高计数，则设置为最高计数并将最高数设置为当前计数。返回最高数。

```
public int highestNumber(String[] num){
    int highest_number = 0;
    int highest_value = 0;
    int current_value = 0;

    for(int i = 0; i < 10; i++){
        for(int j = 0; j < num.length; j++)
            if(i == Integer.parseInt(num[j]))
                current_value++;

        if(current_value > highest_value){
            highest_value = current_value;
            highest_number = i;
        }

        current_value = 0;
    }

    return highest_number;
} 
```

第一个显然要快得多，但是如果出于某种原因您不想要另一个数组，第二个也可以使用。

# c# - 将模块名称传递给模块构造函数

> ID：10459218
> 
> 赞同：0
> 
> 时间：2012-05-05T05:41:00.377
> 
> 标签：c#, silverlight, prism, unity-container

我正在创建一个 Silverlight 应用程序，它将加载用户定义的模块。

这是棘手的部分：我不知道会有哪些模块，所以我不知道模块的名称。

我遇到了一个小问题：加载用户制作的模块时，它不知道它的名称（引导程序在运行时知道它），我需要某种名称来跟踪所有正在使用的模块由应用程序。

这基本上归结为：我想在模块构造函数中告诉模块它的预期名称是什么（一个简单的字符串）。

但是，Unity 中的 AFAIK 只能将接口传递给模块，对吗？而且，即使我使用字符串属性创建了一些非常简单的接口，我如何确保每个模块都获得正确的名称（或者我如何传递该接口的正确实例）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:14:56.250

例如，当然模块本身定义了自己的名称。

```
[Module(ModuleName="Module Name Goes Here")]
public class SomeModule : ModuleBase
{
    ....
} 
```

为什么要告诉它自己的名字..？

# iphone - 如何自定义 TTPostController 动作按钮

> ID：10459219
> 
> 赞同：1
> 
> 时间：2012-05-05T05:41:04.740
> 
> 标签：iphone, ios

Three20 TTPostController 具有默认的“完成”按钮用于操作。如何自定义按钮，例如“保存”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:13:56.747

```
#import "CustomTTPostController.h"
@implementation CustomTTPostController
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    self.navigationItem.rightBarButtonItem.title = @"Save";
}
return self;
}
@end 
```

# java - 如何在 UNIX 中保存多个文件的终端输出？

> ID：10459223
> 
> 赞同：3
> 
> 时间：2012-05-05T05:41:44.147
> 
> 标签：java, linux, shell, unix

我有一个 java 类文件，我需要在目录中的每个文件上运行它。我目前正在使用以下命令在目录中的每个文件上运行程序

```
find . -type f -exec java JavaProgram {} \; 
```

但是，我需要将每次调用的结果输出到单独的文件，而不是在终端中显示结果。有没有我可以使用的命令可以递归地调用整个目录上的 java 程序并将每次调用的终端输出保存到单独的文件中？

有点像运行`java JavaProgram inputfile > outputdir/outputfile`但递归地遍历目录中具有相同名称的每个`'inputfile'`文件`'outputfile'`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T05:54:40.237

怎么样

```
for i in $(find . -type f)
do
    java JavaProgram $i > ${i}.out
done 
```

这将对每个文件运行程序并将输出写入每个文件`filename.out`的同一目录中。这种方法比单行 subshel​​l 方法稍微灵活一些，因为您可以进行任意转换以生成输出文件名，例如`basename`用于删除后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T05:53:39.057

只需执行一个子shell 来进行重定向。例如：

```
find . -type f -exec sh -c "java JavaProgram {} > outputdir/{}" \; 
```

# java - 一个 JSP 文件中的多个表单与不同的 Servlet 交互

> ID：10459227
> 
> 赞同：0
> 
> 时间：2012-05-05T05:42:09.360
> 
> 标签：java, html, forms, jsp, servlets

我有一个`index.jsp`文件有两种不同类型的表格

```
<form action="searchpath" name="searchForm" method="get">
<p>BedType</p>
   <select name="bedType">
     <jsp:include page="/WEB-INF/embeds/bedType.jsp"/>
   </select>
   <p>Max Price</p>
     <input size="10" maxlength="10" name="mPrice"/>
     <br/><br/>
     <input name="Reset" type="reset" value="RESET" class="input"/> <input type="submit" class="input" value="SUBMIT"/>
</form> 
```

和

```
 <form action="loginController" method="post" id="loginForm">
        Please Login :<input name="username" size="30" maxlength="30"/> 
        Password : <input name="pass" type="password" size="30" maxlength="30"/>    
        <input type="submit" value="SUBMIT" class="input"/>
    </form> 
```

我认为`action`定向到的字段类型`web.xml` `<url-pattern>/searchpath</url-pattern>`将允许我将我在这些表单中放置的任何输入信息定向到该路径的 servlet。也就是说，第一个表单将与我的`searchpath`servlet 交互。当我尝试提交表单并打印出信息时，似乎没有任何效果，而且我一直收到一个`http 404 error`. 有人可以帮我解决这个问题吗？

网页.xml：

```
 <servlet-mapping>
    <servlet-name>Search</servlet-name>
    <url-pattern>/searchpath</url-pattern>
  </servlet-mapping> 
```

在我的 search.java servlet 中：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    out.println("<HTML>");
    out.println("<HEAD>");
    out.println("<TITLE>Static Servlet</TITLE>");
    out.println("</HEAD>");
    out.println("<BODY>");
    out.println("<h1>WTF</h1>");
        out.println("</BODY>");
    out.println("</HTML>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:36:37.783

检查浏览器 URL。您缺少上下文。

假设您在[http://localhost:8080/test/index.jsp](http://localhost:8080/test/index.jsp)`test`运行，您的上下文路径在哪里。

所以，调用 Servlet 的时候应该是[http://localhost:8080/test/searchpath](http://localhost:8080/test/searchpath)。

在你的情况下，它不是那样的。

因此，添加 cotextpath 将解决您的问题。

例如`action="<%=request.getContextPath()%>/searchpath"`

# javascript - D3.js 中的轴标签偏移

> ID：10459229
> 
> 赞同：0
> 
> 时间：2012-05-05T05:42:27.460
> 
> 标签：javascript, d3.js, labels, plane

我有一个应用程序，其中笛卡尔平面上有两个轴，它们的原点位于包含元素的中间附近。d3.axis 功能很棒，但是每个刻度处的标签都固定在那个地方，基本上是轴在原点相交的地方，0 与轴线相交。

有没有办法让每个轴刻度上的数字稍微偏移一点，所以我没有遇到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:57:13.723

[`axis.tickPadding()`](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickPadding)

# android - 我需要一个完整的承诺内容提供商吗？

> ID：10459248
> 
> 赞同：1
> 
> 时间：2012-05-05T05:45:41.463
> 
> 标签：android, android-contentprovider, android-syncadapter

我的应用程序有这些部分

```
A. Main activity
B. Widget provider
C. Sync Adapter  (talks to the cloud)
D. Local persisted data (small, about 1-2KB). 
```

A、B、C 从/向 D 读/写。该应用程序不与其他应用程序交互，所有部分都在一个 apk 中。

1.  我可以将存储 D 实现为具有非 ContentProvider 的普通 Java API 的类的单例吗？（我不喜欢使用 SQLite，而是我管理的单个平面文件，此代码和专有 API 已经存在。添加适当的同步应该不是问题）。

2.  是否保证所有部分 A、B、C、D 都在相同的进程和相同的类加载器中运行，共享相同的单例？

3.  目前该应用程序没有应用程序类。应该添加一个并将 D 单例绑定到它还是没有真正需要有一个 Application 类？

4.  还有什么我应该注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:59:33.377

> 我可以将存储 D 实现为具有非 ContentProvider 的普通 Java API 的类的单例吗？（我不喜欢使用 SQLite，而是我管理的单个平面文件，此代码和专有 API 已经存在。添加适当的同步应该不是问题）。

是的你可以。

> 是否保证所有部分 A、B、C、D 都在相同的进程和相同的类加载器中运行，共享相同的单例？

是的，如果它们在同一个应用程序中（在同一个 AndroidManifest 中如此定义）

> 目前该应用程序没有应用程序类。应该添加一个并将 D 单例绑定到它还是没有真正需要有一个 Application 类？

不，你不需要它。

# android - App Engine Connected Android 向导在 RuntimeException 处停止

> ID：10459251
> 
> 赞同：1
> 
> 时间：2012-05-05T05:46:33.750
> 
> 标签：android, google-app-engine, eclipse-plugin, runtimeexception

我正在关注[https://developers.google.com/eclipse/docs/appengine_connected_android](https://developers.google.com/eclipse/docs/appengine_connected_android)教程，当我单击“Say Hello”按钮时，我的 Eclipse 会在*RuntimeException （下面的日志）处停止。*

**工具**

Windows 7 64bits
eclipse indigo SR2
android-sdk rev 19
android 2.3.3 API 10
app engine sdk 1.6.5
gwt 2.4.0
jdk1.7.0_04
**编辑**解决方案：使用Java 6

**日志**

```
05-05 02:32:48.501: W/dalvikvm(523): threadid=9: thread exiting with uncaught exception (group=0x40015560)
05-05 02:32:48.501: E/AndroidRuntime(523): FATAL EXCEPTION: AsyncTask #1
05-05 02:32:48.501: E/AndroidRuntime(523): java.lang.RuntimeException: An error occured while executing doInBackground()
05-05 02:32:48.501: E/AndroidRuntime(523):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.lang.Thread.run(Thread.java:1019)
05-05 02:32:48.501: E/AndroidRuntime(523): Caused by: java.lang.RuntimeException: The RequestFactory ValidationTool must be run for the com.MyApp.client.MyRequestFactory RequestFactory type
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.google.web.bindery.requestfactory.vm.impl.Deobfuscator$Builder.load(Deobfuscator.java:59)
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.google.web.bindery.requestfactory.vm.InProcessRequestFactory.<init>(InProcessRequestFactory.java:80)
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.google.web.bindery.requestfactory.vm.RequestFactorySource.create(RequestFactorySource.java:43)
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.MyApp.Util.getRequestFactory(Util.java:158)
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.MyApp.MyAppActivity$2$1.doInBackground(MyAppActivity.java:144)
05-05 02:32:48.501: E/AndroidRuntime(523):  at com.MyApp.MyAppActivity$2$1.doInBackground(MyAppActivity.java:1)
05-05 02:32:48.501: E/AndroidRuntime(523):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-05 02:32:48.501: E/AndroidRuntime(523):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-05 02:32:48.501: E/AndroidRuntime(523):  ... 4 more 
```

**我试过了**

*   谷歌搜索解决方案。
*   执行教程中描述的 hack（例如 proguard.cfg hack，将 'lib' 重命名为 'libs' hack）
*   [执行http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation](http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation)中描述的黑客攻击，但默认情况下已经设置了它们。
*   做程序员绝望时所做的无意义的事情（重新安装工具，重新启动机器，移动目录等）

**咆哮**

我对谷歌提供了这样一个无用的工具感到非常失望，我已经看到人们对这个特定的向导有问题是很常见的。这是一个简单的“Hello World”向导，开箱即用是最不值得期待的。

作为一个附带问题，是否有任何其他好的资源/示例可以帮助学习如何在 App Engine 和 Android 应用程序之间同步数据？如果没有简单的解决方案来让这个“Hello World”工作，那只是浪费时间。

**编辑**解决。当示例项目启动并运行时，它实际上非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:39:50.620

正如您所描述的，您已将 requestfactory-apt.jar 附加到**Android App**中的 Java Compiler/annotation processing/factory 路径。

*   如果您还没有最新版本，请更新到 App Engine SDK 1.6.5.1。

*   在您的项目上使项目清洁...。

*   使用 Java 6，App Enginge 还不支持 Java 7。

# android - 在模拟器上安装apk时出错：找不到设备

> ID：10459257
> 
> 赞同：-2
> 
> 时间：2012-05-05T05:47:43.160
> 
> 标签：android, android-emulator, adb

> **可能重复：**
> [Android dab 返回“未找到设备”错误](https://stackoverflow.com/questions/7441248/android-dab-returns-the-device-not-found-error)

我正在`apk`android模拟器上安装一个文件。我`ADB`的在：

```
C:\Program Files (x86)\Android\android-sdk\platform-tools 
```

当我使用它时`adb intall <apk file name>` ，它显示：

```
Error: device not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:53:17.873

首先检查设备是否使用 adb devices 连接到 adb，如果不存在则重新启动 AVD

# java - 多线程——为什么一个线程做所有的工作？

> ID：10459258
> 
> 赞同：3
> 
> 时间：2012-05-05T05:47:51.540
> 
> 标签：java, multithreading, synchronized, matrix-multiplication

我正在使用两个线程将两个矩阵相乘（但是，该程序也被编写为按比例放大，因此我可以使用三个、四个等线程代替）。每个线程计算/完成最终矩阵的一行（或列）的工作。如果一个线程在一行上工作，那么其他线程不应该在该行上工作。它/他们应该移动到下一个可用行。

首先，我不确定我实现问题的方式是否正确。如果你能看到更好的方法，请告诉我。

其次，按照我的做法，每次我测试它（使用不同大小的矩阵——甚至是巨大的矩阵）时，只有一个线程可以完成这项工作。也就是说，每次都是同一个线程访问 run() 方法的同步块。其他线程都进入了 run() 方法，但为什么只有一个线程总是获得锁并完成所有工作？

这是我的运行方法：

```
 public void run() {
    System.out.println(Thread.currentThread().getName());
    while (i < number of columns in final matrix) {
        synchronized (this) {
            if (i < number of columns in final matrix) {
                for (int j = 0; j < Main.B[0].length; j++) { 
                    for (int k = 0; k < Main.A[0].length; k++) { 
                        Main.C[i][j] += Main.A[i][k] * Main.B[k][j];
                    }
                }
                i++;
            }
        }
    }
} 
```

这是我的驱动程序类中创建线程并启动程序的代码：

```
MyRunnable r = new MyRunnable();
Thread thread1 = new Thread(r);
Thread thread2 = new Thread(r);
thread1.start();
thread2.start();

try {
    thread1.join();
    thread2.join();
    } catch (InterruptedException ie) {
        System.out.println("\nThe following error occurred: " + ie);
        }
    } 
```

我想我的问题是双重的——我的方法对于手头的问题是否正确？如果是这样，（如果不是），为什么一个线程总是抓住锁并完成所有工作？我已经在 20x20 矩阵上检查了最多 6 个线程的程序，并且总是只有一个线程在做这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T06:43:57.877

正如一些评论所建议的那样，问题出在锁定（即`synchronized(this)`部分）上。在您的情况下，同步是在`this`, 的单个实例上完成的`MyRunnable`，因此当一个线程在`synchronized`块内完成工作时，所有其他线程将等待工作完成。如此有效，一次只有一个线程在做真正的工作。

这是解决问题的方法。由于您需要您的线程在不同的行上并行工作，因此这项工作*不能通过*锁同步（因为锁定意味着相反：一次只有一个线程可以完成工作）。您*需要*同步的是每个线程决定它将在哪一行工作的部分。

这是一个示例伪代码：

```
public void run(){
  int workRow;
  synchronized(this){
    workRow = findNextUnprosessedRow();
  }
  for(int i=0; i<matrix[workRow].length; i++){
    //do the work
  }
} 
```

请注意，由于上述原因，故意*不同步实际工作。*

您使用线程的方式是正确的，因此没有问题，但是，我建议您查看 Java 的并发 API：[线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)。以下是如何在您的上下文中使用它的示例：

```
//Creates a pool of 5 concurrent thread workers
ExecutorService es = Executores.newFixedThreadPool(5);

//List of results for each row computation task
List<Future<Void>> results = new ArrayList<Future<Void>>();
try{
  for(int row=0; row<matrix.length; row++){
    final int workRow = row;

    //The main part. You can submit Callable or Runnable
    // tasks to the ExecutorService, and it will run them
    // for you in the number of threads you have allocated.
    // If you put more than 5 tasks, they will just patiently
    // wait for a task to finish and release a thread, then run.
    Future<Void> task = es.submit(new Callable<Void>(){
      @Override
      public Void call(){
        for(int col=0; col<matrix[workRow].length; col++){
          //do something for each column of workRow
        }
        return null;
      }
    });
    //Store the work task in the list.
    results.add(task);
  }
}finally{
  //Make sure thread-pool is shutdown and all worker
  //threads are released. 
  es.shutdown();
}

for(Future<Void> task : results){
  try{
    //This will wait for threads to finish. 
    // i.e. same as Thread.join()
    task.get();
  }catch(ExecutionException e){
    //One of the tasks threw an exception!
    throw new RuntimeException(e);
  }
} 
```

这种方法更简洁，因为工作分配是在主线程（外部 for 循环）完成的，因此不需要同步它。

使用线程池时，您还可以获得一些好处：

*   它很好地处理了每个线程计算期间的任何异常。在使用裸线程时，就像在您的方法中一样，很容易“丢失”异常。

*   线程被池化。也就是说，它们会自动重用，因此您无需担心产生新线程的成本。这在您的情况下特别有用，因为您需要在矩阵中的每行生成一个线程，我怀疑这可能相当大。

*   提交的任务`ExecutorService`被包装在一个有用的`Future<Result>`对象中，这在每个计算任务实际返回某种结果时最有用。在您的情况下，如果您需要对矩阵中的所有值求和，则每个计算任务都可以返回该行的总和。然后你只需要总结这些。

有点长，但希望它能解决一些问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T06:09:53.047

您的问题是您将整个区域与`synchronized(this)`. 这意味着一次只允许一个线程进入循环进行计算。当然，这可能意味着多个线程可以计算不同的部分，但不能同时计算多个线程。这也意味着您的“并行”解决方案并不比一个线程快。

如果您想并行进行计算，请查看[Java 6 中的并行矩阵乘法和 Java 中的](https://stackoverflow.com/questions/5484204/parallel-matrix-multiplication-in-java-6)Fork [Join 矩阵乘法，](https://stackoverflow.com/questions/5472744/fork-join-matrix-multiplication-in-java)它们应该涵盖该主题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T06:12:54.417

线程调度取决于特定的 VM 实现。在某些实现中，线程将继续运行，直到它以某种方式阻塞或被更高优先级的线程抢占。在您的情况下，所有线程都具有相同的优先级，因此进入`synchronized`块的第一个线程永远不会阻塞，它不会被抢占。一些调度程序实现了优先级老化，这样一个饥饿的线程最终会增加优先级，但你可能没有运行足够长的时间来产生效果。

`Thread.yield()`在块结束后添加一个调用`synchronized`。这告诉调度程序选择一个新线程来运行（可能是同一个，但可能是不同的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:04:17.933

您的 run 函数具有第一个获取锁的线程，该线程在仍拥有锁的同时连续完成所有工作。对于下一行，也许另一个线程会获得锁，但它会阻塞所有其他线程，直到它完成。

我要做的是拥有一个与行数相同的布尔数组，并使用它们来声明处理每一行的任务。这将类似于以下伪代码：

```
//before creating the threads, pre-fill BoolList with trues
function run()
{
  while (true)
  {
    lock(BoolList)
    {
      //find first true value and set it to false
      //if no true found, return
    }
    //do the actual math of multiplying the row we claimed above
  }
} 
```

还要记住，创建一个新线程的开销是足够的，多线程这个程序只对大型矩阵是值得的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T06:16:06.943

正如**mru**在他的评论中已经说过的那样，您的问题是所有行计算都是在“同步（此）”块内执行的。因此，所有线程都将等待一行处理完毕，然后再开始下一行，并且始终获取锁的同一线程可能是优化的结果，因为您几乎是单线程进行计算的。您可能会考虑只决定在同步块内处理哪一行：

```
int rowToProcess;
synchronized (this) {
    if (i < number of columns in final matrix){
        rowToProcess = i;
        i++;
        }
    else
        return;
    } 
```

# php - 如何允许下载 1GB 的文件

> ID：10459259
> 
> 赞同：0
> 
> 时间：2012-05-05T05:48:28.797
> 
> 标签：php

我想让用户下载最大 1GB 的文件，但根据我的代码，只能下载 113MB 的文件...

```
header('Content-type: application/zip');

//open/save dialog box
header('Content-Disposition: attachment; filename="check.zip"');

//read from server and write to buffer
readfile('check.zip'); 
```

谁能告诉我如何下载更大的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T05:59:27.137

我将从您所说的内容中猜测您遇到了“内存不足”错误。

[在这种情况下，也许文档](http://php.net/readfile)中的这个注释可能会引起人们的兴趣：

> **笔记：**
> 
> **readfile()**不会出现任何内存问题，即使在发送大文件时也是如此。如果遇到内存不足错误，请确保使用[ob_get_level()](http://php.net/ob_get_level%28%29)关闭输出缓冲。

因此，如有必要，请检查`ob_get_level()`并调用以停止输出缓冲。`ob_end_flush()`

* * *

或者，您可以执行以下操作：

```
$f = fopen("check.zip","rb");
while(!feof($f)) {
    echo fgets($f);
    flush();
} 
```

* * *

另一种选择是：

```
header("Location: check.zip"); 
```

这会将浏览器重定向到该`check.zip`文件。由于是下载，现有页面不会受到影响。您甚至可以输出页面的其余部分，向用户说“您的下载将立即开始”之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:55:01.177

一次读取并回显文件一个块，或者使用类似 mod_sendfile 的东西使它不是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T05:59:26.060

将文件写入缓冲区块大小增加到文件的最大值。这将降低资源的利用率，并且您的下载工作正常。

编辑：

使用 HTML5 webworkers 下载大容量。Webworkers 在后台工作，因此您可以下载大文件。

# android - 如何自动对齐按钮

> ID：10459262
> 
> 赞同：0
> 
> 时间：2012-05-05T05:49:16.663
> 
> 标签：android, layout

我希望我的单选按钮在不指定 dp 的情况下自动对齐，该怎么做？

在下面的示例示例中，设置了单选按钮宽度 80 和高度 70。相反，我想像 fill_parent 或 wrap_content 那样做。我能怎么做？

```
<RadioGroup android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:orientation="horizontal"
      android:checkedButton="@+id/allcontacts" 
      android:id="@+id/contactgroup">
      <RadioButton android:id="@+id/allcontacts" 
       android:width="80dip" 
       android:height="70dip"/>

      <RadioButton android:id="@+id/categories" 
       android:width="80dip" android:height="70dip" />

      <RadioButton android:id="@+id/favourites" 
        android:width="80dip" android:height="70dip" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:07:25.543

将按钮包装在具有 match_parent 的 layout_width 的 LinearLayout（水平）中。

对于每个按钮，将 layout_height 设置为 wrap_content，将 layout_width 设置为 0dp 并将 layout_weight 设置为 1，它们的大小都将相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T05:52:51.910

在按钮周围包裹一个 LinearLayout。然后您可以根据需要使用填充来调整确切位置

# c - 运行时错误 sigsegv

> ID：10459263
> 
> 赞同：-1
> 
> 时间：2012-05-05T05:49:26.007
> 
> 标签：c

我收到运行时错误 sigsegv，我不明白这段代码的问题。这是一个将初始子字符串与具有最大优先级的字符串数组匹配的程序。

```
#include<stdio.h>
#include<limits.h>
int main() {
    int T,i,N;
    char si[T][1000];
   long vi[T];
scanf("%d",&T);
for(i=0;i<T;++i)
            scanf("%s%ld",&si[i],&vi[i]);

scanf("%d",&N);
while(N--) {
           char str[1000];
           scanf("%s",str);
             int j,maxPindex=-1;
             long maxPriority=LONG_MIN;
             int l=strlen(str);
             for(j=0;j<T;++j) {
                     if(strlen(si[j])>=l && strncmp(str,si[j],l)==0 &&  vi[j]>maxPriority) {
                                               maxPriority=vi[j];
                                               maxPindex=j;
                     }                                                
             }
             //free(str);
             if(maxPindex==-1) printf("NO\n");
             else printf("%s\n",si[maxPindex]);
 }
return (0);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:00:43.100

它在尝试创建变量“si”时已经崩溃。函数内部的 AC 变量，例如变量“T”，以随机垃圾作为其值开始。例如，它可能包含 918128238。然后，当尝试创建“si”时，这将是一个非常大的数组，它不适合。

在创建“si”和“vi”之前，您需要读取“T”的值。也就是说，将您的 scanf 移到“si”和“vi”声明之前。

# bash - 处理 find 返回的文件路径中的单引号

> ID：10459267
> 
> 赞同：3
> 
> 时间：2012-05-05T05:50:26.057
> 
> 标签：bash, escaping, find

我正在编写一个 bash 脚本，当从 directory 运行时`B`，它会反映 directory 中 directory 的目录`A`结构`B`。

目前，我这样做如下：

```
 #!/bin/bash          

 dirify () {
    echo $1
 }
 export -f dirify

 find "../test" -type d -exec bash -c "dirify '{}'" \; 
```

我从目录运行这个脚本`B`，并且`../test`是目录`A`。幸运的是，我用来测试的目录包含`'`名称中的文件夹。当我运行此脚本时，bash 在到达这些目录时会给出以下错误：

```
> bash: -c: line 0: unexpected EOF while looking for matching `''
> bash: -c: line 1: syntax error: unexpected end of file 
```

（注意第 0 行和第 1 行是指`dirify()`函数内的行）

说明此问题的更简化方法如下：

`find "../test" -exec bash -c "echo '{}'" \;`

此示例产生相同的错误。

无论如何，这是一个问题，因为在生产中，我不能假设文件路径不包含该`'`字符。

反正有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:09:28.950

将其作为参数传递。

```
bash -c 'dirify "$1"' dirify {} 
```

# iphone - 检查iPhone上是否存在应用程序？

> ID：10459279
> 
> 赞同：0
> 
> 时间：2012-05-05T05:54:08.463
> 
> 标签：iphone, objective-c

如果我知道应用程序的名称（不使用 URL 方案），我可以以编程方式检查 iphone 上是否存在应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:50:55.150

检查应用程序是否存在的唯一方法是检查设备是否可以响应应用程序必须注册的特定 URL-Scheme。这方面的示例是本机 Facebook 应用程序。如果不是这种情况，那么您就不走运了。

# iphone - 我可以根据 iTune 应用商店中我的应用的引用者在 iPhone 应用中动态呈现内容吗

> ID：10459281
> 
> 赞同：4
> 
> 时间：2012-05-05T05:54:34.143
> 
> 标签：iphone, referrer

我有一个应用程序，我需要根据用户下载我的应用程序的站点来呈现不同的内容。例如，网站 A 有一个链接让其用户下载我的应用程序，我想在用户安装后第一次运行我的应用程序时显示网站 A 的一些产品。这是可行的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:22:22.460

这绝对是可行的，我能想到的最简单的方法是让用户输入与他们下载您的应用程序的网站相对应的某种促销代码。从那里您可以将他们输入的内容与有效促销代码字符串的数组进行比较，如果匹配，则将该特定促销代码的布尔值设置为“是”，然后将您的 UI 设置为类似

`if(website1bool == YES){Display customized UI};`

然后将此布尔值添加到`NSUserDefaults`以记住更改。它可能最终会成为很多“如果”，但它绝对是可行的！

**编辑**：在默认设置中或多或少...

```
if([myDefaults boolForKey@"website1Bool"] == YES){Configure}; 
```

# c# - 将网格从一个位置动画到另一个位置

> ID：10459289
> 
> 赞同：3
> 
> 时间：2012-05-05T05:56:30.777
> 
> 标签：c#, wpf, xaml, animation, grid

我有一个图像和按钮网格，我想自动从一个位置到另一个位置（实际上是左边的几个空格）动画，但它没有奏效。我已经尝试在 xaml 中使用故事板并以编程方式使用下面的代码，但它现在可以工作了。请帮忙！！！

```
 public static void MoveTo(Grid target)
    {
        Canvas.SetLeft(target, 0);

        var top = Canvas.GetTop(target);
        var left = Canvas.GetLeft(target);
        TranslateTransform trans = new TranslateTransform();
        target.RenderTransform = trans;
        double newX = (double)(left - 300);
        double newY = (double)top;
        DoubleAnimation anim1 = new DoubleAnimation(top, -15, TimeSpan.FromSeconds(10));
        //DoubleAnimation anim1 = new DoubleAnimation(top, newY - top, TimeSpan.FromSeconds(10));

        DoubleAnimation anim2 = new DoubleAnimation(left, newX - left, TimeSpan.FromSeconds(10));
        anim1.AutoReverse = true;
        anim1.RepeatBehavior = RepeatBehavior.Forever;
        trans.BeginAnimation(TranslateTransform.XProperty, anim1);
        trans.BeginAnimation(TranslateTransform.YProperty, anim2);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:18:19.040

完全**TranslateTransform**不适合你想要的。更好地使用思维动画

我建议您不要使用画布并将其更改为网格，但如果您使用画布，请使用此代码

```
 private void Animationsss(Grid grd)
        {
            //create an animation
            DoubleAnimation da = new DoubleAnimation();
            //set from animation to start position 
            //dont forget set canvas.left for grid if u dont u will get error
            da.From = Canvas.GetLeft(grd);
            //set second position of grid
            da.To = -100;
            //set duration
            da.Duration = new Duration(TimeSpan.FromSeconds(2));
            //run animation if u want stop ,start etc use story board
            grd.BeginAnimation(Canvas.LeftProperty, da);

        } 
```

如果您使用网格代码是这样的：

```
 private void Animation(Grid grd)
        {
            ThicknessAnimation ta = new ThicknessAnimation();
            //your first place
            ta.From = grd.Margin;
            //this move your grid 1000 over from left side
            //you can use -1000 to move to left side
            ta.To = new Thickness(1000, 0, 0, 0);
            //time the animation playes
            ta.Duration = new Duration(TimeSpan.FromSeconds(10));
            //dont need to use story board but if you want pause,stop etc use story board
            grd.BeginAnimation(Grid.MarginProperty, ta);
        } 
```

你可以使用不透明动画来淡化你的网格......如果移动和淡化它会很好！

```
 private void Animationsss(Grid grd)
        {
            DoubleAnimation da = new DoubleAnimation(1, 0, new Duration(TimeSpan.FromSeconds(2)));
            grd.BeginAnimation(Grid.OpacityProperty, da);
        } 
```

如果没有任何理由，您可以将画布更改为网格，并且如果鼠标进入，则更好地使用**TranslateTransform**来调整控件的大小，例如此代码下的代码调整大小控件：

```
private void grid1_MouseEnter(object sender, MouseEventArgs e)
        {
            //at first its normal size
            ScaleTransform st = new ScaleTransform(1, 1);
            //animation size to 1.25 persent of real size
            DoubleAnimation da = new  DoubleAnimation(1,1.25, new Duration(TimeSpan.FromSeconds(2)));
            //set transform to control
            grid1.RenderTransform = st;
            //animation transform now From Y And X
            st.BeginAnimation(ScaleTransform.ScaleXProperty, da);
            st.BeginAnimation(ScaleTransform.ScaleYProperty, da);
        } 
```

如果你的宽度或高度动画做同样的工作，如缩放变换:)

希望我能帮助你... :))

请给我留下评论

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:51:39.900

您也可以为此使用 xaml：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="TestBed.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="MoveGrid">
        <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="grid">
            <EasingThicknessKeyFrame KeyTime="0:0:1" Value="-300,0,0,0"/>
        </ThicknessAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="button">
        <BeginStoryboard x:Name="MoveGrid_BeginStoryboard" Storyboard="{StaticResource MoveGrid}"/>
    </EventTrigger>
</Window.Triggers>
<Canvas>
    <Grid x:Name="grid" Height="300" Width="300" Background="Black">
        <Button x:Name="button" Content="Move the gird!" Height="30" Margin="10,0" />
    </Grid>         
</Canvas>
</Window> 
```

# node.js - 生产环境动态生成 Express 路由失败

> ID：10459291
> 
> 赞同：1
> 
> 时间：2012-05-05T05:56:52.893
> 
> 标签：node.js, express

我见过很多人在他们的 routes/index.js 中动态生成他们的所有路由，如下所示：

```
require("fs").readdirSync("./routes", 'utf8').forEach(function(file) {
    if (file != 'index.js' && file != '.DS_Store') {
        require("./"+file);
    }
}); 
```

这在开发中可以正常工作，但在生产中却不行。如果我删除它并手动添加路线，它工作正常。有任何想法吗？

如果您认为这会有所帮助，这是我的错误：

```
node.js:134

throw e; // process.nextTick error, or 'error' event on first tick

Error: ENOENT, No such file or directory './routes'
    at Object.readdirSync (fs.js:376:18)
    at Object.<anonymous> (/app/routes/index.js:4:15)
    at Module._compile (module.js:402:26)
    at Object..js (module.js:408:10)
    at Module.load (module.js:334:31)
    at Function._load (module.js:293:12)
    at require (module.js:346:19)
    at Object.<anonymous> (/app/server.js:50:14)
    at Module._compile (module.js:402:26)
    at Object..js (module.js:408:10)
Process died with exit code 1\. Restarting... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:00:55.790

正如 Mark Bessey 在他的回答中所说，您正在`routes`从当前目录解析目录 - 与您的主脚本所在的位置无关。您可能应该使用`__dirname`. 从[文档](http://nodejs.org/api/globals.html#globals_dirname)：

> 当前执行的脚本所在目录的名称。

```
fs.readdirSync(path.join(__dirname, "routes")) 
```

此外，您不需要通过`'utf8'`. *此外，在代码中使用任何* 函数时都要非常小心`Sync`——通常，在服务器开始接受请求之前，在顶级范围内是可以的，所以在这种情况下应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T06:07:27.557

在生产中，当前目录似乎没有设置为“路由”目录的父目录。您如何在生产环境中启动您的应用程序？你得到什么输出

```
console.log(process.cwd()); 
```

# python - (python) 数据库，语法错误

> ID：10459293
> 
> 赞同：0
> 
> 时间：2012-05-05T05:57:00.867
> 
> 标签：python, database

我对数据库完全陌生，并且使用可以位于[http://halfcooked.com/presentations/osdc2006/python_databases.html](http://halfcooked.com/presentations/osdc2006/python_databases.html)的有用指南将一些简单的东西放在一起，但是它返回了一个我不明白的错误

```
try:
    from sqlite3 import dbapi2 as sqlite
except ImportError:
    from pysqlite2 import dbapi2 as sqlite

db_connection = sqlite.connect('program.db')

db_curs = db_connection.cursor()

def create_customer(cID, fname, sname, dob):
    db_curs.execute("CREATE TABLE " + cID + " ( id INTEGER PRIMARY KEY, first_name VARCHAR(20),last_name VARCHAR(30), date_of_birth DATE)")
    db_curs.execute("INSERT INTO " + cID + " (first_name, last_name, date_of_birth) VALUES (fname, sname, dob)")
    db_connection.commit()
    db_curs.execute("SELECT * FROM " + cID )

create_customer("1", "John", "Farnham", "12/08/95")
create_customer("1", "Indianna", "Jones", "05/05/95")

print db_curs.fetchall() 
```

我收到的错误如下：

```
Traceback (most recent call last):
  File "C:\Users\fin0005\Documents\loyalty.py", line 17, in <module>
    create_customer("1", "John", "Farnham", "12/08/95")
  File "C:\Users\fin0005\Documents\loyalty.py", line 12, in create_customer
    db_curs.execute("CREATE TABLE " + cID + " ( id INTEGER PRIMARY KEY, first_name VARCHAR(20),last_name VARCHAR(30), date_of_birth DATE)")
OperationalError: near "1": syntax error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:00:21.927

在你的表名周围添加反引号，这样它就不会认为它正在创建一个整数作为表名

```
def create_customer(cID, fname, sname, dob):
    db_curs.execute("CREATE TABLE `" + cID + "` ( id INTEGER PRIMARY KEY, first_name VARCHAR(20),last_name VARCHAR(30), date_of_birth DATE)")
    db_curs.execute("INSERT INTO `" + cID + "` (first_name, last_name, date_of_birth) VALUES (fname, sname, dob)")
    db_connection.commit()
    db_curs.execute("SELECT * FROM `" + cID  + "`")

# In SQL terms, the following blows up
# create table 2 (id int(10) PRIMARY KEY); Due to the 2 being an integer
# create table `2` (id int(10) PRIMARY KEY); Works, due to the 2 being properly identified with backticks :)

# Here's some code as requested in the comment, everything below this point is a self contained example, please do not copy the function above
def initiate_customer_table(table_name):
    db_curs.execute("CREATE TABLE IF NOT EXISTS `" + table_name + "` ( id INTEGER PRIMARY KEY, first_name VARCHAR(20),last_name VARCHAR(30), date_of_birth DATE)")
    db_connection.commit()       

def create_customer(table_name, fname, sname, dob):
    db_curs.execute("INSERT INTO `" + table_name + "` (first_name, last_name, date_of_birth) VALUES (%s, %s, %s)", [fname, sname, dob])
    db_connection.commit()

    # Fetches the user just created
    db_curs.execute("SELECT * FROM `" + table_name  + "` WHERE id = %s", [db_curs.insert_id()])

    # Returns the user
    return db_curs.fetchone()

desired_table_name = 'customers'

initiate_customer_table(desired_table_name)

customer_1 = create_customer(desired_table_name, "Bryan", "Moyles", "1800-01-01")
customer_2 = create_customer(desired_table_name, "Awesome", "Guy", "1800-01-01") 
```

如果您打算在生产中使用此代码，我还建议您更进一步，以确保所有字段都为 mysql 正确转义。

# java - 从项目的 web 文件夹中的 servlet 创建一个目录

> ID：10459300
> 
> 赞同：0
> 
> 时间：2012-05-05T05:59:13.327
> 
> 标签：java, servlets, glassfish, mkdir

我必须从项目的*web*目录中的 servlet 创建一个文件夹。*（例如：web/Users/userinform）*为此，我调用了用于创建目录但无法创建目录的助手类。即使我`mkdir`从 servlet 中调用，也不会创建目录。*（返回false）* 是什么原因？我该怎么做？

**编辑** ![在此处输入图像描述](../Images/49bc7920e4143a4171bbafefbd8a9609.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:06:46.790

像这样试试

```
 new File(request.getRealPath("users") + "/me@this.com").mkdir(); 
```

永远不要依赖在已部署的 Web 应用程序中进行修改。

[在运行时参考 Tomcat 中的](https://stackoverflow.com/questions/9350974/modify-properties-file-in-tomcat-during-runtime)这个修改属性文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:17:27.150

首先，也许你需要使用调用的“mkdirs()”风格，确保所有的父母也被创建。

其次，您假设在哪里创建您的目录：作为 Web 应用程序部署路径的子目录？然后@Srikanth 的答案应该有效 - 重新检查。

如果您尝试在此路径之外写入，则应仔细检查文件系统权限（不是您的，而是最终运行 glassfish 的用户）。

# c# - C# 中的麦克风到扬声器音频流

> ID：10459306
> 
> 赞同：7
> 
> 时间：2012-05-05T06:00:19.633
> 
> 标签：c#, audio

我需要制作一个 Windows 应用程序，它接受音频输入（来自麦克风）并立即播放到扬声器。如果我简而言之，我需要制作一个可以测试我的麦克风的应用程序。

在过去的 3 天里，我一直在探索 Naudio 和 wmp 库，但我无法获得足够的帮助来创建它。但我知道使用这些库必须有一种方法可以创建这样的应用程序。

感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:02:43.640

你可以使用两种方式

1.  [csaudio](http://aaronamberman.com/tutorials/csaudio.php) //很难，但真的很好

2.  [如何从麦克风录制声音](http://www.dotnetspider.com/resources/4967-How-record-voice-from-microphone.aspx)//简单的方法

**编辑**

在列表中尝试这个 [录音机](http://voicerecorder.codeplex.com/)（这里使用[naudio](http://naudio.codeplex.com/)它的开源）

# outlook - Outlook 2007/2010 向 HTML 电子邮件添加随机换行符/空格

> ID：10459309
> 
> 赞同：1
> 
> 时间：2012-05-05T06:00:32.627
> 
> 标签：outlook, whitespace, html-email, outlook-2007, line-breaks

******编辑，该问题仅存在于 Outlook Web App 的预览窗格中******

 **我几乎尝试了所有方法，但似乎无法消除 Outlook 2007/2010 在屏幕右侧的预览框中呈现的空白/换行符。当您双击收件箱列表中的电子邮件时，HTML 会完美加载。但是，当它显示在拆分收件箱列表/电子邮件预览窗口中时，会生成换行符/空格。

我已经尝试了书中的每一个技巧。边框折叠，边框 = 0，显示：块，单元格间距/单元格填充：0，！重要等。没有任何效果。

这就是我所抱怨的。（为了隐私，我把所有东西都涂黑了）：

1.  209.67.20.161/email/linebreaks.png
2.  209.67.20.161/email/linebreaks2.png
3.  209.67.20.161/email/linebreaks3.png

它可能是本文中提到的“打印页限制 (Microsoft Word)”：

www.emailonacid.com/blog/details/C13/horizo​​ntal_spacing_issues_in_outlook_2007_and_2010

但是，我不这么认为，因为有些换行符彼此非常接近。

顺便说一句，我在 Photoshop 中切片图像并保存用于网络设备。

这是切片图像：http: [//209.67.20.161/email/slices.png](http://209.67.20.161/email/slices.png)

做我的救命恩人...

链接到我的 HTML：http: [//209.67.20.161/email/email_sliced_forss.html](http://209.67.20.161/email/email_sliced_forss.html)

您可以使用 ctrlq.org/html-mail 将 HTML 电子邮件发送到您自己的 Outlook 收件箱，并在选择 HTML 编辑器后将我的 HTML 源复制并粘贴到框中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:07:57.217

像在这个例子中那样设计你的 html 电子邮件，它将在所有主要客户中完美呈现，即使是像 lotus notes 这样的旧客户。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>

<style media="all" type="text/css">
table td
{
border-collapse: collapse;
}
</style>
    </head>

    <body>
    <table width="680" border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="20" align="left" valign="top" rowspan="2" bgcolor="#FFFFFF" style="font-size: 10px; font-family: arial; line-height:170px;">&nbsp;</td>
            <td width="300" height="170" rowspan="2" align="left" valign="top">
                <img src="another image" alt="" width="300" height="170" border="0"></td>
            <td width="33" align="left" valign="top" bgcolor="#FFFFFF" style="font-size: 10px; font-family: arial; line-height:140px;">&nbsp;</td>
            <td width="327" colspan="2" align="left" valign="top" bgcolor="#FFFFFF" style="font-size: 14px; font-family: arial; color:#5D5B5C; line-height: 16px;">some exemple text here</td>
        </tr>
        <tr>
            <td width="33" bgcolor="#FFFFFF" style="font-size: 10px; font-family: arial; line-height:30px;">&nbsp;</td>
            <td width="138" height="30" align="left" valign="top"><a href="some link here" target="_blank"><img src="image here" alt="details" width="138" height="30" border="0"></a></td>
            <td width="189" bgcolor="#FFFFFF" style="font-size: 10px; font-family: arial; line-height:30px;">&nbsp;</td>
        </tr>
    </table>
    </body>
    </html> 
```

这是另一个帖子的链接，我在其中解释了如何使用空 TD 单元而不是垫片。 [HTML 电子邮件 - 空表/TR/TD 作为间隔](https://stackoverflow.com/questions/7601442/html-emails-empty-tables-tr-td-as-spacers/10517579#10517579)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:40:54.700

尝试`style="line-height:your-image-size px;"`在`<td>`; 此外，在图像标签内使用 `style="display:block;"`**

# java - 将图像附加到 RTF 文档

> ID：10459314
> 
> 赞同：0
> 
> 时间：2012-05-05T06:02:18.153
> 
> 标签：java, itext, rtf

我正在尝试将图像添加到 rtf 文档。我可以将图像添加到文档中，但无法附加任何图像。这意味着当添加第二张图像时，会删除第一张图像。我认为每当执行代码时，都会创建一个新的 rtf 文档。

```
public class InsertToWord {

    com.lowagie.text.Document doc = null;
    FileOutputStream evidenceDocument;
    String fileName = "evidenceDocument.rtf";
    settings obj = null;

    InsertToWord() {
        obj = new settings();
        doc = new com.lowagie.text.Document();

    }

    public void insertImage(File saveLocation) {

        try {
            evidenceDocument = new FileOutputStream(obj.getFileLocation() + fileName);
            RtfWriter2.getInstance(doc, evidenceDocument);
            doc.open();
            com.lowagie.text.Image image = com.lowagie.text.Image.getInstance(saveLocation.toString());
            image.scaleAbsolute(400, 300);
            doc.add(image);
            doc.close();
        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:04:55.580

在您的 insertImage() 方法中，您确实是在创建一个新文件并覆盖旧文件。

此行正在创建新文件：

```
evidenceDocument = new FileOutputStream(obj.getFileLocation()+fileName); 
```

您可以将 FileOutputStream 作为参数传递给该方法，然后一起删除该行：

```
public void insertImage( FileOutputStream evidenceDocument , File saveLocation ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:05:16.040

这段代码是我用来将图像添加到 RTF 格式的代码，它工作正常：

```
public void actionPerformed(ActionEvent arg0) {

        JFileChooser fileChooser = new JFileChooser();
        int option = fileChooser.showOpenDialog(null);
        File file = fileChooser.getSelectedFile();

        if (option == JFileChooser.APPROVE_OPTION) {

            try {

                BufferedImage image = ImageIO.read(file);
                image = Scalr.resize(image, 200);
                document = (StyledDocument) textPane.getDocument();
                javax.swing.text.Style style = document.addStyle("StyleName", null);
                StyleConstants.setIcon(style, new ImageIcon(image));
                document.insertString(document.getLength(), "ignored text", style);

            }

            catch (Exception e) {
                e.printStackTrace();
            }

        }

        if (option == JFileChooser.CANCEL_OPTION) {

            fileChooser.setVisible(false);

        }

    }// End of Method 
```

textPane 变量是一个 JTextPane。

# php - 谷歌结帐付款后数据库更新

> ID：10459317
> 
> 赞同：0
> 
> 时间：2012-05-05T06:03:10.033
> 
> 标签：php, payment, google-checkout, sql-update

我是 php 的新开发人员。在一个网站上，我需要实现“谷歌结帐”付款方式。我的客户给了一个脚本`src`。我将该脚本添加到我的网站中。我有一个谷歌结帐页面。

但我不知道如何自定义该页面的样式以及如何更新我的数据库，如果买家使用谷歌结帐支付金额。有没有像 PayPal 这样的选择`notify_url`？如果是，如何设置这样的网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:12:51.623

您可以使用 Checkout Notification API 获取订单状态通知。从下面的文档开始：

[http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=134463](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=134463)

然后阅读完整文档以了解详细信息：

[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API)

# javascript - JSCallback 服务器关闭：停止回调

> ID：10459321
> 
> 赞同：6
> 
> 时间：2012-05-05T06:03:30.787
> 
> 标签：javascript, android, cordova, callback

我正在android中使用phonegap制作应用程序。我正在使用科尔多瓦 1.6.1

当我从我的 javascript 回调函数调用 html 文件时出现此错误：

> JSCallback 服务器关闭：停止回调

我正在使用调用 html 文件

```
navigator.app.loadUrl("file:///android_asset/www/html/sync.html"); 
```

我也尝试使用 html 调用，`window.location = "../html/sync.html";`但它给了我同样的错误..我拥有在清单中使用互联网所需的所有权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:59:35.563

我得到了解决方案：

> 我在我的 html 页面中创建了内联脚本，在该脚本中我调用了第一个登录方法，然后我调用了 html 调用行。通过这种方式，我实现了成功回调并重定向到 html 页面。

这是代码：

```
function  loginfunc()
{
    loginV();

    console.log("before loadUrl:");
    if(sessionStorage.getItem('UserId') != -1)
    {
        window.location.replace('../html/sync.html');
    }
} 
```

# java - 后台运行的Java程序

> ID：10459323
> 
> 赞同：9
> 
> 时间：2012-05-05T06:03:40.017
> 
> 标签：java, background, startup

我有一个简单的 java 程序，它只是从数据库中读取并根据特定条件修改数据库内容的一段代码。现在，我想要的是该程序应该在启动时自动启动并在后台静默运行，除非有人从任务管理器中将其杀死。我以前从来没有做过这样的事情，也不知道该怎么做。有人可以帮我解决这个问题吗？谢谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T06:39:19.730

请按照以下步骤完成工作：（假设您使用的是 windows 并安装了 jre）

*   首先编译你的java程序并将类文件放在一个位置。
*   现在创建一个 bat 文件并放入`java LOCATION TO THAT CLASS FILE/MyProgram`其中。
*   将您的 bat 文件放入启动程序中
*   重新启动系统，您将让您的程序在后台运行..！希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:45:57.883

这里有两个问题

1.  如何将此程序添加到启动

    *   Windows - [在 Windows 启动时运行 Java 应用程序](https://stackoverflow.com/questions/5953525/run-java-application-at-windows-startup)
    *   Linux - [Java 应用程序的 Linux 启动脚本](https://stackoverflow.com/questions/7577620/linux-start-up-script-for-java-application)
2.  将程序作为守护进程运行（后台进程）

    *   最简单的方法是使用while循环并在while循环中休眠所需的时间间隔。然后执行数据库操作。

同样对于 Windows，您可以查看此 JSL [http://www.roeschter.com/](http://www.roeschter.com/)

谢谢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T06:24:24.787

首先创建您的 jar bash，然后将其添加到您的 crontab 任务列表中。

# python - 连接元组

> ID：10459324
> 
> 赞同：37
> 
> 时间：2012-05-05T06:04:04.970
> 
> 标签：python

假设我有一个列表：

```
a=[1,2,3,4,5] 
```

现在我想把这个列表转换成一个元组。我认为编码这样的事情会做：

```
state=()  
for i in a:  
    state=state+i 
```

它给出了一个错误。很明显，为什么我*试图*将一个整数与一个元组连接起来。

但是元组没有与列表相同的功能，例如插入或追加。那么如何通过循环添加元素呢？字典也是如此，我觉得好像我缺少了一个链接。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-05T06:07:53.380

~~元组是不可变的，您根本无法附加、删除或编辑它们。如果你想把一个列表变成一个元组，你可以使用 tuple 函数：~~

 ~~```
tuple(a) 
```~~ 

如果出于某种原因，您觉得需要追加到元组（您永远不应该这样做），您可以随时将其转回列表，追加，然后将其转回元组：

```
tuple(list(a)+b) 
```

 ~~不断获得投票，这意味着人们不断看到它，所以是时候更新和删除错误信息了。

可以将元素添加到元组（有点）。说这话很傻。元组仍然是不可变的，您无法编辑它们，但是您可以通过将多个元组放在一起来创建看起来像您附加的新元组。`tuple(list(a)+b)`很愚蠢，不要那样做。只是做`tuple1 + tuple2`，因为 Python 不烂。对于提供的代码，您需要：

```
state = ()  
for i in a:  
    state += (i,) 
```

保罗对这个答案的回应比这个答案更正确。

现在我可以停止为此感到难过。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-18T15:21:50.740

```
state=()  
for i in a:  
    state=state+(i,) 
```

上面的代码将在每次新的`tuple (i,)`元组状态时连接起来。

我正在使用 python 2.7.9。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-05T06:06:30.773

```
>>> a = [1,2,3,4,5]
>>> tuple(a)
(1, 2, 3, 4, 5) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-04T14:35:49.943

只是一种 precis:`(2,)`实际上是一样的，`tuple([2])`所以你可以写：

```
>>>(2,) + tuple([2,3])
(2, 2, 3)
>>> tuple([2]) + (2,3)
(2, 2, 3)
>>> tuple([2]) + tuple([2,3])
(2, 2, 3) 
```

python确实很柔顺

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T06:08:31.957

元组在 python 中是不可变的。

所以在你用 tuple(...) 初始化它之后，它就不能被修改了。

```
a = [1,2,3,4,5]
tuple(a) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-21T17:03:53.880

如果您想要一个通用的解决方案，只需建立一个新列表，然后在完成后将其转换为元组。

您可以使用 Josia 和 byron 的答案中提供的解决方案逐步构建您的元组，但这将为每次迭代创建一个新元组，如果您要转换的列表很大，则效率非常低，因为解释器必须复制在每次迭代中，从旧元组到新元组的所有元素都需要 O(n^2) 操作。

列表不会发生这种情况，因为 python 实际上会分配比仅存储列表元素所需的*更多*内存，以防万一您追加。好吧，至少在内存用完并且python必须分配更多内存之前没有必要。然后它将分配一大块内存并将所有元素移动到新位置，但是这块新内存将再次大于仅存储列表元素所需的内存。以这种方式建立一个列表只需要 O(n) 操作，因此是首选。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T04:20:55.887

在构建具有灵活张量形状的 C/NN 时遇到类似问题后，我想我为这个问题构建了最通用的解决方案：

```
def cat(*args):
  x = ()
  for a in args:
    if type(a) is tuple:
      x+=a
    elif type(a) in {list,numpy.ndarray}:
      x+=tuple(a)
    else:
      x+=(a,)
  return tuple(x) 
```

演示：

```
In [0]: cat(1,(1,2),(3,4),[1,2],2)
Out[0]: (1, 1, 2, 3, 4, 1, 2) 
```

不知道这是否是坏蟒蛇，我是新人:)~~

# android - 为 Cotex A 8 编译 Android 应用程序

> ID：10459327
> 
> 赞同：0
> 
> 时间：2012-05-05T06:04:22.517
> 
> 标签：android, eclipse, beagleboard, cortex-a8

我已经在 Beagleboard XM 上成功安装了 Android Gingerbread 2.3.4，它具有 Cortex A-8。如何在 Eclipse 中选择 Cortex -A-8 作为目标进行交叉编译？

谢谢并恭祝安康，

赫什舍姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:25:28.967

**您可以通过在Application.mk**文件中添加一行来指定要**在 ndk 项目**中支持哪些 ABI 。如果源代码树的那部分在 Eclipse 的项目视图中，您应该能够从 Eclipse 编辑文件，否则您可以使用您喜欢的编辑器。

 **[http://developer.android.com/sdk/ndk/index.html](http://developer.android.com/sdk/ndk/index.html)给出了如何包含 mips 支持的示例：

```
APP_ABI := armeabi armeabi-v7a mips 
```

对于 Cortex A-8，您基本上只需要找出适当的 ABI 名称。**

# mysql - 如何优化 MySQL ORDER BY + 巨大的 LIMIT Offsets

> ID：10459328
> 
> 赞同：2
> 
> 时间：2012-05-05T06:04:47.357
> 
> 标签：mysql, sql, optimization

桌子：

```
CREATE TABLE `test` (
  `uid` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `rating` smallint(5) unsigned NOT NULL DEFAULT '100',
  PRIMARY KEY (`uid`),
  KEY `rating` (`rating`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

此查询运行得足够快（0.015 秒）：

```
SELECT uid FROM test ORDER BY rating DESC LIMIT 0,100 
```

但是由于 LIMIT 偏移量很大，它的运行速度非常慢（2.215 秒）：

```
SELECT uid FROM test ORDER BY rating DESC LIMIT 10000,100 
```

**我怎样才能摆脱巨大的 LIMIT 偏移量？！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T06:10:52.730

使用`LIMIT 10000, 100`MySQL 必须扫描 10100 条记录。如果你能记住你在窗口中的位置，它可能会更好：

```
SELECT uid
FROM test
WHERE rating > :last_rating
ORDER BY rating DESC LIMIT 0,100 
```

在这种情况下 :last_rating 是上一个查询的最后一个评级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:11:03.980

提高性能的最简单方法是 ORDER BY 主键。

由于您不能真正使用该`rating`列做到这一点，因此您可以作弊。

创建此表：

```
CREATE TABLE `test_ranks` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

然后将以下内容放入每隔 X 时间运行的 cron 脚本中（1 分钟、5 分钟......基本上是更新速度和运行时间之间的一个很好的折衷方案）：

```
CREATE TEMPORARY TABLE `_tmp_test_ranks` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `_tmp_test_ranks` (`uid`) VALUES (SELECT `uid` FROM `test` ORDER BY `rating` DESC);

TRUNCATE `test_ranks`;

INSERT INTO `test_ranks` SELECT * from `_tmp_test_ranks`;

DROP TABLE `_tmp_test_ranks`; 
```

现在，您可以运行得更快，而不是运行缓慢的选择：

```
SELECT `uid` FROM `test_ranks` WHERE `id` BETWEEN 10000 AND 10100 ORDER BY `id` ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:09:23.770

据我所知，在做了一些挖掘之后，你真的没有办法在数据库的配置中设置最大限制或类似的东西。这将取决于实现数据库的应用程序的开发人员，以确保在应用程序的逻辑中建立最大值。

# c# - 使用c#删除DataTable中的空行和列

> ID：10459331
> 
> 赞同：-1
> 
> 时间：2012-05-05T06:05:16.433
> 
> 标签：c#, c#-4.0, datatable

我有数据集。它里面的 DataTable 包含空行和列。我必须删除这些都是。让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:23:22.357

```
using (Dataset mydatasetcopy = new Dataset())
{
    mydatasetcopy.Tables.AddRange(mydataset.Tables.Cast<DataTable>().Where(dt => 
    dt.Rows.Count > 0).ToArray());

    mydataset = mydatasetcopy
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:17:07.580

我想你想要这个

```
for (int h = 0; h < Ds.Tables[0].Rows.Count; h++)
{
    if(Ds.Tables[0].Rows[h].IsNull(0)==true)
    {
        Ds.Tables[0].Rows[h].Delete();
    }
} 
```

**更新**

或这个

```
String valuesarr = String.Empty;
for (int i = 0; i < dt.Rows.Count - 1; i++)
{
    List<object> lst = dt.Rows[i].ItemArray.ToList();
    foreach (Object s in lst)
    {
        valuesarr += s.ToString();
    }

    if (String.IsNullOrEmpty(valuesarr))  
        dt.Rows.RemoveAt(i);
 } 
```

# c - 如何制作删除节点功能？

> ID：10459332
> 
> 赞同：-1
> 
> 时间：2012-05-05T06:05:21.333
> 
> 标签：c

我一直在创建一个 node_add 函数，对我来说可以正常工作，但是我很难创建一个 node_delete 函数。

这是我写的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdlib.h>
typedef struct friend // The struct
{
   char *name; 
   int age;
   char gender; 
   struct friend* next; // A pointer that points to the next node in the linked list
}friend;
void node_delete(); // The deleting node function
friend* head; // Definging the head of the linked list
void node_delete() // Deleting a node
{
 char name[256];
 printf ("Please enter the friend's name you want to delete: \n");
 fgets (name, 256, stdin);
 fgets (name, 256, stdin); // Getting the name of the person that the user wants to delete
 while (head -> next != NULL) // As long the node isnt the last one
 {
       if (0 == (strcmp(head -> name, name))) // If the name that the user entered matchs a name in the linked list,
       { // It'll skip it
             head -> next = head -> next -> next; // Deletes a node from the linked list
       }
       head -> next; // Going to the next node
}
 free(head); // Freeing the deleted node
} 
```

我只有删除节点功能有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:16:25.093

```
if (head) {
  if (strcmp(head->name, name) == 0) {
    to_free = head;
    head = head->next;
    free(to_free);
  } else {
    list = head;
    while (list->next) {
      if (strcmp(list->next->name, name) == 0) {
        to_free = list->next;
        list->next = list->next->next;
        free(to_free);
        break; // if only one
      }
      list = list->next;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:05:43.663

```
struct friend **tmp = &head;
while (*tmp != NULL && (0 != (strcmp((*tmp)->name, name)))) {
  tmp = &((*tmp)->next);
}
if (*tmp) {
  struct friend *freeme = (*tmp);
  (*tmp) = (*tmp)->next;
  free(freeme);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:13:56.300

仔细看看这个。

```
while (head -> next != NULL) // As long the node isnt the last one
 {
       if (0 == (strcmp(head -> name, name))) // If the name that the user entered matchs a name in the linked list,
       { // It'll skip it
             head -> next = head -> next -> next; // Deletes a node from the linked list
       }
       head -> next; // Going to the next node
} 
```

它实际上并没有遍历链表

```
 head -> next; // Going to the next node 
```

你可能应该让 head = head -> next

此外，如果“head”是唯一保持在链表前面的东西，那么设置 head = head->next 将导致您丢失链表的一部分。我建议创建一个临时指针，以便 temp = head. 然后遍历临时指针。

# jquery - 使用 jQuery 进行简单验证

> ID：10459334
> 
> 赞同：1
> 
> 时间：2012-05-05T06:06:00.707
> 
> 标签：jquery

我有两个文本框，正在尝试验证

```
var max = $("#txtMaximumMark").val()
var min = $("#txtMinimumMark").val();

var valid = max > min; 
```

如果我给出 10 作为最小值和 100 作为最大值，它表明给定值是有效的，但是如果我给出 40 作为最小值和 100 作为最大值，则有效返回 false，这里发生了什么，为什么它返回 false，任何人都可以帮助我这里...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:10:47.323

比较两个可以转换为数字的数字

```
max = parseInt(max);
min = parseInt(min); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:09:09.343

因为比较`strings`。Using`.val()`返回字符串，因此当您比较它们时，它会将它们作为字符串进行比较。

在字符串中，4 高于 1，因此 40 高于 100（比如`a`高于`baaa`）。

要正确进行比较，请使用`parseInt`将字符串转换为整数：

```
var valid = parseInt( max, 10 ) > parseInt( min, 10 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T06:10:54.397

如果 String 的 min 和 max 实例，则 40 > 100。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:07:56.013

字符串不是整数。首先解析值：

```
var valid = parseInt( max, 10 ) > parseInt( min, 10 ); 
```

“40”大于“100”。但是当这些被转换为整数时，情况就不再如此了。

# ffmpeg - 将连续 RTSP 流保存到 5-10 分钟长的 mp4 文件

> ID：10459338
> 
> 赞同：24
> 
> 时间：2012-05-05T06:06:35.273
> 
> 标签：ffmpeg, streaming, mp4, rtsp, vlc

如何将流（协议 rtsp、编解码器 h264）保存在文件（容器 mp4）中？即在输入源源不断的流（带闭路电视摄像机）时，输出mp4格式的文件大小为5-10分钟的录制时间。

操作系统：debian、ubuntu 软件：vlc、ffmpeg (avconv)

目前使用此方案：

```
cvlc rtsp://admin:admin@10.1.1.1:554/ch1-s1 --sout=file/ts:stream.ts
ffmpeg -i stream.ts -vcodec copy -f mp4 stream.mp4 
```

但它不能连续录制视频（在重新启动之间 vlc 会丢失大约 10 秒的实时视频）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-18T12:35:04.280

请参阅有关服务器故障的[此问题](https://serverfault.com/questions/386261/save-the-stream-to-mp4-files)和答案。简而言之，切换工具。avconv 会做你想做的事。（ffmpeg 已经变成了 avconv。）

您正在寻找的功能称为分段。你的命令行看起来像这样：

`avconv -i rtsp://10.2.2.19/live/ch01_0 -c copy -map 0 -f segment -segment_time 300 -segment_format mp4 "capture-%03d.mp4"`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-23T23:21:38.083

Alexander Garden 解决方案适用于`ffmpep`使用以下版本。替换`avconv`为`ffmpeg`。

> ./ffmpeg -i rtsp://10.2.2.19/live/ch01_0 -c copy -map 0 -f segment -segment_time 300 -segment_format mp4 "capture-%03d.mp4"

由于 FFmpeg 对版本​​的混淆、ubuntu 的分裂和快速的开发，我包含了这个标题。

> ffmpeg 版本 N-80023-gd55568d 版权所有 (c) 2000-2016 FFmpeg 开发人员使用 gcc 4.8 (Ubuntu 4.8.4-2ubuntu1~14.04.1) 构建配置：--prefix=/home/rhinchley/q10/ffmpeg_build --pkg -config-flags=--static --extra-cflags=-I/home/rhinchley/q10/ffmpeg_build/include --extra-ldflags=-L/home/rhinchley/q10/ffmpeg_build/lib --bindir=/home /rhinchley/q10/bin --enable-gpl --enable-libass --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis -- enable-libvpx --enable-libx264 --enable-libx265 --enable-nonfree libavutil 55\. 24.100 / 55\. 24.100 libavcodec 57\. 42.100 / 57\. 42.100 libavformat 57\. 36.100 / 57\. 36.100 libavdevice 57\. 0.101 / 57\. libavfilter 6\. 45.100 / 6\. 45.100 libswscale 4\. 1.100 / 4\. 1.100 libswresample 2.0.101 / 2\. 0.101 libpostproc 54\. 0.100 / 54\. 0.100

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-12T11:51:47.650

**团队合作：**拆分视频源并让两个进程交替记录时间范围。您需要测试启动时间的可变性，以及它的可变性。您可能希望将流程优先级设置为实时以减少开始时间差异。会有一些重叠，但从我的推断来看，这听起来可能适合您的应用程序。例子：

```
p1: sRRRRRRRRRwwwwwwwwsRRRRRRRRRwwwwwwwwsRRRRRRRRR...
p2: wwwwwwwwwsRRRRRRRRRwwwwwwwwsRRRRRRRRRwwwwwwwww...

                    time -->

s: startup
R: running
w: wait 
```

# grails - Grails，Field 的域类默认值

> ID：10459346
> 
> 赞同：1
> 
> 时间：2012-05-05T06:07:50.253
> 
> 标签：grails, grails-domain-class

我想在更新任何行时更新日期字段。意味着每当我更新特定字段时，都需要自动更改日期。

我怎样才能在 grails 域类中得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T06:55:44.113

Grails 可以为您做到这一点！

转到[http://grails.org/doc/latest/guide/GORM.html](http://grails.org/doc/latest/guide/GORM.html)并搜索“自动时间戳”

支持 2 个字段：
*“通过定义`lastUpdated`和`dateCreated`属性，GORM 将自动为您更新这些字段。”*

# wpf - 设置用户控件多行内的文本块文本

> ID：10459351
> 
> 赞同：0
> 
> 时间：2012-05-05T06:08:23.390
> 
> 标签：wpf, wpf-controls, textblock

我有一个用户控件，其中包含一个带有自动换行的文本块。

```
<UserControl>
  <StackPanel>
    <TextBlock MaxWidth="500"
               Margin="2"
               Text="{Binding HintHeader}"
               TextWrapping="Wrap" />

    <TextBlock MaxWidth="500"
               Margin="2"
               Text="{Binding HintBody}"
               TextWrapping="Wrap" />
  </StackPanel>
</UserControl> 
```

Hintbody 是用户控件的依赖属性。我可以在其他地方很好地使用控件：

```
<cntrls:HintButton x:Name="hint"
                   Width="24"
                   Height="24"
                   Margin="85,68,0,0"
                   HintHeader="This is an header"
                   HintBody="This is an hint"/> 
```

一切正常。但我想为文本块（HintBody）设置多行文本。使用后面代码中的“\r\n”设置 Hintbody 属性可以正常工作。但我想从 XAML 中设置相同的值。就像是。

```
<cntrls:HintButton x:Name="hint"
                       Width="24"
                       Height="24"
                       Margin="85,68,0,0"
                       HintHeader="Hint Header" >
      <cntrls:HintButton.HintBody>
        This is a multiline hint body.
        <LineBreak />
        This is a multiline hint body.
      </cntrls:HintButton.HintBody>      
    </cntrls:HintButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:48:24.470

我建议在 HintBody 的用户控件中使用 ContentPresenter 而不是 TextBlock。这将使您在现在和将来可以做的事情上有更大的灵活性。

```
<UserControl>
  <StackPanel>
    <TextBlock MaxWidth="500"
           Margin="2"
           Text="{Binding HintHeader}"
           TextWrapping="Wrap" />

    <ContentPresenter MaxWidth="500"
           Margin="2"
           Text="{Binding HintBody}"
           TextWrapping="Wrap" />
  </StackPanel>
</UserControl> 
```

您需要将 HintBody 属性的类型更改为对象。然后你可以这样做：

```
<cntrls:HintButton x:Name="hint"
                   Width="24"
                   Height="24"
                   Margin="85,68,0,0"
                   HintHeader="Hint Header" >
  <cntrls:HintButton.HintBody>
    <TextBlock>
        <Run Text="This is a line."/>
        <LineBreak/>
        <Run Text="This is another line"/>
    </TextBlock>     
  </cntrls:HintButton.HintBody> 
</cntrls:HintButton> 
```

# java - android SDK中的报警管理器

> ID：10459353
> 
> 赞同：0
> 
> 时间：2012-05-05T06:08:34.013
> 
> 标签：java, android

```
private static final int HELLO_ID = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Date dat  = new Date();//initializes to now
        Calendar cal_alarm = Calendar.getInstance();
        Calendar cal_now = Calendar.getInstance();
        cal_now.setTime(dat);
        cal_alarm.setTime(dat);
        cal_alarm.set(Calendar.MONTH,3);
        cal_alarm.set(Calendar.YEAR,2012);
        cal_alarm.set(Calendar.DAY_OF_MONTH,4);
        cal_alarm.set(Calendar.HOUR_OF_DAY,19);//set the alarm time
        cal_alarm.set(Calendar.MINUTE, 15);
        cal_alarm.set(Calendar.SECOND,0);

        if(cal_alarm.before(cal_now)){//if its in the past increment
            cal_alarm.add(Calendar.DATE,1);
        }

        Intent intent = new Intent(AlarmManagerTestActivity.this,
                AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                AlarmManagerTestActivity.this, 0, intent, 0);
        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

        alarmManager.set(AlarmManager.RTC_WAKEUP, cal_alarm.getTimeInMillis(), pendingIntent);  
    } 
```

您好，我想在特定日期设置警报和通知，我正在使用此处给出的代码，但我无法在特定日期设置警报。请让我知道这里的错误是什么。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:17:02.453

设置报警代码

```
Intent intent = new Intent(cont, AlarmReceiverActivity.class);
        intent.putExtra("id",getid);
        PendingIntent penintent = PendingIntent.getBroadcast(cont, getid,
                intent, 0);
        AlarmManager alm = (AlarmManager) cont.getSystemService(ALARM_SERVICE);
        alm.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), penintent); 
```

对您的代码进行一些更改

```
public class AlarmReceiverActivity extends BroadcastReceiver {
    private static final int MODE_WORLD_READABLE = 0;
    private NotificationManager nm;
    private Database_creat mDbHelper;
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String descr = null;

        int id = intent.getIntExtra("id",0);

         nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

              CharSequence from = "To Do List";
              Intent disintent = new Intent(context,Todo_display_win.class);

              disintent.putExtra("id",sub_id);
              Log.v("send to display Id", sub_id);
              CharSequence message = title;
              Notification notif = new Notification(R.drawable.notes,
                        "To do List", System.currentTimeMillis());
              notif.flags=Notification.FLAG_AUTO_CANCEL;

              PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                      disintent,Notification.FLAG_AUTO_CANCEL);

              notif.setLatestEventInfo(context, from, message, contentIntent);
              nm.notify(1, notif);
              //nm.cancel(1);
              //notif.defaults |= Notification.FLAG_AUTO_CANCEL;

    }

    } 
```

# multithreading - MATLAB：多线程和多核之间的区别

> ID：10459354
> 
> 赞同：3
> 
> 时间：2012-05-05T06:08:43.083
> 
> 标签：multithreading, matlab

我有一个 i7-M620 处理器，每个内核有 2 个物理内核和 2 个线程（多线程 CPU）（总共 4 个线程）。当我使用 MATLAB Parallel Computing Toolbox 时，我只能打开 2 个池而不是 4 个。这是代码：

```
matlabpool(2)
parfor i = 1:20
    Test(i) = i^2;
end
matlabpool close 
```

*   有人可以解释为什么吗？
*   我在这里做多线程还是多核计算？
*   是否可以同时使用 MATLAB？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:42:58.387

我通过编辑并行计算的“本地”配置解决了这个问题（我的核心 i5 有 2 个核心和 4 个线程）：

1.  去`Parallel->Manage Cluster Profiles`
2.  根据您的 Matlab 版本，您需要`Validate`在`local`更改任何内容之前查看配置文件。
3.  单击`edit`并更改`NumWorkers`变量以满足您的需要。

然后你可以`matlabpool`这样开始：

```
matlabpool local 
```

请注意，我从未使用`parfor`. Matlab 的开销总是大于收益。我要说的是：首先对您的代码进行基准测试，然后确定`parfor`（或其他并行的东西）是否适合您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-23T16:15:18.257

对于并行配置，这是在请求比默认值更多的工作人员时引发的错误：

> 本地集群的默认值`NumWorkers`是本地机器上的核心数。要在比这更多的工作人员上运行通信作业，请增加集群的 NumWorkers 属性的值。

您可以通过修改`'local'`配置文件集群属性来解决这个问题，从而有效地控制默认数量。来自[PCT R2013a 文档](http://www.mathworks.com/help/distcomp/saveprofile.html)：

```
myCluster = parcluster('local'); 
myCluster.NumWorkers = 4; % 'Modified' property now TRUE 
saveProfile(myCluster);   % 'local' profile now updated,
                          % 'Modified' property now FALSE 
```

然后`matlabpool open`会给你（默认）数字。工人，而`matlabpool(n)`会给你`n`工人，直到上面设置的最大值/默认值（`n<=4`）。您可以通过以下方式检查当前开放工作人员的数量：

```
matlabpool('size') 
```

或从桌面右下角的[指示器](http://www.mathworks.com/help/distcomp/matlabpool.html)![在此处输入图像描述](../Images/c94caf98156b90b282e6ffc769b43b68.png)图标，例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:00:50.680

我的桌面站有一个 i7-2600 CPU，操作系统是最新的*Linux Mint*。我测试了MATLAB 2012b的并行计算，默认NumWorker为4（i7-2600的核心数），我修改本地集群配置文件为NumWorker值的8，然后和workers设置对比是 4 和 8（就像@rubenvb 发布的那样）。

结果表明，在串行模式下，耗时约为*429*秒，而在并行模式下（matlabpool open 4） ，8个worker耗时分别为*254*秒和*218秒，分别提升了**40.79%*和*49.18%*， 分别。

我进一步仔细研究了我的代码，发现并行体内部也实现了MATLAB矢量化优化，即这种提升需要额外的CPU资源，因此对于8情况下的NumWorkers（即启用超线程），它没有足够的空闲CPU资源来促进向量化，在某种程度上是CPU资源竞争，降低了并行效率。这也是当 NumWorkers 为 4 时几乎具有同等提升效率的原因。

结论是 MATLAB 中的并行计算很有帮助，实现起来很简单，但应该谨慎使用，这都是我个人的看法。

# android - java.lang.RuntimeException：eglSwapBuffers 失败：EGL_SUCCESS

> ID：10459357
> 
> 赞同：23
> 
> 时间：2012-05-05T06:09:16.013
> 
> 标签：android, opengl-es

我在 Google Play 商店中有一个 OpenGL 应用程序，我每天都遇到异常：

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

问题是，在我所有的智能手机上，我都无法重现此错误。我已经联系了谷歌以获取任何设备信息，但他们没有（他们说）。异常中的平台信息设置为“其他”。

我在网上发现了一些提示，表明此错误可能来自三星 Galaxy Y 设备，并且我发现了一些建议，包括：

```
android:configChanges="orientation|screenSize" 
```

在 Android 清单文件中，但这不起作用！

当然，我已经为我的 GL 表面实现了 onPause 和 onResume 处理，如果没有，则会产生其他 eglSwapBuffer 问题。

有没有人解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T15:47:58.540

*没办法，只能评论*

由于某些原因，我无法评论以前的帖子，但我有一些观察可能会有所帮助。

我们有同样的问题，正在努力寻找解决方案……我们大大减小了纹理的大小，现在没有一个大于 1024x900（不要忘记字体）。但是我们仍然需要几个，问题仍然存在。我们已将有问题的设备定位到以下设备：

```
Samsung Galaxy Y (GT-S5360 GT-S5360B GT-S5360L GT-S5363 GT-S5368 GT-S5369 SCH-I509 SCH-i509)
Samsung Galaxy Y Duos (GT-S6102 GT-S6102B GT-S6102E ivory)
Samsung Galaxy Ace (GT-S5830 GT-S5830B GT-S5830C GT-S5830D GT-S5830G GT-S5830L GT-S5830M GT-S5830T GT-S5830i GT-S5838 GT-S5839i GT-S6358 SCH-I619 SHW-M240S)
Samsung Galaxy Ace Duos (GT-S6802 GT-S6352 GT-S6802B SCH-I579 SCH-I589 SCH-i579 SCH-i589)
Samsung Galaxy Mini (GT-S5570 GT-S5570B GT-S5570I GT-S5570L GT-S5578 SGH-T499 SGH-T499V SGH-T499Y)
Samsung Galaxy Pocket (GT-S5300 GT-S5300B GT-S5302 GT-S5302B) 
```

此外，错误以两种不同的行号报告：

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
    at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1099)
    at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1057)
    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1389)
    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1138)

java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
    at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
    at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

我不知道我在这里是否有用，但如果它有帮助......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T14:54:48.257

一开始您的内存可能不足以加载所有数据。我在使用 AndEngine 制作游戏时也遇到了这个问题，太多的 Atlas 尺寸大于 1024x1024 ，数据可能会被破坏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-05T08:33:16.500

*没有解决办法，只有观察。*

调用[`eglSwapBuffers`返回 false](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/opengl/GLSurfaceView.java/)。以下错误处理无法处理没有错误的情况——可能它没有被 EGL 设置；*或者*返回值错误。

我没有找到匹配的来源。这些设备要么运行 patched `GLSurfaceView`s（堆栈跟踪搜索没有找到任何东西......）要么使用中间版本（好吧，我不知道 4.0.2 是否是官方的，grepcode 仅包含 4.0.1 和 4.0 .3); *或者*我错过了一些东西。

您必须追踪哪些确切的设备/android 版本遇到了这个问题。然后，您可以尝试通过自己提供修补程序`GLSurfaceView`或使用不同的 EGL 配置来解决此问题——前提是问题可以完全解决。[有](http://code.google.com/p/android/issues/detail?id=25884&q=opengl&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)几个星期未处理的错误；想知道负责任的团队面临哪些更大的问题......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T16:50:45.113

我最终实现的解决方案是添加一个全局异常处理程序来捕获这个错误（因为它被抛出到我可以控制的任何线程之外）。

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {...}) 
```

所以至少应用程序不会崩溃，我可以发布一条消息来解释这种情况。

# php - 在 PHP 中显示 Javascript 代码

> ID：10459361
> 
> 赞同：0
> 
> 时间：2012-05-05T06:09:51.400
> 
> 标签：php, javascript

我在 PHP 中显示 JS 代码时遇到问题 我的代码是

```
<?php
    if($result)
    {
        echo '<script language="javascript">';
        echo "$('#Err').hide()</script>";
    }
    else
    {
        echo '<script language="javascript">';
        echo "$('#Err').show()</script>";
    }
?> 
```

我正在使用 XAMPP 运行代码当我运行此代码时它不会显示我不知道是什么问题请告诉我谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:12:33.437

您必须`$`按如下方式转义该标志：

```
<?php
    if($result)
    {
        echo '<script language="javascript">';
        echo "\$('#Err').hide()</script>";
    }
    else
    {
        echo '<script language="javascript">';
        echo "\$('#Err').show()</script>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:12:06.207

使用单引号，您的双引号将 $('#Err') 呈现为 PHP 变量

```
<?php
    if($result)
    {
        echo '<script language="javascript">';
        echo '$(\'#Err\').hide()</script>';
    }
    else
    {
        echo '<script language="javascript">';
        echo '$(\'#Err\').show()</script>';
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:17:07.413

```
<?php
    if($result)
    {
        echo '<script type="text/javascript" language="javascript">
             $("#Err").hide()</script>';
    }
    else
    {
        echo '<script type="text/javascript" language="javascript">
              $("#Err").show()</script>';
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:18:43.213

这种方式更容易理解并且使用更少的处理：

```
<!-- this is your php script with your html layout -->

<script type="text/javascript">
    <?php if($result === true): ?>
        $("#Err").hide();
    <?php else: ?>
        $("#Err").show();
    <?php endif; ?>
</script> 
```

尽量不要使用回声。这是 PHP 的一个好习惯。如果你真的想提高你的 php 生产力，我强烈推荐[Codeigniter 框架](http://www.codeigniter.com)。试一试 =)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T08:15:24.290

您需要进行一些调试，查看生成的 HTML 的源代码：

```
<?php
    // debug code:
    var_dump($result); die('This place has been reached');

    // normal code:
    printf("<script language=\"javascript\">\n\$('#Err').%s()\n</script>"
           , $result ? 'hide' : 'show');
?> 
```

When you execute this, things will go wrong, but you can see what `$result` contains so to debug your script. If it does not display that inside the HTML source, it means that your code is not executed at all and your problem lies somewhere else.

# ocaml - OCaml 中的副作用和顶级表达式

> ID：10459363
> 
> 赞同：5
> 
> 时间：2012-05-05T06:10:10.820
> 
> 标签：ocaml, side-effects

我遇到了ocaml的麻烦。

我想创建一个函数，每次调用它时都会增加我的计数器，并将我的 vargen 字符串与计数器编号连接起来并返回这个新字符串。

我没有成功的做法是：

```
let (counter : int ref) = ref 0;;
let (vargen : string) = "_t";;
let tmp = incr counter;ref (vargen ^ string_of_int !counter);;
Printf.printf "%s\n" !tmp;;
Printf.printf "%s\n" !tmp;;
Printf.printf "%s\n" !tmp;;
Printf.printf "%s\n" !tmp;; 
```

但我的输出总是：

```
_t1
_t1
_t1
_t1 
```

我的输出应该是：

```
 _t0
    _t1
    _t2
    _t3 
```

有什么想法可以解决我的问题吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T07:50:52.037

当您编写`let tmp = ref foo`时，表达式`foo`会被计算一次，以产生一个存储在引用中的值。访问引用会返回此值，而无需重新计算原始表达式。

引发重新评估的方法是改用函数：如果你写一个函数`(fun () -> foo)`，这是一个值：它按原样返回，传递给函数，存储在引用中。每次将参数应用于此值时，`foo`都会计算表达式。

克莱门特的解决方案很好。的想法

```
let counter =
  let count = ref (-1) in
  fun () -> incr count; !count 
```

是指分配一次，但每次`fun () -> incr count; !count`调用函数时都会递增。对函数进行本地引用可以避免一些全局变量的缺陷。您可以将其视为函数的“静态变量” `counter`，只是它是 OCaml 范围和评估规则的自然结果，而不是附加的、特定于函数的概念。

你甚至可以编写一个更通用的`vargen`生成器，每次调用它时都会创建新的、独立的计数器：

```
let make_vargen prefix =
   let count = ref (-1) in
   fun () ->
     incr count;
     prefix ^ string_of_int !count

let fresh_t = make_vargen "t"
let () = print_endline (fresh_t ())  (* t0 *)
let () = print_endline (fresh_t ())  (* t1 *)
let fresh_u = make_vargen "u"
let () = print_endline (fresh_u ())  (* u0 *)
let () = print_endline (fresh_t ())  (* t2 *)
let () = print_endline (fresh_u ())  (* u1 *) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T06:42:44.557

因为`tmp`是一个值，所以执行一次。将其更改为函数应该使计数器在每次`tmp`调用时增加。

此外，为简单起见，您可以返回`string`而不是`string ref`：

```
let counter: int ref = ref (-1);;
let vargen: string = "_t";;

// tmp now is a function
let tmp() = incr counter; vargen ^ string_of_int !counter;;

Printf.printf "%s\n" (tmp());;
Printf.printf "%s\n" (tmp());;
Printf.printf "%s\n" (tmp());;
Printf.printf "%s\n" (tmp());; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T06:47:42.310

你可以使用

```
let tmp = 
  let counter = ref 0 in
  (fun () -> incr counter; vargen ^ (string_of_int !counter)) 
```

使用 调用该函数`tmp ()`，如果您希望计数器从 0 开始，请将 0 更改为 -1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-28T13:41:54.683

如果您需要在不增加计数器的情况下选择性地读取计数器，则可以添加一个参数：

```
let counter =
  let count = ref (-1) in
    fun do_incr -> if do_incr then begin incr count end; !count;; 
```

像这样使用它：

```
# counter true;;
- : int = 0
# counter true;;
- : int = 1
# counter true;;
- : int = 2
# counter false;;
- : int = 2
# counter false;;
- : int = 2
# counter true;;
- : int = 3 
```

# git - 让 git diff --stat 显示完整的文件路径

> ID：10459374
> 
> 赞同：128
> 
> 时间：2012-05-05T06:11:58.973
> 
> 标签：git, git-diff

在执行`git diff --stat`某些文件时，列出了来自存储库库的完整路径，但有些文件列出为：

```
.../short/path/to/filename. 
```

那就是路径开始，`...`并且只显示短路径。

我想`git diff`列出所有文件的完整文件路径，以便脚本轻松处理。有什么方法可以让我`git diff`始终显示完整路径

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-05T08:26:02.220

默认情况下`git diff`会截断其输出以适应 80 列终端。

您可以通过使用[`--stat`选项](https://git-scm.com/docs/git-diff#Documentation/git-diff.txt---statltwidthgtltname-widthgtltcountgt)指定值来覆盖它：

```
--stat[=<width>[,<name-width>[,<count>]]]
       Generate a diffstat. You can override the default output width for
       80-column terminal by --stat=<width>. The width of the filename
       part can be controlled by giving another width to it separated by a
       comma. By giving a third parameter <count>, you can limit the
       output to the first <count> lines, followed by ...  if there are
       more.

       These parameters can also be set individually with
       --stat-width=<width>, --stat-name-width=<name-width> and
       --stat-count=<count>. 
```

例如，通过将输出值设置为一个非常大的数字：

```
git diff --stat=10000 
```

请注意，这会产生相对于 git 存储库根目录的路径。

（对于脚本，您可能希望直接使用它，因为它更像是一个“管道”命令，尽管我怀疑无论哪种方式都可以。请注意，使用时`git diff-tree`您需要相同的额外文本。使用“瓷器”之间的本质区别" 前端和管道命令是查找您配置的设置以获取选项，例如决定是否进行重命名检测。好吧，加上前端将相当于您将提交与索引进行比较，例如。换句话说，*读取您的配置*并*自动调用正确的管道*。）`--stat``git diff-tree``git diff``git diff-tree``git diff``diff.renames``git diff``git diff-index``git diff`

 *** * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-12T10:05:39.303

对于脚本处理，最好使用以下方法之一：

```
# list just the file names
git diff --name-only
path/to/modified/file
path/to/renamed/file

# list the names and change statuses:
git diff --name-status
M       path/to/modified/file
R100    path/to/existing/file   path/to/renamed/file

# list a diffstat-like output (+ed lines, -ed lines, file name):
git diff --numstat
1       0       path/to/modified/file
0       0       path/to/{existing => renamed}/file 
```

当与用作字段终止符的`-z`选项结合使用时，这些都变得更便于进行健壮的脚本处理。`NUL`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-05-24T10:54:15.380

对于 Bash 用户，您可以使用该`$COLUMNS`变量来自动填充可用的终端宽度：

```
git diff --stat=$COLUMNS 
```

很长的路径名可能仍会被截断；在这种情况下，您可以使用 减小 +++/--- 部分的宽度`--stat-graph-width`，例如，这会将其限制为终端宽度的 1/5：

```
git show --stat=$COLUMNS --stat-graph-width=$(($COLUMNS/5)) 
```

对于更通用的解决方案，您可以使用 的输出`tput cols`来确定终端宽度。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-30T01:28:20.123

有一个选项`--name-only`：`git diff --name-only`。`show`其他 git 命令（如和）也支持该选项`stash`。

该选项不会缩短路径。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-13T12:27:49.523

我发现一个简单的解决方案是这样做：（仅适用于 *nix，抱歉没有 osx）

```
git diff --stat=$COLUMNS --relative | head -n -1 | cut -c 2- | xargs -d '\n' -P4 printf "$(pwd)/%s\n" 
```

此版本适用于两者，但在 osx 上看起来不太好。

```
git diff --stat=$COLUMNS --relative | sed -e '$ d' | cut -c 2- | xargs -n4 -I{} echo "$(pwd)/{}" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-22T14:44:24.907

我创建了以下 git 别名：

```
diffstat = ! "gitdiffstat() {  git diff --stat=$(tput cols) ${1:-master} ; }; gitdiffstat" 
```

`tput cols`它从命令中读取列数。它默认为 diffing against `master`，但您可以选择指定另一个分支。

```
$ git diffstat
 .gitalias | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-30T08:47:46.383

`git diff`是一个瓷器（用户友好的）命令。出于脚本目的，您可能希望使用相应的管道命令`git diff-tree`。

您可以使用和选项的`git diff-tree`组合输出相对于 git 存储库的完整路径。[`--name-only`](https://git-scm.com/docs/git-diff-tree#Documentation/git-diff-tree.txt---name-only)[`-r`](https://git-scm.com/docs/git-diff-tree#Documentation/git-diff-tree.txt--r)[`--no-commit-id`](https://git-scm.com/docs/git-diff-tree#Documentation/git-diff-tree.txt---no-commit-id)

## 例子

`HEAD`在当前分支的“最后”（）提交中更改的文件路径。

```
git diff-tree --name-only -r --no-commit-id HEAD 
```

`main`分支上最后一次提交中的文件路径

```
git diff-tree --name-only -r --no-commit-id main 
```

`main`分支上最后三个​​提交的文件路径

```
git diff-tree --name-only -r main main~3 
```

path 下最后一次提交的文件的路径`src/`

```
git diff-tree --name-only -r --no-commit-id main src/ 
```

在当前分支的最后一次提交中更改的文件的绝对路径

```
git diff-tree --name-only -r --no-commit-id --line-prefix=`git rev-parse --show-toplevel`/ HEAD 
```

## 解释

`git diff-tree`比较两个*树状*对象的*blob 。*

 *提交是一个`treeish`对象，它指向存储库根中的对象。目录也是`treeish`对象，而文件是`blobs`.

运行`git diff-tree HEAD`将比较 和 的 blob`HEAD`并`HEAD~1`包含存储库根的 blob 的差异。要查看所有不在根目录中的已更改文件，我们需要深入到目录`treeish`对象中。这是使用`-r`（如递归）选项实现的。

请注意，这允许在任意提交中一二比较任意目录。

默认情况下，如果只指定了一个*提交*对象，则将其与其父对象进行比较。即，运行`git diff-tree HEAD`相当于`git diff-tree HEAD HEAD~1`. 如果您只将一个提交指定为*treeish*对象，则会显示父提交 ID。使用`--no-commit-id`摆脱了这一点。

`git-diff-tree`打印很多我们不想要的信息（id、权限、是否是添加、删除、修改）。我们只想要名字，所以我们使用`--name-only`.

如果我们想要绝对路径，我们需要使用类似`git rev-parse --show-toplevel`. 这将获取存储库的绝对路径，没有尾随`/`. 所以我们补充说。

```
--line-prefix=`git rev-parse --show-toplevel`/ 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-18T16:51:01.510

我发现 diff --stat 的行为在 git 1.7.10 附近的某个地方发生了变化，以前它默认将文件路径缩短到固定宽度 - 现在它显示的内容与终端窗口允许的一样多。如果您遇到此问题，请确保升级到 1.8.0 或更高版本。***

# php - PHP 多维数组 - 如何正确分组

> ID：10459377
> 
> 赞同：0
> 
> 时间：2012-05-05T06:12:10.230
> 
> 标签：php, mysql, multidimensional-array

如何正确分组数组：（最终结果）

```
Array
(
    [0] => Array
        (
            [Player] => CaLvErT
            [0] => Array
                (
                    [SnapTime] => 1330028992
                    [PlayCount] => 9
                )
        )
    [1] => Array
        (
            [Player] => CaLvErT
            [0] => Array
                (
                    [SnapTime] => 1330202828
                    [PlayCount] => 8
                )
        )
) 
```

我的 mySQL/PHP 符合我的尝试：

```
 $iTestGrid = array();
        $ChartSQL = "SELECT player,snap,count(*) AS pCnt";
        $ChartSQL .= " FROM sc".$DBSvr;
        $ChartSQL .= " WHERE hex(alliance) IN (hex('Twitch'))";
        $ChartSQL .= " GROUP BY player,snap";
        $ChartSQL .= " ORDER BY player ASC,snap ASC";
        $FinalResult = $db-> query($ChartSQL);
        while ($FinalRow = $db-> fetch_assoc($FinalResult)){
           $iTestGrid[] = array(
            'Player' => $FinalRow['player'],
            array(
                'SnapTime' => (int)$FinalRow['snap'],
                'PlayCount' => (int)$FinalRow['pCnt']
            )
           );
        } 
```

基本上想知道如何对同名的玩家进行分组。

在此先感谢您的帮助！（请原谅我，因为我并不热衷于完全理解数组是如何工作的，整天/晚上都在书店里，但仍然得到它的一部分，而不是很多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:50:46.940

如果我理解正确，你想要这样的东西。您可以使用播放器名称作为分组键，并将 playcount/timestamp 值推送到同一个数组中。

```
<?php 
    $iTestGrid = array();
    $ChartSQL = "SELECT player,snap,count(*) AS pCnt";
    $ChartSQL .= " FROM sc".$DBSvr;
    $ChartSQL .= " WHERE hex(alliance) IN (hex('Twitch'))";
    $ChartSQL .= " GROUP BY player,snap";
    $ChartSQL .= " ORDER BY player ASC,snap ASC";
    $FinalResult = $db-> query($ChartSQL);

    while ($FinalRow = $db-> fetch_assoc($FinalResult)){

        if(!isset($iTestGrid[$FinalRow['player']]))
            $iTestGrid[$FinalRow['player']] = array();

        $iTestGrid[$FinalRow['player']][] = 
        array(
            'SnapTime' => (int)$FinalRow['snap'],
            'PlayCount' => (int)$FinalRow['pCnt']
        );
    }

    var_dump($iTestGrid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:02:56.603

也许您可以使用`player name`s 作为数组键并在该数组中插入其他数据：

```
$sorted = array();
foreach ( $result as $value ) {
    $sorted[ $value['Player'] ] = $value[ 0 ];
}
var_dump( $sorted ); 
```

# apache - apache2 和 ssl 模块

> ID：10459378
> 
> 赞同：0
> 
> 时间：2012-05-05T06:12:11.330
> 
> 标签：apache, ssl

我正在尝试在 ubuntu lucid 的 apache webserver 中启用`ssl`webapp `django`。我按照[这篇](http://beeznest.wordpress.com/2008/04/25/how-to-configure-https-on-apache-2/)关于为 ssl 配置 apache 的文章进行操作，我已经`apache2 tar.gz`从`apache website`. 当我检查文件夹时，我发现它不包含任何`sites-available`目录或`sites-enabled`目录。

我该如何进行？我应该删除整个 apache 文件夹并使用源代码构建吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:00:31.823

我会安装 webmin .. 在[webmin](http://www.webmin.com/)中，您只需转到服务器-> apache-> 模块并在激活 apache reboot ssl 后激活复选框“ssl”。您还可以在 webmin 配置中编辑您的 ssl 选项。我是一名软件开发人员而不是管理员，所以 webmin 为我节省了很多问题和时间，也许它也会对你有所帮助。

# haskell - 使用 Haskell 进行无监督聚类

> ID：10459384
> 
> 赞同：2
> 
> 时间：2012-05-05T06:12:48.997
> 
> 标签：haskell, functional-programming, pattern-matching, cluster-analysis, unsupervised-learning

我正在尝试开发一种算法，该算法可以报告数据集之间出现类似模式的频率和接近度。

简单的例子：

```
set1 = [0, 1, 0, 0, 2, 0, 0, 3, 0]
set2 = [1, 2, 3, 0, 0, 0, 0, 0, 0]
set3 = [0, 0, 0, 0, 0, 1, 2, 0, 3] 
```

这些集合中的每一个都有一个 1、2 和 3，但这些数字在 set2 和 set3 中更接近。

我怀疑我可以通过列表推导来完成这项任务。我可以将数据绘制到变量 x 和 y 中，并将每个匹配项编入一个列表列表，其中一个嵌入式列表中的第一个元素是找到的匹配字符串，第二个和第三个元素是它们的位置。我可以通过另一个函数运行这个列表，该函数计算这些匹配发生的频率和接近程度，并报告一个百分比。

或者也许有更优雅的方式来做到这一点？

我仍然是一个 Haskell 新手。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:30:12.300

*好的，如果您按*顺序排列有 1、2、3 ，那么您就有计算接近度的公式：prox = indexOf 3 - indexOf 1 - 2。所以，prox 是 1..2 和2..3。你可以用 Haskell 写：

```
prox :: [Integer] -> Int
prox s = i3 - i1 - 2
  where
    Just i3 = findIndex (==3) s
    Just i1 = findIndex (==1) s 
```

您可以针对这种情况进行概括，而无需假设 1 先行且 3 后行。

# opencv - 带颜色跟踪的鼠标控制 (osx+opencv+xcode)

> ID：10459387
> 
> 赞同：0
> 
> 时间：2012-05-05T06:13:04.250
> 
> 标签：opencv, mouseevent, color-tracking

我正在尝试为鼠标控制编写代码颜色跟踪。我正在使用 OS X / X Code / OpenCV。颜色跟踪过程运行良好。之后我想使用一个功能来控制鼠标光标、移动、单击、右键单击等。我打算制作一个多点触控项目。我需要控制鼠标事件。这段代码找到x 和 y 坐标并画一条线。如何使用鼠标控制功能。我无法在此处输入代码，对不起..

这是代码链接 [http://aishack.in/tutorials/tracking-colored-objects-opencv/](http://aishack.in/tutorials/tracking-colored-objects-opencv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:30:38.553

您的问题是如何通过编程控制鼠标位置？如果是，请编辑并澄清您的问题。我会使用 xdotool，在 OSX 上你可以使用 MacPorts 安装它。它是一个命令工具，因此您可以先在终端中尝试一些命令，例如`xdotool mousemove 100 200`将鼠标光标移动到`x=100`和`y=200`。然后，您需要做的就是从这些命令发送并从您使用的任何编程语言发送到终端。

# ruby - Rails / ActiveRecord 相当于 Underscore.js 的 .groupBy？

> ID：10459388
> 
> 赞同：1
> 
> 时间：2012-05-05T06:13:24.303
> 
> 标签：ruby, ruby-on-rails-3, underscore.js

我的用户模型有一堆歌曲。

我想作为所有歌曲的关联数组的用户，按每首歌曲的属性（艺术家的名字，song.artist_name）分组，其中艺术家的名字是关键。

我觉得这个基本的集群模式应该被 Ruby/Rails 覆盖，但我找不到它叫什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:16:21.667

[http://guides.rubyonrails.org/active_record_querying.html#group](http://guides.rubyonrails.org/active_record_querying.html#group)

例子：

```
Song.find( /* Some stuff your want */ ).group( 'artist' ) 
```

# java - 图像不重绘，只是相乘

> ID：10459391
> 
> 赞同：2
> 
> 时间：2012-05-05T06:13:54.193
> 
> 标签：java, image, swing, jpanel, repaint

我有一个 JPanel 实现了一个关键的监听器。它提取并显示从另一个类中提取的图像。NA 将 Key 侦听器传递给该类以获取许多图像之一并将其向一个方向移动 2px。我的问题是当我调用 repaint() 时旧图像并没有消失，所以我得到了一行图像。问题是，当我将类与图像和 JPanel 类组合成一个双决赛时，它工作得很好。
我对此进行了一些研究，发现了双缓冲。如果我必须这样做，那么为什么将它组合成一个大类而不是单独的类时会起作用？这是我的 JPanel 类的代码。谁能帮我？如果双缓冲是答案，有人可以向我解释一下。我得到了理论，但没有得到代码。

```
import java.awt.Graphics;
import javax.swing.JPanel;
import java.awt.Image;
import java.awt.Graphics2D;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
  public class picPanel extends JPanel
  {
     walker w; 
     JPanel panel;

   public picPanel()
   {
     w=new walker();
     addKeyListener(new TAdapter());
     setFocusable(true);
     System.out.println(w.getX());
     System.out.println(w.getY());
     if(w.getImg()==null)
        System.out.println("is emty"); 

     repaint();
     //test();

    }

   public void paintComponent(Graphics g)
   {
    System.out.println("Hello");
    //Graphics2D g2d = (Graphics2D)g;

    Image m = w.getImg();
    g.drawImage(m,w.getX(),w.getY(),this);

   }

  private class TAdapter extends KeyAdapter 
  {  
   public void keyPressed(KeyEvent e) 
   {
     w.keyPressed(e);
     System.out.println("Hello");
     repaint();

   }
  }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:54:41.173

只需调用`super.paintComponent`您的`paintComponent`方法即可。

关于您的代码的一些进一步说明

1.  Swing 旨在与[KeyBindings iso KeyListeners一起使用](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)
2.  为了方便他人阅读您的代码，请遵守[Java 命名/代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)，例如类以大写字母开头，变量以小写字母开头
3.  `@Override`重写方法时添加标签是一个好习惯。编译器不仅会检查签名是否匹配，而且必须阅读您的代码的其他人也更容易快速查看您添加了哪些方法，以及您只需覆盖哪些方法。

# c# - 当响应服务器不发回任何 HTTP 标头时，如何使用 C# 接收 HTTP？

> ID：10459395
> 
> 赞同：1
> 
> 时间：2012-05-05T06:14:10.573
> 
> 标签：c#, http, httpwebrequest, webclient, webexception

我正在尝试从小型嵌入式中文设备接收 HTTP 内容。设备的内置 Web 服务器接受标头，但不会在响应中返回任何标头。

IE

原始响应：（2 行，1 是 XML，第二是空白 \n）

`<?xml version="1.0" encoding="utf-8"?><document><userkey>key</userkey> <machinemode>1</machinemode><serial>0000</serial><unitname>Device</unitname><version>1</version></document>\n`

Fiddler 根本不会显示响应。使用`HttpWebRequest`and`WebClient`不会产生任何结果，因为响应中没有标头，这会导致异常。我所做的一些研究指向将其添加`useUnsafeHeaderParsing`到应用程序配置中（和/或以编程方式设置它）。这根本不起作用。我仍然收到

`System.Net.WebException was unhandled Message=The server committed a protocol violation. Section=ResponseStatusLine Source=System StackTrace: at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)`

有解决办法吗？在不使用 Sockets/TCPClient 的情况下，是否有另一种从不提供标头的服务器接收数据的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:46:06.293

我不知道如何让 WebClient 或 HttpWebRequest 在这种情况下访问响应，所以不幸的是我认为你只剩下[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx) :(

# android - 在 Phonegap 中访问预填充的数据库？

> ID：10459397
> 
> 赞同：3
> 
> 时间：2012-05-05T06:14:18.193
> 
> 标签：android, cordova

我在外部创建了一个新数据库，并将其放置在此处给出的资产文件夹中。[http://gauravstomar.blogspot.in/2011/08/prepopulate-sqlite-in-phonegap.html](http://gauravstomar.blogspot.in/2011/08/prepopulate-sqlite-in-phonegap.html)。我在我的活动中使用了代码，并且数据库已成功复制到相应的文件夹中。现在我无法弄清楚如何访问该数据库中的数据。该`window.openDatabase(database_name, database_version, database_displayname, database_size);`函数创建一个新数据库并将其替换为现有数据库。

我想知道他们有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T15:25:47.030

那么您可以使用 sqlite 插件来访问和修改数据库。

[插件链接](https://github.com/lite4cordova/Cordova-SQLitePlugin)

安装指南写得很好，如果正确遵循，插件需要几分钟才能安装 [指南](https://github.com/lite4cordova/Cordova-SQLitePlugin#installing)

不确定从 SQL 到 SQLite 的转换器

# python - 在python中使用两个参数循环，一个循环的输出作为下一个循环的输入

> ID：10459398
> 
> 赞同：1
> 
> 时间：2012-05-05T06:14:33.290
> 
> 标签：python, loops

我有一个非常基本的计算要循环：

```
month = 1
carryK = 104800 #Carrying capacity as per Q0
redcarryK = 0.998 #amount to reduce the carrying capacity to as given in part 4
newcarryK = (carryK*redcarryK) 
```

我想通过 12 个月的周期循环这个计算，以便第 1 个月的 newcarryK 然后变成第 2 个月的 carryK。

我已经尝试过 if 和 while ，我得到的只是相同答案的输出 12 次。

```
while month <=12:
    print newcarryK
    month = month + 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T08:15:10.890

如果你仔细看，这个计算就是经典的复利计算。为简洁起见，让我们重新定义`carryK = p`和`redcarryK == r`。

现在，对于每个月，计算过程如下：

```
month 1 --> p * r
month 2 --> p * r ** 2
month 3 --> p * r ** 3
month 4 --> p * r ** 4 
```

我猜你看到了模式。您使用的程序是一种非常传统的程序方法。一种更 Pythonic 的方式如下：

```
p = 104800
r = 0.998
vals = [ p * r ** i for i in range(1, 13)] 
```

在学习 Python 时，尝试使用列表推导等，这会显着提高可读性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:11:30.770

看起来缺少 newcarryk 计算。

```
while month <=12:
    print newcarryK
    newcarryK = (newcarryK*redcarryK)
    month = month + 1 
```

# asp.net - 文件未从文件夹下载

> ID：10459399
> 
> 赞同：0
> 
> 时间：2012-05-05T06:15:20.560
> 
> 标签：asp.net

我在下载文件时遇到问题。我有一个显示文件名和下载该文件的链接的网格。这是我的网格的代码。

```
<asp:GridView ID="gv7" runat="server" AllowPaging="True" CssClass="tbl_green_parrot"
PageSize="5" Width="100%" AutoGenerateColumns="False" EmptyDataText="No Scheme data available" DataKeyNames="FilePath" OnPageIndexChanging="gv7_PageIndexChanging"             onrowdatabound="gv7_RowDataBound">
  <AlternatingRowStyle CssClass="tbl_green_parrot1" />
 <FooterStyle CssClass="tbl_green_parrotfoot" />
 <PagerStyle CssClass="tbl_green_parrotpager" />
 <SelectedRowStyle CssClass="tbl_green_parrotselect" />
 <EmptyDataRowStyle CssClass="tbl_green_parrotempty" />
 <Columns>
   <asp:TemplateField HeaderText="File Name">
   <ItemTemplate>
   <asp:HyperLink ID="lnkFile" Target="_blank" CausesValidation="false" runat="server"
   Text='<%# Bind("DisplayName") %>' NavigateUrl='<%# Bind("FilePath") %>' />
   </ItemTemplate>
   </asp:TemplateField>
   <asp:TemplateField HeaderText="Download" ItemStyle-Width="25px" ItemStyle-HorizontalAlign="Center">
   <ItemTemplate>
   <a id="lnkDLoad" href='<%# Bind("FilePath") %>' runat="server" target="_blank">
   <img src="Images/download.png" alt="Download" />
   </a>
   </ItemTemplate>
   <ItemStyle HorizontalAlign="Center" Width="25px" ></ItemStyle>
   </asp:TemplateField>
 </Columns> 
```

在这里，我将文件路径绑定到`<a>`标签。当我将文件放在网站的同一根文件夹中时，此代码正在运行。但是当我尝试下载文件夹内的文件时，它不会下载。

下载后面的代码：

```
DataTable new_dt = new DataTable();
    new_dt.Columns.Add("DisplayName");
    new_dt.Columns.Add("FileName");
    new_dt.Columns.Add("FilePath");
    string Query = "SELECT DisplayName,FilePath,Universal From DistScheme";
    dt = DataAccessLayer.DAL.getFromDataTable(Query);
    string filename = "";
    if (dt.Rows.Count > 0)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            DataRow new_dr = new_dt.NewRow();
            if (dt.Rows[i]["Universal"].ToString() == "False")
            {
                filename = DistributorID + "_" + dt.Rows[i]["FilePath"].ToString();
            }
            else
            {
                filename = dt.Rows[i]["FilePath"].ToString();
            }
            string filepath = Server.MapPath("Uploads/Scheme/") + filename;
            if (File.Exists(filepath))
            {
                new_dr["DisplayName"] = dt.Rows[i]["DisplayName"].ToString();
                new_dr["FileName"] = filename;
                new_dr["FilePath"] = filepath;
                new_dt.Rows.Add(new_dr);
            }
        }
    }
    gv7.DataSource = new_dt;
    gv7.DataBind(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:43:10.583

您的文件路径应该从“http”开始。在文件路径中包含完整路径，例如带有扩展[名的 http://domian-name/foldername/filename](http://domian-name/foldername/filename)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:26:00.187

要完成您的任务，即从网格下载文件，您需要在网格中添加下面的模板列，如下所示。

```
<asp:TemplateField HeaderText="File" SortExpression="File Path">
                <ItemTemplate>                       
                    <asp:ImageButton ImageUrl="Images/download.png"  ID="imgbtnDownload" runat="server" CommandName="DOWNLOAD" Text="GetFile" CommandArgument='<%# Bind("FilePath") %>'  ></asp:ImageButton>
                </ItemTemplate>
            </asp:TemplateField> 
```

需要在文件后面的代码中添加 Row_command 事件，如下所示。

```
protected void gv7_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "DOWNLOAD")
    {
    // make sure fileName  contains only file name like 'test.pdf'  
        string fileName = Convert.ToString(e.CommandArgument);

    // make sure filePath  contains file path like 'Uploads/Scheme/test.pdf'        
        string filePath = Server.MapPath(Convert.ToString(e.CommandArgument));

        Response.Clear();
        Response.Buffer = true;

        // Read the original file from disk
        FileStream myFileStream = new FileStream(filePath, FileMode.Open);
        long FileSize = myFileStream.Length;
        byte[] Buffer = new byte[Convert.ToInt32(FileSize)];
        myFileStream.Read(Buffer, 0, Convert.ToInt32(FileSize));
        myFileStream.Close();
        // Tell the browse stuff about the file
        Response.AddHeader("Content-Length", FileSize.ToString());
        //Response.AddHeader("Content-Disposition", "inline; filename=" & fileneme.Replace(" ", "_"))
        Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName + ";");
        //Response.TransmitFile(fileneme)
        //Response.ContentType = getMimeType(sExtention, oConnection)

        // Send the data to the browser
        Response.BinaryWrite(Buffer);
        Response.End();

    }
} 
```

现在单击 aspx 页面中的图像按钮，您可以获得打开或保存文件的选项。

希望这会帮助你..快乐的编码......

# spring - 尝试显示 spring mvc 验证错误时出现异常

> ID：10459401
> 
> 赞同：1
> 
> 时间：2012-05-05T06:15:40.747
> 
> 标签：spring, spring-mvc

我在这里使用 3.1.1。

这工作正常，表格显示正确

```
@RequestMapping(value={"/universities"}, params="new", method=RequestMethod.GET)
public String addUniversity(Model model) {
    model.addAttribute("addForm", AddForm.newUniversity());
    return "page/add-university";
} 
```

测试验证错误（通过清空字段）时，这会导致 500 内部服务器错误，并显示堆栈跟踪和主要消息： **BindingResult 和 bean name 'addForm' 的普通目标对象都不能用作请求属性**

这是方法：

```
@RequestMapping(value={"/universities"}, method=RequestMethod.POST)
public String submitNewUniversity(@Valid AddForm form, BindingResult binding) {
    if (binding.hasErrors()) {
        return "page/add-university";
    }

    // do others here ...
} 
```

这是我的 JSP：

```
<%@ taglib prefix="s" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="t" uri="http://tiles.apache.org/tags-tiles" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ taglib prefix="sf" uri="http://www.springframework.org/tags/form"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" 
    session="false" %>

<s:url var="action" value="/universities" />
<sf:form method="POST" modelAttribute="addForm" action="${action}">         
   <fieldset> 
   <table cellspacing="0">
      <tr>
         <th><sf:label path="name">University:</sf:label></th>
         <td><sf:input path="name" size="30" /> <br/>
             <sf:errors path="name" cssClass="error" />
         </td>
      </tr>
      .....
</sf:form> 
```

到目前为止，我研究的是这些：

*   bean 名称是正确的，即“addForm”，在控制器和 JSP tile 中都是如此。
*   视图存在，因为显示表单工作正常。
*   JSP 中的字段名称也是正确的，因为显示表单工作正常。
*   参数顺序没问题，BindingResult遵循命令bean
*   我确信 submitNewUniversity 是由我添加的日志的输出调用的

我想知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:52:35.240

找到了 ！

我从

```
@Valid AddForm form 
```

到

```
@Valid @ModelAttribute("addForm") AddForm form 
```

虽然这很好用，但我尝试删除注释并将表单名称更改为与请求属性相同的变量名称：

```
@Valid AddForm addForm 
```

这仍然会引发相同的错误。

我想从现在开始我只需要坚持使用@ModelAttribute。

# python - 尝试增加 db.IntegerProperty 时出错：TypeError: can only concatenate tuple (not "int") to tuple

> ID：10459402
> 
> 赞同：2
> 
> 时间：2012-05-05T06:15:55.943
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在使用 Google App Engine，我只是想将一个值增加 1（player.number_requests - 请参见下面的代码）。但是，当我这样做时，我收到以下错误：“TypeError: can only concatenate tuple (not "int") to tuple”。知道为什么会这样吗？

```
class Player(db.Model):
    name = db.StringProperty(required=True, multiline=False),
    number_requests = db.IntegerProperty(required=True, default=0),
    last_seen = db.DateTimeProperty(required=True, auto_now_add=True),
    created_date = db.DateTimeProperty(required=True, auto_now_add=True)

class PlayersHandler(webapp2.RequestHandler):
    def get(self):
        result = Player.get_by_key_name(self.request.get('name'))
        if result:
            result.last_seen = datetime.now()
            result.number_requests += 1 # FAILS HERE
            result.put()
            self.response.out.write('{0}, {1}'.format(result.last_seen, result.number_requests)) 
```

**痕迹**

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "main.py", line 39, in get
    result.number_requests += 1
TypeError: can only concatenate tuple (not "int") to tuple 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T08:11:30.690

模型中的属性末尾有一个逗号 (,)。他们不应该。在python写

```
foo = bar, 
```

就像你把

```
foo = (bar,) 
```

它创建了一个元组。

# python - Python：一个迭代函数

> ID：10459403
> 
> 赞同：1
> 
> 时间：2012-05-05T06:15:57.813
> 
> 标签：python

我正在尝试编写一个以 x [n+1] = x [n] ² + c 的形式为我迭代的程序。我该怎么做呢？

例如，对于 c = 1 和 x [0] = 1/2

(1/2) ² + 1 = 5/4,
(5/4) ² + 1 = 25/16 + 1 = 41/16
... 等等

我的代码在这里不起作用：

```
def main():
   import math
   print("This program iterates a function of the form x^2 + c:")
   x=complex(input("Enter a seed value:"))
   c=complex(input("Enter a value for c"))

for i in range(50):
   f(0) = x*x + c
   f(i) = f(i-1)*f(i-1) + c
   print(f(i))
main() 
```

Python不允许我使用`f(0)`或`f(i)`喜欢matlab，有什么替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:20:29.127

Tabbing 在 python 中很关键，请尝试下面的代码。猜测您的意图是一个很长的机会，但它使您更接近最终结果

```
def main(x):
    import math
    print("This program iterates a function of the form x^2 + c:")
    c = complex(input("Enter a value for c"))

    print "C : %s" % c

    f = [x * x + c]

    for i in range(1, 50):
        f.append(f[i - 1] * f[i - 1] + c)

    print f

main(2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:34:03.770

如果您对保留所有部分结果不感兴趣，则可以这样迭代：

```
import math
print("This program iterates a function of the form x^2 + c:")
x = complex(input("Enter a seed value:"))
c = complex(input("Enter a value for c"))

f = x * x + c
for _ in range(50):
   f = f * f + c
   print(f) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T07:20:07.550

Python 中有一种特殊的机制，称为*生成器函数*。它返回一个对象，该对象记住最后一个状态，并使用前一次调用（迭代器）中的值执行函数体。

它在语法上与普通函数的不同之处仅在于使用`yield`命令而不是`return`. 您通常可以在需要迭代器的地方使用这样的生成器函数，即 for-loop、容器构造函数等。参见代码：

```
def f(x, c, n=5):
    while n > 0:
        yield x        # returns x0 as first value
        x = x * x + c  # this value is to be returned next time
        n -= 1         # decrement the sequence counter

# Using the generator function in a for loop.
for value in f(1/2, 1, 14):  # I want 14 members of the sequence
    print(value)

# Using the generator function to build a list of the values.
print('----------------------------------')
lst = list(f(1/2, 1, 10))    # 10 members wanted here
print(lst)

# Using the standard module called fractions for the same function.
print('==================================')
from fractions import Fraction as frac

# Using the generator function in a for loop.
for value in f(frac(1, 2), 1):  # default number of loop used here
    print(value)

# Using the generator function to build a list of the values.
print('----------------------------------')
lst = list(f(frac(1, 2), 1, 10))  # 10 members wanted here
print(lst)

# Generating Mandelbrot set values.
print('==================================')
# Using the generator function in a for loop.
for value in f(complex(0), complex(0, 1)):  # default number of loop used here
    print(value) 
```

Python 不像 matlab 那样以符号方式计算表达式。但是，它具有标准模块 fractions，该模块具有 Fraction 类来表示分数。您也可以对该类型使用相同的生成器函数，因为它定义了自己的乘法和加法。由于 Python 整数的限制小于浮点数，因此使用分数可能会得到更大的结果（如果它有意义的话）。但是您可能想要生成一个 Mandelbrot 集，对吗？

它显示在我的控制台上（换行）：

```
0.5
1.25
2.5625
7.56640625
58.25050354003906
3394.1211626681034
11520059.466871478
132711770120256.16
1.7612413928451715e+28
3.1019712438712e+56
9.62222559780384e+112
9.258722545503146e+225
inf
inf
----------------------------------
[0.5, 1.25, 2.5625, 7.56640625, 58.25050354003906, 3394.1211626681034, 11520059.
466871478, 132711770120256.16, 1.7612413928451715e+28, 3.1019712438712e+56]
==================================
1/2
5/4
41/16
1937/256
3817505/65536
----------------------------------
[Fraction(1, 2), Fraction(5, 4), Fraction(41, 16), Fraction(1937, 256), Fraction
(3817505, 65536), Fraction(14577639392321, 4294967296), Fraction(212507588699293
047863318657, 18446744073709551616), Fraction(4515947525478824258458249067737177
3490882293292495105, 340282366920938463463374607431768211456), Fraction(20393782
05287831607501825305820853979646214602081433287459323242821411496740800167480972
336912829578600961, 115792089237316195423570985008687907853269984665640564039457
584007913129639936), Fraction(41590634642030170391815210870941032988232016881852
69467060076200306147021769623813726880369383179868466442311933392597163786089664
61843166606956164602440721448188927878363156181727061624343416854647005907620761
7, 13407807929942597099574024998205846127479365820592393377723561443721764030073
546976801874298166903427690031858186486050853753882811946569946433649006084096)]

==================================
0j
1j
(-1+1j)
-1j
(-1+1j) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:46:28.727

让我们调用你的函数`f`：

```
def f(x, c):
    return x * x + c 
```

然后`main()`你可以这样称呼它：

```
def main():
    n = complex(input("Enter a seed value: "))
    c = complex(input("Enter a value for c: "))

    print n
    for term in range(50):
        n = f(n, c)
        print n 
```

每次迭代时，`n`都将 重新分配给 的返回值，`f`其前一个值为`n`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T07:19:05.257

再会。

```
# x_(n+1) = x_(n)^2 + c

def f(n,c):
    a=0
    while a < n:
        a +=1
        yield a * a + c 
```

现在您可以使用 f 作为生成器

```
if __name__ == '__main__':
    for element in f(100, 0):
        print element 
```

# php - 无限循环让我的页面加载

> ID：10459409
> 
> 赞同：0
> 
> 时间：2012-05-05T06:16:16.190
> 
> 标签：php

我有一个应该是无限函数的函数，但是当我启动它时，它一直在加载。在这种情况下，他一直在 70-79 秒左右，而我已指定 21 秒`set_time_limit`。

当我开始时它什么也没做，当这 75 秒完成时，它突然显示 8 倍的日期差异。一次全部。我希望它每 1 秒显示一次我的文本，并且不会滞后 1 小时，我下面的所有值都低于我上面所说的数字，因为我认为 1 秒可能会快，但它仍然滞后 10 秒

```
set_time_limit (21);
// 21 seconds until its done should become an hour later
// this was to test 
$x=1;
$startTime = time();
$timeout = 10;   //timeout in seconds
for ($i=0;;$i++)
{
   if(time() > $startTime + ($x * $timeout)) {

     $x++;
     $today=date('d-m-Y H:i:s');
     echo "it's now: ". $today . "</br>";
     $newyear = date('d-m-Y H:i:s', mktime(0, 0, 0, 01, 01, 2013));
     $difference=get_datediff_string($vandaag,$nieuwjaar); 
     // get_datediff_string() is defined somewhere below,
     // but wasn't worth to show it.
     echo "it is $difference untill newyear"; 

   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:31:06.037

为什么不使用 a`usleep`来暂停脚本？为什么你的目标是一个小时？在我看来，您应该宁愿在 JavaScript 中执行此操作..

```
<?php
$x=1;
$startTime = time();
$timeout = 10;   //timeout in seconds
for ($i=0;;$i++)
{

   set_time_limit (10);
   usleep(1000);

   $x++;
   $today=date('d-m-Y H:i:s');
   echo "it's now: ". $today . "</br>";
   $newyear = date('d-m-Y H:i:s', mktime(0, 0, 0, 01, 01, 2013));
   $difference=get_datediff_string($vandaag,$nieuwjaar); // get_datediff_string() is defined somewhere below but wasn't worth to show it.
   echo "it is " . $difference . " untill newyear"; 
   flush();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:19:28.827

这是由隐式缓冲引起的。它可能在服务器端（在这种情况下只需调用`flush()`after`echo`应该修复它），或者它可能在浏览器上（在这种情况下你不走运）。

无论如何，这种脚本真的应该是一个控制台程序，我真的不明白你在浏览器上下文中所做的事情的意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:25:36.000

如果您希望每 $timeout 秒打印一次日期，请考虑在循环结束时使用 sleep($timeout) ，这样循环不会在两个日期打印之间运行数千次，从而导致您的滞后问题。

最后我认为这个脚本在服务器端没有用，如果你想显示新年倒计时，请在 javascript 中执行。

# google-apps-script - 如何删除谷歌应用脚 本服务

> ID：10459410
> 
> 赞同：19
> 
> 时间：2012-05-05T06:16:18.053
> 
> 标签：google-apps-script

我通过将特定的应用程序脚本（Gmail Meter）添加到电子表格中来尝试它。即使我认为我删除了电子表格（通过过去的电子表格手动检查），它并没有完全删除该服务并且我不断收到警报（我在某处撤销了它的权限并且我不断收到该服务需要授权的通知）。

如何永久删除此服务？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-05T11:13:15.453

奇怪的。也许，尝试检查触发器是否仍然存在：

打开一个电子表格，然后转到工具 -> 脚本编辑器，然后在编辑器窗口中转到编辑 -> 所有触发器...，看看 gmail 仪表方法是否仍然列在那里。如果是这样，请将其删除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T14:41:33.323

在脚本编辑器中找到脚本 url 的 URL，即：

[https://script.google.com/macros/d/MS3-PFwnUdYw7_bQF3y8BJte_1Q7n6BNa/edit](https://script.google.com/macros/d/MS3-PFwnUdYw7_bQF3y8BJte_1Q7n6BNa/edit)

从 url 中删除编辑并替换为管理/卸载

[https://script.google.com/macros/d/MS3-PFwnUdYw7_bQF3y8BJte_1Q7n6BNa/manage/uninstall](https://script.google.com/macros/d/MS3-PFwnUdYw7_bQF3y8BJte_1Q7n6BNa/manage/uninstall)

单击卸载，应该就是它了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-30T00:21:40.843

删除脚本后，在垃圾文件夹中查找它并从那里删除它。这对我有用；无需其他步骤。

# jquery - 如何使用jquery联系叔叔

> ID：10459418
> 
> 赞同：11
> 
> 时间：2012-05-05T06:17:18.127
> 
> 标签：jquery, html, dom, parents

```
<div id="grandfather">
  <div id="uncle"></div>
  <div id="father>
    <div id="me"></div>
  </div>
</div> 
```

我在 $("#me") ，我想选择我的叔叔，使用以下内容：

```
 $("#me").find("#uncle")
 $("#me").next("#uncle")
 $("#me").prev("#uncle") 
```

如何 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-05T06:19:09.597

您可以使用`$.parent`并`$.prev`假设您的叔叔总是在您父亲之上：

```
$(this).parent().prev(); // where 'this' is #me 
```

你也可以一直走到你的祖父那里，从那里找到叔叔：

```
$(this).parents("#grandfather").find(".uncles"); 
```

或者你可以搜索你父亲的兄弟姐妹：

```
$(this).parent().siblings("#uncle"); 
```

我鼓励您阅读 jQuery API 的[遍历](http://api.jquery.com/category/traversing/)部分以了解其他各种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:19:10.010

```
var uncle = $('#me').parent().prev(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:50:24.197

```
$(this).parent().prev().append("This is uncle"); 
```

# java - 关于课堂观察

> ID：10459424
> 
> 赞同：2
> 
> 时间：2012-05-05T06:18:29.543
> 
> 标签：java

我今天观察到，通过在一个简单的 java 类中编写以下行

```
System.out.println(010|4); 
```

给出 '12' 的输出，这背后的逻辑是什么，请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:26:49.803

`|`是[按位包含 OR](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)运算符，`010`是八进制 for `8`，它是`1000`二进制的，`4`是`100`二进制的，所以当你或每个位`1000`与对应的位在`0100`你得到`1100`的二进制是`12`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:28:32.373

当您在数字前加上 0 时，它被视为以 8 为基数，即 010 = 0*(8^0) + 1*(8^1) = 8

| 是按位或运算

010|4 与 8|4 相同

```
1000
OR
0100
=
1100
= 12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T06:23:26.233

`|`是[按位包含 OR](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)运算符，`010`八进制为 8，所以 8 | 4 = 12。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:43:42.730

```
010|4 
```

这里有两件事值得注意 -

1.  010 - 整数以 0 开头。它是一个八进制数。`ex 011 -> 9 (0 8^1 8^0 =9)`
2.  | - 按位或 a | b 它告诉 1 如果任一位为 1。`ex 010 | 010 -> 8 (010)`

在这种情况下

```
 010 | 4 -> 010 | 04 -> 014 
 014 which is 12 in base of 10 
```

# php - base64 编码数据中的换行

> ID：10459430
> 
> 赞同：1
> 
> 时间：2012-05-05T06:19:24.450
> 
> 标签：php, web-services, base64, httprequest

在服务器端脚本中，我使用以下 PHP 代码对图像进行编码：

```
 $handle = fopen($imageSrc,'r');
    $file_content = fread($handle,filesize($imageSrc));
    fclose($handle);
    $encoded = base64_encode($file_content);

    echo $encoded; 
```

当我通过 web 服务读取文件时，它的长度为 9309 字节，这对于 base64 编码数据来说是无效的长度。检查数据，我发现最后一个字节的值是 10 (LF)。现在，在解码数据之前，我正在裁剪我的网络服务中的最后一个字节。有没有一种干净的方法可以避免发送 LF 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:10:13.537

我不确定是什么导致了这种情况，但是在过去调试过类似的问题后，我会假设在`echo`导致 a`\n`输出的下方有一些东西。

要对此进行测试，`die();`请在`echo`. 如果我的理论是正确的，您可以保留`die();`，或者（更好地）在执行流程中逐渐向下移动它，直到找到导致`\n`输出的任何内容。

# php - 在网站上显示字体

> ID：10459432
> 
> 赞同：2
> 
> 时间：2012-05-05T06:19:34.270
> 
> 标签：php, javascript, css, actionscript, fonts

设置：我目前正在通过 Flash/Actionscript 使用 getFontList() 来获取用户本地字体列表。我正在尝试显示字体，但我希望字体显示为字体。

所以我创建了一个简单的 foreach 来为 font-family:[font name here] 设置一个内联样式。问题是显示的字体名称和系统可访问的字体名称在很多情况下并不相同。字体显示名称可能是“我的字体”，但它的实际名称是“我的字体”，所以使用字体系列：“我的字体”不起作用。

我可以通过使用 PHP 解析列表、删除空格、使用破折号等来解决其中的一些问题，以尝试获得所需的结果，但是我的解析游戏无法解释一些具有奇怪名称或变体的字体。

问题：所以我说了这么多是为了问这个问题：是否有人知道解决此问题的方法或有更好的方法来确保我使用正确的字体名称变体来使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:59:33.637

使用 CSS 设置 @font-face 类型以将字体设置为页面。官方的[@font-face 是 CSS3](http://www.w3.org/TR/css3-fonts/#font-face-rule)，但 IE 从 IE4 开始支持这个，从 3.5 开始支持 Firefox，从 3.1 开始支持 safari 等。

请注意，您的字体必须是 OTF 或 TTF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:04:09.477

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
p.normal {font-style:normal;}
p.italic {font-style:italic;}
p.oblique {font-style:oblique;}
</style>
</head>

<body>
<p class="normal">This is a paragraph, normal.</p>
<p class="italic">This is a paragraph, italic.</p>
<p class="oblique">This is a paragraph, oblique.</p>
</body>

</html> 
```

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_font-style](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_font-style)

# jquery - Jquery：为什么我的“find()”方法没有更新？

> ID：10459436
> 
> 赞同：1
> 
> 时间：2012-05-05T06:20:10.467
> 
> 标签：jquery

我有一个函数来查找查找类的长度，但它不工作总是返回长度为'0'；

我的代码有些问题：任何人都可以建议我正确的方法。但我需要使用相同的代码样式结构来实现这一点。

看看我的代码：

```
<div id='list'>
  <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>      
  </ul>
    <p></p>
</div>​

function callMe(params){
    $(params.list).click(function(){
       $(this).addClass('c_on');
        var length = $(params.list).find('.c_on').length;
        $('p').text(length)// return always 0, even i clicked no.of list.        
    })
}

$(document).ready(function(){
    var obj = {
        list : $('ul').find('li')      
    }
   callMe(obj);
})

style :

li.c_on{
border:1px solid green;
} 
```

​​这里是小提琴：http: [//jsfiddle.net/AeGvf/1/](http://jsfiddle.net/AeGvf/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T06:34:01.503

您正在使用[`find`](http://api.jquery.com/find/)：

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

当你应该使用[`filter`](http://api.jquery.com/filter/)：

> 将匹配元素集减少为匹配选择器或通过函数测试的元素。

请注意，它`find`适用于*后代*，而`filter`适用于元素本身。您有一个`<li>`没有任何后代的 s 列表，因此`find`正在搜索一个空集。你应该做这个：

```
var length = $(params.list).filter('.c_on').length; 
```

另外，你`params.list`已经是一个jQuery对象所以你不需要`$(params.list)`，你可以`params.list`直接使用：

```
function callMe(params){
    params.list.click(function(){
        $(this).addClass('c_on');
        var length = params.list.filter('.c_on').length;
        $('p').text(length);
    });
} 
```

演示：http: [//jsfiddle.net/ambiguous/uCGaY/](http://jsfiddle.net/ambiguous/uCGaY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:31:38.973

你的选择方法有点缺陷。改用这个：

```
function callMe(params){
    params.list.click(function(){
       $(this).addClass('c_on');
        var length = $(this).parent().find('.c_on').length;
        $('p').text(length)        
    })
} 
```

### [演示](http://jsfiddle.net/AeGvf/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:33:40.563

我发现一个解决方案工作正常：

```
function callMe(params){
    $(params.list).click(function(){
       $(this).addClass('c_on');
        var length = $(params.list).filter('.c_on').length;//instead find i used filter. works!
        $('p').text(length)        
    })
}

$(document).ready(function(){
    var obj = {
        list : $('ul').find('li')      
    }
   callMe(obj);
})
​ 
```

但是直到我想知道为什么 find 方法不起作用？还是有任何限制使用它？还是我做错了..？请回答我任何人的发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:47:35.967

以下对我有用。我已经修改了名称，但您调用的是在同一元素中查找类元素，而不是父元素。

```
<script>
    function callMe(params) {

        $(params).click(function () {
            $(this).addClass('c_on');
            var suspects = $("#list").find('.c_on');

            $('p').text(suspects.length); // return always 0, even i clicked no.of list.        
        });
}

$(document).ready(function () {

    var obj = $('li');

    callMe(obj);
})
</script> 
```

# javascript - AJAX URL 中的十进制值

> ID：10459440
> 
> 赞同：1
> 
> 时间：2012-05-05T06:20:52.167
> 
> 标签：javascript, ajax, url, get

我目前正在尝试使用 AJAX 请求将值传递到服务器端端点。一切正常，直到我尝试在 url 中传递一个十进制值。据我了解，. 字符是 url 中的保留字符，我想知道如何在我的 AJAX 请求中传递十进制值。

我当前的端点是这样的；/domain/some-url/?value1=5&value2=2.3 上面的 url 结果为 404。

如果我将 value2 更改为整数或字符串，它可以工作文件。示例是 /domain/some-url/?value1=5&value2=2 我从上面的 URL 获得了成功的响应。

有处理这种情况的标准方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:01:31.973

不，`.`不是 URL 中的保留字符 - 请参阅[https://www.rfc-editor.org/rfc/rfc3986#section-2.3](https://www.rfc-editor.org/rfc/rfc3986#section-2.3) - 所以它是否是 URL 编码的应该没有区别。

在我看来，问题在于服务器端脚本不接受该参数中的点，但如果没有更多细节，很难说出原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T07:02:47.030

您的问题似乎出在您的服务器上，`.`没有保留。我实际上**尝试**在浏览器中使用 encodeURI：

```
> encodeURI("/domain/some-url/?value1=5&value2=2.3")
"/domain/some-url/?value1=5&value2=2.3" 
```

结果不变。**试试看**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T07:08:59.437

这不是点本身。为什么点是 URL 中的保留字符？在这种情况下，您将无法使用`/img/someimg.jpg`etc。它必须与您的服务器处理请求的方式有关。

可以肯定的是，我已经使用我自己的一个服务器端测试脚本 @ 对此进行了测试[`http://testbed.nicon.nl/v8test/json.xjs?testone=0.234&test2=4.56`](http://testbed.nicon.nl/v8test/json.xjs?testone=0.234&test2=4.56)。该脚本已找到并且可以正常工作，小数点没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:37:08.837

请检查您的域/服务器上的**.htaccess**或**路由脚本**以允许 . 在参数中；

否则

> /domain/some-url/?value1=5&value2=2.3

是在 url 中传递十进制值的正确方法；

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-05T06:55:27.827

尝试在您的 ajax 请求中发送如下参数；

```
data: { value1:5, value2: 2.3 } 
```

# python - 匹配任意拆分为多行的字符串

> ID：10459443
> 
> 赞同：4
> 
> 时间：2012-05-05T06:21:34.523
> 
> 标签：python, regex, multiline

正则表达式中是否有办法匹配任意拆分为多行的字符串 - 假设我们在文件中有以下格式：

```
msgid "This is "
"an example string"
msgstr "..."

msgid "This is an example string"
msgstr "..."

msgid ""
"This is an " 
"example" 
" string"
msgstr "..."

msgid "This is " 
"an unmatching string" 
msgstr "..." 
```

所以我们想要一个匹配所有示例字符串的模式，即：匹配字符串，不管它是如何跨行分割的。请注意，我们是在示例中显示的特定字符串之后，而不仅仅是任何字符串。所以在这种情况下，我们想匹配字符串`"This is an example string"`。

当然，我们可以轻松地连接字符串然后应用匹配，但让我想知道这是否可能。我说的是**Python**正则表达式，但一般的答案是可以的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T06:42:54.263

你想匹配一系列单词吗？如果是这样，您可以查找中间只有空格 (\s) 的单词，因为 \s 匹配换行符和空格。

```
import re

search_for = "This is an example string"
search_for_re = r"\b" + r"\s+".join(search_for.split()) + r"\b"
pattern = re.compile(search_for_re)
match = lambda s: pattern.match(s) is not None

s = "This is an example string"
print match(s), ":", repr(s)

s = "This is an \n example string"
print match(s), ":", repr(s)

s = "This is \n an unmatching string"
print match(s), ":", repr(s) 
```

印刷：

```
True : 'This is an example string'
True : 'This is an \n example string'
False : 'This is \n an unmatching string' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:30:22.593

这有点棘手，因为每行都需要引号，并且允许空行。这是一个与您正确发布的文件匹配的正则表达式：

```
'(""\n)*"This(( "\n(""\n)*")|("\n(""\n)*" )| )is(( "\n(""\n)*")|("\n(""\n)*" )| )an(( "\n(""\n)*")|("\n(""\n)*" )| )example(( "\n(""\n)*")|("\n(""\n)*" )| )string"' 
```

这有点令人困惑，但它只是您要匹配的字符串，但它以：

```
(""\n)*" 
```

并将每个单词之间的空格替换为：

```
(( "\n(""\n)*")|("\n(""\n)*" )| ) 
```

它在每个单词之后检查三种不同的可能性，要么是“空格、引号、换行符、（无限数量的空字符串）引号”，要么是相同的序列，但末尾有更多的空间，或者只是一个空格。

让这个工作更简单的方法是编写一个小函数，该函数将接收您尝试匹配的字符串并返回将匹配它的正则表达式：

```
def getregex(string):
    return '(""\n)*"' + string.replace(" ", '(( "\n(""\n)*")|("\n(""\n)*" )| )') + '"' 
```

因此，如果您将发布的文件放在名为“filestring”的字符串中，您将获得如下匹配：

```
import re

def getregex(string):
    return '(""\n)*"' + string.replace(" ", '(( "\n(""\n)*")|("\n(""\n)*" )| )') + '"'

matcher = re.compile(getregex("This is an example string"))

for i in matcher.finditer(filestring):
    print i.group(0), "\n"

>>> "This is "
    "an example string"

    "This is an example string"

    ""
    "This is an "
    "example"
    " string" 
```

此正则表达式没有考虑第三个 msgid 中“示例”之后的空间，但我认为这是由机器生成的，这是一个错误。

# iphone - JSON解析方法不适用于iphone中的ios4？

> ID：10459444
> 
> 赞同：0
> 
> 时间：2012-05-05T06:21:35.167
> 
> 标签：iphone, json

我使用以下代码从 JSON 响应中获取响应。它在 ios5 中工作得很好，但在 ios4 中它不起作用。那么ios4中的解决方案是什么。

```
NSData *responseData = [NSURLConnection sendSynchronousRequest:requestForServer returningResponse:&response error:&err];
NSDictionary *res = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&err];

    for(id key in res)
    {
        id value = [res objectForKey:key];

        NSString *keyAsString = (NSString *)key;
        valueAsString = (NSString *)value;

        NSLog(@"key: %@", keyAsString);
        NSLog(@"value: %@", valueAsString);
    } 
```

如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:34:12.893

`NSJSONSerialization`因为它仅在 iOS 5.0+ 和 Mac OS X 10.7+ 上受支持。我认为您也可以尝试使用第三方[JSON 库](https://github.com/johnezang/JSONKit)

**>>>编辑**

[适用于 iOS4 和 iOS5 的 Jsonkit](https://github.com/johnezang/JSONKit)

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T09:23:20.250

@python：关于您对 ARC 的评论。您实际上可以为使用 MRC 创建的特定文件关闭 ARC。转到项目设置->导航到“构建阶段”选项卡->在“编译源”选项卡下->在编译器标志部分中为您不使用的特定文件写入“-fno-objc-arc”不想使用 ARC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:02:28.913

NSJSONSerialization 只支持 ios 5 ，如果你想要 json 为 ios 4 和 ios 5 ，使用[jsonKit](https://github.com/johnezang/JSONKit)

# php - 动态类或函数返回查询结果 PDO

> ID：10459447
> 
> 赞同：2
> 
> 时间：2012-05-05T06:22:14.507
> 
> 标签：php, mysql, pdo

我曾经在我的脚本中对任何选择查询都有一个函数，但由于它不安全，我需要了解如何在 php.ini 中创建动态 PDO 类。

例如，我曾经使用此代码。

```
function excute_query ($Query)
{

    if($Query_Run = mysql_query($Query))
    {
        while($DATA = mysql_fetch_array($Query_Run, MYSQL_ASSOC))
            {
                $data_array[] = $DATA;
            }
            return $data_array;
            close();

    }
    else{
            die(mysql_error());
        }

    mysql_close();

} 
```

我可以在我的脚本中的任何地方使用它，它返回一个包含数据的数组。在 2 行中。

```
$sql = 'SELECT * FROM users';
$users = execute_query($sql); 
```

现在我需要对 PDO 使用相同的功能。我一直在尝试，但是如何使用 PDO 使类或函数做同样的事情。

我想说什么。而不是写相同的 4 行来进行查询，有没有办法让函数或类接受查询并返回数据？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:28:38.340

为了使您的辅助函数与 PDO 一起使用，您有几个选择：

*   将 PDO 对象与`$query`
*   使用某种形式的工厂类，在需要时实例化您的 PDO。

第一个可能看起来像这样：

```
function queryGetAll(PDO $pdo, $query)
{
    return $pdo->query($query)->fetchAll(PDO::FETCH_ASSOC);
} 
```

您可以通过添加对准备好的语句的支持使其更有用。

```
function queryGetAll(PDO $pdo, $query, $params = array(), $style = PDO::FETCH_ASSOC)
{
    $stmt = $pdo->prepare($query);
    $stmt->execute($params);
    return $stmt->fetchAll($style);
} 
```

要调用它：

```
$results = queryGetAll($pdo, "SELECT * FROM users WHERE uid = ?", array($user_id)); 
```

您可以编写的另一个包装器是`queryGetOne()`，它类似于`queryGetAll()`但仅返回第一个结果。您还可以考虑为插入语句编写一个包装器，返回最后插入的标识符。

**结论**

考虑到所有因素，我个人认为这些包装器并没有增加太多仅使用 PDO 所不具备的功能。

顺便说一句，使用 PDO 时，请确保允许[从 PDO 抛出异常](http://www.php.net/manual/en/pdo.setattribute.php)；这有助于调试您的代码并避免笨拙的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:45:16.973

你的代码很糟糕。严重地。该`close()`函数永远不会被调用，因为它在`return`语句之后。`mysql_close()`出于同样的原因，也从未调用过。

也就是说，这是我要使用的功能：

```
function execute_query( $con, $query, $statements ) {
    $q = $con->prepare( $query );
    foreach ( $statements as $statement ) {
        $q->bindParam( $statement[ 'string' ], $statement[ 'value' ], $statement[ 'type' ] );
    }
    $q->execute();
    return $q->fetchAll();
} 
```

这是一个使用它的代码示例：

```
$con = new PDO( /* ... */ );
$query = "SELECT * FROM users WHERE id = :id";
$statements = array();
// Prepare a statement array
$id = array(
    'string' => ':id',
    'value' => $_GET[ 'id' ],
    'type' => PDO::PARAM_INT
);
// Add the statement to the array
$statements[] = $id;
$results = execute_query( $con, $query, $statements ); 
```

PDO 的冗长性与允许良好安全性的准备好的语句一起提供。准备语句意味着您可以安全地使用 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:01:40.603

一个快速而肮脏但不太冗长的解决方案就是这个

```
function execute_query( $query, $params ) {
    global $pdo;
    $stmt = $pdo->prepare( $query );
    $stmt->execute($params);
    return $stmt->fetchAll();
}
$users = execute_query('SELECT * FROM users WHERE id=?',array($id)); 
```

但我个人讨厌写这个词`array`，所以，我会用`func_get_args()` 这种方式称呼

```
function execute_query() {
   global $pdo;
   $args  = func_get_args();
   $query = array_shift($args);
   $stmt  = $pdo->prepare($query);
   $stmt->execute($args);
   return $stmt->fetchAll();
}
$sql   = 'SELECT * FROM users WHERE username=? AND password=?';
$found = execute_query($sql,$username,$password); 
```

但是上课显然会更好。
它会让你对不同的结果集有不同的功能，比如

```
$username = db::getOne('SELECT name FROM users WHERE id=?',$id); 
```

而不是你现在的

```
$user     = execute_query('SELECT name FROM users WHERE id=?',$id);
$username = $user['name']; 
```

或者，甚至更有用的

```
$users = db::getIndexed('id','SELECT name FROM users); 
```

获取一个数组，其中的键填充了用户 ID 或

```
$ids = db::getCol('SELECT id FROM users');
$in  = implode(",",$ids); 
```

# java - 将“Localhost2”指向 tomcat 中的新文件夹

> ID：10459451
> 
> 赞同：1
> 
> 时间：2012-05-05T06:23:12.963
> 
> 标签：java, apache, jsp, tomcat, servlets

我在 jsp/servlet 中有一个名为“Demo”的项目，我正在使用 apache tomcat 服务器来运行该项目。

当我在浏览器中输入“localhost”时，它现在运行并打开项目我需要的是，当我输入“localhost2”时，它应该打开一个名为“temp”的文件夹，位于演示项目中。

任何人有任何想法，帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:01:48.187

您可以通过 2 个步骤实现您想要的：

1.  在文件中添加一个条目`/etc/hosts`，我假设您正在运行 *nix 操作系统，它应该是`127.0.0.1 localhost2`
2.  在tomcat配置文件中添加一个虚拟主机，该文件位于 中，在标签`$TOMCAT_HOME/conf/server.xml`之间添加以下内容：`<Engine>`

    ```
    <Host name="localhost2"  appBase="" unpackWARs="true" autoDeploy="true">
            <Context docBase="/root/path/to/your/demo/project" path="" reloadable="true" />                                                                    
    </Host> 
    ```

# javascript - 用于在最后一个括号 () 之间获取文本的正则表达式

> ID：10459455
> 
> 赞同：15
> 
> 时间：2012-05-05T06:23:57.480
> 
> 标签：javascript, regex, match

我想`()`使用javascript提取最后一个之间的文本

例如

```
var someText="don't extract(value_a) but extract(value_b)";
alert(someText.match(regex)); 
```

结果应该是

```
value_b 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-05T06:38:15.757

试试这个

```
\(([^)]*)\)[^(]*$ 
```

[在 regexr 上](http://regexr.com?30rtn)查看

```
var someText="don't extract(value_a) but extract(value_b)";
alert(someText.match(/\(([^)]*)\)[^(]*$/)[1]); 
```

括号内的部分存储在捕获组 1 中，因此您需要使用它`match()[1]`来访问结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-19T23:30:47.873

一个有效的解决方案是在最后一个之前[`.*`吃掉所有东西](http://www.regular-expressions.info/repeat.html#greedy)`(`

```
var str = "don't extract(value_a) but extract(value_b)";

var res = str.match(/.*\(([^)]+)\)/)[1];

console.log(res);
```

*   `.*\(`匹配[任意数量](https://msdn.microsoft.com/en-us/library/3206d374(v=vs.110).aspx)的[任意字符](http://www.regular-expressions.info/dot.html)，直到最后一个文字`(`
*   `([^)]+)` [捕获](http://www.regular-expressions.info/brackets.html)一个或多个[不是](http://www.regular-expressions.info/charclass.html#negated) `)`
*   `[1]` [抓取](https://stackoverflow.com/a/432503)第 1 组（第一个捕获组）的捕获。
*   使用`[\s\S]`而不是`.`点表示多行字符串。

[这是 regex101 的演示](https://regex101.com/r/p0dGB3/2)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-05T06:34:36.143

```
/\([^()]+\)(?=[^()]*$)/ 
```

前瞻 ,`(?=[^()]*$)`断言在输入结束之前没有更多的括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:37:38.577

如果最后一个右括号总是在句子的末尾，你可以使用乔纳森的答案。否则这样的事情可能会起作用：

```
/\((\w+)\)(?:(?!\(\w+\)).)*$/ 
```

# iphone - 导航栏继承方法列表

> ID：10459456
> 
> 赞同：0
> 
> 时间：2012-05-05T06:24:06.377
> 
> 标签：iphone, objective-c, ios

我用 UINavigationBar 继承了一个类。现在我想查看一个可以在此类中覆盖的列表方法，例如。我认为这些方法由于继承而存在于导航栏中，但是我如何查看这些方法的列表。

```
 - (void)applyDefaultStyle
 - (void)didMoveToSuperview 
```

我如何查看这些方法的列表，这些方法不是当前用 UINavigationBar 记录的方法编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:33:40.863

该类`UINavigationBar`直接继承自`UIView`和 间接继承自`UIResponder`和`NSObject`。所以`UINavigationBar`会有自己的方法，还有`UIView`,`UIResponder`和`NSObject`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:23:49.140

任何类都没有单一的方法列表。相反，您需要查看类中的方法、该类继承自的所有类中的方法以及该类或其任何超类实现的协议。

# apache - URL 重写以从 2 个不同的扩展中进行选择

> ID：10459457
> 
> 赞同：0
> 
> 时间：2012-05-05T06:24:13.830
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我试图实现一个相当简单的 url 重写，但我无法弄清楚，这就是我想要的：我有 2 个文件

test.html
测试.php

我的 url 请求是 test.html
我的 htacess 规则应该返回 test.html 文件，如果 test.html 文件不存在，那么它应该返回 test.php，url 保持不变，即 test.html
所以简而言之我想检查如果 html 文件存在则返回 html 文件，如果不存在则返回 php 文件。

任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:52:04.847

You should really just do this with default document in Apache no mod_rewrite needed. If you set `test.html` as the higher priority document it will get chosen if they are both there otherwise `test.php` will be used if it is the only one there.

If you insist on doing this in mod_rewrite the following will work for you

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME}       !-d
RewriteCond %{REQUEST_FILENAME}       !-f
RewriteRule ^test\.html$              test.php [NC,L] 
```

# css - 需要一个 CSS 布局

> ID：10459460
> 
> 赞同：0
> 
> 时间：2012-05-05T06:24:31.763
> 
> 标签：css, layout

作为一名 CSS 新手，我正在努力创建这样的布局：

![布局](../Images/74fc83d980ba12325d2e9822d8f85881.png)

左侧图像和右侧文本居中对齐。同样，右侧的图像和文本是居中对齐的。右图进入文本下方的空白区域。

有人可以帮我吗？任何帮助表示赞赏。谢谢你。

我的坏...我不应该用困倦的眼睛发帖。这是我的源代码。

`<html> <head> <title>CSS exercise</title> <style> body{background-color:gray; font-family:Lucida Handwriting ;font-size:large;} .leftPic{width:300; height:250;} .rightPic{width:300; height:225} .bottomText{display:block;} </style> </head> <body> <div> <img src="left.jpg" alt = "left image" class="leftPic" /> Left text </div> <div> Right text <img src ="Right.jpg" alt="right image" class = "rightPic"/> </div> <div> Bottom text </div> </body> </html>`

我同意反对票。我很抱歉。乔希，非常感谢你的慷慨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T06:33:25.823

你知道，通常我不会这么慷慨，但我觉得你在解释上付出了足够的努力，值得回答。

这是您的布局的 jsFiddle：http: [//jsfiddle.net/9UdLV/](http://jsfiddle.net/9UdLV/)

# php - 在 3 公里半径范围内不显示正确的 foodjoint 数据

> ID：10459461
> 
> 赞同：0
> 
> 时间：2012-05-05T06:24:46.380
> 
> 标签：php, mysql

我有一个表格，其中包含 foodjoint 数据及其纬度和经度。

我正在使用这个查询

```
 $q = "SELECT (
              (ACOS(SIN( ".$userLatitude." * PI() / 180) * SIN(foodjoint_latitude * PI() / 180) + COS(".$userLongitude." * PI() / 180) * COS(foodjoint_longitude * PI() / 180) * COS((foodjoint_longitude - ".$longitude.") * PI() / 180)) * 180 / PI()) * 60 * 1.1515 * 1.609344) AS distance
             , foodjoint_id
             , foodjoint_name
             , open_hours
             , cont_no
             , AVG(customer_ratings) AS rating
             , address_line
             , city 

          FROM provider_food_joints,customer_review HAVING distance <=3"; 
```

$userLatitude 和 $userLongitude 是用户的位置。我希望以公里为单位比较距离。提前谢谢。我想显示半径 3 公里以下的 foodjoint 数据。

当我刚刚运行它时，它不会选择任何行。但是如果没有这个条件，它会获取所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:45:29.447

我在我的一个项目中找到了一些代码，但我不确定距离计算.. 你应该改进你的`JOIN`.. 加入的表格是什么？

```
$q = "SELECT (
                    (
                        (
                            ACOS(
                                SIN(".$userLatitude." * PI() / 180) * 
                                SIN(foodjoint_latitude * PI() / 180) + 

                                COS(".$userLatitude." * PI() / 180) * 
                                COS(foodjoint_latitude * PI() / 180) *
                                COS(
                                    (".$userLongitude." - foodjoint_longitude) * PI() / 180)
                                ) * 
                            180 / PI()
                        ) * 60 * (1.1515*1.609344)
                    ) AS distance

           , foodjoint_id
           , foodjoint_name
           , open_hours
           , cont_no
           , AVG(customer_ratings) AS rating
           , address_line
           , city 

        FROM provider_food_joints,customer_review 
      HAVING distance < 4"; 
```

# javascript - 在 Android 中使用多个 webview 来模拟 Javascript 线程

> ID：10459462
> 
> 赞同：2
> 
> 时间：2012-05-05T06:24:59.777
> 
> 标签：javascript, android, android-webview, dom-events, web-worker

我正在使用 webview 编写一个 Android 应用程序。该应用程序从远程服务器获取数据并在 html5 画布中绘制数据。但是在这样做时，我无法使用 UI 控件。我想过使用网络工作者，但发现 Android webview 不支持网络工作者。

我的问题是，如果我使用多个 Web 视图，它会为每个 Web 视图创建单独的 js 线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:44:18.800

不，所有 WebView 中的 javascript 和网页布局都在同一个线程上运行 - WebViewCoreThread；尽管在未来的 Android 版本中情况可能会发生变化。

# user-interface - 如何测试网站的UI？

> ID：10459465
> 
> 赞同：1
> 
> 时间：2012-05-05T06:25:31.397
> 
> 标签：user-interface, testing, automation, automated-tests

我想检查 Portlet、图像、视频、文本、下拉菜单、单选按钮/复选框、页面链接、链接/图像的行为（链接是在当前窗口中打开还是打开新窗口）和所有网站测试的可能场景。对于外观和感觉，我会将其与模型进行比较。我正在通过内容管理系统（CMS）输入所有内容。我需要自动化所有这些东西。

除了 Selenium，我应该使用哪些开源工具？我可以用 Selenium 做这一切吗？

如果需要脚本，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:41:19.470

如果您不是专门针对开源，而是针对免费工具，那么您可能会考虑[Telerik 的测试框架](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)。它是免费的，带有用于工具和支持的商业变体。它有很好的跨浏览器支持，在 Windows 上处理操作系统级别的对话框（例如文件上传/下载），并且在 AJAX 支持方面有一些很棒的特性。

免责声明：我是 Test Studio 的布道者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:43:19.583

你可以用 Selenium 做到这一点。只要您的测试用例是线性的，它就不需要编写脚本，即您正在测试的服务的行为使您可以多次运行相同的测试，并且当涉及到您要检查的那些事情时系统总是以相同的方式响应.

Selenium 是可编写脚本的，但无需编写脚本即可使用。

只要您的网站基于 HTML/XML，Selenium 就可以正常工作。它不适用于 Flash 组件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:33:08.647

关于您尝试在应用程序上进行的测试的第一件也是最重要的事情是，无论您使用什么工具，最好的 UI 测试只能由人类来完成。提供您尝试检查应用程序的外观和感觉的条件。因为世界上没有任何测试工具可以比人类更好地进行 UI 测试。

**因此，我建议您最好进行手动用户界面 (UI) 测试而不是自动化。**

# android - (Android) 如何填充ListView背景并保持标题透明度

> ID：10459468
> 
> 赞同：13
> 
> 时间：2012-05-05T06:25:43.197
> 
> 标签：android, listview, background, header, transparent

我有一个自定义图像背景，它填充了 ListView 后面的整个屏幕。

ListView 有一个包含一些数据的标题，然后是一个透明的 10dp 边距（允许我们看到一点背景图像），然后是更多数据。在此标题下方，在 ListView 的“正文”中，即使其中的项目没有一直到底部，我也需要使 ListView 的背景一直填充到屏幕底部。

如果我设置 ListView 的背景，那么即使只有几个项目（或根本没有），我也会得到始终填充到屏幕底部的预期效果。但这也掩盖了标题中的 10dp 透明分隔线，因此我无法再“通过”标题看到自定义背景。

有人可以为我指出正确的路径，**既能**填充屏幕，又能保持标题内的透明分隔线？

有人顺便提到，我可能需要创建“假”项目单元格，这些单元格可用于创建 ListView 背景的错觉，而不会影响标题的透明分隔线。但是，如果可能的话，我希望找到一个更简单的解决方案。或者如果这**是**最好的解决方案，看看是否有人可以给我一些关于如何以最有效的方式完成它的指示。

谢谢！

**编辑：**

这是我定义标题的方式，尽管我认为这个问题与 ListView 的关系比我通过 addHeaderView() 添加到 ListView 的标题更多。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="wrap_content"
android:background="@android:color/transparent" android:orientation="vertical">

    <include android:id="@+view_list_header/headertop"
        layout="@layout/view_list_item"/>

    **<LinearLayout android:id="@+view_list_header/ll_transparent_filler"
    android:layout_width="fill_parent" android:layout_height="10dp"/>**     

    <RelativeLayout android:id="@+view_list_header/sort" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView.../> <ImageView.../> <TextView.../>
    </RelativeLayout>
</RelativeLayout> 
```

所以，我尝试了各种创建 10dp 填充的方法，目前我正在使用“空”10dp LinearLayout，以便我可以获得对它的引用并在我想要时将其可见性设置为 GONE（我没有这样做在我正在讨论的情况下）

我正在像这样设置 ListView 的背景：listView.setBackgroundResource(resource)。

同样，当我将背景设置为此 ListView 时，即使我添加到列表中的项目数量（顺便说一句，它们都使用与我相同的背景资源），我也会得到所需的背景行为总是填充整个屏幕设置为 ListView）不足以填满屏幕。但是当我这样做时，标题中的 10dp“透明边距”不可见，因为在它后面，ListViews 背景阻止了底层视图被看到。

**我假设发生这种情况是因为 ListView 的背景也位于 Header 和 Footer 视图的后面。**

关键是，有很多方法可以在元素之间创建一个 10dp 的“透明边距”，从而允许底层视图显示出来。我的问题在于为始终填充屏幕的**ListView“正文”**（即不是页眉/页脚）创建背景，即使列表部分填充或为空**，**同时在页眉中保留透明度，以便我仍然可以看到 ListView “后面”的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T07:42:32.647

我通过添加彩色页脚来破解它。页脚是一个LinearLayout，其中包含一个名为“fill”的视图，高度设置为5dp，带有我想要的背景颜色。

在填充和缩放我的列表标题（之前的代码）之后，我调整了页脚以填充剩余的屏幕空间：

```
 ...

    int totHeight = getTotalHeightofListView();

    if((mHeader.getMeasuredHeight() + totHeight) < mList.getMeasuredHeight())
        addFooterFill(mHeader.getMeasuredHeight() + totHeight);
}

protected int getTotalHeightofListView() {

    ListAdapter LvAdapter = mList.getAdapter();
    int totHeight = 0;
    for (int i = 0; i < mAdapter.getCount(); i++) {
        View mView = mAdapter.getView(i, null, mList);
        mView.measure(
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        totHeight += mView.getMeasuredHeight();
    }

    return totHeight; 
}

protected void addFooterFill(int sizeUsed){

    View fill = (View) mFooter.findViewById(R.id.fill);

    LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) fill.getLayoutParams();
    params.height = mList.getMeasuredHeight() - sizeUsed;
    fill.setLayoutParams(params);
} 
```

理论上，即使您已经有页脚，这也应该有效。您实际上只是在页脚中调整视图的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T04:40:33.127

您需要通过在`ListView`以下设置上使项目透明`ListView`：

```
android:background="@android:color/transparent"
android:cacheColorHint="@android:color/transparent" 
```

然后您的项目布局需要具有任何颜色/图像（这将放在透明度之上）。

这应该可行，但在 Android 上将是繁重的工作，因为透明度确实会对 Android 造成影响，尤其是`ListView`在有大量 UI 更新的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T15:59:06.100

如果有人仍然需要它，我已经找到了解决方案。我刚刚制作了顶部颜色为标题背景的drawable，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:right="-45dp" android:left="-45dp" android:bottom="-45dp">
    <shape>
        <solid android:color="@color/gray_back" />
        <stroke android:width="40dp" android:color="@color/colorPrimaryDark" />
    </shape>

</item> 
```

我知道现在可以使用`NavigationView`，但我需要快速修复当前应用程序。

# jquery - 根据屏幕大小将div插入标题？

> ID：10459469
> 
> 赞同：-1
> 
> 时间：2012-05-05T06:25:52.303
> 
> 标签：jquery, insert, media-queries, screen-size

我有一个与购物车插件一起使用的 div，该插件在侧边栏中显示购物车。

我正在构建的网站是响应式的，在设计中，当屏幕尺寸低于 1024 像素时，“Items” div 会被移动到网站的标题中

我尝试使用媒体查询隐藏和显示 div，但它们都具有相同的 ID，所以我想做的是在 1024 处说侧边栏中有“项目”，如果屏幕被调整到下方，请删除“项目”从侧边栏并将其添加到标题中。

这可能吗？

抱歉，如果这看起来很容易解决，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:37:40.757

您可以使用 jQuery 检查窗口宽度，并根据大小显示和隐藏基本 div。

```
if($(window).width() >= 1024) {
      $("#div1").show();
      $("#div2").hide();
} else {
      $("#div1").hide();
      $("#div2").show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:47:06.023

也许是这样的（未经测试，但应该让您对一种方法有一个大致的了解）。基本上，它将检查窗口大小的调整大小。如果它小于 1024，#items div 将被删除并附加到 #header。否则，它将被重新附加到#sidebar，假设它已经附加到标题中。

```
 function itemsToHeader(){

        $items = $('#items');

        if( $(window).innerheight() < 1024 ){

            if( $('#header').find('#items').length <= 0 ){
                $items.remove().appendTo('#header');
            }

        }else{
            if( $('#header').find('#items').length > 0 ){
                $items.remove().appendTo('#sideBar');
            }
        }

    }

    $(window).on('resize', function(){

        itemsToHeader();

    });

    itemsToHeader(); 
```

# c# - 如何打开笔记，从另一个应用程序（正在开发）的印象笔记（WP7）中添加图像附件

> ID：10459472
> 
> 赞同：-1
> 
> 时间：2012-05-05T06:27:04.610
> 
> 标签：c#, windows-phone-7

我必须创建一个带有图像的便笺，就像从另一个应用程序（如 skitch）（我正在开发）中所做的那样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:30:23.277

应用程序间通信不可用的是 Mango，但有传言称它是 Apollo (WP8) 的一部分。

你现在唯一的选择是与 Evernote 的服务器 API 通信（假设有）。

# post - Play framework 2.0 Form.bindFromRequest().get() 返回空模型

> ID：10459475
> 
> 赞同：2
> 
> 时间：2012-05-05T06:27:28.310
> 
> 标签：post, http-post, playframework-2.0

我需要从套接字通信接收相同的 POST 数据。

这是发送 POST 并接收响应的代码，并且似乎工作正常：

```
String data = "t=" + URLEncoder.encode("Title", "UTF-8") +
    "&u=" + URLEncoder.encode("http://www.myurl.com", "UTF-8");

URL url = new URL("http://localhost:9000/adserver");
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();

BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String output = "Data received\r\n", line;
while ((line = rd.readLine()) != null) {
    output += line;
}
wr.close();
rd.close();

return ok(output); 
```

这是接收 POST 的代码：

```
Form<AdRequest> form = form(AdRequest.class).bindFromRequest();

if(form.hasErrors()) {
    return badRequest("error");
} else {
    AdRequest adr = form.get();
    return ok(adr.t + " - " + adr.u);
} 
```

AdRequest 模型是这样定义的：

```
public class AdRequest {
    public String t;
    public String u;
} 
```

表单对象接收数据是因为我可以在调试中看到它们，但是 get() 方法返回的 adr 对象只包含空值：

```
adr = {
    t: null,
    u: null
} 
```

相反，如果我使用此代码读取数据，它可以正常工作：

```
Map<String, String[]> asFormUrlEncoded = request().body().asFormUrlEncoded();
return ok(asFormUrlEncoded.get("t")[0] + " - " + asFormUrlEncoded.get("u")[0]); 
```

我做错了什么？是 Play 框架的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T13:59:01.700

对我来说，问题似乎在于 Eclipse 干扰了代码生成，并且通常会弄乱生成的字节码。

在 Eclipse 中关闭“自动构建”解决了这个问题。

此链接有帮助：[https ://groups.google.com/forum/?fromgroups#!topic/play-framework/JYlkz_Nh31g](https://groups.google.com/forum/?fromgroups#!topic/play-framework/JYlkz_Nh31g)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-17T16:28:06.237

这个问题很老了，但我会描述我们的问题，以防万一有人遇到同样的情况。

**简短的回答**

尝试添加 setter `AdRequest`。

**长答案**

我发现现在表单模型类需要设置器，否则 Play 不会填充它们。我不知道为什么。对于一些同事来说，代码就像以前一样工作，而对我来说，Play 需要二传手。不知道。

调试`Form.bindFromRequest`，它最终到达这一行：

```
package org.springframework.beans;

class BeanWrapperImpl {
    ...
    private void setPropertyValue(BeanWrapperImpl.PropertyTokenHolder tokens, PropertyValue pv) throws BeansException {
        ...
        throw new NotWritablePropertyException(this.getRootClass(), this.nestedPath + propertyName, matches.buildErrorMessage(), matches.getPossibleMatches()); 
```

并`matches.buildErrorMessage()`构建这样的消息：

```
Bean property email is not writable or has an invalid setter method 
```

添加设置器（例如`setEmail`）后，它可以工作。

**更新：**

我们发现表单绑定依赖于**spring 框架**版本。我们使用的是**4.0.3-RELEASE**，然后我们更新到**4.0.5-RELEASE**，这就是 Play 表单开始失败的时候。

# c# - 寻找有关如何根据结果迭代表的示例或提示

> ID：10459476
> 
> 赞同：0
> 
> 时间：2012-05-05T06:27:33.453
> 
> 标签：c#, linq

我正在寻找有关如何最好地迭代具有两个列的表的示例；父母和孩子

给定父母，如果找到孩子，我想将其添加到新列表中。然后我想再次查询这次使用以前的孩子，但现在作为父母来检查这个孩子是否有孩子......等等......

我希望这是有道理的。在此先感谢您的帮助。

我在 Linq 中针对实体编写查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:39:35.390

我相信您正在寻找一种从自引用表中递归获取数据的方法。这是一篇[使用 LINQ 解释递归数据表中的父-子的文章](http://weblogs.asp.net/muhanadyounis/archive/2009/11/07/parent-child-in-recursive-data-table-with-linq.aspx)

来自文章

```
var q=  from p in yourTable
     where p.ParentID == null  // well get all parents
      select new 
       {
             ParentID = p.ParentID,
            child =  from c in yourTable
                      where c.ParentID == p.ID select
                           new  {
                                ChildID=c.ID,
                                ParentID = c.ParentID
                                }
      }; 
```

# c# - 如何使用 System.DirectoryServices.AccountManagement 在多个域中搜索？

> ID：10459477
> 
> 赞同：15
> 
> 时间：2012-05-05T06:27:41.147
> 
> 标签：c#, active-directory, ldap

我有三个或更多域，例如`main.com`,等`sub.main.com``sub2.main.com`

我有一个代码：

```
using (PrincipalContext ctx = 
    new PrincipalContext(ContextType.Domain, "ADServer", 
    "dc=main,dc=com", ContextOptions.Negotiate))
{
    UserPrincipal u = new UserPrincipal(ctx);
    u.UserPrincipalName = "*" + mask + "*";

    using (PrincipalSearcher ps = new PrincipalSearcher(u))
    {
       PrincipalSearchResult<Principal> results = ps.FindAll();
       List<ADUser> lst = new List<ADUser>();

       foreach (var item in results.Cast<UserPrincipal>().Take(15))
       {
           byte[] sid = new byte[item.Sid.BinaryLength];
           item.Sid.GetBinaryForm(sid, 0);

           ADUser us = new ADUser()
           {
               Sid = sid,
               Account = item.SamAccountName,
               FullName = item.DisplayName
           };

           lst.Add(us);
       }

    }

    return lst;
} 
```

但它只在一个域内搜索：`main.com`.

如何一次搜索所有域中的记录？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-22T07:15:16.703

您应该使用 GC 而不是 LDAP。它沿着整个域森林搜索

```
var path = "GC://DC=main,DC=com";

try
{
    using (var root = new DirectoryEntry(path, username, password))
    {
        var searchFilter = string.Format("(&(anr={0})(objectCategory=user)(objectClass=user))", mask);
        using (var searcher = new DirectorySearcher(root, searchFilter, new[] { "objectSid", "userPrincipalName" }))
        {
            var results = searcher.FindAll();
            foreach (SearchResult item in results)
            {
                //What ever you do
            }
        }
    }
}

catch (DirectoryServicesCOMException)
{
    // username or password are wrong
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-10T04:05:46.777

这是一种从根目录中查找所有域的方法：

```
/* Retreiving RootDSE
 */
string ldapBase = "LDAP://DC_DNS_NAME:389/";
string sFromWhere = ldapBase + "rootDSE";
DirectoryEntry root = new DirectoryEntry(sFromWhere, "AdminLogin", "PWD");
string configurationNamingContext = root.Properties["configurationNamingContext"][0].ToString();

/* Retreiving the root of all the domains
 */
sFromWhere = ldapBase + configurationNamingContext;
DirectoryEntry deBase = new DirectoryEntry(sFromWhere, "AdminLogin", "PWD");

DirectorySearcher dsLookForDomain = new DirectorySearcher(deBase);
dsLookForDomain.Filter = "(&(objectClass=crossRef)(nETBIOSName=*))";
dsLookForDomain.SearchScope = SearchScope.Subtree;
dsLookForDomain.PropertiesToLoad.Add("nCName");
dsLookForDomain.PropertiesToLoad.Add("dnsRoot");

SearchResultCollection srcDomains = dsLookForDomain.FindAll();

foreach (SearchResult aSRDomain in srcDomains)
{
} 
```

然后foreach域，你可以找你需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-20T17:18:25.543

要实际使用 System.DirectoryServices.AccountManagement 进行搜索，请按如下方式指定域：

```
new PrincipalContext(ContextType.Domain, "xyz.mycorp.com:3268", "DC=mycorp,DC=com"); 
```

从 [什么时候开始需要域名和域容器来创建 PrincipalContext？](https://stackoverflow.com/questions/23559710/when-do-i-need-a-domain-name-and-a-domain-container-to-create-a-principalcontext)

# android - 使用 OpenGL ES 为图形引擎编写动态着色器管道

> ID：10459485
> 
> 赞同：0
> 
> 时间：2012-05-05T06:29:03.327
> 
> 标签：android, c++, android-ndk, opengl-es-2.0

我不确定这是否是正确的术语，但我相信我正在尝试做的是在 OpenGL ES 2.0 上为 GLSL 着色器编写一个“管道”。这个想法是，如果你愿意，这将是一个方便的组件，它将进入我引擎的图形管道。我的目标平台是安卓。我想对我背后的设计方法提出一些批评。简而言之，我似乎面临着要么创建一个动态处理管道，我只能简单地指定一些设置并为其添加值，要么自动化程度最低，但仍然保持相对较低的水平编写了多少代码，以及代码在做什么。

**细节**

到目前为止，我的设计方法如下：

*   着色器文件存储在 assets 文件夹中
*   Java 充当前端，获取所有着色器文件，并将每个文件存储在一个 Shader 对象中，该对象包含有关着色器类型和原始着色器源的信息。
*   *Java 然后将这些自定义着色器对象（即，还不*是 OpenGL 着色器对象）数组中的着色器数据发送到 C++，然后由 JNI 解析。
*   之后，JNI 将通过 Java 获得的着色器源发送到 ShaderHandler 类单例，该类单例保存`std::vector< std::vector< GLuint > >`每种着色器的多维（一个用于顶点，一个用于片段，一个用于纹理等）。
    *   ShaderHandler 类将着色器对象编译和链接到可编程接口中，一旦完成，它通过将其功能扩展到充当 ShaderVariable 处理程序的组件类，通过动态分配值来引导大部分繁重的工作。例如，一次可以简单地指定一个值/向量/矩阵/whatever 和要修改的索引数量，并将其传递给 ShaderVariable 处理程序。一旦 SVH 获得，它就会将其存储在 a 中`std::map`，使用变量的名称作为其标识符。
*   当提示时，这些 SVH 对象（存储在位于 ShaderHandler 类中的向量中）本质上动态*绑定*其 std::maps 中存在的任何值的属性和制服。

分配的一些内存是通过指针完成的，但不可否认，其中大部分是由堆栈组成的。我想知道我是否应该为此考虑更多的动态内存分配，因为在Android手机上，我认为堆栈溢出可能非常非常容易通过这样的方法实现，对于具有良好图形等的雄心勃勃的游戏。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T01:57:41.740

好的，所以我用我工作的图形引擎做了一些*非常相似的事情。*主要区别是我在 C++ 端做所有事情，而在 Java 端什么都不做（不是一件事），这消除了 JNI 障碍。

另外，我抽象了一些东西，因为我对 OpenGL 和 DX9 做同样的事情。

一些提示：

*   顶点和片段着色器是链接到着色器“程序”的单独文件。按文件夹指定程序，然后在文件夹中搜索“gles2.vert”和“gles2.frag”。将来搜索'gles3.vert'/'gles3.frag'或'dx11.vert'/'dx11.frag'等。
*   在源代码中嵌入了“默认”着色器。这允许您用默认值替换丢失的顶点/片段着色器。你不会相信顶点着色器是默认着色器的次数
*   在链接之前，绑定您的属性位置。有一个预定义的属性名称/类型列表。着色器不使用属性也没关系。
*   链接后，获取统一位置并将它们存储在您的 SVH 中。std::map 将允许您指定一个不区分大小写的 Functor。此外，在运行时很容易推断出统一类型，以便在设置值时进行简单的类型检查。
*   此外，在链接后使用 glUniform1i 设置采样器位置。这是为了使`texN`[0..N] 制服指向正确的采样器。
*   SVH 将具有默认值，或者您将需要一个标志来确定用户是否设置了值。
*   为程序保留一个状态。该程序可能有一个 std::map，但您需要为用户设置制服提供一个用户状态。这种状态使您可以使用具有不同统一值的相同着色器程序。用户状态不需要统一位置，因为它们将由程序 svh 映射解决。这使您无需绘制调用即可聚合统一值。

绘画

*   显式绑定和取消绑定采样器，不要自动执行。很高兴能够在 sampler[1] 上加载 color_lut 并将 sampler[0] 作为多个不同调用的纹理运行。
*   绑定程序之后，但在绘制之前，使用程序状态中的位置从用户状态解析和设置制服。

保持着色器程序、采样器和几何体彼此不知道。这种不可知的方法可以让您执行一些很酷的效果，例如我之前提到的 color_lut 着色器可以工作，因为几何体没有明确设置着色器并且不会消除采样器状态。这是一个可堆叠的材料系统。

我执行了一项检查，即在绑定着色器程序之前查看是否设置了 sampler0，如果是（并且没有明确设置着色器），那么我将设置一个默认的纹理着色器。如果不存在纹理（并且如果设置为默认纹理着色器），我将回退到一个简单的颜色着色器。如果着色器程序不是 [null, defaultTex] 那么我不会搞砸它。

不要害怕问任何其他问题。

# c# - 跨多个类实例存储和检索控制值 C#

> ID：10459486
> 
> 赞同：0
> 
> 时间：2012-05-05T06:29:14.450
> 
> 标签：c#, treeview, instances, storage

我不是在寻求答案，而是在寻求创建更好解决方案的想法和建议。我什至在寻找一些基本的面向对象设计理论的参考，因为我觉得这一定是一个常见的场景，但我不知道如何正确地用它来找到可靠的搜索结果。

我提出了这个例子（我将省略代码，因为它很容易解释）：我有一个包含一个树视图、一个按钮和一个文本框的表单。我还有一个类，TextClass，它有 2 个字符串：文本和名称。

单击按钮时：

*   创建一个新的树节点。为 TreeNode 分配一个唯一名称（例如：“Instance1”）并将其添加到 Treeview
*   创建类的一个实例，TextClass。将唯一名称（例如：“Instance1”）分配给 TextClass.Name
*   将此 TextClass 的新实例添加到列表 TextClassList

在 Treeview 中单击节点时：

*   遍历列表 TextClassList，找到与当前选定的 TreeNode.Name 匹配的 TextClass.Name 字符串
*   然后设置：Textbox.Text = TextClass.Text

当触发 Textbox_TextChanged 时：

*   遍历列表并找到与当前选定的 TreeNode、TreeNode.Name 匹配的 TextClass.Name 字符串
*   然后设置：TextClass.Text = Textbox.Text

所有这些工作都很好，但是看起来……草率。我在问是否有更好/正确的方法来处理这种存储和检索值的方法。如果这是一个 OOP 基础，我会很感激一些我可以做一些搜索的关键字。

谢谢你，道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:28:09.377

TreeNode 具有`Tag`可用于存储与该节点关联的数据的属性。`TextClass`因此，您可以使用每个新创建的节点存储实例。这样您就不必维护额外的列表并将其与 TreeNode 同步。

我也不会依赖关联的显示名称：如果您希望名称是可更改的，或者如果允许两个节点具有相同的名称，则会遇到问题。

`Tag`另一个问题是，如果那里没有财产，你将如何做到这一点。然后，我将使用 Dictionary 将 TreeNode 实例映射到 TextClass 实例。

因此，如果我要对此做出一般规则：

*   尽可能使用真实引用而不是字符串来引用实例。
*   不要使用显示名称进行识别

# java - 公共静态变量和私有静态变量之间的区别

> ID：10459487
> 
> 赞同：12
> 
> 时间：2012-05-05T06:29:29.563
> 
> 标签：java, variables, static, private, public

```
class Employee{
 // salary  variable is a private static variable
private static double salary;

// DEPARTMENT is a constant
 public static final String DEPARTMENT = "Development";

public static void main(String args[]){
   salary = 1000;
  System.out.println(DEPARTMENT+  "  average salary:"+salary);
}
} 
```

这个 java 程序包含一个静态变量。但我无法理解公共静态变量和私有静态变量之间的区别。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-05T06:36:33.070

*   可以`public`从任何地方访问变量（嗯，可以访问类的任何地方）。

*   `private`变量只能在类内部访问。

*   `static`变量属于类而不是类的实例。

*   请注意，变量`DEPARTMENT`也是`final`，这意味着一旦设置它就不能修改。这在这里很重要，因为这可以避免它成为糟糕的代码——变量是一个常量，所以可以让类之外的东西访问它。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-05T06:32:14.933

公共变量在代码中的*任何地方*都可以访问- 私有变量只能在类本身中访问。在这种情况下，您在课堂上使用`Employee.salary`，`Employee`所以没关系。

请注意，静态变量是一个完全独立的问题——方法和类与变量一样具有可访问性。

还有其他可用的访问级别 -`protected`以及默认的“包”访问（无法明确指定）。有关详细信息，请参阅[Java 语言规范的第 6.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)。

（作为一个附带问题，它也值得学习什么`static`意思 - 你几乎肯定*不*希望这些变量是静态的，因为它们适用于*每个* `Employee`变量而不是一般的概念。在这里成为一个常数也很`Employee`奇怪。 `DEPARTMENT`)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T06:38:48.927

```
private static double salary 
```

仅在类中可用，并且可以作为

```
salary or Employee.salary 
```

尽管

```
 public static final String DEPARTMENT 
```

也可以从此类外部访问，如下所示

```
Employee.DEPARTMENT 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-22T12:34:32.070

`public static`- 可以从班级内部和班级外部访问。

`private static`- 只能从班级内部访问。

在 OOPS 中，静态被认为是反 OO 的。

```
class Dog
{
    public static string X;
    private static string y;
} 
```

`y`只能`Dog`通过 any`Dog.y`或 just从内部访问`y`。 `X`可以通过任何地方访问，`Dog.X`或者，如果您在课堂上或`using static Dog`用作标题，只需`X`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T06:31:13.843

显然，你不能`private`从类外部访问静态变量，你可以`public`从任何地方访问静态变量。

# python - Find indexes of sequence in list in python

> ID：10459493
> 
> 赞同：6
> 
> 时间：2012-05-05T06:31:13.650
> 
> 标签：python, list

I am quite new and I hope it's not too obvious, but I just can't seem to find a short and precise answer to the following problem.

I have two lists:

```
a = [2,3,5,2,5,6,7,2]
b = [2,5,6] 
```

I would like to find when all the indexes of the second list (`b`) are in the first list (`a`), so that I get something like this:

indexes of b in a: `3, 4, 5` or `b = a[3:6]`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T06:42:15.700

With a list comprehension:

```
>>> [(i, i+len(b)) for i in range(len(a)) if a[i:i+len(b)] == b]
[(3, 6)] 
```

Or with a for-loop:

```
>>> indexes = []
>>> for i in range(len(a)):
...    if a[i:i+len(b)] == b:
...        indexes.append((i, i+len(b)))
... 
>>> indexes
[(3, 6)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-07T10:17:28.193

Also, for efficiency, you can use KMP algorithm that is used in string matching ([from here](https://www.geeksforgeeks.org/python-program-for-kmp-algorithm-for-pattern-searching-2/)):

```
def KMPSearch(pat, txt): 
    M = len(pat) 
    N = len(txt) 

    # create lps[] that will hold the longest prefix suffix  
    # values for pattern 
    lps = [0]*M 
    j = 0 # index for pat[] 

    # Preprocess the pattern (calculate lps[] array) 
    computeLPSArray(pat, M, lps) 

    i = 0 # index for txt[] 
    while i < N: 
        if pat[j] == txt[i]: 
            i += 1
            j += 1

        if j == M: 
            print("Found pattern at index " + str(i-j))
            j = lps[j-1] 

        # mismatch after j matches 
        elif i < N and pat[j] != txt[i]: 
            # Do not match lps[0..lps[j-1]] characters, 
            # they will match anyway 
            if j != 0: 
                j = lps[j-1] 
            else: 
                i += 1

def computeLPSArray(pat, M, lps): 
    len = 0 # length of the previous longest prefix suffix 

    lps[0] # lps[0] is always 0 
    i = 1

    # the loop calculates lps[i] for i = 1 to M-1 
    while i < M: 
        if pat[i]== pat[len]: 
            len += 1
            lps[i] = len
            i += 1
        else: 
            # This is tricky. Consider the example. 
            # AAACAAAA and i = 7\. The idea is similar  
            # to search step. 
            if len != 0: 
                len = lps[len-1] 

                # Also, note that we do not increment i here 
            else: 
                lps[i] = 0
                i += 1

a = [2,3,5,2,5,6,7,2]
b = [2,5,6]
KMPSearch(b, a) 
```

This find the first index of the `b` in `a`. Hence, the range is the result of the search and its plus to the length of `b`.

# ios - 如何使用 Forge 关闭 iOS 图标的眩光/闪耀？

> ID：10459496
> 
> 赞同：2
> 
> 时间：2012-05-05T06:31:23.860
> 
> 标签：ios, trigger.io

我已经在我的 forge 版本 (3.3.0) 中捆绑了所需的 iOS 图标。但我想关闭 iOS 默认添加的眩光。有没有办法在 config.json 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:06:49.690

自 config.json 中的 v1.3 以来，这已通过“预渲染”选项解决 -

[http://docs.trigger.io/en/v1.3/modules/icons.html](http://docs.trigger.io/en/v1.3/modules/icons.html)

```
 "ios": {
            "57": "icon57.png",
            "72": "icon72-ios.png",
            "114": "icon114.png",
            "prerendered": true
        } 
```

> 将此设置为 true 将阻止 iOS 将光泽效果应用于您的图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:06:18.980

我们收到了另一位用户的这个请求：它在我们的积压工作中，我们正在跟踪它。

我目前最好的估计是它应该在 2012 年 5 月 21 日之前完成并准备好使用。

# iphone - Xcode 4.2 , 将 iPhone xib 更改为 iPad xib

> ID：10459498
> 
> 赞同：5
> 
> 时间：2012-05-05T06:31:57.250
> 
> 标签：iphone, ios, ipad, xib

我创建了由 5 个 xib 组成的项目。当我尝试在 iPad 模拟器中运行该项目时。一些 Xib 将采用 iPhone 屏幕尺寸。我想转换那些支持 iPad Xib 屏幕尺寸的 iphone xib。知道怎么做吗？

注意：我想同时支持 iPhone 和 iPad

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T06:41:03.297

您可以使用以下步骤将 iPhone xib 转换为 iPad xib。

> > 右键单击文件（在 xcode 中）并打开为 > 源代码
> > 
> > 第二行应如下所示：

```
<archive type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="7.10">
Replace with:

<archive type="com.apple.InterfaceBuilder3.CocoaTouch.iPad.XIB" version="7.10"> 
```

> > 搜索“IBCocoaTouchFramework”并将所有出现的地方替换为“IBIPadFramework”
> > 
> > 保存文件并打开为 > Interface Builder - iOS

您可以为 al xib 执行此操作……并且您现在在 iPad xib 中拥有 iPhone xib。

希望对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:32:27.063

我刚刚复制了旧的 Xib，最后将其重命名为 ~ipad。并且在源代码中而不是 320*480 我已经替换了 iPad 分辨率。我的 UI 即界面生成器看起来像 iPad，我的应用程序正在检测 ipad xib 的 . 感谢每一个人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T06:37:02.577

我想对你会有帮助

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
        } else {
            self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T06:37:49.973

然后你应该创建你的项目或更新你的项目通用并更改 ipad xib 设置并自动调整它的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T05:38:03.180

它对我有用：

在 Finder 中制作 .xib 的副本。在文本编辑器中打开复制的文件。将“com.apple.InterfaceBuilder3.CocoaTouch.XIB”更改为“com.apple.InterfaceBuilder3.CocoaTouch.iPad.XIB”。将“IBCocoaTouchFramework”的所有实例更改为“IBIPadFramework”。搜索 {480, 320} 等尺寸并进行修改。或者只是在 Xcode 中重新打开文件并使用 GUI 根据需要调整项目的大小。如果您需要将 iPad xib 更改为 iPhone xib，这也适用于反之亦然。

# java - 使用 WordNet 时出现 ExceptionInInitializerError

> ID：10459499
> 
> 赞同：2
> 
> 时间：2012-05-05T06:32:08.063
> 
> 标签：java, wordnet

我最近决定为 WordNet 的 Java 接口下载 JWNL。按照各种教程（如[http://jwordnet.sourceforge.net/handbook.html](http://jwordnet.sourceforge.net/handbook.html)），我下载了 WordNet（2.1），然后下载了 JWNL，将 file_properties.xml 中的 dictionary_path 行设置为 WordNet 的路径。

```
<param name="dictionary_path" value="c:/res/wordnet/2.1/dict"/> 
```

我将所有 jars 添加到我的类路径中，并且在 Eclipse 中，我创建了以下简单的测试类：

```
 public static void main(String[] args) throws FileNotFoundException, 
                                             JWNLException {
          JWNL.initialize(new FileInputStream("C:\\path\\file_properties.xml"));
          Dictionary wordnet = Dictionary.getInstance();

          IndexWord word = wordnet.getIndexWord(POS.NOUN, "monarch");
          for(Synset syn : word.getSenses()) {
               System.out.println(syn.getGloss());
          }
    } 
```

在 Eclipse 中运行会产生以下错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at net.didion.jwnl.util.factory.Element.install(Element.java:31)
at net.didion.jwnl.JWNL.initialize(JWNL.java:169)
at TestingOnWordNet.main(TestingOnWordNet.java:28)

Caused by: org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationException: java.lang.NullPointerException (Caused by java.lang.NullPointerException) (Caused by org.apache.commons.logging.LogConfigurationException: java.lang.NullPointerException (Caused by java.lang.NullPointerException))
at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:543)
at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:209)
at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
at net.didion.jwnl.util.MessageLog.<init>(MessageLog.java:11)
at net.didion.jwnl.dictionary.Dictionary.<clinit>(Dictionary.java:24)
... 5 more

Caused by: org.apache.commons.logging.LogConfigurationException: java.lang.NullPointerException (Caused by java.lang.NullPointerException)
at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogFactoryImpl.java:397)
at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)
... 10 more

Caused by: java.lang.NullPointerException
at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor(LogFactoryImpl.java:374)
... 11 more 
```

有什么我想念的吗？我正准备寻找像 JAWS 这样的替代方案，但我希望有办法解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T14:44:24.380

您没有将 jars 添加到类路径中。将 lib/commons-logging.jar 添加到类路径。

# wordpress - 如何检查查询在wordpress中有结果？

> ID：10459502
> 
> 赞同：0
> 
> 时间：2012-05-05T06:32:27.227
> 
> 标签：wordpress, search

我使用下面的代码在 wordpress 中使用了自定义类别搜索。

```
<?php

function mySearchFilter($query) {

    if (isset($_GET['post_type']) && $_GET['post_type'] == 'demotheme') { 
   $post_type = "dtheme";
    }
    if ($query->is_search) {        

            $query->set('post_type', $post_type);
    };

    return $query;
};

add_filter('pre_get_posts','mySearchFilter');
?> 
```

在上面`$query->set('post_type', $post_type);`已经返回了一组结果。在这里我需要检查它是否返回空结果，我需要放置，

`$query->set('post_type', "dplugins");`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:46:45.290

如果结果集是一个数组，您可以简单地使用此代码

```
$res = $query->set('post_type', $post_type);

if ($res)
    // add your code here! 
```

还有一些很好的函数可以检查返回值“is_null()”、“isset()”、“is_array()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:58:07.013

我扩展了 MJ.Ahmadi 的答案并将其插入到您的代码中。

```
 if (isset($_GET['post_type']) && $_GET['post_type'] == 'demotheme') { 
        $post_type = "dtheme";
    }
    if ($query->is_search) {
        $result = $query->set('post_type', $post_type);
    };
    if($result){
        return $query;
    } else{
        $result = $query->set('post_type', "dplugins");
        if($result){
            return $query;
        }
    }
};

add_filter('pre_get_posts','mySearchFilter');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:19:22.410

谢谢你的回答，

我两者都用下面一个，效果很好。

```
<?php

function mySearchFilter($query) {    
    if ($query->is_search) {        
        $query->set('post_type', array('post','page','attachment','dtheme','dplugins'));
    };
    return $query;
}

add_filter('pre_get_posts','mySearchFilter');
?> 
```

# c++ - 不稳定的声明行为：Rational.h:25：错误：预期的构造函数、析构函数或“&”标记之前的类型转换

> ID：10459503
> 
> 赞同：0
> 
> 时间：2012-05-05T06:32:33.420
> 
> 标签：c++

所以，我在这个头文件中遇到了流插入运算符重载的问题。如果我按原样使用代码，我会在标题中收到错误消息。但是当我将声明放在主文件中时，它工作正常。

理性.h

```
#ifndef RATIONAL_H
#define RATIONAL_H

using namespace std;
class Rational{
private:
    int numerator;
    unsigned int denominator;
    bool isNegative;

public:
    Rational();
    Rational(int);
    Rational(int, int);

    bool operator==(const Rational&);
    Rational& operator++(int);          //Unused int
    Rational operator-(const Rational&);
    Rational operator+(const Rational&);
    Rational operator*(const Rational&);
    Rational operator/(const Rational&);
};

ostream& operator<<(ostream&, Rational&); //Erroneous code

#endif 
```

其他两个文件，1.c 和 Rational.c（如果需要）：

```
#include "Rational.h"
#include <iostream>
#include <math.h>

using namespace std;

Rational::Rational(){
numerator   = 0;
denominator = 1;
}

Rational::Rational(int num){
numerator   = num;
denominator = 1;     
}

Rational::Rational(int num, int den){
//Determine negativity
if(num < 0 xor den < 0){    //If negative
    if(num > 0){
        num *= -1;
    }
}

numerator   = num;
denominator = abs(den);  
}

bool Rational::operator==(const Rational& rhs){
return (numerator/(double)denominator == rhs.numerator/(double)(rhs.denominator));
}

ostream& operator<<(ostream& os, Rational& input){
os << "Moo";
return os;
}
/*
private:
    int  numerator;
    unsigned int  denominator;
    bool isNegative;

public:
    Rational(int, int);

    bool operator==(const Rational&);
    Rational& operator++(int);          //Unused int
    Rational operator-(const Rational&);
    Rational operator+(const Rational&);
    Rational operator*(const Rational&);
    Rational operator/(const Rational&);
*/ 
```

1.c

```
#include <iostream>
#include "Rational.h"

using namespace std;

int main(){
Rational test = Rational(2);

cout << test << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:37:20.677

你需要`iostream`在你的`Rational.h`

**//Rational.h**

```
#include <iostream> 
```

当您将重载声明放入`1.c`,`iostream`之前包含在内`Rational.h`，因此编译器知道类型`ostream`并且没有错误。

但是，在这种情况下`Rational.h`不包括`iostream`，编译器不知道类型`ostream`，因此不知道错误。

# php - 来自二维数组 PDO 的树

> ID：10459520
> 
> 赞同：0
> 
> 时间：2012-05-05T06:34:36.260
> 
> 标签：php, arrays, tree

我想不通。我有mysql表：

```
id  |  name    |  sub

1   | FirstTab |  0
2   | SecondTab|  0
3   | ThirdTab |  0
4   | FourthTab|  1
5   | FifthTab |  1
6   | SixthTab |  2 
```

我想看到这样的树：

```
- FirstTab
-- FourthTab
-- FifthTab
- SecondTab
-- SixthTab
- ThirdTab 
```

所以我得到了

```
$sth = $this->db->prepare('SELECT ...');
$sth->execute();
$sth->fetchAll(); 
```

以及如何从 $sth 制作树？Foreach 没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:22:01.950

我了解了有关 PDO 的更多信息并解决了我的问题。

# c# - 复制到数据库时 C# 程序出错

> ID：10459521
> 
> 赞同：2
> 
> 时间：2012-05-05T06:34:36.797
> 
> 标签：c#, database, forms, syntax

```
namespace DB1
{
    public partial class Form1 : Form
    {
        private void button1_Click(object sender, EventArgs e)
        {
            String query="INSERT INTO  Student 
            VALUES("+textBox1.Text+"','"+textBox2.Text+"','"+textBox3.Text+"',
            '"+textBox4.Text+")";

            OleDbConnection conn = new 
            OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;
            Data Source=C:\\Database11.accdb");
            OleDbCommand cmd = new OleDbCommand(query,conn);
            conn.Open();
            cmd.ExecuteNonQuery();
            MessageBox.Show("data stored succesfully");
            conn.Close();
            textBox1.Text = (Convert.ToInt32(textBox1.Text) + 1).ToString();
            textBox2.Text = (Convert.ToInt32(textBox2.Text) + 1).ToString();
            textBox3.Text = (Convert.ToInt32(textBox3.Text) + 1).ToString();
            textBox4.Text = (Convert.ToInt32(textBox4.Text) + 1).ToString();
            textBox1.Focus();

        }
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            autonum();
        }

        private void autonum()
        {
            string query;

            query = "Select max(Stdno) from student";
            OleDbConnection conn = new      
            OleDbConnection("Provider=Micrsoft.ACE.OLEDB.12.0;
            Data Source=datasource");
            OleDbCommand cmd = new OleDbCommand(query,conn);
            conn.Open();
            try
            {
             OleDbDataReader dr =cmd.ExecuteReader();
                if(dr.Read())
                {
                    textBox1.Text = (Convert.ToInt32(dr[0])+1).ToString();
                }
                else
                {
                    textBox1.Text="1001";
                }

                dr.Close();
            }
        catch(Exception ex)
            {
                MessageBox.Show(ex.Message);
               textBox1.Text = "1001";
            }
            conn.Close();
        }
    }
} 
```

错误是：

> oledb 异常未处理 查询表达式“2”、“wse”、“22”、“assd”中的语法错误（缺少运算符）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T06:43:09.460

不要使用字符串连接来构建您的查询。改用参数：

```
string query = "INSERT INTO Student VALUES (@P1, @P2, @P3, @P4)";
// ...
cmd.Parameters.Add(new OleDbParameter("@P1", textBox1.Text));
cmd.Parameters.Add(new OleDbParameter("@P2", textBox2.Text));
cmd.Parameters.Add(new OleDbParameter("@P3", textBox3.Text));
cmd.Parameters.Add(new OleDbParameter("@P4", textBox4.Text)); 
```

我还建议：

*   明确列出插入语句中的列。
*   为您的文本框使用描述性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T07:06:36.800

我支持您应该始终使用参数的概念，否则您会打开数据库。例如，

```
sql = "SELECT * FROM tablename WHERE column='" + var _+"'"; 
```

可以变成

```
SELECT * FROM tablename WHERE column='';SELECT 'i can hack you if you do this' 
```

参数可以防止这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:42:14.560

我支持你，因为这是人们一直不知道自己在做什么的非常基本的标准错误之一。

您的问题是您将文本框中的字符串放入 SQL 字符串的方式。

首先，有一个错误——您应该通过查看您生成的 SQL 知道这一点。

```
...Student VALUES("+textBox1.Text+"'... 
```

这在第一个“之前缺少'，对不起。BLABLA作为文本变成

```
VALUES(BLABLA' 
```

这是非法的sql。

而不是来到这里，您应该在分配后查看查询变量的值 - 在调试器中很容易做到，并且您可以看到您没有形成您认为正在形成的 SQL。

其次，如果你的任何文本框包含一个 ' 你真的注定要失败 - 这是一种很好的表达方式（任何版主认为这是不恰当的，请删去这个词）。我可以通过操纵我们的文本框来注入任何我想要的任意 SQL，这称为 SQL 注入攻击。阅读它（“SQL 注入”作为 google 的关键字），然后修复它并使用参数。总是。你这样做的方式让你在一些项目组中被解雇，因为你不知道如何编写安全的 SQL 代码。

# android - 将自定义字符放在点击默认数字键盘上

> ID：10459522
> 
> 赞同：0
> 
> 时间：2012-05-05T06:34:52.023
> 
> 标签：android, android-layout, android-edittext, android-keypad

我有一些数字字符图像，如下图所示：

![在此处输入图像描述](../Images/5cec2db13d53e1d8013fd6b9b8a7c585.png)![在此处输入图像描述](../Images/1ee7ccbd74c12bbbbd73ffda1297c39d.png)![在此处输入图像描述](../Images/5a425b3486a1db60a34220e0153204a2.png)![在此处输入图像描述](../Images/eb32cee032b88cc22f114c6f7edaffb0.png)..... ETC

现在，我想要的是，当用户单击数字键盘“1”时，打印上面图像中的 1 图像，当用户单击数字键盘“2”时，打印上面图像中的 2 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:49:23.060

将 ImageView 添加到您的布局文件中，假设文件名是`main.xml`：

```
<ImageView android:id="@+id/digitImage" android:layout_width="wrap_content"
    android:layout_height="wrap_content"> 
```

在加载此布局文件的 Activity 中：

```
// declare digitImage as an instance variable
ImageView mDigitImage;
public void onCreate(Context ctx, AttributeSet attr) {
    // ... some init code..
    setContentView(R.layout.main);
    mDigitImage = (ImageView) findViewById(R.id.digitImage);
}

// in onKeyDown method
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) { 
    switch (keyCode) {
        case KeyEvent.KEYCODE_1:
            mDigitImage.setImageResource(R.drawable.digit1);
            break;
        case KeyEvent.KEYCODE_2:
            mDigitImage.setImageResource(R.drawable.digit2);
            break;
        case KeyEvent.KEYCODE_3:
            ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:00:13.037

您可以使用此图像创建字体，然后将它们添加到项目的资产文件夹中。

在您的 Activity 的 onCreate() 中：

```
Typeface someFontTypeFace = Typeface.createFromAsset(getAssets(), "fonts/some_font.ttf");
EditText editText = (EditText) findViewById(R.id.editText);
editText.setTypeface(someFontTypeFace); 
```

我这样做是为了在我的项目中显示波斯和数字数字，它对我来说很好：

![在此处输入图像描述](../Images/448c5132e9f078d01abced523ddd94ca.png)---- ![在此处输入图像描述](../Images/fdc7b32f5b10c9774de45c62684c67e9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:49:38.693

首先你需要创建一个地图，如：

```
Map<Integer, Integer> map = new HashMap<Integer, Integer>(); 
```

并像这样设置值：

```
map.put(KeyEvent.KEYCODE_0, R.drawable.0);
map.put(KeyEvent.KEYCODE_1, R.drawable.1);
..... 
```

在 onKeyDown() 方法中：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

       Integer image = map.get(keyCode);
       if(image != null) {
           imageView.setImageResource(image);
       }
        return super.onKeyDown(keyCode, event);
    } 
```

# python - 将 Python 与 R 集成

> ID：10459526
> 
> 赞同：4
> 
> 时间：2012-05-05T06:35:50.493
> 
> 标签：python, r, interface, integration

1.  我正在尝试安装适当的包以允许从 Python 轻松访问 R。

2.  据我了解，我必须使用一个名为 easy_install 的命令来安装一个名为 py2 的程序

3.  但要做到这一点，我必须通过运行下载的 .egg 文件来安装 easy_install，就好像它是一个 shell 脚本一样。

如何像运行 shell 脚本一样运行下载的文件？一旦我这样做了，如果我只运行easy_install py2，是否会安装R接口。

适当的链接在这里：

1.  [http://rpy.sourceforge.net/rpy2_download.html](http://rpy.sourceforge.net/rpy2_download.html)

2.  [http://peak.telecommunity.com/DevCenter/EasyInstall](http://peak.telecommunity.com/DevCenter/EasyInstall)

3.  [http://pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T17:14:04.297

我建议首先安装 pip，它是 easy_install 的替代方案。

我不确定 OSX 附带了哪些工具来下载 pip（curl、wget）的引导代码，但我假设你已经安装了 python 2.X，你可以检查一下

```
python --version 
```

运行以下 python 程序，将其保存为 download.py，然后运行“python download.py”：

```
import os
import urllib2
from subprocess import call

def download_file_and_run(url):
    basename = os.path.basename(url)
    fp = urllib2.urlopen(url)
    open(basename, 'wb').write(fp.read())
    fp.close()
    call(['python', basename])

download_file_and_run('http://python-distribute.org/distribute_setup.py')
download_file_and_run('https://raw.github.com/pypa/pip/master/contrib/get-pip.py') 
```

现在

```
pip --version 
```

应该给你一个像 1.1 这样的版本号

现在使用以下命令安装 rpy2：

```
pip install rpy2 
```

这假设 R 已安装，否则安装程序将报错：尝试猜测 R 的 HOME 但路径中没有 R 命令。

# eclipse - XobotOS 的构建问题

> ID：10459530
> 
> 赞同：6
> 
> 时间：2012-05-05T06:37:13.373
> 
> 标签：eclipse, build, mono, sharpen-tool, xobotos

我正在尝试构建 Xamarin 在 Github 上发布的[XobotOS](https://github.com/xamarin/XobotOS)源代码，并且我正在使用根文件夹中 README.build 文档中提供的指南。我已经成功地执行了自述文件中提到的所有步骤，但由于某种原因，eclipse 的第二个实例没有生成任何东西。我会很感激我能得到的任何帮助。谢谢。

以下是一些可能有用的其他细节：

操作系统：Ubuntu 11.04
Eclipse：Eclipse SDK 4.2 (Juno)
Mono：？（我不确定我可能使用的是从源代码构建的破解版）

同时，我将尝试下载 OpenSUSE 并再次尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:05:25.867

我最近也读到了相同的内容，并且在多次尝试后设法将其构建到一半。下面是我的配置。

*   Ubuntu：12.04
*   日食：3.7.2
*   Mono：2.10.8.1（来自 Ubuntu 存储库本身的 eclipse 和 mono）

只需遵循 README.build 指南。获得日食/锐化对我来说也很困难。通过上述所有设置，我得到一个空的输出文件夹。取消选中自动构建标志并进行手动构建。之后它对我有用。构建 C# 代码非常简单。尚未尝试构建 Skiya 和其他库。

我必须在 XobotActivityManager.cs 文件中做一些小改动才能让它工作。更改了下面的行

```
if (now >= at) {
    ThreadPool.QueueUserWorkItem ((state) => control.Invoke (dispatch)); 
```

至

```
if (now >= at) {
    if(control.IsHandleCreated)
        ThreadPool.QueueUserWorkItem ((state) => control.Invoke (dispatch)); 
```

*更新* 我最近尝试了 eclipse juno，但它不再起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:50:52.413

Ubuntu 11.04 包含一个非常旧的 Mono 版本。

我会尝试使用 Ubuntu 12.04（或者如果仍然失败，请在 Ubuntu 12.04 中使用 direchtex 的 PPA），或者正如 Lex Li 已经建议的那样，尝试使用 openSUSE 12.1。

# c++ - Qt + VS2010：程序无法启动，因为 您的计算机中缺少 .dll

> ID：10459535
> 
> 赞同：4
> 
> 时间：2012-05-05T06:38:01.507
> 
> 标签：c++, visual-studio-2010, qt

我从以下 .pro 文件创建了一个 Visual Studio 2010 解决方案：

```
TEMPLATE    = app
CONFIG      += qt yyy zzz debug_and_release
TARGET  = XYZdepth

INCLUDEPATH += .

#HEADERS     = 
SOURCES  = main.cpp xyzMainWidget.cpp

yyy {
        LIBS += $(YYY_DIR)/release/yyy.lib
        INCLUDEPATH += $(YYY_DIR)
}

zzz {
    LIBS += $(ZZZ_DIR)/lib/x86/ZZZ.lib
    INCLUDEPATH += $(ZZZ_DIR)/inc

} 
```

当然，我已经替换了那里的一些关键词。它引用 yyy.lib，它有一个对应的 DLL：yyy.dll。

我可以在发布模式下编译 XYZdepth，但是当我运行它时，它会说：

```
The program can't start because yyy.dll is missing from your computer. Try reinstalling the program to fix this problem. 
```

有人能帮忙吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T06:40:57.007

您可能需要将有问题的 DLL 复制到可执行文件所在的文件夹中，或者确保 DLL 位于系统 PATH 中的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-18T13:14:33.123

对于未来的访问者，我修复了我的没有复制过来`.dll`。在主项目中，转到属性 -> 构建事件 -> 构建后事件 -> 命令行。将所有内容（xcopy..）放在不同的行上，第一行`start xco...`放在前面。:)

# extjs4 - EXtJs：如何获取选中的单选按钮的值

> ID：10459536
> 
> 赞同：0
> 
> 时间：2012-05-05T06:38:05.840
> 
> 标签：extjs4

我正在使用 Extjs4，我有一个无线电组，我想获取选中的单选按钮值，因为我使用了如下监听器，

```
var radiogroup = new Ext.form.RadioGroup({
    fieldLabel: 'Specimen ?',
    allowBlank: false,
    anchor: '85%',
    items: [
    {
      boxLabel: 'Yes',
      name: 'radio1',
      inputValue: 1
    },
    {
      boxLabel: 'No',
      name: 'radio2',
      inputValue: 2,
      checked:true
    }],
    listeners: {
      change : function(){                           
         if(createOrderForm.getForm().getValues()['radio1']==1){
            alert("yes"); 
         }else{
            alert("No");
         }

      }
   }
}); 
```

当我检查“是”按钮时，条件不满足并且两个警报都在触发。如何获取选定单选按钮的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:51:58.143

对单选按钮使用相同的名称更改：名称“radio1”和“radio2”为唯一名称，因为选项位于同一组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:22:28.580

首先，您应该为同一 RadioGroup 中的每个无线电使用相同的名称。

其次，将`change`RadioGroup 的处理程序替换为 2 个`change`处理程序，每个无线电一个：

```
change : function(){ 
     if (this.getValue()) { // checked.
        alert("yes"); // or "no" 
     }
} 
```

您不应该使用`change`RadioGroup 中的处理程序，因为单击未选中的收音机时，该`change`事件将触发两次（当旧收音机从“已选中”更改为“未选中”时，当新收音机从“未选中”更改为“已选中”时） ")

# iphone - UISwipeGestureRecognizer 结束点

> ID：10459540
> 
> 赞同：0
> 
> 时间：2012-05-05T06:39:02.173
> 
> 标签：iphone, objective-c, ios

我已经动态创建了一些图像视图。通过使用 UISwipeGestureRecognizer，我能够从滑动开始的位置获取图像视图的起点或标记，但我无法获取其结束标记或点。

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:42:35.540

您可以使用 touchesBegan、touchesMoved 和 touchesEnded 方法来查找滑动的开始/结束位置。

使用以下可能对您有帮助的方法...

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
     UITouch *touchendpoint = [touches anyObject];
    CGPoint gestureEndPoint = [touchendpoint locationInView:self.view];
 } 
```

希望对你有帮助..

# eclipse - Eclipse Indigo 中没有 SVN（子剪辑）菜单

> ID：10459545
> 
> 赞同：3
> 
> 时间：2012-05-05T06:39:39.493
> 
> 标签：eclipse, svn, subclipse

我正在尝试将 subclipse 集成到 eclipse-indigo，但它不起作用。（Eclipse IDE for Java Developers 版本：Indigo Service Release 2 Build id：20120216-1857）

我安装了图片上显示的插件。[http://im.bilderkiste.org/9133619995455/Eclipse_Installation_Details_2012-05-05_08-10-37.png](http://im.bilderkiste.org/9133619995455/Eclipse_Installation_Details_2012-05-05_08-10-37.png)

但是安装并重启后，在Window -> open perspective/view 或new -> other中没有集成菜单或其他带有SVN的东西。 [http://im.bilderkiste.org/9133620001047/Open_Perspective_2012-05-05_08-13-01.png](http://im.bilderkiste.org/9133620001047/Open_Perspective_2012-05-05_08-13-01.png)

请问，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T14:31:17.980

如果您的项目已经被其他客户端（例如 Tortoise SVN 客户端）签出，则在 Eclipse 中右键单击 -> 团队 -> 共享项目 -> SVN -> 下一步 -> 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:47:20.133

帮助 -> Eclipse Marketplace -> 流行 -> 安装 Subclipse 选择所有包，接受许可。安装 subclipse 后重启 eclipse。比 Windows -> Open Perspective -> SVN Synchronizing（用于创建与 repos 的连接）和 Team Synchronizing（用于提交、更新、合并等）

# xml - Django DetailView/ListView 强制 XML 渲染

> ID：10459552
> 
> 赞同：0
> 
> 时间：2012-05-05T06:40:46.137
> 
> 标签：xml, django, templates, django-templates, detailview

有没有办法强制 DetailView/ListView 生成 XML 文件而不是 HTML？

我已经创建了一个 XML 模板并且它可以正确呈现，但是 DetaiView 不允许设置 mimetype。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:19:36.683

[`DetailView`](https://github.com/django/django/blob/master/django/views/generic/detail.py#L145)继承自[`SingleObjectTemplateResponseMixin`](http://SingleObjectTemplateResponseMixin)哪个继承自哪个[`TemplateResponseMixin`](https://github.com/django/django/blob/master/django/views/generic/base.py#L92)具有可以设置的方法。所以，像[`render_to_response`](https://github.com/django/django/blob/master/django/views/generic/base.py#L99)`mimemtype`

```
class MyView(DetailView):
    def render_to_response(self, context, **response_kwargs):
        return super(MyView, self).render_to_response(
            context,
            mimetype='application/xml',
            **response_kwargs) 
```

应该管用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-17T14:06:08.603

您可以简单地使用`content_type`您查看的属性

```
class MyView(DetailView):
    content_type = 'application/xml' 
```

它由Django 1.5 以来的[TemplateResponseMixin提供](http://ccbv.co.uk/projects/Django/1.9/django.views.generic.base/TemplateResponseMixin/)

# excel - 使用 VBA 在 Excel 中隐藏和取消隐藏选定的工作表

> ID：10459582
> 
> 赞同：1
> 
> 时间：2012-05-05T06:45:04.560
> 
> 标签：excel, vba

问题：我希望能够通过表单隐藏和取消隐藏选定的（多个）工作表

可用资源：有许多可用资源显示如何一次取消隐藏和隐藏所有工作表，但不灵活

解释：

![在此处输入图像描述](../Images/bac771877e061eb791ecdf90df7ecf60.png)

因为 sheet5 被隐藏复选框对应于 Sheet5 被选中。

逻辑/方法：

*   获取所有工作表的名称，包括隐藏的名称并将它们绑定到标签，检查它是隐藏还是取消隐藏并将其绑定到复选框。

标签和复选框是自动创建的，标签和复选框以某种方式相互链接，因此程序知道要隐藏和取消隐藏哪些工作表。

*   编写代码以检查复选框是否在选中/未选中之间更改其状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:33:02.267

我终于能够完成这项工作了。这可能不是好的代码，但它可以工作。

![在此处输入图像描述](../Images/b5b0a6ffff4cbdadb5146ed4b2cce7e9.png)

```
Private Sub btListAllSheets_Click()

    With Me.ListBox1

    .Clear
    .ColumnHeads = True
    .ColumnCount = 2
    Dim status As String

    For i = 1 To Sheets.Count
        If Sheets(i).Visible = xlSheetHidden Then
           status = "Invisible"
        Else
           status = "Visible"
        End If

    ListBox1.AddItem (Sheets(i).Name)
    ListBox1.List(ListBox1.ListCount - 1, 1) = status

    Next i
    End With

End Sub

Private Sub bt_hideunhideselectedsheet_Click()

    Dim str As String
    str = Me.ListBox1.Column(1, Me.ListBox1.ListIndex)

    For Each Sh In ThisWorkbook.Worksheets

    If Sh.Name = Me.ListBox1.Value And str = "Visible" Then    
        Sh.Visible = False   
    ElseIf Sh.Name = Me.ListBox1.Value And str = "Invisible" Then    
        Sh.Visible = True
    End If

    Next Sh

End Sub 
```

# xamarin.ios - 突然无法将 homeScreen 转换为 UIViewController。大约 5 分钟前工作

> ID：10459586
> 
> 赞同：2
> 
> 时间：2012-05-05T06:45:28.457
> 
> 标签：xamarin.ios

以下代码行给了我一个错误： this.rootNavigationController.PushViewController(homeScreen, false);

错误 CS1503：参数`#1' cannot convert`TravelPoC.HomeScreen 表达式以键入“MonoTouch.UIKit.UIViewController”（CS1503）（TravelPoC）

这发生在 AppDelegate 的 FinishedLaunching 方法中。

什么都没有改变，这曾经工作得很好。我现在只是尝试构建并得到这个错误，并且已经完全失败了。

我从 Xcode Builder 中的 homeScreen 中删除了一些按钮，仅此而已。只是 UI 元素与我的代码中不再引用的相关插座一起被删除。

我很困惑，我不确定在哪里寻找问题。想法？

我错过了什么还是 MonoTouch 在起作用？设计器文件已正确更新，看起来很好，我的 homeScreen.cs 文件也很好，没有错误以防止它编译。它也仍在继承 UIViewController

2小时试图弄清楚这一点，但没有运气。我什至恢复到旧版本的 HomeScreen.xib 文件，但它并没有解决问题。我勒个去？我想哭。

# mysql - Mysql 根据时、日、月、年选择语句

> ID：10459588
> 
> 赞同：1
> 
> 时间：2012-05-05T06:45:37.333
> 
> 标签：mysql

我有一个值看起来像这样的表

```
id         time_stamp                    value    
1          2013-01-01 00:00:15           10
2          2013-01-01 01:00:15            5
3          2013-01-02 00:00:15           15
4          2013-01-02 01:00:15           20
5          2013-02-01 00:00:15           18
6          2013-02-01 01:00:15           15
7          2013-02-02 00:00:15           5
8          2013-02-02 01:00:15           17
9          2014-01-01 00:00:15           8
10         2014-01-01 01:00:15            5
11         2014-01-02 00:00:15           15
12         2014-01-02 01:00:15           30
13         2014-02-01 00:00:15           18
14         2014-02-01 01:00:15           15
15         2014-02-02 00:00:15           5
16         2014-02-02 01:00:15           17 
```

从此表中，我想根据小时、日、月、年选择第一条记录值和最后一条记录值例如，我选择基于的值

天：

```
id  time_stamp              start_value               end_value
1   2013-01-01              10                         5
2   2013-01-02              15                         20
3   2013-02-01              18                         15

and so on

Month:
id  time_stamp              start_value               end_value
1   2013 jan                10                         20
2   2013 feb                18                         17
3   2014 jan                8                          30
4   2014 feb                18                         17

Year:
id  time_stamp              start_value               end_value
1   2013                    10                         17
2   2014                    8                          17 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:48:18.697

使用mysql的聚合函数比如下面

```
SELECT 
    t.id, 
    DATE_FORMAT(t.time_stamp, "%Y-%m-%d") AS time_stamp, 
    (SELECT `value` FROM table_name WHERE time_stamp BETWEEN DATE_FORMAT(t.time_stamp, "%Y-%m-%d 00:00:00") AND DATE_FORMAT(t.time_stamp, "%Y-%m-%d 23:59:59") ORDER BY id ASC LIMIT 1) AS start_value,
    (SELECT `value` FROM table_name WHERE time_stamp BETWEEN DATE_FORMAT(t.time_stamp, "%Y-%m-%d 00:00:00") AND DATE_FORMAT(t.time_stamp, "%Y-%m-%d 23:59:59") ORDER BY id DESC LIMIT 1) AS end_value
FROM table_name t 
GROUP BY DATE_FORMAT(t.time_stamp, "%Y-%m-%d") 
```

我在查询中提供了额外的参数，以帮助您保持查询灵活:)

# spring - STS 不显示与新 Spring Bean 定义一起使用的 XSD 命名空间

> ID：10459594
> 
> 赞同：3
> 
> 时间：2012-05-05T06:46:44.873
> 
> 标签：spring, javabeans, spring-ide

我对 spring 框架非常陌生，我正在关注本教程：[http ://www.vaannila.com/spring/spring-ide-1.html](http://www.vaannila.com/spring/spring-ide-1.html)

根据教程，当我添加一个 Spring Bean 配置文件时，我应该能够选择一些 XSD 命名空间与新的 Spring Bean 定义一起使用，如下所示：![image_1](../Images/6ef4c3b1b4560a3b1960ac80f4b7db62.png)

但是当我添加它时，它不会显示这样的任何内容：![image_2](../Images/ab24a298883d7494cd33303adc06393e.png)

我怎么能弄清楚这个？

提前致谢。

*ps：我不知道它对你有帮助，但我使用的是 sts 2.9.1。在 Windows 7 操作系统上发布

编辑：根据@gkamal，一些包丢失了。这是我项目的包资源管理器的内容：![包资源管理器屏幕截图](../Images/aa11ace3bd5b9ed722987fddf09ac4f0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T07:18:00.990

您的项目中没有 spring jar 文件。从项目类路径中的 jar 扫描命名空间和 XSD。

无论是那个还是您的项目都不是弹簧项目 - 尝试将弹簧性质添加到您的项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T12:28:41.903

请参阅下面的 JAR 库的名称空间列表。所以你必须在你的项目类路径中添加相应的 JAR 来获取你需要的命名空间。

```
org.springframework.aop_3.1.1.RELEASE.jar
•   aop – "http://www.springframework.org/schema/aop"
org.springframework.transaction_3.1.1.RELEASE.jar
•   tx - "http://www/springframework.org/schema/tx"
org.springframework.beans_3.1.1.RELEASE.jar
•   beans – "http://www/springframework.org/schema/beans"
•   c – "http://www/springframework.org/schema/c"
•   p - "http://www/springframework.org/schema/p"
•   util - "http://www/springframework.org/schema/util"
org.springframework.jms_3.1.1.RELEASE.jar
•   jms - "http://www/springframework.org/schema/jms"
org.springframework.context_3.1.1.RELEASE.jar
•   cache - "http://www/springframework.org/schema/cache"
•   context - "http://www/springframework.org/schema/context"
•   jee - "http://www/springframework.org/schema/jee"
•   lang - "http://www/springframework.org/schema/lang"
•   task - "http://www/springframework.org/schema/task"
org.springframework.jdbc_3.1.1.RELEASE.jar
•   jdbc - "http://www/springframework.org/schema/jdbc"
org.springframework.osgi.core_2.0.0.M2-SNAPSHOT.jar
•   bp - "http://www/osgi.org/xmlns/blueprint/v1.0.0"
•   osgi - "http://www/springframework.org/schema/osgi"
•   osgix - "http://www/springframework.org/schema/osgi-compendium"
org.springframework.oxm_3.1.1.RELEASE.jar
•   oxm - "http://www/springframework.org/schema/oxm" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T19:43:03.883

答案是属性和设置选项，如下所示： [![答案](../Images/be017412cdb590a729d2cdbedeeae0fc.png)](https://i.stack.imgur.com/qdYcg.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T12:37:30.647

[STS 4 -> 偏好 -> Spring -> 命名空间](https://i.stack.imgur.com/CIHXe.png)

只需取消选中即将到来的项目类路径中的加载命名空间处理程序和 XSD。因为每次 ide 都在类路径中寻找命名空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-18T07:00:18.963

如果您确定所有 jar 都在那里，请关闭并打开项目

# sql - SQL-Server：如何使用数据透视表来获取结果？

> ID：10459597
> 
> 赞同：0
> 
> 时间：2012-05-05T06:47:20.610
> 
> 标签：sql, sql-server-2005, pivot-table

我有下表

```
DECLARE @sample TABLE
(
    ColNam varchar(20),
    C1  int
)

INSERT INTO @sample
SELECT   'Admin', 1 UNION ALL
SELECT  'Admin', 4  UNION ALL
SELECT   'Admin', 7     UNION ALL
SELECT   'NUser', 3 UNION ALL
SELECT  'NUser', 6  UNION ALL
SELECT   'NUser', 8  

SELECT * FROM @sample 
```

我想得到以下格式：

```
Admin | 1 | 4 | 7
NUser | 3 | 6 | 8

All 1,4,7,3,6,8 can be variables . 
```

我可以使用哪种方法来获得该结果？数据透视表？哪种方法会更好？

请帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:55:48.557

```
DECLARE @sample TABLE
(
    ColNam varchar(20),
    C1  int
)

INSERT INTO @sample
SELECT   'Admin', 1 UNION ALL
SELECT  'Admin', 4  UNION ALL
SELECT   'Admin', 7  

SELECT  * 
FROM 
(
    SELECT  ColNam,C1
    FROM    @sample
) A
PIVOT
(
    SUM(C1) FOR C1 IN([1],[4],[7])
) PVT

--OR you might need this

SELECT   CAST(ColNam AS VARCHAR(100)) + ' | ' + CAST([1] AS VARCHAR(100) )+  ' | ' + CAST([4] AS VARCHAR(100))+  ' | ' + CAST([7] AS VARCHAR(100))
FROM 
(
    SELECT  ColNam,C1
    FROM    @sample
) A
PIVOT
(
    SUM(C1) FOR C1 IN([1],[4],[7])
) PVT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:35:03.067

感谢您的回复。我使用以下代码在我的解决方案中得到了我想要的结果：

```
-- Create Table 
CREATE TABLE tbl_sample (ColNam varchar(20),C1 int)

-- Insert Data
INSERT INTO tbl_sample
SELECT   'Admin', 1 UNION ALL
SELECT  'Admin', 4  UNION ALL
SELECT   'Admin', 7 UNION ALL
SELECT   'NUser', 1 UNION ALL
SELECT  'NUser', 5  UNION ALL
SELECT   'NUser', 4 

-- Because my C1 column can be variable so I create dynamic like following
DECLARE @PivotColumnHeaders VARCHAR(MAX)
SELECT @PivotColumnHeaders =
 COALESCE(
    @PivotColumnHeaders + ',[' + cast(C1 as varchar) + ']',
    '[' + cast(C1 as varchar)+ ']'
  )
  FROM tbl_sample
  GROUP BY C1

-- Then Select like following  
DECLARE @PivotTableSQL NVARCHAR(MAX)
SET @PivotTableSQL = N'
  SELECT *
  FROM (
    SELECT  ColNam,C1
    FROM    tbl_sample
  ) AS PivotData
  PIVOT (
    MAX(C1)
    FOR C1 IN (
      ' + @PivotColumnHeaders + '
    )
  ) AS PivotTable
'

EXECUTE(@PivotTableSQL) 
```

我得到了我想要的结果。再次感谢大家。

我在 SQL 中引用了这个站点 [Dynamic Pivot Table Queries](http://www.kodyaz.com/articles/t-sql-pivot-tables-in-sql-server-tutorial-with-examples.aspx)

红军

# prolog - 如何在 Prolog 中找到地图两点之间的公共站点？

> ID：10459601
> 
> 赞同：2
> 
> 时间：2012-05-05T06:47:47.167
> 
> 标签：prolog

有这样的情况：我在 Prolog 的特定线路上宣布了伦敦地铁的一小部分。我有 3 条线路，有几个车站，它们之间都有共同点。

![地下地图](../Images/a2613d518173fa05fb39e7081a901e89.png)

我有关于车站的事实，其中争论是彼此相邻的车站以及它们所在的线路。地图上有完整的车站列表：

```
neighbour(south_kensington,victoria,green).
neighbour(victoria,westminster,green).
neighbour(westminster,embankment,green).
neighbour(embankment,blackfriars,green).
neighbour(vauxhall,victoria,blue).
neighbour(victoria,green_park,blue).
neighbour(green_park,oxford_circus,blue).
neighbour(oxford_circus,warren_street,blue).
neighbour(warren_street,euston,blue).
neighbour(warren_street,tottenham_court_road,black).
neighbour(tottenham_court_road,leichester_square,black).
neighbour(leichester_square,charing_cross,black).
neighbour(charing_cross,embankbent,black).
neighbour(embankment,waterloo,black). 
```

问题是：我想从 A 到 B（它们在不同的线路上），Prolog 先生应该说我应该在哪个站换线。例如： A：查令十字；B：威斯敏斯特；变化：路堤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:36:21.540

问题的陈述并不完全清楚。您是在寻找仅进行一次更改的路线，还是可以进行任意数量的更改。

1）考虑从沃克斯豪尔到滑铁卢的地铁部分。有一条经过威斯敏斯特的路线有两个变化，一条经过沃伦街的路线只有一个变化。两种路线都可以接受还是只接受其中一种？

2) 更正邻居Embankment station 名称中的错字(charing_cross,embankbent,black)。

3) 定义一个谓词 station_on_line(St,Li) 当且仅当站点 St 位于线路 Li 上时成立，并检查对于查询`station_on_line(St,blue)`它是否只返回每个站点一次，并且同样`station_on_line(victoria,Li)`返回每条线路 Victoria station 仅运行一次。

4) 定义一个谓词`change_at(L1,L2,C)`，如果 lines`L1`和`L2`meet at the station则成立`C`。

5) 情况 3) 和 4) 将足以找到一个站点进行更改，如果只允许一个变化，即从 Vauxhall 经威斯敏斯特到滑铁卢的路径在 1) 中是不允许的。

6) 设计一个递归定义，让您找到一条通过任意数量线路的网络上任意数量站点的路径。

# sql - 选择时间为 30 分钟或更短的行？

> ID：10459608
> 
> 赞同：2
> 
> 时间：2012-05-05T06:49:15.833
> 
> 标签：sql, sql-server-2008

我在 google 上找到了在 X 天内选择行的方法，但是我的`datetime`SQL Server 2008 表中有一个列，并且希望`datetime`在过去 30 分钟内获得具有 a 的行。

谁能告诉我如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T06:53:36.260

```
WHERE column >= DATEADD(mi, -30, GETDATE()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:52:31.933

使用[日期添加](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

```
select * from
yourtable
where DateCol > DateADD(mi, -30, GetDate()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:59:19.807

使用[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)或[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

# .net - SAP Crystal Reports 打印命令不起作用

> ID：10459610
> 
> 赞同：0
> 
> 时间：2012-05-05T06:49:37.213
> 
> 标签：.net, sap, crystal-reports-2010

我是使用 Visual Studio 10 的 SAP Crystal Reports 新手。我使用具有三个参数的存储过程在 SAP Crystal Reports 中生成了一个报表。报告加载良好，但是当我尝试打印并导出它时，会显示以下错误。

> 使用您指定的选项导出失败。请检查您的选项，然后重试。

我还尝试在控件属性上硬键入 ReportSource，但随后会显示登录信息，我需要提供用户名和密码。我想避免这种情况。这是我的代码：

```
private void loadreport(DateTime dt1, DateTime dt2, int cd)
    {
        ReportDocument reportDocument = new ReportDocument();

        ParameterField paramField = new ParameterField();
        ParameterDiscreteValue paramDiscreteValue = new ParameterDiscreteValue();
        ParameterFields paramFields = new ParameterFields();

        //Set instances for input parameter 1 -  @Dept

        paramField.Name = "@date1";

        //*Remember to reconstruct the paramDiscreteValue and paramField objects

        paramDiscreteValue.Value = dt1;

        paramField.CurrentValues.Add(paramDiscreteValue);

        //Add the paramField to paramFields

        paramFields.Add(paramField);

        ParameterField paramField2 = new ParameterField();
        ParameterDiscreteValue paramDiscreteValue2 = new ParameterDiscreteValue();

        paramField2.Name = "@date2";
        paramDiscreteValue2.Value = dt2;
        paramField2.CurrentValues.Add(paramDiscreteValue2);
        paramFields.Add(paramField2);

        ParameterField paramField3 = new ParameterField();
        ParameterDiscreteValue paramDiscreteValue3 = new ParameterDiscreteValue();

        paramField3.Name = "@cid";
        paramDiscreteValue3.Value = cd;
        paramField3.CurrentValues.Add(paramDiscreteValue3);
        paramFields.Add(paramField3);

        CrystalReportViewer1.ParameterFieldInfo = paramFields;
        reportDocument.Load(Server.MapPath("testreport.rpt"));
        //Load the report by setting the report source

        CrystalReportViewer1.ReportSource = reportDocument;
        CrystalReportViewer1.DisplayGroupTree = false;
        //set the database loggon information.

        reportDocument.SetDatabaseLogon("sa", "12345", @".\SQLEXPRESS", "AnivetERP");

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T11:36:36.323

```
 It maybe is because of the post back to make the report disappear. 
    You maybe can store the report into the session. and run it in the post back.

    if(Page.IsPostBack)
    {
    if(session['report'] != null)
{
                this.CrystalReportViewer1.ReportSource = session['report'] as CrystalDecisions.CrystalReports.Engine.ReportDocument;
                this.CrystalReportViewer1.DataBind();
}
    }

    Hope it can help you. 
```

# c++ - C++ 风格和 0 到 size_t(0) 的转换

> ID：10459613
> 
> 赞同：4
> 
> 时间：2012-05-05T06:50:04.960
> 
> 标签：c++, substr

使用与以下代码中的使用`size_t(0)`相同吗？`0`

```
const string foo = "testing";
const size_t pos = foo.find("i");
string name = foo.substr(size_t(0), pos); 
```

也就是说，当我把它只`0`转换为`size_t(0)`？如果是这样，一种形式是否优于另一种形式？我的猜测是这`size_t(0)`是最好的使用方法，因为它使转换变得明确。另一方面，也许有些程序员认为`size_t(0)`冗长？我猜在实践中没有人关心任何一种方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T06:54:27.090

> 也就是说，当我只输入 0 时，它是否转换为 size_t(0)？

转换是隐式的，因为[`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)是：

```
basic_string substr( size_type pos = 0,
                     size_type count = npos ); 
```

因此，您的演员阵容是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:57:45.020

您正在将 0 类型转换为相同的参数类型，这是一个非常好的做法，但不是必需的，因为这将被隐式转换。

```
string substr ( size_t pos = 0, size_t n = npos ) const; 
```

看看[这个](http://www.cplusplus.com/reference/string/string/substr/)。

# iphone - 根据 Playcount 对 MPMediaQuery 进行排序

> ID：10459616
> 
> 赞同：0
> 
> 时间：2012-05-05T06:50:40.060
> 
> 标签：iphone, objective-c, cocoa-touch

自过去一个小时以来，我一直在尝试这样做。我不确定问题是什么。这是我的代码：

```
NSArray *allTracks = [[[MPMediaQuery alloc] init] items] ;    
NSArray *sortedArray;
sortedArray = [allTracks sortedArrayUsingComparator:^(id a, id b) {
   NSNumber *first = [(MPMediaItem*)a valueForProperty:MPMediaItemPropertyPlayCount];
   NSNumber *second = [(MPMediaItem*)b valueForProperty:MPMediaItemPropertyPlayCount];
    return [first compare:second]; 
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T10:04:52.837

试试这个，

```
NSSortDescriptor *sorter = [NSSortDescriptor sortDescriptorWithKey:MPMediaItemPropertyPlayCount ascending:NO];
NSArray *sortedArray = [allTracks sortedArrayUsingDescriptors:@[sorter]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:23:00.870

我刚试过你的代码，它工作得很好。

`sortedArray`根据播放次数升序排序。

也许您的 iPod 上有一个巨大的 iTunes 资料库？也许您已经激活了 iTunes Match，但并非所有数据都在您的手机上？

# c# - 尝试保存文件：Directory.Exists() 当目录实际上不存在时返回 true

> ID：10459620
> 
> 赞同：1
> 
> 时间：2012-05-05T06:50:59.110
> 
> 标签：c#, asp.net, .net, asp.net-mvc

所以我有一个 HTML 表单，用户可以在其中上传图像。这发布到我的操作中，图像被放入用户 ID 唯一的目录中（如果该目录不存在，则创建该目录）。

自从我大约两个月前实施它以来，它一直工作得很好，从那以后我就再也不用碰它了。最初，我`UnauthorizedAccessExceptions`通过进入上传目录的安全设置并授予“所有人”完全控制权来解决这个问题。

出乎意料的是，我再也无法保存图像了。`UnauthorizedAccessExceptions`尽管一次又一次地更改文件夹的安全设置以尝试修复它，但我开始再次出现问题。最后阅读有关在 ASP.net 中进行帐户模拟的信息。

所以，现在我没有得到`UnauthorizedAccessExceptions`，而是遇到了我的网站认为目录已经存在的问题。

这是我的表单操作的一个片段：

```
if (Directory.Exists(Path.GetDirectoryName(Server.MapPath("../uploads/" + currentUser.UserId))) == false)
{
   Directory.CreateDirectory(Path.GetDirectoryName("../uploads/" + currentUser.UserId));
}
if (Directory.Exists(Path.GetDirectoryName(Server.MapPath("../uploads/" + currentUser.UserId + "/" + newEntry.EntryId))) == false)
{
   Directory.CreateDirectory(Path.GetDirectoryName("../uploads/" + currentUser.UserId + "/" + newEntry.EntryId));
}

ImageFile.SaveAs(Server.MapPath("../" + savedFileName)); 
```

if 语句中的代码永远不会执行。所以，我删除了它们并简单地尝试：

```
Directory.CreateDirectory(Path.GetDirectoryName("../uploads/" + currentUser.UserId)); 
```

什么都没发生！然后，当需要保存图像时，由于目录不存在而引发异常！谁能告诉我为什么`Directory.Exists()`要返回`true`，或者为什么`Directory.CreateDirectory()`什么都不做？

或者为什么这段代码几个月都没有动过并且运行良好，然后突然决定放弃？

注意：如果我转到文件夹并手动创建目录，则文件保存得很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:07:53.933

Path.GetDirectoryName 只返回目录名称而不是目录的完全限定路径。Directory.Exists 将获取目录的完全限定路径，然后检查目录是否存在。

如果 Directory.Exists 将在 Web 应用程序的根目录中检查该文件夹是否存在，而不是查看上传文件夹中的内容，则您的条件将失败。

你的情况应该是这样的：

```
if (Directory.Exists(Server.MapPath("/uploads/" + currentUser.UserId)) == false)
{
    Directory.CreateDirectory(Server.MapPath("/uploads/" + currentUser.UserId));
} 
```

**注意：从路径中删除了前导“..”并且它有效！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:26:28.797

显然这就是我需要改变的全部：

```
Directory.CreateDirectory(Server.MapPath("../uploads/" + currentUser.UserId)); 
```

放入 Server.MapPath，现在一切正常。不知道为什么它之前工作正常，但突然停止了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:38:51.417

尝试这个：

```
var path = Server.MapPath(string.Format("~/uploads/{0}/{1}/", userId, entryId));

//MSDN: Creates all directories and subdirectories as specified by path
Directory.CreateDirectory(path);

var filePath = Path.Combine(path, savedFileName);

ImageFile.SaveAs(filePath ); 
```

# javascript - youtube api视频结束加载功能

> ID：10459622
> 
> 赞同：7
> 
> 时间：2012-05-05T06:51:12.277
> 
> 标签：javascript, jquery, html, api, youtube

我正在尝试使用 YouTube API 来检测视频何时结束，然后调用一个 JS 函数，然后我必须加载另一个。调用函数位于我的 HTML 文档头部的另一个 JS 文档中。这是到目前为止我从 API 站点获得的代码，但我真的很困惑。

```
<pre><code> <script>

var ytfullplayer;
    function onYouTubePlayerAPIReady() {
        console.log('onYouTubePlayerAPIReady');
        ytfullplayer = new YT.Player('myVid', {
            events: {

              if ''onStateChange': getVideo

            }
        });

    }
    function getVideo(); }

</script> </code> </pre> 
```

我已经在我的页面顶部调用了 youtube api。但我不是 100% 确定它是否会去那里。任何帮助都会很好。我正在为我的 youtube 视频使用一个。

干杯马特

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T06:57:55.723

API 提供了您在[订阅事件](https://developers.google.com/youtube/js_api_reference#SubscribingEvents)下尝试的示例：

```
function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById("myytplayer");
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
   alert("Player's new state: " + newState);
} 
```

将您的自定义函数作为处理程序绑定到“onStateChange”事件，并从内部评估新状态。根据 API 的 Events 部分，您正在寻找 state `0`，表示视频已结束。

```
function onytplayerStateChange(newState) {
   if ( newState == 0 ) {
     /* load next video */
  }
} 
```

# c# - DX9/10/11 场景捕捉 C#

> ID：10459623
> 
> 赞同：2
> 
> 时间：2012-05-05T06:51:41.120
> 
> 标签：c#, directx, hook, code-injection, screen-capture

我正在读这个arcile： [http ://www.ring3circus.com/gameprogramming/case-study-fraps/](http://www.ring3circus.com/gameprogramming/case-study-fraps/) 而且我开始意识到，考虑到它的年代久远，（作者甚至建议不要使用他的代码），这确实不能满足我的需求（一，它是 C#，二，它用于 DX9）。我正在尝试获取 DirectX 游戏窗口的矩形捕获，并将其作为某种流媒体视频保存在内存中，我可以参考。如果窗口不在前景中，甚至可见（隐藏在其他窗口后面），该窗口仍需要能够被捕获。我已经尝试过那个 C# 库（使用 EasyHook 和 SlimDX 制作的库），但我只设法让演示在 64 位下的 DirectX 11 游戏中成功运行一次（此后一直无法重现）。即便如此，捕捉速度也慢得令人瞠目结舌。以及许多其他覆盖到 DirectX 的内容（我不需要）。我' 就捕获而言，我想模仿 fraps 所做的事情，但我只需要游戏的一个矩形区域，而不是整个区域，而且我不需要将其写入文件。我能否获得一个代码示例，说明我如何设法在 C# 中对游戏窗口的给定矩形进行快速帧捕获，适用于 DX9 到 DX11？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:12:52.813

这是我针对相同问题的 C++ 代码。

```
ID3D11Texture2D* pSurface;
HRESULT hr = m_swapChain->GetBuffer( 0, __uuidof( ID3D11Texture2D ), reinterpret_cast< void** >( &pSurface ) );
if( pSurface )
{
    const int width = static_cast<int>(m_window->Bounds.Width * m_dpi / 96.0f);
    const int height = static_cast<int>(m_window->Bounds.Height * m_dpi / 96.0f);
    unsigned int size = width * height;
    if( m_captureData )
    {
        freeFramebufferData( m_captureData );
    }
    m_captureData = new unsigned char[ width * height * 4 ];

    ID3D11Texture2D* pNewTexture = NULL;

    D3D11_TEXTURE2D_DESC description;
    pSurface->GetDesc( &description );
    description.BindFlags = 0;
    description.CPUAccessFlags = D3D11_CPU_ACCESS_READ | D3D11_CPU_ACCESS_WRITE;
    description.Usage = D3D11_USAGE_STAGING;

    HRESULT hr = m_d3dDevice->CreateTexture2D( &description, NULL, &pNewTexture );
    if( pNewTexture )
    {
        m_d3dContext->CopyResource( pNewTexture, pSurface );
        D3D11_MAPPED_SUBRESOURCE resource;
        unsigned int subresource = D3D11CalcSubresource( 0, 0, 0 );
        HRESULT hr = m_d3dContext->Map( pNewTexture, subresource, D3D11_MAP_READ_WRITE, 0, &resource );
        //resource.pData; // TEXTURE DATA IS HERE

        const int pitch = width << 2;
        const unsigned char* source = static_cast< const unsigned char* >( resource.pData );
        unsigned char* dest = m_captureData;
        for( int i = 0; i < height; ++i )
        {
            memcpy( dest, source, width * 4 );
            source += pitch;
            dest += pitch;
        }

        m_captureSize = size;
        m_captureWidth = width;
        m_captureHeight = height;

        return;
    }

    freeFramebufferData( m_captureData );
} 
```

您/可能/能够将其移植到 C#，或者至少将其包装在库中。我问了一个类似的问题，但后来找到了答案：[DirectX 11 framebuffer capture (C++, no Win32 or D3DX)](https://stackoverflow.com/questions/10623787/directx-11-framebuffer-capture-c-no-win32-or-d3dx)

# w3c-validation - 谁能帮我解决我在 w3cvalidation 上遇到的与我网站上的 Facebook Like 和 Google+ 相关的 8 个错误？

> ID：10459627
> 
> 赞同：0
> 
> 时间：2012-05-05T06:52:22.180
> 
> 标签：w3c-validation

这是我的网站：[http ://abconlinesolutions.com/akashbc/main.html](http://abconlinesolutions.com/akashbc/main.html)

查看在 w3cvalidation 上发现的错误：http://validator.w3.org/check?uri= [http %3A%2F%2Fabconlinesolutions.com%2Fakashbc%2Fmain.html&charset=%28detect+automatically%29&doctype=Inline&ss=1&outline=1&group= 0&user-agent=W3C_Validator%2F1.3](http://validator.w3.org/check?uri=http%3A%2F%2Fabconlinesolutions.com%2Fakashbc%2Fmain.html&charset=%28detect+automatically%29&doctype=Inline&ss=1&outline=1&group=0&user-agent=W3C_Validator%2F1.3)

任何人请帮我解决这8个错误..

以下是错误的标题：

**1。第 628 行，第 13 列：没有属性“src”

1.  第 628 行，第 292 列：没有属性 "scrolling" ...&appId=226098524153861" scrolling="no" frameborder="0" style="border:none;...</li>
2.  第 628 行，第 309 列：没有属性 "frameborder" …524153861" scrolling="no" frameborder="0" style="border:none; 溢出：隐藏；…</p>

3.  第 628 行，第 319 列：没有属性 "style" ... scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:200...</p>

4.  第 628 行，第 409 列：没有属性“allowTransparency”……en；宽度：200px；高度：62 像素；填充：10 像素；"allowTransparency="true">

5.  第 628 行，第 415 列：元素“iframe”未定义…en; 宽度：200px；高度：62 像素；填充：10 像素；"allowTransparency="true">

6.  第 635 行，第 23 列：没有属性“注释”

7.  第 635 行，第 31 列：元素“g:plusone”未定义**

任何人请帮助我...

谢谢你们 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:00:27.060

将此 DTD 放在 HTML 页面的第一行

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"> 
```

# decorator - 返回函数并接受参数的装饰器

> ID：10459628
> 
> 赞同：1
> 
> 时间：2012-05-05T06:52:25.267
> 
> 标签：decorator, python-2.7

我不是最好的装饰器，我正在尝试为一项任务构建一个（显然）。基本上我有我想要装饰的功能（这是一个 Django 应用程序，但没关系）

```
def foo(request, param):
    # do something w/ param 
```

现在我需要构建一个装饰器来接收一个参数：

```
@mydecorator('VALUE')
def foo(request, param)
    pass 
```

所以基本上我需要我的装饰器接受值 foo，对请求做一些工作，然后返回

这是我到目前为止所拥有的，但它不起作用:(

```
def mydecorator(val):
    @wraps(function)
    def decorator(request, *args, **kwargs):
        # do something with request with respect to val
        return function(request, *args, **kwargs)
    return decorator 
```

需要帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:32:32.060

除了 foo 的第二个示例定义最后缺少一个 ':' 之外，主要问题是 mydecorator 应该返回一个装饰器，因为它是一个函数调用。

如果 mydecorator 不接受参数，你会写：

```
@mydecorator
    def foo(request, param)
        pass 
```

并不是

```
@mydecorator()
    def foo(request, param)
        pass 
```

鉴于您应该从以下知识开始：

```
from functools import wraps

def mydecorator(val):
    def myrealdecorator(function):
        @wraps(function)
        def decorator(request, *args, **kwargs):
            # do something with request with respect to val
            print 'I know about', val
            return function(request, *args, **kwargs)
        return decorator
    return myrealdecorator

@mydecorator('VALUE')
def foo(request, param):
    print 'inside foo'

foo('arg1', 'arg2') 
```

# jqplot - jqPlot：如何实时更新图表

> ID：10459631
> 
> 赞同：14
> 
> 时间：2012-05-05T06:52:55.930
> 
> 标签：jqplot

我无法弄清楚自己或找到一个正确的例子来说明如何在 jqPlot 中以类似于这个 highcharts[示例](http://jsfiddle.net/YAC2L)中所示的方式执行实时更新。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T18:37:37.023

基于[此](https://groups.google.com/forum/?fromgroups#!topic/jqplot-users/Kf-nLGssA-Y[1-25])，我准备了以下示例：

```
$(document).ready(function() {
    var plot1 = $.jqplot('chart1', [new Array(1)], {
        title: 'Live Random Data',
        series: [
            {
            yaxis: 'y2axis',
            label: '',
            showMarker: false,
            fill: false,
            neighborThreshold: 3,
            lineWidth: 2.2,
            color: '#0571B6',
            fillAndStroke: true}
        ],
        axes: {
            xaxis: {
                renderer: $.jqplot.DateAxisRenderer,
                tickOptions: {
                    formatString: '%H:%M:%S'
                },
                numberTicks: 10
            },
            y2axis: {
                min: 100,
                max: 150,
                tickOptions: {
                    formatString: '%.2f'
                },
                numberTicks: 15
            }
        },
        cursor: {
            zoom: false,
            showTooltip: false,
            show: false
        },
        highlighter: {
            useAxesFormatters: false,
            showMarker: false,
            show: false
        },
        grid: {
            gridLineColor: '#333333',
            background: 'transparent',
            borderWidth: 3
        }
    });

    var myData = [];
    var x = (new Date()).getTime() - 101000;
    var y;
    var i;
    for ( i = 0; i < 100; i++) {
        x += 1000;
        y = Math.floor(Math.random() * 100);
        myData.push([x, y]);
    }

    plot1.series[0].data = myData;
    plot1.resetAxesScale();
    plot1.axes.xaxis.numberTicks = 10;
    plot1.axes.y2axis.numberTicks = 15;
    plot1.replot();

    function updateSeries() {
        myData.splice(0, 1);
        x = (new Date()).getTime();
        y = Math.floor(Math.random() * 100);
        myData.push([x, y]);

        plot1.series[0].data = myData;
        plot1.resetAxesScale();
        plot1.axes.xaxis.numberTicks = 10;
        plot1.axes.y2axis.numberTicks = 15;
        plot1.replot();
    }

    window.setInterval(updateSeries, 1000);
}); 
```

[请参阅此 jsfiddle 进行测试。](https://jsfiddle.net/HrZcj/1562/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-24T12:48:38.913

我在 JSFiddle [jsfiddle.net/meccanismocomplesso/QAr4r/](http://jsfiddle.net/meccanismocomplesso/QAr4r/)上添加了一个示例，它重现了您链接的示例。

我试图让这个话题尽可能地笼统。如果您需要更多解释，请阅读[这篇文章](http://www.meccanismocomplesso.org/en/jqplot-real-time-data/)。

```
var plot1 = $.jqplot('myChart', [data], options);
...
plot1.series[0].data = data; // update the graph 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-23T21:02:44.740

```
var plot1;

function updatePlot(data){
plot1 = $.jqplot('myChart', [data], options);
}

function reDrawPlot(data){`
updatePlot(data);
plot1.replot();
}

....
initialize plot
plot1 = $.jqplot('myChart', [data], options);
....

call function reDrawPlot with the new data as a parameter 
```

# ios - NSIncrementalStore 的简单英文解释

> ID：10459635
> 
> 赞同：19
> 
> 时间：2012-05-05T06:53:49.907
> 
> 标签：ios, web-services, cocoa-touch, core-data, ios5

当我一直在研究使用核心数据与 Web 服务交互的最佳方法时，我一直在看到这种情况`NSIncrementalStore`出现。

在阅读[了 Drew Crawford 的文章](http://sealedabstract.com/code/nsincrementalstore-the-future-of-web-services-in-ios-mac-os-x/)、[编程指南](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/IncrementalStorePG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010706)、[类参考](https://developer.apple.com/documentation/CoreData/Reference/NSIncrementalStore_Class/Reference/NSIncrementalStore.html) [和本教程](https://gist.github.com/1860108)几次之后，我仍然在努力理解什么是`NSIncremental`store，为什么以及何时使用它。

有人可以解释一下吗？

**阅读 mundi 的回答后进行编辑**
，我可以看到需要进一步的上下文。我正在研究将核心数据与我正在构建的 Web 服务结合使用。我正在尝试找到将用户信息本地存储在设备上并在有连接时发布到 Web 服务的最佳方法。我缺乏对核心数据的了解促使我进行研究，但我无法完全理解`NSIncrementalStore`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-22T17:13:49.220

*注意：当我在 2012 年写这篇文章时，这个 API 是最前沿的，细节已经改变。如果您愿意，请随时更新。我目前没有从事任何 Cocoa/ObjC 项目，所以很遗憾，我不是一个保持最新状态的好人。看来总体要点是正确的。*

`NSManagedObject`Core Data 提供了一组帮助管理对象持久性的工具，即能够保存然后从某种存储中取回对象集（ ）。

当您使用 Core Data 对象时，您使用的是`NSManagedObjectContext`从`NSPersistentStoreCoordinator`. PSC 反过来与一个或多`NSPersistentStore`个子类进行对话，这些子类处理商店的实际操作。（考虑针对数据库创建/读取/更新/删除。）

Core Data 支持两种主要类型的存储：`NSPersistentStore`和`NSAtomicStore`. 可以将持久存储视为数据库：您可以增量地保存、更新和从中获取任意记录集。原子存储是对象图的“全有或全无”表示。它旨在成为结构化文件的内存表示。

Core Data 自带的 store 类型有：

*   `NSSQLLiteStoreType` ( `NSPersistentStore`)
*   `NSInMemoryStoreType`( `NSPersistentStore`)
*   `NSXMLStoreType` ( `NSAtomicStore`)
*   `NSBinaryStoreType` ( `NSAtomicStore`)

`NSPersistentStore`被明确禁止子类化，所以直到现在，还没有办法创建自己的非原子存储后端。也就是说，如果您想零碎地保存和查询对象的表示，而不是一大堆（“加载整个图”、“保存整个图”），那么您就很不走运了。直到 iOS5 推出`NSIncrementalStore`。

`NSIncrementalStore`是一个抽象类（继承自`NSPersistentStore`），您实现其方法以在您控制的数据存储和 Core Data 世界之间提供适配器。您可以使用它来包装远程 API，或者如果您愿意，您可以包装[NULevelDB](https://github.com/nulayer/NULevelDB)或[NanoStore 之](https://github.com/tciuro/NanoStore)类的东西（尽管我不确定您为什么要这样做）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-06T10:23:38.330

您将使用`NSIncrementalStore`通过 Core Data 访问远程服务器。您无需读取和写入本地文件，而是将请求推送到服务器并获得响应，然后将其推送到 Core Data。同样用于保存等。

但是请注意，这并非易事。这是一个非常强大的功能，但除非你是 Core Data 使用方面的专家，否则我强烈反对它，因为除非你非常了解 Core Data 与存储层的交互方式，否则有无穷无尽的机会让你自食其果作品。

如果使用 an`uploaded`可以解决您的问题，请改为这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-05T09:22:13.487

简而言之，如果您将 SQLite 存储与 Core Data 一起使用，那么您已经在使用增量存储。增量存储的所有好处（即主要不必将整个存储加载到内存中）已经在您的手中。

至于`NSIncrementalStore`API的具体应用，我建议你先明确定义你要解决的问题。您是否需要此 API 将取决于您的编程任务的特定需求。

* * *

**编辑**以回应问题编辑

我会这样做：在设备上的核心数据实体中，您可以拥有一个属性`BOOL uploaded`。当 Web 服务可用时，开始上传并拉取所有`uploaded`尚未加载的对象。

要上传，请将您的对象转换为`NSArray`和`NSDictionary`，也许转换为 JSON 格式并`POST`传输到您的网站。当网站响应它保存了数据时，将所有对象标记为`uploaded`。

# java - 我可以从 JSONObject 获取价值而不提及其名称吗？

> ID：10459636
> 
> 赞同：6
> 
> 时间：2012-05-05T06:53:51.600
> 
> 标签：java, json, org.json

我的 JSON 对象：

```
{MyJSON:[{"id":"1","name":"panji","price":"100"}]} 
```

我这样做是为了获取 id 的值：

```
menuitemArray.getJSONObject(i).getString("id"); 
```

我可以得到 id、name 或 price 的值，而不提它的名字，可能像 index 或其他方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T07:04:20.160

您可以调用[`names()`](http://www.docjar.com/docs/api/org/json/JSONObject.html#names)a`JSONObject`来获取`JSONArray`其元素的名称 - 这可以让您对它们执行逻辑或动态检索它们的相应值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T07:02:04.693

您可以像这样获取 JSONObject 的所有属性

```
for(Iteraor key=jsonObject.keys();itr.hasNext();) {
   jsonObject.get(key.next());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T16:14:34.860

```
JSONObject obj = new JSONObject(json);
for(Iterator<String> keys=obj.keys();keys.hasNext();) {
    obj.get(keys.next());
} 
```

# django - 如何避免django的默认页面404？

> ID：10459637
> 
> 赞同：1
> 
> 时间：2012-05-05T06:54:01.697
> 
> 标签：django, django-urls, django-errors

例如，当我在[http://mydomain.com/myapp/schools/](http://mydomain.com/myapp/schools/) 但如果您删除了一些 url，例如斜杠，[http](http://mydomain.com/myapp/schools) ://mydomain.com/myapp/schools错误 404 与所有 url我在我的应用程序中有一个页面是错误的，我该怎么办？我已经看到，在 django 站点中，页面不会更改，除非它有效并保留在当前页面中。

任何的想法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:00:06.653

通过编写自定义 404 处理程序。

[https://docs.djangoproject.com/en/dev/topics/http/views/#customizing-error-views](https://docs.djangoproject.com/en/dev/topics/http/views/#customizing-error-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:41:31.103

这个问题不是很清楚，但如果你想要的是[http://mydomain.com/myapp/schools](http://mydomain.com/myapp/schools)重定向到[http://mydomain.com/myapp/schools/](http://mydomain.com/myapp/schools/)然后确保`APPEND_SLASH`设置设置为`True`

请参阅[https://docs.djangoproject.com/en/1.4/ref/settings/#append-slash](https://docs.djangoproject.com/en/1.4/ref/settings/#append-slash)

# php - Codeigniter - 如何更新记录？

> ID：10459643
> 
> 赞同：0
> 
> 时间：2012-05-05T06:54:59.417
> 
> 标签：php, codeigniter

```
$this->db->where('user_id', $agent_id);
$result = $this->db->update('users', $update_array); 
```

上述代码在程序中将数据移动到更新表时更新数据库记录，例如：

```
$upadte_array['us_address']="54 George street"; 
```

但是，当从表单中捕获地址数据时，上述代码不会更新数据库记录。

在这两种情况下，都`print_r($update_array);`显示数据存在，在这两种情况下，$result 都等于 1，这意味着更新成功。

感谢你的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:16:23.910

尝试这个

```
$update_array = array(
               'us_address' => '54 George street'
            );
$this->db->where('user_id', $agent_id);
$result = $this->db->update('users', $update_array); 
```

或者

```
$this->db->update('users', $update_array, "user_id = {$agent_id}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:18:59.770

您的代码是从源代码复制和粘贴的吗？因为如果是这样，你有一个错字：

```
$upadte_array['us_address']="54 George street"; 
```

应该

```
$update_array['us_address']="54 George street"; 
```

# php - php : 在 php 中检索自定义随机数

> ID：10459645
> 
> 赞同：0
> 
> 时间：2012-05-05T06:55:18.100
> 
> 标签：php

以下代码生成从 1 到 10 的随机数

```
$ran = rand(1,10); 
```

如果我想要自定义值中的随机数怎么办。即**(1,3,6,7,9)**

例如我需要从组（1,3,6,7,9）中生成任何一个数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:56:25.970

你要[**`array_rand()`**](http://php.net/manual/en/function.array-rand.php)

或者你可以**[`shuffle()`](http://www.php.net/manual/en/function.shuffle.php)**而且总是只是参考`$array[0]`这也是“随机的”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:58:03.957

你可以这样做，如下所示，

```
<?PHP

$numbers = array(1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5, 6 => 6);
$random_key = array_rand($numbers, 1);
print $random_key;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:03:14.817

你需要`array_rand`功能。参数是`array_rand ( array $input [, int $num_req = 1 ] )`。出于您的目的，请使用它，`$var_rand = array_rand($arr);`因为您只需要生成 1 个随机数。如需更多帮助，请参阅[此](http://php.net/manual/en/function.array-rand.php.)

此外，对于未来的问题，也发布您的 php 版本。某些功能在旧版本中不可用。不过，这个是可用的。

# php - 从页面 url 获取页面描述而不减慢页面加载

> ID：10459649
> 
> 赞同：1
> 
> 时间：2012-05-05T06:55:55.487
> 
> 标签：php, javascript

是否可以在不减慢页面加载速度的情况下从页面 url 获取页面描述？通过 java 脚本或 php 或任何语言？

例如我会发送这个输入：

```
http://www.facebook.com 
```

并得到这个输出：

```
Facebook is a social utility that connects people with friends and others who work, study and live around them. People use Facebook to keep up with friends, ... 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:27:56.147

你需要这个功能`file_get_contents($url)`。如需更多帮助，请参阅[此](http://www.tildemark.com/getting-website-title-and-description/)

[1](http://www.tildemark.com/getting-website-title-and-description/)： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)。`urlencode`如果 URL 包含一些空格，您可能需要这样做。至于解析部分，我在网上找到了一些代码。[这](http://www.tildemark.com/getting-website-title-and-description/)是链接。让知道

代码 ：

```
 <?php
function getMetaTitle($content){
//echo "AAAAA".$content;
$pattern = "|<[\s]*title[\s]*>([^<]+)<[\s]*/[\s]*title[\s]*>|Ui";
if(preg_match($pattern, $content, $match))
{
    //echo $match[1];
    return $match[1];
}
else
    return false;
}   
    //echo "<h1>Hello World!</h1>";
$url = "your url here";

$str = file_get_contents($url);

$title1 = getMetaTitle($str);
echo $title1;
//echo htmlentities($str);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:47:18.007

我想要类似的功能来创建一个有点像 Facebook 的功能并获取标题、描述和图像。我为此使用了[DOMDocument](http://php.net/manual/en/class.domdocument.php)，因此即使您也可以尝试使用 DOMDocument 来解析页面。根据 HTML 标签或属性解析 HTML 页面非常有用。

使用 ajax 的组合（通过将 PHP 脚本保留在您的域中），您可以将 url 传递给 PHP 脚本（类似于下面），这反过来将从网站获取所需的详细信息。

示例代码：

```
$url = ''; // this will be your URL
$doc = new DOMDocument();
// added @ to suppress the errors
@$doc->loadHTMLFile($url);

foreach($doc->getElementsByTagName('title') as $title)
{
   $arrDetails['title'] = $title->nodeValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:59:16.080

file_get_contents($url) 然后解析标签或任何描述。然后将这对 url - description 保存到本地缓存以避免连续请求页面。

# c# - Javascript 与 C# 中的局部变量性能

> ID：10459653
> 
> 赞同：0
> 
> 时间：2012-05-05T06:56:26.187
> 
> 标签：c#, javascript

我的 Javascript 代码在这里。我们不是每次都尝试访问作为全局上下文的文档，而是将其设置为激活对象。这样我们就可以提高我们的读/写性能。

```
function initUI(){
        var doc = document,
            bd = doc.body,
            links = doc.getElementsByTagName("a"),
            i= 0,
            len = links.length;
        while(i < len){
            update(links[i++]);
        }
        doc.getElementById("go-btn").onclick = function(){
            start();
        };
        bd.className = "active";
    } 
```

它是否也适用于 C#？可以说，

定义`var customObject = new CustomClass();`为成员变量并访问如下，

```
void MyMethod()
{
var obj = customObject;
var name = obj.name;
//some code here
..
..
} 
```

会增加性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:45:49.097

不，在 C# 中不一样。

在 javascript 中，您缓存 DOM 对象，因为 DOM 的读/写速度非常慢。

您不需要缓存普通对象属性。如果这样做，是为了获得一些性格，而不是为了表现。

在 C# 中，您不必处理 DOM。您不需要缓存对象，除非您想获得一些字符。

# windows-phone-7 - 模板中控件的 ListBox 项的索引

> ID：10459655
> 
> 赞同：1
> 
> 时间：2012-05-05T06:56:46.333
> 
> 标签：windows-phone-7, listbox

我有这个列表框：

```
<ListBox x:Name="MyList" ItemsSource="{Binding ListOfBullets, Mode=TwoWay, Converter=StaticResourcedebugConverter}}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                                <local:TaskStepControl Text="{Binding}" AddHnadler="{Binding DelegateForHandlingAddTaskStep, ElementName=uc}"></local:TaskStepControl>                          
                        </DataTemplate>
                    </ListBox.ItemTemplate>
</ListBox> 
```

绑定工作正常。每个 local:TaskStepControl 都有一个 Add 按钮，它连接到 AddHnadler。AddHnadler 看起来像这样：

```
void AddHnadler(TaskStepControl theControl)
{
   // "theControl" --> this TaskStepControl on which the Add button was pressed
   //In here I want to get the index of "theControl" in the ListBox "MyList". 
   //I've tried

   var pos = MyList.Items.IndexOf(theControl);

   //pos == -1  always  
} 
```

我不能使用 SelectionChanged 事件，因为每个 TaskStepControl 上的添加按钮不会将 Click 事件传递给 ListBox。

我通常在不在 xaml 中的代码中工作，所以这可能非常简单，但我无法让它工作。我需要像 "IndexOf" 这样简单的东西，没有 MVVM 的东西，正如我所说的，我通常在后面的代码中工作，而不是在 xaml 中，只是这次我必须实现它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:28:14.073

ListBox 使用两个列表：项目（来自`ItemsSource`）和`ListItemContainer`（控制容器）。

您`TaskStepControl`是 the 的孩子，`ListItemContainer`因此在这两个列表中都不可用。出于您的目的，我将利用`DataContext`（和列表项）继承给您的事实`TaskStepControl`：

```
// FYI: 'Hnadler' was a typo here
void AddHandler(TaskStepControl theControl)
{
   object listItem = theControl.DataContext;

   var itemContainerGenerator = MyList.ItemContainerGenerator;

   DependencyObject itemContainer = itemContainerGenerator.ContainerFromItem(listItem);

   int pos = itemContainerGenerator.IndexFromContainer(itemContainer);
} 
```

# django - Django - 更安全的联系表格

> ID：10459656
> 
> 赞同：0
> 
> 时间：2012-05-05T06:56:55.860
> 
> 标签：django, forms, security, session, cookies

我正在写一份联系表格，其中包含一些反垃圾邮件预防功能。我决定创建一个部分解决问题的会话（我想）。但是，在重定向到成功页面后，我可以返回浏览器并再次发送消息，就像不会设置 session-cookie 一样。

我应该使用什么来防止用户返回并再次发送消息？

```
def index(request):

    if request.method == 'POST':

        form = ContactForm(request.POST or None)

        if form.is_valid():

            full_name = escape(form.cleaned_data['full_name'])
            subject = escape(form.cleaned_data['subject'])
            text = escape(form.cleaned_data['text'])
            email = escape(form.cleaned_data['email'])
            phone = escape(form.cleaned_data['phone'])
            cc_myself = escape(form.cleaned_data['cc_myself'])

            request.session.set_expiry(60)
            request.session['has_commented'] = True

            form.save()

            messages.success(request, ugettext_lazy("Your message has been sent."))
            return HttpResponseRedirect('/kontakt/success/')

    else:

        form = ContactForm()

    return TemplateResponse(request, 'contact.html', {'form': form},)

def success(request):
    return TemplateResponse(request, "success.html") 
```

联系表：

```
{% load i18n %}

<form class="grid_8" action="/kontakt/" method="post">
    {% csrf_token %}

    <h2 class="center"> {% trans "Formularz kontaktowy:"%} </h2>
    <hr>

    {% if request.session.has_commented %}
    <h2>{% trans "You've already sent a message. Please wait 60 seconds to send another message" %}</h2>

    {%else%}
    {% for field in form %}

    <div class="grid_3 ">
        <div class="label">
            {{ field.label_tag }}
        </div>
        <div class="help_text">
        {% if field.errors %}
            <div class="error">({{ field.errors|striptags }})</div>

        {% endif %}

            {{ field.help_text }}

        </div>
    </div>
    <div class="grid_4 alpha">
        {{ field }}
    </div>
    <div class="clear"></div>
    {% endfor %}
    <hr>
    <div style="text-align: center;">
        <input class="submit" type="submit" value="{% trans "Wyślij wiadomość" %}" />
    </div>

    {% endif %}
</form> 
```

# xcode4.3 - 关于 MKStoreKit 错误

> ID：10459658
> 
> 赞同：0
> 
> 时间：2012-05-05T06:57:40.993
> 
> 标签：xcode4.3, mkstorekit

我的 Xcode 项目导入了 MKStoreKit。我跟着这个。 [http://blog.mugunthkumar.com/coding/using-mkstorekit-in-your-apps/](http://blog.mugunthkumar.com/coding/using-mkstorekit-in-your-apps/) 但它有很多错误。

SFHFKeychainUtils.m ,ARC Casting Rules ,语义问题 ,ARC Restrictions

总共 39 个错误。

我链接了 StoreKit.framework、Security.framework。

- 我在应用程序 didFinishLaunchingWithOptions 中编写了这个初始化代码。初始化代码为[MKStoreManager sharedManager]；

但是出现了错误。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:53:52.383

您需要对所有 MKStoreKit 文件（包括 JSONKit、SFHFKeychainUtils 和 NSData+Base64）禁用 ARC。详细信息在这篇文章中

[禁用某些文件的自动引用计数](https://stackoverflow.com/questions/6448874/disable-automatic-reference-counting-for-some-files)

然后注释掉所有的错误信息行

```
/*
#if ! __has_feature(objc_arc)
#error MKStoreKit is ARC only. Either turn on ARC for the project or use -fobjc-arc flag
#endif
*/ 
```

这消除了此方法中的所有错误，但只有一个错误。但他只是忘记在 .h 中声明它

```
+(id) receiptForKey:(NSString*) key {

  NSData *receipt = [MKStoreManager objectForKey:key];
  if(!receipt)
    receipt = [MKStoreManager objectForKey:[NSString stringWithFormat:@"%@-receipt", key]];

  return receipt;               
} 
```

在您的 .h 中添加这一行

```
+(id) objectForKey:(NSString*) key; 
```

代码现在将编译。不知道它是否有效，但至少它可以编译。

# range - 可以在 Google Closure 中比较积分吗？

> ID：10459659
> 
> 赞同：0
> 
> 时间：2012-05-05T06:57:41.367
> 
> 标签：range, google-closure, google-closure-library

Google Closure 提供了一种寻找“最深可能点”的方法。例如，如果我想弄清楚光标是否位于节点的末尾，我是否应该从编辑器范围创建最深的点并比较它们是否相等？

> var range = this.getRange(); var node = this.getRange().getContainer();
> 
> var range_end = goog.editor.range.getDeepEndPoint(range, false); var node_end = goog.editor.range.Point.getPointAtEndOfNode(node); range_end == node_end

[http://closure-library.googlecode.com/svn/docs/closure_goog_editor_range.js.html](http://closure-library.googlecode.com/svn/docs/closure_goog_editor_range.js.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:13:28.053

不，Javascript 对象总是不相等的——你需要编写一个方法来比较两者。

# sql-server-2008-r2 - SQL Server 更改跟踪：如何手动应用更改？

> ID：10459661
> 
> 赞同：1
> 
> 时间：2012-05-05T06:57:52.820
> 
> 标签：sql-server-2008-r2, change-tracking

我有一个为所有表（大约 200 个表）打开更改跟踪的数据库。

如何告诉 SQL Server 我要应用已跟踪的更改？

关闭然后打开更改跟踪的选项不合适 - 它花费了太多时间。

# php - 我应该如何将这些多个值存储在我的 MySQL 表中？

> ID：10459663
> 
> 赞同：0
> 
> 时间：2012-05-05T06:58:00.623
> 
> 标签：php, mysql, database-design

我正在为一个新网站设计数据库，用户可以在其中选择一些他们最喜欢的音乐流派。每个流派都有一个与之关联的 id，所以如果 John 喜欢 Pop、Rock 和 R&B，他会喜欢 1、2 和 3。

将这些存储在用户表中的最佳方法是什么？

现在我有他们这样的：

```
genre_id | user_id
------------------
1,2,3    | 1 
```

在php中，我在逗号分隔符上分解这些值并以这种方式获取各个ID。但这显然不是正确的做法。

我知道我可以有一个名为“genre_to_user”的单独表，对于约翰喜欢的每种类型，我都可以在该表中输入一个条目，如下所示：

```
genre_id | user_id
------------------
1        | 1
2        | 1
3        | 1 
```

为了得到约翰喜欢的所有东西，我可以做一个`SELECT * FROM 'genre_to_user where user_id = 1`

但是我认为从长远来看这不会非常有效，因为该表充满了大量的记录。因为我将在同一页面上最多有 30 个用户的列表页面上为每个用户进行一次计算。这些页面遍布整个网站。

那么解决这个问题的正确（和**有效**）方法是什么？

此外，mysql 中是否有任何数据类型用于存储逗号分隔的值，而不仅仅是将它们粘贴在 varchar 字段中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:02:18.237

您应该使用`genre_to_user`您描述的交叉引用表。这将使您的数据库更快地搜索记录。

不要太担心“大量记录”，这就是数据库的用途:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T21:43:28.907

创建像您描述的genre_to_user 这样的交叉引用表具有允许反向搜索的额外好处。换句话说，您可以找出哪些用户或有多少用户的genre_id 为1。

# django - Django - 导出到 Excel 并呈现到模板

> ID：10459670
> 
> 赞同：2
> 
> 时间：2012-05-05T06:59:16.937
> 
> 标签：django, forms, excel, templates, export

更改的问题：2012 年 5 月 5 日下午 2:34（太平洋标准时间）

我想知道是否可以从表单 POST 数据中呈现模板，并在该模板中提供一个按钮/链接，指向模板中使用的相同 POST 数据的 Excel 电子表格。

我已经使用 POST 进行了 Excel 下载，并使用 POST 渲染了一个模板，但是我希望在按下表单的提交按钮时发生以下情况： 1\. 将信息从视图发送到模板，拥有模板呈现信息，在模板中有一个按钮/链接，单击该按钮/链接时，会弹出一个窗口，询问用户是否要打开/保存 .XLS 文件。

我用来执行每个操作的代码如下：
1 在新 URL 中呈现模板
`return render_to_response('report/result.html', {long dictionary}, context_instance=RequestContext(request))`

2 使用模板导出为 .XLS 文件：
`response2 = render_to_response('report/result.html', {long dictionary}, context_instance=RequestContext(request))`
`filename = "ToolboxReport%s.xls" % (datetime.now())`
`response2['Content-Disposition'] = 'attachment; filename='+filename`
`response2['Content-Type'] = 'application/vnd.ms-excel; charset=utf-8'`
`return response2`

这是我的预期顺序： 1\. 在选项页面：选择选项，单击生成报告按钮 2\. 在结果页面：显示信息，显示按钮/链接以将此信息下载为 .XLS 3.（可选）单击下载按钮：打开/保存选项似乎下载与 .XLS 相同的信息

我似乎无法从选项页面获取 POST 数据以用于结果页面和 .XLS 下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T08:52:12.433

我在表单上使用了两个不同的按钮，一个用于*列出结果*，一个用于将结果*导出到 excel*。

在表单模板中：

```
<input type="submit" name="list" value="List Results" />
<input type="submit" name="excel" value="Export to Excel" /> 
```

在我看来功能：

```
# process your post data here...

# end processing your post data
if request.REQUEST.get('excel'): 
    # excel button clicked
    result = '<your content result here>'
    response = http.HttpResponse(result.encode("<encoding>", 'ignore'), content_type='application/vnd.ms-excel;charset=<charset>')
    response['Content-Disposition'] = 'attachment; filename="reports.csv"'
    response['Expires'] = "Mon, 26 Jul 2013 05:00:00 GMT"
    return response
elif request.REQUEST.get('list'):
    # List button clicked
    return render_to_response(<some render param here>, <some context>, <etc>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:24:50.383

您只需要构建一个带有隐藏输入标签的表单，其中包含您从上一篇文章中获得的信息和一个提交按钮。添加一个附加参数来告诉您要下载的视图。

# ios - 分享时出现错误（Twitter 的 iOS 分享工具包）

> ID：10459672
> 
> 赞同：0
> 
> 时间：2012-05-05T06:59:36.910
> 
> 标签：ios, sharekit

我尝试使用 Xcode 中的共享工具包将我的应用程序（iOS 应用程序）中的照片发送到 Twitter，但出现此错误：共享时出错。当我通过电子邮件或面子书发送它时，它可以工作，但是对于 twitter，我收到了这个错误。这是我要发送的代码：

*   (IBAction) SendingImage:(id) sender {

    UIImage *image=self.unfilteredImage; // 得到

    SHKItem *shareItem =[SHKItem image:image title:@"My App"]; SHKActionSheet *actionSheet =[SHKActionSheet actionSheetForItem:shareItem];

    [actionSheet showInView:self.view];

    //[动作表发布];

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:53:25.833

这更像是评论，但我没有看到评论按钮。除了 Facebook，我正在尝试做同样的事情，但我还没有让它工作。你的故事板是什么样的？我让图像进入 segue，在 segue 之后，它进入一个 ViewController，上面覆盖了一个 ImageView。在 ViewWillLoad 中，我的代码与您上面的代码相似，只是它从不显示 Facebook 登录或任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:03:57.200

也许您的 DefaultSHKConfigurator.m 或（我的称为）ShareKitDemoConfigurator.m 有问题？您是否为 twitter 正确设置了钩子？在该文件中，他们提供了一个链接，因此您可以为每种社交网络类型设置您的 id/hook。我现在为 Facebook 工作。[当您与https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)上的说明进行交叉引用时，也许有一些东西需要您检查. 这就是我发现我的错误的方式。他们在 Sharekit2.0 附带的示例类目录中也有示例。您使用的是上面链接中提到的 ShareKit2.0 还是原始 Sharekit 网站上的那个？似乎社区已经接管了更新应用程序，也许您有旧版本？当我更新我的 ShareKit 版本时，我发现首先制作一个备份 zip 文件很有帮助，以防万一出现任何问题。我遇到了困难，不得不重新创建我的项目。祝你好运！

# python - Python函数返回None，不清楚为什么

> ID：10459673
> 
> 赞同：2
> 
> 时间：2012-05-05T06:59:43.427
> 
> 标签：python

我对 python 很陌生，遇到了一个我无法解释的问题。我已经尝试在这里搜索论坛答案，但我发现的内容与我的情况不符。感觉就像我错过了一些非常基本的东西，但我没有看到它（显然......）

这段代码以我期望的方式运行：

```
import string

mults = [1,2,3,4,6,7,9,10,12,15,16,19,21,22,24]

def factor_exp(lst):
    if lst[-1] == 1:
        lst.pop()
        return lst+[1]
    if lst[-1] == 2:
        lst.pop()
        return lst+[1,1]
    else:
        return "Should never get here"

print factor_exp([1])
print factor_exp([2])
print factor_exp([1,2]) 
```

这将返回：

```
>>> 
[1]
[1, 1]
[1, 1, 1] 
```

这就是我想要的。

我认为在函数内部的列表上使用 append 和 extend 也可以。在代码底部附近添加了一个“附加”。

```
import string

mults = [1,2,3,4,6,7,9,10,12,15,16,19,21,22,24]

def factor_exp(lst):
    if lst[-1] == 1:
        lst.pop()
        return lst+[1]
    if lst[-1] == 2:
        lst.pop()
        return lst.append([1,1])
    else:
        return "Should never get here"

print factor_exp([1])
print factor_exp([2])
print factor_exp([1,2]) 
```

但这会返回：

```
>>> 
[1]
None
None 
```

为什么会出现“无”？提前感谢您的任何帮助或见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T07:01:49.403

我没有研究你的代码，但我会说这是为了这一行：

```
return lst.append([1,1]) 
```

`list.append()`总是返回`None`。

所以`lst.append([1,1])`将附加`[1,1]`到`lst`并返回`None`。

# javascript - 密码的正则表达式（Javascript）

> ID：10459675
> 
> 赞同：0
> 
> 时间：2012-05-05T06:59:48.777
> 
> 标签：javascript, regex, html

我需要帮助创建密码的正则表达式。

密码可以包含字母、数字、下划线 (_)、美元符号 ($) 和连字符 (-)，长度必须至少为 3 个字符，最多为 30 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:01:34.117

```
/[a-z0-9_$-]{3,30}/ 
```

将根据您的要求进行匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T07:06:02.630

字母、数字、下划线、美元符号和连字符均包含在此范围内：

```
[a-zA-Z0-9_$-] 
```

将其限制为 3 到 30 包含在以下内容中：

```
{3,30} 
```

最后，我们可以通过添加不区分大小写的修饰符来减少它：

```
/^[a-z0-9_$-]{3,30}$/i 
```

添加`^`并`$`强制它从头到尾匹配，这意味着我们不会匹配测试字符串的子集。整个提交的字符串要么通过，要么失败。

[您可以通过访问http://regexr.com?30ru6](http://regexr.com?30ru6)尝试使用几个密码

# php - 如果会话已过期，则 AJAX 注销

> ID：10459676
> 
> 赞同：1
> 
> 时间：2012-05-05T07:00:00.387
> 
> 标签：php, ajax, session

如果 SESSION 已过期，我有许多 AJAX 调用仍然可以部分工作。

例如：将加载一个联系我们的表单，可以填写并似乎已发送，但 AJAX 调用在后端失败，因为 SESSION 变量不存在。

我想设置一个通用的 PHP 来检查会话是否仍然存在，例如：

```
 session_start();     
 <?php if(!isset($_SESSION['userid']) {header('Location: index.php');}?> 
```

但是，这一切都没有发生。

我假设 header() 仅在页面加载时才起作用 - 这是正确的吗？

因此，我假设我需要获取 AJAX 调用以在会话中返回成功或失败，并从 JQUERY 进行重定向。

这是最好的方法吗？header() 可以在 AJAX 调用上重定向吗？还有另一种方法可以让重定向从 AJAX PHP 调用中工作吗？

谢谢

*** 更新 ***

是的，页面已经加载。AJAX 调用是一个发送联系请求的后页面加载函数。因此，我认为 header() 从我在这里读到的内容是不行的。header() 本来会很好，因为它可以位于大型 PHP 脚本的顶部，并一般响应设置会话的任何请求。

看起来我必须为使用会话的每个 AJAX 调用建立一个签入。可以使用通用函数。当会话在 AJAX 站点上过期时，是否有更简单的方法来注销用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:05:16.353

如果是 AJAX 调用，则页面的标题已经发送，因此无法通过 AJAX 调用更改。相反，请尝试使用元刷新来代替标头重定向：

```
<?php
session_start();
if(!isset($_SESSION['userid']) { 
    echo '<meta http-equiv="refresh" content="0; url=index.php">'; 
} 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:50:12.050

更新你的脚本如下：

```
<?php
session_start();
if(!isset($_SESSION['userid']) {
  echo 'true';
} else echo 'false';
?> 
```

在 jQuery 中检查：如果返回 true，则 $_SESSION['userid'] 是 isset，否则不是 isset）

# java - 无法在 JFrame 中添加多个 JPanel，

> ID：10459682
> 
> 赞同：2
> 
> 时间：2012-05-05T07:01:28.900
> 
> 标签：java, swing, jpanel

我有一个以下 JFrame。

```
public class AddActivityWindow extends JFrame {

    //declaration of components go here
     ...
    public AddActivityWindow(ActivityStore store) {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel pnl_date = new JPanel();
        JLabel lbl_date = new JLabel("X");
        pnl_date.add(lbl_date);
        add(pnl_date);

        pnl_activities = new JPanel();
        JLabel lbl_act = new JLabel("Y");
        pnl_activities.add(lbl_act);
        add(pnl_activities);

        setLocationRelativeTo(null);
        setVisible(true);

    }
} 
```

当我创建这个框架时，我期望它会创建一个带有两个面板的框架。但是，我只看到第二个面板（即）我只`Y`在屏幕上看到而不是`X`. 但是，如果我删除第二个面板的代码，那么我可以看到`X`.

当我添加第二个面板时会发生什么。为什么第一个面板没有出现在框架中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T07:09:26.143

a 的默认布局`JFrame`是 a `BorderLayout`。的一个特点`BorderLayout`是它只能在每个区域中包含一个组件。如果只使用该`add`方法而不指定任何约束，则与将组件添加到`CENTER`. 因此，您的第二次`add`调用将替换您第一次添加的元素。

可能的解决方案：指定约束，例如

```
add(pnl_date, BorderLayout.NORTH);
//...
add(pnl_activities, BorderLayout.CENTER); 
```

或`BoxLayout`为`FlowLayout`您的`JFrame`. 这取决于您的需求。查看[布局管理器的可视化指南，](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)这是选择管理器的一个很好的起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T07:17:06.337

您应该使用不同的布局管理器，请查看：布局管理器[的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)为您选择一个。

这对我来说很好，

```
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class FrameTest extends JFrame {

    public FrameTest() {
        setLayout(new FlowLayout());
        setSize(150, 150);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel pnl_date = new JPanel();
        JLabel lbl_date = new JLabel("X");
        pnl_date.add(lbl_date);
        add(pnl_date);

        JPanel pnl_activities = new JPanel();
        JLabel lbl_act = new JLabel("Y");
        pnl_activities.add(lbl_act);
        add(pnl_activities);

        setLocationRelativeTo(null);
        setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new FrameTest().setVisible(true);

            }
        });
    }
} 
```

# c - 'asmlinkage' 修饰符是什么意思？

> ID：10459688
> 
> 赞同：49
> 
> 时间：2012-05-05T07:01:45.903
> 
> 标签：c, assembly, linux-kernel

我读过它用于在 Linux 中实现系统调用的函数。例如：

```
asmlinkage long sys_getjiffies( void )
{
  return (long)get_jiffies_64();
} 
```

并且它告诉编译器传递堆栈上的所有函数参数。但不是已经这样了吗？函数参数通常仅通过将它们压入堆栈来传递。还是我们在这里指的是通过寄存器传递函数参数？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-05T07:04:41.897

有一个[常见问题解答](http://kernelnewbies.org/FAQ/asmlinkage)：

> asmlinkage 标签是关于这个简单函数的另一件事。这是一些 gcc 魔术的#define，它告诉编译器该函数不应该期望在寄存器中找到它的任何参数（一种常见的优化），而只能在 CPU 的堆栈上。回想一下我们之前的断言，system_call 使用它的第一个参数，系统调用号，并允许最多四个参数传递给真正的系统调用。system_call 只需将其其他参数（在寄存器中传递给它）留在堆栈中即可实现这一壮举。所有系统调用都标有 asmlinkage 标记，因此它们都在堆栈中查找参数。当然，在`sys_ni_syscall`'s 的情况下，这没有任何区别，因为`sys_ni_syscall`不接受任何参数，但对于大多数其他系统调用来说，这是一个问题。而且，因为您将`asmlinkage` 在许多其他函数前面看到，所以我认为您应该知道它是关于什么的。
> 
> 它还用于允许从汇编文件调用函数。

# php - 无法打开流：HTTP 请求失败！HTTP/1.1 503 服务暂时不可用？

> ID：10459691
> 
> 赞同：1
> 
> 时间：2012-05-05T07:01:50.863
> 
> 标签：php, ip, fopen

这是我的代码

```
<?php

    $ip=$_SERVER['REMOTE_ADDR'];

    $url=file_get_contents("http://whatismyipaddress.com/ip/$ip");

    preg_match_all('/<th>(.*?)<\/th><td>(.*?)<\/td>/s',$url,$output,PREG_SET_ORDER);

    $isp=$output[1][2];

    $city=$output[9][2];

    $state=$output[8][2];

    $zipcode=$output[12][2];

    $country=$output[7][2];

    ?>
    <body>
    <table align="center">
    <tr><td>ISP :</td><td><?php echo $isp;?></td></tr>
    <tr><td>City :</td><td><?php echo $city;?></td></tr>
    <tr><td>State :</td><td><?php echo $state;?></td></tr>
    <tr><td>Zipcode :</td><td><?php echo $zipcode;?></td></tr>
    <tr><td>Country :</td><td><?php echo $country;?></td></tr>
    </table>
    </body> 
```

如何找出查看 PHP 页面的人的 ISP 提供商？

是否可以使用 PHP 来跟踪或揭示它？

**错误：http:** [//i.imgur.com/LGWI8.png](http://i.imgur.com/LGWI8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:41:28.820

您可以使用以下代码来检索访问者的域名。当您分解点时，可以仅检索 isp 名称。

```
try{
    $hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
} catch(Exception $e){
    $hostname = 'unknown';
} 
```

# macos - 使用蓝牙伴侣与 Arduino UNO 和 Mac 进行串行通信

> ID：10459692
> 
> 赞同：5
> 
> 时间：2012-05-05T07:01:55.893
> 
> 标签：macos, bluetooth, arduino, serial-communication

我正在尝试通过蓝牙在 Arduino 和 Mac 之间建立串行通信，但遇到了问题。

我的环境是这样的：

*   Arduino UNO
*   sparkfun 的蓝牙伴侣
*   MacBook、OS X 10.7

首先，我对 arduino 进行了如下编程，如[本教程](http://bit.ly/KxhvfT)所示。

```
/***********************
 Bluetooth test program
***********************/

int counter = 0;
int incomingByte;

void setup() {
  Serial.begin(115200);
}

void loop() {
  // see if there's incoming serial data:
  if (Serial.available() > 0) {
    // read the oldest byte in the serial buffer:
    incomingByte = Serial.read();
    // if it's a capital R, reset the counter
    if (incomingByte == 'R') {
      Serial.println("RESET");
      counter=0;
    }
  }

  Serial.println(counter);
  counter++;

  delay(250);
} 
```

当 Arduino 与 USB 连接时，它工作得很好。（Arduino 控制台接收数字序列，例如 1、2、3、4... 带有换行符。）

然后我用一些电线连接了 Arduino UNO 和蓝牙伴侣，并成功与 Mac 配对。

当我在 iTerm 上运行这一行时，我只收到了问号序列。

```
$ sudo cu -s 115200 -l /dev/tty.name-of-port
Connected.
?????????????????????????????? 
```

我也试过`screen /dev/tty.name-of-port`，或者 Arduino 控制台，但结果都是一样的。

如何解决这些乱码信号并接收正确的字符？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T09:04:08.733

可能是因为波特率高。试试把它降低到9600。我感觉115200对于串口来说太大了。

# javascript - 使用javascript从MVC Action通过iFrame重定向到父级

> ID：10459694
> 
> 赞同：1
> 
> 时间：2012-05-05T07:02:06.183
> 
> 标签：javascript, asp.net-mvc

我在 Webforms 站点的 iFrame 中有一个 MVC 表单。表单通过以下代码提交，但我希望它重定向到 Webforms 站点上的父页面。它不起作用，因为我无法让 RedirectResult 以父级为目标。从我过去了解到的是，它不能做到吗？

```
[HttpPost]
public ActionResult Index(string FindText, string FindTown)
{
    return new RedirectResult("http://www.thesite.com/SearchResults.aspx?SearchText=" + SearchText + "&Town=" + Town);
} 
```

有没有办法可以通过 Javascript 从 Action 内部定位父对象以实现我想要的结果？

例如。使用，

```
window.parent.location.href 
```

如果这是可能的，我会怎么写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T20:17:59.277

您可以尝试返回 JavaScriptResult：

```
return new JavaScriptResult 
{
    Script = string.Format("window.parent.location.href = '{0}'", url)
}; 
```

或内容结果：

```
return ContentResult
{
    Content = string.Format("<script type="text/javascript">window.parent.location.href = '{0}';</script>", url),
    ContentType = "text/html"
}; 
```

# html - 锚链接问题

> ID：10459703
> 
> 赞同：0
> 
> 时间：2012-05-05T07:02:58.193
> 
> 标签：html, navigation, positioning, anchor, nav

好的，所以我的页面上有锚链接，并且我已将导航链接设置为这些锚。锚工作正常，只是他们一直把我放得太低。我将锚链接设置在每个部分的标题上方，但锚链接不断将我放在标题下方。这是我的导航代码和我的一个锚点。

```
<div class="content-outer" id="top_nav">
            <div class="content-inner">
                <ul>

<li><a href="#home">Home</a><li>
<li><a href="#services">Services</a></li>
<li><a href="#about">About</a></li>
<li><a href="#skills">Skills</a></li>
<li><a href="#portfolio">Portfolio</a></li>
<li><a href="#contact">Contact</a></li>
<li class="last"><a href="#">Blog</a></li>                    
                </ul>
            </div>
        </div>

<div id="Layer-56" class="servicesheader png"  ><a name="services" id="services"></a
</div>

<div id="Layer-56" class="servicesheader png"  >
<img src="Layer-56.png" width="273" height="42" alt="servicesheader" class="pngimg" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:34:20.713

验证您的标记。您现在`id`两次使用相同的值，这是被禁止的。将属性分配给自然元素，而不是`a`内容为空的元素。`id`考虑使用标题标记（例如，`h2`）作为标题。

这可能不会解决手头的问题，但修复标记并发布一个完整的示例来演示问题（整个文档或 URL）将增加获得帮助的几率。

该问题可能是由 CSS 定位引起的，也可能是由 CSS 代码中的错误引起的。

# azure - 我可以在另一个订阅的另一个部署中设置一个内部端点来负载平衡的工作角色吗

> ID：10459704
> 
> 赞同：0
> 
> 时间：2012-05-05T07:03:09.407
> 
> 标签：azure, azure-worker-roles

随着时间的推移，我计划拥有一套应用程序（Web 角色），每个应用程序（Web 角色）都在 Azure 企业帐户下的自己订阅中的自己的部署中执行。我希望这些应用程序调用一个通用的基于 HTTP 的 API，我希望它能够存在于自己的部署/订阅中并进行负载平衡。

我将如何设置端点通信，以便应用程序套件将适当的输入端点暴露给互联网，而后端 API 服务不会暴露给互联网，而只会暴露给应用程序？允许跨部署通信的内部端点？

我可能会误解，但似乎端点和网络流量的东西只控制内部部署通信——我可以通过内部端点跨部署吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:11:33.803

部署彼此之间是网络隔离的，因此您需要公开一个输入端点，这意味着它可以通过 Internet 访问，或者使用其他一些通信方式，例如服务总线。

请注意，如果您公开输入端点，则始终可以使用某种身份验证（例如 X509 证书）来锁定访问权限。

# php - 如何在&之间获取所有内容，包括标签和文本

> ID：10459708
> 
> 赞同：1
> 
> 时间：2012-05-05T07:03:41.423
> 
> 标签：php

我尝试使用`preg_match_all`来获取给定 html 标记之间的所有内容，但它会产生一个空结果，而且我不擅长 php。

有没有办法在标签之间获取内容？像这样 -

```
<span class="st"> EVERYTHING IN HERE INCLUDING TAGS<B></B><EM></EM><DIV></DIV>&+++ TEXT </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:00:04.910

`preg_match`不太擅长 HTML 解析，尤其是在您的情况下，它有点复杂。

相反，您使用 HTML 解析器并获取您正在寻找的元素。以下是选择第一个 span 元素的简单示例。这也可以通过查找类属性来区分，例如，只是为了给你一些开始的指示：

```
$html = '<span class="st"> EVERYTHING IN HERE INCLUDING TAGS<B></B><EM></EM><DIV></DIV>&+++ TEXT </span>';
$doc = new DOMDocument();
$doc->loadHTML($html);
$span = $doc->getElementsByTagName('span')->item(0);
echo $doc->saveHTML($span); 
```

输出：

```
<span class="st"> EVERYTHING IN HERE INCLUDING TAGS<b></b><em></em><div></div>&amp;+++ TEXT </span> 
```

如果您仔细观察，您会发现即使是 HTML 错误也已被即时修复，`&+++`其中的 HTML 不是有效的。

如果只需要内部 HTML，则需要遍历 span 元素的子元素：

```
foreach($span->childNodes as $child)
{
    echo $doc->saveHTML($child);
} 
```

哪个给你：

```
 EVERYTHING IN HERE INCLUDING TAGS<b></b><em></em><div></div>&amp;+++ TEXT 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-05T07:06:56.877

试试这个`preg_match`

```
$str = "<span class=\"st\"> EVERYTHING IN HERE INCLUDING TAGS<B></B><EM></EM><DIV></DIV>&+++ TEXT </span>";
preg_match("/<span class=\"st\">([.*?]+)<\/span>/i", $str, $matches);
print_r($matches); 
```

# android - Android acra 异常

> ID：10459709
> 
> 赞同：0
> 
> 时间：2012-05-05T07:03:54.420
> 
> 标签：android, acra

我刚刚为 Android 上的异常报告设置了 ACRA，在我的本地模拟器上，我得到了这个异常：

这是我的课：

```
package com.problemio;

import android.app.Application;

import org.acra.*;

    import org.acra.annotation.*;

    @ReportsCrashes(formKey = "...")
    public class MyApplication extends Application
    {
        @Override
        public void onCreate() 
        {
            // The following line triggers the initialization of ACRA
            ACRA.init(this);
            super.onCreate();
        }

    } 
```

我应该如何更改代码以使其正确？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:27:44.417

让我的评论成为答案，因为它解决了这个问题：

这样的电子表格不存在，或者至少当我将浏览器指向[该地址](https://spreadsheets.google.com/formResponse?formkey=0AteWveJtbl4GdDA2WWsyRE5Nb%E2%80%8C%E2%80%8BEtJM2hmbmd5NVhxM3c&ifq) （`https://spreadsheets.google.com/formResponse?formkey=0AteWveJtbl4GdDA2WWsyRE5Nb‌​EtJM2hmbmd5NVhxM3c&amp;ifq`）时，它是这样说的。确保正确输入了表单密钥。

# google-drive-api - 从 Google Drive 公共文档中获取文档文本并显示在网站上

> ID：10459711
> 
> 赞同：3
> 
> 时间：2012-05-05T07:04:28.343
> 
> 标签：google-drive-api

我刚刚想到在我的网站上显示一个协作处理的公共 Google Drive 文档的内容。我希望这会很简单，因为我只会提取简单的文本并且文档是公开的，所以没有身份验证恶作剧会阻碍我的方式。

我查看了[Google Drive REST API](https://developers.google.com/drive/v1/reference/)，但事实证明我只能获取文件元数据和/或整个文档文件。不仅仅是文档内容。

我不想花一天的时间来编写代码，我认为这样做会很好，但可以直接从我的网站链接到文件。以前有人试过吗？任何人都尝试过 Google Drive API 并知道需要做多少工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:01:43.113

如果您正在考虑获取原生 Google 文档（如 Google 电子表格或 Google 文档）的内容，目前可以使用 Drive API。

在 Drive API 中，对于 Google 原生文档类型，您将拥有一系列“导出链接”作为文件元数据的一部分。这些导出 URL 中的每一个都允许您以特定导出格式（如 RTF、纯文本、HTML、PDF 等）下载 Google 文档的内容。更新我的答案...

请参阅文档：[https ://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

# c# - 从文本框读取密码

> ID：10459714
> 
> 赞同：0
> 
> 时间：2012-05-05T07:04:58.833
> 
> 标签：c#, winforms

我在 C# 中创建了一个密码字段

```
 public System.Windows.Forms.TextBox passwordBox; 
```

为该字段所做的其他设置是

```
this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.BackColor = System.Drawing.Color.CornflowerBlue;
            this.ClientSize = new System.Drawing.Size(381, 199);
            this.Controls.Add(this.button1);
            this.Controls.Add(this.panel1);
            this.Controls.Add(this.label1);
            this.MaximizeBox = false;
            this.MinimizeBox = false;
            this.Name = "Progpassword";
            this.Text = "Programmer Password";
            this.TransparencyKey = System.Drawing.Color.FromArgb(((int)(((byte)(192)))), ((int)(((byte)(255)))), ((int)(((byte)(192)))));
            this.Load += new System.EventHandler(this.Progpassword_Load);
            this.panel1.ResumeLayout(false);
            this.panel1.PerformLayout();
            this.ResumeLayout(false);
            this.PerformLayout(); 
```

我无法阅读在 TextBox 中输入的文本

我正在使用以下行读取值

```
string text = PasswordBox.Text; 
```

这是读取密码字段的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:17:36.093

是`text = passwordBox.Text;`的，只有这样你才能得到它！

# java - 在java中通过网络发送列表

> ID：10459717
> 
> 赞同：1
> 
> 时间：2012-05-05T07:05:17.047
> 
> 标签：java, serialization, arraylist

这是我的清单：

```
List<Form> to_be_sent=new ArrayList<Form>(); 
```

Form 是一个实现可序列化的类，只包含字符串字段。
我可以这样做吗：

```
ObjectOutputStream writer = new ObjectOutputStream(resp.getOutputStream());
writer.writeObject(to_be_sent);
writer.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:23:16.583

有用！

这是一个最小的工作实现，它序列化一个 List，并通过套接字连接发送它并在另一端反序列化它，打印到达的内容。

```
public static void main(String[] args) throws Exception {
    List<String> list = Arrays.asList("one", "two", "three");
    Thread serverThread = new Thread(new Runnable() {
        public void run() {
            try {
                InputStream in = new ServerSocket(999).accept().getInputStream();
                Object object = new ObjectInputStream(in).readObject();
                System.out.println(object.getClass() + ": " + object);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
    serverThread.start();
    Socket socket = new Socket("localhost", 999);
    new ObjectOutputStream(socket.getOutputStream()).writeObject(list);
    serverThread.join();
} 
```

输出：

```
class java.util.Arrays$ArrayList: [one, two, three] 
```

# c++ - Boost、异常、线程和异步，我应该如何处理它们？

> ID：10459718
> 
> 赞同：3
> 
> 时间：2012-05-05T07:05:24.917
> 
> 标签：c++, multithreading, exception, boost, boost-asio

我有许多不同的线程 ( `boost::thread_pool`) 到`boost::asio::io_service`. 将`io_service`调用一个函数，该函数将触发`async_read`，该函数将触发另一个`async_read`，从中可以调用许多函数。这一切都在两个类中完成：线程从一个`Server`类产生，并`async_read`从一个类调用`Client`。

如果我从（从类）`throw`调用的那些函数中，谁会得到异常？? 如果是这样，有什么方法可以忽略错误并恢复正常执行？`async_read``Client``catch``Server`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:55:13.620

[您是否阅读过 Boost.Asio手册](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/io_service.html#boost_asio.reference.io_service.effect_of_exceptions_thrown_from_handlers)的这一部分？

**摘要**：“如果从处理程序中抛出异常，则允许异常通过抛出线程对 run()、run_one()、poll() 或 poll_one() 的调用传播。没有其他线程正在调用这些函数中的任何一个受到影响。**然后由应用程序负责捕获异常**。”

所以这取决于你的`catch`陈述在哪里。

**更新**

异常工作的一般方式是，一旦发生错误，创建错误的函数将`throw`发生异常。任何调用函数都必须`try`对它调用的工作函数以及`catch`解决错误的异常。或者，您可以将捕获的异常（或任何其他异常）重新抛出到链上更高的任何调用函数。

```
void some_function()
{
    // do some work

    if (error_occurred) 
        // don't know context, so pass the buck to calling function
        throw std::exception;
}

void some_calling_function()
{
    try {
        some_function(); // could throw
    } catch (std::exception& e) {
        // do some error handling depending in context
    }
    // code will resume here
} 
```

# php - 我可以购买的脚本来显示内联附件，如幻灯片共享

> ID：10459719
> 
> 赞同：0
> 
> 时间：2012-05-05T07:05:27.117
> 
> 标签：php, document, documentviewer

我可以购买任何脚本来在我的网站上显示 pdf、ppt、doc 附件 - 内联，因此用户无需下载它们即可查看。

我运行一个知识库，其中包含用户上传的各种文档 - 因此试图找到一种方法让他们更容易在下载之前查看文件。

Google 文档查看器可能会工作 - 但服务条款不允许我们构建像幻灯片共享这样的预览应用程序。还有其他人曾经做过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:10:51.000

您的网站是否在 wordpress 上运行？如果是，您可以使用 google doc embedder 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:27:23.527

我认为目前没有任何直接的方法可以在浏览器中显示 .ppt。当然，除了将其转换为适合 Flash 播放器或 html5 播放器之外，如 SlideShare 的情况。但是，我可能在这方面是错误的。

SlideShare 有大量基于 Amazon EC2 构建的文档转换架构。[请参阅SlideShare 工程博客上的[这篇文章]。](http://engineering.slideshare.net/2011/05/suicide-workers/)

或者，还有[Zoho](https://viewer.zoho.com/home.do) Viewer——它将在 2012 年底关闭。还有 PdfMeNot，但我认为它不再存在

# google-drive-api - 如何通过API检查用户是否登录了他的谷歌账户？

> ID：10459720
> 
> 赞同：3
> 
> 时间：2012-05-05T07:05:59.573
> 
> 标签：google-drive-api

我正在开发一个页面来显示用户可以访问的文档的预览。

为了预览，我使用的是带有 src = [https://docs.google.com/viewer?authuser=0&srcid=](https://docs.google.com/viewer?authuser=0&srcid=) {a document id}的 iframe

这里的问题是，当用户未登录时，它会显示一个空白 iframe。

如果当前用户未登录，我想将用户重定向到谷歌登录页面，然后显示预览文档的页面。

对于此功能，我必须首先检查用户是否使用 google 登录。

我认为谷歌在 iframe 的情况下施加了一些限制，因此它不会重定向到登录页面。

如何通过 API 实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:02:32.153

如果您使用 App Engine，请执行以下操作：

要查看显示 google 文档的页面，您必须已经在检查您是否已登录。

只需配置 Google 用户 API。一切都在这里描述：

[https://developers.google.com/appengine/docs/java/users/overview](https://developers.google.com/appengine/docs/java/users/overview)

[并在 web.xml https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)中设置安全约束

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/page_shows_google_doc</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

# android - 如何在android中找到歌曲标题、艺术家姓名，以便我可以在我的应用程序中分别显示所有属性？

> ID：10459727
> 
> 赞同：0
> 
> 时间：2012-05-05T07:07:27.807
> 
> 标签：android, media-player, mpmusicplayercontroller

我正在尝试使用类和所有这些东西创建一个`Media Player`应用程序。`MediaPLayer`我能够在一行中显示歌曲文件名。我发现很难将歌曲名称、歌曲名称、电影名称分开并将其分别显示在`TextView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:13:34.580

在提出任何问题之前，您需要通过互联网进行搜索。

```
 String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
     String[] projection = { MediaStore.Audio.Media._ID,
             MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.TITLE,
             MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.DISPLAY_NAME,
             MediaStore.Audio.Media.DURATION};

     cursor = this.managedQuery(
             MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection, selection,null, null);

     private List<String> songs = new ArrayList<String>();

     while(cursor.moveToNext()){
         songs.add(cursor.getString(0) + "||" + cursor.getString(1) + "||" +
                 cursor.getString(2) + "||" + cursor.getString(3) + "||" +
                 cursor.getString(4) + "||" + cursor.getString(5));
     } 
```

* * *

链接查看[这个](http://www.androidsnippets.com/list-all-music-files)，[这个](http://androidsamples.blogspot.in/2009/06/displaying-list-of-music-files-stored.html)，[这个](http://android.cyrilmottier.com/?p=440)，还有[这个，用于自定义列表视图](http://www.vogella.com/articles/AndroidListView/article.html)

# ios - 如何在 iOS 中查看和发布到 Facebook 群组页面？

> ID：10459731
> 
> 赞同：1
> 
> 时间：2012-05-05T07:09:04.667
> 
> 标签：ios, facebook

有很多关于从 iOS 在 Facebook 上发帖的内容，但似乎是相当盲目地发帖。

我希望能够通过 UITableView来**查看群组页面上的帖子。**我不希望用户能够离开这个页面，除非他们触摸了一个用户，Facebook 应用程序将在其中打开并且用户会去查看那个人。我只需要一个 UIWebView 来显示组页面，但我不想要通知中心和那里的所有东西。我希望这个非常简单明了。出现一个键盘，您可以将文本、照片或视频直接发布到群组 Facebook 页面。

我似乎找不到任何谈论在墙上查看帖子的地方......

# java - 创建 Hashmap 的对象并将其分配给映射引用。为什么？

> ID：10459732
> 
> 赞同：2
> 
> 时间：2012-05-05T07:09:04.797
> 
> 标签：java

我们为什么使用，

映射 abc = new HashMap(20);

代替

HashMap abc = new HashMap(20);

请帮我找出这两者之间的区别。

将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T07:12:01.500

在第一种情况下，`abc`变量的类型是`HashMap`，它是`Map`接口的实现。如果您稍后改变主意并想使用`TreeMap`例如，您将不得不更改`HashMap`代码中的许多引用，并且您可能使用`HashMap`了泛型`Map`操作足够的特性。

如果您使用`Map`接口作为变量的类型，则可以轻松更改实现。当您设计类以供重用时，这一点很重要。如果您有一个采用`Map`as 参数的方法，则任何`Map`实现都可以用来调用您的方法。因此，调用者可以自由使用最合适的实现。

# c++ - C++ 变量数组作为类成员

> ID：10459735
> 
> 赞同：4
> 
> 时间：2012-05-05T07:09:27.977
> 
> 标签：c++, arrays

我有一个小的 C++ 程序定义如下：

```
class Test
{
   public:
   int a;
   int b[a];
}; 
```

编译时，会产生错误：

```
testClass.C:7:5: error: invalid use of non-static data member ‘Test::a’
testClass.C:8:7: error: from this location
testClass.C:8:8: error: array bound is not an integer constant before ‘]’ token 
```

我如何了解错误消息的含义，以及如何修复它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T08:11:42.973

您不能在编译时使用未定义大小的数组。有两种方法：定义`a`为`static const int a = 100;`并忘记动态大小或使用`std::vector`，这比手动内存管理更安全：

```
class Test
{
public:
  Test(int Num)
    : a(Num)
    , b(Num) // Here Num items are allocated
  {
  }
  int a;
  std::vector<int> b;
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T07:11:33.930

除非您动态分配它们（例如 with `new[]`），否则 C++ 中的数组*必须*有一个编译时常量作为大小。并且`Test::a`不是编译时常量；它是一个成员变量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-05T07:26:15.053

让我们来看看这背后的完整原因，首先当你最初声明一个类时，任何成员变量都没有分配任何内存，因此公共或私有方法没有价值。这是给您的快速提示，现在针对您的问题：

您不能在类之外执行此操作，因为在编译之前应该知道任何数组大小，因为任何静态声明的数组都驻留在函数的堆栈帧中，并且编译器需要知道要准确分配多少内存。内存中唯一由程序员调整大小的段是**堆**。因此，每当您想要动态分配数组大小时，都需要将其声明为驻留在堆中，您可以这样做：

```
int a;
cin >> a;
int * b = new int[a]; 
```

这是声明具有未知大小（在运行时确定的大小）的数组的正确方法，将其与您的类集成这是您的操作方式，并记住任何类的私有或公共属性都没有内存 - 它们只是声明不应该在成员方法的其他地方或类之外包含任何初始化 - 这是因为它们是公共的，就像你的情况一样 - 当然在声明类的实例之后，例如 Test t. 无论如何，这是你在课堂上的做法：

```
class Test
{
public:
int a;
int * b;
Test(int Ia=1) {
    a = Ia;
    b = new int[a];
}
~Test() {
    delete[] b;
}
}; 
```

请参阅[C++ 中的 delete vs delete[] 运算符，](https://stackoverflow.com/questions/2425728/delete-vs-delete-operators-in-c)了解为什么要在析构函数中使用`delete[]`而不是`delete`在析构函数中使用。

# performance - freebsd shpgperproc 负责什么？

> ID：10459736
> 
> 赞同：1
> 
> 时间：2012-05-05T07:09:29.157
> 
> 标签：performance, freebsd, sysctl

我在谷歌上搜索了很多关于“每个过程的页面共享因子”负责的内容，但一无所获。这对我来说很有趣，我目前没有任何问题，只是好奇（想知道更多）。在 sysctl 中是：

```
vm.pmap.shpgperproc 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:53:57.260

首先要注意的是它`shpgperproc`是一个加载器可调参数，所以它只能在引导时使用适当的指令 in 设置`loader.conf`，之后它是只读的。

第二点要注意的是它是在 中定义的`<arch>/<arch>/pmap.c`，它处理 vm 子系统的体系结构相关部分。特别是，它实际上并没有出现在 amd64 中`pmap.c`——它最近被删除了，我将在下面讨论一下。但是，它存在于其他架构（i386、arm、...）中，并且在每个架构上都以相同的方式使用；即，它显示如下：

```
 void
    pmap_init(void)
    {
            ...
            TUNABLE_INT_FETCH("vm.pmap.shpgperproc", &shpgperproc);
            pv_entry_max = shpgperproc * maxproc + cnt.v_page_count; 
```

它没有在其他任何地方使用。`pmap_init()`仅调用一次：在引导时作为 vm 子系统初始化的一部分。`maxproc`, 只是可以存在的最大进程数（即`kern.maxproc`），并且`cnt.v_page_count`只是可用内存的物理页数（即`vm.stats.v_page_count`）。

A`pv_entry`基本上只是一个物理页面的虚拟映射（或者更准确地说是 a `struct vm_page`，所以如果两个进程共享一个页面并且都映射了它们，那么`pv_entry`每个映射都会有一个单独的结构。因此给定一个页面 ( `struct vm_page`) 需要脏或分页或需要更新hw页表的东西，通过查看对应的`pv_entry`s列表可以很容易地找到对应的映射虚拟页面列表（例如，看一下`i386/i386/pmap.c:pmap_remove_all()`）。

s的使用`pv_entry`使某些 VM 操作更高效，但当前的实现（至少对于 i386）似乎为 s 分配了静态量的空间（参见`pv_maxchunks`，它是基于 设置的`pv_entry_max`）`pv_chunk`，用于管理`pv_entry`s。如果内核在取消分配非活动的之后无法分配 a `pv_entry`，它就会恐慌。

因此，我们要`pv_entry_max`根据`pv_entry`我们想要的空间来设置；显然，我们至少需要与 RAM 页面一样多（这是`cnt.v_page_count`从哪里来的）。然后我们要考虑到许多页面将被不同进程多重虚拟映射的事实，因为`pv_entry`需要为每个这样的映射分配a。因此`shpgperproc`- 所有拱门的默认值为 200 - 只是一种缩放它的方法。在一个将在进程之间共享许多页面的系统上（例如在运行 apache 的负载很重的 Web 服务器上），显然可能会用完`pv_entry`s，因此需要增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:35:21.523

我现在附近没有 FreeBSD 机器，但似乎这个参数是在 pmap.c 中定义和使用的，[http: //fxr.watson.org/fxr/ident?v=FREEBSD7&im=bigexcerpts&i=shpgperproc](http://fxr.watson.org/fxr/ident?v=FREEBSD7&im=bigexcerpts&i=shpgperproc)

# javascript - 使 Bootstrap Carousel 流体化？

> ID：10459740
> 
> 赞同：0
> 
> 时间：2012-05-05T07:10:13.127
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我在 Bootstrap 中使用 jQuery Carousel 函数。我正在使用流畅的布局，我想知道是否可以让这些图像和内容也随着页面拉伸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:14:19.803

我不知道 jquery Carousel 是什么，但如果您希望图像像页面一样拉伸，您只需将图像宽度定义为百分比（即 100% 或 50%）。它会像页面一样调整大小。这是你的意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T12:34:00.517

Bootstrap 的[示例轮播](http://getbootstrap.com/examples/carousel/)已经是流动的（他们将轮播 div 放在“容器”div 之外）。但是，即使您应用`class="img-responsive"`到图像，轮播中的图像仍然不流畅。要使轮播图像也流畅，请将其添加到您的自定义 CSS 文件中：

```
.carousel .img-responsive {
  width:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:49:59.647

它应该通过将你的旋转木马放在一个流畅的行中来工作..

```
<div class="row-fluid">
    <div id="myCarousel" class="carousel slide">
        *etc*
    </div>
</div> 
```

# wpf - 如何在 Wpf 中继承我在 Windows 窗体中所做的

> ID：10459741
> 
> 赞同：2
> 
> 时间：2012-05-05T07:10:18.283
> 
> 标签：wpf

在 Windows 表单中，我创建了一个基本表单并从该基本表单继承了我的所有表单。

然后通过这种方式，我可以分享我想要的所有形式的所有**属性**、**函数**和**变量。**这种面向对象的方式也可以帮助我快速更改所有形式，只需更改我的基本形式

现在我想知道如何在**WPF中做这样的事情**

我使用公共静态类处理共享功能，但我正在寻找更好的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:55:51.763

您可以使用没有设计模式 (xaml) 的类。

看看这个 [网站参考](http://weblogs.asp.net/psheriff/archive/2009/11/02/creating-a-base-window-class-in-wpf.aspx)

# android - 我的应用程序一直强制关闭，并且无法在某些设备上安装

> ID：10459743
> 
> 赞同：0
> 
> 时间：2012-05-05T07:11:03.757
> 
> 标签：android, jquery, cordova

我有一些问题。所以在过去的两周里我一直在开发一个导航应用程序，并将它发送给几个人进行 beta 测试。他们中的一些人在从电子邮件附件中安装 .apk 时遇到“解析错误”，其他人安装良好且运行完美，而其他人则应用程序将强制随机关闭。问题是什么？

我使用 jquery 移动框架和最新版本的 phonegap 以及用于谷歌地图的 jquery 移动插件开发了该应用程序。我不认为是我的 html5 标记导致应用程序出现问题，我认为这可能与我的清单文件有关？

此外，如果它有任何区别，每当我使用虚拟模拟器运行应用程序时，我都会收到 OpenGL 或类似的错误消息，无法加载顶点着色器。

这是我的清单文件的副本，以及我的应用程序的源文件..

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.slammednavigator"
    android:versionCode="1"
    android:versionName="1.0" >
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
    />
    <uses-sdk android:minSdkVersion="3" android:targetSdkVersion="4"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"     />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:hardwareAccelerated="true" >
        <activity
            android:name=".SlammedNavigatorActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name="org.apache.cordova.DroidGap" 
            android:label="@string/app_name" 
            android:configChanges="orientation|keyboardHidden" >
            <intent-filter> 
            </intent-filter> 
        </activity>
    </application>

</manifest> 
```

这是我的 phonegap 源文件，它初始化并运行 assets/www 中的 html5 部分

```
package com.slammednavigator;

import android.os.Bundle;
import org.apache.cordova.*;
import android.content.Context;
import android.os.PowerManager;
import android.view.WindowManager;

public class SlammedNavigatorActivity extends DroidGap {
private PowerManager.WakeLock wLock;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "SN Wake Lock");
    wLock.acquire();

}

public void onDestroy() {
    wLock.release();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:26:36.707

当 .apk 文件未成功安装在设备中时，会出现此类错误。

根据您在某些设备中的说法，您的应用程序运行流畅，在某些设备中它给出了关闭和解析错误，这意味着在某些设备应用程序中安装成功，而在其余设备中安装不完美。

# macos - 在 Mac OS X 上安装 APE 项目

> ID：10459745
> 
> 赞同：-1
> 
> 时间：2012-05-05T07:11:29.470
> 
> 标签：macos, comet, osx-leopard, ape

我想在我的本地服务器上测试 Ajax Push，我找到了 Ape-progect，但我需要帮助来安装和配置它。老实说，我不知道如何开始......

有人可以帮我在 Mac OS（雪豹）上安装和配置 APE 项目吗？

我必须在 Mac OS (10.7) 上安装哪个版本？[http://www.ape-project.org/download/APE_Complete_Package.html](http://www.ape-project.org/download/APE_Complete_Package.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:32:53.847

在开发源中从 github 下载。解压包。打开终端，进入APE目录，输入>> sh build.sh

APE 将安装，然后您可以进入 bin 目录，输入 ./aped 后服务器将启动

# dojo - 无法在 dojo 中将输出打印到控制台

> ID：10459747
> 
> 赞同：0
> 
> 时间：2012-05-05T07:11:31.460
> 
> 标签：dojo

我是 dojo 的初学者，我正在尝试使用 dojo 代码将输出打印到控制台。但我不知道以下代码有什么问题，如何将输出打印到控制台？

```
<html>
<head>
<script type = "text/javascript" src = "dojo/dojo.js" data-dojo-config = "async: true, isDebug : true" >
</script>
</head>
<body>
<h1 id = "greeting">Hello</h1>
<script>
define(["dojo/dom"],function(dom) {
var Twitter = declare(null, {username:"defaultusername",
    say :function(msg)
    {
        console.log("Hello "+msg);
    }
});
var myInstance = new Twitter();
myInstance.say("Dojo");
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:47:24.020

使用`require`代替`define`：

```
<script>
require(["dojo/dom", "dojo/_base/declare"], function(dom, declare) {

    var Twitter = declare(null, {

        username: "defaultusername",

        say :function(msg) {
            console.log("Hello "+msg);
        }
    });

    var myInstance = new Twitter();
    myInstance.say("Dojo");
});
</script> 
```

`Console`有效，但是您在回调函数中的代码在`declare`您执行之前不会被执行`require`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:31:42.963

您不能将`define`内联脚本代码（即类定义）放在类文件的最上面一行，这意味着定义将文件名映射到其函数的返回值。

这意味着，如果您有

```
dojo_toolkit /
  dojo/
  dijit/
  dojox/
  libs/
    myWidgets/
       foo.js 
```

并且 foo.js 读取

```
define(["dijit._Widget"], function(adijit) {
  return declare("libs.myWidgets.foo", [adijit], function() {
    say: function(msg) { console.log(msg); }
  });
}); 
```

然后注册一个新模块，称为`libs`// `myWidgets`。`foo`您应该确保每个定义中返回的声明的声明类与文件层次结构匹配。

话虽这么说，为什么 define 对你不起作用的原因是上面的解释。它是内联的，无需`src`从中猜测声明的类名称。重写你的代码来**定义("aTwitterLogger", ["** :

```
define("aTwitterLogger", ["dojo/_base/declare", "dojo/dom"],function(declare, dom) {
  var Twitter = declare(null, {
      username:"defaultusername",
      say :function(msg)
      {
          console.log("Hello "+msg);
      }
  });
  var myInstance = new Twitter();
  myInstance.say("Dojo");
}); 
```

# ios - UITextView，编辑时滚动？

> ID：10459750
> 
> 赞同：6
> 
> 时间：2012-05-05T07:11:37.033
> 
> 标签：ios, cocoa-touch, keyboard, uitextview

我有一个大的`UITextView`，几乎全屏。如果我点击它，键盘会弹出，我可以编辑文本。然而，我输入的时间越长，文本最终会在键盘后面的视图中运行。我再也看不到我正在输入的内容。

你如何处理这个问题？您是否必须手动跟踪光标位置并滚动视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T07:14:43.093

您需要使用以下代码根据文本范围向下滚动文本视图（或根据打字说）

```
NSRange range = NSMakeRange(textView.text.length - 1, 1);
[textView scrollRangeToVisible:range]; 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T07:33:50.840

我猜你必须将你的 UITextView 调整为键盘显示/隐藏的大小。所以键盘不会超过你的文本视图。这是示例代码。

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillShow:)
                                                 name:UIKeyboardWillShowNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillHide:)
                                                 name:UIKeyboardWillHideNotification
                                               object:nil];
}

- (void)keyboardWillShow:(NSNotification *)notification
{
    [UIView beginAnimations:nil context:nil];
    CGRect endRect = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    CGRect newRect = YOUT_TEXT_VIEW.frame;
    //Down size your text view
    newRect.size.height -= endRect.size.height;
    YOUT_TEXT_VIEW.frame = newRect;
    [UIView commitAnimations];
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    ... // Resize your textview when keyboard is going to hide
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T15:41:03.807

TPKeyboardAvoiding 是一个出色的工具，可以处理所有滚动以避免键盘。/非常/方便，强烈推荐。请参阅：[https ://github.com/michaeltyson/TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)

# html - 页脚向上推以调整内容 div 中的图像大小

> ID：10459752
> 
> 赞同：1
> 
> 时间：2012-05-05T07:12:14.827
> 
> 标签：html, css, resize, liquid

我正在尝试创建一个简单的布局，其中有：

标题

内容（此处为图片）

页脚

我想要实现的是在内容 div 中放置一个图像，该图像将根据查看器的浏览器大小调整大小。

这部分我可以实现，但是我希望页脚始终保留在浏览器的底部，并让内容 div 中的图像调整大小而不会产生溢出。

这是我想要做的一个例子： [http ://www.modernart.net/view.html?id=1,3,9](http://www.modernart.net/view.html?id=1,3,9)

我曾尝试复制此代码，但无法使其正常工作。有没有人可以建议这样做的方法？我会很有帮助，因为到目前为止我还没有成功。

提前致谢， Takashi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:03:42.653

使用带有 css 的百分比可能是一个解决方案：http: [//jsfiddle.net/rgv2e/](http://jsfiddle.net/rgv2e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:44:07.310

您真的应该尝试做事并从错误中学习。尽管如此，这是您所追求的布局：

**请参阅此** [工作小提琴示例！](http://jsfiddle.net/zuul/BH7y2/)

**HTML**

```
<div id="header">My Beautiful website!</div>
<div id="content">
  <a href="#" title="">
    <img src="http://i328.photobucket.com/albums/l330/slowwkidd3923/backflip.jpg" alt="ups...">
  </a>
</div>
<div id="footer">
  This is the footer text!
</div> 
```

**CSS**

```
/* basics */
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

/* header */
#header {
    position: absolute;
    z-index:1;
    top: 10px;
    left: 10px;
}

/* content */
#content {
    position: absolute;
    left: 0;
    right: 0;
    top: 10px;
    bottom: 20px;
    text-align: center;
}
#content img {
    height: 96%;
}

/* footer */
#footer {
    position:absolute;
    bottom: 0;
    left: 10px;
    right: 10px;
    text-align: left;
    height: 20px;
    line-height: 20px;
} 
```

* * *

## 帮助您学习 CSS 的链接：

[层叠样式表](http://www.w3.org/Style/CSS/)

[级联样式表第 2 级修订版 1 (CSS 2.1) 规范](http://www.w3.org/TR/2009/CR-CSS2-20090908/)

[MDN :: CSS - 参考、教程和演示](https://developer.mozilla.org/en/CSS)

# c# - C#局部复制变量值不断变化

> ID：10459754
> 
> 赞同：0
> 
> 时间：2012-05-05T07:13:17.600
> 
> 标签：c#, .net

我正面临着这个奇怪的字符串问题。

我分配了一个这样的字符串：

```
string temp = DateTime.UtcNow.ToString("s");
_snapShotTime = string.Copy(temp);

//here threads started....
//while thread progressing I am passing  _snapShotTime to create a directory.
//same in second threads. 
```

但是局部私有变量的时间`_snapShotTime`是不断变化的。我不知道为什么。我使用了一个局部变量并在其中复制值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:17:15.817

我怀疑您的线程使用*捕获* `_snapShotTime`. 那确实可以改变它。但是，如果没有任何代码，很难确定。

如果这*是*问题所在，则通常是您指的是在循环外声明的捕获变量，但在循环的每次迭代中都会更改。*您可以通过声明一个新变量来解决此问题，该变量在循环内*获取原始变量的副本，并且仅在 lambda 表达式中使用该副本变量。每次迭代都会在循环内获得一个“新”变量，因此不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:17:10.680

你为什么不做

```
_snapShotTime = DateTime.UtcNow.ToString("s"); 
```

此外，在该行上放置一个断点并查看它何时被调用。

当它确实中断时，请查看堆栈，它会澄清事情。

> 我怀疑你的线程改变了 _snapShotTime 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:22:06.273

字符串是不可变的，除非将变量重新分配给新字符串，否则它们不会更改。

我们需要查看更多代码以帮助查明问题。

# objective-c - 如果我在多对多关系中添加相同的 NSManagedObject 会发生什么？

> ID：10459760
> 
> 赞同：1
> 
> 时间：2012-05-05T07:14:17.183
> 
> 标签：objective-c, ios, cocoa, core-data

**我需要在Object A**的一对多关系中插入几个 NSManagedObject 子类实例（**Object B** ） ，但我不知道这些**Objects B**是否已经存在于**Object A**关系中。如果我插入它们会发生什么？它们会被插入两次，还是 Core Data 不会这样做？

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:23:31.153

因为 to-many 关系是作为 a 访问的`NSSet`，所以只会添加唯一的对象（这是 NSSet 的一个特性），所以您不必担心首先检查它是否已经存在。

引用文档`NSSet`：

> NSSet 为不同对象的静态集合声明了编程接口。

并从`NSMutableSet`文档中：

> **添加对象：**
> 
> 如果给定对象还不是成员，则将给定对象添加到集合中。
> 
> ```
> - (void)addObject:(id)object 
> ```
> 
> **参数**
> 
> *目的*
> 
> 要添加到集合中的对象。******

# node.js - Dust.js 从 Node.js 中的文件系统加载模板

> ID：10459770
> 
> 赞同：0
> 
> 时间：2012-05-05T07:16:17.710
> 
> 标签：node.js, dust.js

我正在尝试使用 node.js 从文件系统加载模板，但找不到方法。到目前为止，我有：

```
exports.index = function(req, res){
    var compiled = dust.compile("Hello {name}!", "intro");
    dust.loadSource(compiled);
    dust.render("intro", {name: "Fred"}, function(err, out) {
        res.write(out);
        res.close();
    });
}; 
```

有没有办法替换：“Hello {name}！” 带文件名？它应该是 HTML 还是 JS 文件？另外，如果这不是渲染模板的好方法，请告诉我，我是 Node.js 的新手，正在尝试学习最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:25:20.060

```
fs.readFile(dustFile, function (err, file) {
    var name = fileName.split(".")[0]
    var fn = dust.compileFn(file.toString(), name)
    fn({ name: "fred" }, function (err, out) {
        res.end(out)
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:49:28.730

这应该可以帮助你。尘埃

这是使用 Node.js 使用带有 {dust} 的文件系统中的模板的简化界面。

[https://github.com/jheusala/dustfs](https://github.com/jheusala/dustfs)

# image - 将白色 png 图像更改为特定颜色

> ID：10459773
> 
> 赞同：23
> 
> 时间：2012-05-05T07:16:46.380
> 
> 标签：image, photoshop, hue

我有一个白色的 png 图像，它是图标的一部分。

我想改变它的颜色来获得一个彩色图标。

我知道可以使用色相/饱和度设置，但不知道如何实现特定的颜色输出。

我正在使用 Axialis Icon Workshop（我也有 Photoshop CS5）。着色选项以及色相、饱和度和亮度调整将有助于获得任何颜色输出。但我特别想要颜色`#3366CC`。

有没有办法**将我的白色 png 图像转换为`#3366CC`彩色图像**？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-05T18:40:23.940

如果您转到 Photoshop 中的图层面板并选择您的图标图层，这可以很容易地实现。如果图标具有透明背景，则从图层面板底部选择 fx 按钮并选择颜色叠加或转到 Photoshop 屏幕顶部的菜单并选择图层 > 图层样式 > 颜色叠加。从选项框中选择颜色框并放入 3366cc 而不是您拥有的 ffffff。

这应该会根据需要为您提供彩色图标。如果这不起作用，请告诉我，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T17:45:57.743

您可以转到图层样式并选择颜色叠加，但这不会为您提供您想要的颜色，您可以更进一步并按住控制键并单击要更改颜色的形状或图像，形状将被选中，在要更改颜色的形状或图像上创建一个新图层，然后用您在图层属性中选择的颜色填充颜色并将模式设置为叠加，将不透明度降低到50%。完毕

# objective-c - 适用于 iOS 聊天应用的 XMPP 推送通知

> ID：10459776
> 
> 赞同：2
> 
> 时间：2012-05-05T07:17:14.110
> 
> 标签：objective-c, ios, xmpp, google-talk

我正在为 iOS 创建 Google Talk 客户端。我有**BOSH 服务器**（使用 node-xmpp-bosh）和 iOS 客户端（使用 xmppframework）。iOS 客户端通过此 BOSH 服务器进行连接。

现在，每当有传入的聊天消息或好友请求时，我如何向客户端（可能来自 Bosh 服务器）发送推送通知？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:46:49.370

node-xmpp-bosh 实际上正好提供了这种用例。BOSH 服务器是事件管道的一个实例，可让您通过管道将事件传入/传出 BOSH 服务器到您的自定义模块/插件[。](https://github.com/dhruvbird/eventpipe)您可以在此处编写推送通知服务的逻辑。

在 BOSH 服务器上执行此操作的好处是您可以支持每个 XMPP 服务，而不仅仅是您控制 XMPP 服务器的服务。即您可以为 google talk、facebook、jabber.org 等提供此功能...

披露：我是 node-xmpp-bosh 的作者之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:27:22.540

要支持推送通知，您需要在服务器上进行特殊更改。我们为 ejabberd 开发了该模块（您可以在 TextOne 和 OneTeam 中看到该模块）。自己实施推送通知的详细信息可在以下网址获得：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

# android - 如何对齐按钮的ui？

> ID：10459778
> 
> 赞同：1
> 
> 时间：2012-05-05T07:17:16.397
> 
> 标签：android, imagebutton, android-button

我需要为我发布的按钮对齐 UI。我不确定如何使用`Button`或`ImageButton`。如何对齐按钮中的图像和文本？

![](../Images/cb08861cf7e0adffe8bf4640e0a4cbe6.png)

```
<ImageButton
                    android:id="@+id/btnGroupDelete"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="5dip"
                    android:layout_weight="1"
                    android:background="@drawable/list_buttonselector"
                    android:contentDescription="@string/delete"
                    android:src="@drawable/ox_icn_delete" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:29:11.687

将图像保存在可绘制中，然后在 xml 中使用图像按钮

```
<ImageButton
android:id="@+id/ImageButton01"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/button_image_name" /> 
```

对于按钮的状态更改（按下、聚焦、默认），请查看

[http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:32:32.793

```
 <Button
        android:id="@+id/button1"
        android:gravity="right"  <----------
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:09:39.023

```
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:drawableLeft="@drawable/image"
android:layout_gravity="center_horizontal"
android:paddingLeft="10dip"
android:text="@string/btntext" /> 
```

# android - Button 上的动画不能只运行一次

> ID：10459783
> 
> 赞同：0
> 
> 时间：2012-05-05T07:17:54.443
> 
> 标签：android, animation, android-button

我对android中的动画按钮有一些问题。这是我的代码：

```
 private void RunAnimations() {
            Animation a = AnimationUtils.loadAnimation(this, R.anim.alpha);
            a.reset();
            Button tv = (Button) findViewById(R.id.button1);
            tv.clearAnimation();
            tv.startAnimation(a);}

            @Override
        public boolean onTouchEvent(MotionEvent event){
            if(event.getAction()== MotionEvent.ACTION_DOWN){
                RunAnimations();
            }
            return false;
            } 
```

问题是如果屏幕 OnTouch 动画将运行。我希望动画只运行一次。我应该添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:30:36.607

你可以添加一个`boolean`到你的班级`animationRun = false`，然后

```
 public boolean onTouchEvent(MotionEvent event){
        if(!animationRun && event.getAction()== MotionEvent.ACTION_DOWN){
            RunAnimations();
            animationRun = true;
        }
        return false;
        } 
```

我宁愿在播放动画后删除事件处理程序，但我并不真正了解 Android API，因此无法帮助您。

# jquery - 我的发帖请求有什么问题？

> ID：10459790
> 
> 赞同：0
> 
> 时间：2012-05-05T07:20:15.280
> 
> 标签：jquery, ajax

我在 jquery 中有这个发布请求代码，它似乎发送请求并返回结果（我可以在 fiddler 中看到它）但不知何故在 webapp 中它会出错并给出一个空警报。怎么了？

```
var jqxhr =$.post("http://abhishek:9090/abc/login.action",
    { emailaddress:     e_add,
      projectid:    p_id },
      function(xml)
      {     
      /*not coming here, goes to error*/

          if($(xml).find('isSuccess').text()=="true")
          {
            sessiontoken=$(xml).find('sessiontoken').text();

            var formMainRef=document.createElement("form");
            formMainRef.action="http://abhishek:9090/abc/home.action";
            formMainRef.method="post";
            formMainRef.target="_self";
            formMainRef.id="launch";
            document.body.appendChild(formMainRef);

            var cfgemailField = document.createElement("input");
            cfgemailField.name="emailaddress";
            cfgemailField.type="hidden";
            cfgemailField.value=e_add;
            formMainRef.appendChild(cfgemailField);

            var cfgpidField = document.createElement("input");
            cfgpidField.name="projectid";
            cfgpidField.type="hidden";
            cfgpidField.value=p_id;
            formMainRef.appendChild(cfgpidField);

            var cfgstField = document.createElement("input");
            cfgstField.name="sessiontoken";
            cfgstField.type="hidden";
            cfgstField.value=sessiontoken;
            formMainRef.appendChild(cfgstField);                                

            setCookie("abcsessionid", sessiontoken , 1);
            setCookie("abcusername",e_add,1);

            formMainRef.submit();
          }
      }
)
.error(function() {
  if(jqxhr.responseText == 'INVALID_SESSION') {
    alert("Your Session has been timed out");
    window.location.replace("/abc/view/index.html"); 
  }else  {
    /*comes here, after sending request*/
    alert( jqxhr.responseText);
  }
}); 
```

login.action 返回一个小 xml

```
<Response>
  <sessiontoken>4611686352224309486</sessiontoken>
  <isSuccess>true</isSuccess>
</Response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:24:44.450

由于浏览器可能会阻止跨域请求，因此包含域是一个问题。通过使用相对路径，您可以双重确认您发布到的脚本位于您的本地服务器上，从而绕过任何潜在的安全限制

# vb.net - showdialog.dispose 焦点到另一个打开的应用程序

> ID：10459791
> 
> 赞同：0
> 
> 时间：2012-05-05T07:20:34.263
> 
> 标签：vb.net

在处理 showdialog 表单时，我遇到了 showdialog 问题。应用程序焦点转移到任务栏中打开的另一个程序。如果什么都没有打开，那么它会集中在桌面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:00:49.593

当对话框过早处理时，就会发生这种情况。所有窗口都被对话框禁用，因此 Windows 无法将焦点集中在其中任何一个上，而必须选择另一个应用程序的窗口。确保将标准模式与 Using 关键字一起使用，以便对话框对象在关闭*后被释放：*

```
 Using dlg As New FooDialog
        If dlg.ShowDialog(Me) = DialogResult.OK Then
            '' Use dlg properties
            ''
        End If
    End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:56:08.437

就这么简单：

```
form2.showdialog()
me.bringtofront() 
```

# jquery - 一个 jQuery 类悖论

> ID：10459794
> 
> 赞同：1
> 
> 时间：2012-05-05T07:21:28.250
> 
> 标签：jquery, class, function

我无法理解这一点。

当我想从 a中**删除**类并将类**添加**到其中时，`B``div`**`D`**

 **有用。

`D`但是无法触发class的功能。

```
$('.B').click(function() { 
        $('.A').animate({
           "left": "+=10%"
        },{
           duration:1000,
           complete: function(){
              $("#C").addClass("D").removeClass("B");
              } 
           }); 
});  

 $(".D").click(function() { 
        $(".A").animate({
            "top":"+=40%"
        },{
            duration:2000,
            complete:function(){
                 $("#C").addClass("B").removeClass("D");
             }
          });
}); ​ 
```

* * *

我尝试将 class`D`的函数放入 class`B`的函数中，如下所示：

```
$('.B').click(function() { 
        $('.A').animate({
           "left": "+=10%"
        },{
           duration:1000,
           complete: function(){
              $("#C").addClass("D").removeClass("B");
              $(".D").click(function() { 
                   $(".A").animate({
                       "top":"+=40%"
                   },{
                       duration:2000,
                       complete:function(){
                           $("#C").addClass("B").removeClass("D");
                       }
                   });
               }); ​
              } 
           }); 
}); 
```

并且这两个功能都是**第一次**工作，然后它们以一种奇怪的方式工作。

如果有人可以向我解释原因并为我提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:23:25.603

使用时，您只绑定到与*当时*`$.click`选择匹配的元素。如果您还想匹配所有未来的元素，请改用：*`$.on`*

 *```
$("body").on("click", ".D", function(){
  /* Class D Stuff */
}); 
```

这将对单击的元素是否必须`class="D"`以开头或稍后通过类似`$(this).addClass("D")`.

理想情况下，该`"body"`部分应该是一个更接近您单击的元素的容器。例如，如果您有以下情况：

```
<body>
  <div id="container">
    <a href="#" class="B">Foo</a>
    <a href="#" class="D">Bar</a>
  </div>
</body> 
```

您应该在 jQuery 函数中使用`#container`而不是。`body`***

# php - Codeignieter 数据未在索引函数中初始化

> ID：10459804
> 
> 赞同：0
> 
> 时间：2012-05-05T07:24:25.237
> 
> 标签：php, oop, codeigniter

我正在尝试在控制器的索引函数中初始化数据，以便初始化的数据可以在控制器的后续功能中使用。但问题是当我尝试从其他功能访问数据时没有显示数据。所有这些只是为了遵循一种面向对象的模式。

这是我的代码。

```
class Dashboard extends CI_Controller
{
    private  $account_data;  /*Declaration*/
    private  $profile_data;

    function __construct() {
       // code...
    }

    function index()   /*Here I am initializing data*/
    {
        $this->load->model('db_model');
        $this->account_data = $this->db_model->get_row();
        $this->profile_data = $this->db_model->get_row();
        $this->load->view('user/dashboard');
    }

    function function account_details()
    {
        print_r($this->account_data);  // This displays nothing
    }

    /*other function...*/

} 
```

想法是获取一次数据并将其用于其他功能，如果再次更新数据，则调用一个函数来初始化它。

但这行不通。请帮我。还建议我是否遵循正确的方法。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T07:29:25.410

index 方法不是初始化程序，它的默认页面/sub_method，如果您在 url 中调用“*account_details*”，因为`index.php/dashboard/account_details`不会调用索引。

尝试将代码放在构造函数上，

```
class Dashboard extends CI_Controller
{
    private  $account_data;  /*Declaration*/
    private  $profile_data;

    function __construct() { /*Here I am initializing data*/
      parent::CI_Controller(); // Thank you Sven
        $this->load->model('db_model');
        $this->account_data = $this->db_model->get_row();
        $this->profile_data = $this->db_model->get_row();
    }

    function index()   
    {

        $this->load->view('user/dashboard');
    }

    function function account_details()
    {
        print_r($this->account_data);  // This displays nothing
    }

    /*other function...*/

} 
```

**注意**：如果您不需要此控制器的所有方法，请不要在 __construct() 上进行模型或其他计算。

创建一个像“ `model_initializer()`”这样的私有方法，将此代码放在此范围内，并根据需要在其他方法中调用它`$this->model_initialize();`。

谢谢你芝麻芝麻的注意，

# sql-server - 如何在左连接中进行 GROUP BY

> ID：10459805
> 
> 赞同：-3
> 
> 时间：2012-05-05T07:24:32.230
> 
> 标签：sql-server, database

*

我得到如下结果

`PID`在这里重复，2 行显示 1 个患者 (john)

我只需要为患者姓名（约翰）显示 1 行，如果他在同一日期或任何其他日期多次访问，我必须为患者约翰显示一行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T08:49:53.253

显示每位患者一行 - 以及他/她的最后一次就诊日期：

```
SELECT 
    Patient_Master.PID, 
    Patient_Master.Patient_ID,
    Patient_Master.Patient_Name,
    Patient_Master.Sex,
    Patient_Master.Patients_Birth_Date,
    Patient_Last_Visit.Visit_Date 
FROM 
    Patient_Master 
  LEFT JOIN
    ( SELECT 
          PID,
          MAX(Visit_Date) AS Visit_Date
      FROM
          Patient_Visit
      GROUP BY
          PID 
    ) AS Patient_Last_Visit
        ON Patient_Master.PID = Patient_Last_Visit.PID 
ORDER BY 
    Patient_Master.Patient_Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:38:30.660

@nikhil 你能更具体一点吗？

如果您只想为患者留一排，为什么要加入表格？

我认为你应该对 Patient_Master 的列进行分组，并对 Patient_Visit 进行一些聚合

编辑：这应该工作

```
 SELECT 
        Patient_Master.PID, 
        Patient_Master.Patient_ID,
        Patient_Master.Patient_Name,
        Patient_Master.Sex,
        Patient_Master.Patients_Birth_Date
    FROM 
        Patient_Master 
    INNER JOIN
        Patient_Visit ON Patient_Master.PID = Patient_Visit.PID 
    GROUP BY
        Patient_Master.PID, 
        Patient_Master.Patient_ID,
        Patient_Master.Patient_Name,
        Patient_Master.Sex,
        Patient_Master.Patients_Birth_Date
    ORDER BY 
        Patient_Master.Patient_Name 
```

此查询选择有关至少有一次就诊的患者的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T07:39:08.897

使用下面将返回单行的查询..如果行的所有值都相同

```
SELECT 
    Patient_Master.PID, 
    Patient_Master.Patient_ID,
    Patient_Master.Patient_Name,
    Patient_Master.Sex,
    Patient_Master.Patients_Birth_Date,
    Patient_Visit.Visit_Date 
FROM 
    Patient_Master 
LEFT JOIN
    Patient_Visit ON Patient_Master.PID = Patient_Visit.PID    
Group by 
    Patient_Master.PID, 
    Patient_Master.Patient_ID,
    Patient_Master.Patient_Name,
    Patient_Master.Sex,
    Patient_Master.Patients_Birth_Date,
    Patient_Visit.Visit_Date   
ORDER BY 
    Patient_Master.Patient_Name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T08:17:45.403

我认为这会给你单行，试试这个

```
SELECT 
        Patient_Master.PID, 
        Patient_Master.Patient_ID,
        Patient_Master.Patient_Name,
        Patient_Master.Sex,
        Patient_Master.Patients_Birth_Date,
        Patient_Visit.Visit_Date 
    FROM 
        Patient_Master 
    INNER JOIN
        Patient_Visit ON Patient_Master.PID = Patient_Visit.PID 
    GROUP BY Patient_Master.PID
    ORDER BY 
        Patient_Master.Patient_Name 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T09:57:20.350

每个不同日期显示一名患者：

```
SELECT  M.PID, 
        M.Patient_ID,
        M.Patient_Name,
        M.Sex,
        M.Patients_Birth_Date,
        A.Visit_Date 
FROM    Patient_Master AS M 
        OUTER APPLY
        (
                SELECT  DISTINCT V.Visit_Date
                FROM    Patient_Visit AS V
                WHERE   V.PID = M.Pid
        ) AS A; 
```

显示一名患者和最近的日期：

```
SELECT  M.PID, 
        M.Patient_ID,
        M.Patient_Name,
        M.Sex,
        M.Patients_Birth_Date,
        A.Visit_Date 
FROM    Patient_Master AS M 
        OUTER APPLY
        (
            SELECT  MAX(V.Visit_Date) AS Visit_Date
            FROM    Patient_Visit AS V
            WHERE   V.PID = M.Pid
        ) AS A; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T07:30:37.347

我不明白你需要什么。也许

```
GROUP BY PID, Patient_ID, Patient_Name, Sex,
         Patients_Birth_Date,MAX(Visit_Trans_ID),MAX(Visit_Date) 
```

# jquery - 修复 Twitter Bootstrap 中的按钮大小

> ID：10459808
> 
> 赞同：4
> 
> 时间：2012-05-05T07:25:59.407
> 
> 标签：jquery, html, twitter-bootstrap

我在我的网络应用程序中使用[Twitter Bootstrap 。](https://getbootstrap.com/2.3.2/)我有一张有很多按钮的桌子。按钮的文本会随着表格行的当前状态而变化。在 Ajax 请求响应之后，我用 Jquery 更改按钮文本。

我的问题是，这些按钮文本的长度不固定。有的长有的短。

因此，当一行有长文本而另一行有短文本时，用户的眼睛看起来很糟糕。

我可以固定按钮大小吗？那么它们都具有相同的大小吗？

[![](../Images/7c8fa27aacc2c34572b77bbdd27ffe69.png)](https://i.stack.imgur.com/KYPnF.jpg)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T08:35:47.050

给所有你想要大小相同的按钮一个类，例如`class="myButton"`

然后在模板的自定义 CSS 区域中，您可以为该类指定宽度：

```
.myButton {
    width: 150px;
} 
```

**或者**，如果您希望它们都具有可以使用 jQuery 的最长按钮的宽度，只需在`.myButton`按钮的值发生变化时调用此代码。此代码在这里解释：[https ://stackoverflow.com/a/5784399/1130734](https://stackoverflow.com/a/5784399/1130734)

```
$('.myButton').width(
    Math.max.apply(
        Math,
        $('.myButton').map(function(){
            return $(this).outerWidth();
        }).get()
    )
); 
```

这是一个 jsfiddle 示例[http://jsfiddle.net/hQCf9/](http://jsfiddle.net/hQCf9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:56:19.407

更简单的是，使用 span* 类（span、span2 等）。这将使按钮与网格保持同步。

请注意，某些元素（如段落）的空白与实际按钮上的空白不同，因此如果您在表格中混合元素（就像我在下面的示例中故意做的那样），这可能会弄乱按钮的大小。所以最好只坚持一种元素。

就个人而言，我更喜欢避免使用桌子，但你说你会使用桌子，所以我也这样做了。您是否可以仅使用网格/脚手架来解决此问题，这可能会更漂亮，更灵活且响应更快。你的来电。

还请记住，您几乎可以将任何元素设置为看起来像按钮。如果您的按钮只包含一个链接，那么 A 标签可能会更好；它的外观和功能仍然像一个按钮。

这是一张丑陋的旧桌子，上面有很多可点击的东西，我希望它可以解释这一点：

```
<table class="span8">
    <tr>
        <td>
        You could do buttons
        </td>

        <td>
        <button class="span3 btn btn-info">Like this button</button>
        </td>

        <td>
        <button class="span3 btn btn-info">and this</button>
        </td>
    </tr>

    <tr>        
        <td>
        Or a paragraph
        </td>

            <td>
        <p class="span3 btn btn-info">Like this paragraph</p>
        </td>

        <td>
        <a href="http://www.example.com" class="span3 btn btn-info">Or an anchor</a>
        </td>

    </tr>

        <tr>        
        <td>
        Note the difference in whitespace on Block elements (like Paragraphs and Anchors) and inline elements (like buttons).
        </td>

            <td>
        <p class="span3 btn btn-info">Like this paragraph</p>
        </td>

        <td>
        <a href="http://stackoverflow.com/" class="span3 btn btn-info">Or an anchor with an ridicilous amont of text on it, but this things do happen so plan ahead.</a>
        </td>

    </tr>

    <tr>        
        <td>
        Or a paragraph with a link
        </td>

            <td>
        <a href="http://stackoverflow.com/"><p class="span3 btn btn-info">Paragraph w/link</p></a>
        </td>

        <td>
        <button class="span3 btn btn-info">This a button with fairly long text. Beware of whitespace</button>
        </td>

    </tr>

    <tr>        
        <td>
        Or a paragraph with a link
        </td>
<td>
        <button class="span3 btn btn-info">Another button</button>
        </td>

        <td>
        <a href="http://stackoverflow.com/"><p class="span3 btn btn-info">Another linked paragraph</p></a>
        </td>

    </tr>

</table> 
```

请注意，每个可点击对象都调用了完全相同的类。我希望这回答了你的问题。

# ember.js - Ember 状态管理器、控制器、视图、模型：如何将它们链接在一起？

> ID：10459812
> 
> 赞同：10
> 
> 时间：2012-05-05T07:26:22.433
> 
> 标签：ember.js

我面临一个问题，我需要将状态管理器、控制器和视图链接在一起，同时避免获得丑陋的意大利面条代码。问题是：应该首先创建这些对象中的哪一个并负责创建其他对象？

具体来说，这是我的例子。首先，视图是一个容器视图的子类，它有一个集合视图作为子视图：

```
App.MyView = Ember.ContainerView.extend {

     childViews: ['streamView']

     streamView: Ember.CollectionView.extend {
     }

} 
```

控制器就像 Ember.ArrayController 的子类一样具有加载方法：

```
App.MyController = Ember.ArrayController.extend {
     load: ->
        console.log "loading data"
} 
```

状态管理器有一个视图状态，它将实例化 App.MyView ：

```
App.MyStateManager = Ember.StateManager.extend {

   initialeState: 'ready'

   ready: Ember.ViewState.extend {

        view: App.MyView    

   }
} 
```

现在我需要运行以下测试：

```
 controller = App.MyController.create {}
 manager = App.MyStateManager.create {}

 expect(manager.getPath('currentState.name').toEqual('ready')
 expect(controller.load).toHaveBeenCalled()
 streamView = manager.getPath('currentState.view.streamView.content')
 expect(streamView.content).toEqual(controller.content) 
```

为了使最后的期望起作用，我需要将作为 App.MyView 子级的 streamView 的内容与控制器内容绑定。我怎样才能干净地做到这一点？

此外，如何将状态管理器的引用传递给视图和控制器，以便在发生某些事件时通知管理器，以便它需要转换到另一个状态。例如，单击项目或控制器确实完成了一项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:21:48.357

Take a look at this gist by Yehuda Katz discussing the new router implementation. [https://gist.github.com/2728699](https://gist.github.com/2728699)

The suggestion seems to be to make the router and by extension the state manager the point at which the 3 layers are tied together.

# facebook - 如何定义将在共享消息中插入的内容？

> ID：10459817
> 
> 赞同：0
> 
> 时间：2012-05-05T07:26:53.433
> 
> 标签：facebook, share

我有一个应用程序，每个用户都有博客记录。我在我的应用程序中添加了分享按钮，以便能够将有趣的博客记录发布到用户时间线或发送给其他用户。但在默认情况下，它会根据需要共享图像和文本，但并不总是正确的。所以我发现它可以由元标记驱动（例如使用“图像”属性来设置共享对话框的图像）。这在主页上可以正常工作（我想与整个应用程序共享能力），但在博客记录页面上我无法自定义它。元标记应该在 中，但是我稍后会在正文中获得所有信息（博客文章的短文本和图像），所以我可以插入它。我该如何处理？或者可能有另一种分享内容的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:38:17.967

你用的是什么博客引擎？如果它是 wordpress - 试试这个插件[http://wordpress.org/extend/plugins/facebook-share-new/](http://wordpress.org/extend/plugins/facebook-share-new/)来自官方 facebook 文档[http://developers.facebook.com/docs/](http://developers.facebook.com/docs/)。否则，我建议使用 google 为您的博客引擎找到一个 facebook 插件并安装它。

# asp.net-mvc-3 - 无法将“SubCatNews”上的“SubCatNewsID”属性设置为“布尔”值。您必须将此属性设置为“Int32”类型的非空值

> ID：10459819
> 
> 赞同：0
> 
> 时间：2012-05-05T07:27:31.780
> 
> 标签：asp.net-mvc-3, entity-framework, model

我有时会收到此错误，但我没有采取任何行动

这个随机出现

我使用这个框架：CodeFirst 类型中的实体，Mvc3

有时我会在不同的数据类型或其他模型中遇到此错误：

> **“ Cat** ”上的“ **CatID** ”属性无法设置为“布尔”值。您必须将此属性设置为“Int32”类型的非空值

 **或者

> 无法将“Cat”上的“CatID”属性设置为“ **String** ”值。您必须将此属性设置为“Int32”类型的非空值

我的网站主题是新闻发布，我的客户操作员在整个休息日使用网站并插入/编辑数据

编辑：我看到这个错误不是一个页面，当我有这个错误时，我的网站中没有页面没有加载并且所有页面都有这个消息

我的模型：

```
public class SubCatNews
{
    [Key]
    public int SubCatNewsID { get; set; }
   // [EdmScalarPropertyAttribute(IsNullable = true)]
   // public int? SubCatID { get; set; }
    [Required(ErrorMessage = "some error")]
    public string Title { get; set; }
    [Required(ErrorMessage = "some error")]
    [AllowHtml]
    [DataType(DataType.Html)]
    public string Summary { get; set; }
    [Required(ErrorMessage = "some error")]
    [AllowHtml]
    [DataType(DataType.Html)]
    public string Details { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public bool? ImpStatus { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime? Created { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public bool? Visible { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public string pic { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public int? UsersID { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public int? StatusID { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public int? NewsTypeID { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public int? ZonesID { get; set; }
    [EdmScalarPropertyAttribute(IsNullable = true)]
    public int? lanID { get; set; }
    //public int RatingSubCatNewsID { get; set; }

    public virtual Users Users { get; set; }
   // public virtual SubCat SubCat { get; set; }
    public virtual NewsStatus Status { get; set; }
    public virtual NewsType NewsType { get; set; }
    public virtual ICollection<SubCatNewsComment> SubCatNewsComments { get; set; }
    public virtual ICollection<NewsInSubCat> NewsInSubCatss { get; set; }
    public virtual ICollection<SubNewsInTag> SubNewsInTags { get; set; }
    //public virtual RatingSubCatNews RatingSubCatNews { get; set; }
} 
```

但我想知道，当我在 web.config 中进行任何更改时，网站就启动了！

我的事情是为了在实体中缓存​​数据和值

我的上下文创建者：

```
public abstract class BaseController<TEntityType, TIdType> : ContextGridController<HNewsPortalContext, TEntityType, TIdType>
    where TEntityType : class
{
    protected override HNewsPortalContext CreateContext()
    {
        return new HNewsPortalContext(); 
    }
} 
```

在此之前，我的 Context Creator，像这样返回 Context：

```
HNewsPortalContext.Singleton; 
```

我猜这是针对静态上下文和实体缓存产生此错误，但新上下文，不要修复我的错误

现在，当我的站点出现此错误时，我在 web.config 中进行了一些更改（在关闭或 RemoteOnly 之间切换自定义错误模式值）并保存它，然后站点启动

请帮帮我

我的完整错误消息： [完整消息图像](http://i.imgur.com/fXTjQ.jpg) [完整消息图像](http://i.imgur.com/SsqBs.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:31:48.233

附加调试器，中断异常并检查堆栈跟踪以查看哪些代码正在设置您的属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T07:01:48.987

我检查并看到这是因为我的应用程序池溢出我的站点位于共享服务器上并且会话过期时间很长

结束**

# calendar - 是否可以在 Ext.Net 中将 Maxdate 设置为 Calendar 控件？

> ID：10459820
> 
> 赞同：1
> 
> 时间：2012-05-05T07:27:34.310
> 
> 标签：calendar, ext.net

我正在使用 Ext.Net 1.2

**我正在使用日历控件。**我想禁用所有以前的日期，只有日历可以从今天的日期启用。

像 Date Picker 这样的功能有**MaxDate="<%# DateTime.Now %>"**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:48:55.497

也许您只需要调用`.DataBind()`控件，或者只需设置`AutoDataBind="true"`.

**例子**

```
<ext:DatePicker runat="server" MaxDate="<%# DateTime.Now %>" AutoDataBind="true" /> 
```

希望这可以帮助。

# html - 在查询字符串中传递样式参数

> ID：10459821
> 
> 赞同：-1
> 
> 时间：2012-05-05T07:27:43.060
> 
> 标签：html

我有一个简单的 html 页面，其中包含一个 div 元素。div 的 innerHTML 属性是通过查询字符串设置的。在查询字符串中，我传递 html 字符串，即

```
<p style='font-size:20px;color:green;'> Sun rises in the east </p> etc... 
```

我得到了适当的输出。

但是，如果我在样式属性中传递颜色代码，例如 #00990a，则不会显示任何内容。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:29:44.930

既然你没有给我们看任何代码，我猜……</p>

在 URI 中，`#`指示片段标识符的开始（如`?`指示查询字符串的开始）。您的颜色终止了查询字符串并启动了片段标识符。您需要对 URL 中具有特殊含义的任何字符进行 URL 编码。（`#`是`%23`）。

* * *

请确保在服务器上清理传递的 HTML 和 CSS。否则很容易让自己暴露于 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:33:37.417

如果有一个包含 a 的颜色代码，那么`#`之后的所有内容都将被视为片段标识符。为避免这种情况，您必须对您的参数值进行 url 编码（替换`#`为`%23`d 对具有特殊含义的其他字符 ( `@&%=?#...`) 执行相同操作）。

最后你的网址应该是这样的：

```
PageUrl?Content=%3Cp+style%3D%27color%3A%23009900%27%3EContent%3C%2Fp%3E 
```

# c++ - 包含 .h 文件时的链接器错误，但在包含对应的 .cpp 文件时消失

> ID：10459824
> 
> 赞同：0
> 
> 时间：2012-05-05T07:28:31.407
> 
> 标签：c++, header, linker

这很奇怪。当我包含一个 .h 文件 (GeneralSearch.h) 时，怎么可能会出错，但是当我包含 .cpp 文件 (GeneralSearch.cpp) 时，一切似乎都正常工作？

**.h 文件**

```
#ifndef GENERALSEARCH_H_
#define GENERALSEARCH_H_

#include "Problem.h"
#include "Node.h"

template <class T>
class GeneralSearch
{
public:

    const Node* treeSearch(const Problem &problem) const;
    const Node* graphSearch(const Problem &problem, T &fringe = T()) const;

private:
    void expand(const Node &node, const Problem &problem, list<const Node*> &out) const;
};

#endif 
```

**.cpp 文件**

```
#include "GeneralSearch.h"
template <class T>
void GeneralSearch<T>::expand(const Node &node, const Problem &problem, list<const Node*> &out) const
{
...
}

template <typename T>
const Node* GeneralSearch<T>::treeSearch(const Problem &problem) const
{
...
}

template <typename T>
const Node* GeneralSearch<T>::graphSearch(const Problem &problem, T &fringe = T()) const
{
...
} 
```

**程序文件 - 工作**

```
#include "GeneralSearch.cpp"
#include "DummyProblem.h"
#include "DepthFirstSearch.h"
#include <queue>

int main (int argc, char* argv[]){} 
```

**程序文件 - 不工作**

```
#include "GeneralSearch.h"
#include "DummyProblem.h"
#include "DepthFirstSearch.h"
#include <queue>

int main (int argc, char* argv[]){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:34:14.333

链接器尝试在链接时查找未解析名称的定义。在第二种情况下，链接器无法找到 GeneralSearch 类的成员函数的定义，因此您会收到错误消息。

# php - 用对象初始化类字段

> ID：10459825
> 
> 赞同：0
> 
> 时间：2012-05-05T07:28:34.740
> 
> 标签：php

我是 php 新手，所以问题是转储。看看下面的代码

```
class A {
    private $obj;

    public function A() {
        $this->obj = new Obj();
        //$this->obj->fff() works here;
        //still var_dump($this->obj) prints NULL here
    }

    public f() {
        //$this->obj is NULL here!!!
        //$this->obj->ff() throws an error
    }
} 
```

**UPD**在`f()`我得到`Fatal error: Call to a member function ff() on a non-object in ...`

我应该如何初始化`$obj`才能看到它`f()`？

先感谢您！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:30:41.603

尝试以下操作：

```
public function __construct() {
     $this->obj = new Obj();
} 
```

我认为问题是你错过了`function`。我不是一个真正的`PHP`人，但我认为`public function A()`也可以，但这`__construct`是首选。

编辑：现在您添加了`function`. 我不确定我的回答是否会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:35:54.827

您的函数名称有一个错误，`A()`它类似于类名称。当您调用时，`$a = new A;`实际上调用`A()`了`A`类的方法。改为使用`__construct()`。

在我的服务器上，这工作正常：

```
<?php 

class A {

    private $obj;

    public function A() {

        $this->obj = new stdClass();

    }

    public function f() {

        var_dump($this->obj);

    }

}

$aa = new A;

$aa->f(); // Prints `object(stdClass)#2 (0) { }`

?> 
```

看来你的`Obj`课有问题。你为什么不在你`function`的`public f() {`类定义中加入呢？

# wpf - ListBox 项模板取决于项值

> ID：10459827
> 
> 赞同：1
> 
> 时间：2012-05-05T07:28:47.080
> 
> 标签：wpf, xaml, listbox

在 WPF、MVVC 应用程序中，我有很正常的列表框：

```
<ListBox ItemsSource="{Binding Friends}">
</ListBox> 
```

然后列表的每个项目使用以下数据模板：

```
<DataTemplate DataType="{x:Type model:Friend}">
    <Border BorderThickness="1" BorderBrush="Gray" Padding="3" Name="border" Margin="3">
        <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal">
            <TextBlock Name="DescriptionDTDataType" Text="{Binding Path=ConnectedUserID}" />
            <TextBlock Name="StatusTitle" Margin="8,0,4,0">Status:</TextBlock>
            <TextBlock Name="Status" Text="{Binding Path=Approved}" />
            <Button Content="Approve" Command="{x:Static inf:Commands.ApproveUserConnection}" CommandParameter="{Binding}"></Button>
            <Button Content="Disapprove" Command="{x:Static inf:Commands.DisapproveUserConnection}" CommandParameter="{Binding}"></Button>
        </StackPanel>
    </Border>
</DataTemplate> 
```

问题是......我想隐藏 Friend.Approved 属性的基本按钮之一。例如，如果 Friend.Approved 的值为“approved”，我想隐藏按钮 Approved 并仅显示按钮 Dissaprove。另一方面，如果 Friend.Approved 具有“不赞成”的价值，那么我想要相反。如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:42:28.183

除了创建[IValueConverter之外，还有一个使用](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)[DataTriggers](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)的纯 XAML 解决方案

只需将其添加到您的 DataTemplate：

```
<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding Approved}" Value="approved" >
        <Setter TargetName="Approve" Property="Visibility" Value="Collapsed"/>
    </DataTrigger>
    <DataTrigger Binding="{Binding Approved}" Value="disapproved" >
        <Setter TargetName="Disapprove" Property="Visibility" Value="Collapsed"/>
    </DataTrigger>
</DataTemplate.Triggers> 
```

并命名您的按钮：

```
<Button Name="Approve" Content="Approve" ...></Button>
<Button Name="Disapprove" Content="Disapprove" ...></Button> 
```

但是，如果您想在多个 DataTemplate 的多个位置重用此隐藏逻辑，最好将 Approved 文本写入可见性转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:35:04.303

将 Buttons Visibility 属性绑定到`Approved`并使用值转换器转换`Approved`为 Visibility 值。

# java - 每次输入/输出后是否需要重新创建 DataInputStream 或 DataOutputStream

> ID：10459832
> 
> 赞同：0
> 
> 时间：2012-05-05T07:29:53.680
> 
> 标签：java, sockets, multiplayer

你好，所以我只是想知道。我正在为我的游戏创建多人游戏，如果我想发送一些东西，我应该使用：

```
dos = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
dos.writeUTF(username);

dos = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
dos.writeUTF("test");

dis = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
String loginResponse = dis.readUTF(); 
```

或者我应该使用：

```
dos = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
dos.writeUTF(username);
dos.writeUTF("test");

dis = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
String loginResponse = dis.readUTF(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:33:52.867

您应该创建一个 IOStream 并用它做您需要做的事情，而不是每次都创建一个新的。

如果你每次都创建一个新的，理论上你只是在不必要地填充内存。

# blackberry - 跨域的Phonegap Blackberry构建错误

> ID：10459833
> 
> 赞同：3
> 
> 时间：2012-05-05T07:30:03.833
> 
> 标签：blackberry, cordova

当我从 phonegap 构建我的应用程序时。它适用于 iPhone、iPad、Android，但不适用于黑莓。

我正在调用跨域 API WSDL。

在黑莓中它给出了错误

```
 URL (exmple :- http://google.com)- could not be retrieved because it was not found in config.xml.

 Please verify the <access> elements in the WebWorks config. Contact your service provider if the problem persists. 
```

我必须使用`config.xml`

```
<access subdomains="true" uri="*" /> OR <access origin="*" /> 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:37:24.910

上次我遇到这个问题时，似乎所有的 URL 都必须是明确的 BB。如果您的 URL 在运行时未知（例如，用户输入了 URL），那么唯一的解决方法是

```
<feature id="blackberry.app" >
    <param name="websecurity" value="disable" /> 
```

# ios - iOS - indexPathForRowAtPoint 不返回具有不同单元格高度的正确 indexPath

> ID：10459837
> 
> 赞同：2
> 
> 时间：2012-05-05T07:30:29.997
> 
> 标签：ios, uitableview

我有包含许多单元格的 UITableView。用户可以通过按此单元格中的展开按钮来展开单元格以查看此单元格中的更多内容（一次只能展开 1 个单元格）：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(selectedRowIndex == indexPath.row) return 205;
    else return 60;
} 
```

在情节提要中，我将UILongPressGesture拖入单元格按钮并命名为longPress（单元格是自定义的，里面有2个按钮，1个需要识别LongPressGesture，另一个扩展单元格高度）：

```
@property (retain, nonatomic) IBOutlet UILongPressGestureRecognizer *longPress; 
```

在 viewDidLoad 中：

```
- (void)viewDidLoad
{      
    [longPress addTarget:self action:@selector(handleLongPress:)];
} 
```

它工作得很好，但是当我使用下面的代码来识别单元格 indexPath 时，当一个单元格展开时是错误的：

```
- (void)handleLongPress:(UILongPressGestureRecognizer*)sender {         
    // Get index path
    slidePickerPoint = [sender locationInView:self.tableView];
    NSIndexPath *indexPath= [self.tableView indexPathForRowAtPoint:slidePickerPoint]; 
    // It's wrong when 1 cell is expand and the cell's button I hold is below the expand button
} 
```

当单元格高度不同时，谁能告诉我如何获得正确的 indexPath ？
预先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T07:41:17.693

这样做的一种方法是向每个UigitiveViewCell添加UiLongressurEreceregognizer（所有使用相同的选择器），然后调用选择器时可以通过sender.view获取单元格。也许不是最有效的内存，但如果单个手势识别器在某些情况下不会返回正确的行，那么这种方式应该可以工作。

像这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    ...

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] 
  initWithTarget:self action:@selector(handleLongPress:)];
    [longPress setMinimumPressDuration:2.0];
    [cell addGestureRecognizer:longPress];
    [longPress release];

    return cell;
} 
```

然后

```
- (void)handleLongPress:(UILongPressGestureRecognizer*)sender {  
    UITableViewCell *selectedCell = sender.view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:40:45.393

首先将长按手势识别器添加到表格视图中：

```
UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc] 
  initWithTarget:self action:@selector(handleLongPress:)];
lpgr.minimumPressDuration = 2.0; //seconds
lpgr.delegate = self;
[self.myTableView addGestureRecognizer:lpgr];
[lpgr release]; 
```

然后在手势处理程序中：

```
-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer
{
  if (gestureRecognizer.state == UIGestureRecognizerStateBegan)
  { 
    CGPoint p = [gestureRecognizer locationInView:self.myTableView];

    NSIndexPath *indexPath = [self.myTableView indexPathForRowAtPoint:p];
    if (indexPath == nil)
        NSLog(@"long press on table view but not on a row");
    else
        NSLog(@"long press on table view at row %d", indexPath.row);
    } 
} 
```

您必须小心这一点，以免干扰用户对单元格的正常点击，并注意在用户抬起手指之前，handleLongPress 可能会触发多次。

谢谢...！

# php - 将数组传递给Paypal的php问题

> ID：10459854
> 
> 赞同：0
> 
> 时间：2012-05-05T07:33:21.333
> 
> 标签：php

我有一组变量，我通过 . 我遇到的问题是当 Paypal 屏幕加载项目时，数量，价格部分为空。这是传递的代码片段：-（数组 cart_stock 和 cart_price 保存要传递的数据，$tmp_cart_count 保存要传递的项目总数）

```
<?php 
echo "<form target='PayPal' action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post'>";
echo "<input name='cmd' value='_xclick' type='hidden' />";
echo "<input name='upload' value='1' type='hidden' />";
echo "<input name='business' value='sales@danskvintage.com.au' type='hidden' />";

// other irrelevant variables are passed here //

$i=0;$count=1;
while ($i < $tmp_cart_count)
    {
    echo "<input name='custom' value='".$_SESSION['cart_stock'][$i]."' type='hidden' >";
    echo "<input name='item_name_".($count)."' value='".$_SESSION['cart_title'][$i]."' type='hidden' >";
    echo "<input name='quantity_".($count)."' value='1' type='hidden' >";            
    echo "<input name='amount_".($count)."' value='".$_SESSION['cart_price'][$i]."' type='hidden' >";
    echo "<input name='shipping_".($count)."' value='0' type='hidden' >";
    $i++;
    $count++;
    }
echo "<input type='submit' value='PayPal'>";
echo "</form>";
?> 
```

任何帮助将不胜感激，因为它让我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:25:24.103

尝试改变

```
echo "<input name='cmd' value='_xclick' type='hidden' />"; 
```

进入

```
echo "<input name='cmd' value='_cart' type='hidden' />"; 
```

我相信这可能会有所帮助。

# drupal - Drupal 网站性能

> ID：10459860
> 
> 赞同：0
> 
> 时间：2012-05-05T07:34:16.293
> 
> 标签：drupal, caching

我已将 Drupal 6 用于我的多语言网站。我遇到了网站性能问题我已经启用了 drupal 的缓存设置，但是从一个页面移动到另一个页面时它仍然很慢。我也使用过 boost 模块，但它不适用于多语言网站。

请告诉我任何其他方式，以便我提高性能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T01:05:20.617

您的问题有很多答案，而不是列出所有答案（我必须从几个站点复制），这里有一些主要的答案，以及我推荐的一些资源：

-> 关闭所有不使用的模块

-> 开启缓存

-> 尝试使用 memcache 模块

-> 启用 drupal JS 和 CSS 聚合，这样我们可以加载更少的文件，这意味着更少的 HTTP 请求

-> 使用 CDN

-> GZIP 内容

-> 缩小 Javascript

-> 避免重定向

-> 减少重复脚本

* * *

我会推荐的一些资源

[http://wimleers.com/article/improving-drupals-page-loading-performance](http://wimleers.com/article/improving-drupals-page-loading-performance)

[http://drupal.org/node/326504](http://drupal.org/node/326504)

[http://groups.drupal.org/node/85979](http://groups.drupal.org/node/85979)

[http://groups.drupal.org/node/195218](http://groups.drupal.org/node/195218)

[http://www.bootstrappingindependence.com/technology/how-to-improve-website-performance-with-drupal-php-mysql-and-apache/](http://www.bootstrappingindependence.com/technology/how-to-improve-website-performance-with-drupal-php-mysql-and-apache/)

[http://www.vmirgorod.name/blog/tuning-drupal-performance](http://www.vmirgorod.name/blog/tuning-drupal-performance)

[http://pronovix.com/blog/my-favorite-drupal-performance-hacks](http://pronovix.com/blog/my-favorite-drupal-performance-hacks)

[http://fenix-solutions.com/blog/2009/12/09/tips-for-improving-drupal-performance/](http://fenix-solutions.com/blog/2009/12/09/tips-for-improving-drupal-performance/)

[http://drupalst.com/blog/improving-drupal-performance](http://drupalst.com/blog/improving-drupal-performance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T07:41:06.040

我在我的一个应用程序中遇到了同样的问题，我已经完成了以下步骤，它提高了我通过 YSlow 和 GooglePageSpeed 验证的性能。

1.  如果您使用的是 Apache，请将 Apache 替换为 NGINX 作为您的 Drupal 站点的 Web 服务器。当数千个连接同时运行时，这可以提高性能并降低内存利用率。（Apache 为每个额外的连接分配内存，因此随着并发连接的增加，它倾向于开始交换到磁盘）
2.  反向代理服务器的实现。NGINX 是一个非常流行的 Drupal 站点反向代理服务器。实施反向代理服务器消除了处理来自应用程序服务器的 Internet 流量的负担，并允许执行其他性能增强步骤：缓存静态文件和使用多个负载平衡的应用程序服务器。
3.  CDN（内容分发网络）的实现
4.  在服务器级别实现浏览器级别缓存
5.  应该启用图像、CSS 和 Javascript 文件的压缩。
6.  您可以将 Akamai 用于节点/页面级缓存，从而提高性能。
7.  使用图像精灵（css3embed），如果你正在使用，请避免使用 iframe
8.  索引数据库表（使用 dbtuner）
9.  使用添加 Expires 标头
10.  如果不使用，请禁用 DbLog 模块。
11.  将您的资产移至底部
12.  减少DNS查找希望它会有所帮助。谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T18:22:30.083

你需要真正快速的托管，我建议使用 nginx 和 phpfpm。没有任何 var 或 opcode 缓存器，您的性能将令人难以置信。我是我的 vps，我已经将大型 drupal 站点加速到每页 200 毫秒

当然，您必须审核您的站点是否有慢查询（大视图、许多块或 php 代码）。

# iphone - HTML 选取框在 iOS 5.1 中不起作用

> ID：10459861
> 
> 赞同：4
> 
> 时间：2012-05-05T07:34:30.637
> 
> 标签：iphone, objective-c, ipad, ios5, uiwebview

请看下面的函数。

```
-(void)loadHTMLinWebView
{   
    objWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    objWebView.opaque = NO;
    objWebView.userInteractionEnabled = NO;
    objWebView.backgroundColor = [UIColor clearColor];
    NSString *strTemp = @"<html><body style="margin-top:0px; margin-left:0px; text-align:center"><marquee behavior="alternate" style="font-family:Marker Felt;font-size:20px; color:#A52A2A;">Test</marquee></font></body></html>";
    [objWebView loadHTMLString:strTemp baseURL:nil];
    [self addSubview:objWebView];
} 
```

以上是我为在 UIWebView 中加载 HTML 而编写的代码。

但是当我在`iOS 4.0`设备中运行此代码时，它运行良好，我在 Webview 中看到了选取框效果，但在`iOS 5.1`设备中运行此代码，它没有显示选取框效果，它只是显示文本。

不知道那里发生了什么。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:51:44.400

作为替代方案，您可以使用 UIView 和 Timer 创建相同的东西。请参考以下网址

[https://github.com/jeffhodnett/JHTickerView](https://github.com/jeffhodnett/JHTickerView)

[https://github.com/MugunthKumar/MKTickerViewDemo](https://github.com/MugunthKumar/MKTickerViewDemo)

[https://github.com/caydenliew/CLTickerView](https://github.com/caydenliew/CLTickerView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:25:10.583

检查您的代码我发现`behavior="alternate"`导致问题停止滚动。如果你放`behavior="scroll"`比它会滚动，但不是按照你的要求。

如果您寻找替代品，那么其他答案可能对您有所帮助。

这里有几个讨论这个问题的链接，建议不要使用选框。

[链接](http://forums.htmlhelp.com/index.php?showtopic=14527) [1 链接2 链接](http://groups.google.com/a/googleproductforums.com/forum/#!topic/webmasters/Cggw0G83IhQ)[3](https://stackoverflow.com/questions/5842185/marquee-tag-show-text-immediately)

**更新**

哇哇！这是一件有趣的事情。我再次检查，发现它确实有效，但不适用于小字符串。它适用于稍大的字符串。仍然没有关于问题的线索。

# java - 如何确定对象变量的原始类型

> ID：10459863
> 
> 赞同：0
> 
> 时间：2012-05-05T07:34:37.587
> 
> 标签：java, validation, object, types

我正在使用包含 Data 的 ArrayList Of Object 。我正在使用以下代码

```
 if(SQL2000NumericDataTypes.contains(colDataType.toLowerCase())) 
  {
        if ((data.getClass().equals(String.class)) || (data.getClass().equals(char.class)) || (data.getClass().equals(Boolean.class)) )
   {
      message="The String Inputed"+dataStr + "is in the worng Data Type and Cannot Be Saved";
      returnBool=true;
      objLst1D=null;
      objLst1D=new ArrayList<Object>();

      objLst1D.add(message);
      objLst1D.add(returnBool);
      objLst2D.add(objLst1D);
   }

  } 
```

其中数据是对象类型并且是从代码中提取的

```
list.get(i).get(j).get(k) 
```

列表的定义如下

```
ArrayList<ArrayList<ArrayList<Object>>> data_header_mapper; 
```

data_header_mapper 包含 col 名称和相应数据值的映射。

问题是

```
data.getClass() 
```

在每种情况下都返回 String ，例如对于 int、float 和 date 值。请指导如何检查

# php - 如何在php中获取上传文件的内容？

> ID：10459864
> 
> 赞同：18
> 
> 时间：2012-05-05T07:34:52.850
> 
> 标签：php

我可以使用 html 文件类型上传文件，然后将该文件信息存储到 mysql db。这是我的代码=>

```
$upload = wp_upload_bits($_FILES["upload_file"]["name"], null, file_get_contents($_FILES["upload_file"]["tmp_name"]));
$document_name = $_FILES['upload_file']['name'];
$document_link = $upload['url'];
//and DB Operations in here..(I store to db filename,date,filelink etc.) 
```

我的问题是，我无法读取文件内容以将其存储到 db。[（我会搜索文件内容，所以我必须阅读文件的内容。）简要地说，我如何从http://...../](http://...../uploads/exampleFile.docx)等 url 读取 pdf、doc 等文件的内容[上传/exampleFile.docx](http://...../uploads/exampleFile.docx)？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-05T07:36:34.983

```
$fileContent = file_get_contents($_FILES['upload_file']['tmp_name']); 
```

请参阅手册：[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php)有关概述和本教程：[Tizag PHP - 文件上传](http://www.tizag.com/phpT/fileupload.php)以进行演练。

这个 PHP 手册部分也是必读的：[处理文件上传](http://www.php.net/manual/en/features.file-upload.php)- 来自 hakre 的评论。

# asp.net - 在图像上书写 3 维文本

> ID：10459865
> 
> 赞同：0
> 
> 时间：2012-05-05T07:35:00.943
> 
> 标签：asp.net, c#-4.0

是否可以在图像上写 3D 文本。我正在使用带有 c# 的 asp.net。如果可能的话，请给我一些想法。

这是我在图像上写文字的方法

```
私有只读字符串 _textOnImage = ConfigurationManager.AppSettings["textOnImage"];
 私有只读 int _opacity = Int32.Parse(ConfigurationManager.AppSettings["opicity"]);
 私有只读 int _red = Int32.Parse(ConfigurationManager.AppSettings["red"]);
 私有只读 int _green = Int32.Parse(ConfigurationManager.AppSettings["green"]);
 私有只读 int _blue = Int32.Parse(ConfigurationManager.AppSettings["blue"]);
 私有 int _fontSize = Int32.Parse(ConfigurationManager.AppSettings["fontSize"]);
 私有只读 String _fontName = ConfigurationManager.AppSettings["fontName"];

私人布尔 _havException { 得到；放; }
 私有字符串 _exceptionMessage { 获取；放; }
 私有位图 SourceImage { 获取；放; }
 私有位图 DestinationImage { 获取；放; }
 公共图像方法（）
 {
    _havException = 假；
    _exceptionMessage = string.Empty;
 }

 public void AddWatermarkText(Image img, String TextOnImage)
    {
        TextOnImage = TextOnImage ?? _textOnImage;

        try
        {
            var lobFromImage = Graphics.FromImage(img);
            FindFontSize(lobFromImage, img, TextOnImage);
            var lobFont = new Font(_fontName, _fontSize, FontStyle.Regular);

            var lintTextHw = lobFromImage.MeasureString(TextOnImage, lobFont);
            var lintTextOnImageWidth = (int)lintTextHw.Width;
            var lintTextOnImageHeight = (int)lintTextHw.Height;

            var lobSolidBrush = new SolidBrush(Color.FromArgb(_opacity, Color.FromArgb(_red, _green, _blue)));

            var posLeft = (img.Width - lintTextOnImageWidth) / 2;
            posLeft = posLeft > 0 ? posLeft : 5;
            var lobPoint = new Point(posLeft, (img.Height / 2) - (lintTextOnImageHeight / 2));

            //  var lobPoint = new Point(RandomNumber(0, img.Width - lintTextOnImageWidth), RandomNumber(0, img.Height - lintTextOnImageHeight));
            lobFromImage.DrawString(TextOnImage, lobFont, lobSolidBrush, lobPoint, StringFormat.GenericTypographic);

            lobFromImage.Dispose();
            lobSolidBrush.Dispose();
            lobFont.Dispose();
        }
        catch (Exception ex)
        {
            _havException = true;
            _exceptionMessage = ex.Message;
        }
        return;
    }
    private void FindFontSize(Graphics lobGraphics, Image lobImage ,String textOnImage )
    {
        var lobFont = new Font(_fontName, _fontSize, FontStyle.Regular);
        var lintTextHw = lobGraphics.MeasureString(textOnImage, lobFont);
        var lintTextOnImageWidth = (int)lintTextHw.Width;
        var lintImageWidth = lobImage.Width ;
        while (lintImageWidth < lintTextOnImageWidth)
        {
            lobFont = new Font(_fontName, _fontSize--, FontStyle.Regular);
            lintTextOnImageWidth = (int)lobGraphics.MeasureString(textOnImage, lobFont).Width;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:43:07.277

是的，这是可能的，但您必须手动绘制它。

请参考[这里](http://social.msdn.microsoft.com/Forums/nl/csharpgeneral/thread/960c9c33-1870-4e28-b187-d0a56cb3028d)开始在图像上绘图。

接下来，探索[System.Drawing](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)命名空间，特别是具有绘图方法的[Graphics](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)类，也用于上述帖子。

# android - “DSR 已开启；不要发送 DTR”错误

> ID：10459875
> 
> 赞同：10
> 
> 时间：2012-05-05T07:36:42.033
> 
> 标签：android, serial-communication

当我将笔记本电脑连接到我的 Android 手机时，计算机离开显示此错误：

```
1827    Data Router             usb connection is true
1827    Data Router             DSR is on Don't send DTR on 
```

我的手机是带有 Android 4.03 的 Galaxy II。

根据我的搜索：

```
DSR=Data Set Ready    DCE (Data Carrier Detect) is ready to receive commands or data.
DTR=Data Terminal Ready  Indicates presence of DTE to DCE. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T21:59:50.020

这不是应用程序错误，这是系统日志中的垃圾邮件。除非您正在使用手机的硬件，否则可以忽略。

# java - 关于压倒一切的原则

> ID：10459878
> 
> 赞同：1
> 
> 时间：2012-05-05T07:37:19.367
> 
> 标签：java, overriding

我有一个问题，下面是我的代码。

```
class A
{
    int i=10;
    public void m1() {
        System.out.println("I am in class A");
    }    
}

class B extends  A 
{    
    public void m1() { 
        System.out.println("I am in class B"); 
    }       
}

class main2 extends A 
{       
    public static void main(String...a) {
        A a1= new B();
        a1.m1();    
    }
} 
```

现在我的问题；获取父类A的变量“i”是可以的，但是我获取的方法也是A类的。是不是获取了B类的方法，因为它覆盖了A类的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:56:07.110

在 Java 中，任何派生类对象都可以分配给基类变量。例如，如果您有一个名为 A 的类，您从该类派生了 B 类，您可以这样做：

```
A a1 = new B(); 
```

左边的变量是 A 类型，而右边的对象是 B 类型。只要左边的变量是 B 的基类，就可以这样做。能够进行这样的赋值设置了所谓的“多态行为”：如果 B 类具有与 A 类中的方法相同的方法，则将调用 B 类中方法的版本。例如，如果两个类都定义了一个名为 m1() 的方法，并且您这样做：

```
a1.m1(); 
```

将调用 B 类中的 m1() 版本。即使您使用 A 变量类型来调用方法 m1()，也不会执行 A 类中的 m1() 版本。相反，它将被执行的是 B 类中的 m1() 版本。分配给 A 变量的对象的类型决定了调用的方法。

因此，当编译器扫描程序并看到如下语句时：

```
a1.m1(); 
```

它知道 a1 是 A 类型，但编译器也知道 a1 可以是对从 A 派生的任何类的引用。因此，编译器不知道该语句正在调用的 m1() 的版本。直到作业：

```
A a1 = new B(); 
```

执行以确定 m1() 的版本。由于分配直到运行时才发生，因此直到运行时才知道 m1() 的正确版本。这被称为“<strong>动态绑定”或“<strong>后期绑定”：直到您的程序在运行时执行某些操作，才能确定方法的正确版本。在 Java 中，继承的大多数使用都涉及动态绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:39:40.113

是的，它调用`B`了`m1`. 当您运行此代码时，它会打印

```
I am in class B 
```

正如预期的那样。（请注意，您实际上并没有在您发布的任何代码中*使用* `i`，所以我不确定第一部分是关于什么的......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:39:40.440

[是的，它会调用 B 的方法版本](http://ideone.com/oCtcI)，因为对象属于 B 类

# java - 将 RGBA 值转换为十六进制颜色代码

> ID：10459879
> 
> 赞同：5
> 
> 时间：2012-05-05T07:37:36.870
> 
> 标签：java, colors, hex, argb

我的应用程序中有一些滑块允许用户更改 ARGB 颜色，但是我需要将这些值转换为十六进制值，如 0xff000000，即纯黑色。

这是我到目前为止所拥有的：

```
protected int toHex(Color col) {
    String as = pad(Integer.toHexString(col.getAlpha()));
    String rs = pad(Integer.toHexString(col.getRed()));
    String gs = pad(Integer.toHexString(col.getGreen()));
    String bs = pad(Integer.toHexString(col.getBlue()));
    String hex = "0x" + as + rs + gs + bs;
    return Integer.parseInt(hex, 16);
}

private static final String pad(String s) {
    return (s.length() == 1) ? "0" + s : s;
} 
```

但是，在获得如下所示的整数值后，我得到了输入字符串的 NumberFormatException：“0xccffffff”：

```
int color = toHex(new Color(153f, 153f, 153f, 0.80f)); 
```

关于如何将其转换为整数的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:48:57.827

颜色参数必须在 1f 和 0f 之间浮动。所以这是一个有效的颜色：

```
int color = toHex(new Color(1f, 1f, 1f, 1f)); 
```

哪个是白色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T18:35:16.897

问题是您包含了 alpha 值。所以你的最大颜色代码是`#FFFFFFFF`（8位）。

该方法`Integer.parseInt`将让您从`-0x80000000`to解析值`0x7FFFFFFF`。为了从中获得价值`0xCC999999`，您必须否定价值和输入`-0x33666667`- 这当然根本没有用。

笨重但稳定的解决方法是使用`Long`.

```
(int) Long.parseLong(text, 16) 
```

# scripting - udev goto 和标签

> ID：10459880
> 
> 赞同：2
> 
> 时间：2012-05-05T07:37:57.667
> 
> 标签：scripting, udev

我应该只在同一个文件中使用`goto`and`label`还是在为 编写规则时可以在单独的文件中使用它`udev`？

以下代码有效吗？

```
$ cat 05-some.rules
GOTO="other_label"

$ cat 10-other.rules
LABEL="other_label" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:16:06.873

我意识到这是一个老问题，但我正在调查同样的事情，并认为我会分享我的发现。

首先，我所有的测试都是使用 udev 版本 147。

我只能将 GOTO 与同一文件中的 LABEL 一起使用。我没有读过 GOTO 和 LABEL 必须在同一个文件中的任何地方，但是在我的测试中，如果我有一条规则在不同的文件中包含到 LABEL 的 GOTO，则将跳过该规则。

另外，我在使用时看到了一个错误`udevadm test`：

> parse_file：转到“label_in_different_file”在“/etc/udev/rules.d/test.rules”中没有匹配的标签

然后它继续读取不同文件中的更多规则。

我用`udev_log="debug"`in做了这个`/etc/udev/udev.conf`。

# apache-flex - 使用路径的 Flex 绘图边缘，显示预览

> ID：10459883
> 
> 赞同：0
> 
> 时间：2012-05-05T07:38:35.810
> 
> 标签：apache-flex, path, drag, preview, graphic

您好我正在尝试使用拖放连接两个 flex 图形对象（从源形状拖放到目标上，然后使用路径对象创建一条连接两者的线）。

当我在形状之间拖动时，有什么方法可以看到线条的预览？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:30:06.357

每当对象移动时更新数据对象，并将线的端点绑定到该数据对象。

# iphone - UITableViewCell 中的 UILabel 溢出

> ID：10459884
> 
> 赞同：0
> 
> 时间：2012-05-05T07:38:42.483
> 
> 标签：iphone, objective-c, ios, ipad

我在 UITableViewCell 中有一个 UILabel 并且我试图调整高度，但是当高度大于单元格高度时，它会溢出到它下面的下一个单元格。我怎样才能避免这种情况？我将其添加到我的 contentView 中：

```
 [self.contentView addSubview:self.commentsText_]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:43:50.277

如果你想隐藏溢出。

```
self.contentView.clipsToBounds = YES; 
```

或者您可能希望通过覆盖在

```
- (void)setNeedsLayout
{
    [super setNeedsLayout];
    self.commentsText_.frame = .... // layout your label
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T07:44:21.813

使用以下代码，您可以计算标签的高度并更改单元格的高度

```
- (CGFloat)tableView:(UITableView *)tableView 
heightForRowAtIndexPath:(NSIndexPath *)indexPath {  

    UILabel *yourlabel;// use your memober class UILabel. I am declare here temporary.
    CGSize s = [yourlabel.text sizeWithFont:[UIFont systemFontOfSize:15] // enter your text font size and  cell-width
                             constrainedToSize:CGSizeMake(yourcellwidth, MAXFLOAT)  // - 40 For cell padding
                                 lineBreakMode:UILineBreakModeWordWrap];    

    return s.height;    //this will give you height of UILabel view you can change using addition according your requirements
} 
```

希望对你有帮助..

# c++ - 我如何将接受的套接字作为参数发送到函数

> ID：10459887
> 
> 赞同：0
> 
> 时间：2012-05-05T07:39:07.960
> 
> 标签：c++, c, sockets

如何将接受的套接字作为参数发送到函数这里是代码：

```
//accept connection 
accept_sock = accept(sock_con,(struct sockaddr *)&info,&sizeof_accept);

//Create a new process
int pid = fork();
 if (pid == 0)
   {

    //close the socket
    close(sock_con);
    request_handle(accept_sock);   ** here i wanna send the socket to that function*
    } 
```

声明此函数时该套接字的数据类型是什么？

```
function request_handle(what is the datatype pointed here){

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:45:00.687

accept_sock 是一个整数。请参阅 manpage 以获取[accept](http://linux.die.net/man/2/accept)。

int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:50:19.673

```
function request_handle(int socket); 
```

套接字文件描述符是与内核中打开的套接字相关联的整数，用于区分每个套接字，就像文件描述符是整数，用于区分打开的文件并获取适当的文件一样，有人说 Unix 中的所有内容都是文件，这是因为相关的整数或文件描述符的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:25:12.870

套接字通常是一个句柄`int`（`unsigned int`取决于实现），当您将其作为参数传递给`send` `recv`etc 时，套接字 dll 将使用它来唯一标识您所指的套接字。

所以你只需要这样做：

```
function request_handle(int socketHandle){

} 
```

# php - 显示图像数组 - PHP

> ID：10459889
> 
> 赞同：0
> 
> 时间：2012-05-05T07:39:20.600
> 
> 标签：php, ajax, jquery

我有两个问题：-
**问题编号：1（与 PHP 相关）**
我无法在 PHP 页面上显示图像数组。这是我正在尝试的代码..
**getUser.php**

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'sulen', '123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("holidayNet", $con);

$sql="SELECT * FROM image WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Picture</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";

  $dir = 'images';
$file_display = array('jpg','jpeg','png','gif');

if (file_exists ($dir) == false) {
    echo 'Directory \'', $dir, '\' not found!';
}
else{
    $dir_contents = scandir($dir);

    foreach($dir_contents as $file) {
        $file_type = strtolower(end(explode('.', $file)));

        If($file !== '.' && $file !== '..' && in_array($file_type, $file_display) == 

true) {
            echo "<td>" . $row ['<img src="', $dir, '/', $file, '" alt="', $file, '" />'] . "</td>";

        }       

    }

}
  /*echo "<td>" . $row['Job'] . "</td>";*/
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
<br /> 
```

**一个.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Sulman qb</option>
<option value="2">asd asd</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

**问题 2（AJAX 相关）**
您可能已经在上面的代码中看到，在使用 AJAX 时，我正在从数据库中检索图像目录路径。现在，我将如何将该目录路径提供给 php 文件 getUser.php 或

 `````
$dir = 'images'(need that path here !); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:03:46.940

这一行是错误的：

```
 echo "<td>" . $row ['<img src="', $dir, '/', $file, '" alt="', $file, '" />'] . "</td>"; 
```

为什么不只是，为什么要使用 $row[] 来显示图像， $row 用于检索数据库中与表字段相对应的值。$row['表字段'];

```
echo '<td>';
echo '<img src =';
echo $dir."/".$file;
echo  '/>';
echo '</td>'; 
```

也试试

```
$dir = "images/"; 
`````

# java - 获取文件中上一行的偏移量

> ID：10459899
> 
> 赞同：1
> 
> 时间：2012-05-05T07:41:15.790
> 
> 标签：java, file

我正在将文件中的数据逐行提取到数据库中，但我无法找到正确的方法来标记已读入数据库的行。

我有以下代码用于遍历文件行，并尝试验证
该行是否具有我的标志，否则我尝试将标志附加到文件行

```
List<String> fileLines = new ArrayList<String>();
File logFile = new File("C:\\MyStuff\\SyslogCatchAllCopy.txt");
try {
  RandomAccessFile raf = new RandomAccessFile(logFile, "rw");
  String line = "";
  String doneReadingFlag = "##";
  Scanner fileScanner = new Scanner(logFile);
  while ((line = raf.readLine()) != null && !line.contains(doneReading)) {
    Scanner s = new Scanner(line);
    String temp = "";
    if (!s.hasNext(doneReadingFlag)) {
      fileLines.add(line);
      raf.write(doneReadingFlag.getBytes(), (int) raf.getFilePointer(),
          doneReadingFlag.getBytes().length);
    } else {
      System.err.println("Allready Red");
    }
  }
} catch (FileNotFoundException e) {
  System.out.println("File not found" + e);
} catch (IOException e) {
  System.out.println("Exception while reading the file ");
}
// return fileLines;
// MoreProccessing(fileLines); 
```

此代码将标志附加到下一行并覆盖该位置的字符任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:01:21.043

@Peter Lawrey我按照你说的做了，它对我有用：

如下：

```
ArrayList<String> fileLines=new ArrayList<String>();
File logFile=new File("C:\\MyStuff\\MyFile.txt");

RandomAccessFile raf = new RandomAccessFile(logFile, "rw");
String line="";
String doneReadingFlag="#";
long oldOffset=raf.getFilePointer();
long newOffset=oldOffset;

while ((line=raf.readLine())!=null)
{
     newOffset=raf.getFilePointer();    

     if(!line.contains(doneReadingFlag))
     {
           fileLines.add(line);
           raf.seek((long)oldOffset);
           raf.writeChars(doneReadingFlag);
           raf.seek(newOffset);
           System.out.println("Line added and flaged");
     }
     else
     {
           System.err.println("Already Red");
     }
     oldOffset=newOffset;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:50:39.223

当您写入文件时，它不会插入您是否应该期望它替换字符。

您需要在文件中为要更改的信息保留空间，或者您可以将信息添加到另一个文件中。

或者，您可以将已阅读的行号（或更好的字符位置）存储在某处，而不是标记每个文件。

如果您没有重新启动进程，则可以让进程读取附加的文件（这意味着您可能不需要存储您所在的任何地方）

# ruby - 如何在 JRuby 中将浮点数舍入到小数点后 2 位？

> ID：10459901
> 
> 赞同：187
> 
> 时间：2012-05-05T07:41:19.760
> 
> 标签：ruby, jruby, rounding

如何在 JRuby(1.6.x) 中将浮点数舍入到小数点后 2 位？

```
number = 1.1164
number.round(2)

# The above shows the following error
# wrong number of arguments (1 for 0) 
```

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2013-02-28T09:29:47.423

```
(5.65235534).round(2)
#=> 5.65 
```

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2012-05-10T20:45:49.427

`sprintf('%.2f', number)`是一种神秘但非常强大的数字格式化方式。结果始终是一个字符串，但是由于您正在四舍五入，我假设您这样做是为了演示目的。`sprintf`几乎可以以任何你喜欢的方式格式化任何数字，还有更多。

完整的 sprintf 文档：[http ://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf](http://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf)

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2012-05-05T16:06:23.323

Float#round 可以在 Ruby 1.9 中使用参数，而不是在 Ruby 1.8 中。JRuby 默认为 1.8，但它能够[在 1.9 模式下运行](https://stackoverflow.com/questions/4755900/how-to-make-jruby-1-6-default-to-ruby-1-9)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-05T18:30:37.010

## 编辑

得到反馈后，原来的解决方案似乎不起作用。这就是为什么将答案更新为建议之一的原因。

```
def float_of_2_decimal(float_n) 
  float_n.to_d.round(2, :truncate).to_f
end 
```

* * *

如果您想获得小数点后 2 位的四舍五入数字，其他答案可能会起作用。但是，如果您想获得前两位小数的浮点数*而不进行四舍五入*，那么这些答案将无济于事。

因此，为了获得前两位小数的浮点数，我使用了这种技术。*在某些情况下不起作用*

```
def float_of_2_decimal(float_n)
  float_n.round(3).to_s[0..3].to_f
end 
```

，`5.666666666666666666666666`它将返回`5.66`而不是四舍五入`5.67`。希望它会帮助某人

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2016-09-29T17:06:12.840

试试这个：

```
module Util
module MyUtil

    def self.redondear_up(suma,cantidad, decimales=0)

        unless suma.present?
            return nil
        end

        if suma>0
            resultado= (suma.to_f/cantidad)
            return resultado.round(decimales)
        end

        return nil

    end

end 
end 
```

* * *

## 回答 #6

> 赞同：-16
> 
> 时间：2014-01-16T00:12:41.077

为了截断小数，我使用了以下代码：

```
<th><%#= sprintf("%0.01f",prom/total) %><!--1dec,aprox-->
    <% if prom == 0 or total == 0 %>
        N.E.
    <% else %>
        <%= Integer((prom/total).to_d*10)*0.1 %><!--1decimal,truncado-->
    <% end %>
        <%#= prom/total %>
</th> 
```

如果要截断为 2 位小数，则应使用`Integr(a*100)*0.01`

# ruby - 难以理解 Ruby LinkedList 实现中的变量/指针

> ID：10459904
> 
> 赞同：2
> 
> 时间：2012-05-05T07:41:50.113
> 
> 标签：ruby, linked-list

我用 ruby​​ 创建了一个单独的 LinkedList 类。一切都很顺利，直到试图反转链表。

它不会通过这种方法反转链表，但是当我在 left_tmp = @head 之后添加 **@** head.next **=** nil**时**，它就可以正常工作。

 ****当我添加它时，我无法弄清楚为什么它会起作用，有人有解释吗？

顺便说一句，我对 ruby​​ 还很陌生，所以请不要犹豫，告诉我是否还有其他一些不是“ **Ruby 中的良好实践**”的东西。

这是类和相关方法：

```
class LlNode
  attr_reader :data
  attr_accessor :next

  def initialize(val=nil)
    @data = val
    @next = nil
  end

  def to_s
    "node_data=#{@data}"
  end
end

class LinkedList
  def initialize
    @list = []
    @head = LlNode.new
  end

  def insert(val)
    n = LlNode.new val
    # List is empty
    if is_empty?
      @head = n
    else
      n.next = @head
      @head = n
    end
    self
  end

  def reverse
    return if is_empty? or @head.next.nil?

    curr = @head.next
    right_tmp = curr.next
    left_tmp = @head

    while curr != nil
      curr.next = left_tmp
      left_tmp = curr
      curr = right_tmp
      right_tmp = right_tmp.next unless right_tmp.nil?
    end
    @head = left_tmp
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:55:02.250

当您反转 a`linked list`时，第一个节点成为最后一个节点。在 a`singly-linked list`中，最后一个节点的`next`指针指向`null`。 `@head`，最初是您的第一个节点成为最后一个节点。这就是你添加`@head.next = nil`.

**编辑**：模拟试运行以更好地解释问题假设链表中有两个节点：`1->2`

```
curr = @head.next  (2)
right_tmp = curr.next  (nil)
left_tmp = @head  (1) 
```

循环的第一次迭代`while`：

```
curr.next = left_tmp   ( 1 <-> 2)
left_tmp = curr     (2)
curr = right_tmp    (nil)
right_tmp = right_tmp.next unless right_tmp.nil?    (nil) 
```

因为没有第二次迭代`curr == nil`

现在：

```
@head = left_tmp  (@head points to '2') 
```

最终链表状态为：

```
1 <-> 2 
```****

# macos - 从 xcode3.2 升级到 xcode4.3.2 后的 Builderror

> ID：10459906
> 
> 赞同：0
> 
> 时间：2012-05-05T07:42:19.133
> 
> 标签：macos, xcode4.3

我们最近将 xcode 升级到了 4.3。我正在进行测试，我需要复制目标文件并集成 FoneMonkey 文件并执行目标。我对原始目标进行了以下更改以使其成功执行：

```
updated framework serch paths

"$(DEVELOPER_FRAMEWORKS_DIR)"
"$(SRCROOT)/../../Developer/Library/Frameworks"
"$(SRCROOT)"

updated Library search paths

"$(DEVELOPER_FRAMEWORKS_DIR)"
"$(SRCROOT)/../../Developer/Library/Frameworks"
"$(SRCROOT)"
"/users/ezprintsqa/FoneMonkey/lib"

executed below command 
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

现在构建成功执行。但是添加了 Fonemonkey 文件的重复目标给出了以下错误：

```
Ld "/Users/ezprintsqa/Library/Developer/Xcode/DerivedData/SnapCards-dtjqrhfvqueyhrbbgjgydberyqdm/Build/Products/Debug-iphonesimulator/SnapCards copy.app/SnapCards copy" normal i386
    cd /Users/ezprintsqa/Documents/snapcards
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/ezprintsqa/Library/Developer/Xcode/DerivedData/SnapCards-dtjqrhfvqueyhrbbgjgydberyqdm/Build/Products/Debug-iphonesimulator -L/Applications/Xcode.app/Contents/Developer/Library/Frameworks -L/Applications/Xcode.app/Contents/Developer/Library/Frameworks/CPlusTest.framework -L/Applications/Xcode.app/Contents/Developer/Library/Frameworks/DTPerformanceSession.framework -L/Applications/Xcode.app/Contents/Developer/Library/Frameworks/InterfaceBuilderKit.framework -L/
.
.

ld: warning: directory not found for option '-L/Users/ezprintsqa/Documents/snapcards/../../Developer/Library/Frameworks'
ld: warning: directory not found for option '-F/Users/ezprintsqa/Documents/snapcards/../../Developer/Library/Frameworks'
Undefined symbols for architecture i386:
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[Reachability startNotifier] in Reachability.o
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[Reachability startNotifier] in Reachability.o
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[Reachability stopNotifier] in Reachability.o
  "_SCNetworkReachabilityCreateWithName", referenced from:
      +[Reachability reachabilityWithHostName:] in Reachability.o
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      +[Reachability reachabilityWithAddress:] in Reachability.o
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[Reachability currentReachabilityStatus] in Reachability.o
      -[Reachability isReachable] in Reachability.o
      -[Reachability isConnectionRequired] in Reachability.o
      -[Reachability isConnectionOnDemand] in Reachability.o
      -[Reachability isInterventionRequired] in Reachability.o
      -[Reachability isReachableViaWWAN] in Reachability.o
      -[Reachability isReachableViaWiFi] in Reachability.o
      ...
  "_OBJC_CLASS_$_SenTestSuite", referenced from:
      objc-class-ref in libFoneMonkeyOCUnit.5.5b.a(FoneMonkey+OCUnit.o)
  "_OBJC_CLASS_$_SenTestObserver", referenced from:
      objc-class-ref in libFoneMonkeyOCUnit.5.5b.a(FoneMonkey+OCUnit.o)
  "_OBJC_CLASS_$_SenTestLog", referenced from:
      objc-class-ref in libFoneMonkeyOCUnit.5.5b.a(FoneMonkey+OCUnit.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

有人可以帮我解决以下问题：

1.  升级到 4.3 后，该文件夹`/Users/ezprintsqa/Library/Developer/`现在不可用，但这里正在配置此路径（我该如何更改）？
2.  _objc_class 问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:51:22.220

通过`SenTesting.framework`从 Xcode 中删除，问题得到了解决。

# c# - 如何模拟 visio 容器？

> ID：10459909
> 
> 赞同：0
> 
> 时间：2012-05-05T07:42:39.367
> 
> 标签：c#, visio

我正在编写 C# winforms 应用程序，它使用 visio 控件来创建图表。现在我需要实现类似于 Visio 2010 中的容器或跨功能图表中的带的容器。

要求是让它们在 Visio 2007 和 2010 中看起来相同，并防止用户通过将它们拖到一边来形成 2 条车道。

我打算在我的模板中创建新形状，但是如何：

*   将 1 个容器粘到另一侧 - 不仅仅是连接点？

*   控件，哪些形状属于给定容器？只是检查代码中每个形状的边界？

*   移动里面所有形状的容器？只是在代码中移动还是可以通过 visio 设置来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:26:30.230

查看 Visio 团队的这篇博文。 [http://blogs.msdn.com/b/visio/archive/2010/01/12/custom-containers-lists-and-callouts-in-visio-2010.aspx](http://blogs.msdn.com/b/visio/archive/2010/01/12/custom-containers-lists-and-callouts-in-visio-2010.aspx) 在模具中创建您想要的形状，而不是尝试从头开始创建形状，只需使用 C# 来放置和自定义形状。

约翰... Visio MVP

# linux - 如何使用 dhclient 将特定于供应商的选项传递给 DHCP 服务器？

> ID：10459913
> 
> 赞同：2
> 
> 时间：2012-05-05T07:43:46.273
> 
> 标签：linux, configuration, client, dhcp

我正在尝试配置 dhclient。规范说我应该在每个 DHCP 请求/请求中添加特定于供应商的选项。

我发现只有 -V 选项。

-V 指定要发送到 DHCP 服务器的供应商类标识符选项。

我不确定那是我需要的。

我看到可以在 dhclient.cfg 中设置一些选项，但老实说，我根本不知道如何做到这一点。:( 据我了解，有一些“语言”，但我找不到有用的描述或示例。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:18:34.593

它在[dhcp-options 手册页](http://linux.die.net/man/5/dhcp-options)中有很好的记录。

例如：

```
option space ISC code width 1 length width 1 hash size 3;
option ISC.sample code 1 = text;
option vendor.ISC code 2495 = encapsulate vivso-sample;
option vendor-class.ISC code 2495 = text;

option ISC.sample "configuration text here";
option vendor-class.ISC "vendor class here"; 
```

# javascript - javascript中的原型

> ID：10459916
> 
> 赞同：1
> 
> 时间：2012-05-05T07:44:15.803
> 
> 标签：javascript, prototype

我正在研究原型对象，我对以下内容有点困惑

```
//my constructor function
function Circle(r) { 
    this.radius = r;
    this.PI = 3.14;
}

function areaCalculator() {
    this.area = this.PI * this.radius * this.radius;
}

 function circumferenceCalculator() {
    this.circumference = 2* this.PI * this.radius;
} 
```

因为我们的函数是一个对象，并且有一个名为原型的属性，所以可以向这个原型对象添加属性和方法，这些属性和方法将自动适用于我们使用函数构造函数创建的所有自定义对象。

```
Circle.prototype.areaCalculator = areaCalculator; //adding function
Circle.prototype.color = "Red"; //adding property

var circle1 = new Circle(5);
circle1.areaCalculator();
console.log(circle1.radius);//5
console.log(circle1.area); //78.5
console.log(circle1.color);//Red 
```

如果我理解正确，所有使用 Circle 的对象都将引用相同的颜色变量，除非它们被明确设置。它是否正确？

另外，在不使用原型的情况下执行以下操作意味着什么

```
Circle.circumferenceCalculator = circumferenceCalculator;
Circle.color = "Red"; 
```

以上两种说法是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:59:26.993

是的，所有创建的对象`new Circle`都将指向同一个`color`属性。该属性实际上将位于原型对象上，而不是您创建的对象上。因此，当您在特定对象上设置它时，它会从原型中“隐藏”该属性，但不会覆盖它 - 您可以`delete obj.color`在设置后尝试，您将恢复旧颜色。

这样做`Circle.color='red'`只会`color`在对象上设置属性`Circle`（即使函数也是对象，但它们有一个`callable`属性来定义它们在调用时的行为）——这与`Circle`' 的原型没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:02:29.327

函数也是一个对象，您可以为其增加属性。一个常见的例子是 jQuery，`$`它既是一个对象又是一个函数。

```
function Circle(r) {}
Circle.circumferenceCalculator = circumferenceCalculator;
Circle.color = "Red";

$.each();             //$ as an object
$('selector').each()  //$ as a function 
```

但是，这不会反映在您创建的实例中。反映在实例上的只是那些通过原型添加的和在构造函数中添加的。

```
function Circle(r) { 
    this.radius = r;
    this.PI = 3.14;
}

Circle.prototype.areaCalculator = areaCalculator;
Circle.prototype.color = "Red";

var mycircle = new Circle(5);

//props on Circle itself:
//Circle.color
//Circle.areaCalculator

//props on the instance:
//mycircle.radius
//mycircle.PI
//mycircle.areaCalculator
//mycircle.color 
```

# javascript - 使用递归函数遍历 JSON 字符串到内部级别

> ID：10459917
> 
> 赞同：10
> 
> 时间：2012-05-05T07:44:21.583
> 
> 标签：javascript, arrays, json, object

我有一个 JSON 输入，可以进入任意数量的级别。

我给了一个输入样本

```
var d=getEntities( {"Categories": 
{
"Facets": 
    [
    {
    "count": 1,
    "entity": "Company",
    "Company": 
            [
            {

            "entity": "Ford Motor Co",

            "Ford_Motor_Co": 
                [
                    {
                    "count": 1,
                    "entity": "Ford"
                    }
                ]
            }
            ]
    },
        {
            "count": 4,
            "entity": "Country",
              "Country": [
                    {

                        "entity": "Germany",
                         "Germany": [
                                {
                                    "count": 1,
                                    "entity": "Germany"
                                }
                          ],
                        "currency": "Euro (EUR)"
                    },
                    {

                         "entity": "Italy",
                        "Italy": [
                                {
                                     "count": 1,
                                     "entity": "Italy"
                                }
                          ],
                        "currency": "Euro (EUR)"
                    },
                    {

                        "entity": "Japan",
                          "Japan": [
                             {
                                    "count": 1,
                                    "entity": "Japan"
                             }
                          ],
                        "currency": "Yen (JPY)"
                    },
                    {

                        "entity": "South Korea",
                          "South_Korea": [
                              {
                                    "count": 1,
                                    "entity": "South Korea"
                                }
                          ],
                      "currency": "Won (KRW)"
                    }
              ]
        },
        {"count": 5,
              "entity": "Persons",
              "Persons": [
                    {
                         "count": 2,
                        "entity": "Dodge"
                    },
                    {
                        "count": 1,
                        "entity": "Dodge Avenger"
                    },
                    {
                        "count": 1,
                        "entity": "Major League"
                    },
                    {
                        "count": 1,
                        "entity": "Sterling Heights"
                    }
              ]
        }
  ]

}}); 
```

我想使用递归将所有级别的键值“实体”​​添加到数组中，

我可以使用字符串从第一级收集数据

```
<html>
<head>
<script src="jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="dataDumper.js"></script>

<script type="text/javascript">

var testJSON = {"Categories": 
{
"Facets": 
    [
    {
    "count": 1,
    "entity": "Company",
    "Company": 
            [
            {

            "entity": "Ford Motor Co",

            "Ford_Motor_Co": 
                [
                    {
                    "count": 1,
                    "entity": "Ford"
                    }
                ]
            }
            ]
    },
        {
            "count": 4,
            "entity": "Country",
              "Country": [
                    {

                        "entity": "Germany",
                         "Germany": [
                                {
                                    "count": 1,
                                    "entity": "Germany"
                                }
                          ],
                        "currency": "Euro (EUR)"
                    },
                    {

                         "entity": "Italy",
                        "Italy": [
                                {
                                     "count": 1,
                                     "entity": "Italy"
                                }
                          ],
                        "currency": "Euro (EUR)"
                    },
                    {

                        "entity": "Japan",
                          "Japan": [
                             {
                                    "count": 1,
                                    "entity": "Japan"
                             }
                          ],
                        "currency": "Yen (JPY)"
                    },
                    {

                        "entity": "South Korea",
                          "South_Korea": [
                              {
                                    "count": 1,
                                    "entity": "South Korea"
                                }
                          ],
                      "currency": "Won (KRW)"
                    }
              ]
        },
        {"count": 5,
              "entity": "Persons",
              "Persons": [
                    {
                         "count": 2,
                        "entity": "Dodge"
                    },
                    {
                        "count": 1,
                        "entity": "Dodge Avenger"
                    },
                    {
                        "count": 1,
                        "entity": "Major League"
                    },
                    {
                        "count": 1,
                        "entity": "Sterling Heights"
                    }
              ]
        }
  ]

}};

function scan(obj)
{
    var k;
    if (obj.hasOwnProperty('entity')) {

        for (k in obj){
           if (obj.hasOwnProperty(k)){

                scan( obj[k] );  

            }                
          }
    } 

    else{
        if(k=='entity')
        {
        alert(obj.entity);
   }
    }

};

scan(testJSON);

</script>
</head>

<body>

</body>

</html> 
```

如何使用递归函数进入 JSON 字符串的内部级别？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-05T08:18:56.687

我制作了一个[jsfiddle](http://jsfiddle.net/t4p9G/)，它像这样遍历 JS 对象中的每个对象、数组和值...

```
function scan(obj) {
    var k;
    if (obj instanceof Object) {
        for (k in obj){
            if (obj.hasOwnProperty(k)){
                //recursive call to scan property
                scan( obj[k] );  
            }                
        }
    } else {
        //obj is not an instance of Object so obj here is a value
    };

}; 
```

我没有得到递归错误（在 Chrome 中）。你能用它来做你想做的事吗？

如果您需要测试对象是否为数组，请使用`if (obj instanceof Array)`

要测试对象是否具有“实体”属性，请使用`if (obj.hasOwnProperty('entity'))`

要添加（或修改现有）“实体”属性，请使用`obj.entity = value`或`obj['entity'] = value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:49:45.537

```
(function recur( obj ) {
    Object.keys( obj ).forEach( function( prop ) {
        // Check if the property is an object
        if ( ({}).toString.apply( prop ) === '[object Object]' ) {
            // If it is, recall this function
            recur( prop );
        }
    } );
} () ); 
```

我没有添加你的逻辑，但你知道如何递归地遍历你的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-06T06:41:35.363

这是我经常使用的一个功能。执行许多递归任务很容易修改。例如，如果您添加一个保释标志，您可以快速获取堆栈或添加一个回调函数，使其更加通用。无论如何，这是我的 2 美分

```
var recursiveObjMap = (function(){
  var stack = [];
  var result = [];
  // var bail = false;
  return function map(data, key){
    if (!$.isArray(data) && !$.isPlainObject(data) ) { 
      result.push(data);
      return false 
    }

    $.each(data, function(i, v){
      if (key) stack.push(key);
      map(v, i);
      stack.pop();
    });
    return result;
  };
})();

recursiveObjMap({a:'b',c:{d:{e:"f"}}}) // ['b', 'f'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-19T01:26:21.720

假设我有如下结构：

```
var aObject = {
    items: [],
    children: {}
} 
```

Children 是一个包含更多 aObject 的关联数组。所以它可能看起来像这样：

```
var aObject = {
    items: [],
    children: {
        "subgroup1": {
            items: [],
            children: {}
        },
        "subgroup2": {
            items: [],
            children: {}
        }
    }
} 
```

我有一个包含子组数组的项目：

```
["subgroup1", "subgroup1a"] 
```

每个子组都是一个“位置”。该项目需要放置在：

```
aObject.children[array[0]].children[array[1]].items 
```

在每个级别，我们必须检查 children[array[i]] 是否存在，如果不存在，则创建它。你不能简单地写 aObject.children[array[0]].children[array[1]].items.push(item) 因为 children[array[0]] 可能不存在，我们会得到一个错误。

这可以使用递归来解决！(AngularJS)

```
function recursive(aLevel, aItem, aArray, aIndex){
    var lLevel = aLevel;

    // If we have reached the end of the array
    if (aIndex === aArray.length){
        // Insert
        aLevel.items.push(aItem);
    } else {

        // If the subgroup doesn't exist, create it
        if (typeof aLevel.children[aArray[aIndex]] === 'undefined'){
            aLevel.children[aArray[aIndex]] = {
              items: [],
              children: {}
            };
        }

        // Move into
        recursive(aLevel.children[aArray[aIndex]], aItem, aArray, aIndex+1);
    }
}

aObject = {
    items: [],
    children: {},
}

angular.forEach(items, function(item, i){
    var location = item.location;

    if (location.length == 0){
        aObject.items.push(item);
    } else {
        recursive(aObject, item, location, 0);
    }
}); 
```

最终的 aObject 如下所示：

```
var aObject = {
     items: [],
     children: {
        "subgroup1": {
            items: [],
            children: {
                "subgroup1a": {
                    items: [item],
                    children: {}
                }
            }
        },
        "subgroup2": {
            items: [],
            children: {}
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T00:34:19.743

```
const obj = [
  {
    count: 1,
    entity: "Company",
    Company: [
      {
        entity: "Ford Motor Co",

        Ford_Motor_Co: [
          {
            count: 1,
            entity: "Ford",
          },
        ],
      },
    ],
  },
  {
    count: 4,
    entity: "Country",
    Country: [
      {
        entity: "Germany",
        Germany: [
          {
            count: 1,
            entity: "Germany",
          },
        ],
        currency: "Euro (EUR)",
      },
      {
        entity: "Italy",
        Italy: [
          {
            count: 1,
            entity: "Italy",
          },
        ],
        currency: "Euro (EUR)",
      },
      {
        entity: "Japan",
        Japan: [
          {
            count: 1,
            entity: "Japan",
          },
        ],
        currency: "Yen (JPY)",
      },
      {
        entity: "South Korea",
        South_Korea: [
          {
            count: 1,
            entity: "South Korea",
          },
        ],
        currency: "Won (KRW)",
      },
    ],
  },
  {
    count: 5,
    entity: "Persons",
    Persons: [
      {
        count: 2,
        entity: "Dodge",
      },
      {
        count: 1,
        entity: "Dodge Avenger",
      },
      {
        count: 1,
        entity: "Major League",
      },
      {
        count: 1,
        entity: "Sterling Heights",
      },
    ],
  },
];
function test(runObj) {
  for (let i in runObj) {
    typeof runObj[i] == "object" ? test(runObj[i]) : console.log(runObj[i]);
  }
}
test(obj); 
```

# c - 如何将数字矩阵打印到C中的字符串中？

> ID：10459919
> 
> 赞同：2
> 
> 时间：2012-05-05T07:44:25.263
> 
> 标签：c, matrix, printf, pretty-print

假设我们在 C 中有一个矩阵（一个二维数组）。

我想知道如何将矩阵打印成 C 中的字符串。

例如，如果我有

```
double M[2][2]={{1.2,3.4},{3.14,2.718}} 
```

我想得到这样的字符串：

```
"1.200  3.400\n3.140  2.718" 
```

可以打印为

```
1.200 3.400
3.140 2.718 
```

如果打印到屏幕，问题会变得更容易，因为我们不需要考虑缓冲区大小。但是，当打印到字符串时，如果我想使用像“sprintf”这样的函数，似乎很难知道字符串缓冲区应该有多大。

我搜索了谷歌和stackoverflow，但几乎所有我得到的都是关于如何将字符串转换为数字......

如何在 C 中做到这一点？有库吗？

能否请你帮忙？谢谢！

编辑： 'snprintf' 解决方案适用于只有一个数字的情况。但是对于矩阵，它应该使用循环来遍历每个元素。然后在每个循环中添加一点字符串。这适用于“snprintf”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:25:47.697

You'll need to do this in two steps, first calculate the total size to hold the string, then allocate it and compose the string. Could be done in a function like this:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

#define ARRAY_SIZE(a) (sizeof(a) / sizeof(*a))

static char * matrix2D_to_string(const double *matrix, size_t rows, size_t columns)
{
    const char format[] = "%f";
    const char column_separator[] = "  ";
    const char row_separator[] = "\n";

    int *column_widths = NULL;
    size_t r = 0, c = 0;
    char *buffer = NULL, *p = NULL;
    size_t size = 0;

    if (!rows || ! columns) {
        errno = EINVAL;
        return NULL;
    }

    // calculate maximum width for each column
    column_widths = (int *)calloc(columns, sizeof(*column_widths));
    for (r = 0; r < rows; ++r) {
        for (c = 0; c < columns; ++c) {
            char buf[256];
            int width = sprintf(buf, format, matrix[r * columns + c]);
            if (width > column_widths[c]) {
                column_widths[c] = width;
            }
        }
    }

    // calculate total buffer size...

    // ... values
    for (c = 0; c < columns; ++c) {
        size += column_widths[c] * rows;
    }
    // ... column separators
    size += (columns - 1) * strlen(column_separator);
    // ... row separators
    size += (rows - 1) * strlen(row_separator);
    // ... nul terminator
    ++size;

    // make the string
    buffer = (char *)malloc(size);
    p = buffer;
    for (r = 0; r < rows; ++r) {
        if (r) {
            strcpy(p, row_separator);
            p += strlen(row_separator);
        }
        for (c = 0; c < columns; ++c) {
            if (c) {
                strcpy(p, column_separator);
                p += strlen(column_separator);
            }
            int width = sprintf(p, format, matrix[r * columns + c]);
            p += width;
            if (width < column_widths[c]) {
                width = column_widths[c] - width;
                memset(p, ' ', width);
                p += width;
            }
        }
    }
    *p = '\0';

    // cleanup
    free(column_widths);

    return buffer;
}

int main()
{
    double M[3][2]={{1.2,3.4},{3.14,2.718},{100.999,0.000005}};

    char *s = matrix2D_to_string((const double *)M, ARRAY_SIZE(M), ARRAY_SIZE(M[0]));

    puts(s);

    free(s);

    return 0;
} 
```

This prints:

```
1.200000    3.400000
3.140000    2.718000
100.999000  0.000005 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:04:38.267

您可以使用`snprintf`先获取所需的缓冲区长度，然后分配并打印到其中：

```
char* PrettyPrint(const char* format, ...)
{
  va_args va;
  va_start(va, format);

  char c[1] = {};
  int len = vsnprintf(c, 1, format, va);
  char* s = malloc(len + 1);
  vsnprintf(s, len + 1, format, va);

  va_end(va);

  return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T07:47:33.877

您可以从一些估计的大小开始，`realloc`如果还不够，请使用。

如果`snprintf`返回大于剩余缓冲区大小，则意味着它没有足够的空间。在这种情况下，您应该重新分配并重试相同的`snprintf`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T09:57:07.957

```
#include <stdio.h>
#include <stdlib.h>

long GetFileSize(FILE *fp){
    long fsize = 0;

    fseek(fp,0,SEEK_END);
    fsize = ftell(fp); 
    fseek(fp,0,SEEK_SET);//reset stream position!!

    return fsize;
}

char *ReadToEnd(const char *filepath){
    FILE *fp;
    long fsize;
    char *buff;

    if(NULL==(fp=fopen(filepath, "rb"))){
        perror("file cannot open at ReadToEnd\n");
        return NULL;
    }
    fsize=GetFileSize(fp);
    buff=(char*)malloc(sizeof(char)*fsize+1);
    fread(buff, sizeof(char), fsize, fp);
    fclose(fp);
    buff[fsize]='\0';

    return buff;
}

char *printStrMatrix(const char *fmt, const int col, const int row, const double* matrix ){
    FILE *fp;
    int c,r;
    char *str;

    if(NULL==(fp=fopen("printStr.tmp", "wb"))){//use tmpnam() better
        perror("temporary file cannot open at printStr\n");
        return NULL;
    }
    for(r=0;r<row;++r){
        for(c=0;c<col;++c){
            fprintf(fp, fmt, *matrix++);
            if(c != col-1)
                fprintf(fp, " ");
        }
        fprintf(fp, "\n");
    }
    fflush(fp);
    fclose(fp);
    str=ReadToEnd("printStr.tmp");
    remove("printStr.tmp");
    return str;
}

int main(void){
    double M[2][2]={{1.2,3.4},{3.14,2.718}};
    char *str;
    str=printStrMatrix("%1.3lf", 2, 2, &M[0][0]);
    printf("%s", str);
    free(str);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T07:52:19.690

它的数组。

考虑浮点值。

```
for(i=0;i<2;i++)
{
   for(j=0;j<2;j++)
   {
       printf("%f \t",M[i][j]);
   }
   printf("\n"); 
```

}

希望这会帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T08:31:34.847

```
for(i=0;i<2;i++)
{
   for(j=0;j<2;j++)
   {
       printf("%f \t",M[i][j]);
   }
   printf("\\n");//Change printf("\n") as printf("\\n")
} 
```

# spring - org.hibernate.HibernateException：没有为当前线程找到会话

> ID：10459922
> 
> 赞同：33
> 
> 时间：2012-05-05T07:45:01.190
> 
> 标签：spring, hibernate, spring-3, hibernate-4.x

我在 Spring3 和 Hibernte4 中遇到了上述异常

以下是我的 bean xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

   <context:annotation-config/>

   <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
      <property name="url" value="jdbc:mysql://localhost:3306/GHS"/>
      <property name="username" value="root"/>
      <property name="password" value="newpwd"/>
  </bean>

  <bean id="sessionFactory"
      class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="dialect">org.hibernate.dialect.MySQL5Dialect</prop>
        </props>
    </property>
    <property name="packagesToScan">
        <list>
            <value>com.example.ghs.model.timetable</value>
        </list>
    </property>
  </bean>

   <bean id="baseDAO"
      class="com.example.ghs.dao.BaseDAOImpl"/>
</beans> 
```

我的 BaseDAO 类看起来像这样

```
public class BaseDAOImpl implements BaseDAO{
private SessionFactory sessionFactory;

 @Autowired
 public BaseDAOImpl(SessionFactory sessionFactory){
     this.sessionFactory = sessionFactory;
 }

 @Override
 public Session getCurrentSession(){
     return sessionFactory.getCurrentSession();
 }
} 
```

下面的代码抛出了标题中的异常

```
public class Main {
 public static void main(String[] args){
    ClassPathXmlApplicationContext context =
            new ClassPathXmlApplicationContext("dao-beans.xml");
    BaseDAO bd = (BaseDAO) context.getBean("baseDAO");
    bd.getCurrentSession();
 }
} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-05T09:09:09.977

`getCurrentSession()`只有在事务范围内才有意义。

您需要声明一个适当的事务管理器，划定事务的边界并在其中执行数据访问。例如，如下所示：

```
<bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name = "sessionFactory" ref = "sessionFactory" />
</bean> 
```

.

```
PlatformTransactionManager ptm = context.getBean(PlatformTransactionManager.class);
TransactionTemplate tx = new TransactionTemplate(ptm);

tx.execute(new TransactionCallbackWithoutResult() {
    public void doInTransactionWithoutResult(TransactionStatus status) { 
        // Perform data access here
    }
}); 
```

**也可以看看：**

*   [10\. 交易管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)
*   [13.3 休眠](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html#orm-hibernate)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-30T09:38:15.403

我遇到了同样的问题并得到了解决，如下在 daoImpl 类上添加了@Transactional

在配置文件中添加了 trnsaction 管理器：

```
<tx:annotation-driven/> 

<bean id="transactionManager" 
 class="org.springframework.orm.hibernate4.HibernateTransactionManager">
<property name="sessionFactory" ref="sessionFactory"></property>
</bean> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-01T19:26:05.970

我将添加一些需要我一些时间来调试的东西：不要忘记@Transactional 注释仅适用于“公共”方法。

我将一些@Transactional 放在“受保护”的上并收到此错误。

希望能帮助到你 ：）

[http://docs.spring.io/spring/docs/3.1.0.M2/spring-framework-reference/html/transaction.html](http://docs.spring.io/spring/docs/3.1.0.M2/spring-framework-reference/html/transaction.html)

> **方法可见性和@Transactional**
> 
> 使用代理时，您应该仅将 @Transactional 注释应用于具有公共可见性的方法。如果您使用 @Transactional 注释对受保护的、私有的或包可见的方法进行注释，则不会引发错误，但带注释的方法不会显示配置的事务设置。如果您需要注释非公共方法，请考虑使用 AspectJ（见下文）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-05T08:17:09.480

您将 BaseDAOImpl 类放入哪个包中。我认为它需要一个类似于您在应用程序上下文 xml 中使用的包名称，并且它也需要相关的注释。

# javascript - 自动完成 JS 文件 - SharpDevelop

> ID：10459923
> 
> 赞同：0
> 
> 时间：2012-05-05T07:45:39.540
> 
> 标签：javascript, sharpdevelop

有没有办法为 SharpDevelop 添加 JavaScript 库的自动完成功能？或者已经有一个，我错过了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:17:46.450

不是现在。它计划用于未来的版本，但尚未实施。

# c# - MVC Razor 查看代码执行

> ID：10459925
> 
> 赞同：2
> 
> 时间：2012-05-05T07:45:54.590
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在开发我的第一个 ASP.Net MVC 应用程序。我正在使用 Razor 视图，MVC 版本是 3。我正在从数据库中以某种原始格式获取模型的数据。然后我对其进行一些处理，例如连接字符串，使用一些 linq 查询格式化日期列。我已经在模型类中拥有的所有数据。

我想知道所有这些代码执行都发生在服务器上。我想把这个负担从我的服务器转移到客户端机器上，我想把这个原始数据传递给我的视图，然后在视图中编写代码来做这个循环和格式化等。

我只是想确认这是否是继续前进的好方法，以及这是否真的减轻了我的服务器的一些负担。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:57:18.850

在您的视图中编写的 C# 或 VB 不是客户端。它仍然是服务器端。它用于在传递给客户端之前操纵 HTML 的呈现。

您必须传递所有原始数据，然后使用 JavaScript 对其进行处理。

您的应用程序的性能将取决于每台客户端计算机，因此在 2 个用户之间并不一致。因此，维护会很棘手。

长话短说，我不推荐它。您的服务器很可能设计用于处理负载。这是适合这种事情的地方。

而且我还阅读了服务器/客户端代码执行关系。简单地做 MVC 是一个好的开始。它自然地教您网络的工作原理，而不是使用网络表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:55:48.270

这可能是过早的优化。我怀疑服务器是否会在执行简单的事情（如字符串连接、格式化等）时陷入困境。

我建议您仅在遇到性能问题时才关注这一点；否则不值得努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:08:04.783

我认为您将 MVC 中的视图与浏览器 HTML 混淆了。您可以在 View 中拥有任何 C# 代码，但不能在浏览器中。如果您的问题是关于在 View 中执行业务逻辑，请进一步阅读。

MVC 允许将任何类型的视图（移动、桌面、Web 应用程序）插入控制器。所以视图不应该做任何业务逻辑，否则你最终会复制业务逻辑。

此[LINK](http://blogs.msdn.com/b/aspnetue/archive/2010/09/17/second_2d00_post.aspx)将帮助您了解 MVC。

视图中的数据格式根本不是问题，但是当您开始在视图中实现业务逻辑时，这就是问题（我想这就是您在视图中使用 linq 的意思）。

例如在 View 中，在 Model 实体上使用 linq 循环遍历集合并创建 HTML 表完全没问题，实际上 ViewModel 应该与 View 紧密耦合。

[尽量不要在这里变得哲学，但是:)] 最后，无论您使用什么架构，都不要限制自己跳出框框思考。几乎所有项目都使用多种模式，大多数（优秀）开发人员通过在不知不觉中实现模式来解决业务问题。:)

# android - 在特定时间触发函数（代码）

> ID：10459931
> 
> 赞同：2
> 
> 时间：2012-05-05T07:48:00.963
> 
> 标签：android

我创建了一个小应用程序，但我希望它在特定时间自动执行。时间必须由用户输入。

例如：如果我的活动是启动特定游戏并且我输入下午 5:30 作为时间，它应该在下午 5:30 自动运行该游戏，即使我在输入时间后关闭应用程序也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T07:49:57.907

为它创建一个警报和一个广播接收器，把它的意图放在 Android Manifest 中

看看[http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/](http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/)

只需提前一周设置闹钟。

* * *

对于触摸的东西，试试这个替换：

```
Button stopAlarm = (Button) findViewById(R.id.stopAlarm);
        stopAlarm.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View arg0, MotionEvent arg1) {
                mMediaPlayer.stop();
                finish();
                return false;
            }
        }); 
```

和

```
Button stopAlarm = (Button) findViewById(R.id.stopAlarm);
        stopAlarm.setOnClickListener(new OnTouchListener() {
            @Override
            public void onClick(View arg0) {
                mMediaPlayer.stop();
                finish();
            }
        }); 
```

我们不需要使用 arg0 或 arg1 的原因是我们已经知道触摸或点击的来源，在你有一个活动范围的点击监听器的情况下（所以活动实现了 onClickListener）你会使用这样的东西：

```
 @Override
        public void onClick(View arg0) {
            switch(arg0){
                  case R.id.id1:
                  //Do what you want here
                  break;
                  case R.id.id2:
                  //Do what you want here
                  break;
                  default:
                  //Do default stuff
                  break;
            }
        } 
```

* * *

但是，据我了解，我相信您不需要任何这些东西，但是正确吗？您只是希望您的活动在这些时间运行，对吗？

所以如果我是正确的，你只需要这样做：

```
public class AlarmReceiverActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.alarm);

        //Do what you want here
        //This is now your activity to play with :D
    }

} 
```

# jquery - 使用 jQuery 删除字符串中的一些文本

> ID：10459932
> 
> 赞同：4
> 
> 时间：2012-05-05T07:48:03.343
> 
> 标签：jquery

```
<td colspan="2" class="ai1ec-time">
    <a class="ai1ec-button ai1ec-calendar-link" href="#">
         Back to Calendar »                
    </a>
    July 12, 2012 @ 08:00 am – July 13, 2012 @ 10:00 pm
</td>​ 
```

上面是我的 HTML 标记，它显示下面的文本。

返回日历 » 2012 年 7 月 12 日 @ 08:00 am – 2012 年 7 月 13 日 @ 10:00 pm ​</p>

我需要`@ 08:00 am`从开始日期/时间和`@ 10:00 pm`结束日期/时间中删除。这怎么能用 jQuery 来完成？我听说过并读过一种叫做 Regexp 的东西，这是需要使用的吗？使用 jQuery 移除（）？

我忘了提到“时间”不是固定的。唯一固定的是需要删除的部分以“@”开头并以“m”结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T07:59:23.620

```
$(".ai1ec-time").html(function(i,o){
  return o.replace( /@[0-9:\s]+(am|pm)/ig, '' );
}); 
```

演示：http: [//jsbin.com/ozuwob/2/edit](http://jsbin.com/ozuwob/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:57:43.200

首先确保您运行 jQuery ( [jQuery](http://docs.jquery.com/Main_Page) )

然后使用这样的东西：

```
$(".ai1ec-time").html(function(i,o){
  return o.replace( /\@\s\d\d\:\d\d\s(am|pm)/ig, '' );
}); 
```

演示：[js bin](http://jsbin.com/ozuwob/3/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T08:02:29.297

```
var $td = $('td.ai1ec-time')
$td.html($td.html().replace(/@ \d{1,2}:\d{2} [ap]m/g, '')) 
```

# iphone - [UIMenuController sharedMenuController].menuVisible 说是但菜单不可见？

> ID：10459936
> 
> 赞同：2
> 
> 时间：2012-05-05T07:49:12.067
> 
> 标签：iphone, ios, ipad

在我的代码中，我使用了这个测试

```
if ([UIMenuController sharedMenuController].menuVisible) { 
```

但是，这并不总是有效。在我的例子中，如果用户在 UITextView 中双击一个单词，菜单会一直报告可见 = YES。

我尝试添加此测试：

```
 UIMenuController * c = [UIMenuController sharedMenuController];
    CGRect test4 = c.menuFrame;
    if (test4.size.width != 0 || test4.size.height != 0) {
        return;    
    } else {
        NSLog(@"Shared menu controller claims to be visible but isn't");
    } 
```

这有效，但并非一直有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:03:59.793

事实证明，原因是我在顶部推了另一个窗口而没有删除它。对我来说是不可见的，菜单现在显示在那个窗口中，因此在技术上是可见的。在无形的窗口中。

无论如何，请记住跟踪您的 Windows 人员！就这样。

# entity-framework - Entity Framework 4.1 Code First 中的多级继承

> ID：10459937
> 
> 赞同：1
> 
> 时间：2012-05-05T07:49:31.647
> 
> 标签：entity-framework, inheritance, ef-code-first

等级制度：

*   抽象包
*   服务器包：包
*   客户端包：服务器包

就 EF CF 而言，所有三个表都具有一对一的关系。我是否选择了正确的构图来满足以下情况？

设想：

*   抽象包是由服务器根据请求创建的，具有唯一的 Guid。
*   服务器创建 ServerPackage 并发送给客户端。
*   客户端处理 ServerPackage 并创建一个 ClientPackage 以发送回服务器。

换句话说，一旦一个包请求进来，一个 ServerPackage 和一个 ClientPackage 应该被创建。我假设这不起作用，因为我需要将两个包都绑定到同一个抽象包 ID。

我应该使用组合而不是继承并强制建立一对一的关系吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:26:33.547

只有当你所有的包都是同一个实例时它才会起作用=>当服务器收到请求时它必须立即创建`ClientPackage`。它无法创建`Package`，因为`Package`它是抽象的，如果它只创建`ServerPackage`，您将无法`ClientPackage`使用相同的 ID 创建。所以看起来你的整个继承在这种情况下都是多余的。

如果您想遵循您的工作流程，您需要组合。

# python - 在cygwin中保存文件的位置

> ID：10459939
> 
> 赞同：2
> 
> 时间：2012-05-05T07:49:48.543
> 
> 标签：python, cygwin, save

有史以来最愚蠢的问题：我正在尝试在我的 pc 笔记本电脑上通过 cygwin 使用 python - 我有一个文件 (foo.py) 但 python 找不到它。它给我的错误是：

```
$ chmod +x foo.py
chmod: cannot access `foo.py': No such file or directory 
```

Cygwin 文件夹中是否有我需要保存 foo.py 的特殊位置？谢谢！美联社

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T14:45:34.717

不是python找不到你的文件，而是chmod命令。Cygwin中C盘映射到/cygdrive/c，D盘映射到/cygdrive/d等等。

运行 chmod 时是否与文件位于同一目录中？

如果您的文件位于 C:\mycode\python\foo.py 那么您应该先更改到该目录 -

```
$ cd c:
$ cd mycode/python/ 
```

或者正如上面提到的@Ahmed，您也可以将命令运行为

```
$ chmod +x /cygdrive/c/mycode/python/foo.py 
```

但是你只需要 chmod 如果你的 python 脚本以

```
#!/bin/python 
```

要执行这样的文件，你会说

```
$ /cygdrive/c/mycode/python/foo.py 
```

或者如果您在同一目录中

```
./foo.py 
```

如果 python 脚本的第一行不是“#!/bin/python”，那么你可以跳过 chmod 并输入

```
python /cygdrive/c/mycode/python/foo.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:00:42.790

你去右击 foo.py 找出它的完整路径然后这样做：

```
chmod +x foos-full-directory/foo.py 
```

这应该对你有用，顺便说一句，它不是 Python 问题，它是你的密码，而不是 foo.py 工作目录，你甚至没有在命令中使用 python 字。

# python - 使用 Python 逐块切片数据

> ID：10459941
> 
> 赞同：0
> 
> 时间：2012-05-05T07:50:05.677
> 
> 标签：python, line, block, slice

大家，我有一个大文件，格式如下。数据采用“块”格式。一个“块”包含三行：时间 T、用户 U 和内容 W。例如，这是一个块：

```
T   2009-06-11 21:57:23
U   tracygazzard
W   David Letterman is good man 
```

因为我只会使用包含特定关键字的块。我将原始海量数据中的数据逐块切片，而不是将整个数据转储到内存中。每次读入一个块，如果该行内容包含“bike”一词，则将该块写入磁盘。

您可以使用以下两个块来测试您的脚本。

```
T   2009-06-11 21:57:23
U   tracygazzard
W   David Letterman is good man

T   2009-06-11 21:57:23
U   charilie
W   i want a bike 
```

我试图逐行做这项工作：

```
data = open("OWS.txt", 'r')
output = open("result.txt", 'w')

for line in data:
    if line.find("bike")!= -1:
    output.write(line) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:20:13.407

由于块的格式是恒定的，您可以使用列表来保存块，然后查看是否`bike`在该块中：

```
data = open("OWS.txt", 'r')
output = open("result.txt", 'w')

chunk = []
for line in data:
    chunk.append(line)
    if line[0] == 'W':
        if 'bike' in str(chunk):
            for line in chunk:
                output.write(line)
        chunk = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:08:52.037

您可以使用正则表达式：

```
import re
data = open("OWS.txt", 'r').read()   # Read the entire file into a string
output = open("result.txt", 'w')

for match in re.finditer(
    r"""(?mx)          # Verbose regex, ^ matches start of line
    ^T\s+(?P<T>.*)\s*  # Match first line
    ^U\s+(?P<U>.*)\s*  # Match second line
    ^W\s+(?P<W>.*)\s*  # Match third line""", 
    data):
        if "bike" in match.group("W"):
            output.write(match.group())  # outputs entire match 
```

# ruby-on-rails-3 - Activeadmin - 未定义的方法“batch_action”？

> ID：10459946
> 
> 赞同：2
> 
> 时间：2012-05-05T07:50:21.030
> 
> 标签：ruby-on-rails-3, activeadmin

我正在尝试使用 activeadmin 的 batch_action，这样我就可以对多个记录运行操作。但是，当尝试运行我的 rails 服务器时，出现以下错误。

```
undefined method `batch_action' for #<ActiveAdmin::ResourceDSL:0xb11f980> (NoMethodError) 
```

这是 activeadmin 资源代码：

```
ActiveAdmin.register Product do

batch_action :destroy, false

filter :name

index do
    selectable_column
  column :name
  default_actions
end

controller do
    def current_company
        @current_company
    end
end

end 
```

我不确定我在哪里弄错了 - 我需要针对记录显示相应的复选框，然后定义一个批处理操作。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:42:45.347

得到了答案 :) 是我的 gemfile 中的错误条目。

[https://github.com/gregbell/active_admin/issues/1302](https://github.com/gregbell/active_admin/issues/1302)

# ruby - 耙子中止！安装 Octopress 的问题

> ID：10459949
> 
> 赞同：6
> 
> 时间：2012-05-05T07:50:35.223
> 
> 标签：ruby, gem, rake, bundle

我正在尝试在我的 Windows 上安装 Octopress。根据他们[网站](http://octopress.org/docs/setup/)上的教程。但是当我输入命令时

```
rake install 
```

它给了我以下错误

```
C:\Documents and Settings\admin\octopress>rake install
rake aborted!
You have already activated rake 0.9.2.2, but your Gemfile requires rake 0.9.2\. U
sing bundle exec may solve this.

(See full trace by running task with --trace) 
```

正如错误所说，我需要安装 rake 0.9.2 我尝试使用以下命令进行操作。

```
C:\Documents and Settings\admin\octopress>gem install rack -v=0.9.2.0
ERROR:  Could not find a valid gem 'rack' (= 0.9.2.0) in any repository
ERROR:  Possible alternatives: rack 
```

我的电脑上已经安装了 Ruby & Gems。但我无法弄清楚如何解决这个问题。我什至如何使用“bundle exec”来安装 Octopress ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T08:07:29.137

您可能需要以这种方式使用 bundle exec

```
bundle exec rake install 
```

这可能只是解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:34:15.163

我解决了这个问题，`bundle update`
这是一个依赖问题，没什么大不了的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:33:16.637

第一次拼写为 rake，第二次拼写为 rack

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:58:22.980

首先更新文档说，

```
bundle exec rake install 
```

然后更新 Gemfile.lock ，

```
bundle update 
```

# c++ - 对 WinRT 接口的动态调用

> ID：10459953
> 
> 赞同：7
> 
> 时间：2012-05-05T07:51:08.763
> 
> 标签：c++, c, windows-runtime

我想从 C 或 C++ 对 WinRT 对象进行动态（即基于反射）调用。我将假设我在运行时有可用的 winmd 文件，这样我就可以找出方法是什么以及它们采用什么参数。

在 OLE 自动化中，IDispatch 可用于进行实际调用。但是，WinRT 对象不支持 IDispatch。那我怎么打电话？根据处理器的 COM 调用约定，我是否需要某种允许动态传递参数的 FFI 库？还是我真的需要“静态”类/结构声明（对于 C/C++）？

*编辑*：目标系统是一个地铁风格的应用程序。这排除了涉及被禁止 API 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:53:41.740

当然可以构建您所描述的内容 - 在幕后，这正是 Chakra Javascript 引擎对 winrt 元数据所做的事情，并且类似于 CLR 所做的事情。这两种语言预测都会在运行时发现 API，并构建低级程序集来实现这一点。

这是很多工作，并不是特别令人愉快，但在技术上绝对可行。Windows 元数据包含为 API 和结构创建存根所需的所有信息。

# iphone - iPhone应用程序的始终跟踪用户位置算法

> ID：10459955
> 
> 赞同：0
> 
> 时间：2012-05-05T07:51:20.957
> 
> 标签：iphone, geolocation

我正在开发一个一直跟踪用户位置的 iphone 应用程序。

该位置可以精确到几米（高达 400-500）。并且应该至少每小时更新一次（即使用户的位置没有变化，我也想跟踪它）

我想知道最好的方法是什么。

如果我使用 CLLocation，我想每小时使用一次 startupdatinglocation，然后使用 startmonitoringsignificantlocationchanges。您认为这是实现最小电池消耗的最佳方法吗

另一种选择是使用geoloqi之类的地理定位api，但我认为一直使用实时跟踪模式会导致电池耗尽，而被动模式的准确性不够好（据我所知，它提供的准确性就像你在哪个城市一样）

如果有人对我可以使用的推荐 api 或使用 CLLocation 解决我的问题的有效算法有任何想法，我会很高兴。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:01:02.437

您可以通过维护一个从 GPS 软件读取位置的变量来跟踪位置，并使用每秒读取位置的计时器或您想要的任何精度来编写算法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:12:28.927

试试这个代码，我认为这对你有用。在 .h 文件中添加此代码

```
#import "CoreLocation/CoreLocation.h"
#import "MapKit/MapKit.h"

@interface AddressAnnotation : NSObject<MKAnnotation>
{
 CLLocationCoordinate2D coordinate;

  NSString *mTitle;
  NSString *mSubTitle;
}
 @end
 @interface NearestPropertyMatchViewController : UIViewController<MKMapViewDelegate> {

 CLLocationManager *locationManager;
 IBOutlet MKMapView *searchMap;

 NSMutableArray *searchListArray;
 AddressAnnotation *addAnnotation;

}

-(CLLocationCoordinate2D) addressLocation:(NSString *)str;
@property (nonatomic, retain) CLLocationManager *locationManager;

@end 
```

在 .m 文件中添加此代码。

```
 - (void)viewDidLoad
   {
     [super viewDidLoad];
     locationManager = [[CLLocationManager alloc] init];
     locationManager.delegate = self;
      locationManager.desiredAccuracy = kCLLocationAccuracyBest;
     locationManager.distanceFilter = kCLDistanceFilterNone;
     [locationManager startUpdatingLocation];

     CLLocation *location = [locationManager location];

     CLLocationCoordinate2D coordinate = [location coordinate];

      NSString *latitude = [NSString stringWithFormat:@"%f", coordinate.latitude];
      NSString *longitude = [NSString stringWithFormat:@"%f", coordinate.longitude];

     NSLog(@"dLatitude : %@", latitude);
     NSLog(@"dLongitude : %@",longitude);
     MKCoordinateRegion region;
       MKCoordinateSpan span;
      span.latitudeDelta=100;
     span.longitudeDelta=100;
     region.span=span;

for(int i=0;i<[regestrationArray  count];i++)
{
    CLLocationCoordinate2D location = [self addressLocation:[regestrationArray objectAtIndex:i]];

    region.center=location;
    addAnnotation = [[AddressAnnotation alloc] initWithCoordinate:location];
    [searchMap addAnnotation:addAnnotation];

    [searchMap setRegion:region animated:TRUE];
    [searchMap regionThatFits:region];   
    }

   -(CLLocationCoordinate2D) addressLocation :(NSString *)str
    {
     NSError* error = nil;
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                       [str  stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];
NSArray *listItems = [locationString componentsSeparatedByString:@","];

double latitude = 0.0;
double longitude = 0.0;

if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
    latitude = [[listItems objectAtIndex:2] doubleValue];
    longitude = [[listItems objectAtIndex:3] doubleValue];
}
else {
    //Show error
}
CLLocationCoordinate2D location;
location.latitude = latitude;
location.longitude = longitude;
NSLog(@" lati=%f lon=%f",latitude,longitude);

return location;

   }

    - (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
   {
MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];
annView.pinColor = MKPinAnnotationColorGreen;
annView.animatesDrop=TRUE;
annView.canShowCallout = YES;
annView.calloutOffset = CGPointMake(-5, 5);
return annView;
   } 
```

# performance - 在 mac osx 上刷新时 Codeigniter 加载缓慢

> ID：10459956
> 
> 赞同：1
> 
> 时间：2012-05-05T07:51:41.617
> 
> 标签：performance, codeigniter

我最近在 mac os x 10.7 上安装了全新的副本，第一次加载非常慢（0.08 秒），然后短暂刷新，之后加载速度更快（0.0065 秒）以及之后的任何后续请求。它可以正常工作几分钟和然后在 1 分钟后它会再次执行此操作。它不使用数据库会话和其他没有 codeigniter 加载非常快的虚拟主机。我用它来安装我的开发环境 [http://akrabat.com/php/setting-up-php-mysql-on-os-x-10-7-lion/](http://akrabat.com/php/setting-up-php-mysql-on-os-x-10-7-lion/) 和 php 我的管理员 [http://www。 djangoapp.com/blog/2011/07/24/installing-phpmyadmin-on-mac-os-x-lion/](http://www.djangoapp.com/blog/2011/07/24/installing-phpmyadmin-on-mac-os-x-lion/) （我在linux或windows上从来没有遇到过这个问题）

它可能与什么有关？从哪里开始调试这个问题？开发的时候真的很烦。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:17:03.170

听起来像是一个短时缓存问题？

即您第一次访问该页面时，它正在被加载到缓存中，然后所有后续请求都使用缓存，直到它在 1 分钟后过期。

检查你的标题

# java - 如何查找对象分配的总内存

> ID：10459958
> 
> 赞同：5
> 
> 时间：2012-05-05T07:51:53.130
> 
> 标签：java, memory-management, garbage-collection

> **可能重复：**
> [在 Java 中，确定对象大小的最佳方法是什么？](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)

如果我们在一个类中创建实例变量和实例方法，那么如何找出为该类的每个对象分配的总内存，如下所示，例如，我认为它是一些变量`(a,b)`大小和方法区域大小（显示）。是真的吗？写在类中的主要方法区域怎么样。

例如：

```
class A {  
    int a;
    float b;
    void display()
    {  
       ---
    }

    public static void main(String a[])
    { 
        A obj=new A();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T07:55:51.780

简短的回答是你不需要知道，除非你知道这是一个问题。

更长的答案是它将使用大约 16 个字节的对象标头，每个字段 4 个字节（并将总数四舍五入到 8 个字节的边界），即 24 个字节。

局部变量，例如引用是在堆栈上分配的，通​​常不计算在内。

您通常不关心大小的原因是 1 MB 值得您花费大约 2 秒的时间（将内存的零售价与最低工资进行比较）这意味着您提出问题所花费的时间远远超过您可能保存的内存值（在这种情况下）

[一个 4 GB 模块的成本为 18 英镑，最低工资为 8.50 英镑，因此 1 GB 大约值 0.5 小时。1 MB 大约值 2 秒。]

换句话说，如果一个简单的更改不能为您节省 1 MB 的内存，您可以更好地使用它，那么您可能会浪费您的时间。

这同样适用于移动设备，但程度较小（内存成本更高，如果将其部署到数千台设备，节省几百字节的总成本可能很重要）

`long`这样做的结果是，代替`int`或`double`代替（它们都有一个额外的字符）所花费`float`的时间可能比它使用的额外内存价值高出数千倍。但是，我仍然建议几乎总是使用 double 而不是 float，并且通常使用 long 而不是 int，因为如果它节省了一个错误，它将弥补您必须输入的额外字符。

* * *

测量对象使用了多少空间（或创建对象使用了多少内存）的最简单方法是关闭 TLAB`-XX:-UseTLAB`并使用 Runtime.totalMemory - freeMemory 测量创建对象前后的内存量。

但是，我更愿意等到数据结构出现在像 YourKit（VisualVM 是免费的）这样的分析器中，然后我才认为这是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:58:35.317

您可以使用 java.lang.instrumentation 包：http: [//java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/Instrumentation.html](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/instrument/Instrumentation.html)

编译这个类并将其放入一个 JAR 中：

```
import java.lang.instrument.Instrumentation;

public class ObjectSizeFetcher {
    private static Instrumentation instrumentation;

    public static void premain(String args, Instrumentation inst) {
        instrumentation = inst;
    }

    public static long getObjectSize(Object o) {
        return instrumentation.getObjectSize(o);
    }
} 
```

将以下内容添加到您的`MANIFEST.MF`:

```
Premain-Class: ObjectSizeFetcher 
```

使用`getObjectSize()`：

```
public class C {
    private int x;
    private int y;

    public static void main(String [] args) {
        System.out.println(ObjectSizeFetcher.getObjectSize(new C()));
    }
} 
```

调用文件使用`java -javaagent:ObjectSizeFetcherAgent.jar C`

# c# - 解码引用可打印正确

> ID：10459964
> 
> 赞同：4
> 
> 时间：2012-05-05T07:53:54.030
> 
> 标签：c#, .net

我有以下字符串：

```
=?utf-8?Q?=5Bproconact_=2D_Verbesserung_=23=32=37=39=5D_=28Neu=29_Stellvertretungen_Benutzerrecht_=2D_andere_k=C3=B6nnen_f=C3=BCr_andere_Stellvertretungen_erstellen_=C3=A4ndern_usw=2E_dadurch_ist_der_Schutz_der_Aktivi=C3=A4ten_Mails_nicht_gew=C3=A4hrt=... 
```

这是一个编码

```
[proconact-Verbesserung #279] (Neu) Stellvertretungen Benutzerrecht - andere können für andere Stellvertretungen erstellen ändern usw. dadurch ist der Schutz der Aktiviäten Mails nicht gewährt. 
```

我正在寻找一种方法来解码引用的字符串。

我试过了：

```
private static string DecodeQuotedPrintables(string input, string charSet) {
    Encoding enc = new ASCIIEncoding();
    try {
        enc = Encoding.GetEncoding(charSet);
    } catch {
        enc = new UTF8Encoding();
    }

    var occurences = new Regex(@"(=[0-9A-Z]{2}){1,}", RegexOptions.Multiline);
    var matches = occurences.Matches(input);

    foreach (Match match in matches) {
        try {
            byte[] b = new byte[match.Groups[0].Value.Length / 3];
            for (int i = 0; i < match.Groups[0].Value.Length / 3; i++) {
                b[i] = byte.Parse(match.Groups[0].Value.Substring(i * 3 + 1, 2), System.Globalization.NumberStyles.AllowHexSpecifier);
            }
            char[] hexChar = enc.GetChars(b);
            input = input.Replace(match.Groups[0].Value, hexChar[0].ToString());
        } catch { ;}
    }
    input = input.Replace("?=", "").Replace("=\r\n", "");

    return input;
} 
```

当我打电话时（其中 s 是我的字符串）

```
var x = DecodeQuotedPrintables(s, "utf-8"); 
```

这将返回

```
=?utf-8?Q?[proconact_-_Verbesserung_#_(Neu)_Stellvertretungen_Benutzerrecht_-_andere_können_für_andere_Stellvertretungen_erstellen_ändern_usw._dadurch_ist_der_Schutz_der_Aktiviäten_Mails_nicht_gewährt=... 
```

我该怎么办，也会删除_ 以及开头`=?utf-8?Q?`和结尾？`=..`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:14:31.190

您尝试解码的文本通常位于 MIME 标头中，并根据以下 Internet 标准中定义的规范进行编码：[RFC 2047：MIME（多用途 Internet 邮件扩展）第三部分：非 ASCII 文本的消息标头扩展](https://www.rfc-editor.org/rfc/rfc2047).

GitHub 上有这样一个解码器的示例实现；也许你可以从中汲取一些想法：[RFC2047 decoder in C#](https://github.com/petrohi/Stratosphere.Imap/blob/master/Stratosphere/Imap/RFC2047Decoder.cs)。

您还可以使用此在线工具来比较您的结果：[在线 MIME 标头解码器](http://dogmamix.com/MimeHeadersDecoder/)。

请注意，您的示例文本不正确。该规范声明：

```
encoded-word = "=?" charset "?" encoding "?" encoded-text "?=" 
```

根据规范，任何编码的单词都*必须*以`?=`. 因此，您的样本必须从以下方面进行校正：

```
=?utf-8?Q?=5Bproconact_=2D_Verbesserung_=23=32=37=39=5D_=28Neu=29_Stellvertretungen_Benutzerrecht_=2D_andere_k=C3=B6nnen_f=C3=BCr_andere_Stellvertretungen_erstellen_=C3=A4ndern_usw=2E_dadurch_ist_der_Schutz_der_Aktivi=C3=A4ten_Mails_nicht_gew=C3=A4hrt= 
```

…到（滚动到最右边）：

```
=?utf-8?Q?=5Bproconact_=2D_Verbesserung_=23=32=37=39=5D_=28Neu=29_Stellvertretungen_Benutzerrecht_=2D_andere_k=C3=B6nnen_f=C3=BCr_andere_Stellvertretungen_erstellen_=C3=A4ndern_usw=2E_dadurch_ist_der_Schutz_der_Aktivi=C3=A4ten_Mails_nicht_gew=C3=A4hrt?= 
```

严格来说，您的样本也是无效的，因为它超过了对任何编码词施加的 75 个字符的限制；然而，大多数解码器倾向于容忍这种不一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-07T21:16:06.287

我已经测试了 5+ 的代码片段，这是有效的：我修改了正则表达式部分：

**测试线：**

```
 im sistemlerimizde bak=FDm =E7al=FD=FEmas=FD yap=FDlaca=F0=FDndan; www.gib.= 
```

**示例调用：**

```
 string encoding = "windows-1254";
    string input = "im sistemlerimizde bak=FDm =E7al=FD=FEmas=FD yap=FDlaca=F0=FDndan; www.gib.=";
    DecodeQuotedPrintables(input, encoding); 
```

**代码片段：**

```
 private static string DecodeQuotedPrintables(string input, string charSet)
    {

        System.Text.Encoding enc = System.Text.Encoding.UTF7;

        try
        {
            enc = Encoding.GetEncoding(charSet);
        }
        catch
        {
            enc = new UTF8Encoding();
        }

        ////parse looking for =XX where XX is hexadecimal
        //var occurences = new Regex(@"(=[0-9A-Z]{2}){1,}", RegexOptions.Multiline);
        var occurences = new Regex("(\\=([0-9A-F][0-9A-F]))", RegexOptions.Multiline);
        var matches = occurences.Matches(input);

        foreach (Match match in matches)
        {
            try
            {
                byte[] b = new byte[match.Groups[0].Value.Length / 3];
                for (int i = 0; i < match.Groups[0].Value.Length / 3; i++)
                {
                    b[i] = byte.Parse(match.Groups[0].Value.Substring(i * 3 + 1, 2), System.Globalization.NumberStyles.AllowHexSpecifier);
                }
                char[] hexChar = enc.GetChars(b);
                input = input.Replace(match.Groups[0].Value, hexChar[0].ToString());
            }
            catch
            { ;}
        }
        input = input.Replace("?=", "").Replace("=\r\n", "");

        return input;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-10T20:11:11.760

正如在标准类中提到的，[.NET](https://stackoverflow.com/questions/2226554/c-class-for-decoding-quoted-printable-encoding)就是为此目的而存在的。

```
string unicodeString =
            "=?UTF-8?Q?YourText?=";
        System.Net.Mail.Attachment attachment = System.Net.Mail.Attachment.CreateAttachmentFromString("", unicodeString);
        Console.WriteLine(attachment.Name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T08:56:05.983

按照我的评论，我建议

```
private static string MessedUpUrlDecode(string input, string encoding)
{
    Encoding enc = new ASCIIEncoding();

    try
    {
        enc = Encoding.GetEncoding(charSet);
    }
    catch
    {
        enc = new UTF8Encoding();
    }

    string messedup = input.Split('?')[3];
    string cleaned = input.Replace("_", " ").Replace("=...", ".").Replace("=", "%");

    return System.Web.HttpUtility.UrlDecode(cleaned, enc);
} 
```

假设源字符串的破坏是一致的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-05T08:05:16.283

我不太确定如何删除

```
=?utf-8?Q? 
```

除非它一直出现，否则你可以这样做：

```
input = input.Split('?')[3]; 
```

要摆脱尾随的“=”，您可以通过以下方式将其删除：

```
input = input.Remove(input.Length - 1); 
```

您可以通过用空格替换“_”来摆脱它：

```
input = input.Replace("_", " "); 
```

您可以在 DecodeQuotedPrintables 函数中使用这些代码。

希望这可以帮助！

# ruby-on-rails - CarrierWave 和嵌套表单 Gem 重新显示 :: HTML 文件输入图标

> ID：10459965
> 
> 赞同：2
> 
> 时间：2012-05-05T07:53:55.593
> 
> 标签：ruby-on-rails, nested-forms, carrierwave, html-input

我正在使用 CarrierWave 和 Nested Form Gem。使用 Carrierwave github 页面（https://github.com/jnicklas/carrierwave）上标题为“使上传工作跨表单重新显示”的部分，我能够成功存储缓存，这样即使用户犯了错误，然后文件被保存。我第一次点击页面并单击“上传文件”时，它可以工作并显示文件的名称以及指示已上传文件类型的小缩略图图标。

但是，文件输入按钮在重新显示时为空白，并且图标消失了。但是我知道它在那里，因为如果我再次提交有效信息并单独留下文件输入按钮，它会创建一个新资源。这是我的代码片段。

```
<%= nested_form_for @resource, :html=>{:multipart => true } do |f| %>
  <p>
      <%= f.label :title %><br />
      <%= f.text_field :title %>
  </p>

  <%= f.fields_for :attachments do |attachment_form|  %>
    <p>
        <%= attachment_form.label :file %>
        <% if !attachment_form.object.file.path.blank? %>
          <% file_info = get_cache_file_info attachment_form.object.file.path %>
          <%= image_tag(File.join('/tmp/cache/', file_info[:folder]))  #THIS DISPLAY CORRECTLY %>
        <% end %>
        <%= attachment_form.file_field :file %>
        <%= attachment_form.hidden_field :file_cache %>
    </p>
    <%= attachment_form.link_to_remove "Remove this attachment" %>
  <% end %>
  <%= f.link_to_add "Add attachment", :attachments %>
  <p><%= f.submit %></p>
<% end %> 
```

我想知道是否必须编辑 HTML 文件输入以显示图标，或者是否有其他 Rails 方式来处理这个问题。image_tag 也正确显示，但对于我的应用程序让用户上传文本文件，所以图像不是很有帮助。

提前致谢！

**更新** 我还尝试像这样设置“输入”标签的值：

```
<%= attachment_form.file_field :file, :value => "#{File.join(file_info[:folder], '/',attachment_form.object.file.identifier)}" %> 
```

那也没有用。“输入”标签的值设置正确，但仍显示为“未选择文件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T10:42:31.793

CarrierWave 的介绍并没有说明这一点，但听起来您的代码“正常”运行。缓存字段仅用于确保您的附件在有效提交后被保存。

[本文档](http://www.w3.org/TR/FileAPI/#dfn-filelist)解释了文件输入元素的 FileList 应该是只读的，大概是出于安全原因。

# android - Android SQLiteDatabase 通过 HashMap 访问

> ID：10459966
> 
> 赞同：2
> 
> 时间：2012-05-05T07:54:01.760
> 
> 标签：android, database, sqlite, hashmap

我试图在`SQLiteDatabase`我的应用程序中实现一个来存储数据。但是，我编写了一个测试项目来习惯`SQliteDatabase`. 它相当简单，但仍然无法正常工作。问题出现在代码之后（为 构建`GoogleAPI 7`）。

**SQLiteTestActicity ：**

```
package test.sqlite.db;

import test.sqlite.db.lib.DatabaseHandler;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SQLiteTestActivity extends Activity {

private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_SURENAME = "surename";
private static final String KEY_ADDRESS = "address";
private static final String KEY_PHONE = "phone";
private static final String KEY_UID = "uid";
private static final String KEY_TIME = "time";
private static final String KEY_COUNT = "count";
private static final String KEY_DATE = "date";
private static final String ORDERS_TABLE = "orders";

EditText inputName;
EditText inputSurename;
EditText inputAddress;
EditText inputUID;

Button addUserBTN;
Button getUserDetailsBTN;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final DatabaseHandler db = new DatabaseHandler(getBaseContext());

    inputName = (EditText) findViewById(R.id.inputName);
    inputSurename = (EditText) findViewById(R.id.inputSurename);
    inputAddress = (EditText) findViewById(R.id.inputAddress);
    inputUID = (EditText) findViewById(R.id.inputUID);

    addUserBTN = (Button) findViewById(R.id.addUserBTN);
    addUserBTN.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            try {

                String name = inputName.getText().toString();
                String surename = inputSurename.getText().toString();
                String address = inputAddress.getText().toString();
                String uid = inputUID.getText().toString();

                db.addUser(name, surename, address, uid);

                try {

                    Toast.makeText(getApplicationContext(), "Succes!",
                            Toast.LENGTH_LONG).show();
                    System.out.printf(name + "\n" + surename + "\n"
                            + address + "\n" + uid + "\n");

                } catch (NullPointerException e) {
                    e.printStackTrace();
                }
            } catch (NullPointerException e) {
                e.printStackTrace();
            }
        }

    });

    getUserDetailsBTN = (Button) findViewById(R.id.getUserDetailsBTN);
    getUserDetailsBTN.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            try {

                System.out.println(db.getUserDetails().toString());

            } catch (NullPointerException e) {
                e.printStackTrace();
            }

        }

    });

}
} 
```

**数据库处理程序：**

```
package test.sqlite.db.lib;

import java.util.HashMap;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;
private static final String USER_TABLE = "userT";
static String DATABASE_NAME = "TAXIDB";

private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_SURENAME = "surename";
private static final String KEY_ADDRESS = "address";
private static final String KEY_PHONE = "phone";
private static final String KEY_UID = "uid";
private static final String KEY_TIME = "time";
private static final String KEY_COUNT = "count";
private static final String KEY_DATE = "date";
private static final String ORDERS_TABLE = "orders";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_USER_TABLE = "CREATE TABLE IF NOT EXISTS " + USER_TABLE
            + "(" + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_SURENAME + " TEXT," + KEY_ADDRESS + " TEXT," + KEY_UID
            + " TEXT" + ")";
    db.execSQL(CREATE_USER_TABLE);

//      String CREATE_ORDERS_TABLE = "CREATE TABLE IF NOT EXISTS "
//              + ORDERS_TABLE + "(" + KEY_ID
//              + " INTEGER PRIMARY KEY AUTOINCREMENT," + ")";
//      db.execSQL(CREATE_ORDERS_TABLE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

public void addUser(String name, String surename, String address, String uid) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_SURENAME, surename); // Surename
    values.put(KEY_ADDRESS, address);
    values.put(KEY_UID, uid);

    // Inserting Row
    db.insert(USER_TABLE, null, values);
    db.close(); // Closing database connection
}

public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String selectQuery = "SELECT  * FROM " + USER_TABLE;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("name", cursor.getString(1));
        user.put("surename", cursor.getString(2));
        user.put("address", cursor.getString(3));
        user.put("uid", cursor.getString(4));
    }
    cursor.close();
    db.close();
    // return user
    return user;
}
} 
```

**问题 ：**

每当我按下时，`getUserDetailsBTN`我都会收到以下信息：

**日志猫：**

```
 {uid=android.widget.EditText@40523fa8, address=android.widget.EditText@40523418, surename=android.widget.EditText@40522888, name=android.widget.EditText@40520548} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:18:19.550

在这部分替换你的代码

```
 @Override
    public void onClick(View v) {
        try {

            System.out.println(db.getUserDetails().toString());

        } catch (NullPointerException e) {
            e.printStackTrace();
        }

    }

});` 
```

通过此代码

```
 @Override
    public void onClick(View v) {
        try {
             HashMap<String,String>user = db.getUserDetails();
             //then loop on the inputs of the cursor inside the hashmap and print them successfully
            System.out.println(db.getUserDetails().toString());

        } catch (NullPointerException e) {
            e.printStackTrace();
        }

    }

}); 
```

# clojure - Clojure：enlive-html 中的动态表单加载

> ID：10459968
> 
> 赞同：2
> 
> 时间：2012-05-05T07:54:49.703
> 
> 标签：clojure

我需要动态加载一个复选框并根据某个值设置其状态....

这是我到目前为止所做的......

```
(defsnippet customer-config-setup html-customer-configuration [:div#div_game_setup_container ]
  [result-rows]
  [:div#div_gameprefix]
  (clone-for [idv (map vector (iterate inc 0) result-rows)]
    [:button#btn_gameprefix ]
    (do->

    #(if (= (result-rows :active) 0)
       ((set-attr :checked  :val )%)%)
      (content (str ((idv 1) :gameprefix )))

    )
  )

) 
```

并且

```
(defsnippet customer-config-approval html-customer-configuration [:div#div_auto_approval ]
  [result-rows]
  [:tr#tr_auto_approval]
  (clone-for [idv (map vector (iterate inc 0) result-rows)]
    [:td#td_auto_approvaltext ] (content (str ((idv 1) :settings_caption )))
    [:td#td_auto_checkbox ] (set-attr :checked  :val )
    )
  ) 
```

但由于某种原因，它们不起作用......可能是什么问题......有没有办法在这里设置复选框状态......？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:08:54.147

抱歉，我错过了一些东西..`(((idv 1))`在此处获取值的同时添加是必要的...我真的没有足够的时间去挖掘并找到甚至需要这样做的原因...因为`library/clojure`资源和教程太少了很难找到这些事情的理由......

```
(defsnippet customer-config-setup html-customer-configuration [:div#div_game_setup_container ]
  [result-rows]
  [:div#div_gameprefix]
  (clone-for [idv (map vector (iterate inc 0) result-rows)]
    [:button#btn_gameprefix ]
    (do->

    #(if (= (((idv 1)result-rows :active)) 0)
       ((set-attr :checked  :val )%)%)
      (content (str ((idv 1) :gameprefix )))

    )
  )

) 
```

# html - HTML5 存储分区或表

> ID：10459973
> 
> 赞同：1
> 
> 时间：2012-05-05T07:55:39.973
> 
> 标签：html

在大多数 HTML5 存储规范（或特别是 IE10s/Windows 8 Metro）的实现中是否有表（在关系数据库中）或分区的概念？我想存储多种类型的数据，并希望轻松访问它们。例如，检索 A 类型的所有项目（或从表/分区 A）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:04:00.343

有几种 HTML5 存储技术，如下所述：

[http://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

不幸的是，Internet Explorer 目前不支持索引数据库。

# java - CPU 资源和时钟周期：System.out.println 或递增标志

> ID：10459976
> 
> 赞同：3
> 
> 时间：2012-05-05T07:55:53.120
> 
> 标签：java, android, optimization, micro-optimization

为了调试我们放置的 Android 代码`System.out.println(string)`，我们可以知道一个函数被调用了多少次。另一种方法是放置一个标志并在每次函数调用后继续增加它。然后在最后打印 flag by 的最终值`System.out.println(...)`。（实际上在我的应用程序中，该函数将被调用数千次）

我的问题是：就***CPU 资源***和***时钟周期***而言，哪个更轻：增量操作还是 System.out.println？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:04:14.847

增量将*变得*更加高效——尤其是如果您实际上有任何地方可以输出该输出。想想`System.out.println`vs 递增变量所需的所有操作。当然，影响是否真的*显着*是另一回事——如果你的方法已经做了很多工作，那么`System.out.println`调用实际上可能不会有太大的不同。但是，如果您只想知道它被调用了多少次，那么保持计数器比查看日志更有意义，IMO。

我建议使用[`AtomicLong`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html)or[`AtomicInteger`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)而不是仅仅使用原始变量，因为这样您可以获得简单的线程安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:14:37.500

就时钟周期而言，增量会*快得多*。假设增量非常接近硬件增量，它只需要几个时钟周期。这意味着你每秒可以做数百万。

另一方面 System.out.println 将不得不调用操作系统。使用标准输出。转换字符等。这些步骤中的每一个都需要很多很多时钟周期。

回到您最初的问题，如果您正在查看函数被调用的次数，您可以尝试运行分析器 - 有各种桌面和 Android 解决方案可用。这样你就不需要用计数/打印来污染你的代码，并且你可以保持你的生产代码精简。

再进一步思考，为什么你想知道函数被调用的确切次数？如果您担心缺陷，请考虑编写一些单元测试，以准确证明函数被调用了多少次。如果您担心性能，或许可以结合分析器查看负载测试技术。

# c# - 在注册表中查找应用程序路径

> ID：10459977
> 
> 赞同：4
> 
> 时间：2012-05-05T07:55:55.167
> 
> 标签：c#, .net

我需要计算机上已安装应用程序的列表及其路径目录，我发现：

```
 //Registry path which has information of all the softwares installed on machine
    string uninstallKey = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";
    using (RegistryKey rk = Registry.LocalMachine.OpenSubKey(uninstallKey))
    {
        foreach (string skName in rk.GetSubKeyNames())
        {
            using (RegistryKey sk = rk.OpenSubKey(skName))
            {
                // we have many attributes other than these which are useful.
                Console.WriteLine(sk.GetValue("DisplayName") + 
            "  " + sk.GetValue("DisplayVersion"));
            }

        }
    } 
```

我如何获得路径？我试过`sk.GetValue("DisplayPath")`了，但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:06:28.733

每个软件都有不同的 InstallLocation 名称，如果它存在的话。

将永远是的一件事是`UninstallString`，它返回卸载程序 (exe) 的路径，您可以从中删除目录。

但是，您应该知道，如果您使用 HKEY_CURRENT_USER，您不会在那里获得所有已安装的程序。

您应该通过 HKEY_LOCAL_MACHINE。

因此，您正在寻找的代码是：

```
string uninstallExePath = sk.GetValue("UninstallString");
DirectoryInfo directory = new FileInfo(uninstallExePath).Directory;

string directoryPath = directory.FullName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:22:03.487

为了获得路径，我发现：`GetValue("InstallLocation")`

这是可行的，但是对于这么多的价值，它会得到“空”或“”。

# macos - Problems with loading native library/missing methods: no ttJdbcCS in java.library.path

> ID：10459979
> 
> 赞同：2
> 
> 时间：2012-05-05T07:56:18.873
> 
> 标签：macos, jdbc, oracle-sqldeveloper, timesten

Iam facing one problem while connecting the timesten client to the server The SQL Exception which Iam getting is pasted below:-

Problems with loading native library/missing methods: no ttJdbcCS in java.library.path

I am working with MAC OS X 10.7.2 and my timesten client version is 11.2.1.0

I have also changed the Java Preferences from 64-bit to 32-bit but still whenever i tried to connect with the SQL Developer it gives me the above error.

Please help me as it is required for my graduation project!!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:31:00.547

I don't know OS X. On linux I use next

*   > export LD_LIBRARY_PATH=/opt/TimesTen/timesten/lib/

(directory where ttJdbcCS.so located)

*   Java must be same "bithes" (32 or 64) as TimesTen installation

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:54:52.897

I solved the by doing the following:-

The key things you need to be sure to do (in a terminal window) are:

1.  Be sure to . in the TimesTen environment script /bin/ttenv.sh to set the full TT environment.

2.  Change directory to SQLDeveloper.app/Contents/Resources/sqldeveloper

3.  Run 'sh sqldeveloper.sh -J-d32'

and all should be fine.

Thanks all for their help!!!!

# javascript - 返回十进制格式1的JS函数

> ID：10459980
> 
> 赞同：4
> 
> 时间：2012-05-05T07:56:44.863
> 
> 标签：javascript

我编写了一个**to_money函数，以便格式化****sub_total**函数中的 'Price' 'Quantity' 和 'Total'并附加两个零 - 所以 2 变为 2.00，函数在这里：

```
 to_money: function(amount) {
      return Number(amount).toFixed(2) 
    },

sub_total: function() {
 var In = this
 return $$('.item').inject(0, function(sum, row) {
  var quantity = Number($F('Item' + row.id + 'Quantity'))
  var price = Number($F('Item' + row.id + 'Price'))
  var line_total = quantity * price
 $('Item' + row.id + 'Quantity').value = In.to_money(quantity) 
  $('Item' + row.id + 'Price').value = In.to_money(price)
  $('Item' + row.id + 'Total').update('£' + In.to_money(line_total)) In.to_money(line_total)) 
  return sum + line_total 
 }) 
```

我如何编写一个类似于格式化价格的函数“to money”的函数，而是一个格式化数量的函数，以确保在没有输入输入的情况下将默认小数点 1 作为数量的前缀。

因此函数**sub_total**中的行将调用新函数以在数量上运行：

```
 $('Item' + row.id + 'Quantity').value = In.to_decimal(quantity) 
```

函数看起来像这样吗？

```
to_decimal: function(amount) {
          return Number(amount).toFixed(0) 
        }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:12:09.243

尝试

```
to_decimal: function(amount) {
          var n = Number(amount);
          return (n && n>0 ? n : 1).toFixed(2);
}
In.to_decimal('');               //=> 1.00
In.to_decimal('bogusinput');     //=> 1.00
In.to_decimal(0);                //=> 1.00
In.to_decimal('23.1');           //=> 23.10
//note: Number autotrims the parameter
In.to_decimal('          45.3'); //=> 45.30 
```

# charts - jqplot - 图表未正确显示 x 轴

> ID：10459983
> 
> 赞同：2
> 
> 时间：2012-05-05T07:57:30.643
> 
> 标签：charts, jqplot

我有以下代码使用 jqPLot 生成图表，我无法弄清楚为什么它没有正确显示 x 轴

```
 jQuery(document).ready(function(){
            $data = [['2012-03-03',1,'03 Mar 12'],['2012-03-06',4,'06 Mar 12'],['2012-03-07',1,'07 Mar 12'],['2012-03-08',1,'08 Mar 12'],['2012-03-15',2,'15 Mar 12'],['2012-03-18',1,'18 Mar 12'],['2012-03-21',3,'21 Mar 12'],];
            jQuery.jqplot.config.enablePlugins = true;
            jQuery.jsDate.config.defaultCentury = 2000;
            jQuery.jqplot("chartdiv",[$data],
            {
                series:[{renderer:jQuery.jqplot.BarRenderer}],
                seriesDefaults: {
                    showMarker:true,
                    pointLabels: { show:true },
                    rendererOptions: { barMargin:35}
                },
                axes :{
                    xaxis :{
                        renderer :jQuery.DateAxisRenderer,
                        min : '2012-03-01'
                    }
                }
            }
        );
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:45:36.897

我想我明白了。试一试后，我注意到在你第一次约会之后`NaN`，你的意思是“没有正确显示轴”吗？

所以问题出在`jqplot.`你在.`jQuery``DateAxisRenderer``renderer :jQuery.DateAxisRenderer`

[现在它看起来很好，正如这个小提琴所示。](http://jsfiddle.net/Boro/hC88c/)

# objective-c - ios UIview 在视图中

> ID：10459984
> 
> 赞同：1
> 
> 时间：2012-05-05T07:57:41.330
> 
> 标签：objective-c, ios

我有一个 uiview，它有我所有的按钮，它有它的控制器。如何使用界面构建器在我的所有 uiviews 中包含按钮视图？单击时按钮必须起作用。目的是提高可维护性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:26:04.157

您可以像这样在界面构建器中创建自定义 UIView： [Loading custom UIView from nib, all subviews contains in nib are nil?](https://stackoverflow.com/questions/7588066/loading-custom-uiview-from-nib-all-subviews-contained-in-nib-are-nil)

然后通过添加一个普通的 UIView 并将类更改为您的子类，将您的自定义视图添加到 IB 中的其他视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T09:28:27.173

[Try this](https://stackoverflow.com/questions/2945910/build-xib-interface-builder-and-load-them-as-subview-in-iphone). I'm not sure that adding UIView in Interface Builder will work, but adding subview programmatically always works.

# delphi - Delphi 7，在删除组件时将 dll 添加到应用程序目录

> ID：10459986
> 
> 赞同：4
> 
> 时间：2012-05-05T07:58:05.897
> 
> 标签：delphi, custom-component, delphi-2006

我正在开发一个组件`delphi 7`，`delphi 2006`组件使用一个`.pas` （不是我的）文件，该文件需要一个`DLL`文件**存在**于应用程序目录中。

可以将`DLL`文件嵌入到组件中，这样当用户将其放在表单上或在运行时创建它时，`DLL`会将其放置在应用程序目录中吗？

**目前**

1）我告诉用户将`DLL`文件放在应用程序目录中。

2）`DLL`在 Resources 中添加文件，以便在创建时，我可以将其`DLL`放入应用程序目录中？来自[delphidabbler_embed_resource](http://www.delphidabbler.com/zip/demos/rcdatademo.zip)。这是我用

```
 {Drop the Resource..!!!}

     procedure DropDllToApplicationDirectOry(applicationPath : string);
     var
           RS: TResourceStream;
     begin
           // Create resource stream
          RS := TResourceStream.CreateFromID(HInstance, 100, RT_RCDATA);
     try
         //  applicationPath : example  c:\MyTestProject Lee\
        if DirectoryExists(applicationPath) then         RS.SaveToFile(applicationPath+'myDllFileWhichIsNeeded.dll')
     finally
     // Free the stream
     RS.Free;
    end;
  end; 
```

这会将`DropDllToApplicationDirectOry` 资源从`{$RmyDllFileWhichIsNeeded.dll.RES}`and drope 带到该位置，但是

`DropDllToApplicationDirectOry`当我将组件放在表单上时如何调用它？

我尝试`initialization`了该组件，但没有复制 DLL，所以我得到了错误 ![在此处输入图像描述](../Images/5d887d03b858885952cc4e812a47dd5e.png)

**编辑** 对于当`RXControls`我们`TRxClock`放弃时钟运行在此表单上时，时钟开始运行（显示当前时间）......所以我尝试了这个

```
 constructor Tmycomponeny.Create(AOwner: TComponent);
   begin
      inherited Create(AOwner);
      {add dll}
      DropDllToApplicationDirectOry(ExtractFilePath(Application.ExeName));
  end; 
```

但这不起作用..

的代码`RXControls`

```
 constructor TRxClock.Create(AOwner: TComponent);
  begin
    inherited Create(AOwner);
    if not Registered then begin
     ClockInit;
    Registered := True;
  end;
   Caption := TimeToStr(Time);
   ControlStyle := ControlStyle - [csSetCaption] 
   {$IFDEF WIN32} - [csReplicatable] {$ENDIF};
   BevelInner := bvLowered;
   BevelOuter := bvRaised;
   FTimer := TRxTimer.Create(Self);
   FTimer.Interval := 450; { every second }
   FTimer.OnTimer := TimerExpired;
   FDotsColor := clTeal;
   FShowSeconds := True;
   FLeadingZero := True;
   GetTime(FDisplayTime);
   if FDisplayTime.Hour >= 12 then Dec(FDisplayTime.Hour, 12);
   FAlarmWait := True;
  FAlarm := EncodeTime(0, 0, 0, 0);
 end; 
```

![在此处输入图像描述](../Images/e4343ec31c13441a8f1dfd665e1cf542.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T08:07:08.373

一般来说，这个想法是行不通的。您假设开发人员总是将您的组件放到表单上。但他们也可以从修订控制中检查现有项目，然后不会创建 DLL。

在我看来，您应该简单地记录依赖关系并让开发人员确保满足依赖关系。建议他们将 DLL 添加到他们的修订控制系统中，以便将其检出到应用程序目录中。

开发人员在部署时需要注意这种依赖性。这必须是开发商的责任。因此，让开发人员管理这个句号会更干净、更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T08:27:40.537

尽管大卫认为记录可能是唯一可靠的方法是正确的，但您的问题是一个有趣的问题。

您似乎已经编写了将 dll 写入文件的代码，因此问题是响应创建组件时将触发的事件？

如果我要这样做，我想我会检查组件创建是否存在 dll，如果不存在，则在此阶段创建它。你可以动态加载dll吗？如果只能使用静态链接的dll，那么大卫的方式真的是唯一可靠的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T13:57:18.213

尝试使用 Delphi 的项目管理器将 dll 文件放入`Contains`您正在创建的包的文件夹中。

![在此处输入图像描述](../Images/4de3298ce903a7c0031605e9d995e212.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T17:31:35.293

您所要求的在技术上是可行的，但仅当 DLL 在运行时使用`LoadLibrary()`. “无法找到组件”错误是在编译时静态链接到 DLL 的结果，这使得无法在运行时提取 DLL（除非静态链接的 DLL 是延迟加载的，它在`LoadLibrary()`内部使用）。

当且仅当动态/延迟加载 DLL 时，您可以在使用 DLL 之前在运行时从组件的资源中提取它。调用时`TResourceStream.CreateFromID()`，不要使用全局`HInstance`变量，`FindClassHInstance()`而是使用函数。如果组件在启用了运行时包的项目中使用，全局`HInstance`变量将不会指向组件的模块，但`FindClassHInstance()`无论组件如何链接到项目，都可以找到正确的模块。

# haskell - 如何在 Haskell 中捕获读取异常？

> ID：10459988
> 
> 赞同：11
> 
> 时间：2012-05-05T07:58:25.347
> 
> 标签：haskell, try-catch

在以下 Haskell 代码中：

```
data Cmd =  
    CmdExit |  
    CmdOther  
    deriving (Read, Show)

guiString2Cmd s =  
    (return (read s :: Cmd)) `catch` \(e :: SomeException) -> return CmdExit 
```

如果我做：

```
guiString2Cmd "CmdOther" 
```

一切正常。但是，如果我这样做：

```
guiString2Cmd "some wrong string" 
```

代码崩溃而不是评估 CmdExit。

如何使代码处理异常而不是崩溃？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T17:54:20.180

使用`reads`总的函数，并将失败案例包装为 a `Maybe`，如下所示：

> ```
> maybeRead :: Read a => String -> Maybe a
> maybeRead s = case reads s of
>     [(x, "")] -> Just x
>     _         -> Nothing 
> ```

`maybeRead`是一种非常通用的安全解析方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T06:56:36.260

在 monad 中存在一种阅读习惯：

```
readM :: (Monad m, Read a) => String -> m a
readM s | [x] <- [x | (x, "") <- reads s] = return x
        -- or @[x] <- [x | (x, _) <- reads s] = return x@
        -- to allow the garbage at the end of parsed string
        | otherwise = fail $ "Failed to parse: \"" ++ s ++ "\"" 
```

`IO`对monad来说是不安全的：

```
> readM "CmdOther" :: IO Cmd
CmdOther
> readM "Cmd?Other" :: IO Cmd
*** Exception: user error (Failed to parse: "Cmd?Other") 
```

因为在 的情况下`fail`会引发`IOError`异常`IO`，但是可以处理：

```
*Main> (readM "Cmd?Other" :: IO Cmd) `catch` const (return CmdOther)
CmdOther 
```

`Maybe`在monad的情况下是安全的：

```
> readM "CmdOther" :: Maybe Cmd
Just CmdOther
> readM "Cmd?Other" :: Maybe Cmd
Nothing 
```

因为`fail`在`const Nothing`这种情况下。

无论如何，如果你想要一个`guiString2Cmd`带有签名的总函数，`String -> Cmd`你可以这样写`readM`：

```
guiString2Cmd :: String -> Cmd
guiString2Cmd s | [x] <- [x | (x, "") <- reads s] = x
                | otherwise = CmdExit 
```

接着：

```
> guiString2Cmd "CmdOther"
CmdOther
> guiString2Cmd "Cmd?Other"
CmdExit 
```

* * *

更通用的方法。

对于`*`种类：

```
class Failable0 t where
  fail0 :: t

readG0 :: (Failable0 t, Read t) => String -> t
readG0 s | [x] <- [x | (x, "") <- reads s] = x
         | otherwise = fail0 
```

然后：

```
instance Failable0 Cmd where
  fail0 = CmdExit 
```

对于`* -> *`种类：

```
class Failable f where
  fail :: String -> f a

class Functor f => Pointed f where
  pure :: a -> f a

readG :: (Failable f, Pointed f, Read a) => String -> f a
readG s | [x] <- [x | (x, "") <- reads s] = pure x
        | otherwise = fail $ "Failed to parse: \"" ++ s ++ "\"" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T19:32:13.853

我个人建议[`readMay`](http://hackage.haskell.org/packages/archive/safe/0.3.3/doc/html/Safe.html)从`safe`包中使用：

```
readMay :: Read a => String -> Maybe a 
```

然后，您可以对“Maybe a”结果进行模式匹配，使用“maybe”，甚至使用“Maybe”单子来处理结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T08:17:36.070

一个解决方案是简单地使用*读取*。

# java - 带有安卓库的 NoClassDefFoundError

> ID：10459991
> 
> 赞同：2
> 
> 时间：2012-05-05T07:58:42.773
> 
> 标签：java, android

通用集合：

```
class B {}
class A extends A {}

List<Class<? extends B>> bs = new ArrayList<Class<? extends B>>();
bs.add(A.class); 
```

工作正常（如预期）。

但是当我尝试使用 androrm(http://androrm.the-pixelpla.net/) 库时：

```
class A extends com.orm.androrm.Model {}
List<Class<? extends com.orm.androrm.Model>> models = new ArrayList<Class<? extends com.orm.androrm.Model>>();
models.add(A.class); 
```

我收到运行时错误：

```
E/AndroidRuntime(2177): java.lang.NoClassDefFoundError: com.my.android.A 
```

我不明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:15:34.043

我认为您没有在 android 模拟器上使用您的应用程序导出 Androrm 库。

如果你想在运行时使用安卓库，那么你应该将安卓库 jar 保存在应用程序的 assets/ 文件夹中。

如果您使用的是 Eclipse，则右键单击项目并转到“项目属性”。您将找到一个名为“构建路径”的选项卡。在名为“库”的子选项卡下添加您正在使用的安卓库（在资产/文件夹中），并确保在“订购和导出”选项卡的子选项卡上单击导出安卓库。

这应该将类路径中的“export”标志设置为“true”。现在运行您的应用程序，看看这是否修复了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:24:15.233

如果您使用 ADT 17 或更高版本

然后创建文件夹**libs**并将所有**jar**放在此文件夹中

必须看到这个答案[https://stackoverflow.com/a/10046725/1289716](https://stackoverflow.com/a/10046725/1289716)

# sql-server-2008 - 建议查询以在一个具有性能的查询中获取所需的结果

> ID：10459992
> 
> 赞同：1
> 
> 时间：2012-05-05T07:58:55.457
> 
> 标签：sql-server-2008

我可以使用临时表或循环访问此表来获取结果，但我想在一个查询中将下表转换为所需的结果，并具有出色的性能。

```
Order Table

OrdNbr  LineNbr ItemName    Qty
1       1       Pen         1
1       2       Pencil      2
1       3       Scale       2
2       5       Bottle      2
3       3       Pen         10
3       1       Pencil      5

Required Result:

OrdNbr  OrdNbrFirstLineNbr  ItemName    Qty     AllLineNumbers
1       1-1                 Pen         1       1,2,3
2       2-5                 Bottle      2       5
3       3-1                 Pencil      5       1,3 
```

OrdNbr 和 LineNbr 是订单表的主键。我只想获取同一个 OrdNbr 的第一条记录。

获得结果的逻辑：找到不同的订单号并获取单个订单号的最低行号。现在按该顺序显示订单号、最低行号和最低行号的详细信息。我想要两个额外的派生字段 OrdNbrFirstLineNbr 和 AllLineNumbers。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:29:44.160

```
select OrdNbr, 
       LineNbr as OrdNbrFirstLineNbr, 
       ItemName, 
       Qty
from (
   select *,
          row_number() over (partition by OrdNbr order by LineNbr) as rn
   from "Order"  -- need to quote this, because order is a reserved word
) t
where rn = 1 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-05T08:19:06.917

尝试这个：

```
SELECT OrdNbr, LineNbr, ItemName, Qty 
FROM Order
GROUP BY OrdNbr
ORDER BY LineNbr; 
```

# java - 用户定义的 CORBA 异常在编译后给了我错误

> ID：10459993
> 
> 赞同：3
> 
> 时间：2012-05-05T07:58:58.173
> 
> 标签：java, c++, exception, corba

我在 CORBA 中对自己的用户定义异常有一些问题。这是我非常简单的代码：

```
interface Interfface
{
    exception myOwnException {};

    void ffunction(in double arg) raises (myOwnException);
};

#include "Interfface.hh"

class Implementation : public POA_Interfface
{
    public :
        virtual void ffunction(double arg) throw (myOwnException);
};

#include "Implementation.h"

void Implementation::ffunction(double arg) throw (myOwnException)
{   
    arg ++;    
    throw (myOwnException);
} 
```

当我编译 Implementation.cpp 时，它给了我一些错误（[http://pastie.org/private/a22ikk09zkm9tqywn37w](http://pastie.org/private/a22ikk09zkm9tqywn37w)）：

```
Implementation.cpp: In member function ‘virtual void Implementation::ffunction(double)’:
Implementation.cpp:5: error: ‘myOwnException’ was not declared in this scope
In file included from Implementation.cpp:1:
Implementation.h:6: error: expected type-specifier before ‘myOwnException’
Implementation.h:6: error: expected ‘)’ before ‘myOwnException’
Implementation.h:6: error: expected ‘;’ before ‘myOwnException’
Implementation.cpp:3: error: expected type-specifier before ‘myOwnException’
Implementation.cpp:3: error: expected ‘)’ before ‘myOwnException’
Implementation.cpp:3: error: expected initializer before ‘myOwnException’ 
```

这段代码有什么问题？还有一个问题：我如何在 Java 中做同样的事情？

这是我的代码：[http](http://speedy.sh/F5utX/user-defined-exception.tar) ://speedy.sh/F5utX/user-defined-exception.tar 我在java中做了同样的事情（代码也在user-defined-exception.tar）但是java代码给了我这个：

```
Note: InterffacePOA.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:45:19.263

您应该创建异常类型的新实例，如下所示：

```
throw myOwnException(); 
```

您可能还需要限定命名空间：

```
throw Interfface::myOwnException(); 
```

顺便说一句， throw 声明在大多数（阅读“全部”）编译器实现中确实没有任何有用的效果，并且在 C++11 中已被弃用。我知道它们可能是在这里自动生成的，但还是很高兴知道。我发现在实践中，这些声明往往会随着随后的源代码更改而不再准确。不要将它们拖到您的实现文件中。另一方面，您使用了无意义的变量和类型名称，并且没有一致的命名约定。

编辑：正如 Johnny Willemsen 所说，您可以将成员添加到异常中，如下所示：

```
exception myOwnException {
    string reason;
}; 
```

每个异常成员都将表示为公共类成员。将生成必要的构造函数，因此您可以抛出这样的异常：

```
throw Interfface::myOwnException("Wrong polarity!"); 
```

当抛出异常时，如果它没有在本地捕获，那么它会被序列化并传播到客户端（远程过程调用者）。在那里它将被反序列化，因此您可以像这样捕获它并访问它的成员：

```
try
{
    server->ffunction(0);
}
catch(const Interfface::myOwnException &ex)
{
    std::cout << ex.reason;
} 
```

在 C++ 中，您通常通过常量引用来捕获异常（这也取决于它是如何抛出的）。我是凭记忆写的（CORBA 的东西），所以我希望我不会遗漏任何重要内容。

# asp.net-mvc-3 - “远程”属性的解决方法

> ID：10459996
> 
> 赞同：2
> 
> 时间：2012-05-05T07:59:40.783
> 
> 标签：asp.net-mvc-3, validation

我有一个`Register`和`login`页面都使用不显眼的 ajax。
我的模型中的`Username`属性装饰有`Remote("ActionName","ControllerName")`
它在 中工作正常，`Registration Page`但问题是验证也在`Login Page`. 那么如何禁用`Remote`验证属性，`Login Page`但我确实想要其中的 ajax 功能，`signIn`所以`Login Page`我无法删除`unobtrusive javascript file`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:08:29.470

您不能动态关闭远程验证器。

解决方案是不要对两个视图使用相同的模型。

而不是创建两个视图模型，一个用于登录，一个用于注册视图，并以不同的方式注释它们：

```
public class RegisterUserViewModel
{
    [Remote("ActionName","ControllerName")]
    public string Username { get; set; }

    //...
}

public class LoginUserViewModel
{
    public string Username { get; set; }

    //...
} 
```

要将视图模型中的属性映射到控制器中的模型，您可以使用一些对象-对象映射器，例如[AutoMapper](http://automapper.org)

# asp.net - ASP.NET -HTML 表格行默认字体

> ID：10459997
> 
> 赞同：2
> 
> 时间：2012-05-05T08:00:00.077
> 
> 标签：asp.net, html, fonts, html-table

有人知道表格行元素中的默认字体系列是什么吗？我需要这个，因为我有时会在 td 中放置一个标签，并且该标签的字体与表格列的字体不同，这会导致视觉问题。我想将我的标签字体设置为与它所在的 td 的默认字体相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:07:59.340

HTML 中没有默认字体，如果 CSS 中指定的字体系列在任何查看您的代码的人的机器上都不可用，它将采用该人在其浏览器中设置的默认字体。

也就是说，除非您在 CSS 中明确指定它，否则您无法知道它将是什么字体。建议在页面标签中指定一些字体系列`body`以确保一致性，最后一个字体系列是 HTML 中始终可用的字体系列之一。您的标签应该假设表格行或任何父容器的 CSS 中给出的字体，如果不是，则为其`CSS class`属性赋予一个值并这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:22:10.237

我认为默认字体不是您问题的稳定解决方案，为什么您不使用 CSS 样式！对于 td 和 lable 元素都是这样的..

```
td, label {
    ...
    font-family: FONT-NAME;
    ...
} 
```