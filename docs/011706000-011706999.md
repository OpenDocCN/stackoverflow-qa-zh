# StackOverflow 问答 11706000-11706999

# java - OSGi - 获取接口的实现

> ID：11706000
> 
> 赞同：3
> 
> 时间：2012-07-29T01:45:45.387
> 
> 标签：java, service, osgi

假设我的`Book`API 包中有一个接口，`BookImpl`我的实现包中有一些实现。通常，对于单例，我会使用服务注册表来获取我的实现。但是，对于`Book`，我想在每次获得实现时创建一个新实例。

在 OSGi 中执行此操作的正常模式是什么？

我是否可以使用从服务注册表中获取并用于创建图书实例`BookCreator`的方法提供服务？`createBook`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T02:32:56.680

这是一个不错的选择，是的。您还可以考虑其中一种服务注入框架，例如声明式服务或蓝图。蓝图允许您指定原型范围，以便“书”的每个使用者都有自己的实例，该实例可能足够独特，也可能不足以帮助您的用例。（DS也有类似的东西。）

但是，即使是同一个消费者实例也需要获取多个“Book”并且您使用工厂，使用这些框架之一将使您的服务访问更加健壮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T06:28:01.717

在两年前对这个问题进行了长时间的思考之后，我发现提出的解决方案，作为工厂的服务，是最好的解决方案。原因是相关的类型安全。声明式服务确实具有内置的组件工厂的可能性，它允许您创建组件实例，它的使用不像类型安全工厂那么容易。我还考虑将这个概念放入框架中，但也缺乏简单的工厂服务。

所以是的，你的想法是我所知道的最好的解决方案。

# android - 用于检索 SharedPreferences 的 Toast 返回空值

> ID：11706004
> 
> 赞同：0
> 
> 时间：2012-07-29T01:46:40.550
> 
> 标签：android, sharedpreferences, preferences

我正在尝试将 SIM 序列号作为值存储到 SharedPreferences 中，但是当我执行 Toast 来测试该值时，它是空的。

```
 TelephonyManager tMgr=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    String ss = tMgr.getSimSerialNumber();

    // Writing data to SharedPreferences
    Editor editor = sp.edit();
    editor.putString("serial", ss);
    editor.commit();

    String value = settings.getString("serial", "");
    Toast.makeText(this, value, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:49:50.283

*   存储序列号：

    ```
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    SharedPreferences.Editor editor = prefs.edit();
    editor.putString("serial", ss);
    editor.commit(); 
    ```

*   检索序列：

    ```
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String value = prefs.getString("serial", "000000000000"); 
    ```

`000000000000`如果 sharedPreferences 未存储，将返回给您的默认值在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:37:10.017

```
 public void saveSerial(String serial){
      SharedPreferences prefs = getSharedPreferences("SIMSerial",Context.MODE_PRIVATE);
      SharedPreferences.Editor editor = prefs.edit();
      editor.putString("Serial", serial);
      editor.commit();
     }
    public String getSerial(){
      String getSIMSerial;
      SharedPreferences prefs = getSharedPreferences("SIMSerial",Context.MODE_PRIVATE);
      getSIMSerial = prefs.getString("Serial", "Default value");
        return getSIMSerial;
     } 
```

序列号将存储在您可以在 /data/data/YOUR_APP/shared_prefs/ 找到的 xml 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T05:49:36.050

简短回答：检查您如何实例化设置变量。您使用的是 sp.edit()，所以它也应该是 sp.getString。

# ruby - 为视频添加徽标

> ID：11706005
> 
> 赞同：1
> 
> 时间：2012-07-29T01:47:01.397
> 
> 标签：ruby, image-processing, video-processing, watermark, video-watermarking

我有一个视频流媒体网站。我的网站上有很多视频。我想将我的标志添加到所有视频中。*如果可行*，我如何使用 ruby​​ 处理我的所有视频以添加我的徽标并在视频开始时添加视频介绍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:39:19.377

根据您想要实现的目标，有两个（也许更多.. :)）选项：

### ffmpeg

只需使用 ffmpeg 处理您的视频并添加叠加层：

```
ffmpeg –i original_video.avi -vf "movie=logo.png [watermark]; [in][watermark] overlay=10:10 [out]" processed_video.flv 
```

你可以从 ruby​​ 调用这个 shell 命令，或者有办法直接集成 ffmpeg。不太了解 ruby​​，但发现了这个项目：[https ://github.com/gwik/ffmpeg-ruby](https://github.com/gwik/ffmpeg-ruby)

您也可以使用 ffmpeg 添加介绍序列，但由于您可能正在使用流式服务器，您可以将其添加到服务器上。（例如向客户发送包含介绍和视频的播放列表）

### 在客户端播放器中“添加”徽标

您对您的设置并不那么具体 - 但也许可以在自定义播放器中添加徽标。如果通过 rtmp 流式传输，这可能是基于 Flash 的播放器，其徽标位于视频顶部。

# c++ - OSX 上的 libxml2 和 libxml2-dev

> ID：11706007
> 
> 赞同：5
> 
> 时间：2012-07-29T01:47:39.327
> 
> 标签：c++, macos

尝试构建 Unix QuickFIX 引擎时，在 ./bootstrap 之后出现以下错误

```
warning:macro 'AM_PATH_XML2' not found in library 
```

据我了解，libxml2 已经随 XCode OS X Mountain Lion 一起提供。我找到的答案建议下载 libxml2-dev，尽管我找不到使用 HomeBrew 的包。
我对在 OS X 和 Xcode 上编程以及移植 Unix 应用程序比较陌生，所以我不确定我到底有什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-05T13:12:58.623

我做了一个

```
brew install libxml2 
```

然后四处寻找，我`AM_PATH_XML2`在`/usr/local/Cellar/libxml2/2.8.0/share/aclocal/libxml.m4`. 这是所有开发包的内容，然后我将我的 Ubuntu/Vagrant 虚拟机与本地运行良好的虚拟机进行了比较，并记住：

```
brew link --force libxml2 
```

将符号链接放入`/usr/local/share/aclocal`.

现在我正在建造，但我还需要汽车制造商，所以回顾一下

```
brew install automake autoconf libtool libxml2                                                            
brew link libxml2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T02:19:33.997

该警告来自 Autoconf，并抱怨该`configure.in`文件引用了宏`AM_PATH_XML2`但未定义。它应该`aclocal.m4`在 quickfix 源的文件中定义，因此您的 autoconf 版本似乎没有找到它。你可以尝试修改`bootstrap`运行`autoconf -I .`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-20T13:31:36.153

我刚刚在我的 Mac 上构建[oath-toolkit](https://gitlab.com/oath-toolkit/oath-toolkit)时遇到了这个问题。`libxml.m4`通过在安装后创建符号链接，我能够克服此错误`brew install libxml2`。

```
ln -s /usr/local/opt/libxml2/share/aclocal/libxml.m4 /usr/local/share/aclocal/libxml.m4 
```

我意识到这个问题已经问了 7 年多了，但我花了一段时间才拼凑出这个解决方案。我希望它有所帮助。我能够重现我运行的问题`aclocal`。它与`configure.ac:38: warning: macro 'AM_PATH_XML2' not found in library`. 然后我跑`aclocal --print-ac-dir`了返回`/usr/local/Cellar/automake/1.16.1_1/share/aclocal`。该目录包含一个`dirlist`文件。

```
cat /usr/local/Cellar/automake/1.16.1_1/share/aclocal/dirlist 
/usr/local/share/aclocal
/usr/share/aclocal 
```

第一个目录包含所有其他符号链接。

```
ls -al /usr/local/share/aclocal
lrwxr-xr-x   1 cameron  admin   48 Sep 20 08:39 cmake.m4 -> ../../Cellar/cmake/3.15.3/share/aclocal/cmake.m4
lrwxr-xr-x   1 cameron  admin   52 Sep 20 09:01 dirlist -> ../../Cellar/automake/1.16.1_1/share/aclocal/dirlist
lrwxr-xr-x   1 cameron  admin   53 Sep 20 09:02 libtool.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/libtool.m4
lrwxr-xr-x   1 cameron  admin   52 Sep 20 09:02 ltargz.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/ltargz.m4
lrwxr-xr-x   1 cameron  admin   50 Sep 20 09:02 ltdl.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/ltdl.m4
lrwxr-xr-x   1 cameron  admin   55 Sep 20 09:02 ltoptions.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/ltoptions.m4
lrwxr-xr-x   1 cameron  admin   53 Sep 20 09:02 ltsugar.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/ltsugar.m4
lrwxr-xr-x   1 cameron  admin   55 Sep 20 09:02 ltversion.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/ltversion.m4
lrwxr-xr-x   1 cameron  admin   57 Sep 20 09:02 lt~obsolete.m4 -> ../../Cellar/libtool/2.4.6_1/share/aclocal/lt~obsolete.m4
lrwxr-xr-x   1 cameron  admin   51 Aug 27 20:15 pkg.m4 -> ../../Cellar/pkg-config/0.29.2/share/aclocal/pkg.m4 
```

按照这种模式，我可以做到：

```
ln -s /usr/local/Cellar/libxml2/2.9.9_2/share/aclocal/libxml.m4 /usr/local/share/aclocal/libxml.m4 
```

但我选择使用这个符号链接，以便这个答案适用于各种版本。

```
ls -al /usr/local/opt/libxml2
lrwxr-xr-x  1 cameron  admin  25 Sep 20 09:35 /usr/local/opt/libxml2 -> ../Cellar/libxml2/2.9.9_2 
```

# java - 静态 setVisible JFrame

> ID：11706008
> 
> 赞同：-1
> 
> 时间：2012-07-29T01:47:43.253
> 
> 标签：java, swing, static, jframe

我正在尝试为游戏创建标题屏幕。到目前为止一切都很好，除了这个 JFrame 拒绝关闭。我在不同 JFrame 中的不同 JPanel 中使用 JButton。我得到错误

> “无法从类型 Window 对非静态方法 setVisible(boolean) 进行静态引用”

```
package ZombieFunTimeGo;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JProgressBar;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SuperZombieFunTimeGo extends JFrame{

    private TitleScreen ts;
    boolean visible;

    public SuperZombieFunTimeGo() {
        add(new TitleScreen());
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(1280, 720);
        ts = new TitleScreen();
        Container pane = getContentPane();
        pane.add(ts);
        setContentPane(ts);
        setLocationRelativeTo(null);
        setTitle("Super Zombie Fun Time Go!");
        setResizable(false);
        setVisible(true);
    }

    public void pullThePlug() {
        WindowEvent wev = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
        Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
    }

    public static void main(String[] args) {
        new SuperZombieFunTimeGo();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:51:38.503

是的，您在问题中发布的代码完全无关紧要。您在评论中发布的代码是导致问题的代码

startButton.addActionListener(new ActionListener() { public void actionPerformed(ActionEvent e) { new theActualGame(); SuperZombieFunTimeGo.setVisible(false); } });

问题是您调用该`setVisible`方法，因为它是[静态方法](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)，但事实并非如此。`SuperZombieFunTimeGo` *您应该只在实例*上调用该方法。在这种情况下，您`ActionListener`将需要对该实例的引用，并调用`setVisible`该实例。所以像

```
SuperZombieFunTimeGo titleScreen = ...;
...
startButton.addActionListener(new ActionListener() { 
  public void actionPerformed(ActionEvent e) { 
     new theActualGame();
     titleScreen.setVisible(false); } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T01:56:20.330

您说的错误是编译错误，而不是运行时错误。您甚至无法编译该文件。您似乎正在执行代码的先前编译版本。您可以发布抛出此错误的行吗？如果是这样，我可以改进我的答案。当您尝试访问静态上下文中的某些非静态成员时会发生此错误，因为您无法更改静态成员中的对象状态，因为静态成员属于类，而不是对象。您在代码中做了一些奇怪的事情......您向 JFrame 添加了一个 TitleScreen，但在此之后您又做了一次（通过内容窗格）并将 TitleScreen 设置为框架的内容窗格。看来您是 Swing 的新手。我对吗？

# objective-c - 自定义视图控制器上的“编译器错误”、“分段错误 11”

> ID：11706013
> 
> 赞同：0
> 
> 时间：2012-07-29T01:48:45.377
> 
> 标签：objective-c, uiview, uiviewcontroller, core-animation, ios5

我有一个非常奇怪的问题，我想我知道我为什么会得到它，但我似乎想不出解决办法。我确信这里没有编译器错误。由于我的代码错误，我遇到过很多这样的情况，所有这些都发生了。

基本上，我有一个从 UIViewController 继承的名为 UnlockKeyboardViewController 的视图控制器，以及一个名为 UnlockKeyboard 的自定义视图（直接从 UIView 继承）。UnlockKeyboard 的标题如下所示：

```
@interface UnlockKeyboard : UIView
{
    NSArray *buttons;
    NSArray *passcodeFields;

    UIImage *buttonBackgroundImage;
    UIImage *buttonBackgroundHighlightedImage;
    UIImage *middleButtonBackgroundImage;
    UIImage *middleButtonBackgroundImageHighlighted;
    UIImage *screenBackgroundImage;

    UIImage *infoViewContainerImage;
    UIImage *keypadViewContainerImage;
    UIImage *passcodeFieldsContainerImage;

    UIImage *infoViewImage;
    UIImage *passcodeViewImage;

    UIView *infoViewContainer;
    UIView *keypadViewContainer;
    UIView *passcodeFieldsContainer;

    UIView *infoView;
    UIView *keypadView;
    UIView *passcodeFieldsView;

    UIView *infoToDisplayView; //The view the programmer passes to show in infoView.
}
@property(nonatomic, retain)UIImage *buttonBackgroundImage;
@property(nonatomic, retain)UIImage *buttonBackgroundHighlightedImage;
@property(nonatomic, retain)UIImage *screenBackgroundImage;
@property(nonatomic, retain)UIImage *keypadViewBackgroundImage;
@property(nonatomic, retain)UIImage *infoViewContainerImage;
@property(nonatomic, retain)UIImage *keypadViewContainerImage;
@property(nonatomic, retain)UIImage *passcodeFieldsContainerImage;
@property(nonatomic, retain)UIImage *infoViewImage;
@property(nonatomic, retain)UIImage *passcodeViewImage;
@property(nonatomic, retain)UIView *infoToDisplayView;

//Properties for container views.
@property(nonatomic, retain)UIView *infoViewContainer;
@property(nonatomic, retain)UIView *keypadViewContainer;
@property(nonatomic, retain)UIView *passcodeFieldsContainer;

@end 
```

到目前为止，UnlockKeyboardViewController 实现看起来像这样：

```
@implementation UnlockKeyboardViewController
-(id)init
{
    if((self = [super init]))
    {
        self.view = [[UnlockKeyboard alloc] init];
    }
    return self;
}

-(void)viewDidLoad
{
    [super viewDidLoad];
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [UIView animateWithDuration:0.7 animations:^{
        self.view.keypadViewContainer.frame = CGRectMake(0, 261, 320, 200);
    } completion:^(BOOL finished){

    }];
}

-(void)dealloc
{
    [super dealloc];
}
@end 
```

这是我的问题变得有趣。每当我尝试编译时，终端（这是一个越狱应用程序，所以没有 Xcode）给我以下错误：

```
In function ‘void __-[UnlockKeyboardViewController viewDidAppear:]_block_invoke_1(void*)’:
Segmentation fault: 11
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://developer.apple.com/bugreporter> for instructions. 
```

但是，此错误仅在我输入此行时出现：

```
self.view.keypadViewContainer.frame = CGRectMake(0, 261, 320, 200); 
```

如果我的动画块中没有那一行，编译器不会给我那个错误，它会编译得很好。虽然，不管我放这条线，我总是得到分段线 11。

我认为这可能与 UIView 没有名为 keypadViewContainer 的成员这一事实有关，尽管 UnlockKeyboard 具有该属性并且是 UIView 的子类。我相信这是因为编译器实际上无法看到 UIView 和 UnlockKeyboard 之间的类层次结构。

如果我是对的，我不知道如何解决这个问题。想了一会儿。任何帮助我解决这个问题的意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:06:40.053

`loadView`首先，您应该只在其方法中设置视图控制器的视图属性：

```
- (void)loadView
{
    self.view = [[UnlockKeyboard alloc] init];
} 
```

这将触发其他方法，例如`viewDidLoad`期望对象已完全初始化的方法。`view`故事的寓意：在控制器要求您之前不要设置属性。

然后，在您的`viewDidAppear:`方法中，将属性封装`view`到您正在使用的特定子类中应该避免任何警告，并希望避免奇怪的编译器崩溃：

```
[UIView animateWithDuration:0.7 animations:^{
    UnlockKeyboard *ukView = (UnlockKeyboard *)self.view;
    ukView.keypadViewContainer.frame = CGRectMake(0, 261, 320, 200); 
```

您编写的代码应该触发了编译器警告，因为该属性`keypadViewContainer`未在`UIView`（表达式的类型`self.view`）上定义。

无可否认，类型转换有点难看，但这是必要的，因为视图控制器是一个通用的父类并且不知道它正在控制什么样的视图。您可能会发现定义一个无需一直进行强制转换的属性很有用：

```
@property (nonatomic,readonly) UnlockKeyboard *unlockKeyboardView; 
```

以及对应的方法：

```
- (UnlockKeyboard *)unlockKeyboardView
{
    return self.view;
} 
```

# visual-studio - Visual Studio 2012 数据库项目发布列顺序

> ID：11706014
> 
> 赞同：4
> 
> 时间：2012-07-29T01:49:19.077
> 
> 标签：visual-studio, database-project

对于 VS2012 数据库项目，我可以让它在发布时忽略列顺序，而只是将列添加到表的末尾吗？这是一种更快、更安全的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:19:26.010

我认为目前没有办法使用 Visual Studio 2012 执行此操作。高级部署设置中应该有一个“忽略列顺序”选项，但根据[此页面](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/9613187c-3abb-4fbf-91c4-a927b26f45f1)已删除此选项。显然，此选项的范围令人困惑，Microsoft 已决定将其删除，直到他们可以改进它为止。（该页面实际上声称此选项已从 SQL Server Data Tools 中删除，但我认为这是错误的。我已确认此选项存在于带有 SSDT 的 Visual Studio *2010*中，因此我相信问题确实出在 VS 2012 上。）

对于 Visual Studio 2010，您将找到如下设置。

*   使用发布选项时：发布 > 高级 > 忽略列顺序
*   使用部署选项时：项目属性 > 调试选项卡 > 高级 > 忽略列顺序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T04:33:06.443

这个问题似乎与这个问题[重复](https://stackoverflow.com/questions/21437024/visual-studio-2013-sql-schema-compare-ignore-column-order)。我相信[这个 StackOverflow 答案](https://stackoverflow.com/a/50222351/602585)提供了您正在寻找的信息。

# html - 将超大 (10+ GB) 文件拆分并上传到 Amazon S3

> ID：11706015
> 
> 赞同：4
> 
> 时间：2012-07-29T01:49:20.443
> 
> 标签：html, file-upload, amazon-s3, amazon-ec2, xmlhttprequest

我正在通过 AJAX 将文件上传到 Amazon S3（使用浏览器文件 API 并将实际上传脚本存储在 Amazon S3 上作为 iframe 以解决 Amazon S3 跨站点问题，感谢 jquery-file-upload 的想法） . 我有这个工作，它适用于小文件（< 50 MB 左右）。但是，我希望在 Amazon S3 上存储超大文件。我想存储配置的虚拟机之类的东西，它的大小可能超过 10 GB。

根据我对 HTML5 文件 API 的理解，可以在客户端将大文件分块并上传。然后，服务器代码负责将文件连接在一起并将文件移动到 S3。我理解这个概念，但不确定最佳实施方式。

我使用 Heroku 作为应用服务器，我通常将文件直接上传到 Amazon S3，完全跳过 Heroku 的服务器。但是，如果我将上传内容分成小块，则必须先编写一些代码来连接这些部分，然后才能将其实际放入 S3。但是 Heroku 对它们可以使用多少数据有一些限制，而且我认为加入 10 GB 文件不会在他们的服务器上有效地工作（不是 100% 肯定，但值得怀疑）。

所以我目前的想法是我必须在 Amazon EC2 服务器上设置一个 Web 服务应用程序，我的应用程序将上传部分发布到该服务器上。然后，EC2 应用程序负责加入上传部分并将最终加入的文件放入 S3。将文件加载到 S3 后，S3 会向托管在 Heroku 上的原始应用程序发送响应，然后该应用程序会创建一个指向 S3 中存储文件的资源。

有没有什么现实的方法可以让一个单独的 EC2 服务器加入文件？在 EC2 和 S3 之间发送文件是免费的，但我不想维护 2 个应用程序来完成我想要的事情（Heroku 上的主应用程序和 EC2 上的文件加入应用程序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:46:21.250

Amazon S3 API 支持分段上传。文件在 S3 端自动合并。我不知道新的 html5 文件 API 有多灵活。如果您设法上传文件直接与 S3 对话（哇），您也许还可以使用多部分功能。

我可以询问您当前实施的示例吗？让我好奇

分段上传到 S3 的工作 [原理 http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html](http://aws.typepad.com/aws/2010/11/amazon-s3-multipart-upload.html)

用于分段上传的 REST API [http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html)

最棘手的事情（如果可能的话）可能是在浏览器中拆分一个（大）文件

在你开始为了酷而开发一些东西之前，请确保你的原始问题没有更实用/务实的解决方案

编辑：

文件切片是可能的 - 确实：html5 摇滚！

如果你很好地实现了这一点，你可能会去无限的文件大小而不会爆炸用户的记忆

[https://developer.mozilla.org/en/docs/DOM/Blob](https://developer.mozilla.org/en/docs/DOM/Blob)

[http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files)

# html - Twitter Bootstrap CSS 静态流体表单定位

> ID：11706019
> 
> 赞同：8
> 
> 时间：2012-07-29T01:51:17.873
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 框架试图获得这样的布局：

![所需布局](../Images/e60e0229a6a206d8a44e8abdd3b2fcab.png)

这是它现在的样子：

[![当前布局](../Images/a14df7e4861be905fe0c96c90a78a550.png)](https://i.stack.imgur.com/hxRqY.png)

[jsFiddle 全屏](https://jsfiddle.net/flackend/YxKfc/show)

[jsFiddle](https://jsfiddle.net/flackend/YxKfc/)

表单容器的宽度根据浏览器的宽度而变化（Twitter Bootstrap 的 CSS 媒体查询）。图标框总是有 14px 的宽度。

我尝试了基于 static-width-sidebar/fluid-content CSS 布局的不同方法来尝试填充文本输入宽度。

我认为我唯一的选择是制作自己的 CSS 媒体查询，为文本输入定义绝对宽度。

```
<div class="container">
    <div class="row">
        <section class="span9">
            <h2>Our Theme</h2>
            <p>lorem ipsum...</p>
        </section>
        <div class="span3">
            <section class="patch-well">
                <h2>Contact Us</h2>
                <p>Send a message......lorem ipsum...</p>
                <form>
                    <fieldset class="control-group">                        
                        <div class="input-prepend">
                            <span class="add-on">
                                <i class="icon-user"></i>
                            </span><input type="text">
                        </div>
                        <div class="input-prepend">
                            <span class="add-on">
                                <i class="icon-envelope"></i>
                            </span><input type="text">
                        </div>
                        <textarea></textarea>
                        <button type="submit" class="btn btn-default">Send message</button>
                    </fieldset>
                </form>
            </section>
        </div>
    </div><!-- row -->
</div> 
```

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css');

body { padding: 10px }

.patch-well {
  color: #FFF;
  background: url('http://subtlepatterns.com/patterns/darkdenim3.png') repeat;
  padding: 20px;
  text-align: center;

  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  border-radius: 10px;

  -moz-box-shadow: 0 0 5px #000;
  -webkit-box-shadow: 0 0 5px #000;
  box-shadow: 0 0 5px #000;
}

.input-prepend {

}

.input-prepend .add-on {

}

.input-prepend input {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:40:24.610

您将整个表格放入 span3 中，大约是行宽的 25%。因此，如果分辨率很大，span3 不足以包含整个表格。在较小的分辨率上，span3 的宽度变为 100%，并且在较小的分辨率上看起来不错。只需使用其他一些跨度类，并仔细计算跨度类中的数字。[像这里一样](http://twitter.github.com/bootstrap/scaffolding.html)，我更喜欢使用 row-fluid 类而不是 row 类，使用宽度更容易操作。

总是使用这样的结构

```
<div class="row-fluid">
  <div class"span3">
     <!-- content1 -->
  </div>
  <div class"span9">
     <div class="row-fluid">
        <div class="span6">
           <!-- content2 -->
        </div
        <div class="span6">
           <!-- content3 -->
        </div
     </div>
  </div>
</div> 
```

请注意，如果我想要在设计中没有浮动的新行，并且如果我想要 100% 的宽度 od 父元素，我将使用 row-fluid。因为子元素可以再次跨越 12 个元素的总和。在此示例中，“content1”将在大分辨率下使用 25% 的宽度，但在小分辨率下它将具有 100% 的宽度。在大分辨率下，“content2”和“content3”将具有父级宽度的 100%，但也就是容器宽度的 75%。在小分辨率下，所有跨度类都将具有 100% 的宽度。如果您在某些情况下不希望这样做，只需使用您的类覆盖默认引导 css。

我希望你明白我的意思。对不起我的英语不好 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:19:12.883

这就是你想要的[http://jsfiddle.net/YxKfc/14/](http://jsfiddle.net/YxKfc/14/)，请检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T02:02:47.723

与许多 CSS 框架一样，您必须非常小心**`padding`**. 把这个脱掉

```
.patch-well {
  padding: 20px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T02:16:18.457

bootstrap 还允许您通过不要求您使整个布局流畅来模拟对象的最小宽度。在您的情况下，您可以尝试使该导航的包装器跨度和行不流畅。

# ios - iOS - 如何处理文件名中的空格

> ID：11706021
> 
> 赞同：2
> 
> 时间：2012-07-29T01:52:15.747
> 
> 标签：ios

如果我有一个名为“test document.doc”的文件，我可以将它检索为 test%20document.doc，如果我想将它存储在一个数组中，它会给我一个错误.. 我怎样才能按原样检索文件名?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:13:26.370

您正在存储 URL 而不是路径。

```
removeItemAtPATH: 
```

它需要一个路径而不是 URL

# jquery-mobile - 刷新 jQuery Mobile 页面

> ID：11706026
> 
> 赞同：0
> 
> 时间：2012-07-29T01:53:07.077
> 
> 标签：jquery-mobile

我正在尝试使用 刷新 jQuery Mobile 页面`location.reload(true)`，但是在这个特定的 jQuery Mobile 视图中，我需要一个变量来保持刷新。有人知道我如何做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T13:21:49.797

我们可以使用 'pageshow' 代替 location.reload(true)。

```
$("#dividofpagecontainer").trigger('pageshow'); 
```

当我在刷新同一页面时遇到困难时，它可以帮助我。

# emacs - 创建一个 elisp 函数将 URL 转换为 HTML 链接？

> ID：11706028
> 
> 赞同：1
> 
> 时间：2012-07-29T01:53:21.563
> 
> 标签：emacs, elisp

我想创建某种 elisp 函数并将其绑定到一个键，该键采用两种格式之一的 URL，并生成一个 HTML 链接元素。

以下是两种输入格式：

```
http://developer.apple.com/safaridemos/
http://developer.apple.com/safaridemos|Safari Demos 
```

这是两个所需的输出值：

```
<a href="http://developer.apple.com/safaridemos/">safaridemos</a>
<a href="http://developer.apple.com/safaridemos/">Safari Demos</a> 
```

理想情况下，这将适用于一个区域，但即使它只适用于一条线路，它也会有所帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-29T03:47:34.210

这是一种方法。此方法通过让用户选择应转换为链接的文本然后替换它来工作。

```
;;; http://developer.apple.com/safaridemos|Safari Demos
;;; becomes <a href="http://developer.apple.com/safaridemos">Safari Demos</a>
;;; http://developer.apple.com/safaridemos|Safari Demos
;;; <a href="http://developer.apple.com/safaridemos">Safari Demos</a>

  (defun url-to-html-link(input)
  "Convert INPUT url into a html link. The link text will be the text after the last slash or you can end the url with a | and add text after that"
  (let ((split-on-| (split-string input "|"))
    (split-on-/ (split-string input "/"))
    (fmt-string "<a href=\"%s\">%s</a>"))
    (if (> (length split-on-|) 1)
    (format fmt-string (first split-on-|) (second split-on-|))
      (format fmt-string input (first (last split-on-/))))))

(defun url-region-to-html-link(b e)
  (interactive "r")
  (let ((link 
     (url-to-html-link (buffer-substring-no-properties b e))))
    (delete-region b e)
    (insert link)))

(global-set-key (kbd "C-c j") 'url-region-to-html-link) 
```

编辑：您还可以结合使用第一个函数`query-replace-regexp`来制作交互式命令：

```
(defun query-replace-urls ()
  (interactive)
  (query-replace-regexp "http://.*"
                        (quote (replace-eval-replacement replace-quote (url-to-html-link (match-string 0))))
                        nil
                        (if (and transient-mark-mode mark-active) (region-beginning))
                        (if (and transient-mark-mode mark-active) (region-end)))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-29T05:24:44.903

也许更好的主意是使用一些片段引擎？例如，Yasnippet 提供类似于缩写词的机制来填充样板文本。我不记得我到底从哪里得到下面的片段，但自己想出一个这样的片段是微不足道的：

```
# contributor: Jimmy Wu <frozenthrone88 at gmail dot com>
# name: <a href="...">...</a>
# key: href
# --
<a href="$1">$2</a> 
```

Yasnippet 还允许您在占位符中放置默认值，eLisp 代码以交互方式查询用户，同时填充片段或从系统状态读取一些值等。

# jquery-ui-accordion - 手风琴展示位置

> ID：11706034
> 
> 赞同：1
> 
> 时间：2012-07-29T01:55:28.257
> 
> 标签：jquery-ui-accordion

我是 jQuery 的新手。我正在尝试 jQuery UI 手风琴功能，但无法将其显示在正确的位置。我看到下面的问题没有回答，这可能与我的相似但比我的更复杂，因为它涉及我不使用的 scrollTo 。 [jQuery scrollTo 手风琴结束位置](https://stackoverflow.com/questions/9605437/jquery-scrollto-accordion-end-position)

我的问题很简单。当我只使用 jQuery 网站上的手风琴示例代码并将长内容放在第一个面板中时。第二个面板将被推到一个低得多的位置，您需要向下滚动才能找到该面板。当您单击第二个面板时，浏览器不会将您定向到手风琴的顶部或至少是第二个面板的顶部。用户需要向上滚动才能看到第二个面板中的内容。

[这](http://jsfiddle.net/sg9jb/)是小提琴代码。

请帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:30:56.407

您可以设置代码以在打开的面板更改时滚动到新面板的顶部，如下所示：

```
$("#accordion").accordion({
  change : function (event, ui) {
      $('html, body').animate({
         scrollTop: $(ui.newHeader).offset().top
      }, 500);          
  }
}); 
```

您可能还想`autoHeight: false`在手风琴上设置，以保持每个面板的大小与其内容一致。

```
$("#accordion").accordion({
  autoHeight: false,
  change : function (event, ui) {
      $('html, body').animate({
         scrollTop: $(ui.newHeader).offset().top
      }, 500);          
  }
}); 
```

编辑：要解决评论中描述的问题，请在手风琴的更改事件处理程序中使用以下代码：

```
if(ui.newHeader.length > 0) {
    $('html, body').animate({
        scrollTop: $(ui.newHeader).offset().top
    }, 500);
} 
```

这将防止在所有面板都关闭时发生错误。

一个 jsFiddle 在[这里](http://jsfiddle.net/AlexSchimp/sg9jb/3/)。

# c++ - 赋值运算符和复制构造函数有什么区别？

> ID：11706040
> 
> 赞同：144
> 
> 时间：2012-07-29T01:56:57.343
> 
> 标签：c++, memory

我不明白 C++ 中赋值构造函数和复制构造函数之间的区别。它是这样的：

```
class A {
public:
    A() {
        cout << "A::A()" << endl;
    }
};

// The copy constructor
A a = b;

// The assignment constructor
A c;
c = a;

// Is it right? 
```

我想知道如何分配赋值构造函数和复制构造函数的内存？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-07-29T02:07:07.550

复制***构造函数***用于从其他对象的数据初始化***以前未初始化的对象。***

```
A(const A& rhs) : data_(rhs.data_) {} 
```

例如：

```
A aa;
A a = aa;  //copy constructor 
```

***赋值运算符***用于将先前初始化的对象的数据替换为其他***对象***的数据。

```
A& operator=(const A& rhs) {data_ = rhs.data_; return *this;} 
```

例如：

```
A aa;
A a;
a = aa;  // assignment operator 
```

您可以通过默认构造加赋值来替换复制构造，但这会降低效率。

（附带说明：我上面的实现正是编译器免费授予您的实现，因此手动实现它们没有多大意义。如果您拥有这两者之一，则很可能您正在手动管理某些资源。在这种情况下，根据*[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)*，你很可能还需要另一个加上一个析构函数。）

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-23T12:13:09.640

复制构造函数和赋值运算符之间的区别给新手程序员带来了很多困惑，但实际上并没有那么困难。总结：

*   如果在复制发生之前必须创建一个新对象，则使用复制构造函数。
*   如果在复制之前不必创建新对象，则使用赋值运算符。

**赋值运算符示例：**

```
Base obj1(5); //calls Base class constructor
Base obj2; //calls Base class default constructor
obj2 = obj1; //calls assignment operator 
```

**复制构造函数的示例：**

```
Base obj1(5);
Base obj2 = obj1; //calls copy constructor 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-29T02:00:00.627

第一个是复制初始化，第二个只是赋值。没有赋值构造函数之类的东西。

```
A aa=bb; 
```

使用编译器生成的复制构造函数。

```
A cc;
cc=aa; 
```

使用默认构造函数来构造`cc`，然后在`operator =`已经存在的对象上使用 *赋值运算符** ( )。

> 我想知道如何分配赋值构造函数和复制构造函数的内存？

IDK 在这种情况下分配内存是什么意思，但如果你想看看会发生什么，你可以：

```
class A
{
public :
    A(){ cout<<"default constructor"<<endl;};
    A(const A& other){ cout<<"copy constructor"<<endl;};
    A& operator = (const A& other){cout <<"assignment operator"<<endl;}
}; 
```

我还建议你看看：

[为什么调用复制构造函数而不是转换构造函数？](https://stackoverflow.com/questions/11222076/why-is-copy-constructor-called-instead-of-conversion-constructor)

[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-19T20:35:37.680

简单来说，

当从现有对象创建新对象时调用复制构造函数，作为现有对象的副本。当已经初始化的对象从另一个现有对象分配新值时，将调用赋值运算符。

例子-

```
t2 = t1;  // calls assignment operator, same as "t2.operator=(t1);"
Test t3 = t1;  // calls copy constructor, same as "Test t3(t1);" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-03T07:04:09.743

@Luchian Grigore 说的是这样实现的

```
class A
{
public :
    int a;
    A(){ cout<<"default constructor"<<endl;};
    A(const A& other){ cout<<"copy constructor"<<endl;};
    A& operator = (const A& other){cout <<"assignment operator"<<endl;}
};

void main()
{
    A sampleObj; //Calls default constructor
    sampleObj.a = 10;

    A copyConsObj  = sampleObj; //Initializing calls copy constructor

    A assignOpObj; //Calls default constrcutor
    assignOpObj = sampleObj; //Object Created before so it calls assignment operator
} 
```

输出

* * *

默认构造函数

* * *

复制构造函数

* * *

默认构造函数

* * *

赋值运算符

* * *

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-01-01T12:35:18.243

复制构造函数和赋值构造函数的区别是：

1.  如果是复制构造函数，它会创建一个新对象。( `<classname> <o1>=<o2>`)
2.  在赋值构造函数的情况下，它不会创建任何对象意味着它适用于已创建的对象（`<o1>=<o2>`）。

两者的基本功能相同，它们将数据从 o2 逐个成员复制到 o1 成员。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-18T18:09:17.657

我想就这个话题再补充一点。“赋值运算符的运算符函数只能写为类的成员函数。” 与其他二元或一元运算符不同，我们不能将其作为友元函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-24T11:28:23.820

关于复制构造函数的补充：

*   当按值传递对象时，它将使用复制构造函数

*   当一个对象按值从函数中返回时，它将使用复制构造函数

*   使用另一个对象的值初始化对象时（如您给出的示例）。

# ios - ios - 混合 MIDI 文件，每个文件都有自己的声音字体

> ID：11706042
> 
> 赞同：4
> 
> 时间：2012-07-29T01:57:01.133
> 
> 标签：ios, audio, core-audio, midi, coremidi

我正在寻找一种方法来混合 2 个或多个 midi 文件，每个文件都有自己的声音字体文件。我为一个文件找到了以下代码，并尝试制作多个音乐播放器，但我想这不应该是正确的方法。此外，我每秒都会听到一些奇怪的流行音乐。

那么有没有其他方法，可能没有音乐播放器和音乐序列方法，只使用 au 单位？

这是我在另一个线程中找到的代码：

```
-(void) playMusic:(NSString*) name
{
NSString *presetURLPath = [[NSBundle mainBundle] pathForResource:@"GortsMiniPianoJ1" ofType:@"SF2"];
NSURL * presetURL = [NSURL fileURLWithPath:presetURLPath]; 
[self loadFromDLSOrSoundFont: (NSURL *)presetURL withPatch: (int)3];

NSString *midiFilePath = [[NSBundle mainBundle] pathForResource:name ofType:@"mid"];
NSURL * midiFileURL = [NSURL fileURLWithPath:midiFilePath];

NewMusicPlayer(&musicPlayer);

if (NewMusicSequence(&musicSequence) != noErr) 
{
    [NSException raise:@"play" format:@"Can't create MusicSequence"];  
}

if(MusicSequenceFileLoad(musicSequence, (CFURLRef)midiFileURL, 0, 0 != noErr)) 
{
    [NSException raise:@"play" format:@"Can't load MusicSequence"];
}

MusicPlayerSetSequence(musicPlayer, musicSequence);
MusicSequenceSetAUGraph(musicSequence, _processingGraph);
MusicPlayerPreroll(musicPlayer);
MusicPlayerStart(musicPlayer);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:31:21.437

多个 MusicPlayer 实例听起来有点尴尬（保持同步），我怀疑多个 AUGraph 是否可以工作。我自己没试过。

使用 的唯一实例的一种方法是`MusicPlayer`将每个 MIDI 文件中的曲目加载到“主”序列中。您可以为每个音轨 ( ) 分配一个 AUSampler 节点（具有唯一的 soundFont），`MusicTrackSetDestNode`并通过`AUMixer`. 您需要管理每个 midi 文件的速度（使用`MusicTrackNewExtendedTempoEvent`）将文件速度分配给相关轨道。静音轨道 + 轨道音量可在轨道或混音器级别轻松处理。

我想很大程度上取决于您正在使用的 MIDI 文件的性质。Fwiw - 我对 iOS 上的 midi 文件播放做了很多研究，没有什么比 MusicPlayer 更容易使用的了。但是，如果 MusicPlayer 不适合您， [Bass 库](http://www.un4seen.com/)可能值得一看。

**指定混频器输入的数量：**

```
// set the bus count
UInt32 numBuses = BUS_COUNT; // a constant defined elsewhere
result = AudioUnitSetProperty(mixerUnit, 
                              kAudioUnitProperty_ElementCount, 
                              kAudioUnitScope_Input, 
                              0, 
                              &numBuses, 
                              sizeof(numBuses));

if (noErr != result) {[self printErrorMessage: @"Error setting Bus Count" withStatus: result]; return;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T08:10:51.170

我和你有完全相同的问题。所有曲目都使用第一个声音字体乐器播放。我遵循了您的解决方案，但起初它不起作用。最后，我解决了这个问题。正如您所提到的，调用函数的顺序确实很重要。是的。实际上，序列调用应该是这样的：

```
.....
MusicSequenceSetAUGraph(s, _processingGraph);
.......
MusicTrackSetDestNode(track[i], samplerNodes[i]);
......
[self loadFromDLSOrSoundFont];
......
MusicPlayerStart(p); 
```

这适用于我的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T02:21:59.913

所以我尝试为每个轨道设置节点，但这并没有改变任何东西。soundfont 只为第一个设置`samplerUnit`。这是我设置图表的方式：

```
AudioComponentDescription MixerUnitDescription;
MixerUnitDescription.componentType          = kAudioUnitType_Mixer;
MixerUnitDescription.componentSubType       = kAudioUnitSubType_MultiChannelMixer;
MixerUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
MixerUnitDescription.componentFlags         = 0;
MixerUnitDescription.componentFlagsMask     = 0;

AudioComponentDescription cd = {};
cd.componentManufacturer     = kAudioUnitManufacturer_Apple;
cd.componentType = kAudioUnitType_MusicDevice; // type - music device
cd.componentSubType = kAudioUnitSubType_Sampler; // sub type - sampler to convert our MIDI

result = NewAUGraph (&_processingGraph);
result = AUGraphAddNode(self.processingGraph, &MixerUnitDescription, &mixerNode);

result = AUGraphAddNode (self.processingGraph, &cd, &samplerNode);

result = AUGraphAddNode (self.processingGraph, &cd, &samplerNode2);

cd.componentType = kAudioUnitType_Output;  // Output
cd.componentSubType = kAudioUnitSubType_RemoteIO;  // Output to speakers

result = AUGraphAddNode (self.processingGraph, &cd, &ioNode);
result = AUGraphOpen (self.processingGraph);

result = AUGraphConnectNodeInput (self.processingGraph, samplerNode, 0, mixerNode, 0);
result = AUGraphConnectNodeInput (self.processingGraph, samplerNode2, 0, mixerNode, 1);

result = AUGraphConnectNodeInput (self.processingGraph, mixerNode, 0, ioNode, 0);
result = AUGraphNodeInfo (self.processingGraph, samplerNode, 0, &_samplerUnit);
result = AUGraphNodeInfo (self.processingGraph, samplerNode2, 0, &_samplerUnit2);
result = AUGraphNodeInfo (self.processingGraph, ioNode, 0, &_ioUnit); 
```

这是 Apple Developer 页面中的示例方法，我对其进行了修改以将声音字体分配给特定的`samplerUnit`：

```
-(OSStatus) loadFromDLSOrSoundFont: (NSURL *)bankURL withPatch: (int)presetNumber withAudioUnit:(AudioUnit)auUnit{

OSStatus result = noErr;

// fill out a bank preset data structure
AUSamplerBankPresetData bpdata;
bpdata.bankURL  = (__bridge CFURLRef) bankURL;
bpdata.bankMSB  = kAUSampler_DefaultMelodicBankMSB;
bpdata.bankLSB  = kAUSampler_DefaultBankLSB;
bpdata.presetID = (UInt8) presetNumber;

// set the kAUSamplerProperty_LoadPresetFromBank property
result = AudioUnitSetProperty(auUnit,
                          kAUSamplerProperty_LoadPresetFromBank,
                          kAudioUnitScope_Global,
                          0,
                          &bpdata,
                          sizeof(bpdata));

// check for errors
NSCAssert (result == noErr,
       @"Unable to set the preset property on the Sampler. Error code:%d '%.4s'",
       (int) result,
       (const char *)&result);

return result;
} 
```

然后我做了两次让每首曲目进入`musicSequence`：

```
if(MusicSequenceFileLoad(tmpSequence, (__bridge CFURLRef)midiFileURL, 0, 0 != noErr)) 
{
    [NSException raise:@"play" format:@"Can't load MusicSequence"];
}

MusicSequenceGetIndTrack(tmpSequence, 0, &tmpTrack);
MusicSequenceNewTrack(musicSequence, &track);
MusicTimeStamp trackLen = 0;
UInt32 trackLenLen = sizeof(trackLen);
MusicTrackGetProperty(tmpTrack, kSequenceTrackProperty_TrackLength, &trackLen, &trackLenLen);
MusicTrackCopyInsert(tmpTrack, 0, trackLenLen, track, 0); 
```

最后：

```
MusicTrackSetDestNode(track, samplerNode);
MusicTrackSetDestNode(track2, samplerNode2); 
```

但这不会将声音字体分配给`samplerUnit2`：

```
[self loadFromDLSOrSoundFont: (NSURL *)presetURL2 withPatch: (int)0 withAudioUnit:self.samplerUnit2]; 
```

分配给`samplerUnit`工作正常。任何想法我在这里缺少什么？

# javascript - JQuery：在范围内获取对象

> ID：11706043
> 
> 赞同：3
> 
> 时间：2012-07-29T01:57:08.647
> 
> 标签：javascript, jquery, click

我对 jQuery 很陌生。以下是我的代码的一部分

```
<div class = 'buttons'>
    <span>
    <input type='button' value='BUTTON1' id='button1'>
    </span>
    <span>
    <input type='button' value='BUTTON2' id='button2'>
    </span>
</div> 
```

使用 jquery，我想打印单击按钮的 id。我尝试了以下方法：

```
$(".buttons > span").click(function () {
    alert("YOU CLICKED" + this.id);
}); 
```

但我认为这是指跨度对象。这很奇怪，因为 span 对象怎么会有点击事件？还是所有 jquery 对象都有“点击”？如何获取跨度中按钮的 ID？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T02:01:31.250

那这个呢？

```
$(".buttons > span > input").click(function () {
    alert("YOU CLICKED" + this.id);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T02:10:32.770

这是通过捕获事件的目标元素来做到这一点的另一种方法：

```
$(".buttons > span").click(function (e) { 
    alert("YOU CLICKED" + e.target.id); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T02:00:26.460

```
$(".buttons > span").click(function () {
    alert("YOU CLICKED" + $('input[type=button]',this).prop('id'));
 }); 
```

或者您可以将事件绑定到按钮本身

```
$(".buttons > span > input[type=button]").click(function () {
    alert("YOU CLICKED" + this.id);
 }); 
```

# python - 在 Python-Requests 中使用 Chrome 的 cookie

> ID：11706046
> 
> 赞同：18
> 
> 时间：2012-07-29T01:58:17.543
> 
> 标签：python, google-chrome, cookies, python-requests, steam

我正在尝试使用从 Chrome 会话中获得的 cookie登录[http://www.steampowered.com网站。](http://www.steampowered.com)

一旦我`cookie`使用命令`SELECT * FROM cookie WHERE host_key LIKE '%steam%'`和列名获取了所有表的数据：`PRAGMA table_info(cookie)`并使用列表理解对所有数据进行了排序，我不知道如何将其全部传递给以`requests`使 cookie 变得可用。

的[文档](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)`request`说您需要传入一个字典，即，但随后一些键会相互覆盖，因为其中一些键是 : ，尽管它们是不同的主机。`cookies={'cookies':'are_working'}``name``name``Steam_Language`

编辑：刚刚发现[如何在 Python 中将 cookie 添加到现有的 cookielib CookieJar 实例？](https://stackoverflow.com/questions/2169281/how-to-add-cookie-to-existing-cookielib-cookiejar-instance-in-python)这可能对我有帮助，但我不知道如何为 cookielib 格式化 Chrome cookie

**我的问题是：**我如何将几个不同的网站价值 cookie 传递给`requests`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-14T13:15:24.047

我创建[了一个模块来从 Firefox 加载 cookie](https://bitbucket.org/richardpenman/browsercookie)。

请求的示例用法：

```
import requests
import browser_cookie
cj = browser_cookie.firefox()
r = requests.get(url, cookies=cj) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T04:42:52.537

请记住，您正在尝试做一些 HTTP 规范有意阻止您做的事情（即将 cookie 发送到它们并非来自的域）。所以你可能从一开始就注定要失败。更糟糕的是，我粗略地看了一下蒸汽动力工具的登录方式，你的工作已经完成了。

回到你的问题...

现在，假设您的蒸汽驱动会话 cookie 是有效的（它们可能不是基于登录页面执行的加密、密钥共享和验证码方法），您可以通过简单地提供一个有效的 cookie 字典作为文档状态。

```
my_cookies = {'cookiename1': 'cookievalue1', 'cookiename2': 'cookievalue2'}
response = requests.get(
    'http://www.steampowered.com/mystuff',
    cookies=my_cookies) 
```

另外，我不知道您从中获取 cookie 的数据库中存储了哪些数据，但请记住，它们可能存储了带有“Set-Cookie”标头的所有元数据（到期、路径、域等）。这是用户代理（Chrome、IE、请求库等）用来确定在请求中发送哪些 cookie 但不包含在请求中的信息。'Cookie' 标头只有名称=值对。这就是您需要在 cookie 字典中提供的所有内容。

而且，如果您有两个同名的 cookie，请选择一个。因为最后，很可能只会评估一个，否则服务器将简单地返回一个错误。

# smarty - 如何在 smarty .tpl 文件中使用 php 将 class='current-menu-item' 添加到 html 菜单

> ID：11706047
> 
> 赞同：0
> 
> 时间：2012-07-29T01:58:21.337
> 
> 标签：smarty

我有 header.tpl 文件要包含在我运行 Smarty 的整个网站中。当页面在浏览器中处于活动状态时，我需要一个 php-if 代码来使某些导航菜单元素采用类“当前菜单项”。

```
<ul>
<li class="current-menu-item"><a href="http://localhost/dbk/index.php">Home</a> </li>
<li><a href="#">Company</a>
  <ul class="sub-menu">
    <li><a href="http://localhost/dbk/about.php">About Company</a></li>
    <li><a href="http://localhost/dbk/team.php">Excuslive Team</a></li>
    <li><a href="http://localhost/dbk/global-business.php">Global Business</a></li>
    <li><a href="http://localhost/dbk/contract-manufacturing.php">Contract Manufacturing</a></li>
  </ul>
</li>
<li><a href="#">Our Products</a>
  <ul class="sub-menu">
    <li><a href="http://localhost/dbk/pharmaceutical-products.php">Pharmaceutical Products</a></li>
    <li><a href="http://localhost/dbk/products/herbal-and-food.php">Herbal & Food Supplements</a></li>
    <li><a href="http://localhost/dbk/products/cosmetics.php">Cosmetics</a></li>
    <li><a href="http://localhost/dbk/products/veterinary-products.php">Veterinary Products</a></li>
  </ul>
</li>
<li><a href="http://localhost/dbk/blog">News Room</a></li>
<li><a href="http://localhost/dbk/careers.php">Careers</a> </li>
<li><a href="http://localhost/dbk/contacts.php">Contacts</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:17:39.357

## 我是怎么做到的

在 PHP 脚本中，执行类似`$smarty->assign("curPage", $currentPage);`（`$currentPage`设置通过`$_GET`或您的方式）之类的操作。

我在我的模板文件中使用它：

```
{foreach from=$aMenu key=key item=value}
    {assign var="class" value=""}
    {if $curPage == $value}
        {assign var="class" value=" class='current-menu-item'"}
    {/if}

    <li{$class}><a href="/{$value}">{$key}</a></li>
{/foreach} 
```

## 在解释的步骤中

1.  首先我启动 foreach 循环，循环我所有的菜单元素（通过 PHP 设置）。
2.  分配`class`变量，为空。
3.  检查`curPage`（还记得`$currentPage`PHP 吗？）是否匹配当前的 foreach 循环项
4.  如果是，请将项目设置为选中（使用`class='current-menu-item'`）。
5.  最后输出`<li>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:32:28.367

只需通过本地分配的 tpl 变量，即：

```
<li {if $page == "about"}class="current-menu-item"{/if}><a href="http://localhost/dbk/about.php">About Company</a></li> 
<li {if $page == "team"}class="current-menu-item"{/if}><a href="http://localhost/dbk/team.php">Excuslive Team</a></li> 
```

# parsing - 计算字段中实体数量的宏

> ID：11706048
> 
> 赞同：0
> 
> 时间：2012-07-29T01:59:45.583
> 
> 标签：parsing, excel, vba

我必须编写一个宏来显示另一列中一列中的实体数。

假设 excel 中的一列有记录 a,b,c,d,e

我必须显示出现的次数，即消除逗号并显示数字 5.. 这是基本的逻辑，当然还有更多的变化

对于excel中的宏，这必须在VB中完成。

将不胜感激任何帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:35:24.877

听起来您需要拆分功能 - 请查看[The Versatile Split Function中的“计数单词”示例](http://spreadsheetpage.com/index.php/site/tip/the_versatile_split_function/)

在这里，修改为使用逗号

```
Function WordCount(txt) As Long
'   Returns the number of words in a string
    Dim x As Variant
    txt = Application.Trim(txt)
    x = Split(txt, ",")
    WordCount = UBound(x) + 1
End Function 
```

# ffmpeg - 使用 ffmpeg 转换视频格式和复制标签

> ID：11706049
> 
> 赞同：15
> 
> 时间：2012-07-29T01:59:50.040
> 
> 标签：ffmpeg, metadata

我一直在尝试将我在相机上拍摄的一些视频转换为压缩格式，以节省一些存储空间。我想出了如何使用 ffmpeg 将视频转换为我想要的格式，但我无法弄清楚如何复制元数据。我想复制视频拍摄时的原始元数据（最重要的是创建时间）。我尝试使用 -map_meta_data 0:0 选项运行 ffmpeg，但这似乎不起作用。有任何想法吗？

在这种情况下，我想要复制的数据似乎位于视频的格式部分。将 ffprobe 与 show_format 选项一起使用，我得到以下输出：

```
[FORMAT]
filename=video.AVI
nb_streams=2
format_name=avi
format_long_name=AVI format
start_time=0.000000
duration=124.565421
size=237722700
bit_rate=15267331
TAG:creation_time=2012-02-07 12:15:27
TAG:encoder=CanonMVI06
[/FORMAT] 
```

我想将这两个标签复制到我的新视频中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T04:35:56.597

查看[有关转储和加载元数据的文档](http://www.ffmpeg.org/ffmpeg.html#Metadata)：

> FFmpeg 能够将媒体文件中的元数据转储到一个简单的 UTF-8 编码的类似 INI 的文本文件中，然后使用元数据复用器/解复用器将其加载回来。

该过程可能如下所示：

```
# First extract metadata
ffmpeg -i original.mov -f ffmetadata metadata.txt
# Next, transcode, including extracted metadata
ffmpeg -i original.mov -f ffmetadata -i metadata.txt compressed.mp4 
```

我现在没有要测试的元数据视频，但类似的东西应该可以。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-21T08:25:04.437

使用“-map_metadata 0:g”复制所有*全局*元数据。

0 表示输入#0。g 表示*全局*元数据。

这是我的 ffprobe 结果。请享用！

**输入.mp4**

```
[FORMAT]
filename=input.mp4
nb_streams=2
nb_programs=0
format_name=mov,mp4,m4a,3gp,3g2,mj2
format_long_name=QuickTime / MOV
start_time=0.000000
duration=60.560500
size=190252680
bit_rate=25132246
probe_score=100
TAG:major_brand=mp42
TAG:minor_version=1
TAG:compatible_brands=mp42avc1
TAG:creation_time=2016-05-14 10:01:17
[/FORMAT] 
```

**输出.mp4**

```
[FORMAT]
filename=output.mp4
nb_streams=2
nb_programs=0
format_name=mov,mp4,m4a,3gp,3g2,mj2
format_long_name=QuickTime / MOV
start_time=0.000000
duration=60.632000
size=38636429
bit_rate=5097826
probe_score=100
TAG:major_brand=isom
TAG:minor_version=512
TAG:compatible_brands=isomiso2avc1mp41
TAG:creation_time=2016-05-14 01:01:17
TAG:encoder=Lavf57.36.100
[/FORMAT] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-29T08:57:20.523

要将所有元数据（全局、视频、音频）写入文件，请使用

```
ffmpeg -i in.mp4 -c copy -map_metadata 0 -map_metadata:s:v 0:s:v -map_metadata:s:a 0:s:a -f ffmetadata in.txt 
```

要添加文件中的所有元数据，请使用

```
ffmpeg -i in.mp4 -f ffmetadata -i in.txt -c copy -map_metadata 1 out.mp4 
```

# ruby-on-rails - 请求 API 密钥

> ID：11706050
> 
> 赞同：1
> 
> 时间：2012-07-29T01:59:51.973
> 
> 标签：ruby-on-rails, api, api-key

我正在从[该站点](http://www.footytube.com/openfooty/signup.php)请求 API 密钥，他们要求我提供两件我不太清楚的事情（忽略这样一个事实，即如果我不知道如何回答这些问题，我不应该请求 API 密钥）在。

**1.IP访问** [“输入将访问服务的IP地址”](http://www.footytube.com/openfooty/signup.php)

我在终端中运行'host“www.myapp.com”'来获取IP列表，这些是我在这个字段中输入的地址吗？

**2\. 用户代理** [“在下面输入用户代理字符串，以便在您的应用程序中使用 id'”](http://www.footytube.com/openfooty/signup.php)

我将如何找到它以及它如何适合架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:21:21.157

假设 www.myapp.com 是请求的来源，您似乎对 host 命令有正确的想法。它说将它们放入逗号分隔的列表中，如下所示：`1.2.3.4, 5.6.7.8, 9.10.11.12`

用户代理取决于发出请求的软件，因此它取决于您使用的内容，您通常可以选择将其设置为什么。[您可以在Wikipedia](http://en.wikipedia.org/wiki/User_agent "关于用户代理的维基百科文章。")上了解有关用户代理的更多信息 如果您碰巧使用 Nokogiri 发出请求，您可以像这样选择您的 UA：

```
Nokogiri::HTML(open(url, "User-Agent" => "MyApp")) 
```

您可能希望将其设置为可以`MyApp`识别您的内容。

# regex - 编译代码中的正则表达式语法 - 密码

> ID：11706055
> 
> 赞同：0
> 
> 时间：2012-07-29T02:00:42.967
> 
> 标签：regex, syntax

我正在使用以下代码模式进行密码验证。由于某种原因，正则表达式语法适用于外部站点，但不适用于编译代码。换句话说，它在应该返回 true 时返回 false。

这在编译代码中不起作用（参见示例作为注释），但在[http://www.regexlib.com](http://www.regexlib.com)之类的站点中起作用：

我有点难过....任何帮助都非常感谢。c#, MVC3,

```
 // Function to check for valid password.
    public bool IsPassword(String strToCheck)
    {
        // Password expresion that requires one lower case letter, one upper case letter, one digit, 6-13 length, and no spaces.
        // 1agdA*$# | 1agdA*$# | 1agdA*$#
        var objPasswordPattern = new Regex(@"^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).{6,13}$");
        return !objPasswordPattern.IsMatch(strToCheck);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:50:44.437

我很确定这只是一个小“！” 在让你绊倒的返回线上。通过这样做，您是在说“不匹配”。我在本地运行了您的代码，这就是发生的事情。

# python - 类构造函数语句

> ID：11706056
> 
> 赞同：0
> 
> 时间：2012-07-29T02:00:56.100
> 
> 标签：python, constructor

我一直在查看以下代码，并对它的含义有疑问。包整体具有以下类：Segment、Cell、Column、Region 和 SegmentUpdateInfo。有问题的代码是最后一行。提前致谢！

```
class SegmentUpdateInfo(object):
    def __init__(self, cell, segment, activeSynapses, addNewSynapses=False):
        #Constructor parameter initialization...

        region = self.cell.column.region #What does this mean and why would someone use 
                                         #it? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:41:04.267

有人这样做的最可能原因是，他们可以在其中引用该变量而无需每次都`__init__()`键入。使用的方法中`self.cell.column.region`还有其他地方吗？`__init__()``region`

# components - Tapestry 5 从页面中使用的其他组件访问页面组件/属性

> ID：11706057
> 
> 赞同：0
> 
> 时间：2012-07-29T02:01:03.673
> 
> 标签：components, tapestry

我正在从 Tapestry 3 切换到 Tapestry 5，我对某些主题有点困惑。在 Tapestry 3 中，可以从同一页面中使用的其他组件访问页面组件/属性，例如：

```
<span jwcid="@RenderBlock" block="ognl:page.components.myMenu"/> 
```

`myMenu`已经在html页面中定义如下：

```
<span jwcid="myMenu@Block">  
  <span jwcid="@MyMenu"/>  
<span/> 
```

`MyMenu`组件在其自己的文件中定义。

Tapestry 5 怎么可能做同样的事情呢？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:38:03.777

Tapestry 5 为此提供了特殊的绑定前缀：

block:foo 将参数绑定到

component:bar 将参数绑定到 t:id="bar" 的组件

除此之外，您可以使用 @Inject 来注入块或组件，并为这些注入公开属性。

您的示例可能类似于：

```
<t:delegate to="block:mymenu"/>

...

<t:block id="mymenu"> ... </t:block> 
```

假设它们都在同一个模板中定义；否则，您必须安排参数或属性以将事物联系在一起。

# mysql - 在什么情况下我应该使用数据库触发器？

> ID：11706062
> 
> 赞同：2
> 
> 时间：2012-07-29T02:02:25.223
> 
> 标签：mysql, database, triggers

我有两张表，一张存储文章和它收到的票数：

```
| article_id | visitor_votes | member_votes | voting_opened |
-------------------------------------------------------------
| 1          | 12            | 394          | Y             |
| 3          | 94            | 5821         | Y             | 
```

我还有另一个表格，它记录了哪个用户投票给了哪篇文章

```
| vote_id | user_id | article_id | date    |
--------------------------------------------
| 1       | 12      | 1          | 7/28/2012
| 2       | 23      | 3          | 7/28/2012 
```

一位用户每笔交易只能投一票。我目前使用的触发器会在每次将记录插入投票表时增加文章表中的投票数。这是一个好的做法还是我应该在我的应用程序（基于 PHP Web 的网站）中这样做？我也想在达到一定票数后停止投票（voting_opened = N），我是否应该使用触发器检查总票数（visitor_votes + member_votes >= 6000）然后更新文章行以设置voting_opened = N？或者这也是我应该在我的应用程序中做的事情？我需要一个可扩展的解决方案，因为我可能会为数百篇文章获得数千票，而且我不想遇到投票数超过阈值的情况，因为更新没有足够快地更新管他呢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:28:04.840

两种解决方案都是有效的，并且应该同样有效。

您可以在应用程序中尝试这样的事情

```
UPDATE articles SET 
    visitor_votes = visitor_votes + 1
    voting_opened = IF(visitor_votes + member_votes >= 6000, 'N', 'Y')
WHERE 
article_id = xxxx
AND voting_opened = 'Y' 
```

然后检查受影响的行，如果它> 0，则将该行插入投票表中。

# ruby - 仅限 Rails 应用程序的邀请系统

> ID：11706064
> 
> 赞同：1
> 
> 时间：2012-07-29T02:02:56.163
> 
> 标签：ruby, ruby-on-rails-3, devise, authlogic, invite

我一直在研究用于 beta 邀请的设计套件的 devise_invitable 插件，并且想知道可行的替代方案。

在几次 Railscast 之后，我已经从头开始为我的应用程序进行身份验证，并且想知道如何让用户请求访问我的应用程序的邀请。用户将通过输入有效的电子邮件地址从“邀请页面”执行此操作。然后，用户将在进入应用程序时收到一封包含一次性密码的电子邮件（应用程序应强制用户在首次登录时更改密码）

![示例用户界面](../Images/6c28a60db0fe5d16bda4d34fd401f1a2.png)

我的问题：

[1](https://i.stack.imgur.com/aiqc3.png)是否有任何教程或资源可以用来构建“邀请页面”；不使用设计？

感谢您的帮助和指导！

# windows-phone-7 - 为什么 NetworkInterface.GetIsNetworkAvailable() 方法总是返回 true，当我在我的 windows phone 7 设备上调试它时？

> ID：11706067
> 
> 赞同：1
> 
> 时间：2012-07-29T02:04:20.853
> 
> 标签：windows-phone-7, networking

为什么 NetworkInterface.GetIsNetworkAvailable() 方法总是返回 true，当我在我的 windows phone 7 设备上调试它时？不是模拟器，确定“NetworkInterface.NetworkInterfaceType==NetworkInterface.None”表示设备无法访问网络？如何检测设备是否连接了具有互联网访问权限的网络？我试过这个链接，[Zune-Detection-and-Network-Awareness](http://www.codeproject.com/Articles/121737/Zune-Detection-and-Network-Awareness)，但是 NetworkInterface.GetIsNetworkAvailable() 方法总是返回 true，这让我很困惑。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:39:43.947

阅读该方法的文档。这是[MSDN 不得不说的](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable%28v=vs.95%29.aspx)：

> 如果任何网络接口被标记为“up”并且不是环回或隧道接口，则认为网络连接可用。
> 
> 在许多情况下，设备或计算机未连接到有用的网络但仍被认为可用，并且 **GetIsNetworkAvailable**将返回**true**。例如，如果运行应用程序的设备连接到需要代理的无线网络，但未设置代理，则**GetIsNetworkAvailable**将返回**true**。**GetIsNetworkAvailable**何时返回 **true**的另一个示例是，如果应用程序在连接到集线器或路由器的计算机上运行，​​而该集线器或路由器已失去上游连接。

一般来说，您可以说这种方法通常容易出错。我建议采用失败请求的方法 - 有几个 URL 来测试并检查 HTTP/DNS 解析请求是否通过。如果其中一些通过 - 存在连接。如果全部失败 - 很可能你没有连接。

[这是一个示例](http://sorokoletov.com/2012/04/quick-way-check-internet-available-windowsphone/)。

# registration - 确保用户即使使用不同的电子邮件地址也无法在系统上注册

> ID：11706068
> 
> 赞同：0
> 
> 时间：2012-07-29T02:04:32.230
> 
> 标签：registration, identification, anonymousidentification

我正在创建一个系统，我试图确保用户即使使用不同的电子邮件地址或更改其 IP 也不能多次注册，那么我应该使用什么策略？我可以用饼干做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:26:53.713

您无法阻止用户多次注册。

用户可能有：

*   动态IP

*   清除Cookies

*   克隆 MAC 地址

*   使用不同的电子邮件帐户

*   没有理智的用户会购买额外的硬件，比如生物特征认证

*   用户可以拥有多张信用卡和地址

最好的情况是，如果在 TOS/AUP 中禁止使用多个帐户，并删除/禁止这些帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:22:52.080

试图绕过基于 cookie 的系统的用户只会清除他的 cookie（或首先不接受它们）。现实生活中的例子 《纽约时报》试图通过设置 cookie 来限制人们每月发表 20 篇文章。虽然这阻止了一些人阅读 20 多篇文章，但许多人认为他们可以删除他们的 cookie 并获得 20 多篇文章（或使用不同的浏览器）。

你也不能使用IP地址。有时用户会经常获得新的 IP 地址。其他时候，一个 IP 地址可能代表许多不同的用户（如果他们在代理服务器后面）。

最接近满足您的要求的是使用设备指纹识别。设备指纹识别的工作原理考虑了多种因素（IP 地址、用户代理、浏览器中安装的字体、浏览器中安装的插件等）。查看

[https://panopticlick.eff.org/](https://panopticlick.eff.org/)

了解它是如何工作的。

有几家公司提供这种技术。谷歌“设备指纹”以获取当前列表。如果您的要求是清楚地了解谁可能拥有多个帐户，那么根据您在 Panopticlick 上看到的内容来滚动您自己的基本设备指纹识别也不难，这比 cookie 或 IP 单独告诉您要好。商业产品投入了相当多的工程努力以从“可靠的想法”变为“非常可靠的想法”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T04:20:47.203

您需要将用户的注册与无法复制或伪造的东西联系起来。这里有一些想法：

1.  一些公司已经用手机号码做到了这一点，理论认为大多数人只有一部手机，而不是两三部，或者，至少人们很难轻易获得一个新号码。因此，让人们给您一个电话号码，向他们发送带有代码的 SMS 消息，然后将该电话号码永久绑定到他们的帐户。

2.  您可以尝试使用处理器 ID 或以太网地址。您需要一些软件来读取 ID（通常使用汇编语言）并返回结果。当然，人们可以破解你的软件，或者从多台机器上注册，但这在某些情况下会很好用。

3.  强迫人们为他们的账户付款。人们通常不想得到很多。

4.  放弃。设计您的系统，以便人们可以多次注册。

祝你好运。

# python - 如何计算纸，石头，剪刀游戏中的胜利？

> ID：11706069
> 
> 赞同：0
> 
> 时间：2012-07-29T02:04:35.023
> 
> 标签：python

循环完成后如何计算胜利。

```
print 'PLAY ROCK PAPER SCISSORS'

for roundd in range(1,6):
    print 'Round: ' + str(roundd)
    human = raw_input('Whats your draw: ')
    from random import choice
    cpu = choice(('rock', 'paper', 'scissors'))

    if human == cpu:
        print 'CPU: ' + cpu
        print 'Draw'

    if cpu == 'rock' and human == 'scissors':
        print 'CPU: ' + cpu
        print 'You Lose'
    if cpu == 'scissors'and human == 'paper':
        print 'CPU: ' + cpu
        print 'You Lose'
    if cpu == 'paper'and human == 'rock':
        print 'CPU: ' + cpu
        print 'You Lose'

    if cpu == 'rock' and human == 'paper':
        print 'CPU: ' + cpu
        print 'You Win!'
    if cpu == 'scissors'and human == 'rock':
        print 'CPU: ' + cpu
        print 'You Win'
    if cpu == 'paper'and human == 'scissors':
        print 'CPU: ' + cpu
        print 'You Win' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T02:16:08.123

@kaveman 的回答是正确的。我只想指出，您可以通过使用字典并从所有语句中删除重复的`print 'CPU: ' + cpu`行来使您的代码更加简洁。`if`

正如@atomicinf 所建议的那样，此代码还检查用户的输入是否有效。否则，我编写的代码将`'lol'`被视为自动获胜。:) 这就是`while`下面的循环所做的：如果用户输入了一个无效的移动，它会给他们一个错误信息并要求他们再试一次，直到他们做了一个有效的移动。

这是进行该更改和其他一些更改的代码，并附有一些关于我为什么要做各种事情的评论：

```
from random import choice # usually, imports go at the top; easier to manage

print 'PLAY ROCK PAPER SCISSORS'

# This dictionary associates a move to the move that it beats.
beats = {
    'rock': 'scissors',
    'paper': 'rock',
    'scissors': 'paper',
}
moves = ('rock', 'paper', 'scissors') # The tuple of all valid moves
# could also do moves = beats.keys()

draws = cpu_wins = human_wins = 0 # start our counter variables off at 0

for roundd in range(1,6):
    print 'Round: ' + str(roundd)
    human = raw_input("What's your draw: ")
    while human not in moves: # keep retrying if they gave a bad move...
        print "Invalid move '%s' - expected one of %s." % (human, ', '.join(moves))
        # this % formatting just replaces the %s with the variable on the left
        print "Try again!"
        human = raw_input("What's your draw: ")
    cpu = choice(moves)

    print 'CPU: ' + cpu # this happens every time, no need to retype it so many times :)

    if human == cpu:
        print 'Draw'
        draws += 1
    elif human == beats[cpu]:
        print 'You Lose'
        cpu_wins += 1
    else:
        print 'You Win'
        human_wins += 1

# done - print out the overall record
print "Your record: %s wins, %s losses, %s draws" % (human_wins, cpu_wins, draws) 
```

说得通？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T02:13:30.433

您可以跟踪 和 的`wins`变量，`cpu`并在`human`每次记录获胜时递增。例如

```
human_wins = 0
cpu_wins = 0

for roundd in range(1,6):
    if cpu == 'paper'and\
       human == 'rock':
        cpu_wins += 1
        print 'CPU: ' + cpu
        print 'You Lose'

    if cpu == 'paper'and\
       human == 'scissors':
        human_wins += 1
        print 'CPU: ' + cpu
        print 'You Win'
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T02:46:05.980

这是一个清理后的版本；可能有启发性：

```
import random

class RockPaperScissors(object):
    choices = ['rock', 'paper', 'scissors']

    def __init__(self):
        self.wins   = 0
        self.draws  = 0
        self.losses = 0

    def cpu(self):
        return random.choice(type(self).choices)

    def human(self):
        while True:
            res = raw_input("What's your draw: ").strip().lower()
            if res in type(self).choices:
                return res
            else:
                print('Enter one of {}'.format(', '.join(type(self).choices)))

    def win(self):
        print('You win!')
        self.wins += 1

    def draw(self):
        print('Draw')
        self.draws += 1

    def lose(self):
        print('You lose')
        self.losses += 1

    def play(self):
        """
        Play one hand
        """
        human = self.human()
        cpu   = self.cpu()
        print("Computer chose {}".format(cpu))
        val   = type(self).choices.index
        [self.draw, self.lose, self.win][(val(cpu) - val(human)) % 3]()

def main():
    print('PLAY ROCK PAPER SCISSORS')
    rps = RockPaperScissors()

    for rnd in xrange(1,6):
        print('Round: {}'.format(rnd))
        rps.play()

    print('Final tally: {} losses, {} draws, {} wins'.format(rps.losses, rps.draws, rps.wins))

if __name__=="__main__":
    main() 
```

# android - 注册内容观察者

> ID：11706070
> 
> 赞同：1
> 
> 时间：2012-07-29T02:04:59.103
> 
> 标签：android, android-contentresolver

我想获得有关任何音频通知的回调。我创建观察者：

```
getContentResolver().registerContentObserver(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, false, new MyContentObserver(_handler) { ... 
```

每次我都会 onChange，然后添加或删除一些歌曲。

但我不明白另一个：我将一些文件（test.log）复制到设备。复制文件后我没有得到 onChange 。但是如果我删除这个文件，我会得到 onChange。但为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:07:36.423

在您的内容提供者中，您可以定义应该为哪个操作发送通知。这是该`delete()`操作的示例。

```
@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    switch (sUriMatcher.match(uri)) {
        case POSTS: {
            int rowCount = db.delete(DatabaseProperties.TABLE_NAME_POSTS, selection, selectionArgs);
            getContext().getContentResolver().notifyChange(uri, null);
            return rowCount;
        }
        default: {
            throw new UnsupportedOperationException("Unknown URI: " + uri);
        }
    }
} 
```

您可能错过的命令是`notifyChange()`.

# c# - 继承、覆盖方法和构造函数

> ID：11706077
> 
> 赞同：0
> 
> 时间：2012-07-29T02:06:31.510
> 
> 标签：c#, inheritance, constructor

这是我的代码。我试图在其中做一些基本的继承，但显示方法似乎不起作用。我认为它与构造函数有关，所以我已经放了一个“base（a，b，c）；” 那里。:)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace School
{
    public class CollegeCourse
    {
        public CollegeCourse(String a, int b, double c)
        {
            dep = a;
             kors = b;
             cre = c;

        }
        public String dep;
        public int kors;
        public double cre;
        public double fee;

        public String getDep()
        { return dep; }

        public int getKors()
        { return kors; }
        public double getCre()
        { return cre; }

        public virtual void display()
        {
            fee = cre * 120;
            Console.WriteLine("Dep is : {0}\n"+
                " Course is : {1}\n Credit is : {2}\nFee is : {3}", 
                getDep(), getKors(), getCre(), fee);
        }
    }

    public class LabCourse : CollegeCourse
    {
        public LabCourse(String a, int b, double c)
            : base(a, b, c)
        {
             dep = a;
            kors = b;
             cre = c;

        }
        public override void display()
        {
            fee = cre * 120;
            Console.WriteLine(@"Dep is : {0}\n "+ 
                "Course is : {1}\n Credit is : {2}\nFee is : {3}", 
                dep, kors, cre, fee + 50);
        }
    }

    public class UseCourse
    {
        public static void teste()
        {
            String a;
            int b;
            double c;
            Console.WriteLine("Input Department:");
            a = Console.ReadLine();
            Console.WriteLine("Input Course:");
            b = Int16.Parse(Console.ReadLine());
            Console.WriteLine("Input Credits:");
            c = Double.Parse(Console.ReadLine());
            CollegeCourse aw = new CollegeCourse(a, b, c);
            LabCourse oy = new LabCourse(a, b, c);
            aw.display();
            oy.display();
            Console.ReadLine();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:18:47.037

在您的构造函数中，您正在创建新的局部变量（在构造函数中），而不是在类中设置属性。

如果您删除 CollegeCourse 构造函数中的类型定义，这应该可以解决您的问题：

```
 public CollegeCourse(String a, int b, double c)
    {
        dep = a;
        kors = b;
        cre = c;

    } 
```

在 LabCourse 中，您不需要设置任何属性，因为您使用传递给 LabCourse 构造函数的参数调用继承的构造函数：

```
 public LabCourse(String a, int b, double c)
        : base(a, b, c)
    {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T02:22:37.070

在您的构造函数中，您正在创建三个与您的字段同名的全新局部变量，这就是为什么没有设置它们的原因。下面是一个典型的类如何设置的例子：

```
public class Shape
{
    private int _sides;
    public int Sides
    {
         get { return _sides; }
         set { _sides = value; }
    }

    public Shape(int sides)
    {
        Sides = sides;
    }
} 
```

请注意，字段通常是私有的，属性是公共的，以及传递给构造函数的参数如何分配给属性或字段。

# sqlite - 如何查询那些在表中出现两次以上的数据？

> ID：11706083
> 
> 赞同：0
> 
> 时间：2012-07-29T02:07:07.193
> 
> 标签：sqlite

我想从订单表中查询客户，只有两次以上的客户订单是合格的。我应该使用哪个子句或过滤器来过滤这些客户订单两次以上？请帮助我使用 SQLite。

最好的问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:17:05.670

```
SELECT customer_id FROM orders GROUP BY customer_id HAVING count(*) > 2; 
```

将来，请提供更多信息，例如表定义，否则您可能会得到一些反对票:)

# java - Android Apk反编译似乎很容易

> ID：11706084
> 
> 赞同：13
> 
> 时间：2012-07-29T02:07:32.583
> 
> 标签：java, android, obfuscation, apk, decompiler

我只是在胡闹。我下载了 dex2jar [http://code.google.com/p/dex2jar/](http://code.google.com/p/dex2jar/)和 Java Decompiler JD-GUI [http://java.decompiler.free.fr/?q=jdgui](http://java.decompiler.free.fr/?q=jdgui)

我得到**了自己的**apk 文件（签名、密封并在 Google Play 上），使用 dex2jar 将其制成 jar 存储库。

命令行（Windows 用户使用 .bat，其他人使用 .sh）：

```
d2j-dex2jar.bat -f MyAwesomeApp.apk 
```

我将输出拖放到 JD-GUI 中，所有类文件，原始代码重新出现。我有点吃惊。我的 java/Android 代码暴露了吗？如果可以如此轻松地反编译和重新生成，ProGuard 如何保护我的 apk？好像一点都不糊涂……

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:18:12.790

混淆器通常只是简单地将类、方法和字段名称更改为没有意义的名称。所以，如果你有“ScoreCalculator.computeScore(Player p, Match m)”，你最终会得到“A.zk(F f, R r)”。这类似于 Uglify 或 Closure 编译器为 javascript 所做的，只是在 javascript 中它是为了减少源代码长度。

无论如何都可以理解该方法的作用，只是更难。

此外，Java 使用后期绑定（作为 DLL 或 SO 文件）。因此，不能混淆代码之外的调用（如 java.util、java.lang 等包）。此外，如果您的代码需要接收来自外部的调用（典型示例，在按钮上注册一个侦听器），则该代码不能被混淆。DLL 也是如此，您可以清楚地看到需要在 DLL 外部调用的方法的名称以及对其他 DLL 的调用。

但是，某个源代码和编译后的代码之间的映射不一定是一一对应的。旧的 C 编译器用于为给定的源指令生成相同的操作码，因此反编译器非常有效。然后 C 编译器为生成的操作代码添加了许多优化，这些优化使反编译器大多无效[[1]](http://www.debugmode.com/dcompile/)

Java 从未在编译时实现（很多）优化，因为要在不同的平台（包括不同的 android 设备）上运行，Java 决定稍后在运行时根据运行设备的架构和硬件属性应用严重的优化（这就是“HotSpot”的主要内容[[2]](http://en.wikipedia.org/wiki/HotSpot)）。

好的混淆器通常还会重新排序字节码指令，或者插入一些无用的指令，或者预先应用一些优化以使反编译器无法（或不太能够）如此轻松地导出源代码。

对于可以阅读字节码的人来说，这种技术是无用的，因为如果一个人可以阅读汇编代码，任何可能的 C 混淆都是无用的。

正如许多破解软件所展示的那样，逆向工程始终是可能的，即使使用 C 或其他语言，甚至在固件上（想想 iPhone 固件），因为运行您的代码的客户端总是不受信任的，并且总是可以被篡改。

如果你有非常关键的代码，价值很多钱的东西，别人可能会窃取，我建议在服务器端运行它，或者以某种方式在服务器端验证它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-08T05:44:18.560

我还可以补充一点，这个 APKTool->dex2jar->JD-GUI 路线有现代替代方案！

只需尝试名为 Jadx 的开源 APK 和 DEX 反编译器：[https](https://sourceforge.net/projects/jadx/files/) ://sourceforge.net/projects/jadx/files/ 这里也有在线版本：[http ://www.javadecompilers.com/apk](http://www.javadecompilers.com/apk)

# javascript - 页面加载后更改提示内容

> ID：11706086
> 
> 赞同：3
> 
> 时间：2012-07-29T02:07:40.040
> 
> 标签：javascript, jquery, cluetip

我想在页面加载后更改提示内容。

假设我的线索提示中有一个按钮，单击它后，我希望它消失。

所以这里是线索提示：

```
 $('a.notice_tooltip').cluetip({activation: 'click', cluetipClass: 'jtip' ,
 local:true ,   positionBy: 'bottomTop' , arrows: true,   sticky: true  ,   closePosition: 'title' }); 
```

HTML：

```
 <a class="notice_tooltip" href="#" rel="#info_div"  > open tooltip </a>
    <div id="info_div"> 
    <input class="btn' type="button" >
    <input class="btn2' type="button" >
    </div> 
```

这是点击事件：

```
$('.btn').click(function(){
  //do stuff

  $(this).parent().append(some_message);
  $(this).remove();

})

$('.btn2').click(function(){
  //do stuff

  $(this).parent().append(some_message);
  $(this).remove();

}) 
```

这将删除按钮并向其父级附加一条消息，但是当我重新打开线索提示时，它又是旧内容。

就像，插件在页面加载时获取 DOM 结构，之后，它不关心页面的变化。

每次关闭时，我都尝试再次运行该插件。

```
 $(function(){

    $('.btn').click(function(){
      //do stuff
      $(this).remove();

    })

        $('a.notice_tooltip').cluetip({activation: 'click', cluetipClass: 'jtip' , local:true ,   positionBy: 'bottomTop' , 
        arrows: true,   sticky: true  ,   closePosition: 'title' , onHide : function(ct,c) {

          retooltip();

          }

        });
 })

     function  retooltip(){
       $('a.notice_tooltip').cluetip('destroy');
       $('a.notice_tooltip').cluetip({activation: 'click', cluetipClass: 'jtip' , local:true ,
         positionBy: 'bottomTop' , arrows: true,   sticky: true  ,   closePosition: 'title' , onHide : function(ct,c) {
           retooltip();

         }

       });
      } 
```

还是一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:37:07.833

## 问题

每次关闭 Cluetip 时，它都会丢弃其内容，并在下次打开时从原始元素中检索它。这意味着如果您想对 Cluetip 的内容进行持久修改，您还必须对原始元素进行这些修改。

## 一个可能的解决方案

单击按钮时，向上查找直到找到`cluetip`内部包装，然后选择它的第一个 child `div`。使用它来查找原始`div`，并删除其中的按钮。然后删除单击的按钮。

```
$(function(){
    $('a.notice_tooltip').cluetip({
        activation: 'click', 
        cluetipClass: 'jtip',  
        local: true,
        positionBy: 'bottomTop', 
        arrows: true,   
        sticky: true  ,
        closePosition: 'title'
    });

    $('.btn').click(function(){
        // Find the original element
        var originalId = $(this).closest('.cluetip-inner > div').attr('id');            
        // Remove it
        $('#' + originalId).find('.' + $(this).attr('class')).remove();
        // Remove the clicked button
        $(this).remove();
    });

});​ 
```

[工作示例](http://jsfiddle.net/faceleg/zzxuw/7/)。

# routing - 代码点火器路由

> ID：11706088
> 
> 赞同：0
> 
> 时间：2012-07-29T02:08:28.437
> 
> 标签：routing, codeigniter-2

当我去这里时： localhost/codeigniter/index.php/gallery 文件就在那里

但是当我去这里时： localhost/codeigniter/gallery 我得到这个： Not Found 在此服务器上找不到请求的 URL /codeigniter/gallery。

但是，当我去这里时：localhost/codeigniter/ 一切都很好。它与 localhost/codeigniter/index.php/ 相同

我把它放在系统文件夹中的 .htacess 文件中： RewriteEngine on RewriteCond $1 !^(index.php|images|robots.txt) RewriteRule ^(.*)$ /index.php/$1 [L]

我还确保在 config.php 文件中

$config['base_url'] = '';

$config['index_page'] = '';

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:10:27.317

您需要`mod_rewrite`启用。之所以`localhost/codeigniter`有效，是因为它默认为 index.php 文件。但是，除此之外，服务器会查找目录。您需要 Apache 以不同的方式解析它。

看这里：

[删除 CodeIgniter index.php](http://www.anmsaiful.net/blog/php/remove-codeigniter-index-php.html)

# jquery - 在 wp_editor 中使用 jquery

> ID：11706091
> 
> 赞同：1
> 
> 时间：2012-07-29T02:09:47.487
> 
> 标签：jquery, wordpress

这是场景：

我正在 wordpress 管理员中创建一个页面。我创建了一个名为 Contact Us 的页面，在编辑器或 WYSIWYG 中我制作了一个表单和一个按钮。我想使用 $.post 提交表单。

编辑器内部：

```
<form>
    <input type="text" name="txt"/>
    <input type="button" id="btn" value="Save"/>
</form> 
```

在 page.php 中，我包含了以下代码：

```
$(document).ready(function(){
    $('#btn').click(function(){
        alert('save');
    });
}); 
```

但是萤火虫控制台中有一个错误说： ReferenceError: jQuery is not defined

这有什么问题？或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:24:51.837

这个错误：

> ReferenceError：未定义 jQuery

表示未定义 jQuery 命名空间，这是因为您忘记包含 jQuery 库，客户端浏览器在指定地址中找不到它，或者客户端浏览器与 jQuery 不兼容（该错误显示在 IE 5.5即使地址正确）。

此外，如果您使用 WP 的嵌入式 jQuery 库，则不能使用`$`在全局范围内引用 jQuery，因为 WP 会自动将其设置为[noConflict 模式](http://api.jquery.com/jQuery.noConflict/)。取自[文档](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)：

> 注意：WordPress 附带的 jQuery 库以“无冲突”模式加载。这是为了防止与 WordPress 可以加载的其他 javascript 库的兼容性问题。

您可以为别名创建一个闭包，`$`如下所示`jQuery`：

```
jQuery(document).ready(function($) {
    // $() will work as an alias for jQuery() inside of this function
}); 
```

要使用嵌入式库，您还应该使用[`wp_enque_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script).

[查看此帖子](https://stackoverflow.com/a/952305/1331430)以获取更多详细信息。

显然，您也可以从 Google CDN 中包含它，`wp_enque_script`并通过直接添加/回显脚本标签来跳过所有这些和关闭指南，这是我个人会做的，但我没有这么说！`:)`

# c# - c# - 以正确的间距打印 RichTextBox 文本

> ID：11706092
> 
> 赞同：0
> 
> 时间：2012-07-29T02:09:50.027
> 
> 标签：c#, printing, size, richtextbox

我正在制作一个可以用孟加拉语（虚拟键盘）或英语编写的程序。在我开始编写打印程序之前，一切都很完美。用户应该能够选择任何文本并更改字体和颜色。因为每个字符都可能不同，所以我需要一个字符一个字符地打印。这是我的代码：

```
private void printToolStripMenuItem_Click(object sender, EventArgs e)
{
    PrintDialog print = new PrintDialog();
    doc = new System.Drawing.Printing.PrintDocument();
    print.Document = doc;
    doc.PrintPage += new System.Drawing.Printing.PrintPageEventHandler(printDoc);
    if (print.ShowDialog() == DialogResult.OK)
    {
        doc.Print();
    }
}

private void printDoc(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    System.IO.StringReader reader = new System.IO.StringReader(richTextBox1.Text);
    float linesPerPage = 0;
    float yPosition = 0;
    int count = 0;
    float leftMargin = e.MarginBounds.Left;
    float rightMargin = e.MarginBounds.Right;
    float topMargin = e.MarginBounds.Top;
    string line = null;
    Font printFont = this.richTextBox1.Font;
    SolidBrush printBrush = new SolidBrush(Color.Black);
    int charpos = 0;
    int xPosition = (int)leftMargin;

    linesPerPage = e.MarginBounds.Height / printFont.GetHeight(e.Graphics);

    while (count < linesPerPage && ((line = reader.ReadLine()) != null))
    {
        xPosition = (int)leftMargin;
        yPosition = topMargin + (count * printFont.GetHeight(e.Graphics));
        count++;
        for (int i = 0; i < line.Length; i++)
        {
            richTextBox1.Select(charpos, 1);
            if ((xPosition + ((int)e.Graphics.MeasureString(richTextBox1.SelectedText, richTextBox1.SelectionFont).Width)) > rightMargin)
            {
                count++;
                if (!(count < linesPerPage))
                {
                    break;
                }
                xPosition = (int)leftMargin;
                yPosition = topMargin + (count * printFont.GetHeight(e.Graphics));
            }
            printBrush = new SolidBrush(richTextBox1.SelectionColor);
            e.Graphics.DrawString(richTextBox1.SelectedText, richTextBox1.SelectionFont, printBrush, new PointF(xPosition, yPosition));
            xPosition += ((int)e.Graphics.MeasureString(richTextBox1.SelectedText, richTextBox1.SelectionFont).Width);
            charpos++;
        }
    }

    if (line != null)
    {
        e.HasMorePages = true;
    }
    else
    {
        e.HasMorePages = false;
        printBrush.Dispose();
    }
} 
```

但是，当我获得打印预览时，它会在每个字符之间显示一个空格：

![打印预览](../Images/f5a8a2f696b5a812ab0a9cc5e632023d.png)

我认为这是因为`e.Graphics.MeasureString()`没有给我可能的最紧凑的边界框，或者它没有给我字体指定的字符的确切宽度。我对 C# 很陌生 有人知道获得字符确切宽度的方法吗？它困扰了我很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:08:34.163

知道了。最后。`e.Graphics.MeasureString()`毕竟你需要使用。只是它的另一个超载。用这个：

```
e.Graphics.MeasureString(richTextBox1.SelectedText, richTextBox1.SelectionFont, new PointF(xPosition, yPosition), StringFormat.GenericTypographic).Width; 
```

要删除您需要传递 StringFormat.GenericTypographic 的空间。希望能帮助到你。（如果替换`e.Graphics.MeasureString(string, Font)`为上述代码，您可以使用我的代码打印具有不同颜色和文本的文本）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:21:53.650

根据[这篇](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)MSDN 文章：

> （图形类）MeasureString 方法设计用于单个字符串**，并在字符串前后包含少量额外空间以允许悬垂字形**

您可以改为使用 [TextRenderer.MeasureString()](http://msdn.microsoft.com/en-us/library/y4xdbe66.aspx)来获取精确的字体宽度。

# objective-c - 从 NSBundle 获取零路径

> ID：11706093
> 
> 赞同：3
> 
> 时间：2012-07-29T02:09:50.760
> 
> 标签：objective-c, nsbundle, xcode4.4

我在我的项目中创建了一个新文件夹，我在其中复制了一个图像（称为“io.jpg”）。
我还检查了构建阶段-> 复制捆绑资源并且文件在那里。
所以我正在尝试获取此图像的路径：

```
NSBundle* bundle=[NSBundle mainBundle];
NSString* path=[bundle pathForResource: @"io" ofType: @"jpg"];
NSLog(@"%@",path); 
```

但它打印（空），我也尝试过这种方式：

```
NSBundle* bundle=[NSBundle mainBundle];
NSString* path=[bundle pathForImageResource: @"io"];
NSLog(@"%@",path); 
```

但它仍然打印（空）。
有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-31T10:22:09.253

转到：目标->“构建阶段”->“复制捆绑资源”然后在此处添加该特定文件。

清理项目并运行。有用。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T02:14:39.193

如果您请求的资源在输出中不存在（或不存在于应有的位置），您将获得 nil 路径。这真的是我见过的唯一原因。

忘记证明它应该存在，只需检查输出以确保它存在。

（还请记住，文件名区分大小写。）

**为了澄清**，您应该查看`~/Library/Developer/Xcode/DerviedData/Project-{GUID}/Build/Products`. 您的图像将丢失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T02:13:44.157

我的猜测是，假设您说您在 Xcode 项目中创建了一个新**文件夹**，那么您已经创建了一个蓝色文件夹引用，并且您的图像资源位于 bundle 的子目录中。

我愿意打赌这不是 NSBundle 的错误，因为这个类对 Foundation 框架来说是多么古老和重要。

尝试使用更具体的实例方法访问您的资源

```
- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)extension inDirectory:(NSString *)subpath 
```

我猜你创建的**文件夹引用**`subpath`的名称在哪里。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T06:01:38.987

几周前我遇到了这样的问题。事实证明我只是没有勾选一个框。这是我问的时候得到的答案。

“在 Xcode 项目导航器（左侧）中选择文件，并确保在文件检查器（右侧）的“目标成员资格”下检查了您的目标。——还要仔细检查文件名的拼写——蒙迪”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T01:53:45.623

如果您只是想获得图像，那么所有这些都*有些矫枉过正。*假设您已包含`bundleImage.PNG`在您的应用程序包中......某处，不知何故......</p>

`NSImage *image = [NSImage imageNamed:@"bundleImage"];`

肯定会……找到它……如果它在那里……再简单不过了，对吧？

如果 -*在偶然*的情况下 - 这是一个稍微复杂的情况，例如图像位于可加载的包或框架中 - 您可以使用类似于以下的代码（NSImage 上的类类别），它也将返回资源。

```
+ (id) imageInFrameworkWithFileName:(NSString *) fileName {
   NSBundle *b = [NSBundle bundleForClass: [DummyClass class]];
   return [self imageWithFileName: fileName inBundle: b];
} 
```

老实说，我不太了解这种“虚拟类”的概念或如何工作..但这就是它的样子

```
@interface DummyClass : NSObject
@end
@implementation DummyClass 
@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T07:32:58.373

尝试从您的应用程序中删除图像。然后再次添加它。并在运行之前清理您的构建。看看它是否有帮助。否则，请提供项目导航器的屏幕截图，显示图像添加的位置。它必须在顶层您的 Application.app.Is 它在任何文件夹/子文件夹中的某个位置。**

# c++ - 在 Windows C++ 中打印文本和变量

> ID：11706096
> 
> 赞同：0
> 
> 时间：2012-07-29T02:10:37.370
> 
> 标签：c++, windows, text, printing

我目前正在开发一个基于 Windows 的 C++ 程序。我习惯于工作/编码控制台应用程序，所以我不熟悉我正在尝试做的很多事情的语法。所以我以后可能会有更多的问题。

现在，我想打印一些文本并在文本中显示一个变量。例如，如果我想打印“我是 X 岁”并且 X = 30，那么它的语法将如何形成？

我知道这有效：

```
DrawText(hDC,L"I am X years old",-1,&rect,DT_CENTER | DT_WORDBREAK ); 
```

我想做的是：

```
DrawText(hDC,L"I am "+ X +" years old",-1,&rect,DT_CENTER | DT_WORDBREAK ); 
```

但这不起作用。那么我该如何正确实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:33:17.227

C++ 不是像 Javascript 等那样的无类型语言，所以你不能通过将部分加在一起来构造这样的字符串。相反，您必须使用类似 swprintf_s 的函数自己构建字符串。例如，

```
wchar_t wchBuf[128];
swprintf_s(wchBuf, _countof(wchBuf), L"I am %ld years old", X);
DrawText(hDC, wchBuf, -1, &rect, DT_CENTER | DT_WORDBREAK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T02:49:41.283

字符串文字只是指针，您不能将它们加在一起。

但`std::string`对象支持`operator+`.

```
DrawTextA(hDC,("I am " + itostr(X) + " years old").c_str(),-1,&rect,DT_CENTER | DT_WORDBREAK ); 
```

（你可以在[`itostr`这里](https://stackoverflow.com/q/4351371/103167)找到）

当然，可以用宽字符和 来做到这一点`std::wstring`，但对于这个例子来说，坚持使用 ASCII 是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T15:57:32.247

看看字符串是如何被人为地用来存储文本的，使用“int”而不是“string”不是更好吗？例如，您可以使用： int age = 30;

# python - 人类可读的日程安排语法，比如我的应用程序中的功能？

> ID：11706097
> 
> 赞同：3
> 
> 时间：2012-07-29T02:11:04.180
> 
> 标签：python, google-app-engine, antlr, human-readable

谷歌应用引擎中的 cron 具有用于 cron 作业调度的人类可读语法。

[https://developers.google.com/appengine/docs/python/config/cron#The_Schedule_Format](https://developers.google.com/appengine/docs/python/config/cron#The_Schedule_Format)

如何在我的应用程序中实现类似的功能，其中使用人类可读格式的输入计划和程序解析并存储实际值？

编辑：我认为他们正在使用 antlr3 库，但我无法弄清楚他们是如何使用它的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:04:14.670

好的，在这种情况下，您需要研究两个地方。

First antlr 是让您的解析器将英语/人类可读格式作为令牌流解析到您的程序中的原因。然后，您将从此字符串确定含义，例如：

```
run backup every 2 days 
```

这将变成一个令牌流，例如：

```
<command_type> := run
<command_to_run> := backup
<time_frame_times> := every
<digit> := 2
<time_frame_modifier> := days 
```

然后，您将使用某种状态机来确定句子的含义，该状态机可以写成（简化形式）为：

```
if token == command_type:
    switch( token.val )
        case "run":
            state = run
            program = tokens.pop().val
if token == time_frame_times:
    switch( token.val )
        case "every":
            time_frame_state = repeat_indefinitely
if token == time_frame_modifier:
    switch( token.val )
        case "days":
            time_frame_modifier = every_N_days
if token == digit:
    switch( time_Frame_modifier )
        case every_N_days:
            time_frame_modifier_value = token.val 
```

类似的东西足以将字符串解析为您需要的值。

第二部分是将其连接到`cron`自身或在程序本身中编写自己的调度程序，我认为这更符合您的用例。

Antlr Python：[http ://www.antlr.org/wiki/display/ANTLR3/Python+runtime](http://www.antlr.org/wiki/display/ANTLR3/Python+runtime)

# ruby-on-rails - Rails Devise，如何跳过确认电子邮件但仍生成确认令牌？

> ID：11706101
> 
> 赞同：5
> 
> 时间：2012-07-29T02:12:20.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在使用

```
 user.skip_confirmation! 
```

在现有用户添加新用户时跳过设计电子邮件确认。skip_confirmation 的问题在于它不会生成确认令牌。

我想手动发送一封确认电子邮件，这意味着我需要一个确认令牌。

如何跳过设计确认电子邮件但仍生成确认令牌以允许我手动向添加的用户发送自定义确认电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-31T13:17:28.283

```
@user = User.new(:email => 'email@example.com', :password => 'password') 
@user.skip_confirmation_notification!
@user.save 
```

这里**skip_confirmation_notification！**生成确认令牌但不发送确认电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T02:22:21.360

请参阅[可确认](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)的.rb 。特别是在第 253 - 256 行附近。我认为这应该对您有所帮助。

简而言之：

```
module Devise
  module Models
    module Confirmable
      module ClassMethods
        # Generate a token checking if one does not already exist in the database.
        def confirmation_token
          generate_token(:confirmation_token)
        end
      end
    end
  end
end 
```

# php - 关于 curl 的小问题？

> ID：11706104
> 
> 赞同：2
> 
> 时间：2012-07-29T02:12:43.870
> 
> 标签：php, html, curl, session-cookies, libcurl

我正在用 php 做一个小机器人，它登录到站点“A.com”，然后恢复会话，将其保存在我的服务器中，然后使用此会话重新连接并获取需要登录的受限网页的内容/密码。

这种将与 Curl 连接的形式：

```
 <form action="wLoginUser.asp" method="post" name="FormLoginUser" id="FormLoginUser">
                <input type="hidden" name="Page" id="Page" value= "/PasserAnnonce.asp" />

                        <input type="hidden" name="sQueryString" value= "" id="sQueryString" />

                    <table >
                        <tr><td  height="20"></td></tr>
                        <tr  > 
                            <td class="if_label_field"><label id="id_lab_mail">Mail :</label></td>
                            <td><input type="text" id="idMailLogin" name="idMailLogin" size="35" value="fff@gmail.com"/></td>
                        </tr>
                        <tr >
                            <td class="if_label_field"><label id="id_lab_pwd">Mot de passe :</label></td>

                            <td><input type="password"  id="idPasswordLogin" name="idPasswordLogin" size="20" value="78599g056" onkeypress= "KeyDownPasssword(event);"/></td>
                        </tr>
                        <tr >
                        <td></td>
                        <td>
                            <input type="checkbox" name="chk_session_open" id="chk_session_open" value="1" />
                            <span style="color: #CC0000;">Garder ma session ouverte (72h)</span>
                        <br/>

                            <input type="checkbox" name="chk_save_loginpwd" id="chk_save_loginpwd" value="1" checked/>
                            <span style="color: #0066FF;">Se souvenir du mail / passe (15j)</span>
                        <br/><br/>
                        <span >[Décocher si machine partagée]</font>
                    </td>
                    </tr>
                        <tr><td></td><td height="10"><img style="CURSOR:pointer" onclick="Login_OnClick();" src="/images/b_valider.gif" width="67" height="18" border="0" alt=""/></td></tr>
                        <tr><td  height="20"></td></tr>

                        <tr align="left">
                        <td colspan="2">
                        <span class="info">Vous avez oublié votre mot de passe ?&nbsp;</span>
                        <a href="SendPassword.asp">Cliquez ici</a> 
                        </td></tr>
                    </table>
            </form> 
```

这是我的完整代码（作品）：

```
 $link= 'http://www.tunisie-annonce.com/wLoginUser.asp';  

    $postfields = array(
                  'idMailLogin' => 'XXX@gmail.com',
                  'idPasswordLogin' => 'XXX',
                  'chk_session_open' => 'on',
                  'chk_save_loginpwd' => 'on'
                   );

    $curl = curl_init();  

    curl_setopt($curl, CURLOPT_URL, $link);  
    curl_setopt($curl, CURLOPT_COOKIESESSION, true);  
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);  
    curl_setopt($curl, CURLOPT_POST, true);  
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postfields);  

    $cookies = __DIR__.'\cookies.txt';

    // For cookies
    curl_setopt($curl, CURLOPT_COOKIEJAR, $cookies);

    $return = curl_exec($curl);  
    curl_close($curl);  

/**************************************************
request 2 : get the content of restrected web page
**************************************************/
  //the restricted web page require login!!
  $lien2 = "http://www.tunisie-annonce.com/PasserAnnonce.asp";   
  $curl = curl_init($lien2);

curl_setopt($curl, CURLOPT_FRESH_CONNECT, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_COOKIESESSION, true);

// Read from cookies
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookies);

$return = curl_exec($curl);
//show restricted web page
echo $return;

curl_close($curl); 
```

我测试了代码，它与其他网站完美配合......但在这个网站上它异常不起作用（没有显示错误）..我的问题是：导致这个错误的潜在问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:45:35.297

您应该`curl_getinfo($curl)`在 exec 之后尝试查看服务器给您的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:48:50.477

链接应该是

```
$link = 'http://www.tunisie-annonce.com/LoginUser.asp'; 
```

表单还有 2 个隐藏字段

```
<input type="hidden" name="Page" id="Page" value="/PasserAnnonce.asp">
<input type="hidden" name="sQueryString" value="" id="sQueryString"> 
```

总是返回所说的，不是预期的

```
<input type="checkbox" name="chk_session_open" id="chk_session_open" value="1"> 
```

所以

```
'chk_session_open' => '1',
'chk_save_loginpwd' => '1' 
```

登录按钮有javascript，所以检查函数中发生了什么

```
<img style="CURSOR:pointer" onclick="Login_OnClick();" src="/images/b_valider.gif" width="67" height="18" border="0" alt=""> 
```

所以，有了这些，你应该检查你的问题出在哪里。注意：您应该实际复制他们在登录过程中所做的一切。

# powershell - Powershell 调用命令和系统变量

> ID：11706105
> 
> 赞同：1
> 
> 时间：2012-07-29T02:12:44.697
> 
> 标签：powershell, invoke-command, system-variable

我正在为供应商应用程序自动化补丁。我想使用 powershell 遍历服务器列表并使用远程处理安装在每个盒子上。然而，一方面让我很头疼。在执行安装脚本之前，我必须调用供应商提供的 cmd 脚本来设置系统变量。所以我在powershell中这样调用脚本：

```
Invoke-Command -session $session {cmd /k ($args[0]+"\data\env.bat")} -Args $lesDestDir 
```

我看到它执行，因为它在我的 powershell 窗口中呼应了它的工作，但随后调用了安装脚本，即：

```
Invoke-Command -session $session {perl ".\rollout-2010.pl " $args[0] " NC"} -Args $rollout 
```

立即退出，说它使用的各种系统变量尚未设置。有人可以向我解释系统变量的范围吗？在调用命令完成后它们是否不复存在？我是否需要在一个调用命令中将两个脚本调用串在一起，以便第二个脚本可以访问系统变量或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:53:04.033

`SET`使用该命令所做的更改**不是**永久性的，它们仅适用于当前`cmd`进程并一直保留到`cmd`进程终止。

如果可能，使用 powershell 语法设置环境变量：

```
Invoke-Command -session $session {$env:myvar = 1} 
```

或者，您可以使用 cmd 命令分隔符对命令进行字符串处理，`&`如下所示：

```
Invoke-Command -session $session {cmd /k "set myvar = 1" `& "set"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T02:15:11.493

是的，您需要将它们串在一起。在退出的第一个 cmd 会话中设置环境变量，然后在没有它们的情况下启动第二个。

# spring - 基于值的跨字段验证

> ID：11706106
> 
> 赞同：0
> 
> 时间：2012-07-29T02:13:29.310
> 
> 标签：spring, bean-validation

如果我们要构建一个自定义的 JSR 303 验证器，有什么办法可以将字段的值而不是字段的名称传递给验证器？

这就是我在做什么..

我需要构建一个自定义类级别验证来验证这种情况..

有两个字段 A 和 B，其中 B 是日期字段。如果 A 的值为 1，则验证 B 不为空且其值为未来日期。

现在，我能够在[这篇](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)文章之后根据这些要求构建验证。在 FutureDateValidator 的 isValid() 方法中，我检查了 A 的值是否为 1，然后检查了日期有效性。

@CustomFutureDate(first = "dateOption", second = "date", message = "这必须是未来的日期。")

现在我有了一组新的字段 C 和 D，其中 D 又是日期字段。这一次，如果 C 的值为 2，我需要验证 D 是否为未来日期。在这种情况下，我不能使用我已经实现的验证器，因为它具有硬编码的第一个字段的值。那么我该如何解决这个问题，以便为这两种情况重用相同的验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:44:34.797

不硬编码值 1/2 使其可定制：

```
@CustomFutureDate(first = "dateOption", firstValue = "1", second = "date", message = "This must be a future date.") 
```

要使其工作，您需要修改`@CustomFutureDate`注释：

```
public @interface CustomFutureDate {
    String first();
    String firstValue();
    ...
} 
```

和实施：

```
public class CustomFutureDateValidator implements ConstraintValidator<CustomFutureDate, Object> {
    private String firstFieldName;
    private String firstFieldValue;
    ...

    @Override
    public void initialize(final CustomFutureDate constraintAnnotation) {
        firstFieldName = constraintAnnotation.first();
        firstFieldValue = constraintAnnotation.firstValue();
        ...
    }

    @Override
    public boolean isValid(final Object value, final ConstraintValidatorContext context) {
        // use firstFieldValue member
        ...
    }
} 
```

# ubuntu - 如何让 cron 在 ubuntu 上每 2 小时 11 分钟运行一次？

> ID：11706108
> 
> 赞同：0
> 
> 时间：2012-07-29T02:13:44.537
> 
> 标签：ubuntu, crontab

我`*/58 * * * * /usr/bin/php -f ....`过去每 58 分钟跑步一次。但是我需要构建一个可以每 2 小时 11 分钟运行一次的 cron。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:00:40.513

This:

```
*/58 * * * * /usr/bin/php -f .... 
```

doesn't run every 58 minutes. Just as `*/5` in the minutes field runs at every minute after the hour that's a multiple of 5, `*/58` runs at every minute after the hour that's a multiple of 58\. In other words, the job will run at 00:00, 00:58, 01:00, 01:58, 02:00, 02:58, etc.; the interval between two runs alternates between 58 minutes and 2 minutes.

There are probably tools other than cron that will do what you want. But if you want to use cron for this, you can have a job that runs every minutes:

```
 * * * * * your-wrapper-script /usr/bin/php -f ... 
```

and implement `your-wrapper-script` so it executes its arguments only if the current time is a multiple of 131 minutes (2 hours, 11 minutes).

This Perl script should do the trick:

```
#!/usr/bin/perl

use strict;
use warnings;

my $now = time;
my $minutes = int($now/60);
if ($minutes % 131 == 0) {
    system @ARGV; # NOTE: No error detection
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:27:28.350

你可以使用`at`. 一旦在系统启动时调用`at -f /path/script.sh "now + 131minutes"`它，它将在 131 分钟的正常运行时间后启动 /path/script.sh。然后，在 /path/script.sh 中，插入另一个`at`. 见[http://linux.die.net/man/1/at](http://linux.die.net/man/1/at)

# ruby - 如何使用 Ruby 在 Excel 中为下拉列表设置值

> ID：11706109
> 
> 赞同：0
> 
> 时间：2012-07-29T02:13:53.413
> 
> 标签：ruby, excel, watir

我是 Ruby/Watir 的新手，我目前正在编写一个脚本，该脚本从网页中获取值并将它们放置在现有的 excel 电子表格中。我遇到的问题是电子表格中有下拉列表，我的代码将值写入单元格而不是从下拉列表中选择。这是一个问题，因为它会导致电子表格计算出错。有人可以提供一些建议或解决方案吗？

```
require 'rubygems'
require 'watir'
require 'win32ole'

browser = Watir::Browser.new
browser.goto 'http://mywebaddress'

excel = WIN32OLE.new('Excel.Application')
workbook = excel.Workbooks.Open('G:\LH Rating Script\HB3 DRC sheet.xml')
excel.Visible = true
worksheet = workbook.Worksheets('MAIN')

worksheet.Cells(48, 5).Value = "#{browser.select_list(:id =>'phContent_WPU_QuestControl44H_WPU_Control44H').getSelectedItems[0]}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:55:51.860

所以看来我的问题不是我想的那样。我试图为其设置值的带有下拉列表的单元格有一条警告消息，指出该单元格已格式化为文本或以撇号开头。因此，如果我更改代码以在值前面放置一个撇号，那么它将正确进入电子表格。

# html - 是否可以在 input type="number" 中插入符号

> ID：11706110
> 
> 赞同：1
> 
> 时间：2012-07-29T02:14:01.540
> 
> 标签：html

我需要做一个数字输入框，用于输入某些元素的成本。我想在框中插入一个 $，所以当用户输入 - 比如说 - 20 时，它会显示 $20。我要求太多了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:24:59.787

数字字段似乎只接受数字。所以你可以

1) 将 $ 字符移出输入
2) 使用普通文本输入，并将输入的值限制为数字和 $ 字符。为此，您将监听`keypress`事件，使用事件数据来确定按下了哪个键，并且不允许出现您不想要的值。 [这是一个有用的例子](https://stackoverflow.com/questions/5534346/javascript-limit-text-input-characters)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:10:11.330

对于 HTML 部分，您要将 text 的值设置为`$`

```
<input type="text" value="$"> 
```

和 JS 部分：

```
$("input").keyup(function() {
    if(this.value.indexOf('$') !== 0) {
        this.value = '$';   
    } 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:04:13.370

这是一种相当新颖的方法，从我在在线捐赠页面（由 acceptiva.com 托管）中找到的一个实现中总结出来：

```
<input type="number" class="inputright inputcurrency"> 
```

在哪里：

```
.inputright {
    text-align: right;
}

.inputcurrency {
    background: url(images/currency_symbol.png) no-repeat left; 
} 
```

# facebook-graph-api - FQL：无法加入 id 格式为 USERID_LINKID 的表

> ID：11706111
> 
> 赞同：0
> 
> 时间：2012-07-29T02:14:19.240
> 
> 标签：facebook-graph-api, facebook-fql, fql.multiquery

我正在通过 php sdk 运行以下 FQL：

```
{
"posts" : "SELECT post_id, actor_id, message, type FROM stream WHERE type = '80' AND message != '' AND filter_key in (SELECT filter_key FROM stream_filter WHERE uid='588853265' AND type='newsfeed') AND is_hidden = 0 ORDER BY created_time DESC LIMIT 50", 

"actors" : "SELECT uid,name FROM user WHERE uid IN (SELECT actor_id FROM #posts)",

"links" : "SELECT owner, url FROM link WHERE link_id IN (SELECT post_id FROM #posts)"
} 
```

对于帖子和演员，我得到了预期的结果，但对于链接却没有（结果为空）。我认为问题在于链接表使用了普通 ID，但我的“流”中的“帖子”以以下格式显示 ID：USERID_LINKID。

我玩过 substr() 和 strlen() 来让它工作但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:43:40.137

似乎没有办法`link_id`从流帖子中获取。您的查询正在获取帖子的 ID，但不是链接。

但是，我认为您不需要它。摆脱`#links`子查询并添加`attachment`到子查询中的`SELECT`语句`#posts`。您可以在`attachment->media->url`.

另一个批评：您可能想要为`#actors`. 表`actor_id`返回的`stream`可以是用户、页面或组。您的 FQL 仅解析用户。对于组和页面发布的链接，您最终会得到未知的 ID。

# javascript - 如何整页div元素？

> ID：11706114
> 
> 赞同：-1
> 
> 时间：2012-07-29T02:14:43.117
> 
> 标签：javascript, jquery

我想知道是否有任何方法可以将一个 div 容器设置为整页（如缩放，不显示页面的其他元素）并允许用户通过转义或单击 div 元素外部来恢复正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:28:48.080

我使用 jQuery UI 来解决这个问题。这真的很简单直接。

[这是此效果的全屏工作演示](http://jsfiddle.net/Ohgodwhy/zcxKU/embedded/result/)

[这是小提琴一块一块地分解](http://jsfiddle.net/Ohgodwhy/zcxKU/)

当然，代码 ->

HTML ->

```
<div class="body">
  <a href="#" id="open-modal"> Open Modal </a>
  <div class="overlay"></div>  
  <div id="modal" title="the modal"> Modal </div>
</div> 
```

CSS ->

```
body{
  height:100%;
  width:100%;
  padding:50px;
}
.ui-widget-overlay{
  z-index:10;   
}
.ui-dialog{
  z-index:20;   
} 
```

jQuery ->

```
$('#modal').dialog({
  'autoOpen' : false,
  'modal' : true
});
$('#open-modal').click(function(){
  $('#modal').dialog('open');
  $('.overlay').addClass('ui-widget-overlay');    
});

$(document).on('click', '.ui-widget-overlay', function(){
  $(this).removeClass('ui-widget-overlay');
  $('#modal').dialog('close');    
}); 
```

# sorting - 对外部网站的结果进行排序

> ID：11706117
> 
> 赞同：0
> 
> 时间：2012-07-29T02:15:10.290
> 
> 标签：sorting, curl

我使用 curl 和绝对链接从外部站点显示运动器材，效果很好。问题是外部站点没有正确排序结果。我可以这样做，也许是指外部页面的标签。

这是我的代码：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.sportingpulse.com/mobile/mobile.cgi?a=CL&aID=2307");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);
$result = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+)([\"'>]+)#",'$1http://www.sportingpulse.com/mobile/$2$3', $result);
echo $result
?> 
```

这是我希望按年龄组排序的结果（可能使用 class="list-name"）或任何其他建议：

```
 <ul class="options" data-role="listview">
<li role="heading" data-role="list-divider">Please choose your Competition</li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223601"><div class="list-name">2012 Winter 23 Girls A</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223608"><div class="list-name">2012 Winter 18 Boys A</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223691"><div class="list-name">2012 Winter 23 Girls AR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223637"><div class="list-name">2012 Winter 18 Boys AR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223578"><div class="list-name">2012 Winter 18 Boys B</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223711"><div class="list-name">2012 Winter 23 Girls B</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223620"><div class="list-name">2012 Winter 18 Boys BR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223661"><div class="list-name">2012 Winter 18 Girls BR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223573"><div class="list-name">2012 Winter 18 Boys C</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223639"><div class="list-name">2012 Winter 23 Girls BR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223679"><div class="list-name">2012 Winter 23 Girls C</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223676"><div class="list-name">2012 Winter 20 Boys A</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223579"><div class="list-name">2012 Winter 20 Boys AR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223686"><div class="list-name">2012 Winter 23 Boys A</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223592"><div class="list-name">2012 Winter 20 Boys B</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223704"><div class="list-name">2012 Winter 23 Boys AR</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223662"><div class="list-name">2012 Winter 23 Boys B</div></a></li>
      <li><a href="http://www.sportingpulse.com/mobile/mobile.cgi?a=CF&amp;aID=2307&amp;cID=223685"><div class="list-name">2012 Winter 23 Boys BR</div></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:06:58.507

这可以按字母顺序对包含在 class="option" 中的链接进行排序，从而对年龄组进行排序

```
sort('ul.options>li', 'a');
function sort(list, key) {
    $($(list).get().reverse()).each(function(outer) {
        var sorting = this;
        $($(list).get().reverse()).each(function(inner) {
            if($(key, this).text().localeCompare($(key, sorting).text()) > 0) {
                this.parentNode.insertBefore(sorting.parentNode.removeChild(sorting), this);
            }
        });
    });
} 
```

# php - 提交时如何防止粘性复选框重置？（一页上有多个表格）

> ID：11706125
> 
> 赞同：1
> 
> 时间：2012-07-29T02:16:24.450
> 
> 标签：php, javascript, mysql, html

我正在使用dreamweaver，并且在一个页面上有两个表单，每个表单都使用php提交到同一个mySQL数据库，但不同的行。它们每个都有“粘性”代码，以防止它们在我将数据提交到mySQL时丢失值。问题是当我提交 form2 时 form1 会丢失值，反之亦然。整整两天，让我发疯。提前致谢。

```
<?php require_once('Connections/pmpConn.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form2")) {
  $updateSQL = sprintf("UPDATE readiness_one_day SET on_time=%s WHERE ready_primary=%s",
                       GetSQLValueString(isset($_POST['on_time2']) ? "true" : "", "defined","1","0"),
                       GetSQLValueString($_POST['ready_primary2'], "int"));

  mysql_select_db($database_pmpConn, $pmpConn);
  $Result1 = mysql_query($updateSQL, $pmpConn) or die(mysql_error());

}

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE readiness_one_day SET on_time=%s WHERE ready_primary=%s",
                       GetSQLValueString(isset($_POST['on_time1']) ? "true" : "", "defined","1","0"),
                       GetSQLValueString($_POST['ready_primary1'], "int"));

  mysql_select_db($database_pmpConn, $pmpConn);
  $Result1 = mysql_query($updateSQL, $pmpConn) or die(mysql_error());
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>
<body>

<form id="form1" name="form1" method="POST" action="<?php echo $editFormAction; ?>">
  <p>
    <input name="ready_primary1" type="text" id="ready_primary1" value="1" size="2" maxlength="2" readonly="readonly" />
  </p>
  <p>
    <input name="on_time1" type="checkbox" id="on_time1" value="1"<?php if (isset($_POST['on_time1']) && ($_POST['on_time1'] == '1')) echo 'checked="checked" '; ?> /> <!code for sticky checkboxes>
    <label for="on_time1">On Time</label>
  </p>
  <p>
    <input type="submit" name="submit1" id="submit1" value="Update" />
  </p>
  <input type="hidden" name="MM_update" value="form1" />
</form>
<form id="form2" name="form2" method="POST" action="<?php echo $editFormAction; ?>" >
  <p>
    <input name="ready_primary2" type="text" id="ready_primary2" value="2" size="2" maxlength="2" readonly="readonly" />
  </p>
  <p>
    <input name="on_time2" type="checkbox" id="on_time2" value="1" <?php if (isset($_POST['on_time2']) && ($_POST['on_time2'] == '1')) echo 'checked="checked" '; ?> /> <!code for sticky checkboxes>
    <label for="on_time2">On Time</label>
  </p>
      <input type="submit" name="submit2" id="submit2" value="Update" />
  <input type="hidden" name="MM_update" value="form2" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:20:04.713

您应该`$_SESSION`在提交每个表单后立即设置变量，以便您可以在页面之间保留值。之后，您可以执行以下操作：

在表单提交页面：

```
<?php 
   session_start(); 
   $SESSION['one_box'] = True;
?> 
```

在带有表格的页面上：

```
<?php 
start_session(); 
function selected($value) {
   if (isset($_SESSION[$value]) {
      return "checked='yes'";
   }
   else {
      return "";
   }
?>

<input type="checkbox" name="one_box" <?php echo selected("one_box"); ?> /> 
```

# ios - 在 iPad 上访问流式蓝牙数据

> ID：11706130
> 
> 赞同：0
> 
> 时间：2012-07-29T02:18:31.240
> 
> 标签：ios, xcode, ipad, bluetooth, live-streaming

我目前正在使用 XCode 编写一个应用程序，它允许将医疗数据流式传输到应用程序。使用通过蓝牙 spp 流式传输实时心跳的 Alive Heart Monitor，我希望能够将这些实时流接收到我的应用程序中。

目前，我无法发现 AHM 设备，也不确定如何接收直播流。

有没有办法做到这一点？

我看过这篇文章： http: [//www.devx.com/wireless/Article/43502/1954](http://www.devx.com/wireless/Article/43502/1954)，但它似乎只适用于 2 个 iPad/iPhone。我希望能够只接收来自非 iOS 设备的直播。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:30:01.167

我在 Apple 论坛上咨询了开发人员，并得知这是不可能的，因为 iPad 不支持蓝牙 SPP 配置文件。

# google-drive-api - 查询根目录下的文件和文件夹列表

> ID：11706131
> 
> 赞同：14
> 
> 时间：2012-07-29T02:18:32.397
> 
> 标签：google-drive-api

我想获得根目录中的文件和文件夹列表，而不必对所有文件进行排序。有没有可以做到这一点的查询？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-29T20:23:27.637

根文件夹也可以使用名为“root”的特殊别名来寻址，因此您可以使用以下查询获取根目录中的所有文件和文件夹：

```
https://www.googleapis.com/drive/v2/files?q='root' in parents 
```

如果不使用客户端库之一（它们会自动处理它），请记住转义 URL。

有关搜索查询语言的更多详细信息，请查看[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-03T11:29:05.567

此代码将显示您的**根目录**的所有文件和文件夹。只需复制并粘贴此代码，您将获得所有根目录的文件和文件夹。

```
 List<File> result = new ArrayList<File>();
    Files.List request = null;

    try {
          request = mService.files().list();
          FileList files = request.setQ("'root' in parents and trashed=false").execute();
          result.addAll(files.getItems());          
          request.setPageToken(files.getNextPageToken());
        } 
      catch (IOException e)
      {
        System.out.println("An error occurred: " + e);
        request.setPageToken(null);
      }

 //Print out all the files and folder of root Directory  
  for(File f:result)
  {
      System.out.println("recvd data are: "+f.getTitle());
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T12:36:55.680

**Google drive v3** [参考文档](https://developers.google.com/drive/api/v3/about-sdk)有助于创建 DriveClient 对象。

在后台线程（Android）中运行以下方法。

注意：所需的范围权限“DriveScopes.DRIVE”

```
 protected String[] getListChildren(String parentId) throws Exception {
    String[] children = null;
   parentId = parentId == null ? "root" : parentId;
    String fileQuery = "'" + parentId + "' in parents and trashed=false";
    FileList files = driveService.files().list().setQ(fileQuery).execute();
    List<String> fileNames = new ArrayList<String>();
    for (File file : files.getFiles()) {
        fileNames.add(file.getName());
    }
    children = fileNames.toArray(new String[0]);
    return children;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-02T02:51:53.267

**共享驱动器**的查询应该是`"'driveId' in parents`。

仅`'root'`适用于**我的云端硬盘**。

# javascript - AJAX 保持数据刷新

> ID：11706133
> 
> 赞同：0
> 
> 时间：2012-07-29T02:18:52.800
> 
> 标签：javascript, jquery, ajax

我目前有一个赞按钮，现在可以与 Ajax 一起使用。有一个小缺陷。我在帖子上单击喜欢，它会更新 1 个喜欢并在页面中显示。但是，如果我刷新页面，它就会消失不见。类似的内容仍在数据库中，只是没有显示在页面中。现在有人告诉我使用

```
$(document).ready(function () {} 
```

在页面加载时执行此操作，但我不知道如何使用它来让我的喜欢在页面刷新时显示。或者，也许我必须在页面刷新时重新调用才能获得每个帖子的所有喜欢。

这是我到目前为止所拥有的

```
function likestatus(postid,contextid){
var obj = document.getElementById(contextid);
$.post("../include/like_do.php", { streamitem_id: postid},function(data){
//see the parameter data in this function. Data contains whatever that you echo in your php file.
$("#likesprint"+postid).html(data+"Likes");
 });
} 
```

Like_do.php

```
<?php
session_start();
require"load.php";
if(isset($_POST['streamitem_id'])){

$check = user_core::check_liked($_SESSION['id'],$_POST['streamitem_id'],1);

user_core::do_like($_SESSION['id'],$_POST['streamitem_id'],1);

echo $check; // as your user_core::check_liked() function returns number of likes.
}else{
echo "<script>alert('Error liking post');</script>";
}
?> 
```

# php - android从没有json的php返回字符串

> ID：11706143
> 
> 赞同：1
> 
> 时间：2012-07-29T02:22:12.263
> 
> 标签：php, android, json

我正在尝试将我的 php 文件中的字符串返回到我的 android 应用程序。php 文件不是 json 格式。jsonobject 只是返回错误`07-28 20:10:56.538: W/System.err(2936): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject`我也尝试过 SAXParser，但我知道这仅适用于 xml 文件。当我使用`StringBuilder`这样的

```
public static String iStream_to_String(InputStream is1) {
    BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 8192);
    String line;
    StringBuilder sb = new StringBuilder();
    String longitudecord = "";
    try {
        while ((line = rd.readLine()) != null) {
            sb.append(line+"\n");

        }
//          rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String contentOfMyInputStream = sb.toString();
    return contentOfMyInputStream;
} 
```

我得到一个很像这样`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">` 的响应，我想要得到的响应是一个返回给定错误文件的简单字符串。有没有办法在没有 json 的情况下完成如此简单的任务？

我也想添加 php 的文件类型`application/x-httpd-php`是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:47:59.220

我只是错误地调用了php：/

# visual-studio-2010 - Visual Studio 2010/2012 是用什么语言编写的？

> ID：11706149
> 
> 赞同：30
> 
> 时间：2012-07-29T02:23:27.510
> 
> 标签：visual-studio-2010, visual-studio

Visual Studio 历来是 C++，但在 2010 和 2012 版本中是否有任何 C# 或 VB.NET 代码？

它是否需要 CLR 才能运行？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-29T02:24:30.330

C++ 和 C#

查看[此链接中的侧边栏](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-27T14:38:25.743

看起来输出窗口是用 C/C++ 编写的。当我尝试时：

```
string str="The quick brown fox \0 jumps over the lazy dog.";
System.Diagnostics.Debug.WriteLine(str); 
```

“Debug”的输出窗口显示：“The quick brown fox”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-09T00:58:59.653

[Programming Languages Beacon](http://www.lextrait.com/Vincent/implementations.html)网站包含一大堆不同产品及其编写语言的精美表格。根据该网站，Visual Studio 确实是用 C# 和 C++ 编写的。

# java - 从 Java 程序在新的终端窗口中运行应用程序

> ID：11706159
> 
> 赞同：2
> 
> 时间：2012-07-29T02:25:00.120
> 
> 标签：java, terminal, runtime

> **可能重复：**
> [从 Java 打开一个新的提示符/终端窗口](https://stackoverflow.com/questions/5738259/open-a-new-prompt-terminal-window-from-java)

是否可以打开终端窗口并从 java 窗口执行某些命令？

我试过

```
Runtime.getRuntime().exec("<command to execute>"); 
```

但它没有用。没有打开任何终端窗口。

（在 Windows、Mac 等...我需要多操作系统的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:37:40.943

您需要针对每个操作系统的解决方案：

*   苹果系统 ：`Runtime.getRuntime.exec("/usr/bin/open -a Terminal /path/to/the/executable");`
*   Linux：`Runtime.getRuntime.exec("/usr/bin/xterm");`
*   窗户（不确定）：

    进程 p = Runtime.getRuntime().exec("cmd /c start cmd.exe"); p.waitFor();

# css - 悬停在元素上时取消隐藏元素

> ID：11706160
> 
> 赞同：2
> 
> 时间：2012-07-29T02:25:01.670
> 
> 标签：css, hover, element

需要一点 CSS 帮助！我想在悬停另一个元素时取消隐藏一个元素。

例如：

```
<div class="Welcome"><a>Welcome to our site<a><div>
<div class="Message">Thanks for touching me!<div> 
```

CSS

```
.Message {
    display: hidden
}

.Welcome a: hover {
/*I want to make .Message visible now. Any ideas?*/
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T02:32:28.067

`.Welcome` `.Message`当您将鼠标悬停在显示时，这确实是您可以获得的最佳效果。这使用相邻的兄弟[`+`](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)选择器。

```
.Message {
    display: none;
}

.Welcome:hover + .Message {
    display:block;
} 
```

[http://jsfiddle.net/mowglisanu/ZPVSU/](http://jsfiddle.net/mowglisanu/ZPVSU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:34:05.620

使用一点 jQuery，这真的很容易。

**CSS**

```
​div.Message{
    display:none;
}​ 
```

**HTML**

```
<div class="Welcome">Welcome to our site<div>
<div class="Message">Thanks for touching me!<div> 
```

**jQuery**

```
$('.Welcome').hover(
    function () {
    $('.Message').show();
  }, 
    function () {
    $('.Message').hide();
  }
); 
```

**示例：http:** [//jsfiddle.net/gxn34/](http://jsfiddle.net/gxn34/)

**编辑**

*在下面回答您的问题*

您需要将以下内容添加到您的页面，通常在该`<head>`部分

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

和

```
 <script>
     $(document).ready(function(){
        $('.Welcome').hover(
            function () {
        $('.Message').show();
          }, 
            function () {
        $('.Message').hide();
          }
        );
     });
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T02:31:33.813

```
.Welcome a: hover {
  display: block;
} 
```

# java - 播放框架 1.2.4 - Morphia 1.2.9 - 批量插入的 _id 类型不正确

> ID：11706161
> 
> 赞同：0
> 
> 时间：2012-07-29T02:25:19.143
> 
> 标签：java, mongodb, module, playframework, morphia

根据[play morphia 文档](http://www.playframework.org/modules/morphia-1.2.9/crud)，您使用以下语法执行批量插入：

```
List<MyModel> myModels = ...;
MyModel.insert(myModels); 
```

但是，每当我进行批量插入时`_id`，插入的行总是一个字符串哈希：

```
{ "_id" : { "$oid" : "50149be2d5522755b6f564ce"} , ... 
```

`Long`默认情况下，我期望`morphia.id.type=Long`在 application.conf 中设置。使用 a 插入一行`.save()`给了我预期的结果。

如何执行使用默认`_id`类型的批量插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:43:35.677

这是 v1.2.9 上的一个已知问题：[https ://github.com/greenlaw110/play-morphia/issues/89](https://github.com/greenlaw110/play-morphia/issues/89)

修复将进入下一个发布版本。

# mysql - 不知道为什么连接查询返回的结果集比我预期的要长，并且执行时间长

> ID：11706166
> 
> 赞同：2
> 
> 时间：2012-07-29T02:26:50.873
> 
> 标签：mysql, database, performance, join

我在 mysql 连接方面的知识陷入了僵局，而且我尝试执行的查询花费的时间太长......虽然我自己学习 mysql 的时间很短，但我已经花时间阅读关于索引和连接的机制，做了很多谷歌搜索并尝试了几种不同的查询格式。无济于事，我需要帮助。

首先，我会说我的数据库目前正在针对选择查询的速度进行优化。我知道我有太多的索引......我学习mysql的理论是制作一些太多的索引并检查mysql优化器为我的目的选择什么（通过使用解释确定），然后确定它为什么选择所说的索引.

无论如何，我有四个表：table1，table2，table3，table4 ...

table1.ID1 是主键，table1 中的其他数据可能会分成 table2 中的多个内容。table2.ID1 标识 table1 中基于内容表单 table1 table2 构建的每个条目。ID2 是 table2 table3 的主键。ID2 标识 table3 中基于内容表单 table2 table3 构建的每个条目。ID3 是 table3 table4 的主键。 ID3 标识 table4 中基于内容表单 table3 构建的每个条目

并非table1中的每个条目在table2中都有对应的数据，同样table2到table3，table3到table4。

我需要做的是检索出现在日期范围内的 ID2 的不同值，并且仅当 table2 内容最终出现在 table4 中时。我面临的挑战是只有 table1 有一个日期列，我只需要也出现在 table4 中的条目。

以下查询大约需要 2 分钟。

```
select table2.ID2 from table1 
left join table2 on
table1.ID1 = table2.ID1
left join table3 on
table3.ID2 = table2.ID2 
left join table4 on
table4.ID3 = table3.ID3
where table1.Date between "2012-03-11" and "2012-03-18 
```

通过对上述查询使用解释，我认为没有理由需要这么长时间。

```
+----+-------------+--------------+-------+----------------------+----------+---------+------------------------------+-------+--------------------------+
| id | select_type | table        | type  | possible_keys        | key      | key_len | ref                          | rows  | Extra                    |
+----+-------------+--------------+-------+----------------------+----------+---------+------------------------------+-------+--------------------------+
|  1 | SIMPLE      | table1       | range | ...                  | Datekey  | 9       | NULL                         | 17528 | Using where; Using index |
|  1 | SIMPLE      | table2       | ref   | ...                  | ID1key   | 8       | mydata.table1.POSTID         |     1 |                          |
|  1 | SIMPLE      | table3       | ref   | ...                  | ID2key   | 8       | mydata.table2.SrcID          |    20 |                          |
|  1 | SIMPLE      | table4       | ref   | ...                  | ID3key   | 8       | mydata.table3.ParsedID       |    10 | Using index              |
+----+-------------+--------------+-------+----------------------+----------+---------+------------------------------+-------+--------------------------+ 
```

我已经用“...”替换了可能键的名称，因为它并不那么重要。在任何情况下，都会选择一个键。

此外，查询结果集中的行数比解释结果集中声称的匹配 17528 行要多得多。怎么可能更多？？

我究竟做错了什么？我也尝试过内部连接，但没有运气。我解释我的查询的方式是一个 4 向维恩图，具有重叠标准的行数很少，并通过日期范围上的索引进一步优化。

如果我添加'distinct（table2.ID2）'，我至少会得到我想要的结果集，但为什么我得到的结果集比我预期的要长得多，为什么要花这么长时间？

抱歉，如果我的问题的任何部分模棱两可，我很乐意根据需要澄清。

谢谢，布赖恩

编辑：

所有索引都引用 BIGINT 列，因为我希望我的数据库变得相当大并且需要相当多的唯一行标识符......也许 bigint 是矫枉过正并且减小该列的大小和/或索引会进一步加快速度.

这是我的最终解决方案，基于以下接受的答案：

```
select ID2 from table2
where exists
    (select 1 from table1 r
    where table1.Date between "2012-03-11" and "2012-03-18" and table2.ID1 = table1.ID1
    )
and exists
    (select 1 from table3
    where exists 
        (select 1 from table4 where table4.ID3 = table3.ID3) 
    ) 
```

此外，我意识到我缺少一个多字段索引，关联 table2.ID1 和 table2.ID2... 添加此索引后，此语句在大约 11 秒内返回，并返回大约 20,000 行。

考虑到我的每个表中的行数，我认为这是合理的 table1: ~480,000 table2: ~480,000 table3: ~6,000,000 table4: ~60,000,000

这听起来有效吗？在我确认这是我应该期待的最佳表现后，我会接受答案。我在 Xeon 3GHz 系统上运行 3gb 内存、ubuntu 12.04、mysql 5.5.24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:36:33.243

很可能，您的表之间有多个匹配项。假设 table1 匹配 table2 中的 5 行和 table3 中的 10 行。然后你最终在输出中有 50 行。

所以解决这个问题，您需要将连接限制为每个表一行。

一种方法是使用 in 子句。如果您使用连接进行过滤，那么您可以使用 where 子句：

```
where table2.id1 in (select table1.id1 from table1) 
```

“in”可以防止重复。

另一种选择是通过连接来预先聚合连接中的查询。

从优化的角度来看，Mysql 似乎更喜欢 where 子句的稍微不同的结构：

```
where exists (select 1 from table1 where table1.id = table2.id) 
```

# macos - 如何使用苹果脚本在 Safari 中打开一个新窗口和多个 url？

> ID：11706171
> 
> 赞同：6
> 
> 时间：2012-07-29T02:27:48.427
> 
> 标签：macos, safari, applescript

如何在 safari 中打开一个新窗口，然后使用苹果脚本在该窗口中打开具有不同 url 的多个选项卡？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T10:30:37.290

在 Safari 中创建新窗口的方法是使用以下`make new document`命令：

```
make new document at end of documents with properties {URL:the_url} 
```

这将创建一个新窗口，其中有一个选项卡指向`the_url`并使该窗口位于最前面。请注意，`make new window at end of windows`这不起作用，只会出现“AppleEvent 处理程序失败”的错误。

同样，要在窗口中创建新选项卡`w`，您可以使用`make new tab`：

```
make new tab at end of tabs of w with properties {URL:the_url} 
```

`w`这将在选项卡列表末尾的窗口中创建一个新选项卡；此选项卡将指向`the_url`，它*不会*是当前选项卡。`tabs of w`您也可以使用`tell w`块，而不是明确地说：

```
tell w
    make new tab at end of tabs with properties {URL:the_url}
end tell 
```

这样，`tabs`隐含地指`tabs of w`.

把这一切放在一起，我们得到以下脚本。给定 中的 URL 列表`the_urls`，它将在新窗口中打开所有这些 URL；如果`the_urls`为空，它会打开一个带有空白选项卡的窗口。

```
property the_urls : {¬
    "http://stackoverflow.com", ¬
    "http://tex.stackexchange.com", ¬
    "http://apple.stackexchange.com"}

tell application "Safari"
    if the_urls = {} then
        -- If you don't want to open a new window for an empty list, replace the
        -- following line with just "return"
        set {first_url, rest_urls} to {"", {}}
    else
        -- `item 1 of ...` gets the first item of a list, `rest of ...` gets
        -- everything after the first item of a list.  We treat the two
        -- differently because the first item must be placed in a new window, but
        -- everything else must be placed in a new tab.
        set {first_url, rest_urls} to {item 1 of the_urls, rest of the_urls}
    end if

    make new document at end of documents with properties {URL:first_url}
    tell window 1
        repeat with the_url in rest_urls
            make new tab at end of tabs with properties {URL:the_url}
        end repeat
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:11:38.923

```
tell application "Safari"
  activate
  set the URL of document 1 to "http://www.XXXXXXX.com"
  my new_tab()
  set the URL of document 1 to "http://www.XXXXXX.com"
end tell
on new_tab()
  tell application "Safari" to activate
  tell application "System Events"
    tell process "Safari"
      «event prcsclic» «class menI» "New Tab" of «class menE» "File" of «class mbar» 1
    end tell
  end tell
end new_tab 
```

用您想要的任何站点替换 X，并为您想要打开的每个页面不断重复代码（我的 new_tab() 并设置 URL...行）。参考[这个页面。](http://hints.macworld.com/article.php?story=20030414185226343) 如果这不是你在说的，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:42:14.880

根据Pugmatt的回答，我得到了以下工作......

```
on run {input, parameters}
  tell application "Safari"
  activate
    make new document with properties {URL:"http://www.apple.com"}
    my new_tab()
    set the URL of document 1 to "http://www.example.com"
  end tell
end run
on new_tab()
  tell application "Safari" to activate
  tell application "System Events"
    tell process "Safari"
      «event prcsclic» «class menI» "New Tab" of «class menE» "File" of «class mbar» 1
    end tell
  end tell
end new_tab 
```

我不确定这是否是最有效的方式。

# javascript - 新 Javascript 对象的可选初始化属性

> ID：11706172
> 
> 赞同：0
> 
> 时间：2012-07-29T02:27:55.693
> 
> 标签：javascript, oop, object, arguments, default

这是使用默认属性创建 javascript 类的正确方法（即使这里有些是空的），还可以**选择**添加一个创建参数，该参数可以包含对象格式/json 中列出的某些属性的特定值？

如果我要创建许多 Person 对象，我是否应该将其中的任何内容放入 Person 的原型中以节省内存？

这对我有用，但我想知道这是否是一个好方法？

```
// PERSON Class -----------------------------------------------
 QM.Person=function(data)
 {
    /* Closure for this */
    var my = this;

    this.PersonID=null;
    this.Name_Last="";
    this.Name_First="";
    this.Date_Birth=null;
    this.Biography="";

    this.loadData=function(obj) {
        for (var i in obj) {
            if (my.hasOwnProperty(i)) {
                my[i] = obj[i];
            }
        }
    }

    this.loadData(data);
} 
```

使用此类创建的示例：

```
jondoe = new Person();

bob = new Person({Name_First:"Bob",Name_Last:"Bar"});

jondoe.Name_First   /*  ""     */
bob.Name_First     /*   "Bob"  */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:33:24.727

我不会那样做的。我会做

```
QM.Person=function(data)
{
    data = data || {};

    this.PersonID= data.PersonId || null; 
    this.Name_Last= data.Name_Last || ""; 
    ...
} 
```

你会注意到我假设你关心显式类型，即当你分配时`null`，你想要`null`，而不是`undefined`。同样的事情`""`。

我认为这比创建一个函数并执行它来清理你的数据更简单

最后，您要添加到函数中的所有方法都应该在原型上。属性**不**应该在原型上，除非您希望所有实例共享相同的属性。由于除了数据清理器之外您没有任何方法，因此您所展示的任何内容都不应该出现在原型上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T02:52:30.177

为避免重复自己，您可以构建您期望的键列表以及如果未指定要插入的默认值：

```
MyType = function(data){
    var keys = this.keys,
        data = data || {},
        key

    for (key in keys) {
        if (keys.hasOwnProperty(key)) {
            if (data.hasOwnProperty(key)) {
                this[key] = data[key];
            } else {
                this[key] = keys[key];
            }
        }
    }      
};

MyType.prototype.keys = {
    personId: null,
    firstName: 'A default first name',
    lastName: ''
};

var o1 = new MyType();
var o2 = new MyType({
    personId: 1,
    firstName: 'Override'
});
console.log(o1, o2); 
```

# php - $file->eof() 在 'r' 模式下使用 PHP 的 SplFileObject 时总是返回 false

> ID：11706174
> 
> 赞同：0
> 
> 时间：2012-07-29T02:28:11.707
> 
> 标签：php, fwrite, eof, splfileobject

为什么我的 PHP 脚本挂起？

```
$path = tempnam(sys_get_temp_dir(), '').'.txt';
$fileInfo = new \SplFileInfo($path);
$fileObject = $fileInfo->openFile('a');
$fileObject->fwrite("test line\n");
$fileObject2 = $fileInfo->openFile('r');
var_dump(file_exists($path));          // bool(true)
var_dump(file_get_contents($path));    // string(10) "test line
                                       // "
var_dump(iterator_count($fileObject2)); // Hangs on this 
```

如果我删除最后一行 ( `iterator_count(...`) 并将其替换为：

```
$i = 0;
$fileObject2->rewind();
while (!$fileObject2->eof()) {
    var_dump($fileObject2->eof());
    var_dump($i++);
    $fileObject2->next();
}

// Output:
// bool(false)
// int(0)
// bool(false)
// int(1)
// bool(false)
// int(2)
// bool(false)
// int(3)
// bool(false)
// int(4)
// ... 
```

总是返回 false所以`$fileObject->eof()`我得到一个无限循环。

为什么会发生这些事情？我需要计算行数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:31:19.240

**为什么会发生这些事情？**

您正在经历`SplFileObject`课程编写方式的特殊性。如果没有调用`next()` *和* `current()`方法——使用默认 ( `0`) 标志——迭代器永远不会向前移动。

该`iterator_count()`函数从不调用`current()`; 它只检查`valid()`和调用`next()`。`current()`您的定制循环仅调用and中的一个或另一个`next()`。

这应该被认为是一个错误（无论是在 PHP 本身中，还是在文档中的故障），并且以下代码*应该*（并且不）按预期工作。我邀请您[举报这种不当行为](https://bugs.php.net)。

```
// NOTE: This currently runs in an infinite loop!
$file = new SplFileObject(__FILE__);
var_dump(iterator_count($file)); 
```

**解决方法**

让事情动起来的一个快速回避方法是`READ_AHEAD`在对象上设置标志。这将导致该`next()`方法读取下一个可用行。

```
$file->setFlags(SplFileObject::READ_AHEAD); 
```

如果出于任何原因，您不想要*预读*行为，那么您必须调用两者`next()`和您`current()`自己。

**回到原来两个SplFileObjects的问题**

以下内容现在应该可以按您的预期工作，允许附加到文件并读取其行数。

```
<?php
$info = new SplFileInfo(__FILE__);
$write = $info->openFile('a');
$write->fwrite("// new line\n");
$read = $info->openFile('r');
$read->setFlags(SplFileObject::READ_AHEAD);
var_dump(iterator_count($read)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:54:20.493

## 已编辑 01

如果您需要的是文件内的行数：

```
<?php

$path = tempnam(sys_get_temp_dir(), '').'.txt';

$fileInfo = new SplFileInfo($path);
$fileObject = $fileInfo->openFile('a+');

$fileObject->fwrite("Foo".PHP_EOL);
$fileObject->fwrite("Bar".PHP_EOL);

echo count(file($path));  // outputs 2

?> 
```

* * *

## 已编辑 02

这是您上面的代码，但由于文件指针而没有进入无限循环：

```
<?php

$path = tempnam(sys_get_temp_dir(), '').'.txt';

$fileInfo = new SplFileInfo($path);
$fileObject = $fileInfo->openFile('a+');

$fileObject->fwrite("Foo".PHP_EOL);
$fileObject->fwrite("Bar");

foreach($fileObject as $line_num => $line) {
    echo 'Line: '.$line_num.' "'.$line.'"'."<br/>";
}
echo 'Total Lines:' . $fileObject->key();

?> 
```

**输出**

> 行：0“Foo”
> 
> 线：1“酒吧”
> 
> 总行数：2

* * *

## 原始答案

应用的逻辑有点不对劲。我简化了代码：

```
<?php

// set path to tmp with random file name
echo $path = tempnam(sys_get_temp_dir(), '').'.txt';
echo "<br/>";

// new object
$fileInfo = new \SplFileInfo($path);

// open to write
$fileObject = $fileInfo->openFile('a');

// write two lines
$fileObject->fwrite("Foo".PHP_EOL);
$fileObject->fwrite("Bar".PHP_EOL);

// open to read
$fileObject2 = $fileInfo->openFile('r');

// output contents
echo "File Exists: " .file_exists($path);
echo "<br/>";
echo "File Contents: " . file_get_contents($path);
echo "<br/>";

// foreach line get line number and line contents 
foreach($fileObject2 as $line_num => $line) {
  echo 'Line: '.$line_num;
  echo ' With: "'.$line.'" is the end? '.($fileObject2->eof()?'yes':'no')."<br>";
}

?> 
```

**输出：**

> /tmp/EAdklY.txt
> 
> 文件存在：1
> 
> 文件内容：Foo Bar
> 
> Line: 0 With: "Foo" 结束了？不
> 
> Line: 1 With: "Bar" 是结束吗？不
> 
> 行：2 用：“”是结束？是的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T02:58:33.797

虽然这似乎违反直觉，但在 PHP 5.3.9 中，这是：

```
<?php
$f = new SplFileObject('test.txt', 'r');
while (!$f->eof()) {
    $f->next();
} 
```

while 是一个无限循环，永远不会退出。

当到达文件末尾时，以下内容将退出：

```
<?php
$f = new SplFileObject('test.txt', 'r');
while (!$f->eof()) {
    $f->current();
} 
```

所以：

```
$i = 0;
$fileObject2->rewind();
while (!$fileObject2->eof()) {
    var_dump($fileObject2->eof());
    var_dump($i++);
    $fileObject2->next();
} 
```

应改写为：

```
$fileObject2->rewind();
while (!$fileObject2->eof()) {
    $fileObject2->current();
}

$i = $fileObject2->key(); 
```

# php - 基于用户级别的不同mysql连接查询

> ID：11706175
> 
> 赞同：3
> 
> 时间：2012-07-29T02:28:44.100
> 
> 标签：php, mysql, optimization, left-join

我正在寻找一个想法或最佳实践来执行以下操作：

我有表格： `profile`包含基本信息（id、email、pass、lvl） `profile_user`包含（pid、name、age 等） `profile_mod`包含（pid、company_name、money 等）

如您所见，我将对两个表进行左连接以获取全部信息，但连接将全部基于属性 lvl。如果 lvl=1 它将在 profile_user 上左连接，而 lvl=2 将在 profile_mod 上执行连接。

我的问题是，我不想对每个查询进行检查以获取 lvl，然后在其他两个表上执行 leftjoin。我想知道这种情况是否有最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T02:32:41.847

你可以做：

```
SELECT    *
FROM      profile a
LEFT JOIN profile_user b ON a.id = b.pid AND a.lvl = 1
LEFT JOIN profile_mod  c ON a.id = c.pid AND a.lvl = 2 
```

如果`lvl`是，将填充`1`字段中的值，而 中的值将是。`profile_user``profile_mod``NULL`

同样，如果`lvl`is `2`，字段的值`profile_user`将是`NULL`，但`profile_mod`将填充 in 的值。

# javascript - HTML5 音频点击进度条移动到不同的时间

> ID：11706177
> 
> 赞同：7
> 
> 时间：2012-07-29T02:28:55.780
> 
> 标签：javascript, jquery, html, audio

```
<html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script>
            $(document).ready(function(){

                var counter = 0;
                var numOfTracks = $(".audio-player").length;
                $("#play-bt").click(function(){
                    $(".audio-player")[counter].play();
                    $("#message").text("Music started");
                })

                $("#pause-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $("#message").text("Music paused");
                })

                $("#stop-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    $("#message").text("Music Stopped");
                })

                $("#next-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter++;

                    if(counter > numOfTracks - 1){
                        counter = 0 ;
                    }

                    $(".audio-player")[counter].play();
                    $("#message").text("Next Track started");
                })

                $("#prev-bt").click(function(){
                    $(".audio-player")[counter].pause();
                    $(".audio-player")[counter].currentTime = 0;
                    counter--;
                    $(".audio-player")[counter].play();
                    $("#message").text("Previous Track");
                })

                $(".audio-player").bind('timeupdate', function(){

                    //Gets the whole duration of the track.
                    //No idea kung saan ko ilalagay sa UI**IMPLEMENT LATER**
                    var track_length = $(".audio-player")[counter].duration;
                    var secs = $(".audio-player")[counter].currentTime;
                    var progress = (secs/track_length) * 100;

                    $('#progressbar').css({'width' : progress * 2});

                    //Will Use these later on production
                    //NOTE DO NOT DELETE
                    //Track Minutes
                    var tcMins = parseInt(secs/60);
                    //Track Seconds
                    var tcSecs = parseInt(secs - (tcMins * 60));

                    if (tcSecs < 10) { tcSecs = '0' + tcSecs; }

                    // Display the time. REMEMBER
                    $('#timecode').html(tcMins + ':' + tcSecs);
                })
            })
        </script>
            <style>

        /*Seperate this some time in the development*/

        #playerContainer{ 
            background-color: #A8A8A8  ; 
            width: 260px; 
            height: 55px;
            padding: 8px;
            border: 1px solid #d0d0d0;
        }
        /* Player Controls */

        /*list items of controls */

        #playerControls li { 
            display: block; 
            width: 32px; 
            height: 32px; 
            padding: 0px;
            float: left; 
            cursor: pointer;
        }

        #playerControls { list-style: none; padding: 0px; margin: 0px;}

        /*Images for each li items items */
        #play-bt { background: url('icons/glyphicons_173_play.png'); background-repeat:no-repeat }
        #pause-bt {background: url('icons/glyphicons_174_pause.png'); background-repeat:no-repeat;}
        #next-bt { background: url('icons/glyphicons_176_forward.png'); background-repeat:no-repeat}
        #prev-bt {background: url('icons/glyphicons_172_rewind.png'); background-repeat:no-repeat;}

        /*Progress Stuff*/

        /*Remember to manipulate its width via javascript later*/
        #progressContainer 
        { 
            background-color:#e0e0e0;
            height: 14px; 
            width: 256px; 
            float: left;
            margin-left: 0px;
        }

        #progressbar {background-color: #1384bb; height:14px; width:0%; }

            </style>
    </head>
<body>
            <audio class ="audio-player"  name= "audio-player" src="04-zedd-stars_come_out_(terravita_remix).ogg" >
                <p>Sorry your file doesn't support html5</p>
            </audio>
            <!--Second Track For Testing Purposes-->
            <audio  class ="audio-player" name= "audio-player" src="01-hard_rock_sofa-quasar.mp3" ></audio>

            <div id="message"></div>
                <div id = "playerContainer">

                    <ul id =  "playerControls" >
                        <li id = "prev-bt"></li>
                        <li id= "play-bt"></li>
                        <li id= "pause-bt"></li> 
                        <li id = "next-bt"></li>
                        <li id= "stop-bt" ></li>
                        <li><span id ="timecode"></span></li>

                    </ul>
                        <div id="progressContainer"><!-- Progess bars container //-->
                            <div id="progressbar"></div>
                        </div>
                </div>

            </div>

    </body>
</html> 
```

如何单击进度条的某个部分，以便将其移动到轨道中的不同时间？我不知道我将如何做到这一点。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-09-27T04:23:38.900

给定一些看起来像这样的 html：

```
<div class="container">
    <video class="video">
        <source></source>
    </video>
    <progress min="0" max="100" value="0"></progress>
    <div class="controls"></div>
</div> 
```

为了通过点击事件寻找视频中的特定时间，js 看起来像这样：

```
var player = document.querySelector("video");
var progressBar = document.querySelector("progress");
progressBar.addEventListener("click", seek);

function seek(e) {
    var percent = e.offsetX / this.offsetWidth;
    player.currentTime = percent * player.duration;
    progressBar.value = percent / 100;
} 
```

但是，这并没有解决如何在单击/拖动时进行搜索（就像大多数视频播放器一样）。包含脚本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T18:24:07.223

我今天遇到了这个问题，因为我正在创建一个自定义 HTML5 视频播放器并且有同样的问题。只是关于视频而不是音频。这个过程应该是一样的。

我找到了这篇文章，并且能够将其中的进度条部分合并到我的播放器中。[https://msdn.microsoft.com/en-us/library/ie/gg589528%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/ie/gg589528%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396)

`progressbar`而不是像我正在做的那样使用元素，或者`div`像你正在做的那样使用元素，这里的技巧是使用画布元素。

```
<canvas id='progress-bar' width="200" height="20" style="border:1px solid green;">canvas not supported</canvas> 
```

然后在你的 JavaScript 中，创建一个句柄来引用它

```
var mediaPlayer;
var progressBar;
var canvas; 
```

加载文档时，初始化包括进度条项在内的所有内容

```
mediaPlayer = document.getElementById('media-video');
progressBar = document.getElementById('progress-bar');
canvas = document.getElementById('progress-bar');

canvas.addEventListener("click", function(e) {

    var canvas = document.getElementById('progress-bar');

    if (!e) {
        e = window.event;
    } //get the latest windows event if it isn't set
    try {
        //calculate the current time based on position of mouse cursor in canvas box
        mediaPlayer.currentTime = mediaPlayer.duration * (e.offsetX / canvas.clientWidth);
    }
    catch (err) {
    // Fail silently but show in F12 developer tools console
        if (window.console && console.error("Error:" + err));
    }
}, true);

mediaPlayer.addEventListener('timeupdate', updateProgressBar, false); 
```

然后在初始化函数之外创建一个函数供`timeupdate`监听器调用并自动为您更新进度条

```
function updateProgressBar() {        
    mediaPlayer = document.getElementById('media-video');
    //get current time in seconds
    var elapsedTime = Math.round(mediaPlayer.currentTime);
    //update the progress bar
    if (canvas.getContext) {
        var ctx = canvas.getContext("2d");
        //clear canvas before painting
        ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight);
        ctx.fillStyle = "rgb(255,0,0)";
        var fWidth = (elapsedTime / mediaPlayer.duration) * (canvas.clientWidth);
        if (fWidth > 0) {
            ctx.fillRect(0, 0, fWidth, canvas.clientHeight);
        }
    }
} 
```

我还没有完全清理干净。因此，相同 id 的冗余句柄。但我相信你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T01:54:36.047

希望这可以节省一些时间。如果您尝试在 Angular 应用程序中进行设置，您会注意到`this`您的控制器上下文。所以你需要使用`e.srcElement.clientWidth`它才能工作。

```
vm.setPosition = function(e){

  var percent = ((e.offsetX / e.srcElement.clientWidth));

  vm.songObject.setProgress(percent);
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-29T19:14:05.833

[我在使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)中写过关于此的内容，向下滚动到“添加进度条”。

# c# - 获取和修改 xml 文档中的子元素

> ID：11706179
> 
> 赞同：0
> 
> 时间：2012-07-29T02:29:29.360
> 
> 标签：c#, xml, web-services

这是一个棘手的情况。我有一个返回 XML 文档的 web 服务。此 XML 文档有一个称为`<Entities .... >`Entities 元素的根元素，它有一个称为 的子元素`<Article..>`。我需要修改 Article 的其中一个子元素，并将每个 article 元素“PUT”回 Web 服务。我不能用 Entities 发布整个文档的原因是 Web 服务无法将 Entities 识别为对象，我无法对其执行更新操作。

以下是收到的文件的结构：

```
<Entities>
  <Article id="1">
    <Permissions>
      <Sla id="1">
        <name> first sla </name>
      </Sla>
      </Permissions>
    </Article>
  <Article id="2">
    <Permissions>
      <Sla id="2">
        <name> second sla </name>
      </Sla>
      </Permissions>
    </Article>
</Entities> 
```

下面是我用来完成这个技巧的代码，但我可以获取 Sla 元素。我需要做的是获取每篇文章中的 Sla 元素并检查其 id 属性。如果检查成功，我需要删除该 Sla 元素及其所有子元素。这是我到目前为止所做的：

```
int pageNumber = 1;
bool entities = true;
while (entities)
{
url = "www.myurl.com";
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.Method = "Get";
HttpWebResponse rep = (HttpWebResponse)req.GetResponse();
doc.Load(rep.GetResponseStream());
rep.Close();
if (doc != null)
{
                XmlNodeList nodes = doc.SelectNodes("/Entities/Article");
                foreach (XmlNode node in nodes)
                {
                    XmlNode Slanode = null;
                    try
                    {
                         Slanode = doc.SelectSingleNode("Permissions/Sla[@id='" + sla.ToString() + "']");
                         Slanode.ParentNode.RemoveChild(node);
                         string finalXML = doc.OuterXml;
                         HttpWebRequest reqToUpdate = (HttpWebRequest)WebRequest.Create(url);
                         reqToUpdate.ContentType = "text/xml; encoding=UTF-8";
                         reqToUpdate.Method = "PUT";
                         byte[] bytes = new UTF8Encoding().GetBytes(finalXML);
                         reqToUpdate.ContentLength = bytes.Length;
                         Stream data = reqToUpdate.GetRequestStream();
                         data.Write(bytes, 0, bytes.Length);
                         data.Close();
                    }
                    catch (Exception error)
                    {
                        MessageBox.Show(error.Message);
                    }

                }

                pageNumber++;
                }
                else
                    entities = false;
            }

            } 
```

我无法让代码工作，因为当我到达

`Slanode = doc.SelectSingleNode("Permissions/Sla[@id='" + sla.ToString() + "']");`

它不填充 Slanode 并返回 null，当我在调试模式下检查节点时，列表显示以下错误：

`Only one top level element is allowed in an XML document. Error processing resource`

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:49:06.983

路径不对

```
Slanode = doc.SelectSingleNode("Permissions/Sla[@id='" + sla.ToString() + "']"); 
```

应该

```
Slanode = node.SelectSingleNode("Permissions/Sla[@id='" + sla.ToString() + "']"); 
```

我认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:43:45.000

我将用 XElement 重写它，希望这对你有用，因为 XElement 是我所理解的。

首先获取要删除的文章：

```
XElement root = XElement.Load(stream);
XElement articleToRemove = root.XPathSelectElement("//Article[Permissions/Sla/@id='"+sla.ToString()+"']");
if(null != articleToRemove)
    articleToRemove.Remove(); 
```

要使循环可读，请创建一个 Put 函数：

```
private void Put(XElement article)
{
    Stream data = null;
    try
    {
        string finalXML = article.ToString(SaveOptions.DisableFormatting);
        HttpWebRequest reqToUpdate = (HttpWebRequest)WebRequest.Create(url);
        reqToUpdate.ContentType = "text/xml; encoding=UTF-8";
        reqToUpdate.Method = "PUT";
        byte[] bytes = new UTF8Encoding().GetBytes(finalXML);
        reqToUpdate.ContentLength = bytes.Length;
        data = reqToUpdate.GetRequestStream();
        data.Write(bytes, 0, bytes.Length);
    }
    catch (Exception error)
    {
        MessageBox.Show(error.Message);
    }
    finally
    {
        if (null != data)
            data.Close();
    }
} 
```

然后获取其余文章并上传它们：

```
root.Descendants("Article").ToList().ForEach(a => Put(a)); 
```

编辑：要将 XPath 与 XElement 一起使用，您需要使用以下内容：

```
using System.Xml.XPath; 
```

# jquery - jQuery Validate 仅在表单已填写字段时才显示错误？

> ID：11706181
> 
> 赞同：0
> 
> 时间：2012-07-29T02:29:34.217
> 
> 标签：jquery, jquery-plugins, jquery-validate

我已经成功实现了验证，并且`errorContainer`有一套。但是，如果我开始填写表格然后清空它（手动，我不想要取消按钮），`errorContainer`即使没有错误，这些表格仍然可见。关于为什么会这样的任何想法？已在块 CSS`errorContainer`中`display:none`设置，出现错误时成功切换。

我试过调整 CSS，jQuery Validate 文件，但无济于事。

# android - 如何将微调器功能添加到我的 ListView 项目？

> ID：11706182
> 
> 赞同：3
> 
> 时间：2012-07-29T02:30:06.140
> 
> 标签：android, android-arrayadapter, android-spinner

我有一个自定义列表适配器。这里是：

```
public class FilesAdapter extends ArrayAdapter<PutioFileLayout> {

    Context context;
    int layoutResourceId;
    List<PutioFileLayout> data = null;

    public FilesAdapter(Context context, int layoutResourceId, List<PutioFileLayout> data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        FileHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new FileHolder();
            holder.textName = (TextView) row.findViewById(R.id.text_fileListName);
            holder.textDescription = (TextView) row.findViewById(R.id.text_fileListDesc);
            holder.imgIcon = (ImageView) row.findViewById(R.id.img_fileIcon);

            row.setTag(holder);
        } else {
            holder = (FileHolder) row.getTag();
        }

        PutioFileLayout file = data.get(position);
        holder.textName.setText(file.name);
        holder.textDescription.setText(file.description);
        holder.imgIcon.setImageResource(file.icon);

        return row;
    }

    static class FileHolder {
        TextView textName;
        TextView textDescription;
        ImageView imgIcon;
    }
} 
```

很短很甜。我`Spinner`在每一行的布局中都有 s，我希望用户能够单击它们，并为每个项目获取一个上下文菜单。如何在我的适配器中实现这一点？

我的row.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="64dp" >

    <ImageView
        android:id="@+id/img_fileIcon"
        android:layout_width="36dp"
        android:layout_height="36dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:scaleType="fitCenter"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toRightOf="@id/img_fileIcon"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text_fileListName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="12dp"
            android:layout_marginTop="12dp"
            android:ellipsize="end"
            android:maxLines="1"
            android:text="File name"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <FrameLayout
            android:id="@+id/descriptionFrame"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="12dp"
            android:layout_marginRight="30dp" >

            <TextView
                android:id="@+id/text_fileListDesc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="File description" />
        </FrameLayout>
    </LinearLayout>

    <Spinner
        android:id="@+id/item_fileSpinner"
        android:layout_width="44dp"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/spinner_background_ab_putio" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:16:35.000

在您的 getView() 方法中获取对微调器的引用，如下所示：

```
Spinner spn = row.findViewById(R.id.item_fileSpinner); 
```

获得参考后，您可以通过使用所有值创建[SpinnerAdapter来设置其项目，并将其设置为](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)

```
spn.setAdapater(mSpinAdapter); 
```

如果你能告诉我你希望用什么数据填充微调器，我可以给你一个更具体的例子来说明你将如何创建和填充适配器。

那么剩下的就是设置一个[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemSelectedListener%28android.widget.AdapterView.OnItemSelectedListener%29)，你可以这样做。

```
spn.setOnItemSelectedListner(new OnItemSelectedListener(){

    public void onItemSelected(AdapterView<?> parent, View view, int spnPosition, long id){
        //Do something
    }
}); 
```

注意`spnPosition`onItemSelected 回调中的使用。如果您使用`position`，那么您将无法再访问 getView() 参数`position`，因此请使用不同的名称，以便您可以访问两者/如果需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:50:35.550

为什么不能使用 createContextMenu() ？如果可以，请覆盖 onContextCreate() 并在那里添加您的视图 ID....

我没有示例代码 atm，但我星期一到办公室时会有。确实，上下文菜单是最简单的方法。

再一次，蒂姆的想法似乎奏效了。

编辑：正如周一承诺的那样，示例代码。

res\menu\context_menu.xml -- 请注意，您可以更改此名称。

```
<item
    android:id="@+id/context_menu_call"
    android:title="@string/context_menu_call"/>
<item
    android:id="@+id/context_menu_video_call"
    android:title="@string/context_menu_video_call"/>
<item
    android:id="@+id/context_menu_send_im"
    android:title="@string/context_menu_send_im"/>
<item
    android:id="@+id/context_menu_call_number"
    android:title="@string/context_menu_call_number"/>
<item
    android:id="@+id/context_menu_view_profile"
    android:title="@string/context_menu_view_profile"/> 
```

然后在代码中

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    switch (v.getId())
    {
        case R.id.listConversations:        //mainContactList from initMainLayoutElements()
            contextList = mainContactList;
            inflater.inflate(R.menu.context_menu, menu);
            break;
        case R.id.listContacts:             //chatContacts from initChatLayoutElements()
            contextList = chatContactList;
            inflater.inflate(R.menu.context_menu, menu);
            break;
        case R.id.listContactsManagement:       //contactList from initContactLayoutElements()
            contextList = contactMgmtList;
            inflater.inflate(R.menu.context_menu, menu);
            break;

        case R.id.btn_sms_settings:
            inflater.inflate(R.menu.sms_menu, menu);
            break;
    }
} 
```

现在我们定义了如何打开上下文菜单，我们需要定义实际项目的作用......

```
 @Override
public boolean onContextItemSelected(MenuItem item)
{
    item.getMenuInfo();

    switch (item.getItemId())
    {
        case R.id.context_menu_call:
            onCallStartFromContextMenu(false);
            return true;

        case R.id.context_menu_video_call:
            onCallStartFromContextMenu(true);
            return true;

        case R.id.context_menu_send_im:
            layoutState(LayoutState.CHAT);
            Log.d(TAG, "Preparing chat session from context menu for " + getChattersFromList(contextList).toString());
            chatSource = ChatSource.FROM_CONTEXT_MENU;
            prepareChatSessionWith(getChattersFromList(contextList).toArray(new String[getChatterCount(contextList)]));
            return true;

        case R.id.context_menu_call_number:
            Buddy selectedBuddy = (Buddy) contextList.getAdapter().getItem(contextList.getSelectedItemPosition());
            lastCaller = selectedBuddy.toString();
            showAlternateCallDialog(selectedBuddy, !selectedBuddy.getNumberHome().isEmpty(),
                    !selectedBuddy.getNumberMobile().isEmpty(), !selectedBuddy.getNumberOffice().isEmpty());
            return true;

        case R.id.context_menu_view_profile:
            //              Buddy who = buddyAdapter.getItem(listConversations.getSelectedItemPosition());
            Buddy who = (Buddy) contextList.getAdapter().getItem(contextList.getSelectedItemPosition());
            Log.d(TAG, "viewing profile " + who.toString());
            lastProfileName = who.getIdentity();
            showProfileScreen(who);
            return true;
            //transfers

        default:
            contextList = null;
            return super.onContextItemSelected(item);
    }
} 
```

不要忘记将组件注册到上下文菜单“侦听器”。这些是实际的 ListView 引用。

```
 registerForContextMenu(mainContactList);
    registerForContextMenu(chatContactList); 
```

最后，唯一剩下的就是打开项目的上下文菜单......

```
 chatContactList.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener()
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id)
        {
            Log.d(TAG, "chatContacts.onItemLongClick fired!");
            chatContactList.setItemChecked(position, true);
            openContextMenu(chatContactList);
            return true;
        }
    });

  mainContactList.setOnItemLongClickListener(new ListView.OnItemLongClickListener()
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id)
        {
            Log.d(TAG, "mainContactList.onItemLongClick fired!!!");
            mainContactList.setItemChecked(position, true);
            openContextMenu(mainContactList);
            return false;
        }
    }); 
```

我更喜欢在 LongClick 上使用上下文菜单，而不仅仅是 onItemClicked，因为您可能想在点击时做一些事情（比如文件选择和其他东西），并在长点击时提供访问较少的功能，比如重命名/删除等

所以你去。上下文菜单很简单；）

# javascript - 在 IFrame 中覆盖 window.open

> ID：11706187
> 
> 赞同：3
> 
> 时间：2012-07-29T02:31:55.480
> 
> 标签：javascript, html, iframe, overriding

我使用的 IFrame 包含不同域上的远程页面（我无法控制），它有时会尝试使用 window.open 弹出一个窗口。

而不是弹出窗口 - 我想使用第一个 IFrame 尝试打开的 URL 将另一个 IFrame 动态添加到页面。

有没有办法覆盖 IFrame 的 window.open 以便我能够“捕获”它试图弹出的 URL？

我试过了：

```
var myFrame = document.getElementById("ifrm"); // 'ifrm' is the iframe's ID
myFrame.contentWindow.open = function (url, name, features) { 
    alert(url);
}; 
```

但它不起作用（没有警报，iframe 仍然试图弹出新窗口）......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:43:15.020

尝试：

```
function bindings(newDoc){
    try
    {   
        newDoc.contentWindow.window.open = function (url, name, features,
                                                     replace) { 
            alert(url);
        };
    }
    catch( e )
    {
        console.log(e.message);
    }
} 
```

在调用 iFrame 时，使用 onload 事件：

```
<iframe onload="bindings(this)" ... /> 
```

它抛出错误：

> **在 Firefox**中访问属性“打开”的权限被拒绝****
> 
>  ****日志： Internet Explorer 中的**权限被拒绝******

 ****显然*Dan F*是对的。UA 将拒绝访问通过 iframe 加载的远程（跨域）文档。****

# jquery - django + 用 jquery 标记

> ID：11706190
> 
> 赞同：4
> 
> 时间：2012-07-29T02:32:38.150
> 
> 标签：jquery, django, tag-it

我想使用 jQuery 并为用户创建一个标记界面。类似于 StackOverflow 中的用户可以为他们提出的问题类型添加标签。我正在使用 jQuery 和 tagit 让它工作：

~~[http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/)~~

图书馆的新位置：

[https://github.com/hailwood/jQuery-Tagit](https://github.com/hailwood/jQuery-Tagit)

问题是说用户在表单的另一部分有错误并单击提交，表单重新加载错误消息并且所有标签都消失了。有没有一种简单的方法可以在 Django 中进行标记？

**[编辑]**

根据以下 Hailwood 的回复尝试此操作...

```
<ul name="event_tag" class="tags">
    <li class="tagit-choice" tagvalue="3">
        Dog
        <a class="tagit-close">x</a>
    </li>
</ul> 
```

但是，当我加载页面加载时，未加载该特定标签？似乎`ul`标签已被清除，然后其中加载了其他信息。加载页面时看不到它。

我也尝试过如下：

```
<ul name="event_tag" class="tags">
    <li data-value="3">Dog</li>
</ul> 
```

当我尝试这种方式时，它会出现一秒钟然后消失......

**[编辑 2]**

找到了我的问题的解决方案。正如 Hailwood 建议的那样，我们可以通过编程方式创建`li`'s，如下所示：

```
<ul name="event_tag" class="tags">
    <li data-value="3">Dog</li>
</ul> 
```

它对我不起作用的原因是因为我有初始值：

```
$.getJSON("ajaxrequest.json", function(data) {
    $(".tags").tagit("fill", data);
}); 
```

对我来说问题是onload，它都消失了。这样做的原因是因为`fill`。当我们`fill`用`add`as per:替换时`$(".tags").tagit("add", data);`，它就起作用了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T11:31:53.593

作为您提到的 tagit 插件的创建者，我想我可以帮助您。

从我所见，您似乎将其用作表单的一部分，并且当您单击提交时，您会在服务器端验证表单，如果发生错误，您会重新加载带有表单值的页面吗？

我建议你做的是启用隐藏的选择选项（`select: true`）。

提交表单后，您将获得所选标签的列表。

然后，如果您重新加载页面，只需将标签作为 s 加载回列表中`<li>`。

（请注意我不懂Python，所以下面是伪代码）

```
if(form_values.tags)
    for(tag in form_values.tags)
        print '<li data-value=" '+tag.value+' "> '+tag.label+' </li>';
    endfor;
endif; 
```

*您也可以将标签传递给`initialTags`选项，但这需要输出javascript，imo不如上述方法整洁:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:23:28.373

您应该检查 jQuery Select2 对标记的支持。

[http://ivaynberg.github.com/select2/#tags](http://ivaynberg.github.com/select2/#tags)

# javascript - 解析 JavaScript 条件语句的用户输入

> ID：11706195
> 
> 赞同：7
> 
> 时间：2012-07-29T02:33:40.630
> 
> 标签：javascript, parsing

如何从用户输入中解析字符串并将其重建为 javascript 条件语句。

例如，如果用户将以下字符串输入到 texbox

```
x==1 && y==2 || (z!=3) 
```

如何重新创建此字符串以执行以下服务器端 javascript

```
if (vars['x'] == 1 && vars['y'] == 2 || (vars['z'] != 3)) 
```

如果该信息有帮助的话，我的应用程序是基于 node.js 构建的。我知道 eval() 函数，但我需要先从用户表达式中获取变量，然后再进行评估。

这对于正则表达式来说似乎太复杂了。如果有人知道一个简单的解析器可以完成这样的事情，那就太好了。

# php - php 追加到特定的行

> ID：11706202
> 
> 赞同：0
> 
> 时间：2012-07-29T02:35:26.700
> 
> 标签：php, append

以下脚本将代码附加到同一文件的末尾

```
$path = "./files/";
$path2="http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/files/";
//echo $path2;
$folder = opendir($path);
$start="<asx version='3.0'>\n<title>Example ASX playlist</title>";
$Fnm = "./playlist.php";
// build content
$fileContent=$start.'/n';

while( $file = readdir($folder) ) {
 if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
 $result="<entry>\n<title>$file</title>\n<ref href='$path2$file'/>\n<param name='image'        value='preview.jpg'/>\n</entry>\n";
 //append to content
$fileContent .= $result;
}
}
 //append to content
$fileContent .= "</asx>";

// append to file and check status
if ( file_put_contents(__FILE__ , $fileContent , FILE_APPEND) === false )
{

echo "failed to put contents in ".__FILE__."<br>";

} 
```

我想将此附加到特定行，例如第 12 行

这个追加的结果如下

```
{
levels: [
{ file: "/bkaovAYt-3647661.mp4" },
{ file: "/bkaovAYt-3647661.mp4" }
],
title: "bkaovAYt-3647661.mp4"
}, 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:37:14.563

例如，您可以将第二组代码放在一个文件中，`include.php`然后使用以下代码将其放在主 PHP 代码中的任何位置：

```
include("include.php"); 
```

# php - 如何使用 jQuery AJAX 电子邮件表单获得“成功”

> ID：11706203
> 
> 赞同：0
> 
> 时间：2012-07-29T02:35:44.157
> 
> 标签：php, jquery, html, ajax

我在网站上创建了一个简单的电子邮件表单 - 使用 jQuery 库通过 AJAX 处理它。

我知道该表单正在工作，因为我正在接收测试电子邮件，但我需要让用户知道他们的电子邮件已发送。目前，**成功后没有事件发生。它应该用成功消息替换表单（在 div #contactform 中）。**我在这里想念什么？

注意：我在提交表单后查看了 Safari 中的活动，它显示了我的 process.php 脚本，但它显示“已取消”。为什么要这样做，这可能与它为什么没有显示成功信息有关吗？

这是我的脚本：

HTML

```
<div id="contactform">
    <form id="churchcontact" action="" method="POST">

        <ul>
            <li>
                <label for="name">Name</label>
                <span class="error error_name">Please enter your name</span>
                <input id="name" type="text" name="name" />
            </li>

            <li>
                <label for="email">Email</label>
                <span class="error error_email">Please enter your email address</span>
                <input id="email" type="text" name="email" />
            </li>

            <li>
                <label for="message">Message</label>
                <span class="error error_message">Please write a message</span>
                <textarea id="message" name="message"></textarea>
            </li>

            <li>
                <input class="formsubmit" type="submit" value="Send" />
            <li>
        </ul>

    </form>
    </div> 
```

查询

```
$(document).ready(function() {

    ////////////////////////////////////
    //// form submit                ////
    ////////////////////////////////////
    $('#churchcontact').submit(function() {

        ////////////////////////////////////
        //// validation                 ////
        ////////////////////////////////////
        $('.error').hide();

        //message
        var message = $('textarea#message').val();
        if(message == '') {
            $('.error_message').show();
            $('textarea#message').focus();
            var errors = 'true';
        }

        //email
        var email = $('input#email').val();
        var atpos = email.indexOf("@");
        var dotpos = email.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length || email == '') {
            $('.error_email').show();
            $('input#email').focus();
            var errors = 'true';
        }

        //name
        var name = $('input#name').val();
        if(name == '') {
            $('.error_name').show();
            $('input#name').focus();
            var errors = 'true';
        }

        if(errors) {
            return false;
        } else {

            ////////////////////////////////////
            //// process                    ////
            ////////////////////////////////////

            var dataString = 'name='+ name + '&email=' + email + '&message=' + message;
            //alert (dataString);return false;
            $.ajax({
                type: "POST",
                url: "sites/all/modules/custom/churchcontact/process.php",
                data: dataString,
                success: function() {
                    $('#contactform').html("success!");
                }
            });

        }

        return false;

    });

}); 
```

PHP (进程.php)

```
$name = $_POST['name'];
$email = $_POST['email'];
$msg = $_POST['message'];

$recipient = '[my email]';
$subject = 'Website Test';

$message = '
Name: ' . $name
. ', Email: ' . $email
. ', Message: ' . $msg;

mail($recipient, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T02:40:31.213

在 process.php 添加`echo`一个`mail()`：

```
$res = mail($recipient, $subject, $message, $headers);
echo $res;        //if $res returns 1 that means mail was sent 
```

阿贾克斯`success`：

```
...
success: function(data) {
    if(data == 1){
        message = "success!";
    }
    else{
        message = "Error";
    }    
    $('#contactform').empty().html(message);
   } 
```

# c++ - C++11 我可以确保 condition_variable.wait() 不会错过通知吗？

> ID：11706209
> 
> 赞同：6
> 
> 时间：2012-07-29T02:36:42.143
> 
> 标签：c++, multithreading, c++11, condition-variable

我有线程 1 执行以下代码：

```
unique_lock<mutex> ul(m);
while(condition == true)
    cv.wait(ul); 
```

线程 2 执行此代码：

```
condition = false;
cv.notify_one(); 
```

不幸的是，我遇到了时间问题：

```
T1: condition checks true
                            T2: condition set to false
                            T2: cv.notify_one()
T1: cv.wait() 
```

线程 1 完全错过了通知，并在 wait() 上保持阻塞。我尝试使用带有谓词但结果基本相同的 wait() 版本。也就是说，谓词的主体执行检查，但在它返回之前，条件的值会发生变化并发送通知。然后谓词返回。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T02:46:41.910

您应该通过在更改标志之前让线程 2 锁定条件的互斥锁来修复此竞争条件。

您正在描述针对不受保护的标志和条件发生的典型竞争条件。这些竞争条件是条件使用中互斥锁模式的原因。简而言之，总是有一个互斥锁来保护检查条件值所涉及的变量。

在线程 2 的代码中：

```
unique_lock<mutex> ul(m);
condition = false;
cv.notify_one(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:37:56.630

**由于**对`condition`. _ 这意味着**您的程序的行为没有定义**。

竞争条件`cv`是你最不担心的：程序可以做任何事情！

# c# - 如何在我的 c#asp.net 应用程序中使用 jquery 实现文本框自动建议？

> ID：11706210
> 
> 赞同：0
> 
> 时间：2012-07-29T02:36:56.553
> 
> 标签：c#, jquery, asp.net

我想在我的 c# asp.net 应用程序中实现 jquery 文本框自动建议以搜索员工。现在我在我的应用程序中使用 ajax 自动建议，但是当数据超过 5000 万时它似乎很慢。有人请帮助我。如果有任何关于在不使用索引的情况下使用大量数据更快地搜索的好主意，请与我分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T03:09:09.190

jQuery Auto 搜索详细信息如下：将此代码放入您的 .aspx 文件中。这里 txtSearchBox 是搜索框名称。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>AutoComplete Box with jQuery</title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>  
<script type="text/javascript">
    $(document).ready(function() {
        SearchText();
    });
    function SearchText() {
        $("#txtSearch").autocomplete({
            source: function(request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/GetAutoCompleteData",
                    data: "{'username':'" + document.getElementById('txtSearch').value + "'}",
                    dataType: "json",
                    success: function(data) {
                        response(data.d);
                    },
                    error: function(result) {
                        alert("Error");
                    }
                });
            }
        });
    }
</script>
   </head>
   <body>
   <form id="form1" runat="server">
   <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel>
        <ContentTemplate>
            <div class="demo">
        <div class="ui-widget">
            <label for="tbAuto">Enter UserName: </label>
            <asp:TextBox ID="txtSearch" runat="server" AutoCompleteType="Search"> </asp:TextBox>
        </div>
</div>
        </ContentTemplate>
    </asp:UpdatePanel>

</form>
</body>
</html> 
```

现在 .cs 文件详细信息：

```
public partial class _Default : Page 
{
  protected void Page_Load(object sender, EventArgs e)
   {

   }
[WebMethod]

public static List<string> GetAutoCompleteData(string username)
{
 List<string> result = new List<string>();

 using (SqlConnection con = new SqlConnection("Data Source=devserver;Initial     Catalog=Catalog;Persist Security Info=True;User ID=userName;Password=Password"))
{
 using (SqlCommand cmd = new SqlCommand("select (strEmployeeName + ',' + strEmployeeCode) as username from tblEmployee where strEmployeeName LIKE '%'+@SearchText+'%' ", con))
{
 con.Open();
 cmd.Parameters.AddWithValue("@SearchText", username);
 SqlDataReader dr = cmd.ExecuteReader();
 while (dr.Read())
{
 result.Add(dr["username"].ToString());
}
 return result;
}
}
}  
} 
```

如果您希望可以使用对象数据源，例如：在这种情况下，您的对象方法应该返回 List 类型的数据。

```
[WebMethod]
public static List<string> GetAutoCompleteData(string strSearchKey)
{
    AutoSearch_BLL objAutoSearch_BLL = new AutoSearch_BLL();
    List<string> result = new List<string>();
    result = objAutoSearch_BLL.AutoSearchEmployeesData(strSearchKey);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:43:07.850

jQuery UI 提供了一个很好的自动完成实现，文档建议它可以用来从非常大的数据库中提取自动完成建议

> 您可以从本地和/或远程源提取数据：本地适用于小型数据集（例如具有 50 个条目的地址簿），远程对于大数据集是必要的，例如具有数亿或数百万条目的数据库从中选择。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

请注意，如果您向浏览器*返回*50K 建议（而不是从 50K 可能性池中提取建议），那么您做错了（需要通过网络推送大量数据）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T02:43:40.867

实现[jQuery UI 自动完成](http://jqueryui.com/demos/autocomplete/#remote)就这么简单

```
$(function(){
     $( "#txtEmployee" ).autocomplete({
        source: "employees.aspx",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    });
}); 
```

jQuery UI 自动完成[支持](http://jqueryui.com/demos/autocomplete/#remote-with-cache)数据的某些客户端`caching`。这肯定会提高搜索速度。此外，您可以考虑在存储员工列表的应用程序中实现一个**缓存层**，以便自动完成不会每次都查询您的数据库。相反，它将从缓存层获取数据。

# javascript - javascript date.js 解析和排序对象数组

> ID：11706214
> 
> 赞同：0
> 
> 时间：2012-07-29T02:37:45.330
> 
> 标签：javascript, json, parsing, date, datejs

我正在尝试构建一个 javascript 对象数组，使用 date.js 解析日期，然后使用 date.js 比较方法对该对象进行排序。这是我整理的一些代码来演示我的两个问题。

问题 1：如何忽略 date.js 无法解析的日期并发出警告？问题 2：如何按这些日期对对象数组进行排序？（有或没有 date.js）

我的直觉告诉我，我做错了，还有更好的方法。想法？

```
 <script type="text/javascript" src="depend/date.js"></script>

<script type="text/javascript">
var timedata = ["tomorrow", "today", "next thursday", "2012-08-02T04:00:00.000Z"]; // test data
var myArrayOfObjects = [];

//Iterate through the timedata array
for(var row = 0; row < timedata.length; row++){     
    var cleanrow = true;

    // Here is the first problem, on the 2012-08-02T04:00:00.000Z string can't be parsed (Date.parse(timestr) returns 0) 
    // even though it was previously created with .toISOString method below as a test
    // Error: Ignoring row 3, could not parse this date: 2012-08-02T04:00:00.000Z
    if (Date.parse(timedata[row])){ 
        time =  Date.parse(timedata[row]);
        isoTime = time.toISOString();
    }else{
        console.log("Ignoring row " + row + ", could not parse this date: " + timedata[row]);
        cleanrow = false;
    }
    var xdata = "dummytestdata";
    var weight = "dummytestdata";
    if(cleanrow) {
        myArrayOfObjects.push({x: xdata, xytime: isoTime, weight: weight});
    }
}

// Here is the second problem.  
// Error: TypeError: Date.parse(a.xytime) is null
myArrayOfObjects = myArrayOfObjects.sort(function(a,b){ return Date.parse(a.xytime).compareTo(Date.parse(b.xytime)); });

// Show that the objects are sorted by dates
for(var row = 0; row < myArrayOfObjects.length; row++) {
    console.log(myArrayOfObjects[row].xytime);
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:11:32.660

几件小事

考虑在您的 var 部分中声明 time 和 isoTime up ，否则它们只会神奇地出现并且没有定义范围。

```
var cleanrow = true, isoTime = null, time = null; 
```

考虑只解析`timedata[row]`一次，然后重用变量。它可能会稍微清理一下代码。

```
time = Date.parse(timedata[row])
if (time){ 
    isoTime = time.toISOString(); 
```

是否有任何理由需要将 isoTime 作为字符串，而不仅仅是将日期存储在要放入数组的对象上？让我震惊的是，您也可以存储日期，并在排序中使用它

```
myArrayOfObjects.push({x: xdata, xytime: isoTime, weight: weight, realTime: time});
//...
myArrayOfObjects = myArrayOfObjects.sort(function(a,b){ return a.realTime.compareTo(b.realTime); }); 
```

此外，查看[mozilla doco](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)， sort 方法对数组起作用，而不是返回一个新数组。

```
myArrayOfObjects = myArrayOfObjects.sort(...
//should be just
myArrayOfObjects.sort(... 
```

# git - 如何修复 Git 错误“目标文件 ... 为空”？

> ID：11706215
> 
> 赞同：562
> 
> 时间：2012-07-29T02:38:10.063
> 
> 标签：git

当我尝试提交更改时，我收到此错误：

```
error: object file .git/objects/31/65329bb680e30595f242b7c4d8406ca63eeab0 is empty
fatal: loose object 3165329bb680e30595f242b7c4d8406ca63eeab0 (stored in .git/objects/31/65329bb680e30595f242b7c4d8406ca63eeab0) is corrupt 
```

我试过`git fsck`了：

```
error: object file .git/objects/03/dfd60a4809a3ba7023cbf098eb322d08630b71 is empty
fatal: loose object 03dfd60a4809a3ba7023cbf098eb322d08630b71 (stored in .git/objects/03/dfd60a4809a3ba7023cbf098eb322d08630b71) is corrupt 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1089
> 
> 时间：2012-09-11T13:53:19.677

我有一个类似的问题。我的笔记本电脑在 Git 操作期间没电了。嘘。

我没有任何备份。（注意 Ubuntu One 不是 Git 的备份解决方案；它会帮助您用损坏的存储库覆盖您的健全存储库。）

对于 Git 向导，如果这是一种不好的修复方法，请发表评论。然而，它确实对我有用……至少是暂时的。

第 1 步：备份文件夹*.git*（实际上，我会在每一个更改某些内容的步骤之间执行此操作，但使用新的复制名称，例如*.git-old-1*、*.git-old-2*等.):

```
cd ~/workspace/mcmc-chapter
cp -a .git .git-old 
```

第 2 步：运行`git fsck --full`

```
git fsck --full

error: object file .git/objects/8b/61d0135d3195966b443f6c73fb68466264c68e is empty
fatal: loose object 8b61d0135d3195966b443f6c73fb68466264c68e (stored in .git/objects/8b/61d0135d3195966b443f6c73fb68466264c68e) is corrupt 
```

第三步：删除空文件。我想这是怎么回事；反正它是空白的。

```
rm .git/objects/8b/61d0135d3195966b443f6c73fb68466264c68e

rm: remove write-protected regular empty file `.git/objects/8b/61d0135d3195966b443f6c73fb68466264c68e'? y 
```

第三步：`git fsck`再次运行。继续删除空文件。您还可以`cd`进入该`.git`目录并运行`find . -type f -empty -delete -print`以删除所有空文件。最终 Git 开始告诉我它实际上是在对对象目录做一些事情：

```
git fsck --full

Checking object directories: 100% (256/256), done.
error: object file .git/objects/e0/cbccee33aea970f4887194047141f79a363636 is empty
fatal: loose object e0cbccee33aea970f4887194047141f79a363636 (stored in .git/objects/e0/cbccee33aea970f4887194047141f79a363636) is corrupt 
```

第4步：删除所有空文件后，我最终开始`git fsck`实际运行：

```
git fsck --full

Checking object directories: 100% (256/256), done.
error: HEAD: invalid sha1 pointer af9fc0c5939eee40f6be2ed66381d74ec2be895f
error: refs/heads/master does not point to a valid object!
error: refs/heads/master.u1conflict does not point to a valid object!
error: 0e31469d372551bb2f51a186fa32795e39f94d5c: invalid sha1 pointer in cache-tree
dangling blob 03511c9868b5dbac4ef1343956776ac508c7c2a2
missing blob 8b61d0135d3195966b443f6c73fb68466264c68e
missing blob e89896b1282fbae6cf046bf21b62dd275aaa32f4
dangling blob dd09f7f1f033632b7ef90876d6802f5b5fede79a
missing blob caab8e3d18f2b8c8947f79af7885cdeeeae192fd
missing blob e4cf65ddf80338d50ecd4abcf1caf1de3127c229 
```

第 5 步：尝试`git reflog`。失败是因为我的 HEAD 坏了。

```
git reflog

fatal: bad object HEAD 
```

第 6 步：谷歌。找到[这个](http://git.661346.n2.nabble.com/corrupted-Git-repository-td6498902.html)。手动获取 reflog 的最后两行：

```
tail -n 2 .git/logs/refs/heads/master

f2d4c4868ec7719317a8fce9dc18c4f2e00ede04 9f0abf890b113a287e10d56b66dbab66adc1662d Nathan VanHoudnos <nathanvan@gmail.com> 1347306977 -0400    commit: up to p. 24, including correcting spelling of my name
9f0abf890b113a287e10d56b66dbab66adc1662d af9fc0c5939eee40f6be2ed66381d74ec2be895f Nathan VanHoudnos <nathanvan@gmail.com> 1347358589 -0400    commit: fixed up to page 28 
```

第 7 步：请注意，从第 6 步中我们了解到 HEAD 当前指向最后一次提交。所以让我们试着看看父提交：

```
git show 9f0abf890b113a287e10d56b66dbab66adc1662d

commit 9f0abf890b113a287e10d56b66dbab66adc1662d
Author: Nathan VanHoudnos <nathanvan@XXXXXX>
Date:   Mon Sep 10 15:56:17 2012 -0400

    up to p. 24, including correcting spelling of my name

diff --git a/tex/MCMC-in-IRT.tex b/tex/MCMC-in-IRT.tex
index 86e67a1..b860686 100644
--- a/tex/MCMC-in-IRT.tex
+++ b/tex/MCMC-in-IRT.tex 
```

有效！

第 8 步：所以现在我们需要将 HEAD 指向 9f0abf890b113a287e10d56b66dbab66adc1662d。

```
git update-ref HEAD 9f0abf890b113a287e10d56b66dbab66adc1662d 
```

哪个没有抱怨。

第 9 步：查看 fsck 的内容：

```
git fsck --full

Checking object directories: 100% (256/256), done.
error: refs/heads/master.u1conflict does not point to a valid object!
error: 0e31469d372551bb2f51a186fa32795e39f94d5c: invalid sha1 pointer in cache-tree
dangling blob 03511c9868b5dbac4ef1343956776ac508c7c2a2
missing blob 8b61d0135d3195966b443f6c73fb68466264c68e
missing blob e89896b1282fbae6cf046bf21b62dd275aaa32f4
dangling blob dd09f7f1f033632b7ef90876d6802f5b5fede79a
missing blob caab8e3d18f2b8c8947f79af7885cdeeeae192fd
missing blob e4cf65ddf80338d50ecd4abcf1caf1de3127c229 
```

第 10 步：缓存树中的无效 sha1 指针似乎来自（现已过时的）索引文件（[source](http://www.spinics.net/lists/git/msg96103.html)）。所以我杀了它并重置了存储库。

```
rm .git/index
git reset

Unstaged changes after reset:
M    tex/MCMC-in-IRT.tex
M    tex/recipe-example/build-example-plots.R
M    tex/recipe-example/build-failure-plots.R 
```

第 11 步：再次查看 fsck ......

```
git fsck --full

Checking object directories: 100% (256/256), done.
error: refs/heads/master.u1conflict does not point to a valid object!
dangling blob 03511c9868b5dbac4ef1343956776ac508c7c2a2
dangling blob dd09f7f1f033632b7ef90876d6802f5b5fede79a 
```

悬空的[blob 不是错误](https://stackoverflow.com/questions/9955713/git-dangling-blobs)。我不关心master.u1conflict，现在它正在工作，我不想再碰它了！

第 12 步：赶上我的本地编辑：

```
git status

# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#    modified:   tex/MCMC-in-IRT.tex
#    modified:   tex/recipe-example/build-example-plots.R
#    modified:   tex/recipe-example/build-failure-plots.R
#
< ... snip ... >
no changes added to commit (use "git add" and/or "git commit -a")

git commit -a -m "recovering from the git fiasco"

[master 7922876] recovering from the git fiasco
 3 files changed, 12 insertions(+), 94 deletions(-)

git add tex/sept2012_code/example-code-testing.R
git commit -a -m "adding in the example code"

[master 385c023] adding in the example code
 1 file changed, 331 insertions(+)
 create mode 100644 tex/sept2012_code/example-code-testing.R 
```

* * *

## 回答 #2

> 赞同：351
> 
> 时间：2015-06-29T07:35:57.323

Git 对象文件已损坏（正如其他答案中所指出的那样）。这可能发生在机器崩溃等期间。

我有同样的事情。在阅读了此处的其他最佳答案后，我找到了使用以下命令修复损坏的 Git 存储库的最快方法（在包含该`.git`文件夹的 Git 工作目录中执行）：

> （请务必先备份您的 Git 存储库文件夹！）

```
find .git/objects/ -type f -empty | xargs rm
git fetch -p
git fsck --full 
```

这将首先删除任何导致整个存储库损坏的**空对象文件，然后从远程存储库中****获取丢失的对象**（以及最新更改），然后执行完整的**对象存储检查**。在这一点上，它应该成功而没有任何错误（但可能仍然有一些警告！）

> PS。这个答案表明您在某个地方（例如，在 GitHub 上）有您的 Git 存储库的远程副本，而损坏的存储库是与仍然完好无损的远程存储库绑定的本地存储库。如果不是这种情况，请不要尝试按照我推荐的方式进行修复。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-05-05T02:34:40.557

当我推送我的提交并且我的计算机挂起时，这个错误发生在我身上。

这就是我修复它的方法。

* * *

## 修复步骤

```
git status 
```

显示空/损坏的目标文件

```
rm .git/objects/08/3834cb34d155e67a8930604d57d3d302d7ec12 
```

去掉它

```
git status 
```

我收到`fatal: bad object HEAD`消息

```
rm .git/index 
```

我删除`index`了重置。

```
git reset 
```

致命：无法解析对象“头”。

```
git status
git pull 
```

只是为了检查发生了什么

```
tail -n 2 .git/logs/refs/heads/MY-CURRENT-BRANCH 
```

它打印日志分支的最后两行，`tail -n 2`以显示我的最后两个*提交哈希*。

```
git update-ref HEAD 7221fa02cb627470db163826da4265609aba47b2 
```

我选最后一个`commit hash`

```
git status 
```

它显示我的所有文件都已*删除*，因为我删除了该`.git/index`文件

```
git reset 
```

继续重置

```
git status 
```

验证我的修复

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-05-07T14:10:18.610

我解决了这个问题，删除了正在检测的各种空文件，`git fsck`然后运行了一个简单的 Git 拉取。

令我失望的是，即使文件系统实现了日志和其他“事务”技术来保持文件系统正常，Git 也可能由于电源故障或空间上的空间而进入损坏状态（并且无法自行恢复）设备。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-02-13T09:55:28.663

我只是遇到了同样的问题：在拉取远程存储库后，当我做了一个时，`git status`我得到了：

“错误：对象文件 (...) 为空”
“致命：松散对象 (...) 已损坏”

我解决这个问题的方法是：

1.  `git stash`
2.  错误地删除 Git 文件（我不确定是否有必要）
3.  `git stash clear`

我不知道到底发生了什么事，但那些指示似乎让一切都变得干净了。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-12-19T00:58:45.407

因为我必须定期重新启动我的[虚拟机](https://en.wikipedia.org/wiki/System_virtual_machine)，所以这个问题经常发生在我身上。几次之后，我意识到我不能每次都重复[Nathan Vanhoudnos 描述](https://stackoverflow.com/questions/11706215/how-can-i-fix-the-git-error-object-file-is-empty/12371337#12371337)的过程，尽管它总是有效的。然后我想出了以下更快的解决方案。

**第1步**

将整个存储库移动到另一个文件夹。

```
mv current_repository temp_repository 
```

**第2步**

再次从源克隆存储库。

```
git clone source_to_current_repository.git 
```

**第 3 步**

删除新存储库下的**所有内容，但****.git**文件夹除外。

**第4步**

将**temp_repository**中的所有内容**移动**到新存储库，**但****.git**文件夹除外。

**第 5 步**

删除**temp_repository**，我们就完成了。

几次之后，我相信您可以很快地完成这些程序。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-02-20T15:15:31.953

1.  移动您的应用程序文件夹以进行备份，即*mv* app_folder app_folder_bk （它就像一个**git stash**）
2.  `git clone your_repository`
3.  最后，打开一个合并工具（我在 Linux 上使用[Meld](http://meldmerge.org/) diff 查看器或在 Windows 上使用[WinMerge](https://en.wikipedia.org/wiki/WinMerge)）并将更改从右侧（**app_folder_bk**）复制到左侧（新**app_folder**）（就像**git stash apply**）。

就这样。也许这不是最好的方法，但我认为它是如此实用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-02-02T05:37:42.813

我在使用虚拟机时经常遇到这个问题。

对我来说，以下作品：

```
cd /path/to/your/project
rm -rf .git 
```

如果您想节省一些下载 - 进入您的文件资源管理器并删除文件夹中已提交的所有文件并保留在您的*/vendor*和*/node_modules*（我使用[PHP Composer](https://en.wikipedia.org/wiki/Composer_(software))和[npm](https://en.wikipedia.org/wiki/Npm_(software))）文件夹中。

然后只需创建一个新的存储库：

```
git init 
```

添加您的遥控器

```
git remote add origin ssh://git@github.com/YourUsername/repoName.git 
```

并获取分支/全部

```
git fetch origin somebranch 
```

并检查一下

```
git checkout somebranch 
```

那么您应该处于错误之前的位置。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-07-13T04:02:27.473

这解决了我的问题：

```
git stash
git checkout master
cd .git/ && find . -type f -empty -delete
git branch your-branch-name -D
git checkout -b your-branch-name
git stash pop 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-01-30T21:11:42.457

在一个脚本中

```
#! /bin/sh

# Save Git data
cp -r .git gitold

# Remove all empty Git object files
find .git -type f -empty -delete -print

# Get the current branch name
branchname=$(git branch --show-current)

# Get the latest commit hash
commit=$(tail -2 .git/logs/refs/heads/$branchname | awk '{ print $2 }' | tr -d '[:space:]')

# Set HEAD to this latest commit
git update-ref HEAD $commit

# Pull the latest changes on the current branch (considering remote is origin)
git pull origin $branchname

echo "If everything looks fine you remove the git backup running :\n\
      $ rm -rf gitold \n\
Otherwise restore it with: \n\
      $ rm -rf .git; mv gitold .git" 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-04-27T18:37:53.657

就我而言，发生此错误是因为我正在输入提交消息并且我的笔记本已关闭。

我执行了以下步骤来修复错误：

*   `git checkout -b backup-branch`# 创建备份分支
*   `git reset --hard HEAD~4`# 重置为一切正常的提交。就我而言，我必须在头部支持四个提交，直到我的头部处于输入提交消息之前的位置。**在执行此步骤之前，请复制您将重置的提交的哈希值。就我而言，我复制了最后四个提交的哈希值**。
*   `git cherry-pick <commit-hash>`# Cherry 选择从旧分支到新分支的重置提交（在我的情况下是四个提交，所以我做了四次此步骤）。
*   `git push origin backup-branch`# 推送新分支以确保一切正常
*   `git branch -D your-branch`# 删除本地分支（'your-branch' 是有问题的分支）
*   `git push origin :your-branch`# 从远程删除分支
*   `git branch -m backup-branch your-branch`# 将备份分支重命名为有问题的分支的名称
*   `git push origin your-branch`# 推送新分支
*   `git push origin :backup-branch`# 从远程删除备份分支

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-09-13T09:48:28.863

让我们变得简单...仅在您将源代码上传到远程 Git 存储库的情况下

1.  备份您的*.git*文件夹

2.  检查您的 Git 存储库

    ```
     git fsck --full 
    ```

3.  删除空目标文件（全部）

    ```
     rm .git/objects/8b/61d0135d3195966b443f6c73fb68466264c68e 
    ```

4.  再次检查您的 Git 存储库。

    ```
     git fsck --full 
    ```

5.  从远程 Git 存储库中拉取源代码

    ```
     git pull origin master 
    ```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-10-30T16:08:38.317

**如果**您有一个包含所有需要的分支和提交的本地存储库，并且您可以创建一个新的存储库（或删除服务器的存储库并创建一个新存储库），那么这是一种非常简单快捷的方法来处理这个问题代替它）：

1.  在服务器上创建一个新的空仓库（或删除旧仓库并在其位置创建一个新仓库）
2.  将本地副本的远程 URL 更改为指向新存储库的远程 URL。
3.  将所有分支从本地仓库推送到新的服务器仓库。

这会保留您在本地存储库中的所有提交历史记录和分支。

如果您在 repo 上有合作者，那么我认为在许多情况下，您的所有合作者所要做的就是更改其本地 repo 的远程 URL，并可选择推送他们拥有的服务器没有的任何提交。

当我遇到同样的问题时，这个解决方案对我有用。我有一个合作者。在我将本地存储库推送到新的远程存储库后，他只需将本地存储库更改为指向远程存储库 URL，一切正常。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-08T13:45:49.637

> ***我假设您有一个遥控器，所有相关更改都已推送到它。我不关心本地更改，只是想避免删除和重新克隆大型存储库。如果您确实有重要的本地更改，您可能需要更加小心。***

我的笔记本电脑崩溃后也遇到了同样的问题。可能是因为它是一个大的存储库，我有很多损坏的目标文件，在调用时一次只出现一个`git fsck --full`，所以我写了一个小的 shell one-liner 来自动删除其中一个：

`$ sudo rm `git fsck --full 2>&1 | grep -oE -m 1 ".git/objects/[0-9a-f]{2}/[0-9a-f]*"``

*   `2>&1`将错误消息重定向到标准输出以便能够对其进行*[grep](https://en.wikipedia.org/wiki/Grep)*
*   *使用的grep*选项：
*   `-o`只返回行中实际匹配的部分
*   `-E`启用高级正则表达式
*   `-m 1`确保只返回第一个匹配项
*   `[0-9a-f]{2}`匹配 0 到 9 以及 a 和 f 之间的任何字符（如果其中两个同时出现）
*   `[0-9a-f]*`匹配 0 到 9 之间的任意数量的字符，并且 a 和 f 同时出现

它仍然一次只删除一个文件，因此您可能希望在循环中调用它，例如：

`$ while true; do sudo rm `git fsck --full 2>&1 | grep -oE -m 1 ".git/objects/[0-9a-f]{2}/[0-9a-f]*"`; done`

这样做的问题是，它不再输出任何有用的东西，所以你不知道它什么时候完成（它不应该在一段时间后做任何有用的事情）。

`git fsck --full`为了“解决”这个问题，我在每一轮之后 添加了一个调用，如下所示：`$ while true; do sudo rm `git fsck --full 2>&1 | grep -oE -m 1 ".git/objects/[0-9a-f]{2}/[0-9a-f]*"`; git fsck --full; done`

它现在大约快了一半，但它确实输出了它的“状态”。

`git stash`在此之后，我在这里的答案中提出了一些建议，最终达到了我可以和`git stash drop`很多破碎的东西的地步。

***第一个问题解决了***

之后我仍然遇到以下问题： `unable to resolve reference 'refs/remotes/origin/$branch': reference broken`可以通过以下方式解决 `$ rm \repo.git\refs\remotes\origin$branch`

`$ git fetch`

然后我做了一个 `$ git gc --prune=now`

`$ git remote prune origin`

为了很好的衡量和

`git reflog expire --stale-fix --all`

`error: HEAD: invalid reflog entry $blubb`跑的时候摆脱掉`git fsck --full`。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-06-11T13:58:00.327

我和我的同事已经多次遇到同样的问题，为了解决它，我们只需执行我在下面描述的步骤。它不是可以找到的最优雅的解决方案，但它可以在不丢失数据的情况下工作。

1.  重命名当前工作目录。（`old_project`对于这个例子）。
2.  使用 . 在新目录中克隆存储库`git clone`。
3.  在命令行中，将工作目录更改为新创建的项目并切换到您一直在处理的分支。
4.  将其中的所有文件和目录`old_project`（目录除外`.git`）复制到新创建的项目目录中。
5.  检查您的工作树状态（请注意，更改比您预期的要多），然后提交更改。

我希望它有帮助...

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-02-25T21:39:18.930

我通过以下方式修复了我的 git 错误：目标文件为空：

1.  保存自上次成功提交/推送以来我编辑的所有文件的副本，
2.  删除并重新克隆我的存储库，
3.  用我编辑的文件替换旧文件。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-03-14T02:24:10.730

我遇到了同样的问题，我使用了一种非常简单的方法来解决它。我发现那些丢失的文件存在于我队友的计算机上。

我**将这些文件一一复制**到 Git 服务器（总共 9 个文件），从而解决了问题。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-06-12T07:22:50.407

如果您在 github.com 上的公共存储库正在运行，但您的本地存储库已损坏，这是一种解决问题的方法。请注意，您将丢失在本地存储库中所做的所有提交。

好的，所以我在本地有一个存储库给我 this `object empty error`，以及 github.com 上的相同存储库，但没有此错误。所以我所做的只是从 GitHub 克隆正在运行的存储库，然后从损坏的存储库中复制所有内容（*.git*文件夹除外），并将其粘贴到正在运行的克隆存储库。

这可能不是一个实用的解决方案（因为您删除了本地提交），但是，您需要维护代码和修复的版本控制。

请记住在应用此方法之前进行备份。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-11-01T13:17:24.107

就我而言，保留本地提交历史对我来说并不重要。因此，如果这也适用于您，您可以将其作为上述解决方案的快速替代方案：

`.git/`你基本上只是用一个干净的目录替换损坏的目录。

让我们假设您的项目的以下目录包含损坏的 Git 文件：`projects/corrupt_git/`

1.  `cp projects/corrupt_git projects/backup`- （可选）进行备份
2.  `git clone [repo URL] projects/clean_git`- 让你得到`projects/clean_git`
3.  `rm -rf corrupt_git/.git/`- 删除损坏的*.git*文件夹
4.  `mv clean_git/.git/ corrupt_git/`- 将干净的 git 移至 `corrupt_git/.git`
5.  `git status`在`projects/corrupt_git`- 以确保它工作

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-03-07T16:17:19.493

这也几乎经常发生在我身上。当这种情况完全发生时，我还没有制定协议，但我怀疑只要我的[虚拟机](https://en.wikipedia.org/wiki/System_virtual_machine)(VM) “意外”存在，就会发生这种情况。如果我关闭 VM 窗口（我使用的是[Ubuntu 18.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_18.04_LTS_.28Bionic_Beaver.29)（Bionic Beaver））并重新开始，事情总是（？）工作。但是如果我的笔记本电脑关闭时VM窗口仍然打开（Win​​dows主机系统），那么我会经常遇到这个问题。

至于这里给出的所有答案：

1.  谢谢 - 它们非常有用；我通常保存我的代码的本地副本，从远程恢复存储库，然后将备份副本移回本地文件夹。

2.  由于根本问题不是真正的 Git 问题，而是 VM 和/或 Linux 问题，我想知道是否不应该有办法治愈原因而不是症状？这种错误不是表明某些文件系统更改没有在任何合理的时间内“应用”，而只是缓存？（例如，请参阅*[Linux 中的文件编辑是否直接保存到磁盘中？](https://unix.stackexchange.com/questions/464184/are-file-edits-in-linux-directly-saved-into-disk)*）——在我看来，虚拟 Linux 机器似乎没有足够频繁地同步它们的东西。无论这是 Oracle 的 VirtualBox（否则工作得非常好）或来宾文件系统的问题，还是我们都忽略的某些设置的问题，这超出了我的专业知识。但如果有人能阐明这一点，我会很高兴。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-05-01T04:41:57.777

将所有内容（在包含*.git*文件夹的文件夹中）复制到备份中，删除所有内容，然后重新启动。确保你手边有 Git 遥控器：

```
git remote -v
 origin    git@github.com:rwldrn/idiomatic.js.git (fetch)
 origin    git@github.com:rwldrn/idiomatic.js.git (push) 
```

然后

```
mkdir mygitfolder.backup
cp mygitfolder/* mygitfolder.backup/
cd mygitfolder
rm -r * .git*
git init
git remote add origin git@github.com:rwldrn/idiomatic.js.git 
```

然后手动合并任何新文件，并尝试保持计算机开机。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-07-01T14:40:29.057

从干净的分支签出 master 后，我遇到了同样的问题。

过了一会儿，我在 master 中发现了很多修改过的文件。我不知道他们为什么从一个干净的分支切换到那里。无论如何，因为修改后的文件对我来说毫无意义，我只是把它们藏起来，错误就消失了。

`git:(master) git stash`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-07-10T05:43:43.483

[Nathan VanHoudnos 介绍](https://stackoverflow.com/questions/11706215/how-can-i-fix-the-git-error-object-file-is-empty/12371337#12371337)的十二步解决方案也帮助我摆脱了困境。谢谢。关键步骤是输入：

```
git fsck --full 
```

并删除所有空对象

```
rm .git/objects/... 
```

然后得到 flog 的两行：

```
tail -n 2 .git/logs/refs/heads/master 
```

使用返回值

```
git update-ref HEAD ... 
```

在这一点上我没有更多的错误，所以我备份了我最近的文件。然后执行 Git 拉取，然后执行 Git 推送。我将备份复制到我的 Git 存储库文件并进行了另一个 Git 推送。这让我了解最新情况。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-09-23T04:15:25.693

如果您有*旧*备份并且赶时间：

对当前的 Git 损坏的项目路径进行*新备份。*

1.  将您的垃圾移至`.git`垃圾箱（永不删除）
2.  `.git`从*旧*备份复制
3.  `git pull`（会产生合并冲突）
4.  将你所有的资源（你放在 Git 中的所有东西）移到垃圾箱：（`./src` 永远不要删除）
5.  *从新备份*中复制所有源代码（放入 Git 中的所有内容）
**   接受所有“合并” `git gui`，推动并...拍手！*

 ** * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-01T11:40:41.683

实际上，我遇到了同样的问题。

在尝试此操作之前，请拥有您的代码副本。

我已经做了 `git reset HEAD~`

我最后一次提交被撤消了。然后我又犯了，问题就解决了！

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-05-26T06:12:58.810

[在我的虚拟机](https://en.wikipedia.org/wiki/System_virtual_machine)崩溃并且 Git 文件损坏后，我遇到了同样的问题。

第一步，从项目的根文件夹。

```
find .git/objects -type f -empty -delete 
```

然后修剪和取...

```
git prune
git fetch --all --prune 
```

还有一些回滚，它开始工作了。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-10-10T05:29:54.260

在这种情况下，我通过关注这个问题来解决我的问题。

1.  从我的存储库目录中删除 .git 文件夹。（为安全保留备份）
2.  在另一个目录中克隆我的仓库。
3.  从新的克隆目录复制 .git 文件夹。
4.  粘贴到我以前出现问题的目录中。

检查 git 状态，希望你能看到你的所有变化。现在您可以提交和推送。*

# android - 总用户/活动设备安装计数未在 android 开发者控制台中更新

> ID：11706216
> 
> 赞同：1
> 
> 时间：2012-07-29T02:38:32.367
> 
> 标签：android, console, count, zero

大约 12 小时前，我刚刚在 GooglePlay 上发布了我的第一个应用程序......

我发现在我的开发者控制台中，在多次安装和我朋友的一些评分/评论后，总用户安装/活动设备数一直显示**为 0 。**30天*安装历史图表*也未显示。

有人知道我在发布设置中做错了什么吗？

我的应用是：Timer Master [https://play.google.com/store/apps/details?id=pro.learning.testtimer&feature=search_result#?t=W251bGwsMSwxLDEsInByby5sZWFybmluZy50ZXN0dGltZXIiXQ](https://play.google.com/store/apps/details?id=pro.learning.testtimer&feature=search_result#?t=W251bGwsMSwxLDEsInByby5sZWFybmluZy50ZXN0dGltZXIiXQ) ..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:19:14.133

它每天太平洋标准时间上午 12 点（太平洋时间）更新

[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T02:47:48.683

您需要等待 48 小时才能使用不是免费的应用程序。这是因为可退还的时间范围。如果获得退款，Google 会等待，然后再向开发者显示。

如果该应用程序是免费的，请给它大约 12 小时，它会更新。

# iphone - iPhone 电子邮件用户界面

> ID：11706218
> 
> 赞同：0
> 
> 时间：2012-07-29T02:40:29.173
> 
> 标签：iphone, ios, email, interface, uikit

我们正在构建一个 iPhone 应用程序，该应用程序将允许通过我们自己的后端服务器发送类似电子邮件的消息。理想情况下，我们希望我们的 UI 与标准 iOS 邮件（即 MFMailComposeViewController）非常相似，但有一些 UI 自定义。

有谁知道我们可以将其用于我们的目的的第三方控件？我们希望通过在现有工作上构建自定义控件来节省时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:49:35.610

Three20 框架的[TTMessageController](http://api.three20.info/interface_t_t_message_controller.php)似乎可以满足您的需求。

# java - java - 如何使用java中的jButton从TextArea打印文本？

> ID：11706222
> 
> 赞同：0
> 
> 时间：2012-07-29T02:41:00.913
> 
> 标签：java, swing, printing, textarea, jbutton

如何使用 jButton 从 TextArea 打印文本？我正在使用netbeans，顺便说一句。谁能帮我？这是我在学校的期中项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:08:54.147

使用 textarea 的 getText() 方法获取文本。使用 System.out.println() 在控制台中打印它，或者如果不是控制台，请按照您的方法。在 JButton 的事件处理程序中执行这些操作。

```
public void actionPerformed(ActionEvent aew)
{
    JTextArea text = new JTextArea();

    String result = text.getText();
} 
```

# ruby - Ruby：何时使用代码块以及如何知道是否应该将代码块传递给方法？

> ID：11706224
> 
> 赞同：0
> 
> 时间：2012-07-29T02:41:22.160
> 
> 标签：ruby, block

我开始学习 Ruby 并尝试理解代码块，因为我是一名具有 C# 和 Java 背景的程序员。我想我理解传递块和使用产量的概念。但是，根据我的背景，块在什么情况下有用（我以前从未使用过代码块/clojures，所以我不明白为什么它们如此有用）？我想知道的另一件事是：如果我开始处理现有项目，并且已经开发了一些 API 等，我怎么知道是否应该将块传递给某个 API 方法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:35:40.480

如果您在 C# 中经常使用 lambda，那么块可能很熟悉，因为它们都是可以传递的匿名代码块。

在惯用的 Ruby 中一直使用块。它们用于代替“for”循环，

```
1.upto(10) do |i|
    puts i
end 
```

或遍历集合，

```
["New York", "Chicago", "Los Angeles"].each do |city|
    puts "I wish I wasn't in #{city}!"
end 
```

或以类似于 C# 'using' 语句的方式处理文件。

```
File.open("test-file", "w") do |f|
    f.puts "Hello, world!"
end 
```

通常 API 文档会明确说明何时需要一个块并提供示例。我觉得不用太担心。

# php - 使用 CakePHP 更新查询

> ID：11706225
> 
> 赞同：5
> 
> 时间：2012-07-29T02:41:32.370
> 
> 标签：php, database, cakephp, model

我知道`$this->Model->save()`如果我传入 id 可以用来更新特定记录，但是如何更新该行上的单个字段？

我有一个`users`带`balance`字段的表。我想`balance`根据已有的内容更新该字段。

例如，用户在余额字段中有 20 美元。我想加 1 美元使它变成 21 美元。我知道如何做到这一点的唯一方法是使用

```
$balance = $this->Model->find('first', array(
    'conditions' => array('User.id' => $userId),
    'fields' => array('User.balance')
));

$this->Model->save(array(
    'User' => array('id' => $userId, 'balance' => $balance['User']['balance'] + $credit)
)); 
```

我怎样才能把这一切都集中在一个`save`电话里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T03:07:38.913

这应该这样做：

```
$this->User->updateAll(array('User.balance' =>'User.balance + 1'), array('User.id' => $id)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T02:43:57.280

```
$this->Model->saveField('balance','balance+1'); 
```

应该做的伎俩！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T09:27:42.450

试试这个：-

```
public function edit($id = null) {
        $this->layout = 'admin_layout';
        $this->Model->id = $id;
        if (!$this->Model->exists()) {
            throw new NotFoundException(__('Invalid model'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->Model->save($this->request->data)) {
                $this->Session->setFlash(__('The model has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The model could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->Model->read(null, $id);
        }
        $datd = $this->Model->find('list');
        $this->set('data', $datd);
    } 
```

# django - 服务静态文件错误“此处不允许目录索引”

> ID：11706230
> 
> 赞同：2
> 
> 时间：2012-07-29T02:42:29.180
> 
> 标签：django

我在这里遇到了障碍，Django 文档和[以前的堆栈溢出问题](https://stackoverflow.com/questions/10644649/what-does-directory-indexes-are-not-allowed-here-mean-in-a-django-error)没有帮助。我已经阅读了[文档中的静态文件部分，](https://docs.djangoproject.com/en/1.4/howto/static-files/)并且似乎使用`django.contrib.staticfiles`.

所以我试图显示我的静态文件，我对自己做错了什么感到有点困惑。当我访问我的`localhost:8000/static/`站点时，我收到一个 404 错误，并显示“此处不允许目录索引”。信息。我已经设置了我的`STATIC_URL' = '/static/'`，我有一个静态目录，我的文件位于我的`newsletter`应用程序内，该目录位于`INSTALLED_APPS`设置下。我什至尝试将完整路径放入`STATICFILES_DIR`设置中，但这不起作用。

我见过人们尝试修改`STATIC_ROOT`设置，但如果我错了，请纠正我，我认为这在开发服务器上是不好的做法。有什么线索吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T02:51:28.370

这是说它不会生成包含该目录中文件列表的 HTML 文档（它被称为“目录索引”）。您仍然应该能够直接访问这些文件。尝试加载特定文件，而不是仅仅将裸目录名放入浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T15:38:05.807

讨厌回答我自己的问题，但是一个比我有更多 django 经验的朋友给我指出了正确的方向。我将我的静态文件夹移到了外部目录中`manage.py`。将我的更改`STATIC_URL`为`/static`，然后添加`urlpatterns += staticfiles_urlpatterns()`到我的`urls.py`文件中。现在一切正常！

我仍然有点困惑，因为我认为使用 1.4 我可以在我的应用程序下添加静态目录并让它正常工作......无论如何感谢所有回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T07:59:42.333

根据您对吉姆回答的评论，看起来 Django 只是没有为 {{ STATIC_URL }} 获得正确的值。

查看您的代码，它看起来像您拥有的设置

```
STATIC_URL' = '/static/' 
```

在不应该有的 STATIC_URL 后面加上一个单引号。尝试

```
STATIC_URL = '/static/' 
```

这能解决你的问题吗？

# jquery - Amazon Payments - 如何允许用户在付款成功后发送照片和其他通过电子邮件发送给我的数据

> ID：11706238
> 
> 赞同：1
> 
> 时间：2012-07-29T02:44:09.087
> 
> 标签：jquery, amazon, image-uploading, email-attachments, amazon-fps

我有一个网站，用户使用 jQuery File Upload 上传照片，然后我提供手动 Photoshop 处理这些照片的服务，并在完成后通过电子邮件将它们发回给他们。

这是我正在使用的上传工具的演示：http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

过程是这样的：

1.  用户访问网站并上传一张或多张照片
2.  用户在文本框中填写有关他们希望如何处理照片的具体说明
3.  用户选择三个每张照片价格选项之一。例如，如果一个选项是每张照片 50 美元并且他们上传了三张照片，他们将支付 150 美元
4.  用户支付服务费用并等待 3 - 5 天，而我正在处理照片，然后我将结果通过电子邮件发送给他们

我在页面上有三个 Amazon Simple Pay 按钮，每个价格选项一个。我有这个设置并经过测试。但是，一旦用户付款然后返回网站，我就无法知道他们上传了哪些照片。这些照片只会存在于我的服务器上，但我无法将它们与特定用户及其付款相关联。我想要完成的是让亚马逊“立即付款”按钮首先上传照片（我可以为此绑定一个 jQuery 触发事件），然后将它们与自定义 JSON 数据包一起发送到亚马逊或我自己的服务器在付款处理成功之前暂时保留该数据，然后将数据通过电子邮件发送给我。

一旦成功，亚马逊已经向我发送了一封包含交易信息的电子邮件，但我也希望它包含我的 JSON 数据以及上传的照片。

目标是使支付过程坚如磐石，以便上传的照片始终与支付紧密相关，从而最大限度地减少用户的任何潜在错误。至于我自己，我不想意外地将用户上传的内容与另一个用户相关联，这就是为什么我想要一种方法让整个支付过程为我打包所有内容。我一直在阅读 Amazon Simple Pay 文档，但没有找到任何内容告诉我如何将数据发送到 Amazon 并将其包含在它发送给我的验证或失败电子邮件中。

我的问题是，这甚至可能吗？如果是这样，我应该使用什么技术来完成它？

# c# - 源数据更改时如何更新数据绑定组合框？

> ID：11706241
> 
> 赞同：4
> 
> 时间：2012-07-29T02:44:52.963
> 
> 标签：c#, data-binding, combobox, windows-8, microsoft-metro

我正在开发适用于 Windows 8 的 C# Metro 风格应用程序，但在源数据更改时更新我的​​数据绑定组合框时遇到问题。

这是数据源：

```
public class Range
{
    public string range_name { get; set; }
    public string range_description { get; set; }
    public int min { get; set; }
    public int max { get; set; }
}

static List<Range> ranges = new List<Range>
{
    new Range { range_name = "Foo", range_description = "Foo: (0-10)", min = 0, max = 10},
    new Range { range_name = "Bar", range_description = "Bar: (5-15)", min = 5, max = 15},
    new Range { range_name = "Baz", range_description = "Baz: (10-20)", min = 10, max = 20},
    new Range { range_name = "Custom", range_description = "Custom: (0-20)", min = 0, max = 20}
}; 
```

和组合框：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ComboBox Name="combo_range" ItemsSource="{Binding Path=Range}" DisplayMemberPath="range_description" SelectedValuePath="range_name" SelectedValue="{Binding Path=Range}" SelectionChanged="combo_range_SelectionChanged"/>
</Grid> 
```

用户可以在应用程序中操纵“自定义”范围的最小/最大范围范围，但组合框仅在我从该记录更改然后更改回“自定义”时才会更新。

当源数据发生变化时，我需要做什么来强制组合框实时更新？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:35:10.357

尝试在 Range 类中实现[INotifyPropertyChanged ：](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

```
public class Range : INotifyPropertyChanged
{
    // Declare the event
    public event PropertyChangedEventHandler PropertyChanged;
    private string _range_name;
    private string _range_description;
    private int _min;
    private int _max;

    public string range_name
    {
        get { return this._range_name; }
        set
        {
            _range_name = value;
            OnPropertyChanged("range_name");  
        }  // Call OnPropertyChanged whenever the property is updated
    }
    public string range_description
    {
        get { return this._range_description; }
        set
        {
            _range_description = value;
            OnPropertyChanged("range_description");
        }
    }
    public int min
    {
        get { return this._min; }
        set
        {
            _min=value;
            OnPropertyChanged("min");
        }
    }
    public int max
    {
        get { return this._max; }
        set
        {
            _max = value;
            OnPropertyChanged("max");
        }
    }

    // Create the OnPropertyChanged method to raise the event
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

希望能帮助到你 ;）

# tcl - 如何在 [incr-tcl] 中为类动态添加方法

> ID：11706243
> 
> 赞同：0
> 
> 时间：2012-07-29T02:45:20.197
> 
> 标签：tcl, redefinition, incr-tcl

在 Incr Tcl 中，我通过将类的方法更改并重新评估到正在运行的 Tcl 解释器中，从而提高了编程效率，而无需重新启动应用程序。为此，我必须使用[主体](http://www.tcl.tk/man/itcl3.1/body.n.html)语法定义类定义之外的方法，并将主体定义重新评估到正在运行的 Tcl 解释器中。这很好用。令人惊讶的是，显然是设计使然，在[Incr Tcl](http://www.tcl.tk/man/itcl3.1/class.n.html)中，

> 一个类只能定义一次，尽管类方法和过程的主体可以一次又一次地定义以进行交互式调试。

然而，在开发过程中，我很自然地将方法（重构）拆分为两个或多个附加方法，以便在同一个类中定义。

我想找到一种方法来强制将方法添加到正在运行的 Tcl 解释器中的现有类：

1.  无需将类定义删除并重新评估到正在运行的 Tcl 解释器中，
2.  无需重新启动包含要扩充的 Incr Tcl 类的现有对象实例的 Tcl 应用程序，并且
3.  没有从所述 Tcl 解释器中删除现有对象的结果。

我只需要它作为开发/调试仪式，而不是生产代码（即，我不需要以编程方式动态添加方法）。我会接受黏糊糊的、邪恶的、后门的答案。更改 Incr Tcl 的生产副本以添加其他行为是不切实际的，因为不幸的是，我必须使用的 Incr Tcl 的二进制文件静态绑定到正在运行的进程中，并且无法通过某些共享库巫术卸载和重新加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:03:42.863

您可以使用以下*命令重新定义*类中的方法[`itcl::body`](http://wiki.tcl.tk/12622)：

```
itcl::body helloworld::greet {} {
    puts "Goodbye Cruel World from $owner"
} 
```

但是，您不能以这种方式将全新的方法添加到类中。好吧，当然不是在 3.4 中（我没有用 4.0 测试过）：

```
% 包需要Itcl
3.4
% itcl::class hi {
    # 除了我们这些鸡，这里没有人...
}
% 嗨嗨
你好
% itcl::body hi::there {} {放“你好！”}
函数“there”未在类“::hi”中定义

```

如果您需要那种功能，您可以考虑使用 XOTcl 或（从 Tcl 8.5 开始）TclOO，它们都支持在创建后完全重新配置类。

# php - 用嵌套计算数组的值

> ID：11706245
> 
> 赞同：1
> 
> 时间：2012-07-29T02:45:35.600
> 
> 标签：php, arrays

我有以下数组，它是嵌套在更大数组中的一组数组：

```
Array
(
    [0] => Array
        (
            [vote_for] => 15
        )

    [1] => Array
        (
            [vote_for] => 15
        )

    [2] => Array
        (
            [vote_for] => 15
        )

    [3] => Array
        (
            [vote_for] => 5
        )

    [4] => Array
        (
            [vote_for] => 5
        )

    [5] => Array
        (
            [vote_for] => 2
        )

    [6] => Array
        (
            [vote_for] => 2
        )

    [7] => Array
        (
            [vote_for] => 2
        )

    [8] => Array
        (
            [vote_for] => 2
        )

    [9] => Array
        (
            [vote_for] => 2
        )

    [10] => Array
        (
            [vote_for] => 2
        )

    [11] => Array
        (
            [vote_for] => 2
        )

    [12] => Array
        (
            [vote_for] => 2
        )

    [13] => Array
        (
            [vote_for] => 2
        )

    [14] => Array
        (
            [vote_for] => 2
        )

) 
```

我想在这个数组上做相当于 array_count_values 的操作，这样我得到`15 => 3`,`5 => 2`和`2 => 10`. 我如何取消嵌套数组来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:50:46.407

您可能想尝试重新排列您的数组以计数：

```
$count_array = array();
foreach ($arr as $v) {
   $count_array[] = $v['vote_for'];
}

// Now get the counts
$the_count = array_count_values($count_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:17:17.587

我认为数组映射也适用于此

```
$count_array = array_map(function($item) { return $item['vote_for']; }, $array);
$the_count = array_count_values($count_array); 
```

# asp.net-mvc - MVC 空引用异常

> ID：11706246
> 
> 赞同：0
> 
> 时间：2012-07-29T02:45:47.260
> 
> 标签：asp.net-mvc

当我在 MVC 中向数据库发送信息并重定向页面并调用打印出新存储数据的视图时，我收到 NullReferenceException 错误：

“你调用的对象是空的。”

显然，我的模型为空：

```
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CustomerID)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Address)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
    </td>
</tr>
} 
```

这是我的控制器：

```
public ActionResult Index()
    {
        var customer = db.Customer.ToList();
        return View();
    } 
```

哪个被调用：

```
 [HttpPost]
    public ActionResult Create(CustomerModel customer)
    {
        db.Customer.Add(customer);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

我不明白为什么它是空的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T02:47:46.807

```
public ActionResult Index()
    {
        var customer = db.Customer.ToList();
        return View(customer);
    } 
```

您永远不会将`customer`对象传递给视图。

`db.SaveChanges();`编辑：当发生异常时， 也不将你的 try/catch 包装起来可能很危险。

# c# - 数据库更改未推送到服务器

> ID：11706252
> 
> 赞同：0
> 
> 时间：2012-07-29T02:47:22.223
> 
> 标签：c#, winforms

我有一个 winforms 应用程序，它使用 IDE 中的数据源和数据集控件

这是我正在使用的代码块

```
 dsParcelBatch.BC_cpo_PARCELRow pr = dsParcelBatch.BC_cpo_PARCEL.FindByISN(int.Parse(activeParcelID));
    pr.BeginEdit();
    pr.NODE_ISN = 6;
    pr.EndEdit();       
    pr.AcceptChanges();

    dsParcelBatch.AcceptChanges(); 
```

我可以在第 1 行读取正确的行，它正在使用正确的值填充 PR 行，我调用 beginedit，并且 dsParcelBatch 没有更新。

我将 NODE_ISN 的值更改为新值，它坚持

我关闭编辑，并接受行中的更改。我可以查看数据源（dsParcelBatch）并且更改在那里 - 是的！

我调用dsParcelBatch，改变的值改变了....

但是当我查看数据库时，值又回到了原始值（5）

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:27:30.037

在调用 AcceptChanges 之前，您需要使用[DataAdapter](http://msdn.microsoft.com/en-us/library/system.data.common.dbdataadapter.aspx)来[更新](http://msdn.microsoft.com/en-us/library/at8a576f.aspx)数据库。

AcceptChanges 仅更改 DataTable 中行的状态，而不更改数据库中的行状态。

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datatable.acceptchanges)：

> 调用 AcceptChanges 时，任何仍处于编辑模式的 DataRow 对象都会成功结束其编辑。DataRowState 也发生了变化：所有已添加和已修改的行都变为未更改，而已删除的行将被删除。

# c# - 添加状态栏，但不适合其他控件

> ID：11706253
> 
> 赞同：0
> 
> 时间：2012-07-29T02:47:26.953
> 
> 标签：c#

写完一组控件，突然想到“嘿，我们加个状态栏吧”。
所以我在主窗体的底部添加了一个状态条，但它挡住了任何控件的底部。

看起来它只是将自己置于任何现有控件之上。

如何添加状态栏并让所有其他控件自动调整以使我的状态栏出现在表单底部而不会干扰其他控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:51:34.527

如果您的其他控件已停靠，只需使用上下文菜单将其发送到后面，它们就会自动调整。（右键单击>发送到后面）

# objective-c - NSInternalInconsistencyException', reason: '试图将第 0 行插入第 0 节，但更新后第 0 节只有 0 行'

> ID：11706254
> 
> 赞同：40
> 
> 时间：2012-07-29T02:47:38.087
> 
> 标签：objective-c, ios, uitableview

我正在使用 UITableViewController 并在更新 tableView 时收到此错误。下面是我的代码：

当我执行点击事件时会发生这种情况：

```
[timeZoneNames insertObject:@"HELLO" atIndex:0];  
[self.tableView beginUpdates];   
NSArray *insertIndexPaths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]];
[self.tableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationTop];
[self.tableView endUpdates]; 
```

我尝试寻找苹果文档，但没有帮助。

谢谢，阿比

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-04-01T16:30:39.240

当我忘记正确设置数据源出口时，我遇到了这个错误。

如果您看到此错误，请检查您是否明确设置了 TableView 委托和数据源：

*   转到您的界面构建器并使用“表格视图”查看视图

*   cmd +右键单击从“表格视图”图标拖动（您应该看到一条蓝线）到文件的标题图标，在xcode 6中它旁边有一个黄色图标。

*   松开鼠标，您应该会看到委托和数据源选项。

*   选择“数据源”

您的桌子现在应该已正确接线。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-29T04:13:38.477

我以前遇到过这个问题。这意味着当`-insertRowsAtIndexPaths:withRowAnimation:`被调用时`-tableView:numberOfRowsInSection:`返回0。您需要在调用之前插入模型`-insertRowsAtIndexPaths:withRowAnimation:`（参见[`-beginUpdates`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/beginUpdates)：）

* * *

**更新**

我想知道返回值`-tableView:numberOfRowsInSection:`是多少？此外，如果您只有一个更新，则不需要`-beginUpdates`/ 。`-endUpdates`

```
[timeZoneNames insertObject:@"HELLO" atIndex:0];
// Let's see what the tableView claims is the the number of rows.
NSLog(@"numberOfRowsInSection: %d", [self tableView:self.tableView numberOfRowsInSection:0]);
NSArray *insertIndexPaths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]];
[self.tableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationTop]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T05:09:31.490

我尝试在更新期间打印出 tableView 中实际有多少行和部分，这让我想到，我在 table view 数据源方法中返回了多少部分......这是罪魁祸首：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 0;
} 
```

确保您返回 1 而不是 0。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

至少这为我解决了问题......

**更新：**

在它工作了一段时间后，我又遇到了同样的问题。我稍微修改了应用程序。我的第一个视图是 tableView，当您单击右上角的加号按钮时，您会看到另一个可以输入信息的表。当您单击完成时，信息将使用以下代码添加到 Core Data 模型中：

```
- (IBAction)doneButtonPressed:(UIBarButtonItem *)sender
{

MoneyBadgeAppDelegate *appDelegate =
[[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context =
[appDelegate managedObjectContext];
NSManagedObject *newMoment;
newMoment = [NSEntityDescription
             insertNewObjectForEntityForName:@"SpendingMoment"
             inManagedObjectContext:context];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMdd"];
NSDate *modifiedDate = [dateFormat dateFromString: self.dateTextField.text];

[newMoment setValue: modifiedDate forKey:@"date"];
[newMoment setValue: descTextField.text forKey:@"desc"];

[appDelegate.eventsArray insertObject:newMoment atIndex:0];

NSError *error;
[context save:&error];

[self dismissViewControllerAnimated:YES completion:nil];

} 
```

我确认它已成功放入核心数据模型，方法是在返回第一个屏幕时在我的 viewDidAppear 方法中向控制台打印以下内容。

```
-(void)viewDidAppear:(BOOL)animated{
NSEntityDescription *entity = [NSEntityDescription entityForName:@"SpendingMoment"  
inManagedObjectContext:self.managedObjectContext];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:entity];

NSError *error;
NSArray *items = [self.managedObjectContext
                  executeFetchRequest:fetchRequest error:&error];

for (SpendingMoment *moment in items) {
    NSLog(@"Date: %@, Desc: %@", [moment date], [moment desc]);
}

[self addEvent]; 
```

然后我的 addEvent 方法执行此操作：

```
- (void)addEvent {

[self.tableScreen beginUpdates];

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableScreen insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                      withRowAnimation:UITableViewRowAnimationFade];

[self.tableScreen reloadData];
[self.tableScreen endUpdates];

@try{
    [self.tableScreen scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
}
@catch(NSException *exception){
} 
```

}

知道这次是什么问题吗？？？谢谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-14T02:30:12.920

检查此“尝试将第 0 行插入第 0 节，但更新后第 0 节中只有 0 行”。

当您在第 0 行第 0 部分中插入对象时，它会出错，没有任何部分。在插入行之前尝试插入部分。

```
 [timeZoneNames insertObject:@"HELLO" atIndex:0];
 NSLog(@"sections: %lu ",[self.downlaodTableView numberOfSections];
 // insert section 
 [self.tableView insertSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 1)] withRowAnimation:UITableViewRowAnimationNone];
 NSLog(@"numberOfRowsInSection: %d", [self tableView:self.tableView  numberOfRowsInSection:0]);
 NSArray *insertIndexPaths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]];
 [self.tableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationTop]; 
```

# java - 没有 XML 的简单 Android 应用程序

> ID：11706258
> 
> 赞同：6
> 
> 时间：2012-07-29T02:48:39.040
> 
> 标签：java, android

我正在教几位同事 Java，目的是进入 Android 游戏编程。有没有办法在屏幕上显示一个框，当你触摸它时它会改变颜色，而无需创建 Activity（这是在 Eclipse 中）并潜入丑陋的 XML 世界？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:56:08.720

这是根据您的要求以编程方式在 Android 中创建 UI 的示例

```
public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Button changeColor = new Button(this);
        changeColor.setText("Color");
        changeColor.setLayoutParams(new ViewGroup.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT,
                ViewGroup.LayoutParams.WRAP_CONTENT));

        changeColor.setOnClickListener(new View.OnClickListener() {
            int[] colors = {Color.RED, Color.GREEN, Color.BLUE, Color.YELLOW};
            @Override
            public void onClick(View view) {
                final Random random = new Random();
                view.setBackgroundColor(colors[random.nextInt(colors.length - 1) + 1]);
            }
        });
        setContentView(changeColor);
    } 
```

但是，我强烈建议您在布局中使用 XML。一旦您理解了 XML，使用它就会变得更加容易和快捷，所以[这里](https://developer.android.com/training/basics/firstapp/building-ui.html)有一个教程供您使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:08:15.520

您可以通过编程方式创建小部件并将它们添加到您在 onCreate 中设置为内容视图的布局。类似这样的东西会起作用：

```
RelativeLayout layout = new RelativeLayout(this);
Button btnChangeColour = new Button(this);
btnChangeColour.setText("Change Colour");
btnChangeColour.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        v.setBackgroundColor(...);
    }
});
layout.addView(btnChangeColour);
setContentView(layout); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T03:56:51.810

我听到你在说什么，是的——虽然我同意当你只想在 android 中编写游戏时 XML 很无聊——我可以说 XML 是 android 的一个必要的邪恶。至少将 ViewStubs 放在 XML 中，然后在代码中扩充它们。

或者，如果您希望它们的格式正确，请习惯于调用许多“新的 LayoutParams”调用。

但是，如果您希望它在 Android 上运行，您的课程确实需要覆盖 Activity。

# c++ - 带有暂停/恢复控件的 C++ 下载文件

> ID：11706263
> 
> 赞同：1
> 
> 时间：2012-07-29T02:50:16.280
> 
> 标签：c++, download

是否有一个**简单**的库可用于通过暂停/恢复控件从 Internet**异步下载文件。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:11:07.447

你没有提到你使用的操作系统。对于 Linux/Unix，您可以使用 libcurl。这个库使用起来非常简单，同时功能也很强大。它具有 curl_easy_pause 方法，可以暂停和取消暂停当前连接。请参阅[http://curl.haxx.se/libcurl/c/curl_easy_pause.html](http://curl.haxx.se/libcurl/c/curl_easy_pause.html)中的详细信息。[在这里](http://curl.haxx.se/libcurl/c/example.html)您可以找到使用 libcurl 的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T10:45:21.473

对于 c++，您可能会看到我的库示例：[main.cpp](http://code.google.com/p/curlwork/source/browse/trunk/demo/download_file/main.cpp)

# php - php $_session 返回

> ID：11706264
> 
> 赞同：1
> 
> 时间：2012-07-29T02:50:39.193
> 
> 标签：php

拿到了一个ajax提交表单源代码，学习了一下，发现返回的错误都在一个大方块里。我想将错误与它们所属的位置分开。然后我可以简单地添加如下代码

```
 <?php if($_session('errorarray'): ?>
   <span class="errorclass"><?php echo $errorarray['phone']; ?></span>
 <?php endif; ?> 
```

这是验证 php 代码，（我有 5 项需要检查）

```
 $error = array();

    if(!check('name'))
        $error[]='too short!';
    else if(validate_name($_POST['name']))
        $error[]='letters please!'; 

    ..........

if(checkphone($_POST['phone'])){
    $error[]="Please enter a valid phone number";
} 
```

这是返回到 $_Session 的代码

```
if(count($error))
{
    if($_POST['ajax'])
    {
        echo '-1';
    }

    else if($_SERVER['HTTP_REFERER'])
    {
        **$_SESSION['errorarray'] = array ($error);** // possible? 
        $_SESSION['post']=$_POST;

        header('Location: '.$_SERVER['HTTP_REFERER']);
    }

    exit;
} 
```

对不起，我对 php 很陌生。希望我的表达不会太难理解。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T02:56:41.797

您可以设置`$_SESSION['errorarray'] = $error;`Then 在您的视图中，您可以执行类似的操作`<span class="errorclass"><?php foreach ($_SESSION['errorarray'] as $err) { echo $err; } ?></span>`

抱歉，您的问题有点不清楚，如果您提供更多详细信息，我们可能会给您更好的答案。

# javascript - CoffeeScript 和异步递归函数

> ID：11706267
> 
> 赞同：1
> 
> 时间：2012-07-29T02:50:46.197
> 
> 标签：javascript, function, asynchronous, coffeescript, jshint

我尝试获取异步递归的函数。在 JS 中应该是这样的：

```
(function asyncRecursion(){
  doStuff();

  setTimeout(asyncRecursion, 1000);
})(); 
```

这是我在 CoffeeScript 中尝试过的：

```
(asyncRecursion = ->
  doStuff()

  setTimeout asyncRecursion, 1000
)() 
```

但这被编译为：

```
(asyncRecursion = function(){
  doStuff();

  setTimeout(asyncRecursion, 1000);
})(); 
```

我在 JSHint 中遇到了一个名为“错误调用”的错误。对于第 1 行，asyncRecursion 函数。那么我怎样才能获得一个 JSHint 安全的异步递归函数。编译后的版本有效，但仍然存在 JSHint 错误。或者我应该忽略那个“错误的调用”。错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:40:56.547

I think JSHint is confused. An assignment is an expression and the value of that expression is the assignment's right hand side; that means that `f = function() { ... }` is an expression whose value is a function so `(f = function() {...})()` is perfectly valid JavaScript.

If you ask JSHint about this:

```
var f;
(f = 11)(); 
```

you'll get the same "Bad invocation" error and we see that JSHint probably isn't inferring the type of `f`, it just doesn't want to you `(f = x)()` for any `x` (even when `x` is definitely a function). I'd tell JSHint to go pound sand and find a better tool. However, if you must use JSHint, you can write your CoffeeScript in two pieces:

```
asyncRecursion = ->
  doStuff()
  setTimeout asyncRecursion, 1000
asyncRecursion() 
```

and get this JavaScript:

```
var asyncRecursion;
asyncRecursion = function() {
  doStuff();
  return setTimeout(asyncRecursion, 1000);
};
asyncRecursion(); 
```

which JSHint is happy with. Both your original and the "make JSHint happy" version produce the same result when executed.

For extra fun with JSHint's lack of type inference, ask it what it thinks of this:

```
var asyncRecursion;
asyncRecursion = 11;
asyncRecursion(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:31:11.190

你可以这样写：

```
asyncRecursion = do ->
  doStuff()

  setTimeout asyncRecursion, 1000 
```

它将被编译成：

```
var asyncRecursion;

asyncRecursion = (function() {
  doStuff();
  return setTimeout(asyncRecursion, 1000);
})(); 
```

# javascript - 用于动画多个 div 的最佳 JavaScript 库

> ID：11706268
> 
> 赞同：2
> 
> 时间：2012-07-29T02:50:49.247
> 
> 标签：javascript, css, jquery-ui-draggable

我有一个 div 框网格，我将制作动画。在用户拖动其中一个框（重新对齐到网格中）后，它们将在屏幕上移动。

目前我正在使用 JQuery 来更改所有 div 的 css 左侧和顶部位置，并在一段时间内运行它。

如果有超过 50 个盒子，那就太迟了。我怎样才能减少这种滞后？有没有更适合这个的动画库，还是我只需要将它限制为 50 个框？

布局图： ![在此处输入图像描述](../Images/0f5abed611300d7ee0451151bc2a2010.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:05:48.627

有几种方法可以提高性能。一种是减少每个盒子所需的 DOM 元素的数量。另一个是不在当前视口之外为框设置动画（和渲染）。将可视区域之外的所有框都设为“display: none;” 并在开始新动画之前排除它们。如果您想更进一步，您可以开始回收框，而不是在用户滚动页面时显示和隐藏它们。

这样，无论您有多少个框（高于视口中可以容纳的数量），您都将始终获得相同的性能。

这种技术称为 UI 虚拟化。有几个项目使用它，例如：http: [//github.com/mleibman/SlickGrid/wiki](http://github.com/mleibman/SlickGrid/wiki)。当您需要渲染大量元素（数百、数千、数百万）时，它非常有用。但要做到这一点需要相当多的工作。而且我不知道任何易于插入的通用工作组件。我试图找到一篇解释它的文章。这是我现在唯一能想到的，但它适用于 Silverlight：[http ://www.silverlightshow.net/items/Virtualization-in-Silverlight-4-RC.aspx](http://www.silverlightshow.net/items/Virtualization-in-Silverlight-4-RC.aspx)

也可以试试这个 jQuery 插件。使用常规的“动画”方法，它会尽可能使用（硬件加速的）CSS动画：http: [//playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:06:02.623

看一下：

[jQuery同位素](http://isotope.metafizzy.co/)

它具有允许您使用 css3 动画（如果可用）或使用 jQuery / JS 动画的选项。

对于像动画和安排这样的网格很方便。

一些勇敢的灵魂也设法在同位素中添加了拖放功能。[http://tyler-designs.com/masonry-ui/](http://tyler-designs.com/masonry-ui/)（有点笨拙但有效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T02:58:49.950

老实说，我不知道有什么库可以让你更有效地完成这项工作，尽管有很多库比 jQuery 更快。问题不仅在于 jQuery，还在于您有 50 个元素都可以移动/可拖动，因此需要大量浏览器资源。

如果您可以发布您的代码，我们可能会建议您稍微加快速度。

我能想到的两个最大的问题是，如果您以编程方式添加这些框并在将元素添加到页面时为每个框添加处理程序，以及您是否不将选择器存储在变量中。除此之外，我还必须查看代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T03:15:24.093

您有几个选项可以优化性能。

1.  较新`requestAnimationFrame`的浏览器允许浏览器处理动画时间以优化 Javascript 动画。而不是使用时间来执行动画，这是 jQuery 框架使用的，你反复回调 requestAnimationFrame。浏览器将使用动画的进度变量调用您的函数，然后您根据进度变量渲染动画的当前阶段。[用于智能动画的 requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)对此进行了深入讨论。Google Closure 是我所知道的唯一使用 requestAnimationFrame 的框架，而且它相当重量级。
2.  CSS 动画。jQuery 提供 CSS 动画，许多其他框架也是如此。CSS 动画为您提供硬件加速，因此动画速度要快得多。不幸的是，CSS 动画相对较新，还没有得到很好的支持，因此您可能最终会在旧浏览器上退回到 Javascript 动画，具体取决于您使用的库。
3.  优化您的 Javascript。不是为网格中的每个框都设置动画，而是将每一行封装在一个 div 中并为整个 div 设置动画。这应该会加快动画速度。我敢肯定，您还可以根据当前的实现进行优化。

# c++ - 为什么 GetSystemMetrics() 返回这些值？

> ID：11706269
> 
> 赞同：9
> 
> 时间：2012-07-29T02:50:50.783
> 
> 标签：c++, windows, winapi

我在创建设定大小的客户区时遇到了一些问题。AdjustWindowRect() 无法正常工作，所以我决定尝试手动计算窗口的宽度和高度。

那也不起作用，我想知道为什么，所以我检查了我用来考虑边界等的值。

```
#include <iostream>
#include <Windows.h>

int main(void)
{
    std::cout << "GetSystemMetrics(SM_CYEDGE) = " << GetSystemMetrics(SM_CYEDGE) << std::endl;
    std::cout << "GetSystemMetrics(SM_CXEDGE) = " << GetSystemMetrics(SM_CXEDGE) << std::endl;
    std::cout << "GetSystemMetrics(SM_CYBORDER) = " << GetSystemMetrics(SM_CYBORDER) << std::endl;
    std::cout << "GetSystemMetrics(SM_CXBORDER) = " << GetSystemMetrics(SM_CXBORDER) << std::endl;
    std::cout << "GetSystemMetrics(SM_CYCAPTION) = " << GetSystemMetrics(SM_CYCAPTION);

    std::cin.get();
} 
```

这给了我：

```
GetSystemMetrics(SM_CYEDGE) = 2
GetSystemMetrics(SM_CXEDGE) = 2
GetSystemMetrics(SM_CYBORDER) = 1
GetSystemMetrics(SM_CXBORDER) = 1
GetSystemMetrics(SM_CYCAPTION) = 22 
```

我很确定我的窗口边框没有那么薄。我究竟做错了什么？

**编辑1：**

最初我的窗口使用 WS_OVERLAPPED 样式。由于 AdjustWindowRect 不允许将该样式与它一起使用，因此我构建了我想要的相同类型的窗口：(WS_BORDER | WS_CAPTION | WS_SYSMENU)。这与我在调用 AdjustWindowRect 和 AdjustWindowRectEx 时使用的样式相同（这个样式为 NULL 作为扩展样式，因为我不使用任何样式）。这给了我正确的宽度，但高度缺少几个像素。

```
RECT rect = { 0, 0, 800, 600};

AdjustWindowRectEx( &rect, (WS_BORDER | WS_CAPTION | WS_SYSMENU), FALSE, NULL);

CreateWindowEx( ..., rect.right - rect.left, rect.bottom - rect.top, ...); 
```

这给了我 800 像素宽的客户区，但只有 582 像素高。

**编辑2：**

好奇，我使用了 GetClientRect(); 它告诉我宽度是 800，高度是 600。它为什么不能正常显示？

* * *

似乎当我画了整个窗户时，一切都被衡量了。原因？我不知道。

也许其他人可以对此有所了解。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-29T06:54:33.023

第一个问题是您使用了错误的指标。您需要使用 SM_CXSIZEFRAME 来获取可调整大小边框的宽度。

第二个问题是 Windows 不会给你正确的值。Aero 上窗口的粗边框是一个严重的 appcompat 问题。Windows 故意谎报窗口矩形和边框大小。为了让旧程序仍能正常工作，它们需要在 CreateWindow() 调用中指定窗口的大小。但这就是框架的大小，包括边框。没有谎言，窗口最终会导致客户区域太小。

要关闭谎言，您必须告诉 Windows 您*知道*Aero 行为并且不需要被欺骗。项目+属性、链接器、命令行、附加选项框并添加：

```
/SUBSYSTEM:CONSOLE,6.0 
```

版本 6.0 是 Vista 版本号，是第一个具有 Aero 的 Windows 版本。请注意，当您执行此操作时，您的程序将不再在 XP 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:26:04.233

您是否尝试过 AdjustWindowRectEx() 而不是 AdjustWindowRect() ？只要您传递正确的样式（和扩展样式），我就没有理由知道它不能正常工作。

# string - 线程主 java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：6

> ID：11706274
> 
> 赞同：0
> 
> 时间：2012-07-29T02:51:42.077
> 
> 标签：string, indexing, range, main, out

所以我正在尝试编写一个程序来打印一个所有元音都替换为 $ 的单词。在爪哇。

当我运行它时，我不断收到这个错误`exception in thread main java.lang.StringIndexOutOfBoundsException: String index out of range: 6`，它编译得很好。这是代码。

```
import java.util.*;

public class SummerFour
{
    public static void main(String[] args)
    {
        Scanner keyboard = new Scanner(System.in);

        int cnt = 0;
        String word;
        String output = "";
        char letter = 'x';
        System.out.print("enter word to test: ");
        word = keyboard.nextLine();

        do {

            cnt++;
            letter = word.charAt(cnt - 1);

            if (letter == 'a' || letter == 'i' || letter == 'e' || letter == 'u' || letter == 'o')
            {
                letter = '$';
            }
        }
        while (cnt <= word.length());

        System.out.println(word);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:13:45.213

您的 do...while 循环有一个错误。您检查是否`cnt`小于或等于字符串的大小，然后将其递增 1 并将该值 - 1 用作`String.charAt()`. 这是有问题的，因为字符串是从 0 开始索引的，所以在字符串的末尾，你总是会走得太远。

想想这个例子：

`tacos`

这是一个五个字母的单词。当 时`cnt = 5`，您将再次返回循环一次（因为 5 小于或等于 5）并递增`cnt`到 6。然后您`String.charAt()`使用 5 (6 -1) 的值调用，但 的范围`tacos`仅为 0 -4 (0 = t, 1 = a, 2 = c, 3 = o, 4 = s)，因此 5 超出范围。您可以通过执行以下操作使您的 do...while 循环正常工作并且看起来不那么混乱：

```
 do
    {
        letter = word.charAt(cnt);

        if (letter=='a'||letter=='i'||letter=='e'||letter=='u'||letter=='o')
        {
            letter='$';
        }
        cnt++;
    } while(cnt<word.length()); 
```

当然，代码仍然没有按照您的意愿执行，但是您不再收到原始错误。由于这看起来可能是家庭作业，我会让你继续完成它。

# ios - 在 iOS 中从 ABRecordID 加载 ABRecordRef

> ID：11706275
> 
> 赞同：8
> 
> 时间：2012-07-29T02:52:27.413
> 
> 标签：ios, abrecord, abrecordref

我将一个数组`ABRecordID`（实际上包含在 NSNumber 中）存储到`NSUserDefaults`. 到目前为止一切顺利，但现在我需要将它们加载到`ABRecordRef`并且找不到要使用的功能。

我只是在寻找从 ABRecordID 创建 ABRecordRef 的函数，仅此而已。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-29T04:03:50.670

找到了！

```
ABAddressBookGetPersonWithRecordID(ABAddressBookRef addressBook, ABRecordID recordID); 
```

# ruby-on-rails - 行动邮件 SMTP 谷歌应用

> ID：11706277
> 
> 赞同：7
> 
> 时间：2012-07-29T02:53:20.323
> 
> 标签：ruby-on-rails, ruby, actionmailer, gitlab

我尝试将 actionmailer 配置为使用 smtp 通过谷歌应用程序发送。

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:domain               => "mydomain.com",
:user_name            => "username",
:password             => "password",
:authentication       => 'plain',
:enable_starttls_auto => true  }

config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true 
```

但是，每当 gitlab 尝试发送电子邮件时：

```
Sent mail to user@my.domain.com (10ms)
Completed 500 Internal Server Error in 29ms

535-5.7.1 Username and Password not accepted 
```

服务器运行 ruby​​ 1.9.3p194。为什么谷歌应用程序不接受用户名/密码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T03:19:02.157

现在可以了，我认为问题出在用户名上。它需要用户名中的域。即问题是

```
user_name: 'username' 
```

而正确的方法（至少对于谷歌应用程序）是

```
user_name : 'username@mydomain.com' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T07:02:01.147

这对我有用：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:domain               => "gmail.com",
:user_name            => "you@gmail.com",
:password             => "password",
:authentication       => 'plain',
:enable_starttls_auto => true  } 
```

尝试将域设置为 gmail.com

# node.js - nodejs视图猜测多个扩展

> ID：11706281
> 
> 赞同：1
> 
> 时间：2012-07-29T02:53:39.933
> 
> 标签：node.js, express, pug, ejs

我将 Jade 设置为我的主要视图引擎，但在 ejs 中也有一些页面

我怎样才能使它在我调用`res.render('view')`它时既能猜也能猜`view.jade`（`view.ejs`并使用适当的引擎）？

现在，当我指定 EJS 页面时出现错误

```
failed to located view "viewname", tried:
/views/viewname.jade
/views/viewname/index.jade
/views/../viewname/index.jade 
```

节点的哪一部分定义了尝试的视图？连接/快递？视图引擎本身？我可以用 app.register 或类似的东西做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:24:45.620

据我所知，我无法为视图做出快速尝试的替代扩展。但那又怎样？如果你知道 "view" 真的是 "view.ejs" 的意思，只要写`res.render('view.ejs')`和表达就会很乐意遵从你的意愿。作为开发人员，您应该知道您的视图是为什么模板引擎编写的。如果您所在的团队非常分散，以至于前端开发人员和后端开发人员之间的交流不够充分，以至于彼此都不知道对方正在使用什么来编写模板，那么您正在处理一个组织问题，不是编程问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T18:42:24.710

我不确定如何指定要使用的引擎，但可以让您的 Node Express 服务器从多个扩展中进行选择（根据您告诉它的内容）。

[将扩展和其他选项传递给`express.static`](http://expressjs.com/en/guide/using-middleware.html#middleware.built-in)

**一个简单的 Express 服务器示例：**

```
var express = require('express'),
    port = 3000,
    app = express()
;

app.use('/views/', express.static('views', {extensions: ['jade', 'ejs']}));

app.listen(port, function(error) {
    if (error) {
        console.error(error);
    } else {
        console.info('==>   Listening on port %s. Open up http://localhost:%s/ in your browser.', port, port);
    };
}); 
```

# asp.net - 如何在表单中将标签绑定到谷歌地图？

> ID：11706282
> 
> 赞同：0
> 
> 时间：2012-07-29T02:53:45.223
> 
> 标签：asp.net, vb.net

```
Protected Sub FormView1_DataBinding(ByVal sender As Object, ByVal e As System.EventArgs) Handles FormView1.DataBinding

    Dim streetAddres As String = Nothing
    Dim EventLabel As Label = FindControl("Event_locationLabel")
    Dim findMap As GMap = FindControl("GMap1")

    Dim GeoCode As GeoCode = Nothing
    ' Get user typed text from text box
    streetAddres = EventLabel.Text
    ' pass your city name in the geo code request it return geo code
    GeoCode = findMap.getGeoCodeRequest(streetAddres)
    ' Add the geocode in
    Dim gLatLng As New GLatLng(GeoCode.Placemark.coordinates.lat, GeoCode.Placemark.coordinates.lng)
    ' Set center of map based on latitude and longitude coordinates
    findMap.setCenter(gLatLng, 16, GMapType.GTypes.Physical)
    Dim oMarker As New GMarker(gLatLng)
    ' Bind that marker data in google map
    findMap.addGMarker(oMarker)

End Sub 
```

**错误：**

`Object reference not set to an instance of an object.`

已调试：停止在行：`streetAddres = EventLabel.Text`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:02:59.323

问题是这`Event_locationLabel`不是一个有效的控件 ID。您将需要检查该页面以查看它应该被称为什么。

如果由于某种原因阻止了对页面源的访问，您可以打开 Internet Explorer 并按 F12 访问开发者工具。这些对于识别（和调整）页面中的元素非常方便。

# iphone - 如何发送 UIButton 的拖动事件

> ID：11706284
> 
> 赞同：1
> 
> 时间：2012-07-29T02:55:07.817
> 
> 标签：iphone, events, uibutton, touch, uiresponder

* * *

我有一个 UIButton，它的 superView 有触摸事件。当按钮开始拖动时，我想通过按钮并继续使用它的 superView 的 touchesMoved 功能，这就是我的问题。

我尝试自定义按钮，并使用如下所示的触摸事件；

```
@implementation MyButton

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.nextResponder touchesMoved:touches withEvent:event]; 
}

@end 
```

但它不起作用，触摸没有转到它的 superView 的 touchesMoved 功能.. 任何人都可以帮助我吗？

# c++ - 将 char * 转换为 wchar_t *

> ID：11706286
> 
> 赞同：0
> 
> 时间：2012-07-29T02:55:27.370
> 
> 标签：c++, wchar-t

我有一个用**gbk**编码的 file.txt ，我读取了一些字节`ifstream::read`并将它们存储到`char`缓冲区中，然后我想将缓冲区中的每个单词打印在`gbk`.

我认为`wchar_t`这里需要，所以我这样做：

```
int main()
{
    ifstream ifs("./file.txt");
    char buf[256];
    ifs.read(buf, 255);

    wchar_t wbuf[256];
    mbstowcs( wbuf, buf, 255);
    for (int i = 0; i < wcslen(wbuf); i++)
        wprintf(L"%c ", wbuf[i]);

} 
```

我做对了吗？或者有什么更好的想法来完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:06:50.673

您是否尝试过使用宽字符专业化？（`ifstream`和分别是over和`wifstream`的模板特化。）`basic_ifstream``char``wchar_t`

```
wifstream wifs("./file.txt");
wifs.imbue(locale("zh_CN.GBK"));
wchar_t wbuf[256];
wifs.read(buf, 255); 
```

# python - 修复第一个元素，打乱列表/数组的其余部分

> ID：11706287
> 
> 赞同：6
> 
> 时间：2012-07-29T02:56:15.233
> 
> 标签：python, shuffle

是否可以只洗牌给定列表（或numpy中的数组）的（连续）部分？

如果这通常是不可能的，那么第一个元素是固定的而列表/数组的其余部分需要改组的特殊情况呢？例如，我有一个列表/数组：

```
to_be_shuffled = [None, 'a', 'b', 'c', 'd', ...] 
```

第一个元素应始终保留的位置，而其余元素将被反复洗牌。

一种可能的方法是先打乱整个列表，然后检查第一个元素，如果它不是特殊的固定元素（例如`None`），则将其位置与特殊元素的位置交换（然后需要查找）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T03:03:24.990

为什么不只是

```
import random
rest = to_be_shuffled[1:]
random.shuffle(rest)
shuffled_lst = [to_be_shuffled[0]] + rest 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T04:10:24.933

numpy 数组不会在切片时复制数据：

```
numpy.random.shuffle(a[1:]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T04:09:26.987

我认为尝试实施比您所要求的更通用的方法会很有趣且具有教育意义。在这里，我将*索引打乱*到原始列表（而不是列表本身），不包括锁定的索引，并使用该索引列表从原始列表中挑选元素。这不是就地解决方案，而是作为生成器实现的，因此您可以懒惰地选择元素。

如果可以改进，请随时编辑。

```
import random

def partial_shuf(input_list, fixed_indices):
    """Given an input_list, yield elements from that list in random order
    except where elements indices are in fixed_indices."""
    fixed_indices = sorted(set(i for i in fixed_indices if i < len(input_list)))
    i = 0
    for fixed in fixed_indices:
        aslice = range(i, fixed)
        i = 1 + fixed
        random.shuffle(aslice)
        for j in aslice:
            yield input_list[j]
        yield input_list[fixed]
    aslice = range(i, len(input_list))
    random.shuffle(aslice)
    for j in aslice:
        yield input_list[j]

print '\n'.join(' '.join((str(i), str(n))) for i, n in enumerate(partial_shuf(range(4, 36), [0, 4, 9, 17, 25, 40])))

assert sorted(partial_shuf(range(4, 36), [0, 4, 9, 17, 25, 40])) == range(4, 36) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-29T03:43:01.567

我从标准库模块（`random`在 它做到了这一点。享受！`Lib\random.py``start``stop`

```
from random import randint

def shuffle(x, start=0, stop=None):
    if stop is None:
        stop = len(x)

    for i in reversed(range(start + 1, stop)):
        # pick an element in x[start: i+1] with which to exchange x[i]
        j = randint(start, i)
        x[i], x[j] = x[j], x[i] 
```

出于您的目的，使用`1`作为`start`参数调用此函数应该可以解决问题。

# php - 将网站服务嵌入另一个网站的最佳方式

> ID：11706288
> 
> 赞同：4
> 
> 时间：2012-07-29T02:56:37.680
> 
> 标签：php, asp.net, iframe

我正在寻找可以帮助我解决独特问题的信息、方法或代码。我的第一个想法是使用 iframe，但这似乎会造成跨站点共享的可能问题。

我有一个网站 (https://siteB.com)，我想将其“嵌入”到其他网站中。它是用 ASP.net 编写的，使用会话变量、登录安全性、将消息发布到社交媒体（FB、Twitter）等。任何到社交媒体或通过电子邮件的链接，都发回 siteB.com。

客户网站将是 (http(s)://siteA.com)。它们是非营利网站，使用支付网关进行信用卡交易。由于交易的性质（出于税收目的），信用卡费用必须在 siteA.com 上进行管理 - siteB.com 不能收取资金（在这种情况下），它不能是“通过”类型的交易。

所有用户的流程是访问siteA.com，使用嵌入式siteB.com 的服务并使用信用卡到siteA.com 进行交易。siteB.com 是完成工作的地方，但应将付款交给 siteA.com。总体而言，目标是为 siteA.com 上的用户创造无缝体验，他们的卡交易是到 siteA.com。

iframe 的问题：

1.  来自 fb/twitter/email 的超链接，带有指向 iframed siteB.com 上特定页面的查询字符串不起作用（或无法开始工作）
2.  跨域共享会话数据是一个问题

欢迎提出任何建议并非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T03:03:17.020

您可以使用一个对象：

```
<object type="text/html" data="http://siteB.com" style="width:100%; height:100%">
<p>backup content in case it doesn't work</p>
</object> 
```

并相应地调整你的高度和宽度。

或者，您可以使用 jQuery，如下[所示](http://api.jquery.com/load/)：

```
<script>$("#testLoad").load("http://siteB.com/");    
<div id="testLoad"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:13:58.707

尝试使用 curl 嵌入外部站点并将链接更改为绝对链接。像这样的东西：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.your_external_website.com");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);
$result = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+)([\"'>]+)#",'$1http://www.your_external_website.com/$2$3', $result);
echo $result
?> 
```

# c - 如果递归函数需要多个参数，将参数放在结构中是否会带来性能优势

> ID：11706290
> 
> 赞同：3
> 
> 时间：2012-07-29T02:56:43.793
> 
> 标签：c

这在函数式语言中很常见，尤其是 TCO。我只是想知道除了更容易编写和跟踪之外，它是否提供了任何性能优势。如果它们只是普通参数，访问结构中的变量是否和访问它们一样快？这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T02:59:17.070

没有任何好处，因为结构是按值传递的。一个接一个地传递多个参数将从正在运行的程序中获取与分配相同数量的`struct`. 此外，`struct`由于填充，可能会给您带来更糟糕的结果。

即使你传递你`struct`的 by 指针，你仍然需要分配你的一个新实例，`struct`然后再将它传递给下一级调用。从理论上讲，您可以通过重用您在多次调用中分配一次的结构来获得一些好处，但在大多数情况下，这将是一个不值得您费心的微优化（除非您的探查器另有说明）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:03:09.547

甚至递归也涉及许多堆栈操作，这些操作在将参数传递给递归函数时会进一步降低性能，使其更加不规则，给开发人员造成混乱，自担风险

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T11:43:39.920

**缺点：**

如果你有`__fastcall`可用的，那么递归函数可以通过寄存器传递多个参数来提高性能。可用于此的通用寄存器的数量可能因平台而异。所有额外的参数都通过堆栈传递。

堆栈托管参数很有可能在函数一开始就加载到寄存器中以进行计算。因此，每个堆栈传递的参数都需要至少一次内存访问。如果您将所有内容打包到结构中并传递其指针，那么每个成员访问也将生成至少一次对内存的访问。这里没有真正的好处

按值传递多个参数，您可以随意更改它们。使用结构成员，您可以制作临时副本以用于计算（有效地重复传递多个参数），或者编译器会将修改后的值写回结构实例所在的位置。这会产生不必要的开销。

**优点：**

我会将输出类型的参数打包到结构中。这只会减少参数的数量并使函数原型可以想象，因为操作具有特征的实体是人类的天性

# php - 使用 IOS sdk 发送带空格的 2 个单词时 GET 方法不起作用

> ID：11706291
> 
> 赞同：3
> 
> 时间：2012-07-29T02:56:59.973
> 
> 标签：php, ios

这是我的代码，如果我传递一个英文单词，它可以正常工作，但如果我传递多个包含空格或阿拉伯语单词的单词，它就不起作用

```
NSString *url = [NSString stringWithFormat:@"http://localhost:8888/addcomm.php?nickname=%@&comm=%@&pos=%@",nick,comm.text,postid];
    NSData *data =[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
    NSString *res = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

这是我的 php 代码：

```
$n1 = $_GET['nickname'];
$c1 = $_GET['comm'];
$p1 = $_GET['pos'];

$n = urlencode($n1);
$c = urlencode($c1);
$p = urlencode($p1);

echo $n;
echo $c;
echo $p; 
```

请有任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:07:32.660

您的问题不是 PHP 代码，而是您的 Objective C 代码。您应该先对字符串进行编码，然后再将它们传递给 PHP。

请更改字符串

```
 NSData *data =[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:url]]; 
```

字符串：

```
 NSData *data =[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[url stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]]; 
```

这应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:09:07.313

对于阿拉伯语，我必须添加到我的 php 代码中：

```
mysql_query("set character_set_server='utf8'");
mysql_query("set names 'utf8'"); 
```

并更改我的 Xcode 代码：

```
NSASCIIStringEncoding 
```

至

```
NSUTF8StringEncoding 
```

# php - 用php在文本文件中找到匹配的链接

> ID：11706295
> 
> 赞同：1
> 
> 时间：2012-07-29T02:58:44.023
> 
> 标签：php, regex, file-get-contents

我有一个函数来读取文本文件并与目录搜索交叉匹配，以计算描述（文本文件）和文件的目录索引。我使用 leveltensin 函数来提供一些模糊逻辑，因此名称不需要 100% 相同，但我遇到了一个障碍，因为我现在设置了它，我正在修复记忆墙，因为当我取消注释行时在它下面搜索整个 txt 文件并将每个 ling 与目录文件名进行比较。超过 700 个文件每个都被检查了 700 次，我很快就耗尽了内存。我需要一些方法来跳出 while (!feof($file_handle) ) 当它找到一个匹配然后找到一些方法来设置下一次传递的起点到我们停止它的行位置所以它是循环 0-700每一次

```
function GenerateList($titleB, $descB, $thumbB, $dirB, $patternB){
$outputB = "<CATEGORY name=\"$titleB\" desc=\"$descB\" thumb=\"$thumbB\">";
$open_error = 0;

if (is_dir($dirB)){
$myDirectory = opendir($dirB);
// get each entry
while($entryName = readdir($myDirectory)) {
    $dirArray[] = $entryName;
}

// close directory
closedir($myDirectory);

//  count elements in array
$indexCount = count($dirArray);

// sort em
sort($dirArray);
// loop through the array of files and print them all
if (!($text = file_get_contents("Scripts/descriptions.txt"))){$open_error = 1;}
$results = array();
for($index=0; $index < $indexCount; $index++) {
    $ext = explode(".", $dirArray[$index]);
    $parsed_title = preg_replace ($patternB, "", $ext[0]);
    if ((substr("$dirArray[$index]", 0, 1) != ".")&&($ext[1] == "flv")){ // don't list hidden files

//if ($open_error == 0){
//  $file_handle = fopen("Scripts/descriptions.txt", "rb");

//while (!feof($file_handle) ) {
//$line_of_text = fgets($file_handle);
//$parts = explode('|', $line_of_text);
/*
echo "<PRE>";
echo strtolower($parts[0]);
echo "</br>";
echo strtolower($parsed_title);
echo "</br>";
echo "</PRE>";
*/
//if ((wordMatch(strtolower($parts[0]), strtolower($parsed_title), 2)) > 0){
        $outputB .= "<ITEM>";
        $outputB .= "<file_path>/Sources/Power Rangers/$dirB".$dirArray[$index]."</file_path>";
        $outputB .= "<file_width>500</file_width>";
        $outputB .= "<file_height>375</file_height>";
        $outputB .= "<file_title>".$parsed_title."</file_title>";
//      $outputB .= "<file_desc>".$parts[1]."</file_desc>";
        $outputB .= "<file_desc>test</file_desc>";
//      $outputB .= "<file_image>".$match_result[2]."</file_image>";
        $outputB .= "<file_image>$thumbB</file_image>";
//      $outputB .= "<featured_image>".$match_result[3]."</featured_image>";
        $outputB .= "<featured_image>$thumbB</featured_image>";
//      $outputB .= "<featured_or_not>".$parts[4]."</featured_or_not>";
        $outputB .= "<featured_or_not>true</featured_or_not>";
        $outputB .= "</ITEM>";
//};//if ((wordMatch($parts[0], strtolower($word), 2) > 0)
//};//while
//fclose($file_handle);

//};//if ($open_error == 0)
    };//if ((substr("$dirArray[$index]", 0, 1) != ".")&&($ext[1] == "flv"))
};//for($index=0; $index < $indexCount; $index++) 
};//if (file_exists($dirB))
$outputB .= "</CATEGORY>";
return $outputB;
};//function

    function wordMatch($words, $input, $sensitivity){ 
        $shortest = -1; 
        foreach ($words as $word) { 
            $lev = levenshtein($input, $word); 
            if ($lev == 0) { 
                $closest = $word; 
                $shortest = 0; 
                break; 
            } //if
            if ($lev <= $shortest || $shortest < 0) { 
                $closest  = $word; 
                $shortest = $lev; 
            } //if
        } //foreach
        if($shortest <= $sensitivity){ 
            return $closest; 
        } else { 
            return 0; 
        } //if/else
    } // function, http://php.net/manual/en/function.levenshtein.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:24:13.797

您可以计算两个项目之间的[编辑距离，而不是正则表达式。](http://en.wikipedia.org/wiki/Edit_distance "关于编辑距离的维基百科页面")然后，您的 80% 启发式就相当于说您要匹配的字符串的长度在`(length-edit_distance)/length >= .8`哪里。`length`

因此，如果字符串的长度为 20 个字符，并且与目标的编辑距离为 2，那么您将计算得出，`(20-2) / 20 == .9` 换句话说，该项目与您的目标的匹配率为 90%。这高于 0.8，因此您接受它作为匹配项。

请注意，“编辑距离”也称为[Levenshtein distance](http://php.net/manual/en/function.levenshtein.php "PHP函数参考")，因此您只需执行以下操作：

```
$len = (float) strlen($target);  // Avoids integer division.
$match = ($len-levenshtein($input, $target))/$len;

if ($match >= 0.8) {
  // The $input matches our $target
} 
```

# ruby-on-rails - Rails 3：在 Active Record 中存储会话（不是 cookie）

> ID：11706297
> 
> 赞同：13
> 
> 时间：2012-07-29T02:58:54.587
> 
> 标签：ruby-on-rails, session

*我在谷歌大学搜索了大约一个小时左右，但没有关于这个主题的单一好的文档:-(希望有人能提供帮助。我愿意买一本书，只要有人能告诉我哪一本书。*

我正在使用以下版本：

*   轨道 3.2.6，
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.0]

为了开始在 Active Record 中使用会话存储而不是 cookie，我执行了以下操作：

1.  更新`config/initializers/session_store.rb`。 *评论了第一行并取消了最后一行的评论，所以我有：*

    ```
    # Be sure to restart your server when you modify this file.

    # Myapp::Application.config.session_store :cookie_store, key: '_elegato_session'

    # Use the database for sessions instead of the cookie-based default,
    # which shouldn't be used to store highly confidential information
    # (create the session table with "rails generate session_migration")
    Myapp::Application.config.session_store :active_record_store 
    ```

2.  `rake db:sessions:create`

    ```
    invoke  active_record
      create    db/migrate/20120729025112_add_sessions_table.rb 
    ```

3.  `rake db:migrate`

    ```
    ==  CreateLinkedinUsers: migrating ============================================
    -- create_table(:linkedin_users)
      -> 0.0236s
    ==  CreateLinkedinUsers: migrated (0.0237s) ===================================

    ==  AddSessionsTable: migrating ===============================================
    -- create_table(:sessions)
      -> 0.0012s
    -- add_index(:sessions, :session_id)
      -> 0.0006s
    -- add_index(:sessions, :updated_at)
      -> 0.0006s
    ==  AddSessionsTable: migrated (0.0026s) ====================================== 
    ```

4.  为了找出实际创建的表，我打开 sqlite3 文件

    ```
    sqlite> .schema sessions
    CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "session_id"   varchar(255) NOT NULL, "data" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL);
    CREATE INDEX "index_sessions_on_session_id" ON "sessions" ("session_id");
    CREATE INDEX "index_sessions_on_updated_at" ON "sessions" ("updated_at"); 
    ```

因此，会话表中有一个“数据”字段，它将存储与会话相关的所有内容。

## 现在，关于我的问题:-)

我需要在会话中存储 2 个变量的值：access_token 和 request_token。我可以使用以下吗？（我用来存储 cookie 会话值的方式）

```
session[:access_token] = <blah>
session[:request_token] = <some other blah? 
```

如果它确实有效，ruby 是否将这两个变量作为数组存储在表的“数据”字段中。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T07:43:49.920

您的所有会话变量都在会话表的数据列中使用 Base64 进行序列化。如果您使用 cookie 会话存储分配和检索值，您可以像使用它一样使用它。在数据库中存储会话变量有一些很好的好处，比如只在每个请求期间传输 session_id，而不是从 cookie 传输整个会话，通过检查它们的年龄（created_at/updated_at）来管理陈旧或旧会话的能力，以及存储比 cookie 更多信息的能力。

您也可以提供自己的 Session 类，查看 SessionStore 类中的文档：[https ://github.com/rails/rails/blob/5edfc463484827df364a1e589677d5c84dfac282/activerecord/lib/active_record/session_store.rb](https://github.com/rails/rails/blob/5edfc463484827df364a1e589677d5c84dfac282/activerecord/lib/active_record/session_store.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:09:01.983

您通常不必太在意 Rails 如何存储会话，它是透明的。如果您使用 cookie 存储或 ActiveRecord 存储，您的代码不会更改。

所以是的，你可以做你以前做的事情。从技术上讲，包含会话的序列化字符串存储在`data`字段中，但这并不重要:)

但是我建议使用 cookie 存储，除非您有充分的理由使用 ActiveRecord（会话中的数据超过 4K？）

# continuous-integration - Jenkins RequireJs 构建/CI

> ID：11706299
> 
> 赞同：2
> 
> 时间：2012-07-29T02:59:38.080
> 
> 标签：continuous-integration, jenkins, requirejs, gradle

我刚刚开始了一个使用 RequireJs、Backbone 等的项目。一切都在客户端运行良好，我不想设置我的构建环境。

我正计划使用 Jenkins，但发现有关如何进行此操作的信息为零。我已经设法设置 Gradle 并用它来做一些事情，比如缩小 js 等，但我认为我需要运行 R.js 并且不知道从哪里开始，或者这是否是我应该做的。

我用谷歌搜索了一堆，一无所获。对不起我的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:45:48.747

Jenkins 有一个 Gradle 插件：[Gradle Jenkins Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Gradle+Plugin)

## 安装

该插件非常易于安装和使用。要安装它，只需使用 Jenkins Web 界面。

> 管理 Jenkins -> 管理插件 -> 可用插件 -> 安装

搜索 Gradle，选中该框并单击安装。

## 创建工作

点击新工作。选择自由样式作业并添加 Gradle 构建步骤。

# c++ - 使用 minheap 实现 Huffman 树

> ID：11706300
> 
> 赞同：1
> 
> 时间：2012-07-29T02:59:38.677
> 
> 标签：c++, tree, heap, huffman-code

在我在课堂上使用的书中（以及我从其他几个地方看到的），创建霍夫曼树的算法似乎源于

(1) 根据正在读入的任何文件或字符串中每个字符的频率构建一个 minheap。

(2) 从 minheap 中弹出 2 个最小值并将它们的权重组合到一个新节点中。

(3) 将新节点重新插入到同一个 minheap 中。

我对第 3 步感到困惑。我见过的大多数霍夫曼树的属性更类似于最大堆而不是最小堆（尽管它们不是完整的树）。也就是说，根包含最大权重（或者更确切地说是权重组合），而它所有的孩子的权重都较小。当组合节点放回 minheap 时，此实现如何给出霍夫曼树？我已经为此苦苦挣扎了一段时间。

这里已经发布了一个类似的问题（和我同一本书）：[我不明白这个霍夫曼算法实现](https://stackoverflow.com/questions/3269529/i-dont-understand-this-huffman-algorithm-implementation)

如果您想查看 (3) 中描述的确切功能。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:36:06.780

霍夫曼树通常*不是*完全二叉树，因此也不是最小堆。

霍夫曼算法很容易理解为构建树的频率列表。首先构建小分支，最终将全部合并为一棵树。每个列表项以一个符号开始，后来可能是一个符号或已构建的子树。每个列表项总是有一个频率（通常是整数）。

从列表中取出两个最小的频率（关系无关紧要 - 任何选择都会产生最佳代码，尽管可能有不止一个最佳代码）。从这两个构造一个单级二叉树，其中两个叶子是这些频率的符号。添加频率以生成表示树的新频率。将该频率放回列表中。现在列表中的频率减少了一个。

重复。现在，在每一步构建的二叉树可能在每个分支上都有符号叶子，或者一个叶子和一个先前构建的树，或者两棵树（最早在第三步中）。

继续前进，直到列表中只剩下一个频率。这将是所有原始频率的总和。该频率具有与之关联的完整霍夫曼树。

现在您可以（任意）为每个二进制分支分配 0 和 1。您可以通过从根遍历树到符号来构建代码或解码代码。该遍历的分支中的位按该符号的霍夫曼码的顺序排列。

# c++ - 建立一个形状类 Square

> ID：11706301
> 
> 赞同：1
> 
> 时间：2012-07-29T02:59:48.140
> 
> 标签：c++, shapes

我有一个任务，我觉得非常困难。任何帮助，将不胜感激。

通过创建 Shape 类 Circle、Square 和 Triangle 来构建层次结构。对于这些派生类，创建默认构造函数和构造函数，其参数可以使用正确数量的 Point 对象适当地初始化形状（即，Circle 需要一个 Point 中心和一个半径；Square 需要四个 Point 顶点，而 Triangle 需要三个 Point 顶点）。

在 main() 中，分别创建一个实例：半径为 23 的圆形、边长为 25 的正方形和边长为 10、20、30 的三角形。定义所有这些实例，使原点 (0,0 ) 在每个对象内的某处。显示来自每个对象的信息。

当我进入 main() Square s(25, Point(0,0));

```
class Square : public Shape
{
  double sides;
  Point cp;

  public:
  Square() : sides(0) {}
  Square(double side, const Point &center) : sides(side), cp(center){}

  void bbox()
  {
     Point bottomright = cp + Point(sides/2, -sides/2);
     Point topleft = cp + Point(-sides/2, sides/2);
     Point topright = cp + Point(sides/2, sides/2);
     Point bottomleft = cp + Point(-sides/2, -sides/2);

     std::cout << "Square::bounding " << bottomright  << topleft << topright << bottomleft;
  }

  double area() {std::cout << "Square::area "; return (sides * sides);}
  double circumference() {std::cout << "Square::perimeter "; return sides + sides + sides + sides;}

}; 
```

类打印出来

```
Square::area 625
Square::perimeter 100
Square::bounding (12.5,-12.5)(-12.5,12.5)(12.5,12.5)(-12.5,-12.5) 
```

我想知道根据作业的要求，这看起来是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:02:11.447

不，不是，从要求看来，您需要`Square`构造函数将 4 个点作为参数：

```
Square(const Point& pt1,const Point& pt2,const Point& pt3,const Point& pt4) 
```

> Square 需要四个 Point 顶点

正确的？

# php - 使用 php 循环链接和分类的简单文本列表

> ID：11706307
> 
> 赞同：1
> 
> 时间：2012-07-29T03:00:56.723
> 
> 标签：php, explode

我想将文本和逗号分隔的文本转换为链接和类，例如：

```
facebook.com,facebook
twitter.com,twitter
youtube.com,youtube 
```

逗号之前的文本将是链接，逗号之后的文本将是链接类属性，例如

```
$link = text before comma
$class= text after comma
<a href="$link" class="$class">$class</a> 
```

并使用循环获取所有列表。请不要放一半代码，把我当作初学者并帮助我，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:24:24.400

好像您正在尝试从数据库中提取。我会在这里冒昧地说你只是在使用基本`mysql_*`功能。

```
$sql = "SELECT columnName from `tableName`";
$res = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_assoc($res);

foreach(explode(PHP_EOL, $row['columnName']) AS $line){
    // PHP_EOL is a line ending for that system, if you are positive that the column
    // is separated by \n, or \r\n then replace that instead of PHP_EOL
    list($link, $lcass) = explode(',', $line);

    echo '<a href="'.$link.'" class="'.$class.'">'.$class.'</a><br />';
} 
```

我认为 $lcas 将是 $class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:07:30.187

像这样做：

```
$file = fopen('csv_file.csv', 'r');
$data = array();
while (($line = fgetcsv($file)) !== FALSE) {
   $data[] = array('link' => $line[0], 'class' => $line[1]);
}
fclose($file);

foreach ($data as $line) {
   $link = $line['link'];
   $class= $line['class'];
   echo "<a href='$link' class='$class'>$class</a>
} 
```

# fortran - 在数组中查找 NA

> ID：11706311
> 
> 赞同：0
> 
> 时间：2012-07-29T03:02:32.780
> 
> 标签：fortran, na

说，一旦在数组中找到 NA，我希望例程停止。我怎样才能做到这一点？

“if (array(i) .eq. NA) ...” 似乎行不通。谢谢，

更新：

array 是浮点数数组，例如，

真实 :: 艾莉亚 (35)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T06:07:45.280

如果您真的在寻找`NaN`s 并且您拥有最新的编译器，那么该`ieee_is_nan()`函数应该可以解决问题。我认为您需要`use ieee_arithmetic`或其他固有 IEEE 模块之一。

如果您的编译器不是那么新，它可能具有通常实现但非标准的`isnan()`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:41:51.983

你的问题没有很好的约束。是`array`字符串数组吗？例如

```
character(len=20) :: array(40) 
```

如果是这种情况，您应该可以这样做：

```
do i=1,40
   if(array(i).eq."NA")then
       exit
   else
       !do something else
   endif
enddo 
```

如果这是一个浮点数数组（并且 NA 被定义为某个浮点常数），您可能需要小心，因为浮点运算很少是精确的，并且舍入误差会导致计算在数学上等同于实际评估不同的值。换句话说，这个问题的解决方案实际上取决于如何声明`NA`和`array`声明......

# c# - 对 C# 中的对象引用感到困惑

> ID：11706314
> 
> 赞同：0
> 
> 时间：2012-07-29T03:03:02.573
> 
> 标签：c#, oop

好的，

我有一个敌人矩阵`Enemy enemyGrid[x, y]`

然后，在我的代码中，我通过调用获得一个敌人的实例`Enemy tmp = enemyGrid[a, b]`

但是，如果我更改 tmp 中的一个属性，下次我将矩阵中的对象加载到同一个对象 tmp 中时，它不会反映出来。

每次完成 tmp 后，我都需要`= null`将更改反映到网格中的对象中？

这是为什么？我认为 tmp 只会保存对对象的引用，并且会直接在主对象中进行更改。

谢谢。

代码更新：

填充网格：

```
Enemy [,] spriteGrid = new Enemy[countCols, countRows];
spriteGrid[x, y] = new Enemy(); 
```

访问对象并更改属性：

```
Enemy tmp = spriteGrid[i, j];

tmp.canShoot = true;
tmp.Update(gameTime, game.Window.ClientBounds);
tmp.canShoot = false; 
```

最后一行 (canShoot = false) 不会反映到存储在网格中的对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:05:47.720

线

```
Enemy tmp = enemyGrid[a, b] 
```

不会在您的矩阵*中*创建对象的副本。它为同一个对象实例创建一个别名。对*tmp*的更改确实会影响网格中它们别名的实例。

请发布一个简短、完整的代码片段来演示您遇到的问题。

**更新**

在您的示例中，您设置

```
tmp.canShoot = true; 
```

但是之后

```
tmpEnemy.canShoot = false; 
```

两个不同的变量。

**更新 2**

@Amry 的评论也很准确……如果*Enemy*是*struct*而不是*class*，您会看到这种行为。那是因为*struct*是一个*值类型*，这意味着赋值确实创建了一个副本而不是别名。

除了*非常特殊*的情况，您*永远不*应该使用可变结构（即，在最初创建后其值可以更改的结构）。

# ruby-on-rails - Ruby 教程第 8 章 - 错误

> ID：11706318
> 
> 赞同：0
> 
> 时间：2012-07-29T03:04:08.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railstutorial.org

让三名工程师努力解决这个问题，但没有运气。完成[Ruby on rails 教程 - Michael Hartl，第 8 章](http://ruby.railstutorial.org/chapters/sign-in-sign-out#top)，似乎无法取得进展。如果您是绝地工程师，由于新手经验/知识，请完整填写答案。提前致谢！

**错误**

```
 Failures:

  1) when email format is invalid should be invalid
     Failure/Error: @user.email = invalid_address
     NoMethodError:
       undefined method `email=' for nil:NilClass
     # ./spec/models/user_spec.rb:33:in `block (3 levels) in <top (required)>'
     # ./spec/models/user_spec.rb:32:in `each'
     # ./spec/models/user_spec.rb:32:in `block (2 levels) in <top (required)>'

  2) when email format is valid should be valid
     Failure/Error: @user.email = valid_address
     NoMethodError:
       undefined method `email=' for nil:NilClass
     # ./spec/models/user_spec.rb:43:in `block (3 levels) in <top (required)>'
     # ./spec/models/user_spec.rb:42:in `each'
     # ./spec/models/user_spec.rb:42:in `block (2 levels) in <top (required)>'

  3) when email address is already taken 
     Failure/Error: user_with_same_email = @user.dup
     TypeError:
       can't dup NilClass
     # ./spec/models/user_spec.rb:51:in `dup'
     # ./spec/models/user_spec.rb:51:in `block (2 levels) in <top (required)>'

  4) when password is not present 
     Failure/Error: before { @user.password = @user.password_confirmation = " " }
     NoMethodError:
       undefined method `password_confirmation=' for nil:NilClass
     # ./spec/models/user_spec.rb:60:in `block (2 levels) in <top (required)>'

  5) when password doesn't match confirmation 
     Failure/Error: before { @user.password_confirmation = "mismatch" }
     NoMethodError:
       undefined method `password_confirmation=' for nil:NilClass
     # ./spec/models/user_spec.rb:65:in `block (2 levels) in <top (required)>'

  6) when password confirmation is nil 
     Failure/Error: before { @user.password_confirmation = nil }
     NoMethodError:
       undefined method `password_confirmation=' for nil:NilClass
     # ./spec/models/user_spec.rb:70:in `block (2 levels) in <top (required)>'

  7) with a password that's too short 
     Failure/Error: before { @user.password = @user.password_confirmation = "a" * 5 }
     NoMethodError:
       undefined method `password_confirmation=' for nil:NilClass
     # ./spec/models/user_spec.rb:76:in `block (2 levels) in <top (required)>'

  8) return value of authenticate method with valid password 
     Failure/Error: before { @user.save }
     NoMethodError:
       undefined method `save' for nil:NilClass
     # ./spec/models/user_spec.rb:81:in `block (2 levels) in <top (required)>'

  9) return value of authenticate method with invalid password 
     Failure/Error: before { @user.save }
     NoMethodError:
       undefined method `save' for nil:NilClass
     # ./spec/models/user_spec.rb:81:in `block (2 levels) in <top (required)>'

  10) return value of authenticate method with invalid password 
     Failure/Error: before { @user.save }
     NoMethodError:
       undefined method `save' for nil:NilClass
     # ./spec/models/user_spec.rb:81:in `block (2 levels) in <top (required)>'

  11) Authentication signin page 
     Failure/Error: before { visit signin_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841ca913c8>:0x007f8419313cc0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/authentication_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  12) Authentication signin page 
     Failure/Error: before { visit signin_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841ca913c8>:0x007f841bba0030>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/authentication_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  13) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_11::Nested_1:0x007f8419475898>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  14) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_11::Nested_1:0x007f84195c97f8>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  15) Static pages Home page 
     Failure/Error: before { visit root_path }
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_11::Nested_1:0x007f84196d96e8>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  16) Static pages Help page 
     Failure/Error: before { visit help_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f84196268b8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  17) Static pages Help page 
     Failure/Error: before { visit help_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f841bd4b4e8>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  18) Static pages About page 
     Failure/Error: before { visit about_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f841bbab728>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  19) Static pages About page 
     Failure/Error: before { visit about_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f841a1f8c18>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  20) Static pages Contact page 
     Failure/Error: before { visit contact_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f841b8baf00>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  21) Static pages Contact page 
     Failure/Error: before { visit contact_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841b879528>:0x007f841be450b0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  22) User pages profile page 
     Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841bed35e0>:0x007f841bedc2d0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  23) User pages profile page 
     Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841bed35e0>:0x007f841b8890e0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  24) User pages signup with invalid information should not create a user
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841bed35e0>:0x007f841bfd8940>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/user_pages_spec.rb:17:in `block (3 levels) in <top (required)>'

  25) User pages signup with valid information should create a user
     Failure/Error: before { visit signup_path }
     ActionView::Template::Error:
       undefined local variable or method `root_path' for #<#<Class:0x007f841bed35e0>:0x007f841bd018c0>
     # ./app/views/layouts/_header.html.erb:4:in `_app_views_layouts__header_html_erb___3328719763930508541_70102689576460'
     # ./app/views/layouts/application.html.erb:11:in `_app_views_layouts_application_html_erb___3500649280077332684_70102687772720'
     # ./spec/requests/user_pages_spec.rb:17:in `block (3 levels) in <top (required)>'

Finished in 0.60263 seconds
33 examples, 25 failures 
```

**user_spec.rb**

```
 require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com", 
                     password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }

  it { should respond_to(:authenticate) }

  it { should be_valid }

  describe "when name is too long" do
      before { @user.name = "a" * 51 }
      it { should_not be_valid }
    end
  end

  describe "when email format is invalid" do
      it "should be invalid" do
        addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                       foo@bar_baz.com foo@bar+baz.com]
        addresses.each do |invalid_address|
          @user.email = invalid_address
          @user.should_not be_valid
        end      
      end
    end

    describe "when email format is valid" do
      it "should be valid" do
        addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
        addresses.each do |valid_address|
          @user.email = valid_address
          @user.should be_valid
        end      
      end
    end

  describe "when email address is already taken" do
      before do
        user_with_same_email = @user.dup
        user_with_same_email.email = @user.email.upcase
        user_with_same_email.save
      end

      it { should_not be_valid }
    end

  describe "when password is not present" do
      before { @user.password = @user.password_confirmation = " " }
      it { should_not be_valid }
    end

    describe "when password doesn't match confirmation" do
      before { @user.password_confirmation = "mismatch" }
      it { should_not be_valid }
    end

    describe "when password confirmation is nil" do
      before { @user.password_confirmation = nil }
      it { should_not be_valid }
    end

   describe "with a password that's too short" do
      before { @user.password = @user.password_confirmation = "a" * 5 }
      it { should be_invalid }
    end

    describe "return value of authenticate method" do
      before { @user.save }
      let(:found_user) { User.find_by_email(@user.email) }

      describe "with valid password" do
        it { should == found_user.authenticate(@user.password) }
      end

      describe "with invalid password" do
        let(:user_for_invalid_password) { found_user.authenticate("invalid") }

        it { should_not == user_for_invalid_password }
        specify { user_for_invalid_password.should be_false }
      end
    end 
```

**authentication_pages_spec**

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end
end 
```

**static_pages_spec**

```
require 'spec_helper'

describe "Static pages" do

  subject { page }

  describe "Home page" do
    before { visit root_path }

    it { should have_selector('h1',    text: 'Sample App') }
    it { should have_selector('title', text: full_title('')) }
    it { should_not have_selector 'title', text: '| Home' }
  end

  describe "Help page" do
    before { visit help_path }

    it { should have_selector('h1',    text: 'Help') }
    it { should have_selector('title', text: full_title('Help')) }
  end

  describe "About page" do
    before { visit about_path }

    it { should have_selector('h1',    text: 'About') }
    it { should have_selector('title', text: full_title('About Us')) }
  end

  describe "Contact page" do
    before { visit contact_path }

    it { should have_selector('h1',    text: 'Contact') }
    it { should have_selector('title', text: full_title('Contact')) }
  end
end 
```

**user_pages_spec**

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

describe "with valid information" do
  before do
    fill_in "Name",         with: "Example User"
    fill_in "Email",        with: "user@example.com"
    fill_in "Password",     with: "foobar"
    fill_in "Confirmation", with: "foobar"
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end
end
end
end 
```

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
end

gem 'annotate', '~> 2.4.1.beta', group: :development

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

group :test do
gem 'capybara', '1.1.2'
gem 'factory_girl_rails', '1.4.0'
end

group :production do
gem 'pg', '0.12.2'
end

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

在此先感谢各位:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:08:37.547

看来您忘记准备测试数据库了。在命令行上运行：

```
rake db:test:prepare 
```

我绝对建议您阅读[测试 Rails 应用程序指南（3.1 准备测试应用程序）](http://guides.rubyonrails.org/testing.html#preparing-your-application-for-testing)，以了解在运行测试之前需要发生什么。

# javascript - 链接导致文本在 Opera 中向上移动

> ID：11706319
> 
> 赞同：3
> 
> 时间：2012-07-29T03:04:17.200
> 
> 标签：javascript, html, css, html5boilerplate

这是杯子：[http ://www.franzsarmiento.com/contact_information.jsp](http://www.franzsarmiento.com/contact_information.jsp)

我正在使用 HTML5 Boilerplate，出于某种原因在 Opera 中，当我将鼠标悬停在链接上方时，文本会向上移动。对于这些链接，我没有任何 a:hover CSS。这个问题只发生在 Opera 中，我检查了所有其他浏览器。我在 Opera 11 和 12 上对此进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:03:35.697

它似乎来自`a:hover, a:active { outline: 0 }`css 的第 19 行。该页面在页面加载时具有 3px 的轮廓，然后在悬停时变为 0px。您可以从该规则中删除 a:hover 或将相同的规则添加到锚标记`a { outline: 0 }`，或将其更改为您希望在 :hover 和 :active 上发生的任何行为。

# opencv - craycc 和 OpenCV

> ID：11706320
> 
> 赞同：0
> 
> 时间：2012-07-29T03:04:24.027
> 
> 标签：opencv, mpi, cray

我正在尝试编译一个简单的 hello world 类型程序，该程序在 MPI 初始化时使用 OpenCv 读取图像文件。它适用于 gcc (mpicc)，但我正在尝试使用 craycc，因为我不会进入。当我这样做时，我收到一个错误，即找不到所有库。它似乎在寻找一条奇怪的道路。

谁能猜出这里发生了什么？我的 pkg-config opencv.pc 文件会给出错误的路径吗？typedef 错误是否会触发此错误（当我找到该行并将其注释掉时，警告会因缺少的库而消失）？

我会试着睡在上面，看看会发生什么。感谢您花时间阅读这些人，如果我发现任何东西，我一定会报告回来。

```
@hector-xe6-7:~/work/disparity> cc `pkg-config --cflags --libs opencv` hello.c -o hello

CC-301 craycc: WARNING File = /home/d34/d34/s1138832/work/OpenCV-2.3/include/opencv2/core/types_c.h, Line = 159
  The indicated "typedef" name has already been declared (with same type).

  typedef unsigned short ushort;
                         ^

Total warnings detected in hello.c: 1
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_core
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_imgproc
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_highgui
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_ml
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_video
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_features2d
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_calib3d
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_objdetect
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_contrib
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_legacy
/opt/cray/cce/8.0.4/cray-binutils/x86_64-unknown-linux-gnu/bin/ld: cannot find -lopencv_flann 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:01:59.993

通过在编译时添加 -dynamic 标志解决了这个问题。

# ios - 如果我下载 4.4，我在 xcode 4.3 中的项目会受到影响吗？

> ID：11706321
> 
> 赞同：1
> 
> 时间：2012-07-29T03:04:36.987
> 
> 标签：ios, xcode

我从来没有时间更新我的 xcode 版本。我目前的项目还能正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:13:59.913

**他们仍然会正常工作。**较新版本的 XCode 在处理旧项目时没有问题。

# boolean - 这是这个布尔表达式的简化版本吗？还是这个审稿人错了

> ID：11706322
> 
> 赞同：2
> 
> 时间：2012-07-29T03:04:49.353
> 
> 标签：boolean, boolean-logic, boolean-expression, boolean-operations

因为我试过做真值表不幸的是一个有3个文字，另一个有4个所以我很困惑。

```
F = (A+B+C)(A+B+D')+B'C; 
```

这是简化版

```
F = A + B + C 
```

[http://www.belley.org/etc141/Boolean%20Sinplification%20Exercises/Boolean%20Simplification%20Exercise%20Questions.pdf](http://www.belley.org/etc141/Boolean%20Sinplification%20Exercises/Boolean%20Simplification%20Exercise%20Questions.pdf)

因为我认为这个审稿人有问题..还是准确的？顺便说一句，简化与从最小项总和到产品总和的最小化不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:18:08.207

是的，它是一样的。

画出这两个表达式的真值表，假设两者都有四个输入变量。的值`D`不会进入第二个真值表：单元格中的`D=1`值将匹配单元格中的值`D=0`。换句话说，您可以将第二个表达式视为

```
F = A +B + C + (0)(D) 
```

您将看到两个表都匹配：子表达式在;`(A+B+C)(A+B+D')`中有零。仅在 处为零。在第一个子表达式中添加补丁零，因此结果是等效的。`ABCD= {0000, 0001, 0011}``(A+B+C)``{0000, 0001}``B'C``0011`

# java - 为什么不能在 set 方法中递增然后通过 ++ 传递值

> ID：11706330
> 
> 赞同：4
> 
> 时间：2012-07-29T03:06:36.423
> 
> 标签：java, operators, int, setter, operation

我有一行像这样工作的代码，

```
mrq.setId((mrq.getId()+1)); 
```

但是，当我试图这样写时，

```
mrq.setId((mrq.getId()++)); 
```

它不起作用，错误是，`Invalid argument ot the operation ++/--`

其背后的技术原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T03:16:47.863

增量运算符需要一个字段或变量。评估`getId()`不会产生 id 字段；它返回值`getId()`返回的副本（“副本”是指原始类型的文字副本和引用类型的新引用）。 `getId()`可能在`return id;`内部实现，但您不会取回 field `id`，而只会取回其值的副本。

最接近的等价物是`int i = getId(); setId( getId() + 1 ); return i;`，但是您要求很多允许`getId()++`作为此类表达式的语法糖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T03:12:00.260

`x++`本质上等同于`x = x + 1`，这在您的情况下没有意义：

```
mrq.getId() = mrq.getId() + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:52:49.703

`++`运算符用于将变量的值增加 1。因此`a++`被视为`a=a+1`。这意味着使用它的操作数将是完成赋值的地方。

当您编写`mrq.getId()++`它时，它不会为您提供一个可以递增的操作数变量，因此这不起作用。

# iphone - 滚动视图编辑 - 我可以在视图控制器之外编辑它吗？

> ID：11706331
> 
> 赞同：0
> 
> 时间：2012-07-29T03:07:13.117
> 
> 标签：iphone, ios5, view, scroll

我是这里的新手，

在 XCode 4 的故事板上编辑滚动视图内容时，您必须来回拖动以“查看”并在 iphone 屏幕大小的视图控制器中编辑内容。

有没有办法在外面直接编辑滚动视图内容，这样我就不用不断地来回小心地移动了？现在让我发疯：）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:41:39.667

You can also drag the scroll view content (which should be a single UIView or its subclass) out of the scroll view by selecting in the view hierarchy tree on the left of the storyboard editor (should be the only view that is a subview of the scroll view) and dragging it to, say, the top of the list to be on the same level (leftmost) as the root view (which should be the topmost item in that hierarchy). Then, you can select your content view. It should appear in the storyboard. When you are done editing it, drag it back below the scroll view in the view hierarchy list (it becomes the scroll view's content view at that point).

# image - 如何使用 VBA 将图像从文件插入到多个工作表

> ID：11706341
> 
> 赞同：2
> 
> 时间：2012-07-29T03:09:22.420
> 
> 标签：image, excel, vba, worksheet

我有一本有 54 张纸的工作簿。“大师”总计”和“第 1 周”到“第 52 周”

我正在尝试将文件中的图像插入到工作表“Week1”到“Week52”的单元格中。

我尝试了许多代码，并且能够正确放置图像并调整其大小

下面的代码都放置了图像，我能够操纵它们以将图像放置在正确的位置和正确的大小。

但是我不能让它们穿过其他床单（第 1 周到第 52 周）

```
Set oPic = Application.ActiveSheet.Shapes.AddPicture("C:\Users\Public\Documents\Cranes\MinerPic.wmf", False, True, 1, 1, 1, 1)
oPic.ScaleHeight 0.3, True
oPic.ScaleWidth 0.3, True
oPic.Top = Range("p2").Top
oPic.Left = Range("p2").Left
.OnAction = "FC4.xlsm!MineSheet" 
```

或者

```
 pPath = "C:\Users\Public\Documents\Cranes\MinerPic.wmf"
 With ActiveSheet.Pictures.Insert(pPath)
 .Left = Range("p2").Left
 .Top = Range("p2").Top
 .ShapeRange.Height = 50
 .ShapeRange.Width = 50
 .OnAction = "FC4.xlsm!MineSheet" 
```

在一个阶段，我能够将 52 张图像放在一起。我怀疑这与 Activesheet 命令有关。

我对 VBA 非常陌生，如果有任何帮助，我将不胜感激。

提前致谢。史蒂夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:37:56.410

像这样包装你的代码

```
For i = 1 To 52
    Set sh = ActiveWorkbook.Worksheets("Week" & i)

    ' Reference the sh object rather than ActiveSheet
    Set oPic = sh.Shapes.AddPicture( ...
    ' or
    With sh.Pictures.Insert(pPath)
    ' rest of your code
Next 
```

# html - css边框折叠不适用

> ID：11706343
> 
> 赞同：1
> 
> 时间：2012-07-29T03:09:28.847
> 
> 标签：html, css, css-specificity

我无法让我的内表不显示边框。

在下面的 html 中，它是 table `<table class="billing_history" id="billing_history0" >`。我希望表格最终只有行的顶部和底部边框，但我无法让它工作。事实上，我似乎无法将很多边框属性应用于表格。特别是，我尝试`border-collapse: collapse;`在 css 中进行设置，但这不适用于内表。但是，如果我在表本身（即`style="border-collapse: collapse;"`）中设置样式标记，它确实有效。因此，由于某种原因，`border-collapse: collapse;`css 中的 没有应用于内部表，而其他属性（即`font-size: 11px;`）正在应用。

有人有想法么？HTML和CSS如下...

我很感激你们可能有的任何建议！

html:

```
<table id="bill-list">
<thead>
    <tr>
            <th>Service Date</th>
            <th>Time</th>
            <th>Patient Name</th>
            <th>Remarks</th>
            <th>Notes</th>
            <th>Service Description</th>
            <th>COMMENTS</th>
    </tr>
</thead>
<tbody>
            <tr id="bill0" class="no-bills" onclick="showBillDetails(0); setFocusOnFirstInputField(0);">
                    <td class="no-bills">2009-03-03&nbsp;</td>
                    <td class="no-bills">09:45:00&nbsp;</td>
                    <td class="no-bills">bob</td>
                    <td class="no-bills">asdfasdf</td>
                    <td class="no-bills">asdfasdf</td>
                    <td class="no-bills">asdfasdf</td>
                    <td class="no-bills">blahblah</td>

            </tr>
            <tr id="bill">
                <td id="bill_details0" style="display:;" colspan=7> 
                    <span onclick="addBillingItem(0)" style="color:blue;">Add Item</span>           
                    <table>
                        <thead>
                            <tr>
                                <td></td>
                                <td>Billing Code</td>
                                <td>Amount</td>
                                <td>Units</td>
                                <td>Dx Code</td>
                                <td>Dx Description</td>
                                <td>Total</td>
                                <td>SLI Code</td>
                            </tr>
                        <thead>
                        <tbody id="billing_items0">
                                <tr id="billing_item0_0">
                                    <td onclick="deleteBillingItem(0, 0)" style="color:blue;">X</td>
                                    <td> <input type="text" size="6" name="bill_code0[]" onkeydown="if (isMoveBetweenBills(event)) {    moveBetweenBills(event, 0); }" /> </td>
                                    <td> <input type="text" size="6" name="amount0[]" onkeydown="if (isMoveBetweenBills(event)) {   moveBetweenBills(event, 0); }" /> </td>

                                    <td> <input type="text" size="3" name="units0[]" onkeydown="if (isMoveBetweenBills(event)) {    moveBetweenBills(event, 0); }" /> </td>
                                    <td> <input type="text" size="6" name="dx_code0[]" onkeydown="if (isMoveBetweenBills(event)) {  moveBetweenBills(event, 0); }" /> </td>
                                    <td> <input type="text" size="12" name="dx_desc0[]" onkeydown="if (isMoveBetweenBills(event)) { moveBetweenBills(event, 0); }" /> </td>
                                    <td> <input type="text" size="6" name="total0[]" onkeydown="if (isTabKey(event) && checkIfLastBillingItem(0, 0)) {  addBillingItem(0); } else if (isEnterKey(event)) {  submitBill(0); } return true;" /> </td>
                                    <td> <input type="text" size="6" name="sli_code0[]" /> </td>

                                </tr>

                        </tbody>
                    </table>
                    <span id="more_details_button0" onclick="showMoreDetails(0, 34601, ); " style="color:blue;">more</span>
                    <table class="more_details">
                        <tr>
                            <td> 
                                <table class="billing_history" id="billing_history0" >
                                <tbody><tr><td>1234</td><td>2012-01-01</td><td>09:00:00</td><td>0.00</td><td>0.00</td><td>n/a</td></tr><tr><td>1234</td><td>0.00</td><td>1</td><td>1</td><td>----</td><td>0.00</td></tr><tr><td>1234</td><td>0.00</td><td>1</td><td>1</td><td>blah blah</td><td>0.00</td></tr></tbody>
                                </table>

                            </td>
                            <td> 
                                <table id="appointment_notes0" >
                                </table>
                            </td>
                        </tr>   
                    </table>
                </td>
            </tr>
</tbody>
</table> 
```

CSS：

```
.search_details
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    margin: 10px;
    width: 60%;
    text-align: left;
    border-collapse: collapse;
}

#bill-list
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    /*margin: 45px;*/
    width: 100%;
    text-align: left;
    border-collapse: collapse;
}
#bill-list th
{
    font-size: 13px;
    font-weight: normal;
    padding: 8px;
    background: #b9c9fe;
    border-top: 4px solid #aabcfe;
    border-bottom: 1px solid #fff;
    color: #039;
}
#bill-list td
{
    padding: 8px;
    background: #e8edff;
    border-bottom: 1px solid #fff;
    color: #669;
    font-weight: normal;
    border-top: 1px solid transparent;
}
#bill-list tr:hover td
{
    background: #d0dafd;
    color: #339;
    font-weight: normal;
}

#bill-list #bill td
{
    background: white;
}

#bill-list .no-bills
{
    background: #e8edff;
    color: red;
    font-weight: bold;

}
#bill-list tr:hover .no-bills
{
    background: #d0dafd;
    color: red;
    font-weight: bold;
}

#bill-list #bill .more_details tr td
{
    background: #e8edff;
    border: none;
}

#bill-list #bill .billing_history tr td
{
    background: red;
    border: none;
    border-top: 10px solid transparent;
    border-bottom: 10px solid #fff;

    font-size: 11px;
    padding: 1px;

    text-decoration:none;
    border-style:none;
    border:none;
    outline:none;
    border-collapse: collapse;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:21:47.347

如何设置边框折叠

```
#bill-list #bill table 
```

根据[mozilla doco ，border-collapse 仅适用于 table，而不适用于 td](https://developer-new.mozilla.org/en-US/docs/CSS/border-collapse)

# haskell - 使用 ghc 7.0.4 在基于 redhat 的 linux 上安装响应式香蕉 wx 或 wx

> ID：11706345
> 
> 赞同：4
> 
> 时间：2012-07-29T03:09:35.820
> 
> 标签：haskell, reactive-programming, frp

嗨，我正在尝试安装，（无需更新或安装最新的编译器），reactive-banana-wx 并且其中一个要求失败

```
cabal install reactive-banana-wx 
```

这是错误

```
Configuring wxc-0.90.0.4...
setup: failed
cabal: Error: some packages failed to install:
reactive-banana-wx-0.6.0.1 depends on wxc-0.90.0.4 which failed to install.
wx-0.90.0.1 depends on wxc-0.90.0.4 which failed to install.
wxc-0.90.0.4 failed during the configure step. The exception was:
ExitFailure 1
wxcore-0.90.0.3 depends on wxc-0.90.0.4 which failed to install 
```

当我尝试 cabal 安装 wxcore、wx 或 wxc 时，他们都说失败并指向需要 wxc。

这是错误

```
cabal install wxc
Resolving dependencies...
[1 of 1] Compiling Main             ( /tmp/wxc-0.90.0.419410/wxc-0.90.0.4/Setup.hs, /tmp/wxc-0.90.0.419410/wxc-0.90.0.4/dist/setup/Main.o )
Linking /tmp/wxc-0.90.0.419410/wxc-0.90.0.4/dist/setup/setup ...
Configuring wxc-0.90.0.4...
setup: failed
cabal: Error: some packages failed to install:
wxc-0.90.0.4 failed during the configure step. The exception was:
ExitFailure 1 
```

如果有用的话，这是我的编译器信息

```
ghc -v
Glasgow Haskell Compiler, Version 7.0.4, for Haskell 98, stage 2 booted by GHC version 7.0.4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:52:19.373

我今晚在 Debian 上尝试使用 ghc 7.4.1 安装 phooey 时遇到了同样的错误。原因是包 wxc-0.90.0.4 中的一个错误，它应该会影响所有基于 wxHaskell 的包。您可以修复它，无需降级您的 wxc 包...

重现它的最简单方法是

```
cabal install wxc 
```

或者

```
cabal install glade 
```

在执行此操作之前，确保所有先决条件均已就绪可能是个好主意。wxc 依赖于许多 cabal 和 Linux 包，所有这些包都应该被安装和编译......我以最愚蠢的方式做到了，只需运行

```
cabal install wxc 
```

并阅读它溢出的错误消息。这个甜心通常会告诉你它想要什么......例如，如果它抱怨 cabal package `x`，只需执行 cabal install `x`。如果它抱怨 Linux 包`y`，那么使用你的 Linux 包管理器并安装这个包的开发版本，它`lib<y>-dev`在 Debian 中通常被调用。因此，例如，如果

```
cabal install wxc 
```

给你一个错误，说缺少包 gtk+2.0，你想做

```
apt-get install libgtk2.0-dev 
```

cairo、glade2 和其他与 GTK 相关的库也是如此

当您满足所有先决条件时，您想安装 wxWidgets-2.9，它目前处于开发阶段......因此，它没有任何适用于 Linux 的二进制文件，您应该自己构建它。从 wxWidgets 网站下载源代码并构建它。这很容易做到，只需：

*   解压/解压源代码到你喜欢的目录
*   运行 ./config
*   运行 ./make

如果您使用的是 wxc-0.90.0.4，此时您应该会遇到我们的小错误... 长话短说，它在文件 eljpen.cpp 中，您可以在

```
~/.cabal/packages/hackage.haskell.org/wxc/0.90.0.4/wxc-0.90.0.4.tar.gz 
```

打开存档，转到文件中的第 159 行并替换 *_ref = NULL; 使用 _ref = NULL 或其他更有意义的东西。然后在其中包含固定的 eljpen.cpp 文件的同一位置重新创建存档。

*   运行 ./make

它现在应该可以工作了。

*   运行 sudo make install （通常，您应该拥有 insatll wxWidgets 库的 root 权限...）。

完成后尝试做

```
cabal install wx 
```

再次。它现在应该可以工作了。我想，在那之后你就可以享受你的 reactive-banana-wx、wxHaskell、phooey 等了。

PS [http://sourceforge.net/tracker/index.php?func=detail&aid=3576397&group_id=73133&atid=536845](http://sourceforge.net/tracker/index.php?func=detail&aid=3576397&group_id=73133&atid=536845)。为什么我没有早点找到？：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:01:09.777

我已经在 Lubuntu 12.10 上解决了这个问题，所以：

sudo 阴谋集团信息 wx

```
Synopsis:      wxHaskell
Versions available: 0.11.1.2, 0.12.1.4, 0.12.1.5, 0.12.1.6, 0.13.2,
                    0.13.2.1, 0.13.2.3, 0.90, 0.90.0.1 (and 11 others) 
```

我挑选了不同版本的 wxHaskell，但只有 0.13.2.3 是对的。

sudo cabal 安装 wx-0.13.2.3

...并且所有内容都已编译和安装。然后我可以安装：

sudo cabal install reactive-banana-wx -fbuildExamples

这不取决于您的 Glasgow Haskell 编译器的版本或您的 Linux 类型。

# c - 如果大于 0，则为数字 1

> ID：11706346
> 
> 赞同：2
> 
> 时间：2012-07-29T03:09:55.880
> 
> 标签：c, math, optimization

我正在尝试优化一些代码，这看起来很简单，但让我很难过。**所以基本上，我试图将一个数字设为 1，如果它大于 0。**问题是我不想使用**任何**比较，因为它们非常昂贵，并且在没有比较的情况下获得解决方案会拯救我40 秒，因为它被调用了很多。所以我想要的只是位操作符，加法、减法、除法和乘法。

额外：这个数字永远只有 1 或 2。

类型是**unsigned int**。

完整算法：

```
 DWORD num = (blockNum / 0xAA) * blockStep[0];

        switch (blockNum / 0xAA)
        {
            case 0:
                return num + hashOffset;

            default:

                num += ((blockNum / 0x70E4) + 1) << (BYTE)packageSex;
                switch (blockNum / 0x70E4)
                {
                    case 0:
                        return num + hashOffset;

                    default:
                        return num + (1 << (BYTE)packageSex) + hashOffset;
                }
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T03:31:23.777

此代码段会产生您想要的效果。我检查了程序集输出（MSVC++ 2010），它是无分支的。

```
n = !!n; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T03:25:43.640

如果保证它只能是1或2，那么这很简单：

1：0001 2：0010

通过对自身应用右移和 OR，两者都被 1 屏蔽，它将始终为 1

假设数字存储在 val 中，然后

```
val = (val | val>>1) & 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T03:26:44.333

```
(num & 1) | ((num & 2) >> 1) 
```

适用于我正在尝试做的事情，即值 1 和 2。它也适用于更多值，但这不是我关心的问题。

# javascript - 从 ASIN 获取亚马逊商品图片和描述

> ID：11706347
> 
> 赞同：11
> 
> 时间：2012-07-29T03:10:07.060
> 
> 标签：javascript, node.js, amazon

我正在做一种购物清单网络应用程序，您可以在其中将商品链接到亚马逊的等价物。

但我想知道如何做到这一点。有API吗？如果是这样，是否有 javascript API？

我想：

a) 使用他们的 ASIN 获取商品图片和描述

b) 获取某个词的搜索结果。

欢迎任何建议/帮助！

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T09:12:35.277

您可以使用[node-apac](https://github.com/dmcquay/node-apac)来做到这一点，它是亚马逊产品广告 API 的 node.js 客户端。但是，要使用 Amazon API，您必须开设一个 Amazon Web Services (AWS) 帐户。跟着这些步骤。

1.  开设一个 AWS 账户。注意：亚马逊会在您注册时要求您提供信用卡，但产品广告 API 是免费的，因此不会向您收费。

2.  登录您的 AWS 账户并转到[安全凭证页面](https://portal.aws.amazon.com/gp/aws/securityCredentials?)以查找您的访问密钥 ID 和秘密访问密钥

3.  注册 Amazon Associates Program 并获取您的 Associate Tag。这将允许您从亚马逊收到您发送给他们的推荐的佣金。

4.  安装 node-apac

    ```
    npm install apac@latest 
    ```

5.  这是完成您的任务 b) 的 Amazon 搜索查询的代码片段。它来自 node-apac 页面，归功于 dmcquay

    ```
    var util = require('util'),
    OperationHelper = require('apac').OperationHelper;

    var opHelper = new OperationHelper({
        awsId:     '[YOUR ACCESS KEY ID HERE]',
        awsSecret: '[YOUR SECRET ACCESS KEY HERE]',
        assocId:   '[YOUR ASSOCIATE TAG HERE]', 
    });

    opHelper.execute('ItemSearch', {
        'SearchIndex': 'Books',
        'Keywords': 'harry potter',
        'ResponseGroup': 'ItemAttributes,Offers'
    }, function(error, results) {
        if (error) { console.log('Error: ' + error + "\n"); }
        console.log("Results:\n" + util.inspect(results) + "\n");
    }); 
    ```

对于获取项目图像和描述的任务 a)，您可以执行以下操作：

```
opHelper.execute('ItemLookup', {
    'ItemId': '[ASIN GOES HERE]',
    'MechantId': 'All',
    'Condition': 'All',
    'ResponseGroup': 'Medium'
}, function(error, results) {
    if (error) { console.log('Error: ' + error + "\n"); }
    console.log("Results:\n" + util.inspect(results) + "\n");
}); 
```

就是这样。检查您需要的字段的“结果”对象。它应该包括产品图片、描述等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:21:16.943

[https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T09:41:46.517

除了 Arik G 对 node-apac api 的评论之外，您还可以使用 AWS 的完整 Node.js 库来访问产品搜索等。[http://aws.amazon.com/code/Product-Advertising-API /4272](http://aws.amazon.com/code/Product-Advertising-API/4272)。

正如 Mental 法官所提到的，附属主页有一个资源列表，其中包含文档和开发人员指南。我发现使用[ScratchPad](http://associates-amazon.s3.amazonaws.com/scratchpad/index.html)对于测试我是否拥有正确的帐户密钥或进行示例查询非常有用。

# api - Google Maps API 搜索位置和 pin

> ID：11706348
> 
> 赞同：2
> 
> 时间：2012-07-29T03:10:09.277
> 
> 标签：api, google-maps

我正在尝试将谷歌地图放在我的浏览器上，但我遇到了 API 问题。我想做的是有一个带有地图的搜索框，用户可以在其中输入地址，它将搜索附近的餐馆并将它们固定在地图上。我尝试的是在谷歌搜索漏洞，它变得更加混乱。我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:48:08.977

不久前我遇到了类似的东西，偶然发现了这个简洁的[jQuery Autocomplete Plugin](http://gerger.co/blog/2011/02/17/google-maps-api-v3-location-search-with-jquery-autocomplete-plugin/)。

它会自动完成您键入的位置并进行搜索，然后将地图聚焦在该位置上。但是，它不会突出显示最近的餐馆/酒吧/等，但如果找到所述位置，您可以轻松放置标记。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:14:40.313

如果您对使用 PHP 感兴趣，[这个库](http://code.google.com/p/php-google-map-api/)将**极大地**帮助您的旅程。它使用 Google Maps API 为我节省了无数时间。

# asp.net-mvc - 如何坚持匿名用户选择（例如：主题选择）

> ID：11706349
> 
> 赞同：1
> 
> 时间：2012-07-29T03:10:33.253
> 
> 标签：asp.net-mvc, cookies

抱歉这个模棱两可的问题，但我走了。

在每个页面上都有一个显示不同主题选项的局部视图。这些主题只是页面中元素颜色的不同 css 类。如何允许任何访问者选择不同的主题，并让它在所有后续请求和会话中持续存在，即使用户未登录也是如此。

我想这必须在客户端完成，我能想到的只是cookie之类的东西。不幸的是，我还没有真正在 ASP.NET 中对它们进行过实验，并且由于它是一个基本概念，所以我想不出 Google 搜索的正确措辞。

如果有人能指出我正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:12:24.000

您可以使用称为**[Profile的概念](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)**

使用配置文件，您可以声明要向用户公开的属性，这适用于匿名用户

基本上，配置文件属性存储在 cookie 中，因此您可以配置它们何时到期以及其他与 cookie 相关的设置

您的**配置文件属性**被编译为**[顶级项目编译的一部分 -](http://msdn.microsoft.com/en-us/library/ms178473.aspx)** ASP.Net 中的 AKA 编译生命周期，因此它们将通过`Profile`类公开为强类型属性

例如：

### Web.config 设置

```
<configuration>
  <system.web>
    <anonymousIdentification enabled="true"/>
    <profile defaultProvider="AspNetSqlProfileProvider" enabled="true">
      <properties>
        <add name="FirstName"/>
        <add name="LastName"/>
        <add allowAnonymous="true" name="LastVisit" type="System.Nullable`1[System.DateTime]"/>
        <group name="Address">
          <add name="Street"/>
          <add name="PC"/>
          <add name="InternalNumber" type="System.Int32" defaultValue="0"/>
        </group>
        <add name="EmployeeInfo" serializeAs="Binary" type="EmployeeInfo"/>
      </properties>
    </profile>
  </system.web>
</configuration> 
```

### 在代码中使用配置文件（此示例为 Global.asax）

```
void Application_EndRequest(object sender, EventArgs e)
{
    if (Profile != null)
    {
        Profile.LastVisit = DateTime.Now;
        Profile.Save();
    }
} 
```

此外，ASP.Net 允许您使用 Microsoft AJAX 组件访问 JavaScript 中的属性：

### 网页配置

```
<configuration>
  <system.web.extensions>
    <scripting>
      <webServices>
        <profileService enabled="true" readAccessProperties="LastVisit" writeAccessProperties="LastVisit"/>
        <jsonSerialization maxJsonLength="102400" recursionLimit="100" />
      </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

### ASPX

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#profile").click(function () {
            Sys.Services.ProfileService.load();
            Sys.Services.ProfileService.properties.LastVisit = new Date();
            Sys.Services.ProfileService.save(
                null,
                function (m) {
                    alert(m);
                },
                function (e) {
                    alert(e);
                },
                null
            );
        });

        Sys.Services.ProfileService.load(null, function (r) {
            $("#res").append("<br/>");
            $("#res").append(Sys.Services.ProfileService.properties.LastVisit.toString());
            $("#res").append("<br/>");
        }, function (m) {
            $("#res").append(m.get_message());
        }, null);

    });
</script>

<asp:ScriptManager runat="server" ID="sm">
    <AuthenticationService />
    <ProfileService />
    <RoleService />
</asp:ScriptManager> 
```

# java - MockView 不能转换为 android.view.ViewGroup

> ID：11706354
> 
> 赞同：2
> 
> 时间：2012-07-29T03:11:59.620
> 
> 标签：java, android

我正在创建一个小应用程序，但出现错误“...MockView 无法转换为 android.view.ViewGroup”，并且没有设置显示。我试图有一个按钮，当它被选中时切换状态和文本。任何帮助将非常感激。

主类：

```
package rechee.pro.sound;

import android.app.Activity;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.view.View.OnClickListener;
import android.widget.ImageButton;

public class PrometheusSoundActivity extends Activity implements OnClickListener {

    ImageButton pressed;
    ImageButton not_pressed;

    private MediaPlayer mp;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setVolumeControlStream(AudioManager.STREAM_MUSIC);

         ImageButton pressed = (ImageButton) findViewById(R.id.pressed);
        pressed.setOnClickListener(this);

         ImageButton not_pressed= (ImageButton) findViewById(R.id.not_pressed);
        not_pressed.setOnClickListener(this);

       // View clickButton= findViewById(R.id.click_button);
       //clickButton.setOnClickListener(this);
    }
    int resId;
    public void onClick(View v) {
        if(pressed.isSelected()){
            resId= R.raw.sound;
            mp= MediaPlayer.create(this, resId);
            mp.start();

        }
        if(not_pressed.isSelected()){
            mp.stop();
        }

        if(mp!=null){
            mp.release();
        }

    }
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <selector xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="@drawable/promethus">
        <item android:id="@+id/not_pressed"
            android:state_pressed="false"
            android:text="@string/Click"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        <item android:id="@+id/pressed"
            android:state_pressed="true"
            android:text="@string/stop_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        </selector>

</LinearLayout> 
```

字符串 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World, PrometheusSoundActivity!</string>
    <string name="Click">Click here</string><string name="stop_button">Stop</string><string name="app_name">Prometheus Sound</string>

</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:03:21.603

I'm not sure if you can put a selector inside a linear layout like that, or if android:id is even a valid tag to have inside a selector item (see: [http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)). If you want to have a button that changes states when it's pressed, ToggleButton lends itself to what you want to do (http://developer.android.com/reference/android/widget/ToggleButton.html) or you can programatically set the button to change it's text when it's pressed. In the case when you use a toggle button, you'd declare it in your xml as ToggleButton.

```
<ToggleButton
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textOff="textThatShowsWhenButtonIsOff"
    android:textOn="textThatShowsWhenButtonIsPressed" /> 
```

and:

```
public void onClick(View arg0) {
    ToggleButton button = (ToggleButton) arg0;
    if (button.isChecked()) {
        Log.d("MainActivity", "Button is now checked");
    } else {
        Log.d("MainActivity", "Button is now off");
    }

} 
```

# tinymce - TinyMCE 在保存和重新加载数据后显示 html 标签

> ID：11706359
> 
> 赞同：7
> 
> 时间：2012-07-29T03:12:33.370
> 
> 标签：tinymce

我对 TinyMCE 有点问题。

保存编辑器的内容并重新显示后，所有 HTML 标记都可见。

这就是我初始化编辑器的方式：

```
 tinyMCE.init({
      setup: function (ed) {
        ed.onSaveContent.add(function (ed, o) {
          o.content = o.content.replace(/&#39/g, '&apos');
        });
      },

      // General options
      mode: 'specific_textareas',
      theme: 'advanced',
      encoding: 'xml',
      entity_encoding: 'raw',
      height: '500',
      width: '100%',
      plugins: 'autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave',

      editor_selector: 'rich-text-area',
      editor_deselector: 'text-area',

      // Theme options
      theme_advanced_buttons1: 'save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect',
      theme_advanced_buttons2: 'cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor',
      theme_advanced_buttons3: 'tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen',

      theme_advanced_toolbar_location: 'top',
      theme_advanced_toolbar_align: 'left',
      theme_advanced_statusbar_location: 'bottom',
      theme_advanced_resizing: false,

      // Example content CSS (should be your site CSS)
      content_css: 'css/content.css',

      // Drop lists for link/image/media/template dialogs
      template_external_list_url: 'lists/template_list.js',
      external_link_list_url: 'lists/link_list.js',
      external_image_list_url: 'lists/image_list.js',
      media_external_list_url: 'lists/media_list.js',

      // Style formats
      style_formats: [
                    { title: 'Bold text', inline: 'b' },
                    { title: 'Red text', inline: 'span', styles: { color: '#ff0000'} },
                    { title: 'Red header', block: 'h1', styles: { color: '#ff0000'} },
                    { title: 'Example 1', inline: 'span', classes: 'example1' },
                    { title: 'Example 2', inline: 'span', classes: 'example2' },
                    { title: 'Table styles' },
                    { title: 'Table row 1', selector: 'tr', classes: 'tablerow1' }
                ]
    }); 
```

重新显示后的数据：

![在此处输入图像描述](../Images/f131fbc8c53e6da7170bf8f22bb6a366.png)

存储在数据库中的数据：

```
&lt;p&gt;Testing&lt;/p&gt; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T03:23:12.423

见[http://www.tinymce.com/wiki.php/Configuration:encoding](http://www.tinymce.com/wiki.php/Configuration:encoding)

似乎您需要评论`encoding: 'xml'`您的配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T07:26:45.973

在函数下添加`init`：

```
tinyMCE.init( {
    forced_root_block: false, // Start tinyMCE without any paragraph tag
} ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-06T20:03:39.650

**您可以在@Html.Raw()**的帮助下删除 Html 标签

 **```
<p>we are Arrivaler web and Mobile development</p> 
```

索引视图

```
@Html.Raw(var.description) 
```

结果：

```
we are Arrivaler web and Mobile development 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T11:07:16.210

有一个选项可以让我们从以 html 标签形式存储的数据库中获取原始数据。html.raw 用于此目的

在 asp.net @html.raw(object) 是这个问题的解决方案**

# javascript - 提交前拦截和编辑ajax数据

> ID：11706363
> 
> 赞同：0
> 
> 时间：2012-07-29T03:13:45.290
> 
> 标签：javascript, jquery, tumblr

所以我正在尝试编写一个脚本来编辑我所有的 tumblr 博客的 html，所以我不必手动进行。

问题是 tumblr 并没有真正可以编辑的表单，然后通过 JS 提交。他们有一种非常奇怪的方式来编译自定义 html 并提交 ajax 请求。

所以，我想知道是否有办法在 ajax 调用发出之前拦截它，编辑数据中的一个字段，然后自己提交？

我试过这样的事情：

```
var submitted = false
$("body").ajaxSuccess(function(evt, request, settings){  
  j = $.parseJSON(settings.data)  
  j.custom_theme = "PUT HTML HERE"
  if (!submitted)
    $.post(settings.url, j, function(data){
      console.log(data);
      submitted = true;
    })
}) 
```

但是我收到了 403 禁止错误。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:31:03.090

我不确定您到底要做什么，但是必须使用自定义脚本来完成吗？听起来这只会被你使用，所以扩展应该可以工作。如果是这样，有一个非常有用的 Firefox 扩展，本着 Firebug 的精神，称为[Tamper Data](https://addons.mozilla.org/en-us/firefox/addon/tamper-data/)。这应该能够做你想做的事。

它允许您监视浏览器发出的每个请求，并且您可以打开一个选项，允许您在发送之前查看和编辑每个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:35:26.830

好吧，很明显 ajaxSuccess 不会按照您希望的方式工作。为发送 AJAX 请求的函数分配一个新名称并覆盖它。在新函数结束时调用前一个函数，即按照您想要的方式操作数据之后。

# wordpress - 在 wordpress 中回显 the_post_thumbnail

> ID：11706368
> 
> 赞同：0
> 
> 时间：2012-07-29T03:15:31.450
> 
> 标签：wordpress, thumbnails

我一直在尝试使用字符串和函数来回显 worpress 的帖子缩略图，但它不起作用。

这是我要展示的模板。

```
 if ($favorite_post_ids):
            $favorite_post_ids = array_reverse($favorite_post_ids);
            foreach ($favorite_post_ids as $post_id) {
                $p = get_post($post_id);
                echo "<li>";
                echo "<a href='".get_permalink($post_id)."' title='". $p->post_title ."'>" . $p->post_title . "</a> ";
echo '<img src="'.get_the_post_thumbnail(array(55,55)).'" />';
                wpfp_remove_favorite_link($post_id);
                echo "</li>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:32:25.227

get_the_post_thumbnail() 的第一个参数是帖子 ID，而不是缩略图大小

# asp.net-mvc - MVC 删除记录时遇到问题

> ID：11706376
> 
> 赞同：0
> 
> 时间：2012-07-29T03:17:14.563
> 
> 标签：asp.net-mvc, entity-framework

尝试删除记录时出现错误：

InvalidOperationException - 无法删除该对象，因为在 ObjectStateManager 中找不到它。

```
public ActionResult Delete(CustomerModel customer)
        {
            db.Customer.Remove(customer);
            db.SaveChanges();
            return View();
        } 
```

**更新**：我签入了 bebugger，客户完全是空的。因此数据库无法删除该特定记录。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:25:40.433

您的*客户*对象未加载到名为*db*的 DbContext中（我假设它是一个 DbContext ......从您的代码中并不完全清楚）。

使用实体框架，您使用的 DbContext 必须知道它正在作用的对象。看起来您以某种方式创建了*客户*，而不是将其加载到*db*中。

您可以像这样将它添加到 DbContext 中：

```
db.Attach(customer); 
```

然后，继续删除它并保存您的更改。

有关更多详细信息，请参阅

[http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)

专门针对您的情况，*将现有实体附加到上下文中*

**更新**（基于您的更新）

您最初是如何创建*客户*的？如果没有这些细节，就只能猜测为什么它完全是空的。

# java - 位图太大 - 内存不足？

> ID：11706381
> 
> 赞同：0
> 
> 时间：2012-07-29T03:18:31.043
> 
> 标签：java, android

我正在尝试在我的设备上为某个人的一些动作设置动画。我创建了一个精灵表，最终为 1.23Mb。图像尺寸为 5000 x 1500 像素。工作表有 8 行，每行都是它自己的操作。（走，鞠躬，跳……）。最长的动作是 32 张图像。所以图像基本上是 32 列，8 行。所以，现在我加载它：

一旦我这样做：

```
private Bitmap bmp;
bmp = BitmapFactory.decodeResource(getResources(), R.drawable.myImage); 
```

我收到一个错误：

> 线程 [<1> main]（暂停（OutOfMemoryError 异常））
> BitmapFactory.decodeResource(Resources, int, BitmapFactory$Options) 行：385 BitmapFactory.decodeResource(Resources, int) 行：404
> GameView.(Context) 行：25 FightActivity。 onCreate(Bundle) 行：13 FightActivity(Activity).performCreate(Bundle) 行：4465
> Instrumentation.callActivityOnCreate(Activity, Bundle) 行：1049
> ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) 行：1920
> ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord , Intent) 行: 1981 ActivityThread.access$600(ActivityThread, ActivityThread$ActivityClientRecord, Intent) 行: 123
> ActivityThread$H.handleMessage(Message) line: 1147
> ActivityThread$H(Handler).dispatchMessage(Message) line: 99 Looper.loop() line: 137 ActivityThread.main(String[]) line: 4424
> Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method] Method.invoke(Object, Object...) line: 511 ZygoteInit$MethodAndArgsCaller.run() line: 784
> ZygoteInit。 main(String[]) 行：551 NativeStart.main(String[]) 行：不可用 [本机方法]

我是否受限于某个文件大小？看起来很奇怪？如果是这样，我唯一的选择是将精灵分割成单独的“动作”图像，而不是在一个大精灵表中的每行一系列动作图像？

希望有人可以帮助新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:37:20.997

一个简单的计算给你答案。假设每像素 32 位，则 ((5000x1500) 像素) * (每像素 32 位) / (每字节 8 位) / (1024 * 每 Mb 1024 位) = 28MB。

我进行了谷歌搜索，我看到了不同版本的 Android 和不同手机的默认堆大小，范围从 16MB 到 32MB。我想我认为 24​​MB 是最常见的。因此，您很可能只是因为图像内存不足。查看这篇文章，看看你的堆大小是多少：[https](https://stackoverflow.com/a/9428660/1448071) ://stackoverflow.com/a/9428660/1448071 。

**编辑：**似乎没有增加 Android 虚拟机堆大小的好方法。这里有一个带有 setMinimumHeapSize 函数的 VMRuntime.getRuntime() 函数[Android: how to increase heap size at runtime?](https://stackoverflow.com/questions/4119405/android-how-to-increase-heap-size-at-runtime) . 但它似乎正在被弃用。我建议你拆分你的精灵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T20:09:07.960

为角色中的每个动画制作一个单独的 spritesheet，保存对常见动画的引用，并根据需要加载。这足够灵活，您的动画不会滞后，除非您需要从内存中加载位图更改，例如当您从运行更改为空闲或其他时，（尽管这两个足够常见，您可以将它们保存在很长一段时间的记忆）。

增加 VM 堆大小只是部分解决方案，如果您持有如此大的位图，许多设备将没有您需要的堆大小。就像他们上面所说的，磁盘上的图像文件大小仅对于在 Google Play 上部署应用程序很重要（用户将下载更少），但在 ram 上，图像是完全原始的，这意味着每个像素都很重要（例如：一个完全红色的 128x128 位图需要与完全彩色的空间相同，具有完全相同的颜色深度）。

我为您提出了一个解决方案，它使用了这个很棒的软件（我与它没有任何关系，除了我自己使用它，它很棒），它将立即创建您的 spritesheets 并以各种格式导出坐标供您使用采用。[纹理包装器](http://www.codeandweb.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T03:48:12.883

您需要增加 VM 堆大小。我很想为你获取链接，但我想这是我能做的最好的 atm -[增加 Java 中的堆大小](https://stackoverflow.com/questions/1565388/increase-heap-size-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T04:03:10.437

根据图像的复杂性，另一个答案可能是使用矢量图形。有许多库具有不同级别的文档和许可要求。

例子; [http://www.andengine.org/](http://www.andengine.org/)

[https://play.google.com/store/apps/details?id=org.anddev.farmtower.eco](https://play.google.com/store/apps/details?id=org.anddev.farmtower.eco)（本游戏使用的AndEngine）

# c# - 以编程方式设置前景后，鼠标悬停触发器不起作用

> ID：11706387
> 
> 赞同：0
> 
> 时间：2012-07-29T03:20:23.797
> 
> 标签：c#, wpf, xaml, triggers, controltemplate

我是 WPF 的新手，但是在互联网上搜索了几天我无法弄清楚我的问题。

在我以编程方式更改`Foreground`属性后，`IsMouseOver`触发器不起作用。请宽容并提前感谢:)

```
<Style x:Key="ZizaMenuItem" TargetType="{x:Type Button}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="Margin" Value="5,0,5,0"/>
    <Setter Property="Height" Value="30"/>
    <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Button}">
        <Label FontSize="14"  Content="{TemplateBinding Content}" Name="ZizaMenuItemText" />
        <ControlTemplate.Triggers>
          <Trigger Property="IsMouseOver" Value="True">
            <Setter TargetName="ZizaMenuItemText" Property="Foreground" Value="#ff0000"/>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style>

<StackPanel Height="30" Name="ZizaMenu" Orientation="Horizontal" Margin="0,12,0,0" VerticalAlignment="Top">
  <Label Content="ZIZA" FontSize="11" FontWeight="Bold" Foreground="Black" Height="25" Margin="20,0,10,0" />
  <Button Name="ZizaMenuInteresting" Click="ZizaMenuItemClicked" Content="ИНТЕРЕСНОЕ" Style="{StaticResource ZizaMenuItem}" />
  <Button Name="ZizaMenuBest" Click="ZizaMenuItemClicked" Content="ЛУЧШЕЕ" Style="{StaticResource ZizaMenuItem}" />
  <Button Name="ZizaMenuAuto" Click="ZizaMenuItemClicked" Content="АВТО" Style="{StaticResource ZizaMenuItem}" />
</StackPanel> 
```

```
private void ZizaMenuItemClicked(object sender, RoutedEventArgs e)
{
    // get label object from template
    Button zizaMenuItem = (Button)sender;
    Label zizaMenuItemText = (Label)zizaMenuItem.Template.FindName("ZizaMenuItemText", zizaMenuItem);
    // set Foreground color for all buttons in menu
    foreach (var item in ZizaMenu.Children)
      if (item is Button)
        ((Label)(item as Button).Template.FindName("ZizaMenuItemText", (item as Button))).Foreground = Brushes.Black;
    // set desired color to clicked button label
    zizaMenuItemText.Foreground = new SolidColorBrush(Color.FromRgb(102, 206, 245));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:35:15.710

那是可怕的代码，永远*不要*弄乱控件模板中的控件。`Template.FindName`是只有被模板化的控件应该在内部调用来获取它的[部分](http://msdn.microsoft.com/en-us/library/system.windows.templatepartattribute.aspx)，*只有*那些，其他一切都应该被认为是不确定的。

如果您需要更改属性模板，请绑定它，然后在实例上绑定或设置所述属性。在[优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)方面，您需要确保不要创建覆盖触发器的**本地值**（这就是您所做的）。您可以使用`Style`and`Setter`来`Label`绑定默认值`Foreground`。

```
<Label.Style>
    <Style TargetType="Label">
        <Setter Property="Foreground" Value="{TemplateBinding Foreground}"/>
    </Style>
</Label.Style> 
```

现在您只需要设置`Foreground`of`Button`本身，`Trigger`内部应该仍然优先于 that `Setter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:38:22.117

它与依赖属性值优先级有关。本地值的优先级高于模板触发器。

有关更多信息，请阅读：http: [//msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx)

# php - PHP：查询结果如何存储在 mysqli_result 中

> ID：11706388
> 
> 赞同：8
> 
> 时间：2012-07-29T03:20:26.927
> 
> 标签：php, memory, mysqli

当我对数据库进行查询并在 mysqli_result 中检索结果时，内存使用量非常小。但是，当我将查询结果中的所有行提取到关联数组中时，内存使用率会变得非常高。

```
<?php
    require_once("../config.php"); //db connection config
    $db = new mysqli(DB_HOST,DB_USER,DB_PASSWORD,DB_DBASE);

    $query ="select * from table_name";
    if($r = $db->query($query)){
    echo "MEMORY USAGE before :  ". memory_get_usage()."<br><br>";
    $rows = array();
    while($row = $r->fetch_assoc()){

        $rows[]= $row;
    }
    echo "MEMORY USAGE after :  ". memory_get_usage()."<br><br>";

    //before: 660880
    //after:  114655768
    // # of records: around 30 thousands
?> 
```

对我来说存储这么多结果非常消耗内存是有道理的，但我只是想知道 mysqli_result 怎么会这么小。不可能每次调用 fetch_assoc 时都向 dbase 查询结果。那么结果存储在内存中的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:30:30.633

获取结果和存储指向资源的指针之间存在巨大差异。

如果你`echo $r;`在第一次调用之前`memory_get_usage();`，你会意识到它只是一个指针。这是指向您的结果集的指针。在`fetch`您获得结果之前，结果集实际上不会存储到内存中。

我建议你`fetchAll()`为你想做的事情而奔跑。这将导致 1 种方法以更好的性能访问所有结果，因为它是在 mysqli 扩展（C 库）而不是 PHP 中的循环上产生的。

您还可以使用免费结果功能在完成后从内存中清除结果。如果您熟悉的话，这就像在 Java 中关闭游标一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:34:25.193

我认为你应该这样做：

```
while($row = $r->fetch_assoc()){
   //Do whatever you need with the record, then:
   unset($row);
} 
```

您发布的方式是在 中收集一个巨大的数组`$rows`，内存使用情况反映了这一点。

# excel - 将两个工作簿保存到一个文件中？

> ID：11706391
> 
> 赞同：0
> 
> 时间：2012-07-27T12:50:39.810
> 
> 标签：excel, vba

我有一个搜索引擎，它来自两个不同的工作簿，一个是搜索引擎所在的工作簿，所以这很容易，但另一个是分开的。

我想知道是否有一种方法可以链接它们，以便如果打开一个，另一个会。这些将放在维基上，我需要下载它们，有没有办法将它们放在同一个文件中但同时保持它们分开？

我猜答案是否定的，但选择你的大脑并没有什么坏处；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:31:31.320

最实用的方法是将代码放在每个文件中

```
 - check if the other file eas already open 
 - if not then either
     - open the other file (assuming the same location) if not already open
     - report the file as missing 
```

为此，您需要`ThisWorkbook`在两个工作簿的模块中放置如下代码。

请注意，代码禁用事件以避免新打开的文件尝试重新打开初始文件（尽管代码仍将处理此问题

在第二本书中使用相同的代码，但将`strFil`变量更新为另一本书的名称

**`File#2`**

```
Private Sub Workbook_Open()
'This File is File02.xlsm
'Other file is File01.xlsm
Dim strFile1 As String
Dim wb As Workbook
strFile = "File01.xlsm"
On Error Resume Next
Set wb = Workbooks(strFile)
On Error GoTo 0
'if file is already open then leave sun
If wb Is Nothing Then
With Application
.ScreenUpdating = False
.DisplayAlerts = False
.EnableEvents = False
On Error Resume Next
Set wb = Workbooks.Open(ThisWorkbook.Path & "\" & strFile)
On Error GoTo 0
.ScreenUpdating = True
.DisplayAlerts = True
.EnableEvents = True
End With
End If
'file not present
If wb Is Nothing Then MsgBox strFile & " not present", vbCritical
End Sub 
```

# c# - Excel 在 *.xlsx 中发现不可读的内容

> ID：11706393
> 
> 赞同：7
> 
> 时间：2012-07-29T03:22:50.737
> 
> 标签：c#, excel, ms-office, openxml, openxml-sdk

我正在从代码生成一个 excel 模板。当我运行该片段来创建我的工作簿时，我没有收到代码错误，但是当我打开 Excel 文档时，我收到一个错误，表明该文件不可读。无论如何我都可以点击打开它，我收到以下消息

> 删除记录：/xl/workbook.xml 部分（工作簿）中的工作表属性

知道我的代码可能有什么问题吗？

```
public void CreatePackage()
{
    using (SpreadsheetDocument package = SpreadsheetDocument.Create(FilePath, SpreadsheetDocumentType.Workbook))
    {
        CreateParts(package);
    }
} 
private void CreateParts(SpreadsheetDocument document)
{
    ExcelWorkBook excelworkbook = new ExcelWorkBook();
    ExcelSheetHelper excelworksheet = new ExcelSheetHelper();
    ExcelSharedStringsTable excelsharedtable = new ExcelSharedStringsTable();
    ExcelWorkSheetPartBuilder excelworksheetbuilder = new ExcelWorkSheetPartBuilder();
    ExtendedFilePropertiesPart extendedFilePropertiesPart1 = document.AddNewPart<ExtendedFilePropertiesPart>("rId3");
    ExcelWorkSheetPartBuilder.GenerateExtendedFilePropertiesPart1Content(extendedFilePropertiesPart1);

    WorkbookPart workbookPart1 = document.AddWorkbookPart();
    excelworkbook.GenerateWorkbookPartContent(workbookPart1);

    WorkbookStylesPart workbookStylesPart1 = workbookPart1.AddNewPart<WorkbookStylesPart>("rId5");
    ExcelWorkBook.GenerateWorkbookStylesPart1Content(workbookStylesPart1);

    SetPackageProperties(document);
}

public void GenerateWorkbookPartContent(WorkbookPart workbookPart1)
{
    Workbook workbook = new Workbook();
    workbook.AddNamespaceDeclaration("r", rNameSpace);
    FileVersion fileVersion1 = GenerateFileVersion();
    WorkbookProperties workbookProperties1 = GenerateWorkbookProperties();

    BookViews bookViews1 = GenerateBookViews();

    Sheets sheets1 = GenerateSheets();

    DefinedNames definedNames1 = GenerateDefinedNames();

    CalculationProperties calculationProperties1 = GenerateCalculationProperties();

    CustomWorkbookViews customWorkbookViews1 = GenerateCustomWorkbookViews();

    workbook.Append(fileVersion1);
    workbook.Append(workbookProperties1);
    workbook.Append(bookViews1);
    workbook.Append(sheets1);
    workbook.Append(definedNames1);
    workbook.Append(calculationProperties1);
    workbook.Append(customWorkbookViews1);

    workbookPart1.Workbook = workbook;
}

// Creates an FileVersion instance and adds its children.
public FileVersion GenerateFileVersion()
{
    FileVersion fileVersion1 = new FileVersion() { ApplicationName = "xl", LastEdited = "5", LowestEdited = "5", BuildVersion = "9303" };
    return fileVersion1;
}

// Creates an WorkbookProperties instance and adds its children.
public WorkbookProperties GenerateWorkbookProperties()
{
    WorkbookProperties workbookProperties1 = new WorkbookProperties() { HidePivotFieldList = true };
    return workbookProperties1;
}

// Creates an BookViews instance and adds its children.
public BookViews GenerateBookViews()
{
    BookViews bookViews1 = new BookViews();
    WorkbookView workbookView1 = new WorkbookView() { XWindow = -75, YWindow = 270, WindowWidth = (UInt32Value)15435U, WindowHeight = (UInt32Value)6930U };

    bookViews1.Append(workbookView1);
    return bookViews1;
}

// Creates an Sheets instance and adds its children.
public Sheets GenerateSheets()
{
    Sheets sheets1 = new Sheets();
    Sheet sheet1 = new Sheet() { Name = String.Format("{0}", worksheetname), SheetId = (UInt32Value)8U, Id = "rId1" };

    sheets1.Append(sheet1);
    return sheets1;
}

// Creates an DefinedNames instance and adds its children.
public DefinedNames GenerateDefinedNames()
{
    DefinedNames definedNames1 = new DefinedNames();
    DefinedName definedName1 = new DefinedName() { Name = "_xlnm._FilterDatabase", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName1.Text = String.Format("\'{0}\'!$A$6:$EO$1269", worksheetname);
    DefinedName definedName2 = new DefinedName() { Name = "Z_32BE30F1_B609_44A0_A38A_666CEFFB64E2_.wvu.Cols", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName2.Text = String.Format("\'{0}\'!#REF!", worksheetname);
    DefinedName definedName3 = new DefinedName() { Name = "Z_32BE30F1_B609_44A0_A38A_666CEFFB64E2_.wvu.FilterData", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName3.Text = String.Format("\'{0}\'!#REF!", worksheetname);
    DefinedName definedName4 = new DefinedName() { Name = "Z_5098B70B_692A_450A_8DAE_5172C296966E_.wvu.FilterData", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName4.Text = String.Format("\'{0}\'!#REF!", worksheetname);
    DefinedName definedName5 = new DefinedName() { Name = "Z_7C00A233_927A_41FE_802C_48F5F9E9D5B6_.wvu.FilterData", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName5.Text = String.Format("\'{0}\'!#REF!",worksheetname);
    DefinedName definedName6 = new DefinedName() { Name = "Z_AC112ED6_0017_40BF_884A_9B7959C37BF0_.wvu.FilterData", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName6.Text = String.Format("\'{0}\'!#REF!", worksheetname);
    DefinedName definedName7 = new DefinedName() { Name = "Z_E444BF53_6DCE_4910_823C_F60AE88C96EE_.wvu.FilterData", LocalSheetId = (UInt32Value)0U, Hidden = true };
    definedName7.Text = String.Format("\'{0}\'!#REF!",worksheetname);

    definedNames1.Append(definedName1);
    definedNames1.Append(definedName2);
    definedNames1.Append(definedName3);
    definedNames1.Append(definedName4);
    definedNames1.Append(definedName5);
    definedNames1.Append(definedName6);
    definedNames1.Append(definedName7);
    return definedNames1;
}

// Creates an CalculationProperties instance and adds its children.
public CalculationProperties GenerateCalculationProperties()
{
    CalculationProperties calculationProperties1 = new CalculationProperties() { CalculationId = (UInt32Value)125725U };
    return calculationProperties1;
}

// Creates an CustomWorkbookViews instance and adds its children.
public CustomWorkbookViews GenerateCustomWorkbookViews()
{
    CustomWorkbookViews customWorkbookViews1 = new CustomWorkbookViews();
    CustomWorkbookView customWorkbookView1 = new CustomWorkbookView() { Name = "A - Personal View", Guid = "{5098B70B-692A-450A-8DAE-5172C296966E}", MergeInterval = (UInt32Value)0U, PersonalView = true, Maximized = true, XWindow = 1, YWindow = 1, WindowWidth = (UInt32Value)1366U, WindowHeight = (UInt32Value)494U, ActiveSheetId = (UInt32Value)3U };
    CustomWorkbookView customWorkbookView2 = new CustomWorkbookView() { Name = "B - Personal View", Guid = "{7C00A233-927A-41FE-802C-48F5F9E9D5B6}", MergeInterval = (UInt32Value)0U, PersonalView = true, Maximized = true, XWindow = 1, YWindow = 1, WindowWidth = (UInt32Value)1024U, WindowHeight = (UInt32Value)487U, ActiveSheetId = (UInt32Value)3U };
    CustomWorkbookView customWorkbookView3 = new CustomWorkbookView() { Name = "C - Personal View", Guid = "{32BE30F1-B609-44A0-A38A-666CEFFB64E2}", MergeInterval = (UInt32Value)0U, PersonalView = true, Maximized = true, XWindow = 1, YWindow = 1, WindowWidth = (UInt32Value)1280U, WindowHeight = (UInt32Value)481U, ActiveSheetId = (UInt32Value)3U };

    customWorkbookViews1.Append(customWorkbookView1);
    customWorkbookViews1.Append(customWorkbookView2);
    customWorkbookViews1.Append(customWorkbookView3);
    return customWorkbookViews1;
}

public void ValidateDocument()
{
    try
    {
        OpenXmlValidator validator = new OpenXmlValidator();
        int count = 0;
        IDictionary<String, String> ErrorLog = new Dictionary<String, String>();

        using (StreamWriter f = new StreamWriter("Errolog.txt"))
        {
            foreach (ValidationErrorInfo error in validator.Validate(WordprocessingDocument.Open(FilePath, true)))
            {
                count++;
                f.WriteLine("Error " + count);
                f.WriteLine("Description: " + error.Description);
                f.WriteLine("Path: " + error.Path.XPath);
                f.WriteLine("Part: " + error.Part.Uri);
                f.WriteLine("-------------------------------------------");
                f.WriteLine("-------------------------------------------");
                f.WriteLine("-------------------------------------------");
            }
            f.Flush();
        }

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-22T20:40:58.493

在我的具体情况下，由于工作表名称太长，我遇到了这个问题。这就是发生在我身上的事情：

*   在我的程序的第一次运行中，我试图创建具有真正大名的工作表。
*   Excel 自动将大名称裁剪为 31 个字符。没有抛出异常。也就是说，我以为我在保存原来的大牌，但实际上我保存的是 31 个字符长的裁剪字符串。
*   在我的程序的第二次运行中，我正在检查这个特定的工作表是否已经存在，但我认为它不存在，因为现有的工作表被裁剪了。
*   我再次保存工作表。没有抛出异常，但是新的也被裁剪了，现在 XML 包含同一个工作表的 2 个定义。
*   这会导致 Excel 尝试修复生成的电子表格。即使它工作正常，我认为它只是扔掉第二个并使用第一个，这不是我想要的。

我通过在所有比较之前预先裁剪 31 个字符来解决问题。现在它完美运行

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-08T07:39:37.200

我知道很久以前就问过这个问题，我认为我的经验会解决某人的问题。所以我在这里发布我的答案。

我有一个类似的问题。它发生是由于没有。工作表名称中的字符数超过限制 31。工作表名称字符必须 <= 31。

它在创建时不会抛出任何异常，但在 Microsoft Excel 中打开时会出错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T06:57:39.263

Open XML SDK 不限制您生成有效文档。但是，`OpenXmlValidator`您可以使用该类来报告生成的文档中的任何错误。看[这个](http://blogs.msdn.com/b/brian_jones/archive/2009/09/24/finding-open-xml-errors-with-open-xml-sdk-validation.aspx)，有一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-02T15:26:32.900

在我的情况下，选项卡名称包含单引号，即：“我的选项卡”。
我只是省略了它们：

```
title = title.replace(/'/g, ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T18:16:56.097

以防万一有人发现这个。也可能是因为您的工作表名称不是唯一的。我的问题是，由于 char 限制，3 张纸的名称完全相同。当我修复文件时，Excel 重命名了重复的工作表。

因此，如果上述答案不起作用，请修复文件，然后查找名为 Recovered_Sheet1 的工作表。这将告诉您哪个工作表名称有问题（在我的情况下重复）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-23T19:04:34.180

是的，正如 Murugesan 在上面的评论中所说，我通过重命名我的 excel 文档的文件名来修复这个错误。例如：在我的例子中，文档的名称是“我的示例导出数据表”。我已将该文件重命名为“MySampleExportDataSheet”，之后一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-20T11:11:34.697

我也有这个错误，因为我使用`0`的是我的`SheetId`，比如：

```
var sheet1 = new Sheet() { Name = "Test", SheetId = (UInt32Value)0U, Id = "rId1" }; 
```

Excel 从 1 开始计数，而不是 0。这不仅适用于行号，也适用于工作表编号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-12T13:38:02.100

在我们的例子中，我们的一些工作表名称包含方括号，例如：

```
Students [Primary]
Students [Secondary] 
```

用圆括号替换方括号固定它：

```
Students (Primary)
Students (Secondary) 
```

（出于某种原因，我们的客户不想要这些名为**Primary Students**、**Secondary Students**的工作表，因此使用括号）

对我们来说，在 Excel 中打开工作簿时的错误消息是：

> 我们发现“workbook.xlsx”中的某些内容存在问题。你想让我们尽可能多地恢复吗？如果您信任此工作簿的来源，请单击“是”。

单击是然后允许 Excel 打开工作簿，并显示消息

> 修复的记录：来自 /xl/workbook.xml 部分（工作簿）的工作表属性

# php - 使用 RecursiveIterator 展平我的多数组不起作用？

> ID：11706396
> 
> 赞同：1
> 
> 时间：2012-07-27T19:24:57.603
> 
> 标签：php

即使输入数组不为 null，这也会返回 null：

```
function flattenArray($multi_array)
{ 
  $flat_array = array();
  foreach(new RecursiveIteratorIterator(new RecursiveArrayIterator($multi_array)) as $k => $v) 
  { 
    $flat_array[$k] = $v;
  }

  return $flat_array;
} 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:03:08.890

This works for me on PHP 5.4:

```
function flattenArray($multi_array)
{
  return iterator_to_array(new RecursiveIteratorIterator(
      new RecursiveArrayIterator($multi_array)), false
  );
}

var_dump(flattenArray([1, 2, 3, [4, 5, [6, 7], 8], 9])); 
```

Partial output:

```
array(9) {
  [0] =>
  int(1)
  [1] =>
  int(2)
  [2] =>
  int(3)
  [3] =>
  int(4) 
```

The only problem with your code snippet from what I can tell is that the keys are overwritten.

# java - java.util.Calendar中，为什么设置Calendar.YEAR的值会影响Calendar.MONTH的值？

> ID：11706398
> 
> 赞同：2
> 
> 时间：2012-07-29T03:23:52.207
> 
> 标签：java

我只是在尝试 java.util.Calendar 方法`getActualMaximum()`，看看我是否可以获得一年中一个月的最大天数。这是我的代码：

```
public static void main(String[] args) {
    Calendar c = Calendar.getInstance(); // today is July 29, 2012
    System.out.println(c.get(Calendar.MONTH) + " " + c.getActualMaximum(Calendar.DATE) + " " + c.get(Calendar.YEAR));
    c.set(Calendar.MONTH, Calendar.FEBRUARY); // set to February 2012
    System.out.println(c.get(Calendar.MONTH) + " " + c.getActualMaximum(Calendar.DATE) + " " + c.get(Calendar.YEAR));
    c.set(Calendar.YEAR, 2011); // set year to 2011, now February 2011
    System.out.println(c.get(Calendar.MONTH) + " " + c.getActualMaximum(Calendar.DATE) + " " + c.get(Calendar.YEAR));
} 
```

我期待的输出是：

```
6 31 2012 // last day of July 2012 is 31
1 29 2012 // last day of Feb 2012 is 29
1 28 2011 // last day of Feb 2011 is 28 
```

但是，这就是我得到的：

```
6 31 2012
1 29 2012
2 31 2011 // HUH? 
```

（在 java.util.Calendar 中，1 月到 12 月的月份值从 0 到 11 开始，而月份本身的天数从 1 开始。）

为什么月份突然设置为 Calendar.MARCH？这里发生了什么，我该怎么做才能正确获取给定月份和年份的最后几天？我正在探索该方法，因为我不想设置我自己的布尔数组，其中对于代表 31 天月份的索引为 true，而对于不为 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T03:28:34.807

我相信日历会记住你一年中有多少天。在 2012 年，您在第 31 天 + 29 = 2 月 29 日。在 2011 年，那是 3 月 1 日。然后您要求该月的实际最大值，即（3 月）为 31。

日历 API 很糟糕。

在询问用例中的实际最大值之前，您应该直接设置年份和月份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:28:22.997

这是因为 2012 年 2 月 29 日之前的一年是 2011 年 3 月 1 日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T03:31:31.410

2011 年 2 月没有第 29 天，因此课程会自动调整为第一个有效日期。它认为你在 2 月 28 日之后的第一天，也就是 3 月 1 日之后，会走路。

# c# - 如何绑定datalist控件的itemtemplate字段内的下拉列表

> ID：11706400
> 
> 赞同：2
> 
> 时间：2012-07-29T03:24:39.390
> 
> 标签：c#, asp.net, drop-down-menu, datalist

我有两个存储项目和项目大小的表，一个项目将有不同的大小。我正在尝试在数据列表中显示下拉列表中项目的项目大小。我的html如下

```
<asp:DataList ID="dlstCartItems" runat="server" RepeatDirection="Horizontal" RepeatColumns="5"
                    Width="580px" ForeColor="Blue" DataKeys="ItemCode"
                    onitemdatabound="dlstCartItems_ItemDataBound">
                    <ItemTemplate>
                        <table cellpadding="0" cellspacing="0" style="border: Solid 2px #eeeeee;">
                            <tr>
                                <td align="left" style="width: 180px;">
                                    <a href="Videos.aspx?vid=<%# Eval("itemid") %>">
                                        <img src="images/Gallery/<%# Eval("imagename") %>" alt="Image" height="120px" width="185px"
                                            style="border: 0;" />
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 180px;" align="left">
                                    <table>
                                        <tr>
                                            <td>
                                                Name:
                                            </td>
                                            <td>
                                                <a href="Videos.aspx?vid=<%# Eval("itemid") %>">
                                                    <asp:Label ID="lblVideoName" runat="server" Text='<%# Eval("name")%>' ForeColor="#06C"></asp:Label>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Author:
                                            </td>
                                            <td>
                                                <a href="Videos.aspx?Authorid=<%# Eval("itemid") %>">
                                                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("thm") %>' ForeColor="#06C"></asp:Label></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Technology:
                                            </td>
                                            <td>
                                                <a href="Videos.aspx?Techid=<%# Eval("itemid") %>">
                                                    <asp:Label ID="Label2" runat="server" Text='<%# Eval("itemcode") %>' ForeColor="#06C"></asp:Label></a>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td>

                                    <asp:DropDownList ID="ddlAvailableSizes" runat="server"  >
                                    </asp:DropDownList>
                                </td>
                            </tr>
                        </table>
                    </ItemTemplate>
                    <%--<AlternatingItemStyle BackColor="Silver" />--%>
                    <ItemStyle BackColor="#eeeeee" />
                </asp:DataList>

This is my bind method

 var query = (from b in db.CR_CartItems
                         join c in db.CR_CartItems_Sizes on b.ItemCode equals c.ItemCode
                         join k in db.CR_ScrollingMenus on b.ThemeID equals k.MenuID

                         where b.status == true
                         orderby b.updatedat descending
                         select new
                         {
                             itemid = b.Itemid,
                             imagename = b.galleryimg,
                             itemcode = b.ItemCode,
                             thm = k.DisplayName,
                             name = b.posterName

                         }).Distinct();
            foreach (var q in query)
            {

                var query1 = from b in db.CR_CartItems_Sizes
                             join c in db.CR_CartItems on b.ItemCode equals c.ItemCode
                             where b.ItemCode == q.itemcode
                             select new
                             {
                                 b.SizeDesc,
                                 b.ItemCode
                             };

                foreach (DataListItem li in dlstCartItems.Items)
                {
                    DropDownList list = (DropDownList)li.FindControl("ddlAvailableSizes");
                    list.DataSource = query1;
                    list.DataTextField = "SizeDesc";
                    list.DataValueField = "ItemCode";
                    list.DataBind();
                    list.Items.Insert(0, "Available Sizes");
                }

            }
            dlstCartItems.DataSource = query;
            dlstCartItems.DataBind();
        } 
```

我在 foreach 循环中设置了一个断点并检查，它没有进入循环。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:43:56.613

您必须处理`DataList.ItemDataBound`事件：

假设您正在绑定您的`DataList`喜欢：（或类似的，使用数据源控件）

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        this.dl.DataSource = GetDataSource();
        this.dl.DataBind();
    }
} 
```

然后您的`ItemDataBound`处理程序将如下所示：

```
protected void dl_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var myDropDownList = e.Item.FindControl("YourDropDownListID") as DropDownList;
        int currentItemID = int.Parse(this.dl.DataKeys[e.Item.ItemIndex].ToString());

        myDropDownList.DataSource = GetDDLDataSource(currentItemID);
        myDropDownList.DataBind();
    }
} 
```

最后确保在`DataList`标记中注册事件

```
 <asp:DataList ID="dl" runat="server" 
        onitemdatabound="dl_ItemDataBound"
        DataKeyField="Your_Row_ID"
    > 
```

# iphone - XCode 中神秘的不充分堆栈跟踪没有给出错误发生位置的上下文

> ID：11706402
> 
> 赞同：2
> 
> 时间：2012-07-29T03:25:16.260
> 
> 标签：iphone, objective-c, xcode

我遇到了许多使用最新版本的 XCode 的实例（我相信这从 4.2 左右开始发生），其中抛出异常时的堆栈跟踪非常缺乏细节。

这里的截图说明了一种这样的情况；事实上，这个场景至少有*一些*上下文（它告诉我它发生在 JKArray 类中），很多时候我只得到“内部”堆栈项（线程中只有 2-3 个条目，没有一个驻留在用户代码或我可以查看的任何内容）。即使在这个例子中，我也不知道 JKArray 是在哪里分配或释放的，所以我不知道是什么实例或问题出在哪里。

![在此处输入图像描述](../Images/ece29a0e570978eb6eae2e46127e807b.png)

想法：

*   我尝试添加一个通用的“异常”断点
*   输出中有一些次要信息；在这种情况下：“ malloc：*** 对象 0x10e18120 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试”。但是，这样做并没有让我更进一步，因为断点与异常在同一个堆栈中被击中......
*   我试过切换到另一个调试器
*   我试过使用我自己的自定义异常处理程序
*   我尝试使用 Profiler 来查找泄漏。我找不到任何泄漏。

无论我做什么，我似乎都无法隔离困扰我的应用程序的问题。此外，问题似乎每次都不完全相同，可能是由于我的应用程序中的大量并发......所以我没有解决问题的好方法。

* * *

编辑：在这个特殊异常的情况下，我最终找到了原因。我曾尝试 [释放] 和 [autoreleased] d 的对象。但是，所有这些都发生在我的代码中；我不明白为什么 XCode 不会给我一个像样的堆栈跟踪来帮助我找到问题，而不是强迫我搜索我的整个应用程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:43:46.287

有时无法确定真正的问题，因为导致症状的问题发生得更早。

你的问题提供了一个很好的例子：当你释放你的对象时，可可不知道你做错了什么：你正在释放一个你拥有的对象，这正是你应该做的，所以没有危险信号。导致崩溃的代码在您的方法完成后很好地执行，并将控制权交还给运行循环。正是在这一点上，运行循环开始耗尽其自动释放池，从而导致第二次释放。然而，此时它所知道的只是运行循环进行了无效的释放，而不是您的代码。当错误发生时，罪魁祸首已经安全地离开堆栈（并且脱离了钩子），因此 Xcode 无法向您报告任何其他内容。

解决此类问题的方法是分析您的内存使用情况：分析器应该捕获此类问题，并查明它们发生的位置。

不用说，切换到自动引用计数将为您在内存管理部门省去很多麻烦。

# macos - 为什么我的代码会因一次调用此方法而中断，而不会因另一次调用而中断？

> ID：11706403
> 
> 赞同：0
> 
> 时间：2012-07-29T03:25:39.080
> 
> 标签：macos, cocoa, nsurlconnection

我有一个 Mac 应用程序，它应该为给定的用户名获取 Twitter 关注者和朋友，然后依次向 Twitter 询问每个返回的 UserID 的用户名称。正如您在下面看到的，我有一个方法可以调用 Twitter API 来获取朋友/关注者（效果很好）。导致我出现问题的是 userNameForUserID:delegate: 方法。我曾经同步执行这些请求，然后立即返回用户名的 NSString。那条（现在已被注释掉）行总是坏了，所以我尝试使用 NSURLConnection 异步进行。还是不行。我不明白为什么 [[NSString alloc] initWithContentsOfURL:...] 适用于 fetchFollowers... 方法，但当我以完全相同的方式在另一个...

我在用于分配初始化具有 URL 内容的 NSString 的行上放置了一个断点，当我进入它时，它不会中断、返回、抛出异常、崩溃……什么都没有。就好像那条线刚刚被跨过（但我的应用程序仍然被阻止。

有任何想法吗？非常感激！

```
NSString * const GET_FOLLOWERS = @"https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=";
NSString * const GET_FRIENDS = @"https://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name=";
NSString * const GET_USER_INFO = @"https://api.twitter.com/1/users/show.json?user_id=";

@implementation TwitterAPI

+ (void)userNameForUserID:(NSNumber *)userID delegate:(id<UserNameDelegate>)delegate
{
    NSURL *url = [NSURL URLWithString:[GET_USER_INFO stringByAppendingString:[userID stringValue]]];

    //  NSString *JSON = [[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];

    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:req queue:queue completionHandler:^(NSURLResponse *urlResponse, NSData *data, NSError *error) {
        [delegate addUserNameToArray:data];
    }];
}

+ (NSArray *)fetchFollowersWithUserName:(NSString *)userName
{
    NSURL *url = [NSURL URLWithString:[GET_FOLLOWERS stringByAppendingString:userName]];

    NSArray *followerIDs;

    NSString *JSON = [[NSString alloc] initWithContentsOfURL:url encoding:NSASCIIStringEncoding error:nil];
    if ([JSON rangeOfString:@"error"].location == NSNotFound)
        followerIDs = [[JSON JSONValue] valueForKey:@"ids"];

    return followerIDs;

} 
```

# .htaccess - mod_rewrite 不适用于 Magento 安装

> ID：11706406
> 
> 赞同：0
> 
> 时间：2012-07-29T03:25:54.587
> 
> 标签：.htaccess, url, magento, mod-rewrite

我最近将 magento 安装到了新服务器上。域名还没有指向服务器，因为我还需要设计站点，所以现在我使用的是 IP 地址。

示例：11.222.3.44/~clientname/

我正在尝试打开magento的url重写以在每个页面上的“/〜clientname /”之后删除“index.php”，但是当我在网站上打开重写时停止工作并且我得到404。这是由于我正在使用的 IP 地址和尾随客户端名称？如果是这样，如何纠正？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:20:09.443

检查 RewriteEngine 是否打开，.htaccess 中的 RewriteBase 是否正常。在您的情况下，它应该是 RewriteBase /~clientname/

当然还要检查 mod_rewrite 是否已安装并启用，但我认为它已经完成了。

# delphi - 如何在 Delphi 中连接到数据库和 PHPMyAdmin

> ID：11706408
> 
> 赞同：0
> 
> 时间：2012-07-29T03:26:07.287
> 
> 标签：delphi, phpmyadmin, delphi-7

我想让注册过程成为用户名和密码。我用的是Delphi 7。组件可以做哪些？（我的英语很少，对不起。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:53:30.403

http 请求是最简单的方法（使用 GET 或 POST），但如果您不希望将密码/用户名传递给未加密的网络服务器，则最好使用 SSL。

使用 POST 请求的示例：

```
uses
  IdHTTP;

function PostData(const URL: string; Params: TStrings): string;
var
  IdHTTP: TIdHTTP;
begin
  Result := '';
  IdHTTP := TIDHttp.Create(nil);
  try
    IdHTTP.HandleRedirects := True;
    IdHTTP.ReadTimeout := 5000;
    Result := IdHTTP.Post(URL, Params);
  finally
    IdHTTP.Free;
  end;
end; 
```

可选地，您可以编写自己的套接字，但这会更加困难，因为您必须编写自己的侦听器。（大多数共享主机计划通常不允许这样做。）

# sql - 如何在不分组、计数、平均的情况下旋转行

> ID：11706409
> 
> 赞同：1
> 
> 时间：2012-07-29T03:26:13.160
> 
> 标签：sql, database, pivot-table

我正在从一个搞砸的数据库中修改一些表。一些表具有相同的数据但表名不同，并且每个表也有相似的数据但列名不同。无论如何，这是一个奇怪的要求，但必须像这样。

我需要将行向上旋转以模拟一行，这样我就可以从两个不同的表中创建一条记录。

我附上了一张照片。左侧的表格将拉出一行，左侧的表格将根据左侧表格的 id 提供 1 - n 行。我需要将行向上旋转以模拟一行并使用两个结果创建一条记录。

从我的在线检查来看，支点似乎是要走的路，但它似乎希望我进行分组或进行某种类型的聚合。

这样做的最佳方法是什么？

```
table1 ---Produces one row
table1id | col1 | col2 | col3
1    Wow    Wee    Zee

table2 ---Produces 1 - n rows
table2id | table1id | col1 | col2 | col3
1            1        sock   cloth  sup
2            1        bal    baa    zak
3            1         x      y    fooZ 
```

需要看起来像这样（下面不是列名，它们是结果集）

```
Woo,wee,zee,sock,cloth,sup,bla,baaa,zak,x,y,fooZ 
```

![在此处输入图像描述](../Images/ce995857ee6d3807ad92f21eb134af1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:58:05.787

如果使用 MySQL：

```
SELECT a.table1id, GROUP_CONCAT(a.col) AS col_values
FROM
(
    SELECT table1id, col1 col FROM table1 UNION ALL
    SELECT table1id, col2     FROM table1 UNION ALL
    SELECT table1id, col3     FROM table1 UNION ALL
    SELECT table1id, col1     FROM table2 UNION ALL
    SELECT table1id, col2     FROM table2 UNION ALL
    SELECT table1id, col3     FROM table2
) a
GROUP BY a.table1id 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8a36c/1/0)

* * *

如果使用 SQL-Server：

```
SELECT a.table1id, b.colnames
FROM table1 a
CROSS APPLY
(
    SELECT STUFF((
        SELECT ',' + aa.col
        FROM
        (
            SELECT table1id, col1 col FROM table1 UNION ALL
            SELECT table1id, col2     FROM table1 UNION ALL
            SELECT table1id, col3     FROM table1 UNION ALL
            SELECT table1id, col1     FROM table2 UNION ALL
            SELECT table1id, col2     FROM table2 UNION ALL
            SELECT table1id, col3     FROM table2
         ) aa
         WHERE aa.table1id = a.table1id
         FOR XML PATH('')
    ), 1, 1, '') AS colnames
) b 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/8a36c/19/0)

# xcode - 在翻转视图和主控制器视图 xcode 之间共享对象

> ID：11706412
> 
> 赞同：1
> 
> 时间：2012-07-29T03:26:46.380
> 
> 标签：xcode, oop

我们的学生团队目前正在开发一个 iphone 应用程序，我们被困在程序的一部分中，用户可以通过使用 UItextfield 在反面视图上输入值来自定义我们应用程序中的计时器运行多长时间。我们无法弄清楚如何从反面视图控制器更新主视图控制器中的这些值，任何帮助将不胜感激，我们已经查看了很多示例，但似乎没有任何效果。

```
//Inside the FlipsideViewController where the user changes the values in a UITextField

- (IBAction)update:(id)sender {

MainViewController *viewController = [[MainViewController alloc]

InitWithNibName:@"MainViewController" bundle:nil];
       viewController.ward1Time = [ward1.text intValue];
       viewController.ward2Time = [ward2.text intValue];
       viewController.ward3Time = [ward3.text intValue];
       viewController.ward4Time = [ward4.text intValue];

}

//Inside the MainViewController where we want to take the input the user put in in the FlipsideViewController

- (IBAction)newGreenWard:(id)sender {

[myWardObject setCurrentTime:ward1Time];
} 
```

# asp.net - sqlexception'超时已过期'？

> ID：11706416
> 
> 赞同：1
> 
> 时间：2012-07-29T03:28:28.783
> 
> 标签：asp.net, visual-studio-2010, asp.net-membership, authorization

我的应用程序的 global.asax 文件中有一些代码。每次我调试我的网站时，我都会`sqlexception`因为某种原因得到一个：

```
void Application_AuthorizeRequest(object sender, EventArgs e)
{
    if (Membership.GetUser() != null && Roles.IsUserInRole("UnFilled")) // this is where I get the exception
    {
        if (Response.Cookies["Expiration"] == null)
        {
            HttpRequest request = Context.Request;
            HttpResponse response = Context.Response;
            response.ContentType = ".aspx";
            response.Write(request.Url.Host + "/Activate.aspx?account="+Membership.GetUser().Email);  
        }
    }      
} 
```

有谁知道我为什么会得到这个，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:51:22.033

我找到了答案，但不确定它为什么有效。如果我将编码放入自定义 http 处理程序中，它似乎可以工作。

感谢所有的贡献。

# wpf - TrackBarEdit 值

> ID：11706418
> 
> 赞同：0
> 
> 时间：2012-07-29T03:28:51.633
> 
> 标签：wpf, devexpress

无法在 Devexpress TrackBarEdit 的值下显示标志。例如必须有 10 个值的日期选择...我需要在 TrackBarEdit 下制作 10 个日期签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:50:53.963

据我所知，当前版本的[DevExpress TrackBarEdit](http://help.devexpress.com/#WPF/CustomDocument7915)不支持此功能。
我在[DevExpress 支持中心](http://www.devexpress.com/Support/Center/)找到了一个关于这个的建议：[Labels for ticks in a TrackBarEdit](http://www.devexpress.dev/Support/Center/Issues/ViewIssue.aspx?issueid=Q406457)。

# jquery - IE 9 和 jQuery(this).remove(); 在 img 标签上重新加载页面之前失败

> ID：11706420
> 
> 赞同：0
> 
> 时间：2012-07-29T03:29:08.957
> 
> 标签：jquery, internet-explorer-9

在 Chrome、Firefox 和 Safari 中，我成功地使用 onError 删除了未加载的图像：

```
<img src="" onerror="jQuery(this).remove();" /> 
```

这在 Internet Explorer 9 中似乎不起作用，但页面的第二次+ 刷新工作正常，并且与其他浏览器完全一样。有没有更好的方法从 DOM 中删除在 IE 中未正确加载的 img 标签？似乎 IE 无限期地等待图像在第一页加载时加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:41:23.853

我怀疑在加载 jQuery 之前从图像中返回了错误。这将导致 onerror 处理程序触发，但随后会失败。

这根本不需要用 jQuery 来完成。你可以使用常规的 Javascript 来处理它。这样的事情应该可以解决问题：

```
this.parentNode.removeChild(this); 
```

这将直接替代您当前拥有的 jQuery 代码。类似数量的代码并消除了对 jQuery 的需要，因此消除了任何可能由加载顺序引起的问题。

还值得指出的是，jQuery 存在的主要原因之一是帮助我们摆脱对像这样嵌入 HTML 中的 JS 代码的需要，所以在 HTML 事件中看到 jQuery 调用就像你原来的例子那样看起来是错误的.

如果您打算为此使用 jQuery，请不要那样做；使用 jquery 正确的事件处理机制。它看起来像这样：

```
jQuery('img').error(function() {
    jQuery(this).remove();
}); 
```

这将位于 HTML 之外的单独脚本标记中。

但是，由于加载顺序的问题，以及您的图像加载错误会在页面加载的早期发生，我建议只使用第一个解决方案。如果您在主页加载后动态加载图像，则 jQuery 解决方案可能更值得。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:07:59.570

我认为处理此问题的最佳方法是等待您的服务器端脚本。进行文件检查，如果文件存在，则将其与其余文件一起加载，如果不存在，则不要渲染它，跳过它以供下一个或其他内容。但那是我的意见，而且总是侥幸我认为下载时会出错。我注意到你的使用

`onError`

我个人从未使用过它，但从我及时看到的所有示例中，它一直是

`onerror`

许多浏览器尝试以不区分大小写的方式查找这些属性，并尝试自行更正以按照需要的方式呈现输出。然而，IE 对于它所寻找的东西已经并且总是非常挑剔。我会说只是为了咯咯笑，试着用小写字母，看看它是否每次都没有像它应该的那样，如果是这样，那么这是你的问题，如果不像你评论中发布的人，给我们对您正在尝试做的事情有一点洞察代码，这样我们就可以尝试更好地帮助您解决哪里出了问题。

# jquery - 我可以在 .ajaxSuccess 中访问我的 json 对象而无需解析它吗？

> ID：11706422
> 
> 赞同：0
> 
> 时间：2012-07-29T03:30:41.833
> 
> 标签：jquery, ajax, json, coffeescript

我有一个运行良好的 ajax 调用（在 CoffeeScript 中）；

```
ajaxElement.change ->
  $(this).data('request','initiated')
  $.ajax
    type: 'PUT'
    url: $(this).closest('form').data('update-url')
    data: $(this).serialize()
    dataType: 'json'
    success: (data) ->
      alert(data.name) 
```

警报确认 data.name 已从服务器返回的 JSON 对象中正确解析。但是，我想在 jQuery.ajaxSuccess 调用中访问它。我可以这样做

```
$('form.invoice-form').ajaxSuccess (event, xhr, options) ->
  response = $.parseJSON(xhr.responseText)
  alert(response.name) 
```

它工作正常，但我想知道这是否不是最佳实践。我解析 JSON 两次以获得我想要的，这不是一个巨大的开销，但最好避免。ajaxSuccess 中的这些参数之一是否已经包含我已解析的 Javascript 对象，我可以在原始 .ajax 调用中轻松访问该对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:47:11.237

我认为成功回调是在 ajaxSuccess 回调之前调用的。那么，考虑到这一点，您可以将 json 数据存储在表单上并执行以下操作吗？*我不写咖啡脚本，为任何语法嘘声道歉*

```
ajaxElement.change ->
  $(this).data('request','initiated')
  $.ajax
    type: 'PUT'
    url: $(this).closest('form').data('update-url')
    data: $(this).serialize()
    dataType: 'json'
    success: (data) ->
      $(this).closest('form').data('lastdata',data)
      alert(data.name)

//...
$('form.invoice-form').ajaxSuccess (event, xhr, options) ->
    lastData = $(this).data('lastdata')
    alert(lastData.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:36:53.013

如果您的`success`函数对解析的 JSON 不执行任何操作，您可以省略`dataType`（或将其设置为`text`） - 然后 jQuery 将返回简单文本，并且您将只解析一次（在您的第二个函数中）。

# python - 使用 selenium 获取动态 html 表并使用 beautifulsoup 解析它

> ID：11706424
> 
> 赞同：1
> 
> 时间：2012-07-29T03:31:05.530
> 
> 标签：python, regex, selenium, webdriver, beautifulsoup

我正在尝试获取由网页中的 JavaScript 动态生成的 HTML 表格的内容，并使用 BeautifulSoup 对其进行解析以使用表格中的某些值。

`driver.page_source`由于内容是由 JavaScript 生成的，它在源代码 ( )中不可用。

有没有其他方式来获取内容并使用它？它是包含任务列表的表格，我需要解析表格并确定我正在搜索的特定任务是否可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:06:19.803

正如 Julian 所提到的，我宁愿在 Firebug（或其他浏览器中的类似工具）中检查我的“Net”选项卡并获取这样的数据。如果数据是 JSON，只需使用`json.loads()`，如果是 html，您可以使用 BS 或您所说的任何其他 lib 解析它。也许你想试试我的[dummy lib](https://github.com/starenka/emery)，它简化了这一点并将表格作为 tablib 对象返回，你可以得到 csv、excel、json 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:10:00.840

您需要弄清楚 Javascript 发出的 HTTP 请求，并在 Python 代码中发出相同的请求。你可以通过使用你最喜欢的浏览器的开发工具来做到这一点，或者如果强制使用wireshark。

# javascript - 定义 Socket.io on("message") 处理程序的最有效方法

> ID：11706426
> 
> 赞同：7
> 
> 时间：2012-07-29T03:31:19.797
> 
> 标签：javascript, node.js, websocket, socket.io

Socket.io 的例子都遵循这个模式

```
io.sockets.on("connection", function(mySocket){
    mySocket.on("my message", function(myData){
        ...
    });
}); 
```

在我看来，这将为每个连接创建一个新的回调函数。假设每个套接字都以相同的方式响应消息，那么像这样为所有套接字定义一次处理程序会不会更节省内存：

```
function myMessageHandler(data){
    ...
}

io.sockets.on("connection", function(mySocket){
    mySocket.on("my message", myMessageHandler);
}); 
```

甚至这个：

```
io.sockets.on("my message", function(mySocket, myData){
    ...
}); 
```

如果是这样，为什么 Socket.io 会推荐一种浪费内存的做法？我们是否希望将套接字的状态变量保留在“连接”回调的闭包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:29:34.160

从另一个角度来看，第一种形式很容易阅读（因为省略了很多细节）。我认为这个表格最能说明图书馆是如何运作的。我相信，出于同样的原因，Node 网站本身也使用了类似的风格。我认为这正是它在那些地方使用的原因。

几分钟后阅读博客和讨论表明开发人员通常选择传递命名函数。尽管我确信它会带来性能提升，但主要动机无疑是可读性。我认为随着功能的增长，您会发现第二种形式（或更详尽的形式）更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T19:22:21.250

以最有效的方式定义 Socket.io：

```
 io.on('connection', function (socket) {
   socket.on('new-message', function (data) {
       io.emit('emit-message', data)
        });
   }); 
```

或者

```
 io.on('connection', (socket) => {
   console.log('user connected');

   socket.on('disconnect', () => {
       console.log('user disconnected');
        });
   }); 
```

# performance - OpenGL平铺渲染：最有效的方法？

> ID：11706433
> 
> 赞同：11
> 
> 时间：2012-07-29T03:33:10.303
> 
> 标签：performance, opengl, graphics, 2d

我正在创建一个基于图块的 2D 游戏，作为学习基本“现代”OpenGL 概念的一种方式。我正在使用带有 OpenGL 2.1 的着色器，并且熟悉渲染管道以及如何在屏幕上实际绘制几何图形。我想知道的是组织瓷砖地图以快速有效地渲染的最佳方式。我想到了几种可能的方法：

1.) 将表示单个图块（顶点和纹理坐标）的四边形存储在 VBO 中，并使用单独的`draw*`调用渲染每个图块，将其转换为屏幕上的正确位置，并使用`uniform2i`该图块在纹理图集中给出该特定图块的位置；

2.) 保留一个包含屏幕上每个图块（已计算的屏幕坐标和纹理图集坐标）的 VBO，`BufferSubData`用于每帧更新图块，但使用单个`draw*`调用；

3.) 保持包含静态 NxN“块”瓦片的 VBO，绘制许多瓦片块在屏幕上至少部分可见，并将它们每个转换到位置。

*如果可能，我想远离最后一个选项，除非渲染 64x64 的块不是太低效。瓷砖以该大小​​的块加载到内存中，即使一次只能在屏幕上看到大约 20x40 的瓷砖，我也必须一次渲染多达四个块。这种方法还会以其他几种方式使我的代码复杂化。

那么，其中哪一种是渲染图块屏幕的最有效方法？有没有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T05:38:42.847

您可以执行其中任何一项，它们可能会很好；您要渲染的内容非常非常简单。

#1*原则上*肯定会比其他选项更糟糕，因为您将绘制许多极其简单的“模型”，而不是让 GPU 在一次绘制调用上完成大量批处理工作。但是，如果您*一次只能*在屏幕上看到 20×40 = 800 个图块，那么这对于任何现代 CPU 和 GPU 来说都是微不足道的工作量（除非您正在做一些疯狂的片段着色器）。

我建议您选择对您最简单的编程，以便您可以继续开发您的游戏。我想这将是#1，或者可能是#2。**如果**您发现自己遇到性能问题，请执行 #2 或 #3 中的任何一个（64×64 听起来像是一个很好的块大小）可以让您在*程序*的绘图部分（即更新缓冲区）上花费最少的 CPU 时间(s))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T19:08:40.587

我最近一直在通过 Android 上的 OpenGL ES 2.0 自己学习现代 OpenGL。OpenGL ES 2.0 Programming Guide 建议使用“结构数组”，即

“将顶点属性一起存储在单个缓冲区中。该结构表示顶点的所有属性，并且每个顶点都有这些属性的数组。”

虽然这看起来一开始会消耗大量空间，但它允许使用 VBO 进行高效渲染，并且可以灵活地对每个图块进行纹理映射。我最近使用包含顶点、法线、颜色和纹理数据的交错数组为 Droid 2 上的 20x20 tile hex 网格做了一个 tile hex 网格。到目前为止，一切运行顺利。

# ios - 单元格显示来自先前单元格的内容，有时会崩溃

> ID：11706434
> 
> 赞同：0
> 
> 时间：2012-07-29T03:33:48.097
> 
> 标签：ios, uitableview, instance

我遇到了 UITableview 的问题，我正在获取一些数据并将其显示在自定义单元格视图中，除了两个问题之外，几乎一切都进展顺利：

*   当我向下滚动时，一些新单元格显示以前单元格的内容（尤其是**TextView cellText**）
*   有时应用程序因**[UIImageView setText:] 崩溃：无法识别的选择器**在以下行发送到实例：[cellText setText:postText];

这是我的 cellForRowAtIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   

NSString *PostCellIdentifier;

Post *info = [posts objectAtIndex:indexPath.row];
NSString *PostType = info.type;

if([PostType isEqualToString:@"quote"]) {

    PostCellIdentifier = @"NewsQuoteCell";

} else if([PostType isEqualToString:@"article"]) {

    PostCellIdentifier = @"NewsArticleCell";

} else if([PostType isEqualToString:@"picture"]) {

    PostCellIdentifier = @"NewsPictureCell";

} else if([PostType isEqualToString:@"video"]) {

    PostCellIdentifier = @"NewsVideoCell";

} else if([PostType isEqualToString:@"audio"]) {

    PostCellIdentifier = @"NewsAudioCell";

}    

NewsQuoteCell *cell = [tableView dequeueReusableCellWithIdentifier:PostCellIdentifier];

if (cell == nil) {
    cell = [[NewsQuoteCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:PostCellIdentifier];
}

UILabel *cellLabel = (UILabel *)[cell.contentView viewWithTag:1];
[cellLabel setText:info.masjid_name];

UILabel *cellDate = (UILabel *)[cell.contentView viewWithTag:2];
[cellDate setText:info.date];

UITextView *cellText = (UITextView *)[cell.contentView viewWithTag:5];
NSString *postText = info.title;
[postText stringByDecodingHTMLEntities];    
if ([postText length] > 300) { 
    postText = [postText substringToIndex:300];
    postText = [postText stringByAppendingString:@"..."];
}
[cellText setText:postText];

CGRect frame = cellText.frame;
frame.size.height = cellText.contentSize.height;
cellText.frame = frame;

UIImageView *cellImage = (UIImageView *)[cell.contentView viewWithTag:3];
NSString *imagePath = info.masjid_thumb;
[cellImage setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%@", imagePath]]];

cell.backgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"news_bg"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0)] ];  
cell.selectedBackgroundView = [ [UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"news_bg"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 0, 10, 0)] ];

if([PostType isEqualToString:@"article"]) {

    cellText.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgrText = [[UITapGestureRecognizer alloc] 
                                       initWithTarget:self action:@selector(handleTapArticle:)];
    [cellText setTag:indexPath.row];
    [cellText addGestureRecognizer:pgrText];

    UIImageView *cellMedia = (UIImageView *)[cell.contentView viewWithTag:10];

    cellMedia.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgr = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self action:@selector(handleTapArticle:)];
    [cellMedia setTag:indexPath.row];
    [cellMedia addGestureRecognizer:pgr];

} else if ([PostType isEqualToString:@"video"]) {

    cellText.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgrText = [[UITapGestureRecognizer alloc] 
                                       initWithTarget:self action:@selector(handleTap:)];
    [cellText setTag:indexPath.row];
    [cellText addGestureRecognizer:pgrText];

    UIImageView *cellMedia = (UIImageView *)[cell.contentView viewWithTag:10];

    cellMedia.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgr = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self action:@selector(handleTap:)];
    [cellMedia setTag:indexPath.row];
    [cellMedia addGestureRecognizer:pgr];

} else if ([PostType isEqualToString:@"audio"]) {

    cellText.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgrText = [[UITapGestureRecognizer alloc] 
                                       initWithTarget:self action:@selector(handleTap:)];
    [cellText setTag:indexPath.row];
    [cellText addGestureRecognizer:pgrText];

    UIImageView *cellMedia = (UIImageView *)[cell.contentView viewWithTag:10];

    cellMedia.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgr = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self action:@selector(handleTap:)];
    [cellMedia setTag:indexPath.row];
    [cellMedia addGestureRecognizer:pgr];

} else if ([PostType isEqualToString:@"picture"]) {

    cellText.layer.shadowColor = [[UIColor blackColor] CGColor];
    cellText.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
    cellText.layer.shadowOpacity = 0.5f;
    cellText.layer.shadowRadius = 0.5f;

    UIImageView *cellMedia = (UIImageView *)[cell.contentView viewWithTag:7];

    NSString *mediaPath = info.media;

   NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:mediaPath]];
    AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request success:^(UIImage *image) {

        UIImage* scaled2 = [image scaleToFitSize:(CGSize){284, 284}];
        [cellMedia setImage:scaled2];

        CGRect frame1 = cellMedia.frame;
        frame1.size.width = 284;
        frame1.size.height = scaled2.size.height;
        cellMedia.frame = frame1;

    }];
    [operation start];

    cellMedia.userInteractionEnabled = YES;
    UITapGestureRecognizer *pgr = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self action:@selector(handleTapPicture:)];
    [cellMedia setTag:indexPath.row];
    [cellMedia addGestureRecognizer:pgr];

    if ([postText length] > 300) { 
        postText = [postText substringToIndex:300];
        postText = [postText stringByAppendingString:@"..."];
    }
    [cellText setText:postText];

    CGRect frame = cellText.frame;

    frame.size.height = cellText.contentSize.height;
    frame.origin.y = cellMedia.frame.origin.y + (cellMedia.frame.size.height - cellText.contentSize.height);
   cellText.frame = frame;

}

return cell;

} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:58:53.913

I assume you have created `NewsQuoteCell` in a seperate nib file. If thats the case why dont you setup proper `IBOutlet`s to bind different components like the cellLabel, cellDate, cellText etc. That way you don't have to retrieve these components using `viewWithTag`.

And you are probably doing something funny with the tag. Have you setup the tags properly? One definite problem is your second error message. You are retrieving a `UIImageView` with the `viewWithTag` call and referencing it with `UITextView`. Make sure that tags are set up properly. And it never hurts to set the tag values to something unique, like 101, 102,103... etc.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:03:35.190

It looks like you have a subclass of UITableViewCell called NewsQuoteCell. You can override the prepareForReuse method in the NewsQuoteCell class to fix your new cell shows content of previous cell issue. The other issue seemed to have to do with the your tag for view number 5 was not a UITextView but a UIImageView. I would double check your NewsQuoteCell's implementation file.

# installation - Dynamics AX 2012 安装中缺少 AOT

> ID：11706444
> 
> 赞同：0
> 
> 时间：2012-07-29T03:36:47.890
> 
> 标签：installation, axapta, microsoft-dynamics

我已经成功安装了 Dynamics ax 2012 的 beta 版本，我尝试使用业务用户、开发人员和管理人员，但在工作区中我找不到 AOT。我同步表，两次放许可证，然后编译和同步，但找不到 AOT。如果有人在安装方案方面帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:39:31.447

AOT 可以在开发工作区中找到。要打开开发工作区，请使用`Ctrl`++ 。要打开 AOT，请使用+ 。`Shift``W``Ctrl``D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T14:09:17.057

我遇到了类似的问题，在安装 AX2012 R2 并提供许可证信息后，我无法打开 AOT。这是我第三次安装 AX2012 来测试我们的升级过程，每隔一次都可以正常工作，并且这是在具有相同用户权限的同一台服务器上。唯一的区别是自从上次工作以来我已经安装了 CU7 的二进制部分。所以我卸载了所有 AX 组件、缓存文件、遗留的临时文件和注册表项，并在没有 CU7 的情况下重新安装，现在它工作正常。根据我的测试，这不适用于 CU7，因此我们将在升级完成后安装 CU7。

# sql-server-2008 - 在 SQL Server 2008 R2 中创建一个 localhost 实例

> ID：11706445
> 
> 赞同：0
> 
> 时间：2012-07-29T03:37:17.970
> 
> 标签：sql-server-2008, sql-server-2008-r2

我的朋友将与我分享一个巨大的 C# 源代码.. 那里的所有 54 个项目都在他们的 nhibernate 配置中使用了一个连接字符串，如下所示：

服务器=localhost；数据库=asd_db；集成安全=false；用户ID=XXX；密码=XXXXX；应用程序名称=ASD 1.2 WebApp；

我有一台新笔记本电脑，我将安装 SQL Server 2008 R2，我对它的安装方式有点困惑......

在安装过程中，我应该怎么做才能创建`LOCALHOST`在 SQL Server 2008 R2 中命名的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:40:47.673

I think you should just install SQL Server as a "default instance", and create the login accounts and you should be fine. Localhost will just use the ip address in your hosts file (127.0.0.1) to connect to the SQL Server instance on the default port.

# javascript - 在一定长度的页面上触发 Jquery

> ID：11706447
> 
> 赞同：1
> 
> 时间：2012-07-29T03:37:24.643
> 
> 标签：javascript, jquery, scroll

我试图弄清楚当用户滚动到页面中间时如何触发 jquery 动画。有没有办法设置一个监听器来查看这个人是否滚动到页面的一半来激活jquery代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:19:54.530

使用 jQuery，您可以[将事件处理程序附加到滚动事件](http://api.jquery.com/scroll/)，这将让您在窗口滚动时侦听并确定用户是否滚动了适当的量。

```
$(window).scroll(function () { 
    if (($(window).scrollTop()) > ($(document).height() / 2)) {
        // Run animation here
    }
}); 
```

[http://jsfiddle.net/ult_combo/XdqPJ/1/](http://jsfiddle.net/ult_combo/XdqPJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:44:48.060

这么想..你可以看看检查页面的部分使用；setInterval(name_Of_Function,1000);

每秒运行一次，然后检查是否存在；window.pageYOffset // 为您提供页面的当前水平窗口滚动位置。

Firebug 有助于获取有关这些函数的更多信息。请记住检查所有主要浏览器，因为不同浏览器之间的实现或返回的值可能略有不同。

我找到了很好的参考页面； [http://www.softcomplex.com/docs/get_window_size_and_scrollbar_position.html](http://www.softcomplex.com/docs/get_window_size_and_scrollbar_position.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T04:08:33.487

> 有没有办法设置一个监听器来查看这个人是否滚动到页面的一半来激活jquery代码？

您可以通过以下方式获取用户滚动的金额：

```
$("html,body").scrollTop(); 
```

因此，要在页面中间触发一个事件：

```
if (($("html,body").scrollTop()) > ($("html,body").height() / 2))
{
    // Code that will be triggered
} 
```

您需要一个计时器来不断检查这一点。您可以`setInterval()`在 Javascript 中使用重复执行一个函数来检查这一点。

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

# android - 使用 Intent 在 Android 中播放多个 YouTube 视频

> ID：11706451
> 
> 赞同：1
> 
> 时间：2012-07-29T03:38:58.030
> 
> 标签：android, android-intent, youtube, playlist

因此，我正在尝试制作将遍历 youtube url 列表的应用程序。为了播放视频，我使用以下代码：

```
startActivityForResult(new Intent(Intent.ACTION_VIEW, Uri.parse(url[i])), 0); 
```

用户按下后退按钮后，此代码将循环到下一个视频。

我可以在不点击任何内容的情况下启动下一个视频吗？YouTube 应用程序是否触发了我可以设置广播接收器来收听的任何事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:20:21.323

如果您想播放多个 YouTube 视频，您必须使用[YouTube API 。](https://developers.google.com/youtube/android/player/)此 API 可让您在应用中全屏播放 YouTube 视频。有一个示例应用程序显示了如何使用该库。

请参阅[此](https://stackoverflow.com/a/14953429/1726308)内容以了解如何启动 YouTube 播放列表。

# ruby-on-rails - 使用计算数据在客户端创建可排序表

> ID：11706456
> 
> 赞同：0
> 
> 时间：2012-07-29T03:41:19.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个显示名称的表，以及与我使用循环和每个值的进度条计算的每个名称相对应的两个值。

代码看起来像这样，

```
<table>
<thead>
<th>Name</th>
<th>Value1</th>
<th>Value2</th>
</thead>
<tbody>
<% i=0 %>
<% j=0 %>
<% @department.members.each do |members| %>
<td><td><% members.name %><td>
<% members.evals.each do |evals| %>
<% i+=value1 * something %>
<% j+=value2 * something %>
<% end %>
<tr>
<td>
<div class="progress"><div class="bar" style="width: <%= (i*10).round() %>%;"></div></div>
<%= i %>
</td>
<td>
<div class="progress"><div class="bar" style="width: <%= (j*10).round() %>%;"></div></div>
<%= j %>
</td>
<% end %>
</tbody>
</table> 
```

我希望允许用户在不更改客户端页面的情况下单击头部并动态排序此信息，并在表格上方创建一个下拉菜单以允许用户执行相同操作。“按 value2 排序”和“按 value1 排序”。

我正在使用引导程序，所以我不想使用`DataTables`. 甚至他们的引导主题看起来也不像 boostrap。我只想要一个简单的排序，同时保留我当前的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:10:24.490

您需要使用 JavaScript 对表进行排序，看看使用 jQuery的[可排序表。](http://tablesorter.com/docs/)

您始终可以编辑 CSS 文件以匹配您的布局或与引导程序的布局匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:17:58.150

数据表（http://datatables.net/release-datatables/examples/basic_init/zero_config.html）

# javascript - 在追加之前修改元素的位置和旋转

> ID：11706457
> 
> 赞同：1
> 
> 时间：2012-07-29T03:41:28.210
> 
> 标签：javascript, jquery

我是一个绝望的 javascript 新手，我正在尝试将动态创建的图像元素插入 DOM，同时随机定位和旋转它们。

目前我基本上是这样做的：

1.  创建一个包含所有图像文件路径的数组
2.  使用动态创建的名称创建一个 div 并插入 DOM
3.  生成20个不同的图片实例并插入到DOM中对应的div
4.  随机旋转每个图像并随机定位每个图像。对于旋转，我使用 jQuery 旋转插件。

我有一种感觉，因为我首先将元素插入 DOM，然后操纵它们的位置和旋转，所以我正在以一种非常愚蠢的方式做这一切。

有没有办法先在虚拟内存中做所有事情，最后在所有操作都完成后将元素插入 DOM？

这是我当前的代码（对不起，noobish 质量）：

```
$(document).ready(function(){

var wrapper = $('#wrapper'),

function movieCreator(movieName, generateAmount){

var contents=new Array (

'<img class="film '+movieName+'" src="images/'+movieName+'01.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'02.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'03.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'04.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'05.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'06.png" alt="'+movieName+'" />',

'<img class="film '+movieName+'" src="images/'+movieName+'07.png" alt="'+movieName+'" />'   

);

var tmp='';
var dynamicIdName = 'box'+movieName;
var dynamicIdCall = '#box'+movieName;
wrapper.append("<div id='"+dynamicIdName+"' class='moviebox'></div>");

var random
for (i=0; i < generateAmount;){
random = Math.floor(Math.random()*contents.length);
tmp += contents[random];
i++
};

$(dynamicIdCall).append(tmp);

$(".film").each(function(){ 
    randomrot = Math.floor(Math.random()*360); 
    randomposX = Math.floor(Math.random()*200); 
    randomposY = Math.floor(Math.random()*200); 
    $(this).rotate(randomrot);
    $(this).css({'top': randomposY -40});
    $(this).css({'left': randomposX -40});

});

    wrapper.on('click','.film',function(){
    imageControl(this);
    });

} //end movieCreator

    movieCreator('terminator', 20);
    movieCreator('rambo', 20);
    movieCreator('godfather', 20);
    movieCreator('matrix', 20);
    movieCreator('kingkong', 20);

}); //dom ready 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:29:42.097

我试图在这里涵盖很多东西......

你有一个意想不到的`,`：

```
var wrapper = $('#wrapper'),
                        ---^ 
```

您可以使用`[]`代替`new Array()`：

```
var contents = [ ... ] 
```

小心，`i`是全球性的，使用`var`. 此外，您可以移动`i++`到`for`循环：

```
for (var i = 0; i < generateAmount; i++){
   ---^---                       ---^--- 
```

这些是常见的初学者错误。尝试首先掌握这些概念，然后如果您想要最佳性能，最后添加所有内容。然后你可以重构一切，我评论了几件事：

```
var $wrap = $('#wrapper')

var movieCreator = function (name, ammount) {

  // Utility function to keep it DRY
  var rand = function (len) {
    return ~~(Math.random() * len) // ~~ trick Math.floor
  }

  // Cache your container in a variable
  var $container = $('<div/>', {
    id: 'box' + name,
    'class': 'moviebox'
  })

  // Generate iamges with an array
  // to keep it DRY
  var imgs = []
  for (var i = 0; i < 7; i++) {
    imgs.push(
      '<img ' +
      'class="film '+ name +'"'+
      'src="images/'+ name +'0'+ i + '.png"'+ // If no with more than 10...
      'alt="'+ name +'"'+
      '/>'
    )
  }

  var randImgs = []
  for (var i = 0; i < ammount; i++)
    randImgs.push(imgs[rand(imgs.length)])

  // Attach events before inserting in DOM
  // that way you don't need delegation with on()
  var $imgs = $(randImgs.join(''))
  $imgs
  .click(function(){
    imageControl(this)
  })
  .each(function(){
    var rot = rand(360),
        posX = rand(200),
        posY = rand(200)
    $(this)
      .css({
        top: posY - 40 + 'px', // use units (px, em)
        left: posX - 40 + 'px'
      })
      .rotate(rot)
  })

  // Finally insert in DOM. It already has
  // all events attached and position changed
  $wrap.append($container.append($imgs))
} 
```

# c++ - Linking tesseract libs

> ID：11706464
> 
> 赞同：0
> 
> 时间：2012-07-29T03:43:05.250
> 
> 标签：c++, ocr, tesseract

I'm having trouble using tesseract. I've downloaded the source code and compiled successfully. Then I created a project in VC++ and I'm trying to do the first steps.

I created a simple program and included

```
#include <baseapi.h> 
```

On project properties -> Linker -> Additional Dependencies i`ve put all the libs that tesseract generated

> ccmain.lib ccstruct.lib ccutil.lib classify.lib cube.lib cutil.lib dict.lib image.lib libtesseract_tessopt.lib libtesseract_training.lib neural_networks.lib textord.lib viewer.lib wordrec.lib

I also set the path of libs on Additional Libraries Directories. It seems to recognize the libs. But the problem is that i`m getting the following error:

```
fatal error C1083: Cannot open include file: 'baseapi.h': No such file or directory 
```

Can anyone help me? I`m just starting and it is difficult.

As an update, I've set the paths and included the files on my solution. But I'm getting different errors on ccutil.h.

**fatal error C1083: Cannot open include file: 'pthread.h': No such file or directory **

Due to this code

```
#ifdef WIN32
#include <windows.h>
#else
#include <pthread.h>
#include <semaphore.h>
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:02:56.207

On your project you need to add the path to the tesseract headers in "Additional Include Directories".

# android - graph value on a-chart engine for android

> ID：11706465
> 
> 赞同：-1
> 
> 时间：2012-07-29T03:43:05.627
> 
> 标签：android, achartengine

I am new to android programing.

Can some please guide me how can i get the graph value of specific co-ordinates,

i,e if i click on some points on the graph.

More specifically if my finger taps on any point on the screen of graph,

a label should pop up saying the values of the coordinate.

Please give in suggestion

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:02:43.390

您正在使用的库的名称是 AChartEngine。[要回答您的问题，请在此处](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)查看示例。从第 170 行开始。

# ruby-on-rails-3.1 - rails 功能测试不会破坏

> ID：11706475
> 
> 赞同：1
> 
> 时间：2012-07-29T03:45:46.737
> 
> 标签：ruby-on-rails-3.1

我有一个功能测试一直失败，我不知道为什么。这是论坛的一部分，测试是为了确保帖子的作者被允许删除他们自己的帖子。

当我手动尝试时，我能够在控制台和浏览器中销毁帖子，但我无法弄清楚出了什么问题。

这是控制器的销毁操作：

```
def destroy
  @post = Post.find(params[:id])
  if @post.player_id == current_player || current_player.admin == true # I can't delete anyone else's posts unless I am the administrator.
if @post.topic.posts_count > 1 # if topic is more than one post, delete just the post
    @post.destroy
    flash[:notice] = "Post was successfully destroyed."
    redirect_to topic_path(@post.topic)
else # else, if the topic is only one post, delete the whole thing
  @post.topic.destroy
  flash[:notice] = "Topic was successfully deleted."
  redirect_to forum_path(@post.forum)
    end
  else # You are not the admin or the topic starter
    flash[:notice] = "You do not have rights to delete this post."
    redirect_to topic_path(@post.topic)
  end
end 
```

这是 post.yml 文件：

```
one:
  id: 1
  body: MyText
  forum_id: 1
  topic_id: 1
  player_id: 2
two:
  id: 2
  body: MyText
  forum_id: 1
  topic_id: 1
  player_id: 2
three:
  id: 3
  body: MyText
  forum_id: 1
  topic_id: 2
  player_id: 3 
```

这是不断失败的测试：

```
test "should destroy post as author" do
  sign_in players(:player2)
  assert_difference('Post.count', -1) do # Line 41
    delete :destroy, :id => posts(:one)
  end
  assert_redirected_to topic_url(assigns(:topic))
end 
```

这是我得到的错误：

```
1) Failure: test_should_destroy_post_as_author(PostsControllerTest) [../test/functional/posts_controller_test.rb:41]:
"Post.count" didn't change by -1.
<2> expected but was <3>. 
```

我将不胜感激任何帮助。当我确定答案很简单但我想念的东西时，我觉得我的头撞到了墙上。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:33:30.497

我不确定为什么那个特定的措辞不起作用，但我修复了它，这样当我像在控制台中那样销毁帖子时，测试通过了。

代替：`delete :destroy, :id => @post`

我用了：`Post.destroy(@post)`

# java - 为什么我在 Java 中的数学错误？

> ID：11706477
> 
> 赞同：0
> 
> 时间：2012-07-29T03:47:10.420
> 
> 标签：java

在下面的代码中，我看不出 T1 和 T3 有什么不同。当然，我的计算器说它们不是。

```
public class longTest {
    public static final long T1 = 24 * 60 * 60 * 1000 * 30;
    public static final long T2 = 24 * 60 * 60 * 1000;
    public static final long T3 = T2 * 30;

    public static void main(String[] args) {

        System.out.println(T1);
        System.out.println(T2);
        System.out.println(T3);
    }
} 
```

那么为什么我会得到以下输出：

```
-1702967296
86400000
2592000000 
```

在这个示例程序中也不仅仅是 System.out.println。当我在 Eclipse 中有 T1 并将鼠标悬停在变量上时，我会得到一个显示相同值的光泽。

> java版本“1.6.0_33”OSX

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T03:49:36.563

您正在溢出，因为 an`int`不能大于 2,147,483,647。最终值不在`long`类型范围之外，但算术本身将数字视为`int`除非您明确声明它们是`long`值。

试试这个：

```
public class LongTest {

    public static final long T1 = 24L * 60 * 60 * 1000 * 30;
    public static final long T2 = 24L * 60 * 60 * 1000;
    public static final long T3 = T2 * 30;

    public static void main(String[] args) {
        System.out.println(T1);
        System.out.println(T2);
        System.out.println(T3);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T03:58:37.067

正如 paranoid-android 所说，这是一个`int`溢出问题。要了解 T3 为何不同，请参见下文。

```
public static final long T1 = 24 * 60 * 60 * 1000 * 30; 
```

这里所有的数字都是`int`s 所以这和

```
public static final long T1 = (long) (24 * 60 * 60 * 1000 * 30); 
```

部分溢出，`int`所以隐式转换`long`来得太晚，以避免精度损失。在

```
public static final long T2 = 24 * 60 * 60 * 1000; 
```

你有相同的，但它的数字较小，适合 32 位`int`（正值为 31 位）和 64 位`long`。

```
public static final long T3 = T2 * 30; 
```

这将 a 乘以`long`64`int`位算术也是如此，这就是它具有不同值的原因。
相当于

```
public static final long T3 = T2 * (long) 30; 
```

这里的隐含`long`足够早以防止精度损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T03:56:08.063

这是因为在 中`T1`，所有的数字都是整数，所以数学运算是在整数上执行的，然后分配给一个长整数。`T3`将 Long 与 Integer 相乘，因此它在进行数学运算时使用 Long，结果符合预期。

要修复它，您需要将数字常量更改为长：

```
public class longTest {
   public static final long T1 = 24L * 60L * 60L * 1000L * 30L;
   public static final long T2 = 24 * 60 * 60 * 1000;
   public static final long T3 = T2 * 30;

   public static void main(String[] args) {

      System.out.println(T1);
      System.out.println(T2);
      System.out.println(T3);
   }

} 
```

要理解为什么会得到一个负数：当它到达最大的正数 (2^31 -1) 时，它会环绕到最大的负数 (-2^31) 并从那里上升。这种包装可以发生多次，所以当你这样做时：

```
public static final int T4 = 100 * 100 * 100 * 100 * 100;// = 1410065408 WHAT!?!? 
```

你得到 100 亿，这比 Integer 所能容纳的要大。所以，一旦它达到 2,147,483,647，它接下来会进入 -2,147,483,648 等等。所以，对于 100 亿，它是这样的：

2,147,483,647（转为负数，我们还有 7,852,516,353 剩余）

-2,147,483,648（一直计数到 Integer.MAX_INT）

2,147,483,647（再次转为负数，我们还有 3,557,549,057 剩余）

-2,147,483,648（加上剩余的 3,557,549,058）

现在我们有：1,410,065,408

# google-app-engine - Google App Engine app.yaml 网址映射

> ID：11706482
> 
> 赞同：2
> 
> 时间：2012-07-29T03:47:38.067
> 
> 标签：google-app-engine

因此 app.yaml 文件的一部分如下所示（至少在 GAE 教程中）：

```
handlers:
- url: /.*
  script: main.app 
```

但是，我也看到它看起来像这样：

```
handlers:
- url: /*
  script: main.py 
```

第二个错了吗？为什么是“。” 必要的，它说明了什么？为什么脚本显然是“.py”文件时以“.app”结尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:53:12.207

.app 不是文件扩展名！main.app 表示来自 main.py 的 app 对象；app 对象必须是 WSGIApplication 对象

主要.py：

```
import webapp

def HwHandler(webapp.RequestHandler):
   def get(self):
       self.response.out.write('Hello world')

appvar = webapp.WSGIApplication([('/', HwHandler)],debug = True) 
```

应用程序.yaml：

```
handlers:
- url: .*
  script: main.appvar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:54:44.900

.* 是匹配所有内容的正则表达式。对正则表达式进行谷歌搜索。main.app 是用于 python 2.7 的 wsgi 应用程序的符号。

main.py 可能适用于 python 2.5 应用程序。

# android - 我如何让按钮留在android中的一个地方

> ID：11706486
> 
> 赞同：-1
> 
> 时间：2012-07-29T03:48:03.500
> 
> 标签：android, android-layout

好的，这个问题已经困扰了我大约 2 周了，通过我所做的所有研究，我仍然无法弄清楚这一点。我有 6 个饼图形式的按钮。当我在 XML 中进行布局时，我可以让它们看起来很好。

![我想要实现的视图](../Images/e383860ff03e92abdaf9937efcbc38bc.png)

当我将其更改为平板电脑尺寸或其他尺寸的屏幕时，我的所有按钮都会移动并且看起来很糟糕。

![不好的看法](../Images/ccf747155be73ea4bfee2e257bdbd82d.png)

如何使这些按钮在任何屏幕尺寸上保持静止？我知道我必须在适当的文件夹中有不同的图像大小，我打算这样做，但我需要知道是否有办法将这些图像锁定在 XML 文件中的某个位置，或者我需要做什么来使其正常工作。一如既往，非常感谢任何和所有帮助，如果我对我的问题不够清楚，我会回答任何问题。谢谢

这是我的 XML

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/mainback" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="25dp"
    android:background="@drawable/ipadcollegesm" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignRight="@+id/button1"
    android:layout_marginBottom="92dp"
    android:background="@drawable/ipadmusicsm" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button2"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/button1"
    android:background="@drawable/ipadfamilysm" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button3"
    android:layout_alignTop="@+id/button1"
    android:background="@drawable/ipadyouthsm" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button4"
    android:layout_below="@+id/button3"
    android:layout_marginTop="14dp"
    android:background="@drawable/ipadlinkssm" />

<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button5"
    android:layout_alignBottom="@+id/button5"
    android:layout_toLeftOf="@+id/button4"
    android:background="@drawable/ipadpodcastsm" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:09:45.013

您为每个按钮提供了固定的 dp，不同的设备具有不同的分辨率。

为了以最少的工作量在多个设备上进行这项工作，我建议添加另一个相对布局作为根，并将重力设置为中心。这样，布局总是在屏幕的中心。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:background="@drawable/mainback">
   <RelativeLayout 
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">

      *** Your buttons would be here ***

    </RelativeLayout>
</RelativeLayout> 
```

另一种方法是为每个屏幕尺寸创建一个尺寸文件，但上面可能是最简单的方法。

# php - JQM - 获取复选框值以放入数据库

> ID：11706492
> 
> 赞同：0
> 
> 时间：2012-07-29T03:50:41.607
> 
> 标签：php, jquery, mysql

我需要检索复选框的状态并将其值插入 mysql 数据库。

做这个的最好方式是什么？

我有一个提交按钮，我希望我可以将状态传递到另一个页面（对话框）并在那里插入值，就像我对带有 php 变量的帖子所做的那样。

朝正确的方向踢一点将不胜感激。

```
 <label for="checker">a checkbox:</label>
<select name="checker" id="checker" data-role="slider">
    <option value="off">No</option>
    <option value="on">Yes</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:05:48.607

Checkbox 像其他输入一样工作，U 只需要使用相同的名称 ex:"checkvalue[]" 他们将收集所有复选框值。

# iphone - iPhone/iPad 游戏应用开发工具

> ID：11706493
> 
> 赞同：0
> 
> 时间：2012-07-29T03:50:58.363
> 
> 标签：iphone, xcode, ipad, xamarin.ios, unity3d

所以我在过去的一周里研究了所有可以用来创建 iPhone 或 iPad 应用程序游戏的不同工具，但我仍然没有得出关于使用哪种软件（Xcode、unity、mono touch 或 oolong 引擎）的结论.

我想要创建的是简单而有趣的游戏，例如（水果忍者或割绳子）。

我试过研究上述游戏使用的软件，但没有运气。

谁能指出我正确的方向？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T13:38:17.597

对于我们“单触者”来说，在 iPhone/iPad 上开发 3D 游戏的最佳工具还不存在，恕我直言。

MonoTouch MonoGame 还是太局限了，Cocos2D 缺少 3D 太复杂繁琐。

但该解决方案将在未来来自 Apple“Scene Kit”框架。

SceneKit 是对 OpenGL 的直观封装，类似于 Apple 在 OSX Mountain Lion 中引入的 Core Animation 数据可视化 API，与 Apple 其他图形框架的 API 保持一致。Scene Kit 旨在导入 COLLADA 3D 对象，并提供用于操作场景、灯光、相机、网格、边界体积、几何体、材质和着色器的直观工具。

目前 SceneKit 仅在 Mountain Lion 上可用，但未来它将在 iOS 平台上可用。而且我确信 Xamarin 人员将准备好为我们提供该库的 MonoTouch 版本，当它将包含在下一个 iOS SDK 中时。

您可以在此处阅读有关 Scene Kit 框架的信息：

[山狮场景套件 - Ars Technica 评论](http://arstechnica.com/apple/2012/07/os-x-10-8/16/#scene-kit)

[Apple WWDC 2012 Session 504 视频：介绍 Scene Kit](https://developer.apple.com/videos/wwdc/2012/?include=504#504)

[Apple WWDC 2012 Session 504 幻灯片：介绍场景工具包](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_504__introducing_scene_kit.pdf)

[由 iOS 课程共同创建者 Jonathan Blocksom 撰写的 Mountain Lion 中的 SceneKit 评论](http://weblog.bignerdranch.com/754-scenekit-in-mountain-lion/)

[场景工具包编程指南](https://developer.apple.com/library/mac/#documentation/3DDrawing/Conceptual/SceneKit_PG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012282)

[场景工具包编辑器](http://developer.apple.com/library/ios/#recipes/xcode_help-scene_kit_editor/Articles/Adjusting3DScenes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:27:28.913

在这里您可以找到与 Cocos2D 一起使用的工具的详细列表：http: [//abitofcode.com/2012/07/cocos2d-useful-tools/](http://abitofcode.com/2012/07/cocos2d-useful-tools/)

如果你愿意，你可以在[这里](http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1)找到一个教程，它解释了如何使用 Cocos2D 制作水果忍者游戏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T04:19:51.253

嗯，首先，你需要确定你的游戏是什么，2D 还是 3D，根据你的问题，你想要一个 2D 游戏，这很好，互联网上有很多引擎，有很多资源和教程，你可以试试[Cocos2d](http://www.cocos2d-iphone.org/)，它有非常强大的功能，它的社区很棒。

[您可以在此站点](http://www.moddb.com/engines/)中查看游戏引擎列表。

快乐编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T18:24:20.343

[Corona](http://www.coronalabs.com/products/corona-sdk/)可能是最好的选择。我自己没有在其中制作过游戏，但我一直在为 iOS 开发一个带有 Lua 界面的 2D 游戏引擎。[Corona](http://www.coronalabs.com/products/corona-sdk/)也是用 Lua 编程的，Lua 是一种非常流行（在游戏行业）且易于学习的脚本语言。[Corona](http://www.coronalabs.com/products/corona-sdk/)似乎有一个很好的工具链，并且有很多第三方软件可以帮助您设计关卡、精灵等。互联网上有很多关于 Cocoas 2D 的讨论，如果您使用谷歌搜索的话。共识似乎是[Corona](http://www.coronalabs.com/products/corona-sdk/)更易于使用，但 Cocos2D 具有来自开源的优势：易于定制、与其他代码合并、社区等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T05:17:00.090

我只有两个问题。

*   您已经知道哪些语言？
*   你想以后做跨平台到安卓吗？

对于 Cocos2D，它是 iOS 特定的（我认为？）并且需要完全重写以支持 Android。

我熟悉 XNA 和 C#，所以使用[MonoGame](http://monogame.codeplex.com/)是我的第一选择。我会在其中构建自己的游戏引擎，但随后使用相同的引擎几乎没有改变，我应该能够让它也运行在 Android、Windows Phone 7、Windows、Linux 和 OSX 上。

[您可以在此处](http://monogame.codeplex.com/wikipage?title=Platform%20support%20matrix&referringTitle=Documentation)查看平台支持矩阵

使用 Unity3D 甚至 UDK 之类的东西很方便，因为引擎是预先构建的，你可以用它们为 2D 游戏做一些令人惊奇的事情，但要让它们做你想做的事情可能会很棘手。

# ruby-on-rails - 警告：“无法批量分配受保护的属性：created_at，updated_at”，当我使用 gem ''omniauth-identity 时

> ID：11706497
> 
> 赞同：0
> 
> 时间：2012-07-29T03:52:06.393
> 
> 标签：ruby-on-rails, gem, omniauth, identity, mass-assignment

我收到这个错误

```
ActiveModel::MassAssignmentSecurity::Error in SessionsController#create

Can't mass-assign protected attributes: created_at, updated_at 
```

我想我可以添加一些代码来解决这个问题。

```
class User < ActiveRecord::Base
  attr_accessible :email, :nickname, :authentications_attributes, :created_at, :updated_at 
```

**为什么 Omniauth 会更改 created_at 和 updated_at？除了添加“attr_accessible :created_at, :updated_at”，还有其他方法吗？**

这是我的模型/user.rb

```
class User < ActiveRecord::Base
  attr_accessible :email, :nickname, :authentications_attributes, :created_at, :updated_at
  validates :nickname, :presence => true
  validates :email, :presence => true, :uniqueness => true
  has_many :authentications

  accepts_nested_attributes_for :authentications

  class << self
    def from_auth(auth)
      Authentication.find_by_provider_and_uid(auth[:provider],
                                              auth[:uid]).try(:user) ||
        create!(
          :nickname => auth[:info][:nickname],
          :email => auth[:info][:email],
          :authentications_attributes => [
            Authentication.new(:provider => auth[:provider],
                               :uid => auth[:uid]
                              ).attributes
      ])
    end
  end

end 
```

这是我的模型/identity.rb

```
class Identity < OmniAuth::Identity::Models::ActiveRecord
  attr_accessible :nickname, :email, :password, :password_confirmation, :authentications_attributes
  validates_presence_of :nickname, :email
  validates_uniqueness_of :nickname, :email
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
end 
```

这是我的模型/authentication.rb

```
class Authentication < ActiveRecord::Base
  attr_accessible :user_id, :provider, :uid, :authentications_attributes, :created_at, :updated_at
  validates :provider, :presence => true, :uniqueness => {:scope => :user_id}
  validates :uid, :presence => true, :uniqueness => {:scope => :provider}
  belongs_to :user
end 
```

这是我的控制器/sessions_controller.rb

```
class SessionsController < ApplicationController
  def create
    user = User.from_auth(request.env['omniauth.auth'])
    session[:user_id] = user.id
    flash[:notice] = "Welcome #{user.nickname}"
    redirect_to root_path
  end
end 
```

感谢您的想法和指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:44:55.687

问题是这段代码：

```
Authentication.new(:provider => auth[:provider],
                   :uid => auth[:uid]
                  ).attributes 
```

这将返回完整的属性集，包括 created_at 和 updated_at 日期，然后您将其传递给 create，因此进行批量分配。

您可以创建用户，然后像这样构建属性：

```
authentication = Authentication.find_by_provider_and_uid(auth[:provider], 
                                                       auth[:uid]).try(:user)

unless authentication
  user = create!(
      :nickname => auth[:info][:nickname],
      :email => auth[:info][:email])
  user.authentications.build(:provider => auth[:provider])
end 
```

# function - recv 函数是如何工作的-winsock 函数-

> ID：11706498
> 
> 赞同：0
> 
> 时间：2012-07-29T03:52:39.767
> 
> 标签：function, winsock

我只是想知道 recv 函数是如何工作的，当我使用 recv 函数时，它会等到服务器/客户端发送一些类似于接受函数的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:33:55.147

使用阻塞套接字，是的 - 请参阅[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121.aspx)。

# python - 以最少的元素比较对 5 个元素进行排序

> ID：11706501
> 
> 赞同：6
> 
> 时间：2012-07-29T03:53:09.177
> 
> 标签：python, sorting, knuth

我必须在 python 中使用元素之间的最小比较次数来对排序 5 个元素的列表的执行计划进行建模。除此之外，复杂性无关紧要。

结果是一个对列表，表示在另一个时间对列表进行排序所需的比较。

我知道有一种算法可以在 7 次比较中做到这一点（元素之间，总是，而不是复杂性），但我找不到可读的（对我来说）版本。

如何对 7 个比较中的 5 个元素进行排序，并为排序构建“执行计划”？

PD：**不是**作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:09:48.847

好吧，有 5!=120 种方式可以对元素进行排序。每次比较都会为您提供一点信息，因此您至少需要进行 k 次比较，其中 2^k >= 120。您可以检查 2^7 = 128，因此 7 是您需要执行的最少比较次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T06:28:52.060

这符合您对排序的描述`5 elements in 7 comparisons`：

```
import random

n=5
ran=[int(n*random.random()) for i in xrange(n)]
print ran

def selection_sort(li):  
    l=li[:]                  
    sl=[]        
    i=1         
    while len(l):              
        lowest=l[0]            
        for x in l:            
            if x<lowest:      
                lowest=x  
        sl.append(lowest)  
        l.remove(lowest)     
        print i  
        i+=1
    return sl

print selection_sort(ran) 
```

这使用不是最有效的[选择排序](http://en.wikipedia.org/wiki/Selection_sort)，但确实使用很少的比较。

这可以缩短为：

```
def ss(li):  
    l=li[:]                  
    sl=[]                 
    while len(l):              
        sl.append(l.pop(l.index(min(l))))       
    return sl 
```

在任何一种情况下，都会打印如下内容：

```
[0, 2, 1, 1, 4]
1
2
3
4
5
[0, 1, 1, 2, 4] 
```

Perl 有一个可爱的模块，叫做[Algorithm::Networksort](http://search.cpan.org/dist/Algorithm-Networksort/)，它允许你玩这些。Knuth 为少数比较器引用了 Bose-Nelson 算法，您可以[在此处查看](http://pages.ripco.net/~jgamble/nw.html)。

**编辑**

插入[排序](http://en.wikipedia.org/wiki/Insertion_sort)也很有效：

```
def InsertionSort(l):
    """ sorts l in place using an insertion sort """
    for j in range(1, len(l)):
        key = l[j]
        i = j - 1
        while (i >=0) and (l[i] > key):
            l[i+1] = l[i]
            i = i - 1

        l[i+1] = key 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:59:19.290

我最终使用了带有自定义比较运算符的常规排序算法（插入排序），该运算符中断排序并逐步构建执行计划以恢复或重现该过程。

这很丑：该函数引发了一个异常，封装了继续排序所需的信息。然后可以使用新信息重试排序，可能会再次中止。

由于排序尝试发生在 http 请求的范围内，因此性能对我来说不是问题。

# python - Python：口袋妖怪之战（类、函数）

> ID：11706505
> 
> 赞同：2
> 
> 时间：2012-07-29T03:54:10.080
> 
> 标签：python, class, function

我刚开始学习python，我希望你们能帮助我更好地理解事情。如果你曾经为 gameboy 玩过 pokemon 游戏，你会更了解我想要做什么。我从一个文字冒险开始，你做一些简单的事情，但现在我正处于口袋妖怪互相争斗的地步。所以这就是我想要实现的目标。

*   宝可梦大战开始
*   你攻击目标
*   目标失去HP并反击
*   第一个到 0 hp 损失

当然，所有这些都是打印出来的。

这就是我目前所拥有的战斗，我不确定我现在有多准确。只是真的想看看我离正确地做这件事有多近。

```
class Pokemon(object):  
    sName = "pidgy"
    nAttack = 5
    nHealth = 10
    nEvasion = 1

    def __init__(self, name, atk, hp, evd):
        self.sName = name
        self.nAttack = atk
        self.nHealth = hp
        self.nEvasion = evd

    def fight(target, self):
        target.nHealth - self.nAttack

def battle():
    print "A wild  appeared" 
    #pikachu = Pokemon("Pikafaggot", 18, 80, 21)
    pidgy = Pokemon("Pidgy", 18, 80, 21)
    pidgy.fight(pikachu)
    #pikachu.fight(pidgy) 
```

**完整代码在这里： http:** [//pastebin.com/ikmRuE5z](http://pastebin.com/ikmRuE5z)

我也在寻找有关如何管理变量的建议；我似乎在顶部有一个变量的杂货清单，我认为这不是一个好习惯，他们应该去哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:11:45.220

如果我有`fight`一个实例方法（我不确定我是否会这样做），我可能会将它编码为这样的：

```
class Pokemon(object):
    def __init__(self,name,hp,damage):
        self.name = name     #pokemon name
        self.hp = hp         #hit-points of this particular pokemon
        self.damage = damage #amount of damage this pokemon does every attack

    def fight(self,other):
        if(self.hp > 0):
            print("%s did %d damage to %s"%(self.name,self.damage,other.name))
            print("%s has %d hp left"%(other.name,other.hp))

            other.hp -= self.damage
            return other.fight(self)  #Now the other pokemon fights back!
        else:
            print("%s wins! (%d hp left)"%(other.name,other.hp))
            return other,self  #return a tuple (winner,loser)

pikachu=Pokemon('pikachu', 100, 10)
pidgy=Pokemon('pidgy', 200, 12)
winner,loser = pidgy.fight(pikachu) 
```

当然，这有点无聊，因为伤害量不取决于口袋妖怪的类型，也不是随机的……但希望它能说明这一点。

至于你的班级结构：

```
class Foo(object):
    attr1=1
    attr2=2
    def __init__(self,attr1,attr2):
        self.attr1 = attr1
        self.attr2 = attr2 
```

如果保证在`__init__`. 只需使用实例属性就可以了（即）：

```
class Foo(object):
    def __init__(self,attr1,attr2):
        self.attr1 = attr1
        self.attr2 = attr2v 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T04:08:12.113

1.  您不需要顶部的变量。您只需要在**init** () 方法中使用它们。
2.  Fight 方法应该返回一个值：

    ```
    def fight(self, target): 
        target.nHealth -= self.nAttack
        return target 
    ```

3.  您可能还想检查是否有人输掉了战斗：

    ```
    def checkWin(myPoke, target):
        # Return 1 if myPoke wins, 0 if target wins, -1 if no winner yet.
        winner = -1
        if myPoke.nHealth == 0:
            winner = 0
        elif target.nHealth == 0:
            winner = 1
        return winner 
    ```

希望我有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T04:10:40.007

*我只会评论几个明显的方面，因为完整的代码审查超出了本网站的范围（试试[codereview.stackexchange.com](https://codereview.stackexchange.com/)）*

您的`fight()`方法没有保存减法的结果，因此没有任何改变。你需要做这样的事情：

```
def fight(target, self):
    target.nHealth -= self.nAttack
    # check if target is dead now? 
```

我什至可能建议不要直接对您的目标进行修改。如果你可以`attack(power)`在你的目标上调用一个可能会更好，让它来确定造成了多少伤害。然后，您可以检查目标是否已经死亡。最终我会认为你会有一些“骰子”对象来决定你的结果。

至于全局变量...停止使用它们。除非你真的有充分的理由，否则拥有它们是一个坏习惯。具有将结果返回给调用者的函数，然后您可以使用：

```
def func(foo):
    return 'bar' 
```

但是，您可以拥有一个常量模块。这些是一堆在应用程序的生命周期内不会改变的值。它们只是提供共同值的变量。您可能会创建一个`constants.py`并拥有以下内容：

```
UP = "up"
DOWN = "down"
DEAD = 0
... 
```

...在您的其他模块中，您可以：

```
from constants import * 
```

# c# - C#/Crystal Reports：将图像从数据库显示到报表时收到错误

> ID：11706509
> 
> 赞同：0
> 
> 时间：2012-07-29T03:55:51.730
> 
> 标签：c#, crystal-reports, dataset, byte

[使用本网站](http://csharpdotnetfreak.blogspot.com/2012/06/crystal-reports-display-images-database.html)的以下语法检索来自数据库的图像文件路径时，我目前收到错误消息：

```
private void DisplayImages(DataRow row, string img, string ImagePath)
{
    FileStream stream = new FileStream(ImagePath, FileMode.Open, FileAccess.Read);
    byte[] ImgData = new byte[stream.Length];
    stream.Read(ImgData, 0, Convert.ToInt32(stream.Length));
    stream.Close();
    row[img] = ImgData;
} 
```

列名以`Image`数据类型命名`nvarchar`。我目前遇到的错误发布在下面

> String 的 SourceColumn 'Image' 与 Byte[] 的 DataColumn 'Image' 之间存在不可转换的类型不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:31:59.193

不要使用 nvarchar 类型，这里使用 BLOB 示例： http: [//msdn2.microsoft.com/en-us/library/87z0hy49](http://msdn2.microsoft.com/en-us/library/87z0hy49(VS.80).aspx) (VS.80).aspx 代码片段

```
// Assumes that connection is a valid SqlConnection object.
            SqlCommand command = new SqlCommand(
              "SELECT pub_id, logo FROM pub_info", connection);

            // Writes the BLOB to a file (*.bmp).
            Stream stream;
            // Streams the BLOB to the FileStream object.
            BinaryWriter writer;

            // Size of the BLOB buffer.
            int bufferSize = 100;
            // The BLOB byte[] buffer to be filled by GetBytes.
            byte[] outByte = new byte[bufferSize];
            // The bytes returned from GetBytes.
            long retval;
            // The starting position in the BLOB output.
            long startIndex = 0;

            // The publisher id to use in the file name.
            string pubID = "";

            // Open the connection and read data into the DataReader.
            connection.Open();
            SqlDataReader reader = command.ExecuteReader(CommandBehavior.SequentialAccess);

            while (reader.Read())
            {
                // Get the publisher id, which must occur before getting the logo.
                pubID = reader.GetString(0);

                // Create a file to hold the output.
                stream = new MemoryStream();
                writer = new BinaryWriter(stream);

                // Reset the starting byte for the new BLOB.
                startIndex = 0;

                // Read bytes into outByte[] and retain the number of bytes returned.
                retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize);

                // Continue while there are bytes beyond the size of the buffer.
                while (retval == bufferSize)
                {
                    writer.Write(outByte);
                    writer.Flush();

                    // Reposition start index to end of last buffer and fill buffer.
                    startIndex += bufferSize;
                    retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize);
                }

                // Write the remaining buffer.
                writer.Write(outByte, 0, (int)retval - 1);
                writer.Flush();

                // Close the output file.
                writer.Close();
                stream.Close();
            }

            // Close the reader and the connection.
            reader.Close();
            connection.Close();

            Image _Image = Image.FromStream(stream);

            System.Windows.Controls.Image _WPFImage = new System.Windows.Controls.Image();
            _WPFImage.Source = System.Windows.Media.Imaging.BitmapFrame.Create(stream);

    // Assumes that connection is a valid SqlConnection object.
            SqlCommand command = new SqlCommand(
              "SELECT pub_id, logo FROM pub_info", connection);

            // Writes the BLOB to a file (*.bmp).
            Stream stream;
            // Streams the BLOB to the FileStream object.
            BinaryWriter writer;

            // Size of the BLOB buffer.
            int bufferSize = 100;
            // The BLOB byte[] buffer to be filled by GetBytes.
            byte[] outByte = new byte[bufferSize];
            // The bytes returned from GetBytes.
            long retval;
            // The starting position in the BLOB output.
            long startIndex = 0;

            // The publisher id to use in the file name.
            string pubID = "";

            // Open the connection and read data into the DataReader.
            connection.Open();
            SqlDataReader reader = command.ExecuteReader(CommandBehavior.SequentialAccess);

            while (reader.Read())
            {
                // Get the publisher id, which must occur before getting the logo.
                pubID = reader.GetString(0);

                // Create a file to hold the output.
                stream = new MemoryStream();
                writer = new BinaryWriter(stream);

                // Reset the starting byte for the new BLOB.
                startIndex = 0;

                // Read bytes into outByte[] and retain the number of bytes returned.
                retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize);

                // Continue while there are bytes beyond the size of the buffer.
                while (retval == bufferSize)
                {
                    writer.Write(outByte);
                    writer.Flush();

                    // Reposition start index to end of last buffer and fill buffer.
                    startIndex += bufferSize;
                    retval = reader.GetBytes(1, startIndex, outByte, 0, bufferSize);
                }

                // Write the remaining buffer.
                writer.Write(outByte, 0, (int)retval - 1);
                writer.Flush();

                // Close the output file.
                writer.Close();
                stream.Close();
            }

            // Close the reader and the connection.
            reader.Close();
            connection.Close();

            Image _Image = Image.FromStream(stream);

            System.Windows.Controls.Image _WPFImage = new System.Windows.Controls.Image();
            _WPFImage.Source = System.Windows.Media.Imaging.BitmapFrame.Create(stream); 
```

# java - java原型设计模式对象创建

> ID：11706513
> 
> 赞同：8
> 
> 时间：2012-07-29T03:57:01.563
> 
> 标签：java, design-patterns, prototype-pattern

我正在研究原型设计模式并且有一些问题。

我已经了解原型设计模式用于创建在内存或资源方面成本高昂的对象。在这种情况下，我们使用已经可用的对象的克隆。

`new`那么创建对象和创建对象有什么区别`clone()`？对象存储在内存中的什么位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T04:05:16.517

Java`clone()`方法只是创建一个新对象并将成员变量值复制到其中。一般来说，它既不比创建一个新对象的成本高也不低。唯一`clone()`比创建对象便宜的时候是对象`new`的构造函数做一些昂贵的事情：例如，如果构造函数接受参数并将它们用作数据库查询的一部分怎么办？在这种情况下，使用`clone()`会更便宜，因为不会发生昂贵的查询操作。

但是，使用这种设计模式还有其他原因：大多数情况下，对象在使用前需要复杂的设置，而这在构造函数中无法方便地完成。想象一个对象有 20 个需要设置的属性。如果你用构造函数参数来设置它们，那个构造函数会非常难看——想象一个有 20 个参数的构造函数！相反，您可以构造一个可能没有参数的对象，使用 mutator 方法设置 20 个值，然后`clone()`在需要时将该对象制作成现成的副本。`clone()`根本不需要参数，所以它显然不那么难看。如果您需要该对象的多个不同版本的多个副本，那么原型模式就会变得很有吸引力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T04:10:00.933

原型设计模式提供两种成本节省——时间节省和空间节省。

当创建对象需要对辅助信息进行昂贵的访问时（例如，从文件、数据库或通过网络请求配置数据），可以节省时间。例如，如果您要从存储在 Web 服务器上的模板构建大量页面，则只需读取一次模板并克隆它以获得每个新页面的起点，而不是单独查询 Web 服务器每一页。

内存节省来自重用不可变对象：如果您的原始对象包含大量字符串，则创建一个新实例需要创建全新的不可变字符串，或者手动处理字符串实习。通过让克隆共享模板的不可变部分，使用原型模式优雅地避免了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T23:43:45.763

当对象的创建占用过多的系统资源和性能时使用原型设计模式，而我们正是在我们想要一个类的许多实例时使用这种设计模式，并且这些实例是相似的，所以我们真的不想要例如使用运算符“new”，因为它的成本很高，我们所需要的只是根据已经创建的第一个对象来实例化这些对象。

优点是新对象将是独立的，并且不会像第一个那样创建太多资源。这里是在 java 中使用这个概念的一个例子：

```
 import java.util.Vector;

 public class Samsung implements Cloneable{
    private Vector<String> models; 

    public Samsung(){
        models=new Vector<>(); 
        //we suppose in this comments we access to a data Base to get models
        //and then we get a full list of Samsung models
        //... and finish
        //Sadly we took to much of time to fetch the database 
        //we don't want to waste our time again because Samsung rarely update its database
        models.add("Samsung S1"); 
        models.add("Samsung S2"); 
        models.add("galaxy note"); 
        models.add("galaxy star");
    }
    public Samsung(Vector<String> models){
        this.models=models;
    }

   public Samsung clone()  {

      Vector<String> modelsCopy=new Vector<>();
      Samsung samsungCopy=null;
    //here we don't need to access the database again, we will just copy the previous list
      try{
          for(String model:this.models){
              modelsCopy.add(model);
          }
          samsungCopy=new Samsung(modelsCopy); 
          return samsungCopy;
      }
      catch(Exception e){
          return null;
      }
}

} 
```

主程序：

```
 public static void main(String[] args) {
        Samsung usa_Samsung=new Samsung();
        Samsung morocco_Samsung=usa_Samsung.clone(); 
        System.out.println("original = " + usa_Samsung);
        System.out.println("copy = " + morocco_Samsung);
    } 
```

输出 ：

```
original = Samsung@6d06d69c

copy = Samsung@7852e922 
```

就像您看到这些对象的地址不同，因为它们不同。

> 笔记 ！我仅使用名称“三星”作为示例。

# mysql - 真空mysql？缩小文件大小

> ID：11706519
> 
> 赞同：0
> 
> 时间：2012-07-29T03:58:57.310
> 
> 标签：mysql, sql

由于一个错误，我在一个表中插入了很多行。我删除了这些行，但我的数据库 >1gb 而不是 200mb。我该如何抽真空？我尝试优化表格。它没有缩小尺寸。我被这个巨大的mysql文件卡住了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:03:53.537

创建一个相同的表结构，`select * into newtable from oldtable`然后. 最快的跨平台方式。`drop oldtable``alter table newtable rename oldtable`

（在 mysql 中你可以使用`rename table newtable to oldtable`，但这不是标准的 sql。）

需要注意的是，这仅适用于将 mysql 设置为每个表一个文件，这是默认的 AFAIK，但它也可以设置为一个文件中的所有表。如果以这种方式设置，您将不得不克隆整个*数据库*，这是一项更重要的任务。如果您有一个“ibdata”文件，则所有表都在一个文件中，您可能应该看到[这个答案](https://stackoverflow.com/questions/3456159/how-to-shrink-purge-ibdata1-file-in-mysql)。

# php - 使用 jQuery 检查单选按钮的值并更改 CSS 类

> ID：11706520
> 
> 赞同：3
> 
> 时间：2012-07-29T03:59:08.983
> 
> 标签：php, javascript, jquery

我正在做一个 100 个问题的多项选择测验（它在五个选项卡上显示 20 个问题）。如果人们可以通过页面源看到答案，那很好 - 这只是练习。

我目前拥有的是一个 php 数组（目前只有 5 个“测试”问题），它显示带有问题的行、四个单选按钮和一个提交按钮。这个想法是用户阅读问题，选择答案并提交。如果答案是正确的，单选按钮将显示为绿色。如果错误，单选按钮变为红色，用户重试。

这是我的 PHP 代码的主要部分：

```
<?php
$set = array();

$set[] = array('q'=>'Question1','qurl'=>'001','ans'=>'zhidao','a'=>'zhidao','b'=>'zhidou','c'=>'zhedao','d'=>'zhedau');
$set[] = array('q'=>'Question2','qurl'=>'002','ans'=>'dajia','a'=>'dazha','b'=>'dajia','c'=>'taqia','d'=>'tazha');
$set[] = array('q'=>'Question3','qurl'=>'003','ans'=>'boduo','a'=>'bodou','b'=>'buoduo','c'=>'boduo','d'=>'buodo');
$set[] = array('q'=>'Question4','qurl'=>'004','ans'=>'wanhuan','a'=>'wanchuan','b'=>'wanhuan','c'=>'wanchun','d'=>'wachuan');
$set[] = array('q'=>'Question5','qurl'=>'005','ans'=>'zhangkou','a'=>'zhongkou','b'=>'zhangko','c'=>'zhangkuo','d'=>'zhangkou');

shuffle($set);
?>

   <form>
                <table>
                                                                                <tr class="q0">                     
                        <td><td><a class="question" href="#">Question goes here</a></td></td>
                        <td><input class="radiostyle" type="radio" name="answers" value ="zhidao" /> zhidao</td>
                        <td><input class="radiostyle" type="radio" name="answers" value ="zhidou" /> zhidou</td>
                        <td><input class="radiostyle" type="radio" name="answers" value ="zhedao" /> zhedao</td>
                        <td><input class="radiostyle" type="radio" name="answers" value ="zhedau" /> zhedau</td>
                        <td><input class="submit submit-0" type="submit" value="Submit" /></td>
                    </tr> 
```

这是我的 jQuery：

```
function checkAnswer(set) {
if (set == 2) { /* if this is question set 2 out of the 5 kinds of questions */
        $('#questions .submit').click(function(e){
            var q = $(this).attr('class').split(' ')[1].split('-')[1];
            $('#questions .q'+q+' input').removeClass('radiowrong');
            var ans = $("input[@name=answers]:checked").val();
            if (ans == jset[q]['ans']) {
                $('#questions .q'+q+' .radiostyle').addClass('radioright');
                alert('correct!');}
            else {
                $('#questions .q'+q+' .radiostyle').addClass('radiowrong');}

            e.preventDefault();
        });
    }
} 
```

现在，我没有用 jQuery 做很多工作，所以请把我当作初学者。如果我的代码看起来效率低下，我深表歉意。关于我的代码，我有两个主要问题：

首先，我很难让我的 checkAnswer 函数正常工作。我插入了一个警报，看看我的 if 逻辑是否正确，但我没有成功。关于如何让它发挥作用的任何建议？

其次，如何修改我的 jQuery 以便正确更改单选按钮的类？同样，如果用户选择了正确的答案，我希望将单选按钮设为绿色，如果他们选择错误，则将单选按钮设为红色。

**（请知道：如果有一种更简单的方法可以向用户展示他们是对还是错——比如改变他们选择的答案的文本颜色——我全神贯注。真的任何事情都足够了。）**

如果我需要提供更多信息，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:53:44.413

首先，这是解决方案的一个工作示例 - [jsfiddle.net/avrelian/hrnDG/2/](http://jsfiddle.net/avrelian/hrnDG/2/)。

以下是您的标记的简化版本。你可能会看到我在`label`这里使用了标签。它更加用户友好，因为用户只需单击标签即可检查单选按钮。此外，标签的样式要简单得多（例如，在 Mac OS 上）。我正在使用“正确”和“错误”类来标记适当的答案元素。

```
<form>
<table>
<tr class="q1">                       
    <td><a class="question" href="#">What is my favorite language?</a></td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="Java" id="answers_1_Java" />
        <label for="answers_1_Java">Java</label></td>
    <td>
        <input class="radiostyle right" type="radio" name="answers" value="JavaScript" id="answers_1_JavaScript" />
        <label for="answers_1_JavaScript">JavaScript</label></td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="Ruby" id="answers_1_Ruby" />
        <label for="answers_1_Ruby">Ruby</label></td>
    <td>
        <input class="radiostyle wrong" type="radio" name="answers" value="C#" id="answers_1_C#" />
        <label for="answers_1_C#">C#</label></td>
    <td><input class="submit submit-1" type="submit" value="Submit" /></td>
    <td></td></tr></table></form>​ 
```

让我们将表示逻辑提取到 CSS 中。

```
input.right.checked + label {
    color: green;
}

input.wrong.checked + label {
    color: red;
} 
```

最后，让我们为`submit`按钮设置一个处理程序。

```
$('.submit').click(function() {
    $(this).closest('tr')
        .find('[name="answers"]')
            .removeClass('checked')
        .filter(':checked')
            .addClass('checked');
    return false;
});​ 
```

注意：使用 CSS3 伪类可以更轻松地解决问题`:checked`，因为您不需要提交按钮。请参阅示例 - [jsfiddle.net/avrelian/hrnDG](http://jsfiddle.net/avrelian/hrnDG)。

```
input.right:checked + label {
    color: green;
}

input.wrong:checked + label {
    color: red;
} 
```

# .net - 为什么不支持 ControlTemplate 中的某些属性？

> ID：11706522
> 
> 赞同：0
> 
> 时间：2012-07-29T03:59:25.040
> 
> 标签：.net, wpf, wpf-controls

如果我定义了 ControlTemplate：

```
<ControlTemplate x:Key="ButtonTemplate" TargetType="{x:Type Button}">
<Border BorderBrush="Orange" BorderThickness="3" CornerRadius="2"
Background="Red" TextBlock.Foreground="White">
<ContentPresenter RecognizesAccessKey="True" Margin="{TemplateBinding Padding}"/>
</Border>
</ControlTemplate> 
```

我把它绑定到一个按钮控件

```
<WrapPanel>
<Button Margin="10" Padding="5" Template="{StaticResource ButtonTemplate}">Test</Button>
</WrapPanel> 
```

除非我包含 TemplateBinding 标记扩展，否则为什么不支持 Padding="5"？还有哪些其他属性被忽略，在什么情况下或我如何确定它们是否会被忽略或尊重？

另外，只是出于好奇，不是您愿意，而是您可以用普通的数据绑定表达式替换模板绑定并且它仍然可以工作吗？（如果是这样，路径是什么？）我仍在学习 WPF，只是想更深入地了解一些机制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:13:52.647

> 除非我包含 TemplateBinding 标记扩展，否则为什么不支持 Padding="5"？

这就是 WPF 的工作原理，模板控制它如何使用某些属性，系统无法判断模板中的哪个位置`Padding`需要在*概念上有意义*，因此您需要手动绑定它。除其他外，您应该绑定`Margin`和`Background`.

正常的绑定看起来像：

```
Margin="{Binding Padding, RelativeSource={RelativeSource TemplatedParent}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:26:00.100

嗨，这是由于依赖属性的特性而发生的。依赖属性根据优先级获取其值，如下所示： 1）活动或动画 2）本地（即内联）值 3）模板值 4）样式值 5）默认值。现在，您在上面为（本地和模板化）设置了边距值，但本地值具有更高的优先级，因此应用了此值。这是为什么会发生的答案，所以我希望这会有所帮助。

# javascript - CouchDB 在 Node.js 中获取用户的所有帖子

> ID：11706524
> 
> 赞同：2
> 
> 时间：2012-07-29T04:00:12.837
> 
> 标签：javascript, node.js, database-design, couchdb, couchdb-nano

我首先要说我已经做了很多研究，但我仍然很迷茫。

我有一个工作版本，但我敢肯定，这是你能做到的最低效的方式。我对知道计划数据库的最佳方法不是很有信心，很明显，我已经变得依赖 ActiveRecord。无论如何，我只是想弄清楚这些事情：

1.  找出规划数据库的最佳方式（我应该如何分离文件）
2.  找到最有效的处理关系
3.  找到从服务器查询的好方法

好的，所以我注意到了一些事情：第一，您不能将 I 客户端变量传递到视图中，因此使用这样的方法是行不通的。第二，我认为可能需要获取所有帖子，然后检查类型是否为帖子，然后返回匹配的文档，但这似乎有很多数据在四处移动。

一些代码：

所以我使用 Node.js、CouchDB 和 nano 作为中间件。

邮寄文件：

```
{
"_id": "post-slug",
"title": "Post Slug",
"user": "film42",
"date": 1343451412,
"type": "post"
} 
```

用户文件：

```
{
"_id": "film42",
"email": "test@example.com",
"posts": [
   "post-slug",
   "another-post-slug"
],
"type": "user"
} 
```

以下是我目前获取所有帖子的方式（这真的很糟糕！）：

```
function buildUserPostArray(array, user, res, i) {
   db.get(user.posts[i], function(err, post_obj) {
       if(i < user.posts.length) {
           array.push(post_obj);
           buildUserPostArray(array, user, res, i+1);
       }
       else {
           console.log('Rendering view now.');
           res.render('user.jade', {
               user: user.user,
               posts: array
           });
       }
   });
}

app.get('/users/:id', function(req, res) {
    db.get(req.params.id, function(err, user_obj) {
       if(err) res.send('err1'); //bad id or server down

       array = [];
       buildUserPostArray(array, user_obj, res, 0);
    });
}); 
```

我一直在使用视图，直到我意识到我无法传递变量，然后我查看了列表，但在阅读了许多教程后我迷路了。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:24:19.907

你真的想使用视图。只需以用户为键在帖子上创建视图。

```
function(doc) {
    emit(doc.user, {title: doc.title, date: doc.date, id: doc._id});
} 
```

然后你可以简单地查询它：

```
GET /yourdb/_design/app/_view/by_user?key=film42 
```

这将为您提供与该用户关联的所有查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:29:06.657

就像 Will Hartung 所说的，你想要一个视图，但是它看起来应该与 Will 展示的有点不同。

首先确保您要发出的字段存在。请记住，`null`and`0`是 JavaScript 中的虚假值，因此根据您的数据结构，您可能必须检查字段是否`undefined`显式。

这是一些代码，可以向您展示我的意思。

```
function(doc) {
    if (doc.user && doc.title) { // This check is important
        emit(doc.user, {title: doc.title, date: doc.date});
    }
} 
```

您不必显式地发出文档 ID，因为无论如何都会自动发生。还要确保不要发出整个文档`emit(doc.user, doc);`。那是低效的。如果您需要整个文档，只需将`null`其作为值发出并使用`include_docs=true`URL 参数。

所以基本上如果你`null`作为一个值发出，那么你会得到这样的文档。

> 获取 /yourdb/_design/app/_view/by_user?key=film42&include_docs=true

# javascript - 如何使用 Chrome 文档中的文件而不是 URL？

> ID：11706527
> 
> 赞同：0
> 
> 时间：2012-07-29T04:00:49.993
> 
> 标签：javascript, firefox, firefox-addon

我是一个主要的菜鸟，所以我会尽力解释这一点。Anywho，我正在学习扩展开发的步骤，我想将 Greasemonkey 脚本和 Firefox 附加组件中的元素融合在一起。到目前为止，我设法让一些东西正常工作，但我似乎无法弄清楚如何使脚本中的图像和 CSS 文件指向 Chrome:`Skin`文件夹。
当前代码是：

```
var newstyle = document.createElement('link');
newstyle.rel = 'stylesheet';
newstyle.href = 'http://example.com/test.css';
newstyle.type = 'text/css';
document.getElementsByTagName('head')[0].appendChild(newstyle);

function main(){
var assets = Math.floor(Math.random()*8);
$('<div id="jumpFloatingButton" style="width:80px;height:30px;background-color:#21a0f1;background-image:url(http://colourlovers.com.s3.amazonaws.com/images/patterns/2757/2757110.png);position:fixed;right:0px;bottom:0px;background-attachment: scroll;cursor: pointer;"></div>').insertAfter('body *:last');
$('<div id="jumpFloating" style="width:400px;height:500px;position:fixed;bottom:30px;right:0px;border:1px solid black;background-image:url(http://colourlovers.com.s3.amazonaws.com/images/patterns/2757/2757110.png);"><ul id="jumpFloatingList" style="overflow:auto;max-height:500px;max-width:400px;margin-left:0px;"></ul></div>').insertAfter('#jumpFloatingButton'); 
```

上述代码中的链接是从其他来源链接的文件的示例。我想知道的是如何从加载项文件夹而不是其他 URL 中创建链接点？像：

```
newstyle.href = 'chrome://folder/skin/overlay.css'; 
```

或者

```
$('<div id="jumpFloatingButton" style="width:80px;height:30px;background-color:#21a0f1;background-image:url(chrome://folder/skin/image.jpg);position:fixed;right:0px;bottom:0px;background-attachment: scroll;cursor: pointer;"></div>').insertAfter('body *:last'); 
```

* * *

我使用 Netbeans。我的清单

```
content file jar:chrome/file.jar!/content/
skin special classic/1.0 jar:chrome/special.jar!/skin/ contentaccessible=yes 
```

我试过

```
var newstyle = document.createStyleSheet('overlay.css');
newstyle.rel = 'stylesheet';
newstyle.href = 'chrome://nb/skin/overlay.css';
newstyle.type = 'text/css';
document.getElementsByTagName('head')[0].appendChild(newstyle); 
```

添加 document.createStyleSheet 会修复它吗？我的编辑

```
$('<div id="imagestack" style="width:304px;height:64px;background-image:url("chrome://special/skin/nav.png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:41:23.877

您需要将您的标记`chrome://folder/`为`chrome.manifest`可[从网络访问](https://developer.mozilla.org/en/Chrome_Registration/#contentaccessible)，否则网页将无法加载它。我看到您已经尝试这样做，但您已添加`contentaccessible=yes`到`skin`条目中。文档说：

> contentaccessible 标志仅适用于内容包：它不能用于区域设置或皮肤注册。但是，匹配的语言环境和皮肤包也会暴露给内容。

这是因为您不能将 chrome 包的一部分标记为可供 Web 访问 - 它要么是全部（内容、皮肤和语言环境），要么什么都没有。所以你`chrome.manifest`应该看起来像这样：

```
content file jar:chrome/file.jar!/content/ contentaccessible=yes
skin special classic/1.0 jar:chrome/special.jar!/skin/ 
```

# php - php Fatal error: Function name must be a string in

> ID：11706528
> 
> 赞同：3
> 
> 时间：2012-07-29T04:00:56.443
> 
> 标签：php

**Fatal error: Function name must be a string in /home/../public_html/updater.php on line 3**

```
 1: <?php
 2:    
 3: $user_id = $_GET("uid"); /* <-- Line 3 */
 4: $user_name = $_GET("uname");
 5: $setting = $_GET("setting");
 6:    
 7: $MyString = $user_name + '[' + $user_id + ']{' + $setting + '} \n';
 8:    
 9: $myfile = fopen('database.txt', 'a');
10: fwrite($myfile, $MyString . '\n');
11: fclose($myfile);
12:    
13: ?> 
```

**What's the problem ?**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-29T04:03:28.500

Change your `$_GET()` code to `$_GET[]` with square brackets.

*   $_GET is a superglobal (pre-defined/built-in variable), and not a function.
*   [http://php.net/manual/en/language.variables.superglobals.php](http://php.net/manual/en/language.variables.superglobals.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T04:05:49.950

除了使用方括号代替圆括号之外，您还应该将第 7 行更改为

```
$MyString = $user_name . "[" . $user_id . "]{" . $setting . "} \n"; 
```

和第 10 行到

```
fwrite($myfile, $MyString . "\n"); 
```

您应该使用句点 (.) 代替加号 (+) 来连接字符串。此外，在编写特殊字符（换行符）时，您需要使用双引号字符串而不是单引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T04:04:49.607

要在 php 中获取[数组](http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing)值，请使用方括号`[]`，不像 vb，即 `$user_id = $_GET["uid"];`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T04:10:49.820

语法错误。正确的语法是：

```
$user_id = $_GET["uid"]; 
```

在适用的地方应用更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T04:15:26.230

很困惑为什么要使用两个换行符。一个应该不够吗？

你的代码也有'\ n'错误，你不能那样做。

你需要;

"\n" 正确解释的隐式换行符（或 chr(10)）

CRLF (chr(13) + chr(10)) 用于 DOS 格式的文本文件。

CR 用于 linux 格式的文本文件。（或 chr(13)）

* * *

另外，我建议在 fopen 调用中使用“ta”。从 fopen() php 页面中提取；

如果您正在处理纯文本文件并且使用 \n 来分隔脚本中的行尾，则应该使用“t”模式，但希望您的文件可以被记事本等应用程序读取。在所有其他情况下，您应该使用“b”。

参考：

[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

[http://www.december.com/html/spec/ascii.html（13](http://www.december.com/html/spec/ascii.html)被认为是回车或 /r，10 被认为是换行符或 /n）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-13T08:56:46.377

更改所有 GET 方法：

```
$user_id = $_GET("uid"); /* <-- Line 3 */ 
```

至

```
$user_id = $_GET["uid"]; 
```

完毕

# node.js - Passport-facebook 从回调函数中访问 req 对象

> ID：11706533
> 
> 赞同：10
> 
> 时间：2012-07-29T04:02:20.687
> 
> 标签：node.js, facebook, authentication, facebook-authentication, passport.js

在来自 Facebook 的用于 nodejs 护照身份验证的回调中，如何`req`在回调中获取对象？

```
passport.use(new FacebookStrategy({
    clientID: 123456789,
    clientSecret: 'SECRET',
    callbackURL: "http://example.com/login/facebook/callback"
  },
  function(accessToken, refreshToken, profile, done){
    // Is there any way to get the req object in here?
  }
)); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-29T20:22:21.280

设置[`passReqToCallback`](http://passportjs.org/docs#association-in-verify-callback)选项，如下所示：

```
passport.use(new LocalStrategy({ passReqToCallback: true },
  function(req, username, password, done) {
    User.findOne({ username: username }, function (err, user) {
      if (err) { return done(err); }
      if (!user) { return done(null, false); }
      if (!user.verifyPassword(password)) {
        req.flash('error', 'Your password is too long');
        req.flash('error', 'Also, it is too short!!!');
        return done(null, false);
      }
      return done(null, user);
    });
  }
)); 
```

`req`成为验证回调的第一个参数

根据[https://github.com/jaredhanson/passport/issues/39](https://github.com/jaredhanson/passport/issues/39)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-01T01:00:43.680

我回答得太晚了，但我认为我的解决方案更好，更传统。[在这里](http://passportjs.org/guide/authorize/)的官方文档中。有一节“**验证回调中的关联**”，其中提到如果我们将策略的**passReqToCallback**选项设置为**true**，这将启用**req**并将其作为第一个参数传递给验证回调。

所以我的**FacebookStrategy**现在看起来像：

```
var User = require('../models/UserModel.js');
var FacebookStrategy = require('passport-facebook').Strategy;

exports.facebookStrategy = new FacebookStrategy({
        clientID: 'REPLACE_IT_WITH_CLIENT_ID',
        clientSecret: 'REPLACE_IT_WITH_CLIENT_SECRET',
        callbackURL: 'http://localhost:3000/auth/facebook/callback',
        passReqToCallback: true
    },function(req,accessToken,refreshToken,profile,done){
        User.findOne({
                'facebook.id' : profile.id
            },function(err,user){
            if(err){
                done(err);
            }
            if(user){
                req.login(user,function(err){
                    if(err){
                        return next(err);
                    }
                    return done(null,user);
                });
            }else{
                var newUser = new User();
                newUser.facebook.id = profile.id;
                newUser.facebook.name = profile.displayName;
                newUser.facebook.token = profile.token;
                newUser.save(function(err){
                    if(err){
                        throw(err);
                    }
                    req.login(newUser,function(err){
                        if(err){
                            return next(err);
                        }
                        return done(null,newUser);
                    });
                });
            }
        });
    }
); 
```

在我的代码示例中，我添加了一些逻辑来将用户信息保存在数据库中并在会话中保存用户详细信息。我认为这可能对人们有帮助。

**req.user**给出存储在护照会话中的用户信息。

# jpa - Why JPA doesnt generate a join junction table in this case

> ID：11706536
> 
> 赞同：0
> 
> 时间：2012-07-29T04:03:09.617
> 
> 标签：jpa, jpa-2.0

I have two tables Students and Books , with a many to many relationship. The code of both are given below. Now when I try to run the code I get the error.

**Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'acme.book_stud' doesn't exist Error Code: 1146 Call: INSERT INTO book_stud (idStudents, idBooks) VALUES (?, ?) bind => [2 parameters bound]**

It seems like JPA is trying to write to a juction table which does not exist (in this case it assumes a junction table **books_students** is already created so it doesnt create one.). It works if I create a books_students but I dont want to do that since its JPA responsibility to create it. Is there a way in which I could explicitly tell it to create one. ? (I am taking a wild guess here - but I guess when creating a persitance unit I specified "none" I think thats why it didnt create that table . Am I correct ? Anyways here are my Student and Books Classes

**BOOKS CLASS**

```
@Entity
@Table(name = "books")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Books.findAll", query = "SELECT b FROM Books b"),
    @NamedQuery(name = "Books.findByIdBooks", query = "SELECT b FROM Books b WHERE b.idBooks = :idBooks"),
    @NamedQuery(name = "Books.findByBookName", query = "SELECT b FROM Books b WHERE b.bookName = :bookName"),
    @NamedQuery(name = "Books.findByBookType", query = "SELECT b FROM Books b WHERE b.bookType = :bookType")})
public class Books implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 45)
    @Column(name = "idBooks")
    private String idBooks;
    @Size(max = 45)
    @Column(name = "BookName")
    private String bookName;
    @Size(max = 45)
    @Column(name = "BookType")
    private String bookType;

    /******************************************ADDED **********************/
    @ManyToMany
    @JoinTable(name = "book_stud", 
    joinColumns = { @JoinColumn(name = "idStudents") }, 
    inverseJoinColumns = { @JoinColumn(name = "idBooks") })
    /**************************************ENDED*****************************/

    public Books() {
    }

    public Books(String idBooks) {
        this.idBooks = idBooks;
    }

    public String getIdBooks() {
        return idBooks;
    }

    public void setIdBooks(String idBooks) {
        this.idBooks = idBooks;
    }

    public String getBookName() {
        return bookName;
    }

    public void setBookName(String bookName) {
        this.bookName = bookName;
    }

    public String getBookType() {
        return bookType;
    }

    public void setBookType(String bookType) {
        this.bookType = bookType;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idBooks != null ? idBooks.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Books)) {
            return false;
        }
        Books other = (Books) object;
        if ((this.idBooks == null && other.idBooks != null) || (this.idBooks != null && !this.idBooks.equals(other.idBooks))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "domain.Books[ idBooks=" + idBooks + " ]";
    }

} 
```

**STUDENT CLASS**

```
@Entity
@Table(name = "students")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "StudentEnroll.findAll", query = "SELECT s FROM StudentEnroll s"),
    @NamedQuery(name = "StudentEnroll.findByIdStudents", query = "SELECT s FROM StudentEnroll s WHERE s.idStudents = :idStudents"),
    @NamedQuery(name = "StudentEnroll.findByName", query = "SELECT s FROM StudentEnroll s WHERE s.name = :name"),
    @NamedQuery(name = "StudentEnroll.findByRoll", query = "SELECT s FROM StudentEnroll s WHERE s.roll = :roll"),
    @NamedQuery(name = "StudentEnroll.findBySsn", query = "SELECT s FROM StudentEnroll s WHERE s.ssn = :ssn"),
    @NamedQuery(name = "StudentEnroll.findByProgram", query = "SELECT s FROM StudentEnroll s WHERE s.program = :program")})
public class StudentEnroll implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 40)
    @Column(name = "idStudents")
    private String idStudents;
    @Size(max = 45)
    @Column(name = "Name")
    private String name;
    @Column(name = "Roll")
    private Integer roll;
    @Column(name = "SSN")
    private Integer ssn;
    @Size(max = 45)
    @Column(name = "Program")
    private String program;
    @JoinColumn(name = "CustomerID", referencedColumnName = "UserID")
    @ManyToOne
    private Customer customerID;
    //@OneToMany(mappedBy = "studentRoll")
    @OneToMany(mappedBy = "studentRoll",cascade = CascadeType.REMOVE)//added REMOVE
    private Collection<Subject> subjectCollection;

    /**************************ADDED*****************************/
    @ManyToMany
    @JoinTable(name = "book_stud", 
    joinColumns = { @JoinColumn(name = "idBooks") }, 
    inverseJoinColumns = { @JoinColumn(name = "idStudents") })
    /**********************************END**********************/

    public StudentEnroll() {
    }

    public StudentEnroll(String idStudents) {
        this.idStudents = idStudents;
    }

    public String getIdStudents() {
        return idStudents;
    }

    public void setIdStudents(String idStudents) {
        this.idStudents = idStudents;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getRoll() {
        return roll;
    }

    public void setRoll(Integer roll) {
        this.roll = roll;
    }

    public Integer getSsn() {
        return ssn;
    }

    public void setSsn(Integer ssn) {
        this.ssn = ssn;
    }

    public String getProgram() {
        return program;
    }

    public void setProgram(String program) {
        this.program = program;
    }

    public Customer getCustomerID() {
        return customerID;
    }

    public void setCustomerID(Customer customerID) {
        this.customerID = customerID;
    }

    @XmlTransient
    public Collection<Subject> getSubjectCollection() {
        return subjectCollection;
    }

    public void setSubjectCollection(Collection<Subject> subjectCollection) {
        this.subjectCollection = subjectCollection;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idStudents != null ? idStudents.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof StudentEnroll)) {
            return false;
        }
        StudentEnroll other = (StudentEnroll) object;
        if ((this.idStudents == null && other.idStudents != null) || (this.idStudents != null && !this.idStudents.equals(other.idStudents))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "domain.StudentEnroll[ idStudents=" + idStudents + " ]";
    }

} 
```

# c++ - 尝试访问 QGraphicsTextItem 成员时出现段错误

> ID：11706540
> 
> 赞同：0
> 
> 时间：2012-07-29T04:03:28.753
> 
> 标签：c++, qt

我对 c++ 有点陌生，并且在确定为什么我在以下代码中出现段错误时遇到了一些麻烦；

游戏场景.h

```
#ifndef GAMESCENE_H
#define GAMESCENE_H

#include <QGraphicsScene>

class GameScene : public QGraphicsScene
{
    Q_OBJECT
public:
    explicit GameScene(QObject *parent = 0);
    virtual void keyPressEvent(QKeyEvent* );
    QGraphicsTextItem* p;
    ~GameScene();
signals:

public slots:

};

#endif // GAMESCENE_H 
```

游戏场景.cpp

```
#include "gamescene.h"
#include "QKeyEvent"
#include "QGraphicsTextItem"
#include "QGraphicsRectItem"
#include "QDebug"
#include "QGraphicsScene"
#include "QScopedPointer"

GameScene::GameScene(QObject *parent) :
    QGraphicsScene(parent)
{
    QGraphicsTextItem* p = new QGraphicsTextItem(QString("HEEEEE"));
    p->setFlags(p->ItemIsMovable);
    p->moveBy(qreal(500),qreal(500));
    addItem(p);
}

void GameScene::keyPressEvent(QKeyEvent *event)

{
    qDebug() << (p != NULL);
    switch(event->key())
    case ( Qt::Key_W ):
    {
        qreal x, y;
        x = qreal(5);
        y = qreal(5);
        p->moveBy(x,y);
        qDebug() << "move up";

    }

}
GameScene::~GameScene() {

} 
```

它发生在我的游戏场景对象的 keyPressEvent 方法被调用并尝试访问与 QGraphicsTextItem 指针 p 相关的任何内容时。

我确信它很明显，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:23:11.253

好的，我对您正在使用的库一无所知，但我怀疑错误在这里

```
GameScene::GameScene(QObject *parent) :
    QGraphicsScene(parent)
{
    QGraphicsTextItem* p = new QGraphicsTextItem(QString("HEEEEE"));
    p->setFlags(p->ItemIsMovable);
    p->moveBy(qreal(500),qreal(500));
    addItem(p);
} 
```

应该

```
GameScene::GameScene(QObject *parent) :
    QGraphicsScene(parent)
{
    p = new QGraphicsTextItem(QString("HEEEEE"));
    p->setFlags(p->ItemIsMovable);
    p->moveBy(qreal(500),qreal(500));
    addItem(p);
} 
```

您的`keyPressEvent`方法尝试使用名为 p 的成员变量，看起来您正在尝试在构造函数中设置它，但您没有。您在构造函数中拥有的只是局部变量，也称为 p。

# objective-c - IOS滑动删除和多行编辑导致按钮名称设置为默认

> ID：11706549
> 
> 赞同：2
> 
> 时间：2012-07-29T04:05:29.840
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller

好吧，我在编辑过程中使用多项选择并同时滑动以删除功能..我想要的是当单击选择按钮时，将其标题更改为取消并将颜色设为红色..

而发生在我身上的是标题仍然保留为`edit`and `done`。我究竟做错了什么？

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated {

    if (editing) {
        self.tableView.allowsMultipleSelectionDuringEditing = YES;
        self.editButtonItem.title = @"Cancel";
        self.editButtonItem.tintColor = [UIColor redColor];
     } else {
        self.tableView.allowsMultipleSelectionDuringEditing = NO;
        self.editButtonItem.title = @"Select";
        self.editButtonItem.tintColor = nil;
    }

    [super setEditing:editing animated:animated];
    self.tableView.allowsMultipleSelectionDuringEditing = editing;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:21:28.277

我不太确定是什么绊倒了。你的问题不够清楚。我会在这里尝试一下，并建议你使用这个委托方法。

```
- (NSString *)tableView:(UITableView *)tableView 
   titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return @"New name for swipe button";
} 
```

# android - 如何在android中左上和右上以及左下和右下对齐按钮？

> ID：11706550
> 
> 赞同：0
> 
> 时间：2012-07-29T04:05:34.753
> 
> 标签：android, android-layout

我正在练习 android 布局：

我坚持的是**如何嵌套 LinearLayouts 在活动的左上角、右上角、左下角和右下角有按钮**。

我会很感激使用 LinearLayout 和 RelativeLayout 的例子，这样我就可以理解如何进行。

我真的在如何进行时停滞不前。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:20:16.487

最好的方法是使用相对布局，然后为每个按钮组合[layout_alignParentBottom](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignParentBottom)、[layout_alignParentLeft](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignParentLeft)、[layout_alignParentRight](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignParentRight)和/或[layout_alignParentTop 。](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignParentTop)

# java - Android 通知在角落里显示了一些奇怪的日期

> ID：11706557
> 
> 赞同：0
> 
> 时间：2012-07-29T04:06:12.647
> 
> 标签：java, android

我不知道为什么当我显示通知时，右上角会显示一些 1/4/70 日期？那是什么？我该如何摆脱它？

代码：

```
public static void showNotification(int id, String message, String title, String body)
    {
        int drawable = 0;
        switch (id)
        {
            case NOTIFICATION_NEW_MAIL:
                drawable = R.drawable.ic_notify_mail;
                break;

            case NOTIFICATION_AVAILABLE_TRIPS:
                drawable = R.drawable.ic_notify_trip;
                break;
        }

        NotificationManager notifyManager = (NotificationManager)MyApplication.Me.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(drawable, message, SystemClock.elapsedRealtime() + 1000);
        notification.defaults |= Notification.DEFAULT_SOUND;

        Intent notificationIntent= new Intent(MyApplication.Me, MailListActivity.class);
        switch (id)
        {
            case NOTIFICATION_NEW_MAIL:
                notificationIntent = new Intent(MyApplication.Me, MailListActivity.class);
                break;

            case NOTIFICATION_AVAILABLE_TRIPS:
                notificationIntent = new Intent(MyApplication.Me, TripListActivity.class);
                break;
        }

        PendingIntent contentIntent = PendingIntent.getActivity(MyApplication.Me, 0, notificationIntent, 0);
        notification.setLatestEventInfo(MyApplication.Me, title, body, contentIntent);

        notifyManager.notify(id, notification);
    } 
```

截屏：

![在此处输入图像描述](../Images/bd7e03539db8d31aa31c88dc2258a9a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:08:14.667

SystemClock 是什么东西？使用 System.currentTimeMillis() 或 System.nanoTime() 有什么问题？

另外，尝试编写一个 toClock() 函数，将其转换为 12 小时/24 小时格式的时间字符串。再一次，周一我回到办公室时会更多（提供示例代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:30:16.583

该通知构造函数显然已被弃用，但无论如何，该构造函数中的最后一个参数何时应该在 unix time 中引用创建通知的时间。SystemClock.getEllapsed 时间返回自系统启动以来的时间量[http://developer.android.com/reference/android/os/SystemClock.html](http://developer.android.com/reference/android/os/SystemClock.html)。例如，在您的情况下，您说通知是最近创建的，但在 unix 时间，您说您真的接近 1970 年。请改用 System.getCurrentTimeMillis() 。

编辑：接近 1970 年，我的意思是 Unix 时间从 1970 年初开始以毫秒为单位。所以如果你说 0 毫秒，你说的是 1 月 1 日。如果你通过 86,400,000 毫秒（一天中的毫秒），你说的是 1 月 2 日, 1970。通过传入自启动以来经过的时间，它可能会报告您从 1970 年 1 月 1 日开始的一两天。请参阅[http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T05:26:57.033

我认为你的手段是：

```
 Calendar canlender = Calendar.getInstance();
    canlender.setTimeInMillis(System.currentTimeMillis());
    canlender.add(Calendar.MILLISECOND, 1000);
    long TimeInMillised = canlender.getTimeInMillis();
    Notification notification = new Notification(drawable, message, TimeInMillised); 
```

尝试一下！

# android - 当宽度不匹配父级时，如何防止 EditText 中断到下一行？

> ID：11706559
> 
> 赞同：1
> 
> 时间：2012-07-29T04:06:55.447
> 
> 标签：android, android-edittext

我正在尝试`EditText`水平放置两个 s。我想要完成的是让文本`EditText`在没有更多空间的情况下继续向右滚动而不扩展`EditText`。当`EditText`设置为`match_parent`（宽度）时会发生这种情况，但是当我设置实际宽度或`wrap_content`时，它会中断到下一行。不是我希望的行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:41:38.183

如果我正确理解了您的问题，您是说您希望编辑文本各为一行？如果是这样，您是否尝试过使用 xml 属性

```
android:singleLine 
```

或者您可以通过以下方式完成相同的操作：

```
setSingleLine() //called on the edit text 
```

我刚刚用 2 个水平线性布局中的编辑文本对其进行了测试，每个文本设置为 100dp 宽度，我认为它可以实现您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:12:10.987

你可以试试这个：

设置为`fill_parent`和`layout_weight=1`。这将使它们并排对齐。

# c - 如何以编程方式使用 C 查找 CPU 频率

> ID：11706563
> 
> 赞同：17
> 
> 时间：2012-07-29T04:07:40.480
> 
> 标签：c, cpu-speed

我试图找出是否有办法了解我的 C 代码正在运行的系统的 CPU 频率。

澄清一下，我正在寻找一个抽象的解决方案（一个不会绑定到特定架构或操作系统的解决方案），它可以让我了解我的代码正在执行的计算机的运行频率。我不需要准确，但我想在球场上（即我有一个 2.2GHz 处理器，我希望能够在我的程序中告诉我我在几百兆赫）

有人知道使用标准 C 代码吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-09-21T14:57:40.867

为了完整起见，已经有一个简单、快速、准确的用户模式解决方案存在一个巨大的缺点：它仅适用于 Intel Skylake、Kabylake 和更新的处理器。确切的要求是 CPUID 级别 16h 支持。根据英特尔软件开发人员手册 325462 第 59 版，第 770 页：

*   CPUID.16h.EAX = 处理器基本频率（以 MHz 为单位）；

*   CPUID.16h.EBX = 最大频率（MHz）；

*   CPUID.16h.ECX = 总线（参考）频率（以 MHz 为单位）。

Visual Studio 2015 示例代码：

```
#include <stdio.h>
#include <intrin.h>

int main(void) {
    int cpuInfo[4] = { 0, 0, 0, 0 };
    __cpuid(cpuInfo, 0);
    if (cpuInfo[0] >= 0x16) {
        __cpuid(cpuInfo, 0x16);

        //Example 1
        //Intel Core i7-6700K Skylake-H/S Family 6 model 94 (506E3)
        //cpuInfo[0] = 0x00000FA0; //= 4000 MHz
        //cpuInfo[1] = 0x00001068; //= 4200 MHz
        //cpuInfo[2] = 0x00000064; //=  100 MHz

        //Example 2
        //Intel Core m3-6Y30 Skylake-U/Y Family 6 model 78 (406E3)
        //cpuInfo[0] = 0x000005DC; //= 1500 MHz
        //cpuInfo[1] = 0x00000898; //= 2200 MHz
        //cpuInfo[2] = 0x00000064; //=  100 MHz

        //Example 3
        //Intel Core i5-7200 Kabylake-U/Y Family 6 model 142 (806E9)
        //cpuInfo[0] = 0x00000A8C; //= 2700 MHz
        //cpuInfo[1] = 0x00000C1C; //= 3100 MHz
        //cpuInfo[2] = 0x00000064; //=  100 MHz

        printf("EAX: 0x%08x EBX: 0x%08x ECX: %08x\r\n", cpuInfo[0], cpuInfo[1], cpuInfo[2]);
        printf("Processor Base Frequency:  %04d MHz\r\n", cpuInfo[0]);
        printf("Maximum Frequency:         %04d MHz\r\n", cpuInfo[1]);
        printf("Bus (Reference) Frequency: %04d MHz\r\n", cpuInfo[2]);
    } else {
        printf("CPUID level 16h unsupported\r\n");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-20T08:36:57.863

可以找到一个通用的解决方案，为一个线程或多个线程正确获取工作频率。这不需要管理员/根权限或访问模型特定的寄存器。我已经在英特尔处理器上的 Linux 和 Windows 上对此进行了测试，包括 Nahalem、Ivy Bridge 和 Haswell，一个插槽最多四个插槽（40 个线程）。结果与正确答案的偏差均小于 0.5%。在我向您展示如何执行此操作之前，让我展示一下结果（来自 GCC 4.9 和 MSVC2013）：

```
Linux:    E5-1620 (Ivy Bridge) @ 3.60GHz    
1 thread: 3.789, 4 threads: 3.689 GHz:  (3.8-3.789)/3.8 = 0.3%, 3.7-3.689)/3.7 = 0.3%

Windows:  E5-1620 (Ivy Bridge) @ 3.60GHz
1 thread: 3.792, 4 threads: 3.692 GHz: (3.8-3.789)/3.8 = 0.2%, (3.7-3.689)/3.7 = 0.2%

Linux:  4xE7-4850 (Nahalem) @ 2.00GHz
1 thread: 2.390, 40 threads: 2.125 GHz:, (2.4-2.390)/2.4 = 0.4%, (2.133-2.125)/2.133 = 0.4%

Linux:    i5-4250U (Haswell) CPU @ 1.30GHz
1 thread: within 0.5% of 2.6 GHz, 2 threads wthin 0.5% of 2.3 GHz

Windows: 2xE5-2667 v2 (Ivy Bridge) @ 3.3 GHz
1 thread: 4.000 GHz, 16 threads: 3.601 GHz: (4.0-4.0)/4.0 = 0.0%, (3.6-3.601)/3.6 = 0.0% 
```

我从这个链接 [http://randomascii.wordpress.com/2013/08/06/defective-heat-sinks-causing-garbage-gaming/得到了这个想法](http://randomascii.wordpress.com/2013/08/06/defective-heat-sinks-causing-garbage-gaming/)

要做到这一点，你首先要做 20 年前所做的事情。您编写一些带有循环的代码，您知道延迟和时间。这是我使用的：

```
static int inline SpinALot(int spinCount)
{
    __m128 x = _mm_setzero_ps();
    for(int i=0; i<spinCount; i++) {
        x = _mm_add_ps(x,_mm_set1_ps(1.0f));
    }
    return _mm_cvt_ss2si(x);
} 
```

这具有携带循环依赖性，因此 CPU 无法对其重新排序以减少延迟。每次迭代总是需要 3 个时钟周期。操作系统不会将线程迁移到另一个内核，因为我们将绑定线程。

然后在每个物理核心上运行这个函数。我用 OpenMP 做到了这一点。线程必须为此绑定。在带有 GCC 的 linux 中，您可以使用`export OMP_PROC_BIND=true`绑定线程并假设您也有`ncores`物理内核`export OMP_NUM_THREADS=ncores`。如果您想以编程方式绑定并查找英特尔处理器的物理内核数量，请参阅此[programatically-detect-number-of-physical-processors-cores-or-if-hyper-threading](https://stackoverflow.com/questions/2901694/programatically-detect-number-of-physical-processors-cores-or-if-hyper-threading/24824554#24824554)和[thread-affinity-with-windows-msvc-和-openmp](https://stackoverflow.com/questions/24862488/thread-affinity-with-windows-msvc-and-openmp)。

```
void sample_frequency(const int nsamples, const int n, float *max, int nthreads) {
    *max = 0;
    volatile int x = 0;
    double min_time = DBL_MAX;
    #pragma omp parallel reduction(+:x) num_threads(nthreads)
    {
        double dtime, min_time_private = DBL_MAX;
        for(int i=0; i<nsamples; i++) {
             #pragma omp barrier
             dtime = omp_get_wtime();
             x += SpinALot(n);
             dtime = omp_get_wtime() - dtime;
             if(dtime<min_time_private) min_time_private = dtime;
        }
        #pragma omp critical
        {
            if(min_time_private<min_time) min_time = min_time_private;
        }
    }
    *max = 3.0f*n/min_time*1E-9f;
} 
```

最后循环运行采样器并打印结果

```
int main(void) {
    int ncores = getNumCores();
    printf("num_threads %d, num_cores %d\n", omp_get_max_threads(), ncores);       
    while(1) {
        float max1, median1, max2, median2;
        sample_frequency(1000, 1000000, &max2, &median2, ncores);
        sample_frequency(1000, 1000000, &max1, &median1,1);          
        printf("1 thread: %.3f, %d threads: %.3f GHz\n" ,max1, ncores, max2);
    }
} 
```

我没有在 AMD 处理器上测试过这个。我认为带有模块的 AMD 处理器（例如 Bulldozer）必须绑定到每个模块而不是每个 AMD“核心”。这可以通过`export GOMP_CPU_AFFINITY`GCC 来完成。[您可以在https://bitbucket.org/zboson/frequency](https://bitbucket.org/zboson/frequency)找到一个完整的工作示例，该示例适用于英特尔处理器上的 Windows 和 Linux，并且将正确找到英特尔处理器的物理内核数量（至少从 Nahalem 开始）并将它们绑定到每个物理核心（不使用`OMP_PROC_BIND`MSVC 没有的）。

* * *

由于 SSE、AVX 和 AVX512 的频率缩放不同，因此必须针对现代处理器稍微修改此方法。

这是我在使用四个 Xeon 6142 处理器（每个处理器 16 个内核）修改我的方法（参见表后的代码）后得到的一个新表。

```
 sums  1-thread  64-threads
SSE        1       3.7         3.3
SSE        8       3.7         3.3
AVX        1       3.7         3.3
AVX        2       3.7         3.3
AVX        4       3.6         2.9
AVX        8       3.6         2.9
AVX512     1       3.6         2.9
AVX512     2       3.6         2.9
AVX512     4       3.5         2.2
AVX512     8       3.5         2.2 
```

这些数字与此表中的频率一致 [https://en.wikichip.org/wiki/intel/xeon_gold/6142#Frequencies](https://en.wikichip.org/wiki/intel/xeon_gold/6142#Frequencies)

有趣的是，我现在需要至少进行 4 次并行求和才能获得较低的频率。Skylake 上 addps 的延迟为 4 个时钟周期。这些可以转到两个端口（AVX512 端口 0 和 1 保险丝进行计数，一个 AVX512 端口和其他 AVX512 操作转到端口 5）。

这是我如何进行八次平行求和的。

```
static int inline SpinALot(int spinCount) {
  __m512 x1 = _mm512_set1_ps(1.0);
  __m512 x2 = _mm512_set1_ps(2.0);
  __m512 x3 = _mm512_set1_ps(3.0);
  __m512 x4 = _mm512_set1_ps(4.0);
  __m512 x5 = _mm512_set1_ps(5.0);
  __m512 x6 = _mm512_set1_ps(6.0);
  __m512 x7 = _mm512_set1_ps(7.0);
  __m512 x8 = _mm512_set1_ps(8.0);
  __m512 one = _mm512_set1_ps(1.0);
  for(int i=0; i<spinCount; i++) {
    x1 = _mm512_add_ps(x1,one);
    x2 = _mm512_add_ps(x2,one);
    x3 = _mm512_add_ps(x3,one);
    x4 = _mm512_add_ps(x4,one);
    x5 = _mm512_add_ps(x5,one);
    x6 = _mm512_add_ps(x6,one);
    x7 = _mm512_add_ps(x7,one);
    x8 = _mm512_add_ps(x8,one);
  }
  __m512 t1 = _mm512_add_ps(x1,x2);
  __m512 t2 = _mm512_add_ps(x3,x4);
  __m512 t3 = _mm512_add_ps(x5,x6);
  __m512 t4 = _mm512_add_ps(x7,x8);
  __m512 t6 = _mm512_add_ps(t1,t2);
  __m512 t7 = _mm512_add_ps(t3,t4);
  __m512  x = _mm512_add_ps(t6,t7);
  return _mm_cvt_ss2si(_mm512_castps512_ps128(x));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-29T04:30:08.490

您如何找到 CPU 频率取决于架构和操作系统，并且没有抽象的解决方案。

如果我们是 20 多年前，并且您使用的操作系统没有上下文切换，并且 CPU 按顺序执行给定的指令，您可以在循环中编写一些 C 代码并对其计时，然后根据它编译成的程序集计算运行时的指令数。这已经假设每条指令需要 1 个时钟周期，这是自流水线处理器以来的一个相当糟糕的假设。

但是任何现代操作系统都会在多个进程之间切换。即使这样，您也可以尝试为一堆相同的`for`循环运行计时（忽略页面错误所需的时间以及处理器可能会停止的多种其他原因）并获得一个中值。

即使以前的解决方案有效，您也有多个问题处理器。对于任何现代处理器，重新排序指令、在同一时钟周期内发出一堆指令，甚至将它们拆分到内核之间都是公平的游戏。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T04:59:30.440

CPU频率是硬件相关的东西，所以没有通用的方法可以应用它，它也取决于你使用的操作系统。

例如，如果您使用的是 Linux，您可以读取文件***/proc/cpuinfo***或者您可以解析***dmesg***启动日志以获取此值，或者如果您愿意，您可以在此处查看 linux 内核如何处理这些内容并尝试自定义代码满足您的需求：

[https://github.com/torvalds/linux/blob/master/arch/x86/kernel/cpu/proc.c](https://github.com/torvalds/linux/blob/master/arch/x86/kernel/cpu/proc.c)

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T17:19:49.973

我想从软件中获取时钟频率的一种方法是将硬件参考手册（HRM）的知识硬编码到软件中。您可以从软件中读取时钟配置寄存器。假设您知道源时钟频率，软件可以使用时钟寄存器中的乘法器和除法器值，并应用 HRM 中提到的适当公式来推导时钟频率。

# c++ - 是否可以编写一个在函数范围内使用时会报错的宏？

> ID：11706576
> 
> 赞同：2
> 
> 时间：2012-07-29T04:10:03.133
> 
> 标签：c++, macros, c-preprocessor, preprocessor-directive

我有一个我只想在文件范围内调用的宏。如果在函数中使用它可以以某种方式（在编译时或运行时）抱怨，那就太好了。这可能吗？

编辑：到目前为止回复评论：我有在我的代码库中重复使用的静态对象。我创建了宏来更快地创建这些对象，因为这些对象在所有地方都使用，以至于节省击键对于生产力/烦恼很重要。

到目前为止，我一直在函数中将这些对象创建为静态对象。最近发现这不是线程安全的。我决定将所有这些对象移出函数，以便在程序启动时创建它们而不是懒惰地创建它们。我只是认为有一个故障保险可以防止这个错误在未来再次出现。

需要明确的是，这根本不会阻碍进展。如果它很容易/可能的话，这只是我认为对宏的一个很好的补充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T04:26:19.160

您正在寻找的是一个在文件级别但不在函数级别工作的构造。在我的脑海中，命名空间应该符合要求。

```
#define FOO(x) namespace { x }

FOO(int bar = 42;) // Compiles

void f() {
    FOO(int bar = 42;) // Doesn't compile
} 
```

由于我不确切知道您要包装什么，因此我使此宏尽可能简单。任何实际的实现都应该使用标准的宏创建技巧来确保它是好的和安全的。

请注意，匿名命名空间将使在其中创建的每个对象仅对当前编译单元可见。在您的情况下，这应该不是问题，因为您的对象曾经在函数级别声明，因此在当前编译单元之外不可见。

# java - 在 Java 中添加 2 个 BitSet

> ID：11706577
> 
> 赞同：0
> 
> 时间：2012-07-29T04:10:21.137
> 
> 标签：java, bit-manipulation, bitwise-operators, bits

嗯，我需要在java中添加两个BitSet ..我已经尝试使用XOR（求和）和AND（用于进位）的基本运算来添加..**考虑到进位**..

但答案并不完全正确......这就是我尝试过的......

```
public static BitStorage Add(int n, BitStorage ...manyBitSets)
{
    BitStorage sum = new BitStorage(0, n);      //discarding carry out of MSB
    System.out.print("Addition of: ");
    for(BitStorage bitStorage:manyBitSets)
    {
        //System.out.print(sum+"\t");
        //System.out.print(bitStorage+"\t");
        System.out.println("~~~~~");
        for(int i=n-1;i>=0;i--)
        {
            if(i==n-1)
            {
                System.out.println(sum + " + " +bitStorage);
                sum.set(i, sum.get(i)^bitStorage.get(i));
                //System.out.println(sum.get(i)+" XOR "+bitStorage.get(i));
            }
            else
            {
                System.out.println(sum + " + " +bitStorage+"\t"+(sum.get(i)?"1":"0"+"^"+(bitStorage.get(i)?"1":"0")+"^"+(sum.get(i+1)?"1":"0"+"&"+(bitStorage.get(i+1)?"1":"0"))));
                sum.set(i, sum.get(i)^bitStorage.get(i)^(sum.get(i+1)&bitStorage.get(i+1)));      //carry taken here
                //System.out.println(sum.get(i)+" XOR "+bitStorage.get(i)+" XOR ("+bitStorage.get(i+1)+" AND "+sum.get(i+1));
            }
        }
    }   
    return sum;
} 
```

PS：BitStorage 类不过是 BitSet 的自己的实现，带有一些附加方法 .. 像 Add、Subtract、Shift 等

它有 2 个成员：

1.  一个整数 (n) 作为最大大小（我不希望向量的增长或缩小影响按位运算 => 因此所有操作都在 n 完成）-> 例如：n 为 4，然后位在 BitSet 中占据位置 o 到 3
2.  一个大小为 n 的 BitSet 对象传递给构造函数

还有2点：

*   **我想将它转换为长数组或字节数组，然后添加，但我只需要 JDK 6 而不是 7 中的解决方案**
*   **我不需要从 MSB 生成的进位，我想要相同的 no(bits) 的答案，即 n**

很抱歉多次使用“我想要……”……有点累。.尝试了很多东西！嗯，我需要这个作为算法的一部分..期待回复.. :) :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:12:42.620

我累了，如果它很丑，请原谅我。你的携带方法完全被破坏了并且设置了错误的位，即使它不应该设置任何东西。您应该向上计数，因此，没有理由对最后一位进行特殊处理，进位就会消失。通过实际将最后一个结果带到下一个循环迭代中，逻辑要简单得多。

```
public static BitStorage Add(int n, BitStorage ...manyBitSets)
{
    BitStorage sum = new BitStorage(0, n);      //discarding carry out of MSB
    System.out.print("Addition of: ");
    for(BitStorage bitStorage:manyBitSets)
    {
        boolean carry = false;
        boolean lastcarry = false;
        //System.out.print(sum+"\t");
        //System.out.print(bitStorage+"\t");
        System.out.println("~~~~~");
        for(int i=0;i<n;i++)
        {
                System.out.println(sum + " + " +bitStorage+"\t"+(sum.get(i)?"1":"0"+"^"+(bitStorage.get(i)?"1":"0")+"^"+(sum.get(i+1)?"1":"0"+"&"+(bitStorage.get(i+1)?"1":"0"))));
                lastcarry = carry;
                carry = sum.get(i) && bitStorage.get(i);
                sum.set(i, lastcarry^sum.get(i)^bitStorage.get(i));      //carry taken here
                //System.out.println(sum.get(i)+" XOR "+bitStorage.get(i)+" XOR ("+bitStorage.get(i+1)+" AND "+sum.get(i+1));
        }
    }   
    return sum;
} 
```

我对变量使用布尔值，因为我将类构建为 BitSet 上的瘦包装器，如果您使用 int 或其他任何东西而不是更改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T08:00:08.880

嗯，这是一个有趣的问题，让我猜测了一段时间......

我无法先推导出逻辑，但随后我切换回基础知识并推导`boolean expression`出 3 位操作的求和和进位计算，这是解决方案：

```
public static BitSet addBitSet(int n, List<BitSet> bitSetList){
    BitSet sumBitSet = new BitSet(n);
    for (BitSet firstBitSet : bitSetList) {
        BitSet secondBitSet = (BitSet) sumBitSet.clone();
        System.out.println("A:  " + printBitSet(firstBitSet, 6));
        System.out.println("B:  " + printBitSet(secondBitSet, 6));
        boolean carryForNext = false, sum,a,b,c;
        for (int i = n - 1; i >= 0; i--) {
            a=firstBitSet.get(i);
            b=secondBitSet.get(i);
            c=carryForNext;
            sum = a&!b&!c|!a&!b&c|!a&b&!c|a&b&c;
            carryForNext = a&b&!c|a&!b&c|!a&b&c|a&b&c;
            sumBitSet.set(i,sum);
        }
        System.out.println("SUM:" + printBitSet(sumBitSet, 6));
    }
    System.out.println(printBitSet(sumBitSet, 6));
    return sumBitSet;
} 
```

这是代码`printBitSet`：

```
public static String printBitSet(BitSet bitSet, int size) {
    StringBuilder builder = new StringBuilder("");
    for (int i = 0; i < size; i++) {
        if (bitSet.get(i))
            builder.append("1");
        else
            builder.append("0");
    }
    return builder.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:36:11.980

我发现了这个错误..这是进位的问题..而不是使用相同的逻辑..我选择了另一个逻辑..只是对两个数字进行异或（得到总和）..并再次将其视为一个数字相加它到一个具有进位的数字（从原始数字与运算中获得）.. AND 输出（进位）在每次迭代中左移.. 因为 LSB 侧位加法没有任何要添加的进位

当进位位集全为 0（假）时，我们停止循环

一个例子：

1.  0001
2.  +0011
3.  =0010 -->（异或=总和）
4.  +0010 -->（AND输出=进位..左移后显示，现在将添加到XOR输出）
5.  =0000 -->（异或=总和）
6.  +0100 -->（AND输出=进位..左移后显示，现在将添加到XOR输出）
7.  =0100 -->(XOR = sum ..**最终答案**)
8.  0000 -->（AND 输出 = 进位 .. 左移后显示 .. 我们在这里停止 .. 停止，因为都是 0））

一个样品 ：）

```
import java.util.*;
public class BitSetAddition
{
static String nums[] = {"0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"};
public static void main(String args[])
{
    for(int q=0;q<nums.length;q++)
    {
        System.out.print(q+1+" -> ");
        BitSet b1 = new BitSet();
        String s = nums[q];
        b1.set(0, s.charAt(0)=='1'?true:false);
        b1.set(1, s.charAt(1)=='1'?true:false);
        b1.set(2, s.charAt(2)=='1'?true:false);
        b1.set(3, s.charAt(3)=='1'?true:false);

        for(int i=0;i<4;i++)
            System.out.print(b1.get(i)?"1":"0");
            System.out.print(" + ");

        BitSet b2 = new BitSet();
        String a = "0001";
        b2.set(0, a.charAt(0)=='1'?true:false);
        b2.set(1, a.charAt(1)=='1'?true:false);
        b2.set(2, a.charAt(2)=='1'?true:false);
        b2.set(3, a.charAt(3)=='1'?true:false);

        for(int i=0;i<4;i++)
            System.out.print(b2.get(i)?"1":"0");
            System.out.print(" = ");

        BitSet sum = new BitSet();
        BitSet carry = new BitSet();
        BitSet toAdd = new BitSet();
        BitSet tempSum = new BitSet();
        BitSet tempCarry = new BitSet();

        sum = b1;
        toAdd = b2;
        do
        {
            copy(4, tempSum, sum);
            copy(4, tempCarry, toAdd);
            tempSum.xor(toAdd);
            tempCarry.and(sum);
            copy(4, sum, tempSum);
            copy(4, carry, leftShift(4, tempCarry));
            copy(4, toAdd, carry);
            //sum.set(i, b1.get(i)^b2.get(i)^(b1.get(i+1)&b2.get(i+1)));
        }while(!carry.equals(new BitSet()));
            //if(i+2<=3)
                //sum.set(i, b1.get(i)^b2.get(i)^(b1.get(i+1)&b2.get(i+1)&(b1.get(i+2)&(b2.get(i+2)))));
            //else if(i+1<=3)
                //sum.set(i, b1.get(i)^b2.get(i)^(b1.get(i+1)&b2.get(i+1)));
            //else
                //sum.set(i, b1.get(i)^b2.get(i));
        for(int i=0;i<4;i++)
            System.out.print(sum.get(i)?"1":"0");

        System.out.println();
    }
}
static void copy(int n,BitSet b, BitSet toCopy)
{
    for(int i=0;i<n;i++)
        b.set(i, toCopy.get(i));
}
static BitSet leftShift(int n, BitSet b)
{
    for(int i=0;i<n;i++)
        b.set(i, b.get(i+1));
        b.set(n-1, false);
        return b;
}
} 
```

程序中的注释是我以前的逻辑.. 我发现我以前的逻辑更复杂:P .. 如果你愿意，请忽略程序的注释:)

**注意：我不想要 MSB 位加法产生的进位 .. 根据算法（我需要这个）.. 所以答案（总和）具有相同的位数.. 任何人都可以根据需要进行调整:)**

# android - Android 4.0.3 在 logcat 窗口中没有应用程序日志输出

> ID：11706584
> 
> 赞同：0
> 
> 时间：2012-07-29T04:11:10.457
> 
> 标签：android, logging

我正在使用带有最新 ADT 插件和 Android SDK 的 Android 4.0.3 设备和 eclipse 4.2。

我已经使用“MyHelloWorld”项目测试了 Android 设备。项目运行正常。我还在 MainActivity 的 onCreate 方法中添加了一些“Log.i”、“Log.v”语句。但是，我发现这些 Log 语句不会在 eclipse logcat 窗口中生成任何输出。eclipse logcat 窗口确实有一些与“MyHelloWorld”项目相关的输出（例如来自“Dalvik”java 引擎的消息），但来自“Log.i”、“Log.v”语句的消息不存在。

我的 Android 4.0.3 设备是无根设备，我无法直接从“/dev/log/main”读取以检查“Log.i”、“Log.v”语句是否已将任何内容写入 Android 日志。

我想知道我是否错过了我的 Android 手机和/或我的 Eclipse 设置中的一些设置？我该怎么做才能检查“Log.i”、“Log.v”语句是否写了什么？如果我只想从我的 Android 程序中获得一些调试输出（输出变量值），我可以使用与 "Log.i", "Log.v" 完成相同工作的其他方法吗？

感谢您的任何建议。

（eclipse 3.7.2 的问题也是一样的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-24T08:26:48.600

它可能很笨，或者我的问题错了，但你可以使用：

```
 System.out.println("You can print things in console with this.");
 int myVariable = 1101;
 System.out.println("You can print variable values:" + myVariable); 
```

这样您就可以在不使用 Log.v 的情况下在 LogCat 中获得输出

# ios - iOS 配置仍然无法正常工作 - 密钥和 cer。未连接？

> ID：11706591
> 
> 赞同：0
> 
> 时间：2012-07-29T04:12:25.003
> 
> 标签：ios, xcode, ios5, xcode4.3

在阅读了无数指南、教程和介绍之后，我仍然无法将我的应用程序安装到我的设备上。我有 2 个密钥（实际上更像是 20 个，因为我尝试了很多次）和 4 个证书，但是证书和密钥并没有像应有的那样连接起来。我想我没有在 Apple 开发网站上的配置教程启动器中正确连接它。我该如何手动完成？我已经完成了所有可能的组合，使用了我可以使用的所有工具，但它只是不起作用。每次我尝试安装 cer，它应该允许我将其连接到密钥时，它只会打开登录密钥。这与我见过的每个教程相反，它说双击文件可以安装它。我敢肯定，我只是一直在犯一些小错误，但如果你能帮助我，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:39:13.787

转到您的 xcode 管理器并尝试刷新。（请参阅配置文件部分的右下角按钮）![在此处输入图像描述](../Images/0f7d6fc458c1b27eb2b44b9eec570ed1.png)

![在此处输入图像描述](../Images/f0864b3b9afe0737430df4eb40edde9c.png)

# mysql - 数据库设计 - 困惑

> ID：11706592
> 
> 赞同：2
> 
> 时间：2012-07-29T04:12:51.597
> 
> 标签：mysql, database, database-design

下图是我目前所拥有的。

[![到目前为止我所拥有的](../Images/cd7bf17640e5af42f9b80e3578683338.png)](https://i.stack.imgur.com/5wiiI.png)

# 该设计

## 发射器表

发射器有自己的属性，例如位置（以 x 和 y 表示）、id、级别以及上次更新此信息的时间。更重要的是，任何氏族成员都可以保护发射器。发射器**只能**由该氏族的成员保卫。一个发射器可以被许多玩家防守。

## 球员表

或者更确切地说，氏族成员。此表包含有关球员的具体信息。这也有关于 x 和 y 的位置以及关于该玩家的其他信息。（我可能也会在这里添加 lastupdated）一个玩家可以防御多个发射器。

## Emitter_Player 连接表

该表包含一个单一的emitter_player 组合。（假设存在这样的关系）让我先问一下这是否是发射器和玩家之间的适当关系？我认为这将是多对多的。现在，我可以让这一切变得简单，只需在这个连接表中添加防御点（我真正关心的是玩家在特定发射器中的“防御”程度）这也是正确的做法吗？但是，我想“第一次做对”，并添加有关玩家防御此发射器的每个特定单位的信息。

## 单位表

此表包含有关游戏中所有单位的信息。此表具有单位 ID 及其相关的防御和进攻值。这个表格很少会被插入，当它被插入时（新单位被添加到游戏中）它会被手动更新。

# 问题

## 修复设计

发射器不包含玩家之外的单位。玩家**必须**是发射器中每个单位的所有者。因此，发射器和单位之间没有关系。此外，虽然玩家可能在发射器之外有单位，但我不关心这个例子。我只关心发射器中的单元。所以，我认为 Emitter_Player 连接表和 Units 表之间会有多对多的关系。我的理由是，一个 Emitter_Player 组合可以很容易地拥有许多不同类型的单位，而一种类型的单位可以是许多不同的 Emitter_Player 组合。

## 插入信息

有了两个连接表，我现在对如何将信息插入这个数据库感到非常困惑。

## 查询信息

同样，我非常迷茫如何从这个数据库中访问信息。

# 目标

## 图表

我想最终创建图表（来自玩家和发射器）显示他们随时间的进步。我将如何查询这个我不知道。

## 每周变化

我希望能够告知玩家自上周以来他们是否取得了进步或失去了进步。（在这种情况下，标记它们以供审查）

## 结论

我试图尽可能详细地说明这一点，如果您需要更多信息，请告诉我。我希望尽快完成这项工作，我真的完全失去了任何进一步的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:30:56.447

您的起步相当不错，但我建议您提出一些建议：

在我看来，您可以将`emitters_has_players_has_units`表格合并到`emitters_has_players`表格中。只需`unit_id`在 的主键中创建第三个组件`emitters_has_players`：

![在此处输入图像描述](../Images/4efae91689144b679b6103ff0178fb42.png)

您还会注意到我在特定关联中添加了一个`quantity`列。`emitter-player-unit`这对于跟踪特定玩家针对特定发射器拥有多少特定单元是必要的。

在整个数据库中保持列名一致也是一种很好的做法。您最初命名 id 列的方式很长（因为它包含完整的表名作为前缀）。

* * *

因此，这里有一些示例说明如何查询上述设计：

```
-- Get all associated emitters of a particular player
SELECT a.*
FROM   emitters a
JOIN
(
    SELECT DISTINCT emitter_id 
    FROM emitters_has_players 
    WHERE player_id = 1
) b ON a.emitter_id = b.emitter_id 
```

* * *

```
-- Get all players associated with a particular emitter
SELECT a.*
FROM   players a
JOIN
(
    SELECT DISTINCT player_id 
    FROM emitters_has_players 
    WHERE emitter_id = 1
) b ON a.player_id = b.player_id 
```

* * *

```
-- Get the count of players for a particular emitter
SELECT COUNT(DISTINCT player_id) AS player_count
FROM   emitters_has_players
WHERE  emitter_id = 1 
```

* * *

```
-- Get all units associated with a particular player-emitter association
SELECT b.*
FROM   emitters_has_players a
JOIN   units b ON a.unit_id = b.unit_id
WHERE  a.emitter_id = 1 AND a.player_id = 1 
```

* * *

```
-- Get the defense points of a particular player-emitter association
SELECT   SUM(b.averagedefense * a.quantity) AS total_def_pts
FROM     emitters_has_players a
JOIN     units b ON a.unit_id = b.unit_id
WHERE    a.emitter_id = 1 AND a.player_id = 1 
```

* * *

```
-- Create a new player-emitter-unit association
INSERT INTO emitters_has_players 
VALUES (1,1,1,1) -- Where the fourth "1" is the quantity of units initially. 
```

* * *

```
-- Player adds on one more of a particular unit for a particular emitter
UPDATE emitters_has_players
SET    qty = qty + 1
WHERE  emitter_id = 1 AND
       player_id  = 1 AND
       unit_id    = 1 
```

# javascript - Chrome 没有正确地将值应用于正在“监视”的输入

> ID：11706594
> 
> 赞同：0
> 
> 时间：2012-07-29T04:13:09.987
> 
> 标签：javascript, google-chrome, object, post, watch

我有一个隐藏的表单，它与一个更图形/用户友好的界面交互，其中一个隐藏的输入被以下功能“监视”：

```
 $('#mag-pg input')[0].watch('value', function(prop, oldval, newval){
    if(printRef instanceof Object){
        var curSz = $('#mag-sz input').val();
        toggleBtn($('#mag-sz button'), 'inactive');
        for(u in printRef[newval]){
            toggleBtn($('#mag-sz button[value='+u+"]"), 'active');
        }
        $('#mag-sz button[value='+curSz+']').click();
    }
    updateOrderInfo();
    console.log(newval);
    return newval;
}); 
```

手表功能如下：

```
if (!Object.prototype.watch) {
Object.defineProperty(Object.prototype, "watch", {
      enumerable: false
    , configurable: true
    , writable: false
    , value: function (prop, handler) {
        var
          oldval = this[prop]
        , newval = oldval
        , getter = function () {
            return newval;
        }
        , setter = function (val) {
            oldval = newval;
            return newval = handler.call(this, prop, oldval, val);
        }
        ;

        if (delete this[prop]) { // can't watch constants
            Object.defineProperty(this, prop, {
                  get: getter
                , set: setter
                , enumerable: true
                , configurable: true
            });
        }
    }
}); 
```

}

这工作得很好，直到我尝试提交隐藏的表单。问题是 Chrome 没有提交正在观看的隐藏输入的值。这很奇怪，因为使用控制台检查输入的值会返回正确的值。我已经使用 fiddler 检查了 HTTP 请求，并且输入的值肯定没有被发送到服务器。因此，Chrome 似乎没有正确地将新值应用到输入，即使控制台会提出其他建议。我想知道是否有人以前看过这个，或者我的手表是否有问题。

我不想取下手表，因为它的重点是确保同步。这个应用程序很复杂，如果没有观察到的价值，应用程序的不同部分很容易在应该更新的时候不更新。

每个其他浏览器都正确地将输入值提交给服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:10:27.360

那个手表的实现有点……不完整。也许这会更好？[https://gist.github.com/3196198](https://gist.github.com/3196198)

# html - 如果在primefaces中块

> ID：11706598
> 
> 赞同：0
> 
> 时间：2012-07-29T04:13:39.560
> 
> 标签：html, if-statement, datatable, primefaces, conditional

我有一个包含 int 变量的 bean。我想做这样的事情：

```
if(value==1)
    <div class='abc'/>
else if(value==2)
    <div class='mno'/>
else
    <div class='xyz'/>
.... 
```

由于不适用于数据表，我们如何在 Primefaces 中做到这一点？有人可以告诉我如何以任何方式实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T06:33:42.130

```
<div class="#{bean.style}" 
```

您在 Bean 类中的 getStyle() 方法返回所需的值。在 JSF 中，不要将逻辑放在 xhtml 上，将其编码在 backing bean 中并将其绑定到 ui。

# python - 通过 Python 中的 GUI 进行像素操作（poss PIL，Tkinter）

> ID：11706599
> 
> 赞同：0
> 
> 时间：2012-07-29T04:13:40.450
> 
> 标签：python, user-interface, tkinter, python-imaging-library, pixel

问题来了——

我正在编写一个程序，它将遍历一系列图像操作——既影响整个图像，也影响图像的一部分。我需要向用户（我自己）演示这些更改，以便我可以看到我的操作发生了什么问题。

我最初尝试使用 PIL 和 Tkinter 来执行此操作 - 但我什至无法将图像加载到 GUI 中 - 这是通过许多谷歌搜索从网络角落形成的一些代码：

```
from Tkinter import *
import Image, ImageDraw, ImageTk
import time

class Test(Frame):
    def __init__(self):
        Frame.__init__(self)
        self.c = Canvas(self, width=574, height=431, bg="red")
        self.c.pack()
        Button(self, text="Process", command=self.procImg).pack()
        Button(self, text="Quit", command=self.quit).pack()
    def procImg(self):
        t = time.time()
        self.flashImg = Image.open("./in_img/resize.bmp")
        #self.flashImg = flashImg.resize((574, 431))
        self.flashImg = self.flashImg.convert("L")
        #self.photo = ImageTk.BitmapImage(flashImg)
        self.c.photo = ImageTk.PhotoImage(self.flashImg)
        self.c.create_image(574, 431, anchor=NW, image=self.c.photo)
        self.c.create_rectangle(50, 50, 100, 100, fill="blue")
        self.update()
        print time.time()-t

t = Test()
t.pack()
t.mainloop() 
```

所以上面的代码很糟糕，我知道——但我想发布一些东西来证明我至少一直在做这件事。

任何人都可以向我建议一种使用 Python 解决这个问题的新方法吗？我宁愿不学习另一种语言——我是 Tkinter 库的新手，所以如果有其他东西更适合这个，我学习新库没有问题。

此外，仅供参考，“resize.bmp”图像是来自数码相机的调整大小的 .JPG。我也试过了，但没用——我真的需要找到一种方法来将位图从内存闪存到 GUI 中的屏幕，这样我就可以在处理过程中调整参数。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:32:01.930

图像可能在那里。它只是不可见。

代替 ：

```
self.c.create_image(574, 431, anchor=NW, image=self.c.photo) 
```

尝试 ：

```
self.c.create_image(0, 0, anchor=NW, image=self.c.photo) 
```

* * *

此外，如果您保留对画布图像项的引用，则可以交换不同的图像。

例如。(self.canvasItem) 下面：

```
from Tkinter import * 
from PIL import Image, ImageTk, ImageDraw, ImageOps, ImageEnhance

class ImageButcher(Tk):
    def __init__(self):
        Tk.__init__(self)

        #create ui
        f = Frame(self, bd=2)

        self.colour = StringVar(self)
        self.colourMenu = OptionMenu(f, self.colour,
                                     *('red','green','blue','white'))
        self.colourMenu.config(width=5)
        self.colour.set('red')
        self.colourMenu.pack(side='left')

        self.rectangleButton = Button(f, text='Rectangle',
                                    command=self.draw_rectangle)
        self.rectangleButton.pack(side='left')

        self.brightenButton = Button(f, text='Brighten',
                                    command=self.on_brighten)
        self.brightenButton.pack(side='left')

        self.mirrorButton = Button(f, text='Mirror',
                                    command=self.on_mirror)
        self.mirrorButton.pack(side='left')
        f.pack(fill='x')

        self.c = Canvas(self, bd=0, highlightthickness=0,
                        width=100, height=100)
        self.c.pack(fill='both', expand=1)

        #load image
        im = Image.open('IMG_1584.JPG')
        im.thumbnail((512,512))

        self.tkphoto = ImageTk.PhotoImage(im)
        self.canvasItem = self.c.create_image(0,0,anchor='nw',image=self.tkphoto)
        self.c.config(width=im.size[0], height=im.size[1])

        self.img = im
        self.temp = im.copy() # 'working' image

    def display_image(self, aImage):
        self.tkphoto = pic = ImageTk.PhotoImage(aImage)
        self.c.itemconfigure(self.canvasItem, image=pic)

    def on_mirror(self):
        im = ImageOps.mirror(self.temp)
        self.display_image(im)
        self.temp = im

    def on_brighten(self):
        brightener = ImageEnhance.Brightness(self.temp)
        self.temp = brightener.enhance(1.1) # +10%
        self.display_image(self.temp)

    def draw_rectangle(self):
        bbox = 9, 9, self.temp.size[0] - 11, self.temp.size[1] - 11        
        draw = ImageDraw.Draw(self.temp)
        draw.rectangle(bbox, outline=self.colour.get())
        self.display_image(self.temp)

app = ImageButcher()
app.mainloop() 
```

# asp.net - 为什么网站要加密个人资料名称？

> ID：11706607
> 
> 赞同：0
> 
> 时间：2012-07-29T04:14:22.553
> 
> 标签：asp.net, query-string, security

我访问的每个网站：microsoft.com、gmail、minecraft.net、yahoo.com，除了 facebook，查看某人的个人资料，个人资料页面的查询字符串都是加密的。我的意思是个人资料页面名称是加密的。为什么是这样？为什么查询字符串不能是这样的： www.minecraft.com/profilepage.aspx?ProfilePageName=Fred 而不是 www.minecraft.com/profilepage.aspx?mts=ee3234423edder3443e

对于我的网站，查询字符串就像 pp=Fred 一样简单，我担心这样做会带来安全风险。有没有？还是网站只是过度保护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:18:56.003

阻止您猜测个人资料页面。取决于网站，这可能是好事还是坏事

停止通过 http referrer 标头泄漏用户名

如果用户可以更改他们的个人资料名称，则可以减少页面中断（或完全错误）的机会。例如 - 我是您网站的会员，我的名字是 Bob。然后我把它改成布鲁斯。任何与 Bob 关联的人都可能会收到 404，或者可能会收到另一个 Bob

# django - 为什么我的 Django 应用程序中的管理页面没有引用正确的 CSS URL？

> ID：11706608
> 
> 赞同：1
> 
> 时间：2012-07-29T04:14:42.257
> 
> 标签：django, django-admin

当我访问我的 Django 应用程序的管理页面时，我注意到它们在地址中引用了 CSS，例如`admin/css/base.css`. 但是，我注意到管理 css 文件实际上位于诸如`media/css/base.css`.

因此，CSS 不会加载到我的管理页面中。为什么会这样？我试图在我的服务器上手动移动 CSS 文件以容纳管理页面 URL，但这是不可靠的，因为管理页面中引用的 CSS URL 是相对的（因此每个页面都会更改）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:47:51.090

注意 - 根据[https://docs.djangoproject.com/en/dev/releases/1.4/#django-contrib-admin ，我之前的答案已被 Django 1.4 弃用](https://docs.djangoproject.com/en/dev/releases/1.4/#django-contrib-admin)

如果您使用的是 Django 1.4，只需将 STATIC_URL 设置指向适当的位置，例如

```
STATIC_URL = '/static/' 
```

或者

```
STATIC_URL = 'https://bucket-name.s3.amazonaws.com/static/' 
```

并且您的管理静态文件将自动放在 STATIC_URL+'admin/'。这可能就是您的管理文件在 /admin/css 中引用 css 的原因。问题是为什么实际文件位于 /media/css - 您是否手动上传它们？collectstatic 会把它们放在那里吗？尝试 collectstatic 并查看它是否将 admin/css 文件放在适当的位置，然后将其上传到服务器。

* * *

/static/admin/css 是管理 css 文件的默认位置。你的设置正确吗？

```
ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

当您使用

```
python manage.py collectstatic 
```

命令。如果您将其更改为

```
ADMIN_MEDIA_PREFIX = '/static/media/' 
```

我会假设 css 文件将被收集在 /static/media/css 中（尽管我没有对此进行测试）。

另外，为什么手动移动 css 文件不起作用？并不是说我会推荐它（应该使用 python manage.py collectstatic 将所有静态文件收集到一个统一的位置），但是如果您将它们移动到 /static/admin/css 这应该仍然是您的 CSS 文件所引用的， 正确的？

请注意，您也可以将 ADMIN_MEDIA_PREFIX 设为绝对值。我的设置为我的 s3 存储桶，例如

```
ADMIN_MEDIA_PREFIX = 'https://bucket-name.s3.amazonaws.com/static/admin/' 
```

# linux - 如何从网站中提取图像链接并使用 wget 下载它们？

> ID：11706609
> 
> 赞同：6
> 
> 时间：2012-07-29T04:14:42.837
> 
> 标签：linux, wget

我真的很想从网站下载图像，但我不知道很多 wget 这样做。他们将图像托管在一个单独的网站上，我如何使用 cat 或其他东西从网站上提取图像链接，所以我可以使用 wget 来下载它们。我只知道 wget 部分。例如 Reddit.com

```
 wget -i download-file-list.txt 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T07:16:52.240

试试这个：

```
wget -r -l 1 -A jpg,jpeg,png,gif,bmp -nd -H http://reddit.com/some/path 
```

从页面开始递归1级`http://reddit.com/some/path`，不会创建目录结构（如果要目录，去掉`-nd`），只会下载以“jpg”、“jpeg”、“png”、“”结尾的文件gif”或“bmp”。它将跨越主机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T09:08:38.243

我会使用`perl`模块`WWW::Mechanize`。以下将所有链接转储到`stdout`：

```
use WWW::Mechanize;

$mech = WWW::Mechanize->new();
$mech->get("URL");
$mech->dump_links(undef, 'absolute' => 1); 
```

替换`URL`为您想要的实际网址。

# magento - 我的 Magento 网站在导航链接中显示了一个随机短语

> ID：11706610
> 
> 赞同：1
> 
> 时间：2012-07-29T04:15:12.287
> 
> 标签：magento

我有以下 Magento 网站 - [www.comfyfrog.com](http://www.comfyfrog.com/)但似乎无法找到标题中随机地址文本的来源。

有人可以帮忙吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:01:17.383

我会尝试在 Admin > Settings > Developper 中启用模板提示，以找出正在输出文本的模板文件或块。它通常有助于理解页面的结构。

# ruby-on-rails - 在 phusion 乘客 (nginx) 上部署 >ROR 3 (version >3) 应用程序

> ID：11706611
> 
> 赞同：0
> 
> 时间：2012-07-29T04:15:25.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, nginx, passenger

我是一个新手，正在尝试在 nginx 上学习 ROR。所以我安装了phusion。

我的堆栈是 RUBY ON RAILS 版本：3.2.6 NGINX 版本：1.2.2 RVM 版本：1.14.6 stable MONGODB 版本：2.0.6 CENTOS：6.3 我的 nginx conf 文件可以在[http://pastebin.com/70zYbCz3](http://pastebin.com/70zYbCz3)看到 在附图中你可以看到我的目录结构。我的 ror 应用程序“mkf”在 /web/ 文件夹中。

为了让我的 ror 应用程序通过 phusion 工作，我遵循[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_a_ror_app](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#deploying_a_ror_app)上的说明，但此说明适用于“部署 Ruby on Rails 1 .x 或 2.x（但不是 Rails >= 3）应用程序”

问题 1：由于我的 ROR 版本是 3.2.6，所以我迷路了，因为我找不到任何新版本 ROR 的文档/参考资料？如果有人可以显示要遵循的步骤或指向相关信息可用的链接，我将不胜感激。我用谷歌搜索，但在 phusion 上找不到 > ROR3 应用程序部署的任何信息。如果您可以通过参考我的 nginx conf 文件让我知道这些步骤，那就太好了，请参阅下面的下一条评论以查看我的应用程序目录结构的屏幕截图。

问题 2：同样在这个网站 guides.rubyonrails.org/getting_started.html 上，“4.1 启动 Web 服务器”要求使用“rails 服务器”来启动铁路服务器，但我认为一旦 nginx 是将通过 phusion 处理它的网络服务器..对吗？

我还没有在任何地方创建任何符号链接。

太感谢了。

# encryption - 反复加密（随机填充 + const int32） - 妥协秘密？

> ID：11706613
> 
> 赞同：1
> 
> 时间：2012-07-29T04:15:28.410
> 
> 标签：encryption, cryptography

**任何加密方案都可以安全地允许我重复加密相同的整数，每次都添加不同的随机材料吗？**这似乎是一种可能让我陷入困境的手术。

我想防止在我的 Web 应用程序中抓取项目，但仍然具有持久的项目 ID/URL，因此内容链接不会随着时间的推移而过期。我对此的安全要求并不高，但我宁愿不要做一些完全愚蠢的事情，这显然会泄露秘密。

```
// performed on each ID before transmitting item search results to the client
public int64 encryptWithRandomPadding(int32 id) {
    int32 randomPadding = getNextRandomInt32();
    return encrypt(((int64)randomPadding << 32) + id), SECRET);
}

// performed on an encrypted/padded ID for which the client requests details
public int32 decryptAndRemoveRandomPadding(int64 idToDecrypt) {
    int64 idWithPadding = decrypt(idToDecrypt, SECRET);
    return (int32)idWithPadding;
}

static readonly string SECRET = "thesecret"; 
```

生成的 ID/URL 是永久性的，加密的 ID 是稀疏填充的（uint32.Max 中小于 1 是唯一的，我可以添加另一个常量填充以减少存在猜测的可能性），并且客户端可以运行相同的搜索和每次使用不同的代表 ID 得到相同的结果。我认为它符合我的要求，除非存在明显的密码问题。

**例子：**

```
 encrypt(rndA + item1)   -> tokenA
 encrypt(rndB + item1)   -> tokenB
 encrypt(rndC + item2)   -> tokenC
 encrypt(rndD + item175) -> tokenD 
```

在这里，无法确定 tokenA 和 tokenB 都指向相同的项目；这可以防止蜘蛛删除重复的搜索结果而不检索它们（同时检索会增加使用量表）。此外，item2 可能不存在。

知道重新运行搜索将返回具有相同秘密的相同 int32 填充的多种方式，**我可以使用任何流行的加密算法安全地做到这一点**吗？谢谢，加密专家！

注意：这是一个没有像我希望的那样解决的问题的后续行动：[Encrypt integer with a secret and shared salt](https://stackoverflow.com/questions/11698242/encrypt-integer-with-a-secret-and-shared-salt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:52:51.330

如果您的加密是安全的，那么随机填充会使破解变得既不简单也不困难。对于这么短、一个块长的消息，要么一切都被破坏，要么什么都没有。即使使用流密码，您仍然需要密钥才能获得进一步的信息；良好加密的关键在于您不需要额外的随机性。如果可能的话，显然要避免零填充或其他至少在开始时至少一个块长的已知消息，但这不是这里的问题。这是纯粹的噪音，一旦有人发现，他们就会跳过并从那里开始破解。

现在，在流密码中，您可以在开头添加所有随机性，并且后面的字节仍然使用相同的密钥，不要忘记这一点。这实际上只对分组密码有任何作用，否则您必须将随机位异或到实际值中才能使用它。

但是，您最好使用 MAC 作为填充：通过适当的加密，加密后的 mac 不会泄露任何信息，但它看起来是半随机的，您可以使用它来验证期间没有错误或恶意攻击解密。您喜欢的任何散列函数都可以创建 MAC，即使是简单的 CRC-32，也不会在加密后泄露任何内容。

（由于相关性，密码学家可能会找到一种方法来减少一两次，如果他们事先知道它们是如何相关的，他们会发现大量的明文，但这仍然远远超出了实用性。）

正如您之前所问的，您可以安全地在每条消息前添加未加密的盐；如果实现被破坏或密钥被泄露，盐只能破坏加密的值，只要盐被正确地混合到密钥中，特别是如果您可以在解密之前将其混合到扩展的密钥计划中。具有大量位的现代散列算法非常擅长这一点，但即使混合到常规输入密钥中，也始终具有与单独的密钥相同的安全性。

# exchange-server - Exchange Web Service 与 Exchange ActiveSync（或者当您可以免费获得奶牛时，为什么还要购买牛奶？）

> ID：11706614
> 
> 赞同：6
> 
> 时间：2012-07-29T04:15:42.813
> 
> 标签：exchange-server, exchangewebservices, activesync

我已经看到这个问题被问了好几次，但到目前为止，答案都非常机械化和令人失望：

EWS 与 EAS 有什么区别？

现在，大多数网站都给出以下内容：“一个是移动设备协议，另一个是 Web 服务。” 嗯，不废话。这是真正的问题：

是什么阻止了某人为 EWS 建立一个任何移动应用程序或操作系统都可以使用的下降库，*而不是*向 MS 支付 ActiveSync 的每用户许可费？EWS 是不是太贵了，因为它是 SOAPy 而不是 RESTful？ActiveSync 是否在缓存和一般逻辑方面做了更多的繁重工作？EAS 是否具有 EWS 所没有的某些功能（共享日历等？）是否真的只是移动操作系统想要确保支持 Exchange 03 的问题？

我确信他们每个人都有自己的优点，使他们与众不同，但我认为大多数人在被问到这个问题时会遇到的问题是“如果 EWS 可以做同样的事情，我为什么要为 EAS 付费，如果我'愿意自己写客户端吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:46:07.857

大多数组织将许可 EAS，因为以下一项或多项对他们来说是正确的：

1.  他们希望允许现有的移动设备（iOS、Android 等）无需安装新软件即可访问他们的服务（许多设备都支持 EAS）。[例如， Zimbra](http://wiki.zimbra.com/wiki/Mobile_Device_Setup)和[Kerio](http://www.kerio.com/connect/mobile/activesync)就是这样做的。
2.  他们不能使用 EWS 作为客户端协议来访问他们的 Exchange 服务，但 EAS 是可用的。
3.  他们希望在低带宽环境中运行，与 EAS 的压缩 WBXML 相比，他们无法承受 EWS 中 SOAP 的沉重开销。

我敢打赌，#1 占其中的绝大多数。

另外：EAS 不是 RESTful。一切都通过 POST，客户端没有超媒体或能力进行内容协商。它基本上是面向会话的 RPC，使用 WBXML 作为编码格式，使用 HTTP 作为传输协议。

# apache - Apache（htaccess）根据用户选择的域重定向到目录

> ID：11706615
> 
> 赞同：0
> 
> 时间：2012-07-29T04:15:47.610
> 
> 标签：apache, http, .htaccess, redirect, directory

我在stackoverflow上发现了一些有趣的想法，但没有一个对我来说足够清楚，所以我不得不问自己是否可以做到:)

情况：

我有安装了 apache http 服务器的 linux 和 www 目录中的文件夹中的一堆站点，这些站点具有不同的内容。

比方说：

```
www/Site1 (Phpbb)
www/Site2 (Wordpress)
www/Site3 (Own web pages) 
```

我拥有一个打算在 Site3 上使用的域（我们称之为 site3.com、www.site3.com）。我在 no-ip.org 上创建了另外两个域（我们称它们为 site1.sytes.net 和 site2.sytes.net）。所有三个创建的域都指向 linux (apache) 服务器 IP 地址的端口 80。

所以我们准备好了这些域：

```
www.site3.com
site1.sytes.net
site2.sytes.net 
```

现在的问题：

如何为想要来自这些域的内容的用户创建指向特定目录的重定向。我希望想要获取“site1.sytes.net”（并将其写入浏览器）的用户指向 Site1 目录并重写浏览器地址以省略该目录并仅输入“http://site1.sytes.net”。

例如：

```
User want: site1.sytes.net [/index.html]
Server goes to: www/Site1 [/index.html]
User see in browser: http://site1.sytes.net [/index.html] 
```

等等：

```
site2.sytes.net [/index.html] => www/Site2 [/index.html]
www.site3.com [/index.html] => www/Site3 [/index.html] 
```

如果我没记错的话，HTTP_HOST 将只返回域，因此尝试找出用户在浏览器中为 site1.sytes.net 和 site2.sytes.net 写了什么是没有用的（因为它只会返回 sytes.net）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:39:25.267

这`%{HTTP_HOST}`确实是您想要的，是的，它只匹配域。但是您在条件中使用它，并使用其中一个`%{REQUEST_URI}`或规则本身来匹配 URI。尝试将其放在文档根目录中的 htaccess 文件中（我假设您的所有站点都相同，否则，这样做没有任何意义）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} site1.sytes.net [NC]
RewriteCond %{REQUEST_URI} !^/Site1
RewriteRule ^(.*)$ /Site1/$1 [L]

RewriteCond %{HTTP_HOST} site2.sytes.net [NC]
RewriteCond %{REQUEST_URI} !^/Site2
RewriteRule ^(.*)$ /Site2/$1 [L]

RewriteCond %{HTTP_HOST} www.site3.com [NC]
RewriteCond %{REQUEST_URI} !^/Site3
RewriteRule ^(.*)$ /Site3/$1 [L] 
```

# web-services - spring web 控制器用作 web 服务

> ID：11706616
> 
> 赞同：1
> 
> 时间：2012-07-29T04:16:40.947
> 
> 标签：web-services, spring-mvc, controller

目前我使用 Spring mvc 来开发我的 we 应用程序。将来将需要为此应用程序开发移动应用程序。

在 asp.net c# MVC 中有能力使用 Web 控制器类作为 Web 服务。然后移动应用程序可以将该控制器类用作 Web 服务。

我想知道是否有能力将 Spring MVC 控制器用作我们的服务。如果是，那么如何。请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:23:02.930

您可以使用 Spring MVC 轻松编写 Restful Web 服务。控制器类可以根据需要返回 XML/JSON。这只是在这种情况下配置适当`ViewResolver`的情况 a `ContentNegotiationViewResolver`。

[这](http://java-diaries.blogspot.com/2011/02/restful-webservices-with-spring.html)是一本极好的指南，它将引导您了解 Spring MVC 作为 Web 服务的基础知识。

# .net - 如何用 IoC 容器组织 MVP？

> ID：11706620
> 
> 赞同：6
> 
> 时间：2012-07-29T04:17:16.907
> 
> 标签：.net, winforms, inversion-of-control, autofac

我正在尝试使用 winforms 应用程序来降低 IoC 的概念。假设我有一个演示者，其构造函数将其视图和服务作为构造函数参数。所以在表单代码中我有一些相当于这个的东西：

```
mnPresenter = new Presenter(this, new AppService()); 
```

其中，AppService 是 IAppService 的一个实现。它在我的`[autofac]`IoC 容器中注册。从这个演示者结构中获得“新”的推荐方法是什么？像我上面所说的那样，使用 IoC 框架来丢失这些“新”调用的重点不是吗？

我可以做类似的事情

```
mPresenter = new Presenter(this, MyContainer.Resolve<IAppService>()) 
```

但这似乎违背了 IoC 的目的。我可能在这里遗漏了一些基本的东西。

如果我遗漏了一些明显的东西，请提前道歉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T10:37:49.750

您的问题是 View 和 Presenter 之间存在依赖循环，因为它们相互依赖。打破这种依赖循环的一般规则是回退到属性注入，这也适用于您的情况。

使用 MVP，最好是让 View 通过将其注入到 Presenter 的属性中来将自己分配给创建的 Presenter：

```
mPresenter = container.Resolve<Presenter>();
mPresenter.View = this; 
```

如果可以，请从应用程序中隐藏容器。由于您使用的是 MVP，因此您唯一需要直接解决的就是演示者。因此，与其让 Forms 与 Container 通信，不如让它们与 static 通信`PresenterFactory`。这家工厂将使用盖子下的容器：

```
mPresenter = PresenterFactory.Create<MyPresenter>();
mPresenter.View = this; 
```

你`PresenterFactory`可能看起来像这样：

```
public static class PresenterFactory
{
    private static IContainer container;

    public static TPresenter Create<TPresenter>()
        where TPresenter : IPresenter
    {
        return (TPresenter)
            container.Resolve(typeof(TPresenter));
    }

    public static void SetContainer(IContainer container)
    {
        PresenterFactory.container = container;
    }
} 
```

您的 Composition Root 可能如下所示：

```
static void Main()
{
    Bootstrap();
}

private static void Bootstrap()
{
    var builder = new ContainerBuilder();
    // TODO: register presenters

    var container = builder.Build();

    PresenterFactory.SetContainer(container);
} 
```

*更新*

也许做这样的事情会更好：

```
interface IPresenter<TView>
{
    TView View { get; set; }
}

public static class PresenterFactory
{
    private static IContainer container;

    public static IPresenter<TView> CreateForView<TView>(TView view)
    {
        var presenter = container.Resolve<IPresenter<TView>>();
        presenter.View = view;
        return presenter;
    }
}

// View
mPresenter = PresenterFactory.CreateForView(this); 
```

这从视图中隐藏了演示者的实际实现，并将视图的注册集中到演示者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:36:20.333

您需要演示者中的属性

```
public IAppService service; 
```

它将由容器注入，您无需将其作为参数传递。你写的是服务定位器，实际上是 IoC 的反模式。

如果您的视图也是强类型并在容器中注册，您可以使用 Autofac 的 .SingleInstance 生命周期和属性

```
public IMyView view; 
```

在您的展示中，容器会将视图实例注入您的展示器。

您基本上是在另一个问题中查看代码： [Register a Presenter with a View](https://stackoverflow.com/questions/13078640/register-a-presenter-with-a-view)

# jquery - 用 nth-child 获取 ul li 的标题属性？

> ID：11706623
> 
> 赞同：0
> 
> 时间：2012-07-29T04:19:25.887
> 
> 标签：jquery

我一直在插入各种组合以通过 JQuery 获取“标题”属性值。在过去的几个小时里，我一直在努力搜索和搜索。我的代码只能获得“li”锚标题，但似乎无法获得另一个。如果有人能指出我做错了什么，我将不胜感激。

HTML

```
<nav>
  <ul>
    <li><a href="#" title="honda">HONDA</a></li>
    <li><a href="#" title="toyota">TOYOTA</a></li>
    <li><a href="#" title="nissan">NISSAN</a></li>
    <li><a href="#" title="mazda">MAZDA</a></li>
  </ul>
</nav> 
```

为第一个孩子工作

```
alert($("nav li a:nth-child(1)").attr("title")); 
```

不适用于其他孩子

```
alert($("nav li a:nth-child(2)").attr("title")); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:22:36.080

`:nth-child`必须在`li`; 每个`a`都是其父级的第一个孩子（the `li`）。您想找到每个`li`相对于`ul`.

```
alert($("nav li:nth-child(2) a").attr("title")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T04:23:00.673

`<a>`标签是[`nth-child`](http://www.w3.org/TR/css3-selectors/#nth-child-pseudo)选择器需要在其上的唯一子级，`li`其中有兄弟级。

```
alert($("nav li:nth-child(2) a").attr("title")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T04:23:21.040

只是一个小小的改变

```
alert($("nav li:nth-child(2) a").attr("title")); 
```

这是因为`a`是唯一的孩子所以`first-child`在工作。您需要将伪放置为`li`not`a`

# c++ - 如何从 ShockwaveFlashObject 获取所有 flash 变量？(C++)

> ID：11706627
> 
> 赞同：1
> 
> 时间：2012-07-29T04:20:10.387
> 
> 标签：c++, flash, variables

是否可以在 C++ 中检索 swf url 中的所有变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:03:43.370

存在一个调试器，它可以在运行时检查代码，查找堆栈帧及其包含的变量。它是用 Java 编写的，但是它是开源的，所以没有什么能阻止你将它移植到 C++。不过，这将是一项艰巨的任务……

来源在这里：http: [//svn.apache.org/repos/asf/incubator/flex/trunk/modules/debugger/](http://svn.apache.org/repos/asf/incubator/flex/trunk/modules/debugger/)

# jquery - 回显类的Jquery事件

> ID：11706628
> 
> 赞同：0
> 
> 时间：2012-07-29T04:20:12.337
> 
> 标签：jquery

我需要 jQuery 在可拖动图像上回显一些数据。我可以调用图像相对于窗口的位置。我将 event.target.nodename 添加到回显的文本中，但它只返回图像所在的 html 标记。这一切都很好，但是因为我正在使用 while 循环来生成多个图像，所以我无法分辨哪个 event.target.nodename 正在引用哪个图像。这是 jQuery 代码的示例。

```
 $(document).ready(function(){
 $(function() 
 {
 $(".ui-widget-content").draggable(
 {
  stop: function(event,ui)

    {

    var Stoppos = $(this).position();

    $(".location").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top + 

    event.target.nodeName);

    }

 }
 );

 $(".droppable").droppable();

 });
 }); 
```

注意：while 循环中的每个图像都会生成一个唯一的类，因此在基于类识别每个图像时没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:24:13.567

`$(event.target).class()`而不是`event.target.nodeName`应该让你获得图像的类别

# ios - iOS 应用程序 - 修复 Apple 不允许您链接网站进行付款？

> ID：11706631
> 
> 赞同：0
> 
> 时间：2012-07-29T04:20:48.867
> 
> 标签：ios, iphone, ipad, in-app-purchase

我有一个应用程序需要用户（需要登录）支付才能使用（不是 Apple InApp Purchase），有点像 DropBox。

当然会有用户没有先注册我的计划并下载了应用程序，我应该在我的应用程序中执行什么步骤才能告诉他们从我的网站付款？

似乎我无法链接到我的网站，所以我该如何告诉他们付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:27:02.523

正如您所说，您无法从应用程序内直接链接到 IAP 以外的付款，也许您应该创建网站以进行注册/付款。而您在应用程序中唯一能做的就是告诉用户该用户需要拥有该网站的帐户。不允许的直接链接

# python - 创建类实例并将其排列到网格中

> ID：11706633
> 
> 赞同：1
> 
> 时间：2012-07-29T04:22:17.390
> 
> 标签：python, class, loops, data-structures

我想将 Room 类的实例排列到网格中以在游戏中使用。这是课程：

```
class Room:
    def __init__(self, name, x, y):
        self.name = name
        self.pos = (x, y) 
```

将 x 和 y 值分配给实例的最佳方法是什么，以便没有两个实例的位置相同并且坐标类似于 3x3 网格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T04:29:03.470

```
import itertools
for i, j in itertools.product(xrange(3), repeat=2):
    room = Room("%s %s" % (i, j), i, j) 
```

干杯。

# javascript - 仅向某个对象添加功能

> ID：11706634
> 
> 赞同：0
> 
> 时间：2012-07-29T04:22:21.913
> 
> 标签：javascript, function, object

我需要一个只为给定对象工作的函数。我不确定它是否可能，但我尝试了类似的方法：

```
var a = {
    b: function(a) {
        return display(a)
    }
}
a.prototype.display = function(a) {
    return a;
}
alert(a.b('Hi'))​//This is suppose to work
alert(display(a))//This isn't suppose to work 
```

这不起作用，但不知道为什么。我对原型有点陌生。例如，我将它与 String.prototype 一起使用，但我仍然需要学习所有其他内容。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:43:34.190

您需要在对象中使用私有方法。在 javascript 中实现这一点的唯一方法是将函数保持在闭包中并在当前对象的上下文中执行它。

```
var a = (function () {
      var display = function (a) {
          return a;
      };

      return {
         b : function(a) {
             // display exist in closure scope of b;
             //executing display in the context of current object
             return display.apply(this, arguments);
         }
      };
})(); 
```

`display`外面无法到达这里。

```
alert(a.b("hi")); //will return hi 
```

`a.display("hi");`不可访问。

# regex - 如何使用 bash 检查 ASCII 图像的平衡？

> ID：11706635
> 
> 赞同：2
> 
> 时间：2012-07-29T04:22:32.877
> 
> 标签：regex, bash

我有一些要检查的大型 ASCII 图像是否对称。假设我有以下文件：

```
 ***^^^MMM
 *^**^^MMM
 **^^^^^MMMMM 
```

第一行是我想要的，它们都是分开的，并且每个部分的数量都相同（尽管每次都不必是 3 个），接下来的两个不是我想要的。我想连续计算 * 的数量，然后确保它们后面有相同数量的 ^ 和 M。我试图在每一行上获得一些对称性，所以这会很好：

```
**^^MM
**********^^^^^^^^^^MMMMMMMMMM
****^^^^MMMM
*^M
etc. 
```

如何扫描文件并可能 grep 问题行？我尝试了几个循环`cat ASCIIfile | sed 's/\^//g' | sed 's/M//g' | wc -c`并将输出分配给一个变量，然后将计数与其他字符计数进行比较，但显然这没有考虑到顺序和行`*^*^*M^MM`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:48:35.883

使用 perl：

```
perl -ne ' { $l=$_; chomp; ($v)=/^((.)\2*)/; $t=length($v); \
     s/M{$t}//;s/\^{$t}//;s/\*{$t}//; \
     print $l if length } ' input_file 
```

使用 bash/sed：

```
while read line; do
  m=$(echo $line | sed 's/[^M]*\([M][M]*\)[^M]*/\1/' | wc -c)
  s=$(echo $line | sed 's/[^*]*\([*][*]*\)[^*]*/\1/' | wc -c)
  n=$(echo $line | sed 's/[^\^]*\([\^][\^]*\)[^\^]*/\1/' | wc -c)
  if [[ $m -ne $s || $m -ne $n ]]; then
    echo "- $line    $m::$s::$n"
  else
    echo "+ $line    $m::$s::$n"
  fi  
done < input_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:03:51.790

纯重击：

```
#!/bin/bash
for string in '***^^^MMM' '**^^MM' '****^^MMMM' '*^*M^'
do
    flag=true
    sym=true
    patt=''
    prevlen=${#string}
    for c in '*' '^' 'M'
    do
        patt+="*\\$c"
        sub="${string##$patt}"
        sublen="${#sub}"
        if $flag
        then
            flag=false
            ((compare = prevlen - sublen ))
        else
            if (( prevlen - sublen != compare ))
            then
                printf '%s\n' "$string is NOT symmetrical"
                sym=false
                break
            fi
        fi
        prevlen=$sublen
    done
    if $sym
    then
        printf '%s\n' "$string IS symmetrical"
    fi
done 
```

要从文件中读取，请将第一个`for`循环更改为并在同一行的最后一个循环之后`while read -r string`添加。`< filename``done`

# php - POST 到服务器上的文件并回显响应

> ID：11706640
> 
> 赞同：0
> 
> 时间：2012-07-29T04:23:15.093
> 
> 标签：php, post, echo

我不知道为什么，但我很难找到如何做到这一点。我想做的只是发布到同一目录中的另一个 .php 文件，然后在浏览器中显示该页面的内容以及发布的数据。

我正在使用它，但我需要访问一个不在 web 根目录中的 php 文件：

```
$post_data = http_build_query(array('stratus_code' => $this->stratus_code));
    $options = array('http' => array('method' => 'POST', 'header' => 'Content-type: application/x-www-form-urlencoded', 'content' => $post_data));
    $context = stream_context_create($options);
    $result = file_get_contents('http://stratus.sylentec.com/' . $page, false, $context);
    echo $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:40:50.620

$this->stratus_code 这是一个数组吗？还是一个字符串？

[http://php.net/manual/en/function.stream-context-create.php](http://php.net/manual/en/function.stream-context-create.php)

您没有使用 chr(10) 。将数组中的 chr(13) 推送到 stream_context_create ；

'内容类型：应用程序/x-www-form-urlencoded'

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-29T04:47:19.867

您不能通过 http 请求将任何内容直接发布到 PHP 文件中。PHP 文件只是一个源文件，它告诉 PHP 解释器，由*Web 服务器*调用如何处理传入的请求。

如果您的 PHP 文件位于您的 Web 根目录之外（换句话说，您的 Web 服务器无法执行 PHP 文件），那么您将永远无法构建可以访问您的 PHP 文件的 http 请求。

您要么需要：

*   将您的 PHP 文件放在您的 Web 服务器将处理的位置（例如，在您的 Web 根目录中）
*   使用对[PHP CLI](http://www.php.net/manual/en/features.commandline.usage.php)的系统调用来绕过 Web 服务器。

# html - 我无法用 HTML/CSS 编写这个日历小部件，有人可以试试吗？

> ID：11706641
> 
> 赞同：0
> 
> 时间：2012-07-29T04:23:15.510
> 
> 标签：html, css, calendar, project, tabular

我被分配了一项小任务，但我无法以任何方式完成它。我被要求编写这个我用 HTML 和 CSS 设计的日历小部件，但我不确定我必须使用的表格或 div！

这就是日历的样子：

![建议的日历小部件](../Images/903653e3eda1d3327cb110bf1a6c32fd.png)

这就是我现在的设计方式：

![在此处输入图像描述](../Images/bef7565dd446ad05e5d3ec3ef96e56e5.png)

该网站的现场演示可以在这里找到，以及我所做的代码：http: [//trendgfx.com/projects/comet-tavern/](http://trendgfx.com/projects/comet-tavern/)

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:32:50.267

如果你摆脱了`float:left`and `display:inline-block`on the `#archive-calender th {`，`#archive-calender td {`你就会更接近。

接下来，您将要设置`border-collapse`为`separate`on`#archive-calender {`并添加一些`border-spacing:3px`以获取单元格之间的间隙

最后，一点点将给你一些细胞内的喘息空间`padding:2px`。`#archive-calender td {`

高温高压

**编辑**忘记了单元格的背景。

添加一些`background-color`或`background-image`添加`#archive-calender td {`，您将获得漂亮的灰色单元格。

# javascript - 属性来检索和设置文本节点值：数据或节点值？

> ID：11706643
> 
> 赞同：2
> 
> 时间：2012-07-29T04:23:36.277
> 
> 标签：javascript, html

我应该使用哪一个？

[http://reference.sitepoint.com/javascript/CharacterData/data](http://reference.sitepoint.com/javascript/CharacterData/data)

[http://reference.sitepoint.com/javascript/Node/nodeValue](http://reference.sitepoint.com/javascript/Node/nodeValue)

该站点建议使用 nodeValue 但显示数据具有更好的兼容性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:27:47.333

只需使用 nodeValue，因为 data 指定它与 nodeValue 相同。

该页面阐明：

> nodeValue 属性是操作节点值的最佳方式 - 由于各种浏览器问题，它优于更专业的属性，例如数据或值。

这是关于该主题的另一个讨论的一个很好的答案：

> nodeValue 字段是为所有节点定义的，并根据节点类型映射到不同的事物。数据字段定义在继承自 CharacterData 的节点上，即 Text、CDATASection 和 Comment 节点。对于这三种节点类型，nodeValue 直接映射到数据。我知道这很奇怪，但是由于当时试图让供应商高兴，DOM 确实有很多这样不相关的重复。

[http://tech.groups.yahoo.com/group/svg-developers/message/53314](http://tech.groups.yahoo.com/group/svg-developers/message/53314)

# jquery - 使用 jQuery / RoR 为站点定义一个全局站点模板（html 站点）

> ID：11706644
> 
> 赞同：0
> 
> 时间：2012-07-29T04:23:39.300
> 
> 标签：jquery, html, templates

我们正在构建一个新网站，在后端（服务器端）使用 RoR，在客户端（*.htm 文件）使用 jQuery。

现在，我创建的每个新页面都需要将所有“公共区域”复制到任何其他页面（如页眉、页脚、菜单等）。

相当反驳的问题：有没有办法“模板化”，所以一个页面从另一个页面继承模板。

我知道 ASP.NET 正在为此使用母版页，但正如您所见，这不是我们的情况。

请帮忙 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:34:54.143

在 Rails 中，这些称为布局。为了找到当前布局，Rails 首先在 app/views/layouts 中查找与控制器具有相同基本名称的文件。如果没有这种特定于控制器的布局，Rails 将使用 app/views/layouts/application.html.erb 或 app/views/layouts/application.builder。在布局中，您可以访问组合不同内容位的方法，例如 yield 和 content_for。在开始您的项目之前阅读此内容：

```
http://guides.rubyonrails.org/layouts_and_rendering.html 
```

# ios - 以编程方式更改键盘适用于模拟器但不适用于 iPhone

> ID：11706651
> 
> 赞同：1
> 
> 时间：2012-07-29T04:25:49.767
> 
> 标签：ios, cocoa-touch, internationalization, keyboard, ios-simulator

我正在尝试更改应用程序的语言，主要是在一个查询屏幕上显示阿拉伯语键盘。在调用 UIApplicationMain 之前的主程序中，我有这一行：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"ar",@"en", nil] forKey:@"AppleLanguages"]; 
```

它成功地改变了 iPhone 模拟器上的语言，但没有在 iPhone 上。在模拟器上，键盘更改为阿拉伯语，但在 iPhone 上它仍然是英文，无论如何。我之前也有一个删除语句。完整的代码是：

```
 int main(int argc, char *argv[]) {
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"ar",@"en", nil] forKey:@"AppleLanguages"];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    return retVal;
} 
```

# c# - 在多列 ListView 中选择值

> ID：11706652
> 
> 赞同：1
> 
> 时间：2012-07-29T04:25:55.930
> 
> 标签：c#, wpf, xaml, listview

我有一个弹出窗口，里面有一个列表视图：

```
 <Popup Name="PopupResultados" Width="200" PlacementTarget="{Binding ElementName=textBoxBuscar}" AllowsTransparency="True" PopupAnimation="Slide">
        <ListView Name="listViewResultados" Background="LightGray" BorderThickness="2" SelectionChanged="listViewResultados_SelectionChanged">
            <ListView.View>
                <GridView x:Name="gridViewResultados" ColumnHeaderContainerStyle="{StaticResource noHeader}">
                    <GridViewColumn Header="Col1" Width="0" DisplayMemberBinding="{Binding Col1}" />
                    <GridViewColumn Header="Col2" DisplayMemberBinding="{Binding Col2}" />
                </GridView>
            </ListView.View>
        </ListView>
    </Popup> 
```

列表视图充满了字典：

```
 private void buscar(object sender, RoutedEventArgs e)
    {
        Dictionary<int, String> dicc = admin.buscarEntidad(textBoxBuscar.Text);

        if (!PopupResultados.IsOpen)
        {
            if (dicc.Count() != 0)
                foreach (var par in dicc)
                    listViewResultados.Items.Add(new { Col1 = par.Key, Col2 = par.Value });
            else
                listViewResultados.Items.Add(new { Col2 = "No hay coincidencias" });
            PopupResultados.IsOpen = true;
        }
    } 
```

现在，我想在列表视图中选择一个项目并获取 Col1 中的整数值。

我怎样才能得到整数值？

当我输入时，我`listViewResultados.SelectedItem.`只得到 4 种方法：`Equals`、`GetHashCode`和.`GetType``ToString`

忘了说我正在尝试获取 listViewResultados_SelectionChanged 中的整数值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:40:16.127

嗨投射`listViewResultados.SelectedItem`到您的集合项目与您的 ListView ItemsSource 绑定的类型。就像如果您的 ItemsSource 绑定到字符串列表，那么就像 (string)listViewResultados.SelectedItem 一样。我希望这将有所帮助。

# jasper-reports - 值为“DistinctCount”的属性“计算”必须具有列表中的值

> ID：11706665
> 
> 赞同：0
> 
> 时间：2012-07-29T04:28:23.533
> 
> 标签：jasper-reports, ireport

我放了变量“不同的计数”。当我想运行应用程序时，会出现警告消息并显示“属性”“计算”，值为“DistinctCount”必须具有列表“Nothing Count Sum Average Lowest Highest StandardDeviation Variance System”中的值。

为什么会这样？。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:32:24.220

在 JR 版本 1.2.4 中向 iReport 引入了不同的计数。我闻到问题是，您使用的是较旧的 JR 罐子。升级您的 jasperreports.jar 可能会解决您的问题。

# mocking - WinRT 的模拟框架？

> ID：11706666
> 
> 赞同：20
> 
> 时间：2012-07-29T04:28:40.583
> 
> 标签：mocking, windows-runtime

感觉好像我错过了一些东西，但是当我为我的 WinRT 代码编写单元测试时，我找不到任何可以使用的模拟对象框架。是否有任何支持 WinRT 的模拟框架？

我知道[MoqRT](https://github.com/mbrit/moqrt)，但据我所知，它会在构建时进行代码生成（尽管通过听起来很脆弱的集成，这并不是实际构建过程的一部分），但感觉更像是一种 hack 而不是实现.

DynamicMethod（轻量级代码生成背后的类）显然在 WinRT 中不可用。但似乎确实支持表达式树，包括它们的 Compile 方法；所以看起来一个模拟对象框架应该是可行的，可能。

那里有任何 WinRT 模拟框架吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:24:56.203

I've been using Telerik JustMock in WinRT. You don't get a useful error message when the test fails, but apart from that, you're away. It's the full paid version I've got, not the free one, I don't know if that works.

Also, you might want to consider if you really need to have your code in WinRT assemblies - check out Portable Class Libraries, and call them from your WinRT app. I might be proved wrong by reality, but I would think you would be able to use mocking frameworks on code in a PCL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T06:33:12.337

我目前遇到了同样的问题。我很遗憾 Rhino Mocks 没有在 WinRT 上工作。但显然有一个 Moq => [MoqRT的端口](https://github.com/mbrit/MoqRT)

我没用过，我可能会调查微软的假货、存根和垫片；由于 MoqRT 仍然是 alpha，我不想使用 alpha 框架测试我的代码。

但只是指出另一种可能性。

**更新**

我刚刚发现了这一点：[Fake It Easy](http://www.planetgeek.ch/2013/02/01/fakeiteasy-and-windows-store-apps-are-becoming-friends/)

没试过，但看起来很有希望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:29:05.950

在 WinRT 中无法进行模拟：

*   [http://geekswithblogs.net/mbrit/archive/2012/06/05/say-goodbye-to-system.reflection.emit-any-dynamic-proxy-generation-in-winrt.aspx](http://geekswithblogs.net/mbrit/archive/2012/06/05/say-goodbye-to-system.reflection.emit-any-dynamic-proxy-generation-in-winrt.aspx)

但是，看起来微软将在不久的将来支持他们自动生成的“假程序集”：

*   [http://www.dotnetcurry.com/ShowArticle.aspx?ID=790](http://www.dotnetcurry.com/ShowArticle.aspx?ID=790)
*   [http://www.richonsoftware.com/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx](http://www.richonsoftware.com/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx)

# css - 如何将单个 CSS 用于多个视图？

> ID：11706677
> 
> 赞同：0
> 
> 时间：2012-07-29T04:30:46.553
> 
> 标签：css, ruby-on-rails

我正在创建一个应用程序，其中有很多视图，但它们都必须使用单个 css ...

我把我的css代码放在`assests\stylesheets\application.css`

在我看来，我要补充的是：

```
<%= stylesheet_link_tag 'application.css' %> 
```

但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:44:08.137

尝试使用：

```
<%= stylesheet_link_tag 'application' %> 
```

注意缺少`.css`

看到这个答案[https://stackoverflow.com/a/10492888/950890](https://stackoverflow.com/a/10492888/950890)

# php - 加水印后照片失色

> ID：11706681
> 
> 赞同：3
> 
> 时间：2012-07-29T04:32:37.623
> 
> 标签：php

在为照片加水印时遇到一些初期问题。除了水印照片的颜色变得比应有的暗淡之外，这一切都很好 - 事实上非常明显。

我正在使用**imagecopyresized**来添加水印，因为这特别允许我使用 PNG-24 水印，而其他水印则不能。我知道颜色通常没问题，因为我刚刚使用**readfile($url)**作为测试，而且照片很完美。

这是我的脚本：

```
<?php

// get parent and watermark images & sizes
$image = imagecreatefromjpeg($url);
$imageSize = getimagesize($url);
$watermark = imagecreatefrompng('watermark.png');
$watermark_o_width = imagesx($watermark);
$watermark_o_height = imagesy($watermark);

// calculate new watermark width and position
if ($imageSize[0] > $imageSize[1] || $imageSize[0] == $imageSize[1]) {
    $leftPercent = 23;
} else {
    $leftPercent = 7;
}
$leftPixels = ($imageSize[0]/100)*$leftPercent;
$newWatermarkWidth = $imageSize[0]-$leftPixels;
$newWatermarkHeight = $watermark_o_height * ($newWatermarkWidth / $watermark_o_width);

// place watermark on parent image, centered and scaled
imagecopyresized(
    $image,
    $watermark,
    $imageSize[0]/2 - $newWatermarkWidth/2,
    $imageSize[1]/2 - $newWatermarkHeight/2,
    0,
    0,
    $newWatermarkWidth,
    $newWatermarkHeight,
    imagesx($watermark),
    imagesy($watermark)
);

// print
imagejpeg($image);

// destroy
imagedestroy($image);
imagedestroy($watermark);

?> 
```

我怎样才能阻止这种情况发生？我正在阅读有关**imagecreatetruecolor**的内容，这能解决问题吗？我在谷歌上搜索“imagecreatetruecolor color loss photos”和变体，但没有人真正谈论这个问题。如果我确实需要这个功能，我会在哪里将它添加到这个脚本中？

这对我来说完全是一把扳手，希望有人告诉我把它粘在哪里（不是字面意思）。

这是一个颜色损失的例子。预览图像应与缩略图的颜色完全相同。缩略图是使用**readfile()**创建的，而预览是使用**imagecreatefromjpeg**和**imagecopresized**创建的。

![在此处输入图像描述](../Images/9f77ff99a939956482522b58ececdcbb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:51:00.993

通过使用与图像相同的特征，此示例代码可以正常工作：

原始JPG：深色背景；美丽的女孩; 红色礼服。水印PNG：透明背景；文本; 灰色。

```
<?php

// Path the the requested file (clean up the value if needed)
$path = $url;

// Load image
$image = imagecreatefromjpeg($path);
$w = imagesx($image);
$h = imagesy($image);

// Load watermark
$watermark = imagecreatefrompng('watermark.png');
$ww = imagesx($watermark);
$wh = imagesy($watermark);

// Merge watermark upon the original image (center center)
imagecopy($image, $watermark, (($w/2)-($ww/2)), (($h/2)-($wh/2)), 0, 0, $ww, $wh);

// Output the image to the browser
header('Content-type: image/jpeg');
imagejpeg($image);

// destroy both images
imagedestroy($image);
imagedestroy($watermark);

// kill script
exit();

?> 
```

* * *

## 左：输出图像 | 右：原始图像

![截屏](../Images/a8474d6b17fe6e2541630ccf492720d4.png)

**笔记：**

输出图像被压缩多次，直到：*Original -> PHP Output -> GIMP -> Here*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:48:44.977

经过多次测试，我得出的结论是 PHP 的 GD Image 不支持在被加水印的图像上的颜色配置文件。我现在正在使用 Imagick，颜色很完美。

# ruby-on-rails - 使用 Mysql 在共享服务器中部署 Rails 应用程序时出错

> ID：11706683
> 
> 赞同：0
> 
> 时间：2012-07-29T04:33:05.407
> 
> 标签：ruby-on-rails, compiler-errors, syntax-error

我正在尝试使用 mysql 在共享主机上部署 ror，因为数据库 nim 收到此错误

```
/!\ FAILSAFE /!\  Sun Jul 29 09:54:01 +0530 2012
  Status: 500 Internal Server Error
  no such file to load -- sqlite3
    /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/requires.rb:7:in `require_library_or_gem'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/sqlite3_adapter.rb:10:in `sqlite3_connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `send'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `new_connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in `checkout_new_connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `checkout'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `loop'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `checkout'
    /usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in `retrieve_connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:9:in `cache'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/query_cache.rb:28:in `call'
    /usr/lib/ruby/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/string_coercion.rb:25:in `call'
    /usr/lib/ruby/gems/1.8/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
    /usr/lib/ruby/gems/1.8/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/params_parser.rb:15:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/session/cookie_store.rb:99:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/failsafe.rb:26:in `call'
    /usr/lib/ruby/gems/1.8/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:106:in `call'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/cgi_process.rb:44:in `dispatch_cgi'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:101:in `dispatch_cgi'
    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:27:in `dispatch'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:76:in `process'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `synchronize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `process'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:159:in `process_client'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `each'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `process_client'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `initialize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `new'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `initialize'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `new'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:282:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `each'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:128:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in `run'
    /usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
    /usr/bin/mongrel_rails:19:in `load'
    /usr/bin/mongrel_rails:19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:55:56.870

在您的 Gemfile 中，您应该将 sqlite 放入开发组并将 mysql gem 添加到生产组。此外，你的 database.yml 应该有你的 mysql 服务器的配置。

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'mysql2'
end 
```

也不要忘记运行`bundle install`。而且您还应该在两个环境中拥有相同的数据库，因此当您以后对一些错误感到惊讶时，您不会感到惊讶。

# algorithm - 有哪些已知的配对算法？

> ID：11706685
> 
> 赞同：0
> 
> 时间：2012-07-29T04:33:57.413
> 
> 标签：algorithm

也就是说，给定一组人，每个人都有给定的特征，是否有一种众所周知的算法可以成功地将最相似的人配对。

我是不是在想这个，还是有一些标准化的方法来实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:41:57.497

最直接的算法是获取每个特征，分配一个匹配值（对于布尔特征，1或0），重要性权重（可能是全局重要性值乘以每个用户的权重，基于他们自己分配的特征重要性） ，然后将特征值和权重的乘积相加。我的猜测是约会网站会使用这样的算法。

# php - 来自 PHP 脚本的实时表上的 jQuery DataTables

> ID：11706686
> 
> 赞同：0
> 
> 时间：2012-07-29T04:34:05.580
> 
> 标签：php, jquery, datatables, html-table, live

我在执行[DataTables](http://datatables.net)时遇到问题，我无法让它在 PHP 脚本返回的表中工作。假设这个简单的 PHP 脚本名为 simple_table.php：

```
<?php
    echo '
    <table class="table_type">
        <thead>
            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Row 1 Data 1</td>
                <td>Row 1 Data 2</td>
            </tr>
            <tr>
                <td>Row 2 Data 1</td>
                <td>Row 2 Data 2</td>
            </tr>
        </tbody>
    </table>';
?> 
```

现在我还在`</body>`hipotetic html 文件中的标记之后声明了下一个非常简单的 jQuery 脚本：

```
$(document).ready( function () {
    $('table.table_type').dataTable();
} );

$('div.push_button li').click(function() {
    var content = $(this).closest('div').children('div.content');
    $.get('simple_table.php', {}, function(html_table) {
            content.html(html_table);
    } );
} ); 
```

需要做什么才能让这个简单的示例工作并保持简单？问题是，这么简单的脚本制作的动态表格这个有用的场景没有解决方案！

好吧，也许你必须有一个预先存在的`<table>`，只有你才能填满各自的`<tr>`......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:51:55.870

问题是因为您`.dataTable()`在页面有元素之前运行`table.table_type`。无需在页面加载时调用`.dataTable()`，您需要在表格添加到您的`<div>`.

```
$('div.push_button li').click(function() {
    var content = $(this).closest('div').children('div.content');
    $.get('simple_table.php', {}, function(html_table) {
            content.html(html_table);
            content.find('table').dataTable();
    } );
} ); 
```

# windows - 如何将 Windows 搜索与 Emacs 交互

> ID：11706690
> 
> 赞同：3
> 
> 时间：2012-07-29T04:35:02.600
> 
> 标签：windows, search, windows-7, emacs, windows-search

如何从 Emacs 访问 Windows Search 索引数据？[例如，在编写将 Windows Search 集成到任何模式](http://www.emacswiki.org/Anything)或[ido-mode](http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/)的次要模式时，了解这一点会很有用。

通过 Windows 搜索，我指的是 Windows 7 的功能，它允许您通过按开始并键入部分文档文件名（或部分文档内容）来查找文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:19:25.873

[这](http://www.carcosa.net/jason/software/utilities/desktopsearch/)是一个小 Python 脚本，它为 Windows 搜索提供了一个命令行实用程序。您需要安装[Python for Windows 扩展](http://sourceforge.net/projects/pywin32/)才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:28:43.003

从 emacs 中访问 Windows 搜索会有点困难，因为[Microsoft 提供的 API](http://msdn.microsoft.com/en-us/library/aa965362%28v=vs.85%29.aspx)强烈倾向于 Microsoft 编程环境。根据 MSDN 文档判断，最简单的方法是将[Windows Search 将接受的 SQL 查询](http://msdn.microsoft.com/en-us/library/ff684395%28v=vs.85%29.aspx)放在一起，并将其发送到知道如何将该查询发送到 Windows Search 的 PowerShell/VB 脚本。然后，您将告诉任何东西/ido/icicles 以增量方式将输入发送到此类脚本，解析结果并显示这些结果。

你正在尝试的任务是非常困难的，大部分困难来自于你试图让两个来自非常不同的编程世界的程序相互交谈。完全除了那些不喜欢微软的 FSF/GNU 人，Windows API 的设计意味着与 Windows 打交道的最省力的方法是使用微软工具链。这与通过中间程序、管道和套接字发送纯文本的 Unix“API”形成对比。

# c++ - 'itoa' : 函数不接受 1 个参数 & 'c' : 未声明的标识符

> ID：11706692
> 
> 赞同：1
> 
> 时间：2012-07-29T04:35:23.737
> 
> 标签：c++, string, itoa

我已经尝试了 2 天来让这段代码正常工作。这只是一个又一个错误。

谁能指出我做错了什么？

```
#include "stdafx.h"
#include <string>
#include <iostream>
using namespace std;

int main()
{
    int h = 0;
    for(int a = 100; a<1000; a++)
        for(int b = 100; b<1000; b++)
            int c = a * b;
// Error: "c" is undefined
            if ((c == reverse(c)) && (c > h))
                h = c;
    cout << "The answer is: " << h << endl;
}

int reverse (int x)
{
// Error: "'itoa' : function does not take 1 arguments"
    string s = string(itoa(x));
    reverse(s.begin(), s.end());
  return (x);
} 
```

使用 std::to_string 也会给我更多错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:38:15.580

当您的编译器在错误消息中向您解释某些内容时，您应该相信它。`itoa`实际上，确实需要多个参数，如您在以下链接中所见：

[http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)

编辑：哦，顺便说一句，这可以使用标准的 C++ 风格的代码来实现（根据评论中的建议修复了一些代码）：

```
int reverse(int x)
{
    std::stringstream ss;
    ss << x;

    std::string s = ss.str();
    std::reverse(s.begin(), s.end());

    ss.clear();
    ss.str(s.c_str());

    ss >> x;

    return x;
} 
```

这里。不确定这是最干净的解决方案，但它适用于我的编译器。

编辑：在此处了解如何仅使用一个字符串流：[如何清除字符串流？](https://stackoverflow.com/questions/2848087/how-to-clear-stringstream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:09:55.983

我可以提出不同的解决方案吗？除了进行 int<->string 转换，您还可以通过以下方式测试一个数字是否为回文：

```
bool is_palindrome(int number, int base = 10)
{
    int rebmun = 0;
    for (int temp = number; temp != 0; temp /= base) {
        rebmun = (rebmun * base) + (temp % base);
    }
    return number == rebmun;
} 
```

然后你的测试变成：

```
if (is_palindrome(c) && (c > h)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T04:36:20.570

对于第一个问题，正确的缩进可能会清楚：

```
int h = 0;
for(int a = 100; a<1000; a++)
    for(int b = 100; b<1000; b++)
        int c = a * b;

if ((c == reverse(c)) && (c > h))
    h = c; 
```

加上一些额外的括号：

```
int h = 0;
for(int a = 100; a<1000; a++)
{
    for(int b = 100; b<1000; b++)
    {
        int c = a * b;
        if ((c == reverse(c)) && (c > h))
            h = c;
    }
} 
```

至于这个`itoa`问题，它的签名是：

```
char *  itoa ( int value, char * str, int base ); 
```

所以你不能只写`itoa(x)`并期望它返回一个字符串。

然而，在 C++ 中有更好的方法将 a 转换`int`为 a`string`

*   如果你有 C++11，那里`std::to_string`
*   否则，a`std::stringstream`将完成这项工作。

像这样：

```
#include <sstream>

int reverse (int x)
{
    std::stringstream ss;
    ss << x;
    string s(ss.str());
    reverse(s.begin(), s.end());
    return (x);
} 
```

请注意，这不会返回`int`相反的结果。

# php - 使用 PHP 或 Apache 重写的 URL 重定向

> ID：11706699
> 
> 赞同：-1
> 
> 时间：2012-07-29T04:36:46.390
> 
> 标签：php, apache

我正在努力实现以下目标：

如果给定的 URL 是： [http ://example.com/abcdef](http://example.com/abcdef)

那么，网络应用程序应该将其理解为： [http ://example.com/index.php?id=abcdef](http://example.com/index.php?id=abcdef)

顺便说一句...我是 PHP 和 Apache 初学者。我最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:39:21.200

查看 Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。[它使用regex](http://www.regular-expressions.info/)匹配 URL ，所以如果你想重写你自己的 URL ，你应该查看[一些教程。](http://net.tutsplus.com/tutorials/javascript-ajax/you-dont-know-anything-about-regular-expressions/)还有[很多](http://www.sitepoint.com/guide-url-rewriting/) [关于](http://www.askapache.com/htaccess/crazy-advanced-mod_rewrite-tutorial.html)[基本](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)[URL](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)[重写](http://edrackham.com/apache/beginners-mod_rewrite-tutorial/)[的](http://www.htmlist.com/how-to/a-simplemod_rewrite-tutorial/) [教程](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/) 。[_](http://www.elated.com/articles/mod-rewrite-tutorial-for-absolute-beginners/)

```
RewriteEngine On
RewriteRule ^(.*)$ index.php?id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:37:20.157

好吧，我只是试着这样做——

> 选项 -MultiViews
> RewriteEngine On
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteRule (.*) index.php?url=$1 [L]

# api - USPS 运费 API 限制

> ID：11706701
> 
> 赞同：6
> 
> 时间：2012-07-29T04:37:04.390
> 
> 标签：api, usps

我正在努力在产品页面上显示运费，例如在亚马逊和 eBay 上。

但是，因为我会比通常的购物车页面更多地调用 API，所以我想知道 USPS API 是否有任何限制可以阻止我在产品页面上使用 API？

你认为我应该使用某种离线处理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:10:08.267

否 - USPS Web 服务规范中没有一般限制。尽管如果您身边有高负荷，他们有权限制您。无论如何，如果您遇到有限的问题，他们可以通过向 USPS 描述业务需求或通过缓存来解决。

我认为，如果您不知道该怎么做，离线处理将不是一件容易的事。

所以 - 尽可能避免离线处理。

# android - 如何在 android 中通过 Picasa API 访问固定用户的数据

> ID：11706703
> 
> 赞同：1
> 
> 时间：2012-07-29T04:37:26.110
> 
> 标签：android, picasa, google-api-java-client

我正在编写一个 android 应用程序，它将访问用户（功能帐户）的照片。如果可能的话，即使对功能帐户 ID 和密码进行硬编码也可以。不需要最终用户交互。

**无法使用 google data api 因为 android 不支持** 所以我发现的最接近的是[Gdata API doc](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java#ClientLogin)中的这个单用户“已安装”客户端身份验证，要使用 ClientLogin（也称为“已安装应用程序的身份验证”），请创建一个 PicasawebService 对象，然后调用 setUserCredentials 方法来设置用户 ID 和密码

```
PicasawebService myService = new PicasawebService("exampleCo-exampleApp-1"); 
myService.setUserCredentials("liz@gmail.com", "mypassword"); 
```

**Picasa 服务在 API 控制台中不可用。**

同时，当我尝试使用 OAuth 2.0 时，它不可用

我想知道Picasa应该很流行，做这种简单访问的最好方法是什么？

**官方 picasa-atom-oauth 示例**

[这](https://code.google.com/searchframe#ZgtES37yEeo/picasa-atom-oauth-sample/src/com/google/api/client/sample/picasa/model/Auth.java&q=picasa%20package:google-api-java-client%5C.googlecode%5C.com&ct=rc&cd=8&sq=)是我找到的官方 picasa-atom-oauth 示例。有一个自定义的回调服务器类，但似乎它正在使用浏览器来获取令牌。是否可以在其中硬编码密码？

我读[了这个类似的问题](https://stackoverflow.com/questions/2193700/picasa-access-in-android-picasauploadactivity "问题")，似乎令牌上也有问题。`"oauth2:https://picasaweb.google.com/data/"`有人按照建议成功使用了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:15:17.620

最后在谷歌搜索更多示例之后，旧客户端登录是要走的路。

我使用谷歌 api 客户端 1.10.1-beta

```
 private static String getTokenByAuthenticatingWithClientLogin(HttpTransport transport) throws IOException {
    ClientLogin authenticator = new ClientLogin();
    authenticator.authTokenType = "lh2";
    authenticator.username = "username";
    authenticator.password = "password";
    authenticator.transport = transport;
    return authenticator.authenticate().getAuthorizationHeaderValue();
  } 
```

在标头中设置令牌

```
GoogleHeaders headers = new GoogleHeaders();
headers.setApplicationName("APOD/1.0");
headers.setGDataVersion("2");
  String token = getTokenByAuthenticatingWithClientLogin(transport);
  headers.setAuthorization(token); 
```

然后使用 com.google.api.client.http.HttpRequestFactory 构造请求。

# maven - myfaces 2 的存储库

> ID：11706704
> 
> 赞同：0
> 
> 时间：2012-07-29T04:37:38.173
> 
> 标签：maven, jsf-2, myfaces

请我需要在 Maven 项目中使用 myfaces 2。我在哪里可以找到存储库。

我发现只是依赖 `<dependency> <groupId>org.apache.myfaces.core</groupId> <artifactId>myfaces-api</artifactId> <version>2.0.0-alpha</version> </dependency>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:11:44.043

干得好：

```
https://repository.apache.org/content/repositories/releases/org/apache/myfaces/core/ 
```

# python - TypeError：python中的元类冲突

> ID：11706705
> 
> 赞同：3
> 
> 时间：2012-07-29T04:37:42.527
> 
> 标签：python, django, inheritance, tastypie, metaclass

我正在使用 django-tastypie 为我的 web 应用程序创建一个休息 API。我想创建如下所述的类而不明确地全部输入它们（我有超过 100 个类）

```
class CityResource(ModelResource):
    class Meta:
        queryset = City.objects.all()
class StateResource(ModelResource):
    class Meta:
        queryset = State.objects.all()
etc... 
```

我正在考虑在 python 中使用元类（我的方法可能是错误的，但仍然想以这种方式解决它，因为我想看看元类如何帮助我，也许是在现实生活中学习它的好方法）

我试过这个：

```
class ClassFactory(type):
    def __new__(cls, name, bases, dct):
        return type.__new__(cls, name, bases, dct)

for model in get_models(app):
    name = "%sResource" % model._meta.object_name
    ClassFactory(name, (ModelResource, ), {'Meta':type('Meta', (), {'queryset': model.objects.all()})}) 
```

但这给出了一个错误：

```
TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases 
```

我用谷歌搜索了这个，到处都提到如果一个类派生自两个具有两个不同元类的其他类，那么我创建的类必须有一个从两个元类派生的元类[*]。

1.  在我的情况下，这个错误是如何发生的，因为我是从同一个类 ModelResource 派生的？
2.  我不确定我是否理解 [*]

我可能以错误的方式解决了这个问题，但需要一些指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:53:47.523

（转载自评论。）

我认为您根本不需要`ClassFactory`“元类”。

```
klass = type(name, (ModelResource, ), {...}) 
```

应该为您提供一个从 ModelResource 派生的新类，如您所愿。

# algorithm - 散列的双射类比

> ID：11706707
> 
> 赞同：3
> 
> 时间：2012-07-29T04:37:44.613
> 
> 标签：algorithm, function, hash

从 0 到 M 的整数将被映射到由特定字母组成的 n 个字符代码。棘手的部分是代码应该看起来是伪随机的、非连续的。像这样：

```
0    BX07SU
1    TYN9RQ
2    QZ1697 
```

我认为这是我想念的常识。他们如何调用这种类型的函数`f(i) = s`- 将整数映射到伪随机字符串，在一定范围内没有冲突？

反向函数也很棒：`h(s) = i`能够将有效字符串“解码”回整数，或确定提供的字符串无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:59:58.763

对于小`M`的@user1494736 是正确的：只需制作一个恰好是双射的查找表，然后根据您的需要对其进行定制。

对于大型`M`存储，表格变得不切实际；我们需要一个算法来计算映射。您提到我们不需要强大的密码学；这使我们可以自由选择比标准密码更轻量的东西。也就是说，它们的速度非常快，我希望您可以通过 3rd-party 库轻松使用它们。但是，假设您出于某种原因更愿意避免这种情况。

制作穷人密码的一种方法是`xor`在明文上设置一个常数（以更改汉明权重），然后应用位排列（以破坏局部性）。这两个步骤都是可逆的。听起来您想将密码字母显示为 ASCII。因此，我们可能需要最终的可逆变换（加法）以确保密码值是可打印的。

你提到`M`的可能有几百万。因此，让我们将您的明文字母（以及密文字母）设为 32 位值。找到一个随机的 32 位值`xor`很容易。位排列怎么样？

几百万个明文字母转换为每个字母大约`22`或`23`位宽；这会在每个明文字母中至少`8`清除（逻辑）高位。排列可以利用这一点来帮助确保密文字节在 ASCII 可打印范围内。通过将高位明文字节发送到四个密码字节中的每一个的高两位，我们确保每个密码字节取值`0`到`63`. 最后一步可以添加`48`以使范围`48`为`111`，完全在 ASCII 可打印范围内。

根据这一观察结果，我们可以将明文字母设想`4x4`为位对的网格，并使我们的排列成为该网格的旋转：

```
Plain

A B C D   byte 3 (the high byte, expected to be all 0)
E F G H   byte 2
I J K L   byte 1
M N O P   byte 0

Cipher

D H L P   byte 3
C G K O   byte 2
B F J N   byte 1
A E I M   byte 0 
```

或者换一种说法：

```
Byte       3    2    1    0
Plain   ABCD EFGH IJKL MNOP
Cipher  DHLP CGKO BFJN AEIM 
```

请注意，每个明文字节的一部分出现在每个密文字节中：这将确保编码“看起来是随机的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:35:02.810

对于一个[相关的问题](https://stackoverflow.com/questions/11708559/coupon-code-generation)，我已经发布了一个答案。在您的情况下，您需要一个额外的数学函数来将您的数字映射到不同的数字（可能使用简单的哈希函数）并使用将此数字编码为基数 36 数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T02:46:16.413

获得单向双射散列的最简单方法是使用普通的旧 CRC。它对于 32 / 64 位是可逆的，但我从未见过相反的代码。

# mysql - mysql查询根据两个数据显示输出

> ID：11706708
> 
> 赞同：0
> 
> 时间：2012-07-29T04:37:47.000
> 
> 标签：mysql

在我的桌子上，结构是这样的

表A

```
first_column        second_column       third_column
wwwew                   frfrffee          rfffrfr
dddfdd                  fffrfrfr          rfddwdrv
etc 
```

如果用户没有设置 second_column 的值，我想显示 first_column 的结果，但如果用户指定了 second_column 的值，我想显示 second_column 的值。

我尝试了带有“and”和“or”语句的where子句，但它不起作用。

second_column 是第一列的子级，因此如果用户仅设置了父级，则输出将基于父级，但如果用户设置了父级以及子级或唯一的子级，则输出将基于子级输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:43:06.297

[`coalesce()`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_coalesce)我认为您可以使用该功能完成您想要做的事情。

```
select coalesce(second_column, first_column) from TableA; 
```

# java - 欧拉计划编号 2

> ID：11706716
> 
> 赞同：1
> 
> 时间：2012-07-29T04:39:27.697
> 
> 标签：java

我尝试了很多次，但我似乎无法弄清楚我做错了什么。这是我最近尝试解决的问题之一。

我知道其他来源的正确答案是`4613732`。

```
/*
 *             PROBLEM 2
 * Each new term in the Fibonacci sequence is generated by adding the previous two terms. 
 * By starting with 1 and 2, the first 10 terms will be:
 *
 * 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
 *
 * By considering the terms in the Fibonacci sequence whose values do not exceed four 
 * million, find the sum of the even-valued terms.
 */

public class problem2 
{
    public static void main(String args[])
    {
        int sum = 0;

        int[] anArray = new int[4000000];
        anArray[0] = 1;
        anArray[1] = 2;

        for (int i = 2; i <= anArray.length - 1; i++) {
            anArray[i] = anArray[i - 1] + anArray[i - 2];

            if (anArray[i] % 2 == 0 && anArray[i] <= 4000000) {
                sum += anArray[i];
            }
        }
        System.out.println(sum);        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:51:56.233

您超出了`int`. 你计算的数字太多，最终得到负数。使数组的大小保持正常（例如 40），或者检查 if 语句以忽略负数。

实际上，只需将数组的大小更改为 40，因为 int 翻转后的任何内容都是错误的。

```
int [] anArray = new int[40]; 
```

另请注意，您没有添加`2`数组中的第二个数字。

当您的数字超过 4,000,000 时，您也可以跳出 for 循环，因为无论如何您都不关心它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:59:25.573

首先，你错过了两个其次，为了避免溢出问题：[http://en.wikipedia.org/wiki/Integer_overflow](http://en.wikipedia.org/wiki/Integer_overflow)，一旦超过一百万，你应该插入一个 break 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:50:10.383

使用数组而不是为求和编写一些公式使得问题的解决非常普通。您可以简单地使用等于算术运算符，巧妙地避免使用数组。我的代码解决方案是这样的。希望它可以帮助你。

```
 /*PRoject euler problem2*/
       /*Sum of even terms in fibonacci sequence*/
           public class Euler2
             {

                static long fibosum()
                 {
                    long sum=0;
                    long initialint=0;
              long secondint=1;
              long fibo=initialint+secondint;
                while(fibo<4000000)
                  {
                    if(fibo%2==0)
                {
                  sum=sum+fibo;
                }
                         initialint=secondint;
                   secondint=fibo;
                   fibo=initialint+secondint;
                        }
             return sum;
               }
             public static void main(String args[])
              {
                 Euler2 a=new Euler2();
           System.out.println("Sum of even fibonacci numbers below 4000000 is"+a.fibosum());
               }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T04:50:22.860

```
for(int i=2;i<=anArray.length-1;i++){
            anArray[i]=anArray[i-1]+anArray[i-2];

            if(anArray[i]%2==0 && anArray[i]<=4000000){
                    sum+=anArray[i];
            }
        } 
```

您应该检查循环中斐波那契数的限制，而不仅仅是“总和”部分。因为你错过了支票，所以你溢出了。溢出后，数字“包装”回更小的数字，导致它们（可能，但绝对在这里）小于 4000000。

您可以在这里使用[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)来避免溢出。它没有很好的性能（至少对于 Java 1.6），但它可以解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T04:51:15.480

逻辑在我看来是正确的，但这是一种低效的方法。Project Euler 旨在让您找出更好的算法，因此您的幼稚算法可能会耗尽时间或内存。

尝试在斐波那契数字中寻找模式以提出更快的方法。

编辑：我错过了你在达到 4000000 后没有跳出循环。在这种情况下，数字会溢出并给你不正确的结果。您需要在数字超过 4000000 后中断。此外，这个庞大的数组是完全没有必要的，因为您只需要最后两个数字来计算每个新数字。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-08T13:01:21.893

如果你观察斐波那契数列，每三个数都是偶数：

1,1, **2** ,3,5, **8** ,13,21, **34**

所以一个长度为 3 的数组就足够了。我们可以生成接下来的 3 个斐波那契数并将其存储（覆盖）在数组中，数组中所有第三个元素（偶数 fib 数）的总和将为我们提供斐波那契数列中所有偶数的总和。

代码：

```
public class Prob2 {
    public static int sumOfEvenFibonacci(int limit){
        int fibonacci[] = {1, 1, 2}; 
        int j, sum = 2;

        while(fibonacci[2] < limit){
            for(j = 0; j < 3; j++){
                fibonacci[j] = fibonacci[(j+1)%3] + fibonacci[(j+2)%3];
            }
            sum += fibonacci[2];
        }
        return sum - fibonacci[2];
    }
} 
```

琐碎的测试用例：

```
public class TestProb2 {

@Test
public void testSumOfMultiples(){
    int actual = Prob2.sumOfEvenFibonacci(15);
    assertEquals(10, actual);

    actual = Prob2.sumOfEvenFibonacci(50);
    assertEquals(44, actual);

    actual = Prob2.sumOfEvenFibonacci(200);
    assertEquals(188, actual);

    actual = Prob2.sumOfEvenFibonacci(4000000);
    assertEquals(4613732, actual);
} 
```

}

PS：这个答案可能不完全回答OP的问题，但出于找到它的喜悦而想分享该技术。希望它可以帮助其他在这里寻找解决方案的人。

# android - 消息类的字段

> ID：11706717
> 
> 赞同：1
> 
> 时间：2012-07-29T04:39:34.020
> 
> 标签：android, message

Message 类的哪些字段应该用于存储有关 Message 的自定义消息代码？请任何人告诉我用于存储自定义消息的消息类的字段。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T04:44:37.767

您可以将您的消息代码存储在消息对象的 arg1 和 arg2 中......您也可以将您的消息数据存储在消息的对象字段中......如下所示

```
String str= "Message content";
Message ms = new Message();
ms.arg1 =0;
ms.arg2 = 1;
ms.obj = str; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-19T09:19:33.713

[http://developer.android.com/reference/android/os/Message.html](http://developer.android.com/reference/android/os/Message.html)

public int 在 API 级别 1 中添加了什么

用户定义的消息代码，以便收件人可以识别此消息的内容。每个处理程序都有自己的消息代码命名空间，因此您不必担心您的处理程序与其他处理程序发生冲突。

# php - HTML, PHP 使用 gmail 作为我的网站登录

> ID：11706720
> 
> 赞同：-3
> 
> 时间：2012-07-29T04:40:19.447
> 
> 标签：php, html

我希望用户以他们的 gmail 帐户（或 hotmail、yahoo..etc）登录，因为他们的用户登录到我的网站。我怎么能做到这一点？也许有关于第三方程序的信息？因为我使用的是 php 和 html。例如：类似stackoverflow的东西，用户不必注册，只需使用他们的电子邮件地址登录。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T04:44:31.137

不知道您使用的是什么类型的语言。但在 PHP 中，您只需要一个[**OpenID 解析器**](http://code.google.com/p/lightopenid/)

当然，为了正确建立链接，将涉及更多的编码。可能需要考虑提供更多关于您使用的网站类型的信息。（自定义？Wordpress？Drupal？等）

# javascript - 将值从 JavaScript 函数传递到 JSP 脚本并返回

> ID：11706726
> 
> 赞同：0
> 
> 时间：2012-07-29T04:42:03.320
> 
> 标签：javascript, html, jsp

为什么这段代码不起作用？`newString`总能获得`null`价值。如何获取该`someString`部分中的值`<% %>`？

```
<script>
    function func(someInput)
    {                                                                                                                 
        var someString = someInput;                                                                                                                                   
        <% String newString = request.getParameter("someString");%>
        alert("can you see this string? <%=newString%>");
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:12:06.950

1.  如果您想获取变量：`newString`在您的 JSP 文件中，您应该确保您正在使用`your_file.jsp`此 url 访问页面（命名）：

    `http://your_host:8080/your_file.jsp?someString=foo`

2.  使用混合语言（在您的情况下为 JSP 混合 javascript）编写代码非常困难。请记住：

    > JSP 脚本将在 javascript 文件之前被解析。

# c# - Listview 取消选择 C# Metro

> ID：11706731
> 
> 赞同：2
> 
> 时间：2012-07-29T04:43:32.863
> 
> 标签：c#, listview, microsoft-metro

如何取消选择 C# Metro 应用程序中列表视图的所有值？我通过对象浏览器和在线搜索，并没有找到任何东西。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:17:43.270

您是否尝试过清除`SelectedItems`列表？我认为这就是通常的做法。

```
listView.SelectedItems.Clear(); 
```

编辑：为了澄清一些事情，这里的示例 WPF 应用程序可以毫无问题地清除所选项目。也许`Metro`应用程序的工作方式有些不同，但我认为逻辑应该是相同的。

```
<StackPanel>
    <ListView Name="listView">
        <ListViewItem>Item 1</ListViewItem>
        <ListViewItem>Item 2</ListViewItem>
        <ListViewItem>Item 3</ListViewItem>
        <ListViewItem>Item 4</ListViewItem>
    </ListView>
    <Button Click="Button_Click"
            Content="Clear selection" />
</StackPanel> 
```

这是后面的代码：

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        listView.SelectedItems.Clear();
    } 
```

按钮单击列表项已正确取消选择，并且没有引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:45:19.350

我找到了另一种做我想做的事的方法。我只有一个默认选择“无”的列表项。当我选择这个项目时，焦点会从之前选择的另一个项目上移开。Pako 提供的解决方案可以在传统的桌面/WPF 环境中工作，但显然不是 Metro 环境。谢谢您的帮助。

# php - 在sql中添加数字

> ID：11706737
> 
> 赞同：4
> 
> 时间：2012-07-29T04:44:14.423
> 
> 标签：php, mysql

我有一个具有列平衡的 mysql 数据库。该表用于存储用户账户余额的数据，那么如何在mysql语句中添加数字呢？

这是我到目前为止所拥有的

```
$sql_data = "UPDATE `database1`.`users` SET (`balance`) = '(what to put here?)'
WHERE ('" . $mysqlid . "') "; 
```

所以我必须 a) 使用 mysql 选择查询检索当前余额吗？和b）我用什么将整数5添加到列平衡中，mysql行是double（16,2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:50:56.880

```
$sql_data = "UPDATE `database1`.`users` SET `balance` = MIN(`balance` + 5, (maximum_value_they_can_have)) WHERE ('" . $mysqlid . "') "; 
```

编辑：

可以说，您可以使用不太可能遇到问题的东西（例如 bcmath 函数）进行检查，以验证是否`balance + 5`超出了PHP 中数据类型的范围。`balance`（通过字符串比较的给定精度进行数学运算）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T04:48:39.867

你可以这样做：

```
$sql_data = "UPDATE `database1`.`users` SET `balance` = (`balance` + [value to be added]) WHERE ('" . $mysqlid . "') "; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T04:55:31.437

试试这个 ：

```
$bal=100.5;  // balance to be add
$sql_data = "UPDATE `database1`.`users` SET `balance` = (`balance`+'$bal')  WHERE ('" . $mysqlid . "') "; 
```

# qt - 将 QT GUI 渲染到 SFML 窗口中？

> ID：11706739
> 
> 赞同：0
> 
> 时间：2012-07-29T04:44:30.137
> 
> 标签：qt, sfml

我只想在不使用 opengl 的 QT 实现的情况下将 QT 小部件呈现到 SFML 窗口中。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T22:46:11.510

简短的回答：要么不可能，要么不值得努力。

长一点：渲染 QWidget 派生小部件的唯一方法是将其绘制在另一个 QWidget 上。如果您不编写一些超级骇人听闻的 QT-SFML 胶水代码，那将是不可能的。而且即使你这样做了，你仍然需要在编译过程中使用 qmake。

**编辑，将近一年后：** 这实际上并不是[那么骇人听闻](http://www.sfml-dev.org/tutorials/1.6/graphics-qt.php)......我们都应该使用谷歌。

# conflict - 冲突的 jQuery 选项卡

> ID：11706742
> 
> 赞同：2
> 
> 时间：2012-07-29T04:44:43.630
> 
> 标签：conflict, jquery

我在我的 magento 商店中使用以下脚本制作标签幻灯片。看起来它正在导致 jQuery 冲突。我尝试使用`jQuery.noConflict()`但没有帮助。

```
<script type="text/javascript">
            var current = 0;
            $('tabs').firstDescendant().className += ' active-tab';
            var active_tab = $('tabs').firstDescendant().firstDescendant().firstDescendant();
            var motion = false;
            function move_to(to, el){    
               if (!motion) {
                el.parentNode.parentNode.className += ' active-tab';
                if (active_tab) {
                active_tab.parentNode.parentNode.className = 'corner-left-top';
                }
                active_tab = el;    
                move = (current - to)*690;
                new Effect.Move($('tabber'), { x: move, beforeStart:function(){ motion = true;},afterFinish:function(){motion = false;}});
                current = to;
               }
            }        
        </script> 
```

这是脚本的 PHP 代码：

```
<div id="tabs" class="tabs">
    <?php $tabs = 0; ?>
    <?php if ($_description = $this->getChildHtml('description')):  ?>
    <div id="width-tab" class="corner-left-top">
        <div class="corner-right-top" >
            <div class="border-top" onclick="move_to(<?php echo $tabs; $tabs++;?>, this)">
                <h3 style="color:#000;"><?php echo strtoupper($this->__('Overview')); ?></h3>
            </div>
        </div>
    </div> 
    <?php endif;?>
    <div id="width-tab-2" class="corner-left-top">
        <div class="corner-right-top">
            <div class="border-top" onclick="move_to(<?php echo $tabs; $tabs++;?>, this)">
                <h3 ><?php echo strtoupper($this->__('Specification')); ?></h3>
            </div>
        </div>
    </div>
    <?php  if ($_product->isSaleable() && $this->hasOptions()):?>
        <div id="width-tab-3" class="corner-left-top">
            <div class="corner-right-top">
                <div class="border-top" onclick="move_to(<?php echo $tabs; $tabs++;?>, this)">
                    <h3><?php echo strtoupper($this->__('Buy')); ?></h3>
                </div>
            </div>
        </div>
        <?php endif; ?><br class="clear-block" /> 
```

```
<ul id="tabber">
    <li id="container_1" class="tabs-list">Product Description</li>
    <li id="container_2" class="tabs-list">Product Specifications</li>                                      
    <li id="container_3" class="tabs-list">Add to Cart button</li>
</ul> 
```

**问题：** id container_3 包含一个“添加到购物车”按钮`<button type="button" title="Add to Cart" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span>Add to Cart</span></span></button>`，该按钮不起作用。

请任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:48:19.317

`firstDescendant()`不是 jQuery 方法。这似乎来自良好的原型。我想你有一些教程或一些混淆。

此外，您需要在[准备好的 DOM](http://api.jquery.com/ready/)上运行您的脚本，除非它嵌入在标记之后，但在生产中您无论如何都会分离这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T04:51:53.370

对于初学者，尝试将 move 设置为局部变量 ( `var move...`)，其次，我很确定没有`firstDescendant`方法，除非您使用自己的自定义脚本。无论如何，请尝试`$("tabs").children().first()`改用，因为该自定义脚本可能会导致冲突。

编辑1：

更改您的代码以在 $(document).ready() 中包装您可以使用的任何内容 - 这将确保您所有动态和随后添加的元素都包含在使用 jQuery 选择器填充的集合中。还将任何多次使用的选择器设置为变量以提高效率。代码：

```
var current = 0;
var motion = false;
var active_tab;

function move_to(to, el) { ..... }

$(document).ready(function () {
    var $tabs = $("tabs");
    $tabs......
    active_tab = .....
    /* note that I stopped coding here because I think that you may have 
       gone in the wrong direction for a few of these lines*/
}); 
```

编辑2：

从添加到购物车按钮的 HTML 元素中删除 onclick 事件处理程序，并将其移动到 jQuery 中的 $(document).ready() 处理程序（让我们尝试将所有脚本保存在同一个位置 - 至少现在是这样）：

```
$(document).ready(function() { 
    $(".btn-cart").click(function () {
       //assuming the id of the form is productAddToCartForm and the form data is
       //already filled out:
       $("#productAddToCartForm").submit()
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T04:52:39.787

如果您因为`$`符号而与 Prototype 发生冲突，您可以通过将 jQuery 逻辑包装在以下内容中来解决此问题：

```
(function($) {
    // jQuery logic here
})(jQuery); 
```

# sql - “会话已关闭”错误（struts2+hibernate）

> ID：11706746
> 
> 赞同：0
> 
> 时间：2012-07-29T04:45:53.010
> 
> 标签：sql, hibernate, session, struts2

**在向我的数据库（ struts2 + hibernate ）发送查询时，我真的对Session Closed**错误感到不安。

```
Struts Problem Report
Struts has detected an unhandled exception: 

Messages: Session is closed! 

File: org/hibernate/impl/AbstractSessionImpl.java 
Line number: 72 

--------------------------------------------------------------------------------

Stacktraces
org.hibernate.SessionException: Session is closed! 
    org.hibernate.impl.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:72)
    org.hibernate.impl.SessionImpl.getTransaction(SessionImpl.java:1341)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:342)
    $Proxy7.getTransaction(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:440)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:279)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:163)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:249)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:148)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:93)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:306)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:128)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:148)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:128)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Unknown Source)

--------------------------------------------------------------------------------

You are seeing this page because development mode is enabled. Development mode, or devMode, enables extra debugging behaviors and reports to assist developers. To disable this mode, set: 

  struts.devMode=false

in your WEB-INF/classes/struts.properties file. 
```

这是我编写 DAO 类的方式：

```
public class CategoryDAOImpl extends HibernateUtil implements CategoryDAO {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    @SuppressWarnings("unchecked")
    public ArrayList<Category> getCategories() {

        ArrayList<Category> CatList = null;
        try {
            session.beginTransaction();
            ListeCat = (ArrayList<Category>) session.createSQLQuery("SELECT * FROM CATEGORY").addEntity(Category.class).list();
            session.getTransaction().commit();
        } 
        catch (Exception e) {
            e.printStackTrace();
        } 
        return CatList;

    }

    // other functions

}

import org.hibernate.*;
import org.hibernate.cfg.*;

public class HibernateUtil {
    private static final SessionFactory sessionFactory;
    static {
        try {
            sessionFactory = new Configuration().configure()
                    .buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

我读到了一个关于这个问题的答案，作为一种解决方案，我们可以使用“非事务性数据库”，即设置自动提交。但在我的情况下，我需要处理事务，并且需要进行许多 SQL 查询（ insert & select ）。我应该改变什么来解决这个问题？非常感谢您提前！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:23:38.190

在这里我找到了我的解决方案，我希望它可以帮助别人：

代替 ：

```
Session session = HibernateUtil.getSessionFactory().getCurrentSession(); 
```

我做了：

```
Session session = HibernateUtil.getSessionFactory().openSession(); 
```

谢谢。

# jquery - 为什么 Handlebarsjs 模板缺少 jquery 移动 CSS 样式？

> ID：11706750
> 
> 赞同：2
> 
> 时间：2012-07-29T04:47:10.530
> 
> 标签：jquery, jquery-mobile, handlebars.js

我在 jquery 移动页面中使用 Handlebarsjs，当我从服务器获取回传数据时，它被插入到模板中......但是没有任何 jquery 移动 CSS 样式应用于模板内的代码。

我的模板如下所示：

```
 <script id="card_list_template" type="text/x-handlebars-template">
            {{#each this}}
            <li>
                <a href="#">
                    <img src="{{path}}" />
                    <h3>{{first_name}}&nbsp;{{last_name}}</h3>
                    <p>Card Owner:&nbsp;{{user_id}}</p>
                </a>
            </li>
            {{/each}}
        </script> 
```

上面的代码块被插入到这个无序列表中：

`<ul id="search_results" data-role="listview" data-theme="a">`

data-role="listview" 应该将某种样式应用于列表项，但它不适用于通过模板生成的项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T20:52:35.867

如果您调用`.trigger('create')`元素，它应该应用样式。

例子：

```
var template = Handlebars.compile(source);
var html = template(output);
$('#handlebarsData').html(html);
// Applies jQuery Mobile styles
$('#handlebarsData').trigger('create'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:13:00.183

```
.trigger('create') 
```

无序列表对我没有帮助。但

```
$('ul').listview('refresh'); 
```

做过。

# android - Android应用，不是原生的，用什么

> ID：11706754
> 
> 赞同：0
> 
> 时间：2012-07-29T04:47:23.640
> 
> 标签：android, cordova, trigger.io

由于几个原因，我真的不想使用原生的 andorid，所以我从[PhoneGap](http://phonegap.com/)开始，因为它让我可以灵活地将应用程序轻松移植到其他平台，并且可以用我更了解的语言构建应用程序。但是后来人们说它真的很慢，更好的方法是为每个平台构建原生应用程序。

有人告诉尝试[trigger.io](https://trigger.io/)（他说）比 Phonegap 快。

我认为构建原生会获得最好的性能提升，没有可比性。但是想知道使用这些跨平台解决方案构建的应用程序是否真的很慢并且它没有用或者说没有竞争力？

有没有人真的将它与原生进行比较并得到某种结果？我发现这个[比较图表](https://spreadsheets.google.com/pub?key=0AsTInFQpmXDNdEdJU0ZNNGx3dDA3aXAxV3lXYWhXVHc)并不是很有用。

我也在phonegap和原生android中做了我的第一个简单的应用程序，但我真的没有发现任何性能差异（应用程序使用相机拍照并将其压缩为缩略图大小，显示和存储）

那么你建议从什么开始或采用原生方式并为每个平台明确构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:19:47.853

我最近也从 phonegap 转向原生。我的观点是 phonegap 适用于实际上看起来和行为类似于网页的简单应用程序。但是如果你想在你的应用程序中添加一些特定的东西，使用 PhoneGap 不是一个好方法。（我的问题是后台服务，谷歌地图性能）..有用于phonegap的本机插件，但我决定更好地编写本机应用程序，也许是一些功能较少的简单应用程序，用于Symbian等其他平台，不值得编写本机应用程序..

PhoneGap 的另一个问题是，它在 iPhone 和 Android 上运行相当流畅，但其他平台的性能和特性功能更差（我有过 Symbian 性能不佳的经验）。

在 PhoneGap 中自定义 UI 确实更简单，但您应该保留每个平台的设计。Iphone 风格的应用程序将是 Windows Phone 用户的痛处。

所以..我真的更喜欢原生，你的应用程序会更好..多平台只有当你有小预算，简单的应用程序，没有时间并且你需要为所有平台提供应用程序时..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:04:00.080

我曾尝试使用 PhoneGap 构建应用程序。由于我的项目处理与第三方的需求，因此与 Native 相比，由于性能问题，我不允许使用 PhoneGap。这是我的答案之一，可以解决您的疑问[https://stackoverflow.com/a/10971241/1008278](https://stackoverflow.com/a/10971241/1008278)

# python - 为乒乓球创造AI+对速度算法的基本了解

> ID：11706756
> 
> 赞同：0
> 
> 时间：2012-07-29T04:47:46.457
> 
> 标签：python, performance, pong, kivy

我正在为我的软件开发课程制作一个乒乓球游戏，我可能应该说这是家庭作业，因此我的理解有限。我在为我的 NPC 桨创建 AI 时遇到了一些问题。我正在使用 Kivy 和 Python。

目前我可以通过这样做来创造**不可能击败人工智能：**

```
#ai
self.player2.center_y = self.ball.y 
```

NPC 的 y 坐标在哪里`self.player2.center_y`（它只在 y 轴上移动）并且`self.ball.y`是球的 y 坐标。我按照 Kivy 网站上的教程来创建游戏的基础。

现在我不知道如何创建可以击败的人工智能。我知道我需要限制 AI 的速度，所以当球变得如此之快时，它就无法抓住它。但问题是，我实际上没有速度功能。

我遵循的教程的问题是它没有解释**一切**。我相信我可以通过说 `"Every x seconds, the paddle will move x pixels in the y axis."`

这是根据 kivy 教程提供球的方式：

```
def serve_ball(self, vel=(10,0)):
    self.ball.center = self.center
    self.ball.velocity = vel 
```

好吧，现在我将尝试理解这一点...`vel=(10,0)):`可能意味着，移动 10 个像素 X 和 0 个像素 Y，将其分配给`ball.velocity`，并且显然控制速度...

```
class PongApp(App):
    def build(self):
        game = PongGame()
        game.serve_ball()
        Clock.schedule_interval(game.update, 1.0/300.0)
        return game 
```

`Clock.schedule_interval(game.update, 1.0/300.0)`关于这一点，是否可以假设……这就是球的移动速度？即 10 像素 x 和 0 y，每 1/300 秒？如果我将其更改为 1/20 之类的东西，它的移动速度会慢得多……所以我会这么认为。

现在我需要创建一个函数来保存 AI……也许

```
def AI(self):
    self.AI_Speed = self.ball.velocity - 10 
```

`self.player1.`指我的桨。

是的..现在我被困住了。我不知道如何使用这个速度来控制桨的移动。有人有想法么？而且由于我的问题很可能非常模棱两可，因此我将提供游戏的来源，以防您需要更好的理解。谢谢你。

[http://pastebin.com/8wTLbH21](http://pastebin.com/8wTLbH21)

ps 我意识到这是一个很大的问题，有很多问题要问，但我希望有人能回答。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:40:51.033

感谢 seaseaotternerd，我设法编写了一些可以制作可击败 AI 的东西。

```
if self.ball.y < self.player2.center_y:
    self.player2.center_y = self.player2.center_y - 3
if self.ball.y > self.player2.center_y:
    self.player2.center_y = self.player2.center_y + 3 
```

我得到球的 y 位置，如果它小于 NPC 桨的中心，我将每次将 NPC 向下移动 3y，直到它相同或更大。如果它超过 NPC 桨的中心也是一样的，我只是增加它。

然后，这定义了桨的速度（每 1/300 秒 3 y 位置），并将允许我增加更难模式的难度。

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T06:43:24.353

由于这是一个很大的问题，我还没有测试过这个或任何东西，但似乎你想要某种移动 AI 的功能（我称之为 self.player2.move()）。如果您在 game.update() 中调用此函数，那么您应该能够将 AI 球拍逐渐靠近击球所需的位置。

self.player2.move() 的一些基本伪代码：

```
figure out if ball is above or below paddle
move self.AI_Speed units in the direction of the ball 
```

您可能需要更多地调整 AI 速度才能完成这项工作，但我认为这应该是正确的总体思路。如果你仔细想想，无与伦比的 AI 基本上只是无限快。

这能帮助你摆脱困境吗？

# asp.net - Internet Explorer 8 中的 Asp.net 菜单控件的 CSS 问题

> ID：11706757
> 
> 赞同：0
> 
> 时间：2012-07-29T04:47:47.077
> 
> 标签：asp.net, css, aspmenu-control

我以前使用 ASP.Net 菜单控件，它工作得很好，在我最新的项目中，我使用相同的菜单控件，但由于某种原因，菜单在单击时不断在菜单左侧添加额外的空间。请看两张截图。

我只有 IE 8 及以下版本才有这个问题，没有任何其他浏览器

[网站实例](http://tinyurl.com/c99epn5)

实际机器上的 Internet Explorer 8 ![实际机器上的 Internet Explorer 8](../Images/a323bd290cc8539b852e0949abe93251.png)

使用 IE Tester 的 Internet Explorer 8 ![使用 IE Tester 的 Internet Explorer 8](../Images/90b9e7c96ada7c56f2807347c3767af6.png)

过去几天我一直在努力解决这个设计问题，因为我无法弄清楚是什么属性造成的......这只有在您的系统上安装了实际的 Internet Explorer 8 或者您使用 IE 测试器和测试时才会注意到它适用于 IE 8 版本。

如果你有更高版本，因为我有 IE 9，我使用 F12 检查它，但它在标准或兼容模式下在 IE 8 中没有显示任何设计问题。

由于我不是 CSS 专家，因此我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:39:19.470

终于解决了这个问题。问题是由于 CSS 属性冲突，我以以下方式编写了 CSS，这造成了问题。我分别编写了两个类来解决问题

```
.LNMore a:link, a:visited 
{
    float:left;
    width:160px;
    height:15px;
    font-family:Tahoma;
    font-weight:bold;
    text-align:right;
    font-size:12px;
    padding-left:0px;
    padding-top:6px;
    color:White;
    text-decoration:none;
} 
```

# c# - 如何使用 C# 中的 Mail 功能发送带有嵌入图像的电子邮件？

> ID：11706762
> 
> 赞同：0
> 
> 时间：2012-07-29T04:49:27.103
> 
> 标签：c#, image, html-email

我想要的只是发送一封带有嵌入图像的电子邮件。我正在努力解决它，我不知道为什么我无法得到它。系统发送该电子邮件但不显示图像，这是结果的快照：

![在此处输入图像描述](../Images/38d4bdb66dbec06c09593206d7db3493.png)

**您能帮我修改下面显示的代码以处理发送该图像吗？让我们假设我们有任何图像。**

C#代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Send();
    }

    protected void SendEmail(string toAddresses, string fromAddress, string MailSubject, string MessageBody, bool isBodyHtml, AlternateView av)
    {
        SmtpClient sc = new SmtpClient("MailAddress");
        try
        {
            MailMessage msg = new MailMessage();
            msg.From = new MailAddress("test@mailAddress.com", "Test Sys");   

            //QuizLink is appSetting inside your web config
            string newLink = System.Configuration.ConfigurationManager.AppSettings["QuizLink"].ToString();

            msg.Bcc.Add(toAddresses);
            msg.Subject = MailSubject;
            msg.Body = MessageBody;
            msg.IsBodyHtml = isBodyHtml;
            msg.AlternateViews.Add(av);
            sc.Send(msg);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    }

    protected void SendEmailTOAllUser()
    {
        string connString = "Data Source=localhost;Initial Catalog=TestDB;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            var sbEmailAddresses = new System.Text.StringBuilder(2000);
            string quizid = "";

            // Open DB connection.
            conn.Open();

            string cmdText = "SELECT MIN (QuizID) As mQuizID FROM dbo.QUIZ WHERE IsSent <> 1";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        // There is only 1 column, so just retrieve it using the ordinal position
                        quizid = reader["mQuizID"].ToString();

                    }
                }
                reader.Close();
            }

            string cmdText2 = "SELECT Username FROM dbo.employee";
            using (SqlCommand cmd = new SqlCommand(cmdText2, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                {
                    while (reader.Read())
                    {
                        var sName = reader.GetString(0);
                        if (!string.IsNullOrEmpty(sName))
                        {
                            if (sbEmailAddresses.Length != 0)
                            {
                                sbEmailAddresses.Append(",");
                            }
                            // Just use the ordinal position for the user name since there is only 1 column
                            sbEmailAddresses.Append(sName).Append("@mailAddress.com");
                        }
                    }
                }
                reader.Close();
            }

            string cmdText3 = "UPDATE dbo.Quiz SET IsSent = 1 WHERE QuizId = @QuizID";
            using (SqlCommand cmd = new SqlCommand(cmdText3, conn))
            {
                // Add the parameter to the command
                var oParameter = cmd.Parameters.Add("@QuizID", SqlDbType.Int);

                var sEMailAddresses = sbEmailAddresses.ToString();
                string link = "<a href='http://localhost/test.aspx?testid=" + quizid + "'> Click here to participate </a>";
                string body = @"................";
                AlternateView av = AlternateView.CreateAlternateViewFromString(body, null, MediaTypeNames.Text.Html);
                LinkedResource lr = new LinkedResource("contactUs.gif", MediaTypeNames.Image.Gif);
                lr.ContentId="image1";
                av.LinkedResources.Add(lr);

                int sendCount = 0;
                List<string> addressList = new List<string>(sEMailAddresses.Split(','));
                StringBuilder addressesToSend = new StringBuilder();

                if (!string.IsNullOrEmpty(quizid))
                {
                    for (int userIndex = 0; userIndex < addressList.Count; userIndex++)
                    {
                        sendCount++;
                        if (addressesToSend.Length > 0)
                            addressesToSend.Append(",");

                        addressesToSend.Append(addressList[userIndex]);
                        if (sendCount == 10 || userIndex == addressList.Count - 1)
                        {
                            SendEmail(addressesToSend.ToString(), "", "........", body, true, av);
                            addressesToSend.Clear();
                            sendCount = 0;
                        }
                    }

                    // Update the parameter for the current quiz
                    oParameter.Value = quizid;
                    // And execute the command
                    cmd.ExecuteNonQuery();
                }

            }
            conn.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:08:11.297

在您的所有示例中，您似乎正在发送这样的图像，`/somefolder/image.jpg`您不能以这种方式发送它，因为用户正在从另一个域名读取图像，这很可能不是您的，所以如果您查看图像的源代码您会发现它与您使用的不同。

你应该像这样发送图片链接

```
<img src='http://www.mydomainname.com/fulladdress/someimage.png usemap' ='#clickMap'> 
```

# ios - 如何在同一个 View 中编写多个 UIPickerView？

> ID：11706764
> 
> 赞同：3
> 
> 时间：2012-07-29T04:50:50.277
> 
> 标签：ios, xcode, uipickerview, textfield, inputview

我正在使用 textFields inputView 属性来显示 UIPickerViews 而不是键盘。按照我的编程方式，我没有在 .H 文件中声明 PickerViews，也没有在界面构建器的视图中连接它们。当我实现选择器视图的属性时，我无法使它们中的每一个都具有不同的属性。我尝试使用“if”语句来告诉它根据使用的选择器具有不同的属性，如下所示....

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)agePickerView {
    if ([pickerView isEqual: agePickerView]){
                 return 1;
    }
            if ([pickerView isEqual: weightPickerView]){
                 return 1;
    } 
```

}

但是，当我这样做时，它会说 weightPickerView 未声明。所以这是我实现pickerViews的代码。

```
@implementation MainViewController

//WEIGHT FIELD CODE 

-(IBAction)weightFieldDidBeginEditing{
UIPickerView *weightPickerView = [[UIPickerView alloc] init];
weightField.inputView = weightPickerView;
weightPickerView.showsSelectionIndicator = YES;
weightPickerView.delegate = self;
weightPickerView.dataSource = self;
[weightPickerView release];

UIToolbar *weightToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]   initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
[weightToolBar setItems:[NSArray arrayWithObject:doneButton] animated:NO];
 weightField.inputAccessoryView = weightToolBar;
}

-(NSInteger)weightpickerView:(UIPickerView *)weightPickerView numberOfRowsInComponent: (NSInteger)component{
return [weightPickerArray count];
}

-(NSString *)weightpickerView:(UIPickerView*)weightPickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [weightPickerArray objectAtIndex:row];
}

// AGE FIELD CODE

-(IBAction)ageFieldDidBeginEditing{
UIPickerView *agePickerView = [[UIPickerView alloc] init];
ageField.inputView = agePickerView;
agePickerView.showsSelectionIndicator = YES;
agePickerView.delegate = self;
agePickerView.dataSource = self;
[agePickerView release];

UIToolbar *ageToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
[ageToolbar setItems:[NSArray arrayWithObject:doneButton] animated:NO];
ageField.inputAccessoryView = ageToolbar; 
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)agePickerView {
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)agePickerView numberOfRowsInComponent: (NSInteger)component {
return [agePickerArray count];
}

-(NSString *)pickerView:(UIPickerView*)agePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [agePickerArray objectAtIndex:row];

}

-(void)pickerView:(UIPickerView *)agePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    ageField.text = (NSString *) [agePickerArray objectAtIndex:row];
}

-(void)pickerDoneClicked:(id)sender{
[ageField resignFirstResponder];
[weightField resignFirstResponder];
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a    nib.
- (void)viewDidLoad {
[super viewDidLoad];

agePickerArray = [[NSMutableArray alloc] init];
for (int age=1; age<=100; age++) {
    NSString *ageString = [NSString stringWithFormat:@"%d%",age];
                           [agePickerArray    addObject:ageString];

weightPickerArray = [[NSMutableArray alloc] init];
for (int weight = 50; weight<=500; weight++) {
    NSString *weightString = [NSString stringWithFormat:@"%d%",weight];
                            [weightPickerArray   addObject:weightString];
    }
} 
```

有没有其他方法可以做我想做的事情，因为这种方法行不通......如果我只是尝试重做每个选择器视图的实现，我会收到“重新定义......”“numberOfRowsInComponent”的错误“”或我正在做的任何其他属性。请帮助，即使我必须更改它并以某种方式在 .H 文件中声明pickerViews，只要我能做到这一点，我不在乎我必须做什么工作！！

谢谢

更新！！！

```
 @interface MainViewController : UIViewController   <FlipsideViewControllerDelegate,UITextFieldDelegate,UIPickerViewDelegate,UIPickerViewDataSource> {

IBOutlet UITextField*ageField;

NSMutableArray *agePickerArray;
IBOutlet UITextField*weightField;
NSMutableArray *weightPickerArray;
UIPickerView *weightPickerView;
UIPickerView *agePickerView;    

   }

- (IBAction)ageFieldDidBeginEditing;
- (IBAction)weightFieldDidBeginEditing;
- (IBAction)showInfo:(id)sender;
- (IBAction)activityButtonClicked;
@end 
```

.m 文件

```
-(IBAction)weightFieldDidBeginEditing{
//UIPickerView *weightPickerView = [[UIPickerView alloc] init];
weightField.inputView = weightPickerView;
weightPickerView.showsSelectionIndicator = YES;
weightPickerView.delegate = self;
weightPickerView.dataSource = self;
[weightPickerView release];

UIToolbar *weightToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
[weightToolBar setItems:[NSArray arrayWithObject:doneButton] animated:NO];
 weightField.inputAccessoryView = weightToolBar;
}

-(NSInteger)weightpickerView:(UIPickerView *)weightPickerView numberOfRowsInComponent:(NSInteger)component{
return [weightPickerArray count];
}

-(NSString *)weightpickerView:(UIPickerView*)weightPickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [weightPickerArray objectAtIndex:row];
} 
```

// 年龄字段代码

```
-(IBAction)ageFieldDidBeginEditing{
//UIPickerView *agePickerView = [[UIPickerView alloc] init];
ageField.inputView = agePickerView;
agePickerView.showsSelectionIndicator = YES;
agePickerView.delegate = self;
agePickerView.dataSource = self;
[agePickerView release];

UIToolbar *ageToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0,0,320,44)];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
[ageToolbar setItems:[NSArray arrayWithObject:doneButton] animated:NO];
ageField.inputAccessoryView = ageToolbar; 
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)agePickerView {
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
if ([pickerView isEqual: agePickerView]) {
    return [agePickerArray count];
}
if ([pickerView isEqual:weightPickerView]) {
    return [weightPickerArray count];
}
}

-(NSString *)pickerView:(UIPickerView*)agePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [agePickerArray objectAtIndex:row];

}

-(void)pickerView:(UIPickerView *)agePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    ageField.text = (NSString *) [agePickerArray objectAtIndex:row];
}

-(void)pickerDoneClicked:(id)sender{
[ageField resignFirstResponder];
[weightField resignFirstResponder];
}

// Implement viewDidLoad to do additional setup after loading the view, typically from a   nib.
- (void)viewDidLoad {
[super viewDidLoad];

agePickerArray = [[NSMutableArray alloc] init];
for (int age=1; age<=100; age++) {
    NSString *ageString = [NSString stringWithFormat:@"%d%",age];
                           [agePickerArray   addObject:ageString];

weightPickerArray = [[NSMutableArray alloc] init];
for (int weight = 50; weight<=500; weight++) {
    NSString *weightString = [NSString stringWithFormat:@"%d%",weight];
                            [weightPickerArray addObject:weightString];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T05:00:29.940

```
UIPickerView *weightPickerView = [[UIPickerView alloc] init]; 
```

您需要在 .h 文件（或接口）中声明它。

你是子类化`UIPickerView`吗？

编辑*如果您出于某种原因不想在 .h 文件中声明它们，请将 a 设置`tag`为您的选择器。

您所有的`UIPickerView`s 都将调用 UIPickerViewDelegate 方法，`-(NSInteger)weightpickerView:(UIPickerView *)weightPickerView numberOfRowsInComponent: (NSInteger)component`除非您继承并创建自己的方法（我相信您不是），否则不会调用意思，即

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent: (NSInteger)component {
  if([pickerView isEqual: agePickerView]){
   return [agePickerArray count];
  }else if([pickerView isEqual: weightPickerView]){
   return [weightPickerArray count];
  }else return 0;
} 
```

如果你想用标签来做；

```
weightPickerView.tag = 100; //set the tag

if(pickerView.tag == 100) //check which picker it is 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T05:58:52.007

为每个选择器视图设置标签并根据标签以不同方式处理它们

# objective-c - 目标-C：如何从同一类的单独实例访问变量？

> ID：11706766
> 
> 赞同：-1
> 
> 时间：2012-07-29T04:51:09.817
> 
> 标签：objective-c

我有一个代码可以在第一个运行的实例中保存一些数据。然而，这个类的第二个实例调用了一个不同的方法，而是需要从第一个实例中打印出这个数据。我试过 extern 和 static 都没有工作。这可能吗？

代码.h：

> ```
> extern NSString GlobalID
> @interface ...
> @end 
> ```

代码.m：

```
#import code.h
    @implementation NSString *GlobalID;
    -dostuff1: {GlobalID=@"text"}
    -dostuff2:  {NSLog(@"%@",GlobalID)}

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:47:41.580

您要查找的不是实例变量。你想要一个全局类变量。可以这样创建：

```
// code.m
#import "code.h"

static NSString *global_string = nil;
@implementation code
...
@end 
```

然后你可以`global_string`在课堂上的任何地方进行编辑。

关键字`static`意味着该变量只创建一次，并且将在实例之间以及几乎所有其他内容之间保留它的值。`extern`当您想要引用不同模块中的全局（非静态）变量时，使用关键字。请注意，由于显而易见的原因，`static`变量不能是`extern`，反之亦然。

# c - 如何在win32中的静态控件中将文本添加到现有文本

> ID：11706769
> 
> 赞同：0
> 
> 时间：2012-07-29T04:51:24.157
> 
> 标签：c, winapi, textbox, win32gui

我正在使用visual studio rc 在win32 c 中制作一个程序，但我不知道如何完成这个看似简单的任务。我有一个静态文本控件、一个编辑控件和一个按钮。当用户单击按钮时，我不希望程序获取编辑控件中的文本并将其添加到静态文本框中的任何内容中。经过很多头痛和各种尝试，我仍然无法让它工作。我可以很好地从编辑控件中检索文本，但是任何将其添加到静态控件的尝试都会崩溃。好吧，实际上只是为了澄清，我可以很好地设置文本；它只是添加到使程序崩溃的现有文本中。有人可以发布一些代码，让我可以使用 GetWindowText() 和 SetWindowText() 来执行此操作，（或者如果它更可取的话）。这是我所拥有的：

```
SendMessage(hwndEditControl, WM_GETTEXT,255,(LPARAM)editbuffer);
GetWindowText(hwndTextControl, (LPWSTR)allText, GetWindowTextLength(hwndTextControl));
//function to add data, please create on
SetWindowText(hwndTextControl, (LPCWSTR)allText);}
//where
static TCHAR*       editbuffer = new TCHAR; //feel free to change these declarations
static TCHAR*       allText    = new TCHAR; 
```

非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T10:48:33.537

您只为字符串缓冲区保留一个字符。所以而不是

```
static TCHAR*       editbuffer = new TCHAR;
static TCHAR*       allText    = new TCHAR; 
```

你必须保留更多的内存，例如：

```
static TCHAR*       editbuffer = new TCHAR[255];
static TCHAR*       allText    = new TCHAR[255]; 
```

这将为您提供可以容纳 254 个字符和终止空字符的字符串缓冲区。

但是，我建议您只需在函数内的堆栈上保留内存：

```
void OnButtonClick()
{
    TCHAR editbuffer[255] = {0};
    TCHAR allText[255] = {0};
    ...
} 
```

# python - 在 python 中测量程序运行时

> ID：11706773
> 
> 赞同：0
> 
> 时间：2012-07-29T04:51:56.880
> 
> 标签：python, performance, loops, time

我有一个程序说：

```
for i in xrange(10):
    for p in xrange(10):
        print i, p 
```

我希望能够以毫秒为单位打印程序在程序结束时执行的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T04:54:49.453

运行您的程序`python -m timeit -s 'import my_module' 'my_module.do_stuff()'`以查看运行时间信息。

根据`timeit` [文档](http://docs.python.org/library/timeit.html)，只是滚动你自己的有点棘手，所以它是为你提供的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T04:56:30.313

尽管我更喜欢@Julian 的方法，但您可以在 python 代码中执行以下操作，只是提供此方法作为替代方案：

```
from timeit import timeit

def foo():
    for i in xrange(10):
        for p in xrange(10):
            print i, p

print timeit(setup='from __main__ import foo', stmt='foo()') # returns float of seconds taken to run 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T08:19:15.880

我写了一个小片段，可以让您使用上下文管理器测量经过的时间。看看[https://github.com/BaltoRouberol/timer-context-manager](https://github.com/BaltoRouberol/timer-context-manager)

例子：

```
from timer import Timer

with Timer() as t:
    # Some code we want to time

print t.elapsed_ms  # elapsed time, in milliseconds 
```

它使用`timeit.default_timer`（平台特定的计时器功能：`time.time`适用于 Unix 平台和 `time.clock`Windows 平台）来测量块的挂钟时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T04:53:48.503

查看`time.clock()`函数（[http://docs.python.org/library/time.html](http://docs.python.org/library/time.html)）

# java - 如何在 Java 中打印 Trie？

> ID：11706774
> 
> 赞同：2
> 
> 时间：2012-07-29T04:52:01.460
> 
> 标签：java, printing, trie

我有一个 trie 实现，我想打印出我的 trie，以便查看其中的内容。在深度优先遍历中更可取，因此这些词实际上是有意义的。这是我的代码：

```
package trie;

public class Trie {
    public TrieNode root;

    public Trie(){
        root = new TrieNode();
    }

    /*
    public Trie(char c){
        TrieNode t = new TrieNode(c);
        root = t;
    }*/

    public void insert(String s, int phraseNb){
        int i = 0;
        TrieNode node = root;
        char[] string = s.toCharArray();
        TrieNode child = null;

        while(i < string.length){
            child = node.getChild(string[i]);
            if(child == null){
                child = new TrieNode(string[i]);
                node.addChild(child);
            }
            else{
                node = child;
            }
            i++;
        }

        node.endOfWord();
        node.setNb(phraseNb);
    }

    public int[] search(char[] c){
        TrieNode node = root;
        for(int i = 0; i < c.length-1; i++){
            node = root;
            int s = 0;
            while(i+s < c.length){
                TrieNode child = node.getChild(c[i + s]);
                if(child == null){
                    break;
                }
                if(child.isWord()){
                    return new int[] {i, s+1, node.getNb()};
                }
                node = child;
                s++;
            }
        }
        return new int[] {-1, -1, -1};
    }

    public void print(){

    }
}

package trie;

import java.io.*;
import java.util.*;

public class TrieNode {
    private boolean endOfWord;
    private int phraseNb;
    private char letter;
    private HashSet<TrieNode> children = new HashSet<TrieNode>();

    public TrieNode(){}

    public TrieNode(char letter){
        this.letter = letter;
    }

    public boolean isWord(){
        return endOfWord;
    }

    public void setNb(int nb){
        phraseNb = nb;
    }

    public int getNb(){
        return phraseNb;
    }

    public char getLetter(){
        return letter;
    }

    public TrieNode getChild(char c){
        for(TrieNode child: children){
            if(c == child.getLetter()){
                return child;
            }
        }
        return null;
    }

    public Set<TrieNode> getChildren(){
        return children;
    }

    public boolean addChild(TrieNode t){
        return children.add(t);
    }

    public void endOfWord(){
        endOfWord = true;
    }

    public void notEndOfWord(){
        endOfWord = false;
    }
} 
```

我只需要一个关于如何去做的解释或一些伪代码。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:59:22.493

我记得我大学时尝试在控制台上打印树的时候。Trie 在打印 IMO 方面是相同的……这就是我所做的，这也是我建议你做的事情：拿一些纸并在那里画出你的 trie。现在想想你想如何打印 trie。我认为 trie 的组成类似于 N-tree（不是二叉树，而是一棵有很多孩子的树）。除此之外，它是一个递归结构，就像一棵树。所以你真的可以在这里应用深度优先的方法。

假设您要打印这样的 trie（节点 'a' 是根）：

> 一个

```
 b

     e

     f

     g
  d 
```

这就像一个包含单词的 trie：ad abe abf abg

所以你从一个根开始，累积偏移量并递归遍历：

```
printTrie(Node node, int offset) {
     print(node, offset)
     // here you can play with the order of the children
     for(Node child : node.getChildren()) {
          printTrie(child, offset + 2)
     } 
} 
```

开始你的递归：

```
printTrie(root, 0) 
```

你会完成的

我使用 2 作为常数来处理偏移变化系数，将其更改为 3,4 或其他值，看看会发生什么。

希望这可以帮助。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-11T13:52:30.123

这是使用 HashMap 实现 Trie 的完整示例。

```
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.Map.Entry;

class TrieNode{

    private char c;
    private Map<Character,TrieNode> children = new HashMap<>();
    private boolean isLeaf = false;

    TrieNode(){

    }

    /**
     * @param c the c to set
     */
    public void setC(char c) {
        this.c = c;
    }

    /**
     * @return the children
     */
    public Map<Character, TrieNode> getChildren() {
        return children;
    }

    /**
     * @return the isLeaf
     */
    public boolean isLeaf() {
        return isLeaf;
    }

    /**
     * @return the c
     */
    public char getC() {
        return c;
    }

    /**
     * @param isLeaf the isLeaf to set
     */
    public void setLeaf(boolean isLeaf) {
        this.isLeaf = isLeaf;
    }
}

class Trie{

    TrieNode rootNode;

    public Trie(){
        rootNode = new TrieNode();
    }

    public void insertWord(String word){
        TrieNode current = rootNode;
        for (int i = 0; i < word.length(); i++) {
            char c = word.charAt(i);
            Map<Character,TrieNode> children = current.getChildren();
            if(children.containsKey(c)){
                current = children.get(c);
            }
            else{
                TrieNode trieNode = new TrieNode();
                children.put(c, trieNode);
                current = children.get(c);
            }
        }
        current.setLeaf(true);
    }

    public boolean searchWord(String word){
        TrieNode current = rootNode;
        for (int i = 0; i < word.length(); i++) {
            Map<Character,TrieNode> children = current.getChildren();
            char c = word.charAt(i);
            if(children.containsKey(c)){
                current = children.get(c);
            }
            else{
                return false;
            }
        }

        if(current.isLeaf() && current!=null){
            return true;
        }
        else{
            return false;
        }
    }

    public void print(TrieNode rootNode,int level, StringBuilder sequence) {
        if(rootNode.isLeaf()){
            sequence = sequence.insert(level, rootNode.getC());
            System.out.println(sequence);
        }

        Map<Character, TrieNode> children = rootNode.getChildren();
        Iterator<Character> iterator = children.keySet().iterator();
        while (iterator.hasNext()) {
            char character = iterator.next();
            sequence = sequence.insert(level, character); 
            print(children.get(character), level+1, sequence);
            sequence.deleteCharAt(level);
        }
    }
}

class TrieImplementation{
    public static void main(String[] args) {
        Trie trie = new Trie();
        trie.insertWord("Done");
        trie.insertWord("Dont");
        trie.insertWord("Donor");
        trie.insertWord("Sanjay");
        trie.insertWord("Ravi");
        trie.insertWord("RaviRaj");
        TrieNode root = trie.rootNode;
        trie.print(root,0,new StringBuilder(""));
        System.out.println(trie.searchWord("Dont"));
        System.out.println(trie.searchWord("Donor"));
        System.out.println(trie.searchWord("Jay"));
        System.out.println(trie.searchWord("Saviraj"));
        System.out.println(trie.searchWord("RaviRaj"));
        System.out.println(trie.searchWord("Aaviraj"));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-29T05:14:06.303

这是我刚刚放在一起的一个例子。不是漂亮的打印，只能打印一次 Trie，但它可以完成工作。希望能帮助到你。

```
 import java.util.*;

    public class Trie
    {
      static TrieNode root = new TrieNode();
      static char endMarker = '?';
      public static void main(String[] args)
      {
        System.out.println(checkPresentsAndAdd("test"));
        System.out.println(checkPresentsAndAdd("taser"));
        System.out.println(checkPresentsAndAdd("tester"));
        System.out.println(checkPresentsAndAdd("tasters"));
        System.out.println(checkPresentsAndAdd("test"));
        System.out.println(checkPresentsAndAdd("tester"));

        printTrie(root);
      }

      public static boolean checkPresentsAndAdd(String word)
      {
        TrieNode node = root;
        for(int i = 0; i < word.length(); i++)
        {
          char c = word.charAt(i);
          if(node.checkIfNeighbor(c))
          {
              node = node.getNeighbor(c);
          }
          else
          {
            node.addNeighbor(c);
            node = node.getNeighbor(c);
          }
        }

        boolean nord = false;
        if(!node.checkIfNeighbor(endMarker))
        {
          nord = true;
          node.addNeighbor(endMarker);
        }

        return nord;
      }

      public static void printTrie(TrieNode node)
      {

        if(node == null || node.visited)
            return;

        LinkedList<TrieNode> q = new LinkedList<TrieNode>();

        System.out.println(node);
        node.visited = true;
        q.add(node);

        while (!q.isEmpty())
        {
            TrieNode x = q.removeFirst();
            for(Map.Entry<Character,TrieNode> i : x.neighbors.entrySet())
            {
                if(i.getValue().visited == false)
                {
                   System.out.println(i);
                   i.getValue().visited = true;
                   q.add(i.getValue());
                }
            }
        }
      }
    }

    class TrieNode
    {
      Map<Character, TrieNode> neighbors = new HashMap<Character, TrieNode>();

      boolean visited = false;
      public TrieNode(){}

      public boolean checkIfNeighbor(char c)
      {
        return neighbors.containsKey(c);
      }

      public TrieNode getNeighbor(char c)
      {
        if(checkIfNeighbor(c))
        {
          return neighbors.get(c);
        }

        return null;
      }

      public void addNeighbor(char c)
      {
        TrieNode node = new TrieNode();
        neighbors.put(c, node);
      }

      public String toString()
      {
        StringBuilder sb = new StringBuilder();
        sb.append("Node:[neighbors: ");
        sb.append(neighbors);
        sb.append("]\n");

        return sb.toString();
      }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:44:32.000

在处理像 Trie 这样的复合数据结构时，[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)设计模式通常很有用。它使开发人员能够将复合数据结构的遍历与在每个节点检索到的信息分离。

可以使用访问者设计模式来打印 Trie。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-14T10:02:17.167

这可能会有所帮助。

```
public void printTrie(TrieNode node,String s) {
    String strSoFar = s;
    strSoFar += String.valueOf(node.c);
    if(node.isLeaf)
    {
        System.out.println(strSoFar);
        return;
    }
    else
    {
        Stack<TrieNode> stack = new Stack<TrieNode>();
        Iterator<TrieNode> itr = node.children.values().iterator();
        while(itr.hasNext())
        {
            stack.add(itr.next());
        }
        while(!stack.empty()){
            TrieNode t = stack.pop();
            printTrie(t,strSoFar);
        }

    }
} 
```

尝试调用函数，

```
trieObject.printTrie(trieObject.getRoot(), ""); 
```

# svn - 如何在不提交的情况下移动更改？

> ID：11706775
> 
> 赞同：4
> 
> 时间：2012-07-29T04:52:10.470
> 
> 标签：svn, tortoisesvn, diff, binaryfiles

我正在**笔记本电脑**上进行源代码控制项目，但现在我想将我的工作转移到我的**桌面**。问题是，我无法提交，因为更改仍在**进行中**。

*   一个解决方案可能是*Export*，但据我所知，这并没有考虑到**文件删除**（我这样做了）。
*   另一种解决方案是打一个补丁并在桌面上应用，但我上次测试时，它没有考虑到**二进制文件**（我已经创建和修改过）。

我没有管理员权限，所以我不能创建一个新的**分支**。

还有其他解决方案/解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:41:42.617

只需将包括隐藏的 .svn 文件夹在内的整个工作副本复制到您的台式计算机上。也允许先压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:46:19.190

如果您计划有时在笔记本电脑上工作，有时在桌面上工作，或者只是如果您的更改持续超过一天，您可能应该创建一个功能分支并在那里提交。功能完成后，将功能分支重新集成到主干中。

[SVN 书](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.commonpatterns.feature)涵盖了功能分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T05:01:43.467

这听起来像是一个简单的文件同步问题。为什么不使用 rsync 之类的东西？

```
rsync -a --delete --exclude .git laptop:~/path/to/wd/ desktop:~/path/to/wd/ 
```

# mysql - Mysql表更新问题

> ID：11706781
> 
> 赞同：0
> 
> 时间：2012-07-29T04:53:16.880
> 
> 标签：mysql

我已经在数据库中创建并插入了表值。我计算了金额 = 费率 * 数量。但是，最后一个值会在数据库中的整个金额列中更新。

```
$sql = "INSERT INTO wp_product_details (ProductID, Rate, Quantity) VALUES ('$pid', '$rate', '$qty')";
$result = mysql_query($sql);
$result1 = mysql_query("SELECT * FROM wp_product_details");
echo "<table border=1 cellpadding=0 cellspacing=0 width=65%><tr><td>Product ID</td><td>Rate</td><td>Quantity</td><td>Amount</td></tr>";
while($row = mysql_fetch_array($result1))
  {
  $amt= $row['Rate']*$row['Quantity'];
  mysql_query("UPDATE wp_product_details SET Amount='$amt' where ProductID='$pid'");
  echo "<tr><td>".$row["ProductID"]."</td><td>" .$row['Rate']."</td><td>" .$row['Quantity']."</td><td>".$amt."</td></tr>";
  }
echo "</table>"; 
```

输出：

ProdID Rate 数量 Amt ABC10 120 3 280 XER45 150 3 280 YWE10 130 2 280 ZTW20 140 2 280

这是我的输出。仅更新所有行的最后一行值（金额）。我需要每一行都应该更新自己的数量。请通过编码并帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:01:34.497

`UPDATE wp_product_details SET Amount = Rate * Quantity;`

如果只有特定的产品 ID 像这样更改，则可以使用 WHERE 子句；

`UPDATE wp_product_details SET Amount = Rate * Quantity WHERE ProductID IN (0,3,5,7);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:01:22.770

```
 mysql_query("UPDATE wp_product_details SET Amount='$amt' where ProductID='$pid'"); 
```

为什么你需要多次调用它？

# c# - 锁定文件不被我以外的任何人更改？

> ID：11706785
> 
> 赞同：3
> 
> 时间：2012-07-29T04:54:26.427
> 
> 标签：c#, file, winapi

我需要锁定我的密码字典文件，我想锁定文件不被删除和更改。

我该怎么做？在`C# WinApi`里面还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:36:07.950

当您的程序运行时，您可以使用[`FileStream.Lock`](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock%28VS.71%29.aspx)和[`FileStream.UnLock`](http://msdn.microsoft.com/en-us/library/system.io.filestream.unlock%28VS.71%29.aspx)来锁定文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T05:38:07.163

**您可以使用FileShare.None**打开文件并保留它，只要您希望它被锁定

```
var stream = new FileStream("file.ext",FileMode.Open,
          FileAccess.ReadWrite,FileShare.None);
//file is locked 

stream.Close(); //lock is release. 
```

[http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T05:26:34.027

你为什么不在你的文件上设置安全性（只允许你想要的用户）并在你的代码中使用模拟。模拟将允许您的应用程序使用用户凭据来访问您的文件

[使用来自 url http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)的 Impersonator 类

```
using (new Impersonator("Username", "Domainname", "Password")) 
{ 
  string pwdfile= File.ReadAllText("c:\dictionaryfile.pwd"); 
  Console.WriteLine(pwdfile); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T22:01:24.363

如果您正在寻找*WINAPI 替代方案*，[请参阅此答案](https://stackoverflow.com/questions/1784195/using-lockfileex-in-c-sharp)。它实际上解决了使用`FileStream.Lock`.

# c# - 应该方法返回任务 总是启动返回的任务？

> ID：11706788
> 
> 赞同：12
> 
> 时间：2012-07-29T04:54:56.037
> 
> 标签：c#, task-parallel-library

如果我有类似的方法

```
Task<bool> LongProcessTaskAsync(); 
```

返回已启动的任务会是更好的做法吗

```
return Task<bool>.Factory.StartNew(() => { ... }); 
```

要不就`return new Task<bool>(() => ...)`

就个人而言，我更喜欢第一种方法，但我更愿意与其他 API 和库保持一致。

返回一个未开始的任务是否更合适？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-29T07:37:27.210

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T20:00:44.340

詹姆斯曼宁正确回答。这是另一个角度：为什么有人*想要*一个未开始的任务？如果他这样做了，他本可以等待调用该方法。他本可以稍后调用它，或者自己将其包裹在 Lazy 或 future 中。几乎没有理由不返回已开始的任务。

# javascript - API 的网络服务器

> ID：11706792
> 
> 赞同：0
> 
> 时间：2012-07-29T04:56:39.743
> 
> 标签：javascript, ruby, api, node.js, webserver

您会推荐哪个网络服务器来接收 UDP 发布请求？我想构建一个简单的 Web API 来接收 JSON 格式的发布请求，并且我想将它们存储在 Redis 数据库中。

你会选择 Node.js 吗？我希望找到一个简单的 Ruby 替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T07:08:01.617

Thin 是最安全和可扩展的 Ruby Web 服务器。它结合了 ruby​​ 库 mongrel 解析器、事件机器和机架。做就是了

```
sudo gem install thin 
```

或者`gem install thin`如果您使用的是 rvm。

在控制台中，转到您的应用程序目录并运行。

```
thin start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:46:04.723

Ruby 中的简单意味着 Sinatra。Node.js 也可能是答案，这取决于您更熟悉什么。

# android - 使用 ListView 关闭数据库和光标

> ID：11706793
> 
> 赞同：-1
> 
> 时间：2012-07-29T04:56:49.160
> 
> 标签：android, sqlite, listview, android-listview

我有一个`onCreate()`使用`datasource.open()`and的方法`datasource.close()`。如果`datasource.close();`在末尾发出问题`onCreate()`，我的 ListView SimpleCursorAdapter 始终为空白。

如果我`datasource.close();`从 ListView 的末尾删除，`onCreate()`则会填充。

我一生都无法弄清楚为什么会这样。

任何人都有任何文件说明为什么会发生这种情况？

示例代码：

```
@Override
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);

    Bundle extras = getIntent().getExtras();
    id = extras.getLong("extraID");

    setContentView(R.layout.main);

    datasource = new SMSDataSource(this);
    datasource.open();

    Cursor groupCursor = datasource.queryByGroup(long id);

    contactAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_2, // Use a template
            // that displays a
            // text view
            getCur, // Give the cursor to the list adapter
            new String[] { DBManagement.CONTACTS_COLUMN_NAME,
            DBManagement.CONTACTS_COLUMN_NUMBER }, // Map the NAME
            // column in the
            // people database to...
            layouts); // The "text1" view defined in
    // the XML template

    list = (ListView) findViewById(android.R.id.list);
    list.setAdapter(contactAdapter);

    registerForContextMenu(list);

    groupCursor.close();
    datasource.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:20:27.717

如果你想手动管理你的光标，你应该调用`deactiveate()`你的活动`onStop`然后`requery()`继续。

但是，我会简单地使用`Activity.startManagingCursor()`which 会为您解决这个问题。此方法被标记为已弃用，因此如果您想完全按照 Google 向您推荐的方式执行操作，您可能希望使用`CursorLoader`类来异步处理光标。坦率地说，除非您的数据库非常大和/或您的查询运行速度非常慢，否则使用不推荐使用的方法没有害处，它暂时不会有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:29:06.207

实际上我认为`datasource.close()`方法调用应该放在`onPause()`,`onStop()`或`onDestroy`方法中的某个地方..但没有必要如果您发布一些代码片段，我可以提供更准确的答案..

# javascript - 如何为幻灯片添加过渡？

> ID：11706794
> 
> 赞同：1
> 
> 时间：2012-07-29T04:56:56.963
> 
> 标签：javascript

我在我的网站上使用图像幻灯片我想添加过渡到滑块任何人请帮助我...滑块与此处显示的相同：http: [//yellowandred.in/PGP%20Enterprise/index.php](http://yellowandred.in/PGP%20Enterprise/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:04:04.257

你可以使用 jquery [http://jquery.com/](http://jquery.com/)

**您的 HTML 代码：**

```
<!-- styling the height and width is important for some transitions -->
<div id="slideshow" style="width: 400px; height: 200px">
  <img src="../img/one.jpg"> <!-- can use any element you want, not just images -->
  <img src="../img/two.jpg">
  <img src="../img/three.jpg">
  <img src="../img/four.jpg">
  <img src="../img/five.jpg">
</div> 
```

**您的 Java 脚本：**

```
var $el = $('#slideshow');
$el.slideshow({
  duration: 400,
  delay: 3000,
  selector: '> img',
  transition: 'push(up)',
  autoPlay: true,
  show: function (params){
    var nextIndex = params.next.index;
    if (nextIndex > 2) {
      // do something awesome when the slide is after the third slide.
    }
  },
  complete: function (params){
    // do something awesome when a transition finishes
  }
});

// get the slideshow object if you want it
var slideshow = $el.data('slideshow');

// show the third slide
$el.slideshow( 'show', 2 ); // Element API
slideshow.show(2); // object API

// show the next slide
slideshow.show('next');

// pause and play
slideshow.stop();
slideshow.play(); 
```

**自定义过渡：**

```
jQuery.rf.slideshow.defineTransition('slide', function (params, dir, ease){
  var animation = {},
      prop = (dir == 'left' || dir == 'right') ? 'left' : 'top';
  animation[prop] = (dir == 'left' || dir == 'up') ? '-100%' : '100%';
  params.previous.animate(animation, params.duration, ease);
}); 
```

您也可以创建自己的过渡；）

# python - 从 Ubuntu 迁移到 Windows —— 恢复 Vim+Python 工作流程

> ID：11706796
> 
> 赞同：2
> 
> 时间：2012-07-29T04:58:03.200
> 
> 标签：python, windows, ubuntu, vim

我在 linux 上使用 Vim 已经快一年了，我已经逐渐意识到这样做的力量。我大部分时间都在 Python 中编写代码，因此我对 vimrc 进行了一些配置更改，以使其与 Python 一起工作。我有时会切换回终端执行一些文件编辑任务，然后再切换回 vim。这也是我在 Python 中调试的基本方式。

我最近加入了研究生院，我注意到我们的一些工具需要 Windows。所以我的问题是——当我在 Windows 上花费几个小时时，我如何恢复与 Vim 相同类型的工作流程？看起来 gVim 做了很多好事，但我不知道如何复制返回终端、测试代码、返回代码和编辑工作流程？

我有两个屏幕，所以我现在正在做的事情是在一个屏幕上打开 windows 终端（与 linux 终端相比，这是令人作呕的限制），并在 gvim 的另一个屏幕上编写代码。我在一个屏幕上运行代码并在另一个屏幕上编写代码。有点低效，但至少它接近我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T05:04:18.583

我认识几个使用 Cygwin ( [http://www.cygwin.com/](http://www.cygwin.com/) ) 并且非常喜欢它的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T05:32:46.813

这个工作流可以很好地存在于windows中。

查看[MSYS](http://www.mingw.org/wiki/msys/)：这将为您提供您所期望的大部分 Un*x 命令行实用程序，以及 DOS cmd 窗口中的正确 shell。我已经在 MSYS 中使用了[mintty](http://code.google.com/p/mintty/)终端，它非常好：在 DOS cmd 窗口中通常比 MSYS bash 更好，尽管某些命令在 mintty 中仍然存在问题。

vim 在 DOS cmd 窗口中的任一终端或没有 MSYS/cygwin 的情况下运行良好，但您还应该查看[pc vim/gvim](http://www.vim.org/download.php#pc)。gvim 作为顶级 win 应用程序运行，包括文件资源管理器集成：*在 VIM 中打开*。

安装 python，您的工作流程应该非常接近。

# c# - 如何获得第一个交点

> ID：11706797
> 
> 赞同：1
> 
> 时间：2012-07-29T04:58:12.607
> 
> 标签：c#, math, xna, collision

我正在制作一个类似于 Terraria（在 C# 中使用 XNA 4.0）的游戏，其中包含图块和实体。我已经创建了计算（使用轴对齐的边界框）如果 NPC 等会以当前速度与瓷砖碰撞的函数。

想要一个函数来计算轴对齐矩形第一次碰到瓷砖时的位置（瓷砖存储在一个二维数组中，每个瓷砖是 1 个单位长，半个瓷砖是 0.5 等等），基本上就像从矩形当前所在的位置遍历到它将到达的位置，直到它碰到一个图块并返回该位置。（对于更高的帧率，我更喜欢处理效率更高的东西）。

我试着让它这样如果物体以它的当前速度碰撞，那么它就不会移动。但是，如果它快速移动的物体，那么它会导致它在可能的碰撞之前停下来。无论如何，我想要关于矩形第一次碰撞的信息，以使物体反弹等等（以及使物体无法穿过墙壁等）。

这个问题非常具体，如果我需要澄清任何事情，请告诉我。

# php - php.exe 无法识别：创建 webapp

> ID：11706800
> 
> 赞同：9
> 
> 时间：2012-07-29T04:58:41.687
> 
> 标签：php, yii, cmd

我正在玩弄我新安装的 yii 框架，并尝试通过命令行编译我的第一个 webapp。当我运行时，我`yiic webapp ../testdrive`在控制台中收到此错误：

```
"php.exe" is not recognized as an internal or external command, operable program or batch file 
```

我需要编辑我的 php.ini 文件吗？

我目前在 Windows 7 上的 WAMP Webserver 上运行

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T05:14:38.257

您需要`php.exe`在 `yii\framework\yiic.bat 中添加完整路径

例如，在我的情况下，如果

`"%PHP_COMMAND%" == "" set PHP_COMMAND=C:\wamp\bin\php\php5.3.8\php.exe`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-08T13:54:52.380

只需使用yiic之前的php.exe的路径即可在windows环境下执行php脚本。

您的命令将如下所示：

> > c:/xampp/php/php.exe 路径/yiic webapp application_name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T05:56:11.357

当我们在 yii 框架中创建 webapp 时：或错误（“php.exe”不是内部或外部命令、可运行程序或批处理文件）

php.exe 文件路径：C:\xampp\php\php.exe

yiic.bat 文件路径：C:\xampp\htdocs\YiiMain(文件夹名)\framework\yiic.bat

"%PHP_COMMAND%" == "" 设置 PHP_COMMAND=C:\xampp\php\php.exe

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-22T18:37:34.103

*只需像以前*一样更改`init.bat`文件中 的地址

 *```
if "%PHP_COMMAND%" == "" set PHP_COMMAND=php.exe 
```

*后*

```
if "%PHP_COMMAND%" == "" set PHP_COMMAND=C:\wamp\bin\php\php5.5.12\php.exe 
```

并保存它。*

# php - 阻止PHP访问父目录

> ID：11706802
> 
> 赞同：7
> 
> 时间：2012-07-29T04:59:10.410
> 
> 标签：php, security, permissions

我在目录中托管了一个网站：`/var/www/website.com`.

该目录及其所有子文件夹**允许**执行 PHP 代码。但是，我想**阻止**特定文件夹 ( `/var/www/website.com/subfolder`) 中的 PHP 文件访问父文件夹并列出其文件。

[`scandir()`](http://php.net/manual/en/function.scandir.php)示例：应该允许类似 PHP 函数列出 ( `/var/www/website.com/subfolder`) 中的所有文件夹、子文件夹和文件，但不应**允许**列出**低于**该级别的文件。

你知道如何实现这样的行为（最好使用 Nginx）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T05:05:05.480

为在该文件夹中运行的文件设置 PHP[`open_basedir`](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)选项？

例如，在`nginx`： http: [//michaelshadle.com/2011/02/11/setting-php-ini-parameters-from-nginx](http://michaelshadle.com/2011/02/11/setting-php-ini-parameters-from-nginx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T01:23:47.740

我发现启用 PHP-FPM 的 chroot 变量实际上是将用户真正锁定到目录中的最佳方式。它仍然不是防弹的，但比使用 open_basedir 选项要好得多。

谷歌“chroot 用户 php-fpm”

# wordpress - 在php中生成表行的正确方法

> ID：11706806
> 
> 赞同：0
> 
> 时间：2012-07-29T04:59:57.070
> 
> 标签：wordpress, html-table

我正在尝试生成一个包含行的表，但我这样做的方式似乎是错误的，它只是为每个项目创建一个表。

```
if ($favorite_post_ids):
        $favorite_post_ids = array_reverse($favorite_post_ids);
        foreach ($favorite_post_ids as $post_id) {
            $p = get_post($post_id);
            echo "<table width=\"100%\" border=\"5\">\n"; 
            echo "<tr>\n"; 
            echo "<td>" . get_the_post_thumbnail($post_id, array(55,55), array('class' => 'fav-thumbs')) . "</td>\n"; 
            echo "<td><a href='".get_permalink($post_id)."' title='". $p->post_title ."'><span class='fav-title'>" . $p->post_title . "</span></a></td>\n"; 
            echo "<td>";
            wpfp_remove_favorite_link($post_id);
            echo "</td>\n";
            echo "</tr>\n"; 
            echo "</table>\n"; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:08:23.763

`echo "<table width=\"100%\" border=\"5\">\n";`//这只需要在foreach之前发生一次。

`echo "</table>\n";`//这只需要在最后发生一次。

如果您希望页面加载得更快，您想使用某种类型的 $html 变量。（只要您不尝试生成大表。）

# javascript - jQuery加载不做任何事情

> ID：11706808
> 
> 赞同：0
> 
> 时间：2012-07-29T05:00:32.303
> 
> 标签：javascript, jquery, load

我有这个代码：

`function content(){ $("#23").load("http://www.example.com/index.html", alert('responded')); }`

当身体加载时触发。它确实完成了，`alert`但它不做任何`<div id="23"></div>`位于页面上的操作。

任何想法为什么？

我是 jquery 的新手，如果这是一个非常简单的错误，我很抱歉。

更新：使用建议的代码，然后在 Xcode 中更改一些内容后，我可以让跨域运行良好。谢谢堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:04:53.897

你的问题是你`callback`做错了，用这个替换你`function`的：

```
function content() { 
    $('#23').load('http://www.example.com/index.html', function() {
        alert('responded');
    }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:04:27.667

回调需要是调用完成时 jQuery 可以执行的函数。将 alert 与 the 一起使用`()`将立即执行该功能。您可以将警报调用包装在`anonymous function`jQuery 可以在 Ajax 调用完成时使用的调用中。

```
function content() { 
    $("#23").load("http://www.example.com/index.html", function() {
        alert('responded');
    }); 
} 
```

# javascript - 我可以自动选择下拉菜单吗？

> ID：11706829
> 
> 赞同：0
> 
> 时间：2012-07-29T05:04:29.643
> 
> 标签：javascript, jquery

我正在通过自动完成从表格中获取文本，以预加载上次用户在表格中设置的信息。我可以毫无问题地获取信息。这是我很难使用的 jquery/javascript 代码：

```
 $('#type').val(ui.item.type); 
    var t = $("#type").val();
    $('#types').text(t); 
```

下面是下拉菜单的 HTML 代码：

```
 <label for="type"><strong>*</strong>Tournament Type</label>
        <select name="type" id="type">
        <option value="">Please select...</option><?
                                                    while ($type = mysql_fetch_array($types)) {
        $TID = $type['ID'];
        $name = htmlspecialchars($type['Type']);
        echo("<option value = '$name'>$name</option>\n");
                                                    }?>
        </select> 
```

我在这里想要完成的是使我的下拉菜单上显示的项目等于以前选择的项目，同时仍然保持下拉菜单的功能，以防需要更改信息。到目前为止，我还无法让它发挥作用。我可以这样做还是应该使用另一种方法来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:18:24.437

你试过了吗

```
echo("<option selected value = '$name'>$name</option>\n") 
```

在你想要的那个

或在以下情况下使用 jQuery：

```
$("#type").val("someval") 
```

# c# - 对于在游戏循环中很少更改的变量，是否有更有效的替代 switch 语句的方法

> ID：11706830
> 
> 赞同：-2
> 
> 时间：2012-07-29T05:04:34.030
> 
> 标签：c#, xna

假设你有一些东西会在一段时间内保持变化，比如游戏的游戏状态。在这个游戏中，游戏循环不断运行，它的更新方法不断运行。

您可以通过使用带有表示游戏状态的变量的 switch 语句来完成游戏状态，并且根据它的值，它将执行菜单或游戏玩法或游戏的其他状态的代码。

每次游戏更新，都会先经过这个switch语句，这样看起来效率低下

对于暂时不会改变的东西，是否有比 switch 语句更有效的替代方法？我可以看到这是通过方法的变量完成的，但我认为 c# 不支持方法变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:17:36.060

将 switch 更改为某种东西的标准方法是使用 Dictionary of choice-to-handler。此处讨论了[重构我的 C# 代码 - Switch 语句](https://stackoverflow.com/questions/561401/refactor-my-c-sharp-code-switch-statement)

```
var choices = new Dictionary<ChoiceType, Func<ChoiceResult> > (); 
...

public ChoiceResult HereWasSwitch(ChoiceType myChoice)
{
  return choices[myChoice]();
} 
```

另一种方法是使用多态性并将每个选择替换为处理它的类。查看[http://hanuska.blogspot.com/2006/08/swich-statement-code-smell-and.html](http://hanuska.blogspot.com/2006/08/swich-statement-code-smell-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:21:25.267

根据用户所在的部分创建多个循环。

您可能永远不会用完整个 cpu 时间，因此请考虑编写某种微时间函数，该函数将每 1/60 秒检查一次输入。这同样适用于视频渲染，大多数显示器每 60 秒或 120 秒更新一次。您不需要使用 100% 的 cpu 或 gpu 来渲染游戏中的场景。

If your writing your game using windows api you dont really have to bother, as windows will automatically handle how often input, and updates are applied to your form data.

# iphone - 对多个 uiimageviews 使用 UIImagePickerController。（使用多个 UIButton）

> ID：11706836
> 
> 赞同：2
> 
> 时间：2012-07-29T05:05:16.147
> 
> 标签：iphone, xcode, uiimageview, uibutton, uiimagepickercontroller

我有 2 个 uiimage 视图（imageview 和 imageview2）和 2 个 uibuttons（useCameraRoll 和 useCameraRoll2） 我已经实现了使用 2 个按钮在这些视图上设置图像的代码。

imageview 与它的按钮 useCameraRoll 一起工作正常，但是当我使用 useCameraRoll2 设置图像时，它会更改 imageview 而不是 imageview2 的图像。

视图/按钮 1 的代码：

```
- (IBAction) useCameraRoll: (id)sender
{
    if ([self.popoverController isPopoverVisible]) {
        [self.popoverController dismissPopoverAnimated:YES];
    } else {
        if ([UIImagePickerController isSourceTypeAvailable:
             UIImagePickerControllerSourceTypeSavedPhotosAlbum])
        {
            UIImagePickerController *imagePicker =
            [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType =
            UIImagePickerControllerSourceTypePhotoLibrary;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];
            imagePicker.allowsEditing = NO;

            self.popoverController = [[UIPopoverController alloc]
                                      initWithContentViewController:imagePicker];

            self.popoverController.delegate = self;

            [self.popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

            newMedia = NO;
        }
    }
}

#pragma mark -
#pragma mark UIImagePickerControllerDelegate

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info

{
    [self.popoverController dismissPopoverAnimated:true];
    NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];
   // [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info
                          objectForKey:UIImagePickerControllerOriginalImage];

        self.imageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
                                           self,  
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
    else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
} 
```

视图/按钮 2 的代码：

```
- (IBAction) useCameraRoll2: (id)sender
{
    if ([self.popoverController2 isPopoverVisible]) {
        [self.popoverController2 dismissPopoverAnimated:YES];
    } else {
        if ([UIImagePickerController isSourceTypeAvailable:
             UIImagePickerControllerSourceTypeSavedPhotosAlbum])
        {
            UIImagePickerController *imagePicker2 =
            [[UIImagePickerController alloc] init];
            imagePicker2.delegate = self;
            imagePicker2.sourceType =
            UIImagePickerControllerSourceTypePhotoLibrary;
            imagePicker2.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];
            imagePicker2.allowsEditing = NO;

            self.popoverController2 = [[UIPopoverController alloc]
                                      initWithContentViewController:imagePicker2];

            self.popoverController2.delegate = self;

            [self.popoverController2 presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

            newMedia = NO;
        }
    }
}

#pragma mark -
#pragma mark UIImagePickerControllerDelegate

-(void)imagePickerController2:(UIImagePickerController *)picker2
didFinishPickingMediaWithInfo:(NSDictionary *)info2
{
    [self.popoverController2 dismissPopoverAnimated:true];
    NSString *mediaType2 = [info2
                           objectForKey:UIImagePickerControllerMediaType];
    // [self dismissModalViewControllerAnimated:YES];
    if ([mediaType2 isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image2 = [info2
                          objectForKey:UIImagePickerControllerOriginalImage];

        self.imageView2.image = image2;
        if (newMedia2)
            UIImageWriteToSavedPhotosAlbum(image2,
                                           self,  
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
    else if ([mediaType2 isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
} 
```

我检查了界面生成器中的所有连接是否都连接到正确的视图。

有谁知道为什么会出错

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T14:08:02.307

我认为您的问题可能来自您的委托：您的 2 UIImagePickerController 使用相同的委托“self”。以下方法：

```
-(void)imagePickerController2:(UIImagePickerController *)picker2 didFinishPickingMediaWithInfo:(NSDictionary *)info2 
```

实际上从未调用过，并且不是`UIImagePickerControllerDelegate`.

您将需要区分哪个动作来自您的选择器，并在您的单一委托方法的代码中相应地更新正确的图像。

也许你可以创建一个实例变量：

```
UIImageView *_currentPickerTarget 
```

然后在每种情况下显示选择器之前设置此变量：

```
- (IBAction) useCameraRoll: (id)sender {
    (...)
    _currentPickerTarget = imageView;
}

- (IBAction) useCameraRoll2: (id)sender {
    (...)
    _currentPickerTarget = imageView2;
} 
```

然后在您的委托方法中，您只需`_currentPickerTarget`通过替换来更新：

```
self.imageView.image = image; 
```

经过

```
_currentPickerTarget.image = image; 
```

在`-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`函数中。

希望这会有所帮助。克里斯托夫

# php - PHP密码更新表单未写入数据库

> ID：11706838
> 
> 赞同：0
> 
> 时间：2012-07-29T05:06:55.263
> 
> 标签：php, mysql, forms

现在我停留在更新密码区域，我尝试输入新密码，然后我单击更新按钮但在数据库未更新，这里的任何人都可以帮助我错误在哪里？

这是我的更新声明

```
 $editFormAction = $_SERVER['PHP_SELF'];
    if (isset($_SERVER['QUERY_STRING'])) {
      $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
    }

    if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE user SET password=%s WHERE password_hidden=%s",
                       GetSQLValueString($_POST['password'], "text"),
                       GetSQLValueString($_POST['password_hidden'], "text")); 
```

这是我的表格

```
<form method="POST" name="form1" action="<?php echo $editFormAction; ?>">
<table border="0" align="center">
      <tr>
        <td width="130"><span class="style5">New Password</span></td>
        <td width="15"><div align="center" class="style5">:</div></td>
        <td ><label><input name="password" type="password" id="password" tabindex="1" value="<?php echo $row_chgpswd['password']; ?>" size="20" />
        <input name="password_hidden" type="hidden" value="<?php echo $row_chgpswd['password_hidden']; ?>" />
        </label>
        </td>
      </tr>
      <tr>
        <td height="26">&nbsp;</td>
        <td>&nbsp;</td>
        <td><div align="right">
          <input type="submit" name="button" id="button" value="Change Password" tabindex="3"/>
        </div>
        </td>
      </tr>
</table>
<input type="hidden" name="MM_update" value="form1">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:13:45.543

Where is the input element named `emailtm`? In your form, you haven't included it. So probably that might be the issue.

You haven't included in the form, but you are accessing it in your php code via the `$_POST` !

`$_POST` is an associative array which contains the name-value pair of the input elements you have submitted via the form.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T05:58:57.413

如果您还可以查看 apache 日志文件以查看是否有任何错误，那就太好了。不知何故，我看到您需要在查询中将 password 和 password_hidden 的值括在引号中。

```
$updateSQL = sprintf("UPDATE user SET password='%s' WHERE password_hidden='%s'",
                   GetSQLValueString($_POST['password'], "text"),
                   GetSQLValueString($_POST['password_hidden'], "text")); 
```

# android - 运行简单项目期间的错误消息

> ID：11706839
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:07:01.730
> 
> 标签：android, logcat, avd

我有一个简单的项目，里面只有一个按钮，但是运行的时候出现这些错误。如果是eclipse出错了，是不可能的，因为我是从官网下载的eclipse。谁能帮我？

```
07-29 03:53:06.418: E/Zygote(32): setreuid() failed. errno: 2
07-29 03:53:24.189: E/Zygote(32): setreuid() failed. errno: 17
07-29 03:53:27.469: E/BatteryService(76): usbOnlinePath not found
07-29 03:53:27.469: E/BatteryService(76): batteryVoltagePath not found
07-29 03:53:27.477: E/BatteryService(76): batteryTemperaturePath not found
07-29 03:53:27.508: E/SurfaceFlinger(76): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
07-29 03:53:27.818: E/SensorService(76): couldn't open device for module sensors (Invalid argument)
07-29 03:54:11.447: E/System(76): Failure starting core service
07-29 03:54:11.447: E/System(76): java.lang.SecurityException
07-29 03:54:11.447: E/System(76):   at android.os.BinderProxy.transact(Native Method)
07-29 03:54:11.447: E/System(76):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
07-29 03:54:11.447: E/System(76):   at android.os.ServiceManager.addService(ServiceManager.java:72)
07-29 03:54:11.447: E/System(76):   at com.android.server.ServerThread.run(SystemServer.java:206)
07-29 03:54:11.508: E/EventHub(76): could not get driver version for /dev/input/mouse0, Not a typewriter
07-29 03:54:11.508: E/EventHub(76): could not get driver version for /dev/input/mice, Not a typewriter
07-29 03:54:12.939: E/SoundPool(76): error loading /system/media/audio/ui/Effect_Tick.ogg
07-29 03:54:12.939: E/SoundPool(76): error loading /system/media/audio/ui/KeypressStandard.ogg
07-29 03:54:12.958: E/SoundPool(76): error loading /system/media/audio/ui/KeypressSpacebar.ogg
07-29 03:54:12.968: E/SoundPool(76): error loading /system/media/audio/ui/KeypressDelete.ogg
07-29 03:54:12.968: E/SoundPool(76): error loading /system/media/audio/ui/KeypressReturn.ogg
07-29 03:54:13.018: E/UsbObserver(76): java.lang.NullPointerException
07-29 03:54:13.018: E/UsbObserver(76):  at com.android.server.UsbObserver.init(UsbObserver.java:131)
07-29 03:54:13.018: E/UsbObserver(76):  at com.android.server.UsbObserver.<init>(UsbObserver.java:65)
07-29 03:54:13.018: E/UsbObserver(76):  at com.android.server.ServerThread.run(SystemServer.java:402)
07-29 03:54:21.917: E/ThrottleService(76): Could not open GPS configuration file /etc/gps.conf
07-29 03:54:21.947: E/ThrottleService(76): Error reading data file
07-29 03:54:22.677: E/logwrapper(178): executing /system/bin/tc failed: No such file or directory
07-29 03:54:22.868: E/logwrapper(181): executing /system/bin/tc failed: No such file or directory
07-29 03:54:23.037: E/logwrapper(185): executing /system/bin/tc failed: No such file or directory
07-29 03:54:25.037: E/logwrapper(210): executing /system/bin/tc failed: No such file or directory
07-29 03:54:25.387: E/logwrapper(214): executing /system/bin/tc failed: No such file or directory
07-29 03:54:25.468: E/logwrapper(217): executing /system/bin/tc failed: No such file or directory
07-29 03:55:14.578: E/ActivityManager(76): Start proc android.process.media for broadcast com.android.providers.downloads/.DownloadReceiver: pid=294 uid=10000 gids={1006, 1015, 2001, 3003}Load: 4.88 / 1.54 / 0.55
07-29 03:55:14.578: E/ActivityManager(76): CPU usage from 0ms to 9380ms later:
07-29 03:55:14.578: E/ActivityManager(76):   39% 76/system_server: 24% user + 15% kernel / faults: 747 minor
07-29 03:55:14.578: E/ActivityManager(76):   15% 239/com.android.launcher: 11% user + 4.2% kernel / faults: 936 minor
07-29 03:55:14.578: E/ActivityManager(76):   14% 258/zygote: 11% user + 2.3% kernel / faults: 409 minor
07-29 03:55:14.578: E/ActivityManager(76):   6.3% 167/com.android.phone: 4.9% user + 1.3% kernel / faults: 190 minor
07-29 03:55:14.578: E/ActivityManager(76):   6.2% 88/bootanimation: 4.8% user + 1.3% kernel
07-29 03:55:14.578: E/ActivityManager(76):   2.3% 274/com.android.deskclock: 1.2% user + 1% kernel / faults: 197 minor
07-29 03:55:14.578: E/ActivityManager(76):   1.9% 40/adbd: 0% user + 1.9% kernel
07-29 03:55:14.578: E/ActivityManager(76):   1.8% 170/com.android.systemui: 0.9% user + 0.8% kernel / faults: 53 minor

07-29 03:55:14.578: E/ActivityManager(76):   19% 76/system_server: 13% user + 5.8% kernel / faults: 19 minor
07-29 03:55:14.578: E/ActivityManager(76):     14% 89/ActivityManager: 10% user + 3.8% kernel
07-29 03:55:14.578: E/ActivityManager(76):     5.8% 84/SurfaceFlinger: 2.9% user + 2.9% kernel
07-29 03:55:14.578: E/ActivityManager(76):     0.9% 81/Compiler: 0.9% user + 0% kernel
07-29 03:55:14.578: E/ActivityManager(76):     0.9% 83/Binder Thread #: 0.9% user + 0% kernel
07-29 03:55:14.578: E/ActivityManager(76):     0.9% 218/Binder Thread #: 0% user + 0.9% kernel
07-29 03:55:14.578: E/ActivityManager(76):   8.3% 88/bootanimation: 7.2% user + 1% kernel
07-29 03:55:14.578: E/ActivityManager(76):     7.2% 92/BootAnimation: 6.2% user + 1% kernel
07-29 03:55:14.578: E/ActivityManager(76):   1.9% 40/adbd: 0% user + 1.9% kernel
07-29 03:55:14.578: E/ActivityManager(76):   0.3% 170/com.android.systemui: 0% user + 0.3% kernel / faults: 1 minor
07-29 03:55:14.578: E/ActivityManager(76):     0.3% 170/ndroid.systemui: 0% user + 0.3% kernel
07-29 03:55:14.578: E/ActivityManager(76): 100% TOTAL: 63% user + 35% kernel + 0.9% softirq
07-29 03:55:52.089: E/ThrottleService(76): Error reading data file
07-29 03:56:07.668: E/MetadataRetrieverClient(33): failed to extract an album art 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:42:05.693

你在运行安卓模拟器吗？

请看这个：[Logcat errors when running android emulator](https://stackoverflow.com/questions/4965339/logcat-errors-when-running-android-emulator) to filter your logs

# html - 静态网站现在可以扩展以允许用户

> ID：11706840
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:07:32.963
> 
> 标签：html, web-site-project

我正计划为一项事业开发一个网站，该网站最终将成为一个类似博客的网站，我将在其中发布有关该事业的内容，用户可以对其发表评论。不过，还会为用户提供其他功能和东西。它可能会通过 rails 或类似的东西来完成，但现在还不重要。

但是我还不能承担那么大的项目，也不能支持存储用户帐户。所以我计划从制作我最终拥有的所有页面的静态页面开始。有没有办法可以做到这一点，使其与我未来的计划兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:11:24.763

听起来你需要一个CMS。查找您的托管服务提供商支持的内容。然后选择一个熟悉的好 CMS，或者有很多支持/低学习曲线。

我不建议制作静态页面。大多数 CMS 程序不允许您直接导入静态页面。

# php - 无法使用 PHP 在 MYSQL 数据库中存储阿拉伯语

> ID：11706846
> 
> 赞同：4
> 
> 时间：2012-07-29T05:08:55.487
> 
> 标签：php, mysql, arabic

过去几个小时我一直在努力寻找解决方案，但无法做到。我在互联网和这个论坛上尝试了所有可能的解决方案，但似乎没有任何效果。这就是问题所在。

我想存储用户将在 mysql 数据库的表单文本区域中键入或粘贴的阿拉伯语数据。该网站是阿拉伯文的，表格只包含这一个文本区域。

要点：

该网站正确显示静态阿拉伯语内容。整个网站都使用 utf8 字符集。所以这不是问题。

表（home）和内容字段（内容）都设置为 utf8_unicode_ci 排序规则，所以这也不是问题。

表单设置为 accept-charset='utf-8' 所以这也不是问题。

当我在表格中使用 phpMyAdmin 插入阿拉伯文本时，我完全没有任何问题。

事实上，当在网站上检索到表格中的阿拉伯文本（通过 phpMyAdmin 输入）时，它会完美显示。

但是，只要在文本区域中输入阿拉伯数据并发送到 DB 以使用插入查询数据进行存储，数据就会转换为 ????

我在用

```
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8'); 
```

连接后，这根本不是问题。正如我之前所说，数据可以正常检索。我已经上传了两张图片。证明我的问题。

我真的被困在这里，正如你所看到的，我也采取了所有可能的步骤来解决这个问题，但这种行为真的很奇怪。请帮忙。

![图 1：显示的数据是从同一个表中正确检索到的，该表直接通过 phpMyadmin 存储](../Images/66ecb34cd4ef859324785c41df33ff15.png)

![图 2 当发送到 mysql 数据库到同一个表时显示相同的数据变成 ???](../Images/a11d3f203cc519ad14d0d222436df412.png)

我用来将数据插入数据库的代码是：

```
 $content=$_POST["content"];
echo $content;
$sql="update home set content='$content'";
$result=mysql_query($sql) or die(mysql_error()); 
```

您可以看到第二个 echo 语句。我添加它来调试问题。数据在此回声中完美显示。我想问题出现在查询中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:08:39.987

我没有尝试使用阿拉伯语，但我在上一个项目站点中尝试了我的代码，该站点有多种语言版本。您可以只添加 php 函数 urlencode 以将内容保存在数据库中，并使用 urldecode 函数检索数据内容。

```
$content=urlencode($_POST["content"]);

echo $content;
$sql="update home set content='$content'"; 
```

用于检索/打印

```
echo urldecode($data['content']); 
```

或者如果您不希望这样做，只需更改列排序规则类型“UTF8_GENERAL_CI”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T06:14:43.810

看起来服务器端的所有代码都正常工作。当浏览器将表单提交回服务器然后数据错误或被错误解释时，错误似乎正在发生。

1) 请您确认您已安装多字节扩展。如果你不这样做，那么 PHP 可能无法正确解释来自浏览器的字符。[http://php.net/manual/en/book.mbstring.php](http://php.net/manual/en/book.mbstring.php)

2）您能否再次检查该页面是否被浏览器实际拾取为 UTF8。浏览器可能不确定页面的字符集，但仍然正确显示阿拉伯字符，因为它正在猜测如何显示它们。所以首先。

在您的 HTML 中，添加此元标记：

还要在脚本顶部添加这个 PHP 标头：

header("内容类型: text/html;charset=UTF-8");

3）如果这些不起作用，请您查看浏览器中的实际表单提交，使用 Chrome 中的开发人员工具或 Firefox 中的 Firebug 来查看提交的确切内容。

例如，我刚刚做了一个测试页，将一些阿拉伯语文本提交到我服务器上的测试页。在请求中，我可以看到表单被编码为

```
Content-Length: 61
test=%26%231607%3B%26%231594%3B%26%231594%3B%26%231601%3B&go= 
```

将文本拆分为单个字符，我可以看到

```
%26
%231607
%3B
%26
%231594
%3B
%26
%231594
%3B%26
%231601
%3B 
```

即阿拉伯字符对我来说是正确编码的——也许你会看到一些不同的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:49:42.613

由于您的数据是 unicode，请使用以下查询：

```
$sql="update home set content=N'$content'"; 
```

注意这封信`N`（如在*National*中）。

谷歌[sql N 前缀字符串](https://www.google.com/search?q=sql+N+prefix+strings)。

# c++ - 将 DMO 作为过滤器插入图表时的意外行为

> ID：11706852
> 
> 赞同：0
> 
> 时间：2012-07-29T05:10:35.253
> 
> 标签：c++, directshow, atl, dmo

我试图将某个 DMO 插入到我的 DirectShow Graph 中。我已经使用适当的接口包装了这个 DMO：

```
ATL::CComPtr< IBaseFilter >         spDMOWrapper;
ATL::CComPtr< IDMOWrapperFilter >   spDMOWrapperEx;

if(FAILED(hr = spDMOWrapper.CoCreateInstance(CLSID_DMOWrapperFilter)))
    return hr;
if(FAILED(hr = spDMOWrapper.QueryInterface(&spDMOWrapperEx)))
    return hr;

IDMOWrapperFilter->Init(SomeDMO)

connecting pins and so on

if(FAILED(hr = pGraph->AddFilter(spDMOWrapper, L"WM DMO Video Encoder")))
        return hr; 
```

以下问题在同一输入上随机发生，

qasf.dll!CMediaWrapperFilter::NewSample() 使用我的 DMO 中实现的“Flush”函数重新初始化我的样本时间戳。

我不确定发生了什么，但据我所知没有任何差距，在短片上，DMO 工作得很好。如果你们想检查调用堆栈：

```
 DMO::Compression::Mainconcept::H264Encoder::Flush()  Line 1165  C++
    qasf.dll!CMediaWrapperFilter::NewSample()  + 0x48 bytes 
    qasf.dll!CWrapperInputPin::Receive()  + 0x16 bytes  
    Filters::Helpers::CPipeOutT<Filters::Helpers::CGenericPipe>::Deliver(IMediaSample * pSample)  Line 383 + 0x20 bytes C++
    Filters::Helpers::CPipeInT<Filters::Helpers::CGenericPipe,Filters::Helpers::CGenericInputPin>::Receive(IMediaSample * pSample)  Line 178 + 0x23 bytes   C++
    CBaseOutputPin::Deliver(IMediaSample * pSample)  Line 2695 + 0x20 bytes C++ 
```

除了解决这个问题，我更感兴趣的是让 CMediaWrapperFilter 认为他需要将样本的时间戳归零的原因。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:17:37.607

这是 的行为`DMO Wrapper Filter`。如果在流式传输时它发现底层 DMO 不再产生输出，但不接受新输入，则过滤器刷新 DMO 并指示流式传输错误。

# iphone - 添加由主音量控制的声音

> ID：11706853
> 
> 赞同：2
> 
> 时间：2012-07-29T05:10:57.053
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在开发的 iOS 应用程序中有一个开火的声音，尽管目前声音的音量是由铃声音量而不是主音量控制的。我认为这是因为它是一个 .caf 文件，但是在将其替换为 mp3 后，它并没有改变它所控制的音量类型。

我认为这是因为我正在使用 AudioServicesCreateSystemSoundID，我假设它仅适用于铃声音量。

```
- (IBAction)fire_rifle {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"rifle", CFSTR ("caf"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

我将如何更改此代码以便使用主音量而不是铃声音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:28:43.860

我建议检查一下`AVAudioPlayer`。它适用于主音量，并具有其他方便的方法来调整播放，您可以利用这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:39:47.683

如其他答案所述，您可以使用`AVAudioPlayer`它。但是，这里有一些示例代码：

```
<AVAudioPlayerDelegate> 
```

一定要包括这个^^

```
- (void)myMethod{
        AVAudioPlayer *data;
        NSString *name = [[NSString alloc] initWithFormat:@"mySoundName"];
        NSString *source = [[NSBundle mainBundle] pathForResource:name ofType:@"mp3"];
        if (data) {
            [data stop];
            data = nil;
        }
        data=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath: source] error:NULL];
        data.delegate = self;
        [data prepareToPlay];
                [data play];

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T23:32:04.363

根据[这个](https://stackoverflow.com/questions/10286744/how-to-change-device-volume-on-ios-not-music-volume)，您不能以编程方式更改设备音量，但是 MPVolumeView（音量滑块）可以更改设备音量，但只能通过用户交互。

如果您想要应用程序级别的音量，AVAudioPlayer 就在那里。在这种情况下，您可以使用 volume 属性以编程方式设置您的应用程序音量（而不是设备音量）。

# maven - 将 Selenium 测试与构建过程分开

> ID：11706855
> 
> 赞同：2
> 
> 时间：2012-07-29T05:11:28.420
> 
> 标签：maven, selenium, build, continuous-integration

我有一个对你们来说可能非常微不足道的问题，我只是想确保我掌握了这个概念。**我已经做了很多研究和阅读**（[SO post](https://stackoverflow.com/questions/406826/do-you-separate-your-unit-tests-from-your-integration-tests)），但我仍然有点困惑，所以我向您求助专家！

在下面的文章中，作者提到了一种常见的做法，即在构建时将 selenium 测试与单元测试分开。他们说 selenium 测试不应该在每个构建上运行，它们应该在 CI 服务器上运行，而不是作为 maven 构建的一部分，因此他们将 maven 配置为跳过 selenium 测试，然后在集成阶段运行。

我有点明白其中的原因，但我对构建生命周期以及为什么必须按照作者的方式进行设置并不是很熟悉。

有人愿意提供一个简单的解释（或提供阅读材料），说明您为什么要执行这些文章中提到的内容吗？我开始大量使用硒，并希望更好地理解这些概念。如果这是微不足道的，再次抱歉，我不是在征求辩论、争论或投票。

非常感谢！

[http://www.weblogism.com/item/334/integration-tests-with-cucumber-jvm-selenium-and-maven](http://www.weblogism.com/item/334/integration-tests-with-cucumber-jvm-selenium-and-maven) [http://www.lagerweij.com/2011/08/24/setting-up-selenium -with-maven](http://www.lagerweij.com/2011/08/24/setting-up-selenium-with-maven) [http://blog.tfnico.com/2007/09/continous-web-testing-with-selenium_16.html](http://blog.tfnico.com/2007/09/continous-web-testing-with-selenium_16.html) [http://developershood.blogspot.com/2009/10/using-selenium-and-maven -for-junit.html](http://developershood.blogspot.com/2009/10/using-selenium-and-maven-for-junit.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T09:26:36.067

当我写了你提到的一篇文章时，我想我应该补充一下。

分离出硒测试还有另一个原因。硒测试很**慢**。开发人员不需要需要花费数分钟才能运行的构建。他希望从他的单元测试中得到快速反馈。Selenium 测试可能会以较低的频率运行，例如在将代码提交/推送到版本控制之前。

出于同样的原因，您可能会在构建服务器上设置不同的构建作业，每次检查时都会运行非 UI 测试，之后可能会运行 UI 测试，或者可能以较低的频率运行（每小时？每晚上？）取决于他们需要多长时间运行，以及你能负担得起什么样的基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:21:13.553

分离和只运行单元测试的原因是：

1.  需要在 selenium 测试**之前**运行单元测试 - 以简化故障推理。
2.  这些类型的测试需要在 Maven 插件配置中进行不同的设置——并行测试运行、排序、系统属性、JVM 选项等。
3.  Selenium 测试是端到端的，需要大量的配置和部署工作、重置应用程序状态（清除数据库、启动和停止应用服务器）——这些工作在所有开发和暂存环境中都不容易完成

Maven 有一组用于分离集成测试步骤的阶段，还有一些配置文件允许在一个地方收集 selenium 测试配置。

这是我们使用 selenium 进行端到端测试的示例（解压缩并运行脚本以从头开始设置数据库、启动应用服务器、运行测试、停止应用服务器、验证和报告测试结果）：

```
<profile>
    <id>selenium</id>
    <dependencies>
        <dependency>
            <groupId>com.thenewmotion</groupId>
            <artifactId>msp-solveconnector</artifactId>
            <version>${project.version}</version>
            <classifier>sql-install</classifier>
            <type>zip</type>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>unpack-dependencies</id>
                            <phase>package</phase>
                            <goals>
                                <goal>unpack-dependencies</goal>
                            </goals>
                            <configuration>
                                <includeGroupIds>com.thenewmotion</includeGroupIds>
                                <includeArtifactIds>msp-solveconnector</includeArtifactIds>
                                <includeClassifiers>sql-install</includeClassifiers>
                                <includeTypes>zip</includeTypes>
                                <includes>**/*.*</includes>
                                <outputDirectory>${project.build.directory}</outputDirectory>
                                <overWriteReleases>false</overWriteReleases>
                                <overWriteSnapshots>true</overWriteSnapshots>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>sql-maven-plugin</artifactId>
                    <dependencies>
                        <dependency>
                            <groupId>mysql</groupId>
                            <artifactId>mysql-connector-java</artifactId>
                            <version>5.1.16</version>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <id>create-db</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>execute</goal>
                            </goals>
                            <configuration>
                                <driver>com.mysql.jdbc.Driver</driver>
                                <url>jdbc:mysql://localhost</url>
                                <username>${msp.db.user}</username>
                                <password>${msp.db.password}</password>
                                <orderFile>ascending</orderFile>
                                <fileset>
                                    <basedir>${project.build.directory}/db</basedir>
                                    <includes>
                                        <include>1_drop_database.sql</include>
                                        <include>2_create_database.sql</include>
                                        <include>3_create_tables.sql</include>
                                        <include>4_create_views.sql</include>
                                        <include>5_create_foreign_keys.sql</include>
                                        <include>6_data.sql</include>
                                    </includes>
                                </fileset>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.mortbay.jetty</groupId>
                    <artifactId>jetty-maven-plugin</artifactId>
                    <configuration>
                        <stopKey>foo</stopKey>
                        <stopPort>8088</stopPort>
                        <connectors>
                            <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                                <port>${msp.port}</port>
                                <maxIdleTime>60000</maxIdleTime>
                            </connector>
                        </connectors>
                    </configuration>
                    <executions>
                        <execution>
                            <id>start-jetty</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <daemon>true</daemon>
                            </configuration>
                        </execution>
                        <execution>
                            <id>stop-jetty</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                <goal>stop</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <version>2.12</version>
                    <configuration>
                        <systemPropertyVariables>
                            <msp.user>${msp.user}</msp.user>
                            <msp.password>${msp.password}</msp.password>
                            <msp.baseUrl>${msp.baseUrl}</msp.baseUrl>
                            <webdriver.type>${webdriver.type}</webdriver.type>
                            <webdriver.chrome.driver>${webdriver.chrome.driver}</webdriver.chrome.driver>
                        </systemPropertyVariables>
                        <includes>
                            <include>**/*FT.class</include>
                        </includes>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>sql-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</profile> 
```

# android - 如何使用 openGL ES android 创建曲线

> ID：11706858
> 
> 赞同：0
> 
> 时间：2012-07-29T05:13:01.057
> 
> 标签：android, opengl-es, curve

我目前正在学习一组关于 Android OpenGL ES (1.1) 的教程，感觉我开始掌握顶点和纹理的工作原理，以及一些精灵动画。据我了解，这里唯一的基元是点、直线和三角形。

我现在正在尝试创建一条简单的曲线，但真的不知道从哪里开始。

我希望动态绘制曲线以表示像这样的梁偏转[，](http://en.wikipedia.org/wiki/Deflection_%28engineering%29)我可以输入力并改变曲线。

我会用带有大量顶点的线环或三角形风扇来创建它吗？或者也许是我然后操纵的纹理？

非常感谢任何输入或正确方向的观点，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:08:27.523

我可以推荐这篇博文[http://blog.uncle.se/2012/02/opengl-es-tutorial-for-android-part-ii-building-a-polygon/](http://blog.uncle.se/2012/02/opengl-es-tutorial-for-android-part-ii-building-a-polygon/)遗憾的是原始来源返回 404。希望链接提供相同质量的信息。无论如何，openGL 的好读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T17:13:03.430

你有一般的想法。无论你做什么，都必须由线、点或三角形组成。您可以根据需要为任何伪曲线生成所有数字，但是您总是将生成的顶点传递给 OPENGL，然后将这些顶点与线和三角形连接起来。

# ios - UIBarButtonItem 的新视图？

> ID：11706862
> 
> 赞同：0
> 
> 时间：2012-07-29T05:13:58.220
> 
> 标签：ios, xcode, uibarbuttonitem

因此，我已经看到了与此类似的先前问题，但它们没有帮助。我也阅读了 Apple 的文档，但我不明白我哪里出错了。AFAIK 我做的一切都是合乎逻辑的，但是当我点击 UItoolbar 覆盖层上的完成按钮时，可以按下按钮但它没有做任何事情。这显然意味着它无法确认编写的代码。但是怎么做？

当在我的 UIToolBar 上单击完成按钮时，我想调出“TableViewController”的 .nib。但是下面的内容不允许单击以显示新视图。我该如何纠正这个问题？请告诉我哪里出了问题，应该更换什么以及为什么。

```
-(void)doneButtonPressed {

TableViewController *UIView = [[TableViewController alloc]
initWithNibName:@"TableViewController" bundle:nil];
UIView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:UIView animated:YES];
[UIView release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:43:33.720

哇，你这里发生了一些奇怪的事情。在您的第一行中，您正在正确地分配和启动`TableViewController`实例，但您并没有为该实例提供唯一的名称。你用另一个类的名字来命名它，这势必会引起问题。事实上，我很惊讶它没有出现错误。

请尝试以下操作：

```
TableViewController *tableView = [[TableViewController alloc]
initWithNibName:@"TableViewController" bundle:nil];
tableView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:tableView animated:YES]; 
```

现在，您的`TableViewController`实例有一个唯一的名称，该名称在该方法的其余部分中被引用。只是要清楚-`UIView`是另一个*类名*，因此不能用作对象实例的名称。

**编辑：**此外，请务必将按钮的选择器添加`doneButtonPressed:`到其视图控制器的 .h 文件中。此外，如果您愿意，您可以`NSLog()`在函数的开头抛出一个调用，以确保它没有（或者可能*是*）被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T07:02:42.667

当按钮动作没有触发时要检查的是你有合适的选择器。如果您正确地遵循了选择器。确保您没有使用选择器

```
@selector(doneButtonPressed:) 
```

它将寻找如下功能：-

```
- (void) doneButtonPressed:(id) sender 
```

对于您的成员函数，您需要

```
@selector (doneButtonPressed) 
```

调试器是你的朋友。从断点开始，以确保您的函数被调用。

如果您要进入该功能，那么接下来要检查的是 The Kraken 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T11:23:00.850

使用类名作为变量名没有任何限制。尽管您应该更改它，因为它令人困惑并且不遵循 iOS 编码约定。

“可以按下按钮但不做任何事情”，选择器是否被调用？

-(void)doneButtonPressed

展示您如何创建 UIBarButtonItem 以验证您是否在 init 方法中提供了正确的选择器，或者您是否直接在界面构建器中连接了按钮（它看起来不像，因为您没有使用 (IBAction) 返回签名。

# url-rewriting - CouchDB 重写

> ID：11706863
> 
> 赞同：2
> 
> 时间：2012-07-29T05:14:28.437
> 
> 标签：url-rewriting, couchdb

我的网站有一个 URL，如下所示： http: [//ashgavs.cloudant.com/site/_design/AshGavsCouch/main/index.html](http://ashgavs.cloudant.com/site/_design/AshGavsCouch/main/index.html)

我在我的设计文档中添加了一个名为 rewrites 的字段，如下所示：

```
[
   {
       "from": "",
       "to": "main/index.html"
   }
] 
```

但是，当我访问此 URL 时： http: [//ashgavs.cloudant.com/site/_design/AshGavsCouch/](http://ashgavs.cloudant.com/site/_design/AshGavsCouch/)。重写没有发生。我做错了吗？有没有办法查看它的重写位置以便我可以调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:09:39.430

如[文档](http://wiki.apache.org/couchdb/Rewriting_urls)中所述，默认重写*来自* `/site/_design/AshGavsCouch/_rewrite`. 如果您希望重写*来自，* `/site/_design/AshGavsCouch/`那么您需要在您的`"from"`字段中指定 URL。

# static - 关于c中的静态函数指针的困惑

> ID：11706868
> 
> 赞同：6
> 
> 时间：2012-07-29T05:16:05.017
> 
> 标签：static, function-pointers

看下面的代码片段。它是在 2005 年编写的，但我正在用最新的 gcc 编译它。

```
xln_merge_nodes_without_lindo(coeff, cand_node_array, match1_array, match2_array)
  sm_matrix *coeff;
  array_t *cand_node_array, *match1_array, *match2_array;
{ 
  node_t *n1, *n2;
  sm_row *row1, *row2;
  static sm_row *xln_merge_find_neighbor_of_row1_with_minimum_neighbors();

  while (TRUE) {
      row1 = sm_shortest_row(coeff);
      if (row1 == NIL (sm_row)) return;
      n1 = array_fetch(node_t *, cand_node_array, row1->row_num);
      row2 = xln_merge_find_neighbor_of_row1_with_minimum_neighbors(row1, coeff);
      n2 = array_fetch(node_t *, cand_node_array, row2->row_num);
      array_insert_last(node_t *, match1_array, n1);
      array_insert_last(node_t *, match2_array, n2);
      xln_merge_update_neighbor_info(coeff, row1, row2);
  }
} 
```

编译时，它抱怨，

```
xln_merge.c:299:18: error: invalid storage class for function ‘xln_merge_find_neighbor_of_row1_with_minimum_neighbors’ 
```

（xln_merger.c:299 是定义开始后的第 3 行）。

第 3 行函数定义似乎是一个函数声明（不是吗？？？）。程序员是否打算编写函数指针（静态）？或者随着时间的推移，c 中的某些语法发生了变化，为什么它没有编译。

这段代码来自[这里](http://embedded.eecs.berkeley.edu/Alumni/pchong/sis.html)`sis`的包

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-06T21:58:10.720

至少对于 GCC，如果包含文件中存在损坏的声明，它将给出“函数的无效存储类”。你可能想回到你的头文件并寻找本来应该是一个声明的东西，而不是一个挂起的函数，比如在包含的 xxx.h 文件中：

```
void foo(int stuff){       <<<<<<<<< this is the problem, replace { with ;
void bar(uint other stuff); 
```

开放的“{”确实让 GCC 感到困惑，并且会在后面抛出随机错误。复制和粘贴函数并忘记将 { 替换为 ; 真的很容易。
特别是，如果你使用我心爱的 [1TBS](https://softwareengineering.stackexchange.com/questions/99543/what-is-the-difference-between-kr-and-one-true-brace-style-1tbs-styles)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-08T06:15:12.260

我遇到了同样的问题，因为错误消息不断说：

```
libvlc.c:507:11: warning: “/*” within comment
libvlc.c:2154: error: invalid storage class for function ‘AddIntfInternal’
libvlc.c:2214: error: invalid storage class for function ‘SetLanguage’
libvlc.c:2281: error: invalid storage class for function ‘GetFilenames’
libvlc.c:2331: error: invalid storage class for function ‘Help’
libvlc.c:2363: error: invalid storage class for function ‘Usage’
libvlc.c:2647: error: invalid storage class for function ‘ListModules’
libvlc.c:2694: error: invalid storage class for function ‘Version’
libvlc.c:2773: error: invalid storage class for function ‘ConsoleWidth’
libvlc.c:2808: error: invalid storage class for function ‘VerboseCallback’
libvlc.c:2824: error: invalid storage class for function ‘InitDeviceValues’
libvlc.c:2910: error: expected declaration or statement at end of input 
```

**解决此问题的简单方法是“我从中得到这些错误的文件中缺少一些大括号”。**

只需通过以下示例。

例如：

```
#include<stdio.h>
int test1()
{
    int a = 2;
    if ( a == 10)
    {
    } 
```

会给

```
test.c:7: error: expected declaration or statement at end of input 
```

在“函数的无效存储类”错误之后。

所以.. 只需注意大括号就可以解决这个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T05:26:29.083

虽然不常见，但在另一个函数中声明一个函数是完全有效和标准的。但是，静态修饰符在没有主体的声明中没有意义，并且您不能*在另一个函数中定义您的函数。

> 程序员是否打算编写函数指针（静态）？

我不知道原始程序员的意图，但绝不可能是函数指针，因为它没有赋值。

* * *

* 实际上你*可以*作为 GCC 扩展

# ios - GameKit 托管的配对是否真的有效？

> ID：11706871
> 
> 赞同：1
> 
> 时间：2012-07-29T05:16:51.800
> 
> 标签：ios, game-center, gamekit, gkmatchmaker

我真的希望我对此是错误的，但据我所知，如果玩家邀请一些朋友参加比赛但留下一些空位供自动机使用，GameKit 托管的配对根本不起作用。我可以让每个案例单独工作，但是当混合时，没有人可以连接。

考虑三个玩家：A、B 和 C。A 邀请 B 参加比赛并留下第三个空位。C选择匹配成三人游戏。

现在，当 B 处理来自 A 的邀请时（由于在 GKMatchmaker 上注册了一个邀请处理程序），他联系托管服务器进行连接并设置他的玩家就绪状态。然后玩家 A 将收到一条委托消息给 matchmakerViewController:didReceiveAcceptFromHostedPlayer: 说 B 已连接。在两人游戏中，此时 B 可以开始游戏并继续进行。相反，单击“立即播放”按钮会导致媒人等待第三位玩家到达。

同时玩家 C 已选择自动添加到比赛中。如果 A 和 B 也要求自动添加，则所有三个都将通过委托 matchmakerViewController:didFindPlayers: 方法收到匹配通知。然而，相反，单击“立即播放”按钮会导致媒人等待……永远。玩家 A 也在等待……永远。玩家 B 只知道邀请者玩家 A，所以理论上他可以尝试开始游戏，但这毫无意义，因为 A 只知道一些参与者。

我很难相信这个系统会有这样一个灾难性的缺陷，但我已经运行了这个场景，并跟踪了相关 GameKit 类中暴露的所有委托方法，当玩家进入无限等待状态时，没有发送的委托消息。就好像 GameCenter 并不完全知道 A 和 B 的存在，这将有助于解释为什么 A 必须明确地将 B 标记为存在于视图控制器中，尽管显然已经“足够”可见以首先收到邀请. 我还尝试让玩家 C 仅请求两人游戏，其想法可能是这意味着玩家 A 仅被视为一个“可见”玩家。

有没有人对这个 API 有任何直接的经验，并且可以明确声明它适用于这个用例（或不适用）？这对我来说是一个严重的问题；这几乎意味着我必须扔掉基于 GameKit 的配对代码并完全从头开始编写一些东西。

提前感谢您提供任何信息。

# php - php排序数组的两种方式

> ID：11706873
> 
> 赞同：2
> 
> 时间：2012-07-29T05:17:16.090
> 
> 标签：php, arrays, sorting

我试图通过以下两种方式对数组的元素进行排序：

*   按密钥长度排序（最小的应该在前） -[见这里](https://stackoverflow.com/questions/838227/php-sort-an-array-by-the-length-of-its-values)
*   最大值应该先行

要按密钥长度排序，我使用以下命令：

```
 function sortByLength($a,$b){
      if($a == $b) return 0;
      return (strlen($a) < strlen($b) ? -1 : 1);
    }

    uasort($deals_tag,'sortByLength'); 
```

数组是这样排序的：

```
Array
(
 [/merchantProductFeed] => 1
 [/merchantProductFeed/merchant] => 1
 [/merchantProductFeed/merchant/prod/text] => 158
 [/merchantProductFeed/merchant/prod] => 158
) 
```

我希望它像这样排序：

```
Array
(
 [/merchantProductFeed/merchant/prod] => 158
 [/merchantProductFeed/merchant/prod/text] => 158
 [/merchantProductFeed] => 1
 [/merchantProductFeed/merchant] => 1
) 
```

请注意，首先数组按键长度排序，然后按最大值排序。

我不知道该怎么做。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:24:01.653

**更新：**您可以使用[array_mulitsort](http://php.net/manual/en/function.array-multisort.php)。尝试

```
$k= array();
$v = array();

foreach($deals_tag as $key => $value){
    $k[] = $key;
    $v[] = $value;
}

array_multisort($v, SORT_DESC, $k, SORT_ASC,  $deals_tag); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:52:38.620

我知道这可能有点开销，但排序事物的另一种方法是使用（临时）数据库，如果我需要一些“硬核”排序，我会亲自使用它，所以这里是......

```
<?php
$p = new PDO("sqlite::memory:");
$p->exec("CREATE TABLE a (k varchar(255),v int)");

$p->exec("INSERT INTO a (k,v) VALUES('/merchantProductFeed',1)");
$p->exec("INSERT INTO a (k,v) VALUES('/merchantProductFeed/merchant',1)");
$p->exec("INSERT INTO a (k,v) VALUES('/merchantProductFeed/merchant/prod/text',158)");
$p->exec("INSERT INTO a (k,v) VALUES('/merchantProductFeed/merchant/prod',158)");

$st=$p->query("SELECT * FROM a ORDER BY length(k) DESC,v DESC");
print_r($st->fetchAll());
?> 
```

我不知道你的字符串有多长，在这个例子中我使用 varchar(255) 如果它更长你应该使用 TEXT。

# ruby-on-rails - Github：克隆旧版本的 Rails gem

> ID：11706874
> 
> 赞同：1
> 
> 时间：2012-07-29T05:17:23.797
> 
> 标签：ruby-on-rails, github

有一个我喜欢的 Rails 论坛 gem，叫做 Forem [https://github.com/radar/forem](https://github.com/radar/forem) 但是，gem 作者对其进行了一些更改，这对我的预期用途产生了负面影响。他添加了一个审核工具，所有新的/未批准的用户都需要在将其显示到论坛之前批准他们的第一个帖子。这实质上意味着版主需要一直在场，否则论坛将很难进行。这是该应用程序的最新添加。

由于 github 是版本控制，我想知道是否有办法克隆或使用（我只想使用它，而不是修改它）gem 的旧版本，这样我就可以在添加审核之前使用一个版本。

谢谢，如果你能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T06:33:44.950

你有一些选择（全部进入`Gemfile`）：

```
gem 'forem', github: 'radar/forem', ref: 'ref that you want' 
```

或者

```
gem 'forem', github: 'radar/forem', tag: 'tag that you want' 
```

或者

```
gem 'forem', github: 'radar/forem', branch: 'branch that you want' 
```

所有这些都在[`Gemfile`文档中进行了描述](http://gembundler.com/man/gemfile.5.html)

# plone - 使用通用界面标记内容类型的更好方法

> ID：11706877
> 
> 赞同：5
> 
> 时间：2012-07-29T05:18:06.080
> 
> 标签：plone, zope, viewlets

我想要一个 viewlet 应用于同一个 python egg 中的多个内容类型的视图。我一直在做的是通过 browser/configure.zcml 应用标记界面

```
<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    i18n_domain="AnnualProgramModule.content">

  <include package="plone.app.contentmenu" />

  <class class="..content.programyear.ProgramYear">
    <implements interface=".viewlets.IAnnualProgram" />
  </class>

  <class class="..content.institution.Institution">
    <implements interface=".viewlets.IAnnualProgram" />
  </class>

</configure> 
```

在我基于 Grok 的模板中，我有：

```
from zope.interface import Interface
from five import grok
from plone.app.layout.viewlets.interfaces import IAboveContentTitle
from AnnualProgramModule.content.interfaces import IInstitution

grok.templatedir('templates')

class IAnnualProgram(Interface):
    """Marker Interface for AnnualProgram content types
    """

class AnnualProgramViewlet(grok.Viewlet):
    grok.require('zope2.View')
    grok.viewletmanager(IAboveContentTitle)
    grok.context(IAnnualProgram)

class InstitutionViewlet(grok.Viewlet):
    grok.require('zope2.View')
    grok.context(IInstitution)
    grok.viewletmanager(IAboveContentTitle) 
```

这行得通。但我很想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:06:36.263

作为替代方案，这也有效：

我添加了interfaces/annualprogram.py（我使用 paste 来创建我的产品）。在里面我有：

```
from zope.interface import Interface    

class IAnnualProgram(Interface):
"""A common marker interface for AnnualProgram ContentTypes""" 
```

然后在我的机构.py 中我添加了：

```
from AnnualProgramModule.content.interfaces import IAnnualProgram
.....

class Institution(folder.ATFolder):
    """Institution Profile"""
    implements(IInstitution, IAnnualProgram) 
```

然后，我将同样的事情应用于需要 IAnnualProgram 的其他内容类型。

这可行，但不一定更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:03:23.440

不，您正在做的实际上是解决此问题的最佳方法。*在任何情况下，我*都会使用标记接口。:-)

另一种方法是为所有不同内容类型的接口或类重新注册 viewlet：

```
<browser:viewlet
    name="yourpackage.annualprogram"
    for="..content.programyear.ProgramYear"
    manager="plone.app.layout.viewlets.interfaces.IAboveContentTitle"
    template="annualprogram.pt"
    permission="zope2.View"
    />

<browser:viewlet
    name="yourpackage.annualprogram"
    for="..content.interfaces.IInstitution"
    manager="plone.app.layout.viewlets.interfaces.IAboveContentTitle"
    template="annualprogram.pt"
    permission="zope2.View"
    /> 
```

但这要冗长得多。

# c# - 我应该为 MMF 创建不可为空的类（以及如何创建）吗？

> ID：11706883
> 
> 赞同：0
> 
> 时间：2012-07-29T05:18:44.360
> 
> 标签：c#, .net, memory-mapped-files

我探索了内存映射文件 (MMF)，这是我到目前为止所做的，只是按照 MSDN [http://msdn.microsoft.com/en-us/library/dd997372.aspx上的示例](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

```
class MMF {
    private long offset = 0x10000000; // 256 megabytes
    private long length = 0x20000000; // 512 megabytes
    public MMF() {
        using (var mmf = MemoryMappedFile.CreateFromFile(@"c:\NFS", FileMode.Open, "NMAP")) {
            using (var accessor = mmf.CreateViewAccessor(offset, length)) {
                int fsSize = Marshal.SizeOf(typeof(FS));
                FS nfs;
                // Make changes to the view.
                for (long i = 0; i < length; i += fsSize) {
                    accessor.Read(i, out nfs);
                    accessor.Write(i, ref nfs); 
```

其中 FS 只是另一个类对象的数组

```
public  class FS {
    public NFS[] files;
    } 
```

但我收到错误：

类型“NEN_Server.FS.FS”必须是不可为空的值类型，才能将其用作泛型类型或方法“System.IO.UnmanagedMemoryAccessor.Read(long, out T)”中的参数“T”

我究竟做错了什么？我的类必须是不可为空的还是应该以其他方式使用访问器？

*谢谢你*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:56:11.677

这里的关键字不是“non-nullable”，而是“valuetyp”。您应该为`struct`要读取/写入的数据声明 a，而不是`class`. 添加“不可为空”仅意味着您不能使用`foo?`代替`foo`.

# ios - 存储 NSUserDefaults 的错误访问

> ID：11706885
> 
> 赞同：0
> 
> 时间：2012-07-29T05:18:48.490
> 
> 标签：ios, nsuserdefaults, exc-bad-access, nsnumber

我正在使用以下代码在 NSUserDefaults 中保存一个数字：

```
NSUserDefaults *prefs = [[NSUserDefaults standardUserDefaults]retain];
NSNumber *num = [[NSNumber alloc]initWithInt:indexPath.row];
[prefs setValue:num forKey:@"randomkeyhere"]; 
```

只有在某些时候我得到一个

> EXC_BAD_ACCESS（代码=2）。

我做错什么了吗？这是未定义的行为还是类似的行为？我想知道为什么我只是有时而不是总是得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:34:31.513

`NSUserDefaults standardUserDefaults`是由 iOS 管理的单例对象。它不是您发起的新对象。摆脱`retain`.

此外，尝试在方法中设置断点以查看程序崩溃的确切位置。从下面的控制台发布错误：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:47:00.347

在单例中，保留是这样的

```
- (id)retain
{
    return self;
} 
```

所以，retainCount 不会加 1。

你可以看看这个：

## [目标 c 中的单例](https://stackoverflow.com/questions/7143162/singleton-in-objective-c)

# android - Android：如何累积保存的 int？

> ID：11706888
> 
> 赞同：0
> 
> 时间：2012-07-29T05:20:12.253
> 
> 标签：android, save, accumulator

我有一个称为硬币的 int，每当用户收集一些硬币时就会显示它。每当显示活动时它都设置为零，但我想在另一个页面上显示累积结果。这就是我积累结果的方式：

```
if (counter == 0) {
    totalCoins += coins;
    counter++;
        } 
```

我已经显示了，`totalCoins`但是每当应用程序被终止并恢复时，totalCoins 都会设置回 0。我尝试使用共享首选项保存它，方法是使用这些方法

```
private void putValue(String name, int value) {
        SharedPreferences sp = getSharedPreferences("sharedPreferences", 0);
        SharedPreferences.Editor prefEditor = sp.edit();
        prefEditor.putInt(name, value);
        prefEditor.commit();
    }

    private int getValue(String name, int defaultValue) {
        SharedPreferences sp = getSharedPreferences("sharedPreferences", 0);
        return sp.getInt(name, defaultValue);
    } 
```

然后使用了`putValue("TotalCoins", totalCoins);`，`totalCoins = getValue("TotalCoins", 0);`我如何累积数量硬币，同时将硬币设置为0，并且在重新启动活动时仍然累积它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:32:16.173

我想您会在显示活动时检查是否`TotalCoins`不大于零，然后再设置`TotalCoins`为零。（可能在`onStart()`或中`onResume()`）

# jqplot - jqplot计算系列点之间的值

> ID：11706889
> 
> 赞同：1
> 
> 时间：2012-07-29T05:20:19.693
> 
> 标签：jqplot

jqplot 中是否有计算曲线并允许您显示一系列点之间的值的功能？

例如，当`showVerticalLine`设置为时，下面的系列将仅显示这五个值`true`。我想在每个刻度上沿曲线显示每个值。

```
var data = [['2011-05-03 10:15:30', 25],
            ['2011-05-04 11:30:30', 30],
            ['2011-05-05 10:15:30', 25],
            ['2011-05-06 11:30:30', 33],
            ['2011-05-07 10:15:30', 25]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:58:57.807

我认为您可以通过以下方式处理它：

1.  对于每个曲线段，检查垂直线是否相交（[关于线和曲线相交的一些数学运算](http://mathcentral.uregina.ca/QQ/database/QQ.09.03/senthil1.html)，但网上还有更多，我相信您甚至可以找到现成的`JavaScript`方法）。
2.  如果它们相交，你就有了想要的点，你可以显示它的 x 和 y 坐标。

如果您使用平滑线选项，那么您可以获得点 `plotObj.series[0].renderer._smoothedPlotData`，[如@Mark 的答案](https://stackoverflow.com/a/11269251/613495)，并测试例如点线距离并取最近的。虽然第一个提到的方法会更精确。

# ruby - 在 Ruby 中，如何有条件地向一个对象添加多个成员？

> ID：11706891
> 
> 赞同：0
> 
> 时间：2012-07-29T05:20:24.823
> 
> 标签：ruby

我想创建一个有条件地添加几个成员的哈希。简单的方法是：

```
var a = {}
a['b'] = 5 if condition_b
a['c'] = 5 if condition_c
a['d'] = 5 if condition_d 
```

现在，我想写一个更惯用的代码。我在尝试：

```
a = {
    b => (condition_b? 5 : null),
    c => (condition_c? 5 : null),
    d => (condition_d? 5 : null)
} 
```

但是现在，`a.length`无论满足什么条件，都等于 3。这不是预期的结果。

有没有方便的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:06:43.717

可能不是您想要的，但这可以提供帮助

```
 array = ['b','c','d']  ##array of values you want as keys 
 a ={}
 array.each do |val|
   a[val] = 5 if send("condition_"+val.to_s)  #call method condition_#{key_name}
 end 
```

如果条件不相关，您可以使用自己的哈希，您可以

```
a = {
    b => (condition_b? 5 : nil),
    c => (condition_c? 5 : nil),
    d => (condition_d? 5 : nil)
}
a.values.compact.size 
```

获取除 nil 以外的值的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:29:36.740

如果满足条件，您只添加到哈希中怎么样，如下所示：

```
a = {}
a.merge!({'b'=>5}) if condition_b
a.merge!({'c'=>5}) if condition_c 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T05:41:02.967

第二种方式，你总是会拥有三把钥匙；条件仅确定特定值。因此，如果您想使用该语法，您将需要定义一个自定义方法，该方法仅在键不为 nil 时计算键（此外，在 Ruby 中它是 nil，而不是 null）。就像是：

```
def non_nil_length(hash)
  i = 0
  hash.each_pair do |k,v|
    if !v.nil?
      i += 1
    end
  end
  i
end 
```

可能有更好的方法来做到这一点，但有快速和肮脏的方法。

# javascript - 使用类别和远程数据源自动完成

> ID：11706892
> 
> 赞同：4
> 
> 时间：2012-07-29T05:20:34.140
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我想要做的是通过 jQueryUI 的功能使用自动完成对结果进行分类。经过一番谷歌搜索后，我发现它有一个内置函数（http://jqueryui.com/demos/autocomplete/#categories），但该示例仅适用于本地数据源（javascript 中的数组）。我正在处理一个远程数据源。它的自动完成功能在没有添加类别代码的情况下工作正常，但在添加时会中断。

这意味着php代码没问题（返回json数据的搜索页面）。

我从 jQueryUI 站点获取了这段代码：

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
                _renderMenu: function( ul, items ) {
                    var self = this,
                    currentCategory = "";
                $.each( items, function( index, item ) {
                if ( item.category != currentCategory ) {
                    ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                    currentCategory = item.category;
            }
            self._renderItem( ul, item );
        }); 
```

然后我将它与它的搜索端结合起来（更改为类别）：

```
$(function() {
        $( "#search" ).catcomplete({
            delay:0,
            source: "query/encode-json.php?term="+ $("#search").val(),
            select: function(event, ui){
                alert(ui.item.label);
            }
        });     
    }); 
```

但它不起作用:(我搜索了很多，但其他人都在它的 json 方面遇到问题。这是我的 json 数据：

```
[{"value":"some dude","id":"1","category":"artist"},{"value":"some other dude","id":"2","category":"artist"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T01:50:18.743

我很确定您的问题是`source`您传递给自动完成的选项对象的属性：

```
$("#search").catcomplete({
    delay:0,
    source: "query/encode-json.php?term="+ $("#search").val(),
    select: function(event, ui){
        alert(ui.item.label);
    }
}); 
```

`source`将在您实例化小部件时评估*一次。*换句话说，`$("#search").val()`不会在每次用户键入时执行。

由于默认情况下自动完成`term`在查询字符串中发送，你应该能够做到：

```
$("#search").catcomplete({
    delay:0,
    source: "query/encode-json.php",
    select: function(event, ui){
        alert(ui.item.label);
    }
}); 
```

我很确定其他一切都是正确的，因为使用您的数组作为具有类别的本地数据源可以正常工作：http: [//jsfiddle.net/jadPP/](http://jsfiddle.net/jadPP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:52:37.993

用这个：

[http://www.jensbits.com/2010/03/29/jquery-ui-autocomplete-widget-with-php-and-mysql/](http://www.jensbits.com/2010/03/29/jquery-ui-autocomplete-widget-with-php-and-mysql/)

*（更新）*

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:10:22.543

默认`_renderItem()`方法查找`item.label`，但您的 json 数据包含`item.value`. 您需要将您的 encode-json.php 脚本更改为使用`label`而不是`value`，否则您必须使用`source:`您提供自己的回调函数的版本。

# testing - 使用 maven 构建工具在单个浏览器中运行多个测试用例（TestNG 用例）？

> ID：11706893
> 
> 赞同：0
> 
> 时间：2012-07-29T05:20:39.703
> 
> 标签：testing, maven, automation, testng

我是测试新手，我被告知自动化注册页面。我需要在单独的测试用例中验证每个字段。如果我正在验证名字，则所有其他字段都必须具有有效值，并且继续进行其他字段验证。我有近 10 个测试用例（10 个 @Test 方法），每个测试用例都在新浏览器中打开，将结果显示为演示自动化非常奇怪。有什么方法可以让我在一个浏览器中运行所有测试用例。任何例子都会有很大帮助..在此先感谢。- 开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:45:33.160

问题是：您在哪里打开浏览器？我假设在 @BeforeMethod ？最好的解决方案是将设置（硒？）放入 @BeforeSuite 方法中，该方法可以在所有测试类的基类中定义。

# php - 如何检测到时间已经过了午夜？

> ID：11706894
> 
> 赞同：1
> 
> 时间：2012-07-29T05:21:01.283
> 
> 标签：php, time

我用挪威语编写了一个基于文本的黑手党游戏，需要时间检测方面的帮助。所以这是交易。如果玩家购买产品后的时间已超过午夜（24 小时制），则可以删除 mysql 记录。这是我尝试过的，但不确定这是最好的方法：

```
// Har livvakt? (Has bodyguard)
if($this->isTheftProtected($user_id)){
  $sql = mysql_query("SELECT * FROM `UserTing` WHERE t_meta = '2' AND t_owner = '".$user_id."'");
  $rows = mysql_fetch_array($sql);

  $timeThen = date("Hi", $rows["t_time"]);
  $theNow = date("Hi");

  if($timeThen > 0000){
    // Slett produktet <- Delete here... past midnight.
  } else {
    // Behold.
  }
} else {
  return;
} 
```

那么，有没有更好的方法。应该考虑使用 time() 吗？我的问题是如何做到这一点。问候。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:31:50.057

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

`mysql> SELECT TIMESTAMPDIFF(MINUTE,'2003-02-01','2003-05-01 12:05:55');`

返回 128885

所以逻辑上；

`SELECT * FROM UserTing WHERE TIMESTAMPDIFF(SECOND, NOW(), t_time) >= (60 * 60 * 24) AND t_owner = {$user_id}`

为 t_owner 显示比当前时间早 24 小时的值。

编辑 3：确保您始终使用 MySQL 与 MySQL 或 PHP 的时间比较。但不是两者都有，因为两者之间存在允许的时间差异。（它们有时可以关闭多达一个小时而没有错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:55:47.053

您可能需要添加 cronjob 或只运行此查询才能`SELECT`删除旧记录。

```
DELETE FROM `t1` WHERE DATE(`created`) < CURDATE(); 
```

也可以使用JOINS...

# java - 从 URL 异步获取数据

> ID：11706895
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:21:15.797
> 
> 标签：java, android, url, view

嗨，我正在编写一个 android 应用程序以从 url 获取信息并将其显示在 ListView 中。一切都运作良好。但是显示视图需要很长时间，因为我从`onCreate()`方法上的 url 读取文件。

1.  我想从 URL 异步读取，所以视图响应时间不会受到损害。
2.  我正确使用 ProgressBar 吗？

    ```
    public class cseWatch extends Activity  {
        TextView txt1 ;
        Button btnBack;
        ListView listView1;
        /** Called when the activity is first created. */
        @Override

        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.searchresult);

            Button btnBack=(Button) findViewById(R.id.btn_bck);
            btnBack.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent MyIntent1 = new Intent(v.getContext(),cseWatchMain.class);
                    startActivity(MyIntent1);
                }
            });

            ArrayList<SearchResults> searchResults = GetSearchResults();

            //after loaded result hide progress bar
            ProgressBar pb = (ProgressBar) findViewById(R.id.progressBar1);
            pb.setVisibility(View.INVISIBLE);

            final ListView lv = (ListView) findViewById(R.id.listView1);
            lv.setAdapter(new MyCustomBaseAdapter(cseWatch.this, searchResults));

            lv.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                    Object o = lv.getItemAtPosition(position);
                    SearchResults fullObject = (SearchResults)o;
                    Toast.makeText(cseWatch.this, "You have chosen: " + " " + fullObject.getName(), Toast.LENGTH_LONG).show();
                }
            });

        }//end of onCreate

    private ArrayList<SearchResults> GetSearchResults(){
        ArrayList<SearchResults> results = new ArrayList<SearchResults>();

        SearchResults sr;
        InputStream in;
        try{
            txt1 = (TextView) findViewById(R.id.txtDisplay);
            txt1.setText("Sending request...");
            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet("http://www.myurl?reportType=CSV");
            HttpResponse response = httpclient.execute(httpget);
            in = response.getEntity().getContent();

            txt1.setText("parsing CSV...");

            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
                try {
                    String line;
                    reader.readLine(); //IGNORE FIRST LINE

                    while ((line = reader.readLine()) != null) {
                         String[] RowData = line.split(",");
                         sr = new SearchResults();

                         String precent = String.format("%.2g%n",Double.parseDouble(RowData[12])).trim();

                         double chng=Double.parseDouble(RowData[11]);
                         String c;
                         if(chng > 0){
                             sr.setLine2Color(Color.GREEN);
                             c="▲";
                         }else if(chng < 0){
                             sr.setLine2Color(Color.rgb(255, 0, 14));
                             c="▼";
                         }else{
                             sr.setLine2Color(Color.rgb(2, 159, 223));
                             c="-";
                         }

                         sr.setName(c+RowData[2]+"-"+RowData[1]);

                         DecimalFormat fmt = new DecimalFormat("###,###,###,###.##");
                         String price = fmt.format(Double.parseDouble(RowData[6])).trim();
                         String tradevol = fmt.format(Double.parseDouble(RowData[8])).trim();

                         sr.setLine1("PRICE: Rs."+price+" TRADE VOL:"+tradevol);
                         sr.setLine2("CHANGE:"+c+RowData[11]+" ("+precent+"%)");
                         results.add(sr);
                         txt1.setText("Loaded...");
                        // do something with "data" and "value"
                    }
                }
                catch (IOException ex) {
                    Log.i("Error:IO",ex.getMessage());
                }
                finally {
                    try {
                        in.close();
                    }
                    catch (IOException e) {
                        Log.i("Error:Close",e.getMessage());
                    }
                }
        }catch(Exception e){
            Log.i("Error:",e.getMessage());
            new AlertDialog.Builder(cseWatch.this).setTitle("Watch out!").setMessage(e.getMessage()).setNeutralButton("Close", null).show();  
        }

        return results;
       }

    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:43:05.083

应该使用 AsyncTask 将繁重的工作从 UI 线程中移开。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T05:39:45.873

我认为您应该使用可运行的。演示代码：

```
final ListView lv = (ListView) findViewById(R.id.listView1);
Handler handler = new Handler(app.getMainLooper());
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        lv.setAdapter(new MyCustomBaseAdapter(cseWatch.this, searchResults));
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                Object o = lv.getItemAtPosition(position);
                SearchResults fullObject = (SearchResults)o;
                Toast.makeText(cseWatch.this, "You have chosen: " + " " + fullObject.getName(), Toast.LENGTH_LONG).show();
            }
        });
    }
    }, 1000); 
```

试试看。^-^

# mysql - Radipanel SQL 查询错误的违规行为

> ID：11706897
> 
> 赞同：0
> 
> 时间：2012-07-29T05:21:36.387
> 
> 标签：mysql

这就是我投入的！

ALTER TABLE `users`ADD `totalInfractions`INT(1) NOT NULL DEFAULT '0', ADD `totalWarnings`INT(1) NOT NULL DEFAULT '0', ADD `banned`INT(1) NOT NULL DEFAULT '0'; INSERT INTO `menu`(id, text, url, resource, usergroup, protected, weight) VALUES (NULL, 'Add infraction', 'infraction.add', '_res/infraction/add.php', '5', '0', '0'); INSERT INTO `menu`(id, text, url, resource, usergroup, protected, weight) VALUES (NULL, 'Remove infraction', 'infraction.remove', '_res/infraction/remove.php', '5', '0', '0'); INSERT INTO `menu`(id, text, url, resource, usergroup, protected, weight) VALUES (NULL, 'View infraction log', 'infraction.viewLog', '_res/infraction/view.php', '5', ' 0', '0'); 插入`menu`(id, text, url, resource, usergroup, protected, weight) VALUES (NULL, 'Clear infraction log', 'infraction.clearLog', '_res/infraction/clear_log.php', '5', '0', ' 0'); INSERT INTO `menu`(id, text, url, resource, usergroup, protected, weight) VALUES (NULL, '查看我的违规日志', 'user.viewMyLog', '_res/infraction/view_mine.php', '1', '0 ', '0'); CREATE TABLE `infraction_log`( `id`INT( 255 ) NOT NULL AUTO_INCREMENT PRIMARY KEY, `username`VARCHAR( 255 ) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL, `reason`VARCHAR( 255 ) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL, `type`VARCHAR( 100 ) CHARACTER SET latin1,NULL COLLATE latin1_general_ci NOT`addrem``issuedby`VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_general_ci NOT NULL, `timestamp`TIMESTAMP(255) ON UPDATE CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP) ENGINE = MYISAM;

* * *

这是错误

ALTER TABLE `users`ADD `totalInfractions`INT(1) NOT NULL DEFAULT '0', ADD `totalWarnings`INT(1) NOT NULL DEFAULT '0', ADD `banned`INT(1) NOT NULL DEFAULT '0';

MySQL 说：

# 1060 - 重复的列名“totalInfractions”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:39:53.320

错误信息很清楚：

> 重复的列名“totalInfractions”

您正在尝试使用另一列已有的名称向表中添加一列。

# wpf - 从 WPF 中的 ViewModel 绑定嵌套列表视图

> ID：11706902
> 
> 赞同：0
> 
> 时间：2012-07-29T05:22:53.417
> 
> 标签：wpf

我是WPF的初学者。我正在尝试从 ViewModel 绑定嵌套列表视图。

我分别有两个 listview 父母和孩子。在我的父列表视图数据模板中想要绑定子列表视图

就像asp.net中的嵌套gridview。那里的任何人都可以帮我解决这个问题。

数据显示如：

学生 ID 姓名

S101 阿扎德

数学 3

C# 3

这里 StudentID,Name parent listview content 和 subject 是由 StudentID 过滤的子 listview 内容。

谢谢，

阿兹@d

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T07:20:49.513

```
 <Grid>
    <ListView ItemsSource="{Binding Students}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="2"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding Name}" Grid.Column="0"/>
                    <TextBlock Text="{Binding RollNo}" Grid.Column="2"/>
                    <ListView ItemsSource="{Binding SubjectAndMarks}" Grid.Row="2" Grid.ColumnSpan="2" Grid.Column="0" BorderThickness="0">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="5"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding Subject}" Grid.Column="0"/>
                                    <TextBlock Text="{Binding Marks}" Grid.Column="2"/>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid>

    public class SubjectAndMarks 
{
    public string Subject { get; set; }
    public double Marks { get; set; }
}
public class Student 
{
    public string Name { get; set; }
    public int RollNo { get; set; }
    public ObservableCollection<SubjectAndMarks> SubjectAndMarks { get; set; }
}
public class ViewModel //ViewModel
{
     public ObservableCollection<Student> Students { get; set; }
    public ViewModel()
    {
        Students = new ObservableCollection<Student>();
        Students.Add(new Student()
        {
            Name = "Harish",
            RollNo = 1,
            SubjectAndMarks = new ObservableCollection<SubjectAndMarks>()
        {new SubjectAndMarks(){Subject="Maths",Marks=100},new SubjectAndMarks(){Subject="Hindi",Marks=100},
        new SubjectAndMarks(){Subject="Science",Marks=100}}
        });
        Students.Add(new Student()
        {
            Name = "Pankaj",
            RollNo = 2,
            SubjectAndMarks = new ObservableCollection<SubjectAndMarks>()
        {new SubjectAndMarks(){Subject="Maths",Marks=100},new SubjectAndMarks(){Subject="Hindi",Marks=40},
        new SubjectAndMarks(){Subject="Science",Marks=30}}
        });
        Students.Add(new Student()
        {
            Name = "Deepak",
            RollNo = 3,
            SubjectAndMarks = new ObservableCollection<SubjectAndMarks>()
        {new SubjectAndMarks(){Subject="Maths",Marks=90},new SubjectAndMarks(){Subject="Hindi",Marks=50},
        new SubjectAndMarks(){Subject="Science",Marks=60}}
        });
    } 
}
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();   
    } 
```

我希望这会有所帮助。

# php - PHP HTML 邮件无法正常工作

> ID：11706910
> 
> 赞同：0
> 
> 时间：2012-07-29T05:24:41.330
> 
> 标签：php, html, gmail, sendmail

我创建了重置密码页面，用于输入他的电子邮件，PHP 将重置密钥发回给他。邮件有效，但它在我的 gmail 帐户中以纯文本形式显示。我希望它以 HTML 格式显示。

```
$subject = "Your password reset for {$config['site_name']}";

$message = "<html><body>";

$message .= "<p>Someone on" . $config['site_domain'] . "tried to reset your password.</p>";
$message .= "<p>Please click below link, if you want to reset your password.</p>";

$message .= "<p><a href='" . $config['site_url'] . "/forgot_password.php?key=" . $key . "'>" . $config['site_url'] . "/forgot_password.php?key=" . $key . "</a></p>";

$message .= "<p>Thank you,<br>The Admin - " . $config['site_url'] . " </p>";

$message .= "</body></html>";

// Create email headers             
// To send HTML mail, the Content-type header must be set
$headers  = "MIME-Version: 1.0 \r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1 \r\n";

// Additional headers
//$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= "From: " . $config['site_name'] . " <noreply@" . $config['site_domain'] . "> \r\n";
$headers .= "X-Sender: <noreply@" . $config['site_domain'] . "> \r\n";
$headers .= "Reply-To: <noreply@" . $config['site_domain'] . "> \r\n";

mail($input['email'],$subject,$message,$headers);

//update pw_reset field into DATABASE
$stmt = $mysqli->prepare("UPDATE members SET pw_reset = ? WHERE email = ?");
$stmt->bind_param("ss", $key, $input['email']);
$stmt->execute();
$stmt->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:54:06.430

你应该像这样构造你的标题：

```
$headers = 'From: You <you@example.com>' . "\n"; 
$headers .= 'MIME-Version: 1.0' . "\n"; 
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

请注意，From 在 MIME 和 Content 之前，只有 Content 以“\r\n”结尾，其他只是“\n”。

[**来源**](http://php.net/manual/en/function.mail.php)（saganwebdesign）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:16:19.173

试试这个功能。成功返回真

```
function sendMail($email, $subject, $message)
{
    $supportEmail = 'support@abc.com';
    $from = 'Test Application';
    $msg  = $message;
    $from = str_replace(' ', '-', $from);
    $frm  = $from.' <'.$supportEmail.'>';
    preg_match("<(.*)@(.*\..*)>", $frm, $match);

    ///////////////////Headers/////////////////
    $hdr='';
    $hdr.='MIME-Version: 1.0'."\n";
    $hdr.='content-type: text/html; charset=iso-8859-1'."\n";
    $hdr.="From: {$frm}\n";
    $hdr.="Reply-To: {$frm}\n";
    $hdr.="Message-ID: <".time()."@{$match[2]}>\n";
    $hdr.='X-Mailer: PHP v'.phpversion();
    $x=@mail($email, $subject, $msg, $hdr);
    if($x==0)
    {
        $email=str_replace('@','\@', $email);
        $hdr=str_replace('@','\@',$hdr);
        $x=@mail($email, $subject, $msg, $hdr);
    }
    return $x;
} 
```

# php - 如何在 Mongodb 中按子数组 id 排序？

> ID：11706914
> 
> 赞同：1
> 
> 时间：2012-07-29T05:25:27.720
> 
> 标签：php, mongodb, sorting

我想知道如何在 Mongodb 中对子数组进行排序。

我有以下

```
$cursor = $collection->find(array("_id"=>new MongoId($this->data['cid'])));
            $cursor->sort(array("replied"=>array("replyid"=>1)));
                if ($cursor->count() > 0)
                {
                    $test = array();
                    // iterate through the results
                    while( $cursor->hasNext() ) {   
                    $test[] = ($cursor->getNext());
                    }
                    return $test;
                } 
```

但是我尝试过但`$cursor->sort(array("replied"=>array("replyid"=>0)));`没有`$cursor->sort(array("replied"=>array("replyid"=>1)));`成功

我想知道是否需要在 foreach 语句中执行此操作

```
<?php
            if($customersupport[0]['replies'] != NULL)
            {
            foreach($customersupport[0]['replies'] as $customer_reply)
            {
            ?>
            <div style="border-bottom:thin solid #666;">
                <span style="color:#666;float:left; width:40%;">
                <?php if($customer_reply['whoreplied'] == "user"){
                    $usertwo = $fetch->namesearch($customer_reply['uid']);
                }else{
                    $usertwo = $fetch->adminnamesearch($customer_reply['uid']);
                }
                    print $usertwo[0]['personalinfo']['firstname']." ".$usertwo[0]['personalinfo']['lastname'];
                ?></span><span style="float:right; width:40%; text-align:right;font-size:12px;"><?=$customer_reply['replydate'];?></span>
                <br>
                <?=$customer_reply['msg'];?>
            </div>
            <?php 
            }
            }
            ?> 
```

这是我们的 mongodb 示例

```
{
   "_id": ObjectId("5XXXXXXXX000000"),
   "issue": "test",
   "replies": {
     "0": {
       "replyid"▼: ObjectId("5014cXXXXXXXXXX0000"),
       "replydate": "29\/07\/2012CDT00: 18: 50",
       "whoreplied": "user",
       "uid": ObjectId("4fXXXXXXXXXXXXX00"),
       "msg": "test" 
    } 
  },
   "status": "Issued",
   "subject": "test",
   "uid": ObjectId("4XXXXXXXX000000") 
} 
```

# java - 如何使用 java.net.URLConnection 设置会话属性？

> ID：11706918
> 
> 赞同：0
> 
> 时间：2012-07-29T05:26:04.020
> 
> 标签：java, session, urlconnection, setattribute

**你如何设置会话属性`java.net.URLConnection`或其子类？**

换句话说， in 的等价物是`HttpSession.setAttribute(String, Object)`什么`Java.net.URLConnection`？`URLConnection`确实有`setRequestProperty(String, String)`，但它对我没有帮助，因为我需要与`session.setAttribute(String, Object)`设置时间戳类似的功能。

**换句话说，你如何用 URLConnection 来表达下面的调用？**
`HttpSession.setAttribute("timestamp", timestamp);`

我无法更改与第三方的合同，即我的请求必须具有带`java.util.Date`值的时间戳属性。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:51:11.073

你不能。会话私下保存在服务器端，不能从客户端获得。它根本不是 HTTP 协议的一部分，而只是几乎所有服务器端 webapp API 都提供的东西，它允许将状态与应用程序的一个特定用户保持关联。

基本上，您要问的是“我可以在我的电子邮件中放入什么来将一些文本存储`C:\session.txt`在收件人硬盘驱动器上的文件中？”：

*   可能没有`C:\session.txt`文件
*   您无法通过在电子邮件中写入内容来访问收件人的硬盘。这将构成一个很大的安全问题

# eclipse - Eclipse CDT：在先输入之前不要打印到屏幕上

> ID：11706919
> 
> 赞同：2
> 
> 时间：2012-07-29T05:26:25.137
> 
> 标签：eclipse, mingw, eclipse-cdt

这是我的简单代码：

```
 #include <stdio.h>

    int main(){
        printf("Hello new world\n");
        char c[10];
        scanf("%s",c);
        printf("%s",c);
        return 0;
    } 
```

正常，我们会看到：`Hello new world`，然后，我们输入一些字符串，C 会为我们打印这个字符串。

但是在我的 Eclipse CDT 中，运行时，控制台是空的。我必须先输入一个字符串，例如`stackoverflow`. 之后，我的程序将打印：

```
Hello new world
stackoverflow 
```

我不知道为什么会发生，请教我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:34:14.170

Eclipse 的开发人员不会将其视为错误。

您可以在此处阅读有关此“错误”的更多信息： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=173732](https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732)

无论如何......丑陋但可行的解决方案是放

```
fflush(stdout); 
```

在每个 printf() 和 puts() 之后。

# algorithm - “Programming Pearls”：从序列中采样 m 个元素

> ID：11706920
> 
> 赞同：3
> 
> 时间：2012-07-29T05:26:25.550
> 
> 标签：algorithm, sampling

来自*编程珍珠*：[第 12 列：示例问题](http://books.google.com/books?id=kse_7qbWbjsC&lpg=PA132&ots=DgvTzPwR8x&dq=programing%20pearls%20column%2012&pg=PA125#v=onepage&q&f=false)：

> 输入由两个整数*m*和*n*组成，其中*m* < *n*。*输出是0..n-1范围内的**m*个随机整数的排序列表，其中没有任何整数出现超过一次。对于概率爱好者，我们需要一个无替换的排序选择，其中每个选择以相等的概率发生。

 *作者提供了一种解决方案：

```
initialize set S to empty
size = 0
while size < m do
    t = bigrand() % n
    if t is not in S
        insert t into S
        size++
print the elements of S in sorted order 
```

在上面的伪代码中，`bigrand()`是一个函数返回一个大的随机整数（远大于*m*和*n*）。

谁能帮我证明上述算法的正确性？

根据我的理解，每个输出的概率应该是 1/C( *n* , *m* )。如何证明上述算法可以保证输出概率为 1/C( *n* , *m* )？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T08:44:13.193

该算法产生的每个解决方案都是有效的。

有多少解决方案？直到最后一行（排序）是`n*(n-1)*(n-2)*..*(n-m)`不同的排列或
`n!/(n-m)!`每个结果具有相同的概率

排序时，可能的解决方案数量会减少 m!。

所以可能的输出数量是`n!/((n-m)!*m!)`，这就是你所要求的。

`n!/((n-m)!m!) = C(n,m)`*

# php - 从 PHP 将 textarea 元素插入 MySQL

> ID：11706924
> 
> 赞同：3
> 
> 时间：2012-07-29T05:27:08.930
> 
> 标签：php, mysql, arrays, textarea

我需要从 HTML 表单中的 textarea 中获取所有元素，然后使用 PHP 将它们插入 MySQL 数据库。我设法将它们放入一个数组中，并且还找到了数组中元素的数量。但是，当我尝试在 while 循环中执行它时，它会在页面中继续显示单词“执行”（循环内）超过 1000 次。

我不知道会是什么问题，因为 while 循环是此实例唯一适用的循环

```
$sent = $_REQUEST['EmpEmergencyNumbers'];
$data_array = explode("\n", $sent);
print_r($data_array);
$array_length = count($data_array);
echo $array_length;
while(count($data_array)){
echo "execution    ";  // This would be replaced by the SQL insert statement
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:30:15.570

```
you should use 
foreach($data_array as $array)
{
   //sql
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:38:22.587

当您在 php 中访问提交的数据时，它将在 $_GET 或 $_POST 数组中可用，具体取决于您提交它的方法（GET/POST）。避免使用 $_REQUEST 数组。而是使用 $_GET / $_POST （取决于使用的方法）。

要遍历数组中的每个元素，可以使用 foreach 循环。

例子：

```
//...
foreach($data_array as $d)
{
  // now $d will contain the array element
  echo $d; // use $d to insert it into the db or do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T05:31:44.727

对数组使用 foreach 或减少计数，如果计数大于 0，则您的 while 循环是无限循环

# javascript - gmaps4rails：如何从控制器中检索 json 值？

> ID：11706925
> 
> 赞同：0
> 
> 时间：2012-07-29T05:27:09.683
> 
> 标签：javascript, ruby-on-rails-3, json, google-maps, gmaps4rails

我有一个`shop`模型。`shop`当我单击地图上商店的标记时，我想输出一个简单的警报框，该框使用 javascript 显示名称。

这是我的代码：

```
# controller
@json = Shop.all.to_gmaps4rails do |shop, marker|
  marker.json({ id: shop.id, name: shop.name })
end

# view
<%= gmaps("map_options" => { auto_zoom: false, zoom: 2, class: "homepage-map" },
      "markers" => { data: @json,
                     options: { do_clustering: true,
                                clusterer_maxZoom: 11,
                                raw: "{ animation: google.maps.Animation.DROP }" }
                    })
%>

<% content_for :scripts do %>
<script type="text/javascript" charset="utf-8">
Gmaps.map.callback = function() {
  for (var i = 0; i <  this.markers.length; ++i) {
    google.maps.event.addListener(Gmaps.map.markers[i].serviceObject, 'click', function() {
      alert(put something here);
    });
  }
};
</script>
<% end %> 
```

这是我第一次处理 json，所以我阅读了一些关于 json 和[json in javascript 的](http://www.json.org/js.html)介绍性文章。我想知道这是如何使用 gmaps4rails 完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:24:51.893

这应该可以解决问题：

```
<script type="text/javascript" charset="utf-8">
function handleMarkerClickClosure(marker) {
  return function() {
    alert(marker.name);
  }
}

Gmaps.map.callback = function() {
  for (var i = 0; i <  this.markers.length; ++i) {
    google.maps.event.addListener(Gmaps.map.markers[i].serviceObject, 'click', handleMarkerClickClosure(Gmaps.map.markers[i]) );
  }
};
</script> 
```

# sorting - 如何提取列然后求和并排序？

> ID：11706926
> 
> 赞同：-4
> 
> 时间：2012-07-29T05:27:19.433
> 
> 标签：sorting, sed, awk, cut

我在提取列时遇到问题，因为并非每一列都有一行。

看图： http:
[//www.dodaj.rs/f/1F/Fw/1dAklQ4M/snap008.jpg](http://www.dodaj.rs/f/1F/Fw/1dAklQ4M/snap008.jpg)

现在我想列出列，例如：

```
 "Label"   #2     #6    #sum of #2 and #6 
```

我想按最后一列排序，它是#2 和#6 的#sum

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T09:13:22.407

如果您的输入具有“标准”awk/sort 字段分隔符，则一般答案可能类似于。

```
awk '{print $0, $2+$3}' | sort -n -k3 
```

根据您的输入，您可能需要修改输入或命令管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:20:26.723

假设： 1\. 从 #1 开始的数字始终存在。2\. 前面的栏目中没有列出数字。3\. 第一个和第二个字段永远不会为空。

您可以查找第一个数字并从那里开始：

```
awk '{

# Look for the first digit
for( I=1 ; I<=NF ; I++ ) { if ( $I ~ /^[[:digit:]]+$/ ) { break } }

# Print the necessary fields
print $2, $(I+1), $(I+5), $(I)+$(I+5)

}' my_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:24:48.810

如果您知道有效输入的列数，请尝试此方法：

```
 awk 'NF > 5 {print $0, $2+$3 }' | sort -k3 -n 
```

这只会处理至少有 5 列的行。或者，如果有一个范围，你可以像

```
 awk 'NF > 5 && NF < 9 { ... }'  | sort ... 
```

`NF`是一个预定义的 AWK 变量，表示当前行上的字段数（即用于您的目的的数据列）。上面的示例过滤掉了不满足条件的行（因此您可以将它们视为 if 语句的简短版本）

由于没有可用的测试数据，您必须根据自己的需要进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T08:58:59.687

使用 Gawk，您可以使用固定宽度的列来读取数据：

```
gawk -v FIELDWIDTHS="9 13 16 9 11 11 7 6 6 6 6 10 6 6 6 10 10" '{
  print $2, $9, $13, $9 + $13
}' 
```

请注意，仅从屏幕截图中猜测了列宽。宽度需要调整。

您也可以合并要忽略的列的列宽。

见[https://www.gnu.org/software/gawk/manual/gawk.html#Constant-Size](https://www.gnu.org/software/gawk/manual/gawk.html#Constant-Size)

# php - PHP：正确的模式是什么？(preg_match)

> ID：11706928
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:27:56.470
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式，获取两个字符之间的字符串值](https://stackoverflow.com/questions/2034687/regex-get-string-value-between-two-characters)

myemail@gmail.com

获取“@”和“。”之间的模式是什么？在这个字符串中？在这种情况下，它将获得“gmail”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T05:30:01.067

我相信这是...

```
preg_match("'@(.*?)\.'si", $source, $match); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T05:30:10.203

```
$email = 'myemail@gmail.com';
$gmail = preg_match('/@([^\.]*)\./', $email, $m) ? $m[1] : false; 
```

# java - 如何在groovy中解析xml文件并将其放入pojo中？

> ID：11706930
> 
> 赞同：0
> 
> 时间：2012-07-29T05:28:39.277
> 
> 标签：java, xml, parsing, groovy

有人告诉我 groovy xml 解析器更好更简单，我的问题是如何在 java 中使用 groovy 来解析 xml 文件并将其放入 pojo 对象中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:55:47.587

Groovy 编译器有一个称为“联合编译”的功能。用于用另一个 java 项目编译 groovy 项目。它在他们的网站中定义为

`Joint compilation means that the Groovy compilation will parse the Groovy source files, create stubs for all of them, invoke the Java compiler to compile the stubs along with Java sources, and then continue compilation in the normal Groovy compiler way. This allows mixing of Java and Groovy files without constraint.`

但问题是随着项目代码库的增加，它会导致静态引用出现一些问题。如果您使用 Maven 编译代码或使用 Ant 脚本，那么生活会变得更轻松。

参考链接： http: [//groovy.codehaus.org/The+groovyc+Ant+Task](http://groovy.codehaus.org/The+groovyc+Ant+Task)

您还可以查看此链接[http://today.java.net/pub/a/today/2004/08/12/groovyxml.html](http://today.java.net/pub/a/today/2004/08/12/groovyxml.html)，其中用户尝试了很多选项，包括 Groovy。

# php - Backbone UI 和 CMS 后端：涉足 Restful CRUD

> ID：11706931
> 
> 赞同：2
> 
> 时间：2012-07-29T05:29:10.050
> 
> 标签：php, rest, backbone.js, crud, restful-architecture

**我读过的**骨干教程实现了某种类型的迷你框架（即 Slim），它具有在服务器数据库上执行 CRUD 的 RESTful 架构，**[如下所示](https://github.com/ccoenraets/backbone-cellar/blob/master/tutorial/api/index.php)。Backbone 文档指出您需要一个 RESTful api，我相信这是由于 Backbone Route and Sync 功能使模型保持最新，这是我选择使用 Backbone 的一个重要方面。**

 **例如，下面的行将一个虚假的 url（路由）映射到 'addWine' 函数（在 Slim api 中）：

```
$app->post('/wines', 'addWine'); 
```

**假设 1**：如果我有一个（PHP）CMS 后端（而不是迷你框架），我假设我可以简单地用我自己的 CMS 类方法调用替换第二个参数（addWine）并返回一个 json 对象。

**假设 2**但是我不能直接从 html 中的链接调用相同的类方法而不会导致主干丢失状态，因此它能够同步模型数据（并记住浏览器历史记录）。

**假设 3**在这种情况下，我将需要使用 Slim api 并通过 (Slim) RESTful CRUD 调用路由骨干 URL，以便访问我的 CMS 数据库以保持骨干满意。

**如果**这些假设是正确的，那么似乎骨干网正在拦截这些 HTTP 调用——这让我想知道整个 RESTful + 骨干网关系是如何工作的。你能解释一下吗？

如果我的假设不正确，那么我需要的帮助比我想象的要多。你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:43:42.223

我无法与您的三个假设密切相关，但至于您的最后一个问题——Backbone 不会“拦截”HTTP 调用——它会构造它们，就像任何其他 javascript 库会创建 AJAX 请求一样。

Backbone 与您的服务器端语言/框架相对无关。这是 Backbone 在任何时候调用“sync”时所期望的：

Backbone 的同步功能根据调用的方法使用不同的 HTTP 请求类型。这些不同的 HTTP 请求类型是：

*   邮政
*   得到
*   放
*   删除

您的框架需要支持以上所有内容，以支持 Backbone 的“开箱即用”功能。这意味着您必须在应用程序中指定所有上述路由才能使用 Backbone。

需要注意的另一件事是“创建”和“更新”方法不携带特定请求的发布数据——而是发送带有数据的 json 摘要的内容主体，并期望服务器端正确解析 JSON 对象并妥善处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T23:57:12.163

我对所有三个假设都说是，也同意@Andy Baird。

此外，您的项目唯一的问题是如何通知 Backbone 您已经更新了数据库，并且您希望它在前端进行自我更新。我只能看到两个解决方案：

1) 使用 Javascript `setInterval()`- 如果您不需要在数据库更新时立即更新前端，您可以每 1 分钟检查一次更改，Backbone 知道只更新已更改的内容并添加新内容，但这当然不利于服务器，如果你有 1k 活跃的人每分钟重复请求

2) 使用`SocketIO`或类似的服务 - 这样您可以从服务器向 Backbone 发送对您的数据库的整个修改列表或简单的“请刷新，新的东西等待”。检查[这个讨论](https://stackoverflow.com/questions/6398887/using-php-with-socket-io)。**

# c# - C# 修饰符覆盖对此项无效

> ID：11706941
> 
> 赞同：1
> 
> 时间：2012-07-29T05:31:41.390
> 
> 标签：c#

所以编译器不允许我重载我类的 == 和 != 运算符。下面是这个类的样子：

```
public class Item
{
    public string _name;
    public double _weight;
    public decimal _wholesalePrice;
    public int _quantity;

    public Item(string name, double weight, decimal wholesalePrice, int quantity)
    {
        _name = name;
        _weight = weight;
        _wholesalePrice = wholesalePrice;
        _quantity = quantity;
    }

    public static override bool operator ==(Item left, Item right)
    {
        if (left._name == right._name)
        {
            return true;
        }
        return false;
    }

    public static override bool operator !=(Item left,Item right)
    {
        return !(left == right);
    }
} 
```

编译器一直告诉我“修饰符 'override' 对此项目无效。起初我以为我可能没有将基方法声明为虚拟，但我的类没有派生。任何想法发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:34:34.740

**除非**您从父类派生该类，否则您不能声明覆盖。您也不能在静态方法上声明覆盖。您是否尝试过一起删除覆盖？这似乎对我有用......

```
public class Item
{
    public string _name;
    public double _weight;
    public decimal _wholesalePrice;
    public int _quantity;

    public Item(string name, double weight, decimal wholesalePrice, int quantity)
    {
        _name = name;
        _weight = weight;
        _wholesalePrice = wholesalePrice;
        _quantity = quantity;
    }

    public static bool operator ==(Item left, Item right)
    {
        if (left._name == right._name)
        {
            return true;
        }
        return false;
    }

    public static bool operator !=(Item left, Item right)
    {
        return !(left == right);
    }
} 
```

附带说明一下，如果您重写 == 和 != 运算符，那么重写 GetHashCode 和 Equals 方法也是一种好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T05:41:55.317

您正在从没有 == 或 != 运算符的类 Object 派生您的类。因此，您不能覆盖这些运算符。

此外，您不能覆盖静态运算符或方法，只能覆盖实例方法。

最后，请注意覆盖和重载是两个非常不同的东西。重载是您有多个具有相同名称但签名不同的方法定义（例如，不同的参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:09:30.297

简短的回答是语法`public static bool operator ==(Item left, Item right)`没有`override`关键字。

这称为运算符**重载**，而不是覆盖。

您可能会将其`==`视为一种采用两个参数的静态方法（在虚构的“全局”类中）。当编译器看到类似

```
xxx == yyy 
```

它使用*重载决议*来找出`==`使用哪个。这类似于

```
Meth(xxx, yyy) 
```

编译器在哪里考虑重载，如`Meth(Object, Object)`, `Meth(String, String)`，`Meth(Item, Item)`并找出其中哪些（如果有）最适合`xxx`and的编译时类型`yyy`。

当然，这只是一种无稽之谈，但有助于记住为什么要包含`static`而不是`override`在更改`==`运算符时包含。

# plsqldeveloper - 我如何在 pl/sql 查询函数中设置循环，每个循环的结果都放在不同的列中并全部放在一个表中

> ID：11706946
> 
> 赞同：1
> 
> 时间：2012-07-29T05:32:42.657
> 
> 标签：plsqldeveloper

我如何在 pl/sql 查询函数中设置循环，每个循环的结果都放在不同的列中并全部放在一个表中。

功能是：

```
select t1.aaa, coalesce(t2.bbb_count, 0) bbb_count,
    coalesce(t2.ccc_sum, 0) ccc_sum
from (
  select distinct aaa
  from nrb
) t1
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '50%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t2 on t1.aaa = t2.aaa
order by t1.aaa; 
```

这个函数会给我一个有 200 行和 3 列的表。我需要做一个循环

"和 t.ddd 像 '50%'"

line ，从 50 到 55。我的意思是结果将是 200 行和 15 列。

pl/sql 7.0.2 无限用户许可

oci：9.2

oracle 数据库：11.1.0.6.0 企业版

操作系统：赢XP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:49:37.960

```
select t1.aaa, 
       coalesce(t2.bbb_count, 0) bbb_50_count, coalesce(t2.ccc_sum, 0) ccc_50_sum,
       coalesce(t3.bbb_count, 0) bbb_51_count, coalesce(t3.ccc_sum, 0) ccc_51_sum,
       coalesce(t4.bbb_count, 0) bbb_52_count, coalesce(t4.ccc_sum, 0) ccc_52_sum,
       coalesce(t5.bbb_count, 0) bbb_53_count, coalesce(t5.ccc_sum, 0) ccc_53_sum,
       coalesce(t6.bbb_count, 0) bbb_54_count, coalesce(t6.ccc_sum, 0) ccc_54_sum,
       coalesce(t7.bbb_count, 0) bbb_55_count, coalesce(t7.ccc_sum, 0) ccc_55_sum
from (
  select distinct aaa
  from nrb
) t1
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '50%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t2 on t1.aaa = t2.aaa
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '51%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t3 on t1.aaa = t3.aaa
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '52%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t4 on t1.aaa = t4.aaa
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '53%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t5 on t1.aaa = t5.aaa
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '54%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t6 on t1.aaa = t6.aaa
left join (
  select t.aaa, count (t.bbb) bbb_count, sum (t.ccc) ccc_sum
  from nrb t
  where t.vvv IN  ('3','4','5','6','D','E','F')
    and t.ddd like '55%'
    and t.eee >= TO_DATE('2012/03/21','YYYY/MM/DD')
    and t.eee <= TO_DATE('2012/07/21','YYYY/MM/DD')
  group by t.aaa
) t7 on t1.aaa = t7.aaa
order by t1.aaa; 
```

# java - 如何在 JTabbedPane 中制作 CardLayout

> ID：11706948
> 
> 赞同：1
> 
> 时间：2012-07-29T05:32:57.600
> 
> 标签：java, swing, jtabbedpane, cardlayout

我正在做一个项目`JTabbedPane`

当我单击 TAB2 时，它会显示 PANEL 2。完成

PANEL 2 包含一个`JButton`“Next”，它将切换到 PANEL 2.1 和`JButton`“Previous”到

在 TAB 2 中时将其切换回 PANEL 2。

那么，它是 Tab2 内部的卡片布局吗？

感谢您的帮助！

```
-----------------------------
TAB 1  |  TAB 2 |  TAB 3 |  
-----------------------------
                             -
                             -
          PANEL  2           -
                             -
                             -
                             -
                             -
      "Previous" "NEXT"      -
==========================   = 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T05:45:05.830

您只需要在选项卡中插入一个 JPanel 并将其布局设置为 CardLayout。因此，在每个“卡片”中，您将插入一个新的 JPanel。这是一个例子：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Foo extends JFrame {

    public Foo() {

        setTitle( "Tabs and Cards" );
        setSize( 400, 400 );
        setDefaultCloseOperation( EXIT_ON_CLOSE );

        JTabbedPane tabbedPane = new JTabbedPane();

        // needs to be final to be accessed inside the event handlers
        final JPanel tab1 = new JPanel();
        final JPanel tab2 = new JPanel();
        tab2.setLayout( new CardLayout() );

        tabbedPane.addTab( "Tab 1", tab1 );
        tabbedPane.addTab( "Tab 2", tab2 );

        JPanel tab21 = new JPanel();
        tab21.add( new JLabel( "2.1" ) );

        JPanel tab22 = new JPanel();
        tab22.add( new JLabel( "2.2" ) );

        JPanel tab23 = new JPanel();
        tab23.add( new JLabel( "2.3" ) );

        tab2.add( tab21 );
        tab2.add( tab22 );
        tab2.add( tab23 );

        JButton btnToTab22 = new JButton( "Next!" );
        btnToTab22.addActionListener( new ActionListener(){
            @Override
            public void actionPerformed( ActionEvent evt ) {
                // gets the layout, casts it and call next to go to the next card
                ( ( CardLayout ) tab2.getLayout() ).next( tab2 );
            }
        });
        tab21.add( btnToTab22 );

        JButton btnToTab23 = new JButton( "Next!" );
        btnToTab23.addActionListener( new ActionListener(){
            @Override
            public void actionPerformed( ActionEvent evt ) {
                ( ( CardLayout ) tab2.getLayout() ).next( tab2 );
            }
        });
        tab22.add( btnToTab23 );

        add( tabbedPane, BorderLayout.CENTER );

        setVisible( true );

    }

    public static void main( String[] args ) {
        new Foo();
    }

} 
```

我没有评论代码，因为它并不复杂，但我认为你会很容易理解。看看文档。

# c# - 过程需要按 接着说。可以使用 Mono GTK# 吗？

> ID：11706949
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:33:48.857
> 
> 标签：c#, linux, shell, process, gtk#

我正在尝试在 Mono 中使用 GTK# 运行“dh_make”shell 命令。问题是： dh_make 要求进程开始工作，按 键。我不知道是否可以使用 C#。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T05:02:12.933

是的，绝对有可能模拟“输入”到进程的按下作为来自用户的输入。下面的代码可以做到这一点，将 dh_make 作为一个单独的进程启动，将其标准输入定向到创建进程的输出，并将“enter”作为输入发送到 dh_make 进程：

```
System.Diagnostics.Process myProcess = new System.Diagnostics.Process();
myProcess.StartInfo.FileName = "dh_make";
myProcess.StartInfo.Arguments = "(put here any command line arguments you need)";
myProcess.StartInfo.UseShellExecute = false;
myProcess.StartInfo.RedirectStandardInput = true;
myProcess.Start();
System.IO.StreamWriter myStreamWriter = myProcess.StandardInput;

// The following will put an 'Enter' on the first dh_make request for user input
myStreamWriter.WriteLine(" "); 
```

我目前在几段代码中使用它，它工作得很好。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:19:00.450

```
 process.StartInfo.WorkingDirectory = "'/home/"+user+"/pacotes/"+nome_pacote.Text+"-1.0/'";
        process.StartInfo.FileName="dh_make";
        process.StartInfo.Arguments="-n -s";
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardInput = true;
        process.Start();
        System.IO.StreamWriter myStreamWriter = process.StandardInput;
        myStreamWriter.WriteLine(" ");
        process.WaitForExit(); 
```

在调试时出现以下错误： *奇数字符“>”，在元素“文件名”的属性名称“未知”之后需要一个“=”*。你知道可能是什么吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:22:25.123

正如我评论的那样，您需要让管道使用[g_spawn_async_with_pipes](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html)`dh_make`与进程通信。使用 Gtk，您可能需要掌握[主事件循环并使用](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html)[g_child_watch_add](http://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-add-watch)添加儿童观看和使用[g_io_add_watch](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-child-watch-add)观看频道。您可能必须使用两个通道（即管道），一个用于输入，另一个用于输出。`dh_make`

如果您不知道什么是[管道](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)，请考虑阅读一本好的[高级 linux 编程](http://www.advancedlinuxprogramming.com/)或[高级 unix 编程](http://basepath.com/aup/)书籍。Gtk 的主循环正在为您进行多路复用[轮询](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)。

如果您想了解这些低级 Gtk/Glib 函数是如何与 Gtk# 粘合的，请研究[Gtk#](http://www.mono-project.com/GtkSharp)文档并最终查看其源代码（可能使用`grep`的源代码`Gtk#`）。Gtk# 可能有一些与此相关的测试或演示或示例代码。

# asp.net-mvc - 在 MVC Web 应用程序中访问 profile.newproperty

> ID：11706950
> 
> 赞同：2
> 
> 时间：2012-07-29T05:34:14.247
> 
> 标签：asp.net-mvc, web-applications, asp.net-profiles

我最近问了这个问题[How to persist anon user selection (ex: theme selection)](https://stackoverflow.com/questions/11706349/how-to-persist-anon-user-selection-ex-theme-selection)。并开始了解 ASP.NET 配置文件及其在 Web 配置中的属性。我尝试了链接中的答案，但我无法访问 profile.newproperty

[如何分配配置文件值？](https://stackoverflow.com/questions/426609/how-to-assign-profile-values) 此问题指定 Web 应用程序不支持开箱即用的配置文件，并且必须创建基于 ProfileBase 的自定义模型。这个问题在 2009 年得到了回答，我想知道这是否仍然是同样的情况。

在 ASP.NET 4.0 Web 应用程序中，我可以使用我在 web.config 部分中定义的属性访问 profile.newproperty，而无需编写 C# 代码，除非访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:05:17.033

我刚刚看到您的问题，是的，您是对的，我发布的答案与网站有关，因此它不适用于 Web 应用程序或 MVC

在这里，我将向您展示使用匿名和经过身份验证的用户配置文件在 MVC 中使用配置文件的代码

### 输出

**匿名用户 - 尚未设置个人资料**

![在此处输入图像描述](../Images/587e0f41d6d4c1bbed97cf89902dcd79.png)

**匿名用户 - 配置文件集**

![在此处输入图像描述](../Images/f01fcf959bf2ebe1148fdf815fca7174.png)

**经过身份验证的用户 - 配置文件已迁移**

![在此处输入图像描述](../Images/b81cbd66286a3dac5785fdee5d71b8ce.png)

### 网页配置

```
<anonymousIdentification enabled="true"/>
<profile inherits="ProfileInWebApplicationMVC1.UserProfile">
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile> 
```

### 用户配置文件类

```
public class UserProfile : ProfileBase
{
    public static UserProfile GetProfile()
    {
        return HttpContext.Current.Profile as UserProfile;
    }

    [SettingsAllowAnonymous(true)]
    public DateTime? LastVisit
    {
        get { return base["LastVisit"] as DateTime?; }
        set { base["LastVisit"] = value; }
    }

    public static UserProfile GetProfile(string userID)
    {
        return ProfileBase.Create(userID) as UserProfile;
    }
} 
```

### 家庭控制器

```
 public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        var p = UserProfile.GetProfile();

        return View(p.LastVisit);
    }

    [HttpPost]
    public ActionResult SaveProfile()
    {
        var p = UserProfile.GetProfile();

        p.LastVisit = DateTime.Now;
        p.Save();

        return RedirectToAction("Index");
    } 
```

### 索引视图

```
@if (!this.Model.HasValue)
{
    @: No profile detected
}
else
{
    @this.Model.Value.ToString()
}

@using (Html.BeginForm("SaveProfile", "Home"))
{
    <input type="submit" name="name" value="Save profile" />
} 
```

最后，当您是匿名用户时，**您可以拥有自己的个人资料**，但是，一旦您注册到该网站，您需要*迁移*您当前的个人资料以用于您的新帐户。这是因为 ASP.Net 成员资格会在用户登录时创建一个新的配置文件

### Global.asax，迁移配置文件的代码

```
 public void Profile_OnMigrateAnonymous(object sender, ProfileMigrateEventArgs args)
    {
        var anonymousProfile = UserProfile.GetProfile(args.AnonymousID);
        var f = UserProfile.GetProfile(); // current logged in user profile

        if (anonymousProfile.LastVisit.HasValue)
        {
            f.LastVisit = anonymousProfile.LastVisit;
            f.Save();
        }

        ProfileManager.DeleteProfile(args.AnonymousID);
        AnonymousIdentificationModule.ClearAnonymousIdentifier();
        Membership.DeleteUser(args.AnonymousID, true);
    } 
```

# php - 我的联系我们 PHP 表单正在发送 7 封电子邮件并提交

> ID：11706951
> 
> 赞同：2
> 
> 时间：2012-07-29T05:34:16.883
> 
> 标签：php, forms, email, contact

好吧，我的 PHP 联系我们表格发送电子邮件太好了.....

我每次提交都会收到 7 封电子邮件

我的设置是 php.ini 文件邮件功能有效.....显然

我正在使用来自[http://phpfileuploader.com/的脚本](http://phpfileuploader.com/)

连同一个简单的 php 联系表

[http://i48.tinypic.com/2ywsf0w.png](http://i48.tinypic.com/2ywsf0w.png)

所以人们填写表格并上传图片。

问题是我不知道为什么每次提交都会收到 7 封电子邮件。

我正在使用 MySQL、APACHE、PHP 运行 WAMP 最新版本

对于我的邮件服务器，我使用的是 Hmail

有什么想法吗？

代码

```
<?php require "quickcache.php"; ?>
<?php require "ieblock.php"; ?>
<?php require_once "phpuploader/include_phpuploader.php" ?> 
<!--- BEGIN CONTACT FORM --->
<form name="contactform" method="post" action="send_form_email.php">
<table width="450px">
<tr>
<td valign="top">
<label for="first_name">First Name *</label>
</td>
<td valign="top">
<input  type="text" name="first_name" maxlength="50" size="30">
</td>
</tr>
<tr>
<td valign="top"">
<label for="last_name">Last Name *</label>
</td>
<td valign="top">
<input  type="text" name="last_name" maxlength="50" size="30">
</td>
</tr>
<tr>
<td valign="top">
<label for="email">Email Address *</label>
</td>
<td valign="top">
<input  type="text" name="email" maxlength="80" size="30">
</td>
</tr>
<tr>
<td valign="top">
<label for="telephone">Telephone Number</label>
</td>
<td valign="top">
<input  type="text" name="telephone" maxlength="30" size="30">
</td>
</tr>
<tr>
<td valign="top">
<label for="comments">COMMENTS*</label>
</td>
<td valign="top">
<textarea  name="comments" maxlength="1000" cols="25" rows="9"></textarea>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center">
<br>
Please upload a picture of your computer 
<?php   

            $uploader=new PhpUploader();   
            $uploader->SaveDirectory="savefiles";    
            $uploader->Render();   
        ?></td>
</tr>
</table>

<!--- END CONTACT FORM --->

<!--- BEGIN SEND CONFIRMATION --->
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "MY EMAIL HERE";
$email_subject = "Buy my used computer, PLEASE!";

function died($error) {
// your error code can go here
echo "We are very sorry, but there were error(s) found with the form you submitted.  ";
echo "These errors appear below.<br /><br />";
echo $error."<br /><br />";
echo "Please go back and fix these errors.<br /><br />";
die();
}

// validation expected data exists
if(!isset($_POST['first_name']) ||
!isset($_POST['last_name']) ||
!isset($_POST['email']) ||
!isset($_POST['telephone']) ||
!isset($_POST['comments'])) {
died('We are sorry, but there appears to be a problem with the form you   
submitted.');       
}

$first_name = $_POST['first_name']; // required
$last_name = $_POST['last_name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['telephone']; // not required
$comments = $_POST['comments']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'The First Name you entered does not appear to be valid.<br />';
}
if(!preg_match($string_exp,$last_name)) {
$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
}
if(strlen($comments) < 2) {
$error_message .= 'The Comments you entered do not appear to be valid.<br />';
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
$bad = array("content-type","bcc:","to:","cc:","href");
return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Telephone: ".clean_string($telephone)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!--- END SEND CONFIRMATION ---> 
```

这是 2 个单独的代码页，仅供参考

还有一些想法……

在我的 php.ini 文件中，我有 ---

```
[mail function]
; For Win32 only.
SMTP = 127.0.0.1
smtp_port = 25

; For Win32 only.
sendmail_from = admin@MYDOMAIN.COM 
```

但，

在我的contactform.php 中，我有buymypc@MYDOMAIN.COM 和转发到forwarding@MYDOMAIN.COM 的hmail

出于隐私原因，我没有使用我的实际电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:09:08.350

通过编辑电子邮件 php 脚本解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T06:30:10.877

`die`提交后使用php函数

```
<!--- END SEND CONFIRMATION --->
<?php
die();
?> 
```

# ios - 如何在 IOS 的 Photoshop 中实现复合通道 (RGB) 曲线滤镜？

> ID：11706954
> 
> 赞同：2
> 
> 时间：2012-07-29T05:34:37.283
> 
> 标签：ios, image, image-processing, filter, photoshop

我查看了 esilverberg 的实现[https://github.com/esilverberg/ios-image-filters](https://github.com/esilverberg/ios-image-filters)和 brad Larson 的基于 GPU的实现[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)。在这两种实现中，他们都实现了单独的红、绿、蓝通道曲线过滤器。但是，在 Photoshop 中，除了单独的 R、G、B 通道滤镜之外，还有一个复合 RGB 通道曲线滤镜。我怎样才能实现这个过滤器？

# iphone - iphone cbc 加密返回 null

> ID：11706959
> 
> 赞同：0
> 
> 时间：2012-07-29T05:35:50.667
> 
> 标签：iphone, objective-c, ios, aes, commoncrypto

我在 NSData+AES256 类中有以下代码。我正在尝试使用以下代码对 NSString 进行 AES CBC 加密。我有钥匙和 iv。但结果为空。查不出什么问题。这是我试过的-

```
NSString *initV= @"somekey*********";
NSData *input= [initV dataUsingEncoding:NSUTF8StringEncoding];

size_t numBytesEncrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCModeCBC,
                                      keyPtr, kCCKeySizeAES256,
                                      [input bytes] /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:48:36.130

这是最终对我有用的代码-

```
-(NSData *)AES256EncryptWithKey:(NSString *)key {
NSUInteger dataLength = [self length];
NSData *keyGiven= [key dataUsingEncoding:NSUTF8StringEncoding];    

size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

NSString *initV= @"***************";
NSData *input= [initV dataUsingEncoding:NSUTF8StringEncoding];

size_t numBytesEncrypted = 0;

CCCryptorRef ccRef;
CCCryptorCreate(kCCEncrypt, kCCAlgorithmAES128, 0, (const void *)[keyGiven bytes], kCCKeySizeAES256, (const void *)[input bytes], &ccRef);
CCCryptorStatus cryptStatus = CCCryptorUpdate(ccRef, [self bytes], dataLength, buffer, bufferSize, &numBytesEncrypted);
CCCryptorRelease(ccRef);

if (cryptStatus == kCCSuccess) {
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}
free(buffer); //free the buffer;
return nil;
} 
```

我正在将 NSString 转换为 NSData 并将其传递给加密。NSString 必须为 16 个字符。如果它少于 16 个字符，我会通过附加空格将其设为 16。

我不知道这是否会帮助任何人。但我只是觉得我应该分享。谢谢。

# python - 尝试从 python 中的小部件按钮打开对话框时出错

> ID：11706960
> 
> 赞同：0
> 
> 时间：2012-07-29T05:35:55.730
> 
> 标签：python, popup, widget, tkinter, dialog

我是 python 新手。我正在尝试打开一个对话框以从一个小部件中获取一个值，该小部件已经完成了其他员工的列表。

但是遇到错误，无法弄清楚该怎么做。

这是我的代码：

```
import Tkinter,Tkconstants,tkFileDialog
from Tkinter import *
import csv
import numpy
import math
import numpy.random as nrnd
import matplotlib.pyplot as plt
import shutil
import tkMessageBox
global filesavepath
class App:
    def __init__(self,master):
        self.mymaster=master
        frame=Frame(master)
        frame.pack()
        self.importbutton=Button(frame,text='Import Data',command=self.importdata)
        self.importbutton.pack()
        self.executebutton=Button(frame,text='Execute',command=self.popup)
        self.executebutton.pack()
        self.distribution_rep=Button(frame,text='Repeat Purchase Score Distribution',command=self.distrepbutton)
        self.distribution_rep.pack()
        self.distribution_churn=Button(frame,text='Churn Probability Distribution',command=self.distchurnbutton)
       self.distribution_churn.pack()
       self.exitbutton=Button(frame,text='Exit',command=self.exitapp)
       self.exitbutton.pack()
       self.file_opt=options={}
       options['defaultextension']=''
       options['filetypes']=[('allfiles','.*'),('textfiles','.txt')]
       options['initialdir']='C:\\'
       options['initialfile']='myfile.txt'
       options['parent']=root
       options['title']='Thisisatitle'
    def importdata(self):
        filename=tkFileDialog.askopenfilename(**self.file_opt)
        filesavepath="C:/input_full.csv"
        shutil.copy2(filename,filesavepath)
        if filename:
            return open(filename,'r')

    def popup(self):
        top = self.top = Tkinter.Toplevel(self)
        myLabel = Tkinter.Label(top, text='Enter your username below')
        myLabel.pack()

        self.myEntryBox = Tkinter.Entry(top)
        self.myEntryBox.pack()

        mySubmitButton = Tkinter.Button(top, text='Done', command=self.execbutton)
        mySubmitButton.pack()
    def execbutton(self):
        if self.myEntryBox.get() != "":
            self.timevalue = self.myEntryBox.get()
            self.top.destroy()
        execfile("Repeat Purchase Algo in python v6")
        tkMessageBox.showinfo("Job Done", "Probability Computation completed")       
    def send(self):
        global timevalue
        timevalue=self.myEntryBox.get()
        self.top.destroy()
    def distrepbutton(self):
        plt.hist(prob,bins=10,normed=TRUE)
        plt.xlabel('Probability')
        plt.title('Histogram of Repeat Purchase Probability')
        plt.show()
    def distchurnbutton(self):
        plt.hist(churn_prob,bins=10,normed=TRUE)
        plt.ylabel('Probability')
        plt.title('Histogram of Churn Probability')
        plt.show()
    def exitapp(self):
        self.mymaster.destroy()

root=Tk()
root.title('Repeat Puchase Widget')
app=App(root)
root.mainloop() 
```

因此，您可能很清楚，我正在使用 Import 按钮导入数据集，通过名为 Execute 的按钮在另一个代码中执行一些分析，然后显示一些图表。

我想要的是在单击“执行”按钮时打开一个弹出窗口，该窗口将输入一个值。但我收到以下错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:/Python27/widget_repeat_purchase_v4", line 42, in popup
    top = self.top = Tkinter.Toplevel(self)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 2017, in __init__
    BaseWidget.__init__(self, master, 'toplevel', cnf, {}, extra)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1965, in __init__
    BaseWidget._setup(self, master, cnf)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1943, in _setup
    self.tk = master.tk
AttributeError: App instance has no attribute 'tk' 
```

我不知道该怎么办。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:06:24.603

当您创建顶级小部件时，您将`self`作为第一个参数传递。Tkinter 要求这是一个父小部件。但是，在您的代码`self`中并不代表一个小部件。

在您的特定情况下，您想要传递`self.mymaster`而不是`self`：

```
top = self.top = Tkinter.Toplevel(self.mymaster) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:34:43.747

使用`Tkinter.Toplevel()`代替`Tkinter.Toplevel(self)`

# python - grep、awk、bash 和朋友？有什么工具可以处理这些数据？

> ID：11706962
> 
> 赞同：3
> 
> 时间：2012-07-29T05:36:48.897
> 
> 标签：python, perl, bash, awk

我正在搜索输入以提取有关每条记录的特定信息。可悲的是，每条记录都分布在多行上，例如（简化摘录）

```
01238584 (other info) more info, more info
[age=81][otherinfo][etc, etc] 
```

我唯一真正关心的是标识符和年龄（在示例中为*01238584*和*81*）。为了清楚起见，我可以在输入中可靠地搜索以接近这两行的唯一正则表达式是

```
\[age=[0-9]+\] 
```

...当然我想打印出那个年龄以及上面一行的识别记录号，例如

```
 01238584   81 
```

凭借我所有的系统管理员 shell 经验和良好的 awk 掌握，我还没有想出解决方案。我当然可以`grep -B1`用来获取每组线，但那又如何呢？我总是将 awk 用于这类事情......但相关的数据总是在同一行。*sigh*这绝对超出了我目前的 awk 技能。

谢谢阅读。有任何指示吗？

* * *

***编辑***
我将接受查理的建议并更改 awk 的记录分隔符，这是我以前从未做过的。它不漂亮，但输入也不是。工作完成。

```
egrep -B1 '\[age=[0-9]+\]' inputfile |
awk '
  BEGIN{ RS = "--" }
  { printf "%s  %s\n", $1, gensub(/.*\[age=([0-9]+)\].*/, "\\1", 1) }' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T05:47:48.543

你能显示更多的输入文件吗？例如，如果数据记录由空行分隔，您可以使用 Awk 中的 RS 特殊变量更改记录分隔符，使其将多行视为一条记录。（参见，例如， http: [//www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_19.html](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_19.html)）

在任何情况下，我都会尝试将所有数据记录放在一行或一个逻辑记录中。

如果你不能这样做，但你知道记录 ID 总是在年龄标记之前的行上，那么在 Python 中使用 readlines 很容易做到，它将整个文件读入行列表，就像这样

```
 with open("file.dat") as f:
     lines = f.readlines()
     for ix, line in enumerate(lines):
         if # line has age field
            # get record from lines[ix-1] 
```

或者，当然，您总是可以将上一行保留在 Awk 的内存中

```
 BEGIN { prevline = "" }
       { # process the line
         prevline = $0
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:43:19.940

在这种情况下，Perl 可以轻松地充当您的朋友。您可以将整个文件读入内存以在多行上应用正则表达式。将输入记录分隔符设置为`0777`会导致这种“啜饮”动作。开关只是说读取命令行上提供的`-n`一个或多个文件。开关的`-e`参数构成要执行的代码。

正则表达式的`/s`修饰符允许`.`匹配换行符。`\m`修饰符允许`^`和在`$`嵌入换行符之前和之后立即匹配。这些是解析包含多个逻辑行的字符串的关键。修饰符告诉正`/g`则表达式引擎全局搜索所有匹配项。

```
perl -0777 -ne 'print "$1 $2\n" while m{^(\S+).+?\[age=(\d+)\]}gms' file 
```

给定这样的输入文件：

```
01238584 (other info) more info, more info
[age=81][otherinfo][etc, etc]
98765432 (still other info) still more info, and more info
[age=82][and more otherinfo][etc, etc, ad infinitum] 
```

...上面的脚本输出：

```
01238584 81
98765432 82 
```

我们可以这样剖析正则表达式：

```
perl -MYAPE::Regex::Explain -e 'print YAPE::Regex::Explain->new(qr/m{^(\S+). 
```

+?[age=(\d+)]}gms/)->explain()'

```
The regular expression:

(?-imsx:m{^(\S+).+?\[age=(\d+)\]}gms)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  m{                       'm{'
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    \S+                      non-whitespace (all but \n, \r, \t, \f,
                             and " ") (1 or more times (matching the
                             most amount possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  .+?                      any character except \n (1 or more times
                           (matching the least amount possible))
----------------------------------------------------------------------
  \[                       '['
----------------------------------------------------------------------
  age=                     'age='
----------------------------------------------------------------------
  (                        group and capture to \2:
----------------------------------------------------------------------
    \d+                      digits (0-9) (1 or more times (matching
                             the most amount possible))
----------------------------------------------------------------------
  )                        end of \2
----------------------------------------------------------------------
  \]                       ']'
----------------------------------------------------------------------
  }gms                     '}gms'
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# python - 在 python 中，使用 tkinter，我的随机数只生成一次？

> ID：11706974
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:39:31.267
> 
> 标签：python, tkinter

基本上，我有这个代码：

```
from tkinter import *
from tkinter import messagebox
import random
import string
from tkinter import filedialog

ktwoWin = Tk() #window
qLabel = StringVar()
userAnswer = StringVar()
ktwoWin.withdraw() #hide the ktwoWin window
pass

num1= random.randint(1, 12) #random numbers
num2= random.randint(1, 12)
Answer= num1 * num2

def ktwoOpen():
    ktwoWin.deiconify() #show the ktwoWin window

    ktwoWin.title("Kindergarten to Grade Two")
    ktwoWin.geometry("400x300")
    ktwoWin.grid()

    askbutton= Button(ktwoWin, text="ask me a question!", command = askquestion, height=3, width=16, bg="blue")
    askbutton.grid(column= 0, row= 0)

    submitbtn= Button(ktwoWin, text="Submit Answer", command=checkanswer, height=3, width=12, bg= "red")
    submitbtn.grid(column=1, row=0)

    q=Label(ktwoWin,textvariable=qLabel)
    q.grid(column=1, row=1)
    q.config(text="text to go here")
    qLabel.set("some text")
    answerentry= Entry(ktwoWin, textvariable=userAnswer)
    answerentry.grid(column=3, row=3)
    pass

def askquestion():
    qLabel.set("what is" +str(num1) + "x" + str(num2) + "?")

def checkanswer():
    useranswer=userAnswer.get()
    if int(useranswer) != Answer:
        messagebox.showwarning(message="the answer is " + str(Answer))
    else:
        messagebox.showinfo(message="correct!")

ktwoWin.mainloop 
```

哪个，当我运行程序时，我拥有的随机数只会随机化一次，如果这有意义的话？我的问题，最终，有没有办法让我循环代码的随机数部分？任何帮助表示赞赏，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:05:23.497

每次回答一个问题时设置一个新问题应该很简单。我不是 tkinter 的专家，所以这是相当普遍的建议。

首先，在函数中设置两个随机数`askquestion`，而不是在模块的顶层。由于您以后需要能够访问该产品，因此请使用`global`关键字来确保答案在函数范围之外可用（或者您可以将代码重新组织到一个类中并使用成员变量）。

您可能还需要在`checkanswer`函数末尾添加一些额外的逻辑，以便在提供答案后重置程序的状态（例如，清除旧问题标签并从输入框中删除旧答案）。根据您希望程序如何播放，您可能会立即提出一个新问题，或者您可能会回到最初的开始状态。

# html - HTML 内部的 BuildUrlFromExpression - 从链接中获取 404 错误

> ID：11706977
> 
> 赞同：0
> 
> 时间：2012-07-29T05:39:46.697
> 
> 标签：html, asp.net-mvc

我正在尝试构建一个链接，当用户单击它时将其定向到 MVC 页面。目前我有：

```
HTMLTable.AppendLine("<td class=\"team\"> " + tournament.TournamentRoundMatches[col][effective_match_id].competitorId1 + "<a href=\"<% =Html.BuildUrlFromExpression<CompetitionController>(c => c.Details(83)) %>\">" + "  update" + "</a>" + "</td>"); 
```

但这只会导致 404 错误，并生成以下链接：

```
localhost:52313/Tournament/Details/%3C%%20=Html.BuildUrlFromExpression%3CCompetitionController%3E(c%20=%3E%20c.Details(83))%20%%3E 
```

我的控制器方法如下所示：

```
[Authorize]
    public ActionResult Details(int id)
    {
        var competition = Competition.getCompetitionById(id);

        return View(competition);
    } 
```

有谁看到我可能做错了什么？

# html - 无法弄清楚如何修复 CSS 宽度

> ID：11706979
> 
> 赞同：1
> 
> 时间：2012-07-29T05:39:53.617
> 
> 标签：html, css, formatting

我的网站导航在所有计算机上都能正常呈现，但在移动设备 (iOS) 上被截断/包装。

相关的CSS是：

```
.custom .menu {
margin-top: 1.25em;
margin-left: 288px;
width: 442px;
}

.custom .menu a {
font-size: 1.4em;
font-weight: bold;
text-align: left;
} 
```

相关的 HTML 是：

```
<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-19" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-2 current_page_item menu-item-19"><a href="http://rainleader.com/">Home</a></li>
<li id="menu-item-18" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-18"><a href="http://rainleader.com/about/">About</a></li>
<li id="menu-item-17" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17"><a href="http://rainleader.com/services/">Services</a></li>
<li id="menu-item-16" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-16"><a href="http://rainleader.com/blog/">Blog</a></li>
<li id="menu-item-15" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15"><a href="http://rainleader.com/contact/">Contact</a></li>
</ul></div> 
```

这是它的外观（PC/Mac）：

![截屏](../Images/3fbc631846e851e3a58ca14d463ada40.png)

但在 iOS 上，“联系人”被截断并推到“主页”下方。换句话说，菜单以“Blog”结尾，第二行只有“Contact”。

如果我增加 的值`width`，它会在 PC/Mac 上扩展菜单末尾的底部边框线，而不会解决 iOS 上的问题。

![屏幕截图，宽度增加（PC/Mac）](../Images/5e78b18f8e95792d5afa1c7946e6e856.png)

注意到上面扩展的底部边框线，但它仍然在 iOS 上截断/包装“联系人”。

我究竟做错了什么？或者，我应该如何解决这个问题？

[**演示**](http://rainleader.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T05:53:01.657

列表项不是您可以在移动浏览器上强制使用的东西。也许改为尝试使用图像间隔？您已经在尝试强制 width: 1017px; 与您的 div 容器。

您可以尝试使用overflow-x，但这可能有效，也可能无效。

[**参考**](http://css-tricks.com/the-css-overflow-property/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T15:23:44.180

如果您设置`width: 437px`为`.custom .menu`它不适合在菜单下吗？

另外，尝试`.custom .menu { border: none; }`在`<ul>`

# android - 我得到 FATAL EXCEPTION: table cars 没有名为 year 的列

> ID：11706980
> 
> 赞同：-1
> 
> 时间：2012-07-29T05:40:01.810
> 
> 标签：android, sqlite, error-handling

可以找到为什么我得到这个错误有人可以帮忙吗？

```
package Android.data;

public class CarsDbConstants 
{

public static final String DATABASE_NAME = "cars.db";

public static final int DATABASE_VERSION = 1;
public static final String CARS_TABLE_NAME = "cars";

public static final String CAR_ID = "_id";
public static final String CAR_MANUFACTURER = "manufacturer";
public static final String CAR_YEAR= "year";
public static final String LOG_TAG = "CarsDb";

} 
```

* * *

```
package Android.data;

public class CarsDBHelper extends SQLiteOpenHelper 
{
 public CarsDBHelper(Context context, String name, CursorFactory factory,
        int version)
{
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) 
{
    Log.d(LOG_TAG, "Creating all the tables");

    String CREATE_CARS_TABLE = 
            "CREATE TABLE " + CARS_TABLE_NAME + 
       "("  + CAR_ID + " INTEGER PRIMARY KEY,"
            + CAR_MANUFACTURER + " TEXT,"
            + CAR_YEAR + " INTEGER"+")";
    try 
    {
        db.execSQL(CREATE_CARS_TABLE);
    }
    catch (SQLiteException ex)
    {
        Log.e(LOG_TAG, "Create table exception: " + ex.getMessage());
    }
}
  } 
```

* * *

```
 public void addCar(Cars car)
    {
        db = dbhelper.getWritableDatabase();

        ContentValues newCarValues = new ContentValues();
        //newCarValues.put(CAR_ID,car.get_id());
        newCarValues.put(CAR_MANUFACTURER, car.getManufacturer());
        newCarValues.put(CAR_YEAR, car.getYear());

        // Inserting the new row, or throwing an exception if an error occurred
        try
        {
            db.insertOrThrow(CARS_TABLE_NAME, null, newCarValues);
        }
        catch (SQLiteException ex)
        {
            Log.e(LOG_TAG, ex.getMessage());
            throw ex;
        }   
        finally
        {
            db.close();
        }
    } 
```

* * *

```
 package Android.hwsqldb;

     public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    CarsHandler db = new CarsHandler(this);
    insertCars(db);
    Cursor cursor = db.getAllCars();
    this.startManagingCursor(cursor);
    showCars(cursor);
}

private void showCars(Cursor c) {
    Log.d("Reading:", "Reading all cars");

    ArrayList<String> items = new ArrayList<String>();

    while (c.moveToNext()) {
        items.add(String.format("%s: %s\n\t%s, %s",
                c.getInt(c.getColumnIndex(CAR_ID)),
                c.getString(c.getColumnIndex(CAR_MANUFACTURER)),
                c.getInt(c.getColumnIndex(CAR_YEAR))));
    }

    ListView lv = (ListView) findViewById(R.id.listView1);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, items);
    lv.setAdapter(adapter);
}

private void insertCars(CarsHandler db) 
{
    Log.d("Inserting:", "Inserting cars to DB");

    db.addCar(new Cars(1,"Subaru", 1987));
    db.addCar(new Cars(2,"Fiat", 1921));
    db.addCar(new Cars(3,"Susita", 1956));
    db.addCar(new Cars(4,"Mesrsedes", 1923));   
} 
```

抛出的错误：

```
07-29 07:08:47.315: E/AndroidRuntime(1165): FATAL EXCEPTION: main

07-29 07:08:47.315: E/AndroidRuntime(1165): java.lang.RuntimeException: Unable to start activity ComponentInfo{Android.hwsqldb/Android.hwsqldb.MainActivity}: java.util.MissingFormatArgumentException: Format specifier: s 
```

创建的数据库表包含所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:25:03.193

公共静态最终字符串CAR_YEAR =“年”；

您可以更改列名，例如

公共静态最终字符串CAR_YEAR =“_year”；

然后测试您的代码并检查是否从 android DDMS 文件资源管理器创建了数据库和表。

**你的代码块::**

@Override public void onCreate(Cdb) { Log.d(LOG_TAG, "创建所有表");

这个参数 'SQLiteDatabase db' 是什么。接受将 SQLiteDatabase 参数传递给 onCreate() 方法。

您可以调用 SQLiteDatabase 类。

SQLiteDatabase db = new SQLiteDatabase() 进入 onCreate() 方法

# wpf - Unity 容器视图模型通信

> ID：11706983
> 
> 赞同：1
> 
> 时间：2012-07-29T05:40:41.360
> 
> 标签：wpf, c#-4.0, unity-container, viewmodel

**我做了什么，** 我有 HomeViewModel 和 SellsViewModel。

在 HomeViewModel 中，我有属性“SellID”

在 SellViewModel 的构造函数中，我能够解析 HomeViewModel 的引用并将其存储在 SellViewModel 的 m_objHomeViewModel 变量中

在 SellViewModel 的 XAML 中，我有一个显示“SellID”的文本框，该文本框绑定到“m_objHomeViewModel.SellID”

**我正在做什么这样** 做，每当用户在 HomeViewModel 上选择差异“Sell”时，我的 SellViewModel 会自动选择它并在 SellView 中显示更改。

**问题**

1.  由于 SellView 中的 XAML 文本框绑定到 HomeViewModel 中的属性，因此更改会立即反映在 UI 上

2.  但是我无法在 SellViewModel 中捕获任何事件（例如属性更改），捕获此类事件我想从数据库中为选定的“SellID”加载其他值。

3.  我没有使用事件聚合器。如果使用，我可以轻松订阅 HomeViewModel 发布的 SellViewModel 中的事件

Q1：不使用事件聚合器怎么办？

Q2：如果在XAML中TextBox绑定了属性m_objHomeViewModel.SellID，会不会造成内存泄露？

Q3：如果在 HomeViewModel 中，我会引用 SellViewModel（使用 container.resolve）并在 HomeViewModel 中的“SellID”属性被修改时调用 SellViewModel 的公共属性或方法。这是一个好的编程习惯吗？在这里我认为它会在 HomeViewModel 和 SellViewModel 之间创建紧密耦合

请就此提出建议...

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:23:56.473

A1：如果我理解您的设计，您的 SellVM 将需要手动订阅 HomeVM 的 PropertyChanged 事件。如果 HomeVM 的 SellId 属性引发 PropertyChanged，那么您的 SellVM 将看到并做出相应的响应。

A2：在没有看到整个应用程序的情况下，简单地对属性进行数据绑定不会导致内存泄漏。只要显示 UI，HomeVM 就会在内存中，但 .NET 可以很好地识别何时不再需要它并清理内存。这个问题的答案在很大程度上取决于您的整体设计，但是通过 SellVM 从 HomeVM 绑定 SellID 的简单行为本身不会导致内存泄漏。

A3：这听起来有点奇怪——在不了解完整架构的情况下，似乎 SellID 应该属于 SellVM，而当用户切换 SellID 时，HomeVM 会使用适当的 SellID 加载 SellVM。这似乎更 OO，并允许您分离关注点。这样，关于“Sell”（销售？）的所有内容都封装在 SellVM 中，HomeVM 严格负责协调（加载正确的子 VM）。但这是基于我能收集到的关于你的整体设计的一点信息。

# c++ - 使用本机 Windows API 的 win32 线程安全队列实现

> ID：11706985
> 
> 赞同：2
> 
> 时间：2012-07-29T05:41:30.833
> 
> 标签：c++, windows, multithreading, thread-safety, queue

由于windows中缺少条件变量（虽然从vis​​ta开始引入，但windows XP和2003不支持），所以在c++中实现线程安全队列并不是很容易。[在 Win32 上实现 POSIX 条件变量的策略](http://www.cs.wustl.edu/~schmidt/win32-cv-1.html)。我需要的是只使用 CriticalSection 或 Mutex 和 Event 而不使用信号量和条件变量。

我还试图找到一个仅使用 win32 本机 API 的确切实现，但没有运气。所以我自己完成了一个。问题是我不是 100% 确定代码是线程安全的。谁能告诉我好不好？

```
class CEventSyncQueue
{
public:
    CEventSyncQueue(int nCapacity = -1);
    virtual ~CEventSyncQueue();
    virtual void Put(void* ptr);
    virtual void* Get();
protected:
    int m_nCapacity;
    CPtrList m_list;

    CRITICAL_SECTION m_lock;    
    HANDLE m_hGetEvent;
    HANDLE m_hPutEvent;
};

CEventSyncQueue::CEventSyncQueue(int nCapacity)
{
    m_nCapacity = nCapacity;

    ::InitializeCriticalSection(&m_lock);
    m_hPutEvent = ::CreateEvent(NULL, FALSE, FALSE, NULL);
    m_hGetEvent = ::CreateEvent(NULL, FALSE, FALSE, NULL);
}

CEventSyncQueue::~CEventSyncQueue()
{
    m_list.RemoveAll();

    ::CloseHandle(m_hGetEvent);
    ::CloseHandle(m_hPutEvent);

    ::DeleteCriticalSection(&m_lock);
}

void CEventSyncQueue::Put(void* ptr)
{
    ::EnterCriticalSection(&m_lock);

    while(m_nCapacity > 0 && m_list.GetCount() >= m_nCapacity)
    {
        ::LeaveCriticalSection(&m_lock);

        //wait
        if(::WaitForSingleObject(m_hPutEvent, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        ::EnterCriticalSection(&m_lock);
    }
    if(m_nCapacity > 0)
    {
        ASSERT(m_list.GetCount() < m_nCapacity);
    }
    m_list.AddTail(ptr);

    ::SetEvent(m_hGetEvent);    //notifyAll
    ::LeaveCriticalSection(&m_lock);
}
void* CEventSyncQueue::Get()
{
    ::EnterCriticalSection(&m_lock);

    while(m_list.IsEmpty())
    {
        ::LeaveCriticalSection(&m_lock);

        //wait
        if(::WaitForSingleObject(m_hGetEvent, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        ::EnterCriticalSection(&m_lock);
    }
    ASSERT(!m_list.IsEmpty());
    void* ptr = m_list.RemoveHead();

    ::SetEvent(m_hPutEvent);    //notifyAll
    ::LeaveCriticalSection(&m_lock);

    return ptr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:20:43.357

在 Windows 中实现线程安全队列很简单。我已经在 Delphi、C++、BCB 等中完成了。

为什么你认为条件变量是必需的？您认为 Windows 消息队列如何工作？

事件是用于 PC 队列的错误原语。最简单/最清晰的方法是使用信号量。

简单的无界生产者-消费者队列。

```
template <typename T> class PCSqueue{
    CRITICAL_SECTION access;
    deque<T> *objectQueue;
    HANDLE queueSema;
public:
    PCSqueue(){
        objectQueue=new deque<T>;
        InitializeCriticalSection(&access);
        queueSema=CreateSemaphore(NULL,0,MAXINT,NULL);
    };
    void push(T ref){
        EnterCriticalSection(&access);
        objectQueue->push_front(ref);
        LeaveCriticalSection(&access);
        ReleaseSemaphore(queueSema,1,NULL);
    };
    bool pop(T *ref,DWORD timeout){
        if (WAIT_OBJECT_0==WaitForSingleObject(queueSema,timeout)) {
            EnterCriticalSection(&access);
            *ref=objectQueue->back();
            objectQueue->pop_back();
            LeaveCriticalSection(&access);
            return(true);
        }
        else
            return(false);
    };
}; 
```

编辑 - 有界队列不会更困难 - 你需要另一个信号来计算空白。我不使用有界队列，但我确信它会没问题 - 一个有 2 个信号量和一个互斥体/CS 的有界队列是标准模式。

编辑：使用 PostMessage() 或 PostThreadMessage() API 调用 - 它们被明确声明为不受“waveOutProc”回调的影响。MSDN 说调用“其他波函数”会导致死锁 - 信号量调用不在该集合中，如果允许 SetEvent() 但 ReleaseSemaphore() 不允许，我确实会感到非常惊讶。事实上，如果允许 SetEvent() 而 ReleaseSemaphore() 在 Windows 中不是 ANYWHERE，我会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T00:55:01.707

条件变量？您是指[互锁*](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683560%28v=vs.85%29.aspx)功能吗？这些已经存在很长时间了 - 我在 Windows 2000 中使用它们。您可以使用它们来构建并发系统，但您仍然需要自己做一些工作。

或者，尝试 OpenMP。要使用它，您需要 Visual Studio 2008 或更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:53:35.917

再想一想，几乎没有必要显式地实现信号量。相反，只需考虑*如何*使用事件实现信号量，并以这种方式解决问题。我的第一次尝试使用了手动重置事件，虽然效率低下但显然是正确的，然后我进行了优化。

请注意，我没有调试（甚至编译！）这些代码片段，但它们应该给你正确的想法。这是手动重置版本：

```
class CEventSyncQueue
{
public:
    CEventSyncQueue(int nCapacity = -1);
    virtual ~CEventSyncQueue();
    virtual void Put(void* ptr);
    virtual void* Get();
protected:
    int m_nCapacity;
    CPtrList m_list;

    CRITICAL_SECTION m_lock;    
    HANDLE m_queue_not_empty;
    HANDLE m_queue_not_full;
};

CEventSyncQueue::CEventSyncQueue(int nCapacity)
{
    m_nCapacity = nCapacity;
    ::InitializeCriticalSection(&m_lock);
    m_queue_not_empty = ::CreateEvent(NULL, TRUE, FALSE, NULL);
    m_queue_not_full = ::CreateEvent(NULL, TRUE, TRUE, NULL);
}

CEventSyncQueue::~CEventSyncQueue()
{
    m_list.RemoveAll();
    ::CloseHandle(m_queue_not_empty);
    ::CloseHandle(m_queue_not_full);
    ::DeleteCriticalSection(&m_lock);
}

void CEventSyncQueue::Put(void* ptr)
{
    bool done = false;
    while (!done)
    {
        // If the queue is full, we must wait until it isn't.
        if(::WaitForSingleObject(m_queue_not_full, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        // However, we might not be the first to respond to the event,
        // so we still need to check whether the queue is full and loop
        // if it is.
        ::EnterCriticalSection(&m_lock);
        if (m_nCapacity <= 0 || m_list.GetCount() < m_nCapacity)
        {
            m_list.AddTail(ptr);
            done = true;
            // The queue is definitely not empty.
            SetEvent(m_queue_not_empty);
            // Check whether the queue is now full.
            if (m_nCapacity > 0 && m_list.GetCount() >= m_nCapacity)
            {
                ResetEvent(m_queue_not_full);
            }
        }
        ::LeaveCriticalSection(&m_lock);
    }
}

void* CEventSyncQueue::Get()
{
    void *result = nullptr;
    while (result == nullptr)
    {
        // If the queue is empty, we must wait until it isn't.
        if(::WaitForSingleObject(m_queue_not_empty, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        // However, we might not be the first to respond to the event,
        // so we still need to check whether the queue is empty and loop
        // if it is.
        ::EnterCriticalSection(&m_lock);
        if (!m_list.IsEmpty())
        {
            result = m_list.RemoveHead();
            ASSERT(result != nullptr);
            // The queue shouldn't be full at this point!
            ASSERT(m_nCapacity <= 0 || m_list.GetCount() < m_nCapacity);
            SetEvent(m_queue_not_full);
            // Check whether the queue is now empty.
            if (m_list.IsEmpty())
            {
                ResetEvent(m_queue_not_empty);
            }
        }
        ::LeaveCriticalSection(&m_lock);
    }
} 
```

这是更高效的自动重置事件版本：

```
class CEventSyncQueue
{
public:
    CEventSyncQueue(int nCapacity = -1);
    virtual ~CEventSyncQueue();
    virtual void Put(void* ptr);
    virtual void* Get();
protected:
    int m_nCapacity;
    CPtrList m_list;

    CRITICAL_SECTION m_lock;    
    HANDLE m_queue_not_empty;
    HANDLE m_queue_not_full;
};

CEventSyncQueue::CEventSyncQueue(int nCapacity)
{
    m_nCapacity = nCapacity;
    ::InitializeCriticalSection(&m_lock);
    m_queue_not_empty = ::CreateEvent(NULL, FALSE, FALSE, NULL);
    m_queue_not_full = ::CreateEvent(NULL, FALSE, TRUE, NULL);
}

CEventSyncQueue::~CEventSyncQueue()
{
    m_list.RemoveAll();
    ::CloseHandle(m_queue_not_empty);
    ::CloseHandle(m_queue_not_full);
    ::DeleteCriticalSection(&m_lock);
}

void CEventSyncQueue::Put(void* ptr)
{
    if (m_nCapacity <= 0)
    {
        ::EnterCriticalSection(&m_lock);
        m_list.AddTail(ptr);
        SetEvent(m_queue_not_empty);
        ::LeaveCriticalSection(&m_lock);
        return;
    }

    bool done = false;
    while (!done)
    {
        // If the queue is full, we must wait until it isn't.
        if(::WaitForSingleObject(m_queue_not_full, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        // However, under some (rare) conditions we'll get here and find
        // the queue is already full again, so be prepared to loop.
        ::EnterCriticalSection(&m_lock);
        if (m_list.GetCount() < m_nCapacity)
        {
            m_list.AddTail(ptr);
            done = true;
            SetEvent(m_queue_not_empty);
            if (m_list.GetCount() < m_nCapacity)
            {
                SetEvent(m_queue_not_full);
            }
        }
        ::LeaveCriticalSection(&m_lock);
    }
}

void* CEventSyncQueue::Get()
{
    void *result = nullptr;
    while (result == nullptr)
    {
        // If the queue is empty, we must wait until it isn't.
        if(::WaitForSingleObject(m_queue_not_empty, INFINITE) != WAIT_OBJECT_0)
        {
            ASSERT(FALSE);
        }

        // However, under some (rare) conditions we'll get here and find
        // the queue is already empty again, so be prepared to loop.
        ::EnterCriticalSection(&m_lock);
        if (!m_list.IsEmpty())
        {
            result = m_list.RemoveHead();
            ASSERT(result != nullptr);
            // The queue shouldn't be full at this point!
            if (m_nCapacity <= 0) ASSERT(m_list.GetCount() < m_nCapacity);
            SetEvent(m_queue_not_full);
            if (!m_list.IsEmpty())
            {
                SetEvent(m_queue_not_empty);
            }
        }
        ::LeaveCriticalSection(&m_lock);
    }
} 
```

# php - PHP：使用 preg_match 获取 url 变量？

> ID：11706986
> 
> 赞同：3
> 
> 时间：2012-07-29T05:41:33.120
> 
> 标签：php, regex

```
http://www.example.com?id=05 
```

或者

```
http://www.example.com?id=05&name=johnny 
```

这是一个字符串。我想从中获得价值`$id`。

它的正确模式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T05:44:15.443

你不需要正则表达式（除非你有充分的理由，否则你不应该在未来直接跳到正则表达式）。

使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)with `PHP_URL_QUERY`，它检索查询字符串。然后将其与[`parse_str()`](http://php.net/manual/en/function.parse-str.php).

```
$querystring = parse_url('http://www.mysite.com?id=05&name=johnny', PHP_URL_QUERY);
parse_str($querystring, $vars);

echo $var['id']; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-29T05:43:02.693

@PhpMyCoder 的解决方案非常完美。但是如果你绝对需要使用 preg_match （虽然在这种情况下完全没有必要）

```
$subject = "http://www.mysite.com?id=05&name=johnny";
$pattern = '/id=[0-9A-Za-z]*/'; //$pattern = '/id=[0-9]*/'; if it is only numeric.
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

# java - iOS 和 Java - 如何在用 Java 编程的服务器上解码 UTF-8 编码的 NSData？

> ID：11706987
> 
> 赞同：2
> 
> 时间：2012-07-29T05:41:41.730
> 
> 标签：java, ios, utf-8, nsdata, decode

我正在将 JSON 从我的 iPhone 应用程序发送到我的服务器，该服务器是 Play Framework 的 Java 应用程序并部署在 Heroku Cloud 上。

这是我在我的应用程序中使用的代码。

```
self.url = [NSURL URLWithString:@"http://myURL.herokuapp.com/check/"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

NSDictionary *dict = [[NSDictionary alloc]initWithObjects:[NSArray arrayWithObjects:@"Rajesh", @"pass", nil] forKeys:[NSArray arrayWithObjects:@"username", @"password", nil]];
NSString *jsonString = [dict JSONRepresentation];

NSLog(@"%@", jsonString);

NSData *data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%@", data.description);

[request setHTTPMethod:@"POST"];
[request setHTTPBody:data];

NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
if(conn)
{
    self.receivedData = [[NSMutableData alloc]init];
    NSLog(@"%@", @"connection started");
} 
```

现在我已经使用 utf-8 编码将 jsonString 编码为 NSData 。如何在服务器端对其进行解码？

奇怪的问题是，如果我尝试使用来获取正文，则会`request.body().toString()`得到以下输出。

```
DefaultRequestBody(Some(Map()),None,None,None,None,None,false) 
```

当我从我的 Android 应用程序发出相同类型的请求时，我只是使用`request().body().asJson()`了方法并获得了我进一步使用的 JSON，但在 iOS 中，我将我的 Json 转换为 NSData，然后再将其发送到服务器，所以我对我应该如何做有点困惑在服务器端对其进行解码。

# objective-c - extern 将数据从一个实例传递到另一个类的另一个实例

> ID：11706995
> 
> 赞同：0
> 
> 时间：2012-07-29T05:43:23.990
> 
> 标签：objective-c, extern

我在目标 C 中有以下代码：

类1.h：

```
...
extern NSString global;
... 
```

类1.m：

```
 ...
    NSString *global;
    @implementation:
    ..
-dostuff{
    global=@"hi";
}
    ..
    @end
    ... 
```

类2.m：

```
 #import "class1.h"
    ...
-printval:{
    NSlog(@"%@",global)
}
    ... 
```

在调用类 1 中的一个方法后，我调用类 2 中的一个方法，该方法尝试打印出全局。但是，这不起作用...我不理解这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:01:01.157

这不完全正确。该关键字`extern`用于告诉编译器在另一个模块（文件）中声明了一个全局（非静态）变量。所以你应该尝试这样的事情。

类1.h：

```
...
NSString *global = nil;
... 
```

类1.m：

```
 ...
    extern NSString *global;
    @implementation:
    ..
-dostuff{
    global=@"hi";
}
    ..
    @end
    ... 
```

类2.m：

```
#import "class1.h" 
...
extern NSString *global;
-printval:{
    NSlog(@"%@",global)
}
    ... 
```