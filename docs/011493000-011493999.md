# StackOverflow 问答 11493000-11493999

# php - How to write a file in UTF-8 format

> ID：11493004
> 
> 赞同：0
> 
> 时间：2012-07-15T15:05:47.463
> 
> 标签：php, utf-8, simplexml, fwrite

I have read a XML file with the `simplexml_load_file()` function. I suppose this function is well written and supports XML encodings correctly. My XML file is in UTF-8 format, i.e. it contains normal ANSI characters along with national characters with multibyte encoding.

So, now I want to write the XML file back with `fopen()` and `fwrite()`, also in UTF-8 format.

Should I perform some conversions to do that correctly?

Suppose variable `$a` contains some UTF-8 encodings. Will it be written correctly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:48:24.237

如果您的 xml 确实已经以 utf8 编码，那么 simplexml 生成的字符串也将是 utf8。含义 - 只需将它们按原样写入文件即可。

不过，php 与底层 libxml 的接口有点时髦。即使 xml 可能是 utf8 编码的，请确保 xml 以正确的编码声明开头，否则可能会被误解。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

# java - 反斜杠 (\) 的行为不同

> ID：11493006
> 
> 赞同：4
> 
> 时间：2012-07-15T15:05:53.547
> 
> 标签：java, string, backslash

我有如下所示的小代码

```
public class Testing {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        String firstString = sc.next();
        System.out.println("First String : " + firstString);
        String secondString = "text\\";
        System.out.println("Second String : " + secondString);
    }
} 
```

当我以**文本**形式提供输入时，我得到的输出为

```
First String : text\\
Second String : text\ 
```

为什么当我提供给第一个字符串的输入与第二个字符串相同时我得到两个不同的字符串。

## [www.ideone.com 上的演示](http://ideone.com/chNqf)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T15:07:57.113

您在运行时作为输入提供的控制台中的双反斜杠实际上是两个反斜杠。您只需写两次 ASCII 字符反斜杠。

字符串文字中的双反斜杠意味着只有一个反斜杠。因为您不能在字符串文字中编写单个反斜杠。为什么？因为反斜杠是用于“转义”特殊字符的特殊字符。例如：制表符、换行符、反斜杠、双引号。如您所见，反斜杠也是需要转义的字符之一。你怎么逃脱？带反斜杠。因此，转义反斜杠是通过将其放在反斜杠后面来完成的。所以这会导致两个反斜杠。**这将被编译成一个反斜杠。**

为什么要转义字符？看看这个字符串：`this "is" a string`。如果您想在 Java 中将其写为字符串文字，您可能会故意认为它看起来像这样：

```
String str = "this "is" a string"; 
```

如您所见，这不会编译。所以像这样逃避他们：

```
String str = "this \"is\" a string"; 
```

现在，编译器知道 the`"`不会关闭字符串，而是真正表示 character `"`，因为您使用反斜杠对其进行了转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:09:03.810

Java 使用`\`第二个字符串中的转义字符

*按需编辑*

*   在第一种情况下，输入获取所有键入的字符并将它们封装在一个字符串中，因此所有字符都被打印（没有评估，因为它们被读取，它们被打印）。

*   在第二个中，JVM`"`逐个字符地评估 之间的字符串，并且`\`读取的第一个具有保护第二个的元字符，因此不会打印。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T15:18:06.857

在字符串`\`中是特殊字符，例如您可以像`\n`创建新行号一样使用它。要关闭它的特殊含义，您需要使用另一个`\`like `\\`。所以在你的第二种情况下`\\`将被解释为一个`\`字符。

如果您从外部源（如流）读取字符串，Java 假定它们是普通字符，因为特殊字符已经转换为例如制表符、换行符等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T15:14:26.410

字符串内部的 char 序列不能与双引号之间的 char 序列特别混淆，因为反斜杠具有特殊含义："\n\r\t\\\0" => { (char)10,(char)13, (char)9,'\\',(char)0 }

# wpf - Playing sound in animation

> ID：11493008
> 
> 赞同：1
> 
> 时间：2012-07-15T15:06:06.930
> 
> 标签：wpf, xaml, animation, storyboard, mediaelement

I'm having an issue with playing a sound in animation when the animation is run multiple times (one after another, not in parallel).

The structure is:

```
<Window....>
    <Window.Resources>
        <Storyboard x:Key="App_Build">
            ....
            <MediaTimeline FillBehavior="Stop" Storyboard.TargetName="Pong_Public_D_145_wav" Source="Pong-Public_D-145.wav" />
        </Storyboard>
    </Window.Resources>
    <Window.Triggers>
        <EventTrigger RoutedEvent="ButtonBase.Click" SourceName="button1">
            <BeginStoryboard x:Name="App_Build_BeginStoryboard1" Storyboard="{StaticResource App_Build}"/>
        </EventTrigger>
    </Window.Triggers>

    <Grid x:Name="LayoutRoot"....>
        <MediaElement x:Name="Pong_Public_D_145_wav" UnloadedBehavior="Stop" Volume="1"..../>

        <Button x:Name="button1" Content="App Start" ..../>

        ......

    </Grid>
</Window> 
```

[I've removed all layout properties for brevity, plus the storyboard has more animations for visuals (opacity, visibility, etc.)]

What happens is when I click the button the storyboard runs as expected every time (I see the visuals change) but the sound is sometimes played and sometimes not.

I was not able to find any "rule" to when the sound is played. Sometimes it's played on first run, sometimes not. Sometimes it's playing 10 times in a row, sometimes it's not playing for 10 times. Sometimes it's playing on every alternating run (play -> no play -> play -> no play...).

The reason for multiple runs: this is a concept for the actual application, I need to present it to the client for them to approve it. They will want to see the animation multiple times, and the sound should play every time - it's an integral part of the whole animation.

I'm really stumped here, would like to hear any suggestion, in any direction.

# c - 如何从文件中读取指向整数指针的指针？

> ID：11493020
> 
> 赞同：2
> 
> 时间：2012-07-15T15:08:00.130
> 
> 标签：c, pointers

我想从文件中读取指向整数指针的指针。

我正在使用以下代码写入文件：

```
FILE *fp;
int **myArray = NULL;
int i, j;

for(i = 0; i < 3; i++){
    myArray = (int **)realloc(myArray, (i+1)*sizeof(int *));
    for(j = 0; j < 4; j++){
        myArray[i] = (int *)realloc(myArray[i], (j+1)*sizeof(int));
        myArray[i][j] = i*j*10;
    }
}

if((fp=fopen("test", "wb"))==NULL) {
    printf("Cannot open file.\n");
}
if(fwrite(myArray, sizeof(int), 3*4, fp) != 12)
    printf("File write error.");
fclose(fp); 
```

我正在使用以下代码来阅读，但是在运行它时出现了段错误。

```
FILE *fp;
int **myArray = NULL;
int i, j;

for(i = 0; i < 3; i++){
    myArray = (int **)realloc(myArray, (i+1)*sizeof(int *));
    for(j = 0; j < 4; j++){
        myArray[i] = (int *)realloc(myArray[i], (j+1)*sizeof(int));
    }
}

if((fp=fopen("test", "rb"))==NULL) {
    printf("Cannot open file.\n");
}

if(fread(myArray, sizeof(int), 3*4, fp) != 12) {
    if(feof(fp))
        printf("Premature end of file.");
    else
        printf("File read error.");
}

for(i=0; i < 3; i++){
    for(j = 0; j < 4; j++){
        printf("%d\n", myArray[i][j]);
    }
}

fclose(fp); 
```

**编辑：**在更彻底的调试中，我发现该`fread`函数使分配的内存`myArray`无效。关于我在这里可能做错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:16:04.740

如果您使用`putc()`：

```
char ch;
FILE *input, *output;
input = fopen( "tmp.c", "r" );
output = fopen( "tmpCopy.c", "w" );
ch = getc( input );
while( ch != EOF ) {
  putc( ch, output );
  ch = getc( input );
}
fclose( input );
fclose( output ); 
```

现在用`*input`你的`int`矩阵替换。如果你得到一个`segfault`，很可能你没有正确分配内存。留给你锻炼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:16:04.247

从文件中读取指针（指向任何东西，包括整数指针）是非常不寻常的。这是不寻常的，因为文件中的信息在您的程序完成运行后仍然存在，但是当您的程序完成时，操作系统会释放任何指针。

所以我假设您实际上想要编写（和读取）一些有用的数据（在您的情况下为整数），而不是指针 - 而且您的编写代码很糟糕：

> fwrite(myArray, sizeof(int), 3*4, fp)

使用循环而不是指针来写入数据：

```
for(i = 0; i < 3; i++)
{
    fwrite(myArray[i], sizeof(int), 4, fp);
} 
```

然后，使用类似的循环来读取数据：

```
for(i = 0; i < 3; i++)
{
    fread(myArray[i], sizeof(int), 4, fp);
} 
```

# java - java jcombobox没有滚动条？

> ID：11493021
> 
> 赞同：1
> 
> 时间：2012-07-15T15:08:07.460
> 
> 标签：java, swing, jcombobox, jlist, jscrollbar

我有一个 JComboBox 组件：

```
ho2Combo = new JComboBox();
ho2Combo.setLocation(x, y);
ho2Combo.setSize(w, h);
ho2Combo.setFont(comboFont);
ho2Combo.setModel(new DefaultComboBoxModel(Format.model(0))); //this fills up the combobox
ho2Combo.setSelectedIndex(0);
ho2Combo.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent evt) {
        ho2ComboItemStateChanged(evt);
     }
});
add(ho2Combo); 
```

我很想拥有这个没有滚动条的组合框！我怎么能做到这一点？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:57:48.273

如果您确信所有元素都适合屏幕，那么您可以使用：

```
ho2Combo.setMaximumRowCount(ho2Combo.getModel().getSize()); 
```

# joomla - How do I create/obtain a permalink to user profile in Joomla?

> ID：11493024
> 
> 赞同：0
> 
> 时间：2012-07-15T15:08:19.520
> 
> 标签：joomla, profile, contact, joomla2.5, permalinks

I have just migrated a lot of content from an old webpage to a 2.5 Joomla website. Almost every imported page contains a contact detail of one person from a 3-10 people pool.

I would like to define these contacts as Joomla contacts and just simply link to these profiles from every page.

How do I find or create a permalink to these user profiles?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:19:28.307

我不知道这样做的本地 Joomla 方式，但由于 Joomla url 经常丑陋，我们使用[YOURLS](http://yourls.org/)作为我们所有网站上的全方位链接缩短器。它带有一个前端，用户*可以*创建自己的链接等，但我们只是使用该机制，以及管理站点上的一些其他功能 - 该机制本身非常简单易用一次您创建一个以查看数据库中需要哪些内容才能发挥它的魔力。

# python - wxPython 的 wx.ListCtrl 处于简单列表模式（不是 style = wx.LC_REPORT）

> ID：11493025
> 
> 赞同：1
> 
> 时间：2012-07-15T15:08:38.083
> 
> 标签：python, wxpython, wxwidgets

我有一个关于如何在 (style = wx.LC_REPORT) 模式下使用 wx.ListCtrl 的教程，但我只使用一列：

```
self.InsertColumn(0, "Item") 
```

我怎么能：

*   拉伸列以获取全部收益。长度
*   开始时只使用一列切换到更基本的模式？

我真的不需要我在上面使用的字段标签（即“项目”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:14:49.077

尝试使用[wx.ListBox](http://wxpython.org/docs/api/wx.ListBox-class.html)控件而不是[wx.ListCtrl](http://wxpython.org/docs/api/wx.ListCtrl-class.html)。

`ListCtrl`最接近您要查找的显示模式是`wx.LC_LIST`，并且在该模式下，如果控件具有足够的水平范围，它将并排呈现多个项目。

另一方面，一个简单`ListBox`的正是你正在寻找的。

# php - JavaScript/PHP function will not post to another page

> ID：11493027
> 
> 赞同：0
> 
> 时间：2012-07-15T15:08:50.883
> 
> 标签：php, javascript, post

I'm using PHP, but I have some variables that I'd like to post to another page using JavaScript. However, I cannot get it to work. The strange thing is that I use this exact same function on some other pages, so I can't figure out why it's doing this.

The function is simply an input button (linked to a person's name and ID). When the button is pressed, I'd like for the name and ID to be posted to another page.

```
function flagPost(replyID, userName){
  if(!confirm("Flag Post?"))
    return false;
  $.post('postprocessing.php',"replyID=" + replyID + "&username=" +
    userName + "&tableName=testTable&category=flagPost",
    function(response){
      window.location.reload()
    }
  );
} 
```

I know `replyID` and `userName` are being set correctly, because when I write the variables to the page, they display correctly.

```
function flagPost(replyID, userName){
  document.write(replyID + userName) 
```

I even created a new page just to make sure something on `postprocessing.php` wasn't throwing off the POST.

I made this page titled `postprocessing2.php` where this was the **only** thing on it (aside from including the config file and whatnot).

```
$category = $_POST['category'];
  if($category == "flagPost"){
    $table = $_POST['tableName']; //just testing, I use escape strings in the "real" code
    $postID = $_POST['replyID'];
    $username = $_POST['username'];
    mysql_query("insert into flaggedPosts VALUES('','$postID','$table','$username')");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T09:19:58.417

代替`"replyID=" + replyID + "&username=" + userName + "&tableName=testTable&category=flagPost"`

和

```
$.post(url,{ replyID: replyID, username: userName, tableName: "testTable", category: "flagPost"},function... 
```

# ios - AVAudio 播放器单例在 isPlaying 检查时崩溃

> ID：11493031
> 
> 赞同：1
> 
> 时间：2012-07-15T15:09:23.570
> 
> 标签：ios, singleton, avaudioplayer

我正在为 AVAudioPlayer 使用单例，效果很好。

我希望在初始化播放器之前添加一个检查，如果播放器已经在播放某些内容，则停止播放器。

我添加了这段代码：

```
SoundPlayer *player = [SoundPlayer sharedInstance];
        if([player isPlaying]){
            [player stop];
 } 
```

但是它给了我一个EXE_BAD_ACCESS就`if([player isPlaying])`行了。

2个问题：

1.  如果这是一个单例并且我要找回同一个玩家，那么为什么它不自己停止呢？
2.  为什么我会收到错误消息？

**这是完整的代码**

```
 #import "SoundPlayer.h"

    @implementation SoundPlayer
    @synthesize helpMode;

    static SoundPlayer *sharedInstance = nil;

    + (SoundPlayer *)sharedInstance {
        if (sharedInstance == nil) {
            sharedInstance = [[super allocWithZone:NULL] init];
        }

        return sharedInstance;
    }

    +(BOOL)playSound:(NSURL*)url{

       NSError *error;
        SoundPlayer *player = [SoundPlayer sharedInstance];
            if([player isPlaying]){
                [player stop];
            }

       player = [[SoundPlayer sharedInstance] initWithContentsOfURL:url error:&error];
       [player play];

        if (player == nil){
            NSLog(@"error %@ \n for file %@",[error description],[url path]);   
            return NO;
        }else {
            if (![player helpMode]) {
                 [player play];
            }else{
                NSLog(@"help mode");
            }

        }
         return YES;
    }

    -(void)stopSound{
        if ([self isPlaying]) {
            [self stop];
        }
    }

    @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:22:10.067

我不确定这是否是导致错误的原因，但我想我会在此处发布我对讨论的回复，以使我的观点更清楚，因为我将有更多的空间和代码格式。

不，您不必重写所有方法，我只是要求确保我理解一切正确。我说的另一部分是就像 in 一样`stopSound{}`，你应该使用 self 而不是

`SoundPlayer *player = [SoundPlayer sharedInstance];`

所以把你的代码改成这个，运行它，看看它是否修复，在下面发表评论让我知道结果。

```
 -(BOOL)playSound:(NSURL*)url{

       NSError *error;
       // SoundPlayer *player = [SoundPlayer sharedInstance];
            if([self isPlaying]){
                [self stop];
            }

       //not sure if this should be self or super (i think super, try both)
       //if you overrided the init then definitely self

       //[self initWithContentsOfURL:url error:&error];
       [super initWithContentsOfURL:url error:&error];

       [self play];

        if (self == nil){
            NSLog(@"error %@ \n for file %@",[error description],[url path]);   
            return NO;
        }else {
            if (![self helpMode]) {
                 [self play];
            }else{
                NSLog(@"help mode");
            }

        }
         return YES;
    } 
```

实际上，您所做的只是创建一个指向 self 的指针，同时创建一个播放器对象，因为它是一个单例。话虽如此，我不知道为什么这会导致它崩溃，而不是你“应该”使用 self 。

* * *

```
+ (SoundPlayer *)sharedInstance {
        if (sharedInstance == nil) {
            sharedInstance = [[super allocWithZone:NULL] init];
        }

        return sharedInstance;
    } 
```

[在这里](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)看到AVAudioPlayer 只有 2 个`init`方法，而且都没有，`init`因此你没有完全初始化你的超类。您需要重写`initWithContentsOfURL:url`方法并使用 url 参数初始化此对象及其超级对象。只需确保将`initWithContentsOfURL:url`.h 和 .m 都放入。如果它很重要，也可以尝试，但`alloc`不要尝试`allocWithZone`。

# hosting - 成熟的企业是否应该使用廉价的托管服务？

> ID：11493033
> 
> 赞同：-1
> 
> 时间：2012-07-15T15:09:31.700
> 
> 标签：hosting, web-hosting

我为一家营销和活动公司重新设计了几个网站，他们要求我带头更换主持人，因为他们不喜欢他们现在的主持人，所以他们付的钱很少。

他们有：

*   五个静态站点（总共大约 3GB 的磁盘空间）
*   这五个网站每月可能有 20,000 多名访问者。
*   他们目前每月为共享主机支付 10 美元。
*   他们有大约 15 个活动的电子邮件地址。
*   他们的服务器总是停机，他们的电子邮件总是停机。

他们想要切换主机并正在研究 www.hostgator.com 。他们希望有效地支付相同的费用，但获得更好的结果。我建议在多伦多本地进行更好的托管，每月费用约为 50 美元，但要找一家非常有信誉的公司。

由于我主要处理前端设计，我不确定如何最好地向他们解释他们的最佳选择。一家老牌公司是否应该使用廉价（每月 10 美元）的托管服务？还是这是自找麻烦？我是否应该礼貌地解释一家拥有 15 名员工的公司每年需要在其网站上投资超过 100 美元？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:16:33.333

这是一个非常少的访问者，所以任何主机都应该处理它，空间也不应该是一个问题。我同意他们应该投资更多，但这取决于网站对他们的业务有多重要，或者他们是否是业务。

听起来当前主机不可靠，但您可以找到另一个更可靠的主机。1and1、godaddy、ipower 是我想到的 3 个，通常都低于 100 美元/年，但我相信这是每个​​域的，所以他们可能仍然需要为 5 个站点推荐每月 50 美元。

*   参见：lf=Static&linkOrigin=&linkId=hd.subnav.linuxhosting">http://www.1and1.com/linux-web-hosting?_lf=Static&linkOrigin=&linkId=hd.subnav.linuxhosting
*   参见：[http ://www.ipower.com/ipower/web-hosting/unix-compare-plans.bml](http://www.ipower.com/ipower/web-hosting/unix-compare-plans.bml)
*   参见：[http ://www.godaddy.com/products/websites-hosting.aspx?ci=72738](http://www.godaddy.com/products/websites-hosting.aspx?ci=72738)

您对使用廉价主机的老牌公司的问题：确定他们可以，如果主机不可靠，他们可以找到更好的主机并且仍然保持便宜。

您关于解释他们需要更多投资的问题：这取决于网站对他们的业务和需求的重要性。如果只是关于他们公司的宣传册，而不是他们的实际产品，他们可能会接受。如果他们的产品是一个 Web 应用程序，并且他们被期望对他们的客户来说是可靠的，那么一定要说话。他们可以获得带有控制面板的专用服务器来管理他们所有的域、电子邮件等，每月不到 150 美元，或者利用我上面提到的供应商的 24/7 支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T15:18:06.967

每月 20000 名访问者每小时只有大约 27 名访问者，即每 2 分钟左右 1 名。这是一个相当轻的负载，除非你正在做一些真正的重型服务器端处理。

就用户负载而言，我认为基本的共享主机设置可能就足够了。例如，Go Daddy 的设置大约是每月 7.00 美元（美国），而且非常可靠。我有一些客户在那里托管他们的网站，我们遇到的问题很少。我也听说过关于 HostGator 的好消息，而且它们的价格也差不多。

如果您想进行 VPS（虚拟专用服务器）设置，则无需每月花费 100 美元。它们的起价约为每月 20.00 美元左右，用于相对基本的设置，然后根据 RAM 和磁盘空间等因素从那里开始上涨。

VPS 的最大优势可能是可以灵活地安装您想要的任何其他软件，这是大多数共享主机设置无法做到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:26:14.557

答案取决于他们正在运行的网站类型，或者更准确地说，取决于他们通过网络存在*获得了多少钱。*

如果他们正在运行一个基本的网站，上面写着他们是谁、他们做什么以及如何联系他们，那么他们可能不需要像样的托管。每月 20,000 次访问并不多，因此当然不值得花很多钱。事实上，您最好每 2-3 年左右花钱进行一次不错的专业重新设计，以保持公司形象与时俱进。

如果他们正在运营一个电子商务网站，他们的一些订单直接来自他们的网站，那么他们绝对应该在托管方面投入更多。请记住，对于托管停机期间发生的每一次点击，您都会失去一位潜在客户。如果您每月从在线订单中赚取 100 美元或更多，那么每月支付 50 美元的托管费用是物有所值的，我希望这对于成功的企业来说也是如此。

如果他们希望获得更多的在线观众，也许您应该说服他们在 SEO 活动上花一些钱，并在您当前的托管计划无法应对负载时为额外的点击留出资金。

# cobol85 - 用于在 MS COBOL 中显示错误的命令

> ID：11493034
> 
> 赞同：2
> 
> 时间：2012-07-15T15:09:57.900
> 
> 标签：cobol85

我可以就 ms cobol 2.20 寻求帮助吗？当我在我的程序中获得运行时时，我发现读取错误有困难，因为它被我的程序所在目录的路径所覆盖。这可以在记事本中记录吗？这样我就可以清楚地看到错误是什么.

像这样的东西。

```
 C:\FOLDR1\FOLDR2\FOLDR3\FOLDR4\FOLDR5\ER,LINE:0094 
```

正如你在最后看到的那样，这是我的程序中的一个错误。你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:49:16.150

如果您尝试在 OpenCobol 中编译 Cobol 程序，您可能会收到更有意义的错误消息（请参阅 www.opencobol.org）。

或者，您可以尝试一次从下到上注释掉您的程序部门，直到错误消息消失。然后，至少，你会知道问题出在哪里。您可以在此处发布发生错误的段落供我们发表意见。

# javascript - 删除记录确认信息

> ID：11493046
> 
> 赞同：1
> 
> 时间：2012-07-15T15:11:14.727
> 
> 标签：javascript, ajax, jquery

我想知道是否有人可以帮助我。

首先，我很抱歉，因为我对此真的很陌生，所以请原谅我有些看起来非常基本的问题/错误。

下面的代码**摘录**成功地创建了一个与当前用户相关的记录表。

**工作解决方案 -** Baylor Rae' 在过去 3-4 天里不知疲倦地与我一起寻找解决方案。所有 Baylor Rae 都无法提供一个完全成功的剧本，但他们确实在推动这个过程中发挥了很大作用。然而，下面的完整工作脚本**由 jazzman1 @ PHP Freaks 提供**

**主要脚本**

```
 <script type="text/javascript">
        $(document).ready(function(){
            $('form.delete').submit(function(e){
              console.log('submit'); return false;   
            })
        })
    </script>   

<script type="text/javascript">
    $(document).ready(function(){
        $('form.delete').submit(function(e){ 

            e.preventDefault();
            var elem = $(this).closest('.delete');
            var lid = $(this).serialize();
            $.confirm({
                 'title'    : 'Delete Confirmation',
            'message'   : 'You are about to delete this Location. <br />It cannot be restored at a later time! Do you wish to continue?',
                'buttons'   : {
                    'Yes'   : {
                'class' : 'blue',
                'action': function(){
                //elem.slideUp();
                              $.ajax({ 
                            url: 'deletelocation.php', 
                            type: 'POST', 
                            data: lid, 
                            success: function(response) { 
                            console.log('success', response); 
                            }, 
                            error: function() { 
                            console.log('error') 
                            } 
                            }); 
                    }
                },
                'No'    : {
                    'class' : 'gray',
                                        'action': function(){}  // Nothing to do in this case. You can as well omit the action property.

                }
            }
        });

    });

    })
</script> 
```

**jqueryconfim.js**

```
 (function($){

        $.confirm = function(params){

            if($('#confirmOverlay').length){
                // A confirm is already shown on the page:
                return false;
            }

            var buttonHTML = '';
            $.each(params.buttons,function(name,obj){

                // Generating the markup for the buttons:

                buttonHTML += '<a href="#" class="button '+obj['class']+'">'+name+'<span></span></a>';

                if(!obj.action){
                    obj.action = function(){};
                }
            });

            var markup = [
                '<div id="confirmOverlay">',
                '<div id="confirmBox">',
                '<h1>',params.title,'</h1>',
                '<p>',params.message,'</p>',
                '<div id="confirmButtons">',
                buttonHTML,
                '</div></div></div>'
            ].join('');

            $(markup).hide().appendTo('body').fadeIn();

            var buttons = $('#confirmBox .button'),
                i = 0;

            $.each(params.buttons,function(name,obj){
                buttons.eq(i++).click(function(){

                    // Calling the action attribute when a
                    // click occurs, and hiding the confirm.

                    obj.action();
                    $.confirm.hide();
                    return false;
                });
            });
        }

        $.confirm.hide = function(){
            $('#confirmOverlay').fadeOut(function(){
                $(this).remove();
            });
        }

    })(jQuery); 
```

**主脚本中的表单**

```
<form name="delete" id="delete" class="delete">
<input type="hidden" name="lid" id="lid" value="<?php echo $theID ?>" />
<input type="submit" value="Delete Record"/>
</form> 
```

**删除位置.php**

```
<?php

    $lid = intval($_POST['lid']);
    $query = mysql_query("DELETE FROM table WHERE locationid='".$lid."'");

    ?> 
```

您会看到表格的末尾有四个按钮，通过`locationsaction.php`脚本将用户导航到四个不同的屏幕，所有这些屏幕都通过值链接回主表格记录`lid`。该脚本如下所示。

我现在正在尝试为该`Delete`功能实现确认消息。可以在[这里](http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/)找到源代码。

这就是我变得有点不确定下一步该做什么的地方。我试图将按钮`on click`事件与`Delete`函数名称联系起来，但不是确认消息，而是将用户带到一个空白屏幕并删除记录。

我已经运行了 JavaScript 控制台并且没有创建任何错误，所以我有点不确定如何继续。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:56:19.833

观察1：

```
function delete(){
$(document).ready(function(){ 
```

这真的是代码中行的顺序吗？jQuery 就绪钩子位于函数定义的**内部？**或者您是否错误地将它们以错误的顺序张贴在这里。

如果是前一种情况，那么请先解决这个问题。否则，请继续阅读：

1.  为什么是 $('.item .delete')？我没有看到任何带有类 .item 的标记？它在哪里？您确定此选择器首先匹配某些元素吗？此外，您应该使用#delete 来通过它们的id 属性引用元素，而不是.delete，因为它会查找具有delete 类的元素。

2.  您的 id:delete 按钮和其他按钮是提交类型按钮，这意味着它们的点击处理程序根本不会阻塞提交流程。您可以将所有按钮类型更改为按钮，而不是将它们作为提交。下面的代码示例。

3.  为什么要声明性 onClick 删除按钮？摆脱它。

（此外，在这种情况下，您真的不需要表单，除非您想反序列化表单，鉴于您的标记，这似乎不是要求或意图）。

```
<td><input type='button' name='type' id='details' value='Details'/></td>
<td><input type='button' name='type' id='images' value='Images'/></td>
<td><input type='button' name='type' id='addFinds' value='Add Finds'/></td>
<td><input type='button' name='type' id='viewFinds' value='View Finds'/></td>
<td><input type='button' name='type' id='delete' value='Delete' /></td> 
```

还有你的 JS：

```
//please, be careful with the selector.
//it could be that it is not matched at all,
//hence jQuery will not bind to anything
//and nothing will ever fire!
//note the #delete for Id! .delete is for a class!!!!!!
$('.item #delete').click(function () {

    var elem = $(this).closest('.item');

    $.confirm({
        'title': 'Delete Confirmation',
        'message': 'Delete?',
        'buttons': {
            'Yes': {
                'class': 'blue',
                'action': function () {
                    //elem.slideUp();
                    $.ajax({
                        url: 'locationsaction.php',
                        type: 'post',
                        data: {
                            lid: "VALUE",
                            type: 'Delete' //you need to add the type here!
                        },
                        success: function () {
                            img.parent().fadeOut('slow');
                        }
                    });

                }
            },
            'No': {
                'class': 'gray',
                'action': function () {} // Nothing to do in this case. You can as well omit the action property.
            }
        }
    }); 
```

此外，您可以*重复*地向表单的 onsubmit 事件添加错误返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:31:12.037

## 防止重定向

看起来您正在获得重定向，因为表单仍在提交。您需要通过在单击事件的开头添加以下行来防止表单提交。

```
$('#btn-delete').click(function(e) {
    e.preventDefault();
    var elem = $(this).closest('.item'); 
```

调用`e.preventDefault()`将[阻止浏览器的默认操作发生](http://api.jquery.com/event.preventDefault/)，在这种情况下提交表单。

## 更改按钮的处理方式

据我所知`locationsaction.php`，根据按钮的值重定向到页面。

一个更好的方法是创建一个到每个页面的链接并将其`lid`作为参数传递。这是链接页面的标准方式，同时为下一页提供一些上下文。

**注意：**您需要将每个页面更改为使用`$_GET['lid']`而不是`$_SESSION['lid']`.

**注意 2：**在页面中间“关闭”和“打开”PHP 标签是完全有效的。在下面提供的代码中，我关闭了 PHP，以便我可以编写 HTML，并在完成后重新打开 PHP。

```
<?php // this line is for syntax highlighting
/* display row for each user */
$theID = $row['locationid'];
?>
  <tr>
    <td style="text-align: center"><?php echo $row['locationname'] ?></td>
    <td><a href="addimages.php?lid=<?php echo $theID ?>">Images</a></td>
    <td><a href="addfinds.php?lid=<?php echo $theID ?>">Add Finds</a></td>
    <td><a href="locationfinds.php?lid<?php echo $theID ?>">View Finds</a></td>
    <td>
      <form method="post" action="deletelocation.php" class="delete-record">
        <input type="hidden" name="lid" value="<?php echo $theID ?>" />
        <input type="submit" value="Delete Record" />
      </form>
    </td>
  </tr>
<?php 
```

唯一一次我没有使用链接是当我链接到`deletelocation.php`文件时。这是因为[您在修改数据库时绝不应该使用 GET 请求](http://thinkvitamin.com/code/the-definitive-guide-to-get-vs-post/)。

使用 POST 请求是防止[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的一种简单方法。

## 重命名表列名称

我注意到你的列名`locationid`并`locationname`没有任何类型的分隔。我建议将这些重命名为`location_id`and `location_name`。

这也适用于您的文件名。您可以包含下划线或破折号来分隔文件名中的单词。我通常使用下划线，因为我认为它读起来更好，但这是您的选择。

## POST 直接到删除页面

因为您使用的是 AJAX，所以您可以`deletelocation.php`直接指定 url。根据我上面建议的更改，没有理由保留`locationsaction.php`.

```
$.ajax({
    url: 'deletelocation.php',
    type: 'post',
    data: $(this).parent().serialize(),
    success: function () {
        img.parent().fadeOut('slow');
    }
}); 
```

我还更改了数据的传递方式。[.serialize()](http://api.jquery.com/serialize/)将自动从中获取位置 id`input[name=lid]`并创建一个查询字符串，如`lid=1`.

* * *

**编辑#1**

> 如果可能，我想保留位置操作脚本。我的很多页面都依赖于 SESSION id，如果不重新编写大量代码，就无法使用 Get。

你使用`locationsaction.php`和会话的方式不是我做的方式。但这是您的应用程序结构，您可以随心所欲地构建它。

> 我可以将按钮类型更改为按钮而不是提交，保持 id 相同，以便 JS 代码选择它吗？

您可以将类型更改为按钮，但是当 javascript 被禁用时，它不会提交表单。通常，您编写页面以在没有 JS 的情况下工作，然后编写 JS 来修改浏览器的默认行为。

> 您能否也帮我确认一下您的 AJAX 是否只是替换了我的代码的顶部？

不，我只是更改了您设置`lid`. 你仍然需要包含所有包裹它的 JS，我只是不想粘贴整个代码块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T06:22:01.533

实际上，我在您的表单上没有找到任何 id btn-delete 按钮。如果您使用的删除按钮出现在表单中，请更改**此**

```
<input type="submit" value="Delete Record" /> 
```

**到**

```
<input type="button" id="btn-delete" value="Delete Record" /> 
```

或者您使用任何其他输入然后确保它类型不是提交例如

```
<input type="submit" value="Your button" /> 
```

应该

```
<input type="button" value="Your button" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:11:52.020

**您可以使用 jquery ui 对话框进行确认：**

```
 <script type="text/javascript">
    $('#btn-delete').click(function (e) {
        e.preventDefault();
        var elem = $(this).closest('.item'), formSerialize = $(this).parent().serialize(), objParent = $(this).parent();
        $('<div></div>').appendTo('body')
                    .html('<div><h6>Delete?</h6></div>')
                    .dialog({
                        modal: true, title: 'Delete Confirmation', zIndex: 10000, autoOpen: true,
                        width: 'auto', resizable: false,
                        buttons: {
                            Yes: function () {
                                $.ajax({
                                    url: 'deletelocation.php',
                                    type: 'post',
                                    data: formSerialize//,
                                    //success: function (data) {
                                    //    objParent.slideUp('slow').remove();
                                    //}
                                });

                                //Or
                                objParent.slideUp('slow').remove();

                                $(this).dialog("close");
                            },
                            No: function () {
                                $(this).dialog("close");
                            }
                        },
                        close: function (event, ui) {
                            $(this).remove();
                        }
                    });

    });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T22:48:03.140

**问题与 JavaScript 无关**。

根本问题似乎是您的表单的操作是删除记录（无论您在 JavaScript 中编码了什么）。将表单的操作更改为“。” 和 onsubmit="return false" （阻止表单自行执行任何操作）。现在将您的 $.confirm 附加到相应的按钮应该可以工作。

退后一步——您根本不需要表单（或提交按钮）。这样您就不必与表单的默认行为作斗争。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T18:50:47.433

尝试使用 e.stopPropagation();

```
$('#btn-delete').click(function(e) {
    e.preventDefault();
    e.stopPropagation(); 
```

# c++ - 如何重新根植通过 malloc() 分配的树

> ID：11493050
> 
> 赞同：0
> 
> 时间：2012-07-15T15:12:30.593
> 
> 标签：c++, tree, alloc

下面是一个程序，它首先从中序和前序构建二叉树，然后找到包含最大平衡树的节点。

我的两个功能都是正确的`Buildtree`。`IsBalanced`

我正在从`input.txt`文件中读取顺序和预购；所以在第一次迭代中，我的程序显示正确的输出，但在第二次迭代中，它不起作用。

我认为删除root有问题。

运行上述程序后，您将得到我正在谈论的问题：

```
/* Tree - Program to find largest Balanced tree in given tree
@Date : 15 July 2012

This program works only for one input sample
*/
#include<stdio.h>
#include<stdlib.h>
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
using namespace std;
struct node
{
  char data;
  struct node* left;
  struct node* right;
};

/* Prototypes for utility functions */
int search(string arr, int strt, int end, char value);
struct node* newNode(char data);

int isBalanced(struct node *root, int* height,int *max_size_ref, bool *is_bal_ref,char *val)
{
  /* lh = Height of left subtree ,rh = Height of right subtree */   
  int lh = 0, rh = 0;  
 int left_flag=0;
 int right_flag=0;
  /* l will be true if left subtree is balanced 
    and r will be true if right subtree is balanced */
  int l = 0, r = 0;

  if(root == NULL)
  {
    *height = 0;
    *is_bal_ref = 1;
     return 0;
  }

  l = isBalanced(root->left, &lh, max_size_ref,is_bal_ref, val);

  if (*is_bal_ref == 1)
  left_flag=true;

  r = isBalanced(root->right,&rh, max_size_ref,is_bal_ref, val);
  if (*is_bal_ref == 1)
  right_flag = true;

  *height = (lh > rh? lh: rh) + 1;
  if((lh - rh >= 2) || (rh - lh >= 2))
  *is_bal_ref= 0;

  /* If this node is balanced and left and right subtrees 
    are balanced then return true */
  if(left_flag && right_flag && *is_bal_ref ){
  *is_bal_ref= 1;
  if (l + r + 1 > *max_size_ref)
  {  
        *max_size_ref = l + r+ 1;
        *val = root->data;}
        return l + r + 1;
  }
  else
  {
    //Since this subtree is not Balanced, set is_bal flag for parent calls
     *is_bal_ref = 0; 
     return 0;
  }
}

struct node* buildTree(string in, string pre, int inStrt, int inEnd)
{
  static int preIndex = 0;

  if(inStrt > inEnd)
     return NULL;

  /* Pick current node from Preorder traversal using preIndex
    and increment preIndex */
  struct node *tNode = newNode(pre[preIndex++]);

  /* If this node has no children then return */
  if(inStrt == inEnd)
    return tNode;

  int inIndex = search(in, inStrt, inEnd, tNode->data);

  /* Using index in Inorder traversal, construct left and
     right subtress */
  tNode->left = buildTree(in, pre, inStrt, inIndex-1);
  tNode->right = buildTree(in, pre, inIndex+1, inEnd);

  return tNode;
}

/* Function to find index of value in arr[start...end]
   The function assumes that value is present in in[] */

int search(string arr, int strt, int end, char value)
{
  int i;
  for(i = strt; i <= end; i++)
  {
    if(arr[i] == value)
      return i;
  }
}

/* Helper function  */
struct node* newNode(char data)
{
  struct node* node = new (struct node);
  node->data = data;
  node->left = NULL;
  node->right = NULL;

  return(node);
}

/* This function is for inorder traversal */
void printInorder(struct node* node)
{
  if (node == NULL)
     return;

  printInorder(node->left);

  printf("%c ", node->data);

  printInorder(node->right);
}

// function to free binary tree
void freeT(struct node* t ) //get root
{
    if( t == NULL ) 
        return;
    if( t->left != NULL )
        freeT( t->left );
    if( t->right != NULL )
        freeT( t->right);

    delete(t);       /* free(t) if c */

    return;
}

/* Driver program to test above functions */
int main()
{

 string line , inorder;
 ifstream myfile ("input.txt");
 ofstream myofile ("output.txt" );
 if (myfile.is_open())
 { 
   int len=0;
   char data=NULL;
   int height=0;
   int max_size_ref=0;
   bool is=false;
   int size=0;
   struct node *root = NULL;
   while ( myfile.good() )
    {
      getline (myfile,line);
      //cout << line << endl;
      inorder=line;
      getline (myfile,line);
      //cout << line << endl;

      len = line.size();
      //cout<<"len="<<len;

      root= buildTree(inorder, line, 0, len - 1);

      data=NULL;
      height=0;
      max_size_ref=0;
      is=false;
      size=isBalanced(root, &height ,&max_size_ref, &is, &data);
      if(data!=NULL)
      {
      myofile<<data;
      myofile<<"\n";
      //std::cout<<data;
      }
      else
      {
      myofile<<-1;
      myofile<<"\n";
      }
      //printf("\n Inorder traversal of the constructed tree is \n");
      //printInorder(root);
      getchar();
      //freeT(root);
      //root=NULL;
   }
    myfile.close();
    myofile.close();
  }

  //getchar();
  return 0;
} 
```

首先使用包含以下内容的 input.txt 运行该程序并查看 output.txt

```
FDBGEHAC
ABDFEGHC 
```

然后运行上面的程序

```
 FDBGEHAC
    ABDFEGHC
    FDCEBAJHGI
    ABCDFEGHJI 
```

现在看到 output.txt

你会得到我真正想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:29:08.053

当使用树或层次结构（集合）时，您应该将“根”变量保留在“while”循环或其他节点之外。

这是一个伪代码，并非完全有效的代码，只是一个示例：

```
int main()
{
   ...

   struct node *root = NULL;

   while ( myfile.good() )
   {

     // load tree, maybe change root

   } // while

   ...
} // int main() 
```

正如您已经检查过的那样。“根”是一个指向结构的指针，即使这可能会改变哪个节点是根，你应该有一个外部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:43:15.417

看来您在 buildTree 中有一个由第二组数据触发的错误。该错误导致无限递归，您会得到“stackoverflow”:-)并且您的程序崩溃。您可以通过将第 3 行和第 4 行与第二个 input.txt 示例数据的第 1 行和第 2 行交换来确认这一点，然后您的程序将在第一次迭代时终止。您可以使用 gdb 运行您的程序并捕获 stackoverflow。您还可以在 buildTree 中放置一个 print 语句，并会看到它陷入了无限递归。

# java - box2d 身体通过其他身体

> ID：11493052
> 
> 赞同：2
> 
> 时间：2012-07-15T15:12:37.400
> 
> 标签：java, android, mobile, box2d

我的游戏中有两个对象：球和星星
球是静态或动态的物体。

对于明星：
我需要知道明星何时与球碰撞，
**但它需要穿过球并且不受碰撞的影响**

我该怎么做？
谢谢
socksocket

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:42:36.347

您想使用[传感器 (6.3)](http://www.box2d.org/manual.html#_Toc258082972)。

这是一个关于它们[的很好的教程。](http://www.iforce2d.net/b2dtut/sensors)

# java - 使用 JAXB 注释绑定 XML

> ID：11493053
> 
> 赞同：1
> 
> 时间：2012-07-15T15:12:47.017
> 
> 标签：java, jaxb

我有以下 XML 格式：

```
 <repositories>
     <set>
       <id>1</id>
       <name>First</name>
       <spec>data</spec>
     </set>
    <set>
       <id>2</id>
       <name>INFO</name>
       <spec>main</spec>
    </set>
      .
      .
 </repositories> 
```

我创建以下 package-info.java

```
 @javax.xml.bind.annotation.XmlSchema (
 elementFormDefault=XmlNsForm.QUALIFIED,
 xmlns = {}
 )

package website.model;

import javax.xml.bind.annotation.XmlNsForm; 
```

以及以下课程：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Repositories {

@XmlElement
private ListofRepositories repositories;

public ListofRepositories getRepositories() {
    return repositories;
}

public void setRepositories(ListofRepositories repositories) {
    this.repositories = repositories;
}

} 
```

包装集合

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ListofRepositories {

private List<Sets> set;

public List<Sets> getSet() {
    return set;
}

public void setSet(List<Sets> set) {
    this.set = set;
}

} 
```

和数据：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Sets {

private Long id;
private String name;
private String spec;

//get set

} 
```

我不知道为什么这不起作用。响应始终为空。我用 Java 和 JAXB 注释实现了类似的过程，但我从来没有遇到过这种问题。有谁知道出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:26:34.700

对于上述 xml，您需要以下类结构：

```
@XmlRootElement(name="repositories")
@XmlAccessorType(XmlAccessType.FIELD)
public class Repositories {

@XmlElement
private List<Sets> set;

//getter and setter

}

@XmlAccessorType(XmlAccessType.FIELD)
public class Sets {

private Long id;
private String name;
private String spec;

//getter and setter

} 
```

但是，根据您的类结构，您将获得以下 xml：

```
<Repositories>
  <repositories>
    <set>
      <id></id>
      <name></name>
      <spec></spec>
    </set>
    <set>
      <id></id>
      <name></name>
      <spec></spec>
    </set>
    .
    .
    .
  </repositories>
</Repositories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:16:30.207

使用 JAXB，您还可以从 xsd 文件生成这些类 - 并根据 xsd 检查传入的 xml（这将显示它**为什么**不接受它）

# cuda - CUDA线程同步

> ID：11493054
> 
> 赞同：0
> 
> 时间：2012-07-15T15:12:55.400
> 
> 标签：cuda

我对同步有点困惑。

1.  使用`__syncthreads`你可以在一个块中同步线程。这个，（使用`__syncthreads`）必须只与共享内存一起完成？或者使用`__syncthreads`具有最佳性能的共享内存？
2.  通常，只有当且仅当它们存在于同一个线程块中时，线程才能安全地相互通信，对吗？那么，为什么我们不总是使用共享内存呢？因为不够大？而且，如果我们不使用共享内存，我们如何确保结果是正确的？
3.  我有一个有时运行正常的程序（我得到结果），有时我得到'nan'结果而不改变任何东西。这可能是同步的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:17:25.033

1.  的使用`__syncthreads`不涉及共享内存，它只确保块内的同步。但是当您希望线程通过共享内存共享数据时，您需要同步线程。

2.  我们并不总是使用共享内存，因为它非常小，而且如果使用不当，它会降低您的应用程序的速度。这是由于在错误地处理共享内存时潜在的**银行冲突。**此外，最近的架构（从 2.0 开始）在与缓存相同的硬件区域中实现共享内存。因此，一些经验丰富的 CUDA 开发人员建议不要使用共享内存，而仅依赖缓存机制。

3.  可。如果您想知道它是否是死锁，请尝试增加您正在使用的块数。如果是死锁，您的 GPU 应该会冻结。如果不是，请发布您的代码，我们会更容易回答；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:24:45.153

__syncthreads() 和共享内存是独立的想法，你不需要一个使用另一个。我想到的使用 __syncthreads() 的唯一要求是所有线程最终必须到达代码中的点，否则您的程序将简单地挂起。

至于共享内存，是的，您可能看不到它一直在使用，这可能是大小问题。据我了解，共享内存在所有块之间分配。例如，使用 1kb 的共享内存和 100 个块来启动内核将需要 100kb，这超过了 SM 上可用的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:06:27.330

1.  `shared memory`和虽然`__syncthreads()`是独立的概念，但它们往往是齐头并进的。否则，如果线程独立运行，则无需使用`__syncthreads()`.

2.  有两个方面限制使用`shared memory`： 1）。的大小`shared memory`是有限的 2）。为了获得最佳性能，您需要在使用时避免银行冲突`shared memory`。

3.  这可能是由于缺乏`__syncthreads()`. 有时，使用`shared memory`without`__syncthreads()`可能会导致不可预知的结果。

# xml - SVG xml：空间属性问题

> ID：11493057
> 
> 赞同：5
> 
> 时间：2012-07-15T15:13:08.777
> 
> 标签：xml, svg, xml-parsing, whitespace, inkscape

我有一个 SVG 文档。在文档中有一个带有一些文本和一个属性`flowRoot`的元素 。`text-align:center`但是文本不会居中，因为它在开头包含一些空格。我不知道这些空格是从哪里来的，但是 `xml:space="preserve"`文档中有一个属性。删除此属性后，空格消失了。谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T23:26:31.020

[xml:space](http://www.xmlplease.com/xml/xmlspace/)用于处理仅空白文本节点。空白来自空白字符，例如制表符、换行符或回车符，它们位于标签之间以提供格式。删除该 `preserve`值等同于将其更改为`default`，这会折叠或替换[空白字符](http://www.jenitennison.com/blog/node/43)，具体取决于 XML 处理器。有一个[相关的问题](https://stackoverflow.com/a/11376005/1113772)，有更详细的解释。

**参考**

*   [标记语言中的空格](http://www.jenitennison.com/2007/07/22/whitespace-in-markup-languages.html)

# optimization - 优化按位操作内核

> ID：11493059
> 
> 赞同：0
> 
> 时间：2012-07-15T15:13:24.253
> 
> 标签：optimization, cuda, bit-manipulation

我有以下代码，它逐步遍历一串位并将它们重新排列成 20 字节的块。我正在使用 32*8 块，每个块有 40 个线程。然而，在我的 GT630M 上，这个过程大约需要 36 毫秒。我可以做任何进一步的优化吗？特别是关于删除最内层循环中的 if-else。

```
__global__ void test(unsigned char *data)
{
    __shared__ unsigned char dataBlock[20];
    __shared__ int count;
    count = 0;

    unsigned char temp = 0x00;

    for(count=0; count<(streamSize/8); count++)
    {
        for(int i=0; i<8; i++)
        {
            if(blockIdx.y >= i)
                temp |= (*(data + threadIdx.x*(blockIdx.x + gridDim.x*(i+count)))&(0x01<<blockIdx.y))>>(blockIdx.y - i);
            else
                temp |= (*(data + threadIdx.x*(blockIdx.x + gridDim.x*(i+count)))&(0x01<<blockIdx.y))<<(i - blockIdx.y); 
        }
        dataBlock[threadIdx.x] = temp;  
            //do something

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:57:03.803

目前尚不清楚您的代码试图完成什么，但有几个明显的机会是：

1) 如果可能，使用 32 位字而不是无符号字符。

2) 使用 32 的倍数的块大小。

3）条件代码可能不会像您预期的那样花费您。您可以通过使用 --cubin --gpu-architecture sm_xx 进行编译（其中 xx 是目标硬件的 SM 版本）进行检查，并在生成的 cubin 文件上使用 cuobjdump --dump-sass 来查看生成的程序集。您可能必须修改源代码以将公共子表达式放样到单独的变量中，和/或使用三元运算符 ? : 提示编译器使用谓词。

# php - PHP获取浏览器：令人困惑的输出

> ID：11493062
> 
> 赞同：5
> 
> 时间：2012-07-15T15:13:40.227
> 
> 标签：php, browser

我有一个包含用户网络浏览器信息的列表。该列表由 PHP 通过用户需求调查生成。输出如下所示：（示例）：

*   Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0）
*   Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/535.19 (KHTML, 像 Gecko) Chrome/18.0.1025.152 Safari/535.19
*   Mozilla/5.0（兼容；MSIE 9.0；Windows NT 6.1；Trident/5.0）
*   Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；.NET CLR 2.0.50727）
*   Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0
*   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19
*   Opera/9.80 (Windows NT 6.0; U; da) Presto/2.10.229 版本/11.62
*   Mozilla/5.0 (iPad; CPU OS 5_0_1 像 Mac OS X) AppleWebKit/534.46 (KHTML, 像 Gecko) 版本/5.1 Mobile/9A405 Safari/7534.48.3
*   Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 像 Mac OS X) AppleWebKit/534.46 (KHTML, 像 Gecko) 版本/5.1 Mobile/9B179 Safari/7534.48.3
*   Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0

哪个是实际的网络浏览器？根据PHP手册，应该是[父]、[平台]、[浏览器]、[版本]，但是为什么Safari和Chrome排成一排，为什么括号内会出现“MSIE”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:18:18.973

这些东西标识了用户代理。但它看起来像每个平台或布局有点不同。

我不知道您想对它们做什么，但也许这会有所帮助；[http://www.useragentstring.com/](http://www.useragentstring.com/)

他们还有一个 API，您可以使用它获取您想要的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:19:36.263

第一部分意味着它与 Mozilla 5.0 兼容——它的存在是出于历史原因并且不再有实际用途，一些浏览器也列出了它们支持的其他引擎。然后是平台、浏览器和内部版本号/修订版。

您可能希望使用`get_browser`它来帮助解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:18:16.060

从 PHP 的[`get_browser()`](http://php.net/manual/en/function.get-browser.php)文档中读到：

对于类似**Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3**的输出，将获取以下信息：

```
[browser_name_regex] => '^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$'
[browser_name_pattern] => 'Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*'
[parent] => 'Firefox 0.9'
[platform] => 'WinXP'
[browser] => 'Firefox'
[version] => 0.9
[majorver] => 0
[minorver] => 9
[cssversion] => 2
[frames] => 1
[iframes] => 1
[tables] => 1
[cookies] => 1
[backgroundsounds] =>
[vbscript] =>
[javascript] => 1
[javaapplets] => 1
[activexcontrols] =>
[cdf] =>
[aol] =>
[beta] => 1
[win16] =>
[crawler] =>
[stripper] =>
[wap] =>
[netclr] => 
```

# c++ - 创建 std::iostream 适配器

> ID：11493063
> 
> 赞同：4
> 
> 时间：2012-07-15T15:13:45.213
> 
> 标签：c++, iostream, std

我想创建一个`iostream`适配器类，它可以让我即时修改写入流或从流中读取的数据。适配器本身应该`iostream`允许对第三方代码真正透明。

`StreamEncoder`派生自的类的示例`std::ostream`：

```
// External algorithm, creates large amounts of log data
int foo(int bar, std::ostream& logOutput);

int main()
{
    // The target file
    std::ofstream file("logfile.lzma");
    // A StreamEncoder compressing the output via LZMA
    StreamEncoder lzmaEncoder(file, &encodeLzma);
    // A StreamEncoder converting the UTF-8 log data to UTF-16
    StreamEncoder utf16Encoder(lzmaEncoder, &utf8ToUtf16);

    // Call foo(), but write the log data to an LZMA-compressed UTF-16 file
    cout << foo(42, utf16Encoder);
} 
```

据我所知，我需要创建一个新`basic_streambuf`的派生类并将其嵌入到`basic_ostream`子类中，但这似乎相当复杂。

有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:19:35.777

奇怪的是，至少因为事情真的要工作，这些都不应该直接涉及 iostreams 和/或 streambufs。

我会将 iostream 视为媒人类。iostream 有一个 streambuf，它为某种外部数据源/接收器提供缓冲接口。它还具有处理所有格式的语言环境。iostream 只不过是让这两个人一起玩得很好的操场监督员（可以这么说）。由于您正在处理数据格式，因此所有这些都（或应该）在语言环境中处理。

但是，语言环境并不是单一的——它由许多`facet`s 组成，每个 s 都专门用于数据格式化的一个特定部分。在这种情况下，您可能关心的部分是`codecvt`facet，它用于（几乎完全）在从 iostream 读取/写入到 iostream 的数据的外部和内部表示之间进行转换。

然而，无论好坏，一个语言环境一次只能包含*一个*codecvt 方面，而不是像您正在考虑的那样一连串。因此，您真正需要/想要的是一个包装类，它提供一个 codecvt 作为其外部接口，但允许您在 I/O 期间链接一些要对数据执行的任意转换集。

对于 utf 到 utf 的转换，Boost.locale 提供了 utf_to_utf 函数，以及 codecvt 封装代码，所以做这部分的转换简单明了。

以免有人建议用 ICU 来做这些事情，我要补充一点，Boost.Locale 几乎是 ICU 的包装，所以这或多或少是相同的答案，但形式对 C++ 更友好（而 ICU本身就很像 Java，而且对 C++ 几乎是公然敌对的）。

事情的另一面是编写 codecvt facet 给一个相当简单的任务增加了很多复杂性。过滤流缓冲区（例如）通常*更*容易编写。它仍然没有你想的那么简单，但也没有 codecvt 方面那么糟糕。正如@Flexo 已经提到的，Boost iostreams 库已经包含一个过滤流缓冲区，它可以进行 zip 压缩。对 lzma（或 lzh、算术等压缩）进行大致相同的操作相对容易，至少假设您具有易于使用的压缩功能（您基本上只是为它们提供输入缓冲区，它们提供的缓冲区为结果）。

# gradle - Gradle 不包含传递依赖

> ID：11493064
> 
> 赞同：1
> 
> 时间：2012-07-15T15:13:45.770
> 
> 标签：gradle, transitive-dependency, spring-test-mvc

我正在尝试使用[spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)在我的小应用程序中测试控制器。由于我使用 gradle 作为构建工具，因此我向它添加了依赖项，如下所示：

```
testCompile 'org.springframework:spring-test-mvc:1.0.0.M1' 
```

它成功检索 spring-test-mvc，并编译测试。但是执行测试失败了，因为它似乎不包括像 mvc test 这样的瞬态依赖。

除其他外，它抱怨找不到

```
org.springframework.mock.web.MockHttpServletRequest 
```

这是 spring-test.jar 的一部分，它作为依赖项包含在 spring-test-mvc s pom.xml [https://github.com/SpringSource/spring-test-mvc/blob/master/pom.xml中](https://github.com/SpringSource/spring-test-mvc/blob/master/pom.xml)

我可以通过在构建文件中明确包含依赖项来解决该问题：

```
testCompile 'org.springframework:spring-test:3.1.1.RELEASE' 
```

但它只是被下一个问题所取代。我试图明确要求瞬态依赖：

```
testCompile ('org.springframework:spring-test-mvc:1.0.0.M1') {
        transitive = true
    } 
```

但这并不能改变任何事情。

所以问题是：如何让 gradle 在类路径中包含传递依赖项。

注意：传递依赖似乎在测试之外工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:00:21.347

这是 POM 的问题。[http://repo.springsource.org/libs-milestone/org/springframework/spring-test-mvc/1.0.0.M1/spring-test-mvc-1.0.0.M1.pom](http://repo.springsource.org/libs-milestone/org/springframework/spring-test-mvc/1.0.0.M1/spring-test-mvc-1.0.0.M1.pom)没有声明任何依赖。

# stack - 剥削的艺术——exploit_notesearch.c

> ID：11493066
> 
> 赞同：1
> 
> 时间：2012-07-15T15:13:58.170
> 
> 标签：stack, buffer-overflow, exploit

我有一个关于exploit_notesearch 程序的问题。

该程序仅用于创建我们最终使用 system() 函数调用的命令字符串，以利用包含缓冲区溢出漏洞的 notesearch 程序。commandstr 看起来像这样： **./notesearch Nop-block|shellcode|repeated ret（将在 nop 块中跳转）。**

现在是实际问题：在exploit_notesearch 程序中通过以下行计算重新地址：

ret = (unsigned int) &i-offset;

那么为什么我们可以使用在**exploit_notesearch**程序的主堆栈帧底部的**i变量**的地址来计算将保存在notesearch程序本身的溢出缓冲区中的**ret地址，所以****在一个完全不同的 stackframe**，并且必须在 nop 块中包含一个地址（在同一个缓冲区中）。

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T01:04:46.417

> 这将保存在notesearch程序本身的溢出缓冲区中，因此在完全不同的堆栈帧中

只要系统使用虚拟内存，就会`system()`为易受攻击的程序创建另一个进程，并且假设没有堆栈随机化，两个进程在函数启动时将具有几乎相同的`esp`(以及`offset`)值，假设`main()`该漏洞利用是在被攻击的机器上编译的（即带有易受攻击的notesearch）。
选择变量的地址`i`只是为了了解帧基的位置。我们可以改用这个：

```
unsigned long sp(void)         // This is just a little function
{ __asm__("movl %esp, %eax");} // used to return the stack pointer

int main(){

esp = sp(); 
ret = esp - offset; 

//the rest part of main()

} 
```

因为变量`i`将位于与 相对恒定的距离上`esp`，我们可以使用`&i`代替`esp`，这并不重要。

`ret`如果系统不使用虚拟内存，则要获得近似值会困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:57:58.807

堆栈以先进后出的方式分配。i 变量的位置在顶部的某个位置，假设它是 0x200，而返回地址位于较低的地址 0x180 中，因此为了确定将返回地址放在哪里，并为shellcode，攻击者必须得到差值，即：0x200 - 0x180 = 0x80 (128)，所以他将其分解如下，++，返回地址是4个字节，所以我们只剩下48个字节才能到达分割。这就是它的计算方式和我给出的近似参考点的位置。******

# python - 在 python 2.7 中，信息不会从 twitter 写入文本文件

> ID：11493068
> 
> 赞同：1
> 
> 时间：2012-07-15T15:00:33.593
> 
> 标签：python, database, twitter, tweepy

我有一个 python 项目，我试图使用 Python 2.7 从 IDLE 运行当我运行程序时，确实会按照我的意愿创建一个文本文件，但没有写入任何信息，我不明白为什么会这样. 我通过在我的 Ubuntu 12.04 LTS 笔记本电脑上按 IDLE 中的 F5 键将它作为一个模块运行。

这是代码：

```
import time
import MySQLdb
import tweepy
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream

# Go to http://dev.twitter.com and create an app.
# The consumer key and secret will be generated for you after
consumer_key=" # Omitted "
consumer_secret=" # Omitted "

# After the step above, you will be redirected to your app's page.
# Create an access token under the the "Your access token" section
access_token=" # Omitted "
access_token_secret=" # Omitted "

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)

api = tweepy.API(auth)

# If the authentication was successful, you should
# see the name of the account print out
print api.me().name

class StdOutListener(StreamListener):
        """ A listener handles tweets are the received from the stream.
        This is a basic listener that just prints received tweets to stdout.

        """
        def on_data(self, data):
            print data
            return True

        def on_error(self, status):
            print status

if __name__ == '__main__':
        l = StdOutListener()

        stream = Stream(auth, l)    
        stream.filter(track=['#google']) 
```

如果有人想在 github 上与我一起工作，我在 github 上的文件： [stocktwitterdb.py](https://github.com/spsanderson/pull-status)

可以在 github 上找到使用 tweepy 的流式传输示例： [tweepy streaming.py](https://github.com/tweepy/tweepy/blob/master/examples/streaming.py)

现在我在 shell 中遇到了一些事情，我想将它们放入数据库或文本文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:31:24.463

好吧，这看起来像是一个很好的例子，说明为什么做一个 bare 是个坏主意`try/except`。

首先，如果在打印过程中确实发生了任何事情，则不`UnicodeDecodeError`会将任何内容写入您的文件，因为这部分代码将被跳过。

其次，如果发生任何其他异常，您甚至不会注意到它，因为您会默默地捕获（并忽略）所有异常。

所以至少做

```
except UnicodeDecodeError:
    print "Record skipped!" 
```

并查看可能发生的其他（如果有）异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:55:34.163

```
import time
import MySQLdb
import tweepy
from textwrap import TextWrapper
from getpass import getpass

qParam = "Twitter"

def __init__(self, target):
    super(StockTweetListener, self).__init__();
    self.target = target

with open('results.txt', 'w') as f:
    while True:
        stream = tweepy.Stream(username, password, StockTweetListener(target), timeout=None);
        stream.filter(None, stock_list)
target.truncate()

def debug_print(text):
    """Print text if debugging mode is on"""
    if settings.debug:
        print text

class StockTweetListener(tweepy.StreamListener):

    status_wrapper = TextWrapper(width=60, initial_indent=' ', subsequent_indent=' ')

    def on_status(self, status):
        try:
            # print 'Status : %s' %(self.status_wrapper.fill(status.text))
            print '\nStatus : %s' %(status.text)            
            print '\nAuthor : %s' %(status.author.screen_name)
            print '\nDate/Time : %s' %(status.created_at)
            print '\nSource : %s' %(status.source)           
            print '\nGeo : %s' %(status.geo)
            print '\n\n\n-----------------------------------------------------------------------------\n\n\n'

            l1 = '\nStatus : %s' %(status.text)            
            l2 = '\nAuthor : %s' %(status.author.screen_name)
            l3 = '\nDate/Time : %s' %(status.created_at)
            l4 = '\nSource : %s' %(status.source)           
            l5 = '\nGeo : %s' %(status.geo)
            l6 = '\n\n\n-----------------------------------------------------------------------------\n\n\n'

            target.write(l1)
            target.write(l2)
            target.write(l3)
            target.write(l4)
            target.write(l5)
            target.write(l6)                                    

        except UnicodeDecodeError:
            # Catch any unicode errors while printing to console
            # and just ignore them to avoid breaking application.
            pass

    def on_error(self, status_code):
        print 'An error has occured! Status code = %s' % status_code
        target.close()
        return True # keep stream alive

    def on_timeout(self):
        print 'Snoozing Zzzzzz'
        target.close()

def main():
    username = raw_input('Twitter username: ')
    password = getpass('Twitter password: ')
    stock = raw_input('Name of Stocks(comma seperated): ')
    stock_list = [u for u in stock.split(',')]

    stream = tweepy.Stream(username, password, StockTweetListener(target), timeout=None)
#    follow_list = None
    stream.filter(None, stock_list)

if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        target.close()
        quit() 
```

这会产生错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:38:23.363

您需要进行的更改有些混乱，所以我将在此处发布一个希望修复的版本，以及一些关于为什么事情会这样的评论。

```
import time
import MySQLdb # also not currently used
import tweepy
from textwrap import TextWrapper # not used currently
from getpass import getpass

# define the format for messages here to avoid repetition
OUT_STR = '''
Status : %(text)s
Author : %(author)s
Date/Time : %(date)s
Source : %(source)s
Geo : %(geo)s

-----------------------------------------------------------------------------

'''

class StockTweetListener(tweepy.StreamListener):
    def __init__(self, target):
        super(StockTweetListener, self).__init__();
        self.target = target
        # status_wrapper = TextWrapper(width=60, initial_indent=' ',
        #                             subsequent_indent=' ')
        # This isn't used in the current code. But, if you were going
        # to use it, you'd need to assign it to self.status_wrapper;
        # otherwise the variable would be local to this __init__ method
        # and inaccessible from anything else.

    def on_status(self, status):
        try:
            msg = OUT_STR % {
                'text': status.text,
                'author': status.author.screen_name,
                'date': status.created_at,
                'source': status.source,
                'geo': status.geo,
            }
            print msg
            self.target.write(msg)
            # use self.target here. self is one of the paramaters to this
            # method and refers to the object; because you assigned to its
            # .target attribute before, you can use it here.

        except UnicodeDecodeError:
            # Catch any unicode errors while printing to console
            # and just ignore them to avoid breaking application.
            print "Record Skipped"

    def on_error(self, status_code):
        print 'An error has occured! Status code = %s' % status_code
        return True # keep stream alive

    def on_timeout(self):
        print 'Snoozing Zzzzzz'

def main():
    username = raw_input('Twitter username: ')
    password = getpass('Twitter password: ')
    stock = raw_input('Name of Stocks(comma seperated): ')
    stock_list = [u for u in stock.split(',')]
    follow_list = None # ??? you don't seem to define this variable

    # open results.txt here and name it f locally. once code flow leaves
    # the with statement, in this case only through an exception happening
    # that jumps you out of the while loop, the file will be closed.
    with open('results.txt', 'w') as f:
         while True:
             stream = tweepy.Stream(
                            username, password,
                            StockTweetListener(f), # passes the file to __init__
                                                   # as the "target" argument
                            timeout=None)
             stream.filter(follow_list, stock_list)

if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        quit() 
```

# java - 套接字文件传输：接收器卡在从缓冲区读取/写入存储

> ID：11493079
> 
> 赞同：3
> 
> 时间：2012-07-15T15:15:00.773
> 
> 标签：java, android, sockets, inputstream, file-transfer

```
static void sendFile(Socket socket, File file) throws IOException {

    File testFile = new File( Environment.getExternalStorageDirectory().toString()+"/DCIM/Camera/Test.jpg");
    byte [] buffer = new byte[(int)testFile.length()];
    FileInputStream fis = new FileInputStream(testFile);
    BufferedInputStream bis = new BufferedInputStream(fis);
    Log.d(DebugTag, "Trying to read testFile from storage into buffer");
    bis.read(buffer,0,buffer.length); 
    Log.d(DebugTag, "Read testFile into buffer");
    OutputStream os = socket.getOutputStream();
    Log.d(DebugTag, "Trying to write testFile from buffer into output stream");
    os.write(buffer, 0, buffer.length);
    Log.d(DebugTag, "Wrote testFile from buffer into output stream");
    os.flush();
    Log.d(DebugTag, "Outputstream flushed");
}

static void receiveFile(Socket socket) throws IOException {

    InputStream is = socket.getInputStream();
    String receivedFileDirectory = Environment.getExternalStorageDirectory().toString()+"/Pictures/receivedFile.jpg";
    File receivedFile = new File(receivedFileDirectory);
    //check if directory exists, otherwise create it
    if (receivedFile.exists()) {
        Log.d(DebugTag, "Filename at destination already exists");
    } else if (!receivedFile.exists()) {
        Log.d(DebugTag, "Filename at destination does not exist, trying to create it!");
        receivedFile.createNewFile();
        Log.d(DebugTag, "Created file!");
    }

    Log.d(DebugTag, "Preparing file reception. Destination:"+receivedFileDirectory);
    OutputStream os = new FileOutputStream(receivedFileDirectory);
    Log.d(DebugTag, "established outputstream to file directory");
    byte[] buffer = new byte[2048];
    int length;
    Log.d(DebugTag, "Trying to read inputstream into buffer and write file to destination");
    while ((length = is.read(buffer)) >0 ) {
        os.write(buffer,0,length);
    }
    Log.d(DebugTag, "File received.");
    os.flush();
    os.close();
    is.close();
    Log.d(DebugTag, "Closed in and out streams");

} 
```

发件人文件似乎工作正常，我收到每条日志消息，直到“输出流被刷新”。在接收方，一切似乎都很顺利，直到代码到达 while 循环：我得到的最后一个日志消息总是“尝试将输入流读入缓冲区并将文件写入目标”，而不是“收到文件”和以下消息. 奇怪的是：我收到了测试文件并可以打开它（虽然需要几秒钟 - 不知道这是否适用于 android）。 **为什么代码卡在while循环中的任何线索？**

**第二个问题：**这是我的第一个 Android/Java 应用程序。这段代码可以通过套接字发送和接收文件吗？即使文件变大（高达 >100MB）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:08:35.450

如果连接的另一端正常关闭（或在错误时抛出异常），那只`is.read(buffer)`会返回零，所以你缺少的是`socket.close()`发送端。

`os.flush()`在这里还不够，因为 TCP 不知道您何时完成发送数据。

# java - Java中限制泛型二叉搜索树类型参数的混淆解释

> ID：11493081
> 
> 赞同：4
> 
> 时间：2012-07-15T15:15:09.933
> 
> 标签：java, generics, tree, binary-search-tree, comparable

我是泛型（以及 Java 和 Stack Overflow）的新手，我正在学习的教科书中有一点讨论了泛型二叉搜索树的实现（摘录如下）。

> Comparable 接口是通用的，所以让我们考虑在搜索树中存储以下类型的元素：
> 
> <T 扩展可比性<T>>
> 
> 这仍然会导致问题。假设 Dog 和 Cat 都是 Mammal 类的子类，并且 Mammal 类实现了 Comparable 接口。现在，如果我们创建一个存储 Mammal 对象的二叉搜索树，那么可以添加 Dog 和 Cat，但实际上并不能相互比较。因此，如果以这种特定方式使用此解决方案，则与使用 Comparable 的非泛型版本存在相同的问题。一个更全面的解决方案，虽然在智力上不那么令人满意，但是将泛型类型编写为：
> 
> < T 扩展可比性< ? 超级T>>
> 
> 该声明将元素的可比性限制为 T 的任何超类。

所以我明白为什么类型参数需要是`Comparable< T>`，但是这本书声称如果`Mammal`s 的树包含尝试相互调用该`compareTo()`方法的不同子类型，这可能会带来问题。好吧，如果树中`Cat`and对象的引用类型是，那么它们不会调用's方法（being ），使其成为有效比较（仅在级别上）吗？`Dog``Mammal``Mammal``compareTo()``Comparable< Mammal>``Mammal`

我不明白有什么区别`Comparable< ? super T>`，因为那不是一回事，除非如果`Mammal`s 不是`Comparable`，那么它会退回到`Comparable`像 class 或其他东西这样的超`Animal`类？

我可能遗漏了一些东西，比如一些令人讨厌的类型擦除后果或一些会导致比较无法像我想的那样工作的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:45:02.607

好的，所以你明白这`<T extends Comparable<T>>`适用于这样的类：

```
class Mammal extends Comparable<Mammal> 
```

现在你有一个子类`Mammal`, `Cat`: `class Cat extends Mammal`。由于继承`Cat`也实现了 ，并且正如您所说，由于它继承自`Comparable<Mammal>`的方法，它可以与所有哺乳动物（当然包括猫）进行比较。`compareTo(Mammal)``Mammal`

但现在的问题是，`Cat`绑定不工作`<T extends Comparable<T>>`，因为`Cat`不实现`Comparable<Cat>`。您无法通过`Cat`实现来解决此问题`Comparable<Cat>`，因为您只能实现具有一个类型参数的接口。

但是从概念上讲，对 的列表进行排序是没有问题的`Cat`，因为`Cat`s 可以与其他`Cat`s 进行比较（它们可以与所有哺乳动物进行比较，这更普遍；但重点是它们可以与猫进行比较）。所以问题是我们的界限太严格了。

`<T extends Comparable<? super T>>`解决了这个问题，并允许`Cat`使用。回想一下 PECS 规则——生产者`extends`消费者`super`。好吧，Comparable 是消费者而不是生产者，因为您将类型 T 的参数传递给它的`compareTo`方法（消费），但没有方法需要返回类型 T（生产）。因此，`super`通配符是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:35:31.210

对不起，重写这个让我更清楚

考虑接口

```
< T extends Comparable<T> > 
```

然后考虑你的子类 Cat

```
Cat extends Comparable<Cat> 
```

如果有像 Dog 这样的其他类，这会破坏二叉搜索树中的很多东西，因为 Comparable 需要两个相同类型的。猫应该看起来像这样

```
Cat extends Comparable<Animal> 
```

作者将其更改为

```
< T extends Comparable<? super T> > 
```

所以现在我们可以添加对象

```
Cat extends Comparable<Animal> 
```

因为进入 Comparable 的参数必须是超类而不是类本身。所以它可以是哺乳动物 -> 动物 -> 对象，但不能是字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:31:44.760

**重点是这个。** 您选择的类应该实现一个 Comparable 接口，其参数为**It Self**，或者它可以是任何其他**将 Base 类**作为可比较参数的超类。

# php - 查询返回意外结果

> ID：11493106
> 
> 赞同：1
> 
> 时间：2012-07-15T15:19:36.217
> 
> 标签：php, sql, postgresql, operator-precedence

我觉得这个搜索查询没有像我想象的那样工作。我想确定唯一选择的项目是那些`ksisoldby`与. 用s 和s指定的其他字段是缩小选择范围的可能方式。`ILIKE``$user``AND``OR`

```
"SELECT 
id,
status,
customer_id,
shipping_address_id,
order_number,
reference,
ship_via_id,
order_date :: date,
due_date :: date,
created,
sales_tax,
freight,
taxable,
nontaxable,
job_name,
order_description,
ship_to_name,
ship_to_address1,
ship_to_address2,
ship_to_city,
ship_to_state,
ship_to_zipcode,
name,
address1,
address2,
city,
state,
zipcode,
act_ship_date,
ksisoldby
FROM sales_orders 
WHERE ksisoldby ILIKE '".$user."'
AND (order_description ilike 
'%".implode("%' AND order_description like '%", $search)."%')
OR (order_number ilike 
'%".implode("%' AND order_number like '%", $search)."%')
OR (name ilike 
'%".implode("%' AND name like '%", $search)."%')
OR (reference ilike 
'%".implode("%' AND name like '%", $search)."%')
ORDER BY order_number DESC"; 
```

我是否正确地做到了这一点，是我的数据设置不正确，还是这些`AND`和/或`OR`语句覆盖了该`WHERE`子句？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:33:02.727

这里的关键字是[**运算符优先级**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-PRECEDENCE)。`AND`之前绑定`OR`。

```
WHERE ksisoldby ILIKE '".$user."'
AND (
     order_description ilike '%".implode("%'
     AND order_description like '%", $search)."%')
  OR order_number ilike '%".implode("%'
     AND order_number like '%", $search)."%'
  OR name ilike '%".implode("%'
     AND name like '%", $search)."%'
  OR reference ilike '%".implode("%'
     AND name like '%", $search)."%'
    ) 
```

`WHERE`子句中的所有项目都被评估为一个布尔结果。如果你

> 想要确定唯一选择的项目是 ksisoldby 与 $user 相同 [...] 的项目

那么您必须将`OR`'ed 标准包装在括号中，否则他们将提供**替代方法**来获得资格。

另一方面，您可以`AND`像我演示的那样删除 'ed 对周围的括号。

我添加了（语法上不相关的）空格和换行符以使其更清晰。

* * *

顺便说一句 - 正如评论中提到的那样 - 如果您不想要表格中的所有列，列出您想要的列（就像您拥有它一样）是最佳方式。

* * *

我还会考虑使用[**准备好的语句**](http://www.postgresql.org/docs/current/interactive/sql-prepare.html)（或带参数的服务器端函数）而不是构建一个大查询字符串来**防止 SQL 注入**。您的框架可能提供了一些方法来做到这一点。或者您可以手动进行。

在您继续构建查询字符串时，请使用它[`quote_literal()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)来清理用户输入。

# c# - 为什么这个多维数组会出现“对象引用错误”？

> ID：11493120
> 
> 赞同：2
> 
> 时间：2012-07-15T15:21:31.193
> 
> 标签：c#, multidimensional-array, nullreferenceexception

这是我的班级人数

```
 public class pax
    {
        public pax();

        [SoapElement(DataType = "integer")]
        public string age { get; set; }
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string paxType { get; set; }
        public string title { get; set; }
    } 
```

我已经声明了以下数组

```
pax[][]rooms=new pax[3][];

        rooms[0][0].paxType = "Adult";
        rooms[0][1].paxType="Adult";
        rooms[0][2].paxType="Child";
        rooms[0][2].age = "6"; 
```

它抛出错误对象引用未设置为对象的实例。在线的

```
 rooms[0][0].paxType = "Adult"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:22:58.290

这只会给你数组。

```
pax[][]rooms=new pax[3][]; 
```

要实例化对象，您必须`new`：

```
rooms[0][0] = new pax(); 
```

您可能来自 C++，并且可能认为对象数组会自动创建所有对象，但这里的情况并非如此——您必须创建每个对象，因为它是`null`在您创建之前。

编辑：

由于您在这里有锯齿状数组：

```
pax[][]rooms=new pax[3][];
rooms[0]=new pax[3];
rooms[0][0]=new pax(); 
```

锯齿状数组 = 数组数组。如果您需要多维（二维数组），那就另当别论了，您会说：

```
pax[,] rooms=new pax[3,3]; 
```

例如...

# android - 在android中获取页面的html

> ID：11493121
> 
> 赞同：0
> 
> 时间：2012-07-15T15:21:41.380
> 
> 标签：android, html

> **可能重复：**
> [是否可以从 WebView 获取 HTML 代码](https://stackoverflow.com/questions/3479833/is-it-possible-to-get-the-html-code-from-webview)

我正在尝试制作一个需要从网站获取 html 代码并通过代码查找图像的应用程序。我现在所在的位置在模拟器中给了我一个 html 代码，但是当我在我的计算机上打开网站的源代码时，它是一个不同的代码。

```
public String getInternetData(String adresse) throws Exception{
    BufferedReader in = null;
    String data = null;
    try{
        HttpClient client = new DefaultHttpClient();
        URI website = new URI(adresse);
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String l = "";
        String nl = System.getProperty("line.separator");
        while ((l = in.readLine()) !=null){
            sb.append(l + nl);
        }
        in.close();
        data = sb.toString();
        return data;
    }finally{
        if (in != null){
            try{
                in.close();
                return data;
            }catch (Exception e){
                e.printStackTrace();
            }
        }
    }
} 
```

我在模拟器中获得的代码以需要启用 JavaScript 和 Cookies 结束。如果这是我的问题，我该如何解决？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:40:31.827

1.  有时问题出在 UserAgent 中（服务器可以发送简化/移动版本的页面来查看您的 useragent 字符串）。尝试在您的代码中使用与浏览器相同的用户代理
2.  尝试使用 HtmlUnit“无头浏览器”框架来执行 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:27:46.287

请参阅此[SO 线程上的](https://stackoverflow.com/questions/3479833/is-it-possible-to-get-the-html-code-from-webview)[Aymon Fournier](https://stackoverflow.com/users/325081/aymon-fournier)的回答，

```
private String getDownloadButtonOnly(String url){
    HttpGet pageGet = new HttpGet(url);

    ResponseHandler<String> handler = new ResponseHandler<String>() {
        public String handleResponse(HttpResponse response) throws ClientProtocolException, IOException {
            HttpEntity entity = response.getEntity();
            String html; 

            if (entity != null) {
                html = EntityUtils.toString(entity);
                return html;
            } else {
                return null;
            }
        }
    };

    pageHTML = null;
    try {
        while (pageHTML==null){
            pageHTML = client.execute(pageGet, handler);
        }
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        Pattern pattern = Pattern.compile("<h2>Direct Down.+?</h2>(</div>)*(.+?)<.+?>", Pattern.DOTALL);
        Matcher matcher = pattern.matcher(pageHTML);
        String displayHTML = null;
        while(matcher.find()){
            displayHTML = matcher.group();
        }

    return displayHTML;
}

    @Override
    public void customizeWebView(final ServiceCommunicableActivity activity, final WebView webview, final SearchResult mRom) {
        mRom.setFileSize(getFileSize(mRom.getURLSuffix()));
        webview.getSettings().setJavaScriptEnabled(true);
        WebViewClient anchorWebViewClient = new WebViewClient()
        {

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
                String downloadButtonHTML = getDownloadButtonOnly(url);
                if(downloadButtonHTML!=null && !url.equals(lastLoadedURL)){
                    lastLoadedURL = url;
                    webview.loadDataWithBaseURL(url, downloadButtonHTML, null, "utf-8", url);
                }
            } 
```

# sql - 在任意（数组）中选择任意（数组）

> ID：11493123
> 
> 赞同：1
> 
> 时间：2012-07-15T15:22:08.057
> 
> 标签：sql, postgresql-9.1

我有一个 bigint[] 列：

```
person
------
id | name  | other_information
------------------------------
 1 | Zé    | {1,2,3}
 2 | João  | {1,3}
 3 | Maria | {3,5} 
```

我需要在 other_information 中选择 2 或 5 人。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:30:16.057

```
select *
from person
where 2 = ANY(other_information)
 or 5 = ANY(other_information) 
```

但是，不建议使用数组，因为它会导致架构非规范化。

来自[PostgreSQL 文档](http://www.postgresql.org/docs/9.1/static/arrays.html)：

> 提示：数组不是集合；搜索特定的数组元素可能是数据库设计错误的标志。考虑使用一个单独的表，其中每个项目将是一个数组元素。这将更容易搜索，并且对于大量元素可能会更好地扩展。

# java - 如何将 JPanel 中的值传递给 netbeans 中的 JFrame

> ID：11493125
> 
> 赞同：0
> 
> 时间：2012-07-15T15:22:39.333
> 
> 标签：java, netbeans

我的 JPanel 中有以下方法：

```
public void detectionTime(){
      detectStartTime = System.currentTimeMillis();
      long detectDuration = System.currentTimeMillis() - detectStartTime;
      performance.lblDetectTime.setText(detectDuration + "ms");
  } 
```

我想在标签中打印或输出detectDuration 变量，即JFrame 中的lblDetectTime。我创建了一个 JFrame 实例作为“性能”，并且我还在 JFrame 中创建了一个 JPanel 实例以访问该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:49:51.963

为什么通过，当你可以直接设置它............

如果您仍然想通过它...然后**更改 JPanel 中 detectionTime() 方法的返回类型。**

```
public String detectionTime(){

detectStartTime = System.currentTimeMillis();
long detectDuration = System.currentTimeMillis() - detectStartTime;
return detectDuration + "ms";

 } 
```

**再次编辑：**

从扩展 JFrame 的类（即您的容器）中执行此操作

`IblDetectTime.setText(MyPanel.detectionTime());`

# iphone - 如何在数组中存储和检索 CMSampleBufferRef？

> ID：11493129
> 
> 赞同：3
> 
> 时间：2012-07-15T15:23:15.593
> 
> 标签：iphone, objective-c, avfoundation

我正在使用 AVFoundation 框架将资产读取为 CMsampleBufferRef 并将其更改为图像并将其存储在数组中，我如何将 CMSampleBufferRef 直接存储到数组中。

```
 I referred CFMutableArray to add, But I am not able to read from that array. 
```

预先感谢...

# html - 如何编辑 Wordpress 菜单以制作两行菜单？

> ID：11493130
> 
> 赞同：3
> 
> 时间：2012-07-15T15:23:21.893
> 
> 标签：html, css, wordpress, navigation

我正在尝试编辑我的 wordpress 页面，以使页面顶部的每个菜单项长两行，顶行是一个单词（即：Home、About 等），每个项目下方的另一行是不同字体（即：“关于”下方的“了解我们”）。

这是我的意思的一个例子：http: [//images.sixrevisions.com/2009/04/13-26_css_block_menu.png](http://images.sixrevisions.com/2009/04/13-26_css_block_menu.png)

我知道这是通过使用 Wordpress 菜单屏幕上的“描述”框以某种方式实现的，并且我已经检查了“显示描述”框，但我无法让它正确显示。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:11:11.743

您可以通过创建一个扩展 Walker_Nav_Menu 类的自定义 walker 来做到这一点 - 这是一个很好的教程；

[http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output](http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output)

# c# - 访问计算机中的文件

> ID：11493133
> 
> 赞同：0
> 
> 时间：2012-07-15T15:23:58.227
> 
> 标签：c#

我正在用 C# 语言在 Windows 窗体中制作防病毒扫描程序。使用当前代码，程序可以打开一个文件夹并开始扫描其中的文件。When the folder selected is 'my computer' or 'user profiles' it is showing a lot of exceptions and it stops scanning at that moment. 我希望有人向我展示如何解决这个问题。

例外情况是：

`System.IO.IOException`，`System.UnauthorizedAccessException`等等。

我想向您展示代码的某些部分。该图像可在此处获得。我想在这里粘贴代码，但我的机构严格禁止抄袭。

[![点击查看大图](../Images/3f6bc920626d2c32c1c50e01a452900a.png)](https://i.stack.imgur.com/MeJnA.jpg)

请帮我解决我的情况。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:31:31.027

您无法扫描“我的电脑”或“用户配置文件”，因为它们不是目录，它们只是标准目录树浏览器控件中的节点，旨在允许用户访问某些类型的位置。

如果您希望他们能够扫描此类文件夹，您需要检测他们是否选择了一个并提供您自己的逻辑来枚举要扫描的位置。

稍微切下一点，我真诚地希望你不打算使用这个项目来替代真正的 AV 包。构建反恶意软件系统并非易事，尤其是当您考虑需要阻止的攻击类型时。如果这只是为了学习目的，那很好，但不要指望自制设计能提高安全性。一个合适的 AV 包需要一个包含检测签名（静态散列、模糊散列、数据模式）、内核模式组件、内存扫描器和行为分析的大型数据库。自己构建这一切是很困难的。

（来源：我自己写了一个，作为一个有趣的项目！）

# java - 在休眠中订购

> ID：11493135
> 
> 赞同：0
> 
> 时间：2012-07-15T15:24:19.770
> 
> 标签：java, hibernate

我有这个豆子

```
public class Advertisement{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "pkid", nullable = false)
    @Basic(fetch = FetchType.EAGER)
    private long adPkId;

    @Size(max = 50, message = "{long.value}")
    @Column(name = "Name", unique = true, nullable = false, length = 50)
    private String name;

    @Size(max = 255, message = "{long.value}")
    @Column(name = "Description", length = 255)
    private String description;
} 
```

我想按 id 返回所有数据顺序

```
getCurrentSession().createCriteria(Advertisement.class)
                .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
                .addOrder(Order.asc("adPkId")).list(); 
```

表中的数据采用从 1 到 7 的 ID 列表中返回的数据不是返回 ID 的顺序 (3 - 4 - 5 - 6 - 7 - 1 - 2)

如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:36:20.350

问题来自

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "advertisement", orphanRemoval = true, cascade = CascadeType.REMOVE)
    @OrderBy("name")
    private Set<test> test= new HashSet<test>(0); 
```

我将 fetch = FetchType.EAGER 更改为懒惰

# css - 这种样式在 CSS 中来自哪里？

> ID：11493140
> 
> 赞同：2
> 
> 时间：2012-07-15T15:25:14.733
> 
> 标签：css, internet-explorer

我在 IE9 中有以下提交按钮：

![我的提交按钮](../Images/f7ef2eb3a59411e9290afac090a46371.png)

我使用的 CSS 如下：

```
.button,
input[type='button'],
input[type='submit'] {
    text-decoration: none;
    background: #eee;
    color: #89a9d1;
    padding: 4px 10px;
    font-weight: bold;

    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#fff', endColorstr='#eee')";
    background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#eee));
    background: -moz-linear-gradient(top,  #fff,  #eee);
} 
```

根据我在此页面上的了解：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)这应该可以工作......我无法弄清楚蓝色来自哪里。如果我取消选择影响此元素的所有样式，使用 IE 开发人员工具栏它仍然显示看起来像我附加的图像。

有人对可能导致这种情况的原因有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:37:41.760

ColorZilla 不会生成具有三位十六进制颜色值的渐变，因为它们在 IE 的过滤器中的解释不同（事实上，我认为它们是无效的颜色字符串）。您的代码中的这种差异导致您的渐变在 IE 中显示为蓝色。

您需要将十六进制颜色扩展到六位数字才能正确解释：

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#ffffff', endColorstr='#eeeeee')"; 
```

# php - mysql错过数据输入

> ID：11493147
> 
> 赞同：-1
> 
> 时间：2012-07-15T15:26:48.150
> 
> 标签：php, mysql, database

我正在尝试对mysql进行压力测试：

```
 for($i=0;$i<30000;$i++)
{
 mysql_connect("localhost","admin","admin");
 mysql_select_db("magic");
 mysql_query(INSERT INTO Persons
 VALUES   (4,'9999999999999999999999999999999999999999999999999999999999999999999999999999999999'));
 mysql_close(); 
} 
```

它只插入 25985，而不是更多。表架构：id = 主要 int，内容 = 长文本

Tt 给了我`error cannot connect to mysql`，即使我增加了最大连接数。

任何解决方案将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:41:33.790

“连接量太他妈高了！” 开玩笑！

连接数由计算机上可用的 RAM 数量提供。因此，如果您有千兆位的 RAM，您可以拥有 10k 连接，这取决于您的系统、允许连接的 RAM 等。

在这里检查：[MYSQL：连接太多](http://dev.mysql.com/doc/refman//5.5/en/too-many-connections.html)

> MySQL 可以支持的最大连接数取决于给定平台上线程库的质量、可用 RAM 量、每个连接使用多少 RAM、每个连接的工作负载以及所需的响应时间。

为什么你同时需要这么多连接？一个连接和 30.000 个插入应该可以，但不能同时进行 30.000 个连接。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:42:00.090

这可能是因为您在每次循环迭代时打开和关闭连接。在大多数实现中，使用缓存以便不频繁地重新建立连接。

```
mysql_connect("localhost","admin","admin");
mysql_select_db("magic");
for($i=0;$i<30000;$i++)
{
    mysql_query(INSERT INTO Persons
    VALUES   (4,'9999999999999999999999999999999999999999999999999999999999999999999999999999999999'));
}
mysql_close(); 
```

# c# - 创建用于进行通用数据库调用的方法

> ID：11493148
> 
> 赞同：0
> 
> 时间：2012-07-15T15:26:48.673
> 
> 标签：c#, .net, database

我正在尝试编写一些应该独立于数据库的方法，以便可以使用相同的代码而不管数据库（Oracle、SQL 服务器）

我为此使用 IDbConnection 和 IDbCommand 接口。在调用该过程时，它会给出错误，说非法变量名称/编号错误。虽然我可以直接调用内联查询（直接将查询指定为命令文本）这是示例调用..

```
using (IDbConnection connection = this._providerFactory.CreateConnection())
                {
                    // create the command object using the conneciton object
                    IDbCommand command = connection.CreateCommand();
                    //start
                    command.CommandType = CommandType.StoredProcedure;
                    command.CommandText = "GetResponse";

                   IDbDataParameter menuParam = this._providerFactory.CreateParameter();
                   menuParam.DbType = DbType.String;
                   menuParam.Direction = ParameterDirection.Input;
                   menuParam.ParameterName = "@V_USER_ID";
                   command.Parameters.Add(menuParam);

                   IDbDataParameter menuParam2 = this._providerFactory.CreateParameter();
                   menuParam2.Size = 20;

                   menuParam2.DbType = DbType.String;
                   menuParam2.Size = 20;
                   menuParam2.Direction = ParameterDirection.Output;
                   menuParam2.ParameterName = "@V_ROLE_ID";
                   menuParam2.Value = DBNull.Value;
                   command.Parameters.Add(menuParam2);
                    //end

                    command.ExecuteNonQuery();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:59:21.327

此处未提供任何值（并删除 @ 符号）：

```
 IDbDataParameter menuParam = this._providerFactory.CreateParameter(); 
               menuParam.DbType = DbType.String; 
               menuParam.Direction = ParameterDirection.Input; 
               menuParam.ParameterName = "V_USER_ID"; 
               command.Parameters.Add(menuParam); 
```

# android - 实现安卓游戏成就系统的最佳方式

> ID：11493149
> 
> 赞同：0
> 
> 时间：2012-07-15T15:26:58.660
> 
> 标签：android, achievements

我目前正在尝试为我的游戏实现成就系统，但找不到更好的方法来实现一些复杂的系统，例如：玩家收集了 x 个硬币，在至少 x 秒内完成关卡，杀死 x 个敌人等......请问你能分享你的经验吗？

其次，我们为什么不直接在本地实现成就系统，而不是使用像 Scoreloop 或 OpenFeint 这样的服务器？或者换一种说法，使用服务器管理玩家成绩有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:39:59.803

首先回答你的第二个问题，使用服务器的好处是与其他人共享信息，这样他们就可以“竞争”或“赞美”其他领导者。您可能还有一个网站和社区来建立追随者，而排行榜（有点像这个有积分的网站）有助于推动更多的活动和粘性/忠诚度。

第一个问题，你可能会看一下像 Redis 这样的快速存储解决方案中的 Set 结构或 Ordered Set 结构。查看这些文章以获取示例：

*   参见：[http ://blog.agoragames.com/blog/2011/01/01/creating-high-score-tables-leaderboards-using-redis/](http://blog.agoragames.com/blog/2011/01/01/creating-high-score-tables-leaderboards-using-redis/)
*   SEE：[如何清理 redis 中的非活动玩家？](https://stackoverflow.com/questions/9578420/how-to-clean-up-inactive-players-in-redis)

您需要问自己的问题是您是想在设备上还是在客户端/服务器上完成这一切，这将决定您的解决方案。你可以有一个发生的“事件”列表，每个事件都有一个“类型”（即收集硬币，快速完成关卡，杀死敌人），这可以在服务器或设备上。然后，您可以有规则来测试“规则”并计算这些事件以解锁更多级别、功能，或者可能只有在您的服务器上发布对该用户的一些认可（仅在重要时节省网络带宽）。

# mongodb - 唯一投票，禁用投票

> ID：11493157
> 
> 赞同：1
> 
> 时间：2012-07-15T15:28:02.577
> 
> 标签：mongodb, database-design, relational-database

我正在构建简单的 Web 应用程序，用户可以在其中投票。检查用户是否已经投票的最快方法是什么。我对关系数据库和基于文档的数据库（mongodb，...）都感兴趣

我的想法很少，但我相信它们可以改进：

**关系数据库**

为投票创建一个单独的表：

```
|userid|articleid| 
```

在增加文章投票之前，检查是否有一行同时包含用户 ID 和文章 ID。我们有两个查询。可以通过触发器来改善这一点吗？例如：

```
|useridarticleid| unique column 
```

投票前在应用程序端生成 useridarticleid。尝试插入 useridarticleid。如果字段是新的，触发器将触发，它将增加我们在文章中的投票列。

**基于文档**

这有点棘手。因此，文档结构如下：

```
{
  "id": "123",
  "content": "something",
  "num_votes": 2,
  "votes" : [
               "userid1",
               "userid2"
             ]
} 
```

第一个“查询” - 检查用户 ID 是否在投票数组中。第二个“查询” - 如果不是，则增加 num_votes。

又是两个查询。所以我认为我们可以改变这一点，但我真的不知道它是否会提高性能：

在投票数组中插入用户 ID。当用户想要检查文章“计数”数组中的投票时。但我认为性能可能会下降，因为如果流量很高，计算每篇文章有点浪费。想象一下这里的 Reddit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:38:10.050

在关系数据库中 |userid|articleid| 将两个字段都用作主键是最好的方法。

在第二个中，您还可以考虑将投票放在用户文档中还是文章文档中。

无论如何，我建议您真正专注于创建设计，以后更改所有这些决定很容易。

不同的设计方式，喜欢“很多用户同时在同一篇文章”或“很多用户在不同的文章中”等......直到你看到真正的用法，你才会'没有足够的信息来决定哪种方法效果最好和最快……所以创建一些你可以轻松适应以后学到的任何信息的东西。

顺便说一句：您也可以考虑不同步计算选票。我记得一篇文章（我找不到），其中提到你的投票数字实际上并不“准确”......他们对当前投票进行了估计，并在后台工作线程中计算了实际数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:49:30.243

实际上，它在文档数据库中要简单得多。您的文档结构非常适合它。

```
{
  "id": "123",
  "content": "something",
  "num_votes": 2,
  "votes" : [
               "userid1",
               "userid2"
             ]
}

db.collection.update(
        {id:"123", votes:{$ne:"userid"}},
        {$push:{"votes":"userid"},$inc:{"num_votes":1}}
); 
```

这将*自动更新记录 id=123，将 userid 添加到投票者列表中，并且***仅**当 userid 不在此文档的投票列表中时，才会将投票增加一。

所以只有一个查询和一个更新——它们实际上是相同的操作。

# iphone - 测试您的 IOS 应用程序 - 对实际应用内购买和最终编辑的最终测试

> ID：11493158
> 
> 赞同：0
> 
> 时间：2012-07-15T15:28:20.253
> 
> 标签：iphone, ios, app-store, software-distribution, ad-hoc-distribution

我终于完成了我的申请，我想我已经准备好了，感谢一路上为我做出贡献的每一个人。现在我要上传我的二进制文件以供审查，我想知道是否有任何最后的调整？我们可以以任何方式在应用内购买上测试我们的应用程序吗？我们可以仅在分发配置中为我的开发人员设备分发吗？

我在我的设备上测试了我的应用程序，但在调试模式下，但我想看看它是如何进行的，因为它会出现在应用商店中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:17:52.670

您可以使用[TestFlight](https://testflightapp.com/)等 beta 测试服务。只需使用分发证书编译您的应用程序，构建并上传到 testflight，并与朋友或同事分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:58:54.313

您可以在沙盒模式下测试应用内购买。在沙盒模式下，交易将是真实的。您可以调试所有方法和事务以及应用程序的功能。成功进行沙盒测试后，您可以轻松转移到真实的交易环境。

# ios - 用于 obj-C 的 google picasa Web API 全部弃用了吗？

> ID：11493159
> 
> 赞同：1
> 
> 时间：2012-07-15T15:28:29.317
> 
> 标签：ios, google-api

我计划允许我的应用程序检索存储在 Picasa 网络相册中的照片，我应该使用什么与 obj-C 兼容的正确 API？看来基于 XML 的 obj-C API 客户端已全部弃用... [https://code.google.com/p/gdata-objectivec-client/downloads/list](https://code.google.com/p/gdata-objectivec-client/downloads/list)

或者，基于 JSON 的 API 不包括相册... [http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)

那么如果我的卑微目标是从 iOS 客户端获取照片，我们现在应该使用什么？

# php - 通过 user1_id 和 newmsg 提交表单发送而不刷新页面

> ID：11493160
> 
> 赞同：0
> 
> 时间：2012-07-15T15:28:30.113
> 
> 标签：php, javascript, ajax, forms

如果不使用 Ajax 刷新页面，我将如何提交以下表单？我需要通过 'toid' 发送 user1_id 和来自 textarea 'newmsg' 的内容。

形式

```
<form action="insert.php" method="POST" class="form_statusinput">
<input type="hidden"  name="toid" value="<?php echo $user1_id ?>">
<span class="w">
<textarea class="input" name="newmsg" id="newmsg" placeholder="Say something" autocomplete="off"></textarea>
</span>
<button type="submit" value="Submit">Feed</button>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:33:02.820

1）在表单中添加一个ID，比如说“myform”。

2）然后您可以从此表单中获取所有字段并使用 AJAX 发送（不要忘记包括 jQuery）：

```
 var form_data = $("#myform").serialize(); 
        $.ajax( 
        { 
            url: 'script.php', 
            type: 'POST', 
            cache: false, 
            data: form_data, 
            success: function(message) 
            { 
                ...
            }, 
            error: function(message) 
            { 
                ...
            } 
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:34:23.767

如果 jQuery 是一个选项，那就很容易了。

请参阅 jQuery.post()：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
// Example: send form data using ajax requests
$.post("test.php", $("#testform").serialize()); 
```

有很多选项取决于您需要对返回值做什么，在这种情况下最好只阅读文档。

# php - WSO2 不支持 XSD

> ID：11493162
> 
> 赞同：0
> 
> 时间：2012-07-15T15:29:05.947
> 
> 标签：php, soap, xsd, wso2

在用了几个小时之后，我已经接近可以真正开始将 WSO 用于 SOAP 服务的地步了，但是我遇到了一个令人不安的方面。

首先关闭服务代码

```
class Order
{
    /** 
     * @var string
     */
    public $item_name;

    /** 
     * @var nonNegativeInteger
     */
    public $amount;

    public function calcPrice()
    {   
        return (float)($this->amount * 5); 
    }   
}

/**
 * Service function getPrice
 *
 * @param object Order $Order
 * @return double $price
 */
function getPrice(Order $Order)
{
    return $Order->calcPrice();
}

// create service in WSDL mode
$service = new WSService(
        array(
            'bindingStyle' => 'rpc',
            'opParams' => array('getPrice' => 'MIXED'),

            // define the actions => operations map
            "actions" => array(
                "http://wsf.local/wsdl_generation/hacked_service.php/getPrice"
                    => "getPrice"),

            // define the class map
            "classmap" => array("Order" => "Order"),

            // define the operations map
            "operations" => array("getPrice" => "getPrice")));

// process client requests and reply 
$service->reply(); 
```

太好了，我可以输入提示 Order 类！让我们来看看 WSDL；WSDL 是使用该`service_name.php?wsdl`方法生成的，因此 WSO 是从上面的服务代码中生成的。

```
<xsd:complexType name="Order">
<xsd:sequence>
<xsd:element name="item_name" type="xsd:string"/>
<xsd:element name="amount" type="xsd:nonNegativeInteger"/>
</xsd:sequence>
</xsd:complexType> 
```

现在看，还有更多好消息；我们对通过服务允许 Order 对象的值有一些严格的要求。

所以当我最终拿到这个并前往 SoapUI 进行测试时，通过任意的 for`item_name`和一个像 5 for 的数字`amount`，输出值 25，太棒了。当我尝试传递对金额无效的 EG 而不是 nonNegativeInteger 时，WSO 强制转换为整数，并且对 getPrice 的调用接收到金额值为 0！

如果我错了，请纠正我，但这不是 XSD 的重点，以防止无效值进入服务代码吗？我可以测试函数内部的值，但是在这里使用 XSD 有什么意义呢？当 SimpleTypes 不验证时，有没有办法配置 WSO 为请求发送错误响应？

# coffeescript - 在类构造函数中解构参数列表 - Coffeescript

> ID：11493163
> 
> 赞同：18
> 
> 时间：2012-07-15T15:29:14.573
> 
> 标签：coffeescript

如果我有一个类，我将许多参数传递给：

```
class Foo

  constructor: (parameters) ->

  @bar = parameters.bar
  @moo = parameters.moo 
```

该类是这样创建的：

```
foo = new Foo(bar: 2, moo: 8) 
```

我的问题是在构造函数中检测传递的变量是否存在以及不设置默认值的最优雅方法是什么。我会在 javascript 中这样做的方式是：

```
this.bar = ( parameters.bar !== undefined ) ? parameters.bar : 10; 
```

其中 10 是默认值。

谢谢你的帮助 ：）

好的答案 - 只是为了总结最好的：

为了检测参数是否存在并在不存在时定义默认值，在 javascript 中是：

```
this.bar = ( parameters.bar !== undefined ) ? parameters.bar : 10; 
```

在咖啡中是：

```
@bar = parameters.bar ? 10 
```

如此优雅和紧凑！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-15T17:49:24.163

您可以使用[存在运算符](http://coffeescript.org/#operators)：

```
class Foo
  constructor: (options = {}) ->
    @bar = options.bar ? 10
    @moo = options.moo ? 20 
```

该构造函数编译为：

```
// Compiled JS.
function Foo(options) {
  var _ref, _ref1;
  if (options == null) {
    options = {};
  }
  this.bar = (_ref = options.bar) != null ? _ref : 10;
  this.moo = (_ref1 = options.moo) != null ? _ref1 : 20;
} 
```

一个等效的替代方法是立即破坏选项对象（因此避免不必要的名称），然后设置默认值以防这些选项未传递：

```
class Foo
  constructor: ({@bar, @moo} = {}) ->
    @bar ?= 10
    @moo ?= 20 
```

由于传递带有选项的对象是 JS 代码中的一种常见模式，因此一些库具有有用的实用函数可以帮助解决此问题。例如，下划线提供了[`_.defaults`](http://underscorejs.org/#defaults)，我认为这会产生非常可读的代码：

```
class Foo
  constructor: ({@bar, @moo} = {}) ->
    _.defaults @, bar: 10, moo: 20 
```

如果你不使用 Underscore，还有[`$.extend`](http://api.jquery.com/jQuery.extend/)（谁不使用 jQuery？）：

```
class Foo
  defaults = bar: 10, moo: 20
  constructor: (options = {}) ->
    {@bar, @moo} = $.extend {}, defaults, options 
```

如果您相信将传递的唯一选项是有效选项，则另一种方法是直接`extend`使用对象（与其他选项相比，这导致 JS 非常少）：`Foo`

```
class Foo
  defaults = bar: 10, moo: 20
  constructor: (options = {}) ->
    $.extend @, defaults, options 
```

最后一种选择是在 中使用默认值，`Foo.prototype`并且仅当它们出现在 options 参数中时才将它们设置为自己的属性：

```
class Foo
  bar: 10
  moo: 20
  constructor: ({bar, moo} = {}) ->
    @bar = bar if bar?
    @moo = moo if moo? 
```

这可以防止所有实例`Foo`具有自己的单独属性，而是在使用默认值时在实例之间共享相同的属性，这通常与方法相同。您也可以`@bar = bar if @bar isnt bar`仅在参数值与默认值不同时分配这些属性。

如您所见，有很多方法可以做到这一点。它们都不是完美的，它们都有其优点和缺点，因此请尝试选择更适合您的需求/口味/无论如何=D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T16:15:16.307

您可以使用运算符执行此`?=`操作：

```
class Foo
  constructor: (parameters) ->
   @bar = parameters.bar
   @bar ?= 10
   @moo = parameters.moo
   @moo ?= 20 
```

如果您不介意传入位置参数而不是哈希，您也可以使用默认参数值非常优雅地执行此操作：

```
class Foo
  constructor: (@bar = 10, @moo = 20) ->

f = new Foo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T16:43:44.987

您可以定义一个默认对象并执行类似的操作..

```
 (parameters = {}) ->
   this[key] = parameters[key] ? defaults[key] for key, value of defaults 
```

但你真的不必经历所有这些。制作默认值的最简单方法就是使用原型继承......

```
class Foo
  bar: 10
  moo: 10
  constructor: (parameters = {}) ->
    this[key] = value for own key, value of parameters 
```

假设上述情况：

```
a = new Foo();
a.bar # => 10
b = new Foo(bar: 50)
b.bar # => 50 
```

除了构造函数之外，您使用 : 定义的每个属性都将成为对象原型上的属性。

类定义转换为这个 JavaScript：

```
Foo = (function() {      
  Foo.prototype.bar = 10;      
  Foo.prototype.moo = 10;
  //etcetc
  return Foo;      
})(); 
```

玩它。希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-06T20:38:34.243

# 还有一种更简单的方法：

```
class Foo
  constructor: (parameters = {}) ->
    {
      @bar = 10
      @moo = 20
    } = parameters 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-31T03:21:47.800

新版本的coffeescript有一个很好的方法来解决这个确切的问题

```
class MyObject
  constructor: ({string1='x', string2='y'} = {}) 
```

它也适用于常规功能

```
myFunction = ({string1='x', string2='y'} = {}) ->
  string1 + string2

console.log myFunction({string1:"a", string2:"b"}) 
# outputs: 'ab'

console.log myFunction() 
# outputs: 'xy' 
```

# interface - rust语言中接口实现的递归调用

> ID：11493164
> 
> 赞同：0
> 
> 时间：2012-07-15T15:29:33.713
> 
> 标签：interface, recursion, implementation, rust

如何从该接口的实现中递归调用我正在实现的接口？

我正在做以下事情：

```
import io::*;
import to_str::*;
enum some_enum {
  foo(~[some_enum]),
  bar
}

impl to_str for some_enum {
  fn to_str() -> str {
    alt self {
      bar { "bar" }
      foo(nest) { "foo" + nest.to_str() } // this line
    }
  }
}

fn main() {
  println(foo(~[bar,bar,bar]).to_str());
} 
```

它在编译时失败

```
user@note ~/soft/mine/rust $ rustc example.rs && ./example 
example.rs:13:32: 13:43 error: failed to find an implementation of interface core::to_str::to_str for some_enum
example.rs:13             foo(nest) { "foo" + nest.to_str() }
                                              ^~~~~~~~~~~ 
```

当然，我可以做类似 FP 的事情：

```
 foo(nest) { "foo" + nest.map(|x| { x.to_str() }).to_str() } 
```

但为什么前一种情况无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:23:26.500

似乎可以使用 using`impl of`而不是`impl`.

`impl`没有`of`像无接口实现这样的行为，不涉及实际的接口。

（确认[http://dl.rust-lang.org/doc/tutorial.html#interface-less-implementations](http://dl.rust-lang.org/doc/tutorial.html#interface-less-implementations)）

# eclipse - 在 pyDev 2.6.0 中丢失了交互式控制台

> ID：11493165
> 
> 赞同：0
> 
> 时间：2012-07-15T15:29:35.307
> 
> 标签：eclipse, pydev

我在 Mac OS X 10.5.8 上运行 eclipse 3.5.2。我只是允许 eclipse 将我更新到 PyDev 2.6.0，突然我无法启动 PyDev 控制台。我正在使用与以前相同的过程（从“控制台”下拉菜单中选择“PyDev 控制台”，然后选择“Python 控制台”按钮），但没有任何反应。我没有在eclipse的其他地方更改任何设置。
有人知道为什么会发生这种情况吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:08:20.187

您的错误日志中有内容吗？PyDev 可能正在使用一些在 Eclipse 3.5 中不可用的 API（它在该版本上的测试肯定没有在最新的 Eclipse 版本中测试那么多）。

# objective-c - 为 TWRequest（使用 ACAccount）设置用户名和密码，以便查看特定用户的主时间线

> ID：11493167
> 
> 赞同：1
> 
> 时间：2012-07-15T15:30:10.580
> 
> 标签：objective-c, ios, twrequest, acaccount

我正在尝试访问特定用户的主页时间线，以便我可以看到用户在登录 Twitter 时会在其时间线上看到的推文。我有用户名和密码，但找不到如何将其链接到 TWRequest。我一直在寻找创建一个 ACAccount 并用它处理 TWRequest，但找不到将其链接到特定用户名和密码的方法。有谁知道如何做到这一点？谢谢。

# joomla - Joomla 2.5，访问组件模板中的模板参数

> ID：11493168
> 
> 赞同：9
> 
> 时间：2012-07-15T15:30:11.497
> 
> 标签：joomla, joomla2.5, joomla-template

在 Joomla 2.5 的组件模板中访问模板参数的正确方法是什么？

Joomla 的早期版本有一些实现，但 2.5 没有。 [http://forum.joomla.org/viewtopic.php?p=2166990#p2166903](http://forum.joomla.org/viewtopic.php?p=2166990#p2166903)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T15:43:55.613

我*认为*这可能是您正在寻找的：

```
$app        = JFactory::getApplication();
$template   = $app->getTemplate(true);
$params     = $template->params;
$variable   = $params->get('variable'); 
```

# java - 哪个选项在 Android 中使用 Intent 更快 - SQLite 索引或 Parcelable 对象？

> ID：11493172
> 
> 赞同：0
> 
> 时间：2012-07-15T15:30:47.973
> 
> 标签：java, android, sqlite, android-intent

我想知道，因为我现在正在使用 SQLite 数据库编写应用程序，也在活动之间发送一些信息。什么是更快更好：

*   使用 SQLite 并发送到 Activity 仅记录（对象）索引并在此 Activity 中打开，并读取数据
*   使用 Parelable 和 Intent 并像这个对象一样发送。在 Activity 中从 Parcelable 对象中读取数据。

我只是在谈论**仅读取对象**时的选项。现在编写、编辑或以任何其他方式修改。

你有什么意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:33:53.720

您需要进行基准测试来验证，但我怀疑使用 Parcelable 更快。它可以完全在内存中完成，不需要刷新到存储。写入 SQLite 需要将数据刷新到存储 SQLite 数据库的任何位置，这可能会花费大量时间。读取也可能很慢。（这就是为什么[`StrictMode`](http://android-developers.blogspot.com/2010/12/new-gingerbread-api-strictmode.html)模式通常会警告 UI 线程上的 SQLite 写入。）

# iphone - 如何在目标 c 中创建自定义异常？

> ID：11493173
> 
> 赞同：6
> 
> 时间：2012-07-15T15:30:56.100
> 
> 标签：iphone, objective-c, ios, macos

我正在尝试在目标 c 中实现类似的目标。

```
@try{
//some code that will raise exception
}
@catch(CustomException e){//How to create this
//catching mechanism
}
@catch(NSException e){
//Generic catch
} 
```

我需要创建 CustomException 类并使用它。您能否帮助我创建此 CustomException 并指导我如何使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-15T15:51:57.983

在 Objective-C 中，异常很少用于像这样的控制流。我猜你有Java（或类似的）背景。

我并不是说您不能编写这样的代码，但是如果您没有完全隔离异常，那么其他人查看您的代码时会感到很奇怪，并且如果其他人的代码使用它也可能会很糟糕它永远不会到达他们的代码。

# 在 Objective-C 中通常是如何完成的

异常用于严重错误。如果错误是预期的（就像你想要的那样`@try`），你应该尝试返回一个`NSError`. 这是一种在 Foundation 和 Cocoa 框架以及第三方框架中都使用的设计模式。例如查看网络、文件读/写或 JSON 代码 ( `JSONObjectWithData:options:error:`)

## 你会做什么

您所做的是在您的方法末尾添加一个可能失败的错误参数（双指针），如下所示：

```
- (MyResultObject *)myMethodThatCouldFailWith:(MyObject *)myObject
                                        error:(NSError **)error; 
```

当某人（您或其他人）使用此方法时*，*如果他们想传递一个 NSError 指针，如果发生错误，该指针将被设置，如下所示：

```
NSError *error = nil; // Assume no error
MyResultObject *result = [self myMethodThatCouldFailWith:myObject
                                                   error:&error];
if (!result) {
    // An error occurred, you can check the error object for more information.
} 
```

请注意`&`错误参数之前的与号 ( )。这意味着您将错误点作为参数发送，以便在有风险的方法中，可以将指针更改为指向一个新`NSError`对象，该对象可以在方法返回后读取。

`NSError`现在，在您可能失败的方法中，如果出现问题（而不是引发异常），您可以将错误设置为新对象。发生错误时返回也很常见，`nil`因为这可能意味着计算无法完成或数据不可靠或不相关。

```
- (MyResultObject *)myMethodThatCouldFailWith:(MyObject *)myObject
                                        error:(NSError **)error {
    // Do something "risky" ...
    MyResultObject *result = [MyResultObject somethingRiskyWith:myObject];

    // Determine if things went wrong
    if (!result) {
        // Set error if a pointer for the error was given 
        if (error != NULL) {
            *error = [NSError errorWithDomain:yourErrorDomain
                                         code:yourErrorCode
                                     userInfo:optionalDictionaryOfExtraInfo];
        }
        return nil;
    }

    // Everything went fine.
    return result;
} 
```

现在，如果错误返回，您可以从您指定的错误代码中识别出哪种错误，您可以在用户信息字典中阅读更详细的信息（您可以在其中添加大量信息）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-15T15:51:46.343

在最简单的情况下，我可以使用...声明一个类

```
@interface CustomException : NSException
@end
@implementation CustomException
@end 
```

...并且代码非常像您发布的内容：

```
 @try{
        @throw [[CustomException alloc] initWithName:@"Custom" reason:@"Testing" userInfo:nil];
    }
    @catch(CustomException *ce){
        NSLog(@"Caught custom exception");
    }
    @catch(NSException *e){
        NSLog(@"Caught generic exception");
    } 
```

# c - 什么是 C 中的相对路径？

> ID：11493176
> 
> 赞同：0
> 
> 时间：2012-07-15T15:31:22.950
> 
> 标签：c, fopen

我现在使用[Visual C++ 2010](https://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_and_64-bit_versions)打开一个 txt 文件。

```
fp = fopen("E:\\CProg\\Huffman\\Debug\\Huffman.txt","r"); //Right
//Wrong
//fp = fopen(".\\Huffman.txt","r");
//fp = fopen("\\Huffman.txt","r");
//fp = fopen("Huffman.txt","r"); 
```

在VB.NET中，我曾经这样写：Application.Startpath & "\"。那么我如何在C中制作它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:42:49.563

相对于什么？在“所有相关平台”上，如果您使用的文件名不是绝对的，它将相对于当前目录进行解析。

以下是针对 Windows 的。

如果您正在编写控制台应用程序，则该应用程序将从当前目录开始，该目录设置为命令提示符显示的任何内容。如果没有进一步的研究，我无法判断 GUI 应用程序的初始当前目录是什么。

如果您希望文件名与安装目录相关，则必须使用 Win32 函数 GetModuleFileNameW() 之类的东西并从那里开始工作（该函数为您提供 exe 文件的路径名；删除最后一个组件以获取目录，并附加您要附加的任何路径）-

没有直接的方式可以说“我希望相对于安装目录使用此文件名”。

# playframework - .flashing 在 Play!2 中有什么作用？

> ID：11493182
> 
> 赞同：4
> 
> 时间：2012-07-15T15:32:00.143
> 
> 标签：playframework, playframework-2.0

有人能解释一下闪光范围是什么吗？.flash() 做什么以及如何使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T16:09:13.700

在您需要临时参数的情况下，粗略闪烁很有用。常见情况是要显示到使用重定向访问的下一页的消息

当您需要工作流的信息部分但您不希望它们成为模板（参数）声明的合同的一部分时，这非常有用。

闪现的信息存储在**未**散列的 cookie 中（因此很清楚），其生命周期仅限于下一个请求 - 之后被丢弃。

使用闪烁的方法是简单地使用闪烁的字符串序列kvp，像这样 Redirect(routes.Application.login()).flashing("error", "You must be logged in")

登录使用要呈现的模板，其中包含 @flash.get("error") map { x => @x }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T05:43:18.193

Flash 通常与重定向一起使用，但与此无关。本质上，Flash 范围的工作方式与 Session 完全相同，但有两个不同之处：

*   只为一个请求保留数据
*   Flash cookie 未签名，因此用户可以对其进行修改。

POST/Redirect/GET 是开始使用刷机的主要原因。

# android - 小部件选择“有时”不显示

> ID：11493187
> 
> 赞同：1
> 
> 时间：2012-07-15T15:33:06.153
> 
> 标签：android, widget

我是 Play 商店中横幅应用程序的开发人员。每隔一段时间，我都会收到一封来自用户的电子邮件，上面写着“*我已经安装了你的应用程序，但它没有显示在小部件中*”。我无法在任何设备或模拟器上重现它，但我确实在朋友的旧 Droid（原版）上目睹过一次。但是，卸载/重新安装修复了它，我无法让它再次这样做（它是一个旧/慢速设备）。

我的应用在市场上已经有将近 2 年的时间了，但我很少得到这个反馈，我的分数是 4.4 星，所以它不是很常见。

还有人知道这个吗？***是 Android 本身***还是我可以在我的代码中做额外的事情。

```
<receiver
            android:name="kenyu73.bannerwidget.BannerWidget"
            android:label="Banner 4x1 (large)" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_1x4" />
        </receiver> 
```

..

```
public class BannerWidget1x4 extends AppWidgetProvider {

    // contains ALL ids on boot, but only the current id when a new banner is created...
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        Logger.d("BANNER", "BannerWidget1x4:onUpdate");

        final int N = appWidgetIds.length;

        for (int i = 0; i < N; i++) {
            Logger.d("BANNER", "BannerWidget1x4:onUpdate -> widgetid " + appWidgetIds[i] + " updated!");
            BannerWidgetBase.updateAppWidget(context, appWidgetManager, appWidgetIds[i]);
        }
    }

    public void onEnabled(Context context) {
        Logger.d("BANNER", "BannerWidget1x4:onEnabled");

    }

    public void onDeleted(Context context, int[] appWidgetIds) {
        Logger.d("BANNER", "BannerWidget1x4:onDeleted -> widgetid " + appWidgetIds[0] + " deleted!");

        BannerWidgetBase.onDeleted(context, appWidgetIds[0]);
    }
} 
```

# java - 将 Java 对象序列化为 XML 字符串

> ID：11493192
> 
> 赞同：0
> 
> 时间：2012-07-15T15:34:55.947
> 
> 标签：java, xml-serialization

我需要将 POJO 序列化为 Documents ，然后将 Document 序列化为字符串。我有以下代码，

```
public static String DOMDocumentToString(Document doc) throws TransformerException
{
    DOMSource domSource = new DOMSource(doc);
    StringWriter writer = new StringWriter();
    StreamResult result = new StreamResult(writer);
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    transformer.transform(domSource, result);
    writer.flush();
    return writer.toString();
}

public static <T> Document objectToDOMDocument (T object) throws ParserConfigurationException, IOException, SAXException
{
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    doc = builder.newDocument();
    ByteArrayOutputStream st = new ByteArrayOutputStream();

    XMLEncoder encoder = new XMLEncoder(st);
    encoder.writeObject(object);
    encoder.close();
    String tmp =  st.toString();
    Document doc = builder.parse(new InputSource(new StringReader(tmp)));
    return doc;
} 
```

除非项目使用 xerces，否则这似乎可行。然后`objectToDOMDocument`返回带有根节点 "document:null" 的 Document 并以at `DOMDocumentToString`失败。`DOMSource node as this type not supported``transformer.transform(domSource, result);`

我知道我可以使用`DocumentBuilderFactory.newInstance(String,ClassLoader)`并传递没有此类问题的工厂名称，但我相信这应该是更好的方法....

感谢您的建议。

# c# - 新手需要随机记录的帮助

> ID：11493194
> 
> 赞同：0
> 
> 时间：2012-07-15T15:35:26.250
> 
> 标签：c#, .net, random, hit

> **可能重复：**
> [从 Linq 到 Sql 的随机行](https://stackoverflow.com/questions/648196/random-row-from-linq-to-sql)

在 .NET 方面，我完全是新手。我有这行代码，它从包含指定系统名称的数据库中提取记录。我可以用相同的系统名称命名多个主题。

如果多个主题包含该系统名称，我希望的是一种随机选择主题的方法。如果只有一个存在，这将显示为现在的样子。用于提取具有指定系统名称的主题的代码如下所示：

```
public virtual Topic GetTopicBySystemName(string systemName){
  if (String.IsNullOrEmpty(systemName)) return null;
  var query = from t in _topicRepository.Table
    where t.SystemName == systemName
  select t;
  return query.FirstOrDefault();
} 
```

我需要改变什么来实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:44:09.873

不是在我可以测试的机器上，而是：

```
Random random = new Random();
int count = query.Count();
if(count <= 1) return query.FirstOrDefault();
return query.Skip(random.Next(0, count)).First(); 
```

# .net - 使用 Context.RewritePath 重写到不同的域

> ID：11493195
> 
> 赞同：4
> 
> 时间：2012-07-15T15:35:30.523
> 
> 标签：.net, vb.net, url-rewriting

这是我关于 SO 的第一篇文章。:) 我的目标是，在应用程序（这是一个现有的 VB.NET 应用程序*）*中，每当遇到对资源的​​请求时，例如：

```
/itemimages/image.png 
```

它被重写为

```
http://example.com/itemimages/image.png 
```

生产站点上有 10GB 的图像，因此对于本地开发，我们只想重写请求，这样我们就不必下载和随机播放大约 10GB 的产品图像。

我在 Application_BeginRequest() 中尝试了以下内容，请记住我正在简化它以说明我遇到的问题：

```
If (url1.IndexOf("itemimages") > 0) Then
    Dim app As HttpApplication = CType(sender, HttpApplication)
    app.Context.RewritePath("https://www.google.com/images/srpr/logo3w.png")
End If 
```

我得到的错误是：

> 'https://www.google.com/images/srpr/logo3w.png' 不是有效的虚拟路径。

请注意 https://www.google.com 中的单个正斜杠，即使我指定了两个斜杠。另外，它明确提到它不是有效的虚拟路径，所以显然我不能在这里指定绝对 URL。

如何将“/itemimages/image.png”请求重写为“http://www.website.com/itemimages/image.png”？我在 C# 中发布这个也是因为无论如何我对这种语言更舒服，并且可能很容易在两者之间转换任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:38:41.127

`Context.RewritePath`使用 ASP.Net 在不同路径下处理请求。
使用外部服务器这样做是没有意义的。

你想要`Response.Redirect`。

# java - Thread 类的 join() 方法是如何工作的？

> ID：11493199
> 
> 赞同：6
> 
> 时间：2012-07-15T15:35:55.990
> 
> 标签：java

考虑以下代码：

```
class ThreadJoinTest{
    public static void main(String[] arguments){
        TimeUnit unit; 
        final Thread taskThread = new Thread(task);
        taskThread.start();
        taskThread.join(unit.millis(timeout));   
     }
} 
```

那么当主线程执行`taskThread.join()`带有超时值的行时，主线程是否有`taskThread`足够的时间来完成它的任务？这是 join 方法的主要目标吗？

如果出现以下情况会发生什么：

1.  `taskThread`在超时期限之前完成它的执行？
2.  如果达到超时但`taskThread`尚未完成执行会怎样？是否`taskThread`有机会完成其任务？
3.  主线程如何知道由于`taskThread`正常完成或达到超时而返回连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T15:40:24.710

1.  `main`完成后将被允许重新开始`taskThread`。
2.  然后`main`将被允许重新开始，`taskThread`并将继续。两个线程都将被允许完成。
3.  如果`taskThread`正常完成或达到超时，main 将继续执行。在不使用其他通信方式的情况下，`main`无法知道是否发生超时或是否完成执行。`taskThread`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T15:38:35.623

`join()`当在线程上调用时，**将等待该线程死亡**（即该线程的 run 方法完成......）。只有这样下面的行`join()`才会执行。**但是在 join() 中设置一个超时，会使 join() 效果在特定超时后失效。**

尽管发生超时，但 taskThread 将被允许完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T10:55:09.993

超时条件将优先。当达到超时时，主线程和 taskThread 是同样可能执行的候选者。

# javascript - Jquery-如何识别单击按钮的类

> ID：11493205
> 
> 赞同：-3
> 
> 时间：2012-07-15T15:36:47.560
> 
> 标签：javascript, jquery, html

现在，我有

```
$(document).ready(function(){
    $(".follow-button").click(function(){
        alert("asdf");
    }
});      

<button class="follow-button" align="right" align="center">
        Follow 
 </button> 
```

但是当我单击按钮时，什么也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:42:18.980

其他提交者回答了您的问题，但我想我会发表评论。当语法错误时，JavaScript 会产生非常意想不到的后果，而且很难弄清楚到底出了什么问题。我建议使用 JSLint（或 JSHint）来捕捉这些愚蠢的错误。(http://www.jshint.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:39:07.417

```
$(document).ready(function(){
    $(".follow-button").click(function(){
        alert("asdf");
    });  // <----here 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:39:37.423

您错过了以下的右括号和分号`click`：

```
$(document).ready(function(){
    $(".follow-button").click(function(){
        alert("asdf");
    });
});
     ^----- there 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T15:40:01.053

看起来你需要添加 ); 到函数结束

```
$(".follow-button").click(function(){
        alert("asdf");
    }); 
```

# jquery-ui - Ajax 生成的选择框的值在与 jquery 自动完成相关联的调用时不会改变

> ID：11493206
> 
> 赞同：-1
> 
> 时间：2012-07-15T15:36:51.073
> 
> 标签：jquery-ui, jquery

下面的代码有一个 id='theservice' 的选择框和一个 id ='servicename' 的文本字段。此代码通过检查服务选择框中哪个服务处于活动状态来自动完成服务名称文本字段。但不幸的是，源字符串保持不变选择框已更改。

```
$( "#servicename" ).autocomplete({

        source: "index.php?key="+($('#theservice').find('option:selected').val()),
        minLength: 2,
    }); 
```

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:11:34.360

使用`.autocomplete( "option" , optionName , [value] )`方法解决了问题

$( "#servicename" ).autocomplete({

```
 source: "index.php?key="+($('#theservice').find('option:selected').val()),
        minLength: 2,
            search: function( event, ui ) {
$( "#servicename" ).autocomplete( "option" ,'source' ,'index.php?key="+($('#theservice').find('option:selected').val()));}
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:52:38.540

大概是个`delegation`问题。

**添加了自动完成传播示例**

```
//build the autocomplete function, sans source
$('#servicename').autocomplete({
  minLength: 2
});

var theArray = [];
$('body').on('change', 'select', function(){
  $.ajax({
    url: 'index.php?key='+$(this).val(),
    dataType: 'json/jsonp',
    success: function(data){
      //i don't know what the array you return looks like, but autocomplete expets a key:value relationship
      $.each(data, function(key, value){
        theArray.push({label: value, value: key});
      });
      //a custom function to pass the array into
      startAutoComplete(theArray);
    }
  });
});

function startAutoComplete(array){
  $('#servicename').autocomplete('option', 'source', array);
} 
```

使用上面的代码，我们实例化自动完成实例，我们只识别我们需要的参数，**不包括**源。

然后我们定义一个空数组，我们可以将 ajax 请求返回的数据推送到该数组中。

在我们的 select 函数中，我们将值传递给要解析的服务器。我不知道您是否期望 JSON/JSONP 格式，所以您必须自己更改它。

在`success:function(data)`我们从服务器取回请求时，最好响应是`json_encode`'ed。此外，当我们将值推入数组时，最好使用`key -> value`关系。自动完成允许 a`label`和 a`value`像`function(event, ui){ //do stuff with ui.item.label / ui.item.value}`'

我们在 的范围之外声明一个未初始化的函数`document.ready`，并将数组传递给函数。在这个函数中，我们改变了自动完成的来源。

希望这一切都有意义。

# php - 使用图形 api 获取 facebook 面孔

> ID：11493208
> 
> 赞同：0
> 
> 时间：2012-07-15T15:36:58.853
> 
> 标签：php, facebook, facebook-graph-api

我想在我的网站上制作一个 facebook 框，带有一个自定义的 Like 按钮来喜欢我们的 facebook 页面。并在文本中写一行：8763 人喜欢我们的 Facebook 页面。我可以使用图形 api 和`json_decode()`.

但是也有可能获得喜欢我页面的人的 10 张照片吗？这是设计师酝酿出来的，我告诉我做这个。:)

格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:51:28.153

不可能以直接的方式，只有当前经过身份验证的用户的朋友。

`SELECT uid FROM page_fan WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND page_id = "xxxx"`

您可以考虑从[http://developers.facebook.com/docs/reference/api/page/#conversations](http://developers.facebook.com/docs/reference/api/page/#conversations)获取 id，将它们保存在数组中，直到 10 为止。

还有[http://www.facebook.com/brandpermissions/logos.php](http://www.facebook.com/brandpermissions/logos.php)

> 我们允许 Facebook Like Button 徽标与 Like 按钮社交插件一起使用，该插件使用户能够一键连接到您的页面并将内容分享给 Facebook 上的朋友。我们还允许在离线广告（例如印刷广告）中使用 Facebook 点赞按钮，以引用和引导人们访问您的 Facebook 页面或您的已实施点赞按钮社交插件的网站。我们不允许在在线广告中使用 Like Button 标志。请参阅下面的使用部分了解更多信息。

这意味着您不能拥有自定义的“赞”框或按钮，因此请确保您没有违反政策

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:42:00.417

如果您已经有了用户 ID，那么这将非常简单 - 请参阅[https://developers.facebook.com/docs/reference/api/user/上的“图片”连接](https://developers.facebook.com/docs/reference/api/user/)

# extjs4 - 如何缩小表单组件以适应浏览器窗口

> ID：11493209
> 
> 赞同：1
> 
> 时间：2012-07-15T15:37:08.473
> 
> 标签：extjs4, extjs4.1, sencha-architect

我有一个选项卡面板，其中我添加了一个网格面板。现在，当我重新调整浏览器窗口的大小（如缩小）时，我希望缩小网格列和所有其他组件并调整大小，以便以任何窗口大小显示视图。我怎样才能做到这一点 ？

我正在使用 sencha-architect2

```
Ext.define('App.view.ExView', {
    extend: 'Ext.tab.Panel',

    autoRender: true,
    autoShow: true,
    frame: true,
    height: 600,
    id: 'mainpanel',
    width: 1360,
    maintainFlex: false,
    suspendLayout: false,
    hideCollapseTool: false,
    title: 'Example Project',
    titleCollapse: false,
    activeTab: 0,
    plain: true,
    fullscreen: 'true', 
```

网格

```
items: [
                        {
                            xtype: 'gridpanel',
                            autoShow: true,
                            height: 100,
                            minHeight: 40,
                            minWidth: 50,
                            autoScroll: true,
                            title: 'Grid',
                            store: 'storegrid',
                            layout: {
                                type: 'fit'
                            },
                            viewConfig: {

                            },
                            columns: [
                                {
                                    xtype: 'gridcolumn',
                                    maintainFlex: false,
                                    dataIndex: 'name',
                                    flex: 1,
                                    text: 'name'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    maintainFlex: false,
                                    dataIndex: 'age',
                                    flex: 1,
                                    text: 'age'
                                }
                            ]
                        }
                    ]
                }
            ]
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:54:36.613

对容器使用锚布局

这是一种允许相对于容器尺寸锚定包含的元素的布局。如果容器被调整大小，所有锚定项都会根据它们的锚定规则自动重新渲染。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Anchor](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Anchor)

# sqlite - 在 SQLite 中使用 ForeignCollections

> ID：11493210
> 
> 赞同：4
> 
> 时间：2012-07-15T15:37:37.037
> 
> 标签：sqlite, ormlite, foreign-collection

我想编写一个单元测试，它基本上验证我添加到外部集合的对象实际上在 DAO 保存检索对象时得到正确保存和检索这是我的实体。

```
@DatabaseTable
public class Question implements Question, Serializable {

    @DatabaseField
    private String questionText;

    @ForeignCollectionField
    private ForeignCollection<Answer> answers;

    public void addAnswer(Answer answer) {
        answers.add(answer);
    } 
```

我想要做的是创建一个`Question`实例，将一个`Answer`对象添加到集合中，并将它传递`Question`给我的 DAO，它将持久化它。持久性在常规字段上运行良好，所以我知道那里没有问题。

如何将一个添加`Answer`到集合中？当我创建`Question`它的答案集合时为空。是我必须保存新的`Question`然后检索它以使答案集合不为空吗？或者，我是否将答案设置为 BaseCollection、LazyCollection 实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T16:04:03.010

这是一个常见问题解答。正确的做法是使用[Dao.getEmptyForeignCollection(...)](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#getEmptyForeignCollection%28java.lang.String%29)方法创建一个可以添加项目的集合。就像是：

```
Question question = new Question();
query.answers = questionDao.getEmptyForeignCollection("answers");
Answer answer1 = new Answer();
query.answers.add(answer1);
// this can come before the question.answers.add()
questionDao.create(question); 
```

# javascript - 变量和数学运算符

> ID：11493217
> 
> 赞同：0
> 
> 时间：2012-07-15T15:38:37.807
> 
> 标签：javascript, jquery

> **可能重复：**
> [奇怪的 javascript 添加问题](https://stackoverflow.com/questions/1416633/strange-javascript-addition-problem)

我知道这显然有一个解决方案，我以前做过，但我不记得了，现在我找不到了。

```
​&lt;div>1</div>​​​​​​​​

$(function() {
    var number = $('div').text();
    var math = number + 2;
    $('body').text(math);
});​ 
```

[http://jsfiddle.net/G5zdx/](http://jsfiddle.net/G5zdx/)

`number`不被视为整数，因此`math`的值为“12”而不是“3”。我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:40:44.320

方法很多，但是

```
var math = (1 * number) + 2; 
```

是一个简单的。您是否应该检测可能的格式错误的非数字取决于其余代码的性质。

该`parseInt()`函数很有用，但可能应该使用 10 作为其第二个参数来调用它，以避免将以 0 开头的数字解释为八进制常量而不是十进制。此外，`parseInt()`不会将诸如“23skidoo”之类的字符串视为错误，这在您的应用程序中可能正常，也可能不正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:41:15.203

```
​&lt;div>1</div>​​​​​​​​

$(function(){
  var number = parseInt($('div').text(), 10);
  var math = number+2;
  $('body').text(math);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:41:36.383

您可以使用将字符串解析为 int `parseInt(string[, radix])`。

您的代码如下所示

```
$(function(){
  var number = $('div').text();
  var math = parseInt(number, 10)+2;
  $('body').text(math);
}); 
```

来源：[http ://www.javascripter.net/faq/convert2.htm](http://www.javascripter.net/faq/convert2.htm)

# iphone - UIActivityIndi cator

> ID：11493219
> 
> 赞同：2
> 
> 时间：2012-07-15T15:38:59.273
> 
> 标签：iphone, xcode, uiactivityindicatorview

当我使用 StartAnimating 方法启动 UIActivityIndi​​catorView 时： **[ActivityIcon startAnimating];**

它禁用所有用户交互，因此当用户点击取消按钮时，应该中止下载过程并隐藏 UIActivityIndi​​cator 它不起作用！！！

任何建议，将不胜感激。

编辑：我正在使用单独的线程在后台下载文件。我完成的所有进度报告和 UI 交互：

**[self performSelectorOnMainThread:@selector(RefreshScreen:) withObject:nil waitUntilDone:YES];**

而 RefreshScreen 方法是与 UI 元素交互的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:50:46.423

尝试将此行更改`[request startSynchronous];`为： `[request startAsynchronous];`

**编辑**

```
- (IBAction)grabURLInBackground:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setDelegate:self];
   [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

# android - ANR keyDispatchingTimedOut 但堆栈跟踪中没有自己的类

> ID：11493222
> 
> 赞同：4
> 
> 时间：2012-07-15T15:39:19.147
> 
> 标签：android, exception, timeout, android-wifi

我收到有关我的 Android 应用程序的错误报告，其中涉及 ANR keyDispatchingTimedOut。令人惊讶的是，此报告中的堆栈跟踪不包含我自己的任何类。

我还检查了我的 onPause() 和 onResume() 方法，它们应该不需要很长时间。只完成了一些资源清理工作，对于 onPause() 我预计最坏情况下最多为 1 秒（但完全由*必须*完成的事情引起，在其他地方我会造成内存泄漏。

我将在这里发布例外情况，可能有人知道它可能来自哪里：

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x400275d8 self=0xd050
  | sysTid=1372 nice=0 sched=0/0 cgrp=default handle=-1345002112
  | schedstat=( 11662176940194 5648544984518 10145639 )
  at com.android.server.SystemServer.init1(Native Method)
  at com.android.server.SystemServer.main(SystemServer.java:1073)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
  at dalvik.system.NativeStart.main(Native Method)

"DHCP Handler Thread" prio=5 tid=67 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40e9bfa8 self=0x19c6308
  | sysTid=24486 nice=0 sched=0/0 cgrp=default handle=25164024
  | schedstat=( 366210 41748048 6 )
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:119)
  at android.os.Looper.loop(Looper.java:127)
  at android.os.HandlerThread.run(HandlerThread.java:60)

"WifiWatchdogThread" prio=5 tid=68 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x41244978 self=0x17dbef0
  | sysTid=24466 nice=0 sched=0/0 cgrp=default handle=15264984
  | schedstat=( 701905 7476806 13 )
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:119)
  at android.os.Looper.loop(Looper.java:127)
  at com.android.server.WifiWatchdogService$WifiWatchdogThread.run        (WifiWatchdogService.java:987)

"WifiMonitor" prio=5 tid=62 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4131e810 self=0xd08208
  | sysTid=24464 nice=0 sched=0/0 cgrp=default handle=12776888
  | schedstat=( 333160420 1889770493 2621 )
  at android.net.wifi.WifiNative.waitForEvent(Native Method)
  at android.net.wifi.WifiMonitor$MonitorThread.run(WifiMonitor.java:203)

"android.hardware.SensorManager$SensorThread" prio=10 tid=41 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40fd23c8 self=0xb7fab0
  | sysTid=12065 nice=-8 sched=0/0 cgrp=default handle=17642104
  | schedstat=( 110688049235 273218872268 669479 )
  at android.hardware.SensorManager.sensors_data_poll(Native Method)
  at android.hardware.SensorManager$SensorThread$SensorThreadRunnable.run    (SensorManager.java:457)
  at java.lang.Thread.run(Thread.java:1027)

"Binder Thread #16" prio=5 tid=60 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40d10dd0 self=0x7b81d0
  | sysTid=3142 nice=0 sched=0/0 cgrp=default handle=7991208
  | schedstat=( 11422702482849 5701657716702 9785642 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #15" prio=5 tid=58 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40b781e0 self=0x806250
  | sysTid=2769 nice=0 sched=0/0 cgrp=default handle=11040328
  | schedstat=( 11575800474431 5698023835937 9772315 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #14" prio=5 tid=55 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40bf8fb0 self=0x4bb9d0
  | sysTid=2753 nice=0 sched=0/0 cgrp=default handle=3581728
  | schedstat=( 11386876678429 5731225067581 9692452 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #13" prio=5 tid=66 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40ba0b88 self=0x93b500
  | sysTid=2087 nice=0 sched=0/0 cgrp=default handle=5284592
  | schedstat=( 11618146360340 5720185427379 9899076 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #12" prio=5 tid=65 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40a9c6f0 self=0x551350
  | sysTid=2051 nice=0 sched=0/0 cgrp=default handle=4866248
  | schedstat=( 11450612946761 5715914702060 9837910 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #11" prio=5 tid=64 SUSPENDED
  | group="main" sCount=1 dsCount=0 obj=0x40bc5890 self=0x757f70
  | sysTid=2049 nice=0 sched=0/0 cgrp=default handle=8382088
  | schedstat=( 11574565428602 5755652681331 9814613 )
  at android.util.Log.println_native(Native Method)
  at android.util.Slog.w(Slog.java:60)
  at com.android.server.WifiService.getScanResults(WifiService.java:3184)
  at android.net.wifi.IWifiManager$Stub.onTransact(IWifiManager.java:126)
  at android.os.Binder.execTransact(Binder.java:320)
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #10" prio=5 tid=63 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40bbdcd0 self=0x551e40
  | sysTid=2024 nice=0 sched=0/0 cgrp=default handle=9934888
  | schedstat=( 11442461820647 5738453187888 9866071 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #9" prio=5 tid=61 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40a71b90 self=0x4f2148
  | sysTid=2012 nice=0 sched=0/0 cgrp=default handle=7152360
  | schedstat=( 11412723570422 5737569459835 9856082 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #8" prio=5 tid=59 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40a01fd8 self=0x60ca40
  | sysTid=1628 nice=0 sched=0/0 cgrp=default handle=5809144
  | schedstat=( 11483056913767 5750414339519 9921476 )
  at dalvik.system.NativeStart.run(Native Method)

"pool-1-thread-1" prio=5 tid=57 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x40aec4e0 self=0x609538
  | sysTid=1612 nice=0 sched=0/0 cgrp=default handle=5159248
  | schedstat=( 3046508787 1064334014940 196511 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40aec668> (a java.lang.VMThread)
  at java.lang.Thread.parkFor(Thread.java:1443)
  at java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
  at sun.misc.Unsafe.park(Unsafe.java:337)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await    (AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:411)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1021)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
  at java.lang.Thread.run(Thread.java:1027)

"RefQueueWorker@org.apache.http.impl.conn.tsccm.ConnPoolByRoute@409f8528" daemon prio=5     tid=56 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x409f8730 self=0x7f49d0
  | sysTid=1604 nice=0 sched=0/0 cgrp=default handle=7101040
  | schedstat=( 1492370720 1062000579822 183346 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4088bc80> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:395)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:107)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:80)
  at org.apache.http.impl.conn.tsccm.RefQueueWorker.run(RefQueueWorker.java:102)
  at java.lang.Thread.run(Thread.java:1027)

"GpsLocationProvider" prio=5 tid=54 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40924278 self=0x5aac30
  | sysTid=1593 nice=0 sched=0/0 cgrp=default handle=5213160
  | schedstat=( 53695556564 4105485168504 314554 )
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:119)
  at android.os.Looper.loop(Looper.java:127)
  at com.android.server.location.GpsLocationProvider$GpsLocationProviderThread.run    (GpsLocationProvider.java:2627)

"GpsNetwork" prio=5 tid=53 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40918f30 self=0x7a3280
  | sysTid=1592 nice=10 sched=0/0 cgrp=bg_non_interactive handle=5596240
  | schedstat=( 3941528407 4715350128138 190744 )
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:119)
  at android.os.Looper.loop(Looper.java:127)
  at com.android.server.location.GpsLocationProvider$GpsNetworkThread.run    (GpsLocationProvider.java:2640)

"pd_api_DeferredActionThread" prio=5 tid=52 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4091ff60 self=0x60a838
  | sysTid=1590 nice=0 sched=0/0 cgrp=default handle=8651504
  | schedstat=( 457944183704 2556608550419 1632941 )
  at dalvik.system.NativeStart.run(Native Method)

"RefQueueWorker@org.apache.http.impl.conn.tsccm.ConnPoolByRoute@4094f298" daemon prio=5 tid=51 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x409ccd20 self=0x4db280
  | sysTid=1575 nice=0 sched=0/0 cgrp=default handle=5202200
  | schedstat=( 1599853387 1042935485993 183397 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x408ddf60> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:395)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:107)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:80)
  at org.apache.http.impl.conn.tsccm.RefQueueWorker.run(RefQueueWorker.java:102)
  at java.lang.Thread.run(Thread.java:1027)

"Binder Thread #7" prio=5 tid=50 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40923718 self=0x4db8d0
  | sysTid=1573 nice=0 sched=0/0 cgrp=default handle=8114928
  | schedstat=( 12123622466944 5905026153897 10044543 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #6" prio=5 tid=49 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4095ddf8 self=0x4f84a8
  | sysTid=1572 nice=0 sched=0/0 cgrp=default handle=7427944
  | schedstat=( 11386062986105 5713769168163 9948969 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #5" prio=5 tid=48 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4098e360 self=0x7fb658
  | sysTid=1571 nice=0 sched=0/0 cgrp=default handle=8364584
  | schedstat=( 12129762418333 5854713838622 10020470 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #4" prio=5 tid=47 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x409c3738 self=0x7866a8
  | sysTid=1570 nice=0 sched=0/0 cgrp=default handle=7592008
  | schedstat=( 11479118193718 5704348663883 9891752 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #3" prio=5 tid=46 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40ac0908 self=0x5ae448
  | sysTid=1569 nice=0 sched=0/0 cgrp=default handle=6764560
  | schedstat=( 12284007139602 5890366395349 10076640 )
  at dalvik.system.NativeStart.run(Nat... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:53:31.893

我对此的发现（但我不太确定）：当我自己的应用程序中的某些内容阻塞太长时间时，就会发生这种情况。因此，当 onPause()/onResume() 等待太长时间直到它们返回给调用者时，可能会发生这种超时。

我不太清楚：这个超时时间有多长，意味着应用程序可以拥有这些方法来执行一些内部任务多长时间......

# firefox - 指向扩展

> ID：11493225
> 
> 赞同：4
> 
> 时间：2012-07-15T15:39:26.437
> 
> 标签：firefox, firefox-addon, xul

我正在做本教程，介绍如何在创建 firefox 扩展时设置环境，但我不明白这部分：

> 指向扩展 在您的开发配置文件文件夹中，您将找到一个名为 extensions 的文件夹。在其中，您将拥有所有已安装扩展的代码。您可以创建一个指针文件，而不是将代码放在那里。通过为您创建一个具有唯一名称的文件来做到这一点（这必须与您在 install.rdf 文件中为 em:id 值选择的相同 - 更多内容见下文）。

这部分可以在这个链接中找到：[如何开发 Firefox 扩展](http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/)

我在 Ubuntu 中做这件事。这和创建符号链接一样吗？我对这部分感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:13:40.957

不，并非所有运行 Firefox 的操作系统都有符号链接——因此必须发明一种不同的机制。您需要创建一个名称与扩展 ID 匹配的文本文件，并将扩展目录的路径作为其内容。指向此目录的同名符号链接应该也可以，但如果扩展管理器决定更新可用于您的扩展（更新安装将删除符号链接并将其替换为常规扩展安装） ，不确定文本文件是否也会发生这种情况）。

就个人而言，我意识到正确安装扩展会产生更一致的结果——你不会遇到扩展的某些部分更新而其他部分没有更新的丑陋情况。这就是我编写[Extension Auto-Installer](https://addons.mozilla.org/addon/autoinstaller/)的原因（注意：这是自我推销），它大大简化了安装过程——尤其是在您开发无需重启的扩展时。

# php - 在 htmlentities 上使用 str_replace 有什么危害吗？

> ID：11493227
> 
> 赞同：0
> 
> 时间：2012-07-15T15:39:39.697
> 
> 标签：php, html-entities

我有一个自定义论坛，我在其中使用 htmlentities，因此用户无法发布恶意代码（html/js）。无论如何，当我从数据库中提取帖子时，我使用 str_replace 来显示某些 html 元素 <、>、& 等。这样做有什么害处吗？它会导致副作用/html呈现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:48:56.613

`strip_tags`，如文档中所述，不会删除内联 javascript 或清理，因此这不是一个好主意。一个常见的解决方案是使用`bbcode`存在许多库的替代方法，或者您可以自己制作，然后使用`preg_replace`安全地替换您自己的标记。

**这是一个快速示例：**

```
$safe_output = htmlspecialchars($output);
$find = array("'\[b\](.*?)\[/b\]'is");
$replace = array("<strong>\\1</strong>");
$result = preg_replace($find, $replace, nl2br($safe_output)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:49:44.883

1.  用户发布数据
2.  数据为mysql转义，写入数据库
3.  用户请求数据
4.  数据被编码以供显示（积极地使用`htmlentities`or`htmlspecialchars`或某些允许的字符子集。您可以使用 来执行此操作`str_replace`，但有更好的实用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:43:57.880

使用[strip_tags](http://php.net/manual/en/function.strip-tags.php)避免任何 html/js/php。它有一些选项可以允许你想要这样的任何标签：

```
strip_tags($text, '<p><a>'); 
```

# silverlight - 在 Windows Phone 上创建一个类似于 Pictures Hub 的 hubtile

> ID：11493231
> 
> 赞同：1
> 
> 时间：2012-07-15T15:40:09.970
> 
> 标签：silverlight, windows-phone-7, silverlight-toolkit

我想创建一个类似于 Picture Hub 的 hubtile（来自 Silverlight Toolkit for WP）。我的意思是，在磁贴内移动的背景图像。如何制作这个动画？也许我被告知不太清楚，对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:10:43.277

下面介绍如何使用 HubTile 控件：

[http://igrali.com/2011/08/19/how-to-use-the-hubtile-control/](http://igrali.com/2011/08/19/how-to-use-the-hubtile-control/)

您甚至可以将其宽度变大，但不建议这样做。

编辑：如果我误解了这个问题并且你想要 Ken Burns 效果，这里有一些东西可以让你开始： http: [//www.codeproject.com/Articles/211958/A-Ken-Burns-powered-photo-frame-control-用于 WPF](http://www.codeproject.com/Articles/211958/A-Ken-Burns-powered-photo-frame-control-for-WPF)

# android - 在 URL 中使用反斜杠传递日期：Android

> ID：11493232
> 
> 赞同：0
> 
> 时间：2012-07-15T15:40:13.447
> 
> 标签：android

只是一个简单的快速问题。我想在我的 HTTP 请求中传递一个日期。日期格式是这样的`22\July\2012`。这是我要传递的 URL。在哪里`dateChat =22\July\2012`

```
if(this.dateChat!="") {
  this.dateChat.replace("\\", "\\\\");
}
httpclient= new DefaultHttpClient();
httpget = new HttpGet("http://10.116.27.107/php/Chat/xmlManipulator.php?" +
  "action="+this.action+"&username="+this.userName+
  "&chatText="+this.chatText+"&email="+this.email+
  "&callfrom="+this.callFrom+"&dateChatToRetrieve="+this.dateChat); 
```

logcat 给出以下错误：

```
 07-15 20:26:40.165: E/AndroidRuntime(2000): FATAL EXCEPTION: main
 07-15 20:26:40.165: E/AndroidRuntime(2000): java.lang.IllegalArgumentException:
  Illegal character in query at index 146:
  http://10.116.27.107/php/Chat/xmlManipulator.php?action=ReturnUserAdminChats&username=You&chatText=a&email=You&callfrom=admin&dateChatToRetrieve=5\July\2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:47:21.523

使用[URLEncoder.encode()](http://developer.android.com/reference/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)对 dateChat 进行编码

# metaprogramming - 在 OCaml 顶层中嵌入特定领域的语言——是否嵌入到 Camlp4？

> ID：11493235
> 
> 赞同：2
> 
> 时间：2012-07-15T15:40:25.053
> 
> 标签：metaprogramming, ocaml, syntactic-sugar, ocamlyacc

我有一些代码，其中包含`menhir`基于*域的* *特定* *语言*（逻辑）的解析器。为了我在调试时的理智，能够像这样直接在顶层键入这种语言（公式）的实例会很棒：

```
# f = << P(x,y) & x!=y >> 
```

是`campl4/5`我唯一的选择吗？如果是，我觉得文档相当吓人。是否有一个与我的用例足够接近并且我可以适应的示例/教程？（例如，引入新关键字的语法扩展似乎不相关）。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:39:38.503

如果您愿意调用一个函数来进行解析，您可以使用`ocamlmktop`将您的解析器包含到顶层。然后，您可以使用`#install_printer`. 会话可能如下所示：

```
# let x = parse ()
<< type your expression here >>
# x : type = <<formatted version>> 
```

我用过专门的打印机，它们对复杂的类型肯定有很大帮助。我从来没有开始使用`ocamlmktop`. 我总是用`#load`and加载我的代码`#use`。

这比掌握camlp4/5（恕我直言）容易得多。但也许它有点太粗糙了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T23:52:11.610

是的，您可以使用 camlp4，它会很好地工作（包括在顶层），但是不，它没有很好的文档记录，您将不得不应对它。

有关与您的用例相近的示例，请参阅 Camlp4 wiki 的[Lambda 演算引用](http://brion.inria.fr/gallium/index.php/Lambda_calculus_quotations)示例。

对于顶层，它将很容易工作。您可以在顶层动态加载“camlp4o.cmo”，然后是您的语法扩展，或者使用[findlib](http://projects.camlcity.org/projects/dl/findlib-1.2.1/doc/guide-html/quickstart.html)来处理：从顶层，`#use "topfind";;`然后`#camlp4o;;`，然后`#require "myfoo.syntax";;`是`myfoo.syntax`您为部署扩展而创建的 findlib 包的名称。

# javascript - 如何在不创建新函数的情况下更改此函数中变量的值

> ID：11493248
> 
> 赞同：0
> 
> 时间：2012-07-15T15:42:07.923
> 
> 标签：javascript, javascript-events

```
function SlideShow(area) {
    var SlideImg = new Array('img1', 'img2');
    var SlideArea = document.getElementById(area);
    for (i = 0; i < SlideImg.length; i++) {
        if (SlideImg[i] == SlideImg[0]) {
            var classname = 'active';
        } else {
            var classname = 'not-active';
        }
        var html = '<img src="images/room/' + SlideImg[i] + '.jpg" id="' + SlideImg[i] + '" class="' + classname + '" />';
        SlideArea.innerHTML += html;
    }
    var a = 1;

    function RunSlide() {
        var before = a - 1;
        if (a > SlideImg.length - 1) {
            a = 0;
        }
        ImgBefore = document.getElementById(SlideImg[before]);
        ImgBefore.className = 'not-active';
        ImgNext = document.getElementById(SlideImg[a]);
        ImgNext.className = 'active';
        a++;
    }
    var run = setInterval(RunSlide, 5000);
} 
```

如何改变`a`价值？因为`a`变量不在全局范围内，我可以从另一个函数访问它吗？我想访问它，但不想将`a`变量声明为全局变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:57:46.443

是的，该变量是函数的本地变量，因此您必须在外部公开一个函数才能访问它。

例如，您可以将其放在函数的最后，使其返回一个可以设置变量的函数：

```
function SlideShow(area) {
  ...
  return function(value){ a = value; };
} 
```

用法：

```
var setA = SlideShow(something); 
```

然后稍后您可以使用该功能：

```
setA(42); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:56:28.057

很简单，`var a;`在外部声明`SlideShow`，然后它将是全局可访问的。

请记住，它仍然需要在函数内重置`a = 1;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:57:05.187

如果您可以使变量的范围成为全局变量，那么您应该可以。而不是在你的函数中声明，只需引用变量并在页面的“<head>”中声明。请参阅我的示例，我对此进行了测试，单击差异链接会更改变量的值并显示在页面上。

```
<html>
<head><title>Test</title>
<script language="javascript">
var a = -1;

function changeVar(value) {
  a = value;
  document.getElementById("test1").innerHTML = a;
}
</script>
</head>
<body>
<h1>Test page</h1>
<a href="#" onclick="changeVar(2);">Click me (2)</a> <br />
<a href="#" onclick="changeVar(5);">Click me (5)</a> <br />
<a href="#" onclick="changeVar(9);">Click me (9)</a> <br />
<hr>
<h1>Value for a is: <div id="test1"></div></h1>

<!-- really test by including function later on page -->
<script language="javascript">
function SlideShow(area) {
    var SlideImg = new Array('img1', 'img2');
    var SlideArea = document.getElementById(area);
    for (i = 0; i < SlideImg.length; i++) {
        if (SlideImg[i] == SlideImg[0]) {
            var classname = 'active';
        } else {
            var classname = 'not-active';
        }
        var html = '<img src="images/room/' + SlideImg[i] + '.jpg" id="' + SlideImg[i] + '" class="' + classname + '" />';
        SlideArea.innerHTML += html;
    }
    a = 1;  // removed declaration of a and just using a from prior declaration

    function RunSlide() {
        var before = a - 1;
        if (a > SlideImg.length - 1) {
            a = 0;
        }
        ImgBefore = document.getElementById(SlideImg[before]);
        ImgBefore.className = 'not-active';
        ImgNext = document.getElementById(SlideImg[a]);
        ImgNext.className = 'active';
        a++;
    }
    var run = setInterval(RunSlide, 5000);
}
</script>
</html> 
```

如果在函数中声明，则无法访问变量本身，因为它的范围是 LOCAL。见：[http ://www.w3schools.com/js/js_variables.asp](http://www.w3schools.com/js/js_variables.asp)

但是，有一种方法可以调整函数以设置页面上另一个元素的值，然后其他人可以引用该值。为您的脚本使用相同的代码片段，当更新 a 时，您可以设置页面上隐藏字段的值，然后其他人可以引用该值。我认为您必须在函数之外声明它的任何其他方式。

**替代1：**

```
<!-- really test by including function later on page -->
<script language="javascript">
function SlideShow(area) {
    var SlideImg = new Array('img1', 'img2');
    var SlideArea = document.getElementById(area);
    for (i = 0; i < SlideImg.length; i++) {
        if (SlideImg[i] == SlideImg[0]) {
            var classname = 'active';
        } else {
            var classname = 'not-active';
        }
        var html = '<img src="images/room/' + SlideImg[i] + '.jpg" id="' + SlideImg[i] + '" class="' + classname + '" />';
        SlideArea.innerHTML += html;
    }
    var a = 1;

    function RunSlide() {
        var before = a - 1;
        if (a > SlideImg.length - 1) {
            a = 0;
        }
        ImgBefore = document.getElementById(SlideImg[before]);
        ImgBefore.className = 'not-active';
        ImgNext = document.getElementById(SlideImg[a]);
        ImgNext.className = 'active';
        a++;
        // set value of element on page so others can reference
        document.getElementById("test1").innerHTML = a;  // or set a hidden field
    }
    var run = setInterval(RunSlide, 5000);
}
</script> 
```

您可能能够做到的另一种方法是使用 a 的值为您的函数声明一个返回值，调用者可以根据需要忽略它，而其他人可以检索它。这可能不适用于您的 setTimeOut 重新调用 RunSlide 函数。我在 SlideShow 中尝试了另一个内部函数，但似乎也没有返回。原始范围界定建议仍然存在。

# objective-c - iOS - viewForFooterInSection 粘在 UITableView 的底部

> ID：11493252
> 
> 赞同：7
> 
> 时间：2012-07-15T15:42:42.770
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uiview

我有一个包含 3 个部分的 UITableView。他们每个人都有一个我使用 viewForFooterInSection 添加的页脚。我遇到的问题是，当我向下滚动 tableview 时，页脚会粘在屏幕底部，并且不会像其他单元格一样滚动。有谁知道如何使页脚几乎像一个单元格一样，并与表格的其余部分一起滚动？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:47:27.167

我真的想通了。可能不是最聪明的方法，但我将 UITableView 样式更改为分组，并且修复了它。我不得不稍微调整一下 TableView 以使单元格看起来与未分组时相同（背景清晰，没有分隔符），但效果很好。页脚不再粘在 TableView 的底部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T20:25:41.960

页脚应该粘住。诀窍是为每个部分添加一个额外的单元格并在那里呈现页脚。如果您需要更多帮助，请添加评论，但它应该非常简单。

编辑：

**问：**好的。我正在使用 Core Data 和 NSFetchedResultsController 来填充 TableView。这会让实现这一目标变得更加棘手吗？

**答：**一点也不。覆盖

`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`

在每个部分中添加一个额外的单元格，然后在

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

测试 indexPath.row > 是否比该部分的 fetchedResultsController 行。如果为真，请添加显示页脚信息的单元格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T15:48:16.113

解决此问题的一种方法是，如果将页脚设置为滚动视图中的最后一个单元格的单元格之一（可以完成，但将其设置为数组中的最后一项，您可以从中设置 uitable）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T21:28:33.450

添加一个额外的单元格，使其不可见，并呈现您的视图，这不是添加页脚的可取方式。正确地做到这一点非常简单：

```
- (UIView*)tableView:(UITableView*)tableView viewForFooterInSection:(NSInteger)section {
    NSString* sectionFooter = [self tableView:tableView titleForFooterInSection:section];

    UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, yourWidth, yourHeight)]; //create a view- the width should usually be the width of the screen
    UILabel* label = [[UILabel alloc] initWithFrame:someFrame]; 

    label.backgroundColor = [UIColor blueColor];
    label.textColor = [UIColor whiteColor];
    label.text = sectionFooter;

    [view addSubview:label];

    return view;
} 
```

你还必须实现 tableView: titleForFooterInSection: 如果你想像我在这里一样添加文本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-21T21:43:38.583

当我发现我的代码不适用于横向模式时，我确实遇到了类似的问题，而只能在纵向模式下工作。在我的旧代码中，当在横向时，tableview 不能滚动到低于可见视图的位置，并且在滚动时它会弹回顶行（不让我看到下面的行）。我所要做的就是确保将高度设置为 44 作为默认单元格高度。所以我的页脚基本上是另一个带有 clearColor 的单元格。请注意我的应用程序使用“自动布局”

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
  CGRect screenBounds = [UIScreen mainScreen].bounds;
  CGFloat width = screenBounds.size.width;
  UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, width, 44)];
  view.backgroundColor = [UIColor clearColor];

  UILabel *label = [[UILabel alloc] initWithFrame:view.frame];
  label.text = @"Your Text";
  [view addSubview:label];
  return view;
} 
```

# c# - 带有 JOIN 操作的 LINQ

> ID：11493253
> 
> 赞同：0
> 
> 时间：2012-07-15T15:42:45.580
> 
> 标签：c#, entity-framework, linq-to-entities, group-by, sql-to-linq-conversion

我想要一个像这样的 LINQ 语句

用简单的话来说，我有两个表 A 和 B。A 包含字段 id、name、amt1、userid。表 B 包含 id、userid、amt2。我想要 A.userid=B.userid 但 B.id!=A.id 的表 A 的详细信息

谁能帮我吗。我是 LINQ 的初学者 在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:19:08.270

这是你想要做的吗？

```
TableA.Join(TableB, a => a.userid, b => b.userid, (a, b) => new { A = a, B = b })
      .Where(j => j.A.id != j.B.id)
      .Select(j => j.A) 
```

人工 SQL 将是：

```
select a.* 
from tableA a
inner join tableB b on a.userid = b.userid 
where a.id != b.id; 
```

# encryption - AES 加密和 RSA 数字签名方案可以一起用于文件加密吗？

> ID：11493254
> 
> 赞同：1
> 
> 时间：2012-07-15T15:42:46.633
> 
> 标签：encryption, aes, rsa, digital-signature, file-transfer

我计划在从物理存储到物理存储的文件传输过程中进行文件加密，作为我高中的最后一年项目。

我的问题是，AES 加密和 RSA 数字签名方案可以用作文件加密吗？目前我专注于文本文件（`.doc`，`.txt`）。

我有以下协议：

*   该文件将使用 AES 加密进行加密
*   来自 RSA Encryption 的私钥将是文件的签名
*   公钥将在解密期间验证签名

我不确定要使用的密钥的位大小，256 位 AES 和 1024 位 RSA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T13:09:55.220

大多数时候 AES 和 RSA 以下列方式一起使用：

1.  创建一个非对称密钥对并将私钥保密，并将公钥保存在受信任的密钥库中
2.  创建一个对称数据加密密钥并用它加密数据（例如使用 AES-CBC 和随机 IV）
3.  使用密钥对的公钥加密对称数据加密密钥
4.  使用私钥创建签名（如果可能，使用单独的密钥对），例如使用 SHA-256 散列算法的 PKCS#1
5.  存储加密数据（+IV）、加密密钥和签名

验证

1.  检索数据等
2.  使用信任库中的公钥验证签名
3.  使用私钥解密对称密钥（受密码保护，存储在 USB 记忆棒或智能卡等上）
4.  解密数据

您将需要某种方式来存储数据。最好为此使用通用格式，例如加密消息语法。有关密钥大小，请参见[http://www.keylength.com/](http://www.keylength.com/)，例如使用 NIST 或 ECRYPT II 建议。我建议匹配大小，例如签名的 AES-128 位、RSA 3072 位和 SHA-256。

# .htaccess - Mod重写将下划线转换为影响嵌入图像的破折号

> ID：11493258
> 
> 赞同：0
> 
> 时间：2012-07-15T15:43:08.397
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我已经在我的 .htaccess 文件中实现了以下代码，以将所有下划线转换为破折号。

```
RewriteRule ^([^_]*)_([^_]*_.*) $1-$2 [L]
RewriteRule ^([^_]*)_([^_]*)$ /$1-$2 [L,R=301] 
```

上面的代码有效，但是在从 /images 目录嵌入图像时遇到了问题。

例如，如果其中一个图像文件名包含下划线，则无法正确加载。

如何从上述规则发出图像和 javacript 文件名？？？

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:09:13.057

为 2 条规则添加一些条件。您可以选择“检查请求是否为不存在的文件”，或“检查请求是否以 (jpe?g|png|bmp|gif) 结尾”。第一个应该涵盖其他内容，例如访问其他资源（javascript、css 等）的 URL，因此它们也不会转换下划线，第二个只处理图像。您需要在两个规则之上添加条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^_]*)_([^_]*_.*) $1-$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^_]*)_([^_]*)$ /$1-$2 [L,R=301] 
```

或者

```
RewriteCond %{REQUEST_URI} !\.(jpe?g|png|bmp|gif)$ [NC]
RewriteRule ^([^_]*)_([^_]*_.*) $1-$2 [L]

RewriteCond %{REQUEST_URI} !\.(jpe?g|png|bmp|gif)$ [NC]
RewriteRule ^([^_]*)_([^_]*)$ /$1-$2 [L,R=301] 
```

# php - 在页面内显示存档（在下拉列表中）和类别（在下拉列表中）

> ID：11493259
> 
> 赞同：0
> 
> 时间：2012-07-15T15:43:19.247
> 
> 标签：php, templates, drop-down-menu, archive

我有个问题：

我有一个存档模板页面，我想在其中显示两个下拉菜单：存档和类别下拉菜单，当我单击例如 11 月份的存档时，那么所有项目将从 11 月开始显示在一边，它也可以工作。 .. 但是，如果您选择一个菜单项，则将显示所有项目，而不仅仅是该类别的帖子。

这是代码：

在archives.php 中有这段代码（这里都是正确的......我认为）：

```
<div id="archive-browser">
    <div>
        <h4>Month</h4>
        <select id="month-choice">
            <option val="no-choice"> &mdash; </option>
            <?php wp_get_archives(array(
                'type'    => 'monthly',
                'format'  => 'option'
            )); ?>
        </select>
    </div>
    <div>
        <h4>Category</h4>
        <?php 
            wp_dropdown_categories('show_option_none= -- ');?> 
    </div>
</div>
<div id="archive-wrapper">
<div id="archive-pot">
</div></div> 
```

在另一个名为 Archives-getter.php 的模板中，有这段代码，这里是错误的地方：

```
<?php
    /*
        Template Name: Archives Getter
    */
    $year = htmlspecialchars(trim($_POST));
    $month = htmlspecialchars(trim($_POST));
    $cat = htmlspecialchars(trim($_POST));
    $querystring = "year=$year&monthnum=$month&cat=$cat&posts_per_page=-1";
    query_posts($querystring); 
?>
<?php if (($year == '') && ($month == '') && ($cat == '-1')) { ?>
    <table id="archives-table"><tr><td style='text-align: center; font-size: 15px; padding: 5px;'>Please choose from above.</td></tr></table>
<?php } else { ?>
    <table id="archives-table">
        <?php    
            if (have_posts()) : while (have_posts()) : the_post(); ?>
                <tr>
                    <td><img src="<?php echo get_post_meta($post->ID, 'PostThumb', true); ?>" alt="" style="width: 35px;" /></td>
                    <td><a href='<?php the_permalink(); ?>'><?php the_title(); ?></a></td>
                    <td><?php comments_popup_link(' ', '1 Comment', '% Comments'); ?></td>
                    <td><?php the_date('m/j/Y'); ?></td>
                </tr>
        <?php 
            endwhile; else:
                echo "<tr><td style='text-align: center; font-size: 15px; padding: 5px;'>Nothing found.</td></tr>";
            endif; 
        ?>
    </table>
<?php } ?> 
```

这两者是连接在一起的，所以当我运行档案模板时，它会从 getter 中调用数据。

我认为错误出在查询字符串的某个地方……只有类别下拉列表不显示帖子。谢谢你的帮助。

* * *

谢谢，但存档下拉列表工作正常......但是当我单击类别 XY 时，类别下拉列表不显示她类别上的帖子。这是 Jquery 代码，因为它是用 this 和 post 字段名称连接的：

我更改了帖子字段名称：

```
$year = htmlspecialchars(trim($_POST['year_y']));
    $month = htmlspecialchars(trim($_POST['month_m']));
    $cat = htmlspecialchars(trim($_POST['cat_c']));

jQuery(function() {

    jQuery("#archive-wrapper").height(jQuery("#archive-pot").height());

    jQuery("#month-choice").change(function() {

        // Update category choice dynamically

        // This is much harder, needs another intermediary getter

    });

    jQuery("#archive-browser select").change(function() {

        jQuery("#archive-pot")
            .empty()
            .html("<div style='text-align: center; padding: 30px;'><img src='' /></div>");

        var dateArray = jQuery("#month-choice").val().split("/");

        var y = dateArray[3];

        var m = dateArray[4];

        var c = jQuery("#cat").val();

        jQuery.ajax({

            url: "/archive-getter/", 

            dataType: "html",

            type: "POST",

            data: ({

                "year_y": y,

                "month_m" : m,

                "cat_c" : c

            }),

            success: function(data) {

                jQuery("#archive-pot").html(data);

                jQuery("#archive-wrapper").animate({

                    height: jQuery("#archives-table tr").length * 50

                });

            }

        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:13:42.983

您需要在此处指定帖子字段名称：

```
$year = htmlspecialchars(trim($_POST));
$month = htmlspecialchars(trim($_POST));
$cat = htmlspecialchars(trim($_POST)); 
```

应该是这样的（名称取决于您的表单字段

```
$year = htmlspecialchars(trim($_POST['year_y']));
$month = htmlspecialchars(trim($_POST['month_m']));
$cat = htmlspecialchars(trim($_POST['cat_c'])); 
```

这种表单输入应该有名称：

```
<select id="month-choice"> 
```

像这样

```
<select id="month-choice" name="month"> 
```

# hibernate - hibernate - 强制不从数据库加载属性

> ID：11493261
> 
> 赞同：0
> 
> 时间：2012-07-15T15:43:36.727
> 
> 标签：hibernate, properties

有没有办法标记某些属性根本不检索？

我的用户表中有一个唯一的胡椒行，如果检索到用户，我不想加载这个胡椒和散列密码。

我在远程客户端上没有任何需要，所以我想确保它不会被意外传递给它。

如果我需要在应用程序服务器上重新生成或更改密码，我可以通过命名查询检索辣椒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:08:16.427

您可能会实现一个拦截器并覆盖该`onLoad`方法：[有关 Hibernate Interceptors Here 的更多信息](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html#objectstate-interceptors)

我已使用此策略覆盖 onFlushDirty 和 onSave 方法来更新 Timestamp 字段。期间我从未使用过它`onLoad`。

这是一个基于我使用过的类似拦截器的示例拦截器（未测试）：

> ```
> public final class PepperInterceptor extends EmptyInterceptor {
> 
>     /** The Value to set as the Pepper field when loading from the DB. */
>     private static final String DEFAULT_PEPPER = "[PROTECTED-PEPPER]";
> 
>     @Override
>     public boolean onLoad(final Object entity, final Serializable id, final Object[] currentState,
>             final Object[] previousState, final String[] propertyNames, final Type[] types) {
> 
>         if (entity instanceof User) {
>             for (int i = 0; i < propertyNames.length; i++) {
>                 if (propertyNames[i].equalsIgnoreCase("pepper")) {
>                     currentState[i] = DEFAULT_PEPPER;
>                 }
>             }
> 
>             return true;
>         }
>         return super.onLoad(entity, id, currentState, previousState, propertyNames, types);
>     } 
> ```
> 
> }

* * *

编辑：

进一步考虑这一点，您必须确保该值永远不会被 覆盖`DEFAULT_PEPPER`，可能使用类似于`updatable=false`实体类的列定义中的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:18:56.643

Hibernate 允许根据需要覆盖生成的 sql。

[http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html/Hibernate_Annotations_Reference_Guide/entity-hibspec-customsql.html](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html/Hibernate_Annotations_Reference_Guide/entity-hibspec-customsql.html)

@Loader 注释可能有用。

# c++ - 并行区域内的for循环

> ID：11493265
> 
> 赞同：2
> 
> 时间：2012-07-15T15:44:18.737
> 
> 标签：c++, openmp

如果并行区域内有一个 for 循环，是否会再次并行化 for 循环，或者每个线程都会执行自己的 for 循环？

```
T sum;

#pragma omp parallel
{
    #pragma omp for reduction(+: sum)
    for (;;)
    {
        T priv_var;

        sum += priv_var;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:48:22.137

是的，此代码将导致 OpenMP 在`for`由该`parallel`区域产生的线程之间并行化循环。但是，我相信您当前的`for`声明对于 OpenMP 并行化无效。您需要显式提供整数循环变量、开始和结束以及增量表达式。

实际上，您的代码将等效于带有`#pragma omp parallel for reduction(+: sum)`.

[有关 MDSN 的更多信息](http://msdn.microsoft.com/en-us/library/6z19s8e0)

# java - 字符串类型 charAt

> ID：11493268
> 
> 赞同：-1
> 
> 时间：2012-07-15T15:45:02.327
> 
> 标签：java, string

我有两个简单的例子来支持我的问题。我不明白为什么（1）有效，而（2）无效。在我看来，我以同样的方式使用它们。

(1)

```
public String frontBack(String str) {
  if (str.length() <= 1) return str;

  String mid = str.substring(1, str.length()-1);

  // last + mid + first
  return str.charAt(str.length()-1) + mid + str.charAt(0);
} 
```

(2)

```
public String front22(String str) {
  str = "test";
  return str.charAt(0);
} 
```

对于第二个，我收到一个类型不匹配错误，上面写着：无法从 char 转换为字符串。当我尝试在互联网上找到答案时，我看到 str 在所有示例中都声明为 var 类型。但它适用于第一个示例。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:50:40.807

在第一个示例中，您返回一个`String`. 在第二个你（尝试）返回一个`char`.

由于您在第一个示例中进行字符串连接，因此表达式的结果是一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:04:46.957

要将第一个字符作为字符串返回：

```
return str.substring(0,1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T02:15:54.003

您可以通过键入来修复它

```
return "" + str.charAt(0); 
```

不知何故，这迫使字符变成一个字符串。

# android - 安卓游戏控制

> ID：11493269
> 
> 赞同：-4
> 
> 时间：2012-07-15T15:45:07.123
> 
> 标签：android

帮助我控制我的 adnroid 游戏）

我有 2 个按钮：向左移动和向右移动。如果我们按左精灵向左移动，如果我们按右精灵移动。

这是代码：

```
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN ||
                event.getAction() == MotionEvent.ACTION_MOVE){ 
        touchX = event.getX();
    }
    if(touchX == arrow_leftX){
        gameLoopThread.setRunning(false);
    }
    else if(touchX == arrow_leftX){
        playerX = playerX - xSpeed;
    }
    else if(touchX == arrow_rightX){
        playerX = playerX - xSpeed;
    }
    else if(touchX == arrow_rightX){
        gameLoopThread.setRunning(false);
    }
    return super.onTouchEvent(event);
} 
```

**所以问题是：**

> 它只向左移动，我不知道如何向右移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:39:31.260

```
The Problem is here i think

else if(touchX == arrow_rightX){
        playerX = playerX - xSpeed;
    }

else if(touchX == arrow_rightX){

// Here You can see that you are again subtracting the x axis from
// playerX 
// it is clear that you are moving your image with this 
// but if you decrease value from x it shall move to lext
// to  move it to  right you need to increase its value 

        playerX = playerX + xSpeed;
    } 
```

# c# - 如何在 WPF 中为 IC 建模？

> ID：11493271
> 
> 赞同：0
> 
> 时间：2012-07-15T15:45:16.737
> 
> 标签：c#, .net, wpf, user-controls

我正在使用 WPF 构建一个用户控件，以类似于将在电子电路仿真软件中使用的面包板。

用户将能够将 IC 添加到该面包板上。

我现在已经完成了面包板的构建，它主要由一个网格组成，该网格的单元数等于真实面包板上节点的数量。

现在，我通过指定 and 让用户将 IC 添加到该网格中，并通过指定and`Grid.Row`确定`Grid.Column`其大小：`Grid.RowSpan``Grid.ColumnSpan`

![喜欢这张照片。。](../Images/a6fc3ac315969e1cfc0c3768226cb88b.png)

这是 C# 代码：

```
private int usedVerticalPins = 0;

void AddICs(int pinNum)
{
    var rect = new Rectangle() { Fill = new SolidColorBrush(Colors.Black),Stroke = new SolidColorBrush(Colors.White)};
    rect.SetValue(Grid.RowProperty, usedVerticalPins);
    rect.SetValue(Grid.ColumnProperty, 7);

    rect.SetValue(Grid.RowSpanProperty, (pinNum / 2));
    rect.SetValue(Grid.ColumnSpanProperty, 3);

    BreadboardControl.BreadboardGrid.Children.Add(rect);
    usedVerticalPins += (pinNum / 2);
} 
```

但是正如你所看到的，它看起来像普通的矩形而不是 IC，所以我想继承类 Rectangle 并编辑它的外观，我发现它是一个密封类..

我希望 IC 看起来像![这个](../Images/1132ab343679f20dad467ce274766e64.png)所有引脚和东西..

所以你能建议一种方法来做到这一点..！？

# java - 使用 Nimbus 外观在 JTable 中水平滚动

> ID：11493273
> 
> 赞同：5
> 
> 时间：2012-07-15T15:45:26.070
> 
> 标签：java, swing, jtable, horizontal-scrolling, nimbus

我有一个比它包含的 JScrollPane 更宽的 JTable（基本上像这样定义）：

```
JTable table = new JTable(model);
// I change some things like disallowing reordering, resizing,
// disable column selection, etc.

// I set the default renderer to a DefaultTableCellRenderer
// getTableCellRendererComponent, and then changes the color
// of the cell text depending on the cell value

JPanel panel = new JPanel(new BorderLayout(0, 5));
panel.add(new JScrollPane(table), BorderLayout.CENTER);
// add other stuff to the panel
this.add(panel,  BorderLayout.CENTER); 
```

在我将外观从默认更改为 Nimbus 之前，我能够在 JTable 中左右滚动。（我喜欢 Mac LaF，但它在 Windows 上不受支持，而且我认为 Windows LaF 很丑），

我直接从 Java 教程中获取了以下代码：

```
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (Exception e) {
    // If Nimbus is not available, you can set the GUI to another look
    // and feel.
} 
```

我重新编译并运行了代码，而没有更改上面的任何表定义内容，并且我无法再在 JTable 中水平滚动。

我似乎找不到任何导致这种情况的原因。这是 Nimbus 的正常行为，还是我可以改变它？如果是这样，怎么做？还是我应该尝试不同的外观和感觉？

**编辑：**

我发现了两件事：

1.  我创建了一个扩展 JTable 的新类来测试它。`getScrollableUnitIncrement`我从 JTable 源中复制了代码，并添加了打印语句。传递的方向似乎总是`SwingConstants.VERTICAL`，而在默认的外观（Mac Aqua 或其他）中，水平和垂直滚动都有效。我不知道这是为什么。

2.  该项目的另一部分也依赖于水平滚动。我用两个 LaF 对其进行了测试，默认情况下它运行良好，但 Nimbus 也不允许我水平滚动。

这可能是 Nimbus 的错误吗？

无论哪种方式，我想我会使用不同的外观和感觉......

**编辑＃2：**

我应该在之前提到这一点。我可以使用窗口中的滚动条水平滚动，但不能使用*我*的触控板或鼠标上的滚轮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-04T02:56:26.623

（注：写完之后，我找到了一个解决方案，出现在这篇文章的附录中。）

要重现此问题，您需要制作所需的滚动条。（这就是为什么有些人难以重现此错误的原因。）这意味着明显的解决方法是让您的水平滚动条可选。（这并不总是实用的。）

只有当您将窗口的宽度拖到超过 1200 像素左右时，您才会看到该错误。在那之前，滚动条可以正常工作。

而且这个问题只出现在 Nimbus 中。（它可能会出现在从 SynthLookAndFeel 创建的其他 L&F 中，但我还没有对此进行调查。）

我发现虚假的滚动条拇指只在您不需要滚动时才会出现，所以这只是一个视觉错误。当您需要滚动时，滚动条拇指将出现并正常工作，尽管它可能不是正确的大小。这可能是它尚未修复的原因。

这是一个示例，您可以在其中比较不同的 L&F。在本例中，选择 Nimbus，然后向内拖动宽度并观察滚动条的大小如何变化。当您比背景图像更宽时，虚假滚动条将可见。一旦你变窄，就会出现一个有效的滚动条拇指，但它会有点太小。随着您变小，滚动条拇指将保持恒定大小，直到您达到某个点（视口宽度为 1282 像素），然后它将开始像预期的那样变小。

对于任何其他 L&F，一旦您变得比背景图像更窄，就会出现一个几乎填满其空间的拇指。它会随着窗口变小而变小，就像它应该的那样。

（本练习还将揭示 Nimbus 的绘制速度比任何其他 L&F 都慢得多。）

您可以通过缩小图标来观察不同但仍然不正确的行为。试试 800 x 450。当视口宽度大于 1035 时，会出现虚假滚动条。（视口大小显示在窗口底部。）

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
/**
 * NimbusScrollBug
 * <p/>
 * @author Miguel Muñoz
 */
public class NimbusScrollBug extends JPanel {
  private static final long serialVersionUID = -4235866781219951631L;
  private static JFrame frame;
  private static boolean firstTime = true;
  private static Point location;
  private static final UIManager.LookAndFeelInfo[] INFOS
          = UIManager.getInstalledLookAndFeels();

  private final JLabel viewPortLabel = new JLabel();

  public static void main(final String[] args) {
    makeMainFrame(new NimbusScrollBug(), "System");
  }

  public static void makeMainFrame(final NimbusScrollBug mainPanel,
                                   final String name) {
    if (firstTime) {
      installLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }
    frame = new JFrame(name);
    final Container contentPane = frame.getContentPane();
    contentPane.setLayout(new BorderLayout());
    contentPane.add(mainPanel, BorderLayout.CENTER);
    contentPane.add(makeButtonPane(mainPanel), BorderLayout.LINE_START);
    frame.setLocationByPlatform(firstTime);
    frame.pack();
    frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    frame.setVisible(true);
    if (firstTime) {
      location = frame.getLocation();
    } else {
      frame.setLocation(location);
    }
    frame.addComponentListener(new ComponentAdapter() {
      @Override
      public void componentMoved(final ComponentEvent e) {
        location = e.getComponent().getLocation();
      }
    });
    firstTime = false;
  }

  private static JPanel makeButtonPane(final NimbusScrollBug mainPanel) {
    JPanel innerButtonPanel = new JPanel(new GridBagLayout());
    GridBagConstraints constraints = new GridBagConstraints();
    constraints.fill = GridBagConstraints.BOTH;
    constraints.gridx = 0; // forces vertical layout.
    for (final UIManager.LookAndFeelInfo lAndF : INFOS) {
      final JButton button = new JButton(lAndF.getName());
      button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(final ActionEvent e) {
          frame.dispose();
          installLookAndFeel(lAndF.getClassName());
          makeMainFrame(new NimbusScrollBug(), lAndF.getName());
        }
      });
      innerButtonPanel.add(button, constraints);
    }
    final String version = System.getProperty("java.version");
    JLabel versionLabel = new JLabel("Java Version " + version);
    innerButtonPanel.add(versionLabel, constraints);

    JPanel outerButtonPanel = new JPanel(new BorderLayout());
    outerButtonPanel.add(innerButtonPanel, BorderLayout.PAGE_START);
    return outerButtonPanel;
  }

  private static void installLookAndFeel(final String className) {
    //noinspection OverlyBroadCatchBlock
    try {
      UIManager.setLookAndFeel(className);
    } catch (Exception e) {
      //noinspection ProhibitedExceptionThrown
      throw new RuntimeException(e);
    }
  }

  private NimbusScrollBug() {
    Icon icon = new Icon() {
      @Override
      public void paintIcon(final Component c, final Graphics g, 
                            final int x, final int y) {
        Graphics2D g2 = (Graphics2D) g;
        g2.translate(x, y);
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);
        Stroke lineStroke = new BasicStroke(6.0f);
        g2.setStroke(lineStroke);
        g2.setColor(Color.white);
        g2.fillRect(0, 0, getIconWidth(), getIconHeight());
        g2.setColor(Color.RED);
        g2.drawLine(0, 0, getIconWidth(), getIconHeight());
        g2.drawLine(0, getIconHeight(), getIconWidth(), 0);
        g2.dispose();
      }

      @Override
      public int getIconWidth() {
        return 1600;
      }

      @Override
      public int getIconHeight() {
        return 900;
      }
    };
    JLabel label = new JLabel(icon);
    setLayout(new BorderLayout());
    final JScrollPane scrollPane = new JScrollPane(label,
            ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS,
            ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
    label.addHierarchyBoundsListener(new HierarchyBoundsAdapter() {
      @Override
      public void ancestorResized(final HierarchyEvent e) {
        viewPortLabel.setText("ViewPort Size: " 
                + scrollPane.getViewport().getSize());
      }
    });
    add(scrollPane, BorderLayout.CENTER);
    add(viewPortLabel, BorderLayout.PAGE_END);
  }
} 
```

***附录：***进一步调查发现了问题。为 Nimbus 创建 UIDefaults 实例的 NimbusDefaults 类具有以下行：

```
d.put("ScrollBar.maximumThumbSize", new DimensionUIResource(1000, 1000)); 
```

任何其他外观都使用 4096 作为这两个值（因此，对于非常大的显示器，它们将显示相同的行为）。

以下方法（可用于安装任何外观和感觉）将解决此问题：

```
private static void installLookAndFeel(final String className) {
  //noinspection OverlyBroadCatchBlock
  try {
    Class<?> lnfClass = Class.forName(className, true,
            Thread.currentThread().getContextClassLoader());
    final LookAndFeel lAndF;
    lAndF = (LookAndFeel) lnfClass.getConstructor().newInstance();

    // Reset the defaults after instantiating, but before
    // calling UIManager.setLookAndFeel(). This fixes the Nimbus bug
    DimensionUIResource dim = new DimensionUIResource(4096, 4096);
    lAndF.getDefaults().put("ScrollBar.maximumThumbSize", dim);
    UIManager.setLookAndFeel(lAndF);
  } catch (Exception e) {
    final String systemName = UIManager.getSystemLookAndFeelClassName();
    // Prevents an infinite recursion that's not very likely...
    // (I like to code defensively)
    if (!className.equals(systemName)) {
      installLookAndFeel(systemName);
    } else {
      // Feel free to handle this any other way.
      //noinspection ProhibitedExceptionThrown
      throw new RuntimeException(e);
    }
  }
} 
```

当然，您可以通过使用更大的值来解决真正大显示器的问题。

我确认垂直滚动条有完全相同的问题，但只有当窗口垂直变得非常大时才能看到。这就是为什么这个问题通常只出现在水平滚动条上的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:44:17.543

根据您提供的信息，我无法重现您的问题（因此无法帮助您找出问题所在）。这是一个适合我的 sscce。你能用这个例子重现问题吗？也许问题是从应用程序的不同部分向下渗透的。

```
public static void main(String[] args){
    try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (Exception e) {
        // If Nimbus is not available, you can set the GUI to another look and feel.
    }

    //Create Frame
    JFrame frame = new JFrame("Title");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create Table
    JTable table = new JTable(0, 2);
    ((DefaultTableModel) table.getModel()).addRow(new Object[]{"Sample Text", "Hi Mom!"});
    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

    // Wrap table in Scroll pane and add to frame
    frame.add(new JScrollPane(table), BorderLayout.CENTER);

    // Finish setting up the frame and display
    frame.setBounds(0, 0, 600,400);
    frame.setPreferredSize(new Dimension(600, 400));
    frame.pack();       
    frame.setVisible(true);
} 
```

# z3 - 如何消除Z3中的约束

> ID：11493274
> 
> 赞同：2
> 
> 时间：2012-07-15T15:45:37.297
> 
> 标签：z3

我有一个像`(t>=0 or t>=1)`and`(t<=2 or t>=2)`这样的约束，实际上约束可以简化为“ `t>=0`”，如何使用z3通过z3获得CNF形式的简化结果？

```
(declare-const t Int)                                                                                  
(assert (and 
            (or
               (>= t 0)
               (>= t 1)
            )
            (or
                (>= t 2)
                 (<= t 2)
            )
            (>= t 0)
            (<= t 1)
        )
)                                                                                         
(apply (par-then (! simplify :elim-and true) tseitin-cnf)) 
```

但是，脚本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:54:36.683

该`simplify`策略仅执行“局部简化”。也就是说，在简化表达式时`t`，它会忽略 的上下文`t`。例如，它可以简化`a + 1 - a`为`1`，但不会简化`a != 0 or b = a + 1`为`a != 0 or b = 1`。上下文简化成本高昂，该`simplify`策略旨在高效且简单。可以使用其他策略来实现您想要的。

这种策略`propagate-ineqs`会传播不平等。但是，它不会处理嵌套在公式中的术语。该策略`split-clause`可用于打破案例\目标中的公式。该策略`propagate-values`将传播断言的值，例如：`a = 0 and b >= a`被简化为`a = 0 and b >= 0`.

该命令`(help-tactic)`将显示所有可用的策略。

这是将您的示例简化为`t >= 0 and t <= 1`.

```
(apply (then simplify propagate-values split-clause propagate-ineqs)) 
```

请注意，组合`par-then`器仅对组合产生许多子目标的策略有用。 `(par-then t1 t2)`适用`t1`于输入目标，并`t2`（并行）适用于由 . 生成的每个子目标`t1`。该`split-clause`策略产生了不止一个子目标。然后（对于更大的例子）它可能更有效地使用：

```
(apply (then simplify propagate-values (par-then split-clause propagate-ineqs))) 
```

# android - android无法找到ID

> ID：11493277
> 
> 赞同：0
> 
> 时间：2012-07-15T15:46:10.960
> 
> 标签：android

我有一个完全可以运行的应用程序，但是今天当我在 Eclipse 中打开它时，它找不到我的任何资源 ID（按钮、EditTexts、TextViews 和布局）。我不知道为什么会这样。就好像我忘记在 XML 中给我的按钮一个 id 一样，但是当我转到文件时，它们仍然在那里。有没有其他人遇到过这个问题/知道如何解决它？

**编辑：** 我还应该补充一点，如果我查看 R.java ，我所有的 id 都在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:15:37.623

我面临同样的问题。我检查了**AndroidManifest**文件，相同的代码重复了两次。所以我

> 从 xml 中删除重复标记

之后我清理并编译，然后它工作正常。

> 还要检查您的 adt version 版本。确保这是最新的。

# math - 如何在二维空间中的点之间进行平滑插值？

> ID：11493278
> 
> 赞同：1
> 
> 时间：2012-07-15T15:46:19.993
> 
> 标签：math, graphics, interpolation, curve, spline

假设我有许多点，每个点由二维笛卡尔坐标系中的 X 和 Y 坐标定义。每个点的 X 坐标都大于其前一个点的 X 坐标，因此不能有任何循环。

如何通过这些点绘制一条平滑线？结果应该看起来像一个正弦波，但具有不同的幅度和波长。只要它允许我在不使用任何线或样条的库函数的情况下计算插值点的 Y 坐标，它就可以简化或近似。语言无关紧要，我对算法感兴趣，而不是实现。为了全面披露，我计划在 JavaScript 中实现它。

我想远离复杂的数学，比如贝塞尔样条曲线或带有控制点的东西。我觉得必须有一个简单的解决方案，可能适用于到点的距离或类似的东西。

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:16:08.820

You cannot avoid "complicated" math here. And it is not that much complicated.

Cubic splines is good solution for your problem. For the similar task I found [this](http://alvyray.com/Memos/CG/Pixar/spline77.pdf) paper with short explanation and a matrix which I used for my computations.

You can try using approximation methods. "Least squares" and its modifications are one of the simplest, and easy to implement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:01:11.767

听起来你需要一个插值多项式。您可以通过多种方式安装它。试试看这个

[http://en.wikipedia.org/wiki/Polynomial_interpolation#Constructing_the_interpolation_polynomial](http://en.wikipedia.org/wiki/Polynomial_interpolation#Constructing_the_interpolation_polynomial)

如果您有大量点，那么您可能会考虑使用近似值，否则您可能会遭受点之间数据的过度拟合和不良表示的困扰。在这种情况下，您可以使用最小二乘多项式逼近。这取决于您需要的准确度。

[http://en.wikipedia.org/wiki/Least_squares#Linear_least_squares](http://en.wikipedia.org/wiki/Least_squares#Linear_least_squares)

特别是，如果您的数据是正弦曲线，您实际上可以使用三角基函数（不同整数频率的正弦或余弦函数）而不是 x 的常规幂来近似数据。

或者，您可以以不涉及控制点的非参数方式使用样条线进行插值

[http://en.wikipedia.org/wiki/Spline_interpolation](http://en.wikipedia.org/wiki/Spline_interpolation)

使用样条曲线将防止您获得使用基本高次多项式插值可以获得的潜在狂野振荡。

与所有近似问题一样，如果不查看数据（及其数量），很难给出明确的答案。最后，如果你有大量数据，基本多项式插值不是你的朋友，就好像你有 1000 个点要插值一样，你需要一个 999 度多项式。

# javascript - JavaScript 和处理浮点确定性

> ID：11493279
> 
> 赞同：5
> 
> 时间：2012-07-15T15:46:23.137
> 
> 标签：javascript, html, floating-point, point, multiplayer

我正在寻找使用在客户端上运行确定性模拟的回滚网络代码构建浏览器多人游戏。在遇到浮点障碍之前，我已经在 Flash 中对网络代码进行了原型设计。

基本上，据我了解，Flash 中的整数数学是通过将`int`s 转换为`Number`s，进行数学运算，然后再转换回`int`. 它显然更快，但这意味着在不同的计算机体系结构之间没有确定性数学的机会。

在我把所有的鸡蛋都扔进 JavaScript 篮子之前，我想问几个问题。

1.  JavaScript 中的所有主要浏览器都有真正的整数运算吗？还是某些浏览器会执行 Flash 操作并转换为浮点数/双精度数以在转换回 int 之前进行数学运算？

2.  是否适合[`BigDecimal`](https://github.com/dtrebbien/BigDecimal.js)或[`BigNum`](https://github.com/jtobey/javascript-bignum)适用于跨不同计算机体系结构的确定性数学？只要在合理范围内，我不介意性能损失。如果没有，是否有一些 JavaScript 定点库可以解决我的问题？

3.  这是一个很长的镜头，但是是否有一个 HTML5 2D 游戏引擎可以确定 x/y 位置和碰撞之类的数学？[至少可以说，游戏引擎](https://github.com/bebraw/jswiki/wiki/Game-Engines)的列表是压倒性的。我对从头开始构建一个确定性的跨浏览器兼容引擎感到不安，但这可能是我必须做的。

注意：根据响应从 HTML5 编辑到 JS。为我缺乏知识而道歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T15:51:18.457

这是一个 Javascript 问题 - 不是 HTML5 问题。

所有 Javascript 数学都是使用 IEEE754 浮点`double`值完成的——没有“整数”。

尽管 IEEE754 要求 (AFAIK) 为任何给定输入的每个操作提供特定答案，但您应该知道 JS 解释器可能可以自由优化表达式、循环等，这样浮点操作实际上不会按照您的顺序执行预计。

在一个程序的过程中，这*可能会*导致在不同的浏览器上产生不同的答案。

# c# - 创建用户时发送电子邮件以验证电子邮件地址

> ID：11493282
> 
> 赞同：0
> 
> 时间：2012-07-15T15:47:07.800
> 
> 标签：c#, asp.net, membership-provider, email-validation

我有一个 asp.net 站点，我在其中使用基于 XML 的 Tiny Membership 提供程序。我想在用户在我的网站上创建一个帐户时通过用户提供的电子邮件地址发送一封电子邮件，该帐户将具有链接。只有在单击此链接后，我才希望激活他的帐户。如何将此功能合并到 Membership Provider 的现有默认行为中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:08:32.410

创建用户时，设置`MembershipUser.IsApproved`为 false，并向新用户发送包含链接的电子邮件。该`Membership.CreateUser`方法有一个`isApproved`用于此目的的参数。

当用户单击链接时，验证然后设置`MembershipUser.IsApproved`为 true。

# windows - 将 C++ 输出流重定向到 VS 2010 中的文件而不更改代码？

> ID：11493283
> 
> 赞同：1
> 
> 时间：2012-07-15T15:47:19.593
> 
> 标签：windows, visual-studio-2010, visual-studio, visual-c++, stream

在命令提示符下，我可能会编译我的程序，然后按如下方式运行：

```
myprogram > output.txt 
```

VS2010中是否有类似的重定向输出流的方法？我想在 IDE 中调试/运行我的程序，但有 cout 流到文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T15:52:06.013

只需重定向[标准输出](http://msdn.microsoft.com/en-us/library/3x292kth.aspx)流指针。

```
freopen( "file.txt", "w", stdout ); 
```

# matrix - 使用矩阵乘法旋转对象

> ID：11493287
> 
> 赞同：-1
> 
> 时间：2012-07-15T15:47:39.860
> 
> 标签：matrix, rotation, multiplication

我已经编写了有关如何在不使用 C++ 中的矩阵的情况下旋转对象的代码，并且效果很好。我无法想出如何使用矩阵乘法旋转同一对象的逻辑。任何帮助，将不胜感激。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:55:53.180

第一步是创建旋转矩阵 - 相关的[Wikipedia 页面](https://en.wikipedia.org/wiki/Rotation_matrix)显示了如何为每个轴执行此操作，然后将它们相乘以组合它们。

然后，将对象中每个顶点的位置向量乘以该矩阵，得到一组新的位置向量。

# eclipse - 我可以在 Eclipse 工作区路径中使用 Windows 环境变量吗？

> ID：11493289
> 
> 赞同：2
> 
> 时间：2012-07-15T15:48:05.803
> 
> 标签：eclipse, path, environment-variables

当您第一次启动 Eclipse 时，它​​会询问您工作区的路径。现在，正常路径应该是`C:\Users\USERNAME\Workspace`，但是，如果我尝试设置`%USERPROFILE%\Workspace`它不起作用，它会`%USERPROFILE%\Workspace`在 Eclipse 文件夹下创建一个名为的文件夹。

那么问题来了：如何使用windows环境变量来指定工作空间路径？谢谢你。

PS：我知道 Eclipse 有可自定义的环境变量，但我没有尝试过，也不想使用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T05:41:14.320

您可以运行`eclipse.exe -data %USERPROFILES%\myCustomWorkspaceDir`以在您想要的子目录中拥有工作区。在这种情况下，您甚至不会看到询问工作区的对话框。

Eclipse还有更多[运行时选项](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。

# ruby-on-rails - 在 RoR 中打印数组元素时如何避免打印数组？

> ID：11493290
> 
> 赞同：0
> 
> 时间：2012-07-15T15:48:07.237
> 
> 标签：ruby-on-rails, ruby, erb

我的控制器中的索引操作是这样的：

```
@dbs = somearray 
```

我与此操作（index.html.erb）相对应的视图正在尝试仅打印`@dbs`数组的元素，但它不仅单独打印元素，而且还打印整个数组（我想避免打印）。index.html.erb 中打印的代码是：

```
<%= for db in @dbs do %>
  <tr>
    <td><%= db %></td>
  </tr>
<% end %> 
```

这打印：

```
["ele1","ele2","ele3"]
----
ele1
----
ele2
----
ele3
---- 
```

如何避免打印：`["ele1","ele2","ele3"]`？我只想用元素打印表格！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:56:16.133

该构造`<%= %>`正在打印到输出中，`<% %>`而不是打印到输出中。只需将一行更改为：

```
<% for db in @dbs do %> 
```

# oop - 为什么没有函数式编程语言成为主流

> ID：11493292
> 
> 赞同：0
> 
> 时间：2012-07-15T15:48:17.823
> 
> 标签：oop, haskell, programming-languages, functional-programming, erlang

既然对haskell、erlang等语言的赞誉如此之高，为什么它们都不能成为主流语言？

是因为他们的学习曲线吗？还是符号符号过多？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T15:49:36.673

因为大多数人不知道如何进行功能编程。

因为克服主导范式是困难的并且需要时间。

因为“没有人因为选择 Java 而被解雇”（上面的推论，来自[FUD](http://en.wikipedia.org/wiki/Fear,_uncertainty_and_doubt)）。

因为现实世界的编程并不总是完美的功能——我们喜欢我们的副作用。

等等。

[在这个较旧的 SO 答案](https://stackoverflow.com/a/2835936/438992)中有更多信息，与我的不同，它包括机枪和外星人。

# javascript - highcharts 可以导出图表和表格数据吗？

> ID：11493295
> 
> 赞同：2
> 
> 时间：2012-07-15T15:48:34.120
> 
> 标签：javascript, jquery, highcharts, export

我试图弄清楚 highcharts 是否可以执行以下操作：

渲染一个标准的水平条形图，它下面包含单独的表格数据（想象一个条形图下面有一个类似 html 的表格。）

用户将能够使用 highcharts 提供的 exporting.js 文件导出整个 svg。

这可能看起来很模糊，但我正在努力思考这个问题。我根本不熟悉 highcharts，但已经彻底查看了文档。据我了解，使用 highcharts 无法实现这样的事情，因为它的文本功能/选项对于表示数据表来说不是那么灵活。

任何可能的见解都会很棒，谢谢大家！

D.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T12:37:08.163

如果你查看 HighCharts 论坛，你可以看到一个 hack 来获得[它](http://highslide.com/forum/viewtopic.php?f=10&t=13156)。它不是很干净，但确实很神奇。如果您的数据表非常大，您可能需要考虑一次只显示部分数据（使用放大图表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-21T13:26:50.390

几年后偶然发现寻找相关的东西，但我也发现[了这个 JSFiddle](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/studies/exporting-table/)，它可能更接近于请求的内容，而不是上面的断开链接。

```
Highcharts.drawTable = function () {
    // SVG fun
};

window.chart = Highcharts.chart('container', {
    ...chartConfig
}); 
```

它使用系列数据在 SVG 中绘制表格。并不是说这很理想，但它确实适用于图像导出，而[showTable 选项则不行](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/export-data/showtable/)。

```
Highcharts.chart('container', {
    ...chartConfig,
    exporting: {
        showTable: true
    }
}); 
```

第三个可能是最好的折衷方案是使用字幕 HTML 文本插入表格。

```
Highcharts.chart('container', {
    ...chartConfig,
    subtitle: {
        title: '<div>Anything goes</div>',
        useHTML: true
    }
}); 
```

在导出时为图表动态设置此项（允许您保留要在网页上显示的任何字幕）涉及调用[setTitle 方法](https://stackoverflow.com/a/7907267/2276412)：

```
chart.setTitle({text: "New Title"}); 
```

# javascript - 与 OO 相比，编写“功能性”Javascript 有什么好处？

> ID：11493296
> 
> 赞同：1
> 
> 时间：2012-07-15T15:48:37.093
> 
> 标签：javascript, anonymous-function

我经常遇到由许多匿名函数组成的 Javascript 代码片段，这些函数在它们被创建的地方被调用，[例如](https://code.downthemall.net/repos/trunk/modules/manager/preallocator/win.js)：

```
var prealloc = (function() {
    // some definitions here

    return function prealloc_win(file, size, perms, sparseOk) {
        // function body
    };
})();
// can be called like this:
prealloc(...); 
```

所以这调用了一个匿名函数，该函数返回另一个函数`prealloc_win`。对我来说，这似乎等同于实例化一个类，其中结果对象公开函数`prealloc_win`：

```
function preallocObj() { 
    // some definitions here  
    this.prealloc_win = function(file, size, perms, sparseOk) {
        // function body
    }; 
}
prealloc = new preallocObj();
// can be called like this:
prealloc.prealloc_win(...); 
```

这个假设正确吗？使用直接调用的匿名函数有什么好处？为什么这个成语在 Javascript 中如此常见，但在其他可以以相同方式编写的语言（C、C++、Python）中却不常见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:57:39.687

你几乎有正确的想法。这个模块模式/函数构建器的好处是生成的函数可以包含它自己的内部定义或状态。

它基本上只是一种使用私有变量或常量创建函数的方法。考虑效率较低的替代方案：

```
var prealloc = function() {
  // some definitions here
  // function body
} 
```

每次调用此函数时，它都会重新分配/实例化其变量，增加不必要的性能开销并覆盖先前调用产生的任何状态数据。

当存在一些对函数的工作很重要的变量时，此方法很有用，您只希望对其进行私有访问，或者您需要在调用之间保留而不污染外部范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:29:05.847

交易是`preallocObj`该类说这是可以多次实例化的东西。我可以创建更多它的实例，即使它并不是真的为此而设计的。您可以采取一些技巧来防止这种情况发生，但为此使用立即调用的匿名函数会更容易。

使用立即创建和调用的匿名函数，会创建一个“类”，立即“实例化”并分配给它，`prealloc`并且无法引用在`prealloc`此之后创建对象的原始匿名函数。它被创建、调用和丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T15:56:25.233

Javascript 从根本上与 C++、JAVA 和 Python 非常不同，应该以不同的方式编写。冒着重复的风险，Javascript 不是 OOP 语言，它是原型语言。 [雅虎的Douglas Crockford](http://javascript.crockford.com/)（JSON 的发明者）有一些精彩的文章和特别是题为“Javascript - 好的部分”的视频，您应该全部观看。

# c - 需要帮助在 C 中重置静态全局变量

> ID：11493308
> 
> 赞同：1
> 
> 时间：2012-07-15T15:50:11.587
> 
> 标签：c, reference, struct

我要直截了当地说，在 C 方面我是一个绝对的新手，我在这里有点超出我的深度，需要一点帮助。我正在调整一些源代码，需要重置一些静态全局变量，以便它们可以再次使用。我已经尝试了各种以错误访问错误结束的事情 - 任何帮助将不胜感激。

```
static struct option long_options[2 * countof (option_data) + 1];
static char short_options[128];
static unsigned char optmap[96]; 
```

这是我尝试过的：

```
memset(&long_options[0], 0, 2 * countof (option_data) + 1);
memset(&short_options[0], 0, sizeof(short_options)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:01:03.317

```
memset(long_options, 0, sizeof(long_options));
memset(short_options, 0, sizeof(short_options));
memset(optmap, 0, sizeof(optmap)); 
```

# java - 原子参考用法

> ID：11493309
> 
> 赞同：1
> 
> 时间：2012-07-15T15:50:18.557
> 
> 标签：java, multithreading, compare-and-swap

假设您有以下课程

```
public class AccessStatistics {
  private final int noPages, noErrors;
  public AccessStatistics(int noPages, int noErrors) {
    this.noPages = noPages;
    this.noErrors = noErrors;
  }
  public int getNoPages() { return noPages; }
  public int getNoErrors() { return noErrors; }
} 
```

然后执行以下代码

```
private AtomicReference<AccessStatistics> stats =
  new AtomicReference<AccessStatistics>(new AccessStatistics(0, 0));

public void incrementPageCount(boolean wasError) {
  AccessStatistics prev, newValue;
  do {
    prev = stats.get();
    int noPages = prev.getNoPages() + 1;
    int noErrors = prev.getNoErrors;
    if (wasError) {
      noErrors++;
    }
    newValue = new AccessStatistics(noPages, noErrors);
  } while (!stats.compareAndSet(prev, newValue));
} 
```

在最后两行

```
newValue = new AccessStatistics(noPages, noErrors);
while (!stats.compareAndSet(prev, newValue)) 
```

这是否意味着新创建的 AccessStatistics 实例与当前的 AccessStatistics 实例具有相同的引用。怎么会这样 ？谁能解释一下。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:56:50.287

`stats.compareAndSet(prev, newValue)`如果持有的当前引用`stats`不是，将失败并返回 false `prev`。

通常，在多线程环境中，很有可能在`prev = stats.get();`和`stats.compareAndSet(prev, newValue);`另一个线程之间修改了`stats`.

`stats.compareAndSet(prev, newValue);`真的说：

*   如果`stats`仍然持有对 的引用`prev`，就像之前的 5 行一样，则更新它以持有对 的引用`newValue`
*   但是，如果另一个线程已经更改了`stats`自我上次检查 5 行以来所持有的引用，则丢弃我的计算并循环以重新计算一个新的`newValue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:57:25.880

新创建的对象是新的。在它被创建的那一行之后，唯一引用它的是`newValue`. 没有别的可以——​​它怎么可能？如果在此期间没有其他任何设置，则唯一的`compareAndSet()`设置将其设置为第三个值，除了您知道的旧值`prev`和您制作的新值`newValue`。

# rest - REST 中的复杂事务？

> ID：11493311
> 
> 赞同：4
> 
> 时间：2012-07-15T15:50:37.390
> 
> 标签：rest, transactions

这是一个后续问题： [REST 中的事务？](https://stackoverflow.com/questions/147207/transactions-in-rest)

如何实现一个 REST API，为它的客户提供完整的事务能力？

例如，如果客户想要创建一个将执行以下操作的事务：

*   创建一个或多个对象。
*   更新一个或多个对象。
*   删除一个或多个对象。

虽然它是事务的有效要求，但它似乎打破了使用 PUT 创建、POST 更新和 DELETE 删除的 REST 要求。

我当前的解决方案涉及将整个系统作为一个分层对象结构处理并使用 POST 操作。例如：

```
POST /system
{
    "Users" : [
        {
            "ID":"123",
            "name":"bob"   
            // update the user with ID matching 123, 
            // set his name to "bob"
        },
        {
            "ID":"456",
            "delete":"true"
            // trigger a delete on user with ID 456
        }
    ],
    "Products" : [
        {
            "name":"foo"   
            // create a product named "foo" since no ID is provided
        },
    ]
} 
```

到目前为止，这满足了大多数 REST 要求，除了“删除”标志，它并不是真正的数据。

我很想知道是否有人找到了更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:31:14.163

同意 Jan 的观点，您需要在服务器端处理。但缺点是代码可维护性很差。是的，我对 Restful 应用程序的经验表明，在 RESTFul 架构中坚持 PUT 和 DELETE 动词非常困难，因为各种浏览器版本的支持对他们来说是非常有限的.

# php - Jquery 不加载 PHP 文件

> ID：11493314
> 
> 赞同：0
> 
> 时间：2012-07-15T15:50:44.100
> 
> 标签：php, javascript, jquery, html, ajax

我无法使用 JQuery/Ajax 将 PHP 文件的内容加载到 div 标记中。

这是我正在加载文件的页面：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

<script>
function init() {
    reloadChat();
    setInterval (reloadChat, 5000);
}

function reloadChat() {
    $.ajax({  
        url: "chat.php",  
        cache: false,  
        success: function(){
            $("#chatmenu").load("chat.php");
        },  
    });  
}
</script>

<body onLoad='init()'></body>

<div id='chatmenu'></div> 
```

我正在加载的 PHP 文件 (chat.php) 在同一个文件夹中，并且只是一个 echo 语句：

```
<?php echo "test"; ?> 
```

为了确保我的 Javascript 函数没有问题，我在成功函数下添加了一个警报，它确实每 5 秒提醒我一次，所以我认为这是负载语句的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:53:07.263

立即使用`.load()`，无需先发出 Ajax 请求：

```
function reloadChat() {
    $("#chatmenu").load("chat.php");  
} 
```

**更新：**

我注意到在您的示例代码中，您在`div`元素之前关闭了 body-tag。

```
<body onLoad='init()'></body> <!-- This ain't right --> 
<div id='chatmenu'></div> 
```

试试这个：

```
<body onLoad='init()'>
    <div id='chatmenu'></div>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:53:24.033

尝试这个：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

<script>

function init() {
    reloadChat();
    setInterval (reloadChat, 5000);
}

function reloadChat() {
    $.ajax({  
        url: "chat.php",  
        cache: false,  
        success: function(response){
            $("#chatmenu").text(response);
        },  
    });  
}

</script>

<body onLoad='init()'></body>

<div id='chatmenu'>

</div> 
```

另外，看在上帝的份上，请使用最新版本的 jQuery

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T16:08:14.650

看起来您的第一个请求`$.ajax`将返回“测试”，然后您将其用作`$("#chatmenu").load`.

尝试这个：

```
function reloadChat() {
    $.ajax({  
        url: "chat.php",  
        cache: false,  
        success: function(data){
            $("#chatmenu").append(data);
        },  
    });  
} 
```

或者，如果您想替换 Christofer Eliasson 发布的方法的内容，`#chatmenu`您只需调用即可`$("#chatmenu").load("chat.php")`。`reloadChat`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T15:54:05.937

把它们放在一起：

```
<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <div id="chatmenu"></div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
      $(function() {
        setInterval (function() { 
           $("#chatmenu").load("chat.php");
        }, 5000);
      });
    </script>
  </body>
</html> 
```

# android - Android布局xml文件未运行

> ID：11493318
> 
> 赞同：0
> 
> 时间：2012-07-15T15:51:17.400
> 
> 标签：android, eclipse

下面是布局 main.xml 文件的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button" />

</LinearLayout> 
```

这是活动文件

```
package alvisoft.helloworld;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

但是当我使用 android SDK 在 eclipse 上运行它时，它显示空白屏幕而不是显示按钮和 textview。我是绝对的初学者，不知道有什么问题请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:24:08.470

我也会像你一样犯错。您可以按如下方式修复此错误： - 在选项卡 Graphic_layout 上，您将布局 LinearLayout（在左侧）拖放到界面中。- 然后在 main.xml 选项卡上，您在此 LinearLayout 中创建了新代码。此错误已修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:41:45.567

我想你忘记在`AndroidManifest.xml`.

像这样更新您的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest package="app.sample" android:versionCode="1"
    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">

    <application android:icon="@drawable/icon" android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen">

        <activity android:name=".MainActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

我试过你的代码。它工作正常。但`R.menu.main`文件丢失了。我删除了选项菜单并尝试了

# mod-rewrite - nginx重定向除一个以外的所有目录

> ID：11493325
> 
> 赞同：19
> 
> 时间：2012-07-15T15:51:52.473
> 
> 标签：mod-rewrite, nginx

我正在使用 nginx 1.0.8，我正在尝试将所有访问者从 www.mysite.com/dir 重定向到谷歌搜索页面[http://www.google.com/search?q=dir](http://www.google.com/search?q=dir) 其中 dir 是一个变量，但是，如果 dir=="blog"( www.mysite.com/blog) 我只想加载博客内容（Wordpress）。

这是我的配置：

```
 location / {
        root   html;
        index  index.html index.htm index.php;
    }

    location /blog {
          root   html;
          index index.php;
          try_files $uri $uri/ /blog/index.php;
    }

    location ~ ^/(.*)$ {
          root   html;
          rewrite ^/(.*) http://www.google.com/search?q=$1 permanent;
    } 
```

如果我这样做，甚至 www.mysite.com/blog 将被重定向到谷歌搜索页面。如果我删除最后一个位置 www.mysite.com/blog 效果很好。

从我在这里读到的内容：[http](http://wiki.nginx.org/HttpCoreModule#location) ://wiki.nginx.org/HttpCoreModule#location似乎优先级将首先放在正则表达式上，并且与查询匹配的第一个正则表达式将停止搜索。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T14:39:33.217

```
location / {
    rewrite ^/(.*)$ http://www.google.com/search?q=$1 permanent;
}

location /blog {
      root   html;
      index index.php;
      try_files $uri $uri/ /blog/index.php;
} 
```

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-04T10:27:26.880

This situation can also be handled using only regex. Though this is a very old question and it has been marked answered, I'm adding another solution.

If you use multiple loop forwards using reverse proxy this is the easiest way without having to add a separate location block for every directory.

```
root html;
index index.php;

location / { #Match all dir
      try_files $uri $uri/ $uri/index.php;
}

location ~ /(?!blog|item2)(.*)$ { #Match all dir except those dir items skipped
      rewrite ^/(.*) http://www.google.com/search?q=$1 permanent;
} 
```

# java - 数据存储为 blob，但存储前后长度不同

> ID：11493327
> 
> 赞同：-2
> 
> 时间：2012-07-15T15:51:59.030
> 
> 标签：java, android, mysql, tomcat6

我已经被这个问题困扰了好几天，并且没有解决这个问题的办法，所以需要寻求更高的权力来寻求帮助。为了将数据发送到 apache tomcat servlet，我有这个：

```
 temp = items.get(4);
  Blob b = connection.createBlob();
  byte [] byteArray = null;
  byteArray = temp.get();
  b.setBytes(1, byteArray);
  sql = "insert into userdata (data)+"values ('"+b+"')";
  s = connection.createStatement();
  s.execute(sql);
  out.println("Data successfully uploaded!"); 
```

为了从 servlet 接收数据，我有这个：

```
 Blob b = connection.createBlob();
  //String data = null;
  byte [] buffer;

  temp = items.get(1);
  String comments = temp.getString();
  System.out.println(comments);
  sql = "select sounddata from userdata where comments = '"+comments+"'";
  s = connection.createStatement();
  s.executeQuery(sql);
  rs = s.getResultSet();      
  while (rs.next ())  
  {
      b = rs.getBlob("data");

  }
  buffer = b.getBytes(1, (int)b.length());
  System.out.println("AFTER:"+b.length());
  System.out.println("FILE:"+b); 
```

但是，在我插入 mysql 数据库之前和之后，我的 blob 长度是不同的。我有一个 34912 的 blob 长度，但是当我检索它时，它只有 27！这里可能是什么问题？

我将错误追溯到 blob 的差异。将 blob 插入数据库时​​，blob 值为“com.mysql.jdbc.Blob@2db19d”，但当我检索它时变为“com.mysql.jdbc.Blob@14d7745”。为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:34:23.470

这是你的问题：

```
sql = "insert into userdata (data)+"values ('"+b+"')"; 
```

这将无法正确逃脱`b`。例如，`b`可能有一个引号字符！您需要使用 a[`PreparedStatement`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)来构建您的 sql，以便`b`正确转义。

另外，`"data"`!= `"sounddata"`。

# c# - 为什么要列出 .ForEach() 实现 for 循环？

> ID：11493330
> 
> 赞同：12
> 
> 时间：2012-07-15T15:52:30.247
> 
> 标签：c#, .net, list, foreach

我不明白为什么`List<T>.ForEach()`扩展方法在后台实现了一个`for`循环。这打开了修改集合的可能性。在这种情况下，正常人`foreach`会抛出异常，所以肯定`ForEach()`应该以同样的方式做出反应吗？

如果您出于某种原因必须改变集合，那么您肯定应该在循环中手动迭代集合`for`吗？

`foreach`和之间似乎存在一些语义矛盾`List<T>.ForEach()`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T15:57:42.047

因为[List.ForEach](http://msdn.microsoft.com/it-it/library/bwabdf9z.aspx)遵循 MSDN 的定义：

> 对 List 的每个元素执行指定的操作。

这意味着`Action`在元素上执行，可能会改变元素*或集合本身*。在这种情况下，没有其他方法（如果不创建昂贵的克隆集合，*如果*可能的话）负担得起，然后使用简单的`for`.

如果在 中的迭代期间更改集合`foreach`，它自然会引发异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T16:00:09.710

`foreach`是 C# 语言元素。它遵循 C# 的规则。

`List<T>.ForEach`是一种 .NET Framework 方法。它遵循 .NET 的规则，而`foreach`这并不存在。

这是“语言与框架”混淆的一个例子。框架方法必须适用于多种语言，并且这些语言（通常）具有相互矛盾的语义。

这种“语言与框架”混淆的另一个例子是`Enumerable.Cast`.net 3 和 .NET 3.5 之间的重大变化。在 .NET 3 中，`Cast`使用 C# 语义。在 .net 3.5 中，它被更改为使用 .net 语义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-04T15:20:15.777

只有 BCL 团队的成员可以肯定地告诉我们，但这可能只是一个`List<T>.ForEach`让您修改列表的疏忽。

首先，大卫 B 的回答对我来说没有意义。它`List<T>`不是 C#，而是检查您是否在循环中修改列表，如果这样做则`foreach`抛出一个。`InvalidOperationException`它与您使用的语言无关。

[其次，文档](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)中有这个警告：

> 不支持修改 Action<T> 委托主体中的基础集合，这会导致未定义的行为。

我发现 BCL 团队不太可能想要这样一种简单的方法，比如`ForEach`具有未定义的行为。

第三，从 .NET 4.5 开始，如果委托修改列表，`List<T>.ForEach` *将*抛出一个。`InvalidOperationException`如果程序依赖于旧行为，则在重新编译为目标 .NET 4.5 时它将[停止工作。](http://msdn.microsoft.com/en-us/library/hh367887.aspx#core)Microsoft 愿意接受这一重大更改的事实强烈表明最初的行为是无意的，不应依赖。

作为参考，`List<T>.ForEach`以下是 .NET 4.0 中的实现方式，直接来自参考源：

```
public void ForEach(Action<T> action) {
    if( action == null) {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.match);
    }
    Contract.EndContractBlock();

    for(int i = 0 ; i < _size; i++) {
        action(_items[i]);
    }
} 
```

以下是 .NET 4.5 中的更改方式：

```
public void ForEach(Action<T> action) {
    if( action == null) {
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.match);
    }
    Contract.EndContractBlock();

    int version = _version;

    for(int i = 0 ; i < _size; i++) {
        if (version != _version && BinaryCompatibility.TargetsAtLeast_Desktop_V4_5) {
            break;
        }
        action(_items[i]);
    }

    if (version != _version && BinaryCompatibility.TargetsAtLeast_Desktop_V4_5)
        ThrowHelper.ThrowInvalidOperationException(ExceptionResource.InvalidOperation_EnumFailedVersion);
} 
```

# ruby-on-rails - 将参数从 as_json 传递给模型

> ID：11493333
> 
> 赞同：4
> 
> 时间：2012-07-15T15:52:51.803
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

控制器：

```
user = User.find(params[:id])
respond_with({:posts => @posts.as_json}) 
```

模型：

```
def as_json(options = {})
  {
    name: self.name,
    ...
  }
end 
```

我想将参数传递`params[:id]`给`as_json`函数以更改 JSON 显示中的内容。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:53:22.943

好吧， as_json 确实需要一个选项哈希，所以我想你可以使用它来调用它

```
respond_with({:posts => @posts.as_json(:params => params)}) 
```

然后，您就可以在定义中引用参数`as_json`：

```
def as_json(options = {})
  params = options[:params] || {}
  {
    name: self.name,
    params_id: params[:id]
    ...
  }
end 
```

# windows-7 - Windows 操作系统的 Selenium 等效项

> ID：11493344
> 
> 赞同：2
> 
> 时间：2012-07-15T15:54:17.870
> 
> 标签：windows-7, selenium, automation

根据这篇[文章](https://stackoverflow.com/questions/3957654/how-to-make-selenium-ide-as-exe)，我想问一下 Windows 7 中是否有任何程序可用，可以记录如下事件

1.  点击开始按钮
2.  推出 Netbeans
3.  单击的选项
4.  输入值

...ETC？

然后再玩一次，这样我就不必每次都重新配置一些东西或许多其他类似的用例？

谢谢

ps 我在这里更具体，无意复制任何帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:03:48.290

很多。

免费，您可以使用像[Sikuli](http://sikuli.org/)这样的应用程序它有很好的文档，我们目前将它用于 iOS 和 Android 应用程序自动化。

专业/企业工具可从通常的供应商处获得，[IBM Rational 套件](http://www-01.ibm.com/software/rational/)、[HP 的 WinRunner](http://en.wikipedia.org/wiki/HP_WinRunner)可用于各种用途。

# c++ - 为什么 WNetAddConnection2 调用 WNetCancelConnection2 成功后仍然返回 1219？

> ID：11493345
> 
> 赞同：10
> 
> 时间：2012-07-15T15:54:21.537
> 
> 标签：c++, windows, winapi, active-directory

我写了一些代码来连接远程服务器上的一些共享。如果`WNetAddConnection2`返回`ERROR_SESSION_CREDENTIAL_CONFLICT`（1219），我将首先通过`WNetCancelConnection2`（返回NO_ERROR）取消连接。然后重新连接。但`WNetAddConnection2`仍然返回`1219`。为什么会这样以及如何解决？

这是我的代码

```
BOOL ADDirectorySearch::IPCConnect(CString strServerName, CString strDomainName, CString strUserName, CString strPassWord)
{
    CString strServerNameWithSlash = _T("\\\\") + strServerName; //actually is \\klbnt
    CString strFullUserName = strDomainName + _T("\\") + strUserName; //is domaintest\administrator
    _bstr_t bstrServerNameWithSlash = strServerNameWithSlash;
    _bstr_t bstrFullUserName = strFullUserName;
    _bstr_t bstrPassWord = strPassWord;
    DWORD dwResult;
    NETRESOURCEW netResource;
    memset(&netResource, 0, sizeof(netResource));
    netResource.dwScope = RESOURCE_GLOBALNET;  
    netResource.dwType = RESOURCETYPE_DISK;
    netResource.dwDisplayType = RESOURCEDISPLAYTYPE_GENERIC;  
    netResource.dwUsage = RESOURCEUSAGE_CONNECTABLE;
    netResource.lpProvider = L"";
    netResource.lpRemoteName = bstrServerNameWithSlash;//Remote IP like:\\192.168.1.11
    dwResult = WNetAddConnection2W(&netResource, bstrPassWord, bstrFullUserName, CONNECT_INTERACTIVE);
    if (dwResult == ERROR_SESSION_CREDENTIAL_CONFLICT)
    {
        dwResult = WNetCancelConnection2W(bstrServerNameWithSlash, CONNECT_UPDATE_PROFILE, TRUE);
        if (dwResult == NO_ERROR)
        {
            dwResult = WNetAddConnection2W(&netResource, bstrPassWord, bstrFullUserName, CONNECT_INTERACTIVE);
        }
        else
        {
            //MyMessageBox_Error(_T("IPCConnect Error."), _T("Error"));
            return FALSE;
        }
    }
    if (dwResult == NO_ERROR)
    {
        return TRUE;
    }
    else
    {
        //MyMessageBox_Error(_T("IPCConnect Error."), _T("Error"));
        return FALSE;
    }
} 
```

仅供参考：在cmd中输入“net use”后，我得到了这个，我觉得有一些错误：

```
Status       Local     Remote                    Network

-------------------------------------------------------------------------------
OK                     \\klbnt\NRDC1001          Microsoft Windows Network
The command completed successfully. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T03:17:28.567

我现在刚刚遇到这个问题，基本上它似乎是由于另一个进程仍然打开文件，*即使*我指定为强制关闭连接`"true"`的最后一个参数。`WNetCancelConnection2()`一旦我关闭了其他进程，我就能够在凭据连接和重新连接到同一个共享之间成功切换。这是在 Windows 2012（64 位）上，共享是本地的（由机器名引用）。

但是...如果您想连接到同一台机器上的不同共享，这仍然是一个问题。如果我尝试连接到`\\mymachine\share1`as `user1`then 到`\\mymachine\share2`as `user2`，我会收到 1219 错误（即使它处于完全不同的过程中）。在我可以连接到之前，`WNetCancelConnnection`我必须明确调用，这意味着在您连接到特定机器上的共享时，您可能必须首先枚举现有连接并关闭每个连接。`\\mymachine\share1``share2`

比较郁闷，看不懂这里的设计原理。似乎创建临时连接等的标志对这种行为也没有影响。我真正想做的是说“对于这个线程，连接到这台机器上的这个共享，并作为这个用户，这样所有访问共享上的文件的尝试都是用那个用户的凭据完成的”。这样其他进程/线程正在做的事情就不会导致当前进程/线程出现问题。

# javascript - 更改自定义绑定处理程序，以便使用 IIFE 分配它

> ID：11493346
> 
> 赞同：0
> 
> 时间：2012-07-15T15:54:45.293
> 
> 标签：javascript, jquery, iife

我有一个自定义绑定处理程序，想将其修改为 IIFE。我一直在互联网上阅读有关 IIFE 的信息，但无法将我的自定义句柄更改为 IIFE。那么如何将以下绑定处理程序更改为 IIFE

```
define(['knockout', 'jquery'], function(ko, $) {
    ko.bindingHandlers.er = {
        init: function(el, va) {
            console.log($(el).find('.n').text());
            $(el).find('.edit').hide().end().find('.detail').show();
            $(el).find('.ebtn').on('click', function() {
                $(el).find('.edit, .detail').toggle();
            });
            $(el).find('.ubtn').on('click', function() {
                $(el).find('.edit, .detail').toggle();
            });
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:30:57.470

很不清楚你在这里问什么:(。
立即调用函数表达式（IIFE）是一个立即执行的匿名函数。在你的情况下，如果你不能更具体，真的很难猜到你想要什么放置 iife。
我通常将整个代码放入 iife 中，以利用函数范围并将其用作闭包，从而最大限度地减少全局对象污染，它通常如下所示：

```
(function(global,undefined){
    // the code goes here
    // global === window
})(this); 
```

在您的情况下，您可以执行相同的操作：

```
 (function(global,undefined){
    define(['knockout','jquery'],function(ko,$){
        // ...
    });
})(this); 
```

**更新：**
这里有一些解释给那些需要它们的人。使用以下模式：

*   防止全局变量泄漏，例如`var foo = bar;`（之后`window.foo === foo`）
*   以防止该`undefined`值被覆盖。假设您要检查是否有未定义的内容。你有两种方法可以做到：

    *   `typeof foo === 'undefined'`
    *   `foo === undefined`
        第二个较短，但通常不受欢迎，因为可以简单地覆盖`undefined`变量的值：`undefined = 13;`。
        通过不为 iife 中的参数提供实际值`undefined`，您实际上是将`undefined`变量重置为未定义。
*   泛化全局对象
    *   有人说访问`global`变量比访问`window`对象更快，因为 js 引擎首先查看较低的范围
    *   如果您在与浏览器不同的环境中运行代码并且您调用了该`window`对象，您的代码可能会中断，因为全局对象因环境而异（adobe pdfs、node js、rhino ...）。这可以通过将全局对象重新映射到一个变量（在我们的例子中）来解决，方法是将它从全局范围内`global`引用到对象`this`

# magento - Magento - 添加数量框以追加销售/相关产品

> ID：11493348
> 
> 赞同：0
> 
> 时间：2012-07-15T15:55:23.657
> 
> 标签：magento, shopping-cart

我有一个关于 Magento 的问题。我希望能够向产品详细信息页面上显示的“相关产品”列表中显示的产品添加数量框。这样，访问者可以多次订购相关商品，而不是每次操作只能订购一次。我已经为此寻找解决方案超过 2 周，但我似乎找不到任何有用的东西。谁能帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:10:26.733

认为您需要编辑此模板：`your_package/your_theme/template/catalog/product/list/upsell.phtml`. 如果您的主题中没有该文件，只需将其复制到您的主题中并按照路径的其余部分进行打包。在那里您可以添加您的数量输入框并添加添加到购物车按钮并更改 URL 以包含数量。您应该记住，您可能还会将可配置/捆绑产品显示为追加销售，因此您也应该涵盖这些。

# java - java中的乘法使用*=?

> ID：11493351
> 
> 赞同：1
> 
> 时间：2012-07-15T15:55:36.050
> 
> 标签：java, operator-keyword, multiplication

`(i += 1)`相当于`i = i + 1`

是否可以通过使用乘法来获得类似上面的内容：

`(i *= 1)`, `i = i * 1`

我已经通过声明为 double 来尝试它，但我的结果中保持 0.0 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:57:27.300

听起来你是在将零乘以一。

`0 * 1 = 0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:59:55.943

首先声明`double i = 1.0;`（或者`int i = 1;`如果不需要十进制值。）您似乎乘以零。当然，除非您修改其他地方的值，否则`i`时间`1`将永远存在。`1``i`

除此之外，请注意这*几乎*`i *= 1`等同于. 魔鬼在细节中，因为第一种形式将根据 Java 语言规范第[5.1.3](https://stackoverflow.com/a/7456548/201359)节执行隐式转换：*`i = i * 1`*

 *> 复合赋值表达式自动将它们执行的计算结果转换为左侧变量的类型。如果结果的类型与变量的类型相同，则强制转换无效。但是，如果结果的类型比变量的类型更宽，则复合赋值运算符将执行静默缩小原语转换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:59:30.317

如果`i`在相乘之前没有赋值（除了零），那么它将是 0*1 等于 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T16:00:43.950

它采用 double 的默认值，正如您在类范围中声明的那样......

尝试这个...

```
class Test implements TestInterface {

        public static void main(String[] args){
            double i = 1;
            System.out.println(i *= 1);
        }
     } 
```*

# xcode - 从 UIButton 拨打电话号码

> ID：11493353
> 
> 赞同：1
> 
> 时间：2012-07-15T15:56:08.880
> 
> 标签：xcode, ios5, uiapplication

我已经搜索了所有问题，但似乎找不到我的答案。

我有以下 IBAction。每次点击电话号码时都会崩溃。我已经返回数据库并将电话号码格式化为 5551235555 而不是 (555)-123-5555。

```
- (IBAction)callPhone:(UIButton *)sender{

    Bar *items = self.detailItem;
    NSURL *pn = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", items.barPhone]];
    [[UIApplication sharedApplication] openURL:pn];
}

- (void)setCallButton:(UIButton *)callButton{

    Bar *items = self.detailItem;
    [callButton setTitle:items.barPhone
                forState:UIControlStateNormal];
} 
```

任何代码指导都会被应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:01:01.473

`Bar *items = self.detailItem;`没有启动，所以这就是它返回 nil 的原因。尝试以下操作：

```
Bar *items = [[Bar alloc] init];
items = self.detailItem; 
```

或者你应该做的是**`items`**为这个特定的类制作一个 ivar。然后，您可以启动`items`一次并在整个课堂上使用它。

# java - 绘制图表

> ID：11493357
> 
> 赞同：0
> 
> 时间：2012-07-15T15:56:26.927
> 
> 标签：java, swing, graph, jfreechart, jgrapht

嗨，我对 java 很陌生，但是我需要在 JApplet 中绘制图表。我已经设法声明了所有变量和类，方程正在工作（当它自己编译时）。但我得到的只是一条海峡！谁能告诉我我做错了什么？！在这个小程序中，将要求用户插入 abcd 的值以及 x 轴的最小值和最大值

这是我的代码.......任何帮助将不胜感激:)

```
package CubicEquationSolver;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.*;

public class graphApplet extends JApplet implements ActionListener {

    private static class g {
        public g() {
        }
    }

    int a;
    int b;
    int c;
    int d;

    int minimumX;
    int maximumX;
    int minimumY;
    int maximumY;

    int xCoOrdinates[];
    int yCoOrdinates[];

    int y;

    // Setting labels
    JLabel labelA = new JLabel("Enter value of A");
    JLabel labelB = new JLabel("Enter value of B");
    JLabel labelC = new JLabel("Enter value of C");
    JLabel labelD = new JLabel("Enter value of D");
    JLabel labelMinX = new JLabel("Minimum X value");
    JLabel labelMaxX = new JLabel("Maximum X value");
    JLabel message = new JLabel("Please insert your values");

    // Values will be entered here using JTextField
    JTextField textA = new JTextField();
    JTextField textB = new JTextField();
    JTextField textC = new JTextField();
    JTextField textD = new JTextField();
    JTextField minX = new JTextField();
    JTextField maxX = new JTextField();
    JTextField ref = new JTextField("Enter value 0-1");

    // declaring the layout for layout manager
    JPanel north = new JPanel();
    JPanel south = new JPanel();
    JPanel west = new JPanel();
    JPanel east = new JPanel();
    JPanel center = new JPanel();

    // declaring buttons using JButtons
    JButton calculate = new JButton("Calculate");
    JButton delete = new JButton("Delete");
    JButton refine = new JButton("Refine");

    // Calling from equation class
    // equation eq = new equation();

    private JPanel panel;
    private int width = center.getWidth();
    private int height = center.getHeight();

    @Override
    public void init() {
        // setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container c = this.getContentPane();
        this.setSize(900, 480);
        this.setVisible(true);

        // listener to buttons
        calculate.addActionListener(this);
        delete.addActionListener(this);
        refine.addActionListener(this);

        // listeer to user's input
        textA.addActionListener(this);
        textB.addActionListener(this);
        textC.addActionListener(this);
        textD.addActionListener(this);
        minX.addActionListener(this);
        maxX.addActionListener(this);
        ref.addActionListener(this);

        // assigning colours to panels to be distinguished
        north.setBackground(Color.LIGHT_GRAY);
        south.setBackground(Color.LIGHT_GRAY);
        west.setBackground(Color.YELLOW);
        east.setBackground(Color.GREEN);
        center.setBackground(Color.GRAY);

        // Declaring border
        BorderLayout layoutBorder = new BorderLayout();
        // setting up the grid (x rows, y clumns, space, space)
        GridLayout layoutGrid = new GridLayout(2, 8, 4, 4);

        // layout grid
        north.setLayout(layoutGrid);
        // set labels
        north.add(labelA);
        north.add(labelB);
        north.add(labelC);
        north.add(labelD);
        north.add(labelMinX);
        north.add(labelMaxX);
        north.add(ref);

        // calculate button
        north.add(calculate);
        // text boxes
        north.add(textA);
        north.add(textB);
        north.add(textC);
        north.add(textD);
        north.add(minX);
        north.add(maxX);
        north.add(refine);
        // delete button
        north.add(delete);

        south.add(message);

        // border layout
        c.add(north, BorderLayout.NORTH);
        c.add(south, BorderLayout.SOUTH);
        c.add(center, BorderLayout.CENTER);
        // c .add(west, BorderLayout.WEST);
        // c .add(east, BorderLayout.EAST);

        // panel = new JPanel();
        // panel.setPreferredSize(new Dimension(width, height));
        // panel.setBackground(Color.GRAY);
        // center.add(panel);

    }

    @Override
    public void actionPerformed(ActionEvent e) // throws NumberFormatException
    {
        // dafault message will be <message> -- "Please insert values"
        message.setText(e.getActionCommand());
        // when button "Delete" is pressed all values in text firlds will turn
        // null
        if (e.getActionCommand().equals("Delete")) {
            message.setForeground(Color.DARK_GRAY);

            textA.setText(null);
            textB.setText(null);
            textC.setText(null);
            textD.setText(null);
            minX.setText(null);
            maxX.setText(null);

            repaint();
        } else if (e.getActionCommand().equals("Calculate"))
            // when "Calculate" button is pressed, values will be attached to
            // equation
            try {
                message.setForeground(Color.DARK_GRAY);

                // -------------------------------------------------
                a = Integer.parseInt(textA.getText());
                b = Integer.parseInt(textB.getText());
                c = Integer.parseInt(textC.getText());
                d = Integer.parseInt(textD.getText());
                minimumX = Integer.parseInt(minX.getText());
                maximumX = Integer.parseInt(maxX.getText());

                System.out.println("center.getWidth() " + center.getWidth());
                System.out.println("center.getHeight() " + center.getHeight());
                System.out.println("minimum " + minX.getText());
                System.out.println("maximum " + maxX.getText());
                System.out.println("a " + textA.getText());
                System.out.println("b " + textB.getText());
                System.out.println("c " + textC.getText());
                System.out.println("d " + textD.getText());
                // ------------------------------------------------------

                message.setText("This is the result for " + "A "
                        + textA.getText() + ", B " + textB.getText() + ", C "
                        + textC.getText() + ", D " + textD.getText());
                draw();
            }

            catch (NumberFormatException ex)
            // if user inputs other than numbers, a warning message in the south
            // panel will show
            {
                message.setText("Please insert numerical value in "
                        + ex.getMessage());
                message.setForeground(Color.red);
                message.setFont(new Font("Tahoma", Font.BOLD, 12));
            }

        else if (e.getActionCommand().equals("Refine")) {
            // for refine
        }

    }

    // ===================================================================================

    private void calculation() {
        xCoOrdinates = new int[(maximumX - minimumX) + 1];
        yCoOrdinates = new int[(maximumX - minimumX) + 1];

        for (int i = 0; i < xCoOrdinates.length; i++)
        // for(int j = 0; j < yCoOrdinates.length; j++)

        {
            // generating the x co-ordinates and storing them in arrays
            xCoOrdinates[i] = minimumX + i;
            // generating the y co-ordinates using the formula given
            y = ((a * (int) Math.pow(i, 3)) + (b * (int) Math.pow(i, 2))
                    + (c * i) + (d));
            // storing y co-ordinates
            yCoOrdinates[i] = y;
            // displaying results
            // System.out.println("X = " + i + "   Y = " + getY());
            System.out.println("These are the values of X = " + i);
        }

        // printing the y axes values
        for (int i = 0; i < yCoOrdinates.length; i++) {

            System.out.println("this is the extracted Y " + yCoOrdinates[i]);

        }

        maximumX = xCoOrdinates[0];
        maximumX = xCoOrdinates[0];
        for (int i = 1; i < yCoOrdinates.length; i++) {
            if (yCoOrdinates[i] > maximumX)
                maximumX = xCoOrdinates[i];
            else if (yCoOrdinates[i] < minimumX)
                minimumX = xCoOrdinates[i];
        }

        System.out.println("MAXX is " + maximumX);
        System.out.println("MINX is " + minimumX);

        maximumY = yCoOrdinates[0];
        minimumY = yCoOrdinates[0];
        for (int i = 1; i < yCoOrdinates.length; i++) {
            if (yCoOrdinates[i] > maximumY)
                maximumY = yCoOrdinates[i];
            else if (yCoOrdinates[i] < minimumY)
                minimumY = yCoOrdinates[i];
        }
        System.out.println("MAXY is " + maximumY);
        System.out.println("MINY is " + minimumY);

    }

    // =================================================================================================

    public void draw() {
        Graphics g = center.getGraphics();
        g.setColor(Color.GRAY);
        g.fillRect(0, 0, center.getWidth(), center.getHeight());
        // g.fillRect(25,25, center.getWidth()-50, center.getHeight()-50);
        double x, y, nextX, nextY;
        int xPoint; // = 0;
        int yPoint; // = 0;
        int nextXpoint; // = 0;
        int nextYpoint; // = 0;

        g.setColor(Color.BLUE);

        for (xPoint = 0; xPoint <= (double) center.getWidth(); xPoint++) {
            x = scaleX(xPoint);
            y = equation(x);
            yPoint = scaleY(y);
            nextXpoint = xPoint + 1;
            nextX = scaleX(nextXpoint);
            nextY = equation(nextX);
            nextYpoint = scaleY(nextY);
            g.drawLine(xPoint, yPoint, nextXpoint, nextYpoint);
            // System.out.println("equation  --->" + eq.getY());
        }

    }

    private double equation(double x) {
        return y;
        // return a*x*x*x + b*x*x + c*x + d;
    }

    private double scaleX(int xPoint) {
        int minXstart = minimumX;
        int maxXend = maximumX;
        double xScale = (double) center.getWidth() / (maxXend - minXstart);
        return (xPoint - (center.getWidth() / 2)) / xScale;
    }

    private int scaleY(double y) {
        int minYstart = minimumY;
        int maxYend = maximumY;
        int yCoord;
        double yScale = (double) center.getHeight() / (maxYend - minYstart);
        yCoord = (int) (-y * yScale) + (int) (center.getHeight() / 2);
        return yCoord;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:19:57.210

短期帮助：检查您的输出，x 和 y 的值是否按预期变化？它们实际上在绘图期间使用吗？使用调试器单步执行您的代码。然后带着更集中的问题回来。

中期（未来两天内）：请购买并阅读以下两本书：

[http://www.amazon.com/Pragmatic-Programmer-Andrew-Hunt/dp/020161622X](https://rads.stackoverflow.com/amzn/click/com/020161622X)

[http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882/ref=sr_1_1?s=books&ie=UTF8&qid=1342369060&sr=1-1&keywords=clean+code](https://rads.stackoverflow.com/amzn/click/com/0132350882)

只要您发布的课程都是不可接受的，并且几乎无法理解相关部分。这就是我猜你收到反对票的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T16:22:08.513

我是[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)粉丝，但您也可以使用 Java 2D 中的笛卡尔坐标绘制图形，如此处所建议[的](https://stackoverflow.com/a/9373195/230513)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T16:08:52.903

有 3rd 方库可以为您完成此类工作。查看：

[JFreeChart](http://www.jfree.org/jfreechart/)

[Charts4J](https://code.google.com/p/charts4j/)

# javascript - 如何在jquery方法中创建if语句

> ID：11493362
> 
> 赞同：1
> 
> 时间：2012-07-15T15:57:18.780
> 
> 标签：javascript, jquery

```
 .data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        if ( ( item.parent_term_id == "16" ) ) {
           .append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" )
        }
           .appendTo( ul );
    }; 
```

此代码属于 JqueryUi 自动完成小部件。如果项目的“parent_term_id”等于某个值，我希望自动完成文本输入来建议项目，否则不建议任何项目。（这是WordPress）

但是那个 if 语句不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:02:57.097

```
.data( "autocomplete" )
._renderItem = function( ul, item ) {
  var $li = $( "<li></li>" );

  $li.data( "item.autocomplete", item );

  if ( ( item.parent_term_id == "16" ) ) {
    $li.append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" );
  }
  return $li.appendTo( ul );
}); 
```

如果您*必须*在一行中执行此操作（尽管这样做没有意义）：

```
.data( "autocomplete" )
._renderItem = function( ul, item ) {
  return $( "<li></li>" )
    .data( "item.autocomplete", item )
    .filter(function () {
      return item.parent_term_id == "16";
    })
    .append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" )
    .end()
    .appendTo( ul );
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T15:59:40.843

您在 jQuery 代码中看到的无休止的链接并不总是做某事的最佳方式。

在这里你最好使用一个变量：

```
.data( "autocomplete" )._renderItem = function( ul, item ) {
    var li = $( "<li></li>" );
    li.data( "item.autocomplete", item );
    if ( ( item.parent_term_id == "16" ) ) {
       li.append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" );
    }
    li.appendTo( ul );
    return li;
}; 
```

你可以结合其中的一些，但对于`if`，你必须停止执行链式函数调用，这意味着使用 var。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T16:03:28.377

有时，放置一些警报以查看代码在哪里中断是有帮助的。此外，如果您认为 if 块没有被调用，您可以尝试简化它或反转逻辑。IE

```
alert("precondition");
if ( ( item.parent_term_id == "16" ) ) {
alert("in if block!");
   li.append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" );
} 
```

简化

```
alert("precondition");
if ( ( item.parent_term_id) ) {
alert("in if block!");
   li.append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" );
} 
```

逆向逻辑

```
alert("precondition");
if ( ( item.parent_term_id != "16") ) {
alert("in if block!");
   li.append( "<a>" + (item.child_term ? item.child_term : + "") + "</a>" );
} 
```

# iphone - cocos2d v2 缩放我的背景

> ID：11493365
> 
> 赞同：2
> 
> 时间：2012-07-15T15:57:33.703
> 
> 标签：iphone, ios, cocos2d-iphone

我已经安装了 cocos2d v2.0，我正在做一些工作，看看 v1 发生了什么变化，我创建了一个简单的 cocos2d + box2d 项目，我运行它并且一切正常，我已经删除了 IntroLayer 和Helloworld 层，我试图显示一个简单的背景层，所以我这样做了：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface BackgroundLayer : CCLayer

@end

#import "BackgroundLayer.h"

@implementation BackgroundLayer

-(id)init {

self = [super init];
if (self != nil) {

    CCSprite *backgroundImage = [CCSprite spriteWithFile:@"background.png"];
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    backgroundImage.position = ccp(screenSize.width/2, screenSize.height/2);
    [self addChild:backgroundImage z:0 tag:0];
}

return self;
}

@end

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "BackgroundLayer.h"

@interface GameScene : CCScene

@end

#import "GameScene.h"

@implementation GameScene

-(id)init {

self = [super init];
if (self != nil) {

    BackgroundLayer *backgroundLayer = [BackgroundLayer node];
    [self addChild:backgroundLayer z:0];
}

return self;
}

@end 
```

然后在应用程序委托中我改变了这个：

```
[director_ pushScene: [IntroLayer scene]]; 
```

在这：

```
[director_ pushScene: [GameScene node]]; 
```

但是似乎按比例缩放了 0.5，我为视网膜而不是视网膜创建了高清和非高清图像，我错了什么？这是结果：

[http://img706.imageshack.us/img706/4778/schermata072456124alle1.png](http://img706.imageshack.us/img706/4778/schermata072456124alle1.png)

**编辑：** 如果我以这种方式更改 BackgroundLayer.m，一切正常：

```
@implementation BackgroundLayer

/*-(id)init {

self = [super init];
if (self != nil) {

    CCSprite *backgroundImage = [CCSprite spriteWithFile:@"background.png"];
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    backgroundImage.position = ccp(screenSize.width/2, screenSize.height/2);
    [self addChild:backgroundImage z:0 tag:0];
}

return self;
}*/

-(void) onEnter
{
[super onEnter];
CCSprite *backgroundImage = [CCSprite spriteWithFile:@"background.png"];
CGSize screenSize = [[CCDirector sharedDirector] winSize];
backgroundImage.position = ccp(screenSize.width/2, screenSize.height/2);
[self addChild:backgroundImage z:0 tag:0];
}

@end 
```

谁能解释我为什么？我记得在旧版本的 cocos2d 中我可以在 init 方法中添加图层...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:27:47.950

使用这种风格，也在 cocos2d 2.0 中工作过。

```
@interface GameScene : CCLayer
{

}
+(CCScene *) scene;
@end

#import "GameScene.h"

@implementation GameScene

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    GameScene *gameScenelayer = [GameScene node];

    // add layer as a child to scene
    [scene addChild: gameScenelayer];

    // return the scene 
    return scene;
}

-(id)init {

    self = [super init];
    if (self != nil) {

        CCSprite *backgroundImage = [CCSprite spriteWithFile:@"background.png"];
        CGSize screenSize = [[CCDirector sharedDirector] winSize];
        backgroundImage.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:backgroundImage z:0 tag:0];
    }

    return self;
}

@end 
```

//调用这个

```
[director_ pushScene: [GameScene scene]]; 
```

# indexing - 如何通过我的 java 模块在 cassandra 中创建列索引？

> ID：11493366
> 
> 赞同：1
> 
> 时间：2012-07-15T15:57:37.820
> 
> 标签：indexing, cassandra, hector

我想用 '=' 符号查询 cassandra。为了提高性能，我想为列创建索引。

我正在使用 sstables 和 sstableLoader 将数据加载到 cassandra

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:59:14.967

如果我理解正确，您想通过 Hector 在列族上创建二级索引。以下关于 hector 邮件列表的讨论包含示例代码：

[http://comments.gmane.org/gmane.comp.db.hector.user/3151](http://comments.gmane.org/gmane.comp.db.hector.user/3151)

# ios - NSJSONSerialization 可以处理 null 吗？

> ID：11493373
> 
> 赞同：1
> 
> 时间：2012-07-15T15:58:11.173
> 
> 标签：ios, json, null, nsjsonserialization

我有一个 JSON 提要：

```
{
    "createEntities": [
        {
            "username": "hackImport",
            "deleted": false,
            "myName": "Stocks",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "132256ef-1e94-483f-a87d-35caeee636db",
            "dateModified": "2012-04-13T08:06:17.077971-04:00",
            "sortKey": 5,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "hackImport",
            "deleted": false,
            "myName": "Foreign Currency",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "43510d43-f17a-4d06-9138-0a304b9f09ff",
            "dateModified": "2012-04-13T08:06:17.077971-04:00",
            "sortKey": 2,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "adamek",
            "deleted": false,
            "myName": "Real Estate",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "57a365e0-fa9c-4e47-b77b-5a3f23d3dbee",
            "dateModified": "2012-04-22T14:33:43.464506-04:00",
            "sortKey": 3,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "adamek",
            "deleted": false,
            "myName": "Mutual Funds",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "8bd3f71c-9255-4505-87f7-a48a2665d366",
            "dateModified": "2012-05-01T19:28:15.897377-04:00",
            "sortKey": 7,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "hackImport",
            "deleted": false,
            "myName": "U.S. Currency",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "ea2a086c-ddbd-4b75-ac29-130626a4f11b",
            "dateModified": "2012-04-13T08:06:17.077971-04:00",
            "sortKey": 1,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "hackImport",
            "deleted": false,
            "myName": "Other Property",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "ec04d62e-97bf-4c0d-b64e-4b212fda6215",
            "dateModified": "2012-04-13T08:06:17.077971-04:00",
            "sortKey": 4,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        },
        {
            "username": "hackImport",
            "deleted": false,
            "myName": "Bonds",
            "dateSynced": "2012-07-05T12:00:00-04:00",
            "uuidKey": "fad7d556-c922-49c3-b7dd-ffa96eab9c55",
            "dateModified": "2012-04-13T08:06:17.077971-04:00",
            "sortKey": 6,
            "dateCreated": "2012-04-13T08:06:17.077971-04:00"
        }
    ],
    "modifyEntities": null,
    "deleteEntities": null,
    "entity": "CommodityTypes"
} 
```

[http://jsonlint.com](http://jsonlint.com)说它是有效的。

然而：

```
[NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&jsonError] 
```

`-[__NSDictionaryM length]: unrecognized selector sent to instance 0x8ba2200` 因错误而失败。

json 由 Python 3.2 在服务器上使用`json.dumps`. json.dumps 将`None`json 字符串中的 Python 转换为 null。

知道为什么这会失败吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T16:07:55.460

是的，`NSJSONSerialization`可以处理`null`，检查以下内容：

```
NSString *input = @"{ \"value\": null }"; 
NSData *data = [input dataUsingEncoding:NSUTF8StringEncoding];

NSError *error = nil;
id JSONValue = [[NSJSONSerialization JSONObjectWithData:data options:0 error:&error] objectForKey:@"value"];

NSLog(@"(%@), %@ error: %@", [JSONValue class], JSONValue, error); 
```

输出：

```
2012-07-15 12:06:55.614 TestProj[25329:503] (NSNull), <null> 错误: (null)

```

这意味着您的问题出在其他地方，如果我冒昧地猜测一下，`jsonData`它是 instance 的对象`NSMutableDictionary`，而不是`NSData`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:12:41.383

您的 jsonData 已被释放。检查 jsonData 是否仍然是有效的指针。

# directx - D3DXGetImageInfoFromFile 产生访问冲突写入位置错误

> ID：11493374
> 
> 赞同：0
> 
> 时间：2012-07-15T15:58:25.480
> 
> 标签：directx

我在下面写了一段代码，我坚持下去。我以前用不同的编译器做过，现在我正在转向 Visual C++。每次这个函数试图被调用时，都会弹出这个错误：

> SeaQuest.exe 中 0x0076e124 处的未处理异常：0xC0000005：访问冲突写入位置 0xccccccd0。

此外，我已经正确编写了 D3DXGetImageInfoFromFileA 的语法。

```
class Texture
{
private:
  D3DXIMAGE_INFO m_ImageInfo;
public:
  bool GetImageInfo(char* filename);
};

bool Texture::GetImageInfo(char* filename)
{
  if((D3DXGetImageInfoFromFileA(filename, &m_ImageInfo)) != D3D_OK)
    return false; 
} 
```

我还跟踪了 DirectX 调试输出，但它没有显示任何内容。

**更新**

现在，我在 GetImageInfo 的实现中定义了一个 D3DXIMAGE_INFO 局部变量，并使用它来代替 m_ImageInfo。有用！。我不知道我的私人会员有什么问题会因此而`Access violation writing`增加。希望有人指导我。

**回答**

我在另一个类中使用 Texture 类作为指针变量，原因是没有实例化指向新 Texture 类的指针，或者我可以使用非指针变量然后将类复制到其中但失去了引用的好处。`0xC0000005`接近 0，因此这意味着它正在尝试寻址一个 NULL 指针。我会记住的，希望你也会！

# c# - Windows 服务运行批处理文件，InstallUtil /i 阻止服务启动？

> ID：11493375
> 
> 赞同：0
> 
> 时间：2012-07-15T15:58:27.787
> 
> 标签：c#, windows-services, batch-file, installutil

我有一个简单的 Windows 服务，它调用批处理文件来在启动时设置一些进程。大多数批处理文件已正确触发，但由于 Windows 服务无法启动，InstallUtil /i 无法运行。（InstallUtil /u 事先可以工作，但我觉得很奇怪）这是 Windows 服务和批处理文件的一些代码：

```
namespace RecipopStartupService
{
public partial class Service1 : ServiceBase
{
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        ProcessBatchFile();
    }

    public void ProcessBatchFile()
    {
        Process process = new Process();

        process.StartInfo.WorkingDirectory = "C:\\Webs\\AWS\\";
        process.StartInfo.FileName = "C:\\Webs\\AWS\\setup.bat";
        process.StartInfo.Arguments = "";
        process.StartInfo.Verb = "runas";
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

        process.StartInfo.CreateNoWindow = true;

        process.StartInfo.RedirectStandardOutput = false;

        process.Start();

        System.IO.StreamReader myOutput = process.StandardOutput;
        process.WaitForExit(200000);
        if (process.HasExited)
        {
            string results = myOutput.ReadToEnd();
        }

    }

    protected override void OnStop()
    {
    }
}
} 
```

批处理文件：

```
"C:\Program Files (x86)\Subversion\bin\SVN.exe" cleanup "C:\Webs\AWS\webs"
"C:\Program Files (x86)\Subversion\bin\SVN.exe" cleanup "C:\Webs\AWS\apps"

"C:\Program Files (x86)\Subversion\bin\SVN.exe" update "C:\Webs\AWS\webs"

REM The following directory is for .NET 2.0
set DOTNETFX2=%SystemRoot%\Microsoft.NET\Framework\v4.0.30319
set PATH=%PATH%;%DOTNETFX2%

echo Uninstalling MyService...
echo ---------------------------------------------------
InstallUtil /u "C:\Webs\AWS\apps\MyService.exe"
echo ---------------------------------------------------
echo Done.

"C:\Program Files (x86)\Subversion\bin\SVN.exe" update "C:\Webs\AWS\apps"

REM The following directory is for .NET 2.0
set DOTNETFX2=%SystemRoot%\Microsoft.NET\Framework\v4.0.30319
set PATH=%PATH%;%DOTNETFX2%

echo Installing MyService...
echo ---------------------------------------------------
InstallUtil /i "C:\Webs\AWS\apps\MyService.exe"
echo ---------------------------------------------------
echo Done.

NET START MyService 
```

我已经注释掉了各个部分以确定是什么阻止了服务的启动。正如我之前所说，它是 InstallUtil /i 部分。

如果有人可以建议，那就太好了。

谢谢，科林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:07:20.643

我会直接在 Visual Studio 中调试您的 Windows 服务，而不是使用单独的控制台应用程序。有关执行此操作的详细信息，请在此处查看我的[博客条目。](http://sleeksoft.co.uk/public/techblog/articles/20051128_1.html)

如果您愿意，您也可以不使用 InstallUtil 安装您的服务。只需设置对 System.Configuration.Install dll 的引用并使用[ManagedInstallerClass .InstallHelper](http://msdn.microsoft.com/en-us/library/system.configuration.install.managedinstallerclass.aspx)。

在 C# 中结合这两种方法如下所示：

```
// This is the entry point
static void Main(string[] args)
{
    // If parameter passed, act on it
    if ( args.Length > 0 )
    {
        switch (args[0] )
        {
            // Debug the service as a normal app from within Visual Studio
            case DEBUG:
                MyService DebugService = new MyService();
                DebugService.OnStart(null);
                break;
            // Install the service programatically
            case INSTALL:
                ManagedInstallerClass.InstallHelper(new string[] _
                { Assembly.GetExecutingAssembly().Location });
                break;
            // Un-install the service programatically
            case UNINSTALL:
                ManagedInstallerClass.InstallHelper(new string[] +
                { UNINSTALL, Assembly.GetExecutingAssembly().Location });
                break;
            // We don't understand this parameter!
            default:
                message = string.Concat(DEBUG, " to run service manually.", Environment.NewLine);
                message += string.Concat(INSTALL, " to install service.", Environment.NewLine);
                message += string.Concat(UNINSTALL, " to un-install service.", Environment.NewLine);
                message += string.Concat("Do not understand the command-line parameter ", args[0]);
                throw new System.NotImplementedException(message);
        }
    }
    // If no parameter passed, just start the service normally
    else
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] { new MyService() };
        ServiceBase.Run(ServicesToRun);
    }
} 
```

# php - MODx 电子邮件不起作用

> ID：11493376
> 
> 赞同：0
> 
> 时间：2012-07-15T15:58:31.207
> 
> 标签：php, email, modx

在我的服务器上，使用 MODx（2.2 版）发送电子邮件失败。它可能与 SMTP 一起工作，但原则上它也应该在没有 SMTP 的情况下工作，因为像下面这样的脚本可以工作。

脚本：

```
<?php
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

你能帮我找出这种不当行为的原因和/或解决这个问题吗？

**编辑**

要回答以下问题：

我不会尝试向网站用户发送任何精美的电子邮件。我只是在尝试非常基本的东西，比如通过电子邮件重置登录名和密码。

我尝试[使用 quickemail](http://bobsguides.com/quickemail-snippet-tutorial.html)进行调试。输出是：

```
System Settings (used if property is missing):
emailsender System Setting: xxx@xxx.xx
site_name System Setting: MODX Revolution
Properties (from parameters, property set, or snippet default properties:
Tpl chunk name:
subject:
to:
fromName:
replyTo:
emailSender:
allowHtml: 1
message:
Final Values (actually used when sending email):
subject: Default Subject
to: xxx@xxx.xx
fromName: xxx@xxx.xx
replyTo: xxx@xxx.xx
emailSender: xxx@xxx.xx
allowHtml: 1
Message Body: Default Message
Send Failed
Mailer error info: Could not instantiate mail function.
Server Debug Information: 
```

我想我已经在核心安装中使用了 MOD-Mail。不是吗？

我的邮件服务器使用 qmail。我只是尝试了上面没有`$from`值的脚本，它起作用了。但是，MODx 仍然无法发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:50:03.650

您将需要检查 MODx 使用的默认设置是否与您的服务器[PHP mail()](http://php.net/manual/en/function.mail.php)配置相匹配。

MODx 使用的 PHP 邮件类位于**core/model/modx/mail/phpmailer/class.phpmailer.php**。如果它们不匹配，我不建议更改类，而是使用可以在 MODx 管理器中的**系统 > 系统设置下启用和配置的 SMTP**

信息：默认情况下，MODx 使用**/usr/sbin/sendmail -oi -f**发送电子邮件。这很常见，但不适用于所有 Web 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T08:36:22.203

当您使用`mail`-function 时，您使用的是本机（标准）PHP 邮件类。

Modx revo 有它自己的，但你根本没有使用这个类。这是默认安装的，所以它应该可以工作。阅读此 wiki 文章以了解该类的用法：[http ://rtfm.modx.com/display/revolution20/modMail](http://rtfm.modx.com/display/revolution20/modMail)

但是，如果发送电子邮件不起作用，这与 Modx 无关，据我所知，您的代码是有效的。这是一个服务器/PHP 设置问题。

# cocos2d-iphone - Apple Mach-O 链接器 (Id) 错误问题

> ID：11493378
> 
> 赞同：0
> 
> 时间：2012-07-15T15:59:23.890
> 
> 标签：cocos2d-iphone, box2d, linker-errors, box2d-iphone

我已经阅读了很多关于这个问题的帖子，但我没有发现任何特别有用的东西。当两个精灵使用接触侦听器相遇时，我正在尝试制作一个weldJoint。我不断收到以下错误：

```
Apple Mach-O Linker (Id) Error
"_touchingBodies", referenced from:
SubcContactListener::BeginContact(b2Contact*) in SubcContactListener.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的联系听众。SubcContactListener.h：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "Box2D.h"
#import <vector>
typedef std::pair<b2Body*, b2Body*> bodyPair;
typedef std::vector<bodyPair> thingsThatTouched;

extern thingsThatTouched touchingBodies;

class SubcContactListener : public b2ContactListener    {

public:

    void BeginContact(b2Contact* contact);
void EndContact(b2Contact* contact);
}; 
```

SubcContactListener.mm：

```
#import "SubcContactListener.h"
void SubcContactListener:: BeginContact(b2Contact *contact) {

touchingBodies.push_back( std::make_pair(contact->GetFixtureA()->GetBody(), contact->GetFixtureB()->GetBody()) );
} 
```

我补充说：

```
 thingsThatTouched touchingBodies; 
```

到 HelloWorldLayer.h 接口。

最后，在 HelloWorldLayer.mm 的 tick 方法中（在时间步之后）：

```
b2WeldJointDef weldJointDef;
 b2WeldJoint *weldJoint;

for (int i = 0; i < touchingBodies.size(); i++) {
    b2Body* bodyA = touchingBodies[i].first;
    b2Body* bodyB = touchingBodies[i].second;

    weldJointDef.Initialize(bodyA, bodyB, bodyA->GetWorldCenter());
    weldJointDef.collideConnected = false;
    weldJoint = (b2WeldJoint*)world->CreateJoint(&weldJointDef);

}
touchingBodies.clear(); 
```

请帮忙，我已经有一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:04:20.443

```
extern thingsThatTouched touchingBodies; 
```

此类外部变量必须在别处定义为静态 C 变量，而不是实例变量。

考虑到更好的设计，我建议废弃 extern 变量，而是通过 HelloWorldLayer 通过添加 Singleton 接口来访问touchingBodies。

然后您就可以从任何地方访问它：

```
[HelloWorldLayer sharedWorldLayer].touchingBodies; 
```

# perl - 比较文件两行的内容并使用 perl 添加它们

> ID：11493379
> 
> 赞同：0
> 
> 时间：2012-07-15T15:59:25.290
> 
> 标签：perl, scripting

我有一个名为`listofvalues.txt`. 该文件有 1000 多行和 5 列。

```
1,232,3434,54343,434343  
1,232,100,4546,3456  
1,122,45454,4546,3456  
2,212,334,5555,4654  
...  
... 
```

如果第 1 列和第 2 列相等，我想将第三列的值相加，并将结果打印到如下文件中

```
1,232,3534,54343,434343  
1,122,45454,4546,3456  
2,212,334,5555,4654  
....  
.........  
.........  
...... 
```

你觉得我怎么能在 Perl 中做到这一点？由于我是 Perl 的新手，我发现它很难做到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:16:30.560

该程序通过维护一个数组来工作，该数组`@data`包含具有唯一性的所有记录的列表`column1|column2`键的所有记录的列表。第一次在文件中遇到新键时，将完整的记录压入堆栈。每次后续遭遇只是将记录的第三个字段添加到原始值。

哈希`%data`维护对`@data`对应于每个不同键值的元素的引用。

```
use strict;
use warnings;

open my $fh, '<', 'listofvalues.txt' or die $!;

my @data;
my %data;

while (<$fh>) {
  chomp;
  my @record = split /,/;
  my $key = join '|', @record[0,1];
  if ($data{$key}) {
    $data{$key}[2] += $record[2];
  }
  else {
    push @data, ($data{$key} = \@record);
  }
}

print join(',', @$_), "\n" for @data; 
```

**输出**

```
1,232,3534,54343,434343  
1,122,45454,4546,3456  
2,212,334,5555,4654 
```

* * *

**更新**

单线解决方案

```
perl -F, -ane '$k="@F[0,1]";$s{$k}?$s{$k}[2]+=$F[2]:do{push@d,$k;$s{$k}=[@F]};END{$\"=',';print"@{$s{$_}}"for@d}' listofvalues.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:11:14.947

这是另一个单线：

```
 perl -F, -lane ' 
```

```
 BEGIN { $, = "," }

  if(defined(@A)) {
    if($A[0] == $F[0] and $A[1] == $F[1]) {
      $A[3] +=  $F[3];
    } else {
      print @A;
      @A = (@F);
    }
  } else {
    @A = (@F);
  }

  END { print @A }' listofvalues.txt 
```

请参阅`perlrun(1)`开关的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:23:48.400

仅仅因为你*可以*在单行中做到这一点并不意味着你应该;）

```
$ perl -F',' -lane '
push @order, [ @F[0,1] ]
  unless $seen{$F[0]}{$F[1]}++; # Preserve order
$total{$F[0]}{$F[1]} += $F[2];  # Sum up
$value{$F[0]}{$F[1]} = join ',' => @F[0,1], $total{$F[0]}{$F[1]}, @F[3..$#F];
} END {
    print $value{$_->{0]}{$_->[1]} for @order;
' file.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T20:29:11.017

您可以尝试使用数据库方法，尽管它不处理 col4 或 col5。

```
#!/usr/bin/perl
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect("DBI:CSV:");
$dbh->{'csv_tables'}->{'data'} = { 'file' => 'o33.txt',
    'col_names' => [qw/col1 col2 col3 col4 col5/]};

my $sql = <<SQL;
select col1, col2, SUM(col3)
from data
group by col1, col2
order by col1, col2
SQL

my $sth = $dbh->prepare( $sql );
$sth->execute;

{
    local $" = ',';
    while ( my $row = $sth->fetchrow_arrayref ) {
        print "@$row\n";
    }
}

__END__
C:\Old_Data\perlp>type o33.txt
1,232,3434,54343,434343
1,232,100,4546,3456
1,122,45454,4546,3456
2,212,334,5555,4654

C:\Old_Data\perlp>perl t3.pl
1,122,45454
1,232,3534
2,212,334 
```

# c - JSF（Joint Strike Fighter）类似于 C 的标准

> ID：11493381
> 
> 赞同：6
> 
> 时间：2012-07-15T15:59:32.670
> 
> 标签：c, coding-style

有著名的C++[联合攻击战斗机](https://en.wikipedia.org/wiki/Lockheed_Martin_F-35_Lightning_II)(JSF) 标准。在为关键任务平台编码时，是否有类似的 C 标准可以提高 C 程序员的素质？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T16:04:16.553

有汽车工业软件可靠性协会的[MISRA C ：](https://en.wikipedia.org/wiki/MISRA_C)

[MISRA-C:2004](http://www.misra.org.uk) , *C 语言在关键系统中的使用指南*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T16:40:35.290

[Les Hatton](http://www.leshatton.org/category/scientific-writing/safer-subsets/)为关键系统指定了一个 ISO C 子集，并写了很多关于[MISRA C](https://en.wikipedia.org/wiki/MISRA_C)的文章。在做出任何决定之前，我已经通读了（至少大部分）他必须说的话。

如果您处于 TLDR 模式，简短的回答是大多数此类指南（包括 MISRA C）包括运行整个范围的规则，从非常有用到有些有用，再到一些可能非常有害的规则（例如，编辑代码以遵循它们比修复任何东西更有可能引入错误）。

# c++ - OpenMP 线程、数据访问延迟和 STL 数据容器

> ID：11493388
> 
> 赞同：2
> 
> 时间：2012-07-15T16:00:29.780
> 
> 标签：c++, multithreading, openmp

在使用 OpenMP 线程时，

1.  每个线程都可以声明自己的一组私有变量。假设获取每个线程私有的数据比获取所有线程可见的数据具有更低的延迟是否正确。换句话说，线程局部变量是否**被缓存**？

2.  说每个线程，都想使用一个线程私有的 STL 数据容器，比如`std::vector`. 在单线程 C++ 代码中，数据`std::vector`存储在堆中。那么多线程案例呢？线程私有 std::vectors 的数据是否仍存储在堆上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:09:24.270

除非您使用的是 NUMA 机器，否则内存是统一的。

> 假设获取每个线程私有的数据比获取所有线程可见的数据具有更低的延迟是否正确。

线程本地存储本质上并不比所有线程可见的内存“更快”。但是，仅由一个线程使用的内存不太可能受到缓存一致性影响 - 因为它仅由单个线程访问。

> 换句话说，线程局部变量是否被缓存？

不必要。如果它不适合 CPU 缓存，则绝对不会出现这种情况。共享数据也可能同时位于多个内核的缓存中。

> 那么多线程案例呢？线程私有 std::vectors 的数据是否仍存储在堆上？

是的，无论线程数如何，它们都将在堆中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T18:23:25.990

在几乎所有广泛使用的 OpenMP 运行时中，私有变量和共享变量的实现方式都不同。

`private`自动变量驻留在每个执行线程的堆栈中，`threadprivate`变量驻留在 TLS 中。自动私有变量也可以优化为像往常一样注册。

`shared`并行区域的变量通常实现为一个结构，该结构通过地址作为参数传递给每个线程函数，然后使用额外的指针取消引用来访问每个共享变量。除了一些编译器将共享变量视为隐式`volatile`并发出加载/更新/存储指令的全部范围，尽管 OpenMP 提供了一个宽松的内存模型，允许不同线程中共享变量的可见值之间存在某种程度的不一致，直到某些同步要点，其中一个要点是显式`flush`指令（仍然`flush`是最广泛误解的 OpenMP 功能，甚至语言制造商也无法在标准文档中获得关于其使用正确的示例）。

至于在多线程情况下在堆上分配数据，堆操作本质上是序列化的，因为大多数堆实现使用链表或类似的数据结构。除了通常的分配器不关心由不同线程分配的数据是否最终可能共享一个缓存行，以及这是否可能导致错误共享和相关的性能损失。有专门的多线程分配器，如`hoard`, `ptmalloc`, `umem`,`tcmalloc`等，它们试图以使用更多内存为代价来解决这些问题。其中一些（例如`tcmalloc`）也支持NUMA。`tcmalloc`文档声称它做了某种“魔术”来使 STL 容器使用其分配器而不是默认分配器，但我不能同意，因为我不是`tcmalloc`C++ 和 C++ 的重度用户。

在 NUMA 系统上运行时要考虑的一件事是线程绑定。一些 OpenMP 运行时已经包含控制线程与内核绑定的规定，即将到来的 OpenMP 标准很可能包括用于指定绑定属性的标准框架，因为它现在正在语言委员会中进行讨论。

# c# - 谷歌应用引擎 ASP.net

> ID：11493389
> 
> 赞同：2
> 
> 时间：2012-07-15T16:00:36.167
> 
> 标签：c#, asp.net, .net, google-app-engine, azure

我是 Google App Engine 的新手。我真正需要做的是托管我的网络服务，它是在谷歌应用引擎上用 ASP.net 和 C# 编写的。

我的 Web 服务获取一个字符串并从 SQL Server 2008 R2 数据库中已存储的翻译值中翻译该字符串。这个翻译的字符串是跨度的形式。然后我返回字符串。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:11:47.870

Google App Engine 目前支持用 Python、Java 和 Go 编写的应用程序，并且不会运行 ASP.net 应用程序，除非涉及一些重魔法（例如将其编译为 Java 字节码），而且我不知道有什么可以做到这一点具体技巧。

也许你应该考虑微软的 Azure。这是一种等效的 PaaS 解决方案，但将与 Microsoft 的堆栈一起使用。

注意：Google 已经添加了 PHP 支持。

注意：现在 Google 有了“自定义运行时”，它允许您托管几乎可以在 Linux 机器上运行的任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-29T23:08:35.440

现在应该可以在 App Engine 上托管 ASP.NET 应用程序。将App Engine 上的[自定义运行时功能和 Microsoft 的](https://cloud.google.com/appengine/docs/managed-vms/custom-runtimes)[ASP.NET Docker 映像](https://github.com/aspnet/aspnet-docker)与您的应用程序一起使用。`/_ah/health`此外，您需要为HTTP 状态代码 200 和空白消息正文创建路由并进行响应（请参阅[生命周期事件](https://cloud.google.com/appengine/docs/managed-vms/custom-runtimes#lifecycle_events)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:18:46.040

您不能托管 C# 应用程序。

Google App Engine 只专注于支持三种应用程序环境：Java、Python 和 Go。

此外，App Engine 应用程序还可以用任何与 JVM 兼容的语言（例如 JRuby、Groovy、Scala 等）编写并在 Java 6 运行时环境中运行。

# java - 集合到类型化数组

> ID：11493391
> 
> 赞同：3
> 
> 时间：2012-07-15T16:00:47.400
> 
> 标签：java, arrays, generics, reflection, collections

如果我有一个`Collection`定义为`Collection collection = new ArrayList()`包含`String`实例，我怎样才能将它转换为一个`String[]`？`collection.toArray()`返回一个`Object[]`. 或者，如何实例化`ArrayList<String>`使用反射？

请注意，我不能硬编码`String`，这样做的方法只知道`Class`它可以使用的方法。

例子：

```
Object test(Class classToCastTo, Object[] values) {
    Collection collection = new ArrayList();
    for (Object value : values) {
        collection.add(classToCastTo.cast(value));
    }
    return collection.toArray();
} 
```

如果我用 调用它`test(String.class, ...)`，那么它将返回一个`Object[]`. 我怎样才能让它返回一个`String[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:16:27.540

使用`theCollection.toArray((T[])java.lang.reflect.Array.newInstance(theClass, theCollection.size()))`，其中`T`是元素类型。只要`T`是未参数化的类型，强制转换是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:29:42.877

如果你有这个类，你可以写一个这样的方法：

```
public static <T> T[] arrayBuilder(Class<T> classToCastTo, Collection c) {
  return (T[]) c.toArray((T[]) Array.newInstance(classToCastTo, 0));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:06:41.277

这似乎可以满足您的需要：

```
public static void main(String[] args) {
    Object[] originalArray = {"abc", "def"};
    Class clazz = String.class;

    Object[] newArray = test(clazz, originalArray);
    System.out.println(newArray.getClass()); //class [Ljava.lang.String;
    System.out.println(Arrays.toString(newArray)); //[abc, def]
}

static Object[] test(Class classToCastTo, Object[] values) {
    Object[] o = (Object[]) Array.newInstance(classToCastTo, values.length);
    System.arraycopy(values, 0, o, 0, values.length);
    return o;
} 
```

`java.lang.ArrayStoreException`如果原始数组包含不是 a 的内容，您将得到a `String`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T16:30:58.560

根据 Ben 的回答，以下代码片段有效（编译时没有警告并运行）：

```
private static Object test(Class<?> classToCastTo, Object[] values) {
    Collection<Object> collection = new ArrayList<Object>();
    for (Object value : values) {
        collection.add(classToCastTo.cast(value));
    }

    return collection.toArray(
        (Object[]) java.lang.reflect.Array.newInstance(
            classToCastTo, collection.size())
    );
} 
```

现在您可以通过以下方式调用该方法

```
String[] result = (String[]) test(String.class, someValues); 
```

诀窍是将通过反射创建的数组强制转换为`Object[]`满足静态类型检查并匹配`toArray`.

*也就是说*，我不明白为什么不能使用泛型参数调用该方法。*如果你在某处*没有泛型类型，那么这个方法的结果无论如何都是无用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T16:09:04.473

遍历 Collection 并将其存储在 String 数组中。

从我的代码中尝试这个例子：

```
Collection c = new ArrayList();
c.add("Vivek");
c.add("Vishal");
String[] arr = new String[ c.size()];
int j = 0;
for (Object s : c){

arr[j] = (String)s;
j++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T16:24:19.507

以下方法是您要找的

```
public <T> T[] test(Class<T> classToCastTo, Object[] values) {
    Collection<T> collection = new ArrayList<T>();
    for (Object value : values) {
        collection.add(classToCastTo.cast(value));
     }
    return collection.toArray((T[])Array.newInstance(classToCastTo, collection.size()));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T16:49:12.597

如果你知道你的集合只包含字符串，这个方法

```
public static <T>  T[] toArray(Collection collection, Class<T> clazz) {
    T[] array = (T[]) Array.newInstance(clazz, collection.size());
    return ((Collection<T>) collection).toArray(array);
} 
```

称为

```
String[] result = toArray(collection, String.class); 
```

会做你需要的，虽然它会给出一些关于未经检查的演员的警告。

如果你知道你的集合只能包含字符串，你应该能够将它声明为 a`Collection<String>`并避免这种混乱。

# c# - if 语句总是传递给 else 语句

> ID：11493394
> 
> 赞同：0
> 
> 时间：2012-07-15T16:01:13.873
> 
> 标签：c#, if-statement

我正在使用 c# 开发一个简单的密码存储控制台应用程序。

我在询问用户是否想从那时起屏蔽所有密码条目的部分上遇到了一些问题。

这是代码部分：

```
bool tryagain = true;
while(tryagain == true)
{
  Console.WriteLine("Would you like to mask all other password  entiries?(Y,N)");
  string input = Console.ReadLine();
  if (input == "y" | input == "Y")
  //Something wrong, always passes to Your awnser was invalid
  {
      maskpass = true;
      tryagain = false;
  }

  if (input == "n" | input == "N")
  {
      maskpass = false;
      tryagain = false;
  }
  else
  {
      Console.WriteLine("Your awnser was invalid, would you like to try again?");
      string yesno = Console.ReadLine();
      if (yesno == "y" | yesno == "Y")
      {
          tryagain = true;
      }

      if (yesno == "n" | yesno == "N")
      {
          Environment.Exit(0);
      }
  }
} 
```

问题是当我运行代码时，它总是运行到 else 语句。

我确定这个错误很简单，我只是无知，但有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T16:02:25.587

使用`||`而不是单个`|`. `||`均值**或**条件，但单`|`是*二元或*。

我*假设*您的代码逻辑说：

`if input=='y' OR input=="Y"`， 做一点事。

另一个建议。如果我的假设正确，您可以通过简单的[String.Equals](http://msdn.microsoft.com/it-it/library/c64xh8f9.aspx)重载来实现：

```
if(input.Equals("y", StringComparison.InvariantCultureIgnoreCase)
{
   //do something/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:16:23.063

您可以使用 || 或者您可以使用 String 类 String.equals 的方法。由于它是一个字符串，因此您将其作为输入读取，因此最好使用 String.equals 方法

# ruby-on-rails - 使用火箭裤时如何配置 JSON 响应？

> ID：11493397
> 
> 赞同：2
> 
> 时间：2012-07-15T16:02:29.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, api, rest

我正在使用火箭裤来呈现我的 JSON API。

我试图通过在我的模型中覆盖 as_json 来改变它呈现 JSON 的方式，但不知何故，它似​​乎没有改变火箭裤响应中的任何东西。

在我的控制器中：

```
class Api::V1::ProjectsController < RocketPants::Base
  ...
  def show
    expose Project.find(params[:id])
  end
  ...
end 
```

在我的模型中：

```
class Project < ActiveRecord::Base
  ...
  def as_json(options = {})
    {"this" => "is not working!"}
  end
  ...
end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-23T15:18:23.160

此外，还有第一组可以发送到暴露块的选项。根据来源，您可以将选项传递给 serializable_hash 方法。例如：

`expose user, only: [:name, :email]`

这将在具有名称和电子邮件的对象上调用 serializable_hash。

您还可以在这组选项中指定预加载。例如：

`expose uploads, :include => { :user => { :only => :username } }`.

这将公开您的上传并急切加载与用户的 belongs_to 关联。

来源：[https ://github.com/filtersquad/rocket_pants/issues/20#issuecomment-6347550](https://github.com/filtersquad/rocket_pants/issues/20#issuecomment-6347550)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T16:06:18.037

我已经想出了如何做到这一点。火箭裤的工作方式是看`serializable_hash`方法。覆盖它会导致响应发生变化。

**编辑：**

我得到的解决方案：

在我需要添加一些属性的模型中：只需覆盖属性方法：

```
 # Overriding this method is required for the attribute to appear in the API
  def attributes
    info = {} # add any logic that fits you

    super.merge info
  end 
```

在需要公开 API 的控制器中，我创建了一个新的 Model 类（这只是为了保持不同的 API 版本需要），并重写了 serializable_hash 方法：

```
 class Location < ::Location 
    def serializable_hash(options = {})
      super only: [:id, :lat, :long],
            include: [user: {only: ...your attributes here...}]
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T15:26:33.207

对于嵌套的东西：

`paginated @matches, include: { listing: { include: { company: { only: [:name, :email] } } } }`

# android - 应用引擎：资源管理器中没有 api

> ID：11493400
> 
> 赞同：5
> 
> 时间：2012-07-15T16:02:51.003
> 
> 标签：android, google-app-engine, endpoints

我正在尝试使用 Google 插件创建一个 Web API，如本视频所示：

从 26:50 到 39:40[为 Android 构建 Web API](http://www.youtube.com/watch?feature=player_embedded&v=dylFNrvZ_3U#!/)

我需要一个用于我的 Android 应用程序的数据库并尝试使用谷歌云端点，但我无法按照此视频进行操作。我一直在寻找超过一天的时间来弄清楚我做错了什么。

当我运行 Web 应用程序时，

```
http://localhost:8888/_ah/admin/datastore?kind=message 
```

看起来不错，我可以使用 curl 插入数据

例如：

```
curl -H 'Content-Type: application/json' -d ' { "msMsg" : "my message!", "id" : 1 } ' http://localhost:8888/_ah/api/msgendpoint/v1/msg 
```

但是当我这样做时

```
http://localhost:8888/_ah/api/explorer 
```

我明白了：

```
HTTP ERROR 404
Problem accessing /_ah/api/explorer. Reason:
     NOT_FOUND 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:26:40.133

您可能需要部署您的应用程序才能使此 URL 正常工作。作为替代方案，您可以尝试导航到这样的 URL：

[https://developers.google.com/apis-explorer/?base=http://localhost:8888/_ah/api](https://developers.google.com/apis-explorer/?base=http://localhost:8888/_ah/api)

此 URL 将读取您的本地 Discovery 文档（从您的浏览器）并显示这些 API 的 APIs Explorer。

# php - 如果数组只包含一个元素，如何使用 in_array？

> ID：11493401
> 
> 赞同：1
> 
> 时间：2012-07-15T16:02:51.153
> 
> 标签：php, arrays

我遍历一个大数组并得到一个小数组

```
foreach ($cats as $cat)
    $cat_ids[] = $cat->term_id; 
```

有时 $cat_ids 只有一个元素。`Array ( [0] => 123`)

当我检查一个随机 id 是否在这个 $cat_ids 数组中时，`if( in_array( $int,$cats_ids ))`

我可能会收到 $cat_ids “in_array() 期望参数 2 是数组，...”的错误消息

如何检查 $int 是否正确在 $cat_ids 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:11:34.553

您的数组名称（在循环中）是`$cat_ids`并且您正在`$cats_ids`函数中使用`in_array()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:07:25.253

数组是否具有零值或更多值都没有关系。它只需要是一个数组。所以你的变量有一些错误。如果它不是一个数组，你总是可以使用`(array)$cats_ids`

# android - Toast 取消不起作用

> ID：11493410
> 
> 赞同：1
> 
> 时间：2012-07-15T16:03:57.770
> 
> 标签：android, android-widget, toast

当我在 stackoverflow 中搜索 toast 时，我发现了很多与我的问题有关的东西。但是它们都没有解决我的问题。在我的 android 应用程序中，我应该在彼此之后显示许多敬酒。但是，当我尝试这样做时，下一个敬酒会等待当前敬酒完成。即使我用取消来吐司，在我看来它从来没有用过。请给我一个确切的解决方案。谢谢..

```
inflater = getLayoutInflater();
    backgForToast=(ViewGroup) findViewById(R.id.toast_layout_root);
    layout = inflater.inflate(R.layout.toastbackground,backgForToast);
    textForToast = (TextView) layout.findViewById(R.id.text);

    textForToast.setText(toastMessage);
    toast.setGravity(Gravity.TOP|Gravity.LEFT, toastX2-90,toastY2-90);
    toast.setView(layout);
    toast.show();

    Handler handler = new Handler();
    long delay = 500;

    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            toast.cancel();
        }
    }, delay); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T17:05:46.387

这是取消 a 的基本示例`Toast`：

```
Toast mytoast;
mytoast = Toast.makeText(getApplicationContext(), "Jorgesys was here!", Toast.LENGTH_LONG);
mytoast.show();
....
....
....
if(CancelToast){
  mytoast.cancel();   //Cancelling the toast!.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:09:45.290

您需要先创建一个`Toast`对象。`Toast.makeText``cancel()`

# java - 显示 org.eclipse.xsd.XSDSchema 内容

> ID：11493411
> 
> 赞同：1
> 
> 时间：2012-07-15T16:04:07.987
> 
> 标签：java, xsd, eclipse-emf

我有简单的 xsd 文件：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="note">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="to" type="xs:string"/>
      <xs:element name="from" type="xs:string"/>
      <xs:element name="heading" type="xs:string"/>
      <xs:element name="body" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

和一些代码来解析它

```
String aFile = "C:\\1.xsd";
XSDParser  parser=null;
XSDSchema schema;
URI schemaUri = new File(aFile).toURI();
String uri;
try {
uri = schemaUri.toURL().toString();
parser=XSDParser.class.newInstance();
parser.parse(uri);
schema = parser.getSchema();
for (XSDElementDeclaration element : schema.getElementDeclarations()) {
System.out.println(element.getName());
            } 
```

程序打印“note”。我对其进行了调试，但找不到指向、来自、标题和正文的元素。我要改变什么来接收输出：

```
note
to
from
heading
body 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:40:43.833

> org.eclipse.xsd.util.XSDPrototypicalSchema

构建实例可能会帮助您了解如何遍历它们。

# ios - Facebook 3.0 SDK Beta - 我应该在最终部署中使用它吗？

> ID：11493417
> 
> 赞同：0
> 
> 时间：2012-07-15T16:04:22.823
> 
> 标签：ios, facebook

我需要集成 Facebook 以在我的应用程序中共享一些链接。我以前从未使用过“旧”SDK。刚刚创建了一个虚拟项目来测试它。

在阅读了关于 3.0 SDK beta 的公告后，我对在最终的应用商店应用中使用这个 beta 版本很感兴趣。你有什么想法？那有意义吗？我只是需要它来共享链接。我很想使用 3.0，因为它更容易集成，所以我的问题是......

感谢您的意见..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:36:26.970

这实际上取决于您愿意承担多少风险。

我的看法是，老sdk的集成并没有那么难。更重要的是它是安全的。此外，还有官方教程逐步向您展示如何操作：

[iOS 教程 #socialchannels](https://developers.facebook.com/docs/mobile/ios/build/#socialchannels)
[移动提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)

sdk 3.0 是向前迈出的一大步。无论如何，我会等到它结束测试版然后推送更新。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-15T16:07:30.093

我在应用程序中使用它。到目前为止，我还没有遇到任何节目停止错误。

# android - 使用 Android ADK 与 Arduino Mega ADK 通信时 build.xml 出现问题

> ID：11493422
> 
> 赞同：1
> 
> 时间：2012-07-15T16:05:14.900
> 
> 标签：android, arduino, build.xml, adk, processing-ide

所以几天前我得到了一个 Arduino Mega ADK 板，最后几个晚上我一直在设置我的开发环境，掌握工具等。工具和库都工作正常，例如我可以得到一个在 Processing IDE 中编写的程序，在运行 Android 4.03 的 Asus Eee Pad Transformer TF101 上编译和运行。但是当我尝试编译和运行其中一个预先编写的示例时，它给了我一个编译器错误：

Android SDK Tools Revision 20 安装在 C:\NVPACK\android-sdk-windows 项目类型：应用程序项目目标：Android 2.3.3 API 级别：10 库依赖项：无库

* * *

API<=15：将 annotations.jar 添加到类路径。将 AndroidManifest 文件合并为一个。清单合并已禁用。仅使用项目清单。没有要编译的 AIDL 文件。没有要编译的 RenderScript 文件。正在生成资源 ID... 正在生成 BuildConfig 类。

BUILD FAILED C:\NVPACK\android-sdk-windows\tools\ant\build.xml:680：执行此行时出现以下错误：C:\NVPACK\android-sdk-windows\tools\ant\build.xml :693: 编译失败；有关详细信息，请参阅编译器错误输出。

总时间：7秒

这就是控制台似乎也输出的所有内容，这相当令人沮丧！据我所知，我所有的 SDK 版本、工具和插件都是最新的。我已经使用我硬盘上的 Linux 分区进行了尝试，它产生了相同的错误消息，尽管它提到了包 com.Android.future.UsbAccessory 的问题。鉴于我所看到的，问题似乎出在工具上，要么我的目录结构与正确的设置不匹配，要么有其他问题：S。如果有人有类似的问题，一些帮助将是粉碎！（作为记录，我的设置是使用 Arduino 网站上的说明完成的，尽管我已经安装了 Android SDK 工具）。将斯科特-杰克逊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:42:33.723

听起来您还没有将[支持库](http://developer.android.com/tools/extras/support-library.html)添加到您的项目中和/或您还没有将其下载到您的 Android SDK 中。

ADK1 演示套件应用针对 API 级别 10 (Android 2.3.3)；这意味着您需要在项目中使用支持库，这就是编译器抱怨 10 级库依赖项不可用的原因。[支持库是SDK Manager](http://developer.android.com/sdk/installing/adding-packages.html)中的单独下载，因此您的开发环境中可能没有它们。

在 Android API Level 12 及更高版本中，USB 附件协议被添加到框架 API 中，因此有[两种不同](http://developer.android.com/guide/topics/connectivity/usb/accessory.html#choosing)的方式使用附件协议。因此，如果您的目标是 Honeycomb 和更高版本，则不必*使用*支持库，但您必须更新 demokit 应用程序代码才能使其工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:17:29.070

所以我仔细检查了我的设置并开始着手我想到的一个项目，它似乎正确地导入了库。到目前为止一切顺利，但是当我输入时：

```
ArduinoAdkUsb arduino;

void setup() {
     arduino = new ArduinoAdkUsb(this);
     //Other UI initialisation etc. 
} 
```

我收到此错误：

```
##name## ##version## by ##author##
FATAL EXCEPTION: Animation Thread
java.lang.NoClassDefFoundError: com.android.future.usb.UsbManager
    at cc.arduino.ADKCommunication.<init>(Unknown Source)
    at cc.arduino.ArduinoAdkUsb.<init>(Unknown Source)
    at                                                            
    processing.android.test.sketch_120730a.
    sketch_120730a.setup(sketch_120730a.java:48)
    at processing.core.PApplet.handleDraw(Unknown Source)
    at processing.core.PGraphicsAndroid2D.requestDraw(Unknown Source)
    at processing.core.PApplet.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:856) 
```

在应用程序构建并安装到我正在使用的 Android 平板电脑上之后。有什么想法我可以克服这个吗？据我所知，找到 com.android.future.usb.manager 来编译和安装程序没有问题，但是一旦它尝试运行它就可以找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:16:53.750

基于来自[http://stream.tellart.com/controlling-arduino-with-android/的本教程](http://stream.tellart.com/controlling-arduino-with-android/)

在示例 RGB_Arduino 中，名称、版本和作者变量设置在草图的顶部。

尝试在库导入下方的 arduino 草图顶部添加这部分代码

```
// accessory descriptor. It's how Arduino identifies itself to Android
char applicationName[] = "Mega_ADK"; // the app on your phone
char accessoryName[] = "Mega_ADK"; // your Arduino board
char companyName[] = "Freeware";

// make up anything you want for these
char versionNumber[] = "1.0";
char serialNumber[] = "1";
char url[] = "http://labs.arduino.cc/adk/"; // the URL of your app online

//initialize the accessory:
AndroidAccessory usb(companyName, applicationName,
accessoryName,versionNumber,url,serialNumber); 
```

# php - Wordpress：在 TinyMCE iframe 中添加事件

> ID：11493423
> 
> 赞同：3
> 
> 时间：2012-07-15T16:05:25.007
> 
> 标签：php, jquery, wordpress, tinymce, wordpress-theming

我已经在 Wordpress 中添加了一些 div 包装样式，但是当我在页面中使用它们时，无法在页面中在它们下方添加内容。CSS:after 在 div 内部创建一个可选区域，但在 div 之后创建一个可选区域不起作用。

在我的functions.php中，我有：

```
 function my_mce_before_init( $settings ) {
    $style_formats = array(
        array(
            'title' => 'Box Two Columns',
            'block' => 'div',
            'classes' => 'twocolbox',
            'wrapper' => true
        ),
        array(
            'title' => 'Image with Caption',
            'block' => 'div',
            'classes' => 'img_caption',
            'wrapper' => true
        ),
        array(
            'title' => 'Gallery Horizontal',
            'block' => 'div',
            'classes' => 'scroller horizontal',
            'wrapper' => true
        )
    );

    $settings['style_formats'] = json_encode( $style_formats );
    return $settings;

}
add_filter('tiny_mce_before_init', 'my_mce_before_init');
add_editor_style(); 
```

有没有办法在这里使用 execCommand 在我定义的 div 样式之后添加一些 html？之后添加类似空段落标签的内容并带有明确的浮动？

我试过：

```
tinyMCE.execCommand('mceInsertContent',false,'Hello world!!');" 
```

然后 MCE 编辑器中断。

...尝试了这个，但它太有问题了：在 editor-styles.css 中：

```
#tinyMCE:after {
 content: "    ";
 clear:both;
 width: 4em; height:4em;
} 
```

请注意，您可能需要清除缓存和 shift-reload 按钮才能查看 Wordpress 中 editor-styles.css 的任何更改。

...

仍在为此努力。找到一个线程： [To access tinymce iframe elements through jquery](https://stackoverflow.com/questions/4312173/to-access-tinymce-iframe-elements-through-jquery)

我尝试将此线程中的代码添加到 my_mce_before_init，但它只是坏了。

.... 还尝试加载 jQuery 脚本，但目标路径在 TinyMCE iframe 上不起作用。这些选择器都不起作用：

```
jQuery(document).ready(function($) {

    $("#tinyMCE").find("div").after('<p style="width:100%; clear:both; height:1em;">&nbsp; 6789</p>');
     $("div").css("color","red");

    $("#content_ifr").contents().find("div").after('<p style="width:100%; clear:both; height:1em;">&nbsp; 6789</p>');
    $("#content_ifr").contents().find("#tinymce p").css("color","red");

    $("#wp-content-editor-container").find("textarea").css("color","red");
    $("iframe").contents().find("p").css("color","red");

    $('#content_ifr').load(function(){
        $('#content_ifr').contents().find('p').css("color","red");
    });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:47:46.727

您可以使用 tinymce 配置选项 content_css 添加 html 伪元素。在那里你可以定义 after 元素。试试看！

**更新：**

初始化 tinymce 时，将设置参数设置为以下（内部`tinyMCE.init({...}`）

```
...
theme: "advanced",   // example param
setup : function(ed) {
    ed.onInit.add(function(ed, evt) {
        $("#content_ifr").contents().find("p").css("color","red");

        // other approach  
        //$(ed.getBody()).find('p').css("color","red");
    });
},
cleanup: true,      // example param
... 
```

# javascript - 在配置中使用 loadNetzkeComponent 的参数

> ID：11493424
> 
> 赞同：1
> 
> 时间：2012-07-15T16:05:27.287
> 
> 标签：javascript, ruby, netzke

是否可以将额外的参数传递给“loadNetzkeComponent”并在组件配置中使用它们？

例子：

JavaScript：

```
this.loadNetzkeComponent({name: 'Erp::OrderPanel', container: 'workspace', params: { orderId: 1 }, scope: this }); 
```

红宝石：

```
class Erp::OrderPanel < Netzke::Base
  # ...
  def configuration(params)
    super.merge(
      scope: { order_id: params[:order_id] }
    )
  end
  # ...
end 
```

我知道，该方法没有`param`属性`configuration`，但是有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:15:54.257

您可以使用会话（或 component_session）存储将参数传递给配置。

```
session[:order_id] = params[:order_id] 
```

然后在配置中：

```
def configuration(params)
    super.merge(
      scope: { order_id: session[:order_id] }
    )
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:01:12.507

1）因为直接从 JavaScript 传递配置参数是不安全的，一种方法是覆盖父组件（调用 loadNetzkeComponent 的那个）中的 Deliver_component 端点，您可以在其中对传递的参数进行最终的安全检查，然后覆盖组件配置。可以在 netzke-core 的测试应用程序中找到一个示例：[https ://github.com/nomadcoder/netzke-core/blob/master/test/core_test_app/app/components/component_loader.rb#L98](https://github.com/nomadcoder/netzke-core/blob/master/test/core_test_app/app/components/component_loader.rb#L98)

2) Dmytro 建议的方法可能需要在加载子组件*之前对父组件进行额外的端点调用。*在该端点中，您将在会话中存储 require 参数 - 这样您将确保*每次*加载的子组件与服务器通信时都会记住该参数。第一种方法没有提供，因为传递的参数只使用一次 - 在加载组件的那一刻 - 然后“忘记”。

根据您的要求，选择两者之一。

# r - 从 R 访问 bitly OAuth2 API

> ID：11493425
> 
> 赞同：3
> 
> 时间：2012-07-15T16:05:45.473
> 
> 标签：r, api, bit.ly

我希望能够从 R 访问[bitly OAuth2 api](http://dev.bitly.com/authentication.html)，并且想知道是否有任何示例实现，或者更好的是，围绕 bitly API 的 R 库/包装器？

twitteR 库跨越了一个[R OAuth 库 ROAuth](http://cran.r-project.org/web/packages/ROAuth/index.html)，但这大概不支持 OAuth2？或者 OAuth2 会接受 OAuth1 提议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T14:47:03.557

这是一种使用方式- 它[在 GitHub 上](https://github.com/hadley/httr/tree/master/demo)`httr`的包示例的脉络中：

```
require(jsonlite)
require(httr)

# 1\. Find OAuth settings for bit.ly:
# http://dev.bitly.com/authentication.html
bitly <- oauth_endpoint(
  authorize = "https://bitly.com/oauth/authorize",
  access = "https://api-ssl.bitly.com/oauth/access_token")

# 2\. Register an application at http://dev.bitly.com/my_apps.html
# Insert your values below - if secret is omitted, it will look it up in
# the BITLY_CONSUMER_SECRET environmental variable.
myapp <- oauth_app("bitly", 
                   key = ".............................", # Client ID
                   secret = "............................") # Client Secret

bitly_token <- oauth2.0_token(bitly, myapp, cache = FALSE) 

# 4\. Use API
req <- GET("https://api-ssl.bit.ly/v3/user/info", query = list(access_token = bitly_token$credentials$access_token))
stop_for_status(req)
content(req)$data$profile_url
# [1] "http://bitly.com/u/lukeanker" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:17:07.057

到目前为止，我已经在一个与其他 API 相关的包中编写了三个 fxns：[https ://github.com/ropensci/raltmet/tree/master/R](https://github.com/ropensci/raltmet/tree/master/R)

三个fxns根据用户获取clickc，展开url和缩短url

通过以下方式安装：

```
install.packages("devtools")
require(devtools)
install_github("raltmet", "ropensci")
require(raltmet) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:24:40.370

可以使用尚未更新的 CRAN 版本的 ROAUth ( `ROAuth 0.92`) 来完成此操作。[我在这里](https://dl.dropbox.com/u/2223411/ROAuth_0.92.0.tar.gz)有一份工作副本。`ROAuth`从此源安装后，下载一份副本`RMendeley`以测试 R 如何与 oauth 配合使用。

```
library(devtools)
install_github("rmendeley", "ropensci") 
```

# amazon-s3 - 如何在 Namecheap 为 Amazon S3 设置 CNAME

> ID：11493426
> 
> 赞同：18
> 
> 时间：2012-07-15T16:05:56.490
> 
> 标签：amazon-s3, dns, amazon, web-hosting, cname

我正在使用 amazon S3 托管我的一个静态站点，并希望将其链接到我的域名 (domainname.co.uk)。所以我进入了 namecheap account-all 主机记录并做了这样的事情，

![Namecheap 控制面板截图](../Images/59fa468b563f86aa24d86479a70020ce.png)

但是，当我访问网站 url 时，它仍然不起作用并抛出 404。顺便说一句，在 www 选项下，我像这样使用我的 S3 url `conxxxxxxxxxxx.co.uk.s3-website-eu-west-1.amazonaws.com.`，.

注意最后的点，每当我尝试保存时，Namecheap 会自动添加它，即使没有点也是如此。我不确定这是否是导致问题的原因，但它对我不起作用。

直接访问我的 AWS URL 工作正常，这意味着我的 CNAME 设置有问题。

有人知道这里做错了什么吗？Namecheap 支持也完全不知道。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T05:03:18.823

如果存储桶名称与 CNAME 匹配，您只能为 Amazon S3 使用自定义 CNAME。

例如，如果您的存储桶名为：

```
files.example.com 
```

因此默认情况下可在以下位置访问：

```
files.example.com.s3-website-us-east-1.amazonaws.com. 
```

`files.example.com`完整存储桶域名的 CNAME将允许您使用自定义域。

**但是**，如果您的存储桶名称与您尝试定义的 CNAME 不**完全相同**，它将不起作用。在您的屏幕截图中，您尝试将其`www....`用作您的 CNAME，但（编辑的）存储桶名称不包含`www.`. 请注意，“确切”包括区分大小写；您的存储桶名称必须全部小写，CNAME 才能工作。

此功能的完整文档在这里：[http ://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs](http://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs)

* * *

如果您想要/需要多个 CNAME，和/或与存储桶名称不匹​​配的 CNAME，Amazon CloudFront 允许您为部署指定任意 CNAME。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-04T08:26:34.443

自从提出这个问题以来已经有一段时间了，但是如果有人在亚马逊 AWS s3 存储桶中为静态网站寻找 NameCheap CNAME 设置，请参考下面的屏幕截图。自 2019 年 7 月起，此 AWS S3 存储桶托管 + NameCheap DNS 记录的设置对我有效。

[![NameCheap AWS S3 网站托管的 CNAME 记录](../Images/49fa284560631d6bab4a4b28e2de349a.png)](https://i.stack.imgur.com/baYbL.png)

此设置用于将 AWS S3 静态网站端点指向您在 NameCheap 中的自定义域。

[![AWS S3 网站终端节点](../Images/a46bd3bcfdd40915c1d26dc3b6177e16.png)](https://i.stack.imgur.com/ijnEI.png)

请注意，如果您使用的是 AWS CloudFront SSL 证书，那么您的 CNAME 记录值将是 CloudFront 域名（而不是静态网站终端节点）。

# java - 在本地主机上找不到范围

> ID：11493433
> 
> 赞同：0
> 
> 时间：2012-07-15T16:06:54.040
> 
> 标签：java, red5

我用一个简单的客户端应用程序创建了一个服务器端应用程序。
另外我通过编译服务器端的源代码创建了jarfile，并将所有内容放在Red5/webapp目录下。

我面临的问题是，将客户端闪存代码连接到服务器时，出现以下两个错误：

*连接：拒绝*
*连接：关闭*

当我检查 Red5 服务器的日志时，它告诉我：

*在 localhost 上找不到 Scope myapp。*

WEB-INF 目录中的
配置文件：（配置文件、服务器和客户端代码，来自 paste.org。）

[配置文件，服务器代码，客户端代码](http://pastie.org/4261492)

**sample**是我放在 Red5/webapp 目录下的文件夹。

* * *

这是我三天的问题。
我在这里谦虚地寻求帮助，因为我自己无法解决问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:14:53.490

仔细检查您的`red5-web.xml`文件。也许 bean 类名不正确？

# xib - 如何在没有 xib 文件的情况下集成 iAD

> ID：11493434
> 
> 赞同：0
> 
> 时间：2012-07-15T16:06:59.453
> 
> 标签：xib, declaration, subview, nib, iad

我有一个不使用任何形式的故事板或 xib 或 nib 的应用程序。我以前使用过 iAD，但它涉及在代码中拖拽和声明。如何让banner添加视图成为子视图，（我对这种编程的了解很差，我刚开始使用objective-c）。先谢谢了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:18:30.527

使用[admob 中介](https://developers.google.com/mobile-ads-sdk/docs/ios/mediation/)...它很容易实现

3行代码，你就完成了

# python-3.x - 使用 python 和 PyQt 创建可滚动列表

> ID：11493442
> 
> 赞同：0
> 
> 时间：2012-07-15T16:07:44.680
> 
> 标签：python-3.x, pyqt4

我的应用程序中有一个带有 QWidget (content_widget) 的 QScrollArea。我想在应用程序运行时用图像填充它。如果图像数量超过无需滚动即可显示的数量，我希望具有滚动行为。我走了这么远：

```
children_occupied_width = self.ui.content_widget.childrenRect().width()

image_view = QtGui.QGraphicsView(self.ui.content_widget)
image_view.setGeometry(QtCore.QRect( children_occupied_width, 0, 210, 210 ))
image_view.setObjectName("New Image")

placeholder_image = QtGui.QGraphicsScene()
placeholder_image.addPixmap(QtGui.QPixmap('placeholder.png'))
image_view.setScene(placeholder_image)

image_view.show() 
```

尽管图像出现在列表中的正确位置，但如果图像开始放置在可见区域之外，则不会滚动。content_widget 的大小似乎没有改变，即使

```
self.ui.content_widget.resize(...) 
```

或者

```
self.ui.content_widget.adjustSize() 
```

如何使其增长/调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:55:58.130

*第一部分结果不是你真正需要的。我将其保留以供参考，但请参阅底部的更新*

问题是 QGraphicsView 本身就是一种滚动小部件，代表它正在查看的场景的一部分。理想情况下，您将只使用视图本身并使用它自己的滚动条。

但是，如果您特别需要将视图的内容大小转发到正常的 QWidget 滚动，那么您需要做的是让您的 QGraphicsView 在场景内容更改时始终调整自身大小。QScrollArea 只会响应它设置的小部件的大小变化。视图需要更改大小。该过程将是视图需要监听来自场景的信号以添加或删除项目，然后调整自身大小以完全包围所有这些子项。

以下是 QGraphicsView 小部件如何完美地充当滚动功能的示例：

```
from PyQt4 import QtCore, QtGui

app = QtGui.QApplication([])
scene = QtGui.QGraphicsScene()
view = QtGui.QGraphicsView()
view.setScene(scene)

view.resize(600,300)

pix = QtGui.QPixmap("image.png")

w,h = pix.width(), pix.height()
x = y = 0
pad = 5
col = 3

for i in xrange(1,20):
    item = scene.addPixmap(pix)
    item.setPos(x,y)

    if i % col == 0:
        x = 0
        y += h+pad
    else:
        x+=w+pad

view.show()
view.raise_()
app.exec_() 
```

您可以看到，当图像超出视图的当前大小时，您会看到滚动条。
如果您确实需要一些父滚动区域作为视图的滚动（出于我不太了解的原因），那么这里有一个更复杂的示例，显示您需要如何监视场景中的某些事件，然后不断更新视图的大小以在父滚动区域上强制滚动条。我选择在场景中观看信号，以了解其矩形何时发生变化（添加了更多孩子）

```
from PyQt4 import QtCore, QtGui

app = QtGui.QApplication([])

win = QtGui.QDialog()
win.resize(600,300)
layout = QtGui.QVBoxLayout(win)
scroll = QtGui.QScrollArea()
scroll.setWidgetResizable(True)
layout.addWidget(scroll)

view = QtGui.QGraphicsView(scroll)
view.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
view.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
scene = QtGui.QGraphicsScene(scroll)
view.setScene(scene)

scroll.setWidget(view)

pix = QtGui.QPixmap("image.png")

w,h = pix.width(), pix.height()
x = y = i = 0
pad = 5
col = 3

def createImage():
    global x,y,i
    item = scene.addPixmap(pix)
    item.setPos(x,y)

    i+=1
    if i % col == 0:
        x = 0
        y += h+pad
    else:
        x+=w+pad

def changed():
    size = scene.itemsBoundingRect().size()
    view.setMinimumSize(size.width()+pad, size.height()+pad)

scene.changed.connect(changed)

t = QtCore.QTimer(win)
t.timeout.connect(createImage)
t.start(500)

win.show()
win.raise_()
app.exec_() 
```

滚动区域始终查看已设置为子项的小部件的大小。必须调整视图大小。

**更新**

从您的评论中可以看出，您实际上并不需要为这种方法使用 QGraphics 对象。它只会让你的任务更加复杂。只需使用垂直布局并向其中添加 QLabel 小部件：

```
from PyQt4 import QtCore, QtGui

app = QtGui.QApplication([])

win = QtGui.QDialog()
win.resize(300,300)
layout = QtGui.QVBoxLayout(win)
scroll = QtGui.QScrollArea()
scroll.setWidgetResizable(True)
layout.addWidget(scroll)

scrollContents = QtGui.QWidget()
layout = QtGui.QVBoxLayout(scrollContents)
scroll.setWidget(scrollContents)

pix = QtGui.QPixmap("image.png")

def createImage():
    label = QtGui.QLabel()
    label.setPixmap(pix)
    layout.addWidget(label)

t = QtCore.QTimer(win)
t.timeout.connect(createImage)
t.start(500)

win.show()
win.raise_()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:25:26.757

`resize`我至少找到了一个在我的代码中不起作用的原因。将`widgetResizable`QScroll 区域的属性设置为 false（或在 Qt 设计器中禁用它）使其工作。

# c# - 如何在同一页面中加载具有不同条件的相同用户控件

> ID：11493444
> 
> 赞同：0
> 
> 时间：2012-07-15T16:07:48.520
> 
> 标签：c#, asp.net, user-controls

如何在同一页面中为不同的不同视图加载具有不同不同条件的相同用户控件。

我想在 5 个不同的 DIV 的 asp 页面中加载用户控件，它们有一个共同的视图，但背后的不同代码我可以在页面加载时使用 case 语句进行管理，我想知道如何让 DIV 知道对于放置在 DIV 中的相同用户控件执行什么情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:13:26.177

在用户控件中创建一个属性，该属性可以通过标记设置，也可以通过代码隐藏中的代码设置。

例如...

```
private _myVar int = 0;
public int MyVar
{
   set { _myVar = value; }
} 
```

然后你可以在标记中设置...

```
<uc1:MyCtrl runat="sever" ID="ctrl1" MyVal="1"/> 
```

或者在代码隐藏中你可以......

```
ctrl.MyVar = 1; 
```

# jquery - 如何使用 PhoneGap/Cordova 为 Windows Phone 7 创建一个简单的全景应用程序？

> ID：11493449
> 
> 赞同：9
> 
> 时间：2012-07-15T16:08:29.327
> 
> 标签：jquery, html, windows-phone-7, cordova

我环顾四周，发现了几个适用于 Windows Phone 7 的基于 PhoneGap/Cordova 的 HTML5 应用程序示例，但它们似乎都没有向您展示如何制作全景图或枢轴样式应用程序，这是操作系统的用户界面。我正在寻找一个像这样工作的应用程序：

全景：

![Windows Phone 7 全景示例](../Images/6abe78c65fef7d229682c15b0b8a9c28.png)

枢：

![Windows Phone 7 枢轴示例](../Images/f643f3059beb25feebb04e712097ec10.png)

我想使用纯 HTML5、CSS3 和 JS 构建这些应用程序，并使用 PhoneGap Build 来部署它们。我不想使用 Visual Studio。VS 为全景或透视布局提供了两个单独的控件，但在 HTML5 中，应该只有一个滑块控件可用于两者，并进行调整以允许多屏列，如第一个中的“第二项”页面例子。

我还寻找了一些我可以调整的兼容 IE9 的 jQuery 滑块插件，但其中 90% 都不起作用，其余的有点太不同了，无法尝试和适应。例如，这个[jQuery 页面滑动（横向）过渡](http://jquerymobile.com/demos/1.1.1/docs/pages/page-transitions-page.html)在每个浏览器中都可以正常工作，但在 WP7 浏览器中退化为基本的向上滑动类型效果。

我的目标是多个操作系统，但我不想在所有操作系统中复制相同的界面。数据源是通用的，但我希望它们看起来像每个操作系统上本地设计的应用程序。

**更新1：**

在 WP7 上找到[了一个滚动条/滑块插件](http://www.zackgrossbart.com/hackito/touchslider/)，它实际上响应了 IE Mobile 上的触摸事件，但它不会捕捉到每个面板的边缘，这是 pano/pivot 控件的一个重要方面。

还检查了[XUI](http://xuijs.com)，它有一个名为 Swipe 的插件来检测滑动/点击事件，但即使使用“xui-ie-2.3.2.min.js”，该示例在 IE Mobile 中也完全没有任何作用。

**更新 2：**

我最接近找到类似的东西是有前途的[jqMetro](http://www.jqmetro.com)附加组件。它为您提供了完整的 Metro 风格，包括全景、透视和原生外观控件，但最讽刺的是滑动功能在 IE Mobile 上不起作用，这意味着它在 PhoneGap 的应用程序中不起作用. 点击枢轴标题可以正常工作并切换到该视图。

**更新 3：**

完全放弃混合应用程序开发！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:00:53.343

这么晚才回复很抱歉。我也遇到了这个问题，这是我的解决方案：[https ://github.com/grohman/js-panorama](https://github.com/grohman/js-panorama)

它适用于 wp8 的 IE10，也应该适用于 wp7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T22:13:25.213

默认情况下，您不能在 PhoneGap 内进行全景。你也许能找到一些有效的 x-compat js-lib，但我真的没有见过一个看起来像 Windows Phone Panorama 一样好的。

但是您可以在全景图中拥有多个 PhoneGap 页面。让我来告诉你怎么做。请注意，此解决方案与 x-plat 不兼容。

![全景中的多个电话间隙](../Images/ed5fac3e760877884c06a4ffd49c314f.png)

拉下最新的 phonegap 并按照此链接进行设置 - [ [http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone) ]。

创建一个新项目，将其命名为“pgpanoramaplay”或类似名称。

将“\www\index.html”复制到“\www”目录中的至少两个其他文件中。我将我的命名为“30tolaunch.html”、“dfwiki.html”和“devfish.html”。

标记内容只是为了显示一些基本的东西。对于我的“\www\30tolaunch.html”，修改后的 html 正文如下。

```
<body>
    <div class="app">
        <h1>30tolaunch</h1>
        <div>
            <p>30 Days to Launch an App</p>
            <p>Great content</p>
            <a href="http://bit.ly/30tolaunch">bit.ly/30tolaunch</a>
        </div>
    </div>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body> 
```

现在 [鼠标右键] 项目，并添加一个全景项目。取 PanoramaPage1.xaml 的默认名称

更改 wmmanifest1.xaml 以使用 PanoramaPage1.xaml 作为启动对象

打开 PanoramaPage1.xaml。修改页面顶部以拉入对电话间隙的引用，如下所示

如下修改 PanoramaControl。请注意，我已经手动创建了所有 .html pagex，但已经存在的 item.html 除外。

```
<Grid x:Name="LayoutRoot">
    <controls:Panorama Title="phonegap">
        <!--Panorama item one-->
        <controls:PanoramaItem Header="30tolaunch">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <my:CordovaView HorizontalAlignment="Stretch" 
                    Margin="0,0,0,0"  
                    x:Name="PGView4" 
                    VerticalAlignment="Stretch"
                    StartPageUri="/app/www/30tolaunch.html"
                />
            </Grid>
        </controls:PanoramaItem>

        <!--Panorama item one-->
        <controls:PanoramaItem Header="index">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <my:CordovaView HorizontalAlignment="Stretch" 
                    Margin="0,0,0,0"  
                    x:Name="PGView" 
                    VerticalAlignment="Stretch"
                />
            </Grid>
        </controls:PanoramaItem>

        <!--Panorama item two-->
        <controls:PanoramaItem Header="item2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <my:CordovaView HorizontalAlignment="Stretch" 
                    Margin="0,0,0,0"  
                    x:Name="PGView2" 
                    VerticalAlignment="Stretch"
                    StartPageUri="/app/www/devfish.html"
                />
            </Grid>
        </controls:PanoramaItem>

    <controls:PanoramaItem Header="item3">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <my:CordovaView HorizontalAlignment="Stretch" 
                    Margin="0,0,0,0"  
                    x:Name="PGView3" 
                    VerticalAlignment="Stretch"
                    StartPageUri="/app/www/dfwiki.html"
                />
            </Grid>
        </controls:PanoramaItem>
    </controls:Panorama>
</Grid> 
```

调试，开始，您应该会看到页面显示类似于本文顶部的图片。

如果您想设置 PhoneGap 页面的样式以匹配全景背景、调整高度、删除背景图像等等，default.css 是您的朋友。标记并享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T12:59:21.627

解决方案是放弃使用 Web 技术的用户来构建原生应用程序，转而采用完全原生的方式。混合应用程序框架是邪恶的。

# python - 如何在后台启动 python XMLRPC 服务器？

> ID：11493455
> 
> 赞同：3
> 
> 时间：2012-07-15T16:09:09.847
> 
> 标签：python, shell, xml-rpc

我为我的 Web 应用程序编写了一个 python XMLRPC 服务器。问题是每当我从 shell 启动服务器并退出时，xmlrpc 服务器也会停止。我尝试从另一个文件执行服务器脚本，认为它会继续在后台运行，但这不起作用。这是用于启动服务器的代码。

```
host = 'localhost'
port = 8000
server = SimpleXMLRPCServer.SimpleXMLRPCServer((host, port))
server.register_function(getList)
server.serve_forever() 
```

在外壳中，我只是`>>python MyXmlrpcServer.py`启动服务器。

我该怎么做才能启动服务器并使其保持运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:14:52.383

最好使用[twisted](http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html)创建一个XML-RPC 服务器。因此您不需要编写自己的服务器，它非常灵活，您可以使用以下命令在后台运行`twistd`：

```
#!/usr/bin/env python

import time, datetime, os, sys
from twisted.web import xmlrpc, server
from twisted.internet import reactor

class Worker(xmlrpc.XMLRPC):

    def xmlrpc_test(self):
        print 'test called!'

port = 1235
r = Worker(allowNone=True)

if __name__ == '__main__':
    print 'Listening on port', port
    reactor.listenTCP(port, server.Site(r))
    reactor.run()
else: # run the worker as a twistd service application: twistd -y xmlrpc_server.py --no_save
    from twisted.application import service, internet
    application = service.Application('xmlrpc_server')
    reactor.listenTCP(port, server.Site(r))
    reactor.run()
    #internet.TCPServer(port, server.Site(r)).setServiceParent(application) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T16:23:12.740

@warwaruk 提出了一个有用的建议；Twisted XML-RPC 简单而健壮。但是，如果您只是想在“后台”中运行和管理 python 进程，请查看[Supervisord](http://supervisord.org/)。它是一个简单的流程管理系统。

```
$ pip install supervisor
$ echo_supervisord_conf > /etc/supervisord.conf 
```

编辑该配置文件以添加您的流程定义，从而...

```
 [program:mycoolproc]
  directory=/path/to/my/script/dir
  command=python MyXmlrpcServer.py 
```

启动 supervisord 并开始你的进程

```
$ supervisord
$ supervisorctl start mycoolproc 
```

# java - Hibernate @Any 无法获取对象

> ID：11493458
> 
> 赞同：0
> 
> 时间：2012-07-15T16:09:15.423
> 
> 标签：java, hibernate, annotations, any

我检查了下面的文章并尝试实现类似但失败的东西。 [如何使用 Hibernate @Any 相关的注解？](https://stackoverflow.com/questions/217831/how-to-use-hibernate-any-related-annotations)

我有 2 个问题： 1- 那些 Book、VHS 和 DVD 类是映射“BORROW”表的实体吗？这些类的示例代码将很有用。2-当我尝试时，我成功地获得了正确的对象类型，但值为空。我尝试了 Hibernate.initialize，由于延迟获取，我看到它也带来了一些日期，但无法将该数据填充到对象。

难道我做错了什么？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:34:06.687

1.  书籍、VHS 和 DVD 是正常实体。他们根本不需要参考借
2.  您根本不应该看到空数据。这可能有几个原因：

    *   数据库中没有数据
    *   hibernate 无法设置属性，但这应该引发异常
    *   属性未正确映射

# mysql - MYSQL - 按从最新到最旧的顺序升序排列时间戳值？

> ID：11493463
> 
> 赞同：15
> 
> 时间：2012-07-15T16:09:54.927
> 
> 标签：mysql, timestamp, sql-order-by

在尝试按时间戳值对某些结果进行排序时，我遇到了一个问题。

我希望这些结果根据时间戳值从最新到最旧显示。

因此，为了解释这一点，假设有 3 个结果：

```
2012-07-11 17:34:57
2012-07-11 17:33:28
2012-07-11 17:33:07 
```

这个结果集将是我所需要的，但给出以下查询

```
SELECT timestamp
FROM randomTable
ORDER BY timestamp ASC 
```

我得到：

```
2012-07-11 17:34:57
2012-07-11 17:33:07
2012-07-11 17:33:28 
```

这是因为它按数值排序并排`07`在前面`28`。

如果我按降序排序，我得到

```
2012-07-11 17:33:07
2012-07-11 17:33:28
2012-07-11 17:34:57 
```

这就是我正在寻找的......但它是相反的。

所以我的问题很简单，我怎么能像我描述的那样按升序对这些值进行排序？

编辑：

![问题](../Images/d8212c6cc8bf3c56010070b609a40584.png)

编辑2：

```
CREATE TABLE `user_quotations` (
 `id` int(100) NOT NULL AUTO_INCREMENT,
 `quoteNumber` int(100) NOT NULL,
 `lastModified` datetime NOT NULL,
 `userId` int(100) NOT NULL,
 `manufacturer` varchar(250) COLLATE latin1_general_ci NOT NULL,
 `modelNumber` varchar(250) COLLATE latin1_general_ci NOT NULL,
 `productDesc` varchar(1000) COLLATE latin1_general_ci NOT NULL,
 `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 PRIMARY KEY (`id`),
 KEY `quoteNumber` (`quoteNumber`,`lastModified`,`userId`,`manufacturer`,`modelNumber`,`timestamp`),
 KEY `productDesc` (`productDesc`)
) ENGINE=MyISAM AUTO_INCREMENT=8 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T16:53:02.750

您的查询 ：

```
SELECT timestamp
FROM randomTable
ORDER BY timestamp ASC; 
```

是完美的。但我怀疑您在帖子中提供的结果。您发布了：

```
2012-07-11 17:34:57
2012-07-11 17:33:07
2012-07-11 17:33:28 
```

但是你的 sqlbox 中的结果显示：

```
2012-07-11 17:34:57
2012-07-15 17:33:07
2012-07-15 17:33:28 
```

这是完全正确的。

这是您发帖中的拼写错误吗？
如果没有，请尝试以下操作：

```
SELECT timestamp( `timestamp` ) as 'timestamp'
FROM randomTable
ORDER BY 1 ASC; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T16:20:27.227

检查表的创建语句。我希望您的时间戳列确实是一个字符串。

```
Show create table tablename; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T16:30:52.380

如果您将查询编写为：

```
select q.`timestamp`
from user_quotations as q
order by q.`timestamp`
limit 30 
```

您应该正确订购它们。

如果不是，则时间戳数据有问题。寻找前导/尾随空格、奇数字符等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-29T05:38:27.597

屏幕截图显示了 15 日的两个结果和 11 日的一个结果。可能会稍微影响订单。

# unix - 在 shell 脚本中更改 unix 用户

> ID：11493464
> 
> 赞同：0
> 
> 时间：2012-07-15T16:09:57.393
> 
> 标签：unix, root, sudo, administrator, su

我想在 shell 脚本中更改当前用户，以便通过将登录名和密码作为参数传递，使用户能够以管理员身份执行命令。

我想有能力做类似的事情：

```
sh ./script.sh login password 
```

在脚本内部，类似：

```
sudo $1 $2 etc... 
```

但是我不知道如何清楚地编码。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:26:33.067

### 只需使用须藤

sudoers(5) 文件允许非常复杂的权限和命令规范。作为一个简单的示例，您可以让组中的每个人都以 root 身份运行单个脚本，而无需密码。这更具脚本性，同时仍允许您限制访问。例如：

```
# /etc/sudoers
%somegroup ALL=(ALL:ALL) NOPASSWD:/path/to/script.sh 
```

由于默认情况下该脚本将以 root 身份运行，因此无需在您的脚本中跳过更多的箍。

### 话题性说明

这对于 Stack Overflow 来说有点主题，因为它与脚本相关。但是，如果您有关于配置 sudoers 文件的后续问题，您可能应该在[SuperUser](https://superuser.com/)上询问这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:57:07.163

我对 sudo 命令的经验有限，但我知道您可以使用文本编辑器创建代码，并使用 chmod 命令更改权限以及人们可以访问您的代码的不同方式。

更具体地说，一旦你得到你的 .command 文件，你就可以进入你的模拟器并输入 chmod。之后添加一个空格，然后您可以自定义可以实际与代码交互的用户。例如，chmod a+rwx 表示每个人 (a) 都可以拥有读、写和执行 (rwx) 的权限。chmod 的使用方法有很多种，这个网页是找出这些方法的好资源： [http ://www.zzee.com/solutions/how-to-use-chmod.shtml](http://www.zzee.com/solutions/how-to-use-chmod.shtml)

在 chmod 和 user/permissions 参数之后，您可以在末尾添加代码的文件路径，以告诉 UNIX 哪个文件要 chmod。之后，您可以手动更改可能运行代码的管理组的成员，以提供更好的灵活性，正如 CodeGnome 建议的那样。

# objective-c - 自定义委托方法触发正常，但值不会保留在其他方法中

> ID：11493465
> 
> 赞同：0
> 
> 时间：2012-07-15T16:10:01.497
> 
> 标签：objective-c, ios5, delegates, persistence, modalviewcontroller

我是objective-c的新手。我正在做一个带有模态视图的应用程序，它将数据传递给他的父视图。我实现了一个协议委托，并且数据可以正常传递，但它不会在其他方法中持续存在，因为当我尝试使用传递的值做某事时，在我的委托方法之外似乎为空。我在委托方法中做了一个 NSLog 并且值在那里，但是当我想在另一个方法中使用该值时似乎错过了。我没有使用ARC。

我的主 ViewController.h：

```
@protocol ModalViewDelegate
- (void)didReceiveWeight:(NSString *)weight andUnit:(NSString *) unit;
@end

@interface LogWeightTableViewController : UITableViewController<ModalViewDelegate> {
NSNumber *weightPassed;
}

@property (nonatomic, retain) IBOutlet UILabel *WeightSelected;
//... 
```

我的主 ViewController.m：

```
//...this method is triggered ok, and _weightPassed has the value.
- (void)didReceiveWeight:(NSString *)weight andUnit:(NSString *)unit{

NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
_weightPassed = [f numberFromString:weight]; //_weightPassed have null in another methods
[f release];

NSString *value = [[[NSString stringWithString:weight] stringByAppendingString:@" "] stringByAppendingString:unit];

[WeightSelected setText:valor];
} 
```

我的模态视图.h：

```
@property (nonatomic, assign) id<ModalViewDelegate> delegate; 
```

我的模态视图.m：

```
- (void)viewDidLoad
{
//...
LogWeightTableViewController *logWeightTVC = [[LogWeightTableViewController alloc]init];
self.delegate = logWeightTVC;

//...when i press a button to go back to main view call the delegate method:
[delegate didReceiveWeight:valor andUnit:unidad]; 
```

回到我的 MainViewController。我想用我的 _weightPassed 做点什么：

```
- (IBAction)saveLogToDataBase:(id)sender {
// ... do some stuff
[row setKg: _weightPassed]; //<-- here _weightPassed is null 
```

我想我错过了一些重要的概念或其他东西，希望有人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:05:37.433

正如 H2CO3 建议的那样，我已经更改了我的设计模式，现在在显示模式视图之前传递了委托。我在 prepareForSegue 方法中完成了它：

```
 - (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { 
     if ([[segue identifier] isEqualToString:@"modalSegue"]) {
        ModalView *pickerView = [segue destinationViewController]; 
        pickerView.delegate = self; 
    }
} 
```

# android - 允许用户将文本和数字都放在 EditText 中？

> ID：11493473
> 
> 赞同：0
> 
> 时间：2012-07-15T16:11:42.210
> 
> 标签：android, android-edittext

所以，我一直在开发一个应用程序，并注意到`EditText`我正在使用的 s 似乎默认为`android:inputType="text"`. 这让我无法输入数字。我不希望对用户可以输入的内容有任何限制。有没有办法消除这些限制？

这是我的问题的一个示例：

```
 <EditText
    android:id="@+id/titleEntry"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:freezesText="true"
    android:hint="@string/title"
    android:singleLine="true" > 
```

请注意缺少`android:inputType`属性，但我没有任何能力将数字放入 editText 字段（[证据](http://youtu.be/wZk-3PTaa5s)）。这也发生在`android:inputType="text"`声明时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:15:03.633

`android:inputType="text"`表示没有限制，用户可以输入数字、字符或其他任何内容。

或者您可以从编辑文本标签中删除此行..

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" android:inputType="text" > 
```

它会让你输入数字/字符等

# c - C中函数内的奇怪执行

> ID：11493474
> 
> 赞同：0
> 
> 时间：2012-07-15T16:11:52.320
> 
> 标签：c, function, structure

我正在开发一个代数应用程序，与图形计算器可以做的非常相似。

```
struct quotient NewQuotient()
{
    struct quotient temp;
    printf("Enter the numerator\n");
    scanf("%d", &temp.numerator);
    printf("Enter the denominator\n");
    scanf("%d", &temp.denominator);
    return temp;   
}

char NewVarname()
{
    char temp;
    printf("Enter the variable letter: \n");
    scanf("%c", &temp);
    return temp;
}

struct term NewTerm()
{
    struct term temp;
    printf("Enter the coefficient: ");
    temp.coefficient = NewQuotient();
    printf("Enter the variable name: \n");
    temp.varname = NewVarname();
    printf("Enter the power: ");
    temp.power = NewQuotient();
    return temp;
} 
```

该程序可以很好地获取系数和幂的商，但是获取变量名存在问题。我认为在 NewQuotient 中的 scanf 语句之后缓冲区中有一个空字符，但如果有，我不知道如何找到它们或如何修复它们。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:23:03.843

In general, `scanf` doesn't go well with `gets`. It's not easy to use both in the same program. In your case, `scanf` reads exactly one character (`x`), while the user inputs 2 characters - `x` and `end-of-line`.

The `end-of-line` character remains in the input buffer, causing the following. `gets` reads the input until the nearest `end-of-line` character, which in your case appears to arrive immediately, even while the user doesn't have time to input anything.

To fix this, do all your input with either `gets` or `scanf`:

* * *

**First option**

```
struct term NewTerm()
{
    ....
    // Old code:
    // scanf("%c", &temp.varname);

    // New code, using gets:
    char entry[MAX];
    gets(entry);
    temp.varname = entry[0];
    ....
} 
```

* * *

**Second option**

```
struct quotient NewQuotient()
{
    ....
    // Old code
    // gets(entry);

    // New code, using scanf:
    int x, y;
    scanf("%d/%d", &x, &y);
    ....
} 
```

BTW if you choose the first option, [you should use fgets instead of gets](https://stackoverflow.com/a/2974053/509868).

# magento - 获取扩展以在多商店上工作（Onestepcheckout）

> ID：11493475
> 
> 赞同：1
> 
> 时间：2012-07-15T16:11:57.660
> 
> 标签：magento

我在同一个域（子目录）上建立了一个 Magento 网站，其中有 2 个商店

示例：www.site.com（主站点） www.site.com/second（第二站点）

我的问题是，我的一些扩展似乎无法跨站点工作，例如 OneStepCheckout ex。当我在（第二个站点）上结帐时，它只是进入一个空白页面。

有人试过这个吗？有谁知道解决方案？

> **我通过将模板复制到正确的主题文件夹来解决它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:29:52.357

如果你得到一个空页面，那么你需要验证

*   如果它不是您网站上的 php 错误 - 请参阅 php error_log 或从 index.php 启用错误报告

*   如果您的主题回退设置正确 - 如果它回退到 app/design/frontend/base/default/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:50:45.123

这很简单（错误 40）。忘记将模板文件复制到新商店的模板目录中，如 Onestepcheckout 的用户手册中所述。

# iphone - 有没有办法找出应用程序安装了多长时间

> ID：11493476
> 
> 赞同：0
> 
> 时间：2012-07-15T16:12:21.560
> 
> 标签：iphone, installation

我想实现一个弹出窗口，该弹出窗口在用户使用该应用程序一段时间后出现。我想知道我是否可以从用户 iPhone 中获取我的应用程序的安装日期？还是有更好的方法来完成这项工作？抱歉，我不清楚我的要求，与每次会话的使用量无关，而是用户安装应用程序的时间。这就是为什么我认为我可能会检查可用的安装日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:31:42.703

当用户第一次打开应用程序时，将该日期保存到`NSUserDefaults`. 这将是您的安装日期，然后在您记录该日期后，您可以在每次打开应用程序时与该日期进行比较。这将告诉您应用程序安装了多长时间

# c# - 结合不同风格的触发器（如 &&）？

> ID：11493477
> 
> 赞同：1
> 
> 时间：2012-07-15T16:12:25.910
> 
> 标签：c#, wpf, xaml

我试图改变我的文本框的行为，以便当有人将鼠标悬停在它们上方时它们会改变它们的边框。同时，如果有人输入，我希望我的文本框保持绿色边框。我首先尝试将鼠标悬停在事物上并创建了这段代码：

```
<Style TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="TextBox.IsMouseOver" Value="True">
                <Setter Property="BorderBrush" Value="Green"/>
                <Setter Property="BorderThickness" Value="2"/>
            </Trigger>
            <Trigger Property="TextBox.IsMouseOver" Value="False">
                <Setter Property="BorderBrush" Value="Black"/>
                <Setter Property="BorderThickness" Value="1"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

问题来自添加`IsKeyboardFocused`事件的触发器。如果我添加这两个额外的触发器，除了悬停在零件上之外，一切都正常。所以如果我将鼠标悬停在它上面，我的文本框不会有绿色边框。

有没有办法解决这个问题或结合两个触发器，比如`If IsMouseOver==true && IsKeyboardFocused == false then borderbrush = green`？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:37:49.637

`MultiTrigger`触发条件的逻辑与组合。但是，没有逻辑或`MultiTrigger`。

# php - CodeIgniter 表单验证不起作用

> ID：11493479
> 
> 赞同：3
> 
> 时间：2012-07-15T16:12:51.653
> 
> 标签：php, html, validation, codeigniter, webforms

似乎无法在代码点火器上进行表单验证，不确定出了什么问题！

这是我的控制器类：

```
class registerController extends MY_Controller {

    // --- Methods -----------------

    function __construct()
    {
        parent::__construct();

        $this->firephp->log('REGISTER PAGE CONTROLLER ACTIVE');

        //Load user model
        $this->load->model('usersModel');

        //load form validation
        $this->load->helper('form');
        $this->load->library('form_validation');

    }

    //------------------------------

    public function register()
    {

        $this->form_validation->set_rules('registerForenameFieldName', 'Fist Name', 'required');

        //This is executed when the form is submitted
        if ($this->form_validation->run() == FALSE)
        {

            $this->firephp->log('Registration form validation failed');

            //Load in the views
            $this->load->view('global/head.php');
            $this->load->view('global/top.php');
            $this->load->view('register/register.php');
            $this->load->view('global/footer.php');

        } else {

            $this->firephp->log('Registration form validation succeeded');

            //Model method here

            //Load in the views
            $this->load->view('global/head.php');
            $this->load->view('global/top.php');
            $this->load->view('home.php');
            $this->load->view('global/footer.php');
        }

    }

} 
```

和我的表格：

```
<?php  echo form_open('register'); ?>

    <div id="registerErrors"><?php echo validation_errors(); ?></div>

        <table id="registerTable">

            <tr>
            <td class="regLeftCell"><p>First Name</p></td>
            <td class="regRightCell">
            <input id="registerForenameField" class="textField registerField" name="registerForenameFieldName" type="text" placeholder="Forename" value="<?php echo set_value('registerForenameFieldName'); ?>"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Last Name</p></td>
            <td class="regRightCell">
            <input id="registerSurnameField" class="textField registerField" name="registerSurnameFieldName" type="text" placeholder="Surname" value="<?php echo set_value('registerSurnameFieldName'); ?>"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Email Address</p></td>
            <td class="regRightCell">
            <input id="registerEmailField" class="textField registerField" name="registerEmailFieldName" type="text" placeholder="Email Address"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Choose Password</p></td>
            <td class="regRightCell">
            <input id="registerPasswordField" class="textField registerField" name="registerPasswordFieldName" type="text" placeholder="Password"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Confirm Password</p></td>
            <td class="regRightCell">
            <input id="registerConfirmPasswordField" class="textField registerField" name="registerConfirmPasswordFieldName" type="text" placeholder="Confirm Password"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Address Line 1</p></td>
            <td class="regRightCell">
            <input id="registerAddress1Field" class="textField registerField" name="registerAddress1FieldName" type="text" placeholder="Address Line 1"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Address Line 2</p></td>
            <td class="regRightCell">
            <input id="registerAddress2Field" class="textField registerField" name="registerAddress2FieldName" type="text" placeholder="Address Line 2"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Address Line 3</p></td>
            <td class="regRightCell">
            <input id="registerAddress3Field" class="textField registerField" name="registerAddress3FieldName" type="text" placeholder="Address Line 3"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Post Code</p></td>
            <td class="regRightCell">
            <input id="registerAddressPostCodeField" class="textField registerField" name="registerPostCodeFieldName" type="text" placeholder="Post Code"></input>
            </td>
            </tr>

            <tr>
            <td class="regLeftCell"><p>Country</p></td>
            <td class="regRightCell">
            <input id="registerAddressCountryField" class="textField registerField" name="registerSurnameFieldName" type="text" placeholder="Country"></input>
            </td>
            </tr>

        </table>

        <div id="registerButton">
            <input class="button registerSubmitButton" type="submit" value="Register"/>
        </div>

    </form> 
```

路由设置如下：

```
$route['register'] = 'registerController/register'; 
```

怎么了？它只是每次都失败而不会显示错误。

它只是重新加载同一页面而没有验证错误。$this->form_validation->run() 每次都评估为 FALSE，因为我已经将它记录在 FirePHP 中，这是一个 Firebug 扩展。

编辑：

值得一提的是，尽管它加载了页面，但我在控制台中收到了 404 错误：

![其他错误](../Images/036acaea2ea3642ac94b0d055b44a161.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:06:53.557

我终于找到了答案！我的服务器配置不正确，我没有启用 mod_rewrite，所以没有一个请求正常工作。

Ubuntu 用户，在命令行上关闭它以启用它：sudo a2enmod rewrite

然后重新启动 Apache。

我正在使用以下.htaccess：

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T16:38:06.600

您没有在`form_open`函数中给出控制器名称，应该是

```
<?php  echo form_open('registerController/register'); ?> 
```

**文档：** [**表单助手**](http://codeigniter.com/user_guide/helpers/form_helper.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:36:09.903

1.  这是什么意思 - “每次都失败” - 显示空白页面？还是错误？要不然是啥？

2.  构造函数在执行吗？

    ```
    function __construct()
    {
        parent::__construct();
        var_dump('contructor');
    } 
    ```

3.  是否调用了注册函数？

    ```
    function register()
    {
        var_dump('register function');
    } 
    ```

或者只是添加

```
$this->firephp->log('Registration function'); 
```

在`register`函数的开头，让我们知道你的调试结果。

您是否尝试过这里的示例：

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:53:08.340

将此行添加到您的 __construct：

```
$this->load->helper('url'); 
```

然后试试这个：

```
echo form_open(site_url("register")); 
```

功能 site_url 可以帮助您使用路由 url。如果这没有任何帮助，您可以尝试 echo base_url(); 和其他 url 辅助函数来完成 url。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-16T11:55:17.453

我不明白为什么人们要在 firebug 中加载用于打印变量和数组的扩展。对于我使用这个的大多数项目：是一样的。你不需要firephp核心。而且你不需要firebug的firephp插件。

```
<?php
$debug[] = 'Hello World';
// and/or
$debug[] = array('a1'=>"ArrValue1",'a2'=>"ArrValue2");
?>

<!-- add before </body>... -->
<?php if(isset($debug)): ?>
<script type="text/javascript">
jQuery(document).ready(function(){ 
    <?php foreach($debug as $js): if(is_array($js)) $js= json_encode($js); else $js = '"'.$js.'"'; ?>
    console.log(<?php echo $js; ?>);
    <?php endforeach; ?>
})
</script>
<?php endif; ?> 
```

# android - 清单在导出时删除 SET_WALLPAPER 权限

> ID：11493486
> 
> 赞同：1
> 
> 时间：2012-07-15T16:13:53.407
> 
> 标签：android, export, manifest, signing

对不起我的英语

我正在导出已签名的 apk，当 eclipse 完成导出时，manifest.xml 会自动删除此代码文件：

```
<uses-permission android:name="android.permission.SET_WALLPAPER"/> 
```

有人知道为什么在没有此许可的情况下重新加载清单？显然，如果没有这个，应用程序将无法正常运行。

谢谢大家，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:29:40.017

我想已经解决了：Project -> Android tools -> Fix Project properties 谢谢回复

# twitter - 使用 note++ 和正则表达式清理抓取的推文

> ID：11493488
> 
> 赞同：0
> 
> 时间：2012-07-15T16:13:55.957
> 
> 标签：twitter, tweets

我想知道如何从 twitter 的抓取推文列表中删除所有 @mentions、#hashtags 和 URL http....。

我已经尝试（但失败）使用：

```
find all [@].* and replace with blank
find all [#].* and replace with blank
find all [http].* and replace with blank 
```

等等等等......这刚刚完成从我的抓取结果中删除了几乎所有内容。

我是记事本的新手，正在尝试整理所有信息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:28:55.283

你的表达太宽泛了。尝试这个：

```
(@|#|http)\S+ 
```

或者，根据您的正则表达式风格，您可能需要将`\S`（非空格）写为

```
(@|#|http)[^ ]+ 
```

当然，使用正则表达式，一切都是为了确切地知道你想要什么，你通常会在这个过程中弄清楚。

# android - Android有滑块视图吗？

> ID：11493490
> 
> 赞同：0
> 
> 时间：2012-07-15T16:14:20.693
> 
> 标签：android

我想知道Android是否有垂直或水平的滑块视图？我希望将滑块视为基本视图。

我注意到 Android 本身使用滑块来解锁屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:58:50.667

Android 有[SeekBar](http://developer.android.com/reference/android/widget/SeekBar.html)看起来就像你在找什么（控制音量）

![在此处输入图像描述](../Images/db2b5b8c7a7d287ee9d6aa22f7b82a3d.png)

但是，这不是用于解锁屏幕的视图。这称为 SlidingTab，不是公共 API 的一部分，但如果您希望将其包含在您自己的项目中，您可以在网上找到它。[这里是源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/widget/SlidingTab.java)。要使用它，您必须将所有相关的布局和可绘制对象从 SDK 复制到您的项目中。不过，在我看来，这不是一个很好的用于控制音量的视图。我不认为它可以让您将其设置为沿途的各个点，它更像是二进制类型的东西（锁定或解锁）

# android - Android 日期从 DateTime 中删除 GMT

> ID：11493491
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:14:31.507
> 
> 标签：android, datetime, gmt

我需要从“2012-07-15 17:00 GMT”这样的字符串中删除“GMT”。尝试使用此代码，但 testDate 返回 null。任何人都可以帮忙吗？

谢谢

```
 String date = "2012-07-15 17:00 GMT";
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
        Date testDate = null;
        try {
            testDate = sdf.parse(date);
        }catch(Exception ex){
            ex.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:27:02.947

这会有帮助吗？

```
String date = "2012-07-15 17:00 GMT";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm z");
Date testDate = null;
try {
    testDate = sdf.parse(date);
}catch(Exception ex){
    ex.printStackTrace();
}
System.out.println(testDate);

sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
date = sdf.format(testDate); 
System.out.println(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:28:08.483

既然您显然是从 String 开始的，为什么不直接切断最后四个字符，例如 String.substring() 呢？

```
date = date.substring(0, date.length() - 4); 
```

您还可以确认`" GMT"`存在：

```
int index = date.indexOf(" GMT");
if(index > -1)
    date = date.substring(0, index); 
```

如果您不更改日期的格式，则无需使用额外的 SimpleDateFormat 和 Date 类。

# mysql - 我怎样才能让我的图表与 ant 工作一起更新？

> ID：11493492
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:14:41.393
> 
> 标签：mysql, apache-flex, spring, ant, uml

我的团队正在开发一个我们都喜欢的 (Spring/Java/JSP-Intellij + Mysql + Flex/Cairgornm/BlazeDS) Monster，我们需要更新图表，特别是 Java 和 Flex 层的类图，以及 mysql 数据库图表模型，因此新实习生可以更快地理解架构并以更少的努力提高工作效率。

问题是我们一直在开发、分支、合并、发布日期和改变一切（所有的构建都是 ant 任务）。

我想要的解决方案是 ant 能够基于源代码生成所有图表，例如 Javadoc 任务。

这对我们来说可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:24:59.427

[Schemaspy](http://schemaspy.sourceforge.net/)生成漂亮的[图表](http://schemaspy.sourceforge.net/sample/relationships.html)和其他关于数据库模式的其他信息。你可以从 ant 运行它，没有特定的 ant 任务，但它只是 jar。可以从[这里](http://jbrugge.com/blog/2006/10/18/schemaspy-to-the-rescue/)找到一些说明。

[Apiviz](http://code.google.com/p/apiviz/)生成一种 UML 图。它可以来自 ant，特别是作为[javadoc](http://code.google.com/p/apiviz/#Ant_Integration)任务。

# android - 恢复后的代码执行顺序似乎错误，之前很好，并且是线性代码

> ID：11493502
> 
> 赞同：0
> 
> 时间：2012-07-15T16:15:45.780
> 
> 标签：android, gps

## 更新：我在设置 pLatOld = pLat 之前添加了计算，有些正在使用旧值，有些在恢复后使用 pLatOld 的新值。他们都应该使用旧值，这是他们第一次运行活动时所做的。看起来 Math 类代码使用了不正确的值，但仅在活动恢复后才使用。直接内联代码使用正确的值。有没有办法在代码中的其他所有内容都执行后，将旧的更新为新的？

我已经在 Google 和 stackoverflow 上搜索了执行顺序。大多数回复都涉及并行线程，但由于这是线性代码，所以它是一个更简单的问题，而且让我很困惑。我已经剥离了下面示例中的代码以简化我的调试。通常我会在设置 pLat 和更新 pLatOld 之间进行计算，这取决于这些读数之间的差异。它第一次工作正常，但在恢复之前的值也是新值之后，所以我的计算显示为 0 距离。

```
 @Override
    public void onLocationChanged(Location location) {
        if (location != null)
        {
            pLat = location.getLatitude();
            textData = (TextView)findViewById(R.id.textData);
            DecimalFormat df = new DecimalFormat("#.########");
            textData.setText(
                    "Lat " + df.format(pLat) 
                    +"\npLatOld " + df.format(pLatOld)
                    );
            pLatOld = pLat;
        }
    } 
```

当我输入 38 后跟 38.1 时，我第一次可能会得到这个输出

```
Lat 38.1
pLatOld 38 
```

这是对的。

但是，如果我离开页面并返回并做同样的事情，我会得到

```
Lat 38.1
pLatOld 38.1 
```

这是错误的。

换句话说， pLatOld = pLat 似乎在它之前的代码之前执行。

我尝试添加虚拟计算，以便编译器知道我在设置 pLatOld 后使用它，但没有乐趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:29:53.733

你的第一次`pLatOld = pLat;`被执行`pLatOld`时，它的值来自`pLat`is `38.1`。

因此，当稍后执行时，输出是预期的。

# javascript - 为什么 JavaScript 库不使用错误处理

> ID：11493504
> 
> 赞同：9
> 
> 时间：2012-07-15T16:15:53.483
> 
> 标签：javascript, backbone.js, error-handling, underscore.js

我查看了underscore.js 和backbone.js 这两个非常流行的库，并注意到它们不使用错误处理（try、catch、exception）。

这个决定的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T16:21:29.450

实际上，当您编写高质量的 javascript 代码时，您实际上并不需要 try/catch。异常逻辑通过 if 条件和错误处理程序来处理，而不是在运行时捕获异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:04:43.403

快速浏览一下这些库确实揭示了 and 的多种用途`throw`，`catch`因此它们确实使用了异常，尽管很少使用。

当额外的参数可能使函数变得繁琐和不可读和/或运行代码的“正常”前提条件被严重破坏超出可预测的错误情况时，异常很有用。

使用术语“错误处理”似乎有点令人困惑，就好像您避免异常但从函数传回错误值一样，这仍然是错误处理。

# javascript - XMLHttpRequest - 当返回 responseText 给另一个函数时，它返回 undefined

> ID：11493505
> 
> 赞同：1
> 
> 时间：2012-07-15T16:16:09.007
> 
> 标签：javascript, ajax, xmlhttprequest

**解决了。** 我将代码更改为：

```
function init() {
    //preloadImages();
    getContent('events', 'events');
    getContent('content', 'main');
}

function loadingScreen(start) {
    var loadingSpan = document.getElementById('loading');
    if (start == true) {
            loadingSpan.innerHTML = '<p>Loading...<br><img src="images/loading.gif"></p>';
    }
    else {
            loadingSpan.innerHTML = '';
    }
}

function getContent(what, where) {
    if (what == 'content') {
            loadingScreen(true);
            var ranLoad = true;
    }
    var toSet = document.getElementById(what);
    var location = "content/" + where + ".txt";
    var request = new XMLHttpRequest;
    request.open("GET", location, true);
    request.onreadystatechange = function(){
            if (request.readyState == 4 && request.status == 200){
                    toSet.innerHTML = request.responseText;
                    if (ranLoad==true){
                            loadingScreen(false);
                    }
            }
    }
    request.send(null);
}
window.onload = init; 
```

tl; dr 或冗长 - 请参阅下面的代码和结果。

所以。我正在为朋友构建一个小网页，我决定尝试一种技术，而不是直接在网页中编写内容，而是使用 XMLHttpRequest 检索内容（在同一域中），并将它们放置在内容中，当人们点击不同的锚点时，它将由 javascript 更新。好吧，我遇到了一个路障。当我创建用于获取内容的函数（setEvents 和 setContent）时，它会创建一个变量并调用一个用于设置变量的函数（getMarkup），当调用该函数并执行 return 语句时，它返回 undefined。我发现了一个类似的线程，但他们的解决方案是在 getMarkup 函数中直接添加 innerHTML 语句。我不想那样做。

这是代码和结果：

*编辑*：Esailija 建议我应该刚刚发布代码。对我来说，仅拍摄图像要容易一些，但这里是：

```
function init() {
    //preloadImages();
    setEvents();
    setContent('main');
}

function setEvents() {
    var eventDiv = document.getElementById("events");
    var eventContent = getMarkup("content/events.txt");
    eventDiv.innerHTML = eventContent;
}

function setContent(which) {
    loadingScreen('start');
    var contentDiv = document.getElementById('content');
    location_ = "content/" + which + 'txt';
    //var contentContent = getMarkup('location');
    //contentDiv.innerHTML = contentContent;
    loadingScreen('stop');
}

function loadingScreen(action) {
    var loadingSpan = document.getElementById('loading');
    loadingSpan.innerHTML = "Test";
    if (action == 'start') {
        loadingSpan.innerHTML = '<p>Loading...<br><img src="images/loading.gif"></p>';
    }
    if (action == 'stop') {
        loadingSpan.innerHTML = '';
    }
}

function getMarkup(where) {
    var filerequest = new XMLHttpRequest();
    filerequest.open("GET", where, true);
    filerequest.onreadystatechange = function() {
        if (filerequest.readyState == 4 && filerequest.status == 200) {
            var test = document.getElementById("events");
            var reply = filerequest.responseText;
            //Doesn't work
            return reply;
            //Works just fine
            //test.innerHTML = reply;
        }
    };
    filerequest.send(null);
}
window.onload = init; 
```

当我执行 innerHTML 而不是 return 时，它显示“Test **TEST** ”，当我返回而不是 innerHTML 时，它显示“undefined”。

我真的不想做它的 innerHTML 部分，那么有没有一种解决方法可以使 return 语句工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:31:57.463

你熟悉回调吗？打开 Firebug 并在您的`return reply;`行上放置一个断点 - 注意调用堆栈。您拥有的功能`return reply;`不是`getMarkup`.

基本上你将不得不稍微重构你的代码。我会让 getMarkup 采用一个额外的参数 - 您想要为其设置其 innerHTML 值的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:42:17.030

看来您不太了解ajax 的工作原理。
一旦你调用了你的`getMarkup`函数，你就发送一个 ajax 请求并告诉浏览器在`onreadystatechange`处理回复之后使用该函数。`setContent`所以实际上当回复回来时，调用该处理程序的不是您的其他函数，而是浏览器。这就是为什么退货不起作用的原因。

此外，当您调用类似`var contentContent = getMarkup('location');`, as`getMarkup`没有明确的返回值时，默认情况下`contentContent`会获取`undefined`. 您可能认为它应该在您的匿名函数中获取返回值，但事实并非如此。该`getMarkup`函数立即返回，但只有在 ajax 响应到来时才会调用处理程序。

如果你想让它变得更好，你将不得不做一些额外的事情，比如：你只有一个像你一样的 ajax 处理程序。一旦一个函数调用了该 ajax 函数，它将其回调注册到一个队列中，当响应返回时，队列被弹出，然后更新值。这将需要一些时间来构建此机制，或者您可能需要检查[jQuery Ajax 队列](http://archive.plugins.jquery.com/project/ajaxqueue)是如何工作的。

# java - 如何将“JTextField”中的“字符串”插入到特定位置？

> ID：11493508
> 
> 赞同：5
> 
> 时间：2012-07-15T16:16:23.703
> 
> 标签：java, swing, jtextfield

我想`String`在 a 中插入 a `JTextField`。就像是-

```
myTextField.insert(text, position); 
```

怎么做到呢？有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T16:26:04.287

你可以这样做——

```
jTextField.setText("This  swing.");    
jTextField.getDocument().insertString(5, "is", null); 
```

并且`jTextField`会显示——

> 这是摇摆。

# objective-c - 转换字符串时 NSNumberFormatter 没有返回合理的答案

> ID：11493509
> 
> 赞同：0
> 
> 时间：2012-07-15T16:16:24.880
> 
> 标签：objective-c, nsnumberformatter

我有一个 UITextField，我正在尝试使用 NSNumberFormatter 和 NSNumberFormatterDecimalStyle 将文本字段转换为 NSNumber 以初始化对象。

但是，当我这样做时，我无法从转换中获得任何明智的结果。出于本示例的目的，我已将 UITextField 替换为字符串，但仍然得到奇怪的结果。我确信我在做一些愚蠢的事情，但任何帮助将不胜感激。

```
//NSString * boardNumberText = self.txtBoardNumbs.text;
NSString * boardNumberText = @"42";

NSNumberFormatter * formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSNumber * boardNumber = [formatter numberFromString:boardNumberText];

if ([boardNumber isEqual:nil]) {
    NSLog(@"Number was null");
}
NSLog(@"Number was not null");

[self.board setNumber:boardNumber];

NSLog(boardNumberText);
NSLog([NSString stringWithFormat:@"%d", boardNumber]);
NSLog([NSString stringWithFormat:@"%d", self.board.number]); 
```

当我运行它时，我从日志文件中得到的输出是：

```
2012-07-15 16:54:26.564 CoreDataDev[16123:fb03] Number was not null
2012-07-15 16:54:26.564 CoreDataDev[16123:fb03] 42
2012-07-15 16:54:26.565 CoreDataDev[16123:fb03] 135821152
2012-07-15 16:54:26.565 CoreDataDev[16123:fb03] 135820272 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:25:13.023

您不能只`NSNumber`使用整数格式说明符登录到控制台，因为`NSNumber`它是一个包装器对象。此外，`NSLog`采用格式字符串，因此您不需要使用`stringWithFormat:`. 试试这个：

```
NSLog(@"%d", [boardNumber intValue]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:27:16.403

使用

```
NSLog(@"%d", boardNumber); 
```

错误：它打印 boardNumber 指针（NSNumber 实例本身）的内存地址。采用

```
NSLog(@"%d", [boardNumber intValue]); 
```

反而。

P.s.：那个

```
NSLog([NSString stringWithFormat:...]); 
```

是不必要的和丑陋的；NSLog 有内置的格式字符串处理，***使用它！***

# c# - 如何在 c# windows phone 中进行慢动作停止？

> ID：11493514
> 
> 赞同：0
> 
> 时间：2012-07-15T16:16:57.113
> 
> 标签：c#, windows-phone, system.windows.media

这是我在 c# microsoft visual studio windows phone 中的代码。我的应用程序都是关于“旋转瓶子”的，不幸的是，它旋转得很快，但在接近停止时从不减速，它只是停止然后就是这样。任何人都可以请。帮我？如何让这个应用程序有一个瓶子从快停到慢停的逼真运动？

```
Random random = new Random(); //Declare random
int randomNumber = random.Next(7201, 7560);
Duration Time_duration = new Duration(TimeSpan.FromSeconds(2)); 
Storyboard MyStory = new Storyboard();
MyStory.Duration = Time_duration;
DoubleAnimation My_Double = new DoubleAnimation();
My_Double.Duration = Time_duration;
MyStory.Children.Add(My_Double);
RotateTransform MyTransform = new RotateTransform();
Storyboard.SetTarget(My_Double, MyTransform);
Storyboard.SetTargetProperty(My_Double, new PropertyPath("Angle"));
My_Double.To = randomNumber;
image1.RenderTransform = MyTransform;
image1.RenderTransformOrigin = new Point(0.5, 0.5);
MyStory.Begin(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:51:36.320

您想更改动画的缓动功能。这是一个例子：

```
 <Storyboard x:Name="SpinBoxStory">
        <DoubleAnimation Duration="0:0:2" To="1375.909" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="rectangle" d:IsOptimized="True">
            <DoubleAnimation.EasingFunction>
                <QuarticEase EasingMode="EaseOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard> 
```

[这里描述了缓动函数。](http://msdn.microsoft.com/en-us/library/cc189019%28v=vs.95%29.aspx#easing_functions) 我选择了一个具有类似特性的瓶子，它会因地面摩擦而旋转和减速。

在您的示例中，您只想创建一个新的 QuarticEase 并将其分配给您的 My_Double 动画。

# php - 将 MultipleIterator 发送到电子邮件

> ID：11493525
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:18:17.867
> 
> 标签：php

我的英语可能会令人困惑，我会尽量具体。这是关于 PHP 的，在 stackoverflow 中我找到了一段代码，它非常接近给我想要的东西（ValkerK 的答案），我有两个数组要迭代到一个数组中，我找到了一个问题的答案，这正是我一直在寻找。我只需要创建一个变量并将打印件发送到电子邮件。这可能是最简单的，但我并不完全是专家，如果你能帮助我，这里是代码，感谢阅读。

```
$want = new ArrayIterator($_POST['product']);
$amount = new ArrayIterator($_POST['howmany']);

$it = new MultipleIterator;
$it->attachIterator($want);
$it->attachIterator($amount);

foreach($it as $e) {
 echo $e[0], ' : ', $e[1], ", ";
} 
```

然后我有这个打印

```
Product1:10, Product2:12, Product3:7.... etc 
```

我需要一个变量来将它发送到电子邮件，但我仍然无法让它工作......谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:19:53.590

使用这样的东西：

```
$contents = '';
foreach($it as $e) {
     $contents .=  $e[0] . ' : ' . $e[1] . ", ";
} 
```

现在您可以发送电子邮件`$contents`，其中将包含完全相同的输出。您也可以使用[output buffering](http://www.php.net/ob_start)，但是对于这样一个简单的用例，我不会打扰它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:30:11.600

```
$var = implode("\n",array_map(function($v){
     return $v[0]. ':'. $v[1].",";
}, $it)); 
```

# jsf - jsf 2 组件没有名称属性

> ID：11493527
> 
> 赞同：0
> 
> 时间：2012-07-15T16:18:24.827
> 
> 标签：jsf, jsf-2

在我的应用程序中单击链接后，我想在页面加载后关注页面的一部分。使用静态 html，我们可以通过下面的代码部分来做到这一点。

```
<a href="#C4">Go to Chapter 4</a> 
```

并定义了第 4 章；

```
<h2><a name="C4">Chapter 4</a></h2>
<p>This chapter explains ba bla bla</p> 
```

在 jsf 2 中，我什至找不到用于此目的的 name 属性。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:08:38.133

在 JSF 中，name 属性是根据 jsf 组件的 'id' 属性和表单的 'id' 属性的组合来计算的。[BalusC](https://stackoverflow.com/users/157882/balusc) [在此处](https://stackoverflow.com/questions/11406215/why-does-hselectoneradio-does-not-have-a-name-attribute)解释了其原因。因此，如果您为 JSF 组件指定一个 id，那么还会为其计算名称。

无论如何，开始 HTML5 使用`<a>`标签的 name 属性已过时，而是建议使用最近容器的 id 属性。所以不要依赖 name 属性。

尽管您可以尝试关注以下任何一项：

```
<h2 id="top4">This is a heading</h2> or

<h2><a id="top4">This is a heading</a></h2> 
```

或者简单地将容器集中在目标页面上，如下所示：

在 HTML 4.01 中

```
<div id="top4">
   <h2>This is a heading</h2>
   <p>This is a paragraph</p>
</div> 
```

在 HTML 5 中

```
<article id="top4">
   <h2>This is a heading</h2>
   <p>This is a paragraph</p>
</article> 
```

现在在 JSF 中，这就是将容器聚焦在目标页面上的方式：

当结果是不同的页面但在同一个应用程序中时：

```
 <h:link id="link1" value="link1" outcome="welcome" fragment="top4" /> 
```

结果是welcome.xhtml，它与上下文根相关，“top4”是呈现目标页面时要聚焦的容器的ID。

链接外部站点时：

```
 <h:outputLink id="link2" value="http://www.msn.com/#spotlight">link2</h:outputLink> 
```

在同一页面内：

```
<h:link id="link3" value="link3" fragment="top4" /> 
```

这里没有指定结果，因此结果将是同一页面。

也可以看看：

*   [http://dev.w3.org/html5/markup/a.html](http://dev.w3.org/html5/markup/a.html)
*   [h:链接](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/link.html)
*   [h:输出链接](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/outputLink.html)

# objective-c - 向量 -> 二维空间中向量到点的垂直距离

> ID：11493530
> 
> 赞同：0
> 
> 时间：2012-07-15T16:18:30.873
> 
> 标签：objective-c, vector, distance, point

![在此处输入图像描述](../Images/9dacac016926c9c651143cefefe4ab59.png)

我有一个沿着向量（-0.7，-0.3）移动的精灵。我还有另一个点，我有它的坐标——我们称它们为 (xB|yB)。现在，很久以前我学会了计算从向量到点的垂直距离（此页面上的第一个公式[http://en.wikipedia.org/wiki/Perpendicular_distance](http://en.wikipedia.org/wiki/Perpendicular_distance)）。但是我试过了，如果我记录它，它会返回一个令人难以置信的高值，即 100% 错误。那么我做错了什么？看看我提供的图像。

**incomingVector = (-0.7,-0.3)** //这是精灵移动的向量

**bh.position**是我要计算距离的点

这是代码：

```
 // first I am working out the c Value in the formula in the link given above
        CGPoint pointFromVector = CGPointMake(bh.incomingVector.x*theSprite.position.x,bh.incomingVector.y*theSprite.position.y);
        float result = pointFromVector.x + pointFromVector.y;
        float result2 = (-1)*result;

        //now I use the formula
        float test = (bh.incomingVector.x * bh.position.x + bh.incomingVector.y * bh.position.y + result2)/sqrt(pow(bh.incomingVector.x, 2)+pow(bh.incomingVector.y, 2));

        //the distance has to be positive, so I do the following
        if(test < 0){
            test *= (-1);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:53:51.473

让我们根据您原始[链接](http://en.wikipedia.org/wiki/Perpendicular_distance)的内容再次执行公式。

*   我们有一个线**向量**：*V(a; b)*
*   我们在线上有一个**点**（精灵的中心）：*P(x1, y1)*
*   我们在**其他**地方还有一点：*B(xB, yB)*

这里的测试是两行随机值：

1.  `a = -0.7; b = -0.3; x1 = 7; y1 = 7; xB = 5; yB = 5;`
2.  `a = -0.7; b = -0.3; x1 = 7; y1 = 7; xB = 5.5; yB = 4;`

**那么分子**如下：（*看来您正在以未知的方式计算分子，我不明白您为什么这样做，因为这是计算链接公式的分子的正确方法，也许这就是您完全得到的原因距离错误。）*

```
float _numerator = abs((b * xB) - (a * yB) - (b * x1) + (a * y1));
// for the 1\. test values: (-0.3 * 5) - (-0.7 * 5) - (-0.3 * 7) + (-0.7 * 7) = -1.5 + 3.5 + 2.1 - 4.9 = -0.8 => abs(-0.8) = 0.8
// for the 2\. test values: (-0.3 * 5.5) - (-0.7 * 4) - (-0.3 * 7) + (-0.7 * 7) = -1.65 + 2.8 + 2.1 - 4.9 = -1.65 => abs(-1.65) = 1.65 
```

**那么分母**如下：

```
float _denomimator = sqrt((a * a) + (b * b));
// for the 1\. test values: (-0.7 * -0.7) + (-0.3 * -0.3) = 0.49 + 0.09 = 0.58 => sort(0.58) = 0.76
// for the 2\. test values: (-0.7 * -0.7) + (-0.3 * -0.3) = 0.49 + 0.09 = 0.58 => sort(0.58) = 0.76 
```

**距离**现在很明显：

```
float _distance = _numerator / _denominator;
// for the 1\. test values: 0.8 / 0.76 = 1.05
// for the 2\. test values: 1.65 / 0.76 = 2.17 
```

这些结果（`1.05`和`2.17`）是我们随机值的正确距离，如果你可以在纸上画线和点，你可以测量距离，你会得到相同的值，使用标准尺。

# java - Android HttpEntry 读取挂在 Droid x

> ID：11493531
> 
> 赞同：0
> 
> 时间：2012-07-15T16:18:37.303
> 
> 标签：java, android, http, inputstream

我一直在开发一个基于 Web 的 android 应用程序，我们希望该应用程序将数据发布到服务器并将响应读取为 JSONString ，代码在 3 种不同的设备上进行了测试，所有结果都可以，除了 Droid X ，它只是挂断从 HttpResponse 读取 inputStream。这是我的代码：

```
HttpResponse response = mClient.execute(mPost);
StatusLine status_line = response.getStatusLine();
int status_code = status_line.getStatusCode();
/*
 * Not ok Response
 */
if (status_code != 200){
  mBusy = false;            
  mListener.log("Error Status code = "+String.valueOf(status_code));
  return false; 
}

HttpEntity entry = response.getEntity();
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
mResponse = reader.readLine(); 
```

有什么想法我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:28:45.330

我发现问题来源是使用 android 的默认 HTTP 客户端。相反，我使用：

```
 HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        HttpProtocolParams.setUseExpectContinue(params, false);  
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
        ConnManagerParams.setMaxTotalConnections(params, 100);
        ConnManagerParams.setTimeout(params, 30000);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https",PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(params, registry);
        mClient = new DefaultHttpClient(manager, params); 
```

代替 ：

```
mClient = new DefaultHttpClient(); 
```

希望对某人有所帮助。

# ruby-on-rails - Rails 高级注册实现如何？

> ID：11493533
> 
> 赞同：1
> 
> 时间：2012-07-15T16:19:03.300
> 
> 标签：ruby-on-rails, http, authentication

我是一个三周大的 Rails 新手，我有一些想要实现的东西，但不知道如何去做。我正在制作一个应用程序：

**我希望用户在新用户查看页面上输入一些注册信息，然后，当他们单击提交时，而不是立即创建用户并将其保存在数据库中，而是希望他们被带到第二个网页在他们创建帐户之前，他们将被要求进行一些最终验证。然后当他们点击“验证”并且验证通过时，帐户最终被创建并保存到数据库中。**

这对我来说很难，因为我只知道如何制作基本表单，在哪里输入信息，点击提交，然后你在数据库中有一个新条目。我不知道如何推迟另一个网页的“用户创建”，但是一个朋友提到了一些关于http请求的事情，但我仍然什么都不知道。到目前为止，我将发布一些代码：

我的`users_controller` 新定义：

```
def new
  @user = User.new
  @user.websites.build
end 
```

我的`users_controller` 创建方法：

```
def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    flash[:success] = "Welcome!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

我的`users/new.html.erb`注册表单：

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>
<%= render 'shared/error_messages' %>
<%= form_for(@user) do |f| %>

  <%= f.label :email %>
  <%= f.text_field :email %><br/>

  <%= f.label :password %>
  <%= f.password_field :password %><br/>

  <%= f.label :password_confirmation, 'Confirm Password' %>
  <%= f.password_field :password_confirmation %><br/>

  <%= f.fields_for :websites do |builder| %>
    <%= builder.label :url, 'Website URL' %>
    <%= builder.text_field :url %>
  <% end %>

  <%= f.submit "Sign up", :id => 'submit' %>
<% end %> 
```

我以前从来没有问过像这样征求意见的问题，所以我希望这是一个合适的地方。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:38:12.047

我认为您正在尝试创建一个“多步”表单...关于它有一个非常好的 railscast：[http ://railscasts.com/episodes/217-multistep-forms?view=asciicast](http://railscasts.com/episodes/217-multistep-forms?view=asciicast)

但是，您可能会遇到一些验证问题，因为您需要单独验证每个步骤。所以，也看看这里： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)

我希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:26:09.687

你最好使用 Devise 进行用户管理。 [https://github.com/plataformatec/devise](https://github.com/plataformatec/devise) 这是一个 railscast 教程。 [railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:52:32.597

如果您正在执行多步骤，则始终可以将信息从一页传递到另一页。您可以将其存储在会话数组中，将其重新发布到其他页面，甚至制作一个 cookie。

请记住在 https 下也执行此操作的每一步，因为创建帐户需要敏感信息。

如果 Rails 是你的第一个，我实际上会推荐一些较低级别的东西，比如 PHP，这样你就可以在开始使用像 rails 这样的高级框架做事情之前了解一切是如何工作的。MVC 通常不是 Web 开发中最好的第一步，尽管它比从头开始做任何事情都强大且容易。

# java - Java 图像服务器：套接字写入错误

> ID：11493535
> 
> 赞同：0
> 
> 时间：2012-07-15T16:19:11.313
> 
> 标签：java, image, sockets, exception

几天前，我考虑编写自己的图像客户端以通过 HTTP 直接传输图像。我用谷歌搜索并研究了一段时间并编写了我的服务器：

```
public class SConnection extends Thread {

    Socket client;

    /* ... */

    @Override
    public void run() {

        while(true) {
            try {

                //Get some image paths
                File folder = new File(new java.net.URI("file:///C:/images/"));
                File[] images = folder.listFiles();
                //Load the image
                BufferedImage bi = ImageIO.read(images[0]);
                //Write the image
                ImageIO.write(bi, "JPEG", client.getOutputStream());

            } catch (Exception ex) {

                ex.printStackTrace();
                return;

            }

        }

    } 
```

主类是一个等待接受许多连接的线程，将它们存储在 ArrayList 中，创建 SConnection 实例并启动它们。

客户端看起来像这样：

```
URL target = new URL("http://127.0.0.1:82"); //The server - so far, so good
URLConnection conn = target.openConnection();
BufferedImage in = ImageIO.read(conn.getInputStream()); //And as I try to receive the image: boom, exception
File save = new File(new java.net.URI("file:///C:/images/result.jpeg"));
ImageIO.write(in, "JPEG", save); 
```

服务器和客户端都发送位于 ImageIO.write / ImageIO.read - 行的异常。

服务员说：

```
java.net.SocketException: Connection reset by peer: socket write error 
```

客户说：

```
java.io.IOException: Invalid Http response 
```

我明白了，图像没有正确传输，但我应该改变什么？有什么线索吗？

谢谢各位，提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:34:45.907

1.  您似乎没有编写 HTTP 标头，因此客户端 URLConnection 不会理解回复并将关闭连接，从而导致发送方的“对等连接重置”。

2.  您无需构造 URI 即可打开文件。

3.  您根本不需要使用 ImageIO。这只是浪费时间和空间。只需复制字节，就像任何其他文件类型一样。

简而言之，您根本不需要此代码。默认的 servlet 会为你做这件事。

# windows - 使用 Cygwin 和 TortoiseSVN 在 Windows 上使用 SVN

> ID：11493539
> 
> 赞同：4
> 
> 时间：2012-07-15T16:19:29.380
> 
> 标签：windows, svn, tortoisesvn, cygwin

我是版本控制的初学者，所以我可能做错了什么。

我希望能够在 cygwin 和 TortoiseSVN（或其他 Windows 应用程序）中访问本地存储库。问题是，在 cygwin 中，我必须使用
`file:///cygdrive/c/...`TortoiseSVN 需要的路径
`file:///c:/...`。

我怎样才能让这两者一起工作？我可以使用其他一些双方都理解的路径/协议吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T18:34:17.637

简单的方法是使用`svnserve`Subversion 附带的程序。这应该在 Cygwin 中。您需要做的就是启动`svnserve`并`svn://`用作协议而不是`file://`.

首先，您需要修改您的存储库。您必须编辑两个文件：`svnserve.conf`和`passed`.

```
$ cd /cygdrive/c/.../repos_dir
$ cd conf
$ vi svnsever.conf   # Change the "# password-db = passwd" line & remove the "#"
$ vi passwd          # Setup the user and password entry 
```

接下来，启动服务器：

```
$ cd ..    # Back to the repository directory
$ svnserve -r $PWD -d 
```

而且，就是这样。

现在，您可以通过以下方式进行结帐：

```
$ svn co svn://localhost/dir/to/check/out 
```

这将是 cygwin 和 Tortoise 中的相同 URL

* * *

### 单词'O警告

不能保证不同的 subversion 客户端会生成可以与其他 subversion 客户端一起使用的工作目录。

幸运的是，Tortoise 和标准的 Subversion 命令行客户端似乎没问题。在过去的几年里，我一直能够在 Subversion 命令行客户端和 ToroiseSVN 之间切换。**但是**，您必须确保它们都是 ether post 1.7 版客户端或 pre 1.7 客户端。如果您的 Cygwin 客户端是 1.6.7 版本，而您的 Tortoise 客户端是 1.7.5，则无法共享工作目录。使用`svn version`命令检查您的 Cygwin 客户端，并检查 Tortoise 上的*About 框*。

同样，不能保证两个客户端可以共享同一个工作目录，所以如果有问题，你自己。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T04:58:35.233

有一个更好的办法。只需链接目录。

```
ln -s /cygdrive/c /C: 
```

现在它应该工作了。

归功于 Mark Malaknov 你可以在这里阅读：

[http://markmal.blogspot.com/2012/11/how-to-use-cygwin-svn-and-tortoisesvn.html](http://markmal.blogspot.com/2012/11/how-to-use-cygwin-svn-and-tortoisesvn.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T16:44:02.570

如果您（重新）安装 TortoiseSVN 并选择安装（Windows）命令行工具的选项，但*不要*从 Cygwin 安装程序安装这些工具的 Cygwin/Linux 版本（或删除它们），那么您的 Windows 工具仍可通过 Cygwin 获得。

这些应该接受 Windows 路径，就像您从命令提示符调用它们一样（尽管您可能必须将它们放在引号中以避免 bash shell 解释它们）

# c# - 在 ac# windows 窗体应用程序中禁用 windows 键

> ID：11493540
> 
> 赞同：0
> 
> 时间：2012-07-15T16:19:41.987
> 
> 标签：c#, winforms

> **可能重复：**
> [如何在 c# 中禁用 windows 键？](https://stackoverflow.com/questions/3361109/how-can-i-disable-windows-key-in-c)

如何在我的 c# windows 应用程序中禁用 windows 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:33:15.883

看看这个库：

[http://globalmousekeyhook.codeplex.com/](http://globalmousekeyhook.codeplex.com/)

作为使用此库和以下代码段的示例，您可以禁用 WinKey + R 组合。有两个步骤 1\. 检测组合 2\. 通过设置禁用进一步处理`e.Handled = true`。希望能帮助到你。

```
private KeyboardHookListener m_KeyboardHookManager;
private bool m_LeftWinKeyIsDown;
private bool m_RightWinKeyIsDown;

private void TestForm_Load(object sender, EventArgs e)
{
    m_KeyboardHookManager = new KeyboardHookListener(new GlobalHooker());
    m_KeyboardHookManager.KeyDown += HookManager_KeyDown;
    m_KeyboardHookManager.KeyUp += HookManager_KeyUp;
    m_KeyboardHookManager.Enabled = true;
}

private void HookManager_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode ==Keys.LWin) m_LeftWinKeyIsDown = true;
    if (e.KeyCode ==Keys.RWin) m_RightWinKeyIsDown = true;
    if ((m_LeftWinKeyIsDown || m_RightWinKeyIsDown) && e.KeyCode == Keys.R) e.Handled = true;
}

private void HookManager_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.LWin) m_LeftWinKeyIsDown = false;
    if (e.KeyCode == Keys.RWin) m_RightWinKeyIsDown = false;
} 
```

# c# - 如何创建动态sql内联语句？

> ID：11493541
> 
> 赞同：-2
> 
> 时间：2012-07-15T16:19:47.570
> 
> 标签：c#, asp.net, database, dynamicquery

我正在我的一个应用程序中创建高级搜索工具。在该功能中，我必须存储选定的搜索条件。我的搜索结果基于 Logi XML...Logi XML 需要 SQL 内联语句，因此我必须将 sql 内联查询存储到数据库表中。

我当前的数据库中有下表。

```
Employee            Salary             PresentInfo
ID                   ID                    ID
Name                EMPID                 SalaryID
City                Basic                 TotalDays
State               HRA                   PresentDays  
Zip                 PF
Phone               DA 
```

现在用户可以从上面的表格中选择任何标准。我正在将选定的标准管理到会话上下文中。我的意思是说我拥有用户选择的所有详细信息。我想用各自的连接在业务逻辑中创建动态 sql 内联语句。

业务逻辑类中的以下函数

```
public string GetDetails(List<Class1> Entity)
{
     //What should I write here? I have all the data in entity class
} 
```

因此，如果有人对这种情况有任何想法，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:22:03.707

这是一个非常简短的 3 点，您可以从 [我假设您想要给定 id 的员工记录] 开始：

```
public Employee GetEmployeeDetails(int employeeId)
{
    //Create a connection to the data source

    //Query against datasource and get the result to a Employee with given employeeId

    //get the result and assing values to an employee instance

    //return employee
} 
```

# scala - 使用 sbt 编译 Java 注释

> ID：11493543
> 
> 赞同：4
> 
> 时间：2012-07-15T16:19:54.717
> 
> 标签：scala, sbt

我已经创建了 Java 注释（因为我需要运行时保留），`$PROJECT/src/main/java`而我的 scala 代码在`$PROJECT/src/main/scala`. 这样创建的 Java 注释也使用 Java ENUM 作为它的值。

如果我编译该项目，那么 sbt 似乎不会首先编译 Java 注释，并且在注释中每次使用枚举时都会出错。如果我在scala代码的注释中注释掉Java枚举的所有用法并进行编译，取消注释枚举用法并再次编译它一切正常。

在进行干净构建时，如何确保 sbt`$PROJECT/src/main/java`在尝试编译 scala 代码之前编译我的 java 注释和枚举（即）？

编辑：我有一个简单的 build.sbt 并且正在使用 sbt 0.11.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T17:59:41.727

一些好消息：这是[一个已知问题](https://issues.scala-lang.org/browse/SI-2764)并已解决。

一些坏消息：它已在 2.10 中解决，并且该修复可能不会被向后移植到 2.9.3（在问题线程中引用 Paul Phillips）：

> 我已将此标记为向后移植，这不是保证；我现在没有时间做，但我希望在不久的将来。

一些好消息：如果您坚持使用 2.10 之前的版本并且您的 Java 源代码不依赖于您的 Scala 源代码，[您可以将以下内容添加](https://github.com/harrah/xsbt/wiki/Java-Sources)到您的`build.sbt`并且一切都很好：

```
compileOrder := CompileOrder.JavaThenScala 
```

一些坏消息：如果您停留在 2.10 之前的版本并且您的 Java 源代码确实依赖于您的 Scala 源代码，那么我很确定您不走运，并且注释-编译-取消注释技巧可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T05:21:50.460

我敢打赌你面对的是[SI-2764](https://issues.scala-lang.org/browse/SI-2764)。这已在 Scala 2.10 中修复。

同时，为您的 Java 注释创建一个单独的子项目，并依赖于包含 Scala 代码的项目。然后 Scala 编译器将*只*处理 .class 文件，而不是 .java 文件。

# c - 分析 C：空报告

> ID：11493556
> 
> 赞同：2
> 
> 时间：2012-07-15T16:21:31.410
> 
> 标签：c, gcc, profiling

> **可能重复：**
> [gprof 报告没有累积时间](https://stackoverflow.com/questions/1030829/gprof-reports-no-time-accumulated)

我正在尝试分析一个小型 C 程序。

我编译它：

```
% gcc  -std=c99 main.c -Wall -c -pg main.c
% gcc -Wall -pg main.o 
% ./a.out 
```

然后我尝试阅读配置文件报告，但它是空的

```
% gprof a.out                                                                                                                                                                    130 ↵

call graph profile:
          The sum of self and descendents is the major sort
          for this listing.

          function entries:

index     the index of the function in the call graph
          listing, as an aid to locating it (see below).

%time     the percentage of the total time of the program
          accounted for by this function and its
          descendents.

self      the number of seconds spent in this function
          itself.

descendents
          the number of seconds spent in the descendents of
          this function on behalf of this function.

called    the number of times this function is called (other
          than recursive calls).

self      the number of times this function calls itself
          recursively.

name      the name of the function, with an indication of
          its membership in a cycle, if any.

index     the index of the function in the call graph
          listing, as an aid to locating it.

          parent listings:

self*     the number of seconds of this function's self time
          which is due to calls from this parent.

descendents*
          the number of seconds of this function's
          descendent time which is due to calls from this
          parent.

called**  the number of times this function is called by
          this parent.  This is the numerator of the
          fraction which divides up the function's time to
          its parents.

total*    the number of times this function was called by
          all of its parents.  This is the denominator of
          the propagation fraction.

parents   the name of this parent, with an indication of the
          parent's membership in a cycle, if any.

index     the index of this parent in the call graph
          listing, as an aid in locating it.

          children listings:

self*     the number of seconds of this child's self time
          which is due to being called by this function.

descendent*
          the number of seconds of this child's descendent's
          time which is due to being called by this
          function.

called**  the number of times this child is called by this
          function.  This is the numerator of the
          propagation fraction for this child.

total*    the number of times this child is called by all
          functions.  This is the denominator of the
          propagation fraction.

children  the name of this child, and an indication of its
          membership in a cycle, if any.

index     the index of this child in the call graph listing,
          as an aid to locating it.

          * these fields are omitted for parents (or
          children) in the same cycle as the function.  If
          the function (or child) is a member of a cycle,
          the propagated times and propagation denominator
          represent the self time and descendent time of the
          cycle as a whole.

          ** static-only parents and children are indicated
          by a call count of 0.

          cycle listings:
          the cycle as a whole is listed with the same
          fields as a function entry.  Below it are listed
          the members of the cycle, and their contributions
          to the time and call counts of the cycle.

granularity: each sample hit covers 4 byte(s) no time propagated

                                  called/total       parents 
index  %time    self descendents  called+self    name       index
                                  called/total       children

flat profile:

 %         the percentage of the total running time of the
time       program used by this function.

cumulative a running sum of the number of seconds accounted
 seconds   for by this function and those listed above it.

 self      the number of seconds accounted for by this
seconds    function alone.  This is the major sort for this
           listing.

calls      the number of times this function was invoked, if
           this function is profiled, else blank.

 self      the average number of milliseconds spent in this
ms/call    function per call, if this function is profiled,
       else blank.

 total     the average number of milliseconds spent in this
ms/call    function and its descendents per call, if this 
       function is profiled, else blank.

name       the name of the function.  This is the minor sort
           for this listing. The index shows the location of
       the function in the gprof listing. If the index is
       in parenthesis it shows where it would appear in
       the gprof listing if it were to be printed.

granularity: each sample hit covers 4 byte(s) no time accumulated

  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    

Index by function name 
```

我究竟做错了什么？

它是 Mac OS X。

```
% gcc -v                                                                                                                                                                          
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.9~22/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.9~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:29:44.523

有没有可能你的小C程序主要是做I/O？

那两分钟的执行时间可能是 99.99% 的 I/O。

在这个网站上经常看到有人`printf`在内部循环中编写了一个带有 a 的小程序，然后`gprof`在上面运行，然后发布这样的问题。

`gprof`和其他“CPU 分析器”对 I/O 视而不见，因此这可能就是您什么也看不到的原因。

[*检查这个讨论。*](https://stackoverflow.com/questions/1777556/alternatives-to-gprof/1779343#1779343)

# git - 从 git 修订中删除特定文件/文件夹

> ID：11493558
> 
> 赞同：3
> 
> 时间：2012-07-15T16:21:51.333
> 
> 标签：git

假设我发现有些文件不应该在我的 git 修订版中。例如密码、API 密钥和商业机密文件。

有没有办法在它们出现的修订版中删除这些文件？并且仍然保留该修订版中的其余文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:37:34.573

[`git filter-branch`](http://git-scm.com/docs/git-filter-branch)可能有用。这允许您重写一系列过去的提交，更改提交的内容。

如果您所做的更改从未离开您的本地存储库，那么这将起作用。如果您将有问题的更改推送到某个地方，或者如果有人从您那里删除了它们，那么您将面临更大的问题，即在*每个人的*存储库中删除它们。

但是，要修复您的本地存储库：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch bad-file1.txt bad-file2.txt' master..abc 
```

这表示：

*   **`git filter-branch`**: 让我们重写一些提交！

*   **`--index-filter`**：更改每个提交的索引而不实际在磁盘上检查它。

*   **`'git rm --cached --ignore-unmatch bad-file1.txt bad-file2.txt'`**：对于每次提交，如果两个文件存在，则取消暂存它们。

*   **`master..abc`**：对分支 abc 上的所有提交执行此操作，返回到它从主分支分叉的位置。你也可以说“ `master~3`”来重写过去的 3 次提交，或任何其他[范围的修订](http://git-scm.com/docs/gitrevisions)。您还可以使用“ `-- --all`”（两个破折号，空格，两个破折号，“全部”）来重写存储库中的所有内容。

# javascript - E>F 和 E+F 选择器的区别？

> ID：11493561
> 
> 赞同：4
> 
> 时间：2012-07-15T16:22:08.710
> 
> 标签：javascript, jquery, jquery-selectors, css-selectors

我在 jQuery 中读到：

> `E>F`匹配所有带有标签名称且是 .`F`的直接子级的元素`E`。
> 
> `E+F``F`匹配标签 name紧跟在标签 name 同级之前的所有元素`E`。

两者有什么区别？谁能提供一个清晰而具体的例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T16:23:42.173

首先，由于 jQuery 借用了CSS`>`和`+`CSS，它们的行为方式与[Selectors 规范](http://www.w3.org/TR/selectors)中描述的方式相同；请参阅[子组合](http://www.w3.org/TR/selectors/#child-combinators)器和[相邻的兄弟组合器](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)。

* * *

“子元素”是指嵌套在另一个元素中的一个级别的元素。为了强调直接嵌套的限制，这些可能被称为“直接子代”，如文档中所示，但它们的含义相同。任何嵌套深度中包含的元素都称为“后代”；这包括孩子、孙子、曾孙等。

选择器[`E>F`](http://api.jquery.com/child-selector)只会匹配`F`以下结构中的元素：

```
<E>
  <F></F>
</E> 
```

但不在以下结构中（将匹配[`E F`](http://api.jquery.com/descendant-selector)，`D>F`甚至`E>D>F`相反）：

```
<E>
  <D>
    <F></F>
  </D>
</E> 
```

可以在[此答案](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules/3225905#3225905)中找到更真实的说明。如前所述，虽然它涵盖了 CSS，但它是相同的，因为 jQuery 无论如何都是从 CSS 中借用它的。

* * *

“兄弟”指的是同一嵌套级别的元素；即作为同一父元素的子元素的元素。可以有下一个/后一个兄弟姐妹和前一个/前一个兄弟姐妹，只要它们都共享相同的父级，但是在这种情况下，“`F`紧接在元素之前的`E`元素”是指`F`紧跟在元素之后`E`的元素，没有其他兄弟元素它们之间。

选择器[`E+F`](http://api.jquery.com/next-adjacent-selector)只会匹配`F`以下结构中的元素：

```
<E></E>
<F></F> 
```

但不在以下结构中（将匹配[`E~F`](http://api.jquery.com/next-siblings-selector)，`D+F`甚至`E+D+F`相反）：

```
<E></E>
<D></D>
<F></F> 
```

可以在[此答案](https://stackoverflow.com/questions/3382078/what-does-mean-in-css/3382096#3382096)中找到更真实的说明。

* * *

最后，这里有一个更复杂的场景，包含多种元素，显示了哪些`F`元素与上述选择器中的哪个匹配以进行比较：

```
<root>
  <D>
    <F></F>   <!-- Not matched -->
  </D>
  <E>
    <E>
      <F></F> <!-- E>F only -->
    </E>
    <F></F>   <!-- E>F, E+F -->
  </E>
  <F></F>     <!-- E+F only -->
</root> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T16:26:55.130

E > F = 父级 > 选定

```
<parent>
    <selected />
</parent> 
```

E + F = previous_sibling + 选定

```
<parent>
    <preceding_sibling />
    <selected />
</parent> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T16:23:46.390

以下 DOM 结构应该向您解释兄弟和孩子之间的区别：

```
-- Element
-- Sibling
-- Sibling
  -- Child
  -- Another Child
-- Sibling 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T16:40:52.807

`$('E>F').css({fontWeight:'bold'});`= *E 的 F 直系子级*

> <E>
> **<F>粗体文本</F>**
> <A><F></F></A> //这里的'F'不是E的直接子代
> </E>

`$('E+F').css({fontWeight:'bold'});`= *F 像 E 的下一个兄弟姐妹*

> <E></E>
> **<F>粗体字</F>**
> <A></A>
> <F></F> //这里'F'前面没有E

## *[操场](http://jsbin.com/elumuv/2/edit)*

# ruby-on-rails-3 - 为什么这个 mongoid Rails 3 项目中没有 rake 任务？

> ID：11493563
> 
> 赞同：4
> 
> 时间：2012-07-15T16:22:20.333
> 
> 标签：ruby-on-rails-3, rake, mongoid

[https://github.com/memphis518/Garden-Dating-Service](https://github.com/memphis518/Garden-Dating-Service)

上面的公共 repo 是我们正在为 Austin Community Gardens 开发的社区编码项目，到目前为止它是一个相当简单的项目，但由于某种原因`rake db:seed`不起作用（“不知道如何构建任务 db:seed” )，当你运行`rake -T`它时，它根本没有显示*任何*rake 任务。

MongoID 文档说它提供了大多数常见的与 DB 相关的 rake 任务——我不知道为什么它们不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-26T13:38:37.010

我在使用 Rails 3.X 时遇到了类似的问题，尽管我的 Gemfile 中包含了 mongoid Gem。我可以通过明确要求 mongoid gem 中的 database.rake 文件来解决这个问题。我将这 2 行添加到我的 Rakefile 中：

```
spec = Gem::Specification.find_by_name 'mongoid'
load "#{spec.gem_dir}/lib/mongoid/railties/database.rake" 
```

这对我行得通。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T19:48:19.333

有完全相同的问题。

意识到我从未在我的 Gemfile 中添加“mongoid”。这修复了它：

```
gem 'mongoid' 
```

它将添加这些 rake 任务：

```
rake db:drop                    # Drops all the collections for the database for the current Rails.env
rake db:mongoid:create_indexes  # Create the indexes defined on your mongoid models
rake db:mongoid:drop            # Drops the database for the current Rails.env
rake db:mongoid:remove_indexes  # Remove the indexes defined on your mongoid models without questions!
rake db:reseed                  # Delete data and seed
rake db:seed                    # Load the seed data from db/seeds.rb
rake db:setup                   # Create the database, and initialize with the seed data 
```

# algorithm - “词”在分析计算机算法中的意义

> ID：11493565
> 
> 赞同：3
> 
> 时间：2012-07-15T16:22:29.150
> 
> 标签：algorithm, language-agnostic, clrs

我正在阅读[“算法导论”](http://highered.mcgraw-hill.com/sites/0070131511/)，第三版。在“**分析算法**”部分下，它写道：

> 我们还假设每个数据字的大小有限制。例如，当处理大小为 n 的输入时，我们通常假设整数由 c lg n 位表示，对于某个常数 c>=1。我们要求 c>=1 以便每个单词都可以保存 n 的值，从而使我们能够索引各个输入元素，并且我们将 c 限制为常数，这样单词大小就不会任意增长。

这里的“字”字有什么意义？这是用“单词”表示数据的标准吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T16:24:19.903

它们的意思是*机器词*；基本上是处理器寄存器的大小，或者该机器的一段数据的“最自然大小”。对于 32 位机器，它是 32 位；对于 64 位机器，它（毫不奇怪）是 64 位。

随着计算机体系结构的发展，字长曾经变得更加可变。如果您查看[这篇](http://en.wikipedia.org/wiki/Word_%28computer_architecture%29)关于字长的 Wikipedia 文章，您会看到 12 位、18 位、21 位、24 位、31 位、36 位、48 位和 60 位描述的链接位硬件。我记得读过一次关于 72 位机器的文章，虽然我现在找不到参考资料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:27:02.367

“字”通常是与底层处理器的数据寄存器大小相匹配的多字节整数值。例如，在某些系统上可能是 16 位，在其他系统上可能是 32 位，尽管这些不是唯一的可能性。

在某些语言中，它曾经是一种数据类型，但缺乏标准化的大小导致了很多可移植性问题。

# objective-c - NSOutlineView 子类中内容更改时的通知

> ID：11493568
> 
> 赞同：1
> 
> 时间：2012-07-15T16:23:04.460
> 
> 标签：objective-c, xcode, cocoa, nstableview, nsoutlineview

当还没有内容时，我想继承 NSOutlineView 以在其中间显示一个标签。很像 XCode 中的检查器：

![在此处输入图像描述](../Images/44d6afc5d7a77d89e47c29ce36015157.png)

显然我不能使用委托方法，因为我将其作为子类来实现，并且在使用此类时我必须能够将委托设置为其他东西。

除了 bounds 属性的变化，我没有发现任何可以观察到的通知，但这不是很可靠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:25:54.340

我最终覆盖了几种`NSOutlineView`注入代码的方法。这不是一个非常优雅的解决方案，但它确实有效。如果有人有更好的解决方案，请告诉我，我可能会接受您的回答。

```
- (void)updateEmptyLabelVisibility {
    int r = [[self dataSource] outlineView:self numberOfChildrenOfItem:nil];
    BOOL hasRows = r > 0;
    _emptyLabel.hidden = hasRows;
}

- (void)reloadItem:(id)item {
    [super reloadItem:item];
    [self updateEmptyLabelVisibility];
}

- (void)reloadData {
    [super reloadData];
    [self updateEmptyLabelVisibility];
}

- (void)awakeFromNib {
    [super awakeFromNib];
    [self updateEmptyLabelVisibility];
}

- (void)endUpdates {
    [super endUpdates];
    [self updateEmptyLabelVisibility];
} 
```

# module - prestashop 1.4 在新的钩子中移植家庭特色模块

> ID：11493569
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:23:05.387
> 
> 标签：module, prestashop, transplant

我正在尝试将主页特色产品移到“newdiv”中的列 div 之外，如下所示：

```
<header>
    hook header
</header> 
<container>
    <div central_column>
    .
    <!-- here is the featured products block -->
    .
    </div>
    <div right_column>
        hook right column
    </div>
</container>

<newdiv><--! here where i want to show featured products --></newdiv>

<footer>
    hook footer
</footer> 
```

为此，我编辑了 FrontController.php，添加了显示页脚的钩子（'HOOK_FEATURED_HOME' => Module::hookExec('homeFeatured')）：

```
public function displayFooter()
    {

        if (!self::$initialized)
            $this->init();

        self::$smarty->assign(array(
            'HOOK_RIGHT_COLUMN' => Module::hookExec('rightColumn', array('cart' => self::$cart)),
            'HOOK_FEATURED_HOME' => Module::hookExec('homeFeatured'),
            'HOOK_FOOTER' => Module::hookExec('footer'),
            'content_only' => (int)(Tools::getValue('content_only'))));
        self::$smarty->display(_PS_THEME_DIR_.'footer.tpl');
        //live edit
        if (Tools::isSubmit('live_edit') AND $ad = Tools::getValue('ad') AND  (Tools::getValue('liveToken') == sha1(Tools::getValue('ad')._COOKIE_KEY_)))
    {
        self::$smarty->assign(array('ad' => $ad, 'live_edit' => true));
        self::$smarty->display(_PS_ALL_THEMES_DIR_.'live_edit.tpl');
    }
    else
        Tools::displayError();
} 
```

在文件 footer.tpl 我添加了钩子：

```
 <!-- featured products -->
            {if $page_name == 'index'}
                <div id="homeFeatured">
                    {$HOOK_FEATURED_HOME}
                </div>
            {/if} 
```

我在数据库中添加

```
id     name           title                     descritption             position       live_edit

97    homeFeatured    Home Featured Products    NULL                     0                  0 
```

在 module/homefeatured/homefeatured.php 我添加了：

```
function install()
    {
        if (!Configuration::updateValue('HOME_FEATURED_NBR', 8) OR !parent::install() OR !$this->registerHook('home') OR !$this->registerHook('homeFeatured'))
            return false;
        return true;
    } 
```

在课程结束时

```
function homeFeatured($params)
    {
    //    return $this->hookHome($params);
        echo 'hook test';

    } 
```

我没有在 div newdiv 中看到任何内容。

当我尝试将模块移植到后台办公室的新挂钩时，我收到：

```
This module cannot be transplanted to this hook. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:17:05.427

*在评论中给出了解决方案，但我写了一个答案以防其他人需要它：*

当你编辑`install()`一个模块的功能时，你需要卸载并重新安装它

# xna - 拉绳拒绝留在屏幕上 (XNA)

> ID：11493571
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:23:16.013
> 
> 标签：xna, foreach, drawstring

一直在与这个问题作斗争 3 个小时，我想是时候问一些专业人士了。

我的问题是我想制作一个滚动条，我发现我想通过使用两个整数来制作它，然后给列表中的每个项目一个 ID，然后说所有具有 ID 的项目在两个整数之间将显示，然后制作 2 个按钮，将 + 或 - 整数，以便您可以“滚动”通过项目。

因此，为了实现这一点，我决定制作虚拟代码，看看我该如何解决。在大多数情况下它的工作，但是我现在有问题，似乎我的绘图功能正在不断刷新屏幕（即使我已经输入了一个 bool 以确保它会），并且这样做它会一直擦除我在屏幕上列出的数字。

继承人的代码：

```
List<int> test = new List<int>() {1,2,3,4,5,6,7 };

        int low = 0;
        int high = 3;
        int count;
        bool isDone = false;

 public override void Draw(GameTime gameTime)
        {
spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.PointClamp, null, null, null);

if (!isDone)
            {
                int posX = 20;
                foreach (int nr in test)
                {

                    if (count == high)
                    {
                        isDone = true;
                        break;

                    }
                    else
                    {
                        count++;
                    }
                    if (count >= low && count <= high)
                    {
                        posX += 20;
                        spriteBatch.DrawString(gameFont, nr.ToString(), new Vector2(posX, 20), Color.White);
                    }
                }
            }

 spriteBatch.End();

} 
```

希望你们中的一些聪明人能注意到我一直错过的错误。

提前致谢

〜埃塔纳拉祖尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:19:29.370

你永远不会重置你的计数器。因此，数字将仅在第一帧中可见。添加

```
count = 0; 
```

在for循环之前。

此外，您可能想要修改您的结构。如果你使用 List<>，那么每个项目都已经有了它的索引。如果您使用 for 循环，您不必遍历每个项目：

```
for(int i = low; i <= high; ++i)
{
    var currentItem = list[i];
} 
```

# javascript - 将值添加到函数本地的数组而不修改函数本身

> ID：11493573
> 
> 赞同：0
> 
> 时间：2012-07-15T16:23:33.190
> 
> 标签：javascript, arrays

```
function animal(){
  var species = new Array('Monkey', 'Dog', 'Cat');
  for(i=0;i<species.length;i++)
  {
    document.writeln(species[i]);
  }
} 
```

如何在`species`不修改`animal()`函数的情况下向数组添加另一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:25:06.560

在不更改此函数的代码的情况下，不可能向数组添加值，原因很简单，因为在`species`那里使用的变量是在函数范围内声明的局部变量。所以这个变量对外部代码是不可见的。除此之外，该数组的值是硬编码的。所以算了吧。不触及功能实现是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:29:09.247

我不确定我是否完全理解您的担忧，但与其他一些语言不同，javascript 可以完全覆盖一个函数。

所以，假设上面的代码，我可以这样做：

```
window.animal = function(){
  var species = new Array('Monkey', 'Dog', 'Cat', 'Mouse', 'Fish');
  for(i=0;i<species.length;i++)
  {
    document.writeln(species[i]);
  }
} 
```

也就是说，我会避免使用`document.writeln()`，我认为该函数比`eval()`... 此外，正如 Darin 暗示的那样，如果可能的话，我也不会定义函数的本地数据。

# openerp - 如何编写使用 OpenERP ORM 直接上传到 Postgres 数据库的 Python 脚本

> ID：11493578
> 
> 赞同：9
> 
> 时间：2012-07-15T16:24:10.200
> 
> 标签：openerp

我需要在 Python 中编写一个“独立”脚本，仅使用 OpenERP 的 ORM 模块将销售税上传到数据库中的 account_tax 表。我想做的是类似于下面的伪代码。

有人可以向我提供有关以下内容的更多详细信息：1）我需要设置什么 sys.path 2）在导入“帐户”模块之前我需要导入哪些模块。目前，当我导入“帐户”模块时，我收到以下错误：AssertionError：报告“report.custom”已经存在！3）获取我的数据库游标的正确方法是什么。在下面的代码中，我只是直接调用 psycopg2 来获取游标。

如果这种方法行不通，除了编写 XML 文件来从 OpenERP 应用程序本身加载数据之外，任何人都可以提出替代方法。这个过程需要在标准 OpenERP 应用程序之外运行。

伪代码：

```
import sys
# set Python paths to access openerp modules
sys.path.append("./openerp")
sys.path.append("./openerp/addons")

# import OpenERP 
import openerp

# import the account addon modules that contains the tables 
# to be populated.
import account

# define connection string
conn_string2 = "dbname='test2' user='xyz' password='password'"

# get a db connection
conn = psycopg2.connect(conn_string2)

# conn.cursor() will return a cursor object
cursor = conn.cursor()

# and finally use the ORM to insert data into table. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T07:14:51.827

如果你想通过网络服务来做，那么看看 [OpenERP XML-RPC Web 服务](http://doc.openerp.com/v6.0/developer/6_22_XML-RPC_web_services/index.html)

示例代码顶部与 OpenERP Web 服务一起使用：

```
import xmlrpclib

username = 'admin' #the user
pwd = 'admin'      #the password of the user
dbname = 'test'    #the database

# OpenERP Common login Service proxy object 
sock_common = xmlrpclib.ServerProxy ('http://localhost:8069/xmlrpc/common')
uid = sock_common.login(dbname, username, pwd)

#replace localhost with the address of the server
# OpenERP Object manipulation service 
sock = xmlrpclib.ServerProxy('http://localhost:8069/xmlrpc/object')

partner = {
   'name': 'Fabien Pinckaers',
   'lang': 'fr_FR',
}
#calling remote ORM create method to create a record 
partner_id = sock.execute(dbname, uid, pwd, 'res.partner', 'create', partner) 
```

更清楚地说，您还可以将[OpenERP 客户端库](http://pypi.python.org/pypi/openerp-client-lib/1.0.3) 示例代码与客户端库一起使用：

```
import openerplib

connection = openerplib.get_connection(hostname="localhost", database="test", \
    login="admin", password="admin")
user_model = connection.get_model("res.users")
ids = user_model.search([("login", "=", "admin")])
user_info = user_model.read(ids[0], ["name"])
print user_info["name"] 
```

您看到两种方式都很好，但是当您使用客户端库时，代码较少且易于理解，而使用 xmlrpc 代理是您将处理的较低级别的调用希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T06:46:29.923

您可以使用[Erppeek](http://erppeek.readthedocs.org/en/latest/)浏览数据，但不确定您是否真的可以将数据上传到 DB，我个人使用/更喜欢 XMLRPC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:11:13.123

为什么不使用 openerp 的 xmlrpc 调用。它不需要导入 account 或 openerp 。甚至你可以拥有所有的 orm 功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T07:32:18.567

根据我的观点，必须使用 Open ERP 提供的服务来满足此类需求 `XMLRPC`。`NETSVC`

您不需要导入`accounts`Open ERP 的模块，其他模块有可能继承了`accounts.tax`对象并根据您的业务需要改变了它的行为。

最终，如果您通过手动调用这些方法而不使用 Open ERP 来提供数据，您`Web service`可能会得到不希望的结果/意外故障/不一致的数据库状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-18T07:51:03.600

您可以使用 python 库通过 xmlrpc 服务访问 openerp 服务器。请查看[https://github.com/OpenERP/openerp-client-lib](https://github.com/OpenERP/openerp-client-lib)

它由 OpenERP SA 正式支持。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-12T02:53:39.057

如果您想直接与数据库交互，您可以**导入 psycopg2**并：

```
conn = psycopg2.connect(dbname='dbname', user='dbuser', password='dbpassword', host='dbhost')
cur = conn.cursor()
cur.execute('select * from table where id = %d' % table_id)
cur.execute('insert into table(column1, column2) values(%d, %d)' % (value1, value2))
cur.close()
conn.close() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-15T16:25:31.087

为什么要这样修？！您应该创建一个**本地化模块并在****XML 文件**中定义数据。这是在 OpenERP 中解决此类问题的标准方法。

您想为哪个国家/地区插入销售税？请解释更多。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-03-23T08:42:30.387

从 openerp.modules.registry 导入 RegistryManager
registry = RegistryManager.get("databasename")
with registry.cursor() as cr:
      user = registry.get('res.users').browse(cr, userid, listids)
      打印用户

# android - AFNetworking for Android

> ID：11493581
> 
> 赞同：21
> 
> 时间：2012-07-15T16:24:17.307
> 
> 标签：android, json, image, asynchronous, afnetworking

我正在将我的 iOS 应用程序移植到 Android，现在需要一个简单易用的异步类集来下载 JSON 数据和图像。

对于 iOS，我使用的是 AFNetworking，这是一个了不起的工具。Android有类似的东西吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T16:27:29.060

有用于 Android 的 loop j 的异步 http 库（虽然我不是超级粉丝）[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)。老实说，最好的办法就是在 intentservice 中使用 apache httpclient，这样它是异步的，然后通过 ResultReceiver 将结果传递给您的活动等。

**更新**

我现在推荐来自 Square 的开源项目 Retrofit。我使用它，它作为 REST 客户端工作得很好。[http://square.github.io/retrofit/](http://square.github.io/retrofit/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T01:11:02.463

你可以试试[RoboSpice](https://github.com/octo-online/robospice)。给我们反馈，如果是，你需要什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-19T23:27:56.907

另一个不错的选择可能是 Volley，这是 Google 在 IO 2013 上推出的网络库。有关更多信息，请查看此主题：[Volley Android 网络库](https://stackoverflow.com/questions/16659620/volley-android-networking-library)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T13:13:11.230

这个库很棒。我想这就是你想要的试一试，伙计

[https://code.google.com/p/android-query/wiki/AsyncAPI](https://code.google.com/p/android-query/wiki/AsyncAPI)

# javascript - 一个javascript文件的多个来源

> ID：11493586
> 
> 赞同：1
> 
> 时间：2012-07-15T16:24:56.393
> 
> 标签：javascript, html

我正在开发一个项目，我需要在 HTML 头部部分中直接包含大约 10-15 个 .js 文件，例如

```
<script type="text/javascript" src="http://localhost:9020/website1/wa/min/soundmanager2.js,vars.js,utils/md5.js,utils/utils.js></script> 
```

我可以正确提供参考的方式是什么

我需要引用的文件位于同一层次结构中，例如

1.....2,3 2........4,5 3........6,7

我需要参考 1,4,7 请**帮忙**。

我在某处读过这个方法是什么？

```
<script type="text/javascript" src="http://localhost:9020/wordplus/root/child/?b=scripts&f=soundmanager2.js,vars.js,utils/md5.js,utils/utils.js></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:21:10.453

您发布的示例看起来与 minify PHP 库的查询字符串接口完全一样：http: [//github.com/mrclay/minify](http://github.com/mrclay/minify)

使用它，您以时尚的方式使用它`<script src="min/?b=path&f=script1.js,script2.js,ui/script3.js"></script>`。`path`您希望它在哪里查找脚本的 Web 根目录的路径在哪里。

我以前用过它，我发现它非常有效。它连接、缩小、缓存和服务于 JS 和 CSS。

我确信还有其他库可以达到相同的效果，或者您可以创建一个构建脚本来连接和缩小所有脚本，然后在单个脚本标记中将单个 JS 文件部署到您的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:32:38.210

无法在单个`<script>`元素中加载多个 javascript 文件。

对于要引用的每个脚本，您必须有一个单独的`<script>`元素。

```
<script type="text/javascript"
  src="http://localhost:9020/wordplus/root/child/?b=scripts&f=soundmanager2.js"></script>
<script type="text/javascript"
  src="http://localhost:9020/wordplus/root/child/?b=scripts&f=vars.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:46:17.080

我想你会从动态加载外部 javascript 文件中得到你需要的东西：

[http://ntt.cc/2008/02/10/4-ways-to-dynamically-load-external-javascriptwith-source.html](http://ntt.cc/2008/02/10/4-ways-to-dynamically-load-external-javascriptwith-source.html)

[http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T16:54:22.850

您发布的第二行从服务器动态请求脚本。请求的`b`参数告诉它你想要脚本，`f`参数告诉服务器你想要哪些文件。然后它将这些连接到一个文件中并将其发送回用户代理。你需要服务器端脚本来处理这个；它不是内置在 URL 规范中的东西。

```
http://localhost:9020/wordplus/root/child/
b=scripts
f=soundmanager2.js,vars.js,utils/md5.js,utils/utils.js 
```

最简单的解决方案是每个文件只有一个脚本标签，因为它可以让您利用缓存：

```
<script src="http://localhost:9020/wordplus/root/child/soundmanager2.js"></script>
<script src="http://localhost:9020/wordplus/root/child/vars.js"></script>
<script src="http://localhost:9020/wordplus/root/child/utils/md5.js"></script>
<script src="http://localhost:9020/wordplus/root/child/utils/utils.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T17:07:33.583

另一种解决方案是使用一些 JavaScript 构建器来加入所有文件，只生成一个。这种方法的优点是您的结果文件将被“压缩”（缩小）。一些建设者：

*   [Google Closure Compiler](https://developers.google.com/closure/compiler/)（我从 2009 年开始喜欢并使用它）。
*   [YUI 压缩机](http://developer.yahoo.com/yui/compressor/)

# android - 操作栏中的空白标题

> ID：11493589
> 
> 赞同：9
> 
> 时间：2012-07-15T16:25:30.943
> 
> 标签：android, android-actionbar, titlebar

是否可以删除我认为丑陋且不适合我的应用程序但仍使用操作栏的标题栏？我打电话后

```
 requestWindowFeature(Window.FEATURE_NO_TITLE | Window.FEATURE_ACTION_BAR); 
```

标题栏仍然存在，但我的一部分视图消失了（无法向上滚动）![应用程序视图](../Images/7576380e494425feda1be722dd2a1ab7.png)

是否可以摆脱标题栏但仍保留操作栏，如果我不请求它，因为窗口功能 getActionBar() 每次都返回 null ..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-15T16:56:28.057

继 Honeycomb 之后，引入了 Action Bar 以提供更多功能，您可以使用它隐藏 logo 和标题

```
ActionBar ab = getActionBar(); 
ab.setDisplayShowTitleEnabled(false); 
ab.setDisplayShowHomeEnabled(false); 
```

# jquery - X 秒后停止 jQuery ajax 刷新

> ID：11493590
> 
> 赞同：1
> 
> 时间：2012-07-15T16:25:43.470
> 
> 标签：jquery, ajax, refresh, setinterval

我使用 jQuery ajax 每 2 秒刷新一次 div。

如何在 60 秒后停止刷新（例如，如果用户处于非活动状态）？

```
setInterval(function() {
  $.ajax({
    url: "feeds.php",
    cache: false
  }).done(function( html ) {
  $('#feeds').replaceWith('<div id="feeds">'+html+'</div>');
   });
}, 2000); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:28:38.620

将 setInterval 句柄分配给一个变量，您将在 60 秒后使用它来清除它。

```
var interval = setInterval(function(){ ... }, 2000);

// start a 60 second timer
setTimeout(function(){ window.clearInterval(interval); }, 60000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:28:28.060

没那么难。

```
var myInterval = setInterval(function(){},2000);
setTimeout(function() { clearInterval( myInterval ); } 
```

我不确定这是否有泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T10:25:06.743

```
//store the ajax call into a variable
var chr =  $.ajax({ .....}

//use setTimeout to invoke its abort() method after 1000 ms (1 second)
setTimeout(function(){
  chr.abort()
}, 1000); 
```

# javascript - 用于游戏的英语单词的 javascript 列表

> ID：11493594
> 
> 赞同：19
> 
> 时间：2012-07-15T16:26:24.127
> 
> 标签：javascript, dictionary, spell-checking

我正在制作一个需要英语词典单词列表的简单 JS 游戏。我是否需要自己构建列表，或者是否可以访问系统或浏览器的拼写检查字典 - 或者可能有其他解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-05-16T12:33:06.990

您可以使用[Aspell](http://aspell.net/)英语词典。
Aspell 英语词典位于：[ftp](ftp://ftp.gnu.org/gnu/aspell/dict/0index.html) ://ftp.gnu.org/gnu/aspell/dict/0index.html 。

要从 Aspell 字典结账中转储世界列表：

*   [https://superuser.com/questions/137957/how-to-convert-aspell-dictionary-to-simple-list-of-words](https://superuser.com/questions/137957/how-to-convert-aspell-dictionary-to-simple-list-of-words)
*   [http://www.commandlinefu.com/commands/view/10619/dump-an-aspell-dictionary-as-a-word-list](http://www.commandlinefu.com/commands/view/10619/dump-an-aspell-dictionary-as-a-word-list)
*   [http://aspell.net/man-html/Dumping-the-Contents-of-the-Word-List.html](http://aspell.net/man-html/Dumping-the-Contents-of-the-Word-List.html)

转储英文单词列表的命令应该类似于：

```
aspell -d en dump master | aspell -l en expand > words.txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-16T12:51:45.790

使用节点，您可以安装[随机词](https://github.com/punkave/random-words)

```
npm install random-words 
```

导入它，你就完成了：

```
var randomWords = require('random-words');
console.log(randomWords()); 
```

[要求bin](http://requirebin.com/?gist=a42d7f856bcb68185d8db311317361fc)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-19T21:28:33.443

Firefox 拼写检查的词汇表似乎来自这个存储库：[https](https://github.com/marcoagpinto/aoo-mozilla-en-dict) ://github.com/marcoagpinto/aoo-mozilla-en-dict 。所以你可以在那里下载它以获得一个单词列表。

您还可以将字典安装为插件（[https://addons.mozilla.org/en-GB/firefox/language-tools/](https://addons.mozilla.org/en-GB/firefox/language-tools/)），但我不知道字典插件是否或如何可以直接从 JavaScript 访问浏览器内部。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-29T14:00:13.613

我找到的最简单的解决方案是从任何地方（在网络上）获取一个文本或 JSON 文件，其中包含所有英文单词（不是字典中的含义）。我从[这个存储库](https://github.com/dwyl/english-words/)得到它，它包含一个文本文件和一个 JSON 文件。

您可以使用 javascript 或其他编程语言轻松地从 JSON 文件中读取数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-18T11:04:49.173

正如@aryaman 所链接的那样，当我需要一个用于自动更正文本框的数组时，我也使用了那个 GitHub 页面。[https://github.com/dwyl/english-words/blob/master/words.txt[][1]](https://github.com/dwyl/english-words/blob/master/words.txt[][1])

但是，如果您正在寻找 Javascript Array Soultion，只需在与 words.txt 文件相同的目录中创建一个 Python 文件并将其键入 Python 文件

```
filepath = 'words.txt'
print("var anyname = [")
with open(filepath) as fp:
   for cnt, line in enumerate(fp):
       print("'{}',".format(line))
print("]") 
```

只需将输出复制粘贴到您的代码文件并完成！

*！注意 - 这是一个非常大的文件，我建议您使用来自同一个存储库的这个文件 [https://github.com/dwyl/english-words/blob/master/words_alpha.txt[][1]](https://github.com/dwyl/english-words/blob/master/words_alpha.txt[][1])。它包含没有任何数字的单词。此外，Python 脚本可能需要 2-3 小时，我的脚本目前正在运行，这就是我写这篇文章的原因。如果完成，我将很快通过直接链接到文件来编辑答案！*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-07T18:51:12.590

正在寻找一个可以用于工作簿的简单 JSON 端点 - 最后将其上传到 github：

[https://gist.githubusercontent.com/jesseditson/1e6b2b524814320515ccfe7e2f856eda/raw/17d61fa1e80e14b13c4525b09f84148772586b59/words.json](https://gist.githubusercontent.com/jesseditson/1e6b2b524814320515ccfe7e2f856eda/raw/17d61fa1e80e14b13c4525b09f84148772586b59/words.json)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-24T03:20:40.643

你可以使用这个：

[https://www.javascriptspellcheck.com/JavaScript_SpellChecking_Dictionaries](https://www.javascriptspellcheck.com/JavaScript_SpellChecking_Dictionaries)

有多种语言：

```
 Afrikaans (South Africa)
 American English (USA)
 Australian English
 Brazil (Modern Brazilian Portuguese)
 British English (UK)
 Catalan (Catalonia)
 Canadian English
 Danish Dictionary (Dansk)
 Dutch & Flemish (Nederlands)
 Gaelic
 German Dictionary (Deutsch)
 French (Francais)
 Frisian (Frysk, Seeltersk & Mooring)
 International English
 Italian (Italiano)
 Malaysian (Bahasa Malaysia)
 Portuguese (Portugues - Brazil and Portugal)
 Spanish (Espanol - Americas & Spain)
 Swedish (Svenska)
 Welsh (Cymric) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-21T15:49:06.013

我最近发现了以下 npm 存储库，其中包含来自[此处](https://github.com/dwyl/english-words/)的英文单词列表。

[https://github.com/danakt/spell-checker.js](https://github.com/danakt/spell-checker.js)

`npm i spell-checker-js`

```
const spell = require('spell-checker-js')

// Load dictionary
spell.load('en')

// Checking text
const check = spell.check('Some text to check, blahblahblah, olololo')

console.log(check)
// -> ['blahblahblah', 'olololo'] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-02T04:53:35.867

这是一个使用 42,812 个单词的随机单词生成器。

[https://github.com/adamjgrant/Random-English-Word-Generator-42k-Words-](https://github.com/adamjgrant/Random-English-Word-Generator-42k-Words-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-18T07:34:39.693

你可以在这里得到一个 worlist [http://marcoagpinto.cidadevirtual.pt/proofingtoolgui.html](http://marcoagpinto.cidadevirtual.pt/proofingtoolgui.html) .. 寻找右边的 WORDLIST 链接

# java - 将日期字符串（MM-dd）解析为默认年份的 java 日期

> ID：11493595
> 
> 赞同：4
> 
> 时间：2012-07-15T16:26:28.733
> 
> 标签：java, date, calendar, date-format

我想将 MM-dd 格式的字符串解析为 java 日期。由于未指定年份，因此解析日期应为当年。应该只解析有效的日期字符串，所以我应该使用`setLenient(false)`in `SimpleDateFormat`。

```
public static Date parseDate(String ds) throws ParseException {
    SimpleDateFormat df = new SimpleDateFormat("MM-dd");
    df.setLenient(false);
    Date d = df.parse(ds);
    Calendar cal = Calendar.getInstance();
    int year = cal.get(Calendar.YEAR);
    cal.setTime(d);
    cal.set(Calendar.YEAR, year);
    return cal.getTime();
} 
```

在我通过参数“02-29”之前，这似乎很有效。今年（2012）是闰年，2012-02-29是有效日期，“02-29”应该已经解析成功了。

我发现当我不指定年份部分时`SimpleDateFormat`，它会解析为 1970 年。而 1970 年不是闰年，“02-29”无法解析。因此，解析到 1970 年的日期并在解析策略后设置当前年份并不完美。

**在 Java 中解析 MM-dd 格式字符串到日期（日期应设置为当前年份）的最佳方法是什么？**

PS1：我搜索了这个话题，在本站找到了很多问题和答案，但都没有找到满意的答案。PS2：`df.setLenient(false);`很重要，因为只有有效的日期字符串才能成功解析。不应解析“01-32”、“02-30”等无效日期字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:32:43.913

这可能被认为有点 hacky，但您总是可以在解析之前将年份添加到日期字符串的末尾，如下所示：

```
ds += "-" + Calendar.getInstance().get(Calendar.YEAR);
SimpleDateFormat df = new SimpleDateFormat("MM-dd-yyyy");
// Parse date as usual 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-30T23:13:30.170

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T16:33:14.577

像在代码中一样从日历中获取年份，将解析格式字符串设置为`MM-dd-yyyy`，然后执行

```
 Date d = df.parse(ds + "-" + year); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T21:26:48.797

如果您知道您的字符串格式正确，那么关于附加当前年份的其他答案就足够了。

如果您需要处理未知格式的输入字符串（您不确定年份是否在字符串上），您可以首先尝试使用完整格式解析日期，然后使用覆盖的较短格式返回那一年。

```
public static Date parseDate(String ds) throws ParseException {
    SimpleDateFormat fullFormat = new SimpleDateFormat("MM-dd-yyyy");
    fullFormat.setLenient(false);
    try {
      return fullFormat.parse(ds);
    } catch (ParseException e) {}

    // Full format unsuccessful. Attempt short format.
    SimpleDateFormat shortFormat = new SimpleDateFormat("MM-dd");
    shortFormat.setLenient(false);
    Date d = shortFormat.parse(ds);
    Calendar cal = Calendar.getInstance();
    int year = cal.get(Calendar.YEAR);
    cal.setTime(d);
    cal.set(Calendar.YEAR, year);
    return cal.getTime();
} 
```

奖励：如果您出于某种原因想要一个“包罗万象”的解析器，请定义一堆非宽松的日期格式并逐个检查它们。请注意，顺序很重要；第一个匹配的将返回。如果要设置默认年份，则必须更进一步，检查输入中是否以某种方式引用了默认的 1970 年：

```
public static Date parseDate(String ds) throws ParseException {
  Calendar cal = Calendar.getInstance();
  int currentYear = cal.get(Calendar.YEAR);

  for (DateFormat knownFormat : knownFormats) {
    try {
      Date d = knownFormat.parse(ds);
      cal.setTime(d);

      if (cal.get(Calendar.YEAR) == 1970 && !ds.contains("70")) {
        cal.set(Calendar.YEAR, currentYear);
      }

      return cal.getTime();
    } catch (ParseException e) {}
  }

  throw new ParseException("Unknown date format for String: " + ds);
} 
```

# php - 函数中 JavaScript 函数的正确语法

> ID：11493602
> 
> 赞同：0
> 
> 时间：2012-07-15T16:27:05.233
> 
> 标签：php, javascript, mysql, html, ajax

该函数`pagination($total, $limit, $page)`返回页码 [pg#01 pg#02 pg#03 pg#04 NEXT]。

通过单击页码（例如 pg#02），`javascript:showPagination('what_here')`应该向服务器发送一个 AJAX 请求，其中包含从函数返回的页码`pagination()`。

这两个功能都可以正常工作。当我用 测试 JavaScript 时`showPagination('2')`，服务器会得到这个数字 (2)。

向服务器发送被点击的请求页码的正确语法是什么？

```
<td><a href="javascript:showPagination('')"><?php echo pagination($total, $limit, $page); ?></a></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:29:50.760

我倾向于尝试这个：

```
<td><a href="javascript:showPagination('<?php echo pagination($total, $limit, $page); ?>')"><?php echo pagination($total, $limit, $page); ?></a></td> 
```

但另一方面，使用起来可能更方便（使用相同的语法）

```
onclick='showPagination(<?php echo pagination($total, $limit, $page); ?>);' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:18:07.217

编辑：正如你所评论的，我想我误解了你的问题。你可以试试：

```
<td><a href="javascript:showPagination('<?php echo pagination($total, $limit, $page); ?>');"><?php echo pagination($total, $limit, $page); ?></a></td> 
```

或者：

```
<td><a href="#" onclick="showPagination('<?php echo pagination($total, $limit, $page); ?>');"><?php echo pagination($total, $limit, $page); ?></a></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:08:46.847

阅读后`"This question is actually about the correct syntax of how to send to the server a result from pagination() to showPagination() through Ajax."`，我会建议您以下内容：

**Javascript：**

```
// save current page to global variable
window.globalPageId = 0;

//the pseudo function 
function showPagination(id) {
  id || ( id = globalPageId );
  var xhr = new xmlHttpRequest();
  xhr.open("GET", "/yourPhpPage.php?pageId="+id, true);
  xhr.send();
  xhr.onreadystatechange = function() {
   if(xhr.readyState == 4 && xhr.status == 200) {
    globalPageId = xhr.responseText; //sure if the result is only id of page;
   }
  }
} 
```

然后是 html：

```
<td><a href="javascript:showPagination(this.getAttribute('page-id')" page-id="id of page here, from php function">link text here</a></td> 
```

或者 ：

```
<td><a href="javascript:showPagination()">link text here</a></td> 
```

# haskell - 将关联类型同义词与类约束统一起来

> ID：11493603
> 
> 赞同：0
> 
> 时间：2012-07-15T16:27:12.803
> 
> 标签：haskell, type-families

我有一个嵌套类型，我想使用关联的类型同义词部分指定它。下面是一些演示问题的极其简化的代码：

```
{-# LANGUAGE TypeFamilies,
FlexibleInstances,
FlexibleContexts,
MultiParamTypeClasses #-}

f :: Int -> Int
f x = x+1

data X t i
newtype Z i = Z i deriving (Eq,Show)
newtype Y q = Y (T q)

class Qux m r where
    g :: (T m) -> r

class (Integral (T a)) => Foo a where
    type T a
    -- ... functions

instance (Integral i) => Foo (X (Z i) i) where
    type T (X (Z i) i) = i

instance (Foo q) => Num (Y q) -- where ...

instance (Foo q, Foo (X m' Int)) => Qux (X m' Int) (Y q) where
    g x =  fromIntegral $ f $ x 
```

这（即使使用 UndecidableInstances）会导致编译器错误：

```
Could not deduce (T (X m' Int) ~ Int) 
```

我知道将这个约束添加到 Qux 的实例会使编译器高兴。但是，我知道在我的程序中 (T (X arg1 arg2)) = arg2，所以我试图弄清楚如何**不必**编写这个约束。

我的问题是：我能否让 Haskell 意识到当我将“Int”作为 X 的第二个参数写入时，这与同义词 T (X a' Int) （完全相同）是一样的？我意识到我正在使用关于我的实例的外观的“特殊”知识，但我认为应该有一种方法可以将它传达给编译器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:15:03.333

由于我不确定我是否理解这个问题，所以我将讨论您编写的代码；也许我漫无边际的某些部分会为您指明一个有用的方向，或者引发一些我可能回答的尖锐问题。也就是说：警告！前面漫无边际的不回答！

首先，让我们谈谈`Bar`班级。

```
-- class (i ~ S b) => Bar b i where
--     type S b
--     ... 
```

既然我们知道约束`i ~ S b`，我们不妨放弃这个`i`论点，我将在接下来的讨论中这样做。

```
class Bar b where type S b
-- or, if the class is empty, just
-- type family S b
-- with no class declaration at all 
```

下面是这个新类的实例的外观：

```
instance Bar (Z  i) where type S (Z  i) = i
instance Bar (Z' i) where type S (Z' i) = i 
```

如果这对于*任何*类型的构造函数都是正确的，那么您可以考虑将其写为一个实例：

```
-- instance Bar (f i) where type S (f i) = i 
```

现在，让我们谈谈`Foo`班级。要将其更改为与上述匹配，我们将编写

```
class Bar (T a) => Foo a where type T a 
```

您已经声明了两个实例：

```
-- instance (Bar (Z i) i) => Foo (X (Z i) i) where
--     type T (X (Z i) i) = Z i
--
-- instance (Bar (Z' i) i) => Foo (X' (Z' i) i) where
--     type T (X (Z' i) i) = Z' i 
```

我们可以`Bar`像以前一样去掉第二个参数，但我们也可以做另一件事：因为我们知道有一个`Bar (Z i)`实例（我们在上面声明了它！），我们可以去掉实例约束。

```
instance Foo (X (Z  i) i) where type T (X (Z  i) i) = Z  i
instance Foo (X (Z' i) i) where type T (X (Z' i) i) = Z' i 
```

您是否要保留`i`论点`X`取决于`X`应该代表什么。到目前为止，我们还没有改变任何类声明或数据类型的语义——只改变了它们的声明和实例化方式。更改`X`可能不具有相同的属性；不看定义很难说`X`。有了数据声明和足够多的扩展，上面的前奏就可以编译了。

现在，您的抱怨：

*   您说以下内容无法编译：

    ```
    class Qux a
    instance Foo (X  a' Int) => Qux (X  a' Int)
    instance Foo (X' a' Int) => Qux (X' a' Int) 
    ```

    但是，使用`UndecidableInstances`，它确实在这里编译。它需要它是有道理的`UndecidableInstances`：没有什么可以阻止某人稍后出现并声明一个像这样的实例

    ```
    instance Qux (X Y Int) => Foo (X Y Int)

    Then, checking whether `Qux (X Y Int)` had an instance would require checking whether `Foo (X Y Int)` had an instance and vice versa. Loop. 
    ```

*   你说，“它也需要实例约束`S (T (X a'))) ~ Int`，尽管我知道在我的程序中，这些总是同义词。”。我不知道第一个“它”是什么——我无法重现这个错误——所以我不能很好地回答这个问题。另外，正如我之前抱怨的那样，这个约束是不友好的：`X :: (* -> *) -> * -> *`, 因此`X a' :: * -> *`, 并`T`期望一个 kind 的论点`*`。所以我假设你的意思是`S (T (X a' Int)) ~ Int`。

    尽管有这些抱怨，但我们可以问为什么`S (T (X a' Int)) ~ Int`不能从我们迄今为止的假设中得到证明。到目前为止，我们只`Foo`为符合模式的类型声明了实例，`X (Z i) i`并且`X (Z' i) i`. 因此，类型函数`T`只有在其参数类型符合其中一种模式时才能减少。该类型`X a' Int`不太适合这两​​种模式。我们可以把它塞进正确的模式：我们可以尝试减少 with`X (Z Int) Int`代替（比如说）。然后我们会发现`T (X (Z Int) Int) ~ Z Int`，因此`S (T (X (Z Int) Int) ~ S (Z Int) ~ Int`。

    这回答了如何修复类型级别的减少，但没有解释如何修复任何未构建的代码。为此，我们必须找出类型检查器需要从`S (T (X a' Int))`to强制转换的原因`Int`，并看看我们是否可以说服它更具体（和可满足）的强制转换，例如`S (T (X (Z Int) Int)) ~ Int`，或者使用`Bar`上面建议的通用实例，`S (T (X (f Int) Int)) ~ Int`。如果没有足够的代码来重现您的错误，我们当然无法帮助您。

*   你问，“我能否让 Haskell 意识到，当我将 'Int' 作为 X 的第二个参数时，这与同义词 S (T (X a' Int)) （完全相同）是一样的？”。我完全不明白这个问题。您想以某种方式获得可证明的平等`X a Int ~ S (T (X a' Int))`吗？这就是我从你的问题的字面阅读中得到的解释。

    在上下文中，我想您可能想问您是否可以获得可证明的平等`b ~ S (T (X a b))`；在这种情况下，答案是“绝对！”。我们将滥用我们在上面知道的事实`b ~ S (Z b)`来将这个方程简化为更强的方程`Z b ~ T (X a b)`。然后我们可以将`Foo`上面的实例替换为做出此声明的实例，仅此而已：

    ```
    instance Foo (X a b) where T (X a b) = Z b 
    ```

    或者，我们可以假设另一个合理的方程，`T (X a b) ~ a`; 然后，为了证明`S (T (X a b)) ~ b`我们只需要证明`S a ~ b`（通过减少`T`），所以我们可以编写另一个替代`Foo`实例：

    ```
    instance (Bar a, S a ~ b) => Foo (X a b) where T (X a b) = a 
    ```

# c - 如何每 4 个字符拆分一个字符串，然后记住这些片段

> ID：11493609
> 
> 赞同：2
> 
> 时间：2012-07-15T16:27:46.633
> 
> 标签：c, string, split

有人知道如何每隔（例如）4个字符分割一个字符串吗？我的消息（包含在一个 char 缓冲区中）是“祝你有美好的一天”，我想将它拆分，使其以下列方式显示：“有\0”“an\0”“冰\0”“天\ 0”。每个拆分都包含在 char* temp[5] 中。函数“strtok”仅使用空格进行拆分，我需要每 4 个字节拆分一次消息的字符......我真的不知道该怎么做，有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:33:38.570

```
const char *str = "have a nice day "; // 16 chars to be divisible by 4, else the last strndup won't work properly...
size_t len = strlen(str);

const char **fragments;
fragments = malloc(sizeof(*fragments) * len / 4);
int i;

for (i = 0; i < (len / 4); i++)
{
    fragments[i] = strndup(str + 4 * i, 4);
} 
```

现在片段应该包含，嗯，片段......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:32:18.587

```
#include <stdio.h>
#include <stdlib.h>

char *split(const char *str, size_t size){
    static const char *p=NULL;
    char *temp;
    int i;
    if(str != NULL) p=str;
    if(p==NULL || *p=='\0') return NULL;
    temp=(char*)malloc((size+1)*sizeof(char));
    for(i=0;*p && i<size;++i){
        temp[i]=*p++;
    }
    temp[i]='\0';
    return temp;
}

int main(){
    char *p = "Have a nice day";
    char *temp[5];
    int i,j;

    for(i=0;NULL!=(p=split(p, 4));p=NULL)
        temp[i++]=p;

    for(j=0;j<i;++j){
        printf("\"%s\"\n", temp[j]);
        free(temp[j]);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:59:24.897

您应该将您的工作分开在一个函数中，并且 sscanf 可以拆分字符串。对于编译时的恒定拆分大小，您可以使用指针在新的 N+1 字符大小上进行迭代，例如：

```
char (*split4chars(char *s,char (*b)[5]))[5]
{ /* returns a pointer to char[5] elements */
  int n;
  while( 1==sscanf(s,"%4[^\n]%n",*b++,&n) ) s+=n;
  return --b;
}

int main()
{
  char *s = "Have a nice day";
  char (*b)[5] = malloc(ceil(strlen(s)/4)*5), /* enough memory for destination */
       (*e)[5] = split4chars(s,b);

  while( e!=b ) /* iterate from begin to end here */
    puts(*b++);

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T16:32:33.580

AC 字符串是以 NULL 结尾的`char`s 数组。您可以结合使用指针算术和`memcpy`：

```
const char* originalString = "Have a nice day";

char str1[5];
char str2[5];
memcpy(str1, originalString, 4);
str1[4] = 0;
memcpy(str2, originalString + 4, 4);
str2[4] = 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T16:43:01.773

```
char** split(char* input)
{
    int count = (strlen(input) + 3) / 4;
    char** splitted = (char**)malloc(count * sizeof(char*));
    char** currentSplitted = splitted;
    while (*input != 0)
    {
        *currentSplitted = strndup(input, 4);
        input += strlen(*currentSplitted++);
    }

    return splitted;
}

int main()
{
    char* input = "Have a nice day";
    char** splitted = split(input);
    return 0;
} 
```

[如果没有，可以在http://opensource.apple.com/source/gcc/gcc-5666.3/libiberty/strndup.c](http://opensource.apple.com/source/gcc/gcc-5666.3/libiberty/strndup.c)获取 strndup 的源代码。

# php - 我的 PHP 正则表达式 (regexp) 应该是什么样子？

> ID：11493611
> 
> 赞同：0
> 
> 时间：2012-07-15T16:28:13.970
> 
> 标签：php, regex, preg-match-all

我有一个包含一些 HTML 和 PHP 文本的长字符串。在该字符串中，我想搜索所有出现的几个 PHP 函数调用并获取参数。现在我需要正则表达式的帮助。

要查找的函数`link_to`：`link_to_function`和`mail_to`。

我未完成的工作副本：

```
$regexp = '...' // Help here please!

$str = "Bla bla bla <?php echo link_to('Lorem', 'Ipsum') ?> bla bla bla <?php echo link_to_function(\"Lorem2\", \"Ipsum2\") ?> bla bla bla...";

preg_match_all
(
  $regexp,
  $str,
  $matches
); 
```

我希望它返回如下内容：

```
$matches = array
(
  [0] => array
  (
    [0] => "link_to('Lorem', 'Ipsum')"
    [1] => "link_to_function(\"Lorem2\", \"Ipsum2\")"
  )
  [1] => array
  (
    [0] => "Lorem"
    [1] => "Lorem2"
  )
  [2] => array
  (
    [0] => "Ipsum"
    [1] => "Ipsum2"
  )
); 
```

如您所见，参数可以用单引号和双引号括起来。参数中应该可以使用所有类型的字符。

还有一件事：每个调用都可以有一个**或**两个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:37:51.640

我认为您可能必须单独测试一个或两个参数。对于两个参数，您需要这样的东西：

```
"link_to.*?\(\s*'(.*?)'\,\s*'(.*?)'\s*\)" 
```

如果您认为您可能需要捕获双引号和单引号，请更改为：

```
"link_to.*?\(\s*['"](.*?)['"]\,\s*['"](.*?)['"]\s*\)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:29:32.780

尝试

```
[a-z_]+\(\s*(?:['"](.*?)['"],?\s*)*\) 
```

并在必要时进行改进，我手头没有 php...

# python - App Engine - 使用 memcache 实现获取 KeyError

> ID：11493612
> 
> 赞同：0
> 
> 时间：2012-07-15T16:28:17.200
> 
> 标签：python, google-app-engine, memcached

[我正在尝试实现 Guido 发布的代码，作为对Avoiding Memcache 1M limit of values](https://stackoverflow.com/questions/9127982/avoiding-memcache-1m-limit-of-values/9143912#9143912)问题的回答。当我第一次加载页面并向内存缓存添加值时，一切似乎（？）都在工作，但是当我重新加载它并从内存缓存中检索值时，我收到了一个奇怪的错误：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 194, in Handle
    for chunk in result:
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/appstats/recording.py", line 1036, in appstats_wsgi_wrapper
    result = app(environ, appstats_start_response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1519, in __call__
    response = self._internal_error(e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/appengineurlhere/mypythoncode.py", line 87, in get
    entitylist = retrieve("entitylist")
  File "/appengineurlhere/mypythoncode.py", line 53, in retrieve
    return pickle.loads(serialized)
  File "/base/python27_runtime/python27_dist/lib/python2.7/pickle.py", line 1382, in loads
    return Unpickler(file).load()
  File "/base/python27_runtime/python27_dist/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
KeyError: ':' 
```

这是存储/检索代码：

```
def store(key, value, chunksize=750000):
    serialized = pickle.dumps(value, 2)
    values = {}
    for i in xrange(0, len(serialized), chunksize):
        values['%s.%s' % (key, i//chunksize)] = serialized[i : i+chunksize]
    memcache.set_multi(values)

def retrieve(key):
    result = memcache.get_multi(['%s.%s' % (key, i) for i in xrange(32)])
    serialized = ''.join([v for v in result.values() if v is not None])
    return pickle.loads(serialized) 
```

这就是我使用它的方式：

```
try:
  entitylist = retrieve("entitylist")
except EOFError:
  entitylist = MyModel.all().fetch(None)
  store("entitylist", entitylist) 
```

其他怪事：

*   我在我的开发服务器上看不到这个；只是生产 App Engine 网站。（虽然我的开发服务器上的数据略有不同；我相信它们都适合标准的 1MB 内存缓存大小，生产数据更大。）
*   当我在开发和生产管理面板上搜索“entitylist”时，App Engine 告诉我“没有这样的键”。然而，根据显示的内存缓存的总大小（这是我实现内存缓存的唯一地方），绝对看起来有些东西正在被缓存。

谁能指出我应该查看或修复的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:21:14.463

您是否有一些旧的 MyModel 实例与 MyModel 的当前定义不匹配？如果存在无法识别或缺失的属性，则在酸洗时可能会出错。

# xaml - 跟踪键盘输入

> ID：11493614
> 
> 赞同：2
> 
> 时间：2012-07-15T16:28:32.800
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我正在使用 c#/xaml 开发简单的游戏。我想使用键盘箭头键实现游戏控制。所以我尝试在 Page 类上实现 KeyDown/KeyUp 事件，但它没有触发。

有谁知道为什么它不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:31:28.933

刚刚为我的问题找到了解决方案。您需要在构造函数中像这样连接这些事件：

```
Windows.UI.Core.CoreWindow.GetForCurrentThread().KeyDown += App_KeyDown;
Windows.UI.Core.CoreWindow.GetForCurrentThread().KeyUp += App_KeyUp; 
```

# ruby - 狂妄自大无法安装：缺少 C 库：ruby、ruby、ruby

> ID：11493620
> 
> 赞同：3
> 
> 时间：2012-07-15T16:29:23.393
> 
> 标签：ruby, haskell

我拼命地尝试安装 Hubris，但每当我运行“cabal install”时安装都会失败。

Hurbis 链接：
[https ://github.com/mwotton/Hubris/tree/master/Haskell](https://github.com/mwotton/Hubris/tree/master/Haskell)

链接到阴谋集团文件：
[https ://github.com/mwotton/Hubris/blob/master/Haskell/hubris.cabal](https://github.com/mwotton/Hubris/blob/master/Haskell/hubris.cabal)

失败的阴谋集团命令是：

```
cabal install --extra-include-dirs=/usr/include/ruby-1.9.1/x86_64-linux --extra-include-dirs=/usr/include/ruby-1.9.1 --extra-lib-dirs=/usr/lib --user  --enable-shared  --with-ghc=/usr/local/bin/ghc 
```

错误信息是：

```
Resolving dependencies...
Configuring hubris-0.0.4...
cabal: Missing dependencies on foreign libraries:
* Missing C libraries: ruby, ruby, ruby
This problem can usually be solved by installing the system packages that
provide these libraries (you may need the "-dev" versions). If the libraries
are already installed but in a non-standard location then you can use the
flags --extra-include-dirs= and --extra-lib-dirs= to specify where they are.
cabal: Error: some packages failed to install:
hubris-0.0.4 failed during the configure step. The exception was:
ExitFailure 1 
```

瑞克误差是一样的：

```
+install -c tmp/x86_64-linux/stub/1.9.3/stub.so lib/stub.so
cabal: Missing dependencies on foreign libraries:
* Missing C libraries: ruby, ruby, ruby
This problem can usually be solved by installing the system packages that
provide these libraries (you may need the "-dev" versions). If the libraries
are already installed but in a non-standard location then you can use the
flags --extra-include-dirs= and --extra-lib-dirs= to specify where they are.
cabal: Error: some packages failed to install:
hubris-0.0.4 failed during the configure step. The exception was:
ExitFailure 1
rake aborted!
ERROR: ran cabal update; cd Haskell; cabal install --extra-include-    
dirs=/usr/include/ruby-1.9.1/x86_64-linux --extra-include-dirs=/usr/include/ruby-1.9.1 -
-extra-lib-dirs=/usr/lib --user  --enable-shared  --with-ghc=/usr/local/bin/ghc, got 
Downloading the latest package list from hackage.haskell.org 
```

我还安装了“ruby-dev”，例如

```
apt-get install ruby1.9.1-dev 
```

当我运行 cabal 命令时，错误可能与丢失的头文件和错误的包含目录有关。

.

系统配置：

```
 ubuntu 12.04
 GHC version 7.4.1
 ruby version 1.9.3p0
 gem version 1.8.24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:33:37.213

您应该使用`rake`. 只需`rake`在存储库的根目录中调用即可。构建库的任务将为您找到相关的 ruby​​ 包含目录。

我必须进行一些更改才能使用现代 Haskell（例如 Haskell Platform 2012.2.0.0）进行编译。这些更改可在[https://github.com/dflemstr/Hubris](https://github.com/dflemstr/Hubris)获得。

它适用于 Arch Linux：

```
Arch ... well it's rolling release, so there is no version number
GHC version 7.4.2
ruby version 1.9.3p194 (2012-04-20 revision 35410)
gem version 1.8.23 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:13:32.083

**最终答案！！！一切正常！**

正确答案的功劳归于用户“dflemstr”。但是请查看此答案以获取一些详细信息，尤其是对于 Ubuntu 用户。功劳也归功于 Mark Wotton，因为安装错误主要是由于 Haskell/Cabal 和 Ubuntu 造成的。

_
**要求：（**
使用此设置进行测试，其他版本可能也可以）

1.  Ubuntu 12.04（Arch Linux 也可以）
2.  红宝石 1.9.3p0
3.  GHC 7.4.1
4.  Haskell 平台 2012.2.0.0

_
**红宝石安装**

```
sudo apt-get install libruby1.9.1 libruby1.9.1-dbg libtcltk-ruby1.9.1 ruby1.9.1 ruby1.9.1-dev ruby1.9.1-examples ruby1.9.1-full rubybook rubygems 
```

_
**宝石更新系统（可选）**

```
sudo env REALLY_GEM_UPDATE_SYSTEM=1 gem update --system 
```

_
**修复 Ubuntu**
（错误缺少 C 库：ruby、ruby、ruby）

```
 cd /usr/lib
 ln -s libruby-1.9.1.so ./libruby.so 
```

_
**GHC 安装**
注意：我不使用任何用于 GHC 和 haskell 平台的 ubuntu 包。stackoverflow 上的一些人推荐这个。

[http://www.haskell.org/ghc/download_ghc_7_4_1](http://www.haskell.org/ghc/download_ghc_7_4_1) （按照网站上的说明进行操作）

_
**Haskel 平台安装**
[http://lambda.haskell.org/platform/download/2012.2.0.0/haskell-platform-2012.2.0.0.tar.gz](http://lambda.haskell.org/platform/download/2012.2.0.0/haskell-platform-2012.2.0.0.tar.gz)
（再次按照网站上的说明进行操作）
。

_
**启用对 haskell 包的共享库支持**

添加以下行：*“共享：真”*

```
nano ~/.cabal/config 
```

_
**重新安装每个具有共享支持的 haskell 包**
按照以下说明进行操作：

1.  [将 haskell 解释器（提示）构建为动态库，可在 C++ 中使用：Missing Interpreter.dyn_hi](https://stackoverflow.com/questions/8701583/building-a-haskell-interpreter-hint-as-dynamic-library-useable-from-c-miss)
2.  [Cabal 使用 enable-shared 标志重建所有内容](https://stackoverflow.com/questions/7981350/cabal-rebuild-all-with-enable-shared-flag)

注意：以上说明对我不起作用！！在这种情况下，手动手动重新安装每个包（！）用力：

```
cabal install hint-0.3.3.4 --reinstall --force-reinstall 
```

对每个已安装的软件包重复！例如，还有 mtl 包等。重新安装所需的包可能会出现相同的错误。只需重新安装该软件包和任何递归依赖项。

如果你立即安装 Hubris，即跳过这​​一步，你会得到以下错误（仅在 ubuntu 中，而不是在 arch linux 中）：

```
Language/Ruby/Hubris/LibraryBuilder.hs:13:8:
Could not find module `Control.Monad.Error.Class'
Perhaps you haven't installed the "dyn" libraries for package `mtl-2.0.1.0'?
Use -v to see a list of the files searched for.
cabal: Error: some packages failed to install: 
```

**安装所需的 haskell 包**

```
cabal install c2hs 
```

**安装所需的 ruby​​ 包**

```
sudo gem install rake open4 rspec hoe
sudo gem install bundler
sudo gem install rake-compiler
sudo gem install rspec 
```

**通过 github 获取 Hurbis**

```
git clone https://github.com/dflemstr/Hubris.git 
```

（注意：这只是现在。随着更改被合并，应该拉取 Mark Wotton 的原始 github 版本！）

**修复 Rakefile 以在 ubuntu 中查找 GHC**

*将“/usr/bin/ghc”*更改为*“/usr/local/bin/ghc”*：

```
cd Hubris
nano Rakefile 
```

**运行耙**

```
cd Hubris
rake 
```

如果您在此处收到诸如“也许您尚未安装 'dyn' 库”之类的错误，则可能是由于未重新安装某些软件包（请参见步骤：“重新安装每个具有共享支持的 haskell 软件包”）。

**安装傲慢*

```
cd Hubris
sudo rake install 
```

**安装耙子**

修复权限：

```
chmod -R 777 /var/hubris 
```

注意：不要使用 777！如果这样做，请稍后更改为 755 或 766 等。这只是为了测试！

这是必需的，因为 rake 安装是使用 'sudo' 完成的，但 cabal 软件包是使用不同的用户安装的。Hubris 编译 /var/hubris/ 中的 haskell 文件，除非您更改权限，否则普通用户无法访问该文件。

**运行测试示例** 将以下行添加到“test.rb”：

```
require 'hubris' # best line ever

class Target
  hubris :inline =>"triple::Int->Int; triple n = 10*n"
end

t = Target.new
puts t.triple(3) 
```

*执行 test.rb：*

```
ruby test.rb 
```

*检查结果是否正常：*

控制台输出的最后三行应该是：

```
... many lines and possibly GHC error messages ...
|
error ||
30 
```

如果最后一行是“30”，那么一切正常！！请注意，当您第二次运行该命令时，内联 haskell 不会重新编译，因此输出要短得多，但最后一行仍然是“30”。

**最后的话** 感谢马克沃顿提供傲慢！这是向库添加新功能的绝佳起点。太好了，它是开源的！

# graph - 我对拓扑排序感到困惑

> ID：11493638
> 
> 赞同：1
> 
> 时间：2012-07-15T16:31:55.857
> 
> 标签：graph, topological-sort

我是图论的新手，我是拓扑排序的新手。我所知道的是，要对某些任务进行拓扑排序，我必须对其运行 dfs，然后根据完成时间对顶点进行排序。嗯，我试过了。但不知何故，我得到了错误的答案。

假设一个图有 5 个顶点和 4 条边，边是 1->2、2->3、1->3、1->5，我的代码给出的答案是“4 1 5 2 3”应该给出“1 4 2 5 3”。我的代码有什么问题，或者我的拓扑排序有什么问题吗？

这是我的代码。

```
#include<iostream>
#include<vector>
#include<cstdio>
#include<stack>
#define MAX 100000

using namespace std;

vector<int> adj_list[MAX];
int f[MAX], d[MAX];//discovery time and finishing time
int color[MAX];
int time;
stack<int> stk;

void dfs(int vertex);
void dfs_visit(int u);

int main(void)
{
    freopen("input.txt", "r", stdin);
int vertex, edge;

//I am creating the adjacency list
cin >> vertex >> edge;
for(int i=1; i<=edge; i++)
{
    int n1, n2;
    cin >> n1 >> n2;
    adj_list[n1].push_back(n2);
}

//I am starting the depth-first-search
dfs(vertex);

return 0;
}

void dfs(int vertex)
{
    //If it's 0 then it means white
for(int i=1; i<=vertex; i++)
    if(color[i]==0) dfs_visit(i);

//Here I am printing the vertices
while(stk.size())
{
    cout << stk.top() << " ";
    stk.pop();
}
cout << endl;

return;
}

void dfs_visit(int u)
{
//If it's 1 then it means grey
color[u]=1;
d[u]=++time;

for(int i=0; i<adj_list[u].size(); i++)
{
    int v=adj_list[u][i];
    if(color[v]==0) dfs_visit(v);
}

//If it's 2 then it means black
color[u]=2;
f[u]=++time;

//I am inserting the vertex in the stack when I am finished, searching it
stk.push(u);
} 
```

# c# - 构建此轮询窗口服务的哪个选项更好？

> ID：11493641
> 
> 赞同：0
> 
> 时间：2012-07-15T16:32:00.053
> 
> 标签：c#, .net, wcf, service, polling

我的团队正在编写一个 Windows 服务，该服务需要轮询来自 3rd 方系统的数据（3rd 方系统提供了我们使用的 Web 服务）。
该过程将如下所示：
1\. 调用第 3 方 WS
2\. 将收到的原始数据保存到我们的 DB
3\. 处理原始数据
4\. 将处理后的数据保存到我们的 DB
5\. 重复

团队同意我们实际上有 2 种不同的逻辑操作：
1\. 获取和保存原始数据
2\. 处理原始数据并保存结果

我们正在尝试确定以下哪个设计选项更好：
选项 1：在同一个 windows 服务上执行两个操作，每个操作在它自己的线程上
选项 2：在 windows 服务上执行第一个操作，以及异步/单向为第二个操作调用 wcf 服务

在您看来，哪个选项更好？
如果您有其他您认为更好的选择，请分享。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:40:59.420

这取决于。

鉴于您有一个明显的顺序进程，为什么要使用单独的线程来读取然后处理数据？最简单的方法是一个循环读取、处理它并可能在某个时间点等待的单个线程，这样您就不会受到第三方的速率限制。

但是，如果处理需要很长时间，您可能希望在单个轮询线程和一组处理数据的工作人员之间拆分工作。

最简单的选项通常是您初始实施的正确选项。在需要之前添加线程和 WCF 服务调用很少是正确的做法。

为了提供更好的答案，您确实需要提供更多信息：第三方服务是否限制您一次可以拨打多少电话或拨打电话的速度，处理需要多长时间，您需要多久轮询一次， ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:26:50.657

根据您的评论，我会说您有一个线程，该线程每秒轮询 3rd 方服务并启动两个任务。

任务 1 将原始数据存储到数据库。任务 2 将处理原始数据并将结果存储在数据库中。

如果轮询线程检索到 1000 个条目，它应该立即再次轮询。

您可以使用 System.Threading.ThreadPool 或 System.Threading.Tasks.Task。

# google-apps-script - 调试 Google Apps Script Web App 的有效方法

> ID：11493643
> 
> 赞同：13
> 
> 时间：2012-07-15T16:32:14.097
> 
> 标签：google-apps-script, web-applications

我有一些编写容器绑定脚本的经验，但对 Web 应用程序完全陌生。

如何调试（例如查看变量值、逐步执行代码等）Web 应用程序？在容器绑定脚本中这很容易，因为我可以设置断点，使用应用程序脚本调试器 - 我如何在网页中执行此操作，例如当我执行`doPost`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T22:52:13.203

James Ferreira 在他的优秀著作《Google Script》中提倡用三个浏览器窗口建立自己的开发环境；一个用于代码，一个用于实时视图（在 Publish, Deploy as web app 中，您将获得一个“最新代码”链接，该链接将在刷新实时视图时将其更新为最新保存），以及一个用于电子表格记录错误（使用 try/catch 包裹您想要关注的代码位）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-04T16:41:49.043

在 Web Apps 中，即使是最基本的通过 Logger.log() 调试变量也不起作用！

[Peter Herrmann 的 BetterLog for Apps Script](https://github.com/peterherrmann/BetterLog)是提供至少简单变量日志记录的一个很好的解决方案。它允许您登录电子表格（与您的工作电子表格相同或单独的电子表格）。

安装非常简单——只需添加一个外部资源（参见 Github 自述文件）和一行代码即可覆盖标准 Logger 对象：

```
Logger = BetterLog.useSpreadsheet('your-spreadsheet-key-goes-here'); 
```

**请记住**，您在此处作为参数提供的电子表格将用于日志输出，因此 **任何人都必须可写**！

BetterLog 将在给定的电子表格中创建一个名为“Log”的新工作表，并将每个日志调用写入该工作表的单独行。

# python - 在 python 中安装 Twisted 失败并显示“没有这样的文件”

> ID：11493644
> 
> 赞同：14
> 
> 时间：2012-07-15T16:32:20.197
> 
> 标签：python, linux, twisted

我想在 Python 中使用 Twisted，但是当我安装时，出现此错误，如何处理？

```
....
running build_ext
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c conftest.c -o conftest.o
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c conftest.c -o conftest.o
building 'twisted.runner.portmap' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c twisted/runner/portmap.c -o build/temp.linux-i686-2.7/twisted/runner/portmap.o
twisted/runner/portmap.c:10:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-15T16:36:49.537

您缺少构建需要编译扩展的包所需的 python 开发头文件。

如果您在 OSX 上构建，请确保安装预构建的 mac python 包，或者如果从源代码构建 python，请在配置时使用框架标志。并且还要确保你已经安装了 XCODE 以便你有一个编译器。

如果您在 Linux 上构建，您可能需要安装 python 开发头文件。例如，在 Ubuntu 上，您需要： `apt-get install build-essential python-dev`. 一旦你有了 python 开发头文件，当你使用那个 python 解释器构建时，twisted 应该能够找到它们。

# c# - SemanticZoom ZoomedOutView SelectedItems 返回 DependencyObject

> ID：11493652
> 
> 赞同：1
> 
> 时间：2012-07-15T16:33:30.657
> 
> 标签：c#, .net, windows-8, winrt-xaml

在 SemanticZoom 控件中，我`CollectionViewSource`对放大和缩小视图都使用相同的控件。为此，我将缩小`GridView`的代码绑定在后面的代码中，如下所示：

```
(FavoriteGroupsSemanticZoom.ZoomedOutView as ListViewBase).ItemsSource = this.FavoriteGroupsViewSource.View.CollectionGroups; 
```

一切都按预期工作。但是，现在缩小的 GridView 绑定到 DependencyObjects 列表而不是我的原始组。因此，当我访问 SelectedItems 时，我得到一个 WinRT 对象，其中包含 DependencyObjects 列表而不是我的组。

如何访问缩小的 GridView 的选定组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:10:04.937

您将依赖对象转换为具有属性*Group*和*GroupItems的*[ICollectionViewGroup](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.icollectionviewgroup.aspx)。

# javascript - JavaScript 中对象构造行为的差异

> ID：11493656
> 
> 赞同：0
> 
> 时间：2012-07-15T16:34:10.527
> 
> 标签：javascript, constructor

> **可能重复：**
> [函数表达式与 Javascript 中的声明有什么区别？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

这两种实现之间的行为有什么区别？仍然是`MyType`一个构造函数`Implementation 1`

实施1：

```
var MyType = function() { 

}; 

var myObject = new MyType(); 
```

实施2：

```
function MyType() { 

}

var myObject = new MyType(); 
```

# viewmodel - ZF2：如何将控制器返回传播到布局模板？

> ID：11493660
> 
> 赞同：3
> 
> 时间：2012-07-15T16:34:23.467
> 
> 标签：viewmodel, zend-framework2, zend-framework-mvc

我从控制器返回数据是这样的：

```
/**
 * Password request sent
 *
 * @return array
 */
public function passwordRequestSentAction ()
{
    return array(
        'foo' => $this->bar,
    );
} 
```

但是`$this->foo`在 layout.phtml 中为空，即使它在控制器/密码请求Sent.phtml 中是正确的

我必须在我的抽象控制器中创建 postDispatch 方法并在 attachDefaultListeners() 中链接到它，并在 postDispatch 中执行此操作：

```
$e->getViewModel()->setVariables($e->getResult()->getVariables()); 
```

这真的是要走的路吗？我只想分享我的所有变量，无论是布局还是页面模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:30:12.970

您可以通过调用访问布局模板`$this->layout()`：

```
class MyController extends AbstractActionController
{
    public function myAction()
    {
        $layout = $this->layout();
        // Returns the ViewModel of the Layout
    }
} 
```

有关更多信息和示例，请查看[手册的示例](http://packages.zendframework.com/docs/latest/manual/en/zend.view.html#zend.view.quick-start.usage.layouts)。

但是在大多数情况下，我建议为这些任务编写一个 viewhelper - 特别是导航/... 这封装了控制器的逻辑，用于查看类似`I want the navigation displayed here`or的任务`Show me the user's login box`。几乎所有类型的状态消息也是如此。

# java - 为什么这个spring bean没有初始化？它始终为空。

> ID：11493662
> 
> 赞同：1
> 
> 时间：2012-07-15T16:34:33.017
> 
> 标签：java, web-services, spring, soap, spring-mvc

我配置了一个消息工厂 bean，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:ws="http://www.springframework.org/schema/web-services"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/web-services 
    http://www.springframework.org/schema/web-services/web-services-2.0.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="soapMessageFactory" class="javax.xml.soap.MessageFactory" factory-method="newInstance" />
    <bean id="saajMessageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
            <constructor-arg ref="soapMessageFactory" />
    </bean>

    <bean id="myService" class="com.mypackage.TestEndPoint">
        <property name="saajMessageFactory" ref="saajMessageFactory" />
    </bean> 

</beans> 
```

TestEndpoint 类看起来像这样

```
@Endpoint
public class TestEndPoint {

    ObjectFactory objectFactory = new ObjectFactory();
    SaajSoapMessageFactory saajMessageFactory;

    @PayloadRoot(namespace="http://ws.mypackage.com", localPart="downloadSaajMessageRequest")
    @ResponsePayload
    public JAXBElement<DownloadResponseSaajType> invoke(@RequestPayload DownloadSaajMessageRequest req, MessageContext context ) throws Exception  {

        DownloadResponseSaajType response = new DownloadResponseSaajType();
        //DownloadResponseSaajType.PayLoad payload = new DownloadResponseSaajType.PayLoad();    

        DataHandler handler = new javax.activation.DataHandler(new FileDataSource("c:\\temp\\maven-feather.png"));

            SaajSoapMessage message = saajMessageFactory.createWebServiceMessage();
            message.addAttachment("picture", handler);
            message.addAttachment("picture", handler);

           //payload.setMessagePayLoad(handler);
            //response.setPayLoad(payload);

            response.setRequestName("NAMEOF");
            context.setResponse(message);
            return objectFactory.createDownloadSaajMessageResponse(response); 

    }

    public void setSaajMessageFactory(SaajSoapMessageFactory saajMessageFactory){
        this.saajMessageFactory = saajMessageFactory;
        }

        public SaajSoapMessageFactory getSaajMessageFactory(){
            return saajMessageFactory;
        }
} 
```

我在尝试使端点工作时遇到了一些问题，当我尝试调试代码时，我发现 saajMessageFactory 从未初始化并且始终为空。我是否对配置做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:49:07.920

您必须将 PayloadRootAnnotationMethodEndpointMapping bean 添加到您的配置 xml。

```
<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping"/> 
```

# android - 如何添加存储在 SQLite 中的地图标记？- 安卓

> ID：11493665
> 
> 赞同：0
> 
> 时间：2012-07-15T16:35:36.697
> 
> 标签：android, sqlite, google-maps, google-maps-markers

我将经纬度坐标存储在 sqlite 数据库中。我正在尝试通过光标检索这些并将它们全部放在地图上。我正在尽我所能，但我是新手，需要一点帮助。这是我到目前为止所拥有的：

```
public class allmapactivity extends MapActivity {
MapController mControl;
GeoPoint GeoP;
MapView mapV;
private SQLiteAdapter mySQLiteAdapter;
Cursor cursor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    mapV = (MapView) findViewById(R.id.mapview);
    mapV.displayZoomControls(true);
    mapV.setBuiltInZoomControls(true);
    mapV.setSatellite(false);

    List<Overlay> mapOverlays = mapV.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.pin);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    cursor = mySQLiteAdapter.queueAll5();

    GeoPoint point = new GeoPoint((int) (Double.valueOf(SQLiteAdapter.KEY_CONTENT11) *1E6),(int) (Double.valueOf(SQLiteAdapter.KEY_CONTENT12) *1E6));
    OverlayItem overlayitem = new OverlayItem(point, "Test", "Test");

    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

当我为我的地理点输入静态数字时，所有这些代码都有效，除非我尝试从光标添加数据时，它会强制关闭。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:36:28.783

由于您提供的代码没有从游标中获取数据，因此很难判断出了什么问题。

一般来说，在从任何游标读取之前，您应该始终调用下面的代码。

```
cursor.moveToFirst(); 
```

这是因为它不能保证指向非 NULL 的行。

如果您可以提供更多代码和/或错误消息，则可能更容易确定到底出了什么问题。

# php - URL重写和url参数

> ID：11493668
> 
> 赞同：0
> 
> 时间：2012-07-15T16:35:59.833
> 
> 标签：php, mysql, video, url-rewriting

从一开始到今天，我一直在构建我的网站，没有任何框架或所见即所得的软件。我现在意识到我制作它的方式本来可以简单得多。

我是 php 和 mysql 的菜鸟，希望了解它是如何工作的。这就是为什么我决定制作一个关于特定主题的网站。这是学习这两种语言的最佳实践......

所以，

我的网站每天更新视频内容。

我曾经为每个视频制作一个独特的网页...现在我有 300 多页视频内容，我想将所有这些内容放入我的数据库中，并将它们全部放在一个模板网页中。

当我想应用更改时，我必须打开所有这些网页并在每个页面上进行所需的更改。幸运的是，搜索和替换框对我有帮助。

我只是想在网站上做一些可以让我的日常工作变得更快、更轻松的事情。

我想用mysql请求做一些url重写。

我正在处理一段代码，但我找不到它的问题所在。Dreamweaver 告诉我合成器没有错误，但是当我预览它 (WAMP) 时，它一直向我显示错误，直到去掉“p”参数。下面，我加入你我正在使用的代码。

```
 <?php
include "connect.php";
$id = $_GET["id"]; 
$sql = "SELECT * FROM videos WHERE id=$id LIMIT 1"; //mysql tells me there's a error near LIMIT 1
$req = mysql_query($sql) or die( mysql_error()." ERROR");
$data = mysql_fetch_assoc($req);

if($data["url"]!=$_GET["url"])
{
    header("location:/video/atest.php/".$data["id"]."-".$data["url"]); //if the URL is altered, it will be immediatelly fixed thanks to this function
}
?> 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“LIMIT 1”附近使用正确的语法错误

多亏了这一点，我将能够在我的数据库中插入每个独特视频 > 标题、描述……的每条内容，而无需进行一千次更改并上传新网页。

URL 参数也在我的数据库中，并且 php 脚本调用数据库以检索 URL 并使其看起来像一个独特的网页。

哦，对不起我的英语...

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:50:17.140

尝试

```
$id = mysql_real_escape_string($_GET["id"]); 
$sql = "SELECT * FROM videos WHERE id=$id LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:26:49.400

尝试回声 $_GET["id"]; 在 sql 之前并检查您是否获得任何价值。并且还学习“PDO”，它比使用直接 sql 语句或乔伊斯所说的使用 escape_string 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:15:07.150

更改您的行： $sql = "SELECT * FROM videos WHERE id=$id LIMIT 1";

为此： $sql = "SELECT * FROM videos WHERE id='".$id."' LIMIT 1";

您的 SELECT 选择的是字符串 '$id' 而不是 php 变量 $id。

# android - Android - 如何从 xml 中获取视图并在 Fragment 中使用它？

> ID：11493669
> 
> 赞同：1
> 
> 时间：2012-07-15T16:36:01.147
> 
> 标签：android, android-fragments, android-actionbar, android-gridview

我已经在我的 xml 文件中构建了一个 GridView，现在我想将它填充到一个 Fragment 类中。（此 Fragment 类使用该布局）

用户主页.xml

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/home_gridview"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:layout_below="@+id/user_avatar"
android:paddingTop="16dp"
android:columnWidth="90dp"
android:numColumns="auto_fit"
android:verticalSpacing="10dp"
android:horizontalSpacing="10dp"
android:stretchMode="columnWidth"
android:gravity="center" /> 
```

* * *

```
public class UserHomeFragment extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    return inflater.inflate(R.layout.userhome, container, false);

} 
```

我真的不知道如何拿走我的“home_gridview”，我尝试了一切，但没有奏效！我需要这个，因为我想在我的操作栏选项卡之一中使用它。你能帮我一些代码吗？谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:09:31.153

像这样包裹你的`GridView`内部`LinearLayout`（或其他布局）：

```
<LinearLayout 
GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/home_layout"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:orientation="vertical">
    <GridView android:id="@+id/home_gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:layout_below="@+id/user_avatar"
    android:paddingTop="16dp"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center" />
</LinearLayout> 
```

现在`onCreateView`找到你`GridView`的ID：

```
public class UserHomeFragment extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view =  inflater.inflate(R.layout.userhome, container, false);
    GridView gridView = (GridView) view.findViewById(R.id.home_gridview);//must be your R not android.R
    //use your grid view

   return view;

} 
```

# c# - 找不到命名空间“System.Data.SqlServerCe”

> ID：11493674
> 
> 赞同：23
> 
> 时间：2012-07-15T16:36:42.677
> 
> 标签：c#, asp.net, visual-studio-2008, sql-server-ce

我确实包含了`System.Data.SqlServerCe`dll，放入`using System.Data.SqlServerCe;`了我的代码，但是当我打开 .NET 页面时，我得到：

> 命名空间“System.Data”中不存在类型或命名空间名称“SqlServerCe”（您是否缺少程序集引用？）

我不知道如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-15T16:53:10.553

这可以通过确认以下 2 点来解决：

1.  检查您是否已将`System.Data.SqlServerCe`命名空间添加到应用程序的**References**文件夹中。如果它不存在，您可以右键单击“参考”文件夹并选择“**添加参考**” 选项。从弹出窗口转到**.Net 选项卡**并 `System.Data.SqlServerCe`从列表中选择，然后单击“确定”将命名空间添加到项目中。
2.  如果您对第 1 步没问题，请添加`using System.Data.SqlServerCe;`到使用 System.Data.SqlServerCe 命名空间的代码隐藏文件的顶部。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-25T13:11:13.760

如果你有一个现有的参考，`System.Data.SqlServerCe`但*你看到它旁边有一个**黄色符号***，那么你应该：

*   通过右键单击删除引用。
*   重新添加引用。

**要重新添加：** 右键单击 References 文件夹并选择 Add Reference... 选项。前往大会 | 左侧窗格中的框架选项，然后滚动到`System.Data.SqlServerCe`右侧窗格中。如果它在那里，请单击它，然后确保在单击确定之前选中它旁边的复选框。

如果`System.Data.SqlServerCe`不在列表中，那么您将不得不在您的计算机上浏览它。为此，请单击 Add Reference... 对话框的 Browse... 按钮并尝试查看此文件夹：

```
C:\Program Files\Microsoft SQL server Compact edition\v3.5\Desktop 
```

或者

```
C:\Program Files\Microsoft SQL server Compact edition\v4.0\Desktop 
```

（当您阅读本文时，上述示例中的 v#.# 值可能会有所不同，因此，`C:\Program Files\Microsoft SQL server Compact edition\`如果您知道应该是什么，请先导航到然后选择最新版本或特定版本。）

通过浏览找到它后，选择`System.Data.SqlServerCe.dll`文件并确定您的出路，然后尝试重新编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T12:14:30.927

安装 SQL Compact 服务器，然后直接从您的 Microsoft Compact 数据库/程序文件夹中添加该尊敬的 system.data.SqlServerCe.dll。

你错过了dll。

我相信你已经弄清楚了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T16:38:44.580

检查您的`web.config`文件是否有任何参考，并更正它。它可能是您定义错误的别名。

[这个答案](https://stackoverflow.com/a/937170/759019)可能会解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T01:40:43.707

这已经很晚了。但我也面临同样的问题。
我正在使用**Visual Studio 2012**和**Visual Studio 2017**，我在这里找到了**System.Data.SqlServerCe**。
两个版本的相同目录。

我编辑了@JesiMov 答案。

Right click the **References** folder and select **Add Reference...** option.
Go to the **Assemblies** | **Extensions** option on the left pane, then scroll to System.Data.SqlServerCe in the right pane.

# opencart - 如何在特殊模块中添加倒数计时器（opencart v.1.5.3.1）

> ID：11493675
> 
> 赞同：0
> 
> 时间：2012-07-15T16:36:42.467
> 
> 标签：opencart

我想在主页上显示的特殊模块（opencart 1.5.3.1）中添加倒数计时器。看起来像这样 [http://opencart-themes.com/index.php?route=product/product&product_id=109](http://opencart-themes.com/index.php?route=product/product&product_id=109)

有人愿意帮助我吗？我根据您的代码尝试了几次。它不起作用。我真的很感谢你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-01T13:58:03.063

@Cleverbot 答案很好，但有一些缺失或一些错误代码已建立，正确答案如下：

**第一步**：

编辑目录/模型/目录/product.php。

改变

```
public function getProduct($product_id) {
if ($this->customer->isLogged()) {
    $customer_group_id = $this->customer->getCustomerGroupId();
} else {
    $customer_group_id = $this->config->get('config_customer_group_id');
}   

$query = $this->db->query("SELECT DISTINCT *, pd.name AS name, p.image, m.name AS manufacturer, (SELECT price FROM " . DB_PREFIX . "product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '" . (int)$customer_group_id . "' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT points FROM " . DB_PREFIX . "product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '" . (int)$customer_group_id . "') AS reward, (SELECT ss.name FROM " . DB_PREFIX . "stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '" . (int)$this->config->get('config_language_id') . "') AS stock_status, (SELECT wcd.unit FROM " . DB_PREFIX . "weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS weight_class, (SELECT lcd.unit FROM " . DB_PREFIX . "length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS length_class, (SELECT AVG(rating) AS total FROM " . DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT COUNT(*) AS total FROM " . DB_PREFIX . "review r2 WHERE r2.product_id = p.product_id AND r2.status = '1' GROUP BY r2.product_id) AS reviews, p.sort_order FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN " . DB_PREFIX . "manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '" . (int)$product_id . "' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '" . (int)$this->config->get('config_store_id') . "' ORDER BY p.sort_order, p.date_expires >= NOW(), p.date_expires <= NOW() DESC"); 
```

至

```
public function getProduct($product_id) {
if ($this->customer->isLogged()) {
    $customer_group_id = $this->customer->getCustomerGroupId();
} else {
    $customer_group_id = $this->config->get('config_customer_group_id');
}   

$query = $this->db->query("SELECT DISTINCT *, pd.name AS name, p.image, m.name AS manufacturer, (SELECT price FROM " . DB_PREFIX . "product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '" . (int)$customer_group_id . "' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT date_start FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS date_start, (SELECT date_end FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS date_ends, (SELECT points FROM " . DB_PREFIX . "product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '" . (int)$customer_group_id . "') AS reward, (SELECT ss.name FROM " . DB_PREFIX . "stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '" . (int)$this->config->get('config_language_id') . "') AS stock_status, (SELECT wcd.unit FROM " . DB_PREFIX . "weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS weight_class, (SELECT lcd.unit FROM " . DB_PREFIX . "length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS length_class, (SELECT AVG(rating) AS total FROM " . DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT COUNT(*) AS total FROM " . DB_PREFIX . "review r2 WHERE r2.product_id = p.product_id AND r2.status = '1' GROUP BY r2.product_id) AS reviews, p.sort_order FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN " . DB_PREFIX . "manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '" . (int)$product_id . "' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '" . (int)$this->config->get('config_store_id') . "' ORDER BY p.sort_order, p.date_expires >= NOW(), p.date_expires <= NOW() DESC"); 
```

并在上面的代码搜索下的同一个地方文件

```
'special'          => $query->row['special'], 
```

然后在添加此代码之后

```
'date_ends'          => $query->row['date_ends'],
'date_start'          => $query->row['date_start'], 
```

**第二步：**

然后你需要将值发送到视图文件，你可以在catalog/controller/module/special.php中这样做

```
$this->data['products'][] = array(
        'product_id' => $result['product_id'],
        'thumb'      => $image,
        'name'       => $result['name'],
        'price'      => $price,
        'special'    => $special,
        'rating'     => $rating,
        'reviews'    => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
        'href'       => $this->url->link('product/product', 'product_id=' . $result['product_id']),
    ); 
```

对这个

```
$this->data['products'][] = array(
            'product_id' => $result['product_id'],
            'thumb'      => $image,
            'name'       => $result['name'],
            'price'      => $price,
            'special'    => $special,
            'rating'     => $rating,
            'reviews'    => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
            'href'       => $this->url->link('product/product', 'product_id=' . $result['product_id']),
            'date_start'     => $result['date_start'],
            'date_ends'       => $result['date_ends'],

        ); 
```

**第三步**

在**catalog/view/theme/ *your_theme* /template/module/special.tpl**我们需要做一些事情。我们需要添加倒数脚本，添加倒数计时器，并拉取值。

1) 添加倒计时脚本

将以下代码放在 special.tpl 文件的顶部（**重要**）

```
<?php if ($products) { ?>
<script type="text/javascript">
jQuery.fn.countdown = function (date, options, dateparse) {
options = jQuery.extend({
    lang:{
        years:   [' year, ', ' years, '],
        months:  [' month, ', ' months, '],
        days:    [' day, ', ' days, '],
        hours:   [':', ':'],
        minutes: [':', ':'],
        seconds: ['', ''],
        plurar:  function(n) {
            return (n == 1 ? 0 : 1);
        }
    },
    prefix: "end: ",
    finish: "End!",
    redirect: '',
    dateparse: "2050-01-01 00:00:00" 
}, options);

var timestamp       = Date.parse(options.dateparse);

var timeDifference  = function(begin, end) {
    if(end < begin){
        return false;
    }
    var diff = {
        seconds: [end.getSeconds() - begin.getSeconds(), 60],
        minutes: [end.getMinutes() - begin.getMinutes(), 60],
        hours: [end.getHours() - begin.getHours(), 24],
        days: [end.getDate()  - begin.getDate(), new Date(begin.getYear(), begin.getMonth(), 0).getDate()],
        months: [end.getMonth() - begin.getMonth()-1, 12],
        years: [end.getYear()  - begin.getYear(), 0]
    };

    var result = new Array();
    var flag = false;
    for(i in diff){
        if((i=='seconds' || i=='minutes') && diff[i][0]==0){
            result.push('00' + options.lang[i][options.lang.plurar(diff[i][0])]);
        }else{
            if(flag){
                diff[i][0]--;
                flag = false;
            }       
            if(diff[i][0] < 0){
                flag = true;
                diff[i][0] += diff[i][1];
            }
            if(!diff[i][0]) continue;
            if(i=='days' && diff[i][0]<0){
                diff['days'][0]=Math.abs(1+diff['days'][0]);
                diff['months'][0]++;
            }
            if(i=='years' && diff[i][0]<0)
                return '';
            if((i=='seconds' || i=='minutes') && diff[i][0]<10)
                diff[i][0]  = '0' + diff[i][0];

            if(diff[i][0]!=0)
                result.push(diff[i][0] + '' + options.lang[i][options.lang.plurar(diff[i][0])]);
        }
    }
    return result.reverse().join('');
};
var timeCurrent = function(date){
    var hou     = date.getHours().toString();
    var min     = date.getMinutes().toString();
    var sec     = date.getSeconds().toString();
    hou         = (hou<10)?0+hou:hou;
    min         = (min<10)?0+min:min;
    sec         = (sec<10)?0+sec:sec;
    return hou+':'+min+':'+sec;
};

var elem        = $(this);
var timeUpdate  = function(){
    dateJS      = new Date();

    timestamp   = parseInt(timestamp) + 1000;
    dateJS.setTime(timestamp);

    /*if(elem.parents('.timedependent-form-content').find('#currentTime').length)
        elem.parents('.timedependent-form-content').find('#currentTime').html(timeCurrent(dateJS));*/
    var s       = timeDifference(dateJS, date);
    if(s.length){
        elem.html(options.prefix + s);
    }else{
        clearInterval(timer);
        elem.html(options.finish);
        if(options.redirect != '')
            window.location.href    = options.redirect;
    }       
};
timeUpdate();
var timer = setInterval(timeUpdate, 1000);      
};
</script>
<?php } ?> 
```

2）添加倒数计时器并拉取值。

改变

```
<?php foreach ($products as $product) { ?> 
```

至

```
<?php $now = time();
$count = 0;
foreach ($products as $product) {
$count++; ?> 
```

在你喜欢的地方添加这个：

```
 <?php $time_remaining = $product['date_ends'];
$countdown = strtotime("$time_remaining"); ?>
 <div class="timerbar">
    <h2 id="product<?php echo $count; ?>"></h2>
</div><br/>
<script>
    jQuery("#product<?php echo $count; ?>").countdown(new Date(<?php echo date('Y, m, d, H, i, s',$countdown); ?>), {
                                                            prefix:"",
                                                            finish:"Expired",
                                                            redirect:"",
                                                            dateparse:"<?php echo date('d F Y H:i:s',$now); ?>",
                                                            lang:{
        years:   [' year, ', ' years, '],
        months:  [' month, ', ' months, '],
        days:    [' day, ', ' days, '],
        hours:   [':', ':'],
        minutes: [':', ':'],
        seconds: ['', ''],
        plurar:  function(n) {
            return (n == 1 ? 0 : 1);
        }
    }});
</script> 
```

要自定义输出：

*   `finish`= 过期文本
*   `redirect`= 如果您希望它在到期时重定向，请输入 url
*   `lang`= 更改倒计时输出

所有这些代码都适用于我，希望与您合作

我用 opencart v.1.5.6.4 试过了，它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:05:38.593

**首先，您必须从数据库中获取 date_start 和 date_end。**编辑目录/模型/目录/product.php。

改变

```
public function getProduct($product_id) {
    if ($this->customer->isLogged()) {
        $customer_group_id = $this->customer->getCustomerGroupId();
    } else {
        $customer_group_id = $this->config->get('config_customer_group_id');
    }   

    $query = $this->db->query("SELECT DISTINCT *, pd.name AS name, p.image, m.name AS manufacturer, (SELECT price FROM " . DB_PREFIX . "product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '" . (int)$customer_group_id . "' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT points FROM " . DB_PREFIX . "product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '" . (int)$customer_group_id . "') AS reward, (SELECT ss.name FROM " . DB_PREFIX . "stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '" . (int)$this->config->get('config_language_id') . "') AS stock_status, (SELECT wcd.unit FROM " . DB_PREFIX . "weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS weight_class, (SELECT lcd.unit FROM " . DB_PREFIX . "length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS length_class, (SELECT AVG(rating) AS total FROM " . DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT COUNT(*) AS total FROM " . DB_PREFIX . "review r2 WHERE r2.product_id = p.product_id AND r2.status = '1' GROUP BY r2.product_id) AS reviews, p.sort_order FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN " . DB_PREFIX . "manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '" . (int)$product_id . "' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '" . (int)$this->config->get('config_store_id') . "' ORDER BY p.sort_order, p.date_expires >= NOW(), p.date_expires <= NOW() DESC"); 
```

至

```
public function getProduct($product_id) {
    if ($this->customer->isLogged()) {
        $customer_group_id = $this->customer->getCustomerGroupId();
    } else {
        $customer_group_id = $this->config->get('config_customer_group_id');
    }   

    $query = $this->db->query("SELECT DISTINCT *, pd.name AS name, p.image, m.name AS manufacturer, (SELECT price FROM " . DB_PREFIX . "product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '" . (int)$customer_group_id . "' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT date_start FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS date_start, (SELECT date_end FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS date_ends, (SELECT points FROM " . DB_PREFIX . "product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '" . (int)$customer_group_id . "') AS reward, (SELECT ss.name FROM " . DB_PREFIX . "stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '" . (int)$this->config->get('config_language_id') . "') AS stock_status, (SELECT wcd.unit FROM " . DB_PREFIX . "weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS weight_class, (SELECT lcd.unit FROM " . DB_PREFIX . "length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS length_class, (SELECT AVG(rating) AS total FROM " . DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT COUNT(*) AS total FROM " . DB_PREFIX . "review r2 WHERE r2.product_id = p.product_id AND r2.status = '1' GROUP BY r2.product_id) AS reviews, p.sort_order FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN " . DB_PREFIX . "manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '" . (int)$product_id . "' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '" . (int)$this->config->get('config_store_id') . "' ORDER BY p.sort_order, p.date_expires >= NOW(), p.date_expires <= NOW() DESC"); 
```

**注意：**如果您对此进行了编辑并想保留它们，我只添加了这两个值的部分。

然后你需要将值发送到视图文件，你可以在catalog/controller/module/special.php中这样做

```
 $this->data['products'][] = array(
            'product_id' => $result['product_id'],
            'thumb'      => $image,
            'name'       => $result['name'],
            'price'      => $price,
            'special'    => $special,
            'rating'     => $rating,
            'reviews'    => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
            'href'       => $this->url->link('product/product', 'product_id=' . $result['product_id']),
        ); 
```

改成：

```
 $this->data['products'][] = array(
            'product_id' => $result['product_id'],
            'thumb'      => $image,
            'name'       => $result['name'],
            'price'      => $price,
            'special'    => $special,
            'rating'     => $rating,
            'reviews'    => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
            'href'       => $this->url->link('product/product', 'product_id=' . $result['product_id']),
            'date_start'     => $result['date_start'],
            'date_end'       => $result['date_end'],
        ); 
```

在 catalog/view/theme/*your_theme*/template/module/special.tpl 我们需要做一些事情。我们需要添加倒数脚本，添加倒数计时器，并拉取值。

**1) 添加脚本**- 还有一个 if 语句仅在至少有一个特殊的情况下放置脚本。把它放在你的 tpl 的顶部

```
<?php if ($products) { ?>
<script type="text/javascript">
jQuery.fn.countdown = function (date, options, dateparse) {
    options = jQuery.extend({
        lang:{
            years:   [' year, ', ' years, '],
            months:  [' month, ', ' months, '],
            days:    [' day, ', ' days, '],
            hours:   [':', ':'],
            minutes: [':', ':'],
            seconds: ['', ''],
            plurar:  function(n) {
                return (n == 1 ? 0 : 1);
            }
        },
        prefix: "end: ",
        finish: "End!",
        redirect: '',
        dateparse: "2050-01-01 00:00:00" 
    }, options);

    var timestamp       = Date.parse(options.dateparse);

    var timeDifference  = function(begin, end) {
        if(end < begin){
            return false;
        }
        var diff = {
            seconds: [end.getSeconds() - begin.getSeconds(), 60],
            minutes: [end.getMinutes() - begin.getMinutes(), 60],
            hours: [end.getHours() - begin.getHours(), 24],
            days: [end.getDate()  - begin.getDate(), new Date(begin.getYear(), begin.getMonth(), 0).getDate()],
            months: [end.getMonth() - begin.getMonth()-1, 12],
            years: [end.getYear()  - begin.getYear(), 0]
        };

        var result = new Array();
        var flag = false;
        for(i in diff){
            if((i=='seconds' || i=='minutes') && diff[i][0]==0){
                result.push('00' + options.lang[i][options.lang.plurar(diff[i][0])]);
            }else{
                if(flag){
                    diff[i][0]--;
                    flag = false;
                }       
                if(diff[i][0] < 0){
                    flag = true;
                    diff[i][0] += diff[i][1];
                }
                if(!diff[i][0]) continue;
                if(i=='days' && diff[i][0]<0){
                    diff['days'][0]=Math.abs(1+diff['days'][0]);
                    diff['months'][0]++;
                }
                if(i=='years' && diff[i][0]<0)
                    return '';
                if((i=='seconds' || i=='minutes') && diff[i][0]<10)
                    diff[i][0]  = '0' + diff[i][0];

                if(diff[i][0]!=0)
                    result.push(diff[i][0] + '' + options.lang[i][options.lang.plurar(diff[i][0])]);
            }
        }
        return result.reverse().join('');
    };

    var timeCurrent = function(date){
        var hou     = date.getHours().toString();
        var min     = date.getMinutes().toString();
        var sec     = date.getSeconds().toString();
        hou         = (hou<10)?0+hou:hou;
        min         = (min<10)?0+min:min;
        sec         = (sec<10)?0+sec:sec;
        return hou+':'+min+':'+sec;
    };

    var elem        = $(this);
    var timeUpdate  = function(){
        dateJS      = new Date();

        timestamp   = parseInt(timestamp) + 1000;
        dateJS.setTime(timestamp);

        /*if(elem.parents('.timedependent-form-content').find('#currentTime').length)
            elem.parents('.timedependent-form-content').find('#currentTime').html(timeCurrent(dateJS));*/
        var s       = timeDifference(dateJS, date);
        if(s.length){
            elem.html(options.prefix + s);
        }else{
            clearInterval(timer);
            elem.html(options.finish);
            if(options.redirect != '')
                window.location.href    = options.redirect;
        }       
    };
    timeUpdate();
    var timer = setInterval(timeUpdate, 1000);      
};

</script>
<?php } ?> 
```

改变

```
<?php foreach ($products as $product) { ?> 
```

至：

```
<?php $now = time();
$count = 0;
foreach ($products as $product) {
$count++; ?> 
```

在你喜欢的地方添加这个：

```
<?php $time_remaining = $result['date_end'];
    $countdown = strtotime("$time_remaining"); ?>

  <div class="timerbar">
        <h2 id="product<?php echo $count; ?>"></h2>
    </div><br/>
    <script>
        jQuery("#product<?php echo $count; ?>").countdown(new Date(<?php echo date('Y, m, d, H, i, s',$countdown); ?>), {
                                                                prefix:"",
                                                                finish:"Expired",
                                                                redirect:"",
                                                                dateparse:"<?php echo date('d F Y H:i:s',$now); ?>",
                                                                lang:{
            years:   [' year, ', ' years, '],
            months:  [' month, ', ' months, '],
            days:    [' day, ', ' days, '],
            hours:   [':', ':'],
            minutes: [':', ':'],
            seconds: ['', ''],
            plurar:  function(n) {
                return (n == 1 ? 0 : 1);
            }
        }});
    </script> 
```

**要自定义输出：**

*   `finish`= 过期文本
*   `redirect`= 如果您希望它在到期时重定向，请输入 url
*   `lang`= 更改倒计时输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:40:19.243

谢谢，代码如下：

```
public function updateViewed($product_id) {
    $this->db->query("UPDATE " . DB_PREFIX . "product SET viewed = (viewed + 1) WHERE product_id = '" . (int)$product_id . "'");
}

public function getProduct($product_id) {
    if ($this->customer->isLogged()) {
        $customer_group_id = $this->customer->getCustomerGroupId();
    } else {
        $customer_group_id = $this->config->get('config_customer_group_id');
    }   

    $query = $this->db->query("SELECT DISTINCT *, pd.name AS name, p.image, m.name AS manufacturer, (SELECT price FROM " . DB_PREFIX . "product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '" . (int)$customer_group_id . "' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM " . DB_PREFIX . "product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '" . (int)$customer_group_id . "' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT points FROM " . DB_PREFIX . "product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '" . (int)$customer_group_id . "') AS reward, (SELECT ss.name FROM " . DB_PREFIX . "stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '" . (int)$this->config->get('config_language_id') . "') AS stock_status, (SELECT wcd.unit FROM " . DB_PREFIX . "weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS weight_class, (SELECT lcd.unit FROM " . DB_PREFIX . "length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS length_class, (SELECT AVG(rating) AS total FROM " . DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT COUNT(*) AS total FROM " . DB_PREFIX . "review r2 WHERE r2.product_id = p.product_id AND r2.status = '1' GROUP BY r2.product_id) AS reviews, p.sort_order FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN " . DB_PREFIX . "manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '" . (int)$product_id . "' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '" . (int)$this->config->get('config_store_id') . "'");

    if ($query->num_rows) {
        $query->row['price'] = ($query->row['discount'] ? $query->row['discount'] : $query->row['price']);
        $query->row['rating'] = (int)$query->row['rating'];

        return $query->row;
    } else {
        return false;
    }
} 
```

# iphone - 从电子邮件附件解析 XML

> ID：11493676
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:36:45.930
> 
> 标签：iphone, xml, email-attachments

有没有办法直接从我的应用程序解析附加到电子邮件的 XML？我已经实现了一个解析器，它从文档路径中读取它，但希望允许用户也能够直接从电子邮件附件中获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:46:17.213

假设您不想将其限制为越狱文件，最简单的方法是使用数据格式的扩展名注册文件类型（[Apple docs](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)），如果它是通用 XML 或其他类型，则为 XML使其特定于您的应用程序（请记住，如果您注册 XML，您将获得所有 XML，而不仅仅是您的），然后用户可以单击扩展程序并获得“在...中打开”菜单，您的应用程序显示在列表。您需要使用 application:didFinishLaunchingWithOptions:，但这都在文档中。

一个更好的选择是给它一个不被其他任何东西常用的文件类型，这样你的就是列表中唯一的一个。我的 iPad 上有 4 个用于打开 XML 的应用程序

没有办法自动做到这一点。

# c# - 适用于除 Firefox 之外的所有浏览器的 ASP.NET TreeView 代码

> ID：11493682
> 
> 赞同：1
> 
> 时间：2012-07-15T16:37:41.920
> 
> 标签：c#, javascript, asp.net, firefox, treeview

以下 .NET 4.0 代码在 IE9、Chrome 20 和 Opera 12 中完美运行，但在 Firefox 13 中却惨遭失败。所有浏览器都是默认安装，没有插件。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server"><title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
       <asp:TreeView ID="Treeview1" Runat="server" 
            onclick="javascript:postBackByObject()"
            ontreenodecheckchanged="Treeview1_TreeNodeCheckChanged" 
            ShowCheckBoxes="All" >
            <Nodes>
              <asp:TreeNode Value="Child1" Expanded="True" Text="1">
                <asp:TreeNode Value="Grandchild1" Text="A" />
                <asp:TreeNode Value="Grandchild2" Text="B" />
             </asp:TreeNode>
               <asp:TreeNode Value="Child2" Text="2" />
               <asp:TreeNode Value="Child3" Expanded="True" Text="3">
               <asp:TreeNode Value="Grandchild1" Text="A" />
             </asp:TreeNode>
            </Nodes>
       </asp:TreeView>
       <asp:TextBox ID="TextBox1" runat="server" Height="156px" TextMode="MultiLine" 
            Width="295px"></asp:TextBox>
    </div>
    </form>
 </body>
  <script language="javascript" type="text/javascript">
      function postBackByObject() {
         var o = window.event.srcElement;
         if (o.tagName == "INPUT" && o.type == "checkbox") {
             __doPostBack("", "");
         }
     }
 </script>
 </html> 
```

我正在尝试使用以下代码捕获 TreeNode 复选框事件：

```
 protected void Treeview1_TreeNodeCheckChanged(object sender, TreeNodeEventArgs e)
  {
     TextBox1.Text += e.Node.Text;
  } 
```

这很烦人 - 欢迎任何解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:22:39.807

try handling the event more generically, so it works in both FF and other browsers.

e.g.

```
onclick="javascript:postBackByObject(event)"

function postBackByObject(e) {
    var evt = e || window.event;
    var o = evt.target || evt.srcElement; 
    if (o.tagName == "INPUT" && o.type == "checkbox") {
        __doPostBack("", "");
    }
} 
```

*edit* i forgot to add a line for target / srcElement

# ruby-on-rails - 无法批量分配受保护的属性：category_ids

> ID：11493684
> 
> 赞同：3
> 
> 时间：2012-07-15T16:37:59.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, nested-forms, simple-form

我正在使用 simple_form，我只想使用分类表在类别和文章之间创建关联。

但我有这个错误：无法批量分配受保护的属性：category_ids。app/controllers/articles_controller.rb:36:in `update'

**文章控制器.rb**

```
def update
    @article = Article.find(params[:id])
      if @article.update_attributes(params[:article]) ---line with the problem
        flash[:success] = "Статья обновлена"
        redirect_to @article
      else
        render :edit
      end
end 
```

**文章.rb**

```
has_many :categorizations
has_many :categories, through: :categorizations 
```

**类别.rb**

```
has_many :categorizations
has_many :articles, through: :categorizations 
```

**分类.rb**

```
belongs_to :article
belongs_to :category 
```

分类有 article_id 和 category_id 字段。

我的 _form.html.erb

```
<%= simple_form_for @article, html: { class: "form-horizontal", multipart: true } do |f| %>
  <%= f.error_notification %> 
  <%= f.input :title %>
  <%= f.association :categories %>
  <%= f.input :teaser %>
  <%= f.input :body %>
  <%= f.input :published %>
 <% if @article.published? %>
   <%= f.button :submit, value: "Внести изменения" %>
 <% else %>
   <%= f.button :submit, value: "Опубликовать" %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:58:38.143

您在 article.rb 中有 attr_accessible 吗？

如果是这样添加

```
 attr_accessible :title, :category_ids 
```

还要确保你真的想要所有形式的这个......如果不添加这个：

```
 attr_accessible :title, :category_ids, :as => :admin 
```

然后

```
@article = Article.new
@article.assign_attributes({ :category_ids => [1,2], :title => 'hello' })
@article.category_ids # => []
@article.title # => 'hello'

@article.assign_attributes({ :category_ids => [1,2], :title => 'hello' }, :as => :admin)
@article.category_ids # => [1,2]
@article.title # => 'hello'
@article.save 
```

或者

```
@article = Article.new({ :category_ids => [1,2], :title => 'hello' })
@article.category_ids # => []
@article.title # => 'hello'

@article = Article.new({ :category_ids => [1,2], :title => 'hello' }, :as => :admin)
@article.category_ids # => [1,2]
@article.title # => 'hello'
@article.save 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T16:57:41.600

创建的表单域

```
<%= f.association :categories %> 
```

将要设置属性`category_id`，但属性是受保护的。在您的模型中，您应该有一行代码如下所示：

```
attr_accessible :title, :teaser, :body, :published 
```

这些属性允许批量分配。如果要设置表单，`category_id`则必须将这些属性添加到`attr_accessible`方法中：

```
attr_accessible :title, :teaser, :body, :published, :category_id 
```

这应该可以解决您的问题。

# c# - 在 EventStore 中搜索流

> ID：11493685
> 
> 赞同：6
> 
> 时间：2012-07-15T16:38:01.993
> 
> 标签：c#, .net, domain-driven-design, eventstoredb

是否可以通过其他 Stream 属性而不是 StreamId 来搜索流？例如，如果每个流的 Headers 中都有 CustomerId，我想搜索具有特定 CustomerId 的所有流。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T00:19:10.973

事件存储旨在支持仅通过实体的键进行检索。为了支持通过其他属性进行检索，数据以最终一致的、非规范化的方式索引，专门针对每个用例和单独的位置。因此，事件存储仅存储事件并支持查询任何排序索引投影。这些有点像关系数据库中的持久视图，但它们可以存储在简单的键值存储中。事件存储和投影存储共同构成了[CQRS](http://martinfowler.com/bliki/CQRS.html) +[事件](http://martinfowler.com/eaaDev/EventSourcing.html)溯源架构背后的基础设施的一部分。查看[此处](http://abdullin.com/cqrs/)和该博客的其余部分，了解有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:25:03.570

您可能正在尝试错误地使用事件存储。事件存储仅用于保存和读取已提交事件流以重建事件源聚合。实现提供了用于方便地实现基础设施关注点的标头，例如请求/响应相关 ID、审计、安全等。如果您发现自己在其中放置了业务属性（例如客户 ID），那么您可能需要按照 @eulerfx 的建议构建读取模型。

如果它是您要查找的 ID，那么您应该考虑将 CustomerID 设为该客户的实际事件流 ID。通过 ID 加载特定客户正是您期望事件存储执行的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-01T19:53:39.137

EventStore 现在有可以做你正在寻找的预测。请参阅此博客了解详细信息

[http://geteventstore.com/blog/20130227/projections-6-an-indexing-use-case/](http://geteventstore.com/blog/20130227/projections-6-an-indexing-use-case/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T15:45:45.833

尽管它可能不是查找某些内容的最有效方式，但如果您确实需要一个流列表以便您可以搜索它们或找到特定的流，则有一个 $streams 系统投影，但需要先启用它才能使用它使用类似这样的PowerShell：

```
uri$ = http://${EventStoreIP}:${EventStoreHttpPort}/projection/${projection}/command/enable

$result = Invoke-WebRequest -Method Post -Uri $uri -UseBasicParsing -TimeoutSec 90 -Headers @{
    Authorization = Get-BasicAuthCredentials
} 
```

其中 $projection 是“$streams”。另请查看可以以相同方式启用的其他系统投影，这可能会更准确地提供您需要的内容，这些内容在此处记录：[https ://eventstore.org/docs/projections/system-projections/](https://eventstore.org/docs/projections/system-projections/)

# c# - 我需要在 wp7 中使用 xml 和 webclient 进行输入

> ID：11493686
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:02.827
> 
> 标签：c#, windows-phone-7, webclient

无论如何要阅读特定的行吗？

[http://i.stack.imgur.com/hDPIg.jpg](http://i.stack.imgur.com/hDPIg.jpg)

```
 XDocument dataFeed = XDocument.Parse(e.Result);

                AchivementsListBox.ItemsSource = from query in dataFeed.Descendants("MaxPayne3")
                                                 select new NewGamesClass
                                                 {
                                                     GameGuide = (string)query.Element("Guide")

                                                 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:50:27.863

```
// It Will Download The XML Once To Use further to Avoid Again And Again Calls For Each Time

public void GetXML(string path)
            {
                WebClient wcXML = new WebClient();
                wcXML.OpenReadAsync(new Uri(path));
                wcXML.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient);
            }

void webClient(object sender, OpenReadCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                try
                {
                    Stream Resultstream = e.Result;
                    XmlReader reader = XmlReader.Create(Resultstream);

                        var isolatedfile = IsolatedStorageFile.GetUserStoreForApplication();
                        using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream("Download.xml", System.IO.FileMode.Create, isolatedfile))
                        {
                            byte[] buffer = new byte[e.Result.Length];
                            while (e.Result.Read(buffer, 0, buffer.Length) > 0)
                            {
                                stream.Write(buffer, 0, buffer.Length);
                            }
                            stream.Flush();
                            System.Threading.Thread.Sleep(0);
                        }
                }

                catch (Exception ex)
                {
                    //Log Exception
                }
            }

            if (e.Error != null)
            {
                //Log Exception
            }
        }

// This Method Will Give You Required Info According To Your Tag Like "Achievement123"

protected List<DownloadInfo> GetDetailFromXML(string TagName)
        {
            //TagName Like "achivement23"
            List<DownloadInfo> listDetails = new List<DownloadInfo>();

            XDocument loadedData;
            try
            {
                using (var storage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    // Check For Islated Storage And Load From That
                    if (storage.FileExists("Download.xml"))
                    {
                        using (Stream stream = storage.OpenFile("Download.xml", FileMode.Open, FileAccess.Read))
                        {
                            loadedData = XDocument.Load(stream);
                            //TagName Like "achivement23"
                            listDetails.AddRange((from query in loadedData.Element("GOW1").Elements(TagName)
                                                  select new DownloadInfo
                                                  {
                                                      TITLE = (string)query.Element("TITLE"),
                                                      DESCRIPTION = (string)query.Element("DESCRIPTION"),
                                                      ACHIVEMENTIMAGE = (string)query.Element("ACHIVEMENTIMAGE"),
                                                      GUIDE = (string)query.Element("GUIDE"),
                                                      YOUTUBELINK = (string)query.Element("YOUTUBELINK")
                                                  }).ToList());
                        }
                    }
                }
                return listDetails;
            }
            catch (Exception ex)
            {
                return listDetails = null;
                //Log Exception
            }
        }

        public class DownloadInfo
        {
            public string TITLE { get; set; }
            public string DESCRIPTION { get; set; }
            public string GUIDE { get; set; }
            public string ACHIVEMENTIMAGE { get; set; }
            public string YOUTUBELINK { get; set; }
        } 
```

这是您的方法调用

```
GetXML("ANY URL FROM WHERE YOU WANT TO GET XML"); // You Will Download All The XML Once To Avoid Again And Again Server Calls To Get XML. 

GetDetailFromXML("YOUR TAG NAME"); // It Will Take Your Tag Name Which Information You Want To Get Like "Acheicement123" and It Will Return You Data In List<DownloadInfo> and You can easily get data from this List. 
```

我希望它会帮助你。我没有在运行时测试代码。但我希望它会给你一些想法.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:40:59.553

我将使用单个`WebClient`实例来下载文件，并将其简化为单个事件处理程序。更重要的是，据我所知，你有一个类似的文档结构。这意味着您还可以重复使用您的阅读代码，而不是编写两次。

像这样的东西：

```
void Download(GameType type, Action onCompletion)
{
    WebClient client = new WebClient();
    client.DownloadProgressChanged += (s, args) =>
    {
        // Handle change in progress.
    };

    client.DownloadStringCompleted += (s, args) =>
    {
        XDocument feed = XDocument.Parse(args.Result);

        var itemSource = from query in feed.Root
                                      select new NewGamesClass
                                      {
                                          NewGameTitle = (string)query.Element("Title"),
                                          NewGameDescription = (string)query.Element("Descript
                                          NewGameImage = (string)query.Element("Image")
                                      };
        switch (type)
        {
            case GameType.ComingSoon:
                {
                    ComingSoonList.ItemSource = itemSource;
                }
            case GameType.NewGames:
                {
                    NewGameList.ItemSource = itemSource;
                }

        }

        if (onCompletion != null)
            onCompletion();
    };

    switch (type)
    {
        case GameType.NewGames:
            {
                client.DownloadStringAsync(new Uri("http://microsoft.com", UriKind.Absolute));
                break;
            }
        case GameType.ComingSoon:
            {
                client.DownloadStringAsync(new Uri("http://www.bing.com", UriKind.Absolute));
                break;
            }
    }
} 
```

虽然代码可能看起来有点复杂，但它允许您在下载特定数据集时递归下载数据。显然，您必须声明`GameType`枚举，我只是在这里使用了一堆测试值来演示这个想法。

# php - 将自定义内容添加到 wordpress 主题模板

> ID：11493687
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:02.990
> 
> 标签：php, html, wordpress, wordpress-theming

我正在自定义主题（样式、CSS 等）。但是，我遇到了一个小问题，基本上我不想在主页/索引模板的顶部包含介绍性消息，然后在主题选项面板中将其作为选项（文本区域）。我该怎么做。抱歉，这个问题很简单，还没有找到任何直接的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:41:13.167

这是一个重要的定制，需要更改主题的 PHP 代码。您需要一名 PHP 程序员，最好是了解 WordPress 的程序员。

# sql-server - 使用 SQL Server Management Studio 连接到 SQL Server 时出错

> ID：11493688
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:03.853
> 
> 标签：sql-server, sql-server-2008, ssms

我一直在尝试使用 SQL Server Management Studio 连接到 SQL Server，但无济于事。

这就是错误所说的：

> 无法连接到 .\HAMED。
> 
> 附加信息：
> 
> 用户“HAMED”登录失败。（Microsoft SQL Server，错误：18456）

我有一个 SQL Server 实例，其名称`Hamed`以`Network Sevice`模式运行。我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:00:07.327

我猜您在安装过程中没有授予自己 SQL 管理员权限，但是您确定数据库实例是“HAMED”吗？这听起来像机器名称。尝试连接到 .\sqlexpress

您还记得 SA 密码吗？如果是这样，您可以通过使用该帐户登录来添加自己。否则，您将不得不跳过一些循环来让自己加入。

如果您忘记将自己添加到 SQL 管理员组，请阅读这篇文章：

[http://blogs.amerieach.com/chris-randall/2009/12/11/sql-server-2008-forgot-to-add-an-administrator-account.html](http://blogs.ameriteach.com/chris-randall/2009/12/11/sql-server-2008-forgot-to-add-an-administrator-account.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:26:32.737

看起来您正在尝试在 SSMS 的登录对话框中使用“SQL Server 身份验证”，但您尝试使用的用户是 Windows 用户/管理员？如果是这样，修复应该像在下拉菜单中选择“Windows 身份验证”一样简单。

更新：看起来我是开枪了——[这个 sql server 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/sqlsecurity/thread/c3e0713c-b4e6-400e-9ba2-448cd5bf3cb8/)列出了很多可能的问题，包括权限问题、孤儿用户等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T07:32:40.970

萨……答案是萨。

我已经设置了管理密码，但不知道要使用的用户名。非常牛，我知道，你以后可以用它打我。

当我安装 SQL 时，它要求我设置管理密码 - 现在 SSMS 可以登录。

在 users 我看到 1\cory （1 是我的机器名称 - 我正在尝试编号方案）。但是，如果我在其中输入它会失败并出现错误。SQL 说“不，那是 NT 登录，我不能使用那些”。

在用户列表下，SQL 实际上确实将用户显示为 Windows 身份验证，但正如我所说 - 由于某种原因，我无法使用 Windows 身份验证进行连接。连接超时。

我将在这里添加一个直接的用户名。

这一切都是为了做 SQL 认证的 MSVA 课程。第一次考试：让 sql SSMS 工作。

# android - RelativeLayout - 在另一个嵌套视图中引用 id - 这可能吗？

> ID：11493693
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:25.723
> 
> 标签：android, android-relativelayout

是否可以在 TV2 相对于 TV1 的情况下执行类似的操作，其中 TV1 和 TV2 位于布局的不同分支中？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/RV1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/TV01"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:text="test text" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/RV2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/RV1" >

        <TextView
            android:id="@+id/TV02"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_toRightOf="@+id/TV01"  <--------- this references TV01 within the top RelativeView !!!
            android:text="other text" />
    </RelativeLayout>

</RelativeLayout> 
```

在此示例中，该语句`android:layout_toRightOf="@+id/TV01"`似乎不起作用，因为`TV01`它位于另一个 RealtiveLayout 分支中，而不是`TV02`.

**有没有办法以某种方式进行这样的引用？**

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:41:21.247

不，您不能像那样使用 RelativeLayout 定位。然而：

*   你可以结合`RV1`和`RV2`

或者

*   你可以定位`RV2`到右边`RV1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:40:40.420

这是一个简化的例子吗？或者这是你的实际布局。如果是后者，您应该能够通过将 rel2 更改为如下方式来达到相同的效果：

```
<RelativeLayout
    android:id="@+id/RV2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/RV1"
    android:layout_toRightOf="@+id/RV1" > 
```

# iphone - 控制iphone相机快门速度

> ID：11493694
> 
> 赞同：1
> 
> 时间：2012-07-15T16:38:40.697
> 
> 标签：iphone

如何构建像slowshutter这样的应用程序？我的确切问题是如何像在此应用程序中那样控制 ios 相机的快门速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:49:56.540

数码 iPhone 相机没有任何快门。快门速度是用于表示曝光时间的常用术语，在 iPhone 相机上无法更改。慢快门基本上是在设定的曝光时间内拍摄多张照片，并将这些图像合并为一张图像（光迹功能）。第一张图片完全显示，后面的图片在顶部递增显示。

例如，假设 iPhone 在设定的曝光时间内拍摄了三张照片：

![1](../Images/34c514b46ca49c609a3fa7740391e6fb.png)
![2](../Images/4403bdbc00d349ce808841423d160874.png)
![3](../Images/6040451ff08d155cbe64f6b00a7cfba9.png)

第一张图片完全使用，以下仅增量：

![1](../Images/34c514b46ca49c609a3fa7740391e6fb.png)
![2 2](../Images/5cad3f20dc8d1f2e845af8a755586fa0.png)
![3 2](../Images/382174ca2bb715e08d4efd6cd54ea6c7.png)

结果如下：

![4](../Images/1ecc7874e5141de4261de567321d5dc9.png)

如果快门设置为 5 秒，则每 200 毫秒拍摄 25 张照片。
像上面描述的那样合并图片，你就完成了:)

该`GPUImage`项目可能会简化实施：
[https ://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)
[http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)

# php - ajax更新到数据库

> ID：11493696
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:50.877
> 
> 标签：php, jquery, ajax

我正在尝试将数据添加到数据库中，但由于某种原因它并不总是有效。我会说 80% 的时间它会工作，我会在数据库中看到结果，但有时它就像脚本无法运行一样。

这是阿贾克斯：

```
 <script type="text/javascript">
    $(document).ready(function () {
      $(function () {
        $('.error').hide();
        $("#success").hide();
        $(".button").click(function () {
          $('.error').hide();
          var name = $("input#name").val();
          if (name == "") {
            $("label#name_error").show();
            $("input#name").focus();
            return false;
          }
          $.ajax({
            type: 'POST',
            url: "class/proccess.php",
            data: $("input#name"),
            cache: false,
            success: function () {
              $("#success").fadeIn(200).show();
            }
          });
        });
      });
    });
    </script> 
```

这是html：

```
<div id = "contact_form">
  <form name ="contact" action="">
    <fieldset>
      <label for="name" id="name_label">Name</label>
      <input type="text" name="name" id="name" size="30" value="" class="text-input" />
      <label class="error" for="name" id="name_error">This field is required.</label> 
      <br />
      <input type="submit" name="submit" class="button" id="submit_btn" value="send" />
    </fieldset>
    <span id="success"> the name has been updated successfully!</span>  
  </form>
</div>
<div id ="upd"></div> 
```

这是 proccess.php 文件：

```
<?php
$va = $_POST["name"];
$dbconnection =  mysql_connect('adatabase','someuser','somepw');
  if(!mysql_select_db('some_database', $dbconnection)) {
      echo mysql_error();
  }
    else
    {
        echo 'connection success';
    }
$sql = "INSERT INTO some_db(text) VALUES ('$va')";
$result = mysql_query($sql) or die('erreur sql!'.mysql_error());
if(!$result) {
    echo "not working";
}
else {
    echo "working";
}
?> 
```

那么为什么它并不总是插入到数据库中呢？

有没有办法从 php if(!$result) 中获取结果以显示在 ajax 的成功部分中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:43:25.457

如果有时它不起作用，您需要检查返回的字符串是否有错误。使用 AJAX 的正确方法如下。

您可以在成功回调中包含一个参数，该参数将从 PHP 获取页面结果。

代替

```
 success: function () {
     ...
   } 
```

利用

```
success: function (data) {
       alert(data);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:48:17.793

在调试时，请确保启用了 MySQL 错误。

在您的 Ajax 成功处理程序的 Javascript 中，使用从调用返回的文本显示警报。这样，如果 MySQL 出现错误，您就会看到它。

另一件事是，可以将数据库中的“文本”字段设置为唯一吗？在这种情况下，尝试插入带有重复字符串的新记录会失败。

而且...该字段的名称不是真正的“文本”吗？我建议避免使用与 MySQL 的基本数据类型相同的字段名称。如果没有其他原因，只是为了避免混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T16:44:11.153

您实际上是在将一个 jQuery-Object 传递给您的 PHP-File。

```
$.post("class/proccess.php", { 
name: $("input#name").val() //Pass val() not the whole jQuery-Object!
}, function() { 
/* success */ 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T16:47:36.130

将您的 ajax 调用更改为：

```
 $.ajax({
        type: 'POST',
        url: "class/proccess.php",
        data: {name : $("input#name").val()},
        cache: false,
        success: function () {
          $("#success").fadeIn(200).show();

        } 
```

这样 $_POST['name'] 设置为您输入框的值。

此外，按照建议，您应该将 mysql 函数更改为[mysqli](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)函数，以帮助防止 sql 注入。

# android - 如何将 ListFragment 的内容居中

> ID：11493697
> 
> 赞同：0
> 
> 时间：2012-07-15T16:38:52.577
> 
> 标签：android

我有一个简单的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center_horizontal"
    android:orientation="horizontal" >
   <fragment class="my.test.package.CitiesFragment"
      android:id="@+id/cities" android:layout_weight="4" 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content"      
      android:layout_gravity="center_vertical|center_horizontal"
      />
  //....
   </LinearLayout> 
```

在左边你可以看到我有一个列表片段，我用城市填充它。Listfragment 由简单的自定义适配器组成：

```
setListAdapter(new CitiesArrayAdapter<String>(getActivity(), R.layout.city_list_item, citiesArrayList)); 
```

city_list_item.xml 是：

```
<my.test.package.VerticalTextView xmlns:android="http://schemas.android.com/apk/res/android"
        style="@style/verticalTextStyle"
        android:id="@+id/VerticalTextView" android:layout_width="fill_parent"
    android:layout_height="fill_parent"         
    android:gravity="center_horizontal|center_vertical"
    android:layout_gravity="center_horizontal|center_vertical"          
    android:background="@android:color/black"
    android:textColor="@android:color/white"
        /> 
```

VerticalTextView 类取自这个网站。代码在这里： [VerticalTextView 类](https://stackoverflow.com/questions/11435170/android-vertical-textview-with-image-next-to-it/11493549#1149354)

这是我到目前为止所拥有的： ![在此处输入图像描述](../Images/e1a3374b716037dee4ff64819ab6dc10.png)

正如您从图片中看到的那样，城市是左对齐的。我怎样才能以这些城市为中心？？？这让我发疯了！

***** 发现问题：它在verticaltextview 类中：canvas.translate(getCompoundPaddingLeft(), getExtendedPaddingTop());**

getCompoundPaddingLeft right top bottom 总是返回 30 ，布局变得一团糟。有谁知道为什么？？？？？？？？？或如何解决？

# .net - .NET 正则表达式性能

> ID：11493698
> 
> 赞同：1
> 
> 时间：2012-07-15T16:38:57.133
> 
> 标签：.net, regex, performance, regex-group

目前，我正在使用以下正则表达式从 Outlook HTML 邮件项目中删除第一个对话项目：

```
.*?>(([^:]+?):<.*?\2): 
```

为了删除第一个对话项，我只需将组 1 的第一次出现替换为组 2 的值。在 .NET 中看起来有点像这样：

```
private static readonly Regex LAST_CONVERSATION_REPLACE_PATTERN = new Regex(@".*?>(([^:]+?):<.*?\2):", RegexOptions.Compiled);
// ...
MatchCollection matches = LAST_CONVERSATION_REPLACE_PATTERN.Matches(htmlMessageBody);
if (matches.Count > 0)
{
    Match match = matches[0];
    if (match.Groups.Count > 2)
    {
        return htmlMessageBody.ReplaceFirst(match.Groups[1].ToString(), match.Groups[2].ToString());
    }
} 
```

`ReplaceFirst`是我自己的字符串扩展方法。不过，这次的表现有点让人失望。虽然 Regex Coach 可以在一微秒内将其应用于大型邮件项目，但在 Outlook 加载项中最多需要 10 秒。

如果我用这个明确的替代方案替换模式，性能会显着提高：

```
.*?>(From:<.*?From): 
```

使用该正则表达式，只需不到一秒钟的时间就可以得到我想要的。但是，这将是特定于语言的，因此我更喜欢以前的变体。有什么方法可以加快 .NET 的速度吗？或者是否有第三方正则表达式库可以在这个库上表现更好？

感谢您的任何建议和最好的问候

帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:47:05.393

我真的不能说缓慢的原因可能是什么（如果您发布了一些 Outlook 性能不佳的示例文本，我可以）*。*

但是我确实有一些优化正则表达式的想法，尽管如果它们引起了显着的改进，我会感到惊讶。但谁知道 - 让我们试一试。

首先，你不需要让 plus 变得懒惰。相反，您可能希望使其具有所有格或使用原子组。此外，单词边界可能有助于为您的第二场比赛选择合适的起点：

```
.*?>(((?>[^:]+)):<.*?\b\2): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:19:59.157

我确定这是`.*?`导致您的问题的原因，两者都是。例如，第一个强制正则表达式停止并尝试在文档开头的每个位置进行匹配。幸运的是，无论如何你都不需要那个部分。但是你真的需要尽可能的更具体，而不是`.*?`一直依赖。

尝试这个：

```
private static readonly Regex LAST_CONVERSATION_REPLACE_PATTERN 
    = new Regex(@"^(?>(\w+:).*)(?>\s+(?!^\1).*)+", RegexOptions.Multiline); 
```

我认为可以安全地假设每个标题名称都位于其自己行的开头；毕竟这是电子邮件。它也使工作变得容易得多。事实上，如果你*不能*假设，你可能会被搞砸。

`^(?>(\w+:).*)`在一行的开头匹配一个看起来像标题名称的东西，并`.*`消耗该行的其余部分。将它放在一个原子组中可以确保，如果行首的匹配尝试在正则表达式的后面部分失败，它不会费心回来尝试其他方式来匹配该行。

`(?>\s+(?!^\1).*)`使用行分隔符和下一行，但仅在前瞻验证它不以目标标题名称开头之后。

# arrays - Powershell：选择 DataGridView 行

> ID：11493700
> 
> 赞同：3
> 
> 时间：2012-07-15T16:39:32.263
> 
> 标签：arrays, powershell, datagridview

到目前为止，我有这个代码。

```
$form = New-Object System.Windows.Forms.Form
$form.Size = New-Object System.Drawing.Size(900,600)
$dataGridView = New-Object System.Windows.Forms.DataGridView
$dataGridView.Size=New-Object System.Drawing.Size(800,400)
$go = New-Object System.Windows.Forms.Button
$go.Location = New-Object System.Drawing.Size(300,450)
$go.Size = New-Object System.Drawing.Size(75,23)
$go.text = "Select"
$form.Controls.Add($go)
$form.Controls.Add($dataGridView)

$dataGridView.ColumnCount = 4
$dataGridView.ColumnHeadersVisible = $true
$dataGridView.Columns[0].Name = "Name"
$dataGridView.Columns[1].Name = "ID"
$dataGridView.Columns[2].Name = "Description"
$dataGridView.Columns[3].Name = "Memory"

$dataGridView.Columns[0].width = 240

get-process | foreach {
    $dataGridView.Rows.Add($_.Name,$_.ID,$_.Description,$_.WorkingSet) | out-null
}

$go.Add_Click({
    $selectedRow = $dataGridView.CurrentRowIndex
write-host $selectedRow
})

[void]$form.ShowDialog() 
```

它只是获取进程名称、ID 等属性并将它们放入预定义的头文件中`DataGridView`。

我的问题是我想查看我单击的行`$selectedRow = $dataGridView.CurrentRowIndex`并将其输出到控制台。相反，当按下“选择”按钮时，会向终端输出一个空白字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T07:28:04.333

您还可以通过以下方式获取行索引：

```
$dataGridView.CurrentCell.RowIndex 
```

或者

```
$dataGridView.SelectedRows[0].Index 
```

您可能还想将网格 MultiSelect 属性设置为 $false。目前它允许多行选择。要考虑的另一件事是将 SelectionMode 属性设置为“FullRowSelect”。填充网格时，会选择第一列，而不是整行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T01:05:34.943

改变

```
$selectedRow = $dataGridView.CurrentRowIndex 
```

到

```
$selectedRow = $dataGridView.CurrentRow.Index 
```

# c++ - Initialize all the variables of a specific type to a specific default value in C++

> ID：11493701
> 
> 赞同：0
> 
> 时间：2012-07-15T16:39:36.737
> 
> 标签：c++, default-value

In my code i have `int`s, `bool`s, `pointer`s and so on, i also have some type defined by me with `typedef`, how can i manage the default value initialization like it happens in the objects with the contrunctor?

I want to be sure that

```
T var; 
```

if untouched, is always equal to my default value and i like to do this without parsing each line of code anche changing the default value manually and without using a preprocessor macro.

is this possible? for a new `typedef` is possible to define a default value?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T16:45:16.330

In C++11, you could write `T var{};` to get value initialization to the default value.

In C++03, you could write a non-POD wrapper, whose default constructor will get called by `T var;`:

```
template<class T>
struct default_initializer{
  default_initializer() : value() {}
  default_initializer(T const& v) : value(v) {}
  T value;
};

// somewhere in code
default_initializer<T> var; // calls default ctor and initializes 'value'
                            // to its default value 
```

This will allow you to safely default initialize even primitive , POD and aggregate types, which are normally left uninitialized by the `T var;` declaration.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T16:42:46.347

This is not possible for primitive types since they don't have a constructor. primitive types which are declared in the context of a function scope are not initialized by default and contain garbage. primitive variables which are declared in the global scope as global variables are always initialized to `0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:56:23.177

There is no way to achieve this for `int`s, `bool`s, pointers and other primitive data types without having to write some additional code whenever you declare values of such types. But for instances of your custom classes, there is.

# matlab - matlab绘图

> ID：11493702
> 
> 赞同：0
> 
> 时间：2012-07-15T16:39:46.303
> 
> 标签：matlab, plot

我想在matlab中画一条线。我的场景就像 x=[-400:400] 和 'y' 应该是相同的长度，但是是一条不规则的斜率连续线，最后我想使用 plot 命令进行绘图，比如 plot(x,y)。任何人都可以建议如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:02:31.287

假设您想以 1 为步长进行绘图，那么您有：

```
x1=-400:-300;
x2=-300:-200;
x3=-200:300;
x=[x1 x2 x3]; 
```

然后对于 y 你将拥有：

```
y1=ones(1,length(x1));
y2=(-200-150)/(-200+300) (x2+300) + 150;
y3=(200+200)/(300+200) (x3+200) - 200;
y=[y1 y2 y3] 
```

进而 ：

```
plot(x,y) 
```

# javascript - 如何在 CKEditor 中设置自定义链接浏览器？

> ID：11493709
> 
> 赞同：2
> 
> 时间：2012-07-15T16:40:35.237
> 
> 标签：javascript, html, ckeditor, fckeditor, file-browser

CKEditor 文档描述了当用户单击插入图像按钮时出现的“文件浏览器（上传器）”。

但是我没有看到有关用户单击插入超链接按钮时出现的对话框的文档。此对话框还具有显示文件浏览器的“在服务器上浏览”按钮。但我在我的网站上有我赢得的服务器页面列表。我可以在这里配置我的自定义列表，而不是浏览文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:12:37.620

您可以制作自定义插件或修改默认链接插件。

`/plugins`要制作自定义插件，请使用您要用于新插件的名称创建一个目录，然后将该`_source/plugins/link`目录的内容复制到您的新目录中。您需要在这些复制的文件中更改插件名称。然后修改对话框文件以满足您的需要。然后使用`config.extraPlugins`设置加载新插件并将按钮添加到您的`config.toolbar_xxx`设置中。

* * *

要修改现有的链接插件，请从以下位置复制链接对话框窗口的未压缩文件：
`_source/plugins/link/dialogs/link.js`

并替换：
`plugins/link/dialogs/link.js`

然后修改该对话框窗口文件，一种方法是使用您的服务器页面列表填充选择元素。

您可以更改 url 文本字段：

```
type : 'text',
id : 'url',
label : commonLang.url,
required: true, 
```

对此：

```
type : 'select',
id : 'url',
label : commonLang.url,
required: true,
'default' : 'xxx',
items :
[
  [ 'Link Name', 'Link Path' ],
  [ 'Link Name', 'Link Path' ],
  [ 'Link Name', 'Link Path' ],
  [ 'Link Name', 'Link Path' ]
], 
```

然后浏览与 url 元素关联的函数，删除不需要的函数并修改剩余的函数以执行您想要的操作。

# javascript - 重复分配的 Javascript 开销

> ID：11493711
> 
> 赞同：0
> 
> 时间：2012-07-15T16:40:48.267
> 
> 标签：javascript, optimization, object, allocation

我正在制作一个非常简单的游戏，只是为了好玩/练习，但我仍然想把它编码好，不管它现在多么简单，以防我想回到它并只是为了学习

因此，在这种情况下，我的问题是：

对象分配涉及多少开销？解释器已经优化到什么程度了？我将反复检查对象网格位置，如果它们仍在同一个网格正方形中，则不更新网格数组

```
if (obj.gridPos==obj.getCurrentGridPos()){
    //etc
} 
```

但是，我应该保留一个每次都会更改的外部“工作”点对象，`getCurrentGridPos()`还是应该每次都返回一个新的点对象？

基本上，即使在这种情况下创建点对象的开销并不重要，哪个更快？

编辑：这个？每帧都会调用每个对象

```
function getGridPos(x,y){
  return new Point(Math.ceil(x/25),Math.ceil(y/25));
} 
```

或者

```
//outside the frame by frame update function looping through every object each frame
tempPoint= new Point()

//and each object each frame calls this, passing in tempPoint and checking that value
function makeGridPos(pt,x,y){
  pt.x = Math.ceil(x/25);
  pt.y = Math.ceil(y/25);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:02:19.823

这个问题*很难*回答，因为存在所有不同的 javascript 引擎。浏览器的“四大”都有自己的 javascript 引擎/解释器，每个浏览器都会以不同的方式进行分配、缓存、GCing 等。

Chrome（和 Safari）开发工具有一个分析选项卡，您可以在其中分析代码的内存分配、计时等。这将是一个开始的地方（至少对于 Chrome 和 Safari）

我不确定 IE 或 Firefox 是否提供这样的工具，但如果这些浏览器存在一些第三方工具来测试这些东西，我不会感到惊讶......

另外，供参考-

*   Chrome 使用 V8 javascript 引擎
*   IE 使用 Triton（我认为它仍然叫那个？）javascript 引擎
*   Firefox 我相信使用 Spidermonkey
*   Safari 我不确定，但认为它使用的是 WebKit 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:06:39.353

据我了解，垃圾收集会在大多数 JS 引擎上停止执行。如果您要通过游戏循环每次迭代制作许多对象并让它们超出范围，这将导致垃圾收集器接管时速度变慢。

对于这种情况，您可能会考虑创建一个单例来使用一种方法来池您的对象，该方法通过删除它们的所有属性、将它们重置`__proto__`为`Object.prototype`并将它们存储在一个数组中来回收它们以供重用。然后，您可以根据需要从池中请求回收对象，仅在池干涸时增加池大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:50:42.420

在您现在添加的两个代码示例之间，我不知道第一个比第二个更有效的情况。因此，如果您尝试优化性能或内存使用，那么重用现有对象可能比每次调用函数时创建新对象更有效。

注意：由于 JS 通过引用来引用对象，因此您必须确保您的代码不在其他地方挂在该对象上并期望它保持其值。

* * *

之前的回答：

在所有编程中（无论优化器有多好），您总是更好地缓存由于访问您在同一函数中一遍又一遍地使用的多个成员变量而计算出的结果，而不是调用计算它的函数和结束。

因此，如果您`obj.getCurrentGridPos()`不止一次调用并且条件没有改变以至于它可能返回不同的结果，那么您应该在本地缓存它的值（以任何语言）。这只是很好的编程。

```
var currentPos = obj.getCurrentGridPos(); 
```

然后使用本地缓存的值：

```
if (obj.gridPos == currentPos) { 
```

解释器可能无法为您执行此类优化，因为它可能无法判断其他操作是否可能导致`obj.getCurrentGridPos()`返回与一次调用不同的内容，但程序员可以知道这一点。

另一件事。如果`obj.getCurrentGridPos()`返回一个实际对象，那么您可能不想使用`==`或`===`比较对象。仅比较它们是否实际上是相同的对象 - 它不会比较查看两个对象是否具有相同的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T17:02:29.420

简短的回答是设置一个`current position`对象并对其自身进行检查，因为如果每次调用`getCurrentGridPos()`.

可能有一个更好的`is this a new position`检查位置，因为您应该每次迭代只进行一次检查。

`currentGridPos`使用[RequestAnimationFrame](https://gist.github.com/1579671)`x y z`设置并在更新之前检查其当前位置似乎是最佳选择，这样您就可以触发`changedPosition`类型事件。

```
var currentPos = {
    x:0,
    y:0,
    z:0
}
window.requestAnimationFrame(function(newPos){
    if (currentPos.x != currentPos.x || currentPos.y != currentPos.y || currentPos.z != newPos.z) {
        $.publish("positionChanged"); // tinypubsub https://gist.github.com/661855
    }
}) 
```

因此，为了清楚起见，是的，我认为您应该保留一个外部“工作”点对象，该对象会更新每次迭代...并且在更新时您可以检查其位置是否已更改-这将是一种更专注的方式组织逻辑并确保`getCurrentPos`每次迭代不会多次调用。

# linux - 将 readbuffer 设置为 FBO 颜色附件失败并出现无效枚举错误

> ID：11493714
> 
> 赞同：1
> 
> 时间：2012-07-15T16:41:07.613
> 
> 标签：linux, opengl, ati

根据[OpenGL 文档](http://www.opengl.org/sdk/docs/man4/xhtml/glReadBuffer.xml)，我应该能够将像素读取源设置为任何`GL_COLOR_ATTACHMENTi`. 但是，当我尝试这个时，`glGetError`给了我一个`GL_INVALID_ENUM`错误。随后`glReadPixels`的只是读取后台缓冲区。

报告的版本`glGetString(GL_VERSION)`是`4.2.11627 Core Profile Forward-Compatible Context`。我在 linux 上运行并安装了 fglrx ati 驱动程序（版本 8.96.7-120312a-135598C-ATI）。

我检查了我的 FBO 是否已绑定且完整。我还验证了`glGetError`不是由先前的调用设置的。

它已经失败了（我希望这里有一个错误，而`INVALID_OPERATION`不是`INVALID_ENUM`）：

```
#include <iostream>
#include "Window.h" // My own class based on sfml, but I am sure context creation works fine
#include <glload/gll.hpp>
#include <glload/gl_core.hpp>

int main()
{
    const unsigned int screenW = 1280, screenH = 720;
    Window w(screenW, screenH, 32, false);
    if (glload::LoadFunctions() == glload::LS_LOAD_FAILED)
    {
        std::cerr << "glload failed to load" << std::endl;
        return -1;
    }
    gl::ReadBuffer(gl::GL_COLOR_ATTACHMENT0);
    if( gl::GetError() == gl::GL_INVALID_ENUM)
    {
        std::cerr << "Invalid enum error" << std::endl;
        return -1;
    }
    return 0;
} 
```

这个调用可能触发还有另一个原因，`INVALID_ENUM`还是我使用的 OpenGL 实现更有可能被窃听？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:56:08.470

> 但是，当我尝试这个时，glGetError 给了我一个 GL_INVALID_ENUM 错误。随后的 glReadPixels 只是读取后台缓冲区。

如果您正在从后台缓冲区读取，那么这意味着[默认的帧缓冲区](http://www.opengl.org/wiki/Default_Framebuffer) *仍然是 bound*。并为*当前*帧[`glReadBuffer`](http://www.opengl.org/wiki/GLAPI/glReadBuffer)缓冲区设置读取缓冲区。

 *默认帧缓冲区没有`GL_COLOR_ATTACHMENT`s。因此，将这些图像之一设置为读取缓冲区是错误的。*您必须先*绑定 FBO ，然后设置读取缓冲区。请注意，`glReadBuffer`将绑定的帧缓冲区设置为`GL_READ_FRAMEBUFFER`，而不是`GL_DRAW_FRAMEBUFFER`。因此，请确保将其绑定到正确的位置。*

# c# - WPF中标签上的外发光效果和旋转

> ID：11493717
> 
> 赞同：7
> 
> 时间：2012-07-15T16:41:26.553
> 
> 标签：c#, wpf, xaml

我需要在标签上创建外发光效果并使其旋转一点（大约 20 度）。我正在使用以下代码，但它没有按照我想要的方式工作：

```
<Label Height="106" Margin="80,57,36,0" Name="lblHeading" FontSize="35">
    Brian's 15th Birthday Party
    <Label.Effect>
        <DropShadowEffect BlurRadius="100" ShadowDepth="0" Opacity="1" 
                          Color="White"/>
    </Label.Effect>
</Label> 
```

是否可以在窗口的某处添加一些文本并为其添加外部发光效果和旋转？如果有人可以帮助我在标签上添加相同的效果或以任何其他方式在不使用标签控件的情况下添加相同的效果，那就太好了。

我也尝试了以下方法，但没有帮助。也许我不知道如何使用它，因为它只是导致错误：

```
<OuterGlowBitmapEffect GlowColor="Blue" GlowSize="30" Noise="1" Opacity="0.4" /> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T17:05:14.737

1.  您可能想要使用较小的`BlurRadius`，将其设置为 100 将使效果接近于不可见。我建议10。
2.  将 设置为[`RenderTransformOrigin`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransformorigin.aspx)您希望文本围绕旋转的点（`0.5, 0.5`表示围绕中心旋转）。
3.  添加一个`RotateTransform`里面`Label.RenderTransform`。

完整的代码应该接近这个：

```
<Label Height="106" Margin="80,57,36,0" Name="lblHeading" FontSize="35"
       RenderTransformOrigin="0.5, 0.5">
    Brian's 15th Birthday Party
    <Label.Effect>
        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="1" 
                      Color="White"/>
    </Label.Effect>
    <Label.RenderTransform>
        <RotateTransform Angle="20"/>
    </Label.RenderTransform>
</Label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:05:23.920

这是您可以旋转标签的方式：

```
<Label>
  <Label.LayoutTransform>
    <RotateTransform Angle="20"/>
  </Label.LayoutTransform>
  <Label.Content>text</Label.Content>
</Label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T15:10:33.767

这可以通过修改`ControlTemplate`.

关键是使用两个`ContentPresenter`来显示您的文本，并附`BlurEffect`加到一个`ContentPresenter`。

编码：

```
<Label Content="TestContent" Foreground="White" FontSize="20">
    <Label.Template>
        <ControlTemplate TargetType="Label">
            <Border>
                <Grid>
                    <ContentPresenter TextBlock.Foreground="{TemplateBinding Foreground}"/>
                    <ContentPresenter TextBlock.Foreground="{TemplateBinding Foreground}">
                        <ContentPresenter.Effect>
                            <BlurEffect Radius="5"/>
                        </ContentPresenter.Effect>
                    </ContentPresenter>
                </Grid>
            </Border>
        </ControlTemplate>
    </Label.Template>
</Label> 
```

[它看起来如何](https://i.stack.imgur.com/hhqh1.png)

# facebook - Tumblr 上的 Facebook 开放图协议

> ID：11493718
> 
> 赞同：3
> 
> 时间：2012-07-15T16:41:32.683
> 
> 标签：facebook, tumblr, facebook-opengraph

当来自我的 Tumblr 博客的链接发布到 Facebook 时，Facebook 会抓取标题标签之间的标题，而不是 Open Graph 元标签中指定的标题。为什么要这样做？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T23:32:18.160

在没有看到代码的情况下，我不确定您的问题到底是什么，但是对于其他正在寻找如何在他们的博客上设置 Open Graph 的人来说，请尝试执行以下操作：

```
<!-- FACEBOOK OPEN GRAPH -->
<!-- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>-->

<meta property="og:site_name" content="{Title}"/>

{block:PermalinkPage}

    <meta property="og:url" content="{Permalink}"/>
    <meta property="og:type" content="article"/>

        {block:Posts}
            {block:Text}
                {block:Title}<meta property="og:title" content="{PlaintextTitle}"/>{/block:Title}
                <meta property="og:description" content="{PlaintextBody}"/>
            {/block:Text}

            {block:Photo}
                <meta property="og:image" content="{PhotoURL-500}"/>
                {block:Caption}<meta property="og:description" content="{PlaintextCaption}"/>{/block:Caption}
            {/block:Photo}

            {block:Photoset}
                {block:Photos}
                <meta property="og:image" content="{PhotoURL-500}"/>
                {/block:Photos}
                {block:Caption}<meta property="og:description" content="{PlaintextCaption}"/>{/block:Caption}
            {/block:Photoset}

            {block:Quote}
                <meta property="og:title" content="{PlaintextQuote}"/>
                <meta property="og:description" content="{PlaintextSource}"/>
                <meta property="og:image" content="{PortraitURL-64}"/>
            {/block:Quote}

            {block:Link}
                <meta property="og:title" content="{PlaintextName}"/>
                <meta property="og:description" content="{PlaintextDescription}"/>
                <meta property="og:image" content="{PortraitURL-64}"/>
            {/block:Link}

            {block:Chat}
                <meta property="og:title" content="{PlaintextTitle}"/>
                <meta property="og:description" content="{block:Lines}{block:Label}{Label}: {/block:Label}{Line} &bull; {/block:Lines}"/>
                <meta property="og:image" content="{PortraitURL-64}"/>
            {/block:Chat}

            {block:Audio}
                <meta property="og:title" content="{block:Artist}{Artist} - {/block:Artist}{block:TrackName}{TrackName}{/block:TrackName}"/>
                <meta property="og:description" content="{PlaintextCaption}"/>
                {block:AlbumArt}<meta property="og:image" content="{AlbumArtURL}"/>{/block:AlbumArt}
            {/block:Audio}

            {block:Video}
                {block:Caption}<meta property="og:description" content="{PlaintextCaption}"/>{/block:Caption}
            {/block:Video}

            {block:Answer}
                <meta property="og:title" content="{PlaintextQuestion}"/>
                <meta property="og:description" content="{PlaintextAnswer}"/>
                <meta property="og:image" content="{PortraitURL-64}"/>
            {/block:Answer}

        {/block:Posts}

{/block:PermalinkPage}

{block:IndexPage}
        <meta property="og:title" content="{Title}"/>
        <meta property="og:type" content="blog"/>
        <meta property="og:description" content="{MetaDescription}"/>
        <meta property="og:image" content="{PortraitURL-64}"/>
{/block:IndexPage} 
```

应该涵盖您可以通过它完成的任何事情！

请记住，所有代码都属于结束`</head>`标记之前。

# java - 解析格式为 [2012-07-15T20:55:33+00:00] 的 Java 日期字符串

> ID：11493719
> 
> 赞同：0
> 
> 时间：2012-07-15T16:41:41.993
> 
> 标签：java, android

我试图解析一个日期为“2012-07-15T20:55:33+00:00”的字符串，但是我不断收到非法参数异常。我不知道我做错了什么。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-ddzHH:mm:SS+00:00"); 
String date = "2012-07-15T20:55:33+00:00";
Log.e("res",sdf.format(date)); 
```

投掷

```
 07-15 12:37:28.436: E/AndroidRuntime(20985): FATAL EXCEPTION: main
07-15 12:37:28.436: E/AndroidRuntime(20985): java.lang.IllegalArgumentException
07-15 12:37:28.436: E/AndroidRuntime(20985):    at java.text.DateFormat.format(DateFormat.java:365)
07-15 12:37:28.436: E/AndroidRuntime(20985):    at java.text.Format.format(Format.java:93) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:52:59.737

您需要使用 sdf.parse(date, new ParsePosition(0)) 而不是 sdf.format(date)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:55:11.023

如果您使用以下代码，它将像魅力一样工作。

```
SimpleDateFormat sdf = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss"); 
Date date = new Date();
Log.d("res",sdf.format(date)); 
```

您可以在日期对象中设置日期，例如`date.setMonth(month);`...等。 sdf.format 将以所需格式返回字符串日期。

# java - Spring框架访问助手类中的会话变量

> ID：11493735
> 
> 赞同：0
> 
> 时间：2012-07-15T16:43:58.437
> 
> 标签：java, spring, session

以下是我的代码结构

```
Filter A{

   Helper B()                    // Call to Helper B
   int a= HelperA.function();   
} 
```

像这些有多个帮助类和多个函数调用

```
Helper B{

   // Set the attributes in here Value in here 
}

HelperA{

 function(){

   // Using the Session values 
 }
} 
```

在这种情况下，我无法说明如何使用 sessionattribute 表示法

Spring 框架中是否有一个属性可以设置会话值并且可以从 Spring 应用程序的任何部分访问 函数调用太多，更改所有方法的签名将是很多繁琐的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:04:48.690

我认为您可以在这种情况下使用 spring bean，创建 bean 将其保留在 http 会话范围内。为此，您可以在[此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other)找到配置。然后在控制器中使用相同的 bean。不确定天气它可以与 sessionattribute 注释结合使用。

# c# - 如何在 C# 中附加声音

> ID：11493736
> 
> 赞同：1
> 
> 时间：2012-07-15T16:44:00.213
> 
> 标签：c#, java, .net, soundplayer

我正在通过阅读一些书籍和观看一些教程来自学 C#。所以，我决定同时做一个小项目，以获取更多经验并巩固我的知识。我正在尝试用格鲁吉亚语（我的语言）创建一个文本到语音程序，但是我不明白如何将不同的声音相互附加。例如，当我的程序要说“语言”时，它会将单词分成“la”“n”“gu”“a”“ge”所以，我已经记录了这些部分并想要附加它们并创建一个单词。我在 MSDN.COM 上寻找课程并找到了 SoundPlayer，但我不知道如何附加 WAV 格式的声音。我想将一种声音添加到另一种声音并播放一个新声音，例如我的声音说“aaa”，另一个说“bbbb”

为了划分单词，我创建了一个数组列表并使用了这段代码。

```
public ArrayList divide(String s)  //დაყოფა და arraylist-ში გადანაწილება
    {
        ArrayList a = new ArrayList();
        int i = 0;
        while (i < s.Length)
        {
            if (s[i] == ',' || s[i] == ' ' || s[i] == '.')
            {
                a.Add(s.Substring(i, i + 1));
                i++;
                continue;
            }
            if (consonant(s[i]) && (i + 1) != s.Length && sonant(s[i + 1]))
            {
                if (isFirstSonant(s, i))
                    a.Add(s.Substring(i, i + 2) + "_FIRST");
                else
                    a.Add(s.Substring(i, i + 2) + "_SECOND");
                i += 2;
                continue;
            }
            if (sonant(s[i]) && ((i + 1) < s.Length && sonant(s[i]) || i == (s.Length - 1)))
            {
                if (isFirstSonant(s, i))
                    a.Add(s.Substring(i, i + 1) + "_FIRST");
                else
                    a.Add(s.Substring(i, i + 1) + "_SECOND");
                i++;
                continue;
            }
            if (consonant(s[i]) && ((i + 1) < s.Length && consonant(s[i]) || i == (s.Length - 1)))
            {
                a.Add(s.Substring(i, i + 1) + "_SECOND");
                i++;
                continue;
            }
        }
        return a;
    } 
```

我已经在 java 上制作了这个程序，并且想在 C# 上做同样的事情，所以这是我在 java 上的代码。这就是我之后添加声音的方式，将它们放入arraylist。

```
public AudioInputStream append(AudioInputStream main, String s) throws UnsupportedAudioFileException, IOException {
     return new AudioInputStream(
             new SequenceInputStream(main, find(s)),     
             main.getFormat(), 
             main.getFrameLength() + find(s).getFrameLength());
 }
 private String s;
 public void Process() {
    try {
        AudioInputStream main = AudioSystem.getAudioInputStream(new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/blank.wav"));
        ArrayList<String> aa = divide(s);
        for(int ii=0;ii<aa.size();ii++) {
            main=append(main, aa.get(ii));
            System.out.println(aa.get(ii));
        }
        AudioSystem.write(main, AudioFileFormat.Type.WAVE, new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/result.wav"));
        result=main;
        AudioInputStream result1 = AudioSystem.getAudioInputStream(new File("C:/Users/Vato/Desktop/Programing/sintezatori/alphabet/result.wav")); 
        DataLine.Info info =
            new DataLine.Info(Clip.class,
                    result1.getFormat());
        Clip clip = (Clip) AudioSystem.getLine(info);
        clip.open(result1);
        clip.start();
        } catch (Exception e) {
          e.printStackTrace();
        }
   }
 private AudioInputStream result;
 public AudioInputStream getResult() {
     return result;
 } 
```

[我应该从这些http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)中使用哪个方法或类？我如何在 C# 中做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:16:09.030

如果您不想使用现有的 SDK，您可以执行以下操作：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Media;
using System.Text;

namespace ConsoleApplication3
{
    public class SpeechClass
    {

        private Dictionary<char, string> _letterToFileMapping = new Dictionary<char, string>();
        private string _basePath = "\\soundfiles";

        public SpeechClass()
        {
            PopulateMappings();
        }

        private void PopulateMappings()
        {
            _letterToFileMapping.Add('a', "asound.wav");
            _letterToFileMapping.Add('b', "bsound.wav");
            _letterToFileMapping.Add('c', "csound.wav");
            _letterToFileMapping.Add('d', "dsound.wav");
        }

        private void SayWord(string word)
        {
            var chars = word.ToCharArray();

            List<string> filestosay = new List<string>();

            foreach (var c in chars)
            {
                string sound;
                if(_letterToFileMapping.TryGetValue(c, out sound))
                {
                    filestosay.Add(sound);
                }
            }

            foreach (string s in filestosay)
            {
                SoundPlayer p = new SoundPlayer();
                p.SoundLocation = Path.Combine(_basePath, s);
                p.Play();

            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:55:54.050

AT&T Text-To-Speech SDK 非常出色。您可以自定义字典和声音。 [http://www.wizzardsoftware.com/text-to-speech-tts.php](http://www.wizzardsoftware.com/text-to-speech-tts.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T16:57:51.833

声音播放器应该可以工作：

```
using System.Media;

InitializeComponent();
Soundplayer MySounds = new SoundPlayer(@"C:\example.wav);
MySounds.Play(); 
```

# java - 通过 JDBC 更新远程数据库需要很长时间

> ID：11493738
> 
> 赞同：0
> 
> 时间：2012-07-15T16:44:22.820
> 
> 标签：java, mysql, jdbc, prepared-statement, bulkinsert

我正在通过 JDBC Prepared 语句更新远程数据库。当我执行相同的代码来更新本地数据库时，它需要几毫秒，但对于远程数据库来说，大约 900 行的时间太长了。所有行的总大小为 160 KB。远程主机是 Hostgator，表的数据库引擎是 InnoDB。

这是我的代码：

```
String insertTableSQL = "INSERT INTO abc(zzz,c,d,e,timestamp) VALUES (?,?,?,?,?)";

String delSt = "DELETE FROM abc WHERE zzz= ?";

del = connection.prepareStatement(delSt);
preparedStatement = connection.prepareStatement(insertTableSQL);
connection.setAutoCommit(false);
Iterator<DataObject> itr = updationList.iterator();
while (itr.hasNext()) {
    DataObject dO = itr.next();
    del.setString(1, dO.a + ":" + dO.b);
    for (SubObject sO : dO.getsO.values()) {
        try {
            preparedStatement.setString(1, sO.a + ":" + sO.b);
            preparedStatement.setString(2, sO.c);
            preparedStatement.setInt(3, sO.d);
            preparedStatement.setFloat(4, sO.e);
            preparedStatement.setTimestamp(5, getCurrentTimeStamp());
            preparedStatement.addBatch();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
try {
    del.execute();
    preparedStatement.executeBatch();
} catch (Exception e) {
    e.printStackTrace();
}
try {
    connection.commit();
}
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:47:30.053

您应该检查本地表和远程服务器上的索引是否相同。删除可能是罪魁祸首，它`EXPLAIN SELECT * FROM abc WHERE zzz=?`会告诉你那里发生了什么。您可以尝试通过添加`useCompression=true`到您的 JDBC 连接字符串来为您的连接添加压缩。这将在发送命令时将 160k 缩小一点。

[http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html)

# c# - 仅为控制器指定视图位置？

> ID：11493740
> 
> 赞同：0
> 
> 时间：2012-07-15T16:44:44.147
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我不想将视图位置添加到全局，但只需要一个控制器。如何从控制器内指定不同的视图位置？控制器构造函数中的配置会很好，但即使有一种方法可以在操作中做到这一点：return View(??)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:47:12.900

您始终可以明确指定视图的位置：

```
return View("~/Views/SomeSpecialLocation/Foo.cshtml", someModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:47:41.743

> 控制器构造函数中的配置会很好，

是的，您可以在控制器的构造函数中注入配置项，是的，作为视图的字符串路径

```
public class ExampleController : Controller
{
  private string ViewPath;
  public ExampleController(string viewPath)
  {
     ViewPath = viewPath;
  }

  public ActionResult Index(ExampleModel exampleModel)
  {
     return View(ViewPath);
  }
} 
```

# java - FastBind 用于使用 Spring LDAP 对 Active Directory 进行身份验证

> ID：11493742
> 
> 赞同：1
> 
> 时间：2012-07-15T16:45:05.033
> 
> 标签：java, spring, authentication, active-directory, ldap

我有一个 Spring MVC 应用程序（使用 3.0.5 版本），并且需要使用 Spring LDAP 绑定到 Active Directory，以便简单且仅验证用户的凭据。该应用程序托管在 Linux 服务器上，因此我需要一个***跨平台的***解决方案。并且该应用程序*不*使用 Spring Security。

在此设置中实施用户身份验证的有效方法是什么？Active Directory 支持`FastBind`控制 (id= `1.2.840.113556.1.4.1781`)，所以我想利用它，因为我只需要验证输入凭据，不需要从 AD 返回其他信息。

谢谢！

**更新（2012 年 7 月 16 日）**：我将继续更新我的问题，提供解决方案的详细信息。

根据@ig0774 的回答，我编写了以下`connection control`课程：

```
package com.company.authentication;

import javax.naming.ldap.Control;

public class FastBindConnectionControl implements Control {

    @Override
    public String getID() {
        return "1.2.840.113556.1.4.1781";
    }

    @Override
    public boolean isCritical() {
        return true;
    }

    @Override
    public byte[] getEncodedValue() {
        return null;
    }
} 
```

然后，我扩展`AbstractContextSource`了，使用`FastBind`连接控制类：

```
package com.company.authentication;

import java.util.Hashtable;
import javax.naming.NamingException;
import javax.naming.directory.DirContext;
import javax.naming.ldap.Control;
import javax.naming.ldap.InitialLdapContext;
import org.springframework.ldap.core.support.AbstractContextSource;

public class FastBindActiveDirectoryContextSource extends AbstractContextSource {

    @Override
    protected DirContext getDirContextInstance(Hashtable env) throws NamingException {
        return new InitialLdapContext(env, new Control[] { new FastBindConnectionControl() });
    }
} 
```

最后，一个服务类来封装认证机制：

```
package com.company.authentication;

import javax.naming.AuthenticationException;
import javax.naming.directory.DirContext;
import org.springframework.ldap.core.ContextSource;
import org.springframework.ldap.support.LdapUtils;

public class ActiveDirectoryAuthService implements IAuthenticate {

    private ContextSource contextSource;
    public void setContextSource(ContextSource contextSource) {
        this.contextSource = contextSource;
    }

    @Override
    public boolean authenticate(final String login, String password) {
        try {
            DirContext ctx = contextSource.getContext(login, password);
            LdapUtils.closeContext(ctx);
            return true;
        }
        catch (Exception e) {
            return false;
        }
    }
} 
```

在我的 Spring 应用程序上下文配置文件中，我添加了以下内容：

```
<bean id="ADContextSource" class="com.company.authentication.FastBindActiveDirectoryContextSource">
    <property name="url" value="ldaps://x.x.x.x:636" />
</bean>

<bean id="userAuthenticationService" class="com.company.authentication.ActiveDirectoryAuthService">
    <property name="contextSource" ref="ADContextSource" />
</bean> 
```

最后，`userAuthenticationService`bean 被注入到客户端类中，比如登录控制器。

```
package com.company.web;

import com.company.authentication;

@Controller
public class LoginController {

    @Autowired
    private IAuthenticate userAuthenticationService;

    public String authenticateUser(String login, String password) {
      if (this.userAuthenticationService.authenticate(login, password)) {
          return "welcome";
      }
      else {
        return "login";
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:44:00.640

[正如此 OTN 论坛帖子中所讨论的，](https://forums.oracle.com/forums/thread.jspa?threadID=1155584&tstart=0)在 JNDI 中实现`FastBind`控制非常简单。

基本上，您`Control`为控件创建了一个新类`FastBind`：

```
class FastBindConnectionControl implements Control {
    public byte[] getEncodedValue() {
            return null;
    }
    public String getID() {
        return "1.2.840.113556.1.4.1781";
    }
    public boolean isCritical() {
        return true;
    }
} 
```

然后使用它来创建您的 ldap 上下文（错误处理和其他所有内容都被忽略）：

```
LdapContext ctx = new InitialLdapContext(env, new Control[] {new FastBindConnectionControl()}); 
```

理想情况下，这很容易插入 Spring-LDAP，它是 LDAP 的 JNDI API 的包装器；但是，似乎内置接口[`LdapContextSource`](http://static.springsource.org/spring-ldap/docs/1.3.1.RELEASE/apidocs/org/springframework/ldap/core/support/LdapContextSource.html)不接受处理连接控件的参数，因此您显然需要创建自己的子类[`AbstractContextSource`](http://static.springsource.org/spring-ldap/docs/1.3.1.RELEASE/apidocs/org/springframework/ldap/core/support/AbstractContextSource.html)来处理它，看起来应该是直接的-足够向前：

```
class FastBindLdapContextSource extends AbstractContextSource {
    protected DirContext getDirContextInstance(Hashtable env) {
        return new InitialLdapContext(env, new Control[] {new FastBindConnectionControl()});
    }
} 
```

然后，您只需将当前`LdapContextSource`的实例替换为`FastBindLdapContextSource`.

但是请注意，此上下文源只能用于`BIND`操作。正如我在对 Terry Gardner 的评论中链接到的[MSDN 文档中所述：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366981%28v=vs.85%29.aspx)

> 在此模式下，连接上只接受简单绑定。因为没有完成任何组评估，所以始终处理连接，就好像没有发生任何其他 LDAP 操作的绑定一样。

这意味着您可能正在考虑维护两种类型的 LDAP 上下文，一种用于绑定，另一种用于实际执行您可能需要执行的任何查找。

* * *

[查看 LdapTemplate](https://src.springframework.org/svn/spring-ldap/tags/spring-ldap-1.3.1.RELEASE/core/src/main/java/org/springframework/ldap/core/LdapTemplate.java)的源代码，我发现该`authenticate`方法看起来不仅仅是一个简单的绑定。更具体地说，它会搜索用户，然后尝试绑定。因为，如果您使用`FastBind`启用的上下文，则不太可能执行搜索（通常 AD 不允许搜索匿名连接）。基本上，这意味着您可能必须避免`LdapTemplate`.

但是，假设您获得了对 ADContextSource bean 的引用，它应该很简单，可以执行类似的操作

```
boolean authenticate(String username, String password) {
    try {
        DirContext ctx = contextSource.getContext(username, password);
        LdapUtils.closeContext(ctx);
        return true;
    } catch (Exception e) {
        // note: this means an exception was thrown by #getContext() above
        return false;
    }
} 
```

它相当接近地模仿了`LdapTemplate`无论如何都会做的事情（唯一缺少的东西是`AuthenticatedLdapEntryContextCallback`，在这种情况下没有任何价值，而`AuthenticationErrorCallback`，如果你想要这种行为，可以很容易地添加它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:47:37.253

由于`FastBind`唯一的“检查用户凭据”并且不执行组确定，因此最好使用可分辨名称和凭据简单地将 BIND 请求传输到服务器。任何简单的 BIND 请求都应通过安全连接传输。结果代码为`0`（零）的响应表示：

1.  服务器正在侦听并响应
2.  可分辨名称存在且凭据与存储在服务器数据库中的凭据匹配
3.  LDAP 客户端有足够的访问权限来验证服务器上的会话

UnboundID [LDAP SDK](https://www.unboundid.com/products/ldapsdk/)是与目录服务器交互的最佳 Java 实现

# facebook - 使用 Koala 的 Facebook 身份验证不起作用 - 无法检索 access_token

> ID：11493745
> 
> 赞同：2
> 
> 时间：2012-07-15T16:45:21.463
> 
> 标签：facebook, authentication, ruby-on-rails-3.1

这是一个使用 FB 连接的网络应用程序。考拉 - 导轨

控制器代码：

```
class UsersController < ApplicationController
before_filter :parse_facebook_cookies

def parse_facebook_cookies
  @facebook_cookies ||= Koala::Facebook::OAuth.new('api_id','app_secret').get_user_info_from_cookie(cookies)
end

def index
  @users = User.all
end

def show
 @user = User.find(params[:id])
end

def new
  @user = User.new
  @title = "sign up"
  require 'koala'

  @graph = Koala::Facebook::API.new
  @access_token = @facebook_cookies["access_token"]

  @user1 = @graph.get_object("me")
  @user.name = @user1["name"]
  @user.uid = @user1["id"]
  @user.save
end
end 
```

执行时出现以下错误：@access_token = @facebook_cookies["access_token"]

“nil:NilClass 的未定义方法‘[]’”

我很感激任何可能出现问题的指示！谢谢！

# java - 安卓相机按钮

> ID：11493746
> 
> 赞同：0
> 
> 时间：2012-07-15T16:45:48.483
> 
> 标签：java, android, android-camera

我正在编写一个简单的 android 相机应用程序（SDK 版本 7）。我可以像在原生相机应用程序中那样处理相机按钮，即软点击对焦和硬点击拍摄照片吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:54:26.213

请注意，许多 android 设备没有物理相机按钮。允许用户使用触摸屏进行对焦和拍照是更安全的选择。

无论如何，既然您提到了本机相机应用程序，我假设您的意思是官方相机应用程序。[在这种情况下，您可以在https://android.googlesource.com/platform/packages/apps/Camera.git](https://android.googlesource.com/platform/packages/apps/Camera.git)找到源代码

# php - MySQL / PHP 度数符号

> ID：11493749
> 
> 赞同：2
> 
> 时间：2012-07-15T16:46:01.057
> 
> 标签：php, mysql

我在我的数据库中存储了一个度数符号（ **° ），并且通过***phpMyAdmin*（排序规则设置为`utf8_unicode_ci`）显示正常。

但是在我的 php 代码中，当我获取数据时，符号变成了“�”字符。

如果我硬编码我的 php OK 中的度数符号显示正常，问题只是从数据库中获取它时。

html 实体和 html 标头在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:58:57.800

这通常是由使用 utf8 以外的其他方式连接到数据库和从数据库连接造成的。

如果使用较旧的库，请尝试[mysqli::set_charset](http://www.php.net/manual/en/mysqli.set-charset.php)或[mysql_set_charset 。](http://php.net/manual/en/function.mysql-set-charset.php)

# php - 带有空格的 if 子句中出现意外的 T_STRING

> ID：11493751
> 
> 赞同：3
> 
> 时间：2012-07-15T16:46:36.143
> 
> 标签：php

我的问题如下：为了保持脚本的顺序，我总是在 if 语句中放置很多空格，如下所示：

```
if( ! isset( $_GET['user'] ) || ! isset( $_GET['user'] ) )
   ... 
```

有时，虽然一切似乎都是正确的，但这会产生诸如“Unexpected T_STRING ...”之类的错误。然后我将行更改为：

```
if(!isset($_GET['user'])||!isset($_GET['user']))
   ... 
```

保存文件，重新插入空格，再次保存文件，一切正常。有什么想法可能导致这种情况吗？这可能是PHP解析器的错误吗？

（这不是这个语句，它发生在许多这样的空格 - 包括语句）

编辑：我只是设法将文件恢复到它不起作用时，这是产生错误的确切代码：

```
if(! isset( $_GET['user'] ) || ! isset( $_GET['parent'] ) ) 
```

我也依次更改了每个字符，似乎是和之间的`||`空格`!`。

错误消息说：

```
Parse error: syntax error, unexpected T_STRING, expecting ',' or ')' in ... 
```

你可以在这里下载文件：http: [//geardev.de/test.zip](http://geardev.de/test.zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T17:53:12.493

这看起来像一个字符编码问题。我不确定您使用的确切字符编码是否会导致此问题，但是当您使用十六进制编辑器打开 PHP 文件时，您正确识别为导致此问题的空格字符实际上是一个多字节字符`\xC2`& `\xA0`. 所有其他空格字符都`\x20`应该是： ![在此处输入图像描述](../Images/1a2a6354c5fea19904a0c8262ccf103c.png)

* * *

**编辑：**
`\xC2A0`是 UTF-8 编码方式`U+00A0`（[不间断空格](http://en.wikipedia.org/wiki/Non-breaking_space)）。这可能来自浏览器、PDF 或高级文本编辑器的复制和粘贴，或者您的键盘已`Shift`+`Space`映射到 NBSP。

Netbeans 的人抱怨将 NBSP 随机插入到他们的代码中，但我怀疑这是由于用户`Shift`在键入空格时不小心握住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:52:12.320

对此唯一可能的答案是，您完全错了。

抱歉 :) 问题出在键盘和椅子之间。现在，如果您能提出可重现的错误，我将全部收回。

# extjs4 - 出现错误 - utocreateviewport 设置为 true，但没有组件被设计为初始视图

> ID：11493758
> 
> 赞同：0
> 
> 时间：2012-07-15T16:47:55.597
> 
> 标签：extjs4, extjs4.1, sencha-architect

我收到此错误，我可以知道我缺少什么吗？

```
this application has autocreateviewport set into true but no component is designed as the initial view 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:54:26.047

解决方案是在要显示为初始视图的视图上单击鼠标右键，然后选择`Mark as initial view`。

# html - 绝对位置不起作用

> ID：11493759
> 
> 赞同：0
> 
> 时间：2012-07-15T16:47:59.010
> 
> 标签：html, css

如何将 div 设置在 div`#gallery`的中心`#warp`？这是一个[演示 JS Fiddle](http://jsfiddle.net/centerwow/ZY7Dv/2/)。

HTML：

```
<div id="warp">
    <div id="header">
        <img id="logo_l" src="images/centerwow-logo.png" alt="Centerwow - Web Design - Logo" />
        <img id="Logo_r" src="images/web-design-logo.png" alt="centerwow.com - Portfolio" title="Portfolio" >
        <div id="menu">
            <li><a href="#"  title="About Us">About Us</a>
            <li><a href="#" name="aboutus" title="About Us" >Company Info</a></li>
            <li><a href="#" name="profile"  title="Profile" > Profile</a></li>
        </div>    
    </div>

    <div id="gallery"></div>
</div> 
```

CSS：

```
html body{
    margin:0;
    padding:0;
}

body{
    background:#F7F7F7;
}

#warp{
    position:relative;
    margin:0 auto;
}

#header {
        position:relative;
        background:#DEEAF4;
        width:80%;
        height: 100px;
        margin:0 auto;

    }
#logo_l{
    position:absolute;
    left:0;
    top:0;
    margin:0;
    padding:0;

}

#Logo_r{
    position:absolute;
    width:272px ;
    height:100px;
    right:0;
    top:0;
    margin:0;
    padding:0;

}    

#menu li {
    display: block;
    vertical-align: top;
    float:left;
    margin: 0 5px;
    }

#menu {
    position:relative;
    width:250px;
    top: 35px;
    margin: 0 auto;

    }
#gallery{
    position:absolute;
    background:#EBF0F5;
    width:80%;
    height:70%;
    margin:10px auto;
    padding:10px;
}    
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:50:50.417

您不需要包括`position: absolute`居中`#gallery`。这已经通过`margin: 10px auto`.

此外，要将百分比高度设置为`#gallery`，其父元素必须具有特定高度。在这种情况下，我假设您希望它基于视口高度。为此，每个祖先 div 的高度必须为 100%：

```
*, html, body, #warp {
    height: 100%;
} 
```

JS 小提琴：http: [//jsfiddle.net/qc9WL/1/](http://jsfiddle.net/qc9WL/1/)

注意：我还注意到您的 HTML 和 CSS 中存在一些错误。

*   您需要在样式表之一之间`body`和行中使用逗号`html`
*   制作列表时应该使用`<ul>`or`<ol>`标记
*   最后，别忘了关闭你`<li>`的第六行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T16:51:17.720

我不确定您要在这里实现什么 -`position: absolute`这`#gallery`正是导致问题的原因（这就是为什么`margin: 10px auto`不起作用）。如果删除它，该`#gallery`元素将位于中心。

`left: 50%;`此外，您可以通过设置和`margin-left: -40%;`（在这种情况下为-40%，因为您将宽度`#gallery`设置为 80%）水平居中已知宽度的绝对定位元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:57:16.343

既然您以百分比指定画廊宽度，为什么不尝试以百分比设置左右边距？

```
margin: 10px 10%; 
```

将分部置于中心

# ios - iOS - MPMoviePlayerViewController 不播放流媒体 URL

> ID：11493760
> 
> 赞同：1
> 
> 时间：2012-07-15T16:48:07.093
> 
> 标签：ios, mpmovieplayercontroller

我有一个类似于“http://myserver.com/master.m3u8”的流式 URL。（这是虚拟 URL）
这个 URL 在 iPhone 上的 safari 浏览器中可以正常播放。
但是当使用以下代码在应用程序中播放相同内容时，我遇到了一些问题：

```
NSURL* theURL = [NSURL URLWithString:@"http://myserver.com/master.m3u8"];

MPMoviePlayerViewController* moviePlayerViewController  = [[MPMoviePlayerViewController alloc] initWithContentURL:theURL];
moviePlayerViewController.moviePlayer.movieSourceType = MPMovieSourceTypeStreaming;        
[self presentMoviePlayerViewControllerAnimated:moviePlayerViewController]; 
```

在应用程序中播放时的问题是，一段时间后屏幕变成黑色。但我仍然能够听到音频。
我该如何调试问题出在哪里。

有人可以帮助我遇到类似问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:03:22.130

如果您创建标准 m3u8 文件，则视频的最低版本将包含流的纯音频版本。因此，如果带宽太低，播放器可能会切换到此流并仅播放音频。

发生这种情况时，我还没有找到在应用程序中做一些有意义的事情的解决方案（例如暂停视频并等到带宽足以再次播放具有视频的下一个更高版本的流）但是如果你可以调整m3u8 或编码过程，您可以从 m3u8 中删除仅音频版本。然后播放器将切换到最低的视频流并在带宽不足以显示它时暂停。

请记住，在将应用程序提交到商店时，您必须将其提供给应用程序审核团队。Apple 的技术 QA 中提到了这一点：[解决 HTTP Live Streaming 的 App Store Approval Issues](http://developer.apple.com/library/ios/#qa/qa1767/_index.html)

> 注意：由于基线 64 kbps 最大纯音频 HTTP 实时流要求专门用于通过蜂窝网络进行流式传输，如果您的应用程序自我限制为仅 Wi-Fi HTTP 实时流式传输并且您选择不提供基线 64 kbps 音频-only 流，您必须将此信息提供给 App Review 团队。开发人员可以在您的应用程序的 Review Notes 字段中包含此信息。

# iphone - 如何在自动收缩标签后添加 UILabel 而不会重叠第二个标签

> ID：11493765
> 
> 赞同：-1
> 
> 时间：2012-07-15T16:48:29.203
> 
> 标签：iphone, ios, uilabel

我正在 iPhone 视图中处理标签，第一个是根据从远程 Web 服务获取的字符串内容自动调整大小的，尽管我`UILabel`旁边还有另一个，但是当第一个标签文本变得很长时，它与最后一个标签重叠，如何我能避免吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:14:18.943

**如果您通过 interface-builder 创建了标签**

创建两个**UILabel IBOutlet 属性**作为 lbl1 和 lbl2。然后将 IBOutlet 连接到界面生成器。**然后在viewDidLoad**中编写如下代码

 **```
[lbl1 setNumberOfLines:0];
lbl1.lineBreakMode = UILineBreakModeWordWrap;
[lbl1 sizeToFit];
lbl1.text = @"your text here";

lbl2.frame =  CGRectMake(lbl1.frame.origin.x + lbl1.frame.size.width,  lbl1.frame.origin.y + lbl1.frame.size.height, 100, 50)];    
[lbl2 setNumberOfLines:0];   
lbl2.lineBreakMode = UILineBreakModeWordWrap;   
[lbl2 sizeToFit];
lbl2.text = @"your text here"; 
```

**然后不要忘记再次编写/执行/调用代码** *lbl2.frame = CGRectMake(lbl1.frame.origin.x + lbl1.frame.size.width, lbl1.frame.origin.y + lbl1.frame.size.高度, 100, 50)];* **同时将文本分配给 lbl1。**

**如果您通过代码创建标签**

下面的代码对我有用

```
- (void)viewDidLoad {

    //Adding first label
    UILabel* lbl1 = [[UILabel alloc]initWithFrame:CGRectMake(0, 10, 100, 50)];
    lbl1.text = @"vbdsbfdshfisdhfidshufidhsufhdsf dhdsfhdksbf hfsdh fksdfidsf sdfhsd fhdsf sdhfh sdifsdkf ksdhfkds fhdsf dsfkdsfkjdhsfkjdhskfjhsdk fdhsf vbdsbfdshfisdhfidshufidhsufhdsf dhdsfhdksbf hfsdh fksdfidsf sdfhsd fhdsf sdhfh sdifsdkf ksdhfkds fhdsf dsfkdsfkjdhsfkjdhskfjhsdk fdhsf";
    [lbl1 setMinimumFontSize:8.0];
    [lbl1 setNumberOfLines:0];
    [lbl1 setFont:[UIFont systemFontOfSize:10.0]];
    lbl1.lineBreakMode = UILineBreakModeWordWrap;
    lbl1.backgroundColor = [UIColor redColor];
    [lbl1 sizeToFit];
    [self.view addSubview:lbl1];

    //Adding second label
    UILabel* lbl2 = [[UILabel alloc]initWithFrame:CGRectMake(lbl1.frame.origin.x + lbl1.frame.size.width, lbl1.frame.origin.y + lbl1.frame.size.height, 100, 50)];  
    lbl2.text = @"vbdsbfdshfisdhfidshufidhsufhdsf dhdsfhdksbf hfsdh fksdfidsf sdfhsd fhdsf sdhfh sdifsdkf ksdhfkds fhdsf dsfkdsfkjdhsfkjdhskfjhsdk fdhsf vbdsbfdshfisdhfidshufidhsufhdsf dhdsfhdksbf hfsdh fksdfidsf sdfhsd fhdsf sdhfh sdifsdkf ksdhfkds fhdsf dsfkdsfkjdhsfkjdhskfjhsdk fdhsf";
    [lbl2 setMinimumFontSize:8.0];
    [lbl2 setNumberOfLines:0];
    [lbl2 setFont:[UIFont systemFontOfSize:10.0]];
    lbl2.lineBreakMode = UILineBreakModeWordWrap;
    lbl2.backgroundColor = [UIColor redColor];
    [lbl2 sizeToFit];
    [self.view addSubview:lbl2];

    [lbl1 release];
    [lbl2 release]; 

    [super viewDidLoad];
} 
```**

# javascript - Javascript：当名称存储在变量中时如何在对象中创建函数

> ID：11493770
> 
> 赞同：0
> 
> 时间：2012-07-15T16:49:22.550
> 
> 标签：javascript

我需要从存储在变量中的名称创建一个函数。通常这很简单，我在使用之前已经完成了：

```
 var funcName = "theName";
  window[funcName] = function(){
    // code here
  }; 
```

但是在我的新用例中，我创建的函数需要位于一个名为`the.Name`. 所以我试图做的，但它不起作用是：

```
 var funcName = "the.Name";
  window[funcName] = function(){
    // code here
  }; 
```

它不起作用的原因是因为我无法引用`window["the.Name"]`，因为那是无效的，正确的方法是`window["the"]["Name"]`.

有没有人有解决这个问题的方法？基本上命名一个函数，当名称存储在变量中时，该函数将位于对象内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:54:05.043

好的，我似乎明白你的问题了。

这里有一些代码可以帮助您入门。

```
/**
 * @param fn The function to bind.
 * @param path The object to bind to.
 * @param root The root object.
 */
function bindFunc(fn, path, root){
    path = path.split('.');
    var base = root;
    for(var i=0; i<path.length-1; i++){
        base = base[path[i]];
    }
    base[path[path.length - 1]] = fn;
}

bindFunc(function(){  }, 'the.Name', window); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:58:09.403

我将猜测您正在尝试做一些“类似命名空间”的事情。这是一篇可以帮助您入门的文章（也有一些很好的示例代码）..

[http://blogger.ziesemer.com/2008/05/javascript-namespace-function.html](http://blogger.ziesemer.com/2008/05/javascript-namespace-function.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:14:44.823

如果您确定直到最后一个对象之前的所有对象都存在（最后一个对象也无法定义），那么最短的方法可能是使用[reduce](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)

```
var func = funcName.split(".").reduce(function(p, c) {
    return p[c];
}, window); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T16:56:59.527

拆分字符串，以便您可以一次引用一个级别：

```
var names = funcname.split(".");
var f = window;
for (var i = 0; i < names.length - 1; i++) {
  f = f[names[i]];
}
f[names[names.length - 1]] = function(){...}; 
```

# pentaho - 如何将常量指定为 KTR 中列的目标值

> ID：11493778
> 
> 赞同：1
> 
> 时间：2012-07-15T16:50:47.993
> 
> 标签：pentaho, kettle

我正在尝试设置一个简单的 KTR 将数据从一个表复制到另一个表。在目标表中，我有一个名为 JobId 的列，它没有映射到源表中的任何内容（想法是在此列中捕获 KTR 作业 ID）。我注意到，如果我不在映射中包含该列，则生成的 SQL 会从表中完全删除该列（无论我将更新标志设置为 Y 还是 N，都会发生这种情况），这不是我想要的。我想知道如何将目标列设置为常量或完全不改变它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:03:17.137

使用添加常量步骤或获取变量步骤。在获取变量中，您可以根据需要获取 interal.transformation 名称变量。

# c - 创建管道 - Unix

> ID：11493780
> 
> 赞同：1
> 
> 时间：2012-07-15T16:50:51.583
> 
> 标签：c, unix, pipe

下面是我试图让它工作的代码....

我期待输出为

```
OUTPUT from PipeAttempt(args1, args2) 
```

其次是

```
I am here

OUTPUT from PipeAttempt(args3, args4) 
```

但实际上，我只得到 PipeAttempt(args1, args2); 的输出。

并且程序等待我的输入，当我按下回车键时程序终止

你能告诉我我在这里想念什么吗？

```
int main () {
    char* args1 [] = {"/usr/bin/head", "/etc/passwd", NULL};
    char* args2 [] = {"/bin/sort", NULL};

    char* args3 [] = {"/bin/cat", "piped.input", NULL}; 
    char* args4 [] = {"/usr/bin/wc", NULL};

    PipeAttempt(args1, args2);

    printf("I am here\n");

    PipeAttempt(args3, args4);

    return 0;

}

void PipeAttempt(char* args1[], char* args2[]) {
    int pfildes[2]; <br>
    pid_t cpid1, cpid2; <br>
    char *envp[] = { NULL };<br>

    if (pipe(pfildes) == -1)    {perror("demo1"); exit(1);}
    if ((cpid1 = fork()) == -1)   {perror("demo2"); exit(1);}
    else if (cpid1 == 0) {        /* child:  "cat a"                      */
          close(pfildes[0]);    /* close read end of pipe               */
          dup2(pfildes[1],1);   /* make 1 same as write-to end of pipe  */
          close(pfildes[1]);    /* close excess fildes                  */

       execve(args1[0], args1, envp);

          perror("demo3");       /* still around?  exec failed           */
          exit(1);             /* no flush                             */ 
        }
    else {                      /* parent:  "/usr/bin/wc"               */
          close(pfildes[1]);    /* close write end of pipe              */
          dup2(pfildes[0],0);   /* make 0 same as read-from end of pipe */
          close(pfildes[0]);    /* close excess fildes                  */

       execve(args2[0], args2, envp);
          perror("demo4");       /* still around?  exec failed           */
          exit(1);          /* parent flushes                       */
        }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:11:37.657

你原来的父母被 exec 调用覆盖了。所以你只能得到 /usr/bin/head /etc/passwd | 的输出。/bin/sort 并且您没有得到 /bin/cat piped.input|/usr/bin/wc 的输出。

该程序实际上并没有等待您进行键盘输入。发生的事情是没有显示shell提示符。父级在子级之前退出并且shell立即显示提示（等待父级），然后来自子级的输出，这让你认为程序正在等待用户输入。

为了解决这个问题，您可以在函数中分叉另一个孩子，以便有效地为每个函数（PipeAttempt）调用两个孩子将处理管道，并且在 main 中您可以等待所有四个孩子完成，以便父母最终退出然后您会返回 shell 提示符。鉴于下面的修改代码，低于 pl。在编译之前包含等待、strlen 等的头文件。希望这能解决您的疑问。

```
void PipeAttempt(char* args1[], char* args2[]) ;
int main () {
int i;
char* args1 [] = {"/usr/bin/head", "/etc/passwd", NULL};
char* args2 [] = {"/bin/sort", NULL};

char* args3 [] = {"/bin/cat", "piped.input", NULL}; 
char* args4 [] = {"/usr/bin/wc", NULL};

PipeAttempt(args1, args2);
write(1, "I am here\n", strlen("I am here\n"));
PipeAttempt(args3, args4);
for (i=0; i < 4; i++)
{

    wait(NULL);
}
return 0;
}

void PipeAttempt(char* args1[], char* args2[]) 
{
    int pfildes[2]; 
    pid_t cpid1, cpid2; 
    char *envp[] = { NULL };

    if (pipe(pfildes) == -1)    {perror("demo1"); exit(1);}

    if ((cpid1 = fork()) == -1)   {perror("demo2"); exit(1);}
    else if (cpid1 == 0)
   {        /* child1    */
        close(pfildes[0]);    /* close read end of pipe               */
        dup2(pfildes[1],1);   /* make 1 same as write-to end of pipe  */
        close(pfildes[1]);    /* close excess fildes                  */
        execve(args1[0], args1, envp);
        perror("demo3");       /* still around?  exec failed           */
        exit(1);             /* no flush                             */ 
    }
   else {                      
    /* child2:  "/usr/bin/wc"               */
     if (0==fork())
      {
         close(pfildes[1]);    /* close write end of pipe              */
         dup2(pfildes[0],0);   /* make 0 same as read-from end of pipe */
         close(pfildes[0]);    /* close excess fildes                  */
         execve(args2[0], args2, envp);
         perror("demo4");       /* still around?  */
         exit(1);
      }
//Parent
 close(pfildes[0]); 
 close(pfildes[1]); 
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:43:48.027

您的 PipeAttempt() 函数执行 fork/exec - 您怎么能期望它返回到主函数？

# css - 为什么相对定位的元素会忽略浮动元素

> ID：11493781
> 
> 赞同：3
> 
> 时间：2012-07-15T16:51:01.397
> 
> 标签：css

当静态块元素跟随浮动元素时，它将填充可用的剩余空间。

因此，例如`.right`将采用 80% 的宽度：

```
.left {
    background-color: red;
    float: left;
    width: 20%;    
}

.right {
    background-color: blue;
} 
```

**[http://jsfiddle.net/yryZR/](http://jsfiddle.net/yryZR/)**

然而，当一个块元素`position: relative`跟随一个浮动元素时，浮动元素似乎被忽略了，并且相对元素占据了 100% 的宽度：

```
.left {
    background-color: red;
    float: left;
    width: 20%;    
}

.right {
    background-color: blue;
    position: relative;
} 
```

**[http://jsfiddle.net/yryZR/1/](http://jsfiddle.net/yryZR/1/)**

根据 W3C *“一旦一个盒子按照正常流程布局或浮动，它可能会相对于这个位置移动” [（来源）](http://www.w3.org/TR/CSS2/visuren.html#relative-positioning)*

因此，如果我不更改元素的`left`or`right`位置，为什么它将自己设置在其父元素的最左侧而不是保持正常流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:58:20.863

`position:relative`指的是如果没有 CSS 定位覆盖，元素将处于的位置 - 例如其自然未改变的位置。

浮动元素基本上从文档定位计算中删除，因此您的`left`元素对于元素的定位是不可见`right`的，因此它采用下一个更高元素的大小 - 这两个左/右框所在的容器。

# java - Java ListIterator/迭代器类型

> ID：11493782
> 
> 赞同：3
> 
> 时间：2012-07-15T16:51:12.493
> 
> 标签：java, iterator

我有一个代码片段，如下所示：

```
ArrayList<Integer>    a = new ArrayList<Integer>();
ListIterator<Integer> p = a.listIterator(); 
```

但是，我注意到您实际上并不需要为 ListIterator 指定 ，因此没有它，代码的工作方式相同：

```
ArrayList<Integer>    a = new ArrayList<Integer>();
ListIterator p = a.listIterator(); 
```

我认为迭代器也是如此。所以我的问题是我什么时候必须指定 ListIterator/Iterator 的类型？它是可选的，可以使用更详细吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:55:48.433

为迭代器指定泛型类型的原因是您可以提取它检索到的项目而无需强制转换。这增加了一点编译时类型安全性而没有额外的显着开销，所以我认为没有理由不这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T16:56:01.753

你所指的，叫做`generics`. 它是一个非常强大的工具，除其他外，它为您在编译时为集合提供类型安全。

查看[Java Denerics 文档页面](http://docs.oracle.com/javase/tutorial/java/generics/)，了解何时、为什么以及如何使用它们。

现在，回到你的例子——这段代码：

```
Iterator it1 = a.iterator();          
Iterator<Integer> it2 = a.iterator();

it1.next();    // Compiler will assume, that this returns `Object`
               // because you did not define the type of the collection element 
               // for the Iterator.

it2.next();    // Compiler will assume, that this returns `Integer` 
               // because you said so in declaration. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T16:56:59.460

为 Iterator< T >/List< T > 提供类型参数的目的是类型安全，即编译器可以在编译时检查迭代器/列表可以处理的类型与程序员期望的类型是否不匹配它来处理。

前任：

```
 List aList = new ArrayList();
 Iterator it = aList.iterator();
 String s = (String)it.next() //compiles even if it iterates over a list of Integers

 List<Integer> aList = new ArrayList<Integer>();
 Iterator<Integer> it = aList.iterator();
 String s = it.next() //compilation error 
```

# php - 通过滑动效果显示/隐藏 div

> ID：11493785
> 
> 赞同：0
> 
> 时间：2012-07-15T16:52:16.143
> 
> 标签：php, javascript, effects

此代码切换表单的可见性：

```
function getStyle()
{
    var temp = document.getElementById("frm01").style.display;
    return temp;
}
function switch01()
{
    var current = getStyle();
    if( current == "none" )
    {
        document.getElementById("frm01").style.display = "block";
    }
    else
    {
        document.getElementById("frm01").style.display = "none";
    }
} 
```

如果表单变得可见，则底层 div 将在页面上向下推，反之亦然。
我怎样才能实现那种形式变得缓慢可见，不是在一秒钟内，而是像滑动效果一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:00:31.007

你可以很容易地在 jQuery 中做到这一点。这将适用于所有浏览器。

```
$("#frm01").slideDown("slow", function() {
    // if you want to have some callback behavior, define that here
});

$("#frm01").slideUp("slow", function() {
    // if you want to have some callback behavior, define that here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:57:05.557

一种常见的技术是将其隐藏在另一个元素下，然后应用过渡效果。

CSS：

```
#frm01 {
    -webkit-transform: translate3d( 0, 0, 0 ); /* Default */
}

#frm01.animate {
    -webkit-transform: translate3d( 0, 200px, 0 ); /* Move in Y-direction */
} 
```

其他浏览器也有类似的语法。

# java - Java 当前时间比我的系统时间早 2 小时

> ID：11493791
> 
> 赞同：1
> 
> 时间：2012-07-15T16:53:15.357
> 
> 标签：java, datetime, netbeans-6.9, systemtime

我正在使用以下 Java 代码来获取当前日期和时间：

```
DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
DateFormat timeFormat = new SimpleDateFormat("HH:mm:ss");
Date date = new Date();
System.out.println(dateFormat.format(date));
System.out.println(timeFormat.format(date)); 
```

输出时间总是比我的系统时间或我的时区早 2 小时。例如，如果上面的代码输出以下时间：
`11:44:43`
那么我的系统时间是：
`09:44:43`

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:57:15.783

尝试这个：

```
DateFormat timeFormat = new SimpleDateFormat("HH:mm:ss");
TimeZone tz = TimeZone.getDefault();
Calendar c = Calendar.getInstance(tz);
Date date = c.getTime();
System.out.println(timeFormat.format(date)); 
```

如果它不起作用，请尝试更改时区。看看[`TimeZone.getTimeZone(String id)`](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html#getTimeZone%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T14:17:57.277

你的问题是时区

为 exp。

此代码适用于 android。

更改应用程序的时区。

因为android默认时区是“UTC”

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:mm:ss");
formatter.setTimeZone(TimeZone.getTimeZone("UTC")); 
```

# multithreading - 如何设置 QTConcurrent 操作的最大线程数？

> ID：11493793
> 
> 赞同：11
> 
> 时间：2012-07-15T16:53:33.830
> 
> 标签：multithreading, qt

我在项目列表上运行 QTConcurrent::Map 以执行一些图像处理任务。这在只有几个线程的机器上运行良好，但由于我的处理代码的内存要求，在具有大量线程的机器上遇到问题。

是否可以为 QTConcurrent 操作设置最大并发线程数，或者我是否需要使用我拥有更多控制权的 QThreadPool 重新编码？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-15T17:19:02.597

`QtConcurrent::map`使用全局线程池。

您可以使用 更改其线程数`QThreadPool::globalInstance()->setMaxThreadCount(n)`。

# ml - 在 CPN-Tools 中计算弧到位置和过渡

> ID：11493794
> 
> 赞同：2
> 
> 时间：2012-07-15T16:53:43.433
> 
> 标签：ml, petri-net

**背景**：**CPN-Tools是一个使用***彩色 Petri 网*的模型检查器，它使用 CPN ML 作为其查询语言。**CPN ML**是标准 ML 的扩展，是一种类型推断功能语言。

**问题**：CPN-Tools 广泛用于对需要状态空间分析的域进行建模。我正在使用它来模拟一个域，我需要知道从一个地方传入和传出弧的数量。不同之处在于我正在查看 Petri 网模型表示，而不是状态空间。所以当我说从一个地方计算弧线时，我指的是一个地方，而不是一个状态空间节点。到目前为止，在我的研究中，我遇到了包含地点和过渡属性的结构，并且看起来对我的探索很有希望`CPN'PlaceTable`。`CPN'TransitionTable`但是，我还没有找到任何 CPN ML 示例来帮助我找出一种使用这些结构来计算传入/传出弧的方法。

**问题**：所以我的问题，或者实际上的问题是：

1.  我如何使用`CPN'PlaceTable`或任何其他方法来计算到给定位置的传入弧？
2.  我如何使用`CPN'TransitionTable`或任何适当的方法来计算给定过渡的传出弧？

**案例示例**：我正在使用这个简单的 Petri 网来了解我的期望。请查看**[此链接](http://i.stack.imgur.com/G8qx3.png)**以获取插图。

在图像中，我们看到 3 个位置和 2 个转换。我理想中想要的是能够拥有 CPN ML 功能，`incoming(place_name)`并且`outgoing(transition_name)`以这种方式工作

```
incoming(Place1) = 0
incoming(Place2) = 2
incoming(Place3) = 1
outgoing(Transition1) = 2
outgoing(Transition2) = 1 
```

**其他信息**：我想再次强调，我指的不是状态空间节点。CPN-Tools 中有很多关于状态空间中弧属性的文档，但我在 CPN-Tools 支持论坛上没有找到关于我所说的问题的太多信息。更糟糕的是，`CPN'`通常结构在 CPN-Tools 中是高度未记录的。

# database - 从数据库值填充 Matlab GUI 列表框

> ID：11493798
> 
> 赞同：1
> 
> 时间：2012-07-15T16:54:07.873
> 
> 标签：database, matlab, user-interface, listbox, matlab-guide

我对 Matlab 中的 GUI 比较陌生，我使用 GUIDE 创建了一个简单的 GUI。我想连接到一个数据库（已经定义并且正在工作！）并使用数据库中的值填充一个列表框，以便用户可以选择使用哪个（在这种情况下它们是化合物）。我还没有找到关于如何以这种方式填充列表框的好的教程或线索。到目前为止，我有：

```
function load_listbox(hObject,handles) 

    conn = database('antoine_db','','');
    setdbprefs('datareturnformat','structure'); %sets the db preferences to a structure
    query = 'SELECT ID,"Compound Name" FROM antoine_data ORDER BY ID';

    result = fetch(conn,query);

    %%The following creates a structure containing the names and ID's
    %%of everything in the database
    data = struct([]);
    for i=1:length(result.ID)
        data(i).id =   result.ID(i);
        data(i).name = char(result.CompoundName(i));
    end

    names = data.name;
    handles.compounds = names;
    whos;
    set(handles.listbox1,'String',handles.compounds,'Value',1);

    handles.output = hObject;

    % Update handles structure
    guidata(hObject, handles);

end 
```

从这样的数据库（或大数组）中填充列表框的最简单方法是什么？截至目前，列表框仅填充了名称中的第一项，这是因为名称仅包含第一项。虽然，如果我只显示“data.name”，我会得到列表中 300 项的整个列表！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:39:50.290

我知道了！所以，问题是我正在将 data.name 转换为字符-> 最初它是一个单元格。因此，我`names(i) = data(i).name;`在 for 循环中添加，并删除`names=data.name;`它现在填充了化合物的所有名称！工作函数如下所示：

```
function load_listbox(hObject,handles) 

    conn = database('antoine_db','','');
    setdbprefs('datareturnformat','structure'); %sets the db preferences to a structure
    query = 'SELECT ID,"Compound Name" FROM antoine_data ORDER BY ID';

    result = fetch(conn,query);

    %%The following creates a structure containing the names and ID's
    %%of everything in the database
    data = struct([]);
    for i=1:length(result.ID)
        data(i).id =   result.ID(i);
        data(i).name = (result.CompoundName(i));        %this is a cell
        names(i) = data(i).name;
    end

    handles.compounds = names;
    set(handles.listbox1,'String',handles.compounds,'Value',1);

handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

end 
```

# python - 共享主机上的 django (greengeeks)

> ID：11493803
> 
> 赞同：1
> 
> 时间：2012-07-15T16:54:32.567
> 
> 标签：python, django, hosting, cgi

我正在尝试在我的 greengeeks 共享主机帐户上设置 django。

我（大部分）按照[此处](http://www.codekoala.com/blog/2008/installing-django-shared-hosting-site5/)的说明进行操作，此外还将 Flup 安装到了我的本地 python 'site-packages' 目录中。

我的 python 是 2.4.3，我在 和 中创建了它的“本地”`~/bin`副本`~/lib/python2.4`。

我正在使用 django 1.3（仍然支持 python 2.4.x 的最新版本）。

**编辑**：好的，所以上次是关于让 python 工作（并调用 django）....

所以，我有 django 工作 - 如果我运行：

python /home/icebreak/www/cgi-bin/mysite.fcgi

然后将 django 输出打印到标准输出。伟大的！

但是，当我导航到[www.icebreakersent.com](http://www.icebreakersent.com)时，从 django 打印到 stdout 的任何内容都不会出现！只有在 mysite.fcgi 文件中打印的输出才会发送到浏览器。

为了解决这个问题，我编辑了flup cgi 服务器文件以将发送到标准输出的数据作为文件保存。然后，我在 mysite.fcgi 脚本中加载此文件并将其打印到屏幕上。 **这有效**。 *但是*，这是我不明白的问题的解决方法。

所以，我对你们的问题是 - 为什么从 Flup/django 中打印到标准输出的数据没有显示在浏览器中？为什么它在控制台中显示得很好？

我的 cgi 文件名为“mysite.fcgi”，位于我的`~/public_html/cgi-bin`目录中。它的内容是：

```
#!/home/icebreak/bin/python
import sys, os
import traceback

# Add a custom Python path.
sys.path.insert(0, "/home/icebreak/bin/python")
sys.path.append("/home/icebreak/lib/python2.4/site-packages")
sys.path.append("/home/icebreak/bin")
sys.path.append("/home/icebreak/django_projects/icebreak")

# Switch to the directory of your project. (Optional.)
os.chdir("/home/icebreak/django_projects/icebreak/mysite")

# Set the DJANGO_SETTINGS_MODULE environment variable.
os.environ['DJANGO_SETTINGS_MODULE'] = "mysite.settings"

#from flup.server.fcgi import WSGIServer
#def test_app(environ, start_response):
#    start_response('200 OK', [('Content-Type', 'text/plain')])
#    yield 'Hello, world!\n'

#WSGIServer(test_app).run()

from django.core.servers.fastcgi import runfastcgi

print "Content-type: text/html\n\n"
print 'BEGIN'
try:
    runfastcgi(method="threaded", daemonize="false", outlog="/home/icebreak/django_out.log", errlog="/home/icebreak/django_err.log")
    #runfastcgi(method="threaded", daemonize="false")
except Exception, e:
    #print '<br>'
    #print 'oops, error occured in runfastcgi...'
    #print '<br>'
    #print "Unexpected error:", sys.exc_info()[0]
    #print '<br>'
    #traceback.print_exc()
    #print "Couldn't do it: %s" % e
    pass

f = open('/home/icebreak/django_projects/icebreak/mysite/okiedokie.txt', 'r')
for line in f:
    print line
f.close()

#from django.core.handlers.wsgi import WSGIHandler
#application = WSGIHandler()

#from flup.server.fcgi import WSGIServer
#from django.core.handlers.wsgi import WSGIHandler
#WSGIServer(WSGIHandler()).run()

print '<br>'
print 'END' 
```

我的 .htaccess 文件在`~/public_html`其中并包含以下内容：

```
# Use PHP5CGI as default
AddHandler fcgid-script .php
AddHandler application/cgi .fcgi
AddHandler fastcgi-script .fcgi
AddHandler cgi-script .fcgi
#Options +FollowSymLinks
Options ALL

RewriteEngine On
RewriteBase /

# PHP based site (www.jarrettchisholm.com) - currently not working (July 18, 2012)
RewriteRule ^(jarrettchisholm.com/.*)$ jarrettchisholm.com/index.php/$1 [QSA,L]

# Django based site (www.icebreakersent.com)
RewriteRule ^(media/.*)$ - [L]
RewriteRule ^(static/.*)$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(cgi-bin/mysite.fcgi)
RewriteRule ^(.*)$ cgi-bin/mysite.fcgi/$1 [QSA,L] 
```

有谁知道我怎样才能让它正常工作？

感谢您的任何建议:)

干杯

贾勒特

# mysql - 使用条件语句连接/更新表？

> ID：11493809
> 
> 赞同：0
> 
> 时间：2012-07-15T16:55:24.220
> 
> 标签：mysql, join

我有一个注册表`( id , counter , group_name , type )`

和包含这些表的组表

```
software_group  
website_group
news_group 
 etc .. 
```

每个组都在注册表以及它自己的组表中

现在，如果我想更新注册表中的一行，我也想更新适当的组表

`type`列表示组表，所以我有类似的东西：

```
UPDATE registry JOIN 

CASE WHEN registry.type = 1 THEN software_group 
CASE WHEN registry.type = 2 THEN website_group
CASE WHEN registry.type = 3 THEN news_group 

AS other_table 

ON registry.id = other_table.reg_id
  SET registry.name = $newname
  ,
  other_table.name = $newname

WHERE registry.id = $id 
```

有可能做这样的事情吗？我可以只选择注册表行并使用 php 完成工作，但我认为加入/更新会比选择/更新更快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:58:06.823

我认为如果您在应用程序层而不是数据库层处理条件，则在运行时动态连接表将是最好的

# jquery - jQuery点击功能不适用于谷歌地图

> ID：11493822
> 
> 赞同：0
> 
> 时间：2012-07-15T16:57:10.087
> 
> 标签：jquery, google-maps

单击地图上的元素时，我正在谷歌地图上加载信息框。信息窗口内的内容是用 jQuery 异步加载的

我试图识别何时单击 ajax 加载的内容中的一个元素（使用 jQuery），但我无法让 jQuery 识别单击事件。

我曾尝试使用**实时**点击事件，但仍无法识别：

```
$(function(){
    $('.ajax-trigger-add-to-watchlist').live("click", function(){
        alert('1');
    });
}); 
```

我猜这只是谷歌地图 API 的一些奇怪行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:03:16.807

仍然不确定 jQuery 部分发生了什么，但我通过`onclick`在触发器元素上使用内联调用解决了这个问题

# c# - C# 中的多维数组访问性能

> ID：11493829
> 
> 赞同：4
> 
> 时间：2012-07-15T16:57:41.680
> 
> 标签：c#, .net, performance, multidimensional-array

我已经看到 C# 为访问一维数组“进行了优化”（不调用函数来访问元素），但对于 multidim-arrays 函数 GetValue 每次都会调用。为什么不每次未实现“正常”访问（指针移动+检查）或至少此函数未展平时调用此函数？

我找不到合乎逻辑的原因。（multidim-arrays 的性能不是很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:12:22.147

我试了一下，每个元素访问大约有 14 条指令，这是由于边界检查和尺寸大小的乘法。

如果性能很重要，请使用固定到指针的一维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:16:46.160

我没有取消选中“抑制 JIT 优化...”因此函数调用 GetValue 没有内联。

优化代码：

```
b = a[3, 5];
00000026  mov         eax,3 
0000002b  lea         edx,[eax+2] 
0000002e  sub         eax,dword ptr [ecx+10h] 
00000031  cmp         eax,dword ptr [ecx+8] 
00000034  jae         0000010B 
0000003a  sub         edx,dword ptr [ecx+14h] 
0000003d  cmp         edx,dword ptr [ecx+0Ch] 
00000040  jae         0000010B 
00000046  imul        eax,dword ptr [ecx+0Ch] 
0000004a  add         eax,edx 
0000004c  mov         edi,dword ptr [ecx+eax*4+18h] 
```

# filter - 过滤包含大于 XY 的浮点数的行

> ID：11493831
> 
> 赞同：3
> 
> 时间：2012-07-15T16:58:00.257
> 
> 标签：filter, floating-point, sed, numbers, line

我正在尝试制作一个非常简单的 shell 脚本来释放一些内存空间。为此，我正在使用命令

```
$ ps xopmem o%c 
```

输出正在运行的进程列表及其百分比内存使用情况。现在，我只想过滤掉那些值（在第一个字段中）大于 5.0 的行。我怎样才能做到这一点？我最好使用 SED。

PS：我在互联网上搜索了这个主题，但一无所获。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T17:24:13.943

`sed`无法进行数值比较，您需要向上移动一个工具，即`awk`：

```
ps xopmem o%c | awk '$1 > 5.0' 
```

即当第一个字段大于5时，执行默认块：`{ print $0 }`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:09:31.973

单程。`-n`swith 避免自动打印，并且正则表达式匹配开头的任何空格和大于 5.0 的任何数字。该`p`指令打印与前一个正则表达式匹配的行。

```
ps xopmem o%c | sed -ne '/^ *[5-9]\.[0-9]/ p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:31:05.060

```
ps xopmem o%c | sort -nr | \
    while read line
    do v=$(echo $line | cut -d' ' -f1); 
      [[ $v < 5 ]] && break; 
      echo $line; 
    done 
```

# php - 间歇性无法getUser()，导致多次调用getLoginURL

> ID：11493838
> 
> 赞同：0
> 
> 时间：2012-07-15T16:58:31.053
> 
> 标签：php, facebook, facebook-graph-api

这个想法是，如果`user_id`存在 a ，则将用户重定向到[https://www.example.com/XYZ/](https://www.example.com/XYZ/)。如果没有，请致电`getLoginUrl`获得第`user_id`一个。问题是我无法得到任何`user_id`. 因此，脚本继续执行`getLoginUrl`导致 CSRF 错误发生（我得到多个状态值）。这个问题是非常随机的。

有任何想法吗？

```
require_once('../src/facebook.php');
require_once ('../src/fbconfig.php');

$user_id = $facebook->getUser();
if (!$user_id) {
    $loginUrl   = $facebook->getLoginUrl(array(
      'scope'         => 'publish_stream, user_likes')
    );
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
} else {
    echo "<script>top.location.href = 'https://www.example.com/XYZ/'</script>";
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:10:53.807

尝试：

```
print_r($user_id); 
```

在您设置 $user_id 并继续尝试直到找到其中一个“随机”案例并观察它返回的内容之后。然后，您需要在 if/then 语句中添加其他条件来处理意外返回，或者可能执行重试 [当然要限制以防止竞争条件]。

此外，根据服务器和魔术引号设置，您可能希望将第一种情况下的重定向代码更改为以下内容：

```
echo "<script type='text/javascript'>top.location.href = '" . $loginUrl . "';</script>"; 
```

我怀疑这与它有什么关系，或者你会在 URL 中看到它，但很难说出你的应用程序发生了什么，而且“随机”总是很痛苦。尝试找出在那些“随机”情况下返回的内容，这应该告诉您如何处理它。

# c# - 选中的单选按钮已更改事件触发两次

> ID：11493845
> 
> 赞同：38
> 
> 时间：2012-07-15T16:59:10.697
> 
> 标签：c#, winforms, radio-button, oncheckedchanged

请阅读我的问题，它不是重复的问题。

我在 Windows 窗体上有三个单选按钮，所有这些按钮都关联了常见的“CheckedChanged”事件。当我单击这些单选按钮中的任何一个时，它会触发两次“CheckedChanged”事件。

这是我的代码：

```
private void radioButtons_CheckedChanged(object sender, EventArgs e)
{
    //My Code
} 
```

我插入了断点，并且此事件中的整个代码迭代了两次。请告诉我为什么它会这样？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-15T17:20:54.720

当另一个回答者正确地说，事件被解雇了两次，因为每当一个组内的一个Radiobutton被检查另一个时，将取消选中 - 因此被检查的更改的事件将触发两次。

要仅在此事件中为刚刚选择的 RadioButton 执行任何工作，您可以查看 sender 对象，执行以下操作：

```
void radioButtons_CheckedChanged(object sender, EventArgs e)
{
    RadioButton rb = sender as RadioButton;
    if (rb != null)
    {
        if (rb.Checked)
        {
            // Only one radio button will be checked
            Console.WriteLine("Changed: " + rb.Name);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-09T10:16:02.187

为避免它，只需检查是否`radioButton`已检查

例如：

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    if (radioButton1.Checked)
        //your code
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T17:05:37.177

每当 Checked 属性更改时，都会引发 CheckedChanged。如果您选择一个 RadioButton，那么之前选择的 RadioButton 将被取消选中（触发 CheckedChanged），然后新的 RadioButton 被选中（触发 CheckedChanged）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T17:07:07.890

它触发一次单选按钮从选中到未选中的转换，再次触发单选按钮从未选中到选中的转换（即选中状态的任何更改都会触发事件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T02:39:28.243

您可以将每个 RadioButton 的 AutoCheck 属性设置为 true，然后捕获 Click 事件而不是 CheckChanged 事件。这将确保只触发一个事件，并且如果需要处理单击，处理程序中的逻辑可以将发送者转换为 RadioButton 类型。如果处理程序逻辑很简单，通常可以避免强制转换。这是一个处理三个控件的示例，rbTextNumeric、rbTextFixed 和 rbTextFromFile：

```
 private void rbText_Click(object sender, EventArgs e)
    {
       flowLayoutPanelTextNumeric.Enabled = rbTextNumeric.Checked;
       txtBoxTextFixed.Enabled = rbTextFixed.Checked;
       flowLayoutPanelTextFromFile.Enabled = rbTextFromFile.Checked;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-29T21:43:25.370

```
{
    public partial class Form3 : Form
    {
        public Form3()
        {
            InitializeComponent();
        }
        int click = 0;
        private void radioButton1_Click(object sender, EventArgs e)
        {
            click++;
            if (click %2==1)
            {
                radioButton1.Checked = true;
            }
            if (click %2==0)
            {
                radioButton1.Checked = false;
            }
            if (radioButton1.Checked==true)
            {
                label1.Text = "Cheked";
            }
            if (radioButton1.Checked==false)
            {
                label1.Text = "Uncheked";
            }
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-05T11:32:09.590

其他答案是正确的，但错过了潜在问题的原因。当检查单选按钮时，发送的第一个事件是从未选中的项目的更改，但是如果您通过控件名称检查其状态，您仍将看到其旧的选中状态，因为表单尚未更新。要查看其真实状态，您需要强制转换发送者对象。这允许您在需要时执行与正在取消选择的条件相关的任何操作。

在下面的常见场景中，多个单选按钮被发送到同一个处理程序事件。简单地检查发件人的状态是否已检查在这里不起作用，因为我们需要根据按下的单选按钮执行不同的操作。所以首先我们忽略任何刚刚被取消选中的发件人。然后我们通过控件名称识别检查的发件人以处理正确的操作。

```
private void ModeChangedExample(object sender, EventArgs e)
{
    // multiple radio buttons come here
    // We only want to process the checked item.
    // if you need to something based on the item which was just unchecked don't use this technique. 
    // The state of the sender has not been updated yet in the form.
    // so checking against rdo_A check state will still show it as checked even if it has just been unchecked
    // only the sender variable is up to date at this point.

    // To prevent processing the item which has just been uncheked
    RadioButton RD = sender as RadioButton;
    if (RD.Checked == false) return;

    if (rdo_A.Name == RD.Name)
    {
        //Do stuff
    }

    if (rdo_B..Name == RD.Name)
    {
        // Do other stuff
    }

    if (rdo_C.Name == RD.Name)
    {
        // Do something else
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-08T13:26:01.830

当连续单击一系列单选按钮时，会出现这种双重检查问题。我遇到了同样的问题。最后一次单击会给出两个结果。为了克服这个问题，我最后做了一个虚拟点击。双击停止了。试试这个方法。文卡特拉曼

# iphone - iOS 上的系统级点击模拟

> ID：11493846
> 
> 赞同：4
> 
> 时间：2012-07-15T16:59:11.087
> 
> 标签：iphone, objective-c, ios, ipad, jailbreak

我想通过 MobileSubstrate 插件在 iOS 上实现系统范围的点击模拟。这个想法是能够在 iOS 5.1.1 中在系统范围内模拟触摸（第一次是单点触摸，然后是多点触摸）。

我已经成功地实现[了这篇文章](http://cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)来模拟对特定视图的触摸，我现在希望能够在系统范围内模拟它们。

我知道我应该使用私有 MobileServices 框架来执行此操作，并且我已经在 GSEvent 上[记录了自己](https://github.com/kennytm/iphone-private-frameworks/blob/master/GraphicsServices/GSEvent.h)（我还查看了 Veency 和 MouseSupport 源代码）。

我试图连接一个视图来拦截 UIEvents 并查看底层结构：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    GSEventRef eventRef = (GSEventRef)[event performSelector:@selector( _gsEvent)];
    GSEventRecord record = *_GSEventGetGSEventRecord(eventRef);
    < breakpoint here to look at record >
} 
```

结果与上面详述的旧（iOS 3）结构极为相似。

然后我尝试自己触发这些事件（在独立应用程序上，目前不是 MS 调整）：

```
+(void)simulateTouchDown:(CGPoint)point{

    point.x = roundf(point.x);
    point.y = roundf(point.y);

    GSEventRecord record;
    memset(&record, 0, sizeof(record));

    record.type = kGSEventHand;
    record.windowLocation = point;
    record.timestamp = GSCurrentEventTimestamp();

    GSSendSystemEvent(&record);

} 
```

现在，这根本不起作用（也不会崩溃）。

大多数代码（MouseSupport、Veency）看起来像这样

```
// Create & populate a GSEvent
struct {
    struct GSEventRecord record;
    struct {
        struct GSEventRecordInfo info;
        struct GSPathInfo path;
    } data;
} event;

memset(&event, 0, sizeof(event));

event.record.type = kGSEventHand;
event.record.windowLocation = point;
event.record.timestamp = GSCurrentEventTimestamp();
event.record.infoSize = sizeof(event.data);

event.data.info.handInfo.type = kGSHandInfoTypeTouchDown;    
event.data.info.handInfo._0x44 = 0x1;
event.data.info.handInfo._0x48 = 0x1;

event.data.info.pathPositions = 1;  

event.data.path.pathIndex = 0x01;
event.data.path.pathIdentity = 0x02;
event.data.path.pathProximity = 0x00;
event.data.path.pathLocation = event.record.windowLocation;

GSSendSystemEvent(&event.record); 
```

仅有的 ：

*   GSEventRecordInfo 未知（我找不到它可能在哪里定义）
*   我看不出让整个赛事只通过记录的意义

请在iOS 5上经历过这个的人指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:39:42.883

GSEventRecordInfo 可能是自 iOS 3.2 以来引入的（这是您链接到的图形服务标头的来源）。class-dump 在 iOS 5.1.1 上实际在您的设备上的框架，看看它是否在那里定义？

# node.js - 将路由逻辑移出 app.js

> ID：11493849
> 
> 赞同：3
> 
> 时间：2012-07-15T16:59:48.053
> 
> 标签：node.js, express

我正在使用 node.js 和 Express 设计一个应用程序，我想知道是否可以将某些路由逻辑移出 app.js 文件。例如，我的 app.js 当前包含：

```
app.get('/groups',routes.groups);
app.get('/',routes.index); 
```

有没有办法将此逻辑移出 app.js 文件，并且只有以下内容：

```
app.get('/:url',routes.get);
app.post('/:url",routes.post); 
```

这样所有`GET`请求都将由 ? 处理`routes.get`，所有`POST`请求都由`routes.post`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:10:38.210

您可以将正则表达式作为路由定义传递：

```
app.get(/.+/, someFunction); 
```

这将匹配任何东西。但是，如果您只是想将路由定义移到主 app.js 文件之外，那么执行以下操作会更清晰：

**应用程序.js**

```
var app = require('express').createServer();

...

require('routes').addRoutes(app); 
```

**路由.js**

```
exports.addRoutes = function(app) {
    app.get('/groups', function(req, res) {
        ...
    });
}; 
```

这样，您仍然使用 Express 的内置路由，而不是重新滚动您自己的路由（就像您在示例中必须做的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:14:48.980

***完整披露**：我是下面提到的节点模块的开发人员。*

有一个节点模块可以满足您的要求（并且最终会做更多）。它为 express 提供基于约定优于配置的自动路由。模块名称是 honey-express，但目前处于 alpha 开发阶段，尚未在 NPM 上可用（但您可以从[https://github.com/jaylach/honey-express](https://github.com/jaylach/honey-express)的源代码中获取它。

一个简短的例子说明它是如何工作的：（请注意这个咖啡脚本）

```
# Inside your testController.coffee file. Should live inside /app/controllers
honey = require 'honey-express'

TestController = new honey.Controller
    index: ->
        # @view() is a helper method to automatically render the view for the action you're executing. 
        # As long as a view (with an extension that matches your setup view engine) lives at /app/views/controller/actionName (without method, so index and not getIndex), it will be rendered.
        @view()
    postTest: (data) ->
        # Do something with data 
```

现在，在您的 app.js 文件中，您只需要设置一些简单的配置：

```
# in your app.configure callback...
honey.config 'app root', __dirname + '/app'
app.use honey.router() 
```

现在，只要有请求进来，honey 就会自动寻找具有指定路由的控制器，然后寻找匹配的动作.. 例如 -

*   /test 会自动路由到 testController 的 index/getIndex() 方法
*   / 会自动路由到 homeController 的 index/getIndex() 方法（默认控制器是 home），如果存在的话
*   如果 http 方法是 POST，/test/test 会自动路由到 testController 的 postTest() 方法。

正如我所提到的，该模块目前处于 alpha 状态，但自动路由工作得很好，并且现在已经在两个不同的项目上进行了测试 :) 但是由于它处于 alpha 开发阶段，因此缺少文档。如果你决定走这条路，你可以查看我在 github 上的示例，查看代码，或者联系我，我很乐意提供帮助 :)

编辑：我还应该注意，honey-express 确实需要最新（BETA）版本的 express，因为它使用了 express 2.x 中不存在的功能。

# c# - 使用 NOT IN 的 SQL 到 LINQ 转换

> ID：11493861
> 
> 赞同：0
> 
> 时间：2012-07-15T17:01:06.157
> 
> 标签：c#, sql-to-linq-conversion

请为mysql查询形成一个LINQ查询

```
select a.name ,a.amount 
from acount as a 
where a.acountid NOT IN (select c.id from saving as c where c.userid="x") 
and a.userid="x";
X=1; 
```

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:14:10.633

根本没有测试过，但这些行中的某些东西应该可以工作......

```
var query =    
    from a in db.Account
    where !(from s in db.Savings 
            where s.UserId == "x"
            select s.id)    
           .Contains(a.AccountId)    
    && a.UserId == "x"
    select new { a.Name, a.Amount }; 
```

# sql - 按除一列之外的所有列分组以计算剩余列上的不同值

> ID：11493862
> 
> 赞同：4
> 
> 时间：2012-07-15T17:01:09.020
> 
> 标签：sql, sql-server-2008

我有`table A`五行和以下值：

```
Column1  Column2  Column3  Column4
-------  -------  -------  -------
anna     ben      cat      d
anna     ben      cat      e
anna     ben      cat      f
gina     hugh     ken      m
gina     hugh     ken      p 
```

我想添加另一个名为`Column5`. `Column 5`前 3 行的值为3，接下来的 2 行为 2：

```
Column1  Column2  Column3  Column4  Column5
-------  -------  -------  -------  -------
anna     ben      cat      d        3
anna     ben      cat      e        3
anna     ben      cat      f        3
gina     hugh     ken      m        2
gina     hugh     ken      p        2 
```

我是怎么做到的：

```
SELECT DISTINCT COUNT (DISTINCT t1.Column4) AS Column5,
Column1, Column2, Column3, Column4
FROM TableA AS t1
GROUP BY Column1, Column2, Column3; 
```

这不起作用：

> 消息 8120，级别 16，状态 1，过程 COUNT，第 29
> 行列 'Column4' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

请问有什么帮助吗？非常感激。

PS：如果我`Column4`在 group by 子句中添加，我在结果表中只得到“1”的值`Column5`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T18:22:42.470

另一种方法是先选择不同的行，然后应用窗口化的 COUNT() 函数：

```
WITH distinctrows AS (
  SELECT DISTINCT
    Column1,
    Column2,
    Column3,
    Column4
  FROM TableA
)
SELECT
  Column1,
  Column2,
  Column3,
  Column4,
  COUNT(Column4) OVER (PARTITION BY Column1, Column2, Column3) AS Column5
FROM distinctrows
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T18:03:09.663

如果您不需要`DISTINCT`，这将很容易。

```
SELECT Column1,
       Column2,
       Column3,
       Column4,
       Count(Column4) OVER (partition BY Column1, Column2, Column3) AS Column5
FROM   TableA AS t1 
```

但是 SQL Server 中的窗口聚合当前不支持`DISTINCT`，因此您可以使用

```
WITH CTE
     AS (SELECT Column1,
                Column2,
                Column3,
                Count(DISTINCT Column4) AS Column5
         FROM   TableA
         GROUP  BY Column1,
                   Column2,
                   Column3)
SELECT A.Column1,
       A.Column2,
       A.Column3,
       A.Column4,
       C.Column5
FROM   TableA A
       JOIN CTE C
         ON A.Column1 = C.Column1
            AND A.Column2 = C.Column2
            AND A.Column3 = C.Column3 
```

（为简单起见，我假设这些列不可为空）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:09:35.077

这是你想要的？

```
SELECT COUNT (DISTINCT t1.Column4) AS Column5,
Column1, Column2, Column3
FROM TableA AS t1
GROUP BY Column1, Column2, Column3; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T19:08:16.510

这应该这样做：

```
;WITH 
  countCol4 As
(
    SELECT  Column1, Column2, Column3, Column4
    ,       ROW_NUMBER() OVER(PARTITION BY Column1, Column2, Column3, Column4
                ORDER BY Column4)   As Col4Count
    FROM    TableA  As t1
)
SELECT  Column1, Column2, Column3, Column4
,       COUNT(*) OVER(PARTITION BY Column1, Column2, Column3) As Column5
FROM    countCol4
WHERE   Col4Count = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T17:39:06.553

除了“取消设置”我刚刚阅读但尚未尝试过的“唯一完整分组”模式之外，我只是应用了以下更快的解决方案，这是一个技巧，我这样做是为了避免出现该错误：

```
 SELECT 
     COUNT (DISTINCT t1.Column4) AS Column5, Column1, Column2, Column3, MAX(Column4) AS Column4
 FROM TableA AS t1 
 GROUP BY Column1, Column2, Column3; 
```

我在 Column4 上有字符值。这似乎没问题，我现在看到 Column5 中的值范围为 1-6，正如我所预料的那样。谢谢！

警告：这不是一个好的答案。原因请参见下面的评论。

# java - 如何查看arraylist java中的所有项目？

> ID：11493863
> 
> 赞同：5
> 
> 时间：2012-07-15T17:01:10.530
> 
> 标签：java, android, list, arraylist

在我的 android 应用程序中，我希望能够将字符串值添加到我在主要 android 活动中声明的静态数组列表中。逻辑是这样的：

1）当您单击按钮并开始活动时。在 oncreate 方法上，我想将作为当前活动的类的名称保存为字符串值。例如：

```
String className = "com.lunchlist.demo"; 
```

分配此值后，我想立即将此字符串值添加到我在主要 android 活动中声明的静态 ArrayList（意味着第一个启动的 android 活动）添加值后

我做了这样的事情：

```
static String List<String> members = new ArrayList<String>(); 
```

这是在我的主要活动中声明的。现在，当我单击一个按钮开始另一个活动时，我使用它在我的 oncreate 方法中将当前活动的字符串类名添加到我的数组列表中：

```
 String className = "com.lunchlist.demo" 
  members.add(className); 
```

我现在的问题是，这会将字符串值添加到我的数组列表中并保存以备后用吗？例如，如果我单击三个不同的按钮，这会将三个不同的 className 值添加到 arraylist。这是否会存储一个字符串值，该字符串值将为我的成员数组列表保存三个不同的字符串值？如何检查我的数组列表中的每个项目以查看在启动新活动时是否正在添加值？

我问这个是因为我需要检索它并使用共享首选项存储这些值，然后检索它们并使用作为启动活动的类的字符串值启动意图。我让活动从一个类名的字符串值开始，我只是在存储它们时遇到了麻烦。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T17:34:14.173

Answering to all of your questions:

> would this add the string value to my arraylist and save it for later use?

Yes. Your code seems perfect to do it with no problems.

> For example If I click three different buttons this will add three different className values to the arraylist. Would this then store a string value that would hold three different string values for my members arraylist?

If you tell to your button's `onClickListener` to add a string to the members ArrayList then it will be done and no matter if you already had previously added that member to the ArrayList because array lists don't care if there is duplicated data or not.

> How would I check each item in my arraylist to see if the values are being added when a new activity is started?

You have to iterate your array list with a for or a for-each cicle and then print that member name as a log entry.

*   For-each cicle

    ```
    for (String member : members){
        Log.i("Member name: ", member);
    } 
    ```

*   Simple For cicle

    ```
    int listSize = members.size();

    for (int i = 0; i<listSize; i++){
        Log.i("Member name: ", members.get(i));
    } 
    ```

If you try to print/ log a value which index is out of range, i.e., `i < 0 || i >= listSize` then a [IndexOutOfBoundsException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IndexOutOfBoundsException.html) will be thrown and crash your app.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T17:05:39.183

使用 Java 1.5 中引入的 For-Each 进行迭代：

```
for (String s : members){
    Log.d("My array list content: ", s);
} 
```

有关详细信息，请参阅此链接：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-05T09:48:52.780

**Try this:)**

We can implement by these two way

1.  foreach

2.  for loop

String type arraylist

```
ArrayList<String> limits = new ArrayList<String>(); // String arrayList 
```

Using foreach

```
 for (String str_Agil : limits)   // using foreach 
                {
                    Log.e("Agil_Limits - " , str_Agil);
                } 
```

Using forloop

```
 for(int agil=0; agil<=limits.size(); agil++) // using for loop
                {
                    Log.e("Agil_Limits - " , limits.get(agil).toString());
                } 
```

# c# - 编译器错误：无法识别属性

> ID：11493864
> 
> 赞同：0
> 
> 时间：2012-07-15T17:01:11.563
> 
> 标签：c#, class, generics

我有一个列表，其中包含作为泛型类型的“参考”类。所以我应该能够用“Reference”类的子类填充我的列表，但是编译器会报告一个错误：

> `'naturalCalc.Enginee.Reference'`不包含 for 的定义，也找不到接受第一个类型参数的`'Opener'`扩展方法（您是否缺少 using 指令或程序集引用？）（CS1061）`'Opener'``'naturalCalc.Enginee.Reference'``ToPostfix.cs:27,34`

'ToPostfix' 类中的切换代码确保项目在第二种情况下具有 'Opener' 属性。

```
// The 'MyBrackets' class which contains the 'Opener' property.
public class MyBrackets : naturalCalc.Enginee.Reference
{
    private bool opener;
    public MyBrackets( bool opener )
    {
        this.opener = opener;
    }

    public bool Opener { get { return this.Opener; } }
} 
```

* * *

```
// The 'ToPostfix' class in which the error is taken place.
class ToPostfix
{
    List<Reference> infix = new List<Reference>();
    List<Reference> postfix = new List<Reference>();

    public ToPostfix(List<Reference> infixForm)
    {
        this.infix = infixForm;

        foreach (Reference item in this.infix)
        {
            switch ( item.ToString() )
            {
                case "naturalCalc.Enginee.MyFloat":
                    this.postfix.Add(item);
                    break;

                case "naturalCalc.Enginee.MyBrackets":
                    if (item.Opener)
                    {
                        this.postfix.Add(item);
                    }
                    break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:04:55.687

如果可能，您应该尝试将方法移动到界面中。

如果这是不可能的，您可以动态测试类型并按如下方式进行转换：

```
Opener opener = item as Opener;
if (opener != null)
{
        if (opener.Opener)
        {
            this.postfix.Add(item);
        }
} 
```

您的吸气剂也无法正常工作。您还应该学习使用自动实现的属性：

```
public class MyBrackets : naturalCalc.Enginee.Reference
{
    public MyBrackets(bool opener)
    {
        this.Opener = opener;
    }

    public bool Opener { get; private set; } // Auto-implemented property.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:18:13.073

您正在使用`List`of `Reference`，但`Opener`在`MyBracketClass`. 如果您希望从`Reference`实例访问您的属性，请将其移到那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:06:25.353

这**不是一个完整的答案**，但我相信您的 MyBrackets 课程有错误。 `opener`并且`Opener`不是同一个属性。

我认为应该是：

```
public class MyBrackets : naturalCalc.Enginee.Reference
{
    public MyBrackets(bool opener)
    {
        this.Opener = opener;
    }

    public bool Opener 
    {
        private set { this.Opener = value; }
        get { return this.Opener; } 
    }
} 
```

问候

# python - 并行更新python中的搁置字典

> ID：11493867
> 
> 赞同：4
> 
> 时间：2012-07-15T17:01:45.957
> 
> 标签：python, parallel-processing, multiprocessing, shelve

我有一个程序，它需要一个非常大的输入文件并从中制作一个字典。由于无法将其放入内存中，因此我决定使用搁置将其写入磁盘。现在我需要利用系统中可用的多个内核（其中 8 个），以便加快解析速度。我认为最明显的方法是将我的输入文件分成 8 个部分并同时在所有 8 个部分上运行代码。问题是我最后只需要一本字典。不是8个。那么如何使用搁置来并行更新一个字典呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T17:29:06.357

[我在这里](https://stackoverflow.com/a/11196615/496445)给出了一个非常详细的答案，关于[在 python 中处理来自多个进程的单个文件](https://stackoverflow.com/questions/11196367/processing-single-file-from-multiple-processes-in-python)

不要试图弄清楚如何让多个进程同时写入搁置。考虑一下如何让单个流程将结果交付搁置。

这个想法是你有一个单一的进程产生一个[队列](http://docs.python.org/library/multiprocessing.html#multiprocessing.Queue)的输入。然后，您有尽可能多的工作人员来接收排队的项目并完成工作。完成后，它们将结果放入结果队列中，以供接收器读取。好处是您不必提前手动拆分工作。只需产生“输入”并让读取的任何工作人员接受并处理它。

使用此模式，您可以根据系统功能扩大或缩小工作人员。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T17:07:49.587

`shelve` [不支持并发访问](https://stackoverflow.com/a/486676/344821)。有几个选项可以完成您想要的：

1.  每个过程制作一个架子，然后在最后合并。

2.  让工作进程将其结果发送回主进程，例如`multiprocessing.Pipe`；然后主人将它们存放在架子上。

3.  我认为您可以让[bsddb](http://www.jcea.es/programacion/pybsddb.htm)在类似搁置的 API 中使用并发访问，但我从来没有需要这样做。

# c# - 如何为角色以及特定用户使用自定义授权属性？

> ID：11493873
> 
> 赞同：35
> 
> 时间：2012-07-15T17:02:23.103
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我有我的行动方法

```
[Authorize(Roles="Admin")]
public ActionResult EditPosts(int id)
{
    return View();
} 
```

在我的情况下，我需要授权管理员以便他们可以编辑帖子，但是（这是很酷的部分），我还需要允许帖子的创建者能够编辑作为普通用户的帖子。那么如何过滤掉创建帖子的用户以及管理员，但让其他人未经授权？我收到 PostEntry id 作为路由参数，但这是在属性之后，并且属性只接受常量参数，看起来非常困难，非常感谢您的回答，干杯！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-15T17:30:43.130

您可以编写自定义授权属性：

```
public class AuthorizeAdminOrOwnerOfPostAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // The user is not authenticated
            return false;
        }

        var user = httpContext.User;
        if (user.IsInRole("Admin"))
        {
            // Administrator => let him in
            return true;
        }

        var rd = httpContext.Request.RequestContext.RouteData;
        var id = rd.Values["id"] as string;
        if (string.IsNullOrEmpty(id))
        {
            // No id was specified => we do not allow access
            return false;
        }

        return IsOwnerOfPost(user.Identity.Name, id);
    }

    private bool IsOwnerOfPost(string username, string postId)
    {
        // TODO: you know what to do here
        throw new NotImplementedException();
    }
} 
```

然后用它装饰你的控制器动作：

```
[AuthorizeAdminOrOwnerOfPost]
public ActionResult EditPosts(int id)
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-08T20:45:35.643

我知道您已经接受了一个答案，并且这是不久前发布的..（顺便说一句：添加自定义属性的优秀答案），但是我要指出以下几点：

如果您使用此属性一次。在单一方法上。这不是一个好的实现。相反，您应该拥有：

```
[Authorize]   // Just make sure they are auth'ed at all.
public ActionResult EditPosts(int id)
{
    Post SomePost = findPostByID (id);   // However you do it - single lookup of post

    if (!user.IsInRole("Admin") &&  !{IsOwnerOfPost(post)} )  Return Not Authorized

  ... Edit post code here
} 
```

这具有以下优点：

1.  没有其他类，以后有人会想知道它在哪里使用。
2.  没有不能在其他任何地方使用的类（您不会通过自定义属性获得重用）
3.  性能更好：单次获取 Post
4.  让某人更容易阅读/弄清楚它是如何工作的。没有神奇的代码可以追踪。
5.  多年后，当 HttpContextBase 类不存在，或者用于获取 Id 参数的技巧的其他部分消失时，代码仍然有效......

# iphone - 通过解析不断变化的 HTML 来获取图像

> ID：11493878
> 
> 赞同：0
> 
> 时间：2012-07-15T17:03:14.933
> 
> 标签：iphone, ios5, html-parsing, image

我正在开发一个从 URL (http://m.9gag.com) 检索图像的 iOS 应用程序。碰巧的是，URL 的 HTML 一直在变化，每当我有工作代码时，网站的样式就会发生变化。

有什么方法可以从 HTML 中提取这些图像而不必担心网页更改？目前没有公共 API，所以很遗憾这不是一个选择。

我期待听到一些选项。

此外，如果页面设置为当用户滚动到底部时，它会加载更多内容，我如何才能根据我所获得的 HTML 解析的深度来加载更多的 html？我没有使用 webview，我只需要更新我最初检索到的 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:11:44.730

在您的情况下，这似乎是最简单的方法 - 使用正则表达式（例如`http://[A-Za-z0-9_/\.]*\.jpg`）来提取 URL 并跟踪已经提取的图像。

# android - android admob 必须声明 AdActivity

> ID：11493880
> 
> 赞同：2
> 
> 时间：2012-07-15T17:03:36.753
> 
> 标签：android, admob

在写这个问题之前，我已经检查了 Stack Overflow 上的各种问题，例如：

*   [https://stackoverflow.com/questions/10672334/could-not-find-com-google-ads-adactivity-must-have-adactivity-declared-in-the-ma](https://stackoverflow.com/questions/10672334/could-not-find-com-google-ads-adactivity-must-have-adactivity-declared-in-the-ma)

我检查了拼写，似乎是正确的。

我还检查了`targetSdkVersion`是否大于 Sdk13。我的也设置了

```
android:targetSdkVersion="15" /> 
```

我检查了这个问题，但我不确定这是否是问题所在。

*   [将 Admob 代码添加到 Android 出现错误：您必须在 AndroidManifest.xml 中声明 AdActivity](https://stackoverflow.com/questions/8285681/adding-admob-code-to-android-giving-error-you-must-have-adactivity-declared-in)

我也咨询过这个特定的网址

*   [Eclipse 中针对 android:configChanges 的 Admob 错误](https://stackoverflow.com/questions/7899767/admob-error-in-eclipse-for-androidconfigchanges)

* * *

```
package com.example.advert;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.LinearLayout;
import android.support.v4.app.NavUtils;
import com.google.ads.*;
public class MainActivity extends Activity {
    private AdView adView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

String MY_AD_UNIT_ID = "a15000820551daa";

 // Create the adView
    adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID);

    // Lookup your LinearLayout assuming it’s been given
    // the attribute android:id="@+id/mainLayout"
    LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());

}

@Override
public void onDestroy() {
  if (adView != null) {
    adView.destroy();
  }
  super.onDestroy();
}

} 
```

AndroidManifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.advert"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity 
        android:name="com.google.ads.AdActivity"

        ></activity>
    </application>

</manifest> 
```

返回的错误消息是 add 应该在的黑框。还有红色文字，上面写着您必须在 AndroidManifest.xml 中使用 configChanges 声明 AdActivity

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T18:38:01.950

AdActivity 中缺少的 android:configChanges 属性，如下所示：

```
<activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

此外，您的项目需要参考 Android SDK 2.2 (API 8) 及更高版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T06:53:48.613

我修复了放置 android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 的问题。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.admob"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    </application>
 <uses-permission android:name="android.permission.INTERNET" />
   <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
</manifest> 
```

# ruby-on-rails - 每个 it {} 块只有一个期望：那么如何改进这个规范？

> ID：11493881
> 
> 赞同：0
> 
> 时间：2012-07-15T17:03:50.210
> 
> 标签：ruby-on-rails, testing, rspec

我的 Rails 模型：任务 has_many 职位。

场景：当我创建一个新职位时，它应该为自己创建一个任务。我想测试一下，我正在这样做：

```
context "creating a new position" do
  let(:position) { create :position, name: 'Read some books', :task => nil }

  it "should create a simple task" do
    Task.find_by_name('Read some books').should be_nil # First should
    position # Execute let() block (FactoryGirl is lazy evaluating)
    Task.find_by_name('Read some books').should_not be_nil # Second (more relevant) should
  end
end 
```

那么我应该如何改进我的测试呢？第一个“应该”只是确保没有任务，因此我们可以确定创建职位会创建任务。但这违反了“只有一个应该每个它块”的原则。那么这个呢？

```
context "creating a new position" do
  let(:position) do
    position = create :position, name: 'Read some books', :task => nil
    Task.delete_all
    position
  end

  it "should create a simple task" do
    position # Execute let() block (FactoryGirl is lazy evaluating)
    Task.find_by_name('Read some books').should_not be_nil
  end
end 
```

还是我应该简单地指望无论如何都不应该有这样的任务（因为一个干净的测试数据库不会有一个）？感谢您的意见。

**更新（解决方案）**

经过一番研究，我找到了`change`RSpec 的匹配器：

```
let(:position) { create :position, name: 'Read some books', :task => nil }

it "should create a simple task" do
  # Thanks to FactoryGirl's lazy evaluation of let(), the position doesn't yet exist in the first place, and then after calling position in the expect{} block, it is created.
  expect { position }.to change{ Task.count(conditions: { name: 'Read some books' }) }.by(1)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:20:44.630

### 测试什么

我不会详细说明测试本身是否在任何程度上有用。对我来说，他们似乎在执行基本的数据库功能，而不是应用程序逻辑，这几乎没有用处，但只有您才能真正决定要测试的重要内容。

### 请明确点

在您给出的示例中，没有真正的理由使用 let 块来记忆变量。如果只有一个测试需要记录，则仅在该特定测试中实例化它。例如：

```
context 'creating a new position' do
  it 'should be nil when the position record is missing' do
    Task.find_by_name('Read some books').should be_nil
  end

  it 'should successfully create a position' do
    create :position, name: 'Read some books', :task => nil
    Task.find_by_name('Read some books').should_not be_nil
  end
end 
```

或者，如果您尝试测试缺少记录时应用程序的行为，请继续记忆变量或在 before 块中创建记录，但*在特定测试中*明确删除记录。

### 多个上下文

最后，如果您发现在单个测试中设置的状态太多，这通常是您应该考虑将测试拆分到不同上下文中的线索。例如，您可能希望将测试分成一个上下文，该上下文在记录不存在时检查行为，而另一个上下文则用于记录*确实*存在时的行为。

就像所有测试一样，它是一门艺术而不是一门科学。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:19:09.357

[RSpec 2.11](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/expect-change)允许您将块传递给`change`，并且它期望块的返回值是改变的东西。我希望这对你有用：

```
expect { position }.to change { Task.where(:name => 'Read some books').count }.from(0).to(1) 
```

# objective-c - 如何检测是否可以在沙盒应用程序上访问 NSURL？

> ID：11493882
> 
> 赞同：4
> 
> 时间：2012-07-15T17:03:55.313
> 
> 标签：objective-c, nsurl, appstore-sandbox, entitlements, nsopenpanel

我正在编写一个 OS X 应用程序，它有一个带有预览附件视图的打开面板。

问题是当我选择一个不在具有沙盒权限的文件夹中的文件时，我无法预览它。

在尝试打开文件之前，有什么方法可以判断文件是否会受到沙箱权限的限制？

我已经尝试`- (BOOL)checkResourceIsReachableAndReturnError:(NSError **)error` 过`NSURL`该类，但即使文件受到保护，它也会返回 true。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-20T14:54:06.077

对于那些希望代码中尽可能少的 Plain-Old-C 行的人：

```
NSURLIsReadableKey  in NSURL - (BOOL)getResourceValue:(out id *)value forKey:(NSString *)key 
```

或者

```
NSFileManager - (BOOL)isReadableFileAtPath:(NSString *)path 
```

如果沙箱限制了您的访问并且仅仅是 access() 周围的 Cocoa-Wrapper，那么沙箱将导致这些返回 NO。如果沙盒限制您的访问，沙盒将导致这些返回 NO。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T19:15:48.577

推荐的方法是从 URL 中获取路径，转换为 C 字符串，然后调用`access`（在 man 的第 2 节中记录）来检查您需要的权限。例如，在大纲中检查读取访问：

```
#include <unistd.h>

if (access([[url path] UTF8String], R_OK) == 0)
{
   // have access rights to read
} 
```

# java - JBoss 7.1.1.Final 的 JSF 实现版本是多少？

> ID：11493884
> 
> 赞同：4
> 
> 时间：2012-07-15T17:04:15.080
> 
> 标签：java, jsf, jboss

JBoss 7.1.1.Final 的 JSF 实现版本是多少？以及我怎么知道，以及如何升级它。

我只知道这是 mojarra 的实现，仅此而已。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T21:21:17.487

JBoss AS 7.1.1.Final 随 JSF 2.1.7 一起提供。[在此处](https://community.jboss.org/wiki/AS711FinalReleaseNotes)查看发行说明

您可以像这样更新 JSF 模块：

jboss-jsf-api jar 位于

```
${jboss.home.dir}/modules/javax/faces/api/main 
```

[从这里](https://repository.jboss.org/nexus/content/groups/public/org/jboss/spec/javax/faces/jboss-jsf-api_2.1_spec/)下载最新的 2.0.3.Final并将其放在上述文件夹中并将 module.xml 编辑为：

```
<resource-root path="jboss-jsf-api_2.1_spec-2.0.3.Final.jar"/> 
```

jsf-impl jar 位于

```
${jboss.home.dir}/modules/com/sun/jsf-impl/main 
```

[从这里](https://repository.jboss.org/nexus/content/groups/public-jboss/com/sun/faces/jsf-impl/2.1.10-jbossorg-1/)下载 jsf-impl 2.1.10并将其放在上面的文件夹中并将 module.xml 编辑为：

```
<resource-root path="jsf-impl-2.1.10-jbossorg-1.jar"/> 
```

现在我们已将 JSF 库更新为 7.1.3.Final-SNAPSHOT 中可用的版本。

# asp.net-mvc-3 - Model.IsValid 在不需要的属性上出现问题

> ID：11493885
> 
> 赞同：0
> 
> 时间：2012-07-15T17:04:39.837
> 
> 标签：asp.net-mvc-3, validation, razor, viewmodel, poco

我在不需要的属性上遇到了 Model.IsValid 问题。

这是代码。

Edit.cshtml 文件中的 BeginForm

```
@using (Html.BeginForm("Edit", "Member", FormMethod.Post, new { enctype = "multipart/formdata" }))
{
    @Html.Partial("_MemberForm", Model.Member)
} 
```

MemberEditViewModel：（用于 Edit.cshtml 文件）

```
public class MemberEditViewModel
{
    public MemberFormModel Member { get; set; }        
} 
```

MemberFormModel：

```
public class MemberFormModel : ICreateMemberCommand, IValidatableObject
{
    public int Id { get; set; }

    [Required]
    public string FirstName { get; set; }

    [Required]
    public string LastName { get; set; }

    [Required]
    public string SocialSecurityNumber { get; set; }

    [Required]        
    public int PinCode { get; set; }

    [Required]        
    public char Gender { get; set; }

    public string Email { get; set; }

    [Required]        
    public string Address { get; set; }

    [Required]        
    public string ZipCode { get; set; }

    [Required] 
    public string ZipAddress { get; set; }

    public string Phone { get; set; }        
    public string Phone2 { get; set; }

    [Required]
    public string City { get; set; }

    [Required]
    public int CountryId { get; set; }

    //not required (but still displaying error it's required)
    public Membership Membership { get; set; }

    // not required (displaying error it's required)
    public PunchCard PunchCard { get; set; }

    public bool IsActive { get; set; } 
```

_MemberForm.cshtml 块（部分）

```
 <fieldset>            
        <dl>
            <dt>@Html.LabelFor(m => m.Id)</dt>
            <dd>@Html.TextBoxFor(m => m.Id, new { disabled = "disabled", @readonly = "readonly" })</dd>

            <dt>@Html.LabelFor(m => m.PinCode)</dt>
            <dd>@Html.EditorFor(m => m.PinCode)</dd>

            <!-- problem with membership, maybe with the .FromData/ToDate ? -->
            <dt>@Html.LabelFor(m => m.Membership)</dt>   
            <dd>@Html.EditorFor(m => m.Membership.FromDate, new { @name = "Membership" }) - 
                @Html.EditorFor(m => m.Membership.ToDate, new { @name="Membership"})</dd>

            <!-- problem with punch card, maybe with the .Times ? -->
            <dt>@Html.LabelFor(m => m.PunchCard)</dt>
            <dd>@Html.EditorFor(m => m.PunchCard.Times, new { @name = "PunchCard" })</dd>
        </dl>
    </fieldset> 
```

MemberController 编辑动作

```
 // POST: /Members/10002/Edit
    [HttpPost]
    public ActionResult Edit(FormCollection formValues, MemberFormModel memberForm)
    {
        var errors = ModelState.Values.SelectMany(v => v.Errors);

        if(IsSaveOperation(formValues)){
            if(TryUpdateMember(memberForm)){
                return RedirectToAction("Details", "Member", new {id = memberForm.Id});
            }
        }

        var mm = new MemberEditViewModel{ Member = memberForm };
        return View(mm);
    } 
```

会员资格.cs

```
public class Membership
{
    public Membership(){ /* empty constructor */}
    public Membership(int id, int memberId, DateTime fromDate, DateTime toDate)
    {
        Id = id;
        MemberId = memberId;
        FromDate = fromDate;
        ToDate = toDate;
    }

    public int Id { get; set; }
    public int MemberId { get; set; }

    [DataType(DataType.Date)]
    public DateTime FromDate { get; set; }

    [DataType(DataType.Date)]
    public DateTime ToDate { get; set; }
} 
```

打卡卡.cs

```
public class PunchCard
{
    public PunchCard() { /* empty constructor */ }
    public PunchCard(int memberId, int times, DateTime createdDate, DateTime modifiedDate)
    {
        this.MemberId = memberId;
        this.Times = times;
        this.CreatedDate = createdDate;
        this.ModifiedDate = modifiedDate;
    }

    public int Id { get; set; }
    public int MemberId { get; set; }
    public int Times { get; set; }
    public DateTime CreatedDate { get; set; }
    public DateTime ModifiedDate { get; set; }
} 
```

你看我没有任何 [Required] 属性，在 MemberFormModel 中也没有。那么为什么这两个是必需的？它是一个谜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:55:03.460

您不应该在文本框中同时使用`disabled`and`readonly`属性：

```
@Html.TextBoxFor(m => m.Id, new { disabled = "disabled", @readonly = "readonly" }) 
```

我猜禁用属性优先，并且当您提交表单时，Id 的值永远不会发送到服务器。这就是您收到模型状态错误的原因。因为您的 id 属性是必需的。现在你可能会告诉我它没有用`[Required]`属性装饰，但这没关系。由于您已将其声明为不可为空的整数，因此它是隐式必需的，并且框架会自动将其设为必需。如果您不希望发生这种情况，则应将其声明为可为空的整数。

所以回到你的观点，如果你只想显示 id，不允许用户修改它，使用 readonly：

```
@Html.TextBoxFor(m => m.Id, new { @readonly = "readonly" }) 
```

显然不要认为如果您将文本框设为只读，则用户无法修改它。普通用户不会。但是黑客总是可以在这个文本框中输入他想要的任何值并伪造请求。所以绝对不要把它当作某种安全或其他东西。

# objective-c - 将一个数组分成四个元素的单独数组加上提醒

> ID：11493886
> 
> 赞同：0
> 
> 时间：2012-07-15T17:04:53.843
> 
> 标签：objective-c, ios

我试图将一个数组分成四个元素的单独数组，其中最后一个数组将包含提醒。例如，如果主数组的长度属性为 10，则将创建三个子数组 - 两个由四个元素组成，一个由两个元素组成。

我现在拥有的代码如下所示：

```
NSMutableArray *mainMutableArray = [NSMutableArray arrayWithObjects:@"First", @"Second", @"Third", @"Fourth", @"Fifth", @"Sixth", @"Seventh", @"Eighth", nil];
NSMutableArray *mutableArrayOfSubarrays = [NSMutableArray array];

int length = mainMutableArray.count / 4;
int location = 0;

for (int i = 0; i < length; i++)
{
    [mutableArrayOfSubarrays addObject:[mainMutableArray subarrayWithRange:NSMakeRange(location, 4)]];
    location += 4;
} 
```

当然，这仅在提醒等于 0 时才有效。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:07:41.693

好的，我们开始：

```
int length = mainMutableArray.count;

for (int location = 0; location < length; location+=4)
{
    unsigned int Size=length-location;
    if (Size>4) Size=4;
    [mutableArrayOfSubarrays addObject:[mainMutableArray subarrayWithRange:NSMakeRange(location, Size)]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:21:41.790

如果您使用`while`循环，则可以使条件描述您实际尝试执行的操作：

```
NSUInteger length = [mainMutableArray count];
NSUInteger location = 0;
// Until the location is less than four away from the end
while( location <= (length - 4) ){

    [mutableArrayOfSubarrays addObject:[mainMutableArray subarrayWithRange:NSMakeRange(location, 4)]];
    location += 4;
}

// Pick up the remainder, if any
if( location != length ){
    [mutableArrayOfSubarrays addObject:[mainMutableArray subarrayWithRange:NSMakeRange(location, length-location)]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:09:00.193

`length*4`从to循环`mainMutableArray.count`以获取数组的其余部分。

# android - 插入字符串值 sqlite 返回 null android

> ID：11493890
> 
> 赞同：0
> 
> 时间：2012-07-15T17:05:28.100
> 
> 标签：android, sqlite, insert, handler

我对此感到非常沮丧。我尝试将一些字符串值放入我的数据库中，只有 4 个字段得到值：name="O Teste 01" 正确，total_time="teste 1.gpx" 错误，total_distance "00:10:00" 错误，日期 "100"错误的

以下代码：

我在哪里插入数据：

```
 DatabaseHandler db = new DatabaseHandler(this);

        db.deleteStats(5);
        db.deleteStats(6);

        db.addStats(new Stats(  "O Teste 01", 
                                "teste 1.gpx", 
                                "00:10:00",
                                "100.00", 
                                "10.0",
                                "10.0", 
                                "20.0", 
                                "20", 
                                "1", 
                                "10", 
                                "100", 
                                "1", 
                                "2012-07-15 12:00:00")); 
```

Stats.java

```
public class Stats {
private Integer mId;
private String mName;
private String mFilename;
private String mTotalTime;
private String mTotalDistance;
private String mAvgSpeed;
private String mMinSpeed;
private String mMaxSpeed;
private String mAcumAltitude;
private String mMaxAltitude;
private String mMinAltitude;
private String mCalories;
private String mMod;
private String mDate;

// Construtor vazio
public Stats(){

}

// Construtor
public Stats(   Integer mId, String mName, String mFilename, String mTotalTime, String mTotalDistance, String mAvgSpeed, 
        String mMinSpeed, String mMaxSpeed, String mAcumAltitude, String mMinAltitude, String mMaxAltitude, 
                String mCalories, String mMod, String mDate)
{
    this.mId = mId;
    this.mName = mName;
    this.mFilename = mFilename;
    this.mTotalTime = mTotalTime;
    this.mTotalDistance = mTotalDistance;
    this.mAvgSpeed = mAvgSpeed;
    this.mMinSpeed = mMinSpeed;
    this.mMaxSpeed = mMaxSpeed;
    this.mAcumAltitude = mAcumAltitude;
    this.mMinAltitude = mMinAltitude;
    this.mMaxAltitude = mMaxAltitude;
    this.mCalories = mCalories;
    this.mMod = mMod;
    this.mDate = mDate;
}

// Construtor
public Stats(   String mName, String mFilename, String mTotalTime, 
                String mTotalDistance, String mAvgSpeed, String mMinSpeed, String mMaxSpeed, 
                String mAcumAltitude, String mMinAltitude, String mMaxAltitude, 
                String mCalories, String mMod, 
                String mDate)
{
    this.mName = mName;
    this.mFilename = mFilename;
    this.mTotalTime = mTotalTime;
    this.mTotalDistance = mTotalDistance;
    this.mAvgSpeed = mAvgSpeed;
    this.mMinSpeed = mMinSpeed;
    this.mMaxSpeed = mMaxSpeed;
    this.mAcumAltitude = mAcumAltitude;
    this.mMinAltitude = mMinAltitude;
    this.mMaxAltitude = mMaxAltitude;
    this.mCalories = mCalories;
    this.mMod = mMod;
    this.mDate = mDate;
}

public Stats(String string, String string2, String string3, String string4) {
    // TODO Auto-generated constructor stub
    this.mName = string;
    this.mFilename = string2;
    this.mTotalTime = string3;
    this.mDate = string4;
}

public Integer getmId() {
    return mId;
}
public void setmId(Integer mId) {
    this.mId = mId;
}
public String getmName() {
    return mName;
}
public void setmName(String mName) {
    this.mName = mName;
}
public String getmFilename() {
    return mFilename;
}
public void setmFilename(String mFilename) {
    this.mFilename = mFilename;
}
public String getmTotalTime() {
    return mTotalTime;
}
public void setmTotalTime(String mTotalTime) {
    this.mTotalTime = mTotalTime;
}
public String getmTotalDistance() {
    return mTotalDistance;
}
public void setmTotalDistance(String mTotalDistance) {
    this.mTotalDistance = mTotalDistance;
}
public String getmAvgSpeed() {
    return mAvgSpeed;
}
public void setmAvgSpeed(String mAvgSpeed) {
    this.mAvgSpeed = mAvgSpeed;
}
public String getmMinSpeed() {
    return mMinSpeed;
}
public void setmMinSpeed(String mMinSpeed) {
    this.mMinSpeed = mMinSpeed;
}
public String getmMaxSpeed() {
    return mMaxSpeed;
}
public void setmMaxSpeed(String mMaxSpeed) {
    this.mMaxSpeed = mMaxSpeed;
}
public String getmAcumAltitude() {
    return mAcumAltitude;
}
public void setmAcumAltitude(String mAcumAltitude) {
    this.mAcumAltitude = mAcumAltitude;
}
public String getmMaxAltitude() {
    return mMaxAltitude;
}
public void setmMaxAltitude(String mMaxAltitude) {
    this.mMaxAltitude = mMaxAltitude;
}
public String getmMinAltitude() {
    return mMinAltitude;
}
public void setmMinAltitude(String mMinAltitude) {
    this.mMinAltitude = mMinAltitude;
}
public String getmCalories() {
    return mCalories;
}
public void setmCalories(String mCalories) {
    this.mCalories = mCalories;
}
public String getmMod() {
    return mMod;
}
public void setmMod(String mMod) {
    this.mMod = mMod;
}
public String getmDate() {
    return mDate;
}
public void setmDate(String mDate) {
    this.mDate = mDate;
} 
```

将数据插入sqlite的函数：

```
 public void addStats(Stats st) 
{
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();

    values.put(DatabaseHandler.COLUMN_NAME, st.getmName());
    values.put(DatabaseHandler.COLUMN_FILENAME, st.getmFilename());
    values.put(DatabaseHandler.COLUMN_TOTAL_TIME, st.getmTotalTime());
    values.put(DatabaseHandler.COLUMN_TOTAL_DISTANCE, st.getmTotalDistance());
    values.put(DatabaseHandler.COLUMN_AVG_SPEED, st.getmAvgSpeed());
    values.put(DatabaseHandler.COLUMN_MIN_SPEED, st.getmMinSpeed());
    values.put(DatabaseHandler.COLUMN_MAX_SPEED, st.getmMaxSpeed());
    values.put(DatabaseHandler.COLUMN_ACUM_ALTITUDE, st.getmAcumAltitude());
    values.put(DatabaseHandler.COLUMN_MIN_ALTITUDE, st.getmMinAltitude());
    values.put(DatabaseHandler.COLUMN_MAX_ALTITUDE, st.getmMaxAltitude());
    values.put(DatabaseHandler.COLUMN_CALORIES, st.getmCalories());
    values.put(DatabaseHandler.COLUMN_MOD, st.getmMod());
    values.put(DatabaseHandler.COLUMN_DATE, st.getmDate());

    // Adiciona linha
    db.insert(DatabaseHandler.TABLE_STATS, null, values);
    db.close(); // fechando a conexão à base de dados
} 
```

提前致谢！

这是其余的代码...

```
public class DatabaseHandler extends SQLiteOpenHelper {
// All Static variables
// Database Version
private static final int DATABASE_VERSION = 4;

// Database Name
private static final String DATABASE_NAME = "magik_tracker_gpx";

// estatísticas table name
private static final String TABLE_STATS = "stats";

// estatísticas Table Columns names
public static final String COLUMN_ID = "_id";
public static final String COLUMN_NAME = "name";
public static final String COLUMN_FILENAME = "filename";
public static final String COLUMN_TOTAL_TIME = "total_time";
public static final String COLUMN_TOTAL_DISTANCE = "total_distance";
public static final String COLUMN_AVG_SPEED = "avg_speed";  
public static final String COLUMN_MIN_SPEED = "min_speed";  
public static final String COLUMN_MAX_SPEED = "max_speed";  
public static final String COLUMN_ACUM_ALTITUDE = "acum_altitude";  
public static final String COLUMN_MIN_ALTITUDE = "min_altitude";    
public static final String COLUMN_MAX_ALTITUDE = "max_altitude";    
public static final String COLUMN_CALORIES = "calories";    
public static final String COLUMN_MOD = "mod";  
public static final String COLUMN_DATE = "date";

private static final String DATABASE_CREATE = "create table "
        + TABLE_STATS + " ( " 
        + COLUMN_ID + " integer primary key autoincrement, " 
        + COLUMN_NAME + " text," 
        + COLUMN_FILENAME   + " text, "         
        + COLUMN_TOTAL_TIME + " text, " 
        + COLUMN_TOTAL_DISTANCE + " text, " 
        + COLUMN_AVG_SPEED + " text, " 
        + COLUMN_MIN_SPEED + " text, " 
        + COLUMN_MAX_SPEED + " text, " 
        + COLUMN_ACUM_ALTITUDE + " text, " 
        + COLUMN_MIN_ALTITUDE + " text, " 
        + COLUMN_MAX_ALTITUDE + " text, " 
        + COLUMN_CALORIES + " text ," 
        + COLUMN_MOD + " text, " 
        + COLUMN_DATE + " text " 
        + ");"; 

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_STATS);

    // Create tables again
    onCreate(db);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:06:40.873

好吧，我的坏...

我没有得到所有的领域！啊啊啊

不管怎么说，还是要谢谢你

```
 public List<Stats> getAllStats() {
    List<Stats> statsList = new ArrayList<Stats>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_STATS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Stats linha = new Stats();
            linha.setmId(Integer.parseInt(cursor.getString(0)));
            linha.setmName(cursor.getString(1));
            linha.setmFilename(cursor.getString(2));
            linha.setmTotalDistance(cursor.getString(3));
            linha.setmAvgSpeed(cursor.getString(4));
            linha.setmMinSpeed(cursor.getString(5));
            linha.setmMaxSpeed(cursor.getString(6));
            linha.setmAcumAltitude(cursor.getString(7));
            linha.setmMinAltitude(cursor.getString(8));
            linha.setmMaxAltitude(cursor.getString(9));
            linha.setmCalories(cursor.getString(10));
            linha.setmMod(cursor.getString(11));
            linha.setmDate(cursor.getString(12));
            // Adding contact to list
            statsList.add(linha);
        } while (cursor.moveToNext());
    }

    // return estatísticas list
    return statsList;
} 
```

# c# - 使用 C# 中的极端优化进行风险平价投资组合优化

> ID：11493895
> 
> 赞同：2
> 
> 时间：2012-07-15T17:05:54.107
> 
> 标签：c#, mathematical-optimization, numerical, nonlinear-optimization

我正在尝试使用极端优化例程在 C# 中创建风险平价投资组合。

在我购买它们之前，我主要是在试穿它们，看看我是否喜欢它们（我是学生，所以钱很紧）。

我的想法是实施这种称为风险平价的新型投资组合优化。它基本上说，为了使您的投资组合多样化，您应该为其每个组成部分赋予相同的风险。

运行 np1.Solve() 时出现空错误，我不明白为什么。我以为其他的一切都是由极限优化计算出来的。
1.我做错了什么？
2\. 有没有一种我不知道的更快的方法来进行这种优化？
3\. 如果你不知道 EO 库，但可以用 C# 中的其他东西来实现它，你能否就如何解决这个问题发表评论？

顺便说一下，投资组合构建的详细信息在距离函数的注释中，以防您感兴趣。

最好的问候，
爱德华多

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Extreme.Statistics;
using Extreme.Mathematics;
using Extreme.Mathematics.Optimization;

namespace TestingRiskParityOptimization
{
    class Program
    {

        static void Main(string[] args)
        {

            NonlinearProgram np1 = new NonlinearProgram(2);
            Func<Vector, double> distance = DistanceFunction;
            np1.ObjectiveFunction = distance;
            np1.InitialGuess = Vector.CreateConstant(2, 1.0 / ((double)2));

            np1.AddNonlinearConstraint(x => x[0] + x[1], ConstraintType.GreaterThanOrEqual, 0);
            Vector solution = np1.Solve();

            Console.WriteLine("Solution: {0:F6}", solution);
            Console.WriteLine("Optimal value:   {0:F6}", np1.OptimalValue);
            Console.WriteLine("# iterations: {0}", np1.SolutionReport.IterationsNeeded);

            Console.Write("Press Enter key to exit...");
            Console.ReadLine();

        }

        private static double DistanceFunction(Vector Weights)
        {
            Matrix Sigma = Matrix.Create(new double[,] {
                  {0.1, 0.2},
                  {0.2, 0.4}
                });
            // if VarP = Weights' * CovarMatrix * Weights and VolP = sqrt(VarP)
            // Then the marginal contribution to risk of an asset is the i-th number of
            // Sigma*Weights*VolP
            // And thus the contribution to risk of an asset is simply Weights . (Sigma*Weights/VarP)
            // we need to find weights such that Weights (i) * Row(i) of (Sigma*Weights/VarP) = 1/N

            // that is we want to minimize the distance of row vector (Weights (i) * Row(i) of (Sigma*Weights/VarP)) and vector 1/N

            double Variance = Vector.DotProduct(Weights, Sigma * Weights);

            Vector Beta = Sigma * Weights / Variance;

            for (int i = 0; i < Beta.Length; i++)
            {
                // multiplies row of beta by weight to find the percent contribution to risk
                Beta[i] = Weights[i] * Beta[i];
            }

            Vector ObjectiveVector = Vector.CreateConstant(Weights.Length, 1.0 / ((double)Weights.Length));
            Vector Distance = Vector.Subtract(Beta, ObjectiveVector);

            return Math.Sqrt(Vector.DotProduct(Distance, Distance));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:48:24.200

如果目标函数计算抛出，我强烈建议您通过调试器运行代码以识别抛出代码的确切位置。我的第一个赌注是由于向量大小不匹配而发生错误，例如在矩阵向量乘法中。如果您找到了这个错误的根源，那么优化很可能会顺利运行。

如果您想尝试替代算法，则可能需要查看以下解决方案之一。它们都支持（非）线性约束的规范，并且没有必要提供目标函数和约束梯度。

*   Microsoft Solver Foundation (msdn.microsoft.com/en-us/devlabs/hh145003.aspx)，Microsoft 的数学优化平台
*   [Funclib](http://funclib.codeplex.com)，它使用 Ipopt 作为 NLP 求解器
*   [Cscobyla](http://github.com/cureos/cscobyla)，COBYLA2 算法的 C# 端口，支持非线性约束的直接搜索算法 (cf Nelder-Mead)

# java - 最终变量在jsp中不起作用

> ID：11493896
> 
> 赞同：0
> 
> 时间：2012-07-15T17:06:05.550
> 
> 标签：java, jsp, javabeans, final

我做错了什么？

我在 win 7 中将 Apache tomcat 7 作为服务运行

我的 jsp 代码 [...\webapps\test\index.jsp]

```
<jsp:useBean id="Counter" scope="session" class="aaa.Counter" />
<html>
<title>sfcsv</title>

<%
    try{
        int x = Counter.read_count(),z = Counter.get_id();
        if(x%2==0)
            out.println(x + " = even");
        else
            out.println(x + " = odd");

        out.println(z);
    }catch(Exception e){
    out.println(e);
    }
%>

</html> 
```

java代码[..\webapps\test\WEB-INF\classes\aaa\Counter.java]

```
package aaa;

public class Counter {

    private int count;
    private static int instance_counter;
    private final int id;

    public Counter(){
        instance_counter ++;
        id = instance_counter;
        count = 0;
    }

    public int read_count(){
        return count++;
    }

    public int get_id(){
        return id;
    }

} 
```

预期输出：

```
24 = even    1 
```

我得到的输出：

```
24 = even 
```

或者

```
HTTP Status 500 - Unable to compile class for JSP: An error occurred at line: 8 in the jsp file: /index.jsp The method     get_id() is undefined for the type Counter 5: 6: <% 7: try{ 8: int x = Counter.read_count(),z = Counter.get_id(); 9:     if(x%2==0) 10: out.println(x + " = even"); 11: else Stacktrace:

type Exception report

message Unable to compile class for JSP: An error occurred at line: 8 in the jsp file: /index.jsp The method get_id()     is undefined for the type Counter 5: 6: <% 7: try{ 8: int x = Counter.read_count(),z = Counter.get_id(); 9: if(x%2==0)     10: out.println(x + " = even"); 11: else Stacktrace:

description The server encountered an internal error (Unable to compile class for JSP: An error occurred at line: 8 in     the jsp file: /index.jsp The method get_id() is undefined for the type Counter 5: 6: <% 7: try{ 8: int x =     Counter.read_count(),z = Counter.get_id(); 9: if(x%2==0) 10: out.println(x + " = even"); 11: else Stacktrace:) that     prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 8 in the jsp file: /index.jsp
The method get_id() is undefined for the type Counter
5: 
6: <%
7:  try{
8:      int x = Counter.read_count(),z = Counter.get_id();
9:      if(x%2==0)
10:             out.println(x + " = even");
11:         else

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs.

Apache Tomcat/7.0.29 
```

**编辑：在重新启动计算机时问题消失了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:56:55.987

您已经解决了您的问题，但是这里有一些适当的选项可以让您的所有类和 JSP 文件重新加载或重新编译，这可能有助于理解您的情况：

**刷新 Java 类**- 确保在应用更改后重新编译您的类。另请参阅[`reloadable`](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Common_Attributes)Web 应用程序上下文的选项（默认为`false`）。

> 如果您希望 Catalina 监视 /WEB-INF/classes/ 和 /WEB-INF/lib 中的类的更改，请设置为 true，并在检测到更改时自动重新加载 Web 应用程序。

* * *

**刷新 JSP 文件**- 请参阅[Tomcat Jasper 文档](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)以获取有关`development`变量（默认为，`true`所以我猜这是您的情况下的值）和`modificationTestInterval`变量（默认为`4 seconds`）的详细信息，您可以使用该变量设置检查 JSP 文件的时间间隔必要时进行更改和编译。两者通常都设置在`$CATALINA_BASE/conf/web.xml`.

> Jasper 是在开发模式下使用的吗？如果为 true，则可以通过 modifyTestInterval 参数指定检查 JSP 是否修改的频率。true 或 false，默认为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:08:02.883

I think its not problem with your code.I think your IDE is not building your project correctly ie .class file is not generated properly( or not generated). so try to compile this file manually and place generated .class file to appropriate folder of your project and then build and restart your server.Check on build its building new .JAR file or not

# php - MySQL - 选择当前一周中最少的一天，不一定是一周的第一天

> ID：11493897
> 
> 赞同：1
> 
> 时间：2012-07-15T17:06:15.310
> 
> 标签：php, mysql, database

使用 PHP/MySQL

我正在尝试创建一个选择语句，该语句从本周的最少一天获取数据（我正在使用它来显示某个玩家“本周”的数据）。一周从星期日开始。周日的数据可能并不总是存在，因此如果没有找到周日数据，那么它将使用找到的下一个最早的日期，周一、周二等。

我的日期列名为“theDate”，数据类型为“DATE”

查询需要类似于：

```
SELECT *
FROM table_name
WHERE name = '$username'
AND [...theDate = earliest day of data found for the current week week]
LIMIT 1 
```

它将返回单行数据。

这是我尝试获取“本周”数据的查询，它似乎在周日无法正常工作，它什么也没显示：

```
SELECT *
FROM table_name
WHERE playerName = '$username'
AND YEARWEEK(theDate) = YEARWEEK(CURRENT_DATE)
ORDER BY theDate; 
```

这是我用来获取“本月”数据的查询，即使找不到月份数据的第一天，它也可以使用，它将使用当前月/年中找到的最早数据日期（此查询非常适合我）：

```
SELECT *
FROM table_name
WHERE playerName =  '$username'
AND theDate >= CAST( DATE_FORMAT( NOW(),'%Y-%m-01') AS DATE)
ORDER BY theDate
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:17:45.337

尝试以下操作，替换`YOUR_DATE`为您想要的列中的日期（theDate）：

```
SELECT ADDDATE(YOUR_DATE, INTERVAL 1-DAYOFWEEK(YOUR_DATE) DAY) 
FirstDay from dual 
```

你试过了吗：

```
SELECT ADDDATE(theDate , INTERVAL 1-DAYOFWEEK(theDate ) DAY) FirstDay
FROM table_name
WHERE playerName =  '$username'
ORDER BY theDate DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:50:13.850

如果不尝试这个，您可能需要一个内部查询：

```
select * 
from table_name tn
where tn.the_date = 
(select min(the_date) 
from table_name 
where WEEKOFYEAR(the_date) = WEEKOFYEAR(CURDATE())
and YEAR(the_date) = YEAR(CURDATE())) 
```

即，给我表中日期等于当前周和年表中最早日期的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:33:07.627

尝试这个

```
SELECT * FROM table_name WHERE name = '$username' 
AND your_data IS NOT NULL
AND WEEK(the_date,0 = WEEK(NOW(),0))
ORDER BY DATE_FORMAT(the_date,'%w') ASC 
```

# php - 使用 php 实现家庭自动化

> ID：11493901
> 
> 赞同：2
> 
> 时间：2012-07-15T17:07:00.510
> 
> 标签：php, automation, iot

我想在家里做简单的自动化，比如开/关灯，以探索更多关于自动化的信息。我是一名软件工程师，所以我对在此过程中使用的硬件了解不多。我想在 php 中执行此任务。如果有人能帮助我完成这项任务，那对我来说将是非常棒的。如果 PHP 不适合此任务，请向我推荐任何其他语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:19:57.033

几年前，我曾在 CES 上与一家名为 Exceptional Innovations 的供应商合作。他们有小型设备，您可以将其放置在连接到家庭网络的插头和设备之间，并且您可以通过 Web 服务进行访问。

我不确定他们是否仍然这样做，但找到了这篇文章： [http ://www.cepro.com/article/using_web_services_to_control_devices_through_vista_media_center/](http://www.cepro.com/article/using_web_services_to_control_devices_through_vista_media_center/)

它是 Life|ware WSD。您可以与其他家庭自动化供应商核实，看看他们是否公开了 API，但请注意，您家中的媒体服务器可能需要一个静态 IP 地址来连接 Internet，然后您需要将所需端口上的请求路由到您家中的该计算机如果您想从外部世界访问，请配置路由器。

如果您在内部编码，那么您的笔记本电脑/PC 将连接到与媒体服务器相同的网络，因此您可以通过内部 IP 引用它。例如，如果是 Linksys 路由器，它可能默认为 192.168.1.3（假设 .3 是设备请求 IP 时分配的地址）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-15T17:12:47.357

PHP 是一种服务器端脚本。您需要使用其他语言，例如 C。除非您想远程切换灯光（以防您忘记这样做：P）。

# php - 专业化中的参数类型协方差

> ID：11493902
> 
> 赞同：30
> 
> 时间：2012-07-15T17:07:05.747
> 
> 标签：php, types, covariance

## tl;博士

在不支持泛型的语言 ( *PHP* )中，存在哪些策略来克服特化的参数类型不变性？

[注意：我希望我可以说我对类型理论/安全性/方差/等的理解更完整；我不是CS专业的。]

* * *

## 情况

你有一个抽象类，`Consumer`你想扩展它。声明一个需要定义`Consumer`的抽象方法。`consume(Argument $argument)`应该不是问题。

* * *

## 问题

您的专业`Consumer`，被称为`SpecializedConsumer`没有逻辑的业务与*所有*类型的工作`Argument`。相反，它应该接受一个`SpecializedArgument`（*及其子类*）。我们的方法签名更改为`consume(SpecializedArgument $argument)`.

```
abstract class Argument { }

class SpecializedArgument extends Argument { }

abstract class Consumer { 
    abstract public function consume(Argument $argument);
}

class SpecializedConsumer extends Consumer {
    public function consume(SpecializedArgument $argument) {
        // i dun goofed.
    }
} 
```

我们正在破坏[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，并导致类型安全问题。船尾。

* * *

## 问题

好的，所以这行不通。但是，在这种情况下，存在哪些模式或策略来克服类型安全问题和[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)违规，但仍保持`SpecializedConsumer`to的类型关系`Consumer`？

我认为可以将答案提炼为“ *ya dun goofed, back to the drawing board* ”是完全可以接受的。

* * *

## 注意事项、详细信息和勘误表

*   好的，一个直接的解决方案显示为“*不要在中定义`consume()`方法`Consumer`*”。好的，这是有道理的，因为方法声明与签名一样好。从语义上讲，尽管没有`consume()`，即使有一个未知的参数列表，也会让我的大脑有点受伤。也许有更好的方法。

*   从我正在阅读的内容来看，很少有语言支持参数类型协方差；PHP 就是其中之一，并且是这里的实现语言。更复杂的是，我看到了涉及[泛型的创造性“](http://en.wikipedia.org/wiki/Generic_programming)*解决方案*” ；PHP 不支持的另一个特性。

*   来自 Wiki's [Variance (computer science) - Need for covariant argument types？](http://en.wikipedia.org/wiki/Variance_(computer_science)#Need_for_covariant_argument_types.3F)：

    > 这在某些情况下会产生问题，其中参数类型应该是协变的以模拟现实生活中的需求。假设你有一个代表一个人的类。一个人可以看医生，所以这个类可能有一个方法 virtual void `Person::see(Doctor d)`。现在假设您要创建该类的子`Person`类`Child`. 也就是说，a`Child`是一个人。然后可能想创建一个 , 的子`Doctor`类`Pediatrician`。如果孩子只看儿科医生，我们希望在类型系统中强制执行。但是，一个简单的实现会失败：因为 a`Child`是 a `Person`，所以`Child::see(d)`必须采用 any `Doctor`，而不仅仅是 a `Pediatrician`。

    文章接着说：

    > 在这种情况下，可以使用[访问者模式来强制执行这种关系。](http://en.wikipedia.org/wiki/Visitor_pattern)在 C++ 中解决问题的另一种方法是使用[泛型编程](http://en.wikipedia.org/wiki/Generic_programming)。

    同样，可以创造性地使用[泛型来解决问题。](http://en.wikipedia.org/wiki/Generic_programming)我正在探索[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)，因为无论如何我都有一个半生不熟的实现，但是文章中描述的大多数实现都利用了方法重载，这是 PHP 中另一个不受支持的特性。

* * *

`<too-much-information>`

## 执行

由于最近的讨论，我将扩展我忽略的具体实现细节（*如，我可能会包括太多*）。

> [为简洁起见，我已经排除了那些（*应该*）目的非常明确的方法体。我**试图**保持简短，但我倾向于罗嗦。我不想倾倒一堵代码，所以解释跟随/在代码块之前。如果您有编辑权限，并且想要清理它，请执行此操作。此外，代码块不是来自项目的复制粘贴。如果某些事情没有意义，它可能不会；冲我大喊澄清。]

关于原来的问题，以后`Rule`类是`Consumer`，`Adapter`类是`Argument`。

与树相关的类包括如下：

```
abstract class Rule {
    abstract public function evaluate(Adapter $adapter);
    abstract public function getAdapter(Wrapper $wrapper);
}

abstract class Node {
    protected $rules = [];
    protected $command;
    public function __construct(array $rules, $command) {
        $this->addEachRule($rules);
    }
    public function addRule(Rule $rule) { }
    public function addEachRule(array $rules) { }
    public function setCommand(Command $command) { }
    public function evaluateEachRule(Wrapper $wrapper) {
        // see below
    }
    abstract public function evaluate(Wrapper $wrapper);
}

class InnerNode extends Node {
    protected $nodes = [];
    public function __construct(array $rules, $command, array $nodes) {
        parent::__construct($rules, $command);
        $this->addEachNode($nodes);
    }
    public function addNode(Node $node) { }
    public function addEachNode(array $nodes) { }
    public function evaluateEachNode(Wrapper $wrapper) {
        // see below
    }
    public function evaluate(Wrapper $wrapper) {
        // see below
    }
}

class OuterNode extends Node {
    public function evaluate(Wrapper $wrapper) {
        // see below
    }
} 
```

所以每个都`InnerNode`包含`Rule`和`Node`对象，每个都`OuterNode`只有`Rule`对象。`Node::evaluate()`将每个`Rule`( *`Node::evaluateEachRule()`*) 评估为布尔值`true`。如果每个都`Rule`通过，则`Node`已经通过并且它`Command`被添加到`Wrapper`, 并将下降到子级进行评估 ( *`OuterNode::evaluateEachNode()`*)，或者简单地分别返回`true`、 for`InnerNode`和`OuterNode`对象。

至于`Wrapper`；该`Wrapper`对象代理一个`Request`对象，并具有`Adapter`对象的集合。该`Request`对象是 HTTP 请求的表示。该对象是用于特定对象的特定使用`Adapter`的专用接口（*并维护特定状态*`Rule`） 。（*这就是 LSP 问题的来源*）

对象是一个添加到对象的动作（实际上是一个整齐打包的回调），`Command`一旦*一切*`Wrapper`就绪，`Command`对象数组将按顺序触发，并传入`Request`（*除其他外*）。

```
class Request { 
    // all teh codez for HTTP stuffs
}

class Wrapper {
    protected $request;
    protected $commands = [];
    protected $adapters = [];
    public function __construct(Request $request) {
        $this->request = $request;
    }
    public function addCommand(Command $command) { }
    public function getEachCommand() { }
    public function adapt(Rule $rule) {
        $type = get_class($rule);
        return isset($this->adapters[$type]) 
            ? $this->adapters[$type]
            : $this->adapters[$type] = $rule->getAdapter($this);
    }
    public function commit(){
        foreach($this->adapters as $adapter) {
            $adapter->commit($this->request);
        }
    }
}

abstract class Adapter {
    protected $wrapper;
    public function __construct(Wrapper $wrapper) {
        $this->wrapper = $wrapper;
    }
    abstract public function commit(Request $request);
} 
```

因此，给定的 user-land`Rule`接受预期的 user-land `Adapter`。如果`Adapter`需要有关请求的信息，则将其路由通过`Wrapper`，以保持原始的完整性`Request`。

作为`Wrapper`聚合`Adapter`对象，它将现有实例传递给后续`Rule`对象，以便从一个到下一个`Adapter`保存一个状态。`Rule`一旦**整个**树通过，`Wrapper::commit()`就会被调用，并且每个聚合`Adapter`对象将根据需要将其状态应用于原始`Request`.

然后我们得到一个对象数组`Command`和一个修改后的`Request`.

* * *

**到底有什么意义？**

好吧，我不想重新创建许多 PHP 框架/应用程序中常见的原型“路由表”，所以我选择了“路由树”。通过允许任意规则，您可以快速创建一个`AuthRule`（*例如*）并将其附加到一个`Node`，并且不再是整个分支都可以在不通过`AuthRule`. 理论上（*在我的脑海中*）它就像一个神奇的独角兽，防止代码重复，并执行区域/模块组织。在实践中，我感到困惑和害怕。

**为什么我离开了这堵胡说八道的墙？**

嗯，这是我需要解决 LSP 问题的实现。每个都`Rule`对应一个`Adapter`，这不好。我想保留 each 之间的关系`Rule`，以确保构造树时的类型安全等，但是我不能*`evaluate()`*在 abstract 中声明 key 方法 ( ) `Rule`，因为子类型的签名会发生变化。

另一方面，我正在整理`Adapter`创建/管理方案；是否是`Rule`创建它的责任，等等。

`</too-much-information>`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T00:44:38.027

要正确回答这个问题，我们必须真正退后一步，以更笼统的方式看待您要解决的问题（而且您的问题已经很笼统了）。

## 真正的问题

真正的问题是您正在尝试使用继承来解决业务逻辑问题。由于违反了 LSP，而且更重要的是，将您的业务逻辑与应用程序的结构紧密耦合，这永远不会奏效。

因此，继承已作为解决此问题的一种方法（出于上述原因以及您在问题中陈述的原因）。幸运的是，我们可以使用许多组合模式。

现在，考虑到您的问题的普遍性，很难确定一个可靠的解决方案来解决您的问题。因此，让我们回顾一些模式，看看它们如何解决这个问题。

## 战略

当我第一次阅读这个问题时，首先想到的是[策略模式。](http://sourcemaking.com/design_patterns/strategy)基本上，它将实现细节与执行细节分开。它允许存在许多不同的“策略”，调用者将确定为特定问题加载哪个。

这里的缺点是调用者必须知道策略才能选择正确的策略。但它也允许更清晰地区分不同的策略，所以这是一个不错的选择......

## 命令

[命令模式](http://sourcemaking.com/design_patterns/command)也会像策略一样解耦实现。主要区别在于，在 Strategy 中，调用者是选择消费者的那个。在指挥部，它是其他人（也许是工厂或调度员）......

每个“专业消费者”将仅实现特定类型问题的逻辑。然后*其他人*会做出适当的选择。

## 责任链

下一个可能适用的模式是[责任链模式](http://sourcemaking.com/design_patterns/chain_of_responsibility)。这类似于上面讨论的策略模式，不同之处在于不是消费者决定调用哪个策略，而是依次调用每个策略，直到有一个策略处理请求。因此，在您的示例中，您将采用更通用的参数，但请检查它是否是特定的参数。如果是，则处理请求。否则，让下一个试一试......

## 桥

[桥接模式](http://sourcemaking.com/design_patterns/bridge)在这里也可能是合适的。这在某种意义上类似于策略模式，但不同之处在于桥接实现会在构建时而不是在运行时选择策略。因此，您将为每个实现构建一个不同的“消费者”，其中包含作为依赖项的详细信息。

## 访客模式

您在问题中提到了[访问者模式](http://sourcemaking.com/design_patterns/visitor)，所以我想在这里提到它。我不确定它在这种情况下是否合适，因为访问者与旨在遍历结构的策略模式非常相似。如果您没有要遍历的数据结构，那么访客模式将被提炼成看起来与策略模式非常相似。我说的很公道，因为控制的方向不同，但最终的关系却大同小异。

## 其他模式

最后，这实际上取决于您要解决的具体问题。如果您尝试处理 HTTP 请求，其中每个“消费者”处理不同的请求类型（XML、HTML 和 JSON 等），那么最佳选择可能与您尝试处理查找一个多边形。当然，您*可以*对两者使用相同的模式，但它们并不是真正的同一个问题。

话虽如此，该问题*也*可以通过[调解器模式](http://sourcemaking.com/design_patterns/mediator)（在多个“消费者”需要有机会处理数据的情况下）、[状态模式](http://sourcemaking.com/design_patterns/state)（在“消费者”将依赖于过去消费数据的情况下）来解决甚至是[适配器模式](http://sourcemaking.com/design_patterns/adapter)（如果您在专门的消费者中抽象出不同的子系统）......

简而言之，这是一个很难回答的问题，因为解决方案太多，很难说哪个是正确的......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T18:07:54.590

我唯一知道的是 DIY 策略：接受简单`Argument`的函数定义并立即检查它是否足够专业：

```
class SpecializedConsumer extends Consumer {
    public function consume(Argument $argument) {
        if(!($argument instanceof SpecializedArgument)) {
            throw new InvalidArgumentException('Argument was not specialized.');
        }
        // move on
    }
} 
```

# objective-c - 将uiview连接到uiviewcontroller

> ID：11493904
> 
> 赞同：0
> 
> 时间：2012-07-15T17:07:12.443
> 
> 标签：objective-c, xcode, uiview, uiviewcontroller

我尝试为 ipad 创建 2 人游戏，游戏应该是多人游戏（一个玩家与同一设备上的其他玩家）。现在，我需要为我的主视图控制器添加两个 uiview，每个都将连接到另一个视图控制器。我创建了一个名为 viewcontrollerA 和 viewcontrollerB 的 2 个 uiviewcontroller，然后每个都将在屏幕上的一半大小。我拖到我的 xib 文件 2 uiview 然后连接到我在 mainview.h 中声明的插座（插座是：IBOutlet uiviewcontrollerA *viewA）。问题是当我尝试运行应用程序时出现堆栈溢出。谁能解释一下我该如何正确连接？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-25T19:41:18.743

据我所知，您的问题是（如何在 uiview 和 viewcontroller 之间进行连接），您需要在 xcode 中检查您在情节提要上的身份检查器，然后选择 A 或 B 的 viewController（正如您命名的视图控制器）

像下面的图片[![在此处输入图像描述](../Images/3cd271e16b61912026f79ed1eb87cb65.png)](https://i.stack.imgur.com/plnW2.png)

# java - 如何将一个类的迭代器转换为其子类的迭代器？

> ID：11493909
> 
> 赞同：9
> 
> 时间：2012-07-15T17:07:34.290
> 
> 标签：java, generics, collections

我试图将一个类的迭代器转换为所述类的子类的迭代器。这给了我一个“不可转换的类型”错误。为什么这是不可能的，最优雅的解决方法是什么？（或者，如果是这样，为什么这是一个坏主意？）

在这种情况下，使用 for-each 循环不是解决方案：我正在尝试实现`iterator()`，最简单的方法是返回`iterator()`我的班级之一的字段，但那个没有确切要求类型。我也不能更改我的签名`iterator()`。

```
public interface SomeoneElsesInterface {
    public Iterator<SomeoneElsesInterface> iterator();
}

public abstract class MyAbstractClass implements SomeoneElsesInterface {
    final MyAbstractClass[] things;
    public MyAbstractClass(SomeoneElsesInterface... things) {
         this.things = (MyAbstractClass[]) things;
    }
}

public class MyClass extends MyAbstractClass {
    public MyClass(MyAbstractClass thing1, MyAbstractClass thing2) {
        super(thing1, thing2);
    }

    public Iterator<SomeoneElsesInterface>() {
        return (Iterator<SomeoneElsesInterface>) Arrays.asList(things).iterator();
    }
} 
```

当然，我可以只更改`things`. 但是，在这种情况下，我需要在其他地方进行大量演员表。我知道我的构造函数不会被非`MyAbstractClass`s 的对象调用，但无论如何我都无法更改接口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:26:23.653

我认为根据您的问题，您正在尝试执行以下操作：

```
Iterator<Object> original = ...
Iterator<String> converted = (Iterator<String>)original; 
```

那是对的吗？

如果是这样，不幸的是，这是不可能的。问题是它`original`可以包含不是`String`s 的对象，因此允许该转换会破坏泛型合同，即`converted`可以包含不是 s 的东西`String`。

我不认为有一个优雅的解决方法。

你说最简单的实现方法`iterator()`是返回一个实例字段的迭代器，所以我猜你有这样的东西：

```
class IterableThing implements Iterable<Foo> {
    private Collection<Bar> someStuff;

    public Iterator<Foo> iterator() {
        return (Iterator<Foo>)someStuff.iterator();
    }
}

class Bar {
}
class Foo extends Bar {
} 
```

如果`someStuff`可以保证只包含 的实例`Foo`，那么您可以声明`someStuff`为 a`Collection<Foo>`而不是 a`Collection<Bar>`吗？如果不是，那么只返回 的迭代器就没有任何意义，`someStuff`因为它可能包含一些不是`Foo`.

我想您需要考虑您实际上可以做出哪些保证。如果您不能保证`someStuff`只包含`Foo`s 那么您可能必须维护自己的状态，或者`someStuff`按需过滤内容。

编辑：你已经用代码更新了你的问题。惊人的。

所以看起来你实际上是在尝试在该类型的超类上返回一个迭代器。这让事情变得容易多了。

在您的特定情况下，您可能可以通过以下方式解决它：

```
return Arrays.<SomeoneElsesInterface>asList(things).iterator(); 
```

它会产生一些警告，但这没关系，因为你知道你已经保证了类型安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T17:48:29.850

这看起来就像使用[*显式类型参数规范*](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#What%20explicit%20type%20argument%20specification?)一样简单：

```
public class MyClass extends MyAbstractClass {
    // ...

    public Iterator<SomeoneElsesInterface> iterator() {
      return Arrays.<SomeoneElsesInterface>asList(things).iterator();
    }
} 
```

问题在于`Arrays#asList()`推断您想要一个类型的列表`List<MyAbstractClass>`，这将产生一个类型的迭代器`Iterator<MyAbstractClass>`。由于`Iterator`的类型参数不是*covariant*，因此您不能提供需要 an 的`Iterator<MyAbstractClass>`地方`Iterator<SomeoneElsesInterface>`。通过强制`Arrays#asList()`创建一个 type 列表`List<SomeoneElsesInterface>`，如上所示，您还可以从对 的调用中返回预期的迭代器类型`Iterable#iterator()`。

的作者会更友好地将其方法`SomeoneElsesInterface`的返回类型指定为.`iterator()``Iterator<? extends SomeoneElsesInterface>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:09:04.477

使用`for-each`循环而不是`Iterator`.

`for-each`从**Java 1.5引入**

有关详细信息，请参阅此链接：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T17:36:42.767

如果换成`Arrays.asList(things)`怎么`Arrays.asList((SomeoneElsesInterface[]) things)`办？一旦数组被转换为正确的类型，列表和迭代器应该跟随。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T17:11:31.927

Java for-each 示例（补充 Kumar 答案）：

```
List<String> strings = new ArrayList<String>();
strings.add( "one" );
strings.add( "two" );
strings.add( "three" );

for ( String item : strings ) {
    System.out.println( item );
} 
```

# maven - 如何引用源目录并将工件声明为依赖项

> ID：11493912
> 
> 赞同：1
> 
> 时间：2012-07-15T17:07:54.813
> 
> 标签：maven, rpm, maven-assembly-plugin

我有一个汇编模块，可以在目标目录下构建我需要的目录结构。所有文件夹都按预期存在。这些目录包括 config、docs、lib 等。一些包括 jars，而另一些则包含标准 shell 脚本和文件等。

现在我想引用这个工件，假设它在另一个 pom 模块中称为 rpm-prep，它将使用这个目标目录结构来提取我需要使用 maven rpm 插件构建 rpm 的位。我这样做是因为我有一个多模块项目，并且在不指定完整路径的情况下无法引用每个模块中的子目录...

所以我希望能够参考以下内容：

```
"rpm-prep" artifact declared as a dependency in "rpm-module": 
```

```
 <dependency>
      <groupId>com.blah.blah</groupId>
      <artifactId>rpm-prep</artifactId>      //contains dir struct I need to extract
      <version>${project.version}</version>
  </dependency> 
```

现在在“rpm-module”pom 中，我希望能够引用目标目录下的 conf 子目录。声明了上面的依赖项后，我该怎么做？例如

```
 <mapping>
      ....
       .......
       <dependency>
          <includes>
            <include>??? dependency-target-conf directory from above dependency?????
            </include>
          </includes>
        </dependency>
 </mapping> 
```

我知道我可以参考罐子、拉链等，但在这种情况下我需要目录和所有内容等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:49:59.807

`unpacking`使用`maven dependency plugin's` [dependency:unpack](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)然后从那里使用相关文件夹/内容的程序集怎么样？

# ruby-on-rails - 使用一个控制器创建 2 个不同的实体。创建

> ID：11493913
> 
> 赞同：0
> 
> 时间：2012-07-15T17:07:55.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`B`每当我创建一个实体时，我都需要创建一个新实体`A`。为此，我尝试`B.create`在`A.create`. `a_controller`然而，这给出了一个错误：

```
Missing template a/create 
```

所以我的问题是：如何`B`从`A.create`控制器创建实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:20:21.730

像这样的东西？

```
def create
  @A = A.new(params[:a])
  @B = B.new(params[:b])

  respond_to do |format|
    if @A.save && @B.save
      format.html { redirect_to @A, :notice => 'A was successfully created.' }        
    else
      # render new with validation errors
      format.html { render :action => "new" }        
    end
  end
end 
```

但如果你的对象是“相关的”，即 has_many 或 belongs_to 那么你可能想要类似的东西

```
# project has_many tasks
def create
  @project = Project.new(params[:project])
  @project.tasks.new(params[:task])
  if @project.save # this should save both objects and in the same transaction
    ....
end 
```

第三个选项是使用accepts_nested_attributes_for - 在此处阅读更多信息：http: [//currentricity.wordpress.com/2011/09/04/the-definitive-guide-to-accepts_nested_attributes_for-a-model-in-rails-3/](http://currentricity.wordpress.com/2011/09/04/the-definitive-guide-to-accepts_nested_attributes_for-a-model-in-rails-3/)

# ios - 将坐标（纬度，经度）附加到墙上的帖子（iOS SDK）

> ID：11493915
> 
> 赞同：0
> 
> 时间：2012-07-15T17:08:24.057
> 
> 标签：ios, facebook-ios-sdk

我会使用 iOS SDK 在登录用户的墙上发布消息。那是我的代码（它成功发布了消息，但未分配纬度、经度）。任何想法？

```
NSDictionary *coordinates = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSString stringWithFormat:@"%f",location.coordinate.latitude],@"latitude",
                             [NSString stringWithFormat:@"%f",location.coordinate.longitude],@"longitude", nil];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               text,@"message",
                               [coordinates JSONString],@"coordinates",nil];

[FBRequest startWithGraphPath:@"me/feed"
                   parameters:params
                   HTTPMethod:@"POST"
            completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
            }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:05:27.943

我有一些可能适用于您的用例的建议：

*   我不知道使用坐标字段发布状态的能力（可能吗？）；签到和状态更新需要一个地点字段，这是您要附加的地点的 ID
*   顺便说一句，使用 FBRequest 时不需要直接的 JSON 编码，因为它会编码你给它的东西。SDK 本质上与字典和数组一起工作，并代表您生成 JSON。
*   SDK 有一个辅助方法来请求基于坐标的地点列表

它看起来像这样：

```
FBRequest *request = [FBRequest requestForPlacesSearchAtCoordinate:coordinate 
                                                    radiusInMeters:radius
                                                      resultsLimit:resultsLimit
                                                        searchText:searchText];
[request startWithCompletionHandler:...]; 
```

希望这可以帮助！

# c# - 如何将 IpAddress 项目转换为字符串 c#

> ID：11493920
> 
> 赞同：0
> 
> 时间：2012-07-15T17:08:57.450
> 
> 标签：c#, string, linq, casting, ip-address

我有一个包含 a`System.net.IPAddress`和字符串项的 ListBox。我想将它们全部转换为字符串。我已经尝试过，如下所示，但它说它不能从 IPAddress 转换为字符串。

```
var List4 = f.listBox4.Items.Cast<String>().ToList();
foreach (string i in List4)
{
    cursheet.get_Range(colname + x).Value = i;
    x++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:13:01.430

```
var List4 = f.listBox4.Items.Cast<object>().Select(x => x.ToString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:15:05.313

这个怎么样？无需 linq、casting 等。

```
foreach (var item in f.listBox4.Items) 
{ 
    cursheet.get_Range(colname + x).Value = item.Text; 
    x++; 
} 
```

或者，如果你想要这个值：

```
foreach (var item in f.listBox4.Items) 
{   
    cursheet.get_Range(colname + x).Value = item.Value; 
    x++; 
} 
```

# iphone - iOS GPS 返回速度的单位是什么？

> ID：11493926
> 
> 赞同：1
> 
> 时间：2012-07-15T17:09:23.513
> 
> 标签：iphone, ios5, xcode4, gps

我正在使用 iPhone 4 的内置 GPS 来返回日期位置和速度。

但是在寻找了很长时间之后，我似乎无法找到返回的速度，我知道它是双倍的，但是这是以米/小时、英尺、英里还是什么为单位？

那里的任何人都可以提供线索吗？提前致谢。

灵巧的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T17:16:46.740

米/秒是速度的单位

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T17:13:51.050

如果您阅读[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/speed)，您会发现它告诉您的第一件事就是它的单位（米/秒）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-22T21:09:04.587

如果您阅读 EXIF 标签标准文档，对于 KpH、MpH 或 Knots，允许选择 K、M 或 N。然而，在 GPSSpeedRef 使用 K 时，Apple 在 GPSSpeed 字段中的值是 m/s（这违反了 EXIF 标准）

# javascript - 使用 javascript 和 ajax 实时验证用户名

> ID：11493937
> 
> 赞同：0
> 
> 时间：2012-07-15T17:11:29.167
> 
> 标签：javascript, html, ajax

我为我的注册表单编写了一个脚本，如果用户名输入字段上有一个 keyup 事件，则 javascript 检查输入的用户名是否有效，如果是，则调用一个 ajax 函数来检查其可用性。

它工作正常。但是用户名可以在不做key up的情况下输入，对于这些情况怎么办？例如**，可以通过单击输入字段并选择浏览器建议的名称来输入用户名，或者使用自动表单填充器来输入用户名。在这些情况下没有“keyup”，那么这些情况该怎么办？**

如果我遗漏了一些案例，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:13:29.377

也将回调绑定到`change`事件。

代替`$('username_input').keyup`或`$('username_input').bind('keyup', callback)`使用

```
$('username_input').bind('keyup change blur', function () {
    //
}) 
```

**[更新]**

如果您不使用 jQuery，请尝试

```
function checkUserName() {
   // Ajax validation code
}
userinput = document.getElementById('yourusernameinputid');
userinput.onclick = userinput.onchange = userinput.onblur = checkUserName; 
```

顺便说一句，您应该尝试学习 jQuery。它可以为您节省大量时间，并帮助您在更短的时间内制作更好的网站。

**[更新 2]**

看起来没有办法通过使用事件的自动填充来检测更改。您需要设置一个计时器以固定间隔自动检查您的输入并检查您的最后一个值。

```
(function() {
   // It is always better to use a closure to prevent the value from 
   // getting overwritten by another piece of code
   var value = '';
   setInterval(2000, function() {
      if (userinput.value != value) {
           checkUserName();
           value = userinput.value;
      }
   });
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:16:57.263

*   在以下情况下测试用户名：
    *   发生模糊事件（当文本字段失去焦点时），并且
    *   在用户填写表单之前，或
    *   发生更改事件（我认为这是最好的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:43:43.780

**setInterval 是唯一的方法。**

资料来源：

[无论焦点如何，我都想在 HTML 文本输入字段中的每次数据更改时触发一个事件](https://stackoverflow.com/questions/835337/i-want-to-trigger-an-event-every-single-time-data-changes-in-an-html-text-input?rq=1)

[jQuery：我用什么监听器来检查浏览器自动填充密码输入字段？](https://stackoverflow.com/questions/3066406/jquery-what-listener-do-i-use-to-check-for-browser-auto-filling-the-password-in)

# php - 更改购物车价格的安全方法

> ID：11493939
> 
> 赞同：1
> 
> 时间：2012-07-15T17:11:38.183
> 
> 标签：php, javascript, paypal, shopping-cart

我正在尝试创建非常简单的项目。我将通过一个例子来解释它。

**使用简单示例描述我正在尝试做的事情：**
假设您可以将两张图片上传到我的网站，选择尺寸（1000x500 或 2000x1000），然后写一些文字。我的网站会将这两张图片合并为一张，当然会适当调整其大小，并在图片上写一些文字。这很简单。生成此类图像后，它会将您带到一个页面，您可以在其中预览图像，并且有一个 Paypal 按钮，价格为 1 美元。涉及 PHP 和 GD的所有`$_POST[]`内容都应该是安全的。

我想允许用户推送“下一张图片”，保存他已经制作的一张，然后再制作一张。同样的过程，他在一个站点上完成了 2 个图像预览和一个显示 2$ 的按钮。再次不应该那么难。

**问题和问题：**
但是我的问题来了。用户创建了 2 个图像，均为 1000x500，并且他看到了两个预览。我想让他**在这个屏幕**上将一张图像更改为 2000x1000，但这也意味着价格的变化。那么是否可以在不重新加载页面的情况下***更改安全数量或图像的某些属性***，同时更改贝宝按钮上的价格？我确信javascript在这里不是最好的主意。我看到贝宝让我使用“添加带有价格/选项的下拉菜单”，但我不能用它来确定哪张照片是大的，哪一张是小的。因为有 3 张照片已经有相当多的可能性（所有小，第一大，第二大，两个大等）......

**我希望不使用的解决方案，但到目前为止没有找到任何其他解决方案：**
或者我必须让他以某种形式更改这些属性/值（以某种方式禁用购买按钮），然后传递所有使用`$_POST[]`会将他重定向到页面的内容，有正确的按钮？

我知道它有点乱，但我也尽力解释它。我的英语不是最好的。希望你们明白我想要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:13:28.320

它不是`messy`，许多网站都这样做，例如：
在许多购买页面上，当您选择美国作为`country`页面提交到服务器并`state`出现一个新的下拉列表时。
您当然可以这样做，或者使用 AJAX。但是，如果只有几个选项，我会使用 JS/jQuery 来更改价格（特别是因为它的价格如此之低而且价格是静态的）。

# wordpress - Wordpress 光标轨迹

> ID：11493942
> 
> 赞同：0
> 
> 时间：2012-07-15T17:12:12.647
> 
> 标签：wordpress, mouse-cursor

我最近为 wordpress 安装了鼠标/光标试验插件。该插件正在运行，但是鼠标轨迹图像消失在网站内容后面，仅显示在背景上

有人能指导我正确的方向来修复它吗？

谢谢

插件链接：[Wordpress Cursor Trails](http://wordpress.org/extend/plugins/cursor-trail/)

```
 function add_cursor_trail(){
    $ct_data = get_option('cursor_trail_options');
    if( date('Y-m-d', current_time('timestamp')) == '2011-02-14'){
        $ct_data['pointer'] = WP_PLUGIN_URL.'/cursor-trail/valentines.png'; 
    }
    if( !empty($ct_data['start']) && current_time('timestamp') <= strtotime($ct_data['start']) ){
        return;     
    }
    if( !empty($ct_data['end']) && current_time('timestamp') >= strtotime($ct_data['end']) ){

        return;
    }
    ?>
    <script type="text/javascript">
        jQuery(document).ready( function($) {
            var container = $(document.body);
            var speed = <?php echo $ct_data['speed']; ?>;
            container.mousemove( function(e){
                if( $(this).parents('a').length == 0 ){
                    $('<img src="<?php echo $ct_data['pointer']; ?>" />').css({ 'position':'absolute', 'top':e.pageY+5, 'left':e.pageX+5}).prependTo(container).fadeOut(speed, function(){ 
                        $(this).remove(); 
                    });
                }
            });
        });
    </script>
    <?php
}
add_action('wp_head','add_cursor_trail',999);

/* Creating the wp_events table to store event data*/
function cursor_trail_activate() {
    $ct_data = array(
        'pointer' => WP_PLUGIN_URL.'/cursor-trail/pointer.png',
        'speed' => 900
    );
    add_option('cursor_trail_options', $ct_data);
}
register_activation_hook( __FILE__,'cursor_trail_activate');

class CursorTrailAdmin{
    // action function for above hook
    function CursorTrailAdmin() {
        global $user_level;
        add_action ( 'admin_menu', array (&$this, 'menus') );
    }

    function menus(){
        $page = add_options_page('Cursor Trail', 'Cursor Trail', 'manage_options', 'cursor-trail', array(&$this,'options'));
        add_action('admin_head-'.$page, array(&$this,'options_head'));
    }

    function options_head(){
        ?>
        <style type="text/css">
            .nwl-plugin table { width:100%; }
            .nwl-plugin table .col { width:100px; }
            .nwl-plugin table input.wide { width:100%; padding:2px; }
        </style>
        <?php
    }

    function options() {
        add_option('cursor_trail_options');
        if( is_admin() && !empty($_POST['ctsubmitted']) ){
            //Build the array of options here
            foreach ($_POST as $postKey => $postValue){
                if( substr($postKey, 0, 3) == 'ct_' ){
                    //For now, no validation, since this is in admin area.
                    if($postValue != ''){
                        $ct_data[substr($postKey, 3)] = $postValue;
                    }
                }
            }
            update_option('cursor_trail_options', $ct_data);
            ?>
            <div class="updated"><p><strong><?php _e('Changes saved.'); ?></strong></p></div>
            <?php
        }else{
            $ct_data = get_option('cursor_trail_options');  
        }
        ?>
        <div class="wrap nwl-plugin">
            <h2>Cursor Trail</h2>
            <div id="poststuff" class="metabox-holder has-right-sidebar">
                <div id="side-info-column" class="inner-sidebar">
                <div id="categorydiv" class="postbox ">
                    <div class="handlediv" title="Click to toggle"></div>
                        <h3 class="hndle">Donations</h3>
                        <div class="inside">
                            <em>Plugins don't grow on trees.</em> Please remember that this plugin is provided to you free of charge, yet it takes many hours of work to maintain and improve!
                            <div style="text-align:center;">
                                <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                                    <input type="hidden" name="cmd" value="_s-xclick">
                                    <input type="hidden" name="hosted_button_id" value="8H9R5FVER3SWW">
                                    <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                                    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
                                </form>
                            </div>
                        </div>
                    </div>
                    <div id="categorydiv" class="postbox ">
                        <div class="handlediv" title="Click to toggle"></div>
                        <h3 class="hndle">Plugin Information</h3>
                        <div class="inside">
                            <p>This plugin was developed by <a href="http://twitter.com/marcussykes">Marcus Sykes</a> @ <a href="http://netweblogic.com">NetWebLogic</a></p>
                            <p>Please visit <a href="http://netweblogic.com/forums/">our forum</a> for plugin support.</p>
                        </div>
                    </div>
                </div>
                <div id="post-body">
                    <div id="post-body-content">
                        <p>If you have any suggestions, come over to our plugin page and leave a comment. It may just happen!</p>
                        <form method="post" action="<?php echo str_replace( '%7E', '~', $_SERVER['REQUEST_URI']); ?>">
                        <table class="form-table">
                            <tbody id="lwa-body">
                                <tr valign="top">
                                    <td colspan="2">
                                        <h3><?php _e("General Settings", 'cursor-trail'); ?></h3>
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cursor Image", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_pointer" value='<?php echo (!empty($ct_data['pointer'])) ? $ct_data['pointer']:WP_PLUGIN_URL.'/cursor-trail/pointer.png'; ?>' class='wide' />
                                        <i><?php _e("Add the url for the image you want to use as a cursor trail. Defaults to a mouse pointer if left blank.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cursor Fade Speed", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_speed" value='<?php echo (!empty($ct_data['speed'])) ? $ct_data['speed']:900; ?>' class='wide' />
                                        <i><?php _e("Speed in ms that each cursor trail will take to fade out.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Start Date", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_start" value='<?php echo (!empty($ct_data['start'])) ? $ct_data['start']:''; ?>' class='wide' />
                                        <i><?php _e("If filled, cursors won't start to trail until this date. Use YYYY-MM-DD format.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                                <tr valign="top">
                                    <td scope="row">
                                        <label><?php _e("Cut-Off Date", 'cursor-trail'); ?></label>
                                    </td>
                                    <td>
                                        <input type="text" name="ct_end" value='<?php echo (!empty($ct_data['end'])) ? $ct_data['end']:''; ?>' class='wide' />
                                        <i><?php _e("If filled, cursors won't trail after this date. Use YYYY-MM-DD format.", 'cursor-trail'); ?></i> 
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr valign="top">
                                    <td colspan="2">    
                                        <input type="hidden" name="ctsubmitted" value="1" />
                                        <p class="submit">
                                            <input type="submit" class="button-primary" value="<?php _e('Save Changes') ?>" />
                                        </p>                            
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <?php
    }
}
global $CursorTrailAdmin; 
$CursorTrailAdmin = new CursorTrailAdmin(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:32:05.210

由于插件似乎添加了没有类或 id 属性的绝对定位图像（至少在演示中），请尝试添加

```
img[src$="/pointer.png"] { 
  z-index: 1000; 
} 
```

到你的 style.css。

可能不是最漂亮的解决方案，但应该可以解决问题。

# php - 在文件请求中包含 php

> ID：11493944
> 
> 赞同：1
> 
> 时间：2012-07-15T17:12:21.610
> 
> 标签：php, include, server-side-includes

如果存在这样的东西，我真的会感到惊讶，但我找不到任何与我的 Google-fu 相关的东西。

我在`require_once()`我网站的每个页面上都包含一个 PHP 文件。该文件是一个轻量级的定制框架。

我想知道是否可以删除整`require_once()`行，并通过使用另一种晦涩的机制，将库包含在指定文件夹中每个文件的开头。

这背后的原因是该特定文件夹中的文件将被编码知识有限的人修改，我不希望他们搞砸 PHP 行，认为它们并不重要。

**编辑：**该库将最终分发，旨在用于典型的 PHP 安装。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:17:57.723

我觉得另一种技术不那么晦涩难懂，那就是`auto_prepend_file`将对该文件夹的所有请求首先重定向到一个文件，然后加载库，然后加载您将让这些其他用户修改的文件。

以下是我使用您的重写代码解析此类事情的方式...如果 htaccess 文件与文件夹位于同一目录中，我认为重写规则将如下所示： `RewriteRule ^(.*)$ index.php/$1 [L]`

在 index.php 文件中，我通常会为站点加载某种配置，然后进行委派。我在这里使用这个函数来获取当前的 url...我不完全确定它是否是矫枉过正，但它在多个平台上对我来说一直有效。

```
function get_current_url() {
 $pageUrl = 'http';
 if (@$_SERVER["HTTPS"] == "on") {$pageUrl .= "s";}
 $pageUrl .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageUrl .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageUrl .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }

 return $pageUrl;
} 
```

然后，您基本上可以使用 php 的`parse_url()`函数解析 get_current_url() 的结果并进行适当的委派。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:14:55.090

是的，这是很有可能的，使用`php.ini`指令[`auto_prepend_file`](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)。

因此，例如，在适当的 .htaccess 文件中：

```
php_flag auto_prepend_file header.php 
```

# java - 何时精确调用 @ModelAttribute 注释方法？

> ID：11493945
> 
> 赞同：6
> 
> 时间：2012-07-15T17:12:40.040
> 
> 标签：java, spring, data-binding, spring-mvc, modelattribute

以下是一个简单的 Spring 表单控制器，用于处理“添加项目”用户请求：

```
@Controller
@RequestMapping("/addItem.htm")
public class AddItemFormController {

    @Autowired
    ItemService itemService;

    @RequestMapping(method = RequestMethod.GET)
    public String setupForm(ModelMap model) {
        return "addItem";
    }

    @ModelAttribute("item")
    public Item setupItem() {
        Item item = new Item();
        return item;
    }

    @RequestMapping(method = RequestMethod.POST)
    protected String addItem(@ModelAttribute("item") Item item) {
        itemService.addItem(item);
        return "itemAdded";
    }

} 
```

我在某处读到：`(...) the @ModelAttribute is also pulling double duty by populating the model with a new instance of Item before the form is displayed and then pulling the Item from the model so that it can be given to addItem() for processing.`

我的问题是，何时以及多久`setupItem()`准确地调用一次？如果用户请求多个添加项，Spring 会保留单独的模型副本吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T20:58:45.773

每次对这个控制器中`setupItem`的任何方法的请求都会调用一次，就在方法被调用之前。因此，对于您的方法，流程将被称为，创建一个名为 的模型属性，因为您的参数也被标记为，此时将使用 POST 参数增强。`@RequestMapping``@RequestMapping``addItem``setupItem``item``addItem``@ModelAttribute``item`

# php - 如何在 PHP 中安全地将 UTF-8 与 ISO 8859-1 (latin1) 进行比较？

> ID：11493947
> 
> 赞同：2
> 
> 时间：2012-07-15T17:12:58.737
> 
> 标签：php, character-encoding

这可能是一个愚蠢的问题，但似乎没有什么对我有用：

我必须比较 2 个不同数据库上的 2 列之间的值（我无权更改值）。**db1**中的编码是 UTF-8。**db2**中的编码是 latin1。

因此，例如，这些是我正在比较的 2 个值，并且在比较中应该相同：

```
**db1_value** = 'Maranh&atilde;o'
**db2_value** = 'Maranhão'; 
```

它们使用 utf_encode 以完全相同的方式显示，显示不是问题。我想将变量**db1_value**与数据库中的字段**db2_value**进行比较，所以我使用了一些非常简单的东西：

```
$query = "SELECT **db2_value** FROM db2 WHERE db2_field LIKE '" . **$db1_value** . "'"; 
```

在比较之前如何`'Maranh&atilde;o'`转换`'**Maranhão**'`？

我尝试了几种方法，iconv、utf8_encode 和其他一些方法，但它们对变量没有任何影响。我只是想知道我是否采取了正确的方法来做到这一点。

感谢对此的任何建设性意见。

非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:24:16.763

您需要转换的不是实际值，`UTF-8`而是`HTML-ENTITIES`实际值 幸运的是 mbstring 扩展提供了这样的转换：

```
$latin1 = mb_convert_encoding($db1_value, "ISO-8859-1", "HTML-ENTITIES"); 
```

这里我们将 指定`HTML-ENTITIES`为`FROM`字符集

然后你可以比较`$latin1`你的`$db2_value`.

# php - 我的递归函数不起作用

> ID：11493950
> 
> 赞同：-2
> 
> 时间：2012-07-15T17:13:30.383
> 
> 标签：php, wordpress, recursion

我创建了一个递归函数来确定当前页面是否是页面树中页面的子页面。

我的功能：

```
function is_ancestor_of( $page_name = null, $post ) {

  if(is_null($page_name))
    return false;

  // does it have a parent?
  if (!isset( $post->post_parent ) OR $post->post_parent <= 0 )
    return false;

  //Get parent page
  $parent = wp_get_single_post($post->post_parent);

  if ( $parent->post_name == $page_name ){
    echo $parent->post_name.' - '.$page_name;
    return true;
  } else {
    is_ancestor_of( $page_name, $parent );
  }
} 
```

这是我正在测试的代码：

```
$is_parent = is_ancestor_of( 'account', $post );

if(!$is_parent) {
  echo '<br/> No match';
} 
```

这是结果：

> 帐户 - 帐户
> 不匹配

这表明它确实找到了一个名为“帐户”的父页面，但它没有返回任何数据。我也测试过返回一个字符串，但这也不起作用。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:19:47.170

您的问题似乎是您正在递归调用函数，但没有返回递归调用的结果。

你的线路

```
is_ancestor_of( $page_name, $parent ); 
```

应该只是

```
return is_ancestor_of( $page_name, $parent ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:19:23.523

尝试`$parent->post_name`在下一行之前回显，您可能会更好地了解正在发生的事情。

```
 if ( $parent->post_name == $page_name ){ 
```

# javascript - javascript 谷歌地图 api 删除标记

> ID：11493957
> 
> 赞同：0
> 
> 时间：2012-07-15T17:14:11.167
> 
> 标签：javascript, google-maps

我有功能，当单击 li 元素时，会将标记添加到地图中。如果单击另一个 li，则删除原始标记并出现新标记。

我遇到的问题是，当第一次单击 li 时，标记会放置在地图上。单击第二个 li 时，标记将被删除，但不会添加新标记。我在萤火虫中没有错误。我看不到我错过了什么。

```
$(document).ready(function() {

    $(".markerSelection").click(function() {
      var selectionId = $(this).attr("id");
      drop(selectionId);
    }); 
});

var markers = {
    shopping : [
    new google.maps.LatLng(52.26183, -7.11339),
    new google.maps.LatLng(52.26134, -7.11226),
    new google.maps.LatLng(52.26067, -7.11181),
    new google.maps.LatLng(52.26003, -7.11033)],
    cars : [
    new google.maps.LatLng(52.26183, -7.11339),
    new google.maps.LatLng(52.26134, -7.11226),
    new google.maps.LatLng(52.26067, -7.11181),
    new google.maps.LatLng(52.26003, -7.11033)] 
};

var iterator = 0; 

function drop(selectionId) {
    clearOverlays();
    for (var i = 0; i < markers[selectionId].length; i++) {
    setTimeout(function() {
    addMarker(selectionId);
    }, i * 200);
    }
}

function addMarker(selectionId) {
    marker = new google.maps.Marker({
    position: markers[selectionId][iterator],
    map: map,
    draggable: false,
    animation: google.maps.Animation.DROP
    });
    iterator++;
    markersArray.push(marker);
}

// Removes the overlays from the map, but keeps them in the array
function clearOverlays() {
  if (markersArray) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:10:23.627

您已定义*`markers`*为 Json 变量，但我不知道您的意思是什么`markers[selectionId]`！标记未定义为数组，按索引引用它似乎是不正确的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:11:00.717

我再次查看了您的代码，我认为问题在于`iterator`，它在全局范围内初始化为 0 。这就是为什么它第一次工作正常，但在那之后，指数超过了。看来您应该在`drop()`函数开始时将其设置为零。
但是，如果您将索引作为第二个参数`addMarker()`而不是外部变量传递，它会更有意义，因为外部变量会在其中处理`drop()`并使您的代码复杂化。

# jenkins - 詹金斯 htmlpublisher 问题

> ID：11493958
> 
> 赞同：3
> 
> 时间：2012-07-15T17:14:23.543
> 
> 标签：jenkins, jenkins-plugins

选择“添加构建后操作”并选择“发布 HTML 报告”后，htmlpublisher 插件会显示表头字段（要归档的 html 目录、索引页面、报告标题、保留过去的 html 报告），但不会显示输入数据的字段. 直接在表格标题字段下方显示添加和删除按钮。我希望有人以前见过这种行为并找到了解决办法。

我在 ubuntu 12.04 上运行 Jenkins。除了无法发布 html 报告之外，Jenkins 正在从 SVN 工作和构建工作。Jenkins 日志中没有报告错误。当我注意到问题时，我最初正在运行 Jenkins 1.424（新安装，因此 html 发布者以前从未使用过）。所以我将 Jenkins 更新到 1.474 版，但问题仍然存在。我已经删除并重新安装了 Jenkins，结果相同。

感谢您的想法和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:03:57.073

似乎已注意到此错误：[https ://issues.jenkins-ci.org/browse/JENKINS-14491](https://issues.jenkins-ci.org/browse/JENKINS-14491)

显然：“恢复到 Jenkins 1.473，同时将插件保持为 1.0 有效。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:01:24.207

这就是插件的工作方式......

您应该单独创建 html - 假设您创建了一个名为“MyReport”的文件夹，其中包含大量 html 文件，而“index”html 文件是 index.html。

在“发布 Html 报告”字段中，您必须填写以下内容：

*   要归档的 html 目录 = MyReport
*   索引页 = index.html
*   报告标题 = 我的报告标题

然后您将获得来自 Jenkins UI 的该报告的链接

# c# - Webclient 上传文件 - 内部服务器错误 500

> ID：11493960
> 
> 赞同：0
> 
> 时间：2012-07-15T17:14:43.583
> 
> 标签：c#, curl

我一直在尝试通过以下 C# 代码模拟以下 cURL 命令：

```
curl.exe –v –u user:pwd –XPOST –T "file1.txt" –H "Content-Type:text/plain" "http://example.com/xx/xx/xx/insert" 
```

```
string url = "http://example.com/xx/xx/xx/insert";
string fileName = @"file1.txt";

var client = new WebClient();
client.Credentials = new NetworkCredential("user", "pwd");
client.Headers.Add("Content-Type", "text/plain");         
byte[] responseBinary = client.UploadFile(url, "POST", fileName);
string response = Encoding.UTF8.GetString(responseBinary); 
```

它给了我一个“内部服务器错误 500”。我认为我要上传到的服务器是 PHP 服务器。我应该如何进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:10:36.720

更新 ：

我正在通过 fiddler 调试 cURL 和 webclient（控制台应用程序）的流量。看起来 cURL 只发送 file1.txt 的内容并将标题保持为“text/plain”。webclient 将 Content-Disposition、filename、content-type 添加到 file1.txt 的内容中，并将 headers 设置为“multipart/form-data”。

无论如何我可以阻止webclient的这种行为吗？

谢谢，卡努

# python - 使用 Django 和 PyEnchant：在共享主机上获取 MemoryError，但不是在本地

> ID：11493963
> 
> 赞同：1
> 
> 时间：2012-07-15T17:14:53.013
> 
> 标签：python, django, memory, pyenchant

我现在是 Django 和 Python 的初级用户，到目前为止，我在本地所做的任何事情都在上传后立即在我的主机上运行。我的主机由 Hostmonster 提供。

但是，我刚刚安装了 PyEnchant。我只使用它进行基本的拼写检查和建议新词。此外，“字符串”始终是由“+”分隔的单词字符串。

```
from enchant import Dict

def spellcheck(string):
    spellcheck = Dict("en-GB")

    suggestedword = []

    for word in string.split('+'):
        if len(word) > 2 and not spellcheck.check(word):
           suggestedword.append(spellcheck.suggest(word)[0])
    else:
        suggestedword.append(word)

return suggestedword 
```

在本地，使用 Django 开发服务器，一切正常。在我的主机上，我得到：

`Django Version: 1.4`

`Exception Type: MemoryError`

`Exception Location: /home/user/python/lib/python2.7/ctypes/__init__.py in _reset_cache, line 279`

在“从附魔导入字典”之后几步似乎抛出了错误。

我猜字典太大而无法存储在临时内存中？

知道如何解决这个问题吗？如果我在问一些非常愚蠢的问题，或者以非常愚蠢的方式问我的话，请放轻松:)。

如果我遗漏了任何重要数据，那是因为我不知道它很重要，所以请随时告诉我还有哪些其他信息可以帮助解决这个问题（如果可以在共享主机上解决）。

提前感谢您的帮助！

编辑1：

使用 SSH，我可以导入和使用 PyEnchant：

```
>>> import enchant
>>> spellcheck = enchant.Dict("en-GB")
>>> spellcheck.suggest('nmae')
['name', 'mane'] 
```

这让我更加困惑，因为当我在我的问题中使用它时，我没有运气避免'MemoryError'。

编辑2：

仍然无法弄清楚这一点。如果我在任何模块中执行“导入附魔”，它似乎会导致 MemoryError，但我可以通过远程 shell 和 python 解释器使用“导入附魔”。

编辑3：

尽管如此，经过几天的谷歌搜索和尝试，我无法让这个 MemoryError 消失。以前有人用“PyEnchant”看过这个吗？我在想我的主机可能没有提供足够的内存来加载 PyEnchant 导入？有没有办法改变模块使用内存的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:53:21.723

移动我的 Django 安装后，我也遇到了同样的问题。问题是 httpd (Apache) 访问数据库。就我而言，它是 Selinux，但我认为一般的 UNIX 类型文件权限会导致类似的问题。在这种情况下，在尝试可行的生产设置时，它在 Django 服务器上运行良好，但在我的本地 Apache 上运行良好。

*   您的主机使用 Linux 吗？
*   你能运行 Apache 来帮助确定问题吗？

# c# - 在gridview保存/更新/删除上的数组错误范围之外的索引

> ID：11493966
> 
> 赞同：1
> 
> 时间：2012-07-15T17:15:02.573
> 
> 标签：c#

## 在gridview保存/更新/删除上的数组错误范围之外的索引

嗨...，
我正在使用 GridView 来保存/更新/删除城市详细信息。
当我尝试保存/更新/删除详细信息时，它会抛出一个错误“索引超出了数组的范围。” 仅在具有已发布代码的服务器中。
在我的本地机器上，它运行良好。所以我把本地机器的连接字符串改成server，在本地运行。这也很好用。
然后我用（列、键、约束、触发器、索引和统计）检查了表城市的数据库架构。一切都一样。
GridView RowCommand 的代码如下，

```
City city = null;  
if (new[] { CommandName.DeleteRow.GetTextName(), CommandName.UpdateRow.GetName() }.Contains(e.CommandName))  
 city = City.GetCityById(int.Parse(e.CommandArgument.ToString()));  
if (e.CommandName == CommandName.StartInsert.GetTextName())  
{  
gvCities.FooterRow.Visible = true;  
return;  
}  
if (e.CommandName == CommandName.InsertFirst.GetTextName())  
{  
var button = (Button)e.CommandSource;  
if (button == null)  
  throw new Exception("Control not found");  
var txtName = button.NamingContainer.NamingContainer.FindControl("txtName") as TextBox;  
var ddlEmptyAddState = button.NamingContainer.NamingContainer.FindControl("ddlEmptyAddState") as DropDownList;  
if (txtName == null)  
  throw new Exception("Control not found");  
city = new City{ Name = txtName.Text.Trim(), StateId = Convert.ToInt32(ddlEmptyAddState.SelectedValue) };  
city.InsertCity();  
}  
else if (e.CommandName == CommandName.Insert.GetTextName())  
{  
var row = gvCities.FooterRow;  
DropDownList ddlAddState = (DropDownList)row.FindControl("ddlAddState");  
city = new City
{
Name = ((TextBox) row.FindControl("txtName")).Text.Trim(),
StateId = Convert.ToInt32(ddlAddState.SelectedValue),
IsDefault = ((CheckBox) row.FindControl("cbDefault")).Checked
};  
city.InsertCity();  
}  
else if (e.CommandName == CommandName.DeleteRow.GetTextName())  
{  
city.DeleteCity();  
}  
else if (e.CommandName == CommandName.UpdateRow.GetName())  
{  
var row = gvCities.Rows[gvCities.EditIndex];  
DropDownList ddlEditState = (DropDownList)row.FindControl("ddlEditState");  
if (row == null)  
  throw new Exception("Edit row not found");  
city.Name = ((TextBox) row.FindControl("txtName")).Text.Trim();  
city.StateId = Convert.ToInt32(ddlEditState.SelectedValue);  
city.IsDefault = ((CheckBox)row.FindControl("cbDefault")).Checked;  
city.UpdateCity();
}  
gvCities.DataBind();  
if (e.CommandName != CommandName.Edit.GetTextName() && gvCities.EditIndex >= 0)  
  gvCities.EditIndex = -1; 
```

请帮我解决这个问题....
提前谢谢...

问候

# mysql - 如果值为空，请检查“输入类型”，然后插入默认文本

> ID：11493969
> 
> 赞同：-3
> 
> 时间：2012-07-15T17:15:16.257
> 
> 标签：mysql, html, forms, user-input, default-value

我不是很先进，所以我需要很长时间才能到达任何地方，但我坚持不懈，到目前为止已经让这个工作：

```
<input 
 type="text"
 name="product_desc[<?php echo $language['language_id']; ?>][tab_extra]"
 size ="50"
 value="<?php echo isset($product_desc[$language['language_id']]) ?
       $product_desc[$language['language_id']]['tab_extra'] : ''; ?>"
/> 
```

它查看数据库并显示值，但允许我更新、删除或更改其中包含的文本。太好了，除了大多数时候我需要将该标签称为“额外”，而且我很少需要更改标题。我正在考虑使用占位符，但这并不能真正满足我的需要。

我在想一个 IF...ELSE 语句可以工作，比如 IF tab_extra 是空的，而不是在输入框中默认显示单词“Extra”。由于存在所有“如何清除点击时的默认值”问题，我的搜索总是空白，而这根本不是我想要做的。

所以总结一下...查看数据库，如果该字段为空，请添加单词“Extra”以插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:20:10.470

从 MySQL 数据库中选择时，如果您有一个类似的表

```
table baz:

foo         bar
=========   =========
value1      NULL
value2      Optional
value3      NULL 
```

并且想要在“bar”列为NULL的地方检索单词“Extra”，那么您可以使用该`coalesce`函数

```
select coalesce(bar, 'Extra') as bar from baz; 
```

# postgresql - 如何检索 PostgreSQL 数据库的评论？

> ID：11493978
> 
> 赞同：22
> 
> 时间：2012-07-15T17:16:23.130
> 
> 标签：postgresql

我最近发现您可以在 PostgreSQL 中为所有类型的对象[附加注释。](http://www.postgresql.org/docs/current/static/sql-comment.html)特别是，我对玩数据库的评论很感兴趣。例如，要**设置**数据库的注释：

```
COMMENT ON DATABASE mydatabase IS 'DB Comment'; 
```

但是，**得到**评论的相反说法是`mydatabase`什么？

从命令行`psql`，我可以看到注释以及其他信息作为`\l+`命令的结果；我可以在 awk 的帮助下使用它来实现我的目标。但如果可能的话，我宁愿使用 SQL 语句。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-15T23:25:39.700

[**首先，可以使用强制转换为适当的对象标识符类型**](https://www.postgresql.org/docs/current/interactive/datatype-oid.html)来简化对表注释的查询：

```
SELECT description
FROM   pg_description
WHERE  objoid = 'myschema.mytbl'::regclass; 
```

架构部分是可选的。如果你省略它，你的 current[`search_path`](https://www.postgresql.org/docs/current/interactive/ddl-schemas.html#DDL-SCHEMAS-PATH)决定了任何名为`mytbl`.

**更好**的是，PostgreSQL 中有**专门的函数**来简化和规范这些查询。[手册](https://www.postgresql.org/docs/current/interactive/functions-info.html#FUNCTIONS-INFO-COMMENT-TABLE)：

> `obj_description(`*`object_oid`*, ... 获取数据库对象的注释*`catalog_name`*`)`
> 
> `shobj_description(`*`object_oid`*, ... 获取共享数据库对象的评论*`catalog_name`*`)`

表说明：

```
SELECT obj_description('myschema.mytbl'::regclass, 'pg_class'); 
```

数据库说明：

```
SELECT pg_catalog.shobj_description(d.oid, 'pg_database') AS "Description"
FROM   pg_catalog.pg_database d
WHERE  datname = 'mydb'; 
```

### 你怎么知道的？

好吧，阅读优秀的手册很有启发性。:)
但是在这种情况下有一条更直接的路线：大多数`psql`元命令都是用纯 SQL 实现的。开始一个会话，看看窗帘背后的魔力。[手册：](https://www.postgresql.org/docs/current/interactive/app-psql.html)`psql **-E**`

> `-E`
> `--echo-hidden`
> 
> 回显由`\d`和其他反斜杠命令生成的实际查询。你可以用它来研究psql的内部操作。这相当于将变量设置`ECHO_HIDDEN`为`on`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-15T18:08:06.590

要获取有关数据库的评论，请使用以下查询：

```
select description from pg_shdescription
join pg_database on objoid = pg_database.oid
where datname = '<database name>' 
```

此查询将为您提供给定表名的表注释：

```
select description from pg_description
join pg_class on pg_description.objoid = pg_class.oid
where relname = '<your table name>' 
```

如果在不同的模式中使用相同的表名，则需要稍微修改一下：

```
select description from pg_description
join pg_class on pg_description.objoid = pg_class.oid
join pg_namespace on pg_class.relnamespace = pg_namespace.oid
where relname = '<table name>' and nspname='<schema name>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-01T16:58:04.997

对于表，请尝试

```
\dd TABLENAME 
```

这显示了我添加到表格中的评论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T07:21:42.403

此查询将只获得所有表的表注释

```
SELECT RelName,Description 
FROM pg_Description
JOIN pg_Class 
ON pg_Description.ObjOID = pg_Class.OID
WHERE ObjSubID = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-16T06:19:44.550

此查询将返回表的注释

```
 SELECT obj_description('public.myTable'::regclass)
 FROM pg_class
 WHERE relkind = 'r' limit 1 
```

# dojo - 如何从另一个对话框打开 Dojo 对话框

> ID：11493979
> 
> 赞同：0
> 
> 时间：2012-07-15T17:16:32.070
> 
> 标签：dojo, dialog

我无法从另一个 dijit.Dialog 打开 dijit.Dialog。我在这里看到其他帖子表明它从 Dojo 版本 1.5 开始运行良好，但我使用的是 Dojo 1.6.1 并且运气不佳。[http://dojotoolkit.org/documentation/tutorials/1.7/dialogs_tooltips/](http://dojotoolkit.org/documentation/tutorials/1.7/dialogs_tooltips/)上的 Dojo 文档似乎暗示这是支持的，它说：“了解 dijit/Dialog 的一个重要事实是实例被添加到”堆栈“这样你就可以在另一个之上拥有实例。”

当我从当前显示的对话框中调用第二个对话框时，第二个对话框几乎不可见，然后浏览器刷新，只显示第一个对话框。

这是一个简单的例子：

```
<html>
<head>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dijit/themes/claro/claro.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6.1/dojo/dojo.xd.js" djConfig="parseOnLoad: true"></script>
    <script type="text/javascript">
        dojo.require("dijit.dijit");
        dojo.require("dijit.Dialog");
        dojo.ready(function () {
            dijit.byId("dialog1").show();
        });
    </script>
</head>
<body class="claro">

    <div data-dojo-type="dijit.Dialog" id="dialog1" data-dojo-props="title:'Dialog 1'">
        I'm dialog 1
        <a href="" onclick="dijit.byId('dialog2').show();">Open dialog 2</a>
    </div>

    <div data-dojo-type="dijit.Dialog" id="dialog2" data-dojo-props="title:'Dialog 2'" style="visibility:hidden;">
        I'm dialog 2
    </div>

</body>
</html> 
```

我有一种感觉，我错过了一些简单的东西。有人可以帮帮我吗？理想情况下，dialog1 将留在背景中，而 dialog2 作为模态对话框出现在其顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:56:14.357

您有一个锚标记，它会触发 a ，`document.location.href = ""`因为 onclick 返回`true`。

请参阅以下内容： [我应该为 JavaScript 链接使用哪个“href”值，“#”还是“javascript:void(0)”？](https://stackoverflow.com/questions/134845/href-tag-for-javascript-links-or-javascriptvoid0)

更正为

```
<a href="javascript:void(0); " 
       onclick="dijit.byId('dialog2').show(); return false ">
                                        <!-- note 'false' -->
 Open dialog 2</a> 
```

如果 onclick 返回 a `true`(the `.show()`does that) ，那么 an 的预期行为`<a>`是可以预期的，您单击的链接会将您带到另一个页面。当`href`为空白时，将重新加载同一页面。

# python - Python BaseHTTPServer：如何让它停止？

> ID：11493985
> 
> 赞同：2
> 
> 时间：2012-07-15T17:17:07.363
> 
> 标签：python, windows, sockets

根据来源，必须从与服务器运行的线程不同的线程调用 BaseServer.shutdown()。

但是，我正在尝试使用在 Web 请求中提供给服务器的特定值来关闭服务器。

请求处理程序显然在这个线程中运行，所以在我这样做之后它仍然会死锁：

```
httpd = BaseHTTPServer.HTTPServer(('', 80), MyHandler)
print("Starting server in thread")
threading.Thread(target=httpd.serve_forever).start() 
```

我怎样才能完成我想要的？我必须设置一个套接字或管道或其他东西（请告诉我如何做到这一点，如果它是解决方案），主线程可以阻塞并等待子线程发送消息，此时它将能够调用shutdown()？

我目前能够通过从请求处理程序调用“httpd.socket.close()”来实现某种“工作”行为。这会产生一个`[Errno 9] Bad file descriptor`错误，并且似乎终止了 Windows 上的进程。

但这显然不是解决此问题的正确方法。

*更新约。2013 年 8 月*我与 node.js 私奔来满足强大的异步 I/O 的需求，但大量的副项目（例如线性代数研究、各种命令行工具前端）让我回到了 python。回顾这个问题，BaseHTTPServer 与其他选项（如 Phil 提到的各种微框架）相比，可能没有什么实用价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:41:12.157

**1.**来自[BaseHTTPServer 文档](http://docs.python.org/library/basehttpserver.html#more-examples)

> 创建一个不会永远运行但直到满足某些条件的服务器：

```
def run_while_true(server_class=BaseHTTPServer.HTTPServer,
                   handler_class=BaseHTTPServer.BaseHTTPRequestHandler):
    """
    This assumes that keep_running() is a function of no arguments which
    is tested initially and after each request.  If its return value
    is true, the server continues.
    """
    server_address = ('', 8000)
    httpd = server_class(server_address, handler_class)
    while keep_running():
        httpd.handle_request() 
```

允许一些 url 调用来设置终止条件，使用任何你喜欢的东西。

**编辑**：`keep_running`是您选择的任何功能，可能很简单：

```
def keep_running():
    global some_global_var_that_my_request_controller_will_set
    return some_global_var_that_my_request_controller_will_set 
```

您可能想要更智能的东西，并且`without_rediculously_long_var_names`.

**2.** BaseHTTPServer 通常比你想去的低。有[很多微框架](http://www.slideshare.net/r1chardj0n3s/web-microframework-battle)可能适合您的需求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:44:41.153

[threading.Event](http://docs.python.org/library/threading.html#event-objects)对于向其他线程发出信号很有用。例如，

```
please_die = threading.Event()

# in handler
please_die.set()

# in main thread
please_die.wait()
httpd.shutdown() 
```

如果要在线程之间发送数据，可以使用[队列。](http://docs.python.org/library/queue.html)

# python - syslog 正在工作，但 SysLogHandler 没有

> ID：11493988
> 
> 赞同：2
> 
> 时间：2012-07-15T17:17:32.933
> 
> 标签：python, logging, syslog, uwsgi

我无法让 SysLogHandler 工作，这让我抓狂。

这是我的代码：

```
 import logging
   import logging.handlers

   logger = logging.getLogger()
   sh = logging.handlers.SysLogHandler(address='/dev/log/', facility='local1')
   logger.addHandler(sh)

   logger.setLevel(logging.INFO)
   logger.info('Test') 
```

并且不起作用。我已将 local1 设置为`/var/log/test.log`在我的 syslog.conf 中输出，但没有出现任何内容，但是如果我使用 syslog，它会按预期工作：

```
 import syslog

   syslog.syslog(syslog.LOG_LOCAL1, 'Test from syslog') 
```

我在 Debian 6 上，在一个通过 uwsgi 提供的应用程序中。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:03:16.827

UNIX 套接字名称（地址参数）应该以文件名结尾，而不是“/”。所以它通常应该是 linux 上的 address='/dev/log' 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:50:29.017

您`local1`作为字符串提供，但模块需要一个常量。即使是默认值`LOG_USER`，请参阅[http://docs.python.org/2/library/logging.handlers.html#logging.handlers.SysLogHandler](http://docs.python.org/2/library/logging.handlers.html#logging.handlers.SysLogHandler)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T17:40:24.427

也许你的意思是`logger.setLevel()`而不是`logger.setLever()`.

还有，你为什么要重新`import logging.handlers`-？

# javascript - 正则表达式 Javascript 中的域名/主机名

> ID：11493993
> 
> 赞同：0
> 
> 时间：2012-07-15T17:18:12.917
> 
> 标签：javascript, regex

我想创建一个只解析符合当前域的链接的正则表达式。我想知道我是否可以在 Javascript 正则表达式对象中使用类似 {hostname} 的东西，这样它就会将搜索锁定到仅针对当前页面特定域的那些链接。

例如：如果域是 www.domain.com，它将仅搜索以该特定域开头的链接。如果域是 anotherdomain.com，它将仅搜索以该特定域开头的链接。我的正则表达式更复杂，但我希望能够放置某种将被当前域替换的全局变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:36:21.253

您可以通过 Location 对象检索当前页面的主机名：

```
var hostname = window.location.hostname; 
```

然后你可以通过将它连接到你的正则表达式中来使用该变量来组成你的正则表达式：

```
var re = new RegExp("<start of your regex>" + hostname + "<end of your regex>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:44:20.670

您可以从中获取主机名`window.location.hostname`。

然后，您将希望转义主机名中潜在的特殊字符。

主机名通常会包含`.`哪些是正则表达式中的特殊字符，当然也可以包含`-`哪些可以是特殊字符。

可能最好从事防御性编程并逃避正则表达式中可能是特殊字符的所有内容，即使它们中的许多实际上不应该出现。从[用于 Javascript 正则表达式的转义字符串中，](https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex)您可以使用此函数：

```
function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
} 
```

然后你可以这样做：

```
var regexpFragment = escapeRegExp(window.location.hostname); 
```

# java - REST Web 服务：服务器以 JAX-B 错误响应 GET

> ID：11493994
> 
> 赞同：3
> 
> 时间：2012-07-15T17:18:18.437
> 
> 标签：java, json, rest, netbeans, glassfish

我正在使用 JAVA 和 netbeans 创建一个 RESTful Web 服务。Web 服务输出正确的 JSON 数据，但是当我想读取从浏览器调用 Web 服务时通过 GET 发送的变量时，问题就出现了。

当我尝试输出刚刚使用 GET 发送的变量时，WS 会返回 NULL。此外，Glassfish 服务器控制台输出以下内容：

*   信息：找不到类 java.lang.String 的 JAX-B 元素
*   信息：找不到类 java.lang.String 的 JAX-B 元素
*   ……
*   信息：找不到类 java.lang.String 的 JAX-B 元素
*   信息：找不到类 javax.ws.rs.core.Response 的 JAX-B 元素
*   信息：找不到类 java.lang.String 的 JAX-B 元素

![Glassfish 控制台](../Images/6b09701ac663eda13c89fd940555e877.png) ![编码的网络服务](../Images/09fca783aa8b7e8e373add6b3bf1c4da.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T18:26:53.547

使用@PathParam 注释时，您需要将@Path 注释添加到方法声明中。

```
@GET
@Path("/{test}")
@Produces("application/json")
public String getJson(@PathParam("test") String test) {
    return test;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T08:11:30.840

可能是因为 CORS（Cross Origin ResourceSharing）。尝试为您的浏览器添加 CORS 插件，或者您可以在响应中添加 CORS 标头，例如 return Response.ok(resp).header("Access-Control-Allow-Origin" ， “*“）。建造（）;

# javascript - 在 chrome 扩展中显示当前 URL

> ID：11493995
> 
> 赞同：10
> 
> 时间：2012-07-15T17:18:26.733
> 
> 标签：javascript, google-chrome, tabs, google-chrome-extension

经过一番研究，我想出的代码是这样的：

```
var outUrl;
// first get the windowid
chrome.windows.getCurrent(function(window) {
    // then get the current active tab in that window
    chrome.tabs.query({
        active: true,
        windowId: window.id
    }, function (tabs) {
        var tab = tabs[0];
        document.write(tab.url)
    });
}); 
```

这是从我的弹出 html 文件调用的 javascript 文件中。但是，它不显示当前网站的 URL，而是什么也不显示。

我在这个网站和其他网站上找到了多篇关于此的帖子，但我无法实施任何假设的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-15T19:20:40.657

也许这就是你要找的......

```
chrome.tabs.query({'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT},
   function(tabs){
      alert(tabs[0].url);
   }
); 
```

并且需要在清单中设置**选项卡权限...**

清单.json

```
"permissions": [ 
  "tabs"
] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-04T07:39:49.840

我遇到过同样的问题。我编写了这个扩展来在弹出窗口中显示当前用户正在浏览的 URL。

manifest.js

```
"permissions": [ 
  "tabs"
] 
```

popup.js

```
function getCurrentTabUrl(callback) {  
  var queryInfo = {
    active: true, 
    currentWindow: true
  };

  chrome.tabs.query(queryInfo, function(tabs) {
    var tab = tabs[0]; 
    var url = tab.url;
    callback(url);
  });
}

function renderURL(statusText) {
  document.getElementById('status').textContent = statusText;
}

document.addEventListener('DOMContentLoaded', function() {
  getCurrentTabUrl(function(url) {
    renderURL(url); 
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T09:56:19.743

**解决方案：**

> 获取当前选择的 Chrome 扩展选项卡的 URL 此代码用于获取部分 URL，因为`tabs[0].url`我们无法获取部分 URL，例如`host, hostname, origin, port, etc...`

```
chrome.tabs.query({ currentWindow: true, active: true }, function (tabs) {
let link = document.createElement('a');
link.href = tabs[0].url;
}) 
```

> 进一步使用基本的js来获得它的一部分： `link.host`=“密码记住.web.app”你可以使用其他喜欢`link.hostname, link.hash, link.host, link.href, link.origin, .link.pathname, link.protocol, link.search`

希望它能解决你的问题！

# node.js - “除了您的代码之外，一切都并行运行”.. 等等什么？

> ID：11493996
> 
> 赞同：2
> 
> 时间：2012-07-15T17:18:29.150
> 
> 标签：node.js

我正在尝试学习 Node.js 以及我理解的一些要点：

1.  Node.js 不会为每个请求创建一个单独的进程，它只是一个处理所有请求的进程。

2.  它是异步的，这意味着您可以将回调附加到一个持久的进程并继续您的其余工作，而无需等待它完成。

我真正不明白的是作者在[理解 node.js](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)中的观点——“除了你的代码之外，一切都是并行运行的”。我已经理解了类比和解释它的代码，但我仍然不明白“一切”和“代码”之间的区别是什么。我经常听到有关 node.js 的消息。

此外，人们称赞 node.js 的效率，因为一个并发连接的内存开销可能低至 8KB，但 CPU 负载呢？与 PHP + Apache 相比，node.js 是否做得更少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:29:11.647

每当 Node.js 在应用程序中运行 JavaScript 时，它都会使用单个线程。异步任务（网络、文件系统等）都在单独的线程上自动为您处理。这意味着您可以获得多线程应用程序的大部分有用性，而不必担心锁定资源带来的所有麻烦等等。

Node 并不是所有工作的工具。它非常适合受 IO 限制的应用程序。例如，如果您的应用程序需要大量的工作来处理模板，那么 Node 可能不适合您。相反，如果您只是在移动数据，Node 会非常有效。

Node 经常被引用为比 Apache 等服务器更快的原因是它不会创建线程和所有资源来处理请求。在 Apache 中，大多数时候，处理请求的线程正在等待网络或文件系统数据。虽然这样做，但它正在浪费资源。使用 Node，只有一个线程处理这些请求（在您的应用程序中）。同样，这对某些事情很有用，但如果你有很多处理要做，Node 就不会有效，因为在这些情况下它一次只能处理一个请求。

该视频很好地解释了： [http ://www.youtube.com/watch?v=F6k8lTrAE2g&feature=youtube_gdata](http://www.youtube.com/watch?v=F6k8lTrAE2g&feature=youtube_gdata)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:20:37.813

> 除了您的代码之外，一切都并行运行。

这意味着如果你这样做

`while(true){}`

在**您的**代码中的任何地方，整个节点应用程序都会停止。当您编写的代码执行时，其他任何事情都不会执行。请求不会被处理，响应不会被返回，什么都没有。您必须非常小心，不要在节点中占用 CPU。

> 但是CPU负载呢？

这完全取决于您的应用程序的性质和负载。如果您的应用程序很忙，它将使用更多的 CPU。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T17:31:41.693

想象一个繁忙的十字路口，中间有一名交警。当警察正常工作时，数百辆汽车可以非常快速有效地通过十字路口。

如果警察在进行交通时开始在他的手机上接收和回复短信，那么事情可能很快就会失控。

交通警察就是你的 node.js 应用，他花在 SMS 上的时间就是作者所说的“你的代码”。

换句话说：node.js 的性能会随着你作为交通警察使用的越多而发光。除了拉取和推送数据（即：排序数字列表、渲染 html 模板等）之外，您开始使用它做的事情越多，您快速接受和处理新连接的能力就会受到影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T17:27:49.743

“一切”指的是除了你的代码之外的一切。例如，处理 HTTP 的东西。另一种说法是“你的代码不会等待 node.js 做一些事情，比如通过 TCP 发送数据，因为这是异步完成的。”

要回答您的第二个问题，我不知道哪个 CPU 负载较小，我猜它们是相似的。Node.js 被吹捧的优势是由于前面提到的异步性，CPU 得到了更好的利用。