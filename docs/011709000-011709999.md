# StackOverflow 问答 11709000-11709999

# android - How to receive Intent. ACTION_PACKAGE_ADDED Intent. ACTION_PACKAGE_REMOVED in appwidget?

> ID：11709000
> 
> 赞同：4
> 
> 时间：2012-07-29T11:47:26.110
> 
> 标签：android, android-intent, widget

How to receive `Intent.ACTION_PACKAGE_ADDED` and `Intent.ACTION_PACKAGE_REMOVED` in appwidget?

I've tried to add intent-filter in Manifest:

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <!-- The widget provider -->
        <receiver android:name=".NetsWidgetProvider">
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_REMOVED"/>
                <action android:name="android.intent.action.PACKAGE_ADDED"/>
                <action android:name="com.oozic.widget.incstage.nets.ACTION_NOT_INSTALL"/>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

            </intent-filter>
            <!-- This specifies the widget provider info -->
            <meta-data android:name="android.appwidget.provider"
                    android:resource="@xml/widgetinfo" />
        </receiver>

    </application> 
```

and I also tried register in Code:

```
@Override
   public void onEnabled(Context context) {

      registerReceiver(context);
      Utils.log(TAG, "Register PACKAGE_ADDED PACKAGE_REMOVED");

   }

   private void registerReceiver(Context context) {
       IntentFilter filter = new IntentFilter();
       filter.addAction(Intent.ACTION_PACKAGE_ADDED);
       filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
       context.getApplicationContext().registerReceiver(this, filter);

   } 
```

But both didn't work. Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-22T18:33:06.497

In AndroidManifest.xml adding `<data android:scheme="package" />` solved the issue.

```
<receiver android:name=".PackageAddedReceiver">
    <intent-filter>
        <action android:name="android.intent.action.PACKAGE_ADDED"/>
        <data android:scheme="package" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T06:58:01.770

```
 <receiver android:name=".NetsWidgetProvider"
        android:label="@string/appwidget_name" android:icon="@drawable/icon">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="com.oozic.widget.incstage.nets.ACTION_NOT_INSTALL"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_DATA_CLEARED"/>
            <action android:name="android.intent.action.PACKAGE_REMOVED"/>
            <data android:scheme="package" />
        </intent-filter>
        <!-- This specifies the widget provider info -->
        <meta-data android:name="android.appwidget.provider"
                android:resource="@xml/appwidgetinfo" />
    </receiver> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:58:35.247

I send a broadcast to my widget, in my custom launcher when it get the PACKAGE_REMOVED/ADDED message. This is the only work around I found to fix this.

# php - wordpress 插件的 PHP 函数扩展

> ID：11709003
> 
> 赞同：0
> 
> 时间：2012-07-29T11:47:58.683
> 
> 标签：php, wordpress

我正在尝试扩展 WordPress 插件的功能以接受另一个参数，但我在确定输出时遇到了问题。我正在谈论的插件是 NextGen Gallery，我试图让它显示带有描述的图像幻灯片。

我用来在我的主题文件上显示幻灯片的代码是这样的：

```
<?php echo nggShow_JS_Slideshow(1,906,358,'caption'); ?> 
```

下面是完整的功能：

```
function nggShow_JS_Slideshow($galleryID, $width, $height, $template = '', $class = 'ngg-slideshow') {

global $slideCounter;

$ngg_options = nggGallery::get_option('ngg_options');

// we need to know the current page id
$current_page = (get_the_ID() == false) ? rand(5, 15) : get_the_ID();
// look for a other slideshow instance
if ( !isset($slideCounter) ) $slideCounter = 1; 
// create unique anchor
$anchor = 'ngg-slideshow-' . $galleryID . '-' . $current_page . '-' . $slideCounter++;

if (empty($width) ) $width  = (int) $ngg_options['irWidth'];
if (empty($height)) $height = (int) $ngg_options['irHeight'];

//filter to resize images for mobile browser
list($width, $height) = apply_filters('ngg_slideshow_size', array( $width, $height ) );

$width  = (int) $width;
$height = (int) $height;

$out  = '<div id="' . $anchor . '" class="' . $class . '" style="height:' . $height . 'px;width:' . $width . 'px;">';
$out .= "\n". '<div id="' . $anchor . '-loader" class="ngg-slideshow-loader" style="height:' . $height . 'px;width:' . $width . 'px;">';
$out .= "\n". '<img src="'. NGGALLERY_URLPATH . 'images/loader.gif" alt="" />';
$out .= "\n". '</div>';
$out .= '</div>'."\n";
$out .= "\n".'<script type="text/javascript" defer="defer">';
$out .= "\n" . 'jQuery(document).ready(function(){ ' . "\n" . 'jQuery("#' . $anchor . '").nggSlideshow( {' .
        'id: '      . $galleryID    . ',' . 
        'fx:"'      . $ngg_options['slideFx'] . '",' .
        'width:'    . $width        . ',' . 
        'height:'   . $height       . ',' .
        'template:' . $template . ',' .
        'domain: "' . trailingslashit ( home_url() ) . '",' .
        'timeout:'  . $ngg_options['irRotatetime'] * 1000 .
        '});' . "\n" . '});';
$out .= "\n".'</script>';

return $out;
} 
```

问题是我添加到函数中的“模板”参数。由于某种原因它不起作用 - 幻灯片会永远加载。[您可以在此处](http://pastebin.com/7eHXPVxj)查看完整的 nggfunctions.php 文件。而网站是你可以看到这个现场是[这个](http://nelsonandco.pro/learncenter/)。我还应该提到 PHP 不是我的强项之一。

稍后编辑：有没有办法直接在函数中添加每个图像的描述而不通过'模板'参数传递它？

# assembly - MIPS - 在不使用伪指令的情况下执行单词的块复制（作业）

> ID：11709006
> 
> 赞同：0
> 
> 时间：2012-07-29T11:48:18.697
> 
> 标签：assembly, mips

我已经完成了一项工作，即编写一个汇编代码函数来执行块复制（将一块单词从内存中的一个地址复制到另一个地址），但我仍然不明白汇编代码中块复制的含义。

我猜，例如，如果我在 $t0 处执行块复制，那么每 4 个内存块会是一个块吗？4($t0)

目前我必须创建一个函数将 400 个字从地址 0x30000 复制到 0x50000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:00:09.130

由于您知道内存块的大小，并且可能是目标内存位置旁边的起点，因此您需要从起点（lw）加载单词，做任何您想做的事情（如果您需要操作这些单词）并存储它到请求的内存位置。正如您所说，您要将内存指针增加 4。请注意...您只能在 lw 中使用 16 位偏移量，否则您需要将 lw 与 big op 一起使用，这是一条伪指令...有翻译虽然...

# typo3 - TYPO3：如何访问部分或部分中对象的属性？

> ID：11709012
> 
> 赞同：0
> 
> 时间：2012-07-29T11:49:32.880
> 
> 标签：typo3

我在 TypoScript 中定义了一个对象

```
page.10 {
  variables {
    myObject = COA
    myObject{
     1 = TEXT
     1.value = yome Text
     2 = TEXT
     2.value = 42
    }
  }
} 
```

我需要部分 myObject 的数据

```
<f:render partial="myPartial" arguments="{content:myObject}" /> 
```

看起来像

```
<section id="myPartial">
<h2>{content.1}</h2>
<p>{content.2}</p>
</section> 
```

虽然内容在那里（因为 {content} 将显示所有属性）我无法访问它并且 h2 和 p 将是空的......

我应该怎么做才能用 myObject 的内容填充 h2 和 p？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:36:24.987

这是不可能的。`TypoScript`目前只返回文本字符串，而不是数组。因此，该变量`myObject`包含 的整个连接字符串`COA`，因此`yome Text42`。

请注意，这`COA`意味着`Content Object Array`，但整体`COA`是作为**一个**字符串返回**的**单个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T15:46:43.257

替代方案：使用`VHS`扩展的`v:var.typoscript`ViewHelper：

```
{命名空间 v=Tx_Vhs_ViewHelpers}
{v:var.typoscript(path: 'page.10.variables.myObject') -> v:var.set(name: 'myObject')}
```

之后，您可以`{myObject.1}`在模板中访问等。请注意，所谓的“链式”用法`v:var.set`是**可选**的，*但可以更轻松地使用中间模板变量访问您的变量，而不是更昂贵的调用来完全检索多个位置的值*。另一种方法：

```
{v：var.typoscript（路径：'page.10.variables.myObject.1'）}
{v：var.typoscript（路径：'page.10.variables.myObject.2'）}
等等
```

TER 上的 VHS 扩展：http: [//typo3.org/extensions/repository/view/vhs](http://typo3.org/extensions/repository/view/vhs)

# copy - 自动将新文件复制到另一个文件夹（CentOS 6.3）？

> ID：11709018
> 
> 赞同：0
> 
> 时间：2012-07-29T11:50:30.953
> 
> 标签：copy

是否有可以通过 SSH（CentOS 6.3）输入的命令来监控某个目录，如果在其中创建了任何新文件/文件夹，请将这些文件复制到另一个文件夹中？

我查看了各种同步程序，而不是镜像文件夹，我需要保留任何新文件/文件夹的副本，即使它们已从原始目录中删除。

我希望 cp 命令可以以某种方式使用，但我自己无法弄清楚如何去做。

感谢您的帮助，如果您需要更多信息来帮助或有更好的方法来满足我的需求，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:10:44.203

Rsync 会这样做，如果从源中删除文件，则不必从目标中删除文件。

您是否需要它定期运行或持续监控变化？如果是后者，您可能想使用 inotify 或 FAM 进行研究。

# java - caliper 可以跳过某些方法的某些参数组合吗？

> ID：11709023
> 
> 赞同：0
> 
> 时间：2012-07-29T11:51:01.263
> 
> 标签：java, benchmarking, caliper

我正在测试两种方法的 6 种不同实现，这需要`time*`12 种方法。使用一个接口和`@Param`一个`Supplier`我只需要 2 个方法，但是可能会有一些相关的开销，所以我写`timeDirect`了直接测量其中一个方法来查看开销。

显然`timeDirect`不依赖于参数，应该只调用一次。有没有办法告诉它卡尺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:51:06.723

在 caliper 1.0 中，您可以在`SkipThisScenarioException`任何时候确定您的参数组合不值得进行基准测试。这将导致 Caliper 跳过该组合，就像听起来一样。

# java - 自动滚动 ListView？

> ID：11709024
> 
> 赞同：0
> 
> 时间：2012-07-29T11:51:09.130
> 
> 标签：java, android, concurrency, android-listview

我已经实现了一个 ListView 来读取 rss 提要，我想为此列表视图实现一个自动滚动。

我可能会使用类似的东西：

```
listView.post(new Runnable() {
            @Override
            public void run() {
                listView.smoothScrollToPosition(???);
            }
        }); 
```

但是如何顺利阅读所有位置然后从顶部重新开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:02:13.623

好吧，您可以使用某种计数器简单地遍历列表视图中的元素：

```
int count = listView.getCount();
for (int i = 0; i < count; i++) {
    listView.post(new Runnable() {
        @Override
        public void run() {
            listView.smoothScrollToPosition(i);
        }
    }); 
}
// Once the method gets to here, i == count and we're at the last position
// So you can use some logic to scroll back to the top e.g. 
// listView.smoothScrollToPosition(0) 
```

而不是 using `post()`，您可能想考虑使用一个`Timer`对象，因为我相信对于何时执行 post 队列上的 runnable 没有太多控制。

**编辑**

因此，我设法获得了一个基本但有效的方法，例如使用`Timer`固定费率的`ScrollTimerTask`

```
//This is an inner class, with i an int in the Activity, starting at 0;
public class ScrollTimerTask extends TimerTask {

    @Override
    public void run() {
        if (i < getListView().getCount()) {
            getListView().smoothScrollToPosition(i);
            i++;
        }
        else {
            getListView().smoothScrollToPosition(0);
            i == 0;
        }
} 
```

然后，您要从列表呼叫开始向下移动的位置`new Timer().scheduleAtFixedRate(new ScrollTimerTask(), 0, 1000);`。这将在没有延迟后开始滚动，并将每 1000 毫秒安排一次滚动任务。

请注意，这是基本的，当您关闭它时会导致 Activity 崩溃，并连续运行。为了防止崩溃，我建议保留对`Timer`对象的引用并调用`Timer.cancel()`Activity 的 onPause() 方法。但它是一个起点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T11:55:34.877

添加一个大的页脚/页眉并在到达结尾时跳转到开头 (0) 并重新开始滚动。

# javascript - 修改将 .data 转换为 javascript 的 jquery 代码

> ID：11709030
> 
> 赞同：1
> 
> 时间：2012-07-29T11:51:53.380
> 
> 标签：javascript, html, dom

我现在正在使用 jquery 来获取 id 的值，如下面的代码所示：

```
<ul class="trf noborder" data-id="6581">
</ul> 

var ID = $("ul.trf").data('id'); 
```

如何使用纯 javascript 做到这一点？我需要添加一个跨度类还是什么？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T11:57:24.323

您可以 `element.getAttribute('attribute_name')` 在纯 JavaScript 中使用来获取任何数据属性值的值。

示例可以在这里找到： [点击这里](http://jsfiddle.net/codebombs/dSzAJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T11:58:48.007

根据您的需求和期望的性能，有几种方法可以使用纯 javascript 来实现。这是使用 ID 的一种方法：

```
<ul class="trf noborder" data-id="6581" id="myDiv">
</ul> 

<script type="text/javascript">
    var id = document.getElementById("myDiv").getAttribute("data-id");
</script> 
```

或者，如果您想在没有任何 ID 的情况下定位特定 UL，您可以尝试此操作

```
<ul class="trf noborder" data-id="6581">
</ul> 

<script type="text/javascript">
    var id = document.getElementsByTagName("ul")[0].getAttribute("data-id");
</script> 
```

但是您必须确保使用正确的索引，在这里它将检索您页面上的第一个 UL。您也可以将其包装在另一个容器中：

```
<div id="container">
    <ul class="trf noborder" data-id="6581"></ul> 
</div>

<script type="text/javascript">
     var container = document.getElementById("container");
     var id = container.getElementsByTagName("ul")[0].getAttribute("data-id");
</script> 
```

它将使用该容器内的第一个 UL。或者第三个，如果你这样做：

```
 var id = container.getElementsByTagName("ul")[2].getAttribute("data-id"); 
```

它基于数组索引，在这种情况下为 2（0、1、2 = 第三个元素）

如果您不想要 jQuery 但仍愿意使用库，请查看[http://sizzlejs.com](http://sizzlejs.com)，这是一个很棒的选择器引擎（实际上由 jQuery 使用）。使用 Sizzle，您可以这样做：

```
var id = Sizzle("ul[data-id]")[0].getAttribute("data-id"); 
```

获取指定了 data-id 属性的页面上第一个 UL 的 data-id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T11:57:38.637

[您可以使用getAttribute](http://reference.sitepoint.com/javascript/Element/getAttribute)函数读取属性。但是您应该收集元素本身，调用 getElementById 或 getElementsByTagname 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T12:04:42.857

```
getData: function(el, attr) {
  attr = 'data-' + attr;
  var result = (el.getAttribute && el.getAttribute(attr)) || null;

  if(!result) {
    var attrs = el.attributes;
    var length = attrs.length;

    for(var i = 0; i < length; i++)
      if(attrs[i].nodeName === attr)
        result = attrs[i].nodeValue;
  }

  return result;
}

var el = document.getElementsByClassName('trf')[0];
var id = getData(el, 'id'); 
```

# android - 我有 JASONArray 用于 facebook 图片如何在 imageview 中加载图片 - Android

> ID：11709032
> 
> 赞同：0
> 
> 时间：2012-07-29T11:51:55.557
> 
> 标签：android, facebook-graph-api

这是 FB 图表网址 - [https://graph.facebook.com/198403540272980/photos/?fields=name,source&limit=0](https://graph.facebook.com/198403540272980/photos/?fields=name,source&limit=0)

```
 String jsonUser = fb.request("198403540272980/photos/?fields=name,source&limit=0");
            obj = Util.parseJson(jsonUser);

            JSONArray dataArr = obj.getJSONArray("data");  

            for(int i = 0; i< dataArr.length()-1; i++)
            {
                **Need code to load image to imageview**
            } 
```

有什么帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:14:32.840

首先你需要照片网址

```
for (int i=0; i<dataArr.size(0; i++){
    picUrl = dataArr.getJSONObject(i).getString("source");

} 
```

把它放在一个图像视图中，看[这里](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)

# mysql - 如何在 MySQL 存储过程中使用时间戳

> ID：11709035
> 
> 赞同：1
> 
> 时间：2012-07-29T11:52:39.977
> 
> 标签：mysql, mysql-python

我是stackoverflow的新手。另外，请原谅我的英语。

我有一个关于在 MySQL 存储过程中使用时间戳的问题。我正在使用 MySQL 5 和 MySQLdb Python 模块（Python 版本 2.6）。这是创建我的存储过程的代码：

```
def create_procedure_sum_shift ():
    global cursor

    cursor.execute("CREATE PROCEDURE `sum_shift`\
    (IN s_Time DATETIME, IN e_Time DATETIME)\
    BEGIN\
    SET @q = concat('SELECT * FROM trig_test WHERE `t_stamp`>=',\
    s_Time,' AND `t_stamp` <= ', e_Time);\
    PREPARE query FROM @q;\
    EXECUTE query;\
    deallocate prepare query;\
    END;") 
```

当我尝试创建此过程时，一切正常。但是，当我调用这个过程时，我得到了一个错误。这是此过程的调用：

```
def call_sum_shift(startDate, endDate):
    global cursor
    cursor.execute("call sum_shift(DATE('%s'),DATE('%s'));" % (startDate, endDate))
    rows = cursor.fetchall()
    discr = cursor.description
    return rows,discr 
```

startDate（和 endDate）我明白了：

```
time = datetime.datetime(2012, 07, 25, 8, 00, 00)
startDate = str (time) 
```

这是一个错误：

```
..._mysql_exceptions.ProgrammingError:(1064,"You have an error...for the right syntax to    use near '00:00:00 AND `t_stamp` <= 2012-07-25 00:00:00` at line 1) 
```

我的错误在哪里？如果可能，请举例说明在 MySQL 存储过程中使用“时间戳”。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:03:40.207

使用`concat`您正在生成一个包含 DateTime 文本表示的查询字符串，该字符串需要包含在`'`. 这没有被完成。

# jquery - 如何将 JQuery 可排序/拖放与模型同步？

> ID：11709036
> 
> 赞同：2
> 
> 时间：2012-07-29T11:52:41.833
> 
> 标签：jquery, ember.js

我想知道实现 JQuery 可排序和拖放的推荐方法是什么。我想我可以使用更新事件来更新模型：

```
var options = {
placeholder: "ui-state-highlight",
update: function (event, ui) {
         // update the model
    } ,
$("#sortable").sortable(options); 
```

但这会重新触发 dom 的更新。Ember 插入的特殊脚本标签又如何呢？

我想实现的可以在这里看到：

[http://minitrello.meteor.com/](http://minitrello.meteor.com/)

问候罗杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:37:23.880

我做了这个，它将 ArrayController 的顺序绑定到 View ：

```
Ember.SortableView = Em.CollectionView.extend({
  tagName: "ul",
  moveItem: function(fromIndex, toIndex){
    var items = this.get('content');
    var item = items.objectAt(fromIndex);
    items.removeAt(fromIndex);
    items.insertAt(toIndex, item);
  },
  didInsertElement: function() {
    var view = this;
    view.$().sortable({
      cursor: "move",
      start: function(event, ui) {
        ui.item.previousIndex = ui.item.index();                      
      },
      stop: function(event, ui) {
        view.moveItem(ui.item.previousIndex, ui.item.index());
      }
    });
  },
  willDestroyElement: function() {
    this.$().sortable('destroy');
  }
}); 
```

像这样使用它：

```
{{#collection "Ember.SortableView" contentBinding="items"}}
  template of an item
{{/collection}} 
```

# mysql - mysql用另一个表中的值更新列

> ID：11709043
> 
> 赞同：281
> 
> 时间：2012-07-29T11:54:04.607
> 
> 标签：mysql, sql, sql-update

我有两张桌子，看起来都像

```
id  name  value
===================
1   Joe     22
2   Derk    30 
```

我需要根据每个表中的检查名称复制from的`value`值。`tableA``tableB`

`UPDATE`这个声明有什么提示吗？

* * *

## 回答 #1

> 赞同：530
> 
> 时间：2013-10-13T14:35:38.330

除了这个答案，如果您需要根据 tableA.value 动态更改 tableB.value，您可以执行以下操作：

```
UPDATE tableB
INNER JOIN tableA ON tableB.name = tableA.name
SET tableB.value = IF(tableA.value > 0, tableA.value, tableB.value)
WHERE tableA.name = 'Joe' 
```

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2012-07-29T12:02:23.390

你需要加入这两个表：

例如，您想将`name`tableA 的值复制到`tableB`它们具有相同的位置`ID`

```
UPDATE tableB t1 
        INNER JOIN tableA t2 
             ON t1.id = t2.id
SET t1.name = t2.name 
WHERE t2.name = 'Joe' 
```

**更新 1**

```
UPDATE tableB t1 
        INNER JOIN tableA t2 
             ON t1.id = t2.id
SET t1.name = t2.name 
```

**更新 2**

```
UPDATE tableB t1 
        INNER JOIN tableA t2 
             ON t1.name = t2.name
SET t1.value = t2.value 
```

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2014-04-11T22:08:52.753

第二种可能是，

```
UPDATE TableB 
SET TableB.value = (
    SELECT TableA.value 
    FROM TableA
    WHERE TableA.name = TableB.name
); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-10-04T15:40:49.743

```
 UPDATE    cities c,
          city_langs cl
    SET       c.fakename = cl.name
   WHERE     c.id = cl.city_id 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-07T10:06:59.543

如果您使用的是安全更新模式，则第二个选项也是可行的（并且您收到一条错误消息，表明您尝试更新没有使用 KEY 列的 WHERE 的表），方法是添加：

```
UPDATE TableB  
SET TableB.value = (  
SELECT TableA.value  
    FROM TableA  
    WHERE TableA.name = TableB.name  
)  
**where TableB.id < X**  
; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-15T14:12:42.807

将数据存储在临时表中

```
Select * into tempTable from table1 
```

现在更新列

```
 UPDATE table1
    SET table1.FileName = (select FileName from tempTable where tempTable.id = table1.ID); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-02T22:47:45.527

就我而言，接受的解决方案太慢了。对于具有 180K 行的表，更新速率约为每秒 10 行。这与连接元素上的索引有关。

我终于使用以下程序解决了我的问题：

```
CREATE DEFINER=`my_procedure`@`%` PROCEDURE `rescue`()
BEGIN
    declare str VARCHAR(255) default '';
    DECLARE n INT DEFAULT 0;
    DECLARE i INT DEFAULT 0;
    DECLARE cur_name VARCHAR(45) DEFAULT '';
    DECLARE cur_value VARCHAR(10000) DEFAULT '';
    SELECT COUNT(*) FROM tableA INTO n;
    SET i=0;
    WHILE i<n DO 
      SELECT namea,valuea FROM tableA limit i,1 INTO cur_name,cur_value;
      UPDATE tableB SET nameb=cur_name where valueb=cur_value;
      SET i = i + 1;
    END WHILE;

END 
```

我希望它会帮助将来像它帮助我一样的人

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2017-06-14T07:24:51.163

如果您在两个表中都有共同字段，那么这很容易！.....

表 1 = 要更新的表。表 2 = 您从中获取数据的表。

1.  在表 1 中进行查询并找到公共字段值。
2.  循环并根据表 1 的值从表 2 中查找所有数据。
3.  再次在表 1 中进行更新查询。

```
$qry_asseet_list = mysql_query("SELECT 'primary key field' FROM `table-1`");

$resultArray = array();
while ($row = mysql_fetch_array($qry_asseet_list)) {
$resultArray[] = $row;
}

foreach($resultArray as $rec) {

    $a = $rec['primary key field'];

    $cuttable_qry = mysql_query("SELECT * FROM `Table-2` WHERE `key field name` = $a");

    $cuttable = mysql_fetch_assoc($cuttable_qry);

    echo $x= $cuttable['Table-2 field']; echo " ! ";
    echo $y= $cuttable['Table-2 field'];echo " ! ";
    echo $z= $cuttable['Table-2 field'];echo " ! ";

    $k = mysql_query("UPDATE `Table-1` SET `summary_style` = '$x', `summary_color` = '$y', `summary_customer` = '$z' WHERE `summary_laysheet_number` = $a;");

    if ($k) {
        echo "done";
    } else {
        echo mysql_error();
    }

} 
```

# sql - 如何查找无序项集是否存在

> ID：11709046
> 
> 赞同：1
> 
> 时间：2012-07-29T11:54:23.273
> 
> 标签：sql, sqlite

我代表 SQL 中的项集（SQLite，如果相关）。我的表如下所示：

项目表：

```
| ItemId | Name    |
| 1      | Ginseng |
| 2      | Honey   |
| 3      | Garlic  | 
```

项目组：

```
| ItemSetId | Name                |
| ...       | ...                 |
| 7         | GinsengHoney        |
| 8         | HoneyGarlicGinseng  |
| 9         | Garlic              | 
```

项目集2项目

```
| ItemsetId | ItemId |
| ...       | ....   |
| 7         | 1      |
| 7         | 2      |
| 8         | 2      |
| 8         | 1      |
| 8         | 3      | 
```

如您所见，一个 Itemset 可能包含多个 Item，并且这种关系在 Itemset2Items 表中进行了详细说明。

如何检查表中是否已经有新的项集，如果是，找到它的 ID？

例如，我想检查“人参、大蒜、蜂蜜”是否是现有项集。所需的答案是“是”，因为存在一个 ItemsetId，其中*正好*包含这三个 ID。请注意，该集合是无序的：对“Honey, Garlic, Ginseng”的查询应该表现相同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:33:35.960

我建议您首先将要检查的项目集放入表中，每个项目一行。

现在的问题是关于这个“提议的”项目集与其他项目集的重叠。以下查询提供了答案：

```
select itemsetid,
from (select coalesce(ps.itemid, is2i.itemid) as itemid, is2i.itemsetid,
             max(case when ps.itemid is not null then 1 else 0 end) as inProposed,
             max(case when is2i.itemid is not null then 1 else 0 end) as inItemset
      from ProposedSet ps full outer join
           ItemSets2items is2i
           on ps.itemid = is2i.itemid
      group by coalesce(ps.itemid, is2i.itemid), is2i.itemsetid
     ) t
group by itemsetid
having min(inProposed) = 1 and min(inItemSet) = 1 
```

这将所有建议的项目与所有项目集连接起来。然后它按每个项目集中的项目分组，给出一个关于项目是否在集合中的标志。最后，它检查项目集中的所有项目是否都在两者中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:50:10.513

听起来你需要找到一个`ItemSet`：

1.  包含`Item`您想要的列表中的所有 s
2.  不包含任何其他`Item`s

此示例将返回此类项目集的 ID（如果存在）。

**注意：**此解决方案适用于 MySQL，但一旦您将`@variable`s 更改为 SQLite 可以理解的内容（例如绑定变量），它就应该在 SQLite 中工作。

```
 -- these are the IDs of the items in the new itemset
-- if you add/remove some, make sure to change the IN clauses below
set @id1 = 1;
set @id2 = 2;

-- this is the count of items listed above
set @cnt = 2;

SELECT S.ItemSetId FROM ItemSets S

INNER JOIN
(SELECT ItemsetId, COUNT(*) as C FROM ItemSets2Items 
WHERE ItemId IN (@id1, @id2)
GROUP BY ItemsetId
 HAVING COUNT(*) = @cnt
) I -- included ingredients
ON I.ItemsetId = S.ItemSetId

LEFT JOIN
(SELECT ItemsetId, COUNT(*) as C FROM ItemSets2Items 
WHERE ItemId NOT IN (@id1, @id2)
GROUP BY ItemsetId
) A -- additional ingredients
ON A.ItemsetId = S.ItemSetId

WHERE A.C IS NULL 
```

参见[MySQL 的小提琴](http://sqlfiddle.com/#!2/d45d3/24)。

# jquery - animate() 中具有 2 个值的背景动画

> ID：11709050
> 
> 赞同：1
> 
> 时间：2012-07-29T11:54:40.547
> 
> 标签：jquery, animation

我创建了一个代码，它作为“电影”工作，因为“薄膜”是一个包含所有 iphone 动作的长图像。为了营造电影般的运动感，此代码在**backgroundPositionY上****添加 500px**，然后**等待 30 ms**并重新启动此过程。

 ****机制很简单，但代码太长，尤其是当使用用于添加另一个功能的函数 .toggle() 时，它会在您再次单击时创建相反的动画。

```
/*animate*/
screen.toggle(function(e){
    var mov = 0;
    function cicloIphone(){
        if(mov>6000){
            mov=0;
        };
        iphone.css('backgroundPosition', '0 -'+mov+'px');
        mov += 500;

        if(mov<6000){
            window.setTimeout(function(){
                cicloIphone();
            }, 30);
        };
    };
    var timeoutIphone = window.setTimeout(function(){
        cicloIphone();
    },0);
},function(e){
    var mov = 5500;
    function cicloIphone(){
        if(mov>6000){
            mov=0;
        };
        iphone.css('backgroundPosition', '0 -'+mov+'px');
        mov -= 500;

        if(mov<6000){
            window.setTimeout(function(){
                cicloIphone();
            }, 30);
        };
    };
    var timeoutIphone = window.setTimeout(function(){
        cicloIphone();
    },0);
}); 
```

我想用函数 animate() 进行合成，但不想重新创建我的效果，因为不是每 30 毫秒从 500 像素跳到 1000 像素，而是太流畅并逐个像素地增加像素。

```
/*animate synthesized*/
screen.toggle(
    function(e){iphone.stop(true,true).animate({
        'backgroundPositionX':'0px',
        'backgroundPositionY':'-5500px'
    },3000)},function(e){iphone.stop(true,true).animate({
        'backgroundPositionX':'0px',
        'backgroundPositionY':'0px'
    },3000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:13:28.253

[animate()](http://api.jquery.com/animate/)是一个相当复杂和灵活的函数。它确实满足您的要求，因为您可以提供它运行所需的三条信息：

*   动画的属性，
*   目标值，
*   动画的持续时间。

所以它知道要改变什么，去哪里，去那里需要多长时间，但是在默认情况下，实际*去那里*的方式并不能满足你的要求。但是，在这种情况下使用没有问题`animate()`，只要您为其提供[自定义缓动函数](https://stackoverflow.com/questions/5916058/jquery-easing-function)：

```
$.extend($.easing, {
    movie: function(current, elapsed, start, delta, duration) {
        // Returns the completion ratio as a float in the [0..1] range.
        // (elapsed / duration) would be linear, so build discrete steps
        // by "snapping" elapsed to 30 ms intervals.
        return (Math.floor(elapsed / 30) * 30) / duration;
    }
}); 
```

现在你可以写：

```
screen.toggle(function() {
    iphone.stop(true, true).animate({
        backgroundPositionY: "-5500px"
    }, 330, "movie");
}, function() {
    iphone.stop(true, true).animate({
        backgroundPositionY: "0px"
    }, 330, "movie");
}); 
```

它应该每 30 毫秒通过离散步骤为背景图像设置动画，持续 330 毫秒，这似乎是您正在寻找的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:48:49.440

这个技巧对于完全兼容（IE7/9、Firefox 3.6、Opera、Safari Google Chrome）很有用。我使用了这个 jQuery 扩展[http://bit.ly/bZzOC8](http://bit.ly/bZzOC8)，它允许在函数 .animate() 上使用 2 个值作为适当的**backgroundPosition:'(0 -5550)'**不幸的是 ie7 和 ie8 有一个错误并且扩展 dosen ' 不工作所以我使用了 ie 条件**if($.browser.msie)**并且我使用了单独的值 backgroundPositionY 和 backgroundPositionX，如果你只想使用这个规则，你必须知道在 Opera 和 fireFox 上不起作用。因此，此代码涵盖所有浏览器。

```
if($.browser.msie){
    screen.toggle(function(){
            iphone.stop(true,true).animate({
                backgroundPositionY:'-5500',
                backgroundPositionX:'0'
            },330,'movie');
        },function(){
            iphone.stop(true,true).animate({
                backgroundPositionY:'0',
                backgroundPositionX:'0'
            },330,'movie');
        }
    );
}
else{
    screen.toggle(function(){
            iphone.stop(true,true).animate({
                backgroundPosition:'(0 -5500)'
            },330,'movie');
        },function(){
            iphone.stop(true,true).animate({
                backgroundPosition:'(0 0)'
            },330,'movie');
        }
    );
} 
```****

# php - 如何通过 htaccess 访问文件？

> ID：11709056
> 
> 赞同：1
> 
> 时间：2012-07-29T11:55:28.817
> 
> 标签：php, .htaccess

我有一个像这样的文件夹结构

```
Controller
  |_check.php

View
  |_  .htaccess
  |_ index.php
  |_  Webroot
          |_ js
              |_common.js
.htaccess 
```

在 .htaccess

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ View/    [L]
   RewriteRule    (.*) View/$1 [L]
</IfModule> 
```

在视图/.htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

外部 .htaccess 文件链接到 View 文件夹，并`View/.htaccess`链接到 index.php。

`index.php`（查看文件）中有带有 ajax的按钮`check.php`。

我给了 common.js 对应的 ajax 函数 url 为

```
var url = 'check.php'; // OR '../Controller/check.php' 
```

问题是 ajax 不能与两个 url 一起正常工作。

我是否需要更改文件夹结构以更正它，或者我是否需要更改任何 htaccess 文件以访问`check.php`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:47:13.080

这与文件夹结构无关，而与错误的 htaccess 重写规则有关。

您在“root”中的 htaccess 将所有请求重定向到 View 文件夹（我假设默认为 index.php）

我不明白您要完成什么，如果您解释一下，我可能会为您提供帮助。

在您当前的设置中，您无法访问除 View/index.php 之外的任何文件（即使在传递 GET 参数 url 时）

编辑：

在这种情况下，如果您希望 View/index.php 成为唯一可访问的文件并强制人们通过 View/index.php 文件，您可以使用 PHP 会话变量。

像这样的东西...

在 view.php 文件的顶部：

```
 session_start();
   $_SESSION['viewCheck'] = true;
   //rest of view.php code 
```

在您的 check.php 代码（或您尝试通过 AJAX 访问的文件）中

```
session_start();
if (isset($_SESSION['viewCheck']) && $_SESSION['viewCheck'] === true) {
    //Code of check.php
} else {
    //Error message or redirect to view.php, for instance

    //error message example
    header('HTTP/1.0 401 Unauthorized');

    //Redirect example
    header("Location: http://www.yourhost.com/View/index.php");
} 
```

注意 1：您应该删除 htaccess 文件的重写规则。

注意 2：请记住，这不是防弹的（并且可以被欺骗），因为：

1.  **如果有人访问 View/index.php 那么他可以自由访问 check.php。如果会话在 ajax 请求之后被终止，则可以*缓解这种情况。*如果 ajax 请求包含 2 个请求，您可以实现这一点，例如，一个获取在 10 秒内过期的会话密钥，然后使用该密钥从 check.php 获取结果**

2.  会话也可以被欺骗（[在这里](https://github.com/sobstel/sesshin/wiki/PHP-Session-Security---Threats)阅读更多）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:46:33.267

为什么不在“查看”文件夹中设置域的路径，所以没有人可以访问您的控制器等？

我认为这也应该比玩弄 .htaccess 更简单！

这是大多数 PHP 框架的做法。

如果您需要访问 check.php 的功能，您可以创建一个“ajax.php”来检查请求是否正常，然后使用“check.php”来捕获结果！

# r - 从 xts 表单数据中获取 data.frame

> ID：11709064
> 
> 赞同：-8
> 
> 时间：2012-07-29T11:58:08.167
> 
> 标签：r, xts

```
>require(quantmod)   
>setSymbolLookup(SDB=list(name="000001.sz",src="yahoo"))   
>getSymbols("SDB",from="2010-01-01",to="2010-01-10") 
> SDB

           000001.SZ.Open 000001.SZ.High 000001.SZ.Low 000001.SZ.Close
2010-01-04          24.52          24.58         23.68           23.71
2010-01-05          23.75          23.90         22.75           23.30
2010-01-06          23.25          23.25         22.72           22.90
2010-01-07          22.90          23.05         22.40           22.65
2010-01-08          22.50          22.75         22.35           22.60 
```

我想要两种输出：
1。

```
> SDB
      date           open           high           low           close
2010-01-04          24.52          24.58         23.68           23.71
2010-01-05          23.75          23.90         22.75           23.30
2010-01-06          23.25          23.25         22.72           22.90
2010-01-07          22.90          23.05         22.40           22.65
2010-01-08          22.50          22.75         22.35           22.60 
```

2.

```
> SDB
      date           open           high           low           close
1 2010-01-04          24.52          24.58         23.68           23.71
2 2010-01-05          23.75          23.90         22.75           23.30
3 2010-01-06          23.25          23.25         22.72           22.90
4 2010-01-07          22.90          23.05         22.40           22.65
5 2010-01-08          22.50          22.75         22.35           22.60 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:48:52.467

这是你想要的一个裂缝。我认为您的问题始于 SDB 的存储方式。要查看对象的外观，请使用`str`. 我不知道`xts`物体是什么，但使用`str`可以帮助我确定如何取出我想要的碎片。

```
str(SDB)
> str(SDB)
An ‘xts’ object from 2010-01-04 to 2010-01-08 containing:
  Data: num [1:5, 1:6] 24.5 23.8 23.2 22.9 22.5 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:6] "000001.SZ.Open" "000001.SZ.High" "000001.SZ.Low" "000001.SZ.Close" ...
  Indexed by objects of class: [Date] TZ: 
  xts Attributes:  
List of 4
 $ tclass : chr [1:2] "POSIXct" "POSIXt"
 $ tzone  : chr ""
 $ src    : chr "yahoo"
 $ updated: POSIXct[1:1], format: "2012-07-29 08:33:57" 
```

现在我们可以开始工作了：

```
#grab first 4 columns and make it into a dataframe
NEW <- data.frame(SDB[, 1:4])

#turn the rownames to a column
NEW <- data.frame(date=rownames(NEW), NEW)

#remove the junk and lowercases the first letter
colnames(NEW) <- sub('^(\\w?)', '\\L\\1', 
    gsub("X000001.SZ.", "", colnames(NEW)), perl=T)  

#make rownames integer
rownames(NEW)<- NULL

#the two ways you wanted it to look
NEW
print(NEW ,row.names = FALSE) 
```

# c - 为什么输出为 1？

> ID：11709068
> 
> 赞同：0
> 
> 时间：2012-07-29T11:59:05.900
> 
> 标签：c, operators

```
#include<stdio.h>

main()
{
       int x = 5, y = 10, z = 10;    

       x = y == z;          // This computational expression causes the value of x to be 1\. I fail to understand why
       printf("%d\n", x); //Why is the value of x 1 here.

} 
```

我无法理解声明`x = y ==z;`

据我说 - x = 10 因为 y == z。z=10 并且被声明为等价于 y。然后将 y 的值分配给 x -`x = y`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:00:32.270

您将比较结果 »`y`等于`z`« 分配给`x`，`1`即 ，即为真。

注意不同的运算符：

```
x = ... // assignment
y == z  // comparison with either 0 (false) or 1 (true) result 
```

让我们进一步分解程序：

1.  您初始化`x`为 5 和`y`10 `z`。
2.  您在不关心结果的情况下进行*比较*（见上文） 。所以这是可以安全地忽略的一条线。但它导致因为等于。`y``z``1``y``z`
3.  您打印所有三个变量的当前值。
4.  您执行相同的比较，这次将结果分配给`x`. `x`现在有值»`y`等于`z`«，`1`在这种情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T12:00:43.780

因为运算符优先级

```
x = y == z; 
```

是相同的

```
x = (y == z); 
```

现在 as`y == z`评估为 `1`，所以`x` value`1`在语句之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T12:01:44.073

y == z 如果它们相同则返回 1，否则返回 0，并且结果设置为 x

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T12:05:00.267

`==`是一个比较运算符，因此如果两个操作数相等则返回 1 (true)，否则返回 0 (false)。

该语句`x = y == z`等价于`x = (y == z)`，因为`==`它的优先级高于`=`。因为 y 等于 z，这将分配`1`给 x。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T12:01:31.657

请参阅[运算符优先级表](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)。`==`（比较运算符）的优先级高于`=`（赋值运算符）。因此，首先执行 y == z，然后产生 1 的结果，因为 y 和 z 具有相同的值，这导致 x 被赋值为 1。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-29T12:02:11.293

`=`是赋值运算符，`==`是比较运算符。你比较`y`和`z`，它们是相等的，所以比较返回 true ，即 1。这个值被分配给`x`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-29T13:51:28.763

操作员`==`首先行动。因此它变成 x= (y==z 的值); 现在因为 y 和 z 相同，所以 y==z 的值是 1，它被分配给 x。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-29T12:52:46.883

`==`的优先级高于`=`。

1.  表达式`y == z`被计算为`1`。
2.  指令`x = y == z`放入。`1`_`x`
3.  该指令`printf("%d\n", x);`打印`x`( `1`) 的值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-29T13:52:44.673

运算符的优先级`==`高于`=`运算符。

y==z 计算为 1；因为两者都是平等的。

这个值被分配给 x。

# android - 如何在android应用程序的openfeint中获得当前玩家排名

> ID：11709071
> 
> 赞同：0
> 
> 时间：2012-07-29T11:59:32.733
> 
> 标签：android, rank, openfeint

在我的 android 应用程序中，我使用开放式假动作，并且我在获得我的排名（当前玩家）时遇到了问题。我怎么知道的。这是我的代码。

```
 //hard coded for example
long scoreValue = 60;
    Score s = new Score(scoreValue, null); 
    Leaderboard l = new Leaderboard(String.valueOf(HomeScreen.LeaderBoardId));
    s.submitTo(l, new Score.SubmitToCB() {
        @Override
        public void onSuccess(boolean newHighScore) {

            System.out.println("Score submitted successfully");

        }

        @Override
        public void onFailure(String exceptionMessage) {
            Toast.makeText(GameScreen.this,
                    "Error (" + exceptionMessage + ") posting score.",
                    Toast.LENGTH_SHORT).show();

        }
    });
User u= OpenFeint.getCurrentUser();

    int rank=s.rank;
    System.out.println("RANK"+rank); 
```

我可以获得用户详细信息，但我不知道如何获得我的排名。我卡住了。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:46:10.083

提交分数时未设置排名。[有关详细信息](https://ofdev.zendesk.com/entries/20148822-why-current-user-rank-is-always-1)，请参阅此讨论。

你必须使用排行榜来获得排名。openfient 也被替换为[GREE](http://support.openfeint.com/dev/openfeint-to-gree/)，所以如果您刚刚开始，您可能需要切换到新平台。

# playframework - 为 Java 开发人员学习 play framework 2.0 中的模板的任何好的资源

> ID：11709072
> 
> 赞同：0
> 
> 时间：2012-07-29T11:59:35.993
> 
> 标签：playframework, playframework-2.0

我来自 Java 背景。这是我第一次使用 Play 框架以及任何 Web 框架。我决定从 2.0 开始。我在使用 Play 2.0 中的模板时遇到问题

任何关于比官方文档更好的资源的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:19:40.680

作为玩家，您还应该添加以下书签：（顺便说一句，当您花一周时间潜入时，Scala 模板并不难）

**玩！书籍：** 如果您没有玩过Play，可以考虑购买这本书： http: [//manning.com/leroux/](http://manning.com/leroux/)。来自 Java Persepctive 的伟大洞察信息！

**Play Wiki：** 伟大的来源是 Codemwnci 提到的 github wiki：[https ://github.com/playframework/Play20/wiki/JavaTemplates](https://github.com/playframework/Play20/wiki/JavaTemplates)

**Play 网站** On the Play！您经常获得社区更新、新闻和新教程的网站：[http ://www.playframework.org/community](http://www.playframework.org/community)

以下人经常写有关 Play! 的文章：

1.  [http://www.objectify.be/wordpress/](http://www.objectify.be/wordpress/)
2.  [http://www.soutier.de/blog/](http://www.soutier.de/blog/)
3.  [http://www.joergviola.de/](http://www.joergviola.de/)

Codemwnci 的网站你也应该收藏 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:19:09.583

Play 2.0 中的模板引擎是基于 ASP.NET 的 Razor。它并不完全相同，但如果您对 Play 官方文档不满意，那么您的下一个最佳起点是查看 Razor 的在线文档。Play 文档仍然是目前了解模板引擎的最佳场所。

对于尖端版本，请使用 github 而不是 Play 网站 - [https://github.com/playframework/Play20/wiki/JavaTemplates](https://github.com/playframework/Play20/wiki/JavaTemplates)

此外，如果您不喜欢 Play scala 模板，您可以随时使用旧的 groovy 模板引擎。查看[https://github.com/mbknor/gt-engine-play2](https://github.com/mbknor/gt-engine-play2)以获取源代码和文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T19:56:47.963

那么 typesafe 提供了一个很好的训练东西。你可以[在这里查看](https://typesafe.com/how/training)。去在线培训。根据我的信息，这是学习 Java 游戏的最佳资源。感谢 Nilanjan 和 typesafe 提供了如此好的培训。也输入安全有他们的 youtube 频道也检查一下。如果有任何网络研讨会，您将收到通知，请订阅 typesafe 的新闻。也使用邮件列表。

# iphone - 我如何在谷歌地方查询特定国家的美食？

> ID：11709074
> 
> 赞同：-1
> 
> 时间：2012-07-29T11:59:40.990
> 
> 标签：iphone, xcode, google-places-api

我正在尝试通过 iPhone 应用程序上的 Google Places API 来完成特定国家/地区的美食场所，例如墨西哥菜、西班牙菜、泰国菜、印度菜。我怎样才能做到这一点？？正如我看到的支持的类型，里面只有食物、餐厅等。除了每当我使用这个查询..

```
NSString *url = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=%@&type=restaurant&query=%@&sensor=true&key=%@", currentCentre.latitude, currentCentre.longitude, [NSString stringWithFormat:@"%i", currenDist], googleType, kGOOGLE_API_KEY]; 
```

我只得到很少的结果，每当我尝试添加更多类型（如食品|餐厅|场所）时，如下查询我的应用程序崩溃。

```
NSString *url = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=%@&type=food|restaurant|establishment&query=%@&sensor=true&key=%@", currentCentre.latitude, currentCentre.longitude, [NSString stringWithFormat:@"%i", currenDist], googleType, kGOOGLE_API_KEY]; 
```

正如我告诉我的应用程序因此错误而崩溃可能是我对 url 做错了什么。

> ***终止应用程序由于未捕获的异常'NSInvalidArgumentException'，理由是： '数据参数是零' ***第一掷调用堆栈：（0x13be022 0x200fcd6 0x1366a48 0x13669b9 0xbadfad 0x2dd2 0x13bfe42 0xaa09df 0x139294f 0x12f5b43 0x12f5424 0x12f4d84 0x12f4c9b 0x15d47d8 0x15d488a 0x17a626 0x236d 0x22d5）终止叫做抛出一个异常(lldb)

请问有人可以指导我吗？我希望我清除了我所有的观点。

谢谢和问候， 马尔哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T23:53:33.967

您似乎正在尝试使用 Places API Textsearch，因为您正在使用该`query`参数。如果这是正确的，请确保您访问的是正确的后端：

> maps.googleapis.com/maps/api/place/ **textsearch** /json

还要确保您使用正确的参数来指定类型：

> **类型**=食物|餐厅|机构

我建议彻底阅读[文档](https://developers.google.com/places/documentation)并通过浏览器执行一些[测试 html 请求](https://maps.googleapis.com/maps/api/place/search/json?sensor=true&keyword=peets&location=37.3943,-122.151&radius=50000&types=food|restaurant|establishment&key=YOUR_API_KEY)，以确保在将其插入应用程序之前有正确的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:55:04.553

尽管这已经快 7 个月了，而且我相信您现在已经解决了它或放弃了它，但我刚刚遇到了同样的问题，并且需要一些解决。我想我会把答案放在这里以帮助其他有类似错误的人。

我发现的问题与不喜欢该`|`字符的 URL 编码有关。

我发现的解决方法是：

```
// Create an NSString with the URL which includes the '|' characters.
NSString * urlString = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=51.189781,-114.488907&radius=6918&types=food|bar&keyword=&sensor=true&key=YOUR KEY HERE";

// Encode the URL
NSString* encodedURLString = [urlString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

// Covert to a NSURL
NSURL *googleRequestURL=[NSURL URLWithString:encodedURLString]; 
```

然后使用`googleRequestURL`作为 URL。

希望这将为您解决！

# python - 使用 Python 解析 HTML

> ID：11709079
> 
> 赞同：223
> 
> 时间：2012-07-29T12:00:42.903
> 
> 标签：python, xml-parsing, html-parsing

我正在寻找一个用于 Python 的 HTML Parser 模块，它可以帮助我以 Python 列表/字典/对象的形式获取标签。

如果我有以下表格的文件：

```
<html>
<head>Heading</head>
<body attr1='val1'>
    <div class='container'>
        <div id='class'>Something here</div>
        <div>Something else</div>
    </div>
</body>
</html> 
```

那么它应该给我一种通过 HTML 标签的名称或 id 访问嵌套标签的方法，这样我基本上可以要求它获取`div`标签中`class='container'`包含在`body`标签中的内容/文本，或类似的东西。

如果您使用过 Firefox 的“检查元素”功能（查看 HTML），您会知道它以一种像树一样的嵌套方式为您提供所有标签。

我更喜欢内置模块，但这可能要求太多了。

* * *

我在 Stack Overflow 和互联网上的一些博客上遇到了很多问题，其中大多数都建议 BeautifulSoup 或 lxml 或 HTMLParser，但其中很少有详细说明功能，并且只是作为关于哪个更快/更有效的争论而结束。

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-07-29T12:12:15.873

> 这样我就可以要求它获取 div 标记中的内容/文本，其中 class='container' 包含在 body 标记中，或者类似的东西。

```
try: 
    from BeautifulSoup import BeautifulSoup
except ImportError:
    from bs4 import BeautifulSoup
html = #the HTML code you've written above
parsed_html = BeautifulSoup(html)
print(parsed_html.body.find('div', attrs={'class':'container'}).text) 
```

我猜你不需要性能描述 - 只需阅读 BeautifulSoup 的工作原理。看看它的[官方文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-07-29T12:47:39.553

我猜你正在寻找的是[pyquery](http://pypi.python.org/pypi/pyquery)：

> pyquery：一个类似 jquery 的 python 库。

你想要的一个例子可能是这样的：

```
from pyquery import PyQuery    
html = # Your HTML CODE
pq = PyQuery(html)
tag = pq('div#id') # or     tag = pq('div.class')
print tag.text() 
```

它使用与 Firefox 或 Chrome 的检查元素相同的选择器。例如：

![元素选择器是 'div#mw-head.noprint'](../Images/bbe3aa6e1a812d27b1bca14695f9c844.png)

检查的元素选择器是“div#mw-head.noprint”。所以在 pyquery 中，你只需要传递这个选择器：

```
pq('div#mw-head.noprint') 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-07-29T12:07:25.860

在这里，您可以阅读更多关于 Python 中不同的 HTML 解析器及其性能的信息。尽管这篇文章有点过时，但它仍然为您提供了一个很好的概述。

[Python HTML 解析器性能](http://blog.ianbicking.org/2008/03/30/python-html-parser-performance/)

我推荐 BeautifulSoup，即使它不是内置的。只是因为它很容易处理这些类型的任务。例如：

```
import urllib2
from BeautifulSoup import BeautifulSoup

page = urllib2.urlopen('http://www.google.com/')
soup = BeautifulSoup(page)

x = soup.body.find('div', attrs={'class' : 'container'}).text 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-11-08T01:08:26.443

与其他解析器库相比`lxml`非常快：

*   [http://blog.dispatched.ch/2010/08/16/beautifulsoup-vs-lxml-performance/](http://blog.dispatched.ch/2010/08/16/beautifulsoup-vs-lxml-performance/)
*   [http://www.ianbicking.org/blog/2008/03/python-html-parser-performance.html](http://www.ianbicking.org/blog/2008/03/python-html-parser-performance.html)

而且`cssselect`它也很容易用于抓取 HTML 页面：

```
from lxml.html import parse
doc = parse('http://www.google.com').getroot()
for div in doc.cssselect('a'):
    print '%s: %s' % (div.text_content(), div.get('href')) 
```

[lxml.html 文档](http://lxml.de/lxmlhtml.html)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-10-25T18:50:16.673

我推荐使用**lxml**来解析 HTML。请参阅[“解析 HTML”（在 lxml 站点上）。](http://lxml.de/parsing.html#parsing-html)

以我的经验，Beautiful Soup 搞砸了一些复杂的 HTML。我相信那是因为 Beautiful Soup 不是解析器，而是一个非常好的字符串分析器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-15T15:51:02.857

我建议使用**justext**库：

[https://github.com/miso-belica/jusText](https://github.com/miso-belica/jusText)

用法： **Python2：**

```
import requests
import justext

response = requests.get("http://planet.python.org/")
paragraphs = justext.justext(response.content, justext.get_stoplist("English"))
for paragraph in paragraphs:
    print paragraph.text 
```

**Python3：**

```
import requests
import justext

response = requests.get("http://bbc.com/")
paragraphs = justext.justext(response.content, justext.get_stoplist("English"))
for paragraph in paragraphs:
    print (paragraph.text) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-20T09:44:48.863

我会使用 EHP

[https://github.com/iogf/ehp](https://github.com/iogf/ehp)

这里是：

```
from ehp import *

doc = '''<html>
<head>Heading</head>
<body attr1='val1'>
    <div class='container'>
        <div id='class'>Something here</div>
        <div>Something else</div>
    </div>
</body>
</html>
'''

html = Html()
dom = html.feed(doc)
for ind in dom.find('div', ('class', 'container')):
    print ind.text() 
```

输出：

```
Something here
Something else 
```

# ruby-on-rails - 有很多：通过关联：不能批量分配受保护的属性：model_id？

> ID：11709081
> 
> 赞同：0
> 
> 时间：2012-07-29T12:01:06.473
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试创建我的 Dog 并向其添加类别，但出现错误：

```
WARNING: Can't mass-assign protected attributes: category_id
  SQL (49.0ms)  INSERT INTO "categorizations" ("dog_id", "category_id", "created_at", "cat_id", "mouse_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["dog_id", 7], ["category_id", 1], ["created_at", Sun, 29 Jul 2012 20:34:27 JST +09:00], ["cat_id", nil], ["mouse_id", nil], ["updated_at", Sun, 29 Jul 2012 20:34:27 JST +09:00]]
   (105.0ms)  COMMIT
Completed 500 Internal Server Error in 669ms

ArgumentError (too few arguments):
  app/controllers/dogs_controller.rb:7:in `format'
  app/controllers/dogs_controller.rb:7:in `create' 
```

不知道为什么这是真的，因为我的模型中有：

```
class Dog < ActiveRecord::Base
  attr_accessible :name, :category_ids
  belongs_to :user
  has_many :categorizations
  has_many :categories, :through => :categorizations
  accepts_nested_attributes_for :categories
  validates :name, :presence => true
  validates :user_id, :presence => true
end 
```

如您所见，连接表是`Categorizations`：

```
class Categorization < ActiveRecord::Base
  belongs_to :dog
  belongs_to :category
  belongs_to :cat
  belongs_to :mouse
end 
```

我在表格上选择所需的类别。这是模型：

```
class Category < ActiveRecord::Base
  attr_accessible :name
  belongs_to :user
  has_many :categorizations
  has_many :dogs, :through => :categorizations
  has_many :cats, :through => :categorizations
  has_many :mouses, :through => :categorizations
  validates :name, :presence => true, :uniqueness => true
  before_validation :downcase_name

  private
  def downcase_name
    self.name = self.name.downcase if self.name.present?
  end
end 
```

出于某种奇怪的原因，它在查看数据库时仍然会分配类别，但这可能会导致我遇到的其他问题。可能是什么问题呢？

**更新**

这是我的狗表格：

```
<%= form_for(@dog, :remote => true) do |f| %>
  <%= f.label :name, "Name" %>
  <%= f.text_field :name %>
  <%= f.label :category, "Categories" %>
  <%= f.select :category_ids, Category.all.collect {|c| [c.name, c.id]}, {}, { :multiple => true, } %>
<% end %> 
```

当我尝试时仍然得到质量分配错误：

```
attr_accessible :name, :category_ids  
WARNING: Can't mass-assign protected attributes: category_id

attr_accessible :name, :category_id, :category_ids
# It says this for each category I want to put on the Dog.
WARNING: Can't mass-assign protected attributes: category_id

attr_accessible :name, :category_id
WARNING: Can't mass-assign protected attributes: category_ids 
```

**更新 2**

`respond_to`通过添加控制器操作，我能够摆脱 ArgumentError ：

```
def create
   @dog = current_user.dogs.new(params[:dog])
    respond_to do |format|
      if @dog.save
      format.js
      else
      format.js
      end
   end
end 
```

如果向 Dog 添加 2 个或更多类别（在本例中为 3）。它将它们添加到数据库中并进行批量分配，但服务器一直在日志中这样说：

```
Started POST "/dogs" for 127.0.0.1 at 2012-07-29 20:44:15 -0400
  Processing by DogsController#create as JS
  Parameters: {"utf8"=>"Γ£ô", "authenticity_token"=>"wuPqA6e8MqF/yW3VQ+sfLiyf0olOWgEpnVC2qawQE0I=", "dog"
Add Dog"}
  User Load (2.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1 
  Category Load (0.0ms)  SELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1, 2, 3)
   (1.0ms)  BEGIN 
   (0.0ms)  COMMIT
   (0.0ms)  BEGIN 
   (1.0ms)  SELECT 1 FROM "categories" WHERE ("categories"."name" = 'furry' AND "categories"."id" != 1) LI
   (1.0ms)  SELECT 1 FROM "categories" WHERE ("categories"."name" = 'house trained' AND "categories"."id" != 2) LIMIT                                                                           
   (0.0ms)  SELECT 1 FROM "categories" WHERE ("categories"."name" = 'wild' AND "categories"."id" != 3) LIMIT
  SQL (1.0ms)  INSERT INTO "dogs" ("created_at", "name", "updated_at", "user_id") VALUES ($1, $2, $3, $4                                                                          
"name", "Omni Dog"], ["updated_at", Mon, 30 Jul 2012 09:44:15 JST +09:00], ["user_id", 1]]

WARNING: Can't mass-assign protected attributes: category_id
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "categorizations" ("dog_id", "category_id", "created_at", "cat_id", "mouse_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["dog_id", 31], ["category_id", 1], ["created_at", Mon, 30 Jul 2012 09:44:15 JST +09:00], ["cat__id", nil], ["mouse_id", nil], ["updated_at", Mon, 30 Jul 2012 09:44:15 JST +09:00]]

WARNING: Can't mass-assign protected attributes: category_id
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "categorizations" ("dog_id", "category_id", "created_at", "cat__id", "mouse_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["dog_id", 31], ["category_id", 2], ["created_at", Mon, 30 Jul 2012 09:44:16 JST +09:00], ["cat__id", nil], ["mouse_id", nil], ["updated_at", Mon, 30 Jul 2012 09:44:16 JST +09:00]]

WARNING: Can't mass-assign protected attributes: category_id
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "categorizations" ("dog_id", "category_id", "created_at", "cat__id", "mouse_id", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["dog_id", 31], ["category_id", 3], ["created_at", Mon, 30 Jul 2012 09:44:16 JST +09:00], ["cat__id", nil], ["mouse_id", nil], ["updated_at", Mon, 30 Jul 2012 09:44:16 JST +09:00]]

Rendered dogs/_dog.html.erb (1.0ms)
Rendered dogs/create.js.erb (3.0ms)
Completed 200 OK in 203ms (Views: 25.0ms | ActiveRecord: 52.0ms) 
```

如果它在技术上有效，这是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:35:31.063

你在这里有一个额外的`s`：

```
class Dog < ActiveRecord::Base
  attr_accessible :name, :category_ids
  ... 
```

`category_id`是表格上的一列`dogs`，因此，只需将其删除：

```
class Dog < ActiveRecord::Base
  attr_accessible :name, :category_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:02:49.110

我需要改变这个：

```
@dog = current_user.dogs.new(params[:dog]) 
```

为此：

```
@dog = current_user.dogs.build(params[:dog]) 
```

然后它开始为我工作。

# android - Android Activity ListView LoaderManager 导航与记住以前的状态

> ID：11709085
> 
> 赞同：0
> 
> 时间：2012-07-29T12:01:55.837
> 
> 标签：android, android-activity, android-loadermanager

我有我的启动器活动，它生成一个 ListView。

现在在 ListView 上，我有一个 setOnItemClickListener，它基本上会将位置和 id 传递给一个新的活动。

```
mList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent intent = new Intent(ActivityHome.this, ActivityDetail.class);
            intent.putExtra("cm_position", position);
            intent.putExtra("cm_id", id);
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
        }
    }); 
```

现在 ActivityHome 中的 ListView 显示在 ListView 中间的某个位置。

当我在 ActivityDetail 中时，我有一个 actionBar.setDisplayHomeAsUpEnabled(true); 所以当下面执行时，它会回到 ActivityHome

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            Intent intent = new Intent(this, ActivityHome.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

问题是 ListView 中的位置丢失并且 ListView 回到顶部。有没有办法阻止 onCreate() 执行并破坏 ActivityDetail 的 Activity 并返回 ActivityHome 到原来的样子......我希望你能理解。

我想我可能为意图设置了错误的标志......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:15:04.040

固定的：

在ActivityDetail中，需要设置这个标志

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

我知道这与正确使用标志有关！！！

上面示例中当前运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处启动的新意图，或者自身完成并使用新意图重新启动。如果它已声明其启动模式为“multiple”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；对于所有其他启动模式，或者如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent()。

# javascript - 在javascript中将数组转换为字符串

> ID：11709086
> 
> 赞同：1
> 
> 时间：2012-07-29T12:01:56.510
> 
> 标签：javascript

我希望打印的文本不带逗号。

```
<html>
<head>
<title>Reverse</title>
</head>
<body>
<form name="rev">
Enter the string : <input type="text" name="str"/>
<input type="button" value="click" onclick="rev1()" /><br>
reverse of given string : <input type="text" name="res"/>
</form>
<script type="text/JavaScript">
function rev1(){
var a=rev.str.value;
var b=[];
var i,j=0;
    for(i=a.length-1;i>=0;i--){
    b[j]=a[i];
    j++
}
//rev.res.value=b;
alert(b);
}
</script>
</body>
</html> 
```

如果我`abc`在得到输出时给出输入`c,b,a`，但我希望它为`cba`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T12:04:19.193

试试这个：

```
alert( b.join("") ) 
```

您还可以通过以下方式更轻松地反转字符串：

```
"hello".split("").reverse().join("")
//"olleh" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T12:10:46.167

1.  您可以使用 javascript 内置函数反转字符串：

    ```
     <html>
            <head>
            <title>Reverse</title>
            </head>
            <body>
            <form name="rev">
            Enter the string : <input type="text" name="str"/>
            <input type="button" value="click" onclick="rev1()" /><br>
            reverse of given string : <input type="text" name="res"/>
            </form>
            <script type="text/JavaScript">
                function rev1(){
                    var a=rev.str.value;
                    var b=a.split("").reverse().join("");
                    //rev.res.value=b;
                    alert(b);
                }
            </script>
            </body>
            </html> 
    ```

2.  您也可以转移加入您的数组元素成为一个字符串

    ```
     <html>
            <head>
            <title>Reverse</title>
            </head>
            <body>
            <form name="rev">
            Enter the string : <input type="text" name="str"/>
            <input type="button" value="click" onclick="rev1()" /><br>
            reverse of given string : <input type="text" name="res"/>
            </form>
            <script type="text/JavaScript">
                function rev1(){
                    var a=rev.str.value;
                    var b=[];
                    var i,j=0;
                        for(i=a.length-1;i>=0;i--){
                        b[j]=a[i];
                        j++
                    }
                    //rev.res.value=b;
                    alert(b.join(""));
                }
            </script>
            </body>
            </html> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T16:28:20.970

你也可以使用`document.getElementById().value.reverse().join("");`

# ruby-on-rails-3 - 初始化程序更改类“ApplicationController”的“alias_method”未定义方法“current_user”后

> ID：11709092
> 
> 赞同：4
> 
> 时间：2012-07-29T12:02:38.577
> 
> 标签：ruby-on-rails-3, devise

我有以下初始化程序：

**app/config/initializers/store_location.rb**

```
module StoreLocation

  def self.skip_store_location
    [
        Devise::SessionsController,
        Devise::RegistrationsController,
        Devise::PasswordsController
    ].each do |controller|
      controller.skip_before_filter :store_location
    end
  end

  self.skip_store_location
end 
```

我的 ApplicationController 的相关部分：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :convert_legacy_cookies
  before_filter :store_location

  alias_method :devise_current_user, :current_user

  def current_user
    # do something
  end

  private
  def store_location
    # store location
  end 
```

加上这个在 **config/environments/development.rb**

```
Foo::Application.configure do
# normal rails stuff
config.to_prepare do
    StoreLocation.skip_store_location
  end
end 
```

如果我让 RSpec/Rails 运行 self.skip_store_location 我会收到以下错误：

```
/foo/app/controllers/application_controller.rb:7:in `alias_method': undefined method `current_user' for class `ApplicationController' (NameError) 
```

如果我删除呼叫，一切都会恢复正常（过滤器按预期运行除外）。我猜我以某种方式搞砸了依赖加载？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T15:05:56.560

问题是您`alias_method`在定义方法之前使用`ApplicationController`. 要解决此问题，请移动该行

```
alias_method :devise_current_user, :current_user 
```

以下

```
def current_user
  # do something
end 
```

运行时出现错误有点误导`skip_store_location`。我认为这是因为`skip_store_location`加载了多个控制器，其中一个是`ApplicationController`.

# java - 如何在 Java 中接收多个向量？

> ID：11709096
> 
> 赞同：0
> 
> 时间：2012-07-29T12:02:58.613
> 
> 标签：java, networking, vector

我是java新手，我在通信客户​​端-服务器中遇到问题，我不知道如何读取多个我发送的向量。我会很感激你的帮助:)。我的代码是：服务器：

```
import java.net.*;
import java.util.Vector;
import java.io.*;

   public class FileServer {
   private static ObjectOutputStream outStream;

   public static void main (String [] args ) throws IOException {

    // create socket
      ServerSocket servsock = new ServerSocket(2926);
   while (true) {
  System.out.println("Waiting...");

  Socket sock = servsock.accept();
  System.out.println("Accepted connection : " + sock);
  outStream = new ObjectOutputStream(sock.getOutputStream());
  // sendfile
  File myFile = new File ("D://music.mp3");

  Vector<Integer> send = new Vector<Integer>(); 
  int CRC=0;
  int part=0;
      for(int num=1;num<=(int) myFile.length()/60;num++){
          CRC= (part+num)%3;
          part = num*60;
          send.addElement(num);          
          send.addElement(part);
          send.addElement(CRC);
          outStream.writeObject(send);
          System.out.println(send);
          send.removeElement(num);
          send.removeElement(part);
          send.removeElement(CRC);

          if((myFile.length()<=(num+1)*60)&&(myFile.length()%60!=0)){
              int left = (int) (myFile.length()%60+part);
              int Num=num+1;
              CRC = (left + num)%2;

              send.addElement(Num);
              send.addElement(left);                 
              send.addElement(CRC);
              outStream.writeObject(send);
              System.out.println(send);
              send.removeElement(Num);
              send.removeElement(part);
              send.removeElement(CRC);

  System.out.println("Sending...");

          }
    }
  outStream.close();

  sock.close();

}
}
} 
```

服务器端错误：

```
[1 60 1]
....
[64367, 3862020, 2]
[64368, 3862047, 0]
Sending...
Exception in thread "main" java.net.SocketException: Socket closed
  at java.net.SocketOutputStream.socketWrite(Unknown Source)
  at java.net.SocketOutputStream.write(Unknown Source)
  at java.io.ObjectOutputStream$BlockDataOutputStream.drain(Unknown Source)
  at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(Unknown Source)
  at java.io.ObjectOutputStream.writeNonProxyDesc(Unknown Source)
  at java.io.ObjectOutputStream.writeClassDesc(Unknown Source)
  at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
  at java.io.ObjectOutputStream.writeObject0(Unknown Source)
  at java.io.ObjectOutputStream.writeFatalException(Unknown Source)
  at java.io.ObjectOutputStream.writeObject(Unknown Source)
  at FileServer.main(FileServer.java:61) 
```

我的客户端：

```
import java.net.*;
import java.util.Vector;
import java.io.*;

public class FileClient{

private static InetAddress host; 
public static void main (String [] args ) throws ClassNotFoundException,    UnknownHostException, IOException {

  host = InetAddress.getLocalHost();
  Socket sock = new Socket(host,2926);
  System.out.println("Connecting...");
  ObjectInputStream inStream = new ObjectInputStream(sock.getInputStream());

  long start = System.currentTimeMillis();

  for(int a=1;a<=100;a++){
  System.out.println("seq number of received vector: "+a);

  @SuppressWarnings("unchecked")   
  Vector <send> response = (Vector<send>)inStream.readObject();
  long end = System.currentTimeMillis();
  System.out.println(response);
  System.out.println("time: "+(end-start));

  }

  sock.close();

}

 } 
```

以及来自客户端的错误：（没有错误，但我希望看到至少 100 个向量，而不是第一个向量的 100 倍）：

```
seq number of received vector: 1
[1, 60, 1]
time: 71
...
seq number of received vector: 100
[1, 60, 1]
time: 79 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:07:27.247

将对象写入输出流后，如果您再次发送它，该流只会发送对已发送内容的引用。因此，要么每次创建一个新向量，要么在第二次发送向量之前在流上调用[reset() 。](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)

请注意，多年来，ArrayList 应该比 Vector 更受欢迎。你不应该再使用 Vector 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:45:27.260

对于服务器端异常。客户端在读取 100 个向量后关闭套接字。而服务器端还有更多的向量要写。所以它报告'java.net.SocketException：套接字关闭'

对于客户端“重复问题”，您应该`new`每次在发送循环中创建一个向量

在底层，Java ObjectOutputStream/InputStream 会记住每个被序列化对象的“引用”，因此可以在客户端重建对象引用映射。如果一个对象之前已经序列化并发送过，那么只会标记并发送一个“引用”。在您的情况下，写入单个对象，客户端仅接收单个对象。有关更多详细信息，请深入研究源代码`writeObject`

# android - Android：Eclipse xml 编辑器错误无法显示布局的 UI

> ID：11709101
> 
> 赞同：0
> 
> 时间：2012-07-29T12:04:13.757
> 
> 标签：android, adt

我有这个错误，它不会从我的 xml 编辑器显示图形布局......这是我的 Eclispe 上的错误日志上的消息和堆栈跟踪消息

```
activity_patient.xml: com.android.layoutlib.bridge.impl.binding.FakeAdapter cannot be cast to android.widget.BaseAdapter 
```

堆栈跟踪

```
java.lang.ClassCastException: com.android.layoutlib.bridge.impl.binding.FakeAdapter cannot be cast to android.widget.BaseAdapter
    at android.widget.FastScroller.getSectionsFromIndexer(FastScroller.java:512)
    at android.widget.FastScroller.getThumbPositionForListPosition(FastScroller.java:633)
    at android.widget.FastScroller.onScroll(FastScroller.java:458)
    at android.widget.AbsListView.invokeOnItemScrollListener(AbsListView.java:1323)
    at android.widget.ListView.layoutChildren(ListView.java:1707)
    at android.widget.AbsListView.onLayout(AbsListView.java:2102)
    at android.view.View.layout(View.java:13754)
    at android.view.ViewGroup.layout(ViewGroup.java:4362)
    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
    at android.view.View.layout(View.java:13754)
    at android.view.ViewGroup.layout(ViewGroup.java:4362)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
    at android.view.View.layout(View.java:13754)
    at android.view.ViewGroup.layout(ViewGroup.java:4362)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
    at android.view.View.layout(View.java:13754)
    at android.view.ViewGroup.layout(ViewGroup.java:4362)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
    at android.view.View.layout(View.java:13754)
    at android.view.ViewGroup.layout(ViewGroup.java:4362)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:449)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:333)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1300)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1285)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1079)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

我不知道如何解决这个问题，因为当我运行我的模拟器时..我的布局运行正常..我无法轻松编辑它，我必须对其进行硬编码......任何输入都会有助于解决这个问题还是你们中的任何人都解决了这个问题，我的猜测是它在 adt 插件上..

顺便说一句，我正在使用 Juno Eclipse 和 ADT 最新版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:43:06.423

这是自定义布局的一个已知问题。

> 可视化布局编辑器只加载它从 XML 中读取的类。基本上，当它在 XML 中找到一个不是默认小部件的节点时，它会要求 eclipse 加载相应的类。有可能我们所做的自定义类加载器实际上并没有处理加载的类需要从项目中加载另一个类的情况。

这是一个[类似的问题](http://code.google.com/p/android/issues/detail?id=6894)

这是一个[解决方案](https://android-review.googlesource.com/#/c/18424/)，虽然我自己没有尝试过..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:08:15.240

`ClassCastException`如果您在一个屏幕上有多个滚动视图，您还将获得。例如，如果您有一个`ListView`内部 a `ScrollView`，您将看到此异常。幸运的是，Eclipse 强调了这个问题并显示了这一点：

> 垂直滚动的 ScrollView 不应包含另一个垂直滚动的小部件 (ListView)

当你将鼠标悬停在它上面时。

# python - 在 Flask 中，如何更新模板中的输入字段？

> ID：11709109
> 
> 赞同：0
> 
> 时间：2012-07-29T12:05:13.433
> 
> 标签：python, flask, jinja2

作为 Flask 的新手，我阅读了 Flask an Jinja 的手册，我知道如何从模板中读取文件，但不知道如何更新模板。

我的模板具有以下我从 doco 修改的结构

```
<form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
        <dt>Documet:
        <dd><input   name=text size = 80 value = {{ AO_sDocument }} > </input >   
        <dd><input type=submit value=Analyse>
      </dl>
    </form> 
```

我的 Python 有以下行

```
render_template('show_entries.html',   AO_sDocument=AO_sDocument ) 
```

是的，这条线似乎没有更新该领域。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:21:48.727

正如 Jon Clements 指出的那样，您的 HTML 存在一些标记错误。为了保证所有浏览器都能正确解析 HTML，你的模板标记应该看起来更像下面这样：

```
<form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
    <dl>
        <dt>Document:</dt>
        <dd><input name="text" size="80" value="{{ AO_sDocument }}" /></dd>
        <dd><input type="submit" value="Analyse" /></dd>
    </dl>
</form> 
```

或者，您可能希望放弃使用`<dl>`并`<dt>`支持 a `<label>`，这在语义上更加正确：

```
<form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
    <label for="text">Document:</label>
    <input id="text" name="text" size="80" value="{{ AO_sDocument }}" />
    <input type="submit" value="Analyse" />
</form> 
```

# hibernate - 在休眠中获取无效的映射异常

> ID：11709112
> 
> 赞同：0
> 
> 时间：2012-07-29T12:05:54.823
> 
> 标签：hibernate

我在hibernate中开发了一个应用程序，下面是pojo，但是我遇到了映射异常，请告知

这是我的人pojo..

```
 package mypack;

public class Person
{
     private int personId;
     private String name;
     private Address address;
    public Person() 
    {
        super();
    }
    public Person(String name, Address address) 
    {
        super();
        this.name = name;
        this.address = address;
    }
    public int getPersonId() {
        return personId;
    }
    public void setPersonId(int personId) {
        this.personId = personId;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Address getAddress() {
        return address;
    }
    public void setAddress(Address address) {
        this.address = address;
    }
    } 
```

地址 pojo 是

```
 package mypack;

public class Address 
{
     private int id;
     private String city,state;

    public Address()
    {
        super();

    }

    public Address(String city, String state)
    {
        super();
        this.city = city;
        this.state = state;
    }

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getCity() {
        return city;
    }
    public void setCity(String city) {
        this.city = city;
    }
    public String getState() {
        return state;
    }
    public void setState(String state) {
        this.state = state;
    }
     } 
```

对应的hbm映射文件是pkfk.hbm.xml ..

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
          "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-mapping>
<class name="mypack.Person">
<id name="personId" type="int">
<generator class="increment"/>
</id>
<property name="name"/>
<many-to-one name="address" class="mypack.Address" column="addressId" unique="true" cascade="all"/>
</class>

<class name="mypack.Address">
<id name="id" column="addressId" type="int">
<generator class="increment"/>
</id>
<property name="city"/>
<property name="state"/>
</class>
</hibernate-mapping> 
```

我的主程序文件是......

```
package mypack;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

public class TestProgram 
{
    public static void main(String[] args)
    {
      try
      {
       SessionFactory sesfac=new Configuration().configure().buildSessionFactory();
       Session ses=sesfac.openSession();
       Person p=new Person("Anupam",new Address("Noida","U.P"));
       Person p1=new Person("Rekha Singh",new Address("Kanpur","U.P"));
       System.out.println("Persisting Object...");
       Transaction tx=ses.beginTransaction();
       ses.save(p);
       ses.save(p1);
       tx.commit();
       System.out.println("Successfully Persisted.");
       ses.close();
      }
      catch(Exception e)
      {
          System.out.println(e);
      }
    }
} 
```

在执行主文件时，我收到以下错误..

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
org.hibernate.InvalidMappingException: Could not parse mapping document from resource samePK.hbm.xml 
```

请告知问题出在哪里以及如何纠正这个无效的映射异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:21:52.150

您命名了您的文件`pkfk.hbm.xml`，Hibernate 尝试读取`samePK.hbm.xml`。您的主配置文件一定是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T08:03:02.407

如果有人在使用 spring 和 hibernate 集成时遇到无效映射异常，请仔细检查 springbean.xml 文件中的拼写错误（无论你给出什么）然后仔细检查 hibernate.hbm.xml 文件 bcs，因为我认为大多数时候我们遇到的问题只是拼写错误的原因。1）hbm文件对应的变量名正确；2）所有getter/setter是否存在。3）当你使用*ClassPathXmlApplicationContext*加载 springbean.xml 文件时，在构造函数中传递，然后检查其拼写名称。4）id标签必须是。它的类型是String或者int，long任意一个k

这是我与你分享的经验。我希望这对所有人有用。

# vim - 如何在 Vim 中切换 FIXME/TODO/XXX 的高亮显示？

> ID：11709114
> 
> 赞同：1
> 
> 时间：2012-07-29T12:05:56.203
> 
> 标签：vim, latex

我正在使用 Vim 编辑 LaTeX 文件，它曾经自动突出显示这些单词，这对我很有帮助。我还必须突出显示拼写错误，`:set spell`并且我已将和添加到拼写良好列表 ( )。最近，我做了一些我无法回忆/重现的事情并打破了这个。我仍然会突出显示 LaTeX 关键字，例如,等，但不是这些关键字。`TODO``FIXME``XXX``zg``begin``section`

在线搜索只会导致人们抱怨这些单词被突出显示，然后他们通过发出`:syntax clear Todo`. 我有完全相反的问题——我希望它重新打开。有人可以告诉我如何进行吗？

# macos - FSPathMakeRef 和 FSRefMakePath 在 OS X 10.8 中已弃用，有哪些替代方案？

> ID：11709116
> 
> 赞同：9
> 
> 时间：2012-07-29T12:06:00.517
> 
> 标签：macos, deprecated, osx-mountain-lion

我注意到了这一点`FSPathMakeRef()`，`FSRefMakePath()`现在在 OS X 10.8 中已弃用。

我有一些代码使用它们来查找路径的规范案例，例如，如果传递“/USeRs”，它将返回“/Users”。

为什么这些和其他相关功能已被弃用，现在应该使用哪些未弃用的 API 来提供等效功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T04:22:00.240

用于`NSURL`存储普通路径和文件引用路径。

来自[文件管理器文档](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP30000107-AppendixA)（附录 A：不推荐使用的文件管理器功能）：

> **FSMakeFSRefUnicode**
> 
> 给定父目录和 Unicode 名称，构造文件或目录的 FSRef。（在 OS X v10.8 中已弃用。改用 NSURL 或 CFURL API。要按 ID 跟踪文件系统项的行为，请使用 fileReferenceURL 或 CFURLCreateFileReferenceURL 创建文件引用 URL。）

据我所知，Apple 选择完全弃用该类型，转而`FSRef`支持文件引用 URL（看起来像）。`file:///.file/id=6571367.39068/`

如果要规范化字符串路径，可以使用未弃用的 API 执行以下操作：

```
NSString *canonicalPath = [[[NSURL fileURLWithPath:@"/USeRs"] fileReferenceURL] path]; 
```

# ios - 如何在我的应用程序中从 ios 模拟器获取屏幕截图

> ID：11709118
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:06:41.483
> 
> 标签：ios, objective-c, macos, cocoa, macos-carbon

如果 ios 模拟器处于活动状态，

如何向 ios 模拟器发送任何消息获取屏幕截图并存储在剪贴板中（在 ios 模拟器中有快捷方式）

我从剪贴板得到这个屏幕截图

简而言之，如何使用objective-c从ios模拟器获取屏幕截图

我需要更多客观的资源来进行 mac os 应用程序之间的通信，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:17:11.823

cmd **+ shift + 4**选择截图区域或**cmd + shift+ 4 + space**获取模拟器窗口整体截图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T06:18:37.400

试试这个

```
 #import <QuartzCore/QuartzCore.h>

- (void)viewDidLoad
{
       [super viewDidLoad];
       UIGraphicsBeginImageContext(self.view.bounds.size);
       [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
       UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
       UIGraphicsEndImageContext();
       NSData * data = UIImagePNGRepresentation(image);
       NSArray *arrPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *filePath = [[arrPath objectAtIndex:0] stringByAppendingPathComponent:@"test.png"];
       NSLog(@"%@",filePath);
      [data writeToFile:filePath atomically:YES];
} 
```

# c# - 相对 URI 问题 - 在 VS/Blend 中设计 WPF 窗口，但使用不同的 c# 环境打开窗口

> ID：11709119
> 
> 赞同：0
> 
> 时间：2012-07-29T12:07:01.343
> 
> 标签：c#, wpf, xaml, .net-3.5, uri

请原谅新手的问题 - 我的背景是 Unix 并且在 WPF 方面我很绿色......

**//上下文//** 我需要设计一个基于 WPF 的单页 UI，使用 Visual Studio 或 Blend。

此外，我需要将其移植到微软生成的解决方案之外......这是因为我需要能够在不同的 c# 环境中定义业务逻辑，该环境由名为“NinjaTrader”的软件公开（对于那些可能使用它）。

*我仅限于 .NET 3.5*

**//附加信息//** 现在，我正试图尽快进行概念验证。我已经使用 winforms 成功实现了 UI。通过简单地在 VS 中设计表单，然后将自动生成的设计器代码复制到我自己在 NinjaTrader 中的抽象类定义（比如“myForm”）中。然后我必须将 myForm 继承到“标准”NinjaTrader.Indicator 类中的新类定义中（这是能够实例化 myForm2 类所必需的），并将外部类传递给 myForm2 的构造函数，并覆盖方法我需要业务逻辑，我可以在 NinjaTrader.Indicator 类的“OnStartUp”上显示 UI，并实现我需要的行为。

**//我的问题//** 到目前为止，WPF 被证明更加困难。我已经尝试将“WPFWindow.xaml.cs”中的类定义以及“WPFWindow.g.cs”中的必要内容复制到单个 .cs 文件中（由于 NinjaTrader 中的限制，我必须为此使用单个文件)，然后从另一个 NinjaTrader.Indicator 类实例化这个类。

一切都在同一个命名空间中，尽管当涉及到相对 Uri 时我一再被难住，而且无论我做什么，似乎我都会收到以下消息：

> 找不到资源“wpfwindow/wpfwindow.xaml”

现在 - 我知道在从不同的应用程序中运行时，相对 Uri 不会相同，我什至尝试将 WPFWindow.xaml 文件复制到一个新文件夹（*在*当前工作目录中，并且*没有*任何空格）并计算相对：

```
 string cpath = Directory.GetCurrentDirectory();
    string installPath = @"C:\Program Files (x86)\NinjaTrader 7\bin64\WPFWindow\WPFWindow.xaml";
    Uri cwUri = new Uri(@cpath);
    Uri instUri = new Uri(@installPath);
    string relPath = cwUri.MakeRelativeUri(instUri).ToString();

    System.Uri resourceLocater = new System.Uri(relPath, System.UriKind.Relative);

    System.Windows.Application.LoadComponent(this, resourceLocater); 
```

但是，我仍然遇到同样的错误。

如果有人对我如何尝试进行任何建议/建议，我将不胜感激。

是否有另一种方法可以加载 XAML 文件（当前应用程序/项目外部），*而不*使用相对 Uri 来显示单个 UI 窗口？任何关于最低限度的建议（在这种情况下肯定更可靠）我需要实施才能做到这一点并定义业务逻辑，这将非常有帮助......

提前感谢您的任何建议

Ĵ

编辑：（和对布赖恩 S 的回应）：

感谢您的回复，也感谢您对材料的推荐。我完全有可能误解了 WPF 所涉及的必要架构......

因此，请让我知道是这样的……我的理解如下：

图形组成、内容、布局*等都*在 XAML 文件中指定。行为、交互、事件处理等在代码隐藏中指定。

一旦编写了 XAML 标记，我就假设，为了实例化我设计的窗口，我需要做的就是将它加载/解析到一个对象树中 - 比如说 - 一个继承的类System.Windows.Window，并且在 XAML 文件中命名为与 x:class="myClass" 中相同的类。

在重新阅读我之前写的内容后，我意识到我对情况并不是很清楚。我可以使用多个文件来解决问题，没有问题，问题出现如下：

对于跨 2 个文件的部分类 - 比如说 file1.cs 和 file2.cs，类方法只能在定义它们的同一文件中被识别（除非我实际实例化类 - 之后我可以调用它的方法） . 所以 - 例如 - 我无法在 file1.cs 中指定 InitializeComponent()，然后在 file2 中定义一个引用 InitializeComponent() 的构造函数......我希望这是有道理的......

我能做的似乎可行的是避免在我需要引用它们的文件之外定义方法。因此，尽可能避免使用部分类。

我可以在一个文件（比如class1.cs）中定义一个类，然后从另一个文件（比如class2.cs）实例化它没问题，通过使用：

```
private class1 mynewclass1 = new class1(args) 
```

我还可以使用：

```
'System.Windows.Application.LoadComponent(args);' 
```

尽管我似乎遇到了相对寻址的问题，但无论我尝试什么，它似乎都找不到 .xaml 文件。

有没有一种方法可以尝试在不使用相对寻址的情况下加载 xaml 文件？我一直在看 XamlReader，虽然我不确定它是否能满足我的需求......

再次感谢，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:25:49.967

如果我遵循，您试图将 WpfWindow.xaml 文件视为位于同一目录中的松散资源文件。这不是 WPF 的工作方式 - WpfWindow.xaml 文件是带有代码隐藏的部分类。XAML 资源字典可以做到这一点，但我认为 WpfWindow.xaml 文件不可能，因为它们需要一起编译。

如果您想要一个单文件解决方案，则需要做更多的工作，但是您在 XAML 中所做的一切，都可以通过代码来完成。因此，您可以通过代码隐藏创建一个窗口、添加控件、定位它们并连接行为。显然，这不是理想的方法，但听起来您有一些相当大的限制（我不熟悉 NinjaTrader）。

MSDN 文档将提供有关手动构建和布局 WPF 窗口所需的代码的帮助，或者如果您正在寻找其他资源，[Applications = Code + Markup](https://rads.stackoverflow.com/amzn/click/com/0735619573)由 Charles Petzold 完成，您需要从代码隐藏中对 WPF 执行任何操作。

# ef-code-first - 让 App_Start Code First 迁移与 Miniprofiler 一起使用

> ID：11709120
> 
> 赞同：0
> 
> 时间：2012-07-29T12:07:08.440
> 
> 标签：ef-code-first, entity-framework-4.3, entity-framework-migrations

我正在运行代码优先迁移。（英孚 4.3.1）

我也在运行 Miniprofiler。

我通过 App_Start 上的代码运行我的代码第一次迁移。

我的代码如下所示：

```
public static int IsMigrating = 0;
    private static void UpdateDatabase()
    {
        try
        {
            if (0 == System.Threading.Interlocked.Exchange(ref IsMigrating, 1))
            {
                try
                {
                    // Automatically migrate database to catch up.
                    Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(new Exception("Checking db for pending migrations.")));
                    var dbMigrator = new DbMigrator(new Ninja.Data.Migrations.Configuration());
                    var pendingMigrations = string.Join(", ", dbMigrator.GetPendingMigrations().ToArray());
                    Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(new Exception("The database needs these code updates: " + pendingMigrations)));
                    dbMigrator.Update();
                    Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(new Exception("Done upgrading database.")));
                }
                finally
                {
                    System.Threading.Interlocked.Exchange(ref IsMigrating, 0);
                }
            }
        }
        catch (System.Data.Entity.Migrations.Infrastructure.AutomaticDataLossException ex)
        {
            Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(ex));
        }
        catch (Exception ex)
        {
            Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(ex));
        }
    } 
```

问题是我的 DbUpdate 即将被调用，然后我的应用程序抛出一个异常，我认为该异常来自应用程序的第一个网页请求。

说：

> 无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。

问题是我认为我的主页在我的 dbupdate 完成*之前触发了 dbcontext 和这个错误。*

你将如何解决这个问题？

我应该使用锁等让上下文等待还是有更简单的方法？

更有趣的是，如果我启动和停止应用程序几次，数据库更改就会被推送，错误就会消失......

所以我需要找到一种方法，让 App_Start 上的第一个数据库请求等待迁移发生。

想法？

# css - 减慢 CSS 不透明度动画

> ID：11709121
> 
> 赞同：3
> 
> 时间：2012-07-29T12:07:11.233
> 
> 标签：css, performance, animation, opacity, css-transitions

我想减慢 .opacity CSS 属性中的动画时间。就像，我希望它延迟 0.2 毫秒或类似的东西。

为了更好地了解，当悬停在我的网站上的精选帖子时会添加不透明度：[http ://www.thetechnodaily.com](http://www.thetechnodaily.com)

请记住：我没有使用过 jQuery。它的纯 CSS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T12:14:48.343

您似乎正在寻找的是[CSS Transitions](https://developer.mozilla.org/en/CSS/CSS_transitions)。

转换允许您设置[延迟](https://developer.mozilla.org/en/CSS/transition-delay)和转换的[长度](https://developer.mozilla.org/en/CSS/transition-duration)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T12:16:35.920

我认为这可能是您想要实现的目标？

[http://fiddle.jshell.net/9VB72/2/](http://fiddle.jshell.net/9VB72/2/)

[更多信息](http://www.w3schools.com/css3/css3_transitions.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T12:42:47.520

**使用 jQuery**

```
$('#clickme').click(function() {
   $('#book').animate({
       opacity: 0.25,
       left: '+=50',
       height: 'toggle'
   }, 5000, function() {
     // Animation complete.
   });
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

使用**css**你可以尝试这样的事情：

```
.class:hover {
    opacity: 1; 
    -moz-transition: all 0.4s ease-out;  /* FF4+ */
    -o-transition: all 0.4s ease-out;  /* Opera 10.5+ */
    -webkit-transition: all 0.4s ease-out;  /* Saf3.2+, Chrome */
    -ms-transition: all 0.4s ease-out;  /* IE10? */
    transition: all 0.4s ease-out;  
} 
```

# php - 在 PHP 中，我应该使用正则表达式来匹配这个或其他东西吗？

> ID：11709127
> 
> 赞同：0
> 
> 时间：2012-07-29T12:07:42.683
> 
> 标签：php, string, expression, match

我需要能够检查变量是否包含字符串的第一部分。例如，“foobaz xy”。“foobaz xy”之后的所有内容都可以忽略匹配。这也必须不区分大小写，并且 foobaz 和 xy 之间必须有空格。PHP 中是否已经有一个内置函数可以处理这个问题，或者需要一个正则表达式来处理这个问题？最后但并非最不重要的一点是，如果不止一种方法具有更快的执行时间？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:18:19.883

它没有内置功能，但是有一个很小的解决方法可以实现相同的目的。检查以下示例：

```
$string = "foobaz xyewew";
if (stripos($string, "foobaz xy") === 0) {
    echo "It starts with foobaz xy";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:19:16.167

至于不区分大小写的问题，您可以将新字符串复制到另一个字符串并将其转换为全部小写，这将使其不区分大小写。

假设字符串 A= foobaz xy 和 b=sth sth sth，那么您需要做的就是获取字符串 b 的子字符串，该子字符串始终是 foobaz xy 的大小，因此，如果 b 在字符数上小于 foobaz xy，它会自动打折。如果不是，那么您需要将子字符串与常量字符串 A 进行比较，这将解决问题。

[在此处查看 php 子字符串：](http://php.net/manual/en/function.substr.php)

[请参见此处的 strcmp 以比较子字符串和您的字符串](http://php.net/manual/en/function.strcmp.php) [请参见此处以将字符串转换为全部小写](http://php.net/manual/en/function.strtolower.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:20:02.533

最快的检查方法：

```
$variable  = "FooBaz xy test string";
$isContain = strpos(strlower($variable, "foobaz xy")) === 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T12:37:25.930

第一个答案是正确的，有关[http://www.php.net/manual/en/function.stripos.php](http://www.php.net/manual/en/function.stripos.php)的更多信息。永远记住，在简单的字符串检查中使用正则表达式是一种不好的做法。

# jquery - 使用简单的 jquery ajax 运行 Dajaxice

> ID：11709131
> 
> 赞同：0
> 
> 时间：2012-07-29T12:09:04.697
> 
> 标签：jquery, ajax, django, dajaxice

是否可以使用简单的 jquery ajax 运行 Dajax 和 Dajaxice？它会以不好的方式相互干扰吗？

当发生简单的 AJAX 时，我在 Dajax 和一个名为 EndlessPagination 的应用程序中几乎没有功能。在无尽的工作时，我的一半 dajax 函数无法正常工作。在views.py 的其他请求中，一切都很好。你有什么想法我该如何解决这个问题？Mayby 这是 Dajax 的错，我不应该再使用它了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:38:44.513

¿ 无休止的 ajax 调用是同步的还是异步的？，如果它们是同步的，则 Dajax 请求在无休止结束之前不会启动

# ruby-on-rails - Rails：在多对多关联中添加信息

> ID：11709132
> 
> 赞同：0
> 
> 时间：2012-07-29T12:09:09.447
> 
> 标签：ruby-on-rails, associations, one-to-many

我已经在用户和轮班之间建立了多对多的关联。我还试图存储特定轮换表的创建者是谁。

**类用户**

```
 has_many :rotazations
  has_many :rotas, :through => :rotazations 
```

**轮值班**

```
 has_many :rotazations
  has_many :users, :through => :rotazations, :order => 'name ASC' 
```

**类轮换**

```
 belongs_to :user
  belongs_to :rota

  before_create do |rotazation|
    rotazation.creator_id = rotazation.user_id
  end 
```

创建轮播表时，我已成功将轮播表中的 creator_id 设置为具有创建轮播表的用户的 id。我的问题是，我如何访问它：

```
rota.creator 
```

* * *

**我的尝试**

我试图添加以下内容：

*轮值班*

```
...
belongs_to :creator, :class_name => "User", :through => :rotazations, :foreign_key => "creator_id"  
... 
```

*用户类*

```
has_many :created_rotas, :class_name=> "Rota", :through => :rotazations, :foreign_key => "creator_id" 
```

但是，这不起作用。任何想法如何实现 rota.creator 工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:21:43.657

每次您在`rotazations`表中创建新行时，您都会将 添加`user_id`到`creator_id`，这是 上的一个属性`Rotazation`。

但是，`rotazations`表是一个组合，`user_id`只是`rota_id`为了解决多对多的关系。如果我认为它是正确的，那`creator_id`将永远是一样的`user_id`。所以，你实际上有冗余数据：

```
| user_id | rota_id |creator_id |
| 1       | 1       | 1         |
| 2       | 1       | 2         |
| 1       | 2       | 1         |
| ...     | ...     | ...       | 
```

为了知道谁创建了`Rota`一个新属性，您可以向表中添加一个新属性`rotas`，比如说`creator`。

当你创建一个新的 rota 时，你可以将它保存`user_id`到这个新属性中：

```
@rota = Rota.new
@rota.creator = current_user.id 
```

# mysql - 在不使用 mysqldump 的情况下复制 MYSQL 数据库同一服务器

> ID：11709135
> 
> 赞同：1
> 
> 时间：2012-07-29T12:09:27.283
> 
> 标签：mysql

我有一个大型数据库“devDB”，我想在同一台服务器上复制它以成为我的实时数据库“liveDB”。我可以在不使用 mysqldump 的情况下进行复制吗？上次我使用 mysqldump 花了很长时间。如果只是复制文件的问题，似乎可能有更快的方法。您可以创建一个新数据库并复制所有表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:36:06.910

如果您不想使用 mysqldump，请创建数据库/模式，

并将表从一个数据库复制到另一个：

```
 CREATE TABLE `liveDB.sample_table` SELECT * FROM `devDB.sample_table`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:54:58.933

如果您想将 newDB 放在与 devDB 相同的 MySQL 实例中，Michael 上面的回答是一个好主意。如果要将 liveDB 放在单独的实例上，可以使用 mysqldump 将输出直接“管道”到 liveDB 的“源”，这样可以避免磁盘 I/O。此外，为了提高性能，您可以在插入数据时禁用目标数据库上的 MySQL 二进制日志。

# java - 尝试实现可操作的 zip 文件系统 - 失败

> ID：11709137
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:09:39.267
> 
> 标签：java, zip, nio

我需要找到一种解决方案，以便能够直接（无需解包）而不使用第三方库来操作 zip / jar。但是，我似乎无法理解`FileSystem`与`Path`和的关系`URI`。

我试图复制到的 URI 是
`jar:file://E:/Projects/ZipDir/dist/test_folder/test.zip!/test_file.txt`

我得到的例外是：
**`FileSystemNotFoundException`**但该 zip 文件确实存在。

使用 Java 7，这是我目前所拥有的：

```
...
ZipDirectory zip = new ZipDirectory("test_folder/test.zip");
Path copyTo = zip.getPath("/test_file.txt");
Path copyFrom = Paths.get("test_file.txt");

Files.copy(copyFrom, copyTo, StandardCopyOption.REPLACE_EXISTING);
... 
```

//

```
import java.io.IOException;
import java.net.URI;
import java.nio.file.*;
import java.util.HashMap;

public class ZipDirectory {

    private Path path;
    private FileSystem fileSystem;

    public ZipDirectory(String path){
        this.path = Paths.get(Paths.get(path).toUri());
        create();
    }

    private void create(){
        HashMap<String, String> env = new HashMap<>(); 
        env.put("create", "true");
        try {          
            fileSystem = FileSystems.newFileSystem(path, null);
        } catch (IOException ex) {
            System.out.println(ex);
        }
    }

    public Path getPath(String relativePath){
        return Paths.get(URI.create("jar:file:/" + path.toUri().getPath() + "!" + fileSystem.getPath(relativePath)));
    }

    public Path getRoot(){
        return Paths.get(URI.create(path.toUri().getPath() + "!/"));
    }

    public void close(){
        try {
            fileSystem.close();
        } catch (IOException ex) {
            System.err.println(ex);
        }
        fileSystem = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:15:35.707

我从没想过我会回答我自己的问题，但我已经成功了：

[使用 Java 7 将存档视为目录](http://fhmp-java.blogspot.co.nz/2012/07/treating-archive-like-directory-with.html)

# mysql - 如何从表sql中删除行

> ID：11709139
> 
> 赞同：3
> 
> 时间：2012-07-29T12:10:01.293
> 
> 标签：mysql, sql, oracle-sqldeveloper

我想从 8 个表中删除特定行。我的问题是行与外键连接。如何删除连接到我要删除的特定行的所有数据？我的表包括定义表（如 id、name、max value、min value...）、数据表（如 id、user_id、definition_id、....）和历史表（保存数据表中的每个更改）。

我想在级联命令上使用删除，但我找不到使用它的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T12:20:12.647

`DELETE CASCADE`是外键约束的一个属性。不幸的是，您不能将其用作`DELETE`声明的选项（实际上真的很酷）

如果您的外键未声明为级联，则需要“向上工作”。

不幸的是，您没有向我们展示您的真实表结构，所以让我们假设如下：

```
主表（主 ID）
   child_one (id, main_id)
     child_two (id, id_one)
       child_three (id, id_two)

```

（我知道你说的是 8 张桌子，但为了演示，我把它缩短了一点，但这并没有改变潜在的“策略”）

假设您想`main_id = 42`从 `main_table 删除行：

您首先需要使用以下内容从 child_three 中删除行：

```
delete from child_three
where id_two in (select id 
                 from child_two 
                 where id_one in (select id
                                  from child_one 
                                  where main_id = 42); 
```

然后从 child_two 中删除行：

```
delete from child_two
where id_one in (select id
                 from child_one 
                 where main_id = 42); 
```

然后child_one：

```
delete from child_one
where main_id = 42; 
```

最后是主表：

```
delete from main_table
where id = 42; 
```

一些 SQL 客户端实际上可以为您生成这些语句。我不知道 SQL Developer 是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:20:22.493

我假设您使用 InnoDB Engine，因为您在谈论外键，

更容易正确定义表，以便删除将作为级联删除。

```
 CONSTRAINT `myForeignKey` FOREIGN KEY (`typeId`)
        REFERENCES `types` (`id`) ON DELETE CASCADE ON UPDATE CASCADE 
```

这是一个正确的创建表语句的链接：

[如何在 mysql 中使用删除级联？](https://stackoverflow.com/questions/511361/how-do-i-use-on-delete-cascade-in-mysql)

# internet-explorer - 网站无法在 Internet Explorer 中运行/查看

> ID：11709141
> 
> 赞同：0
> 
> 时间：2012-07-29T12:10:23.390
> 
> 标签：internet-explorer, dreamweaver, quirks-mode

[我的网站](http://www.jamesabbottphotography.co.uk)在所有版本的 Internet Explorer 中都存在问题- 它在此浏览器中不起作用，但在所有其他浏览器中都可以正常工作。

我的网站是在 Dreamweaver 中使用我自己的模板制作的，我在此链接上找到了该网站的解释：[Dreamweaver 导致 Internet Explorer 中的怪癖模式](https://stackoverflow.com/questions/6294301/dreamweaver-causing-quirks-mode-in-internet-explorer)

不幸的是，该建议无效，该网站仍无法正确查看。我什至使用索引页面中的代码创建了一个测试 html 页面，减去所有模板编码，但它仍然无法在 IE 中工作。我只能找出问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:34:08.987

如果我是你，我会使用[w3.validator](http://validator.w3.org)并确保你的 html 是正确的。

我假设需要修复以使其在 IE 中工作的内容在这里：

```
 <!-- InstanceEndEditable -->
<div id="copyright"> &copy; 2012 James Abbott. All rights reserved</div>

<!--[if IE]></div><![endif]>
<!--[if !IE]></div><![endif]>
</body>
<!-- InstanceEnd --></html> 
```

似乎你有一些事情要纠正;）例如，如果标签没有正确关闭，并且`</body>`在 IE 中查看时似乎遗漏了

# xcode - iPhone的UIBUtton标题动画

> ID：11709147
> 
> 赞同：2
> 
> 时间：2012-07-29T12:11:25.587
> 
> 标签：xcode, animation, uibutton

我想为自定义 UIButton 的标题添加动画，以便数字（每个标题显示一个随机分配的数字）将旋转。我怎样才能做到这一点？

问题是我不想使用翻转数字图像来做到这一点。我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T15:10:00.080

假设您有一个名为`flipLabelButton`connected的按钮`IBOutlet`到您的视图控制器，您可以使用此代码将您的按钮动画化为一个新标签：

```
- (IBAction)flipLabelText:(id)sender {
    NSString *newText = [NSString stringWithFormat:@"%d", rand() % 100];
    [UIView beginAnimations:@"flipbutton" context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.flipLabelButton cache:YES];
    [self.flipLabelButton setTitle:newText forState:UIControlStateNormal];
    [UIView commitAnimations];
} 
```

# javascript - 具有来自静态 json 文件（只读）的路由的主干应用程序？

> ID：11709149
> 
> 赞同：0
> 
> 时间：2012-07-29T12:11:30.613
> 
> 标签：javascript, backbone.js, backbone-routing

我正在构建一个只读主干应用程序，其数据（来自单个静态 json 文件）遵循某种建筑/校园结构。那是：

```
[{
    "name": "Building Name",
    "id": "building",
    "floors":[{
        "name":"Ground Floor",
        "rooms":[{
            "name": "Room 1"
        },
        {
            "name": "Room 2"
        }]
    },
    {
        "name":"First Floor",
        "rooms":[{
            "name": "Room 3"
        },
        {
            "name": "Room 4"
        }]
    }]
    },
    {
    "name": "Another Building",
    "id": "building_2",
    "floors":[{
        "name":"Ground Floor",
        "rooms":[{

        }]
    },
    {
        "name":"First Floor",
        "rooms":[{

        }]
    }]
}] 
```

我目前有一个基本的应用程序设置，显示默认“路线”上每个建筑物的建筑物和楼层列表。

我想使用路由器，以便 APP/#buildingId/ 显示带有“buildingId”的建筑物的楼层列表，而 APP/#buildingId/#floorId 显示相关的房间列表等。

**我当前代码的 JSBIN（没有 data.json） - [http://jsbin.com/welcome/5850/edit](http://jsbin.com/welcome/5850/edit)**

很多代码可能已经过时，但我尝试了不同的方法来构建模型/集合。这个应用程序永远不会超过只读，这就是我使用静态文件的原因。

* * *

类似问题：[How to use JSON to power interactive Backbone.js app](https://stackoverflow.com/questions/8670077/how-to-use-json-to-power-interactive-backbone-js-app)

提出的解决方案根本不使用路由器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T20:08:36.183

这是你要求的吗？：

```
// code simplified and no tested
App.Router = Backbone.Router.extend({

  routes: {
    "/APP/:buildingId/:floorId":  "showRooms",
    "/APP/:buildingId":           "showFloors"
  },

  showRooms: function( buildingId, floorId ) {
    // code to show the rooms
  },

  showFloors: function( buildingId ) {
    // code to show the floors
  },

}); 
```

还是我错过了什么？

# database - 数据库：行内计算/计算行

> ID：11709151
> 
> 赞同：0
> 
> 时间：2012-07-29T12:11:51.837
> 
> 标签：database, database-design

我计划为商业智能系统设计一个数据库模型，该系统存储一组位置和一组年份的业务数据。

其中一些数字应根据同一年份和同一地点的其他数字计算得出。在下文中，我将把未计算的数字称为“基本数字”。为了存储基本数字，具有这些列的表格设计是有意义的：

```
| year | location_id | goods_costs | marketing_costs | warehouse_costs | administrative_costs | 
```

使用此表，我可以创建一个计算所有其他必要数字的视图：

```
CREATE VIEW all_figures
SELECT *,
    goods_costs + marketing_costs + warehouse_costs + administrative_costs
    AS total_costs
FROM basic_figures 
```

如果我没有遇到以下问题，那就太好了：

1.  大多数数据库（包括我打算使用的 MySQL [*编辑：但我不受约束*]）都有某种[列数或行大小限制](http://dev.mysql.com/doc/refman/5.6/en/column-count-limit.html)。由于我必须存储很多数字（并且必须计算更多），我会超过这个限制。
2.  必须添加新数字的情况并不少见。（添加一个图形需要更改表格设计。由于这些更改通常表现不佳，它们会在很长一段时间内阻止对表格的任何访问。）
3.  我还必须为每个数字存储附加信息，例如描述和单位（所有数字都是十进制数字，但有些可能是美元/欧元，而其他可能是百分比）。如果有任何变化，我必须确保 basic_figures 表、all_figures 视图和包含图形信息的表都正确更新。（这更像是一个数据规范化问题，而不是技术/实施问题。）

~~

因此我考虑使用这个表设计：

```
+---------+-------------+-------------+-------+
| year    | location_id | figure_id   | value |
+---------+-------------+-------------+-------+
|    2009 |           1 | goods_costs |   300 |
... 
```

这种类似实体属性值的设计可能是这三个问题的第一个解决方案。然而，它也有一个新的缺点：计算变得混乱。真是乱七八糟。

要构建与上述类似的视图，我必须使用这样的查询：

```
(SELECT * FROM basic_figures_eav)
UNION ALL
(SELECT a.year_id, a.location_id, "total_costs", a.value + b.value + c.value + d.value
  FROM basic_figures_eav a
  INNER JOIN basic_figures_eav b ON a.year_id = b.year_id AND a.location_id = b.location_id AND b.figure_id = "marketing_costs"
  INNER JOIN basic_figures_eav c ON a.year_id = c.year_id AND a.location_id = c.location_id AND c.figure_id = "warehouse_costs"
  INNER JOIN basic_figures_eav d ON a.year_id = d.year_id AND a.location_id = d.location_id AND d.figure_id = "administrative_costs"
 WHERE a.figure_id = "goods_costs"); 
```

这不是美女吗？请注意，这只是对 ONE 数字的查询。所有其他计算的数字（其中有很多我上面写的）也必须与这个查询联合。

~~

* * *

在对我的问题进行了长时间的解释之后，我现在以我的实际问题结束：

1.  您会建议哪种数据库设计？/ 你会使用上述两种设计中的一种吗？（如果是，是哪个，为什么？如果不是，为什么？）
2.  您对完全不同的方法有什么建议吗？（我会非常非常感谢！）
3.  毕竟数据库真的应该是进行计算的那个吗？将计算转移到应用程序逻辑并简单地存储结果是否更有意义？

*顺便说一句：我已经在 MySQL 论坛上问过类似的问题。但是，由于答案有点稀疏，而且这毕竟不仅仅是 MySQL 问题，所以我完全重写了我的问题并将其发布在这里。（所以这不是一个交叉帖子。）这是那里的线程链接： http://forums.mysql.com/read.php?125,560752,560752#msg- [560752](http://forums.mysql.com/read.php?125,560752,560752#msg-560752)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:26:08.430

问题**是**（至少在某种程度上）特定于 DBMS。

如果您可以考虑其他 DBMS，您可能想查看 PostgreSQL，它的[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)数据类型本质上是一个键/值对。

其缩小范围是，您会丢失数据类型检查，因为所有内容都作为字符串存储在地图中。

您针对的设计称为“实体属性值”。您可能还想找到其他替代方案。

**编辑**，这是一个如何使用它的例子：

## 表设置

```
CREATE TABLE basic_figures
(
  year_id         integer,
  location_id     integer,
  figures         hstore
);

insert into basic_figures (year_id, location_id, figures)
values
(1, 1, hstore ('marketing_costs => 200, goods_costs => 100, warehouse_costs => 400')),
(1, 2, hstore ('marketing_costs => 50, goods_costs => 75, warehouse_costs => 250')),
(1, 3, hstore ('adminstrative_costs => 100')); 
```

## 基本选择

```
select year_id, 
       location_id,
       to_number(figures -> 'marketing_costs', 'FM999999') as marketing_costs,
       to_number(figures -> 'goods_costs', 'FM999999') as goods_costs,
       to_number(figures -> 'warehouse_costs', 'FM999999') as warehouse_costs,
       to_number(figures -> 'adminstrative_costs', 'FM999999') as adminstrative_costs
from basic_figures bf; 
```

为它创建一个隐藏 hstore 值转换的视图可能更容易。这样做的缺点是，每次添加新的成本类型时都需要重新创建视图。

## 获取总数

要获取每个 year_id/location_id 的所有成本总和，您可以使用以下语句：

```
SELECT year_id, 
       location_id, 
       sum(to_number(value, '99999')) as total
FROM (
   SELECT year_id, 
          location_id, 
          (each(figures)).key,  
          (each(figures)).value
   FROM basic_figures
) AS data
GROUP BY year_id, location_id; 
```

```
年号 | location_id | 全部的
---------+-------------+------
       1 | 3 | 100
       1 | 2 | 375
       1 | 1 | 700

```

这可以加入到上面的查询中，但是如果您创建一个计算单个`hstore`列中所有键的总数的函数，它可能会更快更容易使用：

## 汇总总数的函数

```
create or replace function sum_hstore(figures hstore)
  returns bigint
as
$body$
declare 
   result bigint;
   figure_values text[];
begin
  result := 0;
  figure_values := avals(figures);
  for i in 1..array_length(figure_values, 1) loop
     result := result + to_number(figure_values[i], '999999');
  end loop;
  return result;
end;
$body$
language plpgsql; 
```

该功能可以很容易地在第一个选择中使用：

```
select bf.year_id, 
       bf.location_id,
       to_number(bf.figures -> 'marketing_costs', '99999999') as marketing_costs,
       to_number(bf.figures -> 'goods_costs', '99999999') as goods_costs,
       to_number(bf.figures -> 'warehouse_costs', '99999999') as warehouse_costs,
       to_number(bf.figures -> 'adminstrative_costs', '99999999') as adminstrative_costs,
       sum_hstore(bf.figures) as total
from basic_figures bf; 
```

## 自动视图创建

以下 PL/pgSQL 块可用于（重新）创建一个视图，该视图包含一列对应于图形列中的每个键以及基于上述 sum_hstore 函数的总计：

```
do
$body$
  declare
     create_sql text;
     types record;
  begin
     create_sql := 'create or replace view extended_figures as select year_id, location_id ';

     for types in SELECT distinct (each(figures)).key as type_name FROM basic_figures loop
        create_sql := create_sql || ', to_number(figures -> '''||types.type_name||''', ''9999999'') as '||types.type_name;
     end loop;
     create_sql := create_sql ||', sum_hstore(figures) as total from basic_figures';
     execute create_sql;
  end;
$body$
language plpgsql; 
```

运行该功能后，您可以简单地执行以下操作：

从extended_figures中选择*

并且您将获得与不同成本类型一样多的列。

请注意，如果 hstore 中的值实际上是数字，则根本没有错误检查。这可以通过触发器来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:53:44.957

这是一种无需旋转即可“非规范化”（旋转）EAV 表的方法。请注意左 JOIN 和合并，这会导致不存在的行显示为“零成本”。注意：我必须将字符串文字的引用替换为单引号。

```
CREATE TABLE basic_figures_eav
        ( year_id INTEGER
        , location_id INTEGER
        , figure_id varchar
        , value INTEGER
        );

INSERT INTO basic_figures_eav ( year_id , location_id , figure_id , value ) VALUES
        (1,1,'goods_costs', 100)
        , (1,1,'marketing_costs', 200)
        , (1,1,'warehouse_costs', 400)
        , (1,1,'administrative_costs', 800)
        , (1,2,'goods_costs', 100)
        , (1,2,'marketing_costs', 200)
        , (1,2,'warehouse_costs', 400)
        , (1,3,'administrative_costs', 800)
        ;

SELECT x.year_id, x.location_id
        , COALESCE (a.value,0) AS goods_costs
        , COALESCE (b.value,0) AS marketing_costs
        , COALESCE (c.value,0) AS warehouse_costs
        , COALESCE (d.value,0) AS administrative_costs
        --
        , COALESCE (a.value,0)
        + COALESCE (b.value,0)
        + COALESCE (c.value,0)
        + COALESCE (d.value,0)
                               AS total_costs
        -- need this to get all the {year_id,location_id} combinations
        -- that have at least one tuple in the EAV table
        FROM (
                SELECT DISTINCT year_id, location_id
                FROM basic_figures_eav
                -- WHERE <selection of wanted observations>
                ) AS x
LEFT JOIN basic_figures_eav a ON a.year_id = x.year_id AND a.location_id = x.location_id AND a.figure_id = 'goods_costs'
LEFT JOIN basic_figures_eav b ON b.year_id = x.year_id AND b.location_id = x.location_id AND b.figure_id = 'marketing_costs'
LEFT JOIN basic_figures_eav c ON c.year_id = x.year_id AND c.location_id = x.location_id AND c.figure_id = 'warehouse_costs'
LEFT JOIN basic_figures_eav d ON d.year_id = x.year_id AND d.location_id = x.location_id AND d.figure_id = 'administrative_costs'
        ; 
```

结果：

```
CREATE TABLE
INSERT 0 8
 year_id | location_id | goods_costs | marketing_costs | warehouse_costs | administrative_costs | total_costs 
---------+-------------+-------------+-----------------+-----------------+----------------------+-------------
       1 |           3 |           0 |               0 |               0 |                  800 |         800
       1 |           2 |         100 |             200 |             400 |                    0 |         700
       1 |           1 |         100 |             200 |             400 |                  800 |        1500
(3 rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T19:46:04.280

我只想指出，您查询的后半部分是不必要的复杂。你可以做：

```
(SELECT a.year_id, a.location_id, "total_costs", 
        sum(a.value)
 FROM basic_figures_eav a
 where a.figure_id in ('marketing_costs', 'warehouse_costs', 'administrative_costs',
                       'goods_costs')
) 
```

尽管这使用聚合，在 year_id、location_id 和 figure_id 上使用复合索引，但性能应该相似。

至于您的其余问题，数据库限制列数存在问题。我建议您将基本数据放在具有自动递增主键的表中。然后，创建由相同主键链接的汇总表。

在许多环境中，您可以每天或每晚重新创建一次汇总表。如果您需要实时信息，您可以使用存储过程/触发器来更新数据。也就是说，当更新或插入数据时，可以在汇总表中对其进行修改。

此外，我试图找出 SQL Server 中的计算/计算列是否计入表中的最大列数 (1,024)。我找不到任何确定的东西。这很容易测试，但我现在不在数据库附近。

# templates - Phonegap、Cordova、xCode 4.4 和 Mountain Lion

> ID：11709156
> 
> 赞同：5
> 
> 时间：2012-07-29T12:12:52.560
> 
> 标签：templates, cordova, xcode4, cordova-2.0.0

昨天我清理了我的硬盘驱动器并将我的 OSX 更新为 Mountain Lion。我安装了 xCode 4.4，之后，我下载并安装了 PhoneGap 2.0。

问题是我无法使用 Cordova Project 的模板创建项目......就像我以前通常做的那样......

有谁知道问题出在哪里？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:22:20.230

阅读本指南

[http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

我相信在PhoneGap 2.0 中创建项目的模板方法发生了变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T12:19:01.887

检查本教程，因为官方教程已过时 [http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from -下载到 ios-app-store/](http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from-download-to-ios-app-store/)

# internet-explorer-7 - IE7 溢出：自动错误

> ID：11709159
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:13:51.940
> 
> 标签：internet-explorer-7, overflow

有谁知道IE7 中[http://jsfiddle.net/jDNFU/的问题出在哪里？](http://jsfiddle.net/jDNFU/)我已经尝试了我能做的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:27:31.067

你不能用这样的东西吗？你想做什么？它需要看起来像什么？

```
<ul id="mytest">
    <li><input type="text" value="" name="test1" /></li>
    <li><input type="text" value="" name="test2" /></li>
    <li><input type="text" value="" name="test3" /></li>
    <li><input type="text" value="" name="test4" /></li>
    <li><input type="text" value="" name="test5" /></li>
    <li><input type="text" value="" name="test6" /></li>
</ul>

#mytest {list-style:none; width:254px; max-height:328px; overflow-y:auto; display:block;}
#mytest li {position:relative; display:inline; zoom:1; height:25px;}
#mytest input {position:absolute;} 
```

**编辑：** 由于您自己修复了它，这就是我将它切片的方式。因为您不需要调整输入的大小，所以您可以只拍摄完整的背景图像，不是吗？

```
.clr { clear: both; }
#myform { width: 800px; }
#myform fieldset { display: block; float: left; margin: 0; padding: 0; border: medium none; }
#myform input.txt { display: block; width: 200px; border: medium none; background: transparent url('bg_input.jpg') no-repeat scroll 0 0; height: 30px; text-indent: 2px; }
#myform label { float: left; width: 120px; height: 30px; }
#myform textarea { display: block; border: medium none; height: 180px; background: transparent url('bg_textarea_large.jpg') no-repeat scroll 0 0 !important; resize: none; }
#myform .large { width: 378px; background: transparent url('bg_input_large.jpg') no-repeat scroll 0 0; }
#myform .button {  }

#myform fieldset.addfriends { width: 300px; }
#myform fieldset.personal { width: 500px; }

    <form id="myform">
        <fieldset class="addfriends">
            <p>Enter at least 3 email addresses of your friends</p>
            <input type="text" class="txt" />
            <br />
            <input type="text" class="txt" />
            <br />
            <input type="text" class="txt" />
        </fieldset>
        <fieldset class="personal">
            <label for="name">Your name:</label><input type="text" id="name" class="txt" />
            <br />
            <label for="email">Your e-mail:</label><input type="text" id="email" class="txt" />
            <br />
            <label for="subject">Subject:</label><input type="text" id="subject" class="txt large" value="You'll love it!" />
            <br />
            <label for="message">Message:</label><textarea id="message" class="large"></textarea>
            <br />
            <input type="submit" class="button" value="Send" />
        </fieldset>
        <div class="clr"></div>
    </form> 
```

# php - 如何美化phing的输出？

> ID：11709160
> 
> 赞同：1
> 
> 时间：2012-07-29T12:14:00.527
> 
> 标签：php, phing, pre-commit-hook

[Phing](http://www.phing.info/trac/)，默认情况下，甚至任何内置记录器（phing.listener.NoBannerLogger、phing.listener.AnsiColorLogger、phing.listener.XmlLogger 和 phing.listener.HtmlColorLogger）都有相当详细的输出。

我的用例是使用 Phing 作为预提交挂钩来运行测试。因此，我不关心日志 phing 中可能提供给我的所有信息。我只是将它用作运行测试的多平台工具。

例子：

```
Buildfile: /private/var/workspace/www/me_com/build.xml

SBKSWWW > main:

   [delete] Deleting /private/var/workspace/www/me_com/temp/pre-commit-hook/changed_files
   [delete] Deleting directory /private/var/workspace/www/me_com/temp/pre-commit-hook
    [mkdir] Created dir: /private/var/workspace/www/me_com/temp/pre-commit-hook
  [phplint] Parse error: parse error in ./www/MyTest.php on line 2
[phpcodesniffer] 2 files where checked
[phpcodesniffer] No syntax errors detected

BUILD FINISHED

Total time: 0.3430 seconds 
```

其中许多行对于我的用例来说确实是多余且无用的。实际上，我什至没有按原意运行“构建”。

我想让 phing 日志看起来像这样：

```
 ✔ Commited code matches coding standards
 ✘ Commited code has syntax errors!
   Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE in MyTest.php on line 2 
```

*如果您认为我出于我的目的使用了不好的工具，也请告诉我，我很高兴知道还有别的东西。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:07:47.837

您可以尝试使用您自己的样式表`phing.listener.XmlLogger`并通过管道传输它。`xsltproc`

`build.xml`给定一个仅对 PHP 进行 lints的基本文件：

```
<?xml version="1.0" ?>
<project name="Example" basedir=".">

    <target name="lint" description="PHP syntax check">
        <phplint>
            <fileset dir="src">
                <include name="**/*.php"/>
            </fileset>
        </phplint>
    </target>

</project> 
```

加上`parse.xsl`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text"
        omit-xml-declaration="yes"/>

    <xsl:template match="/build">
        <xsl:variable name="newline"><xsl:text>
</xsl:text></xsl:variable>

        <xsl:for-each select="target">
            <xsl:text>Task: </xsl:text>
            <xsl:value-of select="concat(@name, $newline)" />

            <xsl:choose>
                <xsl:when test="task/message[@priority = 'error']">
                    <xsl:value-of select="concat(task/message[@priority = 'error'], $newline)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:text>No errors</xsl:text>
                    <xsl:value-of select="$newline" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

调用`phing -logger phing.listener.XmlLogger lint | xsltproc parse.xsl -`会给你一些干净的东西，比如：

```
Task: lint
Fatal error: Only variables can be passed by reference in Request.class.php on line 128 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-03T20:46:56.480

从 Phing 2.11.0 开始，您将使用[`phing.listener.SilentLogger`](https://www.phing.info/guide/hlhtml/#SilentLogger)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-29T12:17:20.110

你在第 2 行 mytest 上有一个语法错误

它基本上是在传递不适当的代码或没有像 {} 那样正确关闭时出现

你能发布 mytest 的第 2 行吗

# java - Java条件程序

> ID：11709166
> 
> 赞同：-3
> 
> 时间：2012-07-29T12:15:38.917
> 
> 标签：java

我正在从网站上进行 Java 编程练习。我必须使用数组显示这个输出。

```
Enter the number of students: 3
Enter the grade for student 1: 55
Enter the grade for student 2: 108
Invalid grade, try again...
Enter the grade for student 2: 56
Enter the grade for student 3: 57
The average is 56.0 
```

到目前为止，这是我的源代码。它显示结果但无法正常工作。第一个学生需要学生人数和年级。但是然后它停止了，如果我按任何数字并按 Enter，它会要求下一个年级等等。这样它在最后打印平均值。如果我输入不允许的输入，它会捕捉到它。这段代码有什么问题。

```
package array;

import java.util.Scanner;

public class GradesAverage {

    public static void main(String[] args) {

        int numStudents, sum=0;
        int[] grades;

        Scanner in = new Scanner(System.in);

        System.out.print("Enter number of students : ");
        numStudents = in.nextInt();

        grades = new int[numStudents];
      //System.out.println(grades.length);

        for (int i = 0; i < numStudents; i++) {
              System.out.print("Enter grade of student "+i+" :");
              grades[i] = Integer.parseInt(in.next());
              if(grades[i]>100 || grades[i]<0)
                {
                  System.out.println("It is not a valid number!");
                  i--;
                  continue;
                }

              //grades[i] = Integer.parseInt(in.next());
              sum+=grades[i];
        }

        System.out.print("Average grades are: "+sum/numStudents);

        in.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:20:03.193

而不是使用你的临时变量，创建一个像这样的变量：

`int grade = in.nextInt()`

然后检查`if(grade > 100 || grade < 0) // error message`

不要使用`in.next()`两次，因为它会要求用户输入另一个号码。

# asp.net-mvc-3 - 将模型从视图传递到控制器

> ID：11709167
> 
> 赞同：0
> 
> 时间：2012-07-29T12:15:41.983
> 
> 标签：asp.net-mvc-3

在学习 Jon Galloways [MVC 音乐商店](http://mvcmusicstore.codeplex.com/)示例之后。我只是不明白创建视图如何将模型传递给控制器​​，我们可以从动作中的参数中看到它`Create(Movie movie).`谢谢。

```
 [HttpPost]
        public ActionResult Create(Movie movie)
        {
            if (ModelState.IsValid)
            {
                db.Movies.Add(movie);//Where is the movie come from?
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(movie);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:19:57.187

通常，您不会将模型传递给控制器​​，而是在控制器中创建模型的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:30:27.400

在您发布的代码示例中，将通过模型绑定创建 Movie 模型。在此过程中，您的任何表单变量都将与操作中指定的对象匹配。

例如，价值

```
<input type="text" name="Title"/> 
```

将分配给电影的 Title 属性。

可以通过声明（Razor 语法）将视图与模型相关联

```
@model GallowaySample.Movie 
```

# java - 为什么即使使用 setSelected(true) 也没有选择 JRadioButton

> ID：11709169
> 
> 赞同：0
> 
> 时间：2012-07-29T12:15:52.790
> 
> 标签：java, swing

我只希望默认选择上述按钮之一，但 setSelected(true) 不起作用。当我运行以下程序时，没有选择任何 JRadoiButton

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
 import javax.swing.*;

public class RadioDemo implements ActionListener {

String buttonName;
JPanel radioPanel=new JPanel();
ButtonGroup group = new ButtonGroup();
Enumeration enl;        
    int result; 
ActionEvent e;
JRadioButton birdButton[];
int i;
Vector<JComponent> list;
Vector<String> listName;

    public RadioDemo(Vector<JComponent> list,Vector<String> listName,Enumeration en,Enumeration enl) 
{
    birdButton=new JRadioButton[list.size()];
        this.enl=enl;
        this.list=list;
        this.listName=listName;

          for(i=0;i<list.size()-1;i++)
        {
            buttonName=(String)enl.nextElement();
                birdButton[i] = new JRadioButton(buttonName);
            birdButton[i].setSelected(false);
                birdButton[i].setActionCommand(buttonName);                                 
            group.add(birdButton[i]);
            birdButton[i].addActionListener(this);                  
            radioPanel.add(birdButton[i]);
        }

            buttonName=(String)enl.nextElement();
                birdButton[i] = new JRadioButton(buttonName);
                birdButton[i].setSelected(true);
            birdButton[i].setActionCommand(buttonName);                                 
            group.add(birdButton[i]);
            birdButton[i].addActionListener(this);                

            radioPanel.add(birdButton[i]);
                      radioPanel.setLayout(new BoxLayout(radioPanel,BoxLayout.Y_AXIS));
                                //birdButton.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
              result = JOptionPane.showConfirmDialog(null, radioPanel, 
                                            "Please choose", JOptionPane.OK_CANCEL_OPTION);
        show();
    }

     /** Listens to the radio buttons. */
        public void actionPerformed(ActionEvent e)
        {     
            this.e=e;
        }

        public void show()
        {
             if (result == JOptionPane.OK_OPTION)
            {       i=0;
                while(!birdButton[i].isSelected())
                {
                    i++;    
                    System.out.println(i);
                }   
                //list.removeElementAt(i);
                //listName.removeElementAt(i);
             System.out.println(i);
             System.out.println(e.getActionCommand());
            }
        } 
```

我也尝试birdButton[0].setSelected(true); 出圈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:06:40.783

你还没有发布你如何调用你的构造函数，所以也许那里有一些东西。我稍微修改了你的代码，添加了一个`main`方法，它似乎工作正常。看看它：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Vector;

import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.SwingUtilities;

public class RadioDemo implements ActionListener {

    String buttonName;
    JPanel radioPanel = new JPanel();
    ButtonGroup group = new ButtonGroup();
    int result;
    JRadioButton birdButton[];
    Vector<String> listName;
    private JRadioButton selectedButton;

    public RadioDemo(Vector<String> listName) {
        birdButton = new JRadioButton[listName.size()];
        this.listName = listName;
        int i = 0;
        for (String buttonName : listName) {
            birdButton[i] = new JRadioButton(buttonName);
            if (i == 0) {
                birdButton[i].setSelected(true);
                selectedButton = birdButton[i];
            }
            birdButton[i].setActionCommand(buttonName);
            group.add(birdButton[i]);
            birdButton[i].addActionListener(this);
            radioPanel.add(birdButton[i]);
            i++;
        }

        radioPanel.setLayout(new BoxLayout(radioPanel, BoxLayout.Y_AXIS));
        // birdButton.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        result = JOptionPane.showConfirmDialog(null, radioPanel, "Please choose", JOptionPane.OK_CANCEL_OPTION);
        show();
    }

    /** Listens to the radio buttons. */
    @Override
    public void actionPerformed(ActionEvent e) {
        JRadioButton rb = (JRadioButton) e.getSource();
        System.err.println(rb.getText() + " is selected");
        selectedButton = rb;
    }

    public void show() {
        if (result == JOptionPane.OK_OPTION) {
            System.err.println(selectedButton.getText() + " is selected and approved");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Vector<String> buttonNames = new Vector<String>();
                buttonNames.add("Show");
                buttonNames.add("Something");
                buttonNames.add("Else");
                buttonNames.add("Beep");
                new RadioDemo(buttonNames);
            }
        });
    }
} 
```

# c# - 在asp中转换网址？

> ID：11709175
> 
> 赞同：0
> 
> 时间：2012-07-29T12:16:54.330
> 
> 标签：c#, asp.net

我有网络应用程序。在我页面的某处，我使用以下代码创建了一个`Hyperlink`.

```
<a href="<%= Eval("NavigateUrl") %>"> <%= Eval("text") %> </a> 
```

如您所见，此代码必须有效，但有一个小问题。的内容`NavigateUrl`是这样的 url。

```
"~/account/login.aspx" 
```

**我必须如何解析该 URL？**

***更新***：我必须说我不能更改`NavigateUrl`从 Xml-Datasource 加载的 cuz 值。我必须在 UI 中更改它，例如：

```
Eval( Resolveurl("NavigateUrl") ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T12:20:47.900

您可以尝试使用[Control.ResolveUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)。

通常，您将使用`Page.ResolveUrl`解析相对于当前页面`this.ResolveUrl`的路径，以及解析相对于当前控件（UserControl 或 Page）的路径。

在您的情况下，波浪号是相对于应用程序根的，所以两者都可以。

作为对您的评论的回应，您希望使用以下内容：

```
ResolveUrl( (string)Eval("NavigateUrl")) 
```

# php - 类别视图上的 getChildHtml

> ID：11709182
> 
> 赞同：0
> 
> 时间：2012-07-29T12:17:50.483
> 
> 标签：php, magento

我正在尝试在 Magento 商店的类别页面上的主要产品列表下方放置一个包含特色项目的自定义文件。

我编辑了 catalog.xml 以包括：

```
 <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
        <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
        ...
        </block>
        <block type="catalog/product" name="featuredcat" as="featuredcat" template="customphp/featured-cat.phtml"/>
    </block> 
```

featurescat.phtml 包含一个循环，用于查找选择了自定义属性（特色）的产品。这很好用，并且已经在边栏中。

然后我补充说：

```
echo $this->getChildHtml('featuredcat') 
```

在我的目录/类别/view.phtml 文件的底部。但没有渲染。我可以发誓这是正确的。谁能阐明我做错了什么？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:11:08.223

您提供的布局 xml 将`featuredcat`块直接附加到`product_list`块中。因此，您必须`getChildHtml`从内部`catalog/product/list.phtml`而不是从内部调用`catalog/category/view.phtml`。

因此，您可以`getChildHtml`如上所述将调用移动到正确的模板，也可以将`featuredcat`块向上移动一个级别：

```
<block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
    <block type="catalog/product" name="featuredcat" as="featuredcat" template="customphp/featured-cat.phtml"/>
    <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
    ...
    </block>
</block> 
```

或者你可以保持你的布局 xml 并使用 getChildChildHtml :) - 但我确信改变你的布局是更好的选择 -

```
<?php echo $this->getChildChildHtml('product_list', 'featuredcat') ?> 
```

# javascript - 使用jquery按索引定位孩子

> ID：11709186
> 
> 赞同：0
> 
> 时间：2012-07-29T12:19:05.187
> 
> 标签：javascript, jquery, css, jquery-selectors

每当修改单元格时，我都会尝试修改表格特定列的内容。该列是其中包含正在修改的单元格的列。

在特定行中查找正在修改的单元格的索引非常简单。我找到了表格行并将其编入索引以执行操作。

但现在我想使用该索引来修改列，包括触发单元格。

```
var childIndex = $this.closest('td').index(); // find index of trigger cell
var $allTableRows = $('tr'); // select all rows to index the particular cell
var aim = $allTableRows.children(childIndex); //search for target column here 
```

我在将**childIndex**传递给**row-child**标准时犯了一些错误。有人可以指出我的错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:25:55.017

我认为如果您使用以下内容，您将得到您想要的：

```
var targetColumnInAllRows = $('tr td:nth-child(' + (childIndex + 1) + ')'); 
```

请注意，虽然索引是从零开始的，但`nth-child`也是从一开始的。

# qtp - QTP，如何在更新后自动保存脚本和函数库

> ID：11709190
> 
> 赞同：1
> 
> 时间：2012-07-29T12:19:35.563
> 
> 标签：qtp, autosave

无论如何要为脚本制作快速测试专业（QTP）自动保存更新？

非常感谢您的帮助。

谢谢马奈萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:11:18.593

这不是解决您问题的方法，而是另一种方法。我个人不是 QTP 脚本编辑器的粉丝。我使用 Notepad++ 来编辑 qtp 脚本。它对 vb 有很好的语法支持，并且自动完成功能派上用场。我使用 NPP 中的备份功能，以防万一我想看看几个小时前我做了什么。

这种方法的缺点是我必须在脚本编辑器中关闭 *.qfl 文件并再次打开它，这会在调试时丢失检查点。

此外，如果您有任何版本控制软件，请使用它来存储您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-03T17:18:17.520

使用 VSCODE。它具有自动保存选项、通过插件进行代码高亮以及可靠的 git 集成。比 UFT 提供的要好得多。

# javascript - jQuery 将更改事件绑定到几个 DIV 中的所有子项，除了选中

> ID：11709191
> 
> 赞同：1
> 
> 时间：2012-07-29T12:19:44.143
> 
> 标签：javascript, jquery-selectors, jquery

我有一个包含多个表单元素的 3 个 DIV 的侦听器：

```
<div id="div-a">
  <input type="text" id="txt-a"/>
  <!-- more elements here -->
  ...
</div>
<div id="div-b">
  <input type="text" id="txt-b"/>
  <input type="text" id="txt-c"/>
  <!-- more elements here -->
  ...
</div>
<div id="div-c">
  <input type="text" id="txt-d"/>
  <input type="text" id="txt-e"/>
  <input type="text" id="txt-f"/>
  <!-- more elements here -->
  ...
</div> 
```

我将 3 个 DIV 的更改事件绑定如下：

```
$("#div-a, #div-b, #div-c").change(function(){
  // do something, except if the change happened to txt-b and txt-c
}) 
```

以上内容从它们各自的所有子元素中监听变化。它工作正常，但等式中还缺少一件事。txt-b 和 txt-c 更改事件不关我的事。因此，我不能将它们包含在更改事件侦听器正在执行的操作中。此外，3 DIV 下的每个元素都已经有自己的更改监听器，因此将监听器添加到每个元素的更改事件是最后的选择。

我需要听取三个 DIV 的子元素的变化，但有一些例外。当三个 DIV 的子元素发生变化时，我需要执行一个函数，除了 5 个输入类型。

到目前为止，我做了以下没有用的操作：

1.  我尝试分离三个 DIV 并添加了 :not() 选择器

    $("#div-b :not(#txt-b)").change(function(){ //... });

2.  使用 .not()

我想知道解决这个问题的最佳方法。如果您需要，我很乐意添加更多信息。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:21:53.350

您可以尝试检查目标的 id，然后忽略它们：

```
$("#div-a, #div-b, #div-c").change(function(e) {
    var target = e.target;
    if (target.id === "txt-b" || target.id === "txt-c") {
        return;
    }
    //Is not a txt-b or a txt-c
}) 
```

[http://jsfiddle.net/HGXDT/4/](http://jsfiddle.net/HGXDT/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:30:49.900

你可以用一个处理程序来做到这一点..

```
<div id="controls-wrapper">
   <!--Wrap all your controls and div's here   -->
</div> 
```

然后..

```
$('#controls-wrapper').delegate('input', 'change', function(e){
  if($(this).parent().is('#div-a')){
     //this input was in #div-a, do something
  }

 // and so on, as your case might need
}); 
```

注意：您也可以使用`.on()`代替`.delegate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:34:40.010

您可以使用`$(this)`变量来发挥自己的优势。

假设事件是由`input`标签产生的，你只需要检查

```
if(!$(this).parent().attr('id')=='div-b') 
```

如果只有 txt-b 和 txt-c 将在 div-b 内。

否则你可以去

```
if($(this).attr('id')!='div-b') && !$(this).attr('id')!='div-b')) 
```

不建议使用 not 选择器，但如果您想使用 :not 选择器本身，请尝试`$("div").children("input :not(#txt-b)").change(function(){ //... });`单独使用子元素，而不是父子元素的父子元素

# php - wordpress 插件 sql 设置

> ID：11709192
> 
> 赞同：0
> 
> 时间：2012-07-29T12:19:49.040
> 
> 标签：php, sql, wordpress

我已经为我的插件设置了四个额外的表，以使用我想要做的事情是取一个名字并为其分配一个 ID，然后使用这个数据来填充下拉菜单的名称和相同的类和位置我不确定如何正确地做到这一点，这是我到目前为止所拥有的。

```
$sql = "CREATE TABLE $tableName (
  recordID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(recordID),
  driverID int,
  driverName varchar(30),
  classID int,
  driverClass varchar(20),
  posID,
  driverPosition varchar(6),
  trackName varchar(30),
  raceDate date
);";

$sql = "CREATE TABLE $driverTableName (
  driverID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(driverID),
  driverName varchar(30)

);";

$sql = "CREATE TABLE $classTableName (
  classID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(classID),
  className varchar (20)

);";

$sql = "CREATE TABLE $posTableName (
  posID int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY(posID),
  posName varchar(6)

);"; 
```

底部的三个表将存储我想要填充下拉框以创建记录的数据，我不确定如何将它们链接到将存储该记录的顶部表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:52:47.740

这几乎是一个索引问题。如果您打算通过 Wordpress 提供的标准调用单独访问数据库，您至少应该使用[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)，因为它会节省一些编码时间。

剩下的就是一个 MySQL 问题。（假设您使用的是 MySQL）如何正确地将数据索引在一起，然后在数据进入时对其进行解析。

# magento - 允许空的 cms 页面内容

> ID：11709193
> 
> 赞同：6
> 
> 时间：2012-07-29T12:19:53.037
> 
> 标签：magento

在 magento 中使用 cms 页面时，我有时需要一个空的内容部分。大多数时候这是我的主页。但是 magento 迫使我在内容中添加一些内容，然后才能保存。

有没有办法让 magento 允许空的 cms 页面内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T14:08:32.550

您可以使用空的 div 或 span

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T16:07:15.997

该`Mage_Adminhtml_Block_Cms_Page_Edit_Tab_Content::_prepareForm()`方法调度[`adminhtml_cms_page_edit_tab_content_prepare_form`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Adminhtml/Block/Cms/Page/Edit/Tab/Content.php#L98)事件。您可以观察此事件，从传递给事件的表单对象中获取字段，并将其`required`属性更改为`false`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-12T16:37:28.610

这是一个快速而肮脏的修复，您应该真正覆盖管理类，这样您下次升级时就不会丢失更改。

无论如何，在 file`app/code/core/Mage/Adminhtml/Block/Cms/Page/Edit/Tab/Content.php`的`function _prepareForm()`第 82 行中，更改：

```
$contentField = $fieldset->addField('content', 'editor', array(
    'name'      => 'content',
    'style'     => 'height:36em;',
    'required'  => true,
    'disabled'  => $isElementDisabled,
    'config'    => $wysiwygConfig
)); 
```

至

```
 $contentField = $fieldset->addField('content', 'editor', array(
        'name'      => 'content',
        'style'     => 'height:36em;',
        'required'  => false,
        'disabled'  => $isElementDisabled,
        'config'    => $wysiwygConfig
    )); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-30T16:08:15.767

在您的空元素中添加`<div>&zwj;</div>`以阻止 magento cms 删除它们

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-29T14:01:53.810

它不是特别优雅，但您可以`&nbsp;`通过 CSS 输入和/或隐藏内容

# c++ - 错误 C2663：重载对“this”指针没有合法转换

> ID：11709205
> 
> 赞同：2
> 
> 时间：2012-07-29T12:20:56.437
> 
> 标签：c++, compiler-errors

请帮我解决这个错误

代码：

```
u16 ip_defragment(){
    u16 result;
    fragip_set::iterator i;
    IP_FRAGMENTED new_defrag;
    IP* pcurpack = (IP*) malloc(cur.len);
    memcpy(pcurpack, cur.data, cur.len);
    new_defrag.saddr = cur.saddr;
    new_defrag.daddr = cur.daddr;
    new_defrag.protocol = cur.ip.ppack->protocol;
    new_defrag.id = i2i(cur.ip.ppack->id);

    i = ip_frags.find(new_defrag);

    if(i != ip_frags.end()){
            i->packets.insert(pcurpack);
            const_cast<u16&>(i->cur_len) += cur.ip.len - cur.ip.hlen; 
            const_cast<u32&>(i->last_time) = time();
            if(!(cur.ip.bmore_fr) && (i->tot_len == 0)){
            const_cast<u16&>(i->tot_len) = cur.ip.fr_offs + cur.ip.len;
            }
            if(i->cur_len == i->tot_len){
                for(set<IP*>::iterator k = i->packets.begin(); k != i->packets.end(); k++){
                    // must copy to another buffer
                    if(i2i((*k)->frag_off) & IP_OFFMASK){
                        memcpy(ip_defrag_buffer, *k, (*k)->ihl<<2);
                    } else {
                        memcpy(ip_defrag_buffer + (i2i((*k)->frag_off) & IP_OFFMASK) * 8, 
                            *k + ((*k)->ihl<<2), (i2i((*k)->tot_len))-((*k)->ihl<<2));
                    }
                }
                IP* defr_ip = (IP*) &ip_defrag_buffer;
                defr_ip->tot_len = i2i(i->tot_len);
                defr_ip->frag_off = 0;
                result = i->tot_len;
                ip_frags.erase(i);
                return result;
            }
            return 0;
    }

    if(!(cur.ip.bmore_fr)){
        new_defrag.tot_len = cur.ip.fr_offs + cur.len;
    } else {
        new_defrag.tot_len = 0;
    }
    new_defrag.cur_len = cur.ip.len; // with header size
    new_defrag.last_time = time();
    i = ip_frags.insert(new_defrag).first;
    if(i != ip_frags.end())
        i->packets.insert(pcurpack);

    return 0;
} 
```

编译项目和查看只有2个类似的错误

第 15 行：`i->packets.insert(pcurpack);`

结束行：`i->packets.insert(pcurpack);`

2 行错误：错误 C2663：'std::_Tree<_Traits>::insert'：4 个重载对 'this' 指针没有合法转换

```
IntelliSense: no instance of overloaded function "std::set<_Kty, _Pr, _Alloc>::insert [with _Kty=IP *, _Pr=std::less<IP *>, _Alloc=std::allocator<IP *>]" matches the argument list and object (the object has type qualifiers that prevent a match) 
```

请帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-11T04:33:24.617

在将 std::set 传递给 lambda 表达式时，我遇到了完全相同的错误：

```
C2663 'std::_Tree<std::_Tset_traits<_Kty,_Pr,_Alloc,false>>::insert': 5 overloads have no legal conversion for 'this' pointer 
```

lambda 表达式原型是：

```
[se1, ele1](auto val) {
    /* here I was editing se1 set, but above se1 is passed value type */
} 
```

我已更改为：

```
[&se1, ele1](auto val) {
    /* now since se1 set is sent as reference type above, it is good to edit
       changes stays as I expect it to be
    */
} 
```

现在编译成功。

我使用了 count_if 函数，它为 eac 元素调用 lamda 表达式，因此编译器知道修改应该保留在 set se1 中，这是完全合乎逻辑的。

如果您希望原始设置保持不变，请发送一份副本。

# ios - ios - 如何制作内容可滚动和重用样式的屏幕？

> ID：11709206
> 
> 赞同：0
> 
> 时间：2012-07-29T12:21:03.083
> 
> 标签：ios, ios5

我正在构建一个包含教程文章的屏幕，并且显然会比一个屏幕更长。这是我正在构建的屏幕截图：

![在此处输入图像描述](../Images/d556bba91f47c3d5ef46904cb2900606.png)

这是我构建的第一个这样的页面，所以我不确定如何启用滚动。到目前为止，我只是手动将文本输入到标签中，并且必须记住我用于标题的蓝色阴影，但在这种情况下，这感觉像是一种非常错误的方法。

如何让页面滚动以便我可以添加更多标签，以及如何为标签和标题创建通用样式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:29:12.387

您可以将您的文章创建为带有 CSS 格式的 HTML，然后将包含它的视图设为`UIWebView`.

例子：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Layout" ofType:@"html"];
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]]; 
```

# xcode - XCode 4.4 Auto @Synthesize 在 XCode 4.3 项目上失败

> ID：11709210
> 
> 赞同：4
> 
> 时间：2012-07-29T12:21:53.507
> 
> 标签：xcode, synthesize

就这么简单。

奔跑的狮子。

1.  我刚刚升级到 XCode 4.4
2.  加载了我最近的 XCode 4.3 项目文件
3.  注释掉了@synthesize 行代码
4.  并且错误比比皆是。:(

已验证的编译器设置为“LLVM 4.0”。

然后我做了同样的测试，但在 XCode 4.4 中创建了一个新项目，瞧！Auto @synthesize 在 4.4 项目中工作。

Auto @synthesize似乎也适用于*添加*到代码中的*新属性。*但是现有的旧版本会产生错误。

还有人经历过这个吗？还有什么我应该检查的吗？

我真的希望自动生成功能能够正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T21:26:37.473

错误不是您声明属性的方式，而是您使用它的方式。

默认情况下，自动合成的属性会创建一个带有**前导下划线**的后备存储。

所以在你的代码中，当你有一个属性声明为：

```
@property (nonatomic, strong) UILabel *sectorLabel; 
```

然后你自动合成——编译器会自动为你生成这样的东西：

```
@synthesize sectorLabel = _sectorLabel; 
```

现在您可以通过属性访问它：

```
self.sectorLabel; 
```

或者，您可以通过以下方式直接访问后备存储：

```
_sectorLabel; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T21:06:29.680

解决了！

所以这就是我所做的。

**视图控制器.h**

```
@interface ViewController : UIViewController
// Public:

@property (nonatomic, strong) UILabel *sectorLabel;

@end 
```

**视图控制器.m**

```
@implementation ViewController

//@synthesize sectorLabel; 
```

然后弹出这个错误。

> ViewController.m:48:2：使用未声明的标识符“sectorLabel”；你是说'_sectorLabel'吗？

它解决了我将代码更改为的那一刻：

```
self.sectorLabel 
```

XCode 4.3 编译并运行良好，无需拥有“自我”。关键词。但 XCode 4.4 似乎对此更加严格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:35:58.770

接受答案的问题是您只是通过添加 self.property 更改了代码的行为。

访问 ivar 与属性是两件不同的事情。正确的答案是通过添加下划线来更改代码以正确使用 ivar。

这与对 xcode 的默认属性合成的更改无关紧要。此外，在大多数风格指南中，您会读到 Apple 不鼓励使用 _ivar 名称，所以我猜那是在窗外。

在我的代码中，我只使用 self. 当我打算通过属性获取器和设置器访问时。不为此行为更改我现有的代码是浪费时间。

# ruby-on-rails - 渲染部分时如何发送实例变量

> ID：11709211
> 
> 赞同：0
> 
> 时间：2012-07-29T12:21:55.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, rendering

如果我的模型无效，我想渲染动作。

`render "book_page"`

[https://gist.github.com/f7259eb79d1f2c951036](https://gist.github.com/f7259eb79d1f2c951036)

但是现在`@prices_per_night`，`@number_of_nights`当我单击提交按钮时为零。如何防止这种情况？

我试图将此表单移动到部分，但它现在发生了，因为我不能只渲染部分。还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:48:14.803

Using`render`不会*使*Rails 调用`book_page`控制器中的相关方法 , 。它直接进行到`book_page.html.erb`，在这一点上，没有方法设置您的实例变量，因此它们出现`nil`。

# msmq - 如何在不重新启动发布者的情况下取消订阅 NServiceBus 中的队列？

> ID：11709214
> 
> 赞同：0
> 
> 时间：2012-07-29T12:22:34.057
> 
> 标签：msmq, nservicebus, publish-subscribe

好的，如果我的理解/术语有点奇怪，请原谅我 - 我仍在掌握 NSB 和 MSMQ 之间的交互。

今天早些时候，我不小心使用生产配置文件在我的工作站上启动了我们的订阅者 Web 应用程序。这意味着我的工作站在我们的生产发布者应用程序中注册了自己。我现在不知道如何让发布者停止向我的工作站发布消息，除非重新启动发布者服务——这会很糟糕，因为它是一个生产系统。

查看发布者主机系统上的队列管理器，我可以在计算机管理 -> 服务和应用程序 -> 消息队列 -> 传出队列下看到专用队列：

```
DIRECT=OS:DYLAN_PC\private$\DylanApplicationInputQueue 
```

但我看不到任何删除队列或删除订阅的机制。即使替换了本地订阅者应用程序的配置，当我现在启动本地订阅者时，来自我们生产环境的消息也出现在队列中。这使得做任何有用的工作有点棘手。任何指向相关文档位的指针将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:37:50.623

以前我自己没有处理过 NServiceBus，但是一些对文档的挖掘表明，从客户端配置中删除订阅的原因是无关紧要的，因为你已经订阅了，所以发布者只是在你转身的那一刻发送东西又起来了！

根据您的设置，两个选项似乎可能有效：

1.  返回发布者配置，尽早添加对 Bus.Unsubscribe 的调用。然后运行您的客户端一次，让它取消订阅，然后您可以返回使用正确的本地配置。
2.  从实际存储的任何地方删除队列订阅，我认为它与队列本身是分开的。如果您使用的是 SQL Server 2008，[nservicebus 插入后是否删除订阅记录？](https://stackoverflow.com/questions/2783872/nservicebus-deleting-subscription-record-after-inserting-it)可能会有所帮助（好吧，做他们不想发生的事情，即取消订阅）。这可能有点麻烦，具体取决于 NServiceBus 在数据库中的依赖内容，以及它重新读取的频率与假设它的缓存是好的但是。

# sql-server-2005 - 在 Sql Server 2005 的 CLR 方法中运行 exe

> ID：11709216
> 
> 赞同：2
> 
> 时间：2012-07-29T12:22:42.787
> 
> 标签：sql-server-2005, clr

我为 sql server 2005 编写了一个 CLR 方法并试图通过它运行一个 exe。

这是代码：

```
[Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString Function1()
    {
        System.Diagnostics.Process.Start("notepad.exe");
        return new SqlString("Some string ");
    } 
```

部署后，当我尝试在 sql server 2005 中运行此 CLR 方法时，它给了我以下错误：

```
 Msg 6522, Level 16, State 2, Line 1
    A .NET Framework error occurred during execution of user defined routine or aggregate 'Function1': 
    System.Security.SecurityException: Request failed.
    System.Security.SecurityException: 
       at UserDefinedFunctions.Function1() 
```

是否可以运行这样的exe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T15:07:40.777

我知道这个帖子太晚了，但万一其他人遇到这个，这就是我找到的答案：

我尝试的第一件事是 CLR 方法（设置公共语言运行时）= true，但这并没有解决问题。阅读更多内容并仔细查看错误，我意识到 SQL 无法访问机器上的某些注册表信息，因为运行 SQL 服务器的 ID 无权访问密钥库。

所以我将我的用户添加到管理员组并修复了它。花了三个小时才弄清楚这一点，所以希望这会在将来节省一些时间。

# javascript - 将编辑器与 Active Admin 一起使用

> ID：11709221
> 
> 赞同：5
> 
> 时间：2012-07-29T12:24:13.193
> 
> 标签：javascript, ruby-on-rails, activeadmin, formtastic, redactor

[Redactor](http://redactorjs.com/)看起来像一个很棒的富文本编辑器。我想在我的 Active Admin CMS 的特定文本区域中使用编辑器。

我发现[了这个将 redactor 与 rails 集成的 gem](https://github.com/SammyLin/redactor-rails)，所以我尝试设置它：

**宝石文件：**

```
gem 'redactor-rails' 
```

**壳：**

```
$ bundle install 
```

**配置/redactor.yml**

```
lang: 'en'
autoresize: true 
```

**配置/初始化程序/active_admin.rb**

```
config.register_stylesheet 'redactor-rails.css'
config.register_javascript 'redactor-rails.js' 
```

**我的活动管理资源配置中的输入**

```
f.input :contents, input_html: { id: "redactor_here", class: "redactor" } 
```

我检查过：

*   编辑器 js/css 文件已正确包含（在浏览器中）。
*   正在我的文本区域上设置编辑器类。

在 redactor-rails 的自述文件中，[它说](https://github.com/SammyLin/redactor-rails/#initialize-redactor)在创建 textarea 之后，您需要调用`redactor`helper 来初始化 redactor。但是，该`redactor`助手不在活动管理表单的范围内。那么我在哪里可以调用它？

目前，浏览器中绝对没有发生任何事情。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:52:57.277

哈勃的指示对我来说不太奏效，但这是有效的……按照 gem 页面上的指示，然后是 Active Admin：

在 active_admin.js 中，添加

```
//= require redactor-rails 
```

在 active_admin.css.scss 中，添加

```
@import "redactor-rails"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:52:51.527

而不是在 active_admin.rb 中注册样式表和 js 你应该尝试

在**app/assets/javascripts/active_admin.js**

```
//= require redactor
//= require redactor-rails/config 
```

并在**app/assets/stylesheets/active_admin.css.scss**

```
@import "redactor"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T16:31:22.560

在 active_admin.js 中，添加

```
//= require redactor-rails 
```

在 active_admin.css.scss 中，将其添加到文件顶部

```
/*
  *= require redactor-rails
*/ 
```

这对我有用:) [参考这个](https://github.com/SammyLin/redactor-rails/issues/11#issuecomment-7830006)

# git - git自动提交的scipt：奇怪的路径警告

> ID：11709222
> 
> 赞同：0
> 
> 时间：2012-07-29T12:24:56.670
> 
> 标签：git, bash

我想监控某些文件/目录并将任何更改提交到 git repo 以便拥有备份历史记录。

组件是：

*   一个 git 存储库，配置了指向我的主目录的变量“worktree”
*   一个文本文件，其中包含要监视的所有文件/目录的列表
*   带有 git 命令的 bash 脚本，用于添加和提交更改
*   运行脚本的 cronjob

自动提交.sh：

```
#!/bin/bash

set -o nounset
set -o errexit

for path in `cat list.txt`; do
    git add "$path"
    git commit -am "autocommit"
done 
```

列表.txt：

```
.
~/bcg/credentials.txt 
```

如果我运行 ./autocommit.sh 并修改了 credentials.txt，我会得到以下输出

```
~/bcg/credentials.txt
fatal: pathspec 'bcg/versioned/~/bcg/credentials.txt' did not match any files 
```

但是，更改已提交。这个“致命”警告是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:44:59.773

也许将 cronjob 更改为：

```
22 *  * * *     cd ~/bcg && versioned/autocommit.sh 2>> err.log 
```

并从 list.txt 中删除 ~/bcg

# opengl - 在 OS X 下，glDrawBuffers 用于多个渲染目标

> ID：11709223
> 
> 赞同：5
> 
> 时间：2012-07-29T12:25:03.807
> 
> 标签：opengl

我的多渲染目标代码出现了一些非常奇怪的行为，并且开始怀疑我是否严重误解了它应该工作的方式。

我在 2.1 版本的上下文中运行。这是我正在执行的渲染设置代码的核心部分：

```
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, m_fbo);
GLenum buffers[] = { GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT };
glDrawBuffers(2,buffers); 
```

然后我的着色器将颜色数据写入`gl_FragColor[0]`和`glFragColor[1]`。

[这与此问题](https://stackoverflow.com/questions/7207422/setting-up-opengl-multiple-render-targets)中讨论的情况基本相同。但是，当我在 OS X 上运行它时，我的着色器只输出到第一个渲染目标。OpenGL 不会抛出错误，无论是在构建带有两个颜色附件的 FBO 期间，还是在渲染过程中的任何时候。

当我通过 OSX 的“OpenGL Profiler”“跟踪”视图检查发生的情况时，它显示此代码执行的驱动程序方面为：

```
2.86 µs glBindFramebufferEXT(GL_FRAMEBUFFER, 1);
3.48 µs glDrawBuffersARB(2, {GL_COLOR_ATTACHMENT0, GL_ZERO}); 
```

这也许可以解释为什么没有写入任何内容`GL_COLOR_ATTACHMENT1`；`GL_ZERO`它似乎在调用中被替换为`glDrawBuffers`!

`buffers[]`如果我将数组中缓冲区的顺序切换为`GL_COLOR_ATTACHMENT1_EXT`first 然后`GL_COLOR_ATTACHMENT0_EXT`，那么我的着色器只写入`GL_COLOR_ATTACHMENT1_EXT`，并且`GL_COLOR_ATTACHMENT0_EXT`似乎被替换为`GL_ZERO`。

这就是它变得奇怪的地方。如果我使用代码：

```
GLenum buffers[] = { GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT };
glDrawBuffers(3, buffers); 
```

然后统计视图显示：

```
0.46 µs glDrawBuffersARB(3, {GL_COLOR_ATTACHMENT0, GL_ZERO, GL_COLOR_ATTACHMENT1}); 
```

OpenGL 仍然没有抛出任何错误，并且我的着色器成功地将数据写入两个颜色附件，即使它正在写入`gl_FragColor[0]`和`gl_FragColor[1]`.

因此，即使我的程序现在正在运行，但在我看来这不应该起作用。我很想知道我能把它推到多远，希望把 OpenGL 推向最终的失败是有教育意义的。所以我尝试用这段代码编译：

```
GLenum buffers[] = { GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT };
glDrawBuffers(4, buffers); 
```

运行它时，OpenGL Profiler“跟踪”视图将其显示为正在执行：

```
4.26 µs glDrawBuffersARB(4, {GL_COLOR_ATTACHMENT0, GL_ZERO, GL_COLOR_ATTACHMENT1, GL_ZERO}); 
```

现在 OpenGL 到处抛出“无效的帧缓冲操作”，但我的着色器仍然成功地将颜色数据写入两个颜色连接点。

这一切对任何人都有意义吗？我是否灾难性地误解了`glDrawBuffers`应该调用的方式？

根据 OpenGL Profiler 的“资源”视图，我的帧缓冲区（编号 1）看起来不错；正如预期的那样，它确实附有两个颜色附件。

```
Attached Objects:
{
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT0
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_TEXTURE
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME_EXT: 1
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE_EXT: 0
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT1
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_TEXTURE
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME_EXT: 2
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE_EXT: 0
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT2
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT3
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT4
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT5
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT6
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_COLOR_ATTACHMENT7
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_DEPTH_ATTACHMENT
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_TEXTURE
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME_EXT: 3
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_EXT: 0
    GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE_EXT: 0
  }
  {
    GL_FRAMEBUFFER_ATTACHMENT: GL_STENCIL_ATTACHMENT
    GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE_EXT: GL_NONE
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T12:35:02.150

...在我为此苦苦挣扎了将近一周之后，我终于在 StackOverflow 上发布了这个问题后仅五分钟就想通了。发布我的解决方案，因为它似乎是一个可能会影响其他 OSX 人员的标题问题。

无论出于何种原因，在我的 64 位 OSX 构建中，GLenum 被定义为 8 字节整数类型，而 OpenGL 驱动程序实际上希望将数组中的 32 位值传递给 glDrawBuffers。如果我将代码重写为：

```
uint32_t buffers[] = { GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT };
glDrawBuffers(2,(GLenum*)buffers); 
```

然后一切都按预期工作。（GL_ZERO 条目的位置是最终导致我得到这个答案的提示）

# javascript - IE7-8 中的生涩视差

> ID：11709225
> 
> 赞同：0
> 
> 时间：2012-07-29T12:25:11.250
> 
> 标签：javascript, jquery, html, css, parallax

我已经在我正在开发的网站中引入了基本的视差效果。在 Chrome、Firefox 和 IE9 中运行流畅；但在 IE7 和 IE8 中确实很生涩。我查看了更复杂的网站，但没有看到像我得到的“急躁”之类的东西。我只使用了两个顶部带有扫描线纹理的图像。

有什么想法可能导致这种情况吗？

```
#intro {
    background: url(../img/graphics/top-bg.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-width: 1024px;
    min-height: 768px;
    height: 100%;
    position: relative;
}

#second {
    background: url(../img/graphics/content-bg-2.jpg) center no-repeat fixed;
    position: relative;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-width: 1200px;
    min-height: 768px;
    height: 4800px;
} 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:47:37.230

请检查此设置（在评论中）[如何通过 Javascript 检查浏览器平滑滚动支持？](https://stackoverflow.com/questions/9991668/how-can-i-check-browser-smooth-scrolling-support-via-javascript).

如果它禁用 - 这是正常的。

据我了解，此[http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/)是示例，而不是您的代码。如果平滑滚动被禁用 - 它具有“生涩”效果（我禁用平滑滚动是 Chrome、Opera 和 IE8）。

滚动原理中的原因。如果此设置被禁用 - 它就像**永久 +100px**一样工作。如果启用 - 它**每 50 毫秒工作 10 次，每次 +10px**。

* * *

**更新**

为了获得更高的性能，您可以执行以下操作：

*   无需插件即可编写自己的代码

*   基于当前 scrollTop 间隔构建事件调用，而不是每次滚动调用

*   在开头缓存jquery节点

*   **主要原则 - 更少的节点操作 = 更高的性能**

我在 jquery 上写过类似的效果 - 你可以在这里看到它[http://www.thecommoditycode.com/ambersoftware/](http://www.thecommoditycode.com/ambersoftware/)并使用它的原则

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T23:31:40.407

我知道现在回答这个问题有点晚了，但它可能会在未来帮助人们 - 问题是你正在使用：

```
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

要使视差后面的图像全屏，您需要使用另一种方法。

删除此代码，您的视差将变得可爱而流畅。

# javascript - 将输入字段中包含的内容的每个单词大写

> ID：11709226
> 
> 赞同：1
> 
> 时间：2012-07-29T12:25:38.823
> 
> 标签：javascript, capitalization, capitalize

我在 Stackoverflow 上找了一个小时，不幸的是因为我无法将它应用于我的情况，所以没有运气。我不是编码员，所以请调整您对我的代码的响应。在我们的电子商务网站上，买家以小写字母输入他们的地址和姓名。由于各种原因，我们不希望这样，并且希望每个单词大写的数据存储（因此 text-transform 的 CSS）不适用于后端。

假设字段名称为：

```
<input type="text" value="" name="FormField[1][1]" id="FormField_1" class="Textbox Field200 FormField"> 
```

我需要在上面的代码中添加什么以及我需要在该部分中添加什么以使每个单词都以大写开头？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:23:02.063

```
<script type="text/javascript"> 

function upperCaseFirstLetters(ABC123) {
    var myTextObject = document.getElementById(ABC123);
    myTextObject.value = myTextObject.value.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});

} 
```

```
 <input type="text" class="Textbox Field150 InitialFocus" onblur="upperCaseFirstLetters(this.id)" name="login_email" id="login_email"> 
```

您必须在每个**输入中****准确**使用这行代码

 **```
onblur="upperCaseFirstLetters(this.id)" 
```

该功能无需修改。只要您在**输入**中包含上述代码行，该功能就可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:37:35.667

既然你在这里没有得到答案，我想我会试一试。

首先，您需要使用 Javascript 的**onblur()**函数来检测用户何时点击*离开*输入框。

```
 <input type="text" onblur="upperCaseFirstLetters(this.id) value="" name="FormField[1][1]" id="FormField_1" class="Textbox Field200 FormField""> 
```

**onblur()**调用upperCaseFirstLetters **()**函数。**该函数括号内的this.id**获取文本框的 id，以便您可以编辑其中包含的文本。

最后，您需要在**脚本**标签中创建函数。

```
<head>
<script type="text/javascript">
    function upperCaseFirstLetters(elm) {
        var myTextObject = document.getElementById(elm);
        myTextObject.value = myTextObject.value.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    }
</script>
</head> 
```

输入框的元素存储在变量**myTextObject**中，通过其 id 获取元素。**myTextObject.value**是输入框中的实际文本。[因此，您使用我最初链接](https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript/196991#196991)到的函数将每个单词的第一个字母设置为大写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:14:10.310

实际上，对不起，现在我想起来了，您应该在服务器端执行此操作。因此需要更多信息来告诉我们您在服务器端使用的语言（例如 php、C# 等）。您提供的代码是位于客户端的 HTML，这意味着您不会真正处理那里的文本（用户的详细信息）。

我敢肯定，如果您告诉我们服务器端代码是什么，将会有更多人提供输入。

**编辑** 流程如下所示：

```
Client-side form   ->  Server-side processing -> Database storage
+---------------+          +----------+          +------------+
|   Name: ted   |    ->    | ted->Ted |    ->    | Name: Ted  |
+---------------+          +----------+          +------------+ 
```

**编辑 2** 假设您发布的示例字段是名字。这未经测试，所以我不确定它是否有效：

```
$first_name = ucwords($_POST["FormField[1][1]"]);
// $_POST gets the value from the form with the 'name' attribute as 'FormField[1][1]'
// ucwords() is a php function to capitalise the first letter of each word in a sentence. 
```**

# javascript - Facebook 授权弹窗不会自动关闭

> ID：11709229
> 
> 赞同：1
> 
> 时间：2012-07-29T12:25:58.637
> 
> 标签：javascript, facebook, facebook-graph-api

我正在使用[**Think different tutorial**](http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/)中的以下代码并成功实现它，唯一的问题是成功用户登录后身份验证弹出窗口不会自动关闭。

```
<div id="fb-root"></div>
<script type="text/javascript">
    var button;
    var userInfo;

    window.fbAsyncInit = function() {
        FB.init({ appId: 'YOUR_APP_ID',
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true});

        function updateButton(response) {
            button =   document.getElementById('fb-auth');
            userInfo = document.getElementById('user-info');

            if (response.authResponse) {
                //user is already logged in and connected
                FB.api('/me', function(info) {
                login(response, info);
                });

                button.onclick = function() {
                FB.logout(function(response) {
                logout(response);
                });
                };
            } else {
                //user is not connected to your app or logged out
                button.innerHTML = 'Login';
                button.onclick = function() {
                    showLoader(true);
                        FB.login(function(response) {
                        if (response.authResponse) {
                            FB.api('/me', function(info) {
                            login(response, info);
                            });
                        } else {
                            //user cancelled login or did not grant authorization
                        }
                    }, {scope:'email,user_birthday,status_update,publish_stream,user_about_me'});
                }
            }
        }

        // run once with current status and whenever the status changes
        FB.getLoginStatus(updateButton);
        FB.Event.subscribe('auth.statusChange', updateButton);
    };
    (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol
        + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }());

    function login(response, info){
    if (response.authResponse) {
    var accessToken = response.authResponse.accessToken;

    userInfo.innerHTML = '<img src="https://graph.facebook.com/' + info.id + '/picture">' + info.name + "<br /> Your Access Token: " + accessToken;
    button.innerHTML = 'Logout';
    document.getElementById('other').style.display = "block";
    }
    }

    function logout(response){
    userInfo.innerHTML  = "";
    document.getElementById('debug').innerHTML = "";
    document.getElementById('other').style.display = "none";
    }
    }

</script>
<body>
<button id="fb-auth">Login</button> 
```

# php - 将 PHP/mySQL 与谷歌地图一起使用，然后添加地理编码.. 地理编码不起作用

> ID：11709234
> 
> 赞同：1
> 
> 时间：2012-07-29T12:27:21.030
> 
> 标签：php, mysql, google-maps, google-maps-api-3, google-geocoding-api

我对谷歌地图很感兴趣。我将[本教程](https://developers.google.com/maps/articles/phpsqlajax_v3)用于我的网站，因为我想在数据库中存储一些地方。它运行良好（当然，因为我只是复制而没有修改给定的代码）。

但是，在访问[此站点](http://ctrlq.org/maps/address/)后，我想对地图进行地理编码，以便当访问者键入街道名称时，地图将指向地图中这条街道的中心。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:01:51.053

我收到一个 javascript 错误：未捕获的类型错误：无法调用未定义的方法 'geocode'

您永远不会创建[Geocoder](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)对象，添加 geocoder = new google.maps.Geocoder();

并改变：

```
 geocoder.geocode( { 'addressgeoc': addressgeoc}, function(results, status) { 
```

至：

```
 geocoder.geocode( { 'address': addressgeoc}, function(results, status) { 
```

如[文档中所述](https://developers.google.com/maps/documentation/javascript/reference#GeocoderRequest)

[工作示例](http://www.geocodezip.com/ikkat_net_geocoderA.html)

在您的地图上，我仍然收到两个 javsscript 错误：

```
Uncaught SyntaxError: Unexpected identifier  http://ikkat.net/:71
Uncaught ReferenceError: load is not defined http://ikkat.net/:119 
```

请将您的代码与我的工作示例进行比较

# apache - 页面接收时间过长

> ID：11709238
> 
> 赞同：1
> 
> 时间：2012-07-29T12:28:24.217
> 
> 标签：apache, mod-wsgi, werkzeug

我已经将 Web 应用程序从使用 mod_python 改写为使用 mod_wsgi。问题是现在至少需要 15 秒才能处理任何请求（萤火虫暗示几乎所有这些时间都花在了接收数据上）。在重写之前，它花费了不到 1 秒的时间。我使用 werkzeug 进行应用程序开发和 apache 作为服务器。服务器负载似乎很小，内存使用也是如此。我正在使用 apache2-mpm-prefork。

我正在使用 mod_wsgi 的默认设置——我认为它被称为“嵌入式模式”。我已经测试过切换到 apache2-mpm-worker 是否会有所帮助，但没有。从应用程序日志来看，应用程序似乎很快就完成了请求 - 不到 1 秒。我已将 apache 日志更改为调试，但我看不到任何可疑的东西。我已将应用程序移动到另一台机器上运行，但它都是一样的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T21:11:21.987

听起来有点像您的响应内容长度与您实际发送回的数据量不匹配，返回的内容长度更长。因此，浏览器会等待更多数据，直到可能超时。

使用类似的东西：

[http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Tracking_Request_and_Response](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Tracking_Request_and_Response)

验证正在发回的数据以及内容长度等内容是否匹配。

否则，如果您没有展示说明问题的小型自包含代码示例，则无法猜测是什么问题。

# ruby-on-rails - rake 任务中的嵌套属性

> ID：11709243
> 
> 赞同：1
> 
> 时间：2012-07-29T12:29:12.400
> 
> 标签：ruby-on-rails, rake-task

我正在尝试创建一个 rake 任务来填充我的数据库。我需要创建 1 个具有特定细节集的用户和 99 个其他随机生成的用户。所需的详细信息同时适用于两个模型，类似于具有嵌套属性的表单。我的模型使用 after_create 回调来创建用户并将其链接到团队。团队名称默认为用户名

我使用它产生错误的当前代码

sample_data.rake

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
  user = User.create!(:profile_attributes => { name: Forgery::Name.full_name },
              email: "test@example.com",
              password: "123qwe",
              password_confirmation: "123qwe")
  99.times do |n|
      :profile_attributes => { name: Forgery::Name.full_name },
      email = Forgery::Internet.email_address
      password  = "password"
      user = User.create!(email: email,
                          password: password,
                          password_confirmation: password)
     end 
  end
end 
```

依赖于嵌套属性的模型。

```
class User < ActiveRecord::Base
  after_create :set_user_on_team

  private
  def set_user_on_team
     self.create_owned_team(:name => self.profile.name ).users << self

  end

end 
```

错误信息

```
rake aborted!
/lib/tasks/sample_date.rake:9: syntax error, unexpected tASSOC, expecting keyword_end
    :profile_attributes => { name:  Forgery::Name.full_name },
                        ^
/lib/tasks/sample_date.rake:9: syntax error, unexpected ',', expecting keyword_end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:10:01.303

我注意到`99.times`块中有一些语法错误。你可以这样尝试：

```
99.times do |n|
  profile_attributes = { name: Forgery::Name.full_name }
  email = Forgery::Internet.email_address
  password  = "password"
  user = User.create!(profile_attributes: profile_attributes, #my assumption
                      email: email,
                      password: password,
                      password_confirmation: password)
end 
```

# symfony - 访问 EntityRepository 中当前登录的用户

> ID：11709246
> 
> 赞同：1
> 
> 时间：2012-07-29T12:29:28.760
> 
> 标签：symfony

我想创建一个简单的博客示例，其中用户有一个最喜欢的类别附加到那里的帐户。这意味着只能为该类别撰写文章。（其中一些 - 主要是管理员 - 将有机会切换类别，但这不是问题......现在^^）

所以我首先创建了 User- 和 Category 实体之间的关系。一切正常。现在每个用户都选择了一个主要类别。

唯一困扰我的是，我无法在 EntityType (formbuilder) 和 EntityRepository 类中获取当前登录的用户。

在我的“新帖子”表单中，存在与其他实体的关系（例如标签）。我使用 EntityType 类中的“实体”表单类型来生成这些表单元素。现在我不想过滤标签，只允许选择与当前登录的用户类别具有相同类别关系的标签。

我尝试使用实体表单类型中的 query_builder 选项。但是由于我无法获取当前的用户对象，所以我不知道他选择了哪个类别。EntityRepository 也有同样的问题。

现在我可以过滤 PostController 中已经存在的标签，但问题是，我将一遍又一遍地需要它。因此，我不想每次添加新内容时都编写代码。

我认为最好将此过滤器放在 EntityRepository 中。所以我总是可以访问 findAllByCategory。但我需要那里的用户对象。

实现这一目标的最佳方法是什么？搜索了很多，但要么我搜索了错误的术语，要么没有人有这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:24:29.323

您可以从中获取用户对象`Security Context`

```
$user = $serviceContainer->get('security.context')->getToken()->getUser(); 
```

**小提示**：如果用户未登录 - 你将有字符串 in `$user`，否则 - 用户对象。

干杯；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:12:49.703

您可以在定义为服务的表单类型中注入安全上下文。然后在您的标签字段中使用带有`$user`（当前登录用户）的查询构建器来过滤与当前登录具有相同类别关系的标签：

```
/** @DI\Service("form.type.post") */
class PostType extends \Symfony\Component\Form\AbstractType
{
    /**
     * @var \Symfony\Component\Security\Core\SecurityContext
     */
    protected $securityContext;

    /**
     * @DI\InjectParams({"securityContext" = @DI\Inject("security.context")})
     *
     * @param \Symfony\Component\Security\Core\SecurityContext $context
     */
    public function __construct(SecurityContext $securityContext)
    {
        $this->securityContext = $securityContext;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        $user = $this->securityContext()->getToken()->getUser();

        $builder->add('tags', 'entity', array(
            'label'         => 'Tags',
            'class'         => 'Acme\HelloBundle\Entity\Tag',
            'property'      => 'name',
            'query_builder' => function(EntityRepository $er) use($user) {
                return $er->getAllSuitableForUserChoiceQueryBuilder($user);
            },
            'multiple'      => true,
            'expanded'      => true,
    }
} 
```

将标签过滤到您的存储库中：

```
class TagRepository extends EntityRepository
{
    public function getAllSuitableForUserChoiceQueryBuilder(User $user)
    {
        // Filter tags that can be selected by a given user
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:24:43.010

> 尝试使用实体表单类型中的 query_builder 选项。但是由于我无法获取当前的用户对象，我不知道他选择了哪个类别。EntityRepository 也有同样的问题。

只要类别与用户有关系，您就应该能够在那里获得用户。

例如：

控制器

```
$someThing   = new SomeThing();
$someThing->setUser($user);
$form = $this->createForm(new someThingType(), $someThing); 
```

形式

```
$someThing = $options['data'];
$user      = $someThing->getUser();
$builder->add('category', null, array(
    'class' => 'MyBundle:Cateogry',
    'query_builder' => 
        function(EntityRepository $er) use ($user) {
            return $er->getCategoriesForUser($user);
        }
)); 
```

存储库

```
public function getCategoriesForUser($user)
{
    $qb = $this->createQueryBuilder('c');
    $qb->leftJoin('c.user', 'u', 'with', 'u.user = :user');
    $qb->setParameter('user', $user)
    ;

    return $qb;
} 
```

这不完全是您的用例，但与它非常相似。也许它可以帮助你。

# c# - 为 XNA 列表中的特定对象创建碰撞

> ID：11709248
> 
> 赞同：1
> 
> 时间：2012-07-29T12:29:59.897
> 
> 标签：c#, windows-phone-7, list, xna, touch

我使用 Xna 和 C#。

我试图让我的列表中的特定对象做不同的事情。

我现在写出来的方式是它选择了我列表中的所有纹理，并且它们都做同样的事情，如果我尝试选择某个纹理，它们仍然做同样的事情：

`if (planet.Load("planet0")) { if (planet.Bounds.Contains((int)tl.Position.X, (int)tl.Position.Y)) { changeScreenDelegate(ScreenState.Menu); } }`

我基本上试图让每个选择进入不同的屏幕。

这是我班的其余部分：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Input.Touch;
using Microsoft.Xna.Framework.Media;

namespace PlanetDrill2
{
    class StarSystemUrsa : Screen
    {
        Texture2D starSystemTexture;

    List<Planet> planets;

    Texture2D star;
    Vector2 position;
    Texture2D previousButton;

    public StarSystemUrsa(Game game, SpriteBatch spriteBatch, ChangeScreen changeScreen)
        : base(game, batch, changeScreen)
    {

        position = new Vector2((480 - 295) / 2, (800 - 295) / 2);

        planets = new List<Planet>();

        Planet planet = new Planet(content, spriteBatch);
        planet.Load("planet0");
        planet.velocity = 0.04f;
        planet.radius = 80;
        planet.angle = MathHelper.ToRadians(90);
        planets.Add(planet);

        planet = new Planet(content, spriteBatch);
        planet.Load("planet4");
        planet.velocity = 0.02f;
        planet.radius = 135;
        planet.angle = MathHelper.ToRadians(120);
        planets.Add(planet);

        planet = new Planet(content, spriteBatch);
        planet.Load("planet2");
        planet.velocity = 0.009f;
        planet.radius = 180;
        planet.angle = MathHelper.ToRadians(160);
        planets.Add(planet);

    }

    protected override void SetupInputs()
    {

        base.SetupInputs();
    }

    public override void Activate()
    {
        base.Activate();
    }

    protected override void LoadScreenContent(ContentManager content)
    {
        starSystemTexture = content.Load<Texture2D>("levelSelectMenu");
        star = content.Load<Texture2D>("ursaeMajorisStar");
        previousButton = content.Load<Texture2D>("previousButton2");

        base.LoadScreenContent(content);
    }

    protected override void UpdateScreen(GameTime gameTime, DisplayOrientation screenOrientation)
    {

        TouchCollection touchCollection = TouchPanel.GetState();

    foreach(TouchLocation tl in touchCollection)
        {
            if(tl.State == TouchLocationState.Pressed) // Moved? Is that right?
            {  
                foreach(Planet planet in planets)
                {

                    // Alternately: if(GetPlanetRectangle(planet).Contains(...))
                    if(planet.Bounds.Contains((int)tl.Position.X, (int)tl.Position.Y))
                    {
                        changeScreenDelegate(ScreenState.Menu);
                    }

                }

            }

            TouchPanel.EnabledGestures = GestureType.DoubleTap | GestureType.VerticalDrag;

            while (TouchPanel.IsGestureAvailable)
            {

                GestureSample gesture = TouchPanel.ReadGesture();

                switch (gesture.GestureType)
                {
                    case GestureType.DoubleTap:
                        changeScreenDelegate(ScreenState.launchScreen);
                        break;
                    case GestureType.VerticalDrag:

                        break;
                    default:
                        break;
                }
            }
        }

        foreach (Planet planet in planets)
        {
            planet.angle += planet.velocity;
            float orbitx = (float)(Math.Cos(planet.angle) * planet.radius);
            float orbity = (float)(Math.Sin(planet.angle) * planet.radius);

            float x = (game.GraphicsDevice.Viewport.Width - planet.image.Width) / 2 + orbitx;
            float y = (game.GraphicsDevice.Viewport.Height - planet.image.Height) / 2 + orbity;

            planet.position = new Vector2(x, y);

        }

        base.UpdateScreen(gameTime, screenOrientation);

    }

    protected override void DrawScreen(SpriteBatch batch, DisplayOrientation screenOrientation)
    {

        batch.Draw(starSystemTexture, Vector2.Zero, Color.White);

        foreach (Planet planet in planets)
        {
            planet.Draw();
        }

        batch.Draw(star,position, Color.White);
        batch.Draw(previousButton, new Vector2(240, 750), Color.White);
        base.DrawScreen(batch, screenOrientation);
    }

      protected override void SaveScreenState()
        {
            base.SaveScreenState();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T21:49:07.777

为您的行星类提供另一个名为 ID 的属性，然后在初始化它们时为每个行星提供不同的 ID。然后在你的 foreach planet in planets loop 中，你可以说

`if(planet.ID == 0) { if (planet.Bounds.Contains((int)tl.Position.X, (int)tl.Position.Y)) { changeScreenDelegate(ScreenState.Menu); } }`

对每个可能的 ID 号执行此操作，并将屏幕状态更改为您希望它切换到的任何屏幕状态。

另外，您可以列举 ID 号，以清楚地了解所引用的行星。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:06:23.957

将 Menuscreen 附加为 Planet 对象的属性。给这些对象一个方法来告诉屏幕管理器激活他们的屏幕。在您的（如果 Planet.Bounds.Conains）逻辑块内的触摸星球上调用该方法。

# c# - SharpSvn GetLog ChangedPaths NodeKind 总是未知的

> ID：11709249
> 
> 赞同：1
> 
> 时间：2012-07-29T12:30:12.227
> 
> 标签：c#, .net, svn, sharpsvn

**代码**

```
using (var svnClient = new SvnClient())
{
    Collection<SvnLogEventArgs> svnLogEntries;
    svnClient.GetLog(new Uri("https://DbDiff.svn.codeplex.com/svn"), out svnLogEntries);
    foreach (var svnLogEntry in svnLogEntries)
    {
        foreach (var changedPath in svnLogEntry.ChangedPaths)
        {
            Debug.WriteLine("NodeKind: " + changedPath.NodeKind + ", Path: " + changedPath.Path);
        }
    }
} 
```

**输出**

```
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand11.xml
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand9.xml
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand11.xml
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand7.xml
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand8.xml
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/SqlCommand9.xml
NodeKind: Unknown, Path: /DbDiffCommon/Model/DatabaseConnectString.cs
NodeKind: Unknown, Path: /DbDiffCommon/Helper/Enums.cs
NodeKind: Unknown, Path: /DbDiffWinClient/Forms/frmRegisterServer.resx
NodeKind: Unknown, Path: /DbDiffWinClient/Forms/frmConnectDb.resx
NodeKind: Unknown, Path: /DbDiffWinClient/Forms/frmRegisterServer.cs
NodeKind: Unknown, Path: /DbDiffWinClient/Forms/frmConnectDb.cs
NodeKind: Unknown, Path: /DbDiffCommon/Model/RegisteredServer.cs
NodeKind: Unknown, Path: /DbDiffWinClient/ChangeLog.txt
NodeKind: Unknown, Path: /DbDiffWinClient/Forms/DbItems/ucTableDiffInfo.cs
NodeKind: Unknown, Path: /DbDiffCommon/DataAccess/DatabaseDataSets.cs
... 
```

为什么`changedPath.NodeKind`总是“未知”？我希望它是上面输出的“文件”..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:52:06.803

并非所有服务器都为“日志”请求发送 nodeKind。请参阅此讨论： http: [//old.nabble.com/SVNNodeKind-%3D-UNKNOWN-td34018265.html#a34018265](http://old.nabble.com/SVNNodeKind-%3D-UNKNOWN-td34018265.html#a34018265)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:02:03.517

看起来我可以使用 SvnClient.GetInfo 获得正确的 NodeKind 但是为每个更改的路径调用它非常慢..

```
using (var svnClient = new SvnClient())
{
    Collection<SvnLogEventArgs> svnLogEntries;
    string repoUri = "https://DbDiff.svn.codeplex.com/svn";
    svnClient.GetLog(new Uri(repoUri), out svnLogEntries);
    foreach (var svnLogEntry in svnLogEntries)
    {
        foreach (var changedPath in svnLogEntry.ChangedPaths)
        {
            SvnInfoEventArgs svnInfo;
            svnClient.GetInfo(new SvnUriTarget(repoUri + changedPath.Path, svnLogEntry.Revision), out svnInfo);
            Debug.WriteLine("NodeKind: " + svnInfo.NodeKind + ", Path: " + changedPath.Path);
        }
    }
} 
```

# php - Facebook：页面成员的不同“喜欢”结果

> ID：11709250
> 
> 赞同：0
> 
> 时间：2012-07-29T12:30:15.140
> 
> 标签：php, facebook

在我的脚本中，我`graph.facebook.com/<page_id>/members/<user_id>`使用它`file_get_contents()`来检查用户是否已经喜欢该页面。该方法已经运行了一年，但现在它为少数用户返回空白 JSON 数组。试图再次不喜欢/喜欢该页面，但这些用户的结果是相同的..

喜欢该页面的用户的适当回报：

```
{
   "data": [
      {
         "name": "John Doe",
         "id": "000000000"
      }
   ]
} 
```

虚假回报：

```
{
   "data": [

   ]
} 
```

任何想法？

# c - 为什么输出错误？

> ID：11709251
> 
> 赞同：1
> 
> 时间：2012-07-29T12:30:16.063
> 
> 标签：c, types

```
#include<stdio.h>

main()
{
      unsigned  x=1;
      signed char y=-1;
      clrscr();
      if(x>y)
       printf("x>y");
      else
     printf("x<=y");
} 
```

有符号字符的值从 -128 增加到 127。所以预期的输出应该是“x>y”，但事实并非如此。编译器给出输出 - “x<=y”。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T12:32:26.797

在比较中，`signed char`转换为一个`unsigned int`，因此看起来像一个非常大的值。我希望编译器会警告您 - 即“比较有符号和无符号的东西令人困惑”中的某些内容。

这种转换是在“关系运算符”下强制执行的：

> 如果两个操作数都具有算术类型，则执行通常的算术转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:44:11.873

**C11 §6.8 al3 p95：**

> 如果两个操作数都具有算术类型，则执行通常的算术转换。

**C11 §6.3.1.8 al1 p53：**

> [...]如果具有无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则具有符号整数类型的操作数将转换为具有无符号整数类型的操作数的类型。

所以`y`将被提升为无符号类型，并且将大于`x`( `1`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:48:00.657

习惯于编译所有警告，即在 gcc 的情况下：

```
gcc -Wall -Wextra -pedantic source.c -o prog 
```

在您的情况下，该标志`-Wextra`会给出以下消息：

```
warning: comparison between signed and unsigned integer expressions [-Wsign-compare] 
```

这并不能解释原因，但它至少会警告你 ;) 。

解释是当与关系运算符相比时，`-1`评估为的有符号变量等于评估为的无符号变量。`UINT_MAX`

在这种情况下，编译器必须做一些明确定义的事情，这就是人们想出的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T13:13:18.063

当编译器看到将无符号整数与有符号整数进行比较时，它会将有符号整数提升为无符号整数，这意味着将这个（在 linux 框中）添加到有符号整数：

```
#define UINT_MAX    (~0U) (defined in this header file : /include/linux/kernel.h) 
```

因此，现在您将 **UINT_MAX - 1 (UINT_MAX + y)**与**x**进行比较，这清楚地解释了输出。

编辑：更清楚：在 32 位机器上--->`UINT_MAX = 2 147 483 648 = 2**31`

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T12:34:56.147

相比之下，如果一个操作数是无符号的，那么如果它的类型是有符号的，则另一个操作数会隐式转换为无符号！

更多可以在这里找到：有[符号/无符号比较](https://stackoverflow.com/questions/5416414/signed-unsigned-comparisons)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T12:43:35.637

在您的情况下，signed char 被转换为 unsigned int，因此我们得到一个大的正整数而不是 -1。这是 ANSI C 标准草案的摘录，它解释了在发生的通常算术转换过程中发生的情况。

> 3.2.1.5 常用算术转换
> 
> 许多期望算术类型的操作数的二元运算符会导致转换并以类似的方式产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换：首先，如果任一操作数的类型为 long double ，则另一个操作数将转换为 long double 。否则，如果任一操作数的类型为 double，则另一个操作数将转换为 double。否则，如果任一操作数的类型为 float，则另一个操作数将转换为 float。否则，将对两个操作数执行整数提升。然后应用以下规则： 如果任一操作数的类型为 unsigned long int，则另一个操作数将转换为 unsigned long int。否则，如果一个操作数的类型为 long int，而另一个操作数的类型为 unsigned int，如果 long int 可以表示 unsigned int 的所有值，则 unsigned int 类型的操作数将转换为 long int ；如果 long int 不能表示 unsigned int 的所有值，则两个操作数都将转换为 unsigned long int。否则，如果任一操作数的类型为 long int，则另一个操作数将转换为 long int。 **否则，如果任一操作数的类型为 unsigned int，则另一个操作数将转换为 unsigned int。** 否则，两个操作数的类型都是 int。

# ruby-on-rails - Rails 中的一个视图中的两个控制器

> ID：11709260
> 
> 赞同：2
> 
> 时间：2012-07-29T12:32:41.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我有两个控制器，一个用于用户，一个用于微博。

我想做的，是把用户信息和微博形式放在**同一个视图上。**

问题是这个页面的 url 是 www.mywebsite.com/users/18 所以我只能访问用户控制器。

我试着做：

render :file => '/posts/new' 但它不起作用。

我找到的唯一解决方案是将所有东西都放在一个控制器上，但这会一团糟。

我真的想要为每个单独的控制器。

所以我不知道该怎么做。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:47:13.830

> 我想做的，是把用户信息和微博形式放在同一个视图上

我认为您正在尝试`micropost`在视图内部创建一个新的`user` `show`。如果是这样，您可以包括以下内容：

```
<%= form_tag(controller: :microposts, action: :create) do %>
  ...
<% end %> 
```

当您提交表单时，它将调用控制器`create`中的操作。`microposts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:42:25.337

你在学习 Hartl 的教程吗？好吧，无论如何，您所要做的就是在控制器操作中初始化视图中所需的所有实例变量：

users/18 可能指向 users#show，因此您需要添加类似

```
class UsersController < ApplicationController
  ...
  def show
    @micropost = current_user.microposts.build 
  ...
  end
...
end 
```

在 controllers/users_controller.rb （或适合您的模型的东西）中为微帖子表单初始化一个新的微帖子，或者只是

```
@micropost = Micropost.new 
```

如果您没有/不需要与用户的关联。（不过，Michael Hartl 正在主页上这样做。）

# ruby-on-rails - 使用带有多个 .env 文件的工头

> ID：11709265
> 
> 赞同：5
> 
> 时间：2012-07-29T12:33:32.830
> 
> 标签：ruby-on-rails, foreman

对于工头，我正在尝试使用两个 .env 文件启动我的 rails 应用程序。

一个是常规的 .env 文件，但第二个有额外的变量要加载。我正在尝试使用本指南中提到的方法将配置变量排除在代码之外：[https ://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

这是我的Procfile：

```
web: bundle exec rails server thin -p $PORT --env $RACK_ENV,var.env 
```

我的问题是工头似乎不想为 --env 采用这两个参数，即使文档说它应该是可能的：

> -e，--环境
> 
> 指定备用环境文件。您可以使用以下命令指定多个文件：--env file1,file2。

当我尝试使用“工头启动”运行它时，出现错误：

```
06:22:46 web.1  | You did not specify how you would like Rails to report deprecation notices for your development,var.env environment, please set config.active_support.deprecation to :log, :notify or :stderr at config/environments/development,var.env.rb 
```

它似乎不想拆分“开发，var.env”并分别处理它们。当我查看工头代码时，它看起来应该只是在逗号上做一个简单的拆分，所以我不知道我做错了什么还是一个错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T12:51:18.317

我还没有使用该功能，但是从[文档](http://ddollar.github.com/foreman/#RUNNING)中我会说您试图在错误的位置指定命令行参数。与其将其添加到进程中，`Procfile`不如将其添加到`foreman`命令本身：

```
foreman start --env env,env.local 
```

这样，为工头启动的所有进程设置了环境。

# c# - Attach() 在实体框架中究竟做了什么？

> ID：11709266
> 
> 赞同：38
> 
> 时间：2012-07-29T12:33:46.913
> 
> 标签：c#, entity-framework

> **可能重复：**
> [Entity Framework 4 - AddObject vs Attach](https://stackoverflow.com/questions/3920111/entity-framework-4-addobject-vs-attach)

我见过几次使用附加，尤其是在操作模型时。

```
using (var context = new MyEntities())
{
    context.Attach(client);
    context.SaveChanges();
} 
```

从上下文来看，它看起来只是`UPDATE`针对 EntityFrameworks 中的记录运行，但我也看到它在`DELETE`语句中使用。所以我只能假设它只是获得一个指向数据库的指针？

有人可以指出我正确的方向吗，我已经用谷歌搜索了一段时间，虽然我没有空出来，但我找不到任何关于它的作用的很好的解释（从概述和内部）。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-29T12:44:08.347

正如一个兴趣点，您发布的代码什么也不做

```
using (var context = new MyEntities())
{
    context.Attach(client);
    context.SaveChanges();
} 
```

所有这一切都是将实体附加到跟踪图中，不对实体进行任何修改并保存它。

在附加之前对对象所做的任何更改都会在保存中被忽略

更有趣的是，如果它实际上更新了一个属性，即：

```
using (var context = new MyEntities())
{
    context.Attach(client);
    client.Name = "Bob";
    context.SaveChanges();
} 
```

# java - Android NDK 中的系统调用

> ID：11709267
> 
> 赞同：1
> 
> 时间：2012-07-29T12:33:51.340
> 
> 标签：java, android, c++, android-ndk, native

我想使用 android NDK 使我的 c++ 引擎在 android 上工作，而不必在 java 中重写引擎。

可以从 C++ 调用 Android 的系统调用，例如触摸输入、加速度计、窗口和大多数 Android 应用程序所需的所有其他东西吗？或者您是否需要制作自己的包装器，以便本机代码可以调用 android java 的东西？

如果可以的话，是否有某种 API 参考可以查看来自本机代码的所有可能调用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:41:02.477

Android NDK 为以下内容提供了稳定的 API（请参阅[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)）：

> *   libc（C 库）头文件
>     
> *   libm（数学库）头文件
>     
> *   JNI 接口头文件
>     
> *   libz（Zlib 压缩）头文件
>     
> *   liblog（Android 日志记录）标头
>     
> *   OpenGL ES 1.1 和 OpenGL ES 2.0（3D 图形库）头文件
>     
> *   libjnigraphics（像素缓冲区访问）标头（适用于 Android 2.2 及更高版本）。
>     
> *   用于 C++ 支持的最小标头集
>     
> *   OpenSL ES 原生音频库
>     
> *   Android 原生应用 APIS

其他任何东西都不能保证在所有设备上都能正常工作。
您可能还想查看[http://developer.android.com/reference/android/app/NativeActivity.html](http://developer.android.com/reference/android/app/NativeActivity.html)以获取有关如何在本机代码中实现活动的信息。

# sql-server - App_Data MVC 中的 SQL Server

> ID：11709269
> 
> 赞同：0
> 
> 时间：2012-07-29T12:34:30.613
> 
> 标签：sql-server, asp.net-mvc

我刚刚通过右键单击 -> 添加新项目 -> SQL Server（不紧凑）在我的 App_Date 中创建了一个 SQL Server 数据库。

我已经创建了一个包含必要数据的模型。

如何将数据发送到该数据库？我不介意使用任何方法，即 Linq/EF 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:18:10.877

最好通过双击打开 sql server compact sdf 文件。在这里，您将能够修改数据库表/列等。

接下来添加一个新的项目项。选择 Entity Framework 数据库并完成向导。

# c# - Visual Studio 2010 插件 - 将上下文菜单添加到编辑器窗口

> ID：11709274
> 
> 赞同：6
> 
> 时间：2012-07-29T12:35:26.880
> 
> 标签：c#, visual-studio-2010, plugins

这类似于以下问题：[Visual Studio 2010 Plug-in - 添加上下文菜单到解决方案资源管理器](https://stackoverflow.com/questions/3017063/visual-studio-2010-plug-in-adding-a-context-menu-to-the-solution-explorer)，但是我的查询是如何将项目添加到上下文菜单项到 JavaScript 文件的代码编辑器窗口。

我正在尝试使用 Visual Studio 插件项目（不是 Visual Studio 包）添加上下文菜单。

上面链接中的代码非常有帮助。总而言之，要将项目添加到解决方案资源管理器和项目资源管理器的上下文菜单，我们首先通过检索项目本身来实现：

```
CommandBars cmdBars = (CommandBars)(_applicationObject.CommandBars);
CommandBar vsBarProject = cmdBars["Project"];
CommandBar vsBarSolution = cmdBars["Solution"]; 
```

稍后，通过扩充现成的项目模板代码来添加它们：

```
command.AddControl(vsBarProject);
command.AddControl(vsBarSolution); 
```

现在我的查询是关于`cmdBars`我必须将命令添加到哪些元素，以便我的项目出现在用于编辑脚本文件的上下文菜单中

我已经确定它不是`cmdBars["Code Window"]`。是否所有文件都有一个项目，还是我必须为每种编辑器类型（例如 ASPX、脚本、HTML 等）添加它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T05:21:57.520

这是名称和索引的完整列表。也许这可以帮助某人。

```
Index: 1 Menu Bar
Index: 2 Standard
Index: 3 Build
Index: 4 Class View Multi-select Project references Items
Index: 5 Class View Multi-select Project references members
Index: 6 Context Menus
Index: 7 &Sort By
Index: 8 Show &Columns
Index: 9 Project
Index: 10 Error List
Index: 11 Docked Window
Index: 12 Menu Designer
Index: 13 Properties Window
Index: 14 Toolbox
Index: 15 Code Window
Index: 16 Task List
Index: 17 Results List
Index: 18 Stub Project
Index: 19 Solution
Index: 20 Solution Folder
Index: 21 Cross Project Solution Project
Index: 22 Cross Project Solution Item
Index: 23 Cross Project Project Item
Index: 24 Cross Project Multi Project
Index: 25 Cross Project Multi Item
Index: 26 No Commands Available
Index: 27 Misc Files Project
Index: 28 Cross Project Multi Solution Folder
Index: 29 Cross Project Multi Project/Folder
Index: 30 Command Window
Index: 31 AutoHidden Windows
Index: 32 Expansion Manager
Index: 33 Find Regular Expression Builder
Index: 34 Replace Regular Expression Builder
Index: 35 Wild Card Expression Builder
Index: 36 Wild Card Expression Builder
Index: 37 External Tools Arguments
Index: 38 External Tools Directories
Index: 39 Easy MDI Tool Window
Index: 40 Easy MDI Document Window
Index: 41 Easy MDI Dragging
Index: 42 Open Drop Down
Index: 43 Item
Index: 44 Folder
Index: 45 Class View Project
Index: 46 Class View Item
Index: 47 Class View Folder
Index: 48 Class View Grouping Folder
Index: 49 Class View Multi-select
Index: 50 Class View Multi-select members
Index: 51 Class View Member
Index: 52 Class View Grouping Members
Index: 53 Class View Project References Folder
Index: 54 Class View Project Reference
Index: 55 Class View Project Reference Item
Index: 56 Class View Project Reference Member
Index: 57 Object Browser Objects Pane
Index: 58 Object Browser Members Pane
Index: 59 Object Browser Description Pane
Index: 60 Find Symbol
Index: 61 Reference Root
Index: 62 Reference Item
Index: 63 Web Reference Folder
Index: 64 App Designer Folder
Index: 65 Drag and Drop
Index: 66 Web Project Folder
Index: 67 Web Folder
Index: 68 Web Item
Index: 69 Bookmark Window
Index: 70 Web SubWeb
Index: 71 Error Correction
Index: 72 Other Context Menus
Index: 73 Class View Context Menus
Index: 74 Project and Solution Context Menus
Index: 75 Editor Context Menus
Index: 76 EzMDI Files
Index: 77 Ca&ll Browser
Index: 78 Preview Changes
Index: 79 Team Project
Index: 80 Team Project &Settings
Index: 81 &Team Project Collection Settings
Index: 82 Toolbar List
Index: 83 Undefined
Index: 84 SchemaExplorer
Index: 85 ContentModelView
Index: 86 GraphView
Index: 87 FilmstripView
Index: 88 Test Results Context Menu
Index: 89 Test List Editor Context Menu
Index: 90 Test List Context Menu
Index: 91 Test Run Context Menu
Index: 92 View Context Menu
Index: 93 Code Coverage Results Context Menu
Index: 94 Cr&eate Private Accessor
Index: 95 Test Results Context Menu
Index: 96 Test Tools
Index: 97 Selection
Index: 98 &Zoom
Index: 99 Page Layout
Index: 100 Designer Actions
Index: 101 &Navigation Tools
Index: 102 Workflow
Index: 103 Directed Graph
Index: 104 Directed Graph Context Menu
Index: 105 &Group
Index: 106 &Categorize
Index: 107 &Selection
Index: 108 Architecture Explorer Context Menu
Index: 109 &Generate Dependency Graph
Index: 110 A&nalyzers
Index: 111 &Goto
Index: 112 Architecture Designers
Index: 113 XAML Editor
Index: 114 Checkin Dialog Context Menu
Index: 115 Pending Checkin Window Context Menu
Index: 116 Standard TreeGrid context menu
Index: 117 GetVersion Dialog Context Menu
Index: 118 Check Out Dialog Context Menu
Index: 119 Source Control
Index: 120 Text Editor
Index: 121 Formatting
Index: 122 Context
Index: 123 Context
Index: 124 Basic Context
Index: 125 HTML Context
Index: 126 Script Context
Index: 127 ASPX Context
Index: 128 ASPX Code Context
Index: 129 ASPX VB Code Context
Index: 130 ASMX Code Context
Index: 131 ASMX VB Code Context
Index: 132 ASAX Context
Index: 133 ASAX Code Context
Index: 134 ASAX VB Code Context
Index: 135 Context
Index: 136 Context
Index: 137 HTML Source Editing
Index: 138 XML Editor
Index: 139 Debugger Context Menus
Index: 140 Step Into Speci&fic
Index: 141 Debug Location
Index: 142 Debug
Index: 143 Watch Window
Index: 144 Locals Window
Index: 145 Autos Window
Index: 146 Threads Window
Index: 147 Call Stack Window
Index: 148 Disassembly Window
Index: 149 Breakpoints Window
Index: 150 Memory Window
Index: 151 Registers Window
Index: 152 Modules Window
Index: 153 Data Tip Window
Index: 154 Processes Window
Index: 155 Breakpoint
Index: 156 Output Window
Index: 157 Script Project
Index: 158 Thread Tip Window
Index: 159 Thread IP Marker
Index: 160 Thread IP Markers
Index: 161 Load Symbols From
Index: 162 Symbol Include List
Index: 163 Symbol Exclude List
Index: 164 TocContext
Index: 165 ResListContext
Index: 166 Change &View
Index: 167 Static Node
Index: 168 Object Node
Index: 169 Multiple Static Nodes
Index: 170 Multiple Homogenous Object Nodes
Index: 171 Multiple Heterogenous Object Nodes
Index: 172 Multiple Heterogenous Nodes
Index: 173 Add &New
Index: 174 Data Design
Index: 175 Surface
Index: 176 DataSourceContext
Index: 177 DbTableContext
Index: 178 DataTableContext
Index: 179 RelationContext
Index: 180 FunctionContext
Index: 181 ColumnContext
Index: 182 QueryContext
Index: 183 DataAccessorContext
Index: 184 Server Explorer
Index: 185 Query Designer
Index: 186 Query Diagram Pane
Index: 187 Query Diagram Table
Index: 188 Query Diagram Table Column
Index: 189 Query Diagram Join Line
Index: 190 Query Diagram Multi-select
Index: 191 Query Grid Pane
Index: 192 Query SQL Pane
Index: 193 Query Results Pane
Index: 194 View Designer
Index: 195 Database Diagram
Index: 196 Database Designer
Index: 197 Database Designer Table
Index: 198 Database Designer Relationship
Index: 199 Text Annotation
Index: 200 Table Designer
Index: 201 Database Project
Index: 202 DB Project Connection
Index: 203 DB Project Folder
Index: 204 Database References Folder
Index: 205 Folders
Index: 206 DB Project File
Index: 207 Query
Index: 208 Script
Index: 209 Database Reference Node
Index: 210 Files
Index: 211 Multi-select
Index: 212 PropertyBrowser
Index: 213 Selection
Index: 214 Container
Index: 215 TraySelection
Index: 216 Document Outline
Index: 217 Component Tray
Index: 218 Layout
Index: 219 Editor
Index: 220 Script Outline
Index: 221 Web Browser
Index: 222 DefaultContext
Index: 223 ImageContext
Index: 224 SelectionContext
Index: 225 AnchorContext
Index: 226 Debugger Project Context Menu
Index: 227 DataTips Context
Index: 228 Watch Item Context
Index: 229 Text Box Context
Index: 230 Call Hierarchy Context Menu
Index: 231 Parallel Tasks Window Context Menu
Index: 232 Tasks List Column Header Context Menu
Index: 233 Stacks Window Context Menu
Index: 234 Switch To Frame
Index: 235 Control
Index: 236 Report
Index: 237 Report Formatting
Index: 238 Row/Column
Index: 239 Cell
Index: 240 Field Chooser
Index: 241 Report Borders
Index: 242 Row/Column
Index: 243 Chart
Index: 244 Report
Index: 245 &Registry
Index: 246 &New
Index: 247 &File System
Index: 248 &File System
Index: 249 &Add
Index: 250 &View
Index: 251 &Add Special Folder
Index: 252 &File Types
Index: 253 &User Interface
Index: 254 &Launch Conditions
Index: 255 &Custom Actions
Index: 256 Project Node
Index: 257 E&ditor
Index: 258 A&dd
Index: 259 Cab Project Node
Index: 260 A&dd
Index: 261 Vie&w
Index: 262 File nodes
Index: 263 Dep. file nodes
Index: 264 Assembly nodes
Index: 265 Dep. assembly nodes
Index: 266 MSM nodes
Index: 267 Dep. MSM nodes
Index: 268 Output nodes
Index: 269 Simple file nodes
Index: 270 Simple output nodes
Index: 271 Dependency node
Index: 272 Multiple selections
Index: 273 Dep. Multiple selections
Index: 274 CSSDocOutline
Index: 275 CSSSource
Index: 276 Style Sheet
Index: 277 Dialog Editor
Index: 278 Resource View
Index: 279 Resource Editors
Index: 280 Resource Dialog Editors
Index: 281 Image Editor
Index: 282 Ribbon Editor
Index: 283 Resource Ribbon Editors
Index: 284 Binary Editor
Index: 285 ORDesigner Context
Index: 286 ORDesigner Context
Index: 287 ORDesigner Context
Index: 288 Propertysheet
Index: 289 Configuration
Index: 290 Project
Index: 291 Multi-Select
Index: 292 System Propertysheet
Index: 293 Exe Project
Index: 294 Debug
Index: 295 &Refactor
Index: 296 Smart Tag
Index: 297 Re&solve
Index: 298 &Implement Interface
Index: 299 &Organize Usings
Index: 300 G&enerate
Index: 301 References
Index: 302 Web Platform Installer
Index: 303 Web One Click Publish
Index: 304 Channels
Index: 305 Call Stack Report
Index: 306 Process Tree
Index: 307 Selection Panel
Index: 308 Binaries
Index: 309 Binary
Index: 310 Reports
Index: 311 Report
Index: 312 Session
Index: 313 Binary
Index: 314 Test Project
Index: 315 Create Work Item
Index: 316 Test Project
Index: 317 Marks
Index: 318 Summary
Index: 319 Module
Index: 320 Function
Index: 321 Butterfly
Index: 322 Calltree
Index: 323 Type
Index: 324 Lifetime
Index: 325 ProcessThreads
Index: 326 Views
Index: 327 Query
Index: 328 QueryControl
Index: 329 Line
Index: 330 IP
Index: 331 Marks
Index: 332 Diff
Index: 333 Contention
Index: 334 CounterChart
Index: 335 Boundary
Index: 336 IntelliTrace
Index: 337 Content Pane Context Menu
Index: 338 Context Pane Context Menu
Index: 339 Code Metrics Context Menu
Index: 340 Test Context
Index: 341 Code Change Context
Index: 342 Team Explorer - Builds
Index: 343 Team Explorer - Build Definition
Index: 344 Team Explorer - All Build Definitions
Index: 345 Build Explorer
Index: 346 &Sort By
Index: 347 Set Priorit&y
Index: 348 Build Queue Explorer
Index: 349 Team Explorer Multiple Items
Index: 350 Team Foundation Context Menus
Index: 351 Team Foundation Server
Index: 352 My Favorites
Index: 353 My Favorites Folder
Index: 354 Favorite
Index: 355 Documents
Index: 356 Documents Folder
Index: 357 Document File
Index: 358 Reports
Index: 359 Report
Index: 360 Report Folder
Index: 361 Source Control Explorer
Index: 362 Source Control Explorer Command Holder
Index: 363 Pending Changes Command Holder
Index: 364 Source Control Pending Changes Source Files
Index: 365 Compare
Index: 366 Source Control Pending Changes Work Items
Index: 367 Source Control Pending Changes Policy Warnings
Index: 368 Source Control History Changesets
Index: 369 Source Control History Labels
Index: 370 Annotate
Index: 371 Annotate
Index: 372 S&ource Control
Index: 373 Folder Difference
Index: 374 ConfigureUserTools
Index: 375 Online
Index: 376 Compare
Index: 377 Source Control Pending Changes Conflicts
Index: 378 Compare
Index: 379 Branch Visualizer
Index: 380 &Branching and Merging
Index: 381 Hierarchy Visualizer
Index: 382 Label
Index: 383 Branch Visualizer Command Holder
Index: 384 &Branching and Merging
Index: 385 Mappings
Index: 386 Checkin Dialog Context Menu
Index: 387 Pending Checkin Window Context Menu
Index: 388 Standard TreeGrid context menu
Index: 389 GetVersion Dialog Context Menu
Index: 390 Check Out Dialog Context Menu
Index: 391 Source Control - Team Foundation
Index: 392 Work Item Tracking
Index: 393 Work Items
Index: 394 Query Folder
Index: 395 Query
Index: 396 Query Builder
Index: 397 Results List
Index: 398 Work Item
Index: 399 Links Control
Index: 400 Results List Column Sort
Index: 401 New Work &Item
Index: 402 &Clauses
Index: 403 New Work Item
Index: 404 Lin&ks
Index: 405 Attac&hments
Index: 406 E&xpand/Collapse
Index: 407 Recorder
Index: 408 Macro
Index: 409 Module
Index: 410 Project
Index: 411 Root
Index: 412 SequenceDesigner Context
Index: 413 UseCaseModel Context
Index: 414 SmartTag
Index: 415 LogicalClassDesigner Context
Index: 416 ActivityDesigner Context
Index: 417 SmartTag
Index: 418 ComponentDesigner Context
Index: 419 LayerDesigner Context
Index: 420 Layer Explorer Context Menu
Index: 421 Model Explorer Context Menu
Index: 422 Data Sources
Index: 423 Managed Resources Editor Context Menu
Index: 424 Settings Designer
Index: 425 My Extensibility
Index: 426 Discover Service References
Index: 427 ClassDesignerContextMenu
Index: 428 ClassDiagramContextMenu
Index: 429 Class Designer
Index: 430 ClassDetailsContextMenu
Index: 431 &Generate Code for Coded UI Test
Index: 432 Load Test Editor Context Menu
Index: 433 Web Test Editor Context Menu
Index: 434 Run Test
Index: 435 Load Test Monitor Context Menu
Index: 436 Web Test Result Context Menu
Index: 437 Test Steps Context Menu
Index: 438 Test Parameters Context Menu
Index: 439 Test Data Context Menu
Index: 440 MicrosoftDataEntityDesign Context
Index: 441 MicrosoftDataEntityDesign Context
Index: 442 Web Deploy Project
Index: 443 &AnkhSVN Context Menus
Index: 444 Repository Explorer
Index: 445 Working Copy Explorer
Index: 446 &Pending Commits
Index: 447 Pending Commits &Header
Index: 448 Log Message Editor
Index: 449 Log Viewer List
Index: 450 Log Viewer Changed Paths
Index: 451 Listview Header
Index: 452 Annotate Context Menu
Index: 453 Source Control - Subversion
Index: 454 SqlEditorContextMenu
Index: 455 SqlEditorResultsContextMenu
Index: 456 SqlDebuggerContextMenu 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T12:45:24.110

专门与编辑脚本文件（以及关联的 JavaScript 文件）相关的上下文菜单是`cmdBars["Script Context"]`

为了找到这个，我使用以下循环将新菜单项添加到 Visual Studio 中的所有 (465) 菜单控件

```
foreach (CommandBar cc in cmdBars)
{
    if (cc.Index >= 1 && cc.Index <= 465)
    {
        command.AddControl(cmdBars[cc.NameLocal]);
    }
} 
```

然后我通过调整循环的边界使用分而治之的技术来缩小范围：

```
 if (cc.Index >= 1 && cc.Index <= 256)
    ...
    if (cc.Index >= 1 && cc.Index <= 128)
    ...
    if (cc.Index >= 64 && cc.Index <= 128)
    ...etc... 
```

直到我最终找到了我想要的东西。

# php - PHP oAuth2 提供程序

> ID：11709276
> 
> 赞同：0
> 
> 时间：2012-07-29T12:35:46.957
> 
> 标签：php, service, oauth-2.0, provider, oauth-provider

我正在尝试查找有关如何使用 PHP 构建 oAuth2 提供程序的教程。我用谷歌搜索了一下，没有结果。是否存在有关如何执行此操作的任何指南？或者可以帮助我使用 PHP 实现 oAuth2 服务提供程序的库之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:14:57.667

[https://github.com/bshaffer/oauth2-server-php](https://github.com/bshaffer/oauth2-server-php)这将有助于您获得想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T01:07:03.770

我一直在寻找同样的东西一段时间，但我没有找到太多。oAuth2 仍[处于草稿中](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2)。撰写本文时的当前版本为 30。

我发现的最好的东西是支持规范版本 9 的 Google 代码项目，它可能已经过时了。[你可以在这里](http://code.google.com/p/oauth2-php/)找到那个项目。

我还找到了这篇关于如何自己编写的文章，尽管我有一段时间没有看过这篇文章 -[如何在 PHP5 中编写完整的 OAuth 提供程序](http://djpate.com/2011/01/13/how-to-write-a-complete-oauth-provider-in-php5/)。

[Zend Framework 2](http://framework.zend.com/zf2)似乎有一些进展，看起来很有希望。看起来 RFC 是在 2012 年 6 月：[RFC - OAuth 2.0](http://framework.zend.com/wiki/display/ZFDEV2/RFC+-+OAuth+2.0)

我当然很想用自己的东西。

还提出了类似的问题以供参考，其中包括上述项目的链接：

*   [设置 PHP OAuth 提供程序](https://stackoverflow.com/questions/3454063/set-up-a-php-oauth-provider)
*   [是否有 OAuth 2 服务器端 PHP 或 Java 实现？](https://stackoverflow.com/questions/4875420/are-there-oauth-2-server-side-php-or-java-implementations)

希望有帮助！

有人找到/使用/推荐 oAuth2 提供程序库/类吗？

# asp.net - 什么是 lambda 表达式？

> ID：11709277
> 
> 赞同：-2
> 
> 时间：2012-07-29T12:35:52.703
> 
> 标签：asp.net, asp.net-mvc, lambda, expression-trees

使用 lambda 表达式有什么意义。

就像在 C# 中一样，foreach 循环可能需要 3-4 行来分配值

使用兰巴

```
List.foreach(x=>x.something = new value) 
```

我想了解更多关于 lambda 以及它在 C# 中的更高级用法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:49:15.073

lambda 表达式更像是一种方法的简写语法。

采用以下 lambda 表达式：

```
p => p.FullName 
```

这相当于：

```
string getFullName(Person p)
{
    return p.FullName;
} 
```

它的用法允许您创建匿名函数。所以一个接受委托的方法将被定义为：

```
public delegate string FullNameDelegate(Person p);
public void DoSomething(FullNameDelegate getter)
{
   Person p = new Person();
   string fullname = getter(p);
}
public string GetFullName(Person p)
{
    return p.FullName;
}

DoSomething(new FullNameDelegate(GetFullName)); 
```

lambda 等效项是：

```
public void DoSomething(Func<Person, string> getter)
{
   Person p = new Person();
   string fullname = getter(p);
}

DoSomething(p => p.FullName); 
```

# java - 分隔某个字符串中的变量

> ID：11709278
> 
> 赞同：1
> 
> 时间：2012-07-29T12:35:54.347
> 
> 标签：java

如何使用一些分隔符分隔某些字符串中的变量（或否定变量），例如 `^`

例子：

```
String vars= "ABC'DE'F"; 
```

应该是这样的：

```
"A^B^C'^D^E'^F" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:39:58.970

要分离你可以做的原子

```
String vars= "ABC'DE'F";

String[] atoms = vars.split("(?<=.)(?=[A-Z])");

// atoms = [A, B, C', D, E', F] 
```

要直接插入`^`，您可以这样做

```
vars = vars.replaceAll("(?<=.)(?=[A-Z])", "^");

// vars = A^B^C'^D^E'^F 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T12:41:18.527

对于直接字符串替换，请使用：

```
vars.replaceAll("(?!^)\\w", "^$0") 
```

输出：

```
A^B^C'^D^E'^F 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T12:55:32.950

```
private static void replace() {
    String str = "ABC'DE'F";
    String pattern = "('?\\w)";

    str = str.replaceAll(pattern, "^$1");
    System.out.println(str);
} 
```

印刷：

```
^A^B^C^'D^E^'F 
```

# android - 从 android assets 目录获取 File 对象或 URI 对象

> ID：11709279
> 
> 赞同：0
> 
> 时间：2012-07-29T12:35:55.407
> 
> 标签：android, assets

我必须从 android assets 目录中获取 File 对象或 Uri 对象，但我只知道如何获取 inputStream 对象。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:01:19.060

您无法将`File`对象获取到资产，因为它不是设备上的文件。它是您开发机器中的一个文件，但它只是设备上 APK 文件中的一个条目。

有些东西，比如`WebView`，可以与 , 一起使用`file:///android_asset/...` `Uri`，其中`...`替换为`assets/`项目中感兴趣文件的相对路径。例如，如果您的项目有`assets/index.html`,`file:///android_asset/index.html`将指向该文件。AFAIK，并非所有东西都可以使用这种`Uri`，特别是需要`URI`（例如`java.net`）的东西可能无法使用它。

# c# - 我如何使用标志在图片框绘制事件中绘制或不绘制？

> ID：11709280
> 
> 赞同：-2
> 
> 时间：2012-07-29T12:35:59.610
> 
> 标签：c#, winforms

我在 Form1 顶层有一个标志：在构造函数中将 addFrame 设置为 false。然后在 picnt 事件中，我检查它是否为假让我画，如果它为真也让我画。这里的问题是我希望在我第一次运行程序时能够绘图！但是当我将 trackBar 向右移动时，我不希望它绘制任何东西。

```
private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
        {

           Graphics g = e.Graphics;

           g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

               moveCounter++;
               label6.Text = moveCounter.ToString();

                   if (addFrame == false)
                   {
                       WireObjectGraphics.Draw(wireObject1, g);
                   }
                   else
                   {
                       addFrame = false;
                       WireObjectGraphics.Draw(wireObject1, g);
                   }

        } 
```

这是我单击以将 addFrame 设置为 true 的按钮单击事件：

```
private void button16_Click(object sender, EventArgs e)
    {
        wireObjectAnimation1.AddFrame();
        addFrame = true;
        trackBar1.Select();
    } 
```

在这种情况下，滚动条事件我想这样做，如果我将 trackBar 移动到右侧并且已经没有任何绘制，那么只需在图片框中显示图像就不要绘制任何东西！但是如果我把它移到右边并且已经有画了，那么一定要展示它们。

如果我把它移到左边总是显示以前的平局。

```
private void trackBar1_Scroll(object sender, EventArgs e)
        {
            if (addFrame == false)
            {

            }
            else
            {
                currentFrameIndex = trackBar1.Value - 1;
                textBox1.Text = "Frame Number : " + trackBar1.Value;

                wireObject1.woc.Set(wireObjectAnimation1.GetFrame(currentFrameIndex));
                trackBar1.Minimum = 0;
                trackBar1.Maximum = fi.Length - 1; 
                if (checkBox1.Checked)
                {
                    setpicture(trackBar1.Value);
                    Graphics g = Graphics.FromImage(pictureBox1.Image);
                    g.Clear(SystemColors.Control);
                    pictureBox1.Invalidate();
                }
                else
                {
                    setpicture(trackBar1.Value);
                }
                pictureBox1.Refresh();

                button1.Enabled = false;
                button2.Enabled = false;
                button3.Enabled = false;
                button4.Enabled = false;
                button8.Enabled = false;
                SaveFormPicutreBoxToBitMapIncludingDrawings(currentFrameIndex);

                return;

            }

        } 
```

这是 WireObjectGraphics 类中的绘制函数：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace AnimationEditor
{
    class WireObjectGraphics
    {
        static Point connectionPointStart;
        static Point connectionPointEnd;
        static SolidBrush brush;
        static Pen p = null;

        public WireObjectGraphics()
        {

        }

        public static void Draw(WireObject wo, Graphics graphics)
        {
            brush = new SolidBrush(Color.Red);
            p = new Pen(brush);
            Graphics g = graphics;
            WireObject wireObject1 = wo;

            if (wireObject1 != null)
            {
                for (int idx = 0; idx < wireObject1.woc.Point_X.Count; ++idx)
                {
                    Point dPoint = new Point((int)wireObject1.woc.Point_X[idx], (int)wireObject1.woc.Point_Y[idx]);
                    dPoint.X = dPoint.X - 5; // was - 2
                    dPoint.Y = dPoint.Y - 5; // was - 2
                    Rectangle rect = new Rectangle(dPoint, new Size(10, 10));
                    g.FillEllipse(brush, rect);
                    // bitmapGraphics.FillEllipse(brush, rect);

                    // g.FillEllipse(brush, rect);
                }

                for (int i = 0; i < wireObject1._connectionstart.Count; i++)
                {

                    int startIndex = wireObject1._connectionstart[i];
                    int endIndex = wireObject1._connectionend[i];

                    connectionPointStart = new Point((int)wireObject1.woc.Point_X[startIndex], (int)wireObject1.woc.Point_Y[startIndex]);
                    connectionPointEnd = new Point((int)wireObject1.woc.Point_X[endIndex], (int)wireObject1.woc.Point_Y[endIndex]);
                    p.Width = 2;
                    g.DrawLine(p, connectionPointStart, connectionPointEnd);
                    // bitmapGraphics.DrawLine(p, connectionPointStart, connectionPointEnd);
                }
            }
        }

    }

} 
```

我需要的是第一次运行程序才能画画！然后，当将 trackBar 移动到右侧以检查绘图是否已经存在时，如果不存在则显示它们仅显示图像，并且只有当我单击按钮时，它才会在框架上添加绘图。

如果我向左移动，总是显示我在其他帧中所做的平局。

线对象类：

构造函数：

```
class WireObject
    {
        private string an;
        private bool fnExt;
        public string lockObject;
        private int idx;
        public WireObjectCoordinates woc;
        private List<int> connectionStart = new List<int>();
        private List<int> connectionEnd = new List<int>();

        private const string version = "01.00";

        string wo_name;

        public WireObject( string name )
        {
            wo_name = name;
            woc = new WireObjectCoordinates();
            fnExt = false;
        } 
```

在wireobject类中，我有一些功能，比如连接点（像素），比如删除像素，比如保存和加载......

WireObjectCoordinates 类是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace AnimationEditor
{
    class WireObjectCoordinates
    {
        public List<float> Point_X = new List<float>();
        public List<float> Point_Y = new List<float>();

        public WireObjectCoordinates()
        {
        }

        public WireObjectCoordinates(WireObjectCoordinates w)
        {
            Point_X.AddRange(w.Point_X);
            Point_Y.AddRange(w.Point_Y);
        }

        public void Set(WireObjectCoordinates w)
        {
            if (w == null)
            {
            }
            else
            {
                for (int i = 0; i < Point_X.Count; i++)
                {
                    Point_X[i] = w.Point_X[i];
                    Point_Y[i] = w.Point_Y[i];
                }
            }
        }
    }
} 
```

问题仍然在 Form1 中，带有何时显示像素的标志，我的意思是何时以及如何调用诸如 pictureBox1.Refresh(); 之类的绘制事件；但是一旦它会使用内部的 Draw 函数，一旦它不会。当我运行程序时，让我使用绘图功能，一旦我将 trackBar 移动到右侧，不要使用绘图功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:13:14.810

对于 Windows 窗体控件 OnPaint 仅在以下情况下[调用/1e430ef4.aspx](http://msdn.microsoft.com/en-us/library/1e430ef4.aspx)

所以 OnPaint 应该被太频繁地调用。

# asp.net-mvc-3 - 每个步骤的 Knockout.js 向导验证

> ID：11709285
> 
> 赞同：1
> 
> 时间：2012-07-29T12:36:26.153
> 
> 标签：asp.net-mvc-3, validation, knockout.js, wizard

我已经设法根据 Niemeyer 给出的答案创建了一个简单的向导。这工作正常。我想添加验证。我设法在 Firstname 字段上添加了必需的验证。将此留空将显示错误。但我无法成功的是：在当前步骤中验证模型，并根据是否有错误启用或禁用下一步。如果启用或禁用下一个按钮太难，那没关系。当出现错误时，我也可以在没有禁用按钮的情况下生活。只要在出现错误时阻止用户进行下一步。

. 我的观点是这样的：

```
 //model is retrieved from server model
 <script type="text/javascript">
     var serverViewModel = @Html.Raw(Json.Encode(Model));
 </script>

<h2>Test with wizard using Knockout.js</h2>
  <div data-bind="template: { name: 'currentTmpl', data: currentStep }"></div> 
<hr/>

<button data-bind="click: goPrevious, enable: canGoPrevious">Previous</button>
<button data-bind="click: goNext, enable: canGoNext">Next</button>

<script id="currentTmpl" type="text/html">
    <h2 data-bind="text: name"></h2>
    <div data-bind="template: { name: getTemplate, data: model }"></div> 
</script>

<script id="nameTmpl" type="text/html">
    <fieldset>
        <legend>Naamgegevens</legend>
        <p data-bind="css: { error: FirstName.hasError }">
            @Html.LabelFor(model => model.FirstName)
            @Html.TextBoxFor(model => model.FirstName, new { data_bind = "value: FirstName, valueUpdate: 'afterkeydown'"})
            <span data-bind='visible: FirstName.hasError, text: FirstName.validationMessage'> </span>
        </p>
        @Html.LabelFor(model => model.LastName)
        @Html.TextBoxFor(model => model.LastName, new { data_bind = "value: LastName" })
    </fieldset>
</script>

<script id="addressTmpl" type="text/html">
    <fieldset>
        <legend>Adresgegevens</legend>
        @Html.LabelFor(model => model.Address)
        @Html.TextBoxFor(model => model.Address, new { data_bind = "value: Address" })
        @Html.LabelFor(model => model.PostalCode)
        @Html.TextBoxFor(model => model.PostalCode, new { data_bind = "value: PostalCode" })
        @Html.LabelFor(model => model.City)
        @Html.TextBoxFor(model => model.City, new { data_bind = "value: City" })
    </fieldset>
</script>

<script id="confirmTmpl" type="text/html">
        <fieldset>
        <legend>Naamgegevens</legend>
        @Html.LabelFor(model => model.FirstName)
        <b><span data-bind="text:NameModel.FirstName"></span></b>
        <br/>
        @Html.LabelFor(model => model.LastName)
        <b><span data-bind="text:NameModel.LastName"></span></b>
    </fieldset>
    <fieldset>
        <legend>Adresgegevens</legend>
        @Html.LabelFor(model => model.Address)
        <b><span data-bind="text:AddressModel.Address"></span></b>
        <br/>
        @Html.LabelFor(model => model.PostalCode)
        <b><span data-bind="text:AddressModel.PostalCode"></span></b>
        <br/>
        @Html.LabelFor(model => model.City)
        <b><span data-bind="text:AddressModel.City"></span></b>           
    </fieldset>
    <button data-bind="click: confirm">Confirm</button>
</script>

<script type='text/javascript'>
    $(function() {
        if (typeof(ViewModel) != "undefined") {
            ko.applyBindings(new ViewModel(serverViewModel));
        } else {
            alert("Wizard not defined!");
        }
    });
</script> 
```

knockout.js 实现如下所示：

```
function Step(id, name, template, model) {
    var self = this;
    self.id = id;
    self.name = ko.observable(name);
    self.template = template;
    self.model = ko.observable(model);

    self.getTemplate = function() {
        return self.template;
    };
}

function ViewModel(model) {
    var self = this;

    self.nameModel = new NameModel(model);
    self.addressModel = new AddressModel(model);

    self.stepModels = ko.observableArray([
            new Step(1, "Step1", "nameTmpl", self.nameModel),
            new Step(2, "Step2", "addressTmpl", self.addressModel),
            new Step(3, "Confirmation", "confirmTmpl", {NameModel: self.nameModel, AddressModel:self.addressModel})]);

    self.currentStep = ko.observable(self.stepModels()[0]);

    self.currentIndex = ko.dependentObservable(function() {
        return self.stepModels.indexOf(self.currentStep());
    });

    self.getTemplate = function(data) {
        return self.currentStep().template();
    };

    self.canGoNext = ko.dependentObservable(function () {
        return self.currentIndex() < self.stepModels().length - 1;
    });

    self.goNext = function() {
        if (self.canGoNext()) {
            self.currentStep(self.stepModels()[self.currentIndex() + 1]);
        }
    };

    self.canGoPrevious = ko.dependentObservable(function() {
        return self.currentIndex() > 0;
    });

    self.goPrevious = function() {
        if (self.canGoPrevious()) {
            self.currentStep(self.stepModels()[self.currentIndex() - 1]);
        }
    };
}

NameModel = function (model) {

    var self = this;

    //Observables
    self.FirstName = ko.observable(model.FirstName).extend({ required: "Please enter a first name" });;
    self.LastName = ko.observable(model.LastName);

    return self;
};

AddressModel = function(model) {

    var self = this;

    //Observables
    self.Address = ko.observable(model.Address);
    self.PostalCode = ko.observable(model.PostalCode);
    self.City = ko.observable(model.City);

    return self;
}; 
```

我已经为 Firstname 字段中使用的所需验证添加了一个扩展器：

```
ko.extenders.required = function(target, overrideMessage) {
    //add some sub-observables to our observable    
    target.hasError = ko.observable();
    target.validationMessage = ko.observable();
    //define a function to do validation    

    function validate(newValue) {
        target.hasError(newValue ? false : true);
        target.validationMessage(newValue ? "" : overrideMessage || "This field is required");
    }

    //initial validation    
    validate(target());

    //validate whenever the value changes    
    target.subscribe(validate);
    //return the original observable    
    return target;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T18:36:44.030

这是一个棘手的问题，但我会为您提供几个解决方案......

如果您只是想阻止 Next 按钮继续使用无效的模型状态，那么我发现的最简单的解决方案是首先向`<span>`用于显示验证消息的每个标签添加一个类：

```
<span class="validationMessage" 
      data-bind='visible: FirstName.hasError, text: FirstName.validationMessage'> 
```

*（奇怪的格式以防止水平滚动）*

接下来，在 goNext 函数中，更改代码以检查是否有任何验证消息可见，如下所示：

```
self.goNext = function() {
    if (
        (self.currentIndex() < self.stepModels().length - 1) 
        && 
        ($('.validationMessage:visible').length <= 0)
       ) 
    {
        self.currentStep(self.stepModels()[self.currentIndex() + 1]);
    }
}; 
```

现在，您可能会问“为什么不将该功能放入`canGoNext`依赖的可观察对象中？”，答案是调用该函数并没有像人们想象的那样工作。

因为`canGoNext`是 a `dependentObservable`，所以它的值会在它是其成员的模型发生变化的任何时候计算。

但是，如果它的模型没有改变，canGoNext 只是简单地返回上次计算的值，即模型没有改变，那为什么要重新计算呢？

这在仅检查是否还有更多步骤时并不重要，但是当我尝试在该函数中包含验证时，它就发挥了作用。

为什么？好吧，例如，更改 First Name 会更新`NameModel`它所属的 ，但是在 中`ViewModel`，self.nameModel 没有设置为可观察对象，因此尽管 NameModel 发生了更改，但 self.nameModel 仍然是相同的。因此，ViewModel 没有改变，因此没有理由重新计算 canGoNext。最终结果是 canGoNext 总是认为表单是有效的，因为它总是检查 self.nameModel，它永远不会改变。

令人困惑，我知道，所以让我向你抛出更多代码......

这是 的开头`ViewModel`，我结束了：

```
function ViewModel(model) {
    var self = this;

    self.nameModel = ko.observable(new NameModel(model));
    self.addressModel = ko.observable(new AddressModel(model));

    ... 
```

正如我所提到的，模型需要是可观察的，才能知道它们发生了什么。

`goNext`现在，对和方法的更改将在`goPrevious`不使这些模型可观察的情况下起作用，但要获得您正在寻找的真正实时验证，当表单无效时禁用按钮，使模型可观察是必要的。

虽然我最终保留了`canGoNext`and`canGoPrevious`函数，但我没有将它们用于验证。我稍后会解释。

不过，首先，这是我`ViewModel`为验证添加的函数：

```
self.modelIsValid = ko.computed(function() {
    var isOK = true;
    var theCurrentIndex = self.currentIndex();
    switch(theCurrentIndex)
    {
        case 0:
            isOK = (!self.nameModel().FirstName.hasError()
                    && !self.nameModel().LastName.hasError());
            break;
        case 1:
            isOK = (!self.addressModel().Address.hasError()
                    && !self.addressModel().PostalCode.hasError()
                    && !self.addressModel().City.hasError());
            break;
        default:
            break;
    };
    return isOK;                
}); 
```

*[是的，我知道......这个函数将 ViewModel 与 NameModel 和 AddressModel 类耦合起来，甚至不仅仅是引用每个类的实例，但现在，就这样吧。]*

下面是我在 HTML 中绑定这个函数的方法：

```
<button data-bind="click: goPrevious, 
                   visible: canGoPrevious, 
                   enable: modelIsValid">Previous</button>
<button data-bind="click: goNext, 
                   visible: canGoNext, 
                   enable: modelIsValid">Next</button> 
```

请注意，我进行了更改`canGoNext`，`canGoPrevious`因此每个都绑定到其按钮的`visible`属性，并且我将`modelIsValid`函数绑定到了`enable`属性。

`canGoNext`and函数与您提供的`canGoPrevious`一样 - 没有更改。

这些绑定更改的一个结果是，Previous 按钮在 Name 步骤中不可见，而 Next 按钮在 Confirm 步骤中不可见。

此外，当对所有数据属性及其关联的表单字段进行验证时，从任何字段中删除值会立即禁用“下一个”和/或“上一个”按钮。

哇，要解释的太多了！

我可能遗漏了一些东西，但这是我用来让它工作的小提琴的链接：http: [//jsfiddle.net/jimmym715/MK39r/](http://jsfiddle.net/jimmym715/MK39r/)

我敢肯定，在您完成此操作之前，还有更多工作要做，还有更多障碍要跨越，但希望这个答案和解释会有所帮助。

# ruby - 用 Ruby 实现 Rock, Paper, Scissors 锦标赛

> ID：11709287
> 
> 赞同：1
> 
> 时间：2012-07-29T12:37:26.443
> 
> 标签：ruby

我是 Ruby 的新手，我正在尝试使用该语言实现一个石头剪刀布锦标赛，作为练习。

在下面的代码中调用的 rps_game_winner 方法返回一对竞争对手中的获胜者。

到目前为止，这是我的尝试：

```
def rps_tournament_winner(tournament)
  qualifying_round_winners = []
  for i in 0..0
  tournament.each_with_index do |x, xi|
    x.each_with_index do |y, yi|
      winner = rps_game_winner(y)
      qualifying_round_winners.push(winner) 
      qualifying_round_winners = qualifying_round_winners.each_slice(2).to_a
    end
  end
  tournament = qualifying_round_winners.each_slice(2).to_a
  end
  return tournament 
end 
```

这是我提供的输入：

```
puts rps_tournament_winner([
 [
   [ ["Armando", "P"], ["David", "S"] ],
   [ ["Richard", "R"],  ["Michael", "S"] ]
 ]

]) 
```

我得到的输出是：

```
David
S
Richard
R 
```

这就是我卡住的地方。我无法让这两个相互竞争，并宣布最终获胜者。

正如你在上面的代码中看到的，for循环的终止条件需要注意。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:05:09.540

我对你的代码做了一些修改。

**注意：**如果我给`[ ["Armando", "P"], ["David", "S"] ]`我的函数作为输入，`rps_game_winner()`它会给出类似的结果`["David", "S"]`。

```
def rps_tournament_winner(tournament)
  qualifying_round_winners = []
  for i in 0..0
  tournament.each_with_index do |x, xi|
    x.each_with_index do |y, yi|
      winner = rps_game_winner(y)
      qualifying_round_winners.push(winner) 
    end
  end
  tournament = rps_game_winner(qualifying_round_winners)
  end
  return tournament 
end 
```

所以对于你的输入

```
[[ [["Armando", "P"], ["David", "S"]], [["Richard", "R"], ["Michael", "S"]] ]] 
```

它也会返回一个类似的结果`["Richard", "R"]`。

# clojure - 如何运行 leiningen 创建的项目？

> ID：11709289
> 
> 赞同：4
> 
> 时间：2012-07-29T12:37:59.997
> 
> 标签：clojure, leiningen

我正在运行 Debian Wheezy、openjdk-7-jre、clojure 1.4.0 和 leiningen-1.7.1，它们都是从官方 repo 安装的。

所以我跑了

```
lein new hello
cd hello
lein run -m hello.core 
```

并看到一个错误：

```
Exception in thread "main" java.lang.RuntimeException: java.lang.ClassNotFoundException: hello.core
at clojure.lang.Util.runtimeException(Util.java:165)
at clojure.lang.RT.classForName(RT.java:2017)
at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:206)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:92)
at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:225)
at user$eval35.invoke(NO_SOURCE_FILE:1)
at clojure.lang.Compiler.eval(Compiler.java:6465)
at clojure.lang.Compiler.eval(Compiler.java:6455)
at clojure.lang.Compiler.eval(Compiler.java:6431)
at clojure.core$eval.invoke(core.clj:2795)
at clojure.main$eval_opt.invoke(main.clj:296)
at clojure.main$initialize.invoke(main.clj:315)
at clojure.main$null_opt.invoke(main.clj:348)
at clojure.main$main.doInvoke(main.clj:426)
at clojure.lang.RestFn.invoke(RestFn.java:421)
at clojure.lang.Var.invoke(Var.java:405)
at clojure.lang.AFn.applyToHelper(AFn.java:163)
at clojure.lang.Var.applyTo(Var.java:518)
at clojure.main.main(main.java:37)
Caused by: java.lang.ClassNotFoundException: hello.core
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at clojure.lang.RT.classForName(RT.java:2013)
... 21 more 
```

我以前从未用 Java 写过任何东西，所以这对我来说非常神秘。我试图添加

```
:main hello.core 
```

到我的 project.clj 文件，然后只是

```
lein run 
```

但这对我没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-29T13:26:42.247

要运行该`main`函数，请确保`hello.core`包含`-main`如下方法：

```
(ns hello.core)

(defn -main
  [& args]
  (println "Hello, World!")) 
```

您可以使用`-m`标志运行它：`lein run -m hello.core`.

或者，如果您指定其名称，您可以运行任意函数：

```
(ns hello.core)

(defn my-run
  [& args]
  (println "Hello, World! from Run")) 
```

并使用命名空间/函数名作为参数调用它：

```
lein run -m hello.core/my-run 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T20:32:33.197

您可能想从以下内容开始：

```
lein new app hello 
```

这应该为存根主方法创建一个框架项目设置。它还将在正确的位置放入一个 gen-class，以便您可以使用 uberjar 进行部署。

# node.js - 为什么 node.js Express 框架在设置会话变量时不使用回调？

> ID：11709292
> 
> 赞同：1
> 
> 时间：2012-07-29T12:38:26.350
> 
> 标签：node.js, session, callback, express

我注意到，为了将值存储到会话中，您只需调用 req.session.key = value 而无需指定回调。我使用 connect-mysql 模块将 mysql 设置为我的会话存储适配器。所以我想知道每次我将一个值保存到正在数据库中更新的会话时，不应该有一个与此相关的回调吗？然而，无论我看到哪里，人们都在愉快地同步使用它。有人可以解释为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:11:34.397

[`session`中间件](http://www.senchalabs.org/connect/session.html)实际上每个请求只与数据存储交互两次，而不是每次更改都立即交互：

1.  在请求开始时批量`Store#get()`检索`Session`。（[来源](https://github.com/senchalabs/connect/blob/2.4.2/lib/middleware/session.js#L298-327)）
2.  使用`Store#set()`(via [`Session#save()`](https://github.com/senchalabs/connect/blob/2.4.2/lib/middleware/session/session.js#L62-65))`Session`在请求结束时批量保存。（[来源](https://github.com/senchalabs/connect/blob/2.4.2/lib/middleware/session.js#L267-277)）

`session`在这些步骤之间，可以同步进行更改。它们只应该在调用`res.end()`或类似的 ( `res.render()`,`res.json()`等) 被调用之前完成。

# c# - 如何按键查找/检查字典值

> ID：11709294
> 
> 赞同：10
> 
> 时间：2012-07-29T12:39:26.877
> 
> 标签：c#, .net, windows

我正在尝试确认特定的字典键是否包含值

例如

dict01 是否在“tester”键中包含短语“testing”

目前我不得不使用 KeyPair 遍历字典，我不想这样做，因为它浪费了性能

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-29T12:41:15.857

您可以使用[ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx)和[string.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)：

```
var key = "tester";
var val = "testing";
if(myDictionary.ContainsKey(key) && myDictionary[key].Contains(val)) 
{
    // "tester" key exists and contains "testing" value
} 
```

您还可以使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)：

```
var key = "tester";
var val = "testing";
var dicVal = string.Empty;
if(myDictionary.TryGetValue(key, out dicVal) && dicVal.contains(val)) 
{
    // "tester" key exists and contains "testing" value
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:49:55.787

如果您不想遍历字典两次，可以使用以下方法

```
string value;
var result = dict01.TryGetValue("tester", out value) && value.Contains("testing"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T12:42:00.947

```
if (myDict.ContainsKey("tester"))
    // Do something? 
```

[更多关于 MSDN](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGkQFjAA&url=http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx&ei=iy8VUMrEM6j34QTf5oGwDw&usg=AFQjCNG5GA_lnHiZsKX8RWGowcf1VMlbwQ&sig2=O7GgSJb_1eJMv6ctFrrTdg)

# php - 如何在 wamp 上安装 php_id3？

> ID：11709295
> 
> 赞同：1
> 
> 时间：2012-07-29T12:39:33.857
> 
> 标签：php, wampserver, id3

我试图找到人们正在谈论的文件，即 php_id3.dll。我已经读到你可以在 wamp 上使用 id 3 安装它，但是当我用谷歌搜索它时，我得到了各种各样的诈骗网站。

有谁知道我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:58:24.697

您需要的所有信息都在官方 PHP 文档中：

您得到的错误（未定义函数）意味着您的 PHP 配置中未启用 ID3 扩展：

*   [如何更改配置设置](http://www.php.net/manual/en/configuration.changes.php)

如果您没有 ID3 扩展文件（它可能名为 php_id3.dll 或类似名称），您必须找到下载它的地方，或者自己从源代码构建它。

*   [ID3 安装](http://www.php.net/manual/en/id3.installation.php)
*   [在 Windows 上构建](http://www.php.net/manual/en/install.windows.building.php)
*   [安装 PECL 扩展](http://www.php.net/manual/en/install.pecl.php)
*   [在 Windows 上安装 PHP 扩展](http://www.php.net/manual/en/install.pecl.windows.php)
*   [下载 PECL 扩展](http://www.php.net/manual/en/install.pecl.downloads.php)
*   [PECL 封装 ID3](http://pecl.php.net/package/id3)
*   [从源头构建](http://www.php.net/manual/en/install.windows.building.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-16T08:49:13.363

[从https://github.com/JamesHeinrich/getID3](https://github.com/JamesHeinrich/getID3)下载 php-id3

将其移至您的项目位置，您需要包含该文件。例如：要求（“getid3/getid3.php”）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T18:27:32.010

> 此 PECL 扩展的 DLL 当前不可用。另请参阅 Windows 部分的构建。

来源：[http ://www.php.net/manual/en/id3.installation.php](http://www.php.net/manual/en/id3.installation.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T12:35:15.887

我期待像apt-get install php5-id3v2这样的东西，但是这个lib似乎已经过时并且被放弃了。当然，它可能仍然有效，但安装起来不是很直观。

所以我想出了另一个解决方案，我在 stackexchange 上找到了它： [https ://unix.stackexchange.com/questions/4961/which-mp3-tagging-tool-for-linux](https://unix.stackexchange.com/questions/4961/which-mp3-tagging-tool-for-linux)

我安装**了命令行工具 id3v2**，这正是我需要的：读取**和修改**基本标签（专辑、艺术家、标题、评论......）

它安装简单

```
apt-get install id3v2 
```

并且非常易于使用。这是手册页的摘录：

```
 -t, --song SONG
          Set the song title information

   -c, --comment DESCRIPTION:COMMENT
          Set the comment information 
```

*注意：在同一篇文章中，还有另一个我懒得尝试的工具：“eyeD3”*

希望这可以帮助。

# java - 为什么 Google Guava Preconditions 的 checkArgument 不返回值？

> ID：11709300
> 
> 赞同：6
> 
> 时间：2012-07-29T12:40:45.940
> 
> 标签：java, guava, argument-passing

我真的很喜欢 guava 库如何允许简单的单行代码检查 null：

```
public void methodWithNullCheck(String couldBeNull) {
    String definitelyNotNull = checkNotNull(couldBeNull);
    //...
} 
```

可悲的是，对于简单的参数检查，您至少需要两行代码：

```
public void methodWithArgCheck(String couldBeEmpty) {
    checkArgument(!couldBeEmpty.isEmpty());
    String definitelyNotEmpty = couldBeEmpty;
    //...
} 
```

但是，可以添加可以进行参数检查*并*在检查成功时返回值的方法。以下是检查的示例以及如何实施：

```
public void methodWithEnhancedArgCheck(String couldBeEmpty) {
    String definitelyNotEmpty = EnhancedPreconditions.checkArgument(couldBeEmpty, !couldBeEmpty.isEmpty());
    //...
}

static class EnhancedPreconditions {
    public static <T> T checkArgument(T reference, boolean expression) {
        if (!expression) {
            throw new IllegalArgumentException();
        }

        return reference;
    }
} 
```

我只是想知道这是设计使然，是否值得为此提出功能要求。

**编辑**：@Nizet，是的，检查方法可能很笨拙。但是在构造函数中检查空值看起来非常好，并且可以节省大量用于调试 NPE 的时间：

```
public class SomeClassWithDependency {

    private final SomeDependency someDependency;

    public SomeClassWithDependency(SomeDependency someDependency) {
        this.someDependency = checkNotNull(someDependency);
    }

    //... 
```

**编辑**：接受 Nizet 的回答，因为我同意他的副作用和一致性推理。此外，如果您查看 Xaerxess 评论，它看起来也会在其他开发人员中引起混淆。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-29T14:05:54.663

返回其参数的最大单一原因`checkNotNull`是它可以在构造函数中使用，如下所示：

```
public Foo(Bar bar) {
  this.bar = checkNotNull(bar);
} 
```

`checkArgument`但是不做类似事情的主要原因是无论如何你都必须单独传递参数，而且这似乎不值得——尤其是使用更复杂的前置条件检查，有时在他们的自己的线。仅仅因为某些东西*可以*是单行的，并不意味着它*应该*是，如果它不增加可读性的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:48:04.280

我从来不明白为什么`checkNotNull()`首先返回它的论点：

```
public void foo(String bar) {
    Preconditions.checkNotNull(bar);
    // here, you're sure that bar is not null. 
    // No need to use another variable or to reassign bar to the result 
    // of checkNotNull()
} 
```

`checkNotNull()`如上所述，我个人忽略 的结果。这使得事情与其他返回无效的检查一致。

我看到的唯一优点是您可以执行类似的操作，但我发现它的可读性不如在两个单独的行中执行：

```
public String trim(String bar) {
    return Preconditions.checkNotNull(bar).trim();
} 
```

所以，简而言之，我同意你的观点，API 有点不一致，但我希望所有方法都返回 void。一个方法应该要么有副作用，要么返回一些东西，但通常应该避免两者都做。在这里，该方法的目标是产生副作用：抛出异常。

编辑：

您的示例确实是对为什么返回参数有用的更有效的解释。但我仍然倾向于一致性和清洁性，而不是这种在一行中检查和分配的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-30T23:40:05.543

您可以将 valid4j 与 hamcrest-matchers 一起使用（在 Maven Central 上以 org.valid4j:valid4j 的形式找到）

对于前置条件和后置条件：

```
import static org.valid4j.Assertive.*;

this.myField = require(argument, notNullValue());
this.myInteger = require(x, greaterThan(0));
...
return ensure(result, isValid()); 
```

对于输入验证：

```
import static org.valid4j.Validation.*;

validate(argument, isValid(), otherwiseThrowing(InvalidException.class)); 
```

链接：

*   [http://www.valid4j.org/](http://www.valid4j.org/)
*   [https://github.com/helsing/valid4j](https://github.com/helsing/valid4j)

# firefox - 供应商扩展在 Chrome 上是多余的，在 Firefox 中不起作用

> ID：11709301
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:40:51.387
> 
> 标签：firefox, google-chrome, css, vendor-prefix

我一直在玩下面的代码，有两件事我不太明白。第一个是 Chrome 似乎接受了无供应商半径规范。那么我们为什么要在里面放“-webkit”呢？

```
-webkit-border-radius: 10px;
-moz-border-radius: 20px;
border-radius: 30px; 
```

我还注意到，同样的命令在 Firefox 中无效。边界角保持锋利。我是否缺少有关供应商扩展的信息？

HTML

```
<div class="blobb">
<form id="myForm" runat="server">
  <input id="info" type="text" placeholder="Info" />
</form>
</div> 
```

CSS

```
div.blobb{
  width: 200px;
  height: 100px;
  padding: 15px 25px 0 25px;
  margin: 15px 0px 15px 30px;
  cursor: default;

  border: 1px solid #666666;
  background-color: #ccaa99;

  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:55:05.810

Chrome 在版本 5 中从 -webkit- 切换到无前缀名称。Firefox 在版本 4 中从 -moz- 切换到无前缀名称。详情请点击此处：caniuse.com/border-radius – Šime Vidas 7 月 29 日 13:03

# ios - coreaudio 的 rendertone 函数的多个实例或（如何）用相同的函数播放不同的东西

> ID：11709309
> 
> 赞同：1
> 
> 时间：2012-07-29T12:41:55.643
> 
> 标签：ios, singleton, implementation, core-audio

我的代码是基于[这个网站的例子，](http://cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)但不同的是我希望能够玩两个不同的东西：`Note`对象和`Song`对象。我认为我有两种方法可以做到这一点。

我想到的第一种方法是对该方法有两种不同的实现，`RenderTone`并根据我想玩的方法调用适当的方法。我不知道这是否可行，如果可行，我不知道该怎么做，因此欢迎对此提出任何建议。

我想到的第二种方法是有一个`PlaybackHelper`Singleton 类（我永远不会同时玩多个东西），它有一个包含我想玩的对象的数据成员。我可以在调用该方法之前将所有信息添加到该对象`RenderTone`，并且我可以重置所有播放完成的内容。我不确定这是否是一种非常干净的做事方式。特别是因为我没有构造函数，并且在使用该类之前和之后我必须重置所有内容。

你们有什么感想？欢迎任何建议或替代/更好的建议！

# php - Zend框架中的级联下拉

> ID：11709313
> 
> 赞同：0
> 
> 时间：2012-07-29T12:42:17.047
> 
> 标签：php, zend-framework, zend-form

我是 Zend Framework 的新手，我正在尝试使用 Zend Form 制作表单。在那种形式中，我想要国家、州和城市的级联下拉菜单。我已经从数据库中填写了国家/地区的下拉列表，但我不知道如何通过获取国家/地区 ID 来填写州的下拉列表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:00:33.173

你必须像这样设置一个关联数组：

```
$tCountries = array(
    1 => "France",
    2 => "USA"
);

$element = new Zend_Form_Element_Select();
$element->addMultiOptions($tCountries); 
```

您可以在这里找到更多信息：http: [//framework.zend.com/manual/en/zend.form.standardElements.html#zend.form.standardElements.select](http://framework.zend.com/manual/en/zend.form.standardElements.html#zend.form.standardElements.select)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-29T13:23:00.020

要动态加载国家/地区，您应该按照您的方式使用它：

> 我以前用标准的 php 和 jquery 做过这个

和这里无关`Zend_Form`。您应该有一项`JSON`服务（例如），它将接受`CountryID`并返回所有可用状态。

为此，您应该在您的部分中连接`jQuery`库。`<head>`

```
$this->view->headScript()->appendFile('/js/jquery-1.7.3.js'); // In your Controller 
```

将您`jQuery`的脚本添加到您的脚本中`template`，它将处理这样的所有事件：

```
$_form->inlineScript()->appendScript(' // my raw JS here'); 
```

或者

```
$_form->inlineScript()->appendFile('js/dynamicCountry.js'); // if you want to keep it in separate file 
```

在这里，`Zend_From`除了分配正确的元素`ID`'s`classes`或`names`.

你可以为你`service`做某事。相似的。假设网址`http://localhost/mysite/service/states/country/AT`

```
/**
 * In your Service controller disable rendering for your layout and views
 */
public function preDispatch() {
        $this->_helper->layout()->disableLayout(); // if you have `layout` enabled
        $this->_helper->viewRenderer->setNoRender(true);
    } 
```

和...欢迎

```
public function statesAction() {

    $request = $this->getRequest();

    /**
     * Country code transmitted through the parameter
     * @var string
     */
    $country = $request->getParam('country');

        // you are free to do whatever you want and return JSON (for e.g.)
} 
```

# html - 为什么我的网站不会显示在 Internet Explorer 中？

> ID：11709318
> 
> 赞同：0
> 
> 时间：2012-07-29T12:42:55.820
> 
> 标签：html, css, internet-explorer, flash

有人可以在 IE 上查看我的[网站](http://www.stouffvillechristmashometour.ca)并通过查看源查看我的代码并让我知道我做错了什么。

我的网站显示在 Firefox 上，但在 IE 中只显示我的粉红色背景，我的所有内容都丢失了。我和我的托管公司谈过，他们认为它的可比性问题，但他们是我不相信的原因。

1.  在我更改文本大小和一些图像之前，我的网站已经启动并运行了 40 分钟。

2.  我没有更改我所知道的任何主要编码来使我的网站成为兼容性问题。

它是一个基本网站，但我需要我的网站在 IE 中运行。我会把我的代码放在这里，但它太长了。此外，当我通过 Dreamweaver 预览查看我的网站时，它也只显示 IE 中的粉红色背景。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T12:47:26.550

您在 script 标签下打开了一个 html 注释，但从未关闭它。

```
<style type="text/css">
<!-- 
```

关闭它如下：

```
 -->
</script> 
```

# android - Android应用布局问题

> ID：11709324
> 
> 赞同：0
> 
> 时间：2012-07-29T12:43:13.493
> 
> 标签：android, android-layout

大家好，我是 android 开发的新手。在我的应用程序中，我想显示如下图所示的布局：

![在此处输入图像描述](../Images/cab9e420fec2c4035ebff6a49a6f2e1d.png)
但我得到的是这张图片：

![http://www.freeimagehosting.net/newuploads/7aqo7.jpg](../Images/5dd3faecb6884ce193ebd1c03b14a6c3.png)

这是我的代码：- [http://www.freefilehosting.net/bookingform_1](http://www.freefilehosting.net/bookingform_1)

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg" >
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/BookingFormRoomLabel"
            android:textColor="@android:color/white" />
        <Spinner
            android:id="@+id/roomspinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/BookingFormDocTypeLabel"
            android:textColor="@android:color/white" />
        <Spinner
            android:id="@+id/DocTypeSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/BookingFormAdultsLabel"
            android:textColor="@android:color/white" />
        <Spinner
            android:id="@+id/AdultsSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/BookinFormChildrensLabel"
            android:textColor="@android:color/white" />
        <Spinner
            android:id="@+id/ChildrensSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/BookingFormNightsLabel"
            android:textColor="@android:color/white" />
        <Spinner
            android:id="@+id/NightSpinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
             android:layout_weight="1">
             <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >
                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
                </TabWidget>
                 <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                    <LinearLayout
                        android:id="@+id/tab1"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >
                        <TableRow
                            android:id="@+id/tableRow7"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_span="2" >
                            <ImageView
                                android:id="@+id/MainImageView"
                                android:layout_width="200dp"
                                android:layout_height="200dp"
                                android:layout_weight="1"
                                android:contentDescription="@string/BookingFormMainImage"
                                android:src="@drawable/documentsample" />
                            <Button
                                android:id="@+id/button1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Button" />

                            <Button
                                android:id="@+id/button2"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:gravity="center_vertical"
                                android:text="Button" />

                        </TableRow>
                        </LinearLayout>
                        <LinearLayout
                        android:id="@+id/tab2"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >
                        <ImageView
                            android:id="@+id/SubImageView"
                            android:layout_width="200dp"
                            android:layout_height="200dp"
                            android:contentDescription="@string/BookingFormSubImage"
                            android:src="@drawable/documentsample" />
                        <Button
                            android:id="@+id/BtnSubImageCapture"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="right"
                            android:text="@string/BtnBookingFormSubImageCapture" />
                        <Button
                            android:id="@+id/BtnSubImageBrowse"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="right|center"
                            android:text="@string/BtnBookingFormSumbImageBrowse" />
                        <Button
                            android:id="@+id/BtnSubImageDelete"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:gravity="right|center_vertical|center"
                            android:text="@string/BtnBookingFormSubImageDelete" />
                        </LinearLayout>
                        </FrameLayout>
            </LinearLayout>
        </TabHost>
        </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:50:36.983

只需再添加一个`LinearLayout`保留布局`orientation`并将`vertical`这些按钮保留在该布局中。

```
<LinearLayout
    android:id="@+id/tab2"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <ImageView
       android:id="@+id/SubImageView"
       android:layout_width="200dp"
       android:layout_height="200dp"
       android:contentDescription="@string/BookingFormSubImage"
       android:src="@drawable/documentsample" />
       <LinearLayout
           android:id="@+id/buttons_layout"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:orientation="vertical" >
           <Button
               android:id="@+id/BtnSubImageCapture"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:gravity="right"
               android:text="@string/BtnBookingFormSubImageCapture" />
           <Button
               android:id="@+id/BtnSubImageBrowse"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:gravity="right|center"
               android:text="@string/BtnBookingFormSumbImageBrowse" />
           <Button
               android:id="@+id/BtnSubImageDelete"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:gravity="right|center_vertical|center"
               android:text="@string/BtnBookingFormSubImageDelete" />
           <LinearLayout/>
      </LinearLayout> 
```

# objective-c - 使用 OAuth 在 Tumblr 上发布图片

> ID：11709325
> 
> 赞同：2
> 
> 时间：2012-07-29T12:43:32.970
> 
> 标签：objective-c, oauth, tumblr

我正在尝试使用 OAuth 在 Tumblr 上发布图像。我正在使用Objective C，但通用解决方案也会非常有帮助。

我设法发布了一张在线图片（使用“来源”参数）。但是，我无法从客户端发布图像（使用“数据”参数），有些问题让我感到困惑。

1）我应该使用“multipart/form-data”还是“application/x-www-form-urlencoded”？我在这个问题上看到了相互矛盾的说法。

2）我应该在我的帖子正文中放什么，我应该在我的底线中放什么？根据 oAuth 规范，如果我使用“multipart/form-data”，那么我不需要将添加到帖子正文的参数（如“type”和“caption”）添加到基本字符串，但即使当我成功使用“source”发布时，它只有在我将参数添加到基本字符串时才有效。

3）我应该以什么格式将图像添加到正文中？如果我还需要将它添加到基本字符串中，那么我应该以什么格式添加它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:51:31.570

Tumblr 的问题是 OAuth 的“不寻常”实现（[OAuth 问题](https://github.com/nquinlan/Tumblr-OAuth/issues/2)）。“旧” OAuth（来自 code.google.com/p/oauth/）不太可能实现。我自己最终使用了以下解决方案之一：将[OAuth 与 ASIFormDataRequest 杂交](http://hytgbn.net/2012/02/tip-of-uploading-images-to-tumblr-using-oauth-on-ios/)，但它不太可能与多个图像一起使用，或者集成[TumblrUploadr](https://github.com/vvanhee/TumblrUploadr)。此外，Tumblr 可能会更好地与新的 OAuth 库（来自[此处](https://github.com/jdg/oauthconsumer)）一起使用，但如果您使用它，它肯定会与 ShareKit 冲突。

关于您的问题：

1.  TumblrUploadr 使用*application/x-www-form-urlencoded*所以它很可能是这个。
2.  使用上述任何解决方案，您应该只传递图像的 UIImageJPEGRepresentation 。TumblrUploadr 有它自己的 URL 编码和 ASIFormDataRequest，我不确定。
3.  URL 编码的二进制数据，如 Tumblr API 中所述。我自己并没有深入研究 ASIFormDataRequest，所以我不确定是否需要将它添加到基本字符串中。

# oauth - 关于将 Google 的 OAuth 与我的应用程序集成的一些指南

> ID：11709332
> 
> 赞同：0
> 
> 时间：2012-07-29T12:44:38.657
> 
> 标签：oauth, openid, oauth-2.0

这是一个非常高级的问题，也是一个高级别的答案，所以我只是在寻找一些正确方向的指针。

假设我想构建一个 Web 应用程序来管理用户的 Google 通讯录。我知道这是通过允许用户使用他的 Google 帐户登录同时请求管理他的 Google 通讯录的权限来完成的。到目前为止，一切都很好。

现在我想为外部浏览器扩展、Android 客户端等公开我自己的 API 层。但是，虽然我希望 API 客户端对 Google 进行身份验证，但我不希望应用程序拥有对用户日历的完全访问权限，因为 Secret令牌存储在服务器上。

那么，这通常是如何处理的呢？我想尽可能地按书本做，而不必实现大量的安全代码。

顺便说一句，虽然问题太高了，但请随时向我指出技术文档。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:14:17.267

对用户资源的有限访问只能通过有限的 OAuth 范围来保证：

[https://developers.google.com/gdata/docs/auth/oauth#Scope](https://developers.google.com/gdata/docs/auth/oauth#Scope)

一些 API，例如 Contacts API，只提供一个范围，让您可以访问所有数据。在这种情况下，用户只能选择让您访问他的所有联系人或不让您访问。

其他 API 公开不同的 OAuth 范围，允许开发人员仅请求访问用户数据的子集。Google Drive API 就是一个很好的例子，它有 5 种不同的范围供开发人员选择：

[https://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

# c# - C#中switch语句的“使用未分配的局部变量”编译器错误？

> ID：11709336
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:45:02.690
> 
> 标签：c#, enums, io, switch-statement

我有以下 C# 代码：

```
AnimalTypeEnum animal;
string s = Console.ReadLine();
switch (s.ToLower())
{
case "dog":
    animal = AnimalTypeEnum.DOG;
    break;
case "cat":
    animal = AnimalTypeEnum.CAT;
    break;
case "rabbit":
    animal = AnimalTypeEnum.RABBIT;
    break;
}

Console.WriteLine(animal); #compiler error here 
```

我在最后一行收到此错误：`Use of unassigned local variable 'animal'`. 我知道这是因为`animal`根据用户输入可能没有值，那么我该如何解决呢？

理想情况下，如果输入了未知的动物类型，我想显示一条错误消息，并让用户再次输入该值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T12:51:40.950

这是修复它的一种方法，使用递归调用而不是需要捕获和抛出异常，或者使用循环（在这种情况下循环混淆了我认为的含义；太多关于你如何做而不是你做什么'正在做）：

```
private static AnimalTypeEnum GetAnimalFromInput()
{
    AnimalTypeEnum animal;
    string s = Console.ReadLine();
    switch (s.ToLower())
    {
        case "dog":
            animal = AnimalTypeEnum.DOG;
            break;
        case "cat":
            animal = AnimalTypeEnum.CAT;
            break;
        case "rabbit":
            animal = AnimalTypeEnum.RABBIT;
            break;
        default:
            Console.WriteLine(s + " is not valid, please try again");
            animal = GetAnimalFromInput();
            break;
    }
    return animal;
}
static void Main(string[] args)
{
    AnimalTypeEnum animal = GetAnimalFromInput();

    Console.WriteLine(animal);
} 
```

我还要注意，将 switch 重构为 if/else 链是一种很好的做法，使用`if (s.Equals("dog", StringComparison.CurrentCultureIgnoreCase))`（或适当的不区分大小写的比较）以使其在其他文化中正常工作。当然，这可能不适用于您的场景（例如测试/家庭作业应用程序，或仅可能在您的文化中使用的东西）。

* * *

**更新：**感谢 Mennan Kara 的想法，如果您的值（例如`"dog"`）将始终与枚举的值（例如`DOG`）匹配，那么您可以使用它`Enum.TryParse`来改进您的代码：

```
private static AnimalTypeEnum GetAnimalFromInput()
{
    AnimalTypeEnum animal;
    string s = Console.ReadLine();
    if (Enum.TryParse(s, true, out animal))
        return animal;
    else
    {
        Console.WriteLine(s + " is not valid, please try again");
        return GetAnimalFromInput();
    }
} 
```

如果您需要将它们分开的灵活性，请保留现有的开关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:47:00.210

万一是, or ,没有价值`s.ToLower()`的其他东西。`dog``cat``rabbit``animal`

对于这种情况，您应该在开关中添加默认值：

```
switch (s.ToLower())
{
case "dog":
    animal = AnimalTypeEnum.DOG;
    break;
case "cat":
    animal = AnimalTypeEnum.CAT;
    break;
case "rabbit":
    animal = AnimalTypeEnum.RABBIT;
    break;
default:
    animal = ...
    break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T12:58:59.807

```
AnimalTypeEnum animal;
var s = Console.ReadLine();
Console.WriteLine(!Enum.TryParse(s, true, out animal) ? "Not a valid animal" : animal.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T13:19:04.020

您应该为*您的代码*`ENUM`未知的任何动物设置默认值。你甚至可以编写代码来学习新动物。例如。

 *```
switch (s.ToLower())
{
default:
    animal = AnimalType.Unkown;
    break;
} 
```

或者

```
default:
    animal = new MakeEnum(s.ToLower());
    myEnumList.Add(animal);
    break; 
```

您`MakeEnum`基本上只需要检查当前枚举数的长度，并使用数字或其他一些参数创建一个新的枚举。*

# php - 在这种特殊情况下在 PHP 脚本之间传递值

> ID：11709344
> 
> 赞同：0
> 
> 时间：2012-07-29T12:45:53.813
> 
> 标签：php, javascript, session, gd, image-generation

所以在我的 HTML 标记中，我有一个像这样的图像标记：

```
<img src="image_generation.php" alt="template" id="image" /> 
```

'src' 属性链接到一个 PHP 脚本，该脚本使用其中定义的几个变量生成图像，这些变量大多是随机生成的。

现在，我想要做的是访问包含图像生成脚本的页面中的那些随机变量。我想我可以发送 cookie 并在图像标签之后访问它们，因为它们在技术上应该可以随时用于包含文件。我不想发送太多信息，只是几个（10-20）变量。不确定在这种情况下会话是否是更好的选择，因为我必须发送几个 cookie。会话也会带来问题，因为包含脚本会获取旧会话，我必须刷新页面才能获取先前生成的图像的值。我想我也可以设置一个数据库并在包含脚本中访问数据库，但是这些变量是临时的，我必须删除它们，这对我来说似乎很麻烦。

图像生成脚本结束于：

```
header('Content-type: image/png');
imagepng($image);
imagedestroy($image); 
```

并且在标头调用之前不能将任何内容发送到浏览器，否则图像将不会显示。如果我使用 cookie 或会话，则`image_generation.php`必须同时发送图像并设置 cookie/会话。

没有一个选项（cookies、会话或数据库）真正让我信服，因为在这种特殊情况下每个选项都存在问题。你能想出解决这个问题的方法吗？谢谢。

**主要编辑#1：** 包含脚本获取先前生成的图像的会话而不刷新/设置 cookie 和/或包含脚本中的会话之前/之后发送图像而没有输出缓冲不会造成问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:02:14.110

您可以将参数传递给 src 属性，例如：

```
<img src="image_generation.php/user/1/name/tom/param1/variable2" 
```

或者

```
<img src="image_generation.php?user=1&name=tom 
```

这个解决方案让你忘记会话、cookies——它是无状态的

PHP 可以通过 ob_* 函数对缓冲区进行巧妙的处理，因此在脚本的开头，您可以调用 ob_start() 来缓冲每个 php 输出，它可以让您避免所有“标头已发送”错误。

您的 image_generation.php 不需要发送任何 cookie。该脚本将接收带有 sessionid 的 cookie（浏览器将 cookie 信息附加到对服务器的每个请求），这使得在 php 端识别用户会话成为可能 - 之后您可以访问每个会话参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:50:37.083

您可以使用`$_SESSION`, 但要使会话在包含该`<img>`标记的同一脚本中可用（这将在图像脚本之前执行），您需要通过 JavaScript 进行 AJAX 调用。运行的 AJAX 处理程序`window.onload`应该可以访问`$_SESSION`由图像脚本创建的，因为图像在执行时应该已经完全加载。

### 示例 PHP 处理程序 getsession.php：

```
header('Content-type: application/json');
// Simply part of the session into JSON
// Obviously you would want to limit this to only the variables 
// that should be sent back, so you don't expose the session on the client side!
echo json_encode(array($_SESSION['var1'],$_SESSION['var2']));
exit(); 
```

### 示例 AJAX 调用（使用 jQuery，因为它很容易上手）

```
// Variable to hold the object returned by PHP
var imgPHPSession;
$(window).load(function() {
  $.ajax({
    url: 'getsession.php',
    dataType: 'json',
    success: function(data) {
      imgPHPSession = data;
    }
  });
}); 
```

## 更新：

它可以完全在 PHP 中完成，但需要稍微更改您的设计，以便生成图像所需的变量`$_SESSION`由主脚本创建。然后它们可`$_SESSION`用于 image_generation.php 以根据需要使用，但主脚本已经知道它们。

## 更新 2：

由于图像变量包含有关*如何*创建的信息，如果图像不是太大，您实际上可以在主脚本中创建它并将其存储到磁盘。image_generation.php 脚本仍可用作`<img src>`，但其目的是从磁盘检索正确的图像并将其返回给浏览器，并在不再需要时将其从磁盘中删除。然后`$_SESSION`可用于主脚本和图像脚本。

# jasper-reports - iReport 设计器 4.5.1 /4.6.0 无法与 Hive 交互

> ID：11709346
> 
> 赞同：0
> 
> 时间：2012-07-29T12:46:10.577
> 
> 标签：jasper-reports, ireport, hive

我已按照[此处](https://stackoverflow.com/questions/11671933/jaspersoft-ireport-designer-4-5-1-4-6-0-hive)的说明安装了更新的插件。错误变成了：

```
Query error

Message: net.sf.jasperreports.engine.JRException: 
Error executing SQL statement for : null Level: SEVERE Stack Trace: 
Error executing SQL statement for : null com.jaspersoft.hadoop.hive.HiveFieldsProvider.getFields(HiveFieldsProvider.java:113)
com.jaspersoft.ireport.hadoop.hive.designer.HiveFieldsProvider.getFields(HiveFieldsProvider.java:32)
com.jaspersoft.ireport.hadoop.hive.connection.HiveConnection.readFields(HiveConnection.java:154)
com.jaspersoft.ireport.designer.wizards.ConnectionSelectionWizardPanel.validate(ConnectionSelectionWizardPanel.java:146)
org.openide.WizardDescriptor$7.run(WizardDescriptor.java:1357)
org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)
org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
```

降级到 4.5.0 后，错误变为（连接已验证，我可以从 hive 查询表）：

```
Query error

Message: net.sf.jasperreports.engine.JRException: Query returned non-zero code: 10, cause: 
FAILED: Error in semantic analysis: Line 1:14 Table not found 'panstats' Level: 
SEVERE Stack Trace: Query returned non-zero code: 10, cause: 
FAILED: Error in semantic analysis: Line 1:14 Table not found 'panstats'
com.jaspersoft.hadoop.hive.HiveFieldsProvider.getFields(HiveFieldsProvider.java:260)
com.jaspersoft.ireport.hadoop.hive.designer.HiveFieldsProvider.getFields(HiveFieldsProvider.java:32)
com.jaspersoft.ireport.hadoop.hive.connection.HiveConnection.readFields(HiveConnection.java:146)
com.jaspersoft.ireport.designer.wizards.ConnectionSelectionWizardPanel.validate(ConnectionSelectionWizardPanel.java:146)
org.openide.WizardDescriptor$7.run(WizardDescriptor.java:1357)
org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)
org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
```

我在*OS X Lion 10.7.4 上使用**Hive 0.8.1 。*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:22:21.520

您的查询是否简单`select * from panstats`？我怀疑查询不是问题，但您需要先确认一下。

您可以尝试使用 SQuirreL SQL 之类的工具查询该表。如果该工具也无法获取数据，则可能是 Hive 问题。如果可以...那么它可能是 iReport 或 Hive 插件的问题。

听起来 Hive 未配置为共享元数据。它在 Derby 中使用烦人的默认配置，因此外部连接无法访问您的 panstats 表。我在今年早些时候看到[了这篇关于配置 Hive 的文章。](http://www.javacodegeeks.com/2012/02/big-data-analytics-with-hive-and.html)它使用 MySQL 而不是 derby 记录。如果这确实是问题，那么它只是 Hive 配置问题。按照那篇文章将解决 SQuirreL 和 iReport 的问题。*

# c# - C# 服务器和客户端

> ID：11709347
> 
> 赞同：-1
> 
> 时间：2012-07-29T12:46:11.270
> 
> 标签：c#, .net, client

**您好，我一直在研究一个简单的服务器/客户端，但是有一个问题我无法在一个 cmd（客户端/服务器）上依次键入 2 条消息，所以我用发送/接收命令做了一个计时器，但是当我开始它在同一秒内停止**

***这是服务器的代码***

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Timers;

    namespace Server
    {
        class Program
        {
            //--------------------------------------------------------------------------------------------
            static TcpClient connected;
            //--------------------------------------------------------------------------------------------
            static void Main(string[] args)
            {
                TcpListener listener = new TcpListener(IPAddress.Any, 1980);

                listener.Start();
                connected = listener.AcceptTcpClient();

                System.Timers.Timer timer = new System.Timers.Timer();
                timer.Elapsed += new ElapsedEventHandler(timerTick);
                timer.Interval = 100;

                Thread.Sleep(1000);
                timer.Enabled = true;
            }
            //--------------------------------------------------------------------------------------------
            static byte[] buffer = new byte[4096];
            //--------------------------------------------------------------------------------------------
            static void send()
            {

                NetworkStream stream = connected.GetStream();
                byte[] data = Encoding.ASCII.GetBytes(Console.ReadLine());
                stream.Write(data, 0, data.Length);
                send();
            }
            //--------------------------------------------------------------------------------------------
            public static void timerTick(object source, ElapsedEventArgs e)
            {
                    receive();

            }
            //--------------------------------------------------------------------------------------------
            static void sendCP()
            {

                NetworkStream stream = connected.GetStream();
                byte[] data = Encoding.ASCII.GetBytes("Connected To Server");
                stream.Write(data, 0, data.Length);

            }

            static void receive()
            {
                NetworkStream stream = connected.GetStream();
                int data = stream.Read(buffer, 0, 4096);
                string rec = Encoding.ASCII.GetString(buffer, 0, data);

                Console.WriteLine("Client: " + Encoding.ASCII.GetString(buffer, 0, data));
                for (; ; ) { }
            }
        }
    } 
```

***这是客户的代码***

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Timers;
namespace Client
{
    class Program
    {
        static TcpClient client;

        static void Main(string[] args)
        {
          System.Timers.Timer timer = new System.Timers.Timer();
          timer.Elapsed += new ElapsedEventHandler(timerTick);
          timer.Interval = 1000;
          client = new TcpClient();
            client.Connect("127.0.0.1", 1980);
            if (client.Connected)
            {
                sendCP();
                timer.Enabled = true;
            }
        }
        public static void timerTick(object source,ElapsedEventArgs e)
        {
            while (client.Connected)
            {
                receive();
            }
        }
        static byte[] buffer = new byte[4096];
        static void send()
        {

            NetworkStream stream = client.GetStream();
            byte[] data = Encoding.ASCII.GetBytes(Console.ReadLine());
            stream.Write(data, 0, data.Length);
            send();
        }
        static void sendCP()
        {

            NetworkStream stream = client.GetStream();
            byte[] data = Encoding.ASCII.GetBytes("Connected To Client");
            stream.Write(data, 0, data.Length);
        }
        static void receive()
        {
            NetworkStream stream = client.GetStream();
            int data = stream.Read(buffer, 0, 4096);
            string rec = Encoding.ASCII.GetString(buffer, 0, data);
            Console.WriteLine("Server: " + Encoding.ASCII.GetString(buffer, 0, data));
        }
    }
} 
```

***希望有人能帮助我，谢谢！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:40:03.407

您已经创建了计时器但从未启动它们，程序在启动后退出。您的代码中有更多错误，将计划操作与事件驱动混合在一起。每 1000 毫秒尝试发送一些东西，但等待 Console.ReadLine()

# haskell - 在 Haskell 中将多个函数应用于相同的值无点样式

> ID：11709350
> 
> 赞同：30
> 
> 时间：2012-07-29T12:46:23.237
> 
> 标签：haskell, pointfree

有一天我很无聊，想锻炼一下大脑，所以我决定做[99 个 Haskell 问题](http://www.haskell.org/haskellwiki/H-99%3a_Ninety-Nine_Haskell_Problems)，但我限制自己以无点的方式做。当我以无点风格做事时，似乎经常出现的一个问题是：如何将多个函数应用于相同的值，同时将每个结果保持为独立实体？使用尖头符号：

```
foobar x = [id x, reverse x] 
```

到目前为止，我以无点表示法提出了什么：

```
foobar' = `map` [id, reverse] ($ x) 
```

我似乎无法从`x`那里结束。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-29T13:43:56.700

其他人已经发布了如何使用`Reader`monad 来做到这一点，但这不是唯一的方法。事实证明，您的第二个功能非常接近。我想你是想发帖

```
foobar' x = (`map` [id, reverse]) ($ x) 
```

由于`x`已经在最右边的位置附近，因此您就快到了。首先，将部分`($ x)`转换为函数，因为它更容易使用：

```
-- by the definition of a right operator section
foobar'2 x = (`map` [id, reverse]) (\y -> ($) y x) 
```

接下来，`x`通过将一个新变量带入作用域，并将函数应用于`x`

```
-- lambda abstraction I think...
foobar'2 x = (`map` [id, reverse]) $ (\z y -> ($) y z) x 
```

将此应用程序重写为函数组合，然后您可以 eta reduce：

```
-- by definition of '.'
foobar'3 x = (`map` [id, reverse]) . (\z y -> ($) y z) $ x

-- eta reduction
foobar'4 = (`map` [id, reverse]) . (\z y -> ($) y z) 
```

最后，请注意我们可以用函数替换 lambda

```
-- by definition of `flip`
foobar'5 = (`map` [id,reverse]) . flip ($) 
```

你有一个无点形式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-29T12:53:56.623

您将对`Applicative`reader monad 的实例感兴趣：

```
instance Applicative (e ->) 
```

使用它，您可以轻松地分发参数：

```
liftA2 (+) sin cos 3 
```

这里`sin`和`cos`是函数，它们都接收值 3。然后使用 组合各个结果`(+)`。您可以进一步将其与 的`Category`实例结合使用，但和`(->)`的专用版本已经在.`(.)``id``Prelude`

背景： 的`Applicative`实例`(e ->)`真正代表了 SKI 演算，其中`(<*>)`是*S*组合子，`pure`是*K*组合子。 *S*精确地用于将参数分配给两个函数：

```
S f g x = f x (g x) 
```

它需要一个函数应用程序 ( *fg* ) 并使两者都依赖于值*x* ( *(fx) (gx)* )。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-29T13:10:12.053

使用[顺序](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Monad.html#v%3asequence)：

```
> let foobar' = sequence [id, reverse]
> foobar' "abcde"
["abcde","edcba"] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-29T13:56:35.627

有一些基本的惯用组合子反复出现，并用各种更高的概念和库重新实现，但它们本质上非常简单。名称可能会有所不同，有些可以根据其他名称来实现：

```
fork (f,g) x = (f x, g x)              -- == (f &&& g)
prod (f,g) x = (f $ fst x, g $ snd x)  -- == (f *** g)
pmap f (x,y) = (f x, f y)              -- == (f *** f)
dup     x    = (x,x) 
```

等等。当然`uncurry f (x,y) == f x y`也经常使用这些。

`&&&`和`***`定义在`Control.Arrow`, 以及`first`和`second`中。然后`prod (f,id) == first f`，`prod(id,g) == second g`等等等等。

所以你的`foobar`变成

```
foobar = (\(a,b)->[a,b]) . fork (id,reverse)
       = (\(a,b)->[a,b]) . (id &&& reverse)
       = (\(a,b)->[a,b]) . (id *** reverse) . dup 
       = join $ curry ( (\(a,b)->[a,b]) . second reverse) 
```

对于最后一个，您还需要导入`Control.Monad`和`Control.Monad.Instances`. 另请参阅[此问题](https://stackoverflow.com/questions/9169046/writing-in-pointfree-style-f-x-g-x-x)。

* * *

*后期编辑：*另外，使用*ertes*`Control.Applicative`回答中的提示，

 *```
 = (:) <*> ((:[]) . reverse) 
```*

# ruby-on-rails - 每个循环中的动态 url_path

> ID：11709354
> 
> 赞同：0
> 
> 时间：2012-07-29T12:46:54.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个带有 jQ​​uery 内容轮播的城市页面。轮播的内容由每个循环归档。

```
CityController 
    @events = @city.events.find_all_by_hot(true)
    @activities = @city.activities.find_all_by_hot(true)
    @sights = @city.sights.find_all_by_hot(true)
    @hot = @events + @activities + @sights

Class city
   has_many: events
end

class events
   belongs_to :city
   has_many :attachments, :as => :attachable    
   accepts_nested_attributes_for :attachments
end 
```

活动和景点模型相同

```
City view content slider:
  @hot.each do |a|
  a.attachments.each do |a|
  = image_tag(a.file.url, :height =>"325px", :width =>"650px" ), url_path 
```

我想在我的每个循环中生成链接（url_path）......我怎样才能实现这一点？它不能放置路由的 url_path，因为它们是动态的，基于加载的附件（图像）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:06:06.163

虽然你的语法`image_tag`不正确你可以试试这个

```
@hot.each do |hot|
  hot.attachments.each do |a|
    link_to polymorphic_path(a.attachable) do
      image_tag(a.file.url, :height => "325px", :width => "650px")
    end
  end
end 
```

如果我正确理解您的问题。另请查看您需要的[polymorphic_path](http://apidock.com/rails/v3.2.1/ActionDispatch/Routing/PolymorphicRoutes/polymorphic_path)助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:36:02.917

链接应该指向`a`可以是任何事件、活动、景点，我对吗？作为

```
@hot = @events + @activities + @sights 
```

我会尝试在 CityController 中创建一个特殊的控制器动作

```
 def hottie
     @duck = Kernel.const_get(params[:type]).find_by_id(params[:id])
     redirect_to @duck
   end 
```

然后添加类似

```
 match 'hottie/:type/:id' => 'city#hottie', as: 'hot' 
```

这应该给你一个路径助手，你可以这样使用：

```
<%=link_to("Open", hot_path(a.class.to_s, a.id)) %> 
```

另外：这当然有点脏，需要考虑一些安全问题（例如限制它只显示特殊类型）。您还可以考虑使用 STI 将三个类 Event、Activities 和 Sights 移动到对象层次结构中；这应该消除在请求中传递类型的需要。

# javascript - 无法在我的网站上显示 javascript

> ID：11709357
> 
> 赞同：1
> 
> 时间：2012-07-29T12:47:15.260
> 
> 标签：javascript, html

我设计了一个网站。它现在与[http://innovakota.6te.net一起直播](http://innovakota.6te.net)

我在这上面使用了一些java脚本来滑动图片。它在本地主机上运行良好。但是当我在服务器上运行时，滑块不起作用。javascript代码如下：

```
<script type="text/javascript">
$(document).ready(function() {
    $().piroBox({
            my_speed: 400, //animation speed
            bg_alpha: 0.1, //background opacity
            slideShow : false, // true == slideshow on, false == slideshow off
            slideSpeed : 4, //slideshow duration in seconds(3 to 6 Recommended)
            close_all : '.piro_close,.piro_overlay'// add class .piro_overlay(with comma)if you want overlay click close piroBox

    });
});
</script> 
```

我已经在三个主机上尝试过，但同样的问题来了。我也在附加本地主机快照。 ![在此处输入图像描述](../Images/020298dc44d15e2298009ccf23beb346.png)

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:50:18.363

JS文件中的垃圾（http://innovakota.6te.net/lib/jquery.custom.js） - 你需要看看它

਀� //波形滑块调用 ------------------------------------------- ---------਀樀仪甀攀爀礀⠀搀漀挀甀洀攀渀琀⤀⸀爀攀愀搀礀⠀昀甀渀挀琀碗漀渀⠀⤀笀�jQuery('.waveshow ').nivoSlider({਀ऀऀ攀昀昀攀挀琀㨀✀猀氀碗挀攀䐀漀眀渀✀Ⰰ� slices:15,਀ऀऀ愀渀碗洀瀀攀搀㨀㄀Ⰰ�暂停时间:5000 ,਀ऀऀ搀碗爀攀挀琀碗漀渀一愀瘀㨀琀爀甀攀Ⰰ 伱一攀砀琀 ☀ 伥瀀攀爀方向NavHide:true, //只显示悬停਀ऀऀ挀漀渀琀爀漀氀一愀淤㨀昀愀氀猀攀Ⰰ统一㄀Ⰰ㈀Ⰰ㌀⸀⸀⸀� keyboardNav:true, //使用左右箭头਀ऀऀ瀀愀甀猀攀伀渀䠀漀攀爀㨀琀爀甀攀Ⰰ统一搀琀漀瀀愀琀碗洀愀琀碗漀渀眀栀碗氀攀栀怀栀爀碗渀最� manualAdvance:false, //强制手动过渡ऀऀ挀愀瀀琀碗漀渀伀瀀愀挀碗琀礀㨀 ⸀㠀Ⰰ 一起唀渀碗碟碗攀爀猀愀氀 挀愀瀀琀碗漀渀 漀瀀愀挀琀礀' beforeChange: function(){},਀ऀऀ昀昀琀攀爀䌀栀愀渀最攀㨀 昀甀渀挀琀碗漀渀⠀⤀笀纪Ⰰ� slideshowEnd: function(){} //所有幻灯片播放完毕后触发਀ऀ纪⤀㬀�});਀ ···</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T12:52:40.470

我认为你需要清理你的 jquery.custom.js

> Uncaught SyntaxError: Unexpected token ILLEGAL

# iphone - 钛按钮选择时不改变背景颜色

> ID：11709358
> 
> 赞同：0
> 
> 时间：2012-07-29T12:47:25.543
> 
> 标签：iphone, ios, titanium

我有一个新手问题：我在 Titanium for iPhone 中创建的一个简单按钮在单击时拒绝更改颜色。最初我为这个功能使用了一个按钮；由于它不起作用，我改为视图，但都不起作用。这是它的设置方式：

```
var quifButton = Ti.UI.createView({  // tried this with createButton, as well
    top: 44, left: 5, width: 310, height: 42, 
    backgroundColor: '#333', 
    backgroundSelectedColor: '#fff', 
    backgroundFocusedColor: '#fff', 
    touchEnabled: true, 
    borderColor: BOR_DK, borderWidth: 2, borderRadius: 5 }); 
```

当我在 iPhone 模拟器中单击 Button / View 时，什么也没有发生。任何想法为什么这不起作用以及如何使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:28:48.897

单击与焦点不同。如果要在单击时更改颜色，则必须将事件侦听器添加到按钮或视图。

```
quifButton.addEventListener('click', function(e){
   quifButton.backgroundColor = '#fff';
}); 
```

***编辑：**

```
 backgroundSelectedColor: '#fff', 
 backgroundFocusedColor: '#fff', 
```

这些在 iOS 中不受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:19:51.390

这是 iOS 中的限制，与 Titanium 无关。

试试这个，而不是你正在寻找的行为：

```
 someBtn.addEventListener('touchstart', function() { 
    someBtn.backgroundColor = 'green';
  });  

  someBtn.addEventListener('touchend', function() { 
    someBtn.backgroundColor ='blue';
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T05:30:07.113

你能在 tss 中使用 backgroundSelectedColor:"#colorcode" 吗？希望它能起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:44:29.940

你的代码对我来说很好用。你能试着让我知道它是否有效吗？

```
var win1 = Ti.UI.createWindow({
    title:'home',
    backgroundColor:'white'
});
var button1 = Ti.UI.createButton({
    top: 44, 
    left: 5, 
    width: 310, 
    height: 42, 
    backgroundColor: '#333', 
    backgroundSelectedColor: '#fff', 
    backgroundFocusedColor: '#fff', 
    touchEnabled: true, 
    borderWidth: 2, 
    borderRadius: 5
});
win1.add(button1);
win1.open(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-14T04:37:50.193

使用 backgroundSelectedColor:"color" ，它会工作

# python - def 函数可以打破 while 循环吗？

> ID：11709366
> 
> 赞同：0
> 
> 时间：2012-07-29T12:48:00.763
> 
> 标签：python

```
def CardsAssignment():
      Cards+=1
      print (Cards)
      return break      

while True:
      CardsAssignment() 
```

是的，我知道我不能`return break`。但是我怎样才能通过 def 函数打破 while 循环呢？还是我的概念错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T12:50:06.600

不，它不能。执行以下操作：

```
def CardsAssignment():
  Cards+=1
  print (Cards)
  if want_to_break_while_loop:
    return False      
  else:
    return True

while True:
  if not CardsAssignment():
    break 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T15:23:37.410

一种非常*Pythonic*的方法是使用具有以下内容的异常：

```
class StopAssignments(Exception): pass  # Custom Exception subclass.

def CardsAssignment():
    global Cards  # Declare since it's not a local variable and is assigned.

    Cards += 1
    print(Cards)
    if time_to_quit:
        raise StopAssignments

Cards = 0
time_to_quit = False

while True:
    try:
        CardsAssignment()
    except StopAssignments:
        break 
```

另一种不太常见的方法是使用一个[`generator`](https://docs.python.org/3/glossary.html#term-generator)函数，该函数将返回`True`指示是时候停止调用`next()`它了：

```
def CardsAssignment():
    global Cards  # Declare since it's not a local variable and is assigned.

    while True:
        Cards += 1
        print(Cards)
        yield not time_to_quit

Cards = 0
time_to_quit = False
cr = CardsAssignment()  # Get generator iterator object.
next(cr)  # Prime it.

while next(cr):
    if Cards == 4:
        time_to_quit = True  # Allow one more iteration. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T12:51:49.160

您可以`CardsAssignment`返回`True`（继续）或`False`（停止）然后

```
if not CardsAssignment():
    break 
```

或者实际上只是循环

```
while CardsAssignment(): 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-29T14:31:35.933

如果您使用`for`循环而不是 a ，则可以通过ing`while`使其提前中断- 这是循环结束的常用信号，作为例外，它可以嵌套在函数中任意深度，并将向外传播直到被抓住。这意味着您需要一些东西来迭代 - 因此，您可能希望将您的函数更改为生成器：`raise``StopIteration``for`

```
def cards_assignment():
     cards += 1
     yield cards

for card in cards_assignment():
    print(card) 
```

`raise StopIteration`，在这种情况下，您只需`return`从生成器中完成，而不是做，循环将完成。但是，请注意，这（以及使函数返回您在循环条件中测试的标志的选项）与使用略有不同`break`- 如果您`else`在循环中使用子句，`return`来自生成器的 ing 将触发它，而`break`在循环体不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T13:09:04.067

我很想重新考虑类似于：

```
def somefunc():
    from random import randint
    while True:
        r = randint(1, 100)
        if r != 42:
            yield r 
```

然后您可以执行以下操作：

```
for cnt, something in enumerate(somefunc(), start=1):
    print 'Loop {} is {}'.format(cnt, something) 
```

这允许返回一个可能有意义的值，`somefunc()`而不是将其用作“我要中断”标志。

这也将允许以下构造：

```
sf = somefunc()
for something in sf:
    if some_condition(something):
        break

# other bits of program

for something in sf: # resume...
    pass 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T12:52:54.217

```
def CardsAssignment():
      Cards+=1
      print (Cards)
      if (break_it):
          return False      
      else:
          return True      

while CardsAssignment():
    pass 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-02-24T04:12:12.853

在 3.5、3.6 中可以

```
return "break" 
```

# php - 在 wordpress 中 URL 重写 query_string

> ID：11709370
> 
> 赞同：0
> 
> 时间：2012-07-29T12:48:14.880
> 
> 标签：php, wordpress, apache

我在 wordpress 中有一个分类搜索表单，链接输出是

```
http://localhost/wp/?cityid=16 
```

但我希望它被重写为

```
http://localhost/wp/cityid/16 
```

.htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wp/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wp/index.php [L]
</IfModule>

# END WordPress 
```

我发现[了这一点](https://stackoverflow.com/questions/4630720/converting-wordpress-url-path-into-query-string)，但无法实施我的案例。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:09:33.150

试试这个`RewriteRule`：

```
RewriteBase /wp/
RewirteRule ^wp/cityid/([0-9]+)$ ?cityid=$1 [L] 
```

# linux - 在 Ubuntu 上永久更改 PATH

> ID：11709374
> 
> 赞同：65
> 
> 时间：2012-07-29T12:49:06.147
> 
> 标签：linux, unix, ubuntu, path

我想将值“：/home/me/play/”添加到 PATH 以
安装 Play！框架。
所以我运行了这个命令：

```
PATH=$PATH:/home/me/play 
```

有效。但在我下次检查时，值又变回了旧值。

所以我想我没有“保存”新值，对吧？

你是怎样做的？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-29T12:53:23.047

添加

```
export PATH=$PATH:/home/me/play 
```

给你`~/.profile`并执行

```
source ~/.profile 
```

为了立即反映对您当前终端实例的更改。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-07-29T12:53:21.923

`.profile`在您的主目录中的文件中添加以下行（使用`vi ~/.profile`）：

```
PATH=$PATH:/home/me/play
export PATH 
```

然后，要使更改生效，只需在终端中输入：

```
$ . ~/.profile 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-29T12:51:33.107

尝试添加`export PATH=$PATH:/home/me/play`~/.bashrc 文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-29T15:37:43.983

假设您要为系统上的所有用户添加此路径，请将以下行添加到您的`/etc/profile.d/play.sh`（可能还有`play.csh`等）：

```
PATH=$PATH:/home/me/play
export PATH 
```

# jquery - 我可以对 jQuery 的 $.when 方法的结果进行分组吗？

> ID：11709377
> 
> 赞同：0
> 
> 时间：2012-07-29T12:49:53.460
> 
> 标签：jquery, promise

我有以下代码：

```
$('#remove-commercial-products-modal').find('form').submit(function() {                              
    var promises = [];
    var $modal = $(this).closest('.modal');                                                          

    $(this).find('input:checkbox:checked').each(function() {                                         
        promises.push(                                                                               
            $.ajax({
                url: '/commercial/products/unclaim/' + $(this).val() + '/',                          
                dataType: 'json',                                                                    
                timeout: 10000,                                                                      
                cache: false                                                                         
            }));                                                                                     
    });                                                                                              

    $.when.apply($, promises).done(function(result) {                                                
        $modal.modal('hide');                                                                        
    });                                                                                              

    return false;                                                                                    
}); 
```

所以，当我的表单被提交时，我收集了选中复选框的值，并创建了一个 Promise 数组，每个 Promise 都是一个 $.ajax 调用。

我的调用被执行，我的`.done`函数中的代码被执行。

但是，我认为这`.done`是期待*一些*论点，每个承诺一个。但我不知道我提前有多少，我希望得到一系列结果（每个结果都是 $.ajax 调用的响应。）

有人知道我是否可以将我的回复分组吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:53:14.857

```
$.when.apply($, promises).done(function() {
    var l = arguments.length,
        i,
        jqxhr;

    for( i = 0; i < l; ++i ) {
        jqxhr = arguments[i][2]; //The i:th jQXHR passed  
    }                                                              
}); 
```

查看[文档](http://api.jquery.com/jQuery.when/#example-0)

# java - 从 intellij 和 maven 在 jboss 7 上部署爆炸式战争

> ID：11709379
> 
> 赞同：0
> 
> 时间：2012-07-29T12:50:03.700
> 
> 标签：java, jboss, intellij-idea, java-ee-6, war

我有基于 Maven 的 Java EE 6 Web 应用程序。我知道可以直接从 Intellij Idea 11 将它作为 war 文件部署到 Jboss 7。但我希望能够将其部署为“已爆炸”，以便我可以编辑我的 jsp 文件并立即在浏览器中查看结果。可能吗？

**编辑**

附上分解截图。现在，如果我有屏幕截图所示的配置，我的 JSP 文件是从 project.war 目录而不是从 src/main/webapp 目录加载的（即使包含此 webapp 目录）。它可以防止它们被重新加载。我已经在 J​​boss 7.1.0 中设置了“开发”配置参数。

![在此处输入图像描述](../Images/b54e8c525b0e4e3f9136d9348e84f6d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:38:15.667

我不确定 Intellij 是否有可能，但我认为如果您在 JBoss AS7 配置中添加[部署扫描程序，它会起作用。](https://docs.jboss.org/author/display/AS71/Deployment+Scanner+configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:21:25.410

尝试在 jboss 7 配置中的 stanalone.xml 中的部署扫描器标记中将**auto-deploy-exploded 设置为 true**

参考：[https ://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-FileSystemDeployments](https://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-FileSystemDeployments)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T01:21:37.217

在 Run/Debug Configurations 对话框中，在“On frame deactivation”下拉菜单中选择“Update resources”。这样，当您切换到浏览器时，IDEA 会将资源文件从它们的源位置（src/main/webapp）复制到它构建展开的 WAR 以进行部署的目录。

接下来，尝试在调试模式下运行并使用 hotswap 热部署小的代码更改。

# mysql - Mysql补充了许多表和分组

> ID：11709383
> 
> 赞同：0
> 
> 时间：2012-07-29T12:50:21.013
> 
> 标签：mysql, complement

我希望答案很简单，我很傻。

所以我有两张桌子：（`day`带 PK `id_day`）和`hour`（带 PK `id_hour`）。

我有另一个表`tilt_time`，它有`id_day`,`id_hour`字段和一个加 FK 字段（有禁止时间）。例如`tilt_time`具有以下行（`id_day`, `id_hour`, `id_target`）：

```
1,1,1
1,2,1
1,3,1
1,1,2
1,2,2 
```

In table`day` `id_day`介于 1 和 5 之间（周一至周五）并且`hour` `id_hour`介于 1 和 6 之间（因此您可以想象一个`day_hour`具有 5*6=30 值的表）。

所以我想要查询`id_target=1`的空闲时间和`id_target=2`空闲时间（每个人的空闲时间）。所以我想要类似的：

```
1,4,1
1,5,1
1,6,1
2,*,1
3,*,1
4,*,1
5,*,1
// id_target=2
1,3,2
1,4,2
1,5,2
1,6,2
2,*,2
3,*,2
4,*,2
5,*,2 
```

（* 表示所有有效值`id_hour`，所以带 * 的每一行代表 6 个不同的行）

我该怎么做这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:14:43.787

如果你有一张`target`包含 all 的表`id_target`，答案很简单：

```
SELECT 
    d.id_day, h.id_hour, t.id_target
FROM 
    day AS d
  CROSS JOIN
    hour AS h
  CROSS JOIN
    target AS t
WHERE
    (d.id_day, h.id_hour, t.id_target) NOT IN
      ( SELECT id_day, id_hour, id_target
        FROM tilt_time
      )
; 
```

或（可能更有效）：

```
SELECT 
    d.id_day, h.id_hour, t.id_target
FROM 
    day AS d
  CROSS JOIN
    hour AS h
  CROSS JOIN
    target AS t
  LEFT JOIN
    tilt_time AS tt
      ON  tt.id         = d.id_day
      AND tt.id_hour    = h.id_hour
      AND t.t.id_target = t.id_target
WHERE 
    tt.id_target iS NULL ; 
```

* * *

如果您没有`target`表格，请将`target AS t`上面代码中的替换为：

```
( SELECT DISTINCT id_target FROM tilt_time ) AS t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:17:57.590

以下查询返回`id_day`，`id_hour`其中 1 和 2 的目标 id 都没有记录`tilt_time`。

```
SELECT tg1_free.id_day, tg2_free.id_hour
FROM (
    SELECT
        day.id_day, hour.id_hour
    FROM day, hour
    WHERE
        (day.id_day, hour.id_hour) NOT IN (SELECT id_day, id_hour FROM tilt_time WHERE id_target = 1)
) tg1_free
INNER JOIN (
    SELECT
        day.id_day, hour.id_hour
    FROM day, hour
    WHERE
        (day.id_day, hour.id_hour) NOT IN (SELECT id_day, id_hour FROM tilt_time WHERE id_target = 2)
) tg2_free ON (tg1_free.id_day = tg2_free.id_day AND tg1_free.id_hour = tg2_free.id_hour) 
```

[编辑]

对于所有目标 ID，都有（更容易）：

```
SELECT id_day, id_hour
FROM day, hour
WHERE
    (day.id_day, hour.id_hour) NOT IN (SELECT id_day, id_hour FROM tilt_time); 
```

# .net - XPath 表达式中的“代码重用”

> ID：11709387
> 
> 赞同：0
> 
> 时间：2012-07-29T12:50:39.157
> 
> 标签：.net, xpath

背景：我正在使用 HtmlAgilityPack (.Net)，所以我不得不使用 XPath 1.0，[它没有小写实现](https://stackoverflow.com/a/1625859/687857)。

我正在尝试查找具有包含`foo`整个单词的属性的所有节点。
例子：

*   “富”*匹配*
*   “我的 foo”*比赛*
*   “富吧”*匹配*
*   “福”*匹配*
*   "ifoo"*不匹配*
*   “食物”*不匹配*

这就是我所拥有的（`ends-with`XPath 1.0 中也没有......）：

```
//*[@*[starts-with(.,'foo ') or contains(.,' foo ') or .='foo' or substring(.,string-length(.) - 3)=' foo']] 
```

据此，我可以使用[这种](https://stackoverflow.com/a/1625859/687857)可怕的方法来小写搜索条件：

```
translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz') 
```

最后，我的问题是：**我如何使用该`translate`函数，同时保持表达式尽可能简短和可读？**

（奖励：我如何在不同的表达之间分享这个？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:29:08.200

[向 XPath 添加自定义函数](http://msdn.microsoft.com/en-us/library/ms950806.aspx)怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:07:15.020

**只需使用**（Tomalak 答案的摘要版本）：

```
//@*[contains(concat(' ', 
                     translate(normalize-space(), 'FOO', 'foo'), 
                     ' '), 
              ' foo '
              )
    ] 
```

**警告**：

切勿将未知代理（最终用户）收到的字符串插入 XPath 表达式占位符。**[这为XPath 注入攻击](http://www.soapui.org/Security/xpath-injection.html)**打开了一个巨大的漏洞。

推荐的做法是*编译 XPath 表达式*并在评估完成时将用户提供的字符串作为参数传递（或**[通过 XPath 表达式中的变量或函数引用获取它们）。](http://www.tkachenko.com/blog/archives/000385.html)**

# ios - 模态视图在 Splitview 的主视图中打开

> ID：11709388
> 
> 赞同：1
> 
> 时间：2012-07-29T12:50:59.513
> 
> 标签：ios, ipad, modal-dialog

目前，我正在研究一个 iOS 应用程序的新想法。这包括 iPhone 和 iPad 版本。iPad 版本使用的是拆分视图，左侧是带有表格的主视图，右侧是详细视图。这工作正常。但我想制作一个“添加”视图，它将是一个模式视图，可以从拆分视图的右侧（主）视图中的条形按钮启动。

在测试时，我得出的结论是模态视图仅在主视图中打开，而不是在整个屏幕上。我尝试更改一些设置，例如“想要全屏”，但没有解决问题。

现在有人如何使模态视图使用整个视图代替拆分视图的右（主）视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:54:15.350

这对我来说不太有意义，因为当我[`presentViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)从拆分视图详细视图中执行（或使用模态转场）时，默认情况下新视图将占据整个屏幕。您是否对新视图控制器的框架进行了任何规范？

您可以通过设置来更改`presentViewController`行为[`modalPresentationStyle`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalPresentationStyle)。例如，在执行 之前，请`presentViewController`指定`modalPresentationStyle`：

```
[self.destinationViewController setModalPresentationStyle:UIModalPresentationFullScreen]; 
```

如果这不起作用，那么也许您可以共享用于呈现模态视图的代码（例如，故事板中的普通旧“模态”segue？自定义segue？使用NIB并调用`presentViewController`自己？等），以及您的目标视图控制器的相关`init`代码。

# symfony - 如何在 Symfony2 控制台应用程序中获取 Doctrine ORM 实例？

> ID：11709391
> 
> 赞同：35
> 
> 时间：2012-07-29T12:51:27.137
> 
> 标签：symfony, doctrine-orm, console-application

> **可能重复：**
> [如何将依赖项注入 Symfony 控制台命令？](https://stackoverflow.com/questions/7597912/how-can-i-inject-dependencies-to-symfony-console-commands)

我想制作控制台应用程序，它会更改数据库中的一些记录（每小时使用 Cron）。如何在这里获取 Doctrine ORM 实例？

在休闲控制器中，我这样做：

```
$this->getDoctrine(); 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-29T13:19:58.747

如果您从那里扩展，`ContainerAwareCommand`您应该能够获得您的服务

```
$this->getContainer()->get('doctrine'); 
```

[这](https://stackoverflow.com/questions/7597912/how-can-i-inject-dependencies-to-symfony-console-commands)是类似的问题

# java - GAE 上静态图像的最有效方法是什么？

> ID：11709394
> 
> 赞同：0
> 
> 时间：2012-07-29T12:51:41.407
> 
> 标签：java, html, google-app-engine

我有一个 Java GAE 应用程序，它有相当多的静态图形、GUI 和其他元素，现在大约 100 个图像，以后会几百个。这都是静态的，没有任何操作，没有变化，也没有用户上传新图像的选项。所以只是 html 图像 [包括 Wicket 引用的图像]。我想知道什么是最有效的（从用户的角度和成本来看）。你在用什么？我认为有 3 个选项： - 仅与应用程序一起存储 - 数据存储和共享缓存（最多 100mb 的图像） - 第 3 方站点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:25:56.873

最方便的方法是将其作为静态文件存储在 Google App Engine 上，这很方便，因为应用程序更新是一个简单的过程并且开箱即用，您将获得前端边缘缓存和浏览器缓存的好处缓存。我不知道这是否是最便宜的解决方案，但您应该考虑仅使用 Google Cloud Store 或 Amazon S3/当带宽开始成为问题时。

# api - SoundCloud API：按用户过滤收藏夹？（或与此相关的任何其他参数）

> ID：11709398
> 
> 赞同：2
> 
> 时间：2012-07-29T12:51:56.073
> 
> 标签：api, soundcloud, favorite

是否可以发出仅返回特定上传者喜爱的曲目的 API 请求？我试过了：

[https://api.soundcloud.com/me/favorites.json?contact_id=](https://api.soundcloud.com/me/favorites.json?contact_id=) ...

和

[https://api.soundcloud.com/me/favorites.json?user_id=](https://api.soundcloud.com/me/favorites.json?user_id=) ...

我也尝试搜索收藏夹[https://api.soundcloud.com/me/favorites.json?q=](https://api.soundcloud.com/me/favorites.json?q=) ...

但是在我所有的试验中，我总是得到与没有参数完全相同的响应（在[API 控制台](http://developers.soundcloud.com/console)中）

我对第一个问题最感兴趣：发出 API 请求以获取特定上传者收藏的曲目，但能够按流派/标签、bpm 等过滤收藏夹当然也有用且有趣！我是否忽略了任何东西，或者这对于 SoundCloud 的 API 是不可能的？我不想为了获得该用户的所有收藏而必须获取所有用户的曲目或所有收藏夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T20:03:00.870

目前无法按收藏曲目的所有者进行过滤。最好的办法是使用`/me/favorites`端点获取收藏夹列表，然后在您的应用程序逻辑中进行过滤。不幸的是，没有适用于该特定端点的过滤器。

# wpf - 在 caliburn 中使用 Screens 和 IOC 的正确方法

> ID：11709399
> 
> 赞同：2
> 
> 时间：2012-07-29T12:51:59.250
> 
> 标签：wpf, caliburn.micro

我想尝试再次学习caliburn。前几节课很简单，但随着我的进步，事情变得复杂了，我无法独自解决。

我设计了一个应用程序，目的是涵盖大多数具有 ShellViewModel 类型`Conductor<IScreen>`和一些实现 .Im 的 ChildViews的基础知识。我正在`IScreen`使用 IOC 容器来组合应用程序中的 ViewModels 和相关资源。

其中一个孩子就像一个导航台，用户可以从中访问不同的子视图，并且这些子视图也支持导航到一个或两个其他视图。

当我寻找介绍屏幕和导体概念的示例时，所有这些示例都通过调用直接创建和激活视图模型`ActivateItem(new ChildViewModel())`，可能是为了简单起见，但我无法理解如何将这些视图模型创建委托给 IOC 容器而不依赖它。

对于至少一两个屏幕，我可以通过构造函数注入，但是当有很多视图时，用户可以从任何给定视图导航并且每个视图都有自己的附加依赖项怎么办？

原谅初学者的愚蠢，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:47:05.297

您想使用依赖于 IoC 容器的视图模型工厂。例如，您的 ShellViewModel 可以采用具有 CreateNavigatorViewModel 等方法的 IViewModelFactory，该方法返回 NavigatorViewModel（或 INavigatorViewModel），并且此实现使用 IoC 容器来解析 I/NavigatorViewModel。

一些 IoC 容器支持自动创建这些工厂，例如 Castle.Windsor 有一个 Typed Factory Facility，而 Ninject 有一个创建工厂类型的扩展，您只需定义工厂接口。

# windows - 在 Java 中遇到困难。初学者在这里

> ID：11709401
> 
> 赞同：1
> 
> 时间：2012-07-29T12:52:15.100
> 
> 标签：windows, path, java

> **可能重复：**
> [Java 路径..jvm.cfg 错误](https://stackoverflow.com/questions/9051103/java-path-error-of-jvm-cfg)

当我在 cmd 中输入 Java 时，它会弹出此错误

错误：无法打开`C:\Program Files\Java\jre7\lib\amd64\jvm.cfg

我通过谷歌搜索尝试了这种方法，但同样的错误再次发生。 **[windows 7] 进入控制面板，“控制面板\所有控制面板项”，然后找到java图标，点击它。选择“常规”选项卡旁边的“Java”选项。在这个“查看”框中只有一个按钮，单击它查找您相应的 JRE 版本并确保它指向正确的版本，在路径下。如果您的 JRE 不可见，请单击添加。**

我的路径是 C:\Program Files\Java\jre7\bin\javaw.exe javac version 1.7.0_05

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:56:18.723

您是否正确设置了类路径？
就我而言，我已将 CLASSPATH 设置为：“C:\Program Files (x86)\Java\jre6\lib;”
和 JAVA_HOME 到“C:\Program Files (x86)\Java\jdk1.6.0_25\”

# php - 主页上的 Wordpress 缩略图未显示

> ID：11709406
> 
> 赞同：0
> 
> 时间：2012-07-29T12:52:58.100
> 
> 标签：php, linux, wordpress, amazon-ec2, amazon-web-services

我将我的 wordpress 网站托管在`Amazon Linux AMI 2012.03`. 每当我将任何自定义主题上传到我的网站时，帖子的缩略图都无法显示在[我的主页上](http://adeln.com/)。

当我搜索答案社区时，有人建议我安装`php-gd`，我就这样做了。它运行良好，缩略图出现在我的主页上。我不知道为什么，两天后又出现了同样的问题。

谁能帮我解决这个问题。我不是专业的开发人员或程序员。所以，请详细说明。请告诉我该做什么以及如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:21:15.660

你已经在 php.ini 中检查了 gd 扩展启用与否

并阅读

```
http://www.roseindia.net/tutorial/php/phpgd/About-thumbnail.html

http://davidwalsh.name/create-image-thumbnail-php 
```

阅读以下网址：-

```
http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail

http://codex.wordpress.org/Function_Reference/the_post_thumbnail 
```

或者

尝试这个：-

```
<?php echo get_the_post_thumbnail( $post_id, $size, $attr ); ?> 

<?php $pages = get_pages(array('child_of' => 1)); ?> 
<ul>
    <?php foreach ($pages as $page): ?>
        <li>
            <?php echo get_the_post_thumbnail($page->ID, 'thumbnail'); ?>
            <h1><?php echo $page->post_title; ?></h1>
            <?php echo $page->post_content; ?>
        </li>
    <?php endforeach; ?>
</ul> 
```

缩略图大小

```
get_the_post_thumbnail($id);                  // without parameter -> Thumbnail

get_the_post_thumbnail($id, 'thumbnail');     // Thumbnail
get_the_post_thumbnail($id, 'medium');        // Medium resolution
get_the_post_thumbnail($id, 'large');         // Large resolution
get_the_post_thumbnail($id, 'full');          // Original resolution

get_the_post_thumbnail($id, array(100,100) ); // Other resolutions 
```

# php - 正则表达式检测无效的 UTF-8 字符串

> ID：11709410
> 
> 赞同：21
> 
> 时间：2012-07-29T12:53:39.397
> 
> 标签：php, regex, validation, utf-8

在 PHP 中，我们可以使用[`mb_check_encoding()`](http://us2.php.net/mb_check_encoding)UTF-8 来判断一个字符串是否有效。但这不是一个可移植的解决方案，因为它需要编译和启用 mbstring 扩展。此外，它不会告诉我们*哪个*字符无效。

是否有正则表达式（或其他 100% 可移植方法）可以匹配给定字符串中的无效 UTF-8 字节？

这样，可以根据需要替换这些字节（保留二进制信息，例如在构建包含二进制数据的测试输出 XML 文件时）。因此，将字符转换为 UTF-8 会丢失信息。所以，我们可能想要转换：

```
"foo" . chr(128) . chr(255) 
```

进入

```
"foo<128><255>" 
```

所以只是“检测”字符串不够好，我们需要能够检测哪些字符是无效的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-29T12:53:39.397

您可以使用此 PCRE 正则表达式来检查字符串中的有效 UTF-8。如果正则表达式匹配，则字符串包含无效的字节序列。它是 100% 可移植的，因为它不依赖 PCRE_UTF8 进行编译。

```
$regex = '/(
    [\xC0-\xC1] # Invalid UTF-8 Bytes
    | [\xF5-\xFF] # Invalid UTF-8 Bytes
    | \xE0[\x80-\x9F] # Overlong encoding of prior code point
    | \xF0[\x80-\x8F] # Overlong encoding of prior code point
    | [\xC2-\xDF](?![\x80-\xBF]) # Invalid UTF-8 Sequence Start
    | [\xE0-\xEF](?![\x80-\xBF]{2}) # Invalid UTF-8 Sequence Start
    | [\xF0-\xF4](?![\x80-\xBF]{3}) # Invalid UTF-8 Sequence Start
    | (?<=[\x00-\x7F\xF5-\xFF])[\x80-\xBF] # Invalid UTF-8 Sequence Middle
    | (?<![\xC2-\xDF]|[\xE0-\xEF]|[\xE0-\xEF][\x80-\xBF]|[\xF0-\xF4]|[\xF0-\xF4][\x80-\xBF]|[\xF0-\xF4][\x80-\xBF]{2})[\x80-\xBF] # Overlong Sequence
    | (?<=[\xE0-\xEF])[\x80-\xBF](?![\x80-\xBF]) # Short 3 byte sequence
    | (?<=[\xF0-\xF4])[\x80-\xBF](?![\x80-\xBF]{2}) # Short 4 byte sequence
    | (?<=[\xF0-\xF4][\x80-\xBF])[\x80-\xBF](?![\x80-\xBF]) # Short 4 byte sequence (2)
)/x'; 
```

我们可以通过创建一些文本变体来测试它：

```
// Overlong encoding of code point 0
$text = chr(0xC0) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 5 byte encoding
$text = chr(0xF8) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 6 byte encoding
$text = chr(0xFC) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);        
var_dump(preg_match($regex, $text)); // int(1)
// High code-point without trailing characters
$text = chr(0xD0) . chr(0x01);
var_dump(preg_match($regex, $text)); // int(1) 
```

ETC...

事实上，由于这匹配无效字节，您可以在 preg_replace 中使用它来替换它们：

```
preg_replace($regex, '', $text); // Remove all invalid UTF-8 code-points 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-29T14:02:53.387

假设 PHP 是使用 PCRE 编译的，它通常也使用 UTF-8 启用。因此，正如问题中明确要求的那样，这个非常简单的正则表达式可以检测无效的 UTF-8 字符串，因为它们不匹配：

```
preg_match('//u', $string); 
```

然后，您可以争辩说`u`修饰符 (PCRE_UTF8) 并不总是可用，并且确实，这可能会发生，如以下问题所示：

*   [preg_match_all`u`标志取决于什么？](https://stackoverflow.com/q/7456939/367456)

但是，在我实际的开发人员生活中，这从来都不是问题。更多的问题是 PCRE 扩展根本不可用，这会使任何包含 PCRE 的答案都变得无用（即使是我的）。但大多数情况下，这个问题更像是一个过去的问题，直到今天减去几年。

在不知何故重复的问题中给出了与此类似的更冗长的答案：

*   [如何在 PHP 中检测格式错误的 UTF-8 字符串？](https://stackoverflow.com/questions/6723562)

所以我认为这个问题应该突出建议的答案所带来的更多好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-29T17:09:28.583

[W3C 有一个页面（标题为*Multilingual form encoding*）](http://www.w3.org/International/questions/qa-forms-utf-8)列出了以下**与有效 UTF-8 字符串匹配的**Perl 正则表达式。

（请注意，这与此 SO 问题的另一个答案中列出的正则表达式相反，它匹配*无效*的UTF-8 字符串。）

```
#  Returns true if $field is UTF-8, and false otherwise.

$field =~
  m/\A(
     [\x09\x0A\x0D\x20-\x7E]            # ASCII
   | [\xC2-\xDF][\x80-\xBF]             # non-overlong 2-byte
   |  \xE0[\xA0-\xBF][\x80-\xBF]        # excluding overlongs
   | [\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}  # straight 3-byte
   |  \xED[\x80-\x9F][\x80-\xBF]        # excluding surrogates
   |  \xF0[\x90-\xBF][\x80-\xBF]{2}     # planes 1-3
   | [\xF1-\xF3][\x80-\xBF]{3}          # planes 4-15
   |  \xF4[\x80-\x8F][\x80-\xBF]{2}     # plane 16
  )*\z/x; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-04T21:46:02.957

这适用于检测 Unicode 字符、链接表情符号、俄语或中文：

```
private function has_unicode($string)
{
    $pattern = '/^.*[^\x{00}-\x{00FF}]+.*$/u';
    return preg_match($pattern, $string) ? true : false;
} 
```

# windows-phone - RxUI：从集合中删除项目后出现异常

> ID：11709417
> 
> 赞同：1
> 
> 时间：2012-07-29T12:54:10.587
> 
> 标签：windows-phone, reactiveui

我正在编写简单的 WP7 应用程序来研究 ReactiveUI。我想在屏幕上显示一个集合，项目应该是可选择的，并且我想要一个命令从集合中删除所有选定的项目。此外，该命令必须仅在至少有一个选定项目时才可执行。我有一个以这种方式定义的集合：

```
Persons = model.Persons
                .CreateDerivedCollection(x => new PersonViewModel(x)); 
```

在`PersonViewModel`我有一个属性：

```
private bool _isSelected;
public bool IsSelected
{
    get { return _isSelected; }
    set { this.RaiseAndSetIfChanged(x => x.IsSelected, ref _isSelected, value); }
} 
```

模型中没有关于选择状态的信息，只是在 viewModel 中。在 Page ViewModel 我有这个代码：

```
Persons = model.Persons.CreateDerivedCollection(x => new PersonViewModel(x));
Persons.ChangeTrackingEnabled = true;

var deleteSelectedCanExecute = Persons.ItemChanged
                                  .Select(_ => Persons .Any(p => p.IsSelected));

DeleteSelectedCommand = new ReactiveCommand
                (
                       deleteSelectedCanExecute
                );
DeleteSelectedCommand.Subscribe(
                x => RemoveSelected()
                ); 
```

和一个方法：

```
 private void RemoveSelected()
    {
        var res = Persons.Where(p => p.IsSelected)
             .Select(x => x.Model).ToList();
        foreach (var person in res)
        {
            _model.Persons.Remove(person);
        }
    } 
```

第一个问题（不是那么重要，我想我可以自己找到解决方案）：当我运行应用程序时，DeleteSelected 按钮是 Active.DeleteSelectedCommand.CanExecute 不会触发。但是，在选择/取消选择任何项目后 - 按钮状态工作正常。

和主要问题：

在我运行 DeleteSelectedCommand 后，它会删除所有选定的项目（我在调试器中看到它）。然后我得到了带有以下堆栈跟踪的“NotSupportedException”：

```
 at System.Threading.Interlocked.Decrement(Int64& location)
   at ReactiveUI.RefcountDisposeWrapper.Release()
   at ReactiveUI.ReactiveCollection`1.removeItemFromPropertyTracking(PersonViewModel toUntrack)
   at ReactiveUI.ReactiveCollection`1.<setupRx>b__18(PersonViewModelx)
   at System.Reactive.AnonymousObserver`1.Next(PersonViewModelvalue)
   at System.Reactive.AbstractObserver`1.OnNext(PersonViewModelvalue)
   at System.Reactive.AutoDetachObserver`1.Next(PersonViewModelvalue)
   at System.Reactive.AbstractObserver`1.OnNext(PersonViewModelvalue)
   at System.Reactive.ScheduledObserver`1.<>c__DisplayClass4.<Next>b__2()
   at System.Reactive.ScheduledObserver`1.<EnsureActive>b__0(Action self)
   at System.Reactive.Concurrency.Scheduler.<Schedule>b__0(Action`1 _action, Action`1 self)
   at System.Reactive.Concurrency.Scheduler.<>c__DisplayClass9`1.<InvokeRec1>b__6(Action`1 state1)
   at System.Reactive.Concurrency.Scheduler.InvokeRec1[TState](IScheduler scheduler, Pair`2 pair)
   at System.Reactive.Concurrency.DispatcherScheduler.<>c__DisplayClass1`1.<Schedule>b__0()
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
   at System.Delegate.DynamicInvokeOne(Object[] args)
   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
   at System.Delegate.DynamicInvoke(Object[] args)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
   at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
   at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
   at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
   at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

所以我做错了，但问题是什么？我无法从 ST 中理解。实现此行为的正确方法是什么。这很常见不是吗？

**更新**

如果我删除有关 deleteSelectedCanExecute 的所有代码并运行程序 - 它会崩溃。如果我删除`Participants.ChangeTrackingEnabled = true;`- 它会按我的预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:02:52.977

Anton，你是新的[ReactiveUI 提交](https://github.com/xpaulbettsx/ReactiveUI/commit/6bd115dfe0aaa2fc2b0523cb9856b2eea9e0d362)的骄傲拥有者- 从源代码构建，你的崩溃应该消失。

至于你关于选择的问题，如果集合可以改变大小，这是一个目前有点棘手的场景。某处的代码不仅必须订阅集合中的每个*项目*，还必须保留正在添加或删除哪些项目的列表（即有*两种*不再选择的方法，`Item.IsSelected`从`true`=>开始`false`，*或被* `Item`删除）。

如果您没有快速更改的列表，则可以以一种效率较低但更简单的方式执行此操作：

```
var cmd = new ReactiveCommand(
    Persons.ItemsCountChanged.Select(_ => 
        Persons.Any(x => x.IsSelected))); 
```

顺便说一句，这个解决方案也不需要`ChangeTrackingEnabled`，所以你不需要解决我刚刚修复的错误。

# mysql - 如何通过将变量等同于行表来从 mysql 中回显一个值

> ID：11709419
> 
> 赞同：-4
> 
> 时间：2012-07-29T12:54:14.000
> 
> 标签：mysql

我的表名是“新”，它有 3 行，ID 名称和标题，我还有一个变量“嗨”。如果“新”表中的“标题”行中的变量 $hi(introduce) == value(introduce)，mysql 查询是什么。然后回声介绍。

```
$hi ="introduce";

--------------------- 
id | name | title |
---------------------
 1 | hi   | introduce
 2 | hello| tell me 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:59:34.533

不知道 echo 但您可以选择 title=introduce 的所有行，如下所示：

```
SELECT * FROM new WHERE title = 'introduce'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T12:59:31.127

```
$query = "select * from `new` where `title` = '$hi'"; 
```

# asp.net-mvc-3 - 在 Asp.net MVC 3 中使用代码优先

> ID：11709422
> 
> 赞同：0
> 
> 时间：2012-07-29T12:55:06.613
> 
> 标签：asp.net-mvc-3, entity-framework

在我的 Asp.net mvc3 应用程序中应用代码第一范式之后。当我第一次运行应用程序时，首先从代码中动态创建了后台数据库。但是当我再次运行它时。我有一个胖异常说你不能创建数据库，因为它存在。所以我只是不知道如果数据库存在，如何告诉 EF 不要创建数据库。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:16:05.440

这可能对你有用

[EF Code First 现有数据库](https://stackoverflow.com/questions/6343253/ef-code-first-existing-database)

# cocoa - 禁用一个窗口的自动布局

> ID：11709425
> 
> 赞同：0
> 
> 时间：2012-07-29T12:55:34.887
> 
> 标签：cocoa

我有一个包含两个窗口的 Nib 文件。有没有办法只为一个窗口禁用自动布局？Nib 文件检查器中的“使用自动布局”框更改了两个窗口的设置。

还是我必须创建两个单独的 Nib 文件？

谢谢！

/s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:26:17.947

目前看起来该设置是笔尖范围的，因此您需要两个笔尖。

# android - 删除最后一个字符时Android EditText中的空异常

> ID：11709426
> 
> 赞同：0
> 
> 时间：2012-07-29T12:56:01.247
> 
> 标签：android, android-edittext

我是 Android 编程新手。我下面的程序做了一个简单的华氏到摄氏转换。如果您在 Farenheit EditText 中输入值，它将立即将其转换为摄氏度。反之亦然。

我收到以下错误：

当我继续在华氏文本框中输入值时，没有问题。当我也删除该值时，它会一直删除到最后一个字符。如果我按退格键（在模拟器中）删除最后一个字符，它将停止运行。运行代码时出现以下错误。

2）即使焦点设置在摄氏 EditText 上，模拟器在启动时始终将华氏温度显示为焦点

3）我在摄氏编辑文本中所做的更改未反映在华氏温度中。

（请不要以为我在论坛发帖没有调试，我已经尝试了3个多小时才发到这里，这样我可以保持这个论坛的干净）

07-29 01:59:21.189：E/AndroidRuntime(1390)：java.lang.NumberFormatException：无效浮点数：“”

以下是我的 MainActivity.Java

```
 public class MainActivity extends Activity {
     private EditText celsiusText;
     private EditText farenheitText;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        celsiusText = (EditText) findViewById(R.id.editText1);
        farenheitText = (EditText) findViewById(R.id.editText2);
        celsiusText.requestFocus();
        celsiusText.setOnFocusChangeListener((OnFocusChangeListener) this);
        farenheitText.setOnFocusChangeListener((OnFocusChangeListener) this);
    }
       public void onFocusChange(View v, boolean hasFocus)

        {

           TextWatcher watcher1 = new TextWatcher(){
            public void afterTextChanged(Editable s) {

               }

               public void beforeTextChanged(CharSequence s, int start, 
                 int count, int after) {
               }
            public void onTextChanged(CharSequence S,int start,int before, int count){
                float inputValue;
                if (!S.toString().equals(""))
                {
                    inputValue = Float.parseFloat(S.toString());
                             ((EditText)findViewById(R.id.editText1)).setText(String
                                    .valueOf(convertFahrenheitToCelsius(inputValue)));

                }
                else
                {
                     ((EditText)findViewById(R.id.editText1)).setText("");
                    return;
                }
                        }
           };

           TextWatcher watcher2 = new TextWatcher()
           {
                        public void afterTextChanged(Editable s) {

                   }

                   public void beforeTextChanged(CharSequence s, int start, 
                     int count, int after) {
                   }
                public void onTextChanged(CharSequence S,int start,int before, int count){
                    float inputValue;
                    if (!S.toString().equals(""))
                    {
                        inputValue = Float.parseFloat(S.toString());
                     ((EditText)findViewById(R.id.editText2)).setText(String
                                .valueOf(convertCelsiusToFahrenheit(inputValue)));

                    }
                    else
                    {
                        ((EditText)findViewById(R.id.editText2)).setText("");
                        return;
                    }
                            }
                };

                if((v == findViewById(R.id.editText2)) &&  (hasFocus==true)) 
                {
                farenheitText.addTextChangedListener(watcher1);
                }
                else if ((v == findViewById(R.id.editText1)) &&  (hasFocus==true)) 
                {
                    ((EditText)findViewById(R.id.editText1)).setText("");
                celsiusText.addTextChangedListener(watcher2);
                }
        }

//Converts to celsius
      private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
      }

      // Converts to fahrenheit
      private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
      }

} 
```

我的 Activity_main.xml 是

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="62dp"
        android:ems="10"
        android:inputType="numberSigned" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/editText1"
        android:layout_alignBottom="@+id/editText1"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:inputType="numberSigned" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="18dp"
        android:text="@string/celsius"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignRight="@+id/editText2"
        android:text="@string/fahrenheit"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

正如您所看到的，我的下一步将是编辑两侧的文本框，对于如何将此代码转换为摄氏度（使用 setfocus 以便它不会抛出错误）的任何帮助也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:59:24.157

问题出在- 方法中`onTextChanged()`：

```
float inputValue;
if (S != "") {
    inputValue = Float.parseFloat(S.toString());
    // ...
} 
```

if 永远不会为真，因为您检查的字符串对象是不*一样的*。正确的方法是：

```
if (!S.toString().equals("")) 
```

或者，甚至更好：

```
if (S.length > 0) 
```

这会导致`Float.parseFloat(String)`使用空字符串调用 - 方法，从而抛出`NumberFormatException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:57:29.733

您的代码正在尝试将 NULL 值转换为摄氏度，

```
if(inputValue==null){
// Handle the situation here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T12:59:32.803

尝试检查字符串的长度：

```
if (S != "" && S.length() > 0){
                    inputValue = Float.parseFloat(S.toString());
                    celsiusText.setText(String
                            .valueOf(convertFahrenheitToCelsius(inputValue)));
                } 
```

# iphone - 将 UIscrollView 保存到 Uiimage

> ID：11709429
> 
> 赞同：0
> 
> 时间：2012-07-29T12:56:22.967
> 
> 标签：iphone, ios, xcode

我正在尝试使用以下代码将编辑后的 ​​UIscrollView 保存到 UIImage 中。但我在视图中看到的并不是我保存的。它以某种方式被保存的照片侧面的空白灰色条所抵消。我的 UIscrollView 没有触及视图的框架。有人知道该怎么做吗？如果我必须使用“theScrollView.layer”来渲染它。放大照片后，照片会变差。

```
CGSize photoSize = theScrollView.bounds.size;
UIGraphicsBeginImageContext(photoSize);
CGContextRef context = UIGraphicsGetCurrentContext();
CALayer *layer = self.view.layer;
[layer renderInContext:context];
UIImage *someImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(someImage,nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:11:10.997

替换`CGContextRef context = UIGraphicsGetCurrentContext();`为

`if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) UIGraphicsBeginImageContextWithOptions(self.PostView.bounds.size, NO, [UIScreen mainScreen].scale); else UIGraphicsBeginImageContext(self.PostView.bounds.size);`

如果您从 Retina Display 捕获，这可能会有所帮助。

*   如果您需要截取 uiscrollview 的屏幕截图，请将“self.view.layer”替换为“yourscrollview.layer”

祝你好运

# c# - 如何清除 log4net 日志文件？

> ID：11709432
> 
> 赞同：8
> 
> 时间：2012-07-29T12:57:12.673
> 
> 标签：c#, log4net

我正在使用 log4net。我想在我的 GUI 中添加一个按钮，当用户单击该按钮时，日志文件将被清除。我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T21:09:05.157

我也有这个问题。

你需要在你的配置中：

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-29T13:02:50.863

log4net 不支持“开箱即用”。但是，您可以使用 RollingFileAppender 并创建手动类/方法来清理/删除日志文件。

作为参考，[Log4Net: set Max backup files on RollingFileAppender with rolling Date](https://stackoverflow.com/questions/95286/log4net-set-max-backup-files-on-rollingfileappender-with-rolling-date)

避免文件被锁定的另一种方法是通过以下方式在日志文件上设置最小锁定级别：

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-04T17:59:53.120

如果您不想遭受最小锁的性能影响（请参阅[答案](https://stackoverflow.com/a/1999446/782964)），那么您可以临时配置附加程序以使用最小锁，删除文件，然后恢复默认行为。

仅使用 RollingFileAppenders 的示例：

```
// Release the lock on the log4net log files
var appenders = log4net.LogManager.GetRepository().GetAppenders();
foreach (var appender in appenders)
{
    var rollingFileAppender = appender as log4net.Appender.RollingFileAppender;
    if (rollingFileAppender != null)
    {
        rollingFileAppender.ImmediateFlush = true;
        rollingFileAppender.LockingModel = new log4net.Appender.FileAppender.MinimalLock();
        rollingFileAppender.ActivateOptions();
    }
} 
```

这些文件现在可以毫无问题地自由删除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T13:32:48.267

谢谢大家，我成功清除了日志。在日志配置文件的 appender 块中，我添加了该行：

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

清除日志文件的代码是：

```
 RollingFileAppender fileAppender = LogManager.GetRepository()
                        .GetAppenders().FirstOrDefault(appender => appender is RollingFileAppender) as RollingFileAppender;

        if (fileAppender != null && File.Exists(((RollingFileAppender)fileAppender).File))
        {
            string path = ((RollingFileAppender)fileAppender).File;
            log4net.Appender.FileAppender curAppender = fileAppender as log4net.Appender.FileAppender;
            curAppender.File = path;

            FileStream fs = null;
            try
            {
                fs = new FileStream(path, FileMode.Create);
            }
            catch(Exception ex)
            {
                (log4net.LogManager.GetLogger(this.GetType())).Error("Could not clear the file log", ex);
            }
            finally
            {
                if (fs != null)
                {
                    fs.Close();
                }

            }
        } 
```

**谢谢你们**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-16T10:34:00.390

只需使用命令

```
 File.WriteAllText("C:/Users.../log.xml", ""); 
```

在应用程序的开始。

# html - 当我不使用溢出时，浮动 div 不显示背景颜色？

> ID：11709433
> 
> 赞同：4
> 
> 时间：2012-07-29T12:57:21.790
> 
> 标签：html, css, css-float, overflow

**HTML**：

```
<div id="wrapper">
    <div id="content">
      <div id="slider"></div>

      <div id="left"></div>

      <div id="right"></div>
    </div>
  </div> 
```

**CSS**：

```
#wrapper
{
  background:blue;
  width:990px;
  margin:0 auto;
}

#content
{
  width:990px;
  height:auto;
}

#slider
{
  width:990px;
/* slider jquery   */
  height:auto;
}

#left
{
  float:left;
  width:490px;
}

#right
{
  float:right;
  width:490px;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/9sP3PJxp)**

但在左右 div 蓝色不显示，

如果我`overflow:hidden`愿意，`wrapper`那么它的工作就很好。是否有必要给`overflow`浮动div的父母？

为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-29T13:21:55.783

我们在编码时面临的一个常见问题`float based layouts`是`wrapper container`没有扩展到`height of the child floating elements.`解决这个问题的典型解决方案是添加一个带有 的元素`clear float after the floating elements or adding a clearfix to the wrapper`。但您也可以使用`overflow property to fix this problem`. 这也不是一个新的 CSS 技巧。它在很久以前就被记录在案了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-29T13:02:48.963

当你浮动一个元素时，它看起来好像失去了它的高度。所以元素是蓝色的，你只是看不到它。要么给他高度，要么用`overflow: hidden`. 如果你想要元素的背景颜色，它是`background-color: blue`. `color: blue`用于字母。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T13:31:23.593

如果您在 a 中有浮动元素，则必须使用[**clearfix**](http://www.webtoolkit.info/css-clearfix.html)`<div>`。

> 当浮动元素位于容器框内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。

```
<div id="wrapper">
  <div id="content">
    <div id="slider">slider</div>
    <div id="left">left</div>
    <div id="right">right</div>
    <div class="clear"></div> <!-- THIS -->
  </div>
</div> 
```

```
.clear { clear: both } 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/8cfMG32D)**

# c++ - C++ faq 32.8“将 C++ 类的对象传递给/从 C 函数”问题

> ID：11709434
> 
> 赞同：0
> 
> 时间：2012-07-29T12:57:21.973
> 
> 标签：c++, c

[http://www.parashift.com/c%2B%2B-faq/cpp-objs-passed-to-c.html](http://www.parashift.com/c%2B%2B-faq/cpp-objs-passed-to-c.html)

答案分为两部分。我猜第一部分是直到代码结束。

对于第一部分，我看到的是作者正在使用“C”链接指令（extern“C”）用于用 C 编写的函数或由 C 函数调用的 C++ 函数（见下文），所以链接会没问题.

```
extern void c_function(Fred*);  // c function 
extern Fred* cplusplus_callback_function(Fred*);  // c++ function 
```

这是有道理的。

然后 Fred* 从 main() 一直传递到 c_function() [我猜这就是作者/常见问题解答关于将 C++ 对象传递给 C 函数的说法]，然后到 cplusplus_callback_function() [对象从 C 传递回 C++ 域功能]。

所以第一个问题，我是否正确理解了上述内容？所以常见问题的答案只是“传递一个指针”对象？

第二个问题，作者在代码迷路后解释了什么。他突然谈到比较指针是否相等，基数和派生之间的指针转换等。他想说什么？那个指针在被传递给 c_function 之后就失去了它所有的魔力？如果它是指向派生类的基类指针，如果它传递给 C++ 函数而不是 C 函数，我们可以做更多的事情吗？

最后一个问题，我想我不知道 C++ 代码是否包含在 extern "C" 指令中，唯一改变的是链接，但没有别的？C++ 代码仍然是 C++，对吧？如果我用 C++ 编写所有代码，但故意将一些函数包装在 extern "C" 中，我会失去什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:18:09.480

> 所以常见问题的答案只是“传递一个指针”对象？

这还有一件事，那就是`#ifndef __cplusplus`，你需要

```
typedef struct Fred Fred; 
```

即转发声明`Fred`为 a `struct`（注意 a`struct`和 a`class`仅在默认访问权限上有所不同）。

> 他想说什么？那个指针在被传递给 c_function 之后就失去了它所有的魔力？

C++ 编译器理解继承并会在进行比较之前转换指针类型。相比之下，C 编译器没有继承的概念，实际上不允许将不同类型的指针指向单个对象，除非其中至少有一个`void*`是`char*`或`unsigned char*`。正如您在常见问题解答中看到的那样，`void*`在桥接 C 和 C++ 时，即使转换为也是微妙的。

简单的解决方案是只给程序的 C 端`Base`指针。即，如果可能的话，完全隐藏它的继承。

> 如果我用 C++ 编写所有代码，但故意将一些函数包装在 extern "C" 中，我会失去什么？

超载。您不能有两个具有相同名称的 C 链接函数，即

```
extern "C" {
    void foo(void);
    void foo(int);
} 
```

不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:32:16.983

在 C++ 中，当您使用多重继承时，在将派生类的指针强制转换为其基类之一时，您可能会发生指针移位。

这是一个检查它的例子：

```
#include <stdio.h>

using namespace std;

class Base1
{
private:
   int data1;
};

class Base2
{
private:
   int data2;
};

class Derived : public Base1, public Base2 {};

int main()
{
   Derived *derived_pointer = new Derived();
   Base1 *base1_pointer = dynamic_cast< Base1* >( derived_pointer );
   Base2 *base2_pointer = dynamic_cast< Base2* >( derived_pointer );

   printf( "derived = %p\n", derived_pointer );
   printf( "base1 = %p\n", base1_pointer );
   printf( "base2 = %p\n", base2_pointer );

   printf( "dervied == base1_pointer = %d\n", derived_pointer == base1_pointer );
   printf( "derived == base2_pointer = %d\n", derived_pointer == base2_pointer );

   return 0;
} 
```

我系统上的输出（用 g++ 4.6.3 编译）是：

```
derived = 0x9901008
base1 = 0x9901008
base2 = 0x990100c
dervied == base1_pointer = 1
derived == base2_pointer = 1 
```

在这里我们看到，即使指向基类的指针不同，我们看到指针的比较表明它们是相等的，因为它们指向它们都是父类的类的对象）。AC 程序对继承类和基类一无所知，因此它只会比较内存中的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-23T17:49:29.523

对于问题的第一部分，c_function 接收 typedef struct Fred Fred 类型的指针；不是物体或结构。那么该对象如何在那里使用呢？这个 C 函数如何接收 Fred.a_ 的值？可以定义为在 c_function 中映射 a_ 吗？

参考： [https ://isocpp.org/wiki/faq/mixing-c-and-cpp#cpp-objs-passed-to-c](https://isocpp.org/wiki/faq/mixing-c-and-cpp#cpp-objs-passed-to-c)

# android - Android SDK 找不到 JDK

> ID：11709435
> 
> 赞同：0
> 
> 时间：2012-07-29T12:57:23.597
> 
> 标签：android, sdk, java

我正在使用适用于 Windows 7 64 位系统的 installer_r20.0.1-windows（安装文件）安装 Android sdk。除了我正在使用这个 jdk-7u5-windows-x64(setup file) for windows 来安装 jdk。我安装了 jdk 并尝试来回移动，以便 sdk 识别 jdk，但它没有这样做。请建议我该怎么做？另外，如果有任何32位和64位安装的问题，请告诉我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T20:48:18.237

这是我的经验。我安装了 jdk-7u9-windows-x64，然后尝试安装 Android SDK (installer_r21-windows)。它回应：

> 错误：无法找到“C:\Windows\system32\java.exe”的 Java 版本：[2] 系统找不到指定的文件。

两种解决方案对我有用：

1）创建一个`JAVA_HOME = "C:\Program Files\Java\jdk1.7.0_09"`使用实际路径的环境变量（如果它不同）。

2）修改Path环境变量，使其包含JDK安装的bin文件夹。这里需要注意的是，它必须在 "%SystemRoot%\system32" 之前

即路径≈

```
C:\Program Files\Java\jdk1.7.0_09\bin;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;` 
```

代替：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\Program Files\Java\jdk1.7.0_09\bin` 
```

我不确定选项 2 是否违反公共 jre 与 jdk 私有 jre 的原则，所以一般我建议使用选项 1 并将 jdk 的 bin 目录添加到路径 env 变量的**末尾**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:21:58.310

对我来说，我在没有安装 JDK v6 的情况下安装 SDK 时遇到了麻烦，尽管我仍然（现在）将 JDK v7 用于 Eclipse 和我的开发环境。

看看这是否适合您：安装 JDKv6，然后运行 ​​SDK 安装程序。它应该（希望）检测到 JDK 安装并继续。安装后，卸载 JDKv6，现在安装 JDKv7 并从那里继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:48:59.847

我先安装了JDK（v7，x64），然后Android SDK告诉我找不到JDK。然后我删除了 C:\Windows\System32\java.exe（实际上我重命名为 exjava.exe）并重新启动了 Android 安装并且工作正常。我希望它有帮助，祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T13:00:25.510

Andoid sdk 与 jdk 7 不兼容，您应该使用最新版本的 jdk 6，32 位。

# vba - 获取实时股票指数值的 VBA 代码

> ID：11709441
> 
> 赞同：0
> 
> 时间：2012-07-29T12:58:02.187
> 
> 标签：vba, yahoo-finance, bloomberg, stockquotes

我正在寻找股票指数的实时值，例如道琼斯指数 (DJIA) 或恒生指数 (HSI)。

这些需要从一组（可配置的）索引符号中生成，并保存到 VBA 变量中，而无需与工作表进行任何交互。理想情况下，这将来自彭博或雅虎（如果需要）（尽管任何其他来源也可以，只要它是实时的）。

我知道这是一项简单的任务，尽管我找不到任何直接的方法——只有获取期权价格或股票数据等的示例。我知道我从对彭博 API 的引用开始，但我似乎无法比这更进一步。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:08:55.520

如果您想使用 Bloomberg API 检索实时数据，您需要成为 Bloomberg 订阅者 ($$$)。正如您还提到雅虎，它是免费的，我怀疑这不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:23:03.830

这不是一项简单的任务。

您需要为[http://www.google.com/finance?q=GOOG](http://www.google.com/finance?q=GOOG)发起 HTTP GET 请求，并自行解析返回字符串。

HTTP 请求使用以下代码发送：

```
 Set HttpReq = CreateObject("MSXML2.ServerXMLHTTP")
     HttpReq.Open "GET", "http://www.google.com/finance?q=GOOG", False
     HttpReq.send
     MsgBox HttpReq.responseText 
```

# javascript - 可重新排列的图像网格

> ID：11709445
> 
> 赞同：0
> 
> 时间：2012-07-29T12:59:08.210
> 
> 标签：javascript, html, image, canvas

可能已经有一个与此相关的问题，但我不知道从哪里开始寻找答案。

我有许多图像（用户将它们拖到**HTML5**拖放区），我想以**网格格式**排列它们。我的放置区几乎按照我想要的方式工作。

问题是我需要用户能够重新排列它们，同时仍将它们保持为**网格形式**。如果您通过拖放重新排列图像，我会更喜欢它。

并非所有的洞都会一直被填满。我需要知道图像的顺序，以便我可以使用该信息将图像绘制到画布上，以便提供要导出的单个图像（这适用于简单的图块集编辑器，例如**css sprite**）。所有图像的大小都相同。

我**不想**使用**JQuery**。

有人知道有什么好的图书馆会有所帮助吗？

先感谢您。

# java - XML 解析：无法正确解析 xml

> ID：11709449
> 
> 赞同：0
> 
> 时间：2012-07-29T12:59:23.193
> 
> 标签：java, android, xml, xml-parsing

我有以下 XML，

```
<toplevel>
<CompleteSuggestion>
<suggestion data="rahm emanuel"/>
<num_queries int="6350000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="raheem devaughn"/>
<num_queries int="2130000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahat fateh ali khan"/>
<num_queries int="9020000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahab"/>
<num_queries int="1690000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahr brewery"/>
<num_queries int="113000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahsaan patterson"/>
<num_queries int="472000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahul gandhi"/>
<num_queries int="14600000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rah digga"/>
<num_queries int="1180000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahxephon"/>
<num_queries int="1660000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="rahway nj"/>
<num_queries int="3690000"/>
</CompleteSuggestion>
</toplevel> 
```

这是 google api 的输出。我正在尝试在我的 android 应用程序中进行解析。我正在使用 DOM 来解析它。我有以下代码。

```
 Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } 

    Element root = doc.getDocumentElement();

    NodeList nl = doc.getElementsByTagName("CompleteSuggestion");

    for (int i = 0; i < nl.getLength(); i++) {
        Element suggestion = (Element)nl.item(i);
        String name = suggestion.getAttribute("suggestion");
        System.out.println(name);
    } 
```

我无法获得正确的属性值。每次都是空的。

谢谢！拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:55:03.277

建议不是元素的属性，数据是元素建议的属性。用这个：

```
for (int i = 0; i < nl.getLength(); i++) {
        Element c_suggestion = (Element)nl.item(i);
        Element suggestion = c_suggestion.getElementsByTagName("Suggestion")
        String name = suggestion.getAttribute("data");
        System.out.println(name);
    } 
```

# c++ - typeid 的可读形式？

> ID：11709455
> 
> 赞同：3
> 
> 时间：2012-07-29T12:59:56.040
> 
> 标签：c++, c++11, typeid

是否有编译器以可读的方式返回类型的名称（或提供该功能或工具的库）。本质上，我想要的是与您在源代码中编写的类型表达式相对应的字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T13:19:14.940

```
 typeid(var).name() 
```

就是你要找的。但是，输出因编译器而异……例如，对于is`gcc`的输出，对于`int`is 。这是一个小测试程序：`i``unsigned``j`

```
#include <iostream>
#include <typeinfo>

struct A { virtual ~A() { } };
struct B : A { };

class C { };
class D : public C { };

int main() {
  B b;
  A* ap = &b;
  A& ar = b;
  std::cout << "ap: " << typeid(*ap).name() << std::endl;
  std::cout << "ar: " << typeid(ar).name() << std::endl;

  D d;
  C* cp = &d;
  C& cr = d;
  std::cout << "cp: " << typeid(*cp).name() << std::endl;
  std::cout << "cr: " << typeid(cr).name() << std::endl;

  int e;
  unsigned f;
  char g;
  float h;
  double i;
  std::cout << "int:\t" << typeid(e).name() << std::endl;
  std::cout << "unsigned:\t" << typeid(f).name() << std::endl;
  std::cout << "char:\t" << typeid(g).name() << std::endl;
  std::cout << "float:\t" << typeid(h).name() << std::endl;
  std::cout << "double:\t" << typeid(i).name() << std::endl;
} 
```

另请参阅此问题：[typeid(T).name() alternative in c++11?](https://stackoverflow.com/questions/9004578/typeidt-name-alternative-in-c11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-26T04:50:11.787

在搜索这个问题时，我刚刚在 boost 库中找到了我需要的东西： [boost::core::demangle](https://www.boost.org/doc/libs/1_63_0/libs/core/doc/html/core/demangle.html)

就我而言，它是为了捕获异常：

```
try {
  //...
} catch (std::exception& e) {
  boost::core::scoped_demangled_name demangled(typeid(e).name());
  std::cerr << "ERROR: " << demangled.get() << ": " << e.what() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T16:15:49.003

下面是我写的一个小类，用于检查类型。如果需要，您可以添加更多类型。它无法检查数组类型、映射或任何过于先进的东西。如果需要，您可以添加更多类型，甚至可以添加您自己的自定义类型。这只是一个小样本。

此外，getType 函数正是您要寻找的。根据匹配的类型，您可以自定义输出字符串。我省略了包含部分，所以你只需要找到正确的包含文件，因为这个库是我更大的库的一部分。

/* 头文件.hpp */

```
class _cType
{
    public:
    _cType();
    ~_cType();

    template<class T, class U>
    static bool isSame(T &vl, U &vr);

    template<class T>
    static bool isInt(T &v);

    template<class T>
    static bool isUInt(T &v);           

    template<class T>
    static bool isFloat(T &v);

    template<class T>
    static bool isLong(T &v);

    template<class T>
    static bool isDouble(T &v);

    template<class T>
    static bool isBool(T &v);

    template<class T>
    static bool isString(T &v);

    template<class T>
    static bool isChar(T &v);

    template<class T>
    static std::string getType(T &v);

};

extern _cType Type; 
```

/* source.cpp */

```
_cType::_cType(){};

template<class T, class U>
bool _cType::isSame(T &vl, U &vr){
    return ( typeid(vl) == typeid(vr) );
}

template<class T>
bool _cType::isInt(T &v){
    return typeid(v) == typeid(int);
}

template<class T>
bool _cType::isUInt(T &v){
    return typeid(v) == typeid(unsigned int);
}    

template<class T>
bool _cType::isFloat(T &v){
    return typeid(v) == typeid(float);
}

template<class T>
bool _cType::isLong(T &v){
    return typeid(v) == typeid(long);
}

template<class T>
bool _cType::isDouble(T &v){
    return typeid(v) == typeid(double);
}

template<class T>
bool _cType::isBool(T &v){
    return typeid(v) == typeid(bool);
}

template<class T>
bool _cType::isString(T &v){
    return typeid(v) == typeid(std::string);
}

template<class T>
bool _cType::isChar(T &v){
    return typeid(v) == typeid(char);
}

template<class T>
std::string _cType::getType(T &v){

    if ( typeid(v) == typeid(int) ) return "int";    
    else if ( typeid(v) == typeid(unsigned int) ) return "unsigned int";
    else if ( typeid(v) == typeid(float) ) return "float";
    else if ( typeid(v) == typeid(long) ) return "long";
    else if ( typeid(v) == typeid(double) ) return "double";
    else if ( typeid(v) == typeid(char) ) return "char";
    else if ( typeid(v) == typeid(std::string) ) return "std::string";
    else if ( typeid(v) == typeid(bool) ) return "bool";
    else return std::string("User defined or unknown type: ") + typeid(v).name();
}

_cType::~_cType(){};

_cType Type; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-26T18:19:44.557

要回答您的问题的字母（其他答案解决其意图），最简单的答案是 Visual C++ 提供“未修饰”（未损坏）名称作为 的输出`std::type_info::name()`，同时将实际的损坏类型隐藏在编译器扩展后面`std::type_info::raw_name()`；CPPReference 还提到 IBM 和 Oracle 提供了经过修饰的、人类可读的名称，但我对他们的编译器没有经验，因此我自己不能说这种说法是否准确。

# asp.net - 下拉级联问题：如何级联两个下拉

> ID：11709456
> 
> 赞同：0
> 
> 时间：2012-07-29T12:59:57.027
> 
> 标签：asp.net, database, vb.net, entity-framework, drop-down-menu

我正在尝试使用 ASP 和 VB 级联下拉菜单

```
1st drop down   --> Sex Type
                            > Male
                            > Female
2nd Drop Down   -->Status
                            > Orphan
                            > Married
                            > UnMarried
                            > Divorced
                            > Widow
                            > Special Need
                            > Normal 
```

现在，
如果从第一个下拉列表中选择男性，则从第二个下拉列表中选择（孤儿、特殊需要、已婚、未婚、离婚、寡妇和正常）

如果从第一个下拉列表中选择女性，则从第二个下拉列表中选择（孤儿、特殊需要和正常）

我正在使用实体从数据库中获取 drop dwons 的数据；

**VB代码**

```
context As New EGrantsModel.Entities

ddlSexType.DataSource = context.SEXTYPE
ddlSexType.DataValueField = "SEXTYPE"
ddlSexType.DataTextField = "SEXTYPE"
ddlSexType.DataBind()

ddlCitizenStatus.DataSource = context.CITIZENSTATUS
ddlCitizenStatus.DataValueField = "CITIZENSTATUSID"
ddlCitizenStatus.DataTextField = "CITIZENSTATUS"
ddlCitizenStatus.DataBind() 
```

**ASP 代码**

```
<div class="labelinput">
 <asp:Label ID="lblSexType" CssClass="lblwidth" runat="server" Text="">Sex Type</asp:Label>
 <asp:DropDownList ID="ddlSexType" runat="server"/>
   </div>

 <div class="labelinput">
   <asp:Label ID="lblCitizenStatus" CssClass="lblwidth" runat="server" Text="">Status</asp:Label>
    <asp:DropDownList ID="ddlCitizenStatus" runat="server"/>
     </div> 
```

任何人都可以在这方面指导我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:51:58.870

Check this:

```
Public Class WebForm4
    Inherits System.Web.UI.Page

    Private Sub CitizenBind(ByVal strSexType As String)

        Dim lstCitizenStatus As New List(Of CitizenStatus)

        With lstCitizenStatus
            .Add(New CitizenStatus("1", "Orphan"))
            .Add(New CitizenStatus("2", "Married"))
            .Add(New CitizenStatus("3", "UnMarried"))
            .Add(New CitizenStatus("4", "Divorced"))
            .Add(New CitizenStatus("5", "Widow"))
            .Add(New CitizenStatus("6", "Special Need"))
            .Add(New CitizenStatus("7", "Normal"))
        End With

        Me.ddlCitizenStatus.Items.Clear()

        With Me.ddlCitizenStatus
            .DataSource = lstCitizenStatus
            .DataValueField = "CitizenStatusId"
            .DataTextField = "CitizenStatusT"
            .DataBind()
        End With

        If strSexType.Contains("F") Then

            Dim lstCitizenStatusRemove As New List(Of CitizenStatus)
            With lstCitizenStatusRemove
                .Add(New CitizenStatus("2", "Married"))
                .Add(New CitizenStatus("3", "UnMarried"))
                .Add(New CitizenStatus("4", "Divorced"))
                .Add(New CitizenStatus("5", "Widow"))
            End With

            For Each lstCS As CitizenStatus In lstCitizenStatusRemove
                Me.ddlCitizenStatus.Items.Remove(New ListItem(lstCS.CitizenStatusT.ToString(), lstCS.CitizenStatusId.ToString()))
            Next

        End If

    End Sub

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Not Page.IsPostBack Then

            Dim lstSexType As New List(Of SexType)
            lstSexType.Add(New SexType("Male"))
            lstSexType.Add(New SexType("Female"))

            With Me.ddlSexType
                .DataSource = lstSexType
                .DataValueField = "SexTypeT"
                .DataTextField = "SexTypeT"
                .DataBind()
            End With

            CitizenBind("ALL")

        End If

    End Sub

    Protected Sub ddlSexType_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles ddlSexType.SelectedIndexChanged

        CitizenBind(Me.ddlSexType.SelectedValue)

    End Sub

End Class 
```

If you have any questions about the code please let me know.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:05:44.227

在 ddlSexType 的 Selected index change 事件上绑定第二个下拉列表。检查第一个下拉列表中的选定项目是否等于男性，然后绑定相应的项目。例子：

```
protected void ddlSexType_SelectedIndexChanged(object sender, EventArgs e)
{    
   if( ddlSexType.Text == "Male" )
   {
     // Bind 2nd drop down
     // you can add items manually as 
      ListItem li = new ListItem();
      li.Text = "Orphan";

      ddlCitizenStatus.Items.Add(li);
      // Add all the items in the same way

    // or get data from the database and bind it to the dropdown

    DataTable dt = new DataTable();
    ddlCitizenStatus.DataSource = dt;
    ddlCitizenStatus.DataTextFeild= "DataFeild";
    ddlCitizenStatus.DataValueFeild= "DataValueFeild";
    ddlCitizenStatus.DataBind();
   }
   else if( ddlSexType.Text == "Female" )
  {
       // Bind other items
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T22:13:28.703

这就是我解决问题的方法

我只是在我的表中添加三个字段

```
1- ISMALE

2- ISFEMALE

3- COMMON 
```

如果男性和女性身份相同，则设为True `COMMON` **。**

并将男性身份设为`ISMALE` **True**和 ISFEMALE **False**。

并为女性身份设置`ISFEMALE` **True**和 ISMALE **False**。

**VB代码**

```
Protected Sub ddlSexType_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlSexType.SelectedIndexChanged
    Try

        Dim context As New EGrantsModel.Entities
        If (ddlSexType.SelectedValue = "Female") Then
            Dim femaleDataSource As Object
            femaleDataSource = (From femaleDS In context.CITIZENSTATUS _
                                Where femaleDS.ISFEMALE = "1" And femaleDS.ISMALE = "0" AndAlso femaleDS.COMMON = "1"
                                Select femaleDS)
            ddlCitizenStatus.DataSource = femaleDataSource
            ddlCitizenStatus.DataValueField = "CITIZENSTATUSID"
            ddlCitizenStatus.DataTextField = "CITIZENSTATUS"
            ddlCitizenStatus.DataBind()
        ElseIf (ddlSexType.SelectedValue = "Male") Then
            Dim maleDataSource As Object
            maleDataSource = (From femaleDS In context.CITIZENSTATUS _
                                Where femaleDS.ISFEMALE = "0" And femaleDS.ISMALE = "1" AndAlso femaleDS.COMMON = "1"
                                Select femaleDS)
            ddlCitizenStatus.DataSource = maleDataSource
            ddlCitizenStatus.DataValueField = "CITIZENSTATUSID"
            ddlCitizenStatus.DataTextField = "CITIZENSTATUS"
            ddlCitizenStatus.DataBind()
        End If
    Catch ex As Exception
        callErrorPage(ex.Message, ex.InnerException)
    End Try
End Sub 
```

我对 VB 真的很陌生，所以如果有人认为这是一个冗长的方法，那么请更新我以获得更好的方法。

再次感谢**Waqar Janjua**和**CoderRoller**的宝贵时间和专业知识。

# vb.net - VB.NET 自定义类中的事件处理程序代码在对象本身的事件处理程序代码之前首先运行

> ID：11709458
> 
> 赞同：0
> 
> 时间：2012-07-29T13:00:20.750
> 
> 标签：vb.net, class, events, triggers

我创建了我自己的继承自 DataGridView 的类 c_DataGridView。现在在这个类中，我已经实现了事件*CellEndEdit*。

*现在，我在名为myGrid1*的表单上创建了此类/控件的实例，然后我还在表单上实现了相同的网格事件。

现在，当我运行表单并编辑 Grid 上的单元格时，事件触发顺序是：首先触发我的类 c_DataGridView 的*CellEndEdit*事件，然后触发在表单上实现的对象事件。

有没有可能我可以设法先触发 c_DataGridView 对象的事件，然后再触发类的事件本身。

我希望我已经清除了自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:39:12.023

触发事件处理程序的顺序是不可预测的。有一个标准模式来处理这个问题，.NET 类总是有一个与事件同名的受保护方法，前缀为“On”。

因此，在您的派生类中，重写 OnCellEndEdit() 方法而不是订阅事件。您现在可以完全控制事件的处理和触发方式。您可以先调用 base.OnCellEndEdit()，然后编写您的自定义代码。或者您可以最后调用它，首先编写您的自定义代码。或者你不能调用它，从而阻止 CellEndEdit 事件被触发。显然，您现在可以完全控制订单，正确的方式取决于您想要完成的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:47:57.933

根据您的评论，我会采取不同的方式。

匹配一行的类。与行列表匹配的类，具有 BindingList 属性。然后我会把它绑定到网格上。然后在行类中更改百分比时，更新 Amount 属性。这将触发属性更改事件，这将导致网格更新。

因此，基本上尝试在几个类中获取所有数据逻辑，而不是在表示层的内部事件处理程序中。

# android - android没有应用程序可以执行此操作错误

> ID：11709463
> 
> 赞同：0
> 
> 时间：2012-07-29T13:01:38.963
> 
> 标签：android, eclipse, file-upload, storage

所以我在尝试从我的 android 应用程序的存储中选择文件时遇到问题。我正在使用模拟器来尝试这个，但是当按下按钮时我得到**No app can perfrom this action**。我不知道为什么，所以我需要一些帮助。

代码：

所以请大家帮帮我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:34:34.907

`file/*`不是有效的 MIME 类型，因此 android 无法找到合适的应用程序来处理您的 Intent。为您要打开的文件使用正确的 MIME 类型。

# c++ - 如何从 C# / C++ 应用程序连接到 MySQL 服务器？

> ID：11709467
> 
> 赞同：0
> 
> 时间：2012-07-29T13:02:18.457
> 
> 标签：c++, mysql, client-side

这纯粹是理论上的问题，我什么都没做，但我打算这样做。

是否可以在不显示服务器访问数据的情况下通过 C++/C# 应用程序的完全访问权限连接到您的 Web 服务器数据库？

例如，像 oDesk Team 这样的应用程序。它也获取用户在网站上的所有数据。他们使用的是同一个数据库吗？当然，我们无法知道他们的技术细节，但有可能吗？

请注意，我从未做过真正的编程，只做过网络编程和一些 Java 练习。我想学习 C++ 和 C#，如果我可以将我以前的知识与新知识结合起来，我很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:07:51.033

是的！你可以做一个webservice或者直接访问数据库。在 C++ 中，您可以使用 gSOAP 库来使用 Web 服务。

# c - Makefile 不删除中间文件

> ID：11709470
> 
> 赞同：3
> 
> 时间：2012-07-29T13:02:48.877
> 
> 标签：c, makefile, gnu-make

我`Makefile`没有删除中间文件。我已经设置了`.INTERMEDIATE`。这是我的Makefile：

```
OBJECTS=prefixer.o stack.o
CFLAGS=-Werror -Wmissing-prototypes -g
LIBS=-lm
CC=gcc

prefixer : $(OBJECTS)
    $(CC) -o prefixer $(OBJECTS) $(LIBS)

prefixer.o : stack.h
    $(CC) -c prefixer.c -o $@ $(CFLAGS)
stack.o : stack.c stack.h
    $(CC) -c stack.c -o $@ $(CFLAGS)

.INTERMEDIATE: %.o

.PHONY: clean
clean : 
    -rm prefixer *.o 
```

有什么问题`.INTERMEDIATE`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T13:11:08.780

请参阅[Gnu](http://www.gnu.org/software/make/manual/html_node/Special-Targets.html)为角色制作特殊目标`.INTERMEDIATE`

你大概是说

```
 .SECONDARY:  $(OBJECTS) 
```

因为我认为如果你放`.INTERMEDIATE`了那么对象总是会被删除，你可能不希望这样。我认为你不能有意义地把`%.o`它作为特殊目标的先决条件。

我建议保留目标文件，以免浪费时间重新编译它们。

跑一次`make -p`会教你很多知道的规则`make`。

使用`remake -x` （即[remake](http://bashdb.sourceforge.net/remake/)）非常有帮助，至少可以调试复杂的`Makefile`-s。你也可以使用`make -d`，但我觉得它太冗长了。

您可能希望使用比 omake 更好的`make`构建[器](http://omake.metaprl.org/index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T13:14:20.227

特殊目标`.INTERMEDIATE`不适用于`%`通配符。尝试这个：

```
.INTERMEDIATE: stack.o prefixer.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T13:13:06.420

据我了解，`.INTERMEDIATE`如果中间文件已经存在，则不应该删除它。这是来自 gnu make 的文档：

> 就像所有其他文件一样，使用它们的规则重新制作中间文件。但是中间文件有两种不同的处理方式。
> 
> 第一个区别是如果中间文件不存在会发生什么。如果一个普通文件 b 不存在，并且 make 考虑一个依赖于 b 的目标，它总是创建 b 然后从 b 更新目标。但是如果 b 是一个中间文件，那么 make 就可以不用管它了。它不会打扰更新 b 或最终目标，除非 b 的某些先决条件比该目标更新或有其他原因更新该目标。
> 
> 第二个区别是，如果 make 确实创建 b 以更新其他内容，它会在不再需要 b 后删除它。因此，在 make 之前不存在的中间文件在 make 之后也不存在。make 通过打印“rm -f”命令向您报告删除情况，该命令显示正在删除的文件。

所以在运行make之前确保目录中没有`*.o`。

# database - Azure - 将图像存储在存储帐户中并将它们链接到表中的记录

> ID：11709479
> 
> 赞同：0
> 
> 时间：2012-07-29T13:05:07.627
> 
> 标签：database, windows-phone-7, azure

我在 Azure 上设置了一个表，我正在通过 WP7 应用上传接收数据。对于表中的每条记录，我想附加/链接到一个图像，当我下载相应的记录时可以下载该图像。

我知道图像必须以 blob 格式存储在 Azure 数据帐户中，并且有很多关于这方面的教程，但是如何将图像链接到表中的记录？

IE 我找到我想要的记录并访问它，我如何同时访问图像？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:11:38.517

您表中的一个文件将包含与之关联的 blob 的 uri。您将无法在单个事务中从 blob 存储和表存储中提取数据。

根据客户端的不同，您的图像的 blob 可能会公开可用，客户端可以直接提取它们，而不是将额外的带宽负载放在您的 Web 角色/网站上

# iphone - 标签栏控制器（故事板模板）和 AppDelegate

> ID：11709481
> 
> 赞同：4
> 
> 时间：2012-07-29T13:05:19.553
> 
> 标签：iphone, xcode, delegates, uitabbarcontroller, storyboard

当我使用情节提要为 TabBarController 创建 XCode 4 iPhone 模板时，它会自动配置主视图控制器和所有内容。但是 AppDelegate 中的选项卡栏控制器没有属性。我可以为它创建一个插座，并尝试将它与我的故事板中的标签栏控制器链接，但这是不可能的。有没有更好的方法来访问 didFinishLaunchingWithOptions 方法中的选项卡栏控制器，因为它已经有点连接了？我想要的是 self.currentController = 标签栏控制器中的当前标签。

AppDelegate.h：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

AppDelegate.m:

```
@interface AppDelegate()

@property (nonatomic, assign) UIViewController<SubViewContainer> *currentController;

@end

@synthesize window = _window
@synthesize currentController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

//I need this piece of code to equal the Tab Bar Controller current tab
self.currentController = ?

return YES;
}

//And I'm gonna use this void for some statements about the Tab Bar Controller tabs:
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:
(UIViewController *)viewController
{
// with some statements
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-29T13:30:34.620

假设按预期在情节提要中进行了设置，这应该为您提供对标签栏控制器的引用`didFinishLaunchingWithOptions:`：

```
NSLog(@"Root: %@", self.window.rootViewController);
UITabBarController *tabController = (UITabBarController *)self.window.rootViewController; 
```

通常，您可以使用...获取当前控制器

```
self.currentController = [tabController selectedViewController]; 
```

...但是由于在执行此方法时未选择任何控制器，因此您想要的最佳猜测是...

```
self.currentController = [[tabController viewControllers] objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:25:13.743

用于`self.window.rootViewController.tabBarController`访问该视图控制器的标签栏控制器。

# php - php使用两个while

> ID：11709490
> 
> 赞同：-1
> 
> 时间：2012-07-29T13:08:22.057
> 
> 标签：php, while-loop

我想一次使用两个while

```
while( $file = readdir($folder) ) { 
```

和

```
while( $file1 = readdir($folder1) ) { 
```

我正在使用以下

```
while( $file = readdir($folder)) && ($file1 = readdir($folder1) ) { 
```

但它给了我错误：

PHP Parse 错误：语法错误，意外的 T_BOOLEAN_AND

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:12:43.507

请注意括号和您使用 single`=`而不是的事实`==`：

```
while( $file == readdir($folder) && $file1 == readdir($folder1) ) 
```

# ruby-on-rails - 在 Rails 3 中使用 Cucumber/Capybara 测试 jQuery 标记自动完成

> ID：11709492
> 
> 赞同：0
> 
> 时间：2012-07-29T13:08:42.590
> 
> 标签：ruby-on-rails, ruby, testing, cucumber, capybara

我需要在我的应用程序中测试自动完成功能，但我遇到了一些问题。我正在使用这个脚本： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/) 并遵循了本教程：[http ://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

我尝试了一些类似的解决方案，但没有成功： [http ://blog.aentos.com/post/1114672143/testing-ajax-autocomplete-fields-with-cucumber-and](http://blog.aentos.com/post/1114672143/testing-ajax-autocomplete-fields-with-cucumber-and)

黄瓜（场景）：

```
When I fill in "token-input-article_tag_tokens" with "R"
Then I should see the following autocomplete options:
| Ruby |
And I click on the "Ruby" autocomplete option 
```

水豚（步骤）：

```
Then /^I should see the following autocomplete options:$/ do |table|
  table.raw.each do |row|
    page.should have_css('div.token-input-dropdown-facebook ul li', :text => "#{row[0]}")
  end
end

When /^I click on the "([^"]*)" autocomplete option$/ do |link_text|
  page.execute_script %Q{ $('.token-input-dropdown-facebook ul li:contains("#{link_text}")').trigger("mouseenter").click(); }
end 
```

HTML（表单）：

```
<div class="controls">
  <ul class="token-input-list-facebook">
    <li class="token-input-input-token-facebook">
      <input type="text" autocomplete="off" style="outline: none; width: 30px; " id="token-input-article_tag_tokens">
      <tester style="position: absolute; top: -9999px; left: -9999px; width: auto; font-size: 13px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: normal; letter-spacing: normal; white-space: nowrap; "></tester>
    </li>
  </ul><input class="text_field" data-pre="[]" id="article_tag_tokens" name="article[tag_tokens]" size="30" type="text" style="display: none; ">
</div> 
```

HTML（由 JQuery 生成的自动完成列表）

```
<div class="token-input-dropdown-facebook" style="display: block; position: absolute; top: 931px; left: 192px; ">
  <ul style="display: block; ">
    <li class="token-input-dropdown-item2-facebook token-input-selected-dropdown-item-facebook">
      <b>R</b>uby
    </li>
  </ul>
</div> 
```

但是，当我运行 cucumber 时，我会遇到这个错误：

```
And I fill in "token-input-article_tag_tokens" with "R" 
  cannot fill in, no text field, text area or password field with id, name, or label 'token-input-article_tag_tokens' found (Capybara::ElementNotFound) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:05:22.673

对于你的问题，我有一个解决方案。也许它可以帮助某人

```
page.execute_script %Q{ $('li.token-input-dropdown-item2-facebook:first').trigger('mousedown') } 
```

# c# - 将新的 Vector2 位置与之前的 Vector2 位置进行比较

> ID：11709494
> 
> 赞同：0
> 
> 时间：2012-07-29T13:09:17.597
> 
> 标签：c#, xna, xna-4.0

我正在尝试在游戏区域中放置不同的对象，例如网格，但是我的创建这些对象和位置的方法存在一些问题。我正在尝试将每个新位置存储在列表中，然后将每个新位置与列表中的位置进行比较，然后才能将其用作游戏区域网格中的新位置。我只想使用每个随机位置一次。帮助是preciated！谢谢！

也许有更好的方法来做到这一点？

```
public void AddItemsToGameArea(ContentManager content)
{
    foreach (string buildingPart in contentHouseOne)
    {
        Vector2 newPosition = NewRandomPosition;
        if (!checkPreviousPositions)
        {
            listHouseParts.Add(new HousePart(content, buildingPart, newPosition));
            listUsedPosition.Add(newPosition);
            checkPreviousPositions = true;
        }
        else
        {
            for (int i = 0; i < listUsedPosition.Count(); i++)
            {
                // Check?? 
            }

        }
    }
}

public Vector2 NewRandomPosition
{
    get
    {
        return new Vector2(gridPixels * Game1.random.Next(1, 8), gridPixels * Game1.random.Next(1, 8));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:45:38.723

我认为您应该考虑使用布尔数组来处理网格：

```
bool occupiedPositions[columns, rows]; 
```

所以，当你占据一个网格单元时，你可以这样做：

```
occupiedPositons[i, j] = true; 
```

您还可以生成一个包含网格可用位置的列表，并从中随机获取位置，并在执行时消除元素：

```
List<Vector2> emptyCells;

// fill it with your NewRandomPosition() contentHouseOne.Count times

foreach (string buildingPart in contentHouseOne)
{
    int positionIndex = random.Next(emptyCells.Count);
    Vector2 newPosition = emptyCells[positionIndex];
    emptyCells.RemoveAt(positionIndex);

    // do yout stuff using newPosition here
} 
```

# facebook - 有没有办法在不存储他/她的 Facebook ID 或电子邮件地址的情况下识别 Facebook 用户？

> ID：11709495
> 
> 赞同：0
> 
> 时间：2012-07-29T13:09:25.443
> 
> 标签：facebook

假设一项服务存储了与个人用户相关的机密信息。除了这些机密信息之外，还存储了每个用户的年龄、性别和位置等信息。

使用 Facebook Connect 可以很好地实现这样的系统。用户不必填写所有必需的信息，注册过程非常简单。

为了在用户下次使用该服务时识别用户，应存储他/她的 Facebook ID 或电子邮件地址。但是，如果系统遭到破坏，所有机密信息都可能与人们的 Facebook ID 或电子邮件地址相关联。

有没有办法从 Facebook API 获取唯一标识符，该标识符只能由您自己的 Facebook 应用程序获取，否则无法追溯到用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:34:25.210

> 有没有办法从 Facebook API 获取唯一标识符

是的，有——它是[Graph API 用户对象](https://developers.facebook.com/docs/reference/api/user/)（以及相应的[FQL 用户表](https://developers.facebook.com/docs/reference/fql/user/)`third_party_id`）上调用的字段。

> 哪些只能由您自己的 Facebook 应用程序获取，否则无法追溯到用户？

是的，这`third_party_id`是针对每个应用程序的。即使其他人掌握了它，他们也无法找出用户是谁 -当然，**除非**他们也可以控制您的应用程序（以便他们可以使用您的应用程序的凭据查找用户）。

# jquery - jQuery Mobile 验证插件

> ID：11709496
> 
> 赞同：0
> 
> 时间：2012-07-29T13:09:28.843
> 
> 标签：jquery, validation, mobile

我一直在尝试使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证移动表单，但没有取得多大成功。

好像我访问的第一页有一个表单验证没问题。后续页面不会验证，除非它们具有与第一页上存在相同的字段以进行验证。

例如，我访问的第一个页面是登录页面。它有 2 个字段，电子邮件地址和密码。

代码是：

```
<body>
<div id="Login" data-role="page">

<script type="text/javascript">
$(document).on('pageinit pageshow', 'div:jqmData(role="page"), div:jqmData(role="dialog")', function(){
    if($("form.validate").length > 0){
      $("form.validate").validate({

        rules: {
          email_address: {
            required: true,
            email: true
          },
          password: "required"
        }

      });
    }
  });
</script>

<form name="login" method="post" class="validate">

  <label class="inputLabel" for="login-email-address">Email Address:</label>
  <input type="email" name="email_address" size="18" id="login-email-address" />
  <label class="inputLabel" for="login-password">Password:</label>
  <input type="password" name="password" size="18" id="login-password" />

  <input type="submit" value="Log In" data-icon="lock" data-mini="true" alt="Log In" title=" Log In " />

</form>

</div>
</body> 
```

这在我点击提交按钮时验证。如果我从登录页面点击按钮进入创建帐户页面，该页面有 4 个字段 - 名字、姓氏、电子邮件地址和密码，仅验证电子邮件地址和密码。

创建帐户页面如下所示：

```
<body>
<div id="CreateAccount" data-role="page">

<script type="text/javascript">
$(document).on('pageinit pageshow', 'div:jqmData(role="page"), div:jqmData(role="dialog")', function(){
    if($("form.validate").length > 0){
      $("form.validate").validate({

        rules: {
          firstname: {
            required: true,
            minlength: 2
          },
          lastname: {
            required: true,
            minlength: 2
          },
          email_address: {
            required: true,
            email: true
          },
          password: "required"
        }

      });
    }
  });
</script>

<form name="create_account" method="post" class="validate">

  <label class="inputLabel" for="create-account-firstname">First Name:</label>
  <input type="text" name="firstname" size = "41" maxlength= "96" id="create-account-firstname" />
  <label class="inputLabel" for="create-account-lastname">Last Name:</label>
  <input type="text" name="lastname" size = "41" maxlength= "96" id="create-account-lastname" />
  <label class="inputLabel" for="create-account-email-address">Email Address:</label>
  <input type="email" name="email_address" size="18" id="create-account-email-address" />
  <label class="inputLabel" for="create-account-password">Password:</label>
  <input type="password" name="password" size="18" id="create-account-password" />
  <input type="submit" value="Submit" data-icon="lock" data-mini="true" alt="Submit" title=" Submit " />

</form>

</div>
</body> 
```

如果我点击此页面上的提交按钮，则只会验证电子邮件地址和密码。我假设这是因为它仍在从登录页面而不是创建帐户页面运行验证规则？如果我点击浏览器刷新，那么提交按钮的所有 4 个字段都会被验证。

如何正确验证表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:01:31.547

你说的对; 我在使用软件 worklight 时也有类似的经历，可能是因为它的 ajax 控件和 iframe 集成。

`globalValidation.js`我建议使用以下代码创建一个

```
$(document).on('pageinit pageshow', 'div:jqmData(role="page"), div:jqmData(role="dialog")', function(){
    if($("form.validate").length > 0){
      $("form.validate").validate({
        rules: {
          firstname: {
            required: true,
            minlength: 2
          },
          lastname: {
            required: true,
            minlength: 2
          },
          email_address: {
            required: true,
            email: true
          },
          password: "required"
        }
      });
    }
  }); 
```

然后，像以前一样将它包含在您的标题`<script src="globalValidation.js " />`中`</head>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:50:15.360

好的，我想我明白了。我需要给每个表单一个唯一的类（或 ID），而不是给它们所有相同的验证类，并在 javascript 中引用新类。

# c++ - CAPI 不支持基于密码的加密 (PBE) 加密吗？

> ID：11709500
> 
> 赞同：8
> 
> 时间：2012-07-29T13:10:12.837
> 
> 标签：c++, cryptoapi, pbkdf2

我正在尝试将使用 OpenSSL（PKCS#5 和 PKCS#7）的 UNIX 代码移植到 Windows。

在 OpenSSL 的情况下，所有的编码/解码（证书或密码）都对函数 [CMS_Encrypt](http://www.openssl.org/docs/crypto/CMS_encrypt.html)中的调用者透明地完成，这是应该的。

[在函数CryptEncryptMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379925%28v=vs.85%29.aspx)中基于证书的加密的情况下，CAPI 执行相同的操作 （不会向调用者透露 ASN 详细信息）。经过一番谷歌搜索，我发现了以下[密钥生成实现](http://www.idrix.fr/Root/content/view/37/54/)。现在我应该如何在 CAPI 中使用它？

因为 CAPI 不支持高级别的 PBE 加密（PBKDF2），所以我的猜测是必须手动完成编码（不知何故？）。手动是指编写（和读取）各种 ASN 标签的二进制表示。我该怎么做？

我无法访问[msasn1.h](http://www.koders.com/c/fid4F23D8E46AFA71338959D003DFF969831DE6120C.aspx) API，因为 msasn1.lib 从未分发过。除了基于证书的加密之外，有没有人能够使用 CAPI 接口做其他事情？

# html - 有没有办法将元素定位在右侧而不将它们从流中移除？

> ID：11709501
> 
> 赞同：3
> 
> 时间：2012-07-29T13:10:32.057
> 
> 标签：html, css, css-float

我有一个 div，里面有一些内联元素。我想将其中一个元素放在左侧，将其余元素放在右侧：

```
+---------------------------+
|+----+      +-----+ +-----+|
|| A  |      |  B  | |  C  ||
|+----+      |     | |     ||
|            |     | |     ||
|            |     | |     ||
|            +-----+ +-----+|
+---------------------------+ 
```

我尝试`float:right`在 BC 和 C 上使用，但这会将它们从流程中移除，使它们从容器中脱颖而出：

```
+---------------------------+
|+----+      +-----+ +-----+|
|| A  |      |  B  | |  C  ||
|+----+      |     | |     ||
+------------|     |-|     |+
             |     | |     |
             +-----+ +-----+ 
```

将东西放在右边而不让它们溢出外部容器的最佳选择是什么？

**编辑：**大多数答案似乎建议使用溢出自动或清除。它们之间有什么区别？我如何选择一个而不是另一个？此外，每个人似乎都认为我需要浮动元素。浮动是把东西放在右边的唯一方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:14:50.947

当您浮动元素时，不会计算父级的高度。您可以使用[clearfix 类](http://www.webtoolkit.info/css-clearfix.html)，也可以[使用溢出属性清除浮点数](http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow)。

您也可以`<div style="clear:both;"></div>`在父 div 的末尾添加，但这与上述解决方案相比语义较少。

但是，您选择使用什么实际上是个人喜好。

此外，您可能想尝试使用网格系统。您可以尝试[960](http://960.gs/)或[Bootstrap](http://twitter.github.com/bootstrap/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T13:21:41.493

一个简单的解决方案是添加`overflow:auto`到容器中以解决此问题。这将导致容器扩展以包含其浮动，但如果由于某种原因有人另外为容器设置了较小的高度，则会出现滚动条。

还有其他替代方案也有效，并且在其他情况下可能会更好。请参阅[此问题](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)及其第二个答案，以获得对该问题的良好概述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T13:27:35.237

您需要像这样清除浮动元素：

`<div style="clear: both;"></div>`

[**我的小提琴**](http://jsfiddle.net/VcAT8/1/)

如果你不清除它会是这样的：[**我的小提琴**](http://jsfiddle.net/VcAT8/2/)（浮动未清除）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T13:53:40.597

作为记录，有比浮动快乐清除修复更好的（至少在我看来）方法。使用`display: inline-block`. 不足之处？IE7 不支持它（当然）。不过，以下内容适用于 IE8 及更高版本以及 Chrome、Firefox 和 Opera。

**注意：**我已经简化了演示的 CSS，试图消除这种复杂的看法。它不是。这`display: inline-block`是您唯一需要的部分；其余部分是尝试匹配问题描述中描述的 OP 的一部分。

```
<div id="container">
    <div id="a">A</div>
    <div id="b">B</div>
    <div id="c">C</div>
</div>

#container {
    background: #ddd;
    text-align: center;
}
#container > div {
    background: #cff;
    display: inline-block;
    padding: 2%;
    height: 100px;
    width: 25%;
}
#container #a {
    height: 30px;
    margin: 0 10% 0 0;
} 
```

[http://jsfiddle.net/AZJzz/4](http://jsfiddle.net/AZJzz/4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T13:24:04.753

将此行放在它后面：

`<div style="clear:both;"></div>`

这应该扩展它们所在的 div 以适应它们。

这是[一个现场演示](http://jsfiddle.net/m2YkT/)，以说明如何做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T13:41:14.997

目前浮动可能是获得所需结果的唯一方法。你也可以浮动父容器，但是你必须给它一个宽度。这种方法可以快速导致“[浮动一切](https://stackoverflow.com/questions/6489275/disadvantage-to-floating-everything-in-a-layout)”布局，但它确实有效。[http://jsfiddle.net/mjzNP/](http://jsfiddle.net/mjzNP/)

# c# - 在 Umbraco 中向用户隐藏“内容”选项卡

> ID：11709502
> 
> 赞同：2
> 
> 时间：2012-07-29T13:10:36.367
> 
> 标签：c#, .net, permissions, umbraco, dashboard

我正在考虑在 Umbraco 中创建自定义应用程序/选项卡，作为当前应用程序/选项卡（内容、媒体等）的补充。我正在创建的选项卡称为“文章”，它仅列出文章文档类型的节点（我将通过登录用户进行过滤）。

我想设置它，以便在登录时，用户只会看到文章的这个选项卡，而不是其他选项卡（内容、媒体......）。

我了解我不能简单地取消选中用户权限中的“内容”选项卡，因为这将删除用户对所有节点的访问权限，因此他们将无法浏览此新选项卡中的任何内容。

我想知道的是，有没有办法简单地向用户隐藏这个标签？

对于一些背景知识.. 我正在尝试制作一个内容树依赖于当前用户的系统。所以用户 1 只会看到他们的文章等。在内容中设置起始节点是不够的，因为用户应该可以访问不同级别的其他节点。所以我决定创建一个自定义应用程序/选项卡来获取当前用户的所有节点。在开始这个时，我发现我不能简单地从他们的权限中删除“内容”选项卡，这导致我来到这里。任何与此相关的帮助/指示都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:39:32.640

我不知道您是否在 umbraco 论坛上运气好，但也许您可以避免做一个完整的自定义部分，只需在标准内容树中进行一些过滤？

这可以通过使用 BaseContentTree 类公开的事件来实现。此页面上的最后一个代码示例显示了如何在内容树中仅向管理员用户显示一些页面的示例：http: [//our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register -事件/事件示例](http://our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register-events/event-examples)

直接在这棵树上过滤的优点是，过滤也会在使用某些内容选择器数据类型时生效，这将让用户从内容树中选择其他节点。

# google-app-engine - 如何处理 JDO 应用引擎事务 ConcurrentModificationException

> ID：11709504
> 
> 赞同：2
> 
> 时间：2012-07-29T13:10:39.640
> 
> 标签：google-app-engine, google-cloud-datastore, jdo

文档 @ [https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)解释了如何使用低级 API 处理 DatastoreTimeoutException、ConcurrentModificationException 或 DatastoreFailureException，但是如果我使用 JDO，我该如何处理它们？他们直接抛出或包裹在 JDO 异常中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:49:47.090

从 JDO 方法抛出的任何异常都是 JDOExceptions（在适当的情况下带有嵌套异常）。您可以通过阅读 JDO 规范轻松验证...

# syntax-error - 使用库时未解析的外部符号

> ID：11709505
> 
> 赞同：0
> 
> 时间：2012-07-29T13:10:47.573
> 
> 标签：syntax-error, linker-errors

我有一个名为 NetworkInterfaceInfoProvider.h 的头文件。在这个头文件中我声明一个类如下：

```
#ifndef INETWORK_INTERFACE_INFO_PROVIDER_H
#define INETWORK_INTERFACE_INFO_PROVIDER_H
#pragma once
/*#include "stdafx.h"*/
#include "IConfig.h"
#include "NetworkAddapterAddresses.h"
#include "InstaledAddapters.h"

namespace IRNetwork
{
    class CLASS_DECLSPEC INet;
    struct CLASS_DECLSPEC GenericIPAddress;
    /*
    * provide information about all network interface related adapters such as installed interfaces , addresses , best routes and ...
    * TO DO: implement Other OS's
    */
    class CLASS_DECLSPEC INetworkInterfaceInfoProvider
    {
    public:
        INetworkInterfaceInfoProvider(void);
        ~INetworkInterfaceInfoProvider(void);

        int32_t GetBestRouteTo(char* destIp,uint16_t port,ip_t *ip);
        int32_t GetBestRouteTo(GenericIPAddress* ip);
    private:
        INet* snet;
    };
}
#endif 
```

当我想在我的控制台应用程序中使用它时，出现以下链接器错误

***注意：以上代码库已链接到我的控制台应用程序。CLASS_DECLSPEC 是 dll 导入/导出定义***

> 错误 LNK2019：未解析的外部符号“__declspec(dllimport) public: int __thiscall IRNetwork::INetworkInterfaceInfoProvider::GetBestRouteTo(char *,unsigned short,char (* )[65])” (_ *imp* ?GetBestRouteTo@INetworkInterfaceInfoProvider@IRNetwork@@QAEHPADGPAY0EB@D @Z) 在函数“void __cdecl test_adapters(void)”(?test_adapters@@YAXXZ) testDhcpv4.obj testDhcpv4 中引用

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:53:42.693

唔。从错误中我会说导入看起来不错。所以可能在导出时出错。假设您使用的是 Visual Studio，您可以使用 dumpbin 检查您的 dll 是否正确导出：

打开 Visual Studio 命令提示符（可从 Windows 开始菜单获得）并键入

```
dumpbin /EXPORTS yourlib.dll 
```

然后你应该看到我们的导出，比如（从我的一个 dll 中转储）：

```
...
170   A9 00108120 ??1AbstractParam@param@core@megamol@@UAE@XZ = ??1BoolParam@param@core@megamol@@UAE@XZ (public: virtual __thiscall megamol::core::param::BoolParam::~BoolParam(void))
... 
```

如果您正在调用的函数未列出，您应该在构建 dll 时仔细检查您的 dllexport 是否设置正确。

如果列出了函数，但看起来不同，则应检查应用程序和 dll 的调用约定是否相同。

如果列出了函数并且名称看起来与错误消息中的相同，请仔细检查您是否正确链接了 dll 的导入库。

还要检查您的应用程序和 dll 的运行时配置是否相同（例如 Multi-Threaded-Dll 或 Multi-Threaded-Debug-Dll）。

# javascript - ajax jsonp请求503响应

> ID：11709514
> 
> 赞同：1
> 
> 时间：2012-07-29T13:11:39.747
> 
> 标签：javascript, jquery

> **可能重复：**
> [显示 jQuery $.ajax 503 错误响应](https://stackoverflow.com/questions/4778363/display-jquery-ajax-503-error-response)

我正在调用一个有点临时性的 api。很多时候它以 503 响应。我的问题是，当这种情况发生时，它不会触发任何功能（完成、错误、成功）。我正在寻找一种将其记录在我的代码中的方法。任何想法都非常感谢

```
 $.ajax ({
      url      : engine.getQuery(), 
      dataType : 'jsonp',
      success  : entErrorFunction,
      complete : entErrorFunction,
      error    : entErrorFunction
    });

    var entErrorFunction = function(){
      console.log('test2');
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:16:14.443

以下适用于 JQuery 1.5+

```
 $.ajax ({ 
      ...
      ...
      ...
      ...
       statusCode: {
          503: function() {
          alert("API Error");
          }
       }
    }); 
```

**[（参考）](http://api.jquery.com/jQuery.ajax/)**

# java - 有没有办法不打印 log4j 警告消息？

> ID：11709516
> 
> 赞同：1
> 
> 时间：2012-07-29T13:12:10.123
> 
> 标签：java, log4j

我得到以下信息：

```
log4j:WARN No appenders could be found for logger (org.test.Books).  
log4j:WARN Please initialize the log4j system properly. 
```

无论我的 log4j 配置是否正确，我都不想打印这些消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:17:10.930

要关闭警告，请尝试：

```
Logger.getRootLogger().setLevel(Level.OFF); 
```

正如评论中所说，使用 log4j.xml 可能会更好，这里有一个关于其格式的很好的链接和一些例子：[http ://wiki.apache.org/logging-log4j/Log4jXmlFormat](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)

参考：

*   [如何关闭 log4j 警告？](https://stackoverflow.com/questions/6849887/how-to-turn-off-log4j-warnings)

# ruby-on-rails - 无法使用 FQL 检索我朋友的正确标记照片

> ID：11709535
> 
> 赞同：0
> 
> 时间：2012-07-29T13:15:41.107
> 
> 标签：ruby-on-rails, facebook, api, facebook-graph-api, facebook-fql

我正在使用 FQL。我想检索我朋友的标记照片。我正在使用这个查询。

```
SELECT pid,images FROM photo WHERE pid IN (
      SELECT pid FROM photo_tag WHERE pid IN (
         SELECT pid,images FROM photo WHERE aid IN (
            SELECT aid FROM album WHERE owner IN 
              SELECT uid,username,pic FROM user WHERE uid IN 
                SELECT uid2 FROM friend WHERE uid1 = me())
      )))) 
```

但它检索到的比我预期的要少。我认为从相册中检索照片是有限制的。

如何检索更多照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:02:27.907

首先，简化您的查询：您不需要查看`album`，所以摆脱所有的垃圾。对于面向未来的东西，`object_id`它是首选`pid`，所以我们将使用它。

```
SELECT object_id, images FROM photo WHERE object_id IN (
  SELECT object_id FROM photo_tag WHERE subject IN (
      SELECT uid2 FROM friend WHERE uid1 = me()) OR subject = me()
) 
```

这将为我返回 376 张照片。

如果您需要更多，则需要通过添加`LIMIT [offset] [results]`到您的`photo`和查询来多次执行此`photo_tag`查询。如果您使用 500 for，`[results]`您将使用 0, 500, 1000, 1500... 作为`[offset]`遍历此查询的值。当它返回一个空数组时停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T05:04:38.610

我之前在 stackoverflow 上回答了类似的问题。以下是相同的链接。在这个我正在获取用户的标记照片。您可以为朋友的照片修改相同的内容。

[如何检索标记一个人的所有 Facebook 照片](http://facebook.stackoverflow.com/questions/7683230/how-to-retrieve-all-facebook-photos-a-person-is-tagged-in/11188122#11188122)

该解决方案的 GIST 是，您的查询永远不会获得完整的数据。我在我的应用程序中尝试过同样的方法。例如，我测试的用户有 700 多张照片。但是与您类似的查询只返回了 300 多张照片。

所以我的建议是从 photo_tags 中获取 photoID 的列表，即 object_id 并使用 BATCH 请求来获取它们。

希望这可以帮助。

谢谢

考希克

# java - 使用java线程编写程序打印以下序列 2 3 4 6 6 9 8 12 10（一个序列中2和3的倍数）

> ID：11709536
> 
> 赞同：2
> 
> 时间：2012-07-29T13:15:48.047
> 
> 标签：java, multithreading

基本上它的作用是像这样按顺序打印以下 2 和 3 的倍数

```
 2       3       4       6       6       9       8       12      10    = this is the output
(2*1=2) (3*1=3) (2*2=4) (3*2=6) (2*3=6) (3*3=9) (2*4=8) (3*4=12) (2*5=10) = just a guide 
```

到目前为止，这是我的代码，我无法按顺序显示它。我试过使用等待和通知，但它一团糟。到目前为止，这个正在工作。

```
public class Main {

    public static void main(String[] args) throws InterruptedException {

        final Thread mulof2 = new Thread(){
            public void run() {
                for (int i = 1; i <= 10; i++) {
                    int n = 2;
                    int result = n * i;
                    System.out.print(result + " ");
                }
            }
        };
        Thread mulof3 = new Thread(){
            public void run() {
                for (int i = 1; i <= 10; i++) {
                    int n = 3;
                    int result = n * i;
                    System.out.print(result + " ");
                }
            }
        };
        mulof2.start();
        mulof3.start();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:30:59.507

对于 Java 7，您的首选应该是`Phaser`. 您只需要它的一个实例，使用`new Phaser(1)`. 您只需要两种协调方法：`arrive`和`awaitAdvance`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T05:48:11.243

## java中使用线程概念的乘法表

```
public class Multiplication extends Thread {

     public void run() {
         for (int i = 1; i < 10; i++) {
             int n = 2;
             int result = n * i;
             System.out.print(i+"*"+n+"="+result+"\n");
         }
     }

    public static void main(String[] args) throws InterruptedException {

        Multiplication mul=new Multiplication();
        mul.start();

        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T13:24:56.487

您可以将结果聚合为字符串，然后按顺序打印两个字符串，而不是*在计算期间打印。*当然是在加入线程之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T13:39:20.943

`wait()`并且`notify()`通常级别太低，使用起来太复杂。尝试使用更高级的抽象，例如`Semaphore`.

你可以有一对 Semaphore 实例：一个允许打印下一个 2 的倍数，另一个允许打印下一个 3 的倍数。一旦打印了下一个 2 的倍数，线程应该允许打印下一个 3 的倍数，反之亦然。

当然，信号量的初始许可数对于 2 的倍数的信号量必须是 1，对于另一个信号量必须是 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T14:14:20.233

一个简单的修改将帮助您获得所需的序列。

正如其他人指出的那样，您需要声明一个信号量`private Semaphore semaphore;`。然后声明另一个变量来表示接下来必须执行哪个线程，例如`private int threadToExecute;`.

下一步是在您的线程中执行和之间的`semaphore.acquire();`代码`semaphore.release();`

线程2：

```
try{
semaphore.acquire();
if(threadToExecute ==2)
  semaphore.release();

//write your multiply by 2 code here
threadToExecute = 3;

semaphore.release();
}catch(Exception e){
//exceptions
} 
```

这将很好地同步您的输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-14T12:27:07.877

下面是可以为您提供所需结果的代码。

公共类主要{

```
public static void main(String[] args) throws InterruptedException {

    final Object lock1 = new Object();
    final Object lock2 = new Object();

    final Thread mulof2 = new Thread(){
        public void run() {
            for (int i = 1; i <= 10; i++) {
                synchronized (lock1) {
                    synchronized (lock2) {
                        lock2.notify();
                        int n = 2;
                        int result = n * i;
                       printResult(result);
                    }
                    try {
                        lock1.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }                    
            }
        }
    };
    Thread mulof3 = new Thread(){
        public void run() {
            for (int i = 1; i <= 10; i++) {
                synchronized (lock2) {
                    synchronized (lock1) {
                         lock1.notify();
                         int n = 3;
                         int result = n * i;
                         printResult(result);
                    }
                    try {
                        lock2.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

            }
        }
    };
    mulof2.start();
    mulof3.start();

}

static void printResult(int result)
{
    try {
        // Sleep a random length of time from 1-2s
         System.out.print(result + " ");
        Thread.sleep(new Random().nextInt(1000) + 1000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }       
} 
```

}

# r - 线性模型中的分类预测变量是否应该是正态分布的？

> ID：11709539
> 
> 赞同：1
> 
> 时间：2012-07-29T13:16:06.517
> 
> 标签：r, normal-distribution, lm

我在 R 中运行简单的线性模型（Y~X），其中我的预测变量是分类变量（0-10）。然而，这个变量不是正态分布的，并且没有任何可用的转换技术是有帮助的（例如 log、sq 等），因为数据不是负/正偏斜，而是到处都有。我知道对于 lm ，结果变量（Y）必须是正态分布的，但这也是预测变量所必需的吗？如果是的话，任何关于如何做到这一点的建议都将受到欢迎。

此外，由于我正在查看的数据有两组，患者与对照组（我对组差异感兴趣，正如您所猜到的），我是否必须查看数据是否正常分布在两组内或总体上？两组？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:45:43.923

请参阅上面的@Roman Luštriks 评论：预测变量的分布方式无关紧要。（除了多重共线性问题。）重要的是*残差*是正常的（并且具有齐次方差）。

# java - 从 servlet 连接到数据库

> ID：11709541
> 
> 赞同：0
> 
> 时间：2012-07-29T13:16:13.117
> 
> 标签：java, mysql, jsp, servlets, phpmyadmin

我有jsp表单：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="./Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
    <fieldset>
        <legend>Create new customer</legend>
        <form action="CreateCustomerServlet" method="GET">
            // text of form ... 
            <input type="submit" value="Create customer" />
        </form>
    </fieldset>

</body>
</html> 
```

去`CreateCustomerServlet`-

```
package control;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource;
import com.mysql.jdbc.jdbc2.optional.MysqlDataSource;

import Model.Customer;
import Model.Gender;

/**
 * Servlet implementation class CreateCustomerServlet
 */
@WebServlet("/CreateCustomerServlet")
public class CreateCustomerServlet extends HttpServlet {
    // members ..

    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public CreateCustomerServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        // get the parameters from the jsp form  .. 
            saveInDB() ; 
    }

    private void saveInDB() throws ClassNotFoundException, SQLException {

        Connection connection = null;
        try {
            String strServer = "jdbc:mysql://127.0.0.1:3306/testdb";
            MysqlDataSource ds = new MysqlConnectionPoolDataSource();
            ds.setServerName(strServer);
            ds.setDatabaseName("testdb");
            connection = ds.getConnection("root", "");
            Statement statement = connection.createStatement();
            statement.execute(" /** sql INSERT statement **/");
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

当它到达线路时 -`connection = ds.getConnection("root", "");`它抛出异常 -`com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Cannot load connection class because of underlying exception: 'java.lang.NumberFormatException: For input string: "mysql:"'.`

我与 MySql 一起使用，在快照中`http://localhost/phpmyadmin/`我有一个用户数据库-`testdb`

![在此处输入图像描述](../Images/69aae84fd65855b6a66744ba50903206.png)

并且两个用户都有空密码作为快照-

![在此处输入图像描述](../Images/fa73a0b456292754b024f36363021636.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:20:48.913

服务器名称必须类似于`localhost`或`127.0.0.1`不`jdbc:mysql://127.0.0.1:3306/testdb`

```
String strServer = "127.0.0.1";
ds.setServerName(strServer); 
```

你必须设置端口号：

```
 dataSource.setPort(3306); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:22:48.183

您混合使用 2 种不同的方式来建立连接。

你可以做 ：

```
MysqlDataSource ds = new MysqlDataSource();
ds.setServerName("localhost");
ds.setPort("3306");
ds.setDatabaseName("testdb");
ds.setUser("root");
ds.setPassword("");
Connection connection = ds.getConnection(); 
```

或者

```
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/testdb","root",""); 
```

顺便说一句，将连接设置放在属性文件中是一个好习惯。您应该阅读这篇出色[的文章](https://stackoverflow.com/a/2299870/1140748)和这篇相关[文章](http://www.mkyong.com/tomcat/how-to-configure-mysql-datasource-in-tomcat-6/)。

# javascript - 网格视图高度/宽度公式

> ID：11709543
> 
> 赞同：1
> 
> 时间：2012-07-29T13:16:17.563
> 
> 标签：javascript, design-patterns, math

我有一个矩形区域，我想容纳不同数量的方形项目。这是帮助解决问题的图像。

![在此处输入图像描述](../Images/b25b0a385f99df2e3f3b7f263dfbdad2.png)

谁能帮我用公式计算物品的宽度/高度（Bw/Bh）？

我试过√（WxH/N）。

但是以 W = 1400、H = 380、N = 16 为例，它给了我 182。但 1400/182 只给了 7.7 框宽和 2.08 高（乘以我得到我的 16，但我需要它们适合该区域） .

有任何想法吗？

编辑：

越来越近我认为我真正需要知道的是基于纵横比以及如何计算出容纳项目的网格。例如，254 x 133 下面的 16 个框是 6 x 3。

![在此处输入图像描述](../Images/d93dfc0eb06aa6c74cbb24281f72fc23.png)

编辑：

我现在编写了以下代码来计算网格（javascript）。问题是它使用的是跟踪和错误方法。

```
var W = 254,
    H = 133,
    N = 16,
    Bh = H;

while( ((Math.floor(W/Bh)) * (Math.floor(H/Bh))) < N ){
    Bh--;            
}

alert('Columns: '+Math.floor(W/Bh)+', Rows: '+Math.floor(H/Bh)+', Bow width: '+(Bh) ); 
```

请参阅[http://jsfiddle.net/GVp4X/](http://jsfiddle.net/GVp4X/)以测试代码。我仍然确定有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:36:38.417

您应该为（小）框的纵横比定义一些有意义的约束。例如，您总是可以将大盒子垂直或水平分成N个部分，但我认为这不是您想要做的。对于素数 N，这是你唯一能做的。在这种情况下添加空框的“填充”可以吗？

编辑：

如果 N 相当小，您可以遍历所有可能的 w，每行的框数，并针对错误的纵横比和未使用的框数最小化一些合适的惩罚函数。这是一个例子（在 Matlab 代码中）

```
N = 123;
target_aspect = 4/3;
W = 80;
H = 60;

min_F = inf;
for w=1:N,
   h = ceil(N/w);
   Bh = H/h;
   Bw = W/w;

   padding = h*w-N;
   aspect = Bw / Bh;

   %# The penalty function to minimize
   F = abs(aspect-target_aspect) + padding * 0.05;

   if F < min_F,
       min_F = F;
       best_w = w;        
   end
end 
```

编辑2：

如果允许空白空间（“ypadding”），例如在底部边缘，也可以使用固定的纵横比来执行此操作。然后循环体可能类似于

```
Bw = W/w;
Bh = Bw/aspect;
h = floor(H/Bh);

n = w*h;

if n >= N,
   ypadding = H-Bh*h;
   padding = h*w-N;

   %# penalty function
   F = (ypadding/Bh)*0.3 + (padding / w)*0.2

   if F < min_F,
      min_F = F;
      best_w = w;
   end        
end 
```

在这种情况下，也可以通过求解二次问题来减小 w 的搜索范围。

# windows - 设置远程 Git 服务器以测试 EGit

> ID：11709544
> 
> 赞同：1
> 
> 时间：2012-07-29T13:16:20.353
> 
> 标签：windows, git, egit

我需要在带有 IIS 的 Windows 7 上设置 Git 服务器，以使用 Eclipse 测试我的 EGit。最终它将用于从远程服务器签出和签入。但我现在想使用本地服务器测试 EGit 的远程签出和签入。我已经测试过它可以与 Github 一起使用（只有 https 不是 SSH，SSH 似乎有问题）。但我想为 EGit 托管我自己的 git 远程服务器。请让我知道如何去做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:13:03.027

您可以使用“ [Git Web Access](http://gitweb.codeplex.com/) ”项目：

> 对于那些对 IIS 上的 Smart-HTTP Git 服务器感兴趣的人，该项目提供了一个 ASP.NET `HttpHandler`，让您可以在 IIS 上运行 Smart HTTP Git。
> 它的灵感来自 Grack，一个基于 Ruby Rack 的 Smart HTTP Git 应用程序，以及 Smart HTTP Git[`git_http_backend.py`](https://github.com/dvdotsenko/git_http_backend.py)的 python 实现。

[您还可以通过其主项目页面](http://www.chodounsky.net/bonobo-git-server/)试用“ [Bonobo-Git-Server](https://github.com/jakubgarfield/Bonobo-Git-Server) ”项目。

> Bonobo Git Server for Windows 是一个 Web 应用程序，您可以安装在 IIS 上并轻松管理和连接到您的 git 存储库。

[您将在“如何在 IIS 机器上设置 GIT 裸 HTTP 可用存储库](https://stackoverflow.com/questions/51619/how-to-setup-git-bare-http-available-repository-on-iis-machine)”中找到其他替代方案（有时更旧）。

# java - 在 JSF2 中如何避免 #{class.value} 被视为从 Managed Bean 中检索值？

> ID：11709545
> 
> 赞同：0
> 
> 时间：2012-07-29T13:17:05.440
> 
> 标签：java, jsf, xhtml, javabeans

```
I have a bean class as "UserBean" and it has an bean value as "name"
/**** UserBean bean class****/
@ManagedBean
@RequestScoped
public class UserBean {
    private String name;  

    public UserBean() {
    }

   //getter and setter for name
}

now in XHTML file (using JSF2 tags) when i am writing this 
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>UseBean as Plain Text</title>
</h:head>
<h:body>
    <h:form>
<h1> hello its me #UserBean.name </h:form></h:body></html> 
```

在浏览器中，它检索名称字段的值，但我不希望这种情况发生。我想要的是在浏览器页面中只有一个纯文本，即“你好，它是我#UserBean.name”

这该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:24:11.543

使用“\”和`<outputtext>`标签得到它

我这样做了-`<h:outputText value="hello - \#\{userBean.name}" escape="false" />`

# java - 运行 JUnit 时注入 CDI bean 的 EJB 3.1 出现问题

> ID：11709548
> 
> 赞同：3
> 
> 时间：2012-07-29T13:17:20.183
> 
> 标签：java, junit, java-ee-6, cdi, ejb-3.1

我创建了一个 EJB3.1 并使用 @inject 注入了 CDI bean，但在单元测试时遇到了一些问题，但是当从 servlet 测试时它工作正常。我在 WEB-INF 文件夹中有 beans.xml。下面是我的 EJB 代码：

```
@Stateless
public class CdiUsingEjb {
    @Inject
    private HelloServletCDIPojo helloServletCDIPojo;

    public String greet() {
        assert helloServletCDIPojo != null;
        return helloServletCDIPojo.from();
    }
} 
```

下面是我的 CDI bean：

```
public class HelloServletCDIPojo {
    public String from() {
        return "from HelloServletStateless CDI";
    }
} 
```

我创建了一个 JUnit 类：

```
public class CdiUsingEjbTest {
    @EJB
    private CdiUsingEjb cdiUsingEjb;

    @Before
    public void setUp() throws Exception {
        EJBContainer.createEJBContainer().getContext().bind("inject", this);
    }

    @Test
    public void test() {
        assertNotNull(cdiUsingEjb);
    }
} 
```

当我运行这个 JUnit 测试时，我得到了以下错误。

```
org.apache.openejb.OpenEjbContainer$AssembleApplicationException: org.apache.openejb.OpenEJBException: Creating application failed: /Users/prasannakumar/freelanceWorkspace/javaWorkspace/TomEEExamples: couldn't start owb context
    at org.apache.openejb.OpenEjbContainer$Provider.createEJBContainer(OpenEjbContainer.java:310)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:56)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:43)
    at in.jugchennai.prassee.ejb.HelloServletStatelessEJBTest.setup(HelloServletStatelessEJBTest.java:18)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601) 
```

# android - 相机通过意图返回的位图大小？

> ID：11709550
> 
> 赞同：13
> 
> 时间：2012-07-29T13:17:48.390
> 
> 标签：android, memory, bitmap, camera

如何从相机中获取具有特定（内存友好）大小的位图？

我正在开始一个相机意图：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
cameraIntent.putExtra("return-data", true);

photoUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(), "mytmpimg.jpg"));
cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, photoUri);        

startActivityForResult(cameraIntent, REQUEST_CODE_CAMERA); 
```

我在这里处理结果：

```
//  Bitmap photo = (Bitmap) intent.getExtras().get("data");

Bitmap photo = getBitmap(photoUri); 
```

现在，如果我使用注释行 - 直接获取位图，我总是得到一个 160 x 120 的位图，这太小了。如果我使用我找到的一些标准内容（方法 getBitmap）从 URI 加载它，它会加载一个 2560 x 1920 位图（！），这会消耗近 20 mb 内存。

我如何加载让我们说 480 x 800（与相机预览显示的尺寸相同）？

无需将 2560 x 1920 加载到内存中并按比例缩小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T22:03:54.103

这是我想出的，基于从旧 Android 版本中删除的裁剪库中名为 getBitmap() 的方法。我做了一些修改：

```
private Bitmap getBitmap(Uri uri, int width, int height) {
    InputStream in = null;
    try {
        int IMAGE_MAX_SIZE = Math.max(width, height);
        in = getContentResolver().openInputStream(uri);

        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        BitmapFactory.decodeStream(in, null, o);
        in.close();

        int scale = 1;
        if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
            scale = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        //adjust sample size such that the image is bigger than the result
        scale -= 1;

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        in = getContentResolver().openInputStream(uri);
        Bitmap b = BitmapFactory.decodeStream(in, null, o2);
        in.close();

        //scale bitmap to desired size
        Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, width, height, false);

        //free memory
        b.recycle();

        return scaledBitmap;

    } catch (FileNotFoundException e) {
    } catch (IOException e) {
    }
    return null;
} 
```

这样做是使用 BitmapFactory.Options() + 一些样本大小加载位图 - 这样原始图像不会加载到内存中。问题是样本量只能分步进行。我使用我复制的一些数学来获得图像的“最小”样本大小 - 并减去 1 以获得将产生最小值的样本大小。位图大于我需要的大小。

然后为了获得与所要求的大小完全相同的位图，使用`Bitmap.createScaledBitmap(b, width, height, false);`. 并立即回收更大的位图。这很重要，因为例如，在我的例子中，为了获得 480 x 800 位图，较大的位图是 1280 x 960，占用 4.6mb 内存。

A more memory friendly way would be to not adjust `scale`, so a smaller bitmap will be scaled up to match the required size. But this will reduce the quality of the image.

# java - 我在哪里保存相关的 jar，以便在部署应用程序时能够使用它们？

> ID：11709552
> 
> 赞同：0
> 
> 时间：2012-07-29T13:17:58.310
> 
> 标签：java, google-app-engine, jakarta-ee, web-applications

在谷歌应用引擎上开发应用程序时如何使用外部库？假设我必须使用`javax.mail`库。我在哪里保存 llibrary，以便在服务器上部署应用程序时，我可以使用相关的 jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:43:30.843

```
WEB-INF/lib 
```

这通常适用于 servlet，而不仅仅是 Google App Engine。您必须记住的一个警告是 Google App Engine 控制他们使用的 JDK 版本。这意味着如果您使用的库对 1.7 有任何依赖关系，或者依赖于 1.5 或 1.6 中弃用的代码，那么它将无法工作。

[正如koma](https://stackoverflow.com/users/820142/koma)所指出的，有一个在 App Engine 上测试过的库列表。在这里能找到它：

[https://developers.google.com/appengine/docs/java/jrewhitelist](https://developers.google.com/appengine/docs/java/jrewhitelist)

由于您使用的库不在该列表中，因此您无法保证它可以在应用引擎上运行。你只需要试一试看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:03:11.650

如果您使用的是 Maven，您可以考虑创建一个超级 jar（一个包含所有二进制文件和任何引用的 jar 的 jar）。

抱歉，我无法提供具体说明，我没有直接使用 Maven 完成此操作，而是仅通过 leiningen 完成。

# gwt - 按 Enter 导航 GWT / GXT 组件

> ID：11709554
> 
> 赞同：0
> 
> 时间：2012-07-29T13:18:13.490
> 
> 标签：gwt, navigation, gxt

我想知道是否有任何方法可以通过按 TAB 键本机实现的相同方式按 Enter 键来导航对话框组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:41:11.730

tab 键是做改变焦点工作的浏览器——不需要添加任何特别的东西，你会发现 tab 可以在互联网上的任何形式上工作（除非由于某种原因被明确禁用......）。

要使用 enter 键移动焦点，您必须监听 onkeydown 事件（通过 tab 改变焦点也会发生 onkeydown，因此选择此键以保持一致性），检查它是否是 enter 键，如果是，则将焦点移动到下一个元素名单。

典型的选项卡焦点行为涉及浏览器检查页面上元素的 tabIndex，并查找页面上具有更高 tabIndex 的下一个元素，或最近的后续兄弟/表亲元素。我没有一种方法可以轻松实现这一点，因此我将专注于转到下一个小部件。

GXT 3 的 FormPanelHelper 有一些方便的方法来查找所有字段 - 此代码也可以用作非 GXT 字段的基础。跟踪对话框中找到的字段中的所有 FocusEvent 和 BlurEvent，并使用它来始终跟踪当前聚焦的字段。向对话框本身添加一个键处理程序，以捕获所有键事件，并检查一个是否是回车键。如果是这样，从当前聚焦的字段中找出下一个字段是什么，并在其上调用 .focus() - 这将触发上述焦点处理程序，因此您的簿记将被正确更新。

正如@eliran-m 所指出的，考虑单独保留 Tab 键 - 不要妨碍用户按照他们习惯的方式导航。添加新功能可能是一件好事，但消除预期行为可能不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:21:51.293

虽然我没有通过处理 keyDown 和 keyUp 事件来尝试过，但它似乎是可行的。尽管您可能无法以这种方式拦截浏览器生成的对话框以及使用 Window.alert() 创建的其他对话框。你是如何创建对话框的？

# php - 从php远程执行命令shell

> ID：11709555
> 
> 赞同：0
> 
> 时间：2012-07-29T13:18:31.433
> 
> 标签：php, shell

我试图在我的网页中使用 php 从远程机器中的 shell 获取结果。我使用了这些行：

```
<?php
$connection = ssh2_connect('192.168.10.10', 22);
ssh2_auth_password($connection, 'username', 'password');

$stream = ssh2_exec($connection, 'whoami');
?> 
```

我正在尝试在 windows 机器中的网页中获取结果，并且 libssh2 已经包含在 easyphp 中。但同样的信息：

```
Fatal error: Call to undefined function ssh2_connect() in C:\Program Files (x86)\EasyPHP-5.3.8.0\www\testphp_ssh.php 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:25:41.087

您必须从 Microsoft 委托到 PHP 项目下载并安装 SSH2 的 PECL 扩展：http: [//downloads.php.net/pierre/](http://downloads.php.net/pierre/)。

要查看应用程序和环境配置中的任何错误，请使以下配置指令的值如下所示：

```
error_reporting = E_ALL|E_STRICT
display_errors = On
short_open_tag = Off
asp_tags = Off
display_startup_errors = On

output_buffering = Off
allow_call_time_pass_reference = Off
zlib.output_compression = Off
track_errors = On
register_globals = Off
session.auto_start = 0
tidy.clean_output = Off

implicit_flush = Off
log_errors = On
ignore_repeated_errors = On
report_memleaks = On 
```

# ruby-on-rails - 是否可以从 localhost 直接连接到 Heroku 数据库？

> ID：11709560
> 
> 赞同：2
> 
> 时间：2012-07-29T13:19:34.893
> 
> 标签：ruby-on-rails, database, heroku

如果我有一个 DATABASE_URL，是否可以从 localhost 连接到它？我正在使用以下代码：

```
db = URI.parse(database_url)
connection = ActiveRecord::Base.establish_connection(
                                                     :adapter  => db.scheme == 'postgres' ? 'postgresql' : db.scheme,
                                                     :host     => db.host,
                                                     :username => db.user,
                                                     :password => db.password,
                                                     :database => db.path[1..-1],
                                                     :encoding => 'utf8'
                                                     ) 
```

从我的电脑运行代码时，我不断收到如下错误：

```
could not connect to server: Connection timed out
Is the server running on host some_host.amazonaws.com and accepting
    TCP/IP connections on port 5432? 
```

我正在使用相同的代码在 Heroku 上运行的两个应用程序之间共享一个数据库，并且它可以工作。这让我相信连接到 Heroku 数据库是受限制的，除非你从 Heroku 主机执行它。真的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T19:34:38.647

事实上，外部连接需要 SSL。可以通过`sslmode=require`参数强制底层 postgres 适配器使用 SSL。您可以从 ActiveRecord 连接选项向下传递任意参数，如下所示：

```
ActiveRecord::Base.establish_connection(
  adapter:  'postgresql', 
  host:     'host', 
  username: 'user', 
  password: 'pass', 
  database: 'database_name', 
  encoding: 'utf-8',
  port:     '5432', # could be a non-standard port
  sslmode:  'require' # force SSL
) 
```

我已经在本地验证了这一点，这是一个完整的会话，显示它有效。请确保您没有输错任何内容：

```
heroku pg:credentials yellow -a my-app                                                               Connection info string:
   "dbname=ddbolrs4g89dsi host=ec2-23-21-91-108.compute-1.amazonaws.com port=5432 user=itkdrxzjmwcjtw password=wU-4tT3YbF8AZ3U5kwu-2KYPEX ssl
mode=require"
$ irb
> require 'active_record'
 => true
> ActiveRecord::Base.establish_connection(adapter: 'postgresql', database: 'ddbolrs4g89dsi', host: 'ec2-23-21-91-108.compute-1.amazonaws.com', username: 'itkdrxzjmwcjtw', password: 'wU-4tT3YbF8AZ3U5kwu-2KYPEX', sslmodel: 'require')
 => #<ActiveRecord::ConnectionAdapters::ConnectionPool:0x007f7f9ba6f0f0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007f7f9ba6f078>, @spec=#<ActiveRecord::Base::ConnectionSpecification:0x007f7f9ba64150 @config={:adapter=>"postgresql", :database=>"ddbolrs4g89dsi", :host=>"ec2-23-21-91-108.compute-1.amazonaws.com", :username=>"itkdrxzjmwcjtw", :password=>"wU-4tT3YbF8AZ3U5kwu-2KYPEX", :sslmodel=>"require"}, @adapter_method="postgresql_connection">, @reserved_connections={}, @queue=#<MonitorMixin::ConditionVariable:0x007f7f9ba6f000 @monitor=#<ActiveRecord::ConnectionAdapters::ConnectionPool:0x007f7f9ba6f0f0 ...>, @cond=#<ConditionVariable:0x007f7f9ba6efd8 @waiters=[], @waiters_mutex=#<Mutex:0x007f7f9ba6ef88>>>, @timeout=5, @size=5, @connections=[], @automatic_reconnect=true>
> ActiveRecord::Base.connection.execute("SELECT version()").first
 => {"version"=>"PostgreSQL 9.1.4 on x86_64-unknown-linux-gnu, compiled by gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3, 64-bit"} 
> exit
$ # remove db, leaked creds ^
$ heroku addons:remove HEROKU_POSTGRESQL_YELLOW -a my-app --confirm my-app 
Removing HEROKU_POSTGRESQL_YELLOW on my-app... done, v490 (free) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:26:40.527

与 postgresql 服务器的外部连接需要 Heroku 上的 SSL。也看看[文档](https://devcenter.heroku.com/articles/heroku-postgresql#outside_connections)。

# ios - iOS Redlaser SDK：尝试了解如何以不同方式处理结果

> ID：11709561
> 
> 赞同：0
> 
> 时间：2012-07-29T13:19:35.223
> 
> 标签：ios, sdk, barcode-scanner

我想做的是能够扫描二维码，然后自动加载相关网页。我已经下载了 Redlaser SDK 并尽可能多地检查了它，我不明白的一件事是 SDK 的实际方法在哪里。在我进入 ZBar 之前，我真的很想知道这个简单的任务是如何实现的。

这是 SDK.h 文件：

```
 /*******************************************************************************
    RedLaserSDK.h

    (c) 2009-2011 eBay Inc.

    This is the public API for the RedLaser SDK.
*/
#ifdef __cplusplus
extern "C" {
#endif

// Barcode Symbologies
#define kBarcodeTypeEAN13           0x1
#define kBarcodeTypeUPCE            0x2
#define kBarcodeTypeEAN8            0x4
#define kBarcodeTypeSTICKY          0x8
#define kBarcodeTypeQRCODE          0x10
#define kBarcodeTypeCODE128         0x20
#define kBarcodeTypeCODE39          0x40
#define kBarcodeTypeDATAMATRIX      0x80
#define kBarcodeTypeITF             0x100
#define kBarcodeTypeEAN5            0x200
#define kBarcodeTypeEAN2            0x400
#define kBarcodeTypeCodabar         0x800

typedef enum
{
    RLState_EvalModeReady = 1,
    RLState_LicensedModeReady = 2,

    RLState_MissingOSLibraries = -1,
    RLState_NoCamera = -2,
    RLState_BadLicense = -3,
    RLState_ScanLimitReached = -4,
} RedLaserStatus;

#if TARGET_OS_MAC

/*******************************************************************************
    RL_GetRedLaserSDKVersion()

    This function returns the version of the RedLaser SDK, as a NSString.
    The primary purpose of this function is checking which SDK version you're 
    linking against, to compare that version against the most recent version 
    on redlaser.com. 
*/
NSString *RL_GetRedLaserSDKVersion();

/*******************************************************************************
    RL_CheckReadyStatus()

    This function returns information about whether the SDK can be used. It 
    doesn't give dynamic state information about what the SDK is currently doing.

    Generally, positive values mean you can scan, negative values mean you 
    can't. The returned value *can* change from one call to the next. 

    If this function returns a negative value, it's usually best to design your
    app so that it won't attempt to scan at all. If this function returns
    MissingOSLibraries this is especially important, as the SDK will probably 
    crash if used. See the documentation. 
*/
RedLaserStatus RL_CheckReadyStatus();

#import <Foundation/Foundation.h>

@class BarcodePickerController;

/*******************************************************************************
    BarcodeResult

    The return type of the recognizer is a NSSet of Barcode objects.    
*/
@interface BarcodeResult : NSObject <NSCoding> { }

@property (readonly) int                    barcodeType;
@property (readonly, retain) NSString       *barcodeString;
@property (readonly, copy) NSString         *extendedBarcodeString;
@property (readonly) BarcodeResult          *associatedBarcode;

@property (readonly, retain) NSDate         *firstScanTime;
@property (readonly, retain) NSDate         *mostRecentScanTime;
@property (readonly, retain) NSMutableArray *barcodeLocation;
@end

/*******************************************************************************
    BarcodePickerControllerDelegate

    The delegate receives messages about the results of a scan. This method
    gets called when a scan session completes.  
*/
@protocol BarcodePickerControllerDelegate <NSObject>
@optional
- (void) barcodePickerController:(BarcodePickerController*)picker 
        returnResults:(NSSet *)results;
@end

#if TARGET_OS_IPHONE

/*******************************************************************************
    FindBarcodesInUIImage

    Searches the given image for barcodes, and returns information on all barcodes
    that it finds. This performs an exhaustive search, which can take several 
    seconds to perform. This method searches for all barcode types. The intent
    of this method is to allow for barcode searching in photos from the photo library.
*/
NSSet *FindBarcodesInUIImage(UIImage *inputImage);

/*******************************************************************************
    CameraOverlayViewController

    An optional overlay view that is placed on top of the camera view.
    This view controller receives status updates about the scanning state, and
    can update the user interface.  
*/
@interface CameraOverlayViewController : UIViewController { }

@property (readonly, assign) BarcodePickerController *parentPicker;

- (void)barcodePickerController:(BarcodePickerController*)picker 
        statusUpdated:(NSDictionary*)status;
@end

/*******************************************************************************
    BarcodePickerController

    This ViewController subclass runs the RedLaser scanner, detects barcodes, and
    notifies its delegate of what it found.
*/
@interface BarcodePickerController : UIViewController { }

- (void) pauseScanning;
- (void) resumeScanning;
- (void) prepareToScan;
- (void) clearResultsSet;
- (void) doneScanning;
- (BOOL) hasFlash;
- (void) turnFlash:(BOOL)value;
- (void) requestCameraSnapshot;

@property (nonatomic, retain) CameraOverlayViewController *overlay;
@property (nonatomic, assign) id <BarcodePickerControllerDelegate> delegate;
@property (nonatomic, assign) BOOL scanUPCE;
@property (nonatomic, assign) BOOL scanEAN8;
@property (nonatomic, assign) BOOL scanEAN13;
@property (nonatomic, assign) BOOL scanSTICKY;
@property (nonatomic, assign) BOOL scanQRCODE;
@property (nonatomic, assign) BOOL scanCODE128;
@property (nonatomic, assign) BOOL scanCODE39;
@property (nonatomic, assign) BOOL scanDATAMATRIX;
@property (nonatomic, assign) BOOL scanITF;
@property (nonatomic, assign) BOOL scanEAN5;
@property (nonatomic, assign) BOOL scanEAN2;
@property (nonatomic, assign) BOOL scanCODABAR;
@property (nonatomic, assign) CGRect activeRegion;
@property (nonatomic, assign) UIImageOrientation orientation;
@property (nonatomic, assign) BOOL torchState;
@property (readonly, assign)  BOOL isFocusing;
@property (nonatomic, assign) BOOL useFrontCamera;

@end

#endif
#endif

#ifdef __cplusplus
}
#endif 
```

有问题的方法是 doneScanning 方法 - 在哪里找到该方法的实际主体？据我所知，没有 SDK 的源文件，这是我需要在自己的应用程序中编辑的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:49:54.023

SDK 的实际方法被编译成静态库。该库位于“RedLaser SDK Files/libRedLaserSDK.a”的 SDK 存档中。您需要将此库包含在您的应用程序中。我们不向 RedLaser SDK 发送源代码。您永远不需要编辑 doneScanning 或任何其他 SDK 方法。

SDK 中包含的示例应用程序有一个很好的基本用法示例。为了扫描二维码并打开网页，您所要做的就是编写一个覆盖 statusUpdated: 方法的 CameraOverlayViewController 类。此方法应查看通过状态字典传入的扫描二维码，查看二维码是否确实包含 URL 作为其文本（许多二维码是 URL，但规范不需要它；它们可以是任何文本string)，并在找到有效代码时调用 doneScanning() 以退出扫描会话。大概你会打开一个带有 URL 的 WebView。

示例应用程序中的文件“OverlayController.m”有一个很好的例子来说明如何设置它。

# php - Cookie 造成问题 - 无法让 Cookie 留下

> ID：11709563
> 
> 赞同：3
> 
> 时间：2012-07-29T13:20:08.000
> 
> 标签：php, post, cookies

我遇到了 cookie 的情况，我的 cookie 将存储颜色名称或根本不存储任何内容。所以让我们这样解释。我的 cookie 与我网站的外观有关，我的网站有 3 种外观：

*   正常（根本没有 cookie）
*   灰色（cookie 设置为“imgit_style”，值为“grey”）
*   倒置（cookie 设置为“imgit_style”，值为“倒置”）

我有 3 个按钮可以触发样式切换。第一个按钮是**Normal**，它删除 cookie 并使外观正常。

第二个按钮用于**Gray**，它创建名称为 'imgit_style' 的 cookie 并为其添加一个值 - “grey”。

这两个彼此完全可以正常工作，但是在设置**倒置**cookie 时它就不起作用了！它只是在我单击第三个按钮时被删除，该按钮实际上应该用**Inverted替换****Gray**（如果已设置），或者如果第一个按钮未设置，则创建 cookie。

 **希望我足够清楚。这是我的代码：

*样式.php*

```
<?php
$style = '';
if (!isset($_COOKIE['imgit_style']))
{
    if (isset($_POST['green']))
    {
        setcookie('imgit_style', '', time()-31556952);
        $style = '';
    }
    if (isset($_POST['grey']))
    {
        setcookie('imgit_style', 'grey', time()+31556952);
        header('Location: ' . $home_action);
    }
    if (isset($_POST['inverted']))
    {
        setcookie('imgit_style', 'inverted', time()+31556952);
        header('Location: ' . $home_action);
    }
}
else if (isset($_COOKIE['imgit_style']))
{   
    $style =  '_' . $_COOKIE['imgit_style'];
    if (isset($_POST['green']) && $_COOKIE['imgit_style'] == 'grey' || $_COOKIE['imgit_style'] == 'inverted')
    {
        setcookie('imgit_style', '', time()-31556952);
        $style = '';
        header('Location: ' . $home_action);
    }
    if (isset($_POST['grey']))
    {
        if ($_COOKIE['imgit_style'] == 'inverted')
        {
            setcookie('imgit_style', '', time()-31556952);
            if (!isset($_COOKIE['imgit_style']))
            {
                setcookie('imgit_style', 'grey', time()+31556952);
                header('Location: ' . $home_action);
            }
        }
    }
    if (isset($_POST['inverted']))
    {
        if ($_COOKIE['imgit_style'] == 'grey')
        {
            setcookie('imgit_style', '', time()-31556952);
            if (!isset($_COOKIE['imgit_style']))
            {
                setcookie('imgit_style', 'inverted', time()+31556952);
                header('Location: ' . $home_action);
            }
        }
    }
}
?> 
```

* * *

*头文件.php*

```
<!DOCTYPE HTML>
<html>
<head>
<?php include('styles.php'); ?>
<title>IMGit.org - the image host</title>

<link rel="stylesheet" type="text/css" href="css/<?php echo 'style' . $style . '.css'; ?>" media="screen" />
<link rel="icon" href="css/images/<?php echo 'favicon' . $style . '.png'; ?>" type="image/x-icon" />
<link rel="shortcut icon" href="css/images/<?php echo 'favicon' . $style . '.png'; ?>" type="image/x-icon" />
</head>

<body>
<div class="style-switcher">
<form action="" method="post">
<table>
    <tr>
        <td>
            <span class="normal" style="vertical-align: text-top;">Switch style:</span>
            <input type="submit" name="green" class="style_green-button" value="green" />
            <input type="submit" name="grey" class="style_grey-button" value="grey" />
            <input type="submit" name="inverted" class="style_inverted-button" value="inverted" />
        </td>
    </tr>
</table>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:41:42.703

问题看起来是，尽管您调用`setcookie()`空白，cookie 值`$_COOKIE`仍然保留该请求的值。在重新加载页面之前，它的内容不会改变。因此，您继续检查`!isset($_COOKIE['imgit_style'])`，但除非您明确取消设置，否则该值仍将设置。

```
if (isset($_POST['grey']))
{
    if ($_COOKIE['imgit_style'] == 'inverted')
    {
        // No need to unset the old one, just overwrite the new one
        // setcookie('imgit_style', '', time()-31556952);
        setcookie('imgit_style', 'grey', time()+31556952);
        header('Location: ' . $home_action);
    }
 }
 if (isset($_POST['inverted']))
 {
    if ($_COOKIE['imgit_style'] == 'grey')
    {
        // No need to unset the old one, just overwrite the new one
        // setcookie('imgit_style', '', time()-31556952);
        setcookie('imgit_style', 'inverted', time()+31556952);
        header('Location: ' . $home_action);
    }
 } 
```

### 更新

这可能是问题所在......您没有括号组可以对该`if()`语句进行逻辑分组：

```
if (isset($_POST['green']) && $_COOKIE['imgit_style'] == 'grey' || $_COOKIE['imgit_style'] == 'inverted') 
```

这里发生的是任何时候`$_COOKIE['imgit_style'] == 'inverted'`，即使`$_POST['green']`未设置，后续代码也会运行并删除 cookie。看起来您希望将它们组合`('grey' || 'inverted')`在一起：

```
if (isset($_POST['green']) && ($_COOKIE['imgit_style'] == 'grey' || $_COOKIE['imgit_style'] == 'inverted')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:24:31.537

不需要您使用的长条件，因为它会产生不必要的过程并使代码无法测试。

考虑以下代码：

```
if (isset($_POST['green']))
{
    setcookie('imgit_style', '', time() + 3600);
    $style = 'green';
}
if (isset($_POST['grey']))
{
    setcookie('imgit_style', 'grey', time() + 3600);
    $style = 'grey';
}
if (isset($_POST['inverted']))
{
    setcookie('imgit_style', 'inverted', time() + 3600);
    $style = 'inverted';
} 
```

根据设置按钮，它将相应地设置cookie。将 cookie 设置为`''`将在用户端将其删除，您可以使用 获取它`print_r($_COOKIES);`，但只能在页面重新加载之后。

当然，要检查`green`设置，您将需要使用`isset($_COOKIES['imgit_style'])`，因为在这种情况下，cookie 将被取消设置。

通过使用上述方法，以下只是一个附录：

```
if (isset($_POST['green']) && $_COOKIE['imgit_style'] == 'grey' || $_COOKIE['imgit_style'] == 'inverted') 
```

这有点狡猾，因为您使用的是`OR ||`和`AND &&`没有分组括号，让自己受[操作员偏好](http://php.net/manual/en/language.operators.precedence.php)的支配。您应该根据要执行的操作对条件进行分组。

例如，如果您想让条件块`green`在设置为 POST 但 cookie 当前为`grey`或时运行`inverted`，则需要使用`if ( (isset($_POST['green'])) && ($_COOKIE['imgit_style'] == 'grey' || $_COOKIE['imgit_style'] == 'inverted') )`. 据我所知，这是每个布尔代数的默认行为：

*   首先我们检查是否`$_POST['green']`设置。
    *   如果`FALSE`，则整个条件都不可能为真，因此这是一个退出点。
    *   如果`TRUE`，我们检查 cookie 是否为`grey`OR `inverted`。
        *   如果其中任何一个是`TRUE`，则等式将是`TRUE`并且条件分支运行。
        *   如果**两者**都是`FALSE`，则等式将是`FALSE`，给我们一个退出点。**

# intellij-idea - IntelliJ 12，模块依赖都是红色的，没有路径。

> ID：11709564
> 
> 赞同：3
> 
> 时间：2012-07-29T13:20:36.237
> 
> 标签：intellij-idea, playframework-2.0

我在让 Play2.0 与 IntelliJ EAP 版本 (120.152) 一起工作时遇到了一个真正的问题。

我在 IntelliJ 中创建了一个没有模块的空项目我使用 play 命令创建了一个新应用程序，最后使用 play idea 然后从 IntelliJ 添加这个模块，使用“从现有模块导入”

```
现在，我在导入模块时也选择了两个文件夹。
1\. 想法
2\. .idea_modules
在网上看到一些不同的方法后，
我选择了 .idea_modules -> moduleName.iml
（我已经尝试了所有其他的只是为了检查）

```

这是最困扰我的 ![模块部分](../Images/3a417473df9053f139b425d93e65f353.png) 事情有人有类似的吗？我不确定为什么会这样，我从中看到的所有其他屏幕截图，在红色文本后面都有一条路径（使它工作！），我没有。

有什么建议我可以从这里做些什么来希望能完成这项工作吗？

我的 Scala 方面在 IDE 中看起来像这样，但我没有看到任何用于修改方面的 Play 文档，所以我只是保持原样 ![阶面](../Images/90df5baeb5034843a087a5e21c96209e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T21:36:10.327

在`IntelliJ 12`-`IntelliJ 11`从版本 2.0.2 开始，您可以打开 Play 的项目，只需在开始窗口视图中使用选项“打开项目”即可。

您不需要先在 IDE 中创建空白项目。

1.  `play new test-leda`+ 游戏控制台的所有必需步骤
2.  `cd test-leda`
3.  `play idea`+ 等待指示完成的 bash 提示
4.  打开`Leda`并选择`Open project`
5.  找到文件夹`test-leda`，然后单击`Choose`

就这样

# php - PHP - 一个无法运行的简单类

> ID：11709565
> 
> 赞同：1
> 
> 时间：2012-07-29T13:20:36.307
> 
> 标签：php

我有一个类如下所示：

```
<?php 
class theGodFather {
    public function do() {
        echo "the movie is nice";
    }
}

$obj = new theGodFather;
echo $theGodFather->do; 
```

运行时出现错误：语法错误，意外的 T_DO，期望第 3 行 /Applications/XAMPP/xamppfiles/htdocs/test/classes.php 中的 T_STRING

我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:23:55.440

您不能使用[*关键字*](http://php.net/manual/en/reserved.keywords.php)作为函数/类/方法和常量的名称，`do`是其中之一。但是，您可以将它们用作变量名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T13:28:26.053

"do" 是一个关键字（可以在 do while 循环中使用）。此外，您正在回显一个不返回任何内容但在其中回显某些内容的函数。

将“do”函数重命名为“echoFunction”或您选择的任何名称，然后更改：

```
$obj = new theGodFather;
echo $theGodFather->do; 
```

至：

```
$obj = new theGodFather;
$obj->echoFunction(); 
```

你不会调用 $theGodFather->echoFunction 的原因是因为 theGodFather 是一个类定义，而 $obj 是该类的一个实际实例。您可以在 PHP 中使用静态方法，无需创建新实例即可调用这些方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T13:28:13.803

你在类中使用do函数“do”是php的关键字，你不能在函数或类中使用关键字

尝试这个

```
class theGodFather 
{
    // property declaration
    public $var = 'a default value';

    // method declaration
    public function displayVar() {
        echo 'a default value';
    }
}

$obj = new theGodFather();

//print_r($obj);
echo $obj->displayVar(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T13:23:05.967

`do`是一个关键字，因此解释器变得非常非常困惑。:( 选择一个不同的函数名就可以了！

# jquery - jquery中ajaxSubmit的多个目标

> ID：11709572
> 
> 赞同：2
> 
> 时间：2012-07-29T13:21:22.723
> 
> 标签：jquery, ajax

```
$(this).ajaxSubmit({
            target: '#picture_preview',
            success:  afterSuccess //call function after success
}); 
```

我使用上面的代码将图像上传到服务器，并将上传的图像推送到指定的目标中。一切正常。

但我还需要在另一个 div 元素中显示相同的图像。

# php - 选择所有用户并从表中回显他们的姓名（这里有什么问题？）

> ID：11709573
> 
> 赞同：0
> 
> 时间：2012-07-29T13:21:32.673
> 
> 标签：php, mysql

我想选择拥有石头除以钻石（那些是列）小于 64 的用户，我使用此代码来执行此操作：

```
$function_Query="SELECT user FROM xraydeath WHERE (stone/diamond) < 64";
$function_Ask = mysql_query($function_Query) or die(mysql_error());
$function_Result = mysql_fetch_row($function_Ask, 0);

echo $function_Result[0];
echo $function_Result[1]; 
```

但它输出：

```
name1
Notice: Undefined offset: 1 in C:\xampp\htdocs\work\test.php on line 19 
```

问题是：如何选择所有用户并从表中回显他们的姓名：

```
user | diamond | stone
-----+---------+-------
name1| 128     | 145
adam | 12342   | 0
eva  | 0       | 123456 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:28:20.440

问题是您没有遍历查询返回的行。您可以通过使用`mysql_fetch_array()`函数并使用其名称访问列来做到这一点：

```
while($function_Result = mysql_fetch_array($function_Ask)){
  echo $function_Result['user'];
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-29T14:04:17.043

几乎可以肯定，这是除以零的问题。

决定当钻石 = 0 时你想做什么...

同时 - 添加`AND diamond != 0`到 select 语句

# apache - 如何监控 apache 负载均衡器节点

> ID：11709579
> 
> 赞同：2
> 
> 时间：2012-07-29T13:22:25.643
> 
> 标签：apache, tomcat, load-balancing, ajp

我有 apache 负载平衡器通过 tomcat 服务器 ajp 进行负载平衡，如下所示：

```
    Worker URL 路由 RouteRedir 因子集状态 选举自
    ajp://localhost:8009/myapp s1 2 0 好的 2292 0 22M
    ajp://xx.xx.xx.64:8009/myapp s2 2 0 好 2291 0 23M
    ajp://xx.xx.xx.228:8009/myapp s3 2 0 好 2292 0 23M
    ajp://xx.xxx.xx.242:8009/myapp s4 1 0 好的 2121 0 21M

```

有时状态会导致错误，有没有办法可以持续监控并在发生时收到电子邮件通知？

# javascript - 如果 Jquery .load 包含 div 标签，则不会加载视图

> ID：11709583
> 
> 赞同：0
> 
> 时间：2012-07-29T13:23:15.440
> 
> 标签：javascript, jquery

我在将视图加载到页面时遇到问题，我让它工作了大约 90%，但我更想知道这个问题，比如为什么等等，并希望得到一些启发，我试图将视图加载到 div使用 .load() 函数标记，但由于某种原因，如果视图有另一个 div 标记启动它，它将不会加载。观点是

```
<div id="gameselectform" style="display: none">
    <form id = "selectgame" onsubmit = "loadForm(); return false;" method="get">
        <select name="game" id="gameselect" method="get">
            <option value="starcraftii">Starcraft II</option>
            <option value="worldofwarcraft">World of Warcraft</option>
            <option value="callofduty">Call of Duty</option>
        </select>
        <input type="submit" value="Add" >
    </form>
</div> 
```

如果我删除 div 标签，它会加载。我想知道为什么，如果有办法解决这个问题？非常感谢先进！我对 javascript 和 jQuery 很陌生，所以不要使用太多大词！哈哈

编辑：javascript函数是：

```
function loadForm(game){
    game = game || $("#gameselect").val();
    var url = "<?php echo BASE_URL;?>Gameformload/"+game;
    $("#maindisplay").load(url);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:36:43.933

可能是因为 display:none 和 DOM？您是否尝试过将显示属性交换为可见性：隐藏；

# javascript - 试图在javascript中定位我的所有输入字段

> ID：11709585
> 
> 赞同：0
> 
> 时间：2012-07-29T13:23:49.113
> 
> 标签：javascript, getelementbyid, getelementsbyclassname

我无法让此代码正常工作，我正在尝试将我的所有**输入字段**定位为具有**onblur**和**onfocus**效果，但根本没有成功。请帮助我。

我也尝试使用**getElementsByClassName**但它没有用...... :(

```
var inputArray = new Array( "ans01", "ans02", "ans03", "ans04", "ans05", "ans06" );     
for( var i = 0; i < inputArray.length; i++ ) {
   answerInput = document.getElementById(inputArray[x]).value;
}       
var inputField = answerInput;
inputField.onfocus = function() {
   if (inputField.value == "Place your answer here") {
      inputField.value = "";
   }
};
inputField.onblur = function() {
   if (inputField.value == "") {
      inputField.value = "Place your answer here";
   }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:37:24.580

有几个问题。首先，您需要将函数移到 for 循环中。否则，它们只会附加到最后一个输入框。其次，不要在函数中使用 input.value，而应该使用 this.value。在事件处理程序中，“this”指的是触发事件的元素。

这是对我有用的完整代码：

```
var inputArray = document.getElementsByTagName("input");

for (var i = 0; i < inputArray.length; i++ )  {
    answerInput = inputArray[i];

    answerInput.onfocus = function() {
        if (this.value == "Place your answer here") {
            this.value = "";
        }
    }

    answerInput.onblur = function() {
        if (this.value == "") {
            this.value = "Place your answer here";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:35:24.060

你有一个错字：

```
 answerInput = document.getElementById(inputArray[x]).value; 
```

将此行更改为：

```
 answerInput = document.getElementById(inputArray[i]).value; 
```

你能看出变化吗？

此外，您应该在循环内分配`onfocus`and`onblur`函数，否则只有最后一个输入有效。

```
var inputArray = new Array( "ans01", "ans02", "ans03", "ans04", "ans05", "ans06" );     
for( var i = 0; i < inputArray.length; i++ ) {
    answerInput = document.getElementById(inputArray[i]).value;

    var inputField = answerInput;

    inputField.onfocus = function() {
       if (inputField.value == "Place your answer here") {
          inputField.value = "";
       }
    };

    inputField.onblur = function() {
       if (inputField.value == "") {
          inputField.value = "Place your answer here";
       }
    };
} 
```

`getElementsByTagName("input");`正如约翰在他的代码中所展示的那样，使用获取所有`<input>`元素可能是明智的。

# facebook - FB-Connect 简单脚本不起作用

> ID：11709594
> 
> 赞同：0
> 
> 时间：2012-07-29T13:25:30.360
> 
> 标签：facebook, fbml

```
<html xmlns="http://www.w3.og/1999/xhtml" xmlns:fb="http://facebook/2008/fbml">
<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php"></script>

<fb:login-button onlogin="update_user_box();"></fb:login-button>

<script>
function update_user_box(){
user_box = document.getElementById("user");
user_box.InnerHtml = "<span>"
+"<fb:profile-pic uid='loggedinuser' facebook-logo=true></fb:profile-pic>"
FB.XFBML.Host.parseDomTree();
}
FB.init("APP_ID","xd_reciever.htm");

</script>
<div id="user"></div> 
```

这是我的脚本。实际上我想从 facebook connect 获取登录用户的个人资料图片。但这不起作用，我从[http://mashable.com/2008/12/11/facebook-connect-blog/](http://mashable.com/2008/12/11/facebook-connect-blog/)获得了这个脚本，但我找不到我的错误。如何让它像我想要的那样正确工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:04:36.133

这应该对你有用......

```
 // assume we are already logged in
  FB.init({appId: 'YOUR_APP_ID', xfbml: true, cookie: true});

  function showProfile(response) {

if (response.authResponse) {
      //user is already logged in and connected
      var userInfo = document.getElementById('user');
      FB.api('/me', function(response) {
        userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
      });
    } 
  }

  // run once with current status and whenever the status changes
  FB.getLoginStatus(showProfile);
  FB.Event.subscribe('auth.statusChange', showProfile); 

  (function() {
          var e = document.createElement('script'); e.async = true;
          e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
          document.getElementById('fb-root').appendChild(e);
  }()); 
```

然后有两个 div 用于登录按钮和存储配置文件信息。

```
<div class="fb-login-button" autologoutlink="true"></div>
<div id="user"></div> 
```

# mysql - Squeryl：插入时未更新 KeyedEntity.id

> ID：11709598
> 
> 赞同：1
> 
> 时间：2012-07-29T13:25:58.980
> 
> 标签：mysql, scala, playframework-2.0, squeryl

我有一个表定义

```
class Transaction(
  val ...
) extends KeyedEntity[Long] {
  val id:Long = 0
}

val transaction = table[Transaction]("transactions")

on(transaction) {t =>
    declare(
        t.id is unique
        ... (other fields)
    )
} 
```

数据库表不是由 Squeryl 生成的（我手动创建的），但“ID”列设置为 PrimaryKey 和 AutoIncrement。

现在我在这个表中插入一行：

```
val row = new Transaction(...)
val rowResult = transaction.insert(row)
println("Id1="+row.id+"; Id2="+rowResult.id) 
```

该行已正确插入数据库并分配了一个 ID (!=0)。但是应用程序在命令行上打印“ID1=0；ID2=0”。

为什么？以及如何获得分配的 ID？

**编辑：** 我也尝试过这种表定义

```
class Transaction(
    val id: Long,
    ...
) extends KeyedEntity[Long] 
```

没有造成任何差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:45:56.500

当我删除声明时

```
t.id is unique 
```

有用。所以问题就解决了。

这是 squeryl 中的错误吗？

# jquery - 在 Joomla 2.5 组件中使用带有 Ajax 的 jquery

> ID：11709604
> 
> 赞同：0
> 
> 时间：2012-07-29T13:26:41.950
> 
> 标签：jquery, ajax, joomla, joomla2.5

我很难弄清楚将 Ajax 和服务器代码放在 Joomla 组件中的什么位置。我在[Joomla 第 2 部分文档](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_02)之后创建了一个简单的 hello world 组件（我不需要任何其他东西，只是一个简单的组件）。

现在，我正在尝试使用简单的[jquery/ajax 教程](http://www.sitepoint.com/ajax-jquery/)添加带有 jquery 的 Ajax 代码。所以我将此代码添加到：

`components/com_mycomponent/views/mycomponent/tmpl/default.php`

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');
?>
<html>
<head>
  <title>Ajax with jQuery Example</title>

<script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/JavaScript">
  $(document).ready(function(){
    $("#generate").click(function(){
      $("#quote p").load("script.php");
    });
  });
  </script>
<style type="text/css">
    #wrapper {
      width: 240px;
      height: 80px;
      margin: auto;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid black;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <div id="quote"><p> </p></div>
    <input type="submit" id="generate" value="Generate!">
  </div>
</body>
</html> 
```

在同一目录中，我添加了用于服务器端处理的 script.php 文件。同样，仅来自教程：

```
<?php  
header("Cache-Control: no-cache");  
// Ideally, you'd put these in a text file or a database.    
// Put an entry on each line of 'a.txt' and use $prefixes = file("a.txt");  
// You can do the same with a separate file for $suffixes.  
$prefixes = array('Mashup','2.0','Tagging','Folksonomy');  
$suffixes = array('Web','Push','Media','GUI');  
// This selects a random element of each array on the fly  
echo $prefixes[rand(0,count($prefixes)-1)] . " is the new "    
   . $suffixes[rand(0,count($prefixes)-1)];  
// Example output: Tagging is the new Media  
?> 
```

我猜我指定 script.php 的方式不对，因为我在访问组件时得到了生成按钮：

`http://mysite.com/index.php?option=com_mycomponent`

**编辑**：没有注意到非常关键的错误。我收到未找到错误：`http://mysite.com/script.php`。这显然不存在。我在哪里把这个放在我的组件上？请记住，使用 ajax 创建组件的全部意义在于，我可以在`script.php`. 例如进行如下调用：`$user =& JFactory::getUser();`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:23:21.830

1- 将 script.php 的内容放在组件主（重要）控制器的公共函数中，例如 ajaxit()。

2-将您的点击处理程序修改为以下内容：

```
$.ajax({
   url: 'index.php?option=com_mycomponent&view=mycomponent&task=ajaxit&format=raw',
   success: function(data) {
       $('#quote p').html(data);
   } 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:55:22.643

不要使用该`.Load()`方法，而是尝试在您的点击处理程序中使用它。

```
$.ajax({
  url: 'script.php',
  success: function(data) {
    $('#quote p').html(data);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T05:19:28.153

尝试使用

加载函数中的 components/com_mycomponent/views/mycomponent/tmpl/script.php

# html - 数据库 id 和 HTML id 之间的链接

> ID：11709605
> 
> 赞同：1
> 
> 时间：2012-07-29T13:26:53.757
> 
> 标签：html, database, database-design

我有以下问题：我将项目列表存储在数据库中并将它们显示在网页上。我需要为网页上的每个项目分配 id 或 class。最直接的方法是分配与数据库中相同的 id。这是一个例子：

**数据库**

```
ID  |  Name
----+-----------
1   |  Apple
2   |  Orange
3   |  Banana 
```

**HTML**

```
<ul>
  <li id="1">Apple</li>
  <li id="2">Orange</li>
  <li id="3">Banana</li>
</ul> 
```

明显的问题是 HTML id 不能以数字开头。所以我想给 id 一个前缀，例如：

```
<ul>
  <li id="f1">Apple</li>
  <li id="f2">Orange</li>
  <li id="f3">Banana</li>
</ul> 
```

但这会在 HTML 和数据库之间造成不一致，并使处理对象更加复杂。为了解决这个问题，我必须在数据库中添加一个新列：

```
ID  |  Name     |  HTML_ID
----+-----------+---------
1   |  Apple    |  f1
2   |  Orange   |  f2
3   |  Banana   |  f3 
```

这似乎也不是理想的解决方案，因为现在我每次添加新项目时都需要手动将 HTML_ID 输入到数据库中。而且我需要确保 HTML_ID 始终是唯一的。

我相信人们在进行 Web 开发时经常会遇到这个问题。我想知道是否有比上面的示例更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:24:05.093

`id`在将其放入 HTML之前即时添加前缀，并在搜索数据库之前删除前缀。在更清洁的数据库和更清洁的代码之间进行选择时，请选择更清洁的数据库。

* * *

存储前缀`id`数据库：

1.  浪费表中的空间来存放本质上是冗余的数据。更大的数据实际上意味着“更小”的缓存。
2.  既然要搜索它，就需要一个索引。这是您不能再用于查询的索引**之外**的索引，但仍是强制唯一性所必需的。`id`在所有条件相同的情况下，每个额外的索引都会使 INSERT/UPDATE/DELETE 变慢，并且如果您的表是[聚集的](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)^*则可能会更加昂贵。并且也有资格作为“更大的数据”，使缓存“更小”。

如果您的 DBMS 支持适当的机制^(**)，您实际上不需要物理存储该字段 - DBMS 可以为您即时计算它，从而使第 (1) 点无关紧要。

但是，您仍然需要对其进行索引，因此第 (2) 点仍然相关。

* * *

^*一些 DBMS 甚至没有让您选择关闭集群 (MySQL/InnoDB)。

^(**)如计算列可以被索引或被索引的VIEW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:40:24.097

您当然不应该在数据库中存储 HTML id。在呈现页面时添加前缀有什么问题？当然，另一个明显的问题是为什么需要为每个列表项元素分配不同的 id？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T13:39:03.713

从直觉上看，使用原始数据库 id 似乎是个坏主意，因为在没有冲突 id 的情况下，您不能一次使用多个表。答案只是决定一种明智的方式将 id 重写为 HTML 的内容。一种可靠的方法是将表名和 id 连接起来，这意味着您不能有任何冲突的 id。这样做的缺点是您将大量有关数据库的信息放入页面中，您可能会认为这是安全问题。

# android - 如何在 Android Multiline TextView 中禁用自动换行？

> ID：11709607
> 
> 赞同：7
> 
> 时间：2012-07-29T13:27:20.260
> 
> 标签：android, textview, line-breaks, word-wrap

> **可能重复：**
> [在 Android 多行 TextView 中禁用自动换行](https://stackoverflow.com/questions/5146207/disable-word-wrap-in-an-android-multi-line-textview)

我有一个关于 Android TextView 的问题。是否可以在多行 TextView 中禁用自动换行？

我想使用 Multiline TextView，如下所示：

> 苹果 橙 苹果 奥兰
> 
> ge 苹果 橙 苹果 o
> 
> 范围

但实际的 TextView 如下：

> 苹果 橙子 苹果
> 
> 橙 苹果 橙
> 
> 苹果 橙子 苹果
> 
> 橙 苹果 橙

我想提供 23 字节的新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:48:44.850

尝试固定宽度的大小，可能是这项工作。

# android - 带有列表和图像视图的 android 对话框

> ID：11709608
> 
> 赞同：0
> 
> 时间：2012-07-29T13:27:27.440
> 
> 标签：android, dialog, android-imageview, textview

我是安卓新手。我有一个包含 imageview 和 textview 的布局。我还有一个包含一些数据信息的列表。

我想在 textview 位置的对话框中添加列表。Imageview 设置为默认图像，我想把它留给 momenet。稍后我将有一个带有 imageview 的新列表，我想从 layout.view pos 将其设置为我的 imageview。

我想问一下如何将列表数据设置为textview以及如何从对话框中获取点击的元素我不知道如何在文本的对话框中添加列表

```
builder = new AlertDialog.Builder(getApplicationContext());
LayoutInflater li = (LayoutInflater) getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
View promptsView = li.inflate(R.layout.contact_filster_list,(ViewGroup) findViewById(R.id.layout_root));
builder.setView(promptsView);
final ImageView userInput = (ImageView) promptsView.findViewById(R.id.dialog_icon);
final TextView userInput1 = (TextView) promptsView.findViewById(R.id.dialog_text); 
```

# html - 流体宽度不起作用

> ID：11709609
> 
> 赞同：0
> 
> 时间：2012-07-29T13:27:33.797
> 
> 标签：html, css

我正在使用两个 css 文件 [此处用于我的流体宽度站点][1]：一个左侧导航在低于某个宽度时为“显示：无”。

我将右手导航（带横幅）设置为最大宽度：348px 和填充左：20px。

当我将#main-content div 设置为百分比宽度时会出现问题：它没有正确调整大小并导致它在窗口缩小时下降到右导航下方。这真的没有意义，所以不确定最好的方法是什么。

在#main-content div 中，有向左浮动的#left-nav 和#middle div，我指定了最大宽度和填充。

当窗口低于某个宽度时，我将使用 display:none 删除左侧导航，但在此之前我希望#main-content 宽度保持流畅。

左侧导航还需要具有特定宽度，以确保列表项保持在一行。

希望有人可以提供帮助；这可能很简单，但无法使其正常工作..

这是**CSS**：

```
.right-nav {
  padding:0 0 0 20px;
  margin:0;float:right;
  width:348px;
}
#main-content {
  border: 1px solid #e3e3e3;
  border-botom:0;
  box-shadow: 0px -1px 18px #e0e0e0;
  margin-top:-2px;
  position:relative;
  z-index:1;
  float:left;
  width:70.2%;
  background-color:#fff;
  height:100%;
  float:left;
  padding:30px 0 0;
  -webkit-border-top-right-radius: 8px;
  -moz-border-radius-topright: 8px;
  border-top-right-radius: 8px;
}
#left-nav {
  float:left;
  width:20.5%;
  padding:15px 0 5px 20px;
  background-color:#fff;
  color:#888;
  height:100%;
  margin:0;
}
#middle {
  width:72.3%;
  background-color:#fff;
  height:100%;
  float:left;
  margin:0 21px 5px;
} 
```

错误页面：[这里](http://www.inside-guides.co.uk/brentwood/pages/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:48:55.080

这与#middle 元素的边距有关。您的宽度是百分比，但您的边距是绝对值。

举个例子，当你把屏幕尺寸缩小到`#main-content`824px 宽时，你会得到；

`#left-nav`: 20.5% = 168.92px 加上 padding-left = 20px;

`#middle`: 72.3% = 595.72px 加边距 = 42px（每边 21px）

Total = 828px，因此#middle必须下拉到#left-nav下方

因此，要么减少百分比，要么设置边距百分比，要么为那些较小的宽度添加新的@media 屏幕样式。

*根据评论进行编辑。

再次发生同样的事情 - 您的`.right-nav`元素具有 348px 的固定宽度，`#main-content`最大宽度为 67%，但两侧的绝对填充为 20px；

因此，如果整个`#content-wrapper`宽度为 1069px，则您拥有；

`.right-nav`: 348 像素

`#main-content`= 716像素；内边距：40 像素（左 20 像素，右 20 像素）。

Total = 1104px，#main-content 下降。这是导致问题的相对（％s）和绝对（像素）的混合。

# java - Ivy.xml 以及如何配置

> ID：11709611
> 
> 赞同：1
> 
> 时间：2012-07-29T13:27:49.033
> 
> 标签：java, ivy

所以我刚在一家公司实习，在那里我们必须使用 java。我一生都是 C 人，但我熟悉基本的 OOP 基础知识。现在有一个文件`ivy.xml`。

我问某人它是什么以及我如何使用它，我只是知道它解决了代码中的所有依赖关系。现在有人可以帮助我理解它是什么，依赖解析是什么意思以及如何将其配置为我的用途？

也许一个简单的例子可以帮助更快地理解。

谢谢一吨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:38:24.063

[Ivy](http://ant.apache.org/ivy/)是 ant 的一个插件，[ant](http://ant.apache.org/)是 Java最流行的构建工具之一（有点像`make`autotools）。可以通过多种方式对其进行配置，无论是在该`ivy.xml`文件中还是在`build.xml`for ant 中。我会坚持该公司已经使用的既定做法，即尽可能少地修改这些文件的结构。要了解已经存在的内容，请阅读[手册](http://ant.apache.org/ivy/history/latest-milestone/ivyfile.html)或提供文件片段以及特定问题。

# java - 类似 JsPerf 的 Java 站点？

> ID：11709613
> 
> 赞同：4
> 
> 时间：2012-07-29T13:28:14.310
> 
> 标签：java

我正在寻找像[JsPerf](http://jsperf.com/)这样的网站，但对于`Java`. 是否可以编译代码`applet`然后立即运行（我猜可能存在一些安全问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T05:08:44.660

试用[Rextester.com](http://rextester.com/runcode)在线执行 java 代码。在界面方面看起来比它的替代[Ideone](http://ideone.com/)更好并且也没有广告。

# flash - 如何让 Flash 播放 DVD 上的本地内容？

> ID：11709617
> 
> 赞同：0
> 
> 时间：2012-07-29T13:28:36.277
> 
> 标签：flash, flowplayer, dvd

我正在为农村社区制作一张 DVD，其中包含网站的**离线**副本（使用 httrack 捕获）。原始站点包含许多 Vimeo 嵌入，并已将它们替换为指向 DVD 上 mp4 的 flowplayer。

我的问题是，在用户启用本地内容之前，视频显示为空白，如下所示：

**为开发人员测试指定受信任的位置**

1.  在“高级”面板上的“开发人员工具”下，单击“受信任的位置设置”，然后单击“添加”。

2.  输入计算机上包含受信任内容的位置，或单击浏览文件或浏览文件夹以找到要信任的文件或文件夹。如果您指定文件夹而不是文件，则其所有内容（包括子文件夹）也会变得受信任。

3.  单击确认以将域、文件或文件夹添加到受信任位置列表中。

[http://help.adobe.com/en_US/FlashPlayer/LSM/WS6aa5ec234ff3f285139dc56112e3786b68c-7ff0.html#WS6aa5ec234ff3f285139dc56112e3786b68c-7feb](http://help.adobe.com/en_US/FlashPlayer/LSM/WS6aa5ec234ff3f285139dc56112e3786b68c-7ff0.html#WS6aa5ec234ff3f285139dc56112e3786b68c-7feb)

我担心这会使用户在学校环境中更难以访问内容。

有没有办法将我的内容列入白名单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:53:39.210

不，对不起，没有办法。最好的解决方案是使用带有 Flash 后备的 HTML5。我选择了[http://videojs.com/](http://videojs.com/)。

您无法绕过 Flash 安全性（这很好！）

我相信播放本地内容的其他解决方案包括：

*   创建一个闪光投影仪，
*   创建 adobe air 应用程序

# ruby-on-rails - 从活动管理员管理 yml 配置

> ID：11709618
> 
> 赞同：2
> 
> 时间：2012-07-29T13:28:36.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, activeadmin

我需要从 Active Admin 编辑 yml 文件（database.yml、memcached.yml 等）。

有什么宝石可以解决这个问题吗？如果没有，如何解决？或者也许有任何方法可以将配置数据保存在数据库中而不是 yml（除了 database.yml 之外的任何东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:34:00.140

修改签入存储库的 yaml 文件中的设置听起来不是一件好事。[我建议使用http://github.com/ledermann/rails-settings](http://github.com/ledermann/rails-settings)将设置存储在数据库等数据存储中

另请参阅[Ruby on Rails - 存储应用程序配置](https://stackoverflow.com/questions/2127960/ruby-on-rails-storing-application-configuration)

# objective-c - rfc 3339 到 dd.mm.yyyy 格式

> ID：11709620
> 
> 赞同：0
> 
> 时间：2012-07-29T13:28:48.363
> 
> 标签：objective-c, nsdateformatter, rfc3339

我有一个这样的字符串：

```
NSString *string = @"2012-06-14T00:00:00+03:00"; 
```

我试过这个并得到“2012-06-14 21:00:00 GMT”。但我需要“14.06.2012”。可能吗？

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ssZ";

NSDate *date;
NSError *error;
[formatter getObjectValue:&date forString:string range:nil error:&error]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:54:42.647

您需要`NSDateFormatter`为所需格式创建第二个（在本例中为“dd.MM.yyyy”），并`stringFromDate:`在日期对象上使用其方法来获取所需格式的字符串。尝试在现有代码之后添加此代码。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"dd.MM.yyyy";
NSString *result = [formatter stringFromDate:date]; 
```

# ruby-on-rails - 更新前递增计数

> ID：11709623
> 
> 赞同：0
> 
> 时间：2012-07-29T13:29:10.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的表中有一个`count`列`tags`。如果在更新时刚刚将标签添加到帖子中，并且它已经在数据库中，我想增加标签计数。我将此添加到我的帖子模型中：

```
before_update :increment_tag

def increment_tag
  db_post = Post.find_by_id(self)
  self.tags.each do |tag|
    unless db_post.tags.include? tag
      tag.update_attribute("count", tag.count + 1)
    end
  end
end 
```

我从 db 获取帖子并测试当前标签是否已经在 db 中，如果是，则没有任何反应，如果它不存在，它应该更新计数字段。但由于某种原因，这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:42:36.290

标记中不应有 Count 列。相反，您应该正确设置模型，以便可以执行以下操作：

```
db_post.tags.count 
```

如果你做对了，你可以在你的标签中得到这个：

```
tag.post.tags.count 
```

如果您的目标是找出标签在帖子中总共使用了多少次，您可以简单地计算 TagToPostColumn 中的实例（如果有的话），您需要确定这是一个多对多关系.

然后你做：

> TagToPostColumn.where(tag_id: someTag.id).count

`count`是一个标准属性，您永远不必自己跟踪这一点，除非您实际上需要一个名为 count 的列来跟踪数据库中的模型以外的其他内容。但是，最好将其命名为 count 以外的其他名称，因为它可能导致属性不明确。

另外，我觉得你这样做很奇怪：

> db_post = Post.find_by_id(self)

为什么你不只是使用 self 参数，而不是进行数据库查找来查找你已经拥有的帖子。

# php - 如何使用登录用户更改 upload.php 路径？

> ID：11709624
> 
> 赞同：0
> 
> 时间：2012-07-29T13:29:10.060
> 
> 标签：php

```
 $upload_path = **'./uploads'/**; // The place the files will be uploaded to 
```

我想用登录用户名更改上传路径（正确：上传）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:32:22.313

你有没有尝试过这样的事情？

```
$user = "admin"; //or whatever
$upload_path = "/uploads/" . $user; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:32:41.283

我不太明白你的问题，但这里有一个例子

```
$upload_path = './' . ($logged_in ? $username : 'uploads') . '/'; 
```

# css - 使用@import 声明是一种不好的做法吗？

> ID：11709625
> 
> 赞同：6
> 
> 时间：2012-07-29T13:29:38.870
> 
> 标签：css

> **可能重复：**
> [@import 和 CSS 中的链接之间的区别](https://stackoverflow.com/questions/1022695/difference-between-import-and-link-in-css)

我读过 CSS`@import`是一种不好的做法，并且想知道我正在使用的方法。

我目前正在使用 WordPress 构建一个网站，它通过链接引用导入每个插件的样式表，并且主样式表以相同的方式链接，但是，主样式表当前包含几个`@import`声明，我相信我应该将它们移到标题中*或*进入它们使用的适当页面（其中两个仅在某些页面上使用）。

我的担忧是否合理，使用这些`@import`声明有什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:31:51.370

网上提供了很多关于这个主题的信息，我建议阅读：

*   [http://www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)
*   [@import 与链接](https://stackoverflow.com/questions/7199364/import-vs-link)
*   [@import 或 <link> 用于导入样式表？](https://stackoverflow.com/questions/1478997/import-or-link-for-importing-stylesheets)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T13:34:58.713

使用导入规则本身并不是一个坏习惯。您只需要记住，仅在下载包含它们的文件后才会处理导入。因此，如果您有一堆包含这些语句的文件，您的听众可能需要很长时间才能看到应用的 css。

每个`@import`语句都会创建一个新的 http 请求，因为它发生在客户端。因此，从这个角度来看，您正在伤害连接速度较慢的访问者，例如 Edge 或 3G 上的移动访问者。

我经常听到的一条经验法则是立即合并所有你需要的 CSS，并且只`@import`用于你以后需要的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-29T13:50:53.097

我认为你应该使用`LINK`简单——你必须记住放在`@import`样式块的顶部，否则它将不起作用。事实证明，避免 @import 对性能更好。

**关联**

*   链接是在您的网页上包含外部样式表的第一种方法。它旨在将您的网页与样式表链接在一起。

**进口**

*   导入允许您将一个样式表导入另一个样式表。这与链接方案略有不同，因为您可以在链接的样式表中导入样式表。

使用@import 的最常见原因是因为旧版浏览器无法识别@import，因此您可以对它们隐藏样式。

此链接将解决您的所有疑问

[@import 和 CSS 的链接有什么区别？](http://webdesign.about.com/od/beginningcss/f/css_import_link.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T13:46:01.227

出于速度原因，最好不要使用**@import**在页面中包含**CSS 。**

**importing**允许您将一个样式表**导入**另一个样式表。这与链接方案略有不同，因为您可以在链接的样式表中导入样式表。较旧的浏览器无法识别**@import ，因此您可以对其隐藏样式，这就是****@import**的原因。

检查这个： http:
[//www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)
[css @import](https://stackoverflow.com/questions/10036977/best-way-to-include-css-why-use-import)

# javascript - AngularJS - 如何在 ng-repeater 中以项目值作为参数调用控制器函数？

> ID：11709626
> 
> 赞同：3
> 
> 时间：2012-07-29T13:29:54.610
> 
> 标签：javascript, angularjs

我对 AngularJS 很陌生，我在使用`ng-repreat`.

我正在尝试调用一个控制器函数`ng-click`来更改模型。首先，我使用了`$index`提供的变量`ng-repeat`。但是当我添加过滤器时，我无法获得正确的项目 ID。（删除过滤器恢复预期的行为）

我做了一个简单的例子： http: [//jsfiddle.net/folkenda/wt7b2/](http://jsfiddle.net/folkenda/wt7b2/) 如脚本中所示，我想使用`friend.id`而不是`$index`为了在我的`friend`变量中设置正确的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:24:17.593

`setFriend(friend.Id)`将工作。虽然，您可以只传递朋友对象本身。`setFriend(friend)`.

# node.js - Express App 中的 Mongoose 模型（未被要求找到）

> ID：11709632
> 
> 赞同：3
> 
> 时间：2012-07-29T13:31:14.210
> 
> 标签：node.js, express, mongoose, mocha.js

我正在尝试为学习 ExpressJS 应用程序定义一个简单的 Mongoose 模型。

```
# Todo.coffee

mongoose = require "mongoose"
Schema = mongoose.Schema

todoSchema = new Schema 
    title: String
    desc: String
    dueOn: Date
    completedOn: Date

Todo = new mongoose.model("Todo", todoSchema) 
```

我有一个`Todos`类是供其他类使用的。（不确定仅使用`Todo`模型是否更好？）

```
# Todos.coffee

Todo = require "Todo"

class Todos 

    byId: (id, callback) ->
        Todo.findOne { _id: id }, callback 
```

然后在我的 Mocha/should 单元测试中......

```
require "should"
Todos = require "../../../app/todos/Todos.coffee"
Todo = require "../../../app/todos/Todo.coffee"

describe "Todos", ->
    describe "byId", ->
        it "should return Todo with given ID", (done) ->
            Todos.byId 1, (err, todo) ->
                todo.should.be.an.instanceOf(Todo)
                done() 
```

但我越来越...

```
$ mocha --compilers coffee:coffee-script tests/backend/todos/TodosTests.coffee 

module.js:340
    throw err;
          ^
Error: Cannot find module 'Todo'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/labs/Projects/Tickle/app/todos/Todos.coffee:4:10)
    at Object.<anonymous> (/labs/Projects/Tickle/app/todos/Todos.coffee:20:4)
    at Module._compile (module.js:449:26)
    at Object.require.extensions..coffee (/usr/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:22:21) 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:51:56.213

在中`Todos.coffee`，您需要包含相对路径，以便将其作为本地文件而不是已安装的节点模块查找。`require``Todo`

```
Todo = require "./Todo" 
```

# .htaccess - 将原始 URL 转换为友好 URL

> ID：11709634
> 
> 赞同：7
> 
> 时间：2012-07-29T13:31:25.590
> 
> 标签：.htaccess

在我的网站上有一个注册导师的链接。该链接是这样的

`http://www.myweb.com/profiles/tutors/index.php?tutorCode=1285&tutorName=Robert%20Sakoo&city=Sidny`

所以我需要像这样重写这个链接：

```
www.myweb.com/1285/Rober Sakoo 
```

谁能告诉我是否可以将上面的原始 URL 重写为我预期的 URL？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-29T18:46:08.120

您似乎对 URL 和重写的工作方式感到困惑。*“我需要将 this2 重写**为 this1** ”**的**概念***意味着：**

 **1.  有人在他们的地址栏中输入**this2**或单击**this2**链接。
2.  服务器看到对此的请求**2**
3.  服务器有一套规则在内部将请求从**this2**重写为**this1**
4.  **this1**提供给浏览器

请注意，所有这一切的重要概念是**浏览器请求“this2”链接**，**服务器内部将请求重写为“this1”**。但这可能根本不是您想要的，因为那样您将采用丑陋的 URL 并将它们重写为外观漂亮的 URL，从而错过了外观友好的 URL。

很多时候，尤其是在这里，人们会要求诸如“我想将此 url 更改为此 url”之类的东西，或者在有 2 步重定向过程时要求重写。这是第二步（您根本不需要），它采用**this1**并将*浏览器重定向*到**this2**以便 url 地址栏更改为**this2**：

1.  有人在他们的地址栏中输入**this1**或单击**this1**链接。
2.  服务器看到对此的请求**1**
3.  服务器有一组规则*将浏览器外部重定向*到**this2**。
4.  浏览器的地址栏现在显示**this2**
5.  浏览器请求**this2**
6.  服务器看到对此的请求**2**
7.  服务器有一套规则在内部将请求从**this2**重写为**this1**
8.  **this1**提供给浏览器

因此，整个循环卷积就是*当*浏览器尝试访问**this1**时，它会被重定向到**this2**但实际上仍会从**this1**获得内容。

所以我认为这一定是你想要的。尝试将其放入您的 htaccess 文件中：

```
RewriteEngine On

# check if the actual request if for "this1"
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /profiles/tutors/index.php\?tutorCode=([0-9]+)&tutorName=([^&]+)&?([^\ ]+)
# redirect to "this2"
RewriteRule ^profiles/tutors/index\.php /%1/%2/?%3 [R=301,L,NE]

# now rewrite "this2" back to "this1"
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/(.+)/$ /profiles/tutors/index.php?tutorCode=$1&tutorName=$2 [L,QSA] 
```

请注意，该`city`参数永远不会在友好 URL 中进行编码，因此它作为查询字符串的一部分保留。您可以更改它，使友好的 URL 看起来像：`/id/name/city/`而不是只是`/id/name/`，该修改应该是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:40:25.743

那将是附近的某个地方：

```
RewriteEngine on
RewriteRule ^([0-9]+)/(.+)$ /profiles/tutors/index.php?tutorCode=$1&tutorName=$2 [NC,QSA] 
```

由于您没有指定如何处理它，因此我没有考虑您的`city`参数，因此将`QSA`（查询字符串附加）添加到规则中，因此 GET 中的参数仍会传递给脚本。**

# amazon-s3 - Amazon S3 或 Cloudfront 托管照片、css、js 等文件？

> ID：11709635
> 
> 赞同：-2
> 
> 时间：2012-07-29T13:31:33.450
> 
> 标签：amazon-s3, amazon-ec2, amazon-cloudfront

我试图了解**Amazon S3**和**Cloudfront**之间的区别......因为两者都是 cdns，我也看到它们的价格有一些差异......

我想做的是将我所有的 css、js、图像和照片（由他们的用户添加，如用户个人资料图像等）托管在一个 cdn 中，因为我的 ec2 实例磁盘太小并且希望从那里获得最佳性能。 ..

我应该选择 amazon s3 还是 cloudfront？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:52:19.770

S3 是存储系统，而不是 CDN。存储数据时，它绑定到特定的数据中心。它可以帮助您托管大量数据并在多个应用程序服务器之间共享。

Cloudfront 在全球多个数据中心之间自动分发数据。如果您想确保文件到客户端的最短路径，请使用它。

# clojure - 如何在 Clojure 中捕获 CTRL+C？

> ID：11709639
> 
> 赞同：17
> 
> 时间：2012-07-29T13:32:00.873
> 
> 标签：clojure, signals

我有一个简单的单线程 Clojure 程序，它创建一个用于交换数据的临时文件。当程序正常退出时，该文件被删除，但是当程序通过`Ctrl`+ `C`，`Ctrl`+`D`或`Ctrl`+退出时，`Z`该位代码永远不会执行。无论程序如何退出，我都需要它来执行。我知道我需要捕捉那个信号（我以前用其他语言做过），但我似乎不知道如何在 Clojure 中做到这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-29T13:59:11.473

我不知道 Clojure 是否为此目的包装了方法。在 java 中，您可以使用[Runtime.addShutdownHook()](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))

> 注册一个新的虚拟机关闭挂钩。
> 
> Java 虚拟机关闭以响应两种事件：
> 
> *   程序正常退出，当最后一个非守护线程退出或调用 exit（等效于 System.exit）方法时，或
>     
>     
> *   虚拟机响应用户中断（例如键入 ^C）或系统范围的事件（例如用户注销或系统关闭）而终止。

### 更新

这是一个简单的演示

```
(.addShutdownHook (Runtime/getRuntime) (Thread. (fn [] (println "Shutting down..."))))

user=> ;; Ctrl-C
Shutting down... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T22:01:12.607

看看 java.io.File 中的[deleteOnExit](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#deleteOnExit%28%29 "删除退出")方法：

```
(import '(java.io File))
(doto (File/createTempFile "foo" nil nil) (.deleteOnExit)) 
```

# rvm - 如何使用 rvm 安装相同版本的 ruby 作为不同名称？

> ID：11709640
> 
> 赞同：0
> 
> 时间：2012-07-29T13:32:15.053
> 
> 标签：rvm

在我用 rvm 安装了一个版本的 ruby​​ 之后，我注意到安装过程中有一些小的配置问题。所以我想尝试使用其他配置选项进行安装，但我根本不想破坏已安装的 ruby​​。所以我只是尝试备份之前安装的 ruby `rvm reinstall`​​。

```
(cd .rvm/rubies && mv ruby-1.9.3-p194 ruby-1.9.3-p194.org) 
```

就我而言，重新安装解决了这个问题，我没有回滚 ruby​​。所以，我不知道这是否可行。有没有干净或正确的方法？仅供日后参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T22:09:22.413

你可以安装[命名红宝石](https://rvm.io/rubies/named/)：

```
rvm install 1.9.3-test1 [options] 
```

并在它工作后将其设置为默认值：

```
rvm use 1.9.3-test1 --default 
```

或重新安装原始的`1.9.3`、命名的 rubies 尤其适用于测试编译标志或修补的 rubies：

```
rvm install 1.9.3-performance --patch falcon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:13:07.837

您还可以使用具有相同版本的不同 gemset

```
rvm create gemset projectname 
```

# php - Javascript，PHP，保存字段值

> ID：11709650
> 
> 赞同：1
> 
> 时间：2012-07-29T13:33:14.090
> 
> 标签：php, javascript, input, save

我正在尝试在提交后保存字段数据，因为毕竟所有字段都很好，但是让我们说在服务器端用户名已经被使用，所以表单返回空，我不希望有选项可以使用像这样的PHP：

```
<input value="<?php if(isset($userName)) echo $userName; ?>" /> 
```

但问题在于收音机输入，如果有人可以考虑使用 PHP 解决收音机问题，我将非常感激，我也在考虑 Javascript，所以我将清理代码，我正在考虑从 URL 中获取值但出于安全原因，我使用 POST。

**摘要：**如果有人有 PHP 或 Javascript 的解决方案，我将非常感激，谢谢大家，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:42:09.177

如果要自动选择单选输入，可以向`checked`其中添加属性。您需要的将如下所示：

```
<form method="POST">
    <?php

        // You have some short of list of possible value //
        $arrRadioValues = array("value1", "value2", "value3");

        // You display them //
        for ($i=0; $i<count($arrRadioValues); $i++) {
            ?>
                <input 
                    type="radio" 
                    name="radioInputName" 
                    value="<?php echo $arrRadioValues[$i]; ?>" 
                    <!-- If the value that was posted is the current one we have to add the "checked" so that it gets selected -->
                    <?php if (isset($_POST['radioInputName']) && $_POST['radioInputName'] == $arrRadioValues[$i]) { echo " checked"; } ?> />
            <?php
        }

    ?>

    <input type="submit" />
</form> 
```

添加`checked`属性的工作方式与为输入设置值有点相同。只是当您希望选择该收音机时`value`，您可以定义属性，而不是定义属性。`checked`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:48:35.167

尝试这个

```
<form name="myform" action="" method="post">
<input type="radio" name="language" value="Java" <?php echo(@$_POST['language'] == 'Java'?"checked":""); ?> /> Java
<input type="radio" name="language" value="VB.Net" <?php echo(@$_POST['language'] == 'VB.Net'?"checked":""); ?>  /> VB.Net
<input type="radio" name="language" value="PHP" <?php echo(@$_POST['language'] == 'PHP'?"checked":""); ?>  /> PHP

<input type="submit" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T13:52:52.427

我想这可能会对你有所帮助。

```
<input type="radio" value="choice1" name="radio_name" <?php echo(@$_POST['radio_name'] == 'on'?"checked":""); ?> /> 
```

# django - HTML5：播放音频

> ID：11709652
> 
> 赞同：0
> 
> 时间：2012-07-29T13:33:39.723
> 
> 标签：django, html5-audio

我想在我的 Django 应用程序中播放音频.. 我正在尝试包含音频，但它似乎没有播放..

我尝试了两件事.. 1）

```
<audio id="BillaTheme" autoplay>
     <source src="../media/audio/Billa2Theme.mp3"/>
</audio> 
```

2)

```
MEDIA_URL = '/Users/Projects/beer/ThirdProject/media/'
<audio id="BillaTheme" autoplay>
     <source src="{{MEDIA_URL}}audio/Billa2Theme.mp3"/>
</audio> 
```

两者似乎都不起作用。需要一些指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:04:01.320

Django 应用程序服务器找不到您的音频文件。它在路径上找不到它：“/Users/Projects/beer/ThirdProject/media/audio/Billa2Theme.mp3”。正确检查文件的路径和名称。它区分大小写 - 文件的路径和名称。

在模板中输出您的 MEDIA_ROOT 并确保它正是您想要的。

如果您使用另一个 Web 服务器来提供静态文件，请检查服务器的访问日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:22:38.760

你的浏览器支持mp3吗？查看[w3schools的“音频格式和浏览器支持”表](http://www.w3schools.com/html5/html5_audio.asp)

您也可以尝试一下不错的开源[soundmanager2](http://www.schillmania.com/projects/soundmanager2/)。

# javascript - 无法更新的名称属性 - javascript

> ID：11709658
> 
> 赞同：0
> 
> 时间：2012-07-29T13:34:48.933
> 
> 标签：javascript

它是 javascript 中的一个脚本，它添加一个`<div></div>`并添加一个 id、一个类、html .. 我也想添加 name 属性，但我的代码不起作用，但我想知道为什么..

我看到有[https://developer.mozilla.org/fr/DOM/element](https://developer.mozilla.org/fr/DOM/element)`element.name = 'newname';`可以编辑它..

```
function newgroup() {
    var e = document.getElementsByName('group');
    var nb = e.length + 1
    div = document.createElement("div");
    div.id = 'group'+nb;
    div.className = 'panel_drop';
    div.name = '1';
    div.innerHTML = '<h5>Group '+nb+'</h5>';
    div.innerHTML += '<div class=\'drop_zone\'></div>';
    document.getElementById('groups').appendChild(div);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T13:38:30.610

一个 HTML 元素的`name`属性并不会映射到`name`所有元素对应的 DOM 元素的属性，而只是针对某些类型的元素，而 DIV 元素不是其中之一。

`name`您可以在此处检查属性指定的 HTML 元素类型：http: [//www.whatwg.org/specs/web-apps/current-work/multipage//section-index.html#attributes-1](http://www.whatwg.org/specs/web-apps/current-work/multipage//section-index.html#attributes-1)

由于 HTML 标准没有`name`为 DIV 元素指定属性，因此我的建议是*不要*在 DIV 元素上使用这样的属性/属性。如果您需要将其他信息附加到您的 DIV 元素，请考虑`data-*`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T13:39:10.640

```
div.setAttribute('name', '1'); 
```

div.getAttribute *('class')*也作为*方便函数*导出为*className*属性（带有隐式 setter 和 getter）这一事实并不意味着它是处理 DOM 节点属性名称的一致方式。

顺便说一句，考虑使用 javascript 框架，如 jQuery、Prototype、MooTools 或 YUI，从长远来看会有所帮助......

例如，使用 Jquery，您可以通过[更改](http://api.jquery.com/attr/)或[删除属性轻松地更好地控制属性](http://api.jquery.com/removeAttr/)

# django - 如何在 django 中使用 filter 和 idx 翻译一个复杂的变量

> ID：11709662
> 
> 赞同：1
> 
> 时间：2012-07-29T13:35:25.120
> 
> 标签：django

有人知道如何在 Django 中使用过滤器（|）和自定义标签（idx）翻译一个复杂的变量，例如：

```
<li data-role="list-divider">{{ controlItem|idx:0|upper }}</li> 
```

我对简单的变量没有问题，例如：

```
{% trans controlSubitem.name %} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:39:39.827

```
{% with controlItem|idx:0|upper as variable %}
    {% trans variable %}
{% endwith %} 
```

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with)

# f# - F# 中的值限制案例

> ID：11709665
> 
> 赞同：1
> 
> 时间：2012-07-29T13:36:03.370
> 
> 标签：f#

我对为什么第三个功能不起作用感到困惑：

```
 let generate1 = id
   let generate2 = let a = 1
                   id
   let generate3 = printfn "hi"
                   id 
```

虽然前两个很好，最后一个吐出来

```
error FS0030: Value restriction. The value 'generate3' has been inferred to have generic type
    val generate3 : ('_a -> '_a)    
Either make the arguments to 'generate3' explicit or, if you do not intend for it to be generic, add a type annotation. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T14:31:27.577

我不会尝试[解释值限制](http://blogs.msdn.com/b/mulambda/archive/2010/05/01/value-restriction-in-f.aspx)，但我会尝试理清这三个值之间的语义差异。

`generate1`只是 的别名`id`，所以我们很好。

`generate3`在返回之前进行一些计算`id`，达到值限制。

那为什么不`generate2`达到价值限制`generate3`呢？因为编译器可以看到这`let x = 1 in id`在语义上等同于`id`:`1`是一个常量表达式并且`x`没有在`let ... in ...`表达式的主体中使用，所以编译器可以并且确实将它们丢弃。另一方面，如果您用(是纯的，但编译器无法证明) 之`1`类的潜在副作用替换，则编译器无法安全地减少表达式，从而像 with 一样达到值限制。`sin 2.3``sin``generate3`

# backend - 带有高级标签方案的精益sideproject后端平台

> ID：11709669
> 
> 赞同：16
> 
> 时间：2012-07-29T13:36:45.927
> 
> 标签：backend, parse-platform, stackmob

我是一位经验丰富的前端开发人员（Backbone、Coffeescript）和设计师，几乎没有关于后端的技能。我想构建一个sideproject，而不必担心设置服务器或维护数据库。该项目必须尽可能精简且耗时更少，但能够实现某种用户身份验证和高级标签方案将很重要。

我正在考虑使用后端即服务平台，例如[http://parse.com](http://parse.com)或[http://stackmob.com](http://stackmob.com)，但仍然想知道是否有更好的方法来实施我想到的项目。鉴于我对情况的描述：您会推荐哪个平台/框架/堆栈？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T17:21:19.523

全面披露 - 我是 StackMob 的平台传播者 ;-)

您所描述的项目非常适合 StackMob 提供的内容。我们的目标是提高开发人员的生产力。无需服务器设置，您可以通过几行 JavaScript 代码从前端创建 API。我们的开源 JavaScript SDK 建立在backbone.js 之上。

一些用于声明模型和创建模式的示例代码如下所示。

```
var ToDo = StackMob.Model.extend({schemaName:'todo'});

var todo = new ToDo({action : 'take out the trash'});
todo.create({
  success: function(model){
     // do something
  },
  error: function(error) {
    //alert user of error
  }
}); 
```

create 方法调用对 StackMob 的 RESTful 调用并传递对象。我们推断传递了什么类型的数据并创建您的模式。

StackMob 在该领域的其他参与者中提供了最大的灵活性。我们支持自定义代码，因此您可以使用 Java、Scala 或 Clojure 编写自定义业务逻辑，将其打包为 JAR 文件并上传到 StackMob 服务器。然后调用自定义方法，执行代码并返回 JSON 响应。

我们还与 Github 集成，因此您可以将 HTML5 应用程序自动部署到 StackMob 服务器，并无需在其他地方托管您的应用程序。

如果您对 StackMob 有更多疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:51:13.577

Parse.com 的团队反应迅速，文档可以帮助您入门（我相信它会增长），我相信您可以在标记方面做您想做的事 - 请参阅我的其他问题使用 Parse.Relation 类。

我没有尝试过 StackMob，但也听说过它的好消息。

Meteor.com 将是我尝试的下一件事，如果 Parse 失败了 :P 这些基于 Mongo（灵活模式）BaaS 的学习曲线接近于零 :) 特别是因为您已经熟悉 Backbone。

我玩 Parse 已经 3 周了，请随时提出更详细的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T20:53:44.907

我还建议您查看 Cloud CMS (http://www.cloudcms.com)。

全面披露 - 我是 Cloud CMS 的创始人之一。所以我是一个大粉丝。另外，我认为这很棒。

我们的平台完全围绕 JSON 和 JSON Schema 构建，用于对内容进行建模。您只需在其中写入内容，它就会立即被版本化、索引并可用于查询和全文搜索。我们的数据存储与内容建模（类型、属性、关联、方面）和验证完全一致。基本上，我们尝试处理所有困难的事情，这样你就可以开始编码了。

我们为原生设备以及 JavaScript/HTML5、Java 和其他语言提供驱动程序。我们的 JavaScript 驱动程序具有异步链接功能，因此您的代码变得非常简单。像这样：

```
// define an article using JSON schema
branch.create({
    "qname": "custom:article",
    "properties": {
        "header": {
            "type": "string"
        },
        "rating": {
            "type": "number",
            "minValue": 0
        },
        "author": {
            "type": "string"
        }
    }
});

// create an article
branch.createNode({
    "_type": "custom:article",
    "header": "Pink Floyd Reunites for World Tour!",
    "rating": 50,
    "author": "gilmour"
});

// search for articles using full-text search
branch.searchNodes("Pink Floyd").each(function() {
    $('body').append("Found an article: " + this.get('header') + "<br/>");
});

// query for articles with structured MongoDB query
branch.queryNodes({
    "author": "gilmour", 
    "rating": { 
        "&gt": 40 
    } 
}).count(function(count) {
    $('body').append("There were: " + count + " total articles");
}); 
```

这是一个粗略的例子。网站上还有很多可用的。

Cloud CMS 值得一看，因为它是建立在 JSON、MongoDB 和纯云架构之上的真正内容平台。它可以很好地扩展，但也具有大型老式昂贵软件的许多企业级功能。我们真的想保持低成本，所以我们选择了纯计量计费模式（作为公用事业，有点像你的电费）。

# c++ - openssl hash 产生部分不同的输出 - c++ ubuntu

> ID：11709674
> 
> 赞同：0
> 
> 时间：2012-07-29T13:37:31.930
> 
> 标签：c++, ubuntu, openssl, key

下面是我在 openssl 中创建哈希的代码。我想知道为什么我的输出总是部分不同。

```
int main()
{
    char alg[] = "MD5";
    char buf[EVP_MAX_KEY_LENGTH] = "5";
    unsigned char *testKey;
    unsigned int olen;  

    testKey = simple_digest(alg, buf, EVP_MAX_KEY_LENGTH,&olen);

    std::cout << "Printing key : >>";
    print_hex(testKey,EVP_MAX_KEY_LENGTH);
    std::cout << "<<" << std::endl;
}

unsigned char *simple_digest(char *alg, char *buf, unsigned int len,unsigned int *olen)
{
    const EVP_MD *m;
    EVP_MD_CTX ctx;
    unsigned char *ret;
    OpenSSL_add_all_digests();

    if (!(m = EVP_get_digestbyname(alg)))
        return NULL;
    if (!(ret = (unsigned char *)malloc(EVP_MAX_MD_SIZE)))
        return NULL;

    EVP_DigestInit(&ctx, m);
    EVP_DigestUpdate(&ctx, buf, len);
    EVP_DigestFinal(&ctx, ret, olen);

//  std::cout << "computed key" << ret << std::endl;

    return ret;
} 

void print_hex(unsigned char *bs, unsigned int n)
{
    int i;
    for (i = 0; i < n; i++)
        printf("%02x", bs[i]);
    printf("\n");
} 
```

输出 ：

```
3afb8ebc9c93bf6d40285736f210b7856af8bab4d040ca090043ca09f840ca09
3afb8ebc9c93bf6d40285736f210b7856af8bab490a5f909c0a7f909b8a5f909 
```

如您所见，只有后面的几个字符不同。

提前致谢！:D

* * *

**更新（正确的工作版本）：**

```
int main()
{
    char alg[] = "MD5";
    char buf[EVP_MAX_KEY_LENGTH] = "5";
    unsigned char *testKey;
    unsigned int olen;  

    testKey = simple_digest(alg, buf,strlen(buf),&olen);

    std::cout << "Printing key : >>";
    print_hex(testKey,olen);
    std::cout << "<<" << std::endl;

}

unsigned char *simple_digest(char *alg, char *buf, unsigned int len,unsigned int *olen)
{
    const EVP_MD *m;
    EVP_MD_CTX ctx;
    unsigned char *ret;
    OpenSSL_add_all_digests();

    if (!(m = EVP_get_digestbyname(alg)))
        return NULL;
    if (!(ret = (unsigned char *)malloc(EVP_MAX_KEY_LENGTH)))
        return NULL;

    EVP_DigestInit(&ctx, m);
    EVP_DigestUpdate(&ctx, buf, len);
    EVP_DigestFinal(&ctx, ret, olen);

    return ret;
} 

void print_hex(unsigned char *bs, unsigned int n)
{
    int i;
    for (i = 0; i < n; i++)
        printf("%02x", bs[i]);
} 
```

输出 ：

```
Printing key : >>e4da3b7fbbce2345d7772b0674a318d5<< 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:55:28.057

您正在尝试散列一个字符的字符串“5”，但您告诉`EVP_Digest_Update`您的缓冲区长度为`EVP_MAX_KEY_LENGTH`. 您需要传递缓冲区的实际长度，而不是它可能的最大长度。

为了完整起见，您的主要功能应如下所示：

```
int main()
{
    char alg[] = "MD5";
    char buf[EVP_MAX_KEY_LENGTH] = "5";
    unsigned char *testKey;
    unsigned int olen;  

    # Pass the true length of but
    testKey = simple_digest(alg, buf, strlen(buf), &olen);

    std::cout << "Printing key : >>";
    # Pass the true length of testKey
    print_hex(testKey,olen);
    std::cout << "<<" << std::endl;
} 
```

另一个警告：您可能不想使用`EVP_MAX_KEY_LENGTH`缓冲区，因为这会限制您可以散列的消息的大小。

# c++ - c++破坏手册

> ID：11709679
> 
> 赞同：-7
> 
> 时间：2012-07-29T13:38:19.337
> 
> 标签：c++, constructor

我正在尝试创建可以快速运行的代码。为此，我在需要时跳过了一些变量初始化。例如：（我不能更改标签\goto 部分，我必须在这种情况下使用它）

```
bool Func(bool BooleanParameter) {
    if (BooleanParameter)
        goto _true;
    else
        goto _false;
_true:
    string str; //Some code after that one that does with this variable
    return false;
_false:
    return true; //Exception because str doesn't initialized
} 
```

但是有一个例外，因为有一种方法可以不初始化变量并且变量最终会破坏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T13:44:51.887

为什么不只是：

```
bool Func(bool booleanParameter)
{
    if (booleanParameter)
    {
        string str;
        // ...
        return false;
    }
    return true;
} 
```

?

这似乎可以达到预期的结果，而无需怀疑使用`goto`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T13:42:43.020

尝试像这样确定字符串的范围

```
_true:
  {
  string str;
  return false;
  } 
```

# eclipse - Eclipse 设置为多种语言

> ID：11709683
> 
> 赞同：6
> 
> 时间：2012-07-29T13:38:46.587
> 
> 标签：eclipse, installation, workspace

我一直在各种学校项目中使用 Eclipse 平台来支持 Java、javaEE、c++、python 和 PHP。现在我对它更舒服了，我想有一些关于如何设置它的更准确的说明。我在 windows7 上 - 我已将 eclipse 本身放在我的 Dropbox 中并根据需要创建了工作区，但这最终导致设置混乱，到处散布以及各种错误（当我尝试更新到 Juno 时出现 - 现在功能像[模板坏了](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385665)）。

那么为各种语言设置 eclipse 的推荐方法是什么？我是否应该下载最新版本，添加我需要的插件（cdt、pdt 等），然后为不同的语言（如 eclipse_python、eclipse_java、eclipse_javaEE 等）创建不同的工作区？你如何设置 Eclipse ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:29:56.053

我已经密集使用 eclipse 大约 6 年了，我建议为最多 1 或 2 种不同的编程语言设置单独的 eclipse 安装。原因是插件过多，eclipse 可能会消耗过多的内存或处理器时间（当然，取决于插件在后台执行的操作等等...），这可能会导致 UI 无响应。

我还建议为每个 Eclipse 安装使用单独的工作区，以便不同的配置/安装不会相互干扰。

我写了一个小命令行脚本，它允许我切换工作区中的 .metadata 目录以与便携式驱动器一起使用（支持两种模式：家庭和便携式）也许有人觉得这很有用......

```
@ECHO OFF

REM This Script is used to ease using eclipse in a portable manner
REM The script allows to easily switch between several workspace metadata

REM arg1: eclipse runnable
REM arg2: workspace dir
REM arg3: metadata mode (portable or home)

:CHECK_ARG_ONE
IF %1 == "" GOTO :HELP
IF /i %1 == "/h" GOTO :HELP
IF /i %1 == "/?" GOTO :HELP
IF /i %1 == "/help" GOTO :HELP
IF /i %1 == "-h" GOTO :HELP
IF /i %1 == "-?" GOTO :HELP
IF /i %1 == "-help" GOTO :HELP
IF /i %1 == "--h" GOTO :HELP
IF /i %1 == "--?" GOTO :HELP
IF /i %1 == "--help" GOTO :HELP

:CHECK_ARG_TWO
IF %2 == "" GOTO :ERROR_ARG_TWO

:CHECK_ARG_THREE
IF %3 == "" GOTO :ERROR_ARG_THREE

:PREPARE
SET "ECLIPSE_RUNNABLE=%1"
SET "WORKSPACE_DIR=%2"
ECHO Working Dir: %CD%
ECHO Eclipse Runnable: %ECLIPSE_RUNNABLE%
ECHO Workspace Dir: %WORKSPACE_DIR%
SET "MD=.metadata"
SET "MD_HOME=.metadata_home"
SET "MD_PORTABLE=.metadata_portable"
PUSHD %WORKSPACE_DIR%
IF /i %3 == home GOTO :HOME
IF /i %3 == portable GOTO :PORTABLE
GOTO :ERROR_ARG_THREE_WRONG

:HOME
ECHO Starting home version
IF EXIST %MD% (
    IF EXIST %MD_HOME% (
        IF EXIST %MD_PORTABLE% (
            GOTO :ERROR_MD_PORTABLE_EXISTS_ALREADY
        ) ELSE (
            REN %MD% %MD_PORTABLE%
            REN %MD_HOME% %MD%
        )
    )
) ELSE (
    IF NOT EXIST %MD_HOME% (
        GOTO :ERROR_MD_HOME_EXISTS_NOT
    ) ELSE (
        REN %MD_HOME% %MD%
    )
)
GOTO :RUN

:PORTABLE
ECHO Starting portable version
IF EXIST "%MD%" (
    IF EXIST "%MD_PORTABLE%" (
        IF EXIST "%MD_HOME%" (
            GOTO :ERROR_MD_HOME_EXISTS_ALREADY
        ) ELSE (
            REN "%MD%" %MD_HOME%
            REN "%MD_PORTABLE%" %MD%
        )
    )
) ELSE (
    IF NOT EXIST "%MD_PORTABLE%" (
        GOTO :ERROR_MD_PORTABLE_EXISTS_NOT
    ) ELSE (
        REN "%MD_PORTABLE%" %MD%
    )
)
GOTO :RUN

:ERROR_ARG_TWO
ECHO No second argument supplied (workspace dir)
GOTO :END_ERROR

:ERROR_ARG_THREE
ECHO No third argument supplied (metadata mode - home ^| portable)
GOTO :END_ERROR

:ERROR_ARG_THREE_WRONG
ECHO Supplied third argument (metadata mode) must match (home ^| portable)
GOTO :HELP

:ERROR_MD_HOME_EXISTS_ALREADY
ECHO Trying to rename "%MD%", but the metadata directory "%MD_HOME%" already exists!
GOTO :END_ERROR

:ERROR_MD_HOME_EXISTS_NOT
ECHO Neither "%MD%" nor "%MD_HOME%" exist!
GOTO :END_ERROR

:ERROR_MD_PORTABLE_EXISTS_ALREADY
ECHO Trying to rename "%MD%", but the metadata directory "%MD_PORTABLE%" already exists!
GOTO :END_ERROR

:ERROR_MD_PORTABLE_EXISTS_NOT
ECHO Neither "%MD%" nor "%MD_PORTABLE%" exist!
GOTO :END_ERROR

:HELP
ECHO.
ECHO Eclipse starter script to switch between home and portable metadata
ECHO ©Till Kolditz 2011 (till.kolditz@googlemail.com)
ECHO.
ECHO This Script is used to ease using eclipse in a portable manner.
ECHO It allows to easily switch between portable and "home" or stationary
ECHO workspace metadata.
ECHO.
ECHO Usage: run.bat (eclipse_runnable) (workspace_dir) (home ^| portable)
ECHO.
ECHO Example1: run.bat eclipse\eclipse.exe workspace home
ECHO Example2: run.bat "eclipse (x64)\eclipse.exe" workspace_special portable
GOTO :END

:RUN
POPD
START "Eclipse" %ECLIPSE_RUNNABLE% -data %WORKSPACE_DIR%
GOTO :END

:END_ERROR
POPD
REM PAUSE for debugging
PAUSE
GOTO :END

:END
GOTO :EOF 
```

# jquery - 为什么确认对话框需要两次点击 ujs？

> ID：11709684
> 
> 赞同：0
> 
> 时间：2012-07-29T13:39:02.177
> 
> 标签：jquery, ruby-on-rails, ruby, ajax

最初没有确认。
我发现添加`//= query_ujs`到我的资产歧管解决了这个问题。但是......现在我发现确认对话框需要“2次点击”才能使用（取消或确定按钮）。

我的清单如下所示：

```
//= require jquery
//= require jquery-ui
//
// ujs needed for delete confirm dial boxes.
//= require jquery_ujs 
```

无论是取消还是确定，都需要点击两次。删除按钮的 Rails 代码

```
= button_to '', schedule_path(schedule), 
:method => 'delete', 
:confirm => 'Are you sure you want to delete this schedule?', 
:class => 'deleteicon', 
:title => "Delete #{name}" 
```

生成的 HTML：

```
<form action="/schedule/719" class="button_to" method="post">
  <div>
    <input name="_method" value="delete" type="hidden">
    <input class="deleteicon" data-confirm="Are you sure you want to delete this schedule?" title="Delete Shedule A" value="" type="submit">
    <input name="authenticity_token" value="wpcofEiLu6NXymHj289XGahTTT1XqNI56XvBlAFq2G8=" type="hidden">
  </div>
</form> 
```

页面标题的js：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:26:12.017

答案是**资产编译。**

我们的系统设置为在运行时自动编译资产。

我（错误地）也做了一个`rake assets:precompile`，所以我基本上复制了 js 并创建了副本。我注意到当时 theta 预编译它创建了很多文件，这是一个危险信号，说明为什么事情已经改变并且双击已经开始（尽管使用预编译时*，*它有它的位置）。

感谢 git，我能够恢复到 master，使用新的分支名称重新分支，而无需执行预编译步骤。

# .net - .NET/Windows 中二进制文件的最佳文件流查找模式

> ID：11709692
> 
> 赞同：0
> 
> 时间：2012-07-29T13:40:04.960
> 
> 标签：.net, file-io, filestream, seek

我试图读取一个二进制文件，其中我感兴趣的数据在文件中是分开的。哪种阅读模式更好？（假设初始流位置在字节 0）

1.  读取（计数=8192），查找（偏移量=20480，原点=当前），读取（计数=8192），查找（偏移量=12288，原点=当前）
2.  读取（计数=8192），查找（偏移量=28672，原点=开始），读取（计数=8192），查找（偏移量=49152，原点=开始）

由于 .NET Streams 使我能够选择 SeekOrigin，哪种搜索模式更好，从 开始`SeekOrigin.Begin`，还是从该`SeekOrigin.Current`位置继续搜索？

有关系吗？操作系统不能自己进行计算并为我决定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:10:30.383

没关系。SeekOrigin.Current 只是一个方便的选项，可以帮助您避免自己跟踪绝对位置。Windows 已经在内部执行此操作，因此将当前偏移量转换为开始偏移量没有问题。这才是它真正需要的。您如何认为操作系统可以自动搜索到 20480，然后自动搜索到 12288 尚不清楚。它不能，Windows 没有记录大小的概念。文件只是一个字节流，没有强加于它的结构。

您寻求的确切顺序*确实*很重要。通过按顺序访问文件位置，您的程序运行速度最快。这是数据如何写入磁盘然后从磁盘中读取的副作用，如果磁盘没有严重碎片化，通常是按顺序读取的。文件系统缓存利用了一些东西，它会从同一个磁盘磁道中预读取数据，因为它很便宜而且很可能被使用。通过按顺序查找，您将最大限度地提高数据出现在缓存中的几率。您只需为非常快速的内存到内存复制付费，而不必等待磁盘。

# c# - 使用 db 信息生成 Guid

> ID：11709694
> 
> 赞同：1
> 
> 时间：2012-07-29T13:40:19.903
> 
> 标签：c#, .net, asp.net-mvc, security, asp.net-web-api

我正在开发 ASP.NET MVC WEB API 服务。就像我在任何地方都需要安全令牌一样。我有一个使用数据库信息生成 guid 的想法。例如，我需要从 db 中获取实体，然后在此信息中获取 id、datecreated 和 crete guid。它将是发送给客户端的令牌。所以他可以访问他的数据。

问题是我不知道如何生成它。请给我一些建议以使其发挥作用。

我发现了有趣的文章[http://www.singular.co.nz/blog/archive/2007/12/20/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp.aspx](http://www.singular.co.nz/blog/archive/2007/12/20/shortguid-a-shorter-and-url-friendly-guid-in-c-sharp.aspx)用于缩短 GUID .

任何帮助将不胜感激，迪玛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:14:35.363

我只是将一个`AccessKey uniqueidentifier not null unique`与每个实体一起存储。你可以把它交给客户。这样你就不需要搞乱加密或散列。

只要确保*不要*使用`Guid.NewGuid()`它，因为它的密码强度不高。用这个：

```
public static class SecureGuidGenerator
{
    [ThreadStatic]
    static RandomNumberGenerator rng;

    public static Guid GetNext()
    {
        if (rng == null) rng = RandomNumberGenerator.Create();
        var bytes = new byte[16];
        rng.GetBytes(bytes);
        return new Guid(bytes);
    }
} 
```

# php - 如何使用 php 在 Mysql 中存储一些加密字符串？

> ID：11709698
> 
> 赞同：1
> 
> 时间：2012-07-29T13:40:28.160
> 
> 标签：php, mysql, string, encryption

如何存储一些加密字符串（大约一到几个单词）？

假设我加密了这个字符串：

```
$key='fappings'; // Encryption Key
$str='Mama Luigi'; // String that I Encrypted
$encrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $str, MCRYPT_MODE_CBC, md5(md5($key))); 
```

现在，假设我不想索引该数据或对其执行任何搜索，只想问两个问题：

1.  我会更好地使用什么数据类型？我猜是varbinary，但我不确定......

2.  我将如何处理我的查询？假设我会使用一个简单的 mysql_query() 函数。

我看到有些人实际上会进行 base64 编码，然后简单地插入它，就像普通字符串一样，例如：

```
mysql_query("insert into faps data='".base64_encode($encrypted)."'"); 
```

但是有些事情告诉我这不是这样做的方法。即使在空间方面也不足。

什么是更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:15:16.120

根据所需的长度，使用 varbinary（如您的建议）或 blob。为了安全起见，将字符串的长度乘以 4。

无需对它进行 base64 编码——这只会增加更多的长度。您所需要的只是常规的转义函数（基本级别的 mysql_real_escape_string，或使用 PDO 绑定，它会让您安全）。

另一种方法可能是使用 MySql 自己的加密函数。[http://dev.mysql.com/doc//refman/5.5/en/encryption-functions.html](http://dev.mysql.com/doc//refman/5.5/en/encryption-functions.html)因为这可以为您节省一些编程麻烦？将压力从 PHP 服务器转移到 MySQL 服务器 - 所以考虑哪个压力较小，以及未压缩的 SQL 指令在开放网络上的传输是否重要等。

# objective-c - CGContextAddEllipse - 重叠获取的剪辑 - Quartz

> ID：11709700
> 
> 赞同：1
> 
> 时间：2012-07-29T13:40:49.037
> 
> 标签：objective-c, core-graphics, quartz-2d, drawrect, cgcontext

我喜欢用一些元素画一个玻璃 - 顶部椭圆 - 底部椭圆 - 以及中间的线条

接下来，它应该填充一个渐变。元素可以工作，但在玻璃中间与顶部或底部椭圆接触的地方，该区域被剪裁了。

```
- (void)drawRect:(CGRect)rect
{
    CGPoint c = self.center;    
    // Drawing code
    CGContextRef cx = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(cx, 1.0);
    [[UIColor whiteColor] setStroke];

    //  DrawTheShapeOfTheGlass
    CGContextBeginPath(cx);
    //  Top and Bottom Ellipse
    CGContextAddEllipseInRect(cx, CGRectMake(0, 0, 100, 20));
    CGContextAddEllipseInRect(cx, CGRectMake(10, 90, 80, 20));
    //  Define the points for the Area inbetween
    CGPoint points[] = { {0.0,10.0},{10.0,100.0},{90.0,100.0},{100.0,10.0} };
    CGContextAddLines(cx, points, 4);
    CGContextClosePath(cx);
    //  Clip, that's only the Clipped-Area wil be filled with the Gradient
    CGContextClip(cx);

    //  CreateAndDraw the Gradient
    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat colorSpace[] = {1.0f, 1.0f, 1.0f, 0.0f,
                        0.0f, 0.0f, 1.0f, 1.0f };
    CGFloat locations[] = { 0.0, 1.0 };

    CGGradientRef myGradient = CGGradientCreateWithColorComponents(rgbColorSpace, colorSpace, locations, 2);

    CGPoint s = CGPointMake(0, 0);
    CGPoint e = CGPointMake(100, 100);
    CGContextDrawLinearGradient(cx, myGradient, s, e, kCGGradientDrawsBeforeStartLocation | kCGGradientDrawsAfterEndLocation);

    CGColorSpaceRelease(rgbColorSpace);
    CGGradientRelease(myGradient);
} 
```

这里的样子：

![在此处输入图像描述](../Images/7014e72af0ecb40c0db3803dea054d8b.png)

有没有可能“填充”整个椭圆？我玩过 BlendModes 但没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:13:56.500

尝试用以下代码替换 points[] 初始化代码...

```
CGPoint points[] = {{0.0,10.0},{100.0,10.0},{90.0,100.0},{10.0,100.0}}; 
```

CoreGraphics 使用非零缠绕计数规则来确定如何填充路径。由于椭圆是顺时针绘制的，而梯形是逆时针绘制的，因此重叠区域没有被填充。将梯形的绘制顺序更改为顺时针将导致对象被完全填充。

# cakephp - Cakephp：find（）错误：SQLSTATE [42S22]：找不到列：1054“字段列表”中的未知列“Interestslogs.interest_id”

> ID：11709704
> 
> 赞同：1
> 
> 时间：2012-07-29T13:41:51.293
> 
> 标签：cakephp

我有一个名为“Interestslogs”的表，模型的名称是 Interestlog。

我需要根据 Cakephp 中那个表的 id 获取 client_id。

```
$client_id = $this->Interestslog->find('first',array(
        'conditions' => array('Interestslogs.id' => $id),
        'fields' => array('Interestslogs.client_id'),
        )
    ); 
```

但是我收到数据库错误：

```
Database Error 
```

错误：SQLSTATE [42S22]：未找到列：1054“字段列表”中的未知列“Interestslogs.interest_id”

SQL 查询：选择`Interestslogs`。`interest_id`从`efa`。`interestslogs`如左`Interestslog`加入`efa`。`interests`AS `Interest`ON ( `Interestslog`. `interest_id`= `Interest`. `id`) 左连接`efa`。在（. = . ）`clients`哪里。= 1 限制 1`Client``Interestslog``client_id``Client``id``Interestslogs``id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T14:24:25.687

去掉 Interestslogs 中的复数“s”

```
$client_id = $this->Interestslog->find('first',array(
    'conditions' => array('Interestslog.id' => $id),
    'fields' => array('Interestslog.client_id'),
    )
); 
```

并检查您的型号。如果每件事（客户和兴趣日志）都正确关联，您不应该收到任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:15:13.957

```
$client_id = $this->Interestslog->find('first',array(
        'conditions' => array('Interestslog.id' => $id),
        'fields' => array('Interestslog.client_id'),
        )
    ); 
```

您应该在条件/字段数组中写入不带最后一个“s”的表名，因为它是由 cakephp 自动添加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:23:08.960

检查您的 Interestlogs 表中是否有 interest_id 列。

或者试试

```
$variable_temp = $this->Interestslog->findById($id);
//debug($variable_temp);
$client_id = $variable['client_id']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T14:03:23.933

你可以试试：（*如果你的关系没问题）*

```
$this->Interestslog->recursive = -1;
$client_id = $this->Interestslog->find('first',array(
     'conditions' => array('Interestslogs.id' => $id),
     'fields' => array('Interestslogs.client_id'),
    )
); 
```

# mysql - 一百万行表上的 MySQL groupwise 最大性能问题

> ID：11709712
> 
> 赞同：0
> 
> 时间：2012-07-29T13:43:28.113
> 
> 标签：mysql, groupwise, groupwise-maximum

我试图找到一种直接的方法来提高非常活跃的论坛的性能，其中有大量帖子，mysql 不能再在内存中进行表排序，并且似乎没有充分利用索引。

这个简单的查询查找每个主题中的最新帖子，以便用户确定他们是否有任何回复（通过稍后比较 topic_time）

```
SELECT p.*, MAX(post_time) as post_time FROM forum_posts AS p   
WHERE p.poster_id = '1' AND p.post_status = '0' 
GROUP BY p.topic_id  
ORDER BY post_time DESC 
LIMIT 50 
```

简单，扁平的桌子看起来像

```
post_id | poster_id | topic_id | post_status | post_time | post_text 
```

然而，当有一百万个帖子并且用户自己有数万个帖子时，它的性能就会崩溃。MySQL 要么不再对内存中的表进行排序，要么扫描的行太多。在实际使用中可能需要长达 3 秒的时间，恕我直言，这是不可接受的，因为在此期间它会占用 CPU 并减慢其他所有人的速度。

我当然可以进行任何索引组合，但 mysql 似乎最喜欢使用组合

```
poster_id + post_time 
```

所以它只是从百万中选择一个用户的 50k 帖子，然后开始按 topic_id 分组和排序。奇怪地将 topic_id 添加到索引组合中似乎对性能没有帮助，尽管它可能是索引字段的顺序？

我尝试编写一个等效的 JOIN，以便可以使用多个索引，但我遇到了问题，即每一侧都必须由 post_status 和海报过滤。

**我在想它会更快，至少对于前几页，如果可以让mysql首先通过它的索引按post_time对数据进行排序，然后开始按降序为用户挑选不同的topic_id。我想这将需要一个子查询，并且不确定 50k 结果子查询会更好，仍然需要一个临时表。**

当然，一个基本的解决方案是增加核心设计，以便有另一个表只存储每个主题中每个用户的最大 post_time ，但除非找不到其他解决方案，否则这是一个太大的变化。

感谢您的任何建议！

* * *

**添加真实世界的示例并解释：**

**慢日志**

```
# Query_time: 2.751334  Lock_time: 0.000056 Rows_sent: 40  Rows_examined: 48286
SELECT   p.*, MAX(post_time) as post_time FROM forum_posts AS p   WHERE p.poster_id = '2' AND p.post_status = '0' GROUP BY p.topic_id  ORDER BY post_time DESC LIMIT 7000, 40; 
```

**解释**

```
select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
SIMPLE          p   ref poster_time poster_time 4   const   27072   Using where; Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T13:52:31.650

首先，修复您的查询以提供确定的结果：

```
SELECT p.topic_id, 
       MAX(post_time) as post_time 
FROM forum_posts AS p   
WHERE p.poster_id = '1' AND p.post_status = '0' 
GROUP BY p.topic_id  
ORDER BY post_time DESC 
  LIMIT 50 ; 
```

然后在上添加索引后尝试`(post_status, poster_id, topic_id, post_time)`。

# http - text/html vs application/x-www-form-urlencoded 和 FormUrlEncodedMediaTypeFormatter

> ID：11709714
> 
> 赞同：0
> 
> 时间：2012-07-29T13:43:40.080
> 
> 标签：http, rest, oauth, asp.net-web-api, dotnet-httpclient

对于 POST 请求，我收到了**text/html**格式的响应，响应正文包含以下信息：

> oauth_token=XXXXXXXXXXXXXXXXXXXXXXXXX&oauth_token_secret=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&oauth_callback_confirmed=true

我提出了这个请求`System.Net.Http.HttpClient`，我可以用`FormUrlEncodedMediaTypeFormatter`as读取响应，`FormDataCollection`但结果证明默认情况下`FormUrlEncodedMediaTypeFormatter`只支持**application/x-www-form-urlencoded**格式。因此，我使用以下代码解决了这个问题：

```
using (OAuthHttpClient client = new OAuthHttpClient(creds)) {

    var response = await client.PostAsync(requestUri, new EmptyContent());
    var formatter = new FormUrlEncodedMediaTypeFormatter();
    formatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
    var result = await response.Content.ReadAsAsync<FormDataCollection>(new List<MediaTypeFormatter>() { formatter });

} 
```

这里的问题是：

**响应提供者（在这种情况下是 Twitter）是否通过将此响应作为text/html**发送而做错了，还是应该默认`FormUrlEncodedMediaTypeFormatter`支持**text/html类型？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:15:39.670

您的问题缺少一些关键信息，即默认情况下 requestUri 应该返回什么，它是 Web API 服务还是外部服务等。它似乎不是 Web API，因为它返回“text/html”有点奇怪。

但是 FormUrlEncodedMediaTypeFormatter 不支持从 text/html 格式化回来的事实绝对没问题。因为为什么会这样？“application/x-www-form-urlencoded”实际上是一个键值字典，而 text/html 是一种富媒体类型。

在 Web API 中，通过内容协商的工作方式，它着眼于

1.  媒体类型映射（我假设在您的情况下不存在）
2.  接受标头 - 查看您的请求，您没有设置它们
3.  请求内容类型 - 再次查看您的请求，您没有设置它，所以它是空的
4.  格式化程序可以序列化给定类型吗

因此，如果您向任何 Web API 操作显示请求，它将返回 text/xml（如果您没有手动调整 conneg）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T20:59:42.067

我同意 Filip 的观点，认为这是解决不正确的内容类型标题的好方法。

亨里克

# vb.net - VB.NET：从不区分大小写的字典类型继承

> ID：11709719
> 
> 赞同：0
> 
> 时间：2012-07-29T13:44:45.553
> 
> 标签：vb.net, dictionary, case-insensitive

我正在使用 Visual Studio 2010。我想创建一个从不区分大小写的字典类型继承的简单类。*我可以从区分大小写*的字典类型继承如下：

```
Public Class clsMyDictionary
  Inherits Dictionary(Of String, String)
End Class 
```

不区分*大小写*的字典对象通常按如下方式创建：

```
Dim d = New Dictionary(Of String, String)(StringComparer.OrdinalIgnoreCase) 
```

所以我想做类似下面的事情，所以我的字典类不区分大小写，但会导致语法错误：

```
Public Class clsMyDictionary
  Inherits Dictionary(Of String, String)(StringComparer.OrdinalIgnoreCase)
End Class 
```

在该上下文中不允许指定 StringComparer。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:55:13.877

只需使用`OrdinalIgnoreCase`参数调用基本构造函数。

```
Public Class clsMyDictionary
  Inherits Dictionary(Of String, String)

  public sub new()
     MyBase.New(StringComparer.OrdinalIgnoreCase)
  end sub

End Class 
```

# android - Android 微调器对话框样式

> ID：11709721
> 
> 赞同：0
> 
> 时间：2012-07-29T13:45:11.820
> 
> 标签：android, colors, background, spinner, drawable

如何调整 Spinner 对话框样式？

我要做的就是将背景更改为可绘制或颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:05:28.813

如果要更改微调器的弹出背景，可以使用：`setPopupBackgroundResource()`

要更改微调器的背景（不是弹出窗口），本教程很好 ->[链接](http://www.gersic.com/blog.php?id=57)

# c++ - C ++ stringstream如何在第二个循环中重置它

> ID：11709722
> 
> 赞同：1
> 
> 时间：2012-07-29T13:45:11.747
> 
> 标签：c++

> **可能重复：**
> [如何清除字符串流？](https://stackoverflow.com/questions/2848087/how-to-clear-stringstream)

我有这个 c++ 命令

```
//siteurl and filename are of string type

stringstream ss;
ss << "lynx -dump '" << siteurl << "' > " << filename; 
```

在第一个循环中，一切正常。但是在第二个循环中，我意识到它只是追加而不是创建新记录

当我使用 cout 进行故障排除时，它给了我这个，我意识到命令是在第二个循环上追加而不是覆盖，我如何在第二个循环/使用中为空或重置或覆盖 ss（字符串流）的第一条记录。

```
Webparser: lynx -dump 'http://sg.finance.yahoo.com/q?s=USDSGD=X' > file.txtlynx -dump 'http://sg.finance.yahoo.com/q?s=EURUSD=X' > file.txt 
```

我想要的是第二个循环，它将是这个输出

```
Webparser: lynx -dump 'http://sg.finance.yahoo.com/q?s=EURUSD=X' > file.txt 
```

我是 C++ 新手，感谢所有帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:50:27.950

做空`ss.str("")`。

但最好`ss`在循环内部定义，这样每次都是一个新变量：

```
for(/*.....*/)
{
   stringstream ss;
   ss << /*....*/ ;
} 
```

也就是说，使它成为一个作用域变量，例如函数作用域或块作用域，这样当它超出作用域时就会被破坏，当它回来时，它会再次被创建。

`ss.str("")`使其成为范围变量比使用使其为空更不容易出错。我的意思是，如果你忘记了怎么办`ss.str("")`？在很多情况下，当你需要写的时候`ss.str("")`表明你*确实*需要把它变成一个作用域变量，这样你就可以再次定义它，或者在一个循环中（如上所示），或者完全是一个新的变量，可能有不同的名字.

# intellij-idea - IntelliJ-IDEA：如何强制执行相同的代码样式

> ID：11709733
> 
> 赞同：1
> 
> 时间：2012-07-29T13:46:28.750
> 
> 标签：intellij-idea

我们正在使用 IntelliJ IDEA 10.5。我们如何确保每个人都使用相同的代码风格和 Rearranger 配置？应该将哪些文件置于版本控制之下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T14:12:44.820

`.idea`使用基于目录的格式时，您应该共享目录中的大部分文件，[请查看常见问题解答](http://devnet.jetbrains.net/docs/DOC-1186)。

在[代码样式设置中](http://www.jetbrains.com/idea/webhelp/code-style.html)，使当前方案项目特定，它将存储在`.idea/codeStyleSettings.xml`（或`.ipr`使用旧格式时的项目文件）中。

Rearranger 是一个第三方插件，据我所知并没有将其配置存储在项目中。它具有从文件导入配置并将其导出到文件的选项，您可以通过将该文件放入版本控制中来维护相同的配置。

请注意，IDEA 12 将捆绑一个新的 Rearranger 插件，该插件将具有更好的配置管理（类似于代码样式设置，或其中的一部分）。

# c++ - QTransform::setRotation 与 Q_PROPERTY

> ID：11709735
> 
> 赞同：0
> 
> 时间：2012-07-29T13:47:14.607
> 
> 标签：c++, linux, qt

我有一个问题，我想为我自己的由 QGraphicsPixmapItem 继承的类设置一个 Q_PROPERTY 宏。所以我设置位置的第一个属性效果很好，但是我想为 Qt::YAxis 设置旋转的第二个属性不起作用，我不知道如何正确编写它。我需要这个属性来制作动画。这是我正在尝试的：

- 啊 -

```
class myOwnPixmapItem : public QObject, public QGraphicsPixmapItem
{
    Q_OBJECT
    Q_PROPERTY (QPointF pos READ pos WRITE setPos)
    Q_PROPERTY (QTransform rot READ rot WRITE setRotation)

public:
    flowNpixmapItem()
}; 
```

--A.cpp--

```
myItemPosAnim -> setTargetObject (myItem);
myItemTransAnim -> setTargetObject (myItem);

myItemPosAnim -> setStartValue (QPointF (cover0 -> pos()));
myItemTransAnim -> setStartValue (QTransform::rotate (0, Qt::YAxis)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:30:46.820

问题是它`QTransform::rotate`是一个非静态成员函数，这意味着这个语法只能用于引用一个函数（*函数指针*），而不是*调用*该函数。

该方法`QPropertyAnimation::setStartValue`将值（不是函数）作为其参数，因此在您的情况下是 QTransform 值。`QTransform::rotate(...)`(with arguments) 没有价值，事实上，它不能被编译，因为编译器认为你想用给定的参数调用静态方法。

所以你可能想要这个：

```
myItemPosAnim -> setTargetObject (myItem);
myItemTransAnim -> setTargetObject (myItem);

myItemPosAnim -> setStartValue (QPointF (cover0 -> pos()));
QTransform transform;
transform.rotate (0, Qt::YAxis):
myItemTransAnim -> setStartValue (transform); 
```

* * *

但我仍然在您的代码中看到一个大问题：您为变换设置动画，而不是旋转本身。旋转变换是非线性的，这意味着如果您尝试对从 0° 到 180° 的变换进行动画处理，您将无法获得想要的结果。您宁愿获得缩放动画，因为 180° 旋转等于将坐标系缩放系数 -1。这是因为缩放*是*线性变换，并且 QPropertyAnimation 在开始和结束值之间进行插值，所以“开始和结束之间的中间”是使用 计算的`0.5 * start + 0.5 * end`，这*不是*旋转矩阵想要的。

由于 QGraphicsItems 的旋转`qreal`无论如何都是类型，因此只需使用此类型：

```
Q_PROPERTY (double rot READ rot WRITE setRotation) 
```

然后你应该像这样使用它：

```
myItemPosAnim -> setTargetObject (myItem);
myItemTransAnim -> setTargetObject (myItem);

myItemPosAnim -> setStartValue (QPointF (cover0 -> pos()));
myItemTransAnim -> setStartValue (0.0); 
```

# c++ - C++ 中内存屏障的例子有哪些？

> ID：11709736
> 
> 赞同：10
> 
> 时间：2012-07-29T13:47:15.303
> 
> 标签：c++, atomic, memory-barriers

我看到 C++11 互斥锁不是`void lock() volatile`. 编译器如何知道哪些函数是内存屏障，哪些不是？即使它们不是易失性的，所有功能都是障碍吗？有哪些鲜为人知的记忆屏障和大家应该知道的记忆屏障？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T13:58:00.740

运行时库必须以编译器知道的方式实现互斥锁！语言标准没有说明如何做到这一点。

很可能，它涉及对某些用作内存屏障的操作系统服务的调用。或者编译器可以有一个扩展，比如[void _ReadWriteBarrier();](http://msdn.microsoft.com/en-us/library/f20w0x5e.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T14:19:50.033

您的实际实现`std::mutex`将使得编译器不会执行非法重新排序，不会忽略变量加载，它将确保锁变量被原子访问，并且 CPU 执行必要的内存屏障以获取和释放锁.

需要做多少工作以确保这因平台而异，但您的库实现将做正确的事情。

# c++ - SDL 应用程序在事件循环中退出

> ID：11709744
> 
> 赞同：1
> 
> 时间：2012-07-29T13:48:32.900
> 
> 标签：c++, sdl

```
int main( int argc, char* args[] )
{
    if( SDL_Init(SDL_INIT_EVERYTHING) < 0 )
        std::cout<<"unable to init sdl";
    SDL_Surface *screen = SDL_SetVideoMode(800,600,32,SDL_DOUBLEBUF);
    std::cout<<"before while\n";
    SDL_Event event;
    while(SDL_PollEvent(&event))
        {
            std::cout<<"in while\n";
            if(event.type == SDL_QUIT)
                std::cout<<"SDL_QUIT\n";
        }
    std::cout<<"after while\n";
    SDL_Quit();
} 
```

由于某些未知原因，此 SDL 应用程序在 while 循环中运行 4 次后退出，而我没有杀死/关闭/等它，也没有将“SDL_QUIT”打印到标准输出。是否有一个原因？我如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T13:51:08.360

你需要通过为它创建一个主循环来保持你的应用程序活着。到目前为止，您的应用程序在您轮询所有初始事件后退出：

```
int main( int argc, char* args[] )
{
    if( SDL_Init(SDL_INIT_EVERYTHING) < 0 )
        std::cout<<"unable to init sdl";
    SDL_Surface *screen = SDL_SetVideoMode(800,600,32,SDL_DOUBLEBUF);
    SDL_Event event;
    bool active = true;
    while(active)
    {
        while(SDL_PollEvent(&event))
        {
            if(event.type == SDL_QUIT)
            {
                std::cout<<"SDL_QUIT\n";
                active = false;
            }
        }
        // TODO:  add drawing to screen
        SDL_Flip(screen);
    }
    SDL_Quit();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T13:51:50.543

`SDL_PollEvent`当没有更多事件要处理时将返回 false，在这种情况下，这是在应用程序启动之后。

您需要将轮询循环嵌套在另一个循环中，以使应用程序保持活动状态：

```
int running = 1;
while (running)
{
    while (SDL_PollEvent(&event))
    {
        if (event.type == SDL_QUIT)
            running = 0;
    }
    // Update and draw here usually 
} 
```

# python - 如何每次都不为烧瓶中的静态文件重新定义 url

> ID：11709746
> 
> 赞同：6
> 
> 时间：2012-07-29T13:48:41.553
> 
> 标签：python, flask

我的应用程序有很多使用同一组静态文件的路由。

我必须像这样为每条路线定义它们：

```
css_reset = url_for("static", filename="reset.css")
css_main = url_for("static", filename="main.css")
css_fonts = url_for("static", filename="fonts.css")

js_jquery = url_for("static", filename="jquery-1.7.2.min.js")
js_main = url_for("static", filename="main.js") 
```

然后，当我渲染模板时，它看起来像这样：

```
return render_template("person.html",
                       css_main=css_main,
                       css_reset=css_reset,
                       css_fonts=css_fonts,
                       js_jquery=js_jquery,
                       js_main=js_main) 
```

我是烧瓶和 python 的新手，我认为我正在做的事情有点荒谬。我可以在一个地方定义它们，然后只在我的模板中使用，而不在每个路由定义中复制和粘贴吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T08:41:59.067

每次您可以在 Jinja 中将它们注册为全局变量时，而不是将这些变量传递给您的模板：

```
app.jinja_env.globals.update(
    css_reset=url_for("static", filename="reset.css"),
    css_main=url_for("static", filename="main.css"),
    ...
) 
```

或者，更好的是，注册一个辅助函数：

```
app.jinja_env.globals['static'] = (
    lambda filename: url_for('static', filename=filename)) 
```

然后在您的模板中：

```
<link ref=stylesheet href="{{ static('main.css') }}"> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-30T09:25:56.503

最简单的方法是使用[Flask-Assets](http://elsdoerfer.name/docs/flask-assets/)扩展。

```
 from flask.ext.assets import Environment, Bundle
    assets = Environment(app)
    css_all = Bundle('reset.css','main.css','fonts.css')
    assets.register('css_all',css_all) 
```

在模板中：

```
 {% assets %}
    <link rel="stylesheet" href="{{ ASSET_URL }}">
    {% endassets %} 
```

您还可以使用此扩展的某些选项压缩 css 和 js 文件以用于生产。

由于您需要在许多模板中使用这些文件，因此在 base.html 模板中定义它们，并在每个模板中扩展该 base.html。您不必一次又一次地编写它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-29T14:03:02.143

你不需要这样做， url_for 是用来生成 url 的（这样当你改变一个 url 的结构时，你不需要改变它十几次）。您可以直接在模板中使用静态文件的固定路径。只需将您的静态文件放在 /static 文件夹中并在您的模板中使用它：

```
<link rel="stylesheet" href="{{ YOUR_SITE_URL_HERE+'/static/main.css' }}"> 
```

您可能希望在 config.py 中定义一个变量并在模板中使用它，而不是直接将 YOUR_SITE_URL 替换为您网站的 url：`{{ config['SITE_URL']+'/static/main.css' }}`

# zend-framework - 如何访问模型中的数据？

> ID：11709747
> 
> 赞同：0
> 
> 时间：2012-07-29T13:48:47.050
> 
> 标签：zend-framework, zend-db

我的数据库 mysql 中有一些数据，我在模型中通过查询接收到这些数据

```
$row = $this->fetchRow('id ='.$id);
return $row; 
```

我的数据库表中的一列以时间戳格式存储日期，我想在我的模型中使用 php 函数日期将其转换。我怎么能做到这一点？如何访问我现在的数据`$row`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:07:34.907

我不确定你在问什么，但如果你问如何转换作为字符串返回的日期时间`YYYY-MM-DD HH:NN:SS`，那么这些应该会有所帮助：

```
# PHP 5.3+:

$dt = new DateTime($row['timestamp']);
$time = $dt->getTimestamp();

# before PHP 5.3:

$time = strtotime($row['timestamp']); 
```

# c# - 为什么我会收到“输入不是有效的 Base-64 字符串”异常

> ID：11709750
> 
> 赞同：1
> 
> 时间：2012-07-29T13:49:16.407
> 
> 标签：c#, xml, exception, encryption

在我的项目中，我有两种加密和解密 XML 文件的方法

以及另一种在 XML 文件中保存和加载数据的方法

我不知道为什么加载数据时会出现此异常`Load()`

> 输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。

这是我的方法

```
 public static string Encrypt(string plainText)
      {
            byte[] initVectorBytes = Encoding.ASCII.GetBytes("teto1620@#$%asdf");
            byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);
            byte[] keyBytes = Encoding.Unicode.GetBytes("_+)&qwer9512popo");
            var symmetricKey = new RijndaelManaged();
            symmetricKey.Mode = CipherMode.CBC;
            ICryptoTransform encryptor = symmetricKey.CreateEncryptor(keyBytes, initVectorBytes);
            MemoryStream memoryStream = new MemoryStream();
            CryptoStream cryptoStream = new CryptoStream(memoryStream, encryptor, CryptoStreamMode.Write);
            cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
            cryptoStream.FlushFinalBlock();
            byte[] cipherTextBytes = memoryStream.ToArray();
            memoryStream.Close();
            cryptoStream.Close();
            string cipherText = Convert.ToBase64String(cipherTextBytes);
            return cipherText;

      }
      public static string Decrypt(string cipherText)
      {
            byte[] initVectorBytes = Encoding.ASCII.GetBytes("teto1620@#$%asdf");
            byte[] cipherTextBytes = Convert.FromBase64String(cipherText);
            byte[] keyBytes = Encoding.Unicode.GetBytes("_+)&qwer9512popo");
            RijndaelManaged symmetricKey = new RijndaelManaged();
            symmetricKey.Mode = CipherMode.CBC;
            ICryptoTransform decryptor = symmetricKey.CreateDecryptor(keyBytes, initVectorBytes);
            MemoryStream memoryStream = new MemoryStream(cipherTextBytes);
            CryptoStream cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);
            byte[] plainTextBytes = new byte[cipherTextBytes.Length];
            int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);
            memoryStream.Close();
            cryptoStream.Close();
            string plainText = Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
            return plainText;
      } 
```

以及另外两种保存和加载数据的方法

```
public bool Save()
{
    bool isSaved = false;

    try
    {
        if (SharedData.DeviceList != null)
        {
            var fileInfo = new FileInfo(SharedData.CONFIGURATION_FULL_PATH);
            if (!fileInfo.Exists)
            {
                File.Create(SharedData.CONFIGURATION_FULL_PATH).Close();

            }
            var streamWriter = new StreamWriter(SharedData.CONFIGURATION_FULL_PATH);
            streamWriter.Write(Encrypt("<?xml version=\"1.0\" encoding=\"utf-8\"?><settings>"));
            if (SharedData.DeviceList.Count > 0)
            {
                foreach (var device in SharedData.DeviceList)
                {
                    streamWriter.Write(Encrypt("<username>" +device.Username + "</username>"));
                    streamWriter.Write(Encrypt("<AgentName>" +device.AgentName + "</AgentName>"));
                    streamWriter.Write(Encrypt("<password>" + device.Password + "</password>"));
                    streamWriter.Write(Encrypt("<domain>" + device.Domain + "</domain>"));
                    streamWriter.Write(Encrypt("<peerUri>" + device.PeerURI + "</peerUri>"));
                    streamWriter.Write(Encrypt("<sipUri>" + device.SipURI + "</sipUri>"));
                    streamWriter.Write(Encrypt("<fqdn>" + device.FQDN+ "</fqdn>"));
                    streamWriter.Write(Encrypt("<type>" + ((byte)device.Type).ToString() + "</type>"));
                    streamWriter.Write(Encrypt("<transportType>" +((byte)device.TransportType).ToString() + "</transportType>"));
                }
            }

            streamWriter.Write(Encrypt("</settings>"));
            streamWriter.Close();
            isSaved = true;
        }
        else isSaved = false;
    }
    catch { isSaved = false; }
    return isSaved;
}

private bool Load()
{
    bool isLoaded = false;
    try
    {
        if (SharedData.DeviceList != null)
        {
            var fileInfo = new FileInfo(SharedData.CONFIGURATION_FULL_PATH);
            if (fileInfo.Exists)
            {
                var textTodecrypt = File.ReadAllText(SharedData.CONFIGURATION_FULL_PATH);
                var xmlReader = new XmlTextReader(Decrypt(textTodecrypt));
                var nodeElement = string.Empty;
                var thisDevice = new Device();
                while (xmlReader.Read())
                {
                    if (xmlReader.NodeType == XmlNodeType.Element) nodeElement = xmlReader.Name;
                    if (xmlReader.NodeType == XmlNodeType.Text)
                    {
                        switch (nodeElement)
                        {
                            case @"username":
                                                 if (xmlReader.Value.Length > 0) thisDevice = new Device
                                                                                                {
                                                                                                    Username = xmlReader.Value
                                                                                                };
                                break;
                            case @"AgentName":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.AgentName = xmlReader.Value;
                                break;
                            case @"password":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.Password = xmlReader.Value;
                                break;
                            case @"peerUri":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.PeerURI = xmlReader.Value;
                                break;
                            case @"sipUri":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.SipURI = xmlReader.Value;
                                break;
                            case @"domain":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.Domain = xmlReader.Value;
                                break;
                            case @"fqdn":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.FQDN = xmlReader.Value;
                                break;
                            case @"type":
                                if (xmlReader.Value.Length > 0)
                                                      thisDevice.Type = (Enums.DeviceType)byte.Parse(xmlReader.Value);
                                break;
                            case @"transportType":
                                if (xmlReader.Value.Length > 0)
                                {
                                                      thisDevice.TransportType = (Enums.ServerTransportType)byte.Parse(xmlReader.Value);
                                    if (!IsExist(thisDevice, false)) SharedData.DeviceList.Add(thisDevice);
                                }
                                break;
                        }
                    }
                }
                xmlReader.Close();
                SharedData.TempDeviceList = SharedData.DeviceList;
                isLoaded = true;
            }
            else isLoaded = false;
        }
    }
    catch (Exception)
    {
        isLoaded = false;
    }
    return isLoaded;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:04:51.440

好的，您的错误是您逐行加密数据并尝试将其作为一个整体解密。

Base64 将每 3 个字节转换为 4 个字符。如果输入数据不是 3 字节的倍数，则编码添加 1 或 2 个零字节作为填充。然后在流的末尾用一两个“=”字符表示这一点。

现在，如果您尝试解码多个连接的代码块，您很可能在流中包含“=”字符，这是非法的。

解决方案：重写您的 Save-Method 以首先将所有 xml-entities 存储在一个大字符串/内存块中（使用 StringBuilder 或写入 MemoryStream），然后立即对整个数据块使用您的加密方法。

# c - 如何破解 C Linux 中的间歇性 bug？

> ID：11709752
> 
> 赞同：2
> 
> 时间：2012-07-29T13:49:36.300
> 
> 标签：c, linux, debugging

关于如何破解这个错误，我已经没有好主意了。我有 1000 行代码，每运行 2 或 3 次就会崩溃。它目前是一个用 C 编写的原型命令行应用程序。一个问题是它是专有的，我不能给你源代码，但我很乐意将调试编译的可执行文件发送给 Debian Squeeze x86_64 机器上的任何勇敢的灵魂。

这是我到目前为止得到的：

1.  当我在 GDB 中运行它时，它总是成功完成。

2.  当我在 Valgrind 中运行它时，它总是成功完成。

3.  这个问题似乎源于一个非常基本的递归函数调用。为了找出这个递归函数中的错误，我在一个单独的应用程序中编写了相同的函数。它总是成功完成。

4.  我构建了自己的 gcc 4.7.1 编译器，用它编译了我的代码，但我仍然得到相同的行为。

5.  将我的应用程序转移到另一台机器上以消除硬件问题的风险，我仍然得到相同的行为。

6.  将我的源代码 FT 转移到另一台机器上，以消除构建环境损坏的风险，但我仍然得到相同的行为。

该应用程序是单线程的，并且不进行可能导致竞争条件的信号处理。我`memset(,0,)`都是大物件

没有外来依赖，ldd 如下。

ldd 给了我这个：

```
ldd tst 
    linux-vdso.so.1 =>  (0x00007fff08bf0000)
    libpthread.so.0 => /lib/libpthread.so.0 (0x00007fe8c65cd000)
    libm.so.6 => /lib/libm.so.6 (0x00007fe8c634b000)
    libc.so.6 => /lib/libc.so.6 (0x00007fe8c5fe8000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fe8c67fc000) 
```

有什么工具可以帮助我吗？如果你处于我的位置，你的下一步是什么？

谢谢！

这就是让我朝着正确方向前进的原因 - Wextra 我已经使用过 -Wall。

谢谢！！！这真的让我发疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:05:41.703

我在评论中建议：

*   编译`-Wall -Wextra` 和改进源代码，直到没有给出警告；
*   同时编译`-g`和`-O`; 这有助于检查转储的核心文件（您可能希望使用内置的 bash`gdb`设置足够大的 coredump 大小限制）`ulimit`
*   向同事展示您的代码并解释问题？
*   使用`ltrace` 或`strace`

显然`-Wextra`是有帮助的。很高兴了解为什么以及如何。

[顺便说一句，对于较大的程序，您甚至可以通过使用MELT](http://gcc-melt.org/)扩展它来向 GCC 添加自己的警告；这可能需要几天时间，而且主要在大型项目中是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:28:52.070

在这种情况下，我认为您有一些内存问题（仔细查看 valgrind 的输出），导致 GDB 和 valgrind 通过添加一些内存跟踪功能来更改原始程序（因此您的原始地址被更改）。您可以使用选项编译`-ggdb`并设置 coredump ( `ulimit -c unlimited`)，然后尝试分析发生了什么。此链接可以帮助您：

[http://en.wikipedia.org/wiki/Unusual_software_bug](http://en.wikipedia.org/wiki/Unusual_software_bug)

问候。

# objective-c - 如何在 NSUserDefaults 中保存 NSI nteger

> ID：11709753
> 
> 赞同：0
> 
> 时间：2012-07-29T13:49:53.037
> 
> 标签：objective-c, nsuserdefaults, nsinteger

我正在尝试将 NSInteger （标签）保存到 NSUserDefaults 但我还没有找到一种方法来做到这一点，甚至可能

保存数据

```
[[NSUserDefaults standardUserDefaults] setInteger:label forKey:@"key1"]; 
```

检索数据

```
- (void)viewDidLoad {
label = [[NSUserDefaults standardUserDefaults] integerForKey:@"key1"];
[super viewDidLoad]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T13:56:25.610

我想你忘记了`synchronize`你的设置。尝试这个：

```
[[NSUserDefaults standardUserDefaults] setInteger:label forKey:@"key1"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T13:54:03.723

你正在做的工作完美

```
[[NSUserDefaults standardUserDefaults] setInteger:HighScore forKey:@"HighScore"];

NSInteger highScore = [[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]; 
```

重复： [如何将整数保存到 NSUserDefaults？](https://stackoverflow.com/questions/1482097/iphone-sdk-save-a-integer-to-nsuserdefaults)

阅读有关此主题的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)，您似乎不了解 NSUserDefaults

# c# - 无法根据用户单击的内容检索产品名称

> ID：11709755
> 
> 赞同：1
> 
> 时间：2012-07-29T13:50:04.817
> 
> 标签：c#, asp.net, sql

我正在检索我的列表的一个值并将其存储在标签中。将其存储在标签中后，我会将标签会话到另一个页面。但是，我正在检索的值必须根据用户单击的内容。例如，用户单击我网页中的第二个产品。所以第二个产品的名称必须是会话到下一页。

我的问题是我设法检索了这些值，但这不是根据用户点击的内容。我的标签的输出结果是所有不是我想要的产品名称。我哪里出错了？

这是我的 .cs 代码：

```
string strConnectionString = ConfigurationManager.ConnectionStrings["PRODUCTSConnectionString"].ConnectionString;

    SqlConnection myConnect = new SqlConnection(strConnectionString);

    string strCommandText = "SELECT productName from Products";
    SqlCommand cmd = new SqlCommand(strCommandText, myConnect);

    myConnect.Open();
    SqlDataReader reader = cmd.ExecuteReader();

    Label1.Text = "";

    while (reader.Read())
    {
        Label1.Text += reader["productName"].ToString() + "<br/>";
    }

    reader.Close();
    myConnect.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:53:53.613

您想要捕获用户选择的产品的唯一标识符（例如您的主键），然后将 WHERE 子句添加到您的 SELECT 语句中，以过滤该产品 ID。目前，您的 SELECT 语句正在检索表中所有产品的产品名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:12:28.950

如果您期望数据库中有一种产品，您可以将其更改`while`为`if`

```
string strCommandText = "SELECT productName from Products WHERE productID=@ProductID";
SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
cmd.Parameters.AddWithValues("@ProductID", productID);
...

if(reader.Read())
{
  //Label1.Text += reader["productName"].ToString();
  Label1.Text = reader["productName"].ToString();
} 
```

但我认为 ProductID 应该是唯一的

# javascript - 如何在飞机的正面和背面放置两种不同的纹理？

> ID：11709760
> 
> 赞同：10
> 
> 时间：2012-07-29T13:50:42.087
> 
> 标签：javascript, textures, three.js

问题：我正在尝试创建（只是为了好玩）一张简单的扑克牌（背面有卡片，正面有卡片）。我有两个不同的图像，用于背面和正面。我很容易地为双方创建了一个带有单个纹理的平面几何图形，但我真的不知道如何为一侧分配一个纹理，为另一侧分配另一个纹理......我试过这个（没有成功:(）：

```
var textureBack = new THREE.ImageUtils.loadTexture( 'images/cardBack.png' );
var textureFront = new THREE.ImageUtils.loadTexture( 'images/cardFront.png' );      

var material1 = new THREE.MeshBasicMaterial( { map: textureBack } );
var material2 = new THREE.MeshBasicMaterial( { map: textureFront } );

var geometry = new THREE.PlaneGeometry( 90, 110, 1, 1 );            
geometry.faces[ 0 ].materials.push( material1 );
geometry.faces[ 1 ].materials.push( material2 );

var card = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial()); 
```

有什么帮助吗？:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-11T20:17:08.193

在不复制我所有的几何图形的情况下寻找解决方案。

来了，女士们，先生们……

```
var materials = [new THREE.MeshBasicMaterial({map: texture, side: THREE.FrontSide}),
                 new THREE.MeshBasicMaterial({map: textureBack, side: THREE.BackSide})];

var geometry = new THREE.PlaneGeometry(width, height);

for (var i = 0, len = geometry.faces.length; i < len; i++) {
    var face = geometry.faces[i].clone();
    face.materialIndex = 1;
    geometry.faces.push(face);
    geometry.faceVertexUvs[0].push(geometry.faceVertexUvs[0][i].slice(0));
}

scene.add(new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials))); 
```

BOOM 一个两面平面，循环也适用于具有更多面的几何图形，复制每个面并对其应用 BackSide 纹理。

享受！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T18:29:28.763

您需要背靠背放置两个平面几何图形。

首先，为前面创建一个几何图形。

```
var geometry1 = new THREE.PlaneGeometry( 90, 110, 1, 1 ); 
```

现在为背面创建另一个几何图形。

```
var geometry2 = new THREE.PlaneGeometry( 90, 110, 1, 1 ); 
```

旋转 180 度。

```
geometry2.applyMatrix( new THREE.Matrix4().makeRotationY( Math.PI ) ); 
```

加载材质后，创建网格并将它们添加为“卡片”对象的子对象。

```
// textures
var textureFront = new THREE.ImageUtils.loadTexture('images/cardFront.png' );      
var textureBack = new THREE.ImageUtils.loadTexture('images/cardBack.png' );

// material
var material1 = new THREE.MeshBasicMaterial( { color: 0xffffff, map: textureFront } );
var material2 = new THREE.MeshBasicMaterial( { color: 0xffffff, map: textureBack } );

// card
card = new THREE.Object3D();
scene.add( card );

// mesh
mesh1 = new THREE.Mesh( geometry1, material1 );
card.add( mesh1 );
mesh2 = new THREE.Mesh( geometry2, material2 );
card.add( mesh2 ); 
```

如果您使用`WebGLRenderer`.

小提琴：http: [//jsfiddle.net/mdAb7/11/](http://jsfiddle.net/mdAb7/11/)

更新到three.js r.69

# iphone - 类错误的编码解码 int 属性

> ID：11709767
> 
> 赞同：0
> 
> 时间：2012-07-29T13:51:28.420
> 
> 标签：iphone, ios, decode, encode

```
@interface Esame : NSObject{
    NSString *nome;
    int voto;
    int crediti;
    int anno;
}

@property (nonatomic, retain) NSString *nome;

- (id)initWithNome:(NSString*)nome voto:(int)voto crediti:(int)crediti anno:(int)anno;

@end 
```

这是我的实现

```
#import "Esame.h"

@implementation Esame

@synthesize nome;

- (id)initWithNome:(NSString*)name voto:(int)voto crediti:(int)crediti anno:(int)anno {
    if ((self = [super init])) {
        self.nome = name;

    }
    return self;
}

- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {

        nome = [decoder decodeObjectForKey:@"nome"] ;
        voto = [decoder decodeIntForKey:@"voto"];
        crediti = [decoder decodeIntForKey:@"crediti"];
        anno = [decoder decodeIntForKey:@"anno"];

    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {

    if (nome) [encoder encodeObject:nome forKey:@"nome"];

    if (voto) [encoder encodeInt:voto forKey:@"voto"];
    if (crediti) [encoder encodeInt:crediti forKey:@"crediti"];
    if (anno) [encoder encodeInt:anno forKey:@"anno"];

}

@end 
```

我收到了同样奇怪的错误……特别是在 NSString 中……出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:56:57.047

`encodeInt:`尝试在您的;之前删除您的条件。您可能应该始终对所有成员进行编码。此外，您可能应该声明您符合 NSCoding with `@interface Esame : NSObject<NSCoding>`.

如果这不起作用，请尝试发布您看到的错误消息。

# git - 如何在 aptanas 项目视图中显示 .git 目录

> ID：11709768
> 
> 赞同：3
> 
> 时间：2012-07-29T13:51:42.120
> 
> 标签：git, aptana

[关于如何在 aptanas 项目视图中显示隐藏文件](https://stackoverflow.com/questions/2166755/how-to-show-hidden-files-in-aptanas-project-view)的 stackoverflow 答案在 Aptana Studio 3 中效果很好，但它仍然没有在项目视图中显示 .git 目录。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:49:33.353

在**项目视图**中单击窗格右上角的白色向下箭头（视图菜单）

![在此处输入图像描述](../Images/7c13397460e42d26696ae0bf03863735.png)

然后**自定义视图...**

取消选择**.* 资源**过滤器（如果您还想查看 .htaccess 等，还可以取消选择**.* 文件）**

![在此处输入图像描述](../Images/d85cbd97c1d8b673ed6714da0fd2aeea.png)

你的 .git 目录就会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T15:49:36.090

也许您看不到它，因为您在*Team*菜单中为该*Project*启用了*Project Sharing*。我发现查看该文件夹的唯一方法是从*团队*菜单中*断开连接。***`.git`**

# javascript - Javascript 加载

> ID：11709774
> 
> 赞同：1
> 
> 时间：2012-07-29T13:52:32.493
> 
> 标签：javascript, twitter, loading

我注意到一个错误，几天前 Twitter 关闭了大约 20 分钟。在某些浏览器中，我的页面不会完全加载，因为它无法加载 twitter 提要。当然，我不希望我的正常运行时间取决于 Twitter 的正常运行时间，所以我想解决这个问题。当我检查我的 wordpress 主题的代码时，我发现它正在页面中间加载 javascript。这就是为什么它可能被卡住了，因为它无法下载正确的文件？这是代码：

```
<a href="http://twitter.com/<?php echo $username ?>" class="twitter-link"></a>
            <script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
            <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/<?php echo $username ?>.json?callback=twitterCallback2&amp;count=<?php echo $postcount ?>"></script> 
```

当然，这个小部件还有很多代码，但我相信这是重要的部分。我可以将其拆分为在页面底部完成加载吗？这样访问者仍然可以看到我的网页，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:23:11.167

您可以尝试将`async`或`defer`属性添加到您的`<script>`元素。

例如

```
<script async src="..."></script> 
```

或者

```
<script defer src="..."></script> 
```

如果您更喜欢 XHTML：

```
<script async="async" src="..."></script> 
```

或者

```
<script defer="defer" src="..."></script> 
```

# sql - 具有多个值的 oracle 解码

> ID：11709787
> 
> 赞同：0
> 
> 时间：2012-07-29T13:54:35.207
> 
> 标签：sql, oracle

我想像下面的查询一样解码值：

```
select id,
       name,
       val 
  from table1 
 where id in (decode(1,0,0,1,('''4'',''5'',''6'''))); 
```

但我没有得到任何记录（记录实际上是可用的）。解码功能`('''4'',''5'',''6''')`会起作用吗？

我试过但没有工作。有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:58:17.493

我不确定我明白你在问什么。我最好的猜测是你想返回一个集合。例如，如果您定义一个`NUM_TBL`集合

```
CREATE TYPE num_tbl IS TABLE OF NUMBER; 
```

然后你可以做这样的事情，你`DECODE`返回一个数字集合

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select level id
  3      from dual
  4   connect by level <= 10 )
  5  select *
  6    from x
  7   where id in (select *
  8*                 from table(decode( 1, 0, num_tbl(0), 1, num_tbl(2,3,4) )))
SQL> /

        ID
----------
         2
         3
         4 
```

# erlang - 在 Erlang 中将 1 GB XML 文件转换为 ets 和 dets

> ID：11709793
> 
> 赞同：2
> 
> 时间：2012-07-29T13:55:20.040
> 
> 标签：erlang

我需要使用 ets 和 dets 从 1 GB XML 文件中提取一些数据到表中。我搜索了整个网络，也在这里搜索，但我没有找到任何关于如何处理大 XML 文件的简单示例。一开始我只想了解如何在不将整个文件上传到内存的情况下读取文件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T08:33:03.993

来吧 ！您需要的是一个名为[Erlsom的](http://erlsom.sourceforge.net/erlsom.htm#sax_mode)[SAX XML 解析器](http://en.wikipedia.org/wiki/Simple_API_for_XML)。对于小文件，可以将其全部加载到内存中，然后按照我对这个[问题的](https://stackoverflow.com/q/9663579/431620)[回答](https://stackoverflow.com/a/9663655/431620)进行解析。但是，对于您的情况，这些大文件需要 SAX 方法。萨克斯的例子在[这里](http://erlsom.sourceforge.net/erlsom.htm#sax_mode)。SAX 确保您不会将文件加载到内存中来解析它。解析器得到的令牌就是它给你的。您将需要尾递归、模式匹配和有状态编程的高级技能。**编辑**

* * *

**现在，[下载 erlsom](https://github.com/edwardw/erlsom)并将其解压缩到您的 erlang`lib`中，这是所有内置应用程序所在的位置。像这样重命名其提取文件夹：`erlsom-1.0`. 在文件夹中创建一个名为：`Emakefile`的`erlsom-1.0`文件。将其放入该文件并保存。

```
{“src/*”，[详细，报告，warn_obsolete_guard，{outdir，“ebin”}]}。

```

erlsom-1.0 文件夹应如下所示：

```
erlsom-1.0 
|-doc/ 
|-ebin/ 
|-examples/ 
|-include/ 
|-src/ 
|-Emakefile

```

其他文件的其余部分无关紧要。现在，打开一个`pwd()`正在查看`erlsom-1.0`文件夹的 erlang shell。运行函数：`make:all().`像这样

```
Eshell V5.9（使用 ^G 中止）
1> 制作：全部（）。
重新编译：src/ucs
重新编译：src/erlsom_writeHrl
重新编译：src/erlsom_write
重新编译：src/erlsom_ucs
重新编译：src/erlsom_simple_form
重新编译：src/erlsom_sax_utf8
重新编译：src/erlsom_sax_utf16le
重新编译：src/erlsom_sax_utf16be
重新编译：src/erlsom_sax_list
重新编译：src/erlsom_sax_lib
重新编译：src/erlsom_sax_latin1
重新编译：src/erlsom_sax
重新编译：src/erlsom_pass2
重新编译：src/erlsom_parseXsd
重新编译：src/erlsom_parse
重新编译：src/erlsom_lib
重新编译：src/erlsom_compile
重新编译：src/erlsom_add
重新编译：src/erlsom
最新
2>

```

所以，它完成了。因此，如果该文件夹`erlsom-1.0`在您的 erlang`lib`中，那么您可以从任何 erlang shell 中调用 erlsom 方法，无论`pwd()`它可能有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:31:18.477

你检查过[xmerl 库](http://www.erlang.org/doc/apps/xmerl/index.html)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T07:27:46.773

要读取大文件而不将其完全加载到内存中，您可以使用[file:open/2](http://www.erlang.org/doc/man/file.html#open-2)，执行以下操作：

```
 {ok, FileHandler} = file:open(File, [read, raw, read_ahead]),
 {ok, Line} = file:read_line(FileHandler) 
```

此外，为了使用 XML，在 Erlang 中你有 xmerl，不幸的是，它的文档记录很差。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-29T14:21:06.083

我不知道Erlang，但似乎可以集成C库。如果你愿意走这条路，我可以建议你看看[expat](http://expat.sourceforge.net/)库。这是我所知道的快速、轻量级的 xml 解析器库。一个简单的回调机制调用您的每个 xml 元素的代码，您可以自己决定是将它保留在内存中还是跳过它。

我知道，这是非常低级的。但遗憾的是，对于非常大的数据，这通常是唯一的方法。

这是我在谷歌上找到的东西：http: [//dudefrommangalore.blogspot.de/2009/04/erlang-xml-parser-comparison.html](http://dudefrommangalore.blogspot.de/2009/04/erlang-xml-parser-comparison.html)**

# tridion - Tridion 核心服务能否收到数据更改的通知？

> ID：11709803
> 
> 赞同：5
> 
> 时间：2012-07-29T13:57:02.037
> 
> 标签：tridion

我正在为一些不想改变他们的编码风格（包括我）并想要实现对象缓存的懒惰程序员实现一个核心服务“门面”，这显然会导致“多久和多少”的大问题我应该缓存”。

理想的答案是永久缓存，除非数据更改。

有没有办法（可能通过一些 WCF 事件）为可用于从缓存中删除项目的数据更改实现“侦听器”？

顺便说一句，我现在使用 .NET 的本机 ObjectCache (MemoryCache) 和 1 分钟的滑动缓存策略。

谢谢，

ñ

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T14:11:01.683

我所知道的 WCF 或 Tridion 中都没有内置这样的系统。

你当然可以自己动手，你可以：

1.  使用 Event Handlers 监听 TCM 服务器上相关数据的变化
2.  让这些事件处理程序将事件转发到中央通知服务器
3.  让您的 WCF 客户端在启动时向该通知服务器注册
4.  让通知服务器随后将通知发送到连接的客户端

这本质上与 Tridion 的 Broker Object Cache 在内容交付层上的工作方式非常相似。

如果您对实现这种方法感兴趣，我建议您查看[Signalr 项目](https://github.com/SignalR/SignalR/)，它可以省去很多麻烦。

* * *

**编辑**：事实证明 WCF 具有类似于您所要求的称为回调的东西。请参阅[此问题](https://stackoverflow.com/questions/721708/wpf-wcf-push-notification)和[此博客文章](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)。

# php - WordPress首页或内页的条件语句

> ID：11709805
> 
> 赞同：0
> 
> 时间：2012-07-29T13:57:54.407
> 
> 标签：php, html, wordpress, wordpress-theming

我需要有关 wordpress 模板的帮助。

在首页我想要一个自定义的静态标题，而所有其他页面都应该使用他们页面的标题。此外，如果页面不是首页，我想在标题旁边添加一些自定义 HTML。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:07:57.113

您可以这样做，包括 header.php 中的以下内容（我刚刚添加了一些示例内容）；

```
 <?php 
             if ( is_front_page() ) { 
                echo '<div id="homestuff">Home stuff in here</div>';
              } elseif (is_page()) { 
                echo '<div id="pagestuff">'. the_title() .'</div>'; 
              } 
        ?> 
```

请注意，Wordpress 中还有一个 is_home() ，有时很容易纠结 is_front_page() 或 is_home() 是否正确使用，这个 stackexchange 答案是一个很好的信息来源那;

[在 Wordpress 中是否使用 is_front_page() 或 is_home()](https://wordpress.stackexchange.com/questions/30385/when-to-use-is-home-vs-is-front-page)

# java - 使用类别作为特征的线性回归

> ID：11709808
> 
> 赞同：5
> 
> 时间：2012-07-29T13:58:22.720
> 
> 标签：java, algorithm, machine-learning, artificial-intelligence

我正在尝试建立一个线性回归模型，但我的一些特征不是数字的，例如“汽车颜色”，而其他的是例如“发动机尺寸”。在非数字情况下，我不确定在添加为输入特征时如何表示。我能想到的唯一方法是用不同的值表示每种颜色，例如（红色= 1，蓝色= 2，绿色= 3 ...）但这似乎不可接受，因为这意味着绿色是“比红色更好。

任何人都可以帮忙......我正在用Java实现这个，所以我很欣赏用这种语言表达的算法或独立于语言的算法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T14:24:39.963

一种方法是使用**虚拟编码**，另一种技术是**效果编码**。

请参阅这篇文章了解更多详细信息，我认为作者的解释比我在这里可以做的更好。

[回归模型中的分类变量编码：Resmi Gupta 的虚拟和效果编码](http://www.cscu.cornell.edu/news/statnews/stnews72.pdf)

我想这个解决方案将属于您的语言独立类别；）

对汽车颜色进行编码（我假设汽车颜色只能取 3 个值：红色、蓝色、绿色）

您可以按如下方式对其进行编码：

```
Color  Dummy_Var_One  Dummy_Var_Two

Red        1              0
Blue       0              1
Green      0              0 
```

在上表`Green`中将成为参考水平。在您的情况下，如果您的颜色`n`取值，您将需要包含`n-1`虚拟变量。

可以在[Weka](http://www.cs.waikato.ac.nz/ml/weka/)过滤器[NominalToBinary](http://weka.sourceforge.net/doc/weka/filters/supervised/attribute/NominalToBinary.html)中找到 Java 中的实现，尽管这将为类别创建`n`变量。`n`

# objective-c - UITextField.Text 内容在按下 UIButton 后消失

> ID：11709810
> 
> 赞同：0
> 
> 时间：2012-07-29T13:58:34.637
> 
> 标签：objective-c, ios, uitextfield

我有一个 UITextField，其中填充了从预定义的 UIPickerView 中选择的值。从选择器中选择的值工作正常，并且选定的值被分配给 TextField 的 .text。该视图还有一个 UIButton，它对 TextField 的内容执行验证。当按下按钮并通过 UIAlert 显示警告时，按下 OK 后，从选取器设置的 TextField 的内容将被清除。用户通过键盘输入值设置的其他 TextField 都可以正常工作，并且不会被清除。

任何人都可以建议为什么当我按下按钮并触发其操作时，为什么这种带有 Picker 的 TextField 样式会被清除以选择 .text 值？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:02:36.533

我自己无意中清除了 textField 内容；

```
if ((self.myTextField.text = @"something")) {
} 
```

代替;

```
if ([self.myTextField.text isEqualToString:@"something"]) {
} 
```

# android - 从 SettingsPreferenceFragment 获取视图

> ID：11709811
> 
> 赞同：1
> 
> 时间：2012-07-29T13:58:36.530
> 
> 标签：android, android-preferences

我正在尝试向 androids settings.apk 添加查看日志选项，但遇到了一些困难。我已经在一个独立的测试应用程序中对其进行了测试，它运行良好。但是，将其添加到 SettingsPreferenceFragment 时，我遇到了一些问题。我需要获取当前布局的实例才能添加带有日志内容的 TextView。

```
LinearLayout layout = ???

......

layout.addView(myTextView); 
```

或者我应该创建一个新的布局，并且？？？

# c++ - 数组中有多个变量类型

> ID：11709812
> 
> 赞同：0
> 
> 时间：2012-07-29T13:58:44.220
> 
> 标签：c++, arrays, variables

我正忙于一个动态二维数组，我已将其声明如下：

```
string** MakeArray(int row,int col)
{
    string** array;
    array = new string* [col];

    for(int r = 0; r < row; r++)
    {
        array[r] = new string [col];
    }
    return array;
} 
```

现在我可以将字符串值放入数组中。如果我的数组是 4 x 99，如何将整数值放在第一列，将字符串放在第二列，将整数放在第三列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T14:02:38.567

数组中的元素都是相同的类型。为了得到你所追求的，你可能想从一个不同的开始，使用一个结构数组：

```
struct whatever { 
    int a;
    std::string b;
    int c;
};

std::vector<whatever> your_array; 
```

编辑：虽然这几乎可以肯定是一个糟糕的想法，但如果你*真的*需要它是一个二维数组，你可以尝试让你的所有元素成为相同类型的联合：

```
union whatever { 
    int a;
    std::string b;
}; 
```

不过，这有一些非常严重的限制——事实上，将 a`std::string`放入联合中根本没有得到官方支持。它很有可能会起作用，但根本不能保证。如果你真的，真的需要做这样的事情，你可以让联合的成员成为一个指针。这保证有效，但也保证如此笨拙以至于犯错几乎是不可避免的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T14:03:16.217

不要那样做。而是创建一个结构来表示表中的单个记录，并包含一个字符串和两个整数。然后创建这些结构的一维数组。

```
struct record
{
    int a;
    std::string b;
    int c;
};

record* MakeArray(int row)
{
    return new record[row];
} 
```

更好的是，抛弃数组并使用 std::vector：

```
std::vector<record> array(99); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:07:48.753

如果您有可用的 C++11，您是否看过元组的向量/数组？因此，您可以执行以下操作：

```
#include <tuple>
#include <vector>

typedef std::tuple<int, std::string, int> MyTuple;

std::vector<MyTuple> MakeVector()
{
    std::vector<MyTuple> vecTuples;

     for( int i = 0; i < 5; ++i )
     {
         vecTuples.emplace_back( std::make_tuple<int, std::string, int>( i, "Test"+i, i+5 ) );
     }

     return vecTuples;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T14:01:22.097

C++ 是一种“强类型”语言。这意味着您不能混合数据类型（除非它们是相关的，例如基派生类层次关系）。

换句话说，您所做的不是 C++ 直接支持的。

话虽如此，您可以做一些事情来做您想做的事情-拥有一系列*三元组*，如下所示：

```
struct triplet
{
  int first;
  string second;
  int third;
};

triplet** MakeArray(... 
```

不过，您在示例中所做的看起来很像 JS 代码。也许您想要的是将*所有数据*存储为字符串？那么是的，您可以使用二维字符串数组，但这**需要**您在存储数据时将数据转换为字符串并从字符串转换回来进行计算。这是一个主要的性能问题

# javascript - 根据 jquery 对话框调整 textarea 的大小

> ID：11709815
> 
> 赞同：2
> 
> 时间：2012-07-29T13:59:13.923
> 
> 标签：javascript, jquery, css

我是 CSS 新手。我有一个 jquery 对话框，里面有一个简单的 textarea，点击一个按钮就会弹出。在弹出带有 textarea 的对话框后，如果我调整 jquery dialog 的大小，我希望 textarea 也可以相对于对话框调整大小。我该如何处理？我们是否有任何 css 属性供它指定？下面是按钮点击事件代码，

```
 function clickButton(){
      var dlg = $('<div style=width:500;> <textarea style=width:400> Sample text area       </textarea> </div>');
      dlg.dialog({
      width:600
     });
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:01:56.100

在 textarea 上使用百分比宽度而不是像素宽度。下面的`90%`（任意选择，随心所欲）是相对于`500px`对话框的大小，所以如果它被调整大小，textarea 将随之缩放。

```
var dlg = $('<div style="width:500px;"> <textarea style="width:90%;">Sample text area</textarea> </div>'); 
```

作为一种良好做法并确保有效的 HTML 和 CSS，请养成引用 html 属性并明确指定`px`像素大小的习惯，如下所示：

```
<div style="width:500px;" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:04:07.713

`% width`在 the 上使用 a`textarea`并将其设置`box-sizing`为`border-box`使`borders`和`padding`包含在`width`.

```
<textarea style="width:100%; box-sizing:border-box;"></textarea> 
```

# sencha-touch-2 - 如何将元素添加到商店的开头

> ID：11709816
> 
> 赞同：0
> 
> 时间：2012-07-29T13:59:35.233
> 
> 标签：sencha-touch-2

add 方法将 menuPoint 添加到商店的末尾，如何将其添加到开头？浏览了商店文档中的所有方法，但找不到将元素放在商店开头的方法。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store)

```
var store =  Ext.getStore('AdultMenuStore');//adultmenulist.getStore();
    for(var i=0; i < adultObj.children.length; i++){
    var child = adultObj.children[i];
    var menuPoint = Ext.create('Sencha.model.MenuPoint', 
        {
            id: child.childId, 
            name: child.firstName, 
            icon_url: 'http://kidsparent.no/images/adultMenu/bkids-home-profile.png', xtype: 'childmenu'
        });
        store.add(menuPoint);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:30:56.257

只需使用`insert`方法：

```
insert( Number index, Ext.data.Model[] records ) 
```

# arduino - 使用 Arduino 读取媒体访问控制 (MAC)

> ID：11709823
> 
> 赞同：1
> 
> 时间：2012-07-29T14:01:48.630
> 
> 标签：arduino, ethernet

是否可以从以太网 Arduino 读取媒体访问控制字符串？我想阅读它并将其用作散列算法的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:11:39.290

不仅仅是阅读它，你应该设置它。从[文档](http://arduino.cc/en/Guide/ArduinoEthernetShield/)：

“必须使用 Ethernet.begin() 函数为屏蔽分配 MAC 地址和固定 IP 地址。MAC 地址是特定设备的全局唯一标识符。当前的**以太网屏蔽带有标签，指示您应该使用的 MAC 地址**跟他们。”

我想您使用的是 Eth shield，但是对于[以太网板](http://arduino.cc/en/Main/ArduinoBoardEthernet)，它应该是相同的。您可以使用**印在板上的 MAC 地址**或自定义的 MAC 地址，您可以自由决定。只是不要对不同的板使用相同的地址：

```
byte mac[] = {  0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
// start the Ethernet connection:
if (Ethernet.begin(mac) == 0) {
  Serial.println("Failed to configure Ethernet using DHCP");
  // no point in carrying on, so do nothing forevermore:
  for(;;)
   ;
} 
```

# php - 自动提交表单

> ID：11709826
> 
> 赞同：0
> 
> 时间：2012-07-29T14:01:58.557
> 
> 标签：php, javascript, javascript-events

我有这个表格进入php页面：

```
echo "<form action=\"xxx.php\" method=\"post\" id=\"test\" name=\"test\">
 <input type=\"submit\" name=\"oooo\" value=\"Sincronizza\"> 
</form>"; 
```

最重要的是，我有这个用于自动提交的 javascript：

```
<script type='text/javascript'>
<!-- 
function send() {
var objForm = document.getElementById('test');
objForm.action='xxx.php';
objForm.submit();
}

window.setTimeout('send()', 5000)

//--> 
</script> 
```

不幸的是，脚本会启动刷新页面而不是自动提交。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:25:11.790

使用 JavaScript 提交，submit-input 标签的值是不贴出来的。一种解决方案可能是在表单中包含隐藏类型输入：

```
<input type="hidden" name="oooo" value="Sincronizza"> 
```

# silverlight - HttpWebRequest.BeginGetResponse 是否在 WP7 或 Silverlight 的线程池中使用阻塞 GetResponse？

> ID：11709827
> 
> 赞同：0
> 
> 时间：2012-07-29T14:02:07.773
> 
> 标签：silverlight, windows-phone-7, http, rest, networking

我正在将使用 REST API 的 Android 应用程序移植到 WP7 平台。

在 Android 中，所有 REST API 调用都是阻塞的，我手动使用 Executors 来平衡执行网络 I/O 的线程。

在 WP7 和 Silverlight 中，我必须使用 HttpWebRequest.BeginGetResponse 并且它只有读取响应的异步变体。

是吗：

1) 使用 I/O 异步完成之类的东西，它真的是异步的吗？或2）只是在它后面的+线程内部使用阻塞读/写操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:47:04.830

我刚刚使用反射器检查了源代码，它是在线程池上执行的阻塞调用。

```
public override IAsyncResult BeginGetResponse(AsyncCallback callback, object state)
{
    this.startGetResponse();
    LazyAsyncResult result = new LazyAsyncResult(this, state, callback);
    if (!ThreadPool.QueueUserWorkItem(new WaitCallback(this.asyncGetResponse), result, true))
    {
        throw new OutOfMemoryException(SR.GetString(0x49, new object[0]));
    }
    return result;
} 
```

# ruby-on-rails - 撬和撬轨的区别

> ID：11709837
> 
> 赞同：9
> 
> 时间：2012-07-29T14:03:35.977
> 
> 标签：ruby-on-rails, ruby, pry

pry gem 和 pry-rails gem 有什么区别（实施方式）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T14:09:32.380

比较它们的实现是没有意义的，因为它们是两个不同的东西：一个 IRb 替代方案和一个使前者成为 Rails 控制台的插件。

pry-rails gem 只是[添加了一个初始化程序](https://github.com/rweng/pry-rails/blob/master/lib/pry-rails/railtie.rb)来将 Rails 控制台更改为 Pry，并添加一些特定于 Rails 的[Pry 命令。](https://github.com/rweng/pry-rails/blob/master/lib/pry-rails/commands.rb)Pry-rails 依赖于 Pry，没有理由不能在没有 Pry-rails 的情况下将 Pry 与 Rails 一起使用，它只是让它变得更容易。

# arrays - 带有向量输入的 structfun

> ID：11709838
> 
> 赞同：0
> 
> 时间：2012-07-29T14:03:36.867
> 
> 标签：arrays, matlab, struct, histogram

我有一个结构：many(i).fincomp，其中每一个都是 (200x1) 我想为每个“i”创建一个直方图计数：histc(many(i).fincomp,1:12) <-这有效

```
>>histmany = structfun(@(x)histc(x.fincomp,1:12),many, 'UniformOutput', false); 
Error using structfun 
Inputs to STRUCTFUN must be scalar structures. 
```

我究竟做错了什么？

我也试过 arrayfun

注：部分数据为 NaN，其余为数字

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:18:09.007

你不应该使用`structfun`，因为`many`它不是一个结构。使用`arrayfun`或`cellfun`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:25:25.650

通过将结构数组转换为矩阵，您可以完全放弃 ARRAYFUN 循环。HISTC 可以对矩阵进行操作（沿第一个非单一维度工作，即此处的列）：

```
histmany = histc(horzcat(many.fincomp), 1:12); 
```

我用这个简单的例子来测试它：

```
many = struct();
for i=1:10
    many(i).fincomp = randn(200,1);
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:38:47.197

如果`fincomp`字段包含相同大小的列向量，您可以将所有字段放入一个矩阵中：

```
data = [many.fincomp];

histc(data); 
```

# html - 在链接标签上使用非标准 rel 属性的缺点

> ID：11709839
> 
> 赞同：1
> 
> 时间：2012-07-29T14:03:37.643
> 
> 标签：html, seo

我想知道：如果我在我的页面中放一个这样的链接标签：

```
<link href="/path/to/template.mustache" rel="template" /> 
```

因此，对链接标签元素使用无效的 rel 属性，这是否会在以后出现并在屁股上咬我（如 SEO 问题、IE 中的渲染问题等），或者它只会创建一些无效的 HTML？

另外，考虑到这是一个小胡子模板的链接，它会呈现页面的一小部分，使用它会更合适`rel='subsection'`吗？[除了w3schools 上提到的内容](http://www.w3schools.com/TAGS/att_a_rel.asp)之外，我找不到有关此`rel`属性的更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:46:40.447

如果您不使用 rel="nofollow" 或其他特定的 rel（如“canonical”或“me”），则没有任何缺点。rel 属性的参考在 XFN 中：[http ://gmpg.org/xfn/](http://gmpg.org/xfn/)

# web-services - CakePHP 和 RESTful 网络服务

> ID：11709841
> 
> 赞同：0
> 
> 时间：2012-07-29T14:03:51.423
> 
> 标签：web-services, cakephp-2.1

我正在尝试在 CakePHP 2.1 中开发一个简单的 web 服务。所以，我首先创建了一个数据库表：

```
CREATE TABLE IF NOT EXISTS `people` (
  `id` char(36) COLLATE utf8_bin NOT NULL,
  `first_name` varchar(100) COLLATE utf8_bin DEFAULT NULL,
  `last_name` varchar(100) COLLATE utf8_bin NOT NULL,
  `home_address` varchar(100) COLLATE utf8_bin DEFAULT NULL,
  `job_address` varchar(100) COLLATE utf8_bin DEFAULT NULL,
  `phone` varchar(20) COLLATE utf8_bin DEFAULT NULL,
  `fax` varchar(20) COLLATE utf8_bin DEFAULT NULL,
  `mail` varchar(100) COLLATE utf8_bin DEFAULT NULL,
  `birth_date` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

比我创建了一个简单的 Person 模型：

```
<?php
class Person extends AppModel {
    public $name = 'Person';
} 
```

和各自的控制器：

```
<?php
class PeopleController extends AppController {
    public $components = array('RequestHandler');

    public function index() {      
        $people = $this->Person->find('all');
        $this->set(array(
            'people' => $people,
            '_serialize' => array('person')
        ));
    }
} 
```

最后，在 routes.php 中，我映射了正确的 roote：

```
<?php
Router::mapResources('people');
Router::parseExtensions('json');
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));
Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display'));
CakePlugin::routes();
require CAKE . 'Config' . DS . 'routes.php'; 
```

但是当我尝试到达 ht_tp://localhost/cakephp/people.json 我得到：

```
<pre class="cake-error"><a href="javascript:void(0);" onclick="document.getElementById('cakeErr501541d86308c-trace').style.display = (document.getElementById('cakeErr501541d86308c-trace').style.display == 'none' ? '' : 'none');"><b>Notice</b> (8)</a>: Undefined index: person [<b>CORE\Cake\View\JsonView.php</b>, line <b>89</b>]<div id="cakeErr501541d86308c-trace" class="cake-stack-trace" style="display: none;"><a href="javascript:void(0);" onclick="document.getElementById('cakeErr501541d86308c-code').style.display = (document.getElementById('cakeErr501541d86308c-code').style.display == 'none' ? '' : 'none')">Code</a> <a href="javascript:void(0);" onclick="document.getElementById('cakeErr501541d86308c-context').style.display = (document.getElementById('cakeErr501541d86308c-context').style.display == 'none' ? '' : 'none')">Context</a><pre id="cakeErr501541d86308c-code" class="cake-code-dump" style="display: none;"><code><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;autoRender&nbsp;=&nbsp;false;</span></code>
<code><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;View&nbsp;=&nbsp;$View;</span></code>
<span class="code-highlight"><code><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;response-&gt;body($View-&gt;render($view,&nbsp;$layout));</span></code></span></pre><pre id="cakeErr501541d86308c-context" class="cake-context" style="display: none;">$view = null
$layout = null
$serialize = array(
    (int) 0 =&gt; &#039;person&#039;
)
$data = array()
$key = &#039;person&#039;</pre><pre class="stack-trace">JsonView::render() - CORE\Cake\View\JsonView.php, line 89
Controller::render() - CORE\Cake\Controller\Controller.php, line 957
Dispatcher::_invoke() - CORE\Cake\Routing\Dispatcher.php, line 193
Dispatcher::dispatch() - CORE\Cake\Routing\Dispatcher.php, line 161
[main] - APP\webroot\index.php, line 92</pre></div></pre>{"person":null} 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:00:48.460

如您所见，您得到的响应是 HTML。它所说的（当您在浏览器中打开它时）是：

```
Notice (8): Undefined index: person [CORE\Cake\View\JsonView.php, line 89]
Code Context
JsonView::render() - CORE\Cake\View\JsonView.php, line 89
Controller::render() - CORE\Cake\Controller\Controller.php, line 957
Dispatcher::_invoke() - CORE\Cake\Routing\Dispatcher.php, line 193
Dispatcher::dispatch() - CORE\Cake\Routing\Dispatcher.php, line 161
[main] - APP\webroot\index.php, line 92
{"person":null} 
```

您在数据库中是否有任何记录？还有这个方法的视图呢？它应该是这样的：

```
// app/View/People/json/index.ctp
<?php
echo json_encode(compact('people')); 
```

请注意，index.ctp 文件位于**json**子文件夹中。查看有关[JSON 和 XML 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)的书，如果有进一步的问题，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T08:24:53.503

该错误清楚地表明您设置了 $serialize，而不是 $_serialize viewVar

像您自己在代码示例中一样使用“_serialize”。

还要确保要序列化的 var 与存在的 viewVar 匹配。

你序列化 $person，而你设置 $people

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图在目标上呈现一个 nil 模态视图控制器

> ID：11709844
> 
> 赞同：0
> 
> 时间：2012-07-29T14:04:12.283
> 
> 标签：ios, objective-c

我是 iphone 新手，我试图在按下按钮时打开一个视图，在我的类“ReaderViewController”中，我编写了以下代码：

```
- (void)tappedInToolbar:(ReaderMainToolbar *)toolbar emailButton:(UIButton *)button
{
#ifdef DEBUGX
NSLog(@"%s", __FUNCTION__);
#endif

#if (READER_ENABLE_MAIL == TRUE) // Option

instantiateViewControllerWithIdentifier:@"searchView"];

if (printInteraction != nil) [printInteraction dismissAnimated:NO]; // Dismiss

SearchViewController *searchController = [self.storyboard instantiateViewControllerWithIdentifier:@"searchView"];

searchController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
searchController.modalPresentationStyle = UIModalPresentationFullScreen;

[self presentModalViewController:searchController animated:YES];

[searchController release];

#endif // end of READER_ENABLE_MAIL Option
} 
```

我想什么时候打开这个控制器“SearchViewController”的视图，在情节提要中我给 SearchViewController 的视图提供了它的标识符名称“searchView”，但是当我运行时，它给了我以下异常：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:    'Application tried to present a nil modal view controller on target <ReaderViewController: 0x6864930>.' 
```

有什么帮助吗？？先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:10:37.797

故事板中没有带有标识符的视图控制器`searchView`，因此实例化失败并且

```
instantiateViewControllerWithIdentifier: 
```

方法返回零。仔细检查您的 Storyboard 设置，并注意标识符和名称通常区分大小写，也许您命名了视图控制器`SearchView`而不是`searchView`.

也可能是这样的

```
self.storyboard 
```

本身没有正确初始化或实例化，因此为零。

**编辑**：所以你是从代码创建故事板，但实际上你不是。解决方案是手动实例化 UIStoryboard。

至于您自己的评论，您最好分配`self.storyboard = Storyboard`，否则您将继续收到这些错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:11:36.130

在我看来`self.storyboard`是`nil`。这意味着您传递给它的每条消息也会导致`nil`。

# css - 带阴影 CSS 3 的圆圈

> ID：11709850
> 
> 赞同：1
> 
> 时间：2012-07-29T14:05:39.423
> 
> 标签：css, radial-gradients

在我的网页上，我有`background: gray`，现在我需要添加一个白色阴影圈，如图所示。我的决定之一是添加`url:('../img/background.png') no-repeat gray`，但我无法连接颜色，因为图像具有垂直渐变。

我认为使用 CSS 3 可以做到这一点，对吗？

![屏幕](../Images/e28d4b008bd96d7ed442270190f54c5d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:09:22.780

那是径向渐变。

```
body {
  width: 600px;
  height: 300px;
  background-image: -o-radial-gradient(circle, #fff, #b1b5be 150px);
  background-image: -moz-radial-gradient(circle, #fff, #b1b5be 150px);
  background-image: -webkit-radial-gradient(circle, #fff, #b1b5be 150px);
  background-repeat: no-repeat;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/OCz6fTwa)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:13:09.313

您还可以通过 css 过滤器使用白色圆形图像模糊 div 来创建白色圆形阴影。

网络套件： `-webkit-filter: blur(15px);`

IE：`filter: blur(Add=1, Direction=1, Strength=15)`

在 Firefox 中通过 CSS 使用 SVG 过滤器

# facebook - 从 iPad 解决 Facebook 可疑登录问题

> ID：11709853
> 
> 赞同：2
> 
> 时间：2012-07-29T14:06:01.893
> 
> 标签：facebook, ipad, login, upload

我不确定是否有人遇到过这个问题，但这确实困扰着我并影响了我们从 iPad 上传到 Facebook 的过程。

我有一个运行 XAMMP 的本地服务器，其中包含通过本地网页显示的图像库。这些图像来自我们的 Photobooths，当在展位拍摄照片时会自动添加到画廊中。

然后可以通过 iPad 在本地网络上访问这些内容。然后用户可以登录到 facebook 并分享这些图像。

因为这是多个用户共享的 iPad，有没有什么方法可以让用户登录而无需回答安全问题？它曾经很好，但现在 Facebook 表示登录是可疑的，因为它确实识别设备。

我创建了一个应用程序来通过 Facebook 开发网站将照片发布到 facebook，它可以在我的帐户和许多用户中完美运行，但有些人似乎得到了可疑的登录尝试，并且必须识别朋友和出生日期等。

有没有正确的方法来做到这一点？

谢谢理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:42:33.053

> 有没有正确的方法来做到这一点？

你所经历*的是*“正确”的方式。

Facebook 将此作为一项安全功能提供 - 用户可以将他的设备添加到他的“已知”设备列表中，他将能够立即从这些设备登录，并且在从不同的“未知”设备登录时必须回答额外的安全问题“ 设备。

如果用户启用了此功能，他们不应该对您的场景中发生的这种情况感到惊讶。这是他们明确想要的，他们正在得到它。

因此，您绝不应该试图弄乱它，仅仅因为*您*可能认为这“不酷”或“令人讨厌”——事实并非如此，它是一种提供用户想要并明确选择的扩展安全性的功能。

# c++ - 如何在仅标头库中拥有静态数据成员？

> ID：11709859
> 
> 赞同：55
> 
> 时间：2012-07-29T14:06:41.800
> 
> 标签：c++, static-members, header-only

在非模板库类中拥有静态成员而不将定义成员的负担放在类用户身上的最佳方法是什么？

假设我想提供这个类：

```
class i_want_a_static_member
{
    static expensive_resource static_resource_;

public:
    void foo()
    {
        static_resource_.bar();
    }
}; 
```

然后该类的用户一定不要忘记在某处定义静态成员（正如已经[多次](https://stackoverflow.com/questions/3536372/defining-static-members-in-c)[回答的](https://stackoverflow.com/questions/185844/initializing-private-static-members) [那样](https://stackoverflow.com/questions/1639154/how-to-declare-a-static-const-char-in-your-header-file)）：

```
// this must be done somewhere in a translation unit
expensive_resource i_want_a_static_member::static_resource_; 
```

我在下面有一个答案，但它有一些缺点。有更好和/或更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-29T16:53:43.607

**C++17 及以上**

使用`inline static`变量进行非动态初始化：

```
struct Foo
{
    inline static int I = 0;
}; 
```

否则使用函数局部静态变量：

```
struct Foo
{
    static std::string& Bar()
    {
        static std::string S = compute();
        return S;
    }
}; 
```

**C++14 及以下**

使用函数局部静态，因为它们更容易使用。

如果出于某种原因你真的想要一个静态*数据成员*，那么你可以使用模板技巧：

```
template <typename T = void>
struct Foo
{
     static int I = 0; // inline initialization only for simple types.
};

template <typename T>
int Foo<T>::I; 
```

**关于局部静力学**

对于需要动态初始化的资源，最好使用本地静态。

动态初始化文件范围或类范围静态的顺序是未定义的，通常，当您尝试读取未初始化的静态作为另一个初始化的一部分时，会导致静态初始化顺序惨败。本地静态通过在首次使用时延迟初始化来解决问题。

然而，使用局部静态有一些轻微的开销。从 C++11 开始，初始化需要是线程安全的，这通常意味着任何访问都由原子读取和良好预测的分支控制。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-29T14:06:41.800

我自己的解决方案是使用模板化的持有者类，因为静态成员在模板中工作正常，并将这个持有者用作基类。

```
template <typename T>
struct static_holder
{
    static T static_resource_;
};

template <typename T>
T static_holder<T>::static_resource_; 
```

现在使用持有人类：

```
class expensive_resource { /*...*/ };

class i_want_a_static_member : private static_holder<expensive_resource>
{
public:
    void foo()
    {
        static_resource_.bar();
    }
}; 
```

但是由于成员的名称是在 holder 类中指定的，因此您不能将同一个 holder 用于多个静态成员。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-11-13T22:22:03.393

从 C++ 17 开始。您现在可以使用内联变量来执行此操作：

```
static const inline float foo = 1.25f; 
```

# c++ - std::tuple 到成员函数

> ID：11709861
> 
> 赞同：3
> 
> 时间：2012-07-29T14:07:12.383
> 
> 标签：c++, templates, virtual-functions, variadic-templates, iterable-unpacking

我仍在努力掌握元编程，但我很困惑。

我想做的是创建一个类/结构/任何东西，为它提供一个 std::tuple 并让它根据元组中的对象类型自动生成成员函数。目标是让类派生自`MessageHandler`

例如

```
typedef std::tuple< MessageA, MessageB, MessageC > MessageSet;

template< class T >
class MessageHandler
{
  // some magic metaprogramming would "create"...
  virtual void processMsg( const MessageA& ) = 0;
  virtual void processMsg( const MessageB& ) = 0;
  virtual void processMsg( const MessageC& ) = 0;
}; 
```

我读过你不能在模板中使用虚函数，但我不知道 C++11 是否仍然如此。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:22:23.537

答案是可变参数模板、部分特化和继承：

```
//primary template!
template<typename T>
class MessageHandler;

//variadic template, partial specialization and inheritance!
template<typename H, typename ...T>
class MessageHandler<std::tuple<H,T...>>  : public MessageHandler<std::tuple<T...>>
{
    virtual void processMsg( const H& ) = 0;
};

template<typename T>
class MessageHandler<std::tuple<T>>
{
    virtual void processMsg( const T& ) = 0;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T14:24:20.467

你不需要元组来做到这一点：

```
struct MessageA{};struct MessageB{};struct MessageC{};

template <typename T>
struct message_interface {
  virtual void processMessage(const T& t) = 0;
};

template< typename... Args >
struct message_handler : public message_interface<Args>...
{};

struct message_impl : message_handler<MessageA, MessageB, MessageC>
{
  void processMessage(const MessageA&){}
  void processMessage(const MessageB&){}
  void processMessage(const MessageC&){}
};

int main()
{
  message_impl i;
  return 0;
} 
```

检查参数列表是否是唯一的并且静态断言可能是一个好主意。还要确保它不包含引用类型或其他不受欢迎的东西。当您尝试形成参数类型时，这些通常会以错误告终，但它会给您的用户带来一些麻烦。

**编辑：**如果您绝对需要支持`tuple`添加专业化：

```
template< typename... Args >
struct message_handler< std::tuple<Args...> > : public message_interface<Args>...
{}; 
```

# c# - 检查目录是否可在 C# 中访问？

> ID：11709862
> 
> 赞同：13
> 
> 时间：2012-07-29T14:07:13.543
> 
> 标签：c#, visual-studio-2010, directoryinfo, getdirectories

> **可能重复：**
> [.NET - 检查目录是否可访问而不进行异常处理](https://stackoverflow.com/questions/2336699/net-check-if-directory-is-accessible-without-exception-handling)

我使用 NET 3.5 和 C# 在 Visual Studio 2010 中制作了一个小文件浏览器，并且我有这个功能来检查目录是否可访问：

```
RealPath=@"c:\System Volume Information";
public bool IsAccessible()
{
    //get directory info
    DirectoryInfo realpath = new DirectoryInfo(RealPath);
    try
    {
        //if GetDirectories works then is accessible
        realpath.GetDirectories();                
        return true;
    }
    catch (Exception)
    {
        //if exception is not accesible
        return false;
    }
} 
```

但我认为对于大目录，尝试获取所有子目录以检查目录是否可访问可能会很慢。我在尝试浏览受保护的文件夹或没有光盘的 cd/dvd 驱动器时使用此功能来防止错误（“设备未就绪”错误）。

是否有更好的方法（更快）来检查应用程序是否可以访问目录（最好在 NET 3.5 中）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T14:52:15.927

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)，`Directory.Exists`如果您没有对该目录的读取权限，则应返回 false 。但是，您可以使用[`Directory.GetAccessControl`](http://msdn.microsoft.com/en-us/library/c1f66bc2.aspx)它。例子：

```
public static bool CanRead(string path)
{
    try
    {
        var readAllow = false;
        var readDeny = false;
        var accessControlList = Directory.GetAccessControl(path);
        if(accessControlList == null)
            return false;

        //get the access rules that pertain to a valid SID/NTAccount.
        var accessRules = accessControlList.GetAccessRules(true, true, typeof(System.Security.Principal.SecurityIdentifier));
        if(accessRules ==null)
           return false;

        //we want to go over these rules to ensure a valid SID has access
        foreach (FileSystemAccessRule rule in accessRules)
        {
            if ((FileSystemRights.Read & rule.FileSystemRights) != FileSystemRights.Read) continue;

            if (rule.AccessControlType == AccessControlType.Allow)
                readAllow = true;
            else if (rule.AccessControlType == AccessControlType.Deny)
                readDeny = true;
        }

        return readAllow && !readDeny;
    }
    catch(UnauthorizedAccessException ex)
    {
        return false;
    }
} 
```

## 更新

正如一些评论中提到的，在外部域中的有效 SID 具有访问权限的情况下，这可能会返回不正确的值。为了检查当前用户是否具有访问权限，您需要以下内容：

```
foreach...

if (WindowsIdentity.GetCurrent().User.Value.equals(rule.IdentityReference.Value)) 
```

这将确认当前用户的 SID 是否与访问规则身份引用匹配，但也可能引发 SecurityException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:16:28.383

我认为您正在寻找该`GetAccessControl`方法，该`System.IO.File.GetAccessControl`方法返回一个 FileSecurity 对象，该对象封装了文件的访问控制。

# grails - BootStrap.groovy 中的语法错误

> ID：11709863
> 
> 赞同：2
> 
> 时间：2012-07-29T14:07:34.773
> 
> 标签：grails, groovy, spring-security

我正在使用带有 SpringSecurity 插件的 Grails。我运行了 s2-quickstart，因此用户域类被命名为“User.groovy”，而角色域类被命名为“Role.groovy”。因此，映射类被命名为“UserRole.groovy”。然后我修改了 BootStrap.groovy 以创建一个示例用户，这导致了一个令人讨厌的语法错误“Groovy:unexpected token: UserRole @ line 19, column 2”。调用“UserRole.create”时。

这是我的 BootStrap.groovy 文件：

```
import com.foo.Role
import com.foo.User
import com.foo.UserRole

class BootStrap {

    def springSecurityService

    def userSecRole = Role.findByAuthority("ROLE_USER") ?: new Role()(authority: "ROLE_USER").save()

    def user = new User(
        username: "user",
        password: springSecurityService.encodePassword("user"),
        enabled: true
        )

    UserRole.create user, userSecRole     // <--- This is where the error happens

    def init = { servletContext ->
    }
    def destroy = {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:14:51.600

您已将代码放在主类定义中。

该代码应该在`init`闭包内，即：

```
import com.foo.Role
import com.foo.User
import com.foo.UserRole

class BootStrap {

    def springSecurityService

    def init = { servletContext ->
      def userSecRole = Role.findByAuthority("ROLE_USER") ?: new Role()(authority: "ROLE_USER").save()

      def user = new User(
          username: "user",
          password: springSecurityService.encodePassword("user"),
          enabled: true
          )

      UserRole.create user, userSecRole     // <--- This is where the error happens
    }
    def destroy = {
    }
} 
```

# node.js - nodeJS (express,connect) - 在当前流中动态添加中间件

> ID：11709865
> 
> 赞同：4
> 
> 时间：2012-07-29T14:07:38.980
> 
> 标签：node.js, middleware, express, flow-control

我目前正在使用 formBuilder（客户端 javascript <=> JSON <=> 节点），所以我需要有效的方法来处理服务器上的 JSON 数据。所有表单都绑定在一条路线上，由中间件捕获，所以我需要这样的东西：

代码被简化（没有正则表达式、req 验证器等..）

```
var middleware = require('../middleware'); // simple dir to object export

exports = module.exports =function(req,res,next) {
  if(req.xhr && req.is('application/json')) {
    var i, items = req.body.events.length;
    for(i = 0; i < items; i++) {
      var event = req.body.events[i];
      if(middleware.forms[event] {
        // -----------------
        and here add that middleware into current flow ..
        // -----------------
      }
    }
  } else {
    return next();
} 
```

最简单的方法是准备中间件列表，这些中间件将被使用并在最终路由中调用它们异步..但我不认为这是一个好方法..

那么，我有什么方法可以将请求的中间件添加到当前流程中，但在 filan 路由之前？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T22:25:10.773

中间件只是功能。所以只是打电话给他们没有错。我上周遇到了同样的问题，我写了一个小帮手。

```
 var walkSubstack = function (stack, req, res, next) {

  if (typeof stack === 'function') {
    stack = [stack];
  }

  var walkStack = function (i, err) {

    if (err) {
      return next(err);
    }

    if (i >= stack.length) {
      return next();
    }

    stack[i](req, res, walkStack.bind(null, i + 1));

  };

  walkStack(0);

}; 
```

您可以将它与一个数组或一个函数一起使用。

```
walkSubstack(middleware, req, res, next);
//or
walkSubstack([middleware, middleware], req, res, next); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T15:04:06.527

我写了一些非常相似的东西：

```
let isActive1 = false;
let isActive2 = false;
let func1MD = (req, res, next) { /* ... */ }
let func2MD = (req, res, next) { /* ... */ }

let middleware = (function () {

  // middleware #1
  function func1(req, res, next) {
    if (!isActive1) { return next(); }

    return func1MD.call(null, req, res, next);
  }

  // middleware #2
  function func2(req, res, next) {
    if (!isActive2) { return next(); }

    return func2MD.call(null, req, res, next);
  }

  // Returning an array of all middlewares to be called sequentially
  return [
    func1,
    func2
  ]
})();

app.use(middleware); 
```

# antlr3 - 厨师语言语法

> ID：11709866
> 
> 赞同：0
> 
> 时间：2012-07-29T14:07:43.630
> 
> 标签：antlr3

我刚刚开始使用 antlr，而 antlr 则[用于 ruby](http://antlr.ohboyohboyohboy.org)​​ 。版本是 3.2.1

我正在尝试为[厨师语言](http://www.dangermouse.net/esoteric/chef.html)创建一个解析器，语法让我很头疼：P 我确定我错过了一些基本概念，但我就是想不通。

我创建了 3 个语法。主要的是菜谱解析器，它（当然）解析菜谱。解析配方后，我使用了其他 2 个语法，即解析成分和说明（方法部分）。

我的问题是最后一个，即解析指令的那个，例如“将……放入搅拌碗”、“液化……”等。除了一些规则外，一切都很好。由于它的长度，我已经[在 paste.bin发布了 Instructions.g 源。](http://pastebin.com/qVjVSaKV)

这是正在发生的事情：

*   当我取消注释规则**combine_ingredient_into_mixing_bowl**或**divide_ingredient_into_mixing_bowl**时，解析器停止识别几乎所有其他规则（例如 put_ingredient_into_mixing_bowl）。这对我来说似乎很奇怪，因为它们似乎并没有相互覆盖（当然它们是，不知何故）。我收到错误：“行 0:-1 输入不匹配”“期待 WS”

*   **Stir_mixing_bowl**不匹配任何东西，但它确实与其他可以正常工作的规则没有什么不同。我收到错误：“第 0 行：-1 输入不匹配”“期望设置为零”

*   是否可以包含规则**verb_the_ingredient**和**liquefy_ingredient**而不使它们与其他规则冲突？前者实际上会与我猜的其他一切冲突，而后者将与**liquefy_mixing_bowl**冲突。处理这种讨厌的语法的最佳方法是什么？

顺便说一句，我没有将 WS（空格，例如空格和制表符）设置为忽略通道，因为因为一种成分可以包含一个或多个单词（例如第戎芥末或只是 zuchinnis），我发现它更容易通过使用 WS 标记作为分隔符来指定语法。

此外，运行 antlr4ruby 命令来生成解析器/词法分析器代码根本不会显示任何警告。

任何提示、提示或启发在这里都非常感谢:)

提前致谢。

# java - 如何使用 Java 调用 Web 服务

> ID：11709870
> 
> 赞同：5
> 
> 时间：2012-07-29T14:07:49.853
> 
> 标签：java, web-services, wsdl, webservice-client

我是 Web 服务的新手。我需要调用一个定义在[http://api.search.live.net/search.wsdl](http://api.search.live.net/search.wsdl)中的 Web 服务。我需要使用此 Web 服务搜索任何关键字。我在网上搜索但找不到任何解决方案。知道如何调用 Web 服务。我需要使用 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:24:54.863

下载[轴2](http://axis.apache.org/axis2/java/core/)。

解压后，bin文件夹下有一个叫wsdl2java的工具，用来从WSDL生成stubs，可以和webservice通信。

示例用法是：

```
WSDL2Java -uri http://api.search.live.net/search.wsdl  -d xmlbeans -s 
```

[在此处](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html)查看有关该工具的更多详细信息。

除了存根，它还会生成您需要的所有对象。

[这](http://www.soa.si/2011/09/30/developing-axis2-web-services-with-jax-b-data-binding-in-eclipse/)是一个使用axis2和Eclipse IDE的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:05:44.250

我使用 intelliJ 从 WSDL 生成我需要的 java 代码。然后，您可以使用此代码进行 SOAP 调用。

给它 WSDL，它会生成代码，一些信息可以在这里找到：http: [//www.jetbrains.com/idea/webhelp/generating-wsdl-document-from-java-code.html](http://www.jetbrains.com/idea/webhelp/generating-wsdl-document-from-java-code.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:12:57.557

看看[http://ws.apache.org/](http://ws.apache.org/)，您会在其中找到可能是您正在寻找的 Axis2。

请注意，Web 服务是比 WSDL 更通用的术语，并且自 WSDL 被引入以来已经发展到今天大多数服务都使用 JSON 等。在这里查看更多[RESTEasy 或 Jersey？](https://stackoverflow.com/questions/5042886/resteasy-or-jersey)

# iphone - TableView 重新加载数据

> ID：11709879
> 
> 赞同：0
> 
> 时间：2012-07-29T14:10:15.170
> 
> 标签：iphone, objective-c, uitableview

我想知道我发现的关于 tableviews 的一些东西。我有 UITableView 其项目是动态生成的，表示行。现在，每当我滚动 UITableView 以结束并向上拉伸滚动并释放它（你知道 iPhone 风格）时，我`cellForRowAtIndexPath`都会被调用。我注意到了这一点，因为我在那里有我的 NSLog。这是否正常发生？

实际上，事情是我也在 tis 方法的每一行中为 UIImageView 延迟加载图像，所以我认为因此我的延迟加载器也被调用，我不想要这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:15:01.260

这是正常行为。`cellForRowAtIndexPath`正在为现在可见的新行调用该方法。这使得整个表响应更快，因为它不必同时呈现所有行。

# matlab - 如何在MATLAB中删除矩阵的对角元素？

> ID：11709880
> 
> 赞同：5
> 
> 时间：2012-07-29T14:10:21.997
> 
> 标签：matlab, matrix, diagonal

我需要一个代码来省略矩阵的对角元素，例如，如果

```
A =

[1 2 3;
 1 2 3;
 1 2 3]; 
```

输出来：

```
[2 3;
 1 3;
 1 2]; 
```

我怎样才能简单地做到这一点（我知道很长，但我需要它简单）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:22:44.263

这是一个解决方案：

```
Alower = tril(A, -1);
Aupper = triu(A,  1);
result = Alower(:, 1:end-1) + Aupper(:, 2:end) 
```

**演示：**

```
> A = [1 2 3; 1 2 3; 1 2 3]
A =

   1   2   3
   1   2   3
   1   2   3

> tril(A, -1)(1:end, 1:end-1) + triu(A, 1)(1:end, 2:end)
ans =

   2   3
   1   3
   1   2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T14:30:07.560

`n`请注意，通过`n`matirx消除 a 的对角线后有两种可能性：

1.  如果后果矩阵是`n`（`n-1`就像你的问题一样），你可以这样做：

    ```
    A=A';
    A(1:n+1:n*n)=[];
    A=reshape(A,n-1,n)'; 
    ```

2.  如果余波矩阵是`n-1`by `n`，你可以这样做：

    ```
    A(1:n+1:n*n)=[];
    A=reshape(A,n-1,n); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:26:12.510

这是另一种方式

```
reshape(A(setdiff(1:9,1:4:9)),[3,2]) 
```

# compiler-errors - ffmpeg H264 avi 文件获取帧时间戳？？UINT64_C 错误

> ID：11709883
> 
> 赞同：1
> 
> 时间：2012-07-29T14:10:59.250
> 
> 标签：compiler-errors, ffmpeg, timestamp, uint64

使用 h264 编解码器的 avi 文件。我需要打开它并提取每一帧的时间戳。

我试图在 opencv 中这样做，但它返回错误的结果。

我已经修改了 fffmpeg/doc/examples 文件夹中存在的示例 filtering_video.c 的代码，以获取时间戳。

我有以下代码，但编译它给了我一个关于 UNIT64_C 的奇怪结果。环顾四周，我发现这是一个 ffmpeg 问题。

所以 2 个问题：1\. 这段代码看起来是否能够返回和打印帧时间戳 2\. UINT64_C 问题的任何解决方案？

使用 ubuntu 11.04 和最新的 ffmpeg。

代码

```
#include <unistd.h>

#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>

static AVFormatContext *fmt_ctx;
static AVCodecContext *dec_ctx;
static int video_stream_index = -1;

static int open_input_file(const char *filename)
{
int ret;
AVCodec *dec;

if ((ret = avformat_open_input(&fmt_ctx, filename, NULL, NULL)) < 0)
{
    printf("Cannot open input file\n");
    return ret;
}

if ((ret = avformat_find_stream_info(fmt_ctx, NULL)) < 0)
{
    printf("Cannot find stream information\n");
    return ret;
}

/* select the video stream */
ret = av_find_best_stream(fmt_ctx, AVMEDIA_TYPE_VIDEO, -1, -1, &dec, 0);
if (ret < 0)
{
    printf("Cannot find a video stream in the input file\n");
    return ret;
}
video_stream_index = ret;
dec_ctx = fmt_ctx->streams[video_stream_index]->codec;

/* init the video decoder */
if ((ret = avcodec_open2(dec_ctx, dec, NULL)) < 0)
{
    printf("Cannot open video decoder\n");
    return ret;
}

return 0;
}

int main(int argc, char **argv)
{
int ret;
AVPacket packet;
AVFrame frame;
int got_frame;

if (argc != 2)
{
    fprintf(stderr, "Usage: %s file\n", argv[0]);
    exit(1);
}

avcodec_register_all();
av_register_all();

if ((ret = open_input_file(argv[1])) < 0)
    goto end;

/* read all packets */
while (1)
{
    if ((ret = av_read_frame(fmt_ctx, &packet)) < 0)
        break;

    if (packet.stream_index == video_stream_index)
    {
        avcodec_get_frame_defaults(&frame);
        got_frame = 0;
        ret = avcodec_decode_video2(dec_ctx, &frame, &got_frame, &packet);
        if (ret < 0)
        {
           printf("Error decoding video\n");
            break;
        }

        if (got_frame)
        {
            frame.pts = av_frame_get_best_effort_timestamp(&frame);
            printf("frame timestamp %ld\n", frame.pts);
        }

    }
}
    av_free_packet(&packet);
end:
if (dec_ctx)
    avcodec_close(dec_ctx);
avformat_close_input(&fmt_ctx);

exit(0);
} 
```

编译器错误

```
/usr/local/include/libavutil/common.h||In function ‘int32_t    av_clipl_int32_c(int64_t)’:|
/usr/local/include/libavutil/common.h|173|error: ‘UINT64_C’ was not declared in this scope| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T20:29:32.897

`UINT64_C`在任何其他标头之前声明了`<stdint.h>`它，它不应该再抱怨了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:13:33.010

的定义`UINT64_C`在一个条件内：

```
/* The ISO C99 standard specifies that in C++ implementations these
   should only be defined if explicitly requested.  */
#if !defined __cplusplus || defined __STDC_CONSTANT_MACROS 
```

看起来如果你像我一样使用来自 C++98 的 ffmpeg，你需要

```
#define __STDC_CONSTANT_MACROS 
```

在你面前

```
#include <stdint.h> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T08:07:17.497

我发现 stdint.h 只为 C 定义了宏 INT64_C，而不是为 C++ 定义。由于我不想对 ffmpeg 的标头进行太多麻烦，因此我将此定义放在了我的代码中，尤其是来自 ffmpeg 的所有包含

```
#ifndef INT64_C
#define INT64_C(c) (c ## LL)
#define UINT64_C(c) (c ## ULL)
#endif 
```

# git - git rebase 合并冲突

> ID：11709885
> 
> 赞同：116
> 
> 时间：2012-07-29T14:11:11.930
> 
> 标签：git, github, git-rebase

我分叉了一个 github 存储库并在我的 github 存储库上工作。
我已经提出了拉取请求并完成了。

在那之后上游有更多的提交，所以现在我想重新设置基准，我想这就是我必须做的。
但是我遇到了这些合并冲突：

```
First, rewinding head to replay your work on top of it...
Applying: Issue 135 homepage refresh
Using index info to reconstruct a base tree...
<stdin>:17: trailing whitespace.
      %h4 
warning: 1 line adds whitespace errors.
Falling back to patching base and 3-way merge...
Auto-merging app/views/layouts/application.html.haml
CONFLICT (content): Merge conflict in app/views/layouts/application.html.haml
Auto-merging app/views/home/index.html.haml
CONFLICT (content): Merge conflict in app/views/home/index.html.haml
Auto-merging app/views/home/_group_projects.html.haml
CONFLICT (content): Merge conflict in app/views/home/_group_projects.html.haml
Failed to merge in the changes.
Patch failed at 0001 Issue 135 homepage refresh

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort". 
```

我不知道如何解决这些问题，请帮助。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-07-29T14:33:22.433

变基可能是一个真正令人头疼的问题。您必须解决合并冲突并继续变基。例如，您可以使用合并工具（根据您的设置而有所不同）

```
git mergetool 
```

然后添加您的更改并继续

```
git rebase --continue 
```

祝你好运

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2019-02-22T09:59:47.600

如果你有很多要 rebase 的提交，并且其中的某些部分正在产生冲突，那真的很痛苦。但我可以建议一种**鲜为人知的方法**来“消除所有冲突”。

首先，签出临时分支并开始标准合并

```
git checkout -b temp
git merge origin/master 
```

你将不得不解决冲突，但只有一次，而且只有真正的冲突。然后暂存所有文件并完成合并。

```
git commit -m "Merge branch 'origin/master' into 'temp'" 
```

然后返回您的分支（让它成为**alpha**）并开始变基，但会自动解决任何冲突。

```
git checkout alpha
git rebase origin/master -X theirs 
```

分支已重新定位，但项目可能处于无效状态。没关系，我们还有最后一步。我们只需要恢复项目状态，因此它与分支“temp”上的完全相同。从技术上讲，我们只需要通过低级命令**git commit-tree复制它的****树**（文件夹状态） 。加上合并到当前分支刚刚创建的提交。

 **```
git merge --ff $(git commit-tree temp^{tree} -m "Fix after rebase" -p HEAD) 
```

并删除临时分支

```
git branch -D temp 
```

就这样。我们通过隐藏合并做了一个变基。

我还写了一个脚本，所以可以以对话的方式完成，你可以在[这里](https://github.com/capslocky/git-rebase-via-merge)找到它。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-08-12T09:36:18.097

注意：使用 Git 2.14.x/2.15（2017 年第三季度），`git rebase`发生冲突时的消息将更加清晰。

请参阅[William Duclot (](https://github.com/williamdclt) [)的](https://github.com/williamdclt)[commit 5fdacc1](https://github.com/git/git/commit/5fdacc17c7eb2a7b435d62d99b41f75f44f74de1)（2017 年 7 月 16 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 076eeec](https://github.com/git/git/commit/076eeec8bec1df628717733fb16df6161d5ef7e5))^(中，2017 年 8 月 11 日）)[`williamdclt`](https://github.com/williamdclt)
^([`gitster`](https://github.com/gitster))

> ## `rebase`：使没有经验的用户更清楚地解析消息

前：

```
When you have resolved this problem, run "git rebase --continue".
If you prefer to skip this patch, run "git rebase --skip" instead.
To check out the original branch and stop rebasing, run "git rebase --abort" 
```

后：

```
Resolve all conflicts manually, 
mark them as resolved with git add/rm <conflicted_files>
then run "git rebase --continue".

You can instead skip this commit: run "git rebase --skip".
To abort and get back to the state before "git rebase", run "git rebase --abort".') 
```

> 可以通过将错误消息发送给他们帮助的人来改进 git UI：没有经验的和临时的 git 用户。
> 为此，确保这部分用户能够理解这些消息中使用的术语并指导他们解决问题是有帮助的。
> 
> 特别是，在 git rebase 期间未能应用补丁是一个常见问题，对于没有经验的用户来说可能非常不稳定。
> 重要的是引导他们解决冲突（这是一个 3 步过程，因此很复杂），并向他们保证他们可以摆脱他们无法用“ `--abort`”处理的情况。
> 这个提交通过详细说明解决过程和避免神秘的 git linguo 回答了这两点。**

# javascript - 面向 Javascript 的 Firebug 插件？

> ID：11709886
> 
> 赞同：0
> 
> 时间：2012-07-29T14:11:23.427
> 
> 标签：javascript, jquery, debugging, firebug

有谁知道浏览器插件（Ch 或 FF）或者可能是 Firebug 插件，它会向我显示所有附加的事件 javascript 处理程序到当前选定的 DOM 元素？我必须调试一个我收到的站点，其中包含大量意大利面条式的 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:16:28.467

对于 Chrome，我想普通的开发工具会做：[http](http://screencast.com/t/KHKeMIj6BiDk) ://screencast.com/t/KHKeMIj6BiDk （这实际上是一个 Safari，但这也应该与其他 webkit 桌面浏览器一起提供）

同时，阅读这个 stackoverflow 问题：[How to find event listeners on a DOM node when debug or from the JavaScript code?](https://stackoverflow.com/questions/446892/how-to-find-event-listeners-on-a-dom-node)

# java - 使用 Java 在特定文件中运行 Javascript

> ID：11709890
> 
> 赞同：1
> 
> 时间：2012-07-29T14:12:39.600
> 
> 标签：java, javascript, events, triggers

我正在尝试使用 Java 类触发 JavaScript 中的事件。

如何将 Java 类中的 javascript 代码（直接输入或来自文件）发送到已在浏览器 (Firefox) 中打开的指定目标文件？

目前我正在使用 ScriptEngineManager 来运行我的 JavaScript 代码，但是代码是在我的 Java 环境中执行的，我不知道如何以这种方式触发事件（因为我不能使用例如 window.postMessage("hi", "*");)

任何建议如何解决这个问题？变通办法也受到赞赏（最好没有扩展，插件，...）。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:10:59.160

从 java 执行时，您无法访问窗口事件 - 因为没有浏览器。

我不太了解这里的用例，但是您可以将目标文件加载到 iframe 中，然后进行[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)- 一旦您更新文件内容，那么更新的结果将在下一次刷新时显示。

在任何情况下，您只能将输入的 javascript 函数的结果返回给 java - 而不是调用事件。

您可以将 javascript 函数（模拟事件的调用）传回浏览器，然后执行它。

您如何将其传回给客户取决于具体情况：

*   它可能是对上传 javascript 的请求的响应
*   您可以使用元刷新机制
*   您可以通过客户端轮询来研究[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming)样式的方式（如果您不想每次都手动刷新）。

**编辑**

服务器在请求之间没有到浏览器的链接。要在浏览器中异步接收服务器事件，您可以查看：

*   [网络套接字](http://en.wikipedia.org/wiki/WebSocket)
*   [彗星](http://www.ibm.com/developerworks/web/library/wa-cometjava/)

因此，当任务完成时浏览器会收到通知，然后它就能做出反应——例如提示关闭选项卡。

# magento - 更改货币符号的位置会破坏我的网站

> ID：11709892
> 
> 赞同：0
> 
> 时间：2012-07-29T14:12:53.100
> 
> 标签：magento

现在第二次，一个看似简单的改变完全摧毁了我的商店。我暂时放弃了，但是如果你们中的任何人有解决方案，我会很高兴听到它。

我在 GoDaddy 上有 Magento 1702（这也发生在 1700 年），带有 hellowired 模板和我编码的其他一些不相关的更改。商店在西班牙，所以标准货币是欧元，并且安装了语言文件 (es_ES)。一切正常，直到我尝试将 € 的位置从前缀 (€ 12,90) 更改为后缀 (12,90 €)。

要进行更改，我导航到 /lib/Zend/Locale/Data/es.xml，找到 currencyFormat 并将 Â¤#,##0.00 更改为 #,##0.00 Â¤。很简单，对吧？

从那里开始，我无法访问后端，只能访问前端，直到我到达带有价格（产品或购物车）的页面。当其中任何一种发生时，我都会看到“处理您的请求时出错”屏幕，当我检查错误日志时会显示“未找到货币美元”。我没有碰 en.xml，默认货币（在管理员）是欧元。

到目前为止，唯一的解决方案是恢复备份文件。但不仅仅是特定的 es.xml 甚至是完整的 es_ES 文件夹。我必须进行完全恢复，因为我无法确定哪些实际损坏或原因。

我可以忍受错误位置的€，但我不应该这样做。

关于如何解决这个问题的任何想法？

感谢所有米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:26:38.130

正如艾伦在他的评论中所说的那样，在此处报告具体的错误消息。但是要检查您是否编辑了此文件：

*   如果您的编辑器保留文件的编码（utf-8）
*   保存更改后验证此文件的 xml 是否有效
*   如果您的编辑器或 ftp 客户端保留服务器上的文件权限
*   验证您是否已清除服务器上的缓存

# javascript - JavaScript 中的函数顺序

> ID：11709902
> 
> 赞同：0
> 
> 时间：2012-07-29T14:13:47.203
> 
> 标签：javascript, ajax

我有执行 AJAX 请求的函数，我怎样才能使这些函数执行以便在 JavaScript 中调用它们？

```
function1(); // some
function2(); // AJAX
function3(); // happens
function4(); // in
function5(); // each function 
```

我希望函数 2 等到函数 1 完成，函数 3 等到函数 2 完成，依此类推......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T14:20:23.710

Javascript 是异步的，因此您需要在每个函数上都有一个回调，以便在该函数完成时执行某些操作。

更多信息：[http ://recurial.com/programming/understanding-callback-functions-in-javascript/](http://recurial.com/programming/understanding-callback-functions-in-javascript/)

以下是有关如何向函数添加回调的一些信息：

[向函数添加回调 - 总是](https://stackoverflow.com/questions/5464521/adding-callback-to-function-always)

# c# - 完全支持路由管理选项卡式内容

> ID：11709909
> 
> 赞同：0
> 
> 时间：2012-07-29T14:14:53.550
> 
> 标签：c#, asp.net, .net, asp.net-mvc, tabs

我正在构建一个`Asp.net mvc 3`应用程序。我想要做的是一个个人资料页面（*非常像 stackoverflow 个人资料页面*），这个页面的内容将被拆分为选项卡，每个选项卡由一个`PartialView`.

当用户单击选项卡 X 时，我只想刷新选项卡区域，而不刷新我的所有页面。同时更改我的 URL 地址，因此如果用户单击浏览器刷新按钮，它会使用所选选项卡刷新页面。这可能吗 ？

我已经知道的是如何使用 获取数据`AJAX`，并替换我的视图内容。我读过[这篇文章](https://stackoverflow.com/questions/978025/how-can-i-build-a-tabbed-menu-in-asp-net-mvc)，我觉得它很有趣，但它刷新了所有页面。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T22:27:41.320

你在正确的轨道上。您将需要同时使用 ajax 来获取 html 以在不刷新页面的情况下呈现，以及使用推送状态来更新 URL 以包含当前选项卡。

您可以将这些事情作为单独的操作进行，但我建议使用[PJAX](https://github.com/defunkt/jquery-pjax/)。使用 PJAX，您将需要在服务器中添加一些额外的逻辑来决定是返回带有布局的完整 html 页面，还是只返回部分（PJAX 请求）。

这是我们的 Foo 控制器。索引有一个默认选择的“栏”选项卡。Bar 和 Baz 操作返回 Index 视图，但不同的选项卡是选定的选项卡。如果是 PJAX 请求，那么我们需要的只是填充选项卡内容的局部视图。

```
public class FooController : Controller
{
    public ActionResult Index()
    {
        ViewBag.SelectedTab = "Bar";
        return View();
    }

    public ActionResult Bar()
    {
        if(Request.Headers["X-PJAX"] != null)
            return PartialView();
        ViewBag.SelectedTab = "Bar";
        return View("Index");
    }

    public ActionResult Baz()
    {
        if (Request.Headers["X-PJAX"] != null)
            return PartialView();
        ViewBag.SelectedTab = "Baz";
        return View("Index");
    }
} 
```

在 Foo/Index.cshtml 内部，我们有 Razor 代码，它将确定要基于`ViewBag.SelectedTab`.

```
@{
    ViewBag.Title = "Foo";
}

<h2>Foo</h2>

<ul>
    <li><a class="tabs" href="@Url.Action("Bar", "Foo")">Bar</a></li>
    <li><a class="tabs" href="@Url.Action("Baz", "Foo")">Baz</a></li>
</ul>
<div id="tab_content">
    @if(ViewBag.SelectedTab == "Bar")
    {
        @Html.Partial("Bar")
    }
    @if (ViewBag.SelectedTab == "Baz")
    {
        @Html.Partial("Baz")
    }
</div>

@section scripts
{
    <script type="text/javascript">
        $(function() {
            $(".tabs").pjax("#tab_content");
        })
    </script>
} 
```

最后的脚本部分是您如何连接 PJAX。您是在告诉它，对于具有`tabs`该类的所有超链接，使用 pjax 动态加载和呈现从 生成的 html`href`到具有 id 的容器中，`tab_content`并将浏览器中的 url 更新为来自`href`.

在这种情况下，每个选项卡的局部视图都相当简单

条形图.cshtml

```
<p>This is the Bar tab. No pun intended.</p> 
```

Baz.cshtml

```
<p>This is the baz tab.</p> 
```

这显然是一个非常简化的解决方案。您通常希望使用表示模型来处理视图的逻辑。此外，我有意省略了任何选项卡样式，以证明此技术可用于任何类型的链接。它不仅限于选项卡。

此示例的[完整源代码](https://github.com/kmcginnes/PjaxTabs)可以在我的 GitHub 站点上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:58:55.107

> 当用户单击选项卡 X 时，我只想刷新选项卡区域，而不刷新我的所有页面。同时更改我的 URL 地址，因此如果用户单击浏览器刷新按钮，它会使用所选选项卡刷新页面。这可能吗 ？

要做到这一点，您需要插入浏览器的历史 API（它是 HTML5 的一部分，您必须使用某种插件才能在不支持它的浏览器中获得相同的东西）。

Manning 的“.net 开发人员的 HTML5”对此有很好的部分，但它仍处于“早期访问”阶段。

# javascript - 在 jquery 中使用上下文菜单时出错？

> ID：11709912
> 
> 赞同：0
> 
> 时间：2012-07-29T14:15:03.757
> 
> 标签：javascript, jquery, dom, contextmenu

我想创建一个 div 标签的上下文菜单以将一些内容附加到其中。但是当我连续多次右键单击时，我的 div 标签包含的内容比我想要的要多。这是我的代码。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<style type="text/css">
#container{
width: 500px;
height: 500px;
border: 1px solid red;
position: relative;
}
#MyMenu{

position: absolute;
border: 1px solid blue;
}
</style>
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('#container').bind('contextmenu',function(e){
e.preventDefault();
var x=e.pageX;
var y=e.pageY;
$('#MyMenu').css({'top': y+'px','left': x+'px'}).show();
$('#add').click(function(e){
  var ContentToAppend='<p>My Content</p>';
  $('#container').append(ContentToAppend);  
});
}); 
});
</script>

</head>

<body>

<div id="container">

</div>
<ul id="MyMenu">
<li><a href="#" id="add">Add</a></li>
<li><a href="#" id="del">Delete</a></li>
</ul>
</body>

</html> 
```

例如，如果我连续右键单击 5 次，在我的 div 中将包含 5 行“我的内容”虽然我只想要 1 行。谁能解释一下为什么和解决方案？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:21:39.733

尝试（见[演示](http://jsfiddle.net/pN9Vr/)）：

```
$(document).ready(function(){
  $('#container').bind('contextmenu',function(e){
    e.preventDefault();

    var x=e.pageX;
    var y=e.pageY;

    $('#MyMenu').css({'top': y+'px','left': x+'px'}).show();
  }); 

  $('#add').click(function(e){
    var ContentToAppend='<p>My Content</p>';
    $('#container').append(ContentToAppend);  
  });
});​ 
```

交易是在您的版本中，`#add`每次用户打开上下文菜单时，您都会绑定到元素单击事件处理程序。因此，在 5 次之后，将有 5 个单击事件处理程序，因此，如果您然后单击`#add`元素，则将`'<p>My Content</p>'`字符串添加到`#container`元素 5 次。

# iphone - 在圆圈上移动标签

> ID：11709915
> 
> 赞同：0
> 
> 时间：2012-07-29T14:15:20.530
> 
> 标签：iphone, objective-c

我有一个会翻的圈子，我怎么给他贴一些会跟着他翻的标签？我的观点是圆圈和标签应该在同一个天使上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:30:03.707

使标签成为您用来呈现圆圈的 UIView 的子视图。在 IB 中，只需将标签拖到您用于圆形图像的 UIView 上，或者如果您不使用 IB，只需将标签添加到圆形，如下所示： `[circleUIView addSubview:theUILabel];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:40:34.423

```
Download demo source code this url http://www.devedup.com/index.php/2010/03/03/iphone-animate-an-object-along-a-path/

Now changes into Canvas.m file's animateCicleAlongPath method.

Replace to image to label.

UILabel *label = [[UILabel alloc]init];
    [label setText:@"test"];
    [label setTextColor:[UIColor redColor]];
    //Set the frame of the view - which is used to position it when we add it to our current UIView
    label.frame = CGRectMake(1, 1, 20, 20);
    label.backgroundColor = [UIColor clearColor];
    [self addSubview:label];
    [label.layer addAnimation:pathAnimation forKey:@"moveTheSquare"]; 
```

# ruby-on-rails - 通过回形针和 aws-sdk 上传图像时遇到问题

> ID：11709917
> 
> 赞同：0
> 
> 时间：2012-07-29T14:15:46.783
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在使用回形针将照片上传到 AWS-S3 存储桶。正在使用 Mechanize 通过单独的提要访问这些照片。我最近更新了我的 gem 文件，现在回形针显然需要 aws-sdk gem 而不是 aws-s3 gem。现在我正在调试代码以适应 aws-sdk gem，但我一直在上传文件。我在下面使用 aws-s3 gem 的工作代码：

```
image = agent.get(url).body
filename = "#{listing_id}:#{i}.jpg"
AWS::S3::S3Object.store(filename, image, S3_BUCKET_NAME)
"https://s3.amazonaws.com/#{S3_BUCKET_NAME}/#{filename}" 
```

我收到此错误：`undefined method`store' for AWS::S3::S3Object:Class`

据我所知，新代码将如下所示：

```
key = File.basename(filename)
s3.buckets[S3_BUCKET_NAME].objects[key].write(:file => filename) 
```

使用 aws-s3，图像在 store 方法中被引用。如何使用 aws-sdk 引用图像？

现在我要回到旧的回形针版本并重新安装 aws-s3，但如果可能的话，我想保持我的代码是最新的。任何想法将不胜感激。

# mysql - 计算类别和子类别组合的分数

> ID：11709919
> 
> 赞同：6
> 
> 时间：2012-07-29T14:15:52.410
> 
> 标签：mysql, sum

我目前正在使用一个积分系统，该系统使用下面的查询来列出谁在一个类别或直接在它下面的任何类别中拥有最多的点（使用“category_relations 表”中的“links_to”和“links_from”）。

```
SELECT  u.name, 
        pa.user_id, 
        SUM(IF(pa.plus = '1', pa.points_amount, 0)) - 
        SUM(IF(pa.plus = '0', pa.points_amount, 0)) AS points
FROM    points_awarded pa, Users u
WHERE   u.user_id = pa.user_id AND 
        (
           category_id = '" . $category_id . "' OR 
           category_id IN
               (
                   SELECT links_to
                   FROM category_relations
                   WHERE links_from = '" . $category . "'
               )
        ) 
GROUP BY user_id 
ORDER BY points DESC 
LIMIT 50 
```

我现在要做的是切换此查询以查找特定用户的所有类别，而不是查找特定类别的所有用户。以下是我尝试使用的查询，但这仅包括该类别的点数，而不包括下面的子类别。

```
SELECT   u.name, 
         pa.user_id, 
         pa.category_id,
         SUM(IF(pa.plus = '1', pa.points_amount, 0)) - 
         SUM(IF(pa.plus = '0',pa.points_amount, 0)) AS points
FROM     points_awarded pa, Users u
WHERE    u.user_id = pa.user_id AND 
         u.user_id = '" . $user_id . "'
GROUP BY pa.category_id 
ORDER BY points DESC 
LIMIT 50 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:03:22.283

# 解决方案

从您的示例查询中，我能够简化您的表结构，它为我提供了足够的信息来回答您的问题。您可以使用此解决方案：

```
SELECT   a.user_id, 
         a.name, 
         b.category_id,
         SUM(IF(d.plus = '1', d.points_amount, 0)) -
         SUM(IF(d.plus = '0', d.points_amount, 0)) AS points
FROM     Users a
JOIN     points_awarded b ON a.user_id = b.user_id
JOIN     (
         SELECT links_from, links_to 
         FROM   category_relations 
         UNION
         SELECT links_from, links_from
         FROM   category_relations 
         ) c ON b.category_id = c.links_from
JOIN     points_awarded d ON c.links_to = d.category_id
WHERE    a.user_id = $user_id
GROUP BY a.user_id,
         a.name,
         b.category_id
ORDER BY points DESC
LIMIT    50 
```

`$user_id`查询的用户 ID 参数在哪里。

* * *

# 分解

基本上这个查询的关键部分是我们选择`category_relations`表的方式。

由于您想要子类别点的总和（按每个父类别）***加上***它们各自的父类别的点，我们可以通过垂直添加父类别`UNION`并基本上使其成为其自身的子类别。然后，这将很好地纳入`GROUP BY`and `SUM`。

假设我们有一些（简化的）数据，如下所示：

```
Users
------------------
user_id  |  name
433      |  Zane 
```

* * *

```
points_awarded
------------------
user_id  |  category_id  |  plus  |  points_amount
433      |  1            |  1     |  785
433      |  2            |  1     |  871
433      |  3            |  1     |  236
433      |  4            |  0     |  64
433      |  5            |  0     |  12
433      |  7            |  1     |  897
433      |  8            |  1     |  3
433      |  9            |  0     |  48
433      |  10           |  1     |  124
433      |  14           |  0     |  676 
```

* * *

```
category_relations
------------------
links_from | links_to
1          | 2
1          | 3
1          | 4
5          | 8
5          | 9
7          | 10
7          | 14 
```

* * *

为了区分父类别和子类别，查询`points_awarded`使用表中的两个字段对表进行自交叉引用连接`category_relations`。

如果我们只是在`category_relations`没有 的情况下加入表`UNION`，我们得到的连接看起来像（简化的列）：

### points_awarded ⋈ (links_from) category_relations ⋈ (links_to) points_awarded:

```
category_id  |  points_amount  |  category_id  |  points_amount
1            |  785            |  2            |  871
1            |  785            |  3            |  236
1            |  785            |  4            |  64
5            |  12             |  8            |  3
5            |  12             |  9            |  48
7            |  897            |  10           |  124
7            |  897            |  14           |  676 
```

如您所见，最左边`category_id`是父类别，最右边`category_id`是各自的子类别。我们可以轻松地对第一个 category_id 和`SUM`第二个进行分组`points_amount`...

但是等等，我们也需要包含父类别`points_amount`！我们如何让第一个`points_amount`明显进入第二个`points_amount`？这就是`UNION`发挥作用的地方。

在我们执行我们的自交叉引用连接之前，我们选择`category_relations`表以便稍微改变它：

```
SELECT links_from, links_to FROM category_relations
UNION
SELECT links_from, links_from FROM category_relations 
```

然后导致：

```
category_relations (subselected)
------------------
links_from | links_to
1          | 1       <-- parent category
1          | 2
1          | 3
1          | 4
5          | 5       <-- parent category
5          | 8
5          | 9
7          | 7       <-- parent category
7          | 10
7          | 14 
```

我们基本上将每个父类别都设为其自身的子类别。我们在我们的连接中使用这个结果，然后应该产生：

```
category_id  |  points_amount  |  category_id  |  points_amount
1            |  785            |  1            |  785
1            |  785            |  2            |  871
1            |  785            |  3            |  236
1            |  785            |  4            |  64
5            |  12             |  5            |  12             
5            |  12             |  8            |  3
5            |  12             |  9            |  48
7            |  897            |  7            |  897            
7            |  897            |  10           |  124
7            |  897            |  14           |  676 
```

在那里，***现在***父类别被考虑在内`SUM`，我们现在可以对第一个进行分组`category_id`，对第二个求和`points_amount`（此时忽略第一个`points_amount`，因为它无关紧要），为您提供所需的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:21:30.730

我很确定有一种更简单的方法可以通过加入 category_relations 表来做到这一点，但很难看不到表的任何视觉示例......我认为这应该可行：

```
SELECT   u.name
        ,pa.user_id
        ,pa.category_id,
        SUM(IF(pa.plus = '1', pa.points_amount, 0)) - SUM(IF(pa.plus = '0',pa.points_amount, 0)) AS points
FROM        points_awarded pa
JOIN        Users u
USING       (user_id)
WHERE       category_id IN(
    SELECT      links_to
    FROM        category_relations
    WHERE       links_from = (
        SELECT      category_id
        FROM        points_awarded
        WHERE       user_id = '" . $user_id . "'
    )
)       
GROUP BY    pa.category_id
ORDER BY    points DESC
LIMIT       50 
```

您在上面发布的示例中没有看到子类别，因为您没有包含 category_relations 表中的记录。我们不是通过查询的 category_id 来查找链接的类别，而是使用子子查询来查找与用户关联的所有 category_id。试一试，如果这不正确，请发布一些显示表格数据的小片段。

# php - Joomla 1.5.25 没有收到数据错误

> ID：11709925
> 
> 赞同：0
> 
> 时间：2012-07-29T14:16:37.877
> 
> 标签：php, apache, joomla, centos

我收到“未收到数据。无法加载网页，因为服务器未发送数据。” 当我重新启动我的 httpd 服务器时随机出错。

每当发生这种情况时，我都需要再次重新启动服务器。

为什么会发生这种情况？

这与Joomla有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:23:05.023

这很可能是服务器端的错误。确保您运行的是最新版本的 PHP 和 MySQL。此外，以防万一您的终端出现问题，请尝试从不同的互联网连接连接到该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:38:05.523

我遇到了同样的问题，禁用 memcache 会阻止问题在我的本地计算机上发生。对不起，我无能为力。

# node.js - 用于 MongoDB 的 DAL

> ID：11709927
> 
> 赞同：1
> 
> 时间：2012-07-29T14:17:09.997
> 
> 标签：node.js, mongodb, data-access-layer, n-tier-architecture

到目前为止，我们的 node.js 项目使用我们构建的一个类 (cache.js)，它在内存中保存各种集合。数据访问层用于从逻辑中抽象数据，并允许我们稍后轻松添加持久性。此 dal.js 对所有 CRUD 操作的 cache.js 进行同步调用。

现在时间到了，我想将 MongoDB 连接到 DAL 而不是这个 cache.js。问题是 mongoDB + node.js 的理念是通过回调异步调用数据库。

我们是否应该重新设计我们所有的应用程序（包括使用 DAL 的类）？强制业务逻辑在他们需要的每个 CRUD 上使用回调不是太复杂和错误吗？维护 KISS 的最佳实践是什么（我知道 mongoose 也可以提供帮助，但不能直接提供帮助）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:56:06.110

根据您的可扩展性模型，您可以考虑定期同步内存模型。像这样的东西：

```
var model = {
  x: 5
};

setInterval(function() {
  if (is_model_changed(model)) write_to_db(model); // <-- this can conflict with other changes
  model = read_from_db();
}, 5000); 
```

在这种情况下，您可能应该具有某种形式的服务器关联（每个分片/用户），以便在写入数据库时​​尽可能避免冲突。

# c - 如何在C中初始化指向结构的指针？

> ID：11709929
> 
> 赞同：30
> 
> 时间：2012-07-29T14:17:19.660
> 
> 标签：c, pointers, struct, initialization

鉴于此结构：

```
struct PipeShm
{
    int init;
    int flag;
    sem_t *mutex;
    char * ptr1;
    char * ptr2;
    int status1;
    int status2;
    int semaphoreFlag;

}; 
```

这很好用：

```
static struct PipeShm myPipe = { .init = 0 , .flag = FALSE , .mutex = NULL , 
        .ptr1 = NULL , .ptr2 = NULL , .status1 = -10 , .status2 = -10 , 
        .semaphoreFlag = FALSE }; 
```

但是当我声明`static struct PipeShm * myPipe`这不起作用时，我假设我需要使用操作符进行初始化`->`，但是如何？

```
static struct PipeShm * myPipe = {.init = 0 , .flag = FALSE , .mutex = NULL , 
        .ptr1 = NULL , .ptr2 = NULL , .status1 = -10 , .status2 = -10 , 
        .semaphoreFlag = FALSE }; 
```

是否可以声明一个指向结构的指针并对其进行初始化？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-29T14:22:03.963

你可以这样做：

```
static struct PipeShm * myPipe = &(struct PipeShm) {
    .init = 0,
    /* ... */
}; 
```

此功能称为“复合文字”，它应该适合您，因为您已经在使用 C99 指定的初始化程序。

* * *

关于复合文字的存储：

> 6.5.2.5-5
> 
> 如果复合文字出现在函数体之外，则该对象具有静态存储持续时间；否则，它具有与封闭块关联的自动存储持续时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T14:22:00.913

> 是否可以声明一个指向结构的指针并对其进行初始化？

是的。

```
const static struct PipeShm PIPE_DEFAULT = {.init = 0 , .flag = FALSE , .mutex = NULL , .ptr1 = NULL , .ptr2 = NULL ,
        .status1 = -10 , .status2 = -10 , .semaphoreFlag = FALSE };

static struct PipeShm * const myPipe = malloc(sizeof(struct PipeShm));
*myPipe = PIPE_DEFAULT; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T14:22:09.407

好的，我明白了：

```
static struct PipeShm  myPipeSt = {.init = 0 , .flag = FALSE , .mutex = NULL , .ptr1 = NULL , .ptr2 = NULL ,
        .status1 = -10 , .status2 = -10 , .semaphoreFlag = FALSE };

static struct PipeShm  * myPipe = &myPipeSt; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T14:21:05.377

首先，您需要为指针分配内存，如下所示：

```
myPipe = malloc(sizeof(struct PipeShm)); 
```

然后，您应该如下一一分配值：

```
myPipe->init = 0;
myPipe->flag = FALSE;
.... 
```

请注意，对于结构内的每个单独的指针，您需要单独分配内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T14:21:52.157

首先初始化结构（`static struct PipeShm myPipe = {...`）。然后取地址

```
struct PipeShm * pMyPipe = &myPipe; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T14:24:32.323

您必须手动构建该结构，然后创建一个指向该结构的指针。

任何一个

```
static struct PipeShm myPipe ={};
static struct PipeShm *pmyPipe = &myPipe; 
```

或者

```
static struct PipeShm *myPipe = malloc();
myPipe->field = value; 
```

# android - 如何在应用小部件中为 Android AnalogClock 设置时间？

> ID：11709934
> 
> 赞同：0
> 
> 时间：2012-07-29T14:19:44.567
> 
> 标签：android, layout, widget, components, android-appwidget

如何为`AnalogClock`放置在应用小部件中的 Android 设置自定义时间？

作为替代方案，我正在考虑覆盖默认的 AnalogClock 以通过代码设置时间。或者换句话说，我将创建从默认视图或模拟时钟扩展的自定义时钟。然后将我的自定义时钟放在小部件布局 UI 上。

这可能吗？恐怕我们受限于 RemoteViews 来拥有我们自己的自定义组件。

**更新：** 这是我最初遵循 vArDo 给出的解决方案的错误日志。

![在此处输入图像描述](../Images/83871749c892c4f50700f0250f632f5f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:09:43.087

# 介绍

无法在应用小部件中包含自定义视图。[根据文档](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)，布局中只能使用少量预定义的视图子集。因此，正如您所提到的，您无法创建自己的`AnalogClock`视图（正如我在其他答案中所展示的那样）并将其包含在应用小部件中。

但是，还有其他方法可用于`AnalogClock`在应用小部件中创建自定义。在这样的实现中，直接设置时间`AnalogClock`应该不是问题。

# 简短的回答

实现此目的的方法之一是将自定义绘制`AnalogClock`到`ImageView`（这是应用程序小部件中允许的视图之一）。重复`PendingIntent`用于每 60 秒`Service`绘制一次（通过）。`ImageView``RemoteViews`

# 电池使用注意事项

请记住，每 60 秒调用`Service`一次更新*应用程序小部件*的操作`RemoteViews`对电池的消耗并不是那么轻巧。*Jelly Bean*示例实现在夜间使用了 2% 的电池（屏幕关闭，平均网络强度）。但是，我每 15 秒更新一次屏幕，这对于模拟时钟来说是不必要的。因此粗略估计，每分钟更新一次的应用小部件在夜间会消耗大约 0.5% 的电池电量——这对您的用户来说可能很重要。

# 解决方案详情

## 更改绘图服务

首先，您必须创建`Service`将`ImageView`在您的视图中呈现的内容。绘图代码几乎取自`AnalogClock`实现并根据需要重新排列。首先，没有检查时间是否已经改变——这是因为`Service`只有当我们决定时才会调用（例如每 60 秒）。秒变是我们`Drawable`从方法中的资源创建s。

另一个变化是代码将模拟时钟引入本地`Bitmap`使用`Canvas`：

```
 // Creating Bitmap and Canvas to which analog clock will be drawn.
    Bitmap appWidgetBitmap = Bitmap.createBitmap(availableWidth, availableHeight, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(appWidgetBitmap); 
```

更新被引入`ImageView`via `RemoteViews`。更改被聚合，然后推送到主屏幕上的应用程序小部件 - 有关详细信息，请参阅[文档](http://developer.android.com/reference/android/widget/RemoteViews.html)）。在我们的例子中，只有一个变化，它是通过特殊方法完成的：

```
 remoteViews.setImageViewBitmap(R.id.imageView1, appWidgetBitmap); 
```

请记住，要使代码正常工作，您必须声明绘制模拟时钟的可用空间。根据您在 中声明的内容`widget_provider.xml`，您可以确定`ImageView`. 请注意，在绘图之前，您必须将`dp`单位转换为`px`单位：

```
 // You'll have to determine tour own dimensions of space to which analog clock is drawn.
    final int APP_WIDGET_WIDTH_DP = 210; // Taken from widget_provider.xml: android:minWidth="210dp"
    final int APP_WIDGET_HEIGHT_DP = 210; // Taken from widget_provider.xml: android:minHeight="210dp"

    final int availableWidth = (int) (TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, APP_WIDGET_WIDTH_DP, r.getDisplayMetrics()) + 0.5f);
    final int availableHeight = (int) (TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, APP_WIDGET_HEIGHT_DP, r.getDisplayMetrics()) + 0.5f); 
```

我在[这里](http://pastebin.com/PFy4eDDK)`Service`粘贴了子类的完整代码。

同样在顶部，您会找到负责设置将显示的时间的代码 - 根据需要进行修改：

```
 mCalendar = new Time();

    // Line below sets time that will be displayed - modify if needed.
    mCalendar.setToNow();

    int hour = mCalendar.hour;
    int minute = mCalendar.minute;
    int second = mCalendar.second;

    mMinutes = minute + second / 60.0f;
    mHour = hour + mMinutes / 60.0f; 
```

也不要忘记`Service`在你的文件中声明这个和应用小部件`AndroidManifest.xml`，例如：

```
 <receiver 
        android:name="TimeSettableAnalogClockAppWidget"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">

        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
            <action android:name="android.appwidget.action.APPWIDGET_DISABLED"/>
        </intent-filter>

        <meta-data 
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_provider"/>            

    </receiver>
    <service android:name="TimeSettableAnalogClockService"/> 
```

有关使用服务更新应用小部件的最重要信息将在[此博客文章](http://www.parallelrealities.co.uk/2011/09/using-alarmmanager-for-updating-android.html)中简要介绍。

## 调用绘图

计划更新是在`onUpdate()`您的子类的方法中完成的`AppWidgetProvider`- 在您的`AndroidManifest.xml`文件中声明的 on 。`PendingIntent`当应用小部件从主屏幕中删除时，我们还需要删除。这是在覆盖的`onDisabled()`方法中完成的。请记住声明将调用每个方法之一的两个操作：`APPWIDGET_UPDATE`和`APPWIDGET_DISABLED`. 见上面的摘录`AndroidManifest.xml`。

```
package com.example.anlogclocksettimeexample;

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;

public class TimeSettableAnalogClockAppWidget extends AppWidgetProvider {

    private PendingIntent service = null;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
//      super.onUpdate(context, appWidgetManager, appWidgetIds);
        final AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

        final Calendar time = Calendar.getInstance();
        time.set(Calendar.SECOND, 0);
        time.set(Calendar.MINUTE, 0);
        time.set(Calendar.HOUR, 0);

        final Intent intent = new Intent(context, TimeSettableAnalogClockService.class);

        if (service == null) {          
            service = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        }

        alarmManager.setRepeating(AlarmManager.RTC, time.getTime().getTime(), 1000 * 60 /* ms */, service);
    }

    @Override
    public void onDisabled(Context context) {
        final AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(service);
    }
} 
```

最后一行`onUpdate()`方法安排每 60 秒发生一次重复事件，第一次更新立即发生。

## 只画`AnalogClock`一次

使用上面的代码只调用一次服务的最简单方法是及时安排单个事件而不是重复一个。`alarmManager.setRepeating()`使用以下行进行简单的替换调用：

```
alarmManager.set(AlarmManager.RTC, time.getTime().getTime(), service); 
```

## 结果

以下是`AnalogClock`仅设置一次时间的自定义应用小部件的屏幕截图（请注意模拟时钟时间与状态栏中显示的时间之间的差异）：

![在此处输入图像描述](../Images/643089c87c3218a7bd1fb82b04701688.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:56:46.143

除了当前时间之外，没有办法将时间设置为`AnalogClock`. 这个小部件非常封装。您可以轻松更改它的外观（在 XML 中使用[R.styleable](http://developer.android.com/reference/android/R.styleable.html#AnalogClock_dial)的属性，但没有简单的方法可以更改其行为。

我可能会制作[AnalogClock.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/AnalogClock.java)的副本（将它放在单独的包中可能是个好主意，例如`com.example.widget`）和可绘制时钟的本地副本[clock_dial](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/clock_dial.png)，[clock_hand_hour](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/clock_hand_hour.png)，[clock_hand_minute](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/clock_hand_minute.png)（注意：为了获得最佳结果，您必须创建所有密度的本地副本：[ldpi](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/drawable-ldpi)、[mdpi](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/drawable-mdpi)、[hdpi](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/drawable-hdpi)和[xhdpi](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/drawable-xhdpi)）。有了这些和对代码的小改动，您将能够获得您想要的行为。

## 使用可从 XML 布局设置的属性的自定义可绘制对象

为了能够从 XML 布局文件中设置`dial`和drawable，您需要将这些属性声明为可用于自定义小部件的样式`hand_hour`。`hand_minute`

**注意：**在以下示例中，我已创建`TimeSettableAnalogClock`并将其放入`com.example.widget`包中。

创建`res/values/attrs.xml`具有以下内容的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="TimeSettableAnalogClock">        
        <attr name="dial" format="reference"/>
        <attr name="hand_hour" format="reference"/>
        <attr name="hand_minute" format="reference"/>
    </declare-styleable>
</resources> 
```

`format=reference`意味着值只能是对其他现有元素的引用，例如可绘制对象 ( `@drawable/some_custom_dial`)。

现在可以在 XML 布局文件中使用自定义属性：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/lib/com.example.widget"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.example.widget.TimeSettableAnalogClock
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        custom:dial="@drawable/some_custom_clock_dial"
        custom:hand_hour="@drawable/some_custom_clock_hand_hour"
        custom:hand_minute="@drawable/some_custom_clock_hand_minute"/>

</RelativeLayout> 
```

最后，您需要在`TimeSettableAnalogClock`创建对象时处理这些自定义属性：

```
public TimeSettableAnalogClock(Context context, AttributeSet attrs,
                   int defStyle) {
    super(context, attrs, defStyle);
    Resources r = getContext().getResources();
    TypedArray a =
            context.obtainStyledAttributes(
                    attrs, R.styleable.TimeSettableAnalogClock, defStyle, 0);

    mDial = a.getDrawable(R.styleable.TimeSettableAnalogClock_dial);
    if (mDial == null) {
        mDial = r.getDrawable(R.drawable.clock_dial);
    }

    mHourHand = a.getDrawable(R.styleable.TimeSettableAnalogClock_hand_hour);
    if (mHourHand == null) {
        mHourHand = r.getDrawable(R.drawable.clock_hand_hour);
    }

    mMinuteHand = a.getDrawable(R.styleable.TimeSettableAnalogClock_hand_minute);
    if (mMinuteHand == null) {
        mMinuteHand = r.getDrawable(R.drawable.clock_hand_minute);
    }

    mCalendar = new Time();

    mDialWidth = mDial.getIntrinsicWidth();
    mDialHeight = mDial.getIntrinsicHeight();
} 
```

请注意，我几乎只删除`com.android.internal.`了对任何*drawable*或*styleable*的引用。[其余部分与AnalogClock 构造函数](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/AnalogClock.java#L66)中的相同。

## 使用没有可从 XML 布局设置的属性的自定义可绘制对象

如果您不需要通过 XML 设置属性（例如，您的所有模拟时钟在每个地方看起来都一样），那么您可以简单地解决问题。您只需要可绘制的本地副本（如开头所述），不需要`attrs.xml`文件。您的构造函数应如下所示：

```
public TimeSettableAnalogClock(Context context, AttributeSet attrs,
                   int defStyle) {
    super(context, attrs, defStyle);
    Resources r = getContext().getResources();

    mDial = r.getDrawable(R.drawable.clock_dial);
    mHourHand = r.getDrawable(R.drawable.clock_hand_hour);
    mMinuteHand = r.getDrawable(R.drawable.clock_hand_minute);

    mCalendar = new Time();

    mDialWidth = mDial.getIntrinsicWidth();
    mDialHeight = mDial.getIntrinsicHeight();
} 
```

如您所见，要短得多。XML布局中的用法是一样的，但是你不需要`xmlns:custom`part，当然你不能再设置自定义属性了：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.example.widget.TimeSettableAnalogClock
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</RelativeLayout> 
```

**如果您需要更多帮助，我可以使用更多建议的解决方案代码进一步更新我的答案。**

# java - JSF：XMLGregorianCalendar 的 dateTimeConverter

> ID：11709936
> 
> 赞同：2
> 
> 时间：2012-07-29T14:19:59.497
> 
> 标签：java, jsf, jaxb, converter

我正在使用 REST Web 服务并在我的视图中直接使用 JAXB 对象。一个日期是`XMLGregorianCalendar`这样的：

```
@XmlAttribute(name = "record")
@XmlSchemaType(name = "dateTime")
protected XMLGregorianCalendar record; 
```

尝试使用标准转换器时

```
<h:outputText value="#{bean.value.record}" >
  <f:convertDateTime pattern="dd.MM.yy" />    
</h:outputText> 
```

我在我的 JSF2 环境（JBoss-7.1.1-Final）中收到错误消息（翻译成英文）

```
javax.faces.convert.ConverterException: fSelection:dtSelection:0:j_idt42:
Converting of '2012-07-25T20:15:00' into string not possible. 
```

看来，`XMLGregorianCalendar`默认转换器不支持该类型。我想知道这种日期类型的 JSF 转换器是否可用，因为这个要求似乎并不那么不寻常......

**Edit** Ravi 提供了一个自定义转换器的功能示例，但这似乎不灵活：

*   模式是硬编码的
*   不支持本地用户

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:37:12.867

该值应为 java.util.Date 类型。

所以从 XMLGregorianCalendar 中获取 Date 对象，如下所示：

```
record.toGregorianCalendar().getTime(); 
```

**更新**：

你可以这样使用：

```
<h:outputText value="#{bean.value.record.toGregorianCalendar().time}" >
    <f:convertDateTime pattern="dd.MM.yy" />    
</h:outputText> 
```

这实际上应该有效，但既然你说你得到一个 IllegalAccessException，我不确定确切的原因。

或者，如果您愿意，您也可以编写自己的转换器，转换器将如下所示：

如果您想使用与 dateTimeConverter 相同的属性，则需要将它们作为属性传递给组件并像这样扩展 DateTimeConverter：

```
@FacesConverter("com.examples.Date")
public class XMLGregorianCalConverter extends DateTimeConverter {
 private static final TimeZone DEFAULT_TIME_ZONE = TimeZone.getTimeZone("GMT");
 private String dateStyle = "default";
 private Locale locale = null;
 private String pattern = null;
 private String timeStyle = "default";
 private TimeZone timeZone = DEFAULT_TIME_ZONE;
 private String type = "date";

@Override
public Object getAsObject(FacesContext context, UIComponent component, String newValue) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    Map<String, Object> attributes = component.getAttributes();
    if(attributes.containsKey("pattern")){
        pattern = (String) attributes.get("pattern");
    }
    setPattern(pattern);
    if(attributes.containsKey("locale")){
        locale = (Locale) attributes.get("locale");
    }
    setLocale(locale);
    if(attributes.containsKey("timeZone")){
        timeZone = (TimeZone) attributes.get("timeZone");
    }
    setTimeZone(timeZone);
    if(attributes.containsKey("dateStyle")){
        dateStyle = (String) attributes.get("dateStyle");
    }
    setDateStyle(dateStyle);
    if(attributes.containsKey("timeStyle")){
        timeStyle = (String) attributes.get("timeStyle");
    }
    setTimeStyle(timeStyle);
    if(attributes.containsKey("type")){
        type = (String) attributes.get("type");
    }
    setType(type);

    XMLGregorianCalendar xmlGregCal = (XMLGregorianCalendar) value;
    Date date = xmlGregCal.toGregorianCalendar().getTime();
    return super.getAsString(context, component, date);
}

} 
```

并像这样在您的页面上使用：

```
<h:outputText value="#{bean.value.record}" >
    <f:converter converterId="com.examples.Date" />
    <f:attribute name="pattern" value="dd.MM.yy" />
</h:outputText> 
```

从这个问题启发/复制的代码：[JSF convertDateTime with timezone in datatable](https://stackoverflow.com/questions/7122460/jsf-convertdatetime-with-timezone-in-datatable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:32:22.243

您可以注册一个自定义 XML 适配器，以按照以下方式从 XMLGregorianCalendar 转换为日历或日期：[如何使用 JAXWS 和 APT 自定义日期/时间绑定？](https://stackoverflow.com/questions/2942757/how-do-i-customise-date-time-bindings-using-jaxws-and-apt)

# c# - BackgroundWorker - CancellationPending 在 RunWorkerCompleted 中更改为 false。为什么？

> ID：11709937
> 
> 赞同：4
> 
> 时间：2012-07-29T14:20:16.320
> 
> 标签：c#, backgroundworker

取消 BackGroundWorker 后，在 DoWork 中，CancellationPending 为 true，但当他来到 RunWorkerCompleted 时，CancellationPending 为 false。我不知道我做错了什么？

```
static BackgroundWorker b1;

static void Main(string[] args)
{
    b1=new BackgroundWorker();
    b1.DoWork += new DoWorkEventHandler(work1);
    b1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(completed);
    b1.WorkerSupportsCancellation = true;
    b1.RunWorkerAsync("Hellow");
    Console.ReadLine();
}

private static void completed(object sender, RunWorkerCompletedEventArgs e)
{
    if (((BackgroundWorker)sender).CancellationPending)
        Console.WriteLine("Canceled!");
    else
        Console.WriteLine("Result:" + e.Result);//it goes here every time
}

private static void work1(object sender, DoWorkEventArgs e)
{
    ((BackgroundWorker)sender).CancelAsync();
    if (((BackgroundWorker)sender).CancellationPending)
    {
        e.Cancel = true;
    }
} 
```

顺便说一句，如何将 DoWork 中发生的错误添加到 RunWorkerCompletedEventArgs.Error 以将其发送给用户？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T15:59:55.630

是的，BackgroundWorker 类在引发 RunWorkerCompleted 事件之前将 CancellationPending 属性设置为 false。工人是否实际被取消。

这是有意为之的，它可以防止您掉入使用线程时始终存在的令人讨厌的陷阱。由于一种称为“线程竞争”的错误，使用线程的代码通常会随机且不可预测地出现错误行为。这是一种非常常见的错误，并且非常难以调试。

如果 BGW 不这样做，那么在您的预期方法中很容易出错的是，当您看到 CancellationPending 设置为 true 时，您会假设工作人员已被取消。但这是一种错觉，你无法分辨它被取消和正常完成之间的区别。极端情况是您在工作人员完成前一微秒调用 CancelAsync()。工作人员甚至没有机会看到 CancellationPending 标志设置为 true，它正忙于完成 DoWork 事件处理程序方法的最后一位。这是一场线程竞赛，工作人员在您的呼叫之前比赛并正常完成。

避免此错误的正确握手是您的工作人员在看到 CancellationPending 属性设置为 true 时将 e.Cancel 设置为 true。当然，停止它正在做的事情。现在可以确定了，RunWorkerCompleted 事件处理程序中的 e.Cancelled 属性是 e.Cancel 的副本。因此，您的代码现在可以可靠地告诉您工作人员是否看到了取消请求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T14:33:15.243

我相信 CancellationPending 属性是在后台操作期间使用的（在您的 work1 方法中）。它将告诉后台工作人员您已请求取消后台操作。一旦调用了 RunWorkerCompleted 事件，后台工作人员已经完成了取消请求的工作，因此取消不再处于挂起状态。

编辑： RunWorkerCompletedEventArgs 有一个 Canceled 属性，它会告诉你后台操作是否被取消。

如果您从 DoWork 方法（在您的情况下为 work1）抛出异常，它应该被 BackgroundWorker 捕获并填充 RunWorkerCompletedEventArgs 的 Error 属性。

# javascript - jQuery.trigger('click') 在 Mac 上的 Chrome 扩展中不起作用

> ID：11709940
> 
> 赞同：3
> 
> 时间：2012-07-29T14:20:41.680
> 
> 标签：javascript, jquery, macos, google-chrome, google-chrome-extension

由于我的 Chrome 扩展在 Mac 下无法运行，我将代码分解并发现了问题：

*背景.js*

```
chrome.browserAction.onClicked.addListener(function(tab){
    alert("Goin to");
    chrome.tabs.executeScript(tab.id, {file: "script.js"});
}); 
```

*脚本.js*

```
$('#Hoster_30').trigger('click');
alert("Clicked"); 
```

jQuery 已加载并显示两个警报，但未触发 click 事件。当我直接在页面上的 js 控制台中输入触发器时它工作正常，在 Windows 下它也可以在插件中工作。

这是我的*manifest.json*

```
{
    "name": "MacAddon",
    "version": "0.1",
    "permissions": ["tabs", "http://*/", "https://*/"],
    "background": {
        "scripts": ["background.js"]
    },  
    "browser_action": {
        "default_title": "MacAddon"
    },
    "content_scripts": [
    {
      "matches": ["http://*.kinox.to/*", "http://*.streamcloud.eu/*"],
      "js": ["jquery.js"]
    }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T10:33:13.747

对于 Chrome 19-，您必须[注入代码](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)并使用网站自己的方法来切换 Episode。

```
var s = document.createElement('script');
s.textContent = "getPlayerByMirror($('#Hoster_30'), 'Auto');";
s.onload = function() {
    this.parentNode.removeChild(this);
};
document.head.appendChild(s); 
```

（为了找出必须调用哪个函数，我[检查`$().data('events')`了控制台中的对象](https://stackoverflow.com/a/571087)：）`$('#Hoster_30').data('events').click[0].handler`。
在 Chrome 20+ 中，使用`.trigger('click')`内容脚本可以正常工作：

```
$('#Hoster_30').trigger('click'); 
```

谢谢罗布[·W](https://stackoverflow.com/users/938089/rob-w)。在这里非常欢迎我并[回答问题](https://stackoverflow.com/questions/11709940/jquery-triggerclick-doesnt-work-in-chrome-extension-on-mac#comment15533043_11709940)！

# php - 在 bash 中分解文件

> ID：11709942
> 
> 赞同：1
> 
> 时间：2012-07-29T14:20:49.033
> 
> 标签：php, linux, bash, explode

我想要做的是在我的应用程序的 bash 脚本中模拟一个二维数组。（我是一个用 bash 编写它的白痴，但是一旦我在截止日期之前有一个工作副本，我就会重新编写它）

我想从中读取的 server.data 文件：

```
1:hello:there
2:im:a
3:computing:system 
```

**我比 bash 更了解 PHP，但这是我的意思的伪代码**

```
foreach(line in server.data) {         
 arr = explode(":", server.data)  
  echo arr[0]    
  echo arr[1]  
  echo arr[2]  
  echo \n  
} 
```

将返回这些值：

```
1 hello there
2 im a
3 computing system 
```

**有人可以编写一个小的 bash 脚本，解释如何将每一行放入一个数组中吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T14:47:36.897

```
cat server.data | 
while read line; do  
   IFS=: 
   set - $line
   echo $1  
   echo $2  
   echo $3
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-29T14:15:12.217

一个更一般的答案：如果你想在 bash 中模仿 php 的“爆炸”，只有一个字符串（或来自文件的数据），你可以使用类似的东西：

```
#!/bin/bash
# explode functionality in bash

data="one:two:three:and 4"

echo $data | while read line; do
   IFS=:
   set - $line
   echo $1
   echo $2
   echo $3
   echo $4
done 
```

另一方面，如果您的数据来自文件，那么您可以将文件的内容重定向到 while 循环：

```
 #!/bin/bash
  # explode 

  filename="data"

  while read line; do
     IFS=:
     set - $line
     echo $1
     echo $2
     echo $3
     echo $4
  done < $filename 
```

这种重定向比`cat $filename`进入 while 循环要好，因为它不需要派生另一个进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:56:47.193

假设文本文件名为“x.txt”：

```
#!/bin/bash

for line in `cat x.txt`; do
    a[${i}]=$line;
    i=$i+1;
done;

echo ${a[0]};
echo ${a[1]};
echo ${a[2]}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T15:01:47.243

```
while IFS=: read -a arr; do
    echo "${a[@]}"
    echo -n "${arr[0]} "
    echo -n "${arr[1]} "
    echo "${arr[2]}"
done < server.data 
```

这些`echo`语句只是演示了一些访问数组的方法；所有的工作都由`read -a`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T15:08:49.940

这为您提供了一个伪二维数组，您可以在其中通过连接每个维度索引来访问各个元素：

```
while read line
do
    ((i++))
    j=0
    IFS=:
    for e in $line
    do
        ((j++))
        lines["$i$j"]=$e
    done
done < data.txt

echo ${lines[@]}
1 hello there 2 im a 3 computing system
echo ${lines[12]}
hello 
```

# jquery - 如何使用 jQuery 将我的匿名函数移动到外部函数？

> ID：11709947
> 
> 赞同：0
> 
> 时间：2012-07-29T14:21:57.097
> 
> 标签：jquery

我有以下 jQuery 代码：

```
$("#dataTable tbody")
    .on("click", "tr", function (event) {
        $(oTable.fnSettings().aoData).each(function () {
            $(this.nTr).removeClass('row_selected');
        });
        $(this).addClass('row_selected');
        var rk = $(this).attr('data-rk');
        var pk = $(this).attr('data-pk');
        var en = $(this).attr('data-entity');
        var row = $(this).attr('id').split("_")[1];
        var tab = $(this).attr('data-table');
        var params = '?pk=' + pk + '&rk=' + rk;
        var id = en + " " + pk + " - " + rk;

        $("#deleteLink")
            .attr('data-href', '/Admin/' + tab + 's/Delete' + params)
            .attr('data-row', row)
            .attr('data-entity', en)
            .attr('data-title', 'Delete ' + id)
            .attr('title', 'Delete ' + id)
            .prop('disabled', false);

    }); 
```

有没有办法可以将此代码移动到函数中？当 $(this) 不是匿名函数的一部分时，我特别困惑如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:24:40.463

你是这个意思？（顺便说一句，我稍微重构了你的代码）

```
var clickHandler = function () {
    $( oTable.fnSettings().aoData ).each(function () {
        $( this.nTr ).removeClass( 'row_selected' );
    });

    $( this ).addClass( 'row_selected' );

    var rk = $( this ).data( 'rk' );
    var pk = $( this ).data( 'pk' );
    var en = $( this ).data( 'entity' );
    var row = this.id.split( '_' )[1];
    var tab = $( this ).data( 'table' );
    var params = '?pk=' + pk + '&rk=' + rk;
    var id = en + ' ' + pk + ' - ' + rk;

    $( '#deleteLink' )
        .attr({
            'data-href': '/Admin/' + tab + 's/Delete' + params,
            'data-row': row,
            'data-entity': en,
            'data-title': 'Delete ' + id,
            'title': 'Delete ' + id
        })
        .prop( 'disabled', false );
}; 
```

进而：

```
$( '#dataTable' ).on( 'click', 'tbody tr', clickHandler ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:25:16.063

匿名函数并不是很特别，你只需创建一个普通函数然后传递它

```
function external(event) {
    $(oTable.fnSettings().aoData).each(function() {
        $(this.nTr).removeClass('row_selected');
    });
    $(this).addClass('row_selected');
    var rk = $(this).attr('data-rk');
    var pk = $(this).attr('data-pk');
    var en = $(this).attr('data-entity');
    var row = $(this).attr('id').split("_")[1];
    var tab = $(this).attr('data-table');
    var params = '?pk=' + pk + '&rk=' + rk;
    var id = en + " " + pk + " - " + rk;
    $("#deleteLink").attr('data-href', '/Admin/' + tab + 's/Delete' + params).attr('data-row', row).attr('data-entity', en).attr('data-title', 'Delete ' + id).attr('title', 'Delete ' + id).prop('disabled', false);
}
//Pass the function like any other variable
$("#dataTable tbody").on("click", "tr", external); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:25:51.100

当然！只需创建一个接受事件作为参数的函数：

```
$("#dataTable tbody").on("click", "tr", clickHandler);

var clickHanlder = function (event) {
    $(oTable.fnSettings().aoData).each(function () {
        $(this.nTr).removeClass('row_selected');
    });
    $(this).addClass('row_selected');
    var rk = $(this).attr('data-rk');
    var pk = $(this).attr('data-pk');
    var en = $(this).attr('data-entity');
    var row = $(this).attr('id').split("_")[1];
    var tab = $(this).attr('data-table');
    var params = '?pk=' + pk + '&rk=' + rk;
    var id = en + " " + pk + " - " + rk;

    $("#deleteLink")
        .attr('data-href', '/Admin/' + tab + 's/Delete' + params)
        .attr('data-row', row)
        .attr('data-entity', en)
        .attr('data-title', 'Delete ' + id)
        .attr('title', 'Delete ' + id)
        .prop('disabled', false);

}; 
```

`$(this)`在这种情况下，jQuery 将为您正确绑定。

# c# - 它是 C# 错误吗？

> ID：11709949
> 
> 赞同：3
> 
> 时间：2012-07-29T14:22:03.553
> 
> 标签：c#

以下代码在 VS2010 中给出了编译时错误：

`Use of unassigned local variable 'error'`

```
leveldb_memory error;

try
{
    return leveldb_open(options, name, out error); // <== Notice `out error`
}
finally
{
    Validate(error); // <== Use of unassigned local variable 'error'
} 
```

这似乎不正确，有没有办法在不修改代码的情况下克服这个错误？

* * *

**编辑**

哦，好吧，这不是 C# 错误... :(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-29T14:25:09.820

`error`没有初始值。`leveldb_open`如果在设置之前抛出异常，它仍然不会有。

因此，`error`在不为其设置值的情况下使用可能会导致错误。

如果`leveldb_memory`是可空类型，您可以将其初始化为`null`：

```
leveldb_memory error = null; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-29T14:25:09.250

不，`leveldb_open`可能会引发导致`error`无法设置的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T14:29:59.773

```
leveldb_memory error = default( levelldb_memory );
try {
    return leveldb_open( options, name, out error );
} finally {
    Validate( error );
} 
```

`default`从类型创建对象而不在其构造函数上运行。当您在`try`块中执行某些不会影响其后的操作时，因为代码可以捕获异常并且不分配错误。

顺便说一句，它可以调用`Validate`空对象。但`default`部分是隐藏错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T14:24:41.933

在您的代码中，变量 Error 永远不会被赋值。我不知道还能如何回答这个问题？这肯定不是 ac# 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-29T15:20:22.607

您必须先初始化`error`变量，然后才能将其传递给方法。

所以只要这样做`error = null`，编译器就会很高兴。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-29T14:27:56.963

这不是 C# 错误（-:
虽然你使用`out error`which 允许函数分配给`error`任何人，但没有人保证你里面有一个赋值。因此你必须自己检查它......

# c++ - 将 OpenCV 窗口嵌入 Qt GUI

> ID：11709952
> 
> 赞同：9
> 
> 时间：2012-07-29T14:22:10.247
> 
> 标签：c++, c, qt, opencv

OpenCV 最近[升级了它的显示窗口](http://opencv.willowgarage.com/documentation/c/highgui_qt_new_functions.html)，当它用于 Qt 时。它看起来非常好，但是我没有发现任何可能将它嵌入到现有的 Qt GUI 窗口中。唯一的可能性似乎是创建`cvNamedWindow`or `cv::namedWindow`，但它创建了一个自由浮动的独立窗口。

是否有可能**在**现有 GUI 中创建该 OpenCV 窗口？我在 OpenCV 论坛上只能找到[一个未回答的问题](http://opencv-users.1802565.n2.nabble.com/Need-to-include-a-cvNamedWindow-into-anothet-window-td7439443.html)，有点类似于我自己的问题。

[在 Qt 中显示 OpenCV 图像](https://stackoverflow.com/questions/8864400/how-to-push-an-opencv-image-viewing-window-into-a-qt-gui-with-visual-studio?rq=1)是一种直接的可能性，但它有两个主要问题：

1.  它涉及逐像素复制图像，而且速度很慢。它对每个像素都有函数调用！（在我的测试应用程序中，如果我从图像中创建一个视频，并将其显示在 a`cvNamedWindow`中，即使同时处理多个视频，它也会非常流畅地运行，但是如果我通过`IplImage`--> `QImage`--> `QPixmap`-->`QLabel`路线，即使是一个视频也有严重的延迟）
2.  我不能使用`cvNamedWindow`它的那些漂亮的新控件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T15:13:54.570

首先，图像转换并没有你想象的那么低效。至少在我的代码中每个像素的“函数调用”（您引用的问题的答案之一）是通过优化编译内联的。

其次，highgui/imshow 中的代码也是如此。无论哪种方式，您都必须从矩阵获取 ARGB 图像。转换 QImage -> QPixmap 基本上只是将数据从主内存移动到 GPU 内存。这也是为什么不能直接访问QPixmap数据，必须通过QImage的原因。

第三，如果您使用 QGLWidget 来绘制图像，它会快几倍，并且我假设您在 OpenCV 构建中启用了 QT_OPENGL。我使用 QPainter 在 QGLWidget 中绘制 QPixmap，速度没有问题。这是示例代码：

[http://sourceforge.net/p/gerbil/svn/19/tree/gerbil-gui/scaledview.h](http://sourceforge.net/p/gerbil/svn/19/tree/gerbil-gui/scaledview.h)

[http://sourceforge.net/p/gerbil/svn/19/tree/gerbil-gui/scaledview.cpp](http://sourceforge.net/p/gerbil/svn/19/tree/gerbil-gui/scaledview.cpp)

**现在回到您最初的问题：**您当前的选择是从 OpenCV 获取代码，将其包含在不同命名空间下的项目中，然后根据您的需要进行更改。除此之外，你现在别无选择。OpenCV 的 highgui 使用它自己的事件循环，连接到 X 服务器等，它是你可以拦截的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:11:50.470

我的第一个猜测是想说：我敢肯定，如果您深入研究 namedWindow 的代码，您会发现它们使用某种标准（尽管不经常引用）对象来绘制所述窗口（在openCV 代码）。如果你有足够的野心，你可以自己扩展这个类，直接连接到 Qt 中的框架或自定义小部件。甚至可能有一种方法可以使用 Qt 框架的类似方法或（通用）小部件类的扩展来获取整个窗口并将其嵌入。这是一个非常有趣的问题，并且与我最近一直在做的工作直接相关，所以我会继续思考和研究它，看看我是否能想出其他更有帮助的东西。

[编辑] 您对哪些特定的新控件如此感兴趣？与我的第一个建议相反，程序员扩展 Qt 控件来模拟它可能会更有效。[/EDIT]

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-29T14:54:20.007

只需查看 opencv highgui 实现即可。我记得它使用qt。

# c# - 保存编辑的表单值的 Asp.net mvc 2 问题

> ID：11709953
> 
> 赞同：1
> 
> 时间：2012-07-29T14:22:11.137
> 
> 标签：c#, asp.net-mvc-2, object, edit

我在编辑表格中的列时遇到问题，即使我可以很容易地添加和删除它们。我以前做过这种事情并且没有任何问题，所以我很困惑为什么它现在会发生。

我可以单击球员姓名并获取他的详细信息，但是当我在视图中编辑球员详细信息并单击保存时，它说序列不包含任何元素。

有人可以帮我解决这个问题，因为它让我发疯，非常感谢，因为它很可能是一个简单的解决方案。

这是我的代码：

存储库：

```
public Players PlayersDetails(String Name)
{
    var players = (from p in _entities.Players      
                where p.FullName == Name
                select p).First();
    return players;
}

public void playersEdit(Players playersToEdit)
{
    var originalPlayer = PlayersDetails(playersToEdit.FullName);
    _entities.ApplyPropertyChanges(originalPlayer.EntityKey.EntitySetName, playersToEdit);
    _entities.SaveChanges();
} 
```

存储库：

```
public interface IHuddRLRepository
{
    //Player List
    IEnumerable<Players> PlayersList();
    Players PlayersDetails(String Name);
    void playersCreate(Players playersToCreate);
    void playersEdit(Players playersToEdit);
    void playersDelete(Players playersToDelete);
} 
```

控制器：

```
public ActionResult Edit(String FullName)
{
    Players players = _entities.PlayerDetails(FullName);
    return View(players);
}

[ValidateInput(false)]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(Players playersToEdit)
{
    if (!ModelState.IsValid)
    {
        return View();
    }
    else
    {
        _entities.playersEdit(playersToEdit);
        return RedirectToAction("Index", "Players");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:21:19.950

序列不包含任何元素意味着查询在您期望的时候没有返回结果（使用 First() 而不是 FirstOrDefault() ，当没有找到元素时返回 null ）。我猜，既然您尝试使用已编辑的玩家数据进行查找，那么您肯定更改了玩家的名称，而数据库中尚不存在该名称。

您应该做的是使用一个 ID 进行玩家查找，因为它是不可编辑的，并且会引用您尝试编辑的数据。

# f# - F# 查询表达式 - 为什么会出现这种类型比较错误？

> ID：11709954
> 
> 赞同：1
> 
> 时间：2012-07-29T14:22:14.523
> 
> 标签：f#, f#-3.0

我有以下代码块：

```
let rec Sieve p nums =
    let filtered = query { for n in nums do 
                            where (n % p = 0 && n <> p)
                            select n } |> Seq.toList
    if filtered = nums then filtered       // Error
    else
        let nextIndex = 1 + (filtered |> List.findIndex (fun x -> x = p))
        if nextIndex > filtered.Length then filtered
        else
            let next = filtered.[nextIndex]
            Sieve next filtered 
```

当我编译这个时，我得到'**类型''a list'与'System.Linq.IQueryable<'a>'不兼容**。在我用注释错误标记的行上。

我发现如果我为 Sieve 添加类型注释以使其成为 nums (nums: int list)，那么它将正常工作。但是，如果我替换 nums 就行了

```
if filtered = nums then filtered 
```

和：

```
if filtered = [1..10] then filtered 
```

然后我得到相同的错误，指的是在线过滤：

```
Sieve next filtered 
```

因为当我被过滤时，我在使用它之前将其直接转换为列表，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T15:28:43.893

我会说这是类型检查器的令人困惑的行为。

如果`nums`事先不知道 type of （如您的示例中所示），则类型检查器会查看第一次使用 of `nums`in`query`块并将其推断为`IQueryable<'a>`. 由于 F# List 没有实现接口，因此之间的`IQueryable`统一失败了。`'a list``IQueryable<'a>`

如果你在声明中指定了`nums`as的类型，那么in的使用看起来就像是对集合的正常使用。`'a list``nums``for n in nums do``IEnumerable`

那就是说你使用了错误的工具来完成这项工作。查询表达式旨在用于处理外部数据源。应该通过序列表达式来促进内存中的查询：

```
let filtered = seq { for n in nums do 
                        if n % p = 0 && n <> p then
                             yield n } |> Seq.toList 
```

# ruby-on-rails - rails : Ruby on Rails 计算连接表的“等级”

> ID：11709957
> 
> 赞同：0
> 
> 时间：2012-07-29T14:22:25.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

我有 2 个表（与 sqlite3 的多对多关系）：-User -Credit（带有 user_id 和分数）

我尝试计算用户的排名。为了计算这个用户的排名，我需要找到这个用户所有积分的总和。但我不知道如何做到这一点:(

我尝试过这样的事情，但它不起作用：

```
User.all.join(:credits).order(sum(:score)).index(@user) 
```

我收到此错误：

```
TypeError in UsersController#index
can't convert Symbol into String 
```

感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T22:26:41.337

要求和（或计数），您应该将 sum 与 group 一起使用（即在“group by”中转换），因为您需要以某种方式对用户进行分组才能对他们的分数求和。我没有尝试以下代码，但它应该是这样的：

```
User.select("users.name, sum(credits.score)").joins(:credits).group("credits.user_id") 
```

我希望这可以帮助你

# android - 从 AM 更改为 PM 时时间选择器崩溃

> ID：11709961
> 
> 赞同：0
> 
> 时间：2012-07-29T14:22:51.627
> 
> 标签：android, timepicker

所以我的应用程序有 2 个按钮。一个打开日期选择器对话框片段，另一个打开时间选择器片段。按钮文本显示选定的日期和时间。日期选择器工作得很好，但我遇到了时间选择器的几个问题，这些问题可能都相关。问题 1：选择器设置为 12 小时时间，单击 AM 或 PM 在它们之间切换会导致应用程序崩溃（logcat 将粘贴在下面）。问题2：选择新时间后，如果再次单击按钮，时间选择器有时会显示当前时间而不是上次选择的时间。有时它会显示完全不同的时间（例如，我在 11 点单击它，然后将其更改为 10 点。当我再次单击该按钮时，时间选择器设置为下午 6 点）。我还没有找到重复这种行为的方法。问题 3：

**日志猫**

```
07-29 23:59:03.483: E/Trace(2167): error opening trace file: No such file or directory (2)
07-29 23:59:12.703: E/AndroidRuntime(2167): FATAL EXCEPTION: main
07-29 23:59:12.703: E/AndroidRuntime(2167): java.lang.ArrayIndexOutOfBoundsException: length=17; index=23
07-29 23:59:12.703: E/AndroidRuntime(2167):     at java.util.Calendar.set(Calendar.java:1210)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at com.rone.datetimepractice.PickerActivity$2.updateChangedTime(PickerActivity.java:71)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at com.rone.datetimepractice.TimeDialogFragment$1.onTimeSet(TimeDialogFragment.java:46)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at android.app.TimePickerDialog.tryNotifyTimeSet(TimePickerDialog.java:130)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at android.app.TimePickerDialog.onClick(TimePickerDialog.java:115)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at android.os.Looper.loop(Looper.java:137)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at java.lang.reflect.Method.invokeNative(Native Method)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at java.lang.reflect.Method.invoke(Method.java:511)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-29 23:59:12.703: E/AndroidRuntime(2167):     at dalvik.system.NativeStart.main(Native Method) 
```

**PickerActivity 中第 71 行周围的代码**- 确切的行是“now.set(hourOfDay, minute);”

```
public void showDialogTime() {
    FragmentTransaction ftTime = getFragmentManager().beginTransaction();
    fragTime = TimeDialogFragment.newInstance(this, new TimeDialogFragmentListener() {
        public void updateChangedTime(int hourOfDay, int minute) {
            buttonTime.setText(String.valueOf(hourOfDay)+":"+String.valueOf(minute));
            now.set(hourOfDay, minute); 
        }}, now);
    fragTime.show(ftTime, "TimeDialogFragment");
} 
```

**TimeDialogFragment 中第 46 行周围的代码**- 特别是 mListener 行

```
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        mHour = hourOfDay;
        mMinute = minute;
        mListener.updateChangedTime(hourOfDay, minute);
    } 
```

**这是完整的 PickerActivity.java 文件减去 datepicker 部分：**

```
public class PickerActivity extends Activity {

TimeDialogFragment fragTime;
Button buttonDate, buttonTime;
Calendar now;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    now = Calendar.getInstance();

    buttonTime = (Button) findViewById(R.id.time_button);
    buttonTime.setText(String.valueOf(now.get(Calendar.HOUR))+":"+
            String.valueOf(now.get(Calendar.MINUTE)));
}

public void clickMe(View v) {
    int id = v.getId();
    switch (id) {
    case R.id.date_button :
        showDialogDate();
        break;
    case R.id.time_button :
        showDialogTime();
        break;
    default:
        break;
}}

public interface TimeDialogFragmentListener {
    public void updateChangedTime(int hourOfDay, int minute);
}

public void showDialogTime() {
    FragmentTransaction ftTime = getFragmentManager().beginTransaction();
    fragTime = TimeDialogFragment.newInstance(this, new TimeDialogFragmentListener() {
        public void updateChangedTime(int hourOfDay, int minute) {
            buttonTime.setText(String.valueOf(hourOfDay)+":"+String.valueOf(minute));
            now.set(hourOfDay, minute); 
        }}, now);
    fragTime.show(ftTime, "TimeDialogFragment");
}} 
```

**这是 TimeDialogFragment.java 文件：**

```
public class TimeDialogFragment extends DialogFragment {

static Context mContext;
static int mHour;
static int mMinute;
static TimeDialogFragmentListener mListener;

public static TimeDialogFragment newInstance(Context context,
        TimeDialogFragmentListener listener, Calendar now) {
    TimeDialogFragment dialog = new TimeDialogFragment();
    mContext = context;
    mListener = listener;

    mHour = now.get(Calendar.HOUR);
    mMinute = now.get(Calendar.MINUTE);

    Bundle args = new Bundle();
    args.putString("title", "Set Time");
    dialog.setArguments(args);
    return dialog;
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new TimePickerDialog(mContext, mTimeSetListener, mHour, mMinute, false);
}

private TimePickerDialog.OnTimeSetListener mTimeSetListener =
        new TimePickerDialog.OnTimeSetListener() {

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        mHour = hourOfDay;
        mMinute = minute;
        mListener.updateChangedTime(hourOfDay, minute);
    }};} 
```

如果这对我们解决此问题的方式有任何影响，我确实打算将时间保存到我的数据库中，以便我可以按时间对结果进行排序，并允许用户将任何数据库行/记录上的时间更改为他们选择的任何时间. 我还想在按钮上包含 AM/PM 文本，但一旦上述问题得到解决，我很乐意自己解决这些问题。任何帮助表示赞赏。

除了上述之外，如果我改变

```
return new TimePickerDialog(mContext, mTimeSetListener, mHour, mMinute, false); 
```

到

```
return new TimePickerDialog(mContext, mTimeSetListener, mHour, mMinute, true); 
```

在 TimeDialogFragment.java 文件中，当在相反的 AM/PM 括号中选择一个小时时，它会立即崩溃，例如。现在是 0.50（上午 12.50），但如果我选择 23.50（下午 11.50），它会因与上述相同的 logcat 错误而崩溃。更改为另一个上午时间不会导致任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:43:32.053

更新日历的时间时，应该如下：

```
public void updateChangedTime(int hourOfDay, int minute) {
    buttonTime.setText(String.valueOf(hourOfDay) + ":" + String.valueOf(minute));
    now.set(Calendar.HOUR_OF_DAY, hourOfDay);
    now.set(Calendar.MINUTE, minute);
} 
```

# python - django中python的导入路径

> ID：11709962
> 
> 赞同：0
> 
> 时间：2012-07-29T14:22:58.623
> 
> 标签：python, django, import, path

为什么 ROOT_URLCONF (default) = 'mysite.urls'，而不仅仅是 'urls' 即使 settings.py 已经在 'mysite' 目录中。

from "myApps.views" import * in url.py in myApps 目录也令人困惑。

我可以安全地假设，在应用程序（例如 mysite）中，
当我处理“mysite”目录中的文件时，1\. mysite.module_name 而不仅仅是普通的 module_name 是正确的路径，并且
2\. myApp.module_name 是当我处理“myApp”目录中的文件时，正确的路径是什么？

在正常的 python 设置中，我可以查看 sys.path，但我不确定应该如何查看 sys.path，例如 mysite/url.py。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:29:37.410

[https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

解释 mysite 是实际的 python 包，您将要使用它来导入其中的任何东西

在 mysite 内部总是使用它来导入任何东西，包括应用程序

# vim - Vim : 突出显示每个文件类型的 TODO

> ID：11709965
> 
> 赞同：13
> 
> 时间：2012-07-29T14:23:37.033
> 
> 标签：vim, editor, syntax-highlighting

无论编辑什么文件（代码或普通文本），我都想在 vim 中突出显示 TODO 一词。它目前适用于许多不同的语言（例如，默认情况下，TODO 在 C/Java 注释中突出显示），但我将 vim 用于非代码文本文件，我也希望看到为它们突出显示的 TODO。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-29T15:11:48.690

只能通过使用`:match`/来为每个文件类型突出显示 TODO 并且可能不会破坏其他语法规则`matchadd()`：

```
augroup HiglightTODO
    autocmd!
    autocmd WinEnter,VimEnter * :silent! call matchadd('Todo', 'TODO', -1)
augroup END 
```

# c++ - 搜索给定单词的字符串并返回一个布尔值

> ID：11709966
> 
> 赞同：0
> 
> 时间：2012-07-29T14:23:44.263
> 
> 标签：c++, string

我是这个网站的新手，我想问是否有人知道如何解决我的问题。我已经在网上搜索了几个小时，但没有找到任何适合我的东西。任何帮助将不胜感激。

1）我必须编写一个要求输入单词的函数。
2) 将此单词添加到数组中。
3) 如果一个词与给定的词匹配，则搜索一个字符串。
4) 如果为真，则返回布尔值，否则为假。

到目前为止，我对我的功能做了什么。所以我相信我已经接近它了（我只需要 for 循环来搜索这个词）。

```
bool checkValidTitle( string modules[MODULENO+1]){
    string array[1][20];
    cout<< "Put the module: ";
    cin>> array[1][20]; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:58:30.670

这是您被要求编写的函数

```
bool checkValidTitle(string modules[], string word_to_check)
{
  for (int i = 1; i <= MODULENO; ++i)
    if (modules[i] == word_to_check)
       return true;
  return false;
} 
```

像这样使用它

```
string modules[MODULENO+1] = {"", "Maths", "Sciences", "French", "English"};
if (checkValidTitle(modules, "Maths"))
   cout << "Maths is valid\n";
else
   cout << "Maths is not valid\n";
if (checkValidTitle(modules, "Russian"))
   cout << "Russian is valid\n";
else
   cout << "Russian is not valid\n"; 
```

剩下的就交给你了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:46:14.183

我在那天写了一个函数，如果第一个字符串包含第二个字符串，它会返回一个布尔值：

```
bool contains(const std::string & str, const std::string substr)
{
    if(str.size()<substr.size()) return false;

    for(int i=0; i<str.size(); i++)
    {
        if(str.size()-i < substr.size()) return false;

        bool match = true;
        for(int j=0; j<substr.size(); j++)
        {
            if(str.at(i+j) != substr.at(j))
            {
                match = false;
                break;
            }
        }
        if(match) return true;
    }
    return false;
} 
```

我已经测试了一段时间，它似乎工作。它用蛮力搜索，但我尽量优化。

使用此方法，您可以执行以下操作：

```
std::string main_str = "Hello world!";
std::string sub_str = "ello";
std::string sub_str2 = "foo";

bool first = contains(main_str, sub_str); //this will give you true
bool second = contains(main_str, sub_str2); //this will give you false 
```

现在我真的不明白，你想要什么字符串数组，但我认为，有了这个，你可以获得所需的输出。

# encryption - ZFS 之上的 encfs

> ID：11709967
> 
> 赞同：1
> 
> 时间：2012-07-29T14:23:49.500
> 
> 标签：encryption, freebsd, fuse, zfs

我想切换到 ZFS，但仍想加密我的数据。ZFS 的本机加密已在“ [ZFS 池版本号 30](http://en.wikipedia.org/wiki/ZFS#Release_history) ”中添加，但我在 FreeBSD 上使用版本 28 的 ZFS。我的问题是 encfs（保险丝加密）将如何影响 ZFS 的特定功能，如数据完整性和重复数据删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:28:13.537

encfs 对文件/目录名称长度的限制比 zfs 短。我不记得了，但每个对象可能少于 255 个字符。如果您碰巧有任何名称超过该限制的文件/目录，您将在复制到已安装的 encfs 资源期间收到 i/o 错误，并且不会创建有问题的文件/目录，仅此而已。

我不使用重复数据删除（不幸的是 RAM 太少），但由于 encfs 使用 ECB 模式来加密文件名，那么在加密方面自然会看到相似的文件名（文件属性也没有改变），这对于工具来说是幸运的像rsync。不幸的是，对于重复数据删除，encfs 将数据签名 (hmac) 用于初始化向量，这会使相同内容的副本完全不同。找到一种方法来阻止这种行为可能是可行的，但是数据完整性取决于它，所以我不建议这样做。

如果您需要设备级加密，请查看 cryptsetup。为此，您需要将池从迁移`/dev/disk/by-id/ata-*`到`/dev/disk/by-id/dm-name-*`设备。这不会禁止使用重复数据删除，只会导致轻微的性能损失。而且您必须对解密的数据进行操作以进行备份，这可能是不可取的。

目前我正在使用这两种方法（即 cryptsetup 和 encfs）。这似乎有点多余，但我发现有必要避免解密数据以进行备份以及将加密参数以纯文本形式存储在 .encfs.xml 文件中，这会打扰我偏执的安全感；）

# mysql - 如何在 SQL 数据库中选择最新的 x 个条目

> ID：11709972
> 
> 赞同：2
> 
> 时间：2012-07-29T14:24:26.303
> 
> 标签：mysql, sql

我有如下 SQL 查询：

```
SELECT * FROM `mytable` WHERE 'myfield' = false 
```

如何选择最新的 x 个条目，例如最新的 10 个？

我需要如何在 SQL 中格式化它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T14:28:05.203

除非您在该表中有一些表示插入/更新时间的字段，否则您不能这样做。您需要类似的东西才能添加`ORDER BY... LIMIT 10`子句。另一种选择是有一个带有`AUTO_INCREMENT`属性的数字字段（可能是主键？）。

RDBMS 没有义务以特定顺序返回行（并且依赖它是错误的），除非您明确指定它。

# ajax - JSF2 通过 AJAX 从 Backing Bean 获取 JSON 数据

> ID：11709976
> 
> 赞同：1
> 
> 时间：2012-07-29T14:24:37.607
> 
> 标签：ajax, jsf-2

我正在使用 RichFaces 4。我使用 flot 作为 JQuery 图表库，我想实现一个图表，它通过 AJAX 不断刷新。

我通过 JSON 从我的支持 bean 获取图表数据。

我不知道如何将新数据从支持 bean 获取到 javascript 变量中。据我了解，我无法使用`<f:ajax>`，因为没有用户交互，也没有使用 html 输入元素。

我认为解决方案是使用`jsf.ajax.request`. 但我也不明白如何在没有输入元素的情况下调用它。

以下是一段代码，它应该是什么样子的，但我不知道如何从我的支持 bean 中获取值到一个 javascript 变量中。

```
$(function() {
function update(){
    //**dont know how this call should look like**
    jsf.ajax.request('dev-form-input1', {render:'dev-form-output1'});
    //'newAjaxData' would be the value from #{someBean.chartData}
    plot.setData(newAjaxData);
    // draw the chart with the new data
    plot.draw();
    //get an update every second
    setTimeout(update, 1000);
} 
```

使用某些输入元素时，我设法使用 jsf.ajax.request 发送 AJAX 请求，但我没有获得要呈现的新值。即使我可以，我也不知道如何在 javascript 变量中获取它（我没有很多使用 javascript 的经验）。

```
<h:form id="dev-form">
<h:inputText id="input1" value="#{someBean.chartData}"/>
<h:outputText id="output1" value="#{someBean.chartData}" />
</h:form> 
```

注意：我将 javax.faces.SEPARATOR_CHAR 更改为“-”，因为 jquery 需要“：”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:34:34.160

JSF 是不适合这项工作的工具。使用像 JAX-RS 这样的 web 服务框架，而不是像 JSF 这样的 MVC 框架。然后你可以在客户端用通常的方式使用 jQuery 等等。

### 也可以看看：

*   [Jersey（JAX-RS 参考实现）教程](http://jersey.java.net/use/getting-started.html)
*   [Servlet 与 RESTful](https://stackoverflow.com/questions/7874695/servlet-vs-restful/7875851#7875851)

# cocoa - 将 16 (0xEFF) 转换为 NSString

> ID：11709981
> 
> 赞同：0
> 
> 时间：2012-07-29T14:24:44.083
> 
> 标签：cocoa, nsstring, int

嘿，我一直坚持如何将我的 int 值转换为 NSString 并获得正确的值

我有无符号整数

```
 unsigned int r = 0xEFF; 
```

我喜欢像@“EFF”这样的NSString，而不是@“3839”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T14:26:54.457

您可以使用与 printf 相同的格式字符串：

```
NSString* newString = [NSString stringWithFormat:@"%x", r]; 
```

# android - 分配内存失败：8个WXGA720皮肤

> ID：11709988
> 
> 赞同：1
> 
> 时间：2012-07-29T14:25:43.600
> 
> 标签：android, android-emulator

看到很多关于Failed to allocate memory 的问题：8 一般建议将内存从1024减少到512MB

其他帖子 [分配内存失败：8](https://stackoverflow.com/questions/7222906/failed-to-allocate-memory-8) [Android - 分配内存失败](https://stackoverflow.com/questions/7851811/android-failed-to-allocate-memory)

在我的旧电脑上一切正常，在我升级到具有 8GB 内存和 Windows 7 64 位的新机器后，我遇到了问题。

该问题仅出现在具有大“皮肤”（屏幕分辨率）的模拟器上。我想在 WXGA720 或更大的屏幕上运行我的应用程序，但启动失败并显示“分配内存失败：8”，减少内存没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T20:30:30.427

一种可能的解决方法是编辑位于您要使用的皮肤目录中的文件“hardware.ini”。（例如 C:\Android\android-sdk\platforms\android-15\skins\WXGA720）。在那个文件中，我将 hw.ramSize 设置为 720 而不是 1024，现在我终于可以从 AVD Manager 启动我的虚拟设备了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:57:37.210

这确实有助于我尝试模拟 Nexus 7。我将其更改为 512。如果它对任何人有用，我没有将 Target 更改为“Google API”（如其他帖子中所建议），而是将其保留为“Android 4.1 .2" （又有什么区别？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T03:40:45.617

我有同样的问题。这似乎是模拟器的问题。他们说的解决方案是降级到工具 r19。本站有zip可以下载。您只需解压缩并将 sdk 中的工具文件夹替换为 zip 文件中的工具文件夹。我刚试了一下，收到一条错误消息，说我有工具 r19，我需要工具 r20，但我刚刚关闭了消息，到目前为止它似乎工作正常。

[http://code.google.com/p/android/issues/detail?id=33930](http://code.google.com/p/android/issues/detail?id=33930)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T02:41:05.510

正如我在这里提到的：[https ://stackoverflow.com/a/14420779/1993898](https://stackoverflow.com/a/14420779/1993898)

我可以通过“以管理员身份”运行 AVD 来修复此错误，而无需对我的模拟器设置进行任何更改。因此，我认为此错误与文件系统权限或缺少权限有关。

# javascript - 如何解码使用 Connect 的 cookieSession 设置的 cookie 机密？

> ID：11709991
> 
> 赞同：3
> 
> 时间：2012-07-29T14:26:06.083
> 
> 标签：javascript, node.js, express, connect

我正在使用 Connect 设置一个 cookie `cookieSession()`。这似乎加密了 cookie 的秘密值，返回类似 's:j:{}.8gxCu7lVJHVs1gYRPFDAodK3+qPihh9G3BcXIIoQBhM'

如何解密 cookie 的值？

示例代码：

```
app.use(express.bodyParser());
app.use(express.cookieParser());

app.get('/setcookie', function(req, res, next){
    res.app.use(express.cookieSession({ key: "test", secret: "test" }));
    console.log(req.cookies.test);
    res.end();
});

app.get('/', function(req, res, next){
    console.log(req.cookies.test);
    res.end();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T21:40:28.770

嗯...您似乎对 cookie 会话的使用有点困惑。

1.  您的`/setcookie`路径未设置任何 cookie/会话值。要使用 cookie 会话，您需要在 上设置一些值`req.session`，例如`req.session.message = "Hi there!"`这些值现在存储在 cookie 中。

2.  您不能`res.app.use()`只在一个回调中，请求会话不会以这种方式在其他任何地方工作。要在另一个请求中读取这些 cookie，请将 放在`app.use(express.cookieSession({ key: "test", secret: "test" }));`应用程序级别。

编辑：实际上我已经考虑过您的 res.app.use() 调用，每次有人请求时，它都会通过向您的应用程序添加越来越多的中间件层 (cookieSession) 来破坏您的应用程序/导致内存泄漏`/setcookie`。如果您只想在特定请求中添加 cookieSession 中间件，则需要执行以下操作：

```
yourParser = express.cookieSession({ key: "test", secret: "test" });
app.get('/', yourParser, ...);
app.get('/setcookie', yourParser, ...); 
```

# 解决方案

这是实际的固定来源：

```
app.use(express.bodyParser());
app.use(express.cookieParser());
app.use(express.cookieSession({ key: "test", secret: "test" }));

app.get('/setcookie', function(req, res, next){
    req.session.message = "Hellau there";
    res.end();
}); 
```

现在检查这些值，`app.get('/',...)`试试这个：

```
app.get('/', function(req, res, next){
    console.log(req.session); //Yay, this will be available in all requests!
    res.end();
}); 
```

# 调试

要回答如何手动解码 cookie 中存储的内容的问题，请查看`connect/lib/middleware/cookieSession.js`：

```
// cookieParser secret
if (!options.secret && req.secret) {
  req.session = req.signedCookies[key] || {};
} else {
  // TODO: refactor
  var rawCookie = req.cookies[key];
  if (rawCookie) {
    var unsigned = utils.parseSignedCookie(rawCookie, secret);
    if (unsigned) {
      var originalHash = crc16(unsigned);
      req.session = utils.parseJSONCookie(unsigned) || {};
    }
  }
} 
```

它需要`req.cookies[key]`（基本上你已经在做的事情（`req.cookies.test`）），将其弹出`utils.parseSignedCookie`并弹出到`utils.parseJSONCookie`.

最后，我将您的原始 cookie 字符串放入 utils.js 文件中：

```
var signed = exports.parseSignedCookie(
    's:j:{}.8gxCu7lVJHVs1gYRPFDAodK3+qPihh9G3BcXIIoQBhM'
  , 'test');
var parsed = exports.parseJSONCookie(signed);
console.log(parsed); 
```

并运行它。猜猜我得到了什么：

```
{} 
```

为什么？因为你从来没有在`req.session`对象上设置任何东西。:)

# windows - 处理每个子目录中的每个文件

> ID：11709996
> 
> 赞同：0
> 
> 时间：2012-07-29T14:26:37.077
> 
> 标签：windows, batch-file, windows-7-x64

> **可能重复：**
> [如何编写bat文件来处理所有文件包括子目录，并将它们以相同的目录结构输出到另一个目录？](https://stackoverflow.com/questions/10781197/how-to-write-bat-file-to-process-all-files-include-sub-directory-and-output-the)

有几个问题询问如何使用批处理脚本进入子目录，但大多数时候他们只是列出文件或做一些其他相当复杂的事情，在这种情况下我不需要。我有 CLI 程序，我想处理当前目录的所有子目录中的每个 *.dat 文件。它不必包括主目录。我很确定这可以用 /r 以简单的方式完成，但我所有的试验都以错误告终。例如，我尝试了什么：

```
for /r path %%var in (*.dat) do process.exe -8 %%var 
```

我得到的只是一个语法错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:34:11.003

您的问题是您的 FOR 变量名称 - 它们必须是单个字符，并且区分大小写。

当用作程序的参数时，您还应该引用变量，因为文件名可能包含空格或特殊字符。

如果要递归处理当前目录中的所有 .dat 文件，则 /R 选项不需要路径说明符。

```
for /r %%F in (*.dat) do process.exe -8 "%%F" 
```

你可以从命令行运行上面的，但是你只使用一个 %

```
for /r %F in (*.dat) do process.exe -8 "%F" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T14:34:00.250

批量变量是一个字母

```
for /r path %%v in (*.dat) do process.exe -8 %%v 
```

例如这个批处理类型每个`*.dat`文件在批处理目录和子目录中的内容

```
for /r "%~dp0" %%v in (*.dat) do type "%%v" 
```

# ruby-on-rails-3 - Rails 3 + PostgreSQL + RSpec：应用程序工作正常，但 RSpec 示例失败

> ID：11709997
> 
> 赞同：1
> 
> 时间：2012-07-29T14:26:39.327
> 
> 标签：ruby-on-rails-3, postgresql, rspec

我正在使用 Apartment gem 作为中间件开发这个 Rails 3.2 应用程序。应用程序本身运行良好，所有 RSpec 示例在单独运行时也运行良好。但是，当我使用该命令同时运行所有测试时`bundle exec rspec`，有两个示例在两个不同的控制器规范中失败，它们做的事情完全相同。以下是有问题的两个示例：

在`issues_controller_spec.rb`文件中：

```
describe "GET 'new'" do

  # ...

  context "for authenticated users" do
    before(:each) do
      controller.log_in(create(:user))
      get :new
    end

    # ...

    it "should create a new issue instance and put it in an instance variable" do
      assigns(:issue).should be_an_instance_of Issue
    end
  end
end 
```

在`users_controller_spec.rb`文件中：

```
describe "GET 'new'" do

    # ...

  context "for authenticated users" do

      # ...

    context "for admin users" do
      before(:each) do
        admin = create(:admin)
        admin.add_role :admin
        controller.log_in(admin)
        get :new
      end

      # ...

      it "should create a new User instance and put it in an instance variable" do
        assigns(:user).should be_an_instance_of User
      end
    end
  end
end 
```

这两个示例受 before 钩子的影响：

```
before(:each) do
  client = create(:client)
  @request.host = "#{client.account_name}.lvh.me"
end 
```

创建新客户端时，有一个`after_create`回调：

```
# Create the client database (Apartment) for multi-tenancy
def create_client_database
  begin
    Apartment::Database.create(self.account_name)
  rescue Apartment::SchemaExists
    return
  rescue
    self.destroy
  end
end 
```

还有一些例子失败的地方。现在，如果我删除`begin...rescue...end`块并保留该行`Apartment::Database.create(self.account_name)`，我会在失败的示例中得到以下异常：

```
ActiveRecord::StatementInvalid:
   PG::Error: ERROR:  current transaction is aborted, commands ignored until end of transaction block
   : SET search_path TO public 
```

同样，如果我单独运行示例，它们会通过，但如果我运行所有示例，则上面的两个示例会失败。

有谁知道我做错了什么？

**注意**：整个应用程序代码可以在[这里](https://github.com/AzizLight/AgileBaboon/tree/rolify)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:11:38.917

我通过将行包装`client = create(:client)`在`begin`, `rescue`,`end`块中来解决这个问题，如下所示：

```
before(:each) do
  begin
    client = create(:client)
  rescue
    client = Client.create!(attributes_for(:client))
  end

  @request.host = "#{client.account_name}.lvh.me"
end 
```

我不知道它是如何或为什么有效的，但我知道它有效。

# android - 需要在对话框中显示名称

> ID：11709999
> 
> 赞同：1
> 
> 时间：2012-07-29T14:27:00.297
> 
> 标签：android

```
case DIALOG_ID:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        EditText edittext=(EditText)findViewById(R.id.name);
        Appendable name=edittext.getText();
        builder.setMessage(name + " Certificate saved successfully! Would like to add another Certificate?")
        .setCancelable(false)
        .setPositiveButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                SaveData.this.finish();
          }
        }) 
```

在我第一次在模拟器中输入名称时，我输入了一个名为**name**`builder.setMessage`的字符串，它出现在对话框中，但是当我将模拟器上的名称更改为其他名称时，我首先输入的名称将不会更改为第二个姓名

 ****我怎样才能做到这一点？对我有什么帮助吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T15:16:17.333

获取一个字符串变量并存储来自edittext ::的文本

```
EditText edittext=(EditText)findViewById(R.id.edittext_for_name);
String name=edittext.getText(); 
```

进而 ：

```
builder.setMessage(name+ " Certificate saved successfully. Would you like to add another certificate?") 
```**