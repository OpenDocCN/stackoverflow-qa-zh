# StackOverflow 问答 12037000-12037999

# jquery - Jquery 移动 ajax 调用不起作用（跨域）

> ID：12037006
> 
> 赞同：1
> 
> 时间：2012-08-20T11:42:38.107
> 
> 标签：jquery, jquery-mobile, playframework-2.0

我有两个单独运行的项目，一个是托管在 IIS 上的简单静态 HTML5 网站，我正在评估我在端口号**90**上的移动应用程序。

**其次，我有一个为端口9000**上的服务运行的网络服务器，它返回`JSON`数据（为此我使用 playframework2.0）。

在我的静态网站中，我有一个`HTML5`页面，其中包含对服务 url 的以下`ajax`调用。

```
$("#homePg").on('pageinit', function(event) {
 $.ajax({
        type:'GET',
        url : 'http://localhost:9000/menu',
        success : function(response){
                alert('success'+response);
        },
        error : function(xhr, status, error){
        alert('error'+xhr.responseText);
        }
      }); 
   }); 
```

每次它进入错误功能时，当我在浏览器中尝试相同的 url 时它工作正常。

我正在使用`Jquery 1.7.1`和`jquery.mobile.1.1.1.js`

已在 firebug 中检查 URL 正确加载但响应为空白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:30:17.300

使用 javascript，不同的端口被视为跨域调用。您将需要使用 jsonp。

我使用[jquery.jsonp](https://github.com/jaubourg/jquery-jsonp)库来执行此操作。

```
$.jsonp({
    dataType: 'json',
    url: 'http://localhost:9000/menu',
    success: function (response) {

    },
    error: function (xhr, status, error) {

    }
}); //end ajax 
```

我想指出 jsonp 只能做`GET`请求，所以如果你需要传递任何数据，它必须是查询字符串的一部分。如果您要提交具有法律后果的数据——例如信用卡数据，则必须关闭系统日志记录，以便卡号不会存储在 IIS 日志中。

您还可以使用 jsonp 调用[`$.ajax`](http://api.jquery.com/jQuery.ajax/)。

```
$.ajax({
    url: 'http://localhost:9000/menu',
    dataType: "jsonp",
    jsonp : "callback",
    jsonpCallback: "jsonpcallback"
});

function jsonpcallback(data) { 
    alert('success' + data);
} 
```

我从来没有使用过第二种方法，所以我什至不确定这段代码是否有效。

# eclipse - 如何从另一个插件初始化的类路径容器中删除类路径条目？

> ID：12037008
> 
> 赞同：1
> 
> 时间：2012-08-20T11:42:44.437
> 
> 标签：eclipse, eclipse-pde

我想修改一个由另一个插件初始化的类路径容器。具体来说，我想过滤/删除由 Eclipse Android 开发工具插件 (ADT) 初始化的“Android Dependencies”类路径容器中的某些类路径条目。

目前我正在“修改”内容，方法是创建一个新的类路径容器，从原始 Android 类路径容器中复制我感兴趣的条目，然后删除原来的：

```
 final IPath path = new Path(AdtConstants.CONTAINER_LIBRARIES);
    IClasspathContainer container = findClasspathContainer(classpath, path, project);
    MavenLibrariesClasspathContainer newContainer = new MavenLibrariesClasspathContainer("Android Dependencies", path);

     for(IClasspathEntry entry : container.getClasspathEntries()) {
        if(!entry.getPath().toOSString().contains(File.separator + "libs" + File.separator)) {
            newContainer.addClasspathEntry(entry);
        }
    }

    classpath.removeEntry(path);

    JavaCore.setClasspathContainer(
                new Path("me.gladwell.eclipse.m2e.android.LIBRARIES"),
                new IJavaProject[] { project },
                new IClasspathContainer[] { newContainer },
                new NullProgressMonitor()
    ); 
```

但是，这是有问题的，并且会导致 Eclipse 工作区（暂时）损坏并且在 Eclipse 重新启动时看起来很丑。

有没有更无缝的方法可以从类路径容器中删除类路径条目，而不必删除整个类路径容器并替换它？

# doctrine - Doctrine Left join with limit

> ID：12037010
> 
> 赞同：4
> 
> 时间：2012-08-20T11:42:56.133
> 
> 标签：doctrine, left-join, limit

我提出了这个请求，以获取所有品牌和这些品牌的所有物品 leftJoin ：

```
$brands = Doctrine_Query::create()
->from('Brand b')
->leftJoin('b.Item i')
->fetchArray(); 
```

但是我只想获得每个品牌的 10 件商品，我该如何限制 Item leftJoin ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T11:26:47.683

我知道已经很晚了，但这实际上在我的谷歌搜索中得分为 nr 1 并且没有得到答复： [使用 fetch-joined 集合限制学说查询？](https://stackoverflow.com/questions/5620771/limiting-a-doctrine-query-with-a-fetch-joined-collection)建议使用 Paginaror 对象

这是一个例子：

我的代码有包含 rss 链接的源和来自 rss 提要的文章的文章。所以在这个例子中，我会得到一个 Source 和它的所有文章。

```
 // get the articles (latest first) from source 743
        $q=$this->getDoctrine()->getManager()
          ->createQuery('select s, a from MyCompanyRssBundle:Source s 
          join s.Articles a 
          where s.id = :id 
          order by a.id desc')
          ->setParameter('id',743);
        $q->setMaxResults(1);  // this limits Articles to be only 1
                               // when using $q->getResult();
        $sources=new Paginator($q, $fetchJoin = true);
        $sources=$sources->getIterator();
//      $sources=$q->getResult();
        var_dump($sources[0]->getArticles()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:55:19.920

您必须像这样使用子查询：

```
->leftJoin('b.Item i WITH i.id IN (SELECT i2.id FROM Item i2 WHERE i2.brand_id=b.id LIMIT 10)') 
```

我没有对此进行测试，但它应该可以工作。

# ios - iOS：本地化/德语为德国，英语为世界其他地区

> ID：12037011
> 
> 赞同：1
> 
> 时间：2012-08-20T11:42:56.373
> 
> 标签：ios, ipad, localization

**场景：**

我正在开发一个 iOS 应用程序，它应该上传到世界各地的所有应用程序商店。

该应用程序应支持 2 种语言，德语和英语。德国的德语，世界其他地方的英语。

**我做了什么：**

当我开始开发应用程序时，我在 Info.plist 文件中选择德语作为“本地化本地开发区域”，并在项目设置中添加了英语本地化...

我使用了 NSLocalizedString 并用德语编写了所有文本字符串。然后我将 Localization.string 文件提交给客户进行翻译...

**问题：** 当我想将应用程序提交到应用商店时，我是否正确地实现了上述场景？

我要在 iTunesConnect 中做什么来存档这个场景……？

问候..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:13:02.990

反过来，使用英语作为“本地化本地开发区域”，然后添加德语本地化。

> kCFBundleDevelopmentRegionKey 包的开发语言的名称。当 CFBundle 查找资源时，回退是查找名称由 Info.plist 文件中的 kCFBundleDevelopmentRegionKey 给出的 lproj。因此，您必须确保一个包包含一个具有该确切名称的 lproj，其中包含每个本地化资源的副本，否则 CFBundle 不能保证回退机制将起作用。在 iOS 2.0 及更高版本中可用。在 CFBundle.h 中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:33:28.263

thvanarkel 可能是对的，但我实际上使用了另一个技巧：

当您匹配 Localizable.strings 中的一对键时，我会用它们的英文翻译命名每个键，例如

```
"Delete the current shopping list?" = "Delete the current shopping list?";

"Delete the current shopping list?" = "Löschen Sie die aktuelle Einkaufsliste?" 
```

如果您的 Localizable.string 中的键匹配，它将被翻译，否则，将使用该键。

也许不是最佳实践，但它对我有用。

# meteor - 流星，比赛条件/序列的完整性

> ID：12037012
> 
> 赞同：0
> 
> 时间：2012-08-20T11:43:04.357
> 
> 标签：meteor

潜在问题（一般）：

用户 A 输入一条聊天消息（使用浏览器/客户端 A），该消息立即添加到他的视图中，并且它也被发送到服务器。服务器将其发送给用户/客户端 B 以更新他的视图。但与此同时，用户 B 输入了一条聊天消息，它会立即添加到他的视图中 - 现在消息 B 作为用户 B 的聊天历史中的最后一条消息，而消息 A 作为用户 A 的聊天历史中的最后一条消息。这在许多用例中都是一个问题，例如考虑到人们在测验中竞争的情况，以及谁先发布正确答案是相关的。

这在 Meteor 中是如何处理的？

潜在解决方案（对于序列完整性至关重要的 Web 应用程序）：

没有即时的客户端视图更新。

只需将数据（也是更新请求）发送到服务器，服务器将其添加到中央模型并将其分发给所有客户端（包括创建数据的用户的客户端）。

每个客户端更新其模型和视图，然后向服务器发送一个简短的“我处理了我收到的更新请求”。

服务器等待最后一个这样的信号（忽略断开连接的用户）[1]，然后准备好接收下一条数据（下一个更新请求）。如果队列中有项目，请先处理这些项目。

这样，首先到达服务器的数据块将获胜（并在所有客户端上获胜），稍后到达服务器的数据块将在第一个数据块反映在每个客户端之后处理。

（事实上​​，创建者客户端中的视图更新发生得稍晚一点（因为数据首先通过服务器）我猜这不是一个大问题。）

[1]（确保始终处理意外断开连接）

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:01:16.927

据我了解，流星中发生的事情将是这样的（显然取决于执行顺序）：

1.  用户 A`A_c`在客户端创建消息
2.  用户 A`A_s`在服务器上创建消息（这会自动发生）
3.  用户 B`B_c`在客户端创建消息
4.  `A_s`分发给用户 A 和用户 B，替换`A_c`为 A 和`B_c`B。
5.  用户 B`B_s`在服务器上创建消息
6.  `B_s`分发给两个用户。

所以可能会发生什么（取决于是先发生 4 还是 5），当 B 的消息被分流到 A 的下方时，B 会看到一点点闪烁。`Meteor.method`通过更具体地使用s （而不是仅仅使用集合为您创建的隐式），可能会获得更好的解决方案。

*恕我直言，偶尔出现奇怪的闪烁（我认为这是一种边缘情况，取决于延迟）比在每种情况下都*为创建者的视图更新滞后更好的解决方案。

# c++ - 不能在 Netbeans IDE 7.2 中包含队列/堆栈 C++ STL 类

> ID：12037014
> 
> 赞同：0
> 
> 时间：2012-08-20T11:43:19.693
> 
> 标签：c++, queue

我在 C++ 中使用 Netbeans 7.2 IDE 实现音乐项目，涉及处理声音信息。我想使用 STL 队列和堆栈类来处理和弦结构。我的问题是 IDE 无法识别 std::queue 或 std::stack 类，我在它们旁边看到了可怕的红色感叹号。如果没有这些课程，我无法看到如何取得进一步的进步。这是我的代码。提前致谢..

```
#ifndef CHORD_H
#define CHORD_H
#include "../tonestatdynlib/name_pitchstructure.h"

class chord {
public:
    chord(int chordNum);
    chord (int chordNum, bool stability);
    chord(const chord& orig); //copy constructor for use in generative procedure
    std::queue<pitchStats> _constituents;
    std::string flatPitchList(); //returns a flat pitchname list from chord members

    virtual ~chord();

private:

    int _chordNumber;
    bool _stable;//unless switched otherwise
  };
#endif /* CHORD_H */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:45:47.817

你需要

```
 #include<queue>
 #include<stack> 
```

能够使用 std::queue 和 std::stack

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:46:08.333

```
#include <stack>
#include <queue> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T11:47:15.813

您需要包含这些类的标题。

```
#include <queue>
#include <stack> 
```

# ipad - CALayer 隐藏 imageView

> ID：12037016
> 
> 赞同：0
> 
> 时间：2012-08-20T11:43:38.170
> 
> 标签：ipad, imageview, calayer

海都在使用 CALayer 来掩盖 UIImage，当我在 imageview 上添加图层时，它只显示图层部分隐藏所有填充白色的图像

```
 CALayer *mask = [CALayer layer];
        mask.contents = (id)[[UIImage imageNamed:@"mask.png"] CGImage];
        mask.frame = CGRectMake(0, 0, mainImageWidth+30, mainImageHeight);
        mask.shadowOffset = CGSizeMake(0, 3);
        mask.shadowOpacity = 1.5;

        mainImageView.layer.mask = mask;

        [mainImageView.layer setMasksToBounds:NO]; 
```

它隐藏了我的图像视图，除了图层部分。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:25:06.107

我没有使用图像视图创建蒙版，而是为 UIView 添加了三个蒙版，现在它的工作完美

```
 mainLayer.frame = CGRectMake(0, 0, mainImageWidth, mainImageHeight);
[self.view.layer addSublayer:mainLayer];
 mainLayer.backgroundColor = [UIColor clearColor].CGColor;

secondLayer.frame = CGRectMake(gloss_x, gloss_y, gloss_w, gloss_h);
maskLayer = [CALayer layer];

UIImage *mask = [UIImage imageNamed:@"mask.png"];
maskLayer.contents = (id)mask.CGImage;
maskLayer.frame =  maskRect;//CGRectMake(gloss_x, gloss_y-50, gloss_w, gloss_h);

secondLayer.contents = (id)s_glossImage.CGImage;

[mainLayer addSublayer:secondLayer];

mainLayer.mask = maskLayer;

[mainImageView.layer addSublayer:mainLayer]; 
```

现在它工作正常。

# r - 如何创建成对的data.frame

> ID：12037023
> 
> 赞同：2
> 
> 时间：2012-08-20T11:43:57.770
> 
> 标签：r, dataframe

我有一个`data.frame`来自多个`sites`和的样本数据`years`。我想创建一个新的“成对” `data.frame`，它需要创建三列，`Site_Year`, `Value_2008`, `Value_Year`，其中`Value_Year`是数据集中任何其他年份的值。例如，在我的示例数据集中，站点“Anjan”在 2008 年、2009 年、2010 年被访问。新`data.frame`的有两条记录`site`：

```
Site_Year Value_2008 Value_Year
Anjan.2009 0.11 0.96
Anjan.2010 0.11 -0.25 
```

如果有一个`site`在 2008 年之前采样的，结果将如下所示：

```
Site_Year Value_2008 Value_Year
Ljungdalen.2005 0.09 -0.40
Ljungdalen.2009 0.09 0.32
Ljungdalen.2011 0.09 -0.00 
```

最终，我将绘制这些结果，以便我可以查看这些（平均值）值在不同年份之间的变化，并测试它们是否有显着差异。

**样本数据：**

```
WW_Site_Year_Data <- structure(list(Site_Year = c("Anjan.2008", "Anjan.2009", "Anjan.2010",
"Fittjebodarna.2008", "Fittjebodarna.2009", "Flatruet.2008",
"Flatruet.2009", "Flatruet.2010", "Flatruet.2011", "Fotingen.2008",
"Fotingen.2009", "Gestvallen.2008", "Gestvallen.2009", "Glen.2008",
"Glen.2009", "Glen.2010", "Gräftåvallen.2008", "Gräftåvallen.2009",
"Hallbodarna.2008", "Hallbodarna.2009", "Ljungdalen.2005", "Ljungdalen.2008",
"Ljungdalen.2009", "Ljungdalen.2011", "Ljungris.2008", "Ljungris.2009",
"Ljungris.2010", "Mårdsund.2008", "Mårdsund.2009", "Mårdsund.2010",
"Öster_Galåbodarna.2008", "Öster_Galåbodarna.2009", "Ramundberget.2008",
"Ramundberget.2009", "Rätan.2008", "Rätan.2009", "Rätan.2010",
"Särvfjället.2008", "Särvfjället.2009", "Storulvån.2008", "Storulvån.2009",
"Storulvån.2010", "Tångböle.2005", "Tångböle.2008", "Tångböle.2009",
"Tossåsen.2008", "Tossåsen.2009", "Vålådalen.2008", "Vålådalen.2009",
"Vålådalen.2010", "Vemdalsskalet.2002", "Vemdalsskalet.2008",
"Vemdalsskalet.2009"), Site_Name = c("Anjan", "Anjan", "Anjan",
"Fittjebodarna", "Fittjebodarna", "Flatruet", "Flatruet", "Flatruet",
"Flatruet", "Fotingen", "Fotingen", "Gestvallen", "Gestvallen",
"Glen", "Glen", "Glen", "Gräftåvallen", "Gräftåvallen", "Hallbodarna",
"Hallbodarna", "Ljungdalen", "Ljungdalen", "Ljungdalen", "Ljungdalen",
"Ljungris", "Ljungris", "Ljungris", "Mårdsund", "Mårdsund", "Mårdsund",
"Öster_Galåbodarna", "Öster_Galåbodarna", "Ramundberget", "Ramundberget",
"Rätan", "Rätan", "Rätan", "Särvfjället", "Särvfjället", "Storulvån",
"Storulvån", "Storulvån", "Tångböle", "Tångböle", "Tångböle",
"Tossåsen", "Tossåsen", "Vålådalen", "Vålådalen", "Vålådalen",
"Vemdalsskalet", "Vemdalsskalet", "Vemdalsskalet"), Year = c("2008",
"2009", "2010", "2008", "2009", "2008", "2009", "2010", "2011",
"2008", "2009", "2008", "2009", "2008", "2009", "2010", "2008",
"2009", "2008", "2009", "2005", "2008", "2009", "2011", "2008",
"2009", "2010", "2008", "2009", "2010", "2008", "2009", "2008",
"2009", "2008", "2009", "2010", "2008", "2009", "2008", "2009",
"2010", "2005", "2008", "2009", "2008", "2009", "2008", "2009",
"2010", "2002", "2008", "2009"), Value = c(0.112816109860291,
0.960290707474735, -0.257326331130005, 0.216427465038733, 0.956767099330118,
0.0526510364211729, 0.588996350906268, -0.465285757216318, -0.0437472490447301,
0.535560060909972, 0.389645985829418, 0.89391173396597, 0.240894790643034,
0.469695915206932, 0.251017199176266, -0.208323019946377, 0.0849050148677196,
0.184296870311739, -0.107309010266098, 0.36349491505071, -0.396608387512831,
0.0931374765423872, 0.32514153209616, -0.00466699456138238, 0.336789804880864,
0.806764888899387, -0.13955949253251, 0.108716189818012, 0.0978498660969545,
-0.160915801270199, 0.623151244760041, 0.713080174849265, -0.279733235253308,
0.427277452192635, 0.296839613563375, 0.659552054627706, 0.356154916318252,
0.659219370597927, 0.825734934055685, 0.183577169158829, 1.31979282562961,
0.0574714990570691, -0.517636804796056, 0.478950613513035, 0.504156229919797,
0.915335741962761, 1.11129338570452, 0.205145037964442, 0.829430613619136,
-0.187573312149385, -0.646545555669656, -0.034670665219269, 1.68156971430668
)), .Names = c("Site_Year", "Site_Name", "Year", "Value"), row.names = c(1L,
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L,
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L,
29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L,
42L, 43L, 44L, 45L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 55L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:22:32.763

在这种情况下一个非常有用的包是`plyr`：

```
ddply(WW_Site_Year_Data, .(Site_Name), transform,
      Value_2008 = if (2008 %in% Year) Value[Year==2008] else NA) 
```

如果没有 2008 年值的记录从您可以使用的数据框中排除

```
ddply(WW_Site_Year_Data, .(Site_Name), transform,
      Value_2008 = Value[Year==2008]) 
```

如果你想使用base R，那就更丑了：

```
unsplit(lapply(split(WW_Site_Year_Data, WW_Site_Year_Data$Site_Name),
        transform, Value_2008 = if (2008 %in% Year) Value[Year==2008] else NA),
        WW_Site_Year_Data$Site_Name) 
```

# spring - Spring data JPA 规范 - @OneToMany 依赖

> ID：12037025
> 
> 赞同：9
> 
> 时间：2012-08-20T11:44:03.863
> 
> 标签：spring, jpa, criteria-api, specifications, spring-data-jpa

我在使用 Spring 数据 JPA 规范从实体 Person 获取列表时遇到问题（因为分页）。我需要按人获取所有笔记，但是这两个实体之间的依赖关系在人方面。我不知道如何创建我的谓词，因为 Note 不包含任何与 Person 相关的属性。

我可以简单地使用 Persons getter 获取 List，但我不能使用这种方式，因为我需要对返回的数据进行分页。

```
@Entity
public class Person implements Serializable {

    @Id
    private Long personId;

    @OneToMany
    @JoinColumn(name = "personId")
    private List<Note> notes;

}

@Entity
public class Note implements Serializable {

    @Id
    private Long noteId;
} 
```

通常情况下，我会写这样的东西，但是我在 Note 中没有属性 person 并且在这个阶段无法重新映射数据库。

```
public static Specification<Note> notesByPerson(final Long personId) {
        return new Specification<Note>() {
            @Override
            public Predicate toPredicate(final Root<Note> root, final CriteriaQuery<?> query,
                    final CriteriaBuilder builder) {

                final Path<Person> per = root.<Person> get("person");

                return builder.equal(per.<Long> get("personId"), personId);

            }
        };
    } 
```

谢谢你，Zdend

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T07:13:19.290

解决了..

```
public static Specification<Note> notesByPerson(final Long personId) {
        return new Specification<Note>() {

            @Override
            public Predicate toPredicate(final Root<Note> noteRoot, final CriteriaQuery<?> query,
                    final CriteriaBuilder cb) {

                final Subquery<Long> personQuery = query.subquery(Long.class);
                final Root<Person> person = personQuery.from(Person.class);
                final Join<Person, Note> notes = person.join("notes");
                personQuery.select(notes.<Long> get("noteId"));
                personQuery.where(cb.equal(person.<Long> get("personId"), personId));

                return cb.in(noteRoot.get("noteId")).value(personQuery);
            }
        };
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:43:07.537

我不确定如何使用谓词来做到这一点，因为我通常不使用它们，但是在 JPQL（或类似的 HQL）中，您可以执行以下操作：

```
SELECT Note n FROM Person.notes WHERE XXXX 
```

这与在 SQL 中执行此操作基本相同

```
SELECT n.noteId FROM person as p JOIN persons_notes pn ON pn.person=p.personId JOIN notes as n ON n.noteId=pn.noteId 
```

我冒昧地猜测 Predicate 方法具有与上述类似的能力。

# yuv - yuv 到 rgb 用于 libvpx/webm

> ID：12037028
> 
> 赞同：1
> 
> 时间：2012-08-20T11:44:19.363
> 
> 标签：yuv, webm, libvpx

有人知道 libvpx/webm 使用的 yuv -> rgb 和 rgb -> yuv 的正确矩阵吗？当我使用来自维基百科的标准视频时，我的视频输出看起来与 vlc 有点不同，颜色更强。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:52:46.117

似乎与[需要从 RGB 帧创建 webm 视频相同](https://stackoverflow.com/questions/4765436/need-to-create-a-webm-video-from-rgb-frames)

有一组用于标清视频的矩阵，另一组用于高清视频。所以记住这一点。RGB 到 YUV 矩阵也独立于编解码器。UV 采样位置取决于编解码器。

您还可以查看[http://www.fourcc.org/fccyvrgb.php](http://www.fourcc.org/fccyvrgb.php)以更好地了解转换问题

编辑：解释：问题不在于方程式本身，而在于理解。让我解释：

当转换为数字时，分量电缆上的模拟数据应该在 Y 的范围 16-220 和 Cb 和 Cr 的 16-240 范围内。因此正确捕获的数据将始终在该范围内。对于此类数据 Y601 = 0.299R ́ + 0.587G ́ + 0.114B ́

然而，在许多计算机软件中，0-255 被用作范围。对于那个 0.257R ́ + 0.504G ́ + 0.098B ́ + 16 是一个更合适的方程。

对于高清数据，颜色转换方案为 709，它将方程式更改为 Y709 = 0.213R ́ + 0.715G ́ + 0.072B ́

如果您的范围是 0-255，则转换应为 Y709 = 0.183R ́ + 0.614G ́ + 0.062B ́ + 16

我建议您阅读 www.compression.ru/download/articles/color_space/ch03.pdf 一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T17:40:32.670

Vp8 没有色彩空间信息。Vp9 使用 BT601（默认）或 RGB 颜色空间。还有其他模式，但它们大多未使用或不支持。

# android - min3D 未显示 Blender 2.63 Textxture

> ID：12037036
> 
> 赞同：1
> 
> 时间：2012-08-20T11:44:55.910
> 
> 标签：android, android-animation

我创建了一个 Blender 3D 模型，将 Blender 项目导出为 .obj 格式。在导出时，我确保我选择了包括法线、保持顶点顺序。该项目包含一个用 JPG 文件进行 UV 解包的球体。

我有两个文件，1) .obj 文件和 .mtl 文件。我将它们更改为 _mtl 和 _obj 文件。

请在下面找到 mtl 文件的内容

```
 # Blender MTL File: 'Earth.blend'
     # Material Count: 1
     newmtl earth_test.jpg
     Ns 96.078431
     Ka 0.000000 0.000000 0.000000
     Kd 0.640000 0.640000 0.640000
     Ks 0.500000 0.500000 0.500000
     Ni 1.000000
     d 1.000000
     illum 2
     map_Kd test.jpg 
```

我确保 _mtl 文件中没有空格。test.jpg 文件存在于 res/drawable 文件夹中。我还将 earth_test.jpg 文件保存在 res/drawable 文件夹中。

我使用以下代码加载了 obj 文件。

```
scene.lights().add(new Light());

IParser parser = Parser.createParser(Parser.Type.OBJ,
        getResources(), "com.geeks.begining:raw/earth_obj", true);
parser.parse();

objModel = parser.getParsedObject();

objModel.scale().x = objModel.scale().y = objModel.scale().z = .8f;
scene.addChild(objModel); 
```

仍然在加载应用程序时缺少纹理。只显示一个球体。它看起来像实心视图中的 Blender 中的图像。

我还缺少什么吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:37:34.310

我发现了问题所在。我的纹理图像的大小有点小我改变了大小，现在它工作了:)

# processor - 为什么在指令集架构中“执行”位于“内存”之前？

> ID：12037041
> 
> 赞同：4
> 
> 时间：2012-08-20T11:45:29.067
> 
> 标签：processor, instruction-set

我在 3 年前学习了处理器架构。

直到今天，我无法弄清楚为什么在顺序指令中`execute`位于之前。`memory`

执行指令`[ mov (%eax) %ebx]`时，不需要访问内存吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T05:28:44.987

让我们记住经典的 RISC 管道，通常研究它：[http](http://en.wikipedia.org/wiki/Classic_RISC_pipeline) ://en.wikipedia.org/wiki/Classic_RISC_pipeline 。以下是它的阶段：

*   IF = 取指令
*   ID = 指令解码
*   EX = 执行
*   MEM = 内存访问
*   WB = 寄存器回写

在 RISC 中，您只能使用`load`s 和`store`s 来处理内存。`EX`内存访问指令的阶段将计算内存中的地址（从寄存器文件中获取地址，对其进行缩放或添加偏移量）。然后地址将被传递到`MEM`阶段。

您的示例`mov (%eax), %ebx`实际上是来自内存的负载，无需任何额外计算，甚至可以在 RISC 管道中表示：

*   `IF`- 从指令存储器中获取指令
*   `ID`- 解码指令，将“eax”寄存器作为操作数传递给 ALU；记住“ebx”作为 WB 的输出（在控制单元中）；
*   `EX`- 在 ALU 中计算“eax+0”并将结果传递到下一阶段`MEM`（作为内存中的地址）
*   `MEM`- 从`EX`阶段（从 ALU）获取地址，进入内存并获取值（这个阶段可能需要几个滴答声才能到达内存并阻塞管道）。将值传递给`WB`
*   `WB`- 取值`MEM`并将其传回寄存器文件。控制单元应将寄存器文件设置为模式：“Writing”+“EBX selected”

在真正的 CISC 指令中情况更复杂，例如（从内存中`add (%eax), %ebx`加载字，然后将 T+ 存储到）。该指令需要在 ALU 中进行地址计算和加法运算。这在最简单的 RISC (MIPS) 管道中不容易表示。`T``[%eax]``%ebx``%ebx`

第一个 x86 cpu (8086) 不是流水线的，它在任何时候都只执行一条指令。但是由于 80386 有 6 个阶段的流水线，这比 RISC 更复杂。有关于其管道的介绍，并将其与 MIPS 进行比较：[http ://www.academic.marist.edu/~jzbv/architecture/Projects/projects2004/INTEL%20X86%20PIPELINING.ppt](http://www.academic.marist.edu/~jzbv/architecture/Projects/projects2004/INTEL%20X86%20PIPELINING.ppt)

幻灯片 17 说：

*   英特尔结合了`mem`和`EX`阶段以避免加载和停顿，但确实为地址计算创建了停顿
*   mips 中的所有阶段都需要一个周期，而英特尔在某些阶段可能需要多个周期。这会产生不对称的性能

在我的示例中，`add`将在组合的“ `MEM+EX`”阶段执行几个 CPU 滴答，产生许多停顿。

现代 x86 CPU 的流水线很长（典型的是 16 个阶段），并且它们内部是类似 RISC 的 CPU。解码器阶段（3 阶段或更多）将最复杂的 x86 指令分解为一系列内部类似 RISC 的微操作（有时在微码的帮助下每条指令生成多达 450 个微操作；更典型的是 2-3 个微操作）。对于复杂的 ALU/MEM 操作，将有 microop 用于地址计算，然后是 microop 用于内存加载，然后是 microop 用于 ALU 操作。微操作之间会有依赖关系，并计划到不同的执行端口。

# sharepoint - sharepoint 2010 中的自定义访问和授权

> ID：12037044
> 
> 赞同：1
> 
> 时间：2012-08-20T11:45:37.763
> 
> 标签：sharepoint

如何为自定义访问和授权控制配置 sharepoint 2010 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:24:42.670

我们可以通过文档库或列表上的用户权限来执行此操作。默认情况下，它从父站点继承权限，但我们可以通过在列表/库设置中使用停止继承权限来配置它。

# c# - 适合从主窗口检索任意数据的设计模式

> ID：12037055
> 
> 赞同：0
> 
> 时间：2012-08-20T11:46:14.357
> 
> 标签：c#, design-patterns

在我的 C# 软件中，我有许多绘图工具。每个工具都有自己的类和一个通用接口。例如“绘制矩形”。

现在，许多这些工具需要从我的主窗口读取数据才能执行它们的任务。但是，我不希望这些工具与我的`MainForm`课程相结合。显然，需要更好的设计。哪种设计模式适合该任务？

**问：** X 类如何在不耦合两个类的情况下从 Y 类读取任意信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:51:15.430

您想抽象`Y`成一个专门设计的接口，以允许检索所需的信息类型`X`。

同时，您不希望将您可能想到的特定实现的细节（例如您的主窗口）泄漏到界面中。

# git - 次优包 - 内存不足 - git push --- 我的仓库损坏了吗？

> ID：12037056
> 
> 赞同：2
> 
> 时间：2012-08-20T11:46:16.360
> 
> 标签：git, repository

`suboptimal pack - out of memory`当我在 git 中推送我的仓库时，我收到了一个警告：

```
Counting objects: 103, done.
Delta compression using up to 2 threads.
warning: suboptimal pack - out of memory
Compressing objects: 100% (100/100), done.
... 
```

如您所见，repo 最终被压缩，然后系统成功推送 repo。所以它看起来很好，尽管它的包装不是最理想的。我的问题是：对回购有任何潜在的损害，还是只是有点大？

这是一个相当大的 repo，所以这可能是导致此错误的原因，但只要我的文件没有损坏，那么我对此没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:05:00.017

不，您的存储库没有损坏。当 git 尝试[为特定 blob 生成增量索引时内存不足时会引发警告。](http://thread.gmane.org/gmane.comp.version-control.git/48646)仅此一项还不足以损害您的存储库或使推送过程崩溃（这就是为什么它首先从错误更改为警告......五年多前）：

```
commit a588d88aaff312f3afd5713ffcb4e4b1829fb5a6
Author: Martin Koegler <mkoegler@auto.tuwien.ac.at>
Date:   Mon May 28 23:20:57 2007 +0200

    builtin-pack-objects: don't fail, if delta is not possible

    If builtin-pack-objects runs out of memory while finding
    the best deltas, it bails out with an error.

    If the delta index creation fails (because there is not enough memory),
    we can downgrade the error message to a warning and continue with the
    next object.

    Signed-off-by: Martin Koegler <mkoegler@auto.tuwien.ac.at>
    Signed-off-by: Junio C Hamano <junkio@cox.net> 
```

[此答案](https://stackoverflow.com/a/4829883/877115)和此答案中列出了解决方案和解决方法[。](https://stackoverflow.com/a/9041551/877115)

# maven - Nexus 不会从标准代理存储库以外的地方下载

> ID：12037057
> 
> 赞同：1
> 
> 时间：2012-08-20T11:46:24.440
> 
> 标签：maven, nexus

我们设置了一个 nexus 存储库管理器。我们正在运行版本 1.9.3.2，我目前无法升级。

我遇到的问题是，在安装 nexus 时，nexus 可以与开箱即用的标准代理存储库一起正常工作。但是当我添加新的存储库（例如 JBoss）时，不会从它们中下载工件。如果我在用户界面中单击 JBoss，我可以检查选项卡“浏览远程”并查看我想要的工件确实在那里。但是当我点击“浏览本地”时，我唯一看到的是文件`archetype-catalog.xml`。

发生的事情是这样的：

1.  我向我的项目添加依赖项
2.  找不到，因为它在 maven 中央仓库中不存在
3.  我在 nexus 中添加了一个代理 repo，其中包含我想要的工件。
4.  我尝试再次构建我的项目，但仍然找不到工件。

我意识到这里可能存在缓存问题，但我已经运行了 maven 强制更新（-U 参数），从我的本地 repo 中删除了缓存文件，清除了 nexus 中的缓存，重建元数据，所有我能想到的，仍然没有找到工件.

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:16:44.413

试试这个解决方案：

1.  `Download Remote Indexes`在代理存储库配置中启用（设置为 True） 。
2.  将代理存储库添加到 Public Repositories 组。

# php - 从另一个控制器访问模型

> ID：12037059
> 
> 赞同：0
> 
> 时间：2012-08-20T11:46:30.097
> 
> 标签：php, model-view-controller, models, controllers

我们已经构建了一个小型 mvc，我们想从不同的控制器访问模型。

IE

```
class Controller {
    function A() {
    }
}

class Search extends Controller {
    function B() {
        $this->model->doSomething();    
    }
}

class Profile extends Controller {
    function B() {
        ***** HERE ***** ?????????????????????????????????????????????
        Search::doSomething();
    }
}

class Model {

}

class search_model extends Model {     
    public function doSomething() {
        // Do Something
        echo "doing something";
    }
}

class profile_model extends Model { 
    public function getProfile() {
        // Get Profile
        echo "getting profile";
    }
} 
```

我想在配置文件控制器中访问搜索控制器功能 doSomething() 如果你可以看到像**这里***部分或沿线的东西？***

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:52:44.450

只需将模型包含在另一个控制器中即可。从多个控制器访问同一个模型并没有错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:54:04.820

Controller 是 Search 和 Profile 的父类，因此您可以添加一个可以重复使用的函数。

```
class Controller {

    public $model;

    public function doSomething() {
        if($this->model === null)
        {
            $this->model = new search_model();
        }
        return $this->model->doSomething();
    }
} 
```***

# ruby-on-rails - 上传文件，拆分然后输入哈希会导致 RuntimeError

> ID：12037061
> 
> 赞同：0
> 
> 时间：2012-08-20T11:46:41.180
> 
> 标签：ruby-on-rails, ruby, runtime-error

我有一个上传文本文件的应用程序，然后将其文件名、内容类型和数据保存到其数据库表中。

这一切都很好，但是，现在我正在尝试创建一种方法，将文件拆分为单词，将单词拆分为字母，按字母顺序对它们进行排序，然后再次加入它们，同时将排序的字母作为键输入到哈希中用字母表示的单词作为值。

```
"denoops"=>[" snooped", "spooned"] 
```

这适用于小文件，但是当解析一个 300,000 字左右的大文件时，它会完成将所有数据输入到哈希中，但随后会出错：

```
expected SCALAR, SEQUENCE-START, MAPPING-START, or ALIAS 
```

这是代码。注意更新我添加了序列化，它将数据作为哈希保存到数据库，并将列类型从二进制更改为文本。

附件.rb：

```
 class Attachment < ActiveRecord::Base
    has_many :anagrams, dependent: :destroy
    attr_accessible :filename, :content_type, :data
    validates_presence_of :filename, :data
    serialize :data, Hash

    def uploaded_file=(incoming_file)
      self.filename = incoming_file.original_filename
      self.content_type = incoming_file.content_type
      results = {}

      incoming_file.read.downcase.split.each do |word|
        letters = word.split('').sort
        results[letters.join] = [[results[letters]].join(" ")] << word
        end
      self.data = results
    end 
```

导轨错误日志：

```
 Started POST "/attachments" for 127.0.0.1 at 2012-08-20 17:10:09 +0100
Processing by AttachmentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"y2S3Z6Yg9iuU74to7ZEDUedlCEsazEU26mIrsnNxgmQ=", "attachment"=>#<ActionDispatch::Http::UploadedFile:0x007f8a411497b8 @original_filename="medium_word_list.90", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"attachment\"; filename=\"medium_word_list.90\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:/var/folders/1g/d9qbm7_s0_5fcljtvzysp1gc0000gn/T/RackMultipart20120820-3535-119x9hk>>, "commit"=>"upload"}
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
Completed 500 Internal Server Error in 11177ms

RuntimeError (expected SCALAR, SEQUENCE-START, MAPPING-START, or ALIAS):
  app/controllers/attachments_controller.rb:21:in `create' 
```

创建附件表迁移：

```
class CreateAttachments < ActiveRecord::Migration
  def up
    create_table :attachments do |t|
      t.string :filename
      t.string :content_type
      t.text :data
    end
  end 
```

Google 提供的内容不多。如果有人需要更多代码，请说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:25:11.283

对您的方法进行一些重构和重组，`uploaded_file=`如下所示：

```
def uploaded_file=(incoming_file)
  self.filename = incoming_file.original_filename
  self.content_type = incoming_file.content_type
  results = {}

  incoming_file.read.downcase.split.each do |word|
    letters = word.split('').sort
    results[
      letters
    ] = [
      [
        results[
          letters
        ]
      ].join(" ")
    ] << word 
  end

  self.data = results
end 
```

对哈希的分配`results`看起来很可疑。您正在分配一个数组作为哈希键。然后，您尝试保存它。我怀疑问题是该数组作为键。试试这个：

```
results[
  letters.join
] = [ 
```

# android - 调试时 sqllite 光标上的警告屏幕

> ID：12037063
> 
> 赞同：0
> 
> 时间：2012-08-20T11:46:46.513
> 
> 标签：android, sqlite

我正在制作一个从数据库加载字节数组的android应用程序。但是，当我调试时，我不断得到以下屏幕。我可以继续调试并且我的应用程序运行良好，但我只是想知道为什么会出现这个屏幕。

![在此处输入图像描述](../Images/3cc64b59e3e1e3149787e8716b3a707d.png) 有任何想法吗？

我在没有放置断点的情况下在我的 logcat 中得到以下内容：![在此处输入图像描述](../Images/4f4d4c025ff0f44947d464f7ad0c3d1e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:49:18.327

您没有 SqliteCursor.java 的源代码。您正在尝试调试 Android 框架中存在的代码，而不是您自己的应用程序

# perl - 如何以 Mooseish 方式声明 2 个依赖属性？

> ID：12037066
> 
> 赞同：4
> 
> 时间：2012-08-20T11:46:49.387
> 
> 标签：perl, moose, moo

在我的对象构造函数中，我有声明同时初始化两个属性：

```
($self->{token}, $self->{token_start}) = $self->_get_authorized_token(); 
```

所以我得到了令牌，它的开始时间在一个声明中。

现在我尝试移植我的模块以使用 Moo(se) 在这里我不知道我应该如何同时设置这两个绑定属性？一些伪代码是这样的：

```
has qw/token token_start/ => (
    is  => 'rw',
    default => shift->_get_authorized_token(); 
); 
```

但是如何以 Moo(se)ish 的方式声明 2 个绑定属性？

* * *

编辑。我展示了方法的代码`_get_authorized_token`，也许它会带来一些想法：

```
sub _get_authorized_token {
    my $self = shift;
    my $postData = { 'apikey' => $self->{key} };
    my $url = $self->{base_url} . '/seller';
    my $xml = $self->_post(url => $url,
                            postdata => $postData,
                        );
    my $ref = XMLin($xml, SuppressEmpty => '' );
    my $time = $ref->{Notification_Datetime};
    my $token = $ref->{Notification_Data}{body}{token};
    return ($token, $time); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T14:16:00.080

一旦你最终得到两个属性，这些属性基本上都链接到你总是同时设置它们的点……答案通常是为此目的创建一个具有两个属性的值对象，然后将相关方法委托给它。所以，像 -

```
package MyApp::TokenInfo;

use Moo;

has token => (is => 'ro', required => 1);
has token_start => (is => 'ro', required => 1);

...

package MyApp::ThingWithAToken;

use Module::Runtime qw(use_module);
use Moo;

...

has token_info => (is => 'lazy', handles => [ qw(token token_start) ]);

sub _build_token_info {
  my ($self) = @_;
  my ($token, $token_start) = $self->_get_authorized_token;

  # this is equivalent to:
  #
  #   require MyApp::TokenInfo;
  #   return MyApp::TokenInfo->new(...);
  #
  # but more concise

  return use_module('MyApp::TokenInfo')->new(
    token => $token,
    token_start => $token_start
  );
}

...

my $thing = MyApp::ThingWithAToken->new(...);

$thing->token; # calls $thing->token_info->token;
$thing->token_start; # calls $thing->token_info->token_start 
```

因此，值对象的存在不需要来自外部的知识，但在内部，您仍然可以将这两个属性绑定在一起，让您的实现将它们作为单个“事物”处理。

--mst

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:33:05.037

当面对这种性质的东西——两个或多个属性的值一次生成——并且没有令人信服的理由创建一个小类来处理这个问题时，我通常创建一个属性，然后委托访问器来访问结果。例如：

```
has _token_info => (
    traits => ['Hash'],
    is => 'ro',
    isa => 'HashRef',
    builder => '_build__token_info',
    handles => {
        token => [ get => 'token' ],
        token_start => [ get => 'token_start' ]
    },
);

sub _build__token_info {

    # ... whatever needs to be done to get $token{,_start}
    return { token => $token, token_start => $token_start };
} 
```

这样，当有人第一次访问 token() 或 token_start() 时，会生成并传递令牌和起始值。

请注意，这种方法通常最适用于始终在类中构建或私有设置的值，而不是在期望构建将 token 和 token_start 传递给 new() 的类时。

另见[http://whitepointstarllc.com/2012/05/simulating-multiple-lazy-attributes/](http://whitepointstarllc.com/2012/05/simulating-multiple-lazy-attributes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:13:21.550

我不知道有任何方法可以将这两个属性绑定在一起，就像您使用直接哈希分配一样。

我可能会让两个懒惰的建设者做类似的事情：

```
sub _build_token {
  my $self = shift;
  my ($t, $ts) = $self->_get_authorized_token();
  $self->token_start($ts);
  return $t
} 
```

然后反过来构建 token_start。

我怀疑你真正想要的是让 token/token_start 成为他们自己对象的一部分。这样你就可以保证两者都被适当地设置在一起。

* * *

> 我仍然会有 2 个依赖属性在一起，我也不能将它们分开。或者重点在哪里？

我不确定问题是否清楚。在我看来，这两个值似乎属于一起，或者至少 token_start 取决于 token。我更喜欢使用`$self->auth->token` 这样的链接是明确的。

如果您想跳过对“auth”对象的引用，只需使用[句柄](http://search.cpan.org/~doy/Moose-2.0603/lib/Moose/Manual/Delegation.pod)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:57:44.297

我自己也有一些想法。也许我应该使用 setter 方法而不是使用返回值的方法，它返回一个（如果有的话）值但设置为 2？像这样：

```
sub _set_authorized_token {
    my $self = shift;
    my $postData = { 'apikey' => $self->{key} };
    my $url = $self->{base_url} . '/seller';
    my $xml = $self->_post(url => $url,
                            postdata => $postData,
                        );
    my $ref = XMLin($xml, SuppressEmpty => '' );
    $self->{token_start} = $ref->{Notification_Datetime};
    $self->{token} = $ref->{Notification_Data}{body}{token};
    return ($self->{token});    
} 
```

有没有我注意到的一些陷阱？

# android-assets - 什么是 Android 资产？

> ID：12037069
> 
> 赞同：12
> 
> 时间：2012-08-20T11:47:03.880
> 
> 标签：android-assets

我正在迈出 Android 开发的第一步，遇到了*Asset*一词。

据我了解，资产只是一个没有被解析或引用为资源的文件。

这个词有更准确的定义吗？在哪些情况下我应该在我的应用程序中使用资产？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T11:49:28.723

资产提供了一种在应用程序中包含任意文件（如文本、xml、字体、音乐和视频）的方法。如果您尝试将这些文件作为“资源”包含在内，Android 会将它们处理到其资源系统中，您将无法获取原始数据。如果您想访问原封不动的数据，资产是一种方法。

添加到项目中的资产将显示为可以由应用程序使用 AssetManager 读取的文件系统。

Android 在其项目组织中有一个专门的文件夹来存储所有这些文件。

# javascript - jQuery克隆问题

> ID：12037077
> 
> 赞同：0
> 
> 时间：2012-08-20T11:47:48.123
> 
> 标签：javascript, jquery

我正在尝试通过创建唯一 ID 将一行克隆到内容中，但我遇到了一些问题。

HTML：

```
<div class="content">
    <div id="email-container" class="email-container">
            <input type="text" value="" placeholder="Email">
            <input type="text" value="" placeholder="Email">
            <input type="text" value="" placeholder="Email">
            <span class="plus-button">+</span>
        </div>
</div> 
```

JavaScript：

```
$('.plus-button').click(function(){
    $('.email-container').clone().insertAfter(".email-container").end();
    $('.email-container').find('.plus-button').text('-').not(':last-child');
}); 
```

请在下面找到我的小提琴：

[http://jsfiddle.net/meetravi/GCRVS/3/](http://jsfiddle.net/meetravi/GCRVS/3/)

我正在尝试克隆`#email-container`并将其添加到内部`.content`并清除文本框值，并且还需要将`.plus-button`值更改为“-”，最后一行除外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:56:27.353

试试这个：而且你不需要 id #email-container。

```
$(document).on('click', '.plus-button', function(){
    var content = $(this).text();
    if(content == '+'){
        $(this).parent().clone(true, true).insertAfter($(this).parent());
        $('.email-container').each(function(){
            if(!$(this).is(':last-child')){
                $(this).find('.plus-button').html('-');
            }
        });
    }
    else{
        $(this).parent().remove();

    }
}); 
```

编辑：我进行了重大编辑，插入 if/else 以解决删除问题...

EDIT2：必须说 insertAfter($(this).parent()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:03:37.037

```
<div class="content">
    <div id="email-container" class="email-container">
        <input class="1" type="text" value="" placeholder="Email">
        <input class="1" type="text" value="" placeholder="Email">
        <input class="1" type="text" value="" placeholder="Email">
        <span class="plus-button">+</span>
    </div> 
</div>

$(document).ready(function()
{
    $('.plus-button').click(AddNewRow);
});

function AddNewRow(event)
{
   var clone = $('.email-container').last().clone().appendTo('.content');
   clone.children('.1').val(''); //delete all values of your clone
   clone.children('.plus-button').bind('click', AddNewRow);

   var btn = $(this).parent().find('.plus-button');  //The cloned button
   btn.text('-');
   btn.removeClass('plus-button');
   btn.addClass('minus-button');
   btn.unbind('click');  //unbind the "old" click event
   btn.click(RemoveRow);
}

function RemoveRow(event)
{
    $(this).parent().remove();
} 
```

这应该可以解决问题。提示：当您在 DOM 中创建新元素时，您应该手动绑定项目或使用“on”

编辑：删除 .live() 因为它的弃用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T11:57:05.730

对于动态生成的元素，应委托单击事件，您可以使用该`on`方法，请注意，我已从您的标记中删除了 ID 属性，因为 ID 应该是唯一的，并且在文档中具有相同的 ID 属性使其无效。尝试以下操作：

```
$(document).on('click', '.plus-button', function(){
    $('.email-container:last').clone().insertAfter(".email-container:last")
    $('.email-container:not(:last)').find('.plus-button').attr('class', 'remove').text('-');
});

$(document).on('click', '.remove ', function(){
    $(this).closest('.email-container').remove();
}); 
```

[小提琴](http://jsfiddle.net/GCRVS/21/)

# c++ - “重载”类

> ID：12037078
> 
> 赞同：-2
> 
> 时间：2012-08-20T11:47:50.657
> 
> 标签：c++, oop, polymorphism, overloading

在 C++ 中，有没有办法让编译器自动决定你需要哪个函数？你们都知道：

```
void F (int i);
void F (char *f);
...
int k = 0;
F(k);

char *f = "0";
F(f); 
```

...或通过模板：

```
template <typename T> 
void F(T i);
...
F(k);
F(f); 
```

什么是类比？有没有办法让编译器决定你需要哪个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:51:43.250

它并不是真正需要的，因为您必须声明一个属于特定类的对象。但是，如果您有一个基类和其他从该基类继承的类，那么您可以使用虚函数，即使您有一个指向该基类的指针或引用，编译器也会选择正确的成员函数。

这实际上是通常称为多态性的最后一部分，您对函数所做的实际上是重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:51:14.760

不，与函数不同，您不能有两个具有相同名称的类。

可以使用模板参数对类进行参数化，这有点相似，但又不一样。或者，更常见的是，您可以创建一个*工厂*，该工厂将根据您传递给它的参数创建多种类型之一的对象。在后一种情况下，对象通常扩展一个公共超类。

# ios - cocos2d box2d用ccsprite画线

> ID：12037079
> 
> 赞同：0
> 
> 时间：2012-08-20T11:47:51.467
> 
> 标签：ios, cocos2d-iphone, box2d, draw, ccsprite

我需要画一条线，它是 box2d 的主体，将由 CCSprite 对象绘制。现在我可以画出非常漂亮的线（仅在调试绘制期间可见）但我不知道，我可以在绘制期间使用所有点的位置。如果代码如下所示，CCSprite 图像仅在用户绘制速度非常慢时出现。当用户快速绘图时，我们只能看到几个图像点。我想我应该从 SetAsEdge 函数中获得积分，并为每一个绘制 CCSprite，但我不知道如何获得这些积分。

```
 CGPoint start = [touch locationInView: [touch view]];
            start = [[CCDirector sharedDirector] convertToGL: start];
            CGPoint end = [touch previousLocationInView:[touch view]];
            end = [[CCDirector sharedDirector] convertToGL:end];
            float distance = ccpDistance(start, end);
            if (distance > 1)
            {
                int d = (int)distance;

                b2Vec2 s(start.x/PTM_RATIO, start.y/PTM_RATIO);
                b2Vec2 e(end.x/PTM_RATIO, end.y/PTM_RATIO);
                CCSprite *obj = [CCSprite spriteWithFile:@"image.png"];      
                b2BodyDef bd;
                bd.userData = obj;
                bd.type = b2_staticBody;
                bd.position.Set(0, 0);
                obj.position = ccp(start.x,start.y);
                [self addChild:obj z:1];

                b2Body* body = _world->CreateBody(&bd);
                b2PolygonShape shape;
                shape.SetAsEdge(b2Vec2(s.x, s.y), b2Vec2(e.x, e.y));
                body->CreateFixture(&shape, 0.0f);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:29:41.607

好的，我找到了解决方案，也许这对其他人有用。

```
 CGPoint start = [touch locationInView: [touch view]];
        start = [[CCDirector sharedDirector] convertToGL: start];
        CGPoint end = [touch previousLocationInView:[touch view]];
        end = [[CCDirector sharedDirector] convertToGL:end];
        float distance = ccpDistance(start, end);
        if (distance > 1)
        {
            int d = (int)distance;

            b2Vec2 s(start.x/PTM_RATIO, start.y/PTM_RATIO);
            b2Vec2 e(end.x/PTM_RATIO, end.y/PTM_RATIO);     
            b2BodyDef bd;            
            bd.type = b2_staticBody;
            bd.position.Set(0, 0);

            b2Body* body = _world->CreateBody(&bd);
            b2PolygonShape shape;
            shape.SetAsEdge(b2Vec2(s.x, s.y), b2Vec2(e.x, e.y));
            body->CreateFixture(&shape, 0.0f);

            CGPoint diff = ccpSub(start, end);
                float rads = atan2f( diff.y, diff.x);
                float degs = -CC_RADIANS_TO_DEGREES(rads);
                float dist = ccpDistance(end, start);
                CCSprite *obj = [CCSprite spriteWithFile:@"image.png"];
                [obj setAnchorPoint:ccp(0.0f, 0.5f)];
                [obj setPosition:end];
                [obj setScaleX:dist/obj.boundingBox.size.width];
                [obj setRotation: degs];
                [self addChild:obj];
       } 
```

# codeigniter - codeigniter 显示错误：无法找到您指定的模型：

> ID：12037080
> 
> 赞同：2
> 
> 时间：2012-08-20T11:47:51.833
> 
> 标签：codeigniter

我使用最新版本的 CI，即 2.1.2。

我将我的演示应用程序上传到以下位置[http://www.domainname.com/myfolder/index.php](http://www.domainname.com/myfolder/index.php)

如果我尝试打开主页，欢迎控制器已正确打开。但是，如果我尝试打开[http://www.domainname.com/myfolder/index.php/controllername/functionname](http://www.domainname.com/myfolder/index.php/controllername/functionname)页面，我会收到以下错误消息：

遇到错误

找不到您指定的模型：backofficeusersmodel

在我的配置文件中，我有以下设置：

$config['base_url'] = 'http://www.domainname/myfolder/'; $config['index_page'] = 'index.php'; 我也试过了

$config['base_url'] = 'http://www.domainname.com/myfolder/application/'; $config['index_page'] = 'index.php';

没有任何成功。

但是，模型是上传的，它的名称是 backOfficeUsersModel，而不是错误消息中所说的所有情人案例。

我想提一下，我使用 myModel（在应用程序/核心中上传），当我在某些免费托管下上传相同的应用程序时，同样奇怪的事情发生了，只是错误是无法找到 mymodel。

我在不同的托管公司上传相同的应用程序并且它在那里工作。此外，相同的应用程序在我的本地主机上正常工作。

有人有类似的经历吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:58:15.880

模型文件应位于 application/models 文件夹中，并应以小写形式命名，如 backofficeusersmodel。这些要求可能存在缺陷。

# jquery - Phonegap 应用程序的屏幕尺寸分辨率？

> ID：12037083
> 
> 赞同：2
> 
> 时间：2012-08-20T11:47:54.043
> 
> 标签：jquery, html, jquery-mobile, cordova

我正在为 3.5 英寸到 5.3 英寸的屏幕尺寸制作一个手机间隙 android 应用程序，但是屏幕分辨率在创建 UI 时产生了问题。任何人都可以帮助我创建适用于 3.5 到 5.3 英寸所有屏幕尺寸的 UI 的分辨率?? 请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:58:47.040

您应该尝试使用 phonegap 进行流畅的布局。尝试使用百分比和相对度量。还要记住，在移动应用程序中，您必须考虑像素密度等。

另请参阅视口标签，以下将制作一个不调整大小的全屏应用程序：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T06:56:38.630

您应该尝试为此使用媒体查询。将设备分辨率获取到 deviceready 上的变量并将其传递给媒体查询。使用百分比和相对度量也很有帮助。

# c# - 如何使用 C#/LINQ 将 XML 转换为 JSON？

> ID：12037085
> 
> 赞同：23
> 
> 时间：2012-08-20T11:48:10.760
> 
> 标签：c#, json, xml, xml-parsing

我有以下需要在服务器中转换为 JSON 的 XML 文件。最初我以为我会将它转换为字典，然后使用 JavaScriptSerializer 将其转换为 JSON，但由于每列可能有不同的值类型，我认为它不会起作用。以前有没有人在 C#/LINQ 中做过类似的事情？

我需要保留每列的值类型（布尔值、字符串、整数）。

我将不胜感激任何建议，因为我刚刚开始使用 XML。谢谢。

```
<Columns>
 <Column Name="key1" DataType="Boolean">True</Column>
 <Column Name="key2" DataType="String">Hello World</Column>
 <Column Name="key3" DataType="Integer">999</Column>
</Columns> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-20T11:55:56.860

```
using System;
using System.Linq;
using System.Web.Script.Serialization;
using System.Xml.Linq;

class Program
{
    static void Main()
    {
        var xml = 
        @"<Columns>
          <Column Name=""key1"" DataType=""Boolean"">True</Column>
          <Column Name=""key2"" DataType=""String"">Hello World</Column>
          <Column Name=""key3"" DataType=""Integer"">999</Column>
        </Columns>";
        var dic = XDocument
            .Parse(xml)
            .Descendants("Column")
            .ToDictionary(
                c => c.Attribute("Name").Value, 
                c => c.Value
            );
        var json = new JavaScriptSerializer().Serialize(dic);
        Console.WriteLine(json);
    }
} 
```

产生：

```
{"key1":"True","key2":"Hello World","key3":"999"} 
```

显然，这将所有值视为字符串。如果要保留底层类型语义，可以执行以下操作：

```
using System;
using System.Linq;
using System.Web.Script.Serialization;
using System.Xml.Linq;

class Program
{
    static void Main()
    {
        var xml = 
        @"<Columns>
          <Column Name=""key1"" DataType=""System.Boolean"">True</Column>
          <Column Name=""key2"" DataType=""System.String"">Hello World</Column>
          <Column Name=""key3"" DataType=""System.Int32"">999</Column>
        </Columns>";
        var dic = XDocument
            .Parse(xml)
            .Descendants("Column")
            .ToDictionary(
                c => c.Attribute("Name").Value, 
                c => Convert.ChangeType(
                    c.Value,
                    typeof(string).Assembly.GetType(c.Attribute("DataType").Value, true)
                )
            );
        var json = new JavaScriptSerializer().Serialize(dic);
        Console.WriteLine(json);
    }
} 
```

产生：

```
{"key1":true,"key2":"Hello World","key3":999} 
```

如果您无法修改底层 XML 结构，您将需要一个自定义函数，该函数将在您的自定义类型和底层 .NET 类型之间进行转换：

```
using System;
using System.Linq;
using System.Web.Script.Serialization;
using System.Xml.Linq;

class Program
{
    static void Main()
    {
        var xml = 
        @"<Columns>
          <Column Name=""key1"" DataType=""Boolean"">True</Column>
          <Column Name=""key2"" DataType=""String"">Hello World</Column>
          <Column Name=""key3"" DataType=""Integer"">999</Column>
        </Columns>";
        var dic = XDocument
            .Parse(xml)
            .Descendants("Column")
            .ToDictionary(
                c => c.Attribute("Name").Value, 
                c => Convert.ChangeType(
                    c.Value, 
                    GetType(c.Attribute("DataType").Value)
                )
            );
        var json = new JavaScriptSerializer().Serialize(dic);
        Console.WriteLine(json);
    }

    private static Type GetType(string type)
    {
        switch (type)
        {
            case "Integer":
                return typeof(int);
            case "String":
                return typeof(string);
            case "Boolean":
                return typeof(bool);
            // TODO: add any other types that you want to support
            default:
                throw new NotSupportedException(
                    string.Format("The type {0} is not supported", type)
                );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-20T11:51:05.133

有必要使用LINQ吗？否则你可以试试这个：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
string jsonText = JsonConvert.SerializeXmlNode(doc); 
```

取自[这篇文章](https://stackoverflow.com/questions/814001/json-net-convert-json-string-to-xml-or-xml-to-json-string)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-05T18:27:48.347

对于具有更多未知属性的 XML 元素的深层嵌套，您可以使用此递归：

```
private static string XmlToJson(string xmlString)
{
    return new JavaScriptSerializer().Serialize(GetXmlValues(XElement.Parse(xmlString)));
}

private static Dictionary<string, object> GetXmlValues(XElement xml)
{
    var attr = xml.Attributes().ToDictionary(d => d.Name.LocalName, d => (object)d.Value);
    if (xml.HasElements) attr.Add("_value", xml.Elements().Select(e => GetXmlValues(e)));
    else if (!xml.IsEmpty) attr.Add("_value", xml.Value);

    return new Dictionary<string, object> { { xml.Name.LocalName, attr } };
} 
```

对于您的示例，结果将是：

```
{
    "Columns":{
        "_value":[
            {
                "Column":{
                    "Name":"key1",
                    "DataType":"Boolean",
                    "_value":"True"
                }
            },
            {
                "Column":{
                    "Name":"key2",
                    "DataType":"String",
                    "_value":"Hello World"
                }
            },
            {
                "Column":{
                    "Name":"key3",
                    "DataType":"Integer",
                    "_value":"999"
                }
            }
        ]
    }
} 
```

[对于像这样](https://www.wikidata.org/w/api.php?action=wbgetclaims&entity=Q2303322&format=xml)更复杂的 XML 案例，您可以在[此处](http://codebeautify.org/jsonvalidate/cb0aef63)查看 JSON 模拟。

# java - Windows - 创建文件时收到警告

> ID：12037087
> 
> 赞同：5
> 
> 时间：2012-08-20T11:48:14.813
> 
> 标签：java, windows

我不确定我的要求是否可行，但我想做以下事情：在某个文件夹（Windows）中创建文件时，我的程序应该响应。我想让 Windows 在创建文件时调用回调方法。

另一种选择当然是使用循环并不断检查文件夹中是否有新文件，但我想立即知道它，所以回调方法会更有效。

这可能吗？语言并不重要，尽管 Java 是首选。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:51:05.557

使用 Java nio 2（在 Java 1.7 + 中可用），您可以[“监视”一个目录](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)并在该目录更改时收到通知。

上面链接的教程中提出的方法使用[`WatchService`API](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:01:50.170

[Commons IO](http://commons.apache.org/io/ "共享 IO")包含`FileAlterationListener`一个`onDirectoryChange`方法。如果 Java 1.7 不可用，可以作为替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:17:13.123

如果您没有绑定到 Java，那么您可以在 C# 或 VisualBasic 中使用非常方便的[FileSystemWatcher 。](http://www.techrepublic.com/article/use-the-net-filesystemwatcher-object-to-monitor-directory-changes-in-c/6165137)它将允许您观看文件夹中可能发生的各种事件，并且很容易实现它。

# python - 如何从 Tornado 提供二进制数据？

> ID：12037089
> 
> 赞同：1
> 
> 时间：2012-08-20T11:48:15.617
> 
> 标签：python, tornado, binary-data

我有一个 numpy 数组，我想使用 Tornado 服务，但是当我尝试使用它编写它时，`self.write(my_np_array)`我只得到一个 AssertionErrror。

我究竟做错了什么？

```
File "server.py", line 28, in get
self.write(values)
File "/usr/lib/python2.7/site-packages/tornado/web.py", line 468, in write
chunk = utf8(chunk)
File "/usr/lib/python2.7/site-packages/tornado/escape.py", line 160, in utf8
assert isinstance(value, unicode) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T22:41:32.150

不完全确定您的目标是什么，但是如果您想获得对象的字符串表示形式，您可以这样做

```
self.write(str(your_object)) 
```

如果您想将 numpy 数组作为 python 对象提供，以便在不同的客户端上使用它，您需要先腌制该对象

```
import pickle
self.write(pickle.dumps(your_object)) 
```

然后可以使用

```
your_object = pickle.loads(sent_object) 
```

请记住，从不受信任的来源中提取对象是很危险的，因为它可能导致恶意代码执行。

**编辑：**

如果你想传输一个 numpy 数组并在 javascript 中使用它，你不需要二进制表示。

只需将 numpy 数组转换为列表

```
your_numpy_list = your_numpy_object.tolist() 
```

并将其转换为 json

```
import json
self.write(json.dumps(your_numpy_list)) 
```

在 javascript 端，您只需解析结果字符串

```
var result = JSON.parse(resultString) 
```

并从中创建类型化数组

```
var typedResult = new Float32Array(result) 
```

瞧！

# android - 我可以在没有 Eclipse 的情况下编译 android 项目吗？

> ID：12037091
> 
> 赞同：3
> 
> 时间：2012-08-20T11:48:23.543
> 
> 标签：android

您好，最近两天我想到了一个问题。我们可以在没有 Eclipse 的情况下编译我们的 android 项目吗？如果是，那么有什么替代方案？请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:53:09.443

一个选项是`ant`，一个极其精简的教程是这样的：

首先使用适当的构建脚本和 ant 需要的所有文件更新您的项目，您可以只使用一个命令来完成，例如

```
android update project -p . -t android-10 
```

此命令有很多选项，请随意浏览这些选项。

之后就做

```
ant debug 
```

或者

```
ant release 
```

根据您想要生产的内容，ant 还有其他变体，您可以使用 Android 文档轻松发现它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:51:05.913

> 如果您在非 Eclipse 环境中进行开发，您可以使用项目目录中生成的 build.xml Ant 文件来构建您的项目。Ant 文件调用自动为您调用构建工具的目标。

[看这里](http://developer.android.com/tools/building/index.html)了解更多详情。

```
cd /path/to/my/app
ant release 
```

它每次都会询问您的私钥来签署应用程序，可以通过编辑“build.properties”文件将其配置为自动签名：

```
key.store=release.keystore
key.alias=release
key.store.password=my_key_password
key.alias.password=my_key_password 
```

您还可以调查 Android SDK，找到它实际使用的 ANT 构建脚本，并在构建过程中间插入您的自定义混淆器/优化器调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T09:35:53.060

对于不习惯使用 java 编码并希望使用 HTML/JavaScript 和 CSS 为 android 构建本机应用程序的人——你可以使用 PhoneGap——你可以将你的代码上传到一个 zip 并获取一个 APK。目前它处于测试阶段，这就是为什么免费。

[https://build.phonegap.com/](https://build.phonegap.com/)

还支持其他电话操作系统。它很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:52:01.450

如果您只是不想使用 Eclipse IDE，您可以选择其他 IDE，例如[IntelliJ IDEA](http://www.jetbrains.com/idea/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T14:29:27.207

您可以将 maven 与 maven android 插件[http://code.google.com/p/maven-android-plugin/](http://code.google.com/p/maven-android-plugin/)一起使用。之后，您可以使用任何支持 maven（NetBeans、Eclipse、IntelliJ IDEA）的 IDE。

# google-apps-script - 获取编辑器（）获取所有者（）

> ID：12037093
> 
> 赞同：0
> 
> 时间：2012-08-20T11:48:28.793
> 
> 标签：google-apps-script

我可以从 Apps 脚本中获得网站所有页面的编辑和作者吗？我想这样做是因为我正在对页面使用页面级别权限。所以单独的页面有单独的**所有者和编辑**。

```
var site = SitesApp.getActiveSite();
var pages = site.getChildren();
Logger.log(pages[0].getAuthors());
//Logger.log(pages[0].getEditors());  there is no getEditors() method for page instead of site. 
```

在日志中，它只显示任何页面的页面创建者。

我无法在 Apps Script 中获得这些内容......知道吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:29:07.770

该方法`.getEditors()`适用于网站，而不是页面。您只能在站点级别定义权限，就像在“管理站点”选项卡中手动设置的站点设置一样。

您提到您正在*“对页面使用页面级别权限”*，您是如何做到的？

# android - 无法从edittext获取文本？

> ID：12037098
> 
> 赞同：-1
> 
> 时间：2012-08-20T11:49:04.790
> 
> 标签：android, android-edittext

我已更新到 ADT 版本 20。之后我无法使用 EditText。对于 API 级别 16，它显示了一些错误。对于较低的 API 级别，没有错误，但我无法获得 EditText 的输入。它显示一个空结果。

我使用的示例代码：

**爪哇代码**

```
public class sample extends Activity {
EditText edt;
Button btn;
TextView txt;
String str;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    edt = (EditText) findViewById(R.id.editText1);
    btn = (Button) findViewById(R.id.button1);
    txt = (TextView) findViewById(R.id.textView2);
    str = edt.getText().toString();
    btn.setClickable(true);
    btn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Log.d("WordWeb","entered - "+str);
            txt.setText("you entered"+str);
        }
    });
}
} 
```

**XML 编码**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/Search"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="10pt"
    android:text="Button" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T11:52:32.080

实际上，您正在尝试从 Activity 中获取文本`EditText`，`onCreate()`它还没有包含任何文本。

所以只要把线 `str = edt.getText().toString();`放在按钮的 click() 中，你就会得到结果，

喜欢，，

```
btn.setClickable(true);
btn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        str = edt.getText().toString();
        Log.d("WordWeb","entered - "+str);
        txt.setText("you entered"+str);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:54:18.483

您的声明`str = edt.getText().toString();`应该在`onClick`处理程序内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T11:59:50.317

代码无法访问该值，因为结束后在abd中`onCreate`找到的值超出了范围。所以把语句放在里面，这样当用户点击按钮时，它就可以访问该值。`EditText``str``str = edt.getText().toString();``onClick`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T11:54:06.900

我认为您正在尝试获取`EditText`（即 edt）价值，`onCreate()`并且我认为您是在方法完成后输入价值。所以`onCreate()`这意味着您没有为您的`str`.

这就是为什么您无法将值设置为`TextView`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-07T03:34:22.343

只需将文本放在您的按钮中，否则它将无法正常工作，因为无论您在字符串中获得什么也可以像您一样工作

# java - 暂停流程执行直到显示 UI

> ID：12037106
> 
> 赞同：0
> 
> 时间：2012-08-20T11:49:40.547
> 
> 标签：java, multithreading, swing

我有两个用户界面。我希望我的第一个 UI 调用一个函数，然后有代码来显示下一个 UI，但是这些函数必须在显示第二个 UI 后开始工作。

# gwt - GWT - 带有密码列的可编辑单元格表

> ID：12037110
> 
> 赞同：0
> 
> 时间：2012-08-20T11:49:52.467
> 
> 标签：gwt

我将 CellTable 与密码作为一列。我希望密码列是可编辑的。

我的代码如下

```
public class EditPasswordTextCell extends EditTextCell {

    @Override
    protected void edit(Context context, Element parent, String value) {
        setValue(context, parent, value);
        InputElement input = getInputElement(parent);
        input.setAttribute("type", "password"); //$NON-NLS-1$ //$NON-NLS-2$
        input.focus();
        input.select();
    }
} 
```

单击单元格时会弹出一个密码框。但完成编辑后，列中显示的值是纯文本。然后我决定重写渲染器方法。但是 EditTextCell 类中的大多数方法都是私有的，所以我最终覆盖了

```
@Override
public void render(Context context, String value, SafeHtmlBuilder sb) {
    value = "******"; //$NON-NLS-1$
    super.render(context, value, sb);
} 
```

上面的代码适用于第一次渲染，而不适用于后续渲染。

现在问题出现了，我应该从 EditTextCell 还是 AbstractEditableCell 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:01:42.630

**简单的方法**

您可以将 a 传递`SafeHtmlRenderer`给`EditTextCell`构造函数。这样渲染器就可以渲染普通视图，而不是使用其默认模板（普通 <input>）。

**也许更正式**

看来您的单元格在查看模式和编辑模式下是不同的，因此非 EditTextCell 类似乎很合适。但无论如何，第一种方法似乎更容易......

# iphone - 使用 SSL 的 iPhone 登录网站

> ID：12037114
> 
> 赞同：0
> 
> 时间：2012-08-20T11:50:23.563
> 
> 标签：iphone, ios5, ssl

我从 Iphone 应用程序登录网站时遇到问题。它是一个 https，因此是一个 SSL 安全站点。不幸的是，当我尝试登录时收到一条错误消息。而且我不知道如何解决这个错误。

**这里的错误信息：**

```
2012-08-20 13:38:56.490 Login_2[330:f803] IN GETFILELIST: (null)
2012-08-20 13:38:56.903 Login_2[330:f803] ERROR: (null)
2012-08-20 13:38:56.914 Login_2[330:f803] ERROR!: 
Error Domain=NSURLErrorDomain Code=-1200 "An SSL error has occurred and a secure connection to the server cannot be made." UserInfo=0x6ab9ac0 {NSErrorFailingURLStringKey=https://www.remote.sokratherm.de:80/?content=tableau&tableau=1, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, NSErrorFailingURLKey=https://www.remote.sokratherm.de:80/?content=tableau&tableau=1, NSLocalizedDescription=An SSL error has occurred and a secure connection to the server cannot be made., NSUnderlyingError=0x6abea00 "An SSL error has occurred and a secure connection to the server cannot be made."} 
```

**这里的代码：**

```
NSString *apiPath = [NSString stringWithFormat:@"https://%@:%@/", hostServer, hostPort];

httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:apiPath]];
[httpClient setAuthorizationHeaderWithUsername:hostUser password:hostPass];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"index.php" parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request]; 
```

如果您需要更多信息，请询问。我很高兴有任何帮助。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:58:31.900

服务器`www.remote.sokratherm.de`似乎没有在端口 80 上使用 SSL 运行。您是要指定该端口吗？如果没有，请`:80`从您的请求 URL 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:56:22.923

你应该检查这两种方法：

```
[operation setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace)
{
    //return YES or NO according to information received in 
    //objects *connection* and *protectionSpace*
}]; 
```

和这个：

```
[operation setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace)
{
    **if ([challenge.protectionSpace.host isEqualToString:@"YOURHOST"])**
    {
        [[challenge sender] useCredential:[NSURLCredential credentialWithUser:@"YOURUSER" password:@"YOURPASSWORD" persistence:NSURLCredentialPersistenceNone] forAuthenticationChallenge:challenge];
}
}]; 
```

# python - django Q 对象的奇怪行为

> ID：12037116
> 
> 赞同：0
> 
> 时间：2012-08-20T11:50:33.387
> 
> 标签：python, django-models

我有 2 个模型：

```
class Call(models.Model):
    date_time_created = models.DateTimeField(auto_now_add = True)
    comment = models.CharField(max_length = 300, blank= True, null=True)
    bought_record = models.ForeignKey('BoughtRecords')

class BoughtRecords(models.Model):
    date_time_bought = models.DateTimeField(auto_now_add= True)
    bought_packet = models.ForeignKey('BoughtPackets') 
```

我写了2个查询：

1.  `Q1 = Q(call__result = 1)`
    `company_for_call = BoughtRecords.objects.exclude(Q1)`

2.  `company_for_call = BoughtRecords.objects.exclude(call__result = 1)`

    我期望这个查询有同样的行为。它们生成略有不同的 sql 查询（我不擅长原始 sql=)）。

我想这就是为什么 BoughtRecord 并不总是存在 Call 的原因，或者可能是 Q-objects 不能与反向外键一起正常工作。请解释一下这种行为，因为我经常从 Q 对象编译复杂的查询，有时会得到意想不到的结果。我想知道乍一看结果必须是相似的，但实际上却不同的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:59:56.090

我可以看到，在使用的情况下，`Q`有`INNER_JOIN`一段`WHERE NOT`时间调用`exclude`查询的直接结果是 a `nested select`。在语义上它们是等价的。`INNER JOIN`发生这种情况时，将排除`NULL`上的引用。`foreign_key`在嵌套查询的情况下`target_call.bought_record_id = NULL`是明确指定的。所以结果不应该有任何差异。

# jquery - 没有插件的 Pinterest 样式 css 布局

> ID：12037117
> 
> 赞同：2
> 
> 时间：2012-08-20T11:50:51.467
> 
> 标签：jquery, css, layout

您可以看到我的代码的 jsfiddle 链接如何在没有插件的情况下放置类似 pinterest 的样式在这里您可以在图中看到一个方形 Node.js，我希望它位于左侧。

[http://jsfiddle.net/madhu131313/HaxwT/](http://jsfiddle.net/madhu131313/HaxwT/)![看到这个链接](../Images/9fff839c5ebce618e2bae9767bc3eef8.png)

我知道有插件可以制作布局，就像我知道有插件和框架 [http://gumbyframework.com/](http://gumbyframework.com/)

[http://masonry.desandro.com/](http://masonry.desandro.com/)

但我希望在没有插件或框架的情况下让它变得简单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:57:52.547

试试这个： [http ://cssdeck.com/labs/css-only-pinterest-style-columns-layout](http://cssdeck.com/labs/css-only-pinterest-style-columns-layout)

它对我来说效果很好，而且很容易实现。不过，它并没有使事情井井有条，我不知道如何解决这个问题。我认为值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:03:18.457

这些插件是为了做你想做的事情而创建的，因为恐怕没有简单的解决方案。

要么使用 Masonry 之类的插件之一，要么通过将您的项目放在列中简单地用纯 html/css 自己编写代码。

显然在列中创建它意味着它不会动态工作等。

# java - 如何在java中限制哈希集的默认排序

> ID：12037128
> 
> 赞同：2
> 
> 时间：2012-08-20T11:51:20.287
> 
> 标签：java, collections, set

我的 java 程序中有一些值。我只是将这些值存储在`HashSet`. 我已经通过for循环存储了它。在集合形成后，循环迭代的值的顺序不同。`HashSet`当我从循环中获得时，如何限制这种顺序变化。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T11:52:20.113

如果您希望集合保持插入顺序，可以使用[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)：

> Set 接口的实现，具有可预测的迭代顺序。此实现与 HashSet 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，也**就是元素插入集合的顺序（insertion-order）**。

或者，如果您希望您的集合被订购，您可以使用[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T11:52:38.723

A`HashSet`是无序的，正如[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)所指定的：

> 它不保证集合的迭代顺序；特别是，它不保证订单会随着时间的推移保持不变。此类允许空元素。

您可能需要考虑使用 a [`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)，它维护插入的顺序。

另一种方法是使用其中一种[`NavigableSet`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableSet.html)实现，例如[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)which 保证根据自然顺序的顺序，或者`Comparator`，如果给定的话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T11:53:15.590

使用[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)可预测的迭代顺序

# vba - Normal.dotm 宏在打开受保护的文档时抛出错误

> ID：12037139
> 
> 赞同：1
> 
> 时间：2012-08-20T11:52:01.893
> 
> 标签：vba, ms-word

我在 Word 2010 的 Normal.dotm 中添加了以下宏：

```
Sub AutoOpen()
'
' AutoOpen Macro
'
'
   Dim aStory As Range
   Dim aField As Field

   For Each aStory In ActiveDocument.StoryRanges

      For Each aField In aStory.Fields
         aField.Update
      Next aField

   Next aStory

 ' set document as unchanged (prevents save dialog popping up when closing) - further changes will set this back
 ActiveDocument.Saved = True
End Sub 
```

现在，当我在 Word 2010 中打开一些文档时，我收到以下错误消息：

> 运行时错误“4248”
> 
> 此命令不可用，因为没有打开文档

到目前为止，这似乎发生在受保护视图中打开的文件（例如从 Internet 下载的文件或电子邮件附件）中 - 如果我在信任中心关闭受保护视图，问题就会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:01:48.917

微软写了一篇关于[检测保护模式是否从宏中运行](http://blogs.office.com/b/microsoft-word/archive/2010/09/13/object-model-considerations-for-protected-view-in-word-2010.aspx)的博客文章。

这表明 的值`Application.ActiveProtectedViewWindow`是`Nothing`当文档**不在**受保护的视图中时。因此，将引用 ActiveDocument 的宏函数包装在 If 语句中检查这一点将阻止这些函数在文档处于受保护视图时运行。

上面的脚本变成：

```
Sub AutoOpen()
    '
    ' AutoOpen Macro
    '
    '
       Dim aStory As Range
       Dim aField As Field

    ' Check that document is not in Protected View before doing anything
    If Application.ActiveProtectedViewWindow Is Nothing Then

           For Each aStory In ActiveDocument.StoryRanges

              For Each aField In aStory.Fields
                 aField.Update
              Next aField

           Next aStory

         ' set document as unchanged (prevents save dialog popping up when
         'closing) - further changes will set this back
         ActiveDocument.Saved = True
    End If
End Sub 
```

# jquery - 使用 ajax 将事件添加到 fullCalendar

> ID：12037141
> 
> 赞同：1
> 
> 时间：2012-08-20T11:52:28.303
> 
> 标签：jquery, ajax, fullcalendar

我正在尝试使用 Adam Shaw 著名的 fullCalendar 将事件添加到日历中。我有一个表单，用户可以在其中输入他想要创建的事件的属性。我是 jquery 的新手，所以我从静态添加事件开始。这是我在表格之后的内容：

```
<a href="#" class="btn btn-primary" onclick="add_event();">Save</a> &nbsp; <a class="btn" href="#">Cancel</a>
    function add_event()
        {  document.write('ajax call');
              $.ajax({   
                    type : 'POST',  
                    url: '<?php echo site_url()."/public/calendar/addEvent" ?>',
                    method: 'post',
                    data: 'true',
                    success: function(data)

                    {   document.write('je commence');
                                    var event = {
                              title : "AJAX",
                              start : "2012-08-16",
                              end   : "2012-08-17"
                                  };

                               $('#calendar').fullCalendar( 'renderEvent', event, true )

                                            }               
                         else
                        {   document.write('else');
                            // Display error
                        }  
                }

            }); 

        } 
```

只打印“开始”。谁能告诉我如何纠正这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:19:18.903

在全日历中，“选择”选项用于在特定日期创建事件[http://arshaw.com/fullcalendar/docs/selection/select_callback/](http://arshaw.com/fullcalendar/docs/selection/select_callback/)

检查此链接 [http://jsfiddle.net/xSYj9/](http://jsfiddle.net/xSYj9/)

# javascript - JavaScript 在选择更改时不显示文本区域

> ID：12037145
> 
> 赞同：2
> 
> 时间：2012-08-20T11:52:43.057
> 
> 标签：javascript, html

```
function otherShow() {
    var textarea = document.getElementById("hideme");
    var x = document.forms.myForm.other_trade.value;
    if (x == "other") {
        textarea.style.display = 'block';
    }else {
        textarea.style.display = 'none';
    }
} 
```

这是我的 JavaScript 代码，它应该隐藏包含`ID=hideme`和触发操作的文本区域`onchange="otherShow();"`

```
<select name="trade" required="required" class="inputbox" id="trade" onchange="otherShow();">
<option value="" selected="selected"> Select one... </option>
<option value="" disabled="disabled">  ----------------------   </option>
<option value="General Labourer">Option1</option> 
.......
</select> 
```

上面是Select，下面是Textarea

```
<textarea cols="36" rows="6" class="inputbox" id="hideme" name="other_trade"></textarea> 
```

在选择结束时，我有一个

```
<option value="Other"> Other </other> 
```

我想在选择其他时显示文本区域。请帮助我认为 loginc 是正确的，但是当我将其更改为某个值时它不起作用，它会隐藏文本区域，但不要更改它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:55:15.217

选择框的名称`trade`不是`other_trade`：

```
var x = document.forms.myForm.trade.value; 
```

或者 ：

```
var x = this.value; 
```

代替 ：

```
var x = document.forms.myForm.other_trade.value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:59:29.407

这是我会怎么做

```
window.onload=function() {
  document.getElementById("trade").onchange=function() {
    var textarea = this.form.other_trade;
    textarea.style.display=(this.value=="Other")?"block":"none";
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:10:13.673

**在您的 javascript 显示/隐藏条件中将other**替换为**Other**，因为它比较区分大小写

# javascript - 将 JavaScript 检测与 MVC4 显示模式集成的最佳方法是什么？

> ID：12037149
> 
> 赞同：2
> 
> 时间：2012-08-20T11:52:58.063
> 
> 标签：javascript, asp.net-mvc, noscript

我正在处理现有的 MVC 项目，目前正在考虑使用显示模式功能。我希望最终的应用程序能够返回三种不同类型的视图。

*   手机 -*手机, IE6/7* ,
*   非 JavaScript 浏览器 -*平板电脑*
*   平板电脑浏览器桌面 -*桌面浏览器*

除了 JavaScript 检测，一切都很简单。

目前它是一个优雅降级的桌面应用程序。这很好，但需要花费大量时间来支持非 JavaScript 用户（这仅占我们受众的 2%，其中大部分可能是机器人）。因此，我想为非 JavaScript 用户提供网站的基本移动版本，该版本的支持应该更少。

我知道必须在客户端呈现某些内容，然后进行重定向。但是最好的方法是什么？`<noscript>`我是默认使用移动设备并使用 JavaScript 重定向还是使用标签做一些事情？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:36:10.807

在您的场景中，将`<noscript>`标签与[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)结合使用可能是您想要的：

```
<head>

  <noscript>
    <meta http-equiv="refresh" content="0; url=http://example.com/mobile" />
  </noscript>

</head> 
```

我不建议这样做（首先加载移动设备并使用 JavaScript 重定向），因为正如您所说，非 JS 用户只有 2%，这只会为所有其他用户增加不必要的开销。

# php - PHP Web 服务无法从 jQuery AJAX 运行

> ID：12037154
> 
> 赞同：0
> 
> 时间：2012-08-20T11:53:03.757
> 
> 标签：php, web-services, jquery

我在 jomsocial 环境中创建了 Restful Web 服务。它在本地机器上。当我使用 REST 控制台对其进行测试时，它会返回响应。

形成的本地网址是...

`http://localhost:5454/kisan-06/index.php?option=com_api&format=raw&app=users&resource=login&key=dfd8a84f8cdce807ae1d30a838415ea37eaa075c`

问题：

当我使用 jQuery.ajax 调用相同的函数时，总是会调用错误回调函数。

阿贾克斯调用是...

```
$.ajax({
    type: "POST",
    url: "http://localhost:5454/kisan-06/index.php?option=com_api&format=raw&app=users&resource=login&key=dfd8a84f8cdce807ae1d30a838415ea37eaa075c",
    data: "{ username: 'sai.kiks2@gmail.com', password: '123456'}",
    contentType: "application/json; charset=utf-8",
    cache : false,
    dataType: "json",
    success: function(data) {
        alert("in success");
    },
    error: function(jqXHR,error, errorThrown){
        //alert("There was an error loggin in");
        alert("responseXML ",jqXHR.responseXML);
        alert("responseText: ",jqXHR.responseText);
        alert("errorThrown: ",errorThrown);
    }
}); 
```

我有一个 asp.net Web 服务，它返回响应为...

```
<?xml version="1.0" encoding="utf-8"?>
<string>{"UserID":"180339206","LogInName":"Amol Chakane","IsValid":"True","UserRoleID":"1","IsPending":"0","IsOrganization":"False"}</string> 
```

来自 jomsocial 网络服务的响应是...

```
["UserID : 475", "LogInName : kruti patil", "IsValid : True", "UserRoleID : 1", "IsPending : 0", "IsOrganization : False"] 
```

我搜索了这个问题，但找不到解决方案。请帮助我。

**编辑#1**

试图以其他格式获得响应。

```
{
"UserID": "475",
"LogInName": "kruti patil",
"IsValid": "Yes",
"UserRoleID": "1",
"IsPending": "NO",
"IsOrganization": "No", 
```

}

仍然无法正常工作:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:23:40.590

当您发布更多信息时，我**想**我找到了您遇到麻烦的原因。根据[此](http://www.zuellich.de/tutorials/kurzeinfuehrung-json#wofuer)页面，您的 json 对象的语法是错误的。链接页面显示了 Javascript 中最常见数据类型的示例。如果您阅读示例，请注意引号的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:09:30.433

经过大量搜索，我终于找到了解决这个问题的方法。:)

而不是**localhost**需要使用**10.0.2.2**这个网络地址因为 android 模拟器不识别 localhost 参考[这个](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

现在至少调用了成功回调

ajax 调用是..

```
$.ajax({
    type: "POST",
    url: "http://10.0.2.2:5454/kisan-06/index.php?option=com_api&format=raw&app=users&resource=login&key=dfd8a84f8cdce807ae1d30a838415ea37eaa075c",
    data: {username: 'sai.kiks2@gmail.com', password: '123456'},
    success: function(data, textStatus, jqXHR) {
        alert("in success");
    },
        error: function(jqXHR, textStatus, errorThrown){
            alert("There was an error loggin in");
        }
}); 
```

但现在我面临另一个问题......

如何访问成功回调中返回的数据？

# c++ - c++ 不要工作循环

> ID：12037160
> 
> 赞同：-3
> 
> 时间：2012-08-20T11:53:28.180
> 
> 标签：c++, char, cycle

我将 char* 转换为 char**。每个单词都必须折叠成数组。但只折叠第一个单词。输入：“abc def 123”输出（预期）：num ==3，arr == {“abc”，“def”，“123”} 输出（实际）：num == 1，arr == {“abc” }

```
struct CommandArray
{
    vector<char*> Arr;
    USHORT Num;
};
CommandArray Text::StrToArray(LPSTR Str)
{
    CommandArray Out;
    LPSTR TempStr;
    Out.Num = 0;
    TempStr = strtok (Str," ");
    while(TempStr != NULL)
    {
        Out.Arr.push_back(TempStr);
        Out.Num++;
        TempStr = strtok(NULL," ");
    }
    return Out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:48:25.750

第一的。用于`cin.getline(input,32);`获取由空格分隔的输入， `cin>>input`将不起作用。

关于. `char*`_ `char**`下面的代码将每个单词折叠成一个数组。

```
#include<windows.h>
#include<vector>
#include<string>
#include<iostream>
using namespace std;

struct CommandArray
{
    vector<char*> Arr;
    USHORT Num;
};

CommandArray  StrToArray(LPSTR Str)
{
    CommandArray Out;
    LPSTR TempStr;
    Out.Num = 0;
    TempStr = strtok (Str," ");
    while(TempStr != NULL)
    {
        Out.Arr.push_back(TempStr);
        Out.Num++;
        TempStr = strtok(NULL," ");
    }
    return Out;
}

int main()
{

    int ROWS=80; //80 characters wide
    int COLUMNS=20;// 20 lines
    int i;

    char seperators[]   = " ,\t\n";
    char *token;    

    char* input_Dynamic1DCharPointerArray = new char[80];
    char **output_Dynamic2DCharPointerArray = 0;
    //memory allocated for elements of rows.
    output_Dynamic2DCharPointerArray = new char *[ROWS] ;
    //memory allocated for  elements of each column.
    for(   i = 0 ; i < ROWS ; i++ ) output_Dynamic2DCharPointerArray[i] = new char[COLUMNS];

    strcpy(input_Dynamic1DCharPointerArray,"apples 123 oranges 456 bananas 789 lemons 101112" );

    //cout<<"  \n";
    //cin.getline(input_Dynamic1DCharPointerArray,32);

    cout<<"  \ninput = "<<input_Dynamic1DCharPointerArray<<"  \n\n";
    cout<<"Output = \n";

   token = strtok( input_Dynamic1DCharPointerArray, seperators );  
   i=0;
   while( token != NULL )
   {
      strcpy(output_Dynamic2DCharPointerArray[i],token);

      cout<<output_Dynamic2DCharPointerArray[i]<<"  \n";

      token = strtok( NULL, seperators ); // C4996
      i++;
   }

    cout<<"  \n";
    delete[] input_Dynamic1DCharPointerArray;

    //free the allocated memory
    for(   i = 0 ; i < ROWS ; i++ )
    delete [] output_Dynamic2DCharPointerArray[i] ;
    delete [] output_Dynamic2DCharPointerArray ;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:44:20.003

`strtok`修改它的第一个参数（这就是为什么它是 a`char*`而不是 a `char const*`）。一种猜测是在调用`Text::StrToArray`.

# iphone - 是否可以将外部摄像头模块连接到 iPhone 音频插孔？

> ID：12037169
> 
> 赞同：0
> 
> 时间：2012-08-20T11:54:16.243
> 
> 标签：iphone, audio, hardware

我想从 iPhone 上运行一个控制外部摄像头模块（如手机上的那些）的应用程序。这已经完成了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:18:08.767

不，不可能使用任何具有 iOS 限制的外部硬件。还有……一个摄像头模块……对不起

# iphone - 创建新文件而不是复制文件

> ID：12037176
> 
> 赞同：0
> 
> 时间：2012-08-20T11:54:59.437
> 
> 标签：iphone, ios, sqlite, nsfilemanager

编辑：现在看起来也不能与模拟器一起使用。

更多信息，似乎如果我安装了一个确实有效的存档版本，然后安装了一个不起作用的版本，就在它上面，一切都很好。但是当我删除存档版本并安装新版本时，那就是一切都停止工作的时候。

我只是在我的 iPhone 上测试我的应用程序，它运行良好，当我将它存档并在我的手机上安装 ipa 时，数据库停止工作。加载数据库时不会发生错误，就像我之前说的，它只是工作。我没有更改任何代码。它仍然可以在模拟器上运行，所以我知道它与数据库的复制有关。这是相关代码：

```
dbPath=[NSString stringWithFormat:@"%@/Documents/database.sql", NSHomeDirectory()];
// Get the documents directory
NSFileManager *fmngr = [[NSFileManager alloc] init];
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"database.sql" ofType:nil];
NSError *error;
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"didLaunchFirstTime"])
{
    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"didLaunchFirstTime"];
    [fmngr removeItemAtPath:[NSString stringWithFormat:@"%@/Documents/database.sql", NSHomeDirectory()] error:&error];

    if(![fmngr copyItemAtPath:filePath toPath:[NSString stringWithFormat:@"%@/Documents/database.sql", NSHomeDirectory()] error:&error])
    {
        // handle the error
        NSLog(@"Error creating the database: %@", [error description]);

    }
} 
```

我的查询看起来像这样，因为我使用 FMDB 来查询数据库。它在用户按下搜索按钮时调用的单独方法中。

```
FMResultSet *s = [db executeQueryWithFormat:@"SELECT Gurmukhi, ShabadID, FirstLetterStr FROM Shabad WHERE FirstLetterStr LIKE %@", searchString]; 
```

我还解压缩了 ipa 以检查数据库是否不是空白的，而事实并非如此。我不知道是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:27:32.893

您不应该在您的应用程序中硬编码目录路径 - Apple 提供了获取它们的功能：

当你想在你的包中找到文件时，你可以这样得到：

NSString *dbPathOld = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"sql"];

现在，您有了随应用程序提供的 sql 文件的路径。

当你想复制它时，你使用这个代码：

NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; NSString *dbPathNew = [docDir stringByAppendingPathComponent:@"database.sql"];

Other comments:

1) Why not use the NSFileManager *fm = [NSFileManager defaultManager];?

2) With your standard defaults, you are registering them in an initialize method in your app delegate? You are synchronizing them after you update values (so in fact "didLaunchFirstTime" is set the second time)? You might want to add a log message so you can know for sure.

# mercurial - TortoiseHG：只拉取选定的变更集？

> ID：12037181
> 
> 赞同：0
> 
> 时间：2012-08-20T11:55:18.267
> 
> 标签：mercurial, tortoisehg

我有 2 个存储库 A 和 B。我对 A 进行了 5 处更改，但其中只有 2 个也应该出现在 B 中。所以这就是我尝试的：

1.  将 5 项更改推送到 repo A
2.  将 repo B 的路径更改为 repo A 的路径
3.  单击 repo B 的“检查传入的变更集”按钮

现在我看到了我为 repo A 所做的 5 个更改。这就是我卡住的地方，我现在怎么才能只获得 5 个更改集中的 2 个？我试过“拉到这里”，但这在我的情况下不起作用，它使所有变更集低于我选择的变更集。

例如，如何从列表中获取第一个和第三个变更集？有可能吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:45:05.710

当您在存储库之间拉取变更集时，您不能跳过它们之间的变更集。如果一个变更集在两个存储库中有不同的父项，则它不是同一个变更集。

您可以通过导出所需变更集的[补丁](http://tortoisehg.bitbucket.io/manual/2.0/patches.html)然后将它们导入其他存储库来完成您的目标。这样，您就可以从 B 中的存储库 A 中获得所需的更改，但更改集在两个存储库中 不会具有相同的[nodeid 。](https://www.mercurial-scm.org/wiki/Nodeid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T04:30:53.233

It sounds like A and B were clones of the same repository. If that is the case, branching is probably what you need. If you have a history where `A` contains:

```
C:\example>hg glog --template "rev{rev}:{desc}\r\n"
@  rev6:change7
|
o  rev5:change6
|
o  rev4:change5
|
o  rev3:change4
|
o  rev2:change3
|
o  rev1:change2
|
o  rev0:change1 
```

If your `B` was originally just `rev0` and `rev1` and you wanted `rev3` and `rev5` added to it, you can just update to `rev1` and graft `rev3` and `rev5` onto it:

```
C:\example>hg update 1
0 files updated, 0 files merged, 5 files removed, 0 files unresolved

C:\example>hg glog --template "rev{rev}:{desc}\r\n"
o  rev6:change7
|
o  rev5:change6
|
o  rev4:change5
|
o  rev3:change4
|
o  rev2:change3
|
@  rev1:change2
|
o  rev0:change1

C:\example>hg graft 3 5
grafting revision 3
grafting revision 5

C:\example>hg glog --template "rev{rev}:{desc}\r\n"

@  rev8:change6      <--- contains change 1, 2, 4, 6
|
o  rev7:change4
|
| o  rev6:change7    <--- contains changes 1-7.
| |
| o  rev5:change6
| |
| o  rev4:change5
| |
| o  rev3:change4
| |
| o  rev2:change3
|/
o  rev1:change2
|
o  rev0:change1 
```

To avoid duplication of changesets and a little pre-planning, the changes that need to be on both `A` and `B` branches can be checked into `B` and merged into `A`, whereas changesets that only belong on A can be directly checked into A:

```
C:\example>hg glog --template "rev{rev}:{branch}:{desc}\r\n"

@  rev8:A:change7     <--- contains changes 1-7.
|
o    rev7:A:Merge
|\
| o  rev6:B:change6   <--- contains change 1, 2, 4, 6
| |
o |  rev5:A:change5
| |
o |  rev4:A:Merge
|\|
| o  rev3:B:change4
| |
o |  rev2:A:change3
|/
o  rev1:default:change2
|
o  rev0:default:change1 
```

# asp.net - System.ArgumentException：已存在具有相同键的条目

> ID：12037182
> 
> 赞同：4
> 
> 时间：2012-08-20T11:55:18.380
> 
> 标签：asp.net, exception, master-pages

我的 masterPage，我使用手风琴菜单

```
<%@ Master Language="C#" AutoEventWireup="true" 
            CodeBehind="DefaultMaster.Master.cs" Inherits="Lab.DefaultMaster" 

ClientIDMode="Static" %>

<%@ Import Namespace="Resources" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<link type="text/css" href="css/style.css" rel="Stylesheet" />
<title>
<asp:ContentPlaceHolder ID="title" runat="server">
</asp:ContentPlaceHolder>
</title>
<link href="css/custom-theme/jquery-ui-1.8.2.custom.css" type="text/css" 
 rel="Stylesheet" />
<link type="text/css" href="css/accordion.css" rel="Stylesheet" />
<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui-1.8.2.custom.min.js"></script>
<script src="/js/jquery.cookie.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/ddaccordion.js"></script>
<script type="text/javascript">

ddaccordion.init({ //top level headers initialization
headerclass: "expandable", //Shared CSS class name of headers group that are 
expandable
contentclass: "categoryitems", //Shared CSS class name of contents group
revealtype: "click", //Reveal content when user clicks or onmouseover the header?
Valid value: "click", "clickgo", or "mouseover"
mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds 
 before header expands onMouseover
collapseprev: true, //Collapse previous content (so only one open at any time)? 
true/false 
defaultexpanded: [0], //index of content(s) open by default [index1, index2, etc]. 
 [] denotes no content
onemustopen: false, //Specify whether at least one header should be open always (so  
never all headers closed)
animatedefault: false, //Should contents open by default be animated into view?
persiststate: true, //persist state of opened contents within browser session?
toggleclass: ["", "openheader"], //Two CSS classes to be applied to the header when 
it's collapsed and expanded,

respectively ["class1", "class2"]
togglehtml: ["prefix", "", ""], //Additional HTML added to the header when it's 
collapsed and expanded, respectively

["position", "html1", "html2"] (see docs)
animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200), 
or keywords "fast", "normal", or "slow"
oninit: function (headers, expandedindices) { //custom code to run when headers
  have initalized
//do nothing
},
onopenclose: function (header, index, state, isuseractivated) { //custom code to 
run whenever a header is opened or closed
//do nothing
}
});
ddaccordion.init({ //2nd level headers initialization
headerclass: "subexpandable", //Shared CSS class name of sub headers group that
are expandable
contentclass: "subcategoryitems", //Shared CSS class name of sub contents group
revealtype: "click", //Reveal content when user clicks or onmouseover the header? 
Valid value: "click" or "mouseover
mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds before 
 header expands onMouseover
collapseprev: true, //Collapse previous content (so only one open at any time)? 
 true/false 
defaultexpanded: [], //index of content(s) open by default [index1, index2, etc]. [] 
 denotes no content
onemustopen: false, //Specify whether at least one header should be open always (so 
 never all headers closed)
animatedefault: false, //Should contents open by default be animated into view?
persiststate: true, //persist state of opened contents within browser session?
toggleclass: ["opensubheader", "closedsubheader"], //Two CSS classes to be applied 
 to the header when it's collapsed

and expanded, respectively ["class1", "class2"]
togglehtml: ["none", "", ""], //Additional HTML added to the header when it's 
 collapsed and expanded, respectively

["position", "html1", "html2"] (see docs)
animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200),
 or keywords "fast", "normal", or "slow"
oninit: function (headers, expandedindices) { //custom code to run when headers
  have initalized
//do nothing
},
onopenclose: function (header, index, state, isuseractivated) { //custom code
to run whenever a header is opened or closed
//do nothing
}
});

</script>

<asp:ContentPlaceHolder ID="head" runat="server">

</asp:ContentPlaceHolder>

<style type="text/css">
.style1
{
width: 140px;
}
</style>

</head> 
```

//身体

```
<body style="min-width:930px;">
<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tr>
<td style="vertical-align:top;" class="style1">
<div class="arrowlistmenu">

<h3 class="menuheader expandable">asd</h3>
<ul class="categoryitems">
<li><a href="/GeneralData/Data.aspx">asd</a></li>
</ul>

<h3 class="menuheader expandable">sd</h3>

<ul class="categoryitems">

<li><a href="/Instruct/page2.aspx">sdf</a></li>
<li><a href="/Instruct/page3.aspx">sdf</a></li>
<li><a href="#">sdf</a></li>
<li><a href="#">sdf</a></li>
<li><a href="#">sdf</a></li>
<li><a href="#">sdf</a></li>

</ul>

<h3 class="menuheader expandable">sdf</h3>
<ul class="categoryitems">
<li><a href="#">sdf</a></li> 
<li><a href="#">asd</a></li>
<li><a href="#">asd</a></li>
</ul>
<h3 class="menuheader expandable">asd</h3>
</div>

</td></tr></table>
</body>
</html> 
```

启动页面时，他给了我错误

```
Server Error in '/' Application.

An entry with the same key already exists.

Description: An unhandled exception occurred during the execution of the current web 
request. Please review the stack trace for more information about the error and where
it originated in the code. 

Exception Details: System.ArgumentException: An entry with the same key already exists.

Source Error: 

An unhandled exception was generated during the execution of the current web request. 
```

可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

```
Stack Trace: 

[ArgumentException: An entry with the same key already exists.]
   System.Collections.Specialized.ListDictionary.Add(Object key, Object value)
                                                                           +6236205
   System.Web.UI.ClientScriptManager.RegisterExpandoAttribute(String controlId, 
  String attributeName, String attributeValue,
 Boolean encode) +272
   System.Web.UI.ScriptRegistrationManager.RegisterExpandoAttribute(Control control, 
 String controlId, String attributeName, 
String attributeValue, Boolean encode) +115
   System.Web.UI.ScriptManager.RegisterExpandoAttribute(Control control, S
   tring controlId, String attributeName,
 String attributeValue, Boolean encode) +44 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T12:13:14.600

您很幸运在代码的第一行中出现错误原因。因为我只是被它吓坏了。将您的验证器更改`ClientIDMode`为`Predictable`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T13:58:18.683

2 小时后，我找到了以下异常的解决方案。

```
[ArgumentException: An entry with the same key already exists.]
   System.Collections.Specialized.ListDictionary.Add(Object key, Object value) +6888908
   System.Web.UI.ClientScriptManager.RegisterExpandoAttribute(String controlId, String attributeName, String attributeValue, Boolean encode) +340
   System.Web.UI.ScriptRegistrationManager.RegisterExpandoAttribute(Control control, String controlId, String attributeName, String attributeValue, Boolean encode) +113 
```

在我的情况下，这是因为对于 DropDownList Items 字典中的多个项目，**selected是 true**

```
 if (DropDown.Items.FindByText(value) != null) {
      //important note:  
      //below line will reset selected true if previously this field is set and  caused the exception and must be removed
      //DropDown.SelectedIndex = -1;
      DropDown.Items.FindByText(value).Selected = true;
   } 
```

# c++ - JSONNODE 未在此范围内声明

> ID：12037183
> 
> 赞同：1
> 
> 时间：2012-08-20T11:55:26.393
> 
> 标签：c++, libjson

我刚刚从 sourceforge.net 安装了 libjson。我尝试执行一个简单的程序但我得到了这个错误

```
‘JSONNode’ was not declared in this scope 
```

这是代码

```
#include<iostream>

#include <libjson.h>

int main()
{
    JSONNode n(JSON_NODE);
    JSONNode c(JSON_ARRAY);
    c.push_back(JSONNode("", 16));
    c.push_back(JSONNode("", 43));
    c.push_back(JSONNode("", 69));

    n.push_back(c);

    std::string jc = n.write_formatted();
    std::cout<<jc<<std::endl;

    return 0;
} 
```

MI缺少一些头文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:50:49.517

您需要禁用`#define JSON_LIBRARY`in `JSONOptions.h`，否则 libjson 将不包含 C++ 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:04:18.990

我看到 libjson 的东西是在`json`命名空间中定义的。请尝试`json::`在前面添加`JSONNode`解决问题？像这样：

```
json::JSONNode n(JSON_NODE);
json::JSONNode c(JSON_ARRAY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T18:28:26.683

您必须确保首先构建 libJson 库。

我遵循了以下线程，在遇到与您相同的问题后，它对我很有用：

运行 Make 文件： `http://stackoverflow.com/a/11865407/1399434e`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T15:16:31.887

禁用 JSONOptions.h 中的 JSON_LIBRARY

```
//#define JSON_LIBRARY 
```

然后再次编译如下

```
#include "libjson.h"
using namespace libjson;

int main(int argc, char* argv[])
{

    JSONNode* pNode = NULL;
    return 0;
} 
```

# eclipse - 创建可折叠代码块eclipse

> ID：12037188
> 
> 赞同：15
> 
> 时间：2012-08-20T11:55:43.040
> 
> 标签：eclipse

为了让我的代码在 eclipse 上干净整洁，我想知道是否可以将代码包围在 Any 标记中以能够作为函数收回。我使用 eclipse "Juno" 进行 android 开发。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T13:26:51.123

是的，您可以使用插件“ [**Coffee Bytes Code Folding**](http://market.eclipsesource.com/yoxos/node/com.cb.eclipse.folding.feature.group) ”。
使用 Indigo 或 Juno，您可能需要在“[此页面](http://kosiara87.blogspot.in/2011/12/how-to-install-coffee-bytes-plugin-in.html)”（或谷歌“ `com.cb.eclipse.folding_1.0.7.jar`”获取 Juno 兼容版本）获取该插件的最新版本。

您将在 SO 问题中找到所有插图：“[如何使用 Coffee-Bytes 代码折叠](https://stackoverflow.com/questions/6940199/how-to-use-coffee-bytes-code-folding)”：

![自定义折叠区域](../Images/e633b52983765718c342fdd5f5ef0e6f.png)

# c# - 无法在 Visual Studio 2010 Professional 中查看 aspx 页面

> ID：12037189
> 
> 赞同：1
> 
> 时间：2012-08-20T11:55:45.693
> 
> 标签：c#, asp.net, visual-studio-2010

我最近重新安装了 VS2010 Pro，因为我遇到了一些问题。从那以后我遇到了一个问题。一切似乎都很好，但是我无法在 VS 中查看任何 aspx 页面。我在下面发布了一个示例。

[![没有aspx](../Images/3516c04373d34c507e739d585c14e412.png)](https://i.stack.imgur.com/MXexY.png)

这发生在所有 aspx 页面上，但是页面后面的代码很好，我也可以毫无问题地构建、调试、发布等。任何想法将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:27:47.923

对我来说，解决方案似乎是重新安装我的 Visual Studio 版本。

# ruby-on-rails - rails“没有路线匹配”，即使它在路线中

> ID：12037192
> 
> 赞同：0
> 
> 时间：2012-08-20T11:55:52.463
> 
> 标签：ruby-on-rails, forms, routes

我有这个表格：

```
<% @softwares.each do |l| %>
<tr>
    <td><%= l.vendor %></td>
    <td><%= l.title %></td>
    <td><%= l.edition %></td>
    <td><%= l.amount %></td>

    <td><%= link_to 'view', software_path %></td>

<% end %> 
```

当我单击查看链接时，我收到此错误：
`No route matches {:action=>"show", :controller=>"softwares"}`

但是，当我运行 rake 路线时，它确实出现了：

`software GET /softwares/:id(.:format) softwares#show`

如果我手动将它输入浏览器，它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:58:32.293

在路径中传递软件对象，因为它是成员路径 `<%= link_to 'view', software_path(l) %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:03:26.813

对于 RESTful 资源，您可以只传递资源：

```
link_to 'view', l
# => <a href="/softwares/1">view</a> 
```

# c - 递归返回类型

> ID：12037195
> 
> 赞同：-1
> 
> 时间：2012-08-20T11:56:04.757
> 
> 标签：c

我对以下函数的行为感到困惑。以下是我坚持的一些程序：

情况1：

```
void f()
{
    printf("wow\t");
}

int main()
{
    f();
    return 0;
} 
```

它给出了预期的输出`wow`。

案例二：

```
void f()
{
    printf("wow\t");
}

int main()
{
    f(f());
    return 0;
} 
```

它给出了`error: invalid use of void expression`显而易见的。

案例3：

```
int f()
{
    printf("wow\t");
}

int main()
{
    f(f());
    return 0;
} 
```

为什么它给出输出`wow wow`？

`f()`有返回类型`int`。但在`main`它不存储在任何变量中。也`f()`没有采用任何参数，但在案例 3 中，它将采用`f()`.

相同的代码在 C++ 中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:59:14.980

代码从内部函数`f(f());`调用`f`调用，然后`f`从外部函数调用调用。你不存储返回值`f`不会做任何事情。编译器不能仅仅因为你忽略它的返回值就避免调用一个函数，除非它知道这个函数没有后果，而且这个函数确实有后果。

忽略函数的返回值一点也不稀奇。例如，您可能有一个“删除条目”函数，它返回它删除的条目数。您可能会在不关心它返回多少条目的上下文中调用该函数，因此您忽略返回值。该函数仍然必须运行，否则条目不会被删除。哎呀，您忽略了`printf`. 如果它没有被调用，你会感到非常惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:02:38.290

在 C 中，您必须明确声明函数不接收任何参数的事实。例如：

```
int f(void)
{
    printf("wow\t");
}

int main()
{
    f(f());
    return 0;
} 
```

给出：

```
error: too many arguments to function ‘f’ 
```

在 C++ 中它是不同的。`int f() {}`相当于`int f(void) {}`。

# android - Android 兼容性构 建问题

> ID：12037197
> 
> 赞同：0
> 
> 时间：2012-08-20T11:56:09.333
> 
> 标签：android, android-compatibility

**背景**

我正在开发一个需要在 7 到 16 的 API 级别上工作的 android 应用程序。

**问题**

每当我去构建我的项目时，这都是我必须经历的过程。

1.  清洁项目
2.  运行项目
3.  “项目中的错误”>单击确定>再次运行项目
4.  在任何 API 上运行良好

我认为问题是由于我包含了 API < 3.0 无法使用的代码（例如 ActionBar），但如果是这种情况，我正在检查它并运行其他东西。

**问题**

有谁知道解决这个问题的方法，因为考虑到每次我想运行它时都必须这样做，这非常耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:58:20.180

我想您正在使用 Eclipse 进行开发。您可以如下注释有问题的方法：

```
private final int VERSION = android.os.Build.VERSION.SDK_INT;
private File myDir;
// some stuff here
@SuppressLint("NewApi")
private void doSomething() {
    if (VERSION < 8) {
        // Uses a method available since API 1
        myDir = Environment.getExternalStorageDirectory();
     else {
        // Uses a method available since API 8
        myDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
    }
    // Do more stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:08:46.420

您可以在清单中添加：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16" /> 
```

然后任何介于 7 和 16 版本之间的 API 都将编译，因为您的目标是 16。

然后，如果您的设备为 7，则任何 API > 7 都将在您的设备上失败，但您已经说过您正在代码中对此采取措施。

# c# - 如何在asp.net中访问全局枚举到Web用户控件？

> ID：12037202
> 
> 赞同：0
> 
> 时间：2012-08-20T11:56:37.503
> 
> 标签：c#, asp.net, enums

我在我的网站中创建了全局枚举，但为什么我无法在网络用户控制中访问。

我创建了一个静态类，在其中定义了我的所有默认值，所有变量都可以通过页面访问，但不能在 Web 用户控制中。

# javascript - 如何使用 RaphaelJS 将文本元素限制在正方形内？

> ID：12037203
> 
> 赞同：0
> 
> 时间：2012-08-20T11:56:39.157
> 
> 标签：javascript, drawing, raphael

我正在尝试在正方形内使用自定义字体约束文本元素。我很难让约束发生。

对于 move 函数，我的代码如下所示：

```
if (this.attr("y") > offsetY || this.attr("x") > offsetX) { // keep dragging & storing original x and y
    this.attr({
        x : this.ox + dx,
        y : this.oy + dy
    });
} else {
    nowX = Math.min(offsetX, this.ox + dx);
    nowY = Math.min(offsetY, this.oy + dy);
    nowX = Math.max(0, nowX);
    nowY = Math.max(0, nowY);
    this.attr({
        x : nowX,
        y : nowY
    });
} 
```

约束永远不会发生。但是，如果我在这段代码中使用两个方块，它就可以工作。我在这里俯瞰什么？

感谢您的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:44:03.293

如果您在调用时使用了默认的文本锚值 'middle' `paper.text()`，则 x 和 y 属性将返回文本跨度中心的坐标——而不是它的左上角，就像使用 rect 一样。

您应该通过[element.getBBox()](http://raphaeljs.com/reference.html#Element.getBBox)获取坐标，而不是使用`x`and属性，然后从结果对象中使用and 。这应该使您现有的逻辑能够畅通无阻地工作。`y``x``y`

# javascript - 输入字段中的可持续文本

> ID：12037210
> 
> 赞同：3
> 
> 时间：2012-08-20T11:57:00.903
> 
> 标签：javascript, jquery, html, input

我有输入文本字段，里面有一个占位符。当我单击输入时，占位符消失。我正在为这个占位符使用 jQuery Watermark 插件。我想改变这种行为。当用户在此字段中键入时，我需要该占位符留在输入中。

很好的例子是电子邮件字段。在一个步骤中，用户给了我域名，例如“foo.com”。电子邮件的占位符看起来像“@foo.com”。当用户单击此字段时，我希望此占位符充当该输入的值，但不可更改。我的电子邮件输入字段的默认值为“@foo.com”，当用户在“bar”中键入它的“bar@foo.com”时。

我希望你明白我想要做什么:) 我怎样才能实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:20:11.187

您可以为此设置一个绝对定位的标签。此外，如果您想隐藏标签，您可以处理输入上的 onclick 和 onblur 事件。试试这个：

```
<html>
    <body>
        <form>
            <div style=" position:relative;z-index:1;">
                <label style="position:absolute; line-height:28px;text-align:left;left:150px;top:4px;overflow:hidden; height:28px;width:200px; z-index:2;color:#cacaca" for="email">@foo.com</label>
                <input type="text" value="" name="email" style="border:1px solid #939393; line-height:28px;text-align:left;font-size:14px;padding-left:5px;color:#000;z-index:1;width:300px;height:30px" />
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:30:13.443

您可以使用此功能。我在我的代码中使用过一次（在stackoverflow的帮助下）：

html:

```
<input type="text" id="t1" placeholder="@foo.com">​ 
```

javascript:

```
function setRange(input, textStart, textEnd) {
    if (input.setSelectionRange) {
        input.focus();
        input.setSelectionRange(textStart, textEnd);
    }
else if (input.createTextRange) {
        var range = input.createTextRange();
        range.collapse(true);
        range.moveEnd('character', textEnd);
        range.moveStart('character', textStart);
        range.select();
    }
}
function setCursorPos (input, pos) {
    setRange(input, pos, pos);
}

$("#t1").click(function() {
    $(this).val("@foo.com");
    setCursorPos(document.getElementById("email"), 0);
}); 
```

# android - 如何在android中创建圆角矩形ListView（ListActivity）？

> ID：12037212
> 
> 赞同：0
> 
> 时间：2012-08-20T11:57:24.153
> 
> 标签：android, listview, listactivity, rounded-corners, shape

目前我在android应用程序中工作，使用ListActivity创建ListView，我在ListView中为ListView中的圆角矩形提供三个项目和setBackground图像，然后运行应用程序每个角都有圆角矩形显示正常，但全屏显示圆角矩形，我想要圆角矩形直到第 3 项。如何解决这个问题？请帮我

提前致谢

我试过这个：

列表视图类：

```
public class Settings extends ListActivity
{
     private static String[] mListContent={"Item 1", "Item 2", "Item 3"};
     public void onCreate(Bundle savedInstanceState)
     {
            super.onCreate(savedInstanceState);

            // Set listview rounded rect
            getListView().setCacheColorHint(0);
            getListView().setBackgroundResource(R.drawable.custom_shape);

            setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, mListContent));
            }
} 
```

Custom_shape.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke android:width="4dp" android:color="#FFFFFF" />
    <padding android:left="14dp" android:top="14dp"
            android:right="14dp" android:bottom="14dp" />
    <corners android:radius="8dp" />
</shape> 
```

下面我附上图片供您参考：

我想显示项目 3 的边框线（ListView）结束。//它在 iPhone 中类似分组的 tableview

![在此处输入图像描述](../Images/b55100a714228bd53bcb7d7fe2bce960.png)

我想这样展示：

![在此处输入图像描述](../Images/2cef9da740fa77a5392684acd6d817f7.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T12:17:22.013

ListView 高度在 XML 中作为包装内容传递，而不是填充父项...

# android - 无法从 jni 运行 dumpsys.cpp

> ID：12037214
> 
> 赞同：1
> 
> 时间：2012-08-20T11:57:37.847
> 
> 标签：android, c, linux, android-ndk, java-native-interface

我试图使用 JNI 接口在 android ndk 中运行 dumpsys.cpp 我从以下链接 [http://source-android.frandroid.com/frameworks/base/cmds/dumpsys/dumpsys.cpp](http://source-android.frandroid.com/frameworks/base/cmds/dumpsys/dumpsys.cpp)获得了 dumpsys 的源代码。我运行代码时出现以下错误：-

```
error: utils/Log.h: No such file or directory
error: binder/Parcel.h: No such file or directory
error: binder/ProcessState.h: No such file or directory
error: binder/IServiceManager.h: No such file or directory
error: utils/TextOutput.h: No such file or directory
error: utils/Vector.h: No such file or directory 
```

我应该如何删除它们？

# sitemap - 如何在 Wicket 中生成 Sitemap.xml？

> ID：12037216
> 
> 赞同：2
> 
> 时间：2012-08-20T11:57:48.547
> 
> 标签：sitemap, wicket-1.5

我正在努力在 Wicket 1.5 应用程序中为 SEO 目的生成动态站点地图。我查看了[这个示例](https://cwiki.apache.org/WICKET/seo-search-engine-optimization.html#SEO-SearchEngineOptimization-CreatingaDynamicSitemap)，但无法理解它们的确切含义。

我看到我需要创建一个 xml 页面并挂载它，但随后它谈到了生成 url 列表。我该如何做这部分？Wicket 中是否有获取已安装页面列表的功能？根据该链接，在 Wicket 1.5 中执行此操作“非常容易”，所以我一定遗漏了一些明显的东西。

任何提示或指示都非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:23:58.770

我在 2010 年就是这样做的。为此有一个 wicketstuff-minis 项目。如果您从档案中挖掘它，它可能仍然有效。

[http://mvnrepository.com/artifact/org.wicketstuff/sitemap-xml](http://mvnrepository.com/artifact/org.wicketstuff/sitemap-xml)

来源也必须在那里的某个地方..

这是为 wicket 1.4 构建的，但我猜它们的变化足以使其不再工作。

# iphone - 在给定类中访问 Xcode 中“方法概述”的快捷方式

> ID：12037219
> 
> 赞同：1
> 
> 时间：2012-08-20T11:57:56.080
> 
> 标签：iphone, objective-c, xcode

如何使用 Xcode 中的快捷方式访问以下菜单？

[http://i.minus.com/j8OluIv8xj22Z.png](http://i.minus.com/j8OluIv8xj22Z.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:00:32.923

打开 Xcode 的 Preferences > Key Bindings 并为“Standard Editor > Show Document Items”命令分配一个热键。

# wpf - 如何在 wpf 绑定中设置默认值？

> ID：12037222
> 
> 赞同：0
> 
> 时间：2012-08-20T11:58:09.793
> 
> 标签：wpf, data-binding, binding

我有一个绑定到属性（数据类型为 int 的 CustomerId）的文本框。这个文本框首先显示一个 0（零），但我想要一个没有输入的清晰文本框。

我还将其默认值设置为 null ，如下面的代码：

```
ValueProperty = DependencyProperty.Register(
            "Value",
            typeof(int?), typeof(ChooseCustomerControl),
            new FrameworkPropertyMetadata(null)); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:44:27.137

您需要将 CustomerId 的数据类型从 int 更改为 int?。

如果您不能这样做，请创建 [转换器](http://wpftutorial.net/ValueConverters.html)，它将 CustomerId (int) 转换为想要的值。

# ruby-on-rails-3 - 如何在 rails3 中运行这个自定义的复杂查询

> ID：12037225
> 
> 赞同：0
> 
> 时间：2012-08-20T11:58:20.880
> 
> 标签：ruby-on-rails-3, rails-postgresql

如何在 rake 任务中运行以下查询？

```
DELETE FROM crawled_categories WHERE id NOT IN (
   SELECT id FROM (
       SELECT DISTINCT(site_id, parent_category, breadcrumb), max(id) AS id
       FROM crawled_categories 
       WHERE map_id is null
       GROUP BY site_id, parent_category, breadcrumb
   ) AS tmp
) AND map_id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:15:13.367

我尝试了以下代码，它运行良好：

```
ActiveRecord::Base.connection.execute("DELETE FROM crawled_categories WHERE id NOT IN ( SELECT id FROM ( SELECT DISTINCT(site_id, parent_category, breadcrumb), max(id) AS id FROM crawled_categories WHERE map_id is null GROUP BY site_id, parent_category, breadcrumb ) AS tmp ) AND map_id IS NULL") 
```

# java - 崩溃发生在 Java 虚拟机之外的本地代码中

> ID：12037226
> 
> 赞同：3
> 
> 时间：2012-08-20T11:58:22.297
> 
> 标签：java, multithreading, jvm, native-code, jvm-crash

我正在使用 32 个虚拟处理器和 32GB 内存的 Sun 服务器上进行网络爬取。

我打开了 1460 个线程来为我完成这项工作。我设置的运行时参数是`-Xms2048`和`-Xmx2048`。我已经运行了两次代码，但它在不同的点崩溃了。

```
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> #  SIGSEGV (0xb) at pc=0xff390f38, pid=3053, tid=7640
> #
> # JRE version: 6.0_15-b03
> # Java VM: Java HotSpot(TM) Server VM (14.1-b02 mixed mode solaris-sparc )
> # Problematic frame:
> # C  [libc_psr.so.1+0xf38]  memset+0x78
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> # The crash happened outside the Java Virtual Machine in native code.
> # See problematic frame for where to report the bug.
> #
> 
```

编辑：我将线程数减少到 40 并在同一台服务器上运行它。在 RSS 的值超过 Swap 的值（两者都在 2150M 左右）时再次崩溃。换句话说，当内存超出限制时，它就崩溃了。然后我在我自己的带有 4G RAM 和双核处理器的 PC 上运行它。令我惊讶的是，到目前为止它一直做得很好。PC 上的内存使用量保持在 1.5G 左右，距离限制有点远。它一直如此稳定地运行，以至于 PC 上似乎有一种机制可以防止内存达到其极限。相比之下，它在 Sun 服务器上似乎失控了。

编辑：自从我升级到最新的 64 位 Java 以来，它还没有崩溃过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:29:48.763

您是否尝试将“M”附加到内存参数？（即-Xms2048M） 另外，我会尝试将ms 设置为较小的值（即1024M），以防VM 无法为堆保留足够的空间。

# ruby-on-rails - 带有 OpenID 的 Devsie 引发错误未初始化常量 Devise::Schema

> ID：12037233
> 
> 赞同：1
> 
> 时间：2012-08-20T11:58:54.987
> 
> 标签：ruby-on-rails, devise, openid

我使用 Devise 创建了一个新的 rails 应用程序（3.2.8）。一切设置正确，应用程序启动，我可以注册和登录。

然后我添加`devise_openid_authenticatable`了我理解的用于在设计中集成 OpenID 的 gem。我按照[https://github.com/nbudin/devise_openid_authenticable上的说明进行操作](https://github.com/nbudin/devise_openid_authenticatable)

但是当我想做 rake db:migrate 我得到以下错误：

```
rake aborted!
uninitialized constant Devise::Schema 
```

跑步时`rails s`我得到

```
/Users/me/.rvm/gems/ruby-1.9.3-p0/gems/devise_openid_authenticatable-1.0.0/lib/devise_openid_authenticatable/schema.rb:1:in `<top (required)>': uninitialized constant Devise::Schema (NameError)
from /Users/me/.rvm/gems/ruby-1.9.3-p0/gems/devise_openid_authenticatable-1.0.0/lib/devise_openid_authenticatable.rb:3:in `<top (required)>'
from /Users/me/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `require'
from /Users/me/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /Users/me/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.0.21/lib/bundler/runtime.rb:66:in `each' 
```

我的 Gemfile 如下所示（最后两行）：

```
gem 'devise'
gem 'devise_openid_authenticatable' 
```

用户模型如下：

```
class User < ActiveRecord::Base
    devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :confirmable, :timeoutable, :openid_authenticatable
    attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

如何解决错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:17:18.853

`devise_openid_authenticatable`gem 看起来好像没有经过维护和更新以与任何当前版本的 Devise 一起使用。

来自 gems gemspec：

```
gem.add_dependency "devise", "~> 1.3" 
```

这意味着它只能与 Devise 的 1.x 版本一起使用。相反，我认为使用维护得更好的更新的东西可能会更好。浏览 Devise Wiki 上的此页面，您可能会找到所需的内容。 [https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)

# php - 非对象上的 PHPExcel 错误函数 getNamespaces()

> ID：12037234
> 
> 赞同：0
> 
> 时间：2012-08-20T11:59:00.733
> 
> 标签：php, phpexcel

我正在尝试在 PHPExcel 库的帮助下解析 excel 文件，这是我用于解析表的函数

```
function readXLS($inputFileName) {
  require_once(LIB_PATH.'PHPExcel.php');

  $inputFileType = PHPExcel_IOFactory::identify($inputFileName);  
  $objReader = PHPExcel_IOFactory::createReader($inputFileType);  
  $objReader->setReadDataOnly(true);

  $objPHPExcel = $objReader->load($inputFileName);
  $objWorksheet = $objPHPExcel->setActiveSheetIndex(0);
  $highestRow = $objWorksheet->getHighestRow();
  $highestColumn = $objWorksheet->getHighestColumn();
  $highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

  $arr_data = array();
  for ($row = 1; $row <= $highestRow; ++$row) {  
    for ($col = 0; $col <= $highestColumnIndex; ++$col) {  
      $value=$objWorksheet->getCellByColumnAndRow($col, $row)->getValue();  
      $arr_data[$row-1][$col]=$value;
    }  
  }
  return $arr_data;
} 
```

当我解析`*.xlsx`格式时一切正常，但是当我上传解析`*.xls`格式时出现错误`Call to a member function getNamespaces() on a non-object in <b>Z:\home\mysyte\www\trunk\UI\lib\PHPExcel\Reader\Excel2003XML.php`

# android - 使用 PhoneGap 插件从 HTML5/JavaScript 调用原生 Android Java 代码（并实现异步回调）

> ID：12037239
> 
> 赞同：3
> 
> 时间：2012-08-20T11:59:16.220
> 
> 标签：android, web-services, cordova, native-code

我想使用 java 获取 web 服务数据并使用 java 脚本将其传递给 index.html 文件我有一个返回 xml 格式数据的 web 服务。我想使用电话间隙创建 android 应用程序。并使用此网络服务。

现在我想在 java 文件中创建一个从 web 服务获取数据并在 html 页面中返回的函数。和使用 javascript 的 java 函数调用。

有任何想法....

# c# - 将 ActionMailer.Mvc 从 C# 转换为 VB

> ID：12037240
> 
> 赞同：0
> 
> 时间：2012-08-20T11:59:16.703
> 
> 标签：c#, asp.net-mvc, vb.net, asp.net-mvc-3

原始文档存在于[此处](https://bitbucket.org/swaj/actionmailer.net/wiki/Home)。

我已经转换了控制器动作：

```
Imports ActionMailer.Net.Mvc

    Public Class EmailController
        Inherits MailerBase

        Public Function VerificationEmail(ByVal model As RegisterModel) As EmailResult

            [To].Add(model.Email)
            From = "me@my.org"
            Subject = "Thanks for registering with us!"
            Return Email("VerificationModel", model)

        End Function

    End Class 
```

并且，视图（`EmailVerification.html.vbhtml`）：

```
@modelType GemcoBlog.RegisterModel

@Code
    Layout = Nothing
End code

Welcome to My Cool Site, @Model.UserName

We need you to verify your email.  Click this nifty link to get verified!

@Html.ActionLink("Verify", "Account", New With {.code = Model.Email})

Thanks! 
```

**但是，如何将此 C# 代码转换为从我的 Register 方法调用函数到 VB？**

```
new MailController().VerificationEmail(newUser).Deliver(); 
```

我在互联网上没有找到任何描述如何在 VB 中执行此操作的内容，所以也许这篇文章会对那些寻找的人有所帮助。

**作为旁注：有人可以向我解释一下这种语法`[To].Add(model.Email)`吗？我以前没见过。谢谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:06:51.397

```
Dim controller = New MailController()
Dim email = controller.VerificationEmail(newUser)
email.Deliver() 
```

或者，如果您更喜欢一种衬里：

```
Call New MailController().VerificationEmail(newUser).Deliver() 
```

> 作为旁注：有人可以向我解释一下这个语法 [To].Add(model.Email) 吗？我以前没见过。谢谢。

`To`是VB中的保留字。将其括在方括号中可确保您不会与此保留关键字发生冲突。

C# 中的等价物是`@`关键字：

```
int @int = 123; 
```

# .net - 多次使用 WPF OpenFileDialog 时出错

> ID：12037241
> 
> 赞同：0
> 
> 时间：2012-08-20T11:59:19.950
> 
> 标签：.net, wpf, openfiledialog

在我的 wpf 应用程序中，我需要一个按钮，可以让我从本地系统中选择一个文件并上传它。
当我第一次单击按钮并上传时没有问题；从第二个开始，有这个弹出消息框显示

> 您无法使用此程序打开此位置。
> 请尝试换一个地点。打开文件对话框

我可以关闭该消息并选择我的文件。
但是为什么会出现这种情况呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:16:53.017

我将一个字符串传递给具有 lastopenenddfile 路径的初始目录属性。因此该目录正在尝试打开文件并因此显示上述消息。我截断了文件路径以获取文件夹路径并将其分配给初始目录。现在工作正常..

# objective-c - 在 Objective-C 中创建一个函数

> ID：12037245
> 
> 赞同：0
> 
> 时间：2012-08-20T11:59:32.350
> 
> 标签：objective-c, xcode4.2

我是 Objective-C 的新手，我正在尝试将标记添加到我的 Apple 应用程序中的 mapView 中。

在我的类地图中，我正在尝试添加一个添加标记的函数。

在 Map.h 我添加：

```
- (void)setMarkers:(MKMapView *)mv; 
```

在 Map.m 中：

```
- (void)setMarkers:(MKMapView *)mv
{

CLLocationCoordinate2D newCoord = { 38.989567, -1.856283};
MapPoint *mp = [[MapPoint alloc] initWithCoordinate:newCoord title:[NSString stringWithFormat:@"Azam Home"] subTitle:@"Home Sweet Home"];
[mv addAnnotation:mp];

} 
```

但是当我尝试调用这个函数时：

```
[setMarkers mv:map]; 
```

我有这个错误：

```
Map.m:278:6: Use of undeclared identifier 'setMarkers' 
```

我错过了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:01:02.887

你失踪了`self`：

```
[self setMarkers:mv]; 
```

# android - 如何获取从 CAMERA 捕获的裁剪图像

> ID：12037247
> 
> 赞同：2
> 
> 时间：2012-08-20T11:59:43.463
> 
> 标签：android, image-processing, pattern-matching, android-camera, android-capture

如何获取图像中显示的部分内的裁剪图像。

我希望我的应用程序捕获书页的图像，其中包含角落处的 4 个图像模式。我希望它首先匹配这些模式，然后删除这 4 个图像边界内不可用的所有部分。

![在此处输入图像描述](../Images/e9c6eae1e4819522517a2284ac6f1f60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:10:16.297

我建议您使用[OpenCV for Android](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)库。

看看这些 SO 讨论：

*   在图像上检测纸张： [OpenCV C++/Obj-C：检测一张纸/正方形检测](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)
*   检测徽标： [徽标识别 - 如何提高性能](https://stackoverflow.com/questions/9735715/logo-recognition-how-to-improve-performance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:26:35.723

做这个，

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
 intent.putExtra("crop", "true");
 startActivityForResult(intent, TAKE_PICTURE); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-02T17:07:33.063

本教程全部完成，玩具也可以下载源代码：http: [//mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

# java - 向所有安装了 FOO 应用程序并连接到互联网的计算机广播“计算机信息”

> ID：12037251
> 
> 赞同：1
> 
> 时间：2012-08-20T12:00:02.307
> 
> 标签：java, p2p, broadcast, service-discovery

有什么方法可以广播我的计算机名称/位置/IP，并且还可以通过连接到互联网的程序接收他们的计算机名称，而无需中央服务器在工作？[考虑一下这个例子。我可以在没有中央服务器的情况下使用吗？](http://computer.howstuffworks.com/napster2.htm)

![在此处输入图像描述](../Images/b7843429d94ab0c28ee1e7b5e1dbb83e.png)

可以有一个中央服务器来存储所有安装了应用程序并连接到互联网的计算机的名称，但是没有它我有什么办法吗？

*要连接到远程 PC，我之前使用过 RMI 并了解它的功能。*

# html - CSS 无法在 IE 中正确加载

> ID：12037253
> 
> 赞同：0
> 
> 时间：2012-08-20T12:00:06.353
> 
> 标签：html, css

我的网站在 Firefox 中看起来很棒，但似乎没有加载完整的样式表。IE 7 只是选择了一些样式来显示。任何帮助将非常感激！

[http://lifeazure.com/decor.php](http://lifeazure.com/decor.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:03:54.377

你的 CSS 有错误，第 306 行

```
margin:0 5px 0 5px
 padding: 2px; 
```

应该

```
margin:0 5px 0 5px;
 padding: 2px; 
```

这可能会阻止 IE 的大量 CSS 加载

# javascript - Javascript for...in 循环中未在最后一个属性上运行的对象

> ID：12037255
> 
> 赞同：1
> 
> 时间：2012-08-20T12:00:17.727
> 
> 标签：javascript, jquery, jquery-autocomplete, client-side-scripting

这是我在stackoverflow 中的第一篇文章。我正在尝试迭代一个对象（我的实现是一个关联数组），该对象又具有一些属性。现在我希望从中构造另一个数组，以便将其用作 jquery 自动完成小部件中的本地源以进行搜索操作。现在的问题是我根据可用的文档使用 for in 循环......但是输出总是比原始对象少一。根本不执行涉及最后一个元素的迭代。下面是我用作输入的示例对象。

```
 SubTeachPair = object{"5CS1":{SubAbbrev:"CA-L",SubCode:"5CS1",SubName:"Computer Architecture",TeacherId:"1",TeacherName:"Ayush Pandey",label:"Computer Architecture",value:"5CS1"},"5CS2":{SubAbbrev:"CA-P",SubCode:"5CS2",SubName:"Computer Engg",TeacherId:"10",TeacherName:"MAyush Pandey",label:"Computer Engg",value:"5CS2"}} 
```

它具有这种元素并且是动态生成的，因此属性名称是可变的。我写的循环结构是

```
 var SubSource = [];
                console.log(SubTeachPair);
                var count = 0;

                for(sub in SubTeachPair){
                    console.log(count);
                    SubSource[count] = {};
                    SubSource[count]['label']=SubTeachPair[sub]['label'];
                    SubSource[count]['value']=SubTeachPair[sub]['value'];    
                    count++;    
                } 
```

但是，给定输入的结果仅为：

```
object{{ label: "Computer Architecture", value: "5CS1"}} 
```

我在这里错过了什么吗？

编辑——产生输入对象的函数如下（由next按钮触发onclick）。

```
 $('#' + $(this).attr("id")).autocomplete({
                                           source : 'search',
                                           minLength : 1,
                                           change : function(event, ui) {
                                           if( typeof ui.item != 'undefined') {
                                           SubTeachPair[$(this).attr("id")] = {};
                                           //   console.log(ui.item);
                                           SubTeachPair[$(this).attr("id")]['value'] =  $(this).attr("id");
                                         SubTeachPair[$(this).attr("id")]['label'] = $('label[for="' + this.id + '"]').html();
                                           SubTeachPair[$(this).attr("id")]['SubCode'] = $(this).attr("id");
                                           SubTeachPair[$(this).attr("id")]['SubName'] =$('label[for="' + this.id + '"]').html();
                                           SubTeachPair[$(this).attr("id")]['SubAbbrev'] =$('label[for="' + this.id + '"]').attr('id');
                                           SubTeachPair[$(this).attr("id")]['TeacherId'] = ui.item.id;
                                            SubTeachPair[$(this).attr("id")]['TeacherName'] = ui.item.value;
                                        //  console.log(SubTeachPair);
                                            //window.SubTeachPair = SubTeachPair;

                                       }
                               }
                           }); 
```

我想我已经找到了错误的原因——作为输入的对象实际上是另一个使用 jquery autocomplete 的表单的输出。现在，当我在输入中输入内容然后单击建议时，建议会填充到文本输入中，但是如果我没有在输入文本之外单击并直接单击触发我的脚本的按钮，则会出现该错误。否则很好。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:08:25.810

在您的代码中，数组`SubSource`并`count`没有定义，您必须声明：

```
var SubSource = [];
var count = 0` 
```

前`for(sub in SubTeachPair) {...}`

见[http://jsfiddle.net/abu5C/](http://jsfiddle.net/abu5C/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:02:24.143

尝试这个：

```
SubSource[count] = {};

for(sub in SubTeachPair) {
    console.log(count);

    SubSource[count]['label']=SubTeachPair[sub]['label'];
    SubSource[count]['value']=SubTeachPair[sub]['value'];

    count++; 
} 
```

# c - 转换后将结构传递给pthread_create，未定义的值？

> ID：12037257
> 
> 赞同：0
> 
> 时间：2012-08-20T12:00:26.547
> 
> 标签：c, pointers, struct, pthreads

我试图将一个结构作为参数传递给 pthread_create 并且似乎得到了一些奇怪的结果。

该结构有两个成员，第一个是 int，第二个是函数指针：

```
typedef struct
{
  int num;
  void (*func)(int);
} foo_t; 
```

我试图在结构中使用的函数：

```
void myfunc(int mynum)
{
   printf("mynum: %d\n", mynum);
} 
```

这是我将传递给我的线程的结构的声明：

```
foo_t f;
f.num = 42;
f.func = &myfunc; 
```

对 pthread_create 的调用：

```
pthread_create(&mythread, NULL, mythreadfunc, &f); 
```

最后，我的线程函数：

```
void mythreadfunc(void *foo)
{
   foo_t f = *(foo_t *)foo;
   printf("num: %d\n", f.num); // Prints: num: 32776 (undefined?)
   (*f.func)(f.num);  // Segfaults (again, undefined?)
... 
```

似乎 mythreadfunc 中的强制转换似乎不起作用，我不知道为什么。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:03:03.220

您正在通过`foo_t f`引用传递您的。如果您`f`从`pthread_create`-calling 函数或其他地方更改您的，例如离开相应的范围将从`f`堆栈中删除/删除，那么您在线程中的引用（很可能）无效。至少你不应该再访问它了。

改为使用带有动态分配变量的指针。

*尽管我无法证明您提供的代码正在发生这种情况。*

**编辑：**

指针用于存储对象/变量的地址。`C/C++`你可以让它指向一个动态分配的内存段。寻找`malloc/`[`new`](http://www.cplusplus.com/doc/tutorial/dynamic/)这个。您可以使用指针执行所谓的操作`dereferencing`并访问对象/变量本身。

您可以传递每个值的指针，这意味着您不会传递对象/变量本身，而是传递 RAM 中对象/变量的地址（= 位置）。动态分配的变量/对象的内存管理是程序员的责任，所以当指针范围结束时你的对象不会被删除，只会删除存储地址的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:07:45.077

Papergay 的答案绝对是一种解决方案，但是如果您想避免动态分配，可以使用的另一种方法就是使用同步。我最喜欢的方法是在结构中放置一个初始值为零的信号量，让父级在信号量上等待，子级在完成从结构中读取值后发布信号量。

# php - 无法将外部 CSS 链接到 PHP

> ID：12037258
> 
> 赞同：0
> 
> 时间：2012-08-20T12:00:31.853
> 
> 标签：php

我一直面临将 CSS 文件链接到我的 PHP 代码的问题。

我正在使用**Netbean IDE 7.2**和**XAMPP 8.0**

我试图创建一个新的 HTML 文件并将其与新的 CSS 文件链接。

这没用。

如果我在 HTML 本身中键入脚本，效果很好。

我究竟做错了什么？

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Website Development Version 1.0</title>
        <link href="CSS/layout.css" type="css/text" rel="stylesheet"/>
        <link href="CSS/expandLayout.css" type="css/text" rel="stylesheet"/>
        <script src="Javascript/jquery-1.4.2.min.js" type="text/javascript"></script>
        <script>
            function prepareList() {
                $('#expList').find('li:has(ul)')
                .click( function(event) {
                    if (this == event.target) {
                        $(this).toggleClass('expanded');
                        $(this).children('ul').toggle('medium');
                    }
                    return false;
                })
                .addClass('collapsed')
                .children('ul').hide();
            };

            $(document).ready( function() {
                prepareList()
            });
        </script>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <!-- Input Content -->
                <h1>This is Header</h1>
            </div>
            <div id="menuList">
                Menu 
            </div>
            <div id="innerContainer">
                <div id="leftColumn">
                    <!-- Input Content -->
                    <ul id="expList">
                        <li>Home</li>
                        <li>Product
                            <ul>
                                <li>List 1</li>
                                <li>List 2</li>
                                <li>List 3</li>
                            </ul>
                        </li>
                        <li>Register</li>
                        <li>About Us</li>
                    </ul>
                </div>
                <div id="centerColumn">
                    <!-- Input Content -->
                    This is Main Content
                </div>
                <div id="rightColumn">
                    <!-- Input Content -->
                    This is Right Content
                </div>  
            </div>
            <div id="footer">
                <!-- Input Content -->
                <h3>This is Footer</h3>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:03:13.020

CSS 的媒体类型`text/css`不是`css/text`.

浏览器倾向于忽略`<link>`s 对他们不理解的媒体类型的东西。

# c# - 委托从引用的 C++ DLL 触发 C# 函数

> ID：12037260
> 
> 赞同：2
> 
> 时间：2012-08-20T12:00:38.540
> 
> 标签：c#, c++, visual-c++, dll, pinvoke

我有一个工作的非托管 C++ DLL，它使用 p/invoke 附加到我的 C# 代码

```
 [DllImport("p2p.dll", EntryPoint = "Start")]
    public static extern void Start();

    [STAThread]
    static void Main()
    {
        Thread th= new Thread(Start);
         th.Start();
.... 
```

这样我可以从我的 C++ 代码中检索信息，但是如果我的 C++ 代码需要触发一个 C# 函数，那么我该如何以一种聪明的方式来完成它，而不是把所有请求放在一个队列中并在一个线程中从 C# 中检查它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:11:01.200

您可以使用托管 C++，也可以通过将一组函数指针（托管端的委托）传递给所有相关入口点，从 C# 初始化您的 C++ 库。

在程序开始时调用初始化程序：

```
[DllImport("p2p.dll")]
public static extern void Initialize(Action triggerManagedAction);

Initialize(() => {Console.WriteLine("called from C++");}); 
```

在该函数的 C++ 实现中，请记住函数指针。

**在使用此技术之前，还请阅读 Hans Passant 和 Google 的评论。**我在这里很容易引入错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:22:32.680

您可以通过创建托管 C++ 类来完成此操作，该类充当 C++ 和 .Net 事件处理程序之间的代理。这是它的外观：

*   假设您通过发布一个 ICEventHandler 接口为 C++ 类注册通知，该接口的 notify() 方法将被调用。
*   在托管 C++ 中，创建一个派生自 ICEventHandler 的类，该类具有一个委托，例如 Notify()。在继承的 ICEvenhHandler.notifty() 调用通知委托。
*   拥有一个 .net Nofity 方法，构建代理类的实例，并将其传递给 C++ 事件源类

这样，C++ 事件将触发您的 .Net Notify 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:10:51.633

其中一种方法是使用 /clr 标志编译 C++ 代码。[在这个 SO 线程](https://stackoverflow.com/questions/778590/calling-c-sharp-code-from-c)中可以找到几个不同的例子。

# android - PhoneGap / Android 中的屏幕方向

> ID：12037262
> 
> 赞同：1
> 
> 时间：2012-08-20T12:00:49.480
> 
> 标签：android, cordova, orientation

我目前正在PhoneGap 中开发一个小演示来测试一些功能。我想使用[Github 提供的 PhoneGap-OrientationLock 插件，](https://github.com/cogitor/PhoneGap-OrientationLock "PhoneGap-OrientationLock")以便能够从 JavaScript 动态更改我的屏幕方向，我已经更新了插件以在 Cordova 中使用它。

我现在的问题是，一旦我想更改屏幕方向，它就会崩溃。即使我`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`从我的 onCreate 方法中尝试了一些简单的操作（在技术上不使用 PhoneGap），我的应用程序也会使用以下调试日志退出到启动器：

```
08-20 08:57:17.083: D/DroidGap(21383): DroidGap.onCreate()
08-20 08:57:17.193: D/CordovaWebView(21383): Origin to allow: http://127.0.0.1*
08-20 08:57:17.193: I/CordovaLog(21383): Found log level DEBUG
08-20 08:57:17.193: I/CordovaLog(21383): Changing log level to DEBUG(3)
08-20 08:57:17.193: I/CordovaLog(21383): Found preference for fullscreen=true
08-20 08:57:17.193: D/CordovaLog(21383): Found preference for fullscreen=true
08-20 08:57:17.193: I/CordovaLog(21383): Found preference for useBrowserHistory=false
08-20 08:57:17.193: D/CordovaLog(21383): Found preference for useBrowserHistory=false
08-20 08:57:17.223: D/DroidGap(21383): DroidGap.init()
08-20 08:57:17.223: D/CordovaWebView(21383): >>> loadUrl(file:///android_asset/www/index.html)
08-20 08:57:17.223: D/PluginManager(21383): init()
08-20 08:57:17.233: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.243: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.243: D/DroidGap(21383): onDestroy()
08-20 08:57:17.243: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.243: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.263: D/DroidGap(21383): DroidGap.onCreate()
08-20 08:57:17.263: D/CordovaWebView(21383): Origin to allow: http://127.0.0.1*
08-20 08:57:17.263: I/CordovaLog(21383): Found log level DEBUG
08-20 08:57:17.263: I/CordovaLog(21383): Changing log level to DEBUG(3)
08-20 08:57:17.263: I/CordovaLog(21383): Found preference for fullscreen=true
08-20 08:57:17.263: D/CordovaLog(21383): Found preference for fullscreen=true
08-20 08:57:17.263: I/CordovaLog(21383): Found preference for useBrowserHistory=false
08-20 08:57:17.263: D/CordovaLog(21383): Found preference for useBrowserHistory=false
08-20 08:57:17.273: D/DroidGap(21383): DroidGap.init()
08-20 08:57:17.273: D/CordovaWebView(21383): >>> loadUrl(file:///android_asset/www/index.html)
08-20 08:57:17.273: D/PluginManager(21383): init()
08-20 08:57:17.293: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.313: D/DroidGap(21383): onMessage(onPageStarted,file:///android_asset/www/index.html)
08-20 08:57:17.313: D/SoftKeyboardDetect(21383): Ignore this event
08-20 08:57:17.373: D/SoftKeyboardDetect(21383): Ignore this event
08-20 08:57:17.483: D/Cordova(21383): onPageFinished(file:///android_asset/www/index.html)
08-20 08:57:17.483: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:17.483: D/DroidGap(21383): onMessage(onNativeReady,null)
08-20 08:57:17.483: D/DroidGap(21383): onMessage(onPageFinished,file:///android_asset/www/index.html)
08-20 08:57:17.483: D/DroidGap(21383): onMessage(onPageStarted,about:blank)
08-20 08:57:17.503: D/dalvikvm(21383): GC_CONCURRENT freed 326K, 9% free 7566K/8263K, paused 8ms+2ms, total 33ms
08-20 08:57:17.513: D/Cordova(21383): onPageFinished(about:blank)
08-20 08:57:17.513: D/DroidGap(21383): onMessage(onPageFinished,about:blank)
08-20 08:57:17.513: D/DroidGap(21383): onMessage(exit,null)
08-20 08:57:17.563: D/DroidGap(21383): onMessage(onPageStarted,file:///android_asset/www/index.html)
08-20 08:57:17.563: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:18.023: D/Cordova(21383): onPageFinished(file:///android_asset/www/index.html)
08-20 08:57:18.023: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:18.023: D/DroidGap(21383): onMessage(onNativeReady,null)
08-20 08:57:18.023: D/DroidGap(21383): onMessage(onPageFinished,file:///android_asset/www/index.html)
08-20 08:57:18.053: E/SQLiteLog(21383): (14) cannot open file at line 30174 of [00bb9c9ce4]
08-20 08:57:18.053: E/SQLiteLog(21383): (14) os_unix.c:30174: (2) open(/CachedGeoposition.db) - 
08-20 08:57:18.053: D/WebKit(21383): ERROR: 
08-20 08:57:18.053: D/WebKit(21383): SQLite database failed to load from /CachedGeoposition.db
08-20 08:57:18.053: D/WebKit(21383): Cause - unable to open database file
08-20 08:57:18.053: D/WebKit(21383): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)
08-20 08:57:18.143: D/DroidGap(21383): onMessage(networkconnection,wifi)
08-20 08:57:18.183: D/DroidGap(21383): onMessage(spinner,stop)
08-20 08:57:18.223: W/IInputConnectionWrapper(21383): showStatusIcon on inactive InputConnection
08-20 08:57:18.263: D/DroidGap(21383): onDestroy()
08-20 08:57:18.263: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:18.263: D/CordovaWebView(21383): >>> loadUrlNow()
08-20 08:57:18.283: D/DroidGap(21383): onMessage(onPageStarted,about:blank)
08-20 08:57:18.303: D/Cordova(21383): onPageFinished(about:blank)
08-20 08:57:18.303: D/DroidGap(21383): onMessage(onPageFinished,about:blank)
08-20 08:57:18.303: D/DroidGap(21383): onMessage(exit,null)
08-20 08:57:19.483: D/DroidGap(21383): onMessage(spinner,stop)
08-20 08:57:19.513: D/DroidGap(21383): onMessage(spinner,stop)
08-20 08:57:20.023: D/DroidGap(21383): onMessage(spinner,stop) 
```

所以它看起来就像我这样调用 setRequestedOrientation ：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    super.loadUrl("file:///android_asset/www/index.html");
} 
```

我的应用程序调用 onDestroy 并返回到启动器。我只是不了解Android概念吗？有人有线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:14:29.460

您应该 在出现`android:configChanges="orientation|keyboardHidden"`的第一个中添加 Android Manifest `<activity>`。我有同样的问题，它也让我的应用程序崩溃了。

# tridion - 如何确定多媒体组件是否发布到文件系统或数据库

> ID：12037265
> 
> 赞同：3
> 
> 时间：2012-08-20T12:01:02.850
> 
> 标签：tridion

我们如何确定多媒体组件是发布到文件系统还是数据库？

在什么情况下绿色地球会出现在任何已发布的组件上？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T12:49:00.380

如果组件的架构与支持动态发布的模板相关联，则绿色地球将出现在任何已发布的组件上。

您无法从 CMS 服务器确定您的动态组件演示文稿将存储在何处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T12:18:37.280

地球将显示在任何使用支持动态发布的组件模板发布的组件上（即，组件已作为动态组件演示发布）。

关于您的第二个问题，据我所知，CM 方面无法知道该项目是否已使用开箱即用的 SDL Tridion API 发布到代理数据库或文件系统。但是，正如@Alvin 所建议的那样，可以扩展现有的存储层，正如@Puf 的这篇很棒的文章所记录的那样[http://www.sdltridionworld.com/community/2011_extensions/binaryeventtracker.aspx](http://www.sdltridionworld.com/community/2011_extensions/binaryeventtracker.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T21:43:14.790

您可以通过分析相关发布目标上的内容交付配置来判断项目是否将发布到文件系统或数据库。如果您的日志记录配置得当，您将在那里看到部署的证据。

至于您是否可以检测到内容管理器上的区别：不，您不能，而且您不需要。唯一与它相关的人是那些了解 Web 应用程序内部工作原理的人，并且大概这些人能够发现内容交付配置的细节。对于网络编辑等内容工作者来说，知道该项目是否已成功发布就足够了。这是 Web 内容管理系统的主要好处之一：内容工作者可以处理网站的抽象，而不是其实际的内部运作。

如果页面或组件当前已发布到任何发布目标，则该页面或组件将使用“已发布”图标显示。一个就足够了，所以在实践中，依靠图标并不总是非常有用。要查看详细视图，请拉出该项目的使用位置对话框，然后选择“发布到”选项卡。这将告诉您该项目当前发布到哪些目标。

# c++ - 将一段 C++ 翻译成 Python

> ID：12037266
> 
> 赞同：0
> 
> 时间：2012-08-20T12:01:05.280
> 
> 标签：c++, python

我正在尝试将一些 C++ 转换为 Python。

C++ 可以在以下位置找到

[https://gist.github.com/1635288](https://gist.github.com/1635288)

```
from prime import prime
from fractions import gcd
from copy import copy
def phi(n, primes):
    if n < 2:
        return 0

    if n in primes:
        return n - 1

    if (n & 1) == 0:
        m = n >> 1
        #return ~(m & 1) ? phi(m, primes) << 1 : phi(m, primes)
        if ~(m & 1):
            return phi(m, primes) << 1
        else:
            return phi(m, primes)

    for i in primes:
        if i > n:
            break

        if n % i:
            continue

        m = copy(i)
        o = n / m
        d = gcd(m, o)
        #return d == 1 ? phi(m) * phi(o) : phi(m) * phi(o) * d / phi(d)
        if d == 1:
            return phi(m, primes) * phi(o, primes)
        else:
            return phi(m, primes) * phi(o, primes) * d / phi(d, primes)

primes = []
for i in range(3, 10000000, 2):
    if prime(i):
        primes.append(i)

for i in range(80, 90): # a test to see if I am getting correct results
    print phi(i, primes)
    # returns   64, 54, 80, 82, 48, 64, 84, 56, 80, 88
    # should be 32, 54, 40, 82, 24, 64, 42, 56, 40, 88 
```

基本上，该函数为奇数 n 返回正确的 phi 值，但为偶数 n 返回正确值的两倍。我怀疑我出错的地方是

```
m = copy(i) 
```

而 C++ 是

```
int m = *p; 
```

我查阅了维基百科，发现这将 m 定义为 p*指向*的值。这是问题吗？如果不是，那是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:11:52.003

我认为您应该使用`if not (m & 1)`, 而不是`if ~(m & 1)`，因为前者是检查奇数/偶数，而后者只有`false`在您将 -1 传递给它时才会返回。

波浪号 ( `~`) 是按位否定运算符。对于整数值，它认为`~x == -x-1`，在您的情况下根本不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:10:06.020

`int m = *p`实际上调用`operator*`of `p`，它是一个迭代器。它将返回迭代器当前所在的整数。对于给定的 C++ 代码，这只是语法糖化（稍微提高了一点性能），以避免`*p*`每次都编写。

# javascript - 如何找出在使用 javascript 的站点中调用了哪些函数

> ID：12037271
> 
> 赞同：1
> 
> 时间：2012-08-20T12:01:23.677
> 
> 标签：javascript, flash

我在我的网站上投放病毒式视频广告。我一直在尝试检测状态变化，以便我的系统可以相应地响应它。唯一的问题是我无权访问 swf 对象。广告代码是 javascript，我正在尝试查找正在进行的调用，以便我也可以尝试收听该事件。

欢迎任何帮助、想法、代码片段和链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:06:55.750

为此使用萤火虫：[https ://getfirebug.com/javascript](https://getfirebug.com/javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:07:20.500

如果 java 脚本方法是静态的，那么您可以操作它们，以便它们为您发送事件，否则您注定要失败：/ 如果不更改站点源代码，您将无能为力。

[Javascript 静态方法](http://justjs.org/js-oop/static-methods-in-javascript/)

# python - python文件副本提供更大的文件

> ID：12037273
> 
> 赞同：1
> 
> 时间：2012-08-20T12:01:39.097
> 
> 标签：python, python-2.7

我偶然发现了一些不是问题但相当令人费解的东西。我正在复制一个 xml 文件`myxml.xml`，`myxml_copy.xml`并且输出文件的文件大小更大。我不明白为什么会这样。这与文件编码有什么关系吗？

无论如何，我正在使用的代码（虽然它相当微不足道）：

```
from xml.dom.minidom import parseString
import sys

def parseXml():
    data = open(in_filename,'r').read()
    return data

try:
    in_filename = sys.argv[1]
    out_filename = sys.argv[2]

    out_file = open(out_filename,'w')
    out_file.write(parseXml())
    out_file.close()
except Exception,e:
    print "usage: python copy.py <in_file> <out_file>"
    print "Error",e 
```

* * *

注意：我**不是**在寻找复制文件的方法。稍后我将修改原始 xml 文件（剪切和粘贴它的不同部分）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T12:05:43.877

我认为问题在于您打开文件的模式必须是`rb`，而不仅仅是`r`，`wb`而不是`w`. （意味着 - 使用二进制模式）

当它是`rb`- 字符串 like`\r\n`将保持这种方式，但当模式是`r`- 它们将变为`\n`.

简而言之 - 只需更改线路：

```
data = open(in_filename,'r').read()
out_file = open(out_filename,'w') 
```

到

```
data = open(in_filename,'rb').read()
out_file = open(out_filename,'wb') 
```

那有帮助吗？

# android - JakeWhartons DiskLruCache 示例

> ID：12037279
> 
> 赞同：16
> 
> 时间：2012-08-20T12:02:00.617
> 
> 标签：android, caching

我想`DiskLruCache`在基于 API Level 7+ 的 Android 应用程序中使用来自 Jake Wharton 的。我会在我的 ListView 中使用它来缓存 SdCard 上下载的图像，但我不明白这个库的用法。任何人都可以向我展示如何从该缓存中获取位图或将位图放入缓存中的示例吗？（键 = 文件路径，值 = 位图）

我没有找到获取此快照对象值的方法。

感谢您的每一个帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T17:22:58.640

我在这里发布的示例中使用了 getBitmap() 。

这是您在不同标题下寻找的答案。您必须为某些代码创建一个 Utils，但这非常简单。

祝你好运！

[在 android 4.0 中使用 DiskLruCache 不提供 openCache 方法](https://stackoverflow.com/questions/10185898/using-disklrucache-in-android-4-0-does-not-provide-for-opencache-method)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T21:09:05.910

你也可以试试这个非常容易使用的 DiskLruCache 包装器：[https ://github.com/fhucho/simple-disk-cache](https://github.com/fhucho/simple-disk-cache)

# ruby-on-rails - Ruby on rails form_tag - 将模型参数发送到控制器

> ID：12037286
> 
> 赞同：2
> 
> 时间：2012-08-20T12:02:30.227
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3

控制器：`@micropost = Micropost.new(params[:micropost])`

但是这个 form_tag 发送给我`params[:content]`而不是`params[:micropost][:content]`

```
<%= form_tag( {:controller => :microposts, :action => :create}, :remote => true) do %>

    <%= text_area_tag :content, "", :size=> "20x2" %>
    ...
    ...
    ...
    <%= submit_tag "submit" %>
<% end %> 
```

服务器：

```
Processing by MicropostsController#create as JS
Parameters: {"utf8"=>"✓", "content"=>"sdfsdf", "commit"=>"submit"} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T12:06:17.280

您必须执行以下任一操作

```
<%= text_area_tag "micropost[content]", "", :size=> "20x2" %> 
```

或者

```
<%= form_for :micropost, :url=>{ :controller => :microposts, :action => :create}, :remote => true do |f| %>
    <%= f.text_area :content, "", :size=> "20x2" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:15:38.240

你必须避免混合`form_for`和`input_tag`.

当您声明 a`form_for @an_object do |form|`时，最佳做法是使用`form.text_area :content`when`:content`是您的`@an_object`.

在这种情况下，你也可以写：`text_area_tag "an_object[content]"`，但它有点脏。

# java - 字符串池在Java中为同一个字符串创建两个字符串对象

> ID：12037288
> 
> 赞同：7
> 
> 时间：2012-08-20T12:02:40.780
> 
> 标签：java, string

> **可能重复：**
> [Java 字符串和 StringPool](https://stackoverflow.com/questions/1903094/java-strings-and-stringpool)

我创建了两个字符串

```
String s1="MyString";
String s2=new String("MyString");
System.out.println(s1==s2); 
```

它打印`"false"`。我们知道字符串池不会为同一个字符串字面量创建两个对象。

那么这里发生了什么？它在字符串池中为相同的字符串文字“MyString”创建了两个不同的字符串对象（文字）。

我知道 `equals()`方法`true`在这里返回。

但是当我们使用`==`它时应该比较两个引用，它们应该引用字符串常量池中的同一个字符串对象。

为什么即使找到匹配项，它也没有引用字符串池中现有的字符串对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T12:04:43.223

第一个进入池，而第二个存储在堆中。

使用`s2 = s2.intern();`使其返回`true`。

当您`intern()`对字符串执行操作时，JVM 会确保字符串存在于池中。如果它尚不存在，则会在池中创建它。否则，返回已经存在的实例。我认为这解释了这种`==`行为。

```
String s1="MyString";
String s2=new String("MyString");
s2 = s2.intern();
System.out.println(s1==s2); 
```

作为参考，以下是`String.intern()`文档中的内容：

```
/**
 * Returns a canonical representation for the string object.
 * <p>
 * A pool of strings, initially empty, is maintained privately by the
 * class <code>String</code>.
 * <p>
 * When the intern method is invoked, if the pool already contains a
 * string equal to this <code>String</code> object as determined by
 * the {@link #equals(Object)} method, then the string from the pool is
 * returned. Otherwise, this <code>String</code> object is added to the
 * pool and a reference to this <code>String</code> object is returned.
 * <p>
 * It follows that for any two strings <code>s</code> and <code>t</code>,
 * <code>s.intern()&nbsp;==&nbsp;t.intern()</code> is <code>true</code>
 * if and only if <code>s.equals(t)</code> is <code>true</code>.
 * <p>
 * All literal strings and string-valued constant expressions are
 * interned. String literals are defined in section 3.10.5 of the
 * <cite>The Java&trade; Language Specification</cite>.
 *
 * @return  a string that has the same contents as this string, but is
 *          guaranteed to be from a pool of unique strings.
 */
public native String intern(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T12:04:21.413

在`String s2=new String("MyString");`您正在创建 的**新**实例的行中`String`，因此它肯定不会与`s1`.

如果你这样做：

```
System.out.println(s1=="MyString"); 
```

你会得到`true`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T12:04:30.533

`s2`不是字符串文字，它是从一个使用时构造的`new`- 但它不是文字，它是一个新对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-20T12:06:44.970

实际上，您正在创建两个不同的对象，一个在`Literal Pool`其中，一个在`Heap`

```
String s1 = "MyString"; //literal pool
String s2 = new String("MyString"); //in heap
s.o.p(s1==s2); // false, because two different instances
s.o.p(s1.equals(s2)); // true, compares the contents of the string. 
```

您需要`equals`改用`==`. 您可以通过调用将字符串对象从堆推送到字符串字面量池（或常量池）`String.intern()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T12:12:15.903

字符串池不是创建两个实例，而是创建第二个`String`实例的构造函数调用。来自[String(String original)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28java.lang.String%29)的 javadoc ：

> 初始化一个新创建的 String 对象，使其表示与参数相同的字符序列；换句话说，新创建的字符串是参数字符串的副本。除非需要原始的显式副本，否则不需要使用此构造函数，因为字符串是不可变的。

因此，由于您正在创建第二个实例`==`正确返回`false`（并且[equals(Object anObject)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)将返回`true`）。

# php - 用 preg_replace 替换文本中指定的双引号

> ID：12037289
> 
> 赞同：1
> 
> 时间：2012-08-20T12:02:48.637
> 
> 标签：php, preg-replace

我有一个序列化数组，我需要在所有地方替换双引号，如下所示：

```
...s:30:"test "is" & test";... 
```

到

```
...s:30:"test &quot;is&quot; & test";... 
```

文本中可能有很多引号，所以有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:16:27.073

尝试

```
preg_replace("/([^:])(\")([^;:])+/isU","$1&quot;$3",$arr); 
```

# debugging - Sublime Text 2 和 Xdebug

> ID：12037290
> 
> 赞同：2
> 
> 时间：2012-08-20T12:02:49.163
> 
> 标签：debugging, xdebug, sublimetext2

我想在 Sublime text 2 中使用 Xdebug，我已经安装了 Xdebug 包，接下来我该怎么做？我还安装了 Xdebug 作为 PHP 模块并且它工作正常，因为我可以通过我的 Komodo IDE 进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:46:26.257

你可以试试这个插件

[https://github.com/Kindari/SublimeXdebug](https://github.com/Kindari/SublimeXdebug)

虽然没有时间自己测试

如果你这样做，很高兴报告你的经历

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T17:55:25.783

您需要下载用于 sublime 文本的 xdebug 插件，这可以在 sublime 文本的包管理器的帮助下轻松完成。

之后 - `Shift+f8`：打开 XDebug 快速面板 - `f8`：连接调试器时打开 XDebug 控制快速面板 - `Ctrl+f8`：切换断点 - `Ctrl+Shift+f5`：运行到下一个断点 - `Ctrl+Shift+f6`：跳过 - `Ctrl+Shift+f7`：进入 - `Ctrl+Shift+f8`：退出

# delphi - 将 Delphi 程序作为 Citrix 无缝应用程序运行时无法单击托盘图标

> ID：12037296
> 
> 赞同：0
> 
> 时间：2012-08-20T12:03:30.103
> 
> 标签：delphi, citrix, trayicon, jedi

我使用 Jedi 库和组件 JvTrayIcon。它工作正常。但是当程序作为 Citrix 无缝应用程序运行时，程序不会收到任何点击事件。我进行了很多搜索，但只找到了有关任务栏图标和 Delphi (Borland) 的内容。我使用的是 Delphi 2010。有人遇到过这个问题吗？

——马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:01:58.613

我建议不要使用`jvcl`托盘图标，而是使用内置的[Delphi TTrayIcon](http://docwiki.embarcadero.com/CodeSamples/en/TTrayIcon_%28Delphi%29)。

# api - GoogleMaps API 2 仅显示 1 个内部边界线性环

> ID：12037297
> 
> 赞同：0
> 
> 时间：2012-08-20T12:03:34.393
> 
> 标签：api, google-maps, kml, polygon

我有一个包含外边界和内边界的多边形的 .kml 文件。innerBoundary 包含几个 LinearRing。问题：仅显示这些内部线性环之一。其余部分显示为一个大区域。Google 地球正确显示 .kml。GoogleMaps 中线性环的使用有什么限制吗？

这是 .kml 内容：

```
 <Polygon>
                <tessellate>1</tessellate>
                <outerBoundaryIs>
                    <LinearRing>
                        <coordinates>
                            10.34937999738613,52.2400931297914,0 10.35028732773128,52.24063618432182,0 10.35073553354421,52.24136351829702,0 10.35189189716032,52.24988592505383,0 10.34806463125521,52.25774091880214,0 10.35510374802005,52.28074093783913,0 10.36525382191662,52.28219923082257,0 10.36640549564265,52.28254037535547,0 10.36735354160269,52.28335789758861,0 10.3674397722104,52.28435970592113,0 10.36663728719742,52.28523389526337,0 10.36519590745014,52.28570827821546,0 10.36391691384635,52.28570033201087,0 10.3517341349819,52.28394646690337,0 10.35051915642555,52.28350569457596,0 10.34978095205181,52.28276776640299,0 10.17123901924045,52.10131997644089,0 10.17235989643872,52.09780217778586,0 10.18052901452957,52.08985594298313,0 10.18354578384427,52.08079068503564,0 10.18637882641355,52.07734629223897,0 10.18854432497935,52.07383155967357,0 10.18955028947235,52.06494065656974,0 10.18692876383424,52.05806110622614,0 10.18609867783059,52.05526279086962,0 10.18266423770521,52.05031096223487,0 10.17496071867752,52.04209487107367,0 10.17296907566858,52.03952206733667,0 10.17149497660236,52.03721517767351,0 10.13695419788886,52.03180553051456,0 10.11185012314924,52.03039116391627,0 10.09087149418022,52.02383748574601,0 10.06395598483749,52.01658923645414,0 10.04264230747145,52.0219364939592,0 10.04127315628253,52.02206100334206,0 9.993582127634355,52.01377847086962,0 9.992518659595907,52.01343413056657,0 9.973070143149375,52.00223345088979,0 9.972452351144421,52.00145279897677,0 9.971465164608219,51.99723807014183,0 9.971729956811503,51.99619487354173,0 9.982781094375952,51.98230833589174,0 9.98584776903783,51.97767128379079,0 9.992498747079996,51.96927237388741,0 9.991526824755352,51.96658410520506,0 9.989677102727526,51.963473925892,0 9.989207353193477,51.95269115440273,0 9.987723808375995,51.94759969646137,0 9.988071290637597,51.94503958871096,0 9.985579149150164,51.92797935885888,0 9.982634581314299,51.92083011116905,0 9.976545113382445,51.91358003449792,0 9.976425347410789,51.91292134538674,0 9.977126572252928,51.90983485754025,0 9.976952152650551,51.9091575821778,0 9.968953361244287,51.90072768735519,0 9.967557385574938,51.89664429777992,0 9.956519186614326,51.89479325501542,0 9.925661213733045,51.88279570915655,0 9.904634577687874,51.87420986179821,0 9.866042836600235,51.87400563077158,0 9.840786680672371,51.86905472152661,0 9.824203687168184,51.86773721822254,0 9.82298684359637,51.86725725891039,0 9.818088684867986,51.86401828583837,0 9.817515015321169,51.86346138336545,0 9.817307929193369,51.86270312498086,0 9.817553956020044,51.86206040887191,0 9.833358727419491,51.83999817325148,0 9.825588568423228,51.82959855222769,0 9.825387811138562,51.82897746283462,0 9.825495834546105,51.82845301933803,0 9.83486681570386,51.80801887912119,0 9.835632705182052,51.80746767536245,0 9.849580942970656,51.80080950671429,0 9.849600167988919,51.78724427692575,0 9.849876463783591,51.78647980124794,0 9.859745265032096,51.77703207261995,0 9.860798037692216,51.77663908436064,0 9.869772750268464,51.77511146307911,0 9.876676533814441,51.75968297256625,0 9.885545467658448,51.75040513318897,0 910.25515643681103,52.19397075429494,0 10.26135026990052,52.21132679490286,0 10.26963559455321,52.23086057113682,0 10.28947890832842,52.23815799379152,0 10.30985734418318,52.23906966294749,0 10.33729401671664,52.23517167118531,0 10.33877755468816,52.23549639900235,0 10.34937999738613,52.2400931297914,0 
                        </coordinates>
                    </LinearRing>
                </outerBoundaryIs>
                <innerBoundaryIs>
                    <LinearRing>
                        <coordinates>
                            10.27240821061489,52.23739156394223,0 10.2764943557397,52.23757524856065,0 10.27174445694194,52.23582825416547,0 10.27240821061489,52.23739156394223,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            10.18590478472491,52.15184617814074,0 10.18773321261526,52.15414275375152,0 10.21854744180636,52.15686432790342,0 10.23586289911141,52.1616131675119,0 10.22852565174004,52.13471903003445,0 10.19907268145813,52.12880881157728,0 10.19802803146131,52.12843785325227,0 10.19729603908177,52.12787129612924,0 10.18590478472491,52.15184617814074,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            10.23187520742232,52.13160858695364,0 10.23571535283616,52.1236867447657,0 10.22667121522805,52.11881744802448,0 10.22109857567036,52.11870933547221,0 10.21078352155337,52.11987259654627,0 10.20429452469993,52.11868770269162,0 10.20327487665741,52.11836177245213,0 10.19905835436177,52.11820259075669,0 10.190985760793,52.11586553708817,0 10.20182609048271,52.1255791563385,0 10.23187520742232,52.13160858695364,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            10.11354864384782,52.02691666973372,0 10.13151211051896,52.02789850744416,0 10.12545920096105,52.02250120742188,0 10.12115370440896,52.02306613120236,0 10.11409090517594,52.02619009189071,0 10.11284926571018,52.02631832329674,0 10.1110575406069,52.02613565645892,0 10.11354864384782,52.02691666973372,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            10.06289843475212,52.01297237953833,0 10.06368688114465,52.01285424011538,0 10.04400246521565,52.00488379991821,0 10.0351964323982,52.00571428303371,0 10.02573814759202,52.01564941803622,0 10.04137389856296,52.01837271512394,0 10.06289843475212,52.01297237953833,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            10.01882301837729,52.00560126467275,0 10.01791689653521,52.00539276971088,0 10.0050253272684,52.00079801438069,0 9.993875665300854,52.00228244268756,0 9.992134598533912,52.00211352869745,0 9.991166239402519,52.0016318487105,0 9.981427080384554,51.99415622397375,0 9.980941046720865,51.99361138063993,0 9.980759989325868,51.99296427637764,0 9.977359126595832,51.99727356538052,0 9.978038861895602,52.00019420582686,0 9.995846263268103,52.01043639671395,0 10.01994043853371,52.01463901100602,0 10.02777237895539,52.00641389910906,0 10.02626864279406,52.00648239580418,0 10.01882301837729,52.00560126467275,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.855380456437191,51.80169632950742,0 9.855119830069164,51.80243987247973,0 9.854386518894319,51.80305001931052,0 9.839933854203153,51.80995371744533,0 9.831373766045314,51.82878797008037,0 9.839179683205527,51.83922597534188,0 9.839404889927408,51.84029323311771,0 9.823643881550311,51.86242988789854,0 9.826509623369027,51.86432475842264,0 9.842197864125474,51.86555988217815,0 9.86704471096979,51.87044292628841,0 9.905536620020534,51.87061742660831,0 9.906519913254138,51.87072815252332,0 9.928781226163636,51.8797617050511,0 9.959037904887037,51.8915342064961,0 9.968869728798218,51.89293046686156,0 9.977083330120085,51.88675718741706,0 9.982655907636911,51.87820649720261,0 9.984272976389917,51.87138278467505,0 9.983651533434161,51.85353399457469,0 9.987777500110123,51.84763608560537,0 9.981469536990044,51.83274288936134,0 9.970816392727089,51.82703158241299,0 9.956599412741996,51.82907323582232,0 9.95556264347865,51.82910399548598,0 9.921872620678796,51.82237194577901,0 9.91192480770844,51.81694106337533,0 9.906156124476002,51.8115227738887,0 9.891257184341672,51.80867361904743,0 9.890034393182011,51.80820991397683,0 9.889319119927114,51.807439865585,0 9.885811775837659,51.79966617047114,0 9.855391699864116,51.79296879392769,0 9.855380456437191,51.80169632950742,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.86890429376237,51.56354064617938,0 9.869030672132483,51.56708858502184,0 9.868739939008581,51.56780390095923,0 9.864784413676471,51.57056411969143,0 9.863623326635489,51.57115133822988,0 9.859453426883198,51.57483294787452,0 9.857515482579942,51.57850038260351,0 9.854428559135329,51.58106661061861,0 9.854252288034655,51.58298572132568,0 9.854895336189246,51.58473451977891,0 9.862212841963995,51.58982159226014,0 9.869241814810382,51.59244554094607,0 9.871322234564712,51.59363072034962,0 9.881935043226713,51.59871541941715,0 9.882379358832242,51.59929699309934,0 9.88247756305641,51.59983109680827,0 9.881520913538093,51.60604789848786,0 9.889613646059484,51.60130694440697,0 9.890409141381278,51.60108256234895,0 9.895450994668202,51.60040068385107,0 9.903592019914388,51.58728320641903,0 9.905330178839382,51.58167615977795,0 9.907553200849135,51.57969162398687,0 9.906820366259776,51.57871151051718,0 9.903677729334847,51.57595210076617,0 9.89527402192472,51.57357473795214,0 9.890584872936334,51.57287177975935,0 9.881911674694724,51.57035699151297,0 9.876371843174104,51.5656654651476,0 9.869032158747784,51.56107768324107,0 9.86890429376237,51.56354064617938,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.858779201867323,51.489395786305,0 9.864489621937006,51.49867993563625,0 9.867794245523871,51.50340826526058,0 9.873584684187492,51.50883719711155,0 9.874053245703335,51.50967352043285,0 9.873661828012333,51.51074709140966,0 9.871227066916033,51.51264459741823,0 9.865199822266186,51.51417715492575,0 9.860955086576029,51.51640833776862,0 9.859908629441906,51.51873811374746,0 9.858468178311505,51.52096647345068,0 9.857525214583614,51.52373210290834,0 9.857597510748208,51.52418686355039,0 9.859765327686237,51.52715272740425,0 9.862434541871872,51.52767629364014,0 9.865614757326281,51.52852504614184,0 9.866547487939497,51.52789349828291,0 9.867468358529136,51.52755548402293,0 9.874764845725821,51.52679006687561,0 9.875325767065272,51.52638134145568,0 9.874926368670787,51.51820657572394,0 9.87474063387136,51.51651984620041,0 9.874312502754096,51.51545187268457,0 9.874780795333292,51.51327638972658,0 9.874456985777195,51.50921250576209,0 9.874581338154602,51.50603829350691,0 9.873712838338808,51.50455994136525,0 9.873450923529427,51.50306920869146,0 9.873930297392372,51.50181147980375,0 9.875310793678436,51.50076032424005,0 9.881753757897126,51.49869972684076,0 9.880761486319919,51.49754595564943,0 9.88072183859919,51.49684654347324,0 9.881192794667367,51.49523214943569,0 9.876509719819918,51.47837031946511,0 9.850701464793442,51.47583322928328,0 9.847810692240678,51.47478923336729,0 9.858779201867323,51.489395786305,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.700915364420565,51.39833473774542,0 9.704760900917059,51.40249573430605,0 9.717216014224352,51.40815082334107,0 9.726732623236611,51.4074530351857,0 9.722770449280167,51.40476707154078,0 9.720262729350688,51.40032684898068,0 9.710957776498663,51.39567950127049,0 9.709086330617494,51.39579774654011,0 9.707890707395132,51.39562598075706,0 9.705084177996804,51.39438960270704,0 9.70354585738661,51.39348123887451,0 9.700915364420565,51.39833473774542,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.698936529761641,51.39078538267555,0 9.677762021304144,51.3787958120418,0 9.677008755773104,51.38211581122835,0 9.682988923925883,51.39053067020733,0 9.693828612498157,51.39614277114144,0 9.695244796747653,51.39759564779137,0 9.698936529761641,51.39078538267555,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.522034625765256,51.22259437450317,0 9.522979205800814,51.22370380330301,0 9.52768334312384,51.22746450172978,0 9.53635605519032,51.21216414973087,0 9.525539137183376,51.18814702076687,0 9.525399410194455,51.18823971302789,0 9.527310124965183,51.19501998921333,0 9.528298630294144,51.2057504581035,0 9.53204252703279,51.20828155732802,0 9.532498594287013,51.20889328602176,0 9.53258073147564,51.20945485152588,0 9.532213525360746,51.21290572972887,0 9.531910321718831,51.21351406586848,0 9.522034625765256,51.22259437450317,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.526567184112189,51.21207137148459,0 9.526785168010123,51.20999667128658,0 9.523291568868128,51.20764874799909,0 9.522685878292876,51.20683386405892,0 9.521605113535721,51.195334894947,0 9.520211295082605,51.19043984922755,0 9.510266683134566,51.19385765700603,0 9.509463336935815,51.1968992424458,0 9.501356257893827,51.20709698936993,0 9.502119168542613,51.21478809659912,0 9.512304662533206,51.21897404368077,0 9.518206492157084,51.21973903684739,0 9.526567184112189,51.21207137148459,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.566525360512614,50.95188995013688,0 9.565479242591346,50.95449309176134,0 9.564802800709609,50.96003377443925,0 9.567534207392471,50.96226322842058,0 9.569698398842194,50.96456983453521,0 9.575536280129162,50.96928088347298,0 9.576055653035635,50.96995108744741,0 9.576277222243927,50.98296415481611,0 9.579364036175264,50.99277703000576,0 9.582533132190738,50.99138605706582,0 9.584352635304223,50.98904585067294,0 9.58581067352212,50.98790619940409,0 9.596392328911248,50.98394786818935,0 9.598667153104369,50.9821897573667,0 9.603232195633218,50.97945012627671,0 9.614428236192232,50.97561718875059,0 9.644160337633387,50.96635515847068,0 9.65028951030282,50.96171054751159,0 9.654237948243322,50.95754130345146,0 9.657791683275045,50.95480841775315,0 9.658940270915299,50.95208128446779,0 9.661390326838658,50.94728570709903,0 9.666505042348,50.94150469916001,0 9.65936931086183,50.93930120802193,0 9.640094527498892,50.93882642485261,0 9.635736252370434,50.93973613853624,0 9.610687192073122,50.94005363827884,0 9.59376008313339,50.94328774217297,0 9.582192203629981,50.94160152758662,0 9.577345136066558,50.9453347954319,0 9.574690150351453,50.94820249070614,0 9.566525360512614,50.95188995013688,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.691035727400973,50.94291153857649,0 9.689766324329076,50.94351462196823,0 9.688500981213201,50.94388586575064,0 9.683879870931593,50.94453884540298,0 9.679208397988028,50.94685105621964,0 9.677416907750475,50.94752801006935,0 9.674552236791667,50.95076797113131,0 9.67255599884742,50.9547103928351,0 9.671032377865732,50.9583296873603,0 9.670467991921349,50.95913579865325,0 9.666016990148759,50.96261560124843,0 9.661791337571643,50.96703634982091,0 9.655006719562683,50.97218451816755,0 9.651705894600344,50.97792265148249,0 9.693756857659995,50.96115383024377,0 9.692363174997794,50.94211981725465,0 9.691035727400973,50.94291153857649,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.705487811251786,50.950975535479,0 9.738264711641767,50.92250707407628,0 9.737719884122978,50.91949528507026,0 9.732327895099079,50.92016993985099,0 9.704071088296358,50.93243878579288,0 9.705487811251786,50.950975535479,0 
                        </coordinates>
                    </LinearRing>
                    <LinearRing>
                        <coordinates>
                            9.57297933239772,50.9401935460989,0 9.568953345788223,50.9399725935024,0 9.556408846647523,50.94562492276181,0 9.558357888420554,50.95029368366789,0 9.558936040330554,50.94908033246935,0 9.55982348096966,50.94831011477817,0 9.568323611436394,50.94450353082688,0 9.570261536638659,50.94230436055462,0 9.57297933239772,50.9401935460989,0 
                        </coordinates>
                    </LinearRing>
                </innerBoundaryIs>
            </Polygon> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:04:21.553

我检查了您的[kml](http://www.tennettso.de/site/binaries/content/assets/netzausbau/karten/neustekarte.kml)文件的完整性。有几个问题：

1.  `xsi`缺少前缀声明：

    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance

2.  添加后，[Galdos KML 验证器](http://www.kmlvalidator.com/home.htm)就能够处理该文件。

    这是它告诉我的：

    cvc-complex-type.2.4.a：发现以元素“LinearRing”开头的无效内容。'{"http://www.opengis.net/kml/2.2":BoundarySimpleExtensionGroup, "http://www.opengis.net/kml/2.2":BoundaryObjectExtensionGroup}' 之一是预期的。

    （我的桌面 XML 验证器发出了同样的投诉。）

问题是`<kml:innerBoundaryIs>`包含多个`<kml:LinearRing>`元素。

然后，检查[KML 参考](https://developers.google.com/kml/documentation/kmlreference#innerboundaryis)，`<kml:innerBoundaryIs>`我发现了这一点：

*包含一个 <LinearRing> 元素。一个多边形可以包含多个 <innerBoundaryIs> 元素，这些元素在多边形内部创建多个切口。*

因此，Google 地球似乎可以容忍您的格式错误的 KML，但也许 Google 地图不能。

**可能的解决方案**：尝试在内部重复，而不是在`<kml:LinearRing>`内部重复。`<kml:innerBoundaryIs>``<kml:innerBoundaryIs>``<kml:Polygon>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:38:51.370

Looks to me like the LinearRing polylines are crossing themselves.

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linkto.html?lat=52.051462&lng=10.031042&zoom=9&type=m&filename=http://www.geocodezip.com/geoxml3_test/testkml_polygon_inner_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linkto.html?lat=52.051462&lng=10.031042&zoom=9&type=m&filename=http://www.geocodezip.com/geoxml3_test/testkml_polygon_inner_kml.xml)

There is some character encoding issue which makes the chrome browser fail on the kml, but that doesn't seem to be the problem.

It looks like a problem with the Google Maps KML renderer (although I suppose it could be a problem with the KML), geoxml3 renders it correctly, but KmlLayer does not: [http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linkto.html?lat=52.051462&lng=10.031042&zoom=9&type=m&filename=http://www.geocodezip.com/geoxml3_test/neustekarteA_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_winding_linkto.html?lat=52.051462&lng=10.031042&zoom=9&type=m&filename=http://www.geocodezip.com/geoxml3_test/neustekarteA_kml.xml)

[Google Maps](https://maps.google.com/maps?q=http%3a%2F%2Fwww.tennettso.de%2Fsite%2Fbinaries%2Fcontent%2Fassets%2Fnetzausbau%2Fkarten%2Fneustekarte.kml&hl=en&sll=51.600305,9.931552&sspn=2.043772,3.532104&t=m&z=8) renders it the same as KmlLayer:

There are [limitations on Google Maps](https://developers.google.com/kml/documentation/mapsSupport), but it doesn't look like you are running in to them.

Probably should [open an issue](http://code.google.com/p/gmaps-api-issues/issues/list) against the KML renderer

# php - 安全地包装 JS 文件，因此当它们连接时它们仍然可以工作

> ID：12037302
> 
> 赞同：1
> 
> 时间：2012-08-20T12:03:48.413
> 
> 标签：php, javascript, minify

我正在使用 PHP 来连接几个 JS 和 CSS 文件。

CSS很好。然而，JS 会中断，但只有一些文件会中断。然后我停止添加它们，然后它们再次作为单个文件工作。

有没有办法可以安全地包装每个文件内容以确保它不会损坏？并“单独”说话？

我已经尝试了一些图书馆来做到这一点，但还没有发现任何足够可靠的东西，因此是自制的。

谢谢杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:09:04.133

在大多数情况下，一些 JS 文件`;`在文件末尾缺少 a。

因为我很确定这是问题所在，请尝试在函数 /s 之后添加`;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:29:53.430

您可能遇到变量冲突的问题。您可以将每个文件的所有代码包装在它们自己的作用域[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中，以防止这种情况发生。

此外，请确保您的所有 javascript 文件`;`在文件的最后一行都有分号。

如果你有一个像这样结尾的文件：

`var foo`

然后下一个文件是这样开始的：

`var bar;`

当它们连接时，您将拥有

`var foovar bar;`

这不是有效的javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:43:05.627

也许您可以尝试使用 php 将 .js 文件包装到函数闭包中？IE

```
(function(){
  // file content
})(); 
```

我不确定您的特定文件是否会出现无法预料的问题，但您可以尝试

# android - wss 的 Android 密钥库位置

> ID：12037303
> 
> 赞同：0
> 
> 时间：2012-08-20T12:03:49.227
> 
> 标签：android, wss, keystore, android-keystore

我有一个 android 应用程序，它通过 https 并使用 wss (wss4j) 与安全的 web 服务进行通信。在以前的桌面 java 应用程序中一切正常，我使用物理 .jks 文件来初始化所有内容，即：

```
props.setProperty("org.apache.ws.security.crypto.merlin.file", "c:/temp/conf/ihar.jks");
Crypto crypto = CryptoFactory.getInstance(props); 
```

这一切在桌面上都可以正常工作，但是，在 android 设备上，显然位置是错误的（“c:/temp/conf/ihar.jks”，当然，不存在）。所以我的问题是如何指定文件的位置？我认为它只需要一个刺激值，所以像“file:///android_asset/res/ihar.jks”这样的东西可行吗？

在此先感谢，伊恩·哈里根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:00:25.417

感谢您尝试 wss-Client-for-android :)

我目前没有可共享的项目（sry），但我可以就你的问题给你一些建议：

*   至少在 Gingerbread 上不支持 JKS，所以使用 BKS (bouncycastle)
*   将您的**clientkeystore.bks**和**clienttruststore.bks**放入您的 Android 项目的**res/raw文件夹中**
*   如何打开您的密钥库以访问证书或私钥：

    导入 java.security.KeyStore；
    ...
    InputStream keyStoreStream = resources.openRawResource(R.raw.clientkeystore);
    KeyStore keyStore = KeyStore.getInstance("BKS");
    keyStore.load(keyStoreStream, "xregistry".toCharArray());

*   如何为 sendSOAPMessage 设置 cryptoParams（this、message、endpoint、cryptoParams）；

    SecCryptoParams cryptoParams = new SecCryptoParams();
    cryptoParams.put(SecCryptoParams.KEYSTORE, new SecCryptoParam(R.raw.clientkeystore, KEYSTORE_PASSWORD)); cryptoParams.put(SecCryptoParams.TRUSTSTORE, new SecCryptoParam(R.raw.clienttruststore, TRUSTSTORE_PASSWORD));

我希望从这里你知道如何进行。
关于
Peter
(=PA=)
PS 我认为这种标记对我来说太多了：|

# java - 通过其他活动的菜单选项进入活动时如何在edittext中保留数据

> ID：12037305
> 
> 赞同：0
> 
> 时间：2012-08-20T12:03:53.423
> 
> 标签：java, android, android-intent, sharedpreferences

我有一个从其他活动获取意图数据（字符串）的活动。我想保留这些数据和用户在编辑文本中输入的数据（整数）。当用户从下一个活动的菜单选项进入此活动时，我想保留所有这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:48:28.530

**1.**您可以使用`SharedPreference`.

**2.**你也可以用a `file`，甚至a `Database`。SQLite 随 Android 一起提供。

# node.js - 猫鼬嵌入式文档主细节回调序列

> ID：12037307
> 
> 赞同：2
> 
> 时间：2012-08-20T12:04:08.917
> 
> 标签：node.js, mongodb, mongoose

我尝试在子项的预保存挂钩中进行一些操作，但它似乎从未被解雇。我只得到了主人的预保存钩子。

我的 Javascript 模型

```
 var mongoose = require('mongoose');
mongoose.connect("localhost","test_master_details");

var masterSchema = mongoose.Schema({
  title:{type:String,required:true},
  childs: [childSchema]
});

masterSchema.pre('save',function(next){
  console.log("master pre save called!");
  console.log(this);
  next();
});

var childSchema = mongoose.Schema({
  number:{type:Number},
  name: {type:String,required:true}

});

childSchema.pre('save',function(next){
  this.number = 1;
  //set number with the total number of childs for the parent master
  console.log('child pre save called!');
  console.log(this);
  next();
});

module.exports = [mongoose.model('Child',childSchema), mongoose.model('Master',masterSchema)]; 
```

我在咖啡脚本中的规格：

```
 model_container = require('../models/master')

Master = model_container[1]
Child = model_container[0]
should = require('should')

describe "Master model",->
  before (done) ->
    Master.remove {},(err) ->
      console.log err if err
      done()
  it "should be able to create an instance",(done)->
    master = new Master {title:"Master of command"}
    master.save (err) ->
      console.log err if err
      should.exist master
      done()
  it "should be able to add 1 child", (done)->
    master= new Master {title:"Master of command"}
    master.childs.push {name:"hello world"}
    master.save (err) ->
      console.log err if err
      master.childs.length.should.eql 1
      done()
  it "should be able to add 1 child with create method",(done) ->
    master = new Master {title:"Master of command"}
    child = new Child {name:"childs name"}
    master.childs.push child
    master.save (err) ->
      console.log err if err
      master.childs.length.should.eql 1
      done() 
```

这是我的规范结果，永远不会调用 childs pre-save：

```
 Master model
    ◦ should be able to create an instance: master pre save called!
{ title: 'Master of command',
  _id: 50322715672b424e11000001,
  childs: [] }
    ✓ should be able to create an instance 
    ◦ should be able to add 1 child: master pre save called!
{ title: 'Master of command',
  _id: 50322715672b424e11000002,
  childs: [ { name: 'hello world' } ] }
    ✓ should be able to add 1 child 
    ◦ should be able to add 1 child with create method: master pre save called!
{ title: 'Master of command',
  _id: 50322715672b424e11000003,
  childs: [ { name: 'childs name', _id: 50322715672b424e11000004 } ] }
    ✓ should be able to add 1 child with create method 

  ✔ 3 tests complete (20ms) 
```

我错过了什么吗？据我了解，每当我将孩子添加到集合中并在之后保存时，孩子是否应该预先救火。我做错了什么？我可以将一个孩子添加到一个主集合中并根据主值预设值吗？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:17:09.230

您需要`childSchema`在引用它之前定义它`masterSchema`，因此将它们切换为：

```
var childSchema = mongoose.Schema({
  number:{type:Number},
  name: {type:String,required:true}

});

childSchema.pre('save',function(next){
  this.number = 1;
  //set number with the total number of childs for the parent master
  console.log('child pre save called!');
  console.log(this);
  next();
});

var masterSchema = mongoose.Schema({
  title:{type:String,required:true},
  childs: [childSchema]
});

masterSchema.pre('save',function(next){
  console.log("master pre save called!");
  console.log(this);
  next();
}); 
```

# c# - 以前在程序中使用的路径存储在哪里（例如 FileDialog 路径）？

> ID：12037308
> 
> 赞同：2
> 
> 时间：2012-08-20T12:04:09.220
> 
> 标签：c#, printing, dialog

根据这篇[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.initialdirectory.aspx)文章，FileDialog 中使用的 InitialDirectory 属性的来源之一是：

> 以前在程序中使用的路径，可能从最后的目录或文件操作中保留。
> 
> ...

因此，如果您从文件夹 x 中选择了您的第一个文件，下次您尝试选择一个文件时，它将打开 FileDialog 并选择文件夹 x（无需导航）。

玩记事本这似乎涉及打开文件、保存文件、打开文件，甚至在使用“Microsoft XPS Document Writer”打印时也会出现它自己的对话框。

所以我的问题是这个值在对话之间存储在哪里？我希望能够看到它是什么并可能改变它？我想更改它的特定区域是在“Microsoft XPS Document Writer”打印机中，它会显示它自己的对话框。所以它并不是仅仅设置 initalDirectory 值那么简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:55:07.647

它存储在注册表中，位于`HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\`( `LastVisitedPidlMRU`) 中的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:15:05.653

您应该查看此链接： [MRU 位置](http://windowsxp.mvps.org/registrymru.htm)就是您正在查看的内容！

这是一种访问它的方法：

```
var openFileDialog1 = new OpenFileDialog();
string path = openFileDialog1.InitialDirectory;
// you can change path if you want
openFileDialog1.InitialDirectory = path;
// after you are donw you can display you dialog
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
      // do something
} 
```

另一种方法是使用 Directory.SetCurrentDirectory 方法来设置应用程序的当前工作目录

而从[微软网站](http://support.microsoft.com/kb/319958)，它存储在注册表中的这个位置：

```
//The MRU lists for Windows Explorer-style dialog boxes are stored by file type for each user in the following registry key:
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\OpenSaveMRU 
```

希望这可以帮助

# mysql - MySQL 复制是如何工作的？

> ID：12037312
> 
> 赞同：1
> 
> 时间：2012-08-20T12:04:23.807
> 
> 标签：mysql, database, replication, database-replication

我有一个关于 MySQL 复制的问题。我对数据库的了解非常有限。请有人帮我澄清这一点。我的目标是能够进行可以避免停机的部署。

假设我复制了一个数据库（主从）。假设我想做一个新版本，我需要运行一个迁移脚本。我的计划是停止复制。并在从站中运行脚本。迁移脚本可以是：

*   基于一些业务逻辑，运行多个查询来为表中的列设置新值。
*   添加新列

当我再次开始复制时实际会发生什么？从站将赶上主站的任何更改。但是主服务器如何获得应用于从服务器的更改？如果我运行相同的数据库脚本，迁移脚本将不会针对 master 上的相同数据集再次运行。

如果slave追上master，使用slave的快照并将其用作新的slave，是否有意义。老奴当主子？

我希望这实际上是清楚的。谢谢。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:13:21.097

您要么必须进行跨主复制以使从属赶上主控，而主控才能复制在从属上执行的修改，或者有一些停机时间并运行主控的脚本。

1-您可以将slave master replcaition更改为cross master，而无需任何停机时间。
2-阻止前从服务器复制主服务器。
3-运行你的脚本。
4-再次启动前奴隶。

我建议您使用 vmware 之类的工具设置测试环境并尝试一下。这就是我所做的。

**这是一个解释如何设置的链接**

[http://onlamp.com/onlamp/2006/04/20/advanced-mysql-replication.html](http://onlamp.com/onlamp/2006/04/20/advanced-mysql-replication.html)

在将更改应用到真实环境之前，我不能对测试施加足够的压力，因此请一次又一次地进行测试，直到您认为自己已经准备好为止。当这种情况发生时，再测试一次。不要忘记也进行备份

# c++ - 分层数据模型的替代方案

> ID：12037317
> 
> 赞同：10
> 
> 时间：2012-08-20T12:04:42.817
> 
> 标签：c++, hierarchical-data, datamodel

**问题域**

我正在开发一个相当大的应用程序，它使用分层数据模型。它拍摄图像、提取图像的特征并在这些特征之上创建分析对象。所以基本模型就像Object-(1:N)-Image_features-(1:1)-Image。但是同一组图像可用于创建多个分析对象（具有不同的选项）。

然后一个对象和图像可以有很多其他连接的对象，例如可以使用附加数据细化分析对象，或者可以基于分析对象和其他数据得出复杂的结论（解决方案）。

**当前解决方案**

这是解决方案的草图。堆栈代表一组对象，箭头代表指针（即图像特征链接到它们的图像，但反之则不然）。某些部分：图像、图像特征、附加数据，可能包含在多个分析对象中（因为用户想对不同的对象集进行分析，组合方式不同）。

![当前解决方案简化草图](../Images/991c0f2e0045adc9a3393436141d50f7.png)

图像、特征、附加数据和分析对象存储在全局存储（上帝对象）中。解决方案通过组合存储在分析对象中（并依次包含解决方案特征）。

所有实体（图像、图像特征、分析对象、解决方案、附加数据）都是相应类的实例（如 IImage，...）。几乎所有部分都是可选的（即，我们可能想在找到解决方案后丢弃图像）。

**当前解决方案的缺点**

1.  当您需要像草图中的虚线这样的连接时，导航这个结构是很痛苦的。如果您必须在顶部显示具有几个解决方案特征的图像，您首先必须遍历分析对象以查找其中哪些基于该图像，然后遍历解决方案以显示它们。
2.  如果要解决 1\. 您选择显式存储虚线链接（即图像类将具有指向与其相关的解决方案特征的指针），您将付出很大的努力来保持这些指针的一致性并在某些情况发生变化时不断更新链接.

**我的想法**

我想建立一个更可扩展（2）和灵活（1）的数据模型。第一个想法是使用关系模型，分离对象及其关系。为什么不在这里使用 RDBMS - sqlite 对我来说似乎是一个合适的引擎。因此，复杂的关系可以通过数据库上的简单（左）JOIN 访问：伪代码“ `images JOIN images_to_image_features JOIN image_features JOIN image_features_to_objects JOIN objects JOIN solutions JOIN solution_features`”），然后按 ID 从全局存储中获取解决方案功能的实际 C++ 对象。

**问题**

所以我的主要问题是

*   使用 RDBMS 是解决我所描述的问题的适当解决方案，还是不值得并且有更好的方法在我的应用程序中组织信息？

如果 RDBMS 没问题，我将不胜感激有关使用 RDBMS 和关系方法存储 C++ 对象关系的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:04:56.527

您可能希望了解语义 Web 技术，例如 RDF、RDFS 和 OWL，它们提供了另一种可扩展的世界建模方式。有一些开源的三重存储可用，一些主流的 RDBMS 也有三重存储的能力。

特别是看看曼彻斯特大学 Protege/OWL 教程： http: [//owl.cs.manchester.ac.uk/tutorials/protegeowltutorial/](http://owl.cs.manchester.ac.uk/tutorials/protegeowltutorial/)

如果你认为这个方向值得进一步研究，我可以推荐[“工作本体论的语义网”](http://www.amazon.co.uk/Semantic-Web-Working-Ontologist-Effective/dp/0123859654)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T16:26:59.210

仅基于该图，我建议 RDBMS 解决方案确实可行。自从我成为 RDMS（当然称为 RDM！）的开发人员以来已经有好几年了，但是我能够更新我的知识并获得非常有价值的数据结构和布局的见解，这些见解与您通过阅读神话般的描述非常相似Stephane Faroult 所著的《SQL 的艺术》一书。他的书将大大回答您的问题。

我在亚马逊上包含了一个链接，以确保准确性：[http ://www.amazon.com/The-Art-SQL-Stephane-Faroult/dp/0596008945](https://rads.stackoverflow.com/amzn/click/com/0596008945)

阅读它不会出错，即使它最终并没有完全解决你的问题，因为作者在清晰地分解关系并提出优雅的解决方案方面做得非常出色。这本书不是 SQL 手册，而是对如何思考数据以及数据如何相互关联的深入分析。一探究竟！

使用 RDBMS 跟踪数据之间的链接可能是一种有效的方式来存储和考虑您正在寻找的分析，并且链接是“软的”——也就是说，当它们链接的硬对象被删除时，它们就会消失。这确保了数据的完整性；Fauroult 女士可以回答如何确保这仍然正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T05:32:46.787

根据您对可扩展和灵活模型的要求，我不推荐 RDBMS。

1.  每当您更改数据模型时，都必须更改数据库模式，这可能比更改代码涉及更多的工作。
2.  数据库查询的任何问题仅在运行时才被发现。这会对维护成本产生很大影响。

我强烈建议使用带有 STL 的标准 C++ OO 编程。

1.  您可以利用封装来确保正确完成任何数据更改，并更新相关对象和索引。
2.  您可以使用 STL 在数据上构建高效索引
3.  您可以创建外观来轻松获取信息，而不必访问多个对象/集合。这将是一次性工作
4.  您可以制作单元测试用例以确保正确性（与使用数据库的单元测试相比要简单得多）
5.  您可以利用多态性来构建不同类型的对象、不同类型的分析等

所有非常基本的点，但我认为如果您改进当前的解决方案而不是寻找基于数据库的解决方案，您的努力将得到最好的利用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T06:26:15.657

[http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/index.html)

> “你会付出很多努力来保持这些指针的一致性，并在发生变化时不断更新链接。”

在 Boost.MultiIndex 的帮助下，您可以在“表”上创建几乎所有类型的索引。我认为引用的问题没有那么严重，因此原始解决方案是可以管理的。

# java - 关于哈希码的问题

> ID：12037318
> 
> 赞同：2
> 
> 时间：2012-08-20T12:04:56.267
> 
> 标签：java, hashcode

我对equals和hashcode有一些疑问。我之前的理解是，如果该类应该添加到集合类或 Map 类中，我们需要覆盖对象类中的 hashcode() 和 equals() 方法。请看下面的例子。我没有覆盖 hashcode 和 equals 方法。我仍然得到了我想要的结果。我明白一件事，如果我想比较两个对象，我们需要重写 equals 方法。但在这个例子中，我没有比较两个对象，而是将对象添加到集合或映射中，而不覆盖哈希码和等于。谁能解释为什么我们需要覆盖哈希码以及何时？

```
package equalshashcode;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class EqualsAndHashCode {
    public static void main(String[] args) {
        Student student1 = new Student("A");
        Student student2 = new Student("B");

        List<Student> studentList = new ArrayList<Student>();

        Map<Integer,Student> studentMap = new HashMap<Integer,Student>();

        studentMap.put(1, student1);
        studentMap.put(2, student2);

        studentList.add(student1);
        studentList.add(student2);

        System.out.println("Student HashMap:: "+studentMap.get(1));
        System.out.println("Before removing::"+studentList);
        System.out.println(studentList.remove(student1));//true success
        System.out.println("After removing::"+studentList);
    }
}

class Student{

    String name;
    public Student(String pName){
        this.name = pName ;
    }

    public String getName(){
        return this.name ;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:09:43.393

您并不总是需要实现`equals()`并将`hashCode()`元素添加到集合中。

对于 a `List`（例如 you `studentList`，它是一个`ArrayList`实例），大多数操作都无关紧要。

唯一*需要* `equals()`的地方`hashCode()`是对象的“平等”相关的地方。即使在那些地方，默认实现甚至可能就足够了。

在某些情况下，平等很重要，例如：

*   A`Set`不能包含两个相等的对象
*   a的*密钥*`Map`必须具有正确的`equals()`实现才能被检索（并且基于具体的`Map`实现，这可能意味着`hashCode()`也必须正确实现）。
*   “正常”上的某些方法`List`也需要相等。例如`contains()`，需要正确执行`indexOf()`/`remove(Object)``equals()``hashCode()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:23:10.443

自定义`equals`和`hashCode`方法通常用于确定实际相等性。如果您依赖默认`equals`方法，这将在内存中查找相同的实例。例如`customObj1.equals(customObj2)`，如果没有自定义`equals`方法并且两个对象是单独的（但在其他方面相等）实例，则将返回 false。自定义方法的想法`equals`是，如果它们实际上相等，则使相同的示例返回 true。然后， A`Map`将能够使用它来匹配`get(key)`请求中传递的键对象以查找值，而无需具有正确的键实例（a`HashMap`实际用于`hashCode`执行此操作）。

最明显的例子是 for `String`s，这样您就可以执行`myMap.get("key")`并获得正确的值，即使您的密钥实例与存储在`Map`( `String`implements`equals`和`hashCode`for you) 中的密钥实例不同。一般来说，我会推荐使用这些 Java 内置`equals`和`hashCode`方法来构建自己的。例如，如果您的对象具有自然 ID，例如 say `userName`，您`equals`可以使用`String`this 的版​​本来完成您自己的 equals （您显然可以比较多个字段）：

```
public boolean equals(Object o) {
    if (o instanceof MyObj) {
        return userName.equals(((MyObj) o).userName));
    }
    return false;
} 
```

因此，如果您只使用单个`Thread`或其他有限的变量，您可能永远不需要实现这些方法，但有时了解它们肯定是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:10:07.377

集合类将与具有默认 equals/hashCode 实现的对象完美配合 - 因此无需添加您自己的。

自定义的 equals/hashCode 方法很容易出错，除非您有充分的理由自行开发，否则您应该坚持使用通过 java.lang.Object 免费获得的方法。

创建您自己的这些方法版本的最常见原因是，如果您想将同一类的两个单独实例视为相等。例如，如果您有一个 Account 类，并且希望将具有相同 accountNumber 属性的两个 Account 实例视为相等，因为它们代表相同的真实帐户。在这种情况下，您将仅将 equals 方法基于 accountNumber 的值，并且由于您现在有一个自定义的 equals 方法，因此您还需要提供一个合适的 hashCode 实现，以履行[equals/hashCode 合同](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)。

# php - 我应该怎么做才能使 UTF-8 与 ASCII 字符串相等？

> ID：12037319
> 
> 赞同：0
> 
> 时间：2012-08-20T12:04:56.653
> 
> 标签：php, utf-8, ascii

代码：

```
$utf8 = "32572_zał nr 13  wybór marszałka.pdf";
$target = "32572_za' nr 13  wybÆr marsza'ka.pdf";
var_dump($utf8 == $target) 
```

我需要将 $utf8 中的字符串更改为 bo 等于 $target。

在这种情况下我能做什么？

比 str_replace 更先进的东西。

# java - 使用 .setPaint(gradient) 调整大小时不重绘

> ID：12037321
> 
> 赞同：1
> 
> 时间：2012-08-20T12:05:02.233
> 
> 标签：java, swing, image-resizing, repaint, paintcomponent

一旦我在我的代码中使用渐变，在调整大小时没有完成重绘我在调整大小时得到类似的东西（黑色矩形已经调整大小，请参见下面链接中的图像）。当我停止调整大小时，一切都会再次绘制，但只有那时。

如果我不使用`g2d.setPaint(gradient);`我有一个快速重绘

[http://gui-builder.com/C41142775162.rar](http://gui-builder.com/C41142775162.rar)

```
public void paintComponent(Graphics g)  
{  

        super.paintComponent(g);  

        Graphics2D g2d = (Graphics2D)g;  

        //sample of the code  
        GradientPaint gradient = new GradientPaint(startX, startY, greyColor1, endX, endY, new Color(120,120,120));  
        g2d.setPaint(gradient);  
        g.drawLine(i, startY, i, endY);  
} 
```

我试图`repaint()`调整大小，我试图`repaint()`在拖动鼠标时进行，但没有。

* * *

这是一些SSCCE（抱歉我之前没有发布过）：

缓冲图像 aa;

```
@Override  
public void paintComponent(Graphics g)  
{  
        super.paintComponent(g);  

        Graphics gr = aa.getGraphics();  
        Graphics2D g2d = (Graphics2D)gr;  

        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,  
                    RenderingHints.VALUE_ANTIALIAS_ON);  

        for (int i = 0; i < this.getWidth(); i++)  
        {  
            LinearGradientPaint lgp = new LinearGradientPaint(
            new Point2D.Float(0, 0),
            new Point2D.Float(0, this.getHeight()),
            new float[] {0f, 0.5f, 1f},
            new Color[] {Color.BLUE, Color.RED, Color.BLUE}
            ); 
            g2d.setPaint(lgp);  
            gr.drawLine(i, 0, i, this.getHeight());  
        }  
        g.drawImage(aa, 0, 0, frame);  
} 
```

在你的构造函数中：

aa = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);

我仍然需要一个答案，为什么当我调整窗口大小时没有完成重绘（当我移动窗口的调整大小角时）

* * *

好的，总结一下：我尝试了三种主要的 Java 绘图方法，它们是 BufferStrategy、双 Swing 缓冲图像和没有图像缓冲区的简单摇摆。我发现速度更快的是最后一个（令人惊讶）。

现在我正在使用快速的，我发现首先将窗口调整为小尺寸然后将窗口调整为大尺寸会使问题消失。别笑那是我的问题，这完全是个谜。这是它的视频：[C41142775162.rar](http://gui-builder.com/C41142775162.rar)

当我调整到小尺寸时会发生什么？我不知道。但是，如果您知道任何帮助将不胜感激。

谢谢

杰夫

* * *

我还发现最好尽可能少地使用 setPaint。您可以运行测试，您会发现不经常使用 setPaint() 会快得多。例如，而不是使用：

```
LinearGradientPaint gradient1 = new LinearGradientPaint(
        new Point2D.Float(0, 0),
        new Point2D.Float(0, 10),
        new float[] {0f, 1f},
        new Color[] {new Color(40,40,40), new Color(110,110,110)}
    );
LinearGradientPaint gradient2 = new LinearGradientPaint(
        new Point2D.Float(0, 10),
        new Point2D.Float(0, 20),
        new float[] {0f, 1f},
        new Color[] {new Color(110,110,110), new Color(190,190,190)}
    );
LinearGradientPaint gradient3 = new LinearGradientPaint(
        new Point2D.Float(0, 20),
        new Point2D.Float(0, 30),
        new float[] {0f, 1f},
        new Color[] {new Color(190,190,190), new Color(250,250,250)}
    );                        
for (int i = 0; i < this.getWidth(); i++)
{
    g2d.setPaint(gradient1);
    gr.drawLine(i, 0, i, 10);
    g2d.setPaint(gradient2);
    gr.drawLine(i, 10, i, 20);
    g2d.setPaint(gradient3);
    gr.drawLine(i, 20, i, 30);                            
} 
```

利用 ：

```
LinearGradientPaint gradient1 = new LinearGradientPaint(
        new Point2D.Float(0, 0),
        new Point2D.Float(0, 10),
        new float[] {0f, 1f},
        new Color[] {new Color(40,40,40), new Color(110,110,110)}
    );
LinearGradientPaint gradient2 = new LinearGradientPaint(
        new Point2D.Float(0, 10),
        new Point2D.Float(0, 20),
        new float[] {0f, 1f},
        new Color[] {new Color(110,110,110), new Color(190,190,190)}
    );
LinearGradientPaint gradient3 = new LinearGradientPaint(
        new Point2D.Float(0, 20),
        new Point2D.Float(0, 30),
        new float[] {0f, 1f},
        new Color[] {new Color(190,190,190), new Color(250,250,250)}
    );                         

g2d.setPaint(gradient1);
for (int i = 0; i < this.getWidth(); i++)
     gr.drawLine(i, 0, i, 10);

g2d.setPaint(gradient2);
for (int i = 0; i < this.getWidth(); i++)
    gr.drawLine(i, 10, i, 20);

g2d.setPaint(gradient3);
for (int i = 0; i < this.getWidth(); i++)
    gr.drawLine(i, 20, i, 30); 
```

即使你有很多计算，它几乎每次都会更快！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:52:17.577

我做了一个测试，发现它的`GradientPaint`性能很糟糕。平均渲染时间从 1.2 秒（400x400 像素）到 20+ 秒。

我更改了`GradientPaint`for a`LinearGradientPaint`并发现渲染时间约为 1.3 秒。

```
LinearGradientPaint lgp = new LinearGradientPaint(
                new Point2D.Float(0, minY),
                new Point2D.Float(0, maxY),
                new float[] {0f, 0.5f, 1f},
                new Color[] {Color.BLUE, Color.RED, Color.BLUE}
                );
g2d.setPaint(lgp);
    // Render all your samples, don't reapply or change you paint... 
```

抱歉，我的样本不是很令人兴奋...

![在此处输入图像描述](../Images/391ec6ddc185302d58fbd68faca35a68.png)

您可能会发现在后台线程中渲染到后备缓冲区并在完成后将整个图像绘制到屏幕上会更好。这将阻止屏幕“暂停”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:19:26.773

如果这是一个小程序，把那个东西放进去

```
public void start()
{
} 
```

和

```
public void stop()
{
} 
```

# java - 字符串检查错误

> ID：12037323
> 
> 赞同：1
> 
> 时间：2012-08-20T12:05:07.247
> 
> 标签：java

我正在编写一个基于 1 个主字符串将子字符串添加到黑色或白色字符串的程序。主串是：牛奶，纸，杯子：，咖啡，可乐，PC

我希望代码将所有字符放在白色字符串中的“：”之前，并将所有字符放在黑色字符串中的“：”之后。

问题在于它将所有项目添加到黑色字符串中，除了一个女巫连接到“：”。所以在这种情况下是“杯子”。

这是我的代码：

```
String White = "";
String Black = "";
String[] temp = "milk,paper,cup:,coffee,cola,PC".split(",");
int q = 0;
Boolean black = false;
while (q < temp.length) {
    if (temp[q].isEmpty()) {
    } else if (temp[q].contains(":")) {
        String tempWhite = White;
        White = tempWhite + temp[q].replace(":", "") + ",";
        black = true;

    } else if (black = true) {
        String tempBlack = Black;
        Black = tempBlack + temp[q] + ",";
    } else if (black = false) {
        String tempWhite = White;
        White = tempWhite + temp[q] + ",";
    } else if (temp[q].contains(" ")) {
    } else {
        System.out.println(temp[q]);

    }

    q++;
}
System.out.println("White: " + White);
System.out.println("Black: " + Black); 
```

我得到的输出：白色：杯子，黑色：牛奶，纸，咖啡，可乐，PC，

我想要的输出： 白色：牛奶、纸、杯子 黑色：咖啡、可乐、PC

我使脚本可编译以便于检查:)

提前问候和感谢，

布拉姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:08:01.810

看来你开始错了：你为什么不先`split`“：”，然后分析这两个部分？然后，您的整个程序逻辑将折叠成两三行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:08:37.433

怎么样

```
String[] pairs = "milk,paper,cup:,coffee,cola,PC".split(":");
String white = pairs[0];
String black = pairs[1].substring(1); 
```

寻求解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:14:08.583

*   首先， split on ：得到两个字符串，一个用于白字符串，一个用于黑字符串。
*   然后对于两个字符串， split on 以选择每个单独的项目。
*   使用 (boolean == true) 代替 (boolean = false)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:19:09.100

如果你想把你的字符串作为一部分，你可以使用 split 方法。你可以通过这种方式（）分割字符串。split(":") 并将字符串对存储在不同的字符串变量中..仅此而已

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T12:09:35.950

在 ":" 上拆分：[0] 将是 White，[1] Black 。

否则，使用**StringBuilder()**和方法 .append(..)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T12:12:07.367

您可以在“：”处轻松拆分主字符串

然后你必须从黑色字符串中删除前导“，”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T12:19:36.197

显示代码不起作用的主要问题是在 if 条件中错误使用了 =，*赋值运算符*（实际上，应该使用 ==，*比较运算符*- 但你甚至不需要完全比较 - 变量`black`本身是布尔值，因此可以用作条件，例如：

```
if (black) 
```

如果黑色为真，则执行某事，或

```
if (!black) 
```

检查黑色当前是否持有该值`false`。

另请注意，在此代码中

```
if (black) {
     doSomething();
} else if (!black) {
     doSomethingElse();
} 
```

第二个 if 语句 ( `if (!black)`) 是多余的：`black`只能有两个值；如果不是真的，那只能是假的！因此，在语义上与上述等效的是：

```
if (black) {
     doSomething();
} else {
     doSomethingElse();
} 
```

至于您所面临的整体问题的更易于阅读（更好的可维护性，并且更短！）的解决方案，请首先在冒号上使用 split （如其他答案中所述）。

# java - 使用 primefaces 上传文件时出现编码问题

> ID：12037326
> 
> 赞同：0
> 
> 时间：2012-08-20T12:05:13.697
> 
> 标签：java, jsf, file-upload, character-encoding, primefaces

[我和这里](https://stackoverflow.com/questions/546365/utf-8-text-is-garbled-when-form-is-posted-as-multipart-form-data)有同样的问题。

我使用 primefaces 2.2 jsf 实现。我已经尝试了所有方法，但没有任何效果。还有其他解决方案吗？当我尝试时`new String (s.getBytes ("iso-8859-1"), "UTF-8");`，我怎么知道输入编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-06T22:50:15.627

```
String fileName=new String(event.getFile()
                                 .getFileName()
                                 .getBytes(Charset.defaultCharset()),"UTF-8").toUpperCase(locale); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:13:27.420

输入编码是您的服务器使用的默认编码，而不是 UTF-8。所以它是一个应用程序范围的设置，因此不依赖于特定的 HTTP 请求/客户端。很多时候，它与[`Charset#defaultCharset()`](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29).

至于具体问题，请注意 PrimeFaces 3.3 目前仍在为此苦苦挣扎。另请参阅[使用 utf8 字符过滤器的 primefaces 文件上传过滤器](https://stackoverflow.com/questions/11190081)，您可以在其中找到一些提示来破解 PrimeFaces 源代码本身以修复错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T03:16:58.970

我在开发日文网站的时候也遇到过这种问题。文本变成未知字符。经过一番谷歌搜索后，我能够解决这个问题。这是我的解决方案。

```
<h:form enctype="multipart/form-data;charset=UTF-8">
  <p:fileUpload id="image" immediate="true" auto="true" sizeLimit="1048576" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileUploadListener="#{uploadController.uploadListener}" mode="advanced" multiple="true"/>
</h:form> 
```

您只需添加`multipart/form-data;charset=UTF-8`表单的 enctype 即可。

# javascript - 如何根据phonegap中的位置从数据库中检索数据？

> ID：12037336
> 
> 赞同：1
> 
> 时间：2012-08-20T12:06:30.303
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我在网格视图中显示字母，每当我单击每个字母时，它都必须显示该字母的相应单词，因为我可以获得每个字母的位置，所以我如何检索或传递数据从数据库？

这是那个截图

![在此处输入图像描述](../Images/dcca51a87942850094f6269645a4a677.png)

该网格视图的代码是

> var a2zArray =['A','B','C','D','E','F','G','H','I','J','K','L ','M','N','O','P','Q','R','S','T','U','V','W','X', 'Y','Z'];

```
$(document).ready(function()
{
    createA2ZGrid();
});

function createA2ZGrid(){
var rowElem='';

for (var i=0; i < a2zArray.length; i++){
    rowElem = rowElem +" "+ "<label id='elementId' onclick=onClicked('"+a2zArray[i]+"')>" + a2zArray[i] + "</label>";

}
         $("#A2Z-GridId").html(rowElem);
}

function onClicked(element){
alert("Onclicked : "+element);

}; 
```

如何将参数从 html 传递给 js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T10:33:21.943

如果您使用的是 phonegap，则必须深入到 jquery mobile 在您的标头中的 index.html 页面中：（或参见 phonegap 文档）

```
<script type="text/javascript" src="js/cordova-2.5.0.js"></script>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/webtoolkit.base64.js"></script>
<script type="text/javascript" src="js/MacAddress.js"></script>
<script type="text/javascript" src="js/your_own_javascript.js"></script>
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" /> 
```

然后为您的代码：我测试了这个：

```
<label id='elementId' onclick="onClicked('Test')">test</label> 
```

并在您的 javascript.js 中（或在脚本标签中的 html 代码中）：

```
function onClicked(element){
    navigator.notification.alert("Onclicked : "+element);

}; 
```

这有效

据我在您的代码中看到的，您缺少函数周围的引号

```
"<label id='elementId' onclick=onClicked('"+a2zArray[i]+"')>" + a2zArray[i] + "</label>" 
```

将导致

```
<label id='elementId' onclick=onClicked('something')>something</label> 
```

它应该是：

```
<label id='elementId' onclick="onClicked('something')">something</label> 
```

所以这应该工作：

```
"<label id='elementId' onclick='onClicked('"+a2zArray[i]+"')'>" + a2zArray[i] + "</label>" 
```

# .net - 定义具有相同名称和不同类型参数数量的泛型类 (C++/CLI)

> ID：12037340
> 
> 赞同：2
> 
> 时间：2012-08-20T12:06:39.943
> 
> 标签：.net, generics, c++-cli, managed

在 C# 中，可以编写如下内容：

```
public static class Test
{
}
public class Test<T>
{
} 
```

如何在 C++/CLI 中做同样的事情？

我试图定义：

```
public ref class Test abstract sealed
{
};

generic<typename T>
public ref class Test
{
}; 
```

但我收到 C2011 错误：“'class' 类型重新定义。

我想创建一个静态类，它定义了创建通用类实例的便捷方法，就像 System.Tuple 一样。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:35:13.740

为了清楚起见，你想这样做：

```
generic<typename T>
public ref class Test {};

generic<typename T, typename U>
public ref class Test {}; 
```

你不能在 C++/CLI 中做到这一点。这是一个缺陷，因为 CLR 允许这样做。但它是从 C++ 继承而来的。C++/CLI 语言使用了很多 C++ 编译器的管道，在这个过程中继承了它的命名规则。您可以发布到 connect.microsoft.com，但这将作为“设计”迅速关闭。

唯一合适的方法是将这些泛型类型移动到您在 C++/CLI 项目中引用的 C# 类库中。或者通过妥协，比如重命名其余的类，像 Test2 这样的东西是可口的。这确实反映了这些类完全不相关的现实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:12:44.667

C++ 中没有静态类的概念，甚至在 C++/CLI 中也没有。这已经在[这里](http://social.msdn.microsoft.com/Forums/en-us/netfxbcl/thread/4f1606b3-7831-46a7-abbd-7b4ceb81f09a)讨论过了。

但是，如果您想像在静态类中那样模拟事物，一种解决方法是放置一些静态函数，可以调用该函数来初始化静态成员而无需创建实例。

```
class Test
{
 public:
  static int InitializeGenerics(...);
} 
```

这可以很容易地称为`Test::InitializeGenerics()`

# javascript - 不会循环数组javascript

> ID：12037345
> 
> 赞同：1
> 
> 时间：2012-08-20T12:06:56.023
> 
> 标签：javascript

为什么我无法访问我的阵列？

```
function map(array){
    for(i=0; i <=array.length; i++){
        var location=array[i].location;
        console.log("loc"+location);
        var user = array[i].from_user;
        console.log("user"+user);
        var date = array[i].created_at;
        var profile_img = array[i].profile_img;
        var text = array[i].text;
        var contentString = text;
        //geocode(user,date, profile_img, text, contentString,location);
    }
} 
```

它给了我未定义的每个元素。我想访问它并将变量传递给地理编码函数。数据结构：

```
array=[{user: a,user_id: b,date: c,profile_img: d,text: e,contentString: f,url:
      g,location:o},{user: a,user_id: b,date: c,profile_img: d,text: e,contentString: 
      f,url:g,location:o},{user: a,user_id: b,date: c,profile_img: d,text: 
      e,contentString: f,url: g,location:s}]; 
```

不要担心价值观..！

我第一次发帖时忘了提（问题）。数组的位置被插入到前一个函数中，而数组不包含来自前一个函数的属性位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:21:43.637

如果`array`您传入的**长度为 0**，那么您循环它的方式将尝试访问**0 处的列表元素**，这将是未定义的。

但是，不管你的内容如何`array`，​​这行总是会给你带来麻烦：

```
for(i=0; i <=array.length; i++) 
```

当检查`length`您的属性时`array`，它会告诉您**数组中的元素**数。由于数组使用**基于 0 的索引**，因此每次使用此循环都会**超出**数组的边界。

```
var myArray = [1, 2, 3];
myArrary[0]; // This is 1
myArray[2]; // This is 3 
```

`0`由于您在和**数组的长度**之间循环，恰好是`3`，您尝试访问的最后一个元素将不存在。

```
myArray[3]; // Undefined 
```

您需要检查`i < array.length`而不是`i <= array.length`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:26:10.710

调用函数时，请使用包含在数组文字中的对象文字构造，否则所有值都将作为未定义返回。这就是你应该如何调用你的函数：

```
map([{ // array literal enclosing an object literal

    location   : 1,
    from_user  : 2,
    created_at : 3,
    profile_img: 4,
    text       : 5

}]); 
```

此外，在您的循环中，更改：

```
for (i = 0; i <= array.length; i++ ) ... 
```

...到

```
for (var i = 0; i < array.length; i++) ... 
```

如果您有一个预定义的数组，请将其命名并将其传递给函数，如下所示：

`map(arrayObj)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:28:52.803

你的代码很好。通过提供的输入和功能，您可以获得：

```
loco
userundefined
loco
userundefined
locs
userundefined 
```

每个用户出现未定义的原因是：

```
var user = array[i].from_user;
console.log("user"+user); 
```

您传入的对象没有`from_user`属性，因此很自然地出现未定义。也许你的意思是`array[i].user_id`？

此外，正如 Esthete 指出的那样，由于您检查长度的方式，您正在超出数组的范围。改为这样做：

```
for(var i = 0, n = array.length; i < n; i++) {
    // your code in here
} 
```

请注意，我以这样的开头`i`，`var`因此它不会成为隐式全局。另外，我声明了第二个变量`n`，这样您只需要访问`array.length`一次。这是常见的做法。

所以，把它们放在一起：

```
function map(array){
    for(var i = 0, n = array.length; i < n; i++){
        var location=array[i].location;
        console.log("loc"+location);
        var user = array[i].user_id;
        console.log("user"+user);
        var date = array[i].created_at;
        var profile_img = array[i].profile_img;
        var text = array[i].text;
        var contentString = text;
        //geocode(user,date, profile_img, text, contentString,location);
    }
}
array=[{user: 'a',user_id: 'b',date: 'c',profile_img: 'd',text: 'e',contentString: 'f',url:
      'g',location:'o'},{user: 'a',user_id: 'b',date: 'c',profile_img: 'd',text: 'e',contentString: 
      'f',url:'g',location:'o'},{user: 'a',user_id: 'b',date: 'c',profile_img: 'd',text: 
      'e',contentString: 'f',url: 'g',location:'s'}];

map(array); 
```

请注意，我将您的对象属性更改为字符串 - 这是因为您没有为这些属性提供值，但您可能不想这样做。输出是：

```
loco
userb
loco
userb
locs
userb 
```

一切都很好。如果您仍然未定义，`location`那么您的错误必须与`o`您传入的对象的属性有关。

# php - 从 jQuery 调用 php echo？

> ID：12037349
> 
> 赞同：1
> 
> 时间：2012-08-20T12:07:22.543
> 
> 标签：php, javascript, jquery

我的标题中有一个调用 php 文件的 jQuery 脚本。

php 文件包含从远程 xspf 文件中提取的数据，并以 jQuery 形式显示输出以进行刷新。我有 2 个回声规则，一个用于标题，一个用于听众。现在 jQuery 调用文件本身，这使得输出一起出现在一行上。我怎样才能让 jQuery 分别呈现这些回声，以便我可以控制它们的设计（CSS）？

PHP：

```
<?php
header("Expires: Tue, 03 Jul 2001 06:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

$xml = simplexml_load_file("http://mysitehere:8000/live.xspf"); 

foreach ($xml->trackList->track as $data) { 
    $radio = $data->location;
    $song  = $data->title;  
    $info = $data->listeners;   
}
echo $song;
echo $info;
?> 
```

jQuery：

```
<script language="javascript">
jQuery(document).ready(function(){
    //Carga al comienzo
    jQuery('#salida').load('reader.php');   
    setInterval(function() {        
        jQuery('#salida').load('reader.php');   
    }, 2000);
})
</script>

<div id=salida> </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:11:49.273

将回显信息放入单独的元素中

```
echo '<div class="Song">'.$song.'</div>';
echo '<div class="Info">'.$info.'</div>'; 
```

然后在你的 CSS 中为 Song、Info 设置类（或任何你想给它们起的名字）

# sql-server - T-SQL Merge 语句中的 T-SQL 转换错误

> ID：12037357
> 
> 赞同：1
> 
> 时间：2012-08-20T12:07:56.497
> 
> 标签：sql-server, tsql, ssis

我正在尝试使用 T-Sql 中的 Merge 语句构建优化的渐变维度。我编写了以下代码来处理 SCD1 和 SCD2 更改，以及数据表中的正常插入，数据来自源表，Name 和 Age 是 SCD1 列，Animal 和 Blood 是 SCD2 列：

```
DECLARE @LoadingDate DATETIME
SET @LoadingDate = '2012-08-20 14:23:29.827'

--Handle SCD1 Changes
MERGE INTO Table_2 AS DIM
 USING SourceTable AS SRC
 ON (DIM.ID1 = SRC.ID1
    AND DIM.ID2 = SRC.ID2)
 WHEN MATCHED
    AND (DIM.Name <> SRC.Name 
      OR DIM.AGE <> SRC.AGE)
    THEN 
    UPDATE 
    SET DIM.Name = SRC.Name,
    DIM.Age = SRC.Age;

--Handle SCD2 Changes
INSERT INTO Table_2
    (ID1, ID2, --Business Key
     Name, Age, --SCD1 Columns
     Animal, Blood, --SCD2 Columns
     DateEffective, DateExpires)
 SELECT
    ID1, ID2, --Business Key
     Name, Age, --SCD1 Columns
     Animal, Blood, --SCD2 Columns
     DateEffective, DateExpires
FROM (
MERGE Table_2 AS DIM
 USING SourceTable AS SRC
 ON (DIM.ID1 = SRC.ID1
    AND DIM.ID2 = SRC.ID2)
 WHEN NOT MATCHED
  THEN INSERT VALUES 
  (SRC.ID1, SRC.ID2,
   SRC.Name, SRC.Age,
   SRC.Animal, SRC.Blood,
   @LoadingDate, NULL)
 WHEN MATCHED 
   AND DIM.DateExpires IS NULL
   AND (DIM.Animal != SRC.Animal
    OR DIM.Blood != SRC.Blood)
   THEN UPDATE SET DIM.DateExpires = @LoadingDate
 OUTPUT $action Action_Out,
   SRC.ID1, SRC.ID2,
   SRC.Name, SRC.Age,
   SRC.Animal, SRC.Blood,
   @LoadingDate AS DateEffective,
   NULL AS DateExpires) AS MERGE_OUT
 WHERE MERGE_OUT.Action_Out = 'UPDATE'; 
```

该代码适用于 SCD1 更改（代码的第一部分），但它给了我错误： ![在此处输入图像描述](../Images/6728d4e50776ae85aafe131968873f15.png) 当它尝试插入新行时出现错误，其中业务键 ID1 和 ID2 与任何其他行都不匹配来自数据表，“Labus”是名称字段中的值。

两个表的设计如下图所示，但 SourceTable 没有管理列： ![在此处输入图像描述](../Images/e2be55b5c9408c36f04d2fa69949c756.png)

我真的很感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:31:56.617

由于该错误表明隐式 nvarchar 到 int 的转换出错，因此解决此问题的初始步骤是显式转换所有可能的 nvarchar 和 int 值（如下所示），然后检查是否仍然出现错误。

如果您没有收到错误，那么您可以开始删除强制转换并归零到特定的 int 或 nvarchar 字段。

如果您确实收到错误，这可能是一个更具体的错误，可帮助您确定它发生在代码的哪个部分。

```
DECLARE @LoadingDate DATETIME
SET @LoadingDate = '2012-08-20 14:23:29.827'

--Handle SCD1 Changes
MERGE INTO Table_2 AS DIM
    USING SourceTable AS SRC
    ON ( CAST(DIM.ID1 AS INT) = CAST(SRC.ID1 AS INT)
         AND CAST(DIM.ID2 AS INT) = CAST(caSSRC.ID2 AS INT)
       )
    WHEN MATCHED AND ( CAST(DIM.Name AS nvarchar(255)) <> CAST(SRC.Name AS nvarchar(255))
                       OR CAST(DIM.AGE AS nvarchar(255)) <> CAST(SRC.AGE AS nvarchar(255))
                     )
        THEN 
    UPDATE
          SET
            DIM.Name = CAST(SRC.Name AS nvarchar(255)) ,
            DIM.Age = CAST(SRC.Age AS nvarchar(255)) ;

--Handle SCD2 Changes
INSERT  INTO Table_2
        ( ID1 ,
          ID2 , --Business Key
          Name ,
          Age , --SCD1 Columns
          Animal ,
          Blood , --SCD2 Columns
          DateEffective ,
          DateExpires
        )
        SELECT  CAST(ID1 AS INT),
                CAST(ID2 AS INT) , --Business Key
                CAST(Name AS nvarchar(255)) ,
                CAST(Age AS nvarchar(255)) , --SCD1 Columns
                CAST(Animal AS nvarchar(255)) ,
                CAST(Blood AS nvarchar(255)) , --SCD2 Columns
                DateEffective ,
                DateExpires
        FROM    (
MERGE Table_2 AS DIM
    USING SourceTable AS SRC
    ON ( CAST(DIM.ID1 AS INT) = CAST(SRC.ID1 AS INT)
         AND CAST(DIM.ID2 AS INT) =  CAST(SRC.ID2 AS INT)
       )
    WHEN NOT MATCHED 
        THEN INSERT
          VALUES    ( CAST(SRC.ID1 AS INT) ,
                      CAST(SRC.ID2 AS INT) ,
                  CAST(SRC.Name AS NVARCHAR(255)),
                  CAST(SRC.Age AS NVARCHAR(255)),
                  CAST(SRC.Animal AS NVARCHAR(255)),
                  CAST(SRC.Blood  AS NVARCHAR(255)),
                      @LoadingDate ,
                      NULL
                    )
    WHEN MATCHED AND DIM.DateExpires IS NULL
        AND ( CAST(DIM.Animal AS NVARCHAR(255)) != CAST(SRC.Animal AS NVARCHAR(255))
              OR CAST(DIM.Blood AS NVARCHAR(255)) != CAST(SRC.Blood AS NVARCHAR(255))
            )
        THEN UPDATE
          SET       DIM.DateExpires = @LoadingDate
    OUTPUT
        $action Action_Out ,
        SRC.ID1 ,
        SRC.ID2 ,
        SRC.Name ,
        SRC.Age ,
        SRC.Animal ,
        SRC.Blood ,
        @LoadingDate AS DateEffective ,
        NULL AS DateExpires) AS MERGE_OUT
        WHERE   MERGE_OUT.Action_Out = 'UPDATE' ;
    --...
    --...
    --... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:01:03.587

试试这个：基本上，我在 SELECT 列中使用了别名。
（可组合 DML 仍有改进空间。）

此外，当您已经在子查询中合并到 Table_2 中时，是否有理由再次将其他记录（用于更新操作）插入到 Table_2 中？

```
DECLARE @LoadingDate DATETIME
SET @LoadingDate = '2012-08-20 14:23:29.827'

--Handle SCD1 Changes
MERGE INTO Table_2 AS DIM
    USING SourceTable AS SRC
    ON ( DIM.ID1 = SRC.ID1
         AND DIM.ID2 = SRC.ID2
       )
    WHEN MATCHED AND ( DIM.Name <> SRC.Name
                       OR DIM.AGE <> SRC.AGE
                     )
        THEN 
    UPDATE
          SET
            DIM.Name = SRC.Name ,
            DIM.Age = SRC.Age ;

--Handle SCD2 Changes
INSERT  INTO Table_2
        ( ID1 ,
          ID2 , --Business Key
          Name ,
          Age , --SCD1 Columns
          Animal ,
          Blood , --SCD2 Columns
          DateEffective ,
          DateExpires
        )
        SELECT  MERGE_OUT.ID1 ,
                MERGE_OUT.ID2 , --Business Key
                MERGE_OUT.Name ,
                MERGE_OUT.Age , --SCD1 Columns
                MERGE_OUT.Animal ,
                MERGE_OUT.Blood , --SCD2 Columns
                MERGE_OUT.DateEffective ,
                MERGE_OUT.DateExpires
        FROM    (
MERGE INTO Table_2 AS DIM
    USING SourceTable AS SRC
    ON ( DIM.ID1 = SRC.ID1
         AND DIM.ID2 = SRC.ID2
       )
    WHEN NOT MATCHED 
        THEN INSERT
          VALUES    ( SRC.ID1 ,
                      SRC.ID2 ,
                      SRC.Name ,
                      SRC.Age ,
                      SRC.Animal ,
                      SRC.Blood ,
                      @LoadingDate ,
                      NULL
                    )
    WHEN MATCHED AND DIM.DateExpires IS NULL
        AND ( DIM.Animal != SRC.Animal
              OR DIM.Blood != SRC.Blood
            )
        THEN UPDATE
          SET       DIM.DateExpires = @LoadingDate
    OUTPUT
        $action AS Action_Out ,
        SRC.ID1 AS ID1 ,
        SRC.ID2 AS ID2 ,
        SRC.NAME AS Name ,
        SRC.Age AS Age ,
        SRC.Animal AS Animal ,
        SRC.Blood AS Blood ,
        @LoadingDate AS DateEffective ,
    NULL AS DateExpires) AS MERGE_OUT ( ID1, ID2, Name, Age, Animal, Blood,
                                        DateEffective, DateExpires )
        WHERE   MERGE_OUT.Action_Out = 'UPDATE' ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:43:26.340

等一下！最后一次合并的 OUTPUT 可能与 Select 子句不匹配。因此 Action_Out 可能被映射到 ID1，因此隐式转换尝试。

尝试像这样修改 OUTPUT 子句：

```
OUTPUT
    $action Action_Out ,
    SRC.ID1 AS ID1,
    SRC.ID2 AS ID2,
    SRC.Name AS Name,
    SRC.Age AS Age,
    SRC.Animal AS Animal,
    SRC.Blood AS Blood,
    @LoadingDate AS DateEffective ,
    NULL AS DateExpires) AS MERGE_OUT
    WHERE   MERGE_OUT.Action_Out = 'UPDATE' ; 
```

# c# - 子报告不会呈现到文件 SSRS

> ID：12037362
> 
> 赞同：1
> 
> 时间：2012-08-20T12:08:18.463
> 
> 标签：c#, asp.net, reportviewer, reporting-services

我有几个带有子报告的服务器报告。我的问题是我想将这些作为 PDF 文档保存到服务器。我这样做使用：

```
ReportViewer.ServerReport.Render("PDF", null, out mimeType, out encoding,
   out extension, out streams, out warnings); 
```

然后将生成的字节保存到具有正确扩展名的文件中。

当我以这种方式渲染然后查看生成的 PDF 时，子报告应该是空白区域。

奇怪的是，我忘记了一次尝试从父级设置子报告参数，并且 PDF 包含一条改变我的消息。当我添加参数，重新上传报告并尝试再次生成它时，我只是得到了空白区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:08:31.177

过去，在*重新上传参数已更改的报告*时，SSRS 的行为对我来说非常奇怪。您可以尝试：

*   先删除报表，然后**重新上传**子报表？（与主报告相同）
*   **暂时用新名称复制**子报告，上传并重试？
*   检查 Reporting Services **Web 前端**并尝试在那里预览/导出报告？

就像一个小而重要的最后一个问题：您是否检查过**子报告不只是*空***的（并且正在正常呈现，但是是空的）？例如，在其中放置一个静态文本框或类似的东西。

# mysql - xtradb vs innodb

> ID：12037363
> 
> 赞同：26
> 
> 时间：2012-08-20T12:08:21.300
> 
> 标签：mysql, database, innodb, mariadb, xtradb

我被要求检查 Mariadb，因为 Centos 目前不提供 MySQL 5.5。我已经读过 xtradb 服务器作为 innodb 的一部分。

使用其中一个或另一个有什么好处，因为如果它们相等，它们就不会被称为相同的名称？

你认为我应该切换到 Mariadb 吗？如果有更新，我将来可能会遇到什么样的问题。

我知道 MySQL 的创始人是 Mariadb 的幕后推手，Oracle 现在在管理 MySQL。作为一个棘手的决定，这似乎有点棘手。

提前感谢您的意见，

**更新，**我在这里问了这个问题，因为谷歌没有显示任何最近的更新。仅 2012 年之前发布的一些旧比较

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T14:10:57.330

XtraDB 是添加了几个补丁的 InnoDB。这些补丁本身来自谷歌、Facebook 和其他公司。XtraDB 由[Percona](http://www.percona.com)维护，是 Percona Server 的核心。

你可能认为 Percona 是一个分销商，负责收集、协调和维护补丁并分发 MySQL 服务器的增强版本。

可以在这里看到库存 MySQL 和 Percona Server 之间的功能比较：

[http://www.percona.com/software/percona-server/feature-comparison](http://www.percona.com/software/percona-server/feature-comparison)

XtraDB 引擎也作为默认 InnoDB 实现在[MariaDB](http://www.mariadb.org)中提供。MariaDB 还包括库存的 InnoDB 作为可插拔存储引擎，因此您可以选择。

基准测试表明 XtraDB 在大规模并行架构上的扩展性更好，尤其是 XtraDB 更适合写入繁重的工作负载。MySQL 5.6 中的 InnoDB 引擎将包含迄今为止仅在 XtraDB 中可用的许多功能和优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:05:30.740

xtradb 是 innodb 的一个分支（mariadb 还提供了 innodb 的原始副本），但有一些改进的补丁（其中还有以前从未被 MySQL 接受的 Google 和 Facebook 补丁）

# android - 我们可以在 values 文件夹中使用 strings.xml 创建 new_strings.xml 以用于 sting 字符串（Android）吗？

> ID：12037367
> 
> 赞同：6
> 
> 时间：2012-08-20T12:08:32.583
> 
> 标签：android, string

我在`values`字符串文件夹中有两个 xml 文件：

1.  新字符串.xml
2.  字符串.xml

从`strings.xml`我可以访问字符串如下：

```
String str = getString(R.string.app_name); 
```

我怎样才能直接访问`new_strings.xml`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T12:14:29.817

以同样的方式访问 strings.xml 文件中的值。

例子 ：

字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name_1">First app name</string>

</resources> 
```

新字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name_2">Second app_name</string>

</resources> 
```

在您的 java 代码中，您可以执行以下操作：

`R.string.app_name_1`

`R.string.app_name_2`

并且您可以访问两个不同 xml 文件中的两个值。

正如文档所说：文件位置：

```
res/values/filename.xml 
```

文件名是任意的。元素的`<string>`名称将用作资源 ID。

编译的资源数据类型：**指向 String 的资源指针**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T20:47:05.070

给你一个非常简短的答案：

是的，无论文件名如何，您都可以访问两个文件中的所有字符串。虽然将所有字符串保存在一个文件中通常是一种很好的做法，但我个人认为将字符串分成多个文件很有用，特别是出于本地化目的，这让我想到了下一点：

是的，您可以访问其他语言环境文件夹中的本地化字符串，例如`values-es`，只要它包含文件`values`夹中所有字符串文件的翻译副本。

例如，如果您的文件夹中有`strings.xml`和`new_strings.xml`，请`values`确保您的文件`values-es`夹中也有这两个文件，以便您的应用程序以西班牙语显示本地化字符串。

希望这可以为您澄清事情=）

# php - 从 webroot 之外包含的 PHP 文件访问 $_COOKIE

> ID：12037370
> 
> 赞同：0
> 
> 时间：2012-08-20T12:08:46.240
> 
> 标签：php, cookies

问题在标题中。

我可以`$_COOKIE['blah']`在 webroot 中访问我的 php 文件，但出于安全目的，我在 webroot 之外包含了无法访问它的内容。

**例子**

`/home/wwwroot/index.php`可以读取 $_COOKIE['blah']

它的完整路径在哪里`http://www.mydomain.com/index.php`。

`/home/scrape/process.php`*无法*读取 $ _COOKIE ['blah']

但它在webroot之外，并且该`scrape`文件夹不能在服务器之外访问。

**Index.php**可以回显存储在 cookie 中的值，并将带有该值的时间戳写入日志文件。这行得通。

无需发布所有代码并尝试保持简单，就像这样简单：

```
<?PHP
include '../scrape/process.php'; // THIS FILE IS OUTSIDE THE WEBROOT
$cook=$_COOKIE['blah'];

echo "Cookie value is : " . $_COOKIE['blah'] ;
error_log('['.date("F j, Y, g:i a e O").']'.$cook."<br /> \n", 3,  $phperrorPath);
?>

<?PHP
echo 'Outer cookie is : ';
echo outer_cookie();
?> 
```

**Process.php**函数从 index.php 中调用，然后它将返回 cookie 的值，并使用时间戳和 cookie 值写入它自己的日志文件。这不起作用。日志文件只有时间戳，没有值，它不会向 index.php 返回任何内容。

```
function outer_cookie() 
{ 
    $cook=$_COOKIE['blah'];
    error_log('['.date("F j, Y, g:i a e O").']'.$cook."<br /> \n", 3,  $phperrorPath);
    return $cook; 
} 
```

如何让 process.php 读取 cookie 数据？我显然不能将cookie路径设置为webroot之外的东西，即使我可以，那么webroot中的所有东西都无法访问它......

我必须`$_SESSION`和饼干一起使用吗？我讨厌不得不重复这项工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:41:07.430

确保这两个文件都应该位于您的域或一个域的子域中。

您无法访问在`index.php`没有 Web 访问权限且浏览器不解析的文件中设置的 cookie。

检查[php.net](http://ir2.php.net/manual/en/features.cookies.php)：

*Cookie 是一种在远程浏览器中存储数据并因此跟踪或识别返回用户的机制。Cookie 是 HTTP 标头的一部分，因此必须在将任何输出发送到浏览器之前调用 setcookie()。*

# multithreading - IIS 服务器 w3wp 进程高非分页池和线程导致性能不佳

> ID：12037372
> 
> 赞同：0
> 
> 时间：2012-08-20T12:09:04.553
> 
> 标签：multithreading, iis, w3wp

我有 6 个包含相同内容的“相同”x64 IIS6 服务器。偶尔在我们观察到运行缓慢的一台或多台服务器上，加载一个简单的 html 页面可能需要大约 20 秒。

当这种情况发生时，我们可以看到线程增加到 300（通常为 80）和非分页池 1000k（通常为 200k）。

看不出有什么不同，即其他进程、磁盘 I/O。

网络计数器似乎转移了较少的数据，但我说这是有症状的。

任何人都知道什么会导致高非分页池？这是 x64 服务器，也许我找错地方了

# python - 生产和消费没有声明队列的消息

> ID：12037376
> 
> 赞同：1
> 
> 时间：2012-08-20T12:09:22.470
> 
> 标签：python, rabbitmq, pika

当您生成消息并在未声明队列或在 basic_publish 中提及它的情况下发送消息时，消息存储在哪里（在 rabbit 中）？我必须使用的代码如下所示：

```
... bunch of setup code (no queue declaring tho)...
channel.exchange_declare(exchange='name', type='direct')
channel.basic_publish(exchange='exch_name', routing_key='rkey', body='message' )
conn.close() 
```

我已经通过网络查看了我的能力，但还没有找到答案。我有一种预感，只要这条消息没有被消费，兔子就会创建一个队列，我担心如果兔子必须声明这个队列然后销毁它几个（数千！？）每分钟/小时的次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:16.423

当您发布时，您（通常）发布到交易所，就像您正在做的那样。交换决定如何处理该消息。如果与消息无关，则将其丢弃。如果与消息有关，则相应地对其进行路由。

在没有声明队列的原始代码片段中，消息将被丢弃。

正如您在评论中所说，生产者创建了一个队列。这里有一些您没有说明的选项。我将尝试通过各种可能性。通常你会在消费者中声明队列。但是，如果您希望确保他们的消费者看到所有消息，则队列必须由生产者创建并由生产者绑定到交换器，以确保每条消息最终都在此队列中。然后当队列被消费者消费时，它将看到所有的消息。或者，您可以使用命令行或管理 gui 从代码外部将队列创建为非自动删除队列，也可能作为持久队列（即使重新启动 RabbitMQ 也会保留队列）。

队列和交换不是持久的，它们是否持久，这意味着它们将在重启 RabbitMQ 后存在。队列具有自动删除功能，因此当消费者与它们断开连接时，它们将不再存在。

消息可以是持久的，因此如果您将消息发送到将被路由到队列的交换器，则不会读取该消息并且重新启动 RabbitMQ 消息将在重新启动时仍然存在。即使消息不是持久的，如果队列不是持久的，那么它也会丢失，或者如果消息没有首先路由到队列。

确保在创建队列后，使用与消息路由键相同的键将队列正确绑定到交换器。

# android - 如何获取TextView的行数？

> ID：12037377
> 
> 赞同：69
> 
> 时间：2012-08-20T12:09:21.897
> 
> 标签：android, textview

我想获取文本视图的行数

```
textView.setText("Test line 1 Test line 2 Test line 3 Test line 4 Test line 5.............") 
```

`textView.getLineCount();`总是返回**零**

然后我也试过：

```
ViewTreeObserver vto = this.textView.getViewTreeObserver();
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

    @Override
    public void onGlobalLayout() {
        ViewTreeObserver obs = textView.getViewTreeObserver();
        obs.removeGlobalOnLayoutListener(this);
        System.out.println(": " + textView.getLineCount());

    }
}); 
```

它返回准确的输出。

但这仅适用于静态布局。

当我动态地膨胀布局时，这不再起作用了。

如何找到 TextView 中的行数？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2015-09-01T20:49:42.117

我能够`getLineCount()`使用 a 不返回 0 `post`，如下所示：

```
textview.setText(“Some text”);
textview.post(new Runnable() {
    @Override
    public void run() {
        int lineCount = textview.getLineCount();
        // Use lineCount here
    }
}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-20T12:16:07.350

正如这篇[文章](https://stackoverflow.com/questions/3528790/textview-getlinecount-always-0-in-android)中提到的，

> `getLineCount()`只有在布局通过后才会为您提供正确的行数。

这意味着您需要`TextView`在调用该`getLineCount()`方法之前渲染第一个。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-06T07:26:09.297

`ViewTreeObserver`不是那么可靠，尤其是在使用动态布局时，例如`ListView`.

假设：
1\. 您将根据`TextView`.
2.工作不是很紧急，可以稍后再做。

这是我的解决方案：

```
public class LayoutedTextView extends TextView {

        public LayoutedTextView(Context context) {
                super(context);
        }

        public LayoutedTextView(Context context, AttributeSet attrs) {
                super(context, attrs);
        }

        public LayoutedTextView(Context context, AttributeSet attrs, int defStyle) {
                super(context, attrs, defStyle);
        }

        public interface OnLayoutListener {
                void onLayouted(TextView view);
        }

        private OnLayoutListener mOnLayoutListener;

        public void setOnLayoutListener(OnLayoutListener listener) {
                mOnLayoutListener = listener;
        }

        @Override
        protected void onLayout(boolean changed, int left, int top, int right,
                        int bottom) {
                super.onLayout(changed, left, top, right, bottom);

                if (mOnLayoutListener != null) {
                        mOnLayoutListener.onLayouted(this);
                }
        }

} 
```

用法：

```
LayoutedTextView tv = new LayoutedTextView(context);
tv.setOnLayoutListener(new OnLayoutListener() {
        @Override
        public void onLayouted(TextView view) {
                int lineCount = view.getLineCount();
                // do your work
        }
}); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-07-22T07:36:47.753

```
 textView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {

        @Override
        public boolean onPreDraw() {
            // Remove listener because we don't want this called before _every_ frame
            textView.getViewTreeObserver().removeOnPreDrawListener(this)

            // Drawing happens after layout so we can assume getLineCount() returns the correct value
            if(textView.getLineCount() > 2) {
                // Do whatever you want in case text view has more than 2 lines
            }  

            return true; // true because we don't want to skip this frame
        }
}); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-07-12T14:43:19.457

我认为这个问题的症结在于人们希望能够提前找出 TextView 的大小，以便他们可以动态调整它的大小以很好地适应文本。一个典型的用途可能是创建对话气泡（至少那是我正在做的）。

[我尝试了几种解决方案，包括使用这里](https://stackoverflow.com/questions/7549182/android-paint-measuretext-vs-gettextbounds)讨论的 getTextBounds() 和 measureText() 。不幸的是，这两种方法都有些不精确，并且无法解释换行符和未使用的行空间。所以，我放弃了这种方法。

剩下的就是 getLineCount()，它的问题是你必须在 getLineCount() 之前“渲染”文本会给你行数，这使它成为先有鸡还是先有蛋的情况。我阅读了涉及侦听器和布局的各种解决方案，但简直不敢相信没有更简单的东西。

经过两天的摆弄，我终于找到了我想要的东西（至少它对我有用）。这一切都归结为“渲染”文本的含义。这并不意味着文本必须出现在屏幕上，只是它必须准备好在内部显示。每当直接调用 invalidate() 或间接调用时都会发生这种情况，例如当您在 TextView 上执行 setText() 时，由于视图已更改外观，因此会为您调用 invalidate()。

无论如何，这是关键代码（假设您已经知道谈话气泡的 lineWidth 和 lineHeight 基于字体的单行）：

```
TextView talkBubble;
// No peeking while we set the bubble up.
talkBubble.setVisibility( View.INVISIBLE );
// I use FrameLayouts so my talk bubbles can overlap
// lineHeight is just a filler at this point
talkBubble.setLayoutParams( new FrameLayout.LayoutParams( lineWidth, lineHeight ) );
// setText() calls invalidate(), which makes getLineCount() do the right thing.
talkBubble.setText( "This is the string we want to dynamically deal with." );
int lineCount = getLineCount();
// Now we set the real size of the talkBubble.
talkBubble.setLayoutParams( new FrameLayout.LayoutParams( lineWidth, lineCount * lineHeight ) );
talkBubble.setVisibility( View.VISIBLE ); 
```

无论如何，就是这样。下一次重绘将为您的文本提供一个量身定制的气泡。

注意：在实际程序中，我使用单独的气泡来确定文本行，以便我可以根据长度和宽度动态调整真实气泡的大小。这使我可以从左到右缩小气泡以进行简短的陈述等。

享受！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-03-14T13:33:12.237

基于[@secnelis 的想法](https://stackoverflow.com/questions/12037377/how-to-get-number-of-lines-of-textview/22217849#22217849)，如果您以 API 11 或更高版本为目标，还有更简洁的方法。

`TextView`如果你可以使用已经内置的功能，而不是扩展 a`View.OnLayoutChangeListener`

在`ListAdapter.getView()`，例如

```
if (h.mTitle.getLineCount() == 0 && h.mTitle.getText().length() != 0) {
    h.mTitle.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {
        @Override
        public void onLayoutChange(final View v, final int left, final int top,
                final int right, final int bottom, final int oldLeft,
                final int oldTop, final int oldRight, final int oldBottom) {
            h.mTitle.removeOnLayoutChangeListener(this);
            final int count = h.mTitle.getLineCount();
            // do stuff
        }
    });
} else {
    final int count = h.mTitle.getLineCount();
    // do stuff
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-11-21T09:15:42.767

您还可以`PrecomputedTextCompat`用于获取行数。常规方法：

```
fun getTextLineCount(textView: TextView, text: String, lineCount: (Int) -> (Unit)) {
    val params: PrecomputedTextCompat.Params = TextViewCompat.getTextMetricsParams(textView)
    val ref: WeakReference<TextView>? = WeakReference(textView)

    GlobalScope.launch(Dispatchers.Default) {
        val text = PrecomputedTextCompat.create(text, params)
        GlobalScope.launch(Dispatchers.Main) {
            ref?.get()?.let { textView ->
                TextViewCompat.setPrecomputedText(textView, text)
                lineCount.invoke(textView.lineCount)
            }
        }
    }
} 
```

调用这个方法：

```
getTextLineCount(textView, "Test line 1 Test line 2 Test line 3 Test line 4 Test line 5.............") { lineCount ->
     //count of lines is stored in lineCount variable
} 
```

或者，也许您可​​以像这样为其创建扩展方法：

```
fun TextView.getTextLineCount(text: String, lineCount: (Int) -> (Unit)) {
    val params: PrecomputedTextCompat.Params = TextViewCompat.getTextMetricsParams(this)
    val ref: WeakReference<TextView>? = WeakReference(this)

    GlobalScope.launch(Dispatchers.Default) {
        val text = PrecomputedTextCompat.create(text, params)
        GlobalScope.launch(Dispatchers.Main) {
            ref?.get()?.let { textView ->
                TextViewCompat.setPrecomputedText(textView, text)
                lineCount.invoke(textView.lineCount)
            }
        }
    }
} 
```

然后你这样称呼它：

```
textView.getTextLineCount("Test line 1 Test line 2 Test line 3 Test line 4 Test line 5.............") { lineCount ->
     //count of lines is stored in lineCount variable
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-05-30T17:16:49.097

您还可以通过此函数计算行数：

```
private fun countLines(textView: TextView): Int {
        return Math.ceil(textView.paint.measureText(textView.text.toString()) /
                textView.measuredWidth.toDouble()).toInt()
    } 
```

请记住，它可能无法很好地工作`RecyclerView`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-15T18:38:40.000

```
textview.getText().toString().split(System.getProperty("line.separator")).length 
```

获得TextView的行数对我来说很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-26T18:19:45.387

你在做这个`onCreate`吗？视图尚未布局，因此暂时`getLineCount()`为 0。如果稍后在 Window LifeCycle 中执行此操作，您将获得行数。你会很难做到这一点`onCreate`，但通常现在已经测量`onWindowFocusChanged`了`hasFocus=true`视图。

建议`textView.post()`也不错

# python - Kivy 的 TextInput 小部件中的 Tab/Enter（和其他击键）处理

> ID：12037379
> 
> 赞同：15
> 
> 时间：2012-08-20T12:09:36.060
> 
> 标签：python, kivy

我正在使用 Kivy 框架编写一个应用程序，我偶然发现了一个小而烦人的问题：我不知道如何处理文本字段中的*Tab/Enter/Arrow*键，以便按下它们中的任何一个都会发送一个事件，例如。将焦点（跳转）切换到另一个*TextInput*或启动类似`send_form()`

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-02-21T23:07:59.607

`write_tab: False`Kivy 1.9 提供了在文本输入上进行设置的能力（[请参阅文档](http://kivy.org/docs/api-kivy.uix.textinput.html#kivy.uix.textinput.TextInput.write_tab)），使 tab 键聚焦在下一个可聚焦的小部件上。

Kivy 允许 Enter 键通过设置`multiline: False`和来调度事件`on_text_validate: root.foo()`。

因此，要创建具有所需 Enter 和 Tab 功能的文本输入小部件，请执行以下操作：

```
TextInput:
    write_tab: False
    multiline: False
    on_text_validate: root.foo() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-20T17:08:39.420

刚刚发现了这个老问题，并认为我会做出贡献。我还需要制表符/输入才能转到下一个字段。我按照@tshirtman 的建议做了。这是我的自定义`TextInput`类：

```
from kivy.uix.textinput import TextInput

class TabTextInput(TextInput):

    def __init__(self, *args, **kwargs):
        self.next = kwargs.pop('next', None)
        super(TabTextInput, self).__init__(*args, **kwargs)

    def set_next(self, next):
        self.next = next

    def _keyboard_on_key_down(self, window, keycode, text, modifiers):
        key, key_str = keycode
        if key in (9, 13) and self.next is not None:
            self.next.focus = True
            self.next.select_all()
        else:
            super(TabTextInput, self)._keyboard_on_key_down(window, keycode, text, modifiers) 
```

这允许您`next`在实例化输入时传递，或者调用`set_next`现有输入。

9 和 13 是 tab 和 enter 的键码。

对我来说效果很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T20:19:08.397

正如 Daniel Kinsman 在他的评论中所建议的，您可以将 TextInput 子类化，添加“上一个”和“下一个”ObjectProperties 以支持选项卡（使用对其他小部件的引用很容易在 kv 中设置），并以不同的方式处理键盘事件。目前还没有开箱即用的支持，但是如果您想进行此类修改，请向我们发送功能请求或在 freenode 上的#kivy 中讨论它。

[https://github.com/kivy/kivy/blob/master/kivy/uix/textinput.py#L1188](https://github.com/kivy/kivy/blob/master/kivy/uix/textinput.py#L1188)

也许在小部件上添加这样的支持会更好，并添加一些焦点逻辑，因此 tab/enter 对任何可激活的小部件都有影响，并且像滑块这样的一些小部件也使用右/左/上/下键。

所以在 Kivy 中还有很多事情要做，如果你有兴趣提供帮助，你真的可以让它更快地发生，我们会帮助你 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-16T19:19:22.470

[评论不足，所以在这里添加...]

重要的是要注意键盘 NEXT 行为只有在下一个字段由*相同*的键盘布局管理时才能轻松工作。但是，高级应用程序将具有：

*   用户名（qwerty）
*   密码（密码）
*   ID（数字）等

所以上面的方法真的行不通。

在 kv 文件中：

```
 MyTextInput:
        next: idTheNextFieldBelowThis 
```

在您的 MyTextInput 类中：

```
 def insert_text(self, value, from_undo=False):
        #
        # Unfortunately the TextInput write_tab behavior only works if the next field is the same exact keyboard
        # type.
        #
        if not value[-1:] == '  ':
            return super(MyTextInput, self).insert_text(value, from_undo=from_undo)
        r = super(MyTextInput, self).insert_text(value[:-1], from_undo=from_undo)
        if self.next is not None:
            self.next.focus = True
        return r 
```

# jquery - html5全屏视频上的点击事件

> ID：12037381
> 
> 赞同：1
> 
> 时间：2012-08-20T12:09:50.140
> 
> 标签：jquery, html, events, video, click

我正在尝试使用 jQuery 操作 HTML5 视频标签。我现在只需要所有这些都可以在 Chrome 中工作。

我遇到了一些问题：当我的视频全屏播放时（在视频上使用 webkitEnterFullScreen() ），我希望能够在用户单击视频上的任何位置后立即退出全屏**模式**。无论我如何尝试，即使视频全屏播放
，我似乎也无法捕捉到**任何点击。**

```
$('myvideo').click(...
$(document).click(...
$(window).click(... 
```

在全屏模式下，他们都没有做任何事情。

这是正常行为吗？

如果不需要，我不想使用像 videojs 这样的库。
谢谢您的帮助

编辑：简单的小提琴[http://jsfiddle.net/tWTrT/7/](http://jsfiddle.net/tWTrT/7/)一旦你进入全屏模式，控制台就不会跟踪任何东西。

# heroku - 如何在 Play 2.0 (Scala) 中使用 DATABSE_URL 与 PostgreSQL 9.1 和 Heroku 进行本地连接？

> ID：12037394
> 
> 赞同：4
> 
> 时间：2012-08-20T12:10:29.360
> 
> 标签：heroku, playframework-2.0

我使用 Play! 在 OSX (Lion 10.7.4) 上使用本地 PostgreSQL 9.1 开发了第一个 Web 应用程序！框架 2.0.3。我从 conf/application.conf （相对于应用程序的目录）中定义的数据库连接开始

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://localhost/fotoplay"
db.default.user=foo
db.default.password=bar 
```

（用户名和密码在发布前已更改）这适用于编写和测试。我现在想部署到 Heroku。我已经用一行设置了 Procfile（在应用程序的目录中）：

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS}  
-DapplyEvolutions.default=false 
-Ddb.default.driver=org.postgresql.Driver 
-Ddb.default.url=$DATABASE_URL 
```

我已经在 .bash_profile 中导出了 DATABASE_URL，这样我就可以在系统命令行中回显 $DATABASE_URL 并获取

```
postgres://foo:bar@localhost/photoplay 
```

在 Heroku，我建立了一个 postgresql 实例。我不确定如何编写数据库进化来填充heroku，所以我关闭了进化并手动填充了我的数据库。我目前的演变构建表并使用来自一些 csv 文件的一些初始数据填充它们，因此我需要将 csv 文件放置在 heroku 可以访问的地方。至少在第一次通过时，我还不想解决这个问题。但是由于手动步骤，我在 Heroku 上有一个填充的数据库。

使用此配置，我的应用程序可以在本地正常运行。但是，我没有使用 DATABASE_URL，这似乎是错误的。我将此推送到HEROKU，但无法连接到数据库。错误是：

```
Caused by: org.postgresql.util.PSQLException: 
FATAL: password authentication failed for user "foo" 
```

如果我删除用户名和密码，我会破坏我的本地配置。我应该能够使用 DATABASE_URL '而不是'旧的语法，但我不太知道该怎么做。我不认为我可以通过实验来解决这个问题（徘徊在高维空间是没有希望的，并且可能涉及几种可能的配置设置并且可能会出现拼写错误）。任何关于我应该如何设置 application.conf 的指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T12:33:06.633

值得一试：在您的`application.conf`文件中，更改您的`db.default.url`参数以在 URL 中包含用户名和密码，然后删除`db.default.user`和`db.default.password`参数：

```
db.default.url="postgres://foo:bar@localhost/fotoplay" 
```

# scala - 可遍历的递归节点结构

> ID：12037397
> 
> 赞同：3
> 
> 时间：2012-08-20T12:10:55.827
> 
> 标签：scala, foreach, stack-overflow, tostring, case-class

我正在尝试在节点结构上实现递归遍历：

```
sealed class Node(subnodes: Traversable[Node]) extends Traversable[Node] {
  def foreach[U](f: Node => U) {
    f(this)
    subnodes foreach f
  }
}

case class Atom(id: String) extends Node(Nil)

case class Molecule(atoms: List[Node]) extends Node(atoms) 
```

调用`toString`类似的元素`Atom("test").toString`会导致堆栈溢出：

```
Exception in thread "main" java.lang.StackOverflowError
at java.lang.System.arraycopy(Native Method)
at java.lang.String.getChars(Unknown Source)
at java.lang.AbstractStringBuilder.append(Unknown Source)
at java.lang.StringBuilder.append(Unknown Source)
at scala.collection.mutable.StringBuilder.append(StringBuilder.scala:197)
at scala.collection.TraversableOnce$class.addString(TraversableOnce.scala:297)
at Node.addString(Fail.scala:1)
at scala.collection.TraversableOnce$class.mkString(TraversableOnce.scala:263)
at Node.mkString(Fail.scala:1)
at scala.collection.TraversableLike$class.toString(TraversableLike.scala:615)
at Node.toString(Fail.scala:1)
at java.lang.String.valueOf(Unknown Source)
at scala.collection.mutable.StringBuilder.append(StringBuilder.scala:187)
at scala.collection.TraversableOnce$$anonfun$addString$1.apply(TraversableOnce.scala:300)
[...]
at Node.foreach(Fail.scala:3)
at scala.collection.TraversableOnce$class.addString(TraversableOnce.scala:298)
at Node.addString(Fail.scala:1)
at scala.collection.TraversableOnce$class.mkString(TraversableOnce.scala:263)
at Node.mkString(Fail.scala:1)
at scala.collection.TraversableLike$class.toString(TraversableLike.scala:615)
at Node.toString(Fail.scala:1)
at java.lang.String.valueOf(Unknown Source)
at scala.collection.mutable.StringBuilder.append(StringBuilder.scala:187)
at scala.collection.TraversableOnce$$anonfun$addString$1.apply(TraversableOnce.scala:300) 
```

请注意，我没有在任何地方明确调用 foreach。那么为什么会出现堆栈溢出呢？

我通过一个额外的类和从to`TraversableNode`的隐式转换解决了这个特殊问题，但我仍然想知道是什么导致了堆栈溢出。谢谢。`Node``TraversableNode`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:23:44.997

当你调用`toString`an`Atom`时，你会得到一个 for `Traversable`，[文档](http://www.scala-lang.org/api/current/scala/collection/immutable/Traversable.html)描述如下：

> 默认情况下，此字符串由`stringPrefix`该集合的 组成，后跟以逗号分隔并用括号括起来的所有元素。

“跟随所有元素”部分是[通过`TraversableOnce`](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableOnce.scala#L294)调用集合的`foreach`. 由于您的`foreach`第一次命中`Node`本身，您立即陷入无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:17:24.090

通常，`toString`案例类的方法会打印类名及其参数列表（第一个参数列表中的那些）。如果您的案例类扩展了具有明确定义的类，则此规则有一个例外`toString`。

你的`Node`扩展`Traversable[Node]`。请注意，它没有编译器生成的 case-class `toString`，如其 AST ( `scalac -Xprint:cleanup`) 所示：

```
case class Atom extends Node with Product with Serializable {
   ....
    override <synthetic> def hashCode(): Int = ScalaRunTime.this._hashCode(Atom.this);
    override <synthetic> def equals(x$1: Any): Boolean = Atom.this.eq(x$1.asInstanceOf[Object]()).||(x$1.isInstanceOf[Atom]().&&({
      <synthetic> val Atom$1: Atom = x$1.asInstanceOf[Atom]();
      Atom.this.id().==(Atom$1.id()).&&(Atom$1.canEqual(Atom.this))
    }))
  }; 
```

上面，编译器“仅”生成`hashCode`and `equals`，`toString`继承自`Traversable`.

包中的`Traversable`trait有一个根据. 因此，调用会在节点本身上进行迭代（与 一致），从而导致无限循环。`collection``toString``foreach``toString``foreach``f(this)`

# c++ - 超级方法调用中的 C++ 名称冲突

> ID：12037399
> 
> 赞同：0
> 
> 时间：2012-08-20T12:10:56.557
> 
> 标签：c++, methods, namespaces

假设我有以下代码：

```
namespace x{
    class X{
        virtual void x(){}
    }
}

namespace y{
    class Y : public x::X{
         void x(){}
    }
}

int main(){
    x::X* a = new y::Y();
    a->x::X::x(); //Tries to access x::X::x non-virtually. 
                  //Fails, since it treats the first x as the 
                  //function name instead of the namespace
} 
```

如您所见，main 方法的最后一行尝试静态（即非虚拟）调用类x::X 的x 方法。但是，这失败了，因为命名空间与方法具有相同的名称（两者都命名为 x）。因此，编译器将第一个 x 视为方法名称，然后抱怨 x::X 没有任何意义。

这个问题乍一看似乎是假设的，但它确实出现在我们的代码中：命名空间不能轻易重命名，因为它是一个大项目的命名空间。方法名称不能更改，因为它必须遵守超出我们范围的其他超类（库类）。

那么，有没有机会以某种方式消除这种语法的歧义，以便我仍然能够以非虚拟方式调用方法 x::X::x ？

现在，我看到的唯一解决方案是键入 x::X，然后使用 typedef。有没有没有typedef的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:15:29.340

```
a->x::X::x(); //Tries to access x::X::x non-virtually. 
              //Fails, since it treats the first x as the 
              //function name instead of the namespace 
```

这实际上是对问题的非常清楚的描述。解决方案是删除`x::`资格的一部分。查找将在该上下文中开始`Y`并且无法找到`X`，然后它将向上移动层次结构并`X`在类中找到注入的名称`X`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:26:39.140

我不认为它与 typedef 有很大不同，但仍然......

```
using namespace xAlias = x; 
```

# android - Android：小部件不应该更新

> ID：12037400
> 
> 赞同：0
> 
> 时间：2012-08-20T12:10:59.097
> 
> 标签：android, widget

我有两个 ImageView 和一个按钮的小部件布局。每当我点击按钮时，两个图像视图应该会在我的资源文件中获得一些随机图像。我的问题是前几次点击，图像视图正确获取新图像，但在那之后，即使我使用 设置图像`setImageViewBitmap()`，但没有用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:35:37.657

我发现了问题。这是由于异常“失败的 BINDER TRANSACTION”。请查看此讨论。 [https://groups.google.com/d/topic/android-developers/KKEyW6XdDvg/discussion](https://groups.google.com/d/topic/android-developers/KKEyW6XdDvg/discussion)

谢谢@拉胡尔。

# iphone - 在 iOS 上使用动画从右到左调整视图大小

> ID：12037404
> 
> 赞同：2
> 
> 时间：2012-08-20T12:11:19.430
> 
> 标签：iphone, ios, animation, uiview

我想从右侧到左侧（相反）调整 UIView 的大小。现在我有这样的矩形视图`CGRectMake(100.f, 0.f, 100.f, 100.f)`：

```
[UIView animateWithDuration:0.5 animations:^{
  view.frame = CGRectMake(0.f, 0.f, 200.f, 100.f);
}]; 
```

问题是动画不好看。它向右弹跳（变大），然后移动到位置 0.0,0.0。

我想达到与从左到右调整大小时相同的效果。

**编辑：代码**

```
- (void)resizeSearchBar:(int)type
{
    //resize - bigger
    if (type == 1) {
        [UIView animateWithDuration:1.0 animations:^{
            self.searchBar.frame = CGRectMake(0.f, 0.f, 280.f, 44.f);
        }];
    }
    //resize - smaller
    else {
        [UIView animateWithDuration:1.0 animations:^{
            self.searchBar.frame = CGRectMake(95.f, 0.f, 185.f, 44.f);
        }];
    }
} 
```

**编辑 2**

我还尝试像这样更改 IB 中的 View 属性： ![在此处输入图像描述](../Images/c6d894c6d0779a6af8b71103abac0fbc.png)

还是没有运气...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T13:39:38.950

得到它与这个答案的提示一起工作：[Can't animate frame or bounds of a UISearchBar](https://stackoverflow.com/questions/9636367/cant-animate-the-frame-or-bounds-of-a-uisearchbar/10319005#10319005)

诀窍是在设置帧后调用`[searchBar layoutSubviews];`你的动画块。

这是我在我的示例中要做的事情：

```
- (IBAction)resizeButtonTapped:(id)sender {
    //resize - bigger
    if (searchBar.frame.origin.x == 95) {
        [UIView animateWithDuration:1.0 animations:^{
            self.searchBar.frame = CGRectMake(0.f, 0.f, 280.f, 44.f);
            [searchBar layoutSubviews];
        }];
    }
    //resize - smaller
    else {
        [UIView animateWithDuration:1.0 animations:^{
            self.searchBar.frame = CGRectMake(95.f, 0.f, 185.f, 44.f);
            [searchBar layoutSubviews];
        }];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:29:45.660

它会反弹，因为持续时间要短得多！

增加持续时间..我认为它会更清楚它是如何动画的

K试试这个

```
[UIView animateWithDuration:1.0 
                  delay:0.0 
                options:UIViewAnimationCurveEaseInOut 
             animations:^ {

     self.searchBar.frame = CGRectMake(0.f, 0.f, 280.f, 44.f);
             } 
             completion:^(BOOL finished) {

             }]; 
```

[在这里查看选项](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/c/tdef/UIViewAnimationOptions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:38:04.970

我认为这对您很有用，只需查看下面的演示链接...

[https://github.com/ipup/PPRevealSideViewController?_tmc=UFw1P_Ai9brJd4WEpSlPbNrXBWOvsYZ6gNPi_derQik](https://github.com/ipup/PPRevealSideViewController?_tmc=UFw1P_Ai9brJd4WEpSlPbNrXBWOvsYZ6gNPi_derQik)

我希望这对你有帮助.. :)

编辑...

```
[UIView animateWithDuration:0.5
                          delay:4.0
                        options: UIViewAnimationOptionTransitionCrossDissolve
                     animations:nil
                     completion:^{
                         view.frame = CGRectMake(0.f, 0.f, 200.f, 100.f);}]; 
```

不确定，但试试这个，并使用不同的动画，如“UIViewAnimationOptionTransitionCrossDissolve”等....希望这对你有帮助....

# javascript - javascript登录表单提交

> ID：12037406
> 
> 赞同：0
> 
> 时间：2012-08-20T12:11:28.477
> 
> 标签：javascript, magento, logging, form-submit, worldpay

在我维护/开发的几个网站中，我们使用 worldpay 作为支付网关。我们有些人遇到了奇怪的问题。所以我尝试记录一些东西，但我实现的日志记录并不能很好地工作。

用户遇到的问题是他们应该被重定向到 worldpay 网站，因此 magento 插件会生成一个带有隐藏字段的简单表单。然后在页面加载事件中提交表单。表单操作 url 设置为 worldpay url。因此，它基本上是一个将订单信息发送到 worldpay 的发布请求。

现在对于某些人来说，这种情况每天都会发生，worldpay 网关永远不会加载。他们被困在一个带有隐藏表单的页面上，上面写着请等待我们重定向您。我们让人们在实际被重定向之前等待几分钟。

每当用户在表单上花费超过 3 秒时，我决定开始记录该表单中的各种内容。所以我转向 javascript 这就是我所做的：

```
<body onload="javascript:document.worldpay_checkout.submit()"> 
```

然后我有这些行

```
function timerFunction(){
    var dataObj = {};
    for (var i = document.worldpay_checkout.elements.length - 1; i >= 0; i--){
        dataObj[document.worldpay_checkout.elements[i].name] = document.worldpay_checkout.elements[i].value;
    }
    dataObj["BrowserCodeName="] = navigator.appCodeName;
    dataObj["BrowserName="] = navigator.appName;
    dataObj["BrowserVersion="] = navigator.appVersion;
    dataObj["CookiesEnabled="] = navigator.cookieEnabled;
    dataObj["Platform="] = navigator.platform;
    dataObj["UserAgentHeader="] = navigator.userAgent;
    $.post("/worldpaylog/worldpaylog.php", dataObj, function(data) {
        document.worldpay_checkout.submit();
        intervalId = self.setInterval('timerFunction()',5000);
    });
    self.clearInterval(intervalId); 
}
var intervalId = self.setInterval('timerFunction()',3000); 
```

我尝试做的是获取表单元素和一些浏览器信息，并在超过 3 秒后通过发出 ajax 发布请求将其记录在服务器上。然后我重新提交表格。对我来说这看起来很简单，但仍然有很多人。没有进入 worldpay 并且没有被脚本记录的人。可能是在某些浏览器上，javascript 在提交表单后不可靠吗？在浏览器开始期待新的页面加载或其他任何事情之前。

此外，还有一个缩小的 jquery 框架，其中仅包含 ajax 函数在该页面上工作所需的组件。出于绝望，我在 github 上找到了它，认为我之前写的内容不适用于所有浏览器。但这都是一样的。

有人对我应该在这里做什么有任何提示吗？也许对记录这些数据的不同方法有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:43:00.177

错误的最可能原因是有一个杀死脚本的 JavaScript 错误，因此您没有重定向和日志记录。当心 jQuery ajax 请求错误被吞并没有问题，并确保您检查您的代码在尽可能多的浏览器中工作。

您可以通过使用 window.onerror 注册事件处理程序来临时尝试记录页面上抛出的错误。并非所有浏览器都支持此事件或将触发所有错误，但如果您无法通过自己的测试自行识别这些错误，它会为您在客户端上探测 JavaScript 错误提供一个起点。

# java - 为现有 Java 应用程序创建模拟环境

> ID：12037407
> 
> 赞同：1
> 
> 时间：2012-08-20T12:11:29.343
> 
> 标签：java, unit-testing, mocking

我有这个需要测试的 java 应用程序。问题是应用程序被设计为在特定环境中运行。即在特定位置包含各种文件和脚本的 linux 机器（java 应用程序使用 Runtime 类运行）。

我想做的是为运行时和系统类创建一个模拟类。但我不想将此代码添加到实际应用程序中，也不想应用程序选择在运行时以哪种模式运行。

我宁愿让应用程序以这种不同的模式**编译**......可能类似于 C 中的 ifdef。我还认为 AspectJ 作为一种可能的解决方案......

我在正确的轨道上吗？我错过了一些基本的东西吗？

谢谢！

# paypal - 在线接受付款并存储信用卡信息

> ID：12037412
> 
> 赞同：0
> 
> 时间：2012-08-20T12:12:06.180
> 
> 标签：paypal, e-commerce, credit-card

我们是一家英国企业，希望在我们的网站上接受信用卡/借记卡付款。我们的选择是：

*   贝宝
*   SagePay
*   （也许）WorldPay

我们需要在支付网关的服务器上存储用户的信用卡信息（当然，不是在我们的，而是在我们的），以便用户可以拿起“已保存”的卡进行快速结帐（就像亚马逊一样）。

SagePay 为此提供了一个“令牌系统”——基本上，企业（如我们）存储令牌作为存储在 SagePay 的 PCI/DSS 兼容服务器上的卡信息的“别名”。但是，这个系统要求我们获得一个商家帐户，从而符合 PCI 标准。

**我们希望使用 PayPal 接受付款，但能够在他们的服务器上存储信用卡号，并在我们的服务器上存储信用卡的链接/令牌/别名**

可能吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:00:18.373

借助 SagePay，“储蓄信用卡”可以通过令牌系统实现。

您的客户进行第一次付款，您将卡详细信息发送给 sage 并在令牌上交换此详细信息，之后，您使用此令牌代替信用卡。

几个月前，我们在我们的网站上实施了这一点，用于定期付款和一键式付款，到目前为止一切运作良好

欲了解更多信息，请查看[http://www.sagepay.com/token-system](http://www.sagepay.com/token-system)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:27:21.493

我发现 PayPal 有“定期付款”，与 PayPal Website Payments Pro / Express Checkout 一起，可以与称为“参考交易”的东西一起使用，让您使用“令牌”跟踪信用卡（存储在 PayPal 的服务器上）。

[https://www.x.com/devzone/articles/recurring-payments-reference-transactions-and-preapproved-payments](https://www.x.com/devzone/articles/recurring-payments-reference-transactions-and-preapproved-payments)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:16:26.017

PayPal 提供 API 和沙箱

[https://developer.paypal.com/](https://developer.paypal.com/)

作为他们 API 的一部分，您可以链接令牌 - 尽管您必须进行一些编程。他们提供了很多支持：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference)

附带说明一下，用户喜欢看到 PayPal 徽标，它具有超强的辨识度，并为用户提供了这种想法。

# objective-c - 从数组中修剪一个nsstring？不仅仅是空格

> ID：12037414
> 
> 赞同：0
> 
> 时间：2012-08-20T12:12:10.137
> 
> 标签：objective-c, nsstring, nsarray

我有一个包含这些元素的数组

```
 deviceType = iOS,
    email = "test@test.se",
    lastname = Testsson,
    name = Testar,
    password = 1943B8B39CA8DF2919FAFF021E0ACA98,
    picture = <74657374 40746573 742e7365>,
    timeCreated = "2012-07-17 13:32:36 +0000",
    timeUpdated = "1999-11-30 00:00:00 +0000",
    userID = 13, 
```

我想删除等号之前的所有内容并将其存储在一个新数组中。有没有一种快速而好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:19:04.123

像这样的东西怎么样：

```
NSMutableArray * keys = [NSMutableArray array];
for (NSString * element in yourAarray) {
    NSArray * components = [element componentsSeparatedByString: @" = "];
    [keys addObject: components[0]]
} 
```

# iphone - 在后台将数据插入到sqlite数据库的表中

> ID：12037417
> 
> 赞同：0
> 
> 时间：2012-08-20T12:12:19.477
> 
> 标签：iphone

我需要在后台在表中插入数据。我`NSTimer`用于在 sqlite 数据库的表中插入数据。但是它在插入过程中冻结了应用程序。我也使用过`NSThread`，但它也产生了同样的问题。我正在共享我正在使用的代码：

```
[NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(InsertDataInTable) userInfo:nil repeats:NO];

-(void)InsertDataInTempTable
{
        DatabaseManager *objDb=[[DatabaseManager alloc]init];
        [objDb setDelegate:self];
        for(int i=0;i<[arrayTempTableData count];i++)
        {
            [objDb savedata:[dictCurrentUrlInfo objectForKey:TempTableName] elements:[arrayTempTableData objectAtIndex:i]];
        }
}

#pragma mark -
#pragma mark Save Operation

-(void)savedata:(NSString *)into elements:(NSMutableDictionary *)dictInsert{
        NSString *sql_String = @"";
        if([into isEqualToString:TABLEFirstAidTemp])
        {
            sql_String = [NSString stringWithFormat:@"INSERT INTO %@ VALUES('%@', '%@', '%@')", into,[dictInsert objectForKey:@"ArticleNumber"],[dictInsert objectForKey:@"ArticleTitle"],[dictInsert objectForKey:@"ArticleCategory"]];
        }
        sqlite3_exec(sql_Database1, [sql_String UTF8String], nil, nil, nil);
} 
```

请为我提供一个适当的解决方案来摆脱这个问题。我想在后台执行在表中插入数据。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:13:00.013

解决方案是使用 NSThread。也许你执行错了。

您的代码将如下所示

```
-(void)InsertDataInTempTable
{
       [NSThread detachNewThreadSelector:@selector(InsertingData) toTarget:self withObject:nil];
}

-(void)InsertingData
{
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        DatabaseManager *objDb=[[DatabaseManager alloc]init];
        [objDb setDelegate:self];
        for(int i=0;i<[arrayTempTableData count];i++)
        {
            [objDb savedata:[dictCurrentUrlInfo objectForKey:TempTableName] elements:[arrayTempTableData objectAtIndex:i]];
        }
        [pool release];
}

#pragma mark -
#pragma mark Save Operation

-(void)savedata:(NSString *)into elements:(NSMutableDictionary *)dictInsert{
        NSString *sql_String = @"";
        if([into isEqualToString:TABLEFirstAidTemp])
        {
            sql_String = [NSString stringWithFormat:@"INSERT INTO %@ VALUES('%@', '%@', '%@')", into,[dictInsert objectForKey:@"ArticleNumber"],[dictInsert objectForKey:@"ArticleTitle"],[dictInsert objectForKey:@"ArticleCategory"]];
        }
        sqlite3_exec(sql_Database1, [sql_String UTF8String], nil, nil, nil);
} 
```

# sql - 循环中的 Oracle SQL SELECT

> ID：12037418
> 
> 赞同：0
> 
> 时间：2012-08-20T12:12:30.817
> 
> 标签：sql, oracle, variables, loops, for-loop

希迪霍，

我有一堆来自电表的数据。它的值在一整年中每小时计算一次。现在我想让它们每个月都添加和显示。这样我就得到了一张从 1 月到 12 月的表格及其汇总的能源信息。日期类型是`"DD.MM.YYYY HH24"`。

我可以遍历数据并在每个月的额外表格中显示吗？

在伪代码中它应该看起来像这样：

```
For x in 1..12 loop
  SELECT energie, time FROM tbl_energie
  WHERE time  LIKE '%.0' + x + '.12%'     --(01.x.2012)
end loop; 
```

感谢您的帮助 - 菲普斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:29:56.447

它有点笨重，在高性能代码中效果不佳，但是像这样的东西怎么样：

```
select sum(energie), time
from (
  select energie, to_char(time, 'MM.YYYY') as time
  from tbl_energie
)
group by time
order by time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:18:49.583

由于您的时间存储为字符串，因此您有两种选择：进行字符串操作或转换为日期/时间。

让我们将其作为字符串操作：

```
select substr(time, 4, 7), sum(energie)
from tbl_energie
group by substring(time, 4, 7)
order by 1 
```

我建议您在相信结果之前还验证您每小时都有仪表读数。

# backbone.js - 在 tinymce 编辑器中从 onchange_callback 访问主干模型

> ID：12037420
> 
> 赞同：3
> 
> 时间：2012-08-20T12:12:35.423
> 
> 标签：backbone.js, tinymce, backbone-events, backbone-views

我正在使用带有主干视图的 tinymce 编辑器。对于其他表单字段，我将更改事件绑定到一个函数，该函数使模型与表单的更改保持同步：

```
events: {
        "change input":  "synchModel",
        "change textarea":  "synchModel",
        "change select":  "synchModel"                                              
    } 
```

问题是 tinymce 编辑器有效地替换了它绑定到的底层文本区域，因此在更新编辑器内容时不会触发任何更改事件。为了尝试以与上述类似的方式解决此问题，我将另一个函数绑定到 tinymce 更改事件：

```
$(el).find('.wysiwyg').tinymce({
            // Location of TinyMCE script
            script_url : 'tiny_mce.js',
            theme : "simple",
            onchange_callback : "synchModelWysiwyg"
        }); 
```

我 synchModelWysiwyg 我尝试使用 this 表示法从主干视图访问模型，即使在绑定之后也不成功：

```
 this.model.set(name, value); 
```

我什至尝试将方法添加到视图中的 bindAll ：

```
_.bindAll(this, 'render', 'synchModelWysiwyg') 
```

无论如何，似乎因为tinymce正在触发synchModelWysiwyg方法而不是主干，所以“this”并没有像我想要的那样被绑定。

关于如何在 synchModelWysiwyg 方法中处理视图的“this”的任何建议？

我的回退是在保存时收集所有所见即所得的值，但我试图避免这种情况以保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:28.360

我假设您的代码示例在视图的`render`方法中。如果是，那么我建议将变量设置为视图的上下文，并在`onchange_callback`函数中使用该变量。

这是一些示例代码：

```
// set the view's context to the self variable
var self = this;
$(el).find('.wysiwyg').tinymce({
  // Location of TinyMCE script
  script_url : 'tiny_mce.js',
  theme : "simple",
  onchange_callback : function(args) {
    // self references the view
    self.synchModelWysiwyg(args)
  }
}); 
```

# c# - 如何使用 LINQ 添加两条记录？

> ID：12037426
> 
> 赞同：1
> 
> 时间：2012-08-20T12:13:05.050
> 
> 标签：c#, .net, linq, list, record

我需要帮助解决我遇到的问题。我有一个包含多个字段的列表，包括合同、分期付款和金额。

当然，我需要根据这些字段创建一个新列表，包括所有其他字段。

因此，对于每份分两期付款的合同，我需要将金额合计到第一期，同时保留第二期。

你有一个下面的例子。

这可能吗？

```
...contract    instalment    amount ...
...1           1             100    ... 
...1           2             1000   ...
...2           1             100    ...
...3           1             1000   ...
...4           1             200    ...
...4           2             100    ...
...5           1             1000   ...

...contract    instalment    amount ...
...1           1             1100   ... 
...1           2             1000   ...
...2           1             100    ...
...3           1             1000   ...
...4           1             300    ...
...4           2             100    ...
...5           1             1000   ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:37:47.343

我想你想要：

```
var result = from record in records
             group record by record.Contract into contractGroup
             let orderedGroup = contractGroup.OrderBy(r => r.Instalment).ToList()
             let aggregatedItem = new Record 
                                  {
                                      Contract = contractGroup.Key,
                                      Instalment = orderedGroup.First().Instalment,
                                      Amount = orderedGroup.Sum(r => r.Amount) 
                                  }
             from resultRecord in new[] { aggregatedItem }
                                        .Concat(orderedGroup.Skip(1))              
             select resultRecord; 
```

请注意，在您的示例中，您仅处理组包含一个或两个项目的情况，但上述代码也适用于一个组中的三个或更多项目，方法是聚合所有其他项目中的第一个项目。

**编辑**：

由于您想*改变*每个组中的第一条记录而不是创建新记录，我会这样做：

```
foreach(var contractGroup in records.GroupBy(record => record.Contract))
{
     // Use Aggregate or a dedicated MinBy operator
     // if you don't want the sorting overhead.
     var aggregateItem = contractGroup.OrderBy(record => record.Instalment)
                                      .First();     

     aggregateItem.Amount = contractGroup.Sum(record => record.Amount);  
}

// Now use 'records' as before as the subsequent data-source. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:47:56.787

您可以通过下面的简单 LINQ 获得结果：

```
var output = input.GroupBy(record => record.Contract)
            .SelectMany(group =>
                {
                    group.First().Amount = group.Sum(r => r.Amount);
                    return group;
                })
            .ToList(); 
```

# objective-c - Obj-C 错误“ARC 不允许将 Int 隐式转换为 Collection *

> ID：12037428
> 
> 赞同：1
> 
> 时间：2012-08-20T12:13:09.943
> 
> 标签：objective-c, ios5, int, automatic-ref-counting, fmdb

```
- (void)saveCollectionMoment:(NSArray *)collectionMoments
{
    for (NSDictionary *momentData in collectionMoments) {

        int mID = [[momentData objectForKey:@"mID"] intValue];

        FMDBDataAccess *db = [[FMDBDataAccess alloc] init];
        [db insertMoment:mID toCollection: cID];
    }
} 
```

上面应该采用从 JSON 返回提供的 id 并使用 FMDB 使用 mID 和 cID 更新 SQLite 数据库表，但我得到的只是以下错误。

> ARC 不允许将“int”隐式转换为“Moment *”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:18:00.417

问题是`insertMoment:toCollection:`期望一个`Moment*`对象作为它的第一个参数，而你试图传递一个整数 ID。

您应该将代码更改为 let`insertMoment:toCollection:`接受一个整数`MomentID`作为其第一个参数，或者在调用该方法之前`Moment*`通过其获取 a 。`MomentID``insertMoment:toCollection:`

# c# - IEnumerable > vs 字典

> ID：12037437
> 
> 赞同：1
> 
> 时间：2012-08-20T12:13:55.940
> 
> 标签：c#, ienumerable, idictionary

我有个问题。我最近将其中一个更改`IDictionary`为`IEnumerable<KeyValuePair>`. 这样做是因为不应修改此项目集合。正如我所看到的，这些是相同的，但 IEnumerable 没有实现添加、删除等，这使得这对我和我使用这个集合的领域来说是完美的。

```
public IDictionary<string, UserInformation> MyItems;
public IEnumerable<KeyValuePair<string, UserInformation>> MyItems; 
```

现在回答我的问题。

*   如果我不想修改集合，这是最聪明的方法吗？
*   有没有更聪明的方法来做到这一点？
*   我这样做是不是很傻？

我之前发现过类似的帖子，但没有一个真正解释使用什么以及为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:17:33.800

最重要的问题是 an`IDictionary`旨在用于高效查找。如果您*真的*只想表示一系列对，那么您的方法是可以的-但`KeyValuePair`除非关系在语义上确实是键/值，否则我不会使用...在这种情况下，我真的只会使用字典。

当然，您不必*公开*字典 - 您可以公开*仅*获取键值的方法（并且可能还公开键序列和值序列）。

或者，您当然可以创建一个只读实现——[这个答案中](https://stackoverflow.com/a/1269311/22656)`IDictionary<,>`有一个示例实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:17:37.930

我会说你可以用一个方法把你*包装*到某个类中。像这样的东西：`IDictionary<string, UserInformation>``Get(...)`

```
public class DictionaryWrapper
{
   private IDictionary<string, UserInformation> _dict = .... // dictionary is PRIVATE!

   public UserInformation GetUserInfo(string key)    // method is PUBLIC
   {
      UserInformation ui;
      _dict.TryGetValue(key, out ui);
      return ui;
   }
} 
```

这样你：

*   限制对 的访问`Dictionary`，对其公共成员也是如此。
*   继续受益于字典提供的**O(1) 访问速度**，当您使用它时会丢失`IEnumerable<..>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:25:14.673

根据你的问题，

1.  IEnumerable 是一种巧妙的方式，可以暗示这是一个无法修改的集合。
2.  将返回类型更改为此有许多缺点，
    1.  `IEnumnerable<KeyValuePair<string, UserInformation>>`可以有重复的键。 `IDictionary`不能
    2.  虽然集合表示如果实现为字典意味着您拥有所有索引/存储桶等......，调用者不知道这一点。如果他们需要索引事物，他们可以创建自己的字典。

# xcode - 如何通过 Cmake 找到 iOS/mac OS X 框架

> ID：12037440
> 
> 赞同：2
> 
> 时间：2012-08-20T12:14:16.607
> 
> 标签：xcode, boost, cmake

**语境**

[我通过这个脚本](https://github.com/davidandreoletti/boostoniphone-generic)将 Boost C++ 库打包成一个框架（适用于 iOS）。该脚本生成**boost.framework**。当链接到“手工制作”的 Xcode 项目以构建 iOS 应用程序时，该框架可以正常工作。

**问题**

我有另一个需要 boost.framework 的 Xcode 项目（用于构建 iOS 应用程序）。该项目使用 CMake 生成 Xcode 项目，然后编译 iOS 应用程序。CMake 确实支持框架，但是，我无法通过我的自定义 FindBoostFramework.cmake 文件获得 Cmake 识别的 boost.framework。

仅供参考：CMake 的内置 FindBoost.cmake 没有找到 boost 框架。我的 boost.framework 不位于标准位置（例如 /System/Library/Framework ），而是位于“/Users/Me/Dev/boost.framework”行的某个位置。

有谁知道让 CmMke 找到这个框架？

环境：操作系统：10.8 Xcode：4.4 Cmake 2.8.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:18:27.577

事实证明 CMAKE_FRAMEWORK_PATH 不包含包含所寻求框架的目录路径。

# facebook - 请解释 FQL 配置文件表 pic_crop

> ID：12037446
> 
> 赞同：0
> 
> 时间：2012-08-20T12:14:41.510
> 
> 标签：facebook, facebook-fql, profile

当与头像相关时，查询 pic_crop 返回的坐标是什么意思。我试过解决这个问题，但无法弄清楚！

请帮忙！

left、top、right 和 bottom 的值是小数，例如 left 0.20115。0.20115 是什么意思？如果您查看 facebook 个人资料的源代码，您会看到 facebook 使用百分比来抵消个人资料照片。0.20115 如何转换为 facebook 的 style="left:-23.13%;" 来源

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:59:47.457

从我朋友的个人资料中看几个例子，`pic_crop`左、右、上、下的数字似乎是图片总宽度的百分比。例如，我的个人资料图片返回以下值：

```
 "width": 180, 
    "height": 161, 
    "left": 0.11466, 
    "top": 0.06897, 
    "right": 0.88534, 
    "bottom": 0.93103 
```

检查 Facebook 时间线，个人资料图片显示为 160 像素的正方形。Facebook 不会裁剪照片以显示它，而是将其缩放以适合 160 像素方形窗口后面的裁剪区域，然后将照片放置在该窗口下方以显示裁剪后的照片。

top: 0.6897 和 bottom: 0.93103 的“top”和“bottom”值似乎等同于“没有垂直裁剪”。我可以在我的照片和其他几位朋友的照片上看到这一点。因此，0.93193 - 0.06897 = 0.86206 表示使用了照片高度的 100%。（当没有水平裁剪时，相同的值适用于左右。）

我的照片上有一个水平裁剪。对于我照片上的左右数字，公式似乎是：（右-左）÷（0.93103-0.06897）。对于我的照片，这可以达到 0.89400。所以，160 × 180 / 161 = 179px × 0.89400 = 160px。我在其他一些朋友的照片上试过这个，这很有效。用“top - bottom”替换“right - left”似乎也适用于垂直裁剪的照片。

在我的 Facebook 时间线上，我的封面照片 img 标签的样式为`left:-5.93%;`. 我有相同数量的左右裁剪，所以这应该是一边 9.5px。9.5 / 160 = 5.93%。

我还没有解开不对称作物的缩放比例。

当 Facebook 让您像这样轻松时，一定会喜欢它！

**更新**

只需阅读今晚的[开发者博客文章](http://developers.facebook.com/blog/post/2012/08/22/platform-updates--operation-developer-love/)，还有另一种获取裁剪的个人资料照片的方法：`profile_pic`表格。

```
SELECT url, real_width, real_height FROM profile_pic
WHERE id = me()
  AND width=160
  AND height=160 
```

返回`url`的个人资料照片根据您指定的比例缩放，`width`并且`height`或多或少地根据个人资料所有者的意图进行裁剪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T12:20:32.483

[https://developers.facebook.com/docs/reference/fql/profile/](https://developers.facebook.com/docs/reference/fql/profile/)：

> pic_crop：一个对象，包含： uri：被查询对象的最大方形头像的 URL。width, height：这张图片的像素尺寸。**左、上、右、下：用户为此头像选择裁剪的像素坐标。**

现在那可能还不清楚呢？

# silverlight - 如何翻译 Silverlight DataGrid 中的单元格值？

> ID：12037448
> 
> 赞同：0
> 
> 时间：2012-08-20T12:14:47.543
> 
> 标签：silverlight

请推荐如何在`DataGrid`不更改数据库的情况下翻译 Silverlight 中的单元格值的任何最佳方法。

即单元格 Nombre 的内容“FullName”应该在

英文：全名

西班牙语：Nombre Completo 等。

谢谢！

![在此处输入图像描述](../Images/e88abe1fb3175cbe2b8028d98bca8c80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:54:23.270

尝试使用绑定转换器并在您的数据库中使用所有具有 unicode 功能的原始类型用于已经存在的数据库，您必须自己转换它

# email - 执行后通过邮件发送 .pdf maven 报告

> ID：12037454
> 
> 赞同：1
> 
> 时间：2012-08-20T12:15:33.170
> 
> 标签：email, maven, report, maven-3, maven-pdf-plugin

我想以 pdf 的形式通过邮件发送我的 Maven 报告。我遇到了两个插件：1-> maven-pdf-plugin 2-> maven-postman-plugin

但我无法配置它们。好像`maven-pdf-plugin V-1.1`不兼容`maven 3.0.4`。有人可以帮我吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:59:13.797

这是我的配置，我不记得 maven 3（至少 3.0.4）有什么问题。我正在使用 ：

*   Maven 3.0.4
*   maven-pdf-插件：1.1
*   行家站点：3.0

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
<build>
    <extensions>
        <!-- Enabling the use of FTP -->
        <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-ftp</artifactId>
            <version>2.2</version>
        </extension>
    </extensions>

    <plugins>
        <!-- Génération d'un PDF à l'identique du site maven -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pdf-plugin</artifactId>
            <executions>
                <execution>
                    <id>pdf</id>
                    <phase>site</phase>
                    <goals>
                        <goal>pdf</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.reporting.outputDirectory}</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <!-- Gestion des plugins pour ce projet et ses sous modules -->
    <pluginManagement>
        <plugins>
            <!-- Indication de compilation sur la version de Java à utiliser -->
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${maven.compiler.source}</source>
                    <target>${maven.compiler.target}</target>
                </configuration>
            </plugin>

            <!-- Gestion du tagage des releases -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.2.2</version>
                <configuration>
                    <tagBase>http://svn.xxx.fr.sopra/corprepo/svn/myproject/repository/tags/</tagBase>
                    <scmCommentPrefix>[DEV#GCL]</scmCommentPrefix>
                </configuration>
            </plugin>

            <!-- Gestion de la fabrication du site maven -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <locales>fr</locales>
                    <outputEncoding>UTF-8</outputEncoding>
                </configuration>
            </plugin>
            <!-- Génération d'un PDF à l'identique du site maven -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pdf-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <id>pdf</id>
                        <phase>site</phase>
                        <goals>
                            <goal>pdf</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.reporting.outputDirectory}</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>

    </pluginManagement>
</build>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- - - - - - - - - - - - - - Reporting & GCL - - - - - - - - - - - - - -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.8.1</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <configuration>
                <configLocation>/src/main/config/checkstyle-sopra.xml</configLocation>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-report-plugin</artifactId>
            <version>2.12</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <version>2.7.1</version>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jxr-plugin</artifactId>
            <version>2.3</version>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-project-info-reports-plugin</artifactId>
            <version>2.4</version>
            <reportSets>
                <reportSet>
                    <reports>
                        <report>summary</report>
                        <report>modules</report>
                        <report>project-team</report>
                        <report>mailing-list</report>
                        <report>cim</report>
                        <report>issue-tracking</report>
                        <report>license</report>
                        <report>scm</report>
                    </reports>
                </reportSet>
            </reportSets>
        </plugin>
    </plugins>
</reporting> 
```

还有我的 src/main/pdf.xml

```
<document xmlns="http://maven.apache.org/DOCUMENT/1.0.1"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/DOCUMENT/1.0.1 http://maven.apache.org/xsd/document-1.0.1.xsd"
outputName="${project.artifactId}">

     <meta>
      <title>Maven PDF Plugin</title>
      <author>The Apache Maven Project</author>
 </meta>

 <toc name="Table of Contents">
      <item name="Introduction" ref="index.apt"/>

 </toc>

 <cover>
      <coverTitle>${project.name}</coverTitle>
      <coverSubTitle>v. ${project.version}</coverSubTitle>
      <coverType>User Guide</coverType>
      <projectName>${project.name}</projectName>
      <projectLogo>images/logo_myorg.png</projectLogo>
      <companyName>${project.organization.name}</companyName>
      <companyLogo>images/logo_myorg.png</companyLogo>
 </cover> 
```

我会尽快试一试。

你的流程哪里出错了？仅在创建 pdf 时，还是在发送电子邮件时？

# php - “丢失与 MySQL 服务器的连接”错误，但实际发生后 1 小时？

> ID：12037457
> 
> 赞同：2
> 
> 时间：2012-08-20T12:15:50.660
> 
> 标签：php, mysql, timeout

在我们平台的高负载期间，我们开始在日志中看到来自 MySQL 的一些错误。这些错误的奇怪之处在于它们在实际发生后恰好 1 小时（3600 秒）出现在日志中。

例如，前几天我们进行了负载测试，在上午 8.30 左右，我们遇到了瓶颈，事情开始超时。整整 1 小时后的上午 9.30，我们开始在日志中看到以下行，

```
... Zend_Db_Adapter_Mysqli_Exception [0] Lost connection to MySQL server at 'reading initial communication packet', system error: 104 ... 
```

我一直在尝试为 PHP`mysqli`或`libmysql`与此相关的超时设置，但我正在努力寻找一个可以解释我们的问题的设置。

有任何想法吗？

我最接近的是[`mysqlnd.net_read_timeout`](http://dev.mysql.com/doc/refman/5.0/en/apis-php-mysqlnd.config.html#apis-php-mysqlnd.net-read-timeout)，虽然还没有到 1 年，但提到了 TCP/IP 超时，在进一步谷歌搜索后，我得到了[TCP session timeout](http://www.ipv4security.com/packet_flow/tcp_timeout.txt)，默认情况下似乎是 3600。然而，我非常清楚我可能在这里走错了路。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:31:03.747

你在使用Mysql的主从复制吗？

如果你的主人宕机又回来，奴隶不会立即得到通知。它会一直等待同一连接，直到达到默认为 1 小时（3600 秒）的超时。超时后，它将重新连接新连接，从而记录导致的错误。

# ruby-on-rails - ActiveRecord 模型的 JSON 视图

> ID：12037462
> 
> 赞同：1
> 
> 时间：2012-08-20T12:16:13.420
> 
> 标签：ruby-on-rails, json, web-services, activerecord, models

我想构建一个使用 JSON 外部化资源的 RESTful WebService。我目前面临的问题是如何构建模型的剥离版本，以便我可以为客户提供简化的界面而无需提供不需要的信息。我能想到的最好方法是为我感兴趣的每个模型定义一个方法，以构建这个简化的外观对象。有没有更好的设计模式呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:39:41.890

我建议查看[https://github.com/josevalim/active_model_serializers](https://github.com/josevalim/active_model_serializers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:21:13.157

您可以尝试 [rabl](http://railscasts.com/episodes/322-rabl)或[jbuilder](http://railscasts.com/episodes/320-jbuilder)。

# java - 转换为从不同类加载器加载的类时发生 CastCastException

> ID：12037469
> 
> 赞同：2
> 
> 时间：2012-08-20T12:16:46.353
> 
> 标签：java, groovy, classloader

我编写了一个库，它的 API 方法之一`Class`作为参数，然后在这个方法的主体中创建这个类的一个实例：

```
void foo(Class scriptClass) {
  Script script = scriptClass.newInstance();
  // do stuff with the script object
} 
```

问题是 while是我得到`scriptClass`的类的子类，因为它是由不同的类加载器加载的，而不是. 解决此类冲突的常用方法是什么？`Script``ClassCastException``scriptClass``Script`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:45:20.313

*除非类相同*，否则不能强制转换，它是相同的 Class 实例，因此由相同的类加载器加载。

**通用类加载器**

使用已有的类加载器，`groovy.Script`因此当任何子类加载器使用此类时，它就是公共类。

当您使用 时，请`URLClassLoader`使用此构造函数：`URLClassLoader(URL[] urls, ClassLoader parent)`使脚本使用现有的类。

**其他类加载器**

如果上述方法不可行，您可以使用反射（因为 JRE 类很常见）。但请记住，这是很多样板代码，应保持在最低限度。

所以底线是*检查你的类加载器结构并尝试将常见的东西放在常见的地方*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:46:03.103

目前尚不清楚您的“scriptClass”是否正是“Script”或它的子类。如果是后者，那么您基本上只需要在加载“scriptClass”之前确保 JVM 加载了“Script”。如果“脚本”尚未加载，您的“奇数”类加载器将自行加载它，从而产生您的问题。如果它已经被加载，则在这两种情况下都将使用已经加载的（由系统类加载器）版本。

# jquery - ipad 方向纵向显示电子邮件或触发横向

> ID：12037470
> 
> 赞同：1
> 
> 时间：2012-08-20T12:16:55.573
> 
> 标签：jquery, ipad, landscape, landscape-portrait

我正在尝试推动用户使用 ipad 切换视图。正确的视图应该是横向。

最好的方法是什么？

一个消息？附加一些 html 并隐藏肖像内容？

**使用的jQuery**

```
 if (window.orientation === 0) {

               window.addEventListener('orientationchange', callback, false);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:19:56.600

你可以：

1.  赶上`orientationchange`事件`window`
2.  根据方向使用不同的样式表

例如

```
<link rel="stylesheet" media="all and (orientation:portrait)" href="portrait.css">
<link rel="stylesheet" media="all and (orientation:landscape)" href="landscape.css"> 

<script>
    window.addEventListener('orientationchange', callback, false);
</script> 
```

# android - 如何对从 Android 中的 QR 码阅读器读取的内容采取行动？

> ID：12037472
> 
> 赞同：0
> 
> 时间：2012-08-20T12:16:58.087
> 
> 标签：android, qr-code

在这里，我使用 XZing 项目库开发了一个 QR 码阅读器应用程序。它读取二维码并获取内容。但我对阅读内容采取了行动。我用设备读取 QR 码并获得网页 URL，现在我在 Android 中打开该网页 URL 网页，如果我读取电话号码，它会在 Android 中调用该号码。

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:00:13.450

你试过什么？

你会得到这样的回复

```
if (resultCode == RESULT_OK) {
    String contents = data.getStringExtra("SCAN_RESULT"); //this is the result
} 
```

然后，您将内容作为字符串。

如果它是一个 URL，你可以这样做在浏览器中打开它

```
Intent in = new Intent(Intent.ACTION_VIEW);
in.setData(Uri.parse(url));
startActivity(in); 
```

# json - 使用 XML 和 JSON Content-Type 对 RESTful API 进行版本控制

> ID：12037476
> 
> 赞同：14
> 
> 时间：2012-08-20T12:17:15.887
> 
> 标签：json, rest, content-type, http-1.1, hateoas

根据[这个关于设计 RESTful 接口的优秀演示文稿](https://speakerdeck.com/u/dzuelke/p/designing-http-interfaces-and-restful-web-services-sfliveparis2012-2012-06-08)，实现版本控制的首选方法是利用 Accept-header，使用类似的东西：

```
GET /products HTTP/1.1
Host: example.com
Accept: application/vnd.com.myservice.v2+xml 
```

这对 XML Content-Types 非常有效，但是**可以使用相同的方案对 JSON 等效项进行版本控制**？

即，是否可以要求：

```
GET /products HTTP/1.1
Host: example.com
Accept: application/vnd.com.myservice.v2+json 
```

响应将类似于：

```
HTTP/1.1 200 OK
Content-Type: application/vnd.com.myservice.v2+xml; charset=UTF-8
Allow: GET, POST

<?xml version="1.0" encoding="utf-8"?>
<products xmlns="urn:com.example.products" 
          xmlns:xl="http://www.w3.org/1999/xlink">
  <product id="1234" xl:type="simple" 
           xl:href="http://example.com/products/1234">
    <name>Red Stapler</name>
    <price currency="EUR">3.14</price>
    <availability>false</availability>
  </product>
</products> 
```

和 JSON 等价物（有点）：

```
HTTP/1.1 200 OK
Content-Type: application/vnd.com.myservice.v2+json; charset=UTF-8
Allow: GET, POST

[
  {
    id: "1234",
    links: [
      {
        rel: "self",
        href: "http://example.com/products/1234"
      }
    ],
    name: "Red Stapler",
    price: {
      currency: "EUR",
      value: 3.14
    },
    availability: false
  }
] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T12:24:22.417

您可以通过在**内容类型**中添加版本来实现版本控制：

```
application/vnd.acme.user-v1+xml 
```

或者您也可以在`Accept`标题中使用限定符，这样您就不会触及您的内容类型：

```
application/vnd.acme.user+xml;v=1 
```

您可以将内容类型`application/vnd.acme.user+xml`分为两部分：第一部分 ( `application/vnd.acme.user`) 描述媒体类型，第二部分 ( ) 描述`xml`响应格式。这意味着您可以使用另一种格式，例如`json`: `application/vnd.acme.user+json`。

在 HATEOAS 世界中，XML 在可读性和语义方面比 JSON 更好，如果你想使用 JSON，你可能会对这个规范感兴趣：[https](https://github.com/kevinswiber/siren) ://github.com/kevinswiber/siren 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T13:51:53.490

我知道的最干净的方法是使用配置文件。有一个 IETF RFC ( [RFC 6381](http://www.rfc-editor.org/rfc/rfc6381.txt "RFC 6381") )。

使用接受标头，指明您期望的响应类型。您仍然可以使用限定符。您可以要求遵守一个或多个以逗号分隔的配置文件，但如果您指定多个配置文件，则必须使用引号。

**接受：**应用程序/json；profile="http://profiles.acme.com/user/v/1"

使用 content-type 标头，服务器可以做出类似的响应：

**内容类型：**应用程序/json；profile="http://profiles.acme.com/user/v/1"

# c# - 选择其字段之间差异最小的项目

> ID：12037477
> 
> 赞同：1
> 
> 时间：2012-08-20T12:17:19.613
> 
> 标签：c#, lambda

我有一个项目清单。我必须选择两个属性之间差异最小的项目。

例如：Student { string Name, int ScoredMarks, int TotalMarks } 注意：所有学生的总分不会相同。我必须选择 TotalMarks 和 ScoredMarks 差异最小的学生。我能够这样做

```
int minDiff = students.Min(x => (x.TotalMarks - x.ScoredMarks));
var result = from s in students
             where s.TotalMarks - s.ScoredMarks == minDiff
             select s; 
```

我可以在一个声明中实现它吗？这样做会有什么表现？这将是乐观的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:19:49.460

您可以使用`Math.Abs`获得绝对差异，按它排序并取第一个。

```
Student minDiff = students
        .OrderBy(x => Math.Abs(x.TotalMarks - x.ScoredMarks))
        .FirstOrDefault();
if(minDiff != null)
{
     // ...
} 
```

如果你想要最好的性能，你应该使用`MinBy`Skeets [MoreLinq](http://code.google.com/p/morelinq/source/browse/MoreLinq/MinBy.cs)。我的方法需要先按价值对**所有**项目进行排序，然后才能采用差异最小的项目。

> 如果我必须选择所有具有最小差异的学生，即如果我有多个具有相同最小差异的学生怎么办。

然后你可以使用`GroupBy`：

```
var minDiffGroup = students
            .GroupBy(x => Math.Abs(x.TotalMarks - x.ScoredMarks))
            .OrderBy(g => g.Key)
            .FirstOrDefault();
foreach(Student student in minDiffGroup)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:20:25.663

尝试这个：

```
Student TheOne = StudentList.OrderBy<Student, int>(x => x.TotalMarks - x.ScoredMarks).First<Student>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:21:06.023

我认为您可以将两者结合起来。

```
var result = from s in students
             where s.TotalMarks - s.ScoredMarks == students.Min(x => (x.TotalMarks - x.ScoredMarks))
             select s; 
```

不过需要注意的是，这取决于您要查询的内容，这决定了这是一个“更好”的解决方案性能。如果是 linq-to-objects，则每次都运行 student.Min(...)，这是一个更差的性能。如果是Entity Framework，则将整个lambda转换为SQL，这是一个更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:51:29.900

[MoreLinq](http://code.google.com/p/morelinq/)具有 MinBy 和 MaxBy 函数：

为了进一步简化这一点，我建议向您的学生对象添加一个属性

```
public int PriorTotalMarks { get { return this.TotalMarks - this.ScoredMarks; } } 
```

附加属性可以绑定到数据网格、聚合等。没有额外的减法复杂性。

然后，使用 Jon Skeet 的 MinBy，您只需编写：

```
Students.MinBy(s => s.PriorTotalMarks); 
```

# css - H1 额外的空格

> ID：12037480
> 
> 赞同：2
> 
> 时间：2012-08-20T12:17:23.920
> 
> 标签：css, whitespace

我的测试服务器上有一个 php 文件，它输出以下内容： ![在此处输入图像描述](../Images/1d59319b092425ae269a4f9ad8992dfd.png)

页面上有一些额外的空白区域，由红色框突出显示。开发工具视图： ![在此处输入图像描述](../Images/f235ce268a0c57cb834fdec19df4a253.png) 额外的空白在开发工具中突出显示。输出的文件： ![在此处输入图像描述](../Images/585cc3f55bf0880acc234f288d3e7a9e.png) 如您所见，所有文件都在一行上。

代码：

```
<?php
    header("Content-Type: text/html; charset=utf-8");
    if(!isset($_GET['action']))
    {
        $_GET['action'] = "home";
    }

echo("<!DOCTYPE HTML>");
    echo("<html>");
        echo("<head>");
            echo("<title>Bug Tracker -  ");
            echo($_GET['action']);
            echo("</title>");
            echo('<link rel="stylesheet" href="common.css" />');
        echo("</head>");
        echo('<body>');
            require("action.php"); 
        echo("</body>");
    echo("</html>")
?> 
```

这也发生在 Firefox 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:22:29.823

`<h1>`标签通常有一个默认边距。尝试`h1 { margin:0 }`在您的 CSS 中设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:22:04.383

我相信 h1 标签始终具有顶部和底部边距，这就是您看到空白的原因。如果您在 h1 中添加一个 margin-top: 0 ，那么它将删除上面的空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T04:13:00.317

在我的 CSS 中，将 h1 边距设置为 0 为我修复了它。

CSS：

```
h1 {
    margin:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:23:14.657

你需要更清楚你想要什么。

浏览器中的空白很可能是由于 action.php 中有空白。空白只是因为 php 将 HTML（或类似的）打印到浏览器而创建。请记住，PHP 在服务器端运行，因此浏览器实际上并不下载 php 文件，它只读取 HTML。

检查（或向我们展示）您的 action.php 文件

也试试

```
echo "<h1 style='vertical-align:text-top;'>Bug tracker home page</h1>"; 
```

~ 丹

# php - 使用 jquery 访问索引对象的 php 数组

> ID：12037482
> 
> 赞同：0
> 
> 时间：2012-08-20T12:17:26.010
> 
> 标签：php, jquery

我有一个来自以下类的对象的 php 数组：

```
class my_class {
    public $id;
    public $timestamp;
} 
```

这些存储在索引为 0,1,2 的数组中.....

我通过 Session 变量使用 jquery 获取这个数组，并尝试通过以下方式打印它：

```
var myclass_map = "<?php $_SESSION['myclass_map']?>";
$.each(myclass_map, function(key, value) {
    console.log(key + ' ' + value["id"]);
}); 
```

和

```
var track_map = "<?php $_SESSION['myclass_map']?>";
$.each(myclass_map, function(key, value) {
    console.log(key + ' ' + value.id);
}); 
```

但是在打印出密钥时，两者都给了我一个未定义的值引用。如何访问对象变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:22:37.967

在您的 JS 脚本的最开始，使用 json_encode 打印转换为 js 格式的数组。

```
var track_map = <?=json_encode($map)?>; 
```

# tridion - 我如何在页面/组件上找到适度的评论数量

> ID：12037487
> 
> 赞同：3
> 
> 时间：2012-08-20T12:17:47.273
> 
> 标签：tridion, ugc

我从项目统计字段的 numberOfComments 中获取评论数值，但它返回评论总数。

任何人都可以帮助我，我如何才能在 UGC 中找到只有适度数量的评论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:47:02.233

AFAIK 目前无法直接找到它，但您可能只允许审核评论，然后将它们视为

```
 <ugc:ForEachComment runat="server">
    <% HttpContext.Current.Items["Count"] = Convert.ToInt32(HttpContext.Current.Items["Count"]) + 1; %>
            </ugc:ForEachComment> 
```

希望它会帮助你。

# java - 无法使用修饰符“public final”访问 java.util.HashMap$Entry

> ID：12037489
> 
> 赞同：15
> 
> 时间：2012-08-20T12:17:58.287
> 
> 标签：java, glassfish, hashmap

我的问题是，我的应用程序在 Tomcat 服务器上本地运行良好，但在安装 glassfish 的服务器上抛出错误。整个问题是我在 JSTL 中遍历 HashMap。服务器抛出如下堆栈：

```
Servlet.service() for servlet jsp threw exception java.lang.IllegalAccessException:
Class javax.el.BeanELResolver can not access a member of class java.util.HashMap$Entry with modifiers "public final" 
at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95) 
at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:261) 
at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:253) 
```

问题是由代码引起的：

```
<c:forEach items="${element.getPreparedParameters()}" var="parametr" varStatus="j">
    documents["${i.index}"]["param"]=new Array();
    documents["${i.index}"]["param"]["key"] = "${parametr.getKey()}";
    documents["${i.index}"]["param"]["value"] = "${parametr.getValue()}";
</c:forEach> 
```

在哪里`element.getPreparedParameters()`返回`HashMap`。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T13:06:00.117

查看这个针对 Java 1.2（已在[Java 11](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8046171)中修复）向 Sun 报告的[几十年前的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4207233)。我记得之前看到过这个错误，并且该消息具有误导性：问题不在于方法修饰符，而在于拥有类的修饰符。即，是一个公共接口，但其中的实现类是私有的。即使您正在访问实现公共接口的方法，反射也不允许您访问该类的方法。`Map.Entry``HashMap`

我建议寻找一个便宜的解决方法：不要遍历`entrySet`，而是遍历`keySet`and 使用`map.get(key)`而不是`entry.getValue()`.

替代方法是更新到 Java 11 或更高版本。

# jquery - saveRow 成功后 jqgrid 没有重新加载

> ID：12037491
> 
> 赞同：0
> 
> 时间：2012-08-20T12:18:03.890
> 
> 标签：jquery, jqgrid

我正在尝试向我的 jqgrid 添加一个新行，允许用户进行内联编辑，通过单击“保存”按钮保存它，然后使用添加的数据自动重新加载网格。

我的问题是过程的重新加载部分：

jqgrid 声明：

```
jQuery("#gridMsg").jqGrid({
        url: '@Url.Content("~\\MessagesAndDeliveryInfo\\GetMessageAndDeliveryForDecisionImplementation\\")' + '?decisionImplementationId=' + '@Model.DecisionImplementationId',
        datatype: "json",
        contenttype: "application/json; charset=utf-8",
        mytype: "GET",
        editurl: '@Url.Content("~\\MessagesAndDeliveryInfo\\SaveExistingMessage\\")',
        colNames: ['Msg No.', 'Date', 'Delivery Mode', 'Delivery Number', 'Confirmation Mode', 'Confirmation Date', 'IsVoucherCreated', 'Id'],
        colModel: [
                { name: 'MessageNumber', index: 'MessageNumber', width: 90 },
                { name: 'ProjectionDate', index: 'ProjectionDate', width: 90 },
                { name: 'DeliveryMode', index: 'DeliveryMode', width: 140, editable: true, edittype: "select", editoptions: { value: '@Model.DeliveryModeSelectOptions' }, formatter: showTextFmatter, unformat: unformatShowText },
                { name: 'DeliveryNumber', index: 'DeliveryNumber', width: 150, editable: true, edittype: "text" },
                { name: 'DeliveryConfirmationMode', index: 'DeliveryConfirmationMode', width: 110, align: "right", editable: true, edittype: "select", editoptions: { value: '@Model.DeliveryConfirmationModeSelectOptions' }, formatter: showTextFmatter, unformat: unformatShowText },
                { name: 'LegalDeliveryDate', index: 'LegalDeliveryDate', width: 90, align: "right", editable: true },
                { name: 'IsVoucherCreated', index: 'IsVoucherCreated', width: 90, align: "right", editable: false, hidden: true },
                { name: 'IdForSendMailService', index: 'IdForSendMailService', width: 90, align: "right", editable: false, hidden: true },

            ],

        rowNum: 10,
        rowList: [10, 20, 30],
        pager: '#pagerMsg',
        direction: "rtl",
        viewrecords: true,
        caption: "Messages",
        onSelectRow: function (id) {

            if (id && id != lastsel2) {
                jQuery('#gridMsg').jqGrid('restoreRow', lastsel2, function (response) { debugger; });
                jQuery('#gridMsg').jqGrid('editRow', id, true);
                lastsel2 = id;
            }
        },

        jsonReader: {

            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            cell: "cell",
            id: "id",
            userdata: "userdata"
        },
        loadError: function (jqXHR, textStatus, errorThrown) {
            debugger;
        }

    });
    jQuery("#gridMsg").jqGrid('navGrid', '#pagerMsg', { edit: false, add: false, del: false }); 
```

添加和编辑行代码：

```
 function AddRowToGrid()
{
    rowId = 99;
    var mydata = [
                    { MessageNumber: rowId, ProjectionDate: '@DateTime.Now.ToShortDateString()', DeliveryMode: '@Model.OPTIONS_DEFAULT_VALUE', DeliveryNumber: "", DeliveryConfirmationMode: '@Model.OPTIONS_DEFAULT_VALUE', LegalDeliveryDate: "", IsVoucherCreated: false, IdForSendMailService: null }
                 ]; 

    //add row
    for (var i = 0; i <= mydata.length; i++)
         jQuery("#gridMsg").jqGrid('addRowData', rowId, mydata[i]);

    //edit added row
    jQuery("#gridMsg").jqGrid('editRow', rowId,
    {
        keys: true,
        oneditfunc: function () {
                    //debugger;//alert("edited");
            }
    });

} 
```

保存行代码：

```
 function SaveNewRow(rowId)
{

        var saveparameters = {
            "successfunc": null,
            "url": '@Url.Content("~\\MessagesAndDeliveryInfo\\SaveNewMessage\\")',
            "extraparam": { decisionImpId: '@Model.DecisionImplementationId' },
            "aftersavefunc": reload,
            "errorfunc": function (rowId, result, postedData) { alert(result.responseText); restoreRow(rowId); },
            "afterrestorefunc": null,
            "restoreAfterError": true,
            "mtype": "POST"
        }

        jQuery("#gridMsg").jqGrid('saveRow',rowId,  saveparameters); 
```

}

```
 function reload(rowid, result) {  $("#gridMsg").trigger("reloadGrid"); } 
```

上面的代码在重新加载网格之前工作正常：即使新行保存在服务器中并且调用了 aftersavefunc：网格没有重新加载并且添加的行保持可编辑模式。只有当我在导航栏中手动单击重新加载网格时，网格才会重新加载，然后我才能看到新行。

希望有人可以帮助我，非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:32:26.743

我找到了导致问题的原因！

我在 colModel 中有两个带有 edittype='select' 的可编辑列，这些列从 url 接收数字代码，并使用 formatter 和 unformat (of colModel) 来显示合适的文本。

格式化函数是：

```
 function showTextFmatter(cellvalue, options, rowObject) {

    var vts = {};
    if (options.colModel.editoptions.values == undefined) {
        vtStr = options.colModel.editoptions.value.split(';');
        for (var i = 0; i < vtStr.length; i++) {
            kv = vtStr[i].split(':'); vts[kv[0]] = vtStr[i];
        }
        options.colModel.editoptions.values = vts;
    }

    if (options.colModel.editoptions.values[cellvalue] != "" && options.colModel.editoptions.values[cellvalue] != undefined)
        return options.colModel.editoptions.values[cellvalue].split(':')[1];
    return cellvalue;
}

function unformatShowText(cellvalue, options) {

    return cellvalue.split(':')[0]; 
} 
```

问题出在第一个函数中：在编辑行并从 select 中选择一个选项后，文本作为 cellValue 输入而不是数字值传递给 showTextFmatter 函数，并且在行中引发了错误：

```
return options.colModel.editoptions.values[cellvalue].split(':')[1]; 
```

此错误导致重新加载\恢复失败！

我只是在有问题的行之前添加了一个条件：

```
&& options.colModel.editoptions.values[cellvalue] != undefined 
```

问题就解决了。

# macos - ImportError：没有名为 BIO 的模块

> ID：12037492
> 
> 赞同：0
> 
> 时间：2012-08-20T12:18:08.083
> 
> 标签：macos, importerror, biopython

我是编程新手，Python 也是如此。随后，我有一个我不知道如何解决的问题。

我正在使用旨在与 BioPython 一起使用的脚本在 Mac OS 上工作。我认为经过大量工作后，我终于正确安装了 BioPython，在尝试了很多次安装 NumPY 之后，但是当我尝试运行我的脚本时，我收到了这个错误：

```
ImportError: No module named Bio 
```

我的脚本是这样开始的：

```
#!/usr/bin/python
from Bio import SeqIO
secuencias=SeqIO.parse("/Users/imac/Documents/Gradiente
glaciares/Secuencias/Rocas/Rocas_Pia/Roca_Pia0.fna", "fasta") 
```

我也尝试过先插入：

```
sys.path.insert(0, "//Users//imac//Desktop//BioPython") 
```

使脚本从其他目录读取，但后来我有：

```
NameError: name 'sys' is not defined 
```

最后我尝试从 Python 路径导入 Bio 模块，我没有问题，所以我认为模块会正确安装。

我能做些什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T20:26:31.140

这将失败：

```
sys.path.insert(0, "//Users//imac//Desktop//BioPython") 
```

和：

```
NameError: name 'sys' is not defined 
```

除非你先这样做：

```
import sys 
```

Python 试图告诉你名称 'sys' 没有定义，因为在这种情况下它是一个库，原因是你没有告诉 Python 导入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:27:25.457

尝试在 Mac OS X 上重新安装 Bio：

下载[这个](http://bcc.bx.psu.edu/courses/_downloads/Bio.zip)。然后解压缩并将名为 Bio 的文件夹移动到：

```
Macintosh HD/Frameworks/Python Framework/Versions/6.2/lib/python2.6/site-packages 
```

比尝试再次运行脚本。

# vba - Excel ADODB VBA 错误消息“不是有效密码”

> ID：12037493
> 
> 赞同：4
> 
> 时间：2012-08-20T12:18:20.010
> 
> 标签：vba, ms-access-2010

我正在尝试通过 Excel VBA 打开与受密码保护的 AccessDB 的连接。

我正在使用以下连接字符串

```
conn.Provider = "Microsoft.ACE.OLEDB.12.0"
conn.ConnectionString = "Data Source=dbPath; Jet OLEDB:Database Password=pwd;" 
```

其中 dbPath 是 accdb/mdb 文件的路径，pwd 是 dbfile 的密码。密码绝对正确，但我总是收到错误“不是有效密码”。有人可以指导我吗？-斯里兰卡。

附加信息：我正在使用 office 2010 并将此数据库保存为 mdb(2003) 文件（我也尝试使用 accdb extn 保存此文件）。当我尝试为数据库设置密码时，它显示消息“**使用块密码加密与行级锁定不兼容。行级锁定将被忽略**。” 它与VBA中的错误消息有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T14:17:59.060

在 Access 2010 中，数据库密码的加密方法已更改，并且 ADO 提供程序的“Jet OLEDB:Database Password”关键字似乎不适用于新方法。在这里，我必须删除密码，进入访问->文件->选项->客户端设置->高级并选中“使用旧版加密”，然后重新创建密码。

不知道ACE提供者是否有新的OLE DB连接字符串关键字或者使用ADO.NET时是否也会出现这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:10:42.503

或者你可以这样做。

```
 conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & dbPath & ";Jet OLEDB:Database Password=" & pwd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-12T09:57:55.670

请如下使用

conStr = "Provider=Microsoft.ACE.OLEDB.16.0;Data Source=C:\Users\csub1\Desktop\empdata.xlsx;Persist Security Info=False;Jet OLEDB:Database Password=pass@123;Extended Properties='Excel 12.0;HDR=Yes;';Jet OLEDB:系统数据库=C:\Users\csub1\AppData\Roaming\Microsoft\Access\System.mdw"

请找到 System.mdw 文件并在 System Database 下提供。提供密码时请使用 Jet OLEDB:Database Password。

经过大量研究，它奏效了。

# python - 曲线拟合 zipf 分布 matplotlib python

> ID：12037494
> 
> 赞同：3
> 
> 时间：2012-08-20T12:18:21.020
> 
> 标签：python, matplotlib, zipf

我试图用 Python **F~x^(-a) 中的 Zipf 分布 PDF 拟合以下图（红点）**。我只是简单地选择`a=0.56`并绘制`y = x^(-0.56)`了，我得到了如下所示的曲线。

曲线显然是错误的。我不知道如何进行曲线拟合。

![在此处输入图像描述](../Images/c7034bc83bdbc31adb80b128750dfb21.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T12:59:34.230

不确定您到底在寻找什么，但如果您想将模型（函数）拟合到数据中，请使用`scipy.optimize.curve_fit`：

```
from scipy.optimize import curve_fit
from scipy.special import zetac

def f(x, a):
    return (x**-a)/zetac(a)

result = curve_fit(f, x, y, p0=[0.56])
p = result[0]

print p 
```

如果您不信任规范化，请添加第二个参数`b`并对其进行拟合。

# apache - 用于本地开发的 Apache 单一动态虚拟主机配置

> ID：12037498
> 
> 赞同：3
> 
> 时间：2012-08-20T12:19:00.180
> 
> 标签：apache, generics, dynamic, configuration, virtualhost

我正在本地笔记本电脑（ubuntu 12.04）上配置我的开发环境，并且遇到了一些问题来实现我想要的，我是 apache 配置的初学者。

我创建了一个主项目目录，并且我想根据我的文件夹层次结构为我的所有项目设置一个**动态虚拟主机。**

这是我使用的文件夹层次结构：

*   主项目目录（包含所有项目）：
    *   客户1
        *   项目1
            *   公共（项目根目录）
        *   项目2
            *   上市
        *   更多项目...
    *   客户2
        *   项目1
            *   上市
    *   更多客户...

要访问一个项目，我使用以下网址：customer1.project1.dev、customer1.project2.dev、customer2.project1.dev ...这个：/home/user/mainprojectdirectory/%1/%2/public 所以我开始尝试这个基础：

```
<VirtualHost *.dev>
DocumentRoot    /home/user/mainprojectdirectory/%1/%2/public
ServerName  %1.%2.dev
</VirtualHost> 
```

但我不能让它工作。我走对了吗？我应该遵循哪些步骤来实现我想要的？我应该编辑哪个文件？欢迎所有建议！（记住我是 apache 配置的初学者）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:24:36.433

我做的！

首先，我们需要启用两个 mod：mod_vhost_alias 和 mod_rewrite

```
sudo a2enmod vhost_alias
sudo a2enmod rewrite 
```

1] 在 /etc/apache2/sites-available 中创建一个新的虚拟主机，我将它命名为 zzz-dev

```
<VirtualHost *:80>

#All requests ending with .dev will use this virtualhost
ServerName dev
ServerAlias *.dev

# Get server name of header Host:
UseCanonicalName Off

# Interpret the request url to find the right project folder. Ex: For customer1.project1.dev, %1 is the first part (here: customer1), %2 the second part (here: project1), so the folder for this url is /home/victor/takative/projets/customer1/project1/public
VirtualDocumentRoot /home/user/mainprojectdirectory/%1/%2/public

# Fix for missing $SERVER['DOCUMENT_ROOT'] while using VirtualDocumentRoot, the setDocumentRoot.php file will be added autmatically to set the variable
php_admin_value auto_prepend_file /home/lib/utils/setDocumentRoot.php

RewriteEngine On
RewriteOptions Inherit 

<DirectoryMatch "/home/user/mainprojectdirectory/.*">
    IndexOptions +FancyIndexing NameWidth=*
    Options Includes FollowSymLinks Indexes
    AllowOverride All
    Order allow,deny
    Allow from all
</DirectoryMatch>

</VirtualHost> 
```

以下是 setDocumentroot.php 的内容：

```
<?php
$_SERVER['DOCUMENT_ROOT'] = str_replace($_SERVER['SCRIPT_NAME'], '',$_SERVER['SCRIPT_FILENAME']);
?> 
```

2]启用新的虚拟主机：

```
sudo a2ensite zzz-dev 
```

3]重新加载apache：

```
sudo service apache2 reload 
```

4]现在，要创建一个项目，您只需按照上面的文件夹层次结构并使用以下行编辑 /etc/hosts 文件：

```
127.0.0.1 customer1.project1.dev 
```

希望能帮助到你。如果有人有改进此配置的建议，我很乐意。谢谢

# javascript - Javascript 上传按钮问题，适用于 Wordpress

> ID：12037504
> 
> 赞同：1
> 
> 时间：2012-08-20T12:19:25.947
> 
> 标签：javascript, jquery, wordpress, slide

我正在开发一个 WordPress 主题，主题选项页面包含一个无限幻灯片生成器，每张幻灯片包含几个字段和一个上传按钮，用于将图像上传到每张幻灯片。问题是上传按钮不起作用。如您所见，上传按钮有 class="image_upload_button"

```
function pixy_admin_head() { 
$data = get_option(OPTIONS); ?>
<script type="text/javascript" language="javascript">

    jQuery.noConflict();
    jQuery(document).ready(function($) {

    //AJAX Upload
        $('.image_upload_button').each(function() {
        var clickedObject = $(this);
        var clickedID = $(this).attr('id');     
        var nonce = $('#security').val();

        new AjaxUpload(clickedID, {
            action: ajaxurl,
            name: clickedID, // File upload name
            data: { // Additional data to send
                action: 'pixy_ajax_post_action',
                type: 'upload',
                security: nonce,
                data: clickedID },
            autoSubmit: true, // Submit file after selection
            responseType: false,
            onChange: function(file, extension) {},
            onSubmit: function(file, extension) {
                clickedObject.text('Uploading'); // change button text, when user selects file  
                this.disable(); // If you want to allow uploading only 1 file at time, you can disable upload button
                interval = window.setInterval(function() {
                    var text = clickedObject.text();
                    if (text.length < 13) { clickedObject.text(text + '.'); }
                    else { clickedObject.text('Uploading'); } 
                    }, 200);
            },
            onComplete: function(file, response) {
                window.clearInterval(interval);
                clickedObject.text('Upload Image'); 
                this.enable(); // enable upload button

                // If nonce fails
                if(response==-1) {
                    var fail_popup = $('#pixy-popup-fail');
                    fail_popup.fadeIn();
                    window.setTimeout(function() {
                    fail_popup.fadeOut();                        
                    }, 2000);
                }

                // If there was an error
                else if(response.search('Upload Error') > -1) {
                    var buildReturn = '<span class="upload-error">' + response + '</span>';
                    $(".upload-error").remove();
                    clickedObject.parent().after(buildReturn);

                    }

                else {
                    var buildReturn = '<img class="hide pixy-option-image" id="image_'+clickedID+'" src="'+response+'" alt="" />';

                    $(".upload-error").remove();
                    $("#image_" + clickedID).remove();  
                    clickedObject.parent().after(buildReturn);
                    $('img#image_'+clickedID).fadeIn();
                    clickedObject.next('span').fadeIn();
                    clickedObject.parent().prev('input').val(response);
                }
            }
        });

        });

        });         

            //Add new slide
$(".slide_add_button").live('click', function(){        
    var slidesContainer = $(this).prev();
    var sliderId = slidesContainer.attr('id');
    var sliderInt = $('#'+sliderId).attr('rel');

    var numArr = $('#'+sliderId +' li').find('.order').map(function() { 
        var str = this.id; 
        str = str.replace(/\D/g,'');
        str = parseFloat(str);
        return str;         
    }).get();

    var maxNum = Math.max.apply(Math, numArr);
    if (maxNum < 1 ) { maxNum = 0};
    var newNum = maxNum + 1;

    var newSlide = '<li class="temphide"><div class="slide_header"><strong>Slide ' + newNum + '</strong><input type="hidden" class="slide pixy-input order" name="' + sliderId + '[' + newNum + '][order]" id="' + sliderId + '_slide_order-' + newNum + '" value="' + newNum + '"><a class="slide_edit_button" href="#">Edit</a></div><div class="slide_body" style="display: none; "><label>Slide Type</label><div class="slide pixy-checkbox"><input class="slide pixy-radio pixy-slider-type" name="' + sliderId + '[' + newNum + '][type]" type="radio" value="html"><div>HTML Slide</div><input class="slide pixy-radio pixy-slider-type" name="' + sliderId + '[' + newNum + '][type]"  type="radio" value="video"><div>Video/ Image Wide Slide</div></div><label>Slide Title</label><input class="slide pixy-input pixy-slider-title" name="' + sliderId + '[' + newNum + '][title]" id="' + sliderId + '_' + newNum + '_slide_title" value=""><label>Slide Description</label><input class="slide pixy-input" name="' + sliderId + '[' + newNum + '][desc]" id="' + sliderId + '_' + newNum + '_slide_desc" value=""><label>Add Slide Background Image. Enter URL or Upload.</label><input class="slide pixy-input" name="' + sliderId + '[' + newNum + '][url]" id="' + sliderId + '_' + newNum + '_slide_url" value="" /><div class="upload_button_div"><span class="button image_upload_button" id="' + sliderId + '_' + newNum + '">Upload</span><span class="button image_reset_button hide" id="reset_' + sliderId + '_' + newNum + '" title="' + sliderId + '_' + newNum + '">Remove</span></div><div class="screenshot"></div><label>Slide Content</label><textarea class="slide pixy-input" name="' + sliderId + '[' + newNum + '][content]" id="' + sliderId + '_' + newNum + '_slide_content" cols="8" rows="8"></textarea><a class="slide_delete_button" href="#">Delete</a><div class="clear"></div></div></li>';

    slidesContainer.append(newSlide);
    $('.temphide').fadeIn('fast', function() {
        $(this).removeClass('temphide');
    });

    return false;
}); 

    }); //end doc ready 
```

当我使用“添加新幻灯片”按钮 class="slide_add_button" 生成幻灯片时，它是由 jQuery 生成的（*参见上面的“var newSlide”和上传按钮 class="image_upload_button"），如果我保存选项我刷新了页面，它重新生成了一个有效的 PHP 代码。

PHP代码：

```
 public static function optionsframework_slider_function($id,$std,$oldorder,$order,$int){
        $data = get_option(OPTIONS);

        $slider = '';
        $slide = array();
        $slide = $data[$id];

        if (isset($slide[$oldorder])) { $val = $slide[$oldorder]; } else {$val = $std;}
        //initialize all vars
        $slidevars = array('type', 'title', 'desc', 'url', 'content');
        foreach ($slidevars as $slidevar) {
            if (!isset($val[$slidevar])) {
                $val[$slidevar] = '';
            }
        }
        //begin slider interface    
        if (!empty($val['title'])) {
            $slider .= '<li><div class="slide_header"><strong>'.stripslashes($val['title']).'</strong>';
        } else {
            $slider .= '<li><div class="slide_header"><strong>Slide '.$order.'</strong>';
        }
        $slider .= '<input type="hidden" class="slide pixy-input order" name="'. $id .'['.$order.'][order]" id="'. $id.'_'.$order .'_slide_order" value="'.$order.'" />';
        $slider .= '<a class="slide_edit_button" href="#">Edit</a></div>';
        $slider .= '<div class="slide_body">';
        $slider .= '<label>Slide Type</label>';
        $slider .= '<div class="slide pixy-checkbox">';
        $slider .= '<input class="slide pixy-radio pixy-slider-type" name="'. $id .'['.$order.'][type]"  type="radio" value="html"';
        if($val['type'] == 'html'){ $slider .= 'checked="checked">'; } else { $slider .= '>'; }
        $slider .= '<div>HTML Slide</div>';
        $slider .= '<input class="slide pixy-radio pixy-slider-type" name="'. $id .'['.$order.'][type]" type="radio" value="video"';
        if($val['type'] == 'video'){ $slider .= 'checked="checked">'; } else { $slider .= '>'; }       
        $slider .= '<div>Video/ Image Wide Slide</div>';
        $slider .= '</div>';
        $slider .= '<label>Slide Title</label>';
        $slider .= '<input class="slide pixy-input pixy-slider-title" name="'. $id .'['.$order.'][title]" id="'. $id .'_'.$order .'_slide_title" value="'. stripslashes($val['title']) .'" />';
        $slider .= '<label>Slide Description</label>';
        $slider .= '<input class="slide pixy-input" name="'. $id .'['.$order.'][desc]" id="'. $id .'_'.$order .'_slide_desc" value="'. $val['desc'] .'" />';

        $slider .= '<label>Add Slide Background Image. Enter URL or Upload.</label>';
        $slider .= '<input class="slide pixy-input" name="'. $id .'['.$order.'][url]" id="'. $id .'_'.$order .'_slide_url" value="'. $val['url'] .'" />';
        $slider .= '<div class="upload_button_div"><span class="button image_upload_button" id="'.$id.'_'.$order .'">Upload</span>';
        if(!empty($val['url'])) {$hide = '';} else { $hide = 'hide';}
        $slider .= '<span class="button image_reset_button '. $hide.'" id="reset_'. $id .'_'.$order .'" title="' . $id . '_'.$order .'">Remove</span>';
        $slider .='</div>' . "\n";
        $slider .= '<div class="screenshot">';
        if(!empty($val['url'])){
            $slider .= '<a class="pixy-uploaded-image" href="'. $val['url'] . '">';
            $slider .= '<img class="pixy-option-image" id="image_'.$id.'_'.$order .'" src="'.$val['url'].'" alt="" />';
            $slider .= '</a>';
            }
        $slider .= '</div>';

        $slider .= '<label>Slide Content</label>';
        $slider .= '<textarea class="slide pixy-input" name="'. $id .'['.$order.'][content]" id="'. $id .'_'.$order .'_slide_content" cols="8" rows="8">'.stripslashes($val['content']).'</textarea>';
        $slider .= '<a class="slide_delete_button" href="#">Delete</a>';
        $slider .= '<div class="clear"></div>' . "\n";
        $slider .= '</div>';
        $slider .= '</li>';

        return $slider;
    }
}// End Class 
```

基本上，我认为应该在“var newSlide”中直接对上传按钮进行修复：

```
<span class="button image_upload_button" id="' + sliderId + '_' + newNum + '">Upload</span> 
```

如果您需要更多信息，请告诉我，我希望有人可以帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:44:10.007

目前尚不清楚您在这里做什么：

```
jQuery(document).ready(function($) {

//AJAX Upload
    $('.image_upload_button').each(function() { 
```

看起来您在加载文档后立即开始上传。假设而不是 $('.image_upload_button').each 应该有 `$('.image_upload_button').live('click', function(){ //upload code here })`

# html - 提交不同的表格

> ID：12037509
> 
> 赞同：1
> 
> 时间：2012-08-20T12:19:37.570
> 
> 标签：html, forms

我有一个带有复选框的表格。我不希望将提交按钮放在复选框附近，而是放在页面底部，中间有很多内容。有没有办法解决这个问题？所以我想我需要的是两张表格，一张提交另一张。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:21:42.730

在 HTML5 中，您可以使用`form="id-of-a-form"`in`<input>`元素使其属于该表单，即使它不是表单的子元素。当然，这在旧浏览器中不起作用，因此您可能需要添加一些 JavaScript 来缓解这些浏览器中的这种行为。

根据您想要做什么，您也可以简单地保持表单标签始终打开，即基本上将您的大部分身体包裹在表单中。这仅在它不会导致嵌套表单时才有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:24:41.670

如果您不反对使用 javascript，只需制作一个按钮并通过它提交表单`document.FormNameHere.submit()`（请参阅[此处](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:21:22.747

您只需要一个包含复选框、提交按钮以及介于两者之间的所有内容的大表单。

# jquery - 任何人都认识这个 Jquery 轮播插件

> ID：12037512
> 
> 赞同：0
> 
> 时间：2012-08-20T12:19:51.423
> 
> 标签：jquery

嗨，有谁知道为骆驼背网站主页上的轮播提供动力的插件的名称（如果有的话）。我一直在查看代码，但找不到使动画这样工作的原因。以为我会在这里问，因为有人可能会认出它。

[驼背网站](http://www.camelbak.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:25:45.357

看起来它是一个自定义代码（这对于像他们这样的大型网站很有意义）。您可以从第 139 行开始研究他们的小部件： [http ://www.camelbak.com/designs/camelbak/js/scripts.js](http://www.camelbak.com/designs/camelbak/js/scripts.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:24:36.847

这个网站有一些类似的。[http://www.webdesignshock.com/jquery-slideshow/](http://www.webdesignshock.com/jquery-slideshow/)

# git - sh 脚本：使用条件，git post-update 脚本

> ID：12037513
> 
> 赞同：2
> 
> 时间：2012-08-20T12:19:53.163
> 
> 标签：git, sh, conditional

我正在为 git 存储库编写更新后脚本，但遇到了一些麻烦。

无论出于何种原因， if 语句都会引发错误：

```
hooks/post-update: line 5: [master: command not found 
```

我只是想检查一下推送的分支是否等于“master”。我猜我的语法有问题，这是我的第一个 sh 脚本，但我尝试了几种变体，但都没有运气。

谢谢你的帮助，

```
#!/bin/sh

BRANCH=$(git rev-parse --symbolic --abbrev-ref $1)

if ["$BRANCH" = "master"]
then
    cd $HOME/domain.com || exit
else
    cd $HOME/dev.domain.com || exit
fi

unset GIT_DIR
git pull hub $BRANCH
git checkout $BRANCH
exec git-update-server-info 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:51:16.640

方括号必须是单独的标记！你看，它试图看起来像很好的语法，但事实是，有一个（在大多数 shell 中内置）命令`[`。所以语法应该是：

```
if [ "$BRANCH" = "master" ]
    ^                    ^
    +--------------------+-- There have to be spaces here! 
```

没有第一个空格，命令就变成了`[master`，这样的命令不存在——命令是`[`. 如果没有第二个空格，正确的参数将`master]`不会匹配（并且`[`会因“缺少`]`参数”错误而失败。

* * *

详细说明：

shell`if`语法尽量简单。真的是

> `if` *命令* `than` *命令* [`else` *命令*]`fi`

其中每个*命令*必须以分号或行尾结束。所以你可以写像

```
if grep -q foo somewhere
then
    whatever
fi 
```

Now in many cases you need to do things like compare strings, compare numbers, test whether file exists, test whether one file is newer than another etc. For this there is a standard command `test` (which is built-in in most shells, but external version always exists). It allows things like

```
test "$foo" == "bar"
test -n "$this_variable_must_be_nonempty"
test -f "$this_file_should_exist" 
```

This is what you use in if. For sake of nicer syntax, this command has alias `[` which accepts exactly the same arguments, except it requires `]` as it's last argument so the condition looks pretty. This is also built-in in most shells, but usually exists as symlink to `test` too. So don't be fooled by what looks like special syntax; it is simple program invocation.

# c++ - 在类中创建函数的问题

> ID：12037517
> 
> 赞同：0
> 
> 时间：2012-08-20T12:20:05.713
> 
> 标签：c++, class

我正在尝试使用 play() 函数设置一个新类。我不确定我做错了什么，因为我有其他以类似方式实现的类，它们工作正常。有人可以指出我可能在哪里犯了错误吗？

.h 文件

```
#ifndef GAME_H
#define GAME_H

#include <string>
using namespace std;

class Game {
public:
Game(); 
void play();
};
#endif 
```

.cpp 文件

```
#include "game.h"

#include <string>
#include <iostream>

using namespace std;

Game::Game() {}

Game::play() {} 
```

我调用 play 函数如下：

```
Game* theGame = new Game();
theGame->play(); 
```

编译时出现以下错误：

```
game.cpp:10: error: ISO C++ forbids declaration of ‘play’ with no type
game.cpp:10: error: prototype for ‘int Game::play()’ does not match any in class ‘Game’
game.h:16: error: candidate is: void Game::play()
game.cpp:10: error: ‘int Game::play()’ cannot be overloaded
game.h:16: error: with ‘void Game::play()’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:22:01.917

第一个错误：

```
Game::play() {} 
```

应该

```
void Game::play() {} 
```

第二个 - 你有`using namespace std;`你的标题。永远不要那样做。不是一个错误，而是不好的做法。

第三 -`#include <string>`尽管您不使用，但您在标头中有`string`，所以它没有用，并且会影响编译时间。

第四 - 你使用`new`:)。请谷歌*智能指针*。这是 C++ 和原始指针的使用应该至少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:22:02.403

您忘记了返回类型：

```
void Game::play() {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T12:22:25.057

```
Game::play() {} 
```

您应该添加 type: void 作为返回类型。

# wpf - 为什么为一个简单的 WPF 应用程序创建了这么多线程

> ID：12037528
> 
> 赞同：0
> 
> 时间：2012-08-20T12:20:58.313
> 
> 标签：wpf, multithreading

> **可能重复：**
> [WPF 应用程序的 19 个线程](https://stackoverflow.com/questions/1484060/19-threads-for-wpf-application)

我刚刚创建了一个最简单的 WPF 应用程序，其中只有一个窗口和网格，内部没有其他内容，没有一行代码。在我的系统上，这个应用程序正在创建 16 个线程。我很想知道为什么 WPF 应用程序会为最简单的任务创建这么多线程？它会产生任何性能问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:24:16.043

我认为这可能是 WPF 积极使用的线程池，线程实际上并没有在积极使用中。

# cuda - 如何将 DirectX 专用于 GPU 并将 CUDA 专用于另一个 GPU？

> ID：12037529
> 
> 赞同：0
> 
> 时间：2012-08-20T12:20:58.533
> 
> 标签：cuda, direct2d, multiple-gpu

在我的应用程序中，GUI 线程使用 Direct2D 显示图像，允许用户平移和缩放，而另一个线程使用 CUDA 进行图像处理。为了防止图形处理线程受到 GUI 线程的干扰并加快处理速度，选择为 CUDA 计算添加单独的图形卡，设置如下：

*   用于显示的 Nvidia Quadro 400（Direct2D，与 PC 一起出售，足以用于显示目的）
*   Nvidia GT640 专门用于 CUDA 计算（专门为 CUDA 计算添加，因为它具有更多内核，因此对于应用程序必须执行的操作更有效，在 BIOS 中禁用显示，不连接屏幕）。CUDA 线程包含使其仅使用此 GT640 的代码。

然而，这并没有像预期的那样工作，因为当用户平移图像，从而导致连续多次更新显示时，CUDA 执行时间从典型的 20 毫秒跳到了大约 800 毫秒。使用 GPUView（我发现它正在调查这个问题并且根本不掌握），我能够看到 CUDA 线程似乎正在等待显示器完成更新，然后再将其命令排队到 GPU。与此同时，Direct2D 让 GPU 大部分时间都处于闲置状态（1ms​​ 的工作对应 16ms 的 VSync 周期）。看起来我对 Direct2D 的调用阻塞了所有 GPU 16 毫秒，然后 GUI 线程让 CUDA 线程饿死（尽管这些线程除了 GPU 访问之外没有以任何方式同步）。

所以问题是：

*   会发生什么？
*   强制 Direct2D 仅在一个特定的 GPU 上执行会有所帮助吗？
*   甚至有可能还是我以错误的方式解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:55:18.753

如果您使用 ID2D1DeviceContext 呈现目标而不是 ID2D1HWndRenderTarget，则在初始化期间，您可以选择要用于 Direct3D 的适配器。

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh780339(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh780339(v=vs.85).aspx)

请参阅 D3D11CreateDevice 或 D3D11CreateDeviceAndSwapChain 的文档。第一个参数指定要使用的适配器。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ff476082(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476082(v=vs.85).aspx)

# php - 在输入字段旁边显示表单验证

> ID：12037538
> 
> 赞同：0
> 
> 时间：2012-08-20T12:21:41.090
> 
> 标签：php, mysql, database, forms, validation

我试图在我的输入字段旁边显示 PHP 跨度错误，但是在第一行操作跨度错误之后，其他输入字段消失..

如何使其他输入字段再次可见，以便错误消息显示在它们旁边？

```
<body ontouchmove="BlockMove(event);">
    <div class="container">

        <div class="st-container">
            <input type="radio" name="radio-set" checked="checked" id="st-control-1" class="menu"/>
            <a href="#st-panel-1">Start</a>
            <input type="radio" name="radio-set" id="st-control-2" class="menu"/>
            <a href="#st-panel-2">Vraag 1</a>
            <input type="radio" name="radio-set" id="st-control-3" class="menu"/>
            <a href="#st-panel-3">Vraag 2</a>
            <input type="radio" name="radio-set" id="st-control-4" class="menu"/>
            <a href="#st-panel-4">De uitdaging</a>

            <div class="st-scroll">

                <section class="st-panel" id="st-panel-1">
                    <div class="st-deco"></div>
                    <div id="position">
                        <div id="contact">
                            <div id="bevestiging">
                                <div id="midden">
                                    <div id="formulierruimte">
                                    <?php
                                        require_once("php/db.php");                 /* Database Class */
                                        require_once('php/utils/is_email.php');     /* Email Validation Script */

                                        /* Handle Ajax Request */
                                        if(isset($_POST['newcontact'])){
                                            $contact = new Contact();
                                            //We'll refer to that later on, to display errors.
                                            //unset($contact);
                                        }
                                        else{
                                            //header('Location: result.php');
                                        }

                                        /* Class Contact */
                                        class Contact{

                                            private $db;                        /* the database obj */

                                            //private $errors         = array();  /* holds error messages */
                                            //we have to init $errors array, as otherwise form will produce errors on missing array entry
                                            private $errors = array(            /* holds error messages */
                                                        'aanhef' => '',
                                                        'bedrijfsnaam' => '',
                                                        'email' => '',
                                                        'telefoon' => '',
                                                        'vraag1_antwoorden' => '',
                                                        'vraag2_antwoorden' => ''
                                                    );

                                            private $num_errors;                /* number of errors in submitted form */

                                            public function __construct(){
                                                $this->db = new DB();
                                                if(isset($_POST['newcontact']))
                                                    $this->processNewMessage();
                                                /* We don't need this anymore
                                                 * 
                                                else
                                                    header('Location: result.php');*/
                                            }

                                            public function processNewMessage(){

                                                $aanhef             = $_POST['aanhef'];         
                                                $contactpersoon     = $_POST['contactpersoon'];     
                                                $bedrijfsnaam       = $_POST['bedrijfsnaam'];
                                                $telefoon           = $_POST['telefoon'];
                                                $email              = $_POST['email'];
                                                $vraag1_antwoorden  = $_POST['vraag1_antwoorden'];
                                                $vraag2_antwoorden  = $_POST['vraag2_antwoorden'];

                                                /* Server Side Data Validation */

                                                /* Aanhef Validation */
                                                if(!$aanhef || mb_strlen($aanhef = trim($aanhef)) == 0)
                                                    $this->setError('aanhef', 'Selecteer uw aanhef');

                                                /* Contactpersoon Validation */
                                                if(!$contactpersoon || mb_strlen($contactpersoon = trim($contactpersoon)) == 0)
                                                    $this->setError('contactpersoon', 'Vul uw contactpersoon in');
                                                else if(mb_strlen(trim($contactpersoon)) > 120)
                                                    $this->setError('contactpersoon', 'Te lang! 120 karakters max.');

                                                /* Bedrijfsnaam Validation */
                                                    if(!$bedrijfsnaam || mb_strlen($bedrijfsnaam = trim($bedrijfsnaam)) == 0)
                                                    $this->setError('bedrijfsnaam', 'Vul uw bedrijfsnaam in');
                                                else if(mb_strlen(trim($bedrijfsnaam)) > 120)
                                                    $this->setError('bedrijfsnaam', 'Te lang! 120 karakters max.');

                                                    /* Telefoon Validation */
                                                    if(!$telefoon || mb_strlen($telefoon = trim($telefoon)) == 0)
                                                    $this->setError('telefoon', 'Vul uw telefoonnummer in');
                                                else if(mb_strlen(trim($telefoon)) > 120)
                                                    $this->setError('telefoon', 'Te lang! 120 karakters max.');

                                                    /* Vraag 1 Validation */
                                                    if(!$vraag1_antwoorden || mb_strlen($vraag1_antwoorden = trim($vraag1_antwoorden)) == 0)
                                                    $this->setError('vraag1_antwoorden', 'Selecteer een antwoord a.u.b.');

                                                    /* Vraag 2 Validation */
                                                    if(!$vraag2_antwoorden || mb_strlen($vraag2_antwoorden = trim($vraag2_antwoorden)) == 0)
                                                    $this->setError('vraag2_antwoorden', 'Selecteer een antwoord a.u.b.');

                                                    /* Email Validation */
                                                if(!$email || mb_strlen($email = trim($email)) == 0)
                                                    $this->setError('email','Vul uw e-mail in');
                                                else{
                                                    if(!is_email($email))
                                                        $this->setError('email', 'Vul een correct email adres in');
                                                    else if(mb_strlen($email) > 120)
                                                        $this->setError('email', 'Te lang! 120 karakters max.');
                                                }

                                                /* No errors, insert in db
                                                else*/
                                                if($this->countErrors() == 0) {
                                                    if(($ret = $this->db->dbNewMessage($aanhef, $contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > 0){
                                                        //$json = array('result'         => 1);
                                                        if(SEND_EMAIL)
                                                            $this->sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);

                                                        //This is for relocating to successful result page
                                                        header('Location: result.php');
                                                    } else {   
                                                        // else
                                                        //    $json = array('result'      => -2); /* something went wrong in database insertion  */

                                                        //This will need special treatment. You have to prepare an errorpage
                                                        //for database-related issues.
                                                        header("Location: database-error.html");
                                                    }

                                                    /*$encoded = json_encode($json);
                                                    echo $encoded;
                                                    unset($encoded);*/
                                                }
                                            }

                                            public function sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden){
                                            /* Just format the email text the way you want ... */
                                            $message_body   = "<div style=\"font-size:12px; font-weight:normal;\">Hallo,<br><br>"
                                                                        ."Het volgende bedrijf heeft zich zojuist aangemeld:</div><br>"
                                                                        ."<table cellpadding=\"1\" cellspacing=\"1\" width=\"550px\"><tr><td style=\"font-size:12px; color:#000000\">Bedrijfsnaam:</td><td style=\"font-size:12px; color:#000000\">".$bedrijfsnaam."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Aanhef:</td><td style=\"font-size:12px; color:#000000\">".$aanhef."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Contactpersoon:</td><td style=\"font-size:12px; color:#000000\">".$contactpersoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Telefoonnummer:</td><td style=\"font-size:12px; color:#000000\">".$telefoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">E-mail:</td><td style=\"font-size:12px; color:#000000\">".$email."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 1:</td><td style=\"font-size:12px; color:#000000\">".$vraag1_antwoorden."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 2:</td><td style=\"font-size:12px; color:#000000\">".$vraag2_antwoorden."</td></tr></table><br>";

                                                // Geef GELDIGE adressen op
                                                // Een korte benaming voor jouw website
                                                $website_naam = 'Aanmelding';
                                                // Jouw eigen geldige emailadres
                                                $eigen_emailadres = 'MAIL';
                                                // Een geldig emailadres voor errors
                                                $error_emailadres = 'MAIL';
                                                // De naam van de verzender
                                                $naam_verzender = ''.$bedrijfsnaam.'';
                                                // Het geldige emailadres van de afzender
                                                $email_verzender = ''.$email.'';
                                                // Een geldig emailadres of helemaal leeg laten
                                                $bcc_emailadres = '';
                                                // HTML mail? True/False
                                                $html = true;

                                                // De headers samenstellen
                                                $headers     = 'From: ' . $website_naam . ' <' . $eigen_emailadres . '>' . PHP_EOL;
                                                $headers    .= 'Reply-To: ' . $naam_verzender . ' <' . $email_verzender . '>' . PHP_EOL;
                                                $headers    .= 'Return-Path: Mail-Error <' . $error_emailadres . '>' . PHP_EOL;
                                                $headers    .= ($bcc_emailadres != '') ? 'Bcc: ' . $bcc_emailadres . PHP_EOL : '';
                                                $headers    .= 'X-Mailer: PHP/' . phpversion() . PHP_EOL;
                                                $headers    .= 'X-Priority: Normal' . PHP_EOL;
                                                $headers    .= ($html) ? 'MIME-Version: 1.0' . PHP_EOL : '';
                                                $headers    .= ($html) ? 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL : '';

                                                mail(EMAIL_TO,MESSAGE_SUBJECT,$message_body,$headers);

                                            }

                                            public function setError($field, $errmsg){
                                                $this->errors[$field]   = $errmsg;
                                                $this->num_errors       = count($this->errors);
                                            }

                                            public function error_value($field){
                                                if(array_key_exists($field,$this->errors))
                                                    return $this->errors[$field];
                                                else
                                                    return '';
                                            }

                                            public function countErrors(){
                                                return $this->num_errors;
                                            }
                                        };
                                        ?>
                                        <table width="675px" cellpadding="0" cellspacing="0">
                                            <form id="ContactForm" action="quiz.php" method="post">
                                            <tr>
                                                <td class="left_td">&nbsp;</td><td><font size="-2">* Gelieve alle velden in te vullen.</font></td>
                                            </tr>
                                            <tr class="rij_aanhef">
                                                <td class="left_td">Aanhef<font size="-2" style="vertical-align:top;">*</font></td>
                                                <td>
                                                    <label class="label_aanhef" for="aanhef_1"><input name="aanhef" id="aanhef_1" value="Dhr." type="radio" /> Dhr.</label><label class="label_aanhef" for="aanhef_2"><input name="aanhef" id="aanhef_2" value="Mevr." type="radio" /> Mevr.</label>
                                                    <span class="error" style="display:none; margin-left:40px;">
                                                        <?php echo($contact->error_value("'aanhef'")) ?>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr class="rij_contactpersoon">
                                                <td class="left_td">Contactpersoon</td>
                                                <td>
                                                    <input id="contactpersoon" name="contactpersoon" class="inplaceError" maxlength="120" type="text" class="error" autocomplete="off" onFocus="window.scrollTo(0, 0);"/>
                                                    <span class="error" style="display:none; margin-left:40px;">
                                                        <?php echo($contact->error_value('contactpersoon')) ?>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr class="rij_bedrijf">
                                                <td class="left_td">Bedrijfsnaam</td>
                                                <td>
                                                    <input id="bedrijfsnaam" name="bedrijfsnaam" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/>
                                                    <span class="error" style="display:none; margin-left:40px;">
                                                        <?php echo($contact->error_value('bedrijfsnaam')) ?>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="left_td">E-mail</td>
                                                <td>
                                                    <input id="email" name="email" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/>
                                                    <span class="error" style="display:none; margin-left:40px;">
                                                        <?php echo($contact->error_value('email')) ?>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="left_td">Telefoonnummer</td>
                                                <td><input id="telefoon" name="telefoon" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/>
                                                    <span class="error" style="display:none; margin-left:40px;">
                                                        <?php echo($contact->error_value('telefoon')) ?>
                                                    </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </section>
            </div><!-- // st-scroll -->
            <div class="st-scroll">

                <section class="st-panel" id="st-panel-2">
                    <div class="st-deco"></div>
                        <h2>Toelichting:<br />Neem plaats op de eerste tegel en wek energie op. Zodra de vraag op het scherm verschijnt, kiest u één van de vier volgende antwoorden.</h2>
                            <div class="sizer">
                                <label class="label_radio" for="vraag1_A"><input name="vraag1_antwoorden" id="vraag1_A" value="A. Dat is helaas fout, het goede antwoord is: C) 1 Ohm" type="radio" />A) Geen eis</label>
                                <label class="label_radio" for="vraag1_B"><input name="vraag1_antwoorden" id="vraag1_B" value="B. Dat is helaas fout, het goede antwoord is: C) 1 Ohm" type="radio" />B) 0,1 Ohm</label>
                                <label class="label_radio" for="vraag1_C"><input name="vraag1_antwoorden" id="vraag1_C" value="C. Gefeliciteerd dat is het goede antwoord." type="radio" />C) 1 Ohm</label>
                                <label class="label_radio" for="vraag1_D"><input name="vraag1_antwoorden" id="vraag1_D" value="D. Dat is helaas fout, het goede antwoord is: C) 1 Ohm" type="radio" />D) 10 Ohm</label>
                            </div>
                            <span id="vraag1_antwoorden" class="foutmelding_quiz" style="display:none;">
                                <?php echo($contact->error_value('vraag1_antwoorden')) ?>
                            </span>
                </section>
            </div><!-- // st-scroll -->
            <div class="st-scroll">

                <section class="st-panel" id="st-panel-3">
                    <div class="st-deco"></div>
                        <h2>Toelichting:<br />Neem plaats op de tweede tegel en wek energie op. Zodra de vraag op het scherm verschijnt, kiest u één van de vier volgende antwoorden.</h2>
                            <div class="sizer">
                                <label class="label_radio" for="vraag2_A"><input name="vraag2_antwoorden" id="vraag2_A" value="A. Gefeliciteerd dat is het goede antwoord." type="radio" />A) 10 Ohm</label>
                                <label class="label_radio" for="vraag2_B"><input name="vraag2_antwoorden" id="vraag2_B" value="B. Dat is helaas fout, het goede antwoord is: A) 10 Ohm" type="radio" />B) 1 Ohm</label>
                                <label class="label_radio" for="vraag2_C"><input name="vraag2_antwoorden" id="vraag2_C" value="C. Dat is helaas fout, het goede antwoord is: A) 10 Ohm" type="radio" />C) 0,1 Ohm</label>
                                <label class="label_radio" for="vraag2_D"><input name="vraag2_antwoorden" id="vraag2_D" value="D. Dat is helaas fout, het goede antwoord is: A) 10 Ohm" type="radio" />D) Geen eis</label>
                            </div>
                            <span id="vraag2_antwoorden" class="foutmelding_quiz" style="display:none;">
                                <?php echo($contact->error_value('vraag2_antwoorden')) ?>
                            </span>
                </section>
            </div><!-- // st-scroll -->
            <div class="st-scroll">

                <section class="st-panel" id="st-panel-4">
                    <div class="st-deco"></div>
                        <h2>Toelichting:<br />Neem plaats op de derde tegel en zorg ervoor dat u genoeg energie opwekt om de balk tot 100% te laten komen.</h2>
                    <p>
                        <br /><br /><input type="submit" class="verzenden_image" value="" /><input type="hidden" id="newcontact" name="newcontact" value="1"></input></form>                         
                    </p>
                </section>
            </div><!-- // st-scroll -->

        </div><!-- // st-container -->
    </div>
    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script>
        function setupLabel() {
            if ($('.label_check input').length) {
                $('.label_check').each(function(){ 
                    $(this).removeClass('c_on');
                });
                $('.label_check input:checked').each(function(){ 
                    $(this).parent('label').addClass('c_on');
                });                
            };
            if ($('.label_radio input').length) {
                $('.label_radio').each(function(){ 
                    $(this).removeClass('r_on');
                });
                $('.label_radio input:checked').each(function(){ 
                    $(this).parent('label').addClass('r_on');
                });
            };
        };
        $(document).ready(function(){
            $('body').addClass('has-js');
            $('.label_check, .label_radio').click(function(){
                setupLabel();
            });
            setupLabel(); 
        });
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:01:36.693

# 版本 1（省略 AJAX）

好吧，就添加新项目而言，您几乎已经完成了：

```
<form id="ContactForm" action="php/contact.php" method="post"> 
```

然后，在服务器端验证和呈现结果阶段应该做进一步的调整：

```
/* Errors exist */
if($this->countErrors() > 0){
    $json = array(
        'result' => -1, 
        'errors' => array(
                        array('name' => 'contactpersoon'    ,'value' => $this->error_value('contactpersoon')),
                        array('name' => 'bedrijfsnaam'  ,'value' => $this->error_value('bedrijfsnaam')),
                        array('name' => 'email'     ,'value' => $this->error_value('email')),                               
                        array('name' => 'telefoon'  ,'value' => $this->error_value('telefoon')),
                        array('name' => 'vraag1_antwoorden' ,'value' => $this->error_value('vraag1_antwoorden')),
                        array('name' => 'vraag2_antwoorden' ,'value' => $this->error_value('vraag2_antwoorden')),
                    )
        );

    // The code below is an example and was not tested
    // you have to do similar thing for "insert into db" section

    echo("<ol>");
    echo("Please correct the followin errors:")
    foreach ($json['errors'] as $item) {
        echo("<li>".$item['value']."</li>");
    }
    echo("</ol>");
}
/* No errors, insert in db*/
else{
    if(($ret = $this->db->dbNewMessage($contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > 0){
        $json = array('result'      => 1); 
        if(SEND_EMAIL)
            $this->sendEmail($contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);

        //the code below is an example, it includes result.php file
        include('result.php');

    }   
    else
        $json = array('result'      => -2); /* something went wrong in database insertion  */
    $encoded = json_encode($json);
    echo $encoded;
    unset($encoded);
} 
```

提示：

1.  您在这里不需要 JSON。
2.  如果您想保持简单，只需回显带有错误或插入数据的 HTML，其中 $encoded = json_encode($json) 变量被分配（两种情况，if 和 else）。
3.  确保该 HTML 表单操作指向您的 contact.php 文件。
4.  然后，将不需要 result.php。
5.  主要缺点是，如果未在服务器端验证中检查，重新加载页面将继续添加新的联系信息。

# 版本 2（向您的用户显示错误）

这种情况需要您重新设计表单的流程，这就是我们想要实现的目标：
1\. 向您的用户呈现一个表单（form.php）。
2\. 用户填写表格（form.php）。
3\. 正在提交表单（form.php，正在向form.php发送数据）。
4a。表单有效，将数据插入数据库并显示结果页面（form.php，然后是结果 php），或者
4b。表单无效，向用户显示错误（form.php，提交将使用户回到第 3 点）。

因此： 您发布的表单代码必须进行调整： 1\. 首先，将您当前的 php/contact.php 文件的内容放在上面。2\. 然后，必须调整包含表单输入字段的每个表格行以显示所犯的错误。
3\. if-else 块必须调整为有 header("Location: "); 产生重定向到结果页面。

所以，它会在下面的某个地方。

form.php（代码没有经过测试，但应该没有语义错误，你应该把你的html和元定义放在'？>'之后和''之前）：

```
<?php
require_once("db.php");                 /* Database Class */
require_once('utils/is_email.php');     /* Email Validation Script */

/* Handle Ajax Request */
if(isset($_POST['newcontact'])){
    $contact = new Contact();
    //We'll refer to that later on, to display errors.
    //unset($contact);
}
else{
    //header('Location: ../result.php');
}

/* Class Contact */
class Contact{

    private $db;                        /* the database obj */

    //private $errors         = array();  /* holds error messages */
    //we have to init $errors array, as otherwise form will produce errors on missing array entry
    private $errors = array(            /* holds error messages */
                'bedrijfsnaam' => '',
                'email' => '',
                'telefoon' => '',
                'vraag1_antwoorden' => '',
                'vraag2_antwoorden' => ''
            );

    private $num_errors;                /* number of errors in submitted form */

    public function __construct(){
        $this->db = new DB();
        if(isset($_POST['newcontact']))
            $this->processNewMessage();
        /* We don't need this anymore
         * 
        else
            header('Location: ../result.php');*/
    }

    public function processNewMessage(){

        $contactpersoon     = $_POST['contactpersoon'];     
        $bedrijfsnaam       = $_POST['bedrijfsnaam'];
        $telefoon           = $_POST['telefoon'];
        $email              = $_POST['email'];
        $vraag1_antwoorden  = $_POST['vraag1_antwoorden'];
        $vraag2_antwoorden  = $_POST['vraag2_antwoorden'];

        /* Server Side Data Validation */

        /* Contactpersoon Validation */
        if(!$contactpersoon || mb_strlen($contactpersoon = trim($contactpersoon)) == 0)
            $this->setError('contactpersoon', 'Vul uw contactpersoon in');
        else if(mb_strlen(trim($contactpersoon)) > 120)
            $this->setError('contactpersoon', 'Te lang! 120 karakters max.');

        /* Bedrijfsnaam Validation */
            if(!$bedrijfsnaam || mb_strlen($bedrijfsnaam = trim($bedrijfsnaam)) == 0)
            $this->setError('bedrijfsnaam', 'Vul uw bedrijfsnaam in');
        else if(mb_strlen(trim($bedrijfsnaam)) > 120)
            $this->setError('bedrijfsnaam', 'Te lang! 120 karakters max.');

            /* Telefoon Validation */
            if(!$telefoon || mb_strlen($telefoon = trim($telefoon)) == 0)
            $this->setError('telefoon', 'Vul uw telefoonnummer in');
        else if(mb_strlen(trim($telefoon)) > 120)
            $this->setError('telefoon', 'Te lang! 120 karakters max.');

            /* Vraag 1 Validation */
            if(!$vraag1_antwoorden || mb_strlen($vraag1_antwoorden = trim($vraag1_antwoorden)) == 0)
            $this->setError('vraag1_antwoorden', 'Selecteer een antwoord a.u.b.');

            /* Vraag 2 Validation */
            if(!$vraag2_antwoorden || mb_strlen($vraag2_antwoorden = trim($vraag2_antwoorden)) == 0)
            $this->setError('vraag2_antwoorden', 'Selecteer een antwoord a.u.b.');

            /* Email Validation */
        if(!$email || mb_strlen($email = trim($email)) == 0)
            $this->setError('email','Vul uw e-mail in');
        else{
            if(!is_email($email))
                $this->setError('email', 'Vul een correct email adres in');
            else if(mb_strlen($email) > 120)
                $this->setError('email', 'Te lang! 120 karakters max.');
        }

        /* Errors exist */
        /*if($this->countErrors() > 0){
            $json = array(
                'result' => -1, 
                'errors' => array(
                                array('name' => 'contactpersoon'    ,'value' => $this->error_value('contactpersoon')),
                                array('name' => 'bedrijfsnaam'  ,'value' => $this->error_value('bedrijfsnaam')),
                                array('name' => 'email'     ,'value' => $this->error_value('email')),                               
                                array('name' => 'telefoon'  ,'value' => $this->error_value('telefoon')),
                                array('name' => 'vraag1_antwoorden' ,'value' => $this->error_value('vraag1_antwoorden')),
                                array('name' => 'vraag2_antwoorden' ,'value' => $this->error_value('vraag2_antwoorden')),
                            )
                );
        }
        /* No errors, insert in db
        else*/
        if($this->countErrors() == 0) {
            if(($ret = $this->db->dbNewMessage($contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > 0){
                //$json = array('result'         => 1);
                if(SEND_EMAIL)
                    $this->sendEmail($contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);

                //This is for relocating to successful result page
                header('Location: ../result.php');
            } else {   
                // else
                //    $json = array('result'      => -2); /* something went wrong in database insertion  */

                //This will need special treatment. You have to prepare an errorpage
                //for database-related issues.
                header("Location: database-error.html");
            }

            /*$encoded = json_encode($json);
            echo $encoded;
            unset($encoded);*/
        }
    }

    public function sendEmail($contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden){
        /* Just format the email text the way you want ... */
        $message_body   = "<div style=\"font-size:12px; font-weight:normal;\">Hallo,<br><br>"
                                    ."Het volgende bedrijf heeft zich zojuist aangemeld:</div><br>"
                                    ."<table cellpadding=\"1\" cellspacing=\"1\" width=\"550px\"><tr><td style=\"font-size:12px; color:#000000\">Bedrijfsnaam:</td><td style=\"font-size:12px; color:#000000\">".$bedrijfsnaam."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Contactpersoon:</td><td style=\"font-size:12px; color:#000000\">".$contactpersoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Telefoonnummer:</td><td style=\"font-size:12px; color:#000000\">".$telefoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">E-mail:</td><td style=\"font-size:12px; color:#000000\">".$email."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 1:</td><td style=\"font-size:12px; color:#000000\">".$vraag1_antwoorden."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 2:</td><td style=\"font-size:12px; color:#000000\">".$vraag2_antwoorden."</td></tr></table><br>";

            // Geef GELDIGE adressen op
            // Een korte benaming voor jouw website
            $website_naam = 'Aanmelding';
            // Jouw eigen geldige emailadres
            $eigen_emailadres = 'EMAIL';
            // Een geldig emailadres voor errors
            $error_emailadres = 'EMAIL';
            // De naam van de verzender
            $naam_verzender = ''.$bedrijfsnaam.'';
            // Het geldige emailadres van de afzender
            $email_verzender = ''.$email.'';
            // Een geldig emailadres of helemaal leeg laten
            $bcc_emailadres = '';
            // HTML mail? True/False
            $html = true;

            // De headers samenstellen
            $headers     = 'From: ' . $website_naam . ' <' . $eigen_emailadres . '>' . PHP_EOL;
            $headers    .= 'Reply-To: ' . $naam_verzender . ' <' . $email_verzender . '>' . PHP_EOL;
            $headers    .= 'Return-Path: Mail-Error <' . $error_emailadres . '>' . PHP_EOL;
            $headers    .= ($bcc_emailadres != '') ? 'Bcc: ' . $bcc_emailadres . PHP_EOL : '';
            $headers    .= 'X-Mailer: PHP/' . phpversion() . PHP_EOL;
            $headers    .= 'X-Priority: Normal' . PHP_EOL;
            $headers    .= ($html) ? 'MIME-Version: 1.0' . PHP_EOL : '';
            $headers    .= ($html) ? 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL : '';

            mail(EMAIL_TO,MESSAGE_SUBJECT,$message_body,$headers);

    }

    public function setError($field, $errmsg){
        $this->errors[$field]   = $errmsg;
        $this->num_errors       = count($this->errors);
    }

    public function error_value($field){
        if(array_key_exists($field,$this->errors))
            return $this->errors[$field];
        else
            return '';
    }

    public function countErrors(){
        return $this->num_errors;
    }
};
?><table>
<form id="ContactForm" action="php/contact.php" method="post">
<tr class="rij_contactpersoon">
    <td class="left_td">Contactpersoon</td>
    <td>
        <input id="contactpersoon" name="contactpersoon" class="inplaceError" maxlength="120" type="text" class="error" autocomplete="off" onFocus="window.scrollTo(0, 0);"/>
        <span class="error" style="display:none; margin-left:40px;">
            <!-- You have to repeat that for every input field below. -->
            <?php echo($contact->error_value('contactpersoon')) ?>
        </span>
    </td>
</tr>

<tr class="rij_bedrijf">
<td class="left_td">Bedrijfsnaam</td><td><input id="bedrijfsnaam" name="bedrijfsnaam" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/><span class="error" style="display:none; margin-left:40px;"></span></td>
</tr>
<tr>
<td class="left_td">E-mail</td><td><input id="email" name="email" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/><span class="error" style="display:none; margin-left:40px;"></span></td>
</tr>
<tr>
<td class="left_td">Telefoonnummer</td><td><input id="telefoon" name="telefoon" class="inplaceError" maxlength="120" type="text" autocomplete="off" onFocus="window.scrollTo(0, 0);"/><span class="error" style="display:none; margin-left:40px;"></span></td>
</tr>
<tr>
<td class="left_td">Question 1</td><td><div class="sizer"><label class="label_radio" for="vraag1_A"><input name="vraag1_antwoorden" id="vraag1_A" value="A" type="radio" />A) 10 Ohm</label><label class="label_radio" for="vraag1_B"><input name="vraag1_antwoorden" id="vraag1_B" value="B" type="radio" />B) 1 Ohm</label><label class="label_radio" for="vraag1_C"><input name="vraag1_antwoorden" id="vraag1_C" value="C" type="radio" />C) 0,1 Ohm</label><label class="label_radio" for="vraag1_D"><input name="vraag1_antwoorden" id="vraag1_D" value="D" type="radio" />D) Geen eis</label></div><span id="vraag1_antwoorden" class="foutmelding_quiz" style="display:none;"></span></td>
</tr>
<tr>
<td class="left_td">Question 2</td><td><div class="sizer"><label class="label_radio" for="vraag2_A"><input name="vraag2_antwoorden" id="vraag2_A" value="A" type="radio" />A) 10 Ohm</label><label class="label_radio" for="vraag2_B"><input name="vraag2_antwoorden" id="vraag2_B" value="B" type="radio" />B) 1 Ohm</label><label class="label_radio" for="vraag2_C"><input name="vraag2_antwoorden" id="vraag2_C" value="C" type="radio" />C) 0,1 Ohm</label><label class="label_radio" for="vraag2_D"><input name="vraag2_antwoorden" id="vraag2_D" value="D" type="radio" />D) Geen eis</label></div><span id="vraag2_antwoorden" class="foutmelding_quiz" style="display:none;"></span></td>
</tr>
<tr>
<td class="left_td"></td><td><input type="button" class="button_verzenden black" id="send" value="VERSTUUR" /><input type="hidden" id="newcontact" name="newcontact" value="1"></input></form>
</td>
</tr>
</table> 
```

# html - 下拉菜单宽度 100%

> ID：12037560
> 
> 赞同：0
> 
> 时间：2012-08-20T12:22:42.720
> 
> 标签：html, css, drop-down-menu, width, pixels

努力寻找这个问题的答案。为基本下拉菜单创建了一些 html/css 代码，但努力使其适合现有的宽度结构。

基本上我的网站宽度约为。900px，并希望这个菜单完全适合。但是，目前它很短（FF 上的像素很少，而 IE 上的像素更多），因为我没有足够的菜单，并且一直在使用“&”来使其更接近。有没有一种方法可以在最后添加一个固定块（有点像一个假菜单），或者更好的是，一个 100% 的背景颜色（或一个固定的像素宽度）？我不介意它可能是最右侧的纯色。希望这是有道理的。

HTML（示例）

```
<table cellpadding="5" cellspacing="0" width="100%" border="0">
    <tr>
        <td>
            <div id="nav">
                <ul>
                    <li><a href="" title="">Link 1</a></li>
                    <li><a href="" title="">Link 2</a>
                        <ul>
                            <li><a href="" title="">Link 2-1</a></li>
                            <li><a href="" title="">Link 2-2</a></li>
                            <li><a href="" title="">Link 2-3</a></li>
                        </ul>
                    </li>
                    <li><a href="" title="">Link 3</a>
                        <ul>
                            <li><a href="" title="">Link 3-1</a></li>
                            <li><a href="" title="">Link 3-2</a></li>
                            <li><a href="" title="">Link 3-3</a></li>
                            <li><a href="" title="">Link 3-4</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </td>
    </tr>
</table> 
```

CSS

```
#nav ul {
    font-family: Tahoma, Verdana, Helvetica, Arial, sans-serif;
    font-size: 11px;
    font-weight: bold;
    margin: 0;
    padding: 0;
    list-style: none;
}
#nav ul li {
    display: block;
    position: relative;
    float: left;
}
#nav li ul {
    display: none;
}
#nav ul li a {
    display: block;
    text-decoration: none;
    color: #ffffff;
    padding: 5px 15px 6px 15px;
    background: #2a8bc6;
    white-space: nowrap;
    background: url('images/menu_off.gif') 100% 0 repeat-x;
}
#nav ul li a:hover, #nav ul li a.sfhover {
    background: #56595c;
}
#nav li:hover ul, #nav li.sfhover ul {
    display: block;
    position: absolute;
    z-index: 3;
}
#nav li:hover li, #nav li.sfhover li {
    float: none;
    font-size: 12px;
    font-weight: normal;
    border-top: 1px solid #959a9d;
}
#nav li:hover a, #nav li.sfhover a {
    background: #56595c;
    opacity: 0.9;
}
#nav li:hover li a:hover, #nav li.sfhover li a.sfhover {
    background: #2a8bc6;
}
<!--[if lte IE 8]>
#nav ul li {
    position: inherit;
}
<![endif]-->
<!--[if lte IE 7]>
#nav ul li {
    background: url(none);
}
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:30:13.467

CSS 中的块级元素会自动填充其容器。如果我理解您的问题，您可以接受菜单右侧的纯色。因此，基本上，您希望将菜单放入容器中并使菜单跨越整个宽度，但不一定具有相等的菜单项宽度。如果是这种情况，我使用了一个我之前使用的 jsfiddle 来展示如何在 css 中的子菜单上添加向下/向右箭头，并展示了如果它位于某个宽度的容器中，它确实会填满整个容器。您可以通过更改 CSS 中#existingContainer 项的宽度来测试这一点。您会看到灰色条（与菜单相关联）延伸到填充整个空间。

[http://jsfiddle.net/w9xnv/3/](http://jsfiddle.net/w9xnv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:50:48.927

通过将宽度设置为 100%，我想我做到了：

[http://jsfiddle.net/Qcny6/](http://jsfiddle.net/Qcny6/)

看看，让我知道这是否是你所期望的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:21:04.457

我随后通过在末尾添加一个小背景图像（在原始 div 之后）添加了一个临时修复，其中包含如下的 repeat-x 代码。它适用于我尝试过的所有浏览器，这很好，但我不知道这是否是最好的方法？在我的特定站点上还注意到，FF 中的 11px 字体大小比 IE 中的稍大，这意味着我使用的实际背景图像（带缓冲区）在 FF 中为 26px，在 IE 中为 24px。任何想法如何将背景图像修复为确切的大小，因为我知道设置字体大小并不容易。

用于插件的代码：

HTML

```
<div id="navend"><img src="{$images_dir}/menu_off.gif" border="0" alt="" /></div> 
```

CSS

```
#navend {
background: url('images/menu_off.gif') repeat-x;
} 
```

# scala - scala案例类命名参数

> ID：12037563
> 
> 赞同：6
> 
> 时间：2012-08-20T12:23:08.177
> 
> 标签：scala, case-class

scala中是否有（或将在最近的功能中）可以创建带有命名参数的案例类？我的意思是使用构造函数中的命名参数来构造案例类对象。

我的案例课程有很多领域。具有大量未命名参数的构造函数很容易出错。

我想得到（目前不工作的例子）：

```
case class X(x0:String, x1:Int, x2:String)
val x = X(x0="Xstring", x1=12, x2="x2String") 
```

作为解决方法，我们可以提供如下摘录所示的工厂方法，但这是一个丑陋的解决方案：

```
case class X(x0:String, x1:Int, x2:String)
object X {
    private nullX = X(null, null, null)
    def createX = nullX.copy _
}

val x = X.createX(x0="Xstring", x1=12, x2="x2String") 
```

有什么线索吗？:)

**编辑**：这是旧版本的 intellij idea scala 插件中的错误。**请不要再投票了；）**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T12:42:46.400

[Scala 2.8](http://www.scala-lang.org/node/7009)中引入了命名参数和默认参数

```
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_27).
Type in expressions to have them evaluated.
Type :help for more information.

scala> case class X(x0:String, x1:Int, x2:String)
defined class X

scala> val x = X(x0="Xstring", x1=12, x2="x2String")
x: X = X(Xstring,12,x2String) 
```

# flash - 有没有在 winrt metro 中使用/嵌入 flash 的好方法？

> ID：12037565
> 
> 赞同：1
> 
> 时间：2012-08-20T12:23:11.380
> 
> 标签：flash, microsoft-metro, windows-runtime

如果我创建一个 Flash 游戏，有什么方法可以让我将其打包，以便我可以将其作为应用程序在 windows 市场上出售？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:35:08.303

不可以。您不能在 WinRT 应用程序内托管 Flash 运行时。这包括无法在应用程序内使用 webbrowser 控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:44:51.213

根据[这篇文章](http://www.pcmag.com/article2/0,2817,2393055,00.asp)，IE Metro Style 似乎不支持 Flash（或任何其他插件），但是在同一篇文章中提到 Adob​​e 将发布 Adob​​e Air 的“Metro Style”版本，因此您将能够将您的 Flash 应用程序部署为 Metro 的独立 Flash 应用程序，[例如在 iOS 和 Android 中相同](http://www.adobe.com/ca/products/air.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:52:57.007

Interestingly - you can run flash in the desktop mode of the WinRT version of Windows 8 (not the Metro-style mode). I'm surprised because I thought only Windows 8 pro desktop mode would support the flash plug-in. Thought I'd share...

# php - 从文件中获取特定单词

> ID：12037568
> 
> 赞同：2
> 
> 时间：2012-08-20T12:23:17.100
> 
> 标签：php, regex

使用 PHP 我正在尝试执行以下任务：

1）读取输入文件：

```
// some lines
request_context.base_path: /~test1/test2/web/ 
// some lines 
```

2）得到以下输出：

```
/~test1/test2/web/ 
```

这是我的代码，但它不起作用。
有任何想法吗？谢谢。

```
<?php
$lines = file('app/parameter.conf');
$l_count = count($lines);
for($x = 0; $x< $l_count; $x++)
{
    if (strpos($lines[$x],'request_context.base_path:') !== false) {
        preg_match('(request_context.base_path:)(\s.*)', $lines[$x], $matches);
        echo $matches[1];
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:26:41.320

为什么要大惊小怪？

```
preg_match('/request_context.base_path: (.*)/', $lines[$x], $matches); 
```

# android - 第二次启动警报对话框时出现 java.lang.IllegalStateException

> ID：12037569
> 
> 赞同：1
> 
> 时间：2012-08-20T12:23:20.547
> 
> 标签：android, android-preferences, android-alertdialog

![在此处输入图像描述](../Images/50a8c8f04b80b59057889f426996e977.png)
我创建了警报对话框（底部带有复选框），并在单击首选项时启动它。第一次成功启动警报对话框，但第二次出现以下异常：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

MainActivity.java

```
final View checkBoxView = View.inflate(this, R.layout.checkbox, null);   /*to inflate dialog with checkbox */
CheckBox checkBox = (CheckBox) checkBoxView.findViewById(R.id.checkbox);
checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        System.out.println("******** CheckBox Clicked *********");
        /* Save to shared preferences */
    }
});
checkBox.setText("Use by default for this action");

Preference pref = (Preference) findPreference("preference");
        pref.setOnPreferenceClickListener(new OnPreferenceClickListener() {
            @Override
            public boolean onPreferenceClick(Preference arg0) {
                final CharSequence[] items = {"BT Smart Settings by ABC",
                        "BT Smart Settings by XYZ",
                        "BT Smart Settings by DEFAULT"};

                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
                builder.setTitle("Complete action using");
                builder.setItems(items, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {
                        System.out.println("************* clicked-item :"+item);

                    }
                });
                builder.setView(checkBoxView);
                AlertDialog alert = builder.create();
                alert.show();
                return false;
            }
        }); 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:55:22.427

这将帮助你-：

```
if(checkBoxView.getParent() == null) {
 builder.setView(checkBoxView);
} else {
 checkBoxView = null; //set your view to null then set the required values again
final View checkBoxView = View.inflate(this, R.layout.checkbox, null);   /*to inflate dialog with checkbox */
CheckBox checkBox = (CheckBox) checkBoxView.findViewById(R.id.checkbox);
checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        System.out.println("******** CheckBox Clicked *********");
        /* Save to shared preferences */
    }
});
checkBox.setText("Use by default for this action");
builder.setView(checkBoxView);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:31:35.207

一旦你完成它，你需要打电话`alert.dismiss()`给你。`AlertDialog`

# ios5 - iOS的推特框架支持自动分享吗？

> ID：12037571
> 
> 赞同：2
> 
> 时间：2012-08-20T12:23:22.903
> 
> 标签：ios5, twitter

我有一个名为 twitter 的按钮，当我通常单击此按钮时，会显示一个用于发推文的视图，即`TWTweetComposeViewController`。我有两种发推文的方式，即自动分享和正常分享。正常分享工作得很好，但我怀疑如何在自动分享中做同样的事情，这意味着当我点击推特按钮而不是显示时自动发一些默认消息视图并`TWTweetComposeViewController`单击完成按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:13:14.873

最后，我在 ios5 中搜索了很多与 Twitter 相关的问题，还阅读了 twitter 开发者文档并尝试了这个答案。我认为这是进行自动共享的解决方案之一。

```
ACAccountStore *account = [[ACAccountStore alloc] init];
        ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

        // Request access from the user to access their Twitter account
        [account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
            // Did user allow us access?
            if (granted == YES)
            {
                // Populate array with all available Twitter accounts
                NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];

                // Sanity check
                if ([arrayOfAccounts count] > 0) 
                {
                    // Keep it simple, use the first account available
                    ACAccount *acct = [arrayOfAccounts objectAtIndex:0];

                    NSURL *url = 
                    [NSURL URLWithString:
                     @"https://upload.twitter.com/1/statuses/update_with_media.json"];

                    //  Create a POST request for the target endpoint
                    TWRequest *request = 
                    [[TWRequest alloc] initWithURL:url 
                                        parameters:nil 
                                     requestMethod:TWRequestMethodPOST];

                    //  self.accounts is an array of all available accounts; 
                    //  we use the first one for simplicity
                    [request setAccount:acct];

                    //  The "larry.png" is an image that we have locally
                    UIImage *image = (UIImage *)[dictionarydata valueForKey:@"image"];
                    NSLog(@"%@",image);
                    if (image!=nil) {

                        //  Obtain NSData from the UIImage 
                        NSData *imageData = UIImagePNGRepresentation(image);

                        //  Add the data of the image with the 
                        //  correct parameter name, "media[]"
                        [request addMultiPartData:imageData 
                                         withName:@"media[]" 
                                             type:@"multipart/form-data"];

                        // NB: Our status must be passed as part of the multipart form data
                        NSString *status = [NSString stringWithFormat:@"%@ %@ %@",[dictionaryData valueForKey:@"firstname"],[dictionaryData valueForKey:@"lastname"],[dictionarydata valueForKey:@"title"]];

                        //  Add the data of the status as parameter "status"
                        [request addMultiPartData:[status dataUsingEncoding:NSUTF8StringEncoding] 
                                         withName:@"status" 
                                             type:@"multipart/form-data"];
                        //  Perform the request.  
                        //    Note that -[performRequestWithHandler] may be called on any thread,
                        //    so you should explicitly dispatch any UI operations to the main thread 
                        [request performRequestWithHandler:
                         ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                             NSDictionary *dict = 
                             (NSDictionary *)[NSJSONSerialization 
                                              JSONObjectWithData:responseData options:0 error:nil];

                             // Log the result
                             NSLog(@"%@", dict);

                             dispatch_async(dispatch_get_main_queue(), ^{
                                 // perform an action that updates the UI...
                             });
                         }];
                    }else{
                        NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1/statuses/update.json"];
                        NSDictionary *p = [NSDictionary dictionaryWithObjectsAndKeys:
                                           [NSString stringWithFormat:@"%@ %@ %@",[dictionaryData valueForKey:@"firstname"],[dictionaryData valueForKey:@"lastname"],[dictionarydata valueForKey:@"title"]], @"status",
                                           nil
                                           ];
                        TWRequest *postRequest = [[TWRequest alloc]
                                                  initWithURL:   url
                                                  parameters:    p
                                                  requestMethod: TWRequestMethodPOST
                                                  ];

                        // Post the request
                        [postRequest setAccount:acct];

                        // Block handler to manage the response
                        [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                            NSLog(@"Twitter response, HTTP response: %i", [urlResponse statusCode]);
                        }];
}
                }
            }
        }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T05:06:03.087

如果您一直在使用 Twitter 框架，您可以这样做：

```
NSString *statusesShowEndpoint = @"https://api.twitter.com/1.1/statuses/update.json";
NSDictionary *params = @{@"status": @"Great101 - https://share.livefrom.me/p/md5mrCp"};

NSError *clientError;
NSURLRequest *request = [[[Twitter sharedInstance] APIClient]
                         URLRequestWithMethod:@"POST"
                         URL:statusesShowEndpoint
                         parameters:params
                         error:&clientError];

if (request) {
    [[[Twitter sharedInstance] APIClient]
     sendTwitterRequest:request
     completion:^(NSURLResponse *response,
                  NSData  *data,
                  NSError *connectionError) {
         if (data) {
             // handle the response data e.g.
             NSError *jsonError;
             NSDictionary *dicResponse = [NSJSONSerialization
                                           JSONObjectWithData:data
                                           options:0
                                           error:&jsonError];
             NSLog(@"%@",[dicResponse description]);
         }
         else {
             NSLog(@"Error code: %ld | Error description: %@", (long)[connectionError code], [connectionError localizedDescription]);
         }
     }];
}
else {
    NSLog(@"Error: %@", clientError);
} 
```

# hangout - 我可以在防火墙上发布 Google +Hangout 支持应用程序吗

> ID：12037573
> 
> 赞同：0
> 
> 时间：2012-08-20T12:23:24.880
> 
> 标签：hangout

我想在没有防火墙的情况下运行我的 Google +Hangout 应用程序（XML 文件）？

如果没有打开防火墙，我如何运行 Google +Hangout 支持应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:26:59.250

您能否提供一个示例说明您正在尝试做什么以及什么不起作用？由于防火墙可能会阻止网络流量，因此没有防火墙应该意味着一切都可以正常工作。

# joomla - 关于 Joomla install.eventlist.php

> ID：12037575
> 
> 赞同：0
> 
> 时间：2012-08-20T12:23:33.647
> 
> 标签：joomla, joomla1.5, joomla2.5, joomla-extensions

我找不到该文件的任何文档（install.eventlist.php）。我已经在我的扩展上使用它来进行数据库修改，例如我的扩展获得更新并需要一些数据库表更改，但我认为我没有 100% 使用它的功能。是否有任何针对此的教程/文章/文档？

已经搜索过了，但没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:43:54.580

要在安装组件时触发任何自定义修改，请查看此链接 [http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_an_install-uninstall-update_script_file](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_an_install-uninstall-update_script_file)

# javascript - SlickGrid 行选择不起作用

> ID：12037576
> 
> 赞同：0
> 
> 时间：2012-08-20T12:23:39.093
> 
> 标签：javascript, slickgrid

几天来，我一直在尝试实现在 SlickGrid 中选择行的可能性。Slickgrid 有一个很好的例子，我已经遵循了（至少尝试过；）：

[http://mleibman.github.com/SlickGrid/examples/example-checkbox-row-select.html](http://mleibman.github.com/SlickGrid/examples/example-checkbox-row-select.html)

但是，选择复选标记未显示在我自己的实现中，该实现在我的控制台中运行时没有出现任何错误（除了一些未找到的图像）。

我很困惑，非常感谢任何帮助或正确方向的指示。

我的实现可以在这里找到：http: [//borup.zapto.org/randomstuff/slickgridsort.htm](http://borup.zapto.org/randomstuff/slickgridsort.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:03:25.173

复选框正在创建并在网格上正确呈现。我认为有一个冲突的 CSS 类将选择的宽度设置为 350px。

请检查 main.css 文件中的样式 - 第 69 行。这会将所有输入标签的宽度（包括复选框）设置为 350 像素。我认为您需要用适当的网格复选框宽度覆盖它 - 可能使用列 CSS 类。

# android - 如何在android中显示解析的JSON数据

> ID：12037581
> 
> 赞同：0
> 
> 时间：2012-08-20T12:23:53.680
> 
> 标签：android

我已经解析了 JSON 数据并将解析后的 JSON 数据存储到带有键值的 ArrayList HashMap 中，当我想显示解析的数据时，我只得到解析数据的最后一个值，其余所有数据均不显示以供参考

```
public HashMap<String,String> map = new HashMap<String, String>();
create HASHmap then arraylist
public static ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
void parsing(JSONObject json)
    {
        String id="";
        String countryn="";
        try
        {
            countryobj = json.getJSONArray("country_details");

     for(int i = 0;i<countryobj.length(); i++)
     {
         JSONObject items = countryobj.getJSONObject(i);

         Log.e("i","value==="+i);

         if(items.has("countryid"))
         {
             id = items.getString("countryid");
             map.put("countryid",id);
             Log.e("id","valueID==="+id);
         }
         if(items.has("country"))
         {
             countryn= items.getString("country");
             map.put("country",countryn);
             Log.e("counyrt","valueName==="+countryn);

         }
         contactList.add(i,map);
         Log.e("lisvaluet","val--"+i +contactList.get(i));

     }

    }
    catch (Exception e) {
        // TODO: handle exception

            e.printStackTrace();
    } 
```

在日志中我得到的`only 08-20 12:13:45.830: E/--ID---(654): value--{countryid=275, country=Palestinian Territory} with 269 times`任何帮助都可以帮助我解决我在存储解析数据时做错的地方，我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:29:46.283

检查这个。

```
private JSONObject[] items;

JSONArray countryobj = json.getJSONArray("country_details");
items = new JSONObject[countryobj.length()];

for(int i=0, i < countryobj.length(); i++)
{
    items[i] = countryobj.optJSONObject(i);
    id = items[i].getString("countryid");
    map.put("countryid",id);

    countryn= items[i].getString("country");
    map.put("country",countryn);

    contactList.add(i,map);
} 
```

![在此处输入图像描述](../Images/fea02082851f6acf83ac5f66e3ef2889.png)

# jquery - 在 MVC3 模型中设置 jQuery Masked Textbox 中的值

> ID：12037582
> 
> 赞同：1
> 
> 时间：2012-08-20T12:23:54.707
> 
> 标签：jquery, asp.net-mvc-3, maskedinput

我正在使用 jQuery 屏蔽输入插件。

```
$("#txtBoxId").mask("###-##-####"); 
```

如果我从模型 ie 设置完整值，一切正常`123-45-6789`。但我只想显示最后的输入，即`6789`.

有没有办法以格式设置文本框的值`###-##-6789`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:12:27.097

您可以尝试以下方法：

```
string input = " 123-12-1234  123-11-1235";

string pattern = @"(?:\d{3})-(?:\d{2})-(\d{4})";
string result = Regex.Replace(input, pattern, "XXX-XX-$1");

Console.WriteLine(result); // XXX-XX-1234  XXX-XX-1235 
```

# python - 在python中创建一个指数函数

> ID：12037585
> 
> 赞同：-3
> 
> 时间：2012-08-20T12:24:14.160
> 
> 标签：python

我想编写一个函数，它接受一个浮点参数 x 并返回函数 e(to the power of x) 的值。使用泰勒级数展开来计算返回值，使用一个循环，当方程式的部分和 SN+1 时终止。(2) 等于SN。

不知道如何发挥作用，所以我将链接到[泰勒系列的维基百科文章](http://en.wikipedia.org/wiki/Taylor_series)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T12:30:18.530

恕我直言，没有必要实施已经存在的东西。

```
import math

math.exp(x) # equivalent to e ^ x 
```

但如果你坚持，还有这个`pow`功能：

```
import math

math.pow(x, y) # equivalent to x ^ y 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T13:34:33.880

Constantinius 有一个很好的答案，但我想我会补充一点，求幂的 python 快捷方式是 **。

例如

```
 >>>2**3
 8 
```

但是请注意，e**x 的处理方式与 math.exp(x) 不同：

```
 >>>math.e**3
 20.085536923187664
 >>> math.exp(3)
 20.085536923187668 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-20T12:46:27.453

0 时发展的泰勒级数是：

f(x) = exp(0) + exp(0)/1*x + exp(0)/(1*2)*x^2 + exp(0)/(1*2*3)*x^3 + exp(0)/(1*2*3*4)*x^4 + ...

= 1 + x + 1/2*x^2 + 1/6*x^3 + 1/24*x^4 +...

# python - Python 仅替换 re.sub 匹配的一部分

> ID：12037592
> 
> 赞同：1
> 
> 时间：2012-08-20T12:24:39.090
> 
> 标签：python, regex, match

以下 Python 脚本：`re.sub("[^a-zA-Z]pi[^a-zA-Z]", "(math.pi)", "2pi3 + supirse")`

结果是：`'(math.pi) + supirse'`

虽然之前和之后的非字母匹配`pi`很关键，但我不希望在匹配中替换这些非字母字符。我想看到以下输出：`'2(math.pi)3 + supirse'`

注意：之前的建议如下：`re.sub("\Bpi\B", "(math.pi)", "2pi3 + supirse")`

导致完全替换每个实例：`'2(math.pi)3 + su(math.pi)rse'`这也不是我想要的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:36:27.980

改用这个：`re.sub("(?<=[^a-zA-Z])pi(?=[^a-zA-Z])", "(math.pi)", "2pi3 + supirse")`

可视化：[http ://regex101.com/r/fX5wX3](http://regex101.com/r/fX5wX3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:36:05.937

使用前瞻/后瞻：

```
import re

print re.sub("(?<=[^a-zA-Z])pi(?=[^a-zA-Z])", "(math.pi)", "2pi3 + supirse") 
```

具体生成结果见这里：http: [//ideone.com/rSd8H](http://ideone.com/rSd8H)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:35:05.783

实际上，您需要一个小写字母`"\b"`来表示*单词边界*，而`"\B"`表示*不是单词边界*。

试试这个：

```
import re
re.sub(r"\bpi\b", "(math.pi)", "2pi3 + supirse") 
```

那会产生`'2pi3 + supirse'`

# php - 转到或创建基于第二个索引号数组的数组索引

> ID：12037594
> 
> 赞同：0
> 
> 时间：2012-08-20T12:24:47.483
> 
> 标签：php, arrays, multidimensional-array, indexing

好的，这听起来可能是一个奇怪的问题，所以首先让我列出基本情况：

在我们公司，我们正在使用票务系统。这个系统有一个常见问题数据库。我无法以任何方式更改数据库的结构，因为我们必须更改票务系统以应对这种变化，而这不是一个选择。

因此，除此之外......
因为没有可用的单独字段，我们在每个项目的标题中添加一个章节号以具有某种索引。

所以你会得到这样的东西：

```
1 start
1.1 some subchapter
2 new chapter
3 another chapter
3.1 sub of chapter
3.1.1 sub sub chapter 
```

ETC..

使用漂亮的正则表达式可以很容易地从字符串中提取章节部分。但下一步将是根据父章节轻松找到相应的子章节。在没有数据库的情况下使其可搜索的最简单方法是多维数组，对吗？

所以你会得到这个：

```
array( 3 => array( 
              'item' => 'data', 1 => array('item', 2 = array() ) ) )  etc... 
```

我现在所做的是创建一个章节索引数组（ [3,1,1] 在 3.1.1 的情况下），因为我知道这个数组中总是有 1 到 3 个项目，所以我做了一个切换基于数组长度，然后这样做：

```
$array[$index[0]][$index[1]]['item'] = $content; 
```

但我觉得这是一种非常肮脏和不灵活的方式。通常，无论如何我都会投票支持更改数据库结构，但是如果没有该选项，我不确定最好的方法是什么。

任何帮助都会很棒！

**编辑：在下面添加了我的评论以提高可读性**

标题确实是一行，但那部分我使用正则表达式来提取章节部分。所以这行得通。

我基本上构建的是一个表单，它使用索引数组为每个章节或章节部分构建一个复选框列表。但我不想搜索数组并比较键来查找子章节。因此，如果我选择 3.1，我会检查 3.1.1、3.1.2，因为密钥以 3.1 开头，所以我知道要打印它。

更快的是能够做到这一点：

选择 3.1.1 => 返回 $chapters[3][1][1]['item']

但这只有在我可以以这种形式构建初始数组时才有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:14:16.557

情况发生了变化，我们正在创建第二个数据库结构，该结构具有更好的设置来处理上述情况。

基本上，我们使用它来打印格式良好的 PDF 以及在票务系统的常见问题解答中推送信息。

这为我们提供了两全其美的优势，从而解决了上述问题。

# jquery - 如何用正确的行数填充表格以适应不同屏幕分辨率的页面高度？

> ID：12037595
> 
> 赞同：6
> 
> 时间：2012-08-20T12:24:48.110
> 
> 标签：jquery, css, html

我在前端开发了自己的 Web-Admin。这是一个典型的 Admin 容器，左侧是一个菜单导航，右侧是正文内容，显示与单击的菜单项相关的结果（通常是表格）。

为了使正文页适合 100%，获得表中正确数字或行的最佳方法是什么？

就我而言，我已经看到在更改屏幕分辨率时填充表格空间所需的拖车数量是不同的。

我知道一个快速的解决方案可能是计算分辨率并在知道屏幕分辨率后填充表格。我想知道是否可以在运行时根据屏幕分辨率或其他方式设置 TD 或 TR 高度。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:32:54.097

这是一个[小提琴](http://jsfiddle.net/MdN5z/)，它演示了取决于浏览器 innerHeight 的行渲染。

**HTML**

```
<table id="mytable"></table>​ 
```

**CSS**

```
td {
  height:20px;
}​ 
```

**JavaScript**

```
var numberOfRows = Math.floor(window.innerHeight / 20);

var table = document.getElementById("mytable");

function createCell() {
    var cell = document.createElement("td");
    cell.innerText = "Cell";
    return cell;
}

function createRow() {
    var row = document.createElement("tr");
    row.appendChild(createCell())
    return row;
}

for (var i = 0; i < numberOfRows; i++) {
    table.appendChild(createRow());
}​ 
```

**PS。1**我已经在 CSS 中设置了单元格的高度，这可以通过不同的方式完成
**PS。2**我已经确定了适合屏幕的行数。所以底部会有一些空白空间。

# ios - 应用商店提交类别

> ID：12037602
> 
> 赞同：1
> 
> 时间：2012-08-20T12:25:31.183
> 
> 标签：ios, ipad, app-store, categories, submission

我正在寻找将我的 iPad 应用程序提交到 App Store 的方法。该应用程序旨在教孩子数字和字母。

我在哪里可以找到适合应用程序的类别？是否有特定的子类别，例如“数学”，或者只是一般类别，例如“教育”？

有人告诉我有特定的子类别，但只能[列出这个一般列表。](http://www.appsolutegenius.com/blog/appstoreategories/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:27:22.697

你会希望你的第一个类别是教育。然后你会希望你的次要类别是游戏。游戏将允许您使用两个子类别，包括教育和儿童。应该这样做:)

![在此处输入图像描述](../Images/d9839ed3ea62349602b17b8d6bf7f48e.png)

# javascript - Facebook喜欢盒子流

> ID：12037603
> 
> 赞同：3
> 
> 时间：2012-08-20T12:25:34.603
> 
> 标签：javascript, facebook, facebook-like

Facebook 赞框仅显示过去 30 天内的帖子。

有没有办法我们可以设置它，以便它显示以前的帖子数量而不是基于日期？

否则，如果您在 30 天后未发布任何内容，您将得到一个空流，这很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:50:55.173

您是否尝试过使用评论框？您可以在此处指定框应显示的评论数。但是，不确定它们是否有时间限制，但肯定值得一试：http: [//developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

# c++ - 枚举变量的默认值是多少？

> ID：12037604
> 
> 赞同：7
> 
> 时间：2012-08-20T12:25:36.090
> 
> 标签：c++, c, enums

我对 C++ 中的枚举变量有疑问：

```
type enmu {
   DAY1 = 1,
   DAY2,
   DAY3,
   DAY4
} DAYS;

void main() {
   DAYS days;
} 
```

那么天数的默认值是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T12:26:18.230

读取值是未初始化和*未定义的行为。*

就像说

```
int x; 
```

`x`在初始化之前没有值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:39:45.227

> 那么天的默认值是多少？

与任何自动对象一样，对象的值`days`是不确定的。

现在，如果您使用说明`static`符声明您的对象：

```
static DAYS days; 
```

然后就像任何算术类型的静态对象一样，初始值将是`0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:27:14.913

枚举的行为与整数非常相似，即它们没有明确定义的默认值。如果不调用未定义的行为，就无法在初始化变量之前读取它的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:37:38.340

顺便说一句，前面说过：你确实*可能*有*静态*枚举变量的默认值。但要小心——它将为 0（以及所有其他静态变量）。考虑以下代码：

```
#include <iostream>

enum _t_test {
                test_1 = 1,
                test_2 = 2,
                test_3 = 3,
             };

static enum _t_test t;

int main()
{
    using namespace std;
    cout << "Value of t is: " << t;
    return 0; 
```

}

它将打印 0，但您的枚举范围为 1..3。所以要注意它。

# facebook - fb 'apprequests' 重定向到新的 url 或向 url 发送附加参数

> ID：12037605
> 
> 赞同：0
> 
> 时间：2012-08-20T12:25:37.033
> 
> 标签：facebook, apprequests, facebook-app-requests

当用户接受 fb 应用程序请求或需要将用户重定向到自定义 url 时，我需要传递附加参数来重定向 url。我该怎么做？...请看下面的代码。

```
 $('#sendRequest').click(function() {
          FB.ui(
            {
              method  : 'apprequests',
              message : $(this).attr('data-message')

                    },
            function (response) {
              // If response is null the user canceled the dialog
              if (response != null) {
                 logResponse(response);
              }
            }
          );
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:25:21.643

我在发送请求时使用“data”参数发送信息，并在另一端使用“request id”访问它。

```
 $('#sendRequest').click(function() {

          FB.ui(
            {
              method  : 'apprequests',
              message : $(this).attr('data-message'),
              data: sessionId,
              max_recipients:1

                    },
            function (response) {
              // If response is null the user canceled the dialog
              if (response != null) {
                 logResponse(response);
              }
            }
          );
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:35:06.923

您可以在显示的代码中添加任何内容。

如果您需要将任何数据与请求相结合，则必须将此数据保存到您自己的数据库中，以便在收到用户接受请求时发送给您的请求 ID 时再次查找。

# jquery - jQuery 样式：在显示前设置/获取表格的宽度

> ID：12037608
> 
> 赞同：0
> 
> 时间：2012-08-20T12:25:46.863
> 
> 标签：jquery, html, css

我需要将表格单元格宽度设置为 300，如[http://jsfiddle.net/Lijo/Q3pa2/3/](http://jsfiddle.net/Lijo/Q3pa2/3/)中所示。但是我需要隐藏表格，直到执行 jQuery 的最后一行。最后一个 jQuery 任务是将显示设置为 div 的内联。为此，我有一个脚本，如[http://jsfiddle.net/Lijo/Q3pa2/2/](http://jsfiddle.net/Lijo/Q3pa2/2/)所示。在这个小提琴中，它无法正常工作。

我认为，原因是 div 在获取表格宽度之前应该是 disaply:inline 。在显示表格之前是否有解决方法来获取/设置表格的宽度？

参考：

1.  [列宽设置 - HTML 表格](https://stackoverflow.com/questions/12006917/column-width-setting-html-table)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:30:43.253

您需要快速显示它，获取/设置宽度，然后隐藏它。用户不会看到这种闪烁，浏览器也没有时间渲染它，这是解决问题的常用技巧。你无法获得隐藏事物的宽度。

你的例子[http://jsfiddle.net/v6P65/](http://jsfiddle.net/v6P65/)

# java - 在带有 Hibernate 的 JAR 中使用 Spring 的困难

> ID：12037610
> 
> 赞同：1
> 
> 时间：2012-08-20T12:25:49.840
> 
> 标签：java, hibernate, jar

我试图从现有应用程序中分离出 Hibernate DAO 和模型对象层，以便它们可以跨多个应用程序使用。不幸的是，我没有取得太大的成功：尝试从应用程序上下文中获取 SessionFactory 时抛出了 NoSuchBeanDefinitionException。

所有 DAO 类都扩展了一个名为 GenericDaoHibernate2 的类。每个 DAO 都扩展它，并在构造函数中传递一个 Class。非常标准的通用 DAO 东西。

我认为这也是设置会话工厂的合乎逻辑的地方（有很多 DAO 类）。所以，在构造函数类中，我这样做了：

```
public GenericDaoHibernate2(final Class<T> persistentClass) {
    ctx = new ClassPathXmlApplicationContext("META-INF/applicationContext-dao.xml");
    this.sessionFactory = (SessionFactory) ctx.getBean(SessionFactory.class);
    log.debug("Value of app context: " + ctx.toString());
    log.debug("Value of sessionFactory: " + sessionFactory);
    this.persistentClass = persistentClass;
} 
```

不幸的是，这与前面提到的异常有关：

```
Caused By: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
Truncated. see log file for complete stacktrace 
```

我也尝试过使用类路径中的应用程序上下文文件，在声明变量等时设置值等。

我*猜*正在发生的事情是，作为 Maven 构建的一部分，jar 没有引用类路径上的库，但我真的不知道......

更新：愚蠢，愚蠢的我......忘记显示应用程序上下文文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/jee
       http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"
    default-lazy-init="true">

    <tx:annotation-driven transaction-manager="transactionManager" />
    <context:component-scan base-package="org.jason.dao.hibernate" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
        <property name="url" value="jdbc:oracle:thin:@//192.168.1.1/db01" />
        <property name="username" value="USER" />
        <property name="password" value="PASSWORD" />
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibername.format_sql">true</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.jdbc.use_get_generated_keys">true</prop>
                <prop key="hibernate.cglib.use_reflection_optimizer">true</prop>
                <prop key="hibernate.default_catalog">CATALOG</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory
                </prop>
            </props>
        </property>
        <property name="packagesToScan">
            <list>
                <value>org.jason.model</value>
            </list>
        </property>
    </bean>
</beans> 
```

另一个更新：被要求提供示例 DAO。该接口是一个“标准”通用接口，接受通用参数 T 和 PK，就像 Impl 一样。下面的方法除了继承自 GenericDaoHibernate2 之外没有任何特定的方法。

```
@Repository("AreaOfPreferenceDAO")
public class HibernateAreaOfPreferenceDAO extends GenericDaoHibernate2<AreaOfPreference, AreaOfPreferenceCompositeId> implements AreaOfPreferenceDAO {

   public HibernateAreaOfPreferenceDAO()
   {
      super(AreaOfPreference.class);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:50.817

您在每个 DAO 对象中创建新的应用程序上下文这一事实可能会给您带来麻烦。

```
ctx = new ClassPathXmlApplicationContext("META-INF/applicationContext-dao.xml"); 
```

如果您考虑一下，这是一种循环。您调用上下文，对 DAO 进行组件扫描，然后 DAO 实例化一个新上下文，对 DAO 进行组件扫描......

我会像其他人提到的那样直接自动连接 sessionfactory。

```
@Repository("AreaOfPreferenceDAO")
public class HibernateAreaOfPreferenceDAO extends GenericDaoHibernate2<AreaOfPreference, AreaOfPreferenceCompositeId> implements AreaOfPreferenceDAO {

   @Autowired
   public HibernateAreaOfPreferenceDAO(SessionFactory sessionFactory)
   {
      super(sessionFactory, AreaOfPreference.class);
   }
} 
```

任何组件都不需要构建新的应用程序上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:51:38.737

为了将 SessionFactory 连接到您的自定义通用 DAO，您可以继续并简单地使用 @Autowire，只要整个 Spring 上下文正在定义 SessionFactory bean。要定义 bean：

```
<bean id="sessionFactory" class=
    "org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
   <property name="dataSource" ref="dataSource" />
   <property name="packagesToScan" value="org.rest" />

   <property name="hibernateProperties">
      ...
   </property>
</bean>
<bean id="dataSource" class=
    "org.springframework.jdbc.datasource.DriverManagerDataSource">
   <property name="driverClassName" value="${driverClassName}" />
   <property name="url" value="${url}" />
   <property name="username" value="restUser" />
   <property name="password" value="restmy5ql" />
</bean> 
```

接线，简单地说：

```
@Autowired
SessionFactory sessionFactory; 
```

引导上下文的正确位置不在 DAO 的构造函数中；如果您正在使用 Web 应用程序，则可以使用传统方法：

```
<servlet>
   <servlet-name>dispatcher</servlet-name>
   <servlet-class>
     org.springframework.web.servlet.DispatcherServlet
   </servlet-class>
   <init-param>
     <param-name>contextConfigLocation</param-name>
     <param-value>/WEB-INF/spring/dispatcher-config.xml</param-value>
   </init-param>
   <load-on-startup>1</load-on-startup>
 </servlet>

 <servlet-mapping>
   <servlet-name>dispatcher</servlet-name>
   <url-pattern>/</url-pattern>
 </servlet-mapping> 
```

由于这不是 Web 应用程序，因此无法在 web.xml 中引导上下文；但是，引导仍然需要是外部的 - 主类只需要创建 XmlWebApplicationContext 并对其进行配置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T18:19:14.277

有同样的问题，无法进行注射。

我的问题是“顺序”。必须首先调用 Hibernate xml。

调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- init hibernate first -->
<import resource="classpath:HibernateContext.xml"/>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/pages/" />
    <property name="suffix" value=".jsp" />
</bean>
<mvc:annotation-driven />
<context:component-scan base-package="com.xxx.yyy" /> 
```

hibernateContext.xml 的内容：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:database.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driver}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.xxx.yyy.model" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>

    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<!--  bean id="transactionManager" class=" org.springframework.transaction.jta.JtaTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean--> 
```

# windows - 应用程序挂钩

> ID：12037614
> 
> 赞同：1
> 
> 时间：2012-08-20T12:26:00.583
> 
> 标签：windows, hook

我想在 Windows 程序中做一些钩子。例如，Vodafone 应用程序有一些类似 MSN 的弹出窗口，无法隐藏。因此，通过这种方式，我想创建隐藏或不隐藏此弹出窗口的选项。谁能告诉我一些教程（首先是基本的）如何做到这一点？

谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:52:59.970

您必须使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990%28VS.85%29.aspx)和第一个参数[WH_CBT](http://msdn.microsoft.com/en-us/library/ms644977%28v=vs.85%29.aspx)创建系统范围的窗口挂钩。您可以挂钩 HCBT_CREATEWND 事件并返回非零值，并且窗口将被销毁，但首先您必须以某种方式识别这是正确的窗口，可能根据窗口标题或该标题内的内容。

另一件事是您不能将托管代码和 C# 用于系统范围的挂钩，因为您必须在女巫挂钩中制作非托管 dll。所以你必须使用 C++ 或 Delphi，如果你没有 win32 编程经验，那可能是非常复杂的任务。

# jquery - 在 Rails 应用程序中显示 CDATA

> ID：12037615
> 
> 赞同：0
> 
> 时间：2012-08-20T12:26:04.313
> 
> 标签：jquery, ruby-on-rails, cdata, growl

我正在使用[grutter_notices](https://github.com/dapi/gritter_notices) gem 用咆哮型通知替换闪光警报。据我所知，这段代码出现在呈现的 HTML 中：

```
 <script type="text/javascript">
  //<![CDATA[
  jQuery.gritter.add({image:'/assets/success.png',title:'Success',text:'Record was successfully saved.'});
  //]]>
  </script> 
```

这在 application.html.haml

```
 = gflash
  = gritter_flash_messages
  = yield
= javascript_include_tag "application"
= include_gritter 
```

但是什么都没有出现。帮助？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:19:51.237

我不知道 gritter，但我怀疑您显示的代码是在加载 gritter 之前运行的。将它与 document.loaded 事件挂钩，以便在加载整个页面时执行。

您可以使用浏览器调试工具来捕捉这一点。

# python - 将手动安装的 python 库集成到系统中？

> ID：12037631
> 
> 赞同：0
> 
> 时间：2012-08-20T12:26:55.607
> 
> 标签：python, linux

我已经手动构建了`numpy`,`scipy`等`matplotlib`- 没有 root 权限（我需要新`matplotlib`的）。安装在标准位置的所有库：

```
~/.local/lib/python2.7 
```

现在，当我尝试安装任何相关的东西时 -`synaptic`建议我安装系统范围内的所有库。有没有办法告诉我`synaptic`使用本地安装的库？

我试图链接`~/.local/lib/python2.7/site-packages`到`/usr/lib/python2.7`- 没有帮助。

**编辑**：

如果我克隆一个python包，并将setup.py中的名称更改为ubuntu包的名称，然后构建：

```
python setup.py bdist --format=rpm 
```

然后用外星人将其转换为deb：

```
sudo alien -k my.rpm 
```

然后安装deb：

```
sudo dpkg -i my.deb 
```

然后`synaptic`确实将其识别为一个包（请记住我在 setup.py 中调整了名称）。

但我找不到让突触了解本地安装的 python 库的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:53:55.790

*在系统级别*管理包的包管理器如何知道安装在用户目录中的东西，与*系统级别*相反的东西？

包管理器根据存储在包（无论是 rpm、deb 等）和/或包存储库中的元信息解决依赖关系。

为了实现您的目标，您可以选择两种选择中的任何一种。

首先是从你的源代码构建一个系统特定的包，然后通过你的包管理器安装它。请参阅[创建内置发行](http://docs.python.org/release/2.7.1/distutils/builtdist.html)版文档。它看起来像这样：

```
$ python setup.py bdist --format=rpm
$ rpm -i dist/$PACKAGE.rpm 
```

这将使您的包管理器意识到已经提供了一些依赖项这一事实。

这种方法可能有效，也可能无效。

另一个首选选项是使用 python 包管理器（例如[pip](http://www.pip-installer.org/en/latest/index.html) ）并将所有包安装在[虚拟环境中](http://pypi.python.org/pypi/virtualenv)。这种方法有几个优点：

1.  您可以拥有多个不同的软件包集，并安装不同版本的软件包。
2.  您可以选择将您的虚拟环境与系统范围内安装的软件包隔离开来。

# android - 我尝试下载一个谷歌文件，没有错误，但它不起作用

> ID：12037632
> 
> 赞同：2
> 
> 时间：2012-08-20T12:27:10.053
> 
> 标签：android, google-drive-api

我正在使用谷歌驱动器开发一个应用程序，我可以使用这些应用程序查看我的文件。我想下载文件，但我不能。这是我的功能，相当于谷歌文档：

提前谢谢！！

```
 /* Download a file's content.
   * 
   * @param service Drive API service instance.
   * @param file Drive File instance.
   * 
   * @return InputStream containing the file's content if successful, {@code null} otherwise.
   */
 public static InputStream downloadFile(Drive service, File file) throws IOException
 {
    if (file.getDownloadUrl() != null && file.getDownloadUrl().length() > 0)
     {
     try
     {
     HttpResponse resp = service.getRequestFactory().buildGetRequest(new GenericUrl(file.getDownloadUrl())).execute();
     return resp.getContent();
     }
     catch (IOException e)
     {
     // An error occurred.
     e.printStackTrace();
     return null;
     }
     }
    else
     {
     // The file doesn't have any content stored on Drive.
     return null;
     }
 } 
```

Logcat 中没有错误，但我在下载、sd 卡等中没有看到任何文件

如果没有错误，我必须非常仔细地查看sd卡，系统等？

肯定是别的什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:36:22.047

您正在获取文件内容并返回一个，`InputStream`但是您的代码没有显示您在做什么`InputStream`。您需要使用它将文件的内容保存到磁盘或数据库等...请查看[FaddishWorm](https://stackoverflow.com/users/723618/faddishworm)在将文件写入 SD 卡的评论中发送给您的链接：[使用 Android 下载文件，并显示ProgressDialog 中的进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# linux - bash cat 多个文件

> ID：12037634
> 
> 赞同：12
> 
> 时间：2012-08-20T12:27:19.203
> 
> 标签：linux, bash, shell, cat

我正在尝试`cat`三个文件并在每个文件之后获取并插入一个换行符`\n` ，我想使用类似的东西：

```
cat f1 f2 f3|tr "\EOF" "\n" 
```

没有成功。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-20T12:30:06.247

```
cat f1 <(echo) f2 <(echo) f3 <(echo) 
```

或者

```
perl -pe 'eof&&s/$/\n/' a b c 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T12:31:29.403

一旦你`cat`有了文件，它们之间就不会有EOF，也没有其他方法可以找到边界，所以我建议像`for file in f1 f2 f3; do cat $file; echo; done`或者，带有缩进，

```
for file in f1 f2 f3; do
    cat $file;
    echo;
done 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-20T12:31:18.153

`EOF` *不是*字符，甚至不是 CTRL-D - 这只是在交互式输入中指示 EOF 的常用终端方法。所以你不能使用翻译字符的工具来以某种方式修改它。

对于这个简单的案例，*最简单*的方法是不要再担心尝试一次性完成它了`cat`:-)

```
cat f1; echo; cat f2; echo; cat f3 
```

会做得很好。任何更多数量的文件都可能值得一个脚本，但我看不出这个小案例的必要性。

如果您想组合所有这些流以进行进一步处理，只需在子 shell 中运行它们：

```
( cat f1; echo; cat f2; echo; cat f3 ) | some_process 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-11T08:10:25.023

我遇到了类似的问题，我的情况对我最有效的是：

```
grep "" file1 file2 file3 | awk -F ':' '{print $2}' 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-21T14:09:55.533

试试这个：

```
find f1 f2 f3 | xargs cat 
```

# c++ - #error 你必须定义平台宏

> ID：12037638
> 
> 赞同：0
> 
> 时间：2012-08-20T12:27:28.493
> 
> 标签：c++, macros, cross-platform, c-preprocessor

我有一个要编译的项目，它给了我以下错误：

```
In file included from c:/acrobatxsdk/Adobe/Acrobat 10 SDK/Version 1/PluginSupport/Headers/API/PIMain.c:21:0:
c:/acrobatxsdk/Adobe/Acrobat 10 SDK/Version 1/PluginSupport/Headers/API/Environ.h:37:2: error: #error You must define the PLATFORM macro
c:/acrobatxsdk/Adobe/Acrobat 10 SDK/Version 1/PluginSupport/Headers/API/Environ.h:41:10: error: #include expects "FILENAME" or <FILENAME>
c:/acrobatxsdk/Adobe/Acrobat 10 SDK/Version 1/PluginSupport/Headers/API/Environ.h:52:2: error: #error PLATFORM failed to #define ACCB1 
```

PIMain.c 看起来像这样：

```
#if WIN_PLATFORM
#include "WinCalls.h"
#elif MAC_PLATFORM
#include "MacCalls.h"
#elif UNIX_PLATFORM
#include "UnixCalls.h"
#else
#error platform not defined
#endif 
```

我知道，如果需要，唯一的修改是在 Environ.h 中进行，有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:29:28.947

`Environ.h`正在寻找该`PLATFORM`指令，并且如果您没有定义它，那么有一个预处理器或编译时标志来“抛出”错误。在此处查看`#error`指令的工作原理[（MSDN 链接）](http://msdn.microsoft.com/en-us/library/c8tk0xsk%28v=vs.71%29.aspx)。

我找到了代码`Environ.h`：

```
#ifndef PLATFORM
#ifdef WIN_ENV
#define PLATFORM "winpltfm.h"
#elif __OS2__
#define PLATFORM "os2pltfm.h"
#elif defined(unix) || defined(__unix)
 #define PLATFORM "UnixPlatform.h"
#else
#error You must define the PLATFORM macro
#endif
#endif 
```

您显然没有在受支持的平台上运行。

# .htaccess - 如果有 $_GET 变量，.htaccess 不会重写

> ID：12037647
> 
> 赞同：0
> 
> 时间：2012-08-20T12:28:45.973
> 
> 标签：.htaccess, url-rewriting

您好我正在尝试确保我的所有网址都已更正为以正斜杠结尾，因此如果用户键入

```
http://www.mydomain.com/blogPost 
```

它会变成

```
http://www.mydomain.com/blogPost/ 
```

我在这里找到了这个问题的答案[How can I force some pages to end in a slash [.htaccess]](https://stackoverflow.com/questions/324381/how-can-i-force-some-pages-to-end-in-a-slash-htaccess/#answer-1747056)（感谢 Andrew G. Johnson）。

除了有 $_GET 变量之外，这个解决方案几乎可以完美地工作。所以当 url 有这样的 $_GET 变量时

```
http://www.mydomain.com/blogPost/^start=10 
```

htaccess 将其重写为

```
http://www.mydomain.com/blogPost/^start=10/ 
```

这会导致错误。

从堆栈溢出问题复制的原始代码如下所示

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [L,R=301] 
```

因此，当有 $_GET 变量时，要让 htaccess 忽略 url，我尝试在上面的代码中添加 RewriteCond 以检查 REQUEST_URI 是否有 ^（因为在此站点上 $_GET 变量以 ^ 而不是 ? 开头）而且我已经尝试过以下所有但没有任何作用。谁能指出我正确的方向

```
RewriteCond %{REQUEST_URI} [^\^]

RewriteCond %{REQUEST_URI} ![^\^]

RewriteCond %{REQUEST_URI} ^(.*[^\^]) 
```

（我也用 {QUERY_STRING} 尝试了上述方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:28:14.463

这应该使得带有 a 的 URI`^`被忽略：

```
RewriteCond %{REQUEST_URI} !\^ 
```

但是它没有解决前面没有斜线的*情况*，这个单独的规则应该注意：

```
RewriteCond %{REQUEST_URI} [^/]\^
RewriteRule ^(.*)\^(.*)$ /$1/^$2 [L,R,NE] 
```

# css - 在网页上使用黑色背景真的有助于节能吗？

> ID：12037649
> 
> 赞同：-1
> 
> 时间：2012-08-20T12:28:52.493
> 
> 标签：css, background, energy

使用像[Blackle](http://en.wikipedia.org/wiki/Blackle)这样的黑色背景是否真的为 Google 搜索节省了能源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:30:23.563

仅在 CRT 上。LCD 具有始终亮着的背光，即使显示黑色也是如此。

Blackle 自己展示了这张表：

![所选显示器的显示器电源变化（结论是 LCD 并不重要，如果白色而不是黑色的电源使用量最多增加 188%，CRT 会有所不同。最小差异是 118% 以上。](../Images/02d5dc71d267077a2929c83ddea80839.png)

# c++ - 为什么同时包含两者 和

> ID：12037651
> 
> 赞同：0
> 
> 时间：2012-08-20T12:28:56.807
> 
> 标签：c++, stream, iostream, fstream

> **可能重复：**
> [为什么我需要同时包含 iostream 和 fstream 标头才能打开文件](https://stackoverflow.com/questions/2451681/why-do-i-need-to-include-both-the-iostream-and-fstream-headers-to-open-a-file)

我写了这段代码：

```
#include <iostream>
int main()
{
   std::ofstream file_out("file.txt");
   file_out.close();

   return 0;
} 
```

`std::ofstream`中定义`<iostream>`，但编译此代码我得到以下错误：

```
error: variable 'std::ofstream file_out' has initializer but incomplete type 
```

我发现如果我还包括`<fstream>`错误消失并且代码编译。为什么我要包括`<fstream>`if `std::ofstream`is included in `<iostream>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:42:05.570

你有一个错字：你的意思是有一个`ofstream`，但你的代码说`ostream`。后者只是一个基类，不能直接实例化。（你需要`<fstream>`它的标题，而不是`<iostream>`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:32:41.077

> `std::ofstream`定义在`<iostream>`

没有。它可以在那里*声明*，但它是在`fstream`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:31:36.300

因为定义在`#include <fstream>` . 你还应该看看：

[为什么我需要同时包含 iostream 和 fstream 标头才能打开文件](https://stackoverflow.com/questions/2451681/why-do-i-need-to-include-both-the-iostream-and-fstream-headers-to-open-a-file)以获取更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:31:58.907

因此，C++ 标准没有说明在其他头文件中包含头文件。对于构造和使用`std::ofstream`- 你应该包括`fstream`标题。

# javascript - Node.js Mongodb-native 驱动连接共享

> ID：12037655
> 
> 赞同：2
> 
> 时间：2012-08-20T12:29:12.823
> 
> 标签：javascript, node.js, mongodb

***main.js***

```
var http = require('http');
var UserModel = require('./models/user.js');
var server = http.createServer(function(req, res){
  UserModel.create({
  }), function(e, o){
    if(e) { console.log(e); } else {
    } console.log(o); }
  });
}).listen(3000); 
```

***连接.js***

```
var mongo = require('mongodb');

module.exports = {
    dbMain: new mongo.Db('main', new mongo.Server('127.0.0.1', 27017, { auto_reconnect: true }, {})),
    dbLog: new mongo.Db('log', new mongo.Server('127.0.0.1', 27017, { auto_reconnect: true }, {}))
}; 
```

***/models/user.js***

```
var mongodb = require('mongodb');
var db = require('./connections.js').dbMain;

module.exports = {
  create: function(newData, callback){
    db.open(function(e, db){
      db.collection('users', function(e, collection){
        collection.insert(newData, callback);
      });
    });
  }
} 
```

当我使用上面的代码时，服务器崩溃的问题是，第二次请求进来，我们仍然打开了数据库连接，所以让我们将 db.close 添加到我们的 Users.create 函数中。

```
 create: function(newData, callback){
    db.open(function(e, db){
      db.collection('users', function(e, collection){
        collection.insert(newData, function(e, o){
          db.close(); // Voila.
          callback(e, o);
        });
      });
    });
  } 
```

在这个阶段，服务器仍然会崩溃，因为打开了多个连接，我不明白为什么会发生这种情况或如何发生这种情况，但它确实发生了。

我如何将我的项目组织成模型（我不想使用 Mongoose，我的验证是在不同的层而不是模型中完成的，所以 Mongoose 对我来说太过分了）？另外我如何处理项目中的连接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T14:31:25.350

你可以有一个很好地包装所有这些的库——这意味着只有一个到数据库的连接将被打开，并且第二个请求将返回相同的（打开的）连接——如果你每秒获得 1000+，这是成败问题（即不重新打开每个请求的连接）...

**用户.js**：

```
var connections = require('./connections.js');

var serverCache = connections('127.0.0.1', 27017); 

module.exports = {
  create: function(newData, callback){
    serverCache('main', 'users', function(e, collection){
      collection.insert(newData, callback);
    })
  }
} 
```

**连接.js**

```
var mongo = require('mongodb');

// a mongo connection cache
// pass in host & port
// it returns a function accepting dbName, collectionName & callback
var mongoCache = function(host, port){

  // keep our open connections
  var mongoDatabases = {};

  var ensureDatabase = function(dbName, readyCallback){
    // check if we already have this db connection open
    if(mongoDatabases[dbName]){
      readyCallback(null, mongoDatabases[dbName]);
      return;
    }

    // get the connection
    var server = new mongo.Server(host, port, {auto_reconnect: true});

    // get a handle on the database
    var db = new mongo.Db(dbName, server);
    db.open(function(error, databaseConnection){
      if(error) throw error;

      // add the database to the cache
      mongoDatabases[dbName] = databaseConnection;

      // remove the database from the cache if it closes
      databaseConnection.on('close', function(){
        delete(mongoDatabases[dbName]);
      })

      // return the database connection
      readyCallback(error, databaseConnection);
    })
  }

  var ensureCollection = function(dbName, collectionName, readyCallback){

    ensureDatabase(dbName, function(error, databaseConnection){
      if(error) throw error;

      databaseConnection.createCollection(collectionName, function(error, collection) {
        if(error) throw error;

        // return the collection finally
        readyCallback(error, collection);
      })

    })
  }

  return ensureCollection;
}

module.exports = mongoCache; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:04:56.023

我目前正在使用具有多个 http 请求的全局连接。过去，我创建了一个复杂的库，它创建了几个到 MongoDB 的连接，并为每个连接随机选取一个。

后来我发现原生驱动可以为我做到这一点，非常简洁。目前我使用的是单个对象，驱动程序选择向哪个连接发送查询。

```
var srvOpts = {
    auto_reconnect: true,
    poolSize: 10,
};

var conn = new Mongo.Server("localhost", 27017, srvOpts),
    db = new Mongo.Db("dbname", conn, {});

db.open(function (){}); 
```

你可以，这是一个好主意，我正在考虑将这个想法复制到我正在使用的 Redis 驱动程序中，但我的时间很短，所以我怀疑我是否会很快这样做。

# gwt - 在 gwt 中添加为树项小部件后，键盘的箭头键在 TextArea 和 Texbox 中不起作用

> ID：12037656
> 
> 赞同：1
> 
> 时间：2012-08-20T12:29:20.060
> 
> 标签：gwt

在 gwt 中添加为树项小部件后，键盘的箭头键在 TextArea 和 Texbox 中不起作用

```
 public class TreeWidget implements EntryPoint {
          @Override
                public void onModuleLoad() {
                    VerticalPanel panel=new VerticalPanel();
                    TextArea textArea=new TextArea();
                    Tree tree=new Tree();
                    TreeItem item=new TreeItem();
                    item.addItem(textArea);
                    tree.addItem(item);
                    panel.add(tree);
                    RootPanel.get().add(panel);

                }}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:37:27.297

我认为树的键盘导航正在捕获关键事件。

您可以通过这种方式禁用它：创建一个不使用键盘导航的树实例。您必须覆盖告诉每个树项是否使用键的方法。

最简单的方法：

```
Tree tree = new Tree() {
  @Override
  public boolean isKeyboardNavigationEnabled(TreeItem currentItem) {
     return false; // no items will have key navigation
  }
}; 
```

如果它有效，那么问题是键盘导航。您可以询问树项目是否与文本区域一起使用，并`return false`让键盘用于文本。

# asp.net-mvc - MVC 4 和 Ninject：如何将客户端的用户 ID 添加到注入的类中？

> ID：12037659
> 
> 赞同：1
> 
> 时间：2012-08-20T12:29:32.097
> 
> 标签：asp.net-mvc, ninject, asp.net-mvc-4

我正在使用 Ninject 3.0 将服务层数据访问类注入到我的控制器中。我想在运行时将客户端的域用户 ID 添加到这些类，但无法弄清楚我应该使用什么方法。目前我`NinjectModule`看起来像这样：

```
public class NinjectBindModule : NinjectModule
{
    public override void Load()
    {
        Bind<ISomeRepo>().To<SomeRepo>();
    }
} 
```

我的问题，实际上分为两部分：

1.  我应该使用`WithConstructorArgument`将用户 ID 获取到`SomeRepo`，还是其他东西（属性？）。我什至可以在绑定模块中执行此操作，还是必须在内核或控制器级别执行此操作？
2.  我应该使用什么方法来检索客户的域用户 ID？我认为我不能在内核级别或绑定模块中使用[Controller.User 属性，可以吗？](https://stackoverflow.com/a/263853/27457)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:36:50.710

```
public class NinjectBindModule : NinjectModule
{
    public override void Load()
    {
        Bind<ISomeRepo>().To<SomeRepo>();
        Bind<IPrincipal>()
            .ToMethod(ctx => HttpContext.Current.User)
            .InRequestScope();
    }
} 
```

接着：

```
public class SomeRepo : ISomeRepo
{
    private readonly IPrincipal _principal;
    public SomeRepo(IPrincipal principal)
    {
        _principal = principal;
    }

    ... some methods that will have access to the principal
} 
```

# asp.net - ASP.NET 中两个单词的正则表达式？

> ID：12037660
> 
> 赞同：1
> 
> 时间：2012-08-20T12:29:33.047
> 
> 标签：asp.net, regex

基本上我正在尝试编写一个将接受两个单词的正则表达式，这些单词可以包含任何字母，但不能包含数字。

我目前有：

```
^[a-zA-Z+#-.0-9]/s^[a-zA-Z+#-.0-9]$ 
```

虽然我确定这是错误的，因为它不允许两个单词用空格分隔，但它目前也允许数字。

有人知道我需要什么正则表达式代码才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:56:15.403

虽然使用`\w`速记字符类的东西*可能*对您有用，但您专门写了`can contain any letters, but not numbers`，因此您必须使用：

```
^[a-zA-Z]+\s+[a-zA-Z]+$ 
```

您的表达式允许使用数字（以及`+`这些字符中的任何一个：），`#$%&*()-',.`因为您在字符类中包含了所有这些字符`[a-zA-Z+#-.0-9]`，这意味着小写和大写字母、符号、从to 的`+`任何 ASCII 字符（包括）和任何 numbers 。`#``.``$%&*()-',``0-9`

速记字符类`\w`允许字母、数字和下划线 ( `_`)

我可能会建议您先阅读有关正则表达式的简短教程，然后再为您确定解决方案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:31:37.593

这应该可以解决问题！:)

```
//Allow letters and numbers
^\w+\s\w+$ 

//Allow only letters
^[a-zA-Z]+\s+[a-zA-Z]+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:31:46.827

怎么样：

```
^\w+\s+\w+$ 
```

# .net - 使用 IAM 凭证的 Amazon S3 .net sdk

> ID：12037662
> 
> 赞同：1
> 
> 时间：2012-08-20T12:29:41.460
> 
> 标签：.net, amazon-s3

我想使用 Amazon .net sdk 将文件上传到我组织的 S3 存储桶之一。该组织的所有员工都获得了 AWS Identity & Access Management (IAM) 用户名​​和密码。当我安装 AWS .NET SDK 并尝试运行示例应用程序时，它需要访问密钥 ID 和密钥（我不知道）。是否可以选择使用我的 IAM 用户名和密码来开发类似的应用程序或任何其他不需要使用访问密钥 ID 和密钥的选项。请帮忙。非常感谢任何帮助（一种教程）AWS .NET SDK，因为我对此完全陌生。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:18:44.347

访问密钥和密钥与 Amazon S3 帐户绑定。.NET SDK 的教程位于以下链接。[http://aws.amazon.com/sdkfornet/](http://aws.amazon.com/sdkfornet/)代码示例非常好，一目了然。

# c++ - 为模板函数参数指定默认值

> ID：12037681
> 
> 赞同：12
> 
> 时间：2012-08-20T12:30:33.707
> 
> 标签：c++, templates

你能解释一下为什么下面的代码不能编译吗？一个明显的解决方法是添加 1 参数重载`Apply`，有更简单的吗？

```
template <typename T>
T Identity(const T& i_val)
  {
  return i_val;
  }

template <typename Val, typename Fn>
Val Apply(const Val& v, Fn fn = Identity<Val>)
  {
  return fn(v);
  }

int main() {
  Apply(42);              // error: no matching function for call to 'Apply(int)'
  Apply(42, Identity<int>); // OK
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T12:37:27.333

模板参数推导不是这样工作的——你不能从默认值中推导出参数的类型。但是，在 C++11 中，您可以指定默认模板参数：

```
template <typename Val, typename Fn = Val(&)(Val const &)>
Val Apply(const Val& v, Fn fn = Identity<Val>)
{
   return fn(v);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T12:40:33.877

查找要调用的函数包括： 1\. 创建候选集，其中包括模板参数推导 2\. 确定最佳重载

如果我正确理解标准，只有实际的函数参数（即，不是默认的）参与推导模板参数。因此，从参数`42`中，编译器只能推断出`Val`= `int`。重载不会进入候选集，并且从不查看默认参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:32:53.417

Apply 是一个模板化的函数。你需要做`Apply<MyValueType,MyFuncType>(42);`

您可以合理地期望编译器推断`Val`为`int`，但您不能期望它推断函数的类型，即使您已经给出了默认参数。因此，它不会推断您正在尝试调用该`Apply`函数的声明。

# android - 在android中获取选定月份和年份的日期列表/数组

> ID：12037686
> 
> 赞同：1
> 
> 时间：2012-08-20T12:31:01.673
> 
> 标签：android, arrays, sqlite, date, android-listview

我们如何获取选定月份和年份的日期列表/数组示例：2012 年 8 月。这样用户就可以在 android 中选择该月的特定日期。还有什么是在android sqlite数据库中存储日期（例如01-05-2012）以便以后可以轻松比较的有效方法。

非常感谢关心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:34:12.810

对于您的 sqlite 数据库，使用类型为 DATETIME 的列

有关 DATETIME 的更多信息，请参见：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

您还应该创建一个日期对象数组，以便进行比较等：

[Java中的日期数组](https://stackoverflow.com/questions/1801044/array-of-dates-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:40:28.027

对于日期选择，您可以使用 DateSlider 框架。

花哨的设计和高度可定制的：

[http://code.google.com/p/android-dateslider/](http://code.google.com/p/android-dateslider/)

# jquery - 以特定时间逐字突出显示一行

> ID：12037688
> 
> 赞同：3
> 
> 时间：2012-08-20T12:31:05.167
> 
> 标签：jquery

我有这样的一行：`the world is so big`

我想知道如何通过带有 jQ​​uery 的计时器逐字突出显示这一行（例如突出显示必须在 20 秒内完成）。我搜索了很多谷歌和论坛，但我找不到一个好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:37:08.317

一个解决方案：http: [//jsfiddle.net/fCWXL/](http://jsfiddle.net/fCWXL/)

**HTML：**

```
<span id=sentence><span class=tok>The</span> <span class=tok>word</span> <span class=tok>is</span> <span class=tok>too</span> <span class=tok>big</span></span>​ 
```

**javascript：**

```
var tokens = $('#sentence').find('.tok');
var n = tokens.length;
var index = 0;
setInterval(function(){
    tokens.css('background-color', 'white');
    $('#sentence').find('.tok:eq('+(index%n)+')').css('background-color', 'red');
    index++;
}, 20000/n); 
```

这个想法很简单，每 20000/n 毫秒，改变下一个令牌的背景。​ 当然，您必须调整它以获得确切的预期效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:03:21.057

## *[jsBin 演示](http://jsbin.com/ipovul/6/edit)*

有这个：

```
<p class="word">the world is so big</p> 
```

这个想法是让 jQuery 将每个单词包装成 span，这样您就不必手动进行：

```
 $(this).contents().wrap('<span></span>');
  $(this).html( $(this).html().replace(/ /ig,'</span> <span>') ); 
```

并创建一个 setInterval 来突出显示（添加一个类）段落中的每个单词。这是整个代码：

```
$('p.word').each(function(){

  $(this).contents().wrap('<span></span>');
  $(this).html( $(this).html().replace(/ /ig,'</span> <span>') );

  var span = $(this).find('span');
  var countSpans = span.length;
  var i = 0;
  var inter;

  function highlighting(){
    if(i<countSpans){
      span.removeClass('highlight').eq(i++).addClass('highlight'); 
    }else{
      clearInterval(inter);
      span.removeClass('highlight');
    }
  }
  inter = setInterval(highlighting, 8000/countSpans);

}); 
```

# xml - 使用 OASIS XML Catalog（Maven 或 Ant）的 XML Schema 验证

> ID：12037689
> 
> 赞同：0
> 
> 时间：2012-08-20T12:31:12.020
> 
> 标签：xml, ant, xsd, maven-3, xml-validation

我正在尝试为我们公司的 XSD 设置一个产品，以针对这些 XSD 验证一堆 XML 文件。

我们的项目是基于 maven 的，我使用 ant 脚本来生成目录文件（这使得将所有这些模式添加到 eclipse 实例中变得更加容易）。

我遇到的问题是我无法设置一个 maven 或 ant 任务，该任务通过使用 XML 目录针对这些模式验证一堆示例 xml 文件。我不想为所有这些模式明确定义 URN 到 XSD 规则（这就是我使用 XML Catalg 的目的）。

我尝试了以下设置：

**马文**

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>xml-maven-plugin</artifactId>
    <version>1.0</version>
    <executions>
        <execution>
            <goals>
                <goal>validate</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <catalogs>
            <catalog>${project.build.outputDirectory}/catalog.xml</catalog>
        </catalogs>
        <validationSets>
            <validationSet>
                <dir>src/test/xml</dir>
                <validating>true</validating>
            </validationSet>
        </validationSets>
    </configuration>
</plugin> 
```

这无法解析catalog.xml。基础 catalog.xml 包含未正确展开的相对 nextCatalog 条目（绝对路径错误）。当我直接将 2 个 catalog.xml 条目添加到 pom 时，只解析第一个。

但是即使只解析了第一个 catalog.xml 文件也无法验证 xml 文件：

```
 line 4,  column 191: cvc-elt.1: Cannot find the declaration of element 'mtc:SERVICE_ORDER_MSG'. 
```

示例 XML 文件是有效的，因此显然 maven 不会将通过目录加载的模式与验证器链接起来。使用 -XI 确实可以看到它处理目录并查看模式及其名称空间。

**蚂蚁**

使用 ant 我尝试了以下设置（尝试了在互联网上找到的各种建议）：

```
<target name="test">
    <schemavalidate warn="true" failonerror="true" fullchecking="true">
        <fileset dir="src/test/xml">
            <include name="ASN_207a44e3-0aeb6cd8-551ffcc2-2ca1409a.xml" />
        </fileset>
        <xmlcatalog>
            <classpath>
                <pathelement location="resolver.jar" />
                <pathelement location="ant-apache-resolver-1.8.4.jar" />
            </classpath>
            <xmlcatalog>
                <catalogpath>
                    <pathelement location="target/classes/MTC/catalog.xml" />
                </catalogpath>
            </xmlcatalog>
        </xmlcatalog>
    </schemavalidate>
</target> 
```

在这种情况下，我没有任何迹象表明目录文件已被解析。我只得到意外元素的错误。当我将 ant 脚本更改为直接使用架构文件时，它可以工作，但这不是我想要的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:56:30.223

最后，我在 maven 项目中为每个 XSD 创建了一个验证集，并将要测试的文件放在单独的文件夹中。

```
<validationSet>
  <dir>src/test/xml/foo</dir>
  <validating>true</validating>
  <systemId>http://example.org/schema/foo.xsd</systemId>
</validationSet>
<validationSet>
  <dir>src/test/xml/bar</dir>
  <validating>true</validating>
  <systemId>http://example.org/schema/bar.xsd</systemId>
</validationSet> 
```

第二个 catalog.xml 显然已正确读取。

# android - iphone和android中的闹钟应用程序使用phonegap

> ID：12037692
> 
> 赞同：3
> 
> 时间：2012-08-20T12:31:26.853
> 
> 标签：android, jquery, xcode, jquery-plugins, cordova

在使用 phonegap 开发 iphone 和 android 应用程序时，到了我必须构建像图像这样的闹钟功能的地步。

![闹钟](../Images/2f5ae85e7e01c46cd7cb02ed94d12cab.png)

我正在使用当用户在应用程序中正常运行的 Jquery 设置警报。但是当应用程序关闭或手机处于睡眠模式时，它不起作用。

有什么办法可以继续吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:49:45.893

我不确定是否有 phonegap 等价物，但在 Android 中，您需要使用 AlarmManager 来发出警报。这将在触发警报时启动您的应用程序。当您有活动的警报时，您还需要设置 WakeLock。否则设备可能会进入睡眠模式，您将不会收到警报：

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

Android 警报使用 PARTIAL_WAKE_LOCK 并且仅在有活动警报时使用。

# android - 短信日志 - 内容解析器

> ID：12037694
> 
> 赞同：0
> 
> 时间：2012-08-20T12:31:32.230
> 
> 标签：android, logging, sms

我对短信日志没有什么疑问。他们中的一些人在论坛上，但我只是想获得另一种意见。

首先，我读到不建议对 sms(getContentResolver().query(Uri.parse("content://sms/"..)) 使用内容解析器，因为它不在官方 api 中。你认为有更好的方法来获取这些信息吗？

我还想在接收/发送消息时触发一个动作（比如启动一个服务）。对于收到的消息，您可以使用 android.provider.Telephony.SMS_RECEIVED 添加广播接收器。有没有办法对发送的消息执行此操作？从我所看到的内容观察器仅在应用程序处于活动状态时才起作用，并且我想要可以一直运行的东西。

我想知道是否有办法查询已删除的短信（包括内容解析器）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:39:34.720

> 你认为有更好的方法来获取这些信息吗？

更好的？不，还有更糟糕的 - 获得 root 权限并直接查询 SMS db。

> 我想知道是否有办法查询已删除的短信（包括内容解析器）。

我猜当从数据库中删除数据时，没有办法将其取回。

# android - 短时间内更改按钮背景

> ID：12037703
> 
> 赞同：1
> 
> 时间：2012-08-20T12:32:04.923
> 
> 标签：android

我想在按下按钮后的短时间内更改按钮背景颜色。在那段时间之后，按钮应该恢复到以前的状态。对于这个问题，处理程序可能是正确的决定，不幸的是我没有找到做类似事情的工作示例。如果有人能给我一个简短的例子来说明如何做这样的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:47:07.900

做这个 ：

```
public class LaunchActivity extends Activity implements OnTouchListener{

private Button yourButton;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
    setContentView(R.layout.main);      

    yourButton= (Button)findViewById(R.id.yourButton);
    yourButton.setOnTouchListener(this); 

}

@Override
public boolean onTouch(final View view, MotionEvent event) {

final int action = event.getAction();

    if(view.getId()==R.id.yourButton){
        if(action == MotionEvent.ACTION_DOWN)
              yourButton.setBackgroundResource(R.drawable.ic_button_pressed);
        if(action == MotionEvent.ACTION_UP){
               Handler handler = new Handler(); 
               handler.postDelayed(new Runnable() { 
               public void run() { 
              yourButton.setBackgroundResource(R.drawable.ic_button_normal); 
           } 
         }, 2000); 

        }
    } 
```

} }

或使用 onClick 侦听器：

```
@Override
public void onClick(View v) {
    yourButton.setBackgroundResource(R.drawable.first_icon);
    // SLEEP 2 SECONDS HERE ...
    Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
         public void run() { 
              yourButton.setBackgroundResource(R.drawable.second_icon); 
         } 
    }, 2000); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:36:44.750

您可以在下面为您的按钮定义一个 XML 背景`res/drawable/button_background`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_background_pressed" android:state_pressed="true" />
    <item android:drawable="@drawable/button_background_notpressed"/>
</selector> 
```

并使用`ImageButton`

```
<ImageButton
    ...
    android:background="@drawable/button_background"
    ... /> 
```

# javascript - 为什么谷歌应用程序电子表格 setValue 函数不在单元格中设置值？

> ID：12037705
> 
> 赞同：0
> 
> 时间：2012-08-20T12:32:21.950
> 
> 标签：javascript, google-apps-script, google-docs, google-sheets, google-spreadsheet-api

为什么我不能在 Google Apps 电子表格 API 中使用 setValues 来设置电子表格中单元格的值？

我输入了正确的单元格，值似乎没问题。但是细胞中什么也没有出现！我使用以下内容在工作表中的第一行之后创建行。

```
sheet.insertRowsAfter(1,15); 
```

之后我做了这个

```
sheet.setActiveCell("C2").setValue("AAA"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T23:04:35.687

问题是您需要先获取范围，然后才能将值设置到其中。您的代码应该是：

```
sheet.getRange("c2").setValue("AAA"); 
```

GAS 和 VBA 之间的这种差异让我花了一点时间来适应。您必须先“掌握”一个范围，然后才能更改或设置其值。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-20T12:32:21.950

我自己找到了这个问题的答案，并想防止其他人遇到同样的问题。

Google aps api 会将新单元格的默认字体颜色设置为其上方的颜色。我在描述列中使用了蓝底白字。白色字体颜色传播，但没有传播背景，导致白底白字。我终于找到了这个并通过使用设置单元格字体颜色来纠正它

`setFontColor("#000000");`

# android - 如何在带有动画的 Android 画布上绘制路径？

> ID：12037709
> 
> 赞同：30
> 
> 时间：2012-08-20T12:32:49.667
> 
> 标签：android, android-animation, android-canvas

我正在制作一个 Android 应用程序，我有一件棘手的事情要做。我需要在画布上绘制一条路径，但绘图应该是动画的（即，一点一点地绘制，并有一点延迟）。

是否可以使用 Android SDK 制作这样的东西？如果没有，我怎么能产生这种效果？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-20T12:39:42.503

试试这段代码，我用它用`Path`&画了一个心跳`Canvas`：

```
public class TestActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new HeartbeatView(this));

    }

    public static class HeartbeatView extends View {

        private static Paint paint;
        private int screenW, screenH;
        private float X, Y;
        private Path path;
        private float initialScreenW;
        private float initialX, plusX;
        private float TX;
        private boolean translate;
        private int flash;
        private Context context;

        public HeartbeatView(Context context) {
            super(context);

            this.context=context;

            paint = new Paint();
            paint.setColor(Color.argb(0xff, 0x99, 0x00, 0x00));
            paint.setStrokeWidth(10);
            paint.setAntiAlias(true);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStyle(Paint.Style.STROKE);
            paint.setShadowLayer(7, 0, 0, Color.RED);

            path= new Path();
            TX=0;
            translate=false;

            flash=0;

        }

        @Override
        public void onSizeChanged (int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);

            screenW = w;
            screenH = h;
            X = 0;
            Y = (screenH/2)+(screenH/4)+(screenH/10);

            initialScreenW=screenW;
            initialX=((screenW/2)+(screenW/4));
            plusX=(screenW/24);

            path.moveTo(X, Y);

        }

        @Override
        public void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            //canvas.save();    

            flash+=1;
            if(flash<10 || (flash>20 && flash<30))
            {
                paint.setStrokeWidth(16);
                paint.setColor(Color.RED);
                paint.setShadowLayer(12, 0, 0, Color.RED);
            }
            else
            {
                paint.setStrokeWidth(10);
                paint.setColor(Color.argb(0xff, 0x99, 0x00, 0x00));
                paint.setShadowLayer(7, 0, 0, Color.RED);
            }

            if(flash==100)
            {
                flash=0;
            }

            path.lineTo(X,Y);
            canvas.translate(-TX, 0);
            if(translate==true)
            {
                TX+=4;
            }

            if(X<initialX)
            {
                X+=8;
            }
            else
            {
                if(X<initialX+plusX)
                {
                    X+=2;
                    Y-=8;
                }
                else
                {
                    if(X<initialX+(plusX*2))
                    {
                        X+=2;
                        Y+=14;
                    }
                    else
                    {
                        if(X<initialX+(plusX*3))
                        {
                            X+=2;
                            Y-=12;
                        }
                        else
                        {
                            if(X<initialX+(plusX*4))
                            {
                                X+=2;
                                Y+=6;
                            }
                            else
                            {
                                if(X<initialScreenW)
                                {
                                    X+=8;
                                }
                                else
                                {
                                    translate=true;
                                    initialX=initialX+initialScreenW;
                                }
                            }
                        }
                    }
                }

            }

            canvas.drawPath(path, paint);

            //canvas.restore(); 

            invalidate();
        }
    }

} 
```

它使用计数器逐点绘制路径，并带有几个效果。你可以把你需要的东西转移到更高效的 SurfaceView 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:36:53.270

我希望这就是你要找的。它在用户触摸上绘制路径，你可以简单地调整它来实现你想要的。

```
public class MyCanvas extends Activity implements OnTouchListener{

        DrawPanel dp;
        private ArrayList<Path> pointsToDraw = new ArrayList<Path>();
        private Paint mPaint;
        Path path;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            dp = new DrawPanel(this);
            dp.setOnTouchListener(this);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            mPaint = new Paint();
            mPaint.setDither(true);
            mPaint.setColor(Color.WHITE);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(30);

            FrameLayout fl = new FrameLayout(this);  
            fl.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
            fl.addView(dp);  
            setContentView(fl);  

        }

        @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
            dp.pause();
        }

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();
            dp.resume();
        }

        public class DrawPanel extends SurfaceView implements Runnable{

            Thread t = null;
            SurfaceHolder holder;
            boolean isItOk = false ;

            public DrawPanel(Context context) {
                super(context);
                // TODO Auto-generated constructor stub
                holder = getHolder();
            }

            @Override
            public void run() {
                // TODO Auto-generated method stub
                while( isItOk == true){

                    if(!holder.getSurface().isValid()){
                        continue;
                    }

                    Canvas c = holder.lockCanvas();
                    c.drawARGB(255, 0, 0, 0);
                    onDraw(c);
                    holder.unlockCanvasAndPost(c);
                }
            }

            @Override
            protected void onDraw(Canvas canvas) {
                // TODO Auto-generated method stub
                super.onDraw(canvas);
                            synchronized(pointsToDraw)
                            {
                for (Path path : pointsToDraw) {
                    canvas.drawPath(path, mPaint);
                }
                            }
            }

            public void pause(){
                isItOk = false;
                while(true){
                    try{
                        t.join();
                    }catch(InterruptedException e){
                        e.printStackTrace();
                    }
                    break;
                }
                t = null;
            }

            public void resume(){
                isItOk = true;  
                t = new Thread(this);
                t.start();

            }

        }

        @Override
        public boolean onTouch(View v, MotionEvent me) {
            // TODO Auto-generated method stub
                    synchronized(pointsToDraw)
                    {
            if(me.getAction() == MotionEvent.ACTION_DOWN){
                path = new Path();
                path.moveTo(me.getX(), me.getY());
                //path.lineTo(me.getX(), me.getY());
                pointsToDraw.add(path);
            }else if(me.getAction() == MotionEvent.ACTION_MOVE){
                path.lineTo(me.getX(), me.getY());
            }else if(me.getAction() == MotionEvent.ACTION_UP){
                //path.lineTo(me.getX(), me.getY());
            }
            }       
            return true;

        }

    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-16T18:27:01.770

我用 ObjectAnimator 做到了。我们有任何路径和我们的自定义视图（我们将绘制我们的路径）

```
 private CustomView view;
    private Path path;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        view = findViewById(R.id.custom_view);
        path = new Path();
        path.moveTo(0f, 0f);
        path.lineTo(getResources().getDimension(R.dimen.point_250), 0f);
        path.lineTo(getResources().getDimension(R.dimen.point_250), getResources().getDimension(R.dimen.point_150));

        findViewById(R.id.btnStart).setOnClickListener(v -> {
            test();
        });
    }

    private void test() {
        ValueAnimator pathAnimator = ObjectAnimator.ofFloat(view, "xCoord", "yCoord", path);
        pathAnimator.setDuration(5000);
        pathAnimator.start();
    } 
```

只需将我们的“xCoord”和“yCoord”传递给 CustomView

```
public class CustomView extends View {

    private Paint paint;
    private float xCoord;
    private float yCoord;

    private Path path = new Path();

    public void setXCoord(float xCoord) {
        this.xCoord = xCoord;
    }

    public void setYCoord(float yCoord) {
        this.yCoord = yCoord;
        path.lineTo(xCoord, yCoord);
        invalidate();
    }

    public CustomView(Context context) {
        super(context);
        init();
    }

    public CustomView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    void init() {
        paint = new Paint();
        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStrokeWidth(20);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawPath(path, paint);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T14:02:21.587

This might help... It draws adjacent circles instead of a path to simulate an animatable path.

```
public class PathAnimatable {
private final float CIRCLE_SIZE = 2.5f;
public float SPPED_SCALE = 1f;
private float steps = 0;
private float pathLength;
private PathMeasure pathMeasure;
private float totalStepsNeeded;
private float[] point = new float[]{0f, 0f};
private float stride;

public PathAnimatable() {
  this(null);
}

public PathAnimatable(Path path) {
  super(path);
  init();
}

private void init() {
  pathMeasure = new PathMeasure(path, false);
  pathLength = pathMeasure.getLength();
  stride = CIRCLE_SIZE * 0.5f;
  totalStepsNeeded = pathLength / stride;
  steps = 0;
}

@Override
public void setPath(Path path) {
  super.setPath(path);
  init();
}

// Called this from your locked canvas loop function
public void drawShape(Canvas canvas, Paint paint) {
  if (steps <= pathLength) {
    for (float i = 0; i < steps ; i += stride) {
      pathMeasure.getPosTan(i, point, null);
      canvas.drawCircle(point[0], point[1], CIRCLE_SIZE, paint);
    }
    steps += stride * SPPED_SCALE;
  } else {
    steps = 0;
  }
}
} 
```

# iphone - 单击 URL iOS 时打开应用程序

> ID：12037712
> 
> 赞同：2
> 
> 时间：2012-08-20T12:32:53.817
> 
> 标签：iphone, objective-c, ipad, ios5

我想知道在iOS中单击Safari（或其他浏览器）中的链接时是否有打开应用程序的方法。

我的应用程序发布了一个位置的名称，一个在 Twitter/Facebook 上的屏幕截图，其中也有一个链接。如果用户在 pc 或 iOS 设备上，我需要检测用户何时单击该链接。如果它们不在 iOS 设备上，我想继续到链接页面，否则我想打开应用程序并在打开它时将该位置名称作为参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T12:37:39.807

如果应用程序已注册自定义 URL 方案，则设备将在被要求打开特定方案的 URL 时打开特定应用程序。

这源于`CFBundleURLSchemes`您的应用程序 infoPlist 的键。Apple 的文档包含您入门所需的所有信息。

> 要为您的应用注册 URL 类型，请在应用的 Info.plist 文件中包含 CFBundleURLTypes 键。CFBundleURLTypes 键包含一个字典数组，每个字典都定义了应用程序支持的 URL 方案。表 6-2 描述了要包含在每个字典中的键和值。

在[iOS 编程指南：](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html) “与其他应用程序通信”部分下的高级应用程序技巧中查看更多信息。

## 编辑

为了支持您的问题的*特定*功能，您需要更深入一步。

1.  您的第一个链接必须是标准网址。
2.  从第一个 URL 显示的页面需要检测设备并将用户转发到第二个 URL，该 URL 将在设备上打开应用程序，其中包含您要转发到应用程序的任何参数。

*所以*- 你要做的是在你的第一个 URL 指向的页面中构建某种设备检测。在该页面上，检测设备，然后有条件地将用户转发到第二个 URL，该 URL 将是您特定应用的自定义 URL。

可以进行此设备检测，并检测他们的设备上是否安装了具有移动浏览器支持的一些较新的 HTML5 功能的应用程序，但您的问题是围绕在 iOS 中打开带有 URL 的应用程序和主要的本机 iOS 挂钩需要支持打开应用程序（带参数和所有）在上面的文档中。

# mysql - 替换查询上的异常 mysql 行为

> ID：12037713
> 
> 赞同：1
> 
> 时间：2012-08-20T12:32:55.443
> 
> 标签：mysql, replace

我使用 av 简单数据库，我有 3 列 A(bigINT 20) 、 B(bigInt 20) 和 c(DECIMAL(5,4)) ，当我触发以下查询时，我得到下面提到的结果：

```
REPLACE INTO `my_table` SET `A` = 8,`B` = 44,`C` = 14; 
```

我在 mysql A =8 ， b= 44 和 c 中得到这些值 9.9999 ！?

关于为什么会发生这种情况以及我能做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:35:11.897

`DECIMAL(5,4)`表示该数字最多有`5`数字，`4`其中小数点后。所以`14`只是溢出，因为它需要`DECIMAL(6,4)`。

必须清除`14`溢出，因为作为常数精度点小数，它在内部`14.0000`（所以六位数超过五位）。

因此，如果您尝试将`14.0000`（六位数）放入`DECIMAL(5,4)`（最多五位数）-> MySQL 选择最接近您请求的值。因此`14.0000`被“四舍五入”到`9.9999`。

为了适合`14`您的列，您可以扩展它`DECIMAL(6,4)`（通常允许更多位数）或更改为`DECIMAL(5,3)`（这将允许小数点前多一位，但当然会失去一些精度）。

# objective-c - EXC BAD Access RestKit

> ID：12037716
> 
> 赞同：0
> 
> 时间：2012-08-20T12:33:10.477
> 
> 标签：objective-c, ios, xcode, restkit

```
 In ClassA.h
    @interface ClassA : NSObject<RKObjectLoaderDelegate,RKRequestDelegate>
    @property(nonatomic,strong)NSMutableDictionary *inputDict;

     ClassA.m
//After Implementation
      @synthesize inputDict;

        -(void)sendRequestWithInputDict:(NSMutableDictionary*)inputDictVal
        {
        RKURL *baseURL = [RKURL URLWithBaseURLString:baseUrl];
           RKObjectManager * manager = [RKObjectManager objectManagerWithBaseURL:baseURL];  
            [manager setClient:[RKClient sharedClient]];

            manager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;
            RKObjectLoader *objectLoader = [manager loaderWithResourcePath:@"/getLocation"];  
            objectLoader.serializationMIMEType = RKMIMETypeJSON;
            objectLoader.method = RKRequestMethodPOST;
            objectLoader.params = inputDictVal;
            objectLoader.delegate = self;
            [objectLoader send];
        }

     -(void)getLocation
   {
      inputDict = [[NSMutableDictionary alloc]init];
     [self sendRequest:inputDict];
   } 
```

baseUrl 在我在这里导入的常量文件中声明。我正在尝试从另一个类调用 sendRequest 函数。但是我在 requestWillPrepareForSend(RKRequest.m) 中得到一个 EX_BAD_ACCESS。

我认为某些对象会自动释放。我不知道是哪一个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:48:36.693

There are many things that are wrong with your code. The most obvious is not retaining the object manager (unless this becomes the sharedManager) another is trying to load an object but using POST. Although, judging by the errors you report, I think your ClassA instance is being dealloced, and because it is set as a delegate you are getting EXC_BAD_ACCESS. I suggest you move to using the block based methods and not the delegate callbacks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:59:00.670

通过使用 Blocks，我可以向服务器发送请求并从中获取响应。我在这里找到了很好的教程[http://kalapun.com/blog/2012/05/17/how-i-restkit/](http://kalapun.com/blog/2012/05/17/how-i-restkit/)

```
-(void)sendRequest:(NSMutableDictionary*)inputDict withResourcePath:(NSString*)resourcePath
{
     RKURL *baseURL = [RKURL URLWithBaseURLString:baseUrl];
        RKObjectManager *manager = [RKObjectManager objectManagerWithBaseURL:baseURL];  
        [manager setClient:[RKClient sharedClient]];

        [manager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *objectLoader){

        objectLoader.method = RKRequestMethodPOST;
        objectLoader.params = inputDict;

        objectLoader.onDidFailWithError = ^(NSError *error){

        NSLog(@"Error: %@", [error localizedDescription]);

        };
        objectLoader.onDidLoadResponse = ^(RKResponse *response) {
            NSLog(@"response: %@", [response bodyAsString]);
        };

    }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:52:29.243

查看实例变量`baseUrl`和`inputDict`. **始终**使用属性而不是实例变量，您将永远不会遇到此类问题。

# xml - 使用 XSLT 将记录添加到 XML

> ID：12037722
> 
> 赞同：1
> 
> 时间：2012-08-20T12:33:44.940
> 
> 标签：xml, xslt, invoice

我正在使用如下所示的发票数据（2 条记录）：

```
<?xml version=1.0" encoding="Windows-1252"?>
<Line>
  <SupplierID>Waltons</SupplierID>
  <InvoiceID>MOD280229SI</InvoiceID>
  <InvoiceDate>20120709</InvoiceDate>
  <ItemID>847308</ItemID>
  <ColorID>04</ColorID>
  <Description>BANTEX Quotation Folder A4 3420</Description>
  <MainCategory>FILES FILING</MainCategory>
  <SubCategory>Quotation Folders</SubCategory>
  <LineNum>17.0000000</LineNum>
  <Qty>30.0000000</Qty>
  <UnitPriceExclTax>19.2500000</UnitPriceExclTax>
  <LineTax>80.8500000</LineTax>
  <LinePriceExclTax>577.5000000</LinePriceExclTax>
  <ColorName>Blue</ColorName>
  <UOM>Ea</UOM>
  <Backorder>0.0000000</Backorder>
  <INVENTTRANSID>MOD2923560_060</INVENTTRANSID>
</Line>
<Line>
  <SupplierID>Waltons</SupplierID>
  <InvoiceID>MOD280229SI</InvoiceID>
  <InvoiceDate>20120709</InvoiceDate>
  <ItemID>847308</ItemID>
  <ColorID>06</ColorID>
  <Description>BANTEX Quotation Folder A4 3420</Description>
  <MainCategory>FILES FILING</MainCategory>
  <SubCategory>Quotation Folders</SubCategory>
  <LineNum>18.0000000</LineNum> 
```

牢记上述结构，一个订单可能包含数百行这样的行。

我将这些打印到发票页面上，一个页面上只能容纳 18 行，我在页面上的溢出规则已经在为此工作。

我唯一的问题是，我需要在第一页打印 1st 17，然后是余额结转，然后在下一页上以余额结转等开头。

我想按如下方式构造 XML

第 16 行未更改 第 16 行之后我想插入一个新行，其中只有余额结转 之后我想插入另一个空白行，总共 17 行（我想故意将最后一行留空）在空行之后插入另一行包含 Balance Brought Forward 在此行之后，我的数据可以继续，从第 17+ 行开始，然后在另外 15 行之后，执行相同的操作，直到数据结束。

谁能指出我构建这样的东西的正确方向？

我可以做到这一点是 XSLT 1 或 2，甚至可能在 VBS 的 JavaScript 中做到这一点。

我可以控制 XML 的结构，我将它作为没有任何子元素的平面文件输出，因为我首先需要进行一些小的更改，然后我将它与我的 XML 文件的其余部分合并，所以可以说 XML 以并以

行我的意思是一条记录，所以上面的 XML 有 2 行（由于复制错误，第 2 行不完整）通过插入另一行，我的意思是我想添加一个完整的新 XXX 元素

好吧，想象一下我从包含 40 行（元素）的 XML 开始

```
<Line>
xxx
</Line>  x40 
```

我想要的内容如下：

```
<Line> <!-- x16 lines. from data -->
xxx
</Line> 
<Line> - <!-- Inserted -->
<LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line> - <!-- Inserted -->
<Line></Line>
<Line> - <!-- Inserted -->
<LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line> <!-- x15 lines. From data -->
xxx
</Line>
<Line> <!-- Inserted -->
<LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line> <!-- Inserted -->
<Line></Line>
<Line> <!-- Inserted -->
<LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line> <!-- x9 lines. from data -->
xxx
</Line> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:44:02.503

这是我关于如何在 .NET 框架中使用 XslCompiledTransform 解决该问题的建议，您可以使用带有 ConformanceLevel.Fragment 的 XmlReader 读取您的 XML 片段，然后您可以使用 XSLT 处理输入，例如

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:param name="size1" select="16"/>

  <xsl:param name="size2" select="15"/>

  <xsl:param name="to-be-inserted">
    <Line>
      <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
    </Line>
    <Line></Line>
    <Line>
      <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
    </Line>
  </xsl:param>

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <xsl:apply-templates select="Line[position() &lt;= $size1]"/>
    <xsl:apply-templates select="Line[position() &gt; $size1][position() mod $size2 = 1]" mode="group"/>
  </xsl:template>

  <xsl:template match="Line" mode="group">
    <xsl:copy-of select="$to-be-inserted"/>
    <xsl:apply-templates select=". | following-sibling::Line[position() &lt; $size2]"/>
  </xsl:template>
</xsl:stylesheet> 
```

要使用不是格式良好的 XML 文档的输入文件运行该样式表，您需要如下代码：

```
 string sampleInput = @"input1.xml";

        string sampleResult = @"result1.xml";

        XslCompiledTransform proc = new XslCompiledTransform();
        proc.Load("sheet.xslt");

        using (XmlReader xr = XmlReader.Create(sampleInput, new XmlReaderSettings() { ConformanceLevel = ConformanceLevel.Fragment }))
        {
            using (FileStream fs = File.OpenWrite(sampleResult))
            {
                proc.Transform(xr, null, fs);
            }
        } 
```

假设您有一个输入文件，例如

```
<Line>
  <Id>1</Id>
</Line>
<Line>
  <Id>2</Id>
</Line>
<Line>
  <Id>3</Id>
</Line>
<Line>
  <Id>4</Id>
</Line>
<Line>
  <Id>5</Id>
</Line>
<Line>
  <Id>6</Id>
</Line>
<Line>
  <Id>7</Id>
</Line>
<Line>
  <Id>8</Id>
</Line>
<Line>
  <Id>9</Id>
</Line>
<Line>
  <Id>10</Id>
</Line>
<Line>
  <Id>11</Id>
</Line>
<Line>
  <Id>12</Id>
</Line>
<Line>
  <Id>13</Id>
</Line>
<Line>
  <Id>14</Id>
</Line>
<Line>
  <Id>15</Id>
</Line>
<Line>
  <Id>16</Id>
</Line>
<Line>
  <Id>17</Id>
</Line>
<Line>
  <Id>18</Id>
</Line>
<Line>
  <Id>19</Id>
</Line>
<Line>
  <Id>20</Id>
</Line>
<Line>
  <Id>21</Id>
</Line>
<Line>
  <Id>22</Id>
</Line>
<Line>
  <Id>23</Id>
</Line>
<Line>
  <Id>24</Id>
</Line>
<Line>
  <Id>25</Id>
</Line>
<Line>
  <Id>26</Id>
</Line>
<Line>
  <Id>27</Id>
</Line>
<Line>
  <Id>28</Id>
</Line>
<Line>
  <Id>29</Id>
</Line>
<Line>
  <Id>30</Id>
</Line>
<Line>
  <Id>31</Id>
</Line>
<Line>
  <Id>32</Id>
</Line>
<Line>
  <Id>33</Id>
</Line>
<Line>
  <Id>34</Id>
</Line>
<Line>
  <Id>35</Id>
</Line>
<Line>
  <Id>36</Id>
</Line>
<Line>
  <Id>37</Id>
</Line>
<Line>
  <Id>38</Id>
</Line>
<Line>
  <Id>39</Id>
</Line>
<Line>
  <Id>40</Id>
</Line>
<Line>
  <Id>41</Id>
</Line>
<Line>
  <Id>42</Id>
</Line>
<Line>
  <Id>43</Id>
</Line>
<Line>
  <Id>44</Id>
</Line>
<Line>
  <Id>45</Id>
</Line>
<Line>
  <Id>46</Id>
</Line>
<Line>
  <Id>47</Id>
</Line>
<Line>
  <Id>48</Id>
</Line>
<Line>
  <Id>49</Id>
</Line>
<Line>
  <Id>50</Id>
</Line>
<Line>
  <Id>51</Id>
</Line>
<Line>
  <Id>52</Id>
</Line>
<Line>
  <Id>53</Id>
</Line>
<Line>
  <Id>54</Id>
</Line>
<Line>
  <Id>55</Id>
</Line>
<Line>
  <Id>56</Id>
</Line>
<Line>
  <Id>57</Id>
</Line>
<Line>
  <Id>58</Id>
</Line>
<Line>
  <Id>59</Id>
</Line>
<Line>
  <Id>60</Id>
</Line>
<Line>
  <Id>61</Id>
</Line>
<Line>
  <Id>62</Id>
</Line>
<Line>
  <Id>63</Id>
</Line>
<Line>
  <Id>64</Id>
</Line>
<Line>
  <Id>65</Id>
</Line>
<Line>
  <Id>66</Id>
</Line>
<Line>
  <Id>67</Id>
</Line>
<Line>
  <Id>68</Id>
</Line>
<Line>
  <Id>69</Id>
</Line>
<Line>
  <Id>70</Id>
</Line>
<Line>
  <Id>71</Id>
</Line>
<Line>
  <Id>72</Id>
</Line>
<Line>
  <Id>73</Id>
</Line>
<Line>
  <Id>74</Id>
</Line>
<Line>
  <Id>75</Id>
</Line>
<Line>
  <Id>76</Id>
</Line>
<Line>
  <Id>77</Id>
</Line>
<Line>
  <Id>78</Id>
</Line>
<Line>
  <Id>79</Id>
</Line>
<Line>
  <Id>80</Id>
</Line>
<Line>
  <Id>81</Id>
</Line>
<Line>
  <Id>82</Id>
</Line>
<Line>
  <Id>83</Id>
</Line>
<Line>
  <Id>84</Id>
</Line>
<Line>
  <Id>85</Id>
</Line>
<Line>
  <Id>86</Id>
</Line>
<Line>
  <Id>87</Id>
</Line>
<Line>
  <Id>88</Id>
</Line>
<Line>
  <Id>89</Id>
</Line>
<Line>
  <Id>90</Id>
</Line>
<Line>
  <Id>91</Id>
</Line>
<Line>
  <Id>92</Id>
</Line>
<Line>
  <Id>93</Id>
</Line>
<Line>
  <Id>94</Id>
</Line>
<Line>
  <Id>95</Id>
</Line>
<Line>
  <Id>96</Id>
</Line>
<Line>
  <Id>97</Id>
</Line>
<Line>
  <Id>98</Id>
</Line>
<Line>
  <Id>99</Id>
</Line>
<Line>
  <Id>100</Id>
</Line> 
```

我得到一个像

```
<?xml version="1.0" encoding="utf-8"?>
<Line>
  <Id>1</Id>
</Line>
<Line>
  <Id>2</Id>
</Line>
<Line>
  <Id>3</Id>
</Line>
<Line>
  <Id>4</Id>
</Line>
<Line>
  <Id>5</Id>
</Line>
<Line>
  <Id>6</Id>
</Line>
<Line>
  <Id>7</Id>
</Line>
<Line>
  <Id>8</Id>
</Line>
<Line>
  <Id>9</Id>
</Line>
<Line>
  <Id>10</Id>
</Line>
<Line>
  <Id>11</Id>
</Line>
<Line>
  <Id>12</Id>
</Line>
<Line>
  <Id>13</Id>
</Line>
<Line>
  <Id>14</Id>
</Line>
<Line>
  <Id>15</Id>
</Line>
<Line>
  <Id>16</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>17</Id>
</Line>
<Line>
  <Id>18</Id>
</Line>
<Line>
  <Id>19</Id>
</Line>
<Line>
  <Id>20</Id>
</Line>
<Line>
  <Id>21</Id>
</Line>
<Line>
  <Id>22</Id>
</Line>
<Line>
  <Id>23</Id>
</Line>
<Line>
  <Id>24</Id>
</Line>
<Line>
  <Id>25</Id>
</Line>
<Line>
  <Id>26</Id>
</Line>
<Line>
  <Id>27</Id>
</Line>
<Line>
  <Id>28</Id>
</Line>
<Line>
  <Id>29</Id>
</Line>
<Line>
  <Id>30</Id>
</Line>
<Line>
  <Id>31</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>32</Id>
</Line>
<Line>
  <Id>33</Id>
</Line>
<Line>
  <Id>34</Id>
</Line>
<Line>
  <Id>35</Id>
</Line>
<Line>
  <Id>36</Id>
</Line>
<Line>
  <Id>37</Id>
</Line>
<Line>
  <Id>38</Id>
</Line>
<Line>
  <Id>39</Id>
</Line>
<Line>
  <Id>40</Id>
</Line>
<Line>
  <Id>41</Id>
</Line>
<Line>
  <Id>42</Id>
</Line>
<Line>
  <Id>43</Id>
</Line>
<Line>
  <Id>44</Id>
</Line>
<Line>
  <Id>45</Id>
</Line>
<Line>
  <Id>46</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>47</Id>
</Line>
<Line>
  <Id>48</Id>
</Line>
<Line>
  <Id>49</Id>
</Line>
<Line>
  <Id>50</Id>
</Line>
<Line>
  <Id>51</Id>
</Line>
<Line>
  <Id>52</Id>
</Line>
<Line>
  <Id>53</Id>
</Line>
<Line>
  <Id>54</Id>
</Line>
<Line>
  <Id>55</Id>
</Line>
<Line>
  <Id>56</Id>
</Line>
<Line>
  <Id>57</Id>
</Line>
<Line>
  <Id>58</Id>
</Line>
<Line>
  <Id>59</Id>
</Line>
<Line>
  <Id>60</Id>
</Line>
<Line>
  <Id>61</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>62</Id>
</Line>
<Line>
  <Id>63</Id>
</Line>
<Line>
  <Id>64</Id>
</Line>
<Line>
  <Id>65</Id>
</Line>
<Line>
  <Id>66</Id>
</Line>
<Line>
  <Id>67</Id>
</Line>
<Line>
  <Id>68</Id>
</Line>
<Line>
  <Id>69</Id>
</Line>
<Line>
  <Id>70</Id>
</Line>
<Line>
  <Id>71</Id>
</Line>
<Line>
  <Id>72</Id>
</Line>
<Line>
  <Id>73</Id>
</Line>
<Line>
  <Id>74</Id>
</Line>
<Line>
  <Id>75</Id>
</Line>
<Line>
  <Id>76</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>77</Id>
</Line>
<Line>
  <Id>78</Id>
</Line>
<Line>
  <Id>79</Id>
</Line>
<Line>
  <Id>80</Id>
</Line>
<Line>
  <Id>81</Id>
</Line>
<Line>
  <Id>82</Id>
</Line>
<Line>
  <Id>83</Id>
</Line>
<Line>
  <Id>84</Id>
</Line>
<Line>
  <Id>85</Id>
</Line>
<Line>
  <Id>86</Id>
</Line>
<Line>
  <Id>87</Id>
</Line>
<Line>
  <Id>88</Id>
</Line>
<Line>
  <Id>89</Id>
</Line>
<Line>
  <Id>90</Id>
</Line>
<Line>
  <Id>91</Id>
</Line>
<Line>
  <LinePriceExclTax>Balance Carried Forward</LinePriceExclTax>
</Line>
<Line />
<Line>
  <LinePriceExclTax>Balance Brought Forward</LinePriceExclTax>
</Line>
<Line>
  <Id>92</Id>
</Line>
<Line>
  <Id>93</Id>
</Line>
<Line>
  <Id>94</Id>
</Line>
<Line>
  <Id>95</Id>
</Line>
<Line>
  <Id>96</Id>
</Line>
<Line>
  <Id>97</Id>
</Line>
<Line>
  <Id>98</Id>
</Line>
<Line>
  <Id>99</Id>
</Line>
<Line>
  <Id>100</Id>
</Line> 
```

`Line`您想要插入新元素的元素数量和要插入的内容是样式表的参数，因此您可以编辑样式表，甚至可以使用代码设置它们（通过传入一个`XsltArgumentList`作为`Transform`方法的第二个参数）。

# windows-7 - Windows 7 符号链接 - 当文件已存在时无法创建文件

> ID：12037723
> 
> 赞同：26
> 
> 时间：2012-08-20T12:33:47.967
> 
> 标签：windows-7, command-line, symlink

我正在尝试在两个目录之间创建符号链接。我有一个名为 TestDocs 和 TestDocs2 的目录。我将在 TestDocs 中完成所有工作，但我需要将它们全部反映在 TestDocs2 中。因此，TestDocs2 中的所有文件都将在 TestDocs 中复制，如果我在 TestDocs 中添加文件、更改文件等，它应该反映在 TestDocs2 中。

所以我认为这就像这样做一样简单：

```
mklink /D TestDocs TestDocs2 
```

但是当我这样做时，我得到了错误：

> 当该文件已存在时无法创建该文件

为什么我会得到这个？

另外，我的 TestDocs 和 TestDocs2 在命令中的顺序是否错误？

感谢您的帮助，符号链接一直让我感到困惑！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-20T12:45:01.427

正确的用法是：

```
MKLINK [options] {link} {target} 
```

您正在创建一个链接，因此`link`是您将要创建的新链接。
是`target`链接的目标，即现有目录。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-01T22:16:51.430

这对我来说是这样的。我想重新定位我`C:\ProgramData\Package Cache`的`F:`分区。

我必须做的步骤：

1.  身体移动`"C:\ProgramData\Package Cache"`到`F:`. 现在，自从我搬家后，我已经`"F:\ProgramData\Package Cache"`离开`"C:\ProgramData\Package Cache"`了。

2.  在 cmd 中运行（全部在一行中，为了便于阅读，在此处拆分）

    ```
    mklink /J "C:\ProgramData\Package Cache" 
              "F:\ProgramData\Package Cache" 
    ```

3.  结果：

    ```
    Junction created for C:\ProgramData\Package Cache <<===>> 
                         F:\ProgramData\Package Cache` 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T09:39:50.160

我是为 Google Picasa 做的，所以我可以在不止一台机器上访问照片。它运行良好，因为 Picasa 并不是真正启用网络的程序。对我来说，我做了以下事情：

*   安装 Picasa
*   运行应用程序。这将创建所有必要的数据库文件。
*   关闭应用程序。
*   导航到数据库所在的目录 - 在 Windows 7 上，它将在 c:\users\\AppData\Local\Google 中创建
*   将有两个文件夹 Picasa2 和 Picasa2Albums 将这些文件夹复制到网络位置。在我的例子中，我创建了一个名为 o:\PicasaDatabase 的文件夹并将这些文件夹复制到其中。
*   接下来将原始文件夹重命名为 Picasa2.old 和 Picasa2Albums.old

从提升的 cmd 提示符运行以下命令：

mklink /D "c:\Users\\AppData\Local\Google\Picasa2" "o:\PicasaDatabase\Picasa2"

mklink /D "c:\Users\\AppData\Local\Google\Picasa2Albums" "o:\PicasaDatabase\Picasa2Albums"

将在源位置创建两个符号链接，它们将指向网络驱动器。

显然，对于不可联网且只有一个用户可以一次访问数据库的应用程序，使用这样的符号链接是一种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-27T18:30:06.367

我遇到过同样的问题。您必须确保 Source 文件夹不存在。（如果确实如此，则将其重命名为其他名称）

如果 MobileSync 下不应存在以下备份文件夹。由于 Apple iTunes 会查找具有该名称的备份文件夹，只需将现有文件夹重命名为 OriginalBackup 之类的名称即可避免 iTunes 找到它。相反，mklink 将同义词备份到 D：文件夹，如下所示

mklink /JC:\Users\Dell\Apple\MobileSync\Backup D:\Apple\Backup\iPhoneXRBackup

# jquery - PhoneGap : 通过递增 sessionStorage 从表中检索下一个数据

> ID：12037725
> 
> 赞同：0
> 
> 时间：2012-08-20T12:33:57.310
> 
> 标签：jquery, cordova, session-storage, sessionstorage

我在数据库中有一个记录的 ID (1)，每次单击“NEXT”按钮时，我希望将 ID 增加到 2 并检索下一个数据。我将 ID 存储到 sessionStorage.ID 中，稍后当我检索它时

```
sessionStorage.ID =sessionStorage.ID +1 
```

sessionStorage 应该等于 2，但它显示为“11”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:37:19.313

尝试这个：

```
sessionStorage.ID = parseInt(sessionStorage.ID) + 1; 
```

当您将 ID 存储在 sessionStorage 中时，它会保存为字符串，因此`+`符号连接数字而不是添加数字。

# ruby-on-rails-3 - 设计用户配置文件空字段显示在自定义视图中

> ID：12037731
> 
> 赞同：0
> 
> 时间：2012-08-20T12:34:26.803
> 
> 标签：ruby-on-rails-3, devise

我想在另一个视图中显示设计用户提供的内容。

Homeprivate/profile.html.erb：

```
<%= render "devise/registrations/edit" %> 
```

我刚刚将默认编辑视图转换为部分视图。为了支持用户作为“资源”使用，我有以下助手。

```
module HomeprivateHelper
 def resource_name
  :user
 end

 def resource
   @resource ||= User.new
 end

 def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
 end
end 
```

但是，如果我登录并转到 /homeprivate/profile - 我看到所有字段都是空的。不知何故，当前用户未映射到表单。如果当前用户显示在自定义视图中，如何将当前用户映射到配置文件视图？似乎使用了 User.new，而不是当前用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:58:56.197

我对 Rails 很陌生，但我遇到了同样的问题并想出了如何填充那些空白字段。在您的助手中，而不是`user.new`使用`current_user`. 它应该如下所示：

```
def resource
@resource ||= current_user
end 
```

那应该行得通。

# android - onSearchRequest 在子活动中没有被调用

> ID：12037733
> 
> 赞同：1
> 
> 时间：2012-08-20T12:34:30.930
> 
> 标签：android, android-tabhost

我在我的应用程序中为标签使用 tabGroup 活动。我正在从我的一项子活动中调用默认搜索。该子活动包含列表视图，并且该列表中的数据来自 Web 服务。但是，当我没有从 web 服务获得任何结果并且我的列表显示为空时，不会调用 onSearchRequest()。搜索事件直接转到父活动，搜索不会被调用..

反正有没有让搜索事件回到子活动。

# windows - 如何在 Windows 中挂钩本地帐户创建？

> ID：12037735
> 
> 赞同：1
> 
> 时间：2012-08-20T12:34:42.637
> 
> 标签：windows, active-directory, hook

我正在尝试挂钩本地帐户创建并在需要时阻止它（我正在构建一个小型安全工具，它甚至可以阻止管理员乱搞配置）。

我发现我必须注入 LSASS，但我不确定我需要绕道的确切功能是什么。目前我正在 XP SP3 上进行测试，但我正在寻找一种适用于从 XP 到 8 的每个窗口的解决方案。

我试图绕过 SAM 的函数 SamrCreateUserInDomain，但是当我使用 lusrmgr.msc 创建本地用户时，它没有被调用。我也试过 LsarCreateAccount。但它也没有被调用。

我想我可能需要挂钩一些 Active Directory 功能，但我不确定它是哪一个。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:30:22.370

我已经解决了我的问题。我挂钩了错误的功能。

我应该挂钩 SAM 的 SamrCreateUser2InDomain，而不是 SamrCreateUserInDomain。

解决这个问题，一切都运行良好。

# java - 是否可以使用 javascript 小书签来调用本地存储/本地托管的 Java 小程序？

> ID：12037745
> 
> 赞同：1
> 
> 时间：2012-08-20T12:35:21.197
> 
> 标签：java, javascript, web-services, web-applications, browser

想知道这是否可能，我有一个 Java 小程序，我将它嵌入我自己的网站登录页面版本（目前使用 wordpress），并使用 Java 小程序允许使用存储有登录详细信息的智能卡令牌登录。

我想知道是否可以使用 javascript 小书签或类似的东西来加载此 Java Applet 并将此功能添加到我无法控制的页面？

谢谢。

编辑：目前我在可以编辑 html/php 的页面上使用以下代码，但我想将其添加到其他网站，如果可能的话，我无法使用 javascript 小书签执行此操作。pass 恰好是按下提交按钮时页面运行的函数的名称。

```
 <script language="JavaScript"><!--
  function pass()
  {
    document.tstapp.put();
    document.loginform.user_login.value = document.tstapp.get();
    document.loginform.user_pass.value = document.tstapp.get2();

  }
  //-->
  </script>

  <APPLET name=tstapp code=LoginCard21.class archive="Cardv2.jar"  WIDTH=100 HEIGHT=30>
  </APPLET> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:53:01.037

```
javascript:var applet = document.createElement('applet'); applet.name = 'tstapp'; applet.code = 'LoginCard21.class'; applet.archive = 'Cardv2.jar'; applet.width = 100; applet.height = 30; document.body.appendChild(applet); var pass = function () { document.tstapp.put(); document.loginform.user_login.value = document.tstapp.get(); document.loginform.user_pass.value = document.tstapp.get2(); }; 
```

这个小书签的关键；我想你不知道的，是[`document.createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)。

# asp.net - 如何使用 asp:Button 发布/获取到另一个页面并使用自定义数据

> ID：12037746
> 
> 赞同：0
> 
> 时间：2012-08-20T12:35:25.643
> 
> 标签：asp.net

我在页面上有一个简单的按钮：

```
 <asp:Button ID="generateIsp" runat="server"
                        style="float: right;"
                        Text="" SkinID="Classic"
                        PostBackUrl="../Handlers/ISPOutput.ashx"  /> 
```

但是**ISPOutput.ashx**处理程序需要一个**输入参数**，比如说**id**。**单击generateIsp**按钮时有没有办法传递该信息？

我知道我可以使用链接控件，但它会破坏我的布局......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:41:45.310

您可以尝试使用此代码 - 查询字符串

```
generateIsp.PostBackUrl = "EditUser.aspx?yourParameter=yourValue";

<asp:Button ID="generateIsp" runat="server"
                    style="float: right;"
                    Text="" SkinID="Classic"
                    PostBackUrl="../Handlers/ISPOutput.ashx?yourParameter=yourValue"  /> 
```

# c++ - 尝试运行在 Netbeans 中编译的 c++ 程序时出错

> ID：12037749
> 
> 赞同：0
> 
> 时间：2012-08-20T12:35:35.330
> 
> 标签：c++, netbeans

在过去的几个小时里，我一直在尝试为我在 Netbeans 中开发的 C++ 应用程序设置一个 cronjob。我在 Windows 机器上编程并使用 Ubuntu 服务器作为构建主机。它进行了设置，因此将文件放入分发文件夹中，我认为这是我必须执行的文件。我使用以下命令行执行它：

```
g++ program 
```

之后它会弹出以下错误：

```
testproject: In function `_start':
(.text+0x0): multiple definition of `_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.text+0x0):
first defined here
testproject: In function `_fini':
(.fini+0x0): multiple definition of `_fini'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.fini+0x0):
first defined here
testproject:(.rodata+0x0): multiple definition of `_IO_stdin_used'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.rodata.cst4
+0x0): first defined here
testproject: In function `__data_start':
(.data+0x0): multiple definition of `__data_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.data+0x0):
first defined here
testproject: In function `__data_start':
(.data+0x8): multiple definition of `__dso_handle'
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o:(.data+0x0): first defined here
testproject: In function `_init':
(.init+0x0): multiple definition of `_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.init+0x0):
first defined here
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o:(.dtors+0x0): multiple definition of
`__DTOR_END__'
testproject:(.dtors+0x8): first defined here
/usr/bin/ld: error in testproject(.eh_frame); no .eh_frame_hdr table will be cre
ated.
collect2: ld returned 1 exit status 
```

但是，当我在 Netbeans 中单击运行时，它运行得很好。我需要运行哪个命令才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:58:27.247

`g++`是一个[编译器](http://en.wikipedia.org/wiki/Compiler)。它将您的源代码变成您可以直接运行的程序。这与 Java 不同，Java 在称为[虚拟机](http://en.wikipedia.org/wiki/Virtual_machine)的单独程序上运行。

所以对于`C++`你写的程序，你会做

```
g++ my_source.cpp -o my_program
./my_program 
```

第一行将你的代码编译成一个可运行的程序（这一步通常比较复杂，有多个源文件和单独的程序来管理构建过程，例如[`make`](http://en.wikipedia.org/wiki/Make_%28software%29)）。您只需执行一次此步骤（如果您更改程序，则再次执行）。如果您使用 IDE（例如 NetBeans），这部分可能对您隐藏。

第二行运行新程序（假设第一步一切顺利）。只是意味着“在这个`./`目录中运行它”（没有它，你的系统会关闭并在几个特定的​​地方寻找程序）。

# sql - 需要sql查询

> ID：12037751
> 
> 赞同：2
> 
> 时间：2012-08-20T12:35:59.410
> 
> 标签：sql, postgresql

**表格显示**：showid、tutle、链接显示状态运行时分类。
**表剧集**：episodeid，showid，episodeNumber，seasonNumber，airDate，title。

您好，我需要 sql 查询来选择标题序列并计算已经发布的剧集（edisodes.airDate - 发布日期剧集）请帮助我）谢谢谁的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:38:23.333

```
select  s.title
,       s.serial
,       e.title
,       sum(case when e.airDate <= current_timestamp then 1 end) 
            over (partition by s.title, s.serial)
from    shows s
left join
        episodes e
on      e.showid = s.showid
        and e.airDate <= current_timestamp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:23:59.550

可以在那里使用子查询。例如

```
select s.title, s.serial, e.count
from shows s, (select showId, count(*) as count 
                from episodes 
                where airDate <= current_timestamp
                group by showId) e
where s.showId == e.showId 
```

# zend-framework - Zend 框架未在 netbeans 中设置

> ID：12037752
> 
> 赞同：1
> 
> 时间：2012-08-20T12:36:03.863
> 
> 标签：zend-framework, netbeans-7

我在将 zend 框架设置为 netbeans 时遇到问题。我已经在 netbeans 中分配了所有设置：

> Tool>Options>PHP>Zend> 我已经把zend目录的路径放在我提取zend框架目录的地方。

和 >Tool>Options>PHP>General> 我已将 C:\xampp\php\php.exe 放入 php 5 Interpreter 并给出 Global Include Path : c:\xamp\php\PEAR 和 c:\zend\library\曾\

我还在环境变量中为 php 设置了路径： C:\xampp\php\php.exe 和 php.ini ： include_path = ";C:\xampp\php\pear\;C:\ZendFramework-1.11.12\图书馆;”

我的配置：Window 7 xamp1.1.2 ZendFramework-1.11.12 Netbeans 7.1

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:34:22.177

在 Netbeans 中，`Tools > Options > PHP > Zend >`是 zf.bat 的路径，例如：`C:\Zend\ZendServer\share\ZendFramework\bin\zf.bat`.

更改此值后，不要忘记选择*注册提供程序按钮。*这是控制 Netbeans 如何与`Zend_Tool`.

Netbeans`Global Include Path : c:\xamp\php\PEAR and c:\zend\library\zend\`中的全局包含路径**仅**用于 Netbeans 模块，例如自动完成。

您的 windows 环境`PATH`变量需要指向 Zend Framework **/bin**，例如：`C:\Zend\ZendServer\share\ZendFramework\bin`因为 Windows 也需要知道`zf.bat`但实际上不需要库位置。

*php.ini*确实需要您的 ZF */library*文件夹的位置。只需确保这是Apache 至少使用的*php.ini 。*有时您会有 2 个*php.ini*文件：一个由 Apache 使用，一个由 php cli（命令行解释器）使用。每个服务器设置在文件位置方面似乎都不同，`php.ini`因此请检查文档并`phpinfo()`可能有所帮助。

# mysql - 更新过程 输入参数中的列不正确/未知

> ID：12037755
> 
> 赞同：0
> 
> 时间：2012-08-20T12:36:06.827
> 
> 标签：mysql, procedure

我有一个输入参数错误，但我不知道为什么：

```
0   14:31:47    call UpdateComment(66,1,2,"NOWYTitle","NOWYContent")    Error Code: 1054\. Unknown column 'NOWYTitle' in 'field list' 
```

调用程序：

```
call UpdateComment(66,1,2,"NOWYTitle","NOWYContent"); 
```

我的程序：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS UpdateComment $$
CREATE PROCEDURE `UpdateComment`(UserId INT,/*Crc32 int(11) unsigned,*/ArticleId int(11),CommentsId int(11), newTitle varchar(255), newContent varchar(255))
BEGIN

        DECLARE helpUserTable varchar(255);

        set helpUserTable = CONCAT("User",UserId);

        set @score1 =CONCAT("UPDATE `",helpUserTable,"` SET Title = ",newTitle," WHERE CommentsId = ",CommentsId," AND ArticleId = ",ArticleId);
        PREPARE stmt FROM @score1;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        set @score2 =CONCAT("UPDATE `",helpUserTable,"` SET Content = ",newContent," WHERE CommentsId = ",CommentsId," AND ArticleId = ",ArticleId);
        PREPARE stmt FROM @score2;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:47:08.520

首先，您需要在文本值周围的命令中添加引号，其次，您的 SQL 语句可以组合成一个语句（它们共享相同的 where 子句）：

试试这个：

```
 set @score1 = CONCAT("UPDATE `", helpUserTable, "` SET Title = '", newTitle, 
        "', Content = '", newContent, "' WHERE CommentsId = ", 
        CommentsId, " AND ArticleId = ", ArticleId); 
```

`@score2`并完全删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:42:33.920

过程生成这些语句：

```
UPDATE `User66` SET Title = NOWYTitle WHERE CommentsId = 2 AND ArticleId = 1

UPDATE `User66` SET Content = NOWYContent WHERE CommentsId = 2 AND ArticleId = 1 
```

它们是不正确的，因为必须引用所有文字（字符串值） -

```
UPDATE `User66` SET Title = 'NOWYTitle' WHERE CommentsId = 2 AND ArticleId = 1

UPDATE `User66` SET Content = 'NOWYContent' WHERE CommentsId = 2 AND ArticleId = 1 
```

所以，以这种方式更改代码 -

```
...
SET @score1 = CONCAT("UPDATE `", helpUserTable, "` SET Title = '", newTitle, "' WHERE CommentsId = ", CommentsId, " AND ArticleId = ", ArticleId);
... 
```

# php - 登录页面在使用php的phonegap中不起作用

> ID：12037756
> 
> 赞同：0
> 
> 时间：2012-08-20T12:36:10.040
> 
> 标签：php, android, cordova, android-emulator, phonegap-plugins

大家好，我是 Phonegap 的新手，我正在使用**PHP**制作简单的登录应用程序。我的文件类型如下：

1.  索引.html
2.  mob_login.php
3.  科尔多瓦.xml

所以我的问题是当我在 android 的 phonegap 上运行我的程序时，我的**mob_login.php**文件不起作用。

*   在我的 index.html 文件中，我的 url 是**url: "http://10.0.0.2/mob_login.php"**和我本地主机上的 PHP 文件。如何在我的 phonegap 上访问此文件。
*   并在我的 cordova.xml 文件中更改**访问来源 =“http://10.0.0.2*”**
*   所以请告诉我在哪里更改我的文件，我该如何解决错误。

我的 index.html 文件是：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PhoneGap Login</title>
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.mobile-1.1.1.js"></script>

    <script type="text/javascript" charset="utf-8">
        function login() {
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;

            $(document).ready(function() {
                              var user = $("#user")[0].value;
                              var pass = $("#pass")[0].value;

                              $("#message")[0].value = "In function "+user +"  "+ pass;                                      
                              $.ajax({
                                     type: "POST",
                                     url: "http://10.0.0.2/mob_login.php",
                                     data: "users"+user+"&pass="+pass,

                                     success: function(result){

                                     $("#message")[0].value = result;
                                     alert("Result "+result);
                                     }
                                     });
        });
                              }
        </script>

</head>

<body>
    <form>
        Username: <input type="text" size="25" id="user"/>
        <br />
        Password: <input type="text" size="25" id="pass"/>
        <br />
        <input type="text" size="25" id="message" value="error message" />
        <br />
        <input type="button" value="Submit" onclick="login()"/>
        </form>

</body>
</html> 
```

我的 mob_login.php 文件是：-

```
<?php
$user = $_REQUEST['user'];
$pass = $_REQUEST['pass'];

if($pass == "123" && $user == "kirit"){
    echo "Login Sucsess";
} else {
    echo "Login Fail";
}
?> 
```

我的 cordova.xml 文件是：-

```
<?xml version="1.0" encoding="utf-8"?>

<cordova>
    <access origin="http://10.0.0.2*"/> 
    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="false" />
</cordova> 
```

这是我的文件，我该如何解决这个问题，我尝试了很多方法，但我无法解决，请任何朋友帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:18:53.860

```
u placed users in ajax code instead of "user=" try below code    

$.ajax({
                                 type: "POST",
                                 url: "http://ipaddress of ur system/JQuery/mob_login.php",
                                 data: "user="+user+"&pass="+pass,

                                 success: function(result){

                                 $("#message")[0].value = result;
                                 alert("Result "+result);
                                 }
                                 });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:35:37.333

问题是您需要在单击时进行 AJAX 调用，而不是在文档完成加载时调用。这是一个问题：

```
var user = $("#user")[0].value;
var pass = $("#pass")[0].value; 
```

此代码在页面加载时执行，但就在那一刻，用户和传递输入具有空值。单击登录按钮时，您需要更改代码以进行此分配。

此外，您可以删除“就绪”侦听器，然后像这样编写登录函数：

```
function login() {
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;

    var user = $("#user").val();
    var pass = $("#pass").val();

    $("#message").text("In function "+user +"  "+ pass);                                      
    $.ajax({
        type: "POST",
        url: "http://10.0.0.2/mob_login.php",
        data: "users"+user+"&pass="+pass,

        success: function(result) {

            $("#message")[0].value = result;
            alert("Result "+result);
        }
    });
} 
```

您的代码中的问题是，当登录函数被调用时，ready 事件已经被调度，所以 ajax 请求永远不会被发送到服务器。

希望这可以帮助。祝你有美好的一天。

# bash - Xcodebuild：PhaseScriptExecution 在日志中导致大量 setenv 泛滥

> ID：12037761
> 
> 赞同：1
> 
> 时间：2012-08-20T12:36:26.797
> 
> 标签：bash, jenkins, xcodebuild

在我的 Jenkins CI 服务器上，我有一项工作是使用自定义构建规则构建项目以压缩某些文件。每次执行此脚本时（在该类型的每个单个文件上），Xcodebuild 都会记录 setenv 消息，从而使我的控制台充满冗余信息。我怎样才能避免这些消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-22T12:46:23.173

您必须取消选中每个脚本上的“在构建日志中显示环境变量”框（默认选中）。你的目标 -> 构建阶段 -> 展开你的脚本 -> 框在这里。

# c# - 如何从 url 获取参数

> ID：12037763
> 
> 赞同：10
> 
> 时间：2012-08-20T12:36:29.293
> 
> 标签：c#, asp.net, sharepoint

我正在编写一个 aspx 让用户检查文件名并创建一个具有该名称的文件

网址是

```
/sites/usitp/_layouts/CreateWebPage.aspx?List=%7b74AB081E-59FB-45A5-876D-
                             284607DA03C6%7d&amp;RootFolder=%3bText=%27SD_RMDS%27 
```

如何解析参数“文本”并在文本框中显示？

```
<div>
    <asp:TextBox id="Name" runat="server" />
</div> 
```

aspx文本框是这样的，我试过了

```
<asp:TextBox id="Name" runat="server" text=<%$Request.QueryString['Text']%>></asp:TextBox>> 
```

但它没有用

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T12:49:48.080

要获取 http get 参数的值：

```
string testParameter = Request.QueryString["Text"]; 
```

然后设置文本框文本

```
Name.Text = testParameter 
```

此外，强烈建议不要直接从 url 获取内容，因为恶意内容可能会以这种方式注入您的页面。ASP 对此提供了一些保护，它仍然被认为是一种好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T12:49:28.007

如果要从 Querystring 获取文本值，则需要使用：

```
var text = (string)Request.QueryString["Text"]; 
```

然后您可以将其绑定到 TextBox Name 的 Text 属性：

```
 Name.Text = text; 
```

**更新：** 您只能在 PageLoad 事件上初始化服务器控件值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:23:03.547

如果您无权访问后面的代码（SharePoint 中的常见限制），那么您可以使用 JavaScript“hack”来使用 URL 值填充文本框。

为此，请将此代码`.aspx`与文本框一起放在页面的最底部：

```
<script type="text/javascript">
    var strTextBoxId = "<%=Name.ClientID%>";
    var oTextBox = document.getElementById(strTextBoxId);
    if (oTextBox) {
        oTextBox.value = "<%=Request.QueryString["Text"].Replace("\"", "\\\"")%>";
    }
    else {
        //debug
        alert("element with ID '" + strTextBoxId + "' does not exist");
    }
</script> 
```

请注意，这**不是**好的做法，只是当您无法执行最佳实践解决方案时的一种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:45:27.297

其实本来就是

```
string value = Name.Text; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T13:20:55.283

您似乎在 RootFolder 和 Text 之间的 url 中缺少 & ，因此将其更改为 -

```
/sites/usitp/_layouts/CreateWebPage.aspx?List=%7b74AB081E-59FB-45A5-876D-284607DA03C6%7d&amp;RootFolder=%3b&Text=%27SD_RMDS%27 
```

就绑定而言，您几乎是正确的，应该这样做-

```
<asp:TextBox id="Name" runat="server" text='<%#Request.QueryString["Text"]%>'></asp:TextBox> 
```

但是，如果您现在运行它，它将无法正常工作，因为您需要像这样在 PageLoad 中调用 DataBind()

```
protected void Page_Load(object sender, EventArgs e)
{
    DataBind();
} 
```

这应该按照您的意愿执行，尽管像这样直接在 PageLoad 中执行此操作可能更容易 -

```
Name.Text = Request.QueryString["Text"]; 
```

# javascript - 更改锚标记中引用的图像大小

> ID：12037765
> 
> 赞同：1
> 
> 时间：2012-08-20T12:36:40.480
> 
> 标签：javascript, css, media-queries

我想知道是否可以更改锚标记中引用的图像的大小。我正在使用媒体查询，一旦设备宽度低于 481 像素，我希望单击 a-tag 时显示的图像比原始图像小一定大小...图像在 jquery 灯箱功能中弹出...

```
<a href"/images/originalImage.jpg">Image 1</a> 
```

一个如何改变大小`originalImage.jpg`？使用 CSS 或 JS……最好使用 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:51:44.877

我可以想到2个解决方案：

1.  **JavaScript：**只需`href`根据屏幕大小更改锚标记的属性。
2.  **CSS：**有 2 个带有 2 个不同图像的锚标签，并根据媒体查询一次显示/隐藏其中 1 个。

# java - Java get() 时间方法

> ID：12037768
> 
> 赞同：4
> 
> 时间：2012-08-20T12:36:46.477
> 
> 标签：java, time

我正在研究以下问题：

> 24 小时制的时间是一个 4 位数字，其中最左边的两位数字表示小时（0 到 23，包括），最右边的两位数字表示分钟（0 到 59，包括）。例如，2130 表示晚上九点半。写一个 Time 类来封装一个时间。它应该具有以下实例方法：
> 
> get 从键盘读取时间（以四位数字形式提供，例如 2130）。您可以假设该数字代表有效时间。

到目前为止，我的代码是：

```
import java.util.Scanner;
import java.io.*;

class Time {

private double hour, min;
Scanner scanner = new Scanner(System.in);

Time() {
    hour = 00;
    min = 00;
}

Time(double h, double m) {
    hour = h;
    min = m;
}

void get() {
    System.out.println("Please enter a time in 24 hour format: ");
    double x = scanner.nextDouble();
    hour = x / 100;
    min = x % 100;
    System.out.println("The time is " + hour + ":" + min);
}

public String toString() {
    return "Time: " + hour + min;
}
} 
```

我遇到的问题是如何将 4 位输入分成小时和分钟，所有建议和提示都表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T12:38:49.493

对于4 位*整数：* `x`

```
x / 100 - gives the 2 left digits
x % 100 - gives the 2 right digits 
```

**编辑：**假设这里的标题零被默默地省略，因为 0000 被转换为 0 作为整数，并且将产生小时 = 0（转换为 00），min = 0（转换为 00） - 正如它应该的那样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T12:38:34.557

读入输入作为`String`然后使用`substring()`方法来获取各个小时和分钟：

```
String s=scanner.nextLine();

String hours=s.substring(0,2);//hour
String minutes=s.substring(2,4);//min

System.out.println("The time is " + hours + ":" + minutes); 
```

# android - Android 活动显示视图

> ID：12037769
> 
> 赞同：0
> 
> 时间：2012-08-20T12:36:49.253
> 
> 标签：android, android-activity

我有一个活动 A 来启动另一个活动 B。在活动 B 中，有一些功能可以从互联网下载资源。当A跳转到B时，我想立即显示B'view。实际上，B'view会隐藏，直到所有功能准备好。我想 B 在处理数据时显示“正在搜索....”。

```
A:
    Intent intent = new Intent(A.this, B.class);
    intent.putExtra("result",obj.getText());
    A.this.startActivity(intent);

B:
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.success);
        TextView text = (TextView)this.findViewById(R.id.textview);
        text.setText("searching....");         
        Bundle bun= getIntent().getExtras();
        String tempIsbn=bun.getString("result");

        //some functions
        bookinfo=getResultByIsbn(tempIsbn);
                  .....
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:42:05.543

你可以`AsyncTask`隐藏和显示你的结果

```
private class PerformTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected void onPreExecute() {
        /**
                      * display view to show progress
                      **/
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params) {
        bookinfo=getResultByIsbn(tempIsbn);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        /**
                      * hide progress
                      * display results
                      **/
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:10:32.243

一个简单的线程可以在活动 B 的 oncreate 函数中完成任务：

```
new Thread(new Runnable() {

        @Override
        public void run() {

            bookinfo=getResultByIsbn(tempIsbn);

            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // Update UI

                }
            });

        }
    }).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:40:39.027

移动`bookinfo=getResultByIsbn(tempIsbn);`到另一个线程。使用 Java 线程或 AsyncTask 来执行此操作。

# c# - 如何将字符串转换为 System.Net.IPAddress

> ID：12037772
> 
> 赞同：15
> 
> 时间：2012-08-20T12:36:57.833
> 
> 标签：c#, .net, ip-address

如何在 C#/.net 3.5 中将字符串转换为 System.Net、IPAddress

我试过这个，但我得到了这个错误“无法将类型'字符串'转换为'System.Net.IPAddress'”

```
 public void Form1_Load(object sender, EventArgs e)
    {
        IPHostEntry host;
        string localIP = "?";
        host = Dns.GetHostEntry(Dns.GetHostName());
        foreach (IPAddress ip in File.ReadAllLines("proxy.txt"))
        {
            if (ip.AddressFamily.ToString() == "InterNetwork")
            {
                localIP = ip.ToString();
                textBox1.Text = ip.ToString();
            }
        }

   } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-20T12:38:43.613

使用静态[`IPAddress.Parse`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)方法将 a 解析`string`为a `IPAddress`：

```
foreach (var ipLine in File.ReadAllLines("proxy.txt"))
{
    var ip = IPAddress.Parse(ipLine);
    if (ip.AddressFamily.ToString() == "InterNetwork")
    {
        localIP = ip.ToString();
        textBox1.Text = ip.ToString();
    }
} 
```

如果文件中的行并不总是有效的 IP 地址，您可能需要考虑使用[`TryParse`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx)以避免引发任何异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T12:40:01.710

该`IPAddress.Parse`方法接受一个字符串。

```
foreach (string line in File.ReadAllLines("proxy.txt"))
{
    IPAddress ip = IPAddress.Parse(line);
    // ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T12:39:00.970

```
foreach (IPAddress ip in File.ReadAllLines("proxy.txt").Select(s => IPAddress.Parse(s))) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T12:38:43.317

您可以使用 IPAddress.Parse 方法，例如：

```
private static void parse(string ipAddress)
  {
    try
    {
      IPAddress address = IPAddress.Parse(ipAddress);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T12:39:08.900

您可以使用[IPAddress.Parse](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)来做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-24T13:16:26.363

您可以做的一件事是……在 foreach 循环中，您需要一个与您的集合匹配的实例。我的意思是，例如，如果您有一个字符串列表，如下所示：

```
 List<string> lMyList 
```

程序员不能使用 int 或 double 的实例遍历此列表...

```
 foreach (int lIterator in lMyList) 
    { // code 
    } 
```

这根本行不通，它会抛出一个关于“int”不是“string”类型的语法错误。

为了解决这个问题，您需要像这样遍历您的列表

```
 foreach (string lIterator in lMyList)
    { // code
    } 
```

现在，回答你的问题。IPAddress 是它自己的类和类型。不能简单地使它成为一种字符串。但是，有一些方法可以解决这个问题。将字符串显式转换为 IP 地址。但是，您需要先遍历您的列表。

```
 foreach (string lLine in File.ReadAllLines("proxy.txt"))
    {
        // Code In Here
    } 
```

这将迭代文本文件中的所有行。由于它是一个文本文件，它返回一个字符串列表。为了迭代字符串列表，程序员需要一个字符串局部变量来迭代它。

接下来，您需要将当前字符串解析为本地 IP 地址实例。有几种方法可以做到这一点，1) 您可以简单地解析 (System.Net.IPAddress.Parse()) 字符串，或者您可以 TryParse (IPAddress.TryParse()) 将字符串转换为 IPAddress。

```
 Method One:
    // This will parse the current string instance to an IP Address instance
    IPAddress lIPAddress = IPAddress(lLine);

    Method Two:
    IPAddress lIPAddress; // Local instance to be referenced
    // At runtime, this will "Try to Parse" the string instance to an IP Address.
    // This member method returns a bool, which means true or false, to say,
    // "Hey, this can be parsed!". Your referenced local IP Address instance would
    // have the value of the line that was parsed.
    if (IPAddress.TryParse(lLine, out lIPAddress)) 
    {
        // Code
    } 
```

好的，现在我们解决了这个问题。让我们完成这个。

```
 // Iterates over the text file.
    foreach (string lLine in File.ReadAllLines("proxy.txt"))
    {
        // Create a local instance of the IPAddress class. 
        IPAddress lIPAddress;
        // Try to Parse the current string to the IPAddress instance.
        if (IPAddress.TryParse(lLine, out lIPAddress))
        {
            // This means that the current line was parsed.
            // Test to see if the Address Family is "InterNetwork"
            if (string.Equals("InterNetwork", lIPAddress.AddressFamily.ToString()))
            {
                TextBox1.Text = lIPAddress.ToString();
            }
        }
    } 
```

我希望这有帮助！

# macos - 如何不使用 SED 在 OS X 的末尾添加新行

> ID：12037773
> 
> 赞同：3
> 
> 时间：2012-08-20T12:36:59.183
> 
> 标签：macos, sed

我有一个脚本可以找到所有 *.mvel 文件并将“D1000”替换为“D4000”。但是 sed 在最后添加了新行。我怎样才能避免文件末尾的新行？

这是我的脚本：

```
find . -name '*.mvel' -exec sed -i '' 's/D1000/D4000/g' '{}' \; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:11:18.313

如果你不介意使用`perl`

```
perl -pe 'chomp if eof' filename >filename2 
```

是我成功测试删除文件的结尾 \n

# ruby - 使用 Ruby 访问 .sqlite 文件

> ID：12037778
> 
> 赞同：0
> 
> 时间：2012-08-20T12:37:07.893
> 
> 标签：ruby, sqlite, netbeans, jruby

我有一个 .sqlite 文件，我想知道如何在 NetBeans IDE 中使用 Built in Ruby 来查询数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:45:00.020

您可以`sqlite3`为此使用 gem，

```
gem install sqlite3 
```

然后从红宝石代码：

```
require 'sqlite'

db = SQLite::Database.new "path/to/file.sqlite"
db.execute "WRITE YOUR QUERY HERE" 
```

另请查看[sqlite3 文档](http://rubydoc.info/gems/sqlite3/1.3.6/frames)。

# networking - RUDP和TCP有什么区别？

> ID：12037779
> 
> 赞同：3
> 
> 时间：2012-08-20T12:37:15.597
> 
> 标签：networking, tcp, udp

在维基百科中浏览 RUDP 时，我得到了以下定义

为了确保质量，它通过添加以下附加功能来扩展 UDP： 1\. 接收数据包的确认 2\. 窗口化和流控制 3\. 丢失数据包的重传 4\. 过度缓冲（比实时流更快）

这也是 TCP 所做的。现在，当这些功能实现到 UDP 时，两者之间的最大区别是什么。

我是网络新手，请解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:45:16.817

TCP 在开始通信流之前在 2 个端点之间建立持久连接。
RUDP 没有，因为它在 UDP 之上提供服务。从[草稿](http://tools.ietf.org/id/draft-ietf-sigtran-reliable-udp-00.txt)

> RUDP 建立在 UDP/IP 协议之上，为虚拟连接提供可靠的按序交付（最多重传次数）

# c# - XMLHTTP AJAX 请求在 asp.net 中第一次失败

> ID：12037786
> 
> 赞同：2
> 
> 时间：2012-08-20T12:37:33.053
> 
> 标签：c#, asp.net, ajax, xmlhttprequest

我在 asp.net 中使用 XMLHTTP AJAX

我正在向一个第一次失败的测试页面发出 ajax 请求，后来它会正常工作.. 为什么会发生这种情况？

**XMLHTTP 请求 JS 代码**

```
function test(Username)
{
var xmlhttp;
if (window.XMLHttpRequest)
{
    xmlhttp=new XMLHttpRequest();
}
else
{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    alert(xmlhttp.responseText);
    document.getElementById("UserStatus").innerHTML=xmlhttp.responseText;
    }
}
var url = "test.aspx?UserName=" + Username;
xmlhttp.open("GET",url,true);
xmlhttp.send();
} 
```

**test.aspx 页面代码**

```
SqlConnection conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=F:\Archana\Archu Work\Trainy\Pavan\Pavan\App_Data\Database.mdf;Integrated Security=True;User Instance=True");   
    SqlCommand cmd = null;
    protected void Page_Load(object sender, EventArgs e)
    {

            conn.Open();
            string username = Request.QueryString.Get("UserName");
            string str = "select Count(*) from Student where FirstName = '" + username + "'";
            cmd = new SqlCommand(str, conn);
            cmd.ExecuteNonQuery();
            int cnt = Convert.ToInt32(cmd.ExecuteScalar());
            string status = null;
            if (cnt == 1)
            {
                status = "UserName are Available";
            }
            else
            {
                status = "Plz Enter Other UserName";
            }
            Response.Write(status);
            conn.Close();
        } 
```

# jquery - jquery中变量的作用域

> ID：12037789
> 
> 赞同：-2
> 
> 时间：2012-08-20T12:37:38.573
> 
> 标签：jquery, radio-button, alert

这是简单的代码 -

```
$(document).ready(function() {       
        var genvalue="";    
    $("input:radio[name=gender]").click(function() {
    genvalue = $(this).val();
    alert (genvalue);
    }); 
alert (genvalue);   
     //genvalue = $('#gender').val();
//alert (genvalue);

value = $("#edu_det1").val();

more code.................goes ...... 
```

`alert (genvalue)`即使不是通过单击事件调用的值，我也希望发出警报，但是当单击单选按钮时，第一个警报警报的值，而第二个功能没有警报正确的值。我给出空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:47:23.233

Javascript 具有函数作用域——变量的生命周期仅限于其封闭函数的执行。

您在 click 函数中创建了一个新变量。相反，您应该为已经存在的变量分配一个值。所以你需要写

```
var genvalue="";
$("input:radio[name=gender]").click(function() {
    /* omit the "var" to assign a value to the variable genvalue*/
    genvalue = $(this).val();
});
alert(genvalue) // alerts genvalue, in this case probably ""
                // because the alert gets called before the click-handler fired 
```

代替：

```
var genvalue="";
$("input:radio[name=gender]").click(function() {
    /* This creates a new variable which is only visible in the click-function */
    var genvalue = $(this).val();
});
alert(genvalue) // will always alert "" and never the value assigned to
                // the var inside your click handler function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:41:12.847

如果您希望您的 genvalue 变量在您的文档就绪函数之外可用，请在函数之外定义它。

```
var genvalue="";
$(document).ready(function() {       
   $("input:radio[name=gender]").click(function() {
   genvalue = $(this).val();
   alert (genvalue);
});
alert (genvalue); 
```

此外，一旦你定义了你的变量，你就不需要再次使用 var 了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:41:12.830

当您在函数内部定义它时，genvalue 超出了函数的范围`var`。

```
var genvalue="";

$(document).ready(function() {       
    genvalue="";
    $("input:radio[name=gender]").click(function() {
        genvalue = $(this).val();
        alert (genvalue);
    }); 

alert (genvalue);   
//genvalue = $('#gender').val();
//alert (genvalue);

value = $("#edu_det1").val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:43:39.193

第二次调用`alert`不会给出正确的值，因为它**是在文档加载时调用的**。

这意味着*不可能*在您的**单选按钮**`click`上调用回调，因此该变量将是未定义的。**`genvalue`**

 **您还使用关键字`genvalue`在函数中声明，这会将其**范围**限定为该函数体，使其无法从回调函数外部访问。`var`**`click`**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T12:46:35.053

当单击单选按钮以及触发文档就绪事件时，会提醒 genvalue。第二个首先被触发，它不会有任何价值，因为您在顶部声明为

```
var genvalue=""; 
```

如果你想以任何一种方式提醒正确的值，试试[这个小提琴](http://jsfiddle.net/NU9m6/)

```
$(document).ready(function() {       
    var genvalue=$("input:radio[name=gender]").val();

     $("input:radio[name=gender]").click(function() {
      genvalue = $(this).val();
        alert (genvalue);
       });
     alert (genvalue);
 }); 
```****

# sql - 尽管语法不正确，Oracle 脚本未生成错误

> ID：12037793
> 
> 赞同：0
> 
> 时间：2012-08-20T12:37:52.887
> 
> 标签：sql, oracle, syntax-error, oracle-sqldeveloper

我已经为一个表编写了一个迁移脚本。我对其进行了测试并在克隆的数据库（db2）上运行它，它是成功的，sqldeveloper 也没有报告任何问题。但是，*此脚本在插入语句中包含语法错误，应该失败；*它在我的数据库的 db1 实例上失败（正确） - 这些数据库是相同的副本，尽管存储在不同位置的不同硬件上。我将错误标识为插入语句中的一个字段，该字段应该保留为 NULL，因为它正在用 abc 替换值 xyz。（基本上是重命名）

以下迁移脚本的摘录：

```
INSERT INTO EXAMPLE_A
SELECT
B_VAL_EXAMPLE_LRB,
NULL,           --B_NEW_VAL1_YN,
NULL,           --B_NEW_VAL2_YN,
NULL,                       --Location for B_OTHER_ABC_SPECIFY
B_PROGRAM_ID,
--After
A_VAL_EXAMPLE_LRB,
NULL,           --A_NEW_VAL1_YN,
NULL,           --A_NEW_VAL2_YN,
NULL,                       --Location for A_OTHER_ABC_SPECIFY
A_PROGRAM_ID
FROM EXAMPLE_A_BAK; 
```

上面的示例可以正常工作，并且可以在两个 db 实例上工作。下面的示例适用于表上没有数据的数据库（db2），但不适用于有数据的数据库（db1） - 也许这是我的问题？ **我需要尝试解释和理解为什么带有错误的脚本能够运行到数据库实例中而不会产生错误。**

```
INSERT INTO EXAMPLE_A
SELECT
B_VAL_EXAMPLE_LRB,
NULL,           --B_NEW_VAL1_YN,
NULL,           --B_NEW_VAL2_YN,
B_OTHER_ABC_SPECIFY,        --Location for B_OTHER_ABC_SPECIFY
B_PROGRAM_ID,
--After
A_VAL_EXAMPLE_LRB,
NULL,           --A_NEW_VAL1_YN,
NULL,           --A_NEW_VAL2_YN,
A_OTHER_ABC_SPECIFY,        --Location for A_OTHER_ABC_SPECIFY
A_PROGRAM_ID
FROM EXAMPLE_A_BAK; 
```

是否可能有不同版本的 sqldeveloper - 甚至是 oracle 解析查询的问题可能是解释？

也许我一直在看这个太久了，讽刺地忽略了一些东西，但任何帮助都会很棒。同一数据库的两个实例之间的唯一区别是，在我尝试迁移之前，db1 的表中已经存在数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:12:18.890

根据您的错误消息，表 Example_A_Bak 不包含列 A_OTHER_ABC_SPECIFY。

我倾向于相信错误消息，并查看该表的定义。

第一个版本没有在 Example_A_Bak 中提及该字段，因此不会出错。

我不相信这与表是否已经有数据有关。我不知道 Oracle 会缩短列的评估，因为该表没有数据，尽管这是可能的。

# php - 使用Zend自动会话超时时从数据库中删除用户存储的临时记录？

> ID：12037797
> 
> 赞同：0
> 
> 时间：2012-08-20T12:38:01.133
> 
> 标签：php, zend-framework

我有两张桌子（`tb_access_log_table`和`tb_session`）。`tb_access_log_table`一旦会话使用自动过期，记录将被清除`Zend Framework`。

我是新手`Zend Framework`。我该怎么做？

我不知道如何将另一个 ( `tb_access_log_table`) 调用到会话`read($id)`函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:20:39.457

我可能会使用设置为使用 CRON 定期运行的脚本来解决这个问题。让它在 tb_session 上找到已过期的会话，并使用任何 FK 关联 tb_access_log_table 上的记录来清除这些记录。

确保每个过期会话执行一些基于代码的回调是不可靠的。

# .net - 客户端配置文件中的 C#/.NET json 序列化程序？

> ID：12037800
> 
> 赞同：2
> 
> 时间：2012-08-20T12:38:12.240
> 
> 标签：.net, json

.NET 客户端配置文件中是否有 JSON 反序列化器？还是包括 System.Web.Extensions.dll 或 json.net（第 3 方，它非常可靠）我唯一的选择？

我希望现在客户端配置文件中内置了一些东西（2012 年使用 .NET 4.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:43:01.130

.NET 4.5中[不再有客户端配置文件](http://msdn.microsoft.com/en-us/library/cc656912%28v=vs.110%29.aspx)。所以请随意使用 JSON.NET。或`JavaScriptSerializer`。管他呢。

顺便说一下，新的 WebApi HttpClient 使用 JSON.NET，所以微软显然倾向于它。

# html - 字体在我的共享网络服务器上加载时间过长

> ID：12037801
> 
> 赞同：1
> 
> 时间：2012-08-20T12:38:12.507
> 
> 标签：html, css

我在我的网站上使用的字体未安装在我的共享 Web 服务器上。

但是现在字体在 Web 服务器上加载的时间太长了。

以下是我正在使用的 css。

**CSS**

```
@font-face { 
 font-family: "PT Sans"; 
 src: url(http://mysite.com/font/PTS55F.ttf); 
}

body{ font-family: "PT Sans"; } 
```

有没有其他替代方法，所以字体不会花费太多时间。

还有怎么做才能使字体看起来平滑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:40:24.790

我会在您自己的网站上托管字体，现在您的代码必须转到另一台服务器才能获取字体。如果在同一台服务器上会更快。

至于平滑字体，这可能会有所帮助：

[http://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm](http://webdesign.about.com/od/styleproperties/p/blspfontsmooth.htm)

根据评论，字体文件太大 - 看看这个：

[减小字体文件大小](https://stackoverflow.com/questions/5876918/reducing-font-file-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:20:11.567

或者，使用 PT Sans 的谷歌网络字体版本，可在此处获得：

[http://www.google.com/webfonts#UsePlace:use/Collection:PT+Sans](http://www.google.com/webfonts#UsePlace:use/Collection:PT+Sans)

使用 google 解决方案的优势在于，如果有人访问您的网站，并且他们之前曾使用相同的字体访问过另一个网站，他们可能会缓存字体文件，而不必下载您的网站正在使用的文件。如果您在服务器上托管字体文件，则使用从 google 缓存的字体的同一用户将不得不重新下载实际上是副本的内容。

另一个明显的好处是它可以节省服务器的带宽！

# android - android中的ListView和自己的行布局

> ID：12037808
> 
> 赞同：0
> 
> 时间：2012-08-20T12:38:34.900
> 
> 标签：android, android-layout

我有一个布局，其中有一个列表视图。我对此列表视图的每个项目都有一个布局，名为：email_listview_item，这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:orientation="vertical" 
    android:layout_gravity="center_vertical"
    android:background="@color/antiquewhiter">

    <ImageView
        android:id="@+id/email_list_item_checkbox_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="30dp"
        android:src="@drawable/form2andcheckbox_android" />

    <TextView
        android:id="@+id/email_list_item_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/email_list_item_checkbox_icon"
        android:text="TextView" 
        android:textColor="@color/bisque"/>

    <ImageView
        android:id="@+id/email_listview_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="309dp"
        android:src="@drawable/apvpro_icon" />

</RelativeLayout> 
```

我想用这些项目创建列表视图，但我得到了 nullPointer。你能帮我为什么吗？这是我的课的代码：

```
public class ListFragment extends ListActivity{
    ListView listView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        listView = (ListView) findViewById(R.id.email_listview);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
          "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
          "Linux", "OS/2" };

        // First paramenter - Context
        // Second parameter - Layout for the row
        // Third parameter - ID of the TextView to which the data is written
        // Forth - the Array of data
//      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
//        R.layout.email_list_item, android.R.id.text1, values);
        Email_list_view_adapter adapter = new Email_list_view_adapter(this, values);
        // Assign adapter to ListView
        listView.setAdapter(adapter); 
    }

} 
```

email_list_view_adapter：

```
public class Email_list_view_adapter extends ArrayAdapter<String>{
    private final Context context;
    private final String values[];

    public Email_list_view_adapter(Context context, String[] values){
        super(context, R.layout.email_list_item, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.email_list_item, parent,false);
        TextView desription = (TextView) rowView.findViewById(R.id.email_list_item_text);
        ImageView image = (ImageView) rowView.findViewById(R.id.email_listview_image);
        desription.setText(values[position]);
        String s = values[position];
        if(s.startsWith("iPhone")){
            image.setImageResource(R.drawable.senddata_android);
        }else{
            image.setImageResource(R.drawable.senddata_selected_android);
        }

        return rowView;
    }

} 
```

这是堆栈跟踪：

```
08-20 14:27:03.334: E/AndroidRuntime(9196): FATAL EXCEPTION: main
08-20 14:27:03.334: E/AndroidRuntime(9196): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.spot.p2a/pdf2app.ListFragment}: java.lang.NullPointerException
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.os.Looper.loop(Looper.java:132)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread.main(ActivityThread.java:4025)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at java.lang.reflect.Method.invokeNative(Native Method)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at java.lang.reflect.Method.invoke(Method.java:491)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at dalvik.system.NativeStart.main(Native Method)
08-20 14:27:03.334: E/AndroidRuntime(9196): Caused by: java.lang.NullPointerException
08-20 14:27:03.334: E/AndroidRuntime(9196):     at pdf2app.ListFragment.onCreate(ListFragment.java:30)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
08-20 14:27:03.334: E/AndroidRuntime(9196):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
08-20 14:27:03.334: E/AndroidRuntime(9196):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:44:54.060

您没有定义活动的布局

```
 setContentView(R.layout.your_layout); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:46:12.890

在从 xml 分配 ListView 引用之前，您应该指定 setContentView() 与 ListView 持有的布局。这里缺少 NullPointer 异常的问题。`setContentView(R.layout.my_list)`最好在 super.onCreate(savedInstanceState); 旁边立即调用一个方法；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T12:51:14.690

由于您的活动是`ListActivity`，

第一次打电话，

```
setContentView(R.layout.listview_layout); 
```

现在你可以

```
listView = getListView(); 
```

代替

```
listView = (ListView) findViewById(R.id.email_listview); 
```

看看这个关于[ListView 和 ListActivity的完整教程](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T12:48:55.767

您将在此行获得 NullPointerException：

```
 listView = (ListView) findViewById(R.id.email_listview); 
```

这是因为您还没有分配一个布局来查找该 View，因此 Android 在每个 Activity 和 Fragment 具有的默认 FrameLayout 中查找它。你有两个解决方案：

`setContentView(R.layout.your_layout_file);`1）使用前打电话`findViewById()`

2）在该行之前添加`View v = getLayoutInflater().inflate(R.layout.button, null);`，然后将该行更改为`listView = (ListView) v.findViewById(R.id.email_listview);`

# ruby-on-rails - 如何使复选框值成为字符串并存储在数据库中？

> ID：12037817
> 
> 赞同：1
> 
> 时间：2012-08-20T12:39:00.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果将给定字段定义为`boolean`，则将其存储为`boolean`，如果将属性定义为`integer`，则其值为 1 或 0，如果为 ，则为`String`“1”或“0”。但是我想`text`在复选框被选中`checked`和`empty`未选中时存储一个。这是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:04:11.480

在您的创建/更新操作中，添加额外的检查以查看表单发布的值。基于该值，您可以将其设置为您想要的任何字符串，

.ie如果check.checked？check = "字符串 A" 或 "字符串 B"

# python - 处理同一实体的多个实例和状态

> ID：12037818
> 
> 赞同：1
> 
> 时间：2012-08-20T12:39:06.350
> 
> 标签：python, sqlalchemy

```
from sqlalchemy.orm import Session
s = Session()
s.autoflush = False
s.autocommit = False

p1 = s.query(Person).first()
print p1 #prints 'Ivan Petrov', correct name of a person #1
p1.name = 'John Smith' #change the person's name

p2 = s.query(Person).first()
print p2 #prints 'John Smith', but the object wasn't flushed yet. 
```

所以，问题是——我该如何正确处理这种情况？在我这样说之前，我需要对 p1 进行更改以不影响会话（和 p2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:51:46.023

您可以尝试从会话中分离对象：

```
session.expunge(p1) 
```

要重新连接，您可以尝试：

```
p2 = session.merge(p1) 
```

或者使用不同的会话对象。但迟早会出现你操纵同一个实体的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:40:33.660

在 SQLALchemy 中进行了大量工作，以使其以正确的方式工作 - 而不是您现在需要的方式。

在不了解 SQLAlchemy 内部原理的情况下，我可以想到的一种方法是使用您正在更改的实例创建一个代理对象，并在其中进行所有更改以仅在被告知时更改原始对象。

```
class AlchemyProxy(object):
    def __init__(self, obj):
        self._obj = obj
        self._changes = []

    def __setattr__(self, attr, value):
        self._changes.append((attr, value)
        # change the attributes in this instance
        return object.__setattr__(self, attr, value)

    def __getattr__(self, attr):
        # This is only called when the requested attribute was not
        return getattr(self._obj, attr)

    def _commit(self):
        for attr, value in self._changes:
            setattr(self._obj, attr, value) 
```

并像这样使用它：

```
p1 = AlchemyProxy(s.query(Person).first()) 
```

# c# - 带有实体框架键的错误消息

> ID：12037823
> 
> 赞同：0
> 
> 时间：2012-08-20T12:39:15.843
> 
> 标签：c#, .net, entity-framework

我正在运行 EF4.3，首先是数据库。

我的用户主键是 UserId，我用它来关联所有其他关联的表。

我有 3 种类型的用户，它们都有唯一的值，因此它们存储在自己的表中。他们是贡献者、成员和管理员。

使用用户表中的 UserId 和 UserRoleId 以及从属表中的 UserId 和固定的 UserRoleId 对这些表施加进一步的约束。例如，成员表将具有计算值“3”，即成员的 UserRoleId。这确保了一个用户在任何时候只能存在于一个订阅者表中。

EF 在 edmx 构建中引发错误，因为 UserRoleId 不是 Users 表的主键的一部分。一切似乎都正常，但只是想知道我做错了什么，或者我能做些什么来规避错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T13:06:34.697

您需要更改 UserRoleId 的名称，因为 EF 认为它是 PR 键，或者如果您希望 UserRoleId 成为键的一部分，请在属性顶部使用 [Key]。

# java - 从日历对象获取 WEEK_OF_YEAR 时出现问题

> ID：12037825
> 
> 赞同：2
> 
> 时间：2012-08-20T12:39:24.960
> 
> 标签：java, calendar

`WEEK_OF_YEAR`从日历对象获取时出现问题。

```
by passing date '31-Dec-2014':
calendar1.get(Calendar.WEEK_OF_YEAR) - return 1  

by passing date '31-Dec-2015'  
calendar1.get(Calendar.WEEK_OF_YEAR) - return  53  

by passing date '31-Dec-2016'   
calendar1.get(Calendar.WEEK_OF_YEAR) - return 52

by passing date '31-Dec-2017'  
calendar1.get(Calendar.WEEK_OF_YEAR) - return 52  

by passing date '31-Dec-2018'   
calendar1.get(Calendar.WEEK_OF_YEAR) - return 1 
```

每次它返回不同的值。你能帮我解决这个问题吗？

代码如下。

```
 Calendar calendar1 = Calendar.getInstance();
  calendar1.setTime('31-Dec-2012');
  calendar1.set(Calendar.HOUR_OF_DAY, 0);
  calendar1.setFirstDayOfWeek(Calendar.MONDAY); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:43:42.780

`WEEK_OF_YEAR`[如您在此 javadoc](http://download.java.net/jdk7/archive/b123/docs/api/java/util/GregorianCalendar.html#week_and_year) 中所见，定义取决于区域设置：

> 为 WEEK_OF_YEAR 字段计算的值范围为 1 到 53。日历年的第一周是从 getFirstDayOfWeek() 开始的最早的 7 天时间段，其中至少包含该年的 getMinimalDaysInFirstWeek() 天数。因此，它取决于 getMinimalDaysInFirstWeek()、getFirstDayOfWeek() 和 1 月 1 日的星期几的值。一年的第 1 周和下一年的第 1 周（不包括在内）之间的周数从 2 到 52 或53 年（儒略-格里高利过渡所涉及的年份除外）。

还可以查看[这个问题](http://www.java-forums.org/advanced-java/15541-calendar-bug.html)或[Wiki - ISO 时钟](http://en.wikipedia.org/wiki/ISO_week_date)以查看周差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:53:07.697

这是一个愚蠢的问题，但长话短说

```
Calendar c = Calendar.getInstance();
c.setMinimalDaysInFirstWeek(7);//anything more than 1 will work in this year
DateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
c.setTime( sdf.parse("31/12/2010"));
System.out.println( c.get( Calendar.WEEK_OF_YEAR ) ); 
```

2012 年 12 月 31 日返回 53

# javascript - jquery列出当前页面目录中的特定页面

> ID：12037826
> 
> 赞同：-2
> 
> 时间：2012-08-20T12:39:27.497
> 
> 标签：javascript, jquery

是否可以在当前页面的目录甚至父目录中列出特定的现有页面？

例如，我有 index.html、index2.html 和 index3.html 等等，更多……我希望在我的 *js 文件中列出所有 index* 文件，然后通过 ajax 加载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:47:15.737

不适用于客户端代码，例如 JavaScript。您只能使用服务器端代码执行此操作，例如 PHP、ASP/ASPX 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:44:16.800

**[我在几个项目前使用SAMMY](http://sammyjs.org/)**做过类似的事情......我不知道它是否可以帮助你......

# python - python urllib2 计时

> ID：12037827
> 
> 赞同：7
> 
> 时间：2012-08-20T12:39:28.123
> 
> 标签：python, timer, urllib2, httplib

我想收集与 Web 请求的每个阶段需要多长时间相关的统计信息。`httplib`提供：

> ```
> def run(self):
>     conn = httplib.HTTPConnection('www.example.com')
>     start = time.time()
>     conn.request('GET', '/')
>     request_time = time.time()
>     resp = conn.getresponse()
>     response_time = time.time()
>     conn.close()
>     transfer_time = time.time()
> 
>     self.custom_timers['request sent'] = request_time - start
>     self.custom_timers['response received'] = response_time - start
>     self.custom_timers['content transferred'] = transfer_time - start
> 
>     assert (resp.status == 200), 'Bad Response: HTTP %s' % resp.status 
> ```

这些统计信息是否可以从更高级别的界面（例如 ）获得`urllib2`？是否有提供此类统计数据的高级图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T21:33:19.420

正如在[相关问题](https://stackoverflow.com/questions/16931280/response-time-for-urllib-in-python)中提到的，现在执行此操作的一个好方法是使用[requests](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)库。您可以使用它来测量请求延迟，但我不确定您是否可以测量内容传输时间。您可以通过将 HEAD 请求与 GET 请求进行比较来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:07:38.423

time.time 不是最可靠和最精确的。您可以在 python 中使用 timeIt 模块进行分析。[http://docs.python.org/library/timeit.html](http://docs.python.org/library/timeit.html) 这是一个使用 timeit 的代码片段

```
 statmnt = 'print "Replace print with the snippet you want to profile"'
    setup = 'print "Replace this line with some snippet specific imports"' 
    n = 1 #Number of times you want the timeit module to execute the statmnt
    t = timeit.Timer(statmnt, setup)
    qTime = t.timeit(n) 
```

在您的情况下，您将不得不为请求、响应和内容创建三个 timeit 对象。请参阅文档以获取有关模块 timeit 的更多信息

# modx - modx Revolution babel - 当我没有登录时页面不可用

> ID：12037834
> 
> 赞同：0
> 
> 时间：2012-08-20T12:39:45.203
> 
> 标签：modx, babeljs

我已经按照说明中的说明安装了这个软件包，但出现了这个奇怪的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:49:08.827

好的，我找到了解决这个恼人问题的方法。安装指南错了！！！在每个上下文权限设置中，将（匿名）的“访问策略”更改为“上下文”或（无策略）。我希望它可以帮助某人并防止浪费时间..

# iphone - 是否需要在 NSObject 类中编写 init 方法

> ID：12037835
> 
> 赞同：3
> 
> 时间：2012-08-20T12:39:45.250
> 
> 标签：iphone, objective-c, ios, xcode, nsobject

我正在为我的应用程序编写一个单独的 NSObject 类，用于 WebService 调用，所以我有一个困惑，我需要像下面这样明确地编写 init 方法，

```
-(id)init{
    self = [super init];
    return self;
} 
```

或者即使我忽略这一点并尝试从另一个班级打电话，它会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:40:53.443

如果你不需要它，你可以放心地忽略它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T12:43:01.823

像 Objective C 中的所有方法一样，该`init`方法可以被继承。如果您不需要对类的其他成员执行任何初始化，则可以`init`通过省略类中的方法来使用超类的方法。

# ubuntu - 使用 cmake 的 Libhand 库编译错误

> ID：12037839
> 
> 赞同：2
> 
> 时间：2012-08-20T12:39:53.350
> 
> 标签：ubuntu, cmake, ogre, libhand

我正在尝试在 Ubuntu 12.04 上从[libhand.org构建一个手模型库。](http://www.libhand.org/)该库使用 ogre 和 opencv 库。我按照作者提供的说明成功安装了 ogre 和 opencv。不幸的是，当使用 cmake（通过命令“cmake ..”）配置 libhand 库本身时，我收到以下错误：

> CMake 错误：此项目中使用了以下变量，但它们设置为 NOTFOUND。请设置它们或确保它们在 CMake 文件中正确设置和测试： OGRE_RenderSystem_GL_INCLUDE_DIR (ADVANCED) 用作目录 /home/roman/work_dir/libhand-0.9/hand_cpp/source 中的包含目录 用作目录 /home/ 中的包含目录roman/work_dir/libhand-0.9/hand_cpp/source/dot_sceneloader
> 用作目录 /home/roman/work_dir/libhand-0.9/hand_cpp/source/dot_sceneloader/tinyxml 中的包含目录
> 
> -- 配置不完整，出现错误！

有谁知道为什么会发生此错误以及可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:45:44.860

我是[libhand](http://www.libhand.org/)库的作者，我用 Roman 调试了这个问题。这是此问题的原因和解决方法：

原因：

> **在编译并安装 OGRE 之前**，未安装 OpenGL 开发者头文件/库。****

 **OGRE 静默编译，但不支持 OpenGL。由于 OGRE 中缺少 OpenGL 支持，因此使用 OGRE 的代码无法编译。

* * *

此问题的**修复**：

1) 通过执行以下操作安装 OpenGL 开发头文件/库：

```
sudo apt-get install freeglut3 freeglut3-dev 
```

2）重新编译/重新安装OGRE。

使用[libhand](http://www.libhand.org/)时，重新编译 OGRE 意味着进入`install_help/linux_ogre_static_installer`目录并运行：

```
./install_ogre_static.sh clean 
```

其次是

```
./install_ogre_static.sh build 
```

和

```
sudo ./install_ogre_static.sh install 
```

3) 清理并重新构建报告此错误的 libhand 或其他软件。

对于 libhand，请转到`hand_cpp`并执行以下操作：

```
rm -rf build/* 
```

其次是

```
cd build
cmake .. 
```

在此步骤之后，您应该不会看到报告的错误，并且希望 libhand 能够开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:46:10.643

CMake 找不到 OpenGL 的头文件。为 libGL安装`-dev`软件包。**

# c# - 使用 C# 中的 Bouncy Castle 加密 CCM 中的 AES 密码

> ID：12037843
> 
> 赞同：2
> 
> 时间：2012-08-20T12:40:14.010
> 
> 标签：c#, encryption, aes, bouncycastle

我想使用 Bouncy Castle 使用 AES/CCM 加密，但我不知道我在以下代码中做错了什么（密钥和 iv 是从它们的 HEXA 表示中获得的）：

```
using System;
using System.Linq;
using System.Text;
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Crypto.Modes;
using Org.BouncyCastle.Crypto.Parameters;

namespace Crypto.Tests {
    class MainClass {
        public static void Main (string[] args) {
            var key = "D44EDA90DDCFA90216BDAC1559D704D336D371A3DA943E935315964D27CC91DC".ToByteArray();
            var iv = "7B13E1A17861356401A3C15F4F0525C3".ToByteArray();
            var nonSecretPayload = new byte[] { };
            var plainText = Encoding.UTF8.GetBytes("Secret message!!!");

            var cipher = new CcmBlockCipher(new AesFastEngine());
            var parameters = new CcmParameters(
                new KeyParameter(key), 64, iv, nonSecretPayload);
            cipher.Init(true, parameters);

            var cipherText = new byte[cipher.GetOutputSize(plainText.Length)];
            var len = cipher.ProcessBytes(plainText, 0, plainText.Length, cipherText, 0);
            cipher.DoFinal(cipherText, len);

            Console.WriteLine(Convert.ToBase64String(cipherText));

            Console.Read();
        }
    }

    public static class StringExtentions {
        public static byte[] ToByteArray(this string toTransform) {
            return Enumerable
                .Range(0, toTransform.Length / 2)
                .Select(i => Convert.ToByte(toTransform.Substring(i * 2, 2), 16))
                .ToArray();
        }
    }
} 
```

执行上述代码会导致以下异常：

```
Unhandled Exception: System.ArgumentException: Destination array was not long enough. 
Check destIndex and length, and the array's lower bounds.
  at System.Array.Copy(Array sourceArray, Int32 sourceIndex, Array destinationArray, Int32 destinationIndex, Int32 length, Boolean reliable)
  at Org.BouncyCastle.Crypto.Modes.CcmBlockCipher.ProcessPacket(Byte[] input, Int32 inOff, Int32 inLen)
  at Org.BouncyCastle.Crypto.Modes.CcmBlockCipher.DoFinal(Byte[] outBytes, Int32 outOff)
  at Crypto.Tests.MainClass.Main(String[] args) in c:\Users\Emi\Documents\Projects\Crypto\Crypto.Tests\Main.cs:line 23 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:32:50.700

当它试图从你的随机数生成一个计数器 IV 时，它在充气城堡中崩溃了，因为它期待一个 (BlockSize - 1) 或更小的随机数，例如增量数字。如果您从 iv 中删除一个字节，它就可以工作。

```
 var iv = "7B13E1A17861356401A3C15F4F0525".ToByteArray(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T13:04:11.710

我不相信这些台词做你认为他们做的事，

```
var key = "D44EDA90DDCFA90216BDAC1559D704D336D371A3DA943E935315964D27CC91DC".ToByteArray(); 
var iv = "7B13E1A17861356401A3C15F4F0525C3".ToByteArray(); 
```

你可能想要的更像是，

```
var key =
{
    0xD4, 0x4E, 0xDA, 0x90, 0xDD, 0xCF, 0xA9, 0x02,
    0x16, 0xBD, 0xAC, 0x55, 0x9D, 0x70, 0x4D, 0x33,
    0x6D, 0x37, 0x1A, 0x3D, 0xA9, 0x43, 0xE9, 0x35,
    0x31, 0x59, 0x64, 0xD2, 0x7C, 0xC9, 0x1D. 0x0C
}; 

var iv =
{
    0x7B, 0x13, 0xE1, 0xA1, 0x78, 0x61, 0x35, 0x64,
    0x01, 0xA3, 0xC1, 0x5F, 0x4F, 0x05, 0x25, 0xC3
}; 
```

此外，您的密钥长度无效（我在最后添加了 0 C）。

# linux - Linux上的cilk和glibc

> ID：12037844
> 
> 赞同：0
> 
> 时间：2012-08-20T12:40:15.597
> 
> 标签：linux, ubuntu, glibc, cilk

我想在我的 linux 机器（Ubuntu 12.04 LTS）上安装 Cilk，在 README 文件中他们说我需要在我的机器上安装 glibc，我下载了 2.16 版本，经过多次尝试安装后，我弄乱了一些文件即使我有很多错误也安装`make check`（在多次尝试解决它们失败后，我还是安装了）。现在我在我的机器上重新安装了 Ubuntu，我可以编译和构建 glibc 代码而不在机器上安装它（做所有事情，直到`make check`没有`make install`），但是在构建 Cilk 时，我可以告诉它使用 glibc 文件夹（已经编译和构建）我在桌面上的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:47:35.467

在 Ubuntu 上手动升级 glibc 可能会破坏很多东西。首先，设置正确的构建环境并非易事，并且安装损坏的 glibc 会影响您的系统（如您现在所见）。其次，在 Ubuntu/Debian 软件包之上安装文件，可能会在将来升级软件包时破坏软件包管理器。

最好的解决方案是使用升级的 libc 创建一个迷你环境。[从零开始的 Linux](http://www.linuxfromscratch.org/lfs/view/development/)就是这样做的。您可以按照这些说明进行操作，直到安装了 libc，然后将 Click 安装到该环境中。需要注意的重要一点是 LFS 使所有内容都存在于一个单独的目录中。因此，您仍然安装 libc，只是不是在 . `/`，而是在一个小监狱中（LFS 使用`/static`，您可能更喜欢`/opt/clik`）。

最后一个想法：您是否尝试过在 Ubuntu 附带的 glibc 2.15 上编译 Clik？Ubuntu 倾向于向后移植功能，因此 Ubuntu 的 2.15 可能具有 2.16 的功能，但不是全部。

# c# - 调试时nunit断言异常

> ID：12037850
> 
> 赞同：0
> 
> 时间：2012-08-20T12:40:38.670
> 
> 标签：c#, nunit, testdriven.net

这是一个简单的问题，我遇到了一个场景，让我思考我调试 NUnit 测试的方式。

我有一堂类似的课

```
public class SomeClass {
   public static bool SomeMethod(){
      return true;
   }
} 
```

现在我有一个像这样的 NUnit 测试

```
[TestFixture]
public class UnitTests
{
   [Test]
   public void TestOne()
   {
      var retval = SomeClass.SomeMethod();
      Assert.IsFalse(retval, "Test Failed"); 
   }
} 
```

当我在 Debug 中运行测试时，我得到了这个异常

![断言异常](../Images/50465d1ae9acf5bec7e64fbfe632df68.png)

我的一部分是说这应该是这样，因为 NUnit 通常会将此异常视为失败，而我的另一部分是说不，这里不应该有异常，测试应该失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:45:57.673

使用`Assert.IsFalse`期待 False。您可以使用`Assert.IsTrue`或`Assert.AreEqual(true, retval)`。

来自[MSDN](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.assert.isfalse%28v=vs.80%29)。

> Assert.IsFalse 方法 - 验证指定条件是否为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:45:40.277

您是否在 VS 中运行此 Nunit 测试？尝试在 VS 之外通过 Nunit 测试运行程序编译和运行您的测试。

如果您想在 VS 中运行，请尝试使用 Resharper、TestDriven.NET 等插件。

也看看这里： [如何在 Visual Studio 的调试模式下运行 NUnit？](https://stackoverflow.com/questions/759854/how-do-i-run-nunit-in-debug-mode-from-visual-studio)

# date - php：将变量添加到日期类型的输入标签中

> ID：12037852
> 
> 赞同：0
> 
> 时间：2012-08-20T12:40:50.007
> 
> 标签：date, input

我在将“app_date”变量显示到日期类型的输入标签中时遇到问题。

部分代码：

```
<input type="date" name="app_date" value="<?php echo $loan['app_date']; ?>"> 
```

使用文本类型，没有任何问题，一切都正确显示。如何解决它可以与日期类型一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:42:40.217

尝试`print_r($loan['app_date']);`代替回声

或许：

```
<input type="date" name="app_date" value="<?php echo date($loan['app_date']); ?>"> 
```

对不起，我不完全理解这个问题，在 html 端打印出什么？

好的，我现在明白了，我认为您提供的日期的 HTML 格式不正确

检查此页面：

[输入类型 DateTime - 值格式？](https://stackoverflow.com/questions/10854874/input-type-datetime-value-format)

如果您正确格式化 $loan["app_date"] 则 html 应该能够正确解析和显示它:)

# perl - Perl 中的函数组合

> ID：12037853
> 
> 赞同：8
> 
> 时间：2012-08-20T12:40:50.663
> 
> 标签：perl, functional-programming

在 Perl 5 中，我们可以应用函数式编程技术（使用闭包、高阶函数，如 map、grep 等）。但是函数组合呢？比方说，在 Haskell 中，它可以很容易地用 (.) 函数完成：

```
map (negate . abs) [-3, 2, 4, -1, 5] 
```

Perl 中这种“点函数”的等价物是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T12:50:04.307

可悲的是，我不知道 Haskell。

但是函数组合本质上是将一个函数的输出作为参数放入下一个函数中。

`output = (negate . abs)(input)`是一样的`output = negate(abs(input))`。在 Perl 中，parens 通常是可选的，输入是隐含在`map`函数中的，所以我们可以说

```
output = map (negate abs) list 
```

现在只要把它翻译成 Perl 语法，我们就有了

```
my @output = map {- abs} (1,2,3); 
```

对于数学/代数否定，和

```
my @output = map {! abs} (1,2,3); 
```

对于逻辑否定（当然与 相同`map {! $_} (1,2,3)`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T13:44:15.340

好的，首先让我们看一下 Haskell 中 (.) 的函数签名：

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

这很容易像这样实现

```
foo :: (b -> c) -> (a -> b) -> a -> c
foo f g a = f(g a) 
```

Perl 中的实现可能看起来像这样

```
sub dot {
    my $f = shift;
    my $g = shift;
    my $a = shift;
    $f->( $g->($a) )
} 
```

现在我们实现这样的`negate`功能

```
sub negate { - shift } 
```

我们已经准备好像这样使用它了

```
my @foo = map { dot \&negate, sub{abs}, $_ } -2..2;
print join( ", ", @foo) . "\n"; 
```

但正如您从其他答案中看到的那样，有更简单的方法可以做到这一点。所以你真正应该问自己的是，你为什么要这么做。Haskel 有几个特性使得函数组合非常有用。然而，在 Perl 中，我觉得它真的很笨拙和尴尬。

如果您对 Perl 真正擅长的函数式编程类型感兴趣，我推荐 Book [Higher-Order Perl](http://hop.perl.plover.com/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T12:47:11.573

我不确定这是您正在寻找的答案：

```
sub negate { - $_[0] }
map { negate abs } -3, 2, 4, -1, 5 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-20T16:23:10.307

```
sub compose {
    my ( $f, $g ) = @_;
    return sub { $f->( $g->( @_ )); };
}

sub negate (_) { - ( $_[0] // $_ // 0 ); }

my $neg_abs = compose( \&negate, \&CORE::abs );

my @negs = map { $neg_abs->( $_ ) } -3, 2, 4, -1, 5; 
```

`compose`将实现一个非常*简单*的点函数版本。但如前所述，它不是特别需要的，除非您想将该功能传输到另一个位置。

# powershell - get-counter - 无法连接到远程计算机

> ID：12037859
> 
> 赞同：2
> 
> 时间：2012-08-20T12:41:13.343
> 
> 标签：powershell, powershell-2.0

我正在使用 Get-counter 来获取例如处理器时间。我可以为本地计算机获取它，但我不知道如何输入凭据以从远程计算机获取数据。还是我需要在该服务器上打开某些东西来提供该信息？

```
Get-Counter -ComputerName "remotecomputer" -counter "\Processsor(_Total)\% Processor Time" 
```

错误信息：

```
Get-Counter: Unable to access the desired computer or service. Check the permissions and authentication of the log service or the interactive user session against those on the computer or servece being monitored. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:58:53.980

默认情况下，您在本地工作站上使用的凭据将用于访问远程系统。因此，如果您没有远程系统的管理权限，这将失败。

您可以通过指定告诉 Powershell 提示您使用许多 cmdlet 的备用凭据`-credential (get-credential)`，但显然`Get-Counter`不是其中之一。

`Get-Counter`不使用 WinRM，因此在服务器上启用不需要任何额外的东西。

# php - IMAP 在 PHP 中不起作用

> ID：12037862
> 
> 赞同：1
> 
> 时间：2012-08-20T12:41:16.387
> 
> 标签：php, imap

以下代码不起作用。我收到此错误：`500 - Internal server error :: Warning: imap_open() [function.imap-open]: Couldn't open stream {imap.gmail.com:993/imap/ssl}INBOX`

这是代码：

```
$hostname = 'xxxx';
$username = 'xxxx';
$password = 'xxxx';

$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

$emails = imap_search($inbox,'ALL');
if($emails) 
{
    $output = '';
    rsort($emails);
    foreach($emails as $email_number) 
    {
        $overview = imap_fetch_overview($inbox,$email_number,0);
        $message = imap_fetchbody($inbox,$email_number,2);

        $output.= '<div class="toggler '.($overview[0]->seen ? 'read' : 'unread').'">';
        $output.= '<span class="subject">'.$overview[0]->subject.'</span> ';
        $output.= '<span class="from">'.$overview[0]->from.'</span>';
        $output.= '<span class="date">on '.$overview[0]->date.'</span>';
        $output.= '</div>';

        $output.= '<div class="body">'.$message.'</div>';
    }
    echo $output;
} 

imap_close($inbox); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T02:14:21.693

我刚刚测试并能够得到那个确切的错误。为了解决它，我这样做了：

1) 在 Google 中打开 IMAP 2) 输入正确的登录凭据。

我相信它是由不正确的登录凭据触发的。此外，您似乎不能在用户名前面使用“recent:”之类的前缀。

# variables - 重置 joomla 状态变量

> ID：12037864
> 
> 赞同：0
> 
> 时间：2012-08-20T12:41:42.207
> 
> 标签：variables, search, view, joomla, state

我有一个项目列表页面和一个用于搜索的过滤区域。为了从过滤器表单中传递和检索变量，我使用 getUserStateFromRequest 然后我根据这些列出项目。但是当我在行或其他视图之间移动时，我返回我想重置变量以查看整个列表，但它没有。我想我应该在视图改变时重新设置它们。如何控制这个或任何其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:11:06.220

也许您根本不想使用*getUserStateFromRequest*。getUserStateFromRequest 将请求变量存储到用户会话。如果您希望在离开页面时重置状态，您可以选择不在用户会话中保存变量。

在您的模型 populateState 中，类似于：

```
$app = JFactory::getApplication();
$search_term = $app->input->get('search_term', null, 'CMD');
$this->setState('filter.search_term', $search_term); 
```

然后检索状态（仍在您的模型中）：

```
$search_term = $this->getState('filter.search_term');
if($search_term != null)
    $query->where('my_field = ' . $db->quote($search_term)); 
```

请注意，代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T08:45:58.533

您可以像这样重置活动过滤器，然后将 resetuserstate=1 添加到查询中：

* * *

```
protected function populateState($ordering = null, $direction = null) {

    ... ... ...

    parent::populateState('a.title', 'asc');

    $activefilters=$this->getActiveFilters();
    $jinput = JFactory::getApplication()->input;
    $resetUserState=(bool) $jinput->get("resetuserstate",0, 'INT');        

    if ($resetUserState) {
        foreach ($activefilters as $activefilter => $filterstate) {
            // clearing filters
            $app->setUserState($this->contect . 'filter.'. $activefilter, '');
            $this->setState('filter.'.$activefilter,'');

        }
    } 
} 
```

* * *

注意：当您通过错误地设置过滤器来混淆用户状态时会发生奇怪的事情，登录和注销也会清除用户状态并且有时会有所帮助。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-22T19:18:22.753

我仍然无法解决我的问题：S。得到是没有用的。这些代码有什么区别

```
 $mainframe  =& JFactory::getApplication();

    $filter_carryingW   = $mainframe->input->get( 'filter_carryingW', '', 'int' );
    $filter_carryingF   = $mainframe->input->get( 'filter_carryingF', '', 'int' );
    $filter_services    = $mainframe->input->get( 'filter_services', '', 'int' );
    $filter_country     = $mainframe->input->get( 'filter_country', '', 'word' );
    $filter_city        = $mainframe->input->get( 'filter_city', '', 'int' );
    $filter_town        = $mainframe->input->get( 'filter_town', '', 'int' );

    $this->setState('com_dratransport.members.filter_carryingW' , $filter_carryingW);
    $this->setState('com_dratransport.members.filter_carryingF' , $filter_carryingF);
    $this->setState('com_dratransport.members.filter_services'  , $filter_services);
    $this->setState('com_dratransport.members.filter_country'       , $filter_country);
    $this->setState('com_dratransport.members.filter_city'      , $filter_city);
    $this->setState('com_dratransport.members.filter_town'      , $filter_town);

    $f['filter_carryingW']  = $this->getState('com_dratransport.members.filter_carryingW');
    $f['filter_carryingF']  = $this->getState('com_dratransport.members.filter_carryingF');
    $f['filter_services']   = $this->getState('com_dratransport.members.filter_services');
    $f['filter_country']    = $this->getState('com_dratransport.members.filter_country');
    $f['filter_city']       = $this->getState('com_dratransport.members.filter_city');
    $f['filter_town']       = $this->getState('com_dratransport.members.filter_town'); 
```

和

```
 $f['filter_carryingW']  = $mainframe->input->get( 'filter_carryingW', '', 'int' );
    $f['filter_carryingF']  = $mainframe->input->get( 'filter_carryingF', '', 'int' );
    $f['filter_services']   = $mainframe->input->get( 'filter_services', '', 'int' );
    $f['filter_country']    = $mainframe->input->get( 'filter_country', '', 'word' );
    $f['filter_city']       = $mainframe->input->get( 'filter_city', '', 'int' );
    $f['filter_town']       = $mainframe->input->get( 'filter_town', '', 'int' ); 
```

# actionscript-3 - 我怎样才能让这些眼睛动起来？

> ID：12037867
> 
> 赞同：1
> 
> 时间：2012-08-20T12:41:57.803
> 
> 标签：actionscript-3, flash, actionscript-2

我正在使用 Flash（as2 或 3 无关紧要）。我想知道移动眼睛背后的匹配或使用默认闪光工具使眼睛移动的可能性。

**眼睛：**

![眼睛](../Images/aa4a911f4bbc70935d6358af916e7bb0.png)

我最关心的是眼睛的形状。它们不是圆形的，也不是椭圆的。我的第二个担心是学生身上的闪电。有人可以给我一个提示，我应该如何实现它？

**我的方法** 是把小学生和闪电切掉。然后使用这些公式围绕原点（眼睛中心）旋转瞳孔：

```
x = x * cos(angle) - y * sin(angle)
y = x * sin(angle) + y * cos(angle) 
```

如果眼睛是圆形的，但在这种情况下不是，那会很好用，所以我可以修改**y**公式以提供更多的椭圆旋转。

任何建议都非常感谢。谢谢你。

**结论** 根据**ezekielDFM**的建议，我使用经典补间（360 帧）使眼睛移动。它工作得很好。我为眼睛做了 4 次补间，以进行更循环的运动。然后使用 Math.atan2(diffY,diffX) 计算鼠标和眼睛之间的角度并执行 gotoAndStop(angle)。像魅力一样工作。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:47:59.333

您可以在引导路径上创建眼睛的时间线动画，该引导路径围绕眼睛边缘绕一圈移动。使动画长 360 帧，并从大约 0 度的眼睛开始。检查鼠标从眼睛中心点的角度，以获得 0 到 360 度之间的角度。最后，`gotoAndStop`从角度值的框架。

# testing - 使用 Loadrunner 11.5 测试 Android 移动应用程序会出错

> ID：12037868
> 
> 赞同：0
> 
> 时间：2012-08-20T12:42:03.757
> 
> 标签：testing, mobile, performance-testing, loadrunner, android-testing

我在 Windows 7-64 位上使用 Loadrunner 11.5 评估副本。

我正在尝试使用 Loadrunner 11.5 提供的协议选项“移动应用程序 - HTTP/HTML”来测试基于 Android 的移动应用程序（基于 Android 2.2 构建）。

我创建了一个名为“Test_1”的 AVD，目标名称：Android 2.2，平台：2.2，API 级别 8 和 CPU/ABI：ARM(armeabi)。

我正在执行以下步骤：

1.  打开 VuGen。
2.  文件 --> 新脚本和解决方案 --> 协议：移动应用程序 – HTTP/HTML
3.  录制选项：端口映射 --> 捕获级别 --> 套接字级别数据（默认只有一个选项且不可编辑）
4.  Record --> Recording Type --> Record Emulator – 使用移动设备模拟器录制脚本
5.  模拟器录制：F:\android-sdk-windows-1.5_r2\android-sdk-windows-1.5_r2\AVD_Manager.exe
6.  命令行：`-avd Test_1 -netspeed full -netdelay none`其中 Test_1 是打开 AVD 管理器时显示的“AVD 名称”。
7.  工作目录：F:\android-sdk-windows-1.5_r2\android-sdk-windows-1.5_r2
8.  记录在行动：行动
9.  结束

我在不同的时间得到 3 个不同的结果：

**结果 1：** 录制开始，我得到一个名为`Critical Error`显示的弹出窗口`Unable to determine AUT's bit capacity`（据我所知，AUT 表示“正在测试的应用程序”。）以及标题为“F:\android-sdk-windows-1.5_r2\”的命令窗口android-sdk-windows-1.5_r2\AVD_Manager.exe' 稍后我必须关闭两个弹出窗口。

**结果 2：** 录制开始，我得到一个名为`Critical Error`显示的弹出窗口`Unable to determine AUT's bit capacity`（据我所知，AUT 的意思是“正在测试的应用程序”。）以及标题为“F:\android-sdk-windows-1.5_r2\”的命令窗口android-sdk-windows-1.5_r2\AVD_Manager.exe' 然后当我在弹出窗口中按 OK 时，AVD 管理器打开。然后我选择设备名称即Test_1 并单击开始。模拟器启动，然后我可以录制。但这只发生过一次。

**结果 3：** 录制开始，我收到名为 emulator-arm.exe 的弹出窗口已停止工作。

请让我知道我哪里出错了，或者我需要输入更多信息吗？

我需要在上面的第 5 步中提供 \tools\emulator.exe 吗？

快速回复会很好，因为我的评估副本将于 2012 年 8 月 26 日到期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:28:07.670

阅读 32 位与 64 位的安装指南。此外，由于您正在进行产品评估，请联系您的 VAR 或供应商销售系统工程师。这些人负责确保您的概念证明成功，以便您继续购买。这将是您解决问题的最快途径。

如果您的所有概念证明问题都没有得到满足以继续您的购买，那么这些销售人员可以将您的许可证延长一个较短的窗口期。

# objective-c - 如何在 UITableViews 之间传递值

> ID：12037871
> 
> 赞同：2
> 
> 时间：2012-08-20T12:42:11.700
> 
> 标签：objective-c, ios5

我有 2 个带有推送样式的 UITable 视图控制器链接。第一个是静态表格视图，当我点击它时将样式设置为正确的细节。它将数据从详细信息传递到第二个 UITable 视图控制器以编辑值。一旦完成编辑。选项卡返回按钮，值将传递回第一个 UITable 视图控制器。

我在点击第一个表视图控制器时使用它

```
 NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
[myDefaults setObject:myString forKey:@"amount"];
[myDefaults synchronize]; 
```

并从第二个 UItable 视图控制器上的 (void)viewdidload 中检索它

```
NSString *recoveredString = [[NSUserDefaults standardUserDefaults] objectForKey:@"amount"]; 
```

但是当我返回第一个表格视图时它不起作用。它不会使用来自第二个表视图的新值传递来刷新。

我是否使用正确的方法在两个表视图之间传递数据？如果错了，你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:44:50.620

就个人而言，我使用通知来推送数据。我所做的是为两个 UITableViews 创建一个共享的单例类来访问。然后一个 UITableView 可以向另一个视图发送通知，告诉它从单例类中读取。不过，我总是喜欢听其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:17:48.990

您需要使用委托从视图控制器传回值，无论它们是通过导航控制器推送还是模态显示。就像是：

MyEditController.h：

```
@class MyEditController;

@protocol MyEditControllerDelegate <NSObject>

@optional
- (void)myEditController:(MyEditController *)myEditController
            updatedThing:(Thing *)thing;
- (void)myEditController:(MyEditController *)myEditController
            deletedThing:(Thing *)thing;
@end

@interface MyEditController : UITableViewController
{
    id<MyEditControllerDelegate> _delegate;
    Thing *_thing;
    ...
}

@property (assign, nonatomic, readwrite) id<MyEditControllerDelegate> delegate;
@property (retain, nonatomic, readwrite) Thing *thing;
...

@end 
```

MyEditController.m：

```
...

- (void)updateThing
{
    ...
    if ([_delegate respondsToSelector:@selector(myEditController:updatedThing:)])
    {
        [_delegate myEditController:self updatedThing:self.thing];
    }
    [self.navigationController popViewControllerAnimated:YES];
}

- (void)deleteThing
{
    ...
    if ([_delegate respondsToSelector:@selector(myEditController:deletedThing:)])
    {
        [_delegate myEditController:self deletedThing:self.thing];
    }
    [self.navigationController popViewControllerAnimated:YES];
}

...
@end 
```

现在在*父*视图控制器中你做：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     MyEditController *myEditController = [[[MyEditController alloc] initWithNibName:@"EditView" bundle:nil] autorelease];
     myEditController.delegate = self;
     myEditController.thing = [self.thingList objectAtIndex:[indexPath row]];
     [self.navigationController pushViewController:myEditController animated:YES];
}
- (void)myEditController:(MyEditController *)myEditController
            updatedThing:(Thing *)thing
{
    // Update thing in self.thingList
    // Reload table view row
}

- (void)myEditController:(MyEditController *)myEditController
            deletedThing:(Thing *)thing
{
    // Delete thing from self.thingList
    // Delete table view row
} 
```

# objective-c - UIImageView 旋转矩阵正在执行倾斜

> ID：12037873
> 
> 赞同：1
> 
> 时间：2012-08-20T12:42:19.663
> 
> 标签：objective-c, rotation, views, transformation

我有一个相当令人费解的问题。我有一个 UIImageView，我向它提供一个以弧度为单位的角度来旋转它的函数。它工作正常，但是我现在想用一个常数偏移角度。有趣的是，如果我对偏移变量对 M_PI 进行任何形式的除法或乘法运算，图像视图会倾斜而不旋转？

```
- (void)rotateDialToAngle: (CGFloat)angle {

    CGFloat offsetAngle = -0.075f * (2.0f * M_PI);
    offsetAngle += angle;

    if(offsetAngle >= M_PI * 2)
        offsetAngle -= M_PI * 2;
    if(offsetAngle < 0)
        offsetAngle += (M_PI * 2);

    self.clockDialImageView.transform = CGAffineTransformMakeRotation(offsetAngle);
} 
```

上面的代码是预期的状态。如果我用 M_PI 替换 offSetAngle 计算，它具有将旋转偏移 180 度的预期行为。如果我用 M_PI / 2 或其他任何东西替换它，我会得到倾斜行为。

if 语句用于将度数限制为不大于 360 的正度数。这些按预期工作。

注意：这是代码中唯一对图像视图进行任何形式转换的函数。

注意 2：虽然视图是倾斜的，但仍会应用旋转。

编辑：代码中的其他转换并没有解释问题是如何隔离到单行代码和对该行中的常量进行操作的。编辑：寻找其他转换 - 没有。CMPopTipView 在此控制器外部且未使用。DejalActivityView 也是如此。

![变换搜索](../Images/0abc82608fbb17bffd005bbc674d3e28.png)

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:37:09.820

好的，我发现了问题，不确定“为什么”，但解决方案是将图像视图绘制模式从“缩放到填充”更改为“中心”

我完全不知道为什么这会影响将角度偏移一个常数？ ![在此处输入图像描述](../Images/f0e75b4d29798895eb1006d27d4d35d2.png)

# c# - 字符串或二进制数据将被截断。？

> ID：12037875
> 
> 赞同：2
> 
> 时间：2012-08-20T12:42:30.803
> 
> 标签：c#, sql-server

我正在 C# Web 应用程序中构建输入表单。我可以很好地提交它，但我得到了`System.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated`错误。我知道这是一个长度问题，但我已经仔细检查了所有内容，但似乎无法在这里弄清楚。

```
{
    // Open Connection
    thisConnection.Open();

    // Create INSERT statement with named parameters
    nonqueryCommand.CommandText = "INSERT  INTO InventoryInput (Date, Item, Qty, WStatus) VALUES (@Date, @Qty, @Item, @WStatus)";

    // Add Parameters to Command Parameters collection
    nonqueryCommand.Parameters.Add("@Date", System.Data.SqlDbType.DateTime);
    nonqueryCommand.Parameters.Add("@Item", System.Data.SqlDbType.VarChar, 255);
    nonqueryCommand.Parameters.Add("@QTY", System.Data.SqlDbType.NChar, 10);
    nonqueryCommand.Parameters.Add("@WStatus", System.Data.SqlDbType.VarChar, 50);

    nonqueryCommand.Parameters["@Date"].Value = TextBox1.Text;
    nonqueryCommand.Parameters["@Item"].Value = DropDownList1.Text;
    nonqueryCommand.Parameters["@QTY"].Value = TextBox2.Text;
    nonqueryCommand.Parameters["@WStatus"].Value = DropDownList3.Text;
    nonqueryCommand.ExecuteNonQuery();

} 
```

![在此处输入图像描述](../Images/5504adab5c350558fd5948a2d2540c77.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T12:51:12.833

您混淆了您的两列：

```
(Date,  Item, Qty,   WStatus) VALUES
(@Date, @Qty, @Item, @WStatus) 
```

您正在尝试将您的`@Qty`插入列`Item`（好的）和列中（可能是错误的）。`@Item``Qty`

我也同意一些数据类型看起来仍然可疑的评论——例如非数字量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:46:40.777

确保您的输入不会太长`Substring()`：

```
nonqueryCommand.Parameters["@Date"].Value = TextBox1.Text;
nonqueryCommand.Parameters["@Item"].Value = DropDownList1.Text.Substring(0, 255);
nonqueryCommand.Parameters["@QTY"].Value = TextBox2.Text.Substring(0, 10);
nonqueryCommand.Parameters["@WStatus"].Value = DropDownList3.Text.Substring(0, 50); 
```

# cocoa-touch - 在 MOC 的 performBlock 中使用 gainPermanentIDsForObjects 会导致奇怪的错误

> ID：12037876
> 
> 赞同：0
> 
> 时间：2012-08-20T12:42:31.783
> 
> 标签：cocoa-touch, core-data

我正在使用在线程中使用 MOC 的新方法

问题是，当我使用通话时

```
[child obtainPermanentIDsForObjects:parsedItemsObjects error:&error]; 
```

获取pernament ID...

离开街区时，我得到

```
NSManagedObject Context Queue Serial
i get an EXC_BAD_ACCESS on objc_msgSend

libobjc.A.dylib`objc_msgSend:
0x34eb9f68:  teq.w  r0, #0
0x34eb9f6c:  beq    0x34eb9faa               ; objc_msgSend + 66
0x34eb9f6e:  push.w {r3, r4}
HERE 0x34eb9f72:  ldr    r4, [r0]
0x34eb9f74:  lsr.w  r9, r1, #2
0x34eb9f78:  ldr    r3, [r4, #8]
... 
```

代码

```
- (void) parse:(NSDictionary *)serviceResponseDictionary onParseFinished:(ParseFinished)onParseFinished onParseFailed:(ParseFailed)onParseFailed
{
    NSManagedObjectContext * parent = [NSManagedObjectContext MR_defaultContext]; // NSMainQueueConcurrencyType
    NSManagedObjectContext * child = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [child setParentContext:parent];

    [child performBlock:^(){

        Class parsedItemsClass = [NSNull class]; 
        NSMutableArray * parsedItemsObjectIDs;
        NSMutableArray * parsedItemsObjects;

        // processing the serviceResponseDictionary here 
        // creating / deleting / modifying Managed objects in child here

        NSError * error;
        [child save:&error];
        // handle and check error here 

        [child obtainPermanentIDsForObjects:parsedItemsObjects error:&error];
        // handle and check error here 

        // obtain pernament IDs here, if remove, it doesnt crash
        parsedItemsObjectIDs = [[NSMutableArray alloc] initWithCapacity:[parsedItemsObjects count]];

        for (NSManagedObject * mo in parsedItemsObjects) {
            [parsedItemsObjectIDs addObject:mo.objectID];
        }

        [parent performBlock:^(){

            NSError * error;
            [parent save:&error];
            // handle and check error here 

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                onParseFinished(parsedItemsClass, parsedItemsObjectIDs);
            }];
        }];
    }];
} 
```

# c - C中双精度数据类型的最大精度是多少？

> ID：12037878
> 
> 赞同：3
> 
> 时间：2012-08-20T12:42:34.453
> 
> 标签：c, floating-point, double-precision

为了比较 C 中的两个双精度类型变量，我定义了`#define EQUALITY_EPSILON = 1e-8`. 我正在做如下比较：

```
if((img_score[i] - img_score[j]) >= EQUALITY_EPSILON){
    // handle for ith score greater than jth score
}
else if((img_score[j] - img_score[i]) >= EQUALITY_EPSILON){
    // handle for ith score smaller than jth score
}
else{
    // handle for ith score equal to jth score
} 
```

我面临的问题是我的代码中的分数非常小，因此对于`EQUALITY_EPSILON = 1e-8`，在某些情况下，比较的结果是相等的。我的问题是我可以设置多小`EQUALITY_EPSILON`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T13:07:15.840

浮点数在数轴上分布不均匀。它们在 0 附近非常密集，并且随着幅度的增加，两个可表达值之间的“增量”增加：

```
 0
|      |     |    |   |  |  | ||| |  |  |   |    |     |      | 
```

这意味着，对于小数字，您需要使用较小的“epsilon”。

（**编辑：**并且您允许的错误或 epsilon 应该与您在比较的值中已经期望的错误在同一范围内。即由于产生它们的浮点运算而导致的错误。请参阅下面的评论了解原因**。/编辑**）。

您需要使用的“epsilon”类型的一个公平指示可以从以下位置[`nextafter`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/nextafter.html)获得`math.h`：

`nextafter(x, y)`返回 之后的下一个可表示值`x`，当沿着数轴在 的方向移动时`y`。

另一种方法是计算 和 之间的幅度差异`img_score[i]`，并查看它与或`img_score[j]`的幅度相比有多小。小了多少？你需要决定。`img_score[i]``img_score[j]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:44:57.750

您不应该对 epsilon 使用绝对值。选择的值应该与您正在比较的值相关。

例如，您可以将最小的（最接近于零的）除以一百万并使用其绝对值。

这是否是一个合适的选择取决于执行了哪些操作来达到这些值。它可能并不适合所有情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:08:35.043

双精度的最小绝对值是 2^{-1023}，大约是 10^{-308}。但是只有 53 位用于存储尾数（有效数字所在的部分）。如果您事先知道差异的近似值，那么您的 epsilon 几乎可以低至该差异的 2^{-53} 倍。如果您事先不知道，您可能应该将您的 epsilon 构建为差异之一的百分比。

Note that going down to 2^{-53} times the difference is the limit caused by the limited precision in the double. If the two values you are subtracting are so close to each other that you have fewer than 53 significant bits in their difference, your epsilon could only go as low as 2^{-x} times the difference, where x is the number of significant bits in the difference.

# asp.net - 从 Web 服务实例化对象

> ID：12037883
> 
> 赞同：0
> 
> 时间：2012-08-20T12:43:00.187
> 
> 标签：asp.net, vb.net

我正在尝试从 Web 服务实例化一个对象，然后调用我的方法并将当前页面的 HttpContext 传递给它。

它不允许我通过 HttpContext

为什么？谢谢

```
''''''''''''''''''service

    Imports System.Web
    Imports System.Web.Services
    Imports System.Web.Services.Protocols

    <WebService(Namespace:="http://tempuri.org/")> _
    <WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
    <Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
    Public Class WebService
         Inherits System.Web.Services.WebService

        <WebMethod()> _
        Public Sub doThis(ByVal HC As HttpContext)

            'do something

        End Sub

    End Class

''''''''''''''''''page
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim s As test2.WebService = New test2.WebService

        s.doThis(HttpContext.Current)

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:57:04.727

问题是您试图将`HttpContext`对象传递给 Web 服务代理方法，但 Web 服务代理不要求`HttpContext`对象，因此它可能会告诉您这是类型不匹配。

当您在 Web 服务调用中请求一个复杂数据类型作为参数时，或者您从 Web 服务调用返回一个复杂数据类型时，您必须记住它会将其转换为 XML 中的 SOAP 消息。当您在客户端添加对 Web 服务的引用时，它会为所有这些复杂类型创建新的自定义类。添加 Web 服务引用时，Visual Studio 会创建所谓的代理类。它们是与 Web 服务的公共接口相匹配的类。但是，每个新的 Web 服务引用都会创建一组全新的代理类，它们是完全独立的数据类型。这些代理类的名称与原始类型相同，但它们被放置在以 Web 服务引用名称命名的单独命名空间中。

因此，在客户端，它并不是它真正`HttpContext`请求的对象。实际上，它要求具有与类相同属性的自定义类型`HttpContext`。因此，您需要创建一个正确类型的新对象，然后将属性从一个对象复制到另一个对象，或者您需要更改 Web 服务请求的类型。例如：

```
Dim s As test2.WebService = New test2.WebService
Dim r As test2.HttpContext = New test2.HttpContext
' Populate r's properties with the values from HttpContext.Current
s.doThis(r) 
```

# image - 从角色创建图像

> ID：12037888
> 
> 赞同：0
> 
> 时间：2012-08-20T12:43:06.847
> 
> 标签：image, fonts, windows-8, microsoft-metro

我正在为我的`Metro`应用程序使用标准样式。这些样式中的大多数都包含一个`Image`并且我想使用`Segoe UI Symbol`s 作为这些图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:33:25.790

您可以在使用 Segoe UI 符号作为字体的任何文本内容中插入“字符”。如果我想要一个 TextBlock 中的收藏夹星，它看起来像这样......

```
<TextBox x:Name="textBox" HorizontalAlignment="Left" Margin="372,375,0,0" TextWrapping="Wrap" Text="&#xE113;" VerticalAlignment="Top" FontFamily="Segoe UI Symbol"/> 
```

如果我想制作一个具有相同“字符”的按钮，我会这样做......

```
<Button x:Name="button" Content="&#xE113;" HorizontalAlignment="Left" Margin="372,181,0,0" VerticalAlignment="Top" Click="button_Click" FontFamily="Segoe UI Symbol" FontSize="24"  Height="79" Width="128"/> 
```

如果我希望按钮采用圆形 AppBar 按钮样式，我会像这样添加样式资源......

```
<Button x:Name="button" Content="&#xE113;" HorizontalAlignment="Left" Margin="372,181,0,0" VerticalAlignment="Top" Click="button_Click" FontFamily="Segoe UI Symbol" FontSize="24" Style="{StaticResource AppBarButtonStyle}" Height="79" Width="128"/> 
```

如果您使用 HTML，则使用相同类型的方法。只要确保你的风格是正确的......

```
<span class="pagetitle">&#xE113;</span> 
```

# python - 使用 Tornado 从 facebook 向 mongoDB 写入信息

> ID：12037890
> 
> 赞同：0
> 
> 时间：2012-08-20T12:43:11.417
> 
> 标签：python, facebook, mongodb, tornado

我正在使用“龙卷风简介”一书中提供的代码使用龙卷风访问 Facebook，并且我想将某些信息写入 monogDB。所以我在另一个像这样的模块中创建了一个围绕 Mongodb 的包装器

```
class MongoDB:

    def __init__(self,dbname):
        self._conn = pymongo.Connection("localhost", 27017)
        self._db   = self._conn[dbname]

    def createCollection(self, name=""):
        return self._db[name]

    def insertRecord(self,collection,document):
        self._collection.insert(document) 
```

我正在尝试将用户名、访问令牌和用户 ID 写入数据库。我已将代码添加到 loginhandler 类，如下所示：

```
class LoginHandler(tornado.web.RequestHandler, tornado.auth.FacebookGraphMixin):
@tornado.web.asynchronous
def get(self):
    userID = self.get_secure_cookie('user_id')
    if self.get_argument('code', None):
        self.get_authenticated_user(
            redirect_uri='http://localhost:8000/fb/auth/login',
            client_id=self.settings['facebook_api_key'],
            client_secret=self.settings['facebook_secret'],
            code=self.get_argument('code'),
            callback=self.async_callback(self._on_facebook_login))
        return
    elif self.get_secure_cookie('access_token'):
        self.redirect('/fb')

    self.authorize_redirect(
        redirect_uri='http://localhost:8000/fb/auth/login',
        client_id=self.settings['facebook_api_key'],
        extra_params={'scope': 'read_stream,publish_stream'}
    )

def _on_facebook_login(self, user):
    if not user:
        self.clear_all_cookies()
        raise tornado.web.HTTPError(500, 'Facebook authentication failed')

    self.set_secure_cookie('user_id', str(user['id']))
    self.set_secure_cookie('user_name', str(user['name']))
    self.set_secure_cookie('access_token', str(user['access_token']))
    self.redirect('/fb')

    database = MongoDB('UserDatabase')
    CredentialCollection = database.createCollection("UserCredential")
    Credential = {"UserID": str(user['user_id']), "Username": str(user['Username']) ,"access_token": str(user['access_token']), "date": datetime.datetime.utcnow()}
    CredentialCollection.insert(Credential) 
```

我收到错误：

```
line 85, in LoginHandler
Credential = {"UserID": self.str(user['user_id']), "Username": str(user['Username']) ,"access_token": str(user['access_token']), "date": datetime.datetime.utcnow()}
NameError: name 'self' is not defined 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:57:04.377

错误是`{"UserID": self.str(user['user_id'])`，但它与您的代码不同。只需重新启动您的龙卷风服务器。

# tomcat - 如何以编程方式查找tomcat当前线程繁忙

> ID：12037891
> 
> 赞同：2
> 
> 时间：2012-08-20T12:43:23.543
> 
> 标签：tomcat, tomcat6

我可以在 Tomcat 下看到这个详细信息：//hostname:port/manager/status

最大线程数：150 最小备用线程数：25 最大备用线程数：75 当前线程数：25 当前线程繁忙：4

现在我的问题是我需要使用我的代码找到**当前线程繁忙计数。**因为当这个计数达到 200 时我需要通知用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:10:08.923

您可以使用 JMX 执行此操作。`jconsole`首先，使用并在“Catalina”树下探查连接到您自己的 Tomcat 进程。每个`<Executor>`（或`<Connector>`在旧版本的 Tomcat 中）都有一个 JMX bean，它公开其当前状态，包括活动/备用/最大线程数。

或者，您可以只查看管理器 webapp 的源代码以了解它是如何工作的：这是开源软件的精彩功能之一。

# tridion - 我如何在 UGC 条件语句中编写大于条件

> ID：12037892
> 
> 赞同：8
> 
> 时间：2012-08-20T12:43:28.867
> 
> 标签：tridion, tridion-2011, ugc

我在我的代码中使用 ugc 条件语句，equals 条件工作正常，但是如何使用其他条件运算符，如 ">" "<" 和 "Not Equals"。

```
<%
HttpContext.Current.Items["CommentCount"] = 0;
%>

<ugc:Choose runat="server">
  <ugc:When test="ugcItemStats.numberOfComments > CommentCount" runat="server">
         HTML1
  </ugc:When>
  <ugc:Otherwise runat="server">
         HTML2
  </ugc:Otherwise>
</ugc:Choose> 
```

应该使用什么运算符，如果 numberofComments 大于 0，我尝试过这种方式，也尝试过“notequals”而不是“>”，但它不起作用。

请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:23:58.677

Tridion ug:when 仅适用于“equal”和“==”，如果您想使用其他运算符，则必须为此创建其他客户控件。

我已经创建了，我希望它可以与 "==,>=",<=,>,<,!=" 运算符一起使用。

它在我的项目中工作。

```
using System;
using System.ComponentModel;
using System.Globalization;
using System.Reflection;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.UI;

namespace Tridion.ContentDelivery.UGC.Web.UI
{
    [DefaultProperty("Test"), ToolboxData("<{0}:WhenCond runat=server></{0}:WhenCond>"), ParseChildren(ChildrenAsProperties = false)]
    public class WhenCond : BaseUGCServerControl
    {
        private string test;
        private static Regex pattern = new Regex(@"\.");
        protected virtual bool Condition()
        {
            if (this.test == null)
            {
                return false;
            }
            string[] sep = new string[] { "==", "<", ">", "<=", ">=" ,"!="};
            string[] testArray = test.Split(sep, StringSplitOptions.None);
            if (testArray.Length == 2)
            {
                object value1 = EvaluateVariable(testArray[0].Trim(), HttpContext.Current);
                object value2 = EvaluateVariable(testArray[1].Trim(), HttpContext.Current);
                if (value1 != null && value2 != null)
                {
                    if (isNumeric(value1.ToString(), NumberStyles.Number) && isNumeric(value2.ToString(), NumberStyles.Number))
                    {
                        return NumericCondition(double.Parse(value1.ToString()), double.Parse(value2.ToString()), GetSepartor());
                    }
                    else
                    {
                        return AlphaNumericCondition(value1.ToString(), value2.ToString(), GetSepartor());
                    }
                }
                else
                {
                    return false;
                }
            }
            return false;
        }

        public static object EvaluateVariable(string varProperty, HttpContext usedContext)
        {
            if (!string.IsNullOrEmpty(varProperty))
            {
                string[] strArray = pattern.Split(varProperty);
                if (!string.IsNullOrEmpty(strArray[0]))
                {
                    object obj2 = usedContext.Items[strArray[0]];
                    if (obj2 != null)
                    {
                        object obj3 = obj2;
                        for (int i = 1; i < strArray.Length; i++)
                        {
                            if (obj3 != null)
                            {
                                string str = strArray[i];
                                if (!string.IsNullOrEmpty(str))
                                {
                                    string str2 = str.Substring(0, 1);
                                    string str3 = str.Substring(1);
                                    string name = str2.ToUpper() + str3;
                                    PropertyInfo property = obj3.GetType().GetProperty(name);
                                    if (property != null)
                                    {
                                        obj3 = property.GetValue(obj3, null);
                                    }
                                }
                            }
                        }
                        return obj3;
                    }
                }
            }
            return null;
        }

        public bool isNumeric(string val, System.Globalization.NumberStyles NumberStyle)
        {
            Double result;
            return Double.TryParse(val, NumberStyle, System.Globalization.CultureInfo.CurrentCulture, out result);
        }

        private string GetSepartor()
        {
            string sept = string.Empty;
            sept = this.test.Contains("==") ? "==" : string.Empty;
            sept = string.IsNullOrEmpty(sept) ?(this.test.Contains(">") ? ">" : string.Empty):sept;
            sept = string.IsNullOrEmpty(sept) ? (this.test.Contains("<") ? "<" : string.Empty) : sept;
            sept = string.IsNullOrEmpty(sept) ?(this.test.Contains(">=") ? ">=" : string.Empty):sept;
            sept = string.IsNullOrEmpty(sept) ?(this.test.Contains("<=") ? "<=" : string.Empty):sept;
            sept = string.IsNullOrEmpty(sept) ? (this.test.Contains("!=") ? "!=" : string.Empty) : sept;
            return sept;
        }

        private bool NumericCondition(double value1, double value2, string sept)
        {
            bool returnFlag = false;
            switch (sept)
            {
                case "==":
                    returnFlag = (value1 == value2);
                    break;
                case ">":
                    returnFlag = (value1 > value2);
                    break;
                case "<":
                    returnFlag = (value1 < value2);
                    break;
                case ">=":
                    returnFlag = (value1 >= value2);
                    break;
                case "<=":
                    returnFlag = (value1 <= value2);
                    break;
                case "!=":
                    returnFlag = (value1 != value2);
                    break;
            }
            return returnFlag;
        }

        private bool AlphaNumericCondition(string value1, string value2, string sept)
        {
            bool returnFlag = false;
            switch (sept)
            {
                case "==":
                    returnFlag = (value1.CompareTo(value2) == 0);
                    break;
                case "!=":
                    returnFlag = (!value1.Equals(value2));
                    break;
                case ">":
                    returnFlag = (value1.CompareTo(value2) > 0);
                    break;
                case "<":
                    returnFlag = (value1.CompareTo(value2) < 0);
                    break;
            }
            return returnFlag;
        }

        protected override void Render(HtmlTextWriter writer)
        {
            if ((HttpContext.Current != null) && (HttpContext.Current.Application != null))
            {
                Control parent = this.Parent;
                if (!(parent is Choose))
                {
                    throw new InvalidOperationException("WhenCond control must have a Tridion Web UI Choose server control as parent!!!");
                }
                Choose choose = (Choose)parent;
                if (!choose.AlreadyMatchedCondition() && this.Condition())
                {
                    choose.MatchedCondition();
                    this.RenderChildren(writer);
                }
            }
        }

        [Category("Appearance"), DefaultValue(""), Bindable(true)]
        public string Test
        {
            get
            {
                return this.test;
            }
            set
            {
                this.test = value;
            }
        }
    }
} 
```

在 aspx 页面中的实现

```
<%@ Register assembly="Tridion.Custom.Web.UI" namespace="Tridion.ContentDelivery.UGC.Web.UI" tagprefix="cc1" %>

<ugc:Choose runat="server">
  <cc1:WhenCond test="ugcItemStats.numberOfComments > CommentCount" runat="server">
         HTML1
  </cc1:WhenCond>
  <ugc:Otherwise runat="server">
         HTML2
  </ugc:Otherwise>
</ugc:Choose> 
```

如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T14:22:31.520

据我所知，`When`条件仅支持两个条件`==`和`equals`。因此，您可能必须使用这些来解决您的测试条件（两者相同）。

有人可以验证或确认以上是真的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:46:11.923

您是否尝试过使用>？这通常可以解决类似的问题，例如 XPath。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T08:36:46.213

抱歉，*When*标签目前仅支持“==”或“equals”。

# javascript - 简单的浏览器内时间线

> ID：12037897
> 
> 赞同：6
> 
> 时间：2012-08-20T12:44:01.923
> 
> 标签：javascript, visualization, timeline

我想为游戏服务器制作一个工具，该工具将读取连接/断开连接日志并以视觉上吸引人的方式呈现它们。我正在寻找的效果类似于这个模型（请原谅'程序员艺术'）

这是我的图像：

![在此处输入图像描述](../Images/22ceeba1775c331adb1a7bb9fc2f247d.png)

彩色条显示用户连接到服务器的时间。

[DHX 时间线视图](http://www.dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml)是我最接近浏览器内解决方案的可行解决方案。Simile、Mashi、Verite 和其他一些对于我想要的东西来说似乎有点太复杂了。

有没有可以做我需要的脚本？有没有人有这种事情的经验？建一个会更好吗？如果是这样，怎么做？（我完全愿意学习）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T13:30:13.493

[时间线](http://almende.github.com/chap-links-library/timeline.html)似乎非常接近我想要的。

[这](http://almende.github.com/chap-links-library/js/timeline/examples/example15_mobile.html)是一个似乎满足我要求的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:47:46.050

查看[Timeline Portfolio](http://tutorialzine.com/2012/04/timeline-portfolio/) - 它是跨浏览器，附带教程，并且很容易集成到站点中。

哦，它也[很漂亮](http://demo.tutorialzine.com/2012/04/timeline-portfolio/)。

# button - 将按钮添加到 sencha Ext.tree.Panel

> ID：12037904
> 
> 赞同：1
> 
> 时间：2012-08-20T12:44:27.000
> 
> 标签：button, extjs, render, treepanel

**情况：**

我的视图有一个`tabpanel`带有 2 个容器的`treePanel`. 中的某些行`treePanel`必须包含按钮。

要将按钮添加到`treeGrid`我使用的`render()`：

例子：

```
var feedbackButtons =  new Array("Ok", "Cancel");
var buttonText = '';
line.set(gridView.m_columnIds[i], '<div id="test" ></div>');

line.commit();

for (var nr in feedbackButtons) {
    Ext.create('Ext.Button',
    {
        text: feedbackButtons[nr],
        lineId: lineId,
        gridView: gridView,
        style: {
            display: 'inline-block',
            marginRight: '3px',
            backgroundColor: '#743'
        },
        handler: gridView._onButtonClicked
    }).render(document.body, 'test');
} 
```

**问题：**

将一行添加到非活动状态（未显示）`treePanel`会产生一个高度为 0px 的按钮。

截图：http: [//img23.imageshack.us/img23/3492/sencha.png](http://img23.imageshack.us/img23/3492/sencha.png)

**当前解决方法：**

目前我正在使用 css 来修复它：

```
Ext.util.CSS.createStyleSheet('button { height: 16px!important; } \n', null); 
```

有没有人解决这个问题。

我认为这是一个错误！

# python - python：如何在不更改参数的情况下调用函数？

> ID：12037908
> 
> 赞同：1
> 
> 时间：2012-08-20T12:44:46.413
> 
> 标签：python, class, function, arguments

如果我有一个功能：

```
def foo(self, a, b):
    c = a + b
    return c 
```

如何在不更改函数中的 c 的情况下调用 foo？所以假设我在另一个函数中调用 foo ：

```
def bar(self):
    z = self.foo(2, 4)
    return (z) 
```

然后我想在一个单独的函数中再次调用 foo ，但我想要从调用 'bar' 时开始的 c 。

```
def baz(self):
    self.foo(?, ?) # trying to just get c, without any changes. 
```

基本上，我试图在课堂上保留一个帐户，以便其他班级可以访问同一个帐户；只是一个简单的平衡，加减钱。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:50:02.530

存储`c`为类变量或全局变量并覆盖函数以返回旧值。

例如

```
class SomeClass:
     def foo(self, a=None, b=None):
        if a and b:
            c = a + b
            self.stored_c = c
            return c
        return self.stored_c 
```

注意：您必须处理何时更新`stored_c`和任何并发问题。

更新：WRT *glglgl*的评论，针对方法重载进行了更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T12:51:16.327

`c`是函数本地的，而不是静态的。这意味着每次函数*退出*时，`c`都会收集垃圾。为什么不直接存储`c`第一次计算的值？这似乎是显而易见的答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T17:36:48.797

我已经接受了 Rohan 提供的答案并提出了以下内容。它似乎有效，尽管可能有更好/首选的方法来实现这一点。

以下代码允许我跨多个类和方法跟踪帐户余额。

```
import os

class Foo():
    def __init__(self):
        self.stored_end = 0

    def account(self, a, b):
        c = float(a) + b
        print a
        print b
        print c
        self.stored_end = c
        print self.stored_end

    def testy(self, q, v):
        print "\n"
        print " _ " * 10
        z = float(q) + v
        print self.stored_end   
        self.stored_end = self.stored_end + z
        print " _ " * 10
        print self.stored_end

class Bar():
    def __init__(self):
        pass

    def zippy(self, a, b):
        print " _ " * 10
        print "this is zippy"
        foo.testy(a, b)

class Baz():
    def __init__(self):
        pass

    def cracky(self, g, m):
        y = g + m
        print " _ " * 10
        print "calling stored_end"
        foo.stored_end = foo.stored_end + y
        print " _ " * 10
        print "this is cracky"
        print "y = %r" % y
        print foo.stored_end    

os.system("clear")      
foo = Foo()
foo.account(5, 11)
foo.testy(100, 100)
bar = Bar()
bar.zippy(10, 100)
baz = Baz()
baz.cracky(1000, 1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T12:58:55.403

您需要有一些构造来保存最后的结果。例如，你可以对函数做一些包装

```
def keep_result(func):
    from functools import wraps
    @wraps(func)
    def wrapper(*a, **k):
        res = func(*a, **k)
        wrapper.last_result = res
        return res
    wrapper.func = func # makes it easy to bypass
    return wrapper 
```

这就是所谓的“装饰器功能”。

现在如果你这样做

```
@keep_result
def foo(self, a, b)
    c = a + b
    return c 
```

函数`foo`（它本身，而不是它的结果！）被用作一个参数，为`keep_result()`它创建一个`wrapper()`调用原始函数的新函数，将它的结果保存到一个属性中并返回结果。这个新函数将代替原来的函数返回`foo()`。

所以你可以说

```
normal_result = foo(whatever) 
```

然后做

```
saved_result = foo.last_result 
```

你得到同样的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T12:50:33.880

为什么不将结果存储在 中`self`，并有可选参数来查看它是否应该用于任何计算？

就像是：

```
def foo(self, *args):
    if args:
        self.c = 0
        for value in args:
            self.c += value

    # In case `self.c` is not set yet, then use default of `0`
    return getattr(self, 'c', 0) 
```

现在，如果您`foo`使用参数调用，它将添加所有参数并存储它。如果不带参数调用，它将返回最后存储的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T12:57:06.490

看起来你想要的东西是一个缓存的属性。您可以制作一个装饰器实现描述符，将其作为将来使用的通用事物：

```
def cachedproperty(f):
    """Cached property.

    Calculated once - serves forever.
    """

    def get(self):
        try:
            return self._properties[f]
        except AttributeError:
            self._properties = {}
            self._properties[f] = f(self)
            x = self._properties[f]
            return x
        except KeyError:
            x = self._properties[f] = f(self)
            return x

    return property(get) 
```

让我们看一下这个例子：

```
 class X(object):
     x = 0

     def __init__(self, x):
         self.x = x

     @cachedproperty
     def y(self):
         return self.x + 6 
```

这里有一些测试。

```
 >>> ob = X(5)
 >>> ob.y
 11
 >>> ob.x = 10
 >>> ob.y
 11 
```

# php - PHP SimpleXMLElement 从 url 解析 xml

> ID：12037916
> 
> 赞同：0
> 
> 时间：2012-08-20T12:45:00.660
> 
> 标签：php, xml, url, simplexml

我正在尝试使用 SimpleXMLElement 从 URL 解析 XML 文件。当我尝试：

```
$url = 'http://dl.dropbox.com/u/27440550/test.xml';
$xml = new SimpleXMLElement($url, 0, true, "", false); 
```

一切正常，我可以访问 XML 文档并对其进行解析。请注意，该 url 是我存储 xml 文件的保管箱公用文件夹的链接。

当我尝试直接从 url 获取文件时：

```
$url = 'https://multidoc.eia-fr.ch/record/1220/export/xd';
$xml = new SimpleXMLElement($url, 0, true, "", false); 
```

我收到奇怪的错误：

```
Warning: SimpleXMLElement::__construct() [<a href='simplexmlelement.--construct'>simplexmlelement.--construct</a>]: Entity: line 1: parser error : Start tag expected, '&lt;' not found in C:\wamp\www\metamin\getxml.php on line 5

Warning: SimpleXMLElement::__construct() [<a href='simplexmlelement.--construct'>simplexmlelement.--construct</a>]: https://multidoc.eia-fr.ch/record/1220/export/xd in C:\wamp\www\metamin\getxml.php on line 5

Warning: SimpleXMLElement::__construct() [<a href='simplexmlelement.--construct'>simplexmlelement.--construct</a>]: ^ in C:\wamp\www\metamin\getxml.php on line 5

Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML' in C:\wamp\www\metamin\getxml.php on line 5

Exception: String could not be parsed as XML in C:\wamp\www\metamin\getxml.php on line 5 
```

所以我认为它没有将其识别为 XML 文件，但为什么呢？我不是在做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:42:49.770

> 可能是因为 SSL 加密 - 请注意 URL 中的 https，尽管我不确定。

感谢**杰夫**

# php - 如何在 fb 评论社交插件的网页上整合现有的 fb 专辑评论？

> ID：12037918
> 
> 赞同：1
> 
> 时间：2012-08-20T12:45:08.227
> 
> 标签：php, facebook, facebook-graph-api

我想知道是否可以将现有的 facebook 评论（来自我的一个 facebook 专辑）集成到我的 facebook 评论社交插件中的网站（对于该特定专辑），拥有所有必要的访问权限并知道 facebook 专辑 ID。

我的意思是，我不知道 fb:comments 的 href 应该是什么？！

```
 <fb:comments href="what should this one be?"  migrated="1"></fb:comments> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:51:30.680

无法通过评论插件合并数组，但是您可以通过图形 api 请求两个数组并使用 php 或 javascript 合并它们，然后按日期对它们进行排序以提供自然流程。

参考：插件评论[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

参考：专辑评论[http://developers.facebook.com/docs/reference/api/album/](http://developers.facebook.com/docs/reference/api/album/) #connections

参考：数组合并[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# youtube - 如何获取 youtube 用户/频道缩略图？

> ID：12037920
> 
> 赞同：2
> 
> 时间：2012-08-20T12:45:16.290
> 
> 标签：youtube

通过以下请求获取 YouTube 视频的缩略图：

> [http://img.youtube.com/vi/](http://img.youtube.com/vi/) '.$youtube_v_code.'/1.jpg

如何获取 YouTube 用户或频道的缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:06:10.973

您需要使用[gdata](https://developers.google.com/gdata/docs/client-libraries)从 google 访问 api，我认为这是最简单的方法。

# c# - “关键字'WHERE'附近的语法不正确”异常

> ID：12037922
> 
> 赞同：-4
> 
> 时间：2012-08-20T12:45:21.890
> 
> 标签：c#, sql, sql-server

```
 SqlCommand cmd1 = new SqlCommand("INSERT INTO Userinformation(Access)
          VALUES("+nameAccess.Text+") WHERE User_ID='"+userIdaccess.Text+"'",con);
  SqlDataReader dr = cmd1.ExecuteReader();
  if (dr.Read())
  {
    MessageBox.Show("User Access Blocked");
  }
  dr.Close(); 
```

它给出了一个例外，如下所示：

> “关键字'WHERE'附近的语法不正确”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:47:35.540

使用参数化查询来避免 SQL 注入，并确保正确编码查询并将`IDisposable`资源包装在[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)中以避免泄漏非托管句柄。此外，INSERT SQL 语句没有`WHERE`子句：

```
using (SqlCommand cmd1 = new SqlCommand("INSERT INTO Userinformation(Access) VALUES(@NameAccess)", con))
{
    cmd1.Parameters.AddWithValue("@NameAccess", nameAccess.Text);

    using (SqlDataReader dr = cmd1.ExecuteReader())
    {
        if (dr.Read())
        {
            MessageBox.Show("User Access Blocked");
        }
    }
} 
```

每次您`+`在构建 SQL 查询时使用运算符时，您都**做错了**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:51:23.793

你做不到`INSERT .. VALUES... WHERE`，这就是原因。这是无效的语法。

插入语法：http: [//msdn.microsoft.com/en-us/library/ms174335.aspx](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:51:55.557

INSERT INTO 没有 WHERE 子句。您可以执行 UPDATE... WHERE 您的子句，也可以将用户信息和用户 ID 作为新行插入。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-20T13:01:22.540

试试这个代码：

```
SqlCommand cmd1 = new SqlCommand("INSERT INTO Userinformation(Access)
                                   VALUES('"+nameAccess.Text+"')",con);
SqlDataReader dr = cmd1.ExecuteReader();
if (dr.Read())
{
   MessageBox.Show("User Access Blocked");
}
dr.Close(); 
```

插入查询没有`where clause`

# sql-server - URL 排序规则

> ID：12037926
> 
> 赞同：2
> 
> 时间：2012-08-20T12:45:32.560
> 
> 标签：sql-server, sql-server-2008-r2, collation

警告：我对数据库排序规则知之甚少，如果有任何明显的问题，请提前道歉......

我们有一个包含 url 的数据库列。我们想在这个列上放置一个唯一的约束/索引。

我注意到在默认的 db collat​​ion 下`Latin1_General_CI_AS`，此列中存在欺骗，因为（例如）url`http://1.2.3.4:5678/someResource`和`http://1.2.3.4:5678/SomeResource`被认为是相等的。通常情况并非如此……此 url 指向的服务器类型**区分**大小写。

对于这样的列，最合适的排序规则是什么？显然区分大小写是必须的，但是`Latin1_General`？是网址`Latin1_General`吗？我不关心字典顺序，但唯一索引/分组的相等性很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:13:27.137

排序规则中的字母`CI`表示不区分大小写。

对于将是拉丁字符和符号的一小部分的 URL，然后尝试`Latin1_General_CS_AI`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:14:21.300

您可以[更改表](http://msdn.microsoft.com/en-us/library/ms190920.aspx)以为此列设置*CS*（区分大小写）排序规则：

```
ALTER TABLE dbo.MyTable 
       ALTER COLUMN URLColumn varchar(max) COLLATE Latin1_General_CS_AS 
```

您还可以在 SQL 语句中指定排序规则：

```
SELECT * FROM dbo.MyTable
          WHERE UrlColumn like '%AbC%' COLLATE Latin1_General_CS_AS 
```

这里有一篇[短文](http://www.abstraction.net/ViewArticle.aspx?articleID=72)供参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:19:54.850

Latin1_General 使用代码页 1252 ( [1](http://en.wikipedia.org/wiki/Windows-1252) )，并且 URL 允许的字符包含在该代码页 ( [2](http://en.wikipedia.org/wiki/Uniform_resource_locator#List_of_allowed_URL_characters) ) 中，因此您可以说 URL 是 Latin1_General。

您只需选择区分大小写的选项`Latin1_General_CS_AS`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T13:46:39.973

[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)说：

> ABNF 表示法将其终端值定义为基于 US-ASCII 编码字符集 [ASCII] 的非负整数（代码点）。

维基百科说允许的字符是：

```
Unreserved
May be encoded but it is not necessary
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
a b c d e f g h i j k l m n o p q r s t u v w x y z
0 1 2 3 4 5 6 7 8 9 - _ . ~

Reserved
Have to be encoded sometimes
! * ' ( ) ; : @ & = + $ , / ? % # [ ] 
```

在比较操作中，它们似乎不是这个字符之间的冲突。此外，您可以使用[HASHBYTES](http://msdn.microsoft.com/en-us/library/ms174415.aspx)函数进行此比较。

但这种操作并不是主要问题。主要问题是，`http://domain:80` 并且 `http://domain`可能是相同的。同样对于编码字符，url 可能与编码字符不同。

在我看来，RDBMS 会将这种结构合并为新的数据类型：url、电话号码、电子邮件地址、mac 地址、密码、纬度、经度……。我认为整理可以帮助但不会解决这个问题。

# python - 从 itertools.cycle 中提取一个列表

> ID：12037927
> 
> 赞同：6
> 
> 时间：2012-08-20T12:45:33.257
> 
> 标签：python, python-2.7, itertools

我有一个包含`itertools.cycle`我希望能够复制的实例的类。一种方法（我能想到的唯一一种方法）是提取初始迭代（它是一个列表），并存储循环所在的位置。

不幸的是，我无法获得用于创建循环实例的列表，似乎也没有明显的方法可以做到这一点：

```
import itertools
c = itertools.cycle([1, 2, 3])
print dir(c)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', 
 '__hash__', '__init__', '__iter__', '__new__', '__reduce__', 
 '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', 
 '__subclasshook__', 'next'] 
```

我可以提出一些合理的理由，为什么对于某些类型的输入迭代不允许这样做，但是对于元组甚至可能是列表（可变性可能是那里的问题），我不明白为什么它不会是可能的。

任何人都知道**是否**`itertools.cycle`可以从实例中提取非无限迭代。如果没有，有人知道*为什么*这个想法是坏的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T18:53:11.070

不可能。如果您查看`itertools.cycle`代码，您会发现它没有存储序列的副本。它只创建一个迭代器并将迭代器中包含的值存储在一个新创建的列表中：

```
static PyObject *
cycle_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
{
    PyObject *it;
    PyObject *iterable;
    PyObject *saved;
    cycleobject *lz;

    if (type == &cycle_type && !_PyArg_NoKeywords("cycle()", kwds))
        return NULL;

    if (!PyArg_UnpackTuple(args, "cycle", 1, 1, &iterable))
        return NULL;
    /* NOTE: they do not store the *sequence*, only the iterator */
    /* Get iterator. */
    it = PyObject_GetIter(iterable);
    if (it == NULL)
        return NULL;

    saved = PyList_New(0);
    if (saved == NULL) {
        Py_DECREF(it);
        return NULL;
    }

    /* create cycleobject structure */
    lz = (cycleobject *)type->tp_alloc(type, 0);
    if (lz == NULL) {
        Py_DECREF(it);
        Py_DECREF(saved);
        return NULL;
    }
    lz->it = it;
    lz->saved = saved;
    lz->firstpass = 0;

    return (PyObject *)lz;
} 
```

这意味着在执行以下操作时：

```
itertools.cycle([1,2,3]) 
```

您创建的列表只有 1 个引用，该引用保存在循环使用的迭代器中。当迭代器耗尽时，迭代器被删除并创建一个新的迭代器：

```
 /* taken from the "cycle.next" implementation */
    it = PyObject_GetIter(lz->saved);
    if (it == NULL)
        return NULL;
    tmp = lz->it;
    lz->it = it;
    lz->firstpass = 1;
    Py_DECREF(tmp);   /* destroys the old iterator */ 
```

这意味着在执行一个循环后，列表将被销毁。

无论如何，如果您需要访问此列表，只需在调用之前在某处引用它即可`itertools.cycle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:18:47.543

如果您有办法知道所产生的对象的某些属性，`cycle`那么您可以推断出内部列表。例如，如果您知道循环中的所有对象都是不同的，并且`cycle`除了您之外没有其他对象正在从迭代器中读取，那么您可以简单地等待您看到的第一个对象再次出现（使用`is`not进行测试`==`）以终止内部列表。

但是如果没有这些知识，就无法保证，并且在某些情况下，您选择猜测周期是什么的任何方法都会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:11:18.220

好的，所以我接受了@Bakuriu 的回答，因为它在技术上是正确的。无法复制/腌制 itertools.cycle 对象。

我已经实现了 itertools.cycle 的一个子类，它**是可**腌制的（带有一些额外的花里胡哨的引导）。

```
import itertools

class FiniteCycle(itertools.cycle):
    """
    Cycles the given finite iterable indefinitely. 
    Subclasses ``itertools.cycle`` and adds pickle support.
    """
    def __init__(self, finite_iterable):
        self._index = 0
        self._iterable = tuple(finite_iterable)
        self._iterable_len = len(self._iterable)
        itertools.cycle.__init__(self, self._iterable)

    @property
    def index(self):
        return self._index

    @index.setter
    def index(self, index):
        """
        Sets the current index into the iterable. 
        Keeps the underlying cycle in sync.

        Negative indexing supported (will be converted to a positive index).
        """
        index = int(index)
        if index < 0:
            index = self._iterable_len + index
            if index < 0:
                raise ValueError('Negative index is larger than the iterable length.')

        if index > self._iterable_len - 1:
            raise IndexError('Index is too high for the iterable. Tried %s, iterable '
                             'length %s.' % (index, self._iterable_len))

        # calculate the positive number of times the iterable will need to be moved
        # forward to get to the desired index
        delta = (index + self._iterable_len - self.index) % (self._iterable_len)

        # move the finite cycle on ``delta`` times.
        for _ in xrange(delta):
            self.next()

    def next(self):
        self._index += 1
        if self._index >= self._iterable_len:
            self._index = 0
        return itertools.cycle.next(self)

    def peek(self):
        """
        Return the next value in the cycle without moving the iterable forward.
        """
        return self._iterable[self.index]

    def __reduce__(self):
        return (FiniteCycle, (self._iterable, ), {'index': self.index})

    def __setstate__(self, state):
        self.index = state.pop('index') 
```

一些示例用法：

```
c = FiniteCycle([1, 2, 3])

c.index = -1
print c.next() # prints 3

print [c.next() for _ in xrange(4)] # prints [1, 2, 3, 1]

print c.peek() # prints 2
print c.next() # prints 2

import pickle
import cStringIO
serialised_cycle = pickle.dumps(c)

del c

c = pickle.loads(serialised_cycle)

print c.next() # prints 3
print c.next() # prints 1 
```

欢迎反馈。

谢谢，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-12T23:34:21.710

根据您的使用方式`cycle`，您甚至可以像这样简单地使用自定义类包装器：

```
class SmartCycle:
    def __init__(self, x):
        self.cycle = cycle(x)
        self.to_list = x

    def __next__(self):
        return next(self.cycle) 
```

例如

```
> a = SmartCycle([1, 2, 3])
> for _ in range(4):
>     print(next(a))
1
2
3
1

> a.to_list
[1, 2, 3] 
```

# macos - 在 QHBoxLayout 中按基线垂直对齐组件

> ID：12037929
> 
> 赞同：3
> 
> 时间：2012-08-20T12:45:36.143
> 
> 标签：macos, qt, qt-designer

我正在使用 Qt Designer在*QFormLayout*和*QHBoxLayout*容器内使用*QLabel*、*QLineEdit*和*QComboBox*控件来布置表单。我需要做什么才能使控件按其文本的基线垂直对齐？

 **在 Max OS X 上预览对话框时，不同的控件不会按照它们的基线对齐。以下示例使用*QHBoxLayout*，但*QFormLayout 也会*发生同样的情况：

![Max OS X 上的示例](../Images/6ef469f3ea0e8f80c036769ca7ef4772.png)

请注意下划线如何不在同一垂直位置上。

我正在寻找一种适用于所有小部件组合的解决方案，其中基线调整适用，并且根据样式、平台、小部件组合、小部件大小和字体设置自动完成调整。*可以与CSS*相媲美的东西`vertical-align: baseline;`。

**更新**

我已经在 Windows XP 上进行了相同的测试，并且还应用[了 RA.s 关于](https://stackoverflow.com/a/12041094/402281)使用样式表的建议。但这似乎并没有改变控件或其文本的任何位置。

![Windows XP 上的示例](../Images/3f6cb78b3994364c46daad1c04aa6d40.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:00:12.613

如果我正确理解您的问题，您需要更改 QLabels 的垂直对齐方式。在 Qt Designer 中，您可以通过单击`QLabel`，然后调整标签的`alignment`属性来完成此操作。在这种情况下，我相信将垂直对齐更改为`AlignBottom`可能会解决您的问题。如果这不起作用，标签还具有`margin`您可以调整的属性。

**更新**

考虑为您的应用程序使用[Qt 的样式表](http://qt-project.org/doc/qt-4.8/stylesheet.html)。以下样式表在我可以测试的平台上实现了预期的结果（不幸的是，不包括 OS X）：

```
QLabel, QComboBox, QLineEdit
{
   background-position: bottom;
} 
```**

# facebook - 网站活动提要显示默认 facebook 缩略图而不是 og:image

> ID：12037932
> 
> 赞同：0
> 
> 时间：2012-08-20T12:45:46.037
> 
> 标签：facebook, facebook-graph-api, thumbnails, meta-tags

正如标题所示，我无法在我的网站活动源中获取正确的缩略图。当用户喜欢一篇文章时，活动提要可以正常工作并显示喜欢的文章。但是它总是显示默认的 facebook 缩略图。

![在此处输入图像描述](../Images/d86d19445b0c5a60f155afc0f2362d15.png)

我使用了 facebook 调试器，它没有显示任何错误或警告，它*确实*显示了正确的 og:image。

* * *

# 我试过什么

我试过喜欢我通过 FB 调试器拉出的页面，看看硬刷新是否可以解决问题，但它没有。
我尝试使用文章类型 og:article 指定文章，希望我能解决问题，但这也不起作用。
我已经通读了 facebook 文档，当您正在寻找不按计划进行的内容时，我发现它非常缺乏，我在这里没有找到与活动提要缩略图相关的任何内容。

我认为问题可能在于 facebook 他们的图像缓存，但我不完全确定。我读到真的没有办法硬刷新+我必须为网站上的每个页面/文章都这样做，这是不合逻辑的。

希望你们中的一些人也遇到过同样的问题，并且可以为我指明正确的方向。干杯

**编辑**
这是我的元标记（以及 smarty 模板引擎）

```
<meta property="og:url" content="http://{$smarty.server.HTTP_HOST}{$smarty.server.REDIRECT_URL}">
<meta property="og:title" content="{$facebook_like_title|default:'*website name*'}">
{if $facebook_like_description|trim != ":"}
<meta property="og:description" content="{$facebook_like_description|default:'*Default like description*'}">
{else}
<meta property="og:description" content="*Default like description*">
{/if}
<meta property="og:image" content="http://{$smarty.server.HTTP_HOST}/img/logo.png">
{if $article}
<meta property="og:type" content="article">
<meta property="article:author" content="123456789"> 
<meta property="article:author" content="123456789">
{else}
<meta property="og:type" content="website">
{/if}
<meta property="og:site_name" content="website.com" />
<meta property="fb:app_id" content="****************" /> 
```

FB 活动提要：

```
<div style="background-color: #fff; overflow: hidden; width: 220px; height: 300px; margin-bottom: 20px;">
        <div class="fb-activity" data-site="website.com" data-app-id="*******************" data-width="220" data-height="300" data-header="true" data-border-color="#2F5480" data-font="arial" data-recommendations="false"></div>
</div> 
```

点赞按钮：

```
<div class="fb-like" data-href="http://{$smarty.server.HTTP_HOST}/{$news->readonUrl}" data-send="false" data-width="400" data-show-faces="false"></div> 
```

**编辑 2**
这是来自活动源的屏幕截图：
![在此处输入图像描述](../Images/20e1819fd4fc83b4d007173ac611e4d9.png)
我删除了第一个用户个人资料图片（隐私和所有内容），但它显示正确。第二个用户有一个默认的个人资料图片。

现在我想要的是那些“填充故事”具有正确的缩略图（指定为 og:image）而不是默认缩略图。

这是一个示例链接，FB 在喜欢时应该抓取（在这种情况下是第一个填充故事）：
[http](http://sportflock.com/food/voedingsschemas)
://sportflock.com/food/voedingsschemas FB lint：http:
[//developers.facebook.com/tools/debug/og /object?q=http%3A%2F%2Fsportflock.com%2Ffood%2Fvoedingsschemas](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fsportflock.com%2Ffood%2Fvoedingsschemas)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:02:20.700

您没有提供您看到的活动源的屏幕截图。但是，我认为当活动提要没有足够的真实用户真实故事可供展示时，您在示例中看到的只是填充故事。

此屏幕截图有 3 个填充故事：

![带有填充故事的活动提要](../Images/de88149b0e023e7aea258c8bb5bccb5b.png)

请注意，示例中的活动源（在 FB 文档中）对于每个查看者来说看起来都不同。例如，当有很多活动时（或者当查看者有很多朋友在网站上进行操作时），活动提要中的每个故事旁边都会有一个真实的人。

在这一点上，我认为这是需要的：展示问题的活动提要的屏幕截图，以及 FB 抓取的故事中的链接/网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:04:56.477

问题最终自己解决了。一定是facebook缓存什么的。在几个月没有检查这个问题之后，我来检查它是否有任何变化。突然间，在我没有任何帮助的情况下，所有缩略图都正确显示了。

# c# - 将 MPG 文件转换为帧

> ID：12037933
> 
> 赞同：0
> 
> 时间：2012-08-20T12:45:55.210
> 
> 标签：c#

我需要使用 C# 将视频（如果可能，MPG）转换为帧。

有没有什么快速的方法，使用 C# 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:56:23.747

您可以使用这些库，这非常有趣

[http://www.ffmpeg.org/](http://www.ffmpeg.org/)

[http://ffmpegdotnet.codeplex.com/](http://ffmpegdotnet.codeplex.com/)

# php - 带有 app.php 的 Symfony 错误 500，在 app_dev.php 上运行良好

> ID：12037938
> 
> 赞同：5
> 
> 时间：2012-08-20T12:46:13.437
> 
> 标签：php, symfony1

我目前正在尝试通过访问 app.php 来使用我们的（基本）Symfony 2 应用程序。但是，每当我尝试访问 app.php 时，都会收到错误 500。我检查了日志，生产日志为空。我已经尝试了配置文件中的资产条目，但无济于事。还有其他人对如何解决这个问题有任何想法吗？

这是一个非常基本的应用程序（目前），只有一些路由更改和一个新控制器。大部分是html（作为测试），所以不可能是我们目前写的php。

--edit：我目前*没有*指向 /web 目录的 documentroot，但我没有服务器上的管理员权限。但是，因为该应用程序在 app_dev.php 中运行，所以我不明白这可能是个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T11:56:15.683

该问题也可能是由于将**web/app.php**文件中的一个变量的状态从`false`更改为`true`.

检查线：

```
$kernel = new AppKernel('prod', false); 
```

并更改为：

```
$kernel = new AppKernel('prod', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T12:53:25.380

我有同样的问题，但设置为true：

```
$kernel = new AppKernel('prod', true); 
```

我设法得到一个可读的错误消息。就我而言，mysql-table 存在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T14:50:18.260

我通过从我的 .yml 配置文件中删除一个选项卡并联系服务器管理员将 directoryroot 设置为 /web 来修复它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T12:57:42.277

可能有点晚了，但我今天遇到了同样的错误，帮助清除缓存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-18T11:34:07.780

我今天遇到了这个问题，通过AppKernel启用调试模式仍然没有显示错误。原来我已经启用（就在`ApcClassLoader`初始化之前），但在我部署到的新环境中尚未启用 APC。再次评论该位以解决该问题。`app.php``AppKernel``APCClassLoader``app.php`

# nhibernate - 流利的nhibernate 1.3（Nhibernate 3.3）中具有抽象基类的每个混凝土表

> ID：12037940
> 
> 赞同：0
> 
> 时间：2012-08-20T12:46:26.160
> 
> 标签：nhibernate, fluent-nhibernate

我刚刚从 fluent nhibernate 1.1（使用 nhibernate 3.1）升级到 FluentNhibernate 1.3（使用 Nhibernate 3.3）。

我有一个继承树，其中基类是抽象的：

```
public abstract class Student {
string Firstname;
string Lastname;
}
public class DayStudent : Student {}
public class NightStudent : Student {}

public class School {
 List<Student> Students;
} 
```

在 Nhibernate 3.1 中，我有一个学生表（包含名字和姓氏列）和另外 2 个用于 DayStudent 和 NightStudent 的表。这是我以前拥有的每场音乐会的桌子。现在在 Nhibernate 3.3 中，当我访问 School 类的 Student 集合时，它会抛出异常“无法实例化抽象类或接口”。我的映射以前在 nhibernate 3.1 中运行良好。

这个版本有什么变化？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:44:02.393

有点晚了，抱歉，但这让我想起了我遇到的一个问题——如果你真的使用*List<...>*来收集列表，那么你的问题可能就在那里。我似乎记得您必须将 IList<...> 用于持久实体中的列表集合。您仍然可以将 List 的实例分配给学生，您只需声明 IList<> 类型的属性。希望这可以帮助。

# c++ - 指向类成员函数的指针

> ID：12037945
> 
> 赞同：2
> 
> 时间：2012-08-20T12:46:34.857
> 
> 标签：c++, class, function, pointers, member

比方说，我有两节课

```
class A
{
  public:
    void foo( /* ............. */ );
};

class B
{
   public:
      void bar();
}; 
```

我想知道，是否甚至可以将`foo`方法指针传递给`bar`方法，将其`A`存储`bar`在`A`. 我应该说，那`A`不会知道，是哪个班级`bar`的成员！

如果您向我展示语法或一些链接，而不是对该主题的复杂描述，我将不胜感激。

**描述** 我正在`observer`为 C++ 设计一个模式。我想订阅`B`一些事件`A`。例如，这段代码应该在一个实例中`B`

```
 // pseudo code    
   A* observable = new A();
   observable->addEventListener ( 'eventTitle' , functionName ); 
```

当`eventTitle`发生`A`调用`functionName`时`B`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:53:01.677

除非`bar`被声明`static`为`B`. 您应该考虑到您需要一个实例`B`才能调用任何非静态方法。

（查看[关于指向成员函数的 C++ 常见问题解答章节以](http://www.parashift.com/c++-faq/pointers-to-members.html)获得更深入的解释。）

**更新**：如果你想实现一个观察者模式，你可以声明一个接口（纯抽象类），比如说`Observer`，它`A`知道并使用指向成员函数的指针将你的事件映射到相应的`Observer`方法。

例子：

```
 A observable;
   observable.addEventListener ( 'eventTitle' , &B::functionName );
   B observer;
   observable.registerObserver(&observer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:55:50.720

如何在不了解它`A`的情况下使用成员函数？`B`要调用它，您需要一个对象，该对象必须是 o 类型`B`（或子类型），因此`A`必须具备此知识。

如果您创建`bar()`一个静态函数，您可以使用常规函数指针 ( `void (*)()`) 或`std::function<void ()>`(`boost::function`对于较旧的 C++) - 我强烈推荐后者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T13:05:06.657

有几种方法可以调用指向成员函数的指针，隐藏它的来源：

*   使用 std::function 和 std::bind：

    ```
    class B {    
        double Sqrt(int what) { return std::sqrt((double)what); }
    };   

    // in A:
    std::tr1::function<double (int)> fn; 
    fn = std::tr1::bind(&B::Sqrt, &operations, std::tr1::placeholders::_1);
    fn(3.1415); 
    ```

*   使用仿函数，它将指向成员函数的指针和要在其上调用的对象一起包装。（不过，这有点复杂，原则上只是 std::function 的一个子集）。

*   从抽象接口 IFn 派生 B 并将 B 作为 IFn 引用传递给 Foo。Foo 将知道要调用什么 - 接口的虚拟 Do() 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T12:57:48.033

使用类似的东西：

```
class A
{
public:
  void foo( /* ............. */ );
  void SetObs(CObs *pObs)
  {
    m_pObs = pObs;
  }

private:
  CObs *m_pObs;
};

class B : public class CObs
{
public:
  virtual void bar();
};

class CObs
{
public:
  virtual void bar() = 0;
}; 
```

并且每当您需要 bar() 函数时调用 m_pObs->bar()。还从 CObs 派生所有像 B 这样的 slasses 并覆盖函数 bar()。

# php - 处理表单时的 url 格式

> ID：12037949
> 
> 赞同：0
> 
> 时间：2012-08-20T12:47:04.710
> 
> 标签：php, html, forms, url

所以我为一个表单（搜索表单）编写了这段代码，它看起来像这样：

```
<form action="" method="get">
<select >
<option value="name">Client Name:</option>
<option value="email">Client Email:</option>
<option value="tnx_id">Transaction ID:</option>
<option value="amount">Amount:</option>
</select>
<input type="text" name="svalue" placeholder="Search"></input>
<input type="image" name="submit" src="img/search_btn.png"></input>
</form> 
```

当用户单击搜索时，我希望 url 以这种方式格式化：

```
http://localhost/pp/index.php?search&name=haha 
```

但相反，我得到：

```
http://localhost/pp/index.php?search=name&svalue=haha&submit.x=0&submit.y=0 
```

我只是在正确格式化 url 时遇到了困难，因为其余的代码都很好，我也无法`&submit.x=0&submit.y=0`在 url 的末尾摆脱它。你们有什么想法吗？基本上我想要的 url 格式获取选定的选项（名称、电子邮件、tnx_id、数量）并将 svalue 的值分配给它。

非常感谢您的帮助，在此先感谢您，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:48:55.713

这就是表格的工作方式。每个控件在提交的数据中给出一个名称=值对。

你可以用 JavaScript 破解它，但这变得很脆弱。为`<select>`元素命名并更改服务器端脚本，以便将两条数据作为单独的数据。

> 我也无法摆脱`&submit.x=0&submit.y=0`网址末尾的那个

从图像映射中删除`name`属性，这样它就不会是成功的控制。

```
<input type="image" src="img/search_btn.png"> 
```

* * *

您应该进行的其他改进：

*   `<input>`是一个空元素。它不应该有结束标签。如果您正在编写 XHTML，请使用空元素语法。
*   `placeholder`不应该[被用作替代品`<label>`](http://www.pardot.com/help/faqs/best-practices/placeholders-and-labels)
*   向图像映射添加 alt 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:51:30.297

使用 JavaScript 创建 URL。如果您使用 jQuery：

```
var url = 'http://localhost/pp/index.php?search&'
        + encodeURIComponent($('#id-of-your-select-element').val())
        + '='
        + encodeURIComponent($('#id-of-your-svalue-element').val()); 
```

**编辑：**至于摆脱`submit.x`and `submit.y`，请参阅@Quentin 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:40:46.593

在您的 php 代码中，您可以添加以下内容：-

```
if(isset($_GET['name']))
{
$searchString="&cs=".$_GET['name'];
} 
```

然后使用这个：

```
http://localhost/pp/index.php?".$searchString."/ 
```

我认为这将帮助您获得正确的东西。如果你想使用分页，我有一个代码给你，我以前用过，效果很好。试一次！

# php - 快速结账时向 PayPal 退款

> ID：12037958
> 
> 赞同：2
> 
> 时间：2012-08-20T12:47:38.443
> 
> 标签：php, api, paypal, express-checkout

我正在使用 PayPal Express checkout api 在我的网站上销售我的商品。在我的网站上，我保证如果用户对商品有任何问题，我将退款。所以我想知道是否有任何退款脚本？多久后我可以退钱？退款有时间限制吗？还有 Paypal 是否会收取任何退款费用？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:04:31.867

[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)找到有关快速结帐退款的示例代码

如果退款最长为 60 天，PayPal 不会收取退款。

AFAIK 如果您希望在 60 天以上退款，您必须将钱作为新交易汇款。因此 PayPal 将收取佣金。

# php - 在 php 中运行 javascript

> ID：12037959
> 
> 赞同：1
> 
> 时间：2012-08-20T12:47:38.030
> 
> 标签：php, javascript, html

我有这个我想在 php 中运行的 javascript，下面的代码应该以表单形式提交，然后打印它但是当提交时 javascript 不执行，输出很简单

```
var text = document.getElementById(\'course1\').options[document.getElementById(\'course1\').selectedIndex].text; document.write(text); 
```

这就是全部，

```
 echo "<form name\"find\" action=\"postEnrolled.php\" method=\"get\" class=\"required\" onsubmit=\"return validate(this);\">";
            echo "<table width=\"225\" border=\"0\" align=\"center\" >";
            echo "<tr>";
            echo "<td width=\"181\"><label>Course#1:</label> <select name=\"dep1\" style=\"width:190px\" class=\"dep1\">";
            echo "<option selected=\"selected\" value=\"\">Select Department</option>";

            include('db.php');
            $sql=mysql_query("select id,data from data where weight='1'");
            while($row=mysql_fetch_array($sql))
            {
                $id = $row['id'];
                $data = $row['data'];
                echo '<option value="'.$id.'">'.$data.'</option>';
            } 

            echo "</select><br/></td>";
            echo "<td width=\"267\">";

            echo "<label>&nbsp;</label><select name=\"course1\" class=\"course1\" style=\"width:200px\">";
            echo "<option selected=\"selected\" value=\"\">Select Course</option>";

            echo "</select>";

            echo "<input type=\"hidden\" name=\"course_1\" value=\"

            <script language='javascript' > 

                    var text = document.getElementById('course1').options[document.getElementById('course1').selectedIndex].text;
                    document.write(text);

            </script> 
```

我错过了什么吗？我真正想要的是提交选项中的文本，而不是选项的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T12:49:51.377

1.  `getElementById`只会找到 id 为 course_1 的元素，而不是名称。

2.  不要将脚本元素放在输入元素中

3.  调用时必须准备好 DOM ( `use document.onload=function(){...yourcodehere...};`)

乍一看，这个问题并没有真正涉及 PHP。但是您是否知道，当您更改选项的值时，代码不会被执行？如果这是您需要的，请使用`onchange="yourcodehere;"`. 但由于它是一个隐藏的领域，也许你应该描述你真正想要实现的目标。

编辑 ：

如果您想要的是在用户选择另一个选项时更改隐藏的输入，那么您可以这样做：

```
 <input type=hidden name=course_1 id=course_1>
 <select onchange="document.getElementById('course_1').value=this.options[this.selectedIndex].text;" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:50:35.143

您的问题是您将`<script>`标签放在标签的`value`属性内`<input>`。这不是有效的 HTML 或 JavaScript，并且不会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:08:11.087

why you don't post what is the actual error you got? actually this approach (including the javascript code into php tags) is not good at all.if you want to use javascript on any page, you just have to put it on the very top of your page under the script tags. try it, will help u ..!

# ms-access - MS Access Treeview 错误加载 ActiveX 控件

> ID：12037965
> 
> 赞同：0
> 
> 时间：2012-08-20T12:48:07.250
> 
> 标签：ms-access, activex, vba

> **可能重复：**
> [在 win sec-update 后 MS-access 未捕获树视图事件](https://stackoverflow.com/questions/11984274/ms-access-doesnt-catch-treeview-events-after-win-sec-update)

最近，我的访问表单中的 Treeview 元素出现错误。

> 您作为事件属性设置输入的表达式 Expand 产生了以下错误：在您的一个窗体或报表上加载 ActiveX 控件时出错。

当我单击“确定”（唯一机会）时，会出现下一个错误（扩展被 MouseMove、MouseDown/Up、DblClick 等取代），当我按下键时，会出现 KeyDown/Up/Press 消息等。当我与 TreeView 交互时然后将“展开”替换为例如 NodeClick 或 Collapse。每条消息只出现一次，当我执行每个可能的事件时，没有消息弹出 - 但是树视图不起作用，它不会打开任何表单（树视图用作菜单）。

对我来说神秘的是 - 上周那些 Access 数据库都运行良好 - 我们为每个客户（前端和数据一起）都有一个数据库，现在突然每个数据库都“崩溃”了。我假设 ActiveX Treeview 控件被 Windows 更新或类似的东西改变了，但旧的 WinXP 笔记本电脑也会抛出相同的错误消息。即使是一个 2 周没有打开的数据库，并且在那时肯定可以工作，也不再工作了。所以从我的角度来看，代码中不可能有任何错误。

尽管如此，我还是尝试在 Form_Load 事件中设置断点，但是在执行 OnLoad 的第一行之前已经弹出了 Expand Error。OnLoad 事件是唯一指定的事件（GUI 显示“事件过程”​​，仅其 VBA 代码），所有其他字段为空白（且未指定代码）。我为例如 MouseMove 创建了一个空白 VBA，但错误仍然出现。

这个错误是什么，它来自哪里？希望任何人都可以提供帮助。

问候，

马蒂亚斯

PS： [我的树视图项目](http://mymsaccessblog.blogspot.nl/2008/09/my-teeview-project-episode-5-using.html) 通过此链接，您可以在 MS Access 中找到树视图项目的文件（在第一个答案中提到）。当我下载这些文件时，会出现相同类型的错误。所以它肯定与 activeX 控件有关，对吧？是否有人在这些文件中工作，如果有，为什么？希望有人能帮忙。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:41:49.563

我遇到了同样的问题-treeview 上周在 2007 年或 2010 年 Access 中工作，而不是今天在多台 PC 上工作。问题是 Windows 更新。（参见链接[http://support.microsoft.com/kb/2687441](http://support.microsoft.com/kb/2687441)）。我按照 kb 文章中的说明创建并运行了批处理文件，我的 Treeview 现在可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:34:36.460

我得到了同样的错误。我在以下链接中找到了解决方案：http: [//mymsaccessblog.blogspot.nl/2008/09/my-teeview-project-episode-5-using.html](http://mymsaccessblog.blogspot.nl/2008/09/my-teeview-project-episode-5-using.html)

我添加了下面列出的以下子项，并使用我使用的密钥对其进行了调整，并且它起作用了。我希望这对你也有帮助。如果格式不好，请见谅。我第一次发布任何东西

私有子 xProductTreeview_Click()

Dim nodSelected As MSComctlLib.Node ' 当前选定节点的变量

```
Set nodSelected = Me.xProductTreeview.SelectedItem ' get the currently selected node

If nodSelected.Key Like "Prod=*" Then ' are we on a product node
ElseIf nodSelected.Key Like "Cat=*" Then ' are we on a category node
Else ' somehow this is neither a category or product node
End If 
```

结束子

# magento - Magento：在主页上显示新产品

> ID：12037967
> 
> 赞同：3
> 
> 时间：2012-08-20T12:48:25.557
> 
> 标签：magento

我正在做我的第一个 Magento 项目。我想在首页展示新产品

我已经研究并添加了这段代码

```
{{block type="catalog/product_new" column_count="6" products_count="3" name="home.catalog.product.new" alias="product_homepage" template="catalog/product/new.phtml"}} 
```

它一直有效，直到我将一个类别的产品添加到同一个主页。代码是

```
{{block type="catalog/product_list" category_id="8" template="catalog/product/bestlist.phtml"}} 
```

现在它显示类别中的产品，但不显示新产品。我已禁用缓存并刷新了所有现有缓存。
我已经尝试并检查了很多方法，但无法弄清楚。

有人可以帮我解决这个问题吗？

PS：我使用的是最新版本的 magento 1.7.X

在此先感谢，
基兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T02:52:11.650

首先，进入“CMS”>“页面”>选择“主页”（URL Key：主页）。单击“设计”将以下 XML 更新粘贴到提供的字段中：

```
<reference name="content">
<block type="catalog/product_new" name="home.catalog.product.new" alias="product_new" template="catalog/product/new.phtml" after="cms_page">
<action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
<action method="setColumnCount"><columns>4</columns></action>
<action method="setProductsCount"><count>4</count></action> 
</block>
</reference> 
```

如果您想增加/减少每列的产品数量，请更改

```
<action method="setColumnCount"><columns>4</columns></action> 
```

到

```
 <action method="setColumnCount"><columns>6</columns></action> 
```

此外，如果您想限制显示的产品数量，请更改

```
<action method="setProductsCount"><count>4</count></action> 
```

到

```
<action method="setProductsCount"><count>3</count></action> 
```

请注意：对于要在主页上显示的产品，您必须确保您已通过在“常规”选项卡中设置“将产品设置为自日期的新产品”和“将产品设置为最新的产品”选项将产品标记为新产品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T17:27:45.423

首先，进入“CMS”>“页面”>选择“主页”（URL Key：主页）。点击“内容”粘贴以下代码

```
{{widget type="catalog/product_widget_new" display_type="new_products" show_pager="1" products_per_page="50" products_count="50" template="catalog/product/widget/new/content/new_grid.phtml"}} 
```

它为我工作；我们也可以在单页上设置产品限制。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-20T12:55:38.207

您使用的代码仅用于类别。如果你想在你的磁存储中添加一个新模块，比如新产品，你必须从[http://www.magentocommerce.com/magento-connect/搜索一个 Magento 扩展](http://www.magentocommerce.com/magento-connect/)

# ruby-on-rails - neo4j-will_paginate gem 导致 rails 无法启动

> ID：12037973
> 
> 赞同：0
> 
> 时间：2012-08-20T12:48:43.727
> 
> 标签：ruby-on-rails, neo4j, jrubyonrails

我正在尝试使用 neo4j-will_paginate gem 在我的 Rails 应用程序中实现分页（我使用 neo4j 作为我的数据库。）我按照[https://github.com/dnagir/neo4j-will_paginate#readme](https://github.com/dnagir/neo4j-will_paginate#readme)上的说明进行操作。在我的 gemfile 中添加了 neo4j-will_paginate，并在我的 config/application.rb 文件中添加了“neo4j-will_paginate”。我运行了 bundle install 并试图启动 Rails，但我得到了这个错误：

```
NameError: uninitialized constant Neo4j::Traversal
  const_missing at org/jruby/RubyModule.java:2642
         (root) at /Users/--------/.rvm/gems/jruby-1.6.7/gems/neo4j-will_paginate-0.1.0/lib/neo4j-will_paginate.rb:43
        require at org/jruby/RubyKernel.java:1042
         (root) at /Users/--------/.rvm/gems/jruby-1.6.7/gems/neo4j-will_paginate-0.1.0/lib/neo4j-will_paginate.rb:12
        require at org/jruby/RubyKernel.java:1042
         (root) at /Users/--------/Documents/code/ThreeRing/threering/config/application.rb:53
            tap at org/jruby/RubyKernel.java:1787
         (root) at /Users/--------/.rvm/gems/jruby-1.6.7/gems/railties-3.2.3/lib/rails/commands.rb:50
        require at org/jruby/RubyKernel.java:1042
         (root) at script/rails:6 
```

这是我的 Gemfile 和我的 config/application.rb 的相关部分

```
require File.expand_path('../boot', __FILE__)

# Pick the frameworks you want:
# require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
require "rails/test_unit/railtie"
require "neo4j"
# require "will_paginate/railtie"
require 'neo4j-will_paginate' 
```

这是宝石文件

```
source 'http://rubygems.org'

gem 'rails', '3.2.3'
gem 'neo4j', '~> 2.0.0'
gem 'jruby-openssl', '~> 0.7.7'
gem 'json', '~> 1.7.3'
gem 'jquery-rails', ' ~> 2.0.2'
gem 'haml-rails', '~> 0.3.4'
gem 'bcrypt-ruby', '~> 3.0.1', :require => 'bcrypt'
# gem 'will_paginate', ' ~> 3.0.3'
gem 'neo4j-will_paginate'
gem 'carrierwave', '~> 0.6.2'
gem 'fog', '~> 1.3.1'
gem 'mini_magick', '~> 3.4'
gem 'trinidad', '~> 1.3.5', :require => nil
gem 'nokogiri'
gem 'libxml-jruby'
gem 'sanitize'

group :development do
  gem 'rspec-rails', '~> 2.10.0'
  gem 'guard-rspec', '~> 1.0.0'
end

group :test do
  gem 'factory_girl_rails', '~> 3.3.0'
  gem 'spork', ' ~> 1.0rc'
  gem 'rb-fsevent', '~> 0.9.1'

end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.0'
  gem 'therubyrhino', '~> 1.73.4'
  gem 'uglifier', '>= 1.0.3'
end 
```

谷歌搜索错误没有任何帮助，我还没有看到任何类似的问题，其解决方案适用于此。关于这里出了什么问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:44:37.447

这是因为 neo4j-will-paginate 的版本 < 0.1.2 不能与 neo4j.rb 版本 2+ 尝试今天发布的 0.1.2 版本。

# c - 可以在循环内使用“#pragma omp parallel for”吗？

> ID：12037974
> 
> 赞同：1
> 
> 时间：2012-08-20T12:48:47.413
> 
> 标签：c, loops, parallel-processing, openmp

“#pragma omp parallel for”能否以下列形式在循环内使用：

```
For (i=0;i<...;.i+=1) 
  { #pragma omp parallel for
      for(j=0;j<...;j+=1) 
       { Some code.....} 
```

*   这会在 'j' 上并行化循环吗？

感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:52:13.903

是的，可以这样使用。但是编译器指令必须单独一行

```
for( ... )
{
    #pragma omp parallel for
    for( ...
//.. 
```

此外，这确实只会并行执行内部循环。如果您需要两个循环并行执行，`#pragma omp parallel for`则需要在外循环上方有一秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:00:44.367

它可以像你说的那样使用，但如果我是你并且想要避免每次迭代时分叉/加入，这不是一件好事，我会这样做：

```
#pragma omp parallel for
for(j loop)
{
   for(i loop)
   {
        //Modify your code if necessary.
   }
} 
```

在上面的代码片段中，如果您的最大线程数为 10 并且您的 j 长度为 100，那么将有 10 个线程，每个线程将运行 10 次 j 迭代。

# android - TabWidget onClick after onSaveInstanceState (java.lang.IllegalStateException: Can't perform this action after onSaveInstanceState)

> ID：12037976
> 
> 赞同：15
> 
> 时间：2012-08-20T12:48:54.060
> 
> 标签：android, tabs, fragment

我在片段兼容性包示例之后创建了一个片段选项卡小部件，我在其中更改了片段，`onTabChanged`但我有一些市场报告`IllegalStateException`在之后发现`onSaveInstanceState`，这是由于在调用后向片段管理器请求提交引起的`onSaveInstanceState()`，但是我如何才能收到一个 performClick`onSaveInstanceState`之后叫？

堆栈跟踪：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1314)
at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1325)
at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:532)
at my.app.NewsTab.onTabChanged(NewsTab.java:144)
at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:378)
at android.widget.TabHost.setCurrentTab(TabHost.java:363)
at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:149)
at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:559)
at android.view.View.performClick(View.java:3122)
at android.view.View$PerformClick.run(View.java:12012)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4126)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
at dalvik.system.NativeStart.main(Native Method) 
```

看起来这是以某种方式讨论的（通过搜索错误），但对我来说这只是一个副作用，一个支持错误？我还阅读了有关蜂窝 + 的不同应用程序生命周期的信息，但是在保存实例后执行单击对我来说看起来是不现实的行为

我应该使用`commitAllowingStateLoss()`还是 `mTabHost.setOnClickListener(null)`in `onSaveInstanceState`？

不幸的是我无法重现，我只在开发者控制台上看到罕见的报告

活动有`android:configChanges="orientation|screenLayout"`

我也用“总是完成”测试了生命周期

选项卡片段切换器位于 ViewPager 内，但我怀疑是否相关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-25T08:36:54.317

这似乎是 Android 从 4.4 版到 5 版的错误。有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/27585441/8568479)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-20T23:06:15.373

问题是您在调用'方法`FragmentTransaction`后尝试提交 a 。[**由于本博**](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)文中描述的原因，这是不允许的。`Activity``onSaveInstanceState()`[](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-16T13:34:26.447

`onSaveInstanceState()`在 Activity 从前台消失后调用。保存状态后你不能做任何事情。如果可以，请与我们分享您的代码以进行检查。`onSaveInstanceState()`您必须在调用方法之前进行更改。**

# unix - -bash终端错误设置heroku

> ID：12037983
> 
> 赞同：0
> 
> 时间：2012-08-20T12:49:17.867
> 
> 标签：unix, heroku, terminal

尝试根据[此](https://toolbelt.heroku.com/osx)入门指南设置 Heroku，但我遇到了`no such file or directory`. 是什么导致了这种情况？我对这个`-bash`错误的经验是它可能是错误的空格或字符，或者显然没有文件，但我错过了什么？

这是设置中的控制台错误：

```
localhost:local cf$ heroku login
Enter your Heroku credentials.
Email: heroku@mydomain.org
Password (typing will be hidden): 
Found existing public key: /Users/cf/.ssh/id_rsa.pub
Uploading SSH public key /Users/cf/.ssh/id_rsa.pub... done
Enter your Heroku credentials.
Email: heroku@mydomain.org
Password (typing will be hidden): 
Authentication successful.
localhost:local cf$ cd ~/myapp
-bash: cd: /Users/cf/myapp: No such file or directory 
```

帮助指南显示

```
Could not find an existing public key.
Would you like to generate one? [Yn]
Generating new SSH public key.
Uploading ssh public key /Users/adam/.ssh/id_rsa.pub 
```

而我已经有一个 SSH 密钥：

```
Found existing public key: /Users/cf/.ssh/id_rsa.pub
Uploading SSH public key /Users/cf/.ssh/id_rsa.pub... done 
```

这是需要调查的事情吗？我也尝试过在终端的不同实例中，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:57:03.143

您应该创建一个名为`myapp`. 前：

```
localhost:local cf$ cd ~/myapp 
```

写：

```
localhost:local cf$ mkdir ~/myapp
localhost:local cf$ cd ~/myapp 
```

这不是 Heroku 的问题。您需要最少的 Unix 熟悉度...... 开心点！

该`~`符号表示“您的主目录”。

# javascript - 如何覆盖 Backbone 的解析函数？

> ID：12037984
> 
> 赞同：0
> 
> 时间：2012-08-20T12:49:23.647
> 
> 标签：javascript, backbone.js

我尝试在我的项目中使用主干。但是我在尝试覆盖 Backbone 的解析方法时遇到了问题。服务器发回的数据比我想要的多。例如：我想要的是：

```
[{
   id: "123",
   name: "david"
},{
   id: "456",
   name: "kevin"
}] 
```

但服务器的结果是：

```
{
 total: 1000,
 items:[{
   id: "123",
   name: "david"
},{
   id: "456",
   name: "kevin"
}]
} 
```

所以我想在 parse 方法中处理结果并只返回数组。我怎样才能做到这一点？当我尝试时，我得到了错误。我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T12:51:43.217

在您的主干模型中，按照您希望的方式定义解析函数：

```
Model = Backbone.Model.extend({
    parse: function () {
        return {
            id: this.get("id"),
            name: this.get("name")
        }
    }
}); 
```

但是，最好在模型初始化程序中处理和设置数据，如下所示：

```
Model = Backbone.Model.extend({
    initialize: function (attrs) {
        try {
            //TODO HERE: test for correct values and throw errors

            // set object variables here
            this.set({
                name: attrs.name,
                id: attrs.id
            });

        } catch (e) {
            console.log(e);
        }
    }
}); 
```

现在不需要覆盖解析函数。这样你就知道你的模型正在处理的数据是好的，你可以设置它包含的变量。这避免了来自无效数据的许多错误。

数组中的每一项都应该是一个子模型，这就是我上面写的。您的父模型应如下所示：

```
Model = Backbone.Model.extend({
    initialize: function (items) {
        this.subModels = [];
        items.forEach(function (item) {
            this.subModels.push( new SubModel(item) )
        });
    }
}); 
```

或者作为一个集合：

```
Collection = Backbone.Collection.extend({
    model: ItemModel,
}); 
```

您将向其传递 response.items

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T14:22:21.493

来自[Backbone Parse 文档](http://backbonejs.org/#Collection-parse)

```
Collection = Backbone.Collection.extend({
    model: YourModel,
    parse: function(response){
        return response.items;
    }
}); 
```

# c# - AutoMapper AssertConfigurationIsValid 是否足以确保良好的映射？

> ID：12037986
> 
> 赞同：26
> 
> 时间：2012-08-20T12:49:28.940
> 
> 标签：c#, unit-testing, automapper

我想问你一个关于 AutoMapper 的问题。我们正在像这样对我们的映射进行单元测试：

```
var dtoFiltrePersonne = new DtoFiltrePersonne { Prop1 = "Test", Prop2 = 1234 };
Mapper.CreateMap<FiltrePersonne, DtoFiltrePersonne>();
var filtrePersonne = DtoAutoMappeur<DtoFiltrePersonne, FiltrePersonne>.Instance.MapFromDtoToEntity(dtoFiltrePersonne);
Assert.AreEqual(dtoFiltrePersonne.Prop1, filtrePersonne.Prop1);
Assert.AreEqual(dtoFiltrePersonne.Prop2, filtrePersonne.Prop2); 
```

我想知道这个单元测试是否提供相同的覆盖率？

```
Mapper.CreateMap<FiltrePersonne, DtoFiltrePersonne>();
AutoMapper.AssertConfigurationIsValid() 
```

我查看了[AutoMapper 配置文档](https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation)，这对我来说不是很清楚。我需要对每个映射进行单元测试还是只使用该`AssertConfigurationIsValid`方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-20T12:54:53.713

它说：

> 执行此代码会产生带有描述性消息的 AutoMapperConfigurationException。AutoMapper 检查以确保每个单独的 Destination 类型成员在源类型上都有对应的类型成员。

每个成员都与目的地类型相关。它**可能不是**正确的（因为总是有例外情况），但它至少测试了每个属性是否从源类型移动到目标。

# soap - mssoapinit 无法初始化 WSDL

> ID：12037987
> 
> 赞同：6
> 
> 时间：2012-08-20T12:49:33.887
> 
> 标签：soap, servicestack

MSSOAP 客户端无法初始化 Hello 示例项目的 soap12 接口。

```
var soap = new ActiveXObject('MSSOAP.SOAPClient30');
soap.mssoapinit('http://<server>/ServiceStack.Hello/soap12');
var retval = soap.Hello('test'); 
```

返回以下错误：

```
WSDLPort: WSDLPort:The soap:binding subnode on the binding for port WSHttpBinding_ISyncReply is missing HRESULT=0x1: Incorrect function.
 - WSDLService:Processing service SyncReply found no port definitions HRESULT=0x80070057: The parameter is incorrect.
 - WSDLReader:Analyzing the WSDL file failed HRESULT=0x80070057: The parameter is incorrect.
 - Client:One of the parameters supplied is invalid. HRESULT=0x80070057: The parameter is incorrect. 
```

我正在使用带有 IIS 6.0 和 .NET 4.0.30319 的 ServiceStack 3.95 版。

这是 WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="Soap12" 
    targetNamespace="http://schemas.servicestack.net/types" 
    xmlns:svc="http://schemas.servicestack.net/types" 
    xmlns:tns="http://schemas.servicestack.net/types" 

    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" 
    xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" 
    xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" 
    xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" 
    xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" 
    xmlns:wsa10="http://www.w3.org/2005/08/addressing" 
    xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex">

    <wsdl:types>
        <xs:schema xmlns:tns="http://schemas.microsoft.com/2003/10/Serialization/" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://schemas.microsoft.com/2003/10/Serialization/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="anyType" nillable="true" type="xs:anyType" />
  <xs:element name="anyURI" nillable="true" type="xs:anyURI" />
  <xs:element name="base64Binary" nillable="true" type="xs:base64Binary" />
  <xs:element name="boolean" nillable="true" type="xs:boolean" />
  <xs:element name="byte" nillable="true" type="xs:byte" />
  <xs:element name="dateTime" nillable="true" type="xs:dateTime" />
  <xs:element name="decimal" nillable="true" type="xs:decimal" />
  <xs:element name="double" nillable="true" type="xs:double" />
  <xs:element name="float" nillable="true" type="xs:float" />
  <xs:element name="int" nillable="true" type="xs:int" />
  <xs:element name="long" nillable="true" type="xs:long" />
  <xs:element name="QName" nillable="true" type="xs:QName" />
  <xs:element name="short" nillable="true" type="xs:short" />
  <xs:element name="string" nillable="true" type="xs:string" />
  <xs:element name="unsignedByte" nillable="true" type="xs:unsignedByte" />
  <xs:element name="unsignedInt" nillable="true" type="xs:unsignedInt" />
  <xs:element name="unsignedLong" nillable="true" type="xs:unsignedLong" />
  <xs:element name="unsignedShort" nillable="true" type="xs:unsignedShort" />
  <xs:element name="char" nillable="true" type="tns:char" />
  <xs:simpleType name="char">
    <xs:restriction base="xs:int" />
  </xs:simpleType>
  <xs:element name="duration" nillable="true" type="tns:duration" />
  <xs:simpleType name="duration">
    <xs:restriction base="xs:duration">
      <xs:pattern value="\-?P(\d*D)?(T(\d*H)?(\d*M)?(\d*(\.\d*)?S)?)?" />
      <xs:minInclusive value="-P10675199DT2H48M5.4775808S" />
      <xs:maxInclusive value="P10675199DT2H48M5.4775807S" />
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="guid" nillable="true" type="tns:guid" />
  <xs:simpleType name="guid">
    <xs:restriction base="xs:string">
      <xs:pattern value="[\da-fA-F]{8}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{4}-[\da-fA-F]{12}" />
    </xs:restriction>
  </xs:simpleType>
  <xs:attribute name="FactoryType" type="xs:QName" />
  <xs:attribute name="Id" type="xs:ID" />
  <xs:attribute name="Ref" type="xs:IDREF" />
</xs:schema>
<xs:schema xmlns:tns="http://schemas.servicestack.net/types" elementFormDefault="qualified" targetNamespace="http://schemas.servicestack.net/types" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:complexType name="Hello">
    <xs:sequence>
      <xs:element minOccurs="0" name="Name" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="Hello" nillable="true" type="tns:Hello" />
  <xs:complexType name="HelloResponse">
    <xs:sequence>
      <xs:element minOccurs="0" name="Result" nillable="true" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <xs:element name="HelloResponse" nillable="true" type="tns:HelloResponse" />
</xs:schema>
    </wsdl:types>

    <wsdl:message name="HelloIn">
        <wsdl:part name="parameters" element="tns:Hello" />
    </wsdl:message>
    <wsdl:message name="HelloOut">
        <wsdl:part name="parameters" element="tns:HelloResponse" />
    </wsdl:message>

    <wsdl:portType name="ISyncReply">
    <wsdl:operation name="Hello">
        <wsdl:input message="svc:HelloIn" />
        <wsdl:output message="svc:HelloOut" />
    </wsdl:operation>
    </wsdl:portType>

    <wsdl:portType name="IOneWay">

    </wsdl:portType>

    <wsdl:binding name="WSHttpBinding_ISyncReply" type="svc:ISyncReply">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="Hello">
      <soap:operation soapAction="http://schemas.servicestack.net/types/Hello" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
    </wsdl:binding>

    <wsdl:binding name="WSHttpBinding_IOneWay" type="svc:IOneWay">
        <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />

    </wsdl:binding>

    <wsdl:service name="SyncReply">
        <wsdl:port name="WSHttpBinding_ISyncReply" binding="svc:WSHttpBinding_ISyncReply">
            <soap:address location="http://<servername>/servicestack/soap12" />
        </wsdl:port>
    </wsdl:service>

    <wsdl:service name="AsyncOneWay">
        <wsdl:port name="WSHttpBinding_IOneWay" binding="svc:WSHttpBinding_IOneWay">
            <soap:address location="http://<servername>/servicestack/soap12" />
        </wsdl:port>
    </wsdl:service>

</wsdl:definitions> 
```

# mysql - cfquery maxrows 的 cf10 问题

> ID：12037988
> 
> 赞同：3
> 
> 时间：2012-08-20T12:49:40.703
> 
> 标签：mysql, coldfusion, coldfusion-10

我最近将一个应用程序从 cf9 移动到 cf10

运行设置了 maxrows 的查询时，我收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OPTION SQL_SELECT_LIMIT=1000' at line 1 
```

该查询在 cf9 和 cf8 上运行良好。

玩了一下，看起来 cf10 正在查询前面，`OPTION SQL_SELECT_LIMIT=1000;`但 mySQL 无法识别它。如果我从查询中取出 maxrows 设置，它运行良好。

另外值得注意的是，该查询有两个外连接。

其他人在迁移到 cf10 时遇到过类似的问题吗？

提前感谢您的任何建议

这是完整的查询

```
<cfquery name="details" datasource="#Application.ds#" maxrows="#arguments.maxrows#">
          SELECT b.booking_id,
                    DATEDIFF(b.check_out,b.check_in) as nights,
                    b.package_id,
                    b.beds_cot,
                    b.date_booked,
                    b.beds_king,
                    b.status,
                    b.tstamp as booking_tstamp,
                    g.ext_ref_id as guest_ext_ref_id,
                    g.title,
                    g.first_name,
                    g.surname,
                    g.full_name,
                    g.tstamp as guest_tstamp,
                    r.room_id,
                    r.ext_ref_id as room_ext_ref_id,
                    r.name as room_name,
                    r.description as room_description,
                    p.package_id,
                    p.ext_ref_id as package_ext_ref_id,
                    p.name as package_name,
                    p.description as package_description,
                    p.date_start as pacakge_date_start,
                    p.date_end as package_date_end

          FROM guest_booking as b 
          JOIN guest as g
          LEFT JOIN room as r ON b.room_id = r.room_id
          LEFT JOIN packages as p on b.package_id = p.package_id

          WHERE b.provider_id = #arguments.provider_id#
            and b.guest_id = g.guest_id
          <cfif isdefined("arguments.status")>
              and b.status = #arguments.status#
          </cfif>
          <cfif isdefined("arguments.booking_id")>
              and b.booking_id = #arguments.booking_id#
          </cfif>

          ORDER BY #arguments.order_by#
        </cfquery> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:04:29.603

不知道为什么会这样，但您可能会发现 mySQL`LIMIT`子句作为替代。更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T17:12:22.373

Maxrows 一直是我避免使用的东西。

我不确定 ColdFusion 是如何处理这个问题的，但我记得听说过（至少在 CF7 出现时）CF 实际上获得了更大的数据集，然后在 CF 服务器级别而不是在 SQL 数据库级别拆分它。可以想象，这可能会对性能产生不利影响，

我不确定您的确切问题是什么（对我来说听起来像是一个错误），但我强烈建议您将 maxrows 属性换成SQL（cfquery）中的`LIMIT`and子句的组合。`OFFSET`

好处是，这是标准 SQL，并且实际上可能比 CF maxrows 运行得更快，同时也消除了您的问题。

# java - 如何在使用 RMI 时共享 InputStream 或 OutputStream？

> ID：12037997
> 
> 赞同：2
> 
> 时间：2012-08-20T12:50:04.160
> 
> 标签：java, inputstream, rmi, outputstream

我有一个服务器端应用程序，我正试图通过 RMI 共享对它的访问权限。该应用程序具有“项目”的抽象表示，该“项目”通常表示文件，但可以表示几乎任何任意数据，包括流（流式无线电，来自传感器的流式数据）。因此，任何“项目”都可以通过 InputStream 访问（以及一个指示文件大小的方法，如果它可以知道的话）。

虽然 RMI 对于应用程序的其余部分来说已经足够了，但它确实不能处理 InputStreams。

令我震惊的是，在使用 RMI 时需要访问 InputStreams 一定是一个常见问题。所以我想知道：推荐的解决方案是什么？

*请注意，我需要客户端发送和接收输入流，并且序列化为字节数组是不可行的，因为它们中的一些实际上确实表示数据流，而不仅仅是文件。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T12:55:54.213

我使用[RMIIO](http://openhms.sourceforge.net/rmiio)库通过 RMI 共享流。

见类：`com.healthmarketscience.rmiio.RemoteInputStream`和`com.healthmarketscience.rmiio.RemoteOutputStream`

另请参阅：[使用 RMIIO 进行远程流式传输参考](http://openhms.sourceforge.net/rmiio/class_reference.html#Remote_Streaming)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:39:38.253

除了传递流，你能传递一种“流句柄”吗？也就是说，一个对象本身不是流，但可以按需生成流。就像是：

```
public interface StreamHandle extends Serializable {
    public InputStream getStream();
}

public class WebStreamHandle implements StreamHandle {
    private URL url;
    public InputStream getStream() {
        return url.openStream();
    }
}

public class SocketStreamHandle implements StreamHandle {
    private String host;
    private int port;
    public InputStream getStream() {
        return new Socket(host, port).getInputStream();
    }
}

public class BufferStreamHandle implements StreamHandle {
    private byte[] buffer;
    public InputStream getStream() {
        return new ByteArrayInputStream(buffer);
    }
} 
```

关键是确保代码能够独立于执行它的机器生成流。因此，您不能引用文件（除非它是您知道将在每台机器上的文件，或者是 UNC 路径），但您可以引用网络上的资源。

然后，您可以传递句柄，并按需生成流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T21:11:48.163

我刚刚将一个轻量级解决方案[Serializable InputStream](https://github.com/dajudge/serializable-input-stream)推送到 Github，用于传递一个在概念上与[RMIIO](http://openhms.sourceforge.net/rmiio)`InputStream`非常相似的RMI 。这可能会解决您的问题。使用该库，您可以轻松地包装它以使其可序列化：`InputStream`

```
serializableStream = new SerializableInputStream(originalInputStream); 
```

基本上，它利用在实现的类`ObjectOutputStream`上调用[特殊方法](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)（如果存在）的行为`Serializable`：

```
private void writeObject(java.io.ObjectOutputStream out) throws IOException;
private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException; 
```

使用这些方法，`SerializableInputStream`从委托读取的转发块到RMI 框架使用`InputStream`的处理中。`ObjectOutputStream`然后这些块在另一端被反序列化（进入内存缓存或临时文件 - 这是可配置的，取决于您的需要）。

至于你的要求...

> “其中一些实际上确实代表了一个数据流，而不仅仅是一个文件”

...我相信，要么您需要进一步阐明您的需求，要么重新考虑 RMI 是否真的是适合您的用例的技术：我看不出如何通过基于方法调用的接口发送（可能永无止境的）数据流可以为你解决。

# android - Android 快速启动感应设备的问题

> ID：12037998
> 
> 赞同：0
> 
> 时间：2012-08-20T12:50:06.707
> 
> 标签：android, build, driver, fastboot

我在让 fastboot 检测设备时遇到了一些问题。我的 udev 规则文件设置如下：

```
# adb protocol on passion (Nexus One)
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e12", MODE="0666"
# fastboot protocol on passion (Nexus One)
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", ATTR{idProduct}=="0fff", MODE="0666"
# adb protocol on crespo/crespo4g (Nexus S)
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e22", MODE="0666"
# fastboot protocol on crespo/crespo4g (Nexus S)
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e20", MODE="0666"
# adb protocol on stingray/wingray (Xoom)
SUBSYSTEM=="usb", ATTR{idVendor}=="22b8", ATTR{idProduct}=="70a9", MODE="0666"
# fastboot protocol on stingray/wingray (Xoom)
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="708c", MODE="0666"
# adb protocol on maguro/toro (Galaxy Nexus)
SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", ATTR{idProduct}=="6860", MODE="0666"
# fastboot protocol on maguro/toro (Galaxy Nexus)
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", ATTR{idProduct}=="4e30", MODE="0666"
# adb protocol on panda (PandaBoard)
SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d101", MODE="0666"
# fastboot protocol on panda (PandaBoard)
SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d022", MODE="0666"
# usbboot protocol on panda (PandaBoard)
SUBSYSTEM=="usb", ATTR{idVendor}=="0451", ATTR{idProduct}=="d010", MODE="0666" 
```

而且我还尝试了[Android 构建页面](http://source.android.com/source/initializing.html)上指定的配置。

只要设备不处于快速启动模式，我就可以看到设备正常。我已经`adb start-server`以管理员身份在我的普通用户帐户中使用命令启动了服务器，并且能够在任一实例中看到该设备。

我启动到引导加载程序以尝试使用该`adb reboot bootloader`命令使用 fastboot，并且手机做出了适当的响应。但是，重新启动后，我无法使用 fastboot 访问手机。当我以普通用户身份运行 fastboot devices 命令时，我得到以下信息：

```
$ fastboot devices
no permissions  fastboot 
```

当我以 root 身份运行 fastboot 时，我得到以下大约 3/4 次：

```
$ sudo ./fastboot devices
????????????    fastboot 
```

有时，该`sudo fastboot`命令会起作用，它会给我与插入设备关联的正确 MAC。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T16:01:04.530

将 OWNER="{your userid}" 属性添加到每个 udev 规则。

[参考](http://wiki.cyanogenmod.org/wiki/udev)