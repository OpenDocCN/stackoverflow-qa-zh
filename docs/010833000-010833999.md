# StackOverflow 问答 10833000-10833999

# mobile - 有没有办法开发真正的 NATIVE 移动跨平台应用程序而无需包装？

> ID：10833008
> 
> 赞同：11
> 
> 时间：2012-05-31T11:49:18.647
> 
> 标签：mobile, compiler-construction, cross-platform

我试图找到一种方法来开发真正的原生移动应用程序，跨平台。我发现的工具数量巨大，非常庞大。

我尝试过的所有工具都“说”最终结果将是原生的，但实际上并非如此。它是一个可执行文件，其中包含一个网络浏览器和一些额外的本机层/框架，用于设备特定的功能。

我想要一个真正的原生应用程序的原因是：

*   速度和紧凑
*   避免浏览器问题
*   市场接受度
*   避免 easy/'script Kiddie" 逆向工程

我试过的产品：

*   Appcelerator（在我的系统上无法正常工作）
*   PhoneGap（不创建真正的原生应用程序）
*   Embarcadero radPHP EX2（使用 PhoneGap）
*   Embarcadero radStudio EX2（无法创建移动/安卓应用程序？）
*   Adobe Flash Builder（工作得很好，但依赖于 Air，所以应用程序很大，没有振动等原生设备（可以，但必须自己编写）
*   Flash Develop（但与 Adob​​e Flash Builder 相同）
*   ..... 和其他一些 ;-) 像 moSync ......

目前我已经下载了“RhoStudio”，但对它有些怀疑，因为在介绍视频中他们谈论了我不想要的东西。

目标方向首先是 Android、iOS，也许是未来的 Windows Phone。注意：我没有 Mac，所以我无法在 Mac 上编译它。

我想要的是不可能的，还是周围有这样的产品可以做到这一点？

**编辑：看我的回答，答案是否定的！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-18T21:38:08.140

在问了这个问题 2 年后，我可以说：不，这是不可能的，这是一个神话。

我尝试过的所有产品都使用某种包装或使用第二语言作为调用本机内容的层。尽管库是本机的，但主程序不是。Cosku 与 smartface.io 的最新答案就是一个很好的例子，他们声称它是原生的，但它不是。

为什么这么难？问题在于平台所需的编程语言（使其复杂的语言差异）。将第二种语言翻译成平台的主要语言和它的特定库太复杂了，你只能通过使用本机二进制文件包装来实现这一点。第二个障碍是需要能够跨平台运行的编译器。

但是为什么在输出几乎相同的情况下依赖第二语言或第三方开发工具来构建应用程序是不好的，这个问题完美地说明了这个问题：http: [//xkcd.com/927/](http://xkcd.com/927/)

![](../Images/251b8388d4fc1d9a3517a2463c7e36f3.png)

图像是关于标准的，但这就是发生的事情，为标准创建了一个新标准。例如，在使用 PhoneGap 时，您必须学习 PhoneGap API 的基础知识。您依靠“新标准”呼叫PhoneGap。问题在于您完全依赖 PhoneGap 支持及其存在。它可能会在应用程序的生命周期中引入第二个弱点。

IMO，如果您想包装东西以使其跨平台，那么依赖第三方产品和库并不是一个聪明的主意。更好的是自己编写一个包装器，就像我一样，跳过臃肿。这一切的真正好处是您自己编写了包装器代码并且您了解底层结构。此外，它更容易扩展或更改，您可以跳过不需要的东西。

今天，我使用 JavaScript 界面，用现存最久、最稳定的“语言”HTML 创建和设计应用程序的 UI。该应用程序也可以在浏览器中运行，并且在缺少特定功能（例如振动）时不会中断。用phonegap不能得到同样的结果，试试吧！您可以像普通网站一样使用响应式技术轻松设计应用程序（例如，在 Android 中尝试 ;-)）。从技术上讲，它可以在任何地方运行，在浏览器或 web 视图中的任何平台上，但不使用任何特殊的移动 javascript 库！你不需要这些特殊的库，真的，使用“普通”库版本来代替。

我已经为它编写了一个编译器/混淆器，以便将 UI 源“打包”到一个文件中，该文件将由本机 shell 加载。这是为了保护源，所以不容易查看或修改源。

为了支持应用程序平台，我唯一要做的就是为它编写一个本地包装器。如果一个平台由于某种原因死掉了（例如过去的 Windows Mobile），我只需要为它编写一个新的包装器。这比从头开始重新编写整个程序更容易。此外，当有新平台时，它也可以在平台浏览器中运行。

如果您的应用程序不依赖特定硬件（如游戏）或无需特殊硬件要求即可运行，这是延长应用程序生命周期的方法。使用 HTML5 和 javascript 来设计 GUI，并使用本机 shell 来使用特定的操作系统功能。

慢吗？我不得不说不。至少不要使用任何庞大而臃肿的特殊设计的移动 javascript 库的东西，不要在触摸屏设备上使用 click 事件，而是使用 touchstart。现在 HTML 引擎也将/得到改进，并且对 HTML5 功能有更好的支持，使您能够编写功能强大的 HTML5 webapps，而无需用本机语言实现它。

IMO，这是（对我而言）要走的路，也是我寻找跨平台开发移动应用程序并延长生命周期的最佳方式的旅程。希望它也可以帮助您决定什么是最好的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-06T00:46:15.040

对于跨平台的原生 iOS、Android、Mac 和 Windows 应用程序，请查看[Xamarin](http://xamarin.com)。C# 中的代码，编译为本机。对于 iOS，您可以利用 XCode 工具进行应用程序布局，并且 Xamarin Studio 与它非常干净地集成。

为了完整起见，PhoneGap 在[TRIGGER.IO](http://trigger.io)中有一个有价值的（是的，基于 WebView 的）竞争对手。虽然它的方法类似于 PhoneGap/Cordova，但它改进了用于访问本机功能的 API，简化了推送通知，并执行更快的云构建。

我与这些产品中的任何一种都没有任何关系……我只是喜欢它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T07:41:51.887

你试过[www.codenameone.com](http://www.codenameone.com/)吗？它是开源的，基于java的，只需要eclipse或netbeans来开发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T12:21:24.827

首先

```
Appcelerator (does not work correctly on my system) 
```

您面临某个问题吗？收到java错误或其他东西，可能没有正确设置。

简短的回答是否定的，你必须有一定程度的抽象才能实现这一点，java和objective-c是完全不同的语言，Android和IOS SDK有不同的方法、过程、风格、设计等。没有在没有中间层来转换或渲染的情况下让两者都工作的方法。

Appcelerator 将是您所寻找的最接近的东西，因为它不像其他的那样是 webview 包装器，它确实解释了 javascript，但是因为它没有包装在 webview 中，所以您避免了浏览器问题。

速度和紧凑性更多地取决于您对应用程序的编码方式而不是其编码方式，真正的 Titanium 应用程序将由于库而在尺寸上更大，但这并没有因此而变得糟糕，获得 2 个应用程序的好处很重要我认为额外的几兆字节。

我很确定所有这些工具都有市场接受度，因为没有它它们就不会成功，同样，对于苹果之类的要求，它取决于你设计它的方式，而不是后台的工具。

如果你想使用 IOS，你将需要一个 mac，如果你想单独在应用商店中发布，你需要 xcode 和构建的项目来使用应用程序加载器，我不知道有任何工具（甚至是 webview 包装器）不需要您拥有 IOS SDK，因为它无法在模拟器中运行、打包应用程序或运行任何代码。

如果你想制作应用程序，你有 2 个选择，学习每个平台或使用其中一种工具，如果有什么神奇的工具可以做所有事情，我保证它会是这个星球上最受欢迎的东西，你会听说过 /找到了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:05:00.080

这也是“云”如此受欢迎的原因之一。您无需多次编写应用程序，而是在服务器上编写所有功能。然后，实际的“应用程序”只是您对功能的用户界面，根据您的需要，这可能非常简单。如果就这么简单，那么您可以为每个平台单独编写应用程序，但它们都将使用相同的“云”后端。

如果我没记错的话，这代表了大多数拥有云架构的公司的应用程序所做的事情，也是许多需要数据连接的原因。

我认为没有某种包装器或层就不可能编写一次并在任何地方运行，这是因为每个平台都有单独的 API 甚至编程语言。例如，您将很难编写一组在 Apple 和 Android 设备上本地运行的源代码。这并不是说这在技术上是不可能的，桌面操作系统多年来一直使用 C/C++ 具有这样的交叉编译可移植性，而 Java 只是让这变得更容易。当然，移动操作系统的工程师们似乎并不认同可互操作 API 的愿景。

总而言之，我建议 A) 编写应用程序两次（我知道这很糟糕，但它将在两种设备上提供本机执行的可靠性，并且可以以最小的痛苦完成）或 B) 分解并使用“脚本”之一-kiddie”框架。如果您的应用程序足够简单，这些实际上可能并没有那么糟糕，而且它可能根本不是那么可逆向工程的。如果有人对最好的“近乎原生”跨平台框架有任何建议，那将很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T14:37:56.343

好吧，有几件事需要考虑，如果你想要原生的外观和感觉，有像 Sencha(www.sencha.com) 和 Kendo UI(http://www.kendoui.c​​om/) 这样的框架可以在 JavaScript 端模拟它。我发现它们在 Android 和 iPhone 上都很好看，但还不支持 Windows Phone。

如果您正在寻找结合 HTML 的真正原生小部件，您可以查看 MoSync 的 Native UI(http://www.mosync.com/documentation/manualpages/jsnativeui-library)，它也支持 windows phone Metro UI，或者 Titanium(http ://docs.appcelerator.com/titanium/2.1/index.html）。

无论如何，另一件事是您可以使用诸如 Phonegap 或 MoSync 或 AppMobi 之类的打包程序（我认为它使用类似于 PhoneGap 构建的东西）来包装您的应用程序并将其放在应用程序市场上。从这些列表中，PhoneGap 特别不是旨在为您提供任何特定的 UI 功能，尽管我已经看到一些尝试将标签栏插件添加到 Phonegap。

# ios - 允许其他开发人员处理我的 XCode 项目

> ID：10833010
> 
> 赞同：0
> 
> 时间：2012-05-31T11:49:29.237
> 
> 标签：ios, xcode, certificate, provisioning

我有一个正在处理的 XCode 项目，我需要授予其他开发人员访问该项目的权限。为了做到这一点，我相信我必须发送我的私钥和配置文件（这是正确的吗？）

但是，我一直在使用我自己的个人 iOS 开发证书来开发我的项目。而且我对将我所有的签名身份都发送给其他人感到不自在。

在不让他访问我的整个 iOS 开发帐户的情况下，让其他开发人员与我一起从事同一个项目的最简单和最安全的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:53:56.050

## 阿特拉斯岩石！

[去这个网站](https://bitbucket.org/)创建一个回购，从你身边设置一切。请其他合作伙伴下载 repo 并开始编码。当您遇到合并冲突时互相战斗:)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:52:30.250

您可以只发送项目文件，以便他/她可以处理项目。如果他/她没有许可证，则无法在设备上对其进行测试。我不认为“开发人员许可证”有权将人员添加到开发人员团队。

# php - 从另一个网站检测 facebook 名称

> ID：10833013
> 
> 赞同：1
> 
> 时间：2012-05-31T11:49:39.227
> 
> 标签：php, facebook

如果某人在 FB 上登录，是否可以从其他网站检测到某人的 facebook 名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:51:45.370

这仅适用于与 Facebook 合作进行所谓 InstantIdentification 的特定网站，但所有其他网站都必须为用户提供登录选项，以便在他们访问用户信息之前将网站授权为应用程序。

# c# - 在 C# 中系统启动时触发任务调度程序

> ID：10833015
> 
> 赞同：2
> 
> 时间：2012-05-31T11:49:48.443
> 
> 标签：c#, scheduled-tasks

我创建了一个任务计划程序并将其触发时间设置为固定，例如每天下午 5:00，但我想在系统启动或引导时触发该事件。如果您有任何示例，请帮助我提供代码。

提前致谢。

代码 ： - - - - - - - - - - - - - - - - - - - - - - - - ------

```
 public static void CreateTask()
        {
            using (TaskService task = new TaskService())
            {`enter code here`
                TaskDefinition taskdDef = task.NewTask();

                taskdDef.RegistrationInfo.Description = "Does something";
                taskdDef.RegistrationInfo.Documentation = "http://www.mysite.com";

                taskdDef.Settings.ExecutionTimeLimit = new TimeSpan(0, 10, 0);
                taskdDef.Settings.AllowDemandStart = true;

                taskdDef.Actions.Add(new ExecAction(@"D:\Myfolder\bin\SGSclient.exe", "yourArguments", null));
                task.RootFolder.RegisterTaskDefinition("YourTask", taskdDef);
            }
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T12:13:30.957

使用来自 GitHub 的[任务计划程序管理器库](https://github.com/dahall/taskscheduler)，您可以这样编写

```
using System;
using Microsoft.Win32.TaskScheduler;

class Program
{
   static void Main(string[] args)
   {
      // Get the service on the local machine
      using (TaskService ts = new TaskService())
      {
         // Create a new task definition and assign properties
         TaskDefinition td = ts.NewTask();
         td.RegistrationInfo.Description = "Does something";

         // Create a trigger that will fire after the system boot
         td.Triggers.Add(new BootTrigger() );

         // Create an action that will launch Notepad whenever the trigger fires
         td.Actions.Add(new ExecAction("notepad.exe", "c:\\test.log", null));

         // Register the task in the root folder
         ts.RootFolder.RegisterTaskDefinition(@"Test", td);

         // Remove the task we just created
         ts.RootFolder.DeleteTask("Test");
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T11:53:51.313

您可以将其作为启动任务添加到注册表。见[这里](http://windowsdevcenter.com/pub/a/oreilly/windows/ron/startup_0401.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:54:37.307

2000，经验值

开始 -> 设置 -> 控制面板 -> 计划任务
打开任务的属性。
打开“计划”选项卡。
从“计划任务”下拉菜单中选择“在系统启动时”。

远景

开始 -> 设置 -> 控制面板 -> 管理工具 -> 任务计划程序
打开任务的属性。
打开“触发器”选项卡，然后编辑或创建触发器。
从“开始任务”下拉菜单中选择“启动时”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T11:51:03.217

你应该做一个[Windows 服务](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)e。

# jquery - wmode 属性不适用于 flowplayer

> ID：10833020
> 
> 赞同：0
> 
> 时间：2012-05-31T11:50:22.883
> 
> 标签：jquery, css, flowplayer

我有一个我正在使用的 flowplayer，它下面有几个 div 标签。当您单击 div 标签时，它将在页面上显示另一个 div 标签，类似于对话框。问题是 flowplayer 将始终位于 div 之上。

我尝试设置 div 的 z-index，但它不起作用。

flowplayer 中是否有一种方法可以降低其 z-index 或允许将我的 div 放在它上面？

我也为 flowplayer 使用 wmode 属性，但它仍然不起作用。

以下是我的代码：

```
<script type="text/javascript" src="/common/js/flowplayer-3.2.9.min.js"></script>
<a href="<?php echo $this->hotelVideoUrl; ?>"
   style="display:block;width:304px;height:208px; z-index: -1; position: relative;"
   id="player">
</a>

<script language="JavaScript">
    flowplayer("player", "/common/js/flowplayer-3.2.10.swf",{         
        clip:  {
            autoPlay: true,            
            autoBuffering: true            
        },
        wmode: 'opaque/transperent'
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:47:38.870

根据文档，您应该将 wmode 放在第二个参数中，例如：

```
flowplayer("player", {
    src:"http://releases.flowplayer.org/swf/flowplayer-3.2.11.swf",
    wmode: "opaque" // This allows the HTML to hide the flash content
    }, {
    clip: {
      url: 'http://pseudo01.hddn.com/vod/demo.flowplayervod/flowplayer-700.flv'
    }
}); 
```

所以我想在你的情况下，如果你可以尝试下面的代码：

```
<script type="text/javascript" src="/common/js/flowplayer-3.2.9.min.js"></script>
<a href="<?php echo $this->hotelVideoUrl; ?>"
   style="display:block;width:304px;height:208px; z-index: -1; position: relative;"
   id="player">
</a>

<script language="JavaScript">
    flowplayer("player", {
        src : "/common/js/flowplayer-3.2.10.swf",
        wmode: 'opaque'}, {         
        clip:  {
            autoPlay: true,            
            autoBuffering: true            
        }
    });
</script> 
```

你应该能够让它工作。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:11:24.603

它应该通过使用...

```
wmode: "opaque" 
```

编辑：您添加流播放器的方式与我的方式非常不同。

检查[这个线程](https://stackoverflow.com/questions/5992513/flowplayer-playing-over-everything)，因为我认为它可能会帮助你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:22:42.367

修改您以下代码：

```
wmode: 'opaque/transparent' 
```

到

```
wmode: 'opaque' or wmode: 'transparent' 
```

# opencv - 在opencv中使用SVM技术进行图像分类

> ID：10833027
> 
> 赞同：4
> 
> 时间：2012-05-31T11:50:37.250
> 
> 标签：opencv, svm

我需要训练样本图像集对它们进行分类。但我对 SVM 技术有一点了解来做编码工作。请帮我完成其中的编程部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:05:35.083

SVM 的 OpenCV 文档提供了一个关于如何使用它的小示例：[链接](http://opencv.itseez.com/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html)

# java - 如何使用 DJNativeSwing 配置默认 URL/HTTP 处理程序

> ID：10833029
> 
> 赞同：0
> 
> 时间：2012-05-31T11:50:39.473
> 
> 标签：java, swing

概述：我正在创建一个具有嵌入式 Web 浏览器（DJ Native Swing）的 Swing 应用程序。此 Web 浏览器需要能够显示使用 Java 和 GPG 即时解密的内容。

因此，假设您有一个简单的 a.html，其中包含以下内容：

```
< html >
< body >
Hello world
< img src="b.jpg">
< /body>
</ html> 
```

处理程序首先应该看到对“a.html”的请求，然后我们的处理程序将定位文件 a.html.gpg（加密文件），将其转换为 a.html，打开它并将字节写回浏览器作为处理程序结果。

现在浏览器查看内容并意识到需要发出另一个请求，因此它尝试访问 b.jpg。我们的处理程序应该看到该请求并重复逻辑，现在将组成 b.jpg 的字节作为结果发送回来。

所以我们真正想要的是拦截 a.html、b.jpg 的每个 HTTPRequest，并且 URL 处理程序中的自定义代码将解密该文件并提供浏览器应该使用的字节并在页面上呈现 Web 组件.

**解密逻辑很好，只需要一种拦截 URL 的方法，让 JWebBrowser 能够使用解密的字节来呈现页面。**

我确实看到了一个方法 WebServer.addContentProvider(HTTPRequest req) 但不知道如何使用它。任何满足 Dj Native Swing 要求的替代方法也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:05:13.747

DJ Native Swing 使用本机系统浏览器（嗯，是的，这很明显）并且提供了一小部分功能。而且我很久以前在使用它时没有找到任何方法来拦截浏览器请求。

浏览器似乎也使用自己的方法来连接和检索数据（包括自己的代理、设置等）。

我建议您研究与 Swing 的跨平台 JavaFX 浏览器集成（您可以[在此处](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm#CHDIEEJE)阅读如何做到这一点）。它有很多功能都可以从你的 Swing 应用程序中访问（你可以[在这里](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)阅读更多）。

# c#-4.0 - 泛型与 Sort(Comparison) 结合使用 )

> ID：10833030
> 
> 赞同：1
> 
> 时间：2012-05-31T11:50:45.337
> 
> 标签：c#-4.0

我想知道是否可以重用我重载的 Sort(Comparison) 方法来按 tabIndex 对标签和文本框进行排序。我已经尝试过了，但我无法让它工作。任何帮助，将不胜感激。

```
foreach(Control control in gbUserInputs.Controls)
        {
            if (control is Label)
            {
                inputLabels.Add((Label)control);
            }

            if (control is TextBox)
            {
                inputTxtboxes.Add((TextBox)control);
            }
        } 
```

排序方法调用（这不起作用）。

```
inputLabels.Sort(sortMyInputs<Label>); 
```

排序方法的重载。

```
private static int sortMyInputs<T>(T entry1, T entry2)
    {
        return entry1.TabIndex.CompareTo(entry2.TabIndex);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:52:23.123

您不应该制作通用方法：

```
private static int CompareLabels(Label entry1, Label entry2)
{
    return entry1.TabIndex.CompareTo(entry2.TabIndex);
} 
```

泛型委托的要点是允许它持有不同具体类型的方法；不允许它保存本身是通用的方法。

如果你想重用你的方法，你可以将它修改为 take `Control`(which both `TextBox`and `Label`inherit); `List<Label>.Sort`由于委托协方差，您仍然可以将其传递给。

* * *

如果您使用.Net < 4，它没有委托协方差，您可以通过向方法添加约束来按照自己的方式进行操作，以便它知道`T`可以是什么：

```
private static int CompareLabels<T>(T entry1, T entry2) where T : Control
{
    return entry1.TabIndex.CompareTo(entry2.TabIndex);
} 
```

* * *

您也可以简单地用一行 LINQ 替换所有代码：

```
inputLabels = gbUserInputs.Controls.OfType<Label>()
                                   .OrderBy(c => c.TabIndex)
                                   .ToList(); 
```

# php - 始终在 Excel 中显示指定的小数位数

> ID：10833031
> 
> 赞同：14
> 
> 时间：2012-05-31T11:50:50.703
> 
> 标签：php, phpexcel

我需要在 Excel (xlsx) 中显示两位小数。我正在使用[`PHPExcel`](http://phpexcel.codeplex.com/downloads/get/212184). 在 PHP 中，我可以使用类似以下的内容来仅显示指定的小数步数。

```
echo sprintf("%0.2f", $row['price']); 
```

即使该值不包含小数点，它也始终显示两位小数，即如果值为`$row['price']`，`1500`它将回显`1500.00`。我需要将相同的值写入excel。我试过了

```
$sheet->setCellValue("A1", sprintf("%0.2f", $row['price'])); 
```

但它显示`1500`而不是显示`1500.00`（因为 Excel 自动假定它是一个数值并且小数点后的部分，即`.00`在这种情况下被截断）。

我还尝试了以下

```
$sheet->getStyle("A1")->getNumberFormat()->setFormatCode('0.00'); 
```

但这还不足以实现指定的目标。

如何（总是）使用 PHPExcel 在 Excel 中显示指定的小数位数？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-31T12:08:48.333

```
$sheet->getStyle("A1")->getNumberFormat()->setFormatCode('0.00'); 
```

应该可以工作，只要单元格 A1 中的值是数字而不是格式化的字符串...不要尝试使用 sprintf 强制 Excel 格式化，只需使用格式代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-10T08:59:46.733

格式为带逗号的数字。假设该值不超过 9 位。

```
$sheet->getStyle("A1")->getNumberFormat()->setFormatCode('###,###,###.##'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-04T16:04:04.650

你也可以这样做：

```
$sheet->setCellValue("A1",sprintf("%0.2f",$row['price']),true)->getStyle()->getNumberFormat()->setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_NUMBER_00); 
```

在 setCellValue 处添加“true”，您可以直接引用单元格而不是工作表，并且可以在没有单元格值的情况下调用 getStyle 方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-12T17:26:13.410

如果您想要一些特殊字符，只需使用 html_entity_decode：

```
$currencyFormat = html_entity_decode("€ 0,0.00",ENT_QUOTES,'UTF-8');
$objPHPExcel->getActiveSheet()
            ->getStyle("A1")
            ->getNumberFormat()->setFormatCode($currencyFormat); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-25T19:00:46.780

```
$objPHPExcel->getActiveSheet()->getStyle('ce')->getNumberFormat()->setFormatCode('0.00'); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-12T13:38:57.457

试试看：

```
$sheet->getStyle("A1")->getNumberFormat()->setFormatCode('### ### ### ##0.00'); 
```

有用。

# android - 如何知道机器人中的对话框已关闭？

> ID：10833033
> 
> 赞同：1
> 
> 时间：2012-05-31T11:50:54.270
> 
> 标签：android, progressdialog, robotium

我正在使用**robotsium**做一个测试项目。我需要**暂停**所有剩余**代码**的执行，直到进度对话框**关闭**。现在我正在硬编码时间。但问题是有时进度对话框不会在该时间段内关闭。*我怎样才能做到这一点？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:33:30.183

您可以使用该`waitForDialogToClose(long timeout)`方法。

希望这可以帮助。

# android - 在 Surface 上绘制矩形并拉出它的边

> ID：10833036
> 
> 赞同：3
> 
> 时间：2012-05-31T11:50:59.550
> 
> 标签：android, drawing, surfaceview

大家。我从 XY 的乞求点用函数 Motion Event 在 SurfaceView 的顶部绘制了一个矩形。我想知道绘制矩形后如何拉它的侧面？

我的代码：

```
 protected void onDraw(Canvas canvas) {

         if(drawing){

             canvas.drawRect(Var.Numb3,Var.Numb4,Var.Numb,Var.Numb2, paint);

         }
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {

         int action = event.getAction();
         if (action==MotionEvent.ACTION_MOVE){
          float x = event.getX();
          float y = event.getY();
          Var.Numb  = Var.X ;
          Var.Numb2 = Var.Y ;
          Var.Numb3 = (int) x;
          Var.Numb4 = (int) y ;

         }
         else if (action==MotionEvent.ACTION_DOWN){
          Var.X = (int) event.getX();
          Var.Y = (int) event.getY();

          drawing = true;
         }
         else if (action==MotionEvent.ACTION_UP){
          drawing = true;

         }
         invalidate();
         return true;
        }

        } 
```

# database-design - 用于数据存储的数据模型，将表存储在一个结构中

> ID：10833037
> 
> 赞同：0
> 
> 时间：2012-05-31T11:50:59.790
> 
> 标签：database-design, oracle11g, data-modeling

需要在 11g 中设计数据库以在一个数据库结构中存储大量表。一种假设，输入表的列只能是

1.  TEXT(字符串大小超过 500)
2.  VARCHAR
3.  数字
4.  日期
5.  斑点

这是我的草图：

![在此处输入图像描述](../Images/8a999f8abf9150fcfb7df98de776d465.png)

也许我出错了，是否有任何方法或方法可以做得更好，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:37:32.040

除了 ABC 的回答，另请参阅 Tim Gorman 的类似努力的故事：[Bad CarRMa](http://www.simple-talk.com/opinion/opinion-pieces/bad-carma/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:13:21.397

如果我理解正确，那么您要做的就是所谓的[“通用数据模型”](http://en.wikipedia.org/wiki/Generic_data_model)。
阅读[此 AskTom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:10678084117056)并希望不要这样做...

# python - 从python中的文件中读取负值

> ID：10833042
> 
> 赞同：1
> 
> 时间：2012-05-31T11:51:12.660
> 
> 标签：python, numbers

我正在尝试从具有十六进制值的压缩文件中读取一些负值：

*   FFFFFFFF，应为 -1，但显示为 4294967295
*   FFFFFFFE，应为 -2，但显示为 4294967294

我知道 FF 应该是标记 - 但是 python 中是否有一种方法可以直接读取值，还是我必须制作自己的方法？

谢谢！

编辑：这适用于 Python 2.6。我的程序从二进制数据中读取，我只是以十六进制显示它以使其更简单。该程序一次只读取 4 个字节并从这 4 个字节中获取值。只是其中一些值为负数并显示上述数字。我也希望有人可以解释 Python 如何将二进制数据解释为一个值，以便我可以编写一个反向协议。谢谢！

我从十六进制读取并通过这种方法转换为值。

```
def readtoint(read):
    keynumber = read[::-1]
    hexoffset=''
    for letter in keynumber:
        temp=hex(ord(letter))[2:]
        if len(temp)==1:
            temp="0"+temp
        hexoffset += temp
    value = int(hexoffset, 16)
    return value 
```

它抓取 4 个字节，反转顺序，然后将十六进制值转换为 int 值。我在上面发布的值已经反转了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:28:02.433

使用结构模块：

```
import struct

def readtoint(read):
    return struct.unpack('<i', read)[0] 
```

例子：

```
>>> readtoint('\xfe\xff\xff\xff')
-2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:11:35.733

发布您的文件阅读代码以获得完美的答案。但你的问题的答案几乎肯定在这里：

[在 Python 中从二进制文件中读取整数](https://stackoverflow.com/questions/1163459/reading-integers-from-binary-file-in-python)

# jquery - 我在换页时遇到了很多麻烦

> ID：10833044
> 
> 赞同：0
> 
> 时间：2012-05-31T11:51:22.613
> 
> 标签：jquery

```
function pageSwap(page) {
 $(".content").fadeOut("1000",function(){
  $(".content").load(page, function (){
   $(".content").fadeIn("5000");    
  });
 });
} 
```

这从 pageswap.js 包含在我的页面中，然后

```
<script type="text/javascript">
 $(document).ready(function (){
   $(".content").pageSwap("main.html");
 });
</script> 
```

我确实有 main.html，包含脚本，调用了函数，但它不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:52:26.833

您已经声明了一个全局函数，但没有使用该函数扩展 jQuery。所以你只需要`pageSwap()`像下面这样调用：

```
<script type="text/javascript">
    $(document).ready(function() {
        pageSwap("main.html");
    });
</script> 
```

* * *

**更新**`pageSwap`：您可以使用以下代码使用方法扩展 JQuery ：

```
(function($) {
    $.fn.extend({
        pageSwap: function(page) {
            return this.each(function() {
                var obj = $(this);
                obj.fadeOut("1000", function() {
                    obj.load(page, function() {
                        obj.fadeIn("5000");
                    });
                });
            });
        }
    });
})(jQuery); 
```

但是，[@Esailija 的回答](https://stackoverflow.com/a/10833146/1249581)中描述了另一种替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:58:30.977

您需要这样做才能使您的代码正常工作：

```
$.fn.pageSwap = function(page) {
    this.fadeOut("1000", $.proxy( function(){
        this.load(page, $.proxy( function (){
            this.fadeIn("5000");    
        }, this ));
    }, this ));
}; 
```

# java - 使用 Jboss7 加载资源返回 null

> ID：10833046
> 
> 赞同：4
> 
> 时间：2012-05-31T11:51:27.350
> 
> 标签：java, jakarta-ee, jboss, jboss7.x

如何使用 Jboss7.1 从 java 代码中加载图像等资源？

这曾经与 Jboss4 一起工作：

```
this.getClass().getClassLoader().getResourceAsStream("/myapp/includes/images/image1.png"); 
```

现在这返回 null。

现在使用 Jboss7 在 java 代码中加载资源的最佳实践是什么？

我做了一些测试：

```
URL url = this.getClass().getResource("");
System.out.println(url);
url = this.getClass().getResource("../../../");
System.out.println(url);
url = this.getClass().getResource("../../../../");
System.out.println(url);
url = this.getClass().getResource("../../../../../");
System.out.println(url);
url = this.getClass().getResource("includes");
System.out.println(url);

13:33:49,143 INFO  [stdout] (http--127.0.0.1-8080-1) vfs:/C:/Eclipse/apps/jboss-as-7.1.1.Final/standalone/deployments/my-ea.ear/my-web.war/WEB-INF/classes/com/xxx/yyy/beans/jsf/
13:33:49,144 INFO  [stdout] (http--127.0.0.1-8080-1) vfs:/C:/Eclipse/apps/jboss-as-7.1.1.Final/standalone/deployments/my-ea.ear/my-web.war/WEB-INF/classes/com/xxx/
13:33:49,150 INFO  [stdout] (http--127.0.0.1-8080-1) jar:file:/C:/Eclipse/apps/jboss-as-7.1.1.Final/modules/javax/activation/api/main/activation-1.1.1.jar!/com/
13:33:49,151 INFO  [stdout] (http--127.0.0.1-8080-1) file:/C:/Eclipse/apps/jboss-as-7.1.1.Final/modules/sun/jdk/main/service-loader-resources/
13:33:49,152 INFO  [stdout] (http--127.0.0.1-8080-1) null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:33:32.883

该方法`this.getClass().getClassLoader().getResourceAsStream("path")`正在处理从类*路径*的根开始的路径。在 WAR 中，这通常是`WEB-INF/classes`和`WEB-INF/lib`。

您的路径`WebContent/includes/images/`似乎在 WAR 文件的根目录中（不是类路径）。这样你就可以

*   使用`getResourceAsStream`（`ServletContext`参见[此处](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)）处理 WAR 文件根目录的路径。
*   将所有图像打包在一个额外的 JAR（例如`my-app.resources.jar`）中并使用`ClassLoader.getResourceAsStream()`
*   在类路径中移动图像（见上文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:01:06.790

如JBoss 社区 wiki 中所述（不使用[文件](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)`jboss-deployment-structure.xml`）：

1.  为配置文件 ( `jboss-as-7/modules/com/yourcompany/configuration/main/module.xml`) 创建一个模块：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.mycompany.configuration">
    <resources>
        <resource-root path="."/>
    </resources>
</module> 
```

2.  向模块添加属性：

```
jboss-as-7/
   modules/
      com/
         yourcompany/
            configuration/
               main/
                 module.xml
                 settings.properties
                 other-settings.xm 
```

3.  将模块添加到`CLASSPATH`using`MANIFEST.MF`条目：

```
Manifest-Version: 1.0
Dependencies: com.mycompany.configuration 
```

4.  从 CLASSPATH 加载属性文件：

```
InputStream settingsStream = 
  getClass().getClassLoader().getResourceAsStream("settings.properties"); 
```

我必须创建一个名为的模块文件夹`com/mycompany/main`并在其中添加所有图像。所以这至少在 WAR 之外，但在`JBOSS_HOME`. 然后我可以使用以下方法加载图像：

```
URL imgUrl = this.getClass().getClassLoader().getResource("myimage.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T04:47:44.890

JBOSS 7 中的类加载基于 JBOSS 模块项目。所有早期版本的加载都是分层的。

在早期版本的 JBOSS 中，我们可以通过修改 run.sh/run.bat 在 classpath 属性中放置/指定包含所有应用程序属性的外部文件夹。

但是在 JBOSS 7 中由于加载是基于 JBOSS 模块项目，所以外部属性配置有所不同。

您可以尝试通过以下两种方式在 JBOSS 7 中配置/加载属性文件，

1.  准备包含应用程序所需的所有属性文件的 jar。在你的战争/耳朵中使用这个罐子。

    然后可以使用以下代码加载此 jar 中的任何属性文件，

    InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName) ;

2.  JBOSS 7 中指定外部属性文件所需的更改可在社区链接[https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)中找到。如果根据此链接进行更改，则部署将起作用。确保在 JBOSS 7 中配置后，必须使用以下代码加载属性，

    InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream("xyz.properties");

# xslt - XML to XHTML using XSLT：使用 ∑ 等实体（这是一个 MATHML 实体）

> ID：10833051
> 
> 赞同：0
> 
> 时间：2012-05-31T11:51:40.550
> 
> 标签：xslt, xhtml, mathml

假设我有一个 XML 文件`test.xml`，其中包含（除其他外）一些 MATHML：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="template.xsl"?>
<equation>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <row>    
            <!-- Using a MATHML entity name here! -->  
            <mi>&Sum;</mi>
        </row>
    </math>
</equation> 
```

我想使用浏览器 XSLT 引擎将其转换`test.xml`为 XHTML+MATHML 并显示它。我的 XSLT 文件`template.xsl`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/equation">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <body>
            Here is an equation:
            <xsl:copy-of select="."/>
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

当我`test.xml`在浏览器中打开时，它会错误提示实体`&Sum;`未声明。显然，我希望 ∑ 符号按原样显示。当我使用数字实体`&#8721;`时，它按预期工作，但查找每个数学符号的数字实体是一件痛苦的事。

我尝试播放`<xsl:output>`标签尝试不同的文档类型，例如`doctype-system="http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"`但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:49:53.597

XSLT 需要格式良好的 XML 作为输入，并且引用未声明实体的文件格式不正确。如果要在 XML 文档中使用 MathML 实体引用，则需要引用包含其定义的 DTD。

# drupal - Drupal 6：创建表单以创建节点..！

> ID：10833052
> 
> 赞同：0
> 
> 时间：2012-05-31T11:51:43.043
> 
> 标签：drupal, form-api

我正在创建一个包含 4 个字段的自定义表单，并且我想创建一个具有一些 CCK 字段的特定内容类型的节点。

我打算在提交此表单时以编程方式创建节点。我计划为某些字段推送默认值，并且某些字段将使用此表单小部件映射..

这是我的代码

```
 <?php

require 'modules/node/node.pages.inc';

/**
 * Implements hook_menu().
 */

function taskform_menu() {
  $items = array();
  $items['admin/content/taskform'] = array(
    'title' => 'Add Task',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('taskform_form'),
    'access arguments' => array('create create_task content'),
  ); 
  return $items;
}
 global $user;

function taskform_perm() {
  return array('Submit daily task');
}

function taskform_form(&$node)
{

  $form['date'] = array(
    '#type' => 'date', 
    '#title' => t('Date'),        
  );

  $form['edproject'] = array(
    '#type' => 'select', 
    '#title' => t('Project'), 

    '#options' => array(
      1 => 'Konnected', 
      2 => 'eLearning', 
      3 => 'Others',
    ),
    '#description' => t('Choose a project'),
  );

  $form['task'] = array(
    '#type' => 'textfield', 
    '#title' => t('Task'), 
    '#size' => 30,
    '#required' => TRUE,
    '#maxlength' => 30,
    '#description' => t('Enter the task'),
  );

  $form['remarks'] = array(
    '#type' => 'textfield', 
    '#title' => t('Remarks'), 
    '#size' => 30,
    '#description' => t('Enter remarks (If any).'),
  );

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Add Task'),
    '#submit' => array('taskform_form_submit'),
  );
  return $form;

}

function taskform_form_submit($form, &$form_state) {

  $node = new stdClass();
  $node->type = 'create_task';
  $node->uid = $user->uid;
  $node->title = $form_state['values']['task'];
  $node->body = $form_state['values']['task'];
  $node->status = 1;
  $node->promote = 0;
  $node->field_assigned_uid[]['uid'] = $user->uid;
  node_object_prepare($node);
    $node = node_submit($node);
    if ($node->validated) {
        node_save($node);
    }
    else{
        t("Node not created");
    }

} 
```

现在，当我提交此内容时，它正在创建内容类型，其中文本字段文本作为标题和正文，我打算这样做......但我想将 UID（登录用户 ID）存储在表节点的 uid 列中...我已经尝试过，如您所见...但它仍然发送 0...我需要帮助...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:10:45.323

IMO，为每个 webform 提交创建一个节点并不是一个好主意。瘸。您始终可以定制节点表单以执行 webform 所做的操作，因此这是一个简单的设置。此外，您可以轻松访问每个提交的数据，并且 webform 已经集成了 Views，所以我不知道您为什么需要创建一个节点。

但是，如果您仍然需要继续，我建议的最好方法是使用 webform 的新钩子（从 Webform 3 开始）。见[hook_webform_submission_insert](http://drupalcontrib.org/api/drupal/contributions!webform!webform.api.php/function/hook_webform_submission_insert/7)

```
<?php
function MYMODULE_webform_submission_insert($node, $submission) {
// print the submitted values object's information as a message.
// Once you have grabbed the necessary data, remove this line. 
drupal_set_message('<pre>'.print_r($submission, TRUE).'</pre>');

// Now, grab the fields you want and map them to the $node object below.
$node = new stdClass();
$node->title   = 'Webform submission: '$submission->sid;
$node->body    = 'test body';
$node->type    = 'story';
$node->created = time();
$node->status  = 1; //published.
$node->promote = 1; 
$node->sticky  = 0;
$node->format  = 1;
$node->uid     = 1; // author!

if ($node = node_submit($node)) {
  node_save($node);
}
else {
  // error creating node. 
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:57:41.863

您需要使用网络表单有什么特别的原因吗？通过为此创建特定的内容类型并授予匿名用户提交的权限，您似乎可以拥有更多的控制权和更少的问题。然后，您可以获得一个模块，该模块提供字段级权限并拒绝访问您不希望他们接触的字段（确保它们不是必需的）。

我错过了你需要的东西吗？

# php - jquery伪造ajax请求

> ID：10833056
> 
> 赞同：1
> 
> 时间：2012-05-31T11:51:54.650
> 
> 标签：php, javascript, jquery, ajax, codeigniter

为了获得更好的文件上传体验，我伪造了一个 ajax 请求，即用户单击提交，表单消失，出现加载图形，并且在查看几秒钟后，页面刷新以显示他们的 newley 上传图像。

但是，由于在我的文件上传中添加 jquery 总是返回相同的错误，

您没有选择要上传的文件。为什么是这样？这是我的表格

```
<div id="picture_upload">
        <div class="loading"></div>
        <?php echo form_open_multipart('my_profile/do_upload'); ?>

        <strong>Choose pictures to upload</strong>
        <p>Max file size: 1MB .jpeg, .gif, .png or .bmp</p>
        <input type="file" name="userfile" />
    </div>
    <!--<div id="webcam_upload">
        <p>Hello</p>
    </div>-->
</div>
<div id="bottom"><table><tr><td><input type="submit" id="submit_upload" value="Upload a picture" class="button green rounded_5 small" /></td><td>or</td><td><a href="#" id="close_modal" />Cancel</a></td></tr></table></div> 
```

还有我的js，

```
$("#submit_upload").click(function(e){
    //alert("here");
    setTimeout(function() { $("#picture_upload form").submit();}, 6000);
    $("#picture_upload").children().hide();
    $(".loading").show();
    setTimeout( function() {  location=$("#picture_upload form").attr('action') }, 1500 );
    return false;
}); 
```

上传功能只是您从 codeigniter 获得的基本上传功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:39:13.927

出于安全原因，您不能使用 XmlHttpRequest 对象 (AJAX) 上传文件。

替代解决方案是：

*   在 iframe 中加载您的文件提交表单并使用 JS 发布
*   使用 Flash 文件上传器
*   使用 HTML5

这是一个看起来很流行的 jQuery 插件：[http ://www.uploadify.com/](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:48:41.893

像这样试试

```
$("#submit_upload").click(function(e){
    //alert("here");
    setTimeout(function() { $("#picture_upload form").submit();}, 6000);
    $("#picture_upload").children().hide();
    $(".loading").show();
    return false;
}); 
```

然后使用 php 重定向/重新加载页面

```
header('Location: URL_TO_REDIRECT'); //put it in your end of upload script in php file 
```

**如果您不想从 PHP 重定向，则可以使用**

*   jQuery 表单插件[http://jquery.malsup.com/form/#file-upload](http://jquery.malsup.com/form/#file-upload)

*   SWFUpload [http://demo.swfupload.org/v220/index.htm](http://demo.swfupload.org/v220/index.htm)

*   （有许多用于上传文件的库。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:15:16.943

如果您想学习如何使用 jQuery 构建自己的上传，这里有一篇很好的文章 - [http://www.peachpit.com/articles/article.aspx?p=1766159](http://www.peachpit.com/articles/article.aspx?p=1766159)

# jar - 将 EXE 作为 JAR 文件运行？

> ID：10833057
> 
> 赞同：-2
> 
> 时间：2012-05-31T11:52:14.397
> 
> 标签：jar, exe, minecraft

> **可能重复：**
> [如何将 JAR 文件转换为 EXE 文件？](https://stackoverflow.com/questions/2272107/how-can-i-convert-a-jar-file-to-an-exe-file)

对不起，如果我听起来像个新手......但我对 Java 编码的东西很陌生。

有什么方法可以将 exe 文件转换为可执行的 JAR 文件？与 Minecraft 一样，启动器也有几个版本，有些是 JAR，有些是 EXE。请告诉我是否有任何方法可以将 exe 作为 JAR 文件运行，例如 GTA III 的 exe 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:02:28.650

带有`.exe`扩展名的文件仅表示该文件是可执行映像，通常符合 Portable Executable 标准。它们由编译后的代码组成，这些代码是操作系统和处理器的原生代码，采用处理器可以解释的汇编指令的形式。它们最初可能是用几乎任何语言编写的——C、C#、C++、VB6、VB.NET、Delphi、x86 asm、Java 等。出于所有意图和目的（不包括 .NET），您不能将它们变成原始代码。

JAR 文件是包含已编译 Java 对象的特殊档案。它们的工作方式与可执行文件类似，只是它们由 Java 虚拟机 (JVM) 而不是操作系统本身处理。

没有办法将编译后的本机代码从可执行文件转换为 JAR。它们是完全不同的概念。

# ruby-on-rails - 收到未定义的方法“生成器”错误

> ID：10833059
> 
> 赞同：0
> 
> 时间：2012-05-31T11:52:18.383
> 
> 标签：ruby-on-rails, ruby, gem

当我运行 RailsTorrent（[https://github.com/raskhadafi/railstorrent](https://github.com/raskhadafi/railstorrent)）时，出现以下错误：

```
[root@sookcha railstorrent]# rails s
/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `generators' for #<Rails::Railtie::Configuration:0x000000024eef38> (NoMethodError)
from /usr/local/lib/ruby/gems/1.9.1/gems/inherited_resources-1.1.2/lib/inherited_resources.rb:24:in `<class:Railtie>'
from /usr/local/lib/ruby/gems/1.9.1/gems/inherited_resources-1.1.2/lib/inherited_resources.rb:22:in `<module:InheritedResources>'
from /usr/local/lib/ruby/gems/1.9.1/gems/inherited_resources-1.1.2/lib/inherited_resources.rb:3:in `<top (required)>'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
from /root/railstorrent/config/application.rb:7:in `<top (required)>'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:53:in `block in <top (required)>'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我在我的 CentOS 6.2 系统上运行 Ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]，Rails 3.2.3。

我已经搜索了错误代码，但我找不到它。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:47:40.547

您的`inherited_resources`(1.1.2) 版本与 Rails 3.2.3 不兼容，请尝试更新`inherited_resources`到 1.3.1。Rails 3.1 被弃用`config.generators`，`config.app_generators`因此在 Rails 3.2 中被抛弃

# parsing - 使用 Powershell 解析二进制文件

> ID：10833060
> 
> 赞同：4
> 
> 时间：2012-05-31T11:52:18.707
> 
> 标签：parsing, powershell, binary

我正在尝试搜索二进制文件。通过十六进制编辑器查看文件后，我发现了整个文件的模式。你可以在这里看到它们。如您所见，它们位于文件列表之前和之后。

/% ......C:\Users\\Desktop\test1.pdf..9

/% ......C:\Users\\Desktop\testtesttesttest.pdf..9

我想做的是找到..9（HEX = 000039），然后“备份”直到我找到，/％......（十六进制= 2F25A01C1000000000），然后向前移动x个字节，这样我就可以获取完整路径。我现在拥有的代码如下：

```
$file = 'C:\Users\<username>\Desktop\bc03160ee1a59fc1.automaticDestinations-ms'
$begin_pattern = '2F25A01C1000000000' #/% ......
$end_pattern = '000039' #..9
$prevBytes = '8'
$bytes = [string]::join('', (gc $file -en byte | % {'{0:x2}' -f $_}))
[regex]::matches($bytes, $end_pattern) |
% {
$i = $_.index - $prevBytes * 2
[string]::join('', $bytes[$i..($i + $prevBytes * 2 - 1)])
} 
```

一些输出大致翻译为：

ffff2e0000002f000000300000003b0000003200000033000000340000003500000036000000370000003800 655c4465736b746f705c466f72656e7369635f426f6f6b735c5b656e5d646566745f6d616e75616c2e706466 0000000000000000000000000000010000000a00000000000000000020410a000000000000000a00000000

ÿÿ./0;2345678?e\Desktop\deft_manual.pdf?

?sic 科学、计算机和互联网.pdf

?ware\Desktop\Dive Into Python 3.pdf？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T07:38:42.453

您可以使用 PowerShell 中的[System.IO.BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)类。

```
$path = "<yourPathToTheBinaryFile>"

$binaryReader = New-Object System.IO.BinaryReader([System.IO.File]::Open($path, [System.IO.FileMode]::Open, [System.IO.FileAccess]::Read, [System.IO.FileShare]::ReadWrite)) 
```

然后您可以访问所有方法，例如：

```
$binaryReader.BaseStream.Seek($pos, [System.IO.SeekOrigin]::Begin) 
```

AFAIK，如果不读取字节（使用 ReadBytes）并自己实现搜索，就没有简单的方法来“找到”模式。

# z3 - 带减法的 Z3 ast_to_string() API

> ID：10833070
> 
> 赞同：0
> 
> 时间：2012-05-31T11:52:34.713
> 
> 标签：z3

问题很简单。我使用 C API 接口在 Z3 中断言以下语句。

```
(assert(>= (xA 1) (- (yB 0) period)))) 
```

现在有时，我需要检查输入了哪些断言以及 SatSolver 中的结果。我通过使用 ast_to_string() API 生成一个文本文件来做到这一点。此 API 将我上面的语句返回为 -

```
(assert(>= (xA 1) (+ (yB 0) (* -1 period)))) 
```

当我将此文件提供给 Sat Solver 时，它会向我抱怨错误 -

> （错误“错误：第 150 行第 56 列：找不到 id -1。”）

因此，我必须手动修复代码中的所有 -1 并运行 sat 求解器。有没有其他方法可以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:21:07.213

记得设置：

```
Z3_set_ast_print_mode(ctx,Z3_PRINT_SMTLIB2_COMPLIANT); 
```

在使用之前`ast_to_string()`，以便输出公式符合 SMTLIB 2.0 格式。

# html - 内联 CSS 可以应用于嵌套在样式元素中的子元素吗？

> ID：10833075
> 
> 赞同：57
> 
> 时间：2012-05-31T11:52:57.760
> 
> 标签：html, css

简而言之就是这个问题：

*   我想将样式应用于表中的`vertical-align: top`每个，*而不是*手动将样式应用于每一行。`<tr>`
**   我必须使用内联 CSS，因为我在 wiki 上，所以我无法编辑外部样式表，或编辑`<head>`嵌入样式。*   当我将样式属性添加到`<table>`标签时，似乎此样式未传递给其子元素。（我可以看到这几乎总是一件好事。）*   我不能使用`<style><!--...--></style>`，因为这不是 MediaWiki 页面上允许的标签。*

 ***我应该辞职去添加`style="vertical-align: top`每个`<tr>`，还是仍然是我忽略的解决方案？**

编辑：删除了一堆背景信息，以便将问题限制在问题标题所暗示的范围内。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-31T11:59:01.490

> 内联 CSS 可以应用于嵌套在样式元素中的子元素吗？

不是直接的。

间接地，仅当子元素已`that-property: inherit`在其现有样式表中设置时。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-04T00:22:26.553

我从不同的上下文中对这个问题感兴趣，特别是对 html 电子邮件的样式。由于无法将 css 添加到 gmail 中的电子邮件头部（信不信由你），所以一致地应用电子邮件样式的唯一方法是内联。

这个问题的答案是否定的，在我知道的这个或任何其他情况下，没有可接受的方法来规避这个问题。当处理这样的问题时，考虑一下您尝试应用的样式应该是“例外”还是“规则”会很有帮助，即如果 90% 的 td 是垂直对齐的顶部，则应该只应用风格作为一项规则，并通过并纠正 10%。执行此操作时，清楚地指定例外情况非常重要，最好使用引用“规则”的注释块。

有关支持什么 css 以及这非常有用的完整参考：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-05-31T12:03:12.053

我不熟悉 Wiki，但您可以创建一个类并将样式应用于该类中的所有子节点吗？

所以 ...

```
<style type="text/CSS"><!-- SomeClass tr { vertical-align: top } --></style>

<table class="SomeClass">

</table> 
```

值得一试？

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2012-05-31T12:02:24.637

使用以下：

```
<style type="text/css">

table tr td {
   vertical-align:top;
}

</style> 
```*

# spring - 如何从 Spring Security 中的登录页面访问自定义参数？

> ID：10833078
> 
> 赞同：0
> 
> 时间：2012-05-31T11:53:10.313
> 
> 标签：spring, spring-security, login-page

我的 login.jsp 上有一个自定义字段以及“ `j_username`”和“ `j_password`”，我需要对用户进行身份验证。我正在使用 CustomUsernamePasswordAuthenticationFilter 来访问自定义字段，如下所示。

```
public class CustomUsernamePasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {
    @Override
    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) {
        String myCustomField= request.getParameter("myCustomField");
        request.getSession().setAttribute("CUSTOM_FIELD", myCustomField);

        return super.attemptAuthentication(request, response); 
    }
} 
```

我尝试在 UserDetailsS​​ervice 类的方法中访问会话，`loadByUsername`但出现错误。这是我的自定义 UserDetailsS​​ervice 的代码。

```
public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException,  DataAccessException {

         ServletRequestAttributes attr = (ServletRequestAttributes)RequestContextHolder.currentRequestAttributes();
         HttpSession session = attr.getRequest().getSession();
        User userObject = dbObject.retrieveUser(userName,myCustomParameter)
// code here to retrieve my user from the DB using the userName and myCustomParameter that was retrieved from login.jsp and put in the session. Get the custom parameter from the session here.

         if (userObject == null)
              throw new UsernameNotFoundException("user not found");

         return new AuthenticationUserDetails(userObject);
    } 
```

有什么方法可以访问此自定义参数进行身份验证？通过会话发送它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:12:33.930

进行身份验证后不会创建会话。因此，在您调用 attemptAuthentication 之后，可能会创建一个新的经过身份验证的会话

这是您正在实现的 Abstract 类的 spring 文档

[http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html#successfulAuthentication%28javax.servlet.http.HttpServletRequest,%20javax .servlet.http.HttpServletResponse,%20org.springframework.security.core.Authentication%29](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html#successfulAuthentication%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.security.core.Authentication%29)

在调用 loadByUsername 时，您可能会丢失会话属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T08:56:52.093

我遇到了确切的问题。

问题似乎是 RequestAttributes 没有绑定到当前线程。为了让它工作，我必须明确地将它绑定到当前线程。

在`CustomUsernamePasswordAuthenticationFilter`, 在声明之后 `request.getSession().setAttribute("CUSTOM_FIELD", myCustomField);`

添加： `RequestContextHolder.setRequestAttributes(new ServletRequestAttributes(request));`

这对我有用。

# xcode - 无法将配置文件导入 Xcode

> ID：10833079
> 
> 赞同：0
> 
> 时间：2012-05-31T11:53:11.977
> 
> 标签：xcode, ios5, provisioning-profile

我是iOS开发的初学者。我正在帮助为内部 iPad 应用程序存档 .ipa 文件。我不是管理员/代理，所以我收到了一个证书文件和两个配置文件。我使用钥匙串访问安装​​了证书，这很成功。我可以看到证书也出现在了主办方的 TEAMS 组中。

但我未能导入这两个配置文件。我将它们拖到 Xcode 图标上，什么也没发生。我单击了管理器上的“导入”按钮并选择了配置文件，没有任何反应……有人知道为什么吗？我希望至少有一些弹出警告消息让我知道出了什么问题，但我只是看不到添加到我的列表中的配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T04:24:36.197

好的，我想通了，希望对其他人有帮助。我的公司将 Exchange Server 用于电子邮件，它似乎会以某种方式影响配置文件。所以我让管理员在发送之前压缩配置文件，问题就解决了。

# xcode - Xcode 4.3 在断点后离开调试

> ID：10833080
> 
> 赞同：0
> 
> 时间：2012-05-31T11:53:13.810
> 
> 标签：xcode, xcode4, xcode4.3

我知道来自：[Xcode 4 快捷方式](http://cloud.github.com/downloads/Machx/Xcode-Keyboard-Shortcuts/Xcode_Shortcuts.pdf)的快捷方式，但是当我尝试在断点后退出并且我按 F8 时，进入某个线程。我不想那样做。在我看到我想要的信息后，我想在模拟器或设备上返回我的应用程序，并且不想在任何地方停止应用程序。有没有办法在断点后完全退出调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:33:30.457

退出会带您退出当前所在的函数，并将您移至调用您所在函数的函数。退出不会恢复程序执行。单击继续按钮以恢复程序执行。Continue 按钮位于 Xcode 调试区域中步骤按钮的左侧。

# c# - C# DataGridView - 如何启用垂直滚动条

> ID：10833087
> 
> 赞同：8
> 
> 时间：2012-05-31T11:53:44.967
> 
> 标签：c#, .net, datagridview

DataGridView (Form) 包含足够的行以显示垂直滚动条。但它没有启用。移动的 Silder 丢失，Button Up 和 Button Down 显示为灰色。

=> 有一个垂直滚动条但未启用。

我试过：

1.  填充 DataGridView 后，控件将更新。
2.  调整整个面板的大小。
3.  冻结属性为假。
4.  我在一个单元格中单击我可以使用向上和向下键滚动，但滚动条将不会启用。

如果我在运行时调整控件的大小（DataGridView 在拆分面板上），则可以使用滚动条，例如它现在已启用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:01:57.320

试试这个：

**1.**您的列之一可能已冻结属性设置为`True`。

这应该`False`适用于所有列。

**2.** 设置问题列的AutoSizeMode为AllCells

**3.** mygrid.DockStyle = DockStyle.Fill

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:07:51.600

设置 datagridview 的 ScrollBar 属性为 Both。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T14:13:00.917

可以在此处找到相同的问题以及一些解决方法： [DataGridView 垂直滚动条未正确更新（表单错误？）](https://stackoverflow.com/questions/8632375/datagridview-vertical-scrollbar-not-updating-properly-forms-bug)
这似乎是一个出现的 winforms 错误，例如，当 DGV 放置在选项卡控件的选项卡内时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-17T02:29:05.943

1.  你应该停靠填充你的datagridview到面板
2.  如果您有一些冻结的行，请确保在完成将数据导入 gridview 后设置这些行

如果您之前设置了冻结行，则添加的行将采用第一行的默认样式，并且您的所有 gridview 行都将具有选项`row.frozen = true`。这就是垂直滚动不会出现的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T22:28:09.650

水平滚动条也有类似的问题。在网格上做`PerformLayout`并没有解决它。事实证明，我的问题是表单被禁用。我们有一个基础设施，它在加载时禁用表单，异步加载一堆东西，最后启用表单。出于某种原因，这足以让滚动条在启用表单时保持禁用状态（就像在您的场景中在启用滚动条时调整表单大小一样）。所以对我来说，解决方案是在启用表单**后**`PerformLayout`调用网格。

# delphi - TRibbon 随机重建 TRibbonGroups

> ID：10833097
> 
> 赞同：2
> 
> 时间：2012-05-31T11:54:27.177
> 
> 标签：delphi, delphi-xe2, flicker, ribbon-control

我注意到在我的应用程序中，TRIbbon 在看似随机（但可重现）的时间闪烁并重建自身。随机，我的意思是我看不到连接。

*   视窗 7 x64
*   德尔福，RAD Studio XE2，更新 4
*   主窗体上的 Rubbon，多个选项卡（没关系）
*   选项卡上的 3 个 TRibbonGroups 我正在重现该问题：首先只有 4 个普通按钮。第二个有 2 个按钮，一个分离器，然后是 6 个按钮。最后一个只有 3 个按钮。
*   添加具有此操作的按钮：

```
procedure TParentForm.Button1Click(Sender: TObject);
begin
  Screen.HintFont:=Font;
end;
```

任何有关解决方法的建议将不胜感激。

# java - Google App Engine：后端今天没有响应！有什么问题吗？

> ID：10833098
> 
> 赞同：0
> 
> 时间：2012-05-31T11:54:27.020
> 
> 标签：java, google-app-engine, backend

错误：服务器错误

您请求的服务尚不可用。请在 30 秒后重试

这是今天早上的故事！15 小时前，它运行良好。突然间，日志停止响应。所以，我想我会稍后检查。现在，我一次又一次地看到同​​样的错误。我正在解决生产问题，我需要解决这个问题！有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:20:03.287

你的支付是活跃的吗？如果没有 - 每天只有 9 小时的免费后端。也许你都用过？

在您的应用程序中使用管理控制台检查它。

# ios - 2012 年支持 iOS 3.x？

> ID：10833102
> 
> 赞同：1
> 
> 时间：2012-05-31T11:54:46.743
> 
> 标签：ios, ios5, ios-3.x

我正在开发一个适用于 iOS 5 的应用程序，Xcode 似乎自动显示“iOS 4.3 或更新版本”。我还能（在 2012 年！）创建适用于**iOS 3.x 的应用程序吗？**

很多人都拥有 iPhone 3G 甚至最初的 iPhone，而且这些都太旧了，在它们上运行比 3.x 更新的 iOS 版本是不明智的。这些人将被排除在获取应用程序之外，这是一个遗憾。

如果我的应用程序不使用带有 iOS 3.1.3 的 iPhone 3G 不具备的任何功能，我可以发布应用程序以要求“iOS 3.1 或更新版本”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T11:57:38.237

是的你可以。但你当然不必。根据我看到的使用统计数据，至少没有使用 iOS 4.0 的人不到 3%。我不会担心太多。

“我可以发布应用程序以要求“iOS 3.1 或更高版本”吗？” 是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:59:41.127

是的你可以。

在 Xcode 中，您可以将最低 iOS 版本设置为 3.x。可以肯定的是，弱链接任何当时不存在的库，并在适当的地方检查方法支持。（使用`respondsToSelector()`等）

有两点需要注意：

1.  iOS 5 的采用非常普遍。

2.  请注意，Xcode 默认只为 armv7 编译，所以你必须做额外的工作来支持旧硬件，不管它们运行的​​ iOS 版本是什么。这就像更改项目设置中的设置一样简单，但它显示了 Apple 对支持此类旧设备的想法。你在技术上可以。但是不要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T11:59:42.270

如果我是你，我不会浪费时间为旧版本或平台编码。如您所知，我们都知道每一行代码都是宝贵的。不过目前市场已经被iOS4.3+占领了。

如果你真的认为你应该支持所有的电话，那么，如果还不算晚！创建具有平台独立性等优点的基于 Web 的应用程序。尝试，

1.  [煎茶](http://www.sencha.com/)
2.  [jQuery 移动](http://jquerymobile.com/)

# grep - 关于'grep -f'：将模式与文件匹配

> ID：10833105
> 
> 赞同：8
> 
> 时间：2012-05-31T11:55:09.640
> 
> 标签：grep

我正在使用该`grep -f`函数从文件中提取与特定模式匹配的行。假设我的模式文件是`pattern.txt`，如下所示。

```
1
2
3
4
5 
```

我匹配这个模式的文件是`file.txt`，

```
1::anv
2::tyr
3::yui
4::fng
5::gdg
6::ere
7::rer
8::3rr
9::gty 
```

现在，当我执行 grep -f pattern.txt file.txt 时，我得到了这个 ->

```
1::anv
2::tyr
3::yui
4::fng
5::gdg
8::3rr 
```

上面输出中的最后一行导致了我的问题。如何修改此 grep 命令以获得如下输出（显示正确的对应关系）？

```
1::anv
2::tyr
3::yui
4::fng
5::gdg 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T11:56:59.847

在您的模式之前添加`^`，以便`grep`匹配以您的模式开头的行。如果您的模式实际上是一组数字，则您不需要模式列表。只需使用`^[1-5]:`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T12:01:18.560

嗯，有很多可能的解决方案。您`grep`要查找所有包含 3 的行，而 '8::3rr' 行实际上包含 3。因此您需要更具体地查找您要查找的内容。

例如，您可以将模式更改为“1:”、“2:”等，以仅匹配后跟冒号的数字。或者您可以将它们更改为“^1”、“^2”等，以仅匹配行首的数字。这取决于您的数据，但可能两者都需要，因此您对“1:”的搜索与“21:”不匹配，而对“^5”的搜索与“53:”不匹配。在这种情况下，您的模式文件将如下所示：

```
^1:
^2:
^3:
^4:
^5: 
```

# python - “图像包含错误”，尝试使用谷歌应用引擎创建和显示图像

> ID：10833111
> 
> 赞同：0
> 
> 时间：2012-05-31T11:55:38.877
> 
> 标签：python, image, google-app-engine, google-cloud-datastore, python-imaging-library

大家好，一般的想法是创建一个类似星系的地图。当我尝试显示生成的图像时遇到问题。我使用 Python Image 库来创建图像并将其存储在数据存储中。

当我尝试加载图像时，日志控制台上没有错误，浏览器上也没有图像。当我复制/粘贴图像链接（包括数据存储密钥）时，出现黑屏和以下消息：

> 图像“view-source:/localhost:8080/img?img_id=ag5kZXZ-c3BhY2VzaW0xMnINCxIHTWFpbk1hcBgeDA”无法显示，因为它包含错误。

火狐错误控制台：

> 错误：图像损坏或截断：/localhost:8080/img?img_id=ag5kZXZ-c3BhY2VzaW0xMnINCxIHTWFpbk1hcBgeDA

```
import cgi
import datetime
import urllib
import webapp2
import jinja2
import os
import math
import sys

from google.appengine.ext import db
from google.appengine.api import users
from PIL import Image

#SNIP

#class to define the map entity
class MainMap(db.Model):
  defaultmap = db.BlobProperty(default=None)

#SNIP      

class Generator(webapp2.RequestHandler):
  def post(self):

        #SNIP

        test = Image.new("RGBA",(100, 100))
        dMap=MainMap()
        dMap.defaultmap = db.Blob(str(test))
        dMap.put()

        #SNIP

        result = db.GqlQuery("SELECT * FROM MainMap LIMIT 1").fetch(1)

        if result:
          print"item found<br>" #debug info

          if result[0].defaultmap:
              print"defaultmap found<br>" #debug info
              string = "<div><img src='/img?img_id=" + str(result[0].key()) + "' width='100' height='100'></img>"
              print string

        else:
            print"nothing found<br>"

    else:
        self.redirect('/?=error')
    self.redirect('/')

class Image_load(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("started Image load")
        defaultmap = db.get(self.request.get("img_id"))
        if defaultmap.defaultmap:
            try:
              self.response.headers['Content-Type'] = "image/png"
              self.response.out.write(defaultmap.defaultmap)
              self.response.out.write("Image found")
            except:
              print "Unexpected error:", sys.exc_info()[0]
        else:
            self.response.out.write("No image")

#SNIP    

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/generator', Generator),
                               ('/img', Image_load)],
                              debug=True) 
```

浏览器显示“找到的项目”和“找到的默认地图”字符串和损坏的图像链接异常处理没有捕获任何错误

感谢您的帮助问候伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:51:36.327

PIL Image 对象到字符串的转换不是图像：

```
>>> from PIL import Image
>>> i = Image.new("RGBA", (100, 100))
>>> str(i)
'<PIL.Image.Image image mode=RGBA size=100x100 at 0x24C5DA0>' 
```

相反，您需要使用该`save()`函数并将其写入文件。在应用引擎的情况下，您使用字符串缓冲区：

```
>>> import cStringIO
>>> s = cStringIO.StringIO()
>>> i.save(s, 'PNG')
>>> dMap.defaultmap = db.Blob(s.getvalue()) 
```

对于 ndb，当 dMap.defaultmap 是`ndb.BlobProperty`：

```
>>> import cStringIO
>>> s = cStringIO.StringIO()
>>> i.save(s, 'PNG')
>>> dMap.defaultmap = s.getvalue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:50:38.957

我怀疑你的图像是一个字符串

```
>>> test = Image.new("RGBA",(100, 100))
>>> test
<Image.Image image mode=RGBA size=100x100 at 0x1005EC878>
>>> str(test)
'<Image.Image image mode=RGBA size=100x100 at 0x1005EC878>' 
```

Image 有一个 save 方法，可以将其写入类似文件的对象。

我认为以下（未经测试）可能适用于 blobstore 如果`defaultmap = blobstore.BlobReferenceProperty()`

```
from google.appengine.api import files
file_name = files.blobstore.create(mime_type='image/png')
with files.open(file_name, 'a') as f:
    test.save(f, format='PNG')
files.finalize(file_name)
blob_key = files.blobstore.get_blob_key(file_name) 
```

或者你可以例如实例化一个 StringIO 并保存到它，比如

```
from StringIO import StringIO
tmp = StringIO()
test.save(tmp, format='PNG')
dMap.defaultmap = db.Blob(tmp.getvalue()) 
```

# ios - 将 Ruby 代码从苹果文档 (iPhoneOTAConfiguration) 转换为 Java

> ID：10833113
> 
> 赞同：3
> 
> 时间：2012-05-31T11:55:49.127
> 
> 标签：ios, ruby, jakarta-ee, encryption, mdm

我正在为 iOS MDM 工作 Web 应用程序。在这种情况下，mobileconfig 中的有效负载将在发送到设备之前进行加密。Apple 文档 givex 以下代码为例，它在 Ruby 中并且工作正常。但是，我无法在 Java 中实现相同的功能。

```
OpenSSL::PKCS7.encrypt(p7sign.certificates,
payload, OpenSSL::Cipher::Cipher::new("des-ede3-cbc"),
OpenSSL::PKCS7::BINARY) 
```

我使用的Java代码如下：

```
 PublicKey publicKey = x509cert.getPublicKey();
    //publinKey is key extracted from iOS device response stream

    Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    clearText = payloadContents.getBytes();
    //payloadContents are contents to be encrypyted
    cipherText = cipher.doFinal(clearText); 
```

执行后的错误是

java.security.InvalidKeyException：没有安装的提供程序支持此密钥：javax.crypto.Cipher.a(DashoA13*..) 的 sun.security.rsa.RSAPublicKeyImpl javax.crypto.Cipher.init(DashoA13*..) .crypto.Cipher.init(DashoA13*..)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:39:30.557

`PKCS7.encrypt`[生成CMS RFC](https://www.rfc-editor.org/rfc/rfc5652#section-6.1)中指定的 EnvelopedData 。这不仅仅是简单地加密内容，它是*涉及*加密的 ASN.1 数据结构的规范。

要在 Java 中生成或解密类似的东西，我建议使用 Bouncy Castle 来完成这项工作，相关类的 Javadocs 可以在[这里](http://www.bouncycastle.org/docs/pkixdocs1.5on/index.html)找到- 特别注意[CMSEnvelopedData](http://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/cms/CMSEnvelopedData.html)和朋友。

您在 Ruby 调用中传递的证书用于创建 RecipientInfo 结构，使用[CMSEnvelopedDataGenerator](http://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/cms/CMSEnvelopedDataGenerator.html)类可以进行类似的操作。

# java - 在java中用空格替换字符之间的值

> ID：10833116
> 
> 赞同：-1
> 
> 时间：2012-05-31T11:56:00.613
> 
> 标签：java, regex

我有一个这样的 XML，

```
<order_details>
   <order_count>#ordercount#</order_count>
   <value_date>#valuedate#</value_date>
   <report_date>2012-04-25</report_date>
   <from_facility>#fromfacility#</from_facility>
</order_details> 
```

我想用空格替换所有以 # 开头和结尾的值。

上述 XML 的输出应该是，

```
<order_details>
   <order_count></order_count>
   <value_date></value_date>
   <report_date>2012-04-25</report_date>
   <from_facility></from_facility>
</order_details> 
```

我尝试使用`string.replaceAll("<*>#.*#</*>", "")`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:58:19.027

这应该有效：

```
string.replaceAll(">#.*?#</", "></") 
```

默认情况下，量词`*`, `+`, `?`, `{n}`, `{n,}`, `{n,m}`是*贪婪*的，即它将尝试与正在重复的子模式匹配的尽可能长的字符串。在量词之后添加`?`，以上面的正则表达式为例：`.*?`，将使它变得*惰性*，即它将尝试与正在重复的子模式匹配的最短字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:58:21.157

利用`string.replaceAll("#.*?#", "")`

# java - 从 CXF 2.5.3 移动到 2.6.0 后无法创建 SSL 连接

> ID：10833120
> 
> 赞同：1
> 
> 时间：2012-05-31T11:56:29.973
> 
> 标签：java, web-services, apache, ssl, cxf

当我移至**CXF 2.6.0**时，我总是收到此错误：

```
PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:
unable to find valid certification path to requested target 
```

在 CXF 2.5.2 和 2.5.3 上一切正常，也可以正常工作。

在这种情况下，2.5.3 和 2.6.0 版本之间可能有什么不同。我使用 Java API 而不是 Spring。

感谢您的帮助！

# sql - SQL 字符串的 Excel 语法

> ID：10833121
> 
> 赞同：1
> 
> 时间：2012-05-31T11:56:37.677
> 
> 标签：sql, excel

我需要在引用另一个单元格的单元格中编写 SQL 插入语句。这样做的正确语法是什么？需要引用另一个单元格的部分在下面写为 {value of cell} ：

```
INSERT INTO map.UserSurveys (surveyId,userId,activeQuestions) VALUES (50, {value of cell}, 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:00:50.977

如果值是一个数字：

```
="INSERT INTO map.UserSurveys (surveyId,userId,activeQuestions) VALUES (50, " & A1 & ", 1)" 
```

如果值是字符串：

```
="INSERT INTO map.UserSurveys (surveyId,userId,activeQuestions) VALUES (50, '" & A1 & "', 1)" 
```

* * *

在这两种情况下都替换`A1`为您想要的单元格，瞧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:06:37.523

如果您必须在 A1 周围加上字符串引号

```
="INSERT INTO map.UserSurveys (surveyId,userId,activeQuestions) VALUES (50, '" & A1 & "', 1)" 
```

# windows - 从 nullsoft scriptable install system(nsis) 执行命令提示符命令。

> ID：10833122
> 
> 赞同：1
> 
> 时间：2012-05-31T11:56:39.157
> 
> 标签：windows, installation, nsis

我想使用 nsis 制作安装程序，但我找不到显示如何使用 nsis 对某些文件执行命令提示符命令的示例。有可能还是我完全偏离了轨道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:20:41.080

您想运行外部命令，例如第三方安装程序或来自您自己的 NSIS 安装程序的系统命令？

我认为您正在寻找[ExecWait](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.1.4)命令。

NSIS wiki的[嵌入其他安装程序](http://nsis.sourceforge.net/Embedding_other_installers)部分也可能很有趣。

# java - 正则表达式用 HTML 锚点替换关键字，避免嵌套锚点

> ID：10833129
> 
> 赞同：-4
> 
> 时间：2012-05-31T11:57:04.230
> 
> 标签：java, php, html, regex, anchor

仅替换不在锚点内的关键字：

```
// replace
... keyword ...  -> ... <a href="url">keyword</a> ...

// not replace
...<a href=""> ... keyword ... </a>...  -> ...<a href=""> ... keyword ... </a>... 
```

请提供一个合适的模式来实现这一点。

注意：我正在处理字符串类型变量，而不是 HTML 文档！

* * *

**编辑**：好的，好的。我将使用 HTML 解析器，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:59:27.897

正则表达式不能可靠地用于做这类事情，因为 HTML 不是[正则语言](http://en.wikipedia.org/wiki/Regular_language)。如果使用[JSoup 之](http://jsoup.org/)类的解析器将字符串变量处理成 DOM，然后将结果序列化回字符串，就可以获得可靠的结果。

# php - Facebook 访问令牌 - 服务器端身份验证

> ID：10833134
> 
> 赞同：7
> 
> 时间：2012-05-31T11:57:33.523
> 
> 标签：php, facebook, authentication, oauth-2.0, access-token

您好，我正在尝试使用 facebook 服务器端身份验证来获取访问令牌，但不断向我抛出错误。

我正在使用波纹管：

```
$app_id = "YOUR_APP_ID";
   $app_secret = "YOUR_APP_SECRET";
   $my_url = "YOUR_URL";

   session_start();
   $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

   if($_REQUEST['state'] == $_SESSION['state']) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url));
     echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   } 
```

App ID 和 APP Secret 已被删除，所以不要担心那部分。我收到有关 get_file_contents 超时的错误。

> [function.file-get-contents]：无法打开流：连接超时

是否有另一种或更好的方式来获取访问令牌？

贝娄是我尝试过的版本，包括 cURL 想法：

```
function get_data_cURL($url)
{
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}

function getAccessToken(){
    $app_id = FB_APP_ID;
    $app_secret = FB_SECRET_ID;
    $canvas_URL = FB_CANVAS_URL;

    session_start();
    $code = $_REQUEST["code"];

    if(empty($code)) {
      $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
      $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($canvas_URL) . "&state="
        . $_SESSION['state'];

      echo("<script> top.location.href='" . $dialog_url . "'</script>");
    }

    if($_REQUEST['state'] == $_SESSION['state']) {
      $token_url = "https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id . "&redirect_uri=" . urlencode($canvas_URL)
        . "&client_secret=" . $app_secret . "&code=" . $code;

     $returned_content = get_data_cURL($token_url);
    echo'Well Done! - '.$returned_content;

    }
    else {
      echo("The state does not match. You may be a victim of CSRF.");
    }
} 
```

*细节：*

应用程序设置 - 画布 URL： http: [//www.apps.elistone.co.uk/DrawMyFriend/](http://www.apps.elistone.co.uk/DrawMyFriend/)

```
FB_APP_ID = The Facebook App ID
FB_SECRET_ID = The Facebook Secret ID
FB_CANVAS_URL = http://www.apps.elistone.co.uk/DrawMyFriend/ 
```

即使进行了此更新，我仍然会收到此错误：

*旧错误*

> 做得好！- {"error":{"message":"验证验证码错误。","type":"OAuthException","code":100}}

**新错误**

这似乎是由于重定向删除了状态代码引起的。

> 状态不匹配。你可能是 CSRF 的受害者。- 193c791ddd71c3fd84d411db5554c315（州代码）

我还尝试通过更改绕过 CSRF 保护：

```
if($_REQUEST['state'] == $_SESSION['state']) 
```

到：

```
 if(!empty($code)) 
```

但这仍然给出了旧的错误问题，我听说它是​​由重定向链接中的某些东西引起的，但我不知道如何解决它。

**问题解决了**

经过一段时间的尝试后，我使用以下 PHP SDK 来获取用户访问令牌：

```
$app_id = FB_APP_ID;
$app_secret = FB_SECRET_ID;
$canvas_URL = FB_PAGE_URL;
$code = $_REQUEST["code"];

if(empty($code)) {
  $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
  $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
    . $app_id . "&redirect_uri=" . $canvas_URL . "&state="
    . $_SESSION['state'];

  echo("<script> top.location.href='" . $dialog_url . "'</script>");
}
if($_REQUEST['state'] == $_SESSION['state']) {
$facebook->api('oauth/access_token', array(
    'client_id'     => FB_APP_ID,
    'client_secret' => FB_SECRET_ID,
    'type'          => 'client_cred',
    'code'          => $code,
));
$token = $facebook->getAccessToken();
echo$token;
} 
```

我现在要把它变成某种功能。非常感谢大家的时间和帮助。

希望这对未来有需要的人有所帮助（除非 Facebook 突然改变一切）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T06:25:24.037

我建议您使用[PHP SDK 库](https://github.com/facebook/facebook-php-sdk)与 Facebook API 进行通信。并且简单地使用`getAccessToken()`or`getAccessTokenFromCode()`方法。

**更新**

要检索用户访问令牌，您必须在获取访问令牌之前发送 oauth 请求。答案更新中的详细信息：

```
 $facebook->api('oauth/access_token', array(
        'client_id'     => APP_ID,
        'client_secret' => APP_SECRET,
        'type'          => 'client_cred',
        'code'          => $code,
    ));
    $token = $facebook->getAccessToken(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T16:16:01.333

此步骤失败的两个最可能的原因是：

*   `redirect_uri`缺少尾随的“/”
*   `redirect_uri`在您的调用中`/oauth/access_token`与您提供给 oauth 对话框的 redirect_uri 不完全匹配

无论哪种情况，代码验证都会失败，您将无法获得令牌，

“无法打开流：连接超时”错误可能与此无关，但它通常表示尝试从服务器访问 graph.facebook.com 时出现 DNS 或网络错误

# c# - StreamReader - 如何忽略读取逗号字符

> ID：10833147
> 
> 赞同：0
> 
> 时间：2012-05-31T11:58:37.203
> 
> 标签：c#, winforms, streamreader

C# winforms 应用程序 - 我正在使用 a`StreamWriter`来编写`.csv`文件（从 DataGridView 读取）。

因为它是一个`.csv`文件，我怎么能告诉它`StreamReader`不要从 DatagridView 读取逗号字符（如果有的话）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:05:50.700

**StreamReader**没有方法可以读取没有特定字符的文本。

> 您可以先读取，然后将其存储在临时字符串中，然后使用 string.Replace() 方法丢弃逗号。

```
string.Replace(",",""); 
```

> 然后写入 csv 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T11:59:58.063

> c# winforms 我正在使用 StreamWriter 编写一个 csv.file

这句话很吓人。查看[以下文章](http://secretgeek.net/csv_trouble.asp)。然后使用[真正的 CSV 解析器](http://www.filehelpers.com/)。

# iphone - iOS：无法启动 .app 文件

> ID：10833151
> 
> 赞同：18
> 
> 时间：2012-05-31T11:58:59.207
> 
> 标签：iphone, ios5.1, launching-application, .app

我不知道它为什么要在我的 .app 文件中寻找目录。每次我运行应用程序时，它都会在 iPhone 上安装应用程序但不运行并给出以下错误。谁能告诉我这个设置存储在哪里？谢谢。

```
error: failed to launch '/Users/xxx/Library/Developer/Xcode/DerivedData/MyApp- ccbvvzjjzvwuerchrpulknxtenoq/Build/Products/Debug-iphoneos/MyApp.app/MyApp' -- No such file or directory (/Users/xxx/Library/Developer/Xcode/DerivedData/MyApp-ccbvvzjjzvwuerchrpulknxtenoq/Build/Products/Debug-iphoneos/MyApp.app/MyApp) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T12:14:02.187

尝试：
1 - 从 iPhone 中删除应用程序。
2 - 删除`DerivedData`文件夹的内容。
3 - 清理并构建项目，重新启动 Xcode，然后重新启动您的设备。

**编辑：**
现在对于 Xcode 5 中的第 2 步，您可以从管理器中删除派生数据，只需选择`Projects`选项卡，选择您的项目并单击右侧的“删除...”按钮。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-10T18:00:56.970

如果像我一样，你在 XCODE 6 中看到这个错误：***“process launch failed: NotFound”***

我终于发现“未找到”的东西是关于设备本身的。它在 Organizer 中得到了很好的认可，之前一切正常，但 xcode 无法在其上运行应用程序。

什么对我有用：只需**尝试重新启动您的设备**，瞧 :)

太糟糕了 XCODE 仍然有这样不清楚的错误信息！更多细节可以节省很多时间......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-16T09:45:53.247

我有同样的问题。我尝试重新启动 Xcode 并删除应用程序表单设备并且它有效。在尝试任何复杂的东西之前，试试这个它也应该对你有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T12:20:25.640

每当我收到“无法启动 .app 文件”消息时，我总是会检查我的代码签名设置...通常发生在我忘记将代码签名身份从分发中更改回开发人员时

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T07:54:33.963

对我来说重新启动 Xcode，在大多数情况下清理 DerivedData 和重新启动设备是不够的，直到我发现 iTunes 也在运行，并且在退出 iTunes 后一切正常！

所以我现在的步骤很简单：

**1\. 退出 Xcode。**
**2\. 如果 iTunes 正在运行，请退出 iTunes。**
**3\. 重新打开项目。**

无需删除应用程序、清理项目或重启设备。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-07T03:40:22.937

我清理了我的临时配置文件，重新启动了 iPhone，然后重新启动了计算机，它对我有用。

# java - IRC 发送队列（Y 秒内 X 条消息）

> ID：10833156
> 
> 赞同：0
> 
> 时间：2012-05-31T11:59:04.870
> 
> 标签：java, irc

我有过度思考事情的倾向，但在任何地方都找不到任何关于这个的东西。大多数具有发送限制的 IRC 网络/频道都以一种方式实现它，即您只能在特定时间段内发送 X 条消息（在外网的情况下，5 秒内发送 5 条消息），这意味着我要么必须有很长的延迟在消息之间，或实施一种方法来确保我不会发送更多消息，同时仍然快速发送消息直到那时。我将如何去做后者？

（我在 Java 中这样做，但问题显然不依赖于此，因此答案中引用的任何代码都可以是任何语言。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:07:12.203

排队所有传出消息。仅在您低于限额时发送。如果您超出限制，请将它们添加到您的队列中，并在经过足够的时间后发送它们，以便您再次低于限制。

如果您只使用您知道它们的同一个网络，您只需要找出一种方法来检测这些限制或对它们进行硬编码。

# android - Android SearchManager：如何设置最小字符数以启用搜索

> ID：10833157
> 
> 赞同：1
> 
> 时间：2012-05-31T11:59:07.637
> 
> 标签：android, android-searchmanager

我正在使用 Android SearchManager。我在 searchable.xml 中定义了所有需要的属性。

现在，我想在用户进行搜索之前设置最小字符数限制。默认情况下，最小值为 1。

这怎么能改变？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-19T05:52:20.973

如果 onQueryTextSubmit 返回 false 则只有搜索操作正在执行，我们可以像这样限制字符

```
 @Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.menu_home, menu);

        // Get the SearchView and set the searchable configuration
        SearchManager searchManager = (SearchManager)getActivity().getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        // Assumes current activity is the searchable activity
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getActivity().getComponentName()));
        //searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default

        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
            @Override
            public boolean onQueryTextSubmit(String query) {
                return query.length()<4; //number of char to limit
            }

            @Override
            public boolean onQueryTextChange(String newText) {
                return false;
            }
        });

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:04:45.190

它在 searchable.xml 中的以下属性

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
  ...
  android:searchSuggestThreshold="2"
  >
</searchable> 
```

# windows - 从 Mac OSX 将 Qt 项目部署到 Windows

> ID：10833158
> 
> 赞同：1
> 
> 时间：2012-05-31T11:59:08.640
> 
> 标签：windows, qt, deploying

我正在研究 MAC OSX Snow Leopard，我想将我的项目部署到 Windows

这是一个 Qt 桌面应用程序

1.  如何生成 .exe 文件（+其他依赖项，如果有的话）
2.  将所有.exe + dll打包成一个包进行安装的任何方法

注意：我宁愿不在 Windows 上安装 Qt SDK 并将项目文件复制到它然后构建它。

如果您回答 1 和 2 问题，则需要 1 和更好的解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:07:26.603

第一步相对容易。

转到这里[http://crossgcc.rts-software.org/doku.php](http://crossgcc.rts-software.org/doku.php) 并获取一个预编译的 MinGW 包（或者在 sourceforge 中查找 mingw-w64 包，如果需要生成 64 位可执行文件，请自行编译）。

然后编译您需要的所有依赖项（或使用预构建的 win32 库）。

最后，使用 makefile 在您的 MacOSX 机器上构建 win32 可执行文件。

第二步 - 这取决于。我还没有听说过任何能够生成 .msi 或 .exe 安装程序的 OSX 打包程序，但这并不意味着没有。也许某种交叉编译的 NSIS 可能会有所帮助（但如果这严重依赖 WinAPI，至少需要 WINE 库）。

编辑：看起来构建[NSIS](http://nsis.sourceforge.net/)是在 OSX 上打包安装程序的可行选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:26:08.443

好的，经过几天的搜索和调整，我为我的问题编写了一个解决方案，并以最简洁的形式写给陷入类似情况的朋友，请访问[这里](http://godhc.wordpress.com/2012/06/10/build-your-qt-project-on-windows-and-mac-osx/)

你需要

1.  mingw-get-inst
2.  Qt 库 4.8.2 for Windows（或更高版本）
3.  您的 .proj 文件（关联的 .ui、.cpp、.h 等）

and its a two stage procedure , initially you need to download and install above listed 1 and 2 and setup the required environment and then make and build on the targeted windows system

# python - 当用户单击框架关闭时如何杀死 WxPython 应用程序

> ID：10833163
> 
> 赞同：18
> 
> 时间：2012-05-31T11:59:28.537
> 
> 标签：python, wxpython

当我单击主框架的关闭按钮时，应用程序应该关闭。但是我实现它的方式是，`Segmentation fault`当我单击按钮时它会退出。

我担心程序的安全关闭，因为稍后我需要将内容持久化到磁盘。

通过关闭按钮终止 WxPython 应用程序的**正确非暴力方法是什么？**

* * *

这是我实现的程序的“主”循环：

```
if __name__ == "__main__":
    app = wx.App(False)
    mf = MainFrame(None, title='Spectrum Checker') #subclasses frame
    mf.register_close_callback( app.Destroy) #what is the apt func?
    app.MainLoop() 
```

以下是它是如何实现回调的`MainFrame`：

```
def __init__(self, parent, title):
    ...
    self.Bind(wx.EVT_CLOSE, self._when_closed)

...

def _when_closed(self, event):
if self.__close_callback__:
    self.__close_callback__() 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T15:59:05.037

这是关闭框架的常规方法：

```
import wx

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Close Me")
        panel = wx.Panel(self)

        closeBtn = wx.Button(panel, label="Close")
        closeBtn.Bind(wx.EVT_BUTTON, self.onClose)

    #----------------------------------------------------------------------
    def onClose(self, event):
        """"""
        self.Close()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    frame.Show()
    app.MainLoop() 
```

现在，如果您绑定到 wx.EVT_CLOSE，那么您将陷入无限循环，直到您遇到段错误。绑定到 EVT_CLOSE 的主要原因是您可以捕获关闭事件并要求用户保存他们的信息。如果你想这样做，那么你需要使用`self.Destroy`而不是“self.Close”，这样你就不会继续触发那个事件。

正如已经提到的，在您的关闭处理程序中，您需要确保结束线程、销毁任务栏图标、关闭打开的文件等，以免挂起。另见：[http ://wxpython.org/docs/api/wx.CloseEvent-class.html](http://wxpython.org/docs/api/wx.CloseEvent-class.html)

* * *

## OP的补充

我面临两个问题，感谢**所有三个**答案帮助我找到它们：

首先，框架没有响应`self.Close()`或者`self.Destroy()`因为它具有`self.stuff`一个正在运行的线程的属性。该线程必须先关闭。

其次，`self.Close()`在响应关闭事件并在调用时导致无限递归的处理程序中。这会导致运行时错误（分段错误、超出递归深度）。解决方案是`self.Destroy()`改用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T12:54:17.113

我不确定你为什么需要回调来关闭应用程序？如果你没有绑定任何东西到`MainFrame`，当你点击关闭按钮时应用程序应该会自动关闭。除非您有其他线程正在运行，这会阻止进程结束。如果您仍想绑定到关闭事件并在关闭之前执行某些操作，`event.Skip()`如果您仍想关闭窗口，则应在事件处理程序中使用。否则，事件不会进一步传播，并且不会执行默认处理程序。一个例子：

```
import wx

class MainFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        self.__close_callback = None
        self.Bind(wx.EVT_CLOSE, self._when_closed)

    def register_close_callback(self, callback):
        self.__close_callback = callback

    def _when_closed(self, event):
        doClose = True if not self.__close_callback else self.__close_callback()
        if doClose:
            event.Skip()

if __name__ == "__main__":
    app = wx.App(False)
    mf = MainFrame(None, title='Test')
    mf.Show()
    mf.register_close_callback(lambda: True)
    app.MainLoop() 
```

当您执行代码并单击关闭时 - 应用程序已关闭。当你改变回调函数时`lambda: False`，窗口不会被关闭，因为`Skip`不会被调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-02T17:36:50.567

先前的答案之一讨论了使用 Destroy() 而不是 Close() 以在退出应用程序之前保存用户信息。这是一些示例代码，询问用户是否打算退出。如果他们以肯定的方式回应，它会“破坏”框架并退出应用程序。

```
# Bind our events from our menu item and from the close dialog 'x' on the frame
def SetupEvents(self):
    self.Bind(wx.EVT_CLOSE, self.OnCloseFrame)
    self.Bind(wx.EVT_MENU, self.OnCloseFrame, self.fileMenuExitItem)

# Destroys the main frame which quits the wxPython application
def OnExitApp(self, event):
    self.Destroy()

# Makes sure the user was intending to quit the application
def OnCloseFrame(self, event):
    dialog = wx.MessageDialog(self, message = "Are you sure you want to quit?", caption = "Caption", style = wx.YES_NO, pos = wx.DefaultPosition)
    response = dialog.ShowModal()

    if (response == wx.ID_YES):
        self.OnExitApp(event)
    else:
        event.StopPropagation() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T13:17:54.770

关闭应用程序中的所有顶级框架应该结束应用程序，而无需绑定关闭或其他任何东西。`.Close()`如果您有多个或一些隐藏的，您可以自己关闭它们。

此外，如果您有一个 TaskBarIcon，则需要在应用程序结束之前将其销毁。

我认为你的段错误可能是由于另一个原因，与框架如何拆除并摧毁他们的孩子有关。我会尝试单步执行代码并找出段错误发生的时间点。

# facebook - Rails，使用 omniauth-facebook auth/failure?message=invalid_credentials#_=_ 设计

> ID：10833165
> 
> 赞同：1
> 
> 时间：2012-05-31T11:59:31.787
> 
> 标签：facebook, ruby-on-rails-3.1, devise, omniauth

我在我的开发机器上设置了omniauth-facebook gem，如下所示：

**配置/初始化程序/omniauth.rb**

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'APP_KEY', '  APP_SECRET'
end 
```

我已经向 facebook 开发人员注册了我的应用程序，并提供了一个站点 URL 为“http://localhost:3000”，并将我的 APP_KEY 和 APP_SECRET 输入到 omniauth.rb

当我尝试登录时，我被重定向到我的根 url，`routing error No route matches [GET] "/auth/failure"`并在 url 中显示无效凭据。我已经能够让omniauth Twitter、Github 和Google 工作，但是Facebook 没有让我登录。我正在按照[此处](https://github.com/mkdynamic/omniauth-facebook)给出的说明进行操作。有什么想法吗？

# php - 仅在加载页面后打印变量

> ID：10833170
> 
> 赞同：0
> 
> 时间：2012-05-31T11:59:51.293
> 
> 标签：php, variables, loops, count, while-loop

我正在寻找一种使用 php 和 javascript 的简单方法，在页面顶部打印一个 php 变量，并且只有在页面加载并运行 while 循环后。

基本上，我有一个 while 循环遍历我的数据库，并在表中打印出一行用户详细信息。每次它找到一个用户时，它都会将 1 添加到在页面开头声明的变量中。

这是我计算搜索后找到多少用户的基本方法。

然后我打印出变量来通知我。唯一的问题是，我只能在循环结束后打印变量，这意味着它必须位于我的页面底部和表格下方。这很愚蠢，因为我必须滚动到一张长表的底部才能找到号码。

有没有一种方法可以在循环完成后将计数设置为变量，然后我可以让脚本返回并在表格上方打印变量？

非常感谢你们提供的任何建议。

干杯，编辑

编辑：添加代码示例：

```
<?php
$count = '0';
//Print all users with similar names
while($row = mysql_fetch_assoc($result))
{
//Start the form for each user to enable editing, along with row onhover colour
echo "<form method='post' action='editor.php'>
    <tr class='tablehover'>";
//Depending on searchby, change which column is bold. Helps pick out users
if($searchby == 'username') {
    echo "<td><div class='userhighlight'>".$row['Username']."</div></td>";
}
else {
    echo "<td>".$row['Username']."</td>";
}
if($searchby == 'firstname') {
    echo "<td><div class='userhighlight'>".$row['First Name']."</div></td>";
}
else {
    echo "<td>".$row['First Name']."</td>";
}
if($searchby == 'lastname') {
    echo "<td><div class='userhighlight'>".$row['Last Name']."</div></td>";
}
else {
    echo "<td>".$row['Last Name']."</td>";
}
if($searchby == 'office') {
    echo "<td><div class='userhighlight'>".$row['Office']."</div></td>";
}
else {
    echo "<td>".$row['Office']."</td>";
}
if($searchby == 'lastlogin') {
    echo "<td><div class='userhighlight'>".$row['Last_Login']."</div></td>";
}
else {
    echo "<td>".$row['Last_Login']."</td>";
}

//Set ID of found user
$id = $row['User ID'];
//Create query to load user roles
$roleqry = "SELECT * FROM `site roles` WHERE `User ID`='$id'";
$roleresult = mysql_query($roleqry);
//Set $roles to gather roles
while($roles = mysql_fetch_assoc($roleresult)) {

//Echo out the rest of the user details into the table
echo "<td>".$roles['Admin']."</td>";
echo "<td>".$roles['Create User']."</td>";
echo "<td>".$roles['Edit User']."</td>";
echo "<td>".$roles['SandS']."</td>";
echo "<td>".$roles['SandS Admin']."</td>";
//Echo the hidden ID field, for editing, along with the edit button
}
echo "<td><input type='text' name='id' size='1' value='".$row['User ID']."' readonly style='visibility:hidden;width:1px;'>
            <input type='submit' value='Edit'></td></tr></form>";
echo "<tr><td colspan='11'><hr /></td></tr>";
$count = $count + 1;
}
?> 
```

这显然结束了循环。但是我现在别无选择，只能在此之后回显设置变量 $count ，将其放在页面底部：

```
echo "<br />".$count." user's found"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:06:47.373

您可以将它们连接到一个变量并稍后打印，而不是在循环时打印表格行。

像这样：

```
$output = '';
$i = 0;

while($row = mysql_fetch_array($result))
{
    $i++;
    $output .= ....
}

echo $i;
echo $output; 
```

但是，如果您要打印出所有行，则应使用 mysql_num_rows() 而不是以这种方式计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:05:25.540

这里有很多可能性，这又快又脏

```
<html>...<body>
Rows found: <span id="rowcount">still calculating</span>
<table>
....
</table>
<script language="JavaScript">
document.getElementById('rowcount').innerHTML='<?php echo $rowcount; ?>';
</script>
...
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:07:19.990

好吧，不是很清楚，但是您可以在变量内创建表，然后先打印增量：

```
$i=0;
$table = '<table>';
while($row = mysql_fetch_array($result))
{
  $table .= '<tr><td>'.htmlentities($row['field']).'</td></tr>';
  $i++;
}
$table .= '</table>';

echo $i;
echo $table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:09:52.113

`mysql_num_rows()`您可以使用right?简单地计算结果集中的行数？然后您可以在表格开始之前设置计数：

```
Count: <?php echo mysql_num_rows($result) ?>
<table>...</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:11:01.397

我会采取将逻辑与页面呈现分开的方式。因此，您应该首先收集您需要的所有数据，然后进行演示。

像[Smarty](http://www.smarty.net/docs/en/what.is.smarty.tpl)这样的模板系统可以对此有所帮助。很难快速修复，只需将表存储在变量中，然后在完成加载所有数据后打印它就足够了。

# objective-c - ios facebook sdk 撤销访问权限

> ID：10833175
> 
> 赞同：1
> 
> 时间：2012-05-31T12:00:00.580
> 
> 标签：objective-c, ios, facebook-graph-api

我对 iOS 有疑问

如何撤销 Facebook 图形 API 中的 access_premission 以使用户能够重新登录。

这是我的代码

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *string = [NSString stringWithFormat:@"https://graph.facebook.com/ID?access_token=%@",[defaults objectForKey:@"FBAccessTokenKey"]];
NSLog(@"string = %@",string);

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:string]];
[request setRequestMethod:@"DELETE"];
[request startSynchronous];

[facebook logout]; 
```

也许我做错了什么。

当我尝试发布新的 facebook 消息时，我仍然有已经自动的屏幕

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T11:43:44.310

使用最新的 Facebook SDK，这很容易：

```
FBRequest *request = [FBRequest requestForDeleteObject:@"me/permissions"];
[request startWithCompletionHandler: ^(FBRequestConnection *connection, NSDictionary* result, NSError *error) {} 
```

# windows-server-2008 - 计划任务在 Windows Server 2008 R2 中不起作用

> ID：10833177
> 
> 赞同：4
> 
> 时间：2012-05-31T12:00:05.803
> 
> 标签：windows-server-2008, scheduled-tasks

我正在尝试通过 Windows Server 2008 R2 中的任务计划程序运行 .cmd。我已经从服务器计算机管理员组中的用户登录到服务器。运行计划任务时，“上次运行时间" 列的值为 (0x1)，而“状态”已准备好。但没有发生任何事情。运行 .cmd 时，只需双击它就可以正常工作。这是服务器中用户的问题还是什么？有人知道这个问题的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-24T19:48:43.637

我建议将“Start In...”文件夹设置为应用程序所在的目录。确保它具有该目录的适当权限。

这解决了我的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T14:22:08.797

我通过以 SYSTEM 用户帐户运行我的 .cmd 文件来解决我的问题。请遵循以下指示：

1）尝试通过以下方式更改“更改用户或组...”：单击“更改用户或组...”然后单击“高级...”然后“立即查找”最后查找“系统”（以“s”结尾）选择它并单击确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:17:21.793

我同意！Window 2008 计划通常不起作用，您必须尝试不同的选项或“技巧”，直到您找到一个可以正常工作的配置......。

以下是我使用的一些“技巧”：

1）尝试通过以下方式更改“更改用户或组...”：单击“更改用户或组...”然后单击“高级...”然后“立即查找”最后查找“管理员”（以“s”结尾）选择它并单击 OK 。

更改后，您将看到“仅在用户登录时运行”选项已禁用

这允许在没有用户登录的情况下运行。

2）如果您正在运行脚本（.bat .cmd），有时它有助于定义 Start in（可选）。

3）设置“以最高权限运行”也有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:29:34.403

我想出了一个办法来做到这一点。创建 .bat/.cmd 文件的快捷方式。右键单击快捷方式并转到属性。转到高级并选择“以管理员身份运行”。

完成此操作后，创建另一个运行原始 bat 文件快捷方式的 bat 文件。然后将这个新的 bat 文件添加到任务调度程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T07:10:57.157

请参阅下面的屏幕截图更改为 SYSTEM 用户 ![在此处输入图像描述](../Images/2a2dcfaa7285684c473e8beb444a1354.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-08T05:37:08.497

我陷入了同样的问题，但原因不同。

将实用程序从 QA 移至生产时，它无法在 Prod 上运行。我确定原因是 .Net Framework 版本。

Prod 上的 .Net Framework 是 4.0，应用程序是在 .Net Framework 4.5 上开发的。

我更改了应用程序的版本，它开始完美运行。

希望这会有所帮助。

# java - springframework/hibernate 返回重复的行

> ID：10833183
> 
> 赞同：1
> 
> 时间：2012-05-31T12:00:43.457
> 
> 标签：java, hibernate

我正在使用 springframework HibernateTemplate 来查询单个表。使用调试设置，我捕获了 Hibernate 正在生成的查询，在 Toad 中运行它，并获得了 75 个不同的行。但是在我的应用程序中，我得到了一个包含 75 条重复记录的集合，仅此而已。

映射非常简单：

```
<hibernate-mapping>
<class name="com.p.e.d.s.PmaSummary" <!-- hiding info -->
    table="V_PMA_SUMMARY" schema="ECREDIT">

    <cache usage="read-only" />

    <id column="member_id" name="memberId">
        <generator class="assigned" />
    </id>

    <property name="weekEnding" column="week_ending" />
    <property name="actualInvoice" column="actual_invoice" />
    <property name="ftrAdjustments" column="ftr_adjustments" />
    <property name="edcLseAdjustments" column="edc_lse_adjustments" />
    <property name="blidAdjustments" column="blid_adjustments" />
    <property name="pmaMiscAdjustments" column="pma_misc_adjustments" />
    <property name="pmaEarlyPayments" column="pma_early_payments" />
    <property name="adjInv" column="adj_inv" />
    <property name="adjInvExcEarlyPayment" column="adj_inv_exc_early_payment" />
    <property name="initialPma" column="initial_pma" />
    <property name="threeWeekPma" column="three_week_pma" />
    <property name="pmaOverride" column="pma_override" />
    <property name="pmaOverride_type" column="pma_override_type" />
    <property name="pmaOverride_reason" column="pma_override_reason" />
</class>
</hibernate-mapping> 
```

这个生成的查询在 Toad 中可以正常工作：

```
select this_.member_id as member1_45_0_,
     this_.week_ending as week2_45_0_,
     this_.actual_invoice as actual3_45_0_,
     this_.ftr_adjustments as ftr4_45_0_,
     this_.edc_lse_adjustments as edc5_45_0_,
     this_.blid_adjustments as blid6_45_0_,
     this_.pma_misc_adjustments as pma7_45_0_,
     this_.pma_early_payments as pma8_45_0_,
     this_.adj_inv as adj9_45_0_,
     this_.adj_inv_exc_early_payment as adj10_45_0_,
     this_.initial_pma as initial11_45_0_,
     this_.three_week_pma as three12_45_0_,
     this_.pma_override as pma13_45_0_,
     this_.pma_override_type as pma14_45_0_,
     this_.pma_override_reason as pma15_45_0_
from ecredit.v_pma_summary this_
where this_.member_id = 10003
order by this_.week_ending desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:08:43.260

为什么不添加`DISTINCT`到您的 HQL 查询？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:26:49.737

映射文件中的 id 定义不正确。随着`<ìd>`您将单个列定义为主键。

在选择中，您选择一个 member_id 的所有行并按 week_ending 对它们进行排序。所以我想对于同一个member_id，可能会有很多列具有不同的week_ending。所以你的主键可能有两列或更多列，member_id 和 week_ending，也许还有……。别的。

你必须`<composite-id>`改用`<id>`，sth。像这样

```
<composite-id>
    <key-property name="memberId" column="member_id" type="..." /> 
    <key-property name="weekEnding" column="week_ending" type="..." />
    <!--- perhaps more key-properties --> 
</composite-id> 
```

# hibernate - 休眠事务

> ID：10833185
> 
> 赞同：0
> 
> 时间：2012-05-31T12:00:43.340
> 
> 标签：hibernate, transactions

我有休眠和事务的问题。

我想从数据库中删除对象。

```
@Transactional
public boolean addProduct(Cart cart) {
    try {
        sessionFactory.getCurrentSession().save(cart);
        return true;
    } catch (HibernateException e) {
        LOG.debug("ERROR adding product into cart" + e);
        return false;
    }

}

@Transactional  
public boolean deleteProductByProdIdAndAmount(Cart cart) {      
    sessionFactory.getCurrentSession().delete(cart);
    return true;
} 
```

它完美地添加了对象，但不会删除它，我不会重新筛选任何异常。如果我写

```
sessionFactory.getCurrentSession().getTransaction().commit(); 
```

它会向我显示一个事务未成功启动的异常，但它会删除一个对象。这是我的配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"
    default-lazy-init="true">

<tx:annotation-driven transaction-manager="txManager" />

<bean id="configProperties" class="com.dataart.masternoy.utils.PropertiesUtil">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="locations">
        <list>
            <value>classpath:/config.properties</value>
            <value>classpath:/jdbc.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/shop" />
    <property name="username" value="root" />
    <property name="password" value="root" />
</bean>

<bean class="org.springframework.jdbc.core.JdbcTemplate" id="jdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean>

<bean id="txManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="transactionManager" 
      class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"
    lazy-init="true">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernateConfig.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
            <prop key="hibernate.connection.charSet">UTF-8</prop>

        </props>
    </property>
</bean> 
```

如果我写

```
sessionFactory.getCurrentSession().createQuery("delete from Cart where order_id = 77 and product_id = 9").executeUpdate(); 
```

它将从数据库中删除对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:53:53.360

在删除之前，您是否`cart`从持久层获得您的？您可能还希望将事务分界移到服务层或客户端代码。例子：

```
@Transactional
public void deleteCart(long id) {
    Cart cart = this.cartDao.getCart(id);
    this.cartDao.deleteProductByProdIdAndAmount(cart);
} 
```

# c++ - 是否可以将字符串流作为函数参数传递？

> ID：10833188
> 
> 赞同：25
> 
> 时间：2012-05-31T12:00:46.390
> 
> 标签：c++, function, parameter-passing, stringstream

是否可以传入一个字符串流并让函数直接写入它？

我记得我看到一个类似这样的函数调用：

```
my_func(ss << "text" << hex << 33); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T12:03:02.840

肯定的事。为什么不呢？此类函数的示例声明：

```
void my_func(std::ostringstream& ss); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T12:03:16.507

绝对地！确保通过引用而不是值传递它。

```
void my_func(ostream& stream) {
    stream << "Hello!";
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T14:39:21.527

`my_func`必须有如下签名：

```
void my_func( std::ostream& s ); 
```

, 因为那是`ss << "text" << hex << 33`. 如果目标是提取生成的字符串，则必须执行以下操作：

```
void
my_func( std::ostream& s )
{
    std::string data = dynamic_cast<std::ostringstream&>(s).str();
    //  ...
} 
```

另请注意，您不能使用临时流；

```
my_func( std::ostringstream() << "text" << hex << 33 ); 
```

won't compile (except maybe with VC++), since it's not legal C++. You could write something like:

```
my_func( std::ostringstream().flush() << "text" << hex << 33 ); 
```

if you wanted to use a temporary. But that's not very user friendly.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T12:04:10.027

是的，而且

```
Function(expresion) 
```

将使表达式首先被评估，其结果将作为参数传递

注意：[ostreams 的运算符 <<](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)返回一个 ostream

# facebook - 从neo4j存储朋友[节点]之间的关系路径并在将来更新它

> ID：10833190
> 
> 赞同：0
> 
> 时间：2012-05-31T12:00:47.843
> 
> 标签：facebook, algorithm, indexing, relationship, neo4j

我正在开发一个应用程序，我需要在其中显示两个人之间的关系路径。

在我的应用程序中，我有用户的 Facebook、Twitter、Linked In 和其他社交网络帐户数据。我有我的用户朋友/关注/连接个人资料。并从我的应用程序用户搜索朋友[或随机人的朋友的朋友]。在我的 neo4j 中，我正在搜索我的用户的 1 度联系人 [朋友]，然后在我的朋友的朋友列表中和 [2 度] , 与 2 度好友[3 度] 相同的搜索。最后搜索到的人名的结果集合将显示连接路径 [在好友之间]

**示例：搜索 Mark Nevil 结果：使用我的算法**

**路径 1** *我---->我的“我的 FB”朋友 [将其命名为 B]----->B 的已链接朋友 [C] ----->将 Nevil 标记为 [C] 的 Twitter 朋友。*

我有这样的道路-->马克·内维尔。因此，对于将来，我需要将此类路径存储在某个地方[可能在 MongoDB 中，或者请建议一个好的路径]。并且希望在数据库中添加朋友时更新这些路径

当用户查询时，此搜索会在 DB 上自由运行。但这需要时间，并且要一次又一次地计算相同的搜索路径。

请建议存储路径的好方法或任何算法来执行此类过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:06:02.823

它是最短路径搜索，还是所有路径，或者它是什么？还有需要多长时间？你的图表中有多少适合内存？

# java - 如何为 2 个源文件夹正确配置 eclipse？

> ID：10833199
> 
> 赞同：0
> 
> 时间：2012-05-31T12:01:18.337
> 
> 标签：java, eclipse

我有以下设置：我有一个使用生成源（来自 SWIG）的 eclipse 项目。为了避免混淆它们，我决定有两个不同的源位置：一个是主要源（我手工开发），另一个是指向`swig`放置其输出文件的目录的链接。

现在，如果我尝试在 swig 目录中使用这些类，eclipse 会抛出找不到 Class 的错误。如果我把课程复制过来，好吧，那行得通。

我必须做什么才能让它运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:02:36.403

右键单击项目资源管理器中的文件夹，然后选择“构建路径->用作源文件夹”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:51:39.593

我找到了答案：

Swig 默认生成默认包中的类。由于我的其余类是在包中组织的，我只是将生成的类移动到一个包中（使用命令行参数），瞧：Java 确实正确地找到了这些类。

# windows-phone - 有没有办法在不要求用户使用 Market 的情况下更新 WP7 应用程序？

> ID：10833202
> 
> 赞同：3
> 
> 时间：2012-05-31T12:01:22.367
> 
> 标签：windows-phone

我想知道是否有一些合法的方式来更新 WP7 应用程序而不要求用户去市场并下载新版本？

我想要实现的是制作一个应用程序并在某些设备上手动安装它（不使用市场）。然后应用程序应该要求用户安装更新。当我在我的设备上手动安装它时，我无法使用 Market 进行更新，不是吗？

业务用例是在设备上预安装（手动）一些虚拟应用程序，然后准备真正的应用程序。当真正的应用程序完成后，我想通知用户，并要求他们更新。

我不是 WP7 开发人员，但我需要知道是否有某种方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:20:08.013

不，没有办法做到这一点，可能在将来吃完 Windows phone 8 之后，他们会在 Marketplace 中添加更多功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:47:40.407

[据我了解](http://blog.wpfwonderland.com/2011/04/15/mango-adds-beta-and-private-marketplaces-to-windows-phone-7-and-neglects-enterprise/)，虽然（截至 Mango）尚无任何不使用 MarketPlace 的方式进行更新，但您可以将应用程序发布为私有应用程序（以及所有认证要求），并且仅使用具有指向的深层链接商店可以安装它（然后获取更新）——它只是通过默默无闻来保护隐私，所以要小心——它不应该被用作在没有二次身份验证的情况下公开公司数据的选项。

从用户体验角度出发，并协助认证；建议开发一个至少部分可用的应用程序，即使它是用于购买音乐会门票的应用程序（理论示例时间），仅列出虚拟版本中即将举行的音乐会。至少那时如果人们戳它，他们可能会倾向于稍后再回来（而不是仅仅卸载它）

# matlab - 将数据从格式不佳的文件导入 Matlab

> ID：10833208
> 
> 赞同：2
> 
> 时间：2012-05-31T12:01:48.027
> 
> 标签：matlab, file-io, import, csv

我有大量需要解析的文本文件（制表符分隔的数据）。它们大多格式良好。但是，随机散布的行包含错误字符，如下所示。每个文件中坏行的位置不同，但添加的字符始终相同。

```
1   3
2   873
3   46
23  99798
23  1
353 79
"23 ,"  967
35  8028
253 615
"235 ," 3924
345 188
345 579
345 419
56  16835
23  449 
```

importdata(filename) 将所有数据导入到第一个格式错误的行，然后忽略文件的其余部分。我想我可以通过 fopen 和 textscan 的组合来做我想做的事情，但我似乎无法获得正确的参数组合来使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:08:41.783

尝试使用[`textread`](http://www.mathworks.co.uk/help/techdoc/ref/textread.html)带有`%q`格式字符串的函数。假设问题中的测试数据保存为`test.txt`：

```
>> [a, b] = textread('test.txt', '%q %q');

>> a'

ans = 

  Columns 1 through 9

    '1'    '2'    '3'    '23'    '23'    '353'    '23 ,'    '35'    '253'

  Columns 10 through 15

    '235 ,'    '345'    '345'    '345'    '56'    '23'

>> b'

ans = 

  Columns 1 through 9

    '3'    '873'    '46'    '99798'    '1'    '79'    '967'    '8028'    '615'

  Columns 10 through 15

    '3924'    '188'    '579'    '419'    '16835'    '449' 
```

然后，您可以使用`str2double`删除`a`. 例如：

```
>> str2double(a)'

ans =

  Columns 1 through 13

     1     2     3    23    23   353    23    35   253   235   345   345   345

  Columns 14 through 15

    56    23 
```

# android - 下载数据时出错

> ID：10833214
> 
> 赞同：0
> 
> 时间：2012-05-31T12:02:09.240
> 
> 标签：android, download, android-sdcard

我正在尝试编写类以从服务器下载文件并将其存储在 sd 卡上。但我得到一个异常，如 java.io.FileNotFoundException: /mnt/sdcard/files.zip （没有这样的文件或目录）。

我的主要课程是

```
public class DownloadZipActivity extends Activity {
    /** Called when the activity is first created. */
    int count;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {

        URL url = new URL(
                "url to download");

       /*   URLConnection conexion = url.openConnection();
        conexion.connect();
*/
            HttpURLConnection conn = (HttpURLConnection)url.openConnection();
            conn.setDoInput(true);
            conn.setConnectTimeout(1000); // timeout 10 secs
            conn.connect();

        int lenghtOfFile = conn.getContentLength();
        Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/mnt/sdcard/external_sd/files.zip");

        byte data[] = new byte[1024];

        long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
        //      publishProgress(""+(int)((total*100)/lenghtOfFile));

                    output.write(data, 0, count);
                }

            output.flush();
            output.close();
            input.close();
        } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        String zipFile = Environment.getExternalStorageDirectory() + "/files.zip"; 
        String unzipLocation = Environment.getExternalStorageDirectory() + "/unzipped/"; 
        Decompress d = new Decompress(zipFile, unzipLocation); 
        d.unzip(); 
    }
} 
```

和解压类是

```
public class Decompress {
     String _zipFile; 
      String _location; 
    public Decompress(String zipFile, String unzipLocation) {

        // TODO Auto-generated constructor stub
        _zipFile = zipFile; 
        _location = unzipLocation; 

        _dirChecker(""); 
    }
    public void unzip() { 
        try  { 
          FileInputStream fin = new FileInputStream(_zipFile); 
          ZipInputStream zin = new ZipInputStream(fin); 
          ZipEntry ze = null; 
          while ((ze = zin.getNextEntry()) != null) { 
            Log.v("Decompress", "Unzipping " + ze.getName()); 

            if(ze.isDirectory()) { 
              _dirChecker(ze.getName()); 
            } else { 
              FileOutputStream fout = new FileOutputStream(_location + ze.getName()); 
              for (int c = zin.read(); c != -1; c = zin.read()) { 
                fout.write(c); 
              } 

              zin.closeEntry(); 
              fout.close(); 
            } 

          } 
          zin.close(); 
        } catch(Exception e) { 
          Log.e("Decompress", "unzip", e); 
        } 

      } 

      private void _dirChecker(String dir) { 
        File f = new File(_location + dir); 

        if(!f.isDirectory()) { 
          f.mkdirs(); 
        } 
      } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:08:18.027

仔细看你的代码

下载和保存文件时，您将其保存在以下路径中

```
OutputStream output = new FileOutputStream("/mnt/sdcard/external_sd/files.zip"); 
```

但是在阅读时，您指的是以下路径

```
String zipFile = Environment.getExternalStorageDirectory() + "/files.zip"; 
```

这相当于

```
String zipFile = "/mnt/sdcard/files.zip"; 
```

你应该写

```
String zipFile = Environment.getExternalStorageDirectory() + "/external_sd/files.zip"; 
```

希望这可以帮助

# asp.net-mvc-3 - MVC 3 中 Visual Basic 的 DataAnnotationsExtensions

> ID：10833215
> 
> 赞同：0
> 
> 时间：2012-05-31T12:02:14.950
> 
> 标签：asp.net-mvc-3, data-annotations

我实际上可能要疯了，但我找不到一个如何在 MVC 3 中将 DataAnnotationsExtensions 与 Visual Basic 一起使用的示例。我已经厌倦了猜测。

有人想给我举个例子或提供一些简单的代码来告诉我如何使用标签吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:09:56.560

嗯，这实际上很简单。

1.  您创建一个新的 ASP.NET MVC 3 应用程序
2.  您安装[DataAnnotationsExtensions.MVC3](http://nuget.org/packages/DataAnnotationsExtensions.MVC3) Nuget
3.  您创建一个视图模型：

    ```
    Public Class MyViewModel
        <CreditCard(ErrorMessage:="Invalid credit card number")>
        Public Property Number As String
    End Class 
    ```

4.  控制器：

    ```
    Public Class HomeController
        Inherits System.Web.Mvc.Controller

        Function Index() As ActionResult
            Return View(New MyViewModel())
        End Function

        <HttpPost()>
        Function Index(ByVal model As MyViewModel) As ActionResult
            Return View(model)
        End Function
    End Class 
    ```

5.  最后是一个观点：

    ```
    @ModelType AppName.MyViewModel

    @Using Html.BeginForm()
        @Html.LabelFor(Function(x) x.Number)
        @Html.EditorFor(Function(x) x.Number)
        @Html.ValidationMessageFor(Function(x) x.Number)
        @<button type="submit">OK</button>
    End Using 
    ```

# html - 如何在不使用样式属性的情况下从已应用于其父级的 css 属性中排除某些元素

> ID：10833216
> 
> 赞同：0
> 
> 时间：2012-05-31T12:02:23.407
> 
> 标签：html, css

我的表是自动生成的，所以我不能给它上课。我所能做的就是像下面这样的白色通用CSS

```
td{white-space:nowrap}
a{white-space:normal} 
```

如何`text1`为文本 2 和文本 3 提供正常的空白但不换行？

```
<tr>
<td>
<a href=""...>text 1</a>
</td>
<td>
text 2
</td>
<td>
text3
</td
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:07:38.977

放

```
td { white-space:nowrap; }
td a { white-space:normal; } 
```

记得有

```
td a {..} 
```

后

```
td {..} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:05:28.790

如果您的链接始终位于行的第一个单元格上，您可以解决

```
tr td:first-child { white-space : nowrap }
a { white-space : normal } 
```

（对于不同的解决方案，我没有其他线索）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:15:00.950

您也可以使用 css 中的伪元素以这种方式进行操作。

表 tr td a{空白：正常} 表 tr td + td a{空白：正常；}

# c# - 编写动作调用程序 - 我如何调用用户选择的方法？

> ID：10833220
> 
> 赞同：0
> 
> 时间：2012-05-31T12:02:27.173
> 
> 标签：c#, algorithm, function, methods, multiple-choice

正如您在我的代码中看到的那样，我想将一个方法保存（设置）到一个对象中。并使用该对象调用该方法...

请看代码，您可以轻松理解；用简单的英语很难解释...

我的问题是；当然“动作操作”对象不能保存将被调用的方法。

那么，我该如何解决这个问题呢？我能做些什么？

```
 ...
    enum CampaignUserChoice
    {
        Insert,
        Update,
        Delete,
        Disable
    } `private void AskUserAboutCampaignOperation(CampaignUserChoice choice)
    {
        string questionForUser = string.Empty;
        string questionTitleForUser = string.Empty;
        Action operation; //<<<<--------------------- this line, it's method holder

        if (choice == CampaignUserChoice.Insert)
        {
            questionForUser = "Do you want to create a new campaign?";
            questionTitleForUser = "NEW CAMPAIGN";
            operation = InsertCampaign(TakeDatasFromGui()); //<---------- set which method you want to call 
        }
        else
        {
            operation = UpdateCampaign( campaignId, TakeDatasFromGui()); 
        }
        //TODO write other elses...

        switch (MessageBox.Show(questionForUser, questionTitleForUser, MessageBoxButtons.YesNoCancel, MessageBoxIcon.Question))
        {
            case DialogResult.Yes:
                operation; //<<<------------------ call method here...
                break;

            case DialogResult.No:
                // "No" processing
                break;

            case DialogResult.Cancel:
                // "Cancel" processing
                break;
        }
    }` 

非常感谢大家的回答...

            回答 #1

赞同：2

时间：2012-05-31T12:04:08.993

您正在尝试使用[**代表**](http://msdn.microsoft.com/en-us/library/ms173171.aspx)：

```
operation = TakeDataFromGui;
...
operation(); 
```

            回答 #2

赞同：1

时间：2012-05-31T12:15:01.317

使用[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)来分配委托：

```
operation = () => InsertCampaign(TakeDatasFromGui()); 
```

像常规函数一样调用动作：

```
operation() 
```

            回答 #3

赞同：1

时间：2012-05-31T12:21:04.597

您需要  [委托](http://msdn.microsoft.com/en-us/library/ms173171.aspx)来调用方法

```
 //declare delegate declaration same as function
   delegate returntype delegate_name(parameter1,paramenter2,..);

   //assaign function to  delegate
   delegate_name=function();

   //call function
   delagate_name(); 
```

```

# jquery-ui - 同一页面上的多个版本的 jQuery 自动完成

> ID：10833222
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:02:34.313
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-autocomplete

我需要有两个自动完成框作为我当前要求的一部分。它已经有正常的自动完成框，以前使用自动完成版本 1.0.2 实现，现在我已经实现了另一个自动完成框，带有自动完成 UI 版本 1.8.16。因此，需要在同一页面上运行多个版本的 jQuery 自动完成功能，这会导致冲突类型的问题。当然，以前实现的自动完成框无法重做或升级。

问题：自动完成 1（用 1.0.2 实现）仅在我评论自动完成插件 1.8.16 时才有效

我想让这两个功能都起作用。

你能告诉我可以做些什么吗？

任何线索将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:12:32.177

我不愿回答这个问题，因为我不是 100% 确定，但我很确定插件的两个版本不能在同一个 jQuery 实例中共存，只要它们具有相同的名称（例如`$.autocomplete`）。但是你可以解决这个问题。以下是一些示例，按我推荐的程度排序：

*   升级旧的 autoComplete 实现以使用 1.8 版
*   只需将旧版本的 autoComplete 用于您的新实现
*   手动将新版本插件的名称编辑为 autocomplete2 之类的名称。手动执行此操作或在插件包含之间执行此操作（见下文）
*   在同一页面上使用两个单独的 jQuery 实例，将每个 autoComplete 插件版本加载到每个相应的 jQuery 实例中。您可以通过[**`jQuery.noConflict`**](http://api.jquery.com/jQuery.noConflict/)在加载每个 jQuery 版本并将它们存储在单独的变量中之后调用来执行此操作，例如`window.$`和`window.$2`

* * *

动态重命名版本（从 Samuel Rossille 的回答中获取，编辑为不破坏旧的自动完成实现）

```
<!-- First include the new autocomplete plugin (1.8) -->
<script type="text/javascript" src="path/to/autocomplete version 1.8"></script>
<script type="text/javascript">
    // Then 'rename' the plugin to something else, e.g. autocomplete18
    jQuery.fn.autocomplete18 = jQuery.fn.autocomplete;
</script>
<!-- Then include the old version, which will overwrite jQuery.autocomplete -->
<script type="text/javascript" src="path/to/autocomplete version 1.0"></script>

<script>
    // $.autocomplete18 should now contain the new autocomplete version
    // $.autocomplete should contain the old version, not breaking the previous
    // implementation
</script> 
```

# android - POST 查询的奇怪行为

> ID：10833231
> 
> 赞同：0
> 
> 时间：2012-05-31T12:03:02.030
> 
> 标签：android, post

项目**id_category**没有发送到服务器，但其他项目发送没有问题。

添加.php：

```
<?php
header("Content-Type: text/html;charset=utf-8");
require_once('../php/mysql_conect.php');
$use_db=mysql_query("use open_service;");

$date=date("Y-m-d");
$time=date("H:i:s");

$insert=mysql_query("insert into records(id_category,name,phone,device_id,address,text,publish_date,publish_time) value('$_POST[id_categoty]','$_POST[name]','$_POST[phone]','$_POST[device_id]','$_POST[address]','$_POST[text]','$date','$time');");
?> 
```

我的部分代码：

> //获取id设备
> 
> ```
>  *TelephonyManager telMgr=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
>        String device_id = telMgr.getDeviceId().toString();
> 
>        name_post = name.getText().toString();
>        phone_post=phone.getText().toString();
>        address_post=address.getText().toString();
>        comment_post=comment.getText().toString();
>        String id_category="1";
> 
>     // Create a new HttpClient and Post Header
>                     HttpClient httpclient = new DefaultHttpClient();
>                     httpclient.getParams().setParameter("http.protocol.version", 
> ```
> 
> HttpVersion.HTTP_1_1); httpclient.getParams().setParameter("http.socket.timeout", new Integer(2000)); httpclient.getParams().setParameter("http.protocol.content-charset", "UTF-8"); HttpPost httppost = new HttpPost("http://10.100.100.20/test/mobile/add.php");
> 
> ```
>  try {
>                             // Add your data
>                             List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(6);
>                             nameValuePairs.add(new BasicNameValuePair("name", name_post));
>                             nameValuePairs.add(new BasicNameValuePair("phone", phone_post));
>                             nameValuePairs.add(new BasicNameValuePair("address", address_post));
>                             nameValuePairs.add(new BasicNameValuePair("text", comment_post));
>                             nameValuePairs.add(new BasicNameValuePair("device_id", device_id));
>                             nameValuePairs.add(new BasicNameValuePair("id_category", id_category));<--It's don send to 
> ```
> 
> 服务器 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
> 
> ```
>  response = httpclient.execute(httppost);
>                //Создаем уведомление
>             Toast toast=Toast.makeText(getBaseContext(), "Заявка успешно отправлена", Toast.LENGTH_SHORT);
>             toast.setGravity(Gravity.CENTER, 0, -200);
>             toast.show();
> 
>             //Возвращаемся а предыдущие Activity
>              Intent intent= new Intent();
>              intent.setClass(getApplicationContext(), EservisActivity.class);
>              startActivity(intent);
> 
>                     }* 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:19:07.967

`add.php`:`$_POST[id_categoty]`而不是`$_POST[id_category]`

# sum - 使用 AVX 一次性完成 4 个水平双精度求和

> ID：10833234
> 
> 赞同：8
> 
> 时间：2012-05-31T12:03:13.407
> 
> 标签：sum, intel, avx

问题可以描述如下。

**输入**

```
__m256d a, b, c, d 
```

**输出**

```
__m256d s = {a[0]+a[1]+a[2]+a[3], b[0]+b[1]+b[2]+b[3], 
             c[0]+c[1]+c[2]+c[3], d[0]+d[1]+d[2]+d[3]} 
```

**到目前为止我所做的工作**

这似乎很容易：两个 VHADD 之间有一些改组，但实际上结合 AVX 的所有排列不能生成实现该目标所需的排列。让我解释：

```
VHADD x, a, b => x = {a[0]+a[1], b[0]+b[1], a[2]+a[3], b[2]+b[3]}
VHADD y, c, d => y = {c[0]+c[1], d[0]+d[1], c[2]+c[3], d[2]+d[3]} 
```

我是否能够以相同的方式排列 x 和 y 以获得

```
x1 = {a[0]+a[1], a[2]+a[3], c[0]+c[1], c[2]+c[3]}
y1 = {b[0]+b[1], b[2]+b[3], d[0]+d[1], d[2]+d[3]} 
```

然后

```
VHADD s, x1, y1 => s1 = {a[0]+a[1]+a[2]+a[3], b[0]+b[1]+b[2]+b[3], 
                         c[0]+c[1]+c[2]+c[3], d[0]+d[1]+d[2]+d[3]} 
```

这就是我想要的结果。

因此我只需要找到如何执行

```
x,y => {x[0], x[2], y[0], y[2]}, {x[1], x[3], y[1], y[3]} 
```

不幸的是，我得出的结论是，使用 VSHUFPD、VBLENDPD、VPERMILPD、VPERM2F128、VUNPCKHPD、VUNPCKLPD 的任何组合都证明是不可能的。问题的关键在于，在 __m256d 的实例 u 中交换 u[1] 和 u[2] 是不可能的。

**问题**

这真的是死胡同吗？还是我错过了排列指令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:27:30.543

`VHADD`指令意味着要遵循常规`VADD`。下面的代码应该给你你想要的：

```
// {a[0]+a[1], b[0]+b[1], a[2]+a[3], b[2]+b[3]}
__m256d sumab = _mm256_hadd_pd(a, b);
// {c[0]+c[1], d[0]+d[1], c[2]+c[3], d[2]+d[3]}
__m256d sumcd = _mm256_hadd_pd(c, d);

// {a[0]+a[1], b[0]+b[1], c[2]+c[3], d[2]+d[3]}
__m256d blend = _mm256_blend_pd(sumab, sumcd, 0b1100);
// {a[2]+a[3], b[2]+b[3], c[0]+c[1], d[0]+d[1]}
__m256d perm = _mm256_permute2f128_pd(sumab, sumcd, 0x21);

__m256d sum =  _mm256_add_pd(perm, blend); 
```

这给出了 5 条指令的结果。我希望我得到了正确的常数。

您提出的排列当然可以完成，但需要多条指令。对不起，我没有回答你问题的那一部分。

**编辑：**我无法抗拒，这是完整的排列。（再一次，我尽了最大努力使常量正确。）你可以看到交换是可能的`u[1]`，`u[2]`只是需要一些工作。在第一代中跨越 128 位的障碍是很困难的。AVX。我还想说这比它`VADD`更可取，`VHADD`因为`VADD`它具有两倍的吞吐量，即使它执行相同数量的添加。

```
// {x[0],x[1],x[2],x[3]}
__m256d x;

// {x[1],x[0],x[3],x[2]}
__m256d xswap = _mm256_permute_pd(x, 0b0101);

// {x[3],x[2],x[1],x[0]}
__m256d xflip128 = _mm256_permute2f128_pd(xswap, xswap, 0x01);

// {x[0],x[2],x[1],x[3]} -- not imposssible to swap x[1] and x[2]
__m256d xblend = _mm256_blend_pd(x, xflip128, 0b0110);

// repeat the same for y
// {y[0],y[2],y[1],y[3]}
__m256d yblend;

// {x[0],x[2],y[0],y[2]}
__m256d x02y02 = _mm256_permute2f128_pd(xblend, yblend, 0x20);

// {x[1],x[3],y[1],y[3]}
__m256d x13y13 = _mm256_permute2f128_pd(xblend, yblend, 0x31); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:53:49.223

我不知道有任何指令可以让您进行这种排列。AVX 指令的操作通常使得寄存器的高 128 位和低 128 位有些独立；将两半的值混合的能力并不多。我能想到的最佳实现将基于[这个问题](https://stackoverflow.com/questions/9775538/fastest-way-to-do-horizontal-vector-sum-with-avx-instructions/9776522#9776522)的答案：

```
__m128d horizontal_add_pd(__m256d x1, __m256d x2)
{
    // calculate 4 two-element horizontal sums:
    // lower 64 bits contain x1[0] + x1[1]
    // next 64 bits contain x2[0] + x1[1]
    // next 64 bits contain x1[2] + x1[3]
    // next 64 bits contain x2[2] + x2[3]
    __m256d sum = _mm256_hadd_pd(x1, x2);
    // extract upper 128 bits of result
    __m128d sum_high = _mm256_extractf128_pd(sum1, 1);
    // add upper 128 bits of sum to its lower 128 bits
    __m128d result = _mm_add_pd(sum_high, (__m128d) sum);
    // lower 64 bits of result contain the sum of x1[0], x1[1], x1[2], x1[3]
    // upper 64 bits of result contain the sum of x2[0], x2[1], x2[2], x2[3]
    return result;
}

__m256d a, b, c, d;
__m128d res1 = horizontal_add_pd(a, b);
__m128d res2 = horizontal_add_pd(c, d);
// At this point:
//     res1 contains a's horizontal sum in bits 0-63
//     res1 contains b's horizontal sum in bits 64-127
//     res2 contains c's horizontal sum in bits 0-63
//     res2 contains d's horizontal sum in bits 64-127
// cast res1 to a __m256d, then insert res2 into the upper 128 bits of the result
__m256d sum = _mm256_insertf128_pd(_mm256_castpd128_pd256(res1), res2, 1);
// At this point:
//     sum contains a's horizontal sum in bits 0-63
//     sum contains b's horizontal sum in bits 64-127
//     sum contains c's horizontal sum in bits 128-191
//     sum contains d's horizontal sum in bits 192-255 
```

这应该是你想要的。以上应该在 7 条总指令中是可行的（强制转换不应该真正做任何事情；它只是给编译器的一个注释，以改变它处理 中的值的方式`res1`），假设`horizontal_add_pd()`你的编译器可以内联短函数并且你有足够的可用寄存器。

# ruby - 红宝石线切割

> ID：10833243
> 
> 赞同：-3
> 
> 时间：2012-05-31T12:04:03.107
> 
> 标签：ruby, regex, string, substring

> **可能重复：**
> [ruby 中的最后一个索引是否与 Array#find_index 等效？](https://stackoverflow.com/questions/3553947/is-there-an-equivalent-of-arrayfind-index-for-the-last-index-in-ruby)

我有一个字符串

```
story = "Everything before the word irrelevent is irrelevent. Everything after it is relevent" 
```

我想在“无关紧要”的最后一次出现之前（包括）删除所有内容。我如何在红宝石中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:27:41.540

```
story.gsub /.*irrelevent/, '' 
```

另外，你拼错了无关紧要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:14:06.423

你可以使用这样的东西：

```
story.split(/\birrelevent\b/).last 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:20:59.487

正则表达式工作：[http ://rubular.com/r/xj9NB7Hekq](http://rubular.com/r/xj9NB7Hekq)

在红宝石中：`story[/irrelevent(?:(?!irrelevent).)*$/]`

# javascript - 如何在打开时偏移 ImageWindow 的“缩放到”或“平移到”位置？

> ID：10833251
> 
> 赞同：0
> 
> 时间：2012-05-31T12:04:23.237
> 
> 标签：javascript, google-maps-api-3

我已经修改了标准信息窗口以在顶部包含自定义标签栏。

因此，自动平移无法正常工作，因为有一部分`InfoWindow`未被识别，从而导致此有缺陷的输出：

![它是如何渲染的。](../Images/3df293c3f242a028e66f29fba90e55ca.png)

现在我想在 y 轴上偏移大约 30px 计算的 panTo 位置`infoWindow.open()`，但我不知道这是否可能，如果可以，如何。

![应该如何呈现](../Images/6a1163e5b443766a12b88b05d1811d42.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:33:37.740

调用方法时，与[infoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)使用的区域没有直接关系。`open()`您应该设置`disableAutoPan`为[infoWindowOptions](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)对象并使用map 的方法，并在传递的对象上设置偏移`true`量。`panTo()``LatLng`

# oop - 系统选项属于哪一层——它们是如何实现的——你如何以编程方式访问它们？

> ID：10833252
> 
> 赞同：0
> 
> 时间：2012-05-31T12:04:30.043
> 
> 标签：oop, class, architecture, options

我想首先说我对软件开发比较陌生（过去一年我一直在自学）。

我最近一直在尝试了解软件应用程序中的不同层，即 UI、业务逻辑层和数据访问层。为了将我学到的知识付诸实践，我正在开发一个应用程序，它允许您备份数据库，然后在以后恢复它们的备份。

我的问题是，我应该如何设计我的“系统”和“用户”选项。例如，我想让用户选择他们选择的数据库平台（即 SQL 或 Oracle）。我打算将信息存储在 XLM 文件中。我只是不知道我应该如何以编程方式访问这些信息（我**确实**了解如何读取和写入 XML 文件。

我目前的架构看起来像这样：（请注意这可能是一个糟糕的设计，我很高兴并愿意接受建设性的批评）。

UI：主 MDI。用户选项表单 数据库管理器表单

BLL：Database Manager 类，用于驱动数据库管理器表单。

DAL：每种不同类型的数据库平台都有一个类，所有这些类都必须实现我设计的“DatabasePlatform”接口。这背后的想法是允许我在以后添加额外的平台，几乎不需要修改代码（我正在尝试降低“开放封闭”的原则！）

我有点不确定，并且很困惑我的系统选项在哪里以及如何适应所有这些，以及最终将它们放置在哪里？在什么时候检查系统选项？是在 UI 中还是在 BLL 中？我觉得它不应该在 DAL 中检查，因为我需要知道选择哪个 DAL.... 也许我设计的完全错误，应该在 DAL 中检查它？我好纠结啊。。。。

最后，是否应该将我的系统选项放入静态类中，以便我可以从任何其他类/表单/实体调用我的系统选项而无需创建实例？

我非常感谢并欢迎任何反馈/批评。为任何语法问题道歉，英语不是我的第一语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:24:53.070

如果我理解正确 - 这就是基础设施层的一部分，问题是如何在解决特定业务问题之前正确设置运行时。

这是实体组织的一种可能方式。

UI 表单从配置源加载它的模型 - xml 文件 - 并显示一个下拉控件。根据用户的反应，它会将消息发送到`RuntimeConfigurationService`类似`RuntimeConfigurationService.SettingsChanged`.

我假设您存储数据的方式与 BLL 没有直接关系。这就是我将 RuntimeConfigurationService 指示为应用程序基础结构层的一部分的方式。

RuntimeConfigurationService 可以执行以下操作：

```
SettingsChanged(name) {
    DBProviderName = name;
    DBProviderFactory = CreateFactory(name);

    CreateFactory(name) {
        switch(name)
         case "sql": return new SQLProviderFactory();
         case "oracle": return new OracleProviderFactory();
    }
} 
```

两个工厂都`IProvider Create();`以自己的方式实现方法。

然后，当某些 BLL 或其他类需要提供程序时，它会调用`RuntimeConfigurationService.DBProviderFactory.Create()`、获取`IProvider`接口并使用它。

RuntimeConfigurationService 可以是静态的或单例的。

如果你使用依赖注入，你可以注册 IProvider 有点像 'IOC.Register.To(RuntimeConfigurationService.DBProviderFactory.Create())'

# asp.net-mvc - 将模型属性传递给局部视图时如何保持正确的模型绑定行为？

> ID：10833257
> 
> 赞同：4
> 
> 时间：2012-05-31T12:04:51.770
> 
> 标签：asp.net-mvc, partial-views, model-binding, mvc-editor-templates

在 ASP.NET MVC 中，我想重用一组常用的信用卡字段，方法是将它们放在部分视图中，然后在父视图的另一个表单中呈现该部分视图。

问题是，如果 CreditCard 对象是模型的一部分，它本身就是一个复杂的对象，当我将它传递给部分视图时，在表单提交时，字段名称缺少父属性名称前缀，这将允许默认模型绑定器将字段映射到复杂对象的正确属性。

**以部分视图呈现的信用卡字段（不正确的行为）：**

```
@Html.RenderPartial("~/Views/Pay/CCForm.cshtml", Model.CreditCard ,
 new ViewDataDictionary()); 
```

帖子字符串：

PayOption=1&CreditCardNumberPlainText=0000000000000&StartDateMm=03&StartDateYyyy=2008&ExpiryDateMm=03&ExpiryDateYyyy=2017&SecurityCode=111&IssueNumber=1&X-Requested-With=XMLHttpRequest

**标准表单（正确行为），其中信用卡字段在主视图中呈现，其中包含以下字段：**

```
@Html.TextBoxFor(x => x.CreditCard.IssueNumber, new {@maxlength = 3, @size = 3}) 
```

帖子字符串：

PayOption=1&CreditCardInfo.CreditCardNumberPlainText=0000000000000000&CreditCardInfo.StartDateMm=02&CreditCardInfo.StartDateYyyy=2009&CreditCardInfo.ExpiryDateMm=04&CreditCardInfo.ExpiryDateYyyy=2014&CreditCardInfo.IssHttpNumber.Request=111&XCreditCardInfo.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:14:22.957

为什么不为这个 CreditCard 类创建一个 EditorTemplate，然后在你的父视图中使用它

*例如*

EditorTemplate：`CreditCard.cshtml`在`EditorTemplates`文件夹中的文件夹中，`Shared`在此文件中添加 CreditCard 的编辑字段。像这样的东西：

```
@Html.EditorFor(x => x.IssueNumber)
//........... So on. 
```

那么在您看来，只需致电：

```
@Html.EditorFor(x => x.CreditCard) 
```

# java - 当前活动后面的开始活动

> ID：10833258
> 
> 赞同：0
> 
> 时间：2012-05-31T12:04:58.993
> 
> 标签：java, android, android-activity

我可以在当前活动之后开始活动吗？我想通过我的服务更改主页活动（启动器），但当前的前台活动已关闭。我怎么解决这个问题？我可以更改活动堆栈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:56:05.693

好吧，这听起来很有趣，但我想，根据前面活动的复杂性，您可以尝试以下操作：

*   保存当前活动的状态（如果与您相关）
*   完成当前活动
*   开始没有动画的“后面”活动
*   开始我们在没有动画的情况下完成的活动，恢复可见状态

一举一动，希望（撇开图形故障不谈）这将提供您想要的感觉。不过，我只是出于纯粹的好奇才这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:36:43.583

只要 Activity 位于视图的顶部，它就在执行中。一旦启动另一个活动，第一个活动就会暂停和/或停止。所以，我认为你不能在后台或后面启动活动，如果这就是你的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:10:26.570

您不能在后台启动活动！

我也认为你不能改变堆栈，但你可以做的是通过你的服务的意图启动你想要的活动。在这种情况下，它应该感觉像是“开始活动”。

通过获取当前 Activity 的上下文：

```
Intent serviceStartActivity = new Intent(getBaseContext(), anyActivity.class);
serviceStartActivity.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(serviceStartActivity); 
```

# c# - MEF CachedAssemblyCatalog - 组件的延迟加载

> ID：10833262
> 
> 赞同：4
> 
> 时间：2012-05-31T12:05:19.537
> 
> 标签：c#, .net, assemblies, lazy-loading, mef

我对[旧版本 MEF](http://mef.codeplex.com/releases/view/40606)`CachedAssemblyCatalog`中提供的示例中引入的类非常感兴趣- 它允许加载仅包含导出数据而不是整个程序集的小程序集，并且仅在需要该程序集的一部分时才加载完整程序集.

我想在我的应用程序中使用此功能，但我不确定此代码的稳定性/可靠性，以及是否有任何关于此功能的未来计划。它是否计划很快成为 MEF 的一个组成部分，或者根本就没有？

有没有人在他的应用程序中使用过这个代码并且可以分享他的印象？稳定吗？它是否按预期工作？Google 上几乎没有此类目录的可用数据以及缓存示例不再出现在[当前可用的示例](http://mef.codeplex.com/documentation)中，这让我有点沮丧。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:23:57.330

得到了这个@ [MEF's forums](http://mef.codeplex.com/discussions/357611)的简短回答。

> 我们没有积极维护这个样本，也不认为它是稳定的。希望它对您有所帮助，但我们没有任何更新或进一步开发它的计划。

不是我所希望的。我认为这可能是一个非常有用的功能。

**编辑：**我最终自己实现了这个并[在 GitHub 上提供了它](https://github.com/lestera/LazyAssemblyLoading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:17:04.667

不确定兑现的程序集，但随着 MEF 的进行，我会搜索 Bryans 的博客：[http ://www.bryanavery.co.uk/post/2010/05/27/Using-MEF-to-provide-PlugIns.aspx](http://www.bryanavery.co.uk/post/2010/05/27/Using-MEF-to-provide-PlugIns.aspx)

在一般情况下，使用 MEF 使用导出和导入比我使用过的任何其他 IoC 都要快得多。

只要您有正确的 dll 位置，代码的稳定性就很好。

您也可以在这里找到简单的代码示例：http: [//daysincode.blogspot.co.uk/2012/04/implementing-mef-with-list-of.html](http://daysincode.blogspot.co.uk/2012/04/implementing-mef-with-list-of.html)

否则，我对 MEF 最困难的事情是了解它如何组合在一起以及如何构建引用集合。它为您的应用程序提供了非常即插即用的选项，以及升级每个实现的简单方法。

如果您还有其他问题，请询问

# java - 如何在 jtable 标题中添加复选框，以便只有我可以根据用户的意愿要求打印选中的列？

> ID：10833264
> 
> 赞同：0
> 
> 时间：2012-05-31T12:05:26.787
> 
> 标签：java, swing

实际上，我的需要是我有一个 38 列的 jtable，我想调用选定的 Jtable 列进行打印。问题不是打印功能，而是如何标记要打印的列？请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:25:00.667

[对于JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中的特定列，您可以将[RowFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)`String value "true"`传递给checked和un_checked ，然后打印 JTable 并 在打印到打印机后清除`JCheckBox(es)``String value "false"``JCheckBox(es)``String to ""``RowFilter`

或更简单的可能是直接使用布尔值

![在此处输入图像描述](../Images/bcc1d51660e124c94a63e6ac25e17e40.png) ![在此处输入图像描述](../Images/94b5a39ced2b7e377368a01f5c5ced47.png)

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import javax.swing.*;
import javax.swing.RowFilter;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

public class JTableFilterDemo {

    private static TableRowSorter<TableModel> sorter;

    public static void main(String[] args) {
        Object[][] data = {{"A", 5, true}, {"B", 2, false}, {"C", 4, false}, {"D", 8, true}};
        String columnNames[] = {"Item", "Value", "Boolean"};
        TableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class<?> getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        JTable table = new JTable(model);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        RowFilter<Object, Object> filter = new RowFilter<Object, Object>() {

            public boolean include(Entry entry) {
                Boolean bol = (Boolean) entry.getValue(2);
                return bol.booleanValue() == true;
            }
        };
        sorter = new TableRowSorter<TableModel>(model);
        sorter.setRowFilter(filter);
        table.setRowSorter(sorter);
        JScrollPane scrollPane = new JScrollPane(table);
        JFrame frame = new JFrame("Filtering Table");
        frame.add(new JButton(new AbstractAction("Toggle filter") {

            private static final long serialVersionUID = 1L;
            private RowFilter<TableModel, Object> filter = new RowFilter<TableModel, Object>() {

                @Override
                public boolean include(javax.swing.RowFilter.Entry<? extends TableModel, ? extends Object> entry) {
                    Boolean bol = (Boolean) entry.getValue(2);
                    return bol.booleanValue() == false;
                }
            };

            @Override
            public void actionPerformed(ActionEvent e) {
                if (sorter.getRowFilter() != null) {
                    sorter.setRowFilter(null);
                } else {
                    sorter.setRowFilter(filter);
                }
            }
        }), BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# java - 如何从 ListView 和 SharedPreferences 中删除特定项目？

> ID：10833267
> 
> 赞同：1
> 
> 时间：2012-05-31T12:05:35.173
> 
> 标签：java, android, listview, sharedpreferences

我将 History 项目（单词）保存到 SharedPreferences，并且 History 已很好地加载以在 ListView 中查看。然后，我使用这些代码行从 ListView 中删除特定项目：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
        case R.id.edit:
            editNote(info.id);
            return true;
        case R.id.delete:
            String content = (String) mLSTHistory.getItemAtPosition(info.position);
               aptList.remove(content);
               aptList.notifyDataSetChanged();
            deleteNote(info.id);
            return true;
        default:
            return super.onContextItemSelected(item);
    }
}
private void deleteNote(long id) {
    // TODO Auto-generated method stub
    if (prefs.getBoolean("saveHistory", true) && mWordHistory != null && mWordHistory.size() >= 1)

    prefs =   PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    StringBuilder sbHistory = new StringBuilder();
    for (String item : mWordHistory)
    {
        sbHistory.append(item);
        sbHistory.append(",");

    String strHistory = sbHistory.substring(0, sbHistory.length()-1);
    SharedPreferences.Editor editor = prefs.edit();
    //editor.remove(content);
    editor.putString("history", strHistory);
    editor.commit();
    }
}
private void editNote(long id) {
    // TODO Auto-generated method stub

} 
```

选定的项目肯定会从 ListView 中删除，但不会从保存它的 SharedPreferences 中删除。因此，当重新加载 Listview 时，该项目仍然存在。

**我的问题是：*我如何编码以从 SharePreferences 中删除选定的项目？*我的意思是*如何从 ListView 和 SharedPreferences 中删除所选项目？***

如果您可以根据我的代码提供说明，那就太好了，因为我对 Android 还很陌生。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:09:51.887

要清除共享偏好，请使用

```
editor.clear();
editor.commit(); 
```

另外，如果我正确地回答了您的问题。要检查某个值是否存储在共享首选项中，请执行此操作

```
SharedPreferences mySharedPrefs = getSharedPreferences("MyPreferences", 0);
                if(mySharedPrefs.contains("theKey")) {
SharedPreferences.Editor editor = settings.edit();
                editor.remove("thekey");
                editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:14:49.383

试试这个

```
editor.remove("UserName");
editor.clear();
editor.putString("history",strHistory);   
editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-15T09:57:40.577

我找到了解决方案。基本上，您要做的就是从列表视图中删除该特定项目，然后再次将更新后的列表添加到 sharedpreference 中，这样它将覆盖共享首选项。

```
listView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> adapterView, View view, int i, long l) {
            addPlace.remove(i);

            arrayAdapter.notifyDataSetChanged();
            try {
                sharedPreferences.edit().putString("places", ObjectSerializer.serialize(MainActivity.addPlace)).apply();  add the updated shared pref again that will override previous saved.

            } catch (IOException e) {
                e.printStackTrace();
            }

            return false;
        }
    }); 
```

# java - Apache CXF - 请求 Bean 错误

> ID：10833272
> 
> 赞同：0
> 
> 时间：2012-05-31T12:05:55.450
> 
> 标签：java, json, rest, xsd, cxf

我正在尝试通过 xsds 验证传入的 jsons。我暴露了几个服务，每个服务都有不同的 JSON，每个服务都映射到不同的 POJO。所以我写了一个主xsd，它将包含JSON的所有根元素作为子元素，并将导入相应的xsd。

现在的问题是我总是得到这个异常：

```
WARNING: javax.xml.bind.UnmarshalException
 - with linked exception:
Caused by: org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'RequestBean'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement 
```

我的 xsd 是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/RequestBean"
    xmlns:tns="http://www.example.org/RequestBean" elementFormDefault="unqualified"
    xmlns:poi="http://www.example.org/PoiRequest" xmlns:sendcar="http://www.example.org/SendCar">
 <xs:import namespace="http://www.example.org/PoiRequest"
            schemaLocation="PoiRequest.xsd"/>
 <xs:import namespace="http://www.example.org/SendCar"
            schemaLocation="SendCar.xsd"/>
    <xs:element name="RequestBean">
        <xs:complexType>
            <xs:all>
                <xs:element name="PoiRequest" type="poi:PoiRequest" minOccurs="0"/>
                <xs:element name="SendCar" type="sendcar:SendCar" minOccurs="0"/>
                </xs:all>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我的配置如下：

```
<jaxrs:server id="restContainer" address="/">
        <jaxrs:serviceBeans>
            <ref bean="PoiSearch" />
            <ref bean="SendCar" />
        </jaxrs:serviceBeans>
        <jaxrs:providers>
            <bean class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
            <property name="dropRootElement" value="true" /> 
            <property name="supportUnwrapped" value="true" />                               </bean>
        </jaxrs:providers> 
        <jaxrs:schemaLocations>
        <jaxrs:schemaLocation>file:C:\Desktop\xsds\RequestBean.xsd</jaxrs:schemaLocation>       <jaxrs:schemaLocation>file:C:\Desktop\xsds\PoiRequest.xsd</jaxrs:schemaLocation>
    <jaxrs:schemaLocation>file:C:\Desktop\xsds\Route.xsd</jaxrs:schemaLocation>
    <jaxrs:schemaLocation>file:C:\Desktop\xsds\Poi.xsd</jaxrs:schemaLocation>
    <jaxrs:schemaLocation>file:C:\Desktop\xsds\SendCar.xsd</jaxrs:schemaLocation> 

        </jaxrs:schemaLocations>
    </jaxrs:server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:01:17.237

您首先要检查的是名称空间或您的 XML 文档元素。您的错误指向一个不合格的名称，而您的 XSD 使用 RequestBean 的目标名称空间。

# android - Android SQLiteOpenHelper 填表

> ID：10833284
> 
> 赞同：0
> 
> 时间：2012-05-31T12:07:16.397
> 
> 标签：android, sqlite

请告诉我，重启应用程序后 SQLiteOpenHelper 如何填充表？我有方法 onCreate() 和 onUpdate() 并且通过教程它们都只是处理表的元数据。

我的意思是，在重新启动应用程序后，android 通常如何保留相同的 db 状态？为了保存数据并在重新启动后拥有它们，我必须做些什么。不是只有空桌子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:32:24.537

在**onPause()方法中保存数据，在****onResume()**方法中恢复数据。

在[http://developer.android.com/reference/android/app/Activity.html阅读生命周期图总是很有帮助的](http://developer.android.com/reference/android/app/Activity.html)

# ajax - XSP.partialRefreshGet - 不发送值也不触发事件

> ID：10833288
> 
> 赞同：0
> 
> 时间：2012-05-31T12:07:21.043
> 
> 标签：ajax, xpages, xpages-ssjs

现在花了几个小时在这上面，我已经走到了尽头......

有人可以告诉为什么以下不起作用：

刚刚在 Domino 8.5.3 服务器上创建了一个全新的数据库，所有默认设置。

我期望发生的是“$$xspsubmitvalue”应该包含“whatYouWantToSendHere”，但它是空的。

我正在使用 URL 打开 XPage：`/fresh.nsf/test.xsp?Open&Login`

这是按下按钮后的请求 URL：

```
/fresh.nsf/test.xsp?Open&Login&$$ajaxid=view%3A_id1%3ArefreshMe 
```

这是表单数据：

```
$$viewid:!d6g1y5acmu!

$$xspsubmitid:view:_id1:_id2

$$xspexecid:

**$$xspsubmitvalue:**

$$xspsubmitscroll:0|0

view:_id1:view:_id1 
```

非常感谢一些输入！

谢谢！

/J

源代码

[http://pastebin.com/nyQYaRUC](http://pastebin.com/nyQYaRUC)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:28:23.680

好吧，首先，我相信您在调用 partialRefreshGet 函数的末尾有一个额外的“，{}” - partialRefreshGet 只接受两个参数，ID 和选项对象，但这不是你的问题。

问题是这一切都发生在一个按钮内，该按钮也在进行部分刷新 - 因为部分刷新是异步的，一次只能发生一次部分刷新，所以执行部分​​的代码与按钮单击的冲突动作做局部。在您的按钮上设置 submit="false" 并查看它是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:28:34.150

您的按钮代码“损坏”：它会触发部分刷新，并且永远不会执行 CSJS 代码。

改变这个

```
<xp:eventHandler
        event="onclick"
        submit="true"
        refreshMode="partial"
        refreshId="refreshMe"> 
```

对此

```
<xp:eventHandler event="onclick" submit="false"> 
```

然后它将根据需要工作。

**编辑**

将执行正常的 CSJS 代码，但不会执行基于 CSJS 的部分刷新，因为内部阻塞（存储在 XSP.lastSubmit 中的时间戳）。

# python - 重塑一个numpy数组

> ID：10833289
> 
> 赞同：0
> 
> 时间：2012-05-31T12:07:21.597
> 
> 标签：python, arrays, numpy, reshape

我想在 iPython 中重塑以下 numpy 数组：

```
array([[1, 2, 3, 4],[5, 6, 7, 8],[9, 10, 11, 12]]) # Array A 
```

到：

```
array([[1, 5, 9],[2, 6, 10],[3, 7, 11],[4, 8, 12]]) # Array B 
```

主要任务是计算数组 A 的第一个元素的平均值（即 1、5、9 的平均值），然后是第二个元素，等等。

我认为最简单的方法是重塑数组，然后计算它的平均值。

有没有办法在不通过循环遍历数组的情况下做到这一点`for`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T12:11:12.587

使用`axis`关键字 on `mean`; 无需`reshape`：

```
>>> A = np.array([[1, 2, 3, 4],[5, 6, 7, 8],[9, 10, 11, 12]])
>>> A.mean(axis=0)
array([ 5.,  6.,  7.,  8.]) 
```

如果您确实想要数组`B`，那么您需要转置数组，而不是重塑它：

```
>>> A.T
array([[ 1,  5,  9],
       [ 2,  6, 10],
       [ 3,  7, 11],
       [ 4,  8, 12]]) 
```

但是你需要给`axis=1`to `mean`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:10:52.690

要进行这种计算，您应该使用 numpy.

假设 a 是您的起始数组：

```
a.transpose() 
```

会成功的

# jquery - 带有淡入和淡出的幻灯片（jquery）

> ID：10833292
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:07:31.720
> 
> 标签：jquery

请帮助我，告诉我这里出了什么问题....我也不想使用 jq 插件，当我 setInterval 代码时，图片以不同的方式出现，对不起我的英语不好

```
<code>
    $(function(){
        function slideshow(){
        $('.img4').fadeOut(2800,null,function(){
                $('.img3').fadeOut(2800,null,function(){
                    $('.img2').fadeOut(2800,null,function(){
                        $('.img1').fadeIn(2800,null,function(){
                            $('.img2').fadeIn(2800,null,function(){
                                $('.img3').fadeIn(2800,null,function(){
                                    $('.img4').fadeIn(2800,null,function(){
                                        $('.img4').fadeOut(2800)
                                    })
                                })
                            })
                        })
                    })  
                })
            })
        }
        //slideshow()
        setInterval(slideshow,1000);

</code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:15:09.687

这里有很多问题......

1.  不要使用单独的选择器来获取图像。以编程方式找出它们 - 否则每次添加/删除图像时都必须更改代码。
2.  不要为你的回调重复回调代码，让它成为一个接受参数的函数。
3.  不要使用，`setInterval`而是使用`setTimeout`并在必要时清除您的回调并初始化新的超时。

也就是说，这些是处理编码风格和最佳实践的更多最佳问题，不一定对您的实际问题负责。但是你从来没有确切地说明问题是什么。如果您可以编辑您的问题并进行详细说明，那将很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:16:02.367

我相信您有充分的理由构建自定义幻灯片，但如果我可以建议使用插件来避免无法维护的代码？

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:16:57.167

您每秒钟都在开始一个新的幻灯片，所以过了一会儿，您将有数百个幻灯片尝试为相同的对象设置动画。

而不是有一个开始新幻灯片的间隔，而是在第一个完成时开始下一个：

```
$(function(){
  function slideshow(){
    $('.img4').fadeOut(2800,null,function(){
      $('.img3').fadeOut(2800,null,function(){
        $('.img2').fadeOut(2800,null,function(){
          $('.img1').fadeIn(2800,null,function(){
            $('.img2').fadeIn(2800,null,function(){
              $('.img3').fadeIn(2800,null,function(){
                $('.img4').fadeIn(2800,null,function(){
                  slideshow();
                })
              })
            })
          })
        })  
      })
    })
  }
  slideshow();
}); 
```

# iphone - iphone在横向模式下隐藏状态栏时的问题

> ID：10833293
> 
> 赞同：0
> 
> 时间：2012-05-31T12:07:31.887
> 
> 标签：iphone, hide, landscape, statusbar, uiapplication

在我的 iPhone 应用程序中，整个应用程序的默认方向是横向模式。我想隐藏状态栏，所以我`[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];`在appDelegate中使用了。但是状态栏只隐藏在第一个初始屏幕中，并且在视图控制器中它在顶部留下一个空白区域，在所有其他视图控制器中它在底部留下一个空白区域。我使用以下方法解决了这个问题，但没有奏效。

1.  `[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];`

2.  在 info.plist 状态栏最初是`hidden = YES`

3.  `None`在界面生成器中设置状态栏等于。

4.  添加`[self.view setNeedsLayout];`
    `[self setWantsFullScreenLayout:YES];`

仍然没有固定。任何想法？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T03:26:37.967

找到了解决办法，隐藏状态栏`[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];`就够了。但还是有一片空白。当我通过 Interface Builder 将视图添加到视图控制器时，当状态栏被隐藏时，每个视图的帧大小不会自动调整。因此，我必须在 Interface Builder 的 Size Inspector 中为每个视图设置 Autoresizing 方向。这解决了这个问题。希望它对某些人有所帮助，这就是我在这里发布答案的原因。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:24:12.597

打开您的 .plist 文件并添加一个新键“状态栏最初是隐藏的”，然后将值设置为 YES。我希望这对你有帮助。

# c# - 如何在 WPF 项目的 VS 2010 包管理器控制台中执行命令

> ID：10833298
> 
> 赞同：0
> 
> 时间：2012-05-31T12:07:42.880
> 
> 标签：c#, visual-studio-2010, project, package-managers

我试图找到我的问题的解决方案，但徒劳无功。我是 VS2010 包管理器控制台的新手。

我们已经使用 Pickles 启动了一个项目来生成我们所有的验收测试的文档树。要更新验收测试，我需要`pm>Pickle-Features -FeatureDirectory .\Features -OutputDirectory .\Html`手动输入。我之后是将其添加到我的 WPF c# 解决方案中，所以每次我编译我的项目时，我也会更新文档树。

我已经创建了一个测试项目并添加了以下帖子中的建议 [从 c# 代码执行 NuGet 命令](https://stackoverflow.com/questions/5047341/execute-a-nuget-command-from-c-sharp-code) 仍然，我无法让它工作。继续收到以下消息， `System.Management.Automation.CommandNotFoundException` 但是当我在 VS2010 包管理器控制台中运行该命令时，该命令就像一个魅力。

```
private void RunPowershell()
{
    const string command = "Pickle-Features -FeatureDirectory .\\Features -OutputDirectory .\\Html";
    try 
    {
        var powerShell = PowerShell.Create();
        powerShell.AddCommand(command);
        powerShell.Invoke();
    }
    catch (Exception e)
    {
        lbl.Content = e.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:15:38.323

我认为您应该将该命令作为WPF 项目[的构建后](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)事件命令行。

# c# - FileSystemWatcher 中的 LastWrite NotifyFilter

> ID：10833299
> 
> 赞同：2
> 
> 时间：2012-05-31T12:07:45.760
> 
> 标签：c#, excel, filesystemwatcher

我编写了一个实用程序来确定 Excel 文件何时更新。更新完成后，我必须阅读相同的 Excel 文件。但是，我没有收到有关更新的通知，而是通知了临时文件的创建（这对我没有用）。如何以 C# Windows 形式执行此操作？

这是使用的代码片段：

```
 watcher.EnableRaisingEvents = true;
                  watcher.Filter = "*.xlsx";
                  watcher.NotifyFilter =  NotifyFilters.LastWrite;
                  watcher.Path = "G:\\Prerequisites Folder";
                  watcher.SynchronizingObject = this;
                  watcher.Changed += new FileSystemEventHandler(watcher_Changed);

           void watcher_Changed(object sender, FileSystemEventArgs e)
           {

            if (e.Name.StartsWith("~") == false)
                  btnRefreshPrequisites_Click(null, null);
            } 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:27:34.373

这是设计使然，是许多程序的常用方法。修改文件时，他们会尝试确保这些修改不会在因任何原因失败时破坏原始文件。所以他们将原始文件复制到一个临时名称，对该临时文件进行更改。并且当没有问题时，重命名原始，重命名临时给它与原始相同的名称，最后删除重命名的原始。

因此，您还需要对 Renamed 事件感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:02:03.120

```
void watcher_Changed(object sender, FileSystemEventArgs e)
       {
        //no need to check if (e.Name.StartsWith("~") == false)
         // comment the if statement
        if (e.Name.StartsWith("~") == false)
              btnRefreshPrequisites_Click(null, null);

         //do your work
        } 
```

# c++ - 堆损坏：如果我不关闭 (Q) 文件会发生什么？

> ID：10833301
> 
> 赞同：1
> 
> 时间：2012-05-31T12:07:51.853
> 
> 标签：c++, qt, qfile

我在函数中打开了一个（Q）文件，但我忘记关闭它（因为我写错了代码）。内存、缓冲区和我的信息会怎样？

示例（C++）：

```
void myFunction(QString path)
{
    QFile file(path);
    file.open(...);

    if( _myWrongCondition_ )
    {
        informations = // do something
        writeInformationToFile(file,informations);
        file.close;
    }
} 
```

假设我在一个`while`. 这会引发**堆损坏**吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:09:06.450

不，忘记释放资源（例如文件）不会破坏任何东西。

如果获取的资源是动态分配的内存，它将不会被释放，并且您将遇到内存泄漏。

在这种情况下，如果您忽略调用该`close()`函数，则根本不会发生任何事情，因为`file`已分配堆栈，编译器将在超出范围时发出代码以调用其析构函数（在函数末尾，在该代码中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:09:19.067

QFile 的析构函数会自动关闭它。所以你不会有任何内存损坏。

# django - Django 上下文处理器在没有视图的情况下可用

> ID：10833302
> 
> 赞同：1
> 
> 时间：2012-05-31T12:08:01.597
> 
> 标签：django, django-context

我想查询所有产品并使用上下文处理器将它们加载到以 category-id 作为键的字典中。然后我想让这个 dict 在模板中可用，以便将它作为参数发送到模板标签。

是否可以在没有视图的情况下使用上下文？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:45:48.573

当您可以从模板标签的代码本身加载您的产品时，为什么要“让模板在模板中可用以将其发送到模板标签”？

wrt/ RequestContext，它是一个非常普通的 python 类，没有任何特殊的魔法：你只需要导入这个类并实例化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:11:47.053

上下文处理器与视图无关。每次创建 RequestContext 时都会运行它们，您经常将其作为其中的一部分，`render_to_response`但当然可以在此之外进行。

# visual-studio-2010 - 可折叠的 CSHTML 文件和资源

> ID：10833308
> 
> 赞同：1
> 
> 时间：2012-05-31T12:08:36.623
> 
> 标签：visual-studio-2010, razor, collapse

Razor 视图文件通常没有可折叠状态，除非我们通过直接编辑 CSPROJ 文件手动添加一些依赖文件。

这适用于其他内容文件，如我的图像上显示的 javascript 文件。我只需要`DependentUpon`在 CSPROJ 文件中手动添加 XML 元素以显示在下面。

![可折叠的 CSHTML](../Images/18a115d9ec5e22cace3766166bf377fa.png)

**我想解决的问题**是如何在我的 CSHTML 视图文件下添加资源文件？资源当然没有在 CSPROJ 中列为内容，因为它们是嵌入式资源......

最好的方法当然是当我们添加一个附加文件并且整个文件名等于其他文件的扩展名时，Visual Studio 会自动执行此操作，它应该把它放在下面。但是 VS 不会自动执行此操作，所以...

## 这可能吗？原生的？也许使用 VS 插件？

# java - Jasper Report 冻结 html 报告的标题

> ID：10833314
> 
> 赞同：1
> 
> 时间：2012-05-31T12:09:10.010
> 
> 标签：java, jasper-reports

我正在寻找一种解决方案，可以“冻结”或修复 Jasper Reports 4.* 生成的 HTML 报告的标题栏。表格主体应该是可滚动的，而标题始终保持在顶部。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:19:57.693

我认为，您可以通过使用 CSS 来做到这一点。细节带将在表格中，使其固定高度并且溢出将是可滚动的。

在标题带中，您将有静态文本或文本元素，您可以在那里放置 css 样式，尝试设置 position = fixed，这将使您的标题部分固定在页面上。

另一种方法是使用 jQuery，检查你的标题的 css class/id，你可以编写 jquery 将 css 位置属性更改为 position:fixed。

# php - 如何在插入数据之前检查错误

> ID：10833315
> 
> 赞同：0
> 
> 时间：2012-05-31T12:09:11.137
> 
> 标签：php, mysql, error-handling, insert

我想向 DB 写入几个查询以保存 5 个用户。但在保存它们之前，我必须确定错误。例如，我插入了第一个用户，没有错误。但是在尝试保存第二个之后，出现了错误（注意：不仅重复错误）。之后，我必须取消我保存的所有数据，并从 DB 中删除第一个数据。这是个坏主意，最好以某种方式检查错误，然后保存所有 3 个用户......

问题：如何在插入数据之前检查错误。

注意：仅检查数据是否存在是不够的，因为可能会出现另一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:11:15.140

考虑将您的查询包装在一个[事务](http://dev.mysql.com/doc/refman/5.5/en/commit.html)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:11:19.647

您正在寻找的是交易。这样，您将所有语句发送到服务器，然后在类似于沙箱的东西中执行，服务器检查错误，然后（如果没有错误！）它保存数据。

这可以通过将语句包装在 MySQL 中来完成：

```
BEGIN;
YOUR QUERIES GO HERE
COMMIT; 
```

有关更多详细信息，您可以查看[此文档](http://dev.mysql.com/doc/refman/5.5/en/commit.html)。请注意，并非所有 MySQL 引擎都支持事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:14:15.803

您是否尝试过使用**事务**一次将所有更改提交到数据库？然后，如果其中任何一个失败，所有将被回滚。

见[http://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:31:50.893

您需要在此处使用事务以更安全地插入数据库。

数据库表：`users having 3 fields u_id int , u_name varchar, u_email varchar`

```
<?php
$dbh = mysqli_connect("localhost", "db_user", "password", "databse_name");
mysqli_autocommit($dbh, FALSE);

// run query 1
$query1 = "INSERT INTO users (u_name,u_email) VALUES('Abdus Samad1', 'abdul.samad1@...')";
$result = mysqli_query($dbh, $query1);
if ($result !== TRUE) {
    mysqli_rollback($dbh);  // if error, roll back transaction
}

// run query 2
$query2 = "INSERT INTO users (u_name,u_email) VALUES('Abdus Samad2', abdul.samad2@...)";
$result = mysqli_query($dbh, $query2);
if ($result !== TRUE) {
  mysqli_rollback($dbh); // if error, roll back transaction
  echo "Error found in one of queries";
}
else{
  echo "Success";
}

// assuming no errors, commit transaction
mysqli_commit($dbh);

// close connection
mysqli_close($dbh);
?> 
```

# linux - Pthread 线程和信号

> ID：10833317
> 
> 赞同：10
> 
> 时间：2012-05-31T12:09:17.210
> 
> 标签：linux, pthreads, signals

我在 Linux 下使用 pthread 库来创建线程，我对此类应用程序中的信号处理有两个问题。

我知道信号处理程序是进程范围的，这意味着如果我在进程中设置处理程序，每个线程都会有这个信号处理程序，我也知道有`pthread_kill`向特定线程发送信号的功能。

我有一个关于使用例如 shell`kill`命令发送信号的问题，据我了解，如果我输入例如，`kill -INT PID`我将使用这个发送`SIGINT`到进程`PID`，如果这是多线程程序，则信号将被传递到这个进程中的一个线程.

第一个问题，我不能保证这个信号将被传递到哪个线程，我只能确定它会被传递到一个线程，而信号掩码中没有这个信号？

如果是这样的话，传递给特定线程的少数信号怎么样，比如'SIGFPE'，'SIGSEGV'，如果我将使用`kill`shell 命令发送它们，它们将被传递给随机线程，还是被传递给创建其他线程的线程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T12:26:39.847

引用[man pthreads](http://linux.die.net/man/7/pthreads)

> POSIX.1 区分了指向整个进程的信号和指向单个线程的信号的概念。根据 POSIX.1，进程导向的信号（例如，使用 kill(2) 发送）应该由进程中的一个任意选择的线程处理。

在 glibc 2.2 和更早的版本（使用 linuxthreads 作为 pthread 实现）时，Linux 中存在一些问题；但由于 glibc 2.3-2.4 有 NPTL，它在关于信号的 POSIX 一致性方面更准确。

> 我只能确定它会在信号掩码中没有这个信号的情况下被传递到一个线程吗？

如果您使用的是 kill - 是的；到不阻塞此信号的随机线程。

> 如果是这样，那么传递给特定线程的少数信号呢，例如'SIGFPE'，'SIGSEGV'，

它们仅在由 CPU/内核（在某些上下文中通过特定指令）生成时才交付给特定线程；不是由`kill`带有 PID 参数的实用程序

> 如果我将使用 kill shell 命令发送它们，它们将被传递到随机线程还是将它们传递到创建其他线程的线程？

它们将被传递到进程的随机线程，kill 通常发送进程范围的信号。但是如果信号是致命的，进程中的所有线程都将被销毁。

PS：[http ://www.linuxprogrammingblog.com/all-about-linux-signals?page=11](http://www.linuxprogrammingblog.com/all-about-linux-signals?page=11)

# python - Python类和实例属性混淆

> ID：10833320
> 
> 赞同：1
> 
> 时间：2012-05-31T12:09:23.607
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

上课

```
class ValidationResult():
    def __init__(self, passed=True, messages=[], stop=False):
        self.passed = passed
        self.messages = messages
        self.stop = stop 
```

跑步

```
foo = ValidationResult()
bar = ValidationResult() 
foo.messages.append("Foos message")  
print foo.messages
print bar.messages 
```

生产

```
['Foos message']
['Foos message'] 
```

然而这

```
foo = ValidationResult()
bar = ValidationResult(messages=["Bars message"]) 
foo.messages.append("Foos message")  
print foo.messages
print bar.messages 
```

生产

```
['Foos message']
['Bars message'] 
```

我想我在这里错过了理解实例属性的机会。在第一个示例中，我期望`Foos message`的只是应用于`foo`. 什么是声明对象属性只能通过其实例可变的正确方法？

使用 Python 2.7.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:18:02.183

你可以看到这里发生了什么：

```
>>> class ValidationResult():
...     def __init__(self, passed=True, messages=[], stop=False):
...         self.passed = passed
...         self.messages = messages
...         print id(self.messages)
...         self.stop = stop
... 
>>> foo = ValidationResult()
4564756528
>>> bar = ValidationResult()
4564756528 
```

默认参数始终是内存中的同一个对象。列表的一种快速解决方法是为每个实例创建列表的副本：

```
>>> class ValidationResult():
...     def __init__(self, passed=True, messages=[], stop=False):
...         self.passed = passed
...         self.messages = messages[:]
...         print id(self.messages)
...         self.stop = stop
... 
>>> foo = ValidationResult()
4564756312
>>> bar = ValidationResult()
4564757032 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:16:32.263

用作参数默认值的空列表`messages`是一个全局变量。因此，在您的第一个示例中，是 True，而`foo.messages is bar.messages`在您的第二个示例中，您是 True。这是最经典的一个陷阱！`messages=["Bars message"]``bar.messages is not foo.messages`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:14:21.897

这是 python 函数中的一个小怪癖，在没有类的情况下也可以看到：

```
def foo(bar=[]):
    bar.append('boo')
    print bar

foo()
foo() 
```

“问题”是加载模块时创建默认参数（bar）。 如果您没有显式传递其他内容，则将继续传递**相同的对象作为 foo 的默认参数。**

使用可变默认参数的规范方法是使用标记值（通常是`None`），可以使用`is`运算符对其进行测试，以指示用户没有传递任何内容（当然，除非在您的函数中需要改变默认参数）。例如：

```
def foo(bar=None):
    if(bar is None):
       bar=[]
    bar.append('boo')
    print bar 
```

这是文档的[链接](http://docs.python.org/tutorial/controlflow.html#default-argument-values)——密切注意“重要警告”部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:27:18.403

不，与类属性与实例属性无关。

问题在于，Python 中的所有赋值都只是简单地绑定对对象的引用，因此任何用作`messages`参数`__init__`的值最终都会成为存储为`messages`属性的值；它不是复制的。当该值也在其他地方使用并且可以改变时，这是一个问题，因为对`messages`属性引用的对象的更改最终会影响对同一对象的其他引用。

由于您有`messages`参数 to的默认值，因此`__init__`每次在不提供值的情况下调用它时都会填充相同的对象。默认值是默认**值**，而不是用于创建新值的方法，因此每次使用默认值时，您得到相同的列表。

人们将此称为“可变默认参数”问题，但我认为它比这更普遍。如果你也明确通过`messages`，它很容易咬你。真正的问题是你正在改变一个输入参数（通过将一个对它的引用存储在一个实例属性中，然后你改变它），这绝不是一个好主意，除非改变对象是函数的*目的*。构造函数通常不是这样，所以如果你打算改变它，你应该复制列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:17:13.847

这`self.messages`是默认参数的别名。默认参数是由函数构造的，而不是调用者构造的。

```
class ValidationResult():
    def __init__(self, passed=True, messages=None, stop=False):
        self.passed = passed
        self.messages = messages if messages is not None else []
        self.stop = stop

>>> foo = ValidationResult()
>>> bar = ValidationResult() 
>>> foo.messages.append("Foos message")  
>>> print foo.messages
['Foos message']
>>> print bar.messages
[] 
```

# iphone - 故事板中 Xcode 4.2 的错误

> ID：10833321
> 
> 赞同：0
> 
> 时间：2012-05-31T12:09:24.373
> 
> 标签：iphone, ios, xcode, storyboard

我有一个带有条形按钮的视图控制器，它们都是在情节提要中创建的。现在我想将栏按钮更改为自定义视图。一切都在模拟器中完美运行。但是在我的 iphone 4 上好像没有出现 bar 按钮的变化。即使我删除了所有 bar 按钮后，它们在 iphone 4 上仍然存在。真是恶心。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:11:51.283

在 iPhone 上删除您的应用程序，执行 Product > Clean。然后再次构建并运行。

这是此类事情的标准操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:12:28.630

尝试从您的 iPhone 4 中删除该应用程序并重新构建它....我认为它与情节提要错误无关....

# java - TransactionManager read-only=true 不适用于 mysql ReplicationDriver

> ID：10833325
> 
> 赞同：4
> 
> 时间：2012-05-31T12:09:39.300
> 
> 标签：java, mysql, spring, hibernate, spring-transactions

我们使用 com.mysql.jdbc.ReplicationDriver 连接主/从。我们配置 transactionManager 如下。

```
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:advice id="txHbAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="get*" read-only="true" />
    </tx:attributes>
</tx:advice> 
```

我将只读参数设置为 true，但没有将`java.sql.Connection.setReadonly()`方法设置为 true。所有的读取查询仍然来自主服务器。

[这里](https://jira.springsource.org/browse/SPR-8303)有类似问题的未解决问题。有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T08:08:47.390

我的建议是围绕注释编写方面`@Transactional`，获取当前正在运行的会话，然后调用`doWork(Work work)`→ 并设置`connection.setReadOnly`是否设置`@transaction`了只读属性。我没有尝试过这个解决方案，但我认为它应该可以工作。

你也可以参考这个[解决方案](https://stackoverflow.com/questions/8694254/how-to-convert-a-read-only-hibernate-session-to-write-during-a-transaction-mast)。

# ios - UIWebView 将垂直滚动事件委托给父级，如果滚动到顶部或底部

> ID：10833333
> 
> 赞同：4
> 
> 时间：2012-05-31T12:10:19.207
> 
> 标签：ios, uiwebview, uiscrollview

我在 UIScrollView 中有一个 UIWebView，它是分页的。基本上我想用滚动/翻动手势在不同的 webviews 之间切换。水平地它工作正常。如果 webview 滚动到“页面的边框”，则将 scroll/pan 事件传递给 scrollview，以便显示下一页。在垂直轴上，这不起作用。似乎没有事件传递给滚动视图。这可能是我禁用的弹跳问题，因为我认为它会消耗事件。但即使禁用了弹跳，这也不起作用。

我之前在滚动视图中使用 TextViews 对此进行了测试，这也有效。可能是 webviews 的一种特殊行为。

任何想法，我如何让它工作？我是否必须实现事件侦听器并将事件手动传递给滚动视图？

此外，如果您对如何实现这种布局有更好的了解，请告诉我。正如我所说，我想要一个不同视图的网格，可以通过滑动/滚动手势进行更改。与 AppStore 应用程序类似，应用程序的详细信息可以垂直滚动，屏幕截图可以水平滚动。

干杯亨利克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T14:17:59.367

所以，我想通了。

首先，我设置了 webview 的委托，以便获得滚动事件并检查 webview 是滚动到顶部还是底部：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if([scrollView isEqual:webView.scrollView]) {
        float contentHeight = scrollView.contentSize.height;
        float height = scrollView.frame.size.height;
        float offset = scrollView.contentOffset.y;

        if(offset == 0) {
            webViewScrolledToTop = true;
            webViewScrolledToBottom = false;
        } else if(height + offset == contentHeight) {
            webViewScrolledToTop = false;
            webViewScrolledToBottom = true;
        } else {
            webViewScrolledToTop = false;
            webViewScrolledToBottom = false;
        }

        //NSLog(@"Webview is at top: %i or at bottom: %i", webViewScrolledToTop, webViewScrolledToBottom);
    }
}
```

然后我在 webview 的滚动视图中注册了额外的滑动手势识别器：

```
swipeUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeUp)];
swipeUp.direction = UISwipeGestureRecognizerDirectionUp;
swipeUp.delegate = self;
[self.webView.scrollView addGestureRecognizer:swipeUp];
[self.webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:swipeUp];
swipeDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeDown)];
swipeDown.direction = UISwipeGestureRecognizerDirectionDown;
swipeDown.delegate = self;
[self.webView.scrollView addGestureRecognizer:swipeDown];
[self.webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:swipeDown]; 
```

注意对 的调用`[self.webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:swipeUp];`。这些是绝对必要的，因为没有它们，webview 的平移手势识别器将始终在事件到达滑动手势识别器之前消耗事件。这些电话改变了优先事项。

在 swipeUp 和 swipeDown 方法中，我计算下一个“页面”的位置并将父滚动视图滚动到该位置，如果确实有下一页的话。

最后一件事是，检查 webview 是否滚动到顶部或底部，并且只接受这种情况下的手势。因此，您必须实现手势识别器的委托：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if(gestureRecognizer == swipeUp) {
        return webViewScrolledToBottom;
    } else if(gestureRecognizer == swipeDown) {
        return webViewScrolledToTop;
    }

    return false;
}
```

您可能还必须禁用滚动弹跳以使其适用于网页，这些网页非常小，根本不会滚动：`webView.scrollView.bounces = false;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T07:44:42.813

它真的是垂直滚动的滚动视图还是网络视图？我自己没有尝试过，但也许这会有所帮助......

```
webView.scrollView.scrollEnabled = NO; 
webView.scrollView.bounces = NO; 
```

或者 ...

```
webView.userInteractionEnabled = NO; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T00:44:06.490

我以前做过，但我最终使用了 Javascript 和 Obj-c。我添加了一个函数来检查（使用 JQuery）页面是在滚动的底部还是顶部（我的应用程序需要它）。然后我使用 NSTimer 调用该函数：

```
NSString *str= [webView stringByEvaluatingJavaScriptFromString:@"JSFunction()"]; 
```

我知道它有点丑陋，但这是我当时发现的唯一方法，它只是完成了这项工作。这是我使用的代码：

```
function JSFunction() {
    var docHeight = $(document).height();
    var scroll    = $(window).height() + $(window).scrollTop();
    if (docHeight == scroll || $(window).scrollTop() < 10)
                 return "TOP";
            else
                 return "BODY";
} 
```

# mysql - 在mysql中动态排名

> ID：10833349
> 
> 赞同：1
> 
> 时间：2012-05-31T12:11:25.427
> 
> 标签：mysql, sql, database

我需要在 mysql 表中给出排名，假设有表名 test 标记为 45,55,55,65,75 那么 75 应该有排名 1 等等

原表

```
name  marks
tom   55
joe   56
sally 57 
```

需要的结果

```
name  marks rank
tom   55     3
joe   56     2 
sally 57     1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:18:21.960

您需要按标记对用户进行排序，然后计算他们的位置。这可以通过以下方式完成：

```
SET @rownum := 0;

SELECT @rownum := @rownum+1 AS rank, name, marks
FROM your_table 
ORDER BY marks DESC 
```

[灵感/来源](http://www.kirupa.com/forum/showthread.php?263260-MySQL-Get-position-of-sorted-rows&p=2139314&viewfull=1#post2139314)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:18:58.637

试试这个查询 -

```
SELECT t.* FROM (
  SELECT t1.*, @r:=@r+1 rank FROM (SELECT * FROM table ORDER BY marks DESC) t1,
  (SELECT @r:=0) t2
) t
ORDER BY marks 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T12:15:41.727

我有一些相同的问题和答案是相同[的](https://stackoverflow.com/questions/8878354/ranking-joint-positions-in-mysql)。

如果您有任何疑问，请告诉我。

对于您的表查询将是

```
SELECT name, marks, 
(SELECT COUNT(distinct u2.marks) FROM myTable u2 
WHERE 
u2.marks > u1.marks) + 1 AS rank FROM myTable u1
ORDER BY rank DESC 
```

在此查询中替换`myTable`为您的表名。

## 请参阅[演示 1](http://sqlfiddle.com/#!2/f0369/2)和[演示 2](http://sqlfiddle.com/#!2/d0276/1)。

此外，在结果中，请注意等级 3。

如果您想要排名 5 而不是 4，请使用`COUNT(*)`而不是`COUNT(distinct u2.marks)`.

# android - 当 Google Play 进行自动更新时，Android 应用程序将被终止

> ID：10833353
> 
> 赞同：0
> 
> 时间：2012-05-31T12:11:44.047
> 
> 标签：android, google-play, automatic-updates

我有一个为 HoneyComb 和 ICS 版平板电脑开发的 android 应用程序，它将像电子相框一样播放图像，我使用“保持屏幕打开”将显示器设置为始终处于活动状态，以不让设备进入睡眠模式。

希望 Google Play 自动更新适用于该应用程序。因此，期望 Google Play 会在后台下载应用程序，并且一旦手动关闭当前运行的应用程序，重新打开时将使用更新版本开始。

但实际上，当应用程序设置一边播放图像时，经过长时间的 36 小时，我看到应用程序自动关闭，当尝试打开应用程序时，它是新版本的（即 google play 已自动更新应用程序）

为应用程序下载新更新时，谷歌播放是否会终止正在使用的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:15:31.850

该应用程序不是在下载新版本时被杀死，而是在安装新版本时被杀死。

# spring - 如何在spring MVC和hibernate中连接位于不同物理机上的多个数据库

> ID：10833354
> 
> 赞同：0
> 
> 时间：2012-05-31T12:11:44.610
> 
> 标签：spring, spring-mvc

嗨，我是 spring hibernate 的新手，我想连接到位于不同物理机器上的多个数据库？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:18:12.270

您可以在 Spring 应用程序中为两个不同的数据库提供数据源。您需要在**dispatcher-servlet.xml**文件中添加此配置。

```
 <bean class="org.apache.commons.dbcp.BasicDataSource" id="dataSource" destroy-method="close" >
        <property name="driverClassName">
            <value>@mssql.driver@</value>
        </property>
        <property name="url">
            <value>@mssql.url@</value>
        </property>
        <property name="username">
            <value>@mssql.user@</value>
        </property>
        <property name="password">
            <value>@mssql.password@</value>
        </property>
        <property name="maxActive" value="100"/>
        <property name="maxWait" value="10000"/>
        <property name="maxIdle" value="10"/>
    </bean>

    <!-- DataSource bean for egpnew Database -->
    <bean class="org.apache.commons.dbcp.BasicDataSource" id="reportDataSource"  destroy-method="close">
        <property name="driverClassName">
            <value>@mssql.driver@</value>
        </property>
        <property name="url">
            <value>@mssql.egpurl@</value>
        </property>
        <property name="username">
            <value>@mssql.user@</value>
        </property>
        <property name="password">
            <value>@mssql.password@</value>
        </property>
        <property name="maxActive" value="100"/>
        <property name="maxWait" value="10000"/>
        <property name="maxIdle" value="10"/>
    </bean> 
```

但是不要忘记在两个 bean 定义中都有唯一的 id。

希望这对您有所帮助。干杯。

# rabbitmq - 无法编译rabbitmq-c“没有规则来制作目标codegen/amqp-rabbitmq-0.9.1.json”

> ID：10833359
> 
> 赞同：0
> 
> 时间：2012-05-31T12:12:15.217
> 
> 标签：rabbitmq

我正在尝试安装 rabbitmq-c，这样我就可以从 PECL 安装 AMQP 库。这是我的 bash 历史：

```
git clone http://github.com/rabbitmq/rabbitmq-codegen/
git clone http://github.com/alanxz/rabbitmq-c
cd rabbitmq-c
autoreconf -i && ./configure && make && make install 
```

我从 make 得到的错误信息是：

```
make: *** No rule to make target `codegen/amqp-rabbitmq-0.9.1.json', needed by `librabbitmq/amqp_framing.h'.  Stop. 
```

有人知道问题可能是什么吗？我过去曾运行过这些命令，但显然来自 git 的源现在可能不同了。

确保 erlang、rabbitMQ 等。已安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:29:58.950

好的，

对于偶然发现此问题的任何其他人，codegen 文件夹必须是 rabbitmq-c 的子目录。答案在错误消息中:-)

# ios - 如何使用 svn 删除 .xcodeproj 文件中的“~”

> ID：10833371
> 
> 赞同：0
> 
> 时间：2012-05-31T12:12:55.040
> 
> 标签：ios, svn, xcode4

我正在使用 svn 和 Xcode 4。当我这样做时

```
svn status 
```

输出是：

```
~       HelloWorld.xcodeproj 
```

如何删除“~”符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:43:17.773

我用以下部分答案解决了它：

[Subversion 状态符号“~”是什么意思？](https://stackoverflow.com/questions/853405/what-does-the-subversion-status-symbol-mean)

但我必须删除 xcodeproj 数据包中的所有 .svn 文件夹，然后执行此过程：

最好的解决方案是重命名新对象（在你的情况下是目录）；从导致冲突的存储库中“svn remove”对象（可能是您已删除的文件），提交，然后重命名新对象并将其“svn add”到存储库。再次提交。您将有 3 个修订序列，其中旧对象分别存在、删除和添加新对象。–

布赖恩·莱西 D

# sql - 用于记录存储的 NoSQL 或 SQL（即音乐：黑胶唱片、CD、数字唱片）。

> ID：10833374
> 
> 赞同：1
> 
> 时间：2012-05-31T12:13:08.900
> 
> 标签：sql, nosql

我正在构建一个唱片店应用程序，并且想知道我应该采用 NoSQL 方式还是 SQL 方式。从技术上讲，我可以使用自己的购物车。但我从来没有真正喜欢过推车在音乐类商店中的表现......

该模型类似于...

发行（标题、价格、EP、LP、主要艺术家、说明） 曲目（标题、价格、主要艺术家、混音艺术家）

非常基本的结构，我可以添加其余字段，但你明白了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:22:40.627

NoSQL 解决方案通常更容易开始，但将来可能更难优化。您因缺乏数据模式而获得的自由可能会反过来影响您 — 随着应用程序的发展，您可能会发现自己拥有不同结构的不同代记录，除非您付出额外的努力来使旧记录的结构保持最新。

SQL 解决方案通常更严格，需要事先进行更多计划，但另一方面，它们是一项相当成熟的技术，它们强制执行数据结构，并专门设计用于保持其一致性。

在您的情况下，我会选择 SQL，因为记录存储将主要包含长期存在的数据，这将受益于强加于它的稳定结构。在我看来，NoSQL 更适合处理非常短暂的数据的应用程序，在这些应用程序中，您不太关心旧数据的完整性和结构（例如聊天、游戏记分牌等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:05:06.087

有很多因素可能会以任何一种方式推动决定。

一开始我会问自己关于我的数据的一些问题是：

我的数据有多大可能增长？数据库应该只保存有库存的还是市场上所有可能的可用标题？我假设您的数据库将拥有比您提到的两个更多的表。

可能的答案：通过一开始就选择 NoSQL 结构，您可能会感谢自己后来为良好的可扩展性提供了范围。

我的数据有多复杂？多值列有潜力吗？

例如，如果您有一个艺术家表，您可能希望此表有一个发布列，该列存储该艺术家的多值发布 ID，以便轻松交叉引用您的发布表。在这种情况下，诸如多值数据库之类的 NoSQL 类型的数据库可能会很有趣，因为您可以避免对性能造成损害的连接。随着数据的增长，数据检索速度可能比走 SQL 路线更好。

根据您选择的 SQL 数据库，还需要考虑成本方面。

如果你确实走 NoSQL 路线，那么这条路线提供的灵活性需要从一开始就以良好的初始数据设计为后盾，这样灵活性就不会在以后成为你的敌人。

希望有帮助。

# django - django 隐藏所有表单错误

> ID：10833375
> 
> 赞同：2
> 
> 时间：2012-05-31T12:13:18.713
> 
> 标签：django, forms

有没有办法向用户隐藏所有表单错误消息？我显示自己的消息，而错误消息显示在表单字段之间的事实对我没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:17:07.583

您可以自己渲染模板，而忽略错误。有关详细信息，请参阅有关[自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#customizing-the-form-template)的文档。

或者，默认设置是将错误包含在无序列表中，例如：

```
<ul class="errorlist">
    <li>Sender is required.</li>
</ul> 
```

`errorlist`所以你可以用 CSS隐藏这个类。

```
ul.errorlist {display:none;} 
```

第三个选项是[自定义错误列表格式](https://docs.djangoproject.com/en/1.1/ref/forms/api/#customizing-the-error-list-format)，但我认为前两个选项更容易。

# javascript - 添加点击事件动态创建的highchart

> ID：10833376
> 
> 赞同：3
> 
> 时间：2012-05-31T12:13:30.107
> 
> 标签：javascript, jquery, highcharts

我们如何从创建后获得的图表对象中将点击事件添加到 highchart。

为什么我需要这个，需要创建可重用的函数来创建图表。创建图表后，我需要触发点击事件以在灯箱中显示一些数据。

有没有像 addSeries 这样的东西，例如：

```
chart.addSeries({
        data: [216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5]        
    }); 
```

点击？

```
chart.click(function(){}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:16:26.887

不确定这是否是您要找的

检查[.on](http://api.jquery.com/on/)

```
chart.on('click','serie selector',function(){code}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:19:51.223

等级制度

```
#chart
    -events
        -click 
```

查看 Highcharts[参考](http://api.highcharts.com/highcharts#series.data.events)

这是[jsFiddle 演示](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/events-click/)

# rtmp - 带有 SoundManager2 的 Amazon Cloudfront RTMP 字符串

> ID：10833383
> 
> 赞同：3
> 
> 时间：2012-05-31T12:14:03.507
> 
> 标签：rtmp, amazon-cloudfront, soundmanager2

我正在开发一个使用 SoundManager2 的 Web 应用程序。在把我的头撞到墙上并且没有让我的音乐流式传输之后，我终于在创建新的 SoundManager 声音时切换了我的一些 URL。

这是我以前使用的，虽然它会连接，但流永远不会播放。

```
soundManager.createSound({
    id: 'songId_1',
    serverURL: 'rtmp://s3s5uvbmfjq6k1.cloudfront.net:1935/cfx/st', 
    url: 'hihi.m4a',
    onconnect: function(connected){
        alert(connected);
    }
}); 
```

但是，一旦我将其更改为此，它突然就可以流式传输了。

```
soundManager.createSound({
     id:'test3',
     serverURL:'rtmp://s3s5uvbmfjq6k1.cloudfront.net:1935/cfx/st',
     url:'mp4:hihi.m4a'
}); 
```

我不明白为什么第一个不起作用而第二个起作用。我对 serverURL 进行硬编码没有问题，但 url 是动态的并且可以是任意数量的音频格式，因此必须将其转换为将流式传输的有效值对我来说没有意义，除非有 API这样做（我在 Cloudfront 中没有看到）。有没有办法转换

```
song location/song name.ext 
```

输入正确的流媒体网址还是我需要使用其他播放器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T00:20:21.727

前段时间我们遇到了这个麻烦，最终为每种格式提供了硬编码的 url。我们正在使用另一个 Flash 播放器 Flowplayer，并与 CloudFront 和 EdgeCast 两个流媒体提供商打交道，您会发现即使它们支持的某些视频类型的格式之间存在细微差别。

可以参考[为什么RTMP流协议的url路径不一样的问题？](https://stackoverflow.com/questions/8981674/why-rtmp-streaming-protocals-url-path-different-from-each-other)我之前问过。

我还没有找到任何工具来转换它，因为这相当依赖于流媒体提供商，而且现阶段没有标准。

当我们处理mp4、flv、mp3时，构造的url是：（注意前缀和扩展名）

```
mp4:test.mp4
flv:test
mp3:test 
```

# imagemagick - 具有半透明背景的 imagemagick 标题

> ID：10833394
> 
> 赞同：1
> 
> 时间：2012-05-31T12:14:47.957
> 
> 标签：imagemagick

我正在尝试在图像上放置具有半透明背景的标题。

这是文档中的示例（[http://www.imagemagick.org/Usage/annotating](http://www.imagemagick.org/Usage/annotating)）：

```
width=`identify -format %w dragon.gif`; \
convert -background '#0008' -fill white -gravity center -size ${width}x30 \
      caption:"Faerie Dragons love hot apple pies\!" \
      dragon.gif +swap -gravity south -composite  anno_caption.jpg 
```

![在此处输入图像描述](../Images/56470e29ab09b725c88dddbde53b543f.png)

到目前为止，这是我的尝试：

```
convert  -background transparent -colorspace transparent -fill white -gravity center -size 300x300 \
      -font fonts/customfont.ttf caption:'caption text here' \
       'cap.png'

composite -geometry +0+0 'cap_1.png' 'img_1.jpg' 'img_2.jpg' 
```

标题按预期创建并放置在合成图像的右上角。唯一的问题是，字幕背景是黑色的，不是半透明的。我已经看到使用 xc 命令来实现透明度（例如 convert -size 50x50 xc:'#879' img.png），但我看不到如何应用该命令来设置标题 bg 颜色。

编辑：

我刚刚在 ec2 服务器上进行了测试，代码按预期工作。在 Mac 10.7x 上运行代码时会出现此问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:55:36.630

试一试 - 它使用具有透明度的 rgb (rgba)。

```
convert -size 300x300 -background rgba\(0,255,255,0.25\) -fill white -gravity center caption:'caption text here' cap.png

composite -geometry +0+0 cap.png img_1.jpg img_2.jpg 
```

# android - Android：用于类似 Galaxy S3 的 AVD 的 AVD 设置

> ID：10833402
> 
> 赞同：27
> 
> 时间：2012-05-31T12:15:28.437
> 
> 标签：android, device, avd, galaxy, samsung-mobile

我需要有关新虚拟设备的 AVD 设置的帮助。

我需要与新三星 Galaxy S3 大小相同的 AVD 的设置。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-25T14:23:05.107

我创建了一个基于 GSM 竞技场状态 ( [http://www.gsmarena.com/samsung_i9300_galaxy_s_iii-4238.php](http://www.gsmarena.com/samsung_i9300_galaxy_s_iii-4238.php) ) 的统计数据。

因此，对于一个完全库存的设备，我使用了以下规格：

*   名称：Samsung_Galaxy_S3_IceCream
*   目标：Android 4.0（API 级别 14）
*   SD卡：16 Gb
*   皮肤：WVGA800
*   硬件
    *   设备内存大小：1024 MB
    *   硬件返回/主页键：是
    *   抽象的 LDC 密度：320
    *   键盘盖支撑：无
    *   最大 VM 应用程序堆大小：48 MiB
    *   加速度计：是
    *   音频播放支持：是
    *   录音支持：是
    *   电池支持：是
    *   GPS支持：是的
    *   方向支持：是
    *   磁场支持：是的（我知道 GSM arena 并没有声明它有一个，但是您可以在使用诸如 Smart Tools 之类的应用程序时使磁铁检测正常工作，并且它在像 Quadrant 之类的基准测试应用程序中报告）。
    *   接近支持：是（再一次，GSM arena 没有说明，但 Quadrant Benchmark 报告存在 CM36651 接近传感器）
    *   LCD 色深：32（实际上 S3 有 16M 色，即 24 位）
    *   LCD像素高度：1280
    *   LCD像素宽度：720
    *   SD卡支持：是的
    *   触摸屏类型：多点触控
    *   轨迹球支撑：无

对于 JellyBean 的更新，所有值都相同，但以下除外： - 名称：Samsung_Galaxy_S3_JellyBean - 目标：Android 4.1（Api 级别 15）

启动 AVD 时，如果要缩放到原始尺寸，实际屏幕尺寸为 4.8 英寸，密度为 306 像素/英寸。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-24T18:58:44.730

其中一些设置必须在较新 SDK 的“设备定义”选项卡上进行设置。

> 屏幕尺寸（英寸）：4.8
> 分辨率（像素）：720 x 1280
> 传感器：加速度计、陀螺仪、GPS、接近传感器
> 摄像头：正面、背面
> 输入：键盘（选中）、无导航
> RAM：1024 MiB
> 大小：正常
> 屏幕比例：[长](http://android.amberfog.com/?p=478)
> 密度：[xhdpi](http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/)
> 按钮：硬件

当您尝试启动虚拟设备时，它应该在“启动选项”对话框窗口中询问您的真实 DPI。

> 屏幕尺寸（英寸）：4.8
> 显示器 dpi：306
> 比例：1.00

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-30T09:37:37.333

尝试使用此设置

*   目标：Google API
*   API 级别 15
*   皮肤：WXGA720

硬件属性

*   硬件返回/主页：是
*   抽象LCD密度：320
*   键盘盖支撑：无
*   最大 VM 应用程序堆大小：48
*   设备内存大小：512

它应该非常准确。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-26T13:42:16.967

我刚刚在这里看到了详细的描述： http: [//forum.xda-developers.com/showthread.php?t=2365104](http://forum.xda-developers.com/showthread.php?t=2365104)：

*   名称：Samsung_Galaxy_S3_IceCream
*   目标：Android 4.0（API 级别 14）
*   SD卡：16 Gb
*   皮肤：WVGA800
*   硬件：
    *   **尺寸 4.8 英寸（约 65.9% 的屏占比）**
    *   **分辨率 720 x 1280 像素（~306 ppi 像素密度）**
    *   **设备内存大小：1024**
    *   硬件返回/主页键：是
    *   抽象的 LDC 密度：320
    *   键盘盖支撑：无
    *   最大 VM 应用程序堆大小：48
    *   加速度计：是
    *   音频播放支持：是
    *   录音支持：是
    *   电池支持：是
    *   GPS支持：是的
    *   方向支持：是
    *   磁场支持：是的（我知道 GSM arena 并没有声明它有一个，但是您可以在使用诸如 Smart Tools 之类的应用程序时使磁铁检测正常工作，并且它在像 Quadrant 之类的基准测试应用程序中报告）。
    *   接近支持：是（再一次，GSM arena 没有说明，但 Quadrant Benchmark 报告存在 CM36651 接近传感器）
    *   LCD 色深：32（实际上 S3 有 16M 色，即 24 位）
    *   LCD像素高度：1280
    *   LCD像素宽度：720
    *   SD卡支持：是的
    *   触摸屏类型：多点触控
    *   轨迹球支撑：无

# c# - 向列表框添加多个选项

> ID：10833406
> 
> 赞同：0
> 
> 时间：2012-05-31T12:15:38.090
> 
> 标签：c#, asp.net

我有一个页面，我需要允许用户添加多个这样的选项

文本框（在此处输入并单击添加）
列表框（添加到列表框）

ajaxcontrol 工具包有这样的控制吗？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:21:54.470

如果您希望在单击添加时将列表项添加到列表框中，那么列表框肯定可以做到这一点。你只需要调用 listBox.Items.Add(yourItem)

如果您在一个控件中寻找所有这些，不，它没有那种控件。但是制作一个用户控件或自定义控件应该是相当容易的。

在 textchange 事件或添加按钮单击时，创建一个新的 ListItem 并将其添加到项目列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:30:45.070

有两种方法可以将项目添加到 a`ListBox`或任何实现 a`DataSource`和`ItemCollection`的 Web 控件。

## 选项 1 - 数据源

```
private List<KeyValuePair<string, string>> Items { get; set; }

protected AddItem(string text, string value)
{
    this.Items.Add(new KeyValuePair<string, string>(value, text))

    this.ListBox.ValueTextField = "Key";
    this.ListBox.DataTextField = "Value";
    this.ListBox.DataSource = this.Items;
    this.ListBox.DataBind;
} 
```

值得注意的是，在选项 1 中，我使用了 a`List<KeyValuePair<string, string>>`而不是 a `Dictionary<string, string>`，因为列表框可以包含具有重复值的项目。

## 选项 2 - Items.Add()

```
protected AddItem(string text, string value)
{
    var listItem = new ListItem(text, value);
    this.ListBox.Items.Add(listItem);
} 
```

# opencl - 如何在opencl中解决CL_BUILD_PROGRAM_FAILURE -11

> ID：10833418
> 
> 赞同：0
> 
> 时间：2012-05-31T12:16:10.773
> 
> 标签：opencl

`CL_BUILD_PROGRAM_FAILURE`我在我的代码中得到一个

```
status = clBuildProgram(program, 1, devices, NULL, NULL, NULL); 
```

成功创建程序对象并获取指向我计算机中设备的指针。

我的内核：

```
__kernel void templateKernel(__global  unsigned int * output,
                         __global   unsigned int * input,
                         __global     unsigned int * pixels)
{ 
    uint tid = get_global_id(0);

    uint2 v0;
    uint2 v1;
    uint2 v2;
    uint2 pixl;
    uint2 dt01;
    uint2 dt02;
    uint2 dt11;
    uint2 dt12;
    float u;
    float v;
    float invDenom ;
    for (int i=0;i<36142<i++)
    {
        pixl=(uint2)(pixels[tid],pixels[tid+1]);
        v0.x=input[(tid*6)+4]-input[(tid*6)];
        v0.y=input[(tid*6)+5]-input[(tid*6)+1];
        v1.x=input[(tid*6)+2]-input[(tid*6)];
        v1.y=input[(tid*6)+3]-input[(tid*6)+1];
        v1.x=input[(tid*6)+2]-input[(tid*6)];
        v1.y=input[(tid*6)+3]-input[(tid*6)+1];
        v2.x=pixels[tid]-input[(tid*6)];
        v2.y=pixels[tid+1]-input[(tid*6)+1];
        dot00 = dot(v0, v0);
        dt01 = dot(v0, v1);
        dt02 = dot(v0, v2);
        dt11 = dot(v1, v1);
        dt12 = dot(v1, v2);
        invDenom = 1 / (dt00 * dt11 - dt01 * dt01);
        u = (dt11 * dt02 - dt01 * dt12) * invDenom;
        v = (dt00 * dt12 - dt01 * dt02) * invDenom;
        if (u >= 0 && v >= 0 && u + v < 1)
        {
            output[tid] = pixels[tid];
            output[tid+1] = pixels[tid+1];

        }
    }
} 
```

是什么导致此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:41:49.640

```
for (int i=0;i<36142<i++) 
```

应该是

```
for (int i=0;i<36142;i++) 
```

但是这种错误可以用 clGetProgramBuildInfo() 来检查。这是你的错误还是只是一个错字？

# c# - 仅在 Windows Server 2008 R2 x64 上出现 P/Invoke 错误

> ID：10833420
> 
> 赞同：0
> 
> 时间：2012-05-31T12:16:14.817
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, pinvoke

我有 ASP.NET MVC3 应用程序，它使用 crypt32.dll 中的一些方法，使用 P/Invoke。在 Windows XP、Windows 7（32 位和 64 位）、Windows Server 2003（也是 32 位和 64 位）上一切正常，但是当我尝试在 Windows Server 2008 R2 x64 上设置应用程序时，我的麻烦就开始了。此外，当我尝试在同一台机器上从 VS2010 运行项目时，它工作正常。服务器已安装最新更新、IIS 7.5 和所有其他所需的东西。

应用程序没有给出任何错误，而只是导致“页面不可用”或有时出现错误 503（停止应用程序池）。

这是我在事件查看器中得到的：

```
Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7a5f8
Faulting module name: CRYPT32.dll, version: 6.1.7601.17514, time stamp: 0x4ce7b841
Exception code: 0xc0000005
Fault offset: 0x00010cf3
Faulting process id: 0xc4c
Faulting application start time: 0x01cd3f0fac5721fb
Faulting application path: C:\Windows\SysWOW64\inetsrv\w3wp.exe
Faulting module path: C:\Windows\syswow64\CRYPT32.dll
Report Id: ee39118a-ab02-11e1-8d06-000c297e9eda 
```

应用程序池仅由该应用程序使用，它设置为启用 32 位应用程序、集成管道和正确的 .Net 版本。项目是为 x86 平台构建的（即使我尝试了所有其他可能性），我什至尝试将所需的 DLL 添加到项目中，将复制到输出目录设置为始终复制，但没有任何帮助。

使用日志我设法弄清楚它在以下位置中断：

```
if (!CertGetCertificateContextProperty(pCertContext, CERT_KEY_PROV_INFO_PROP_ID, IntPtr.Zero, ref cbData))
{
    Marshal.ThrowExceptionForHR(Marshal.GetLastWin32Error());
} 
```

DLL导入代码：

```
[DllImport("crypt32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CertGetCertificateContextProperty(
    IntPtr pCertContext,
    uint dwPropId,
    IntPtr pvData,
    ref uint pcbData
); 
```

任何想法可能导致问题？

这是其余的代码：

```
CERT_NAME_BLOB cnbCertificate;
CRYPT_DATA_BLOB certificate;
IntPtr hCertStore = IntPtr.Zero;
IntPtr pCertContext = IntPtr.Zero;
uint cbData = 0;

byte[] encoded = Encode(cert.Subject);

GCHandle pinnedArray = new GCHandle();
pinnedArray = GCHandle.Alloc(cBuffer, GCHandleType.Pinned);

certificate.cbData = cBuffer.Length;
certificate.pbData = pinnedArray.AddrOfPinnedObject();
pinnedArray.Free();
hCertStore = PFXImportCertStore(ref certificate, password, CRYPT_USER_KEYSET | CRYPT_EXPORTABLE);
cnbCertificate.cbData = (uint)encoded.Length;
GCHandle h1;

if (hCertStore != IntPtr.Zero)
{
    try
    {
        h1 = GCHandle.Alloc(encoded, GCHandleType.Pinned);
        cnbCertificate.pbData = h1.AddrOfPinnedObject();

        dataHandle = GCHandle.Alloc(cnbCertificate, GCHandleType.Pinned);
        pCertContext = CertFindCertificateInStore(hCertStore, X509_ASN_ENCODING | PKCS_7_ASN_ENCODING, 0, CERT_FIND_SUBJECT_NAME, dataHandle.AddrOfPinnedObject(), IntPtr.Zero);
        if (h1 != null) h1.Free();
    }
    catch (Exception exp)
    {
        log.Error("Marshall error1: " + exp.Message + " " + Marshal.GetLastWin32Error());
    }
    finally
    {
    }
}

if (!CertGetCertificateContextProperty(pCertContext, CERT_KEY_PROV_INFO_PROP_ID, IntPtr.Zero, ref cbData))
{
    Marshal.ThrowExceptionForHR(Marshal.GetLastWin32Error());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:35:09.587

我刚刚注意到日志中的异常代码：0xc0000005。这是访问冲突，这意味着您提供给该方法的指针引用了无效地址。指针本身可能为空或零，或者它应该指向的[CERT_CONTEXT结构包含无效数据。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377189%28v=vs.85%29.aspx)

这与 ASP.NET 或 IIS 无关，代码或数据有错误。也许证书一开始就是错误的。

# java - Intent 完成后调用函数

> ID：10833422
> 
> 赞同：2
> 
> 时间：2012-05-31T12:16:19.077
> 
> 标签：java, android, android-intent

我认为这是一个简单的问题，但找不到答案。我得到了这段代码：

```
 public void onButtonClick(View v) {

    Intent intent = new Intent();
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file = new File(root + "/Doppen/"+ "doppen.txt");
    intent.setDataAndType(Uri.fromFile(file), "text/*");
    startActivityForResult(intent, 1);                   
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, getIntent());
    if(resultCode==RESULT_OK && requestCode==1){
        System.out.println("RESULT :D");
    }
} 
```

知道这里有什么问题吗？

我打开一个文本文件，但在用户点击“保存”后，我想调用另一个函数。如何自动执行此操作？
那么如何检查用户何时点击“保存”或意图何时完成/完成？

**编辑1：** 我发现了一个问题：当我发表评论`if(resultCode==RESULT_OK && requestCode==1){`时，它会在完成后打印结果，所以我知道哪里出了问题，现在是为什么问题：p

**编辑2：**

requestCode 确实打印“1”，这很好。但是，resultCode 打印“0”，不好。

**编辑 3：**

找到了答案，也许对其他人也有用。
按下保存后，我使用（手机的）后退按钮返回应用程序，但结果代码为“0”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:22:07.777

调用`startActivityForResult()`而不是`startActivity()`. 活动完成后，您将收到活动`onActivityResult()`方法的回调，您可以在其中执行所需的操作。

有关更多信息，请参阅[文档](http://developer.android.com/reference/android/app/Activity.html)。

* * *

编辑： `RESULT_OK`是标准结果代码，但活动可以自由返回大于或等于的其他值`RESULT_FIRST_USER`。零是`RESULT_CANCELED`，这通常发生在有人敲击“后退”按钮时。

# android - 包重命名后 BackupAgent 失败

> ID：10833424
> 
> 赞同：1
> 
> 时间：2012-05-31T12:16:22.653
> 
> 标签：android, android-backup-service

我有一个应用程序，它使用备份功能。这是我的清单中的一行：

```
android:backupAgent="my.package.backup.BackupAgent" 
```

它在当前版本中运行良好。但现在我想把它移到`BackupAgent`另一个包`my.package.other.backup.package`中。

当我将新版本安装到新设备时，它仍然可以正常工作。但是当我尝试在旧版本上安装新版本时 - 它会导致备份代理崩溃并出现错误：

```
java.lang.ClassNotFoundException: my.package.backup.BackupAgent in loader dalvik.system.PathClassLoader 
```

**`BackupAgent`为什么Android在旧包中寻找？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:44:12.330

我仍然不知道如何解决这个问题，但最后我只是在旧地方创建空类，扩展新类。

# language-agnostic - 如何将代码排列/细分为清晰的部分？

> ID：10833425
> 
> 赞同：0
> 
> 时间：2012-05-31T12:16:27.043
> 
> 标签：language-agnostic, markup

我真的很想使用树和/或标题将我的代码分成部分和小部分。

我目前正在使用 php，如果我可以创建一个 22px 的注释标志标题，说**“生成器部分”**，然后在 20px 中的两个子标题，分别说**“MySQL 查询”**和**“生成 HTML 输出”** ，那就太好了这是代码。

像这样：

# 发电机部分

## MySQL 查询

*代码*

## 生成 HTML 输出

*代码*

只有缩进。

这在任何编辑器中都可能吗？如果人类能够取得如此多的成就，但没有这样的成就，这似乎很奇怪……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:43:03.347

许多 IDE 允许对显示进行一些配置。磅值不常见，但您可以配置某些类型评论的颜色。

或者，我有时会使用评论框来突出显示部分标题：

```
//*****************
//* MySQL Queries *
//***************** 
```

# java - 引入时区之前的正确时区是什么？

> ID：10833428
> 
> 赞同：1
> 
> 时间：2012-05-31T12:16:32.450
> 
> 标签：java, timezone

对于在苏黎世运行的 Java 程序，“Januray, 1st 1000”的正确时区偏移量是多少？

背景：当我使用 joda-time 2.1 时，

```
new DateTime( 1000, 1, 1, 0, 0, 0, 0, DateTimeZone.forID( "Europe/Zurich" ) ).toString() 
```

给我

```
1000-01-01T00:00:00.000+00:34:08 
```

由于时区偏移`00:34:08`（34:08 分钟偏移？？），这看起来很奇怪。查看[IANA Timezone Database](https://www.iana.org/time-zones)`europe`中的条目，我看到：

```
# Zone  NAME            GMTOFF  RULES   FORMAT  [UNTIL]
Zone    Europe/Zurich   0:34:08 -       LMT     1848 Sep 12
                        0:29:44 -       BMT     1894 Jun # Bern Mean Time
                        1:00    Swiss   CE%sT   1981
                        1:00    EU      CE%sT 
```

这给出了 1848 年 9 月 12 日之前的所有时间 34:08 的偏移量，这似乎不正确。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:25:48.053

从[这里](http://www.timeanddate.com/time/time-zones-history.html)

> 有趣的是，尽管国际子午线会议在 1884 年取得了成果，但许多法国地图多年来在巴黎显示为零度。格林尼治标准时间是通用的参考标准——所有其他时间都被表示为提前或落后了这么多小时——但法国人继续对待巴黎作为本初子午线，直到 1911 年。即便如此，*法国人仍将法定时间定义为巴黎标准时间减去 9 分 21 秒*。换句话说，这与格林威治标准时间相同

（我的重点）

所以我怀疑巴黎并不是唯一一个以这种方式行事的欧洲城市

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:30:21.547

[维基百科](http://en.wikipedia.org/wiki/Central_European_Time#Usage_in_Europe)，关于欧洲时区：

> 1894年
> 
> *   瑞士从 UTC+00:30 切换到 CET
> *   列支敦士登介绍 CET。
> *   丹麦采用CET。

我怀疑剩余的秒数是自​​ 1894 年以来所做的补偿性更改，闰秒等。

# android - 仅在我的 sqlite 数据库中存储几天的数据？

> ID：10833433
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:16:39.510
> 
> 标签：android, sqlite

在我的应用程序中，我使用 sqlit 数据库来存储用户信息，并且这些信息存储成功，但是它们存储了 2 天，因为我可以在 2 天内检索它们并将它们显示在屏幕上，但是在我运行 2 天或更长时间之后我的应用程序没有显示数据“调试代码时返回的光标为空”我使用 DataBaseAdapter 和 DatabaseHelper 类来创建数据库，我真的很想知道，为什么会出现这个问题？我该如何解决？
我相信代码没有问题，因为我可以插入和检索数据，并且我在 data/data/my pavkage name /databases/ DBname 中找到了我的数据库

有没有人知道这个问题？请帮我 ......

**这是我创建数据库的代码**

```
public class DBAdapter
 {
public static final String DB_NAME="MYDB";
private static final int DB_VERSION=5;
private static final String TRACKER_TABLE_NAME="Tracker";
private static final String EXERCISE_TABLE_NAME="Exercise";
private static final String MEAL_TABLE_NAME="Meal";
private static final String FOOD_TABLE_NAME="Food";
private static final String MEALFOOD_TABLE_NAME="MealFood";

private static final String TAG = "DBAdapter";

private DatabaseHelper DBHelper;
private SQLiteDatabase db;
private Context context;

// table Exercise columns name
public static final String KEY_DATE="Date";
public static final String KEY_TIME="Time";
public static final String KEY_NAME="Name";
public static final String KEY_PERIOD="Period";
public static final String KEY_BURNEDCALS="Burned_Calories";

// table Tracker columns Name
public static final String KEY_TDATE="Date";
public static final String KEY_DAILY_BCALS_COUNTER="DialyBCalsCounter";
public static final String KEY_DAILY_NCALS_COUNTER="DialyNCalsCounter";
public static final String KEY_VB12_COUNTER="VB12Counter";
public static final String KEY_PROTEIN_COUNTER="ProteinCounter";
public static final String KEY_SODIUM_COUNTER="SodiumCounter";
public static final String KEY_IRON_COUNTER="IronCounter";
public static final String KEY_CHOLESTEROL_COUNTER="CholesterolCounter";
public static final String KEY_FAT_SAT_COUNTER="FatSatCounter";
public static final String KEY_FAT_MONO_COUNTER="FatMonoCounter";

// table Meal columns Name
public static final String KEY_MDATE="Date";
public static final String KEY_MTIME="Time";
public static final String KEY_MEALTYPE="MealType";

// table Food columns Name
public static final String KEY_FOODID="Food_ID";
public static final String KEY_FOODNAME="Food_Name";
public static final String KEY_CALORIES="Calories";
public static final String KEY_VB12="VB12";
public static final String KEY_CHOLESTEROL="Cholesterol";
public static final String KEY_PROTEIN="Protein";
public static final String KEY_IRON="Iron";
public static final String KEY_SODIUM="Sodium";
public static final String KEY_FAT_MONO="Fat_Mono";
public static final String KEY_FAT_Sat="Fat_Sat";
public static final String KEY_CARBOHYDRATE="carbohydrate";

// table MealFood columns Name
public static final String KEY_MFDATE="Date";
public static final String KEY_MFTIME="Time";
public static final String KEY_MFMEALTYPE="MealType";
public static final String KEY_MFFOODID="Food_ID";

private static final String EXERCISE_TABLE_CREATE ="create table Exercise (Date text not null  , "+
        "Time  text not null  ,Name  text not null," + " Period  REAL not null, Burned_Calories  REAL  not null," +
        " primary key(Date,Time ) );"  ;

private static final String Meal_TABLE_CREATE= "create table IF NOT EXISTS Meal (Date  text not null , "+
        "Time   text not null,MealType  text not null,"+ " primary key(Date,Time ,MealType) );" ;

private static final String FOOD_TABLE_CREATE= "create table IF NOT EXISTS Food (Food_ID  INTEGER  primary key  AUTOINCREMENT  , "+
        "Food_Name   text not null,Calories  integer  not null,"+ "VB12   integer  not null,Cholesterol  integer  not null,"+ 
        "Protein   integer  not null,Iron integer  not null,Sodium integer  not null,Fat_Mono integer  not null,Fat_Sat integer  not null,carbohydrate integer  not null);" ;

private static final String MealFOOD_TABLE_CREATE= "create table IF NOT EXISTS MealFood (Date  text  not null , "+
        "Time   text not null,MealType  text not null,"+"Food_ID  integer   not null ,  primary key(Date,Time ,MealType,Food_ID) );" ;

private static final String TRACKER_TABLE_CREATE= "create table IF NOT EXISTS Tracker (Date  text   not null  primary key  , "+
        "DialyBCalsCounter integer  not null,DialyNCalsCounter  integer  not null,"+ 
        "VB12Counter   integer  not null,ProteinCounter  integer  not null,"+ "SodiumCounter  integer  not null,IronCounter integer  not null,"+
        "CholesterolCounter  integer  not null );" ;    

 public DBAdapter(Context ctxt)
    {
    this.context=ctxt;
    DBHelper= new DatabaseHelper(context);
       }

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context    context)
    {
        super(context, DB_NAME, null, DB_VERSION);
    }

    public void onCreate(SQLiteDatabase db)
    {
        try
        {
            db.execSQL(EXERCISE_TABLE_CREATE);
            db.execSQL(TRACKER_TABLE_CREATE);
            db.execSQL(Meal_TABLE_CREATE);
            db.execSQL(FOOD_TABLE_CREATE);
            db.execSQL(MealFOOD_TABLE_CREATE);
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        //          Log.w(TAG, "Upgrading database from version" + oldVersion +" to "+ newVersion + ", which will destroy all old data");     
        //          db.execSQL("DROP TABLE IF EXISTS Exercise");
        //          db.execSQL("DROP TABLE IF EXISTS Food");
        //          db.execSQL("DROP TABLE IF EXISTS Meal");
        //          db.execSQL("DROP TABLE IF EXISTS MealFood");
        //          
        //          onCreate(db);
    }
}   

//--open the DB
public DBAdapter open() throws SQLException
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---
public void close()
{
    DBHelper.close();
}
//---insert   Exercise info to the Exercise table---
public long SaveExecise(String date ,String  time,String name ,float  period, float BurnedCalories)
{
    ContentValues content = new ContentValues();
    content.put(KEY_DATE, date);
    content.put(KEY_TIME, time);
    content.put(KEY_NAME, name);
    content.put(KEY_PERIOD,period);
    content.put(KEY_BURNEDCALS, BurnedCalories);

    return db.insert(EXERCISE_TABLE_NAME, null, content);
}       

// retrieve  ex_Name  ,ex_period, ex_burned cals of all exercises played in a specific date  
public Cursor getExerciseInfo(String  date) throws SQLException
{
    Cursor  C_excer = db.query(EXERCISE_TABLE_NAME, new String[] {KEY_NAME,KEY_PERIOD,KEY_BURNEDCALS},
            KEY_DATE + " = '" + date + "'", null, null, null, null);
    //if (C_excer != null) {
    C_excer.moveToFirst();
    //}
    return C_excer;
}

// insert meal info to the meal table 
public long SaveMeal(String date , String time , String mealType)
{
    ContentValues content = new ContentValues();
    content.put(KEY_MDATE,date);
    content.put(KEY_MTIME,time);
    content.put(KEY_MEALTYPE,mealType);
    return db.insert(MEAL_TABLE_NAME, null, content);

}

// insert Food info to the Food table 
public long SaveFood(String name,int calories,int Vit_B12,int cholesterol,int protein ,int iron ,int sodium,int Fat_Mono,int Fat_Sat,int carbohydrate)
{
    ContentValues content = new ContentValues();

    content.put(KEY_FOODNAME,name);
    content.put(KEY_CALORIES,calories);
    content.put(KEY_VB12,Vit_B12);
    content.put(KEY_CHOLESTEROL,cholesterol);
    content.put(KEY_PROTEIN,protein);
    content.put(KEY_IRON,iron);
    content.put(KEY_SODIUM,sodium);
    content.put(KEY_FAT_MONO,Fat_Mono);
    content.put(KEY_FAT_Sat,Fat_Sat);
    content.put(KEY_CARBOHYDRATE,carbohydrate);

    return db.insert(FOOD_TABLE_NAME, null, content);

}

// get food id by its name   

public int getFoodIDByName(String name) throws SQLException
{    int id =0;
Cursor cursor=db.query(true,FOOD_TABLE_NAME, new String[]{KEY_FOODID},  KEY_FOODNAME+ " = '" + name + "'", null, null, null, null,null);
if (cursor != null) {
    cursor.moveToLast();

    id=cursor.getInt(cursor.getColumnIndex(KEY_FOODID));

}
cursor.close();
cursor.deactivate();
return id;

}

// insert mealFood info  to mealFood table 
public long SaveMealFood(String date , String time , String mealType, int Food_id)
{
    ContentValues content = new ContentValues();
    content.put(KEY_MFDATE,date);
    content.put(KEY_MFTIME,time);
    content.put(KEY_MFMEALTYPE,mealType);
    content.put(KEY_MFFOODID,Food_id);
    return db.insert(MEALFOOD_TABLE_NAME, null, content);
}
// get  specific meal foodID from mealFood table
public Cursor  getSpecificMealFoodsID(String date,String mealType) throws SQLException
{
    Cursor cursor=db.query(true,MEALFOOD_TABLE_NAME, new String[]{KEY_MFFOODID},KEY_MFDATE+ " = '" + date + "'"+ " "+ "and" +" "+ KEY_MFMEALTYPE+ " = '" + mealType + "'", null, null, null, null,null);
    if (cursor != null) {
        cursor.moveToFirst();
    }
    return cursor;

}

//get food name,cals from food table based on the food id that we get it from the mealFood table    
public Cursor  getFoodNameAndCals(int food_id) throws SQLException
{
    Cursor cursor=db.query(true,FOOD_TABLE_NAME, new String[]{KEY_FOODNAME,KEY_CALORIES},KEY_FOODID+"="+food_id, null, null, null, null,null);
    if (cursor != null) {
        cursor.moveToFirst();
    }

    return cursor;

}

public Cursor getAllFoods() throws SQLException
{ 
    Cursor food_Cursor = db.query(FOOD_TABLE_NAME, new String[] {KEY_FOODID, KEY_FOODNAME,KEY_CALORIES}, null, null, null, null, null);
    if (food_Cursor  != null) {
        food_Cursor .moveToFirst();
    }
    return food_Cursor ;
}

// retrieve all store exercises // for testing 
public Cursor getExerciseInfo() throws SQLException
{
Cursor  C_excer = db.query(EXERCISE_TABLE_NAME, new String[] 
      {              
         KEY_NAME,KEY_PERIOD,KEY_BURNEDCALS},null, null, null, null, null);
    //if (C_excer != null) {
    C_excer.moveToFirst();
    //}
 return C_excer;}
} 
```

在我的应用程序活动中，我只是使用了插入和检索数据的方法，我应该怎么做才能防止在每次运行应用程序时重新创建数据库？因为我认为你说的是​​真的，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:34:30.317

我认为您的代码没有任何问题。您的方法中的代码是否`onUpgrade`总是被注释掉？

我的猜测是您增加了数据库版本，这触发了该`onUpgrade`方法并删除了您的表，然后重新创建了它们（假设该代码并不总是被注释掉）。

# axapta - 创建会话失败；确认用户具有登录 Microsoft Dynamics 的适当权限

> ID：10833434
> 
> 赞同：0
> 
> 时间：2012-05-31T12:16:45.320
> 
> 标签：axapta, dynamics-ax-2012

我启动了 Dynamics AX 2012，我尝试在导入它们之前比较类，我得到这个错误：

> 创建会话失败；确认用户具有登录 Microsoft Dynamics 的适当权限。

有人能告诉我什么是解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T05:32:28.810

尝试以下 3 个选项之一：

1.  重新启动 AOS
2.  进行增量 CIL 编译
3.  进行完整的 CIL 编译

请报告其中哪些解决了您的问题。

[其他人](http://community.dynamics.com/product/ax/f/33/t/48661.aspx)也有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T15:48:57.243

“..确认用户拥有适当的权限..”

检查 AX AOS 服务帐户是否具有分配给模型和数据数据库的适当数据库角色（读者、作者、管理员），是否是 ax 用户并有权访问应用程序文件夹。

在我的案例中，查看 AX 服务帐户的授权设置解决了这个问题。

# php - 使用 preg_replace 将 -tag包裹在字符串的第一个单词上

> ID：10833435
> 
> 赞同：4
> 
> 时间：2012-05-31T12:16:54.597
> 
> 标签：php, regex, preg-replace

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:23:06.733

试试这个

```
preg_replace('/(?<=\>)\b\w*\b|^\w*\b/', '<b>$0</b>', $string); 
```

$0 意味着它将成为您的正则表达式中匹配的第一件事，$1 将成为第二个等等。

你也可以使用反向引用；\0 从您所在的位置获取匹配的第一件事，\1 获取匹配的第二件事等。[更多信息](http://www.phptutorial.info/?regexp.reference.back-references)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:25:12.710

您需要在后面加上一个数字`$`来引用正则表达式的分组部分。这里是第一组，因此是 0。这里的工作示例：http: [//codepad.org/4V7GWdja](http://codepad.org/4V7GWdja)

```
<?php

$string = "an example";
$string = preg_replace('/(?<=\>)\b(\w*)\b|^\w*\b/', '<b>$0</b>', $string);
var_dump($string);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:25:18.280

```
$string = 'an example';
echo preg_replace('/^\b(.+?)\b/i', '<b>$1</b>', $string);

// <b>an</b> example 
```

# excel - VLookup 和 EXCEL

> ID：10833437
> 
> 赞同：2
> 
> 时间：2012-05-31T12:17:05.143
> 
> 标签：excel

我正在尝试在列上创建一个公式`O`来计算以下内容：-

```
If E7 = N10 THEN 
  use O10 = M10
ELSE
  GET CURRENCY FROM E7
  MATCH E7 FROM D3:D5 and GET CORRESPONDING RATE FROM E3:E5 
  O10 = RATE * M10 / 100
END 
```

我有以下公式，但它不包括默认货币`N10`

```
=M10 * VLOOKUP($E$7,$D$3:$E$5, 2, FALSE) / 100 
```

任何人都可以帮忙吗？ ![电子表格](../Images/7a8a99fd1237deb0d2fb4a00feb7214f.png)

**编辑**基本上我希望列`O`通过查看 N 列并乘以匹配 E3:E5 的比率来计算收入。所以如果我：-

```
change E7 to EURO O10 becomes 160000 * 83 / 100
change E7 to USD O10 becomes 160000 * 155 / 100
change E7 to GBP O10 becomes 160000 * 100 / 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:21:13.743

而是使用这样的汇率网格：

```
 Euro    GBP  USD
Euro 100    127  165
GBP  83     100  155
USD  78     123  100 
```

然后使用 Match 和 Index 而不是 vlookup 进行[2 路查找](http://skp.mvps.org/xl00002.htm)。所以沿着这些思路：

```
=M10 * INDEX($E$3:$G$5, MATCH(N10,$E$2:$G$2,0), MATCH($E$7,$D$3:$D$5,0)) / 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:54:24.110

您应该乘以当前汇率并除以列中的货币汇率`N`：

`=M10
 * INDEX($E$3:$E$5;MATCH(**$E$7**;$D$3:$D$5;0))
 / INDEX($E$3:$E$5;MATCH(**N10**;$D$3:$D$5;0))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:24:47.713

对我来说，这有效：

```
=M10*VLOOKUP($E$7;$D$3:$E$5;2;FALSE)/100 
```

# sql-server - 这些在 SQL Server 中返回日期时间列的时间的方法有什么区别？

> ID：10833438
> 
> 赞同：1
> 
> 时间：2012-05-31T12:17:07.410
> 
> 标签：sql-server, sql-server-2008, datetime, time

现在，我知道返回时间的 3 种方法：

1.  `CONVERT(varchar, Date, 8)`

2.  `CONVERT(varchar, Date, 108)`

3.  `CONVERT(time, Date)`

＃1和＃2之间有什么区别，因为它们返回相同的答案？

为什么#3 会返回一些看起来不同的东西——它仍然等同于#1/#2 的输出吗？

还有更多的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:21:01.673

查看[MSDN 页面的 convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。格式`8`为`hh:mi:ss`. 如果添加`100`到格式，它使用四位数的年份而不是两位数的年份。由于格式`8`是时间格式，`8`并且`108`具有相同的输出。

第三个选项将 a 转换`datetime`为 a `time`。A`time`不是字符串，也没有格式。如何显示它取决于客户端，通常使用本地计算机的区域和语言设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:20:33.237

第 1 点和第 2 点相等。第 3 点以其他数据类型返回。

第 1 点和第 2 点相等，但第 3 点与它们不同。

[您可以在此处](http://www.sql-server-helper.com/tips/date-formats.aspx)查看不同的格式。

# ruby - 未定义的方法“包括？” 对于零：NilClass

> ID：10833440
> 
> 赞同：0
> 
> 时间：2012-05-31T12:17:08.510
> 
> 标签：ruby, sinatra, datamapper

我有一个在 Ubuntu/Apache2/Passenger 上运行的 Sinatra 应用程序。

这是一个简单的 URL 缩短器，可在我的登台服务器上使用，但在我导入旧数据库（包含缩短的 URL）时开始抛出以下错误：

```
undefined method `include?' for nil:NilClass
file: resource.rb location: block in attributes= line: 332 
```

完整的回溯在这里：

```
/usr/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/resource.rb in block in attributes=
            if model.allowed_writer_methods.include?(setter = "#{name}=")
/usr/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/resource.rb in each
      attributes.each do |name, value|
/usr/lib/ruby/gems/1.9.1/gems/dm-core-1.2.0/lib/dm-core/resource.rb in attributes=
      attributes.each do |name, value|
/websites/sinatra/shortener/application.rb in block in <top (required)>
        ct.attributes   =   { 
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in call
            proc { |a,p| unbound_method.bind(a).call } ]
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in compile!
            proc { |a,p| unbound_method.bind(a).call } ]
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in []
            route_eval { block[*args] }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block (3 levels) in route!
            route_eval { block[*args] }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in route_eval
      throw :halt, yield
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block (2 levels) in route!
            route_eval { block[*args] }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in process_route
        block ? block[self, values] : yield(self, values)
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in catch
      catch(:pass) do
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in process_route
      catch(:pass) do
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in route!
          pass_block = process_route(pattern, keys, conditions) do |*args|
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in each
        routes.each do |pattern, keys, conditions, block|
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in route!
        routes.each do |pattern, keys, conditions, block|
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in dispatch!
      route!
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in call!
      invoke { dispatch! }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in invoke
      res = catch(:halt) { yield }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in catch
      res = catch(:halt) { yield }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in invoke
      res = catch(:halt) { yield }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in call!
      invoke { dispatch! }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in call
      dup.call!(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb in call
        status, headers, body = @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb in call
        app.call env
/usr/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb in call
        status, headers, body = app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb in call
        result or app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb in call
        status, headers, body = @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/logger.rb in call
      @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/commonlogger.rb in call
      status, header, body = @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/head.rb in call
    status, headers, body = @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb in call
      @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/showexceptions.rb in call
      @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in block in call
        synchronize { prototype.call(env) }
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in synchronize
          yield
/usr/lib/ruby/gems/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb in call
        synchronize { prototype.call(env) }
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/rack/request_handler.rb in process_request
            status, headers, body = @app.call(env)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_request_handler.rb in accept_and_process_next_request
                    process_request(headers, input_stream, connection, full_http_response)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_request_handler.rb in main_loop
                if !accept_and_process_next_request(socket_wrapper, channel, buffer)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb in start_request_handler
            handler.main_loop
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb in block in handle_spawn_application
                self.class.send(:start_request_handler, MessageChannel.new(b),
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb in safe_fork
                        yield
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb in handle_spawn_application
        safe_fork('application', true) do
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb in server_main_loop
                            __send__(@message_handlers[name], client, *args)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb in start_synchronously
                server_main_loop(password, server_socket)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb in start
                start_synchronously(@socket_filename, @password, server_socket, b)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb in start
        super
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb in block (2 levels) in spawn_rack_application
                    spawner.start
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb in lookup_or_add
            server = yield
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb in block in spawn_rack_application
                spawner = @spawners.lookup_or_add(key) do
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb in block in synchronize
                yield
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb in synchronize
        @lock.synchronize do
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb in spawn_rack_application
            @spawners.synchronize do
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb in spawn_application
            return spawn_rack_application(options)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb in handle_spawn_application
            app_process = spawn_application(options)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb in server_main_loop
                            __send__(@message_handlers[name], client, *args)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb in start_synchronously
                server_main_loop(password, server_socket)
/usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server in <main>
    spawn_manager.start_synchronously(socket_filename, socket_password, server_socket, owner_socket) 
```

主要的 application.rb 文件如下：

```
require 'rubygems'
require 'bundler/setup'
require 'sinatra'
require File.join(File.dirname(__FILE__), 'environment')

configure do
    set :views, "#{File.dirname(__FILE__)}/views"
end

configure :development do
    DataMapper.auto_upgrade!

    # very useful for debugging parameters sent via the console
    before do
      puts '[Params]'
      p params
    end

end

error do
    e   =   request.env['sinatra.error']
    Kernel.puts e.backtrace.join("\n")
    'Application error'
end

helpers do  
    include Rack::Utils  
    alias_method :h, :escape_html  

    def random_string(length)  
        rand(36**length).to_s(36)  
    end 

    def get_site_url(short_url)
        SiteConfig.url_base + short_url
    end

    def generate_short_url(long_url)
      @shortcode = random_string 5

    su = ShortURL.first_or_create(
            { :url => long_url  }, 
            {
              :short_url  =>  @shortcode,
              :created_at =>  Time.now,
              :updated_at =>  Time.now
            })

    get_site_url(su.short_url)
    end

end

# root page
get '/' do

    if params[:url] and not params[:url].empty?

        generate_short_url(params[:url])

    else
        # you can use this page to redirect to another location
        # or to display a front-end form for any site visitors

        # get the current count of all links stored
    # @urls = ShortURL.all;

    # erb :index

    end

end

post '/' do

  if params[:url] and not params[:url].empty?

    generate_short_url(params[:url])

  end
    # you can use this page to redirect to another location
    # or to display a front-end form for any site visitors

    # get the current count of all links stored
    # @urls = ShortURL.all;

    # erb :index

end

# display short url from root
["/get/:short_url", "/:short_url"].each do |path|
get path do
    @URLData = ShortURL.get(params[:short_url])

    if @URLData

        # log the click in the database     
        ct = ClickTrack.new
        ct.attributes   =   { 
                :short_url  =>  params[:short_url],
                :url        =>  @URLData.url,   
                :clicked_at =>  Time.now
            }
        ct.save

        redirect @URLData.url
    else
        'no short url found'
    end

end
end

# expand url data
get '/expand/:hash/?' do
    @URLData = ShortURL.get(params[:hash])  

    if @URLData

        content_type :json
        { :url => get_site_url(@URLData.short_url), :long_url => @URLData.url, :hash => params[:hash] }.to_json

    else

        content_type :json
        { :message => 'No hash parameter was specified or no short URL was found to match the provided hash' }.to_json

    end
end 
```

返回缩短的 URL 时发生错误（# display short url from root）

如果有人能帮我弄清楚它失败的原因，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T13:38:57.337

诀窍是读取堆栈跟踪。我猜 ClickTrack 是一个 DataMapper 对象，而您正在调用`attributes=`它。堆栈跟踪非常友好，可以从 dm-core 中提供一些代码： `if model.allowed_writer_methods.include?(setter = "#{name}=")`

显然，从数据映射器内部，`model.allowed_writer_methods`返回 nil。我根本没有使用过数据映射器，但是通过谷歌搜索发现了一种可能性：

[https://github.com/datamapper/dm-core/issues/152](https://github.com/datamapper/dm-core/issues/152)

根据[http://datamapper.org/getting-started.html](http://datamapper.org/getting-started.html) 您应该`DataMapper.finalize`在使用模型之前调用。

无论如何，这看起来像是一个 DataMapper 问题。查看 ClickTrack 并确保它已完成（如果我没看错的话）和/或检查您的 DataMapper 使用情况。

# javascript - 如何在 ui-date 选择器中设置 minDate 和 defaultDate

> ID：10833444
> 
> 赞同：0
> 
> 时间：2012-05-31T12:17:24.237
> 
> 标签：javascript, uidatepicker

我有一个 ui-datepicker 日历。这里我需要同时设置 minDate 和 defaultDate。查看我的代码

```
var cDate='07/21/2012' mm/dd/yy format
    $('#datepicker_Out').datepicker({
        inline: true,
        minDate: 0,
        defaultDate : cDate
    }); 
```

但它不起作用。我需要从今天的日期隐藏过去的日期，还需要在 cDate 中选择日期（这是未来的日期）

请回复我的帖子

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:36:49.440

对于这两个选项，您应该：

> [通过 Date 对象或当前dateFormat](http://docs.jquery.com/UI/Datepicker#option-dateFormat)中的字符串指定实际日期...

您没有指定 a `dateFormat`，因此它默认为`mm/dd/yy`。你的`cDate`变量是`mm/dd/yyyy`（不是`yy`你提到的）。

如果那是您真正想要的格式，或者符合默认格式，请尝试将其显式设置`dateFormat`为。`mm/dd/yyyy``mm/dd/yy`

# android - 在快速点击android时播放声音

> ID：10833446
> 
> 赞同：2
> 
> 时间：2012-05-31T12:17:43.150
> 
> 标签：android, performance, audio, button, playback

每次按下按钮时，我都想播放声音。

问题是，如果我快速按下它，有时声音会播放..但有时它不会播放。

如果我按一个按钮 20 次（非常快），那么理想情况下声音应该播放 20 次。但是发生的情况是声音没有时间完成。它平均播放8-9次。

我已经初始化了我的 mediaPlayer 对象。这似乎有效。

```
mp1.start(); 
```

我也尝试了以下代码，但这只是第一次播放声音。之后，声音将不再播放。

```
if(mp1.isPlaying())
    mp1.stop();
    mp1.start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T12:38:06.703

问题是，MediaPlayer 类是一个比较重的对象，可能不适合以较小的间隔播放小文件。所以我对你的建议是使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)。

SoundPool 是相对较轻的对象，对您的情况会有所帮助。

这是一个基于它的示例，

[http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool](http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool)

# javascript - jQuery setInterval

> ID：10833449
> 
> 赞同：0
> 
> 时间：2012-05-31T12:17:52.180
> 
> 标签：javascript, jquery, toggle

我有一个 jQuery 函数，可以翻转一个元素，然后在几秒钟后将其返回，但是有多个元素具有相同的“翻转”标签，并且 setInterval 元素在第一次单击后将所有元素翻转回来。我如何实现翻转效果以仅翻转在 e 流中已单击的元素，以便在延迟后并非所有元素都翻转。代码是：

```
$(document).ready(function() {

    $('.click').toggle(function() //on click functions => toggle elements
    {           

        setTimeout( function() { // trigger the flip-back after delay (1500ms)
        $('.flip').trigger('click');
        }, 1500) 

        $this = $(this);
        $this.addClass('flip');
        $this.children('.front').delay(600).hide(0);
        $this.children('.back').delay(600).show(0);

    },          
        function() 
        {

        $this = $(this);
        $this.removeClass('flip');
        $this.children('.front').delay(600).show(0);
        $this.children('.back').delay(600).hide(0);

        });  
}); 
```

我的意图是元素会在延迟后翻转回来，但现在所有点击的元素都会在延迟后翻转回来，即使它们只在一段时间内可见 - 延迟。啤酒花这是有道理的:)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:33:23.707

使用`$(this)`或`this`来引用当前单击的项目。**此外**，不需要额外的功能，只需用于`toggleClass()`应用/删除类。

```
$('.click').click(function() //on click functions => toggle elements
{           

    var $this = $(this);
    setTimeout( function() { // trigger the flip-back after delay (1500ms)
        $this.trigger('click');
    }, 1500);

    $this.toggleClass('flip');
    $this.children('.front').delay(600).hide(0);
    $this.children('.back').delay(600).show(0);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:28:55.870

我真的不明白，但不应该这样做：

```
$('.click').on('click', function() {
    $(this).addClass('flip').children('.front, .back')
           .delay(600).toggle(0).delay(1500).toggle(0, function() {
               $(this).parent().removeClass('flip');
           });
}); 
```

[小提琴](http://jsfiddle.net/adeneo/VCGbF/8/)

# php - Mysql php - Web 应用程序规模？（大是什么意思？）

> ID：10833450
> 
> 赞同：1
> 
> 时间：2012-05-31T12:18:00.467
> 
> 标签：php, mysql, web-applications, hosting, large-data

我正在开发一个网络应用程序，并且我已经有一个主机。我为我的客户制作了一些网站和应用程序（流量很小），但现在我想创建一个免费使用的网络应用程序，所以我希望有 5000 多个用户。

我在这里阅读了很多问题和答案，什么是大流量和大桌子。像数百 GB-s 和 1000 万行并不大。我想不是，但我想启动这个应用程序并且我有一个“简单”的主机（php、mysql、“无限”数据库大小）。

**你能定义尺寸间隔、尺度吗？例如：“100M < 行意味着大”？**

我猜例如，如果 5000 个用户有 1000 行/用户就足以使用此托管服务。但是我不想因为性能问题而打扰用户，所以如果这个用户数变成 500.000，我不想迷失在黑暗和松散的用户中。

**大概的限制在哪里，什么可能会导致性能问题？** （使用此托管）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:33:14.023

我想一开始这应该足够了。随着时间的流逝，您将看到您的项目是否成功并每天带来数百名新用户。如果是这样，那么您将不得不考虑迁移到更大的主机或专用服务器，之后您可以考虑创建一个 PHP 和 MySQL 服务器集群......

所以，很快：一开始就足够了。

性能问题——这不仅取决于用户数量、行数等。它还取决于 webapp 的编写方式——当然可以进行 PHP 和 SQL 性能调整，但直到你拥有一个虚拟主机你可以只做一点（如果有的话）服务器性能调整。

# matlab - 在 MATLAB 中求解大量定义不明确的非线性方程

> ID：10833452
> 
> 赞同：0
> 
> 时间：2012-05-31T12:18:08.310
> 
> 标签：matlab, com, logic, nonlinear-functions

我将尝试描述我的问题，但最后有一些具体问题。

我在解决 Matlab 中的涡轮机械问题时遇到了一些麻烦。目标是计算具有已知物理测量和运行条件的涡轮机的效率。为此，我使用科学论文中给出的方程式：[http ://www.sciencedirect.com/science/article/pii/S0196890409003124](http://www.sciencedirect.com/science/article/pii/S0196890409003124)

我的问题是，要知道效率，我需要出口气体参数（温度压力速度......），这又取决于效率。我主要在一个名为 EES（工程方程求解器）的软件中解决了这个问题，其中方程可以按任何顺序编写，程序将它们分组并自动求解。由于程序中的限制不允许我扩展问题，我切换到 Matlab。

在 matlab 中，我首先以可解的顺序将所有方程编写为函数，但解决问题所需的两个退出参数除外。两个退出参数被设置为函数的输入。我使用了两个基本方程（质量守恒和计算出的损失）作为输出，正确的解决方案会将这些方程设置为零。然后我尝试用 fsolve 解决这个问题。

这并没有真正解决，我找不到解决方案。现在我将问题（27）的所有方程都提供给matlab，并尝试以类似的方式解决它们。这也不好用。（“未找到解决方案。fsolve 停止，因为最后一步无效”）。

在方程中有一些逻辑和 if 语句，我还使用流体参数库作为 com-server，以获取不同压力和温度下的气体参数。这些都不允许从 -inf 到 +inf 的输入，并且可能还存在一些不连续性......我想这可能是我的问题的一个原因。

所以，我想这不是典型的编程问题。我不知道代码本身会有多大帮助。如果您对解决此问题的方法有任何想法，那将有很大帮助！我也有一些具体的问题：

1.  是否有可能以某种方式向 fsolve 发送一个参数，告诉它某些方程超出范围？（在这种情况下，com-server 会发送错误消息，但我不知道如何自动使用它。）

2.  是否可以给 fsolve 一个范围，类似于 fzero？

3.  我试图将其设置为零向量的函数的结果向量具有来自非常不同的方程的结果，因此值变化很大。等式之间的误差容限也非常不同。有什么聪明的方法可以解决这个问题吗？我刚刚将结果与不太精确的方程相除以减少值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-22T17:54:55.863

1.  您可以将方程写为最小化问题，然后为您不希望发生的情况添加“软”惩罚，或者仅使用带有约束的非线性最小二乘法。
2.  不，放`fsolve()`一边。使用最小化求解器。
3.  是的。使用非线性最小二乘。

# html - 带有固定顶部导航栏的谷歌翻译

> ID：10833458
> 
> 赞同：4
> 
> 时间：2012-05-31T12:18:19.043
> 
> 标签：html, twitter-bootstrap, google-translate, navbar

我使用 Twitter Bootsrap 的导航栏在我的网站顶部放置一个导航栏。(class="navbar navbar-fixed-top")
我还需要使用谷歌翻译小部件。
我使用[这里](http://translate.google.com/translate_tools)写的工具。

但是当用户选择一种语言进行翻译时，谷歌会在我的页面顶部放置一个水平导航栏。该栏掩盖了我自己的导航栏。我需要我的导航栏出现在谷歌水平栏的正下方。

我应该使用 z-index 吗？但在那种情况下，其中一个会掩盖其他导航栏？有更好的解决方案吗？将其中一个显示在另一个下方？谢谢

编辑：当我在页面顶部添加以下代码时，Google 在我的导航栏之前放置了一个导航栏，一切看起来都很好。但不好的是，Google 的导航栏对每个用户都是可见的。我只需要向不说我页面语言的用户展示。

```
<div id="google_translate_element"></div><script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'fr',
    layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
  }, 'google_translate_element');
}
</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

编辑：我想没有像“如果语言不同则显示谷歌翻译”和“显示单杠。如果我在不考虑用户语言的情况下加载单杠，一切正常。但母语人士看到谷歌翻译栏。哪个从我的页面中占用空间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T11:25:04.443

这将是一个丑陋的解决方案，但很快。

点击后标签会自动添加 class="translated-ltr" 或 "translated-rtl"。使用这些类来破解您的固定标题。

```
html.translated-ltr .navbar-inner, html.translated-ltr .navbar-inner { padding-top: 39px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:06:42.117

简单的选择是

```
<div class="navbar-inner" style="padding-top:39px;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-29T06:40:46.270

我使用 jQuery 来检查它，我使用这个代码：

```
setInterval(function(){ 
if ( $('html').hasClass('translated-ltr')) {
  $('.navbar').css('margin-top','30px');
}else{
  $('.navbar').css('margin-top','0px');
}
}, 3000); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-10T12:35:58.320

在你的 CSS 中：

```
body {
    padding-top: 60px;
}

.navbar-fixed-top {
    position: relative;
    top: -60px;
} 
```

# java - Liferay 和 Wicket 的最新证明有效的组合是什么？

> ID：10833462
> 
> 赞同：0
> 
> 时间：2012-05-31T12:18:28.487
> 
> 标签：java, wicket, liferay

我刚刚尝试了 Wicket 1.5.6 和 Liferay 6.1.0 的组合，但这并不是开箱即用的，至少对我来说不是。

[https://cwiki.apache.org/WICKET/wicket-examples-as-portlets.html](https://cwiki.apache.org/WICKET/wicket-examples-as-portlets.html)

说examples.war应该没有任何问题，但对我来说它在部署后告诉

```
11:53:17,096 ERROR [render_portlet_jsp:154] java.lang.IllegalStateException: filter path was not configured
at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:164)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:241)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593) 
```

并且不会工作。你知道吗

a) 解决这个错误

b）这两者的哪种组合开箱即用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:45:49.070

我仍然不知道是什么阻止了这种组合运行，但我再次使用 Wicket 1.5.6 和 Liferay 6.0.6 进行了测试，一切都像魅力一样工作。

在我这边没关系，因为使用过的 Liferay 版本对我来说并不重要。

# javascript - 如何检测为 GroundOverlay 加载的进度

> ID：10833465
> 
> 赞同：5
> 
> 时间：2012-05-31T12:18:41.383
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在将 10 个 GroundOverlays 加载到 GoogleMap 上，并希望显示与加载图像相关的进度。

```
var imageBounds = new google.maps.LatLngBounds(
new google.maps.LatLng(42.80059,-115.253806),
new google.maps.LatLng(47.481725,-110.227471));

var layer1 = new google.maps.GroundOverlay("overlays/layer1.png",imageBounds);
layer1.setOpacity(.5);
layer1.setMap(map); 
```

如何检测每个叠加层的实际图像何时加载或加载百分比？我想添加一个进度条或其他东西来向用户显示叠加层正在加载，因为它可能需要 5 秒左右。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T17:23:28.407

如果你有一个单一的图像作为groundoverlay，我会做以下事情：

1.  通过javascript创建img标签
2.  将其 src 设置为*overlays/layer1.png*
3.  显示等候箱
4.  向它添加一个 onload 事件，在该事件上将其加载为 gmaps 覆盖并关闭等待框。

进展......这是一个更具体的浏览器。但是加载很容易，所以：

```
function loadOverlay(){
    var img = new Image();
    var img_url = "overlays/layer1.png"
    img.src= img_url;
    $('#wait_for_overlay').show();
    img.onLoad = function(){
        $('#wait_for_overlay').hide();
        var layer1 = new google.maps.GroundOverlay(img_url,imageBounds);
        layer1.setOpacity(.5);
        layer1.setMap(map);
    }
}; 
```

**这将起作用的原因：**

创建一个 img 对象并设置其 'src' 属性将使浏览器在执行此操作的 javascript 函数完成后立即开始下载请求的文件。

浏览器会将这张图片放入其本地缓存中，然后调用 onLoad 函数来查看它会发生什么。

回调实际上对 img 变量没有任何作用（也许它应该确保它不会按照闭包规则被清除，如果这是错误的，则对其执行 NOP），而是调用 google-maps 函数。

google-maps 函数将在完全相同的 url 处请求图像，浏览器将在该 url 查找其缓存表，并立即从缓存中取回图像。

这个技巧很讨厌，但事实上，谷歌地图引擎会在后台执行完全相同的 onLoad 操作（因为这就是地图引擎的工作方式）。

我希望这能满足你的问题......没有进度条，只是一个加载指示器......也许你可以通过用 XHR 请求它并检查进度来制作进度条，我不确定，但诀窍是一样的：做一个虚假的请求，以使其到达缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T17:10:11.277

我怀疑你能做到。您可以请求将新功能添加到 GroundOverlay 类中，以便用户对加载的图像有更多的访问和控制权。我也想为我的项目提供这些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-06T23:43:33.080

截至 10 年后，即 2021 年 12 月。我可以确认 @Aadaam 的想法很有效！

试试我的例子：

单击示例链接，尝试缩放地图或平移，它将图像加载为groundOverlay，进度条显示在左侧面板底部。

```
 new Image() 
```

是 HTML img 对象，文档在[这里](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image)

```
 img_object.onload 
```

都是小写，如果你写

```
 .onLoad 
```

会给你错误。

[https://transparentgov.net:3200/googlemaps12/default?layer_id=0&layer=SilverRock_MasterPlan_29Nov2016_s200-images.jpg¢er_lat=33.65789936781538¢er_long=-116.25862990762825¢er_zoom=15&​​url=https%2Frest.org%2Ftarc %2Fservices%2FCommunity_and_economic%2FSilver_Rock_Master_Plan%2FMapServer&panto=0&overlayOpacity=8&overlayType=overlayType_image](https://transparentgov.net:3200/googlemaps12/default?layer_id=0&layer=SilverRock_MasterPlan_29Nov2016_s200-images.jpg&center_lat=33.65789936781538&center_long=-116.25862990762825&center_zoom=15&url=https%3A%2F%2Fgis.la-quinta.org%2Farcgis%2Frest%2Fservices%2FCommunity_and_economic%2FSilver_Rock_Master_Plan%2FMapServer&panto=0&overlayOpacity=8&overlayType=overlayType_image)

[![我的工作代码](../Images/3bd6f50350d67a93e4c60d85dfdbbed5.png)](https://i.stack.imgur.com/WG3l6.png)

[![在此处输入图像描述](../Images/7d7a2dbf4626626c8233c9702fc0dd45.png)](https://i.stack.imgur.com/UzjzE.jpg)

# php - Magento：从类别中编译产品列表

> ID：10833469
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:19:03.283
> 
> 标签：php, magento, content-management-system, categories

我是 Magento 的菜鸟，刚开始使用它。所以，我要做的是在一个 CMS 页面上将一个给定类别的所有产品的简单列表（名称 - 链接对）放在一起。充当某种索引​​。在我的 CMS 页面中插入这个块帮助我前进了一点。

> {{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" category_id="9" template="catalog/product/list.phtml"}}

但是，这会显示有关产品的所有信息（价格、图片、添加到购物车按钮等），而且每页最多只能显示 30 个条目。

我只需要它显示一个简单的名称 - url 对。如果可能，无需编辑现有文件。任何想法或指示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:46:16.520

好的，得到这个工作。脚本看起来像这样（以下仅检索产品名称；显然可以扩展）：

```
function getProdList ($catId)
{   
    $categories = new Mage_Catalog_Model_Category();
    $categories->load($catId); // the id of your desired category
    $collection = $categories->getProductCollection()->addAttributeToSelect('name');

    foreach ($collection as $product)
    {
        echo sprintf("%s<br />", $product->getName());
    }
} 
```

当您调用该函数时，您只需将您希望查看的产品类别的 ID 传递给它。创建一个 .phtml 文件，将其放在您的 magento 模板文件夹中的某个位置。然后在要插入列表的 CMS 页面中使用块语句：

```
{{block type="core/template" name="fileNameHere" template="path/to/file.phtml"}} 
```

感谢卢卡斯姆斯让我走上了正确的道路。希望这可以帮助那里的人。和平！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:49:15.287

感谢您提供信息丰富的帖子。对于那些对 PHP 不是很流利但由于您正在寻找显示给定类别的产品名称列表的解决方案而登陆此页面的人，我设法通过简单地修改其他人的模板文件找到了解决方案。
对于这个解决方案，我发现最适合的扩展是：
[freebie magento features products-widget version-2](http://www.cubewebsites.com/blog/magento/extensions/freebie-magento-featured-products-widget-version-2/)
（在 github 上找到最新版本：[Cube-Category-Featured-Products](https://github.com/cubewebsites/Cube-Category-Featured-Products/tags)）。

登录和注销并清除缓存后，我能够将小部件插入静态块并修改`.phtml`用于生成我想要的自定义视图的文件。插入时小部件看起来像这样：

```
{{widget type="categoryfeatured/list" template="categoryfeatured/block.phtml" categories="118" num_products="10" products_per_row="1" product_type="all"}}. 
```

我只是打开`app/design/frontend/base/default/template/categoryfeatured/block.phtml`复制了它的内容并创建了一个`.phtml`名为的新文件`category_product_listing.phtml`，然后将小部件实例指向新`.phtml`文件，如下所示：

```
{{widget type="categoryfeatured/list" template="categoryfeatured/category_product_listing.phtml" categories="118" num_products="10" products_per_row="1" product_type="all"}} 
```

然后`.phtml`，我用我对 PHP 的基本了解浏览了这个文件，并删除了所有项目，如图像、添加到购物车按钮、评论等，直到我只剩下基本的链接产品标题以及类别标题完好无损。

我希望这可以帮助某人，因为我花了几个小时试图弄清楚这一点。

# pycharm - Pycharm变色未解决参考

> ID：10833472
> 
> 赞同：1
> 
> 时间：2012-05-31T12:19:06.780
> 
> 标签：pycharm

Pycharm 颜色编码问题。

使用 pycharm，我总是想念“未解决的参考”指示器——它是浅灰色的。我假设，像 pycharm 中的所有其他项目一样，我可以更改其颜色等。更改此项目颜色的选项是什么/在哪里？

额外的句子，因为上面的问题不值得。实际上，多写两句和一些术语：

```
if i > 5:
    i = 4 || 5
    i = 6 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:00:18.800

检查**警告**和**弱警告**颜色`Editor | Colors & Fonts`：

![在此处输入图像描述](../Images/75c920838ba69ae461e717e5458cac46.png)

# html - 在没有换行/换行/换行的情况下将 100 个 div 彼此相邻放置的技巧？

> ID：10833474
> 
> 赞同：3
> 
> 时间：2012-05-31T12:19:08.793
> 
> 标签：html, css

是否有一些 css 语句将有限数量的 div 彼此相邻放置，而没有制作“换行符/换行符/换行”并具有定义宽度的包装器？

就像将 100 个宽度为 200 像素、高度为 60 像素的 div 并排放置在一条线上，而包装容器没有固定宽度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T12:22:48.230

div应该有CSS：

```
display:inline-block; 
```

以及围绕它们的包含 div：

```
white-space:nowrap; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T12:25:24.760

尝试这个

```
.yourclass{
float:left;
width:200px;
height:60px;
} 
```

工作链接[http://jsfiddle.net/TmSdx/](http://jsfiddle.net/TmSdx/)

# javascript - 替换函数访问封装对象？

> ID：10833475
> 
> 赞同：0
> 
> 时间：2012-05-31T12:19:14.377
> 
> 标签：javascript, function, replace

我通过替换现有对象中的一些字符串来在 javascript 对象中创建一个属性，作为副作用，我想对第三个属性进行一些额外的更改，我尝试使用 this.property 访问它但是在替换函数中这是指的是窗口而不是我的“主”对象。我怎样才能传入封装对象，以便我可以`this`用来访问第三个属性。

```
b = {
    a: 'onetwothree',
    count: 0,
    rp: function () {
        this.c = this.a.replace(/e/g, function (str, evalstr) {
            this.count++; // <-- this is refering to window.
            return 'e' + this.count
        })
    }
};
b.rp(); 
```

`b.c = 'oneNaNtwothreNaNeNaN`而我希望它是`one1twothre2e3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:21:39.663

您通常可以通过使用您正在创建的闭包来解决这个问题，如下所示：

```
b = {
    a: 'onetwothree',
    count: 0,
    rp: function () {
        var self = this;             // <-- Create a variable to point to this
        this.c = this.a.replace(/e/g, function (str, evalstr) {
            self.count++;            // <-- And use it here
            return 'e' + self.count; // <-- And here (also added the ;)
        })
    }
};
b.rp(); 
```

更多探索*（披露：两者都是我博客上的帖子）*：

*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)
*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:21:50.357

将上下文缓存`this`在另一个变量中。

```
rp: function () {
     var self = this; // Cache here
     this.c = this.a.replace(/e/g, function(str, evalstr) {
         return 'e' + (++self.count); // Use here
     });
} 
```

Protip： ++self.count在递增*后给出新值。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T12:21:55.800

```
rp: function () {
    this.c = this.a.replace(/e/g, function (str, evalstr) {
        this.count++;
        return 'e' + this.count
    }.bind( this )) // <-- bind the function
} 
```

# c++ - winapi 音频输出

> ID：10833479
> 
> 赞同：2
> 
> 时间：2012-05-31T12:19:24.190
> 
> 标签：c++, winapi, buffer, pulseaudio

我正在为 windows 寻找一些 pulseaudio 的替代品。在 linux 下，有一种非常简单的方法可以输出原始声音（使用 pulseaudio）：

```
pa_simple_write(pulse, data, bufferSize, &error); 
```

它非常适合小型缓冲区，我发送到循环中运行。

在windows下我使用这样的东西：

```
void writeAudioBlock(HWAVEOUT hWaveOut, LPSTR block, DWORD size)
{
    WAVEHDR header;

    ZeroMemory(&header, sizeof(WAVEHDR));
    header.dwBufferLength = size;
    header.lpData = block;

    waveOutPrepareHeader(hWaveOut, &header, sizeof(WAVEHDR));

    ResetEvent(waveDone);

    waveOutWrite(hWaveOut, &header, sizeof(WAVEHDR));

    WaitForSingleObject(waveDone, INFINITE);

    waveOutUnprepareHeader(
        hWaveOut, 
        &header, 
        sizeof(WAVEHDR)
    );
} 
```

它正在工作，但是当我发送另一条数据时，我听到各条之间的延迟很小。将小块数据缓冲区输出到声音设备的任何其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:32:39.660

如果你想播放一些音频文件，你可以使用 windows API 中的 PlaySound 函数。

对于存储在内存中的数据块，您必须使用 Waveform API - waveOutXXX 函数。

对于音频块之间的延迟问题，您必须使用一些双缓冲机制。

你可以在这里找到一个例子： [双缓冲](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:04:14.093

[XAudio2](http://msdn.microsoft.com/en-us/library/windows/desktop/ee415813%28v=vs.85%29.aspx)是 Windows 上最好的音频 API。它是 WinMM、DirectSound 和其他 windows 音频框架下的包装器。它很容易用作pulseaudio，它没有延迟问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:32:48.587

几个月前我在汇编中创建了这个函数，也许它对你有用：

```
PlayMultimediaProc    Proc hWin : DWORD, szFileName : DWORD 

     .data 
     lpDll    db    "msvfw32.dll", 0 
     lpFunc    db    "MCIWndCreate", 0 
     .code 
invoke GetModuleHandle, addr lpDll 
invoke GetProcAddress, eax, addr lpFunc 
mov esi, eax 
push szFileName 
push MCIWNDF_NOTIFYPOS or MCIWNDF_NOMENU or MCIWNDF_SHOWALL or MCIWNDF_SHOWNAME 
invoke GetModuleHandle, NULL 
push eax 
push hWin 
call esi 
Ret 
```

PlayMultimediaProc endp

# web-services - Web 服务道路交通和事故

> ID：10833480
> 
> 赞同：3
> 
> 时间：2012-05-31T12:19:25.907
> 
> 标签：web-services, map, traffic

有人知道提供有关交通拥堵和事故信息的网络服务吗？我想在 iPad 应用程序中使用这些信息。

我已经找到了有关流量的[Yahoo API](http://developer.yahoo.com/traffic/)，但它不再可用（我不知道为什么）。我也找到了这个[网站](http://diffusion-numerique.info-routiere.gouv.fr/acces-aux-donnees-de-trafic-a10.html)，但信息不是通过网络服务提供的（而是在 XML 文件中），而且只有几个城市。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:37:45.353

**Bing Maps API**为法国提供交通覆盖。交通事故文本以事故发生国的主要语言提供。

**交通流**：交通流是指在 Bing 地图上显示的代表不同交通拥堵程度的颜色线。

**交通事故**：交通事故是交通问题的报告，例如事故报告。交通事件由 API 提供，例如 Bing Maps REST Services Traffic API 和 Bing Maps AJAX Control 7.0 Microsoft.Maps.Traffic API。

[必应地图交通覆盖率](http://msdn.microsoft.com/en-us/library/jj136866.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:28:28.083

[Mapquest](http://developer.mapquest.com/web/products/dev-services/traffic-ws)提供这样的服务，据我所知，他们是目前唯一一家免费提供服务的公司。付费交通信息服务的市场领导者是[INRIX](http://www.inrix.com/)，根据您的项目规模，您可能还想了解他们的产品范围。

# php - 在部署 php 文件之前，我想优化/加密它们，如何？

> ID：10833483
> 
> 赞同：2
> 
> 时间：2012-05-31T12:19:44.393
> 
> 标签：php, optimization, encryption

当我的脚本完成后，我想优化/将它们转换为更小的尺寸 + 即使文件被盗，也很难知道文件做了什么。

```
$c = file_get_contents('source.php');

$newStr  = '';
$commentTokens = array(T_COMMENT);
if (defined('T_DOC_COMMENT'))
    $commentTokens[] = T_DOC_COMMENT; // PHP 5
if (defined('T_ML_COMMENT'))
    $commentTokens[] = T_ML_COMMENT;  // PHP 4
$tokens = token_get_all($c);
foreach ($tokens as $token) {
    if (is_array($token)) {
        if (in_array($token[0], $commentTokens))
            continue;
        $token = $token[1];
    }
    $newStr .= $token;
}

$newStr = str_replace (chr(13), '', $newStr);
$newStr = str_replace (chr(10), '', $newStr);
$newStr = preg_replace('/\s+/', ' ', $newStr); 
```

现在`$newStr`包含“压缩”的东西。几乎可以，但它会杀死很多空白。如果这样的代码中有空格：

```
if (true)
   {
        codeeee();
   } 
```

它转换为：

```
if (true)
{
codeeee();
} 
```

没关系。但在这种情况下：

```
$a = '      var          '; 
```

它确实：

```
$a = ' var '; 
```

这是不需要的。如何正确优化？有什么想法吗？我几乎在考虑重命名类名等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:38:24.273

在[这个答案](https://stackoverflow.com/a/1722055/1130734)的帮助下，我能够创建这个正则表达式，它将所有空格（包括换行符）修剪为单个空格，但保留引号之间的空格（'或“）

```
preg_replace('/\G(?:"[^"]*"|\'[^\']*\'|[^"\'\s]+)*\K\s+/', ' ', $string); 
```

# c# - c#中如何在MS Word的内容控件富文本中读写？

> ID：10833484
> 
> 赞同：-3
> 
> 时间：2012-05-31T12:19:47.440
> 
> 标签：c#, .net, forms, window

我在 ms word 中有一个表格，其中包含单元格中的内容控件富文本（可以通过使用开发人员功能区添加）。我想使用 window c# 读取和写入富文本中的文本。

我试图通过 wd.ActiveDocument.FormFields.Count.ToString() 读取字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:05:45.810

您可以使用 office interop api 来探索 word 文件。

查看以下链接，

[http://msdn.microsoft.com/en-us/library/dd264733.aspx](http://msdn.microsoft.com/en-us/library/dd264733.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:34:00.403

非常紧急，细节很少

你不说 Forms 或 WPF

据我所知，在没有第三方控制的情况下，不会在 .NET 中读写 MS Word

FlowDocument 具有丰富的格式，但仅限于 WPF。

RichTextBox 可用于编辑 FlowDocument。

[流文档](http://msdn.microsoft.com/en-us/library/aa970909.aspx)

# linux - 构建“源代码树”内核模块

> ID：10833487
> 
> 赞同：0
> 
> 时间：2012-05-31T12:19:52.613
> 
> 标签：linux, kernel, kernel-module

我正在 linux 下构建一个示例内核模块。模块源是“内核树之外的”。我有来自 git 的内核源代码树。但是配置内核需要时间。所以此刻我只是试图针对我的发行版提供的内核头文件构建模块。

我的生成文件：

```
KVERSION=$(shell uname -r)
   PWD := $(shell pwd)
   all:
           make -C /lib/modules/$(KVERSION)/build/  M=$(PWD) modules
   clean:
           make -C /lib/modules/$(KVERSION)/build M=$(PWD) clean

   $(info Building with KERNELRELEASE = ${KERNELRELEASE})
  obj-m := hello.o 
```

但是停止报告我找不到等，这意味着它找不到标题。

但文件在那里：

```
 $ls /lib/modules/$(uname -r)/build
 $arch  block  crypto  drivers  firmware  fs  include  init  ipc  kernel  lib  Makefile             Makefile.common  mm  Module.symvers  net  samples  scripts  security  sound  System.map  tools  usr  virt 
```

我想这是一个微不足道的问题。但我仍然找不到解决方案。

提前致谢。

编辑：错误：

```
Building with KERNELRELEASE =
make -C /lib/modules/2.6.32-220.el6.x86_64/build/  M=/usr/local/src/kernel_mods
make[1]: Entering directory `/usr/src/kernels/2.6.32-220.el6.x86_64'
Building with KERNELRELEASE = 2.6.32-220.el6.x86_64
  LD      /usr/local/src/kernel_mods/built-in.o
  CC [M]  /usr/local/src/kernel_mods/hello.o
/usr/local/src/kernel_mods/hello.c:2:27: error: linux/modules.h: No such file or directory
/usr/local/src/kernel_mods/hello.c:21: error: expected declaration specifiers or â...â before string constant
/usr/local/src/kernel_mods/hello.c:21: warning: data definition has no type or storage class
/usr/local/src/kernel_mods/hello.c:21: warning: type defaults to âintâ in declaration of âMODULE_LICENSEâ
/usr/local/src/kernel_mods/hello.c:21: warning: function declaration isnât a prototype
/usr/local/src/kernel_mods/hello.c:22: error: expected declaration specifiers or â...â before string constant
/usr/local/src/kernel_mods/hello.c:22: warning: data definition has no type or storage class
/usr/local/src/kernel_mods/hello.c:22: warning: type defaults to âintâ in declaration of âMODULE_AUTHORâ
/usr/local/src/kernel_mods/hello.c:22: warning: function declaration isnât a prototype
/usr/local/src/kernel_mods/hello.c:23: error: expected declaration specifiers or â...â before string constant
/usr/local/src/kernel_mods/hello.c:23: warning: data definition has no type or storage class
/usr/local/src/kernel_mods/hello.c:23: warning: type defaults to âintâ in declaration of âMODULE_DESCRIPTIONâ
/usr/local/src/kernel_mods/hello.c:23: warning: function declaration isnât a prototype
make[2]: *** [/usr/local/src/kernel_mods/hello.o] Error 1
make[1]: *** [_module_/usr/local/src/kernel_mods] Error 2
make[1]: Leaving directory `/usr/src/kernels/2.6.32-220.el6.x86_64'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:46:07.900

我想你打算这样做

```
#include <linux/module.h> 
```

而不是

```
#include <linux/modules.h> 
```

# android - 如何使用十进制和带符号创建文本编辑字段？

> ID：10833492
> 
> 赞同：1
> 
> 时间：2012-05-31T12:20:16.010
> 
> 标签：android

有一个 XML TextEdit 字段，它必须在数字之前有一个小数点和一个符号，我知道的模式是：

```
number : which takes numbers only,no decimal point or sign.
numberDecimal : which takes numbers and decimal point,no sign.
numberSigned : which takes numbers and a sign,no decimal point. 
```

所以我想以某种方式将最后两种模式结合在一起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:24:13.277

您可以在**xml 布局**文件中使用此方法

```
android:inputType="numberDecimal|numberSigned" 
```

# iphone - 用于 iPhone 的带有 JSON 的 RestKit 0.10 对象映射

> ID：10833493
> 
> 赞同：1
> 
> 时间：2012-05-31T12:20:16.717
> 
> 标签：iphone, objective-c, json, mapping, restkit

我花了很多时间阅读文档并尝试了各种示例项目等，但我无法解决我的问题。由于 Restkit 几天前更改了许多 API，因此提供的大部分信息和教程都没有用。有效的东西对我的问题没有帮助。

一般来说，我不明白在进行对象映射时何时使用 /person 或 /person.user 或 /:user 或 /person/user 。我还没有找到任何关于如何访问某些 JSON 条目的信息。Mybe有人可以向我解释这一点。

我想从我的 JSON 响应中创建对象。问题是使用嵌套在对象中的对象或数组。

这是导致问题的 JSON：

```
{
   "result":
   {
       "persons":
       [
           {
               "age": 20,
               "name": "alice",
               "user":
               {
                   "id": 208727870
               }
            },
            {
               "age": 25,
               "name": "bob",
               "user":
               {
                   "id": 308427890
               }
            }
        ]
    }
} 
```

对于这个示例，我需要进行对象映射 -> 但如何？

此映射有效：

```
{
   "result":
   [
       {
           "age": 20,
           "name": "alice",
           "user":
           {
               "id": 208727870
           }
        },
        {
           "age": 25,
           "name": "bob",
           "user":
           {
               "id": 308427890
           }
        }
    ]
}

RKObjectMapping* userMapping = [RKObjectMapping mappingForClass:[RKTUser class]];
[userMapping mapKeyPath:@"id" toAttribute:@"userID"];

RKObjectMapping* statusMapping = [RKObjectMapping mappingForClass:[RKTStatus class]];
[statusMapping mapKeyPath:@"age" toAttribute:@"age"]
[statusMapping mapKeyPath:@"name" toAttribute:@"name"]

[statusMapping mapRelationship:@"user" withMapping:userMapping];
statusMapping.rootKeyPath = @"result";

// user seems only to be a placeholder .. it does not matter, which string i write instead "user"
[objectManager.mappingProvider setObjectMapping:statusMapping forResourcePathPattern:@"/:user"]; 
```

我最终想做的事情：

```
{
   "result":
   {
       "id_str": "208727870",
       "result_value_str": "123456",
       "persons":
       [
           {
               "age": 20,
               "name": "alice",
               "user":
               {
                   "id": 208727870
               }
            },
            {
               "age": 25,
               "name": "bob",
               "user":
               {
                   "id": 308427890
               }
            }
        ],
        "friends":
       [
           {
               "age": 18,
               "name": "norton",
               "user":
               {
                   "id": 208457120
               }
            },
            {
               "age": 41,
               "name": "edward",
               "user":
               {
                   "id": 378829810
               }
            }
        ]
    }
} 
```

有人给我建议吗？（教程、链接、提示……）

最好的问候，史蒂夫

# perl - Perl DBI 和 sql now()

> ID：10833494
> 
> 赞同：3
> 
> 时间：2012-05-31T12:20:18.500
> 
> 标签：perl, dbi

我在更新表时一直在尝试使用 sql NOW() 函数。但是该日期字段没有任何反应，我认为 DBI 只是忽略了该值。代码是：

```
dbUpdate($id, (notes => 'This was an update', filesize => '100.505', dateEnd => 'NOW()')); 
```

功能是：

```
sub dbUpdate {
    my $id = shift;
    my %val_hash = @_;
    my $table = 'backupjobs';

    my @fields = keys %val_hash;
    my @values = values %val_hash;

    my $update_stmt = "UPDATE $table SET ";
    my $count = 1;
    foreach ( @fields ) {
        $update_stmt .=  "$_ = ? ";
        $update_stmt .=  ', ' if ($count != scalar @fields);
        $count++;
    }
    $update_stmt .= " WHERE ID = ?";
    print "update_stmt is : $update_stmt\n";
    my $dbo = dbConnect();
    my $sth = $dbo->prepare( $update_stmt );
    $sth->execute( @values, $id ) or die "DB Update failed : $!\n";
    $dbo->disconnect || die "Failed to disconnect\n";
    return 1;
}#dbUpdate 
```

如您所见，这是 sql 查询的“动态”生成，因此我不知道 sql 日期函数（如 now()）来自何处。

在给定的示例中，sql 查询将是

```
UPDATE backupjobs SET filesize = ? , notes = ? , dateEnd = ?  WHERE ID = ? 
```

带参数值

```
100.55, This was an update, NOW(), 7 
```

但是日期列仍然显示 0000-00-........

任何想法如何解决这一问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:34:27.437

> 我在更新表时一直在尝试使用 sql NOW() 函数。但是该日期字段没有任何反应，我认为 DBI 只是忽略了该值。

不，它没有。但是当您实际上尝试添加字符串时，数据库认为您提供的是 datetime 或 timestamp 数据类型`NOW()`。这当然行不通。不幸的是，DBI 无法为您找到。它所做的只是`?`变成它得到的字符串的转义（通过`$dbh->quote()`）版本。

你可以做几件事：

1.  提供适当格式的当前时间戳字符串，而不是字符串`NOW()`。

    如果你有它，你可以[`DateTime::Format::MySQL`](http://p3rl.org/DateTime%3a%3aFormat%3a%3aMySQL)像这样使用：

    ```
    use DateTime::Format::MySQL;
    dbUpdate(
      $id,
      (
        notes => 'This was an update',
        filesize => '100.505',
        dateEnd => DateTime::Format::MySQL->format_datetime(DateTime->now),
      )
    ); 
    ```

    如果没有，只需使用[`DateTime`](http://p3rl.org/DateTime)or [`Time::Piece`](http://p3rl.org/Time%3a%3aPiece)。

    ```
     use DateTime;
        my $now = DateTime->now->datetime;
        $now =~ y/T/ /;
        dbUpdate(
          $id,
          (notes => 'This was an update', filesize => '100.505', dateEnd => $now)); 
    ```

2.  告诉你的`dbUpdate`函数去寻找类似的东西`NOW()`并做出相应的反应。

    你可以做这样的事情。但是有更好的方法来编码。您还应该考虑还有例如`CURRENT_TIMESTAMP()`。

    ```
    sub dbUpdate {
        my $id = shift;
        my %val_hash = @_;
        my $table = 'backupjobs';

        my $update_stmt = "UPDATE $table SET ";

        # Check for the NOW() value
        # This could be done with others too
        foreach ( keys %val_hash ) {
          if ($val_hash{$_} =~ m/^NOW\(\)$/i) {
            $update_stmt .= "$_ = NOW()";
            $update_stmt .= ', ' if scalar keys %val_hash > 1;
            delete $val_hash{$_};
          }
        }

        # Put everything together, join keeps track of the trailing comma
        $update_stmt .= join(', ', map { "$_=?" } keys %val_hash );
        $update_stmt .= " WHERE ID = ?";
        say "update_stmt is : $update_stmt";
        say "values are: ", join(', ', values %val_hash);

        my $dbo = dbConnect();
        my $sth = $dbo->prepare( $update_stmt );
        $sth->execute( values %val_hash, $id ) or die "DB Update failed : $!\n";
        $dbo->disconnect || die "Failed to disconnect\n";
        return 1;
    } 
    ```

3.  自己编写查询。

    您可能不会这样做，我也不会添加示例，因为无论如何您都知道该怎么做。

* * *

这是另外一件事：这是您在程序运行时对数据库所做的唯一事情吗？每次进行查询时都连接和断开数据库是不明智的。一旦你需要它（或者在程序开始时，如果你总是使用它）连接数据库，并且在任何地方都使用这个 dbh/dbo，性能会更好。它节省了大量时间（和代码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T14:07:41.797

抱歉，您不能`NOW()`像这样使用内插值。

当 a`?`在 SQL 语句中使用时，相应的值（通过某种机制或其他）被转义传递给数据库，因此任何值都被解释为字符串，而不是 SQL。因此，您实际上是在尝试将字符串`'NOW()'`用作日期值，而不是函数`NOW()`。

要`NOW()`用作函数，您必须将其插入 SQL 本身，而不是将其作为绑定值传递。这意味着您将不得不使用您的`dbupdate`函数的 hack 或编写一个新函数，或者在 perl 中以字符串形式获取时间并将生成的字符串传递给`dbupdate`.

# ruby-on-rails - rails中的简单if else语句

> ID：10833498
> 
> 赞同：1
> 
> 时间：2012-05-31T12:20:25.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我在控制器的新操作中编写 if else 逻辑的方式一直存在问题。例如，一个用户在用户表中有两个不同的字段，让我们说 premium_user 和 gold_user。我将如何编写 if else 语句，说明如果用户是高级用户，他可以上传 3 本书，如果用户是黄金用户，他可以上传无限量的书籍，而他只是一个没有黄金或高级用户的用户，他只能上传我的控制器的新动作中有 2 本书。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:24:17.307

逻辑属于您的模型。您可能会设置一个[STI 表](http://juixe.com/techknow/index.php/2006/06/03/rails-single-table-inheritance/)来定义您的用户（白银、黄金、普通人……）并使用例如[CanCan](http://railscasts.com/episodes/192-authorization-with-cancan)管理授权。

从那里，您只需要根据用户的类型更新您的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:27:30.573

好吧，您可以选择使用用户表单（使用嵌套属性）或直接使用书籍表单上传您的书籍。您可以对用户进行验证。

```
class User
  has_many :books
  validates :books, :length => { if: Proc.new { |r| r.gold? }, allow_nil: true, maximum: 3, too_long: 'gold users can only upload 3 books' }    
  validates :books, :length => { if: Proc.new { |r| r.standard? }, allow_nil: true, maximum: 3, too_long: 'gold users can only upload 3 books' }
end

class Book
  belongs_to :user
  validates :user, :presence => true, associated: true
end 
```

即使您通过书籍提交，也请确保使用 来创建新书籍`user.books.build`，以便验证正常运行。

请注意，您的控制器 new 或 create 操作将相同，无需分叉用户类型进行验证。

如果用户达到最大允许上传，也许您想在您的书籍/新视图中添加注释或禁用表单。

希望这可以帮助

# r - 重构重复出现的 ggplot 代码

> ID：10833501
> 
> 赞同：2
> 
> 时间：2012-05-31T12:20:34.160
> 
> 标签：r, ggplot2

我正在使用 R 和 ggplot2 来分析篮球比赛的一些统计数据。我是 R 和 ggplot 的新手，鉴于我有限的经验，我喜欢我得到的结果。但是随着我的进行，我发现我的代码变得重复了；我不喜欢。

我创建了几个类似于这个的地块：

![按有效投篮命中率计算的净评分](../Images/c02a25dd7de8d1442970e3062d93fecd.png)

代码：

```
efgPlot <- ggplot(gmStats, aes(EFGpct, Nrtg)) + 
  stat_smooth(method = "lm") + 
  geom_point(aes(colour=plg_ShortName, shape=plg_ShortName))  + 
  scale_shape_manual(values=as.numeric(gmStats$plg_ShortName)) 
```

这些图之间的唯一区别是 x 值；下一个情节是：

```
orPlot <- ggplot(gmStats, aes(ORpct, Nrtg)) + 
  stat_smooth(method = "lm") + ...  # from here all is the same 
```

我怎么能重构这个，这样我就可以做类似的事情：

```
efgPlot <- getPlot(gmStats, EFGpct, Nrtg))
orPlot  <- getPlot(gmStats, ORpct, Nrtg)) 
```

*更新*

我认为我的重构方式并不是真正的“R-ish”（或者 ggplot-ish，如果你愿意的话）；根据下面巴蒂斯特的评论，我在没有将任何东西重构为函数的情况下解决了这个问题；请参阅[下面的答案](https://stackoverflow.com/a/10862755/322283)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:30:41.897

这种事情的关键是使用`aes_string`而不是`aes`（当然未经测试）：

```
getPlot <- function(data,xvar,yvar){
    p <- ggplot(data, aes_string(x = xvar, y = yvar)) + 
            stat_smooth(method = "lm") + 
            geom_point(aes(colour=plg_ShortName, shape=plg_ShortName))  + 
            scale_shape_manual(values=as.numeric(data$plg_ShortName))
    print(p)
    invisible(p)
} 
```

`aes_string`允许您将变量名称作为字符串而不是表达式传递，这在编写函数时更方便。当然，您可能不想对颜色和形状比例进行硬编码，在这种情况下，您可以`aes_string`再次使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:43:40.020

虽然 Joran 的回答对我帮助很大（而且他准确地回答了我的问题），但我最终还是按照 baptiste 的建议解决了这个问题：

```
# get the variablesI need from the stats data frame:
forPlot <- gmStats[c("wed_ID","Nrtg","EFGpct","ORpct","TOpct","FTTpct",
                     "plg_ShortName","Home")] 
# melt to long format:
forPlot.m <- melt(forPlot, id=c("wed_ID", "plg_ShortName", "Home","Nrtg"))
# use fact wrap to create 4 plots:
p <- ggplot(forPlot.m, aes(value, Nrtg)) +
  geom_point(aes(shape=plg_ShortName, colour=plg_ShortName)) + 
  scale_shape_manual(values=as.numeric(forPlot.m$plg_ShortName)) +
  stat_smooth(method="lm") +
  facet_wrap(~variable,scales="free") 
```

这给了我：

![净评级作为四个绩效指标的函数](../Images/b48202597da5a492d29d1cd3d6fb2403.png)

# select - 在 Three.js 上选择网格

> ID：10833504
> 
> 赞同：3
> 
> 时间：2012-05-31T12:20:42.113
> 
> 标签：select, webgl, three.js

你知道如何使用 Three.js 选择几何图形吗？你从来没有见过这样的事情吗？

我搜索了很多天，但我发现的所有示例都不起作用并且是遗留编码的。我必须能够用鼠标选择一个几何图形并像拖放一样移动它。也许最好选择一个网格，因为有很多组合的形状。用鼠标移动它不是根本的，我可以用字段来做，所以至少要知道选择几何的功能在哪里，如果有，我找不到它..谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T20:32:53.013

[http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:06:32.937

如果您需要选择为 3D 模型的网格着色，请在创建场景时使用 MeshLambertMaterial.js。

[http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

# c++ - 对 STL 容器的安全并行只读访问

> ID：10833512
> 
> 赞同：21
> 
> 时间：2012-05-31T12:21:14.723
> 
> 标签：c++, multithreading, stl, c++11, containers

我想从**并行**运行的线程中以**只读方式**访问基于 STL 的容器。不使用任何用户实现的锁定。以下代码的基础是正确实现该标准的 C++11。

 **[http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_concurrency.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_concurrency.html)
[http://www.sgi.com/tech/stl/thread_safety.html](http://www.sgi.com/tech/stl/thread_safety.html)
[http://www.hpl.hp.com/personal/ Hans_Boehm/c++mm/threadsintro.html](http://www.hpl.hp.com/personal/Hans_Boehm/c++mm/threadsintro.html)
[http://www.open-std.org/jtc1/sc22/wg21/](http://www.open-std.org/jtc1/sc22/wg21/)（[当前草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)或[N3337](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)，本质上是 C++11，有小错误和错别字更正）

> 23.2.2 容器数据竞赛 [container.requirements.dataraces]
> 
> 为避免数据竞争 (17.6.5.9)，实现应将以下函数视为 const：begin、end、rbegin、rend、front、back、data、find、lower_bound、upper_bound、equal_range、at 和，除了关联或无序的关联容器，operator[]。
> 
> 尽管有（17.6.5.9），当同时修改同一序列中不同元素中的包含对象的内容（vector<bool> 除外）时，需要实现来避免数据竞争。
> 
> [注意：对于大小大于一的向量<int> x，x[1] = 5 和 *x.begin() = 10 可以在没有数据竞争的情况下同时执行，但是 x[0] = 5 和 * x.begin() = 10 同时执行可能会导致数据竞争。作为一般规则的一个例外，对于 vector<bool> y，y[0] = true 可能与 y[1] = true 竞争。——尾注]

和

> 17.6.5.9 避免数据竞争[res.on.data.races] 1 本节规定了实现应满足的要求，以防止数据竞争（1.10）。除非另有说明，否则每个标准库函数都应满足每个要求。实施可能会在下面指定的情况以外的情况下防止数据竞争。
> 
> 2 C++ 标准库函数不应直接或间接访问可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的参数直接或间接访问对象，包括 this。
> 
> 3 C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的非 const 参数直接或间接访问对象，包括 this。
> 
> 4 [注：这意味着，例如，实现不能在没有同步的情况下将静态对象用于内部目的，因为即使在没有显式在线程之间共享对象的程序中，它也可能导致数据竞争。——尾注]
> 
> 5 C++ 标准库函数不应访问通过其参数或通过其容器参数的元素间接访问的对象，除非通过调用其规范要求的那些容器元素的函数。
> 
> 6 通过调用标准库容器或字符串成员函数获得的迭代器上的操作可以
> 访问底层容器，但不得修改它。[注意：特别是，使迭代器无效的容器操作与与该容器关联的迭代器上的操作相冲突。——尾注]
> 
> 7 如果对象对用户不可见并且受到保护以防止数据竞争，则实现可以在线程之间共享它们自己的内部对象。
> 
> 8 除非另有说明，否则 C++ 标准库函数应仅在当前线程内执行所有操作，前提是这些操作具有对用户可见 (1.10) 的效果。
> 
> 9 [注意：如果没有可见的副作用，这允许实现并行化操作。——尾注]

**结论**
容器不是线程安全的！但是从多个并行线程调用容器上的**const 函数是安全的。**因此可以从并行线程执行**只读操作而无需****锁定**。我对吗？

我假装他们不存在任何错误的实现，并且 C++11 标准的每个实现都是正确的。

样本：

```
// concurrent thread access to a stl container
// g++ -std=gnu++11 -o p_read p_read.cpp -pthread -Wall -pedantic && ./p_read
#include <iostream>
#include <iomanip>
#include <string>
#include <unistd.h>

#include <thread>
#include <mutex>

#include <map>

#include <cstdlib>
#include <ctime>
using namespace std;

// new in C++11
using str_map = map<string, string>;

// thread is new in C++11
// to_string() is new in C++11

mutex m;
const unsigned int MAP_SIZE = 10000;

void fill_map(str_map& store) {
    int key_nr;
    string mapped_value;
    string key;

    while (store.size() < MAP_SIZE) {
        // 0 - 9999
        key_nr = rand() % MAP_SIZE;

        // convert number to string
        mapped_value = to_string(key_nr);
        key = "key_" + mapped_value;

        pair<string, string> value(key, mapped_value);
        store.insert(value);
    }
}

void print_map(const str_map& store) {
    str_map::const_iterator it = store.begin();

    while (it != store.end()) {
        pair<string, string> value = *it;
        cout << left << setw(10) << value.first << right << setw(5) << value.second << "\n";
        it++;   
    }
}

void search_map(const str_map& store, int thread_nr) {
    m.lock();
    cout << "thread(" << thread_nr << ") launched\n";
    m.unlock();

    // use a straight search or poke around random
    bool straight = false;
    if ((thread_nr % 2) == 0) {
        straight = true;
    }

    int key_nr;
    string mapped_value;
    string key;
    str_map::const_iterator it;

    string first;
    string second;

    for (unsigned int i = 0; i < MAP_SIZE; i++) {

        if (straight) {
            key_nr = i;
        } else {
            // 0 - 9999, rand is not thread-safe, nrand48 is an alternative             
            m.lock();
            key_nr = rand() % MAP_SIZE;
            m.unlock();
        }

        // convert number to string
        mapped_value = to_string(key_nr);
        key = "key_" + mapped_value;

        it = store.find(key);

        // check result
        if (it != store.end()) {
            // pair
            first = it->first;
            second = it->second;

            // m.lock();
            // cout << "thread(" << thread_nr << ") " << key << ": "
            //      << right << setw(10) << first << setw(5) << second << "\n"; 
            // m.unlock();

            // check mismatch
            if (key != first || mapped_value != second) {
                m.lock();
                cerr << key << ": " << first << second << "\n"
                     << "Mismatch in thread(" << thread_nr << ")!\n";
                exit(1);

                // never reached
                m.unlock();
            }
        } else {
            m.lock();
            cerr << "Warning: key(" << key << ") not found in thread("
                 << thread_nr << ")\n";
            exit(1);

            // never reached
            m.unlock();
        }
    }
}

int main() {
    clock_t start, end;
    start = clock();

    str_map store;
    srand(0);

    fill_map(store);
    cout << "fill_map finished\n";

    // print_map(store);
    // cout << "print_map finished\n";

    // copy for check
    str_map copy_store = store;

    // launch threads
    thread t[10];
    for (int i = 0; i < 10; i++) {
        t[i] = thread(search_map, store, i);
    }

    // wait for finish
    for (int i = 0; i < 10; i++) {
        t[i].join();
    }
    cout << "search_map threads finished\n";

    if (store == copy_store) {
        cout << "equal\n";
    } else {
        cout << "not equal\n";
    }

    end = clock();
    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " << end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

这段代码可以用**GCC 4.7**编译并在我的机器上运行良好。

$回声$？
$ 0

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-31T12:25:42.040

来自 C++11 规范第 1.10/4 节和 1.10/21 节中的数据争用需要至少两个线程对同一组内存位置进行非原子访问，这两个线程在访问方面不同步该组内存位置，并且*至少一个线程**写入**或修改该组内存位置中的一个元素*。所以在你的情况下，如果线程只是读取，你很好......根据定义，因为没有线程写入同一组内存位置，即使没有明确的同步机制，也没有数据竞争线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T12:26:26.053

Yes, you are right. You are safe as long as the thread that populates your vector finishes doing so before the reader threads start. There was [a similar question](http://www.stackoverflow.com/questions/10824299/multithreaded-read-only-access-to-a-vector-copy-or-lock/) recently.**

# android - Android链接jar JRE1.7 NoClassDefFoundError

> ID：10833514
> 
> 赞同：0
> 
> 时间：2012-05-31T12:21:21.490
> 
> 标签：android, sqlite, java, noclassdeffounderror

我有一个 android 2.1 应用程序和一个单独的 JRE jar 库，其中包含应用程序的核心方法，与其他 Web 应用程序兼容。核心使用 sqlite4java。

当我指定使用 JRE1.6 编译库时，从应用程序访问 jar 库的类没有问题，但是由于库使用 sqlite4java 它不起作用，因为它需要 JRE1.7（抱怨“*可能'不加载 sqlite4java-android-armv6l* ")

当我指定要在 JRE1.7 中编译的库时，它编译正常，应用程序运行正常，但是当应用程序尝试访问库中的任何类时，它会因 NoClassDefFoundError 而失败。在编译过程中，库的每个类都出现以下错误：

```
[2012-05-31 13:00:21 - AndroidApp-0.2] Dx bad class file magic (cafebabe) or version (0033.0000)
...while parsing com/androidapp/core/RES.class
...while processing com/tonads/androidapp/RES.class 
```

我试图将我的库所在的目录放入类路径中，但没有结果。清单中还包括库使用的每个 .jar 和 .class 文件。经过详尽的谷歌搜索，找不到任何解决方案。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:09:21.860

> 但由于库使用 sqlite4java 它不起作用，因为它需要 JRE1.7

首先，Android 不支持 Java 7。

其次，由于[该项目在确认 Java 7 兼容性方面存在突出问题](http://code.google.com/p/sqlite4java/issues/detail?id=38)，我怀疑您关于 Java 7 的理论是不正确的。

# python - python pexpect 不适用于动态值

> ID：10833518
> 
> 赞同：0
> 
> 时间：2012-05-31T12:21:35.977
> 
> 标签：python, ssh, pexpect

因此，我有一个程序可以通过 ssh 连接到远程服务器并启动该端的 iperf 服务器。当那运行时，它将从客户端iperf该服务器。

当我静态给出 IP 地址时它工作正常，例如：

```
 p=pexpect.spawn('ssh -t -x paddy@20.20.20.20 ' + iperf) 
```

但不是当我使用：

```
 p=pexpect.spawn('ssh -t -x paddy@'+ADDRESS+' ' + iperf) 
```

我得到一个：

```
'pexpect.TIMEOUT' 
```

ADDRESS 肯定是正确的。有人对出了什么问题有任何想法吗？

```
 #!/usr/bin/env python
import pexpect
import re
import shutil
import getpass
import struct, fcntl, os, sys, signal, time

def start_Server(iperf, password, ADDRESS):
    ssh_newkey = 'Are you sure you want to continue connecting'
    fix = ADDRESS+' ' + iperf
    p=pexpect.spawn('ssh -t -x paddy@'+ fix)
    i=p.expect([ssh_newkey,'password:',pexpect.EOF,pexpect.TIMEOUT],1)
    if i==0:
        print "I say yes"
        p.sendline('yes')
        i=p.expect([ssh_newkey,'password:',pexpect.EOF])
    if i==1: 

        pwtp = False
        trysout = True
        while pwtp == False:
            trysout = True
            p.sendline(password)
            loginStuff=p.expect(['Permission denied, please try again.','Permission denied (publickey,password).', '------------------------------------------------------------', pexpect.TIMEOUT,pexpect.EOF],1)
            if loginStuff == 0:
                password = getpass.getpass("Please enter "+ADDRESS+"'s Password")
            elif loginStuff == 1:
                print 'Sorry but you faild to login'
                sys.exit(0)
                pwtp = True
                trysout = False
            elif loginStuff == 2:
                pwtp = True
                i=3
            elif loginStuff == 4:
                pwtp = True
                pass
            else:
                pass       

    elif i==2:
        print "I either got key or connection timeout"
        pass
    elif i==4:
        print "I either got key or connection timeout"
        pass
    if i==3: #timeout
        print fix
        print ADDRESS
        print 'we find outselfs in a timeout'
        print i
        pass
    return p, password

def RepresentsInt(s):
    try: 
        int(s)
        return True
    except ValueError:
        return False

var = raw_input("Enter the destination IP address: ")
ADDRESS = var

password = getpass.getpass("Please enter "+ADDRESS+"'s Password")        

t, password = start_Server('iperf -s', password, ADDRESS)

u, password = start_Server('iperf -u -s', password, ADDRESS)
print ADDRESS
p=pexpect.spawn('ssh -t -x paddy@20.20.20.20 iperf -u -s')
ssh_newkey = 'Are you sure you want to continue connecting'
i=p.expect([ssh_newkey,'password:',pexpect.EOF])
if i == 0:
    print ssh_newkey
elif i == 1:
    print 'password:'
elif i == 2:
    print pexpect.EOF
else:
    print 'Sorry what!?'
    print i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:16:38.243

当我将 pexpect ssh 从子例程中取出时，它起作用了。

# android - 由于 MapView 导致活动崩溃

> ID：10833519
> 
> 赞同：1
> 
> 时间：2012-05-31T12:21:37.777
> 
> 标签：android, android-mapview

我在尝试在 Android 中显示主要活动时遇到了一些麻烦。当 Activity 扩展 MapView 时问题就开始了（我不知道为什么）。LogCat 显示一些错误，但我不知道它们是什么意思。这是LogCat：

```
03-07 05:42:56.859: D/AndroidRuntime(15357): Shutting down VM
03-07 05:42:56.859: W/dalvikvm(15357): threadid=1: thread exiting with uncaught exception (group=0x40018578)
03-07 05:42:56.859: E/AndroidRuntime(15357): FATAL EXCEPTION: main
03-07 05:42:56.859: E/AndroidRuntime(15357): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.geo.location/com.geo.location.GeoLocationActivity}: java.lang.IllegalArgumentException: listener==null
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.os.Looper.loop(Looper.java:130)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at java.lang.reflect.Method.invoke(Method.java:507)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at dalvik.system.NativeStart.main(Native Method)
03-07 05:42:56.859: E/AndroidRuntime(15357): Caused by: java.lang.IllegalArgumentException: listener==null
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.location.LocationManager.requestLocationUpdates(LocationManager.java:444)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at com.geo.location.GeoLocationActivity.onCreate(GeoLocationActivity.java:64)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-07 05:42:56.859: E/AndroidRuntime(15357):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-07 05:42:56.859: E/AndroidRuntime(15357):    ... 11 more 
```

这是应用程序的代码。

```
public class GeoLocationActivity extends MapActivity implements LocationListener {
    private TextView lblLatitud; 
    private TextView lblLongitud;
    private TextView lblPrecision;
    private TextView lblEstado;
    private TextView lblVelocidad;
    private DecimalFormat df;
    private MapView lblMapView; 
    private MapController mapController; 
    private LocationManager locManager;
    private LocationListener locListener;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        df = new DecimalFormat("#.########");
        lblLatitud = (TextView) findViewById(R.id.LblPosLatitud);
        lblLongitud = (TextView) findViewById(R.id.LblPosLongitud);
        lblPrecision = (TextView) findViewById(R.id.LblPosPrecision);
        lblVelocidad = (TextView) findViewById(R.id.LblV);
        lblEstado = (TextView) findViewById(R.id.textView8);
        lblPrecision = (TextView) findViewById(R.id.LblPosPrecision);
        lblMapView  = (MapView) findViewById(R.id.mapview);
        lblMapView.setBuiltInZoomControls(true);

        lblLatitud.setText("");
        lblLongitud.setText("");
        lblPrecision.setText("");
        lblVelocidad.setText("");
        lblEstado.setText("");
        lblPrecision.setText("");

        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        //Obtenemos la última posición conocida
        Location loc = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        //Mostramos la última posición conocida
        mostrarPosicion(loc);
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);

    }

    //Rellena los TextView de la Activity con la información básica de la posición
    private void mostrarPosicion(Location loc) {
        if(loc != null){
            lblLatitud.setText(String.valueOf(df.format(loc.getLatitude())));
            lblLongitud.setText(String.valueOf(df.format(loc.getLongitude())));
            lblPrecision.setText(String.valueOf(loc.getAccuracy())+ " metros");
            lblEstado.setText("GPS Ok");
            lblVelocidad.setText(String.valueOf(loc.getSpeed()*(3600/1000)) + "km/h <=> " + String.valueOf(loc.getSpeed()) + "m/s"); 
        }else{
            lblLatitud.setText("(sin_datos)");
            lblLongitud.setText("(sin_datos)");
            lblEstado.setText("(GPS no disponible)");
            lblPrecision.setText("(sin_datos)");
            lblVelocidad.setText("(sin_datos)");
        }
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    //Añade un punto al array y muestra la posicion en el mapa
    protected void updateLocation(Location location) {
        GeoPoint point = new GeoPoint((int)(location.getLatitude() * 1E6), (int)(location.getLongitude() * 1E6));   
        mapController = lblMapView.getController();
        mapController.animateTo(point);
        mapController.setZoom(lblMapView.getMaxZoomLevel());    
        List<Overlay> mapOverlays = lblMapView.getOverlays();
        MiOverlay2 marker = new MiOverlay2(point, this);
        mapOverlays.add(marker);
        lblMapView.invalidate();
    }

    public void onLocationChanged(Location location) {
        lblEstado.setText("Gps Ok");
        mostrarPosicion(location);
        updateLocation(location);
    }
    public void onProviderDisabled(String provider){
        lblEstado.setText("No connection");
        Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
    }
    public void onProviderEnabled(String provider){
        lblEstado.setText("Gps Ok");
    }
    public void onStatusChanged(String provider, int status, Bundle extras){
        Log.i("", "Provider Status: " + status);
    }
}

 /***********************************************************************
 * CLASS:                                                               *
 * OVERLAY QUE PINTA LAS FLECHAS EN LUGAR DONDE ESTA SITUADO EL USUARIO *
 ***********************************************************************/
class MiOverlay extends Overlay { 
    GeoPoint punto; 
    Context ctxt; 

    public MiOverlay (GeoPoint punto, Context ctxt) {
        super();
        this.punto = punto;
        this.ctxt = ctxt; 
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);

       //se traduce el punto geo localizado a un punto en la pantalla
       Point scrnPoint = new Point();
       mapView.getProjection().toPixels(punto, scrnPoint);

       //se construye un bitmap a partir de la imagen
       Bitmap marker = BitmapFactory.decodeResource(ctxt.getResources() , R.drawable.arrow);

       //se dibuja la imagen del marker
       canvas.drawBitmap(marker,
               scrnPoint.x - marker.getWidth() / 2,
               scrnPoint.y - marker.getHeight(), 
               null);
       return true;
    }
} 
```

如您所见，这是一个非常简单的程序，但我无法找出问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:25:06.767

LocationListener locListener 从未初始化，因此为空...

```
locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:28:17.863

使用以下

```
locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this); 
```

# c# - 从波形文件中获取频率和幅度

> ID：10833529
> 
> 赞同：0
> 
> 时间：2012-05-31T12:22:31.243
> 
> 标签：c#, fft, frequency, wave, amplitude

我想使用 c# 从波形文件中获取频率和幅度。我尝试了 NAudio 和 FFT，但结果一无所获。你能帮我吗。

```
WaveChannel32 wave = new WaveChannel32(new WaveFileReader(open.FileName));
byte[] buffer = new byte[16384];
int read = 0;
double[] _fft;

while (wave.Position < wave.Length)
{
    read = wave.Read(buffer, 0, 16384); 
    _fft = FourierTransform.FFTDb(ref buffer);
} 
```

如果哪里不对，不要责骂。我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:48:53.117

您可以使用[低音音频库](http://www.un4seen.com/)。它具有 .NET 包装器，您可以获得峰值幅度和采样率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-17T23:05:15.907

我过去使用 MathNET.Numerics 成功编写了一个 GUI。

[![在此处输入图像描述](../Images/d2d06dede817faa6cbd274b4ad21f9fb.png)](https://i.stack.imgur.com/Fw547.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T09:47:09.410

最方便的语音：使用双 fft，即*倒谱*，`fft(logfft(sample)))`找到音高

但这不是我在这里提交的原因.. 谷歌似乎仍然在这里参考另一个问题：“如何获取 .WAV 文件的**采样频率**”。

这很容易。作为记录，在 NAudio 中，Mark Heath 在 2014 年回答了这个问题。这是我的版本，将字节率除以样本大小（以字节为单位）以获得采样频率，

```
using var reader = new WaveFileReader(fileName);
var byterate = reader.WaveFormat.AverageBytesPerSecond; 
```

[如何在 C# 中读取 .wav 文件的比特率](https://stackoverflow.com/questions/21567920/how-to-read-bit-rate-of-wav-file-in-c-sharp)

# mysql - 如何将 MySQL 主键从已签名更改为未签名？

> ID：10833530
> 
> 赞同：13
> 
> 时间：2012-05-31T12:22:33.597
> 
> 标签：mysql, foreign-keys, relational-database, primary-key, innodb

在我的带有外键的 MySQL InnoDB 数据库中，我不小心让我的一些主键签名而不是我想要的未签名。

现在我想用 ALTER TABLE 语句来改变它，但它不起作用：

```
ALTER TABLE `users` CHANGE `id` `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT 
```

MySQL错误：

```
Error on rename of './db_dev/#sql-478_3' to './db_dev/users' (errno: 150) 
```

我不明白为什么。我正在使用外键并尝试使用

```
SET foreign_key_checks = 0; 
```

从上面执行 ALTER TABLE 之前的语句。也不行。注意：我所有的桌子仍然是空的。里面还没有数据。

由于数据库有很多表，因此删除所有外键然后再次手动添加它们会很麻烦。（如果这应该是原因）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:28:15.503

该字段用于外键。要在 MySQL 中更改此字段，您应该执行以下步骤：

*   删除所有相关的外键
*   修改字段
*   重新创建所有丢弃的外键

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-10T11:41:37.123

使用 mysql 命令 mysqldump 对数据库进行转储，然后在每个需要的地方搜索并添加无符号。然后将转储还原到同一数据库。在恢复之前删除所有表并将其转储。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-07T23:58:52.787

我接手了一个项目，有相同issue的部分主键被签名，相关的外域也被签名。

我使用了@Devart 方法，但我能够自动化整个过程。我能够查询`information_schema`生成额外的 SQL 语句，我可以“剪切和粘贴”然后运行。

**生成 SQL 语句以删除所有约束**

```
SELECT concat('ALTER TABLE ', TABLE_NAME, ' DROP FOREIGN KEY ', CONSTRAINT_NAME, ';')
FROM information_schema.key_column_usage
WHERE CONSTRAINT_SCHEMA = 'YOUR_SCHEMA_NAME'
AND referenced_table_name IS NOT NULL; 
```

**更改任何`id`需要更改为 UNSIGNED 的列**

```
SELECT
  CONCAT('ALTER TABLE `', TABLE_NAME, '` CHANGE COLUMN  id id INT UNSIGNED NOT NULL AUTO_INCREMENT;')
FROM `COLUMNS`
WHERE
  `COLUMN_KEY` = 'PRI' AND
  `TABLE_SCHEMA` = 'YOUR_SCHEMA_NAME' AND
  `COLUMN_TYPE` NOT LIKE '%unsigned%' AND
  `COLUMN_TYPE` LIKE '%int%' AND
  `COLUMN_NAME` = 'id'; 
```

**更改指向的外部字段`id`**

```
SELECT CONCAT('ALTER TABLE `', kcu.TABLE_NAME, '` CHANGE COLUMN  ', kcu.COLUMN_NAME,' ', kcu.COLUMN_NAME, ' INT UNSIGNED ', IF(c.IS_NULLABLE = 'YES', 'NULL', 'NOT NULL'), ';')
FROM `KEY_COLUMN_USAGE`  kcu
INNER JOIN `COLUMNS` c
ON
  kcu.TABLE_NAME = c.TABLE_NAME AND
  kcu.COLUMN_NAME = c.COLUMN_NAME
WHERE
  `REFERENCED_COLUMN_NAME` = 'id' AND
  `REFERENCED_TABLE_NAME` IN (
    SELECT
        TABLE_NAME
    FROM `COLUMNS`
    WHERE
        `COLUMN_KEY` = 'PRI' AND
        `TABLE_SCHEMA` = 'YOUR_SCHEmA_NAME' AND
        `COLUMN_TYPE` NOT LIKE '%unsigned%' AND
        `COLUMN_TYPE` LIKE '%int%' AND
        `COLUMN_NAME` = 'id'
); 
```

*（请注意，在此声明中，即使它们已经是 UNSIGNED，也会被错误地更改为 UNSIGNED，但这不会导致任何问题）*

**重新插入所有必需的约束**

```
SELECT CONCAT('ALTER TABLE ', rc.`TABLE_NAME` ,' ADD CONSTRAINT ', rc.`CONSTRAINT_NAME`, ' FOREIGN KEY (',kcu.`COLUMN_NAME`,') REFERENCES ', rc.`REFERENCED_TABLE_NAME` ,'(id) ON DELETE ', DELETE_RULE , ' ON UPDATE ' , UPDATE_RULE, ';')
FROM `REFERENTIAL_CONSTRAINTS` rc
INNER JOIN
    `KEY_COLUMN_USAGE` kcu
     ON rc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
WHERE kcu.CONSTRAINT_SCHEMA = 'api'      AND
kcu.`REFERENCED_COLUMN_NAME` = 'id'; 
```

密切注意这些 SQL 语句，可能需要针对您的模式进行修改，例如，它假定您的主 id 称为“id”。

此外，您必须在运行它们的任何实际输出之前运行所有 4 个语句。

使用 MySQL 5.6

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T12:26:49.067

尝试这个
`ALTER TABLE 'users' MODIFY 'id' UNSIGNED NOT NULL AUTO_INCREMENT'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T11:49:21.513

[MySQL Workbench](http://www.mysql.com/products/workbench/)将让你做到这一点。您需要确保更改 PRIMARY KEY 以及每个具有外键引用的表中的所有列。

我发现它适用于许多场景，YMMV。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-26T11:40:11.877

以下将在许多情况下工作，尽管它取决于列的修改方式

```
-- disable fk constraints
SET FOREIGN_KEY_CHECKS=0;

ALTER TABLE 'table' MODIFY 'column'....

-- re-enable fk constraints
SET FOREIGN_KEY_CHECKS=1; 
```

如果它使 FK 无效，这可能不起作用 - 在这种情况下，您需要删除/重新创建 FK。

```
ALTER TABLE 'table' DROP FOREIGN KEY FK_xxxxxxxxxxx;

ALTER TABLE 'table' MODIFY 'column'....

ALTER TABLE 'table'
  add constraint FK_xxxxxxxxxxx
foreign key ('key-column') references 'other table' ('key-column'); 
```

# iphone - 如何在 IOS 中使用 .m 文件将一个 .xib 文件更改为另一个文件

> ID：10833532
> 
> 赞同：0
> 
> 时间：2012-05-31T12:22:39.037
> 
> 标签：iphone, ios, cordova

我正在工作与phonegap相关的项目

*   **第一个 .xib** 文件我有 webview
*   从java脚本文件到.m文件
*   .m 文件我想导航**到另一个 .xib 文件**

任何人帮助我。..

我想知道可以将一个 .xib 文件导航到另一个 .xib
是否可能意味着 uiwebview 中的第一个 .xib 文件意味着可以导航另一个 .xib 文件

预先感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:55:00.713

```
 id delegate = [[UIApplication sharedApplication] delegate];
    [[delegate viewController] presentModalViewController:imagePicker animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:05:02.737

只需替换`window.rootViewController`, 或使用`UINavigationController`, 或`UITabbar`? 查看文档和示例项目。

您也可以使用第一个以模态方式呈现第二个 viewController：（`[viewController presentModalViewController: secondViewController animated: YES]`就像那样......）

# android - 当我尝试发送没有通过模拟器发送意图的电子邮件时出错

> ID：10833545
> 
> 赞同：0
> 
> 时间：2012-05-31T12:23:29.443
> 
> 标签：android, gmail

我想向使用 EMULATOR 的用户发送一封电子邮件[NO INTENT]。我试过了，但我有一个我无法理解的错误..我使用了一些我在[这里](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)找到的代码......我把所有的 Jar 文件都放了，但仍然给我一个错误

// 我在 LOGCAT 中得到一个错误

05-31 12:12:51.403: V/TLINE(1030): 新: android.text.TextLine@40653b20 05-31 12:12:51.953: V/TLINE(1030): 新: android.text.TextLine@40656270 05-31 12:13:00.923: I/dalvikvm(1030): 解析 Ljavax/activation/DataHandler 失败；interface 502 'Lmyjava/awt/datatransfer/Transferable;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:52:41.203

```
解析 Ljavax/activation/DataHandler 失败；interface 502 'Lmyjava/awt/datatransfer/Transferable;

```

这是由于您对 jar 的依赖性不满意。您将需要找到此依赖项 jar。

尝试从这里获取更多信息。

[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

# blackberry - navigator.geolocation.getCurrentPosition(onSuccess, onError); 不工作

> ID：10833548
> 
> 赞同：0
> 
> 时间：2012-05-31T12:23:38.867
> 
> 标签：blackberry, cordova, blackberry-simulator, blackberry-jde

我正在使用 html5 代码开发一个黑莓应用程序。我需要找到我当前的位置，并且必须在谷歌地图中显示它。我在 BB9780 中运行它。它在模拟器中运行，但给出了错误的位置（美国位置）。但它没有在设备中运行。

我怀疑下面的行没有执行。

> navigator.geolocation.getCurrentPosition(onSuccess, onError);

我在这里给出我的代码。请建议我哪里出错了

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" id="viewport" content="width=device-width,height=device-  height,initial-scale=1.0,user-scalable=no">
  <script src="json2.js" type="text/javascript"></script>
  <script src="cordova-1.7.0.js" type="text/javascript"></script>
  <script type="text/javascript" charset="utf-8">

  // Wait for Cordova to load

  document.addEventListener("deviceready", onDeviceReady, false);

 // Cordova is ready

 function onDeviceReady() {
    alert("onDeviceReady");
navigator.geolocation.getCurrentPosition(onSuccess, onError);
 }

 // onSuccess Geolocation

 function onSuccess(position) {
alert("onSuccess");
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                        'Longitude: '          + position.coords.longitude             + '<br />' +
                        'Altitude: '           + position.coords.altitude              + '<br />' +
                        'Accuracy: '           + position.coords.accuracy              + '<br />' +
                        'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                        'Heading: '            + position.coords.heading               + '<br />' +
                        'Speed: '              + position.coords.speed                 + '<br />' +
                        'Timestamp: '          + new Date(position.timestamp)          + '<br />';
}

// onError Callback receives a PositionError object

function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}
</script>
<title>Notification  Sample</title>
</head>
<body>
   <p id="geolocation">Finding geolocation...</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T11:58:47.857

我通过重新启动设备来获得解决方案，就像我从 1 个月以来没有重新启动设备一样

所以重启你的设备可能会得到解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:02:36.927

我不认为这是您怀疑的路线，您收到的错误信息是什么？它可能是模拟器，因为您的代码看起来正确，尽管我只阅读 error.message 和 error.code。这是我的 onDeviceReady 版本

```
 function onDeviceReady() {
    try {
        if(typeof(navigator.geolocation)!='undefined') gl = navigator.geolocation;
        else gl=google.gears.factory.create('beta.geolocation');
    }catch(e){}

    if (gl) {
        gl.getCurrentPosition(onSuccess, onError);
        alert("Device Ready");
    } else {
        alert('not supported');
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T10:03:07.097

请尝试添加`timeout:10000`以查看错误日志。这可能是您特定设备上的超时问题尝试： `gl.getCurrentPosition(onSuccess, onError,{timeout:10000});`改为

我在 github 上发现的相关问题： [https ://github.com/apache/cordova-plugin-geolocation/issues/119#issuecomment-463897045](https://github.com/apache/cordova-plugin-geolocation/issues/119#issuecomment-463897045)

在这里： [phonegap 地理位置总是在超时时失败](https://stackoverflow.com/questions/12859425/phonegap-geolocation-always-fail-on-timeout)

# c# - 在 C# 中发送要在服务器上执行的代码 - 像 Java RMI

> ID：10833550
> 
> 赞同：3
> 
> 时间：2012-05-31T12:23:53.657
> 
> 标签：c#, java, wcf, rmi

这是java中的示例代码。

**共享接口：**

```
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Compute extends Remote {
  public Object executeTask(Task t) throws RemoteException;
} 
```

任务（这将作为参数传递）：

```
import java.io.Serializable;

public interface Task extends Serializable {
  public Object execute();
} 
```

**服务器：**

```
import java.rmi.Naming;
import java.rmi.RMISecurityManager;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;

public class ComputeEngine extends UnicastRemoteObject implements Compute {

  public ComputeEngine() throws RemoteException {
    super();
  }

  public Object executeTask(Task t) {
    return t.execute();
  }

  public static void main(String[] args) {
    setRmiCodebase();
    System.setSecurityManager(new RMISecurityManager());
    try {
      Compute engine = new ComputeEngine();
      Naming.rebind("//localhost:1099/Compute", engine);
      System.out.println("ComputeEngine started.");
    } catch (Exception ex) {
      ex.printStackTrace();
    }
  }

  private static void setRmiCodebase() {
    String codebase = System.getProperty("java.rmi.server.codebase");
    if (codebase != null)
      return;
    // set codebase based on location of this clsas (is it in jar or filesistem?)
  }

} 
```

**客户：**

```
import java.math.BigDecimal;
/**
* Calculates Pi to arbitrary number of digits:
*/
public class Pi implements Task {

  public Pi(int digits) {
    this.digits = digits;
  }

  public Object execute() {
    return computePi(digits);
  }

  public static BigDecimal computePi(int digits) {
    // compute Pi
  }

} 
```

客户主要：

```
import java.math.BigDecimal;
import java.rmi.Naming;
import java.rmi.RMISecurityManager;

public class ComputePi {

  public static void main(String[] args) {
    setRmiCodebase();
    System.setSecurityManager(new RMISecurityManager());
    try {
      Compute comp = (Compute)Naming.lookup("//localhost:1099/Compute");
      Pi task = new Pi(100);
      BigDecimal pi = (BigDecimal)comp.executeTask(task);
      System.out.println(pi);
    } catch (Exception ex) {
      ex.printStackTrace();
    }
  }

  private static void setRmiCodebase() {
    String codebase = System.getProperty("java.rmi.server.codebase");
    if (codebase != null)
      return;
    // set codebase based on location of this clsas (is it in jar or filesistem?)
  }
} 
```

如您所见，来自客户端的代码（不仅仅是数据）被传输到服务器并在那里执行并返回计算结果。服务器不知道该类的`Pi`存在，它只知道`Task`接口。

我需要这样的东西才能在 .net 环境中工作（如果很重要，请使用 C#）。WCF 会很好，但我正在寻找最直接的解决方案，所以 WCF 不是强制性的。我什至不确定使用什么关键字来谷歌文档或解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:37:51.087

Afaik .NET 不支持开箱即用 - 您可以进行远程处理，但这不会（按原样）让您从服务器上的客户端运行代码。我认为您必须实现一些东西，将包含您要执行的代码的 dll 传输到服务器，然后可能将该 dll 加载到单独的 AppDomain 中（因为除非您将它们加载到单独的 AppDomain 中，否则您无法卸载 dll） ，然后有办法指定要运行的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:29:05.147

您想要的是 .NET Remoting。 [这里是](http://www.c-sharpcorner.com/uploadfile/pk_khuman/rmito.netremoting01162006052210am/rmito.netremoting.aspx)文章的链接，展示了如何从 RMI 迁移到 .NET Remoting。

但根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/72x4h507.aspx)，这是一项遗留技术，您应该使用 WCF。

**编辑：**

您不能“就那样”使用 WCF 获得 .NET Remoting 功能。

[在这里](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/b32818d9-12d7-40df-8077-d5d074221de5)，您可以阅读有关从 .NET Remoting 移植到 WCF 的讨论。但是如果你根本不知道 WCF 你应该从[这里](http://msdn.microsoft.com/en-us/library/ms735119%28v=vs.90%29.aspx)开始。而且你可能不会很快得到你的结果:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:08:09.947

.NET 本身不支持在另一台计算机上执行“发送代码”。通常，必要的代码会在客户端调用之前编译为程序集并预安装在服务器上。远程处理和 WCF 都是如此。您可能会遇到双向远程处理情况，即服务器通过 WCF 回调客户端上的方法，但我怀疑这不是您想要的。我知道在服务器上真正运行动态代码的唯一方法是生成动态代码，将其作为字符串发送到服务器，然后让服务器将其编译为内存中的程序集，然后执行它。如果您有兴趣这样做，请查看我对类似问题的回答：

[自动激活属性？](https://stackoverflow.com/questions/10566399/autovivified-properties/10568315#10568315)

但是，在大多数情况下，这并不是我所建议的。我建议您首先重新考虑您的设计，看看是否有任何方法可以以典型的“.NET 方式”完成您需要的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T13:11:05.660

这个 MSDN 页面或多或少有你描述的这个确切的用例。你只需要修改ServiceContract

[http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)

您可能只需要修改这部分：

```
 [ServiceContract(Namespace = "http://UE.Samples")]
    public interface ICalculator
    {
        [OperationContract]
        double Add(double n1, double n2);
    }

    // Service class which implements the service contract.
    public class CalculatorService : ICalculator
    {
        public double Add(double n1, double n2)
        {
            return n1 + n2;
        } 
```

而不是标量值，而是将您的 executeTask 方法与您自己的类的参数放在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:54:49.143

我不相信.NET 有用于将可执行代码从客户端传输到服务器的内置解决方案。假设安全约束允许，您可以考虑发送可解释的代码，例如 Python 或 JavaScript，它们可以分别通过[IronPython](http://ironpython.net/)或[IronJS](https://github.com/fholm/IronJS)在服务器端执行。如果需要 C#（并且您仍然可以访问源代码），请发送源代码并在服务器端编译（通过 Roslyn 或 Mono 的[评估器](http://tirania.org/blog/archive/2010/Apr-27.html)）。

# java - org.apache.thrift.transport.TTransportException？

> ID：10833551
> 
> 赞同：1
> 
> 时间：2012-05-31T12:23:57.367
> 
> 标签：java, hadoop, thrift, hive

> **可能重复：**
> [java.sql.SQLException：配置单元中的 org.apache.thrift.transport.TTransportException？](https://stackoverflow.com/questions/10828562/java-sql-sqlexception-org-apache-thrift-transport-ttransportexception-in-hive)

你能告诉我这个例外是什么时候发生的吗？“org.apache.thrift.transport.TTransportException”实际上我想用java将数据存储到hive表中。当我执行上面的代码时发生异常？

```
public void createTable(String tableName) {
    try{
        Statement stat = con.createStatement();

    String QueryString = "INSERT INTO logs (id, msg) VALUES(1, 'hello')";

     a = stat.executeUpdate(QueryString);
    if(a==1){
        System.out.println(a);
        System.out.println("Table has been created");
    }

    }catch(Exception e){
    e.printStackTrace();}
} 
```

# html - 表格单元格中的 HTML/css 文本不缩进

> ID：10833556
> 
> 赞同：8
> 
> 时间：2012-05-31T12:24:33.203
> 
> 标签：html, css, html-table

一个简单的问题，但对外观的影响很大。

我想要从单元格边框缩进的文本并尝试过 `style=text-indent: 4px`（未格式化，因此它在此处正确显示）但是当第一行缩进时，`<br>`标签后面的行没有缩进。请帮忙。由于一些 Javascript，我需要使用 div。这是有缺陷的代码：

```
<td>
   <div id="navbar" style="text-indent:4px"><b>View by:</b><br>
      <a href="search.php?cat=pop">Popular</a><br>
      <a href="search.php?cat=trend">Trending</a><br>
   </div>
</td> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T12:25:24.100

`text-indent`只应该触及第一行。如果要调整整个块，请使用`margin`（或`margin-left`或或等）。`padding`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T12:29:04.340

尝试向元素添加填充，该元素包含您要缩进的文本。

```
 <td style="padding:5px;">text</td> 
```

# c# - 为什么 MSBuild 无法解决程序集版本更改

> ID：10833557
> 
> 赞同：1
> 
> 时间：2012-05-31T12:24:37.047
> 
> 标签：c#, visual-studio-2010, msbuild

我的问题似乎比较简单。我在 VS2010 中创建了 ac# 解决方案，其中有几个项目引用配置得当。我在我们的构建机器上使用 MSBuild，它工作正常，以正确的顺序逐步构建以提高效率。但是，如果我扩展接口（添加公共属性等）并增加其他人所依赖的项目之一的 AssemblyVersion，似乎 MSBuild 无法刷新下游依赖项上的缓存并抛出它不能的错误找到更改后的 dll 的先前版本。有趣的是，如果我之后立即再次运行构建，它会告诉我输出没有改变并且完成构建没有错误，但我不再相信它做了正确的事情。

有一个文件“ResolveAssemblyReference.cache”似乎包含旧的引用，如果我在每次构建之前从 obj/x86/Release 文件夹中删除它，我永远不会收到任何错误，但不知道输出是否有/应该是重建。

我想了解为什么 MSBuild 会为此苦苦挣扎，以及为什么在第二次构建时它似乎报告第一次构建确实有效并且目标是最新的。

在我了解发生了什么之前，我将不得不始终强制重建整个解决方案，以确保我有兼容的文件。

顺便说一句，如果我在 VS2010 中构建，我似乎从来没有遇到过这种情况，因为我怀疑它会在每次构建时适当地更新缓存。

更新：

我发现我在 MSBuild 的命令行上使用“OutDir”似乎是罪魁祸首。如果我删除它，那么引用似乎得到了适当的解决。但是现在我没有将我的输出复制到我需要它进行部署的地方......

# java - 在 Java Swing 中进行打印的单元测试

> ID：10833559
> 
> 赞同：6
> 
> 时间：2012-05-31T12:24:38.523
> 
> 标签：java, swing, testing

我有一些代码使用我想要单元测试的 Swing/AWT 打印功能。它使用系统本机打印对话框，但是有没有办法让 JVM 拦截它并在单元测试期间用模拟替换它，以便我可以获得将要打印的图像的副本？

我的打印代码很简单，大致如下所示：

```
 Printable printable = getPrintable();

     PrinterJob printJob = PrinterJob.getPrinterJob();
     printJob.setPrintable(printable);

     if (printJob.printDialog())
     {
        try
        {
           printJob.print();
        }
        catch (PrinterException exception)
        {
           ...
        }
     } 
```

我一直在使用 FEST 进行其他 GUI 测试，但它似乎不支持打印测试。这甚至可以做到吗，还是我需要编写测试文档，告诉 QA 去检查他们的打印机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:30:33.110

查看我的打印库：[http ://tus.svn.sourceforge.net/viewvc/tus/tjacobs/print/](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/print/)

您可以创建一个 StandardPrint 并为将要呈现的每个页面生成图像

# c# - 在 MVC3 中未授权时仍在执行的操作

> ID：10833560
> 
> 赞同：0
> 
> 时间：2012-05-31T12:24:38.770
> 
> 标签：c#, asp.net-mvc-3

我有一个 MVC3 应用程序，用户需要经过身份验证才能访问该站点。我登录并在显示数据的屏幕上，然后我离开了。一个小时后我回来了，此时用户已自动注销。但是当我点击一个按钮来获取数据时，没有重新登录，我得到了黄屏死机，因为我的对象是空的。这是我的行动：

```
 [Authorize]
    public ActionResult Index(string id) 
```

我认为 [Authorize] 属性确保除非经过身份验证，否则不会执行此操作，但显然它没有或我没有正确使用它。那么我如何使用 [Authorize] 或任何其他属性来确保用户始终通过身份验证，如果没有，将他们带到登录屏幕？谢谢

PS 这仅在发生超时时发生。如果我只是尝试通过输入 URL 而不登录来访问视图，我会按预期获得登录屏幕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:26:49.657

> 一个小时后我回来了，到现在用户已经自动下线了

如果执行该操作，这意味着用户没有注销。该`[Authorize]`属性按预期工作。

我怀疑您的问题与身份验证无关。它与您正在使用的 ASP.NET 会话有关。请记住，Forms Authentication cookie 和 ASP.NET Session 是两个完全不同的概念。所以我猜你在用户登录时已经在 ASP.NET 会话中存储了一些东西。除了默认情况下 ASP.NET 会话在 20 分钟内到期并且配置独立于表单身份验证 cookie 超时。因此，虽然用户身份验证 cookie 仍然有效并且用户已通过身份验证，但它已经丢失了会话，因为会话过期或 Web 服务器只是回收了您的应用程序，而您存储到 Session 中的所有内容当然都丢失了。

话虽如此，让我们看看您必须解决此问题的不同可能性：

1.  我推荐的方法是摆脱 Session。只需放入`<sessionState mode="Off" />`您的 web.config 并忘记 ASP.NET 会话在无状态应用程序中引入的状态。
2.  编写一个自定义 Authorize 属性，除了检查身份验证 cookie 是否有效之外，它还将检查 Session 是否仍然包含值：

    ```
    public class MyAuthorizeAttribute : AuthorizeAttribute
    {
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            var authorized = base.AuthorizeCore(httpContext);
            if (!authorized)
            {
                return false;
            }

            return httpContext.Session["someKeyThatYouHaveStored"] != null;
        }
    } 
    ```

然后使用这个自定义属性：

```
[MyAuthorize]
public ActionResult Index(string id) 
```

# php - php 带有特殊字符的文件名列表输出到 xml

> ID：10833563
> 
> 赞同：0
> 
> 时间：2012-05-31T12:24:59.160
> 
> 标签：php, xml, utf-8

警告：我对 php 非常缺乏经验。

我正在尝试读取服务器上文件列表的名称并使用这些文件创建 XML 文件。其中一些具有外语字符，这会导致 XML 创建期间出现问题。

在四处搜索之后，我意识到我可能需要使用`htmlspecialchars`or `rawurlencode`，但我一直无法让这些工作。

下面的代码是根据我在网上找到的代码构建的。除了不知道更好之外，没有特别的理由这样做。

```
$objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(realpath($_SERVER['DOCUMENT_ROOT'])), RecursiveIteratorIterator::SELF_FIRST);

header("Content-Type: text/xml;");
echo '<?xml version="1.0" encoding="UTF-8"?><list>';
foreach($objects as $name){

    echo '<file><loc>'.$name.fileName.'</loc><lastmod>'.date('Y-m-d',filemtime($name)).'</lastmod></file>';
}
echo '</list>'; 
```

**澄清**：不是`rawurlencode`失败，只是我不知道如何将它保存在解码的XML文件中

```
<file>
    <loc>
        http://%2Fhome%2Fusers%2Fjdfvnftp%2Fjdfv.nl%2Fptp%2Ftorrents%2FBuck.2011.DVD.XviD.AVI.106682.torrent.importedfileName
    </loc>
    <lastmod>2012-05-29</lastmod>
</file> 
```

# java - 在 ComponentListener 和那些对象中传递 2 个对象

> ID：10833565
> 
> 赞同：0
> 
> 时间：2012-05-31T12:25:03.327
> 
> 标签：java, swing, jdialog, jcomponent

```
void NewJDialogcallone(JFrame frame) 
{
    location = frame.getLocationOnScreen();
    int x = location.x;
    int y = location.y;
    dialog.setLocation(x, y);
    dialog.setLocationRelativeTo(frame);
    dialog.setVisible(true);
    dialog.setAlwaysOnTop(true);
    dialog.addComponentListener(this);
}

public void componentMoved(ComponentEvent e,?????) 
{
    JOptionPane.showConfirmDialog (null,
                                "This is the \"Ok/Cancel\"message dialog box.",
                                "",
                                JOptionPane.OK_CANCEL_OPTION);
} 
```

我想使用框架对象，以便对话框相对于父框架移动，也就是我移动父框架并且对话框随之移动。我想调用`dialog.setLocationRelativeTo(//parent frame object//)`，只有当我有父框架对象时才有可能。

如果有任何方法可以获得此窗口行为，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:35:17.937

您只需要`final`在方法参数前面添加关键字`JFrame frame`。

```
 void NewJDialogcallone(final JFrame frame) 
 ... 
```

我还建议避免使用它：

```
dialog.setAlwaysOnTop(true); 
```

因为这对用户体验来说真的很烦人。通常，这是您没有正确实例化对话框的标志，即通过传递正确的框架/对话框所有者。

下面是一个不使用 setAlwayOnTop() 的窗口位置同步示例：

```
import java.awt.Point;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;

import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Test {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test dialog synch");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            // On the next line I pass "frame" to the dialog so that the dialog never
            // goes behind the frame, avoiding the need for setAlwaysOnTop
        final JDialog dialog = new JDialog(frame, false);
        dialog.setSize(200, 50);
        frame.addComponentListener(new ComponentAdapter() {

            private Point lastLocation;

            @Override
            public void componentMoved(ComponentEvent e) {
                if (lastLocation == null && frame.isVisible()) {
                    lastLocation = frame.getLocation();
                } else {
                    Point newLocation = frame.getLocation();
                    int dx = newLocation.x - lastLocation.x;
                    int dy = newLocation.y - lastLocation.y;
                    dialog.setLocation(dialog.getX() + dx, dialog.getY() + dy);
                    lastLocation = newLocation;
                }
            }

        });
        frame.setSize(400, 200);
        frame.setVisible(true);
        dialog.setLocationRelativeTo(frame);
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:33:54.293

您可以轻松创建一个组件侦听器，该侦听器引用您需要的任何对象

```
 final Object one = new Object();
    final Object two = new Object();

    ComponentListener listener = new ComponentListener() {
        public void componentHidden(ComponentEvent e) {
            one.toString();
        }
        public void componentMoved(ComponentEvent e) {
            two.toString();
        }
        public void componentResized(ComponentEvent e) {
            one.toString();
        }
        public void componentShown(ComponentEvent e) {
            two.toString();
        }
    }; 
```

# css - 图像没有出现在 div 中？是因为CSS吗？

> ID：10833568
> 
> 赞同：0
> 
> 时间：2012-05-31T12:25:10.850
> 
> 标签：css, image, jsp, html

我正在尝试将图像放入 div 中。它实际上是一个多系列的div。有一个显示标签“协作”的 div。我希望图像“expandImg”出现在标签“Collab”旁边。尽管可见性最初是“隐藏的”，但我通过脚本对其进行了修改。请查看下面的代码，让我知道为什么图像“expandImg”没有出现在 div 中：

```
#top-stuff {
    left:0px;
    position:absolute;
    bottom:0px;
    width:216px;
    z-index:12;
    height:30px;
}

#top-bar-out {
    display:block;
    left:0px;
    bottom:0px;
    position:relative;
    width:216px;
    height:30px;
    background: -moz-linear-gradient(center top, #333333, #111111);
    background: -webkit-gradient(linear, left top, left bottom, from(#333333), to(#111111));
    background:  -o-linear-gradient(top, #333333, #111111);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#333333', EndColorStr='#111111');
    box-shadow:0 1px 2px #666666;
    -webkit-box-shadow: 0 1px 2px #666666;
}

.active-links {
    position:absolute;
    left:0px;
    bottom:0px;
    height:30px;
    width:216px;
}
#container {
    width:216px;
    margin:0 auto;
    position: relative;
    left:0px;
    bottom:0px;
}

#topnav {
    text-align:centre;
    left:0px;
    bottom:0px;
    height:30px;
    width:216px;
}

#session {
    cursor:pointer;
    display:inline-block;
    left:0px;
    bottom:0px;
    width:216px;
    height:30px;
    padding:10px 12px;
    vertical-align: top;
    white-space: nowrap;
}

#session.active, #session:hover {
    background:rgba(255,255,255,0.1);
    color:fff;
    width:216px;
}

a#collab-link {
    color:#bababa;
    position:relative;

}

a#collab-link em {
    font-size:10px;
    font-style:normal;
    margin-right:4px;
}

a#collab-link strong {
    color:#fff;
}

#collab-dropdown {
    background-color:#202020;
    border-bottom-left-radius:5px;
    border-bottom-right-radius:5px;
    box-shadow:0 1px 2px #666666;
    -webkit-box-shadow: 0 1px 2px #666666;
    height:320px;
    width:216px;
    position:absolute;
    left:0px;
    bottom:31px;
    display:none;
}

.frame {
    position: absolute;
}

<div id="top-stuff" style="visibility: hidden;"> 
    <div id="top-bar-out"> 
        <div id="container"> 
            <div id="topnav"> 
                <div class="active-links"> 
                    <div id="session"> 
                        <a id="collab-link" href="#"> 
                        <strong>Collab</strong>
                        </a>
                        <img id="expandImg" src="styles/images/dt_down.png" 
                         align="right" style="position: absolute;"/>                                            
                    </div> 

                    <div id="collab-dropdown"> 
                        <iframe src="IQWFrontController?handler=CLB00001" style="{padding:0px; position:absolute; display: block;}"  
                        scrolling=auto width="100%" height="100%"></iframe>  
                    </div>

                </div>                   
            </div>              
        </div>           
    </div>       
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:36:44.030

既然您已经将它绝对定位，那么添加 top 和 left 属性以将其放置在您希望它出现的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:44:27.187

右对齐在这里不起作用！对于样式 attr 中的 expandImg，添加 top:0 和 lef:0

```
<img id="expandImg" src="styles/images/dt_down.png" style="position: absolute;top:0;left:0;" /> 
```

**如果图像不显示，则尝试修复图像的地址或检查您的脚本以再次更改可见性！**

我还注意到一切都是绝对定位的。如果少数情况和浏览器这可能会导致元素相互溢出，因此请尝试使用元素的相对定位！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:58:23.533

我已经解决了这个问题。虽然我已将图像添加到文件夹结构中，但它们在 Eclipse 中不可用。太傻了，我没有注意到。在我刷新 Eclipse 上的文件夹后，图像开始显示。非常感谢你们的投入。

# c++ - Ubuntu上的strlen运行时错误

> ID：10833573
> 
> 赞同：2
> 
> 时间：2012-05-31T12:25:23.647
> 
> 标签：c++, runtime-error, glibc, strlen

我开发了一个在 Debian 下编译的 CGI C++ 应用程序。在 Ubuntu 系统上运行此应用程序出现错误：

> 重定位错误：/lib32/libresolv.so.2：符号 strlen，版本 GLIBC_2.0 未在带有链接时间参考的文件 libc.so.6 中定义

我现在能做什么？我应该在 Ubunto 系统上重新编译吗？我可以更换图书馆吗？

## 编辑

我将我的应用程序与`-static`.
在 Ubuntu 系统上运行命令`ldd --version`显示了我在`EGLIB`那里使用的命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:32:54.100

此错误意味着您的程序是针对旧版本的 GNU libc 编译/链接的，您要运行可执行文件的系统不支持该版本。

你有几个选择来解决它：

1.  确保在编译和运行时使用相同或兼容版本的 libc。
2.  链接到静态运行时。
3.  在 Ubuntu 系统上安装旧版本的 libc 以匹配 Debian 的环境。

# mysql - mysql外键不起作用

> ID：10833581
> 
> 赞同：1
> 
> 时间：2012-05-31T12:25:44.797
> 
> 标签：mysql, foreign-keys, explain

我有两张桌子：

```
CREATE TABLE IF NOT EXISTS treaties(
id INT NOT NULL AUTO_INCREMENT,
name varchar(50) NOT NULL,
PRIMARY KEY(id)
)ENGINE=InnoDB; 
```

和

```
CREATE TABLE IF NOT EXISTS items(
id INT NOT NULL AUTO_INCREMENT,
treaty INT NOT NULL,
item varchar(20),
PRIMARY KEY(id),
FOREIGN KEY (treaty) REFERENCES treaties(id)
      ON UPDATE RESTRICT
      ON DELETE RESTRICT
)ENGINE=InnoDB; 
```

之后，我在每个表中插入了几行，但值`treaties.id`和值`items.treaty`相同。当我跑

```
EXPLAIN SELECT * 
FROM `items` 
JOIN `treaties` ON `items`.`treaty` = `treaties`.`id` 
WHERE 1 
```

我获得了：

```
id | select_type | table   | type | possible_keys | key | key_len | ref | rows | Extra
1  | SIMPLE      | treaties| ALL  | PRIMARY       | NULL|   NULL  | NULL|   3  |
1  | SIMPLE      | items   | ALL  | treaty        | NULL|   NULL  | NULL|   4  | Using where; Using join buffer 
```

我想如果我之间有外键`items.treaty`并且`treaties.id`必须使用这个键并且类型不能是 ALL。怎么了？

请帮我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:37:55.897

如[手册中所述](http://dev.mysql.com/doc/refman/5.5/en/how-to-avoid-table-scan.html)：

> 当 MySQL 使用表扫描来解析查询时，输出[`EXPLAIN`](http://dev.mysql.com/doc/en/explain.html)显示在 type 列中。`ALL`这通常发生在以下情况下：
> 
> [...]
> 
> *   该表是如此之小，以至于执行表扫描比费心查找键要快。这对于少于 10 行且行长度较短的表很常见。在这种情况下不要担心。

# maven - 如何排除 Maven 发布上的文件：准备和发布：执行？

> ID：10833584
> 
> 赞同：4
> 
> 时间：2012-05-31T12:25:52.340
> 
> 标签：maven, maven-release-plugin

我正在使用 maven 发布/标记我的项目，并且我正在使用一些属性文件并希望 mvn:prepare 排除那些正在发布的项目。我尝试使用以下命令：

```
mvn release:prepare -DpreparationGoals="clean install"
-DcheckModificationExcludeList=props.properties 
```

但它仍然给我以下错误：

```
[INFO] Cannot prepare the release because you have local modifications :
[props.properties:unknown] 
```

所以问题是：如何才能让 maven mvn:release 跳过检查某些本地修改？谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:47:05.117

此功能在**2.1版本中实现**

# objective-c - 以横向模式拍摄 iOS SDK 时，捕获的图像正在拉伸

> ID：10833586
> 
> 赞同：0
> 
> 时间：2012-05-31T12:26:05.487
> 
> 标签：objective-c, uiimagepickercontroller

我正在使用 UIImagePickerController 并且我在横向模式下捕获图像，它直接转换为纵向模式但该图像在横向模式下拉伸..

谁能告诉我是什么原因

我的代码是：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   myimageView.image = selectedImage;
   [myimageView setFrame:CGRectMake(0, 0, 320, 427)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:26:03.643

因为 imageView 的大小小于原始图像。您可以通过以下方式查看原始图像大小

```
NSLog(@"%@",NSStringFromCGSize(selectedImage.size)); 
```

因此，当您尝试在较小的图像视图中拍摄大图像时，显然它会被拉伸。

我认为这可能是原因。

# javascript - JSON.stringify 在黑莓手机中不起作用

> ID：10833594
> 
> 赞同：0
> 
> 时间：2012-05-31T12:26:44.083
> 
> 标签：javascript, jquery, jquery-mobile

JSON.stringify 不适用于黑莓手机，它在 iphone 和其他浏览器中运行良好。它没有在黑莓手机的以下示例中提示它：

```
 function sup() {
        this.name;
    }

    var SUP = new sup();

        SUP.name = 'XYZ' ;
        var tt = JSON.stringify(SUP);
        alert(tt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:29:36.947

听起来那个版本的黑莓浏览器不支持新`JSON`对象，它是在[ES5](http://ecma-international.org/ecma-262/5.1)中引入的（所以，就在最近）。你可以找到几个 polyfills/shims，包括[来自 JSON 自己的“介绍人”的那些](https://github.com/douglascrockford/JSON-js/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:32:55.993

您应该创建一个回退机制，以便浏览器使用本机 JSON 支持（如果存在），否则它会下载 @TJ Crowder 指出的库

像这样的东西应该可以解决问题

```
<script>window.JSON|| 
    document.write("<script src='js/my-json-library.js'>\x3C/script>")
</script> 
```

# fonts - 符号 (@) 处的 imagemagick 字体丢失

> ID：10833595
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:26:45.847
> 
> 标签：fonts, imagemagick, photoshop

我在 imagemagick 中使用这种字体：[http](http://www.fonts2u.com/sixty-four-dollar-question-medium.font) ://www.fonts2u.com/sixty-four-dollar-question-medium.font在以下命令中：

```
width=`identify -format %w $1`; \
convert  -fill '#333' -gravity east  -size ${width}x50 \
      -font fonts/SixtyFourDollarQuestion.ttf caption:'email@address.here' \
      $1 +swap -gravity south -composite $1 
```

Imagemagick 呈现一个“？” 代替 '@' 表示它找不到 @ 符号。但是，当我在我的机器（mac OS 10.7）上安装相同的字体库时，我可以在 photoshop 中使用字体和 @ 符号。

编辑：

我正在直接从终端执行的 bash 脚本中运行代码。脚本的编码是 UTF-8。当我更改字体时，@ 符号会毫无问题地打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:00:10.903

你没有说你是如何运行代码的，但我会检查你正在使用的文本编辑器上的编码，如果通过网页运行字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:56:57.290

字体不包含“@”符号字符 (U+0040)。这在您链接到的页面上很明显。“@”符号应该出现在大写“A”之前，但它不存在。详细检查字体的字形曲目可以证实这一点。

在某些情况下，包含在此字体中设置的“@”符号的文本可能会使用“后备”字体来显示*“* @”符号，但该符号不是来自“六十四美元问题”字体；它来自系统中的其他字体。

如果您想要该字体的“@”符号，您应该联系字体设计师并要求他们添加它。

# c++ - 我可以使用 typeid() 来知道一个类型是否是枚举吗？

> ID：10833600
> 
> 赞同：1
> 
> 时间：2012-05-31T12:26:54.770
> 
> 标签：c++, enums, typeid

我可以使用`typeid`/`type_info`以某种方式检测某种类型是否是`enum`（任何枚举数）吗？

以下可以很好地检测变量是否具有类型`int`

```
template<typename T>
bool is_int( T var )
{
  return strcmp( typeid(T).name(), typeid(int).name() ) == 0; 
} 
```

但我不能对枚举使用类似的版本 - name() 返回的字符串在 Linux 和 Windows 之间有所不同

```
template<typename T>
bool is_enum( T var )
{
  // can I use typeid here?
  // eg. string_contains( typeid(var).name(), "enum" ); 
} 
```

我在 Boost 中看到了模板化版本，但我们还不能使用这个库......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:31:07.950

在最新的 C++ 标准 C++11 中，已经有了检查（在编译时）类型是 an[`enum`](http://en.cppreference.com/w/cpp/types/is_enum)还是[`int`](http://en.cppreference.com/w/cpp/types/is_integral).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:06:27.780

您的方法有两个问题：

*   您假设名称是唯一的。它们不是（至少，标准不保证它们是）。
*   您假设因为您可以检测到一种类型，所以您可以检测到具有相同机制的系列。

如果您想知道变量的静态类型，编译时机制可能是最好的。为此有特定的 C++11 特征：`std::is_enum<T>`有一个`value`静态成员，它将是`true`或`false`取决于是否`T`是`enum`。

# actionscript - 动作脚本 3.0

> ID：10833604
> 
> 赞同：-3
> 
> 时间：2012-05-31T12:27:41.173
> 
> 标签：actionscript

我的场景中有一张图片滑动，在第 1 帧和第 100 帧之间有淡入淡出的图片。我想创建 2 个可以转到上一张图片和下一张图片的按钮，我只需要弄清楚代码。需要帮助。我在最后一帧试过这样，有两种方法：

```
gotoAndPlay(1);

btnA.addEventListener(MouseEvent.CLICK, backward);
btnB.addEventListener(MouseEvent.CLICK, forward);

function backward(event:MouseEvent)
{
    if(this.currentFrame == (1, 30))
    {
        gotoAndPlay(66);
    }
    else
    {
        gotoAndPlay(1);
    }
}

function forward(event:MouseEvent)
{
    if(this.currentFrame == 1, 30)
    {
        gotoAndPlay(31);
    }
    if(this.currentFrame == 31, 65)
    {
        gotoAndPlay(66);
    }
    if(this.currentFrame == 66, 100)
    {
        gotoAndPlay(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:38:57.700

对于你应该做的所有陈述：

```
...
if(event.target.currentFrame == 1  ||  event.target.currentFrame == 30)
    {
        gotoAndPlay(31);
    }
.... 
```

# html - 如何更改表单输入跳格顺序

> ID：10833608
> 
> 赞同：9
> 
> 时间：2012-05-31T12:27:52.220
> 
> 标签：html, twitter-bootstrap, tabindex

我在一个简单的注册表单上使用 Boostrap，我想设置标签顺序的顺序。它目前跳过“注册”按钮。

我确实`tabindex="1"`为每个输入字段（例如 2、3 等）添加了，包括提交按钮，但它不起作用。

这是一个[jsFiddle](http://jsfiddle.net/zPPQ5/1/)。

它似乎适用于 Opera，但不适用于 Safari 或 Chrome。任何变通办法？

更新：适用于 Chrome、Opera，但不适用于 Safari。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T12:40:18.393

您的代码没有任何问题。我希望它适用于所有浏览器。然而...

防止这种情况似乎是 Safari 中的一个“功能”。您必须启用除文本输入之外的任何内容的选项卡。这是我的 Safari 5 首选项窗口的屏幕截图：

![在此处输入图像描述](../Images/80c2713cab7e2a099eb962666ba62517.png)

如果我选中该框，您的小提琴就可以正常工作。如果我按 alt + tab 似乎也可以工作（在 Mac 上......不确定 Windows，因为 alt + tab 会切换到另一个窗口）。

# java - Comparator/able 中的 equals() vs compareTo()（理论）

> ID：10833635
> 
> 赞同：3
> 
> 时间：2012-05-31T12:29:34.833
> 
> 标签：java, collections, equals, comparator, comparable

我不明白 Javadoc：

```
The natural ordering for a class C is said to be consistent with equals if and only if
  (e1.compareTo((Object)e2) == 0) has the same boolean value as e1.equals((Object)e2) for
  every e1 and e2 of class C. 
```

为什么应该这样？

我知道 e1.equals(e2)=true 应该总是暗示 e1.compareTo(e2)==0，但我不明白为什么相反的情况应该是正确的。比较不是平等！2 个相等的对象应该与零进行比较，但如果排序标准与它们的情况不相关，则 2 个不同的对象应该能够比较为 0。我的意思是，使不同的对象相等是不正确的，但是具有 0 比较的不同对象为什么不呢？

**编辑：后来它说强烈推荐一致性，对于一些兼容性问题，因此问题**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:32:27.970

Javadoc 并不是说​​进行与等于不一致的比较是*错误的。*它只是定义与等于一致的比较的术语。

*当您做出选择*时，通常最好进行与 equals 一致的比较，例如给定 A 和 B，A 小于、等于或大于 B - 但它不必*以*这种方式工作。

不过，记录这一点*很*重要 - 调用者可能会对意外与 equals 不一致的排序感到非常困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:32:43.200

他们只是在谈论自然排序。您可能需要不同类型的订单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:33:14.983

java doc 讨论了自然排序。您可以随意比较它们。但如果它是关于自然排序，那么你不认为它必须是双向的吗？

即使在每天 50 个月之后也不会到达我们可以看到整数的自然顺序被颠倒的地方；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:36:37.623

例如，考虑[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)类，在此类中，方法[equals](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#equals%28java.lang.Object%29)和[compareTo](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)彼此不一致：

等于文档说：

> 公共布尔等于（对象 x）
> 
> 将此 BigDecimal 与指定的 Object 进行比较是否相等。与*compareTo*不同，此方法仅当两个 BigDecimal 对象的值和比例相等时才认为它们相等（因此，通过此方法进行比较时，2.0 不等于 2.00）。

# ios - 如何等到位置管理器获取高精度数据

> ID：10833647
> 
> 赞同：5
> 
> 时间：2012-05-31T12:30:18.257
> 
> 标签：ios, cllocationmanager

我有这段代码要等待一段时间才能获得高精度数据：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

  if((newLocation.horizontalAccuracy < 150 && newLocation.horizontalAccuracy > 0 /* valid */ && abs(howRecent) < 15.0 /*If it's a relatively recent event less than 15 seconds */))

} 
```

我的应用程序其他部分的问题我需要等待这个方法回来，所以我使用了：

```
[NSThread sleepForTimeInterval:5]; // wait 5 seconds 
```

这是一个好的做法，还是有更好的方法来等待另一个任务执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:02:24.777

Apple 已经提供了一个示例项目来演示这个确切的场景。该项目被调用`LocateMe`，[可以在这里找到](http://developer.apple.com/library/ios/#samplecode/LocateMe/Introduction/Intro.html)。

您可以在 中找到相关方法`GetLocationViewController.m`。

简而言之，其背后的逻辑是丢弃任何缓存值并累积位置读数，直到`horizontalAccuracy`满足`desiredAccuracy`要求。我希望这会让你走上正轨。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-19T10:57:09.017

```
#import "LocationTracker.h"

#define LATITUDE @"latitude"
#define LONGITUDE @"longitude"
#define ACCURACY @"theAccuracy"

#define IS_OS_8_OR_LATER ([[[UIDevice currentDevice] systemVersion] floatValue] >= 8.0)

@implementation LocationTracker
AppDelegate *objApp;

+ (CLLocationManager *)sharedLocationManager {
    static CLLocationManager *_locationManager;

    @synchronized(self) {
        if (_locationManager == nil) {
            _locationManager = [[CLLocationManager alloc] init];
            _locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
        }
    }
    return _locationManager;
}

- (id)init {
    if (self==[super init]) {
        //Get the share model and also initialize myLocationArray
        self.shareModel = [LocationShareModel sharedModel];
        self.shareModel.myLocationArray = [[NSMutableArray alloc]init];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationEnterBackground) name:UIApplicationDidEnterBackgroundNotification object:nil];
        objApp = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    }
    return self;

}

-(void)applicationEnterBackground{
    CLLocationManager *locationManager = [LocationTracker sharedLocationManager];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    locationManager.distanceFilter = kCLDistanceFilterNone;

    if(IS_OS_8_OR_LATER) {
        [locationManager requestAlwaysAuthorization];
    }
    [locationManager startUpdatingLocation];

    //Use the BackgroundTaskManager to manage all the background Task
    self.shareModel.bgTask = [BackgroundTaskManager sharedBackgroundTaskManager];
    [self.shareModel.bgTask beginNewBackgroundTask];
}

- (void) restartLocationUpdates
{
    NSLog(@"restartLocationUpdates");

    if (self.shareModel.timer) {
        [self.shareModel.timer invalidate];
        self.shareModel.timer = nil;
    }

    CLLocationManager *locationManager = [LocationTracker sharedLocationManager];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
    locationManager.distanceFilter = kCLDistanceFilterNone;

    if(IS_OS_8_OR_LATER) {
        [locationManager requestAlwaysAuthorization];
    }
    [locationManager startUpdatingLocation];
}

- (void)startLocationTracking {
    NSLog(@"startLocationTracking");

    if ([CLLocationManager locationServicesEnabled] == NO) {
        NSLog(@"locationServicesEnabled false");
        UIAlertView *servicesDisabledAlert = [[UIAlertView alloc] initWithTitle:@"Location Services Disabled" message:@"You currently have all location services for this device disabled" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [servicesDisabledAlert show];
    } else {
        CLAuthorizationStatus authorizationStatus= [CLLocationManager authorizationStatus];

        if(authorizationStatus == kCLAuthorizationStatusDenied || authorizationStatus == kCLAuthorizationStatusRestricted){
            NSLog(@"authorizationStatus failed");
        } else {
            NSLog(@"authorizationStatus authorized");
            CLLocationManager *locationManager = [LocationTracker sharedLocationManager];
            locationManager.delegate = self;
            locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;
            locationManager.distanceFilter = kCLDistanceFilterNone;

            if(IS_OS_8_OR_LATER) {
              [locationManager requestAlwaysAuthorization];
            }
            [locationManager startUpdatingLocation];
        }
    }
}

- (void)stopLocationTracking {
    NSLog(@"stopLocationTracking");

    if (self.shareModel.timer) {
        [self.shareModel.timer invalidate];
        self.shareModel.timer = nil;
    }

    CLLocationManager *locationManager = [LocationTracker sharedLocationManager];
    [locationManager stopUpdatingLocation];
}

#pragma mark - CLLocationManagerDelegate Methods

-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{

    NSLog(@"locationManager didUpdateLocations");

    for(int i=0;i<locations.count;i++){
        CLLocation * newLocation = [locations objectAtIndex:i];
        CLLocationCoordinate2D theLocation = newLocation.coordinate;
        CLLocationAccuracy theAccuracy = newLocation.horizontalAccuracy;

        NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow];

        if (locationAge > 30.0)
        {
            continue;
        }

        //Select only valid location and also location with good accuracy
        if(newLocation!=nil&&theAccuracy>0
           &&theAccuracy<2000
           &&(!(theLocation.latitude==0.0&&theLocation.longitude==0.0))){

            self.myLastLocation = theLocation;
            self.myLastLocationAccuracy= theAccuracy;

            NSMutableDictionary * dict = [[NSMutableDictionary alloc]init];
            [dict setObject:[NSNumber numberWithFloat:theLocation.latitude] forKey:@"latitude"];
            [dict setObject:[NSNumber numberWithFloat:theLocation.longitude] forKey:@"longitude"];
            [dict setObject:[NSNumber numberWithFloat:theAccuracy] forKey:@"theAccuracy"];

            //Add the vallid location with good accuracy into an array
            //Every 1 minute, I will select the best location based on accuracy and send to server
            [self.shareModel.myLocationArray addObject:dict];
        }
    }

    //If the timer still valid, return it (Will not run the code below)
    if (self.shareModel.timer) {
        return;
    }

    self.shareModel.bgTask = [BackgroundTaskManager sharedBackgroundTaskManager];
    [self.shareModel.bgTask beginNewBackgroundTask];

    //Restart the locationMaanger after 1 minute
    self.shareModel.timer = [NSTimer scheduledTimerWithTimeInterval:30 target:self
                                                           selector:@selector(restartLocationUpdates)
                                                           userInfo:nil
                                                            repeats:NO];

    //Will only stop the locationManager after 10 seconds, so that we can get some accurate locations
    //The location manager will only operate for 10 seconds to save battery
    if (self.shareModel.delay10Seconds) {
        [self.shareModel.delay10Seconds invalidate];
        self.shareModel.delay10Seconds = nil;
    }

    self.shareModel.delay10Seconds = [NSTimer scheduledTimerWithTimeInterval:10 target:self
                                                    selector:@selector(stopLocationDelayBy10Seconds)
                                                    userInfo:nil
                                                     repeats:NO];

}

//Stop the locationManager
-(void)stopLocationDelayBy10Seconds{
    CLLocationManager *locationManager = [LocationTracker sharedLocationManager];
    [locationManager stopUpdatingLocation];

    NSLog(@"locationManager stop Updating after 10 seconds");
}

- (void)locationManager: (CLLocationManager *)manager didFailWithError: (NSError *)error
{
   // NSLog(@"locationManager error:%@",error);

    switch([error code])
    {
        case kCLErrorNetwork: // general, network-related error
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Network Error" message:@"Please check your network connection." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
        case kCLErrorDenied:{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Enable Location Service" message:@"You have to enable the Location Service to use this App. To enable, please go to Settings->Privacy->Location Services" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
            break;
        default:
        {

        }
            break;
    }
}

//Send the location to Server
- (void)updateLocationToServer {

    NSLog(@"updateLocationToServer");

    // Find the best location from the array based on accuracy
    NSMutableDictionary * myBestLocation = [[NSMutableDictionary alloc]init];

    for(int i=0;i<self.shareModel.myLocationArray.count;i++){
        NSMutableDictionary * currentLocation = [self.shareModel.myLocationArray objectAtIndex:i];

        if(i==0)
            myBestLocation = currentLocation;
        else{
            if([[currentLocation objectForKey:ACCURACY]floatValue]<=[[myBestLocation objectForKey:ACCURACY]floatValue]){
                myBestLocation = currentLocation;
            }
        }
    }
    NSLog(@"My Best location:%@",myBestLocation);

    //If the array is 0, get the last location
    //Sometimes due to network issue or unknown reason, you could not get the location during that  period, the best you can do is sending the last known location to the server
    if(self.shareModel.myLocationArray.count==0)
    {
        NSLog(@"Unable to get location, use the last known location");

        self.myLocation=self.myLastLocation;
        self.myLocationAccuracy=self.myLastLocationAccuracy;

    }else{
        CLLocationCoordinate2D theBestLocation;
        theBestLocation.latitude =[[myBestLocation objectForKey:LATITUDE]floatValue];
        theBestLocation.longitude =[[myBestLocation objectForKey:LONGITUDE]floatValue];
        self.myLocation=theBestLocation;
        self.myLocationAccuracy =[[myBestLocation objectForKey:ACCURACY]floatValue];
    }

    NSLog(@"Send to Server: Latitude(%f) Longitude(%f) Accuracy(%f)",self.myLocation.latitude, self.myLocation.longitude,self.myLocationAccuracy);

    //TODO: Your code to send the self.myLocation and self.myLocationAccuracy to your server

    //After sending the location to the server successful, remember to clear the current array with the following code. It is to make sure that you clear up old location in the array and add the new locations from locationManager
    [self.shareModel.myLocationArray removeAllObjects];
    self.shareModel.myLocationArray = nil;
    self.shareModel.myLocationArray = [[NSMutableArray alloc]init];
}

@end 
```

# javascript - 仅在离开站点时发生的 javascript 事件

> ID：10833650
> 
> 赞同：0
> 
> 时间：2012-05-31T12:30:32.000
> 
> 标签：javascript, onunload

我正在创建自己的简单统计数据来记录阅读了哪些页面以及阅读了多长时间等。

然后我使用ajax调用将信息记录在数据库中，它使用window.ONBEFOREUNLOAD事件工作，但是这会为访问的每个页面创建一个数据库记录，而是我想将页面统计信息保存到js变量然后只做1当访问者最终离开站点时调用 ajax。

有没有一种方法可以使用纯 javascript 创建事件侦听器来检测用户何时离开网站，也许是通过评估身体的点击事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:35:49.483

**不。**

默认情况下浏览器不可能提供这样的事件：浏览器本身不知道包含整个站点的内容，因此浏览器不可能知道用户何时离开站点。

用 JavaScript 自己实现解决方案很容易。实施容易，解决难。

您需要考虑如何判断用户何时离开您的网站。你如何定义退出点？你能定义退出点吗？这是一个不平凡的问题。我不确定是否存在解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:43:49.163

**方法一：** 尝试`onbeforeunload`事件：在页面卸载前触发

它还允许您询问用户是否真的想离开。

看[这个演示](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)

或者，您可以在他离开时发送 ajax 请求。

**方法二：**

```
`if(window.screenTop > 10000)
alert("窗口关闭");
别的
警报（“窗口仍然打开”）；`
```

**方法3：** 见这篇文章。您正在寻找的功能是[onbeforeunload](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)

示例代码：

```
 <script language="JavaScript">
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    return "You have attempted to leave this page.  If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?";
  }
</script> 
```

> 此答案中的所有信息都可以在 StackOverflow.com 上找到

# java - Vaadin 布局 - 如何让面板扩展以填充大部分屏幕

> ID：10833652
> 
> 赞同：1
> 
> 时间：2012-05-31T12:30:33.160
> 
> 标签：java, layout, vaadin

请注意，我为此使用 Vaadin。

我正在努力让中间面板扩展以分别在顶部和底部用页眉和页脚填充大部分屏幕。这是我的代码：

```
public class GridpocApplication extends Application {

@Override
public void init() {
    System.out.println("starting now.");

    final Window mainWindow = new Window("My Application");
    setMainWindow(mainWindow);

    mainWindow.getContent().setSizeFull();

    VerticalLayout mainColumn = new VerticalLayout();
    //Header
    Label top = new Label("HEADER");
    mainColumn.addComponent(top);

    //The middle bit
    final Panel middlePanel = new Panel();
    middlePanel.setSizeFull();
    middlePanel.getContent().setSizeUndefined();
    middlePanel.setScrollable(true);
    mainColumn.addComponent(middlePanel);
    mainColumn.setExpandRatio(middlePanel, 1.0f);

    //footer
    Label bottom = new Label("FOOTER");
    mainColumn.addComponent(bottom);
    mainWindow.addComponent(mainColumn);

    //test
    Label test= new Label("This area should fill most of the screen.");
    middlePanel.addComponent(test);
}
} 
```

我哪里错了？我看到的是这样的：

![有效的 XHTML](../Images/189a24e59be26bb2e1c2b0f51486aea7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:50:24.200

尝试制作`mainColumn.setSizeFull()`和`mainWindow.setContent(mainColumn)`

# ruby-on-rails - Rails 视图和控制器，（if/else 语句）

> ID：10833655
> 
> 赞同：0
> 
> 时间：2012-05-31T12:30:36.343
> 
> 标签：ruby-on-rails, ruby, view-helpers, statements

我刚刚从头开始我自己的 Rails 项目。如果分钟变量设置为某个值，我正在尝试视图显示你好。

[代码](https://gist.github.com/2842923)现在在控制器中，我希望它在视图中显示输出。这可能吗？还是我把它写在视图中？不确定做对了。

**home_controller.rb**

```
class HomeController < ApplicationController
  def index
    @minutes = 23
    @minutes = params[:minutes]
  end
end 
```

**index.html.erb**

```
<% if @minutes == 23 %>
  <%= "helllo" %>
<% else %>
  Anonymous
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:46:45.633

```
@minutes = params[:minutes] || 23 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:47:52.887

在这种简单的情况下，在视图中添加一些逻辑就足够了，但通常最好添加辅助方法（阅读[入门](http://guides.rubyonrails.org/getting_started.html#view-helpers)指南是个好主意）。

可能您已经看过 app/helpers 目录，在这些帮助文件中，您可以定义视图层中可用的方法，与视图层相关的方法，但会做一些奇怪或脏的东西放在模板文件中。

例如，在您的情况下，您可能有`/app/helpers/time_helper.rb`：

```
module TimeHelper
  # I know the method name sucks a little
  def show_hello_if_minutes_is_23(minutes = @minutes)
    if minutes==23
      "Hello"
    else
      "Anonymous"
    end
  end
end 
```

然后在您的`index.html.erb`模板中使用：

```
<%= show_hello_if_minutes_is_23 %> 
```

如你看到的：

1.  您可以阅读方法名称并了解它的作用（高级）
2.  逻辑被放入 ruby​​ 方法中
3.  该方法接受一个`minutes`参数，但它是可选的

请记住：通常重复是邪恶的（干燥的东西），但**在视野中，有时一次太多了**（但在这个简单的情况下不是）。

**更新**：我刚刚看到您将`@minutes`变量设置为 23，然后您将其覆盖，从而使先前的分配无用。我不知道您要在控制器中做什么，但如果您的问题是关于为分钟变量设置默认值，请使用[Yuri 的答案](https://stackoverflow.com/a/10833920/455642)并使用`||=`operator: `@minutes ||= params[:minutes]`。

# ios5 - ABPersonViewController 不在地图上定位地址

> ID：10833658
> 
> 赞同：1
> 
> 时间：2012-05-31T12:30:44.820
> 
> 标签：ios5, geocoding, abpersonviewcontroller, addressbookui

关于为什么展示 ABPersonViewController 及其代表的任何想法不会在地图上找到所选人员的地址？

目前，该应用程序只是退出到地图并保持在那里缩小。

ABPersonViewController 委托的代码只对对联系人执行的任何操作返回“是”，如果我手动复制此人的地址并将其粘贴到地图应用程序中，则可以找到给定地址而没有任何问题。

有什么我想念的吗？

谢谢！

# android - findFragmentById 总是返回 null

> ID：10833666
> 
> 赞同：59
> 
> 时间：2012-05-31T12:31:08.067
> 
> 标签：android, android-fragments

我在 xml 布局中为我的片段定义了一个 ID：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/test_fragment"
... 
```

然后我在活动的 onCreate 方法中添加这个片段：

```
MyFragment myFragment = new MyFragment();
fragmentTransaction.add(R.id.fragment_container, myFragment);
fragmentTransaction.commit(); 
```

这一切都很好。更换碎片，也正在工作。

稍后，我尝试在活动的一种方法中通过其 ID 检索此片段：

```
MyFragment myFragment = (MyFragment) getFragmentManager().findFragmentById(R.id.test_fragment); 
```

这样做会导致 myFragment 成为`null`. 总是。

当我尝试对标签而不是 ID 执行相同操作时，我可以通过其标签检索片段而不会出现任何问题：

```
MyFragment myFragment = new MyFragment();
fragmentTransaction.add(R.id.fragment_container, myFragment, "testfragment");
fragmentTransaction.commit(); 
```

...

```
MyFragment myFragment = (MyFragment) getFragmentManager().findFragmentByTag("testfragment"); 
```

为什么 findFragmentById 找不到片段，而 findFragmentByTag 却找到了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-31T12:37:21.717

`R.id.test_fragment`不是您的片段的 ID，而是您的 LinearLayout 的 ID

调用`add(int containerViewId, Fragment fragment)`将添加一个没有标签的片段。因此，或者您使用`add(int containerViewId, Fragment fragment, String tag)`并使用您的标签（作为 ID）取回您的片段

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-20T07:26:46.923

将`<FrameLayout>`标签用作布局文件中的容器。稍后要动态替换活动中的片段，您可以使用`<FrameLayout>`容器的 ID 替换活动中的片段。

```
<FrameLayout
            android:id="@+id/test_fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T12:32:11.043

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/test_fragment" 
```

它应该是一个`fragment`而不是一个`LinearLayout`

```
<fragment android:name="com.example.yourfragment"
            android:id="@+id/test_fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-12T23:13:42.960

我在调用实际搜索子类`android.support.v4.app.Fragment`时在布局中使用了. 所以解决方法是打电话。`getFragmentManager()``android.app.Fragment``null``getSupportFragmentManager()`

通常，请确保您正在子类化并在布局中使用的片段包与`FragmentManager`执行搜索的相应片段返回的包相同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T12:34:16.300

`R.id.test_fragment`是你的`LinearLayout`ID 不是你的 Fragment。

当片段从 xml 膨胀时，您可以在片段上定义和标识，如本示例[http://developer.android.com/guide/topics/fundamentals/fragments.html#Adding](http://developer.android.com/guide/topics/fundamentals/fragments.html#Adding)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-14T03:14:04.207

或者，您应该改用：

```
(MyFragment) getFragmentManager().findFragmentById(R.id.fragment_container); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-12T04:26:46.523

上面提到的原因是有效的，但另一个可能的原因是您试图在片段中搜索片段，这也会导致`fragmentManager.findFragmentById`返回 null。我们应该使用`childFragmentManager.findFragmentById`在片段中查找片段。根据官方文档。

`public final androidx.fragment.app.FragmentManager getChildFragmentManager()`

> 返回一个私有的 FragmentManager 用于在这个 Fragment 中放置和管理 Fragment。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-31T06:53:19.723

```
FragmentB fragmentB = 
(FragmentB) getSupportFragmentManager().findFragmentById(R.id.containerb);

if(fragmentB != null)
{
   fragmentB.showuserResponse(msg);
} 
```

使用容器 ID 作为片段 ID。然后检查空引用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-22T12:19:17.817

> fragmentTransaction.add(R.id.fragment_container, myFragment);
> 
> MyFragment myFragment = (MyFragment) getFragmentManager().findFragmentById(R.id.test_fragment);

请注意区别。

您应该将 R.id.fragment_container 作为参数传递给`findFragmentById`，因为您将它传递给 add 函数，而不是`R.id.test_fragment`

顺便说一下，根据这两个函数的内部实现，id可以是它的容器视图的id应该是对的。

# buildroot - 使用主机工具链构建根环境

> ID：10833672
> 
> 赞同：2
> 
> 时间：2012-05-31T12:31:40.550
> 
> 标签：buildroot

对于运行测试用例等。我想为主机系统（/usr/bin/gcc 等）编译我们的 buildroot 环境的一部分。

我尝试在 /usr 中指定 external_toolchain 但这失败了。有没有人设法做这样的事情？

buildroot 手册说这是不受支持的，因为他们无法将其导入 rootfs。但是对于测试用例，rootfs 不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:38:21.340

是的，不幸的是，这是不可能的。要对 Buildroot 有用，工具链必须是“纯”工具链，即仅包含 C 库二进制文件和头文件。您的 /usr 被来自您的主机的大量库弄乱了，并且由于 Buildroot 制作了工具链 sysroot 的完整副本（在您的情况下，它将是 /usr），它会复制很多很多东西。

因此，毫无疑问，这不是我们支持的东西，我们也不打算支持它。您还可以决定使用 x86 或 x86_64 交叉编译器构建您的程序，让 Buildroot 生成一个最小的 Linux 系统，然后直接在您的开发 PC 上 chroot 进入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T09:51:34.823

当前的文档似乎也解释了这是不可能的[https://github.com/buildroot/buildroot/blob/2018.08/docs/manual/configure.txt#L198](https://github.com/buildroot/buildroot/blob/2018.08/docs/manual/configure.txt#L198)

> 我们也不支持使用分发工具链（即您的分发安装的 gcc/binutils/C 库）作为工具链来为目标构建软件。这是因为您的分发工具链不是“纯”工具链（即仅与 C/C++ 库一起使用），因此我们无法将其正确导入 Buildroot 构建环境。因此，即使您正在为 x86 或 x86_64 目标构建系统，您也必须使用 Buildroot 或 crosstool-NG 生成交叉编译工具链。

此外，当前的 Buildroot 似乎会检查您的工具链路径是否似乎是全局工具链，如果它是[https://github.com/buildroot/buildroot/blob/2018.08/toolchain/helpers.mk#L395 ，则会自动退出](https://github.com/buildroot/buildroot/blob/2018.08/toolchain/helpers.mk#L395)

```
with_sysroot=`$${__CROSS_CC} -v 2>&1 |sed -r -e '/.* --with-sysroot=([^[:space:]]+)[[:space:]].*/!d; s//\1/'`; \
if test "$${with_sysroot}"  = "/" ; then \
    echo "Distribution toolchains are unsuitable for use by Buildroot," ; \
    echo "as they were configured in a way that makes them non-relocatable,"; \
    echo "and contain a lot of pre-built libraries that would conflict with"; \
    echo "the ones Buildroot wants to build."; \
    exit 1; \
fi; \ 
```

# git - git push and pull 命令中的“上游”是什么

> ID：10833675
> 
> 赞同：0
> 
> 时间：2012-05-31T12:31:49.513
> 
> 标签：git, svn, repository

我正在使用 github 存储库，但在`origin`&`upstream`中有点混乱

告诉我如果我在 BRANCH_B 工作，那么是否需要添加`origin`关键字来拉取或推送？

```
$ git pull upstream master 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:40:50.870

`origin`并且`upstream`是遥控器的名称。

您可以使用 来创建和列出它们`git remote`。

`origin`是您创建时创建的默认遥控器`git clone`，它是您在大多数命令中省略显式遥控器时使用的遥控器。

我想`upstream`这只是作为示例创建的另一个远程名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:34:22.893

据我所知，它们只是遥控器的常用名称。`origin`是你的“主要”遥控器，`upstream`是原始仓库的遥控器（假设你的是一个叉子）。

# php - 在表中沿链向下移动值

> ID：10833677
> 
> 赞同：6
> 
> 时间：2012-05-31T12:32:00.450
> 
> 标签：php, mysql

假设我从 mysql 数据库表中获得以下结果集：

```
+----+------+-------+
| ID | type | value |
+----+------+-------+
|  8 |    A |  1435 |
|  9 |    B |  7348 | 
| 10 |    A |  1347 | 
| 11 |    A |  3478 | 
| 12 |    A |  4589 | 
| 13 |    B |  6789 |
+----+------+-------+ 
```

我想删除行 ID 8 并将字段“值”中的值向下推，这样每一行都具有前一个条目的值，但仅影响字段“类型”与行相同的那些被删除（在这种情况下为“A”）。

也就是说，删除行 id 8 最终应该会产生以下结果：

```
+----+------+-------+
| ID | type | value |
+----+------+-------+
|  - |    - |    -  | *
|  9 |    B |  7348 |   |
| 10 |    A |  1435 | * |
| 11 |    A |  1347 | * |
| 12 |    A |  3478 | * |
| 13 |    B |  6789 |   V
+----+------+-------+ 
```

ID 10 继承了 ID 8 的值，然后 ID 11 继承了 ID 10，依此类推。但是请注意，类型为“B”的行不受影响。

所以问题是：有什么方法可以执行这种值的“移位”，而不必逐行查询和更新每一行？在一个理想的世界里，我会做一个查询来做移位，然后另一个来删除行，但我不太确定这是否可能。

（我也不想使用触发器，因为我打算将所有应用程序逻辑封装在应用程序本身中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:37:25.740

```
SET @remove_id = 8;

SELECT ID, type, value FROM (
  SELECT   ID,
           type,
           CAST(IF(type <> @type OR ISNULL(@val), value, @val) AS UNSIGNED)
             AS value,
           @type := IF(ID   = @remove_id, type, @type),
           @val  := IF(type = @type, value, @val)
  FROM     my_table JOIN (SELECT @type := NULL, @val := NULL) AS z
  ORDER BY ID ASC
) AS t
WHERE ID <> @remove_id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/8c99d/1)上查看。

* * *

**更新**

我没有意识到您实际上想要更新基础表。为此，您可以使用一些轻微的hackery在`UPDATE`语句中有效地执行相同的操作（不能直接分配给用户变量，因此而是将其新值的串联和从第一个形成的空字符串分配给列新分配的用户变量的 0 个字符）：

```
SET @remove_id = 8, @type = NULL, @val = NULL;

UPDATE my_table SET
  value = IF(
    type <> @type OR ISNULL(@val),
    value,
    CONCAT(@val, LEFT(@val := value, 0))
  ),
  type = CONCAT(type, LEFT(
    @type := IF(
      ID <> @remove_id,
      @type,
      CONCAT(type, LEFT(@val := value, 0))
    )
  , 0))
ORDER BY ID ASC;

DELETE FROM my_table WHERE ID = @remove_id; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ef26e/1)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:49:35.553

使用窗口/分析函数可以很容易地完成此任务。由于 MySQL 没有这样的功能，因此可以通过以下限制来模拟它们：

*   你应该有一个唯一的字段来排序。

我已用于`id`此目的。

以下查询将枚举表中的每一行，`type`用作分区指示器：

```
SELECT t.id, t.type, t.value,
  (SELECT count(*) FROM testbed WHERE type = t.type AND id <= t.id) AS rownum
  FROM testbed t
 ORDER BY t.type, t.id; 
```

我添加`ORDER BY`只是为了可见性，在最终查询中不需要。

下一个查询允许您连接 2 个结果，并有办法以所需的方式“转移值”：

```
SELECT c.id AS c_id, c.type AS c_type, c.value AS c_value,
       p.id AS p_id, p.type AS p_type, p.value AS p_value
  FROM (SELECT t.id, t.type, t.value,
               (SELECT count(*) FROM testbed
                 WHERE type = t.type AND id <= t.id) AS rownum
          FROM testbed t) AS c
  LEFT JOIN (SELECT t.id, t.type, t.value,
                    (SELECT count(*) FROM testbed
                      WHERE type = t.type AND id <= t.id) AS rownum
               FROM testbed t) AS p
         ON c.type = p.type AND c.rownum = p.rownum + 1
 ORDER BY c.type, c.id; 
```

最后，您的任务通过以下 2 个查询完成，`UPDATE`并且`DELETE`：

```
UPDATE testbed AS t
JOIN (
  SELECT c.id AS c_id, c.type AS c_type, c.value AS c_value,
         p.id AS p_id, p.type AS p_type, p.value AS p_value
    FROM (SELECT t.id, t.type, t.value,
                 (SELECT count(*) FROM testbed
                   WHERE type = t.type AND id <= t.id) AS rownum
            FROM testbed t) AS c
    LEFT JOIN (SELECT t.id, t.type, t.value,
                      (SELECT count(*) FROM testbed
                        WHERE type = t.type AND id <= t.id) AS rownum
                 FROM testbed t) AS p
           ON c.type = p.type AND c.rownum = p.rownum + 1
  ) AS s
  ON t.id = s.c_id
  SET t.value = s.p_value
 WHERE t.value = 'A'; -- you can use more complex predicate(s) here

DELETE FROM testbed WHERE id = 8; -- make sure both predicate(s) match 
```

[您可以在SQL Fiddle](http://www.sqlfiddle.com/#!2/bf375/9)上检查此查询（不是更新）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:06:01.563

我建议您使用 InnoDB 表，这样您就可以在单个事务中运行 2 个查询。我会这样做：

```
Step 1: Start a transaction on the table
Step 2: Get the record that is to be deleted (e.g. ID #8)
Step 3: Issue a query DELETE FROM tablename WHERE `ID`=$record_id
Step 4: Issue a query UPDATE tablename SET `value`='former_value' WHERE `type`='former_type' LIMIT 1
Step 5: if all operations were successful, commit the transaction else rollback
Step 6: End the transaction 
```

希望这可以帮助

# c++ - 提升函数签名

> ID：10833681
> 
> 赞同：1
> 
> 时间：2012-05-31T12:32:16.377
> 
> 标签：c++, function, boost, signature

有人可以告诉我使用 boost 的正态分布的这段代码发生了什么吗？

```
boost::mt19937 rng; // A random number generator
boost::normal_distribution<> nd(3.0, 1.0); // mean 3, sigma 1
// Attach the distribution to the random number generator to get a function
// that returns normally distributed variables.
boost::variate_generator<boost::mt19937&,boost::normal_distribution<> > var_nor(rng, nd);
// Use it. But why is function signature different?
double x = var_nor(); 
```

我对 var_nor 及其两个函数签名发生的事情感到困惑。谢谢皮特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:36:29.443

`var_nor`不是函数，是对象。

第一行创建它（将 rng 和分布作为参数传递给构造函数）。
第二行调用它的`operator()`成员。

# c# - 下载时如何调整图像大小？

> ID：10833684
> 
> 赞同：3
> 
> 时间：2012-05-31T12:32:25.600
> 
> 标签：c#, asp.net, image, resize, download

我想在下载图像时或下载后调整图像大小。这是我的代码。质量并不重要。

```
public void downloadPicture(string fileName, string url,string path) {
        string fullPath = string.Empty;
        fullPath = path + @"\" + fileName + ".jpg"; //imagePath
        byte[] content;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        WebResponse response = request.GetResponse();

        Stream stream = response.GetResponseStream();

        using (BinaryReader br = new BinaryReader(stream)) {
            content = br.ReadBytes(500000);
            br.Close();
        }
        response.Close();

        FileStream fs = new FileStream(fullPath, FileMode.Create); // Starting create
        BinaryWriter bw = new BinaryWriter(fs);
        try {
            bw.Write(content); // Created
        }
        finally {
            fs.Close();
            bw.Close();
        }
    } 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:35:23.647

图像调整大小在表面上看起来很简单，但一旦开始工作就会涉及许多复杂性。我建议不要自己做，而是使用像样的图书馆。

您可以使用[Image Resizer](http://www.hanselman.com/blog/NuGetPackageOfWeek11ImageResizerEnablesCleanClearImageResizingInASPNET.aspx)，它是一个非常简单、开源和免费的库。

您可以使用 Nuget 安装它或[下载](http://downloads.imageresizing.net/Resizer3-1-5-full-Feb-22-2012.zip).

![使用 nuget 安装](../Images/ce83a651811977c802f976b35a57b3ee.png)

```
var settings = new ResizeSettings {
  MaxWidth = thumbnailSize,
  MaxHeight = thumbnailSize,
  Format = "jpg"
};

ImageBuilder.Current.Build(inStream, outStream, settings);
resized = outStream.ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T12:37:22.973

将此代码放在 try / finally 块之后 -

这会将图像调整为原始大小的 1/4。

```
 using (System.Drawing.Image original = System.Drawing.Image.FromFile(fullPath))
        {
            int newHeight = original.Height / 4;
            int newWidth = original.Width / 4;

            using (System.Drawing.Bitmap newPic = new System.Drawing.Bitmap(newWidth, newHeight))
            {
                using (System.Drawing.Graphics gr = System.Drawing.Graphics.FromImage(newPic))
                {
                    gr.DrawImage(original, 0, 0, (newWidth), (newHeight));
                    string newFilename = ""; /* Put new file path here */
                    newPic.Save(newFilename, System.Drawing.Imaging.ImageFormat.Jpeg);
                }
            }
        } 
```

您当然可以通过更改 newHeight 和 newWidth 变量将其更改为您想要的任何大小

**更新：**修改代码以使用 using() {} 而不是 dispose，如下面的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T10:42:33.477

几天前我问了同样的问题，我被引导到这个线程，但我自己的情况是我想调整 bitmapImage 的大小。我的意思是，您可以将下载的流转换为 bitmapImage 然后调整大小，如果您仅指定宽度或高度，则仍将保持纵横比，即

```
public static async void DownloadImagesAsync(BitmapImage list, String Url)
{
   try
   {
       HttpClient httpClient = new HttpClient();
       // Limit the max buffer size for the response so we don't get overwhelmed
       httpClient.MaxResponseContentBufferSize = 256000;
       httpClient.DefaultRequestHeaders.Add("user-agent", "Mozilla/5.0 (compatible; MSIE           10.0; Windows NT 6.2; WOW64; Trident/6.0)");
       HttpResponseMessage response = await httpClient.GetAsync(Url);
       response.EnsureSuccessStatusCode();
       byte[] str = await response.Content.ReadAsByteArrayAsync();
       InMemoryRandomAccessStream randomAccessStream = new InMemoryRandomAccessStream();
       DataWriter writer = new DataWriter(randomAccessStream.GetOutputStreamAt(0));
       writer.WriteBytes(str);
       await writer.StoreAsync();
       BitmapImage img = new BitmapImage();
       img.SetSource(randomAccessStream);
       //img.DecodePixelHeight = 92;
       img.DecodePixelWidth = 60; //specify only width, aspect ratio maintained
       list.ImageBitmap = img;                   
   }catch(Exception e){
      System.Diagnostics.Debug.WriteLine(ex.StackTrace);
   }
} 
```

从[源头](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelwidth.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:49:21.640

在我制作的应用程序中，有必要创建一个具有多个选项的函数。它很大，但它会调整图像大小，可以保持纵横比，并且可以切割边缘以仅返回图像的中心：

```
/// <summary>
    /// Resize image with an URL as source
    /// </summary>
    /// <param name="OriginalFileURL">Link to the image</param>
    /// <param name="heigth">new height</param>
    /// <param name="width">new width</param>
    /// <param name="keepAspectRatio">keep the aspect ratio</param>
    /// <param name="getCenter">return the center bit of the image</param>
    /// <returns>image with new dimentions</returns>
    public Image resizeImageFromURL(String OriginalFileURL, int heigth, int width, Boolean keepAspectRatio, Boolean getCenter)
    {
        int newheigth = heigth;
        WebResponse response = null;
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(OriginalFileURL);
            response = request.GetResponse();
        }
        catch
        {
            return (System.Drawing.Image) new Bitmap(1, 1);
        }
        Stream imageStream = response.GetResponseStream();

        System.Drawing.Image FullsizeImage = System.Drawing.Image.FromStream(imageStream);

        // Prevent using images internal thumbnail
        FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
        FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

        if (keepAspectRatio || getCenter)
        {
            int bmpY = 0;
            double resize = (double)FullsizeImage.Width / (double)width;//get the resize vector
            if (getCenter)
            {
                bmpY = (int)((FullsizeImage.Height - (heigth * resize)) / 2);// gives the Y value of the part that will be cut off, to show only the part in the center
                Rectangle section = new Rectangle(new System.Drawing.Point(0, bmpY), new System.Drawing.Size(FullsizeImage.Width, (int)(heigth * resize)));// create the section to cut of the original image
                Bitmap orImg = new Bitmap((Bitmap)FullsizeImage);//for the correct effect convert image to bitmap.
                FullsizeImage.Dispose();//clear the original image
                using (Bitmap tempImg = new Bitmap(section.Width, section.Height))
                {
                    Graphics cutImg = Graphics.FromImage(tempImg);//              set the file to save the new image to.
                    cutImg.DrawImage(orImg, 0, 0, section, GraphicsUnit.Pixel);// cut the image and save it to tempImg
                    FullsizeImage = tempImg;//save the tempImg as FullsizeImage for resizing later
                    orImg.Dispose();
                    cutImg.Dispose();
                    return FullsizeImage.GetThumbnailImage(width, heigth, null, IntPtr.Zero);
                }
            }
            else newheigth = (int)(FullsizeImage.Height / resize);//  set the new heigth of the current image
        }//return the image resized to the given heigth and width
        return FullsizeImage.GetThumbnailImage(width, newheigth, null, IntPtr.Zero);
    } 
```

为了更容易访问该函数，可以添加一些重载函数：

```
/// <summary>
    /// Resize image with an URL as source
    /// </summary>
    /// <param name="OriginalFileURL">Link to the image</param>
    /// <param name="heigth">new height</param>
    /// <param name="width">new width</param>
    /// <returns>image with new dimentions</returns>
    public Image resizeImageFromURL(String OriginalFileURL, int heigth, int width)
    {
        return resizeImageFromURL(OriginalFileURL, heigth, width, false, false);
    }

    /// <summary>
    /// Resize image with an URL as source
    /// </summary>
    /// <param name="OriginalFileURL">Link to the image</param>
    /// <param name="heigth">new height</param>
    /// <param name="width">new width</param>
    /// <param name="keepAspectRatio">keep the aspect ratio</param>
    /// <returns>image with new dimentions</returns>
    public Image resizeImageFromURL(String OriginalFileURL, int heigth, int width, Boolean keepAspectRatio)
    {
        return resizeImageFromURL(OriginalFileURL, heigth, width, keepAspectRatio, false);
    } 
```

现在是可选设置的最后两个布尔值。像这样调用函数：

```
System.Drawing.Image ResizedImage = resizeImageFromURL(LinkToPicture, 800, 400, true, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:41:06.730

您可以使用`Image.FromFile(String)`来获取`Image`对象，并且此站点[Image Resizing](http://kossovsky.net/index.php/2009/06/image-resizing/)具有扩展方法来实际调整图像大小。

# joomla - 保存时的 Joomla 代码清理会产生 javascript 无限循环错误？

> ID：10833685
> 
> 赞同：1
> 
> 时间：2012-05-31T12:32:25.667
> 
> 标签：joomla, tinymce

我的网站上有一些大型 joomla 内容。通过 tinyMCE 编辑器发布。保存时会出现无限循环错误。当我将保存时的参数代码清理更改为从不。该错误不会发生，但随后会在我的代码中插入不需要的内容。我怎样才能解决这个问题。有没有人遇到过类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:43:35.947

不要使用任何编辑器插入代码！在您的配置文件页面中切换到“无编辑器”选项以插入所需的代码。

# datetime - 如何在触发查询时将 varchar 转换为 where 子句中的日期时间格式？

> ID：10833687
> 
> 赞同：0
> 
> 时间：2012-05-31T12:32:28.417
> 
> 标签：datetime

我的查询是->

select * from table where creation_Date BETWEEN '"+fromDate+"' and '"+ToDate+"'"

*   creation_Date 列是 DateTime 格式，从日期和 Todate 是字符串格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:46:24.577

[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)似乎是您正在寻找的。

# jquery - 仅从 $(this) 中选择第一级元素

> ID：10833688
> 
> 赞同：1
> 
> 时间：2012-05-31T12:32:30.373
> 
> 标签：jquery

我想从 $(this) 选择器中选择第一级输入隐藏字段。试过：

```
$(this).find('> input[type="hidden"]') 
```

但似乎它什么也没选择。

HTML 看起来像：

```
<div id="pollo">
    <div>
        <input type="hidden" />
        <input type="hidden" />
            <div>
                <input type="hidden" />
            </div>
    </div>
    <input type="hidden" />
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:37:11.587

“第一级”元素被调用，因此，您可以使用以下方法`children`找到它们：`children()`

```
$(this).children('input[type=hidden]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:37:04.800

你的标签应该有一个ID，然后你就可以使用了。

```
var id = $(this).attr('id');

$('#' + id + ' > input[type="hidden"]')... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:38:21.977

嗯，奇怪。确保它`this`实际上是父元素。这是一个带有示例的[jsFiddle 。](http://jsfiddle.net/X5Mh9/)

## HTML

```
<div id="box-1">
    <input type="hidden" value="I'm in box 1" />
    <div id="box-2">
        <input type="hidden" value="I'm in box 2" />
    </div>
</div> 
```

## JavaScript

```
$(function()
{
    $('#box-1').find('> input[type="hidden"]').each(function()
    {
        alert($(this).val());
    });
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:41:50.847

在这种情况下，您应该在[**jQuery API之后放置如下：**](http://api.jquery.com/child-selector/)`this`

```
$('> input[type="hidden"]', this) 
```

[**现场演示**](http://jsfiddle.net/JCyEV/1)

# javascript - 提供跨站点内容 - JSONP、iframe 还是其他？

> ID：10833691
> 
> 赞同：4
> 
> 时间：2012-05-31T12:32:40.730
> 
> 标签：javascript, ajax, iframe, cross-domain, jsonp

我正在建立一个广告网络。这需要第三方网站，包括我的 javascript，然后用我的内容替换他们指定的 div。

我们需要动态确定哪些内容要投放到这些 div 中，因此这需要跨站点调用。AFAIK 实现这一目标的流行方法是 JSONP 和 iFrame。每种方法的优缺点是什么？特别是，我感兴趣的是：

*   浏览器兼容性
*   最终用户性能
*   广告效果跟踪
*   对第 3 方站点篡改（即伪造点击）的恢复能力
*   现有广告网络使用什么

如果还有其他技术也想了解一下。

编辑：在做了一些研究之后，另一个选项似乎是执行 302 重定向的图像标签，因此服务器可以动态选择图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:16:02.183

另一种选择是在 yiur 服务器上实现 CORS，但这仅适用于现代浏览器，因此可能不适合您。

# java - 在没有 3rd 方应用程序的情况下使用 Java 将 dwg 转换为 obj

> ID：10833695
> 
> 赞同：1
> 
> 时间：2012-05-31T12:32:44.083
> 
> 标签：java, dwg

有没有办法通过Java代码将AutoCAD文件DWG转换为OBJ？不使用第三方应用程序。

我需要导入 DWG 文件，将其转换为 OBJ，然后在 HTML5 Canvas 中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:16:09.943

我怀疑是否可以使用 java 来做到这一点，尤其是在没有第三方库的情况下。DWG 和 OBJ 都是二进制格式，没有内置库来解释这些格式。

我知道只有 1 个 java 开源库可以解析 AutoCAD dxf 文件[(Kabeja)](http://kabeja.sourceforge.net/)，但这意味着将 dwg 转换为 dxf 文件。

可能有商业图书馆可以做到这一点。

# java - 在android中发送没有用户交互的彩信

> ID：10833697
> 
> 赞同：1
> 
> 时间：2012-05-31T12:32:49.450
> 
> 标签：java, android, mms

```
 Intent intent = new Intent(Intent.ACTION_SENDTO);
 intent.putExtra("address", "12134567899");
 intent.putExtra("sms_body", "See attached picture");

 intent.putExtra(Intent.EXTRA_STREAM,
 Uri.parse("file:///sdcard/DCIM/Camera/2011-09-09 12.47.29.jpg"));
 intent.setType("image/png");

 intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

 startActivity(intent); 
```

我尝试这样的代码。如果 Intent start mms compose ui 即将到来，我该如何克服并自动发送

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:24:36.330

首先。祝你好运。由于 android sdk 不支持 MMS，因此您有 2 个选项：

1.  下载 android mms 应用程序并尝试了解那里发生了什么。

2.  按照这个链接： [http ://androidbridge.blogspot.com/2011/03/how-to-send-mms-programmatically-in.html](http://androidbridge.blogspot.com/2011/03/how-to-send-mms-programmatically-in.html)

我目前唯一发现的工作....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:05:15.653

此功能被设计为 Android 中的一项安全功能，请不要试图绕过它。它的存在是有原因的。

如果您绝对必须，您是否尝试过在有根设备上运行它？它允许更大的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T19:06:54.990

试试这个它对我有用。使用 Uri.fromFile 而不是 Uri.parse

```
File f=new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/DCIM/Camera/"+img_name);
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("", ""); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(f));
sendIntent.setType("image/png");  
startActivity(sendIntent); 
```

# ios - iOS - 带有数据源的 UITextField 子类：您何时/在何处调用数据源方法？

> ID：10833707
> 
> 赞同：1
> 
> 时间：2012-05-31T12:33:36.070
> 
> 标签：ios, uitableview, delegates, datasource

我将 UITextField 子类化以显示一些数据。我想使用相同的数据源——像 UITableView 这样的委托模式。

```
@interface MySubClass : UITextField <UITextFieldDelegate>
    @property (nonatomic, unsafe_unretained) id<MyDataSource> myDatasource;
    @property (nonatomic, unsafe_unretained) id<MyDelegate> myDelegate;

    -(void) loadStuff;
@end

@implementation MySubClass
-(id) initWithFrame:(CGRect)frame {
    ...
    self.delegate = self; // For the UITextField
    ...
}

-(void) layoutSubviews {
    [self doStuff];
}

-(void) loadStuff {
    Data * data = [self.myDatasource ...];
    NSString * string = // do stuff to the data for display
    self.text = string; //Calls layoutSubviews again, infinite loop.
}
@end 
```

我想过使用 layoutSubviews 从数据源中获取数据，并显示出来。问题是，将文本设置为我刚刚处理的数据，再次触发对 layoutSubviews 的调用。所以你有一个无限循环。

事实上，无论如何更改视图似乎都会触发对 layoutSubviews 的调用。

是否可以复制 UITableView 对其数据源所做的事情？

# algorithm - 动态规划：翻译多本书的最低价格

> ID：10833709
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:33:47.787
> 
> 标签：algorithm

我们有 N 本书 ( `N<=200`)。都必须由K人翻译（`K<=100`）。每个人都可以将 D 本书从索引 S 开始翻译到索引 S+D-1, 0<=D<=N。每个人翻译的第一本书每页支付 c_1 美元，第二本书每页支付 c_2...

```
c_i for the book i.
0<=c_i<10000 
```

这些书必须按照给出的顺序翻译。

输入：
第一行：2 个数字 N 和 K
第二行：N 个数字 - 每本书的页数 (<=10 000)
第三行：N 个数字 - c_1, c_2, ... c_N; c_i 是翻译过 i-1 本书的人翻译一本书的价格；

输出：
翻译所有书籍必须支付的最低价格。

示例：
输入：
6 3
50 100 60 5 6 30
1 2 3 4 5 6

输出：339
（第一个人翻译第一本书+50*1 第二个人翻译第二、第三、第四和第五本书：+100*1+60*2+5*3+6*4 第三个人翻译第最后一本书 +30*1 =339)
有人可以帮我做这个作业吗？我知道我必须使用动态编程来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:00:15.133

一些线索：制作一个函数 F(BookNumber, ManNumber, NumOfBooksHeHaveTranslated)。

从 F(1, 1, 0) 开始。很清楚

```
F(1, 1, 0) = Pages[1] * C[1] + Min(F(2, 1, 1), F(2, 2, 0)) 
```

即我们必须从中选择最佳变体 - 继续使用相同的翻译器，或使用下一个。为常见情况 F(B, M, N) 详细说明此函数，制作递归解决方案，检查小输入，将递归转换为 DP（算法书籍中描述了这些方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:56:14.000

您的算法需要做的实际选择是您在书籍序列中的哪个点从一位翻译者更改为下一位翻译者。这是问题的唯一决策点，其他一切都随之而来。您可以通过观察将其转换为递归/动态规划问题，例如，K 个翻译者翻译 N 本书的成本等于一个翻译者翻译 x 个第一本书的成本和剩余的 K - 1 个翻译者翻译 N - x 本书的成本；或者，相当于 n 位译者翻译 x 本书的成本和剩余的 K - n 位译者翻译 N - x 本书的成本。这是您可以在动态编程解决方案中使用的细分/递归步骤。

我希望没有人会发布实际代码来做到这一点；这是作业。

# python - Windows 资源管理器上下文菜单和使用 pywin32 的子菜单

> ID：10833710
> 
> 赞同：22
> 
> 时间：2012-05-31T12:33:48.613
> 
> 标签：python, contextmenu, pywin32, shell-extensions

我正在尝试使用带有图标和子菜单的python添加一些shell扩展，但我正在努力比pywin32中的演示更进一步。我似乎也无法通过搜索谷歌来想出任何东西。

我相信我需要注册一个 com 服务器才能根据右键单击的文件/文件夹的位置和文件类型等更改子菜单中的选项。

```
# A sample context menu handler.
# Adds a 'Hello from Python' menu entry to .py files.  When clicked, a
# simple message box is displayed.
#
# To demostrate:
# * Execute this script to register the context menu.
# * Open Windows Explorer, and browse to a directory with a .py file.
# * Right-Click on a .py file - locate and click on 'Hello from Python' on
#   the context menu.

import pythoncom
from win32com.shell import shell, shellcon
import win32gui
import win32con

class ShellExtension:
    _reg_progid_ = "Python.ShellExtension.ContextMenu"
    _reg_desc_ = "Python Sample Shell Extension (context menu)"
    _reg_clsid_ = "{CED0336C-C9EE-4a7f-8D7F-C660393C381F}"
    _com_interfaces_ = [shell.IID_IShellExtInit, shell.IID_IContextMenu]
    _public_methods_ = shellcon.IContextMenu_Methods + shellcon.IShellExtInit_Methods

    def Initialize(self, folder, dataobj, hkey):
        print "Init", folder, dataobj, hkey
        self.dataobj = dataobj

    def QueryContextMenu(self, hMenu, indexMenu, idCmdFirst, idCmdLast, uFlags):
        print "QCM", hMenu, indexMenu, idCmdFirst, idCmdLast, uFlags
        # Query the items clicked on
        format_etc = win32con.CF_HDROP, None, 1, -1, pythoncom.TYMED_HGLOBAL
        sm = self.dataobj.GetData(format_etc)
        num_files = shell.DragQueryFile(sm.data_handle, -1)
        if num_files>1:
            msg = "&Hello from Python (with %d files selected)" % num_files
        else:
            fname = shell.DragQueryFile(sm.data_handle, 0)
            msg = "&Hello from Python (with '%s' selected)" % fname
        idCmd = idCmdFirst
        items = ['First Python content menu item!']
        if (uFlags & 0x000F) == shellcon.CMF_NORMAL: # Check == here, since CMF_NORMAL=0
            print "CMF_NORMAL..."
            items.append(msg)
        elif uFlags & shellcon.CMF_VERBSONLY:
            print "CMF_VERBSONLY..."
            items.append(msg + " - shortcut")
        elif uFlags & shellcon.CMF_EXPLORE:
            print "CMF_EXPLORE..."
            items.append(msg + " - normal file, right-click in Explorer")
        elif uFlags & CMF_DEFAULTONLY:
            print "CMF_DEFAULTONLY...\r\n"
        else:
            print "** unknown flags", uFlags
        win32gui.InsertMenu(hMenu, indexMenu,
                            win32con.MF_SEPARATOR|win32con.MF_BYPOSITION,
                            0, None)
        indexMenu += 1
        for item in items:
            win32gui.InsertMenu(hMenu, indexMenu,
                                win32con.MF_STRING|win32con.MF_BYPOSITION,
                                idCmd, item)
            indexMenu += 1
            idCmd += 1

        win32gui.InsertMenu(hMenu, indexMenu,
                            win32con.MF_SEPARATOR|win32con.MF_BYPOSITION,
                            0, None)
        indexMenu += 1
        return idCmd-idCmdFirst # Must return number of menu items we added.

    def InvokeCommand(self, ci):
        mask, hwnd, verb, params, dir, nShow, hotkey, hicon = ci
        win32gui.MessageBox(hwnd, "Hello", "Wow", win32con.MB_OK)

    def GetCommandString(self, cmd, typ):
        # If GetCommandString returns the same string for all items then
        # the shell seems to ignore all but one.  This is even true in
        # Win7 etc where there is no status bar (and hence this string seems
        # ignored)
        return "Hello from Python (cmd=%d)!!" % (cmd,)

def DllRegisterServer():
    import _winreg
    folder_key = _winreg.CreateKey(_winreg.HKEY_CLASSES_ROOT,
    "Folder\\shellex")
    folder_subkey = _winreg.CreateKey(folder_key, "ContextMenuHandlers")
    folder_subkey2 = _winreg.CreateKey(folder_subkey, "PythonSample")
    _winreg.SetValueEx(folder_subkey2, None, 0, _winreg.REG_SZ,
    ShellExtension._reg_clsid_)

    file_key = _winreg.CreateKey(_winreg.HKEY_CLASSES_ROOT,
    "*\\shellex")
    file_subkey = _winreg.CreateKey(file_key, "ContextMenuHandlers")
    file_subkey2 = _winreg.CreateKey(file_subkey, "PythonSample")
    _winreg.SetValueEx(file_subkey2, None, 0, _winreg.REG_SZ,
    ShellExtension._reg_clsid_)

    print ShellExtension._reg_desc_, "registration complete."

def DllUnregisterServer():
    import _winreg
    try:
        folder_key = _winreg.DeleteKey(_winreg.HKEY_CLASSES_ROOT,

        "Folder\\shellex\\ContextMenuHandlers\\PythonSample")
        file_key = _winreg.DeleteKey(_winreg.HKEY_CLASSES_ROOT,

        "*\\shellex\\ContextMenuHandlers\\PythonSample ")
    except WindowsError, details:
        import errno
        if details.errno != errno.ENOENT:
            raise
    print ShellExtension._reg_desc_, "unregistration complete."

if __name__=='__main__':
    from win32com.server import register
    register.UseCommandLine(ShellExtension,
                   finalize_register = DllRegisterServer,
                   finalize_unregister = DllUnregisterServer) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-06T09:25:43.700

经过大量的反复试验和谷歌搜索，我发现了如何做到这一点。

下面的示例显示了一个带有子菜单和图标的菜单。

```
# A sample context menu handler.
# Adds a menu item with sub menu to all files and folders, different options inside specified folder. 
# When clicked a list of selected items is displayed.
#
# To demostrate:
# * Execute this script to register the context menu. `python context_menu.py --register`
# * Restart explorer.exe- in the task manager end process on explorer.exe. Then file > new task, then type explorer.exe
# * Open Windows Explorer, and browse to a file/directory.
# * Right-Click file/folder - locate and click on an option under 'Menu options'.

import os
import pythoncom
from win32com.shell import shell, shellcon
import win32gui
import win32con
import win32api

class ShellExtension:
    _reg_progid_ = "Python.ShellExtension.ContextMenu"
    _reg_desc_ = "Python Sample Shell Extension (context menu)"
    _reg_clsid_ = "{CED0336C-C9EE-4a7f-8D7F-C660393C381F}"
    _com_interfaces_ = [shell.IID_IShellExtInit, shell.IID_IContextMenu]
    _public_methods_ = shellcon.IContextMenu_Methods + shellcon.IShellExtInit_Methods

    def Initialize(self, folder, dataobj, hkey):
        print "Init", folder, dataobj, hkey
        win32gui.InitCommonControls()
        self.brand= "Menu options"
        self.folder= "C:\\Users\\Paul\\"
        self.dataobj = dataobj
        self.hicon= self.prep_menu_icon(r"C:\path\to\icon.ico")

    def QueryContextMenu(self, hMenu, indexMenu, idCmdFirst, idCmdLast, uFlags):
        print "QCM", hMenu, indexMenu, idCmdFirst, idCmdLast, uFlags

        # Query the items clicked on
        files= self.getFilesSelected()

        fname = files[0]
        idCmd = idCmdFirst

        isdir= os.path.isdir(fname)
        in_folder= all([f_path.startswith(self.folder) for f_path in files])

        win32gui.InsertMenu(hMenu, indexMenu,
            win32con.MF_SEPARATOR|win32con.MF_BYPOSITION,
            0, None)
        indexMenu += 1

        menu= win32gui.CreatePopupMenu()
        win32gui.InsertMenu(hMenu,indexMenu,win32con.MF_STRING|win32con.MF_BYPOSITION|win32con.MF_POPUP,menu,self.brand)
        win32gui.SetMenuItemBitmaps(hMenu,menu,0,self.hicon,self.hicon)
#        idCmd+=1
        indexMenu+=1

        if in_folder:
            if len(files) == 1:
                if isdir:
                    win32gui.InsertMenu(menu,0,win32con.MF_STRING,idCmd,"Item 1"); idCmd+=1
                else:
                    win32gui.InsertMenu(menu,0,win32con.MF_STRING,idCmd,"Item 2")
                    win32gui.SetMenuItemBitmaps(menu,idCmd,0,self.hicon,self.hicon)
                    idCmd+=1
        else:
            win32gui.InsertMenu(menu,0,win32con.MF_STRING,idCmd,"Item 3")
            win32gui.SetMenuItemBitmaps(menu,idCmd,0,self.hicon,self.hicon)
            idCmd+=1

        if idCmd > idCmdFirst:
            win32gui.InsertMenu(menu,1,win32con.MF_SEPARATOR,0,None)

        win32gui.InsertMenu(menu,2,win32con.MF_STRING,idCmd,"Item 4")
        win32gui.SetMenuItemBitmaps(menu,idCmd,0,self.hicon,self.hicon)
        idCmd+=1
        win32gui.InsertMenu(menu,3,win32con.MF_STRING,idCmd,"Item 5")
        win32gui.SetMenuItemBitmaps(menu,idCmd,0,self.hicon,self.hicon)
        idCmd+=1

        win32gui.InsertMenu(menu,4,win32con.MF_SEPARATOR,0,None)

        win32gui.InsertMenu(menu,5,win32con.MF_STRING|win32con.MF_DISABLED,idCmd,"Item 6")
        win32gui.SetMenuItemBitmaps(menu,idCmd,0,self.hicon,self.hicon)
        idCmd+=1

        win32gui.InsertMenu(hMenu, indexMenu,
                            win32con.MF_SEPARATOR|win32con.MF_BYPOSITION,
                            0, None)
        indexMenu += 1
        return idCmd-idCmdFirst # Must return number of menu items we added.

    def getFilesSelected(self):
        format_etc = win32con.CF_HDROP, None, 1, -1, pythoncom.TYMED_HGLOBAL
        sm = self.dataobj.GetData(format_etc)
        num_files = shell.DragQueryFile(sm.data_handle, -1)
        files= []
        for i in xrange(num_files):
            fpath= shell.DragQueryFile(sm.data_handle,i)
            files.append(fpath)
        return files

    def prep_menu_icon(self, icon): #Couldn't get this to work with pngs, only ico
        # First load the icon.
        ico_x = win32api.GetSystemMetrics(win32con.SM_CXSMICON)
        ico_y = win32api.GetSystemMetrics(win32con.SM_CYSMICON)
        hicon = win32gui.LoadImage(0, icon, win32con.IMAGE_ICON, ico_x, ico_y, win32con.LR_LOADFROMFILE)

        hdcBitmap = win32gui.CreateCompatibleDC(0)
        hdcScreen = win32gui.GetDC(0)
        hbm = win32gui.CreateCompatibleBitmap(hdcScreen, ico_x, ico_y)
        hbmOld = win32gui.SelectObject(hdcBitmap, hbm)
        # Fill the background.
        brush = win32gui.GetSysColorBrush(win32con.COLOR_MENU)
        win32gui.FillRect(hdcBitmap, (0, 0, 16, 16), brush)
        # unclear if brush needs to be feed.  Best clue I can find is:
        # "GetSysColorBrush returns a cached brush instead of allocating a new
        # one." - implies no DeleteObject
        # draw the icon
        win32gui.DrawIconEx(hdcBitmap, 0, 0, hicon, ico_x, ico_y, 0, 0, win32con.DI_NORMAL)
        win32gui.SelectObject(hdcBitmap, hbmOld)
        win32gui.DeleteDC(hdcBitmap)

        return hbm

    def InvokeCommand(self, ci):
        mask, hwnd, verb, params, dir, nShow, hotkey, hicon = ci
        win32gui.MessageBox(hwnd, str(self.getFilesSelected()), "Wow", win32con.MB_OK)

    def GetCommandString(self, cmd, typ):
        # If GetCommandString returns the same string for all items then
        # the shell seems to ignore all but one.  This is even true in
        # Win7 etc where there is no status bar (and hence this string seems
        # ignored)
        return "Hello from Python (cmd=%d)!!" % (cmd,)

def DllRegisterServer():
    import _winreg
    folder_key = _winreg.CreateKey(_winreg.HKEY_CLASSES_ROOT,
    "Folder\\shellex")
    folder_subkey = _winreg.CreateKey(folder_key, "ContextMenuHandlers")
    folder_subkey2 = _winreg.CreateKey(folder_subkey, "PythonSample")
    _winreg.SetValueEx(folder_subkey2, None, 0, _winreg.REG_SZ,
    ShellExtension._reg_clsid_)

    file_key = _winreg.CreateKey(_winreg.HKEY_CLASSES_ROOT,
    "*\\shellex")
    file_subkey = _winreg.CreateKey(file_key, "ContextMenuHandlers")
    file_subkey2 = _winreg.CreateKey(file_subkey, "PythonSample")
    _winreg.SetValueEx(file_subkey2, None, 0, _winreg.REG_SZ,
    ShellExtension._reg_clsid_)

    print ShellExtension._reg_desc_, "registration complete."

def DllUnregisterServer():
    import _winreg
    try:
        folder_key = _winreg.DeleteKey(_winreg.HKEY_CLASSES_ROOT,

        "Folder\\shellex\\ContextMenuHandlers\\PythonSample")
        file_key = _winreg.DeleteKey(_winreg.HKEY_CLASSES_ROOT,

        "*\\shellex\\ContextMenuHandlers\\PythonSample")
    except WindowsError, details:
        import errno
        if details.errno != errno.ENOENT:
            raise
    print ShellExtension._reg_desc_, "unregistration complete."

if __name__=='__main__':
    from win32com.server import register
    register.UseCommandLine(ShellExtension,
                   finalize_register = DllRegisterServer,
                   finalize_unregister = DllUnregisterServer) 
```

# javascript - 具有动态列但布局固定的表

> ID：10833711
> 
> 赞同：7
> 
> 时间：2012-05-31T12:33:49.733
> 
> 标签：javascript, jquery, html, css

如果页面可以包含任意数量的列，动态创建，我想要一个 100% 的表。每列可以包含很长的单词，长到它们都可能不适合一页。为了解决这个问题，我使用`table-layout: fixed`了它使表格的所有列在页面上可见。问题是我仍然希望每列的宽度是动态的，这样如果一列有短词，它应该比长词短。

示例：[jsfiddle](http://jsfiddle.net/BuQU4/3/)。

表 1 始终显示所有列，但是当页面足够宽时，即使其他列中有可用空间，它也会破坏单词。

当页面比列宽时，表 2 工作正常，但当窗口较小时，第一列将其他列推出屏幕/推到其他对象上。

有没有办法得到这一切？一个总是包含所有列和不超过它们必须适合的列的表？我希望它在必要时打破文字，而不是溢出桌子。

我可以接受 js/jquery 解决方案，但如果可以使用 css 则更可取。

编辑：

小桌子： 注意：asasdasdasdasdasdasdasdasdasdasdasdasd 是**一个**缩写词，因为桌子不能比这个大。

```
+--------------------+----------+---------+
|asasdasdasdasdasdasd|qweqweqweq|zxczxczxc|
|asdasdasdasdasd     |          |         |
+--------------------+----------+---------+ 
```

大表：注意：所有列的大小不相等，最好它们随着空白空间均匀分布而增加。

```
+--------------------------------------+-------------+------------+
|asasdasdasdasdasdasdasdasdasdasdasd   |qweqweqweq   |zxczxczxc   |
+--------------------------------------+-------------+------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:07.383

如果我理解这可能是一个起点：

```
var tds;

$("table").each(function() {

   tds = $("td");

    for(var x = 0; x < tds.length; x++){
        tds.eq(x).css('max-width', '100px');
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:13:32.493

首先**删除“table-layout:fixed”属性**。

试试下面的代码，这在你的情况下应该可以完美地工作：

```
$(document).ready(function(){

 $("table").find('tr').children('td').each(function () {
     var wdth = $(this).html().length + 10;
     $(this).css({ 'padding-right': '10px' }, { 'width': wdth + 'px' });
  });
}); 
```

# sql - 否则触发

> ID：10833713
> 
> 赞同：1
> 
> 时间：2012-05-31T12:33:55.017
> 
> 标签：sql, oracle, triggers

我有一个触发器来验证字段是否为空：

```
create or replace trigger trig1
after insert on table_1
for each row
begin
if ((select table2.column2 from table2 where table2.id= :new.id) isnull) then
update table2 set table2.column2 = :new.column1 where table2.id = :new.id;
end if;
end trig1;
.
run; 
```

我收到一个错误，即触发器是使用编译错误创建的。我不知道问题是什么。我使用 Oracle SQL*Plus 10.2.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T13:01:08.257

PL/SQL 语法不允许在 IF 子句中包含 SQL 语句。

正确的做法是将 SELECT 语句分离出来，然后测试它的结果。所以那将是：

```
create or replace trigger trig1 
after insert on table_1 
for each row 
declare
    v table2.column2%type;
begin
    select table2.column2 
    into v
    from table2 
    where table2.id= :new.id;

    if v is null
    then 
        update table2 
        set table2.column2 = :new.column1 
        where table2.id = :new.id; 
    end if; 
end trig1; 
```

请注意，这不处理`table2`匹配条件时存在多行，或者确实没有匹配的行。它也不处理锁定。

另外，请记住，这样的代码在多用户环境中无法正常运行。这就是我提到锁定的原因。你真的应该使用过程逻辑来处理这些类型的需求。尽管通常情况下考虑不周的触发器，但真正的罪魁祸首是糟糕的数据模型。 `table2.column2`应该已经规范化不存在了。

# c# - 在 windows phone 7 上的每个按钮上设置源并播放单个 mp3 文件

> ID：10833716
> 
> 赞同：0
> 
> 时间：2012-05-31T12:34:04.447
> 
> 标签：c#, windows-phone-7, mediaelement

我正在尝试为 windows phone 7.1 for school 制作应用程序。我想为我的应用程序上的每个按下按钮播放声音（就像 android 的 istantfun 按钮），但我有一些问题。如果我在我的 xaml 上声明所有 120 个媒体元素，我的应用程序将只随机播放 3/4 声音。我想做这样的事情：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        prova.Source = new Uri("/mp3/call.mp3", UriKind.Relative);
        prova.Play();
    } 
```

其中 prova 是在 xaml 文件的第一页上声明的单个 MediaElement。我能怎么做？谢谢建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:00:41.197

首先，如果您想在多页应用程序中播放声音，那么媒体元素不是好的解决方案。除了它的限制（一次单一的声音）和考虑声音效果的数量之后，也许你应该尝试使用 XNA，如下所述：http: [//www.dotnetscraps.com/dotnetscraps/post/Play-multiple-sound-files-在 Silverlight-for-Windows-Phone-7.aspx](http://www.dotnetscraps.com/dotnetscraps/post/Play-multiple-sound-files-in-Silverlight-for-Windows-Phone-7.aspx)

```
public void PlaySound(string soundFile)
{
    using (var stream = TitleContainer.OpenStream(soundFile))
    {
        var effect = SoundEffect.FromStream(stream);
        FrameworkDispatcher.Update();
        effect.Play();
    }
} 
```

使用此解决方案，您不需要任何 XAML 元素，因此您可以在应用程序范围内播放它。

# python - Spynner 崩溃 python

> ID：10833717
> 
> 赞同：0
> 
> 时间：2012-05-31T12:34:08.520
> 
> 标签：python, django, crash, spynner

我正在构建一个 Django 应用程序，并且正在使用 Spynner 进行网络抓取。我有这个问题，我希望有人可以帮助我。

我在模块“crawler.py”中有这个功能：

```
import spynner 

def crawling_js(url)
    br = spynner.Browser()
    br.load(url)
    text_page = br.html
    br.close (*)
    return text_page 
```

(*) 我在另一个模块中也尝试过使用 br.close()
（例如：“import.py”）我以这种方式调用该函数：

```
from crawler import crawling_js    

l_url = ["https://www.google.com/", "https://www.tripadvisor.com/", ...]

for url in l_url:
    mytextpage = crawling_js(url)
    .. parse mytextpage.... 
```

当我将第一个 url 传递给函数时，当我传递第二个“url”python 崩溃时，一切都是正确的。Python 在这一行崩溃：br.load(url)。有人可以帮助我吗？非常感谢

我有： Django 1.3 Python 2.7 Spynner 1.1.0 PyQt4 4.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:16:16.320

为什么每次调用 crawling_js() 时都需要实例化 br = spynner.Browser() 并关闭它。在一个循环中，这将利用大量资源，我认为这就是它崩溃的原因。让我们这样想，br 是一个浏览器实例。因此，您可以让它浏览任意数量的网站，而无需关闭它并再次打开它。以这种方式调整您的代码：

```
import spynner

br = spynner.Browser() #you open it only once.

def crawling_js(url):
    br.load(url)
    text_page = br._get_html() #_get_html() to make sure you get the updated html
    return text_page 
```

然后，如果您坚持稍后关闭 br，您只需执行以下操作：

```
from crawler import crawling_js , br

l_url = ["https://www.google.com/", "https://www.tripadvisor.com/", ...]

for url in l_url:
    mytextpage = crawling_js(url)
    .. parse mytextpage....

br.close() 
```

# iphone - 如何制作启用多点触控的 iOS 应用程序

> ID：10833718
> 
> 赞同：1
> 
> 时间：2012-05-31T12:34:10.320
> 
> 标签：iphone, ios, cocoa-touch, multi-touch

我制作了一个应用程序，我想让它兼容多点触控。我试过环顾四周，但答案并不特定于我。这是我所做的：

1）我的编码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

[self touchesMoved:touches withEvent:event];
if (gameState == kGameStatePaused) {(gameState = kGameStateRunning);}
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
if(gameState == kGameStateRunning) {

    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    if(location.x > 400) {

        CGPoint yLocation = CGPointMake(playerPaddle.center.x, location.y);
        playerPaddle.center = yLocation;
    }

    if (gameStyle == kGameStyleTwoP) {
        if(location.x < 100) {

            CGPoint yLocation2 = CGPointMake(computerPaddle.center.x, location.y);
            computerPaddle.center = yLocation2;
        }
    }
} 
```

2）我已经进入界面生成器并选中了启用多点触控的框

3）我构建并运行我的应用程序，它可以正常打开，当我去测试多点触控时，我按住“选项键”并单击并移动鼠标

4）（我试图让 computerPaddle 和 playerPaddle 都移动）但一次只有一个作品

我必须尝试修复它，但我不明白我哪里出错了。

任何帮助都是有用的。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:38:15.957

`multipleTouchEnabled` UIView 上有一个名为的属性，您可以将其设置为 YES 以启用它（默认为 NO）。

此外，您应该循环处理`touches`您收到的集合中的所有触摸`touchesMoved`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:39:37.340

看这条线

```
UITouch *touch = [[event allTouches] anyObject]; 
```

您只需轻轻一按，忽略休息，这就是为什么只有一件事可以移动

所以用for循环替换应该可以解决问题

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
if(gameState == kGameStateRunning) {

    for (UITouch *touch in [event allTouches]) {
    CGPoint location = [touch locationInView:touch.view];
    if(location.x > 400) {

        CGPoint yLocation = CGPointMake(playerPaddle.center.x, location.y);
        playerPaddle.center = yLocation;
    }

    if (gameStyle == kGameStyleTwoP) {
        if(location.x < 100) {

            CGPoint yLocation2 = CGPointMake(computerPaddle.center.x, location.y);
            computerPaddle.center = yLocation2;
        }
    }
}
} 
```

# c# - 检查 Canvas Child 是否存在：按标签

> ID：10833719
> 
> 赞同：1
> 
> 时间：2012-05-31T12:34:12.550
> 
> 标签：c#, wpf, wpf-controls

`Canvas`如果孩子存在，如何通过标签检查？

例如，我想知道在我的`Canvas`（canvas1）中是否存在一个带有标签“p”的孩子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:37:41.420

> 如果存在画布子项，我如何通过标签检查？

所以我想一个布尔值是你想要的

```
bool result = mycanvas.Children.Cast<FrameworkElement>()
                      .Any(x => x.Tag != null && x.Tag.ToString() == "p"); 
```

我过去`(x.Tag == null ? "" : x.Tag.ToString()) == "p")`只是为了确保标签属性不为空。

或者

如果你想要元素，那么

```
FrameworkElement result = mycanvas.Children.Cast<FrameworkElement>()
                                           .Where(x => x.Tag != null && 
                                                  x.Tag.ToString() == "p")
                                           .First(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:38:21.403

```
 object mytag;
            DrawingCanvas.Children.Select((elem) =>
            {
                FrameworkElement fe = elem as FrameworkElement;
                if (fe != null)
                {
                    return fe.Tag == mytag;
                }
                else
                    return false;
            }); 
```

# facebook - 如何使用 sdk 从帐户中禁用我的应用程序？

> ID：10833722
> 
> 赞同：0
> 
> 时间：2012-05-31T12:34:20.590
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-javascript-sdk

我创建了应用程序，它将有关我网站中阅读文章的信息添加到时间表中。

如何使用 facebook sdk 从用户帐户禁用我的应用程序？

例如，用户单击我网站上的一个按钮，应用程序从用户帐户中被禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:01:03.157

您可以执行以下操作：

```
FB.api("me/permissions", "delete", function(response) {
    console.log("Application should now be invalidated, response: ", response);
}); 
```

# jquery - jQuery 数组和 Foreach

> ID：10833730
> 
> 赞同：1
> 
> 时间：2012-05-31T12:34:58.033
> 
> 标签：jquery, html, css

这是我的数组，我需要做一个 foreach 来显示图像等。基本上该数组包含幻灯片和幻灯片信息，我需要为每个包含信息的 div 输出一个 div（如果我知道如何访问它，我可以这样做）。

```
var slides = new Array();
slides[1] = {slidetitle: 'title 1',
             slidetext: 'text 1',
             image1: '',
             magnifyposit: '',
             buttontext: 'button text 1',
             buttonurl: 'http://www.google.com'};
slides[2] = {slidetitle: 'title 2',
             slidetext: 'text 2',
             image1: '',
             magnifyposit: '',
             buttontext: 'button text 2',
             buttonurl: 'http://www.google.com'};
slides[3] = {slidetitle: 'title 3',
             slidetext: 'text 3',
             image1: '',
             magnifyposit: '',
             buttontext: 'button text 3',
             buttonurl: ''};
slides[4] = {slidetitle: 'title 4',
             slidetext: 'text 4',
             image1: '',
             magnifyposit: '',
             buttontext: 'button text 4',
             buttonurl: 'http://www.google.com'};
slides[5] = {slidetitle: 'title 5',
             slidetext: 'text 5',
             image1: '',
             magnifyposit: '',
             buttontext: 'button text 5',
             buttonurl: 'http://www.google.com'}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:43:08.483

你可以像这样使用[$.each](http://api.jquery.com/jQuery.each/)

```
$.each(slides,function(i,obj){
   //here  obj is object element of slides array

  // access properties of the object 
  // in current iteration like obj.slidetitle,obj.slidetext etc

}); 
```

**注意：**您应该从 0 开始数组索引。

[工作小提琴](http://jsfiddle.net/joycse06/dHEq8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:44:23.307

有几点需要注意。您需要从索引 0 开始您的数组。这是完整的代码和 jsfiddle：http: [//jsfiddle.net/lucuma/gKgns/](http://jsfiddle.net/lucuma/gKgns/)

```
var slides = new Array();

slides[0] = {slidetitle: 'title 1',
                         slidetext: 'text 1',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 1',
                         buttonurl: 'http://www.google.com'};

slides[1] = {slidetitle: 'title 1',
                         slidetext: 'text 1',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 1',
                         buttonurl: 'http://www.google.com'};

slides[2] = {slidetitle: 'title 2',
                         slidetext: 'text 2',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 2',
                         buttonurl: 'http://www.google.com'};

slides[3] = {slidetitle: 'title 3',
                         slidetext: 'text 3',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 3',
                         buttonurl: ''};

slides[4] = {slidetitle: 'title 4',
                         slidetext: 'text 4',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 4',
                         buttonurl: 'http://www.google.com'};

 slides[5] = {slidetitle: 'title 5',
                         slidetext: 'text 5',
                         image1: '',
                         magnifyposit: '',
                         buttontext: 'button text 5',
                         buttonurl: 'http://www.google.com'};      

var $container= $('#container');
$.each(slides, function(index, value) { 
   var $div = $('<div>' + value.slidetitle + '</div>');
   $container.append($div);
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:45:22.513

基本上你必须创建一个空的表`tbody`，`tbody`必须设置一个 id 以便以后选择它。

```
$.each(slides, function (index, value) {
    var row = '<tr><td>value.title</td></tr>'
    + '<tr><td>value.text</td></tr>';

    $('#tableBody').append(row);
} 
```

*   其中 value 是您的 Array 对象。

# c# - C# 如何使用 MS clickonce 部署打包的 exe

> ID：10833731
> 
> 赞同：0
> 
> 时间：2012-05-31T12:35:00.090
> 
> 标签：c#, clickonce, publish

我正在开发一个 C# windows 应用程序，并使用 MS Clickonce 部署我的应用程序。但我有一个问题。我正在为这个应用程序使用加密狗，我正在打包我的 *.exe 。第一步 ; 发布项目，然后我正在打包发布的 exe。之后添加文件分机。名称，像这样 *.exe.deploy

但 ; 所以，不要使用这个 exe。

你对这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:23:39.957

如果您在发布后修改任何已发布的文件，则必须更新您的 .manifest 和 .application 文件。使用 mageui.exe（位置在您拥有的 Windows SDK 的 bin 文件夹中）编辑这些文件并记住在完成后签名/保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:30:25.083

如果您只想提供应用程序的副本，为什么不直接构建它，然后将 \bin\Release 文件夹复制到外部驱动器？

ClickOnce 的真正目的是从网络服务器或网络共享部署应用程序，并让您能够发布增量更改。

如果您想从 USB 记忆棒使用 ClickOnce 部署某些东西，您必须将应用程序发布到一个文件夹，然后将包复制到 USB 驱动器并让用户运行 setup.exe。

如果这样做，您将需要转到“选项”对话框下的“清单”选项卡并选中“排除部署提供程序 URL”。然后当用户安装时，它会将安装 URL 设置为 U 盘上文件的文件路径。他必须以同样的方式安装更新。

# ruby - JRuby“没有要加载的文件”

> ID：10833732
> 
> 赞同：3
> 
> 时间：2012-05-31T12:35:03.680
> 
> 标签：ruby, gem, jruby, bundler

通过 rvm 和 gem 版本 1.8.24 使用 jruby-1.6.7 我创建了一个包含 Gemfile 的新项目：

```
source 'http://rubygems.org'
gem 'google-api-client' 
```

和一个main.rb：

```
require 'google/api_client' 
```

后

```
gem install bundler
bundle install
gem list 
```

我明白了

```
addressable (2.2.8)
autoparse (0.3.1)
bouncy-castle-java (1.5.0146.1)
bundler (1.1.4)
extlib (0.9.15)
faraday (0.8.1, 0.7.6)
ffi (1.0.11 java)
google-api-client (0.4.3)
jruby-launcher (1.0.14 java)
jruby-openssl (0.7.7)
json (1.7.3 java)
jwt (0.1.4)
launchy (2.1.0 java)
multi_json (1.3.6)
multipart-post (1.1.5)
rack (1.4.1)
rake (0.9.2.2)
rubygems-bundler (1.0.2)
rubygems-update (1.8.24, 1.7.2)
rvm (1.11.3.3)
signet (0.3.4)
spoon (0.0.1) 
```

但是当我运行 ruby​​ main.rb 时，它会导致错误：

```
LoadError: no such file to load -- google/api_client
  require at org/jruby/RubyKernel.java:1033
   (root) at main.rb:1 
```

在核磁共振上，一切似乎都很好。该问题似乎与任何特定的宝石无关。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:16:46.130

除非您`JRUBY_OPTS=--1.9`在您的环境中有，或者您在命令行中传递了`--1.9`标志，否则 JRuby 将默认为 1.8 模式，这意味着您必须`require 'rubygems'`在`main.rb`加载 gems 之前明确地进入。

# php - 是否有不同类型的应用访问令牌？

> ID：10833733
> 
> 赞同：1
> 
> 时间：2012-05-31T12:35:06.397
> 
> 标签：php, facebook-graph-api, oauth, facebook-php-sdk, facebook-oauth

[实时更新](https://developers.facebook.com/docs/reference/api/realtime/)的文档说：

> 在所有情况下，您都必须发送 OAuth 应用程序 access_token。使用您的 App ID 和您的 App Secret 获取应用访问令牌：
> 
> [https://graph.facebook.com/oauth/access_token?client_id=<APP_ID>&client_secret=<APP_SECRET>&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=<APP_ID>&client_secret=<APP_SECRET>&grant_type=client_credentials)

我已经这样做了，并取回了一串表格`access_token=<APP_ID>|<String1>-<String2>`。

另一方面，`BaseFacebook::getApplicationAccessToken()`来自 Facebook PHP SDK 的方法只是使用“|”将 App ID 与 App Secret（看起来像一个 32 位十六进制表示的数字）连接起来。作为分隔符：

```
/**
 * @return string The application access token, useful for gathering
 *                public information about users and applications.
 */
protected function getApplicationAccessToken() {
  return $this->appId.'|'.$this->appSecret;
} 
```

这两种应用访问令牌有什么不同的用途？它们可以互换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:51:48.860

> 它们可以互换吗？

我的猜测是，他们是；两者都将被接受为您的应用程序的应用程序访问令牌，并将为您提供完全相同的权利来做事。

PHP SDK 已经知道您的应用程序 ID，因为您已经用它初始化了 Facebook 对象实例——因此使用“简单”版本在此处构建访问令牌没有害处。（并且放弃创建应用程序访问令牌的另一种方式，Graph API 端点在这里使用会很愚蠢，因为每个人都可以查看代码内部。）

另一方面，在某些情况下，您的应用访问令牌可能必须在您的控制之外使用（？），因此它们也提供了第一个版本，这样您就不必泄露您的应用秘密。

# heroku - 无法克隆我的 heroku 项目

> ID：10833736
> 
> 赞同：4
> 
> 时间：2012-05-31T12:35:11.067
> 
> 标签：heroku, ssh, keychain, ssh-keys

我不确定我的 heroku 帐户出了什么问题，但我不再能够克隆我的 heroku 项目。

注意：**请不要关闭此问题，因为我在下面描述了此问题的重复问题[，](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint) 我尝试了该问题的答案中提到的所有解决方案**

```
!  Your key with fingerprint XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX is not authorized to access genqr 
```

每当我这样做

```
 git clone git@heroku.com:genqr.git 
```

我已经做了人类所能做的一切。

**1.**我已经**删除**了heroku的所有密钥**添加了一个新密钥**

使用

```
heroku keys:remove 
```

和

```
heroku keys:add /home/vire2egi/.ssh/setup.pub 
```

尽管如此，克隆项目时也会出现同样的问题。

**2** . 我还向 ssh-add 添加了 heroku 密钥

```
ssh-add /home/vire2egi/.ssh/setup 
```

**3.**还添加了钥匙串的钥匙

```
eval `keychain --eval setup` 
```

以上所有命令都成功，但我仍然无法克隆 repo

**4.**我也做过

```
heroku keys:remove
heroku auth:logout
heroku auth:login ## Authenticated myself and then added the key: still no success 
```

仍然没有成功

**5.**我还为heroku定义了一个配置，比如

```
Host heroku.com
  Hostname heroku.com
  User viren2egi
  IdentityFile /home/vire2egi/.ssh/setup 
```

仍然没有成功。

**6.**出于沮丧，我创造了一把全新的钥匙。

```
ssh-keygen -t rsa 
```

并为该键重复上述所有设置，但我仍然遇到同样的问题。

每次我运行上述任何命令时，我都会清理我的**known_hosts**，以确保它不会从中选择。

笔记 ：

**每当我尝试 heroku:keys 时，它总是向我显示**我添加的密钥的正确信息

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T00:43:09.873

当您执行 git 操作时，它会使用您以某种顺序在本地加载的任何 ssh 密钥（我相信它们的加载顺序）。可能是您仍然加载了旧密钥，并且当您执行 git 操作时，它首先尝试该密钥并失败，并且如果失败则不会继续使用下一个密钥。

所以...尝试使用 卸载所有 ssh 密钥`ssh-add -D`，然后加载您创建并添加到 heroku 的最新密钥：

```
$ ssh-add -D
$ ssh-add /home/vire2egi/.ssh/setup
$ git clone git@heroku.com:genqr.git
??? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T07:12:32.040

我有同样的问题。[http://rakshasingh.weebly.com/1/post/2013/04/accessing-multiple-heroku-accounts-from-one-machine.html](http://rakshasingh.weebly.com/1/post/2013/04/accessing-multiple-heroku-accounts-from-one-machine.html)中描述的步骤对我很有帮助。关于从现有 heroku 应用程序克隆的最后一部分很重要。

# c# - 如何保持对 ListviewSelectedIndexChanged 的 保护

> ID：10833740
> 
> 赞同：-2
> 
> 时间：2012-05-31T12:35:18.580
> 
> 标签：c#, visual-studio

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{

     ListView lv = (ListView)sender;
     textBox2.Text = lv.FocusedItem.SubItems[3].Text;
     textBox3.Text = lv.FocusedItem.SubItems[0].Text;

} 
```

我认为上面的代码不安全，这会在通过其他形式更新列表视图项时触发**空引用错误**，那么如何保护它以防止出现空引用错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:40:25.337

这是一个私有方法，因此它不能作为事件处理程序添加到任何事件中，除非您在自己的类中这样做。因此，它不会从任何地方接收事件，除非您在代码中告诉它。它不会接收其他表单上的 ListView 控件的事件（除非您指示它这样做）。如果您唯一关心的是停止空引用异常，则只需添加检查以查看属性是否为空。当没有 FocusedItem 或焦点项没有每个预期的子项时，您自己的窗体上的 ListView 控件仍可能引发事件。因此，为了完全安全，您可以执行以下操作：

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (sender != null)
    {
        ListView lv = (ListView)sender;
        if ((lv.FocusedItem != null) && (lv.FocusedItem.SubItems.Count >= 4))
        {
            textBox2.Text = lv.FocusedItem.SubItems[3].Text;
            textBox3.Text = lv.FocusedItem.SubItems[0].Text;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:40:46.667

您应该检查焦点项目中是否有 4 个子项目，如下所示：

```
 ListView lv = (ListView)sender;
 if (lv.FocusedItem != null && lv.FocusedItem.SubItems.Count > 3)
 {
   textBox2.Text = lv.FocusedItem.SubItems[3].Text;
   textBox3.Text = lv.FocusedItem.SubItems[0].Text;
 } 
```

# java - 当Update语句没有找到记录时MySql抛出异常

> ID：10833742
> 
> 赞同：1
> 
> 时间：2012-05-31T12:35:26.387
> 
> 标签：java, mysql, jboss, sql-update, jdbctemplate

我正在使用 MySql 5.5，查询是通过 Jboss 5.1 上的 Spring Framework(JdbcTemplate) 执行的

我遇到了一个问题，导致更新语句抛出以下内容：

```
javax.ejb.EJBTransactionRolledbackException: PreparedStatementCallback; uncategorized SQLException for SQL [ UPDATE events SET last_update=?  WHERE  account_id=? ]; SQL state [HY000]; error
     code [1032]; Can't find record in 'events'; nested exception is java.sql.SQLException: Can't find record in 'events
' 
```

我的问题是为什么在找不到记录时会出现异常（这是预期的行为）以及如何防止这种情况发生。

非常感谢

亚尼夫

**更多细节**

该表没有外键。它总共有 15 个字段，其中 on 是一个自动增量 id，另外 4 个被索引。查询是`UPDATE events SET last_update=? 在哪里 account_id=？

这也是实际 SQLException 的堆栈跟踪：

```
Caused by: java.sql.SQLException: Can't find record in 'events'
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2427)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2345)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2330)
        at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:365)
        at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:818)
        at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:1)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587) 
```

# mysql - 将多列匹配到多行子查询？

> ID：10833743
> 
> 赞同：2
> 
> 时间：2012-05-31T12:35:27.153
> 
> 标签：mysql, subquery

我仍然非常了解 mySQL（我仍然只对基本查询、计数、排序等感到满意）。很可能以前有人问过这个问题，但是我不知道要搜索什么，或者我太新手了，无法理解答案：

我有两张桌子：

```
tb1 (a,b,path)
tb2 (a,b,value) 
```

我想做一个查询，为 tb1 中的每一行返回“路径”，其 a，b 与 tb2 上的不同查询匹配。在坏的mysql中，它会是这样的：

```
select
 path 
from tb1
 where
 a=(select a from tb2 where value < v1) 
and
 b=(select b from tb2 where value < v1); 
```

但是，这不起作用，因为子查询返回多个值。请注意，交换`=`by`in`还不够好，因为对于不是由`select a,b from tb2 where value < v1`

基本上，我已经根据 tb2 在 (a,b) 空间中确定了一个有趣的区域，并且想研究 tb1 在该区域内的行为（如果这样更清楚的话）。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:38:29.810

这是和[的`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)工作：`a``b`

```
SELECT
  path
FROM 
   tb1
   INNER JOIN tb2 ON tb1.a = tb2.a AND tb1.b = tb2.b
/* add your condition to the WHERE clause */
WHERE tb2.value < v1 
```

`SELECT`列表或子句中子查询的用例`WHERE`通常可以使用某种类型的`JOIN`. 由于使用`SELECT`or`WHERE`子查询时，可能需要对返回的*每一行*执行子查询，而不是只执行一次，因此连接通常会比子查询快。

除了上面链接的 MySQL 文档`JOIN`之外，我还推荐[Jeff Atwood 的 SQL JOIN 视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:37:35.303

INNER JOIN 可以解决问题。

您只需要两个`ON`条件来匹配 a 和 b 值，如下所示：

`SELECT path
FROM tb1
INNER JOIN tb2 ON tb1.a = tb2.a AND tb1.b = tb2.b
WHERE tb2.value < v1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:11:09.217

您可以通过以下方式限制结果集：

```
select
 path 
from tb1
 where
 a=(select a from tb2 where value < v1 LIMIT 1) 
and
 b=(select b from tb2 where value < v1 LIMIT 1); 
```

# jasper-reports - JasperReports：如何删除子报表中的新页面空白

> ID：10833744
> 
> 赞同：1
> 
> 时间：2012-05-31T12:35:30.420
> 
> 标签：jasper-reports, ireport

我已经创建了一份报告并将子报告放入摘要中。我在子报表中删除新页面空白时遇到问题，因为我在子报表的属性中将点击“运行到底部”。之后，我正确地运行我的报告。数据显示正确，但是当页面后出现一个新页面空白时出现问题。我不知道如何删除空白页。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T14:55:29.020

我解决了这个为*reportElement标签添加属性**isRemoveLineWhenBlank="true"*的问题：

 *```
<reportElement mode="Opaque" x="0" y="0" width="802" height="60" isRemoveLineWhenBlank="true" ... 
```

并且波段高度、reportElement 高度和子报告高度必须相等：

```
<detail>
        <band height="60" splitType="Stretch">
            <subreport>
                <reportElement mode="Opaque" x="0" y="0" width="802" height="60" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:47:53.703

我知道我的错误不是按尺寸带子报告。尺码带和子报告必须是相同的尺寸，这样才不会出现空白页。*

# wpf - MVVM Light 应用程序的全局异常处理程序

> ID：10833747
> 
> 赞同：6
> 
> 时间：2012-05-31T12:35:41.727
> 
> 标签：wpf, exception-handling, mvvm-light

我正在尝试在使用 MVVM Light Toolkit 构建的 WPF 应用程序中创建一个简单的全局异常处理程序，但我很难让它工作。

问题是视图模型中出现的异常不会被应用程序的 UnhandledException 处理程序捕获，即使我像这样为 Dispatcher 和 AppDomain 注册了一个侦听器：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
   AppDomain.CurrentDomain.UnhandledException += DomainUnhandledException;
   DispatcherUnhandledException += App_DispatcherUnhandledException;
}

private void DomainUnhandledException(object sender, UnhandledExceptionEventArgs unhandledExceptionEventArgs)
{
   var exception = unhandledExceptionEventArgs.ExceptionObject as Exception;
   ShowExceptionMessage(exception);
}
private void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
{
   ShowExceptionMessage(e.Exception);
   e.Handled = true;
} 
```

我发现[这篇博客文章](http://codifying.wordpress.com/2010/12/20/silverlight-unhandled-exception-and-mvvm-light/)描述了问题点，并为视图模型截取了这段代码描述的解决方案：

```
// Throw the exception in the UI thread.
App.Current.RootVisual.Dispatcher.BeginInvoke(() => { throw new MyException(); }); 
```

但是，我希望所有异常都冒泡到全局异常处理程序中，而不仅仅是那些我自己扔进 VM 中的异常。

所以问题是：是否有可能以某种方式将其他线程的异常重新抛出到一个地方的 UI 线程中？

**更新**：为应用程序的事件处理程序设置添加了更详细的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T09:55:20.763

我想我现在想通了。

问题是由于 WPF 抑制了视图数据绑定中引发的异常，并且因为我的视图模型数据绑定到视图的 DataContext（通过我的*ViewModelLocator*中的属性使用统一依赖注入器），视图模型构造中的任何异常都会被吞噬。

有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/978887/why-does-wpf-databinding-swallow-exceptions)。

所以我想我只需要确保在构造函数中不会发生对应用程序正常运行能力重要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:00:30.957

WPF 和 Windows 窗体应用程序（Application.DispatcherUnhandledException 和 Application.ThreadException）的“全局”异常处理事件仅对主 UI 线程上抛出的异常触发。您仍然必须手动处理工作线程上的异常。

AppDomain.CurrentDomain.UnhandledException 触发任何未处理的异常，但不提供阻止应用程序随后关闭的方法。

*   也许还要检查线程池“分而治之”的风格。
*   TPL

[使用 TPL 时如何在 UI 线程上调用方法？](https://stackoverflow.com/questions/7324123/how-do-i-invoke-a-method-on-the-ui-thread-when-using-the-tpl)

# android - 配置文件的 Android 同步（移动和网络）

> ID：10833749
> 
> 赞同：0
> 
> 时间：2012-05-31T12:35:47.897
> 
> 标签：android

我的移动应用程序和网络项目中有个人资料。我们目前正在考虑如何同步它们。关键是，如果有人在移动配置文件中添加了一些东西——我们只需将一束 id 发送到网络服务器，服务器也会添加它们。删除物品也是如此。但是，如果一个人在没有持续连接的情况下从移动配置文件中删除，然后在网络服务器的配置文件中删除他的配置文件中的某些内容会怎样？之后我们必须以某种方式同步它。

我知道必须已经找到此类问题的解决方案，但不幸的是我还没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:48:52.467

我建议观看 Virgil Dobjanschi 在 Google I/0 2010 上关于设计 RESTful 客户端应用程序的演讲：[这里](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)。大约一个小时，但内容丰富且乐于助人。

需要注意的一些关键点是：

*   使用 SQLite 数据库充当应用程序和 Web 服务器之间的缓存，因此即使没有连接也可以保存更改，然后在您再次连接后发送/接收。
*   使用 Service 来处理 REST 调用，因为它不受单个 Activity 生命周期的限制。这样，如果用户或 Android 操作系统终止了您的 Activity、电话将您的应用程序从屏幕上推开等等，您的服务器请求仍然可以被执行和正确处理。我正在使用[Intent Service](http://developer.android.com/reference/android/app/IntentService.html)，因为它为您处理线程。

您还需要确定哪种同步关系最适合您的应用程序。我的意思是“哪个数据库应该覆盖另一个：SQLite 还是网络服务器？”。那么当两者之间存在差异时，哪些数据应该被认为是“正确的”呢？这通常被称为**主从**。

# android - 在opengl android中绘制矩形

> ID：10833751
> 
> 赞同：0
> 
> 时间：2012-05-31T12:35:52.667
> 
> 标签：android, opengl-es

我正在尝试使用 android opengl 绘制一个矩形。矩形将在彩色背景中形成。运行代码后，我可以看到背景，但里面没有矩形。

```
public void onDrawFrame(GL10 gl) 
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);        
    gl.glClearColor(0.4f, 0.5f, 0.6f, 0.5f);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);       
    float[] vertices=
    {
            -1.0f, 1.0f, 0.0f, 
            -1.0f, -1.0f, 0.0f,
            1.0f, -1.0f, 0.0f, 
            1.0f, 1.0f, 0.0f,               
    };
    short[] indices = { 0, 1, 2, 0, 2, 3 };     
    ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    FloatBuffer vertexBuffer = vbb.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);       
    ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
    ibb.order(ByteOrder.nativeOrder());
    ShortBuffer indexBuffer = ibb.asShortBuffer();
    indexBuffer.put(indices);
    indexBuffer.position(0);
    gl.glFrontFace(GL10.GL_CCW);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);       
    gl.glColor4f(0.5f, 0.3f, 0.3f, 0.7f);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glDrawElements(GL10.GL_TRIANGLES, indices.length,
    GL10.GL_UNSIGNED_SHORT, indexBuffer);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
}
public void onSurfaceChanged(GL10 gl, int width, int height) 
{
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 45.0f,
    (float) width / (float) height,
    0.1f, 100.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

}
public void onSurfaceCreated(GL10 gl, EGLConfig arg1) 
{
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glClearDepthf(1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);     

} 
```

我的代码有什么问题？有什么建议请......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T12:53:32.280

在 onDrawFrame 方法中初始化缓冲区看起来不正确。

我建议您创建一个以顶点和索引作为字段的基本 Rectangle 类：

```
public class Rectangle {

    private float vertices[]={
        -1.0f, 1.0f, 0.0f,
        -1.0f,-1.0f,0.0f,
        1.0f,-1.0f,0.0f,
        1.0f,1.0f,0.0f
    };

    private short[] indices = {0,1,2,0,2,3};

    private FloatBuffer vertexBuffer;
    private ShortBuffer indexBuffer;

    public Rectangle(){
        ByteBuffer vbb  = ByteBuffer.allocateDirect(vertices.length * 4);
        vbb.order(ByteOrder.nativeOrder());
        vertexBuffer = vbb.asFloatBuffer();
        vertexBuffer.put(vertices);
        vertexBuffer.position(0);

        ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
        ibb.order(ByteOrder.nativeOrder());
        indexBuffer = ibb.asShortBuffer();
        indexBuffer.put(indices);
        indexBuffer.position(0);
    }

    public void draw(GL10 gl){
        gl.glFrontFace(GL10.GL_CCW);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glCullFace(GL10.GL_BACK);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, GL10.GL_UNSIGNED_SHORT, indexBuffer);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisable(GL10.GL_CULL_FACE);
    }

} 
```

将一个 Rectangle 字段添加到您的 Renderer 并在 Renderer 的构造函数中对其进行初始化：

```
public MyOpenGLRenderer() {
    mRectangle = new Rectangle();
} 
```

并在 Renderer 的 onDrawFrame 方法中调用 Rectangle 的 draw 方法：

```
 public void onDrawFrame(GL10 gl) {
    //...
    mRectangle.draw(gl);
} 
```

按照[本教程](http://www.jayway.com/2009/12/03/opengl-es-tutorial-for-android-part-i/)的前 3 部分来获取如何完成的完整解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:05:37.173

你的三角形在近平面的后面。相机位于 z=0，近平面为 0.1f，您的三角形位于 z=0。

沿着 -z 轴进一步绘制三角形，或者设置 z > 0.1f 的相机。

此外，要使用 GL_TRIANGLES 绘制一个矩形，您需要 6 个顶点，而不是 4 个。不过，您仍然应该看到一些东西。

# javascript - 客户端处理相同输入字段的多个副本的最佳实践？

> ID：10833757
> 
> 赞同：0
> 
> 时间：2012-05-31T12:36:14.913
> 
> 标签：javascript, jquery, html

我有一组相互“堆叠”的输入字段。

```
<!-- This controls which data set you're looking at -->
<select class="EditorInput" id="Selector" name="Selector">                        
   <option value="0">Link a new vendor</option>
   <option value="1">The ACME Company</option>
   <option value="2">Widgets Unlimited</option>
</select>

<!-- These values change based on the selection above -->
<input type="text" name="Price" />
<input type="text" name="SKU" />
<input type="text" name="Field3" />
<input type="text" name="Field4" />
<input type="text" name="Field5" />
<input type="text" name="Field6" />
<input type="text" name="Field7" />
<input type="text" name="Field8" /> 
```

一次只显示一组，但所有组的值都保存在浏览器中，直到提交。当您在下拉列表中进行选择时，组中的所有输入字段都会更改以向用户显示与选择相关的值。例如，在选择字段中选择“The ACME Company”，将使 The ACME Company 的价格显示在 price 字段中，The ACME Company 的 SKU 显示在 SKU 字段中等。

*   所有数据和所有更改都存储在客户端。保存数据时（通过 AJAX），每组的所有值同时保存到服务器。

*   由于提交是通过 AJAX 进行的，因此所有值不一定都必须存储在输入元素中。

我可以想到两种主要方法来做到这一点：

**方法一**

一组输入元素，数据存储在 javascript 对象中。在更改选择时，会从 javascript 变量中读取正确的数据并插入到字段中。用户对第一组所做的任何更改都会首先保存到变量中。选择添加新集会将当前值保存到变量中，然后清除表单中的值。

**方法二**

每个选项都有一整套输入字段。隐藏非活动输入集。更改选择显示/隐藏正确的设置。添加新集合复制现有集合之一，将新输入元素插入 dom 并清除这些新输入元素的值。

**方法三**

使用 HTML 5 数据存储多个值，例如：

```
<input type="text" name="Field8" value="$7.95" data-value-vendor-1="$6.99" data-value-vendor-2="$2.65" data-value-vendor-3="$12.24"/> 
```

然后使用 javascript 将值切换到“存储”和“存储”中。

哪个选项更有意义？或者，还有更好的方法？此外，对于方法 1，每个集合的值将存储在哪里？在选择选项上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:31:32.870

我将使用基于 JSON 的数据存储并回收输入，然后提交 JSON 存储而不是表单数据。在客户端和服务器端都有很多库（您已经在使用 jQuery）来帮助解决这个问题。

# namespaces - 如何列出 TCL 实例中的所有命名空间？

> ID：10833761
> 
> 赞同：3
> 
> 时间：2012-05-31T12:36:33.370
> 
> 标签：namespaces, tcl, introspection

如何列出在 tclsh 实例中加载的所有命名空间？

陈兹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:03:03.110

尝试从 TCLer 的[Wiki运行此过程](http://wiki.tcl.tk/1489)

```
 proc listns {{parentns ::}} {
        set result [list]
        foreach ns [namespace children $parentns] {
                eval lappend result [listns $ns]
                lappend result $ns
        }
        return $result
    } 
```

当我运行它时，我得到以下输出：

```
% listns
::platform ::activestate::teapot::link ::activestate::teapot ::activestate ::tcl
::clock ::tcl::info ::tcl::dict ::tcl::tm ::tcl::mathop ::tcl::unsupported ::tcl
::mathfunc ::tcl::chan ::tcl::string ::tcl
% 
```

因此，要获取所有命名空间，您只需执行以下操作：

```
set all_namespaces [concat [listns] "::"] 
```

# android - 究竟什么时候调用 onActivityResult？

> ID：10833763
> 
> 赞同：0
> 
> 时间：2012-05-31T12:36:40.443
> 
> 标签：android, android-intent

我的应用程序遇到了一些问题，我想确定它应该如何工作。

用户输入向活动 A 发送意图。活动 A`startActivityForResult`活动 B。活动 B 完成其工作，设置结果，然后完成。由于环境限制，我不能拥有

我的问题如下：`A.onActivityresult`2 秒前被调用`A.onDestroy`。我锁定了活动 A，以避免启动

这是一个简化的代码：

```
A.onNewIntent(Intent intent)
{
    if(!mLocked && intent.getAction()==MyIntent.LAUNCHB)
    {
        Log.d("A", "Locked");
        mLocked = true;
        Log.d("A", "Intent sent to B");
        startActivityForResult(intentB,BCODE); // intent is configured before
    }
}

A.onActivityResult()
{
    displayBResults();
    Log.d("A","Lock release");
    mLocked = false;
} 
```

在 B 中：

```
B.onResume()
{
    Log.d("B","Start doing stuff");
    doSomeStuff();
    setResult(SOME_CODE);
    finish();
}

B.onDestroy()
{
    super.onDestroy();
    Log.d("B","Destroyed");
} 
```

Logcat 看起来像这样：（时间是通常发生的平均值）

```
00:00:00.000 A Locked
00:00:00.040 A Intent sent to B
00:00:00.440 B Start doing stuff
00:00:10.000 A Lock release
//User input during the 2-seconds gap between onActivityResult && onDestroy
00:00:11.000 A Locked
00:00:11.040 A Intent sent to B
00:00:12.000 B onDestroy 
```

在那之后，我的应用程序不再工作了。有什么建议吗？有什么办法可以缩小这个差距？

# javascript - 如何计算输入 HTML 元素的宽度，使其与其内容的大小相匹配？

> ID：10833768
> 
> 赞同：8
> 
> 时间：2012-05-31T12:36:55.080
> 
> 标签：javascript, html, css, input, auto-update

如何计算输入 HTML 元素的宽度，使其与其内容的大小相匹配？当用户键入时，我已经即时更新了输入：

```
<input type='text' onkeydown='this.size=this.value.length' /> 
```

但是，这似乎并不完全正确，因为它没有考虑到某些字符比其他字符长的事实：

*   如果我只输入一些“l”字符，我会得到越来越多的空格
*   如果我只输入一些“w”字符，大小会不够

如何进行？

PS：为什么我要这样做（已经在已删除的答案中回答了这个问题）？我有句子，我必须用输入替换括号内容（例如：[user] is [years] old）。我不知道这个句子可以是什么，所以我不知道输入的足够长度，我想让它在一行上保持可读（避免太多的空格）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:43:12.447

您可以使用（隐藏的）画布和`measureText()`上下文的方法来获取字符串的宽度。

**编辑：**

看起来[够快](http://jsfiddle.net/dda_/qGucU/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T12:44:46.773

首先，定义一些 CSS ...

```
input,
#input-helper {
    display: inline;
    font-size: 14px;
    font-family: serif;
    line-height: 16px;
}

#input-helper {
    position: absolute;
    top: -10000px;
} 
```

...然后使用一些 JavaScript ...

```
var div = document.createElement("div");
div.id = "input-helper";
document.body.appendChild(div);

var input = document.querySelector("input");

input.addEventListener("keyup", function() {
    div.textContent = this.value;
    input.style.width = div.offsetWidth + "px";
});​ 
```

[js小提琴](http://jsfiddle.net/Y5vAe/)。

你也需要为你的`input`元素选择一个合理的起始宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T07:35:52.020

如果使用 jQuery 没有问题，这里是我放在[jsFiddle](http://jsfiddle.net/yQwkL/1/)上的一个演示。它使用一个`Autoexpand.js`文件来做你想做的事。查看小提琴中的最后一个示例。

一些细节：

1.  它基于`.keyup`并`.keypress`尽可能实现最快的响应。
2.  它考虑了粘贴到框中的 HTML 标记。处理诸如换行之类的事情。
3.  源文件通过考虑有关字体的所有内容来显示智能处理。

jsFiddle 中还包括下载 fiddle 的 pastebin 版本的链接，因为 jsFiddle Sandbox 在 IE8 中中断。也就是说，它也适用于 IE7！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-30T07:04:34.293

**第一：**在你想要的地方添加这个 div

```
<div id="calcsize" style="display:none;"></div> 
```

**第二：**使用此功能

```
function getWidthof(txt)
{
    $('#calcsize').empty().append(txt);
    return $('#calcsize').width();
} 
```

# ruby-on-rails - 通过包含字段名称的字符串变量引用模型字段？

> ID：10833769
> 
> 赞同：2
> 
> 时间：2012-05-31T12:36:58.780
> 
> 标签：ruby-on-rails

我不知道如何用谷歌搜索来表达这个 - 请原谅。如果我有这样的模型：

```
c = Color.all 
```

我可以说：

```
c.Color[0].color_name 
```

因此，如果我有一个包含该模型中字段名称的变量，例如：

```
b = 'color_name' 
```

我怎么能像这样使用带有字段名称的字符串说 ("c.color_name")：

```
c[0].b 
```

或者，我的意思是告诉 Ruby/Rails 使用变量的内容作为字段名：

```
c[0].[the string value of b] 
```

我摸索着尝试了所有我能想到的东西，但我无法弄清楚它的语法。

谢谢！

导轨 2.3.5 / Ruby 1.8.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:41:45.887

如果`b`是 a 的实例变量或方法`Color`，请使用[`send`](http://ruby-doc.org/core-1.8.7/Object.html#method-i-send)来自的方法`Object`

```
c = Color.all
b = 'color_name'
c[0].send(b.to_sym) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:39:56.150

我从来没有使用过这个版本的rails，但`object['nameoffield']`或者`object.read_attribute('nameoffield')`可能会工作。

# android - 使用 kSOAP2 发送带有 int 数组的对象

> ID：10833778
> 
> 赞同：2
> 
> 时间：2012-05-31T12:37:32.263
> 
> 标签：android, arrays, soap, ksoap2

我之前用 kSOAP 2 发送了几个简单的对象，但现在我必须发送一个包含整数数组的对象......

因此，我查看了另一个 SO 帖子：[使用 kSOAP2 序列化要发送的整数数组](https://stackoverflow.com/questions/4951333/serialize-an-array-of-ints-to-send-using-ksoap2) 但我遇到了与该帖子的作者相同的问题 - 我收到一条错误消息：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:recipientIds](http://tempuri.org/:recipientIds)时出错。InnerException 消息是“第 1 行位置 650 中的错误。元素“ [http://tempuri.org/:recipientIds](http://tempuri.org/:recipientIds) ”包含来自映射到名称的类型的数据“ [http://schemas.microsoft.com/2003/10/序列化/数组：recipientIds](http://schemas.microsoft.com/2003/10/Serialization/Arrays:recipientIds) '。反序列化器不知道映射到此名称的任何类型。

我的课：

```
public class AddMessageConnection {
    private static final String SOAP_ACTION = "http://tempuri.org/IKindergarden/AddMessageAboutKid";
    private static final String METHOD_NAME = "AddMessageAboutKid";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String NESTED_NAMESPACE = "http://schemas.microsoft.com/2003/10/Serialization/Arrays";
    private String URL;
    public String msg;
    public String kidID;
    public ArrayList<String> listOfEmployees = new ArrayList<String>();

    void connection()
    {
        Singleton service = Singleton.getInstance();
        service.getURL();
        String firstURL = service.getURL();
        URL = firstURL + "Kindergarden.svc";

        //Get parentID, parentToken
        String parentIDSingleton = service.getParentID();
        String parentTokenSingleton = service.getParentToken();

        //Initialize soap request
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        //Add parameters
        request.addProperty("authorId", service.getParentID());
        request.addProperty("relatesToKidId", kidID);

        SoapObject recipients = new SoapObject(NESTED_NAMESPACE, "recipientIds");

        //Add the recipients
        List<Integer> recp = new ArrayList<Integer>();
        //Iterate through recipients and add them
        for(int i = 0; i < listOfEmployees.size(); i++)
        {
            int converted = Integer.parseInt(listOfEmployees.get(i));
            recp.add(converted);
        }

        for(Integer i:recp)
        {
            recipients.addProperty("int", i);   
        }

        request.addSoapObject(recipients);

        request.addProperty("sMessage", msg);

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        //Debugging
        envelope.avoidExceptionForUnknownProperty=true;

        envelope.dotNet=true;
        envelope.implicitTypes=true;
        envelope.setAddAdornments(false);

        //Prepare request
        envelope.setOutputSoapObject(request);

        //Needed to make the internet call
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //Allow for debugging - needed to output the request
        androidHttpTransport.debug = true;

        try 
        {
            //this is the actual part that will call the web service
            androidHttpTransport.call(SOAP_ACTION, envelope);

            System.out.println("Request: " + androidHttpTransport.requestDump.toString());
            System.out.println("Response: " + androidHttpTransport.responseDump.toString());

        } catch(org.xmlpull.v1.XmlPullParserException ex2)
        {               
            System.out.println(androidHttpTransport.requestDump.toString());

        }  catch (Exception e)
        {
            e.printStackTrace();
            System.out.println(androidHttpTransport.requestDump.toString());
        }
    }
} 
```

所以我试图通过假设错误在于命名空间来解决这个问题......有没有人知道我应该改变什么？

SoapUI 表示该服务期望：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/" xmlns:arr="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
   <soapenv:Header/>
   <soapenv:Body>
      <tem:AddMessageAboutKid>
         <!--Optional:-->
         <tem:authorId>?</tem:authorId>
         <!--Optional:-->
         <tem:relatesToKidId>?</tem:relatesToKidId>
         <!--Optional:-->
         <tem:recipientIds>
            <!--Zero or more repetitions:-->
            <arr:int>?</arr:int>
         </tem:recipientIds>
         <!--Optional:-->
         <tem:sMessage>?</tem:sMessage>
      </tem:AddMessageAboutKid>
   </soapenv:Body>
</soapenv:Envelope> 
```

我已经在 iOS 中完成了请求，xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:day="http://schemas.datacontract.org/2004/07/DayCare.DB.DTO">
<s:Header>
    <parentId xmlns="ns">2104541932</parentId>
    <parentToken xmlns="ns">00430050004A00430046004C0052</parentToken>
    <authType xmlns="ns">Parent</authType>
    <id xmlns="ns">1</id>
</s:Header>
<s:Body>
<AddMessageAboutKid xmlns="http://tempuri.org/">
    <authorId>2104541932</authorId>
    <relatesToKidId>2104535510</relatesToKidId>
    <recipientIds xmlns:d4p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
        <d4p1:int>2104535836</d4p1:int>
        <d4p1:int>2104535839</d4p1:int>
    </recipientIds>
    <sMessage>Test</sMessage>
</AddMessageAboutKid>
</s:Body>
</s:Envelope> 
```

而我来自 kSOAP2 的 xml 最终为：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header>
    <n0:parentId xmlns:n0="ns">2104536774</n0:parentId>
    <n1:parentToken xmlns:n1="ns">0003</n1:parentToken>
    <n2:authType xmlns:n2="ns">Parent</n2:authType>
    <n3:id xmlns:n3="ns">1</n3:id>
</v:Header>
<v:Body>
<AddMessageAboutKid xmlns="http://tempuri.org/">
    <authorId>2104536774</authorId>
    <relatesToKidId>2104535421</relatesToKidId>
    <recipientIds i:type="n4:recipientIds" xmlns:n4="http://tempuri.org/">
        <int>2104535482</int>
        <int>2104535485</int>
    </recipientIds>
    <sMessage>Test</sMessage>
</AddMessageAboutKid>
</v:Body>
</v:Envelope> 
```

所以我的猜测是问题出在recipientIds命名空间......我在iOS中设置的位置，我目前只有在Android中，但我不确定如何用我的SoapObjects正确设置它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:42:42.320

尝试像这样添加收件人

```
request.addProperty("Arrays", recipients); 
```

甚至

```
request.addProperty("http://schemas.microsoft.com/2003/10/Serialization/Arrays", recipients); 
```

# mysql - mysql查询计数

> ID：10833779
> 
> 赞同：0
> 
> 时间：2012-05-31T12:37:34.470
> 
> 标签：mysql, sql, subquery

我遇到了自己对 MySQL 查询技能的限制，所以我希望一些 SQL 大师可以帮助解决这个问题。我有 2 张桌子：

```
表“评论”
评论 ID | comment_post_ID
     120 | 620
     121 | 620
     122 | 620

```

```
   表“comments_like”
喜欢_ID | 评论 ID
    1 | 120
    2 | 120

```

我将通过comment_post_ID得出具有类似组的评论数量：

```
COUNT（评论中的评论）| comment_post_ID
      1 | 620

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:41:58.547

我想子查询在这里是最简单的：

```
SELECT (SELECT COUNT(like_ID) FROM `comments_like` cl WHERE cl.comment_ID=c.comment_ID) AS comments_in_comments_like, c.comment_post_ID FROM `comments` c 
```

这将产生 2 的点赞数，因为评论 id 120 在您的示例中有 2 个点赞

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:45:20.240

此查询在 comment_like 表中给出其评论的 post_id 和 no of like

```
 SELECT comment_post_ID, count(like_ID)
 from (select distinct comment_post_ID,like_ID 
       from comments_like cl , comments c
 where cl.comment_ID= c.comment_ID ) as iq
 group by comment_post_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:47:54.853

```
select cmtLike.like_ID, commnts.comment_post_ID
from comments_like cmtLike left join comments commnts on cmtLike.comment_ID = commnts.comment_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:50:27.820

如果您只需要计算一次列出的每条评论`comments_like`，那么：

```
select comment_post_ID, count(distinct cl.comment_ID) 
from comments c, comments_like cl 
where c.comment_id = cl.comment_id 
group by comment_post_ID 
```

# java - 升级到 Java 7 有哪些陷阱

> ID：10833781
> 
> 赞同：8
> 
> 时间：2012-05-31T12:37:38.517
> 
> 标签：java, spring, hibernate, jakarta-ee

我正在将基于 Spring 3.1.0、Hibernate 3.6.0 的企业应用程序从 Java 6 32 位切换到 Java 7 64 位。有人这样做过吗？任何问题？有没有关于这个主题的资源？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T12:54:24.553

以下是我所知道的陷阱：

*   您可能必须升级 IDE 才能启用 Java 7 功能。
*   确保命令行工具和您的 IDE 使用相同的 Java 版本。例如，如果您使用 Maven，请查看`$HOME/.mavenrc`和/或检查环境变量`JAVA_HOME`
*   检查 Java 编译器的源/目标选项。
*   Java 7 比 Java 6 更好地支持泛型，因此现在可以编译一些在 Java 6 中失败的代码
*   64 位版本的 Java 比 32 位版本使用更多的内存
*   Java 7 的第一个版本在 JIT 编译器中有一个严重的错误，它破坏了 Lucene。至少使用 b2 或更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T20:36:30.043

Java 7 使用较新的 JAXB 2.2 而不是 2.1（[此处](http://marxsoftware.blogspot.de/2011/03/new-xml-stack-in-jdk-7.html)描述了 XML 堆栈的完整更改）。这些版本在为布尔 getter 和 setter 生成的代码上不兼容！

# symfony - 配置一个监听器只在一个包中执行 symfony 2

> ID：10833784
> 
> 赞同：4
> 
> 时间：2012-05-31T12:37:50.217
> 
> 标签：symfony

我们需要配置一个侦听器来检查数据库中的一些寄存器，但我们只需要在一个包中为其中的每个操作执行此检查操作。

我们不想每次在包中编写函数时都调用函数，所以我们考虑做一个监听器。

Symfony 是否只允许在一个包中配置监听器？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:02:05.567

你想错了。您不能配置侦听器来为捆绑执行。在实践中，侦听器只是等待其事件被触发——它是定义何时调用侦听器的事件。您真正想要实现的是在控制器中的每个操作之前触发一个事件。

您可以这样做购买监听 kernel.Controller 事件，然后执行以下操作：

```
$controller = $event->getController();
if ($controller instanceof mybundlecontroller) {
    // fire custom event e.g. My.db.lookup
}
$event->setController($controller) 
```

然后，您可以有一个单独的侦听器在这种情况下触发。

请参阅文档：[http ://symfony.com/doc/current/book/internals.html#kernel-controller-event](http://symfony.com/doc/current/book/internals.html#kernel-controller-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T22:10:25.127

我的情况...我使用 event.controller，路由帮助我“使用监听器进行自定义路由”

服务

```
 kernel.listener.corporation.manage:
        class:  Site\CorporationBundle\Event\SiteCorporationManageListener
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController } 
```

班级

```
class SiteCorporationManageListener
{
    private $oEntityManager = null;

    public function __construct(EntityManager $oEntityManager)
    {
        $this->oEntityManager = $oEntityManager;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        if (HttpKernelInterface::MASTER_REQUEST === $event->getRequestType()) {
            // get variable from url if needed
            // $event->getRequest()->get('urlVariable', null); 
            $route = $event->getRequest()->get('_route');

            if (strstr($route, 'corporation')) {
                if (!strstr($route, 'corporation_index')) {
                    echo 'some request done';
                }
            }
        }
    }
} 
```

路线

```
corporation_index_default:
# . . .
corporation_api_default:
# . . .    
corporation_manage_default:
# . . . 
```

在我们的例子中，监听器只能在

```
corporation_api_default:
# . . .
corporation_manage_default:
# . . . 
```

# xslt - XSLT：函数内的日期计算 [format-dateTime()]

> ID：10833803
> 
> 赞同：-2
> 
> 时间：2012-05-31T12:38:57.940
> 
> 标签：xslt, xslt-2.0

我想在 format-dateTime() 函数中进行日期计算并进行 XSL 转换。这是我的 XSL 文件

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.abc.com/ws/integration/toolkit/2005/07" xmlns:fct="http://www.taleo.com/xsl_functions" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xsl:output method="xml" encoding="UTF-8"/>
<xsl:template match="/">
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="ns:field[@name = 'EndDate']">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:value-of select="fct:format-considering-timezone(xs:dateTime(.))"/>
    </xsl:copy>
</xsl:template>
<xsl:function name="fct:format-considering-timezone">
    <xsl:param name="dateTime" as="xs:dateTime"/>
    <xsl:variable name="dst">
        <xsl:value-of select="fct:get-timezone($dateTime)"/>
    </xsl:variable>
    <xsl:variable name="date-format">
        <xsl:choose>
            <xsl:when test="$dst = 'PT11H'">[Y,4-4]-[M,2-2]-[D,2-2]02:00:00T-05:00</xsl:when>
            <xsl:otherwise>[Y,4-4]-[M,2-2]-[D,2-2]00:00:00T-05:00</xsl:otherwise>
        </xsl:choose>
    </xsl:variable>               
    <xsl:variable name="Duration">
        <xsl:choose>
            <xsl:when test="ns:field[@name='CareerSiteNo3'] = 'xyz'">P2D</xsl:when>
            <xsl:otherwise>P14D</xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:variable name="AUTime">
        <xsl:value-of select="adjust-dateTime-to-timezone($dateTime + xs:dayTimeDuration($Duration), $dst)"/>
    </xsl:variable>
    <xsl:value-of select="format-dateTime((xs:datetime($AUTime) + xs:dayTimeDuration($Duration)), $date-format)"/>
</xsl:function>
<xsl:function name="fct:get-timezone" as="xs:dayTimeDuration">
    <xsl:param name="dateTime" as="xs:dateTime"/>
    <xsl:variable name="timezone">
        <xsl:choose>
            <xsl:when test="$dateTime gt xs:dateTime('2030-10-06T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2030-04-07T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2029-10-07T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2029-04-01T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2028-10-01T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2028-04-02T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2027-10-03T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2027-04-04T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2026-10-04T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2026-04-05T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2025-10-05T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2025-04-06T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2024-10-06T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2024-04-07T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2023-10-01T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2023-04-02T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2022-10-02T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2022-04-03T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2021-10-03T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2021-04-04T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2020-10-04T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2020-04-05T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2019-10-06T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2019-04-07T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2018-10-07T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2018-04-01T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2017-10-01T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2017-04-02T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2016-10-02T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2016-04-03T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2015-10-04T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2015-04-05T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2014-10-05T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2014-04-06T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2013-10-06T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2013-04-07T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2012-10-07T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2012-04-01T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2011-10-02T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2011-04-03T03:00:00+10:00')">PT10H</xsl:when>
            <xsl:when test="$dateTime gt xs:dateTime('2010-10-03T02:00:00+11:00')">PT11H</xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="concat(' Error - dateTime : ', $dateTime, ' out of range. Need to extend the list of DST datetimes.')"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <xsl:value-of select="xs:dayTimeDuration($timezone)"/>
</xsl:function> 
```

此代码导致错误“TransformerConfigurationException：编译样式表失败。检测到 1 个错误。”。

这是我要转换的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Body>
    <getDocumentByKeyResponse xmlns="http://www.abc.com/ws/integration/toolkit/2005/07" xmlns:ns1="http://www.abc.com/ws/integration/toolkit/2005/07" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <Document>
            <Attributes>
                <Attribute name="duration">0:00:00.086</Attribute>
                <Attribute name="count">2</Attribute>
                <Attribute name="entity">SourcingRequest</Attribute>
                <Attribute name="mode">XML</Attribute>
                <Attribute name="version">http://www.taleo.com/ws/tee800/2009/01</Attribute>
            </Attributes>
            <Content>
                <ExportXML>
                    <record>
                        <field name="Identifier">00000abc</field>
                        <field name="ContestNumber">00000abc</field>
                        <field name="CareerSiteNo3">xyz</field>
                        <field name="OpeningDate">2012-02-15</field>
                        <field name="EndDate">2012-02-1602:00:00T-05:00</field>
                    </record>
            </Content>
        </Document>
    </getDocumentByKeyResponse>
</Body> 
```

当我 `<xsl:value-of select="format-dateTime((xs:datetime($AUTime) + xs:dayTimeDuration($Duration)), $date-format)"/>`像这样更改`<xsl:value-of select="format-dateTime($AUTime, $date-format)"/>`不包含数据计算的部分时，转换过程成功。

里面不能做计算`format-dateTime()>`吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:51:17.240

可以*进行*计算以向函数提供参数，但是，xpath 的 '+' 运算符不能像您期望的那样在日期时间上工作。

看看[http://www.w3.org/TR/2004/WD-xpath-functions-20041029/#dateTime-arithmetic](http://www.w3.org/TR/2004/WD-xpath-functions-20041029/#dateTime-arithmetic)

# asp.net - 不更新主键但使用实体框架仍然出错

> ID：10833804
> 
> 赞同：0
> 
> 时间：2012-05-31T12:38:58.340
> 
> 标签：asp.net, entity-framework

我有一个名为“orderDetails”的表，其中包含 4 个字段：

```
OrderID // (primary key of Orders table)
ItemID // (primary key of Items table)
Amount
IsImportant 
```

orderDetails 表的主键由前两个字段组成。

我在我的 asp.net 站点中有一个 gridview，它显示了所选订单的订单详细信息。

我正在尝试更新 gridview 中的一行。用户只能更新`Amount, IsImportant`文件。对于除第一行之外的所有行，我在尝试更新行时遇到此错误：

> 属性“ItemID”是对象的关键信息的一部分，不能修改。

[我读到](https://stackoverflow.com/questions/1367751/update-primary-key-value-using-entity-framework)无法更新主键，但这很奇怪，因为

1.  我不想更新主键，只更新其余字段
2.  更新 gridview 中的第一行确实成功。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:39:12.977

我不确定这是您要查找的内容，但请尝试将有问题的键的列设置为可见 = false。因为当您进行更新时，它基本上会尝试更新该行上出现的所有字段。

但是为什么第一行的更新确实成功了仍然很奇怪。

# delphi - 如何在 Chromium Embedded 中禁用查看源选项？

> ID：10833805
> 
> 赞同：7
> 
> 时间：2012-05-31T12:39:01.287
> 
> 标签：delphi, tchromium, view-source

是否可以在 Delphi Chromium Embedded 中禁用查看源选项？
我没有在属性/方法列表中找到任何合适的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T13:13:03.570

没有允许隐藏 Chromium 弹出菜单项的直接设置或事件。但是，您至少有几个选项可以继续，例如：

***1.告诉用户查看源选项被禁止并拒绝该操作***

您可以决定在`OnMenuAction`事件处理程序中允许或拒绝哪些操作，如果您将 True 分配给`Result`参数，则操作将被拒绝。以下代码检查您是否已执行查看源操作，如果是，请拒绝该操作并显示信息消息：

```
type
  TCefMenuId = TCefHandlerMenuId;

procedure TForm1.Chromium1MenuAction(Sender: TObject;
  const browser: ICefBrowser; menuId: TCefMenuId; out Result: Boolean);
begin
  if menuId = MENU_ID_VIEWSOURCE then
  begin
    Result := True;
    ShowMessage('View page source is not allowed!');
  end;
end; 
```

***2\. 通过更改菜单项的标题及其操作，将菜单项伪装成自定义项***

您可以通过更改菜单项的标题并执行一些自定义操作来利用菜单项的其他功能。以下示例代码显示了如何将查看源菜单项更改为关于框菜单项：

```
type
  TCefMenuId = TCefHandlerMenuId;

procedure TForm1.Chromium1GetMenuLabel(Sender: TObject;
  const browser: ICefBrowser; menuId: TCefMenuId; var caption: ustring;
  out Result: Boolean);
begin
  if menuId = MENU_ID_VIEWSOURCE then
    caption := 'About my application...';
end;

procedure TForm1.Chromium1MenuAction(Sender: TObject;
  const browser: ICefBrowser; menuId: TCefMenuId; out Result: Boolean);
begin
  if menuId = MENU_ID_VIEWSOURCE then
  begin
    Result := True;
    ShowMessage('About box...!');
  end;
end; 
```

***3.创建您自己的自定义页面（框架）弹出菜单***

您可以创建自己的弹出菜单，但您需要考虑到该菜单是非常硬编码的，因此如果您需要在每个新版本的 Delphi Chromium 包装器中使用相同的菜单，则需要对其进行维护。以下是如何在没有查看源菜单项的情况下创建页面菜单的代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Menus, cefvcl, ceflib;

type
  PCefMenuInfo = PCefHandlerMenuInfo;

type
  TForm1 = class(TForm)
    Chromium1: TChromium;
    procedure FormCreate(Sender: TObject);
    procedure Chromium1BeforeMenu(Sender: TObject; const browser: ICefBrowser;
      const menuInfo: PCefMenuInfo; out Result: Boolean);
  private
    PageMenu: TPopupMenu;
    procedure OnNavigateBackMenuItemClick(Sender: TObject);
    procedure OnNavigateForwardMenuItemClick(Sender: TObject);
    procedure OnPrintMenuItemClick(Sender: TObject);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.OnNavigateBackMenuItemClick(Sender: TObject);
begin
  Chromium1.Browser.GoBack;
end;

procedure TForm1.OnNavigateForwardMenuItemClick(Sender: TObject);
begin
  Chromium1.Browser.GoForward;
end;

procedure TForm1.OnPrintMenuItemClick(Sender: TObject);
begin
  Chromium1.Browser.GetFocusedFrame.Print;
end;

procedure TForm1.Chromium1BeforeMenu(Sender: TObject;
  const browser: ICefBrowser; const menuInfo: PCefMenuInfo;
  out Result: Boolean);
begin
  if menuInfo.typeFlags = MENUTYPE_PAGE then
  begin
    Result := True;
    PageMenu.Items[0].Enabled := browser.CanGoBack;
    PageMenu.Items[1].Enabled := browser.CanGoForward;
    PageMenu.Popup(menuInfo^.x, menuInfo^.y);
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  MenuItem: TMenuItem;
begin
  PageMenu := TPopupMenu.Create(Self);
  MenuItem := TMenuItem.Create(PageMenu);
  MenuItem.Caption := 'Back';
  MenuItem.OnClick := OnNavigateBackMenuItemClick;
  PageMenu.Items.Add(MenuItem);
  MenuItem := TMenuItem.Create(PageMenu);
  MenuItem.Caption := 'Forward';
  MenuItem.OnClick := OnNavigateForwardMenuItemClick;
  PageMenu.Items.Add(MenuItem);
  MenuItem := TMenuItem.Create(PageMenu);
  MenuItem.Caption := '-';
  PageMenu.Items.Add(MenuItem);
  MenuItem := TMenuItem.Create(PageMenu);
  MenuItem.Caption := 'Print';
  MenuItem.OnClick := OnPrintMenuItemClick;
  PageMenu.Items.Add(MenuItem);
  Chromium1.Load('www.stackoverflow.com');
end;

end. 
```

***脚注***

所有代码示例中使用的类型定义都在那里，因为我注意到某些版本的 Delphi Chromium 有错误的事件处理程序定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T09:43:09.950

多年来情况可能发生了变化，今天存在一种直接的方法：

```
uses
  ceflib;

[..]

implementation

procedure TForm1.Chromium1BeforeContextMenu(Sender: TObject;
  const browser: ICefBrowser; const frame: ICefFrame;
  const params: ICefContextMenuParams; const model: ICefMenuModel);
begin
  //model.Clear;
  model.Remove(Integer(MENU_ID_VIEW_SOURCE));
end; 
```

`model.Clear`如果您想完全摆脱弹出菜单，您可以使用。

# django - GeoDjango：大量标记的聚类

> ID：10833806
> 
> 赞同：0
> 
> 时间：2012-05-31T12:39:05.143
> 
> 标签：django, google-maps, google-maps-markers, geodjango, markerclusterer

嗨 Stackoverflow 人，

我开始使用 GeoDjango，当我遇到 Google map v2 implementation 时我非常高兴`django.contrib.gis.maps.google.overlays`。不再是最新的，因为 v2 已被贬值，但仍然是一个非常紧凑的工具，可以简单地在地图上显示标记

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
{{ google.xhtml }}
<head>
  {{ google.style }}
  {{ google.scripts }}
</head>
<body onload="{{ google.js_module }}.map_load()" onunload="GUnload()">
  <div id="{{ google.dom_id }}" style="width:600px; height:400px;"></div>
</body>
</html> 
```

代码取自[这里](http://jefurii.cafejosti.net/blog/2011/05/05/basic-google-maps-django/)。

基于这个非常紧凑的代码，我该如何实现[聚类功能](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html?)？我读过 GeoDjango 目前不支持集群。**有没有人通过使用实现集群`django.contrib.gis.maps.google.overlays`？还是自己编写完整函数并遍历所有列表条目以创建标记的更好方法？**

感谢您分享您的经验和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:54:17.753

您可以尝试我的 geodjango 集群应用程序进行服务器端集群：

[https://github.com/biodiv/anycluster](https://github.com/biodiv/anycluster)

它使用 kmeans 和/或网格。

# c# - 评估 TypeAs 表达式

> ID：10833808
> 
> 赞同：1
> 
> 时间：2012-05-31T12:39:11.810
> 
> 标签：c#, .net, lambda, expression, evaluate

我正在尝试评估一个表达式以检查评估的输出是否为空。我的代码如下所示：

```
public class ObjectHelper<TType>
{
    public static bool PathHasNull(object pParentObjectInstance, Expression<Func<TType, object>> pPathToValue)
    {
        Expression lExpressionPart = pPathToValue.Body;
        if (lExpressionPart.NodeType == ExpressionType.TypeAs)
            {
                ExpressionParameter[] some_params;
                //some code that creates the ExpressionParameters goes here

                Delegate lDelegate = Expression.Lambda(lExpressionPart, some_params).Compile();
                lMemberValue = lDelegate.DynamicInvoke(lInstance); //not sure about this...
            }
            if (lMemberValue == null)
            {
                return true;
            }

        return false;
    }
} 
```

这是调用该方法的方式，以解释“项目”的来源：

```
TypeX x = GetXInstance();
ObjectHelper<TypeX>.PathHasNull(x, (item => item.Foo.Bar.Something as SomeTypeOfThing).SomeProperty); 
```

我尝试调用 Expression.Lambda(expr, some_parameters).Compile() 来获取一个委托，然后我可以使用它来获取“as”的输出，但我不断收到一个错误，即“X”类型的“变量”项目被引用从范围''，但它没有定义'。

我猜我没有为 Lambda 方法提供正确的参数，有人可以帮助了解正确的 Lambda 调用应该是什么样子以及我应该为它提供哪些参数？

# c++ - 2003/2007 年的 HTML 电子邮件

> ID：10833814
> 
> 赞同：1
> 
> 时间：2012-05-31T12:39:48.750
> 
> 标签：c++, html, css, outlook, html-email

我通常只是在 StackOverflow 上找到答案，但找不到关于这个主题的任何好东西。我有一个 C++ 程序需要发送带有 CSS（和嵌入图像）的格式化 html，我们感兴趣的主要电子邮件客户端是 Outlook 2003/2007。我有一个 HTML 页面准备好了，我可以从 IE 发送它（文件-> 通过邮件发送页面），没关系，一旦我让我的程序读取相同的文件并发送它，CSS 都没有实际工作，只有简单的 HTML .

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:10.927

如上所述，大多数电子邮件客户端不支持外部 CSS。

此外，如果您使用后台 CSS，您会发现一些电子邮件客户端（例如 GMail）不支持它们。虽然[有变通办法](http://blog.mailchimp.com/background-images-and-css-in-html-email/)

我倾向于使所有 CSS 内联并使其尽可能简单。

你想用你的 CSS 做什么？

编辑：

这就是我让它工作的方式。使用内联 CSS 和 HTML 的组合。

```
<td background="Path/to/image.jpg" style="background-image:url(path/to/image.jpg);"></td> 
```

Edit2：对于 Outlook 2007，尝试添加重复。所以

```
Background-repeat: No-repeat; 
```

编辑3：

如果一切都失败了。[试试这个](http://newbitsontheblog.com/outlook-2007-css-background-image/)

# orchardcms - Orchard CMS 1.4：向自定义 ContentPart 添加文本字段

> ID：10833822
> 
> 赞同：4
> 
> 时间：2012-05-31T12:40:26.310
> 
> 标签：orchardcms

在自定义 ContentPart 的模块中，如何将字段设置为文本字段？

在我的 migrations.cs 类中，我为部件创建了表：

```
public int UpdateFrom1()
        {
            SchemaBuilder.CreateTable("RightContentPartRecord", table =>
               table.ContentPartRecord()
                    .Column<string>("Html"));                                                      
            return 2;
        } 
```

所以，我有一个名为 Html 的列。我想使用 WYSIWYG 编辑器，所以我被告知我需要一个文本字段才能让它“开箱即用”。

但是，这对我来说并没有发生，所以我需要做什么才能将我的名为 Html 的列转换为部件上的 Text 字段？

以及如何配置它以使用 WYSIWYG 编辑器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T07:56:49.327

如果您希望自己的自定义 contentpart 的属性显示为 htmleditor，请在您的 part 的 editortemplate 中进行如下配置。

```
@Script.Require("OrchardTinyMce")
@Html.TextAreaFor(x => x.Header, new { @class = "html tinymce" }) 
```

在这种情况下，'Header' 属性显示为 html 编辑器。

如果您需要更多部分，您可以考虑为其编写 Html 扩展或编辑器模板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T16:23:22.650

文本字段与部件属性不同。字段不存储为它们自己的数据库列。以下是如何将字段添加到迁移中的部件的示例：

```
 ContentDefinitionManager.AlterPartDefinition("Product",
          builder => builder.WithField("ProductImage", fieldBuilder => fieldBuilder.OfType("MediaPickerField").WithDisplayName("Product Image"))); 
```

对于文本字段，您还需要通过添加`.WithSetting("Flavor", "html")`到字段构建器来设置风味设置。

# c# - 从 AS400 存储过程返回 ResultSet

> ID：10833825
> 
> 赞同：3
> 
> 时间：2012-05-31T12:40:35.163
> 
> 标签：c#, ssis

我正在努力使用 C# 控制台应用程序从 AS400 数据库返回结果集...我可以连接到数据库并且我已经通过 AS400 日志验证了连接但是我似乎遇到了以下错误：

> System.InvalidCastException 未处理 Message=提供者当前不支持返回的数据类型。Source=IBM.Data.DB2.iSeries StackTrace：在 IBM.Data.DB2.iSeries.iDB2Command.setRowOfParameterData(MpDcData[]& dcDataRow) 在 IBM.Data.DB2.iSeries.iDB2Command.execute() 在 IBM.Data.DB2.iSeries.iDB2Command.ExecuteNonQuery() 在 GeacFutureDelivery.Program.Main(String[] args) 在 C:\Users\harlim\文档\visual studio 2010\Projects\GeacFutureDelivery\GeacFutureDelivery\Program.cs：System.AppDomain._nExecuteAssembly 的第 40 行（RuntimeAssembly 程序集，String[] args）在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，

我的来源是：

```
var connectionString = "<Connection String>";
        int startDate = 1120530;
        int endDate = 1120602;

        try
        {
            using (var connection = new iDB2Connection(connectionString))
            {
                connection.Open();

                iDB2Transaction trans = connection.BeginTransaction();

                iDB2Command command = connection.CreateCommand();

                string query = "DRLOBJ01.GETORDPCD";
                command.Transaction = trans;
                command.CommandType = CommandType.StoredProcedure; 
                command.CommandText = query;
                command.CommandTimeout = 0;

                command.Parameters.Add("DTSTR", iDB2DbType.iDB2Integer).Value = startDate;
                command.Parameters.Add("DTEND", iDB2DbType.iDB2Integer).Value = endDate;

                command.Prepare();

                using (iDB2DataReader reader = command.ExecuteReader())
                 {
                    int iCUSO51 = reader.GetOrdinal("CUSO51");
                    int iORDN51 = reader.GetOrdinal("ORDN51");
                    int iDTDR51 = reader.GetOrdinal("DTDR51");
                    int iOPST45 = reader.GetOrdinal("OPST45");

                    while (reader.Read())
                    {
                        if (!string.IsNullOrEmpty(reader.GetString(iCUSO51)))
                        {
                            Console.WriteLine((string)reader[iCUSO51]);
                            Console.WriteLine((string)reader[iORDN51]);
                            Console.WriteLine((string)reader[iDTDR51]);
                            Console.WriteLine((string)reader[iOPST45]);
                        }
                    }
                }
            }
        }
        catch (iDB2CommErrorException ex)
        {
            Console.WriteLine(ex.Message);
        }
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:33:26.170

如果您的值是 Byte[]，我认为您在使用 CCSID65535 时遇到了一些问题。

如果是这样，这是解决它的代码:-)

```
 private DataTable parseCCSID65535(DataTable p_dt)
 {
     DataTable dt = new DataTable();

     // Build a new DataTable
     for (int i = 0; i < p_dt.Columns.Count; i++)
     {
         dt.Columns.Add(p_dt.Columns[i].Caption);
     }

     //loop through the rows
     for (int r = 0; r < p_dt.Rows.Count; r++)
     {
         //create a new row
         string[] row = new string[p_dt.Columns.Count];

         //loop through all columns
         for (int c = 0; c < p_dt.Columns.Count; c++)
         {
             if (p_dt.Rows[r][c].GetType() == typeof(System.Byte[]))
             {
                 // if this value is CCSID65535, change it ;-)
                 iDB2CharBitData cbd = new iDB2CharBitData((Byte[])p_dt.Rows[r][c]);
                 row[c] = cbd.ToString(65535);
             }
             else
             {
                 // else: go on.
                 row[c] = p_dt.Rows[r][c].ToString();
             }
         }
         // passing to the new DataTable.
         dt.Rows.Add(row);
     }
     return dt;
 } 
```

# java - 如何在重建时不丢失本地 GAE 数据存储中的数据

> ID：10833828
> 
> 赞同：0
> 
> 时间：2012-05-31T12:40:41.840
> 
> 标签：java, google-app-engine, google-cloud-datastore

每次我重建本地 GAE 应用程序时，我都会丢失我的数据，然后必须重新初始化空数据库。这可能非常耗时，尤其是在有很多实体类型的情况下。

如何在重建之间保留数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:40:42.450

我找到的解决方案只是在重建之前获取生成的数据库的副本，然后再将其放回原处。

为了节省您的时间，它位于此处：

```
...\out\artifacts\...\WEB-INF\appengine-generated\local_db.bin 
```

基本上，在您的构建输出位置找到 appengine-generated 文件夹并复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:59:17.633

你具体做什么来重建你的应用程序？除非保存数据的文件被此过程明确清除，否则它应该被保留。您是否正在使用 Windows 和旧的 SDK？在 SDK 1.6.3 和 1.6.4 中存在一个问题，如果您在启动器中停止应用程序，它会擦除​​数据（事实上，它一开始就不会写入，但它会保存在内存中）。1.6.5 SDK 已解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T18:40:50.797

您可以配置开发服务器（通过 JVM 选项）以将 blobstore 数据和数据存储数据存储在不同的位置，因此它不会被清除。

[在开发环境数据存储中预加载数据的便捷方式](https://stackoverflow.com/questions/4945468/a-convenient-way-to-preload-data-in-development-environment-datastore)

# java - 为什么我的 jspSmartUpload 代码不起作用？

> ID：10833829
> 
> 赞同：1
> 
> 时间：2012-05-31T12:40:41.980
> 
> 标签：java, jsp, servlets

我想在我的 servlet 文件中实现一个上传组件，但它不起作用。代码片段如下所示：

```
SmartUpload smartUpload=new SmartUpload();
StringBuffer stringBuffer=new StringBuffer();
smartUpload.initialize(config,request, response);
try {
     smartUpload.upload();
 File file=smartUpload.getFiles().getFile(0);
 stringBuffer.append(file.getFileName());
 file.saveAs("/upload_resources/"+stringBuffer);
} catch (SmartUploadException e) {
 e.printStackTrace();
} 
```

upload_resource 目录就在 WebRoot 目录下，代码运行没有任何错误，但是文件没有上传。顺便说一句，即使我改变了线路

```
file.saveAs("/upload_resources/"+stringBuffer); 
```

到

```
file.saveAs(request.getRealPath("/upload_resources/")+"/"+stringBuffer); 
```

即使用绝对路径，文件不上传。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:53:31.760

我从来没有真正使用过 SmartUpload，但我可以告诉你不应该将上传的文件保存在 webapp 的部署文件夹中。每当重新部署 webapp 时，它们都可能会丢失，原因很简单，即上传的文件不包含在原始 WAR 文件中。所以你不应该在 webapp 的 deploy 文件夹中准备上传文件夹，而是在 deploy 文件夹之外的固定路径上。

如果 SmartUpload 设计得很好，我希望

```
file.saveAs("/upload_resources/"+stringBuffer); 
```

会将其保存到与`/uploaded_resources`启动网络服务器相同的磁盘的根目录中的文件夹中。因此，例如在 Windows 中将是`C:\uploaded_resources`. 准备并使用该文件夹。

此外，当您使用 MSIE 浏览器时，还有另一个潜在问题。该浏览器错误地在文件名中包含完整的客户端路径。我不确定 SmartUpload 是否正确处理此问题，但您可能需要调试 的实际值`file.getFileName()`并确保它实际上只是 . 格式的文件名`filename.ext`。否则，您需要使用`String#substring()`在最后一个`/`and之后的部分进行子串化`\`。

# java - 如何创建受方法安全保护的 DAO 的安全和不安全版本

> ID：10833831
> 
> 赞同：0
> 
> 时间：2012-05-31T12:40:43.943
> 
> 标签：java, spring-security, authorization

在我当前的项目中，我们有一组受基于方法的安全性保护的服务类。

现在在某些情况下，“系统”需要自己调用安全方法。（例如：用户离开频道并且频道被隐式关闭，因为它是空的。通常“关闭”受到保护）。

如何同时以安全和不安全的方式提供对服务类的访问？

**编辑 - 简短的例子**

在身份验证期间，系统会检查此处是否对用户进行了主动禁止。

```
public User authenticate(String name, String token) throws BadCredentialsException, RuntimeException {
    User user = get(name);
    if (user == null || !user.getToken().equals(token)) {
        throw new BadCredentialsException("Invalid Project/Username/Password");
    }
    Ban userBan = banService.getBanForUser(user);
    if (userBan != null) {
        throw new UserBannedException("User was baned", userBan);
    }
    return user
} 
```

但是对任何禁令的访问都受到基于方法的安全性保护，因此并非每个用户都可以“获取”它们。

```
@PreAuthorize("isAuthenticated()")
public Ban getBanForUser(User user) {
    return ...
} 
```

所以基本上我需要两种方法来访问这个方法。一个受spring-security inteceptor保护（对于“用户”）和一个不受保护（对于“系统”）。

如果没有包装类，继承魔法，这是否可能......

如果我可以定义两个具有相同类的spring bean，一个带有spring-security，一个不带spring-security，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:59:19.747

一个解决方案（当然不是什么优雅的东西）是在调用受保护的方法之前模拟超级用户的身份验证。像这样的东西：

```
SecurityContextHolder.getContext().setAuthentication(privileged user here);    
Ban userBan = banService.getBanForUser(user);
SecurityContextHolder.getContext().setAuthentication(null); 
```

# mysql - MySQL在2个表之间追加

> ID：10833833
> 
> 赞同：0
> 
> 时间：2012-05-31T12:40:49.907
> 
> 标签：mysql

我需要在两个表之间对 MySql 进行**附加**
，我的第一个 table1 获取所有数据，但对于 table2 我只有 EMAIL ：

**table1** (ID;FIRSTNAME;LASTNAME;EMAIL;BIRTH;CP) 100 000 行
**table2** (ID;FIRSTNAME;LASTNAME;EMAIL;BIRTH;CP) 1000 行

示例

**表 1：**
1;JOHN;DOE;john.doe@gmail.com;1981-06-06 00:00:00;92220

**表 2：**
NULL；NULL；NULL；john.doe@gmail.com；NULL；NULL

我想在 table2 上更新**所有**列以进行此匹配：
1;JOHN;DOE;john.doe@gmail.com;1981-06-06 00:00:00;92220

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:44:13.383

使用多表`UPDATE`语法来连接表`EMAIL`并适当地设置字段：

```
UPDATE table2 JOIN table1 USING (EMAIL) SET
  table2.ID        = table1.ID,
  table2.FIRSTNAME = table1.FIRSTNAME,
  table2.LASTNAME  = table1.LASTNAME,
  table2.BIRTH     = table1.BIRTH
  table2.CP        = table1.CP 
```

# javascript - 在 Javascript 中粘贴事件

> ID：10833836
> 
> 赞同：25
> 
> 时间：2012-05-31T12:40:57.870
> 
> 标签：javascript, javascript-events

如何处理通过在 javascript 中单击右键选择的粘贴？我尝试使用“onpaste”事件和所有其他可用的 html 事件，但没有任何效果。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-31T12:52:08.790

onpaste 事件应该适用于所有现代浏览器（包括 Opera >= 12.10 ^(1的)**UPD**）。

像这样在jQuery中绑定它：

```
$('#txt').on('paste', function() {console.log('text pasted!')})​ 
```

这是一个活生生的例子：http: [//jsfiddle.net/7N6Xq/](http://jsfiddle.net/7N6Xq/)

在纯 JavaScript 中，现代浏览器看起来像这样

```
elem.addEventListener ("paste", handler, false);  // all browsers and IE9+ 
```

对于旧的 IE 版本：

```
elem.attachEvent ("onpaste", handler);  // IE<9 
```

您还可以将其与*[oninput](http://help.dottoro.com/ljhxklln.php)*和其他事件（*change*、*propertychange*、*dragdrop*等）结合使用，以创建相对防弹的内容更改跟踪。

* * *

脚注：

¹ Opera 支持从[Presto/2.10.286](http://www.opera.com/docs/specs/presto2.10/#m210-294)开始的剪贴板 API ，对应于 12.10，如此[处](https://stackoverflow.com/questions/7217639/copy-cut-and-paste-events-not-working-in-opera)建议。[Opera 的闪烁版本](http://www.omgchrome.com/blink-based-opera-15-rolls-out-to-all/)（从 15 开始）也应该支持它，但我无法测试它，因为仍然没有 Linux 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:45:28.373

默认情况下，该事件不公开为“onpaste”IIRC。你可以很简单地在 jQuery 中通过发出

```
jQuery(document).bind('paste', function(e){ alert('paste event caught') }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T07:29:03.393

我很惊讶问题 #4532473 没有回答如果你想捕获 afterpaste 事件会发生什么。由于这可能是一半情况下的问题，Firefox（已测试）中的一种可能方法是在 onpaste 处理程序中注册一个 oninput 事件，并在执行完成后立即删除 oninput 处理程序。

在 ie 中，应该使用 onpropertychange 而不是 oninput。（未测试）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-24T23:28:32.327

[Mozilla 开发网站上](https://developer.mozilla.org/en-US/docs/Web/API/Element.onpaste)提供了不错的纯 JS 解决方案（根据要求...）

```
<!DOCTYPE html>
<html>
<head>
<title>onpaste event example</title>
</head>

<body>
<h1>Play with this editor!</h1>
<textarea id="editor" rows="3" cols="80">
Try pasting text into this area!
</textarea>

<script>
function log(txt) {
  document.getElementById("log").appendChild(document.createTextNode(txt + "\n"));
}

function pasteIntercept(evt) {
  log("Pasting!");
}

document.getElementById("editor").addEventListener("paste", pasteIntercept, false);
</script>

<h2>Log</h2>
<textarea rows="15" cols="80" id="log" readonly="true"></textarea>
</body>
</html> 
```

# android - Android WebView没有在通过代理连接到互联网的机器上运行的模拟器上加载url

> ID：10833837
> 
> 赞同：0
> 
> 时间：2012-05-31T12:41:01.053
> 
> 标签：android, proxy, webview, avd

我正在使用从互联网上获得的以下示例代码。我在清单文件中设置了互联网权限。仍然我总是得到一个白屏，一段时间后它给出消息“网页不可用”。它在 Android 4 上运行，avd 在公司机器上运行。我的 Internet 连接工作正常，在默认浏览器上，通过我为 AVDs APN 设置添加的代理设置。

```
public class MyBrowser extends Activity{

WebView mWebView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mybrowser);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);

    mWebView.setWebViewClient(new MyBrowserClient());

    mWebView.loadUrl("www.google.com" );
}

private class MyBrowserClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}

} 
```

下面是我的 Android 清单中的内容，就在应用程序标签的上方。

```
 <uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

我可以看到有时 logCat 会引发以下错误。

05-31 18:50:17.415: W/webcore(1437): java.lang.Throwable: EventHub.removeMessages(int what = 107) 在设置 WebViewCore 之前不受支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:43:09.540

您在以下行有问题

```
mWebView.loadUrl("www.google.com" ); 
```

将其替换为

```
mWebView.loadUrl("https://www.google.com" ); 
```

它应该工作。

简而言之，您必须具有 http 或 https 前缀。

# css - CSS浮动 - 底角

> ID：10833842
> 
> 赞同：9
> 
> 时间：2012-05-31T12:41:25.793
> 
> 标签：css, css-float

我的按钮总是浮动在浏览器窗口的底角。

*后退*按钮在正确的位置，但下*一个*按钮不会正确浮动。

```
#footerback {
    width: 107px;
    background-position: top;
    padding: 0px 30px 30px 0px;
    position: fixed;
    bottom: 0px;
    float: left;    
}
#footernext {
    width: 107px;
    background-position: top;
    padding: 0px 30px 0px 30px;
    position: fixed;
    bottom: 0px;
    float: right;   
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T12:43:33.790

试试这个 CSS 把它放在右下角；

```
position:fixed;
right:0;
bottom:0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T12:49:53.223

将你的两个按钮放在另一个 div 中，并在这个 div 上应用更好的 css：

```
#footer {
    position:fixed;
    left:0;
    bottom:0;
}
#footerback,
#footernext {
    text-align: center;        
    width: 50px;
    float: left;
    border: 1px solid black;      
}
```

```
<div id="footer">
    <div id="footerback">back</div>
    <div id="footernext">next</div>
</div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-27T10:42:31.777

HTML

```
<div class="circle-div"></div> 
```

CSS

```
.circle-div {
    background-color: #314963;
    height: 40px;
    width: 40px;
    border-radius: 100%;
    position: fixed;
    bottom: 21px;
    right: 25px;
} 
```

这会在页面的右下角放置一个圆形。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T13:17:52.370

这将起作用 `position:fixed; right:0px; bottom:0; margin:0px; padding:0px;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:48:11.893

你对你的元素说他们需要一个固定的位置。然后在你说它们可以漂浮在页面上的地方添加 css。正确的答案是：准确说出他们需要去的地方。就像萨夫拉兹一样！

# c# - BinaryWriter 不寻常的十六进制

> ID：10833844
> 
> 赞同：2
> 
> 时间：2012-05-31T12:41:36.467
> 
> 标签：c#, memorystream, binarywriter

我在通过 BinaryWriter 传输数据时遇到了一些问题。

当我尝试发送

```
bw.Write(0x1a);
bw.Write(0xf8);
bw.Write(0x05); 
```

它进入输出到 0x00 - 通过

```
Client2Server._mainSock.Send(ms.ToArray()); 
```

是什么导致了这个问题？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:44:10.283

你在这里写 3 个**整数**。整数占用 4 个字节，在所示情况下，其中 3 个将为零。改为发送字节：

```
bw.Write((byte)0x1a); 
```

当然，如果你正在写字节，那么`BinaryWriter`就大材小用了——你可以只使用`Stream`.

# c# - xml序列化/反序列化有问题

> ID：10833851
> 
> 赞同：1
> 
> 时间：2012-05-31T12:42:00.303
> 
> 标签：c#, xml, windows-phone-7

我正在涉足 Windows Phone 开发，并开始接受 WP 上 Silverlight 的一些功能，但我正在努力使用 XML：

我正在尝试将一些对象序列化为 XML，然后读取所述 XML 并将其再次序列化为对象。然后我将使用它来填充列表框，方法是把一个`ObservableCollection`作为`ItemsSource`列表框的。

我已经确保数据绑定正常工作；如果我只是生成对象并将它们放入 an`Observable Collection`然后将其作为`ItemsSource`，则没有问题。似乎是我的代码的 XML 部分出错了。一切都编译并执行得很好，但列表框仍然是空的:(

此代码在应用程序启动时执行（不是很有效，但适用于我的测试）：

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        ObservableCollection<Quote> quotes = new ObservableCollection<Quote>();
        for (int i = 0; i < 10; i++)
        {
            Quote quote = new Quote()
            {
                Author = "Author #" + i.ToString(),
                QuoteText = "This is quote #" + i.ToString(),
            };

            quotes.Add(quote);
        }

        XmlWriterSettings xmlwrtrstngs = new XmlWriterSettings();
        xmlwrtrstngs.Indent = true;
        using(IsolatedStorageFile isostrg = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using(IsolatedStorageFileStream isoflstrm = isostrg.OpenFile("Quotes.xml", FileMode.Create))
            {
                XmlSerializer xmlsrlzr = new XmlSerializer(typeof(QuoteCollection));
                using(XmlWriter xmlwrtr = XmlWriter.Create(isoflstrm, xmlwrtrstngs))
                {
                    xmlsrlzr.Serialize(xmlwrtr, quoteCollection);
                }
            }
        }

        loadData();
    }

    void loadData()
    {
        try
        {
            using(IsolatedStorageFile isostrg = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using(IsolatedStorageFileStream isoflstrm = isostrg.OpenFile("Quotes.xml", FileMode.Open))
                {
                    XmlSerializer xmlsrlzr = new XmlSerializer(typeof(QuoteCollection));
                    QuoteCollection quoteCollectionFromXML = (QuoteCollection)xmlsrlzr.Deserialize(isoflstrm);
                    LstBx.ItemsSource = quoteCollectionFromXML.Quotes;
                }
            }
        }
        catch(Exception)
        {

            Console.Write("Something went wrong with the XML!");
        }

    } 
```

**QuoteCollection**

```
public class QuoteCollection : INotifyPropertyChanged
{
    ObservableCollection<Quote> quotes;
    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<Quote> Quotes
    {
        get { return quotes; }

        set
        {
            if(quotes != value)
            {
                quotes = value;
                raisePropertyChanged("Quotes");
            }
        }
    }

    protected virtual void raisePropertyChanged(string argPropertyChanged)
    {
        if(PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(argPropertyChanged));
        }
    }
} 
```

**引用**

```
public class Quote : INotifyPropertyChanged
{
    string author;
    string quoteText;
    public event PropertyChangedEventHandler PropertyChanged;

    public string Author
    {
        get
        {
            return author;
        }

        set
        {
            if(author != value)
            {
                author = value;
                onPropertyChanged("Author");
            }
        }
    }

    public string QuoteText
    {
        get
        {
            return quoteText;
        }

        set
        {
            if(quoteText != value)
            {
                quoteText = value;
                onPropertyChanged("QuoteText");
            }
        }
    }

    protected virtual void onPropertyChanged(string argProperty)
    {
        if(PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(argProperty));
        }
    }
} 
```

任何见解将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T14:56:21.170

您正在序列化 using`QuoteCollection`作为类型，但实际上写出一个`ObservableCollection<Quote>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:41:57.503

忘记将 ObservableCollection 放入我之前创建的 QuoteCollection 实例中（未在发布的代码中显示）。

# visual-studio-2010 - 在 Visual Studio 中编译 FFTW 源代码

> ID：10833852
> 
> 赞同：3
> 
> 时间：2012-05-31T12:42:16.760
> 
> 标签：visual-studio-2010, compiler-errors, fftw

最近我正在尝试在 Visual Studio 2010 中编译 FFTW 的源代码。我按照 FFTW 网站的说明进行操作。我下载了源码fftw-3.3.2.zip和对应的vs 2010包fftw-3.3-libs-visual-studio-2010.zip。

1.  我从解决方案中得到了四个项目，bench、benchf、libfftw-3.3、libfftwf-3.3

但是在编译时，我在每个项目上都遇到了以下错误： C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp.x64.Targets(514,5): error MSB8008：指定的平台工具集（Windows7.1SDK）未安装或无效。请确保选择了受支持的 PlatformToolset 值。指向以下内容

我已经尝试了 x64 和 win32 的调试/发布版本，但它们都不起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T20:40:13.163

好像不用安装Windows 7.1 SDK也能解决

1.  右键单击“libfftw-3.3”项目并选择属性
2.  转到配置属性-> 常规
3.  将“Platfrom Toolset”从“Windows7.1SDK”切换到“v100”
4.  重新编译

适用于项目“libfftwf-3.3”和“libfftw-3.3”

项目“bench”和“benchf”未能构建：

致命错误 C1083：无法打开源文件：'....\libbench2\aligned-main.c'：没有这样的文件或目录

可以通过从两个项目中删除对齐的 main.c 来解决。

您也可以使用 CMake - 我为 fftw-3.3.2 创建了这个 CMake 文件，我使用 Visual Studio 2010 x64 对其进行了测试： [https://bitbucket.org/Vertexwahn/cmakedemos/src/670f189321d89dbd61ddc8c446c91578305f9da2/fftw-3.3.2/CMakeLists。 txt?at=default](https://bitbucket.org/Vertexwahn/cmakedemos/src/670f189321d89dbd61ddc8c446c91578305f9da2/fftw-3.3.2/CMakeLists.txt?at=default)

您还需要这个 config.h 文件： [https ://bitbucket.org/Vertexwahn/cmakedemos/src/670f189321d89dbd61ddc8c446c91578305f9da2/fftw-3.3.2/config.h?at=default](https://bitbucket.org/Vertexwahn/cmakedemos/src/670f189321d89dbd61ddc8c446c91578305f9da2/fftw-3.3.2/config.h?at=default)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:52:30.147

看起来您需要安装 Windows 7.1 SDK，如果您已经安装了它，请尝试重新安装它以防它损坏。

[您可以从http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)下载 7.1 SDK

# javascript - 我应该使用 setAttribute 向元素添加属性吗？

> ID：10833853
> 
> 赞同：1
> 
> 时间：2012-05-31T12:42:20.660
> 
> 标签：javascript, setattribute, getattribute

我正在使用 JavaScript 阅读页面上的元素（各种），并在需要时对其进行修改。当我修改其中一个元素时，我想留下一个标记来说明我修改了它。然后，我可以阅读页面上的元素，如果找到那个标记，我知道它是我修改的元素之一，可以恢复它。这是对我有用的代码，但有人建议我应该使用 setAttribute 和 getAttribute 而不是我正在做的事情：

```
//hide some elements, after first leaving a marker and saving orig. val
for(var i=0; i<elements.length; i++) {
    if(should_i_hide_this_element(elements[i])) {    //external logic unimportant

        elements[i].wasModifiedByMe = true;             //mark element as modified
        elements[i].origViz = elements[i].style.visibility; //save visibility val
        elements[i].style.visibility = "hidden";          //and give it a new val
    }
} 
```

对应的恢复元素值的代码是这样的：

```
for(var i=0; i<elements.length; i++) {
    if(elements[i].wasModifiedByMe) {                 //This is one I modified
        elements[i].style.visibility = elements[i].origViz; //restore original val
        elements[i].wasModifiedByMe = false;          //mark as not modified now
    }
} 
```

问题是，我应该为我的 wasModifiedByMe 布尔值和我的 origViz 属性使用 setAttribute 和 getAttribute 吗？我目前不相信我需要为自己添加的属性使用属性函数。

在下面的线程讨论之后，我尝试了这个测试：

```
<!doctype html>
<html>
<body>
<div id="mydiv">DIV</div>
<script>
var elem = document.getElementById("mydiv");
elem.secretproperty = "not_seen_in_elements_tab_in_chrome_dev_tools";
elem.setAttribute("publicproperty","is_visible_in_elements_tab");
</script>
</body>
</html> 
```

在 chrome 开发工具的元素选项卡中，我看到 mydiv 将 publicproperty 属性显示为 div 的一部分。虽然它没有显示秘密属性。

和我想的一样。使用 setAttribute 正在设置一个 HTML 属性，该属性也反映在 javascript 对象中，但是当不使用 setAttribute 并向 javascript 宿主对象添加属性时，反射不会以其他方式进行（*到*HTML 属性）。这就是我要的。我不希望我隐藏的每个元素都突然显示一个 wasHiddenByMe="true" 属性（尽管这有其优点，但我明白了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:08:34.383

There are some issues with setting your own properties of DOM elements, covered by [this article on perfectionkills.com](http://perfectionkills.com/whats-wrong-with-extending-the-dom/). It talks about extending DOM element prototypes, but the sections

*   [Host objects have no rules](http://perfectionkills.com/whats-wrong-with-extending-the-dom/#host_objects_have_no_rules),
*   [Chance of collisions](http://perfectionkills.com/whats-wrong-with-extending-the-dom/#chance_of_collisions) (see also [Don’t modify objects you don’t own](http://www.nczonline.net/blog/2010/03/02/maintainable-javascript-dont-modify-objects-you-down-own/)) and
*   [IE DOM is a mess](http://perfectionkills.com/whats-wrong-with-extending-the-dom/#ie_dom_is_a_mess)

are relevant to you. Yet, if your are aware of the issues I think it is OK - it is the only way to accociate custom objects to DOM elements.

If you can use HTML5 techniques, you also may have a look at [data](https://stackoverflow.com/q/10121469/1048572) [attributes](https://stackoverflow.com/q/992115/1048572). For simple boolean markers they may be the superior approach.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:50:53.543

对于向 HTML 元素添加属性，W3C 标准是`setAttribute`. 您不能将其用于*`element`*.style。*`property`*.

但是，通过简单地设置属性*`element`*.* `attribute`* 仍然有效。这不是一个真正的标准，因此使用 可能会更好`setAttribute`，但这取决于您的喜好。

# javascript - 如何使用 Jquery 解析以下 JSON 数据

> ID：10833854
> 
> 赞同：0
> 
> 时间：2012-05-31T12:42:26.223
> 
> 标签：javascript, jquery, json

我是 JQuery 的新手。我有来自服务器的这个 JSON 响应，我该如何解析它？

```
[
    {
        "note": {
            "created_at": "2012-04-28T09:41:37Z",
            "updated_at": "2012-04-28T09:41:37Z",
            "text": "aaaaaaaaaaafdafasd fasfasd dfa sdfasf asdfa fasdfda",
            "lng": 44.5159794497071,
            "id": 7,
            "deleted": false,
            "user_id": 1,
            "note_type": "text",
            "lat": 40.1884140543842
        }
    },
    [ ... more JSON ...]
] 
```

我怎么能解析这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:43:46.007

您必须将请求的数据类型设置为“json”，并且数据将已经在您的成功回调中解析。

你现在需要知道的一切都在[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这是一个非常简单的示例，说明您可以做什么：

```
$.ajax({
    url: url, // the service URL. Must answer proper JSON
    data: {  // the parameters of the request. This should be adapted to your case
        param1: value1,
        param2: value2
    },
    dataType: "json",
    type: "POST",
    success: function(resultData) {
        // here, resultData is your parsed json
    },
    error: function() {
        // handle error here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:44:52.160

[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

使用这个 jQuery 方法来解析 JSON 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:48:22.607

如果服务器输出实际的 JSON（问题中的示例有错误）并且它具有正确的内容类型（`application/json`而不是`text/html`PHP 默认的），那么您不需要做任何事情。

jQuery 将为您解析它（并在成功处理程序中为您提供一个 JavaScript 对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T12:49:56.973

那*不是*JSON。您发布的内容看起来像一个 PHP 数组，其中包含括号以尝试将其转换为 JSON。

将来使用[此站点](http://jsonlint.com/)验证您的 JSON。

现在，要将您的 PHP 数组转换为 JSON，请使用[`json_encode()`](http://us3.php.net/json_encode)它并将其发送到带有特定标头的浏览器。

```
$array = array( 'test' => 'sure' );
header('Content-type: application/json');
print json_encode($array);
exit; 
```

现在，您将拥有可以在 JavaScript 中使用的实际 JSON。

```
$.get(  'yourFile.php',
        function(data){
            console.log(data);
        }
); 
```

# django - 如何调试 Django i18n？

> ID：10833855
> 
> 赞同：0
> 
> 时间：2012-05-31T12:42:28.897
> 
> 标签：django, internationalization

我继承了一个需要 i18n 的 Django 项目。我已经完成了 i18n 所需的所有通常操作，这些操作通常在其他项目中执行并且通常有效。但是在这个上它不起作用，它是 Django 1.3，所以我去了 i18n 上的文档并按照所有步骤操作，但它不起作用。

我不知道可能出了什么问题，因为我自己没有设置所有项目我不知道它的哪个部分可能会破坏 i18n。

在 base.html 中，我添加了从文档中选择的典型语言 + LANGUAGE_CODE 标签以获得一些反馈：

```
<form action="/i18n/setlang/" method="post">
{% csrf_token %}
<input name="next" type="hidden" value="{{ redirect_to }}" />
<select name="language">
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
<option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
{% endfor %}
</select>
Lang:{{ LANGUAGE_CODE }}
<input type="submit" value="Go" />
</form> 
```

无论我做什么，LANGUAGE_CODE 总是返回默认的 en-us 或我在设置中设置的任何内容。

我应该按什么顺序检查？从哪里开始，改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:49:22.027

根据[文档](https://docs.djangoproject.com/en/dev/ref/settings/#language-code)， LANGUAGE_CODE 设置为安装语言代码。您确定您已在设置文件中将其从 en-us 更改了吗？

您是否尝试过在设置文件的末尾打印语言代码，然后在非守护程序模式下运行，以便看到它的输出？就我个人而言，我使用多部分配置文件，并且之前遇到过一些问题，即后面的设置文件已经改变了一些我希望进一步工作的东西。有这种可能吗？

如果它在设置文件的末尾看起来是正确的，那么它可能没有正确地输入到模板中。你可以尝试像[这样](https://stackoverflow.com/a/433255/15369)通过自己来确定。

要检查的另一件事；你确定这不是你需要的 settings.LANGUAGE_CODE 吗？我不记得这是否只是在我头顶的模型中。

# plot - 如何在绘图上指定 xticks/xlabel 的格式

> ID：10833863
> 
> 赞同：1
> 
> 时间：2012-05-31T12:43:01.400
> 
> 标签：plot, matplotlib, label

在为 matplotlib 设置绘图时，我遇到了非常大的数字。

在一个情节中，这些被转换为我喜欢的科学格式，在另一个情节中，它们没有被转换。我如何指定这种行为？

我喜欢它的例子： ![在此处输入图像描述](../Images/22603a2bb2a7f760c8adadfb5abd653b.png)

它不像我想要的那样工作的例子： ![在此处输入图像描述](../Images/5e66f821ad4d8d4ee34881b9a5180a66.png)

我正在使用 matplotlib 版本 0.99.1.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:47:08.863

使用[plt.ticklabel_format](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.ticklabel_format)：

例如：

```
plt.ticklabel_format(style='sci',axis='x',scilimits=(0,0)) 
```

# visual-studio - 等效于 RAD Studio XE2 的 Visual Studio WordLight 插件

> ID：10833869
> 
> 赞同：3
> 
> 时间：2012-05-31T12:43:11.493
> 
> 标签：visual-studio, delphi, syntax-highlighting, delphi-xe2

你知道除了 RAD Studio XE2之外是否有[WordLight的等价物？](http://code.google.com/p/wordlight/)我必须在 Delphi 中处理一些遗留代码，所以这会有很大帮助。

这个插件基本上做的是突出显示当前鼠标选择的每一次出现，当您想检查谁使用了哪个变量并且您正在处理您一无所知的部分代码时，这非常有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T17:45:46.127

RAD Studio XE2 包含该功能，只需选择（突出显示）该单词，然后按`Ctrl`+ `F`，最后按两次向下箭头，就像此图所示。

![在此处输入图像描述](../Images/f2225dfa426e867c1497195d32429604.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:13:36.887

[CNWizard](http://cnpack.org)包有源代码高亮插件，其中包括该功能。

![源突出显示增强](../Images/1ee21a4698293048fcc86b0a17151e99.png)

# c# - 构造函数中的派生设置为“null”。基类重载构造函数不传递设置？

> ID：10833872
> 
> 赞同：1
> 
> 时间：2012-05-31T12:43:22.977
> 
> 标签：c#, base, derived

我创建了一个具有自己派生设置的派生类。

```
public abstract class BaseClass
{
    public BaseClass(Game1 game, BaseClassSettings settings) 
    {
        if (settings == null)
        {
            Console.WriteLine("BASE PANIC!");
        }
    }

    public abstract BaseClassSettings Write();
}

public abstract class BaseClassSettings
{
    public abstract BaseClass Load(Game1 game, BaseClassSettings settings);
} 
```

在实例化类时，我重载构造函数以调用基类并创建正确派生设置的新实例。

```
public class DerivedFoo : BaseClass
{
    public DerivedFoo(Game1 game, DerivedFooSettings settings) 
    :base(game, settings == null ? new DerivedFooSettings() : settings) 
    {
        if (settings == null)
        {
            Console.WriteLine("DERIVED PANIC!");
        }
    }

    public override BaseClassSettings Write()
    {
        DerivedFooSettings settings = new DerivedFooSettings();

        return settings;
    }
}

public class DerivedFooSettings : BaseClassSettings
{
    public override BaseClass Load(Game1 game, BaseClassSettings settings)
    {
        return new DerivedFoo(game, settings as DerivedFooSettings);
    }
} 
```

这种方法的问题是三级运算符只适用于基类，不会将新实例传递给派生类的构造函数。（“设置”保持为空）

如何自动传递设置而不必在派生类的构造函数方法中复制三级运算符？

我无法将设置存储在基类中，因为它们的类型不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:47:31.407

这很难看，但是您可以更改`base`调用以分配要传递*回*的值`settings`：

```
public DerivedFoo(Game1 game, DerivedFooSettings settings) 
: base(game, settings = (settings == null ? new DerivedFooSettings() : settings)) 
```

请注意，这不会改变传递*给*构造函数的`DerivedFoo`内容——它只是改变构造函数中`settings`参数*的*值。

当然，如果`BaseClass`暴露了一个`Settings`属性——可能是受保护的——并在构造函数期间设置它，你可以只在构造函数体中使用*属性*值。`DerivedFoo`这会更干净，IMO - 我认为我从来*没有*在这样的构造函数链调用中使用过赋值表达式......

# asp.net-mvc - 在 Web 应用程序 (MVC) 中使用 WISON OR200

> ID：10833877
> 
> 赞同：0
> 
> 时间：2012-05-31T12:43:42.493
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-2, fingerprint

几天前，我为我正在开发的网络系统购买了 WISON OR200 传感器。

我使用了企业发送给我的 SDK，并且一直在窗口应用程序中进行测试并且工作正常，但我需要将它用于 Web 应用程序，但我不知道该怎么做。

这是 Windows 窗体应用程序：

```
WisSensorN WisObj = new WisSensorN();  // instance of wison object 
```

形式的对象：

```
 private System.Windows.Forms.Button Enroll;
    private System.Windows.Forms.Button Identify;
    private System.Windows.Forms.PictureBox FingerPic;
    private System.Windows.Forms.Button Stop;
    private System.Windows.Forms.TextBox Status; 
```

Load method() //Open() 指纹需要DataEvent和SetDisplay

```
private void Form1_Load(object sender, EventArgs e)
    {
        WisObj.Open();
        WisObj.DataEvent += new _IWisSensorNEvents_DataEventEventHandler(WisObj_DataEvent);
        WisObj.SetDisplay((int)FingerPic.Handle); 
         // i can´t do WisObj.SetDisplay((int)FingerPic.Handle) on mvc web app
         // because i can't get FingerPic object from view.
    }

    private void WisObj_DataEvent(WisSensorNLibLib.DATA data, string str)
    {
        switch (data)
        {
            case DATA.DATA_ENROLL:
                // save the base 64 string of finger image
                break;

            case DATA.DATA_IDENTIFY_CAPTURE:
                //validation
                break;

            case DATA.DATA_VERIFY_CAPTURE:
                break;
        }
    }

private void Enroll_Click(object sender, EventArgs e)
    {
       WisObj.StartEnroll(); // it used for save the fingerprint
    }

private void Identify_Click(object sender, EventArgs e)
    {
        WisObj.IdentifyCapture(); 
       // it used to activate the sensor. When i did this on controller action,
       // nothing happen. This is because the property setDisplay was not set 
    } 
```

有什么建议么？我能做些什么？

我向我购买指纹读取器的公司询问是否有用于 Web 应用程序的 SDK，但从未回答。

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:06:50.973

我认为你走在一条非常错误的道路上。您不能简单地通过浏览器使用设备。在浏览器中运行的 HTML/javascript“应用程序”无法连接到任何本地资源，例如 I/O 端口或 Windows 事件。您将需要特殊技术，例如 ActiveX 或 Java 小程序来与客户端计算机上的设备进行通信。

您的网站是 MVC 还是普通的 ASP.NET 甚至 PHP 都无关紧要。如果您不知道 ActiveX（和校友）的用途以及它有什么缺点，您应该寻找可以帮助您解释情况并可能开发合适解决方案的专业人士。

# visual-studio - Visual Studio 在结束标记后删除空格

> ID：10833882
> 
> 赞同：0
> 
> 时间：2012-05-31T12:43:53.077
> 
> 标签：visual-studio, formatting, resharper

当我使用格式化快捷键 ctrl + k + d 时，Visual Studio（或 Resharper）会删除标记后的空格。

示例 - 在使用格式化快捷方式之前：

```
<p>Sample text <b><span class="sometext"></span></b> fooo</p> 
```

示例 - 使用格式化快捷方式后：

```
<p>Sample text <b><span class="sometext"></span></b>fooo</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:22:16.640

Ctrl+K+D 运行 Visual Studio 格式化程序。要使用 ReSharper 一，请使用 Ctrl+E+C。但请注意，在 HTML 中它只能为您修复缩进 - 其他空格或新行将保持不变。

PS 重新格式化的另一种快捷方式是 Ctrl+E+F。第一次调用它时，您选择配置文件（选择仅重新格式化并默认启用使用此配置文件进行静默清理）。下次当您按 Ctrl+E+F 时，它只会默默地重新格式化您的代码，而不会出现对话框。

# .htaccess - 如何使用 .htaccess 将两个域重定向到同一个子文件夹？

> ID：10833883
> 
> 赞同：0
> 
> 时间：2012-05-31T12:43:59.607
> 
> 标签：.htaccess, redirect, dns

如果您想使用 .htaccess 将两个单独的域重定向到同一个子文件夹，您可以通过更改域和文件夹来使用下面的代码以匹配您的情况。

```
<IfModule mod_rewrite.c>

RewriteEngine On
Options +FollowSymlinks
RewriteBase /

# Redirect PuistoSahlynSM.fi

RewriteCond %{HTTP_HOST} ^(www\.)?puistosahlynsm\.fi
RewriteCond %{REQUEST_URI} !puisto/
RewriteRule ^(.*)$ puisto/$1 [L]

# Redirect PuistoSählynSM.fi

RewriteCond %{HTTP_HOST} ^(www\.)?xn--puistoshlynsm-hfb\.fi
RewriteCond %{REQUEST_URI} !puisto/
RewriteRule ^(.*)$ puisto/$1 [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:49:41.907

您需要找到您的国际化域名的 Punycode 名称。

[维基百科关于国际化域名的文章](http://en.wikipedia.org/wiki/Internationalized_domain_name)

[来自 WP 文章的 IDNA 转换器](http://idna-converter.com/)

# sap - SAP NetWeaver 流程 集成 (pi)

> ID：10833892
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:44:34.200
> 
> 标签：sap

如何检查 sap pi 是否正在运行？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:04:26.607

只需转到 SAP PI 的 Web 起始页`http://<host>:<port>/rep`

从那里您应该能够深入了解主要监控功能，以查看有关 ABAP 和 JAVA 堆栈及其运行状况的所有信息。

# javascript - Sencha Touch 2 面板未拉伸至全高

> ID：10833893
> 
> 赞同：1
> 
> 时间：2012-05-31T12:44:35.330
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我在 sencha touch 2 中制作了这个应用程序

```
Ext.application({
    name: "SOMENAME",
    launch: function () {
        //Ext.Viewport.setLayout({type:'fit',align:'stretch'});
        var mainPanel = Ext.create('Ext.Container', {
            layout: 'vbox',
            items: [
                {
                    xtype: 'panel',
                    layout: {
                        type: 'card',
                        animation: 'slide'
                    },
                    height: 300,
                    id: 'nooPanel',
                    items: [
                        {
                            html: 'Page 1'
                        },
                        {
                            html: 'Page 2 asdasdasd'
                        },
                        {
                            html: 'Page 3 asdq323434'
                        }
                    ]
                },
                {
                    xtype: 'button',
                    text: 'Next',
                    handler: function (button, e, eOpts) {
                        var panel = Ext.getCmp('nooPanel');
                        var totalItems = panel.getInnerItems().length;
                        var index = panel.getInnerItems().indexOf(panel.getActiveItem());
                        panel.setActiveItem((index + 1) % totalItems);

                    }
                }
            ]
        });
        Ext.Viewport.add(mainPanel);
        mainPanel.down('panel').setActiveItem(0);
    },
    init: function () {
    }
}) 
```

但问题是，如果我不将高度设置为 300 的面板上的布局是`card`它的高度变为 0 并且
即使在设置布局以适合视口之后也没有显示任何内容我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:04:29.510

当您将项目放入带有 的容器时`layout: 'vbox'`，Sencha Touch 2 需要知道这些子项目之间的高度比是多少。

如果您想在 vbox 中有一个全高项目，请将此配置添加到该项目，而不是`height: 300`使用`flex:1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:07:18.717

深入研究我发现`flex`的配置是配置的一部分。通过这个属性，我可以定义具有布局
的容器内所有元素的比率， 所以如果我将 flex 设置为 3 个不同的项目为 10、1、1，那么第一个将占用空间.. 有点为我工作.. 但仍在寻找最终答案`vbox`
`(10/(10+1+1))*100 %`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:07:28.233

使用“fit”时，容器中只能有一件物品。我添加了几个 'flex:' 值来给出我认为你想要的。这是代码，它在[SenchaFiddle](http://www.senchafiddle.com/#CRfRT)上进行测试。

```
Ext.Loader.setConfig({
    启用：真
});

分机应用程序（{
    名称：“某人”，
    启动：函数（）{
        //Ext.Viewport.setLayout({type:'fit',align:'stretch'});
        var mainPanel = Ext.create('Ext.Container', {
            布局：'vbox'，
            项目： [
                {
                    xtype：'面板'，
                    弹性：20，
                    布局： {
                        类型：'卡'，
                        动画：'幻灯片'
                    },
                    //高度：300,
                    id: 'nooPanel',
                    项目： [
                        {
                            html: '第 1 页',
                            弹性：1
                        },
                        {
                            html: '第 2 页 asdasdasd'
                        },
                        {
                            html: '第 3 页 asdq323434'
                        }
                    ]
                },
                {
                    xtype: '按钮',
                    文本：'下一个'，
                    弹性：1，
                    处理程序：功能（按钮，e，eOpts）{
                        var panel = Ext.getCmp('nooPanel');
                        var totalItems = panel.getInnerItems().length;
                        var index = panel.getInnerItems().indexOf(panel.getActiveItem());
                        panel.setActiveItem((index + 1) % totalItems);

                    }
                }
            ]
        });
        Ext.Viewport.add(mainPanel);
        mainPanel.down('panel').setActiveItem(0);
    },
    初始化：函数（）{
    }
})

```

# c# - JRC 引擎处理的文档无法在 C++ 堆栈中打开

> ID：10833894
> 
> 赞同：35
> 
> 时间：2012-05-31T12:44:36.540
> 
> 标签：c#, asp.net, localhost

我用.net4.0在vs2010中创建了一个水晶报告。当我发布网站时，它会抛出错误“无法在 C++ 堆栈中打开由 JRC 引擎处理的文档”。我在服务器上发布了该网站，并尝试从客户端访问它，我确实在 app_code 中保留了 .rpt 文件，但再次遇到相同的错误。所以我创建了一个文件夹 wwwroot 并在该文件夹中保存了 asp_client 和 website 文件夹，并提供了 wwwroot 的物理路径。一切正常，除了水晶报告。在.cs文件中代码如下：

```
 ReportDocument rptDoc = new ReportDocument();
    DataSetForCrystalReport ds = new DataSetForCrystalReport();
    DataSetForCrystalReport dsHeader = new DataSetForCrystalReport();
    DataTable dt = new DataTable();
    DataTable dtHeader = new DataTable();
    dt.TableName = "dtBill";
    string ReceiptNo = Request.QueryString["ReceiptNo"];
    dt = getAllOrders(ReceiptNo).Tables[0];
    dtHeader = TblcompanysettingsService.GetOrganizationDetails();
    ds.Tables[1].Merge(dt);
    ds.Tables[2].Merge(dtHeader);
    rptDoc.Load(Server.MapPath("crBill.rpt"));
    rptDoc.SetDataSource(ds);
    CrystalReportViewer1.ReportSource = rptDoc; 
```

错误堆栈跟踪：

```
[COMException (0x80041811): Unsupported Operation. A document processed by the JRC engine cannot be opened in the C++ stack.]
   CrystalDecisions.ReportAppServer.ClientDoc.ReportClientDocumentClass.Open(Object& DocumentPath, Int32 Options) +0
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.Open(Object& DocumentPath, Int32 Options) +147
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +422

[CrystalReportsException: Load report failed.]
   CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +549
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob) +1613
   CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename) +189
   GenerateBill.Page_Load(Object sender, EventArgs e) in e:\ShareFolder\Movie\wwwroot\Website\GenerateBill.aspx.cs:33
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-06-13T18:38:12.970

检查 .rpt 文件的路径！错误描述与其真正原因无关。它只是找不到您的 .rpt 文件！

在我的情况下，路径必须是位于 Reports 子文件夹中的 .rpt 文件：

```
Server.MapPath("~/Reports/InvoiceRegular.rpt"); 
```

为我工作。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-10T17:07:35.887

这对我有用

1.  右键单击 Rpt 文件。
2.  选择属性
3.  改变了

    一个。将动作构建为“内容”

    湾。复制到输出目录为“不复制”

    C。为自定义工具和自定义工具命名空间留空

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-13T06:39:42.297

只需执行这些步骤

(1) 右键单击​​您的“.rpt”文件选择“**属性**”

1.a) 将动作构建为“**内容**”

1.b）复制到输出目录为“**始终复制**”

(2)检查.rpt文件的路径 **Server.MapPath("Your path");**

例如：`Server.MapPath("~/Reports/MyReport.rpt");`

注意：如果带有报表查看器的 rpt 和 aspx 页面都在同一个文件夹中，则无需提供完整路径，您可以在 Server.MapPath 中仅提供 filename.rpt 。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-07T15:23:49.267

我不知道这是否对其他人有帮助，但我遇到了这个问题，结果证明这是一个如此简单的解决方法。我打错了 .rpt 文件的文件名...文件名中的两个单词之间有一个空格（我通常不会因为这个原因而这样做）但是当我在代码中包含该名称时，我已经离开了空格出去。更正了文件名，问题消失了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-01T07:54:34.423

找到了解决方案，我首先使用带有自己的水晶报告的 Visual Studio 2005，然后我使用从 SAP 下载的单独水晶报告升级到 VS2010。我从 SAP 研究并发现：

由于每个版本的 Crystal Reports 都有自己的特定运行时必须正确部署，因此部署的运行时必须与项目中引用的 Visual Studio .NET 的 Crystal Reports 程序集一致。

所以我卸载了以前的版本并且只使用了一个版本并且它有效。:) 感谢 ta.speot.is 的关心。这从来都不是编码问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-30T14:40:21.653

只需将 .rpt 文件（crystl 报告模板）从本地计算机复制到特定服务器/计算机的文件夹，我确信您可以运行解决问题 CrystalDecisions.Shared.CrystalReportsException：加载报告失败。

对我来说，它运行良好，服务器端没有错误。我的应用程序能够根据代码存储 pdf 文件以共享路径。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-25T14:13:19.317

我发现了另一组情况，在这些情况下会出现这个相当无益的错误。

如果您在 Visual Studio 中按 F5 运行/调试您的 Web 应用程序但仍然在 Crystal Reports (2011) 中打开报表，您将收到错误消息。

今天把我逼疯了大约一个小时！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-03T03:18:46.200

为我工作：从本地计算机复制 .rpt 文件覆盖主机上的 .rpt 文件，然后它运行良好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-01T03:56:00.627

这只是发生在我身上，经过数小时的头痛后，我发现这是一个文件权限问题。由于某种原因，当从我们的 CR 开发服务器复制到共享的自定义 .rpt 目录时，文件的权限都被提升了，我不得不将几个用户组的权限添加回文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-06T11:41:26.577

将文件夹 (aspnet_client) 从 (C:\inetpub\wwwroot) 复制并粘贴到网站文件夹，并确保 .rpt 文件位于同一文件夹中

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-22T15:07:50.983

确保文件路径正确，如提到的@serop。我还注意到报告文件夹不会在哪里发布。所以不得不手动发布报表文件夹。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-09T07:08:20.247

我对 ASP.NET 也有同样的问题。请检查您的报告路径。那将是错误的道路。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-28T06:47:37.607

请检查您的**.rpt**文件是否存在。如果没有，请从本地复制到托管文件夹，它将开始工作。

# ruby-on-rails - 在 deploy.rb 中添加预编译的位置

> ID：10833898
> 
> 赞同：0
> 
> 时间：2012-05-31T12:44:58.183
> 
> 标签：ruby-on-rails, capistrano

我会将预编译信息放在我的 deploy.rb 文件中的什么位置。我需要更改什么才能使其正常工作？我能够让我的应用程序运行使用

```
RAILS_ENV=production rake assets:precompile 
```

预编译信息

```
after "deploy:restart", "deploy:precompile"

    namespace :deploy do

      desc "Compile assets"
      task :precompile, :roles => :app do
        run "cd #{release_path} && rake RAILS_ENV=#{rails_env} assets:precompile"
      end

     end 
```

我的部署.rb

```
 # The name of your app
set :application, "sample_app"

# The directory on the EC2 node that will be deployed to
set :deploy_to, "/var/www/#{application}"

set :keep_releases, 3

# deploy with git
set :scm, :git
set :repository,  "git@github.com:username/sample_app.git"
set :git_shallow_clone, 1
set :branch, "master"
set :use_sudo, true

# gets ssh info
set :user, "ubuntu"
ssh_options[:keys] = ["/Users/User/Documents/ServerKeys/key.pem"]
ssh_options[:forward_agent] = true
default_run_options[:pty] = true

# The address of the remote host on EC2 (the Public DNS address)
set :location, "0.0.0.0"

# setup some Capistrano roles
role :app, location
role :web, location
role :db,  location, :primary => true

after 'deploy:update_code', 'deploy:symlink_db'

namespace :deploy do

desc "Restart Application"
task :restart, :roles => :app do
  run "touch #{deploy_to}/#{shared_dir}/tmp/restart.txt"
end

desc "Symlinks the database.yml"
task :symlink_db, :roles => :app do
  run "ln -nfs #{deploy_to}/shared/config/database.yml
  #{release_path}/config/database.yml"
end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:48:48.027

Capistrano（v2.8.0 及更高版本）包含在部署中处理此问题的配方。将以下行添加到 Capfile：

```
load 'deploy/assets' 
```

[http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

# jquery - Jquery Datepicker 仅设置相应日期前后的 3 个日期

> ID：10833900
> 
> 赞同：1
> 
> 时间：2012-05-31T12:45:19.243
> 
> 标签：jquery, datepicker, maxdate, mindate

我使用了两个 jquery 日期选择器。
在第一个日期选择器中，我选择“2012 年 3 月 18 日”之类的日期，下一个日期选择器应仅显示从 2012 年 3 月 15 日到 2012 年 3 月 21 日的日期。
它应该只在特定日期之前和之后添加 3 天（“18-MAR-2012”）我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:41:00.657

```
$(function(){
    $('#datepicker').datepicker({
        onSelect: function(dateText, inst) {
            var threeDays = 259200000;
            $('#datepicker2').datepicker("option", "minDate", new Date(Date.parse(dateText)-threeDays));
            $('#datepicker2').datepicker("option", "maxDate", new Date(Date.parse(dateText)+threeDays));
            $('#datepicker2').datepicker("setDate", dateText);
        }
    });
    $('#datepicker2').datepicker();
}); 
```

...259200000 是以微秒为单位的 3 天。每次您在第一个日期选择器中选择一个日期时，它都会限制 2\. 中的范围。不幸的是，如果我遗漏了`$('#datepicker2').datepicker("setDate", dateText);`，第二个日期选择器中的日期将设置为最后一个可能的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:21:22.147

这与范围日期选择器有关。我找到了解决方案，可能会帮助你。工作小提琴在[这里](http://jsfiddle.net/hS6aX/1/)（小提琴中缺少样式）。在这里，我在第一个日期选择器的“onSelect”函数中设置了下一个日期选择器的限制。

```
var d;var tempdate; var tempdate1; var da; var da1;
$('#nam1').datepicker({
    minDate: 0,
    dateFormat: 'd/m/yy',
    buttonImageOnly: true,
    showAnim: 'slideDown',
    duration: 0,
    onSelect: function(dateStr) {
        d = $.datepicker.parseDate('d/m/yy', dateStr); //Get selected date
        tempdate = new Date(d);
        tempdate1 = new Date(d);
        tempdate.setDate(tempdate.getDate() - 3);    //Subtracted 3 days
        tempdate1.setDate(tempdate1.getDate() + 3);  // added 3 days 
        da = new Date(tempdate);
        da1 = new Date(tempdate1);
    }
});

$('#nam2').datepicker({
    dateFormat: 'd/m/yy',
    buttonImageOnly: true,
    showAnim: 'slideDown',
    duration: 0,
    beforeShow: function(input)
        {
            //setting min and max date for second datepicker
            if(da1 != undefined) return { minDate: da, maxDate: da1 }; 
        }
});​ 
```

有更好的方法来处理日期变量。自己试试吧。

# ruby-on-rails - 自定义设计宝石（Rails）

> ID：10833902
> 
> 赞同：0
> 
> 时间：2012-05-31T12:45:21.613
> 
> 标签：ruby-on-rails, devise

我正在尝试在注册表单中添加一个新字段“注册码”以及电子邮件/密码。（我在单独的数据库中有注册码字段，只有有效的注册码/电子邮件对才能与注册一起使用）

我无法为 devise gem 所做的操作找到任何控制器。

我如何定制设计来实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:57:03.303

看来您的问题基本上与设计本身无关（除了观点）。要验证您的注册码/电子邮件对，您肯定需要将其添加为验证。

验证注册码的简单方法可能是：

```
class User
  validate :validate_registration_code

  private
  def validate_registration_code
    reg_code =  RegistrationCode.find_by_code(registration_code)
    unless reg_code.email == record.email
      errors.add(:registration_code, "Invalid registration code for #{record.email}")
    end
  end
end 
```

您可能还想编写简单的自定义验证器：

```
class RegistrationCodeValidator < ActiveModel::Validator
  def validate(record)
    # actual reg code validation
    # might look like:
    reg_code =  RegistrationCode.find_by_code(record.registration_code)
    unless reg_code.email == record.email
      record.errors[:registration_code] << "Invalid registration code for #{record.email}"
    end
  end
end

# in your User model
class User
  # include registration code validator
  include RegistrationCodeValidator
  validates_with MyValidator
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:31:41.533

Devise 将其控制器保留在 gem 的幕后。如果你想添加一个动作或修改一个动作，你必须继承它并在路由中做一些工作以将动作传递给你的控制器。

但是，您不需要这样做来添加字段。见goshakkk的回答

# layout - 在 PhpStorm :: 选项卡行中单击时重新排序并在拖放时跳转

> ID：10833906
> 
> 赞同：0
> 
> 时间：2012-05-31T12:45:50.923
> 
> 标签：layout, tabs, split, phpstorm

现在处理标签很疯狂！

我经常使用拆分布局/工作区。主要是我垂直分割。过了一会儿，我剩下 10 个标签，右边 10 个标签

1.  如果我尝试通过拖动来重新排序选项卡，它下面的选项卡（我想放下选项卡的地方）会跳来跳去并闪烁。
2.  如果我单击一个选项卡（一行）所有行重新排序...什么 * ？如何保持这样的概览。
3.  我无法从一个视图拖到另一个视图。

所以我的相关问题是......

关于 1\. 我做错了什么吗？
关于 2\. 是否有一些设置可以禁用此重新排序？
关于 3\. 见编辑

例如，Sublime Text 2 非常自然地完成了这一切。

**编辑**
我发现我可以将标签从一侧拖到另一侧，但我需要先将它向下拖一点，这样标签才会“松动”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:02:23.790

目前还没有修复，这些是已知问题：

*   [http://youtrack.jetbrains.com/issue/IDEA-22546](http://youtrack.jetbrains.com/issue/IDEA-22546)
*   [http://youtrack.jetbrains.com/issue/IDEA-84887](http://youtrack.jetbrains.com/issue/IDEA-84887)

一种解决方法是在左/右或单行选项中使用选项卡。

# c#-4.0 - 从 c#.net 控制台应用程序在注释提示符中运行命令

> ID：10833910
> 
> 赞同：0
> 
> 时间：2012-05-31T12:45:54.220
> 
> 标签：c#-4.0, command-prompt

我只想使用 c#.net 代码在命令提示符下运行带有参数的查询？

是否可以通过 c# 代码中的命令提示符将文件从一个路径复制到另一个路径

等待您的宝贵命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:49:18.690

[如何在 C# 中执行命令](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)

[有用的命令](http://www.bleepingcomputer.com/tutorials/windows-command-prompt-introduction/)

# php - php中的文本到语音

> ID：10833911
> 
> 赞同：3
> 
> 时间：2012-05-31T12:46:00.330
> 
> 标签：php, jquery, text-to-speech

我有一个 php 和 jquery 项目。我需要做的最后一件事是，当用户单击按钮时，用户名是文本，PC 将文本名称转换为声音并播放到 PC 扬声器。有任何类或插件可以帮助做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T12:56:42.357

试试这个：

[http://www.masnun.me/2009/12/14/googles-text-to-speech-api-a-php-wrapper-class.html](http://www.masnun.me/2009/12/14/googles-text-to-speech-api-a-php-wrapper-class.html)

这是它的演示实现。

网址：[http ://stuffthatspins.com/tag/php-tts/](http://stuffthatspins.com/tag/php-tts/)

演示：[http ://stuffthatspins.com/stuff/php-TTS/](http://stuffthatspins.com/stuff/php-TTS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:10:00.920

我从 jquery 中找到了一个可以解决我的问题的插件。

[http://www.jtalkplugin.com/](http://www.jtalkplugin.com/)

谢谢大家的回复

# java - 通过 String 声明对象类型

> ID：10833915
> 
> 赞同：0
> 
> 时间：2012-05-31T12:46:18.297
> 
> 标签：java, mysql, string, jdbc

这是我的功能：

```
private boolean CheckPassword(String type, String login, String passwordHash) {
    EntityManagerFactory entityManagerFactory 
            = Persistence.createEntityManagerFactory("kwestionariuszFor" + type);
    EntityManager entityManager 
            = entityManagerFactory.createEntityManager();
    type = type.substring(0, 1).toUpperCase() + type.substring(1, type.length());
    List<Object> entities 
            = entityManager.createNamedQuery(type + ".findByLogin").setParameter("login", login).getResultList();
    if (passwordHash.equals(entities.get(0).Password)) {
        return true;
    }
    else {
        return false;
    }
} 
```

Java 不“知道”任何表中都有 IS Password 列。我在想告诉它的方式可能是这样的：

```
List<type.toClass()> 
```

或者什么...有什么办法可以实现我想要的吗？我不想创建如果，如果，如果之后... -_-'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:06:36.887

您必须为代表数据库表的所有类创建一个通用类型。

像这样：

```
public abstract class PasswordObject {
    private String password;

    public PasswordObject(String password) {
        this.password = password;
    }

    public String getPassword() {
        return password;
    }
} 
```

我不知道该方法`createNamedQuery`是否能够返回 a `List<PassowrdObject>`，但如果不能，您可以像这样转换它（只要这样做是安全的，您只能通过使用它的方式来判断）：

```
PasswordObject po = (PasswordObject) entities.get(0);
String password = po.getPassword(); 
```

# c# - 如何更改列表框中单词的颜色

> ID：10833916
> 
> 赞同：1
> 
> 时间：2012-05-31T12:46:18.783
> 
> 标签：c#, .net, winforms, colors, listbox

我用一个文本框制作了一个表单，它接受一个单词并搜索一堆句子以查看其中是否包含该单词。之后我必须出现这些句子并突出显示该单词。我的计划是制作一个 ListBox 并添加里面的句子。我的问题是如何突出显示这个词（通过改变我想的颜色）以便区分它。

有没有更好的方法？我选择了 ListBox，所以我可以选择我正在寻找的句子。

***编辑***

根据@Thorsten Dittmar 的指示，创建一个所有者绘制的列表框。

```
public partial class Form1 : Form
    {
        private List<string> _items;

        public Form1()
        {
            InitializeComponent();
            _items = new List<string>();
            _items.Add("One");
            _items.Add("Two");
            _items.Add("Three");
            listBox1.DataSource = _items;
        }

        private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            e.DrawBackground();
            e.DrawFocusRectangle();
            e.Graphics.DrawString(_items[e.Index],
                new Font(FontFamily.GenericSansSerif,
                    8, FontStyle.Bold),
                    new SolidBrush(Color.Red), e.Bounds);
        }
    } 
```

我将如何拆分句子以便只画一个单词？

***编辑2***

我最终这样做的方式是制作两个单独的组件，以组合我的选择。一个是`ListBox`所有句子都是彩色的，并且可以选择其中一个，另一个是`RichBox`带有单独彩色单词的选项，因为使用 the 很难实现这一点`ListBox`（至少对我而言）。

我实现这一点的方法是使用一个布尔数组来指示每个句子中应该为哪个单词着色。

```
for (int i = 0; i < words.Length; i++)
{
  if (segments[i]) //<-boolean array
  {
     rich.SelectionColor = Color.Red;
     rich.AppendText(words[i] + " ");
     rich.SelectionColor = Color.Black;
  }
  else
  {
    rich.AppendText(words[i] + " ");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:58:27.993

在 Windows 窗体中没有执行此操作的标准方法。您必须手动呈现列表项（创建所有者绘制的列表框）。在 WPF 中，这将是一件容易的事。

**编辑**
只用不同的字体绘制字符串的一部分并不是一件容易的事。我要尝试的是以下内容：

引入告诉您“粗体开始”和“粗体结束”的标记 - 有点像 HTML。让我们将它们称为与 HTML 中相同的名称。所以你的字符串可能看起来像这样：

```
Hello, I am <b>bold</b> text<b>!</b> 
```

现在我将我的字符串标记为非粗体文本和粗体文本。我会得到以下部分：

```
Hello, I am
bold
text
! 
```

现在我将使用以下算法绘制每个部分：

1.  在当前位置 x 以当前格式绘制字符串
2.  将位置 x 增加在步骤 1 中绘制的字符串的宽度
3.  根据即将出现的字符串更改格式
4.  转到 1

在步骤 2 中，`Graphics.MeasureString`将调用该方法来获取字符串的宽度。

对上面的 4 个示例部件执行此操作将导致：

你好，我是
你好，我是**粗体****你好**
，我是**粗体****你好**
，我是粗体！

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:38:54.733

基于@Thorsten Dittmar 的回答，我几乎完全开发了您在单个列表框中寻找的内容。您可以在[https://advancedlistbox.codeplex.com/](https://advancedlistbox.codeplex.com/)找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:53:21.837

一个简单的 TextBox 可以设置其 Foreground 属性，但它适用于 TextBox 中的整个文本。

如果您想“突出显示”特定单词，则需要将句子拆分为多个 TextBox（脏），或使用[RichTextBox](http://msdn.microsoft.com/en-us/library/3tdc88y7.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T15:25:34.440

Giannosfor，为了回应您的评论，您必须使用事件处理程序的参数 e 来选择要突出显示的项目（[链接在这里](https://stackoverflow.com/questions/91747/background-color-of-a-listbox-item-winforms)）。

查看 Shadow Wizard 的响应，尤其是 e.Index 的使用。

```
Graphics g = e.Graphics;
...
g.FillRectangle(new SolidBrush(color), e.Bounds); 
```

变量 g 代表当前项目 e 的图形部分。方法 FillRectangle 允许您更改项目背景的颜色。

**编辑1：**

我尝试按照您在下面的评论中所说的那样做，但似乎没有办法使用 ListBox 仅突出显示字符串的一部分。对我来说，似乎唯一能够支持的控件是 RichTextBox。一种解决方案可能是以 RichTextBoxes 列表的形式实现您自己的用户控件。****

# c# - 泛型方法多 (OR) 类型约束

> ID：10833918
> 
> 赞同：163
> 
> 时间：2012-05-31T12:46:31.443
> 
> 标签：c#, asp.net-mvc-3, types

阅读[本文](https://stackoverflow.com/a/5887077/1324019)，我了解到可以通过将其设为泛型方法来允许方法接受多种类型的参数。在示例中，以下代码与类型约束一起使用，以确保 "U" 是`IEnumerable<T>`.

```
public T DoSomething<U, T>(U arg) where U : IEnumerable<T>
{
    return arg.First();
} 
```

我发现了一些允许添加多个类型约束的代码，例如：

```
public void test<T>(string a, T arg) where T: ParentClass, ChildClass 
{
    //do something
} 
```

但是，此代码似乎强制要求`arg`必须同时是`ParentClass` **和** `ChildClass`的类型。我想做的是说 arg 可以是一种类型`ParentClass` **或** `ChildClass`以下列方式：

```
public void test<T>(string a, T arg) where T: string OR Exception
{
//do something
} 
```

一如既往地感谢您的帮助！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-31T12:50:56.023

这是不可能的。但是，您可以为特定类型定义重载：

```
public void test(string a, string arg);
public void test(string a, Exception arg); 
```

如果它们是泛型类的一部分，则它们将优于该方法的泛型版本。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-31T13:03:52.317

博茨的回答是 100% 正确的，这里有一个简短的解释：

当您编写一个方法（通用或非通用）并声明该方法采用的参数类型时，您正在定义一个合同：

> 如果你给我一个知道如何做类型 T 知道如何做的事情的对象，我可以提供“a”：我声明的类型的返回值，或“b”：使用的某种行为那种。

如果你尝试一次给它多个类型（通过一个或）或尝试让它返回一个可能不止一种类型的值，那么合同会变得模糊：

> 如果您给我一个知道如何跳绳或知道如何将 pi 计算到第 15 位的对象，我将返回一个可以钓鱼或混合混凝土的对象。

问题是，当您进入该方法时，您不知道他们是否给了您一个`IJumpRope`或一个`PiFactory`. 此外，当你继续使用该方法时（假设你已经让它神奇地编译）你不确定你是否有一个`Fisher`或一个`AbstractConcreteMixer`. 基本上它使整个事情变得更加混乱。

您的问题的解决方案是以下两种可能性之一：

1.  定义多个方法来定义每个可能的转换、行为或其他。这就是博茨的回答。在编程世界中，这被称为重载方法。

2.  定义一个基类或接口，该基类或接口知道如何执行该方法所需的所有操作，并让一个方法*仅*采用该类型。这可能涉及将一个`string`和包装`Exception`在一个小类中，以定义您计划如何将它们映射到实现，但是一切都非常清晰且易于阅读。四年后，我可以来阅读您的代码并轻松理解发生了什么。

您选择哪个取决于选择 1 和 2 的复杂程度以及它需要的可扩展性。

因此，对于您的具体情况，我将想象您只是从异常中提取消息或其他内容：

```
public interface IHasMessage
{
    string GetMessage();
}

public void test(string a, IHasMessage arg)
{
    //Use message
} 
```

现在您所需要的只是将 a`string`和 an`Exception`转换为 IHasMessage 的方法。很容易。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-31T12:55:16.820

如果 ChildClass 表示它是从 ParentClass 派生的，您可以只写以下内容来接受 ParentClass 和 ChildClass；

```
public void test<T>(string a, T arg) where T: ParentClass 
{
    //do something
} 
```

另一方面，如果你想使用两个不同的类型，它们之间没有继承关系，你应该考虑实现相同接口的类型；

```
public interface ICommonInterface
{
    string SomeCommonProperty { get; set; }
}

public class AA : ICommonInterface
{
    public string SomeCommonProperty
    {
        get;set;
    }
}

public class BB : ICommonInterface
{
    public string SomeCommonProperty
    {
        get;
        set;
    }
} 
```

然后您可以将通用函数编写为；

```
public void Test<T>(string a, T arg) where T : ICommonInterface
{
    //do something
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-22T15:16:51.870

与这个问题一样古老，我仍然对我上面的解释随机投票。解释仍然很好，但我将再次回答一个对我有用的类型作为联合类型的替代品（对 C# 不直接支持的问题的强类型答案是）。

```
using System;
using System.Diagnostics;

namespace Union {
    [DebuggerDisplay("{currType}: {ToString()}")]
    public struct Either<TP, TA> {
        enum CurrType {
            Neither = 0,
            Primary,
            Alternate,
        }
        private readonly CurrType currType;
        private readonly TP primary;
        private readonly TA alternate;

        public bool IsNeither => currType == CurrType.Neither;
        public bool IsPrimary => currType == CurrType.Primary;
        public bool IsAlternate => currType == CurrType.Alternate;

        public static implicit operator Either<TP, TA>(TP val) => new Either<TP, TA>(val);

        public static implicit operator Either<TP, TA>(TA val) => new Either<TP, TA>(val);

        public static implicit operator TP(Either<TP, TA> @this) => @this.Primary;

        public static implicit operator TA(Either<TP, TA> @this) => @this.Alternate;

        public override string ToString() {
            string description = IsNeither ? "" :
                $": {(IsPrimary ? typeof(TP).Name : typeof(TA).Name)}";
            return $"{currType.ToString("")}{description}";
        }

        public Either(TP val) {
            currType = CurrType.Primary;
            primary = val;
            alternate = default(TA);
        }

        public Either(TA val) {
            currType = CurrType.Alternate;
            alternate = val;
            primary = default(TP);
        }

        public TP Primary {
            get {
                Validate(CurrType.Primary);
                return primary;
            }
        }

        public TA Alternate {
            get {
                Validate(CurrType.Alternate);
                return alternate;
            }
        }

        private void Validate(CurrType desiredType) {
            if (desiredType != currType) {
                throw new InvalidOperationException($"Attempting to get {desiredType} when {currType} is set");
            }
        }
    }
} 
```

上面的类代表了一个类型，可以*是*TP*也*可以是TA。您可以这样使用它（类型参考我的原始答案）：

```
// ...
public static Either<FishingBot, ConcreteMixer> DemoFunc(Either<JumpRope, PiCalculator> arg) {
  if (arg.IsPrimary) {
    return new FishingBot(arg.Primary);
  }
  return new ConcreteMixer(arg.Secondary);
}

// elsewhere:

var fishBotOrConcreteMixer = DemoFunc(new JumpRope());
var fishBotOrConcreteMixer = DemoFunc(new PiCalculator()); 
```

重要笔记：

*   如果您不先检查，您将收到运行时错误`IsPrimary`。
*   您可以检查任何`IsNeither` `IsPrimary`或`IsAlternate`。
*   `Primary`您可以通过和访问该值`Alternate`
*   在 TP/TA 和 Either<TP, TA> 之间有隐式转换器，允许您传递值或`Either`期望的任何地方。如果您*确实*传递了`Either`where a `TA`or `TP`，但`Either`包含错误类型的值，您将收到运行时错误。

我通常在我希望方法返回结果或错误时使用它。它确实清理了该样式代码。我也非常偶尔（**很少**）使用它作为方法重载的替代品。实际上，对于这种过载来说，这是一个非常糟糕的替代品。

# asp.net - asp webservice和json格式

> ID：10833921
> 
> 赞同：0
> 
> 时间：2012-05-31T12:46:53.453
> 
> 标签：asp.net, json, web-services, json.net

我正在尝试在 asp 中创建一个 web 服务，它将成为 jQuery.Gantt [http://mbielnczuk.com/jquery-gantt/中的用户](http://mbielanczuk.com/jquery-gantt/)

此插件支持的格式如下所示：

```
[{  "name"  : "Task#1"
, "desc"  : " Task Desc"
, "values": [
  {  "from"       : "/Date(1296547200000)/"
   , "to"         : "/Date(1296554400000)/"
   , "desc"       : "<b>Task #1<br>"
   , "customClass": "ganttRed" (optional)
   , "label"      : "Task #1" (optional)
  },
  {  "from"       : "/Date(1296637200000)/"
   , "to"         : "/Date(1296649800000)/"
   , "desc": "<b>Task #</b>"
   , "customClass": "ganttOrange" (optional)
   , "label": "Task #1" (optional)
  }
]
},
...
] 
```

我使用 JSON.NET 创建了一个 Web 服务，如下所示：

```
[JsonObject(MemberSerialization.OptIn)]
public class Meeting
{
    [JsonProperty]
    public string name { get; set; }
    [JsonProperty]
    public string desc { get; set; }
    [JsonProperty]
    public List<Value> values { get; set; }
}

[JsonObject(MemberSerialization.OptIn)]
public class Value
{
    [JsonProperty]
    public string id { get; set; }
    [JsonProperty]
    public DateTime from { get; set; }
    [JsonProperty]
    public DateTime to { get; set; }
    [JsonProperty]
    public string desc { get; set; }
    [JsonProperty]
    public string customClass { get; set; }
}

[WebMethod(Description = "simple test")]
    public string JSON_Test()
    {
        Meeting m1 = new Meeting { name = "one",
        desc = "ole",
        values = new List<Value> { 
            new Value { customClass = "1", desc = "no desc", from = new DateTime(2011, 12, 29, 0, 0, 0, DateTimeKind.Utc), to = new DateTime(2011, 12, 29, 0, 0, 0, DateTimeKind.Utc), id = "3" },
            new Value { customClass = "2", desc = "no desc1", from = new DateTime(2011, 12, 19, 0, 0, 0, DateTimeKind.Utc), to = new DateTime(2011, 12, 20, 0, 0, 0, DateTimeKind.Utc), id = "4" }
        } 
    };
        Meeting m2 = new Meeting
        {
            name = "second",
            desc = "desc",
            values = new List<Value> { 
            new Value { customClass = "1", desc = "no desc", from = new DateTime(2011, 11, 29, 0, 0, 0, DateTimeKind.Utc), to = new DateTime(2011, 12, 29, 0, 0, 0, DateTimeKind.Utc), id = "3" },
            new Value { customClass = "2", desc = "no desc1", from = new DateTime(2011, 11, 19, 0, 0, 0, DateTimeKind.Utc), to = new DateTime(2011, 12, 20, 0, 0, 0, DateTimeKind.Utc), id = "4" }
        }
        };
        List<Meeting> meetings = new List<Meeting>();
        meetings.Add(m1);
        meetings.Add(m2);

        JsonSerializerSettings microsoftDateFormatSettings = new JsonSerializerSettings { DateFormatHandling = DateFormatHandling.MicrosoftDateFormat };

        return JsonConvert.SerializeObject(meetings, microsoftDateFormatSettings);
    } 
```

我现在看起来像这样（萤火虫输出）：

```
{"d":"[{\"name\":\"one\",\"desc\":\"ole\",\"values\":[{\"id\":\"3\",\"from\":\"\\/Date(1325116800000)\\/\",\"to\":\"\\/Date(1325116800000)\\/\",\"desc\":\"no desc\",\"customClass\":\"1\"},{\"id\":\"4\",\"from\":\"\\/Date(1324252800000)\\/\",\"to\":\"\\/Date(1324339200000)\\/\",\"desc\":\"no desc1\",\"customClass\":\"2\"}]},{\"name\":\"second\",\"desc\":\"desc\",\"values\":[{\"id\":\"3\",\"from\":\"\\/Date(1322524800000)\\/\",\"to\":\"\\/Date(1325116800000)\\/\",\"desc\":\"no desc\",\"customClass\":\"1\"},{\"id\":\"4\",\"from\":\"\\/Date(1321660800000)\\/\",\"to\":\"\\/Date(1324339200000)\\/\",\"desc\":\"no desc1\",\"customClass\":\"2\"}]}]"} 
```

如果是手动修改的工作示例：

```
[{ "desc": "ole",
"name": "one",
"values": [{ "customClass": "1",
    "desc": "no desc",
    "from": "/Date(1325116800000)/",
    "id": "3",
    "to": "/Date(1325116800000)/"
},
    { "customClass": "2",
        "desc": "no desc1",
        "from": "/Date(1324252800000)/",
        "id": "4",
        "to": "/Date(1324339200000)/"
    }
  ]
}] 
```

出于某种原因，我的服务添加了额外的 {"d":" 和一些斜线。我试图解决这个问题，试图构建自定义序列化程序，但我被卡住了。

如何解决开头多余的**d和斜线的问题****？**也许我正在尝试重新发明轮子，这只是一个简单的设置。

**编辑**

这是读取 json 数据的 jQuery.Gantt 插件的代码：

```
 var core = {
        /**
        * Create header
        */
        create: function(element) {
            /**
            * Retrieve data
            */
            if (typeof (settings.source) == 'object') {

                element.data = settings.source;
                core.init(element);

            } else {

                $.ajaxSetup({ scriptCharset: "utf-8", contentType: "application/json; charset=utf-8" });
                $.getJSON(settings.source, function(jsData) {
                    element.data = jsData;
                    core.init(element);
                });
            }

        }, 
```

如何将其更改为与**d**一起正常工作？

**编辑2**

让它像这样工作：

create: function(element) { /** * 检索数据 */ if (typeof (settings.source) == 'object') {

```
 if (settings.source.hasOwnProperty("d"))
                element.data = settings.source.d;
            else
                element.data = settings.source;
            core.init(element);
            } else {

                $.ajaxSetup({
                    scriptCharset: "utf-8",
                    contentType: "application/json; charset=utf-8"
                });
                $.getJSON(settings.source, function(jsData) {

                    if (jsData.hasOwnProperty("d"))
                        element.data = jsData.d;
                    else
                        element.data = jsData;
                    core.init(element);
                });
            }

        } 
```

但不知何故，我的网络服务正在返回 xml。我已经添加：

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

但是当查看萤火虫时，我得到了这个：

```
<?xml version="1.0" encoding="utf-8"?>
 <ArrayOfMeeting xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.site.pl/">
<Meeting>
<name>one</name>
<desc>ole</desc>
<values>
  <Value>
    <id>3</id>
    <from>2011-12-29T00:00:00Z</from>
    <to>2011-12-29T00:00:00Z</to>
    <desc>no desc</desc>
    <customClass>1</customClass>
  </Value>
  <Value>
    <id>4</id>
    <from>2011-12-19T00:00:00Z</from>
    <to>2011-12-20T00:00:00Z</to>
    <desc>no desc1</desc>
    <customClass>2</customClass>
  </Value>
</values>
</Meeting>
<Meeting>
<name>second</name>
<desc>desc</desc>
<values>
  <Value>
    <id>3</id>
    <from>2011-11-29T00:00:00Z</from>
    <to>2011-12-29T00:00:00Z</to>
    <desc>no desc</desc>
    <customClass>1</customClass>
  </Value>
  <Value>
    <id>4</id>
    <from>2011-11-19T00:00:00Z</from>
    <to>2011-11-20T00:00:00Z</to>
    <desc>no desc1</desc>
    <customClass>2</customClass>
  </Value>
</values>
</Meeting>
</ArrayOfMeeting> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:03:49.510

我认为这里有几件事出了问题。

1.  您不需要对 web 方法的响应进行 jsonify，asp.net 会为您执行此操作。

2.  ASP.net webservices 用这个 d 父级包装响应，所以你可能需要做这样的事情来使字符串变成一个对象。

    var data = eval(response.d)

    $(".gantt").gantt({来源：数据})

OK eval 在这里可能不起作用，所以试试 - [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

****自己更新调用 $.getJSON ******

 **好的，我知道现在发生了什么。如果您使用 ASP.NET webservices / page 方法，我相信您将始终拥有 d 包装器。

您需要自己调用 $.getJSON 并获取响应，然后将其传递给 create 方法。**

# c# - 无效转换引发 SqlException

> ID：10833923
> 
> 赞同：0
> 
> 时间：2012-05-31T12:47:03.560
> 
> 标签：c#, sql-server, wix, ssms

我在 wix 中使用 C# 进行自定义操作，效果很好。自定义操作本质上只是根据传递给方法的参数运行 sql 脚本。

我正在运行的脚本之一用数据填充我的一个表，如果其中没有任何内容，并且看起来像这样：

```
IF (SELECT COUNT(*) FROM [dbo].[Table]) = 0
BEGIN

INSERT [dbo].[Table] ([ItemId], [Description]) VALUES (N'<<GUID>>', NULL)
INSERT [dbo].[Table] ([ItemId], [Description]) VALUES (N'<<GUID>>', N'The 2nd Item')

...

END 
```

在这种情况下`<<GUID>>`，类似于`e00104e4-7e5f-4563-9356-30732d5ca57e`- 这些脚本是使用相应版本的 Management Studio 从 SQL Server 2008 R2 的数据导出生成的。

当我在 Management Studio 中运行此脚本时，它可以正常工作并且如预期的那样，如果那里没有任何数据，则所有数据都会被插入。但是，通过 C# 代码运行它，我得到以下异常：

`Conversion failed when converting from a character string to uniqueidentifier`

作为表中唯一`uniqueidentifier`的列，这必须是 ItemId 列，但我无法弄清楚为什么会发生这种情况，或者如何解决问题，最后一小时在线搜索也没有给出任何结果。

**编辑**

我应该补充一点，这些 SQL 查询位于一个文件中，然后 C# 代码将其内容作为 SQL 查询读取。如果可以的话，我真的不想修改它们，因为它增加了一个不需要的额外步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:56:55.260

T-SQL 上有一个用于列的转换函数`uniqueidentifier`试试这个：

```
INSERT [dbo].[Table] ([ItemId], [Description]) VALUES (CONVERT(uniqueidentifier,N'<<GUID>>'), N'The 2nd Item') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:18:57.567

有趣的问题。您没有使用 Visual Studio 2008 吗？您使用的驱动程序可能已过期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:36:13.767

我现在已经解决了这个问题。结果发现其中一个脚本已过期，并且该表的 ID**已从**an 更改`nvarchar`为 a `uniqueidentifier`。

然后发生了两件事，第一件事是没有其他人更新填充该表默认数据的脚本。第二个是 wix（或运行 SQL 的自定义操作，我不确定是哪个）在第一个脚本之后报告错误，它恰好具有非常相似的表结构。

所以，总而言之，我应该早点发现问题所在。相反，我会因为不这样做而在 SA 上自欺欺人。无论如何，感谢您的答案，希望它们对偶然发现这个问题的人有用。

# z3 - Z3 C API 在运行时更改超时

> ID：10833925
> 
> 赞同：1
> 
> 时间：2012-05-31T12:47:10.537
> 
> 标签：z3

是否可以使用 C API 在运行时更改求解器的超时值？为了设置超时，可以执行以下操作 -

```
Z3_config  cfg = Z3_mk_config();
Z3_set_param_value(cfg, "SOFT_TIMEOUT", "10000") // set timeout to 10 seconds
Z3_context ctx = Z3_mk_context(cfg);
....
Z3_check_and_get_model(ctx);
....
....
Z3_check_and_get_model(ctx); 
```

但是，假设我们想在保留上下文的同时更改下一个查询的超时时间，是否可以在两者之间更改超时值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:32:11.587

考虑迁移到 Z3 4.0。Z3 4.0 有新的 API，允许用户在同一个 Z3_context 中创建多个求解器。您可以为每个求解器设置不同的超时，并随时更新它们。Z3 4.0 还带有一个 C++ 层，使 C API 的使用更加方便。这是一个设置超时的简短示例。`unknown`在我的机器上，当使用 1 毫秒超时以及删除命令`sat`时，Z3 将返回。`s.set(p)`

```
context c;
expr x = c.real_const("x");
expr y = c.real_const("y");
solver s(c);

s.add(x >= 1);
s.add(y < x + 3);

params p(c);
p.set(":timeout", static_cast<unsigned>(1)); // in milliseconds
s.set(p);

std::cout << s.check() << std::endl; 
```

# objective-c - 当应用程序处于最小化模式时，如何在应用程序图标上设置徽章？

> ID：10833926
> 
> 赞同：1
> 
> 时间：2012-05-31T12:47:14.293
> 
> 标签：objective-c

当应用程序处于最小化状态并同时收到通知时，应在应用程序图标上看到徽章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:51:43.113

如果通知到达并且您的应用程序不是前台，则操作系统会处理通知。

您的通知可以包含一个字段，该字段`badge`将使操作系统更新徽章。但是，这意味着发送通知的服务器必须有办法知道哪个数字应该是徽章。

通知正文如下所示：

```
{
    "aps" : {
        "badge" : 9
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:16:10.027

这是我的解决方案。我需要在我所做的应用程序中实现相同的目标。我有一个下载队列，想使用徽章来显示剩余的下载量，即使在后台也能继续更新。基本上我的解决方案是，每次下载完成时，我都会设置一个`UILocalNotification`静音，没有消息文本。只需设置徽章..如下所示..

```
- (void)queRequestFinished:(ASIHTTPRequest *)request {

    self.inResourceCount -= 1; // Deducted 1 from the total count of downloads in queue.

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {

    UILocalNotification *notif = [[cls alloc] init];
    notif.fireDate = [NSDate  date]; // Schedule notification for now.
    notif.timeZone = [NSTimeZone defaultTimeZone];
    notif.soundName = @"silence.caf";
    notif.applicationIconBadgeNumber = inResourceCount; // Number you want displayed as Badge.

    // This is where the magic happens, and actually changes your badge.    
    [[UIApplication sharedApplication] scheduleLocalNotification:notif];

    [notif release];
   }

} 
```

我想指出，我的情景可能与你的不同。我正在使用`ASIHTTPRequest`库，它支持在后台继续下载，`queRequestFinished:`即使在后台也调用上述方法。希望这会有所帮助，如果它确实将其标记为答案:)。

# exif - 自定义 Exif 标签

> ID：10833928
> 
> 赞同：14
> 
> 时间：2012-05-31T12:47:30.127
> 
> 标签：exif

我正在使用[exiv2](http://www.exiv2.org/)来操作 jpeg 文件中的元数据。我需要将更多与图像处理相关的信息写入元数据。除了标准标签之外，是否可以创建自定义 Exif 标签？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T13:18:59.797

来自[http://www.exif.org/Exif2-2.PDF](http://www.exif.org/Exif2-2.PDF)：

> **D. 与用户信息相关的标签**
> 
> **MakerNote**
> Exif 写入器制造商用于记录任何所需信息的标签。内容由制造商决定，但此标签不得用于其预期目的以外的任何用途。
> 标签 = 37500 (927C.H)
> 类型 = 未定义
> 计数 = 任意
> 默认值 = 无
> 
> **UserComment**
> 一个标签，Exif 用户可以在 ImageDescription 之外的图片上写关键字或评论，没有 ImageDescription 标签的字符代码限制。
> 标签 = 37510 (9286.H)
> 类型 = 未定义
> 计数 = 任意
> 默认值 = 无

exiv2 支持`MakerNote`标签：[http ://dev.exiv2.org/projects/exiv2/wiki/How_to_add_support_for_a_new_makernote](http://dev.exiv2.org/projects/exiv2/wiki/How_to_add_support_for_a_new_makernote)

如果您不想这样做，可以使用`UserComment`：[http ://www.exiv2.org/doc/exifcomment_8cpp-example.html](http://www.exiv2.org/doc/exifcomment_8cpp-example.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T12:09:15.950

拥有自定义元数据的更好方法是使用带有自定义命名空间的 Adob​​e XMP。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-11T04:01:43.997

根据我的研究，EXIF 标签符合[此处](http://www.exif.org/Exif2-2.PDF)描述的一组标准标签。

在它声明的标准文档中（参考 EXIF 标签），

> 注册系统用于字符代码以避免重复。注册字符代码时，在参考栏中显示标准文档以指示字符格式规范。如果使用在日本没有明确规范的字符代码，如 Shift-JIS，则指定为 Undefined。

因此，我的理解是有一组标准的标签（已注册的标签），否则当您使用 exiftool 等工具查询它时，它会显示为“未定义”。

因此，为了拥有可被工具或其他实体识别的标签，您需要注册您的标签以成为标准化标签的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T11:12:52.267

[我确实找到了一种使用ExifTool](https://exiftool.org/)将自定义 EXIF 标签添加到文件的方法

我必须为我想要的字段创建一个配置文件：

```
%Image::ExifTool::UserDefined = (
'Image::ExifTool::Exif::Main' => {
    0xd001 => {
        Name => 'Category',
        Writable => 'string',
        WriteGroup => 'IFD0',
    },
    0xd002 => {
        Name => 'PhotoID',
        Writable => 'string',
        WriteGroup => 'IFD0',
    },
    # add more user-defined EXIF tags here...
  },
); 
```

然后您可以使用 exiftool 写入字段：

```
exiftool -config exif.config -EXIF:PhotoID=15 -EXIF:Category=Cars c:\temp\pic.png 
```

要读取 EXIF 信息：

```
exiftool -config exif.config c:\temp\pic.png 
```

# ios - 核心数据属性从字符串迁移到整数 16

> ID：10833931
> 
> 赞同：17
> 
> 时间：2012-05-31T12:47:37.177
> 
> 标签：ios, core-data

我在将商店实体属性从 String 迁移到 Integer 16 时遇到问题。以下是我采取的步骤：

1.  添加模型版本...
2.  在新模型中，将 Entity 属性从 String 更改为 Int 16。
3.  在 File Inspector > Versioned Core Data Model > Current Model 中选择新模型
4.  为新旧模型创建映射模型。
5.  跑

这是错误：

> 未解决的错误 Error Domain=NSCocoaErrorDomain Code=134140 “操作无法完成。（Cocoa 错误 134140。）” UserInfo=0xbd5cd20 {reason=找不到或自动推断迁移的映射模型，destinationModel=...

映射模型在编译后的 .app 中：

![捆](../Images/398893b59b0a961d99a3bb2bec2b2d1c.png)

在项目中：

![在此处输入图像描述](../Images/5bcc6ec47aab659708b2134a2caf8279.png)

迁移适用于 Integer 16 > Integer 32 等属性，或更改属性名称时。

我尝试创建一个简单的核心数据项目，并且从 String 到 Integer 16 的迁移自动（有和没有映射模型）工作并返回。

最奇怪的部分是我尝试以编程方式查找捆绑包中的所有映射模型，但没有找到当前源/目标模型。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T13:10:25.787

发生这种情况是因为 Core Data 无法自动迁移您的属性。这是因为它不能保证字符串总是适合 int （即使您知道您的数据确实如此）。

所以你需要做的是使用映射模型。这是如何做到的：

1.  在 Xcode 中，创建一个新的映射模型（File > New > New File），在 Core Data 部分选择 Mapping Model
2.  在向导中选择源模型和目标模型
3.  这基本上将您置于与轻量级迁移相同的位置，一切都是自动完成的，除了您可以选择覆盖某些映射。具体来说，就是给你带来麻烦的那个。
4.  创建一个新的映射策略类（扩展[`NSEntityMigrationPolicy`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSEntityMigrationPolicy_class/NSEntityMigrationPolicy.html)）
5.  实现`createDestinationInstancesForSourceInstance:entityMapping:manager:error:`它将为您提供源实例，以便您可以将该字符串转换为 int 并将其存储在新存储中。

您的代码应如下所示：

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError **)error
{
    NSManagedObject *newObject = [NSEntityDescription insertNewObjectForEntityForName:[mapping destinationEntityName] inManagedObjectContext:[manager destinationContext]];  

    // Copy all the values from sInstance into newObject, making sure to apply the conversion for the string to int when appropriate. So you should have one of these for each attribute:
    [newObject setValue:[sInstance valueForKey:@"xyz"] forKey:@"xyz"];

    [manager associateSourceInstance:sInstance withDestinationInstance:newObject forEntityMapping:mapping];
} 
```

1.  然后您所要做的就是在映射模型中设置该策略。选择映射模型文件，选择适当的实体映射并在右侧面板上设置 CustomPolicy。

请务必更改迁移设置以在启动 Core Data 的任何位置删除自动类型推断

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, nil]; 
```

应该是这样的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T02:56:53.203

对于那些因“找不到迁移映射模型”错误而打破数千条矛的人来说，这可能会有所帮助：

1.  确保您在正确的文件夹/组中创建了映射文件（在按`Cmd`+之前 -在项目导航器中`N`选择**.xcdatamodeld文件）。**
2.  清理项目。
3.  重建项目并运行。

就我而言，应用程序在清理/重建后*自动找到了映射模型 =\*

# php - 使用 soundex 和数组的 PHP 相似词

> ID：10833939
> 
> 赞同：0
> 
> 时间：2012-05-31T12:47:56.793
> 
> 标签：php

我正在创建一个 findSpellings 函数，它有两个参数 $word 和 $allWords。$allwords 是一个包含单词拼写错误的数组，这些单词听起来可能类似于 $word 变量。我想要完成的是基于 soundex 函数打印出所有与 $word 相似的单词。我无法用单词打印出数组。我的功能如下。任何帮助将不胜感激：

```
<?php 
$word = 'stupid';

$allwords = array(
    'stupid',
    'stu and pid',
    'hello',
    'foobar',
    'stpid',
    'supid',
    'stuuupid',
    'sstuuupiiid',
);
function findSpellings($word, $allWords){
while(list($id, $str) = each($allwords)){

    $soundex_code = soundex($str);

    if (soundex($word) == $soundex_code){
        //print '"' . $word . '" sounds like ' . $str;
        return $word;
        return $allwords;
    }
    else {
        return false;
    }

}
 }
 print_r(findSpellings($word, $allWords));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:50:10.873

```
if (soundex($word) == $soundex_code){
    //print '"' . $word . '" sounds like ' . $str;
    return $word;
    return $allwords;
} 
```

您不能有 2 个返回，第一个返回将退出代码。

你可以这样做：

```
if (soundex($word) == $soundex_code){
    //print '"' . $word . '" sounds like ' . $str;
    $array = array('word' => $word, 'allWords' => $allWords);
    return $array;
} 
```

然后像这样从 $array 中检索值：

```
$filledArray = findSpellings($word, $allWords);

echo "You typed".$filledArray['word'][0]."<br/>";
echo "Were you looking for one of the following words?<br/>";

foreach($filledArray['allWords'] as $value)
{
    echo $value;
} 
```

# jquery - 为什么这段代码不执行？

> ID：10833942
> 
> 赞同：0
> 
> 时间：2012-05-31T12:48:02.663
> 
> 标签：jquery

**这个运行就像它非常好。**

```
// Save, set state to finalized and Print
        $('#btnDialogPrint').click(function () {

            if ($('#chkFinal').is(':checked')) {
                $(function () {
                    $("#PrintDialog").dialog('close');    
                });
            }
            else {
                $('#chkFinal').attr('checked', true); // Set finalized. This checkbox is not visible its like a hidden field
                $('#btnSubmit').click(); // Save
            }

        }); 
```

**这也运行良好：**

```
window.location = '../Print/' + $('#SalesContractId').val(); 
```

**但是当我把它们放在一起时，它只会运行**

> **window.location = '../Print/' + $('#SalesContractId').val();**

**完整代码：**

```
// Save, set state to finalized and Print
    $('#btnDialogPrint').click(function () {

        if ($('#chkFinal').is(':checked')) {

            $(function () {
                $("#PrintDialog").dialog('close');
                window.location = '../Print/' + $('#SalesContractId').val();    // Moves to ContractController Print
            });
        }
        else {
            $('#chkFinal').attr('checked', true); // Set finalized. This checkbox is not visible its like a hidden field
            $('#btnSubmit').click(); // Save
             window.location = '../Print/' + $('#SalesContractId').val();    // does not alow above code to execute 
        }

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:51:37.103

删除`$(function() { ... });`点击处理程序的内部并将其放在**外面**：

```
$(function() {
    $('#btnDialogPrint').click(function () {
        if ($('#chkFinal').is(':checked')) {
            $("#PrintDialog").dialog('close');
            window.location.href = '../Print/' + $('#SalesContractId').val();
        } else {
            $('#chkFinal').attr('checked', true);                
            $('#btnSubmit').click();
        }
    });
}); 
```

`$(function() { ... });`意思是[document.ready](http://api.jquery.com/ready/)。

话虽这么说，你似乎在打电话给一些人`$('#btnSubmit').click();`。请注意，如果这`#btnSubmit`实际上是某个表单的提交按钮（正如其 id 所暗示的那样），那么当提交表单时，它会自动将浏览器重定向到`action`表单的属性。所以`window.location.href`在这种情况下调用重定向是完全没有意义的。我想你将不得不重新考虑你想要实现的任何目标。

# ios - 显示谷歌地图的 UIWebView 切断了缩放控件

> ID：10833943
> 
> 赞同：2
> 
> 时间：2012-05-31T12:48:07.173
> 
> 标签：ios, google-maps, uiwebview, maps

如下图所示，`UIWebView`在 iPhone 上显示 Google 地图时存在标签栏和导航栏的问题。

我搜索了隐藏缩放控件的参数，但只找到了一个 javascript api。但我不知道如何使用它。有任何想法吗？

![在此处输入图像描述](../Images/1463f15a6f506731c4b578e64fc8ff4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:58:53.473

首先，您的应用程序将被拒绝，因为 Google 徽标被隐藏，违反了 Google 许可协议。如果那是一个简单的 webView（不是 MKMapView），请将它的框架设置为不被标签栏覆盖。

关于您提出的问题，java-script 使用[stringByEvaluatingJavaScriptFromString应用于 webView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# html - IMG 标签不适用于 HTML5 代码和 Phonegap

> ID：10833945
> 
> 赞同：2
> 
> 时间：2012-05-31T12:48:14.810
> 
> 标签：html, cordova

你好。我想在我的 HTML5 代码中显示图像。这是代码：

```
<div class="card"><img src="pics/back.png"/></div> 
```

图像不显示，所以我把整个路径是这样的：

```
<div class="card"><img src="file:///android_asset/www/pics/back.png"/></div> 
```

但问题仍然存在。我也在使用Phonegap。

请问有什么想法吗？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:26:46.410

我只是将图像 back.png 移到了“WWW”文件夹下，它工作正常，代码如下：

```
 <div class="card"><img src="back.png"/></div> 
```

# c# - 如何从具体类转换为接口类型？

> ID：10833946
> 
> 赞同：4
> 
> 时间：2012-05-31T12:48:17.063
> 
> 标签：c#

我正在构建一个多层应用程序。

当我将一个对象从我的表示层传递到我的业务层时，我想将其转换为接口类型，因为业务层不知道表示层的具体类。

```
 public ActionResult SubmitSurvey(SurveyAnswer answers)
    {

        ISurveyAnswer answer = (ISurveyAnswer)answers;

        bc.SaveSurvey(answer);

        return null;
    } 
```

该类`SurveyAnswer`实现接口 ISurveyAnswer

当我检查业务层中的类型时：

```
 public void SaveSurvey(ISurveyAnswer answer)
        {
            String type = answer.GetType().Name;
        } 
```

GetType().Name 方法返回 SurveyAnswer，它是表示层的具体类。它应该这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:50:03.513

强制转换不会改变对象的类型。对象始终保持与创建时相同。强制转换只是更改您访问对象的接口。如果您愿意，它会改变您对对象的“视图”。不过，这不是问题。你在做什么是正确的。UI 层关心的只是 ISurveyAnswer 接口，所以只要对象的具体类型实现了该接口，那么一切都很好，并且会按您的预期工作。这样做的美妙之处在于，现在 UI 层可以被赋予任何类型的对象（包括模拟对象），这无关紧要，只要对象实现了相同的接口，UI 就可以正常工作并且不会在意。GetType 将让您检查对象以查看对象的实际类型，但在大多数情况下，它不应该 对 UI 层无关紧要。只要提供的对象实现了该接口并正常工作，UI 也将如此。

当任何类或方法要求将某种类型的对象传递给它时，理想情况下，它应该始终要求尽可能窄的实现或基类型。因此，例如，如果您有一个获取项目列表的方法，它可能看起来像这样：

```
void printList(List<Dog> dogs)
{
    foreach(Dog dog in dogs)
        printDog(dog);
} 
```

但是，从技术上讲，该方法实际上并不需要`List<>`对象，因为它所做的只是枚举列表中的项目。它本身不使用类型的任何成员`List<>`，它只是使用`IEnumerable<>`由类型实现的接口的成员`List<>`。因此，在这种情况下，最好像这样编写方法：

```
void printList(IEnumerable<Dog> dogs)
{
    foreach(Dog dog in dogs)
        printDog(dog);
} 
```

现在，如果在方法内部，不仅需要遍历列表，还需要列表中项目的总数，那就`IEnumerable`不够了。但是，它仍然不需要完整`List<>`类型，它只需要`ICollection<>`类型（也由 实现`List<>`），如下所示：

```
void printList(ICollection<Dog> dogs)
{
    printTotal(dogs.Count);
    foreach(Dog dog in dogs)
        printDog(dog);
} 
```

但是，如果该方法需要获取每个项目的索引，`ICollection<>`这还不够——该方法需要一个`IList<>`类型。例如，此示例显示了它如何打印狗列表并突出显示列表中的所有其他狗：

```
void printList(IList<Dog> dogs)
{
    printTotal(dogs.Count);
    for(Dog dog in dogs)
        if (dogs.IndexOf(dog) % 2 == 0)
            printDog(dog);
        else
            printHighlightedDog(dog);
} 
```

您会注意到，在这些示例中，我都不需要将`dogs`参数转换为不同的类型。我根据需要适当地键入了参数，所以我只是通过该类型的接口使用它。在所有这些示例中，`List<Dog>`可以将对象传递到`printList`方法中而无需强制转换（因为 List<> 实现了所有这些接口，因此可以隐式强制转换）：

```
List<Dog> dogs = new List<Dog>();
dogs.Add(new Dog());
printList(dogs); 
```

请记住，这是一个非常简单的例子来说明一个观点。在现实世界的场景中，出于各种原因，您通常可能只是要求，`List<>`或者`IList<>`即使您在技术上并不需要他们提供的一切。您可能知道该方法将来很可能需要`IList<>`功能，即使它现在只需要`IEnumerable<>`功能。但是，当您决定方法参数的类型时，请牢记这一原则。

您几乎不需要知道传递给方法的对象的实际类型。您真正需要知道的是它实现了一个特定的接口，以便您可以通过该特定接口访问它的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T12:49:40.203

> 我想将其转换为接口类型

没有必要。如果具体类型实现了该类型，则不需要强制转换它。

这将工作得很好：

```
public ActionResult SubmitSurvey(SurveyAnswer answers)
{
    bc.SaveSurvey(answers);
    return null;
} 
```

* * *

> GetType().Name 方法返回 SurveyAnswer，它是表示层的具体类。它应该这样做吗？

这是正确的。它将返回传入的实际类型（无论您将其转换为什么类型）。

# java - 在所有时区和有/无 DST 的情况下使用日期进行单元测试

> ID：10833948
> 
> 赞同：4
> 
> 时间：2012-05-31T12:48:21.297
> 
> 标签：java, unit-testing, timezone

如何使这个单元测试在所有时区都通过，而不管 DST 是否处于活动状态？

```
import static org.junit.Assert.*;
import java.text.SimpleDateFormat;
import java.util.Date;
import org.joda.time.DateTime;
import org.junit.Test;

public class TimeZoneTest {

    private final static SimpleDateFormat DATE_FORMAT = new SimpleDateFormat( "yyyy.MM.dd'T'HH:mm.ss:SSSZZ" );

    @Test
    public void testUtilDateMillis() throws Exception {
        assertEquals( "1970.01.01T00:00.00:000+0000", DATE_FORMAT.format( new Date( 0L ) ) );
    }

    @Test
    public void testDateTimeMillis() throws Exception {
        assertEquals( "1970-01-01T00:00:00.000+00:00", new DateTime( 0L ).toString() );
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:52:03.727

默认情况下，新的`SimpleDateFormat`将使用系统默认时区。如果你想要一个特定的时区，你应该调用`setTimeZone`它：

```
private final static SimpleDateFormat DATE_FORMAT = createFormat();

private static SimpleDateFormat createFormat() {
    // Make sure there are no locale-specific nasties, either...
    SimpleDateFormat ret = new SimpleDateFormat("yyyy.MM.dd'T'HH:mm.ss:SSSZZ",
                                                Locale.US);
    ret.setTimeZone(TimeZone.getTimeZone("Etc/UTC");
} 
```

对于您的第二个测试，您希望将其更改为：

```
new DateTime(0L, DateTimeZone.UTC); 
```

请注意，您通常不应该使用静态`SimpleDateFormat`变量，因为它不是线程安全的。（而[Joda Time](http://joda-time.sf.net) `DateTimeFormatter`实现*是*线程安全的。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-03-24T05:49:33.090

或者你可以比较日期并把

```
@Ignore("Timezone issues")
@Test 
```

在您的单元测试中

# iphone - 有没有办法以编程方式在 iPhone 上连接和获取来自 Office 365 的邮件？

> ID：10833952
> 
> 赞同：1
> 
> 时间：2012-05-31T12:48:31.653
> 
> 标签：iphone, email, ios5, office365

我想制作自己的应用程序以访问我的邮件。我正在使用 Office 365 邮件交换，我真的很讨厌 Outlook 网络邮件。我如何在 iphone 上连接并从那里获取我的邮件，知道吗？我对此一无所知。这种方式必须是http post还是那里的任何api？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:57:14.953

您可以使用邮件应用程序。它本机支持 Exchange Active Sync。
[http://help.outlook.com/en-us/140/cc825479.aspx#Apple](http://help.outlook.com/en-us/140/cc825479.aspx#Apple)

如果你真的想编写代码，一个好的开始是 Exchange Web 服务： http:
[//msdn.microsoft.com/en-us/library/gg194011 (v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/gg194011(v=exchg.140).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T11:19:10.117

Microsoft 发布了 Office 365 API 的预览版，其中包含用于电子邮件、日历和联系人的 REST 服务。 [http://msdn.microsoft.com/en-us/library/office/dn605896(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/dn605896%28v=office.15%29.aspx)

授权基于 OAuth2，您可以下载他们的 VS 2013 扩展，那里的代码显示如何使用他们所谓的多资源刷新令牌连接到交换：http: [//visualstudiogallery.msdn.microsoft.com/7e947621-ef93 -4de7-93d3-d796c43ba34f](http://visualstudiogallery.msdn.microsoft.com/7e947621-ef93-4de7-93d3-d796c43ba34f)

该示例还包含显示如何在收到访问令牌后查询电子邮件、联系人等的代码。

# cuda - CUDA 全局内存拷贝

> ID：10833953
> 
> 赞同：2
> 
> 时间：2012-05-31T12:48:32.683
> 
> 标签：cuda

CUDA C 编程指南（第 70 页）说，

> 全局内存驻留在设备内存中，设备内存通过 32、64 或 128 字节内存事务访问。这些内存事务必须自然对齐：内存事务只能读取或写入与其大小对齐的设备内存的 32、64 或 128 字节段（即其首地址是其大小的倍数） .

**那么，如果我想在设备**功能中一次访问 32、64 或 128 个连续字节，（例如复制到共享内存）这个操作最合适的功能（或分配）是什么？

传统的 C memcpy 函数似乎不能一次访问 32 个字节（非常慢）。而且因为这不是向量数据，我希望单个线程一次读取这些数据。

* * *

到 dbaupp

memcpy 运行良好，但我说的是速度。例如，假设我有设备内存指针 p 并在设备函数中运行以下代码。

a) 字符 c[8]；memcpy(c, p, 8);

b) 字符 c[8]；* (双 * )c = * (双 * )p;

对于上述两种情况，结果是相同的，但情况 b 比情况 a 快了近 8 倍（我在我的代码中测试并确认了）。

仅供参考，cudaMemcpy 功能在设备功能中不起作用。

所以，我想知道是否有任何方法可以从单个操作中复制 16 个字节。（希望比 memcpy(c, p, 16); 快 16 倍）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:29:02.913

目前还不是 100% 清楚你想要做什么。`char`如果您试图将数据从全局复制到共享内存，那么它可能具有某种结构，例如s 或s的数组`float`或其他东西。以下答案将假设您正在处理一个`char`s 数组（您可以替换`char`为任何数据类型）。

**摘要**：不要考虑一次显式访问 32/64/128 字节，只需编写代码以便合并内存访问即可。

* * *

您可以使用 CUDA 随心所欲地访问数据，就像在普通的 C/C++/whatever 中一样。您甚至可以深入到单个字节。编程指南所说的是，每当访问数据时，都必须读取 32/64/128 字节的块。例如，如果您有`char a[128]`并且想要获取，`a[17]`那么 GPU 必须从 to 读取`a[0]`数据`a[31]`才能获取`a[17]`. 这是透明地发生的，例如，您无需进行任何不同的编码即可访问单个字节。

主要考虑因素是内存访问速度：如果必须为每个信息字节读取 31 个垃圾字节，那么您将有效内存带宽减少 32 倍（也意味着您必须进行更多的全局内存访问，即sloowww）！

但是，GPU 上的内存访问可以跨块中的线程“合并”（[这个问题](https://stackoverflow.com/questions/6563261/how-to-use-coalesced-memory-access)为优化合并提供了一个合理的起点。）。简而言之，合并允许一个块中的多个线程同时发生的内存访问可以“批处理”在一起，以便只需要发生一次读取。

重点是合并发生在块内的线程之间（而不是在单个线程内），因此对于复制到共享内存中，可以执行（是全局内存`array`中的 s 数组）：`char`

```
__shared__ char shrd[SIZE];

shrd[threadIdx.x] = array[blockDim.x * blockIdx.x  + threadIdx.x];
__syncthreads(); 
```

这将使每个线程将一个字节复制到共享数组中。这种 memcpy 操作本质上是并行发生的，并且数据访问是合并的，因此不会浪费带宽（或时间）。

上述策略比让单个线程逐字节迭代和复制要好得多*。*

还可以将数组的每个*n*字节块视为单个*n*字节数据类型，并让每个线程复制它。例如对于*n* ==16，做一些强制转换`uint4`

```
__shared__ char shrd[SIZE];

((uint4*)shrd)[threadIdx.x] = ((uint4*)array)[blockDim.x * blockIdx.x  + threadIdx.x];
__syncthreads(); 
```

这将允许每个线程一次复制 16 个字节。关于那段代码的注释：

*   我尚未对其进行测试或基准测试
*   我不知道这是否是好的做法（我强烈希望它不是）。）
*   索引按 16 缩放（例如`threadIdx.x == 1`对应于写入`shrd[16],shrd[17],...,shrd[31]`）

* * *

附带说明：根据您的特定用例，[内置的 cudaMemcpy 函数](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY.html)可能很有用。

# python - 在 Python 中，什么时候是 platlib ！= purelib？

> ID：10833962
> 
> 赞同：6
> 
> 时间：2012-05-31T12:49:09.407
> 
> 标签：python, setuptools

Python有能力安装`platlib`和`purelib`在不同的位置。有什么区别，为什么存在这个功能，什么时候在实践中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:59:28.473

引用[安装 Python 模块](http://docs.python.org/install/index.html)：

> 例如，如果您想在您的主目录中的 python 下维护所有与 Python 模块相关的文件，并且您希望为每个使用您的主目录的平台从 [.]

（即，您处于异构网络环境中，计算机可能运行不同的操作系统，但每台计算机都从网络存储服务器安装您的 homedir。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-10T23:55:02.550

在基于 Red Hat 的 64 位平台`platlib`上`purelib`有所不同。这是 CentOS 7 的值：

```
 'purelib': '$base/lib/python$py_version_short/site-packages',
    'platlib': '$platbase/lib64/python$py_version_short/site-packages', 
```

这允许二进制扩展遵循将 64 位二进制文​​件放在 lib64 目录中的系统约定，而与体系结构无关的文件放在 lib 目录中。

# calendar - 从 uibutton 打开日历

> ID：10833964
> 
> 赞同：0
> 
> 时间：2012-05-31T12:49:13.443
> 
> 标签：calendar, uibutton, shortcut

我进行了很多次搜索，以找到一种从我的应用程序中的 UIButton 打开本机日历应用程序的方法。我找不到从 UIButton 执行此操作的方法。

我发现这样做的唯一方法是将日期放在 web 视图中并激活事件检测。

有人可以通过下面的这种方法找到它吗？

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"calendrier"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:42:17.220

我找到了这样做的方法。这并不是使用 UIButton 的真正手段，但它确实有效！

1.  用你的图标在你的 uiview 上放一张图片。
2.  在此图标上放置一个 webview（称为 webViewBtn）
3.  代码 ！

```
    NSString *path = [[NSBundle mainBundle] pathForResource:@"agenda-button" ofType:@"html"];
    NSURL *baseURL = [NSURL fileURLWithPath:path];
    NSString *fileText = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    NSMutableString *agendaButton = [[NSMutableString alloc] initWithFormat:fileText, date2openInCalendar];
    [webViewBtn loadHTMLString:agendaButton baseURL:baseURL];

```

并在您的项目中放置一个名为“agenda-button.html”的 HTML 文件，其中包含以下内容：

```
<html>
<head>
    <style type="text/css">
        <!--
        html,body,p,a{
            display: block;
            width: 60px;
            height: 40px;
            /*background: url(btn_agenda.png) top left no-repeat;*/
            text-indent: -9999px;
                            font-size: 1px;
            }
            -->
        </style>
    </head>
    <body>%@</body>
<html> 
```

您将看到一个带有这些选项的操作表：“创建事件”、“在日历中显示”、“复制”

PS：允许在 webview 中检测事件！

# android - 在应用程序启动接收器上？

> ID：10833970
> 
> 赞同：0
> 
> 时间：2012-05-31T12:49:26.030
> 
> 标签：android, android-intent

我想制作一个每次启动新应用程序时都会调用的接收器。我看到 ActivityManager[0] 允许我查看所有正在运行的应用程序，但我想避免轮询它。我该怎么做（如果可以的话）？

[0] [http://developer.android.com/reference/android/app/ActivityManager.html](http://developer.android.com/reference/android/app/ActivityManager.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:06:37.880

> 我该怎么做（如果可以的话）？

你不能。此类事件没有广播`Intent`。

# java - 是否可以在 PDF 宽度 XHtmlRenderer 中创建垂直文本？

> ID：10833972
> 
> 赞同：0
> 
> 时间：2012-05-31T12:49:27.210
> 
> 标签：java, css, xhtmlrenderer

像这样： [CSS垂直文本](http://scottgale.com/blog/css-vertical-text/2010/03/01/)

但它使用浏览器特定的 CSS 扩展，所以我想知道它是否有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:15:09.857

它不起作用。我最终改变了页面方向。

# mysql - MySQL选择特定数量并计算所有可能的

> ID：10833973
> 
> 赞同：1
> 
> 时间：2012-05-31T12:49:27.287
> 
> 标签：mysql, select, count

我认为这是一个简单的问题，但谷歌只给我选择和计算结果。

我想知道是否可以从有限制的表中选择并计算通常会受查询影响的所有行。

例如：

我在汽车表中有 100 行，我选择了前 20 行，我想在一个查询中计算汽车表中有多少辆汽车。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:51:31.867

使用`SQL_CALC_FOUND_ROWS`然后使用[`FOUND_ROWS()`](http://dev.mysql.com/doc/en/information-functions.html#function_found-rows)函数：

```
SELECT SQL_CALC_FOUND_ROWS * FROM ... LIMIT 100;
SELECT FOUND_ROWS(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:51:36.047

如果我理解您的需求（我理解为您想要有限查询的结果加上整个表中的行数），这可以通过`SELECT`子查询或`JOIN`针对子查询来完成。由于您只期望从计数查询返回一行，因此您可以使用笛卡尔连接（不带`ON`子句）。然后，所有行的计数显示为每列的相同值。

```
SELECT
  cars.*,
  carcount.numcars
FROM
  cars
  JOIN (SELECT COUNT(*) AS numcars FROM cars) carcount
LIMIT 20 
```

会产生类似的结果

```
make     model     numcars
ford     focus     100
ford     model t   100
...
...
20 rows, numcars always = 100 
```

# jquery - jQuery 在 .each() 中操作对象

> ID：10833974
> 
> 赞同：1
> 
> 时间：2012-05-31T12:49:29.500
> 
> 标签：jquery, this, each

我正在尝试获取一些直播的在线状态和观众人数。我通过 AJAX 从我的网站获取对象数组。然后我遍历数组并向这些对象添加值。问题是，当我在控制台中记录这些对象的内容时，我找到了新创建的键，但是当我尝试记录该键的值时，它说它是未定义的。

```
$.each(livestreams, function () {
    if(this.provider === 'TwitchTV') {
        $.ajax({
            url: 'http://api.justin.tv/api/stream/list.json?channel=' + this.channel.toLowerCase(),
            dataType: 'jsonp',
            jsonp: 'jsonp',
            success: $.proxy(function (stream) {
                this.live = true;
                this.count = stream[0].channel_count;
            }, this)
        });
    } else {
        $.ajax({
            url: 'http://api.own3d.tv/liveCheck.php?live_id=' + this.channel,
            dataType: 'xml',
            success: $.proxy(function (stream) {
                this.live = stream.find('isLive').text();
                this.count = stream.find('liveViewers').text();
            }, this)
        });
    }
    console.log(this);
    /* returns
            channel: "garenatw"
            count: 8237
            id: "3"
            live: true
            name: "garena"
            provider: "TwitchTV"
            username: "grifon"
            __proto__: Object 
            (of course, only for this specific object)
        */
    console.log(this.live); // returns undefined
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:17:16.117

您可能在设置值之前登录这些值。由于您正在处理 ajax 请求，因此您不应该线性思考。

与其在函数结束时在外部登录值，不如在成功函数结束时记录它们：

```
$.each(livestreams, function () {
    if(this.provider === 'TwitchTV') {
        $.ajax({
            url: 'http://api.justin.tv/api/stream/list.json?channel=' + this.channel.toLowerCase(),
            dataType: 'jsonp',
            jsonp: 'jsonp',
            success: $.proxy(function (stream) {
                this.live = true;
                this.count = stream[0].channel_count;
                console.log(this); //HERE
            }, this)
        }); 
```

如果在处理异步响应返回的数据时不考虑异步响应，则可能会产生不一致的结果。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:54:09.257

“this”是上下文相关的，您正在进入闭包，这会将“this”更改为您不期望的内容。考虑将对象缓存在每个...的顶部...

```
var $this = $(this); 
```

# android - 如何清除 Android 浏览器中的图标缓存？

> ID：10833980
> 
> 赞同：1
> 
> 时间：2012-05-31T12:49:56.273
> 
> 标签：android, browser, apple-touch-icon

我一直在测试将网站图标用于移动 web 应用程序。我想我在 Android 上遇到了缓存刷新问题。

我有两个用于测试的图标图像，big.png (114x114) 和 small.png (32x32)。如果我制作一个测试页：

```
<html>

<head>

<link rel="apple-touch-icon" href="./small.png" />

</head>

<body>

Test icon page

</body>

</html> 
```

我现在可以使用“将书签添加到主屏幕”功能，并在主屏幕上创建网站的快捷方式。但是，如果我将图像更改为 big.png 并尝试将其添加到主屏幕，即使页面上没有引用它，也会使用 small.png！

我认为这是缓存问题的原因是 1）重新启动我的设备似乎可以解决问题，2）我回家了，第二天早上回来时，使用了正确的图标。但是，明确清除我设备上的缓存不会刷新图标，导致我认为图标没有保存在那里，而是保存在其他一些缓存中。

有没有办法强制图标更新，无论是通过缓存头还是设备操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:12:17.837

我目前无法自己测试它，但我认为以下问题的答案可以解决您的问题。

[如何强制刷新图标](https://stackoverflow.com/questions/2208933/how-do-i-force-a-favicon-refresh)

所以就这样写吧：

`<link rel="shortcut icon" href="http://www.yoursite.com/favicon.ico?v=2" />`

# jquery - 选中复选框时更改标签

> ID：10833982
> 
> 赞同：0
> 
> 时间：2012-05-31T12:49:59.957
> 
> 标签：jquery, html, css, checkbox, label

我有很多带有复选框的列表，如下所示：

```
<ul>
   <li><label class="highlight"><input type="checkbox" id="1" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="223" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="32" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="42" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="54" class="filteritem">Lorem Ipsum</label</li>
</ul>

<ul>
   <li><label class="highlight"><input type="checkbox" id="43" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="343" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="342" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="53" class="filteritem">Lorem Ipsum</label</li>
   <li><label class="highlight"><input type="checkbox" id="55" class="filteritem">Lorem Ipsum</label</li>
</ul> 
```

每个复选框都有一个唯一的 ID

我想在检查时切换标签的背景颜色。

这是我得到的，但它不起作用：

jQuery：

```
$(".filteritem").click(function(){
    $(this).toggleClass('highlight');
}); 
```

CSS：

```
.highlight {
    //change something
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:55:17.837

HTML：

```
<ul class="checkboxlist">
   <li><label><input type="checkbox" id="1"> Lorem Ipsum</label></li>
   <li><label><input type="checkbox" id="223"> Lorem Ipsum</label></li>
   <li><label><input type="checkbox" id="32"> Lorem Ipsum</label></li>
</ul> 
```

JavaScript：

```
$( '.checkboxlist' ).on( 'click', 'input:checkbox', function () {
   $( this ).parent().toggleClass( 'highlight', this.checked );
}); 
```

**现场演示：http:** [//jsfiddle.net/MGVHX/1/](http://jsfiddle.net/MGVHX/1/)

请注意，我使用**事件委托**，而不是将相同的处理程序绑定到*每个*复选框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:55:10.007

您当前正在尝试调用`toggleClass`元素`input`，而不是`label`. 您可以使用[`parent`](http://api.jquery.com/parent/)获取`label`：

```
$(".filteritem").click(function(){
    $(this).parent().toggleClass('highlight');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:55:05.733

```
$(".filteritem").on('change', function(){
     $(this).closest('label').toggleClass('highlight');
}); 
```

[小提琴](http://jsfiddle.net/adeneo/xgCMf/)

# uiviewcontroller - 清理项目 xcode 后的 SIGABRT

> ID：10833989
> 
> 赞同：0
> 
> 时间：2012-05-31T12:50:29.377
> 
> 标签：uiviewcontroller, interface-builder

我的代码在几天和几周的代码更改中运行良好，并且在我清理它之前在我的 iPhone 5.0 模拟器上运行。

现在它死在这条线上`[window addSubview:self.viewController.view];`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    [self.window addSubview:self.viewController.view];   // dies here
    [self.window makeKeyAndVisible];

    return YES;
} 
```

`self.viewController`存在，但`self.viewController.view`不存在。

![<code>self.viewController.view</code> 不存在](../Images/535c36a3eb1a8ba3324e6fc3247cf0ee.png)

编辑添加我的`AppDelegate.h`：

```
#import <UIKit/UIKit.h>

@class MainMenu;

@interface yomikakiAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    MainMenu *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet MainMenu *viewController;

@end 
```

我认为 IB 一定在某处失去了连接，但我不确定如何重新连接它。

我将 MainMenu.xib 引用出口视图设为文件所有者，但这并没有解决问题。

![这没有帮助，但我希望它会！](../Images/e92385a7b5b3052bf3c4ed9d894532a7.png)

如何让我的 viewController 取回它的视图？

编辑以添加我的 nib 文件的身份检查器的屏幕截图：

![.xib 文件的所有者身份检查器的屏幕截图](../Images/ac8e32d80290ab990ac6b1f4cae5503d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:03:02.393

你好，你为什么这样做？

`[window addSubview:self.viewController.view];`

尝试这个

`[self.window addSubview:self.viewController.view];`
`[self.window makeKeyAndVisible];`
`return YES;`

文件所有者必须链接到 ViewController 的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:32:47.527

*你不能重命名你的 UIViewControllers。*

几周前，我将原来的 firstProjectViewController 重命名为 MainMenu，使其名称与 FooMenu 和 BarMenu（其兄弟名称）相匹配。

我不知道当时为什么该项目一直在编译，但是直到我几天前清理了我的代码，问题才变得明显。

所以我选择的答案在大部分情况下都是正确的，但为了自己解决这个问题，我需要将每次出现的“MainMenu”都取消更改回“firstProjectViewController”。

# c# - C# 对象层次结构

> ID：10833991
> 
> 赞同：1
> 
> 时间：2012-05-31T12:50:45.087
> 
> 标签：c#, object

我有一个单元列表，每个列表都有一个站点列表。

有时我需要获取一个站的父单元。

我将如何实现这个层次结构？

*   我应该将父单元格保留为站对象中的属性吗？
*   我应该只在站对象中保留父单元 ID 吗？
*   做点不一样的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:53:34.183

如果我是你，我会创建两个类：

```
public class Cell {
 ...
  public List<Station> Stations {
    get {...}
  }

  protected Station AddStation() {
     Station result = new Station(this);
     Stations.Add(result);
     return result;
  }
}

public class Station {
  public Station(Cell cell) {
    this.cell = cell;
  }
  Cell cell;
  public Cell Cell {get {return cell;}}
} 
```

有了这个结构，您总是可以从 Station 对象访问 Cell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T12:52:43.807

如果您需要从 导航回`Station`，则`Cell`需要该`Station`对象具有设置为其父单元格的`ParentCell`（或）属性。`Cell`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:59:01.343

如果您想要不同的答案，有一种方法可以在没有实际组合的情况下实现层次结构。创建一个站对象，其中每个方法都接受 Cell 作为参数，例如：

```
public void DoStuff(whatever x, Cell parent)
{

} 
```

每个站将在其父单元的上下文中进行评估，但您可以使用相同的`Station`对象来表示层次结构中的不同站。

提供该解决方案是为了多样化。在大多数情况下，要走的路是组合，如上所述。另外，我认为你应该使用 Cell 本身，而不是它的 Id。

# jquery - 在 knockoutjs 中使用 optgroup 进行多选

> ID：10833997
> 
> 赞同：1
> 
> 时间：2012-05-31T12:50:58.200
> 
> 标签：jquery, asp.net-mvc-3, knockout-2.0

我有一个关于 KnockoutJS 和多选组的问题。我有这个结构：

```
var Contact = function (contact) {
    var self = this;
    self.idContact = contact.IdContact;
    self.displayName = contact.DisplayName;
    self.mails = ko.observableArray(ko.utils.arrayMap(contact.Emails, function (mail) {
        return { mail: mail };
    }));
};

var Quote = function (quote) {
    var self = this;
    self.contacts = ko.observableArray(ko.utils.arrayMap(quote.ProviderContacts, function (contact) {
        return new Contact(contact);
    }));
}; 
```

并且主 ModelView 有一个 Quote 和 mainContactsList。然后我有选择：

```
<select data-bind="foreach: contacts, value: $root.quote.contacts" multiple="multiple">
                    <optgroup data-bind="attr: {label: displayName, value: idContact}, foreach: mails">
                        <option data-bind="text: mail, value: mail"></option>
                    </optgroup>
                 </select> 
```

所以.. 问题是我不知道如何仅使用我选择的联系人和选择的电子邮件来保存报价。我的意思是，选择看起来像这样：

```
[John Doe]
---- john@doe.com
---- john2@doe.com--->selected by client
[Jane Doe]
---- jane@doe.com--->selected by client 
```

所以，在我的报价中，我需要有 JohnDoe 的联系人列表和邮件 john2@doe.com 以及联系人 Jane Doe 和邮件 jane@doe.com。

我希望你能理解我的问题并有一个解决方案:)

谢谢！

# php - 如何使用从 stdClass 对象数组中内爆一列？

> ID：10833999
> 
> 赞同：25
> 
> 时间：2012-05-31T12:51:06.370
> 
> 标签：php, arrays, implode, csv, stdclass

我有一组`stdClass`对象，我想使用所有这些`stdClass`对象的一个​​特定字段构建一个逗号分隔的列表。我的数组如下所示：

```
$obj1 = stdClass Object ( [foo] => 4 [bar] => 8 [foo-bar] => 15 );
$obj2 = stdClass Object ( [foo] => 16 [bar] => 23 [foo-bar] => 42 );
$obj3 = stdClass Object ( [foo] => 76 [bar] => 79 [foo-bar] => 83 );

$a = array(1=>$obj1 , 2=>$obj2 , 3=>$obj3); 
```

我想对该数组`foo`中的所有`stdClass`对象进行内爆以创建一个逗号分隔的列表。所以想要的结果是：

```
4,16,76 
```

有没有办法用 implode （或其他一些神秘的函数）来做到这一点，而不必让这个对象数组通过一个循环？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T12:54:09.513

你可以使用[`array_map()`](http://php.net/manual/en/function.array-map.php)和`implode()`...

```
$a = array_map(function($obj) { return $obj->foo; }, 
               array(1=>$obj1 , 2=>$obj2 , 3=>$obj3));

$a = implode(", ", $a); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-05-29T00:03:37.107

使用 PHP 7.0+，您可以使用`array_column`它。

```
echo implode(',', array_column($a, 'foo')); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-31T15:47:21.643

这实际上是我发现的最好方法，这里似乎没有正确回答，因为对象数组应该能够处理动态大小。

```
$str = implode(',', array_map(function($x) { return $x->foo; }, $a)); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-25T12:35:36.973

您实际上可以[`__toString()`](http://php.net/manual/en/language.oop5.magic.php#object.tostring)按照 Ray 的建议设置类，但您不需要遍历第`array`一个。[`implode()`](http://php.net/manual/en/function.implode.php)将直接调用`__toString()`对象的函数（这也适用于关联数组，顺便说一句）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-31T12:58:35.107

一个非常巧妙的解决方案是[`array_reduce()`](http://php.net/array_reduce)函数，它将数组减少为单个值：

```
$str = array_reduce($a, function($v, $w) {
    if ($v) $v .= ',';
    return $v . $w->foo;
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-26T18:28:20.387

```
echo implode("','",(array)$data->stdArray); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T12:54:34.550

我想最简单的方法是创建一个 ID 索引数组，然后在 array_keys 上调用 implode：

```
$a = array();
$a[4] = stdClass Object ( [foo] => 4 [bar] => 8 [foo-bar] => 15 );
$a[16] = stdClass Object ( [foo] => 16 [bar] => 23 [foo-bar] => 42 );
$a[76] = stdClass Object ( [foo] => 76 [bar] => 79 [foo-bar] => 83 );

echo implode(', ', array_keys($a)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-31T12:54:51.353

不，您能做的最好的事情是遍历，在对象上调用 tostring() 并将结果放入一个新数组中以调用 implode。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-08T15:41:14.113

如果它是一个 1 级对象，这对我有用。

```
function implodeObjValues($glue, $obj) { 
    $s = "";
    foreach($obj[1] as $n=>$v) {
        $s .= $glue . $v;
    }
    return substr($s,strlen($glue));
}

function implodeObjLabels($glue, $obj) { 
    $s = "";
    foreach($obj[1] as $n=>$v) {
        $s .= $glue . $n;
    }
    return substr($s,strlen($glue));
} 
```

可以包括按类型的多级流程，但我还不需要。希望这可以帮助。

方便将 MySQL 对象转换回数组。

```
$db = new mysqli("localhost",$usr,$pw,$db);
$row = $db->query("SHOW TABLES");
$a = implodeObjValues("|",$row); 
```