# StackOverflow 问答 000919000-000919999

# ruby-on-rails - EC2onRails + SSL + Apache：端口 443 无响应

> ID：919008
> 
> 赞同：3
> 
> 时间：2009-05-28T03:05:01.503
> 
> 标签：ruby-on-rails, apache, ssl, amazon-ec2

我正在尝试在 EC2onrails 上配置 SSL，但没有成功。目前我什至无法在端口 443 上远程登录到我的服务器，它只是说`trying MY.IP.ADDRESS...`并无限期地停留在那里。Telnet 进入 80 工作正常。

[这](http://groups.google.com/group/ec2-on-rails-discuss/browse_thread/thread/79b60bf683b2365b)是我的出发点。我完全按照说明进行操作，因为我有一个 go daddy 证书，所以我创建了这个自定义的 default-ssl 文件，所以我可以添加 SSLCertificateChainFile 指令：

```
NameVirtualHost *:443
<VirtualHost *:443>

  Include /etc/apache2/sites-available/app.custom
  Include /etc/apache2/sites-available/app.common

  ErrorLog /mnt/log/apache2/error.log
  LogLevel warn

  CustomLog /mnt/log/apache2/access.log combined

  # see http://httpd.apache.org/docs/2.2/ssl/ssl_intro.html and http://httpd.apache.org/docs/2.2/mod/mod_ssl.html
  SSLEngine On
  SSLCertificateFile    /etc/ec2onrails/ssl/cert/ec2onrails-default.crt
  SSLCertificateKeyFile /etc/ec2onrails/ssl/private/ec2onrails-default.key
  SSLCertificateChainFile    /etc/ec2onrails/ssl/cert/ec2onrails-chain.crt 

  RequestHeader set X_FORWARDED_PROTO 'https'
  ServerName MY_SERVER_NAME
</VirtualHost> 
```

请注意，我必须添加

```
 ServerName MY_SERVER_NAME 
```

否则我在 apache 启动时在 error.log 文件中看到以下警告：

```
[Wed May 27 19:46:20 2009] [warn] RSA server certificate CommonName (CN) ` MY_SERVER_NAME' does NOT match server name!? 
```

我已经运行 cap ec2onrails:server:enable_ssl，apache 启动干净，通过端口 80 的常规访问有效，并且 apache 访问日志表明没有对端口 443 的请求活动。我知道 apache 正在加载我的 default-ssl 配置文件，因为如果我键入 gobbledygook在他们中，它在启动时抱怨。

有没有其他人成功让 SSL 与 EC2onRails 一起工作？我还能做些什么来调试这个问题？现在我正在使用基于 Ubuntu 版本的 ec2onRails 版本 0.9.9.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T05:03:49.293

好的，我想通了。亚马逊的 EC2 拥有自己的防火墙作为其“安全组”概念的一部分。此防火墙阻止了端口 443。

# asp.net - 在 ASP.NET 3.5 中生成媒体 RSS (MRSS) 提要

> ID：919011
> 
> 赞同：3
> 
> 时间：2009-05-28T03:06:56.133
> 
> 标签：asp.net, .net-3.5, rss

在 .NET 3.5 中，我知道 System.ServiceModel.Syndication 类可以创建 Atom 1.0 和 RSS 2.0 RSS 提要。有谁知道在 ASP.Net 中轻松生成雅虎媒体 RSS 的方法？我正在寻找一种免费且快速的方式来生成 MRSS 提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-05T19:12:42.267

这是我最终在 HttpHandler (ashx) 中使用的简化解决方案：

```
 public void GenerateRss(HttpContext context, IEnumerable<Media> medias)
    {
        context.Response.ContentType = "application/rss+xml";
        XNamespace media = "http://search.yahoo.com/mrss";
        List<Media> videos2xml = medias.ToList();

        XDocument rss = new XDocument(
            new XElement("rss", new XAttribute("version", "2.0"),
                new XElement("channel",
                    new XElement("title", ""),
                    new XElement("link", ""),
                    new XElement("description", ""),
                    new XElement("language", ""),
                    new XElement("pubDate", DateTime.Now.ToString("r")),
                    new XElement("generator", "XLinq"),

                    from v in videos2xml
                    select new XElement("item",
                               new XElement("title", v.Title.Trim()),
                               new XElement("link", "",
                                   new XAttribute("rel", "alternate"),
                                   new XAttribute("type", "text/html"),
                                   new XAttribute("href", String.Format("/Details.aspx?vid={0}", v.ID))),
                               new XElement("id", NotNull(v.ID)),
                               new XElement("pubDate", v.PublishDate.Value.ToLongDateString()),
                               new XElement("description",
                                   new XCData(String.Format("<a href='/Details.aspx?vid={1}'> <img src='/Images/ThumbnailHandler.ashx?vid={1}' align='left' width='120' height='90' style='border: 2px solid #B9D3FE;'/></a><p>{0}</p>", v.Description, v.ID))),
                               new XElement("author", NotNull(v.Owner)),
                               new XElement("link",
                                   new XAttribute("rel", "enclosure"),
                                   new XAttribute("href", String.Format("/Details.aspx?vid={0}", v.ID)),
                                    new XAttribute("type", "video/wmv")),
                               new XElement(XName.Get("title", "http://search.yahoo.com/mrss"), v.Title.Trim()),
                               new XElement(XName.Get("thumbnail", "http://search.yahoo.com/mrss"), "",
                                   new XAttribute("url", String.Format("/Images/ThumbnailHandler.ashx?vid={0}", v.ID)),
                                   new XAttribute("width", "320"),
                                   new XAttribute("height", "240")),
                               new XElement(XName.Get("content", "http://search.yahoo.com/mrss"), "a",
                                    new XAttribute("url", String.Format("/Details.aspx?vid={0}", v.ID)),
                                    new XAttribute("fileSize", Default(v.FileSize)),
                                    new XAttribute("type", "video/wmv"),
                                    new XAttribute("height", Default(v.Height)),
                                    new XAttribute("width", Default(v.Width))
                                    )
                            )
                     )
                )
               );

        using (XmlWriter writer = new XmlTextWriter(context.Response.OutputStream, Encoding.UTF8))
        {
            try
            {
                rss.WriteTo(writer);
            }
            catch (Exception ex)
            {
                Log.LogError("VideoRss", "GenerateRss", ex);
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T21:10:46.400

第 1 步：将数据转换为 XML：

所以，给定一张列表照片：

```
var photoXml = new XElement("photos",
  new XElement("album",
    new XAttribute("albumId", albumId),
    new XAttribute("albumName", albumName),
    new XAttribute("modified", DateTime.Now.ToUniversalTime().ToString("r")),
      from p in photos
        select
          new XElement("photo",
            new XElement("id", p.PhotoID),
            new XElement("caption", p.Caption),
            new XElement("tags", p.StringTags),
            new XElement("albumId", p.AlbumID),
            new XElement("albumName", p.AlbumName)
            )  // Close element photo
    ) // Close element album
  );// Close element photos 
```

第 2 步：通过一些 XSLT 运行 XML：

然后使用类似下面的内容，通过[一些 XSLT](http://www.doodle.co.uk/xsl/rssPhotos.xslt)运行它，其中 xslPath 是 XSLT 的路径，current 是当前的 HttpContext：

```
var xt = new XslCompiledTransform();
xt.Load(xslPath);

var ms = new MemoryStream();

if (null != current){
  var xslArgs = new XsltArgumentList();
  var xh = new XslHelpers(current);
  xslArgs.AddExtensionObject("urn:xh", xh);

  xt.Transform(photoXml.CreateNavigator(), xslArgs, ms);
} else {
  xt.Transform(photoXml.CreateNavigator(), null, ms);
}

// Set the position to the beginning of the stream.
ms.Seek(0, SeekOrigin.Begin);

// Read the bytes from the stream.
var byteArray = new byte[ms.Length];
ms.Read(byteArray, 0, byteArray.Length);

// Decode the byte array into a char array 
var uniEncoding = new UTF8Encoding();
var charArray = new char[uniEncoding.GetCharCount(
    byteArray, 0, byteArray.Length)];
uniEncoding.GetDecoder().GetChars(
    byteArray, 0, byteArray.Length, charArray, 0);
var sb = new StringBuilder();
sb.Append(charArray);

// Returns the XML as a string
return sb.ToString(); 
```

我将这两位代码放在一个方法“BuildPhotoStream”中。

“XslHelpers”类包含以下内容：

```
public class XslHelpers{
  private readonly HttpContext current;

  public XslHelpers(HttpContext currentContext){
    current = currentContext;
  }

  public String ConvertDateTo822(string dateTime){
    DateTime original = DateTime.Parse(dateTime);

    return original.ToUniversalTime()
      .ToString("ddd, dd MMM yyyy HH:mm:ss G\"M\"T");
  }

  public String ServerName(){
    return current.Request.ServerVariables["Server_Name"];
  }
} 
```

这基本上为我提供了 XSLT 没有给我的一些很好的日期格式。

第 3 步：将生成的 XML 呈现回客户端应用程序：

“BuildPhotoStream”由“RenderHelpers.Photos”和“RenderHelpers.LatestPhotos”调用，它们负责从Linq2Sql对象中获取照片细节，它们是从一个空的aspx页面调用的（我现在知道这应该是一个ASHX 处理程序，我还没来得及修复它）：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.ContentType = "application/rss+xml";
    ResponseEncoding = "UTF-8";

    if (!string.IsNullOrEmpty(Request.QueryString["AlbumID"]))
    {
      Controls.Add(new LiteralControl(RenderHelpers
        .Photos(Server.MapPath("/xsl/rssPhotos.xslt"), Context)));
    }
    else
    {
      Controls.Add(new LiteralControl(RenderHelpers
        .LatestPhotos(Server.MapPath("/xsl/rssLatestPhotos.xslt"), Context)));
    }
} 
```

最后，我得到了这个：

> [http://www.doodle.co.uk/Albums/Rss.aspx?AlbumID=61](http://www.doodle.co.uk/Albums/Rss.aspx?AlbumID=61)

当我设置它时，它在 Cooliris/PicLens 中工作，但是现在似乎在反射平面中渲染图像，当你点击它们时，而不是在墙视图中:(

如果您在上面错过了它，可以在这里找到 XSLT：

> [http://www.doodle.co.uk/xsl/rssPhotos.xslt](http://www.doodle.co.uk/xsl/rssPhotos.xslt)

您显然需要对其进行编辑以满足您的需要（并在 Visual Studio 中打开它 - FF 隐藏了大部分样式表定义，包括 xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss"）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-02T14:05:14.250

通过执行以下操作，我能够将媒体命名空间添加到 rss 标签：

```
XmlDocument feedDoc = new XmlDocument();
feedDoc.Load(new StringReader(xmlText));
XmlNode rssNode = feedDoc.DocumentElement;
// You cant directly set the attribute to anything other then then next line. So you have to set the attribute value on a seperate line.
XmlAttribute mediaAttribute = feedDoc.CreateAttribute("xmlns", "media", "http://www.w3.org/2000/xmlns/");
mediaAttribute.Value = "http://search.yahoo.com/mrss/";
rssNode.Attributes.Append(mediaAttribute);

return feedDoc.OuterXml; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-09T01:15:26.740

只是添加另一个选项以供将来参考：

我创建了一个库，它利用 .NET 中的 SyndicationFeed 类并允许您读取和写入媒体 rss 提要。

[http://mediarss.codeplex.com](http://mediarss.codeplex.com)

# php - PHP 使用 Javascript 生成文本框操作

> ID：919013
> 
> 赞同：0
> 
> 时间：2009-05-28T03:07:27.037
> 
> 标签：php, javascript, jquery, html

我正在使用文本框让用户更改电子商务网站中的数量，例如[http://nordschleife.metaforix.net/118/118/index.php/sony.html](http://nordschleife.metaforix.net/118/118/index.php/sony.html)

我希望解决两个问题：

1.  在目录视图（例如上一个 URL 中的那个）上，向上和向下箭头仅适用于第一个文本框。所有后续条目都不起作用。

2.  单击箭头后，页面转到顶部，这也不是我想要的。

PHP 用于生成条目，jQuery 用于操作。

该页面的源文件在这里[http://www.mediafire.com/?sharekey=9df4aef22a728de5c2b435915e8821d7e04e75f6e8ebb871](http://www.mediafire.com/?sharekey=9df4aef22a728de5c2b435915e8821d7e04e75f6e8ebb871)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T06:11:54.967

1：您可以只为所有箭头制作一个脚本，而不是分别为每个箭头注册一个事件。使箭头看起来像这样：

```
<a id="upImg_705" ... rel="qty_705" class="uparrow">
<input id="qty_705" class="input-text qty" type="text" value="1" maxlength="12" name="qty"/>
<a id="downImg_705" ... rel="qty_705" class="downarrow"> 
```

然后将这些函数注册为单击事件处理程序：

```
$('.uparrow').live("click", function() { 
   var rel = $(this).attr('rel');
   var textbox = document.getElementById(rel);
   textbox.value = parseInt(textbox.value)+1;
   return false;
}
$('.downarrow').live("click", function() { 
   var rel = $(this).attr('rel');
   var textbox = document.getElementById(rel);
   textbox.value = parseInt(textbox.value)-1;
   return false;
} 
```

2：为了防止转到页面顶部，`href="javascript:void(0);"`而不是`href="#"`在您的链接中使用。或者，您的 onclick 方法可能会返回 false 以阻止默认操作（即更改网页的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T03:47:16.710

1.  使用 jQuery[`live()`](http://docs.jquery.com/Events/live)创建将在通过 AJAX 更新更改页面时重新应用的事件。
2.  [`event.preventDefault()`](http://docs.jquery.com/Events/jQuery.Event#event.preventDefault.28.29)会阻止这个。

# django - Django 问题：如何获取与域对象相关的用户特定信息？

> ID：919015
> 
> 赞同：1
> 
> 时间：2009-05-28T03:08:32.573
> 
> 标签：django, django-templates

这是我的模型：

```
class Activity(models.Model):
    title = models.CharField(blank=False, max_length=100)
    description = models.TextField(blank=False)

class UserActivityWork(models.Model):
    activity = models.ForeignKey(Activity)
    user  = models.ForeignKey(User)
    hours_worked = models.FloatField()
    comment = models.TextField() 
```

示例数据是“攀登珠穆朗玛峰”的活动，每个用户都可以输入他们花了多长时间和评论。

这是我的问题：如何显示所有活动的列表，如果用户已为该活动输入数据，则在活动旁边显示相关详细信息？

到目前为止，我考虑过：

*   使用 Activity id 的键和用户的 UserActivityWork 的值创建 UserActivityWork 的字典。这对我来说很好，但我不知道如何在 django 的模板系统中执行此操作（即，你怎么说：{{ user_work[activity.id] }}）
*   创建一个同时包含 Activity 和 UserActivityWork 的对象。我没有做过这个，因为我希望 django 有更好的方法来做到这一点。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T05:50:59.987

假设您有 2 个可从模板中访问的查询集（例如活动和 user_activities）

一种天真的方法是遍历每个活动，然后遍历每个用户活动。

```
{% for activity in activities %}
    {{ activity.title }} 
    {% for user_activity in user_activities %}
        {% ifequal user_activity.activity activity %}
            Display userdata
        {% endifequal %}    
    {% endfor %}
{% endfor %} 
```

可以使用点 (.) 在模板中执行字典查找

> 从技术上讲，当模板系统遇到点时，它会按以下顺序尝试以下查找：
> 
> *   字典查找
> *   属性查找
> *   方法调用
> *   列表索引查找

另一种选择是创建[自定义模板标签](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。您可以像以前一样遍历活动列表，然后将活动和 user_activity 列表或用户传递给标签以执行查找并呈现所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T01:41:20.207

谢谢你的提示，格里。我发现按照您的建议编写自定义模板标签是可行的方法。以下是血淋淋的细节，以防有人偶然发现。

在视图方法中，我发布了一个字典“user_activity_status”，其中包含一个 key 的 activity.id 和 UserActivityWork 对象的值，用于登录用户在该活动上的工作

这是模板的相关部分。基本上这将添加一个变量“map_value”，其值为

```
getattr(user_activity_status[activity.id], "comment") 
```

这是模板：

```
{% load *file-name-of-the-templatetag-file* %}
{% access_map_method user_activity_status activity.id comment %}
{% if map_value %}
    {{ map_value }}
{% else %}
    get working sucka!
{% endif %} 
```

这是模板标签文件的部分（有关如何设置的详细信息，请参阅 Gerry 的链接）

```
from django import template

register = template.Library()

@register.tag(name="access_map_method")
def do_access_map_method(parser, token):
    try:    
        tag_name, dict_name , key_name, method_name = token.contents.split()
    except ValueError:
        msg = '%r tag requires three arguments' % token.contents[0]
        raise template.TemplateSyntaxError(msg)

    return MapNode(dict_name , key_name, method_name)

class MapNode(template.Node):
    def __init__(self, dict_name, key_name, method_name):
        self.dict_var = template.Variable(dict_name)
        self.key_var  = template.Variable(key_name)
        self.method_name = method_name

    def render(self, context):
        try:
            dict_obj = self.dict_var.resolve(context)
            key_obj  = self.key_var.resolve(context)
            if key_obj in dict_obj.keys():
                if self.method_name:
                    context['map_value'] = getattr(dict_obj[key_obj], self.method_name)
                else:
                    context['map_value'] = dict_obj[key_obj] 
            else:
                context['map_value'] = ''
        except template.VariableDoesNotExist:
            context['map_value'] = ''

        return '' 
```

# javascript - 存储 HTML 列表的顺序而不更新数据库中的每一行？

> ID：919017
> 
> 赞同：3
> 
> 时间：2009-05-28T03:08:44.930
> 
> 标签：javascript, sql, html

我有一个可以排序的 HTML 列表（使用[jQuery 的 sortable API](http://docs.jquery.com/UI/Sortable)）。我将列表项存储在数据库中；每行存储项目的顺序和文本。**如何存储列表项的顺序，以便在项的顺序更改时不需要更新多行？**可以添加和删除列表项。

这是我正在谈论的一个例子：

```
<ol>
  <li>Go shopping</li> <!-- Order: 1 -->
  <li>Go jogging</li> <!-- Order: 2 -->
  <li>Eat</li> <!-- Order: 3 -->
</ol> 
```

用户将“Eat”列表项移动到顶部，现在我必须更新数据库中的每一行来存储订单。

```
<ol>
  <li>Eat</li> <!-- Order: 3, now update to 1 -->      
  <li>Go shopping</li> <!-- Order: 1, now update to 2 -->
  <li>Go jogging</li> <!-- Order: 2 now update to 3 -->
</ol> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T03:13:52.720

有一次我必须做的是有某种“标题”记录，按顺序存储所有“项目”的 ID，用逗号分隔......
所以，在你的情况下，我会存储第一个版本为 1,2,3，第二个版本为 3,1,2。

这绝对没有标准化，感觉很丑，但是：

*   当用户更改订单时，您只更新 ONE 行。这很重要，我们的名单可能会变大。
*   当用户添加一个项目时，该项目自然会落在列表的开头或结尾，这取决于您检索项目以显示它们的方式。

当你想显示列表时，你读取项目并将它们放入一个哈希表中，按它们的 ID 排序。然后你读取设置顺序的字符串，用逗号分割它，对于每个 ID，你在哈希表中找到相应的项目，并将其添加到“列表”或“集合”中。
然后，如果您的哈希表中还有项目，您可以将它们附加到列表的开头或结尾，具体取决于您希望新事物出现的位置。

只是我的 2 美分

# vb.net - 如何在 Windows 窗体中设置列表项的文本

> ID：919025
> 
> 赞同：1
> 
> 时间：2009-05-28T03:16:50.140
> 
> 标签：vb.net, winforms

我试图弄清楚如何设置为列表控件的每个项目显示的文本的值，例如复选框列表，但实际上这适用于大多数列表控件，而不仅仅是复选框控件。

我有一个复选框控件，

```
 Friend WithEvents clstTasks As System.Windows.Forms.CheckedListBox 
```

我通常想用任务名称列表填充。我调用 add 方法将 Task 对象添加到列表中。我知道，如果我重写 ToString 方法，该函数返回的任何值都将显示为列表项的文本。

但是，在极少数情况下，我想显示除名称之外的其他内容。例如，也许我想显示另一个属性的名称和值，例如在名称后面的括号中显示的布尔属性“可选”的值。

做这个的最好方式是什么？

我能想到的最好的方法是定义一个在 GUI 层中设置的属性，然后由 ToString 函数用于确定调用时它的行为方式。如果控制属性设置为一个值，则 ToString 将返回 Name，否则它将返回 Name 后跟 Optional 标志的值。这对我来说似乎有点脱节。

另一个看起来有点过头的替代方法是定义一个继承自 Task 的新类，例如 TaskOptional，它覆盖了基类上的 Tostring 方法。在这个子类中，ToString 函数将返回 Name/Optional 标志值。然而，这也似乎有点疯狂，必须提出一个新类来修改文本在表示层中的显示方式。我觉得我应该能够在表示层中控制这一点，而无需更改业务对象或创建新的派生对象。

实现这一目标的最佳方法是什么？

```
 For Each CurrentTask As Task In _MasterTaskList
        clstTasks.Items.Add(CurrentTask, True)
    Next

    Public Class Task

       Private _Name As String
       Private _Optional As Boolean

       Public Sub New (name As String, optional As Boolean)
           _Name = name
       End Sub

       Public Overrides Function ToString() As String
           Return _Name
           End If
       End Function

    End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T15:45:44.717

您可以将 CheckedListBox 的 DisplayMember 属性设置为自定义类属性之一的名称。

假设您创建了一个如下所示的属性：

```
Public ReadOnly Property NameOptional() As String
  Return _Name & " (" & _Optional & ")"
End Property 
```

然后你可以像这样设置显示成员：

```
clstTasks.DisplayMember = "NameOptional" 
```

设置显示成员时，将显示此属性而不是 ToString 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T03:35:54.083

您可以执行以下操作

```
Public Overrides Function ToString() As String
   Return string.Format("{0}{1}", _Name, IIF(_Optional, " (Optional)", ""))
End Function
```

编辑：您必须在构造函数中设置 _optional 的值，您提供的代码中缺少该值。

# javascript - javascript中的对象变量是否按添加顺序枚举？

> ID：919027
> 
> 赞同：2
> 
> 时间：2009-05-28T03:17:29.450
> 
> 标签：javascript, iteration

> **可能重复：**
> [元素顺序 - javascript中的for（... in ...）循环](https://stackoverflow.com/questions/280713/elements-order-for-in-loop-in-javascript)

假设你有这样的代码：

```
var a = {}
a.a = 1;
a.c = 2;
a.b = 3;

for (var i in a) {
    console.log(a[i]);
} 
```

1、2 和 3 是否保证按该顺序打印？我已经测试过，到目前为止情况就是这样，但我不知道它是否永远都是真的。有没有不这样做的浏览器？没有什么奇怪的事情发生，比如删除东西、原型继承等。只是向对象添加属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T03:24:34.227

除 Chrome 之外的所有当前浏览器都将按照定义的顺序循环对象的属性。

这是 chrome 错误报告：[http](http://code.google.com/p/chromium/issues/detail?id=883) ://code.google.com/p/chromium/issues/detail?id=883 。它目前被标记为`WontFix`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:45:12.223

在我当前版本的 Chrome (2.0.172.28) 中，John Resig 的测试用例通过了，所以它现在可能在 Chrome 中修复了吗？

# windows - 在 Windows 上开发 GUI 的最佳语言/工具

> ID：919029
> 
> 赞同：1
> 
> 时间：2009-05-28T03:19:32.223
> 
> 标签：windows, user-interface, new-operator

我查看了提供给“GUI 编程 API”帖子的答案，想知道这些答案是否仍然适用。
[https://stackoverflow.com/questions/610/gui-programming-apis](https://stackoverflow.com/questions/610/gui-programming-apis)

特别是从该线程来看，QT 似乎是 wxWidgets 引用最多的一个，而 Shoes 紧随其后的是第二和第三。

我只是想确保自该问题发布以来的过去 6 个月内没有出现最终的获胜者。

我受限于开源和免费软件解决方案，所以我会强烈倾向于这种方式。

感谢您的任何反馈和见解。我对 Perl、C++ 和 VB 有一点经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T03:55:05.943

QT 仍然是目前最流行的开源 GUI 编程 API 之一，因为它可以针对所有主要平台（Linux、OS X 和 Windows）。我认为这个问题的结果在过去 6 个月内没有太大变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T17:02:46.293

.NET 通过 Mono (mono-project.com)

# perl - 如何在 Perl 中获得相关性的 t 统计量和 p 值？

> ID：919031
> 
> 赞同：3
> 
> 时间：2009-05-28T03:21:45.260
> 
> 标签：perl, statistics

我正在尝试计算 Perl 中的相关性。我发现了如何计算[CPAN](http://search.cpan.org)中数组之间的相关性，但我似乎不知道如何获得这些相关性的 t 统计量和 p 值（R 自动给出这些）。这在 Perl 中是否可行？我希望有人可以提供帮助，因为我需要确定相关性的重要性。提前谢谢了！

-阿卜杜勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T03:29:27.913

[这](https://stackoverflow.com/questions/675021/perl-programming-efficiency-when-computing-correlation-coefficients-for-a-large/675363#675363)可能会有所帮助。p值基本上是相关系数是否显着不同于0，所以这是在测试：t=r/sqrt[(1-r²)/(N-2)]，自由度为n-1。再次 Math::GSL 将为您获取 t 的 p 值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T10:45:23.543

[Statistics::Distributions](http://search.cpan.org/~mikek/Statistics-Distributions-1.02/)可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T15:06:51.673

[Statistics::LineFit](http://search.cpan.org/perldoc?Statistics::LineFit)是您要搜索的吗？

# linq - 无法使用实体框架在表中插入数据

> ID：919032
> 
> 赞同：0
> 
> 时间：2009-05-28T03:21:56.867
> 
> 标签：linq, entity-framework

我正在使用实体框架，但遇到了问题：

当我尝试在表中插入一些数据时，它告诉我它违反了引用的完整性，但另一个表通常已填充并且具有我要插入的值。

```
Pedido pedido = new Pedido();
pedido.Data = DateTime.Now;

db.AddToPedido(pedido);
db.SaveChanges();

EntityKey chave = db.CreateEntityKey("Pedido", pedido);
Itens_Pedido item = new Itens_Pedido();

item.Pedido_Id = Convert.ToInt32(chave.EntityKeyValues.First().Value);
item.Carta_Id = Convert.ToInt32(Request.QueryString["Id"].ToString());                    
item.Quantidade = 1;
item.Foil = "N";

db.AddToItens_Pedido(item);
db.SaveChanges();
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-14T16:09:48.813

我认为你需要做你的外键更像：

`item.PedidoReference.EntityKey = new System.Data.EntityKey("[EntityNamespace].Pedido", "Pedido_Id", idValue);`

其中 [EntityNamespace] 是您的实体所在的命名空间。

# .net - String.Format 与“string”+“string”还是 StringBuilder？

> ID：919034
> 
> 赞同：20
> 
> 时间：2009-05-28T03:24:12.620
> 
> 标签：.net, performance, stringbuilder, string-concatenation, string.format

> **可能的重复：**
> [String.Format 是否与 StringBuilder C# 字符串输出一样高效](https://stackoverflow.com/questions/6785/is-string-format-as-efficient-as-stringbuilder)
> [：格式还是连接？](https://stackoverflow.com/questions/16432/c-string-output-format-or-concat)

什么是性能优先级以及优先选择以下各项的条件是什么：

```
String.Format("{0}, {1}", city, state); 
```

或者

```
city + ", " + state; 
```

或者

```
StringBuilder sb = new StringBuilder();
sb.Append(city);
sb.Append(", ");
sb.Append(state);
sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-28T03:39:51.890

*   编译器将尽可能多地优化字符串`concat`，例如，为了换行目的而拆分的字符串通常可以优化为单个字符串文字。
*   与变量的连接将被编译成`String.Concat`
*   `StringBuilder`如果您对字符串进行多次（我猜超过 10 次左右）“修改”，可能会快很多，但它会带来一些额外的开销，因为它在缓冲区中分配的空间比您需要的更多，并在它调整内部缓冲区的大小时需要。

我个人`String.Format`几乎所有时间都在使用，原因有两个：

*   维护格式字符串比重新排列一堆变量要容易得多。
*   `String.Format`接受`IFormatProvider`传递给`IFormattable`嵌入在字符串中的任何类型（例如数字）的 a，以便您获得指定**区域性**的适当数字格式，并总体上更好地控制值的格式。

例如，由于某些文化使用逗号作为小数点，因此如果您想确保数字的格式符合您的预期，您可能希望使用`StringBuilder`或者`String.Format`指定。`CultureInfo.InvariantCulture`

还有两点要注意...

*   `StringBuilder`还有一个`AppendFormat`功能可以让您灵活地`String.Format`不需要不必要的第二个缓冲区。
*   使用时`StringBuilder`，请确保不要通过连接传递给的参数来破坏目的`Append`。很容易错过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T03:36:36.267

没有相关的差异。但是假设 String.Format 内部使用了 StringBuilder（你可以使用 Reflector 工具看到），直接使用 StringBuilder.Append 应该会更快。

编辑：当然，使用“+”运算符是最糟糕的选择，因为它为您要连接的每个字符串创建一个新的字符串实例。

# asp.net - 使用 ASP.NET MVC、SQL Server、实体框架实现搜索框

> ID：919039
> 
> 赞同：3
> 
> 时间：2009-05-28T03:25:17.533
> 
> 标签：asp.net, asp.net-mvc, entity-framework, search

我没有构建搜索解决方案的经验，但我想在我的解决方案中有一个搜索框，我什至不知道从哪里开始。是否有很酷的 SQL Server 技巧可以用来提高搜索解决方案的性能（我使用的是托管 SQL 2008 服务器）我希望获得一个多步骤教程的指针，该教程从一个简单的查询搜索解决方案开始。 .然后在更高级的代码和功能上分层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T11:16:53.323

您实际上并没有说您是否需要/想要一个“蜘蛛”来“按原样”索引您的网站（如 Google；如果您在每个页面上的可搜索内容来自许多不同的表/对象/实体，这很有用）或者您是否只想使用类似全文搜索的语法查询 EF 以返回实体集合？

如果您对“蜘蛛”方法感兴趣 - 这里有一篇关于小型 ASP.NET 搜索引擎“ [Searcharoo](http://www.codeproject.com/KB/IP/Searcharoo_7.aspx) ”的 CodeProject 文章。它是一个用于小型网站的网络爬行搜索引擎（它根本不使用数据库），因此它可能不适用于您的情况。该代码也在searcharoo.codeplex.com 上，并且在[Searcharoo.net](http://searcharoo.codeplex.com/)上有 7 篇关于它如何工作/构建的[文章](http://searcharoo.net)（免责声明：我写了它们；我希望它们很有趣/有用）。

如果您需要直接搜索您的数据库，您可能应该查看 SQL Server 2008 的全文搜索功能（假设`LIKE`它不够复杂，无法满足您的需要）。我们使用[本文中的信息（免费注册）](http://www.sqlservercentral.com/articles/Full-Text+Search+(2008)/64248/)在一个工作项目中设置 SQL 全文搜索……但我们的解决方案中没有 EF。

此外，您可能知道 StackOverflow 是使用 ASP.NET MVC 构建的——他们在博客中介绍了[SQL 2008 FTS 的一些问题](https://blog.stackoverflow.com/2008/11/sql-2008-full-text-search-problems/)。还有[一些](https://stackoverflow.com/questions/499247/sql-server-2008-full-text-search-fts-versus-lucene-net)关于 SQL FTS 与 Lucene.NET（您可以研究的另一个搜索引擎）的信息可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T07:33:02.697

阅读这篇文章：

*   [在 ASP.NET 中创建站点搜索引擎](http://www.developerfusion.com/article/4389/create-a-site-search-engine-in-aspnet/)

如果您不必自己编写引擎，可以考虑使用[Google 自定义搜索引擎](http://www.google.com/coop/cse/)。关于这个有几篇文章：

*   [使用 Google Co-op 的自定义搜索引擎](http://www.codeproject.com/KB/aspnet/CustomSearchEngine.aspx)
*   [使用 Google 自定义搜索在 ASP.NET 中实现搜索](http://dotnetslackers.com/articles/aspnet/Implementing-Search-in-ASP-NET-with-Google-Custom-Search.aspx)

也可能有用：

*   [通过创建 OpenSearch 提供程序帮助访问者搜索您的网站](http://www.4guysfromrolla.com/articles/073008-1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T04:28:28.827

您可能有兴趣阅读[本文](http://msdn.microsoft.com/en-us/library/ms142571.aspx)。

# c# - C#/WPF 图像处理问题

> ID：919041
> 
> 赞同：1
> 
> 时间：2009-05-28T03:25:41.027
> 
> 标签：c#, image, file-io

我正在尝试让我的 C# 代码将图像添加到我的 (WPF) 应用程序的画布中。但是，我的代码不起作用。

```
Image I = new Image();
I.Source = System.IO.File.Open(@"C:\Users\Public\Pictures\Sample Pictures\Penguins.jpg", System.IO.FileMode.Open); 
```

我得到错误：

```
Cannot implicitly convert type 'System.IO.FileStream' to 'System.Windows.Media.ImageSource' 
```

我明白这是为什么：Image 对象想要原始位图（或 jpg 或其他），而我的代码正在给它一个来自文件的输出流。如何在两者之间转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T03:32:43.197

大约：

```
Image I = new Image();
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.UriSource = new Uri(@"C:\Users\Public\Pictures\Sample Pictures\Penguins.jpg", UriKind.Absolute);
bi.EndInit();
I.Source = bi; 
```

# objective-c - Malloc'ed 字符串包含垃圾值

> ID：919042
> 
> 赞同：0
> 
> 时间：2009-05-28T03:27:16.857
> 
> 标签：objective-c, c, malloc

我刚刚将一个 Objective-C 库转换为一个 C 库，希望它能够跨平台。但是，在我将这件事送去处理之前，一切似乎都还不错。

正是在这一点上我得到了一个错误。

回顾一些修改，我注意到调试器中有一些东西。

就在这样的 malloc 字符串之后：

```
char *theString = malloc(SOME_SIZE * sizeof(char)); 
```

我会看到 theString 是 \x03 并且 *theString 是“3 '\003'”。

起初我认为这只是奇怪的记忆，因为我没有使用 strcat 或任何东西，但是那个奇怪的起始字符会继续存在，并且在我执行类似 malloc 的每个其他点重复出现。

就正常处理而言，这很好。不幸的是，我不明白它是什么，否则，我只会做一些激烈的事情，比如切断第一个字符或其他东西。

如果我想安全地将其转换为 NSString，有人可以向我解释这是什么以及如何处理它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-28T03:30:51.077

malloc 返回的值不保证设置为任何特定值。它只保证指向您拥有的内存，长度至少与您指定的一样长。如果您希望将内存初始化为某个值，则需要自己进行。或者使用 calloc 将内存归零。

# ruby - 如果我非常喜欢 Ruby，我现在有理由学习另一种语言吗，比如 Lua 或 Erlang？

> ID：919045
> 
> 赞同：4
> 
> 时间：2009-05-28T03:29:30.940
> 
> 标签：ruby, erlang, lua

如果我非常喜欢 Ruby，我现在有理由学习另一种语言吗，比如 Lua 或 Erlang？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-28T03:33:28.670

新的编程语言，就像口语一样，可以开辟新的视角。学习新的语言——尤其是那些与你习惯的完全不同的语言（Erlang 可能会符合这个要求）——可以教给你很多你甚至不*知道*你不知道的关于编程的东西。所以是的，我认为你绝对应该这样做，即使你只学了足够的东西来修补它并感受一下新语言。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-28T03:42:35.717

特别是学习一门函数式语言可能非常有益。熟悉编程的函数式风格是迈向更好程序员的必经之路。Lisp（或其衍生物）尤其是一种很好的学习语言。以下是关于 SO 的过去线程列表，可能会为您提供以下方面的一些见解：

1.  [为什么人们认为函数式编程会流行起来？](https://stackoverflow.com/questions/411290/why-do-people-think-functional-programming-will-catch-on)
2.  [学习什么好的函数式语言？](https://stackoverflow.com/questions/102911/whats-a-good-functional-language-to-learn#102955)
3.  [学习计划的好处？](https://stackoverflow.com/questions/98641/benefits-of-learning-scheme)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-28T23:17:04.553

撇开想要学习另一种语言的（极好的）一般原因不谈，如果你非常喜欢 Ruby，你可能想要

*   学习 Smalltalk，这是一种与 Ruby 非常非常相似但形式更纯粹的语言。

*   学习一门非常非常不同的语言——比如基于代数数据类型和函数而不是对象和方法的语言，以及基于静态类型系统而不是动态类型系统的语言——但是像 Ruby 这样的语言将支持程序组合和泛型编程的强大方法。好的候选者包括 Standard ML 和[Haskell](http://www.haskell.org)。

*   学习一门非常非常不同的语言——说一些让你控制内存中的每一位、地址和单词的语言——迫使你理解和控制硬件的语言。换句话说，学习 C。

关于你提到的其他语言，

*   Lua 很小，设计和实现都非常优雅。这可能会吸引你的 Rubyist。但与 Ruby 不同的是，它并没有强加太多的世界观。它更像是零件的集合。我建议您先使用三四种其他语言工作后，您更有可能欣赏和享受 Lua。

*   Erlang 很有趣，但我有一种直觉，它要么太不同（纯粹的功能性、分布式），要么不够不同（动态类型系统）。但如果它吸引你，那就去吧。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T03:37:20.497

另一方面，对于真正了解一门语言来说，有一些话要说。与掌握一打表面知识相比，你将能够通过深入了解一种语言做更多的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-28T19:03:58.810

如果您非常喜欢 Ruby，那么您**绝对**应该学习另一种语言……如果可能的话，一种*没有* [符号的语言。](http://en.wikipedia.org/wiki/Sigil_(computer_programming))

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-29T04:00:58.120

在我看来，专业人士会学习他需要使用的工具。框架、容器、语言，都是公平的游戏。我从 Pascal 开始，然后是 C，然后是 C++。然后转换为Java。这些天来，它主要是 Java，有很多 Javascript 和一些 PHP。够容易吧？好吧，我还需要学习 Bash 脚本和 Perl。别介意我需要了解的所有其他废话（如果您说您了解所有 Web 身份验证，我会称您为骗子）。那里有很多东西。跳进去。愿意尝试不同的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-28T16:08:09.757

我总是喜欢为了挑战而学习新语言。它使我的大脑保持健康。我还发现，能够说“我很灵活。我可以适应你未来的任何需求。我可以用我的一长串语言证明这一点。”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-29T03:44:36.180

我的主要语言是 PHP。我是一个脚本语言爱好者，但我潜入了 C#、Java、Python、Ruby 甚至 OO JavaScript 书籍，以寻找新的机制和思维方式。例如，我在 Java 中发现了很多特技，我可以在我整天的工作中实现这些特技。所以学习或只是学习新语言可以拓宽你的视野。

# winapi - 在 Windows 中查找未记录的 API

> ID：919051
> 
> 赞同：53
> 
> 时间：2009-05-28T03:32:28.093
> 
> 标签：winapi

我很好奇如何在 Windows 中找到未记录的 API。

我知道使用它们所涉及的风险，但这个问题的重点是找到它们，而不是是否使用它们。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-28T03:43:55.470

使用工具从共享库（例如 kernel32.dll 等 .dll）中转储导出表。您将看到命名的入口点和/或序号入口点。通常对于窗口，命名的入口点是未损坏的（外部“C”）。您很可能需要查看汇编代码并从堆栈帧（如果有）和寄存器使用情况中派生参数（类型、编号、顺序、调用约定等）。如果没有堆栈帧，它会有点困难，但仍然可行。请参阅以下链接以获取参考：

1.  [http://www.sf.org.cn/symbian/Tools/symbian_18245.html](http://www.sf.org.cn/symbian/Tools/symbian_18245.html)
2.  [http://msdn.microsoft.com/en-us/library/31d242h4.aspx](http://msdn.microsoft.com/en-us/library/31d242h4.aspx)

查看诸如[dumpbin](http://msdn.microsoft.com/en-us/library/c1h23y6c(VS.71).aspx)之类的工具来调查导出部分。

还有一些网站和书籍试图保留未记录的 Windows API 的更新列表：

1.  [未记录的函数](http://undocumented.ntinternals.net/)
2.  [Windows 体系结构入门](https://web.archive.org/web/20110119043027/http://www.codeproject.com/KB/system/Win32.aspx)
3.  [如何查找 Windows API 函数使用的未记录常量](https://web.archive.org/web/20070403035347/http://support.microsoft.com/kb/187674)
4.  [无证窗口](https://rads.stackoverflow.com/amzn/click/com/0201608340)
5.  [视窗 API](http://en.wikipedia.org/wiki/Win32)

**编辑：** 这些相同的原则适用于多种操作系统，但是，您需要更换用于转储导出表的工具。例如，在 Linux 上，您可以使用[nm](http://linux.about.com/library/cmd/blcmdl1_nm.htm)转储目标文件并列出其导出部分（以及其他内容）。您还可以使用[gdb](http://www.gnu.org/software/gdb/)设置断点并单步执行入口点的汇编代码以确定参数应该是什么。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-28T06:25:00.583

IDA Pro 是您最好的选择，但*请加倍请*不要将它们用于任何事情。

它们是内部的，因为它们会改变；它们甚至可以（并且确实）由于修补程序而改变，因此您甚至无法保证您的未记录 API 将适用于您为其编写的特定操作系统版本和 Service Pack 级别。如果你发布这样的产品，你就是靠借来的时间生活。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-07-02T09:20:29.707

到目前为止，这里的每个人都缺少一些包含大量未记录的 Windows OS **RPC**部分的重要功能。RPC（想想 rpcrt4.dll、lsass.exe、csrss.exe 等）操作在所有子系统中非常频繁地发生，通过 LPC 端口或其他接口，它们的功能隐藏在各种类型/子类型的神秘咒语中/struct-typedef 等...由于异步性质或它们注定要通过单步调试或其他方式调试的事实，它们实际上更难以调试，您会发现整个系统由于阻止键盘或其他 I/O 通过而锁定；）

[ReactOS](http://www.reactos.org/en/index.html)可能是调查无证 API 的最方便的方法。他们有一个相当成熟的内核和其他高管的建立。IDA 是相当耗时的，您不太可能找到 ReactOS 人员尚未发现的任何东西。

这是来自链接页面的简介；

> ReactOS® 是基于 Windows® XP/2003 设计的免费现代操作系统。它完全从头开始编写，旨在从硬件级别一直到应用程序级别都遵循 Microsoft 设计的 Windows® 架构。这不是基于 Linux 的系统，并且不共享任何 unix 架构。
> 
> ReactOS 项目的主要目标是提供与 Windows 二进制兼容的操作系统。这将允许您的 Windows 应用程序和驱动程序像在 Windows 系统上一样运行。此外，使用了 Windows 操作系统的外观和感觉，因此习惯于熟悉的 Windows® 用户界面的人会发现使用 ReactOS 很简单。ReactOS 的最终目标是允许您删除 Windows® 并安装 ReactOS，而最终用户不会注意到更改。

当我研究一些很少见的 Windows 结构时，ReactOS 通常是唯一可靠的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T03:40:36.120

查看系统 dll 以及它们导出的功能。每个 API 函数，无论是否记录在案，都在其中一个（用户、内核、...）中导出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T03:43:14.377

对于用户模式 ​​API，您可以打开 Kernel32.dll User32.dll Gdi32.dll，特别是在[依赖遍历器](http://www.dependencywalker.com/)中的 ntdll.dll并找到所有导出的 API。但是您不会有文档偏离课程。

刚刚发现Mark Russinovich关于[Native APIS的一篇好文章](http://web.archive.org/web/20060315191056/www.sysinternals.com/)

# python - 不区分大小写的替换

> ID：919056
> 
> 赞同：217
> 
> 时间：2009-05-28T03:35:24.737
> 
> 标签：python, string, case-insensitive

在 Python 中进行不区分大小写的字符串替换的最简单方法是什么？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2009-05-28T03:39:13.607

该`string`类型不支持此功能。您可能最好使用带有[re.IGNORECASE](http://docs.python.org/library/re.html#re.IGNORECASE)选项[的正则表达式子方法。](https://docs.python.org/3/library/re.html#re.sub)

```
>>> import re
>>> insensitive_hippo = re.compile(re.escape('hippo'), re.IGNORECASE)
>>> insensitive_hippo.sub('giraffe', 'I want a hIPpo for my birthday')
'I want a giraffe for my birthday' 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2009-05-28T03:41:04.857

```
import re
pattern = re.compile("hello", re.IGNORECASE)
pattern.sub("bye", "hello HeLLo HELLO")
# 'bye bye bye' 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-03-14T20:14:03.707

在一行中：

```
import re
re.sub("(?i)hello","bye", "hello HeLLo HELLO") #'bye bye bye'
re.sub("(?i)he\.llo","bye", "he.llo He.LLo HE.LLO") #'bye bye bye' 
```

或者，使用可选的“标志”参数：

```
import re
re.sub("hello", "bye", "hello HeLLo HELLO", flags=re.I) #'bye bye bye'
re.sub("he\.llo", "bye", "he.llo He.LLo HE.LLO", flags=re.I) #'bye bye bye' 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2011-01-23T11:46:46.397

继续 bFloch 的回答，这个函数不会改变一个，而是所有出现的 old 和 new - 以不区分大小写的方式。

```
def ireplace(old, new, text):
    idx = 0
    while idx < len(text):
        index_l = text.lower().find(old.lower(), idx)
        if index_l == -1:
            return text
        text = text[:index_l] + new + text[index_l + len(old):]
        idx = index_l + len(new) 
    return text 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-01-21T14:09:54.507

这不需要 RegularExp

```
def ireplace(old, new, text):
    """ 
    Replace case insensitive
    Raises ValueError if string not found
    """
    index_l = text.lower().index(old.lower())
    return text[:index_l] + new + text[index_l + len(old):] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-05T10:03:57.463

就像布莱尔康拉德说 string.replace 不支持这一点。

使用正则表达式`re.sub`，但请记住先转义替换字符串。请注意，2.6 中没有 flags-option for `re.sub`，因此您必须使用嵌入式修饰符`'(?i)'`（或 RE 对象，请参阅 Blair Conrad 的回答）。此外，另一个陷阱是 sub 将处理替换文本中的反斜杠转义，如果给出一个字符串。为了避免这种情况，可以改为传入一个 lambda。

这是一个函数：

```
import re
def ireplace(old, repl, text):
    return re.sub('(?i)'+re.escape(old), lambda m: repl, text)

>>> ireplace('hippo?', 'giraffe!?', 'You want a hiPPO?')
'You want a giraffe!?'
>>> ireplace(r'[binfolder]', r'C:\Temp\bin', r'[BinFolder]\test.exe')
'C:\\Temp\\bin\\test.exe' 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-04-16T20:17:06.260

此函数同时使用`str.replace()`和`re.findall()`函数。它将以不区分大小写的方式替换所有出现的`pattern`in 。`string``repl`

```
def replace_all(pattern, repl, string) -> str:
   occurences = re.findall(pattern, string, re.IGNORECASE)
   for occurence in occurences:
       string = string.replace(occurence, repl)
       return string 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-01-20T04:14:20.153

关于语法细节和选项的有趣观察：

Python 3.7.2 (tags/v3.7.2:9a3ffc0492, Dec 23 2018, 23:09:28) [MSC v.1916 64 bit (AMD64)] on win32

```
import re
old = "TREEROOT treeroot TREerOot"
re.sub(r'(?i)treeroot', 'grassroot', old) 
```

《草根草根草根》

```
re.sub(r'treeroot', 'grassroot', old) 
```

'树根草根树根'

```
re.sub(r'treeroot', 'grassroot', old, flags=re.I) 
```

《草根草根草根》

```
re.sub(r'treeroot', 'grassroot', old, re.I) 
```

'树根草根树根'

因此，匹配表达式中的 (?i) 前缀或添加“flags=re.I”作为第四个参数将导致不区分大小写的匹配。但是，仅使用“re.I”作为第四个参数不会导致不区分大小写的匹配。

为了比较，

```
re.findall(r'treeroot', old, re.I) 
```

['树根'，'树根'，'树根']

```
re.findall(r'treeroot', old) 
```

['树根']

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-28T03:18:39.047

我正在将 \t 转换为[转义序列](https://docs.python.org/2/reference/lexical_analysis.html#string-literals)（向下滚动一点），所以我注意到[re.sub](https://docs.python.org/2/library/re.html#re.sub)将反斜杠转义字符转换为转义序列。

为了防止我写了以下内容：

替换不区分大小写。

```
import re
    def ireplace(findtxt, replacetxt, data):
        return replacetxt.join(  re.compile(findtxt, flags=re.I).split(data)  ) 
```

此外，如果您希望它用转义字符替换，就像这里的其他答案将特殊含义的 bashslash 字符转换为转义序列一样，只需解码您的查找和或替换字符串。在 Python 3 中，可能需要执行类似 .decode("unicode_escape") # python3 之类的操作

```
findtxt = findtxt.decode('string_escape') # python2
replacetxt = replacetxt.decode('string_escape') # python2
data = ireplace(findtxt, replacetxt, data) 
```

在 Python 2.7.8 中测试

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-02-16T13:59:28.457

```
i='I want a hIPpo for my birthday'
key='hippo'
swp='giraffe'

o=(i.lower().split(key))
c=0
p=0
for w in o:
    o[c]=i[p:p+len(w)]
    p=p+len(key+w)
    c+=1
print(swp.join(o)) 
```

# command-line - 从命令行执行包中的 Groovy 类

> ID：919060
> 
> 赞同：13
> 
> 时间：2009-05-28T03:36:46.800
> 
> 标签：command-line, groovy, package

有没有办法通过用点指定包来执行 Groovy 类，就像 java 一样？

示例：文件 ./my/package/MyClass.groovy：

```
package my.package

class MyClass {
  static void main(String[] args) {
    println "ok"
  }
} 
```

```
> cd 我的/包
我的/包> groovy MyClass
好的
> 光盘../..
> 常规我/包/MyClass.groovy
好的
> 常规我/包/MyClass
好的
> groovy my.package.MyClass
捕获：java.io.FileNotFoundException：my.package.MyClass

```

我期待最后一个命令起作用。我尝试了各种设置类路径的方法，但无济于事。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-28T11:14:53.263

首先，*package*是保留关键字，所以不能将其用作包名。

其次，你不能在 Groovy 中这样做，因为点表示法用于类，而不是脚本，所以你需要一个编译的类文件来使用它。

不过，您可以用 java + 类路径替换 groovy 命令：

`java -cp /usr/share/java/groovy/embeddable/groovy-all-1.6.3.jar:. my.some.MyClass`

例如，您可以为其添加别名“g_java”以使其不那么冗长。

# css - CSS全高？

> ID：919065
> 
> 赞同：0
> 
> 时间：2009-05-28T03:38:35.977
> 
> 标签：css, layout

我正在构建一个 3 列网页（左侧导航上方的标题和菜单栏、主区域和右侧边栏，底部有一个全宽页脚）。我为每列设置了背景颜色，但它们在文本末尾截断而不是填充整个列。有没有办法填充不依赖于使用表（td）的整个列？

这是我的一般布局的 CSS：

```
#container
{
    float: left;
    width: 100%; /* IE doubles the margins on floats, this takes care of the problem */
    display: inline; /* this is where Ryan Brill (author of the ALA's article) and I go in "opposite directions" */
    margin-left: -200px;
}
#left
{
    float: left;
    width: 180px; /* IE doubles the margins on floats, this takes care of the problem */
    display: inline;
    margin-left: 200px;
    padding: 0px 0px 0px 5px;
    background: url('/App_Themes/Default/images/RightColumnBackground.png') repeat left top;
}
#main
{
    /* the width from #left (180px) + the negative margin from #container (200px) */
    margin-left: 380px;
    padding: 0px 0px 0px 5px;
}
#sidebar
{
    /* this is to keep the content of #sidebar to the right of #main even if the content of "main is shorter */
    padding-left: 100%; /* this is to "bring back" the #sidebar that has been moved out of the viewport because of the padding value */
    margin-left: -220px;
} 
```

我知道我可以在样式中设置一个高度，但这会将高度固定到一定数量的像素。有`height: fill;`类型选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T03:44:50.090

这是一个非常普遍的问题。一个好的方法是使用[假列](http://www.alistapart.com/articles/fauxcolumns/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T03:43:34.813

目前在浏览器中广泛支持的任何 CSS 中都没有，但有一些[近似的方法](http://www.alistapart.com/articles/fauxcolumns/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T05:54:23.163

您需要的是百分比宽度、[em 宽度](http://matthewjamestaylor.com/blog/ultimate-3-column-holy-grail-ems.htm)或[像素宽度的](http://matthewjamestaylor.com/blog/holy-grail-no-quirks-mode.htm)[完美液体布局](http://matthewjamestaylor.com/blog/perfect-3-column.htm)。

# php - 我可以设置标题以从远程位置下载文件，例如 CloudFiles

> ID：919068
> 
> 赞同：2
> 
> 时间：2009-05-28T03:39:19.190
> 
> 标签：php, mosso, cloudfiles

例如，如果我设置一些标题以从我的服务器下载文件，我会这样做

```
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="downloaded.pdf"'); 
```

然后只输出文件的数据

是否可以在 Content-Disposition 中设置远程 url？

示例`header('Content-Disposition: attachment; filename="http://remote.location/downloaded.pdf"`）；

还是我只是以错误的方式思考它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T03:57:27.040

不，您只需执行[302 重定向](http://www.internetofficer.com/seo/302-redirect/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T06:19:27.303

不。

正如马修建议的那样，使用重定向。

其他选项是从脚本下载文件，然后只输出下载的文件。

# django - 升级到 python2.6 和 ubuntu 9.0 后，即使管理媒体配置正确，django admin 也不会加载 css

> ID：919073
> 
> 赞同：0
> 
> 时间：2009-05-28T03:41:03.297
> 
> 标签：django, django-admin

基本上我将 ubuntu 升级到 juanty，随之而来的是 python2.6，所以我决定抓住机会让 django 使用它。我重新 svn'd django 到 dist-packages，并确保正确符号链接我的管理媒体。请注意，我没有使用 apache，而只是使用 django 开发服务器。

当我加载管理员时，css似乎没有生效，当我查看源代码时它正在调用正确的文件，我什至继续在浏览器中加载这些文件并且它们正确加载。

关于我做错了什么的任何想法？我认为这与使用 django 的最新版本有关。

- - - - - - -编辑 - - - - - - - - - -

在下面回答您的问题：

我没有运行 apache，我正在使用 django 提供静态文件，并且我尝试从浏览器加载文件并且它们工作正常。

我在我的设置文件中做了这个

```
ADMIN_MEDIA_PREFIX = '/static/admin_media/' 
```

我从我的静态文件夹 admin_media > /usr/lib/python2.6/dist-packages/django/contrib/admin/media/ 符号链接

这真的难倒我，因为我认为我做的一切都是正确的。

- - - - - - 编辑 - - - - - -

这是我的 urls.py 的示例

```
(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}), 
```

我记得之前（在 ubuntu 8 和可能是 django 的旧 svn 版本中）我没有在我的设置中配置任何东西，也没有在我的静态文件夹中配置任何东西，它在默认 /media/ 下工作得很好 - 是在某个地方自动为管理员进行符号链接？

------编辑-------这很可能是svn版本的错误，因为在此之后我在我的Windows机器上尝试过，我得到了一样。css 文件已正确链接但未导入。相反，当我单击它们时，它会下载文件。权限问题有人吗？

帮助，因为没有 css 格式的管理员看起来不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T05:12:26.373

你在Apache下运行吗？根据您从哪个早期版本的 Ubuntu 升级，某些 Apache 配置可能已更改。我有一个模糊的回忆，从 dapper 升级到 8.10 时遇到了问题，通过向 /etc/apache2/httpd.conf 添加一个块解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T04:15:56.840

我在 jaunty 和最新的 django svn reversion (rev. 10857) 上使用 python 2.6.2 并且没有任何问题。

你能提供更多细节吗？例如，您在 settings.py 中设置了什么，如何配置 urls.py，您是否使用 django 来提供媒体文件，当您加载管理界面时调试服务器的输出是什么？任何错误等

您是否尝试过直接请求文件或使用 firebug（检查 404 等）？

*编辑：*

有点不相关，但您可能希望通过使用相对路径使您的项目更便携/可重用。

```
#settings.py
import os

PROJECT_PATH = os.path.abspath(os.path.dirname(__file__))

DEBUG = True
SERVE_MEDIA = DEBUG

MEDIA_ROOT = os.path.join(PROJECT_PATH, 'static')
MEDIA_URL = '/static/'
ADMIN_MEDIA_PREFIX = '/media/' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-25T18:25:36.963

哇，我不想因为回答我自己的问题而被视为垃圾邮件发送者，但是……似乎没有其他人回答这些问题，然后我倾向于自己解决问题。呃。。

上面的答案很简单，很简单

由于我使用旧版本的 django 而不是最新的 svn 版本创建了上述 django 项目，因此您需要覆盖或删除静态和管理模板下的旧管理媒体目录。就我而言，我刚刚删除了管理媒体和管理模板，瞧……管理员回来了！！！

不敢相信我以前没有这样的想法。

# c# - 数据绑定似乎没有刷新

> ID：919076
> 
> 赞同：2
> 
> 时间：2009-05-28T03:42:05.297
> 
> 标签：c#, wpf, data-binding

出于某种原因，我真的很挣扎。我是 wpf 的新手，我似乎找不到理解这个简单问题所需的信息。

我正在尝试将文本框绑定到字符串，即程序活动的输出。我为字符串创建了一个属性，但是当属性更改时，文本框不会。我在列表视图中遇到了这个问题，但是创建了一个刷新列表视图的调度程序。

我一定遗漏了一些要点，因为我认为使用 wpf 的一个好处是不必手动更新控件。我希望有人能把我送到正确的方向。

在 windowMain.xaml.cs 中

```
private string debugLogText = "initial value";

public String debugLog {
    get { return debugLogText; }
    set { debugLogText = value; }
} 
```

在 windowMain.xaml 中

```
x:Name="wndowMain"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
DataContext="{Binding RelativeSource={RelativeSource Self}}"

<TextBox Name="txtDebug" Text="{Binding ElementName=wndowMain, Path=debugLog}" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T03:46:31.950

在您的班级上实施 INotifyPropertyChanged。如果你有很多类需要这个接口，我经常发现使用如下的基类很有帮助。

```
public abstract class ObservableObject : INotifyPropertyChanged
{

    protected ObservableObject( )
    {
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged( PropertyChangedEventArgs e )
    {
        var handler = PropertyChanged;
        if ( handler != null ) {
            handler( this, e );
        }
    }

    protected void OnPropertyChanged( string propertyName )
    {
        OnPropertyChanged( new PropertyChangedEventArgs( propertyName ) );
    }

} 
```

然后，您只需确保在属性值更改时引发 PropertyChanged 事件。例如：

```
public class Person : ObservableObject {

    private string name;

    public string Name {
        get {
              return name;
        }
        set {
              if ( value != name ) {
                  name = value;
                  OnPropertyChanged("Name");
              }
        }
    }

} 
```

# image - 使用 QT 显示 DICOM 图像序列时出现问题

> ID：919095
> 
> 赞同：0
> 
> 时间：2009-05-28T03:47:53.060
> 
> 标签：image, qt, opengl, sequence, dicom

我在 Linux [GCC 编译器] 中工作，我正在使用带有 CDT + QT 的 Eclipse 进行编译我需要使用 QT 窗口和 OpenGL 函数显示 DICOM 图像序列请让我知道哪个是显示图像序列的函数我'm 使用 3 个函数 1) initiallizeGL() 来初始化 OpenGL 函数。2) resizeGL() 而不是 Glut 中的 glutInitWindowSize()。3) Glut 中的paintGL() 代替 glutDisplayFunc()。4) updateGL() 代替 Glut 中的 glutPostRedisplay()。

还请让我知道 QT glutMainLoop() 中的 Glut 等效函数；glutSwapBuffers(); glutInitDisplayMode(); glutIdleFunc(空闲); glutInit(&argc, argv);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T14:19:25.450

您应该能够通过简单地使用 QGLWidget 作为您的绘画设备轻松显示图像 - 根据您的特定用例 - 可能会简化您的实现。这将使用 Qt 中的 OpenGL 绘制引擎绘制图像。类似以下的内容应该允许您显示图像；

```
class CustomWidget : public QGLWidget
{ 
public:
    CustomWidget(QWidget* parent=0) : QGLWidget(parent), pix("foo.jpg")
    {

    }

protected:
    void paintEvent(QPaintEvent *pe)
    {
        QPainter p(this);
        // maybe update the pixmap
        p.drawPixmap(this->rect(),pix);
    }

private:
    QPixmap pix;
}; 
```

如果您需要将其放入 3D 场景中，您可能需要将图像加载为纹理。一些 Qt OpenGL 演示应该能够为您提供一个起点，例如 'Boxes' 演示；

[http://doc.trolltech.com/4.6-snapshot/demos-boxes.html](http://doc.trolltech.com/4.6-snapshot/demos-boxes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T08:35:23.820

我想说 Qt 已经处理了 gluSwapBuffers、glutInitDisplayMode 和 glutInit，所以你不需要这些。我也不确定您的函数映射是否正确，简而言之，Qt 和 Glut 以不同的方式考虑 GL，因此您可能必须采用相同的方式（以不同的方式思考），并且 Qt 方法几乎是不言自明的。我建议下载 KGLEngine 或任何其他 Qt +GL 项目的代码，以更好地了解它的工作原理。

# nhibernate - 使用 nHibernate，我如何在我的 Web 应用程序和测试项目中管理我的 hibernate.cfg.xml 文件？

> ID：919097
> 
> 赞同：0
> 
> 时间：2009-05-28T03:48:15.137
> 
> 标签：nhibernate

鉴于 hibernate.cfg.xml 文件必须在正在运行的应用程序（在本例中为 Web 应用程序）中，在我的测试项目和我的 Web 应用程序项目中都有该文件的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T17:59:12.763

您可以将文件添加到多个项目中。如果您使用 Visual Studio，您可以右键单击其中一个项目，然后添加现有项目。单击添加按钮右侧的箭头。单击“添加为链接” 现在将相同的文件添加到两个项目中。

我不建议使用同一个数据库进行自动测试，因为测试会运行缓慢，并且很难确保每次测试前数据库的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:53:22.310

我建议您将 xml 文件放入单独的目录并链接/共享文件。您可以参考 DimeCasts.net 了解更多信息。www.dimecasts.net/Casts/CastDetails/10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T03:57:29.303

最简单的方法是将 XML 文件的副本放在两个项目中。您只需要小心保持所有配置设置在两个位置同步即可。这将允许在测试项目或 Web 应用程序中轻松调试。如果您有一个构建系统设置，它会为测试创建部署，您可以将 xml 文件存储在一个公共位置，然后创建一个构建操作以在您进行部署/测试时将其复制到两个项目的输出目录。

# sql-server - 使用 SQuirreL SQL 客户端创建 SQL Server 触发器的问题

> ID：919102
> 
> 赞同：0
> 
> 时间：2009-05-28T03:51:50.930
> 
> 标签：sql-server, tsql, triggers, squirrel-sql

最近我一直在使用 SQL Server 数据库，并尝试使用 SQuirreL SQL Client 为某些表创建一些触发器，但由于某种原因，我无法摆脱以下讨厌的错误消息：

“错误：'CREATE TRIGGER' 必须是查询批处理中的第一条语句。SQLState：S0001 错误代码：111”

我试图执行的查询如下（我从一个非常简单的触发器开始以确保语法正确）：

```
CREATE TRIGGER meeting_overlap on adhoc_meeting
FOR INSERT
AS
DECLARE
    @myvar INT 
```

当我尝试在 Microsoft SQL Server Management Studio Express 中执行完全相同的查询时，它执行得很好。我的问题是：有没有其他人在使用 SQuirreL SQL Client 时遇到过类似的问题，如果是这样，你做了什么来摆脱这个错误？

编辑：

我将 SQuirrel SQL v2.6.8 与 Microsoft SQL Server JDBC Driver 2.0 一起使用，并且正在连接到 SQL Server 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T17:26:14.493

我遇到了同样的问题。经过一番谷歌搜索，我找到了这篇文章：

[http://vsingleton.blogspot.com/2009/04/error-create-view-must-be-first.html](http://vsingleton.blogspot.com/2009/04/error-create-view-must-be-first.html)

简而言之，将 exec('') 包装在您的创建触发器语句周围。此外，您在触发器语句中的任何单引号（'）都需要更改为双单引号（''）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T03:59:35.577

通常，当您尝试在同一个批处理中运行多个语句时，您会遇到该错误，这些语句除了批处理中的第一个语句之外不允许是任何内容。您可能需要`GO`介于两者之间。 `GO`不是 SQL 命令，而是[真正的](http://msdn.microsoft.com/en-us/library/ms188037.aspx)对客户端工具的指令，用于分隔成批的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T11:29:13.907

我无法使用[jTDS jbdc 驱动程序](http://jtds.sourceforge.net/)的 v1.2.2对 SQL 2005 SP3（开发人员版）在 SQuirrel SQL v2.6.8 上复制它。

# python - 将代码包装在函数中时是否会提高内存效率？

> ID：919103
> 
> 赞同：3
> 
> 时间：2009-05-28T03:52:02.520
> 
> 标签：python, memory-management, function

我一直在研究一些代码。我通常的方法是首先解决问题的所有部分，在解决问题时创建循环和其他我需要的代码，然后如果我希望重用代码，我会返回并分组我认为应该将代码组合在一起以创建函数。

我刚刚注意到创建函数并调用它们似乎比编写代码行并在我完成它们时删除容器更有效。

例如：

```
def someFunction(aList):
    do things to aList
    that create a dictionary
    return aDict 
```

似乎最后释放的内存比

```
>>do things to alist
>>that create a dictionary
>>del(aList) 
```

这是预期的行为吗？

编辑添加示例代码

当这个函数完成运行时，PF Usage 显示增加了大约 100 mb，filingsList 有大约 800 万行。

```
def getAllCIKS(filingList):
    cikDICT=defaultdict(int)
    for filing in filingList:
        if filing.startswith('.'):
            del(filing)
            continue
        cik=filing.split('^')[0].strip()
        cikDICT[cik]+=1
        del(filing)
    ciklist=cikDICT.keys()
    ciklist.sort()
return ciklist

allCIKS=getAllCIKS(open(r'c:\filinglist.txt').readlines()) 
```

如果我改为运行它，我会显示增加了近 400 mb

```
cikDICT=defaultdict(int)
for filing in open(r'c:\filinglist.txt').readlines():
    if filing.startswith('.'):
        del(filing)
        continue
    cik=filing.split('^')[0].strip()
    cikDICT[cik]+=1
    del(filing)

ciklist=cikDICT.keys()
ciklist.sort()
del(cikDICT) 
```

编辑我今天一直在玩这个。由于我的重点一直放在 PF 使用上，因此我的观察和问题应该有所改进。不幸的是，我只能在我的其他任务之间戳这个。但是，我开始怀疑参考与副本。如果我从列表创建字典，字典容器是否保存来自列表的值的副本，或者它们是否保存对列表中值的引用？我敢打赌，这些值是被复制而不是被引用的。

我注意到的另一件事是 GC 列表中的项目是来自已删除容器的项目。那有意义吗？Soo 我有一个列表，假设列表中的每个项目都是 [(aTuple),anInteger,[another list]]。当我开始学习如何操作 gc 对象并检查它们时，我在 gc 中发现了这些对象，即使该列表已被强制删除，即使我将 0,1 和 2 值传递给我不记得的方法尝试仍然删除它们。

我很欣赏人们分享的见解。不幸的是，我总是有兴趣弄清楚事情是如何运作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T04:22:40.517

也许您在函数中使用了一些局部变量，它们在函数末尾通过引用计数隐式释放，而在代码段末尾没有释放？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:08:41.007

您可以使用提供的[Python 垃圾收集器接口](http://docs.python.org/library/gc.html)来更仔细地检查在第二种情况下留下了什么（如果有的话）。具体来说，您可能需要查看[gc.get_objects()](http://docs.python.org/library/gc.html#gc.get_objects)以查看未收集的内容，或[查看 gc.garbage](http://docs.python.org/library/gc.html#gc.garbage)以查看是否有任何引用循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T12:53:26.310

也许您应该重新设计您的代码以摆脱不必要的变量（可能不会立即释放）......下面的代码片段怎么样？

```
myfile = file(r"c:\fillinglist.txt")
ciklist = sorted(set(x.split("^")[0].strip() for x in myfile if not x.startswith("."))) 
```

编辑：我不知道为什么这个答案被否决......也许是因为它很短？或者可能是因为投票的家伙无法理解这个单行代码如何在不创建不必要的临时容器的情况下与问题中的代码相同？

叹...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T01:55:24.340

我问了另一个关于复制列表和答案的问题，特别是指导我查看 deepcopy 的答案让我想到了一些字典行为。我遇到的问题与原始列表永远不会被垃圾收集这一事实有关，因为字典维护对列表的引用。[我需要在Python Docs](http://docs.python.org/library/weakref.html)中使用关于 weakref 的信息。

字典引用的对象似乎还活着。我认为（但不确定）将字典推出函数的过程会强制复制过程并杀死对象。这还不完整，我需要做更多的研究。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T03:54:34.833

当您从函数返回时，会释放一些额外的内存，但这与最初分配给调用该函数的内存一样多。无论如何 - 如果您看到大量差异，那可能是运行时状态的产物，而不是您真正应该担心的事情。如果您的内存不足，解决问题的方法是使用诸如 b 树（或仅使用数据库）之类的东西将更多数据保留在磁盘上，或者使用使用较少内存的算法。此外，请注意制作不必要的大型数据结构副本。

创建函数真正节省的内存在于您的短期记忆。通过将某些内容移动到函数中，您可以通过封装部分细节来减少需要记住的细节量。

# python - PIL处理PNG的问题

> ID：919104
> 
> 赞同：2
> 
> 时间：2009-05-28T03:52:35.267
> 
> 标签：python, png, python-imaging-library

```
from PIL import ImageFile as PILImageFile

p = PILImageFile.Parser()

#Parser the data
for chunk in content.chunks():
    p.feed(chunk)    
try:
    image = p.close()
except IOError:                        
    return None
#Here the model is RGBA
if image.mode != "RGB":
    image = image.convert("RGB") 
```

它总是卡在这里：

```
image = image.convert("RGB")

File "C:\Python25\Lib\site-packages\PIL\Image.py" in convert
  653\.         self.load()
File "C:\Python25\Lib\site-packages\PIL\ImageFile.py" in load
  189\.                     s = read(self.decodermaxblock)
File "C:\Python25\Lib\site-packages\PIL\PngImagePlugin.py" in load_read
  365\.         return self.fp.read(bytes)
File "C:\Python25\Lib\site-packages\PIL\ImageFile.py" in read
  300\.             data = self.data[pos:pos+bytes]

Exception Type: TypeError at 
Exception Value: 'NoneType' object is unsubscriptable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T19:49:06.350

这是由于 PIL 中的 close 编码不正确，这是一个错误。

**编辑文件（系统上的路径可能不同）：**

*须藤 vi /usr/lib64/python2.6/site-packages/PIL/ImageFile.py*

**在线283修改：**

```
def close(self):
    self.data = self.offset = None 
```

**将其更改为：**

```
def close(self):
    #self.data = self.offset = None
    self.offset = None 
```

就是这样，注释掉损坏的代码，添加正确的行，然后保存文件。一切都完成了，只需运行之前失败的程序，它现在就可以工作了。

# .net - WCF 项目设置和依赖项

> ID：919105
> 
> 赞同：1
> 
> 时间：2009-05-28T03:52:49.107
> 
> 标签：.net, wcf

设置 WCF 服务项目和应用程序的最常见/最佳方式是什么？

这是一个例子：

*   解决方案：“我的项目”
*   类库：“MyProject.Common”
    *   包含 ServiceContract 接口和任何 DataContracts
*   类库：“MyProject.Impl”
    *   包含服务契约的实现，以及可用于调用服务的客户端类
*   WCF 服务 Web 应用程序：“MyProject.Service”
    *   包含对 MyProject.Common 和 Impl 的引用，以便它可以托管服务
    *   WCF 服务应用程序将在 web.config 中配置端点
*   ASP.NET Web 应用程序：“MyProject.Web”
    *   包含对“MyProject.Common”和“MyProject.Impl”的引用，以便它可以使用客户端类
    *   Web 应用程序还需要在 web.config 等中配置端点。

我的问题是将合同和实现拆分成单独的 DLL 是否有意义，以及应用程序是否应该引用 Common/Impl 库，或者应用程序是否应该只进行服务引用（使用“创建服务参考”或 SvcUtil)。我认为应用程序仅进行服务引用可能是有意义的，因此您不要将 Common/Impl 耦合到应用程序。在这种情况下，在 MyService.Impl 中创建客户端类是否有意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T04:18:58.530

查看[Web 服务软件工厂](http://msdn.microsoft.com/en-us/library/bb931187.aspx)。它为构建 WCF 应用程序提供了很多很好的指导，包括一些关于[解决方案结构](http://msdn.microsoft.com/en-us/library/cc304695.aspx)的指导。此外，IDesign.NET (Juval Lowy) 对此也有一些[指导](http://www.idesign.net/idesign/download/IDesign%20WCF%20Coding%20Standard.zip)（zip 链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:23:09.910

如果您使用复杂类型，您应该在客户端应用程序中包含服务接口和公共类，否则生成的代理将重复您在服务中使用的类型的定义，并且可能会导致您以后对序列化感到头疼......

然后您可以手动生成一个代理，该代理使用来自公共程序集的类型，并且不会重新创建其他模拟您的类型的类。

C:\Samples\WcfSerialization>svcutil.exe /out:WcfServiceProxy.cs /d:Schmurgon.WcfClient.Web /r:Schmurgon.Data.Contracts\Schmurgon.Data.Contracts\bin\debug\Schmurgon.Data.Contracts .dll [http://localhost:5150/Schmurgon.WcfService.Host/S](http://localhost:5150/Schmurgon.WcfService.Host/S) ervice.svc?wsdl

开关是：

/out: param 只是输出代理类的名称。

/d：存储代理类的目录。

/r：包含在代理类中包含的类型的程序集

[无] 您的 WCF 服务的地址。

[（这是从http://schmurgon.net/blogs/ben/archive/2006/12/17/wcf-proxy-generation-without-types.aspx](http://schmurgon.net/blogs/ben/archive/2006/12/17/wcf-proxy-generation-without-types.aspx)粘贴的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T04:54:12.510

这取决于。

通常生成的代理类足以让客户端程序调用 WCF 服务，因此不需要客户端库。当然，在某些情况下是这样，例如，如果您的合约仅指定 Message 作为其参数，并且您在后台使用数据合约，但这种情况非常罕见！

我不会做的是将客户端类（如果您觉得需要一个）与您的服务实现放在同一个库中 - 客户端不需要知道服务是如何实现的，只需要知道如何调用服务。通过将两者放在一起，您也可以分发您的服务实现。

如果您使用 Data Contracts 标记您使用的类，则不会发生 Hugo 提到的复杂类型问题，无论如何您都应该这样做以允许轻松地对服务进行版本控制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T05:18:52.547

*我的问题是将合同和实现拆分成单独的 DLL 是否有意义，以及应用程序是否应该引用 Common/Impl 库，或者应用程序是否应该只进行服务引用（使用“创建服务参考”或 SvcUtil)。我认为应用程序仅进行服务引用可能是有意义的，因此您不要将 Common/Impl 耦合到应用程序。在这种情况下，在 MyService.Impl 中创建客户端类是否有意义？*

宾果游戏 - 你“得到”了它！即使在理论上，技术上**可以**使用共享程序集共享合同和接口，我宁愿不建议这样做。

首先，其他客户端（例如 Java、PHP、Ruby）将无法使用共享的 .NET 程序集。突然之间，他们使用了与您的客户端不同的界面，这可能会导致难以调试的细微变化。

其次，SOA 就是将系统的各个部分解耦为具有明确定义的服务边界的独立、不同的实体。共享程序集会引入您试图避免的依赖关系。

因此，因此我同意您走在正确的轨道上 - 是否将合同接口与其具体实现分开可以进行辩论。一个好处可能是，如果您需要创建相同接口的第二、第三个实现，或者如果您在各种服务使用的单独程序集中具有某些常用的帮助接口。再组装一次并没有真正的伤害-我的建议是完全按照您在帖子中概述的方式进行！

马克

# wordpress - 当我看到一些 IP 浏览我网站上的数百个页面时，这意味着什么？

> ID：919106
> 
> 赞同：-2
> 
> 时间：2009-05-28T03:53:00.200
> 
> 标签：wordpress, ip-address

当我在我的日志中看到一些 IP 滚动浏览我网站上的 100 多个页面时，我应该怎么做？我有一个 wordpress 博客，看起来这不是一个真实的人。这种情况几乎每天都会发生在不同的 IP 上。

更新：哦，我忘了提，我很确定它不是搜索引擎蜘蛛。主机名不是搜索引擎，而是来自印度的某个随机人（以“.in”结尾）。我关心的是，如果它是一个刮刀，我能做些什么吗？或者它可能比刮刀（例如黑客）更糟糕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T03:55:32.713

这是一个蜘蛛/爬虫。搜索引擎使用它们来编译他们的列表，研究人员使用它们来弄清楚互联网的结构，互联网档案馆使用它们来为后代下载互联网内容，垃圾邮件发送者使用它们来搜索电子邮件地址，以及许多更多这样的情况。

查看日志中的用户代理字符串可能会为您提供有关他们正在做什么的更多信息。行为良好的机器人通常会表明他们是谁/他们是什么——例如，谷歌的搜索机器人被称为 Googlebot。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T04:37:29.120

如果您担心脚本小子，我建议检查您的错误日志。脚本通常会寻找您可能没有的东西；例如，在我运行的一个系统上，我没有 ASP，但是，我可以知道脚本小子何时探测了该站点，因为我在错误日志中看到很多尝试查找 ASP 页面的尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T03:54:49.733

可能是一些脚本小子想要利用您博客（或服务器）中的漏洞。那个，或者一些网络爬虫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T03:59:08.040

它可能是一个蜘蛛机器人索引您的网站。“用户代理”可能会放弃它。如果动态生成的 Wordpress 网站不是所有的博客页面而是包含诸如 css、js 和图像之类的东西，那么它可能很容易有 100 多个 GET 请求。

# c# - 当您不使用异常来控制流程时，代码看起来如何？

> ID：919117
> 
> 赞同：8
> 
> 时间：2009-05-28T03:58:49.570
> 
> 标签：c#, exception

我已经接受了我在其他已回答的问题中看到的关于何时抛出异常的建议，但现在我的 API 有了新的噪音。我没有调用包装在 try/catch 块中的方法（令人烦恼的异常），而是使用了带有处理过程中可能发生的错误集合的参数参数。我理解为什么将所有内容包装在 try/catch 中是控制应用程序流程的不好方法，但我很少在任何地方看到反映这种想法的代码。

这就是为什么这整件事对我来说如此奇怪。这是一种被认为是正确的编码方式的做法，但我在任何地方都看不到它。除此之外，当发生“不良”行为时，我不太了解如何与客户端代码相关联。

这是我正在修改的一些代码片段，它处理保存由网络应用程序用户上传的图片。不要担心细节（这很丑），只需看看我将这些输出参数添加到所有内容以获取错误消息的方式即可。

```
public void Save(UserAccount account, UserSubmittedFile file, out IList<ErrorMessage> errors)
{
    PictureData pictureData = _loader.GetPictureData(file, out errors);

    if(errors.Any())
    {
        return;
    }

    pictureData.For(account);

    _repo.Save(pictureData);
} 
```

这是正确的想法吗？我可以合理地预期用户提交的文件在某种程度上是无效的，所以我不应该抛出异常，但是我想知道文件出了什么问题，所以我会产生错误消息。同样，现在使用此保存方法的任何客户端也将希望找出整体图片保存操作出了什么问题。

我对返回一些包含结果和附加错误消息的状态对象有其他想法，但这感觉很奇怪。我知道到处都有参数将很难维护/重构/等。

我希望对此有一些指导！

编辑：我认为用户提交的文件片段可能会导致人们想到加载无效图像和其他“硬”错误产生的异常。我认为这段代码片段更好地说明了我认为不鼓励抛出异常的想法。

有了这个，我只是保存了一个新的用户帐户。我对用户帐户进行状态验证，然后点击持久存储以查看用户名是否已被使用。

```
public UserAccount Create(UserAccount account, out IList<ErrorMessage> errors)
{
    errors = _modelValidator.Validate(account);

    if (errors.Any())
    {
        return null;
    }

    if (_userRepo.UsernameExists(account.Username))
    {
        errors.Add(new ErrorMessage("Username has already been registered."));
        return null;
    }

    account = _userRepo.CreateUserAccount(account);

    return account;
} 
```

我应该抛出某种验证异常吗？或者我应该返回错误消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T04:04:28.580

尽管存在性能问题，但我认为允许从方法中抛出异常实际上更干净。如果有任何异常可以在你的方法中处理，你应该适当地处理它们，否则，让它们冒泡。

在输出参数中返回错误或返回状态码感觉有点笨拙。有时当遇到这种情况时，我会尝试想象 .NET 框架将如何处理这些错误。我不相信有很多 .NET 框架方法会在输出参数中返回错误或返回状态代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-28T04:21:56.490

根据定义，“异常”是指例程无法恢复的异常情况。在您提供的示例中，看起来这意味着图像无效/损坏/不可读/等。这应该被抛出并冒泡到最顶层，然后*决定*如何处理异常。异常本身包含有关问题的最完整信息，这些信息必须在上层可用。

当人们说你不应该使用异常来控制程序流时，他们的意思是：（例如）如果用户尝试创建一个帐户但该帐户已经存在，你不应该抛出一个 AccountExistsException 然后在更高的地方捕获它应用程序能够向用户提供该反馈，因为已经存在的帐户不是例外情况。您应该预料到这种情况并将其作为正常程序流程的一部分进行处理。如果您无法连接到数据库，*则*属于例外情况。

您的用户注册示例的部分问题是您试图将太多内容封装到单个例程中。如果您的方法试图做不止一件事，那么您必须跟踪多件事的状态（因此事情变得丑陋，例如错误消息列表）。在这种情况下，您可以做的是：

```
UsernameStatus result = CheckUsernameStatus(username);
if(result == UsernameStatus.Available)
{
    CreateUserAccount(username);
}
else
{
    //update UI with appropriate message
}

enum UsernameStatus
{
    Available=1,
    Taken=2,
    IllegalCharacters=3
} 
```

显然，这是一个简化的示例，但我希望这一点很清楚：您的例程应该只尝试做一件事，并且应该具有有限/可预测的操作范围。这使得更容易停止和重定向程序流以处理各种情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T04:04:59.893

我认为这是错误的做法。是的，您很可能偶尔会收到无效图像。但这仍然是例外情况。在我看来，例外是这里的正确选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-28T05:14:57.667

在像你这样的情况下，我通常会向调用者抛出一个自定义异常。我对异常的看法可能与其他人有所不同：如果该方法无法执行其预期的操作（即方法名称所说的：创建用户帐户），那么它应该抛出一个异常 - 到我：不做你应该做的事是例外。

对于您发布的示例，我会有类似的内容：

```
public UserAccount Create(UserAccount account)
{
    if (_userRepo.UsernameExists(account.Username))
        throw new UserNameAlreadyExistsException("username is already in use.");
    else
        return _userRepo.CreateUserAccount(account);
} 
```

至少对我来说，好处是我的用户界面很笨。我只是尝试/捕获任何功能和消息框异常消息，例如：

```
try
{
    UserAccount newAccount = accountThingy.Create(account);
}
catch (UserNameAlreadyExistsException unaex)
{
    MessageBox.Show(unaex.Message);
    return; // or do whatever here to cancel proceeding
}
catch (SomeOtherCustomException socex)
{
    MessageBox.Show(socex.Message);
    return; // or do whatever here to cancel proceeding
}
// If this is as high up as an exception in the app should bubble up to, 
// I'll catch Exception here too 
```

[例如，这与许多 System.IO 方法 ( http://msdn.microsoft.com/en-us/library/d62kzs03.aspx](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx) ) 的风格相似。

如果它成为性能问题，那么我稍后会重构为其他东西，但我从来不需要因为异常而从业务应用程序中挤出性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T04:14:28.460

我也会允许例外，但根据您的线程您正在寻找替代方案。为什么不在 PictureData 对象中包含状态或错误信息。然后，您可以只返回包含错误的对象，而其他内容为空。只是一个建议，但您所做的正是要解决的例外情况:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-28T04:42:19.757

首先，异常不应该被用作控制流机制。异常是一种错误传播和处理机制，但绝不能用于控制程序流程。控制流是条件语句和循环的领域。这通常是许多程序员犯的一个严重误解，并且通常是在他们尝试处理异常时导致此类噩梦的原因。

在像 C# 这样提供结构化异常处理的语言中，其想法是允许识别、传播和*最终*处理代码中的“异常”情况。处理通常留给应用程序的最高级别（即带有 UI 和错误对话框的 Windows 客户端、带有错误页面的网站、后台服务的消息循环中的日志工具等）。与 Java 不同，它使用检查异常处理，C# 不要求您专门处理可能通过您的方法的每个异常。相反，尝试这样做无疑会导致一些严重的性能瓶颈，因为捕获、处理和可能重新抛出异常是一项代价高昂的业务。

C# 中异常的一般想法是，如果它们发生......我强调**如果**，因为它们被称为*异常*，因为在正常操作期间，你不应该遇到任何***异常情况***，......如果它们发生那么您就可以使用工具来安全、干净地恢复并向用户（如果有）显示应用程序故障的通知和可能的解决方案选项。

大多数时候，一个编写良好的 C# 应用程序在核心业务逻辑中不会有那么多的 try/catch 块，而是会有更多的 try/finally，或者更好的是，使用块。对于大多数代码，响应异常的关注点是通过释放资源、锁等来很好地恢复，并允许异常继续存在。在您的更高级别代码中，通常在应用程序的外部消息处理循环中或在 ASP.NET 等系统的标准事件处理程序中，您最终将使用 try/catch 执行*结构化*处理，可能使用多个 catch 子句来处理需要独特处理的特定错误。

如果您正确处理异常并以适当的方式构建使用异常的代码，则不必担心大量 try/catch/finally 块、返回代码或带有大量 ref 和 out 参数的复杂方法签名。你应该看到更像这样的代码：

```
public void ClientAppMessageLoop()
{
    bool running = true;
    while (running)
    {
        object inputData = GetInputFromUser();
        try
        {
            ServiceLevelMethod(inputData);
        }
        catch (Exception ex)
        {
            // Error occurred, notify user and let them recover
        }
    }
}

// ...

public void ServiceLevelMethod(object someinput)
{
    using (SomeComponentThatsDisposable blah = new SomeComponentThatsDisposable())
    {
        blah.PerformSomeActionThatMayFail(someinput);
    } // Dispose() method on SomeComponentThatsDisposable is called here, critical resource freed regardless of exception
}

// ...

public class SomeComponentThatsDisposable: IDosposable
{
    public void PErformSomeActionThatMayFail(object someinput)
    {
        // Get some critical resource here...

        // OOPS: We forgot to check if someinput is null below, NullReferenceException!
        int hash = someinput.GetHashCode();
        Debug.WriteLine(hash);
    }

    public void Dispose()
    {
        GC.SuppressFinalize(this);

        // Clean up critical resource if its not null here!
    }
} 
```

通过遵循上述范例，您不会有很多凌乱的 try/catch 代码，但您仍然“受到保护”免受异常的影响，否则这些异常会中断您的正常程序流程并冒泡到更高级别的异常处理代码。

编辑：

以下是对 C# 语言首席架构师 Anders Heijlsberg 的采访，其中涵盖了异常的预期用途以及为什么不在 C# 中检查异常的原因：

[http://www.artima.com/intv/handcuffsP.html](http://www.artima.com/intv/handcuffsP.html)

编辑2：

为了提供与您发布的代码一起使用的更好示例，以下内容可能会更有用。我猜测其中的一些名称，并以我遇到的服务实现方式之一做事......所以请原谅我获得的任何许可证：

```
public PictureDataService: IPictureDataService
{
  public PictureDataService(RepositoryFactory repositoryFactory, LoaderFactory loaderFactory)
  {
     _repositoryFactory = repositoryFactory;
     _loaderFactory = loaderFactory;
  }

  private readonly RepositoryFactory _repositoryFactory;
  private readonly LoaderFactory _loaderFactory;
  private PictureDataRepository _repo;
  private PictureDataLoader _loader;

  public void Save(UserAccount account, UserSubmittedFile file)
  {
    #region Validation
    if (account == null) throw new ArgumentNullException("account");
    if (file == null) throw new ArgumentNullException("file");
    #endregion

    using (PictureDataRepository repo = getRepository())
    using (PictureDataLoader loader = getLoader())
    {
      PictureData pictureData = loader.GetPictureData(file);
      pictureData.For(account);
      repo.Save(pictureData);
    } // Any exceptions cause repo and loader .Dispose() methods 
      // to be called, cleaning up their resources...the exception
      // bubbles up to the client
  }

  private PictureDataRepository getRepository()
  {
    if (_repo == null)
    {
      _repo = _repositoryFactory.GetPictureDataRepository();
    }

    return _repo;
  }

  private PictureDataLoader getLoader()
  {
    if (_loader == null)
    {
        _loader = _loaderFactory.GetPictureDataLoader();
    }

    return _loader;
  }
}

public class PictureDataRepository: IDisposable
{
  public PictureDataRepository(ConnectionFactory connectionFactory)
  {
  }

  private readonly ConnectionFactory _connectionFactory;
  private Connection _connection;

  // ... repository implementation ...

  public void Dispose()
  {
    GC.SuppressFinalize(this);

    _connection.Close();
    _connection = null; // 'detatch' from this object so GC can clean it up faster
  }
}

public class PictureDataLoader: IDisposable
{
  // ... Similar implementation as PictureDataRepository ...
} 
```

# audio - 黑莓录音示例代码

> ID：919126
> 
> 赞同：3
> 
> 时间：2009-05-28T04:02:35.160
> 
> 标签：audio, blackberry, java-me, mmapi

有谁知道一个很好的存储库来获取黑莓的示例代码？具体来说，可以帮助我学习录制音频的机制，甚至可能对其进行采样并对其进行一些动态信号处理的示例？

我想读取传入的音频，如果需要，逐个采样，然后对其进行处理以产生所需的结果，在这种情况下是可视化器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-08T07:07:30.320

RIM API 包含用于处理音频和视频内容的[JSR 135 Java 移动媒体 API 。](http://en.wikipedia.org/wiki/Java_Mobile_Media_API)
您更正了 BB 知识库上的混乱情况。唯一的方法是浏览它，希望他们不会再更改站点地图。
它是[开发人员->资源](http://na.blackberry.com/eng/developers/resources/)->[知识库](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/customview.html?func=ll&objId=348583&objAction=browse&sort=name)-> [Java API的&示例](http://www.blackberry.com/knowledgecenterpublic/livelink.exe?func=ll&objId=800332&objAction=browse&sort=name)->[音频和视频](http://www.blackberry.com/knowledgecenterpublic/livelink.exe?func=ll&objId=1089414&objAction=browse&sort=name)

## 声音录制

基本上录制音频很简单：

*   创建具有正确音频编码的播放器
*   获取记录控制
*   开始录音
*   停止录制

链接：
[RIM 4.6.0 API 参考： 包 javax.microedition.media](http://www.blackberry.com/developers/docs/4.6.0api/javax/microedition/media/package-summary.html)
[如何 - 在 BlackBerry 智能手机上录制音频](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Record_audio_on_a_BlackBerry_smartphone.html?nodeid=1311883&vernum=0)
[如何 - 在应用程序中播放音频](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Play_audio_in_an_application.html?nodeid=1168553&vernum=0)
[如何 - 支持将音频流式传输到媒体应用程序](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Support_streaming_audio_to_the_media_application.html?nodeid=1369914&vernum=0)
[如何 - 指定音频路​​径路由](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Specify_Audio_Path_Routing.html?nodeid=1326675&vernum=0)
[如何To - 从媒体应用程序获取媒体播放时间](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/How_To_-_Obtain_the_media_playback_time_from_a_media_application.html?nodeid=1498782&vernum=0)
[What Is - 支持的音频格式](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/796557/800332/1089414/What_Is_-_Supported_audio_formats.html?nodeid=1187763)
[What Is - 媒体应用程序错误代码](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/1089414/What_Is_-__Media_application_error_codes.html?nodeid=1357545&vernum=0)

## 录音样本

声明了带有 Player、RecordControl 和资源的线程：

```
final class VoiceNotesRecorderThread extends Thread{
   private Player _player;
   private RecordControl _rcontrol;
   private ByteArrayOutputStream _output;
   private byte _data[];

   VoiceNotesRecorderThread() {}

   private int getSize(){
       return (_output != null ? _output.size() : 0);
   }

   private byte[] getVoiceNote(){
      return _data;
   }
} 
```

在 Thread.run() 开始录音：

```
 public void run() {
      try {
          // Create a Player that captures live audio.
          _player = Manager.createPlayer("capture://audio");
          _player.realize();    
          // Get the RecordControl, set the record stream,
          _rcontrol = (RecordControl)_player.getControl("RecordControl");    
          //Create a ByteArrayOutputStream to capture the audio stream.
          _output = new ByteArrayOutputStream();
          _rcontrol.setRecordStream(_output);
          _rcontrol.startRecord();
          _player.start();    
      } catch (final Exception e) {
         UiApplication.getUiApplication().invokeAndWait(new Runnable() {
            public void run() {
               Dialog.inform(e.toString());
            }
         });
      }
   } 
```

并且在 thread.stop() 记录停止：

```
 public void stop() {
      try {
           //Stop recording, capture data from the OutputStream,
           //close the OutputStream and player.
           _rcontrol.commit();
           _data = _output.toByteArray();
           _output.close();
           _player.close();    
      } catch (Exception e) {
         synchronized (UiApplication.getEventLock()) {
            Dialog.inform(e.toString());
         }
      }
   } 
```

## 处理和采样音频流

在录制结束时，您将获得充满特定音频格式数据的输出流。因此，要对其进行处理或采样，您必须解码此音频流。

谈到动态处理，那将更加复杂。您将不得不在录制期间读取输出流而不提交录制。所以会有几个问题需要解决：

*   同步访问记录器和采样器的输出流 - 线程问题
*   读取正确数量的音频数据 - 深入音频格式解码以找出标记规则

也可能有用：
[java.net: Experiments in Streaming Content in Java ME by Vikram Goyal](http://today.java.net/pub/a/today/2006/08/22/experiments-in-streaming-java-me.html?page=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T04:13:04.697

虽然不是特定于音频，但这个问题确实有一些很好的“入门”参考。

[编写黑莓应用程序](https://stackoverflow.com/questions/500058/writing-blackberry-applications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-09T23:26:44.833

我也花了很长时间试图弄清楚这一点。安装 BlackBerry 组件包（可[从其网站](http://us.blackberry.com/developers/javaappdev/javadevenv.jsp)获得）后，您可以在组件包中找到示例代码。

在我的例子中，一旦我将组件包安装到 Eclipse 中，我在这个位置找到了提取的示例代码：

> C:\Program Files\Eclipse\eclipse3.4\plugins\net.rim.eide.componentpack4.5.0_4.5.0.16\components\samples

不幸的是，当我导入所有示例代码时，我遇到了一堆编译错误。为了解决这个问题，我刚刚删除了 20% 的带有编译错误的包。

我的下一个问题是启动模拟器总是启动第一个示例代码包（在我的情况下为 activetextfieldsdemo），我无法让它只运行我感兴趣的包。解决方法是删除之前按字母顺序列出的所有包我想要的那个。

其他陷阱：
- 右键单击​​ Eclipse 中的项目并选择为 BlackBerry 激活- 选择
BlackBerry -> Build Configurations... -> Edit... 并选择您的新项目以便构建。
- 确保将 BlackBerry 源代码放在 Eclipse 项目中的“src”文件夹下，否则可能会遇到构建问题。

# java - OSGi 部署管理服务的状态

> ID：919129
> 
> 赞同：14
> 
> 时间：2009-05-28T04:04:25.057
> 
> 标签：java, osgi

OSGi 应用程序由称为捆绑包的模块组成。问题是任何大小合理的应用程序都会有大量的包（可能很容易有数百个，只需查看 Eclipse IDE 的插件目录），因此在管理或部署应用程序时，您需要比单个包更粗的粒度。

OSGi 服务纲要规范包含一个部署管理服务，它将部署包定义为捆绑包和其他工件（例如配置）的集合，可以作为一个单元进行部署、升级、卸载等。

不幸的是，我找不到很多关于部署管理实施、工具或用户的信息。

该服务的状态如何？有人对部署管理员有任何经验、意见或建议吗？

此外，我认为 Spring dm-server 具有应用程序范围的捆绑包（PAR 文件）集合的概念，Eclipse Equinox 正在开发嵌套框架来解决这个问题。这些方法与部署管理有什么关系？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-01T11:12:33.800

Deployment Admin 是那些似乎很少受到关注的 OSGi 纲要服务之一。显然有一个规范，因此可能是一个参考实现和一致性测试。为 Apache Felix 项目贡献了一个实现，但似乎已经沉没了。

在 SpringSource dm Server 中设计 PAR 文件支持时，我研究了 Deployment Admin，但该模型不适合我们的用例。特别是，具有给定符号名称（和任何版本）的包可能不会驻留在安装在同一 OSGi 框架中的两个不同部署包中。

相反，安装在同一 dm 服务器实例中的两个 PAR 文件可能都包含具有给定包符号名称的包（以及相同或不同的包版本）。我们将此视为应用程序扩展要求：我们不希望大型应用程序仅仅因为它们的开发人员碰巧打包了相同的包而“冲突”。服务也由 PAR 文件限定。

在 dm Server 2.0 中，我们将 PAR 的概念概括为“计划”，这些“计划”是按类型名称和版本引用要安装的工件的文件。计划可以是有范围的（如 PAR）或无范围的，并且可以是原子的（意味着其内容的生命周期与计划的生命周期以原子方式相关联，如 PAR）或非原子的。

嵌套框架也正在作为未来可能的 OSGi 标准进行研究，以解决应用程序范围要求，但与 dm 服务器范围的设计点完全不同。嵌套框架无法自动查看其父框架中的包和服务。因此该模型默认是一种隔离，无论是子框架彼此隔离还是子框架和父框架隔离。dm 服务器范围故意将子级彼此隔离，但仅在一个方向上将子级与其父级隔离：子级可以看到其所有父级的包和服务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-01T12:46:33.237

You might be interested to know that [Apache Ace](http://incubator.apache.org/ace/) (which is currently in incubation and ramping up) can dynamically generate deployment packages for Deployment Admin, and uses (by default, when provisioning to OSGi target) Felix's Deployment Admin.

Since the website is very much under development: Apache Ace is a software distribution framework that allows you to centrally manage and distribute software components, configuration data and other artifacts to target systems. It is built using OSGi and can be deployed in different topologies. The target systems are usually also OSGi based, but don't have to be.

# c# - 检查 IEnumerable(Of T) 中是否没有元素 - Linq 元素和量词运算符

> ID：919135
> 
> 赞同：4
> 
> 时间：2009-05-28T04:08:59.290
> 
> 标签：c#, linq, ienumerable, element

对于我的功能

```
IEnumerable<CallbackListRecord> LoadOpenListToProcess(CallbackSearchParams usp); 
```

当序列不包含任何元素时，此行会出错（应该如此）

```
CallbackListRecord nextRecord = CallbackSearch.LoadOpenListToProcess(p).First(); 
```

我已将其更改为以下

```
CallbackListRecord nextRecord = null;
IEnumerable<CallbackListRecord> nextRecords = CallbackSearch.LoadOpenListToProcess(p);
if (nextRecords.Any())
{
    nextRecord = nextRecords.First();
} 
```

是否有更好、更简单或更优雅的方法来确定 IEnumerable 序列是否没有元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T04:12:57.817

您应该尽量避免枚举它超过必要的次数（即使短路，如`First`and `Any`） - 如何：

```
var nextRecord = CallbackSearch.LoadOpenListToProcess(p).FirstOrDefault();
if(nextRecord != null) {
    // process it...
} 
```

这适用于类（因为您可以将引用与 null 进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T09:09:43.210

您可以添加这样的扩展方法：

```
public static class Extensions
{
    public static bool HasElements<T>(this IEnumerable<T> collection)
    {
        foreach (T t in collection)
            return true;

        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T05:45:10.493

如果您预计序列中可能有空值，您可以自己处理枚举器。

```
var enumerator = CallbackSearch.LoadOpenListToProcess(p).GetEnumerator();
if (enumerator.MoveNext()) {
  var item = enumerator.Current;
  ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T04:14:54.233

您可以将代码缩短为以下

```
var nextrecord = CallbackSearch.LoadOpenListToProcess(p).FirstOrDefault(); 
```

如果集合为空，则 nextrecord 将包含 First 元素（如果有一个元素）或 null 。

# sql - 在SQL中从另一行中减去一行数据

> ID：919136
> 
> 赞同：12
> 
> 时间：2009-05-28T04:09:12.723
> 
> 标签：sql, mysql, join, subtraction

我被一些 SQL 难住了，我有几行数据，我想从前一行中减去一行，并让它一直重复下去。

所以这里是表格：

```
创建表 foo (
  ID，
  长度
)
```

```
插入 foo (id,length) VALUES(1,1090)
插入 foo (id,length) 值 (2,888)
插入 foo (id,length) 值 (3,545)
插入 foo (id,length) 值 (4,434)
插入 foo (id,length) VALUES(5,45)
```

我希望结果显示称为差异的第三列，它是从下面的一行中减去一行，最后一行从零中减去。

```
+--------+-------------+
| 编号 |长度 | 区别 |
+--------+-------------+
| 1 | 1090 | 202 |
| 2 | 888 | 第343章
| 3 | 第545章 111 |
| 4 | 第434章 389 |
| 5 | 45 | 45 |
```

我已经尝试过自我加入，但我不确定如何限制结果而不是让它自行循环。我不能依赖 id 值对于给定的结果集是连续的，所以我没有使用该值。我可以扩展模式以包含某种顺序值。

这是我尝试过的：

```
SELECT id, f.length, f2.length, (f.length - f2.length) AS 差异
FROM 富 f, 富 f2
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-28T04:15:40.863

这可能会帮助你（有点）。

```
 select a.id, a.length, 
coalesce(a.length - 
    (select b.length from foo b where b.id = a.id + 1), a.length) as diff
from foo a 

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-28T04:18:08.980

伊皮！！！这可以解决问题：

```
SELECT  f.id, f.length, 
    (f.length - ISNULL(f2.length,0)) AS diff
FROM foo f
LEFT OUTER JOIN foo f2
ON  f2.id = (f.id +1) 
```

也请检查其他情况，它适用于您发布的值！请注意，这是针对 SQL Server 2005

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T04:18:38.873

所以他们只是从大到小排序？

```
SELECT f.id, f.length, (f.length - ISNULL(t.length, 0)) AS difference
FROM foo AS f
LEFT JOIN (
    SELECT f1.id
        ,MAX(f2.length) as length
    FROM foo AS f1
    INNER JOIN foo AS f2
        ON f1.length > f2.length
    GROUP BY f1.id
) AS t -- this is the triangle
    ON t.id = f.id 
```

您可以使用`COALESCE`(or `IFNULL`) 代替`ISNULL`MySQL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T04:15:47.400

像这样的东西怎么样：

```
SELECT T2.ID, T2.[Length], T2.[Length]-T1.[Length] AS 'Difference'
FROM Foo AS T1 RIGHT OUTER JOIN Foo AS T2 ON ( T1.ID = (T2.ID-1) )
ORDER BY T1.ID 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T04:17:32.147

编辑：重读 Q 时修复（被误解）

```
SELECT f.id, 
       f2.id, 
       f.length, 
       f2.length, 
       (f.length -f2.length) AS difference
FROM foo f, 
     foo f2 
where f2.id = f.id+1 
```

id 不明确

编辑：注意：在 mysql 5.0 中测试

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T04:30:45.463

```
Select f1.id, f1.seqnum, f2.seqnum, f1.length, f2.length, f1.length-f2.length 

From (

Select Id, length, row_number(order by length) 'seqnum'
From
foo

) f1

Inner join (

Select 
Id, length, row_number(order by length) 'seqnum' from foo union select 0, 0, 0

) f2 

On f1.seqnum = f2.seqnum + 1

Order by f1.length desc 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-02T17:42:48.697

我遇到了这个问题，看看你的解决方案很有趣。我觉得奇怪的是，这样的正常生活问题在 SQL 中如此复杂。由于我只需要报告中的值，因此我选择了完全不同的解决方案。我正在运行 Ruby on Rails 作为我的 sqlite3 数据库的前端，并且只是在视图中进行了减法，如下所示：

在您的 ruby​​ 控制器中，有一个对象变量 @foo 保存查询返回的行。

在视图中，只是做

```
<table border=1>
  <tr>
    <th>id</th>
    <th>length</th>
    <th>difference</th>
  </tr>

<% for i in 0..@foo.length-1 do %>
  <tr>
    <td><%=h @foo[i].id %></td>
    <td><%=h @foo[i].length %></td>
    <td><% if (i==@foo.length-1) then %>
        <%=  @foo[i].length %>
      <% else %>
        <%= @foo[i+1].length.to_i - @foo[i].length.to_i %>
      <% end %>
    </td>
  </tr>
<% end %>
</table> 
```

似乎比 SQL 解决方案更健壮。

# scons - 使用 SCons 实现“安装”目标

> ID：919147
> 
> 赞同：5
> 
> 时间：2009-05-28T04:14:50.770
> 
> 标签：scons

我尝试设置一个构建系统来构建一个共享库*MySharedLib*和一个依赖于*MySharedLib*的二进制*MyBinary*。构建系统应该能够在被要求时安装*MySharedLib*和*MyBinary*，并且仅在被要求时。

 ***```
import os.path

env = Environment()
env.Append(CCFLAGS='-g -Wall -ansi -O2')

prefix = '/usr/local'
lib_dir = os.path.join(prefix, 'lib')
bin_dir = os.path.join(prefix, 'bin')
Export('env prefix lib_dir bin_dir')

libMySharedLib = SConscript('libMySharedLib/SConscript')
MyBinary   = SConscript('MyBinary/SConscript')

env.Alias('install', env.Install(lib_dir, libMySharedLib))
env.Alias('install', env.Install(bin_dir, MyBinary)) 
```

当我在没有命令行参数的情况下运行 SCons 时，会构建 MySharedLib 和 MyBinary，但它也会尝试安装它们。我希望它们仅在我要求*安装*目标时安装。我尝试了很多次，阅读了文档，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-14T07:33:04.187

默认情况下，当 scons 脚本中没有设置目标时，scons 会在 '.' 中构建每个目标。您可以使用 Default 函数控制默认构建的目标：

```
lib = SConscript('libMySharedLib/SConscript')
bin = SConscript('MyBinary/SConscript')

env.Alias('install', env.Install(lib_dir, lib))
env.Alias('install', env.Install(bin_dir, bin))

# By default (scons called with no explicit target), only build bin
Default(bin) 
```

AFAIK，没有办法告诉 scons 什么都不做，尽管我想你可以创建一个虚拟目标。

# android - Android的冰柱参数是什么？

> ID：919153
> 
> 赞同：44
> 
> 时间：2009-05-28T04:15:50.397
> 
> 标签：android

我注意到在一些编码中人们使用 icicle 和 onCreate 方法，我想知道它到底是什么：

```
public class About extends Activity {
    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.whatup);
    } 
```

这和 是一样的`savedInstanceState`吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-05-29T01:05:30.763

“冰柱”有时用作参数的名称，因为`onSaveInstanceState()`曾经被称为`onFreeze()`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-28T04:20:25.863

这个名字并不神奇。它只是形式参数之一的占位符。如[API](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle))所示，onCreate 接受一个 Bundle 参数。怎么称呼它取决于你。

# java - 是否可以覆盖 jboss-web.xml 文件中的设置？

> ID：919161
> 
> 赞同：2
> 
> 时间：2009-05-28T04:18:05.940
> 
> 标签：java, jakarta-ee, jboss

是否可以覆盖 war 文件的 WEB-INF/jboss-web.xml 中的设置？我有一个来自供应商的战争文件，我想在不修改战争文件本身的情况下更改它使用的数据源。

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
  ....
  <resource-ref>
    <res-ref-name>jdbc/primaryDatasource</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
   <jndi-name>java:/primaryDS</jndi-name>
 </resource-ref> 
```

我想在同一个容器中运行同一个war文件的两个副本，但每个副本都指向不同的数据库。我可以修改war文件本身，但每次供应商发布更新时我都必须重新修改它。

我希望第一个战争文件继续使用primaryDS，但让第二个实例使用secondaryDS。我使用的容器是 jboss-4.2.3.GA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T12:20:16.503

您的意思是要更改“primaryDS”的配置方式吗？这与 web.xml 或 JBoss 的 web.xml 默认值无关。这是在 JBoss 特定的容器配置中配置的。我忘记了这个文件在哪里，但它是包含元素的文件。

你的意思是你想让 .war 引用除“primaryDS”之外的东西吗？J2EE 模型表明，这确实是您作为部署者的工作，将供应商/应用程序的虚拟名称“jdbc/primaryDatasource”连接到容器中的实际数据源。

但是......您是否也不能简单地将您想要的配置重命名或复制到容器中称为“primaryDS”的配置？

如果您有一个 .war 文件，两个副本，并且想要以不同的方式配置它们，那么恐怕似乎没有办法修改 web.xml。'primaryDS' 无法解决两个不同的问题。

# c# - C# 泛型方法并从 xml 返回在该方法中创建的参数化类型的对象

> ID：919169
> 
> 赞同：4
> 
> 时间：2009-05-28T04:20:34.743
> 
> 标签：c#, .net, generics, types

我有一个方法，我想返回参数化类型 T 的对象实例，即。`Foo<T>`.

类型 T 在方法中使用`GetType()`, 从 XML 文件中的字符串元素实例化。由于类或方法在创建之前都不知道它，所以我也不能参数化。

有没有办法可以`Foo<T>`从非泛型方法返回一个类型的对象？

编辑：这是一个方法签名，例如：

```
 public Foo<T> getFooFromXml(string name) { 
```

类型在哪里创建，方法和类都是非泛型的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T04:23:43.203

是的，基本上你必须获得开放的泛型类型并创建一个封闭的泛型类型。

```
Type openType = typeof(Foo<>);
Type closedType = openType.MakeGenericType(typeof(string));

return Activator.CreateInstance(closedType); // returns a new Foo<string> 
```

编辑：请注意，我在上面使用了 typeof(Foo<>)，我故意将尖括号留空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:55:33.040

回应您的编辑：

该方法签名无论如何都是无效的。您需要在编译时知道 T 才能从方法中返回 Foo 。考虑我在上一个答案的评论中的建议，您将拥有一个 Foo 实现的单独接口 IFoo 。

```
class Foo<T> : IFoo {

   public T DoSomething() {
       ...
   }

   object IFoo.DoSomething() {
      return DoSomething();
   }

}

interface IFoo {
   object DoSomething();
} 
```

# powershell - 在 PowerShell 中捕获 EXE 输出

> ID：919171
> 
> 赞同：28
> 
> 时间：2009-05-28T04:22:36.663
> 
> 标签：powershell

先说一点背景。

我的任务是使用 GPG (gnupg.org) 使用 Powershell 脚本加密文件。我调用的特定 exe 只是 gpg.exe。我想在执行命令时捕获输出。

例如，我在 powershell 中导入一个公钥，如下所示：

```
& $gpgLocation --import "key.txt" 
```

$gpgLocation 只是 gpg.exe 的文件位置（默认为“C:\Program Files\GNU\GnuPG\gpg.exe”

我的整个问题是，如果我尝试：

```
& $gpgLocation --import "key.txt" | out-file gpgout.txt 
```

我得到的只是一个 1kb 的文件，名称适当，但它是完全空白的。我已经为 out-file 尝试了几个标志，只是为了看看我是否遇到了怪癖。

我还尝试将命令发送到此代码（并使用通常的输出文件等捕获输出）：

```
param
(
    [string] $processname, 
    [string] $arguments
)

$processStartInfo = New-Object System.Diagnostics.ProcessStartInfo;
$processStartInfo.FileName = $processname;
$processStartInfo.WorkingDirectory = (Get-Location).Path;
if($arguments) { $processStartInfo.Arguments = $arguments }
$processStartInfo.UseShellExecute = $false;
$processStartInfo.RedirectStandardOutput = $true;

$process = [System.Diagnostics.Process]::Start($processStartInfo);
$process.WaitForExit();
$process.StandardOutput.ReadToEnd(); 
```

有任何想法吗？我很绝望！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-28T04:43:28.273

您期望的输出是标准错误还是标准输出？

这行得通吗？

```
& $gpgLocation --import "key.txt" 2>&1 | out-file gpgout.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-07-01T16:20:12.593

您也可以使用 Out-Host，如下所示。

```
& $gpgLocation --import "key.txt" | Out-Host 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-08-16T14:03:56.740

斯托伯的回答很棒。我正在添加他的答案，因为如果 exe 出现错误，我需要执行其他操作。

您还可以将 exe 的输出存储到这样的变量中。然后您可以根据exe的结果进行错误处理。

```
$out = $gpgLocation --import "key.txt" 2>&1
if($out -is [System.Management.Automation.ErrorRecord]) {
    # email or some other action here
    Send-MailMessage -to me@example.com -subject "Error in gpg " -body "Error:`n$out" -from error@example.com -smtpserver smtp.example.com
}
$out | out-file gpgout.txt 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-28T04:47:33.543

此外，PowerShell 根本无法捕获某些程序的输出，因为它们不写入标准输出。您可以通过在 PowerShell ISE 中运行程序来验证这一点（它在版本 2.0 CTP 3 中）

如果 PowerShell ISE 无法在图形控制台中显示输出，那么您也无法捕获它，并且可能需要其他一些自动化程序的方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-28T04:58:19.030

自动化 GPG.EXE 时需要使用 --batch 开关，如下所示：

```
& $gpgLocation --import "key.txt" --batch | out-file gpgout.txt 
```

如果没有该开关，GPG 可能正在等待用户输入。

# sql - SQL 索引性能

> ID：919173
> 
> 赞同：1
> 
> 时间：2009-05-28T04:22:55.153
> 
> 标签：sql, sql-server, database, tsql, indexing

我们有一张桌子叫`table1`...

```
(c1 int indentity,c2 datetime not null,c3 varchar(50) not null,
   c4 varchar(50) not null,c5 int not null,c6 int ,c7 int)

on column c1 is primary key(clusterd Index)
on column c2 is index_2(Nonclusterd) 
on column c3 is index_2(Nonclusterd)
on column c4 is index_2(Nonclusterd)
on column c5 is index_2(Nonclusterd) 
```

它包含 1000 万条记录。我们有几个程序指向具有不同搜索条件的“table1”：

```
select from table1 where c1=blah..and c2= blah.. and c3=blah..
select from table1 where c2=blah..and c3= blah.. and c4=blah..
select from table1 where c1=blah..and c3= blah.. and c5=blah..
select from table1 where c1=blah..
select from table1 where c2=blah..
select from table1 where c3=blah..
select from table1 where c4=blah..
select from table1 where c5=blah.. 
```

除了上述之外，创建非聚集索引或修改现有索引以获得良好的索引性能并减少执行时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T04:39:57.837

现在要真正回应...

这里的技巧是您可以在任意数量的列上进行单列查找，以及复合列查找。您需要了解上述查询的执行频率 - 对于那些很少运行的查询，您可能应该将它们排除在您的索引考虑之外。

您*最好*在每个被查询的列上创建单个 NCIX。如果返回的行数非常少，则可能会出现这种情况，因为 NCIX 将能够处理“单一查找”查询以及复合查找。*或者，除了*覆盖复合索引之外，您还可以创建单列 NCIX - 同样，决定因素是执行频率和返回的结果数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T04:43:58.617

仅凭您提供的信息很难回答这个问题。您还需要权衡其他因素。

例如：表多久更新一次，哪些列更新频繁？由于索引维护，您需要为这些更新支付费用。

您的不同列的基数是多少？您最常执行哪些查询，哪些列出现在这些查询的 where 子句中？

您需要首先弄清楚您的每个查询的可接受性能参数是什么，并考虑到我上面提到的内容。

有 1000 万行，在这里对表进行分区可能很有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T10:28:11.923

您是否考虑过使用 MSSQL 的全文搜索组件。它可能会提供您正在寻找的性能？

# jboss - 如何将 JBossAS 5 与 Apache Ivy 一起使用？

> ID：919177
> 
> 赞同：3
> 
> 时间：2009-05-28T04:25:16.887
> 
> 标签：jboss, ivy

我对 Apache Ivy 比较陌生，正在尝试将现有的开发项目转移到使用 Ivy 进行依赖管理。我必须配置的最后一个依赖项是 jboss-javaee.jar。我在任何地方都找不到它，并且在运行时收到以下错误消息

[ivy:retrieve] :: 问题总结 ::
[ivy:retrieve] :::: 警告
[ivy:retrieve] 未找到模块：org.jboss#jboss-javaee;5.0.1.GA
[ivy:retrieve] == == 本地：尝试
[ivy:retrieve] C:\Documents and Settings\eweibust.ivy2/local/org.jboss/jboss-javaee/5.0.1.GA/ivys/ivy.xml
[ivy:retrieve] -- 工件org.jboss#jboss-javaee;5.0.1.GA!jboss-javaee.jar:
[ivy:retrieve] C:\Documents and Settings\eweibust.ivy2/local/org.jboss/jboss-javaee/5.0.1。 GA/jars/jboss-javaee.jar
[ivy:retrieve] ==== shared: 试过
[ivy:retrieve] C:\Documents and Settings\eweibust.ivy2/shared/org.jboss/jboss-javaee/5.0.1 .GA/ivys/ivy.xml
[ivy:retrieve] -- 工件 org.jboss#jboss-javaee;5.0.1.GA!jboss-javaee.jar:
[ivy:retrieve] C:\Documents and Settings\eweibust.ivy2/shared/org.jboss/jboss-javaee/5.0.1.GA/jars/jboss-javaee.jar
[ivy:retrieve] ==== public:试过
[ivy:retrieve] [http://repo1.maven.org/maven2/org/jboss/jboss-javaee/5.0.1.GA/jboss-javaee-5.0.1.GA.pom](http://repo1.maven.org/maven2/org/jboss/jboss-javaee/5.0.1.GA/jboss-javaee-5.0.1.GA.pom)
[ivy:retrieve] --工件 org.jboss#jboss-javaee;5.0.1.GA!jboss-javaee.jar:
[ivy:retrieve] [http://repo1.maven.org/maven2/org/jboss/jboss-javaee/5.0.1。 GA/jboss-javaee-5.0.1.GA.jar](http://repo1.maven.org/maven2/org/jboss/jboss-javaee/5.0.1.GA/jboss-javaee-5.0.1.GA.jar)
[ivy:retrieve] :::::::::::::::::::::::::::::::: ::::::::::::::
[ivy:retrieve] :: 未解决的依赖关系 ::
[ivy:retrieve] :::::::::::::::::::: ::::::::::::::::::::::::::
[ivy:retrieve] :: org.jboss#jboss-javaee;5.0.1.GA: 未找到
[ivy:retrieve] ::::::::::::::::::::::::::::::::::::::::::::: ：

```
<dependency org="org.jboss" name="jboss-javaee" rev="5.0.1.GA">
</dependency> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-29T15:41:14.750

您需要使用[http://repository.jboss.com/maven2/](http://repository.jboss.com/maven2/)上的 jboss 存储库。使用以下内容作为您的 ivy-settings.xml

```
<ivysettings>
  <settings defaultResolver="myChain" checkUpToDate="true" />
  <resolvers>
    <chain name="myChain">
      <ibiblio name="jboss" m2compatible="true" root="http://repository.jboss.com/maven2/" />
      <ibiblio name="ibiblio" m2compatible="true" />
    </chain>
  </resolvers>
</ivysettings> 
```

依赖也需要看起来像这样：

```
<dependency org="org.jboss.javaee" name="jboss-javaee" rev="5.0.1.GA" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-01-30T16:44:08.353

更新@AngerClown 的评论：当前的 JBoss 存储库具有不同的 URL。

```
<ibiblio
    name="jboss"
    m2compatible="true"
    root="https://repository.jboss.org/nexus/content/groups/public"
    pattern="[organisation]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]" /> 
```

[我在这里](https://repository.jboss.org/nexus/index.html#view-repositories;public)找到了概述。

# c# - 自动属性和 Nullable 类型 - 它们不兼容吗？

> ID：919178
> 
> 赞同：1
> 
> 时间：2009-05-28T04:25:22.130
> 
> 标签：c#, .net, linq-to-sql

我有一个自定义类型，它具有一个可以为空的属性，我试图从 SQL 中的一个可以为空的列中投射到该类型中。我总是得到一个像这样的“缺少方法异常”：

```
{"Method not found: 'Void MyType.set_Number(System.Nullable`1<Int32>)'."} 
```

尝试投影到具有可为空的自动属性的自定义类型是否有问题？代码如下所示：

```
public class MyType {        
    public string Name {get;set;}
    public decimal Value { get; set;}
    public int? Number { get; set;}
}

Dictionary<int, CustomType> dict;

dict = (from t in table
        select new {
           id = av.Account.Id,
           mt = new MyType { Name = t.Name, Value = t.Value, Number = t.Number }
        }).ToDictionary(item => item.id, item => item.mt); 
```

# ajax - 大型查询的延迟加载

> ID：919181
> 
> 赞同：0
> 
> 时间：2009-05-28T04:26:56.157
> 
> 标签：ajax, asp.net-ajax, delayed-execution

愉快的用户体验需要页面加载速度非常快。当发生大型查询或正在使用 Web 服务时，这可能会很困难。

我同意，应该首先加载整个页面，并在任何地方加载图像，这是一项繁琐的任务。

在 ASP.NET 中，这可以使用更新面板和 1 秒触发器来完成。触发器将加载一些数据，然后更新面板将进行更新。如果您不需要触发整个 asp.net 页面生命周期事件，则此方法可能不太受欢迎。使用这种方法，分配方法将消耗更多的资源和时间。如果您只是想显示数据怎么办？

另一种方法是创建一个 .ashx httphandler，它以 html 格式返回数据的表示。页面加载后一秒计时器会响起，触发 div 面板填充从 .ashx 处理程序返回的 html。这将带来高性能，但您会丢失回发和视图状态。我想在失去 asp.net 页面生命周期时这是预期的。

如果可能的话，您将如何创建一个使用视图状态和回发的延迟任务来带来出色的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T04:46:04.403

也许为自定义扩展创建一个 http 处理程序，并在处理程序的实现中返回数据（或预格式化的 html、json 或 xml），然后您使用 javascript ajax 调用将其插入到容器页面的 html 元素中。

雨果

# regex - 正则表达式查找具有各种扩展名的文件，例如-ASPX、ASCX、.js、.rpt、.xml

> ID：919205
> 
> 赞同：0
> 
> 时间：2009-05-28T04:42:53.687
> 
> 标签：regex

有没有办法编写一个可用于查找具有不同扩展名的文件的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-12-15T22:54:10.213

这适用于`Bash`：

```
find . -regex  '.*\\.\\(pdf\|chm\|doc\\)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:47:26.947

我确定有，但您应该问的问题是“查找具有特定扩展名的文件的最佳方法是什么？”。

正则表达式*并不是*每个问题的最佳答案。

我建议只获取所有文件的列表并将它们传递给类似`IsThisFileOneIWant(fileName,extensionList)`. 这比试图将正则表达式的使用硬塞到您的问题中要容易得多。

这样的事情应该这样做：

```
function IsThisFileOneIWant(fileName,extensionList):
    for each extension in extensionList:
        if fileName.endsWith (extension):
            return true
    return false 
```

用伪代码完成，因为它应该足够简单，可以转换成任何其他语言。

如果您*必须*有一个正则表达式，它将看起来像（基于您问题中的值）：

```
"ASPX$|ASCX$|\.js$|\.rpt$|\.xml$" 
```

但这完全取决于您要使用的 RE 引擎。例如，这是我工作目录中 egrep 命令的输出：

```
pax@paxbox1:~/work$ ls -1 | egrep '\.sh$|\.c$'
  backup0.sh
  backup1.sh
  eclipse.sh
  monbt.sh
  qq.c
  qq.sh
  xx yy.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T05:06:29.963

假设您有一个文件列表并且您正在寻找 .pdf、.chm 和 .doc，您可以通过以下方式进行检查：

> `\.pdf$|\.chm$|\.doc$`

如果您要针对单个文件名检查它，上面的正则表达式应该可以工作。

# java - sqlserver2000如何通过J2ME建立数据库连接？

> ID：919209
> 
> 赞同：0
> 
> 时间：2009-05-28T04:44:31.283
> 
> 标签：java, java-me

我希望对 theJ2Me 了解很多的专业人士提供一些帮助。我在一个移动应用程序上工作，用户将被存储并使用 sqlserver 2000 从数据库中检索数据。

我是这个领域的新手（J2ME），我知道的不多，所以我需要帮助。

此外，j2me 并不直接支持数据库连接，我们可以借助 servlet 来实现这一目的。我们可以使用 JSP 的 servlet 进行数据库连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T10:06:02.237

J2ME 上没有标准的 JDBC。

您尝试做的典型实现是让您的 J2ME 客户端向远程服务器发出 HTTP 请求。

请求的主体由您自己的数据传输和安全协议组成。

远程服务器解码请求正文，创建 SQL 请求，在 SQLServer 上运行它，对结果进行编码，将其作为对初始 http 请求的回复发送到 J2ME 客户端。

然后，J2ME 客户端可以自由地以它喜欢的任何方式解码和处理 SQL 请求结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T04:50:59.643

使用 servlet 或 JSP 是您的选择，您可以使用其中任何一种。此外，您需要确保只返回非常少的数据，例如根据行大小可能包含 20 到 50 行的内容。不要发送 XML 或其他文本数据，而是将它们作为可以使用 DataOutputStream 类创建的二进制流发送。

# asp.net - ASP.Net - 从业务层检查用户详细信息

> ID：919212
> 
> 赞同：0
> 
> 时间：2009-05-28T04:46:16.820
> 
> 标签：asp.net, authentication

我正在使用 asp.net 配置管理器和标准登录控件来允许用户登录。

我可以从业务层找到当前登录的用户，还是需要从 UI 中传入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T04:56:35.413

尝试这个：

```
HttpContext.Current.User.Identity.IsAuthenticated

//OR you may put user into session and access it like this

HttpContext.Current.Session["user"] 
```

# flash - 带外部接口的图像

> ID：919215
> 
> 赞同：1
> 
> 时间：2009-05-28T04:48:02.017
> 
> 标签：flash, actionscript-3, externalinterface, bitmapdata

我需要使用外部接口（as3）将图片发送到闪存...不能是网址，因为没有连接...我正在尝试打开图像文件并像文本一样发送到闪存但没有成功

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-10T01:04:04.860

简短的回答是：请不要那样做。

如果必须，那么您将需要获取图像数据，使用诸如 base64 之类的 HTTP 请求安全的方式对其进行编码，在闪存中对其进行解码，将其放入字节数组中并从中重新制作位图。这很复杂。

[http://dynamicflash.com/goodies/base64/](http://dynamicflash.com/goodies/base64/)是一个很棒的类，用于将 base64 图像字符串解码为字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T16:23:30.553

尝试提供更多细节。究竟应该打开什么图像文件？实际上，flash 本身可以从 HDD 中打开图像文件。

```
var ldr:Loader = new Loader();
ldr.load(new URLRequest('C:/Images/MyImage.jpg'));
addChild(ldr); 
```

但是，如果我了解您的麻烦-这可能不是解决方案吗？是吗？

# asp.net - SqlDataReader 列序号

> ID：919216
> 
> 赞同：2
> 
> 时间：2009-05-28T04:49:03.107
> 
> 标签：asp.net, sql, sql-server, ado.net, sqldatareader

假设我正在调用一个查询“SELECT name, city, country FROM People”。执行 SqlDataReader 后，列的顺序是否与我的 sql 查询中的顺序相同？

换句话说，我可以相信以下代码将始终正常工作：

```
SqlConnection connection = new SqlConnection(MyConnectionString);
SqlCommand command = new SqlCommand();
command.Connection = connection;
command.CommandText = "SELECT [name], [city], [country] WHERE [id] = @id";

try
{
    connection.Open();
    SqlDataReader reader = command.ExecuteReader(System.Data.CommandBehavior.SingleRow);

    if (reader.Read())
    {
        // Read values.
        name = reader[0].ToString();
        city = reader[1].ToString();
        country = reader[2].ToString();
    }
}
catch (Exception)
{
    throw;
}
finally
{
    connection.Close();
} 
```

另外，如果我使用列名而不是序数 (reader["name"])，我会损失多少性能？

是否有任何官方的微软文档描述了 SqlDataReader 中的列排序行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T04:50:19.457

是的，但您也可以使用 SqlDataReader.GetName(ordinal) 和 SqlDataReader.GetOrdinal(name)。

至于性能，我认为与检索下一行数据的开销相比，它可能非常微不足道。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-28T05:09:45.733

我完全同意 Josh - 字段的位置确实如您在 SQL 查询文本中指定的那样。

但是：我仍然更喜欢使用列名，因为它更健壮。例如，如果您需要在 SQL 查询中添加字段怎么办？

```
command.CommandText = "SELECT [name], [jobtitle], [city], [country] WHERE [id] = @id"; 
```

现在突然你必须重写你所有的代码来改变位置......

我通常在枚举数据读取器返回的所有行的循环之外做的是确定我感兴趣的每个字段的位置：

```
int namePosition = reader.GetOrdinal("name");
int cityPosition = reader.GetOrdinal("city"); 
```

然后我在处理数据的循环中使用这些位置来快速访问各个字段。这样，您只确定一次位置，但您在循环数据中使用位置 - 两全其美！:-)

马克

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-07-20T22:33:11.200

这个例子是最易维护和最容易阅读的：

```
int? quantity = reader.Get<int?>("Quantity");
Guid token = reader.Get<Guid>("Token"); 
```

它依赖于我创建的以下扩展方法。它执行 DB 空值检查，在未找到字段时提供信息性错误消息，并且在重新对齐列时不会中断。

```
internal static T Get<T>(this SqlDataReader reader, string fieldName)
{
    int ordinal;
    try
    {
        ordinal = reader.GetOrdinal(fieldName);
    }
    catch (IndexOutOfRangeException)
    {
        throw new IndexOutOfRangeException(string.Format("Field name '{0}' not found.", fieldName));
    }

    return !reader.IsDBNull(ordinal) ? (T)reader.GetValue(ordinal) : default(T);
} 
```

# .net - 我应该使用代码覆盖率工具吗？

> ID：919219
> 
> 赞同：6
> 
> 时间：2009-05-28T04:49:38.753
> 
> 标签：.net, code-coverage, ncover

我有兴趣为我的下一个 .NET 项目使用代码覆盖工具，但想知道这对我是否有必要？我是我工作的公司中唯一的开发人员，那么使用 NCover 对我有好处，还是仅适用于使用持续集成的大型团队？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T04:52:05.227

我会说去吧。分析代码覆盖率甚至可以帮助单个开发人员，甚至可能比团队更重要，因为基本上整个系统都在您的肩上。如果您是唯一的开发人员，您可以完全控制您使用的工具以及您希望如何设置。一旦/如果添加了更多开发人员，您将拥有创建高质量软件的所有工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T05:04:30.067

如果努力编写自动化测试，那么一定要使用代码覆盖工具来了解这些测试覆盖了代码的哪些区域。

在编写测试时查看代码覆盖率也有助于确保您的测试实际上是在测试您认为的内容。

与这些天编写测试的开销相比，测量代码覆盖率的开销是如此之小，以至于编写测试然后不查看这些测试的覆盖率是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T04:58:43.680

迦勒，

如果您还不知道，VS2008 的 Visual Studio 2008 Team System Editions 可以为您进行代码覆盖。它不像 NCover 那样全面，但对你来说应该是一个很好的开始。如果您喜欢它的功能并且想要更多的花里胡哨，那么我不明白为什么不这样做。（我上次检查时经典版只需 200 美元）。

-合作社

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T05:00:16.627

当然你应该使用它。它始终是另一个可以帮助您的工具。但请记住，代码覆盖率并不是测试代码时最重要的事情。您将获得许多包含测试的代码行，但这并不意味着您的代码在那里是没有错误的。使用 ncover 查找覆盖范围很小或没有覆盖范围的地方。

# delphi - 如何在 Turbo Delphi 上制作带有进度条的启动画面？

> ID：919220
> 
> 赞同：0
> 
> 时间：2009-05-28T04:49:40.097
> 
> 标签：delphi, progress-bar, vcl, splash-screen

(Unit1.pas)

```
 unit Unit1;

    interface

    uses
      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
      Dialogs, StdCtrls, ExtCtrls,unit2;

    type
      TForm1 = class(TForm)
        Button1: TButton;
        Label1: TLabel;
        Timer1: TTimer;
        procedure Timer1Timer(Sender: TObject);
      private
        { Private declarations }
      public
        { Public declarations }
        procedure OpenSplash;
        procedure ShowProgress;
        procedure CloseSplash;
      end;

    var
      Form1: TForm1;
          X: Integer;
          Total: Integer;
          Percent: Integer;

    implementation

    {$R *.dfm}
     procedure TForm1.OpenSplash;
    begin
      Label1.Caption := '';
      Show;
      Update;

    end;

procedure TForm1.CloseSplash;
begin
  Form1.Destroy;
end;

procedure TForm1.ShowProgress;
begin
Label1.caption:='';
   Total := 1000;
      for X := 1 to Total do
      begin
        Sleep(5);
        Percent := (x * 100) div Total;
        Label1.caption := StringOfChar('|', Percent) + IntToStr(Percent) + '%';
        Label1.Repaint;

      end;
end;

 procedure TForm1.Timer1Timer(Sender: TObject);
begin
  Close;
  Release;
  Form1 := nil;
end;

end. 
```

(Unit2.pas)

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm2 = class(TForm)
    memo1: TMemo;

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}
function Splash: TForm2;
begin
  if Form2 = nil then begin
    Form2 := TForm2.Create(Application);
  end;
  result := Form2;
end;
end. 
```

(*.dpr)

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1},
  Unit2 in 'Unit2.pas' {Form2};

{$R *.res}

begin
  Application.Initialize;
  Form1.OpenSplash;
  Form1.ShowProgress;
  Application.CreateForm(TForm1, Form1);
  Form1.CloseSplash;
  Application.Run;
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T08:17:09.160

在您的项目代码中，您正在这样做：

```
 Form1.OpenSplash;
  Form1.ShowProgress;
  Application.CreateForm(TForm1, Form1);
  Form1.CloseSplash; 
```

实际上，您在创建它之前正在使用 Form1 中的方法。这是专门给问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T05:07:56.217

在您的 *.dpr 中，尝试以下操作：

```
begin
  Application.Initialize;
  FormSplash := TFormSplash.Create( Application );
  FormSplash.OpenSplash;
  // Do the rest of your initialisation...
  // MAKE SURE THERE'S NO CreateForm FOR FormSplash!
  FormSplash.ShowProgress( "Creating a form..." );
  Application.CreateForm( ... , ... );
  ...
  // When you want to modify the splashscreen, do something like this:
  FormSplash.ShowProgress( "Doing something else..." );
  ...
  // Close the splash screen
  FormSplash.CloseSplash;
  Application.Run;
end. 
```

您不需要对您的 FormUtama 类型的任何引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T10:10:55.610

也许[这](http://www.deltics.co.nz/blog/?p=295)对你来说很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T08:33:45.337

以下是结论

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1},
  Unit2 in 'Unit2.pas' {Form2};

{$R *.res}

begin
  Application.Initialize;
  Form1 := TForm1.Create( Application );
  Form1.OpenSplash;
  Form1.ShowProgress;
  Application.CreateForm(TForm2, Form2);
  Form1.CloseSplash;
  Application.Run;
end. 
```

单元1

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls,unit2;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Label1: TLabel;
  private
    { Private declarations }
  public
    { Public declarations }
    procedure OpenSplash;
    procedure ShowProgress;
    procedure CloseSplash;
  end;

var
  Form1: TForm1;
      X: Integer;
      Total: Integer;
      Percent: Integer;

implementation

{$R *.dfm}
 procedure TForm1.OpenSplash;
begin
  Label1.Caption := '';
  Show;
  Update;

end;

procedure TForm1.CloseSplash;
begin
  Form1.Destroy;
end;

procedure TForm1.ShowProgress;
begin
Label1.caption:='';
   Total := 1000;
      for X := 1 to Total do
      begin
        Sleep(5);
        Percent := (x * 100) div Total;
        Label1.caption := StringOfChar('|', Percent) + IntToStr(Percent) + '%';
        Label1.Repaint;

      end;
end;

end. 
```

单元2

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm2 = class(TForm)
    memo1: TMemo;

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.dfm}

end. 
```

非常感谢那些回答我问题的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T20:54:43.110

在项目源代码（.dpr 文件）的开始语句之后添加此代码：

```
Application.Initialize; //this line exists!
 SplashScreen := TMySplashScreen.Create(nil) ;
 SplashScreen.Show;
 SplashScreen.Update; 
```

在最终的 Application.Create() 之后和 Application.Run 之前：

```
SplashScreen.Hide;
SplashScreen.Free; 
```

# visual-studio - 为什么我们为 visualstudio 指定 /mtd /mdd 选项它们的用途是什么？

> ID：919222
> 
> 赞同：0
> 
> 时间：2009-05-28T04:50:44.307
> 
> 标签：visual-studio, visual-studio-2005

你好

我想知道为 Visual Studio 指定 /mtd /mdd 选项的用途。

在这方面帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T05:24:43.387

它们都请求多线程、调试运行时库；`mtd`进一步请求静态链接（更大的 exe，但不依赖于运行时库 DLL）。有关详细信息，请参阅[MSDN 的页面。](http://msdn.microsoft.com/en-us/library/abx4dbyh(VS.80).aspx)

# amazon-ec2 - 解释什么是 Amazon EC2，我可以将它用作 Web 托管服务吗？

> ID：919224
> 
> 赞同：6
> 
> 时间：2009-05-28T04:51:09.330
> 
> 标签：amazon-ec2, cloud

我想购买 Amazon EC2 实例，是否可以将其用作虚拟主机？就像其他标准网络主机所做的一样。是否推荐用于网络托管？事实上，我只是想学习这项技术。所以我想我将使用 Amazon EC2 托管我的网站来学习云。而且我将来有项目，我打算使用 Amazon EC2。但我仍然不知道它是什么以及如何使用它。

它真的比其他主机提供的便宜吗？

也许你可以给我一个起点。现在，我正在阅读亚马逊的文档。但我认为你们可以为我提供更聪明的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T04:55:09.187

EC2 是一种云计算服务。本质上，您启动了一个在 Amazon 云中的节点计算机上激活的映像。

> 我想购买 Amazon EC2 实例，是否可以将其用作虚拟主机？就像其他标准网络主机所做的一样。是否推荐用于网络托管？

对的，这是可能的。它可以被推荐用于网络托管，但我相信对于小型网站来说，它是矫枉过正的。

> 它真的比其他主机提供的便宜吗？

它处于高端，每月最低费用为 50 美元。虽然它应该在高端是经济的。

还有其他几个类似于 EC2 的产品。您可能想在线尝试 Google AppEngine 和其他一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T05:01:40.853

它的功能与任何其他 Web 主机一样，只是它是瞬态的。如果您关闭实例（或它崩溃），您的数据就会消失。但是，如果您在云端保存数据或使用 Amazon 的一种持久性选项，这不是问题。查看 EC2+EBS。

你为你使用的东西付费，所以成本的答案是它可能更便宜，但这完全取决于你的应用程序。AWS 成本有据可查。

云计算的真正优势在于能够根据应用程序的实时需求扩展和收缩基础设施。小型或非常动态的基础架构在云中可能更便宜，而大型稳定基础架构在传统数据中心中可能更便宜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T04:59:14.897

据我所知，它本质上就像一个提供虚拟机的主机，只是它在一些方面得到了增强......

不是按月计费，而是按机器运行时按小时计费。如果您总是有一台小型服务器在运行，但如果您遇到流量高峰，请打开第二台服务器，这很好。

他们还具有某种“弹性 ip”技术，其中您的服务器出现在同一个 ip 上，即使它可能在不同时间在不同的数据中心上运行。我想这就像他们根据需要将您的 VMWare 映像扔到网络上的各种数据中心一样。

据我所知，设置每台机器与任何标准虚拟服务器都非常相似，神奇的部分来自于它们将你的 VM 映像从运行在特定主机上抽象出来。

还请记住，它们不仅仅是 EC2，例如 couchDB 是一个面向文档的数据库，您可以访问它，对于大多数人来说，它具有“无限的可扩展性”，但请记住它与关系数据库不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-07T23:01:45.283

AWS EC2 旨在替代云服务模型上的企业数据中心硬件。它的规模使 GoDaddy 或 WPengine 等网络托管公司能够在平台上托管他们的整个业务，包括他们所有的客户网站。当小型企业和初创企业能够使用为最大网站提供动力的尖端开发工具时，优势就出现了，而成本仅为独立构建软件所需成本的一小部分。需要在硬件配置中通过对 Web 流量的弹性响应而扩展到一台服务器之外的公司能够有效地在 AWS EC2 或 Kubernetes 上构建应用程序，其中较小的发布者或多域投资组合开发人员更适合共享托管计划，并在平台上提供折扣率服务和更少的系统管理要求。

# java - 此类使用 AtomicBooleans。它是线程安全的吗？

> ID：919227
> 
> 赞同：2
> 
> 时间：2009-05-28T04:54:02.980
> 
> 标签：java, multithreading, concurrency, xmpp, smack

我不喜欢用*synchronized(this)*锁定我的代码，所以我正在尝试使用*AtomicBooleans*。在代码片段中，*XMPPConnectionIF.connect()*建立到远程服务器的套接字连接。请注意，变量*_connecting*仅在*connect()*方法中使用；而*_connected*用于需要使用*_xmppConn*的所有其他方法。我的问题列在下面的代码片段之后。

```
private final AtomicBoolean _connecting = new AtomicBoolean( false );
private final AtomicBoolean _connected = new AtomicBoolean( false ); 
private final AtomicBoolean _shuttingDown = new AtomicBoolean( false ); 
private XMPPConnection _xmppConn;
/**
 * @throws XMPPFault if failed to connect
 */
public void connect() 
{
    // 1) you can only connect once
    if( _connected.get() )
        return;

    // 2) if we're in the middle of completing a connection, 
    //    you're out of luck
    if( _connecting.compareAndSet( false, true ) )
    {
        XMPPConnectionIF aXmppConnection = _xmppConnProvider.get();
        boolean encounteredFault = false;

        try
        {
            aXmppConnection.connect(); // may throw XMPPException
            aXmppConnection.login( "user", "password" ); // may throw XMPPException
            _connected.compareAndSet( false, true );
            _xmppConn = aXmppConnection;
        }
        catch( XMPPException xmppe )
        {
            encounteredFault = true;
            throw new XMPPFault( "failed due to", xmppe );
        }
        finally
        {
            if( encounteredFault )
            {
                _connected.set( false );
                _connecting.set( false );
            }
            else
                _connecting.compareAndSet( true, false );
        }
    }
} 
```

1.  根据我的代码，如果 2 个线程同时尝试调用*connect()* ，那么线程安全是否允许只允许一次连接尝试。

2.  在 finally 块中，我连续执行了两个 AtomicBoolean.set(..) ，会不会有问题，因为在这两个原子调用之间的间隙期间，一些线程可能会在其他方法中调用*_connected.get() ？*

3.  使用*_xmppConn*时，我应该做一个*synchronized( _xmppConn )*吗？

**更新**在方法中添加了缺少的登录调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T05:11:16.967

请记住，使用 3 `AtomicBoolean`s**与**使用单个锁保护这三个变量不同。在我看来，这些变量的状态构成了对象的单一状态，因此它们应该由同一个锁保护。在使用原子变量的代码中，不同的线程可以独立更新 、 和 的状态`_connected`——`_connecting`使用`_shuttingDown`原子变量只会确保对**同一**变量的访问在多个线程之间同步。

也就是说，我不认为同步`this`是你想要做的。您只想同步访问连接状态。您可以做的是创建一个对象用作此状态的锁，而无需打开监视器`this`。即：

```
class Thing {
  Boolean connected;
  Boolean connecting;
  Boolean shuttingDown;
  Object connectionStateLock = new Object();

  void connect() {
    synchronized (connectionStateLock) {
      // do something with the connection state.
    }
  }

  void someOtherMethodThatLeavesConnectionStateAlone() {
    // free range thing-doing, without getting a lock on anything.
  }
} 
```

如果您正在使用 Java 进行并发编程，我强烈建议您阅读[Java Concurrency In Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-28T05:13:23.423

1.  是的。变量 _connecting 充当测试和设置锁，可防止多个并发连接尝试。

2.  没问题 - 即使另一个线程在写入之间读取 _connected ， _connecting 也会阻止它尝试并发连接。

3.  是的，假设它的方法还不是线程安全的。

话虽如此，您的 connect() 方法会以当前的形式让我发疯，因为它不一定连接或抛出异常。您可以添加一个自旋循环，但这并不是一个很好的选择，因为除了来自多处理器机器的最短网络跃点之外，它的产生效率更高。此外，低级并发原语比同步更容易出错——我***强烈***建议您坚持使用同步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T13:56:21.503

我认为其他人在他们的评论中充分涵盖了正确性。我唯一的补充意见是我有点担心发布在 finally 中的位置。似乎您可能真的想将整个块（包括 _xmppConnProvider.get() 调用）包装在 try { } finally { } 中，这将保证您始终释放锁。否则，那里可能会发生某种未经检查的异常并使您处于不可恢复的状态。

从风格上讲，我认为这段代码比简单地使用 synchronized/Lock 来实现互斥更难推理。我会从易于推理的代码开始，如果你能证明这是一个热点，只会让它变得更复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T06:55:19.013

我怀疑您的程序将是线程安全的。我不是 Java 内存模型大师，但据我所知，可以安排操作，并且操作结果可能无法按您期望的顺序对其他线程可见。

考虑例如在 connect() 方法完全执行之前将**_connected设置为 true 吗？**另一个线程可能认为您已连接，即使您没有连接。这只是猜想 - 我不确定是否会发生特定问题。

我的观点是，你试图做的那种锁定是非常棘手的。坚持使用同步或使用**java.util.concurrent.locks**包中的锁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T05:36:58.370

1.  是的，它绝对满意。因为 _connecting.compareAndSet( false, true ) 将只允许一个线程进入。

2.  你不需要设置 _connected.set( false ); 因为如果发生异常，它永远不会设置为 true。是的，它可能不是由于连续，而是直到你没有设置连接到错误的其他尝试连接的线程不会认为连接正在进行中。

3.  是，如果 xmppConn 不是线程安全的。

# windows - 在测试 vanilla 机器上测试 Visual c exe 无法启动

> ID：919234
> 
> 赞同：0
> 
> 时间：2009-05-28T04:56:44.117
> 
> 标签：windows, visual-studio-2008, debugging, runtime

> 此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决此问题。

这是我在没有安装 Visual Studio 的系统上尝试调试文件时得到的结果。我试图将 Debug_NonRedist\x86\Microsoft.VC90.DebugCRT 复制到与我的 exe 相同的文件夹中，但没有成功。

*   exe 文件夹中 Microsoft.VC90.DebugCRT 文件夹中的 dll。
*   dll在同一个exe文件夹和dll中。

我也安装了“Microsoft Visual C++ 2008 Redistributable Package”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T15:25:26.020

调试 CRT 不可分发。“Microsoft Visual C++ 2008 Redistributable Package”不包括调试 CRT。该应用程序有一个自动生成的清单，它告诉操作系统从 SxS 系统加载调试 CRT。

有关使用私有程序集的方法，请参阅[此 CodeProject 文章](http://www.codeproject.com/KB/cpp/PrivateAssemblyProjects.aspx)，以便您的应用程序使用您手动复制到其他系统的调试 CRT dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:13:51.680

最*简单*的解决方案是使用静态链接而不是动态链接的 CRT 编译您的 exe。

使用 Visual Studio 打开您的项目。

从菜单 Project->Properties 中选择（或右键单击项目并选择“Properties：从解决方案资源管理器”）。

从选项卡式树控件：配置属性：C/C++：代码生成

将“运行时库”设置从“多线程调试 DLL (/MDd)”更改为“多线程调试 (/MTd)”
重新构建、重新复制，一切都应该很好

* * *

否则，另一种解决方案是实际构建一个捆绑 VC9 运行时位的 MSI。构建一个包含这些 MSM 合并模块的设置项目：

"C:\Program Files\Common Files\Merge Modules\Microsoft_VC90_DebugCRT_x86.msm"
"C:\Program Files\Common Files\Merge Modules\policy_9_0_Microsoft_VC90_DebugCRT_x86.msm"

（如果您运行的是 64 位，这些文件位于“c:\program files (x86)”目录中。）

* * *

最后，如果这不起作用，您可能还需要复制一些其他 DLL（MFC？）。我相信当您收到“应用程序配置不正确”错误时，您可以查看系统事件日志（控制面板->管理工具->事件查看器）。通常会有关于丢失 DLL 的详细错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T15:34:57.123

我建议制作一个发布版本并在原版机器上尝试（连同安装在该机器上的 Microsoft Visual C++ 2008 Redistributable Package），看看是否可行。

您的应用程序很可能还使用了您可能没有复制过来的 MFC 和 C++ DLL。即MFC90D.DLL、MSVCR90D.DLL、MSVCP90D.DLL

# google-maps - 如何将 Google 地图显示分成相等数量的部分？

> ID：919243
> 
> 赞同：0
> 
> 时间：2009-05-28T05:00:26.720
> 
> 标签：google-maps

我想将地图显示区域分成多个相等的部分。例如：水平 10 份，垂直 15 份，结果为 150 等份。

我不知道谷歌地图是否支持这样的事情......

`map.getBounds()`返回总可见区域；所以 ，

```
 var bounds = map.getBounds();
alert("main: "+bounds.isEmpty());
  var southWest = bounds.getSouthWest();
  var northEast = bounds.getNorthEast();
  var tileWidth  = (northEast.lng() - southWest.lng()) / 10;
  var tileHeight = (northEast.lat() - southWest.lat()) / 2;

  for (var x=0; x < 10 ; x++)
{
  for (var y=0; y < 2 ; y++)
   {
    var northLat = bounds.getNorthEast().lat () + (tileHeight * y);
    var westLng = bounds.getSouthWest().lng () + (tileWidth * x);
    var southLat = northLat + tileHeight;
    var eastLng = westLng + tileHeight;

            var tileBounds = new GLatLngBounds(new GLatLng(southLat, westLng), new GLatLng(northLat, eastLng));
    alert(tileBounds.isEmpty());

     }
 } 
```

现在的问题是 tileBounds.isEmpty() 返回 TRUE ！

我无法找到我遗漏的东西！任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T05:09:17.030

我假设您在 150 个较小的图块的区域坐标之后？

map.getBounds() 返回一个 GLatLngBounds 对象。这包括getSouthWest() 和getNorthEast() 方法。因此，根据可见地图左下角和右上角的纬度/经度值，您可以推导出 150 个较小区域的坐标：

*   将宽度（getNorthEast () 的经度 - getSouthWest () 的经度）除以 15，以确定图块宽度。
*   将高度（getNorthEast() 的纬度 - getSouthWest() 的纬度）除以 10，以确定图块高度。
*   根据特定单元格在 x 和 y 中的偏移量乘以宽度和高度来计算特定单元格的坐标。

因此，要为特定单元格索引 (x, y) 实例化 GLatLngBounds(sw?:GLatLng, ne?:GLatLng)：

```
// bounds is the map.getBounds () result
northLat = bounds.getNorthEast().lat () + (tileHeight * y);
westLng = bounds.getSouthWest().lng () + (tileWidth * x);
southLat = northLat + tileHeight;
eastLng = westLng + tileHeight;

tileBounds = new GLatLngBounds (new GLatLng (southLat, westLng), new GLatLng (northLat, eastLng)); 
```

# c# - 将字符串转换为日期时间

> ID：919244
> 
> 赞同：690
> 
> 时间：2009-05-28T05:01:02.337
> 
> 标签：c#, string, datetime, type-conversion

你如何将一个字符串转换`2009-05-08 14:40:52,531`成一个`DateTime`？

* * *

## 回答 #1

> 赞同：845
> 
> 时间：2009-05-28T05:14:57.353

由于您正在处理基于 24 小时的时间，并且您使用逗号分隔秒小数，因此我建议您指定自定义格式：

```
DateTime myDate = DateTime.ParseExact("2009-05-08 14:40:52,531", "yyyy-MM-dd HH:mm:ss,fff",
                                       System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2009-05-28T05:12:34.733

你基本上有两种选择。`DateTime.Parse()`和`DateTime.ParseExact()`。

第一个在语法方面非常宽容，可以解析许多不同格式的日期。这对于可能以不同格式出现的用户输入很有用。

ParseExact 将允许您指定用于解析的日期字符串的确切格式。如果您的字符串始终采用相同的格式，则最好使用它。这样，您可以轻松检测与预期数据的任何偏差。

您可以像这样解析用户输入：

```
DateTime enteredDate = DateTime.Parse(enteredString); 
```

如果您有特定的字符串格式，则应使用另一种方法：

```
DateTime loadedDate = DateTime.ParseExact(loadedString, "d", null); 
```

`"d"`代表短日期模式（[有关更多信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)），并`null`指定应使用当前区域性来解析字符串。

* * *

## 回答 #3

> 赞同：153
> 
> 时间：2009-05-28T05:03:07.360

尝试这个

```
DateTime myDate = DateTime.Parse(dateString); 
```

更好的方法是：

```
DateTime myDate;
if (!DateTime.TryParse(dateString, out myDate))
{
    // handle parse failure
} 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2016-11-21T09:57:37.857

使用[`DateTime.Parse(string)`](https://docs.microsoft.com/en-us/dotnet/api/system.datetime.parse#System_DateTime_Parse_System_String_)：

```
DateTime dateTime = DateTime.Parse(dateTimeStr); 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-05-23T11:55:30.777

似乎没有人实现扩展方法。[在@CMS的回答](https://stackoverflow.com/questions/919244/converting-a-string-to-datetime#919276)的帮助下：

工作和改进的完整源示例在这里：[Gist Link](https://gist.github.com/guneysus/7be61acd80382018293ff9f97de10063)

```
namespace ExtensionMethods {
    using System;
    using System.Globalization;

    public static class DateTimeExtensions {
        public static DateTime ToDateTime(this string s, 
                  string format = "ddMMyyyy", string cultureString = "tr-TR") {
            try {
                var r = DateTime.ParseExact(
                    s: s,
                    format: format,
                    provider: CultureInfo.GetCultureInfo(cultureString));
                return r;
            } catch (FormatException) {
                throw;
            } catch (CultureNotFoundException) {
                throw; // Given Culture is not supported culture
            }
        }

        public static DateTime ToDateTime(this string s, 
                    string format, CultureInfo culture) {
            try {
                var r = DateTime.ParseExact(s: s, format: format, 
                                        provider: culture);
                return r;
            } catch (FormatException) {
                throw;
            } catch (CultureNotFoundException) {
                throw; // Given Culture is not supported culture
            }

        }

    }
}

namespace SO {
    using ExtensionMethods;
    using System;
    using System.Globalization;

    class Program {
        static void Main(string[] args) {
            var mydate = "29021996";
            var date = mydate.ToDateTime(format: "ddMMyyyy"); // {29.02.1996 00:00:00}

            mydate = "2016 3";
            date = mydate.ToDateTime("yyyy M"); // {01.03.2016 00:00:00}

            mydate = "2016 12";
            date = mydate.ToDateTime("yyyy d"); // {12.01.2016 00:00:00}

            mydate = "2016/31/05 13:33";
            date = mydate.ToDateTime("yyyy/d/M HH:mm"); // {31.05.2016 13:33:00}

            mydate = "2016/31 Ocak";
            date = mydate.ToDateTime("yyyy/d MMMM"); // {31.01.2016 00:00:00}

            mydate = "2016/31 January";
            date = mydate.ToDateTime("yyyy/d MMMM", cultureString: "en-US"); 
            // {31.01.2016 00:00:00}

            mydate = "11/شعبان/1437";
            date = mydate.ToDateTime(
                culture: CultureInfo.GetCultureInfo("ar-SA"),
                format: "dd/MMMM/yyyy"); 
         // Weird :) I supposed dd/yyyy/MMMM but that did not work !?$^&*

            System.Diagnostics.Debug.Assert(
               date.Equals(new DateTime(year: 2016, month: 5, day: 18)));
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2018-03-18T23:03:00.877

我尝试了各种方法。对我有用的是：

```
Convert.ToDateTime(data, CultureInfo.InvariantCulture); 
```

`data`对我来说是这样的时间 9/24/2017 9:31:34 AM

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2014-11-07T06:04:38.687

试试下面，其中 strDate 是您的日期，格式为 'MM/dd/yyyy'

```
var date = DateTime.Parse(strDate,new CultureInfo("en-US", true)) 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2009-05-28T05:03:30.433

[Convert.ToDateTime](http://msdn.microsoft.com/en-us/library/xhz1w05e.aspx)或[DateTime.Parse](https://msdn.microsoft.com/en-us/library/system.datetime.parse(v=vs.110).aspx)

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2019-02-27T10:43:57.823

**日期时间解析**

**句法：**

```
DateTime.Parse(String value)
DateTime.Parse(String value, IFormatProvider provider)
DateTime.Parse(String value, IFormatProvider provider, DateTypeStyles styles) 
```

**例子：**

```
string value = "1 January 2019";
CultureInfo provider = new CultureInfo("en-GB");
DateTime.Parse(value, provider, DateTimeStyles.NoCurrentDateDefault);); 
```

*   值：日期和时间的字符串表示。
*   提供者：提供文化特定信息的对象。
*   样式：为某些日期和时间解析方法自定义字符串解析的格式化选项。例如， AllowWhiteSpaces 是一个有助于在解析时忽略字符串中存在的所有空格的值。

还值得记住的是 DateTime 是一个在框架内部存储为数字的对象，格式仅在您将其转换回字符串时适用于它。

*   解析将字符串转换为内部数字类型。

*   格式化将内部数值转换为可读字符串。

我最近遇到了一个问题，我试图将 DateTime 转换为传递给 Linq，但当时我没有意识到，在将 DateTime 传递给 Linq 查询时，格式是无关紧要的。

```
DateTime SearchDate = DateTime.Parse(searchDate);
applicationsUsages = applicationsUsages.Where(x => DbFunctions.TruncateTime(x.dateApplicationSelected) == SearchDate.Date); 
```

[完整的日期时间文档](https://docs.microsoft.com/en-us/dotnet/api/system.datetime?view=netframework-4.7.2#parsing-01)

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2011-09-18T11:41:51.463

```
string input;
DateTime db;
Console.WriteLine("Enter Date in this Format(YYYY-MM-DD): ");
input = Console.ReadLine();
db = Convert.ToDateTime(input);

//////// this methods convert string value to datetime
///////// in order to print date

Console.WriteLine("{0}-{1}-{2}",db.Year,db.Month,db.Day); 
```

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2015-04-14T13:07:48.773

如果您不确定输入值，也可以使用如下所示的 DateTime.TryParseExact()。

```
DateTime outputDateTimeValue;
if (DateTime.TryParseExact("2009-05-08 14:40:52,531", "yyyy-MM-dd HH:mm:ss,fff", System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out outputDateTimeValue))
{
    return outputDateTimeValue;
}
else
{
    // Handle the fact that parse did not succeed
} 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2020-02-11T13:56:56.130

我刚刚找到了一种优雅的方式：

```
Convert.ChangeType("2020-12-31", typeof(DateTime));

Convert.ChangeType("2020/12/31", typeof(DateTime));

Convert.ChangeType("2020-01-01 16:00:30", typeof(DateTime));

Convert.ChangeType("2020/12/31 16:00:30", typeof(DateTime), System.Globalization.CultureInfo.GetCultureInfo("en-GB"));

Convert.ChangeType("11/شعبان/1437", typeof(DateTime), System.Globalization.CultureInfo.GetCultureInfo("ar-SA"));

Convert.ChangeType("2020-02-11T16:54:51.466+03:00", typeof(DateTime)); // format: "yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fffzzz" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-02-23T17:50:56.563

**将此代码放在静态类中**`> public static class ClassName{ }`

```
public static DateTime ToDateTime(this string datetime, char dateSpliter = '-', char timeSpliter = ':', char millisecondSpliter = ',')
{
   try
   {
      datetime = datetime.Trim();
      datetime = datetime.Replace("  ", " ");
      string[] body = datetime.Split(' ');
      string[] date = body[0].Split(dateSpliter);
      int year = date[0].ToInt();
      int month = date[1].ToInt();
      int day = date[2].ToInt();
      int hour = 0, minute = 0, second = 0, millisecond = 0;
      if (body.Length == 2)
      {
         string[] tpart = body[1].Split(millisecondSpliter);
         string[] time = tpart[0].Split(timeSpliter);
         hour = time[0].ToInt();
         minute = time[1].ToInt();
         if (time.Length == 3) second = time[2].ToInt();
         if (tpart.Length == 2) millisecond = tpart[1].ToInt();
      }
      return new DateTime(year, month, day, hour, minute, second, millisecond);
   }
   catch
   {
      return new DateTime();
   }
} 
```

**这样，您可以使用**

```
string datetime = "2009-05-08 14:40:52,531";
DateTime dt0 = datetime.TToDateTime();

DateTime dt1 = "2009-05-08 14:40:52,531".ToDateTime();
DateTime dt5 = "2009-05-08".ToDateTime();
DateTime dt2 = "2009/05/08 14:40:52".ToDateTime('/');
DateTime dt3 = "2009/05/08 14.40".ToDateTime('/', '.');
DateTime dt4 = "2009-05-08 14:40-531".ToDateTime('-', ':', '-'); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-17T08:16:46.477

```
String now = DateTime.Now.ToString("YYYY-MM-DD HH:MI:SS");//make it datetime
DateTime.Parse(now); 
```

这个给你

```
2019-08-17 11:14:49.000 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-10-24T13:22:35.093

世界上不同的文化以不同的方式编写日期字符串。例如，在美国，2008 年 1 月 20 日是 2008 年 1 月 20 日。在法国，这将引发 InvalidFormatException。这是因为法国将日期时间读取为日/月/年，而在美国则是月/日/年。

因此，像 20/01/2008 这样的字符串将在法国解析为 2008 年 1 月 20 日，然后在美国抛出 InvalidFormatException。

要确定您当前的文化设置，您可以使用 System.Globalization.CultureInfo.CurrentCulture。

```
string dateTime = "01/08/2008 14:50:50.42";  
        DateTime dt = Convert.ToDateTime(dateTime);  
        Console.WriteLine("Year: {0}, Month: {1}, Day: {2}, Hour: {3}, Minute: {4}, Second: {5}, Millisecond: {6}",  
                          dt.Year, dt.Month, dt.Day, dt.Hour, dt.Minute, dt.Second, dt.Millisecond); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2020-01-30T06:04:34.683

你想快点吗？

假设您有一个格式为 yyMMdd 的日期。

我发现转换它的最快方法是：

```
var d = new DateTime(
(s[0] - '0') * 10 + s[1] - '0' + 2000, 
(s[2] - '0') * 10 + s[3] - '0', 
(s[4] - '0') * 10 + s[5] - '0') 
```

只需根据您选择的日期格式选择索引。如果您需要速度，您可能不介意函数的“非通用”方式。

此方法大约需要以下 10% 的时间：

```
var d = DateTime.ParseExact(s, "yyMMdd", System.Globalization.CultureInfo.InvariantCulture); 
```

# .net - 具有大量图像服务的可扩展 Web 应用程序

> ID：919248
> 
> 赞同：0
> 
> 时间：2009-05-28T05:02:08.530
> 
> 标签：.net, python, scalability

我开始开发一个 Web 应用程序。这个应用程序需要大量的图像处理。我从[PHP](http://en.wikipedia.org/wiki/PHP)开始，因为它是最容易和最便宜的托管。我在以前的一些应用程序中使用了 .NET 框架，并且我对 Python 非常熟悉。

但我现在一点也不习惯使用 PHP，所以我决定使用对我来说更容易的东西。

任何人都可以帮助我了解 .NET 框架或 Python（目前 web.py 对我来说看起来不错）是否比其他框架有一些优势，考虑到大量的图像处理，假设每秒大约 200 个请求？

如果有人可以为他们中的任何一个建议合适的主机，我将不胜感激。

编辑：

对困惑感到抱歉。通过图像处理，我的意思是允许应用程序的用户上传将存储在平面文件系统中的图片，而他们的条目在数据库中。

通过图像处理，我的意思是我也需要为这些图像创建缩略图，以便在应用程序中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T10:16:54.847

请购买 Schlossnagle 的书[Scalable Internet Architectures](https://rads.stackoverflow.com/amzn/click/com/067232699X)。

您不应该从 Python（或 PHP 或 .Net）提供图像，而是从 Apache 和 Squid 提供图像。Javascript 和 CSS 文件也是如此——它们是静态媒体，Python 永远不应该接触它们。

您应该只处理事务的 HTML 部分。

顺便说一句，这是您使用[Django](http://www.djangoproject.com)之类的架构获得的架构。静态媒体在 Python 之外处理。Python 处理验证和处理的 HTML 部分。

事实证明，您将花费大量时间在 Squid 和 Apache 上大惊小怪，试图让事情快速发展。如果你限制他们的职责，Python（和 Django 框架）就足够快了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T12:31:02.800

如前所述，任何数量的开发平台都可以工作，这实际上取决于您缓存内容的方法。

如果您对 Python 感到满意，我会推荐[Django](http://en.wikipedia.org/wiki/Django_%28web_framework%29)。有一个大型开发社区和许多大型应用程序和站点在该框架上运行。

Django 在内部通过使用[memcached](http://en.wikipedia.org/wiki/Memcached)支持缓存。您可以极大地自定义您想要缓存的方式和内容，同时能够在您的实际 Django 应用程序中保留许多缓存设置（在我无法完全控制的情况下使用第三方托管服务时，我觉得这很好系统）。

以下是一些可能有帮助的链接：

*   [Django 框架](http://www.djangoproject.com)- 有关 Django 框架的一般信息。
*   [Memcached with Django](http://docs.djangoproject.com/en/dev/topics/cache/) - 介绍如何专门为 Django 项目配置缓存。
*   [Memcached 网站](http://danga.com/memcached/)
*   [The Django Book](http://www.djangobook.com/en/2.0/) - 一本免费的学习 Django 的在线书籍（它还包括缓存和缩放问题）。
    *   [缩放章节](http://www.djangobook.com/en/1.0/chapter20/)
    *   [缓存章节](http://www.djangobook.com/en/2.0/chapter15/)

有许多托管公司提供共享和专用托管计划。我会访问[http://djangohosting.org/](http://djangohosting.org/)以确定哪个主机最适合您的需要。我已经使用[了很多 WebFaction](http://www.webfaction.com)，并且对他们的服务非常满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T05:39:47.633

如果您希望在提供图像时获得性能，则必须采用“除非绝对必要，否则永远不要访问磁盘”的 FaceBook 方法——这意味着在图像服务器和最终用户之间使用尽可能多的缓存。有许多产品可以帮助您解决商业和免费问题，包括正确配置您的网络服务器 - 谷歌，看看哪些产品适合您的成本和平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T06:29:12.183

根据您所写的内容，.NET 或 Python 对您来说都是不错的选择。就个人而言，我会选择 Python。为什么？

*   这是免费的。
*   它是可扩展的。
*   使用 Python Imaging Library 你几乎可以对图像做任何事情。
*   嘿，这是 python - 更少的代码，相同的结果。

老实说，你的选择并不重要——只要选择你觉得舒服的那个并坚持下去。你提到了 web.py——这个网站是用 web.py 制作的：[colr.org——](http://www.colr.org)它是用 1304 行代码制作的，不包括外部库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T11:54:58.503

我认为切换语言对您的问题没有多大帮助，只是您最初选择的架构仅适用于少量数据。我建议您访问[http://highscalability.com](http://highscalability.com)，是时候开始了解大公司如何扩展他们的应用程序了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-31T03:36:19.223

我还建议查看[MogileFS](http://www.danga.com/mogilefs/)。它是一个在基于 Unix 的操作系统上运行的分布式文件系统。我知道 digg 用它来存储他们的头像图像。

它来自创建 memcached 和 live journal 的同一个人。

# apache-flex - Flex 让用户能够更改 TabNavigator 标签并发送到数据库

> ID：919260
> 
> 赞同：0
> 
> 时间：2009-05-28T05:09:18.790
> 
> 标签：apache-flex, flex3

我想知道如何让用户更改选项卡导航器上的标签，例如双击选项卡并让用户重命名选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-12T18:20:31.523

[http://code.google.com/p/flexlib/](http://code.google.com/p/flexlib/)

超级标签栏

-缺口

# web-applications - 从 iframe 访问父主题

> ID：919262
> 
> 赞同：0
> 
> 时间：2009-05-28T05:09:46.280
> 
> 标签：web-applications, iframe

我有一个通过 iframe 访问的 Web 应用程序，用户登录。

它确实检测到用户登录并相应地遵守。

那么如何将父页面的外观（或主题）集成到 Web 应用程序中呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T05:16:25.263

如果您的意思是：

```
<html>
<head>
<title>Page on foo.com</title>
</head>
<body>
<iframe src="http://bar.com/login"></iframe>
</body>
</html> 
```

而你想让 bar.com/login 看起来像 foo.com，没有 foo.com 的合作是不可能的。您将无法从 iframe 访问 foo DOM，因为那将是跨域脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T05:55:27.607

如果您可以控制 iframe 中加载的页面，则可以添加对父级 css 文件之一的引用。

# iphone - 用于通用 NSCoding 实现的 Objective-C 反射

> ID：919265
> 
> 赞同：12
> 
> 时间：2009-05-28T05:11:46.763
> 
> 标签：iphone, objective-c, reflection, serialization, objective-c-runtime

在 Objective-C 中是否有任何反射方法允许您通过检查对象的公共属性并生成 encodeWithCoder: 和 initWithCoder: 的通用实现来编写通用的 NSCoding 实现。

我正在考虑像[XStream](http://xstream.codehaus.org/tutorial.html) for Java 这样的东西，它允许使用反射来序列化和反序列化 Java 对象的通用方法。更好的方法可能是将属性标记为您想要序列化或瞬态的事物（如 Java 中的瞬态关键字）。

我一直在阅读有关Cocoa的[Archives and Serializations Programming Guide的文档。](https://developer.apple.com/iphone/prerelease/library/documentation/Cocoa/Conceptual/Archiving/Archiving.html)我知道您希望对对象的序列化进行一些控制，但这通常是一个对称的过程，必须反转为序列化编码的内容以反序列化它似乎很奇怪。我是 DRY 的信徒（不要重复自己）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-28T05:20:29.113

这不仅是可能的，而且我有一个朋友正在努力做到这一点。（您可以[在此处查看他的博客](http://davedelong.com/blog/2009/04/13/aspect-oriented-programming-objective-c)。）反射是使用[Objective-C 2.0 运行时参考](http://developer.apple.com/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)中记录的 Objective-C 运行时函数完成的。看一看。

但是请注意，这仅在您想要保存所有实例变量的通用行为时才有效。不过，您可能不希望 NSView 保存它的超级视图；在这种情况下，通用案例将不起作用。

您可以通过为要保存的任何实例变量声明属性并将任何其他变量“隐藏”来区分要序列化的事物和不可序列化的事物，但这将属性的整个目的扭曲为一个小好处. 我不会推荐它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-02T02:11:44.013

（我是 BJ Homer 评论中链接的博客文章的作者）。使用代码有几个注意事项：

1.  目标类必须符合 KVC。如果您为您的 ivars 使用 Objective-C 2.0 属性，那么您已经准备就绪。否则，您需要确保您的类设置为正确响应 valueForKey: 和 setValue:forKey: 方法。
2.  该代码使用运行时的未记录“功能”以递归方式使 ivar 类符合 NSCoding。编译时，几乎所有的打字信息（AFAIK）都从代码中删除，但为了保存 ivars，*它们*也必须符合 NSCoding。我发现如果 ivar 是一个对象并且我在其上调用 ivar_getTypeEncoding()，我会得到类似于：{#IVAR_CLASS}（示例：{#NSString}）的 ac 字符串。我所做的是获取 # 和 } 之间的字符串，使用 NSClassFromString 创建一个 Class 对象，然后对其进行递归。
3.  此代码将保存所有 ivars。
4.  使用风险自负（当然）

我写这个主要是为了证明概念，有很多情况下这段代码会失败。例如，在对象 A 中有一个用于 B 的 ivar，而 B 有一个用于 A 的 ivar，然后使用代码序列化其中一个或另一个会（我相信）导致无限循环。

尽管如此，我认为 Objective-C 甚至允许您首先做类似的事情，这真是太棒了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-02T23:18:36.603

查看 RMModelObject：

[http://www.realmacforge.com/svn/trunk/RMModelObject/](http://www.realmacforge.com/svn/trunk/RMModelObject/)

但是，请注意 ObjC 运行时的东西在 10.5 和模拟器中有效，但在实际的 iPhone 上无效。发现很难。也许 OS 3.0 最终支持它，但我还没有检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T07:41:41.017

今晚写这篇文章就是为了这个目的；不要忘记#import！这假设你的类中的所有@properties 都是 NSObject 形式，所以 NSNumber 而不是 float 等。

```
#import <objc/runtime.h>

-(id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        uint count;
        objc_property_t *properties = class_copyPropertyList(self.class, &count);
        for (int i = 0; i < count ; i++) {
            const char* propertyName = property_getName(properties[i]);
            NSString *key = [NSString stringWithCString:propertyName encoding:NSUTF8StringEncoding];
            NSValue *value = [decoder decodeObjectForKey:key];
            [self setValue:value forKey:key];
        }
        free(properties);
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {
    uint count;
    objc_property_t *properties = class_copyPropertyList(self.class, &count);
    for (int i = 0; i < count ; i++) {
        const char* propertyName = property_getName(properties[i]);
        NSString *key = [NSString stringWithCString:propertyName encoding:NSUTF8StringEncoding];
        NSValue *value = [self valueForKey:key];
        [encoder encodeObject:value forKey:key];
    }
    free(properties);
} 
```

# visual-studio - Visual Studio 中 /mtd 和 /mdd （在代码生成属性部分）有什么区别

> ID：919267
> 
> 赞同：10
> 
> 时间：2009-05-28T05:11:59.477
> 
> 标签：visual-studio, visual-studio-2005

`/mdd`在 Visual Studio 中指定（多线程调试 dll）和`/mtd`（多线程调试）有什么区别？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-28T05:19:44.887

`/mtd`需要一个静态链接，以生成一个`.exe`更大但**不**依赖于包含运行时库的 DLL（VS2005 附带）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T11:46:59.533

通常，如果您的应用程序很小并且不包含多个 DLL 或 EXE，您可能更喜欢静态链接到运行时库。这将简化分发过程，因为您不需要安装运行时库。

如果您有多个 DLL 或 EXE，因为每个 EXE 和 DLL 在静态链接时会更大，正如 Alex 所说，您可能更喜欢使用动态链接到运行时库，从而使您的应用程序更小。

# ruby-on-rails - 一个困难的 named_scope 情况

> ID：919274
> 
> 赞同：1
> 
> 时间：2009-05-28T05:14:02.377
> 
> 标签：ruby-on-rails, named-scope

在我的应用程序中，用户可以开始和参与讨论。他们还可以标记讨论；当他们这样做时，会创建一个包含标签名称的标签（如果它不存在的话），并且还会创建一个标签，它会记住哪个用户用什么标签标记了哪个讨论。

所以在讨论模型中，我们有这个：

```
has_many :taggings
has_many :tags, :through => :taggings 
```

我正在尝试创建一种简单的方法来从一个用户那里检索讨论中的所有标签。理想情况下，named_scopes 将被明智地用于保持事物的美观和清洁。我认为它应该看起来像这样：

```
tags = @discussion.tags.from_user(@user) 
```

在 Tag 类中编写这个 named_scope 非常困难。它应该是什么样子？我是否需要以某种方式将它与 Taggings 表连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T13:32:55.187

您确实需要以某种方式将其与标记表连接起来。就是这样：

```
class Tag < AR::Base
  named_scope :from_user, lambda { |user| 
    { :include => :taggings, :conditions => ["taggings.user_id = ?", user.id] } 
  }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T12:11:06.647

也许这会做到。虽然不是 named_scope 解决方案：

```
tags = @discussion.taggings.find_by_user(@user).map(&:tag) 
```

不确定是否需要在`taggings.find_by_user_id(@user.id)`这里使用。完成后，您将得到一个数组，其中包含给定用户给定讨论的标记。将该数组映射到 taggings.tag-model （我猜你的标记模型属于一个标签）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T13:12:49.657

我没有机会对此进行测试，但我认为它可能会起作用：

```
class Discussion < ActiveRecord::Base
  has_many :taggings
  has_many :tags, :through => :taggings
end

class Tagging < ActiveRecord::Base
  belongs_to :discussion
  belongs_to :tag  
end

class Tag < ActiveRecord::Base
  has_many :taggings
  has_many :discussions, :through => :taggings

  named_scope :by_user do
    def named(user) do
      Tagging.find_by_user_and_discussion(user, discussion).tags
    end 
  end
end 
```

像这样使用它：

```
tags = @discussion.tags.by_user.named(@user) 
```

# .net - 在 Delphi Win32 中嵌入 Mono

> ID：919275
> 
> 赞同：7
> 
> 时间：2009-05-28T05:14:42.657
> 
> 标签：.net, delphi, winapi, mono, embedding

有谁知道如何在 Delphi Win32 应用程序中嵌入 Mono 运行时的细节？官方文档对于 Win32 环境（[www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono)）不是很有帮助。

更新：

我非常熟悉 Delphi 中静态链接的变幻莫测，并且对 DLL 非常满意。Mono 本身有依赖关系，所以多一个 DLL 真的没什么大不了的。关于 FPU 控制字的评论是我关心的问题之一，因为我相信 CG 默认设置与 Microsoft 工具不同。这是我认为需要的：

*   从“C”到 Delphi 的标题翻译（可能不太难）
*   Mono DLL 的编译（Mono 随附的是否可用？）
*   更好地理解 FPU 控制字 goctha's（希望没有）
*   来自尝试过这个特技而留下战斗伤痕的人的一些反馈；）

更新（2011 年 6 月 12 日）：

如果有人感兴趣，我刚刚在 Google Code 上找到了一个将 Mono 嵌入 Delphi 应用程序的项目：

[monoemb4delphi](http://code.google.com/p/monoemb4delphi)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T08:39:40.457

Mono 似乎可以用 mingw 构建，尽管我发现大多数参考都是从 Linux 交叉编译的，例如[http://www.mono-project.com/Cross-compiling_Mono_for_Windows](http://www.mono-project.com/Cross-compiling_Mono_for_Windows)

我想说你的首要任务是搜索一个 libmono dll

*   不使用cygwin（相信我）
*   已知在 mingw 之外也可以工作（如果使用 C++，请避免可能的 mingw 特定 C++ 修改）
*   最好带有一个可读的标题。

如果您找到或将其构建为 DLL（以满足 mghie 的正确评论），请编写一个标题（如 Stijn 建议的那样）它可以工作。

但这不是微不足道的，VM 并非完全是微不足道的野兽，并且通常会在通常的跨语言问题域中出现问题：库初始化（顺序）、FPU 异常掩码和一般的异常处理。这也是为什么我说“知道在 mingw 之外工作”的部分原因，研究它在其他编译器中的接口方式可能会为如何正确解决这个问题提供指导。

请注意，单声道教程有一个单声道库初始化程序，但这并不意味着单声道使用的所有库都已正确初始化。特别是 mingw 的 libc 可能需要初始化，因为它们通常是通过 ctor 初始化的。我的（非常初始的）mingw 胶水代码在这里：

[http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/ide/fpmingw.pas?view=markup](http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/ide/fpmingw.pas?view=markup)

另一方面，在 DLL 中，它可能通过 DLL 初始化例程进行初始化。

我自己已经能够将 GDB 构建为 lib 并使用它（虽然静态地在 FPC 中，但我没有制作 DLL 的动力，因为这是一个选项）

请注意，如果您真的必须自己执行此操作，这不是一个简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T07:11:49.183

[Rudy Velthuis](http://rvelthuis.de/articles/articles-cobjs.html)的这篇文章展示了如何将 C lib 链接到 Delphi 的示例。通过一些工作，应该可以`mono_jit_init`使用这种技术从 Delphi 访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T08:20:35.240

您可能想看看[http://www.remobjects.com/hydra.aspx](http://www.remobjects.com/hydra.aspx)。

# .net - WCF Windows Service TimeOut

> ID：919287
> 
> 赞同：16
> 
> 时间：2009-05-28T05:19:08.473
> 
> 标签：.net, windows, wcf, web-services, exception-handling

I have a client application developed in .net seding a request to wcf service and supposed to send reponse .if execution time with in 1 minute,there is no error,if it exceeds 1 minute the error is

> Inner exception: This request operation sent to net.tcp://localhost:18001/PitToPort/2008/01/30/StockpileService/tcp did not receive a reply within the configured timeout (00:01:00).
> The time allotted to this operation may have been a portion of a longer timeout. This may be because the service is still processing the operation or because the service was unable to send a reply message. Please consider increasing the operation timeout (by casting the channel/proxy to IContextChannel and setting the OperationTimeout property) and ensure that the service is able to connect to the client

How to increase the time out and how? What is the best solution?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-06-03T00:26:21.527

Be careful, this error message is a boilerplate string WCF sends when it doesn't have a clue what happened. It really means "mmh something went wrong in the chain but I'm not really sure what, so, here's some trivia about the configuration, do what you want with it".

MOST OF THE TIME when you get this message it has nothing to do with actual timeouts. It can be quotas (number of objects in the graph, overall size, array length) or something that went wrong server-side, between the time your service method returned a result and the actual bytes were sent over the wire. So, you should check your configuration settings (and not the timeout, except if you had to actually wait for one minute to get the error. If you got the error straight away, it has nothing to do with timeouts whatsoever).

This useless message is on top of my list of WCF annoyances.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-28T05:23:22.857

The timeout is called "sendTimeout" and you can configure it on your binding section in your config file, or in code - your choice.

config:

```
 <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding sendTimeout="00:03:00" />
      </netTcpBinding>
    </bindings> 
```

This will set the timeout to 3 minutes.

Marc

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-02T23:57:39.153

I have add the following code to the Service app code

```
system.transactions  
    defaultSettings timeout="00:30:00" 
```

with this code the service will wait 30 minutes to get process done in database server and increase the

```
maxBufferSize="2147483647"  
maxReceivedMessageSize="2147483647"  
maxBufferPoolSize="2147483647" 
```

in client binding attributes, then it works fine.

Problem :Service is sending response but the client buffersize was less previously,I increased to maximum buffer size.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-24T18:59:07.413

I experienced this same error. Specifically, the exception that I received was:

> System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:09:59.9940000'.
> 
> System.IO.IOException: The write operation failed, see inner exception.
> 
> System.ServiceModel.CommunicationException: The socket connection was aborted.
> 
> This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue.
> 
> Local socket timeout was '00:09:59.9940000'.
> 
> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host

The cause of my problem was due to the size of the message that was being sent from my WCF Client to the WCF Host. Apparently, the size of the message was too large.

To fix the problem, I changed the hosts Web.Config `maxReceivedMessageSize` attribute from `2097152` to `8000000` and the error no longer persisted.

Here's the Web.Config's attribute I'm referring to:

```
<netTcpBinding>
<binding name="NetTCPBinding" maxReceivedMessageSize="8000000">
....
</binding>
</netTcpBinding> 
```

The 8M message size that I chose was based on how large I "think" the message size is. I don't know of a way to explicitly determine the size of the actual WCF message that gets passed from the client to the host.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-16T10:50:52.073

Check this out, for similar type of Error u have to set OperationTine out property [http://www.codeproject.com/KB/WCF/WCF_Operation_Timeout_.aspx](http://www.codeproject.com/KB/WCF/WCF_Operation_Timeout_.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-09T21:17:29.737

If you know why the server is taking more than a minute to respond to the client, then you should extend the OperationTimeout of the channel (as it says in the error message).

Check out this, including a code sample at the end: [http://final-proj.blogspot.com/2009/09/wcf-timeouts.html](http://final-proj.blogspot.com/2009/09/wcf-timeouts.html)

Good luck.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-28T23:56:40.453

Here is a far simpler solution... just set the property directly on the current ClientBase. In other words, first add a service reference, initalize it, then set the property "InnerChannel.OperationTimeout"

NetUtilsWCF.SMTPDiagClient sClient = new NetUtilsWCF.SMTPDiagClient();

sClient.InnerChannel.OperationTimeout = new TimeSpan(0, 5, 0);

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-30T07:40:04.497

I got the same exception when using callback.It works in local test(the client and service program are running in the same machine) but not work in user environment(the service program runs in winserver 2008). The server code has executed in according to the log.I think it's because of environment or authority problem but have no idea how to handle.

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2011-11-09T18:58:40.987

If you are facing the problem after correcting the config file then you may need to check this attribute. `"OperationContract(IsOneWay:=True)".` If you miss `IsOneWay:=True` attribute it may cause this problem.

# hibernate - JPA 实体映射为 OneToOne 和 OneToMany

> ID：919290
> 
> 赞同：2
> 
> 时间：2009-05-28T05:20:09.347
> 
> 标签：hibernate, jpa, entity, one-to-one

考虑以下 JPA 实体。我的应用程序实例类必须始终有一个对 4 个特殊信封实例的 OneToOne 引用，但它也有一组 0-infinite 用户定义的信封。这甚至可能吗？是否可以同时使用单向和/或双向参考？

```
 @Entity(name = "Application_Instance")
public class ApplicationInstance implements Serializable {

    @Id
    private int databaseId;
    private Envelope accountTransfersEnvelope = new Envelope("Account Transfers");
    @OneToOne
    private Envelope newTransationsEnvelope = new Envelope("New Transactions");
    @OneToOne
    private Envelope incomeEnvelope = new Envelope("Income Envelope");
    @OneToOne
    private Envelope creditCarEnvelope= new Envelope("Credit Card");
    @OneToMany
    protected Set<Envelope> userEnvelopes = new HashSet<Envelope>();

//rest of class
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T14:21:41.000

您可以使用连接表映射来做到这一点：

```
@OneToMany
@JoinTable( name = "USER_ENVELOPE",
            joinColumns = { @JoinColumn( name = "APP_ID" ) },
            inverseJoinColumns { @JoinColumn( name = "ENVELOP_ID" ) } )        
protected Set<Envelope> userEnvelopes = new HashSet<Envelope>(); 
```

# objective-c - 您如何使复选框单元格仅显示在大纲视图中的某些实体行上？

> ID：919294
> 
> 赞同：-1
> 
> 时间：2009-05-28T05:21:02.170
> 
> 标签：objective-c, cocoa

我希望使复选框单元格仅在大纲视图内的子行上显示它自己，因此当您下拉父级时，复选框将出现在子实体的行中。我需要做什么？如果这有帮助，这里是实体图的图片： http: [//snapplr.com/phrn](http://snapplr.com/phrn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T19:29:08.197

在这里，委托方法是你的朋友，特别是

```
- (NSCell *)outlineView:(NSOutlineView *)outlineView dataCellForTableColumn:(NSTableColumn *)tableColumn item:(id)item 
```

这将在每个单元格在大纲视图中绘制之前被调用。它使您有机会指定应将哪个单元格用于给定的行/列组合。您可以返回一个`NSButtonCell`配置为子项的复选框，也可以返回一个空白`NSCell`。

对于其他每一列，文档建议简单地返回`[tableColumn dataCellForRow:row]`.

# linq - 具有 3 层的 LINQ

> ID：919295
> 
> 赞同：2
> 
> 时间：2009-05-28T05:21:39.050
> 
> 标签：linq, .net-3.5, c#-3.0, 3-tier

目前我正在设计我的学位项目。几天前我开始学习LINQ。我发现它很有趣，并计划在我的项目中使用它，但现在我在某些时候感到困惑。

当我添加 LINQ to SQL 类时，它会针对数据库中的每个表自动生成实体类。

假设我在数据库中有两个表：

> 用户
> 项目
> UserProjects（联合表）

以及一个表示哪个用户与哪个项目相关联的联合表。

LINQ to SQL 类自动为我生成这三个类。现在我应该创建单独的（用户和项目）类作为业务对象还是使用这些自动生成的实体？

此外，要使用数据库功能，我们需要使用 3 层架构。我可以直接从我的 BLL 调用 LINQ DAL 方法还是需要创建单独的 DAL 来调用 LINQ DAL 的方法？

```
class UserBLL

{
    public void saveUser(String username, String password)
    {
         // here I am calling LINQ DAL from by BLL
         UserDataContext db = new UserDataContext();
         User u =new User {Username = username, Password = password};
        db.user.InsertOnSubmit(u);
       db.SubmitChanges();
    }

} 
```

上面的方法调用顺序好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T05:51:06.380

Linq To SQL 非常适合单层设计。**对于断开连接的模型**或**多层环境**来说不是很好。

上面的代码只将一个用户插入到数据库中。如果您启动 MSSQL SQL Server Profiler 或将日志连接到 Visual Studio 中的输出。你应该看到

```
//Hookup the log to the output in visual studio
using (var db = new UserDataContext()) {
    db.Log = Console.Out;
}

INSERT INTO User VALUES (value1, value2, value3,...) 
```

要更新用户，您的代码应该看起来像

```
public void UpdateUser(String username, String password, int userId)
{
     using (var db = new UserDataContext()) {
         //Get Row From Database Marching Id
         var user = db.user.Single(p => p.Id = userId);
         //Update Values
         user.Username = username;
         user.Password = password;
         //Save To The Database
         db.SubmitChanges();
     }
}

//Get All Users From Database
public IEnumerable<User> GetAllUsers()
{
     using (var db = new UserDataContext()) {
         //Get Row From Database Matching Id
         var users = from user in db.user
                    select user;
         return users.ToList();
     }
}

//To display the data just enumerate through the enumeration that is returned.
var users = BusinessInstance.GetAllUsers();
foreach (var user in users) {
    //user is the current item
} 
```

你应该让你每次做一个工作单元时都在使用你的数据库契约。（因为默认情况下数据库上下文使用事务，这可能会变得很丑，**不要为构建数据库上下文的性能而烦恼！**）

通常，当您使用多层环境时，您会在通过电线（网络）传递它们时创建一个单独的[POCO 。](http://en.wikipedia.org/wiki/POCO)

[NCommon](http://code.google.com/p/ncommon/)是 Linq to Sql 的一个很好的抽象，应该处理业务验证和规则。

笔记。在数据库中[散列密码值](http://en.wikipedia.org/wiki/MD5)是一种很好的做法。

查看[ScottGu 的博客，了解有关 linq 的快速问答和基础知识](http://weblogs.asp.net/scottgu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T05:46:32.880

我通常为我的每个 BLL 对象创建一个类范围的数据上下文。

我还创建了 2 个构造函数，1 个创建数据上下文，另一个接受数据上下文。第二个是我可以从其他 BLL 对象传递数据上下文。

这允许您对可能来自 2 个不同 BLL 对象的对象执行数据库操作，同时仍保持良好的关注点分离。您还需要将数据上下文公开为公共只读，以便可以传递它。

需要注意的是，不必明确处置 DataContext 对象，[更多信息请参见此处](https://stackoverflow.com/questions/821574/c-linq-to-sql-should-datacontext-be-disposed-using-idisposable)。但基本上 DataContext 只会在 BLL 对象的生命周期内存在。如果您确实需要释放资源（即您已完成跟踪更改），您可以显式处理它。

例如

```
public class UserBLL
{
    private readonly UserDataContext context;

    public UserBLL() : this(new UserDataContext())
    {
    }

    public UserBLL(UserDataContext context)
    {
        this.context = context
    }

    public UserDataContext Context { get { return context; } }

    public void saveUser(String username, String password)
    {
         // here i am callsing LINQ DAL from by BLL
         User u = new User {Username = username, Password = password};
         Context.Users.InsertOnSubmit(u);
         Context.SubmitChanges();
    }
} 
```

# asp.net - ASP.Net 生成的 SWF 对象

> ID：919297
> 
> 赞同：0
> 
> 时间：2009-05-28T05:23:28.287
> 
> 标签：asp.net, flash

我正在处理 SWF 文件（连接到 Flash Media Server 的视频播放器），我们正在使用 ASP.Net。ASP.Net 连接数据库并获取流 URL，在代码隐藏页面中，我们获取视频播放器的 DIV 的 InnerHTML 值并将流名称放入其中。

现在它可以完美运行，至少在 Chrome、FireFox 和 Opera 上是这样。但是，在 IE 中，它表示与视频播放器有关的电影未加载。

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-03T07:12:24.640

我刚刚删除了嵌入标签之外的东西。

# html - IE 行间距

> ID：919299
> 
> 赞同：0
> 
> 时间：2009-05-28T05:24:58.847
> 
> 标签：html, css, internet-explorer, layout

[我的网站看起来与 FF 和 IE ( http://www.kiubbo.com](http://www.kiubbo.com) )非常不同，因为您可以看到 IE 8 中的“.news_item”行之间有很多空间

如果有人知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T06:13:44.643

对于在兼容节点中运行的 IE（即像旧版本的 IE），你的空

```
<span class="news_item_title"></span> 
```

在每个新闻项目的末尾似乎在 IE 和 FF 之间呈现不同。你真的需要它吗？

如果您特别担心的是 IE8，请通过将相关元标记添加到您的页面来强制其进入标准模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

这使得页面呈现几乎与 FF 相同，除了您的顶部广告的对齐方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T07:45:25.763

验证代码。w3C 验证器在页面中[发现了 57 个错误](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.kiubbo.com%2F&charset=(detect+automatically)&doctype=Inline&group=0)，其中一些会影响布局。

关于如何呈现正确代码的标准非常明确，但没有关于如何呈现不正确代码的标准。浏览器只是试图充分利用它，但它们有不同的方法来处理不正确的标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T05:48:05.153

我建议使用列表来定义你的行而不是一堆 div，因为它更具语义。这也可以帮助解决您遇到的空间问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T05:49:19.987

ie 和 ff 在 padding 和 margin 行为中的区别，在 '.news_item' 类中使用它

# windows - 没有 Windows 窗体的 AddMessageFilter？

> ID：919301
> 
> 赞同：2
> 
> 时间：2009-05-28T05:25:31.640
> 
> 标签：windows, winapi

我想使用 System.Windows.Forms.Application.AddMessageFilter 的功能，但我的目标应用程序不使用 Windows 窗体。此功能添加了一个过滤器以在 Windows 消息路由时对其进行监控。如果有人知道这是如何工作的，我不介意编写自己的代码来执行相同的功能。

带有 GWL_WNDPROC 的 SetWindowLong 只影响收到的消息，我想影响发送的消息。System.Windows.Forms.Application 是静态的，但使用引发异常的 IMessageFilter 调用 AddMessageFilter 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T05:28:21.607

您可以使用消息挂钩来实现您想要的。事实上，消息挂钩比 IMessageFilter 强大得多，因为除了发送到窗口句柄的窗口消息之外，还有其他种类的挂钩。例如，您可以挂钩系统范围的按键或鼠标移动。

有关更多信息，请参阅本文

[http://msdn.microsoft.com/en-us/magazine/cc188966.aspx](http://msdn.microsoft.com/en-us/magazine/cc188966.aspx)

# ssis - SSIS 事务 - 大型记录集

> ID：919302
> 
> 赞同：0
> 
> 时间：2009-05-28T05:26:06.897
> 
> 标签：ssis, transactions, etl

我想知道 SSIS 如何处理大型数据集的事务。我有一个大约 150,000 行的“大型”数据集，作为从临时数据库到实时数据库的 ETL 的一部分，每一行都需要根据业务规则进行验证。

如果任何记录不符合其业务规则，则不会有任何记录出现在实时数据库中（即回滚事务）。

我的问题是 SSIS 如何处理大型事务 - 或者可以吗？如果最后一条记录不符合其业务规则，它会处理输入 149,999 条记录然后回滚整个记录吗？或者是否有更好的最佳实践来执行这种类型的大数据传输操作？

我目前的想法是在控制流级别处理序列容器中的每条记录，并在容器上启用事务设置。所有验证都将在序列容器中完成，插入也将在此容器中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T05:36:56.233

SSIS 可以很好地处理事务。它失败的地方是使用 MSDTC 对多个数据库或服务器进行事务处理（仍然有效，但有一些警告）。

您可以将数据流任务上的 TransactionOption 设置为必需。这将强制 SSIS 将其注册到事务中。同样，您可以将其他任务的 TransactionOption 设置为 NotSupported（例如，如果失败，则更新状态表失败）。

您实际上无法处理序列容器中的每条记录（除非您多次循环数据流任务，这可能不是最好的方法）。相反，我会将数据流置于所需的事务选项中，然后如果您的数据流中的任何记录失败并回滚整个事务，它应该使任务失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T05:46:18.543

我同意 Dane 的观点，SSIS 和 SQL 服务器应该没有问题，只要有适当的基础设施来支持这一点。

# iphone - 如何在 iPhone 上使用 ARMv6 优化的 OpenMAX DL 库

> ID：919303
> 
> 赞同：4
> 
> 时间：2009-05-28T05:26:21.373
> 
> 标签：iphone, xcode, assembly, arm

有用于 ARM 的汇编语言库用于进行信号处理和其他称为“用于 ARM11 处理器系列的 OpenMAX DL”的好东西。

当您从 ARM 站点下载该库时，它包含 .s 汇编文件。这些如何用 Xcode 编译并从 iPhone 的 Objective-C 调用？有内联汇编的示例，但我找不到有关使用 .s 汇编文件的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-19T14:27:42.740

简而言之，您可以使用 X-code 编译程序集文件。只需将程序集文件 *.s 添加到项目并构建项目。组装文件被组装和链接。

不要忘记在代码中包含所需的 *.h 文件，然后作为正常函数调用。

您可以在此处阅读更多详细信息：[http ://www.iphonedevsdk.com/forum/iphone-sdk-tools-utilities/16804-calling-assembly-functions-c.html](http://www.iphonedevsdk.com/forum/iphone-sdk-tools-utilities/16804-calling-assembly-functions-c.html)

* * *

**编辑：** ARMv6 优化的 OpenMAX 库中有很多 MACRO，也许其中一些是特定于 RealView 的。所以他们可以在 X-code 中编译或者不能编译。也许这是你的问题。

# jvm - Java 和 ASP.NET

> ID：919304
> 
> 赞同：0
> 
> 时间：2009-05-28T05:26:30.483
> 
> 标签：jvm, cil

请问谁能告诉我JVM和MSIL之间的区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T05:31:03.680

JVM是[Java虚拟机](http://en.wikipedia.org/wiki/Java_Virtual_Machine)，Java平台上执行[Java字节码的](http://en.wikipedia.org/wiki/Java_bytecode)[虚拟机](http://en.wikipedia.org/wiki/Virtual_machine)。

MSIL 是 Microsoft 中间语言，目前称为[通用中间语言](http://en.wikipedia.org/wiki/Common_Intermediate_Language)(CIL)，是“最低级别的人类可读”指令，它是在[通用语言运行时](http://en.wikipedia.org/wiki/Common_Language_Runtime)(CLR) 上运行的字节码，.网络平台。

JVM 和 MSIL 不是苹果对苹果的比较，因为一个是虚拟机，另一个是在虚拟机上运行的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T05:34:42.243

JVM 和 MSIL 实际上并不是一个很好的比较。MSIL 是所有 .NET 代码编译成的中间语言。.NET 运行时即时将 IL 编译成可以在机器上执行的代码。

MSIL 可与 Java 字节码相媲美。Java 虚拟机 (JVM) 在 .NET 运行时以与 MSIL 类似的方式执行字节码。JVM 将 Java 字节码编译成可以在机器上执行的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T05:37:43.173

你真的需要阅读一篇完整的文章才能得到一个好的答案。如果您想讨论 Java 字节码与 MSIL 或 Sun JVM 与 CLR，您可能需要澄清一下。这应该会有所帮助。[链接文本](http://portal.acm.org/citation.cfm?id=957341 "JVM 与 CLR 研究")

# size - 如何通过监控堆栈大小来防止堆栈溢出？

> ID：919305
> 
> 赞同：6
> 
> 时间：2009-05-28T05:26:30.843
> 
> 标签：size, stack-overflow, monitor

许多 C/C++/Fortran 和其他程序员会遇到“堆栈溢出”错误。我的问题是，是否有工具、程序或简单的代码片段允许我们在程序运行时监控或检查堆栈的大小？这可能有助于查明堆栈在何处累积并最终导致溢出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T05:39:13.327

看看这个[问题](https://stackoverflow.com/questions/53827/checking-available-stack-size-in-c)。接受的答案引用了 Raymond Chen：

```
If you have to ask, you're probably doing something wrong. 
```

如果您确实需要这样做，那么解决方案/工具将取决于平台。一个简单的技巧是用一个已知的字节值（例如AA）填充堆栈并监视第一个没有这个值的字节的位置。这将为您提供使用的最大堆栈大小，而不是当前堆栈大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T05:39:27.570

我不知道是否有程序可以为您执行此操作，但是您可以轻松地检查堆栈指针所在的函数内部（至少在 C 和 C++ 中）。只需查看任何变量的内存位置即可。它不会是确切的位置，但应该在几个字节内（这对您的目的来说很好），因为局部变量是在堆栈上定义的。如果您想要确切的值，我相信您可以通过组装获得。

不过，当程序崩溃时，只查看堆栈跟踪可能会更容易。

# perl - 如何使用 Perl 将相同的文本写入两个单独的文件句柄？

> ID：919318
> 
> 赞同：4
> 
> 时间：2009-05-28T05:33:42.040
> 
> 标签：perl, text-files

我需要将相同的文本输出到两个不同的文件（这是我正在测试的应用程序要求）。现在，我不想打开两个文件句柄，每个写两行，然后在我的代码中关闭它们十几次。

有没有一种简单的方法，可能在 Perl 中使用一行（但不是在 CLI 中！），将相同的文本发送到两个不同的文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-28T05:40:57.270

使用[IO::Tee](http://search.cpan.org/~kenshan/IO-Tee-0.64/Tee.pm)。

从文档的示例中：

```
use IO::Tee;
$tee = IO::Tee->new($handle1, $handle2);
print $tee "foo", "bar"; 
```

# oracle - Oracle Associative Array TYPE 不能在 USING 语句中使用（如果 TYPE 在包中声明）

> ID：919330
> 
> 赞同：3
> 
> 时间：2009-05-28T05:37:00.943
> 
> 标签：oracle, arrays, plsql, types, associative

如果***全局声明***了“关联数组变量” ，则可以在`OPEN CURSOR USING`语句中使用它。

***如果在 package***中声明了“关联数组变量” ，而在`OPEN CURSOR USING`语句中使用，则会出现编译错误。

下面提供了更多详细信息

我将一些值存储在一个关联数组变量中。稍后通过将它们带入 Cursor 来迭代这些值，如下所示，

```
strQuery := 'select DISTINCT column_value from table(CAST(:v_Assoc_Collection AS AssocArray_Date_t))';
OPEN RefCur_Item FOR strQuery USING v_Assoc_Collection; 
```

在这里，我使用了关联数组变量“v_Assoc_Collection”，它是“AssocArray_Date_t”的一种。

如果我在包 [] 之外声明了“AssocArray_Date_t”类型`CREATE OR REPLACE TYPE AssocArray_Date_t IS TABLE OF DATE;`，那么它工作正常。

但是，如果我***在过程中声明类型***，则会出现编译错误。

> 错误：PLS-00457：表达式必须是 SQL 类型。在：“使用 v_Assoc_Collection 为 strQuery 打开 RefCur_Item；”
> 
> 错误：PL/SQL：语句被忽略。在：“使用 v_Assoc_Collection 为 strQuery 打开 RefCur_Item；”

作为参考，下面提供了代码，

```
 -- Package Declaration
CREATE OR REPLACE PACKAGE AssocTypePackage
AS   
  Type CursorType IS REF CURSOR;      

  PROCEDURE AssocTypeProcedure(name IN VARCHAR2);
END;

-- Package Body
CREATE OR REPLACE PACKAGE BODY AssocTypePackage
AS
PROCEDURE AssocTypeProcedure(
  name IN VARCHAR2
)
IS  
  strQuery             VARCHAR2(4000);
  v_Assoc_Collection   AssocArray_Date_t := AssocArray_Date_t();
BEGIN
  FOR i IN 1..5
  LOOP      
    v_Assoc_Collection.EXTEND;
    v_Assoc_Collection(v_Assoc_Collection.COUNT) := <<someDate>>;               
  END LOOP;

  strQuery := 'select DISTINCT column_value from table(CAST(:v_Assoc_Collection AS AssocArray_Date_t))';
  OPEN RefCur_Item FOR strQuery USING v_Assoc_Collection;
  LOOP 
    -- ----
    -- some processing
    -- ----
  END LOOP; 
END  AssocTypeProcedure; 
END AssocTypePackage; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T05:42:07.520

您应该知道，在 Oracle 中，SQL 引擎和 PL/SQL 引擎是两个独立的东西，尽管它们可以相互调用。要在 SQL 语句中使用数组，它们必须对 SQL 引擎可见，即必须使用 CREATE TYPE 语句将它们声明为 SQL 类型。在包中创建的类型对 SQL 引擎是不可见的。

# visual-studio-2005 - 如何使用 Visual Studio C++ 2005 编写一个简单的游戏

> ID：919333
> 
> 赞同：3
> 
> 时间：2009-05-28T05:38:02.800
> 
> 标签：visual-studio-2005

我在我的机器上安装了 Visual Studio 2005，我想开始磨练我的 C++ 技能，我想做一个简单的游戏，例如。太空侵略者！

我想知道我可以在没有任何其他外部库的情况下仅使用 vs2005 完成整个游戏吗？

任何使用普通 vs2005 创建简单游戏的简单示例/链接？

加思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T01:20:12.197

我的回答是“是”。但是，它不仅仅是在 VS 中使用 C++。您需要学习 Windows 编程，通过使用 Win32 API 或 MFC 来处理用户的输入（Windows 消息）和图形 (GDI) 以进行游戏开发。如果你想更认真地做游戏，你还需要学习[DirectX](http://msdn.microsoft.com/en-us/directx/default.aspx)，它是一组 API，可以更有效地处理多媒体程序（包括游戏）。

所以，如果你只是想做一个像“太空侵略者”这样的游戏，可能需要很长时间才能开始真正的游戏编程，因为你需要学习所有这些基本的东西。有更方便的框架来开发这类游戏，例如[pygame](http://www.pygame.org) (python) 和[xna](http://creators.xna.com/en-US/) (C#)。这取决于您的项目意图和时间限制。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-03T15:40:29.587

如今，大多数 Windows 游戏都使用微软免费提供的[DirectX SDK](http://msdn.microsoft.com/en-gb/directx/default.aspx)。SDK 本身带有大量的帮助文件和教程，可以帮助您进行操作。

但是，我建议初学者使用[XNA](http://msdn.microsoft.com/en-gb/xna/default.aspx)和 C# 来学习这些概念，而不是使用 C++。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-05T01:51:57.950

是的，您可以使用 C++ 和 vs2005 制作一个简单的游戏，而无需任何其他外部库。另一方面，使用一些外部库尤其是图形、控件和声音会更快、更容易，否则您将不得不自己复制该功能。（如果你没有特别的理由使用 vs2005，你应该得到最新的编译器）

如果你的问题从 C++ 中脱离出来，并且浪费了一些时间学习一些库 API，那么它会更快更容易，或者让你的编程项目变得更简单，直到你对 C++ 语言感到满意为止。另一个问题是计划，如果您确实有一个项目，请先写下您打算如何进行的框架，选择您不知道的部分并在开始编写代码之前先进行一些研究。

至于外部库的选择，如果您可以远离依赖于平台的代码/库，即使它看起来更复杂（从长远来看，它对您更有用），您将得到最好的服务，作为一个您可以交易的快速示例用于 OpenGL 的 DirectX 更复杂但更便携，但这完全取决于您打算在游戏中实现的复杂程度，您可以选择更通用的图形引擎（Ogre 3D [http://www.ogre3d.org/](http://www.ogre3d.org/) LGPL）并以某种方式绕过低级知识（即使您确实跳过直接使用它，学习 OpenGL 的基础知识也将是一个很好的投资时间）。

您应该根据它们为您提供的自由度（许可和可移植性需求）以及稳定性和成熟度来选择外部库。如果您的目标是学习并进行更深入的控制，请避免使用封闭源代码，或者避免使用 GPL，因为它限制您生成 GPL 代码（了解许可证）。您还应该避免平台依赖...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-03T22:10:08.367

在您开发了没有库的简单游戏之后，您可能会考虑查看 Qt 库以了解它们可以为您做什么，因为在这种情况下，它们会为您完成大量的样板工作。您还具有能够开发跨平台的额外优势，而不是以后需要移植。Qt 可以在这里找到：http: [//qt.nokia.com/](http://qt.nokia.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T05:44:52.693

据我所知，VSC++ 没有什么特别之处，只是一种编码/构建等方式。所以是的，这应该足以制作游戏。如果我是你，我会从在线搜索 C++ 游戏开始，然后下载它们的源代码。扫描它以查找常见的策略/设计并运行一个以测试您的 VSC++ 是否设置正确。之后开始编写自己的游戏。

//edit
像[这样](http://cplus.about.com/od/cgames/C_Games_with_Source_Code.htm)的网站可以免费在线获取源代码等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-28T05:44:55.377

我曾经使用 GDI+ 制作横向滚动射击游戏——我得到了大约每秒 20 到 30 帧的动画，看起来相当不错（这是在 Visual Basic .NET 中，顺便说一句）。尝试使用 TextureBrush 类 - 这是制作简单快速动画的秘诀。

然而，我的知识有点过时了。毫无疑问，您会在这里听到人们说您应该下载 Visual Studio 2008 的 Express Edition 并使用 WPF（这可能不是一个坏主意，尽管我还没有接触过 WPF）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T09:47:13.830

如果您计划创建的不仅仅是简单的基于文本的游戏，我会考虑使用外部库，因为您需要某种方式来显示对象、控制它们，您可能可以自己编写所有这些东西，但我觉得您可能会收获很多更多地使用 SDL [http://lazyfoo.net/SDL_tutorials/index.php](http://lazyfoo.net/SDL_tutorials/index.php)之类的库，如果您选择走这条路，那里有一些很好的教程可以帮助您入门。

如果您想编写自己的功能，可以直接编辑 SDL 表面的位，因此它可以提供一种简单的媒介来设置窗口和接收输入，同时仍然可以让您准确控制像素在做什么什么

# asp.net - 从缓存中删除项目时，Asp.Net 缓存和内存泄漏

> ID：919334
> 
> 赞同：1
> 
> 时间：2009-05-28T05:38:09.100
> 
> 标签：asp.net, caching, .net-2.0, memory-leaks, asp.net-2.0

所以我试图在我的 Asp.Net 应用程序中引入一些缓存。用户的新数据以大型数据集的形式从数据库返回。每当用户请求数据时，我都会将此数据集插入到`HttpRunTime.Cache`. 目前我将他们的缓存时间设置为 2-3 小时。这些都是非常大的数据集，我经常用不同的键将它们放入缓存中。我担心的是这样做的内存泄漏影响。Asp.Net 会处理缓存中的过多数据并将其删除吗？此外，当 Asp.Net 或我使用删除缓存项目时`Cache.Remove()`，只是删除了对数据集的引用还是数据集也是从内存中收集的垃圾？是否存在数据集可能从缓存中“删除”但仍存在于内存中从而产生性能问题的情况？如果是这种情况，有没有办法明确地“垃圾收集”它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T05:44:23.320

放入缓存中的项目不能保证在那里，如果内存不足，框架会清除缓存。您可以指定优先级以指示应首先自动清除哪些项目。

至于是否会释放内存，只要管理项目，并且您自己没有在应用程序的其他地方保留引用，垃圾收集器将在缓存超时到期后释放内存（或者您手动将其从缓存）。

当然，从缓存中删除并不能保证物理内存将被释放，因为这只发生在下次垃圾收集器运行时。

# php - jquery 和 PHP - 将信息从 php 发送回 JS

> ID：919345
> 
> 赞同：0
> 
> 时间：2009-05-28T05:44:17.437
> 
> 标签：php, jquery, ajax

感谢所有伟大的答案，这有很大帮助！

* * *

你好，我需要一些建议/帮助（显然）

一般来说，我对 jquery/ajax 还是很陌生，但到目前为止我已经能够做很多事情了。这是我正在尝试做的事情，然后是我到目前为止所做的事情。

我正在尝试模仿 wordpress 帖子类别。你在哪里写帖子，然后当你想把它添加到一个类别时，它可以让你当场创建新的复选框类别！

我设法让它工作到我将请求发送到 php 脚本的位置，并将记录添加到我的数据库，然后将新复选框附加到我的列表底部。我遇到的问题是我需要从 PHP 返回两个值，ID 和 NAME。现在我可以返回名称，但我不知道如何单独返回它们，以便我可以在 JS 中操作它们。

我可能会以完全错误的方式解决这个问题。我的想法是我将创建新的类别记录，然后使用 JS 将它们附加回类别列表，然后我会选中它们，当我单击“保存”时，值（ID）将被发送到当前行（帖子）在数据库中。

我希望我说得有道理。如果您有任何问题，请随时提出，如果您有任何想法或答案，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:05:14.190

尝试以 JSON 格式返回文本。根据您使用的 jQuery AJAX 方法，您可以设置自定义回调（在第一个函数返回后调用的函数）。

例如，如果您使用 $.post 方法，您可以执行以下操作：

后端.php：

```
$return_value = array();
$return_value['value1'] = 'data 1';
$return_value['value2'] = 'data 2';
echo json_encode($return_value); 
```

前端.js：

```
$.post("backend.php", '',
    function(data) {
        alert(data.value1); // Would show data 1
        alert(data.value2); // Would show data 2
}, "json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T05:57:29.880

好吧，我知道你想要做什么：

到目前为止，您正在将新创建的类别的 ID 以纯文本形式从 php 返回到调用 javascript。

现在您要返回新创建类别*的*ID 和 NAME。

有两种方法可以做到这一点：使用 XML 或 JSON。（可能会争辩说还有更多的方法。而且确实有。）

在 XML 中：

```
<response>
  <ID>2</ID>
  <NAME>jquery</NAME>
</response> 
```

在 JSON 中：

```
{
  id : 2,
  name : "jquery"
} 
```

在 javascript 中解析 JSON 是一件小事。解析 XML 可以使用 jQuery 完成，只需查找 jQuery ajax 文档。

干杯，

jrh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T05:59:24.433

返回值最常用的方法是使用 JSON 字符串[JSON wikipedia](http://en.wikipedia.org/wiki/JSON)

然后做

```
var p = eval(response.txt);
alert(p.var1);
alert(p.var2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T06:00:17.660

假设`$id`和`$name`是您要返回的值：

```
<?php

$id = 2;
$name = "jquery";

echo json_encode (array("id" => $id, "name" => $name));

?> 
```

然后使用任何其他答案在 Javascript 中操作这些值。

# c++ - 5D 数组哈希表

> ID：919353
> 
> 赞同：1
> 
> 时间：2009-05-28T05:45:32.880
> 
> 标签：c++, matlab, hashtable

我目前在名为 template 的变量中有一个 5D 数组，它被写入名为 template1D 的 1D 数组中，其中包含 3456 个（8 * 12 * 3 * 4 * 3）个条目的哈希表。在 Matlab 中，多维数组的访问方式如下：

```
template{idx_r, idx_l, idx_rho, idx_alpha, idx_beta} 
```

但是，由于我的索引分别从 0-7、0-11、0-2、0-3 和 0-2 开始，我不完全确定从这五个索引以便正确获取模板数组中的正确段。正确制作此类哈希函数的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T11:56:19.220

不确定您在这里要做什么，但是您是否考虑过 ind2sub 和 sub2ind 函数？他们可能会有所帮助。您可能需要担心 0 与基于 1 的索引，因为 MATLAB 是基于 1 的。

——洛伦

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T06:10:36.863

如果它是一个排列为平面数组的二维数组，您将第一个索引乘以第一个维度的大小并添加第二个索引。同样，对于 5 个维度，您可以执行以下操作：

```
index = (((i1*l1 + i2)*l2 + i3)*l3 + i4)*l4 + i5; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T06:04:31.197

您是否考虑过使用字符串进行哈希处理？你甚至可以把它变成一个十六进制数，

5 个字符

```
#Character 0 is in the range '0'...'7',
#Character 1 is in the range '0'...'B',
#Character 2 is in the range '0'...'2',
#Character 3 is in the range '0'...'3',
#Character 4 is in the range '0'...'2' 
```

字符串作为十六进制数的部分优点在于，如果您需要转换，它也有一个简单的 int...err... unsigned long long 表示形式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T16:08:05.950

[虽然您当然可以自己计算线性索引（如Tal](https://stackoverflow.com/questions/919353/5d-array-hash-table/919404#919404)所指出的），但使用内置函数[SUB2IND](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/sub2ind.html)（如[Loren](https://stackoverflow.com/questions/919353/5d-array-hash-table/920506#920506)所指出的）会更清晰、更容易阅读。对于您的示例，您将按以下方式使用它：

```
index = sub2ind([8 12 3 4 3], idx_r, idx_l, idx_rho, idx_alpha, idx_beta); 
```

如果您的所有索引都是从 0 开始的，那么您必须在将它们传递给 SUB2IND 之前给它们中的每一个加 1。

**编辑：**

如果您想了解如何在 MATLAB 中自己正确计算线性索引，以使它们与 SUB2IND 的结果一致，那么您将使用以下代码：

```
index = (((idx_beta*4 + idx_alpha)*3 + idx_rho)*12 + idx_l)*8 + idx_r + 1; 
```

**请注意**，需要与此等式一起使用的索引必须从 0 开始，而传递给 SUB2IND 的索引必须从 1 开始。要将这个方程推广到任意维数**N**：

```
index = (...(idx(N)*sz(N-1) + idx(N-1))*sz(N-2) + ...)*sz(1) + idx(1) + 1; 
```

或更简洁地说：

```
index = 1 + sum(idx.*cumsum([1 sz(1:(N-1))])); 
```

其中**idx**是每个维度的基于 0 的索引值的数组， **sz**是每个维度的大小数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T06:25:24.687

我不知道我是否正确理解了这个问题，所以我将说明我的理解：

*   您有一个给定大小的数组，它代表一个多维矩阵。
*   您想将 5 维向量转换为数组的实际位置

我会首先创建一个类来封装它，然后我会提供使用 5 个参数（std::size_t、unsigned int 左右）定义的 operator()。这个 operator() 应该首先检查范围（可能会抛出异常并将所有参数转换为最终位置。

最简单的转换是：

```
size_t position( size_t idx_r, size_t idx_l, size_t idx_rho, size_t idx_alpha, size_t idx_beta )
{
   size_t pos = (((((((idx_r * dim_l) + idx_l) * dim_rho) + idx_rho) * dim_alpha) + idx_alpha) * dim_beta) + idx_beta;
   return pos;
} 
```

其中*dim_XXX*表示第 XXX 维矩阵的大小。

如果您正在执行许多操作，您可能需要考虑在内部以不同的顺序表示数据，而不更改接口以获得更好的*缓存*命中率。

一般算法是将一个维度中的每个索引转换为后续维度元素，并在该维度添加偏移量。最简单的例子是二维系统。要访问 10 列数组上的第 3 行第 2 列（假设您按行存储，并且为了参数从 1 开始计数），您将首先计算第三行的开始，即每行 3 * 10 个元素。然后在第 2 行（第 2 列）内添加偏移量。

如果您将其扩展为 3 维数组，首先您必须通过将平面索引乘以平面的大小来找到您正在寻找的平面，然后使用前面的算法：

```
size_t position( size_t x, size_t y, size_t z )
{
   size_t start_of_plane_z = z * dim_y * dim_x; // z * size_of_plane
   size_t start_of_row_y = y * dim_x; // y * size_of_row
   size_t offset_inside_row = x;

   return start_of_plane_z + start_of_row_y + offset_inside_row;
} 
```

现在，应用一些基本代数，您可以将方程变为：

```
size_t pos = (((z * dim_y) + y) * dim_x) + x; 
```

这将减少乘法的数量，并且更容易为更多的维度定义。

# java - 根据调用方法更改返回类型

> ID：919355
> 
> 赞同：4
> 
> 时间：2009-05-28T05:45:53.317
> 
> 标签：java, generics, reflection, return-value, typing

基本上我想要的是两个返回值略有不同的公共方法来调用相同的方法来完成所需的任何工作。它们都返回私有方法的返回值，但是私有方法将知道如何根据调用它的公共方法返回正确的值。

示例方法：

```
public Map<Type1, Type3> doSomething1();
public Map<Type2, Type3> doSomething2();

private Map<Type1/Type2, Type3> doSomething(); 
```

因此，在上面的示例中，doSomething() 返回 Type1 或 Type2 作为 Map 的键类型，具体取决于调用它的公共方法。它将能够执行简单的检查，并使用正确类型的对象填充地图。

也许这可以通过一些巧妙的 Java 反射来完成？我不知道。这一切看起来都很狡猾，所以如果有更好的方法来解决这个问题，我会全力以赴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T05:51:59.313

我强烈建议在这里避免使用反射魔力。一个函数必须正确地做一件事，并且不能依赖于谁调用它。

更好的方法是将 doSomething() 重构为更小的函数，创建两个名为 doSomethingFor1() 和 doSomethingFor2() 的新函数。这两个函数都可以重用旧 doSomething() 的重构部分。

现在调用 doSomething1() 并使用 doSomethingFor1()。

同样，doSomething2() 应该使用 doSomethingFor2()。

干杯，

jrh

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T06:15:53.097

**请注意：** *我误解了这个问题，所以这个答案与问题的要求相反。我将把它作为社区 wiki 留作参考，但这并不能回答最初的问题。*

`Type1`如果和`Type2`调用有一个共同的子类型`SuperType`，那么说第一个类型是`? extends SuperType`可行的。

这是一个使用`Integer`and`Double`作为两种类型的小例子，它们的共同祖先是`Number`：

```
private Map<Integer, String> doSomethingForInteger() {
  HashMap<Integer, String> map = new HashMap<Integer, String>();
  map.put(10, "Hello");
  return map;
}

private Map<Double, String> doSomethingForDouble() {
  HashMap<Double, String> map = new HashMap<Double, String>();
  map.put(3.14, "Apple");
  return map;
}

public Map<? extends Number, String> doSomething(boolean b) {
  if (b)
    return doSomethingForInteger();
  else
    return doSomethingForDouble();
} 
```

在这里，该方法将根据传入的 s`doSomething`返回两种类型的s。要么要么由方法返回。`HashMap``boolean``HashMap<Integer, String>``HashMap<Double, String>``doSomething`

实际上调用`doSomething`a`boolean`可以这样完成：

```
Map<? extends Number, String> map1 = doSomething(true);
Map<? extends Number, String> map2 = doSomething(false); 
```

`map1`会结束`Hashmap<Integer, String>`，而`map2`会得到`Hashmap<Double, String>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T05:49:20.097

如果一切都失败了，让私有方法返回 Object 并在公共方法中使用强制转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T05:53:50.450

第一个问题是为什么你需要这个精确的结构。

但安全的方法是让它返回

```
public Map<Object, Type3> doSomething(); 
```

如果 Type1 和 Type2 没有共同的超类型。如果你确实有一个通用的超类型，你可以使用它来代替对象。

最好重构不需要的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T06:13:20.713

我需要您的问题中缺少的一些信息，例如如何实例化 type1 和 type 2，因为您不能直接从任意类型参数进行实例化。现在，我们假设有一些公共数据用于实例化 type1 和 type2。否则，没有充分的理由对两种方法都使用一种方法。在后一种情况下，这意味着一个函数根据类型做两件不同的事情，这是不好的编程。如果您要拥有直接基于调用方法的逻辑，只需拥有两个私有方法并重构出常用的东西。

如果您仅根据某些数据进行不同的实例化，那么最简单的方法是声明一个私有内部接口：

```
private interface Instantiator<T> {

     T getNew(Data data);        

} 
```

现在，假设您可以实例化您的类型，您实际上可以使用它：

```
private <T> Map<T,Type3> doSomething(Instantiator<T> instantiator) {...} 
```

作为方法签名，并让公共方法使用适当的 Instantiator 实现调用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-28T05:52:40.823

您绝对可以通过使用反射分析堆栈来做到这一点。但我会尽量避免它，并且：

*   返回基本类型（或对象）并在调用者中正确转换，无论如何你都必须这样做
*   将参数传递给私有方法，以某种方式指示要做什么并返回

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T06:33:24.753

您可以模拟 Closure 的想法：

```
interface MappingClosure {
    public void map(Map, MapProvider);
} 
```

```
class Caller implements MappingClosure {
     public void map(final Map MAP, final MapProvider CALLEE) {
         this.MAP = specialise(MAP);
         // CALLEE USED AS KEY
     }
} 
```

```
class MapProvider {  
    public Map getMap(final MappingClosure CALLER) {
        return CALLER.map(mapInstance, this);
    }
} 
```

然后修改数据以适应对象的需要与使用需要它的对象的方法不同。

# windows - 使用 Windows 身份验证从 TeamCity 访问 SVN

> ID：919364
> 
> 赞同：0
> 
> 时间：2009-05-28T05:49:36.337
> 
> 标签：windows, svn, authentication, teamcity

我正在尝试在我的 Windows XP 机器上设置 TeamCity。由于身份验证错误，它无法从 subversion 获取代码。我已将我的 Windows 域\用户用户名和密码放入 TeamCity 配置中 - 但它看起来像是在尝试基本身份验证。我需要改变什么？

这是 TeamCity SVN 日志（实际的服务器/端口已替换为 server:port）：

[2009-05-28 17:37:43,375] 调试 - javasvn.output - 网络：已发送

选项 /svn/外部 HTTP/1.1

主机：远程服务器：端口

用户代理：SVN/1.5.5 SVNKit/1.2.2 ( [http://svnkit.com/](http://svnkit.com/) ) r5405

活着：

连接：TE，保活

TE：拖车

授权：基本 bWVybG90L21hcmt3OiVyZnZjZGUz

内容长度：0

接受编码：gzip

内容类型：文本/xml；字符集="utf-8"

DAV：[http ://subversion.tigris.org/xmlns/dav/svn/depth](http://subversion.tigris.org/xmlns/dav/svn/depth)

DAV：[http ://subversion.tigris.org/xmlns/dav/svn/log-revprops](http://subversion.tigris.org/xmlns/dav/svn/log-revprops)

DAV：[http ://subversion.tigris.org/xmlns/dav/svn/mergeinfo](http://subversion.tigris.org/xmlns/dav/svn/mergeinfo)

[2009-05-28 17:37:43,453] 调试 - javasvn.output - 网络：已读

需要 HTTP/1.1 401 授权

日期：格林威治标准时间 2009 年 5 月 28 日星期四 05:38:56

服务器：阿帕奇

WWW-Authenticate: Basic realm="Subversion Repositories"

内容长度：401

保活：超时=5，最大值=99

连接：保持活动

内容类型：文本/html；字符集=iso-8859-1

[2009-05-28 17:37:43,453] 调试 - javasvn.output - 网络：svn：“ [https://server:port](https://server:port) Subversion Repositories”需要身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T21:11:48.707

我下载了最新版本（4.5.1（build 8975）），它开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T13:43:27.537

你可以试试[这个](http://blog.alanta.nl/2008/09/teamcity-and-subversion-with-ntlm.html "具有 NTLM 身份验证的 TeamCity 和 Subversion")。

# python - 调整 ctypes 数组的大小

> ID：919369
> 
> 赞同：4
> 
> 时间：2009-05-28T05:51:38.190
> 
> 标签：python, ctypes

我想调整一个 ctypes 数组的大小。如您所见， ctypes.resize 无法正常工作。我可以编写一个函数来调整数组的大小，但我想知道一些其他的解决方案。也许我错过了一些 ctypes 技巧，或者我只是使用了错误的调整大小。名称 c_long_Array_0 似乎告诉我这可能不适用于调整大小。

```
>>> from ctypes import *
>>> c_int * 0
<class '__main__.c_long_Array_0'>
>>> intType = c_int * 0
>>> foo = intType()
>>> foo
<__main__.c_long_Array_0 object at 0xb7ed9e84>
>>> foo[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: invalid index
>>> resize(foo, sizeof(c_int * 1))
>>> foo[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: invalid index
>>> foo
<__main__.c_long_Array_0 object at 0xb7ed9e84>
>>> sizeof(c_int * 0)
0
>>> sizeof(c_int * 1)
4 
```

编辑：也许可以使用类似的东西：

```
>>> ctypes_resize = resize
>>> def resize(arr, type):
...     tmp = type()
...     for i in range(len(arr)):
...         tmp[i] = arr[i]
...     return tmp
...     
... 
>>> listType = c_int * 0
>>> list = listType()
>>> list = resize(list, c_int * 1)
>>> list[0]
0
>>> 
```

但这很难传递类型而不是大小。它为它的目的而工作，就是这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T06:47:36.127

```
from ctypes import *

list = (c_int*1)()

def customresize(array, new_size):
    resize(array, sizeof(array._type_)*new_size)
    return (array._type_*new_size).from_address(addressof(array))

list[0] = 123
list = customresize(list, 5)

>>> list[0]
123
>>> list[4]
0 
```

# ajax - 如何扩展 Ajax 控件工具包

> ID：919371
> 
> 赞同：0
> 
> 时间：2009-05-28T05:52:28.733
> 
> 标签：ajax, ajaxcontroltoolkit

我看到了一些提供新 ajax 动画的页面。我可以在 .NET 中使用它们吗？如果没有，您如何为 .net 创建新的 ajax 动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T06:52:49.270

我不知道如何做到这一点，但如果我需要做这样的事情，我可以为你指出我会采取的方向。

尝试在[ASP.NET 网站上观看一些](http://www.asp.net/)[AJAX 视频](http://www.asp.net/learn/ajax-videos/)

[特别是名为“从头开始创建 ASP.NET AJAX 扩展器](http://www.asp.net/learn/ajax-videos/video-184.aspx)”的视频 #64 ？ （15 分 11 秒）

这里有两本很好的读物来完成这个：

> [使用 ASP.NET AJAX 扩展 JavaScript](http://www.asp.net/AJAX/Documentation/Live/tutorials/EnhancingJavaScriptTutorial.aspx)

和

> [如何：创建 ASP.NET AJAX Toolkit Extender 控件以扩展 GridView](http://weblogs.asp.net/dwahlin/archive/2007/08/08/creating-an-asp-net-ajax-toolkit-extender-control.aspx)

它可能会帮助您了解如何扩展 asp.net ajax 框架

# apache - 在 apache htaccess 中搜索和替换 RewriteRule

> ID：919378
> 
> 赞同：7
> 
> 时间：2009-05-28T05:57:19.430
> 
> 标签：apache, mod-rewrite

我基本上想得到

`/path/file+name+with+plusses.mp3`

重写为

`/path/file name with plusses.mp3`

在我的情况下，wordpress 正在拦截请求并给出 404。但该文件确实存在。

鉴于 mod_rewrite 实现中正则表达式的约束，我还没有看到一种直接的方法来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T06:09:51.640

试试这个规则：

```
RewriteRule ^([^+]*)\+(.*) $1\ $2 [N] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-11T16:46:14.040

好吧，我确实有一个解决方案，但我不太喜欢它......这将用破折号替换所有下划线，并使用 301 状态代码进行重定向，即“永久移动”。（当然你也可以用它来替换任何其他字符）

此外，它应该是第一条规则（对于 .htaccess 文件中的 ex），因为第一行实际上是一个循环，它再次遍历所有规则（因为 N 标志）

> ```
> RewriteRule ^/redirect/from/([^_]*)\_(.*)$ /redirect/from/thisisthethingwedontneed$1-$2 [N,L] 
> ```
> 
> RewriteCond %{REQUEST_URI}（这是我们不需要的）+
> 
> RewriteRule (thisisthethingwedontneed)+(.*) /url/to/redirect/to/$2 [NC,QSA,R=301]

解释：

## 第一行：

'redirect/form' : 基本路径或您想要重定向的任何内容。它应该包含在第二部分中，以便能够在下一次循环运行时匹配它

第一部分：'替换（不是下划线）后跟下划线，然后是（任何东西）'捕获第一部分和最后一部分以供以后使用

第二部分：在捕获的第一部分之前插入一些可能在您的网址中找不到的文本，然后附加第一部分，然后是破折号，然后是第二部分

flags: N ：在此之后，再次继续，再次执行所有重写规则，但使用更改后的 url L ：如果有匹配项，请在此处停止（这两个标志实际上使您对第一个标志的期望。 )

## 第二行

下一条规则的条件：只有在请求uri中可以找到之前定义的字符串时才执行下一条规则，至少一次

## 第三行

第一部分：匹配并捕获任何出现的有趣字符串，并捕获它之后的所有内容

第二部分：将第二部分附加到我们想要重定向到的任何路径（忘记有趣的字符串）

标志：NC：不区分大小写 QSA：附加任何查询字符串 R=301：重定向并永久移动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T06:19:45.570

我不完全相信 mod_rewrite 会为您解决这个问题，因为它`+`是一个完全合法的查询字符串字符。如果您在网站的根目录中安装了 Wordpress，它可能会将 url (PathInfo) 的那部分视为查询字符串参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-07T12:31:33.367

我有一个更好的 - 使用 PHP：

.ht 访问：

```
 RewriteCond %{REQUEST_URI} ^/word/[^/]+$
  RewriteRule ^word/(.*)$  http://example.com/special_redirect.php?q=$1 [L,QSA,R=301] 
```

./special_redirect.php

```
<?php

$q = $_GET['q'];
$new = strtolower(convert_character($q));

//echo "$q | $new";
$location = "http://" . $new . ".example.com/";
//echo $location;

function convert_character($name) {
  $patterns_raw     = array('Ä',  'ä',  'Ö',  'ö',  'Ü',  'ü', 'ß');
  foreach ($patterns_raw as $pattern_raw) {
    $patterns[] = '/' . $pattern_raw . '/u';
  }

  $replacements = array('ae', 'ae', 'oe', 'oe', 'ue', 'ue', 'ss');
  $new_name = preg_replace($patterns, $replacements, $name);

  return $new_name;
}

Header( "HTTP/1.1 301 Moved Permanently" );
Header( "Location: $location" );

?> 
```

上面的内容适用于德语变音符号，但它适用于“_”到“-”等更简单的情况......

# c# - 如何在插入数据库之前读取自动增加文件

> ID：919384
> 
> 赞同：0
> 
> 时间：2009-05-28T05:59:44.980
> 
> 标签：c#, database

我已提交 [UnicLine int identity(1,1)] 以增加他的价值

在将新记录插入数据库之前如何读取它的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T06:02:52.650

您永远不需要这个，您可以输出新创建的 id，例如：

```
INSERT INTO [table]
SELECT field1, field2;
SELECT SCOPE_IDENTITY(); 
```

并在您的 ADO/ORM 中获取该 ID。

但是要回答您的问题，您可以这样做：

```
SELECT top 1 [UnicLine] + 1 as newIDValue FROM [table] ORDER BY [UnicLine] DESC; 
```

或简单

```
SELECT MAX([UnicLine]) + 1 as newIDValue FROM [table] 
```

* * *

不是问题的一部分，而是[阅读](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

```
SCOPE_IDENTITY() vs @@IDENTITY vs IDENT_CURRENT('tablename') 
```

了解差异并选择合适的使用_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T06:12:27.593

如果您只想查看当前表中的最大值，可以执行以下操作：

```
select max(UnicLine) from mytable 
```

但是，这不一定会告诉您身份字段中的下一个值是什么。如果有回滚的插入，则每个插入的标识都会增加，因此您的下一个插入可能会得到一个大于当前最大值 + 1 的值。我同意 balexandre，通常没有真正的理由你需要这个。

# java - 如何计算两个 ArrayList 之间的差异？

> ID：919387
> 
> 赞同：81
> 
> 时间：2009-05-28T06:01:41.450
> 
> 标签：java, arraylist

我有两个 ArrayList。

**ArrayList A 包含：**

```
['2009-05-18','2009-05-19','2009-05-21'] 
```

**ArrayList B 包含：**

```
['2009-05-18','2009-05-18','2009-05-19','2009-05-19','2009-05-20','2009-05-21','2009-05-21','2009-05-22'] 
```

我必须比较 ArrayList A 和 ArrayList B。结果 ArrayList 应该包含 ArrayList A 中不存在的 List。

**ArrayList 结果应该是：**

```
['2009-05-20','2009-05-22'] 
```

如何比较？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2009-05-28T06:14:36.373

在 Java 中，您可以使用[`Collection`](http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html)接口的[`removeAll`](http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeAll-java.util.Collection-)方法。

```
// Create a couple ArrayList objects and populate them
// with some delicious fruits.
Collection firstList = new ArrayList() {{
    add("apple");
    add("orange");
}};

Collection secondList = new ArrayList() {{
    add("apple");
    add("orange");
    add("banana");
    add("strawberry");
}};

// Show the "before" lists
System.out.println("First List: " + firstList);
System.out.println("Second List: " + secondList);

// Remove all elements in firstList from secondList
secondList.removeAll(firstList);

// Show the "after" list
System.out.println("Result: " + secondList); 
```

上面的代码将产生以下输出：

```
First List: [apple, orange]
Second List: [apple, orange, banana, strawberry]
Result: [banana, strawberry] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-28T07:24:32.247

你已经有了正确的答案。如果您想在列表（集合）之间进行更复杂和有趣的操作，请使用[apache commons 集合](http://commons.apache.org/collections/)（[CollectionUtils](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/CollectionUtils.html)）它允许您进行结合/析取，查找交集，检查一个集合是否是另一个集合的子集以及其他好东西。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-07T17:13:03.220

在带有流的 Java 8 中，它实际上非常简单。编辑：可以在没有流的情况下高效，见下文。

```
List<String> listA = Arrays.asList("2009-05-18","2009-05-19","2009-05-21");
List<String> listB = Arrays.asList("2009-05-18","2009-05-18","2009-05-19","2009-05-19",
                                   "2009-05-20","2009-05-21","2009-05-21","2009-05-22");

List<String> result = listB.stream()
                           .filter(not(new HashSet<>(listA)::contains))
                           .collect(Collectors.toList()); 
```

请注意，哈希集只创建一次：方法引用与其包含方法相关联。对 lambda 执行相同操作需要将集合放入变量中。制作变量并不是一个坏主意，尤其是当您发现它难看或难以理解时。

没有这种实用方法（或显式转换）之类的东西，你不能轻易地[否定谓词](https://stackoverflow.com/questions/21488056/how-to-negate-a-method-reference-predicate/30506585#30506585)，因为你不能直接调用否定方法引用（首先需要类型推断）。

```
private static <T> Predicate<T> not(Predicate<T> predicate) {
    return predicate.negate();
} 
```

如果流有`filterOut`方法或其他东西，它会看起来更好。

* * *

另外，@Holger 给了我一个想法。`ArrayList`它的`removeAll`方法针对多次删除进行了优化，它只重新排列其元素一次。但是，它使用给定集合提供的方法，所以如果不是很小`contains`的部分，我们需要优化该部分。`listA`

使用`listA`and`listB`之前声明过，此解决方案不需要 Java 8，而且非常高效。

```
List<String> result = new ArrayList(listB);
result.removeAll(new HashSet<>(listA)); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-28T06:08:48.443

编辑：原始问题未指定语言。我的答案是 C#。

为此，您应该改为使用 HashSet。如果必须使用 ArrayList，可以使用以下扩展方法：

```
var a = arrayListA.Cast<DateTime>();
var b = arrayListB.Cast<DateTime>();    
var c = b.Except(a);

var arrayListC = new ArrayList(c.ToArray()); 
```

使用哈希集...

```
var a = new HashSet<DateTime>(); // ...and fill it
var b = new HashSet<DateTime>(); // ...and fill it
b.ExceptWith(a); // removes from b items that are in a 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-09-02T04:55:26.913

我用过 Guava [Sets.difference](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Sets.html#difference(java.util.Set,%20java.util.Set))。

参数是集合而不是一般集合，但是从任何集合（具有唯一项）创建集合的便捷方法是 Guava [ImmutableSet.copyOf](https://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/ImmutableSet.html#copyOf(java.lang.Iterable)) (Iterable)。

（我首先[在一个相关/欺骗问题上](https://stackoverflow.com/q/25615974/1148030)发布了这个，但我也在这里复制它，因为我觉得这是一个很好的选择，但到目前为止还没有。）

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-10-11T12:15:05.180

尽管这是 Java 8 中的一个非常古老的问题，但您可以执行类似的操作

```
 List<String> a1 = Arrays.asList("2009-05-18", "2009-05-19", "2009-05-21");
 List<String> a2 = Arrays.asList("2009-05-18", "2009-05-18", "2009-05-19", "2009-05-19", "2009-05-20", "2009-05-21","2009-05-21", "2009-05-22");

 List<String> result = a2.stream().filter(elem -> !a1.contains(elem)).collect(Collectors.toList()); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-28T06:12:22.587

我猜你说的是C#。如果是这样，你可以试试这个

```
 ArrayList CompareArrayList(ArrayList a, ArrayList b)
    {
        ArrayList output = new ArrayList();
        for (int i = 0; i < a.Count; i++)
        {
            string str = (string)a[i];
            if (!b.Contains(str))
            {
                if(!output.Contains(str)) // check for dupes
                    output.Add(str);
            }
        }
        return output;
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-28T06:18:24.450

您只是在比较字符串。

将 ArrayList A 中的值作为 HashTable A 中的键。
将 ArrayList B 中的值作为 HashTable B 中的键。

然后，对于 HashTable A 中的每个键，如果存在，则将其从 HashTable B 中删除。

HashTable B 中剩下的字符串（键）不是 ArrayList A 中的值。

响应代码请求而添加的 C# (3.0) 示例：

```
List<string> listA = new List<string>{"2009-05-18","2009-05-19","2009-05-21'"};
List<string> listB = new List<string>{"2009-05-18","2009-05-18","2009-05-19","2009-05-19","2009-05-20","2009-05-21","2009-05-21","2009-05-22"};

HashSet<string> hashA = new HashSet<string>();
HashSet<string> hashB = new HashSet<string>();

foreach (string dateStrA in listA) hashA.Add(dateStrA);
foreach (string dateStrB in listB) hashB.Add(dateStrB);

foreach (string dateStrA in hashA)
{
    if (hashB.Contains(dateStrA)) hashB.Remove(dateStrA);
}

List<string> result = hashB.ToList<string>(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-03-07T12:32:18.640

嗨使用这个类，这将比较两个列表并准确显示两个列表的不匹配。

```
import java.util.ArrayList;
import java.util.List;

public class ListCompare {

    /**
     * @param args
     */
    public static void main(String[] args) {
        List<String> dbVinList;
        dbVinList = new ArrayList<String>();
        List<String> ediVinList;
        ediVinList = new ArrayList<String>();           

        dbVinList.add("A");
        dbVinList.add("B");
        dbVinList.add("C");
        dbVinList.add("D");

        ediVinList.add("A");
        ediVinList.add("C");
        ediVinList.add("E");
        ediVinList.add("F");
        /*ediVinList.add("G");
        ediVinList.add("H");
        ediVinList.add("I");
        ediVinList.add("J");*/  

        List<String> dbVinListClone = dbVinList;
        List<String> ediVinListClone = ediVinList;

        boolean flag;
        String mismatchVins = null;
        if(dbVinListClone.containsAll(ediVinListClone)){
            flag = dbVinListClone.removeAll(ediVinListClone);   
            if(flag){
                mismatchVins = getMismatchVins(dbVinListClone);
            }
        }else{
            flag = ediVinListClone.removeAll(dbVinListClone);
            if(flag){
                mismatchVins = getMismatchVins(ediVinListClone);
            }
        }
        if(mismatchVins != null){
            System.out.println("mismatch vins : "+mismatchVins);
        }       

    }

    private static String getMismatchVins(List<String> mismatchList){
        StringBuilder mismatchVins = new StringBuilder();
        int i = 0;
        for(String mismatch : mismatchList){
            i++;
            if(i < mismatchList.size() && i!=5){
                mismatchVins.append(mismatch).append(",");  
            }else{
                mismatchVins.append(mismatch);
            }
            if(i==5){               
                break;
            }
        }
        String mismatch1;
        if(mismatchVins.length() > 100){
            mismatch1 = mismatchVins.substring(0, 99);
        }else{
            mismatch1 = mismatchVins.toString();
        }       
        return mismatch1;
    }

} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-07T15:36:04.750

这也适用于 Arraylist

```
 // Create a couple ArrayList objects and populate them
    // with some delicious fruits.
    ArrayList<String> firstList = new ArrayList<String>() {/**
         * 
         */
        private static final long serialVersionUID = 1L;

    {
        add("apple");
        add("orange");
        add("pea");
    }};

    ArrayList<String> secondList = new ArrayList<String>() {

    /**
         * 
         */
        private static final long serialVersionUID = 1L;

    {
        add("apple");
        add("orange");
        add("banana");
        add("strawberry");
    }};

    // Show the "before" lists
    System.out.println("First List: " + firstList);
    System.out.println("Second List: " + secondList);

    // Remove all elements in firstList from secondList
    secondList.removeAll(firstList);

    // Show the "after" list
    System.out.println("Result: " + secondList); 
```

# iis-7 - IIS7上的Umbraco安装问题

> ID：919388
> 
> 赞同：0
> 
> 时间：2009-05-28T06:01:53.417
> 
> 标签：iis-7, windows-vista, umbraco

我正在尝试在 Vista (IIS7) 和 ASP.NET35 上本地安装 Umbraco - 我已使用 umbraco 论坛上显示的 IIS7 和 aspnet35 的 web.config，但仍然收到此 IIS 错误。

```
HTTP Error 500.19 - Internal Server Error 

The requested page cannot be accessed because the related configuration data for the page is invalid. Detailed Error Information 

Module IIS Web Core Notification BeginRequest Handler Not yet determined 

Error Code 0x80070021 Config Error This configuration section cannot be used at this path. This happens when the section is locked at a parent level. 

Locking is either by default (overrideModeDefault="Deny"), or set explicitly by a location tag with overrideMode="Deny" or the legacy allowOverride="false". 

Config File \\?\C:\inetpub\wwwroot\umbraco\web.config

Requested URL http://localhost:80/umbraco/install/ 

Physical Path C:\inetpub\wwwroot\umbraco\install\ Logon Method Not yet determined Logon User Not yet determined Config Source

185: </modules> 186: <handlers> 187: <!-- Asp.net 3.5 handlers--> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-05-27T14:24:14.177

这对我有用 - 只需继续查看导致错误的部分并更改配置文件部分以允许 - 必须运行这三遍解锁各个部分

[http://www.methodicmadness.com/2009/01/http-error-50019-this-configuration.html](http://www.methodicmadness.com/2009/01/http-error-50019-this-configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-30T02:56:04.910

I found that the config file section in error for me was the one which registered the adobe extension.

```
 <!-- Adobe AIR mime type     -->
    <staticContent>
      <mimeMap fileExtension=".air" mimeType="application/vnd.adobe.air-application-installer-package+zip" />
    </staticContent> 
```

Once I commented this out then the site came up perfectly.

I am using Windows Vista with IIS7 (v6 SP2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-05T15:40:33.653

有一些自定义配置部分用于配置 Examine 和 Umbraco 的各种其他元素，并且`<section>`需要设置 web.config 中的相关声明`requirePermission="false"`（它们不在默认的 .NET3.5 配置中）。检查`requirePermission="false"`是否存在于所有`<section>`元素上，然后重试。

高温下，

本杰明

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-07T03:22:04.090

你是怎么安装的？*强烈*建议您通过Microsoft Web 平台安装程序 (webpi) - [http://www.microsoft.com/web/gallery/default.aspx安装 Umbraco](http://www.microsoft.com/web/gallery/default.aspx)

但问题可能是因为您没有在经典应用程序池模式下运行该应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T09:57:38.350

我在我的 Vista Ultimate x64 盒子上成功使用了**Umbraco 4 。**以及我的 Windows 2008 x64 服务器。

确保您执行以下操作...

1.  确保网站应用程序池[在 IIS7 下以经典模式](http://www.newguid.net/blog/post/2008/12/03/Run-webapplication-on-IIS7-(Vista)-in-classic-mode.aspx)运行，有关它的[umbraco 论坛帖子](http://forum.umbraco.org/yaf_postst1245_A-version-compatible-with-Windows-Server-2008--ASPNET-35.aspx)。
2.  确保正确设置了[NTFS 文件权限](http://www.techduke.com/2007/07/06/protecting-your-stuff-ntfs-permissions/)，以便 IIS 可以访问正确的文件。
3.  确保您的 web.config 文件有效并且可以通过。[在线解析器（复制和粘贴）](http://www.w3schools.com/Dom/dom_validate.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-01-06T20:02:55.397

从错误中可以清楚地看出问题 - web.config 中设置的配置部分之一被锁定在父/服务器级别。检查您的 applicaitonHost.config 以查看在 Umbraco/web.config 中设置的哪些部分不能被覆盖（它具有 overrideModeDefault="Deny"），然后为网站解锁该部分（如果您有权限）或删除配置来自 web.config 的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-11-25T05:26:13.137

检查 IIS 应用程序池 .NET 框架版本 - 它应该使用最新的 .NET 框架。如果没有，请将其设置为 .NET 框架的最新版本。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-04T13:42:10.407

这帮助了我 c:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis.exe -i (关注 64Bit)

论坛 - [http://our.umbraco.org/forum/getting-started/installing-umbraco/12506-HTTP-error-50019-Internal-Server-Error](http://our.umbraco.org/forum/getting-started/installing-umbraco/12506-HTTP-error-50019-Internal-Server-Error)

# iphone - UITableView - 如何将触摸传递给父视图

> ID：919391
> 
> 赞同：0
> 
> 时间：2009-05-28T06:04:05.830
> 
> 标签：iphone, cocoa-touch, uitableview

我有这个设置：

```
UIView
  UITableView
  UIView 
```

嵌套视图最初是隐藏的，我希望它在用户触摸表格视图的任何地方、单元格、外部部分时显示出来——几乎是屏幕上状态/导航之外的任何地方。酒吧。我为主视图（我在其中显示嵌套视图）添加了 touchesBegan，当 TableView 被隐藏时，它可以根据需要工作。

当显示表格视图时，不调用 touchesBegan。因此，问题是 - 如何将主视图的触感冒泡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-30T19:41:38.663

似乎很难：）

我通过在 TableView 顶部添加一个大的透明视图并抓住它来解决这个问题。这适用于我的情况，因为我不需要处理 TableView 上的触摸。

# sql-server-2000 - 如何获取具有相似列值的行

> ID：919395
> 
> 赞同：0
> 
> 时间：2009-05-28T06:06:12.830
> 
> 标签：sql-server-2000

如何获取具有相似列值的行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T06:15:12.957

因此，您想在同一列中查找与同一表中的另一行具有相同值的行？

```
SELECT columName FROM tablename GROUP BY columnName HAVING COUNT(columnName) > 1 
```

编辑：

如果要获取列中具有非唯一值的所有行，可以在 IN 子句中使用上述查询：

```
SELECT * FROM tablename
WHERE columnName IN (
    SELECT columName FROM tablename 
    GROUP BY columnName 
    HAVING COUNT(columnName) > 1
) 
```

内部查询将查找所有重复的列值，外部查询将返回所有具有匹配列值的行。

# oop - 为每个类定义错误代码的优缺点是什么？

> ID：919401
> 
> 赞同：0
> 
> 时间：2009-05-28T06:09:45.273
> 
> 标签：oop

在创建模块的过程中，我面临着一个两难选择：每个类应该在内部定义自己的错误代码，还是应该定义模块范围的错误代码？

到目前为止，利弊齐头并进，但我倾向于定义每个类的错误：

1：

```
class MyClass
{
public:       
   typedef enum _TResult {
       EOk = 0,
       EErrNoMemory,
       EErrBadParam,
       <...>
   } TResult;

   TResult DoSomething();
}; 
```

与以下内容相反：

2-1：

```
#define OK              (0)
#define ERR_NO_MEMORY   (1)
#define ERR_BAD_PARAM   (2) 
```

或者：

2-2：

```
typedef enum _TResult
{
    EOk,
    EErrNoMemory,
    EErrBadParam,
    <...>
    EErrTimeOut,
    EErrFeedThePenguin
} TResult; 
```

根据您的经验，任何方法的陷阱是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:32:18.640

我要评论每个类错误代码的一件事是，由于相同的代码将意味着不同的事情，因此您无法编写单个错误记录器（或至少不容易编写）班上。

也就是说，您始终可以同时使用两者。有一个带有常见错误的全局枚举：

```
enum GlobalErrors {
   EOk = 0,
   EErrOutOfMemory,
   // etc.
   EFreeErrorCodeBase
}; 
```

然后在课堂上你可以拥有：

```
class Something {
    enum ClassErrors {
       EErrCantInitialize = EFreeErrorCodeBase,
       EErrCorruptedData,
       // etc.
    };
...
}; 
```

这为您提供了全局错误代码的位置，并确保您的类错误代码不会与全局代码重叠（这由编译器维护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T06:14:53.940

我认为这取决于您希望用户如何使用系统。如果您有对多个类有意义的错误代码，那么将它们放在“全局”级别以某种组织良好的格式（例如按概念分组的错误代码）是有意义的。如果您的类都返回自己的自定义错误代码，我会在类级别更多地定义它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T06:15:14.050

如果您需要来自其他类的相同错误代码，请分别定义它们。你需要提前做一些计划。您现在可能不需要它们，但您将来可能会创建一个需要类似或相同错误代码的类。

否则，最好让他们在同一个班级。这将有助于源代码和错误代码的维护。它也将使阅读和理解代码更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T07:00:17.570

我认为存在于类外部的有意义命名的状态代码枚举是一个不错的选择。通过这种方式，他们谈论的是他们的地位背景，而不是一个毫无疑问会改变或者其职责可能会跨越多个类的类的实现。

```
typedef enum _DatabaseErrorCodes {
   ConnectionFailure = 0,
   Timeout,
   InvalidParameters
} DatabaseErrorCodes;

typedef enum _CommonErrorCodes {
   NullArgument = 0,
   SystemOutOfMemory,
   FeedThePenguin
} CommonErrorCodes; 
```

课程流动性太大，容易改变。将错误代码绑定到特定类似乎是一种没有任何明显优势的耦合。我认为（理想情况下）状态代码应该能够独立存在并且有意义。

# php - 通过 API 发布时将应用程序名称添加到 Twitter 帖子

> ID：919405
> 
> 赞同：2
> 
> 时间：2009-05-28T06:10:49.780
> 
> 标签：php, curl, twitter

我正在使用 Twitter API 发帖。我想知道是否有任何方法可以更改帖子上的应用程序名称。例如，当我发布它显示：

> 大约 1 小时前来自网络

它应该转换为：

> 大约 1 小时前来自我的应用程序名称

请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T06:18:26.603

是的，你可以改变它。但是您必须向 Twitter 提交申请以进行批准，一旦获得批准，您必须将您的应用程序名称添加到“源”参数。检查[Twitter api wiki](http://apiwiki.twitter.com/FAQ#HowdoIget%E2%80%9CfromMyApp%E2%80%9DappendedtoupdatessentfrommyAPIapplication)链接以获取有关源参数的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-02T12:17:11.813

如果您使用[OAuth](http://apiwiki.twitter.com/OAuth-FAQ)而不是基本身份验证进行身份验证，它将在源参数中显示您的应用程序名称，而无需通过应用程序流程。既然 OAuth 已经到位，他们已经停止了这个过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T05:14:39.147

[http://apiwiki.twitter.com/FAQ#HowdoIget%E2%80%9CfromMyApp%E2%80%9DappendedtoupdatessentfrommyAPIapplication](http://apiwiki.twitter.com/FAQ#HowdoIget%E2%80%9CfromMyApp%E2%80%9DappendedtoupdatessentfrommyAPIapplication)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-20T05:43:32.820

[注册一个新的应用程序](http://twitter.com/apps/new)，然后您可以使用 OAuth 在您的站点/应用程序上使用，它应该被拉取。

# c++ - 使用迭代器和索引访问向量元素有什么区别？

> ID：919406
> 
> 赞同：14
> 
> 时间：2009-05-28T06:11:12.557
> 
> 标签：c++, vector, iterator

使用迭代器与索引访问向量元素有什么优势？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T06:50:00.663

为什么迭代器比索引好？

*   在索引不可用的情况下（例如 std::list）。
*   在调用接受迭代器的通用函数的情况下。
*   当编写一个应该与多个容器类型一起工作的函数模板时。
*   它们的存在是为了在所有容器之间创建*一致性*，并能够在所有标准算法中使用所有容器的迭代器以及常规指针。
*   迭代器可以指向除了作为概念之外不存在的序列。例如，您可以创建一个遍历素数的迭代器类，而无需实际构建素数容器。

但是，如果忽略不支持随机访问的容器类型（列表、集合等），迭代器仍然提供

*   类似语义的指针（想想 string::iterator 与 char *）。
*   通用概念可用于迭代容器内的元素。
*   在少数情况下，性能比容器成员函数更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T06:17:06.120

模块化就是答案。假设您将逻辑包装在函数调用中（一个很好的做法）。在这种情况下，使其接收迭代器将使其成为通用的，以便它可以对 C 样式数组（指针）、C++ stl 向量或任何真正表现得像迭代器容器的东西（例如链表）进行操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T06:56:25.143

我说它跨容器的可移植性。

如果您使用向量编写代码并使用索引进行迭代，则以后无法轻松将代码更改为其他容器。

```
typedef std::vector<int> myContainer; //only change here for std::list 

for ( myContainer::iterator iter = actualContainer.begin();
      iter != actualContainer.end(); 
      ++iter)
{} 
```

在上面的代码中，如果您想从向量更改为列表，这很容易实现。如果您使用了索引，那么它将是不可能的。

否则，由于向量使用随机访问迭代器，它应该是相同的。（索引或迭代器什么都可以）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T06:24:50.133

我最近问了这个关于性能的问题。你可能想看看我得到的答案。

检查以下链接：[迭代器与索引](https://stackoverflow.com/questions/776624/whats-faster-iterating-an-stl-vector-with-vectoriterator-or-with-at)

讨论主要是关于性能，结果是平台相关的，每个平台都有细微的变化。

# tomcat - 从 NetBeans 运行 Tomcat

> ID：919407
> 
> 赞同：1
> 
> 时间：2009-05-28T06:11:16.207
> 
> 标签：tomcat, netbeans, netbeans6.5

我已经安装了 Apache Tomcat，然后我安装了 NetBeans。然后我将 Tomcat 实例添加到 NetBeans 服务器。当我尝试从 NetBeans 运行服务器时，出现了问题。服务器启动并正在运行，但 NetBeans 不知道这一点并等待服务器永远启动（直到显示不成功的消息）。

我尝试了 NetBeans 6.5.1 和 7M1 以及 Tomcats 5.5 和 6，结果相同：/

我之前在 Tomcat 中使用 NetBeans 没有问题。所以我认为这不是一个错误，而只是一些错误的配置。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-02-10T15:34:21.477

我在使用 netbeans 6.9.1 时遇到了同样的问题。我下载了最新的夜间版本，它解决了这个问题，现在我可以使用未捆绑的 tomcat 版本。这里有一个包含更多信息的错误报告： [netbeans bugreport](http://netbeans.org/bugzilla/show_bug.cgi?id=160392)

# asp.net - 发布单个表单形成一组表单

> ID：919409
> 
> 赞同：0
> 
> 时间：2009-05-28T06:11:50.137
> 
> 标签：asp.net, vb.net

在我的 ASP.NET(2.0)，VB.NET 项目中，大约有 40 多个 Web 表单。网站发布到[http://xxx.sg1.ihub.com/](http://xxx.sg1.ihub.com/) 公司内部大约有 150 人在使用这个网站

从这 40 个表格中，我可以将**一个表格**(Visitor.aspx) 发布到另一个网站[http://yyyy.zzzz.com.sg](http://yyyy.zzzz.com.sg)以让公众（互联网用户）查看该表格吗？

由于安全问题，我不想将整个网站发布到[http://yyyy.zzzz.com.sg](http://yyyy.zzzz.com.sg)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T06:48:03.757

正如 JerSchneid 提到的，我不知道你的问题是什么......

原因：

1.  当您说表格时，您是在说文本框、下拉菜单还是实际`<form>`元素？
2.  在 ASP.NET 中，每个页面只能有 1 个`<form>`元素，以便将内部输入用作 Web 控件
3.  这是全部发布到[http://xxx.sg1.ihub.com/](http://xxx.sg1.ihub.com/)的 40 多页吗？那么您在表单元素中有一个指向该站点/页面的操作吗？

因为我不知道你在说什么，所以我可以给你一个答案，我认为这对我想象的你所拥有的环境是有效的......

您可以在获取所有表单的[http://xxx.sg1.ihub.com/](http://xxx.sg1.ihub.com/)页面中，创建一个 if 语句以将该调用转移到其他站点/页面

```
If Request.ServerVariables("HTTP_REFERER") = "http://http://xxx.sg1.ihub.com/formpage1.aspx" Then
   Server.Transfer("http://yyyy.zzzz.com.sg/mypublicpage.aspx")
End If 
```

并且您将在该传输的 url 中获取表单中发布的所有内容。

# .net - 捕捉用户控制事件

> ID：919418
> 
> 赞同：0
> 
> 时间：2009-05-28T06:14:09.150
> 
> 标签：.net, winforms, user-controls

我创建了一个用户控制键盘...当您单击键盘上的按钮时，将`button_click`引发事件，并且在单击按钮 C 时获取一个字符串示例

```
CButton_Click
{
txt="C";
} 
```

我需要在用户控件之外捕获该事件...以便在单击按钮时文本框充满字符串...给人的印象是当用户单击按钮时 texbox 正在填充...

这适用于触摸屏应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:20:32.870

您必须在 UserControl 中声明自己的事件并在必要时触发该事件。使用您的示例：

```
public event EventHandler ButtonClicked;

protected override OnButtonClicked(EventArgs e)
{
    var hand = ButtonClicked;
    if (hand != null)
        hand(this, e);
}

private void CButton_Click(Object sender, EventArgs e)
{
    txt = "C";
    OnButtonClicked(new EventArgs());
} 
```

然后您可以从其他代码订阅 UserControl 的`ButtonClicked`事件。

但是，更好的方法可能是创建自己的 EventArgs 并在事件本身中传递字符串，而不是仅将最后一次按键存储在字段中。类似于以下内容：

```
public KeyboardEventArgs : EventArgs
{
    public KeyboardEventArgs()
        :base()
    {
    }

    public KeyboardEventArgs(char Key)
        :this()
    {
        this.Key = Key;
    }

    char Key {get; set;}
}

public event EventHandler<KeyboardEventArgs> ButtonClicked;

protected override OnButtonClicked(KeyboardEventArgs e)
{
    var hand = ButtonClicked;
    if (hand != null)
        hand(this, e);
}

private void CButton_Click(Object sender, EventArgs e)
{
    OnButtonClicked(new KeyboardEventArgs("C"));
} 
```

# sharepoint - 以文档为中心的系统的基本原理是什么？

> ID：919419
> 
> 赞同：2
> 
> 时间：2009-05-28T06:14:13.833
> 
> 标签：sharepoint, document, couchdb, blogs, lotus-notes

我知道两个著名的以文档为中心的系统：Sharepoint 服务器和 Lotus Notes。一定还有其他人。例如，我听说过 CouchDB。主要的实现差异是什么，它们如何影响：

可用性

检索性能

搜索性能/质量

可扩展性/集成

如果您能详细说明为什么将这些文档存储在关系数据库中并在适当的模式中使用元数据存储来装饰它们，那么您将获得奖励。我很难相信这些系统与论坛和博客有很大不同，它们本身是基于关系数据库的，业务代码位于顶部。

额外奖励：Lotus Notes 为何很难找到相关文档？我会很感激一些指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T13:52:19.623

Lotus Notes 将所有数据存储在 NSF 文件中。NSF 文件是 Notes 文档的容器，它们是非结构化记录。每个 Document 中可以包含任意数量的 Item，类似于关系数据库的表和列。然而，与关系数据库不同的是，在数据模型级别对 Document 必须具有的 Items 没有限制，因此每个单独的 Document 内部可能包含截然不同的数据。

Notes Views 用于查看 Documents 内部的数据，通常过滤具有相似 Item 的 Documents。Notes 代理、页面和更多工具可用于轻松从 NSF 中获取数据。

Notes 的优势在于它易于通过表单捕获数据，并通过视图、XML、HTML、Java Servlet 等输出数据。它通过强大的复制系统轻松管理分布式数据。它还因其内置的安全性而受到高度吹捧。

CouchDB 由前 Iris/Lotus/IBM 员工 Damien Katz 创建，具有许多相同的优势，而没有 Lotus Notes 的开销和成本。

Word 文档可能会在 Lotus Notes 世界中引起混乱。PDF、Word 文档、Excel 文件等文件文档作为非结构化数据的一部分存储在 Lotus Notes Documents 中。

SharePoint 将数据存储在 SQL Server 中。它的数据非常基于列表，具有在服务器上存储文件文档并维护它们的元信息的额外能力。

SharePoint 列表很像一个平面表，但与 Lotus Notes 不同的是，该列表确实对其数据有限制。

SharePoint 数据主要通过其基于 Web 的界面收集和公开，但有多种方法可以访问数据，例如 SharePoint API、Web 服务、XML，甚至直接从 SQL 服务器（不推荐）。

可用性：对于最终用户来说，两者都在这里排名靠前。SharePoint 都是基于 Web 的，最终用户无需培训即可轻松地自行管理 SharePoint 网站。Lotus Notes 需要 Notes 客户端或需要构建 Domino 应用程序以通过 Web 公开。对于开发人员来说，Notes 更容易使用，但很古怪，并且使用专有语言——Notes 公式语言和 LotusScript。对于某些基本工作流和网站操作，SharePoint 根本不需要编码，但要获得严格的控制，您需要成为 .NET 开发人员，并且代码可能非常复杂。

检索性能：对于小型项目，Lotus Notes 做得很好。具有超过 10,000 个文档的超大型数据库往往会开始性能下降。SharePoint 使用 SQL Server，因此它可以轻松处理其数据存储中的大量列表或文件。

搜索性能/质量：两者都具有良好的搜索功能，但如果您尝试搜索大量文档，SharePoint 会胜出。

可扩展性/集成：SharePoint 更具可扩展性。然而，两者都可以很容易地与使用 XML 的其他系统集成。Notes 还可以使用 Java 代理/servlet 和 Web 服务进行集成。SharePoint 有它的 Web 服务 API 和第三方的集成插件。

奖励：Lotus Notes 目前还没有 SharePoint 流行。有一些文档的关键位置，例如 www.notes.net 和各种开发人员博客。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T06:34:54.250

Sharepoint 完全按照您所说的去做。它建立在关系数据库之上，并提供了一些看起来有点像带有 Web 界面的文件系统的东西。此文档存储主要用于与 Office 集成，并且只是 Sharepoint 的一小部分。

基于文档的数据库系统。像 CouchDB 或 Amazon S3 是不同的野兽。它们以比关系数据库更少结构化的方式存储数据。主要以密钥-文档对的形式。您可以通过键或查询来检索文档，但由于文档的结构不统一，例如关系数据库中表中的行，查询可能会更加困难。这些数据库并不是真的要像关系数据库那样使用，它们更适合大型 Web 后端等的可扩展性。

Lotus Notes 实际上结合了这两者。您可以将它用于文档管理（以及电子邮件等等），它建立在它自己的文档数据库之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T06:28:08.800

好吧，Sharepoint 将其数据/列表/文档/任何内容存储在关系数据库（SQL Server，不出所料......）中，以及元数据的“装饰”。根据谣言（我自己还没有研究过），数据模型非常复杂，您必须使用提供的 C# API 来处理数据（这可能是好事也可能是坏事，具体取决于您的偏好）和目标）。

# java - 用于拍卖网站的框架的性能比较

> ID：919421
> 
> 赞同：3
> 
> 时间：2009-05-28T06:14:53.330
> 
> 标签：java, asp.net, ruby, django, struts2

我是一个 Java 人，因此我更喜欢一个基于 Java 的拍卖网站框架，我计划从头开始开发。但是我所有的同事和朋友都向我指出，现在出现的更好的网站大多是使用 Ruby on Rails、Django 或 ASP.net MVC 框架编写的。

我想知道这里是否有人将一些基于 Java 的框架（如 Struts 2）与其他任何专注于有限资源和性能的框架进行了比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T13:20:26.833

有一些非常大的站点在基于 Java 的框架上运行。我知道英国的 Sky News 在 Grails 上运行，它在后台使用 Spring MVC。本身不是证据，而是表明这是可能的。如果您需要与 RoR 进行比较，那么 Grails 可能就是合适的选择。确保您考虑到 Java 应用程序服务器为您提供的扩展可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T06:22:15.893

我还没有看到任何*好的*性能比较。例如，很久以前 PetShop 对 Java 和 .NET 的比较被广泛认为存在严重缺陷。

但是，我希望一个*编写良好的*应用程序，通过适当的分析和负载测试，在任何这些平台上都可以。猜测性能瓶颈的编写不佳的应用程序将在任何这些平台上失败。

换句话说，更多的是你对平台所做的事情，而不是平台本身的选择。显然这不是*普遍*正确的，但对于你给出的选择，我相信你应该没问题。

现在，您更有可能在您熟悉的平台上做好工作（尽管它当然不会提供相同的学习机会）。那么你会成为唯一的开发者，还是会有一个团队？如果你要成为团队的一员，其他成员会怎么想？（不清楚你提到的朋友/同事是否在做这个项目。）你这样做是为了好玩，还是为了赚钱？（这很可能会改变你对学习和做你所知道的事情的重视。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T06:24:10.260

我认为最重要的性能比较是比较您为不同框架*编写的代码的性能。*我相信这会比框架本身更影响整体性能。如果您使用熟悉的环境，编写性能良好的解决方案的机会就会增加，即使所讨论的框架不是“最快”的框架。

# django - 添加大整数（11 个字符）时针对 django 中的列警告调整的超出范围值

> ID：919423
> 
> 赞同：3
> 
> 时间：2009-05-28T06:15:02.583
> 
> 标签：django

我得到一个“为列调整的超出范围值”

不确定在 django 中是否有解决此问题的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T07:41:15.833

您应该创建从 Field 或 IntegerField 继承的自定义字段

```
class BigintField(models.Field):
    def db_type(self):
        return 'BIGINT(20)'
... 
```

和

```
class MyModel(models.Model):
    bigid = BigintField() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T15:59:39.923

对于现代 Django 版本，使用`models.BigIntegerField`. 它支持更大的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T06:39:57.593

[Django ticket #399](http://code.djangoproject.com/ticket/399)处理这个问题。很久以前我也打开了一个[类似的问题。](https://stackoverflow.com/questions/283724/big-integer-field-in-django-models)

我过去使用的一种解决方法是`ALTER`直接将数据库表中的相关字段简单地添加到`BIGINT`（例如，对于 MySQL）。但是请注意，如果您重置存在具有特定字段的特定模型的应用程序，或者删除表并以任何方式重新创建它，您将不得不`ALTER`再次访问该字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-05T00:44:25.497

对于 South 用户，django 的内置 DecimalField 可能比上面自定义的 BigintField 方法更好。看起来需要一些额外的工作来教 South 自定义字段类型。

# watin - 从 WatiN 调用页面 Javascript 方法？

> ID：919424
> 
> 赞同：2
> 
> 时间：2009-05-28T06:15:07.637
> 
> 标签：watin

我只是在为 ASP.NET 应用程序试验 WatiN 单元测试工具。我的页面设计有大量复杂的自定义控件列表。我们很难识别这些控件中的元素（例如：选择基于某些业务规则的自定义网格中的行非常难）..

所以避免这种情况，我计划在单独的 JavaScript 库中编写我所有的测试存根.. 并从 WatiN 调用它们..（例如：在网格上完成一些业务验证并将选择特定行的方法，我需要从 WatIn 调用此方法）。我实际上已经实现了这种方法，但是在从 WatIn 中的 Eval 或 Runscript 方法调用 JavaScript 方法时遇到访问冲突错误。

不确定这在 WatIn 中是否可行..?? 有人可以澄清我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-09T03:48:14.590

您调用 DomContainer.Eval 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T12:54:34.330

WatiN 中的 RunScript 方法几乎没有回复空间。如果您要运行的脚本包含任何类型的错误，WatiN 将抛出 AV 异常（这绝对应该改进）。可以做你想做的事——我对 Infragistics 网格控件做了同样的事情。

抱歉，我无法提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-20T15:43:42.910

我在使用 WatiN 时遇到了类似的问题，并且不得不添加一些直接访问 IE 浏览器对象的额外方法来实现这一点。

有关更多详细信息，请参阅[O2 API/WatiN](http://www.o2platform.com/index.php/O2_API/WatiN)页面，特别是视频[http://www.youtube.com/watch?v=YsVX5-nGHWI](http://www.youtube.com/watch?v=YsVX5-nGHWI)，它显示了 HTML/JavaScript 注入的实际效果。

您可能还对我使用 [Jint API][3]添加到[O2 平台](http://o2platform.com)的 JavaScript 解析器集成感兴趣（有关示例，请参见[http://www.youtube.com/watch?v=_pqY_6-P-xU](http://www.youtube.com/watch?v=_pqY_6-P-xU)我用它做了什么）

[3]：[http](http://www.o2platform.com/index.php/O2) : //www.o2platform.com/index.php/O2 API/Jint

# javascript - Firefox中文本框的onpropertychange？

> ID：919428
> 
> 赞同：3
> 
> 时间：2009-05-28T06:15:25.077
> 
> 标签：javascript, events, firefox, dom, mutation-events

如何`onpropertychange`使用 JavaScript 处理 Firefox 中的文本框？

下面是一个例子：

```
var headerBGColorTextBox = document.getElementById('<%= tbHeaderBGColor.ClientID %>');

if (headerBGColorTextBox != null) {
  headerBGColorTextBox.pluggedElement = document.getElementById('<%= trHeaderBG.ClientID %>');
  headerBGColorTextBox.onpropertychange = function() {
    alert('function called');
    if (event.propertyName == 'style.backgroundColor' && event.srcElement.pluggedElement != null)
      alert(event.propertyName);
    event.srcElement.pluggedElement.style.backgroundColor = event.srcElement.style.backgroundColor;
  };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T06:36:23.170

有两种方法可以模拟 onpropertychange 事件，上面提到的 Mutation 事件应该在现代浏览器中同样有效，而“object.watch”非标准方法将为旧版本的 FF < 3 提供支持。

请参阅有关 MDC 的文档。

[对象观察](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/watch)

[突变事件](https://developer.mozilla.org/En/DOM_Events)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T06:30:04.337

似乎该`onpropertychange`事件是 IE 特定的：http: [//www.aptana.com/reference/html/api/HTML.event.onpropertychange.html](http://www.aptana.com/reference/html/api/HTML.event.onpropertychange.html)。

然而，话虽如此，Firefox，至少 3.0.10 确实支持名为“DOMAttrModified”的事件。以下是其工作原理的片段：

```
document.body.addEventListener("DOMAttrModified", function () { console.log ("Args: %o", arguments); }, false);
document.body.id = "Testing"; 
```

假设安装`console.log`了 Firefox 扩展[Firebug](http://getfirebug.com/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T06:20:55.490

`onpropertychange`是非标准的。请参阅[http://msdn.microsoft.com/en-us/library/ms536956](http://msdn.microsoft.com/en-us/library/ms536956)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-05T02:14:01.703

以下代码有效：

```
var foo = '<%= tbHeaderBGColor.ClientID %>';

function changetext() 
  {
  alert('function called');
  if (event.propertyName == 'style.backgroundColor' && event.srcElement.pluggedElement != null)
    alert(event.propertyName);

  event.srcElement.pluggedElement.style.backgroundColor = event.srcElement.style.backgroundColor;
  }

if (!!document.addEventListener)
  {
  document.getElementById(foo).addEventListener("DOMAttrModified", changetext, false);
  }
else
  {
  document.getElementById(foo).addBehavior("foo.htc");
  document.getElementById(foo).attachEvent("onpropertychange", changetext);
  } 
```

[DOM 突变事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent-attrChange)

# struts2 - 获取价值而不在struts2中创建对象

> ID：919436
> 
> 赞同：0
> 
> 时间：2009-05-28T06:18:28.893
> 
> 标签：struts2

我正在开发一个 struts2 应用程序。我的操作类中有一个自动生成的字段，我在字符串变量中获取它的值。现在，在这个动作类返回“SUCCESS”之后，struts.xml 被路由到打开一个jsp 页面（比如abc.jsp）。我想在我的 jsp 页面上获取该字符串变量（具有自动生成的字段值），**而不在我的 jsp 中创建操作类的对象**。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T06:22:37.423

动作类总是在 struts2 中创建。当 abc.jsp 呈现时，您仍将拥有相同的实例，因此您不必创建动作类的新实例。这是struts2 工作方式的核心。

因此，使用常规的 ognl，您可以在 jsp 执行时访问控制器中的所有 getter/setter（除非您使用了 ServletRedirectResult，这略有不同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T07:25:09.827

要添加到 krosenvold 的答案属性，您的操作类是使用 s:property 标记获取的，因此如果您有一个名为 getSpecialString 的 getter，您可以像这样获取它：

```
<s:property value="specialString" /> 
```

# web-applications - 如何知道访问者实际上正在查看网页以及查看了多长时间？

> ID：919450
> 
> 赞同：4
> 
> 时间：2009-05-28T06:22:14.020
> 
> 标签：web-applications, user-tracking

当访问者访问网页时，我们如何知道访问者实际上是在顶部显示页面（而不是已经转到另一个选项卡或应用程序）。

还有我们如何知道用户阅读了页面多长时间或页面保持打开多长时间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T06:26:50.987

[谷歌分析](http://www.google.com/analytics/)是最好的免费分析 AFAIK。它向您展示了您所需要的一切。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-28T07:15:27.460

安装摄像头并为视频计时。:)

`<rant>`坦率地说，你为什么需要知道？我需要多长时间才能理解您所写的内容？我去吃午饭多久了？对您的访客进行全面监控是件好事吗？

我已经给了你我的 IP 地址以及我确实访问过你的页面的事实。内衣的尺寸和颜色真的那么重要吗？

作为一名网络冲浪者，我讨厌网络漏洞、数据收集 JavaScript 和任何一般的监视。如果我不想给你一些东西，那就不要试图从我这里偷走它。

世界各地的人们开始明白他们的隐私是多么珍贵和危险。犯罪分子想出更狡猾、更狡猾的想法来滥用某人收集的数据。当我在没有 JavaScript 的情况下访问网站时，网站开始崩溃。NoScript 告诉我“jdhsdg.com”想在我的浏览器中运行一些东西。我该怎么办？允许？否定？善良的老实人怎么了？营销人员必须隐藏什么他们使用这样的名字？`</rant>`

[编辑]

如果您需要知道您的网站是否不好，请从街上召集人们并观看他们（因此“安装摄像头”）。这样，您可以**询问**他们的想法，而不是通过观察鼠标指针的动作来猜测。也许他们的宠物在玩它？

不要在野外对毫无戒心的受害者这样做。这只会让他们在互联网上发现你的声誉是唯一有价值的东西时发疯。

[EDIT2] 要改进网站，请使用可用性实验室。使用与您要测量的内容没有固定关系的二级人工数据进行猜测会欺骗您。你无法通过在月球上看夜晚的灯光来判断地球上的人在做什么。

至少不会，除非您提取大量数据。谷歌能够通过收集大量数据并搜索模式来判断人们对什么感兴趣。他们确实将令牌附加到浏览器以跟踪个人的行为，但为了进行分析，他们加入了数百万个人的模式。

还要永远记住，这些数据可能对犯罪分子很有价值。您的数据越有价值，他们就会投入越多的精力来寻找从中赚钱的方法。他们可以破解您著名的网站以传播病毒，他们可以破解您的服务器以加密您的数据并勒索您勒索赎金，他们可以复制数据并将其出售给竞争对手，或者他们可能将其用于他们自己的计划之一。

全球各种犯罪组织每年通过互联网相关犯罪赚取**数十亿美元。**

从我的观点来看，你真的应该问自己：这些数据值多少钱？它可以有多准确？它会告诉我多少以及收集的风险有多大？欺骗我的计划有多容易？例如，我可以创建一个脚本来锤击你的服务，告诉它我正在积极阅读你的一些页面几个小时。或者我可以为您的网站禁用 JavaScript，发现它不起作用，然后干脆走开，再也不会回来。

到目前为止，你只问你有*什么*。开始思考对您的客户有什么好处以及最坏的情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-28T06:44:30.020

除了[GA](http://www.google.com/analytics/)，如果您想要详细的分析来分析人们如何浏览您的页面、如何遍历菜单、用户倾向于关注的区域以及与[UED](http://en.wikipedia.org/wiki/User_experience)相关的所有内容，例如鼠标热图、时间花费等，[ClickTale](http://www.clicktale.com/features/overview)就是您的理想之选。

了解 Google Analytics 和 ClickTale 的用途截然不同。后者用于[前端工程师](http://nate.koechley.com/blog/2008/06/11/slides-professional-frontend-engineering/)，另一个用于 SEO 或产品经理

*从他们的博客预览：（*[来源：][[clicktale.com](http://blog.clicktale.com/wp-content/uploads/heatmap3.jpg)][）]
[![替代文字](https://i.stack.imgur.com/S8ApW.jpg)](https://i.stack.imgur.com/S8ApW.jpg)

虽然是有代价的...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T08:52:06.923

我现在使用 woopra 有一段时间了，它很棒！仍然是测试版，仍然是免费的，但工作就像一个梦想。很棒的管理工具！

[http://www.woopra.com/](http://www.woopra.com/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-28T09:01:50.537

开源谷歌分析替代品：[Piwik](http://piwik.org/)。用PHP、JS编写；在 MySQL 上运行。

从他们的网站：

```
Piwik is a downloadable, open source (GPL licensed) 
web analytics software program. 
It provides you with detailed reports on your website visitors: 
the search engines and keywords they used, 
the language they speak, your popular pages ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T06:25:57.243

在页面加载时，将当前时间保存在 JavaScript 中，并在页面卸载时（当用户关闭他/她的窗口时）向您的服务器发送一个 Ajax 请求，其中时间减去您记录的时间以获得持续时间。那可能是你最好的选择。至于找出窗口是否在顶部，我认为没有任何可靠的方法可以做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T07:18:55.330

我在想一些网站是否使用 onmousemove 或 onscroll 来调用一个函数，然后每 1 分钟使用 AJAX 将用户活动报告回服务器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-28T07:28:23.627

这是一个很好的观点亚伦。你无法避免网络变得像现实世界......侵入性（商业电话和其他统计数据）

简，您可以通过每 4 或 5 秒调用一次计时器来知道这样的事情，该计时器调用一个动态页面，其中包含包含访客 IP、页面名称和页面 onload 事件时间戳的 post 或 get 字段，以及和现在比较。

您还应该查看诸如**comet**
ajaxian.com/wp-content/images/comet.png 之类的推送方法

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-01T13:30:43.910

这是一个 JavaScript 库，用于计算用户在网页上停留的时间。它还有一个额外的好处，那就是更准确（虽然不是很完美）跟踪用户实际与页面交互的时间。它忽略了用户切换到不同选项卡、闲置、最小化浏览器等的时间。建议的谷歌分析方法有一个缺点（据我了解），它仅在您的域处理新请求时检查。它将先前的请求时间与新的请求时间进行比较，并将其称为“在您的网页上花费的时间”。它实际上并不知道是否有人正在查看您的页面，是否已最小化浏览器，自上次加载您的页面后是否已将选项卡切换到 3 个不同的网页等。

没有完美的解决方案。但希望这个也能提供价值。

[https://github.com/jasonzissman/TimeMe.js](https://github.com/jasonzissman/TimeMe.js)

其用法示例：

**在加载您的页面时：**

```
document.onload = function() {
  TimeMe.setIdleDurationInSeconds(30);
  TimeMe.setCurrentPageName("my-home-page");
  TimeMe.initialize();  
} 
```

**检索在页面上花费的时间，并在用户离开您的页面时将其发送到您的服务器：**

```
window.onbeforeunload = function (event) {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("POST","ENTER_URL_HERE",false);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    var timeSpentOnPage = TimeMe.getTimeOnCurrentPageInSeconds();
    xmlhttp.send(timeSpentOnPage);
}; 
```

# apache-flex - 如何在 Flex 调试器中检查单例？

> ID：919456
> 
> 赞同：1
> 
> 时间：2009-05-28T06:24:40.833
> 
> 标签：apache-flex, singleton, debugging

我将模型数据存储在一个名为 ModelLocator 的 Singleton 中。这很常见...

我可以在调试器中查看这些数据吗？

[已编辑 - 标题已更改]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T07:56:14.710

是的。你会做如下的事情。

```
var model : MySingleton = MySingleton.getInstance(); 
```

然后在上面设置一个断点，您将能够看到模型中的所有内容。

# c++ - C ++删除队列中的节点

> ID：919458
> 
> 赞同：1
> 
> 时间：2009-05-28T06:24:57.450
> 
> 标签：c++, linked-list

问题1：删除列表中的节点> 3

描述：

删除 7 个列表中的第 6 个节点会导致仅打印第一个和最后一个节点。

可用节点指针：*next_、*prev_、*data_

删除指定节点的函数在LinkedList.cpp 名称：DeleteNode。

遍历列表打印节点的函数在 main.cpp 名称：PrintAllNodes

可能的解决方案：

遍历打印节点时能够在 main 中访问 Current->prev_。

代码：

```
void LinkedList::DeleteNode( Node* node )
{
    Node *Current = first_; // I want this to be my only Node Ptr Varaible Declaration.
    if ( NULL == first_ )
        std::cout << "Cannot delete from an empty list: \n";
//TRAVERSING WAS/IS A BAD IDEA.............................
    while ( Current != NULL )
    {
        if ( Current->data_ == node->data_ )
        {
            //If Current isn't the head of the list, set prev to next
            if ( Current != first_ )
            {
                Current->prev_        = first_; //statement that follows crashes if this is not assigned.
                Current->prev_->next_ = Current->next_;
            }
            else
            {
                first_ = Current->next_;
                if ( first_ != NULL )
                first_->prev_ = NULL;
            }

            //If Current isn't the tail of the list, set next to prev
            if ( Current->next_ != NULL )
                Current->next_ = Current->prev_;

            else if ( Current->prev_ != NULL )
            Current->prev_->next_ = NULL;

          listLen_--;
          delete Current;
          Current = NULL;
        }
        else
        {
            Current->prev_ = Current;
            Current = Current->next_;
        }
    }
    return;
} 
```

main.cpp 中 PrintAllNodes 的代码：

```
void PrintAllNodes( LinkedList *LinkedObject, long length = 0 )
{
    const char *Names = NULL; 
    length = LinkedObject->GetListLength();
    Node *GetNode = LinkedObject->GetFirstNode();

    for ( signed short x = 0; x < length; x++ )
    {
        Names = static_cast< NameObject* >( GetNode->data_ )->GetName();
        cout << Names << endl;
        GetNode = GetNode->next_; // traversing
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T06:49:13.097

这是你的问题：

```
Current->prev_  = first_; 
```

您正在做的是在当前节点之前断开所有节点并将第一个节点连接到最后一个节点！（你的情况是第七个）

你应该做的只有：

```
Current->prev_->next_ = Current->next_;
Current->next_->prev_ = Current->prev_; //I think you forgot this
delete Current;
Current = NULL; 
```

如果没有

```
Current->prev_  = first_; 
```

你会崩溃，那是因为你的 Current->prev_ 没有分配好。但是将其分配给 first_ 不是解决方案。你应该检查你的其他方法（可能是 AddNode），看看为什么你的 Current->prev_ 不好。

# linux - Linux 系统上的内存使用情况

> ID：919463
> 
> 赞同：1
> 
> 时间：2009-05-28T06:25:59.537
> 
> 标签：linux, memory, memcached

如果我跑

```
top 
```

在 Linux 系统上，我可以看到很多关于内存使用情况的信息。

```
Mem:  15736360k total,  8415332k used,  7321028k free,   174876k buffers
Swap:        0k total,        0k used,        0k free,  2630508k cached 
```

我想知道：“缓存”属性告诉我什么？似乎这根本没有被释放 - 这是正常行为吗？

我们正在为我们的 Web 应用程序运行 memcached。这有什么关系吗？

马特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T06:38:06.880

您可以（也许应该）也使用该`free`命令来打印内存状态：

```
 total       used       free     shared    buffers     cached
Mem:        515568     504740      10828          0      44248     427800
-/+ buffers/cache:      32692     482876
Swap:       915664      64820     850844 
```

“buffers/cache”行告诉你内核当前为各种缓冲区和缓存使用了多少 RAM，主要用于磁盘 I/OI 认为。如果程序需要，此内存可供程序使用，但在需要之前，如果内核使用它来缓冲 I/O，则比让其闲置时更好地利用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T06:36:57.443

我相信“缓存”是用于块设备（即磁盘）缓存的内存 - 如果需要，可以立即将此内存转换为空闲内存，以便应用程序可以使用它。总而言之，将其视为“免费” :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T06:40:36.673

[你的问题在这里](http://www.linux-tutorial.info/modules.php?name=MContent&pageid=314)有一个很好的答案。简而言之，Linux 交换系统可以在内存和磁盘上拥有相同的页面。当一个页面从交换中引入并且没有更改时，可能会发生这种情况 - 当这种情况发生时，系统不希望从磁盘中擦除该页面，因为它可能需要不必要地重写它。需要一个数据结构来跟踪交换的状态，以及缓存以及哪些页面被换出，哪些不是等。详细信息在链接中，但交换缓存是处理此簿记的数据结构，它是大小取决于您的页表有多大。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T06:54:51.340

只是让你知道好东西：

[ServerFault](https://serverfault.com/)启动 - 它是系统管理员的 StackOverflow

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T06:39:17.033

如果我的记忆正确地为我服务，Linux 内核将保留此内存用于其他目的，直到应用程序需要它。这是完全正常的。以下为简要说明：[http ://www.novell.com/coolsolutions/feature/18990.html](http://www.novell.com/coolsolutions/feature/18990.html)

# entity - 实体更新策略

> ID：919467
> 
> 赞同：0
> 
> 时间：2009-05-28T06:27:51.767
> 
> 标签：entity, poco, dto, updates

我的团队有一些关于更新实体数据以及如何最好地处理它的讨论。这是一个安全框架，所以这里有一些限制和想法。

1.  DB 中的每个表都有一个作为 guid 的 PK，这是我们的多节点集群解决方案所必需的。我们的想法是我们不想通过 API 将实体上的这个暴露给客户，因为它可以做两件事，
    1.  为他们提供工作所需的更多信息，并为黑客提供有关系统的更多信息。
    2.  支持噩梦是客户端以某种方式硬编码到此 ID，如果我们需要更改 PK 的客户端会受到影响。

解决方案是公开项目的自然键，例如具有唯一名称的角色对象和领域，一起保证唯一性但是更新这些值中的任何一个都是挑战，因为您需要指定要更新的旧值和新值，或者传递两个原始对象和新对象中的对象，因此我们可以找到要更新的对象。有点乱，

另一种方法是制作一个备用密钥并将其公开给客户，他们可以随心所欲地使用它，我们不在乎，因为它与我们的 PK 无关。

现在似乎每个人都只是使用 PK 作为实体的 ID，没有任何问题，不知道如何说服我们的老兵团队从过去的编程时代开始。

另一个问题是如何支持部分更新，问题是您拥有具有 10 个属性、4 个集合等的实体......具有名称+领域组合并指定要更新的属性而不是下拉整个对象更改 1 字段，发回更新。我说延迟加载集合，但不确定部分更新是否有意义。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T07:24:21.950

我的安全框架方法是这样的：

*   为数据库中的任何内容提供一个内部 ID（身份列、序列，无论您的数据库支持什么。Hibernate 中的“本机生成的 id 列”）。最终，您将需要它，并且进行改造需要做很多工作。

*   如果您需要将 ID 交给用户，生成一个随机数，检查它是否尚未使用，将其连接到内部 ID，然后将其交给用户。**永远不要**分发内部 ID，**也不要**使用破解者可以猜到的 ID。

至于部分更新，只有当你有很多具有很多属性的对象时它们才开始有意义。对于 10 个属性，我会说“[过早优化](http://en.wikipedia.org/wiki/Optimization_(computer_science)#When_to_optimize)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T06:59:22.923

如果您需要向客户端公开 id，请使用自然键。实现起来并不容易，但这是正确的方法。

您能否提供有关这些部分更新的更多详细信息？我没明白。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:52:34.360

在每个表上使用 GUID 作为主键听起来像是自找麻烦。除非我真的误解了你，否则我没有在任何地方看到这种方法。为什么不向每个用户颁发一个 UID 并使用该 UID？

This approach is most common across all companies. The UID is not [PII](http://en.wikipedia.org/wiki/Personally_identifiable_information) so you are okay legally as was as from a security point of view.

# outlook - Application.ActiveInspector() 在 Outlook 功能区加载时为 Null

> ID：919477
> 
> 赞同：2
> 
> 时间：2009-05-28T06:35:49.897
> 
> 标签：outlook, ms-office, outlook-2007, outlook-addin, outlook-object-model

是否可以在加载色带时访问 ActiveInspector。Application.ActiveInspector() 在我使用自定义表单时返回正确的值，但对于默认联系表单不返回。

我需要 ActiveInspector 来根据 ActiveInspector().CurrentItem 中的属性值自定义功能区按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T09:41:38.647

我对上述内容做了一些细微的改动，因为我维护了开放检查员的列表（我将检查员包装起来并将其保留在列表中）。在新的检查器事件中添加它们并在连接关闭事件关闭时删除它们。

在我的功能区代码中，我有一个静态方法 FindOutlookInspector，它使用功能区的 control.context 查找检查器。

沿着这些路线的东西..

OutlookInspector 是我的包装检查器类，但您可能不需要它等。另外我只关心邮件项目

```
void _inspectors_NewInspector(Microsoft.Office.Interop.Outlook.Inspector Inspector) {
    OutlookItem olItem = null;
    try {
        object newitem = Inspector.CurrentItem;
        olItem = new OutlookItem(newitem);
        if (olItem.Class == Outlook.OlObjectClass.olMail && olItem.MessageClass == "IPM.Note") {

            OutlookInspector existingWindow = FindOutlookInspector(Inspector);

            if (existingWindow == null) {
                OutlookInspector window = new OutlookInspector(Inspector);

                window.Close += new EventHandler(WrappedWindow_Close);
                _windows.Add(window);
            }

        } catch (Exception ex) {
            throw ex;
        }
    }

    void WrappedWindow_Close(object sender, EventArgs e) {
        OutlookInspector window = (OutlookInspector) sender;
        window.Close -= WrappedWindow_Close;
        _windows.Remove(window);
    }

    internal static OutlookInspector FindOutlookInspector(object window) {
        foreach(OutlookInspector inspector in _windows) {
            if (inspector.Window == window) {
                return inspector;
            }
        }
        return null;
    } 
```

然后在功能区代码中，我可以调用`FindOutlookInspector`以获取包装的检查器

```
 OutlookInspector window = ThisAddIn.FindOutlookInspector(control.Context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T06:40:37.577

您能否处理 Inspectors 集合的 NewInspector 事件，然后在您可以从功能区加载事件访问的静态字段（可能应该使用 Wea​​kReference）中保留该事件？

我没有使用 Outlook 进行任何功能区自定义，但我已经在我的旧 Tablet PC 产品 TEO 中与检查员进行了大量工作。使用它们很麻烦，但您不想做的主要事情是长时间挂在 Inspector 参考上，因为关闭 Outlook 或取消挂起的编辑会遇到各种奇怪的问题。

# iphone - 将 iPhone 应用程序文件大小保持在 10.0MB 以下有哪些好的指导方针？

> ID：919481
> 
> 赞同：5
> 
> 时间：2009-05-28T06:37:04.137
> 
> 标签：iphone, app-store, filesize

我想将我的应用程序保持在 10.0MB 以下，以便在蜂窝和 Wifi 网络环境中轻松下载。根据您的经验，您是否遇到过任何让您的应用程序保持苗条的好方法？如果是，请分享。将 iPhone 应用程序文件大小保持在 10.0MB 以下有哪些好的指导方针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T13:51:34.930

我处理过的大多数超过 1000 万的应用程序都是由于资源，通常是图像和音频。正确调整它们的大小至关重要。请注意，iPhone 在捆绑设备时会自动为您进行一些压缩，因此模拟器中的大小可能与设备上的完全不同。

像所有优化练习一样，您希望首先构建一个可靠、健全的系统，然后将优化工作集中在导致最大问题的部分上。我用`du`这个：

*   为 Release 中的设备构建
*   转到构建/发布-iphoneos/.app
*   `du -ak | sort -rn | head`

这将为您提供最重要的事情的列表。此信息以 kB 为单位，但会向上舍入到下一个块（Mac 上为 4k）。但是你只是在寻找什么是大的，而不是计算出所有东西的确切大小。

特别注意那些不应该被复制到资源中的东西。有时会出现有趣的事情，尤其是您添加到项目中的文档。对此进行测试，我注意到我自己的项目模板一直在将 xcconfig 文件复制到包中（必须解决这个问题......）

如果您有很多本地化的 NIB，那么您可能需要考虑不本地化 NIB，而是使用 IBOutlet UILabel。如果没有实际的本地化文本，请勿本地化 NIB。仅仅因为您本地化一个NIB 并不意味着您必须本地化所有NIB。

一般来说，iPhone 的构建设置在缩小尺寸方面已经很积极了，所以如果不研究你正在改变的内容，我不会搞砸很多。

请注意具有许多您从未调用过的方法的 Objective-C 类。Objective-C 是动态的，因此您不能像在 C 中那样对其进行死代码剥离。在编译时无法知道是否可以在运行时使用选择器。因此，如果您的物品中装有厨房水槽，“以防万一”，您可能希望将其剥离。但一般来说，与单个音频文件相比，我们在这里谈论的不是很多空间。我只在极少数情况下提到它，即你有一个非常大的对象，你只为某些类方法或常量等链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T14:09:15.003

另一个提示：[**小心你的 9.9MB 应用程序**](http://discussions.apple.com/thread.jspa?threadID=1862941&tstart=120)！

您不想在经过大量优化后发现您的应用看起来只有 10.1MB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T11:42:26.547

一个技巧是使用压缩媒体格式。例如，如果您正在使用音频文件，您可以考虑使用 mp3 而不是 AIFF 或 WAV，但代价可能是处理开销稍高。一个 10mb 的可执行文件听起来异常高，所以一个大的应用程序可能会包含很多媒体内容（图像、音频）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-24T20:14:49.347

如果它适合您的应用程序的外观，则将一些较大的图像转换为灰度。如果你可以制作一些纯灰度，那么节省的费用是相当可观的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T15:06:03.907

构建过程会自动为您压缩 PNG 文件（使用 pngcrush，不要自己这样做），因此实际上您必须拥有相当多的资产才能获得超过 10MB 的大小。我认为担心这是一个过早的优化，你可能不需要担心，直到你发现自己稍后接近。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-24T21:07:17.870

此提示将主要适用于 iPhone 游戏：

*   对于没有透明度的图像，请使用 JPG 而不是 PNG。
*   将您的声音保存在 mp3 中，在第一次加载应用程序时将它们[渲染](http://developer.apple.com/iphone/library/samplecode/AQOfflineRenderTest/index.html)为 WAV，并将它们保存到应用程序 Documents 目录。

# .net - LINQ 查询中字符串的时间跨度问题

> ID：919483
> 
> 赞同：2
> 
> 时间：2009-05-28T06:38:11.933
> 
> 标签：.net, linq

嗨，我注意到如果我使用 TimespanObj.ToString()，它会给我完美的输出，比如 12:33:00。

但我使用以下 linq 查询。

```
var time = SomeSimpleQuery.Select(t => new { time = t.FromTime.ToString() }); 
```

其中 FromTime 是 SQL 数据库中的 time(7) 和 LINQ-TO-SQL 类中的时间跨度（默认情况下）。

然后我得到格式为“jan 1 1900 12:00PM”的输出。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T06:49:37.513

我怀疑这是因为查询的“ToString”部分是在 SQL 中而不是在 .NET 中执行的。您应该能够通过检查正在执行的 SQL 来确认这一点。

尝试`FromTime`直接获取属性，然后调用`ToString()`结果。`AsEnumerable`如果要将其全部保留在 LINQ 查询中，则可以强制在 .NET 端执行处理：

```
var time = SomeSimpleQuery.Select(t => t.FromTime)
                          .AsEnumerable()
                          .Select(t => new { time = t.ToString() }); 
```

如果你想获取其他东西，只需通过它们：

```
var query = SomeSimpleQuery.Select(row => new { UserId=row.UserId,
                                                Query=row.Query,
                                                Time=t.FromTime })
                           .AsEnumerable()
                           .Select(t => new { t.UserId, t.Query,
                                              Time=t.FromTime.ToString() }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T06:41:04.067

我不记得 SQL 有时间跨度类型。时间只是一天中的小时部分。

来自 MSDN（对于时间数据类型）：

> 定义一天中的某个时间。时间没有时区感知，基于 24 小时制。

# c - libc中的字符编码？

> ID：919494
> 
> 赞同：4
> 
> 时间：2009-05-28T06:43:43.937
> 
> 标签：c, encoding

libc 中预期的字符编码是什么？例如 gethostname(char *name, size_t namelen); 以 char*作为参数。是否期望 name 参数以 utf8（保持 ascii 完整）或纯 ascii 或其他格式编码？

C是否还要求任何字符编码方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:47:48.453

所有字符串函数（除了widechar 函数）仅支持本机字符集，例如Unix/Linux/Windows 上的ASCII 或IBM 大型机/中型计算机上的EBCDIC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T06:49:37.730

*   char 使用 ASCII
*   wchar_t 是 unicode 的标准 C 数据类型

使用 and 来处理宽字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:15:09.287

`char`应该是 7 位兼容的 ASCII 编码（虽然我找不到任何明确的参考）。的[定义`wchar_t`留给实现](http://en.wikipedia.org/wiki/Wide_character)，但 C 标准要求[C 可移植字符](http://en.wikipedia.org/wiki/Portable_character_set)集中的字符相同。如果我理解正确，那么

```
char a = 'a';
wchar_t aw = L'a';
if (a == (char)aw) {
    // should be true
} 
```

该标准没有说明 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T07:21:03.377

您可能必须使用第三方库，例如[GLib](http://library.gnome.org/devel/glib/2.20/glib-Character-Set-Conversion.html)。这个库是可移植的并且非常有用，它还提供了正则表达式、数据结构等等。

# linq - LINQ:: 获取用户时出错

> ID：919498
> 
> 赞同：0
> 
> 时间：2009-05-28T06:46:29.280
> 
> 标签：linq

我在数据库中有一个“用户”表。它有三列

Id (bigint) PK 用户名 (varchar) 密码 (varchar)

我想根据 id 获取用户

我正在使用此代码 bt 它给了我错误

```
 using (var db = new UsersDataContext())
                {

// ERROR :: Cannot implicitly convert type 'long' to 'bool'
                    MUser user = from u in db.MUsers
                                 where u.Id= 1 
                                 select u;            

                } 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T06:49:12.553

```
from u in db.MUsers
where u.Id == 1   // notice ==
select u 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T06:49:40.693

你需要使用

```
where u.Id == 1 
```

# network-programming - BitTorrent 是否支持部分传输？

> ID：919512
> 
> 赞同：1
> 
> 时间：2009-05-28T06:50:37.010
> 
> 标签：network-programming, protocols, bittorrent

BitTorrent 协议是否可以指定首先需要文件的前 3% 或前 5%？如果没有，添加这样的支持会是对协议的改进吗？

**更新：**所以我想，如果它是协议的一部分，为什么那里的许多客户不使用它？10分钟后，10%的文件就完成了，但通常你连1%的内容都不能预览……（靠运气）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:52:06.167

Azureus 可以选择首先获取文件的第一个和最后一个块。但这不是 100% 可靠的，因为您无法控制哪个对等方将开始发送数据，首先。

[有关协议规范](http://wiki.theory.org/BitTorrentSpecification)，请参见此处，特别是：

> 要求：
> 
> 请求消息是固定长度的，用于**请求一个块**。有效载荷包含以下信息：

所以是的，你可以要求一个特定的块（甚至是它的一部分）。这应该可以准确地请求文件的前 3% 或 5%，而与块大小无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T20:02:28.707

Bittorrent 协议是围绕稀缺性设计的：首先分配最稀有的块，以降低不再拥有所有块的可能性。因为那将无法获取整个文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T20:22:39.837

BitTorrent 作为协议的目的不是针对流媒体，其目的是尽最大努力使所有感兴趣的数据始终可靠地可用。将其用于流媒体目的实际上对 BitTorrent 的目标适得其反。

如果您不明白为什么会出现这种情况，我建议您在继续之前先[阅读 Tanenbaum 的 Computer Networks 。](https://rads.stackoverflow.com/amzn/click/com/0130661023)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T17:10:05.170

是的，这由 torrent 协议支持，例如 ktorrent 使用它为不同的文件类型（例如 mp3、avi 甚至 pdf）提供预览块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T20:04:09.267

> 10分钟后，10%的文件就完成了，但通常你连1%的内容都不能预览……（靠运气）

这是因为客户端没有按顺序下载文件（所以当你有很多对等点时传输效率更高，每个点都有文件的不同部分）

# sharepoint - 单击时将复选框值保存到数据库？

> ID：919514
> 
> 赞同：1
> 
> 时间：2009-05-28T06:50:59.397
> 
> 标签：sharepoint, sharepoint-2007, wss-3.0

我在列表中添加了一个复选框，就像人员和组列表中有一个复选框一样：[alt text http://img8.imageshack.us/img8/605/ss20090528093906.png](http://img8.imageshack.us/img8/605/ss20090528093906.png)

但是在我的列表中，我想将选定的值保存到数据库中。但我不知道怎么做。我想我可以将 javascript 添加到`onClick`事件中，但我既不知道该将 javascript 放在哪里（或者我可以使用 C# 代码吗？），我也不知道如何从 javascript 更新数据库。

也许你可以帮助我，好吗？还有哪些其他选择？我将如何实施？

谢谢！

如果其他人想添加复选框，那么[这篇](http://murugangs.blogspot.com/2007/12/checkbox-in-listviewwebpart.html)文章确实帮助了我（但不是详细的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-30T06:57:59.723

使用 jQuery 和 SharePoint Web 服务 - 将单击处理程序附加到复选框并包含从同一行中查找项目 ID 的代码 - 很容易在 firebug 中找到。

我的博客上有一些 Web 服务部分的示例代码：

[http://tqcblog.com/2009/05/04/sharepoint-discussion-with-jquery](http://tqcblog.com/2009/05/04/sharepoint-discussion-with-jquery)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-11T09:09:29.877

您可以使用 jQuery，使用 jQuery 向所有复选框添加单击事件，并让单击事件对您编写并部署到 Sharepoint 的 Web 服务执行 AJAX 调用。您可以使用内容编辑器 Webpart 在页面中注入 Javascript。将 Web 服务部署为功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:32:35.583

您可以实现一个 ItemEventReceiver 为您处理数据库内容并将其附加到您的列表中。ItemEventReceiver 应该监听 ItemAdded、ItemUpdated 和 ItemDeleted 事件，以便您可以对这些不同的情况做出反应并将信息写入数据库。

有关事件接收器的更多信息，您应该查看关于该主题[的 Brian Wilson 的博客文章或](http://blogs.msdn.com/brianwilson/archive/2007/03/05/part-1-event-handlers-everything-you-need-to-know-about-microsoft-office-sharepoint-portal-server-moss-event-handlers.aspx)[MSDN](http://msdn.microsoft.com/en-us/library/ms453149.aspx)。

# asp.net - 如何在 asp.net WebForms 中实现 Post/Redirect/Get 模式？

> ID：919516
> 
> 赞同：4
> 
> 时间：2009-05-28T06:51:55.450
> 
> 标签：asp.net, post-redirect-get

所以我了解了prg模式的基础知识。但是我还没有遇到使任意数据可用于页面的“获取”实例的技术。

例如，我可能希望根据用户发起 PostBack 的操作向用户显示不同的反馈消息。

我一直在做的是发送一个标识符作为查询字符串参数。这工作正常，但它引入了书签问题，并且似乎不能很好地扩展。如果我需要发送所有的 ViewState 怎么办？

不幸的是，我目前与 WebForms 相关联，无法说服我的组织迁移到 mvc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T13:16:21.973

如果发布的字段在重定向之前被保留，并且您需要在重定向之后访问该数据，我会在查询字符串上附加数据记录的标识符，就像您提到的那样。您还可以指定请求的状态（用于显示消息等）。然后在 GET 页面上，您可以读出数据并对其进行任何处理。

我没有看到任何其他方法来解决这个问题，因为 GET 获得的每个页面都无法访问前一页`ViewState`等。

使用`Server.Transfer`将与在原始页面上处理 POST 具有相同的效果。

您可以使用 Session 变量来存储 POST 数据，但这很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T07:41:47.297

我认为您仍然可以在表单元素中使用 get 方法。在这种情况下，您将无法以正常方式使用控件的 ID。但是您可以使用 Request.Params 集合来获取视图状态。

更新：对不起，我又试了一次。并发现您可以通过代码隐藏中的 ID 访问您的服务器控件。像：

```
Response.Write(text1.Text) 
```

看例子：

aspx 页面（仅表单元素）：

```
< form id="form1" runat="server" method="get">
< div>
< asp:TextBox ID="text1" runat="server" />
< asp:Button ID="button1" runat="server" OnClick="buttonClick" />
< div>
< form> 
```

**注意：** 我在每个“<”之前使用了一个空格，否则上面的代码将不可见。

页面背后的代码（仅按钮单击事件）：

```
protected void buttonClick(object sender, EventArgs e)
    {
        string text = Request.Params["text1"];

        Response.Write(text);
    } 
```

当您单击按钮时，网址将如下所示：

[http://localhost:1157/WebSite1/Default.aspx?__VIEWSTATE=%2FwEPDwUKMTkwNjc4NTIwMWRkoJEtEHZ8lHQ53QllSkz8ncpEw80%3D&__EVENTVALIDATION=%2FwEWAwKf%2BPPUCwKTjKGwCgKs34rGBvus9oxN%2FQkHlkztext=KUEsh&rbbutton1FwEPDwUKMTkwNjc4NTIwMWRkoJEtEHZ8ncpEw80%3D](http://localhost:1157/WebSite1/Default.aspx?__VIEWSTATE=%2FwEPDwUKMTkwNjc4NTIwMWRkoJEtEHZ8lHQ53QllSkz8ncpEw80%3D&__EVENTVALIDATION=%2FwEWAwKf%2BPPUCwKTjKGwCgKs34rGBvus9oxN%2FQkHlkzpKUEwrbxHLM6u&text1=ashish&button1=)

# jquery - jQuery：当花费太长时间时如何重做 Ajax Post？

> ID：919519
> 
> 赞同：0
> 
> 时间：2009-05-28T06:53:46.863
> 
> 标签：jquery, ajax

有时，请求似乎被冻结了。当需要很长时间时，如何取消它并再次调用它？

有时延迟超过 10 分钟，因为 Ajax 帖子会检查 Twitter API，有时还会检查 Twitter API，你知道！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T06:57:31.240

您可以使用超时选项。看看[文档](http://docs.jquery.com/Ajax/jQuery.ajax#options)。

您可以将超时设置为合理的值。如果发生超时，将调用回调错误，并且第二个参数将“超时”作为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T06:57:37.013

使用超时选项：

[http://docs.jquery.com/Ajax/jQuery.ajax#toptions](http://docs.jquery.com/Ajax/jQuery.ajax#toptions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T06:59:08.040

您始终可以将该调用置于超时或队列中并每隔 x 分钟执行一次...当它启动时，将一个布尔变量设置为 true，到那时，它不会调用该函数...当您需要时再次调用它，再次将其设置为 false ...

```
var getResults = true;

settimeout( function() {
    if( getResults ) {
       // call your ajax method
       ...
       onSuccess: 
          ...
          getResults = false;
    }
}, 1000 ); 
```

像这样的东西......

# jquery - 如何使用 jQuery 通过 Ajax 使用 Google 翻译？

> ID：919522
> 
> 赞同：1
> 
> 时间：2009-05-28T06:56:10.917
> 
> 标签：jquery, ajax, google-translate

我正在通过 jQuery使用[Ajax ，并且正在尝试使用](http://en.wikipedia.org/wiki/Ajax_%28programming%29)[Google Translate Service](http://www.google.de/language_tools?hl=en)进行翻译。该服务似乎对我不起作用。

我究竟做错了什么？我将如何在我的 Web 应用程序中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-11-21T03:31:37.090

你可以这样做：

```
$.ajax({  
    url: 'https://ajax.googleapis.com/ajax/services/language/translate',  
    dataType: 'jsonp',
    data: { q: 'Hello world!',  // text to translate
            v: '1.0',
            langpair: 'en|es' },   // '|es' for auto-detect
    success: function(result) {
        alert(result.responseData.translatedText);
    },  
    error: function(XMLHttpRequest, errorMsg, errorThrown) {
        alert(errorMsg);
    }  
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T18:29:15.203

Google Translate v1.0 的 Translate API 不再工作，v2.0 是您要找的，不是免费的，如谷歌搜索或他们提供的其他服务。

翻译 100 万个字符的价格为 20 美元。

[这里是官方信息！](https://developers.google.com/translate/v2/pricing?hl=ro&csw=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T10:27:27.433

我认为您采用了错误的策略。您不会直接对 Google 翻译服务进行 AJAX 调用，Google Translate Javascript API 会为您包装这一切。

查看 API 游乐场中的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T13:15:46.640

[你的代码和谷歌的示例代码](http://code.google.com/apis/ajaxlanguage/documentation/#Examples)有什么区别？

这些例子对你有用吗？

您是否可能没有有效的 Google JavaScript API 密钥？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-22T21:20:38.010

只需删除密钥，看看它是否适合您

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-15T20:42:56.287

有一个利用 Google Translate API 的 jQuery 插件。它肯定使事情变得更容易和更清洁。

[jquery-翻译](http://code.google.com/p/jquery-translate/)

# asp.net - 验证和 Linq

> ID：919525
> 
> 赞同：1
> 
> 时间：2009-05-28T06:56:46.890
> 
> 标签：asp.net, linq, validation

我正在尝试将验证逻辑添加到我的应用程序中。我试图按照本教程 [http://www.a2zdotnet.com/View.aspx?id=75](http://www.a2zdotnet.com/View.aspx?id=75)

但我没有任何
部分 void OnEmailIdChanging(string value) 或任何“更改”功能。在我的课堂上，所以我从 Visual Studio 收到一个错误。当我创建 dbml 文件时，VS 似乎没有生成足够的代码......

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T07:09:18.253

[检查此](http://msdn.microsoft.com/en-us/library/wa80x488(VS.80).aspx)部分类定义。我没有下载源代码（因为它要求登录），但我确信该教程是关于使用自定义部分类扩展 linq2sql 数据上下文的。

```
namespace fooo
{

//In your case - generated linq2sql data context
public partial class foo
{
    event EmailIdChangingHandler OnEmailIdChanging;
}

//Yours partial class, which extends data context
public partial class foo
{
    public foo()
    {
        OnEmailIdChanging += doSomethingOnEmailChanging;
    }

    public void doSomethingOnEmailChanging()
    {
        Console.WriteLine("email changed");
    }
}
} 
```

并确保您的数据库具有 EmailId 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T07:17:39.297

我找到了解决方案。我是因为我没有正确设置表上的主键！

# c# - 如何进入 C#/vb.net - 在执行存储过程期间从 raiserror 命令（sqlserver）返回的消息

> ID：919528
> 
> 赞同：2
> 
> 时间：2009-05-28T06:58:40.973
> 
> 标签：c#

自从我进行了一些研究并记录了我的“发现”以来，这已经有点久了，但问题只有 2 行并且加粗...

我在任何地方都进行了搜索，并且在 C# 和 SQL_SERVER 之间徘徊：

我需要运行一个非常大的存储过程，需要 30 多分钟

它有步骤，我想通知 dot.net SP 现在正在执行哪个步骤……某种状态报告。

从 SQL_SERVER 方面我想我明白了.. RAISERROR('HELLO WORLD.', 10, 1) with nowait

当错误级别小于 11 时，它是一个警告 当错误级别在 11-19 之间时，当错误级别大于 19 时，它是一个可以处理的异常，它是一个“致命”错误，关闭连接警告

所以我使用 10 - 我想发送一个警告 - 这不会使运行失败。

在 .net 方面，我迷路了……我读到了关于线程、关于 RPC、关于事件甚至……关于 1.0 以上框架的标志

我**需要一个具有完整设置的完整代码来完成以下工作：调用存储过程并在执行它时报告状态（同时 - 不是之后！！！）**

我认为到目前为止我得到的最好的相关信息是：geekswithblogs.net/mrnat/archive/2004/09/20/11431.aspx

www.eggheadcafe.com/forumarchives/NETFrameworkADONET/Nov2005/post24657346.asp

www.dotnet247.com/247reference/msgs/54/273728.aspx

msdn.microsoft.com/en-us/library/ms178592.aspx

www.devnewsgroups.net/group/microsoft.public.dotnet.framework.adonet/topic37218.aspx

如果您可以给出一个工作示例或将我推荐给返回“Hello World”的SP（stackoverflow / codeproject等）等站点中的项目-在执行SP期间我将非常感激-现在我'我点击按钮并祈祷......我真的更喜欢被控制的错觉:)

谢谢，对不起这个故事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T07:42:16.987

创建一个存储流程当前步骤编号的表，并让您的流程在每个步骤中写入此表。然后您可以轮询“当前步骤”或设置 SQLCacheDependency。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T07:44:04.097

您只需要捕获**SqlException**然后您就可以拥有

1.  LineNumber（在您的 SP 中发生的错误）

2.  编号（错误编号 [在您的情况下为 10]）

3.  过程（导致错误的存储过程的名称）

4.  状态

5.  SqlErrorCollection 对象

和许多其他好东西！

编辑：- 哎呀，这不会直接帮助你你有不同的要求。

# visual-studio - Visual Studio 项目属性中需要的帮助

> ID：919530
> 
> 赞同：2
> 
> 时间：2009-05-28T06:59:16.090
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2005, clr

我有一个主要项目（例如：applicationsolution explorer (10projects)），它依赖于其他 10 个

项目。在一个项目中，我需要使用 /clr(Common Language Runtime) 选项。据我所知

/clr 与 /mtd 不兼容（在链接器部分的代码生成属性中）我更改为

/mdd。我的问题是

我是否还需要为父级（应用程序）启用 /clr 选项？因为我

我在其依赖项目中使用 /clr 选项。所以我也必须在父项目中启用？？？？

在这方面给我你的支持，这对我有很大帮助

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T14:04:37.277

不，根本不需要。

# php - 用于发送文本字符串位置并从附近位置获取文本字符串的 API

> ID：919532
> 
> 赞同：1
> 
> 时间：2009-05-28T06:59:53.093
> 
> 标签：php, geolocation, geotagging

我正在寻找一个 API 或 API 的组合，我可以在其中发送“Anjuna, India”并取回附近地点的列表。这些数据主要是针对“第三世界”国家的，欧洲/美国的数据较少。关于如何构建它的任何建议/想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-02T22:02:52.940

您可以通过以下方式使用几个 Yahoo 的 Geo API。

1.  获取输入位置的 woeid（地球上的位置标识符）
2.  确定邻近地点

一个简单的例子，将这些 API 与 Yahoo 的 YQL 结合起来，将使用以下查询为“Anjuna, India”提供邻居位置：

```
选择 *
FROM geo.places.neighbors
在哪里neighbor_woeid（
    选择 woeid
    FROM geo.places
    WHERE text="印度安朱纳"
    限制 1
)

```

[在 YQL 控制台中试试这个](http://tinyurl.com/o7lnan)（必须登录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T07:41:26.473

您需要带有坐标的地点列表。然后查看该列表并计算城市之间的距离。然后按最小距离对结果进行排序。我还没有做过任何 GPS 编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T12:30:25.437

一定要试试雅虎地理编码服务[http://developer.yahoo.com/maps/rest/V1/geocode.html](http://developer.yahoo.com/maps/rest/V1/geocode.html)

更多信息：http: [//developer.yahoo.com/geo/](http://developer.yahoo.com/geo/)

这是您所在位置“Anjuna India”的响应 hhttp://local.yahooapis.com/MapsService/V1/geocode?appid=YD-9G7bey8_JXxQP6rxl.fBFGgCdNjoDMACQA--&location=Anjuna+India

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-07T17:03:38.690

即将发布的[Google Places API](http://code.google.com/apis/maps/documentation/places/)符合您的要求。

# c# - 如何获取属性名称

> ID：919533
> 
> 赞同：1
> 
> 时间：2009-05-28T06:59:53.390
> 
> 标签：c#, reflection

如何使下面显示的方法返回属性的名称

```
public class MyClass
{
private string _MyProperty = "TEST";

public string MyProperty
{
    get { return _MyProperty; }
    set { _MyProperty = value; }
}

public string GetName()
{
    return _MyProperty;  // <- should return "MyProperty";
} 
```

}

我不想使用 return "MyProperty" 所以还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T07:11:18.873

在某种程度上，您需要确定要返回其名称的属性...如果只有一个，您可以使用它：

```
public string GetName()
{
return this.GetType().GetProperties(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance)[0].Name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T07:12:08.123

正如 Rythmis 所说，您无法通过成员变量获取属性的名称。但是，以下是列出类中所有属性的方法：

```
 public class MyClass {
    private string _MyProperty = "TEST";

    public string MyProperty {
        get { return _MyProperty; }
        set { _MyProperty = value; }
    }

    public void GetName() {
        Type t = this.GetType();
        PropertyInfo[] pInfos = t.GetProperties();
        foreach(PropertyInfo x in pInfos)
            Console.WriteLine(x.Name);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:04:01.447

您无法通过成员变量获取属性的名称——该变量仅保存对字符串的引用，而字符串不知道该属性。

您*可以*做的是列出*类*中的所有属性并获取它们的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T07:24:05.727

我真的看不出它的意义，但这可能是一种方法。下面的方法使用反射循环遍历该类型的所有属性，获取每个属性的值并使用 ReferenceEquals 检查属性是否引用了与请求的对象相同的对象：

```
private string _myProperty = "TEST";
public string MyProperty
{
    get
    {
        return _myProperty;
    }
}

public string GetName(object value)
{
    PropertyInfo[] properties = this.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);
    for (int i = 0; i < properties.Length; i++)
    {
        object propValue = properties[i].GetValue(this, null);
        if (object.ReferenceEquals(propValue,value))
        {
            return properties[i].Name;
        }
    }

    return null;
}

Console.WriteLine(GetName(this.MyProperty)); // outputs "MyProperty" 
```

不过，这远非万无一失。假设该类有两个字符串属性，MyProperty 和 YourProperty。如果我们在某个时候这样做：`this.MyProperty = this.YourProperty`它们都将引用相同的字符串实例，因此上述方法无法确定哪个属性是想要的。正如现在所写的那样，它将返回它在数组中找到的第一个。

# proxy - 如何将 libproxy 与 proxy.pac 一起使用？

> ID：919534
> 
> 赞同：2
> 
> 时间：2009-05-28T07:00:02.373
> 
> 标签：proxy, proxy.pac

这里有人用过Libproxy库吗？如果我要通过从远程服务器读取 proxy.pac 来制作一个应用程序来解析代理设置，libproxy 会帮助我吗？关于如何使用 libproxy 下载 pac 脚本并获取代理值的任何想法？

谢谢！

GK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-08-27T23:57:35.783

`Libproxy`为您透明地处理`pac`下载和解析。

你的应用应该做什么：创建一个新`ProxyFactory`对象`pf = New ProxyFactory()`

对于您连接到的每个资源，检查要使用的代理

```
ProxiesToTry=pf.getProxies("http://www.google.com") 
```

（对于您连接的每个 URI！尤其是`PAC`每个 URI 都可能不同，例如卸载图片或视频等）。

[...] 连接到代理并进行通信

销毁`pf`对象。

只要`pf`对象在周围，`pac`文件就会被缓存。

有关更多信息，请随时加入 freenode (IRC) 上#libproxy 上的开发人员

# linux - 使用 --quiet 选项标志运行 rpmbuild 命令会产生大量调试信息

> ID：919537
> 
> 赞同：3
> 
> 时间：2009-05-28T07:01:05.710
> 
> 标签：linux, debugging, shell, rpm, sh

我希望最小化我的 rpm 构建过程的输出。

我运行以下命令：`rpmbuild -ba --quiet "/tmp/yaneeve/kit/linux/rpm_spec"`

我的系统是：`Linux yaneeve-lnx-82-5 2.4.21-47.ELsmp #1 SMP Wed Jul 5 20:38:41 EDT 2006 i686 i686 i386 GNU/Linux`

rpmbuild 版本是：`RPM version 4.2.3`

我的 rpm 规范文件的 %prep 部分是：

```
%prep

. $LOGGER_FUNC_FILE_LOCATION/logger.sh

SCRIPT_NAME='rpm_spec-prep'
SOURCE_DIR=`readlink -f -n %{_sourcedir}`
PACKAGE_DIR=`readlink -f -n %{_pkg_script_dir}`
BUILD_PRODUCT_DIR=`readlink -f -n %{_build_product_dir}`
RESOURCE_DIR=`readlink -f -n %{_resource_dir}`

log $SCRIPT_NAME INFO "In the prep stage of the rpm spec file..."

if [[ -d $SOURCE_DIR && `ls -a $SOURCE_DIR | wc -w` -gt 2 ]] ; then
    log $SCRIPT_NAME INFO "Source directory exists and is not empty - deleting content."
    rm -rf $SOURCE_DIR//*
    if [ $? -ne 0 ]; then
        log $SCRIPT_NAME ERROR "Unable to remove $SOURCE_DIR/* - exiting."
        exit 1
    fi
fi

if [ ! -f $PACKAGE_DIR/include_src_files.sh ]; then
    log $SCRIPT_NAME ERROR "File list does not exist - aborting."
    exit 1
else
    $PACKAGE_DIR/include_src_files.sh $BUILD_PRODUCT_DIR $RESOURCE_DIR $SOURCE_DIR
    if [ $? -ne 0 ]; then
        log $SCRIPT_NAME ERROR "Unable to run include_src_files.sh script - exiting."
        exit 1
    fi
fi 
```

结果，rpmbuild 创建了以下脚本（注意 set -x）：

```
#!/bin/sh

  RPM_SOURCE_DIR="/tmp/yaneeve/output/kit/SOURCES"
  RPM_BUILD_DIR="/tmp/yaneeve/output/kit/BUILD"
  RPM_OPT_FLAGS="-O2 -g -pipe -march=i386 -mcpu=i686"
  RPM_ARCH="i386"
  RPM_OS="linux"
  export RPM_SOURCE_DIR RPM_BUILD_DIR RPM_OPT_FLAGS RPM_ARCH RPM_OS
  RPM_DOC_DIR="/usr/share/doc"
  export RPM_DOC_DIR
  RPM_PACKAGE_NAME="YANEEVE-APP"
  RPM_PACKAGE_VERSION="4.2.2.0"
  RPM_PACKAGE_RELEASE="01.0"
  export RPM_PACKAGE_NAME RPM_PACKAGE_VERSION RPM_PACKAGE_RELEASE
  RPM_BUILD_ROOT="/tmp/yaneeve/output/kit/SOURCES"
  export RPM_BUILD_ROOT

  set -x
  umask 022
  cd /tmp/yaneeve/output/kit/BUILD
LANG=C
export LANG
unset DISPLAY

. $LOGGER_FUNC_FILE_LOCATION/logger.sh

SCRIPT_NAME='rpm_spec-prep'
SOURCE_DIR=`readlink -f -n /tmp/yaneeve/output/kit/SOURCES`
PACKAGE_DIR=`readlink -f -n /tmp/yaneeve/output/kit/../../kit/linux`
BUILD_PRODUCT_DIR=`readlink -f -n /tmp/yaneeve/output/kit/..`
RESOURCE_DIR=`readlink -f -n /tmp/yaneeve/output/kit/../../conf`

log $SCRIPT_NAME INFO "In the prep stage of the rpm spec file..."

if [[ -d $SOURCE_DIR && `ls -a $SOURCE_DIR | wc -w` -gt 2 ]] ; then
    log $SCRIPT_NAME INFO "Source directory exists and is not empty - deleting content."
        rm -rf $SOURCE_DIR//*
        if [ $? -ne 0 ]; then
        log $SCRIPT_NAME ERROR "Unable to remove $SOURCE_DIR/* - exiting."
        exit 1
    fi
fi

if [ ! -f $PACKAGE_DIR/include_src_files.sh ]; then
        log $SCRIPT_NAME ERROR "File list does not exist - aborting."
        exit 1
else
    $PACKAGE_DIR/include_src_files.sh $BUILD_PRODUCT_DIR $RESOURCE_DIR $SOURCE_DIR
        if [ $? -ne 0 ]; then
        log $SCRIPT_NAME ERROR "Unable to run include_src_files.sh script - exiting."
        exit 1
    fi
fi 
```

为什么要插入 set -x？我相信这是打印大量调试信息的原因？我究竟做错了什么？或者，我的 rpmbuild 程序是否存在错误？

（对不起，如果我的问题描述性太强了......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T13:33:51.627

您的发行版上的 %prep 宏已展开，并包含 set -x。
在我的 /usr/lib/rpm/macros 发行版中，我发现以下内容：

> > 导出 CLASSPATH}\
> > %{verbose:set -x}%{!verbose:exec > /dev/null}\
> > umask 022\
> > cd \"%{u2p:%{_builddir}}\"\

您需要取消设置详细变量才能删除“set -x”。

# python - 我们如何在 Cheetah 中预编译基本模板，以便 #include、#extends 和 #import 在 Weby 中正常工作

> ID：919539
> 
> 赞同：2
> 
> 时间：2009-05-28T07:02:48.437
> 
> 标签：python, inheritance, web.py

您如何在**生产中为****Cheetah**服务？

 **伙计们，你能分享一下如何在生产中预编译和服务 cheetah 的设置吗

由于我们不在 webpy 中编译模板，因此会出现上游超时错误。如果您可以分享一个好的最佳实践，那将有所帮助

*

> Jeremy 写道: 对于生产站点，我使用带有预编译模板的 Cheetah - 它非常快（当 python 编译和优化时，模板导入特别快）。imp 模块有一点魔力，它需要一个模板名称和一个基本目录（在特定于站点的配置中配置）并加载该模板，处理 #extends 和
> 
> # 根据需要导入指令。我不使用内置支持
> 
> 然而，猎豹。新模板库也只导入显示调试错误页面

*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-01T06:18:12.560

也许根据需要自动编译：

```
import sys
import os
from os import path
import logging
from Cheetah.Template import Template
from Cheetah.Compiler import Compiler

log = logging.getLogger(__name__)

_import_save = __import__
def cheetah_import(name, *args, **kw):
  """Import function which search for Cheetah templates.

  When template ``*.tmpl`` is found in ``sys.path`` matching module
  name (and corresponding generated Python module is outdated or
  not existent) it will be compiled prior to actual import.
  """
  name_parts = name.split('.')
  for p in sys.path:
    basename = path.join(p, *name_parts)
    tmpl_path = basename+'.tmpl'
    py_path = basename+'.py'
    if path.exists(tmpl_path):
      log.debug("%s found in %r", name, tmpl_path)
      if not path.exists(py_path) or newer(tmpl_path, py_path):
        log.info("cheetah compile %r -> %r", tmpl_path, py_path)
        output = Compiler(
            file=tmpl_path,
            moduleName=name,
            mainClassName=name_parts[-1],
            )
        open(py_path, 'wb').write(str(output))
      break
  return _import_save(name, *args, **kw)

def newer(new, old):
    """Whether file with path ``new`` is newer then at ``old``."""
    return os.stat(new).st_mtime > os.stat(old).st_mtime

import __builtin__
__builtin__.__import__ = cheetah_import 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-09T06:00:17.800

**这有效**

```
try:web.render('mafbase.tmpl', None, True, 'mafbase')
except:pass 
```

**这就是我对你的代码所做的**

```
from cheetahimport import *
sys.path.append('./templates')
cheetah_import('mafbase') 
```

# 包括在给定的方法中不起作用。

**这是我得到的错误**

```
 localhost pop]$ vi code.py
    [mark@localhost pop]$ ./code.py 9911
    http://0.0.0.0:9911/
    Traceback (most recent call last):
     File "/home/mark/work/common/web/application.py", line 241, in process
     return self.handle()
    File "/home/mark/work/common/web/application.py", line 232, in handle
    return self._delegate(fn, self.fvars, args)
    File "/home/mark/work/common/web/application.py", line 411, in _delegate
    return handle_class(cls)
    File "/home/mark/work/common/web/application.py", line 386, in handle_class
    return tocall(*args)
    File "user.py", line 264, in proxyfunc
    return func(self, *args, **kw)
    File "/home/mark/work/pop/code.py", line 1801, in GET
    return web.render('subclass.html')
    File "/home/mark/work/common/web/cheetah.py", line 104, in render
    return str(compiled_tmpl)
    File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 982, in __str__
    def __str__(self): return getattr(self, mainMethName)()
    File "templates/mafbase.py", line 713, in respond
    self._handleCheetahInclude("widgetbox.html", trans=trans, includeFrom="file", raw=False)
    File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 1512, in _handleCheetahInclude
    nestedTemplateClass = compiler.compile(source=source,file=file)
    File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 693, in compile
     fileHash = str(hash(file))+str(os.path.getmtime(file))
   File "/usr/lib/python2.5/posixpath.py", line 143, in getmtime
    return os.stat(filename).st_mtime
   OSError: [Errno 2] No such file or directory: '/home/mark/work/pop/widgetbox.html' 
```

# php - 有谁知道任何火车时刻表 API 服务？

> ID：919542
> 
> 赞同：13
> 
> 时间：2009-05-28T07:04:18.200
> 
> 标签：php, javascript, python, api

## 更新

时间在流逝，但有些东西在动（欧洲）：我的一个朋友给我看了这个：[http](http://project.irail.be/) : //project.irail.be/ Atm 它只适用于比利时。

我想知道是否有任何在线服务提供有关火车时刻表（到达、出发、蚀刻..）的 API，至少对于欧洲车站而言。

我知道 www.bahn.de，它为许多欧洲国家提供准确的时间表，但我没有找到任何类似的 api 服务。

我的目标（嗯，只是一个*未来的项目*）是开发一个像 gmaps 这样的应用程序，但我不想提供汽车旅行，而是提供火车旅行.. 你知道，用户设置出发日期、时间和站，然后是第一个到达，也许然后添加另一个，依此类推。

那么，有类似的东西，可以通过 php/python/javascript 查询？

**编辑：**如果可以帮助，我想建立一个服务来计划一次铁路旅行！（任何帮助将不胜感激）

我卡住了。Google 的公共服务 api 依赖于每个本地公司提供的信息，缺少很多分支机构（例如，几乎不可能使用它来构建涉及欧洲两个或多个地区的行程。正如我之前所说，唯一的我知道做得好的服务是 bahn.de，他们确实拥有所有数据.. 但没有 api。我试图解析他们的结果页面（为了将它们用作 API），但似乎标记已经构建正是为了避免这种情况.. 也许他们背后有商业计划或其他什么，但我认为他们不会发布一些 API.. 所以，我的项目在没有这个功能的情况下继续进行（ps：我的项目是关于非营利文化组织的, 我们不会对任何人开战;P)

@El Goorf：如果您找到方法，并考虑分享它的想法，如果需要帮助，请指望我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T07:45:14.000

供参考。英国的 National Rail 不为他们的英国火车数据提供 API，并且对开发人员从第三方应用程序调用表单/抓取页面感到非常有趣。这是一个非常奇怪的封闭模型。谷歌或 BBC 可能是您最好的选择，尽管 BBC 提供旅行信息而不是时间表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-19T11:25:54.220

不完全是你要找的东西，但你看过[http://www.livedepartureboards.co.uk/ldbws/](http://www.livedepartureboards.co.uk/ldbws/)吗？它是英国铁路的 API……但仅适用于到达和离开，而不是提前几个小时计划！

不过，这是一个开始！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T07:33:48.640

像[Google Transit Feed](http://code.google.com/transit/spec/transit_feed_specification.html)这样的通用格式，有一些[美国](http://code.google.com/p/googletransitdatafeed/wiki/PublicFeeds)的，还有我在[伦敦](http://www.tfl.gov.uk/businessandpartners/syndication/default.aspx)找到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-08T22:31:51.657

不幸的是，据我所知，到目前为止，欧洲还没有公开的时间表数据。正如 Garrow 上面所指出的，美国、澳大利亚和加拿大的许多机构已率先将这些信息提供给开发人员，但世界其他地区尚未效仿。我建议关注[Transit Developers group](http://groups.google.com/group/transit-developers)和[OpenStreetMap talk-transit list](http://lists.openstreetmap.org/listinfo/talk-transit)，因为这些是开发人员最有可能讨论新数据发布的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T16:33:43.823

英国火车时刻表数据可从以下网站获得：

[http://data.atoc.org/how-to](http://data.atoc.org/how-to)

它是免费的，包括用于商业用途。它不是一个 API，而是一个 40M 的 zip 文件，其中包含古老的固定字段格式的数据。似乎有一个开源项目可以解析这些数据，[sourceforge 上](http://librailfare.sourceforge.net/)的 librailfare （感谢[lefterav](https://stackoverflow.com/users/865586/lefterav)指出这一点）。

数据的规格在这里：

[http://travelinedata.org.uk/CIF/atco-cif-spec.pdf](http://travelinedata.org.uk/CIF/atco-cif-spec.pdf)

和这里：

[http://data.atoc.org/sites/all/themes/atoc/files/rsps5041%20-%20Timetable%20Data.pdf](http://data.atoc.org/sites/all/themes/atoc/files/rsps5041%20-%20Timetable%20Data.pdf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-13T20:11:25.273

有没有人设法为此提出任何建议？我也一直在寻找欧洲火车时刻表 API。我能想到的最好的就是这个免费的数据源：[http ://www.bahn.de/p/view/buchung/karten/dbfahrplanbest.shtml](http://www.bahn.de/p/view/buchung/karten/dbfahrplanbest.shtml)

这是一个本地安装的应用程序。现在如果有办法从中获取数据并将其加载到数据库中，那就太好了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-22T21:15:22.193

对于**瑞典**的火车，有[http://www.trafiklab.se](http://www.trafiklab.se)，其中 API 可用于瑞典基本上所有的公共交通，其中大部分（包括火车）具有有关干扰的实时信息。不过只有瑞典语。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-16T00:40:06.643

法国国家铁路公司刚刚发布了一个 API 来访问其火车时刻表数据： [https ://data.sncf.com](https://data.sncf.com)

# java - 如何存根/模拟 JDBC ResultSet 以同时使用 Java 5 和 6？

> ID：919544
> 
> 赞同：7
> 
> 时间：2009-05-28T07:05:11.757
> 
> 标签：java, jdbc, mocking, resultset, stub

我正在测试我的一些使用 JDBC 语句等的类，现在我遇到了 JDBC ResultSet 接口的问题：

该软件应该在 Java 5 和 Java 6 上运行，因此测试也应该在这两个版本上运行。不幸的是，Java 6 引入了一堆新方法（这仍然不是什么大问题），它们返回一堆新的类/接口，这使得事情变得更加困难。（参见[Frank Carver 的 Punch Barrel - Java 6 打破 JDBC](http://blog.punchbarrel.com/2008/09/23/java-6-breaks-jdbc/)例如）

在找出这些版本差异之前，我考虑了存根和模拟之间的问题，最终选择了存根，因为 ResultSet 具有内部状态（处理当前行），这对我来说更自然地使用存根，如下所示：

```
public class StubResultSet implements ResultSet {
    private Object[][] data;
    private int currentRow = -1;
    private boolean closed = false;

    public StubResultSet(Object[][] data) {
        this.data = data;
    }

    public Object getObject(int columnIndex) throws SQLException {
        checkClosed();
        return data[currentRow][columnIndex];
    }
    public String getString(int columnIndex) throws SQLException {
        checkClosed();
        return (String) getObject(columnIndex);
    }

    // ...
} 
```

但是，如果我不引入新方法 as `public NClob getNClob(int columnIndex)`，则该类在 Java 6 下被破坏 - 如果我在 Java 5 下将它们引入该类。

我可以使用mockito（例如）回调来让状态反映在返回值中，但是有人有其他的——也许更好的——想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T07:49:38.327

好吧，经过一番思考，我最终得到了存根类，并用[Mockito 模拟](http://mockito.org/)它：

```
public static ResultSet initMock(Object[][] data) throws SQLException {
    final StubResultSetContents contents = new StubResultSetContents(data);
    ResultSet rs = mock(ResultSet.class, RETURNS_SMART_NULLS);
    when(rs.getObject(anyInt())).thenAnswer(new Answer<Object>() {
        public Object answer(InvocationOnMock invocation) throws Throwable {
            return contents.getObject(getIntArgument(invocation));
        }
    });
    // a bunch of similar when(...).thenAnswer(...) constructs...
} 
```

（StubResultSetContents 中的存根类）。如果有人有其他想法，请随时回答=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-08T12:24:41.340

我有同样的问题并使用代理实现解决了它。看起来它工作得很好。

```
public class TestResultSet implements InvocationHandler {
    public static ResultSet createProxy(HashMap<Object, Object>[] rows) {
        return (ResultSet) Proxy.newProxyInstance(ResultSet.class.getClassLoader(),
                                             new Class[] { ResultSet.class },
                                             new TestResultSet(rows));
    }

    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        // Find the equivalent method in the proxy class.
        Method m = TestResultSet.class.getMethod(method.getName(), method.getParameterTypes());
        if(m == null) {
            throw new SQLException("Unsupported method " + method.getName());
        }

        return m.invoke(this, args);
    }

    // Method implementations follow here (only one supplied as an example)

    public boolean isFirst() throws SQLException {
        return index ==0;
    }

} 
```

# comet - 什么是回调轮询？

> ID：919546
> 
> 赞同：2
> 
> 时间：2009-05-28T07:06:10.130
> 
> 标签：comet, polling

好的，我正在寻找实现 COMET，我偶然发现这个页面比较了各种选项：

[http://cometdaily.com/maturity.html](http://cometdaily.com/maturity.html)

在“传输”下，他们使用的是“回调轮询”这个术语——什么是回调轮询？我知道什么是正常轮询和长轮询，但什么是回调轮询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-28T23:39:51.893

回调轮询不止于此。它实际上是使用 JSON-P 进行长轮询。这样，您可以进行跨域轮询（这不适用于标准 XHR），同​​时仍然可以获得彗星和长轮询的好处。

我们在[WebSync](http://www.frozenmountain.com/websync)中实现了这样的结构，以允许我们的按需版本在不支持 HTML5 等的 IE 等浏览器中工作（我们在服务器上托管长期连接）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-28T07:32:50.873

因此，一旦您通过简单的 ajax 请求与服务器建立了连接，服务器就可以做出快速响应并关闭连接。

commet 的想法是不关闭此连接并通过它发送数据。该数据可以是在客户端进行评估的 javascript。

它也可能是一个 javascript，它会在时机成熟时打开新的连接。并且认为这是一个回调轮询 - 当来自客户端的池在服务器端启动时。

# asp.net - 是否可以将多个列绑定到 DropDownList 的 DataTextField？

> ID：919548
> 
> 赞同：3
> 
> 时间：2009-05-28T07:08:08.567
> 
> 标签：asp.net

以下是我的代码...

**DropDownList2.DataSource = td.DataSet DropDownList2.DataSource = td DropDownList2.DataTextField = td.Columns("Name").ColumnName.ToString DropDownList2.DataValueField = td.Columns("VendorCode").ColumnName.ToString DropDownList2.DataBind()**

现在我需要在下拉列表中显示供应商的类型和供应商的名称。可以使用此语句检索供应商的类型...

td.Columns("VendorType").ColumnName.ToString

是否有可能做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T07:11:47.093

无法将**DataTextField**绑定到多个列。您可以创建包含*供应商名称*和*供应商类型*的派生列并将其绑定到**DataTextField**属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T07:15:52.343

不幸的是，不可能将多个字段绑定到单个属性。

但是，看起来您正在使用 DataSet 和 DataTable，因此您可以使用包含`Name`and的单个字符串创建派生列，并按照`VendorType`您喜欢的方式格式化。您需要查看[DataColumn.Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression(vs.71).aspx)属性。将此设置为自动计算新列。

# licensing - LGPL 许可库

> ID：919549
> 
> 赞同：23
> 
> 时间：2009-05-28T07:08:46.523
> 
> 标签：licensing, lgpl

我已经阅读了 LGPL 许可证，但它太复杂了，以至于我无法弄清楚我的问题的答案。

我想在我的项目中使用 LGPL 库。LGPL 库中不会进行任何更改。该项目是注册用户使用的网站应用程序。注册用户不收取使用该网站的费用。

所以我的问题是我可以在这种情况下使用 LGPL 库吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-28T07:45:06.027

首先，您绝对可以*使用*该库。是否愿意，是一个单独的问题。

如果您不修改源代码，不静态链接到库，或者依赖库的内部数据结构，那么您**不必**将应用程序的源代码分发给从您***​​那里获取二进制文件的任何人***，但是您**必须**分发库的原始源代码。

如果您确实修改了源代码，但没有静态链接到库，或者依赖于库的内部数据结构，那么您**不必**将应用程序的源代码分发给从您***​​那里获取二进制文件的任何人，***但您**必须**分发**修改**后的库源代码。

如果您静态链接到库，或者依赖库的内部数据结构，那么您**必须**将应用程序的源代码分发给从您***​​那里获取二进制文件的任何人***，并且您必须分发原始（或修改，如果适用）库的源代码。

如果您不分发二进制文件，或者您可以接受上述限制，那么您可以愉快地使用该库。

HTH。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-28T07:36:17.730

如果您不分发您的 Web 应用程序，而只是托管它并提供对它的访问（即人们只是使用他们的浏览器），那么您可以使用 LGPL 库。根据（L）GPL，授予某人访问权限不是分发。您甚至可以通过这种方式使用 GPL 库和代码。您甚至可以更改这些库。因为它不是分发版，所以你可以做任何你想做的事，而且你不需要泄露源代码。

唯一不能使用的库是那些获得 AGPL（[Affero 通用公共许可证](http://www.fsf.org/licensing/licenses/agpl-3.0.html)）许可的库。AGPL 与 GPL 类似，但明确要求如果您提供对托管应用程序的访问权限，则还需要分发源代码。这意味着，您网站的访问者需要能够下载网站的源代码。因此，如果您使用 AGPL 库，那么您需要让您的用户能够下载您的 Web 应用程序的整个源代码。

免责声明：我不是律师。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-28T07:12:12.023

如果您不分发程序，您可以在不分发源代码的情况下使用它。您的用户是在下载 Web 客户端程序还是一切都是服务器端的？

如果是客户端，则需要动态链接库以避免需要发布源代码。但是，您仍然必须遵守协议来链接或托管库的源代码（我不确定您是否需要两者都做或只做 1 个）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-28T07:37:59.897

LGPL 许可证摘要：

**专有软件链接**- 允许（因为链接到库的软件不被视为衍生作品）。

**“工作”的分发**- 允许但有一些限制：您必须提供分布式 LGPL 库的源代码并进行修改（如果有），应允许第三方更改 LGPL 库，如果 BC，您的应用程序/lib 仍应使用修改后的 LGPL lib/app。

**通过更改重新分发代码**- 仅当衍生产品是 GNU LGPL 或 GNU GPL 时。

**与 GNU GPL 兼容**- 是

所以总而言之，你应该没问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-28T07:36:23.020

是的。你可以。

# gridview - 网格视图中复选框的 onCheckedChanged 事件

> ID：919550
> 
> 赞同：5
> 
> 时间：2009-05-28T07:09:15.820
> 
> 标签：gridview, checkbox, oncheckedchanged

我在网格视图中有一个复选框控件，Autopost back = true

代码：' runat="server" AutoPostBack="True" OnCheckedChanged="chkJobID_CheckedChanged" />

现在，当我选中复选框时，“OnCheckedChanged”会触发并将 jobID 添加到数组中，但是当我取消选中复选框时，它不会触发......

任何人都可以帮我解决这个问题............

库什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T18:42:52.423

您能否将 chkJobID_CheckedChanged 事件处理程序中的代码替换为：

```
Response.Write(DateTime.Now.ToLongTimeString()); 
```

然后查看该页面并尝试选中和取消选中该复选框。这将告诉我们事件处理程序是否正在触发检查和取消检查操作，这应该有助于我们缩小问题的范围。

——杰里米

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-15T18:46:17.880

该事件未触发，因为您必须从代码隐藏创建控件。真的吗 ？您在 Page 属性中是否将 AutoEventWireUp 设置为 true 或 false？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:20:54.860

也许像 stateChanged() 这样的信号会捕捉到它？

# php - PHP：如何在所有 HTML 标签中将单引号转换为双引号？

> ID：919552
> 
> 赞同：6
> 
> 时间：2009-05-28T07:10:13.133
> 
> 标签：php, string

如何仅在所有 HTML 标记中将所有单引号转换为双引号？有更简单的方法吗？谢谢 ：）

例如：我如何转换这个字符串（我工作的实际数据）：

```
<TEXTFORMAT LEADING='2'><P ALIGN='LEFT'><FONT FACE='Verdana' style="font-size:10' COLOR='#0B333C'>My name's Mark</FONT></P></TEXTFORMAT> 
```

对此：

```
<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" style="font-size:10" COLOR="#0B333C">My name's Mark</FONT></P></TEXTFORMAT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T07:32:48.407

我假设当您在所有 html 标记中说时，您的意思是所有包含属性的单引号。您不希望`<a onclick="alert('hi')">`转换后的 b/c 会破坏代码。

**任何正则表达式都会变得脆弱。**如果您知道您的输入将是一组特定的简单案例，**那么您可以使用 regex**。否则，您将需要一个能够理解复杂 html 标记`onmouseover="(function () { document.getElementById(''); alert(\"...\")...})()"`（例如）的 DOM 解析器。除此之外，一个属性可以跨越多行。;)

我最近不必解决这个特殊问题，但也许有一个很好的方法可以使用[HTML Tidy](http://www.php.net/tidy)（更多在这里：[http](http://devzone.zend.com/article/761) ://devzone.zend.com/article/761 ）或像这样的解析器[http： //sourceforge.net/projects/simplehtmldom/](http://sourceforge.net/projects/simplehtmldom/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T07:59:53.533

如果你不关心其他地方提到的 JavaScript 和 CSS 问题，试试这个：

```
$text = "<TEXTFORMAT LEADING='2'><P ALIGN='LEFT'><FONT FACE='Verdana' style='font-size:10' COLOR='#0B333C'>My name's Mark</FONT></P></TEXTFORMAT>";
echo preg_replace('/<([^<>]+)>/e', '"<" . str_replace("\\\\\'", \'"\', "$1") . ">"', $text); 
```

[这是来自与您在devshed.com](http://forums.devshed.com/regex-programming-147/php-grep-single-to-double-quote-in-tags-595290.html)上的问题完全相同的人的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T08:26:04.353

我知道我可以使用正则表达式，但试一试：使用*fpen()、fread() 等**为 $string分配内容...*

 *```
$string = str_replace("'", '"', $string);
$array = explode('>', $string);
foreach($array as $key => $value){
    if(strpos($value, '<') <> 0 ){
       $array[$key] = str_replace('"', "'",$value);
    }
}
$string = implode('>',$array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T07:12:58.387

不太确定您要完成什么...使用 php 替换字符串的片段可以使用 str_replace 函数完成：

```
str_replace("'", "\"", $yourString); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T07:31:45.867

使用[Tidy](http://nl2.php.net/tidy)可以修复你的 HTML 汤并输出干净的 XHTML。它也做了其他好事，比如修复嵌套问题、小写标签等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-28T09:06:24.117

我会使用 dom 解析器或滚动我自己的简单标签解析器，它可以理解引用和转义引号字符，这样它就不需要`"he said \"blah\""`as`he said \`和*空字符串*。`blah\`

 *它可以轻松检测要修改的引用是否在标签内。多年来，我了解到正则表达式对于此类任务来说太脆弱了。

# linq - LINQ 错误：实体类型的显式构造

> ID：919564
> 
> 赞同：2
> 
> 时间：2009-05-28T07:15:00.347
> 
> 标签：linq

我在 GridView1.DataBind() 处收到此错误；

**不允许在查询中显式构造实体类型“WebApplication1.MUser”。**

```
 using (var db = new UsersDataContext())
            {
                IEnumerable<MUser> user = from u in db.MUsers
                                          where u.Id == 1
                                          select new MUser {Username = u.Username, Id = u.Id, Password=u.Password, ProjectUsers=u.ProjectUsers };

                GridView1.DataSource = user;

                GridView1.DataBind();

            } 
```

如何解决这个问题？

我正在关注本教程 [http://weblogs.asp.net/scottgu/archive/2007/04/21/new-orcas-language-feature-query-syntax.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/21/new-orcas-language-feature-query-syntax.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-12-01T13:09:33.363

如果您关心性能，则应将查询更改为：

```
 using (var db = new UsersDataContext())
      {
      IEnumerable<MUser> user = from x in
                                  (from u in db.MUsers
                                   where u.Id == 1
                                   select u).AsEnumerable()
                                select new MUser { Username = x.Username, Id = x.Id, Password = x.Password, ProjectUsers = x.ProjectUsers };

      GridView1.DataSource = user;
      GridView1.DataBind();
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-14T05:35:40.537

但是匿名类型不能在 WCF 中序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:22:56.493

如果要返回完整的 Muser 对象，只需使用：

```
using (var db = new UsersDataContext())
        {
            IEnumerable<MUser> user = from u in db.MUsers
                                      where u.Id == 1
                                      select u;

            GridView1.DataSource = user;

            GridView1.DataBind();

        } 
```

或者，如果您想返回用户的自定义部分（即仅来自 Muser 对象的一些属性），您可以使用匿名类型，如下所示。

```
using (var db = new UsersDataContext())
        {
            IEnumerable<MUser> user = from u in db.MUsers
                                      where u.Id == 1
                                      select new  {Username = u.Username, Id = u.Id, Password=u.Password, ProjectUsers=u.ProjectUsers };

            GridView1.DataSource = user;

            GridView1.DataBind();

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-27T18:55:27.310

您不能在查询中构造实体类型。MS 认为开发人员太笨了，会混淆自己（除其他外）。一个快速、简单且低效的修复...

```
using (var db = new UsersDataContext())
        {
            IEnumerable<MUser> user = from u in db.MUsers.AsEnumerable()
                                      where u.Id == 1
                                      select new MUser {Username = u.Username, Id = u.Id, Password=u.Password, ProjectUsers=u.ProjectUsers };

            GridView1.DataSource = user;

            GridView1.DataBind();

        } 
```

我不建议将此用于产品环境，因为它会加载整个表格，但我已将其用于个人使用的内部应用程序。我建议创建一个重载模型。

# javascript - 如何使用所见即所得编辑器和 jquery 提交文本区域

> ID：919566
> 
> 赞同：1
> 
> 时间：2009-05-28T07:15:21.783
> 
> 标签：javascript, jquery

好的，因为我是个菜鸟，不知道 javascript 是如何工作的……我的想法是有缺陷的。我现在已经成功了一半。我已经采纳了发帖人的建议并设置了一个函数，然后在 html 表单标签中，我调用了它。这行得通。我认为我需要一个 id 选择器来触发 JQuery，但事实并非如此。对不起。我知道我根本没有任何意义，但请多多包涵，我正在努力。:)

现在我有了指向 javascript/jquery 脚本的表单。我现在需要修复 jquery。这是代码。

```
function doSave(){
  $(function() {
    $('.error').hide();
    $("#dfar").click(function() {
      $('.error').hide();

    var textArea = $('#dfarReport');
    if (textArea.val() == "") {
    alert('sd');
      textArea.show();
      textArea.focus();
    return false;
    } 
```

出于某种原因，即使我按下提交按钮并包含文本区域的 id 选择器，我也看不到警报。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T09:55:31.880

好的，我想你需要这个：

```
$(document).ready(function(){

    $("form").submit(function(){
        var textArea = $('#dfarReport');

        if (textArea.val() == "") {
            textArea.show();
            textArea.focus();
            return false;
        }
        else // you'll need to add the else and the return true
        {
            return true; 
        }
    });

}); 
```

当表单有效时，您需要返回 true。

更多信息：[http ://docs.jquery.com/Events/submit](http://docs.jquery.com/Events/submit)

但请确保您也验证了服务器上的数据！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T07:23:42.203

你可以通过

```
$('textarea') 
```

如果它是您页面上唯一的一个。

您只需要在包含 textarea 的表单上调用 submit

**编辑：**

阅读您的更新后，您只想在提交表单之前验证 textarea 不为空。您只需要设置验证

```
var textArea = $('#results'); //Get the textarea

if (textArea.val() == "") {
    textArea.show();
    textArea.focus();
return false;
}
// perform the form submit here as textarea is not blank 
```

你能把整个对象贴在你有代码开头的地方吗

```
 case "Save": 
```

从？使用该对象执行提交可能是个好主意。

**编辑2：**

关于您对正在刷新的页面的评论，提交表单会导致页面被发布。听起来您想使用 AJAX 发布数据。

看看jQuery的[`$.ajax()`](http://docs.jquery.com/Ajax/jQuery.ajax#options)命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T07:25:22.637

将按钮更改为

```
<script>
function doSave()
{
   // save data using jQuery
}
</script>
<input type="button" value="Save" onclick="doSave(); return false;"> 
```

或者

您可以使用以下方式更改表格

```
<form onsubmit="doSave(); return false;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T11:21:09.650

请发布您使用的代码。

你编辑了 3 倍，而且总是有不同的方法。

好的，如果你现在想使用你在第一篇文章中定义的代码，你必须这样做：

```
function doSave(){
  $(function() {
    $('.error').hide();
    $("#dfar").click(function() {
      $('.error').hide();

    var textArea = $('#dfarReport');
    if (textArea.val() == "") 
    {
      alert('sd');
      textArea.show();
      textArea.focus();
    return false;
    }
    else
    {
        return true;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T07:28:16.483

你可以做类似的事情

```
$(document).ready(function(){
    $("#submit_btn").click(function(){
        mySubmit($("#myForm")) ; // call your existing javascript submit routine
    });
}); 
```

或者，如果您愿意，

```
$(document).ready(function(){
    $("#myForm").submit(function(){
        mySubmit($("#myForm")) ; // call your existing javascript submit routine
    });
}); 
```

# linux - 糟糕：坏区域的内核访问，sig：11 - 'swapper' - 终止中断处理程序

> ID：919575
> 
> 赞同：5
> 
> 时间：2009-05-28T07:18:48.857
> 
> 标签：linux, linux-kernel, kernel, powerpc

在嵌入式 linux 环境中（PowerPC 上的自定义 2.4.25）我在几个小时后得到以下内核恐慌：

```
Oops: kernel access of bad area, sig: 11
NIP: C9471C7C XER: 20000000 LR: C0018C74 SP: C0198E20 REGS: c0198d70 TRAP: 0800    Not tainted
MSR: 00009030 EE: 1 PR: 0 FP: 0 ME: 1 IR/DR: 11
DEAR: C9876FFF, ESR: 00000000
TASK = c0197020[0] 'swapper' Last syscall: 120
last math 00000000 last altivec 00000000
PLB0: bear= 0x48041040 acr=   0x00000000 besr=  0x00000000
PLB0 to OPB: bear= 0x00cc1000 besr0= 0x00000000 besr1= 0x00000000

GPR00: 00000000 C0198E20 C0197020 00000000 C016E494 000000C2 C01D0000 00000000
GPR08: C98701F0 C9876FFF 00008000 C768AE0F 24004022 1001B120 07FC9500 00000000
GPR16: 00000001 00000001 FFFFFFFF 007FFE00 00001032 00198EE0 00000000 C0004780
GPR24: C01D2F68 C01E0000 C0170000 C0170000 C01B0000 C9473870 00000000 C9473864
Call backtrace:
00000001 C0018C74 C0018A1C C0005E14 C0004780 C0022724 C0005D4C
C0005D60 C0002430 C01AE5BC C0002328
Kernel panic: Aiee, killing interrupt handler!
In interrupt handler - not syncing
 <0>Rebooting in 1 seconds... 
```

猫 /proc/模块：

```
CustomModule1          10556   4
CustomModule2           5488   0
CustomModule3          10240   1
fuse                   35576   4
usb-storage            28468   0 (unused)
keybdev                 3076   0 (unused)
mousedev                6116   0 (unused)
hid                    17968   0 (unused)
input                   6192   0 [keybdev mouse 
```

ksyms -m：

```
Address   Symbol                 Defined by
c9471000  (11k)                  [CustomModule1]
c9471b74  functionA              [CustomModule1]
c947358c  functionB              [CustomModule1]
c9473580  functionC              [CustomModule1]
... 
```

我搜索了帮助，但我找不到有用的东西。A 还想“解码”回溯，但我不明白如何......地址与 System.map 中的地址不对应。谁能解释我如何找出错误？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-02T16:48:39.117

**NIP**是下一个指令指针或更一般的程序计数器（又名**PC**），并指示内核 oops'd 的位置。根据 ksyms 的输出，**NIP** ( `0xC9471C7C`) 的内容看起来在`functionA`. 您应该能够在`functionA`模块上使用 objdump -S 并找出在`functionA+0x108`.

链接寄存器 ( **LR** ) 保存当前函数的返回地址并指示`functionA`. 您可以在 System.map 文件中查找包含此地址的函数，也可以在 vmlinux 映像上使用 GNU binutils 程序 addr2line 来获取相同的信息。从那里，您应该能够更好地了解导致 oops 的原因。

有关 PPC 寄存器和组件的更多信息，请参见[此处](http://www.ibm.com/developerworks/library/l-ppc/)和[此处](http://www.ibm.com/developerworks/linux/library/l-powarch/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:24:19.130

此内核上是否有配置选项 CONFIG_KALLSYMS 可用？如果是这样，并且您可以重新编译内核，您应该会得到一个带有符号信息的 oops。

正如评论所指出的，linux 2.4 没有 kallsyms，因此您应该启用 frame_pointer 和 CONFIG_DEBUG。backtrace 和 system.map 应该是虚拟地址，并且匹配。它们可能不完全匹配，但您可以找到最接近的符号。

例如，在回溯输出中： `C0018C74 and C0018A1C`看起来像内核代码地址，但 C9xxxxxx 范围对我来说不像内核地址。它是内核模块可以链接的地方吗？

请在 system.map 的末尾张贴几行

编辑：从您的 ksyms 输出来看，您的自定义模块的 FunctionA 似乎出现了故障，因为`NIP C9471C7C`就在`c9471b74`and 之后：

*   NIP代表下一个指令指针
*   根据您的 ksyms 输出，c9471b74 是 FunctionA 的起始地址。

LR 是链接寄存器，即通常存储返回地址的寄存器。

# php - 如何更改php中的内容类型？

> ID：919584
> 
> 赞同：23
> 
> 时间：2009-05-28T07:23:16.023
> 
> 标签：php, http-headers, content-type

我有一个图像，但它保持不显示。我检查了图像属性（右键单击并选择属性），我发现“类型”是 text/html 而不是 JPEG 图像。这是因为导致我的图像不显示的类型吗？如何更改“类型”值？我正在使用 php...

我在一个简单的 html [img] 标签中显示图像......

编辑：

是的，我试过了..如果我包括

```
<?php header('Content-Type:image/jpeg'); ?> 
```

它显示网址，很奇怪吧？？

我正在使用 apache，图像是由 php 代码生成的...

```
<img src="<?php echo bloginfo('template_url'); ?>/thumb.php?src=<?php echo get_post_meta($post->ID, "image", $single = true); ?>&amp;h=195&amp;w=540&amp;zc=1&amp;q=95" alt="<?php the_title(); ?> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-28T07:27:54.097

```
header('Content-Type: image/jpeg'); 
```

确保在执行任何输出之前调用 header() 函数，否则您将收到“标头已发送”错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T07:28:23.300

听起来图像是由某种服务器端脚本生成的。如果它是由您有权访问的 PHP 脚本生成的，只需包含对 的调用`header()`，如下所示：

```
header('Content-Type: image/jpeg'); 
```

确保`header()`在输出*任何内容*之前调用——即使是意外输出的空行或杂散空间也会导致`header()`失败（通常最好将调用放在`header()`脚本的开头）。

我认为，如果您无权访问生成图像的脚本，那么您就不走运了。

# actionscript-3 - 当对象在 Flash 中具有焦点时，如何去除黄色边框？

> ID：919588
> 
> 赞同：8
> 
> 时间：2009-05-28T07:24:18.737
> 
> 标签：actionscript-3, focusrect

如何在 as3 中删除黄色边框 - focusRect - 我试过 Stage.focusRect = false 但这不起作用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-28T07:30:01.907

```
stage.stageFocusRect = false; 
```

更多信息：[Rockabit 博文](http://www.rockabit.com/2008/10/10/removing-ugly-yellow-focusrect-in-flex/)

:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-09-30T15:57:29.617

尝试：

```
focusRect = false; 
```

在你的类的构造函数中。为我工作:-)

来自文档：**flash.display.InteractiveObject.focusRect(focusRect:Object):void**

指定此对象是否显示焦点矩形。它可以采用以下三个值之一：*true*、*false*或*null*。true 和 false 的值按预期工作，指定焦点矩形是否出现。值为 null 表示此对象遵循舞台的 stageFocusRect 属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T10:54:12.557

我在制作游戏时遇到了同样的问题。我想通过键入以下内容专注于我的主要课程：

```
stage.focus = this; 
```

但出现了一个黄色矩形。

然后我输入：

```
stage.focus = this;
this.focusRect = false; 
```

但这一次，出现的不是黄色矩形，而是一条黄线。

然后我输入：

```
this.focusRect = false;
stage.focus = this; 
```

而这一次它奏效了。没有出现黄色矩形或线条。所以，我意识到*有时顺序确实很重要*。

如果您正在使用类，只需导入：

```
import flash.display.Stage; 
```

# iphone - 每次调用委托函数时，如何使文本字段分配？

> ID：919597
> 
> 赞同：0
> 
> 时间：2009-05-28T07:26:05.550
> 
> 标签：iphone

我正在使用这样的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tv {
    return 3;
}

- (NSInteger)tableView:(UITableView *)tv numberOfRowsInSection:(NSInteger)section {
    if(section==2)
        return 20;
    else
        return 1;

}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    //if (cell == nil)
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"MyIdentifier"]autorelease];

    // Configure the cell
    switch (indexPath.section) {
        case 0:
        {
            textField=[[[UITextField alloc]initWithFrame:CGRectMake(5, 10, 290, 70)]autorelease];
            textField.delegate=self;
            textField.keyboardType=UIKeyboardTypeURL;
            textField.autocorrectionType=YES;
            textField.textColor=[UIColor blackColor];
            textField.placeholder=@"Enter feed url";
            [cell.contentView addSubview:textField];
            break;
        }
        case 1:
        {
            textField1=[[[UITextField alloc]initWithFrame:CGRectMake(5, 10, 290, 70)]autorelease];
            textField1.delegate=self;
            textField1.keyboardType=UIKeyboardTypeURL;
            textField1.textColor=[UIColor blackColor];
            textField1.autocorrectionType=YES;
            textField1.placeholder=@"Enter starting url";
            [cell.contentView addSubview:textField1];
            break;
        }
        case 2:
        {
            cell.text=[[PopeularSiteArray objectAtIndex:indexPath.row]objectForKey:@"Title"];
            break;
        }
        default :
            break;

    }
    return cell;
} 
```

当我滚动我的表格视图时，每次调用委托函数时都应该分配文本字段...我更改了该代码，例如当文本字段什么都不是时，它只会被创建，但那时它在文本字段中显示垃圾值。

我可以在这里使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-04-24T19:03:12.603

您应该始终保留对添加到 UITableView 单元格的控件的引用：UITextFiled、UISwitch 等。通过这种方式，您可以与控件交互以及更轻松地获取/设置值。否则，您必须使用 cellForRowAtIndexPath 找到正确的单元格并尝试获取子控件。

要解决您的问题：

1.  添加 textFieldFeedURL 和 textFieldStartingURL 作为类成员（在您的 .h 文件中）。
2.  在 viewDidLoad 或 cellForRowAtIndexPath 中分配 ONCE 这些成员

    ```
    if (textFieldFeedURL != nil) {
    textFieldFeedURL = [[UITextField alloc] initWithFrame:CGRectMake(5, 10, 290, 70)];
    }
    ```

3.  使用 addSubView 将文本字段添加到 cellForRowAtIndexPath 中的单元格。
4.  释放 dealloc 中的文本字段。

如果你的应用有几十个控件，你可以在 NSMutableArray 中保留一个引用。

我希望我能很好地理解你的问题。祝你好运！

# .net - 犀牛模拟南特错误

> ID：919605
> 
> 赞同：0
> 
> 时间：2009-05-28T07:28:23.473
> 
> 标签：.net, nunit, nant, rhino-mocks

我正在尝试使用 .net 2.0（客户端要求：p）创建一个小应用程序，并且我添加了对 Rhino Mocks dll 文件的引用，然后使用 VS2008 编译它，一切都很好。

但是当我在项目上运行 ant 时，出现以下错误：

[nunit2] SetUp/TearDown 失败：[nunit2] 1) DocGen.Test.TestDocumentConfigurator：无法加载文件或程序集“Rhino.Mocks，版本=3.1.0.584，Culture=neutral，PublicKeyToken=0b3305902db7183f”或其依赖项之一。该系统找不到指定的文件。[nunit2] 在 DocGen.Test.TestDocumentConfigurator..ctor()

这是我的目标：

我的解决方案是这样的：

```
Solution-
  DocGen.Test (test project, contains a reference to the DLL)
  DocGenerator (main app, which has the DLL in its \lib directory) 
```

我真的不知道那告诉我什么......它建立在VS2008中，但不是在nant中。为什么会这样？

PS 当我运行 Nunit 的 GUI 版本时，我也会收到此错误...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T22:47:05.537

我只是对此有一个想法，可能是我没有将 rhino mocks DLL 复制到 DocGen.Test 项目构建到的构建目录中，我试试看，希望今晚，然后报告。

# jsp - JSP转PDF

> ID：919607
> 
> 赞同：2
> 
> 时间：2009-05-28T07:28:46.140
> 
> 标签：jsp, pdf

我正面临 JSP 到 PDF 转换的问题。在这里，我正在开发一个 Web 应用程序，其中有一个功能***SAVE AS PDF***。当我们单击该按钮或链接时，我想将 JSP 页面转换为 PDF 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T07:35:22.693

看看[iText](http://www.lowagie.com/iText/)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T09:58:14.557

或者，如果您的数据是 XML，则使用 XSL-FO 生成 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T13:34:39.597

或使用[JasperReports](http://jasperforge.org/plugins/project/project_home.php?group_id=102)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T19:42:26.447

有可用的 PDF 驱动程序可用于提供此功能。 [PDF995](http://www.pdf995.com/)是我想到的。

# jquery - 使用事件冒泡跨越 Anchor

> ID：919609
> 
> 赞同：9
> 
> 时间：2009-05-28T07:29:46.917
> 
> 标签：jquery, onclick, event-bubbling

我有这样一段html：

```
<li class="addToFriends"><a href="....">Something something<span>INSIDE SPAN</span>something</a></li> 
```

为了在单击锚点时处理 AJAX 请求，我在单击事件上注册了处理程序：

```
 $('.addToFriends a').click(function(event){
    var target = $(event.target);
    if (target.is('a')) {
              // if I click on SPAN element following fragment won't execute!

      // do ajax request
    }       
    event.preventDefault();
}); 
```

我的问题是：

*   为什么会为 span 元素引发 click 事件？毕竟，我没有将点击事件绑定到 SPAN 元素
*   除了前面的问题，我认为如果我不处理 SPAN 点击事件，浏览器将使用事件冒泡来为锚点引发点击事件（如果我不调用 event.stopPropagation()）。但我也没有为我工作，因为点击事件只引发了一次

所以现在，我解决了这个问题，我的解决方案是：

```
 $('.addToFriends a').click(function(event){
    var target = $(event.target);
    if (!target.is('a')) {
      target = target.parent('a')
    } 
            ...
}); 
```

但是，我仍然很好奇它为什么会这样工作......

谢谢，

帕维尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-28T07:38:44.060

您必须使用活动的 currentTarget。

```
$('.addToFriends a').click(function(event){
     event.currentTarget;    
     ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T07:43:52.910

好的，但是如果我单击 SPAN 并调用 stopPropagation() 方法，我的该表单中的代码将不起作用：

```
$('.addToFriends a').click(function(event){
    var target = $(event.target);
    if (target.is('a')) {
       // do ajax request
       event.stopPropagation();               
       event.preventDefault();
    } 
```

});

尽管如此，我还是错过了一些与事件冒泡相关的关键点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T07:54:21.110

您可以随时阅读[规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html)。[这里](http://www.howtocreate.co.uk/tutorials/javascript/domevents)也提供了一个不错的教程。

只有为 SPAN 和 A 元素定义了单击事件处理程序时，StopPropagation 才有意义。在 SPAN 事件处理程序中调用 stopPropagation 将阻止调用 A 处理程序。这假定了默认的冒泡阶段。

# sql-server - 发现嫌疑人

> ID：919610
> 
> 赞同：1
> 
> 时间：2009-05-28T07:29:48.243
> 
> 标签：sql-server, database

如何使用脚本或程序检测 SQL server2000 中的可疑数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T07:58:59.150

master.dbo.sysdatabases 中的状态列将设置可疑位，即数据库的 256。在这种情况下，这将返回一个结果：

```
select  * from sysdatabases where status&256 = 256 
```

# algorithm - 以独特且确定的方式将两个整数映射为一个

> ID：919612
> 
> 赞同：272
> 
> 时间：2009-05-28T07:30:10.440
> 
> 标签：algorithm, mapping, integer, deterministic, math

想象两个正整数 A 和 B。我想将这两个组合成一个整数 C。

不能有其他整数 D 和 E 与 C 结合。因此将它们与加法运算符结合是行不通的。例如 30 + 10 = 40 = 40 + 0 = 39 + 1 串联也不起作用。例如“31”+“2”=312=“3”+“12”

这种组合操作也应该是确定性的（总是用相同的输入产生相同的结果）*并且*应该总是在整数的正侧或负侧产生一个整数。

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-12-14T01:30:09.857

[考虑到它的简单、快速和节省空间，康托尔配对功能确实是目前最好的功能之一，但是](http://en.wikipedia.org/wiki/Cantor_pairing_function)[Matthew Szudzik](http://szudzik.com/ElegantPairing.pdf)在 Wolfram 上发表了更好的东西，这里。`2N`Cantor 配对函数的限制（相对）是，如果输入是两位整数，则编码结果的范围并不总是保持在位整数的范围内`N`。也就是说，如果我的输入是`16`从 范围内的两位整数`0 to 2^16 -1`，则`2^16 * (2^16 -1)`可能存在输入组合，因此根据明显的[鸽洞原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，我们需要一个大小至少为 的输出`2^16 * (2^16 -1)`，它等于`2^32 - 2^16`，或者换句话说，一个`32`理想情况下，位数应该是可行的。这在编程世界中可能没有什么实际意义。

*康托尔配对功能*：

```
(a + b) * (a + b + 1) / 2 + a; where a, b >= 0 
```

> 两个最大最多 16 位整数（65535、65535）的映射将是 8589803520，如您所见，它不适合 32 位。

输入*Szudzik 的函数*：

```
a >= b ? a * a + a + b : a + b * b;  where a, b >= 0 
```

> (65535, 65535) 的映射现在将是 4294967295，如您所见，它是一个 32 位（0 到 2^32 -1）整数。这是这个解决方案的理想之处，它只是利用了该空间中的每一个点，因此没有什么能比空间效率更高。

* * *

现在考虑到我们通常处理语言/框架中各种大小的数字的有符号实现这一事实，让我们考虑`signed 16`位整数范围从`-(2^15) to 2^15 -1`（稍后我们将看到如何将输出扩展到跨越有符号范围）。因为`a`并且`b`必须是正数，它们的范围从`0 to 2^15 - 1`.

*康托尔配对功能*：

> 两个最大最多 16 位有符号整数（32767、32767）的映射将是 2147418112，它刚好低于有符号 32 位整数的最大值。

现在*Szudzik 的功能*：

> (32767, 32767) => 1073741823，小得多..

让我们考虑负整数。这超出了我所知道的原始问题，但只是详细说明以帮助未来的访客。

*康托尔配对功能*：

```
A = a >= 0 ? 2 * a : -2 * a - 1;
B = b >= 0 ? 2 * b : -2 * b - 1;
(A + B) * (A + B + 1) / 2 + A; 
```

> (-32768, -32768) => 8589803520，即 Int64。16 位输入的 64 位输出可能是如此不可原谅！

*Szudzik的作用*：

```
A = a >= 0 ? 2 * a : -2 * a - 1;
B = b >= 0 ? 2 * b : -2 * b - 1;
A >= B ? A * A + A + B : A + B * B; 
```

> (-32768, -32768) => 4294967295 对于无符号范围是 32 位，对于有符号范围是 64 位，但仍然更好。

现在所有这一切，而输出一直是积极的。在有符号的世界中，**如果我们可以将一半的输出转移到负轴上，将会更加节省空间**。您可以为 Szudzik 这样做：

```
A = a >= 0 ? 2 * a : -2 * a - 1;
B = b >= 0 ? 2 * b : -2 * b - 1;
C = (A >= B ? A * A + A + B : A + B * B) / 2;
a < 0 && b < 0 || a >= 0 && b >= 0 ? C : -C - 1;

(-32768, 32767) => -2147483648

(32767, -32768) => -2147450880

(0, 0) => 0 

(32767, 32767) => 2147418112

(-32768, -32768) => 2147483647 
```

我做什么：在`2`对输入应用权重并通过函数后，我将输出除以 2，并通过乘以将其中的一些带到负轴`-1`。

查看结果，对于有符号位数范围内的任何输入`16`，输出都在有符号`32`位整数的范围内，这很酷。我不确定如何对 Cantor 配对功能采用相同的方式，但没有尝试过，因为它的效率不高。**此外，康托尔配对函数涉及的计算越多，也意味着它的速度越慢**。

这是一个 C# 实现。

```
public static long PerfectlyHashThem(int a, int b)
{
    var A = (ulong)(a >= 0 ? 2 * (long)a : -2 * (long)a - 1);
    var B = (ulong)(b >= 0 ? 2 * (long)b : -2 * (long)b - 1);
    var C = (long)((A >= B ? A * A + A + B : A + B * B) / 2);
    return a < 0 && b < 0 || a >= 0 && b >= 0 ? C : -C - 1;
}

public static int PerfectlyHashThem(short a, short b)
{
    var A = (uint)(a >= 0 ? 2 * a : -2 * a - 1);
    var B = (uint)(b >= 0 ? 2 * b : -2 * b - 1);
    var C = (int)((A >= B ? A * A + A + B : A + B * B) / 2);
    return a < 0 && b < 0 || a >= 0 && b >= 0 ? C : -C - 1;
} 
```

由于中间计算可能超出有`2N`符号整数的限制，因此我使用`4N`了整数类型（最后一次除以`2`将结果返回到`2N`）。

我在替代解决方案中提供的链接很好地描绘了利用空间中每个点的函数图。*令人惊奇的是，您可以将一对坐标唯一地可逆地编码为单个数字！数字的魔法世界！！*

* * *

## 回答 #2

> 赞同：252
> 
> 时间：2009-05-28T07:43:19.603

您正在寻找双射`NxN -> N`映射。这些用于例如[*接合*](http://en.wikipedia.org/wiki/Dovetailing_(computer_science))。查看[此 PDF](http://www.lsi.upc.es/~alvarez/calculabilitat/enumerabilitat.pdf)以了解所谓的*配对功能*。维基百科介绍了一个特定的配对函数，即[康托尔配对函数](http://en.wikipedia.org/wiki/Cantor_pairing_function)：

![pi(k1, k2) = 1/2(k1 + k2)(k1 + k2 + 1) + k2](https://i.stack.imgur.com/qVx9d.gif)

三个备注：

*   正如其他人已经明确指出的那样，如果您打算实现配对功能，您可能很快就会发现您需要任意大的整数（bignums）。
*   如果您不想区分对 (a, b) 和 (b, a)，则在应用配对函数之前对 a 和 b 进行排序。
*   其实我撒谎了。您正在寻找双射`ZxZ -> N`映射。康托尔函数仅适用于非负数。然而，这不是问题，因为定义双射很容易`f : Z -> N`，如下所示：
    *   *f(n) = n * 2*如果 n >= 0
    *   *f(n) = -n * 2 - 1*如果 n < 0

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2009-05-28T07:34:21.323

如果 A 和 B 可以用 2 个字节表示，则可以将它们组合在 4 个字节上。将 A 放在最重要的一半上，将 B 放在最不重要的一半上。

在 C 语言中，这给出（假设 sizeof(short)=2 和 sizeof(int)=4）：

```
int combine(short A, short B)
{
    return A<<16 | B;
}

short getA(int C)
{
    return C>>16;
}

short getB(int C)
{
    return C & 0xFFFF;
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-28T07:45:20.160

这甚至可能吗？
您正在组合两个整数。它们的范围都在 -2,147,483,648 到 2,147,483,647 之间，但您只会选择正数。这使得 2147483647^2 = 4,61169E+18 组合。由于每个组合都必须是唯一的并且结果是一个整数，因此您需要某种可以包含这么多数字的神奇整数。

还是我的逻辑有问题？

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-05-28T07:34:53.957

让数字`a`成为第一个，`b`第二个。令`p`为`a+1`-th 素数，`q`为`b+1`-th 素数

然后，结果是`pq`，如果`a<b,`或`2pq`如果`a>b`。如果`a=b`，顺其自然`p^2`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-05-28T07:36:02.987

正整数的标准数学方法是使用素数分解的唯一性。

```
f( x, y ) -> 2^x * 3^y 
```

缺点是图像往往跨越相当大的整数范围，因此在计算机算法中表达映射时，您可能会在为结果选择合适的类型时遇到问题。

您可以修改它以处理负数`x`，并`y`通过对具有 5 和 7 项幂的标志进行编码。

例如

```
f( x, y ) -> 2^|x| * 3^|y| * 5^(x<0) * 7^(y<0) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-02-01T15:27:30.950

尽管 Stephan202 的答案是唯一真正通用的答案，但对于有界范围内的整数，您可以做得更好。例如，如果您的范围是 0..10,000，那么您可以执行以下操作：

```
#define RANGE_MIN 0
#define RANGE_MAX 10000

unsigned int merge(unsigned int x, unsigned int y)
{
    return (x * (RANGE_MAX - RANGE_MIN + 1)) + y;
}

void split(unsigned int v, unsigned int &x, unsigned int &y)
{
    x = RANGE_MIN + (v / (RANGE_MAX - RANGE_MIN + 1));
    y = RANGE_MIN + (v % (RANGE_MAX - RANGE_MIN + 1));
} 
```

结果可以容纳在一个整数范围内，直到整数类型的基数的平方根。这比 Stephan202 的更通用方法更有效地打包。解码也相当简单；对于初学者来说，不需要平方根:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-05-28T09:24:47.963

`f(a, b) = s(a+b) + a`， 在哪里`s(n) = n*(n+1)/2`

*   这是一个函数——它是确定性的。
*   它也是单射的—— f 为不同的 (a,b) 对映射不同的值。您可以使用以下事实证明这一点：`s(a+b+1)-s(a+b) = a+b+1 < a`.
*   它返回的值非常小——如果您打算将它用于数组索引，那就太好了，因为数组不必很大。
*   它是缓存友好的——如果两个 (a, b) 对彼此靠近，则 f 将数字映射到彼此靠近的它们（与其他方法相比）。

我不明白你的意思：

> 应该总是在整数的正侧或负侧产生一个整数

我如何在这个论坛上写（大于），（小于）字符？

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-28T09:28:41.013

检查这个：[http](http://en.wikipedia.org/wiki/Pigeonhole_principle) ://en.wikipedia.org/wiki/Pigeonhole_principle 。如果 A、B 和 C 是同一类型，则无法完成。如果 A 和 B 是 16 位整数，而 C 是 32 位，那么您可以简单地使用移位。

散列算法的本质是它们不能为每个不同的输入提供唯一的散列。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-29T01:53:03.570

构建映射并不难：

```
   1 2 3 4 5 使用此映射 if (a,b) != (b,a)
1 0 1 3 6 10
2 2 4 7 11 16
3 5 8 12 17 23
4 9 13 18 24 31
5 14 19 25 32 40

   1 2 3 4 5 使用这个映射 if (a,b) == (b,a) (mirror)
1 0 1 2 4 6
2 1 3 5 7 10
3 2 5 8 11 14
4 4 8 11 15 19
5 6 10 14 19 24

    0 1 -1 2 -2 如果您需要负/正，请使用它
 0 0 1 2 4 6
 1 1 3 5 7 10
-1 2 5 8 11 14
 2 4 8 11 15 19
-2 6 10 14 19 24

```

弄清楚如何获得任意 a,b 的值有点困难。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-03-10T07:00:51.233

对于作为参数的正整数并且参数顺序无关紧要：

1.  这是一个[无序配对函数](http://www.mattdipasquale.com/blog/2014/03/09/unique-unordered-pairing-function/)：

    ```
    <x, y> = x * y + trunc((|x - y| - 1)^2 / 4) = <y, x> 
    ```

2.  对于 x ≠ y，这是一个[独特的无序配对函数](http://www.mattdipasquale.com/blog/2014/03/09/unique-unordered-pairing-function/)：

    ```
    <x, y> = if x < y:
               x * (y - 1) + trunc((y - x - 2)^2 / 4)
             if x > y:
               (x - 1) * y + trunc((x - y - 2)^2 / 4)
           = <y, x> 
    ```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-02-19T22:17:05.610

这是基于@nawfal 给出的方法将@DoctorJ 的代码扩展到无界整数。它可以编码和解码。它适用于普通数组和 numpy 数组。

```
#!/usr/bin/env python
from numbers import Integral    

def tuple_to_int(tup):
    """:Return: the unique non-negative integer encoding of a tuple of non-negative integers."""
    if len(tup) == 0:  # normally do if not tup, but doesn't work with np
        raise ValueError('Cannot encode empty tuple')
    if len(tup) == 1:
        x = tup[0]
        if not isinstance(x, Integral):
            raise ValueError('Can only encode integers')
        return x
    elif len(tup) == 2:
        # print("len=2")
        x, y = tuple_to_int(tup[0:1]), tuple_to_int(tup[1:2])  # Just to validate x and y

        X = 2 * x if x >= 0 else -2 * x - 1  # map x to positive integers
        Y = 2 * y if y >= 0 else -2 * y - 1  # map y to positive integers
        Z = (X * X + X + Y) if X >= Y else (X + Y * Y)  # encode

        # Map evens onto positives
        if (x >= 0 and y >= 0):
            return Z // 2
        elif (x < 0 and y >= 0 and X >= Y):
            return Z // 2
        elif (x < 0 and y < 0 and X < Y):
            return Z // 2
        # Map odds onto negative
        else:
            return (-Z - 1) // 2
    else:
        return tuple_to_int((tuple_to_int(tup[:2]),) + tuple(tup[2:]))  # ***speed up tuple(tup[2:])?***

def int_to_tuple(num, size=2):
    """:Return: the unique tuple of length `size` that encodes to `num`."""
    if not isinstance(num, Integral):
        raise ValueError('Can only encode integers (got {})'.format(num))
    if not isinstance(size, Integral) or size < 1:
        raise ValueError('Tuple is the wrong size ({})'.format(size))
    if size == 1:
        return (num,)
    elif size == 2:

        # Mapping onto positive integers
        Z = -2 * num - 1 if num < 0 else 2 * num

        # Reversing Pairing
        s = isqrt(Z)
        if Z - s * s < s:
            X, Y = Z - s * s, s
        else:
            X, Y = s, Z - s * s - s

        # Undoing mappint to positive integers
        x = (X + 1) // -2 if X % 2 else X // 2  # True if X not divisible by 2
        y = (Y + 1) // -2 if Y % 2 else Y // 2  # True if Y not divisible by 2

        return x, y

    else:
        x, y = int_to_tuple(num, 2)
        return int_to_tuple(x, size - 1) + (y,)

def isqrt(n):
    """":Return: the largest integer x for which x * x does not exceed n."""
    # Newton's method, via http://stackoverflow.com/a/15391420
    x = n
    y = (x + 1) // 2
    while y < x:
        x = y
        y = (x + n // x) // 2
    return x 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-04-11T20:38:14.030

更简单的事情怎么样：给定两个数字，A 和 B 让 str 成为连接：'A' + ';' +'B'。然后让输出为 hash(str)。我知道这不是一个数学答案，但是一个简单的 python（它有一个内置的哈希函数）脚本应该可以完成这项工作。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-11-15T06:24:09.753

让我们有两个数字 B 和 C ，将它们编码为单个数字 A

A = B + C * N

在哪里

B=A % N = B

C=A / N = C

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-28T07:48:25.180

你的建议是不可能的。你总会有碰撞。

为了将两个对象映射到另一个单独的集合，映射的集合必须具有预期组合数的最小大小：

假设一个 32 位整数，你有 2147483647 个正整数。选择其中两个顺序无关紧要且重复产生 2305843008139952128 组合。这不太适合 32 位整数集。

但是，您可以将此映射设置为 61 位。使用 64 位整数可能是最简单的。将高字设置为较小的整数，将低字设置为较大的整数。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-08-23T16:42:27.657

假设你有一个 32 位整数，为什么不把 A 移到前 16 位的一半，把 B 移到另一个？

```
def vec_pack(vec):
    return vec[0] + vec[1] * 65536;

def vec_unpack(number):
    return [number % 65536, number // 65536]; 
```

除了尽可能节省空间且计算成本低之外，一个非常酷的副作用是您可以对压缩数进行矢量数学运算。

```
a = vec_pack([2,4])
b = vec_pack([1,2])

print(vec_unpack(a+b)) # [3, 6] Vector addition
print(vec_unpack(a-b)) # [1, 2] Vector subtraction
print(vec_unpack(a*2)) # [4, 8] Scalar multiplication 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-11T11:04:48.763

给定正整数 A 和 B，令 D = A 的位数，E = B 的位数 结果可以是 D、0、E、0、A 和 B 的串联。

示例：A = 300, B = 12\. D = 3, E=2 结果 = 302030012。这利用了唯一以 0 开头的数字是 0 的事实，

优点：易于编码，易于解码，人类可读，可以首先比较有效数字，无需计算即可进行比较，简单的错误检查。

缺点：结果的大小是一个问题。但这没关系，我们为什么要在计算机中存储无限整数。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-03-02T12:10:53.893

如果您想要更多控制，例如为第一个数字分配 X 位，为第二个数字分配 Y 位，您可以使用以下代码：

```
class NumsCombiner
{

    int num_a_bits_size;
    int num_b_bits_size;

    int BitsExtract(int number, int k, int p)
    {
        return (((1 << k) - 1) & (number >> (p - 1)));
    }

public:
    NumsCombiner(int num_a_bits_size, int num_b_bits_size)
    {
        this->num_a_bits_size = num_a_bits_size;
        this->num_b_bits_size = num_b_bits_size;
    }

    int StoreAB(int num_a, int num_b)
    {
        return (num_b << num_a_bits_size) | num_a;
    }

    int GetNumA(int bnum)
    {
        return BitsExtract(bnum, num_a_bits_size, 1);
    }

    int GetNumB(int bnum)
    {
        return BitsExtract(bnum, num_b_bits_size, num_a_bits_size + 1);
    }
}; 
```

我总共使用 32 位。这里的想法是，例如，如果您希望第一个数字最多为 10 位，第二个数字最多为 12 位，您可以这样做：

```
NumsCombiner nums_mapper(10/*bits for first number*/, 12/*bits for second number*/); 
```

现在您可以存储`num_a`最大数量`2^10 - 1 = 1023`和 的`num_b`最大值`2^12 - 1 = 4095`。

设置 num A 和 num B 的值：

```
int bnum = nums_mapper.StoreAB(10/*value for a*/, 12 /*value from b*/); 
```

现在`bnum`是所有位（总共 32 位。您可以修改代码以使用 64 位）要获得 num a：

```
int a = nums_mapper.GetNumA(bnum); 
```

要获得数字 b：

```
int b = nums_mapper.GetNumB(bnum); 
```

编辑： `bnum`可以存储在类内。我没有这样做，因为我自己的需要我分享了代码并希望它会有所帮助。

感谢来源： [https](https://www.geeksforgeeks.org/extract-k-bits-given-position-number/) ://www.geeksforgeeks.org/extract-k-bits-given-position-number/ 用于提取位的功能，也感谢`mouviciel`在这篇文章中回答。使用这些资源我可以找出更高级的解决方案

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-15T18:00:18.947

我们可以在 O(1) 空间和 O(N) 时间内将两个数字编码为一个。假设您要将 0-9 范围内的数字编码为 1，例如。5和6.怎么做？简单的，

```
 5*10 + 6 = 56\. 

    5 can be obtained by doing 56/10 
    6 can be obtained by doing 56%10. 
```

即使对于两位整数，比如说 56 和 45，56*100 + 45 = 5645。我们可以通过执行 5645/100 和 5645%100 再次获得单个数字

但是对于大小为 n 的数组，例如。a = {4,0,2,1,3}，假设我们要编码 3 和 4，所以：

```
 3 * 5 + 4 = 19               OR         3 + 5 * 4 = 23
 3 :- 19 / 5 = 3                         3 :- 23 % 5 = 3
 4 :- 19 % 5 = 4                         4 :- 23 / 5 = 4 
```

概括后，我们得到

```
 x * n + y     OR       x + n * y 
```

但我们也需要照顾我们改变的价值；所以它最终成为

```
 (x%n)*n + y  OR x + n*(y%n) 
```

您可以通过除法并找到结果数字的 mod 来单独获得每个数字。

# eclipse - Eclipse 不再突出显示引用

> ID：919614
> 
> 赞同：325
> 
> 时间：2009-05-28T07:30:42.313
> 
> 标签：eclipse

我有一个奇怪的问题。在 Eclipse Ganymede 中，我曾经能够突出显示一个变量，它会突出显示该方法中该变量的使用。但是，通过一些操作，我现在禁用了它。有没有办法可以启用它？

我尝试搜索谷歌，但由于我不知道该功能叫什么，它有点难。

它是一个非常有用的功能，但令人讨厌的是它不起作用。

* * *

## 回答 #1

> 赞同：622
> 
> 时间：2009-05-28T07:42:30.837

工具栏上有一个小“荧光笔”图标 - 它切换“标记出现次数”。

在首选项窗口中，您所指的功能通过导航到以下位置进行配置：

**窗口**->**首选项**-> **Java** ->**编辑器**->**标记出现次数**

![截屏](https://i.stack.imgur.com/Ysfo3.png)

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2009-05-28T14:14:56.553

工具栏上有一个小“荧光笔”图标 - 它切换“标记出现次数”。

您可能在尝试选择某个菜单项时不小心按下了它。我有一个朋友用“仅显示所选元素”工具栏按钮来做到这一点......

您可以再次按下它，也可以按照 Rytmis 的说明进行配置。

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2009-05-28T14:24:47.767

按`alt`- `shift`- `O`。

它切换了 Eclipse 的“标记事件”特性；它提供了您缺少的突出显示功能。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-05-28T07:11:10.693

*   在**Eclipse Kepler**中，
    您可以简单地使用工具栏上的“ **Toggle Mark Occurrences** ”图标，也可以使用键盘快捷键`alt`++ 。`shift``O`

    ![在此处输入图像描述](https://i.stack.imgur.com/vY3bp.jpg)

*   **`Window > Preferences > Java > Editor > Mark Occurrences`**. 启用“**标记当前文件中选定元素的出现**”并单击`Apply`。

    ![在此处输入图像描述](https://i.stack.imgur.com/cNg9L.jpg)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-06-13T11:46:35.800

在 Mac OS 上`opt`- `cmd`-`O`我按错了一次，多亏了这个问题，我找到了回去的路

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-07-14T19:30:27.497

我也有这个，我的 Mark Occurrence 选项已经全部检查过了。与往常一样，尝试重新启动 Eclipse，它对我有用。

编辑：它实际上有点工作。Eclipse 上有一个错误，当您在新窗口中打开一个项目时（如果您的第一个 Eclipse 窗口中满是项目），它开始无法工作。如果需要，您可以选择一个项目并在工具栏中切换荧光笔或使用 Alt+Shift+O，但每次选择一个项目时都必须这样做。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-02-08T18:23:33.067

此外，您必须转到 General->Editors->Text Editors->Annotations，选择 Occurrences 并检查“Text as”并选择 Highlighted。这会让你开心。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-10T06:24:11.803

这可能是“标记出现”被关闭的方式......我使用Ctrl + Shift + O来组织导入并且错误地选择了Alt而不是Ctrl。所以可以通过Alt+Shift+O再次开启。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-05T10:51:22.743

我有一个类似的问题。我通过卸载名为“erlide”的erlang插件解决了这个问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-12-13T08:58:40.903

我有类似的问题没有突出显示引用，启用标记出现在`windows-prefrences-java-editor`我能够突出显示引用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-31T12:38:02.243

对我来说，它不再起作用了，因为代码中有错误。它通常有效，但有时可能无效，如果没有其他方法，请确保您的代码没有错误。

# c# - 获取路由的链接 - Asp.net MVC

> ID：919617
> 
> 赞同：6
> 
> 时间：2009-05-28T07:31:52.717
> 
> 标签：c#, asp.net-mvc

我只想获得一条路线的链接。使用 Html.ActionLink 和 Html.RouteLink 在锚标记中返回链接。有什么方法可以让我只获得链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T07:54:28.067

使用[Url.Action](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action.aspx)和[Url.RouteUrl](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.routeurl.aspx)方法。

# 3d - 相当于 Visio 的 3D

> ID：919618
> 
> 赞同：1
> 
> 时间：2009-05-28T07:31:59.767
> 
> 标签：3d, visualization

任何人都推荐一个工具。允许将事物放入 3D 空间然后以各种方式链接的商业或免费软件。这个结构可以被旋转，飞过等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T07:40:24.057

Visio 有一个插件，称为[3D Visioner](http://samposoftware.com/3dvisioner)。它是商业广告，我自己也没有使用过，但有免费试用版，所以可能值得一试。

[替代文字 http://samposoftware.com/wp-content/uploads/2013/01/screen13.png](http://samposoftware.com/wp-content/uploads/2013/01/screen13.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T07:35:06.967

[Google SketchUp](http://sketchup.google.com/)有免费版和付费版。

# javascript - 自动完成的最佳查询延迟

> ID：919630
> 
> 赞同：7
> 
> 时间：2009-05-28T07:34:09.747
> 
> 标签：javascript, autocomplete, yui

在[yui AutoComplete](http://developer.yahoo.com/yui/autocomplete)或类似的情况下，您使用多少毫秒作为[查询延迟](http://developer.yahoo.com/yui/autocomplete/#delay)（最后一个键输入和对服务器的请求之间的时间）？

[我最近使用Keystroke-Level Model](http://en.wikipedia.org/wiki/KLM_(human_computer_interaction))作为参考，将类似于 yui 的自动完成控制的默认值从 750 毫秒更改为 280 毫秒。

还有其他有用的参考资料吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T17:32:36.920

我认为这真的取决于你的目的。在我的场景中，如果他们确切地知道他们想要什么，我希望他们不会被打扰。如果他们犹豫不决，帮助就在那里。为此，我使用了 0.3 或 0.5。

如果您想通过建议完成来让他们的生活更轻松，您可以像 Google 一样将其设置为 0。

# c# - 如何使用 C# 从 XML 文件中删除节点

> ID：919645
> 
> 赞同：24
> 
> 时间：2009-05-28T07:38:08.727
> 
> 标签：c#, xml

> **可能重复：**
> [如何从 XmlNodeList 中删除 XmlNode](https://stackoverflow.com/questions/875136/how-to-remove-an-xmlnode-from-xmlnodelist)

嗨，我如何从 XML 文件中删除一组节点。？这是一个代码片段。

```
string path = @"C:\Documents and Settings\e454935\Desktop\NUnitSettings.xml";
FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
System.Xml.XmlDocument xmldoc = new System.Xml.XmlDocument();
xmldoc.Load(fs);
fs.Close();
xmldoc.DocumentElement.RemoveChild(xmldoc.DocumentElement.ChildNodes[1]);
FileStream WRITER = new FileStream(path, FileMode.Truncate, FileAccess.Write, FileShare.ReadWrite);
xmldoc.Save(WRITER);
WRITER.Close(); 
```

我尝试以下代码只是为了删除一个节点并得到“对象引用未设置为对象的实例”。在

```
xmldoc.DocumentElement.RemoveChild(xmldoc.DocumentElement.ChildNodes[1]); 
```

这是一个示例 XML 文件，

```
<?xml version="1.0"?>
<Xml1>
  <Settings>
    <Setting name="DisplayFormat" value="Full" />
    <Setting name="File1" value="a" />
    <Setting name="File1" value="b" />
    <Setting name="File1" value="c" />
    <Setting name="File1" value="d" />
  </Settings>
</Xml1> 
```

实际上，我想从这个文件中删除**四个 File1 节点**，其值为“a、b、c、d”，然后我想**添加一个节点**，

```
<Setting name="File1" value="e" /> 
```

我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-28T07:52:23.907

您可以使用[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)来执行此操作：

```
XDocument doc = XDocument.Load("input.xml");
var q = from node in doc.Descendants("Setting")
        let attr = node.Attribute("name")
        where attr != null && attr.Value == "File1"
        select node;
q.ToList().ForEach(x => x.Remove());
doc.Save("output.xml"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-28T10:07:29.220

从 XML 中删除节点

```
 XmlDocument doc = new XmlDocument();
            doc.Load(path);
            XmlNodeList nodes = doc.SelectNodes("//Setting[@name='File1']");
            for (int i = nodes.Count - 1; i >= 0; i--)
            {
                nodes[i].ParentNode.RemoveChild(nodes[i]);
            }
            doc.Save(path); 
```

在 XML 中为节点添加属性

```
 XmlDocument originalXml = new XmlDocument();
    originalXml.Load(path);
    XmlNode menu = originalXml.SelectSingleNode("//Settings");
    XmlNode newSub = originalXml.CreateNode(XmlNodeType.Element, "Setting", null);
    XmlAttribute xa = originalXml.CreateAttribute("name");
    xa.Value = "qwerty";
    XmlAttribute xb = originalXml.CreateAttribute("value");
    xb.Value = "555";
    newSub.Attributes.Append(xa);
    newSub.Attributes.Append(xb);
    menu.AppendChild(newSub);
    originalXml.Save(path); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-28T07:46:28.630

使用 XPath 定位要删除的节点可能更容易。[这个 stackoverflow 线程](https://stackoverflow.com/questions/875136/how-to-remove-an-xmlnode-from-xmlnodelist/)可能会给你一些想法。

在您的情况下，您将使用此表达式找到所需的四个节点：

```
XmlDocument doc = new XmlDocument();
doc.Load(fileName);
XmlNodeList nodes = doc.SelectNodes("//Setting[@name='File1']"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-28T07:44:33.547

`DocumentElement`是文档的根节点，因此该文档`childNodes[1]`中不存在。`childNodes[0]`将是 <Settings> 节点

# css - 如何使 div 具有两种颜色的圆角？

> ID：919647
> 
> 赞同：0
> 
> 时间：2009-05-28T07:38:30.253
> 
> 标签：css, html

谁能建议我如何创建带有[圆角](http://kalsey.com/2003/07/rounded_corners_in_css/)但有两种不同颜色的 div，就像在[这个例子中一样](http://boxover.swazz.org/)

这是我用来制作具有不同颜色的 div 但不能使用 CSS 的代码：

```
.roundcont_n {
    width: 250px;
    background-color: white;
    color: #000;
}

.roundcont_n_u {
    width: 250px;
    background-color: #808080;
    color: #fff;
}
.roundcont_n_d {
    width: 250px;
    background-color: #606060;
    color: #fff;
}

.roundtop_n { 
    background: url(images/toprt.png) no-repeat top right; 
}

.roundbottom_n {
    background: url(images/btmrt.png) no-repeat top right; 
}

img.corner {
   width: 15px;
   height: 15px;
   border: none;
   display: block !important;
} 
```

这是html代码：

```
<div class="roundcont_n">
 <div class="roundcont_n_u">
    <div class="roundtop_n">
     <img src="images/topLeft.png" alt="" 
     width="15" height="15" class="corner" 
     style="display: none" />sdfsdfsdfjlsdkjfkls
   </div>
 </div>
 <div class="roundcont_n_d">
   <p>Lorem ipsum dolor sit amet, consectetur adipisicing 
   elit, sed do eiusmod tempor incididunt ut labore et 
   dolore magna aliqua. Ut enim ad minim veniam, quis 
   nostrud exercitation ullamco laboris nisi ut aliquip 
   ex ea commodo consequat. Duis aute irure dolor in 
   reprehenderit in voluptate velit esse cillum dolore eu 
   fugiat nulla pariatur. Excepteur sint occaecat cupidatat 
   non proident, sunt in culpa qui officia deserunt mollit 
   anim id est laborum.</p>

   <div class="roundbottom_n">
     <img src="images/btmLft.png" alt="" 
     width="15" height="15" class="corner" 
     style="display: none" />
   </div>
 </div>
</div> 
```

这里图片 btmLft.png 和 btmrt.png 是同色的，topLeft.png 和 toprt.png 是同色的

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T07:42:43.333

“两种颜色”是什么意思？边框？如果是这样，我已经在[我的网站](http://www.brazzy.de/)上实现了这样的：

```
div.bubbleContainer{
    display: inline-block;
    position:relative;
    width: 100%;
}

div.bubble{
    overflow:visible;
    background-color:#ffffff;
    margin-right:10px;
    margin-top:0px;
    border-width:3px; 
    border-color:#002e66; 
    border-style:solid;
    padding-left:10px;
    padding-right:10px;
}

img.bubble-topLeft{
    position:absolute;
    top:-1px;
    left:-1px;
}

img.bubble-topRight{
    position:absolute;
    top:-1px;
    right:9px;
}

img.bubble-bottomLeft{
    position:absolute;
    bottom:-1px;
    left:-1px;
}

img.bubble-bottomRight{
    position:absolute;
    bottom:-1px;
    right:9px;
}

<div class="bubbleContainer">
<img class="bubble-topRight" src="/gfx/bubble-topRight.png" alt="">
<img class="bubble-topLeft" src="/gfx/bubble-topLeft.png" alt="">
<img class="bubble-bottomLeft" src="/gfx/bubble-bottomLeft.png" alt="">
<img class="bubble-bottomRight" src="/gfx/bubble-bottomRight.png" alt="">
<div class="bubble">

<p>Lorem Ipsum dolor sit amet...</p>

</div></div> 
```

# html - 如何设置谷歌地图标记的信息窗口最大高度？

> ID：919659
> 
> 赞同：9
> 
> 时间：2009-05-28T07:42:45.580
> 
> 标签：html, google-maps

如果marker信息窗口的内容太长，会塞不进窗口，会在底部溢出。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T04:21:36.463

此问题也可能是由于在附加到地图后将继承样式应用于信息窗口内容。

例如：字体大小将根据默认字体计算。附加信息窗口时，字体将根据继承的 CSS 更改，如果较大，则会溢出信息窗口底部。

如果您不想删除继承的样式（而且大多数情况下您不想删除），您需要在信息窗口内容中明确地取消继承的样式。

您可以在以下位置找到对此问题的出色描述及其解决方案：

[修复“继承的 CSS”问题](http://econym.org.uk/gmap/css.htm)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-05T16:23:58.077

```
.gm-style-iw{
    max-height: 10px;
} 
```

上面的代码完成了工作！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-28T15:03:31.727

如果 InfoWindow 包含图片，它可能会溢出，因为 InfoWindow 的大小是在图片下载之前设置的。如果是这种情况，您需要指定图像的大小，或预加载它。

否则，我只需将内容放入带有滚动条的 div 中：

```
div.infowindow {
    max-height:250px;
    overflow-y:auto;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-04T17:22:03.213

接受的答案有点模糊......

因此，对于任何希望更改 InfoWindows 高度或其他样式属性的人来说，这里有几个直接的解决方案。

**方法一：CSS**

像这样应用 CSS 规则。它改变了所有信息窗口的：

```
.gm-style-iw {
    max-height: 200px !important;
    overflow: auto !important;
} 
```

或者，如果您有自定义 IW 模板，这也可以：

```
#myInfoWindow-content {
    max-height: 200px !important;
    overflow: auto !important;
} 
```

溢出需要有 !important，否则它会被 GM 自己的规则所取代，并且可能会切断长内容。Max-height 可以在没有 !important 的情况下工作，但最好还是保留它。

**方法 2：内联 CSS**

如果您为 IW 内容使用模板，那么一个选项是对每个信息窗口内联的样式进行硬编码。

```
<div id="myInfoWindow-content" style="max-height: 150px; overflow: auto;">
  content
</div> 
```

**方法 3：Javascript**

你总是可以使用 JS 来动态修改东西。您可以使用此方法来定位和修改其他 IW 元素，例如隐藏 IW 箭头。

```
document.getElementById('myInfoWindow-content').style.maxHeight = '20px';
document.getElementById('myInfoWindow-content').style.overflow = 'auto'; 
```

# .net - 你能推荐一个适用于 Windows 窗体的应用程序框架吗？

> ID：919669
> 
> 赞同：1
> 
> 时间：2009-05-28T07:45:32.220
> 
> 标签：.net, winforms

您知道一些位于 Windows 窗体之上的更高级别的框架库吗？

任务：

*   命令管理
*   主/明细表管理
*   记录导航
*   输入验证

等等

当然，我可以自己做这一切，但我不想重新发明轮子。

（对不起我的英语不好！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T08:06:24.470

你可以看看微软模式和实践中的智能客户端软件工厂；这为管理 WinForms 应用程序中的视图提供了相当丰富（但复杂）的框架。

您可能还想查看许多第三方寡妇表单组件供应商之一，以获得一些丰富的控件（Telerik、Infragistics 等）。

CSLA 是一个很好的业务对象框架，可以很好地支持 winforms 应用程序。

我目前正在使用 CSLA 开发基于 SCSF 的 WinForms 应用程序；这是一个陡峭的学习曲线，但已经产生了用户喜欢的成功应用程序，并且相当容易维护和增强。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:18:36.117

看看[DevExpress eXpressApp 框架](http://devexpress.com/Products/NET/Application_Framework/)
我从来没有机会在生产中使用它，但是演示和快速测试非常有希望。

我们使用[企业库](http://www.codeplex.com/entlib)（和自己的解决方案）进行验证和数据访问
自己的主/详细表单管理解决方案和[复合 UI 应用程序块](http://msdn.microsoft.com/en-us/library/aa480450.aspx)（CAB）用于命令管理（种类）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T07:52:56.153

虽然它在您引用的特定领域并不是特别强大，但 CSLA 是一个很好的框架，[Rockford Lhotka 的相关书籍 Expert C# 2008 Business Objects](https://rads.stackoverflow.com/amzn/click/com/1430210192)是一本很好的书，可以帮助您总体上思考应用程序架构（即使我没有最终使用它或 100% 同意所采取的每一个立场，仍然值得花时间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T06:19:46.303

我认为 MX-Frame 涵盖了您描述的功能。

www.mxframe.net

# c++ - 关于在 symbian 中使用 TCP/IP 编写

> ID：919671
> 
> 赞同：0
> 
> 时间：2009-05-28T07:46:23.717
> 
> 标签：c++, symbian

```
void CSocket::WriteSocket()
{
    TBuf8<2> KData (_L8("60"));
//RBuf8 KData;
    RBuf8 aQuery;
    aQuery.CleanupClosePushL(); 
    aQuery.CreateL(100);
//  <?xml version="1.0"?><AM><P/><A><CE/></A></AM>
    _LIT8(KData1,"61");
    //_LIT8(KData2,"20");
    _LIT8(KData3,"A");
    _LIT8(KData4,"<?xml version=\"1.0\"?><AM><P/><A><CE/></A></AM>");
    TBuf8<100> buff,buff1;
    buff.Copy(_L("<?xml version=\"1.0\"?><AM><P/><A><CE/></A></AM>"));
    TInt len=buff.Length();
    buff1.AppendNum(len);
    aQuery.Append(KData1);
    aQuery.Append(buff1);
//  aQuery.Append(KData2);
    aQuery.Append(KData3);
    aQuery.Append(buff);    
    //iSocket.Send(KData,KExpeditedDataOpt,iStatus);
    iSocket.Write((TDesC8)aQuery,iStatus);
    User::WaitForRequest(iStatus); 
} 
```

我在 Symbian 上使用此代码与 Java 中的服务器进行通信。

但问题是：数据没有到达服务器。它显示设备已成功连接。我在这段代码中做错了什么？TDes8 与 Java 中的纯文本兼容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T09:51:06.960

TDes8 只是字节，如果 Java 端试图读取 ASCII，这很好，如果 Java 端期望 16 位 unicode（这是 Java 的 char 是什么），则不是很好。但是，如果您正在读取另一端的套接字，那么即使它不兼容，您仍然会看到一些数据，只是不是您所期望的。与服务器通信的协议应该指定字符集，不管服务器是用什么语言实现的。

否则：

*   它在模拟器上工作吗？
*   你检查过 iStatus 的错误吗？通常，如果套接字连接，您可以写入它，但您永远不知道。
*   服务器是否报告套接字已连接？您可能连接到错误的主机或错误的端口。
*   如果服务器确实读取了一些数据，但由于某种原因失败了，你知道吗？我想我是在问你是否也在调试另一端。如果不是，那么您的数据可能格式不正确，并且在另一端被忽略。我想你正在发送`6146A<?xml version="1.0"?><AM><P/><A><CE/></A></AM>`. 一些跟踪和/或数据包嗅探会告诉您这是否属实。
*   以“a”开头的变量通常是一个参数：这是您的真实代码吗？如果不是，那么关于格式错误的数据的问题适用，并且您的呼叫者可能会给您错误的信息。
*   您可能希望在返回之前 PopAndDestroy aQuery，尽管这不会影响此问题。
*   你的函数应该被称为WriteSocketL，因为它可以离开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T11:17:12.840

重复问题的交叉发布回复：

您的移动网络运营商可能会阻止任何非 HTTP 流量。

您的服务器可能需要在返回所有数据之前接收更多数据。

考虑到我希望服务器上的低级 Java 套接字将传入的网络数据放在字节 [] 中，而不是字符串中，我还特别担心您使用 java 字符/字符串。如果您的服务器正在使用类似调用 readLine() 方法的方法，您可能需要在客户端发送的数据中添加回车符。

# delphi - 如何轻松打印贴纸（彩色）

> ID：919676
> 
> 赞同：0
> 
> 时间：2009-05-28T07:48:28.253
> 
> 标签：delphi, printing, labels

我需要开发一个小型的delphi应用程序，将贴纸（文本+图形）打印到DYMO等标签打印机上。

最好的方法是什么，是否有一些用于 DYMO 打印机的自定义 API 或如何将彩色图形打印到小贴纸上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T08:11:38.703

标签打印机可能有一个普通的 Windows 打印机驱动程序。

如果是这种情况，您可以简单地使用以下内容进行打印：

```
Printer.BeginDoc;
Printer.Canvas.TextOut(10, 10, 'Hello label');
Printer.EndDoc; 
```

在[这个 dymo.com 页面上](https://global.dymo.com/enUS/RNW/RNW.html?pg=std_adp.php&p_faqid=101)查看可以下载的 Dymo SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T12:57:51.577

多年来，我们一直通过标准打印功能打印到 Zebra 标签打印机。我们实际上创建了一个报告 (QuickReport) 并使用基本的打印命令将其发送到打印机。

打印颜色的能力将取决于您的打印机的设施。例如，我们使用的 Zebra 打印机是热转印色带打印机，这意味着只有一种颜色可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T08:08:01.020

我使用打印机单元中的普通旧 Printer.Canvas 写入 DYMO 标签打印机，标签打印正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T20:41:09.517

正如[Scott W](https://stackoverflow.com/questions/919676/how-to-print-stickers-easily-in-colors/920698#920698)建议的那样，使用 Windows 打印机驱动程序是向打印机输出标签的最简单方法，并且您的软件可以与其他标签打印机一起使用。

您只需要使用 QuickReports、Rave 或任何其他报告组件创建具有正确标签大小的页面。

[您可以直接从DYMO](https://global.dymo.com/enUS/RNW/RNW.html?pg=std_adp.php&p_faqid=101)下载驱动程序。对于其他标签打印机，我强烈建议使用[Seagull Scientific](http://www.seagullscientific.com/aspx/thermal_95.aspx)的驱动程序。那里的驱动程序比打印机制造商提供的驱动程序要好。

# python - 可以将可变数量的参数传递给函数吗？

> ID：919680
> 
> 赞同：386
> 
> 时间：2009-05-28T07:50:10.090
> 
> 标签：python

类似于在 C 或 C++ 中使用可变参数：

```
fn(a, b)
fn(a, b, c, d, ...) 
```

* * *

## 回答 #1

> 赞同：492
> 
> 时间：2009-05-28T07:51:54.097

是的。您可以`*args`用作*非关键字*参数。然后，您将能够传递任意数量的参数。

```
def manyArgs(*arg):
  print "I was called with", len(arg), "arguments:", arg

>>> manyArgs(1)
I was called with 1 arguments: (1,)
>>> manyArgs(1, 2, 3)
I was called with 3 arguments: (1, 2, 3) 
```

如您所见，Python 会将参数*解压缩*为包含所有参数的单个元组。

对于关键字参数，您需要接受它们作为单独的实际参数，如[Skurmedel 的答案](https://stackoverflow.com/a/919720/28169)所示。

* * *

## 回答 #2

> 赞同：245
> 
> 时间：2009-05-28T07:59:58.650

添加到展开帖子：

您也可以发送多个键值参数。

```
def myfunc(**kwargs):
    # kwargs is a dictionary.
    for k,v in kwargs.iteritems():
         print "%s = %s" % (k, v)

myfunc(abc=123, efh=456)
# abc = 123
# efh = 456 
```

您可以将两者混合使用：

```
def myfunc2(*args, **kwargs):
   for a in args:
       print a
   for k,v in kwargs.iteritems():
       print "%s = %s" % (k, v)

myfunc2(1, 2, 3, banan=123)
# 1
# 2
# 3
# banan = 123 
```

它们必须按该顺序声明和调用，即函数签名需要是 *args、**kwargs，并按该顺序调用。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-02-23T05:29:14.250

如果可以的话，Skurmedel 的代码适用于 python 2；要使其适应 python 3，请更改`iteritems`为. 这可能会阻止像我这样的初学者碰到： 并在其他地方搜索（例如[，尝试使用 NetworkX 的 write_shp() 时出现错误“'dict' object has no attribute 'iteritems'”](https://stackoverflow.com/a/30418498/6358973)）为什么会发生这种情况。`items``print``AttributeError: 'dict' object has no attribute 'iteritems'`

```
def myfunc(**kwargs):
for k,v in kwargs.items():
   print("%s = %s" % (k, v))

myfunc(abc=123, efh=456)
# abc = 123
# efh = 456 
```

和：

```
def myfunc2(*args, **kwargs):
   for a in args:
       print(a)
   for k,v in kwargs.items():
       print("%s = %s" % (k, v))

myfunc2(1, 2, 3, banan=123)
# 1
# 2
# 3
# banan = 123 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-02-26T00:56:32.997

添加到其他优秀的帖子。

有时您不想指定参数的数量**并**想为它们使用键（如果在方法中未使用字典中传递的一个参数，编译器会报错）。

```
def manyArgs1(args):
  print args.a, args.b #note args.c is not used here

def manyArgs2(args):
  print args.c #note args.b and .c are not used here

class Args: pass

args = Args()
args.a = 1
args.b = 2
args.c = 3

manyArgs1(args) #outputs 1 2
manyArgs2(args) #outputs 3 
```

然后你可以做类似的事情

```
myfuns = [manyArgs1, manyArgs2]
for fun in myfuns:
  fun(args) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-28T07:00:57.920

```
def f(dic):
    if 'a' in dic:
        print dic['a'],
        pass
    else: print 'None',

    if 'b' in dic:
        print dic['b'],
        pass
    else: print 'None',

    if 'c' in dic:
        print dic['c'],
        pass
    else: print 'None',
    print
    pass
f({})
f({'a':20,
   'c':30})
f({'a':20,
   'c':30,
   'b':'red'})
____________ 
```

上面的代码将输出

```
None None None
20 None 30
20 red 30 
```

这与通过字典传递变量参数一样好

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-19T13:05:30.580

除了已经提到的好答案之外，另一种解决方法取决于您可以按位置传递可选的命名参数这一事实。例如，

```
def f(x,y=None):
    print(x)
    if y is not None:
        print(y) 
```

产量

```
In [11]: f(1,2)
1
2

In [12]: f(1)
1 
```

# .net - 您将如何使用 DVCS（在我的情况下为 Mercurial）为不同版本的 .NET 框架进行开发？

> ID：919685
> 
> 赞同：8
> 
> 时间：2009-05-28T07:52:19.460
> 
> 标签：.net, asp.net, version-control, mercurial, dvcs

我正在为我们的 cms（在 asp.net webforms 上运行）编写某种新的管理仪表板。由于各种原因，我们的一些较旧的服务器只能处理 .NET 2.0，因此我必须为此重写使用 lambda 表达式等的代码。

我想知道您将如何使用像 mercurial 这样的 dvcs 同时开发这两个版本。

我当前的代码库和 mercurial 存储库针对 .NET 3.5。我对 mercurial 比较陌生，我想我必须分支代码库？

任何最佳实践或教程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-28T08:52:14.723

是的，您可以为此使用 Mercurial。这是它的工作原理。

假设您当前的克隆被调用`new-dot-net`，因为它支持新的 .Net 版本。你克隆它并调用它 `old-dot-net`或类似的东西。这两个克隆现在是相同的，并且都针对 .Net 3.5。

现在小心地进行一些小改动，`old-dot-net`以使其与 .Net 2.0 兼容。当您进行更改时，两个克隆将开始分歧：

```
新点网：... [a] --- [b]

旧点网：... [a] --- [b] --- [c] --- [d]

```

在这里，您进行了`[c]`更改`[d]`集以添加 .Net 2.0 兼容性。请注意`old-dot-net`克隆如何包含更多的变更集，而不是`new-dot-net`因为它具有您*不*希望在 中看到的向后兼容性更改`new-dot-net`。当您继续工作时，重要的是要考虑这一点：`net-dot-net`将包含`old-dot-net`. 变化从 `new-dot-net`到`old-dot-net`，但从*不*反向。

假设您在`new-dot-net`. 您进行了更改，`new-dot-net`现在情况如下所示：

```
新点网：... [a] --- [b] --- [x]

旧点网：... [a] --- [b] --- [c] --- [d]

```

您现在还想将更改反向移植到`old-dot-net`，更改为`old-dot-net`并从中提取`net-dot-net`：

```
% cd old-dot-net
% hg pull ../new-dot-net 
```

这将在以下位置创建一个[新头](https://www.mercurial-scm.org/wiki/Head)`old-dot-net`：

```
                             [X]
                            /
旧点网：... [a] --- [b] --- [c] --- [d]

```

因为`[x]`变更集具有`[b]`其父变更集。您现在[有多个头](https://www.mercurial-scm.org/wiki/MultipleHeads)，必须合并以减少头的数量。通过合并，您可以创建一个新的变更集，这是您说“这是如何`[x]`并且`[d]`应该合并”的方式。如果变更集只涉及到and `[x]` 中没有涉及的代码，那么合并应该可以正常工作。否则，您将看到一个合并工具并且必须解决冲突。您将合并提交为 chageset ：`[c]``[d]``[e]`

```
                             [X]  -  -  -  -  -  -  - 。
                            / \
旧点网：... [a] --- [b] --- [c] --- [d] --- [e]

```

您已经完成了——您现在已经将`[x]`更改合并到您的 .Net 2.0 兼容代码中。

每次`new-dot-net`. 假设添加了更多功能：

```
新点网：... [a] --- [b] --- [x] --- [y] --- [z]

```

把它们拉进去后，`old-dot-net`你得到

```
                             [x] --------------.---- [y] --- [z]
                            / \
旧点网：... [a] --- [b] --- [c] --- [d] --- [e]

```

你现在合并`[e]`和`[z]`：

```
                             [x] --------------.---- [y] --- [z]
                            / \ \
旧点网：... [a] --- [b] --- [c] --- [d] --- [e] ----------- [f]

```

要记住的重要部分是：

*   **在**`new-dot-net`. _ _
*   **将更改拉**入`old-dot-net`
*   **永远不要**从`old-dot-net`to推动`new-dot-net`。

如果您在某些时候发现`new-dot-net`不需要更改 in `old-dot-net`，那么您仍然需要将其拉入并合并它。但是你会做一个*虚拟的合并*。如果头是`[w]`和 `[g]`，并且你想保留`[g]`，那么做

```
% HGMERGE=true hg merge -y
% hg revert --all --rev g
% hg commit -m 'Dummy merge with y.' 
```

[诀窍](https://www.mercurial-scm.org/wiki/TipsAndTricks#Keep_.22My.22_or_.22Their.22_files_when_doing_a_merge)是在不关心结果的情况下进行合并，然后还原所有更改，并将未更改的工作副本提交为合并。这样你就可以告诉世界“ `[w]`and 的组合`[g]`是`[g]`”，也就是说，你扔掉`[w]`. 然后可以像往常一样合并`new-dot-net`after中所做的新更改。`[w]`

# jar - 让你的 Jar 不被反编译

> ID：919690
> 
> 赞同：6
> 
> 时间：2009-05-28T07:52:50.847
> 
> 标签：jar, executable

如何将我的 Java 应用程序打包到无法反编译的可执行 jar 中（例如，通过 Jadclipse）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T08:08:49.990

你不能。如果 JRE 可以运行它，应用程序就可以反编译它。

你能期望的最好的就是让它很难阅读（用'l'和'1'和'O'和'0'的组合替换所有符号，放入大量无用的代码等等）。即使使用相对笨拙的翻译工具，您也会惊讶于编写代码的可读性。这称为混淆，虽然并不完美，但有时就足够了。

请记住，你无法阻止坚定的黑客，就像坚定的窃贼一样。你想要做的是让临时攻击者的事情变得非常困难。当出现符号`O001l1ll10O`、`O001llll10O`、`OO01l1ll10O`、`O0Ol11ll10O`和`O001l1ll1OO`，以及似乎没有任何用处的代码时，大多数人会放弃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T11:54:06.463

首先，您无法避免人们对您的代码进行逆向工程。JVM 字节码必须是简单的才能执行，并且有几个程序可以对其进行逆向工程（同样适用于 .NET CLR）。您只能使提高查看和理解代码的障碍（即成本）变得越来越困难。

通常的方法是使用一些工具来[混淆源代码。](http://en.wikipedia.org/wiki/Obfuscated_code)类、方法和字段在整个代码库中被重命名，即使您选择使用无效的标识符，也使得代码几乎无法理解。[过去我在JODE](http://jode.sourceforge.net/)上取得了不错的成绩。混淆后使用反编译器查看您的代码是什么样的......

除了混淆之外，您可以使用某种方法加密您的类文件（除了一个小的入门类之外），并使用自定义类加载器来解密它们。不幸的是，类加载器类本身无法加密，因此人们可能会通过阅读类加载器的反编译代码来找出解密算法。但是攻击你的代码的窗口变小了。同样，这不会阻止人们看到您的代码，只会让临时攻击者更难。

您还可以尝试将 Java 应用程序转换为某些 Windows EXE，这将隐藏它是 Java 的线索（在某种程度上）或真正编译成机器代码，具体取决于您对 JVM 功能的需要。（我没有尝试这个。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T01:56:42.550

[GCJ](http://gcc.gnu.org/java/)是一个免费工具，可以编译为字节码或本机代码。请记住，这确实违背了 Java 的目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-04T20:19:09.383

我知道有点晚了，但答案是否定的。

即使您使用 C 编写并编译为本机代码，也有反汇编器/调试器允许人们逐步执行您的代码。当然——在没有符号信息的情况下调试优化代码是一件痛苦的事情——但它可以做到，我有时不得不这样做。

您可以采取一些步骤来增加难度——例如，在 Windows 上，您可以在循环中调用[IsDebuggerPresent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680345%28v=vs.85%29.aspx) API 以查看是否有人正在调试您的进程，如果是并且它是发布版本，则终止该进程。当然，足够坚定的攻击者可以拦截您对 IsDebuggerPresent 的调用并始终返回 false。

出现了各种各样的技术 - 想要保护某物的人和想要彻底破解它的人，这是一场名副其实的军备竞赛！一旦你走上这条路 - 你将不得不不断更新/升级你的防御，没有停止。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-24T13:19:41.147

这不是我实际的解决方案，但是，在这里我认为很好的收藏或资源和教程可以让它达到最高的满意度。

[来自本网站](https://community.oracle.com/thread/2391503)（oracle 社区）的建议

> （干净的方式），混淆你的代码，有很多开源和免费的混淆器工具，这里是一个简单的列表：[[开源混淆](http://java-source.net/open-source/obfuscators)器列表]。这些工具通过更改名称使您的代码不可读（尽管您仍然可以对其进行反编译）。这是保护代码的最常用方法。
> 
> 2.（不那么干净的方式）如果你有一个特定的目标平台（比如windows）或者你可以为不同的平台有不同的版本，你可以用像C这样的低级语言编写算法的复杂部分（这很难反编译和理解）并将其用作 Java 应用程序中的本机库。它并不干净，因为我们中的许多人使用 java 是因为它的跨平台能力，而这种方法会削弱这种能力。

下面这个一步一步地跟随： [ProtectYourJavaCode](http://www.thegeekstuff.com/2008/06/protect-your-java-code-from-reverse-engineering/)

享受！保留您的解决方案，我们需要更多。

# xslt - 如何用 ant 执行 XSLT 2.0？

> ID：919692
> 
> 赞同：10
> 
> 时间：2009-05-28T07:53:03.563
> 
> 标签：xslt, ant, saxon

我正在尝试从[ant](http://ant.apache.org/)文件运行 XSLT 转换。

我正在使用带有[saxon 9](http://saxon.sourceforge.net/)解析器（支持 XSLT 2.0）的 XSLT 2.0 样式表。

问题是 ant 似乎总是调用 XSLT 1.0 解析器。

这是我的蚂蚁文件：

```
<xslt style="stylesheet.xslt"
   basedir="core/"    
   extension=".xml"
   destdir="core/"
   classpath="D:\\DevTools\\saxon\\bin\\saxon9.jar">
</xslt> 
```

如果我直接调用它（没有蚂蚁），它就可以工作。

任何的想法 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-31T13:53:37.303

问题是当 Saxon 添加到类路径时，默认的 JAXP 机制来确定使用哪个 TransformerFactory，它将使用默认的 Xalan。您要么需要：

*   将`javax.xml.transform.TransformerFactory`系统变量设置为`net.sf.saxon.TransformerFactoryImpl`,
*   将 saxon9.jar 添加到`CLASSPATH`系统变量中，或
*   `<factory name="net.sf.saxon.TransformerFactoryImpl"/>`在`xslt`元素内部使用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-11-18T04:00:47.107

如果您遇到此问题，请检查您使用的不是 Ant 1.8.1，因为 Ant 1.8.1 中有一个[错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=49271)会阻止此操作。（虽然这不是原始帖子中的问题，因为那是在 Ant 1.8.1 发布之前）。

您的选择是：

1.  使用没有错误的 Ant 版本（例如 Ant 1.7.1）。
2.  `CLASSPATH`在Ant 启动之前，在 saxon9.jar 中显式指定它，方法是：
    *   设置系统`CLASSPATH`环境变量，或
    *   使用`-lib`命令行选项`ant`
3.  使用 SAXON Ant 定义您自己的任务（如该线程上的另一个答案所述）。
4.  通过添加`processor="org.apache.tools.ant.taskdefs.optional.TraXLiaison"`作为`xslt`任务元素的属性的解决方法。

我建议使用选项 1，然后是选项 4。

选项 2 会起作用，但它让运行 ant 的人负责设置他们的环境并正确运行 ant。我假设您不希望这样，这就是为什么您要尝试使任务的`classpath`属性`xslt`起作用的原因。

选项 3 有限制，因为 SAXON Ant 需要下载并安装其 JAR 文件。此外，SAXON Ant 不适用于 SAXON 9.2 或更高版本（并且 SAXON Ant 自 2008 年 6 月创建以来一直没有更新）。

从理论上讲，指定`factory`子元素会使您要使用的 XSLT 处理器显式化——以防止类加载器在其搜索的早期找到不同的 XSLT 处理器，并使用它来代替在 CLASSPATH 中更靠后的 XSLT 处理器。在实践中（至少在 ant 1.7.0、1.7.1 和 1.8.0 中），如果`factory`指定了子元素，则`xslt`任务会忽略该`classpath`属性——这意味着您必须求助于显式指定 CLASSPATH（选项 2）。所以它无助于解决原来的问题。但是，这似乎已在 Ant 源代码中修复，因此可以在 1.8.1 之后的版本中使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T09:02:53.797

本教程似乎提供了有关如何执行您所要求的操作的分步说明：

[http://www.abbeyworkshop.com/howto/xslt/ant-saxon/index.html](http://www.abbeyworkshop.com/howto/xslt/ant-saxon/index.html)

由此看来，您正在做正确的事情。你确定你需要双反斜杠吗？

更新：xslt Ant 文档提到了可以帮助您更接近的“工厂”属性：

[http://ant.apache.org/manual/Tasks/style.html](http://ant.apache.org/manual/Tasks/style.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-30T01:34:53.487

**编辑：** *[Michael Kay 博士](https://stackoverflow.com/users/415448/michael-kay)指出 AntTransform 不再受支持，也不推荐。*

~~从 Saxon [AntTransform 类](http://www.saxonica.com/documentation/javadoc/net/sf/saxon/ant/AntTransform.html)创建一个 taskdef ：~~

 ~~```
 <taskdef name="saxon-xslt" classname="net.sf.saxon.ant.AntTransform" classpath="${basedir}/lib/saxon/saxon9.jar;${basedir}/lib/saxon/saxon9-ant.jar"/>

   <saxon-xslt
     in="${source.xml}"
     out="${out.dir}/${output.xml}"
     style="${basedir}/${stylesheet.xsl}"
     force="true">
   </saxon-xslt> 
```~~  ~~* * *

我已经开始使用`<xslt>`带有 a 中指定的 saxon jar 的标准任务`<classpath>`，但遇到了性能问题。调用任务时，它似乎“挂起”了一段时间。我发现添加`processor="trax"`和指定`<factory name="net.sf.saxon.TransformerFactoryImpl"/>`有助于它运行得更快。

```
 <xslt in="${source.xml}"
       out="${out.dir}/${output.xml}"
       style="${basedir}/${stylesheet.xsl}"
       processor="trax">
       <factory name="net.sf.saxon.TransformerFactoryImpl"/>
       <classpath refid="saxon-classpath" />
 </xslt> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-13T20:27:46.243

无需等待在 1.8.2 中修复此问题，然后等待所有人最终升级到 1.8.2，您可以推出自己的 XSLT 宏（适用于您明确想要使用 Saxon，而不是用户选择的 XSLT 引擎的情况)

```
<macrodef name="xslt" uri="com.mycompany.mydepartment">
    <attribute name="in" />
    <attribute name="out" />
    <attribute name="style" />
    <attribute name="classpath" default="${saxon.jar.path}" />
    <attribute name="taskname" default="mydep:xslt" />
    <element name="params" optional="true" implicit="true" />
    <sequential>
        <java classname="net.sf.saxon.Transform"
              classpath="@{classpath}"
              taskname="@{taskname}">
            <classpath path="${saxon.jar.path}" />
            <arg value="-s:@{in}" />
            <arg value="-xsl:@{style}" />
            <arg value="-o:@{out}" />
            <params />
        </java>
    </sequential>
</macrodef> 
```

然后你可以调用它（假设 xmlns:mydep="com.mycompany.mydepartment" 在项目元素上设置）

```
<mydep:xslt in="${myinput}"
             out="${myoutput}"
             style="${myxslt}">
    <arg value="param1=value1" />
    <arg value="param2=value2" />
    <arg value="+param3=somefile.xml" />
</mydep:xslt> 
```

[您可以在http://www.saxonica.com/documentation/using-xsl/commandline.xml](http://www.saxonica.com/documentation/using-xsl/commandline.xml)找到将参数传递给 Saxon 的文档

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-01T23:09:41.017

至少在 ant 1.8.0 中，指定类路径的 xslt 任务非常慢。问题似乎是类路径加载。我在 JDB 下运行 ant，它把所有额外的时间都花在了 org.apache.tools.ant.AntClassLoader.loadClass 读取 zip 文件上。

我在运行 ant 之前尝试过它，它运行得更快：

> ant -lib /path/to/saxon/saxon9.jar

来自 Tom Howard 的 macrodef 效果更好，虽然它对 XSLT 参数有一种奇怪的语法，但至少它是可能的。

# c# - 适用于 Windows 的无 Microsoft C# 开发系统

> ID：919693
> 
> 赞同：2
> 
> 时间：2009-05-28T07:53:36.743
> 
> 标签：c#, windows

如果给您一台装有 Windows（XP 或 Vista）的新计算机，并且必须安装一个 C# 开发系统，该系统尽可能少地使用 Microsoft 创建的东西，您会怎么做？

PS：我想澄清一下（因为我最初似乎没有），我并不是说 IDE。我的意思是一个系统。假设我安装 XP 或 Vista 而不安装 .Net。

我必须安装哪些“组件”（即编译器、运行时和库）才能在 C# 中进行开发，以及如何使用尽可能少的 Microsoft 产品来做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-28T07:58:48.060

问题是，您为什么不将 Microsoft 产品用于 Microsoft 创建的产品？

如果答案是**成本**，请查看免费版本的 C# IDE 和编译器[Visual Studio Express](http://www.microsoft.com/Express/)。

如果还有其他原因，那么您可以随时使用自己的文本编辑器，[下载 Mono](http://www.mono-project.com/Main_Page)并获取[Mono C# 编译器](http://www.mono-project.com/CSharp_Compiler)，然后自己编译所有内容。如果您正在寻找替代 IDE，[可以使用 SharpDevelop](http://sharpdevelop.com/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-28T07:59:01.227

在开发 IDE 方面，您最好的选择之一是[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)

如果您想更进一步，甚至不使用 Microsoft 编译器，您可以使用[Mono](http://www.mono-project.com/Mono:Windows)（仅限 C#）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-29T05:23:03.520

.NET Framework 本身带有一个内置的编译器和构建系统（csc/msbuild，相当于 gcc/make *）*。它位于 C:\Windows\Microsoft.NET\v3.5 中。构建 .NET 代码真正需要的只是一份记事本（或者最好是 Vim）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T08:36:26.657

*   [CSharpBuilder](http://www.codegear.com/downloads/free/csharpbuilder)
*   [夏普发展](http://www.icsharpcode.net/OpenSource/SD/)
*   [单核细胞增多症](http://www.mono-project.com/Main_Page)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T07:55:52.933

我听说过[夏普开发](http://en.wikipedia.org/wiki/SharpDevelop)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T08:26:00.860

您可以使用 Eclipse、Mono 和 C# 插件。对于更复杂的东西，您可以使用命令行进行编译。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T08:01:48.257

几年前，我使用 ASP.Net Web Matrix 用 c#1.0 开发了一些网站。它免费、精简且易于使用。

# java - 将大量模板化的 C++ 代码迁移到 Java

> ID：919695
> 
> 赞同：6
> 
> 时间：2009-05-28T07:54:00.237
> 
> 标签：java, c++, templates

我有一个用 C++ 编写的应用程序（大量使用模板），我需要将它带到 Java ME 平台。

我有两个问题：

1.  有没有什么好的工具可以将 C++ 代码转换为 Java - 做一些基本的事情，这样我就有了一个可以开始的平台。我发现了这个 - [http://tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_Java_Converter_Details.html](http://tangiblesoftwaresolutions.com/Product_Details/CPlusPlus_to_Java_Converter_Details.html)。它至少会消除对简单但耗时的东西的需要，比如将类移动到不同的文件、将命名空间移动到包等。有人试过吗？或者知道有更好的吗？

2.  更大的问题是如何处理模板——代码大量使用它们。关于如何解决这个问题的任何建议？例如，是否有任何工具可以扩展模板，这样我就有了基本的基础，然后我就可以用 Java 编写模块了？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T08:33:18.753

对于 Sun 的所有营销活动，Java 不仅仅是一个更好的 C++，而且实际上不支持 C++ 支持的许多习惯用法和范式。这使得自动翻译变得困难。您应该如何自动将多继承层次结构转换为 Java 的单继承层次结构？（注意，我并不是说多继承层次结构是一件好事，只是说它在 C++ 中是明确允许的）。更根本的是，您将如何在 Java 中表示指向成员的函数？或者处理 Java 和 C++ 重载解析之间的差异？

Java 几年前添加了泛型，但故意使它们不如 C++ 模板强大。不管这是否是一个好主意，它都会限制自动翻译对大量模板化代码的作用。

除了使用一些可以将 C++ 转换为 Java 字节码的研究编译器之外，恐怕您可能会被困在手动翻译中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T11:19:55.953

您可以使用 JNI 并从新的 Java 代码中调用旧的 C++ 代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T08:04:06.443

泛型是对应于 C++ 模板的 Java 特性，它们在 J2ME 中不受支持。您可以在框架的帮助下使用它们，该[框架](http://www.j2mepolish.org/cms/leftsection/documentation/programming/programming-java5.html)可能使用预处理来解决问题。（实际上 Java 中的泛型是一个编译器特性——JVM 对它们一无所知。）

无论如何，即使不是不可能自动将一小部分代码从 C++ 移植到 Java 标准版也是很困难的——J2ME 的情况要糟糕得多。Java 泛型和 C++ 模板之间有许多重要的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T08:35:40.653

我认为对于您的情况，一个非常简单的工具是可能的，也许是值得的。不过，这可能是一个有趣的周末工作！我的一个朋友曾经做过一个从 C++ 到 Java 的移植，他只是做了一个正则表达式替换的列表。就像，他将所有出现的 -> 都替换为一个点。等等。然而，这是几年前的事了，所以我真的不想问他。

所以，你可以做同样的事情，收集一些简单的替换，也许在 github 上的某个地方发布它们？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T12:22:15.813

我不认为这是可能的，尤其是。如果您的原始代码被大量模板化 - J2ME 不支持泛型，AFAIK。

不幸的是，这似乎需要大量的手动工作来遍历原始代码并重写它（我假设您的目标平台不支持 JNI）

# asp.net - ASP.NET 中有条件缓存吗？

> ID：919696
> 
> 赞同：0
> 
> 时间：2009-05-28T07:54:18.007
> 
> 标签：asp.net, caching

是否有内置的 asp.net 方式来有条件地提供页面，例如我想要以下逻辑：

> 如果有会话数据我生成一个页面，如果没有会话数据我提供缓存页面。

我只对了解用于此的内置 asp.net 机制感兴趣。如果它不存在，我可能会简单地手动缓存我的页面，并根据会话数据的可用性决定是否为每个请求提供它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T08:53:57.433

我认为没有内置支持（如`varyByParam`）为具有会话数据的用户生成新输出。

正如您所建议的，我建议手动缓存页面。我可能会在`PreRequestHandlerExecute`事件处理程序中确定用户的会话状态`Global.asax`，然后可能会设置：

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T09:00:52.257

冒着karmabombing的风险，我真的不喜欢这种缓存方法。

对我来说，如果发出 GET 请求，那么服务器应该真诚地响应它。页面级别的缓存应由 http 标头控制，因为主要目标根本不是获取冗余请求*-*您不想完全停止分配服务器/带宽资源。

缓存对象是构成页面所涉及的资源，我完全可以落后，但我看不到批量缓存页面的重要论据。

尊重标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T10:31:33.353

您可能想查看 .NET 2.0 中的新替换控件 ( [http://geekswithblogs.net/ranganh/archive/2005/05/04/39003.aspx](http://geekswithblogs.net/ranganh/archive/2005/05/04/39003.aspx) )，但它可能并不完全符合您的要求。

# c# - 如何使用具有该属性名称的字符串变量访问对象属性？

> ID：919699
> 
> 赞同：9
> 
> 时间：2009-05-28T07:54:36.273
> 
> 标签：c#

我如何在 C# 中做到这一点？

```
using System;

namespace TestProperties28373
{
    class Program
    {
        static void Main(string[] args)
        {
            Customer customer = new Customer { FirstName = "Jim", LastName = "Smith", Age = 34};

            Console.WriteLine(customer.FirstName);

            string propertyName = "FirstName";
            Console.WriteLine(customer.&&propertyName); //PSEUDO-CODE

            Console.ReadLine();

        }
    }

    class Customer
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int Age { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-28T08:00:29.507

使用反射：

```
using System.Reflection;

...

PropertyInfo prop = typeof(Customer).GetProperty(propertyName);
object value = prop.GetValue(customer, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:02:17.023

使用`System.Reflection`和[`PropertyInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)

# asp.net - 使用单声道运行 2 个网站

> ID：919700
> 
> 赞同：1
> 
> 时间：2009-05-28T07:54:42.810
> 
> 标签：asp.net, apache, mono

我有 2 个网站：myDomain1.com 和 myDomain2.com

两者都运行在与 Mono 相同的 apache 服务器上。但是我的问题是我不能让他们同时工作。当我转到 myDomain2.com 时，它显示 myDomain1.com 的 aspx 内容。仅偶尔情况是相反的。这样 myDomain1.com 就会显示 myDomain2.com 的内容。我认为当我重新启动 apache 时会发生这种情况。对这里可能发生的事情有任何想法吗？

我的配置。（ myDomain2.com 的配置完全相同，只是所有相关属性都称为 myDomain2.com ）

```
<VirtualHost *:8014>
        ServerAdmin webmaster@myisp.com
        DocumentRoot /home/advanced/myUserName/public_html/myDomain1.com
        ServerName myDomain1.com
        ServerAlias www.myDomain1.com devel.myDomain1.com

        CustomLog logs/myDomain1.com-access.log combined
        ScriptAlias /cgi-bin/ /home/advanced/myUserName/public_html/myDomain1.com/cgi-bin/

     ## Mono (ASP.NET)
        MonoUnixSocket myDomain1.com /home/advanced/myUserName/tmp/mod_mono.sock
        MonoWapidir myDomain1.com "/home/advanced/myUserName/tmp/"
        MonoApplications myDomain1.com "/:/home/advanced/myUserName/public_html/myDomain1.com/"
        AddMonoApplications myDomain1.com "/:/home/advanced/myUserName/public_html/myDomain1.com/"
        <Location /myDomain1.com>
        AddHandler mono .aspx .ashx .asmx .ascx .asax .config .ascx
        MonoSetServerAlias myDomain1.com
        </Location>

</VirtualHost>
<Directory /home/advanced/myUserName/public_html/myDomain1.com/cgi-bin/>
        SetHandler cgi-script
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-08T13:31:31.280

由于您的配置文件包含很多我不一定会使用的东西，我建议从基础开始并添加东西，直到它再次中断。

我在我的 Mono 服务器上成功运行了多个站点，并且我的配置完成如下：

在您的 apache2 sites-enabled 文件夹中为每个域创建一个文件并添加以下内容：

```
<VirtualHost *:80>

ServerName www.domain1.com
ServerAdmin webmaster@domain1.com
DocumentRoot /var/www/domain1
DirectoryIndex index.html index.aspx

AddMonoApplications blogsite "/:/var/www/domain1"
MonoServerPath blogsite "/usr/local/bin/mod-mono-server2"

<Directory /var/www/domain1>
    MonoSetServerAlias domain1
    SetHandler mono
    AddHandler mod_mono .aspx .ascx .asax .ashx .config .cs .asmx
         <FilesMatch "\.(gif|jp?g|png|css|ico|xsl|wmv|zip)$">
            SetHandler None
        </FilesMatch>
    DirectoryIndex index.aspx
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

</VirtualHost> 
```

您显然必须将所有路径和域更改为与您的服务器配置匹配的路径和域。

# c++ - 为什么在此代码中使用复制 ctor？

> ID：919701
> 
> 赞同：10
> 
> 时间：2009-05-28T07:54:59.923
> 
> 标签：c++, copy-constructor

```
class A
{
 public:
  A(const int n_);
  A(const A& that_);
  A& operator=(const A& that_);
};

A::A(const int n_)
{ cout << "A::A(int), n_=" << n_ << endl; }

A::A(const A& that_)    // This is line 21
{ cout << "A::A(const A&)" << endl; }

A& A::operator=(const A& that_)
{ cout << "A::operator=(const A&)" << endl; }

int foo(const A& a_)
{ return 20; }

int main()
{
  A a(foo(A(10)));    // This is line 38
  return 0;
} 
```

执行此代码给出 o/p：

> A::A(int), n_=10
> A::A(int), n_=20

显然复制构造函数永远不会被调用。

```
class A
{
 public:
  A(const int n_);
  A& operator=(const A& that_);
 private:
  A(const A& that_);
}; 
```

但是，如果我们将其设为私有，则会发生此编译错误：

> Test.cpp：在函数'int main（）'中：
> Test.cpp：21：错误：'A :: A（const A＆）'是私有
> Test.cpp：38：错误：在此上下文中

为什么编译器在实际不使用复制构造函数时会抱怨？
我正在使用 gcc 版本 4.1.2 20070925 (Red Hat 4.1.2-33)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-28T10:05:56.507

[核心缺陷 391](http://www.comeaucomputing.com/iso/cwg_defects.html#391)解释了该问题。

基本上，当前的 C++ 标准在将类类型的临时值传递给 const 引用时需要一个可用的复制构造函数。

此要求将在 C++0x 中删除。

需要复制构造函数背后的逻辑来自这种情况：

```
C f();
const C& r = f(); // a copy is generated for r to refer to 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-28T09:26:41.750

2003 年标准在 §12.2/1 中规定：

> 即使避免创建临时对象（12.8），也必须遵守所有语义限制，就像创建临时对象一样。[示例：即使不调用复制构造函数，也应满足所有语义限制，例如可访问性（第 11 条）。]

周围也有类似的例子。据我所知，编译器可以自由生成临时文件或优化它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T09:13:22.293

据我所知，您没有在任何地方使用复制构造函数。在语句中`foo(A(10))`，您将创建一个 A 类的临时对象并将其作为 const 引用传递给 foo。foo 返回一个用于构造 object 的整数`a`。因此，我看不到复制构造函数在哪里涉及以及 NRVO 是如何出现的。此外，我通过将复制构造函数设为私有来编译以下代码，并且在 VS2008 中编译良好。

```
using namespace std;

class A
{
 public:
  A(const int n_);
 private:
  A(const A& that_);
  A& operator=(const A& that_);
};

A::A(const int n_)
{ cout << "A::A(int), n_=" << n_ << endl; }

A::A(const A& that_)    // This is line 21
{ cout << "A::A(const A&)" << endl; }

A& A::operator=(const A& that_)
{ 
    cout << "A::operator=(const A&)" << endl; 
    return *this;
}

int foo(const A& a_)
{ return 20; }

int main(int argc,char *argv[])
{
   A a(foo(A(10)));    // This is line 38
  return 0;

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T09:54:29.013

再说一句：编译器在使用临时文件时会做不同的事情。所以这不是关于复制构造函数，而是关于中间临时的。

```
A original(10);
foo( original ); // does compile
foo( A(10) ); // doesn't compile - needs a copy constructor 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T07:59:46.607

不使用复制构造函数，但为了使代码编译复制构造函数需要可访问。

编辑：Comeau C++ 编译器报告如下：

```
Comeau C/C++ 4.3.10.1 (Oct  6 2008 11:28:09) for ONLINE_EVALUATION_BETA2
Copyright 1988-2008 Comeau Computing.  All rights reserved.
MODE:strict errors C++ noC++0x_extensions

"ComeauTest.c", line 38: error: "A::A(const A &)" (declared at line 17), required
          for copy that was eliminated, is inaccessible
    A a(foo(A(10)));    // This is line 38
            ^

1 error detected in the compilation of "ComeauTest.c". 
```

请注意，如果启用了 C++0x 扩展，它可以在 Comeau C++ 编译器中正常编译。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T10:24:41.307

在表达式中：

```
A a(foo(A(10))); 
```

子表达式的结果是类型`A(10)`的*右值*`A`。(5.2.3 [expr.type.conv])

*当从右值*初始化 const 引用时，编译器可能会从右值创建一个临时*值*并将其绑定到该引用。即使它选择不这样做，复制构造函数也必须是可访问的。(8.5.3 [decl.init.ref]) 如果引用是从强制直接绑定的*引用兼容* *左值初始化的，则不会出现这种情况。*

由于`foo`通过引用而不是值获取其参数，因此参数初始化本身没有强制要求的副本。

`foo`返回一个 int，所以这里没有 an 的副本`A`。

`a`是直接从 foo 返回的 int 初始化的，所以这里没有副本`A`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T09:26:14.343

通常，您不必担心是否以及何时调用复制构造函数。C++ 标准对于何时删除或添加对复制构造函数的调用非常宽松。如果您的班级在逻辑上需要它，则提供它（并且不要忘记析构函数和赋值运算符）是明智的规则。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-28T10:12:47.463

调用时：

```
foo( A(10) ); 
```

在调用期间正在创建一个临时对象。正在使用复制构造函数来填充数据。临时对象在调用执行后被移除。

调用时：

```
{ 
  A original(10);
  foo( original ); 
} 
```

退出区块后，原件将被丢弃。它可以安全地用作参数。

为了获得最佳速度，通过引用传递对象，使用编译器在优化期间将丢弃的临时变量。

# c# - C#管理修订号的有效方法

> ID：919702
> 
> 赞同：11
> 
> 时间：2009-05-28T07:55:16.040
> 
> 标签：c#

C# 2008 SP1

我想知道处理修订号的最佳方法是什么。

我一直认为通常只有 3 个数字。（主要、次要和错误修复）。

但是，我想知道内部版本号和修订号是什么。

例如，过去我通常只使用 3 个数字。我有一些非常小的更改或错误修复，我会增加第三个数字（错误修复）。

因为我是新手。在专业领域通常会做什么？

非常感谢您的任何建议，

在我的 AssemblyInfo 文件中，我有以下内容：

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.2.*")]
[assembly: AssemblyFileVersion("1.0.0.0")]

// 1.0.2 Added feature for detecting if a sound card is installed. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-28T08:12:35.473

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.version.aspx)：

> *   Build ：内部版本号的差异表示对相同源的重新编译。由于处理器、平台或编译器的变化，这将是合适的。
>     
>     
> *   修订版：具有相同名称、主要和次要版本号但不同修订版的程序集旨在完全互换。这适用于修复先前发布的程序集中的安全漏洞。

Phil Haack 对 .NET 版本控制系统进行了[很好的解构](http://haacked.com/archive/2006/09/27/Which_Version_of_Version.aspx)，但实际上我认为他的担忧并不重要，因为根据我的经验，.NET/MS 版本控制系统仅被技术人员真正用于调试/支持/跟踪目的，公众和项目管理通常是基于日期或虚构的营销版本号的。

FWIW 我从事的每个 .NET 项目都由“XY*”管理，即我们喜欢手动控制主要和次要是什么，但让系统控制构建和修订。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-28T07:56:18.063

试试这个：

[http://autobuildversion.codeplex.com/](http://autobuildversion.codeplex.com/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-28T08:15:39.430

我认为 Paul Alexander 的回答是正确的，但我想在您的 AssemblyInfo 文件中添加以下备注：

如果您使用，请`1.0.2.*`记住最后一位（由`*``1.0.2.`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-28T07:59:33.080

您需要考虑以不同的方式对程序集和文件进行版本控制。当您更改程序集版本号时，现有代码可以在不重新编译的情况下使用它，但非常困难。我们仅在发生重大更改时更改程序集版本，以便我们可以轻松地发布小错误修复。

阅读有关我们的[程序集版本控制](http://xheo.com/knowledge-base/deploylx/general/assembly-versioning)政策的更多信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-28T08:15:15.437

我们以 2 为增量使用错误修复编号。奇数表示已发布小错误修复，偶数表示正在修复错误。显然，这在某些企业中很常见，即我所在的企业。

这个想法是识别意外释放，不知何故我喜欢这个想法。做事情，以便您很容易看到错误的事情。这并不是说奇数一定是非偶然释放，只是说它具有相当高的概率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-29T09:06:44.430

感谢您的所有建议。

我决定使用以下内容。

我的项目有以下版本号：1.0.2.20。1\. :主要更改 0\. :次要更改 2\. :Bug 修复 20 :Subversion 修订号

所以我在我的 assemblyinfo.c 文件中更改了以下内容

```
[assembly: AssemblyVersion("1.0.2.20")] 
```

关于这个想法的任何建议，我很乐意听到。

非常感谢，

# javascript - 如何将原型的切换应用于通过 JSON 加载的内容，仅 IE 问题

> ID：919707
> 
> 赞同：1
> 
> 时间：2009-05-28T07:56:36.503
> 
> 标签：javascript, internet-explorer, prototype

我通过原型使用 PHP 和 javascript。我有一个线程评论页面，默认情况下通过 javascript 调用打开通过 JSON 返回的 PHP 文件数据，在数据库中只检索父评论。（简而言之，只有父评论从数据库中获取并显示）然后父评论被加载并格式化以显示在页面上，并带有一个链接以获取和显示其子评论，链接示例：

```
<span id="moreparent8351" onclick="insertChildDiv('parent8351')">1 Replies and more</span> 
```

上面的 span 链接调用 javascript 函数“insertChildDiv()”，该函数基本上获取其 parent_id=parent8351 的评论，还使用一个 PHP 文件，该文件通过 JSON 返回数据到 javascript，该 javascript 动态插入嵌套在其父评论下的这个子评论。然后上面使用原型的跨度链接转换为：

```
<span id="moreparent8351" onclick="$('childparent8351').toggle()">1 Replies and more</span> 
```

现在这是问题所在，这个 id=childparent8351 的 div 中插入的内容仅在 IE v6、v7 和 v8 中不会响应隐藏/显示切换。其他浏览器工作正常。看起来 IE 无法将隐藏/显示切换应用于动态插入的内容。我尝试将我在fogbugz 中看到的插入内容硬编码到页面并在IE 上再次对其进行测试，你猜怎么着？切换工作！

我不想获取父母和孩子的所有评论然后隐藏孩子评论，这是在我们不确定是否重要或不被用户阅读的东西上浪费资源。

有解决方法吗？如果没有，那么我希望这篇文章能帮助其他人在他们的设计阶段做类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T08:06:32.367

`Element.toggle()` **应该可以很好地处理动态生成的内容**。您的问题很可能在于**您用于生成此内容的方法**。

你说：

> 然后上面使用原型的跨度链接转换为：

```
<span id="moreparent8351" onclick="$('childparent8351').toggle()">1 Replies and more</span> 
```

**您究竟是如何更改 span 元素的 onclick 属性的？**

首先，我绝对不建议即时更改 onclick 事件。最好使用一个函数来检查您正在尝试执行的操作的当前状态并执行适当的代码。

确保不要“转换”您的 span 元素，包括使用 innerHTML 的 onclick 属性。DOM 可能仍在尝试引用您刚刚删除的函数。如果要更新您的 onclick 属性，请执行以下操作：

```
var element = $('moreparent8351');
// this automatically removes previous onclick handlers set in this manner
element.onclick = function() { // do stuff }; 
```

...或者，当您想要原型方式时：

```
var element = $('moreparent8351');
// OPTIONAL: remove previous handler, if set
element.stopObserving('click', my_cool_function());
// attach  new handler
element.observe('click', function() { // do stuff }); 
```

# php - JQuery/AJAX：使用动态内容加载外部 DIV

> ID：919722
> 
> 赞同：4
> 
> 时间：2009-05-28T08:01:24.450
> 
> 标签：php, jquery, ajax

我需要创建一个页面，该页面将使用 Jquery 和 AJAX 从外部页面加载 div。

我遇到过一些不错的教程，但它们都是基于静态内容的，我的链接和内容是由 PHP 生成的。

我的代码基于的主要教程来自：http:
[//yensdesign.com/2008/12/how-to-load-content-via-ajax-in-jquery/](http://yensdesign.com/2008/12/how-to-load-content-via-ajax-in-jquery/ "http://yensdesign.com/2008/12/how-to-load-content-via-ajax-in-jquery/")

我需要的确切功能如下：

1.  主页包含一个永久 div，其中列出了一些包含参数的链接。
2.  单击后，链接将参数传递到外部页面。
3.  外部页面根据参数过滤记录集并使用结果填充 div。
4.  新 div 包含一组带有新参数的新链接。
5.  外部 div 加载在主页第一个 div 下方。
6.  然后可以重复过程，在彼此下创建一个 div 链。
7.  然后链中的最后一个 div 将定向到一个新页面，该页面整理所有以前使用的查询字符串。

我可以通过在主页面和外部页面上填充 div 来处理所有 PHP 工作。
这是我正在努力解决的 JQuery 和 AJAX 部分。

```
$(document).ready(function(){
    var sections = $('a[id^=link_]'); // Link that passes parameter to external page
    var content = $('div[id^=content_]'); // Where external div is loaded to

    sections.click(function(){ 
        //load selected section
        switch(this.id){
            case "div01":
                content.load("external.php?param=1 #section_div01");
                break;
            case "div02":
                content.load("external.php?param=2 #section_div02");
                break;          
        }
}); 
```

我遇到的问题是让 JQuery 将动态生成的参数传递给外部页面，然后检索新的 div。
我目前只能使用静态链接来做到这一点（如上所述）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-06T19:27:28.507

我不确定你是否已经解决了这个问题，但我很惊讶没有人提到使用 ajax() 函数。

这将允许您将请求类型定义为 GET：

```
function loadContent(id) {

    $.ajax({
        type: "GET",
        url: "external.php",
        dataType: 'html',
        data: {param: id},

        success: function(html){
                 $("#container").html(html);
        },

        error: function(){
        },

        complete: function(){
        }
    });

} 
```

只需调用此函数而不是使用 load。显然，您必须稍微修改一下代码（主要是成功函数中的内容），但这应该会给您一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T08:11:57.753

您可以使用可选的数据参数将参数传递给 GET 请求。阅读[文档](http://docs.jquery.com/Ajax/load#urldatacallback)。这比自己构建 URL 要好得多。您当然可以将动态生成的数据添加到参数列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T08:24:43.373

```
function loadDiv(evt)
{
    // these params will be accessible in php-script as $_POST['varname'];
    var params = {name:'myDiv', var1:123, var2:'qwer'};
    $.post('http://host/divscript.php', params, onLoadDiv);
}
function onLoadDiv(data)
{
   $('#myContainer').html(data);
}
$(document).ready(function() { 
    $('#divButton').click(loadDiv); 
}); 
```

在此示例中，服务器端脚本应返回 div 的内部内容。当然，您可以将 XML 序列化数据或 JS 返回到 eval 等……这取决于任务。该示例已简化，因此请对其进行扩展以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-03T13:56:00.143

这个关于加载 AJAX 内容的教程很好：

[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

特别是解释如何使用 Firebug 读取结果的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-06T09:21:39.897

用这个 ：

```
function GetDiv(id) {

$.ajax({
    type: "GET",
    url: "external.php"
    dataType: 'html',
    data:id,   
    success: function(html){
             $("#container").append(html);
    },

});

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-28T08:23:04.407

```
var params = {
    param: 1,
    otherParam: 2
};
content.load("external.php #section_div01", params); 
```

将加载“external.php?param=1&otherParam=2”

# jquery - 使用 jQuery 触发正文点击

> ID：919725
> 
> 赞同：10
> 
> 时间：2009-05-28T08:01:57.117
> 
> 标签：jquery, events, click, triggers

我无法使用 jQuery 触发对 body 标签的点击：

```
$('body').click(); 
```

即使这失败了：

```
$('body').trigger('click'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T08:07:00.930

你应该有这样的东西：

```
$('body').click(function() {
   // do something here
}); 
```

当用户单击网页上的某个位置时，将调用回调函数。您可以通过以下方式以编程方式触发回调：

```
$('body').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-28T10:56:09.370

有趣的是，当我替换这个时：

```
$("body").trigger("click") 
```

有了这个：

```
jQuery("body").trigger("click") 
```

有用！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-28T08:08:45.153

我已经使用了以下代码几次，效果很好：

```
$("body").click(function(e){ 
    // Check what has been clicked:
    var target = $(e.target); 
    if(target.is("#target")){
    // The target was clicked
    // Do something...
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-06T16:53:44.407

如果说所有事情都不起作用，请回到基础并测试这是否有效：

```
<html>
  <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">
      $('body').click(function() {
        // do something here like:
        alert('hey! The body click is working!!!')
      });
    </script>
  </body>
</html> 
```

然后告诉我它是否工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-02T00:05:12.260

正如 Seeker 所提到的，问题可能是您`click()`过早地设置了该功能。从您的代码片段中，我们无法知道您将脚本放置在哪里以及它是否在正确的时间运行。

重要的一点是在文档准备好后运行此类脚本。这是通过将`click()`初始化放在其他函数中来完成的，如下所示：

```
jQuery(document).ready(function()
  {
    jQuery("body").click(function()
      {
        // ... your click code here ...
      });
  }); 
```

这通常是最好的方法，尤其是当您在代码中包含 JavaScript 代码时`<head>`。如果您将它包含在页面的最底部，那么该`ready()`功能就不那么重要了，但它可能仍然有用。

# version-control - 版本提升与版本分支的优缺点

> ID：919727
> 
> 赞同：6
> 
> 时间：2009-05-28T08:02:21.470
> 
> 标签：version-control, branch, merge

在我当前的项目中，我必须决定在分支时使用哪种技术。我有两个选择（我们假设我们已经决定在主干中开发）：

## 版本分支

每当将新版本放在测试机器上时创建一个分支，并将其标记为“release0.1”。在这个分支中修复了错误（当然，然后合并到主干），当这个版本最终上线时，它被标记为“release0.1.1”。这导致每个主要版本都有一个分支，每个次要版本都有一个标签。如果必须在实时版本中修复错误，则将其修复到相应的分支中，然后合并到主干。

## 版本推广

只有三个分支“trunk”（用于开发）、“test”和“live”。当一个版本放在测试机器上时，主干被合并（提升）到“测试”分支中，错误在那个分支中被修复，当版本发布时，“测试”分支被合并到“实时”分支中. 如果我们在“live”分支中发现错误，它会在那里修复，然后合并到主干。

这两种哲学的优缺点是什么？你自己的经历是什么？有没有其他可用的——可能更好的——方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T08:06:29.730

这取决于您的维护策略。

如果您选择维护超过最新版本（例如 XP 与 Vista 并行），版本分支是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T09:02:43.343

根据我的经验，版本升级在合并来自不同分支的更改和尝试记住在哪个分支上修复了什么等方面的开销要小得多，所以只要有可能，我更喜欢以这种方式工作。不幸的是，如果您使用版本升级，通常不可能对已发布的版本进行小的快速修复（因为有大量代码签入到“测试”分支）-> 所以我们有版本分支。

总而言之，我认为（至少对我而言）通常最好的方法是在两者之间做一些事情 - 在主干（主分支）上进行所有开发，标记所有构建/发布，并仅在需要时创建版本分支（例如，生产中存在严重错误，并且主干中有无法发布的更改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T09:05:52.823

在我看来，这两者是独占的。

The version branches mecanism is needed if you have to maintain different RELEASED versions. But I think it is a best-practice to always prepare a branching point (depending on your gestion version system) after releasing a version.

The "promotion" mecanism is needed if you have to release test version. This is usefull if you have, for example, a validation team distinct to development team and/or large team where development goes fast. In these cases, you need a specific branch to stabilize the next "stable" release while trunk stay "unstable".

# asp.net-mvc - 绑定排除 Asp.net MVC 不适用于 LINQ 实体

> ID：919728
> 
> 赞同：3
> 
> 时间：2009-05-28T08:02:59.750
> 
> 标签：asp.net-mvc, linq, binding

我目前设法获得一些时间来研究 ASP.NET MVC。我正在做教程[Create a Movie Database in ASP.NET MVC](http://www.asp.net/learn/mvc/tutorial-21-cs.aspx)，它仍然使用 ADO.NET 实体模型。我设法从 LINQ 实体模型创建了一个列表视图。所以这是我的问题。绑定属性不适用于我的 SQL 实体。

Ado.NET 的原始代码

```
 public ActionResult Create([Bind(Exclude="Id")] Movie movieToCreate)

        {
             if (!ModelState.IsValid)
                return View(); 

            _db.AddToMovieSet(movieToCreate);
            _db.SaveChanges(); 
            return RedirectToAction("Index");
        } 
```

我的 LINQ 代码

```
 public ActionResult Create([Bind(Exclude = "Id")] Movies movieToCreate)
    {
        if (!ModelState.IsValid)
        {
            return View();
        }
        _db_linq.Movies.InsertOnSubmit(movieToCreate);
        _db_linq.SubmitChanges();

        return RedirectToAction("Index");
    } 
```

但不排除 Id 字段。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T18:14:58.270

您的 ID 属性可能是一个 int 并且它不是可为空的类型。正因为如此，即使它在绑定时被排除在外，它也必须有一个值。在这种情况下，它具有其类型的默认值，即零。

Make sure you set up your database properly, having the ID field's IsIdentity property set to true and re-create your LINQ classes.

# webdav - 如何根据用户登录重定向 Lighttpd webdav 挂载

> ID：919729
> 
> 赞同：2
> 
> 时间：2009-05-28T08:03:25.523
> 
> 标签：webdav, lighttpd

我启用了 lighttpd mod_webdav 模块并使用以下 lighttpd.conf 条目设置了[http://website.com/webdav的 webdav 挂载点：](http://website.com/webdav)

```
$["remoteip"] == "www.website.com" {
    alias.url += (
       "/webdav" => "/var/www/htdocs/webdav",
    )
    $HTTP["url"] =~ "^webdav($|/)" {
        dir-listing.activate = "enable"
        webdav.activate = "enable"
        webdav.is-readonly = "disable"
        auth.backend = "htpasswd"
        auth.backend.htpasswd.userfile = "/var/www/htdocs/passwd.dav"
        auth.require = ("" => "method" => "basic",
             "realm" => "webdav",
             "require" => "valid-user" ) )
    }
} 
```

这为所有 webdav 用户提供了相同的目录。

但是，我想让[http://website.com/webdav](http://website.com/webdav)根据 webdav 用户名重定向到特定的子目录。

例如：

1.  用户以 user1 身份登录，他/她在[访问 http://website.com/webdav](http://website.com/webdav)时看到 htdocs/webdav/user1 或

2.  用户以 user2 身份登录，他/她在[访问 http://website.com/webdav时看到 htdocs/webdav/user2](http://website.com/webdav)

这可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-03-03T09:19:11.347

尽管 HTTP 和 WebDAV 允许这样做，但流行的客户端实际上并不遵循重定向。结果是windows客户端、os/x客户端等客户端无法直接连接url..

# visual-studio - 为 Visual Studio 创建自定义项目类型以将 Borland C++ Builder 项目构建到 Visual Studio

> ID：919731
> 
> 赞同：4
> 
> 时间：2009-05-28T08:03:38.737
> 
> 标签：visual-studio, c++builder

我想开始为 Visual Studio 开发一个自定义项目类型，它使用 Visual Studio 构建 BPR 项目。

我需要一些提示才能开始这个项目。我在哪里可以找到此类项目的模板？

我的目标是从开发过程中删除 Borland C++Builder 丑陋和不稳定的界面，并从 Visual Studio 中直接工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T08:27:52.633

编辑：哎呀，我真的没有看到你要*为 C++ Builder files 创建一个新的项目类型*。在这种情况下，您必须构建一个语言包。[Visual Studio 可扩展性](http://msdn.microsoft.com/en-us/vsx/default.aspx)站点应该可以帮助您入门。也看看[这个更具体的链接](http://msdn.microsoft.com/en-us/library/bb166376.aspx)。

我将在这里留下我的旧答案以供参考，因为它可能会帮助那些只想构建 C++Builder 项目而不创建全新项目类型的人:)

> 您没有指定 Visual Studio 的版本，但我假设是最近的版本。在 Visual Studio 8 和 9 中，大多数项目文件（除 Visual C++ 之外的所有流行文件）实际上都是 MSBuild 文件，因此可以由 MSBuild 构建。您可以添加一个简单的命令行任务 (Exec) 以在命令行上构建您的 bpr，或者您可以为此创建一个自定义任务（如果您没有找到一个可用的 - 搜索词应该是*MSBuild*和*自定义任务*） . 这样，Visual Studio 和 MSBuild 都可以构建您喜欢的任何内容。如果您没有 MSBuild 文件开始或想要深入开发任务，Visual Studio 的[MSBuild 项目模板](http://www.codeplex.com/MSBuildTemplate)将为您提供帮助。
> 
> 哦，除此之外，如果您实际上不需要 C++Builder 的东西，您不妨将 BPR 作为解决方案导出（或创建一个新的解决方案并添加文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-14T17:17:04.000

使用 C++Builder 2007 或 2009 将 C++Builder 项目集成到构建过程中应该容易得多，因为两者都使用 MSBuild 作为构建系统。但是，我认为升级到最新版本的 C++Builder 可以通过另一种方式解决您的问题 :)

# .net - 我可以使用 RSACryptoServiceProvider 公钥/私钥与 Crypto++ 互操作吗？

> ID：919733
> 
> 赞同：3
> 
> 时间：2009-05-28T08:04:11.137
> 
> 标签：.net, interop, cryptography, crypto++

我使用[RSACryptoServiceProvider](https://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)创建了一个公钥/私钥并将其保存为 XML。我可以使用它来加密/解密/签名和验证 .NET 中的数据。

我有另一个旨在在 Linux 服务器上运行的应用程序。我正在用 C++ 开发它，我正在使用 Crypto++ 来满足我的密码学需求。

我想在这两个应用程序之间共享数据，但要做到这一点，我需要将 RSAParameters 转换为 Crypto++ 可以理解的公钥/私钥。

如果这样做更容易，我也愿意使用将 Crypto++ 生成的公钥/私钥转换为 RSAParameters。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T19:25:44.850

最简单的方法可能是直接使用 RSAParameters 而不是通过 XML。

只需使用您自己选择的格式将包含在 RSAParameters 中的字节数组存储在文件中。在 C++ 程序中读回字节数组并从中创建[CryptoPP::Integer](http://www.cryptopp.com/docs/ref/class_integer.html)。使用这些整数来初始化[RSAFunction](http://www.cryptopp.com/docs/ref/class_r_s_a_function.html)（公钥）或[InvertibleRSAFunction](http://www.cryptopp.com/docs/ref/class_invertible_r_s_a_function.html) （私钥）。

反向方式类似：即

```
RSAFunction publicKey = ...;

size_t modulusLength = publicKey.getModulus().ByteCount();
unsigned char * modulus = new unsigned char[modulusLength];
publicKey.getModulus().Encode(modulus, modulusLength);

// similarly with PublicExponent and remember to clean up the arrays. 
```

并将数组传输到您的 .NET 应用程序，您可以在其中使用它们来初始化 RSAParameters。

# javascript - UI iphone提交表单到javascript

> ID：919738
> 
> 赞同：0
> 
> 时间：2009-05-28T08:06:42.270
> 
> 标签：javascript, iphone, user-interface

我想在 UI iphone（不是 web iphone）中创建一个按钮，以向 Javascipt 提交表单（带有元素），如下所述：

*   我的页面中已经有一个 javascript 文件：htpp:/www.myaddress/myfile.js 这个 javascript 包含一个名为“doTransmit(PIOform)”的函数。

*   我想在 UI iphone 应用程序中创建一个表单，其中包含一些字段：txtField1、txtField2、.. 和一个按钮。该 UI 表单**类似于**下面的 html 表单：

    <form name=PIOForm action="server_address" >
        <input type="text" name="txtField1">
        ......
    </form>
    <input type="submit" value="submit" >

*   当我单击该 UI 按钮时，它将从上面的 javascript myfile.js 调用 doTransmit(PIOform) 函数。（注意：myfile.js 将从 UI iphone 获取和处理参数）

如何使用按钮将 UI 表单提交到 javascript？请帮我。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T15:03:54.427

为什么不只是使用 NSURLConnection 来提交表单数据？无论如何，您都必须在 Javascript 表单中填充数据，因此使用 javascript 进行提交并不能为您节省任何东西。

如果您愿意，UIWebView 允许您调用 javascript 方法，但您不太可能真的想要这样做。

# scripting - 用于创建开发环境文件夹结构的脚本？

> ID：919739
> 
> 赞同：0
> 
> 时间：2009-05-28T08:06:51.397
> 
> 标签：scripting, project-management, project-planning

用于为开发环境创建文件夹结构的简单脚本（ cmd.exe 批处理、*nix shell 、perl、python 或其他任何东西 .. ）看起来如何。

假设我们在一个需要 10 多个开发人员的项目中，我们确实希望确保他们所有人都获得相同的库和环境，以确保“我们处于相同的波长”......

编辑：感谢[randog](https://stackoverflow.com/users/110177/raindog-2) ......即使使用版本控制系统（例如首先存储在存储库中的文件夹结构是什么......

我的意思是：

```
::THIS BATCH FILE CREATES THE DEV ENVIRONMENT FOLDER STRUCTURE 
::CREATE THE COMMON LIBRARY FOLDER
MKDIR D:\libs\
:: FOLDER FOR LOGGING PLATFORMS - put log4net , etc here
MKDIR D:\libs\log
:: FOLDER FOR Object Relational Mapping libs
MKDIR D:\libs\orm
:: FOLDER FOR GUI 
MKDIR d:\libs\gui
:: folder for gui controls 
mkdir d:\libs\gui\controls

:: ... OTHER ?!

::CREATE THE DEVELOPER'S OWN LIBRARY FOLDER '
MKDIR D:\mylibs\
:: FOLDER FOR LOGGING PLATFORMS - put log4net , etc here
MKDIR D:\mylibs\log
:: FOLDER FOR Object Relational Mapping mylibs
MKDIR D:\mylibs\orm
:: FOLDER FOR GUI 
MKDIR d:\mylibs\gui
:: folder for gui controls 
mkdir d:\mylibs\gui\controls 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T08:11:27.270

您应该使用[版本控制系统](http://en.wikipedia.org/wiki/Revision_control)。当您的开发人员从存储库中签出代码时，将自动创建所需的目录结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T08:15:31.490

关于开发环境，我将在 tar/zip 文件中创建包含相关文件的整个目录结构。每个开发人员只需从该存档中提取所有内容即可安装其环境。

关于代码本身，每个开发人员都可以从中签出的远程存储库是最好的。

# html - 如果所有单元格都为空，是否会显示表格行？

> ID：919747
> 
> 赞同：5
> 
> 时间：2009-05-28T08:09:38.083
> 
> 标签：html, html-table

我有一个空表行，仅用于行之间的分隔。

```
<tr>
  <td colspan="5"></td>
</tr> 
```

它在 IE、FF、Opera 和 Safari 中呈现。问题是，我是应该在里面放一些内容还是可以保持原样？

喜欢：

```
<tr>
  <td colspan="5">&nbsp;</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T08:12:00.827

好吧，您可以放置​​一个`&nbsp;`as 列内容以确保显示行。更好的方法是使用 CSS 来设置间距。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-28T08:41:58.847

从语义上讲，空行是有目的的，还是纯粹是为了布局？如果是后者，可能值得考虑删除空行，并通过 CSS 提供分隔。例如

```
<tr class="separate-below">
    <td>Data before separater</td><td>More Data</td>...
</tr>
<tr>
    <td>Data after separater</td><td>More Data</td>...
</tr> 
```

在样式表中使用以下内容：

```
TR.separate-below TD,TR.separate-below TH {
    border-bottom: 1em solid white; /* use the background colour of a cell here */
} 
```

或者，您可以使用多个 <tbody> 元素将行块组合在一起（将 rules="groups" 添加到 table 元素会导致 <tbody> 元素在顶部和底部获得水平边框，而 <colgroup> 元素获得左右边框）：

```
<table rules="groups">
<thead>
    <tr><th>Header</th><th>Header</th>...</tr>
</thead>
<tbody>
    <tr><td>Data</td><td>Data</td>...</tr>
    <tr><td>Data</td><td>Data</td>...</tr>
    ...
</tbody>
<tbody>
    <tr><td>Data</td><td>Data</td>...</tr>
    ...
</tbody>
...
</table> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T22:17:43.567

正如你在W3Schools的[这个例子](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_table_nbsp)`&nbsp;`中看到的那样，使用是做你想做的最好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T08:14:16.157

如果你想把内容放在里面，我会使用 no-break-space: `&nbsp;`，而不是普通的空白

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-02T15:25:29.680

我想添加我的解决方案，这是对@Dariusz Sikorski 解决方案的修改。

```
td:empty:after, th:empty:after {
  content: "\00a0";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-28T13:33:16.437

这是一个非常古老的问题，但是如果有人仍然需要解决方案（使用`display: table-cell`or存在问题`table-row elements`）

这是解决方案：

```
.emptyElement:after{
  content: "\00a0";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-19T16:09:15.127

您可以使用多个`tbody`标签对表格行进行分组。它是完全有效且更具语义性的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-28T08:13:32.507

您可能已经尝试过，但是如果您尝试在行之间添加一些空格，您是否尝试过添加一些填充。

CELLSPACING=长度（单元格之间的间距）

CELLPADDING=长度（单元格内的间距）

卡尔

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-10-28T09:20:54.423

为了确保显示空单元格，可以使用以下 CSS：

```
table { empty-cells:show; } 
```

# multithreading - 访问 TObjectList 线程的不同索引是否安全？

> ID：919749
> 
> 赞同：1
> 
> 时间：2009-05-28T08:10:16.150
> 
> 标签：multithreading, delphi, thread-safety

我有一个 TObjectList 需要由多个线程处理。由于内部 TObjectList 从 TList 继承，而 TList 将其内部实现为数组，我想知道：

只要我们访问不同的索引，从不同的线程访问数组是否是线程安全的？

例如，有一个名为 myObjectList 的 TObjectList：

开始 = 0; end = myObjectList.Count div 2;

线程1：

```
for i := 0 to end do
  Process(myObjectList[i]); 
```

线程2：

```
for i := end + 1 to myObjectList.Count - 1 do
  Process(myObjectList[i]); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-28T08:26:37.363

像这样访问成员是完全可以的。
只要您不同时更改列表（例如添加、删除项目）。
如果某些底层对象是相同的，那么如果它们不是线程安全的，那么您可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T08:34:21.733

我会考虑使用 TThreadList，它提供了 Lock 和 Unlock 方法，您可以使用它以线程安全的方式更改列表。如果您更喜欢使用 TObjectList，您可以查看 TThreadList 的代码，并使用 TCriticalSection 自己进行锁定。

# math - 生成给定一组坐标所在的平面/曲面的函数

> ID：919758
> 
> 赞同：1
> 
> 时间：2009-05-28T08:13:44.067
> 
> 标签：math, coordinates, surface, coordinate-systems

这也与数学有关。但这在计算中也很有用。

假设你有 10 个坐标。(x1,y1)(x2,y2)..... 在二维空间中。（即在 XY 平面上）。我们能找到一条穿过每个坐标的平滑曲线吗？

在扩展问题的同时，如果空间是 3D 的，那么我们能否找到一个穿过给定空间坐标集的光滑表面的方程？

是否有任何库（任何语言）\ 工具来执行此类计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T09:04:53.870

您应该寻找的是一些实现 NURBS（或非均匀有理 B 样条）的库。这将解决您在 2d 和 3d 中的问题，因为 2d 只是 3d 的一个特例。

粗略地说，你对实际方程不感兴趣，你只对用平滑曲线或曲面近似的点感兴趣。这是通过在 2d 或 3d 空间中找到“控制点”来完成的，这些控制点与 B 样条基本函数相乘。NURBS 库将为您执行此操作。

干杯！

编辑：

看看[这个](http://webscripts.softpedia.com/script/Development-Scripts-js/C-C-Library/NURBS--26631.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:19:16.210

您始终可以通过这些点拟合 10 阶多项式。但是，这不一定是您想要做的 - 通过一系列样条曲线拟合平滑曲线会给您带来更好看的结果。维基百科上的[曲线拟合](http://en.wikipedia.org/wiki/Curve_fitting)文章为您提供了各种选项的良好概述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T08:20:11.557

在二维情况下，您要求进行曲线拟合。这实际上存在于 excel 中，您可以在其中绘制点（如果您列出了 x 和 y，我通常使用 XY 散点图），然后右键单击曲线。选择添加趋势线。在那里你可以选择你想要适合的函数类型，你可以让excel在图像中显示它（名为选项的选项卡，选中“在图表上显示方程”框）。又好又快。

否则，您可以使用 matlab 并使用 lsqr（最小二乘法）。如果您想找到最能描述您的数据的多项式，您可以使用 polyfit 函数。它使用最小二乘法，但返回系数。Matlab 有一整套其他算法，用于求解/寻找线性方程组的“最佳”近似值。我提到 lsqr 是因为如果您没有 matlab，它是最简单的实现方式之一。另一方面，它用于求解线性方程组 - 我对您的数据一无所知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T08:21:20.290

看看样条线

*   在[维基](http://en.wikipedia.org/wiki/Spline_(mathematics))
*   [交互式介绍](http://www.ibiblio.org/e-notes/Splines/Intro.htm)

搜索“样条插值库”可能会为实现提供一些有用的提示。

# php - 如何以频繁插入率提高 MySQL 查询的性能？

> ID：919767
> 
> 赞同：4
> 
> 时间：2009-05-28T08:17:33.763
> 
> 标签：php, mysql, performance, scalability

我有大约。表中有 200K 行`tb_post`，每 5 分钟有大约 200K 行。10个新插件。

我正在使用以下查询来获取行 -

```
SELECT tb_post.ID, tb_post.USER_ID, tb_post.TEXT, tb_post.RATING, tb_post.CREATED_AT,
       tb_user.ID, tb_user.NAME 
FROM tb_post, tb_user 
WHERE tb_post.USER_ID=tb_user.ID 
ORDER BY tb_post.RATING DESC 
LIMIT 30 
```

以排序方式获取所有行需要 10 多秒。

以下是 EXPLAIN 查询的报告：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE tb_user ALL PRIMARY NULL NULL NULL 20950 使用临时；使用文件排序
1 简单 tb_post ref tb_post_FI_1 tb_post_FI_1 4 tb_user.id 4
```

少量输入：

*   `tb_post.RATING`是浮点型
*   上有索引`tb_post.USER_ID`

谁能建议我一些关于如何优化此查询并提高其读取性能的指示？

PS：我是数据库扩展问题的新手。因此，任何类型的建议都将对此查询有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:18:07.930

您需要一个涵盖 ORDER BY 和 WHERE 子句的 tb_post 索引。

```
CREATE INDEX idx2 on tb_post (rating,user_id)
```

=> EXPLAIN SELECT ...ORDER BY tb_post.RATING DESC LIMIT 30 的输出

```
“id”；“select_type”；“table”；“type”；“possible_keys”；“key”；“key_len”；“ref”；“rows”；“Extra”
“1”；“简单”；“tb_post”；“索引”；NULL；“idx2”；“10”；NULL；“352”；“”
“1”；“简单”；“tb_user”；“ eq_ref ”；“PRIMARY”；“PRIMARY”；“4”；“test.tb_post.USER_ID”；“1”；“”
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T08:46:20.023

您可以尝试索引`tb_post.RATING`：MySQL 有时可以使用索引来优化`ORDER BY`子句：[http ://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

如果您尝试聚合来自不同表的数据，您还可以检查您想要的连接类型 ( [http://en.wikipedia.org/wiki/Join_(SQL)](http://en.wikipedia.org/wiki/Join_(SQL)) )。有些比其他更好，这取决于你想要什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T08:37:21.727

如果取消 ORDER BY 会发生什么，这会对性能产生影响吗？如果这有很大的影响，那么可以考虑索引 tb_post.RATING。

卡尔

# regex - 如何在 WatiN 中使用正则表达式

> ID：919772
> 
> 赞同：1
> 
> 时间：2009-05-28T08:20:42.367
> 
> 标签：regex, watin

我正在开发 WatiN 自动化工具。我在正则表达式中遇到问题。我的情况是我必须输入一些文本并单击弹出窗口中的按钮。我正在使用弹出窗口的 AttachToIE 方法和 URL 属性（“ [http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=ef5ad7ef5490-4656-9669-32464aeba7cd](http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=ef5ad7ef5490-4656-9669-32464aeba7cd) ”）附加到弹出窗口。

问题是每次弹出窗口出现时，URL 中的 ID 值都会发生变化。所以我无法访问弹出窗口。任何人都可以通过在下面的 URL 中给我正则表达式来帮助解决这个问题（“ [http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=ef5ad7ef5490-4656-9669-32464aeba7cd](http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=ef5ad7ef5490-4656-9669-32464aeba7cd) ")

感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T10:45:37.113

看来您有一个带有 2 个查询字符串参数**Type**和**ID**的 URL，您的模式是：

```
"http://192.168.25.10:215/admin/SelectUsers.aspx?Type=Feedback&ID={some id}" 
```

您可以使用`Find.ByUrl()`属性约束方法并将其传递给`AttachToIE()`如下所示的正则表达式以匹配该模式。

```
string url = "http://192.168.25.10:215/admin/SelectUsers.aspx?Type=Feedback&ID="
Regex regex = new Regex(url + "[a-z0-9]+", RegexOptions.IgnoreCase);
IE ie = IE.AttachToIE(Find.ByUrl(regex)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T10:03:01.210

```
string baseUrl ="http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID="
Regex urlIE= new Regex(baseUrl + "[\\wd]+", RegexOptions.IgnoreCase);
IE ie = IE.AttachToIE(Find.ByUrl(urlIE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-10T09:35:28.507

WatiN 有一个特性，我们可以通过忽略查询字符串来使用 url。下面是对我来说很好的代码。

字符串 baseUrl = " [http://192.168.25.10:215/admin/SelectUsers.aspx](http://192.168.25.10:215/admin/SelectUsers.aspx) "; IE 即 = IE.AttachToIE(Find.ByUrl(baseUrl,true));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T08:50:41.997

我对 WatiN 不熟悉，但它看起来像是在 .Net 上运行的，所以也许这可能会有所帮助？

```
var desiredId = "000000000000-0000-0000-000000000000";
var url = "http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=ef5ad7ef5490-4656-9669-32464aeba7cd&someMoreStuff";
var pattern = @"(?i)(?<=FeedBackId=)[-a-z0-9]+";
var result = Regex.Replace(url, pattern, desiredId);
Console.WriteLine(result);

//Output:  http://192.168.25.10:215/admin/SelectUsers.aspx?Type=FeedbackID=000000000000-0000-0000-000000000000&someMoreStuff 
```

以下模式应该具有相同的效果，但更具防御性。它应该只匹配查询字符串中的内容，它要求 id 为 35 个字符，并且不会匹配类似的参数名称，如“PreviousFeedBackId”。

```
var pattern = @"(?i)(?<=\?.*\bFeedBackId=)[-a-z0-9]{35,35}\b"; 
```

如果您只想提取 id：

```
var id = Regex.Match(url, pattern).Value;
Console.WriteLine(id);
//output: ef5ad7ef5490-4656-9669-32464aeba7cd 
```

# windows - 如何在 Windows 上获得我的 Arduino 草图的汇编语言列表？

> ID：919781
> 
> 赞同：15
> 
> 时间：2009-05-28T08:26:20.687
> 
> 标签：windows, assembly, arduino

我希望能够看到我的 Arduino 草图的汇编语言列表。我怎样才能做到这一点？

**更新：**我在 Windows 机器上运行 Arduino 软件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-30T23:27:27.833

一种方法是在构建创建`avr-objdump`的文件上使用。`.elf`例如，在 OS XI 上可以这样做：

```
$ cd ~/arduino-0015/examples/Digital/Blink/applet
$ avr-objdump -d Blink.elf

```

（显然，您在 Windows 上的路径可能不同。）这会产生代码的反汇编，其中一部分看起来像这样：

```
0000013a <主>:
 13a: 0e 94 3e 01 调用 0x27c <init>
 13e: 0e 94 97 00 调用 0x12e <设置>
 142: 0e 94 80 00 调用 0x100 <循环>
 146: fd cf rjmp .-6 ; 0x142 <主+0x8>

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-28T08:28:42.663

如果您使用的是 Linux，您可以按照[本教程了解如何在没有 IDE 的情况下为 Arduino 进行编译](http://www.johanneshoff.com/arduino-command-line.html)。

一旦你这样做了，你可以通过运行带有 -s 标志的 gcc 来获得一个程序集列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T15:45:31.673

以下（hacky）步骤将在 Windows 上提供 Arduino 草图和相关库的汇编语言列表：

1.  [将Arduino Windows 命令行批处理文件](http://www.arduino.cc/playground/Code/WindowsCommandLine)下载（并重命名）到包含您的草图（`.pde`文件）的目录中
2.  按照上述链接页面中的说明设置所需的环境变量
3.  添加`-S`到`abuild_gcc_opts`变量中`abuild.bat`（第 158 行）
4.  跑`abuild -r -c <pde_filename>`
5.  预计会收到以下警告和错误，您可以忽略它们：

    `... warning: #warning "This file has been moved to <util/delay.h>."`

    `.\obj\<pde_filename>.cpp.o: file format not recognized: treating as linker script`

    `.\obj\<pde_filename>.cpp.o:1: syntax error`

汇编语言列表可以在创建的目录中的`.o`文件中找到。`obj`例如草图本身的清单在`obj\<pde_filename>.cpp.o`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T21:54:19.160

-S（不是 s）标志也显示 c 代码。也称为混合列表：

linux: (.arduino/preferences.txt: delete_target_folder=false)

```
$ cd /tmp/buildxxxx.tmp
$ avr-objdump -dS Blink.cpp.elf

int main(void)
{
    init();
 2f4:   8a df           rcall   .-236       ; 0x20a <init>
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-02T00:35:15.667

Arduino 编译使用链接时优化 (LTO) 设置，在 C 编译期间创建的汇编文件不包含任何汇编代码 - 只是稍后在 LTO 阶段用于生成实际汇编代码的中间表示。我们想要后者。

碰巧的是，在整个编译过程中最后一次调用汇编程序是从 LTO 阶段获取输出，并将其转换为整个应用程序的目标文件。

要获取此程序集文件，请执行以下操作：

1.  打开`%LOCALAPPDATA%\Arduino15\packages\arduino\hardware\avr\1.8.3\platform.local.txt`（如果它不存在则创建它）。添加以下行

    ```
    compiler.c.elf.extra_flags=-save-temps=obj -fverbose-asm 
    ```

    如果那里已经有这样的行，只需添加上述选项（在右侧`=`）。

    **注意：**如果找不到该文件夹​​，请查找以下文件：`boards.txt`、`platform.txt`、`programmers.txt`。如果您在多个位置找到这些文件，那么您想要的文件应该*在您的主目录*中（即不在`Program Files`or`/Applications`或中`/usr`），并且应该至少部分与您正在使用的 Arduino 版本相关（如果您安装了多个版本）。

2.  再次构建草图。

3.  查找名为`%TEMP%\cc*.ltrans.s`. 每个构建都将创建一个新的此类文件。如果您按时间戳对它们进行排序，则最新的是最新版本。

**注意：**用符号括起来的环境变量`%`在 Windows 对话框中有效。您可以直接将这样的路径粘贴到例如打开或另存为...对话框中，它会起作用。带有 glob ( ) 的路径`*`将充当过滤器 (IIRC)。

要知道生成了哪个确切的`cc*.s`文件，请将详细选项添加到最终的二进制生成器通道中：

```
compiler.c.elf.extra_flags=-save-temps=obj -fverbose-asm -v 
```

重新构建，并将 Arduino 中编译状态窗口中的所有输出复制粘贴到例如 Notepad++，然后搜索`ar.exe`. 包含的唯一行以此文件`ar.exe`的名称结尾：`cc`

```
 c:/users/[...omitted...]/avr/bin/as.exe -mmcu=avr6 -mno-skip-bug 
    -o C:\Users\[...]\AppData\Local\Temp\cc3XhU2F.ltrans0.ltrans.o
    C:\Users\[...]\AppData\Local\Temp\cc3XhU2F.ltrans0.ltrans.s 
```

文件看起来如何？这是一个简短的摘录，只是为了表明 C 源代码和程序集是混合在一起的——这正是嵌入在`.hex`文件中并发送到目标的二进制文件。

```
.LBE33:
.LBE32:
.LBB34:
.LBB35:
 ;  C:\Users\[...]\Documents\Arduino\sketch_jul01a\sketch_jul01a.ino:29:   pinMode(ledPin, OUTPUT);
    .file 4 "C:\\Users\\[...]\\Documents\\Arduino\\sketch_jul01a\\sketch_jul01a.ino"
    .loc 4 29 0
    ldi r22,lo8(1)   ; ,
    ldi r24,lo8(13)  ; ,
    call pinMode     ; 
.LVL55:
 ;  C:\Users\[...]\Documents\Arduino\sketch_jul01a\sketch_jul01a.ino:30:   pinMode(relayPin, OUTPUT);
    .loc 4 30 0
    ldi r22,lo8(1)   ; ,
    ldi r24,lo8(12)  ; ,
    call pinMode     ; 
.LVL56:
 ;  C:\Users\[...]\Documents\Arduino\sketch_jul01a\sketch_jul01a.ino:31:   pinMode(ldrPin, INPUT);
    .loc 4 31 0
    ldi r22,0    ; 
    ldi r24,lo8(54)  ; ,
    call pinMode     ; 
.LVL57:
.LBE35:
.LBE34:
.LBB36:
.LBB37: 
```

这种方法也适用于 Linux 和 MacOS，只是路径略有不同，路径扩展使用不同的语法。关注的两个文件仍然是`platform.local.txt`- 您必须创建的文件，因为它最初不存在，以及`${TEMP}/cc*.ltrans.s`文件。

# inheritance - ibatis继承和一对多

> ID：919783
> 
> 赞同：1
> 
> 时间：2009-05-28T08:26:48.143
> 
> 标签：inheritance, ibatis

再会

我有一个复杂的模型（ddd），我想使用 ibatis 进行映射。

我的模型如下：

```
class A {
 int id;
 String title;
 List <B> b;
}

abstract class B {
 int id;
 String title;
 List <C> f;
 int type;
}

class BA extends B {

 BA() {
  setType(1);
 }
}

class BB extends B {

  BB {
   setType(2);
  }
} 
```

# 我当前的 XML 映射：

```
<sqlMap namespace="ABC">

  <resultMap id="aResult" class="A" groupBy="a_id">
    <result property="id" column=""a_id" />
    <result property="title" column="a_title" />
    <result property="b" resultMap="ABC.bResult" />
</resultMap> 

<resultMap id="bResult" class="java.util.HashMap">       
   <discriminator javaType="java.lang.Integer" column="b_type">
      <subMap value="1" resultMap="baResult" />
      <subMap value="2" resultMap="bbResult" />
   </discriminator>
</resultMap>

<resultMap id="baResult" class="BA">
  <result property="id" column="b_id" />
  <result property="title" column="b_title" />
</resultMap>

<resultMap id="bbResult" class="BB">
  <result property="id" column="b_id" />
  <result property="title" column="b_title" />
</resultMap>

<select id="aselect" resultMap="aResult">
select a.id as 'a_id', a.title as 'a_title', b.id as 'b_id', b.title as 'b_title', b.type as 'b_type'
from aa a left join bb b on a.id = b.aid
</select> 
```

# 表

```
aa (
id int not null primary key,
title varchar(50) not null
)

bb (
id int not null primary key,
aid int not null,
title varchar(50) not null
type int not null
) 
```

继承正在工作，但它只在 A（以太 BA 或 BB）事件中返回一个，尽管 b 是一个列表，并且 b（BA，BB）有多行你能帮我吗？

使用 BA 和 BB 类的原因是它们包含单独的业务逻辑（根据 DDD）。

我正在为 java 使用 ibatis 2.3.4.726

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-12T06:07:30.960

我想我找到了问题，映射是错误的。当它尝试这个时：

```
<resultMap id="aResult" class="A" groupBy="id"> 
```

有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T03:50:32.417

约翰，我认为没有足够的信息继续下去。

当您手动运行 SQL 查询时，您究竟会得到什么，您会得到多个结果行吗？也许您真的只得到一个结果行，它将映射到一个包含 List<B> 的单个 A，其中包含 BA 或 BB。

你能向我们展示你用来通过这个查询调用 iBatis 的 Java 代码吗？如果你说 queryForObject()，你只会得到一个顶级 A，而 queryForList() 会给你一个 List<A>。这听起来不像你的问题，但也许它是部分答案。

您的 SQL（缺少逗号）和 SQL Map（双引号）中有错误，但我认为这些是输入错误。

我认为您的 Java 结果对象需要是 JavaBeans，因此必须具有 get/set 方法，您没有在上面显示。但如果这是问题所在，我希望你不会取回任何数据。

# c# - c# [NonSerialized] 具有内联初始化的字段在反序列化后未初始化

> ID：919790
> 
> 赞同：3
> 
> 时间：2009-05-28T08:28:54.940
> 
> 标签：c#, serialization, initialization

我的类中有一个 [Nonserialized] 字段，它是内联初始化的：

```
[NonSerialized]
private bool running = true; 
```

但是，在反序列化一个对象后，我运行了 == false。这不是我想要的。我可以强制内联初始化为所有 [NonSerialized] 字段工作吗？否则我将不得不实现 ISerializable ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T08:30:34.767

~~您可以在默认构造函数中设置它。~~

实现 System.Runtime.Serialization.IDeserializationCallback

它在对象被反序列化后被调用，因此您可以在那里执行额外的初始化。

# sharepoint - 错误 1325。“SharePointData”在 Sharepoint 卸载期间不是有效的短文件名

> ID：919791
> 
> 赞同：1
> 
> 时间：2009-05-28T08:28:56.983
> 
> 标签：sharepoint, uninstallation

错误 1325。“SharePointData”不是有效的短文件名

有谁知道为什么在卸载 Windows SharePoint Services 3.0 时会出现此错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T14:59:06.447

您是否重新安装了 SharePoint 或移动了它？Office 也会发生类似的情况：

[http://support.microsoft.com/kb/328162/en-us?spid=2533&sid=1339](http://support.microsoft.com/kb/328162/en-us?spid=2533&sid=1339)

并由[Windows Installer Cleaner 清理](http://support.microsoft.com/kb/290301/)。

# c# - 更改表单控件框的标准蓝色

> ID：919793
> 
> 赞同：0
> 
> 时间：2009-05-28T08:30:52.333
> 
> 标签：c#, .net, winforms, background

有没有办法可以在.NET winform 应用程序中更改表单控制框的颜色，即具有关闭-最小化-最大化按钮的框？我需要更改该蓝色以匹配该表单中不同控件的颜色。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T08:35:51.213

它是由系统绘制的，所以我认为它不会完全“容易”。

我唯一能想到的就是关闭系统按钮，然后手动绘制和处理你自己的。

# java - 互动你去哪儿了？

> ID：919796
> 
> 赞同：3
> 
> 时间：2009-05-28T08:33:15.197
> 
> 标签：java, charts, birt

我一直在浏览您的许多有关 BIRT 的网站，特别是有关交互性或脚本相关主题的网站。

但是（生活在一个完美无瑕的世界中真是太好了）尝试执行一些示例（例如这个[http://kickjava.com/src/org/eclipse/birt/chart/examples/api/interactivity/InteractivityCharts.java .htm](http://kickjava.com/src/org/eclipse/birt/chart/examples/api/interactivity/InteractivityCharts.java.htm)），它应该制作交互式图表我什么也没得到......嗯，是的，我得到了一些东西：图表（顺便说一下非常好的;p）但我已经搜索了交互性aaaaa并且它已经消失了......可能是游泳池或洗衣房，但肯定不在那里......如果你愿意，我可以把我用来显示图表的代码或你想要的任何东西发给你，但我真的需要让我的图表互动，感到很无助和心烦意乱（我宁愿茫然和困惑......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T15:27:35.027

对基于 BIRT 的内容进行交互的最简单途径是 Interactive Viewer。看看这里的规格：http: [//www.birt-exchange.com/be/products/birt-report-viewers/actuate-interactive-viewer/features/](http://www.birt-exchange.com/be/products/birt-report-viewers/actuate-interactive-viewer/features/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-08T13:35:25.560

在声明你的 IDeviceRenderer 之后，你必须 idr.setProperty(IDeviceRenderer.UPDATE_NOTIFIER, anyclass that implements IUpdateNotifier);

然后你有很多关于 [http://www.birt-exchange.org/documentation/BIRT_220/ChartJavadoc/chart/api/org/eclipse/birt/chart/device/IUpdateNotifier.html的文档](http://www.birt-exchange.org/documentation/BIRT_220/ChartJavadoc/chart/api/org/eclipse/birt/chart/device/IUpdateNotifier.html)

谷歌永远是你的朋友^^

# java - 查看登录设备

> ID：919798
> 
> 赞同：4
> 
> 时间：2009-05-28T08:33:31.203
> 
> 标签：java, android, logging

我想查看`Log`设备上的，即`System.out.println()`. 我可以在*DDMS*上查看，但如何在运行*APK*文件时在设备屏幕上查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-30T21:24:50.000

还有一个适用于 android 的 Logcat 应用程序。

**code.google.com/p/android-random/downloads/list**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T14:56:09.247

如果您的手机有 root 权限，您可以`logcat`在应用程序中使用该实用`Terminal`程序：

```
# logcat
D/dalvikvm(  142): GC freed 200 objects / 8744 bytes in 254ms
etc..
```

它显示与另一个答案中建议的命令相同的日志 ( `/dev/log/main`) 。`adb logcat`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-28T12:24:25.713

在 PC 的命令行上运行“adb logcat”也可以。您想在设备屏幕上查看日志输出吗？嗯，为什么？我不相信您可以调用外壳程序或从应用程序访问日志，除非您的设备已植根。

当然，您可以做的是在您的应用程序中创建一个 TextView，并使用您喜欢的任何消息更新其内容。

# sql-server - 如何从 SQL Server 2005 中的存储过程中提取参数？

> ID：919799
> 
> 赞同：3
> 
> 时间：2009-05-28T08:33:40.563
> 
> 标签：sql-server

给定一个存储过程，我想从中提取参数。

我怎样才能在.net中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T08:56:00.377

您可以在 SQL Server 2005 中运行以下 SQL 查询。您当然可以使用`SqlCommand`该类调用相同的查询。

```
SELECT
    p.name,
    p.object_id,
    pm.parameter_id,
    pm.name AS parameter_name,
    pm.system_type_id AS parameter_system_type_id,
    pm.max_length AS parameter_max_length,
    t.name AS type_name
FROM sys.procedures p
JOIN sys.parameters pm ON p.object_id = pm.object_id
JOIN sys.types t ON pm.system_type_id = t.system_type_id
WHERE p.name = 'sprocName' 
```

当然`procedures`，`parameters`和`types`system 视图也包含其他有趣的存储过程和参数信息。此查询只是一个选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:50:56.113

您应该使用 SqlCommandBuilder.DeriveParameter，它是 Shared (VB.NET) 或 Static (C#)，您将 SqlCommand: [DeriveParameter on MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.deriveparameters.aspx)传递给它。您只需创建一个 SqlCommand，设置存储过程的名称，调用此方法并查看 SqlCommand.Parameters 属性。

# lamp - 通过 MAC 地址限制访问

> ID：919801
> 
> 赞同：1
> 
> 时间：2009-05-28T08:34:15.867
> 
> 标签：lamp, mac-address

我正在旧 PC 上设置 WAMP/LAMP 堆栈。这台计算机将与大约十二台其他 PC 连接到本地网络。我有兴趣限制来自其他人的计算机的访问，以便只有我和我的伙伴可以访问我们的本地服务器。我认为最好的方法是阻止其他人的 MAC 地址（路由器自动分配 IP，所以我不想依赖它）。我想补充一点，我无权访问路由器的配置页面，因此必须从服务器本身完成。

任何人都可以扩展这是如何完成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T09:07:49.667

linux/iptables，一种黑名单方式，这将丢弃来自指定 mac 地址的所有流量：

```
iptables -I INPUT 1 -m mac --mac-source <blacklisted mac 1> -j DROP
iptables -I INPUT 1 -m mac --mac-source <blacklisted mac 2> -j DROP 
```

但是，我不确定这是否是您想要的，mac-address 并不是过滤流量的可靠方法。大多数现代 NIC 都允许您更改 MAC 地址，如果以太网帧封装的 ip 数据包已通过路由器，则以太网帧上的源 MAC 地址将是最后一个它通过的路由器而不是原始计算机。

我建议研究 mod_auth_basic 或类似的东西，在犯错时它比 iptables 更宽容。如果你决定走 iptables 路线，我会建议更多的白名单方法，其中 iptables 默认丢弃某些流量，然后允许通过你想要的。

```
iptables -A INPUT -p tcp --dport 80 -m mac --source <your mac> -j ACCEPT
iptables -A INPUT -p tcp --dport 80 -m mac --source <your partners mac> -j ACCEPT
iptables -A INPUT -p tcp --dport 80 -j DROP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T08:38:23.847

首先要看的是路由器的控制面板。通常路由器（至少对于无线路由器）允许基于物理地址的访问控制。

对您有帮助的第二件事是防火墙。寻找通过 mac 地址限制访问的防火墙（如果您使用的是 linux，我很确定它已经具有此功能，在我的 wintel 上，我使用的是 Comodo Personal Firewall，它允许我按物理地址进行过滤。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T08:46:50.333

如果您不能摆弄路由器，那么您必须对服务器本身实施限制：根据您想要的偏执程度，您想到的一些选项是：

*   最简单 - 在 Apache 中设置一个 VirtualHost，将主机名设置为无法通过 DNS 解析的唯一名称：只需将此条目添加到本地主机文件，然后瞧 - 任何通过 IP 访问服务器的人都将获得默认的 Apache 主机（欢迎页面）。
*   中 - 使用 mod_auth_basic 添加基本（通过 htpasswd 的用户名 + 密码）访问网络服务器
*   最难 - 添加 iptables 规则以阻止对端口 80 的所有访问，除了来自给定 mac 的访问

# c# - 如何从代码运行命令行命令

> ID：919803
> 
> 赞同：3
> 
> 时间：2009-05-28T08:35:20.327
> 
> 标签：c#, .net, command-line, batch-file

我需要做两件事：运行一个批处理文件（工作正常），并运行一个命令（不工作）。该命令的方法引发异常“找不到文件”。如果我打开一个 cmd 窗口并输入命令，它会完美运行。

```
 private static void Rescan()
    {
        //System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo("DEVCON ReScan");
        //psi.RedirectStandardOutput = true;
        //psi.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        //psi.UseShellExecute = false;
        //System.Diagnostics.Process proc = System.Diagnostics.Process.Start(psi);
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.FileName = "DEVCON ReScan";
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.UseShellExecute = false;
        proc.Start();
        proc.WaitForExit();
        System.IO.StreamReader myOutput = proc.StandardOutput;
        proc.WaitForExit(4000);
        if (proc.HasExited)
        {
            string output = myOutput.ReadToEnd();
            FileIO.WriteLog(_writePath, output);
        }

    } 
```

注释代码也抛出相同的异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-28T08:39:32.797

`DEVCON ReScan`真的是可执行文件的名称吗？我猜可执行文件是 DEVCON，而 ReScan 是一个参数。这意味着您必须将 StartInfo.FileName 设置为“DEVCON”，并将 StartInfo.Arguments 设置为“ReScan”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T08:39:34.107

DEVCON 应用程序实际上是否在工作目录中？否则，除非您指定它的完整路径，否则它将不起作用。

此外，您必须指定扩展名，所以我想您会选择“Devcon.exe”，并且不是在文件名中而是在参数中指定参数:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T08:52:38.480

尝试这个：

```
 ProcessStartInfo psi = new ProcessStartInfo();            
        psi.FileName = Environment.GetEnvironmentVariable("comspec");
        psi.CreateNoWindow = true;
        psi.RedirectStandardError = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.UseShellExecute = false;

        Process p = Process.Start(psi);

        ConsoleColor fc = Console.ForegroundColor;

        StreamWriter sw = p.StandardInput;
        StreamReader sr = p.StandardOutput;

        char[] buffer = new char[1024];
        int l = 0;

        sw.Write("DEVCON ReScan");
        sw.Write(sw.NewLine);

        Console.Write(">> ");

        l = sr.Read(buffer, 0, buffer.Length);

        for (int n = 0; n < l; n++)
            Console.Write(buffer[n] + " ");

        p.Close(); 
```

# asp.net - asp.net make 按钮显示 MultiView 的不同视图并下载文件

> ID：919809
> 
> 赞同：0
> 
> 时间：2009-05-28T08:36:42.663
> 
> 标签：asp.net

我的网站上有一个页面，用户必须在该页面上填写详细信息才能下载文档。用户详细信息部分位于 MultiView 控件中的第一个视图上。

填写完他们的详细信息后，我希望用户单击一个按钮，该按钮将向他们显示文件下载提示（我已使用 ashx 处理程序成功完成此操作），*然后*将他们重定向到 MultiView 的第二个视图页面，该页面将显示“感谢您下载”或类似的东西。

我`Response.Redirect("~/DownloadHandler.ashx");`在按钮单击事件处理程序中尝试了通常的方法，但显然这会阻止页面完成回发并显示 MultiView 的最后一页。

有没有办法解决这个问题，还是我应该改变我的用户界面来适应这个？

**编辑：** 我已经得出结论，最好只提供文档的超链接（在我的确认页面上，并相应地更改措辞），因为这提供了独立于他们使用的浏览器的一致用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T19:11:46.623

继续，将它们带到 MultiView 的第二个视图。添加一个将下载文档的 javascript 方法，并从您的代码隐藏中触发它。1 例如，

在您的页面中：

```
<script>
function downloadFile(url) {
 window.location = url;
 //you could also try window.open(url, 'Download')
}
</script> 
```

在您后面的代码中：

```
script = string.Format("downloadFile('{0}');", "DownloadHandler.ashx");
Page.ClientScriptManager.RegisterStartupScript(typeof(Page), "download", script, true); 
```

您还可以在下载文件之前添加延迟（使用 setTimeout）。

更多信息： [启动一个运行良好的文件下载，即使在 IE 中？](https://stackoverflow.com/questions/727934/initiating-a-file-download-that-works-well-even-in-ie)

# web-services - “该文件尚未预编译，无法请求”

> ID：919814
> 
> 赞同：9
> 
> 时间：2009-05-28T08:38:56.903
> 
> 标签：web-services, iis, exception

我在 Windows 2003、IIS 6 服务器上安装了一组标准 Web 服务。当我通过浏览器访问任何 Web 服务时，我会看到一个 .NET 黄色屏幕，但以下情况除外：

**文件“/SuperOfficeWebService/Contact.asmx”尚未预编译，无法请求。**

相同的标准 Web 服务（通过 .msi 安装）可以在其他机器上运行。

正如预期的那样，.asmx 文件仅包含文本“这是由预编译工具生成的标记文件，不应删除！”。

在 bin\ 子文件夹中，我有与 .asmx 文件匹配的 .compiled 文件。

什么可能导致错误消息？任何阻止 IIS 加载编译文件的 IIS 设置或 .NET 2.0 设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-08-02T21:50:55.370

如果其他人仍在寻找解决方案，我遇到了同样的问题。我的问题是我使用了错误框架文件夹中的“aspnet_compiler”。我的项目是在 VS'05 和 .net 2.0 中创建的。当我需要从“c:...\v2.xxxx”进行预编译时，我试图从“c:\windows\Microsoft .NET\Framework\v4.xxxx”进行预编译。

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T21:40:54.763

通过安装“Microsoft Web Service Enhancements v3.0”解决了这个问题。

可以在这里下载：[http ://www.google.no/search?hl=no&q=microsoft+web+services+enhancements+3.0+download&cad=h](http://www.google.no/search?hl=no&q=microsoft+web+services+enhancements+3.0+download&cad=h)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-09T15:45:58.143

我有同样的信息，但没有网络服务。在我的例子中，它是一个普通的 ASP.NET 2.0 Web 应用程序，它也恰好使用 AJAX Control Toolkit v1.0.61025。当我追踪它时，我发现我的环境（VS 或我的插件之一）从我的 web.config 中删除了两个元素：

*   “程序集”标签缺少两行：

    ```
    <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.Extensions.Design, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
    ```

*   “system.web”部分还缺少这些行：

    ```
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules> 
    ```

我正在做 XCOPY 部署并使用 web.config 来控制开发和实时（连接字符串等）之间的差异。在 VS 中发布（到我的开发箱上的文件夹）后，我删除了 web.config（因为它有我的开发设置）并继续使用相同的 web.config。因为实时 web.config 有这些缺失的行，所以我一直在针对 web.config 进行编译，它的不同之处不仅仅是几个应用程序键值。

在我的开发环境中恢复这些行并重新发布解决了这个问题。哇，他们刚刚从我的 VS 2010 中消失了，我最好记录一个问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-07T10:32:20.570

我遇到了同样的问题，并通过运行以下命令将正确的编译器与 IIS 重新关联来修复它。

转到您要使用的 .NET 版本的文件夹（即`C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727`：）

并运行：`aspnet_regiis -i`

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-08T01:37:50.023

如果您在运行 MSBuild 脚本时遇到此问题，则很可能您的项目是 2.0 或 3.5 项目，并且 MSBuild 使用的是 4.0 编译器。添加`TargetFrameworkMoniker="3.5"`到您的`AspNetCompiler`指令中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-23T19:21:47.007

在我们的案例中，我们在重新创建站点后收到了此消息。该站点上的文件必须使用 .NET 4.0.3 编译，IIS 默认为 2.0.5。我们必须在站点 > 属性 > ASP.NET 中更改 ASP.NET 版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-15T17:41:33.663

Bin deploying Microsoft.WebServices3.dll 3.0.5305.0 worked for me on Windows Server 2012 R2 with .Net Framework 4.5+. This option alleviates the need to install .Net Framework 3.5 and WSE 3.0.

# python - 带有长 Web 请求的进度条

> ID：919816
> 
> 赞同：3
> 
> 时间：2009-05-28T08:38:58.790
> 
> 标签：python, django

在我正在开发的 django 应用程序中，我刚刚添加了将多个文件（总共从 50mb 开始）存档到 zip 文件的功能。目前，我正在这样做：

```
get files to zip
zip all files
send HTML response 
```

显然，这会导致文件被压缩的第二行需要大量等待。我能做些什么来使这个过程对用户来说更好？尽管有一个进度条是最好的，即使它只是返回一个静态页面，上面写着“请稍候”或其他什么。

任何想法和想法都会受到喜爱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:15:37.467

您应该记住显示进度条可能不是一个好主意，因为您可能会超时或让您的服务器因同时提交大量请求而受到影响。

将压缩任务放入队列并让它回调以以某种方式通知用户 - 例如通过电子邮件 - 该过程已完成。

看看[django-lineup](http://code.google.com/p/django-lineup/)

你的代码看起来很像：

```
from lineup import registry
from lineup import _debug

def create_archive(queue_id, queue):
    queue.set_param("zip_link", _create_archive(resource = queue.context_object, user = queue.user))
    return queue

def create_archive_callback(queue_id, queue):
    _send_email_notification(subject = queue.get_param("zip_link"), user = queue.user)
    return queue

registry.register_job('create_archive', create_archive, callback = create_archive_callback) 
```

在您的视图中，通过以下方式创建排队任务：

```
 from lineup.factory import JobFactory
    j = JobFactory()
    j.create_job(self, 'create_archive', request.user, your_resource_object_containing_files_to_zip, { 'extra_param': 'value' }) 
```

然后运行您的队列处理器（可能在屏幕会话内）：

```
./manage.py run_queue 
```

哦，关于这个主题，您可能还对[估计 zip 文件创建时间](https://stackoverflow.com/questions/767684/estimating-zip-size-creation-time)感兴趣。我在那里得到了相当巧妙的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T15:21:38.167

有趣的事实：您也许可以使用进度条来诱使用户认为事情进展得比实际快。

[http://www.chrisharison.net/projects/progressbars/index.html](http://www.chrisharrison.net/projects/progressbars/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T09:21:27.613

您可以使用“日志文件”来跟踪压缩文件，以及还剩下多少文件。

程序方式应该是这样的：

1.  计算文件的数量，将其写入文本文件，格式类似于 totalfiles.filespreocessed
2.  您压缩的每个文件，只需更新文件

因此，如果您必须压缩 3 个文件，则日志文件将增长为：

```
3.0 -> begin, no file still processed
3.1 -> 1 file on 3 processed, 33% task complete
3.2 -> 2 file on 3 processed, 66% task complete
3.3 -> 3 file on 3 processed, 100% task complete 
```

然后使用简单的 ajax 函数（间隔）每秒检查一次日志文件。

在 python 中，打开、读取和写入如此小的文件应该非常快，但如果您有很多用户同时执行此操作，可能会导致一些请求问题，但显然您需要为每个请求，可能带有 rand 名称，并在任务完成后将其删除。

一个问题可能是，为了让 ajax 读取日志文件，每次更新时都需要在 python 中打开和关闭文件处理程序。

最后，为了获得更准确的进度表，您甚至可以使用文件大小而不是文件数作为参数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-28T09:10:37.400

比静态页面更好的是，显示带有 throbber 的 Javascript 对话框（使用 Shadowbox、JQuery UI 或一些自定义方法）（您可以在 hxxp://www.ajaxload.info/ 获得一些）。您还可以在页面中显示 throbber，无需对话框。大多数用户只想知道他们的操作正在被处理，并且可以在没有可靠的进度信息的情况下生存（“请稍候，这可能需要一些时间......”）

JQUery UI 还有一个进度条 API。您可以定期对网站上的特定页面进行 AJAX 查询，以获取进度报告并相应地更改进度条。根据归档运行的频率、可以触发归档的用户数量以及您对用户进行身份验证的方式，这可能会非常困难。

# windows - 如何自动更新 Subversion 工作副本？

> ID：919822
> 
> 赞同：47
> 
> 时间：2009-05-28T08:39:59.037
> 
> 标签：windows, svn, scripting

有人知道我如何自动运行`svn update`吗？如果有人有脚本或类似的东西，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2010-10-15T15:05:36.797

我正在使用 TortoiseSVN。在生产服务器上，我有一个运行以下批处理文件的计划任务。

```
CD C:\Program Files\TortoiseSVN\bin\
START TortoiseProc.exe /command:update /path:"C:\www\MyRepo\" /closeonend:0 
```

希望这可以节省其他人一些时间！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-28T08:43:23.337

我使用位于系统托盘中的[SVN 通知程序](http://svnnotifier.tigris.org/)，并在每次存储库更改时通知我。我可以强烈推荐它。这意味着您仅在有要更新的内容时才更新！

或者，您可以设置一个计划的任务/cron 作业以`svn update`每小时/每天/任何时间在适当的目录中运行。

* * *

**编辑：**好的，看看[这篇](http://support.microsoft.com/kb/308569)关于设置计划任务的微软文章。

你想要一个名为 svnUpdate.bat 的批处理文件或类似这样的东西：

```
cd C:/path/to/your/working/copy
svn update 
```

让计划任务随心所欲地运行它（一小时一次似乎是明智的）

确保您已安装 svn 的命令行版本（我使用[SlikSvn](http://www.sliksvn.com/en/download)）并且在您的 PATH 中可用（在命令窗口类型中`svn`并确保它显示“Type svn help...”或类似内容。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-28T09:04:31.733

```
@echo off

cls
echo == Initiating system instance variables...
echo. -- Setting the variables...

:: Here you need to make some changes to suit your system.
set SOURCE=C:\sauce\CURRENT
set SVN=C:\Program Files\TortoiseSVN\bin

:: Unless you want to modify the script, this is enough.

echo. %SOURCE%
echo. %SVN%
echo. ++ Done setting variables.
echo.
echo == Updating source from SVN
echo. -- Running update...
"%SVN%\TortoiseProc.exe" /command:update /path:"%SOURCE%" /closeonend:2
echo. ++ Done.

echo. -- Cleaning up...
set SOURCE=
set SVN=
echo. ++ Done. 
```

如果您使用的是 TortoiseSVN，那么上面的批处理脚本就可以了。否则，您可以修改它以使用您当前使用的任何 SVN 客户端。只需将其放入 .bat 文件中并按需运行即可。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-12-21T06:55:50.723

您还可以从[http://code.google.com/p/commitmonitor/下载和使用](http://code.google.com/p/commitmonitor/)*Commit-Monitor*。它监视 SVN 存储库的提交并在发生时通知用户。它在 GNU GPL 版本 2 中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-28T08:46:21.990

注意：一旦我知道你的操作系统，我就能给你一个更详细的答案。

**一般说明**

1.  切勿更改本地存储库中的任何内容。
2.  阅读此[链接，了解如何使用 AT](http://support.microsoft.com/kb/313565)从 Windows 的命令行进行调度。
3.  使用 AT 命令调度以下命令（假设您安装了 svn 的命令行版本）：

    svn更新repository_directory

4.  利润！

# c# - 通过 MethodInfo 调用方法

> ID：919826
> 
> 赞同：7
> 
> 时间：2009-05-28T08:41:56.413
> 
> 标签：c#, reflection, invoke, methodinfo

我想调用具有特定属性的方法。因此，我正在循环浏览所有程序集和所有方法，以找到具有我的属性的方法。工作正常，但是当我只有 MethodInfo 时如何调用某个方法。

```
AppDomain app = AppDomain.CurrentDomain;
Assembly[] ass = app.GetAssemblies();
Type[] types;
foreach (Assembly a in ass)
{
    types = a.GetTypes();
    foreach (Type t in types)
    {
        MethodInfo[] methods = t.GetMethods();
        foreach (MethodInfo method in methods)
        {
            // Invoke a certain method
        }
    }
} 
```

问题是我不知道包含该特定方法的类的实例。所以我不能正确调用它，因为方法不是静态的。如果可能，我还想避免创建此类的新实例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T08:43:43.227

非静态方法是特定于实例的，因此您必须实例化该类才能调用该方法。如果您有能力更改定义它的代码并且该方法不需要自己成为实例的一部分（它不访问或修改类中的任何非静态属性或方法），那么最佳实践是无论如何都要使方法静态。

假设您不能将其设为静态，那么您需要的代码如下：

```
 foreach (Type t in types)
    {
            object instance = Activator.CreateInstance(t);

            MethodInfo[] methods = t.GetMethods();
            foreach (MethodInfo method in methods)
            {                    
                method.Invoke(instance, params...);    
            }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-28T08:50:49.500

就问题定义而不是编码而言，这让我觉得这是一个问题。

实例方法取决于调用它们的实例 - 调用实例方法而不关心它被调用的内容是没有意义的。（正如马丁所说，一个不关心它被调用的实例的实例方法应该几乎总是静态的。我能想到的唯一直接例外是虚拟方法，其中实例隐式指定要使用的实现。）

找出在您的上下文中存在带注释的实例方法的真正*含义。*为什么你仍然试图调用方法？更大的图景是什么？你有什么背景？*我强烈怀疑你会想要一些上下文的概念——你可以*调用实例方法的对象集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-17T12:29:09.397

实际上，我认为您需要做的是创建现有对象的列表，然后搜索该列表。因此，当您创建这些可调用对象时，您会将它们存储到列表中（或者该列表应该是其他类型的对象列表，这些对象也具有可调用对象的描述）。然后您可以在运行时扫描列表，找到与您正在处理的事件类型匹配的列表，然后查找它的 methodInfo 并在方法信息上调用 .Invoke，假设这就是您想要做的。您还需要传入适当的参数，但您可以通过创建正确类型的对象向量来做到这一点。

# c# - 使用 C# 和 ASP.NET 在电子邮件附件中发送 SQL 报告

> ID：919829
> 
> 赞同：7
> 
> 时间：2009-05-28T08:42:09.657
> 
> 标签：c#, asp.net, reporting-services

我正在尝试使用 ASP.NET 和 C# 将来自 sql reportserver 2008 的报告作为电子邮件附件发送，直到现在我学会了如何在我的代码中[以 PDF 格式获取报告](http://weblogs.asp.net/srkirkland/archive/2007/10/29/exporting-a-sql-server-reporting-services-2005-report-directly-to-pdf-or-excel.aspx)，现在我想结合如下代码行

```
byte[] bytes = rview.ServerReport.Render(format, deviceInfo, out mimeType, out encoding, out extension, out streamids, out warnings);
Response.OutputStream.Write(bytes, 0, bytes.Length);
Attachment reportAttachment = new Attachment(Response.OutputStream.Write(bytes,0,bytes.Length),"ado"); //Here I go wrong 
```

提前感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-11T12:14:58.730

您可以尝试使用从报表服务器返回的 byte[] 并附加以下内容，而不是先将 pdf 保存到文件系统中：

```
MemoryStream ms = new MemoryStream(bytes); 
mail.Attachments.Add(new Attachment(ms, "temp.pdf")); 
```

为了快速修改我的一份报告，我做了以下事情：

```
WebClient client = new WebClient();
byte[] bytes = client.DownloadData("http://localhost/ReportServer/Pages/ReportViewer.aspx? *** report name *** &rs%3aFormat=PDF");
MemoryStream ms = new MemoryStream(bytes);
mail.Attachments.Add(new Attachment(ms, "temp.pdf")); 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T17:28:08.130

也许我弄错了（我对 SSRS 知之甚少）但我认为你应该

1.  将文件保存到文件系统

    ```
    System.IO.File.WriteAllBytes("c:\temp\temp.pdf", bytes); 
    ```

2.  通过电子邮件发送文件

    ```
    MailMessage mail = new MailMessage();
    mail.From        = "Me";
    mail.To          = "You";
    mail.Subject     = "Subject";
    mail.Body        = "Body";
    mail.BodyFormat  = MailFormat.Html;
    mail.Attachments.Add(new MailAttachment("c:\temp\temp.pdf"));

    try
    {
       SmtpMail.Send(mail); 
    }
    catch(Exception ex)
    {
       Response.Write("Ouch! " + ex.Message);
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-27T14:11:03.227

您还可以使用 SSRS 订阅。它具有内置的电子邮件功能。

先决条件：

*   你已经建立了你的报告。
*   您已将 SSRS 报告服务器配置为发送电子邮件。
*   您的 SSRS 服务器是 2010 或更高版本。我不确定 2008 年及之前是否支持订阅。

[从 UI 的角度来看 Microsoft 的文档](https://msdn.microsoft.com/en-us/library/ms156307.aspx#bkmk_create_email_subscription)

代码：

```
var service = new ReportingService2010();
service.Url = reportServiceURL;
service.Credentials = new NetworkCredential(userName, password, domain);

var reportPath = "your/report/location";

string report = $"{reportPath}YourReportName.rdl";
string fileName = $"Your Custom Report";

//If your report requires input parameters, specify them in an array.
ParameterValue[] reportParameters = new ParameterValue[1];

reportParameters[0] = new ParameterValue();
reportParameters[0].Name = "ID";
reportParameters[0].Value = ID.ToString();

ParameterValue[] extensionParams = new ParameterValue[11];//Adjust this if you omit parameters.

extensionParams[0] = new ParameterValue();
extensionParams[0].Name = "TO";
extensionParams[0].Value = "BOB@company.com;Sharon@company.com;Bill.Gates@microsoft.com;"

//CC, can be omitted.
extensionParams[1] = new ParameterValue();
extensionParams[1].Name = "CC";
extensionParams[1].Value = "Doug@company.com;Hillary@company.com;"

//BCC, can be omitted.
extensionParams[2] = new ParameterValue();
extensionParams[2].Name = "BCC";
extensionParams[2].Value = "Doug@company.com;Hillary@company.com;"

//Reply to, where replies should go.
extensionParams[3] = new ParameterValue();
extensionParams[3].Name = "ReplyTo";
extensionParams[3].Value = "YourMonitoredMailbox@company.com"

//Include report as an attachment, this should be TRUE.
extensionParams[4] = new ParameterValue();
extensionParams[4].Name = "IncludeReport";
extensionParams[4].Value = "True"

//What you want the attached file to render as. You have some options.
extensionParams[5] = new ParameterValue();
extensionParams[5].Name = "RenderFormat";
extensionParams[5].Value = "PDF"; //pdf
//extensionParams[5].Value = "WORD"; //doc, word 2003 - 2007
//extensionParams[5].Value = "WORDOPENXML"; //docx, word 2010 - 2013+
//extensionParams[5].Value = "EXCEL"; //xls, excel 2003 - 2007
//extensionParams[5].Value = "EXCELOPENXML"; //xlsx, excel 2010 - 2013+
//extensionParams[5].Value = "IMAGE"; //TIFF file
//extensionParams[5].Value = "CSV"; //CSV file
//extensionParams[5].Value = "XML"; //XML file

//Optional, set the priority of the message.
extensionParams[6] = new ParameterValue();
extensionParams[6].Name = "Priority";
extensionParams[6].Value = "High";
//extensionParams[6].Value = "Normal";
//extensionParams[6].Value = "Low";

//Subject Line
extensionParams[7] = new ParameterValue();
extensionParams[7].Name = "Subject";
extensionParams[7].Value = "Your lovely report";

//Comment, I believe this is the "body" of the email.
extensionParams[8] = new ParameterValue();
extensionParams[8].Name = "Comment";
extensionParams[8].Value = "Hi there, <br/><br/>I have your report. Thanks for automating me out of the job, you programmer you!";

//Include a hyperlink to run the report in the email body?  Can be omitted.
extensionParams[9] = new ParameterValue();
extensionParams[9].Name = "IncludeLink";
extensionParams[9].Value = "False";

//If you want to send it "on behalf of" someone, use this. Can be omitted.
extensionParams[10] = new ParameterValue();
extensionParams[10].Name = "SendEmailToUserAlias";
extensionParams[10].Value = "Bob.McCarthy@company.com";

ExtensionSettings extSettings = new ExtensionSettings();
extSettings.ParameterValues = extensionParams;
extSettings.Extension = "Report Server Email";

//FYI date must be in ISO 8601 format. This sets it to one minute from now, and will only run once.
string matchData = $"<ScheduleDefinition><StartDateTime>{DateTime.Now.AddMinutes(1).ToString("s")}</StartDateTime></ScheduleDefinition>";

reportingService.CreateSubscription(reportName, extSettings, fileName, "TimedSubscription", matchData, reportParameters); 
```

# iphone - UINavigationController的后退按钮消失？

> ID：919832
> 
> 赞同：11
> 
> 时间：2009-05-28T08:43:28.250
> 
> 标签：iphone, objective-c, cocoa-touch

我注意到我的一个视图控制器发生了一些奇怪的事情：后退按钮消失了，但可以通过点击左上角（即按钮所在的位置）返回到上一个视图控制器。

在我的整个文件中，没有将 self.navigationItem.hidesBackButton 设置为 YES 的行；NSLog 也会在 viewDidLoad 中打印 0 作为 self.navigationItem.hidesBackButton 的值。

这发生在模拟器和真实设备中。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-28T08:59:03.040

哦亲爱的。在之前的视图控制器的实现中，我不小心将self.title设置为@""，导致了这个烦人的bug。

删除此行即可解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T15:59:17.663

我有一个递归导航控制器，这也发生在我身上，我用这段代码来修复它：

```
self.navigationItem.leftItemsSupplementBackButton = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-16T10:27:09.910

以防万一有人使用自定义后退按钮遇到此问题并且上述修复不起作用，这是我遇到的类似问题，但我遇到了不同的解决方案。

我有一个自定义的后退按钮，其文本正在消失，而箭头可以看到[UINavigationController 自定义后退按钮从 NavigationBar 消失](https://stackoverflow.com/questions/68148746/ios-custom-navigation-bar-back-button-title-disappears-on-tapping/68407325#68407325)

因此，如果有人遇到类似的情况，自定义后退按钮上的后退按钮文本消失，这是我的方案和修复。

我在自定义 NavigationController 类中自定义了我的后退按钮，如下所示：

```
private func customizeBackButton() {
    let backImage = UIImage(named: "BackButton")?.withRenderingMode(.alwaysOriginal)
    navigationBar.backIndicatorImage = backImage
    navigationBar.backIndicatorTransitionMaskImage = backImage

    UIBarButtonItem.appearance().setTitleTextAttributes([
      NSAttributedString.Key.foregroundColor: UIColor.panoStoryYellow,
      NSAttributedString.Key.font: UIFont(name: "Montserrat-SemiBold", size: 15)!
    ], for: .normal)
} 
```

这给了我：

[![UINavigationController 自定义后退按钮](https://i.stack.imgur.com/swgii.png)](https://i.stack.imgur.com/swgii.png)

现在，当我点击后退按钮文本时，文本消失了： [![UINavigationController UINavigationBarButton 后退按钮消失](https://i.stack.imgur.com/OnDLd.png)](https://i.stack.imgur.com/OnDLd.png)

我确保我遵循了上述所有答案，例如设置标题以确保色调有效等。但这不起作用。

就我而言，我需要为`highlighted`后退按钮的状态设置属性，如下所示：

```
UIBarButtonItem.appearance().setTitleTextAttributes([
      NSAttributedString.Key.foregroundColor: UIColor.panoStoryYellow,
      NSAttributedString.Key.font: UIFont(name: "Montserrat-SemiBold", size: 15)!
], for: .highlighted) 
```

在此之后，后退按钮文本从未消失

# unix - 在 Unix 中，我如何找出哪些可执行文件或进程正在使用我的共享库？

> ID：919835
> 
> 赞同：0
> 
> 时间：2009-05-28T08:43:53.337
> 
> 标签：unix, shell, shared

如何在 Unix 环境（特别是 AIX 环境）中找出哪些可执行文件或进程正在使用我的共享库对象。有什么命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T08:58:21.637

在 linux 中，你会：

```
for i in /usr/bin /bin /usr/local/bin /sbin /...; do
  # edit: bug fix to display which filename has the library
  # the egrep component will extract line with your library
  # or line with ":::", which contains name of the binary
  find /usr/bin -printf '::: %p\n' -exec ldd \{\} \; | egrep 'your lib. name|:::'
done 
```

可以找到 AIX 的 ldd 包，如下[所述](http://www.faqs.org/faqs/aix-faq/part4/section-22.html)

要检查正在运行的进程，您可以： lsof | grep '你的图书馆名称'。如何获取 AIX 的 lsof 可以在[这里找到](http://www.ibm.com/developerworks/aix/library/au-lsof.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T08:57:38.033

不确定它是否会有所帮助，但也许你可以[lsof](http://en.wikipedia.org/wiki/Lsof)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T15:16:00.470

[fuser](http://publib.boulder.ibm.com/infocenter/systems/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds2/fuser.htm)可能是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T23:05:45.060

在 Solaris Open 或其他情况下：

例如; 一些输出被抑制...

mybox@myplace02:~$ pldd ``pgrep pidgin `5451: pidgin
/usr/lib/libc/libc_hwcap1.so.1
/usr/lib/libgdk-x11-2.0.so.0.1400.3
/usr/lib/libgdk_pixbuf-2.0.so.0.1400.3
/usr/lib/libglib-2.0.so.0.1800.0
/usr/lib/libgobject-2.0.so.0.1800.0
/usr/lib/libmlib.so .2
/usr/lib/libmlib/libmlib_sse2.so.2
/usr/lib/libgthread-2.0.so.0.1800.0
/lib/libpthread.so.1
/usr/lib/locale/en_US.UTF-8/en_US .UTF-8.so.3
/usr/lib/locale/common/methods_unicode.so.3
/lib/libthread.so.1
/usr/lib/libpurple.so.0.5.1
/lib/libnsl.so.1
/usr/lib/libgtk-x11-2.0.so.0.1400.3` 

 `# data-structures - 固定大小的 FIFO 队列的正确术语是什么？

> ID：919837
> 
> 赞同：6
> 
> 时间：2009-05-28T08:44:37.000
> 
> 标签：data-structures, queue, collections, fifo

以下数据结构的正确名称是什么？这是：

*   固定大小的队列
*   新元素被添加到开头
*   每当队列超过一定大小时，就会从末尾删除一些元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T09:09:04.657

“固定大小的 FIFO 队列”

有时是缓冲区，有时是环形缓冲区（通常是这样实现的）。我不知道有什么表明您批量删除项目的策略，尽管这并不少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T09:03:44.387

它是一个[循环缓冲区](http://www.boost.org/doc/libs/1_39_0/libs/circular_buffer/doc/circular_buffer.html#briefexample)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T09:07:02.120

我认为这可能取决于这个的实际实施。您描述的一个实际示例是[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)或环形缓冲区，一旦缓冲区已满，最旧的数据就会被新数据覆盖。这将是用 C 语言实现这种数据结构的传统方法之一。

**编辑：**好的，所以循环缓冲区不太合适。**有限缓冲队列**或**有限容量队列**怎么样？但那些并没有真正涵盖自我限制方面......

自限有限容量 Bratt 队列。

自动弹出...

我的观点是，我不认为具有您提到的*确切*属性的数据结构的正式名称，因此您不妨根据最接近它的数据结构来组成一个，也许结合您的一些结构独特的属性。不过可能会很啰嗦……

**编辑：**或者它可能是一个[Cyclic Queue](http://www.codeproject.com/KB/cs/cyclicqueue.aspx)。文章将其描述为：

> 本文描述了一个类似于 System.Collections.Queue 的队列，不同之处在于它具有 > 固定的缓冲区大小。当然，这意味着缓冲区不能足够大以 > 容纳添加到队列中的所有项目，在这种情况下，最旧的项目将被丢弃。

...听起来很像你的。又好又简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T17:18:06.403

在嵌入式系统中，这几乎被普遍称为循环缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T09:08:21.740

在硬件中，类似的结构称为[移位寄存器](http://en.wikipedia.org/wiki/Shift_register)。

# .net - 日内瓦框架的替代方案

> ID：919847
> 
> 赞同：1
> 
> 时间：2009-05-28T08:48:11.580
> 
> 标签：.net, geneva-framework

是否有[Microsoft Geneva Framework](https://connect.microsoft.com/site/sitehome.aspx?SiteID=642)的替代品（最好是开源的）。我们计划在生产环境中使用它，但看起来微软的许可证在日内瓦框架处于测试阶段时不允许这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T08:56:14.573

怕不是。这是一种全新的方法，因此没有开源或任何其他替代方案。根据您想要做的事情，您可以选择，但对于基于完整声明的身份验证和授权，那么日内瓦就是现在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-24T14:45:20.873

我在同一条船上。我刚开始研究 Java Central Authentication Service [http://www.jasig.org/cas](http://www.jasig.org/cas)。我希望我可以通过配置运行它并通过 Web 服务连接我的 asp.net 应用程序。

# command-line - 什么程序可以帮助 REPL shell 记住和搜索历史？

> ID：919855
> 
> 赞同：6
> 
> 时间：2009-05-28T08:51:51.447
> 
> 标签：command-line, emacs, lisp, read-eval-print-loop

我正在玩 Paul Graham 的[arc](http://arclanguage.org/)，向上箭头插入 ^[[A 而不是前面的命令，并且 ^R 不像在 shell 中那样工作，这真的很烦人。我隐约记得有一种简单的方法可以在一个程序中运行 Arc 的 REPL，它会记住输入历史——有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T08:54:59.617

也许您正在考虑[rlwrap](http://utopia.knoware.nl/~hlub/uck/rlwrap/)？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-28T09:14:57.377

我也喜欢[rlwrap](http://utopia.knoware.nl/~hlub/uck/rlwrap/)，但其他选项包括：

*   [Emacs](http://www.gnu.org/software/emacs/)模式：
    *   [贝壳](http://www.gnu.org/software/emacs/manual/html_node/emacs/Interactive-Shell.html#Interactive-Shell)
    *   [学期](http://www.gnu.org/software/emacs/manual/html_node/emacs/Terminal-emulator.html#Terminal-emulator)
    *   [comint](http://www.emacswiki.org/emacs/ComintMode)
    *   [Slime](http://common-lisp.net/project/slime/)（适用于 Common Lisps 和 Clojure，可能不适用于 Arc）
*   [ssfe（ sirc](http://www.iagora.com/~espel/sirc/sirc.html)的前端部分）
*   [jline](http://jline.sourceforge.net/)（特别是如果 REPL 是用 Java 编写的，而 arc 不是）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-11T08:21:43.490

[github上的nex3的arc](http://github.com/nex3/arc)带有一个脚本arc.sh，它默认调用rlwrap，以及一个使用alt+P和alt+N历史的emacs模式。

# python - 在 python 中使用硬件编程

> ID：919857
> 
> 赞同：14
> 
> 时间：2009-05-28T08:52:07.953
> 
> 标签：python, hardware

我开始对最近制作的小玩具编程感到有些厌烦，我很想开始编程并与硬件进行交互。

唯一的问题是我主要是一个没有真正学习或使用过任何其他语言的 python 人。我仍然可以使用 python 与硬件交互吗？

另外，我可以与哪些硬件进行交互？我真的没有东西可以使用，所以我不得不买一个工具包或其他东西。有什么便宜的选择呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-28T09:13:44.477

与 PC 上的串行端口交互相当简单，并且有[Python 串行库](http://pyserial.wiki.sourceforge.net/pySerial)可用。[Roomba 机器人可通过串行端口进行控制](http://www.gorobotics.net/the-news/hobbyiest/irobot-releases-roomba-serial-port-interface)。那里可能还有其他机器人，但这可能是让您前进的一个简单、微小的步骤。

就个人而言，我通过购买[PIC 编程器](http://dkc1.digikey.com/us/en/ph/Microchip/pic32.html)并制作一些简单的[电路来闪烁 LED](http://www.best-microcontroller-projects.com/rgb-led.html)学到了很多东西。我继续通过串行端口控制这些 PIC，后来使用 USB（通过[libusb](http://libusb-win32.sourceforge.net/)）。那里有一个更大的学习曲线，因为你必须用 C 或汇编程序对 PIC 进行编程，但是一旦你掌握了基础知识，你就可以获得一些非常令人难以置信的结果。不过我警告你，一旦你意识到你可以建造多少很酷的小玩意，那就是一个滑坡:-)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-28T10:42:04.640

绝对看看[Arduino](http://www.arduino.cc/)。

*   硬件设计是开源的，因此您甚至可以根据需要自行组装
*   该板包括数字和模拟输入和输出，因此很容易让一些 LED 快速闪烁
*   你用一种叫做[Wiring](http://en.wikipedia.org/wiki/Arduino#Software)的“语言”来编程它，它隐藏了很多 C 的复杂性，这通常用在 PIC 上

在 PC 端，您可以使用 pySerial 通过 USB 与板进行通信，如上所述

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-10T11:05:51.913

新的[Raspberry Pi](http://www.raspberrypi.org/)设备具有良好的 I/O 范围，Python 似乎是它们最常用的语言。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-28T08:55:12.360

试试[BugLab](http://www.buglabs.net/)或[OpenMoko](http://openmoko.com/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-28T10:07:26.083

您可以使用[ctypes](http://docs.python.org/library/ctypes.html)与硬件进行交互。它可以让你调用本地库，所以你基本上可以用它来做 C 能做的任何事情。这当然是假设您希望通过运行 Python 的主机与硬件进行交互。

我在几个项目中使用了 ctypes：

*   [控制 OS X 上的键盘 LED 以显示莫尔斯电码](http://www.psychicorigami.com/2009/03/01/5k-morse-code-app-using-capslock-led/)
*   [为响应框](http://www.iolab.co.uk/index.html)创建 USB/HID 用户域驱动程序

我发现它通常很容易使用，但它对我已经了解 C/C++ 有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-28T10:11:07.467

购买乐高[Mindstorm](http://mindstorms.lego.com/eng/New_York_dest/default.aspx)套件。这种编程语言很容易使用——它不是 Python——但它已经足够接近了。他们是真正的机器人，带有真正的执行器和传感器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-28T11:03:08.123

许多电脑仍然有并行端口，并且存在用于[与并行端口交互](http://pyserial.wiki.sourceforge.net/pyParallel)的 python 模块，尽管我没有使用它。

并行端口可能是开始控制硬件的最简单方法，因为您可以将最简单的电子设备连接到它。只需一个 LED 即可让您立即看到一些东西。

然后，正如 Jon Cage 提到的，你可以找一个[Pic 程序员](http://www.maplin.co.uk/Module.aspx?ModuleNo=37172)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-03-31T22:17:26.773

www.synapse-wireless.com 上的 SNAP 无线节点运行称为 SNAPpy 的 Python 子集。您可以使用 SNAPpy 语言中的 peek() 和 poke() 内置函数直接与芯片内部的硬件进行交互（例如 PWM）。SNAPpy 还内置了 I2C、SPI 和串行，因此您可以控制外部硬件。它还具有用于较低级别 I/O 的内置函数，例如 readPin()、writePin() 和 readAdc()。像 EK2500 套件之类的东西可能是不错的开始。另请参阅 forums.synapse-wireless.com 上的在线用户论坛

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-06T01:35:36.543

我不太确定有人提到过 BASIC 标记。再次 - 它非常有限，但它的超级简单开始使用。他们也制造了一些其他处理器，但作为介绍 - 我认为它是一个很棒的设备。

Arduino 也是一个不错的选择，使用该设备您可能会获得更多收益。

如上所述，我开始使用 PIC 处理器——这不是最容易使用的东西（或者真的从来没有......哈哈——它有争议），但我对微型世界中的工作方式有了很好的了解控制器/硬件交互。

祝你好运，如果您有任何问题，请随时提问！

# events - 基于 pthread 的事件只唤醒等待线程

> ID：919860
> 
> 赞同：5
> 
> 时间：2009-05-28T08:52:45.080
> 
> 标签：events, pthreads

在我的 C++ 程序中，我有一个类 CEvent，它带有基于 pthreads 的触发器和等待成员函数（在 Linux 上运行）。如果有一个等待进程，实现是非常明显的（即网上有很多例子）。但是现在我需要满足多个线程正在等待事件的要求，并且在调用 trigger() 时应该全部可靠地唤醒。作为第二个条件，只有在调用 trigger() 时正在等待的线程才应该被唤醒。

我当前的代码：

```
void CEvent::trigger() {
    pthread_mutex_lock(&mutex);
    wakeUp = true;
    pthread_cond_broadcast(&condition)
    pthread_mutex_unlock(&mutex);
    wakeUp = false;
}

void CEvent::wait() {
    pthread_mutex_lock(&mutex);
    while (!wakeUp)
        pthread_cond_wait(&condition, &mutex)

    pthread_mutex_unlock(&mutex);
} 
```

这似乎几乎可以工作，因为在我将 wakeUp 设置回 false 之前等待的所有线程都会唤醒。但是在广播和wakeUp 的重置之间，调用wait() 的其他（或相同）线程也将立即唤醒，这是不可接受的。在 mutext 解锁之前放置 wakeUp = false 可以防止线程唤醒。

我的问题： * pthread_cond_broadcast 何时返回？即有没有保证它只会在所有线程都被唤醒后才返回，或者它可以在之前返回吗？* 这个问题有什么推荐的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:29:58.313

请忽略我之前的虚假回答。在触发线程解锁互斥锁（从而释放等待的线程）和设置唤醒值之间存在竞争。这意味着另一个（不等待的）线程可以进来，抓住互斥锁，看到一个真正的值，`wakeUp`然后退出而无需等待。另一个错误是正在等待的线程在重置后会唤醒`wakeUp`并立即恢复等待。

解决这个问题的一种方法是使用计数 - 每个等待的线程都会增加计数，然后触发器将等待直到许多线程在恢复之前唤醒。然后，您必须确保在这种情况发生之前不允许非等待线程开始等待。

```
// wake up "waiters" count of waiting threads
void CEvent::trigger()
{
    pthread_mutex_lock(&mutex);

    // wakey wakey
    wakeUp = true;
    pthread_cond_broadcast(&condition);

    // wait for them to awake
    while (waiters>0)
      pthread_cond_wait(&condition, &mutex);

    // stop waking threads up
    wakeUp = false;

    // let any "other" threads which were ready to start waiting, do so
    pthread_cond_broadcast(&condition);
    pthread_mutex_unlock(&mutex);
}

// wait for the condition to be notified for us
void CEvent::wait()
{
    pthread_mutex_lock(&mutex);

    // wait for us to be allowed to start waiting
    // we have to wait until any currrently being woken threads have gone
    while (wakeUp)
        pthread_cond_wait(&condition, &mutex);

    // our turn to start waiting
    waiters ++;

    // waiting
    while (!wakeUp)
        pthread_cond_wait(&condition, &mutex);

    // finished waiting, we were triggered
    waiters --;

    // let the trigger thread know we're done
    pthread_cond_broadcast(&condition);
    pthread_mutex_unlock(&mutex);
} 
```

# sql-server - 你的 Nvarchar() 有多大

> ID：919871
> 
> 赞同：4
> 
> 时间：2009-05-28T08:56:35.133
> 
> 标签：sql-server, database, database-design, nvarchar

在设计数据库时，在决定 nvarchar 应该有多大时，您会考虑哪些决定。

如果我要制作地址表，我的直觉反应是地址行 1 是 nvarchar(255)，就像旧的访问数据库一样。

我发现使用它让我对旧的“字符串将被截断”感到困扰。我知道可以通过限制输入框来防止这种情况，但如果用户确实有一个超过 255 的地址行，则应该允许这样做。

我应该使我的 nvarchar 多大（？？？？？？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:57:27.773

我的建议：让它们和你真正需要的一样大。

例如，对于邮政编码列，10-20 个字符就足够了。电话号码同上。电子邮件可能更长，50-100 个字符。姓名 - 好吧，我通常使用 50 个字符，名字也是如此。如果您真的需要，您可以随时轻松地扩展字段 - 这根本不是一项大工程。

使所有 varchar/nvarchar 字段尽可能大是没有意义的。毕竟，SQL Server 页面是固定的，并且限制为每行 8060 字节。拥有 10 个 NVARCHAR(4000) 字段只是自找麻烦......（因为如果你真的试图用太多数据填充它们，SQL Server 会向你吐槽）。

如果您真的需要一个非常大的字段，请使用 NVARCHAR/VARCHAR(MAX) - 只要它们适合，它们就会存储在您的页面中，如果它们变得太大，它们将被发送到“溢出”存储。

NVARCHAR vs. VARCHAR：这真的归结为你真的需要“外来”字符，比如日文、中文或其他非 ASCII 风格的字符吗？在欧洲，即使是一些东欧字符也不能再用 VARCHAR 字段表示（它们将被剥夺哈希（？拼写？）。西欧语言（英语、德语、法语等）都很好地服务于VARCHAR。

但是：NVARCHAR 确实使用了两倍的空间 - 在磁盘和 SQL Server 内存中 - 在任何时候。如果你真的需要它，你需要它——但你**真的**需要吗？：-） 由你决定。

马克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T09:02:48.647

我个人不使用 nvarchar :-) 我总是使用 varchar。

但是，我倾向于使用 100 作为名称，使用 1000 作为评论。捕获和处理更长的字符串是客户端可以做的事情，比如通过正则表达式，所以 SQL 只获取它期望的数据。

您可以通过参数化调用来避免截断错误，例如通过存储过程。例如，如果参数定义为 varchar(200)，那么如果您发送 > 200，则截断会静默发生。截断错误仅针对 INSERT 或 UPDATE 语句引发：使用参数不会发生。

SQL Server 的 255“限制”回到 6.5，因为 vachar 被限制为 255。SQL Server 7.0 + 更改为 8000 并添加了对 unicode 的支持

编辑：

为什么我不使用 nvarchar：双倍内存占用、双倍索引大小、双倍磁盘大小，根本不需要它。我为一家在全球设有办事处的大型瑞士公司工作，所以我不会狭隘。

还在这里讨论：[varchar vs nvarchar 性能](https://stackoverflow.com/questions/35366/varchar-vs-nvarchar-performance/198753#198753)

进一步思考，我建议 unicode 吸引客户开发人员，但作为开发人员 DBA，我专注于性能和效率......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T09:35:07.820

这取决于该字段代表什么。如果我正在做一个快速原型，我会保留 255 的默认值。对于评论等任何内容，我可能会将其设置为 1000。

我真正缩小它的唯一方法是在我肯定知道大小、邮政编码或 NI 编号等的事情上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T07:32:46.450

对于您需要对其进行某些限制的列（例如名称、电子邮件、地址等），您应该设置一个相当高的最大长度。例如，超过 50 个字符的名字似乎有点可疑，超过该大小的输入可能包含的不仅仅是名字。但是对于数据库的初始设计，采用**合理的大小并将其加倍**。因此，对于名字，将其设置为 100（如果 100 是您的“合理大小”，则设置为 200）。然后将应用程序投入生产，让用户玩足够长的时间来收集数据，然后检查实际的`max(len(FirstName))`. 那里有任何可疑的值吗？超过50个字符？找出里面有什么，看看它是否真的是名字。如果不是，输入表单可能需要更好的解释/验证。

对评论做同样的事情；将它们设置为`nvharchar(max)`最初。**然后在您的数据库增长到足以开始优化性能时**回来。取评论的最大长度，将其加倍，您的专栏就有一个很好的最大长度。

# c - 来自 gcc 的错误消息帮助

> ID：919872
> 
> 赞同：1
> 
> 时间：2009-05-28T08:56:37.083
> 
> 标签：c, linker

关于这个错误的任何想法？

```
gcc -oxtmpmain.exe xtmpmain.o fiber_driver.o xtmp_options.o getopt.o D:\usr\xtensa\XtDevToolsDE\in
失速\工具\RB-2008.4-win32\XtensaTools\lib\iss\xtmp.lib
xtmpmain.o(.text+0x213):xtmpmain.c: 未定义对 `_uart_setup' 的引用
xtmpmain.o(.text+0x2da):xtmpmain.c: 未定义对 `_uart_cleanup' 的引用
collect2: ld 返回 1 个退出状态
make: *** [xtmpmain.exe] 错误 1

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:00:03.897

这是一个简单的链接错误。您正在调用链接器未找到的两个函数`uart_setup()`和。`uart_cleanup()`

可能有几个原因，包括（但当然不限于）：

*   他们真的不见了，也许你忘了链接到一个目标文件
*   命名空间防止现有函数被发现
*   库路径
*   编组或外部名称和下划线的问题

没有更多细节，很难确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T09:02:01.473

这意味着 xtmpmain.c 调用了名为`uart_setup()`and的函数`uart_cleanup()`，但链接器没有找到它们。您可能需要包含一个库，或者根据 Win32 API 为 Windows 实现这些功能。

一些“是否插入问题”是：

*   函数声明了吗？
*   功能是否已定义（即实施）？
*   正是这些名字？
*   预处理器是否排除了这些定义？
*   有一个 gcc 选项可以控制前导下划线的存在与否。您不会不小心将它用于一个文件而不是其他文件，对吧？
*   验证声明的调用约定。`__cdecl`并且`__stdcall`是非常不同的动物。为了安全起见，它们通常会产生不匹配的导出符号名称，而此错误可能是其中的一个症状。

如果这是一个移植项目，那么与 UART 相关的功能的原始实现很可能是以平台相关的方式编写的。在这种情况下，它们通常会受到`#ifdef`某种形式的保护，这种形式取决于编译时平台。

为了解决这个问题，您需要为这个平台实现它们，风格与它们在应用程序的其余部分中的用法一致，并且同样受到保护。

# .net - 代码优先还是数据库优先，如何选择？

> ID：919880
> 
> 赞同：40
> 
> 时间：2009-05-28T08:59:16.517
> 
> 标签：.net, database, orm

让我们假设我们要开始一个新项目 - 包含一些业务逻辑的应用程序、ASP.NET 上的用户界面、WPF 或两者兼而有之。我们想使用 ORM 或 DAL 代码生成器并在 .NET 类中实现我们的业务逻辑。我们可以通过几种基本方式来表达我们对业务领域的想法：

*   在 .NET 上实现业务类并让 ORM 生成适当的数据库模式
*   手动创建数据库模式并通过代码生成器生成 .NET 类
*   使用某种可视化设计器，可以生成业务类和数据库结构或脚本

你更喜欢写什么：“Create Table Persons ( ... )”还是“public class Person { ... }”？
这些方式的优缺点是什么？
也许在某些特殊情况下，一种方法比另一种更好？
如何在特定项目中选择最优方式？

我对“代码优先”（或“模型优先”）方式非常熟悉，但似乎大多数 ORM 都被设计为代码生成器或映射器，假设我将手动实现数据库结构和业务类。

特别欢迎基于经验和 ORM 示例的答案。

**编辑：**注意，问题不是“开始新项目时我应该首先做什么？”，而是“应该手动声明/自动生成什么，域类或数据库结构？”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-28T09:08:46.187

我认为系统分析和设计的适当方法是首先对对象和它们之间的关系进行建模。如果您正在创建图书馆系统，您应该将短语 Book、Author、Publisher、ISBN 视为对象，而不是数据库表或属性。我相信这是应该的方式。话虽如此，让我们承认代码生成器可以节省大量时间，并且那些需要关系数据库来生成模型并将其映射到 DB 对象。我认为这是开发人员倾向于从 DB 开始的主要原因 更能证明我的观点的是代码生成器开发人员正在努力扭转当前实现的操作（即您提供业务模型 - 对象和类 - 以及生成器为此创建具有适当架构的数据库）。

**编辑：**
这是[域优先生成器（ADO.NET 实体框架本身）模型优先](http://www.infoq.com/news/2009/05/Entity-Framework-4)的示例：

> Visual Studio 2010 必须能够生成 DDL 并创建数据库来存储实体数据模型。开发人员可以完全控制整个过程，可以自定义 DDL，或者选择他想要的数据库，或者微调映射过程。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-28T09:16:14.533

为什么不是接口优先？

> 太多的应用程序以程序优先的心态开始。这是个坏主意。编程是构建应用程序中最繁重的组成部分，这意味着它是最昂贵且最难更改的。相反，首先要从设计开始。
> 
> 设计比较轻。纸质草图便宜且易于更改。html 设计仍然相对容易修改（或丢弃）。编程并非如此。先设计让您保持灵活性。编程首先让您陷入困境，并为您支付额外费用。

这是来自37signals的[Getting Real的](http://gettingreal.37signals.com/toc.php)[第 9 章。](http://gettingreal.37signals.com/ch09_Interface_First.php)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-28T11:08:24.340

“把你的流程图给我看，把你的表格藏起来，我会继续被迷惑。给我看你的表格，我通常不需要你的流程图；它们会很明显。”</p>

——弗雷德·布鲁克斯（Fred Brooks）在“神话人物月”中</p>

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-28T10:27:48.493

在我看来，这个问题没有正确的答案。我想这主要归结为您自己的个人或团队的偏好。所有提到的方法（数据库优先、代码优先、接口优先）都有各自的优点和缺点。

在我做任何具体的事情（无论是代码还是数据库表）之前，我可能会坐下来用笔和纸勾勒出应用程序的一般结构和主要功能。基本用户界面的简单绘图也有很大帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-29T15:43:18.050

在大多数情况下，这并不重要。这更多取决于个人喜好和技能，而不是其他任何事情。无论哪种方式，大多数应用程序都不会受到太大影响，请使用您的团队喜欢的任何方式。在选择真正重要的地方，采用哪种方法应该是显而易见的。

也就是说，我个人认为“数据库优先”通常是更安全的选择。如果数据在任何方面都很重要，特别是如果它在您的特定应用程序范围之外很重要，您希望完全控制它的存储方式。

“代码优先”（暗示：将数据库交给一些自动工具）在我看来确实是一条捷径，当（且仅当）您确定可以摆脱它时，您应该使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-29T15:51:47.460

要回答您编辑的问题（手动 db/auto 类或手动类/db），我会选择“两者都不”。出于多种原因，首先要避免使用这两种自动生成的代码，首先是 YAGNI。你最终会得到你从未编写过但仍要负责的代码，你永远不会使用的代码，并且（根据我的经验）你最终会花费更多的时间来重构代码，而不是你自己设计和编写的代码地方。它们都让你的注意力远离最重要的位置——用户。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-28T09:16:07.543

首先分析需求，然后是这些需求的一些文档以及对此数据方面的概述？

然后您知道您将捕获哪些数据以及它与其他数据的关系，并可以设计一个数据库模式或数据结构来匹配它（作为相关内容的逻辑对象/表，而不是“tab1_data”，“tab2_data”匹配数据捕获过程可能会改变，但你知道的！）。您甚至可以先设计一个 .xsd 并从中生成代码和数据库模式。如今，这一切都很有趣和游戏，这取决于你的技能。

由于我脑海中的数据库模式存储数据，这对企业来说是非常重要的事情，我会首先设计它 - 多个工具可以及时访问它，也许原始系统会被替换掉（例如，迁移到更新的工具/语言/界面）。如果您对数据库理论一无所知，那么也许这不是您的最佳选择，但我仍然会得到任何由其他人验证的生成模式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-28T09:16:30.960

首先不要直接考虑任何一个，而是“模型”（最好在纸上）从用户的角度来看您的应用程序将具有哪些部分。

如果您对该模型有清晰的头脑，您可以将部分划分为共同和特定的小元素，您可以将其转换为对象定义和数据库表。

我发现这种方法可以显着减少数据库规范化的时间和精力。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-10T09:09:54.707

### 领域建模与关系建模

> 有几种基本方式可以表达我们对业务领域的想法

我认为首先确定该领域独立于具体技术和/或编程范式（例如，OO、FP、关系）是很重要的。这个答案将假设您已经单独定义了您的域，例如使用 DDD 实践，并且现在希望使用关系数据库来存储它。

### 关系模型的优势

除其他原因外，关系模型的发明是为了消除以前模型引起的许多问题，包括[网络模型](https://en.wikipedia.org/wiki/Network_model)（包括 OO 模型）、[分层模型](https://en.wikipedia.org/wiki/Hierarchical_database_model)（包括 XML/JSON 模型）或简单键价值商店。它在所有替代品中都有很多优势，这使它几十年来如此受欢迎。

在我看来，这些优势表明您应该在数据库*内部*设计数据库模型，这正是为此目的而设计的。*所有其他模型，包括您的客户端模型，都是数据库中原始*关系模型的副本。因此，所有其他模型都应该*来自*它，而不是它的*来源*。

将用 DDL 表示的关系模型作为您**的事实来源**

### XSD 是一样的

XML/XSD 是一种类似的技术。您的数据是用 XML 表示的，但是当两个系统通过基于 XML 的 API 相互通信时，XSD（或者，如果您愿意，可以使用 WSDL）是指定该通信的最合适的语言。

如果您想使用客户端技术（例如 Java 中的 JAXB）绑定到您的 XML 文档，那么您应该从 XSD 生成那些 JAXB 类，反之亦然。为什么？因为 XSD 是**事实的来源**

[我在这里写过这个话题](https://blog.jooq.org/2018/06/06/truth-first-or-why-you-should-mostly-implement-database-first-designs/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-10-17T20:03:23.990

There are 3 important aspects that need to be considered when developing a database application...

1.  User Experience
2.  Data Quality
3.  Cost to maintain the first two (User Experience, and Data Quality)

I believe the priority of these three items are expressed in the order they are presented, meaning the highest priority is User Experience, the second highest priority is data quality, and the third is the cost to do so. Of course these can be debated, but the notion of code first or database first is relative to the third priority - the cost. Whatever the choice is - code first or database first, ensure the first two priorities are fulfilled...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-06-07T08:55:29.410

我个人喜欢控制创建 RDBMS 对象。当我首先使用 EF 代码时，它实际上为表关系等基本事物创建了更多工作，大多数体面的代码生成器为您提供了开箱即用的功能（我知道这就是想法......对您的模型进行更多控制！） . 此外，EFCF 将生成我希望的数据库的想法有点吓人。（传统上，代码比 RDMBS 更容易进化！）

对于需要不断发展的系统（例如 SaaS），以及通常具有 500 多个表等的大型企业级系统，它可能不太有吸引力。另一方面，如果您有一个适当的 SQL Server 2008 数据库项目，其中包含所有表、SP、触发器、索引的脚本，并且您可以从 Visual Studio 部署它们，那么它更易于管理。您现在可以自由地为您的表使用任何您想要的代码生成器（甚至构建您自己的代码生成器）

您不依赖于框架 (EFCF)，然后可以根据大型系统中的“迷你”项目要求使用不同的 ORM（例如 NHibernet）。

# vim - 为什么 Vims errorformat 不采用正则表达式？

> ID：919884
> 
> 赞同：4
> 
> 时间：2009-05-28T09:00:34.830
> 
> 标签：vim

Vims errorformat（用于解析编译/构建错误）使用来自 c 的神秘格式来解析错误。

尝试为 nant 设置错误格式似乎几乎是不可能的，我已经尝试了好几个小时但无法得到它。我还从我的搜索中看到很多人似乎有同样的问题。解决这个问题的正则表达式需要几分钟的时间来编写。

那么为什么vim仍然使用这种格式呢？C 解析器很可能更快，但这似乎与最多每隔几分钟发生一次的事情无关。有充分的理由还是只是历史文物？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-02T07:20:51.493

并不是 Vim 使用了 C 中的一种神秘格式。而是它使用了来自C 函数的*思想。*`scanf`这意味着与错误消息匹配的字符串由 3 部分组成：

*   空白
*   人物
*   转换规格

空白是您的制表符和空格。字符是字母、数字和其他正常的东西。转换规范是以“%”（百分比）字符开头的序列。在 scanf 中，您通常会将输入字符串与 %d 或 %f 匹配以转换为整数或浮点数。使用 Vim 的错误格式，您在输入字符串（错误消息）中搜索文件、行和其他编译器特定信息。

如果您使用 scanf 从字符串“99 瓶啤酒”中提取整数，那么您将使用：

```
int i;
scanf("%d bottles of beer", &i); // i would be 99, string read from stdin 
```

现在有了 Vim 的错误格式，它变得有点棘手，但它确实尝试轻松匹配更复杂的模式。诸如多行错误消息、文件名、更改目录等之类的内容。errorformat 帮助中的一个示例很有用：

```
1  Error 275
2  line 42
3  column 3
4  ' ' expected after '--'

The appropriate error format string has to look like this:

  :set efm=%EError\ %n,%Cline\ %l,%Ccolumn\ %c,%Z%m 
```

这里 %E 告诉 Vim 它是多行错误消息的开始。%n 是一个错误号。%C 是多行消息的延续，%l 是行号，%c 是列号。%Z 标记多行消息的结束，%m 匹配将显示在状态行中的错误消息。你需要用反斜杠转义空格，这增加了一些额外的怪异。

虽然最初使用正则表达式可能看起来更容易，但这种迷你语言是专门为帮助匹配编译器错误而设计的。里面有很多捷径。我的意思是您不必考虑诸如匹配多行、多个数字、匹配路径名之类的事情（只需使用 %f）。

另一个想法：如果您只使用普通的正则表达式，您将如何将数字映射为表示行号，或将字符串映射为表示文件或错误消息？按组位置？这可能有效，但不会很灵活。另一种方法是命名捕获组，但无论如何，这种语法看起来很像简写。您实际上可以使用正则表达式通配符，例如`.*`- 在这种语言中是这样编写的`%.%#`。

好的，所以它并不完美。但这也不是不可能的，并且以自己的方式有意义。陷入困境，阅读帮助并停止抱怨！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T21:44:32.513

我建议为您的编译器编写一个后处理过滤器，它使用正则表达式或其他任何东西，并以易于为其编写的简单格式输出消息`errorformat`。除非必须，为什么要学习一些新的、巴洛克式的、单一用途的语言？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T21:50:00.293

据`:help quickfix`，

> 也可以在格式字符串中指定（几乎）任何 Vim 支持的正则表达式。

但是，文档令人困惑，我没有花太多时间来验证它的工作情况和有用性。您仍然需要使用类似 scanf 的代码来提取文件名等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-08T19:58:35.300

使用它们很痛苦，但要明确一点：您*可以*使用正则表达式（大多数情况下）。

从文档：

```
Pattern matching

The scanf()-like "%*[]" notation is supported for backward-compatibility
with previous versions of Vim.  However, it is also possible to specify
(nearly) any Vim supported regular expression in format strings.
Since meta characters of the regular expression language can be part of
ordinary matching strings or file names (and therefore internally have to
be escaped), meta symbols have to be written with leading '%':
    %\      The single '\' character.  Note that this has to be
            escaped ("%\\") in ":set errorformat=" definitions.
    %.      The single '.' character.
    %#      The single '*'(!) character.
    %^      The single '^' character.  Note that this is not
            useful, the pattern already matches start of line.
    %$      The single '$' character.  Note that this is not
            useful, the pattern already matches end of line.
    %[      The single '[' character for a [] character range.
    %~      The single '~' character.
When using character classes in expressions (see |/\i| for an overview),
terms containing the "\+" quantifier can be written in the scanf() "%*"
notation.  Example: "%\\d%\\+" ("\d\+", "any number") is equivalent to "%*\\d".
Important note: The \(...\) grouping of sub-matches can not be used in format
specifications because it is reserved for internal conversions. 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2009-05-28T19:06:01.207

大声笑尝试查看实际的 vim 源代码。它是一个 C 代码的巢穴，如此古老和晦涩，你会认为你在进行考古挖掘。

至于为什么 vim 使用 C 解析器，有很多很好的理由，首先是它非常通用。但真正的原因是，在过去 20 年的某个时候，有人编写了它来使用 C 解析器并且它可以工作。没有人改变什么是有效的。

**如果它对您**不起作用，vim 社区会告诉您自己编写。愚蠢的开源混蛋。

# .net - ReportViewer 控件加载指示器？

> ID：919895
> 
> 赞同：6
> 
> 时间：2009-05-28T09:03:24.107
> 
> 标签：.net, reportviewer

是否可以更改 ReportViewer 控件的图像（绿色旋转的东西）？

目前我正在隐藏它并重叠一个进度条（这是 WinForms 而不是 ASP 控件）......似乎有点啰嗦？

谢谢**:)**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-04T14:07:11.637

好吧，你给了我一个挑战，我的朋友。但我想出了如何做到这一点。这是我用来完成此操作的代码：

```
 Private Sub CustomizeRV(ByVal ctrl As Control)
    For Each c As Control In ctrl.Controls

      If TypeOf c Is PictureBox Then
        Dim pb As PictureBox = DirectCast(c, PictureBox)
        pb.Image = YOURNEWIMAGEHERE
      End If

      If c.HasChildren Then
        CustomizeRV(c)
      End If
    Next
  End Sub 
```

在表单加载事件期间调用此函数，它会将加载图像重新配置为您指定的任何内容（将函数传递给 ReportViewer 控件）。递归调用该函数，直到找到图片框。ReportViewer 控件中只有一个图片框，因此您不必担心找到那个特定的图片框。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-06-04T14:44:32.327

再次感谢 Jon 的原始 VB.NET 代码......这是他在 C# 中的答案......

```
private void CustomizeReportViewer(Control reportViewer)
{
    foreach (Control c in reportViewer.Controls)
    {
        if (c.GetType() == typeof(PictureBox))
        {
            (c as PictureBox).ImageLocation = "C:\\Loading.gif";
            return;
        }

        if (c.HasChildren)
            CustomizeReportViewer(c);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-04-18T18:43:24.543

对于那些为 WinForms 而不是 ASP.NET 而感到沮丧的人，这与 Web 的解决方案相同：

```
Private Sub CustomizeRV(ByVal ctrl As Control)
    For Each c As Control In ctrl.Controls
        If String.Compare(c.ID, "AsyncWait")=0 Then
            DirectCast(c.Controls(0).Controls(0), Image).ImageUrl = ResolveUrl("~/images/PleaseWait.gif")
        End If

        If c.HasControls Then CustomizeRV(c)

    Next

End Sub 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T08:42:47.123

非常感谢分享这个问题。刚刚将上面的 vb.net 代码转换为 c#.net 并更改了图像背景颜色。

```
private void CustomizeRV(Control ReportViewCntr)
{
    foreach (Control c in ReportViewCntr.Controls)
       {            
          if ((string.Compare(c.ID, "AsyncWait") == 0))
          {   
            Image i = (Image)c.Controls[0].Controls[0];
            i.ImageUrl = ResolveUrl("~/Images/loading.gif");
            //i.BackColor = System.Drawing.Color.Gray; 
            i.BackColor = System.Drawing.ColorTranslator.FromHtml("#e6e6e6");
           }
          if (c.HasControls())
          {
            CustomizeRV(c);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-06T05:01:50.120

感谢您提供用于替换 AsyncWait 中的图像控件的代码示例。在我将报表查看器控件升级到最新版本（即版本 15.0.0.0）之前，这一切正常。

升级后，@Pratik 的代码示例中的“c.Controls[0].Controls[0]”位置的控件不再是图像控件。因此，它会抛出一个错误，指出无法将 LiteralControl 转换为图像。

我尝试使用上面的代码进行一些小的编辑，如下所示：

```
 protected void CustomizeRV(Control ReportViewCntr)
    {
        foreach (Control c in ReportViewCntr.Controls)
        {
            if ((string.Compare(c.ID, "AsyncWait") == 0))
            {
                c.Controls[0].Controls.RemoveAt(0);                    
                Image i = new Image();
                i.ImageUrl = ResolveUrl("~/images/loading.gif");
                //i.BackColor = System.Drawing.Color.Gray; 
                i.BackColor = System.Drawing.ColorTranslator.FromHtml("#e6e6e6");
                c.Controls[0].Controls.AddAt(0, i);
            }
            if (c.HasControls())
            {
                CustomizeRV(c);
            }
        }
    } 
```

但是，它没有按预期工作。

有没有其他方法可以用 gif 图像替换新的文字控件？

# python - 如何在 Python 中获取线程 id？

> ID：919897
> 
> 赞同：229
> 
> 时间：2009-05-28T09:04:24.120
> 
> 标签：python, multithreading, python-multithreading, python-logging

我有一个多线程 Python 程序和一个实用函数 ，`writeLog(message)`它会写出时间戳，然后是消息。不幸的是，生成的日志文件没有说明哪个线程正在生成哪个消息。

我希望`writeLog()`能够在消息中添加一些内容以识别哪个线程正在调用它。显然我可以让线程传递这些信息，但这需要更多的工作。是否有一些`os.getpid()`我可以使用的线程等价物？

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2009-05-28T09:13:40.153

[`threading.get_ident()`](https://docs.python.org/3/library/threading.html#threading.get_ident)有效，或[`threading.current_thread().ident`](https://docs.python.org/3/library/threading.html#threading.current_thread)（或`threading.currentThread().ident`对于 Python < 2.6）。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2010-03-01T17:19:18.040

使用[日志记录](http://docs.python.org/library/logging.html)模块，您可以在每个日志条目中自动添加当前线程标识符。只需在记录器格式字符串中使用以下[LogRecord映射键之一：](http://docs.python.org/library/logging.html#logging.LogRecord)

> *%(thread)d ：* 线程 ID（如果可用）。
> 
> *%(threadName)s ：* 线程名称（如果可用）。

并用它设置你的默认处理程序：

```
logging.basicConfig(format="%(threadName)s:%(message)s") 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-02-23T09:17:44.650

该`thread.get_ident()`函数在 Linux 上返回一个长整数。这不是一个真正的线程ID。

我使用[这种方法](http://blog.devork.be/2010/09/finding-linux-thread-id-from-within.html)来真正获取 Linux 上的线程 id：

```
import ctypes
libc = ctypes.cdll.LoadLibrary('libc.so.6')

# System dependent, see e.g. /usr/include/x86_64-linux-gnu/asm/unistd_64.h
SYS_gettid = 186

def getThreadId():
   """Returns OS thread id - Specific to Linux"""
   return libc.syscall(SYS_gettid) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-05-12T17:26:24.803

Python 3.8+ 现在支持此功能:)

您现在可以使用：`threading.get_native_id()`

[https://github.com/python/cpython/commit/4959c33d2555b89b494c678d99be81a65ee864b0](https://github.com/python/cpython/commit/4959c33d2555b89b494c678d99be81a65ee864b0)

[https://github.com/python/cpython/pull/11993](https://github.com/python/cpython/pull/11993)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-03-08T09:46:24.033

您可以获取当前正在运行的线程的标识。如果当前线程结束，该标识可以被其他线程重用。

当您创建 Thread 的实例时，会隐含地为线程指定一个名称，即模式：Thread-number

名称没有任何意义，并且名称不必是唯一的。所有正在运行的线程的标识都是唯一的。

```
import threading

def worker():
    print(threading.current_thread().name)
    print(threading.get_ident())

threading.Thread(target=worker).start()
threading.Thread(target=worker, name='foo').start() 
```

函数 threading.current_thread() 返回当前正在运行的线程。这个对象保存了线程的全部信息。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-05-28T09:11:13.203

我看到了这样的线程 ID 示例：

```
class myThread(threading.Thread):
    def __init__(self, threadID, name, counter):
        self.threadID = threadID
        ... 
```

[线程模块文档](http://docs.python.org/library/threading.html#threading.Thread.name)也列出了属性`name`：

```
...

A thread has a name. 
The name can be passed to the constructor, 
and read or changed through the name attribute.

...

Thread.name

A string used for identification purposes only. 
It has no semantics. Multiple threads may
be given the same name. The initial name is set by the constructor. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-19T05:31:39.023

我在 Python 中创建了多个线程，打印了线程对象，并使用`ident`变量打印了 id。我看到所有的 id 都是一样的：

```
<Thread(Thread-1, stopped 140500807628544)>
<Thread(Thread-2, started 140500807628544)>
<Thread(Thread-3, started 140500807628544)> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-07T13:04:32.890

与@brucexin 类似，我需要获取操作系统级别的线程标识符（其中 != `thread.get_ident()`）并使用类似下面的内容不依赖于特定数字并且仅限于 amd64：

```
---- 8< ---- (xos.pyx)
"""module xos complements standard module os""" 

cdef extern from "<sys/syscall.h>":                                                             
    long syscall(long number, ...)                                                              
    const int SYS_gettid                                                                        

# gettid returns current OS thread identifier.                                                  
def gettid():                                                                                   
    return syscall(SYS_gettid) 
```

和

```
---- 8< ---- (test.py)
import pyximport; pyximport.install()
import xos

...

print 'my tid: %d' % xos.gettid() 
```

这取决于 Cython。

# excel - 动态更改excel中的下拉列表

> ID：919908
> 
> 赞同：2
> 
> 时间：2009-05-28T09:07:44.253
> 
> 标签：excel

场景如下，

我有一个选项列表要填写在一个单元格中，比如 A1。可以使用 Data Validation-List 填充选项，这会导致下拉菜单出现在 A1 中。现在我希望 B1 包含一个下拉列表，其中的条目根据 A1 中的数据进行更改。

作为一个人为的例子，假设 A1 提供哺乳动物、爬行动物和两栖动物的选择。如果我选择哺乳动物，我应该在 B1 中选择 man, cat, dog 作为选项。如果我选择爬行动物，蛇和蜥蜴会作为选项出现在 B1 中。如果我选择两栖动物，我应该选择青蛙和蟾蜍。

我想避免为此使用 VBA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T09:36:59.907

使用验证列表中的 INDIRECT 公式，此处清楚说明：

[www.contextures.com/xlDataval02.html](http://www.contextures.com/xlDataval02.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T10:17:08.687

给你，一个完全没有 VBA 的解决方案。它使用“表单”工具栏中的实际组合框控件：

*   将三个额外的工作表添加到您的工作簿。我称它们为“领域”、“数据”和“动物”
    *   在“域”表上，我做了：
        *   输入（从单元格 A1 向下）“哺乳动物”、“爬行动物”、“两栖动物”
        *   为范围“域！$A:$A”定义了一个名称：“域”
        *   为范围“域！$B:$1”定义了一个名称：“DomainChoice”
    *   在“数据”表上，我做了：
        *   输入（从单元格 A1 向下）“人”、“猫”、“狗”
        *   输入（从单元格 B1 向下）“蛇”、“蜥蜴”
        *   输入（从单元格 C1 向下）“frog”、“toad”
    *   在“动物”表上，我做了：
        *   在A1中，输入以下公式
            `=T(INDIRECT("data!R" & ROW() & "C" & DomainChoice; FALSE))`
        *   将此公式填充到例如第 50 行。
        *   为范围“animal！$A:$A”定义了一个名称：“Animal”
        *   为范围“animal！$B:$1”定义了一个名称：“AnimalChoice”
*   在主工作表上，我创建了两个组合框控件：
    *   在方框 1 中，我将属性（“格式控制...”）定义如下：
        *   “输入范围：” - “域”
        *   “单元格链接”： - “域选择”
    *   在方框 2 中，我将属性定义如下：
        *   “输入范围：” - “动物”
        *   “细胞链接”： - “动物选择”

现在“哺乳动物”、“爬行动物”、“两栖动物”应该出现在框 1 中，框 2 的内容应该根据选择而改变。

查看各种表格以了解幕后发生的事情。唯一的要求是“域”表中值的顺序与“数据”表上的列相对应，并且只能与“动物”表上的公式填充的行一样多的动物。

如果需要，您可以隐藏三个辅助工作表。

公式，解释：

```
T(                // returns an empty string unless the argument is a text value
  INDIRECT(       // returns the value at the given reference string
    "data!R"      // build a dynamic reference string to "data!R1C1"
    &     
    ROW()         // the current row, changes as you fill down the formula
    &
    "C" 
    & 
    DomainChoice  // defined name of "domain!$B:$1", contains box 1 choice
  ; 
    FALSE         // flag to indicate that the formula is in "R1C1" format
  )
) 
```

# c# - 显示存储过程的参数值列表

> ID：919911
> 
> 赞同：0
> 
> 时间：2009-05-28T09:08:24.237
> 
> 标签：c#, stored-procedures, parameters

调用存储过程为

```
int pageNumber = 1;
int pageSize = 4;
SubSonic.StoredProcedure sp = SPs.UspListPlants(pageNumber, pageSize);
string result = sp.GetReader(); 
```

sp 工作正常，但正在尝试

```
foreach (SubSonic.StoredProcedure.Parameter param in sp.Parameters)
    {
          sb.Append("'" + param.Name + "' = ");
    } 
```

我的参数计数为零。

如何打印执行为 sql stmt 的日志参数值：

```
EXEC UspListPlants(pageNumber = 1, pageSize = 4) 
```

感谢和问候

克劳迪奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T09:17:41.910

sp.Parameters 是否真的实现了 IEnumerable？如果没有，那么 foreach 将不起作用，您需要在 sp.Parameters 上调用 GetEnumerator 方法之类的方法才能对其进行迭代。

# .net - 如何通过键入在 WPF ListBox 中找到项目？

> ID：919915
> 
> 赞同：6
> 
> 时间：2009-05-28T09:08:59.807
> 
> 标签：.net, wpf, listbox, keyboard-navigation

大多数列表框允许您通过键入显示文本的首字母来查找其中的项目。如果键入的字母匹配多个项目，那么您可以继续添加字母以缩小搜索范围。

我需要在 WPF 中执行此操作`ListBox`。但是，这些项目不是纯字符串——它们是我使用`DataTemplate`. 我希望有一种方法可以提供字符串值的路径，该字符串值应该用于`ListBox`项目的文本键盘导航。

这怎么可能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-28T09:21:20.250

您可以尝试设置`IsTextSearchEnabled`为 true 并使用`TextSearch.TextPath`附加属性。

例如

```
<ListBox IsTextSearchEnabled="True" 
         TextSearch.TextPath="CustomObject.StringProperty"/> 
```

# image-processing - 在 J2ME 中加载图像？

> ID：919917
> 
> 赞同：2
> 
> 时间：2009-05-28T09:09:35.467
> 
> 标签：image-processing, java-me, loading, sprite

我对 J2ME 上的概念并不陌生，但我有点懒惰，我不应该这样做：最近我的应用程序一直在将图像加载到内存中，因为它们是糖果......

```
Sprite example = new Sprite(Image.createImage("/images/example.png"), w, h); 
```

我不确定这是不是最好的方法，但它在我的摩托罗拉 Z6 上运行良好，直到昨晚，当我在旧三星手机上测试应用程序时，图像甚至无法加载，需要多次尝试启动线程出现。屏幕一直是白色的，所以我意识到它必须是关于图像加载的东西，我做得不太好......有没有人可以告诉我如何在我的应用程序中正确地制作加载程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T21:06:03.947

I'm not sure exactly what you are looking for, but the behavior you describe very much sounds like you are experiencing an OutOfMemory exception. Try reducing the dimensions of your images (heap usage is based on dimension) and see if the behavior ceases. This will let you know if it is truly an OutOfMemory issue or something else.

Other tips:

1.  Load images largest to smallest. This helps with heap fragmentation and allows the largest heap space for the largest images.
2.  Unload (set to null) in reverse order of how you loaded and garbage collect after doing so. Make sure to Thread.yield() after you call the GC.
3.  Make sure you only load the images that you need. Unload images from a state that the application is no longer in.
4.  Since you are creating sprites you may have multiple sprites for one image. Consider creating an image pool to make sure you only load the image once. Then just point each Sprite object to the image within the pool that it requires. Your example in your question seems like you would more than likely load the same image into memory more than once. That's wasteful and could be part of the OutOfMemory issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-04T10:52:39.983

使用电影图像（一个图像中定义尺寸的一组图像）并使用逻辑一次将它们拉出。

因为它们被分组到一个图像中，所以您可以节省每个图像的标题空间，从而可以减少使用的内存。

这种技术首先用于 MIDP 1.0 内存受限设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T00:14:27.450

使用不反复加载图像的 Fostah 方法，我创建了以下类：

```
public class ImageLoader {
    private static Hashtable pool = new Hashtable();

    public static Image getSprite(String source){
        if(pool.get(source) != null) return (Image) pool.get(source);
        try {
            Image temp = Image.createImage(source);
            pool.put(source, temp);
            return temp;
        } catch (IOException e){
            System.err.println("Error al cargar la imagen en "+source+": "+e.getMessage());
        }
        return null;
    }
} 
```

因此，每当我需要图像时，我首先会向池中请求它，或者只是将其加载到池中。

# java - 当文件存在时 File.exists() 返回 false

> ID：919918
> 
> 赞同：97
> 
> 时间：2009-05-28T09:10:15.373
> 
> 标签：java, file-io

我遇到了一个错误，我似乎找不到任何背后的逻辑。我有这个 File 对象，它是这样创建的：

```
File file = new File("utilities/data/someTextFile.txt"); 
```

然后我做`file.exists()`，它返回`false`（！？）。如果找不到该文件，我将登录`f.getAbsolutePath()`到一个文件。当我查看路径时，似乎还可以。我可以将完整的路径复制粘贴到 Windows 的“运行”窗口中，然后文件可以正常打开。

该文件始终存在，在我的应用程序运行期间不会被删除或更改。它位于本地计算机上。

这似乎只发生在某些情况下。我可以随时重现故障，但我确信文件对象的路径不会因我为重现故障而采取的措施而改变。

什么可能导致`file.exists()`返回错误？这是否与权限或文件锁定等有关？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2010-07-07T22:21:09.023

我在 Windows 7 上看到以下情况：

```
file.exists() == false
file.getAbsoluteFile().exists() == true 
```

有问题的文件是“var\log”，绝对路径确实引用了普通子目录（不是虚拟存储）中的现有文件。这是从 IDE 中看到的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-02-14T20:36:20.933

似乎在 Java 中指定路径的方式有所不同。

例如，如果文件路径指定为`file:/C:/DEV/test.txt`then

```
File f = new File(filename);
f.exists(); 
```

将返回`false`。该路径可能在资源管理器或浏览器中有效，但它是 URL 而不是绝对文件路径。

但另一方面，如果文件路径指定为`C:/DEV/test.txt`then

```
File f = new File(filename);
f.exists(); 
```

将返回`true`，因为路径不是 URL，而是绝对路径。

使用[Spring Framework](http://en.wikipedia.org/wiki/Spring_Framework)正是`ResourceUtils.getFile(filename)`如此 - 其中 name 可以是 URL 或绝对文件路径。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-28T09:20:08.003

如果进程没有权限判断文件是否存在，它将返回 false。可以打开一个文件，但不能通过常规方法判断它是否存在。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-29T21:03:09.630

以上答案对我的情况没有帮助。如上所述，我有：

```
file.exists() => false
file.getAbsoluteFile().exists => true 
```

造成这种情况的根本原因是*Windows 7*机器所有者修改了 CMD 的注册表，以便它可以自动运行命令以在特定目录中启动以使用 Python。此修改削弱了*Java 1.6*代码，该代码显然在*Windows上使用**CMD*进行某些文件操作，例如. 从注册表中消除自动运行解决了这个问题。*`exists()`*

 ** * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-01-26T10:16:23.303

当[“隐藏已知文件类型的隐藏扩展名”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-08T02:20:37.130

显然有许多可能的原因，以前的答案很好地记录了它们，但这是我在一个特定情况下解决这个问题的方法：

我的一个学生遇到了这个问题，我几乎要把头发扯下来试图弄清楚。事实证明该文件不存在，即使它看起来确实存在。问题在于 Windows 7 被配置为“隐藏已知文件类型的文件扩展名”。这意味着如果文件看起来名称为“data.txt”，则其实际文件名是“data.txt.txt”。

希望这可以帮助其他人节省一些头发。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-22T08:01:22.553

如果您不想在每次必须调用方法时都处理 getAbsoluteFile() 调用，则最好使用绝对路径创建文件实例。这应该可以解决问题：

```
File file = new File("utilities/data/someTextFile.txt").getAbsoluteFile(); 
```

我建议用 try-catch 块包围它，顺便说一句。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-24T04:48:23.673

该`new File`命令只是使用给定的路径名​​创建一个文件的实例。它实际上并没有在硬盘驱动器上创建文件。

如果你说

```
File file = new File ("path");
file.exists() 
```

仅当存在具有相同路径的现有文件时，这才能返回 true。如果您打算检查第一行中声明的同一文件，则可能需要以这种方式使用它。

```
File file = new File ("path");
file.createNewFile();
file.exists(); 
```

现在这将返回 true。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-08-14T07:35:45.117

为了概括问题，将 URL/URI 转换为本地路径时会出现问题。

```
Example: URL url = file:/D:/code%20repo%20sample/sample.txt

// To remove url reference
String localPath = url.getPath();  
> /D:/code%20repo%20sample/sample.txt

// Decoding reserved characters in url from hexadecimal to character
URLDecoder.decode(localPath, StandardCharsets.UTF_8.toString()); 
> /D:/code repo sample/sample.txt 
```

希望这可以帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-03T10:39:17.087

就我而言

文件保存在

```
filepath = Environment.getExternalStorageDirectory().getAbsolutePath()+ "/VRSI/Audio/"+encrypted_filename+".mp3"; 
```

它存储在

```
/storage/emulated/0/VRSI/Audio/82B0999F16251F0DFE849F380D6AAEEA.mp3 
```

当我得到文件路径时它是

```
/storage/emulated/0/Android/data/com.numerotec.vrsi/files/VRSI/Audio/AF7DC6C0C0B3EF3529EC70DAEF2324E0.mp3 
```

所以我将字符串“Android/data/com.numerotec.vrsi/files/”替换为空

在那之后

```
if (file.getAbsoluteFile().exists())
{
    // write your code
} 
```

工作正常

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-28T09:50:39.097

如果它失败的情况涉及以另一个用户身份运行它，并且您在 Windows Vista/Windows 7 上，它可能是由 VirtualStore 引起的，这是 Windows 让非特权用户“写入”它通常不能放置的机制。但是，更改存储在每个用户帐户专用的“%USERPROFILE%\AppData\Local\VirtualStore\”中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-05T08:23:15.067

大家反应好。我发现这似乎是 Java 访问`C:`Windows 上的根目录的问题。任何其他目录都应该没问题，但出于某种原因，特别提到`C:\`或`C:`可能`C:/`会出错。我已经解决了这个非常相似的问题，方法是捕获提及`new File("C:");`并将其替换为新的`File(System.getProperty("file.separator"));`，或者您应该能够硬编码“\”而不是说“c:”作为您的文件目录，它可能会解决。不优雅，但在这个项目上为我完成了工作。

我希望它有所帮助。可能不是正确的解决方案，但至少它对我有用。我在`JRE 1.6, Win 7`。干杯!

尊敬，

@木匠1010

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-01T18:48:42.173

当上面没有任何东西对我有用时，我尝试了

```
filePath = filePath.trim(); 
```

这将从任何不需要的字符中清除您的字符串

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-16T01:14:23.720

FWIW，还有另一个地方发生这种情况。

`File("")`是当前目录的名称。 `File("").exists()`通常会返回`false`。该`File(("").getAbsoluteFile().exists()`技巧有效并将返回`true`（假设当前目录存在......）

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-12-14T18:46:02.017

我最近遇到了同样的问题。我所做的是卸载Netbeans，从C盘删除netbeans文件夹，程序文件，更新，programData，几乎无处不在。然后重新安装。现在工作正常。在进行上述操作之前，不要忘记备份 netbeans 项目文件夹。

希望能帮助到你。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2020-05-06T22:42:18.693

对于某些 IDE（可能是）和/或某些操作系统（例如：窗口），默认情况下它们没有文件的写访问权限。所以如果你尝试做 file.exists() 它会告诉你错误。为了解决这个问题，请执行以下操作

如果 File 的 ref 变量是 f，例如：File f = new File("path");

所以为了让它工作，用鼠标选择 f 然后去搜索菜单>写访问>工作区。希望它会奏效。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2016-09-21T18:12:47.820

我认为您应该改用反斜杠，如下所示：

文件 file = new File("C:\\User\\utilities\\data\\someTextFile.txt"); （两个反斜杠，不是错字）

应该解决问题:)

# java - java.library.path 中没有 ocijdbc9

> ID：919921
> 
> 赞同：3
> 
> 时间：2009-05-28T09:11:19.253
> 
> 标签：java, oracle, linker, linker-errors

当我尝试运行 Java 应用程序时，我收到以下错误：

> `Exception in thread "main" java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path`

我的电脑上没有文件`ocijdbc9.*`，但我`ocijdbc10.dll`有`%ORACLE_HOME%\bin`.

`%ORACLE_HOME%`正确指定，所以我认为问题在于应用程序正在搜索错误的版本（9 而不是 10）。

Oracle 和 Java Builder 都是新安装的，所以问题可能出在项目偏好上？您对如何搜索指定错误版本的位置有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T09:31:29.293

您的 java CLASSPATH 中缺少一个文件。

您需要将 OCI jar 添加到您的类路径中。

对于我在 Windows 上安装的 oracle 10.0.2，它位于

```
%ORACLE_HOME%\jdbc\lib\ojdbc14.jar 
```

如果您的应用程序需要 ocijdbc9，那么您必须从某个地方下载它并将其添加到 CLASSPATH。不知道从哪里下载，试试oracle网站

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T11:33:31.433

附加提示：如果您使用的是 oci jdbc url；最好使用 oracle 客户端版本的 jar 库。

请检查这些库的地址：[http ://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html](http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/index.html)

例如，如果您的客户端是 Oracle 10.2.0.4，那么您最好将此客户端`ojdbc14.jar`用于 java >= 1.4 和`classes12.jar`java <= 1.3

请注意，在 Oracle 11 之前，jdbc 库在每个版本中都具有相同的名称，例如`ojdbc14.jar`和`classes12.jar`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-28T10:25:46.110

您需要`-Djava.library.path=YOUR_ORACLE_HOME\bin`作为运行时参数传递给 JRE

所以....

```
java [other java switches + runtime parameters] -Djava.library.path=YOUR_ORACLE_HOME\bin run-classname 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-07T01:59:20.767

我想是因为你还没有安装Oracle Client。安装后应该没问题

# .net - .Net 在其他应用程序读取/写入的同时从剪贴板获取图像？

> ID：919922
> 
> 赞同：0
> 
> 时间：2009-05-28T09:11:43.310
> 
> 标签：.net, vb.net

我有一个 .net 应用程序，它每 100 毫秒监视剪贴板以获取从相机（来自不同应用程序）拍摄的图像，并将其显示在图片框中。

但是，有时将图像写入剪贴板的程序会收到错误消息

```
"Can't Open Clipboard". 
```

仅当 .net 应用程序使用以下内容进行监视时才会发生这种情况：

```
Clipboard.GetDataObject().GetDataPresent(DataFormats.Bitmap) 
```

如果我停止 .net 应用程序读取剪贴板，我不会收到任何错误！

我想知道是否有人有任何想法，如果有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T09:15:04.037

我正要告诉你，你应该在剪贴板链上注册，以便在发生变化时得到通知。但是 Clipboard 类似乎没有实现这一点。但是，您可以使用 P/Invoke 来执行此操作。[这篇文章](http://www.radsoftware.com.au/articles/clipboardmonitor.aspx)应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-17T09:22:40.193

我发现[这篇来自 vbaccelerator](http://www.vbaccelerator.com/home/NET/Code/Libraries/Windows_Messages/Responding_to_Clipboard_Change_Notifications/article.asp)的文章非常有助于在 .Net 中实现剪贴板链钩

# math - 连续值的 m 估计

> ID：919923
> 
> 赞同：1
> 
> 时间：2009-05-28T09:12:20.470
> 
> 标签：math, tree, artificial-intelligence, regression

我正在构建一个自定义回归树，并希望使用 m-estimate 进行修剪。

有谁知道如何计算。

[http://www.ailab.si/blaz/predavanja/UISP/slides/uisp07-RegTrees.ppt](http://www.ailab.si/blaz/predavanja/UISP/slides/uisp07-RegTrees.ppt)可能会有所帮助（幻灯片 12，Em 应该是什么样子？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T21:15:05.910

有很多 m 估计。它们都归结为将您的估计问题重铸为最小化问题。如果您使用平方误差作为要最小化的函数，您只会得到样本均值。如果您使用误差的绝对值，您将获得样本中位数。这个想法是使用一个在这两者之间折衷的函数，以便您获得平均值的一些效率和中值的一些稳健性。

一旦你选择了你的函数，找到一个 m 估计只是一个优化问题。所以你的问题真的归结为寻找优化软件之一。如果您的优化问题是凸的（并且您可以选择 m 估计器以使问题是凸的），那么那里有很多高质量的软件。

# python - 在python中，如何卸载生成的类

> ID：919924
> 
> 赞同：1
> 
> 时间：2009-05-28T09:12:55.647
> 
> 标签：python, dynamic, garbage-collection, classloader

我正在开发一个将文件（hfd5 - pytables）加载到对象结构中的库。用于结构的实际类作为字符串从 hdf5 文件加载，然后以这种方式加载：

```
class NamespaceHolder(dict):
    # stmt is the source code holding all the class defs
    def execute(self, stmt):
        exec stmt in self 
```

问题是，像这样加载多个类会导致对象出现在垃圾收集的不可回收部分，即实际的类定义中。我也可以将它加载到全局字典中，但问题仍然存在于孤立类中。有什么办法可以卸载类吗？

主要问题是班级。**mro**属性，其中包含对类本身的引用，导致垃圾收集器无法处理的循环引用。

这是一个小测试用例，供您自己查看：

```
import gc

if __name__ == "__main__":
    gc.enable()
    gc.set_debug(gc.DEBUG_LEAK)

    code = """
class DummyA(object):
    pass
"""
    context = {}

    exec code in context
    exec code in context

    gc.collect()
    print len(gc.garbage) 
```

请注意：我之前已经反对使用解析文件中的文本来创建类，但显然他们在这里使用它并且看到了一些我没有看到的好处，所以现在放弃这个解决方案是不可行的.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T09:37:32.400

我认为 GC 可以处理循环引用，但是您需要做的是从 globals() 字典中删除引用：

```
try:
    del globals()['DummyA']
except KeyError:
    pass 
```

否则会有一个对类对象的非循环引用，这将阻止它被清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T12:07:44.750

gc.set_debug(gc.DEBUG_LEAK) 导致泄漏。试试这个：

```
import gc

def foo():                              
    code = """
class DummyA(object):
    pass             
"""
    context = {}
    exec code in context
    exec code in context

    gc.collect()
    print len(gc.garbage), len(gc.get_objects())

gc.enable()
foo(); foo() # amount of objects doesn't increase
gc.set_debug(gc.DEBUG_LEAK)
foo() # leaks 
```

# python - 坚持使用官方 Django 教程

> ID：919927
> 
> 赞同：2
> 
> 时间：2009-05-28T09:13:27.723
> 
> 标签：python, django

我刚开始学习 Python，也开始研究 Django。所以我从教程中复制了这段代码：

```
 # Create your models here.
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def __unicode__(self):
        return self.question
    def was_published_today(self):
        return self.pub_date.date() == datetime.date.today()

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
    def ___unicode__(self):
        return self.choice   #shouldn't this return the choice 
```

当我在 shell 中使用它时，我只是得到 Poll 对象的“问题”，但由于某种原因，它不会返回 Choice 对象的“选择”。我看不出有什么区别。我在 shell 上的输出如下所示：

```
>>> Poll.objects.all()
[<Poll: What is up?>]
>>> Choice.objects.all()
[<Choice: Choice object>, <Choice: Choice object>, <Choice: Choice object>]
>>> 
```

我期待 Choice 对象返回“Choice 对象”以外的其他内容。有人知道我在哪里失败以及我应该研究什么吗？

编辑：让我觉得自己像个白痴的方式。是的，三个下划线是问题所在。我现在看了大约一个小时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-28T09:18:32.190

您在 Choice 类的“unicode__”之前有三个下划线，在您的 Poll 类中应该只有两个，如下所示：

```
def __unicode__(self):
    return u'%s' % self.choice 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T09:19:25.277

您的 Unicode 方法有太多下划线。它应该是：

```
def __unicode__(self):
    return u'%s' % self.choice 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T09:20:03.933

改变：

```
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
    def ___unicode__(self):
        return self.choice   #shouldn't this return the choice 
```

至：

```
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
    def __unicode__(self):
        return self.choice   #shouldn't this return the choice 
```

`__unicode__`第二个定义中有太多下划线

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-28T09:20:44.260

官方的 Django 书有点过时了。但是对段落的评论真的很有用。它应该是两个下划线：

```
___unicode__(self): 
```

应该`__unicode__(self):`

# database - 获取表中的最后一个值

> ID：919930
> 
> 赞同：0
> 
> 时间：2009-05-28T09:14:29.327
> 
> 标签：database

我想获得确定列的最后一个值，例如在这个表 id 名称 1 Samer 2 Fahd 3 Hames 4 fuad

我只想在 sqlserver 中获取姓氏“fuad”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T09:19:35.713

按`ID`降序排列和`select top 1 name`：

```
select top 1 Name from MyTable order by ID desc 
```

# c# - 试图减少 GC 收集

> ID：919931
> 
> 赞同：2
> 
> 时间：2009-05-28T09:14:56.597
> 
> 标签：c#, garbage-collection, clr

有人可以告诉我下面的 AddB 是否会导致 CLR 分配少于 AddA？我已经检查了拆卸，看起来确实如此，但我想请**专家**确认。有人可以与我**交换**此信息吗？

干杯，查理。

* * *

```
namespace A
{
    struct Vec2
    {
        public float x;
        public float y;

        public Vec2 AddA(Vec2 other)
        {
            Vec2 v = new Vec2(); // Reference variable
            v.x = x + other.x;
            v.y = y + other.y;
            return v;
        }

        public Vec2 AddB(Vec2 other)
        {
            Vec2 v;              // Value variable
            v.x = x + other.x;
            v.y = y + other.y;
            return v;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-28T09:24:29.773

如果 Vec2`struct`在两个示例中都是 a ，则通过使用`Vec2 v = new Vec2();`您并**没有**创建对结构的引用，您只是在堆栈上创建了一个新结构。如果您不使用`new`关键字，您的结构仍然会在堆栈上创建，您可以单独初始化每个字段。

在这种情况下，`new`如果您的构造函数不接受一些有意义的参数来在一行中初始化数据，那么对结构使用关键字就没有多大意义。

如果第一种方法使用 a`class`而不是 a `struct`，那么它确实会创建一个对象供 GC 收集，这与第二种方法不同。由于 v in`AddB`是在堆栈上分配的，它不会被收集，当你的方法完成时，堆栈只是简单地弹出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T09:29:20.187

没有任何保证。值项不一定存储在堆中。

请参阅Eric Lippert[的堆栈是一个实现细节](http://blogs.msdn.com/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)，以及下面的[第二部分](http://blogs.msdn.com/ericlippert/archive/2009/05/04/the-stack-is-an-implementation-detail-part-two.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T09:58:02.577

AddA 方法中的代码与以下内容相同：

```
public Vec2 AddA(Vec2 other) {
   Vec2 v;
   v.x = 0;
   v.y = 0;
   v.x = x + other.x;
   v.y = y + other.y;
   return v;
} 
```

结构的无参数构造函数返回结构的默认值，这是一个所有成员都归零的值。该值只是由对构造函数的调用返回，它永远不会在堆上分配。

此外，可变结构通常是一个坏主意。我会像这样实现它：

```
struct Vec2 {

    public float X { get; private set; }
    public float Y { get; private set; }

    public Vec2(float x, float y) {
       X = x;
       Y = y;
    }

    public Vec2 Add(Vec2 other) {
       return new Vec2(X + other.X, Y + other.Y);
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T09:36:47.847

请注意，`AddA`它们`AddB`的内存行为没有区别，两者都将在堆栈上分配。不同之处在于它**不**`AddB`调用该类型的默认构造函数，从而留下未初始化的字段，`Vec2`而`AddA`首先将它们清零。

话虽如此，我想将内容归零的性能影响可能无法衡量（如果 JIT 编译器甚至没有完全删除它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T10:42:35.780

要添加到其他答案：

**首先**，可以通过使用适当的构造函数来改进代码，从而省略繁琐的赋值。这不是真正的可选：它*应该*完成。此外，将这样的结构实现为不可变类型会很好，即使字段完全*不可能*`readonly`出现：因此，您将实现纯值语义。

**其次**，关于堆栈与堆分配的问题：无论如何，我不会在这里费心太多：.NET 中使用的 GC 专门用于处理大量如此小的分配：您的代码将是最佳方案.NET GC 有关。不要试图避免它。

# java - 无法与 Eclipse 共享一些项目/颠覆性

> ID：919934
> 
> 赞同：1
> 
> 时间：2009-05-28T09:15:31.900
> 
> 标签：java, eclipse, svn, subversive

我刚刚遇到了一个奇怪的问题——至少对我来说很奇怪。也许有人有解决方案（或“经验教训”）：

我最近将一些 eclipse 插件项目导入到工作区中，并希望将这项工作置于版本控制之下。但这对于七个项目中的三个是不可能的：Team->Share 上下文菜单项只是没有出现。我已经手动删除了以前 SCM 系统（cvs、mercurial）的所有痕迹，并检查了是否有任何项目具有链接资源（没有任何）。

所以我的问题是：有人知道一些（隐藏的）先决条件来启用（插件）项目的团队共享吗？

**编辑**

再次检查后 - 我没有“导入插件”，但我已经压缩了整个工作区并在不同的环境中重用它（不同的机器，不同的 eclipse 安装）。经验教训：坏主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T10:03:46.840

你检查错误日志了吗？也许你发现了一个错误。

# javascript - javascript 是否强制使用特定字符集？

> ID：919936
> 
> 赞同：7
> 
> 时间：2009-05-28T09:15:46.283
> 
> 标签：javascript, html, forms, post, character-encoding

我正在尝试使用没有框架（原型、jQuery 等）的 javascript 来将从 html 表单传递的数据插入到 mysql 数据库。我已经设法让这个工作，但是，我的语言中常用的一些特殊字符出现问题（æøå）。utf-8 支持这些字符，当我跳过 javascript 时一切正常。但是，当我尝试通过 javascript post 函数传递 html 表单的内容并使用我的工作 php 脚本执行查询时，每个 æøå 都会转换为 Ã¦Ã¸Ã¥。

为了分解它，当代码中没有确定其他字符集时，javascript 是否会以某种方式强制使用特定的字符集？我试图在 javascript 帖子和 php 文件以及 html 表单的标题中指定字符集。

我相信我的 javascript 文件 formpost.js 中一定有问题或缺失：

```
 function sendText(visbool){
  var http =new GetXmlHttpObject();
  var url = "sendtext.php";
  var ovrskrift = document.form1.overskrift.value;
  var cont = document.form1.content.value;

  var params = "overskrift=" + ovrskrift + "&tekst=" + cont + "&visbool=" + visbool;
  http.open("POST", url, true);

  //Send the proper header information along with the request
  http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  http.setRequestHeader("Content-length", params.length);
  http.setRequestHeader("Connection", "close");

  http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
        // gjør noe smart her
    }
  }
  http.send(params);
}

function GetXmlHttpObject()
 { 
 var objXMLHttp=null;
 if (window.XMLHttpRequest)
  {
  objXMLHttp=new XMLHttpRequest();
  }
 else if (window.ActiveXObject)
  {
  objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
 return objXMLHttp;
 } 
```

发送文本.php：

```
<?php
//variabler for spørring
$date= date('Y-m-d');
$overskrift= $_POST["overskrift"];
$ostr='36';
$tekst= $_POST["content"];
//$tekst="test tekst";
$istr='32';
$bilde="";
$style="onlyinfo.css";
//$vis=$_POST['visbool'];
$vis=0;

require ('../config.php'); // henter informasjon om database tilkoblingen fra config.php

if (!$con){die('Could not connect: ' . mysql_error());} // lager feilmelding hvis tilkoblingen mislyktes

// spørring for databasen, konstrueres etter variablene som er angitt ovenfor
$sql="INSERT INTO tbl_info(dato,overskrift_tekst,overskrift_str,infotekst_tekst,infotekst_str,bilde,style,vismeg) VALUES('" . $date . "','" . $overskrift . "','" . $ostr . "','" . $tekst . "','" . $istr . "','" . $bilde . "','" . $style . "','" . $vis . "')";
$result = mysql_query($sql); // kjører spørring og lagrer resultat i $result

mysql_close($con); // lukker database tilkoblingen
?> 
```

createdlide.php：（为将来的代码实现保留 .php 扩展名）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<title>inforMe: Legg til side</title>
<link type="text/css" rel="stylesheet" href="./css/style.css" id="adminss">  
<script src="./js/formpost.js"></script>
<script type="text/javascript" src="./tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
    mode : "textareas"
});
</script>

</head>
<body>
<div class="imgupload">
  <input type="button" value="Last opp bilde"> <img src="" />
</div>
<div class="form">
  <form name="form1" method="post" action="sendtext.php">
    <label for="overskrift">Overskrift:</label>
    <input type="text" size="70" id="overskift" name="overskrift"><br />
    <label for="content">Tekst:</label>
    <textarea id="content" name="content" cols="50" rows="15">This is some content that will be editable with TinyMCE.</textarea>
    <input type="button" value="save draft" onclick="sendText(0)"/>
    <input type="button" value="save and publish" onclick="sendText(1)"/>
    <input type="submit" value="regular submit button"/>
  </form>
</div>

</body>
</html> 
```

**注意！** 我真的不知道把这些信息放在哪里......好吧......我决定在这里使用它：首先感谢以下所有好的建议。我相信这个问题得到了回答。至于我的问题，只是部分解决了。

似乎 utf-8 字符集在这里的某处丢失了，如果我使用 Latin-1 字符集创建一个新的 mysql 数据库并将我的文件中的字符集选项更改为 iso-8859-1，它工作得完全正确。由于我的测试设置基于所有挪威软件（浏览器、数据库服务器等），我想如果没有另行指定，它将返回 iso-8859-1

**NBB！** 现在一切都好起来了。当我添加时一切正常：

header('Content-Type: text/plain; charset=utf-8');

到我的 sendtext.php 文件的顶部。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T09:36:35.927

尝试将字符集附加到内容类型标头，如下所示：

```
"application/x-www-form-urlencoded; charset=utf-8;" 
```

此外，在您的文档中，您应该在标题中指定它是 utf-8：

```
<META http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

您可能还应该对所有值进行 encodeURI(value) ，以便对其进行正确的 url 编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-28T09:37:49.607

在内部，JavaScript 使用 Unicode，因此它可以毫无问题地存储您的变音符号。注意：Unicode != UTF-8。

但是随后，您尝试将该文本发送到您的服务器，这时麻烦就开始了。浏览器和服务器之间的线路（互联网）不支持 Unicode，因此浏览器必须对数据进行编码。因此它将 Unicode 转换为 UTF-8 字节流。

在服务器端，您必须将数据转换回 Unicode。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-14T17:26:12.330

我意识到这个问题已经在两年前发布了，但是 PQW 的答案有效的原因是客户端（浏览器）应该使用与页面相同的字符集进行回复（因此在 META 标记中指定 UTF-8 作品）。使用 Javascript 不会改变这个基本假设（因此无论是否涉及 Javascript，答案都是正确的）。

“最正确的方法”是在服务器响应标头中指定字符集，但是因为这并不总是可能的（也许您无法控制它们或其他一些原因），所以 META 方法是实现这一目标的下一个最佳方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T12:32:20.847

我认为您可以尝试使用`encodeURIComponent`.

```
var ovrskrift = encodeURIComponent(document.form1.overskrift.value); 
```

您应该使用它而不是`escape`. 在此页面上阅读更多信息：[比较 escape()、encodeURI() 和 encodeURIComponent()](http://xkr.us/articles/javascript/encode-compare/)。

它指出：

> [...]您应该尽可能避免使用 escape() 。最好的选择通常是 encodeURIComponent()。[...]

...这在我的经验中似乎也是正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T12:46:00.070

两个未经测试的（与您的代码示例相关的）建议：

(1) 使用 charset 属性引用您的外部 JS：

```
<script src="file.js" type="text/javascript" charset="utf-8"></script> 
```

(2) 也许可以在 PHP 端做更多的事情，比如去除非 UTF8 字符？：

```
<?php
$result = iconv("UTF-8","UTF-8//IGNORE", $result);
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T09:38:04.443

它并不强制，但取决于读取它的 HTML 的字符集，元数据中设置的显示字符集和文件格式的保存方式，这一切都会很有趣......

因此，当您保存 HTML 和 Javascript 时，请将两者都保存为 UTF-8。

此外，在 PHP 中，您可能需要一些 mb_internal_encoding 操作...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T09:55:48.713

Javascript 不会“强制”这样的代码页。要获得您想要的结果，只需使用 escape() 和 unescape() 来传递扩展的 ASCII。

F。

# haskell - 将 String 列表转换为 Int 列表

> ID：919937
> 
> 赞同：21
> 
> 时间：2009-05-28T09:16:05.157
> 
> 标签：haskell, functional-programming, casting

我有一个字符串列表，是否可以将其转换为整数列表？
例如：

```
["1","2"] -> [1,2] 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-28T09:19:06.040

出色地

```
f :: [String] -> [Int]
f = map read 
```

不？

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-12-31T02:12:57.713

这失败了：

```
map read ["1","2"]
[*Exception: Prelude.read: no parse 
```

这样做的方法是：

```
 map (read::String->Int) ["1","2"]
 [1,2]
 :: [Int] 
```

在 GHCI 之外，在 .hs 文件中它将是：

```
let intList = map (read::String->Int) ["1","2"] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-10T17:16:26.550

此类问题的一般答案是将任务分成几部分：`[String] -> [Int]`看起来像 和 的[`String -> Int`](http://www.haskell.org/hoogle/?hoogle=String+-%3E+Int)组合[`[a] -> [b]`](http://www.haskell.org/hoogle/?hoogle=%5ba%5d+-%3E+%5bb%5d)。Hoogle（链接）会给你一些结果，让我们看看......

> $ hoogle 'String -> Int'
> Test.HUnit.Base Label :: String -> Node
> Prelude error :: [Char] -> a
> Prelude length :: [a] -> Int
> Data.List length :: [a] - > Int
> Data.Char digitToInt :: Char -> Int
> Data.Char ord :: Char -> Int
> Debug.Trace trace :: String -> a -> a
> Network.BufferType buf_fromStr :: BufferOp a -> String -> a
> Network .Socket send :: Socket -> String -> IO Int
> Graphics.UI.GLUT.Callbacks.Window Char :: Char -> Key
> Prelude read :: Read a => String -> a
> Text.Read read :: Read a = > 字符串 -> 一个
> Data.String fromString :: IsString a => 字符串 -> 一个
> GHC.Exts fromString :: IsString a =>字符串 -> 一个
> Control.Monad.Trans.Error strMsg :: Error a => String -> a
> Control.Monad.Error.Class strMsg :: Error a => String -> a
> ...

呃，很多垃圾。我们可以首先从与您无关的包中删除那些...

> Prelude error :: [Char] -> a
> Prelude length :: [a] -> Int
> Data.List length :: [a] -> Int
> Data.Char digitToInt :: Char -> Int
> Data.Char ord :: Char - > Int
> Prelude read :: Read a => String -> a
> Text.Read read :: Read a => String -> a
> Data.String fromString :: IsString a => String -> a
> Text.Printf printf :: PrintfType r => 字符串 -> r

`error`听起来不像你想要的。`length`两者都不。`digitToInt`? 听起来有点对——而且实际上是有效的，但只是使用个位数的数字。`read`? 也许不是您所期望的名称，但如果您考虑一下，这是正确的：将字符串转换为更有意义的内容（如数字）就像阅读一些文本一样。

对，另一方面，Hoogle 给了我们我们想要的东西：

> $ hoogle '[a] -> [b]'
> Prelude map :: (a -> b) -> [a] -> [b]
> Data.List map :: (a -> b) -> [a] - > [b]
> Prelude concatMap :: (a -> [b]) -> [a] -> [b]
> Data.List concatMap :: (a -> [b]) -> [a] -> [b]
> Data.Maybe mapMaybe :: (a -> Maybe b) -> [a] -> [b]
> Prelude cycle :: [a] -> [a]
> Data.List cycle :: [a] -> [a]
> Prelude init :: [a] -> [a]
> Data.List init :: [a] -> [a]
> Prelude reverse :: [a] -> [a]

如您所见，这些函数中的大多数都被称为“map”，这可能又不是您所期望的名称——但显然这就是该操作的名称！你要找的是最简单的。

最后，我们需要结合这两个功能。`map`需要另一个函数作为它的第一个参数——嗯，显然`read`就是这样！因此，您只需`map`申请`read`. 下一个参数是`[a]`s 的列表：啊哈，我们已经完成了！

你可以通过启动 ghci 来检查：

> Prelude> :t map read
> map read :: Read b => [String] -> [b]

这里仍然有 this`b`而不是`Int`，但不要介意：`b`可以是任何你想要的类型！- 只要它有一个`Read`实例。`Int`有：

> Prelude> :i Int
> data Int = GHC.Types.I# GHC.Prim.Int# -- 在 `GHC.Types'
> 实例中定义 Bounded Int -- 在 `GHC.Enum'
> 实例中定义 Enum Int -- 在 `GHC 中定义.Enum'
> instance Eq Int -- 定义在 `GHC.Classes'
> 实例 Integral Int -- 定义在 `GHC.Real'
> 实例 Num Int -- 定义在 `GHC.Num'
> 实例 Ord Int -- 定义在 `GHC.Classes '
> instance Read Int -- 定义在 `GHC.Read'
> instance Real Int -- 定义在 `GHC.Real'
> instance Show Int -- 定义在 `GHC.Show'

# git - 尝试开始使用 git

> ID：919942
> 
> 赞同：3
> 
> 时间：2009-05-28T09:17:25.263
> 
> 标签：git, version-control

我正在尝试开始使用 git，但我马上就遇到了一些麻烦。我正在为 Windows 使用 Git GUI。请记住，我以前从未使用过版本控制，也不知道它是如何工作的。

我有一个 Code::Blocks C 项目，位于我笔记本电脑硬盘上的一个文件夹中。我打开 Git 并在 USB 硬盘驱动器上创建了一个新存储库。我想，我可以创建一个分支，指向我的项目已经存在的目录，然后将其中的所有代码提交到存储库。然后每次我想处理这个项目时，我都可以检查我的代码，打开 Code::Blocks 项目并进行编辑。然后进入不同的分支和东西，你知道，所有的爵士乐。

所以我创建了这个存储库，然后从菜单中创建了一个分支。我得到了这个对话框，它要求我输入分支名称或“匹配跟踪分支名称（无论是什么意思）”。然后，在“开始修订”下，它有几个选项。一个是文本框旁边的“修订表达式”，无论我输入什么都是无效的修订表达式。所以我尝试了其他选项，“本地分支”、“跟踪分支”和“标记”。这些启用另一个文本框，但即使没有选择“修订表达式”，它仍然说我输入了一个无效的文本框。什么是修订表达式？如何将代码签出到我硬盘上的目录？

哦，然后，有一个“选项”部分，其中包含“更新现有分支：[] 否 [x] 仅快进 [] 重置”
以及两个复选框，“获取跟踪分支”和“创建后签出”（此一个是显而易见的）。” 所有这些是什么意思？什么是跟踪分支？“仅快进”和“重置”指的是什么？我不知道自己在做什么，也不知道自己陷入了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T09:32:43.440

我对你想要做什么感到有点困惑。

首先，如果您的代码在您的笔记本电脑上，那么您为什么要在 USB 驱动器上创建存储库？使用 git，与 CVS 或 SVN 不同，存储库始终存在于项目的根目录中。

这就是我认为您想要的：在您的笔记本电脑硬盘驱动器上的 C 项目的根目录中创建一个新的 git 存储库。然后将文件签入存储库并提交。现在您要创建一个分支，以便为所有对话框添加颜色（例如），因此您创建了一个名为“color-dialogs”的新本地分支。您没有标记，也没有跟踪。标记是您发布 1.0 版时所做的事情：您将特定修订标记为“1.0”，以便您可以返回到它。然后稍后你制作一个“1.1”或“2.0”标签。当您希望您的分支与其他人的分支相同时，您可以进行跟踪。例如，我希望我的项目有所有最新的颜色对话框，所以我跟踪你的名为“color-dialogs”的分支，但我不这么称呼它，我只是叫我的分支“

快进是当您将更新拉到尚未更改的分支时。

总结一下：在您的笔记本电脑 HD 上的项目文件夹中创建存储库。如果你想在那里创建本地分支，你可以通过一个按钮在分支之间来回切换（使用 git checkout）。如果您想要在不同驱动器上的存储库，您所做的就是将存储库从内部 HD 克隆到 U 盘。然后您可以将更改从一个存储库拉到另一个存储库（每个都是一个完整的独立存储库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T09:44:54.820

我只浏览了 Simon Edwards 的[博客文章中提到](http://www.kdedevelopers.org/node/3962)[的 Git 寓言](http://tom.preston-werner.com/2009/05/19/the-git-parable.html)，但它看起来很有希望在没有太多细节的情况下获得一个很好的概念概述，所以我建议阅读它来学习 git。即使我已经使用 git 一段时间了，它在我的“阅读”列表中也很重要。

# c# - 如何响应 CodePlex WPF DataGrid 中更改的单元格？

> ID：919956
> 
> 赞同：1
> 
> 时间：2009-05-28T09:21:32.103
> 
> 标签：c#, wpf, datagrid

[在我看来，我已经从 CodePlex](http://wpf.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=25047)实现了WPF DataGrid ：

```
<toolkit:DataGrid x:Name="CodePlexDataGrid" 
    Style="{StaticResource ToolkitDataGrid}" 
    ItemsSource="{Binding Customers}"/> 
```

它绑定到我的 ViewModel 中的 ObservableCollection：

```
private ObservableCollection<Customer> _customers;
public ObservableCollection<Customer> Customers
{
    get
    {
        return _customers;
    }

    set
    {
        _customers = value;
        OnPropertyChanged("Customers");
    }
} 
```

当我更改网格中的数据时，它会更改，但**我找不到**可以处理的事件来捕获这些更改，例如 DataGridCellChanged，以便我可以将输入**的数据保存**回数据库。

**我们可以通过什么过程**来捕获对单元格的更改并将它们保存回数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T07:09:31.560

我一直在使用这些事件`CellEditEnding`，`RowEditEnding`它们不符合您的需要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T07:28:31.850

尝试以不同的方式接近它。无需绑定到 DataGrid 上的事件，而是在 Customer 上实现 INotifyPropertyChanged 并处理 Customer 对象的属性更改事件。在 WPF（与 Silverlight 相对）中，我认为您可以使用 BindingList 而不是 ObservableCollection 来观察集合中任何项目的属性更改。

对于 Silverlight，我创建了 ObservableCollection 的子类，它为添加到集合中的任何项目连接 PropertyChanged 事件处理程序，然后将它们冒泡到集合公开的 ItemPropertyChanged 事件。

这样我就可以做到：

```
myCollection.ItemPropertyChanged += (sender,e) => {
   // sender is the item whose property changed
   // e is PropertyChangedEventArgs which has the name of the property that changed
} 
```

# java - 设置公共成员时出现 IllegalArgumentException

> ID：919962
> 
> 赞同：2
> 
> 时间：2009-05-28T09:24:43.940
> 
> 标签：java, reflection

我一直在玩 Java 中的反射......我有点困惑。

我希望下面的程序允许我更改类中公共成员变量的值。但是，我收到 IllegalArgumentException。有任何想法吗？

```
public class ColinTest {

    public String msg = "fail";

    public ColinTest() { }

    public static void main(String args[]) throws Exception {
        ColinTest test = new ColinTest();
        Class c = test.getClass();
        Field[] decfields = c.getDeclaredFields();
        decfields[0].set("msg", "success");

        System.out.println(ColinTest.msg)
    }
} 
```

我收到这条消息 -

```
Exception in thread "main" java.lang.IllegalArgumentException
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:37)
    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:57)
    at java.lang.reflect.Field.set(Field.java:656)
    at ColinTest.main(ColinTest.java:44) 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T09:29:09.173

该[`Field.set`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Field.html#set(java.lang.Object,%20java.lang.Object))方法的第一个参数应该是您正在反映的对象。

```
decfields[0].set("msg", "success"); 
```

应该读：

```
decfields[0].set(test, "success"); 
```

此外，最终`System.out.println`调用应该引用`test`object 而不是 class `ColinTest`，因为我认为目的是输出`test.msg`字段的内容。

**更新**

[正如toolkit](https://stackoverflow.com/questions/919962/illegalargumentexception-when-setting-public-member/919986#919986)和[Chris](https://stackoverflow.com/questions/919962/illegalargumentexception-when-setting-public-member/919985#919985)所指出的，该[`Class.getDeclaredField`](http://java.sun.com/javase/6/docs/api/java/lang/Class.html#getDeclaredField(java.lang.String))方法可用于指定字段的名称以检索它：

```
Field msgField = test.getClass().getDeclaredField("msg");

// or alternatively:

Field msgField = ColinTest.class.getDeclaredField("msg"); 
```

然后，可以调用的`set`方法如下：`msgField`

```
msgField.set(test, "success"); 
```

这种方式有它的好处，正如工具包已经指出的那样，如果有更多的字段添加到对象中，则返回的字段的顺序`Class.getDeclaredFields`可能不一定将字段`msg`作为数组的第一个元素返回。当对类进行更改时，根据返回数组的顺序以某种方式可能会导致问题。

`getDeclaredField`因此，使用和声明所需字段的名称可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T09:29:46.817

set() 的第一个 arg 应该是您正在更改其字段的对象......即测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T09:31:21.943

请确保您发布的代码实际编译（您想要`test.msg`，而不是`ColinTest.msg`）。

您也可以考虑使用更新版本的 Java，它可以提供更具体的错误消息：

```
% java ColinTest
Exception in thread "main" java.lang.IllegalArgumentException: Can not set java.lang.String field ColinTest.msg to java.lang.String
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:37)
    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:57)
    at java.lang.reflect.Field.set(Field.java:657)
    at ColinTest.main(ColinTest.java:13) 
```

这可能会导致您找到其他人发布的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T09:30:52.477

当您调用`getDeclaredFields`时，每个数组元素将包含一个`Field`对象，该对象表示类上的字段，而不是实例化对象上的字段。

这就是为什么在使用 setter 时必须指定要设置该字段的对象：

```
ColinTest test = new ColinTest();
Field msgfield = ColinTest.class.getDeclaredField("msg");
msgField.set(test, "success"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T09:30:58.747

你想要的是：

```
Field msgField = c.getDeclaredField("msg");
msgField.set(test, "Success"); 
```

请小心使用`decfields[0]`，因为当您向班级添加第二个字段时，您可能无法获得预期的结果（您没有检查与该字段`decfields[0]`相对应的`msg`字段）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-14T11:32:38.933

我偶然发现了这个页面，因为奇怪的是，我不能在我的班级中设置公共字符串字段。该代码将在每个 for 循环中的 ArrayList 中添加新行。问题是，我只将新对象的实例化代码（即使用反射）放在内部 for 之外。

```
private ArrayList processDataSetResultSetAsArrayList(ResultSet resultSet, String fqnModel) {
    ArrayList result = new ArrayList();

    try {
        ResultSetMetaData metaData;
        int nColoumn;
        String columnName;
        String fieldValue;
        Field field;
        Object modelInstance;

        metaData = resultSet.getMetaData();
        nColoumn = metaData.getColumnCount();
        resultSet.beforeFirst();
        Class modelClass = Class.forName(fqnModel);
        while (resultSet.next()) {
            modelInstance = modelClass.newInstance();
            for (int i = 1; i <= nColoumn; i++) {
                columnName = metaData.getColumnName(i);
                field = modelInstance.getClass().getDeclaredField(columnName);
                fieldValue = resultSet.getString(i);
                field.set(modelInstance, fieldValue);
            }
            result.add(modelInstance);
        }            
    } catch (Exception ex) {
        Logger.getLogger(DB.class.getName()).log(Level.SEVERE, null, ex);
    }
    return result;
} 
```

检查现在我将 Class.forName(fqnModel) 移到 while 循环之外。因为当然我们只需要创建一次 Class 对象。但是，在每个 for 循环之前，我创建了一个模型对象，最终将添加到 ArrayList 中。

需要明确的是，这是我的 BiroModel 类的样子：

```
public class BiroModel extends Model {
public String idbiro = "";
public String biro = "";

public BiroModel() {
}

public BiroModel(String table, String pkField) {
    super(table, pkField);
    fqn = BiroModel.class.getName();

}

public String getBiro() {
    return biro;
}

public void setBiro(String biro) {
    this.biro = biro;
}

public String getIdbiro() {
    return idbiro;
}

public void setIdbiro(String idbiro) {
    this.idbiro = idbiro;
} 
```

}

我在这里创建了一个约定，所有字段对象都应该被声明为公共的。但是，因为我需要 EL 语法，所以我仍然需要为这个公共字段创建 getter/setter。

# c# - C#：如何注册/关联我的应用程序与 XP * 和 * Vista 的文件类型？

> ID：919963
> 
> 赞同：0
> 
> 时间：2009-05-28T09:24:46.763
> 
> 标签：c#, file, windows-vista, associations

将我的应用程序与适用于 Vista 和以前版本的 Windows 的文件扩展名关联的最简单方法是什么？

有没有人有一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T10:30:18.767

此答案不适用于所有人 - 但如果您正在部署 ClickOnce 应用程序（至少值得考虑），那么您可以在**Visual Studio**中为您的应用程序设置文件关联。

在 ClickOnce 应用程序属性中（适用于 VS 2008）：

*   **发布**选项卡
*   安装模式和设置 --> 该应用程序也可以离线使用
*   **选项...**按钮
*   发布选项 --> 文件关联
*   设置您希望触发您的应用程序的扩展|描述|ProgID|图标

我用这个“测试版”应用[DeepZoomViewer](http://www.deepzoompublisher.com/Viewer/)（[ClickOnce 发布](http://www.deepzoompublisher.com/Viewer/publish.htm)）进行了尝试——文件关联（在本例中为 .DZI 和 .DZC）绝对适用于 XP 和 Vista。

更好的是，当您*卸载*ClickOnce 应用程序时，它创建的文件关联会为您*删除*（同样，我的测试应用程序使用 .DZI 和 .DZC）。无需注册表黑客。

编辑：另一个描述[手动添加文件关联的](http://blogs.msdn.com/mwade/archive/2008/01/30/how-to-add-file-associations-to-a-clickonce-application.aspx)链接。

# cross-platform - 最合适的平台无关开发语言

> ID：919970
> 
> 赞同：5
> 
> 时间：2009-05-28T09:27:04.560
> 
> 标签：cross-platform, platform-independent

一个项目迫在眉睫，我将编写的一些代码可以部署在潜在客户碰巧拥有的任何硬件上。它是一个将 24/7 全天候运行的业务应用程序，因此我设想大多数主机将是服务器类型的机器，但较小的客户端可能，例如，只有一台简单的 PC。

关于我将要编写的代码的更多细节：

1.  不会有图形用户界面。

2.  它需要通过以太网与另一个定制的“黑匣子”设备进行通信。

3.  它需要与网络上某处的 MySQL 数据库进行通信。

4.  我没有任何性能问题，因为a）与黑匣子的通信次数很少，大约每秒1次，交换的数据量很小（每次大约1K），b）读取的次数与数据库的 /writes 将很小，大约每分钟 5 次，并且交换的数据量再次很小，并且 c) 需要执行的处理相当简单。

5.  我所做的一切都不是非常“接近金属”，所以我不想使用太低级的语言。易于开发和易于部署是我的主要优先事项。

6.  我不希望有一个完美的解决方案，所以我可以忍受这样的事情，例如，Windows 机器的配置文件与 Linux 机器的配置文件稍有不同等。我想避免为每个机器编译软件如果可能的话，主机。

对于您认为最适合哪种开发语言，我会重视您的想法。

干杯，

吉姆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-28T09:30:34.037

我个人会选择像 Python、Perl 或 Ruby 这样体面的脚本语言。所有这些都具有不错的库支持，可以轻松地与本地和远程 MySQL 数据库进行通信，并且非常独立于平台。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-28T09:32:27.963

我们需要知道的第一件事是您已经具备哪些语言技能？这可能是您理想选择的一个相当大的决定因素。

如果我这样做，我建议使用 Java 有几个原因：

1.  它几乎可以在任何地方运行并满足您概述的要求。
2.  它不是一种深奥的语言，所以会有很多开发人员。
3.  我已经知道如何编程了！
4.  可能是所有开发平台中最广泛的库生态系统。

另请注意，如果您更熟悉 Ruby 或 Python，您可以在 JVM 上用另一种语言编写它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T09:40:07.870

关于脚本语言与 Java 的对比，我对使用 Java 开发命令行工具感到失望。你不能直接执行它们，你必须（1）编译它们和（2）编写一个shell脚本来执行jar文件，这个脚本可能因平台而异。我推荐 Python，因为它可以在任何地方运行，并且它有一个很棒的 SQL 库[mysql-python](http://sourceforge.net/projects/mysql-python "mysql-python")。该库已准备好在 Windows 和 Linux 上使用。Python 的样板也少得多，您将编写更少的代码行来做同样的事情。

编辑：当我谈到 JAR 是否可执行时，我是在谈论它们是否可以直接在操作系统中执行。当然，如果您的文件管理器设置为这样做，您可以双击它们来运行它们。但是当您在终端窗口中并且想要运行 java 程序时，您必须使用“java -jar myapp.jar”而不是通常的“./myapp.jar”。在 Python 中，只需运行“./myapp.py”，不必担心编译或类路径。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-28T09:33:11.973

听起来 Perl 或 Python 完全符合要求。您选择哪一个将取决于构建和支持系统的人员的专业知识。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T09:42:11.063

Python 或 Java。它们都易于在您提到的服务器环境和桌面环境（即 Linux/Solaris 和 Windows）上部署。

Perl 也是一个不错的选择，但这取决于您对 Perl 的了解程度、维护您的代码的其他人对 Perl 的了解程度以及能够处理 Windows Perl 版本安装的桌面用户数量.

由于 Java 通过 Jython 支持 Python，我自己会使用 JVM 要求，但我个人会一直使用 Java 应用程序来满足您描述的这种系统。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T09:30:40.183

如果所有平台都是标准 PC（或至少运行 Linux），则应考虑[使用 Python 。](http://www.python.org/)如果您的版本不存在任何包，您可以自己编译它。此外，您可以轻松地将标准库从不可用和不需要的东西中剥离出来（例如，声音支持）。

Python 不需要大量资源，它易于学习和阅读。

如果你知道 Perl，你可以试试。如果你不是每天都使用 Perl，那就不要。Perl 语法很难记住，一周后，即使您自己编写代码，您也会想知道代码做了什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-28T09:32:30.927

Perl 可能对您有所帮助，因为它可用于许多平台，您只需从[CPAN](http://cpan.org "综合 Perl 归档网络")安装模块即可获得几乎所有功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-28T09:30:11.493

我会说使用 C 或 C++。它们与平台无关，但您必须针对每个平台进行编译。

或者使用 Java。它在虚拟机中运行，因此是真正的跨平台，而不是像 C 那样的慢级别。

# sql-server - 我可以在 Sql Server 中使用自定义枚举数据类型吗？

> ID：919971
> 
> 赞同：13
> 
> 时间：2009-05-28T09:28:17.927
> 
> 标签：sql-server

在我的 sql 代码中，我传递了一堆幻数：-

```
AnimalType TINYINT

/*
  AnimalType can be one of the following :-
  1\. Cat
  2\. Dog
  3\. Bird
 ....
*/ 
```

无论如何我可以将其设为自定义类型/枚举。例如。

```
AnimalType ANIMAL 
```

并且它被限制为包含介于 1 <-> 之间的数字（例如，在我上面的示例中为 3）。

或受限于字符串。例如。AnimalType = 'Cat' .. 等等？

干杯!

### 编辑

我知道查找表是什么。这不是针对查找表，而是针对传递给多个存储过程的一些数据。我不想传入*Magic Numbers*，而是希望传入一个枚举或至少一些受限制的数字（例如数字 1<->5）等...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-29T14:56:24.397

没有枚举类型。但是，您可以创建用户定义的函数来在映射到枚举值的 INT 之间来回转换。

要为基于“INT”的 AnimalType 生成友好名称，您可以执行以下操作：

**生成友好名称的 UDF：**

```
CREATE FUNCTION ihAnimalTypeDesc
(
    @AnimalType INT
) 

RETURNS VARCHAR(20)
AS  
BEGIN 
    IF @AnimalType IS NULL
    RETURN NULL

    DECLARE @Temp AS VARCHAR(20)

    SET @Temp = CASE @AnimalType
    WHEN 1 THEN 'Cat'
    WHEN 2 THEN 'Dog'
    WHEN 3 THEN 'Snake'
    END

    RETURN @Temp
END 
```

**`SELECT`语句可以像这样使用 UDF ：**

```
SELECT A.AnimalName, dbo.ihAnimalTypeDesc(A.AnimalType)
FROM Animals A 
```

**如果动物属于特定类型，这是一个返回 true 或 false 的 UDF：**

```
CREATE FUNCTION IsCat
(
    @AnimalType INT
) 

RETURNS BIT
AS  
BEGIN 
    IF @AnimalType IS NULL
        RETURN NULL

    IF @AnimalType = 1
        RETURN 1

    RETURN 0
END 
```

**这是使用上述 UDF 的示例。`WHERE`注意：在子句中执行此操作时必须小心性能问题。：**

```
SELECT AnimalName
FROM Animals
WHERE dbo.IsCat(AnimalType) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T09:30:41.947

枚举就像一个`FOREIGN KEY`表，但没有表。

创建表并进行`FOREIGN KEY`约束：

```
CREATE TABLE AnimalType (id INT NOT NULL PRIMARY KEY, name VARCHAR(50) NOT NULL)

CREATE TABLE Animal (
        id INT NOT NULL PRIMARY KEY,
        type INT NOT NULL,
        name VARCHAR(50) NOT NULL,
        CONSTRAINT FK_animal_type FOREIGN KEY (type) REFERENCES AnimalType(id)
    ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-01-04T15:14:48.353

您可以尝试添加如下内容：

```
CREATE VIEW AnimalType AS
    SELECT 
     10 AS Cat
    ,20 AS Dog
    ,30 AS Bird 
```

使用它：

```
DECLARE @animal INT    
SELECT @animal = Bird FROM AnimalType 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T14:46:33.963

根据您的最新编辑，关于需要传入参数。除了繁重的 SQL 之外，T-SQL 还具有处理简单内容的基础知识。没有枚举数据类型。如果这是您想要的，您可以通过以下方式处理它：

```
create procedure YourProcedure
(    @param1   int
    ,@param2   varchar(5)
    ,@param3   varchar(5)
)
as

DECLARE @Value3  int

IF @param1 IS NULL OR @param1<1 OR @param1>5
BEGIN
    return 1 --error out of range param
END

IF NOT EXISTS (SELECT Value FROM LookUpTable WHERE Value=@param2)
BEGIN
    return 2 --error out of range param
END

SELECT @Value3=IntValue FROM OtherLookupTable WHERE StrValue=@param3
IF @Value3 IS NULL
BEGIN
    return 3 --error out of range param
END

--do work here

go 
```

# asp.net - 透明 PNG 在 SQL Server 图像字段中不起作用

> ID：919972
> 
> 赞同：1
> 
> 时间：2009-05-28T09:28:33.667
> 
> 标签：asp.net, sql-server, dynamic-data

我尝试将透明 PNG 图像上传到 SQL 服务器图像字段，并使用 DynamicData ImageHandler 检索它。图像中的透明区域在渲染时显示为白色。请告知任何解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T13:04:14.710

我同意汤姆的观点，我几乎无法相信 SQL 会改变图像，从而给出您遇到的问题。此外，为什么将图像存储在 SQL 服务器图像字段中？您应该有一个真正充分的理由这样做，因为否则最好（根据我的经验）将对文件的引用存储在 varchar 字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-29T18:25:01.717

问题是处理程序返回的响应的内容类型。将内容类型设置为 image/png 后，它起作用了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-24T13:30:35.470

我不是 100% 确定，但我怀疑 ImageHandler 正在以一种导致透明度消失的方式操纵您的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T09:36:35.693

直接使用 BLOB 并将图像的原始数据放入其中。

# java - 如何在 Spring Security 中进行 LDAP 身份验证和数据库授权？

> ID：919983
> 
> 赞同：3
> 
> 时间：2009-05-28T09:30:41.260
> 
> 标签：java, security, spring

我是 Spring 新手，所以这个问题可能看起来很明显。

我正在尝试实现 Spring 安全性，我的要求是针对 LDAP 服务器对用户名/密码进行身份验证，一旦用户通过身份验证，我需要从关系数据库中检索用户角色。

是否可以在 Spring 安全性中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-28T09:46:43.817

是的。

内置的 ldap 身份验证管理器将用户的身份验证和授权分为两部分。您可以配置基于 LDAP 的身份验证管理器，如下所示。

```
<bean id="authenticationManager" class="org.acegisecurity.providers.ProviderManager">
    <property name="providers">
        <list>
            <ref local="ldapAuthenticationProvider"/>
        </list>
    </property> 
</bean> 
```

身份验证提供程序是这样配置的。

```
<bean id="ldapAuthenticationProvider" class="org.acegisecurity.providers.ldap.LdapAuthenticationProvider">
    <constructor-arg><ref local="authenticator"/></constructor-arg>
    <constructor-arg><ref local="populator"/></constructor-arg>
    <property name="userCache"><ref local="userCache"/></property>
</bean> 
```

我不知道是否有内置的填充器可以满足您的需求，但如果需要，您可以开发自己的填充器。

# python - 使用 mod_python 时 python 日志记录模块的不同行为

> ID：919990
> 
> 赞同：1
> 
> 时间：2009-05-28T09:31:42.257
> 
> 标签：python, django, logging, mod-python

我们有一个令人讨厌的问题，我们看到 python 日志记录模块在我们的服务器上使用 mod_python 运行时表现不同。在 shell 或 django 中使用 runserver 命令或 mod_wsgi 执行相同的代码时，行为是正确的：

```
import logging
logger = logging.getLogger('site-errors')
logging.debug('logger=%s' % (logger.__dict__))
logging.debug('logger.parent=%s' % (logger.parent.__dict__))
logger.error('some message that is not logged.') 
```

然后我们进行以下日志记录：

> 2009-05-28 10:36:43,740,DEBUG,error_middleware.py:31,[logger={'name': 'site-errors', 'parent': <logging.RootLogger instance at 0x85f8aac>, 'handlers': [], 'level': 0, 'disabled': 0, 'manager': <logging.Manager instance at 0x85f8aec>, 'propagate': 1, 'filters': []}]
> 
> 2009-05-28 10:36:43,740,DEBUG,error_middleware.py:32,[logger.parent={'name': 'root', 'parent': None, 'handlers': [<logging.StreamHandler instance at 0x8ec612c>, <logging.handlers.RotatingFileHandler instance at 0x8ec616c>], 'level': 10, 'disabled': 0, 'propagate': 1, 'filters': []}]

可以看到，没有为子记录器“站点错误”设置处理程序或级别。

日志配置在 settings.py 中完成：

```
MONITOR_LOGGING_CONFIG = ROOT + 'error_monitor_logging.conf'

import logging
import logging.config

logging.config.fileConfig(MONITOR_LOGGING_CONFIG)

if CONFIG == CONFIG_DEV:
   DB_LOGLEVEL = logging.INFO
else:
   DB_LOGLEVEL = logging.WARNING 
```

第二个问题是我们还在 __init__.py 中添加了一个自定义处理程序，该处理程序作为 error_middleware.py 驻留在文件夹中：

```
import logging
from django.conf import settings
from db_log_handler import DBLogHandler

handler = DBLogHandler()
handler.setLevel(settings.DB_LOGLEVEL)
logging.root.addHandler(handler) 
```

在日志中看不到自定义处理程序！

如果有人知道问题出在哪里，请告诉我们！不要犹豫，要求提供更多信息。这肯定有助于解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-28T10:04:46.057

如果不配置登录可能会更好`settings.py`。

我们在我们的 root 中配置您的日志记录`urls.py`。这似乎效果更好。我还没有阅读足够多的 Django 源代码来知道为什么，确切地说，它更好，但它对我们来说效果很好。我也会在这里添加自定义处理程序。

另外，请仔细查看[mod_wsgi](http://code.google.com/p/modwsgi/)。它的表现似乎比 mod_python 好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-07T16:26:25.217

您似乎没有发布所有相关信息 - 例如，您的日志记录配置文件在哪里？

你说：

> 在 shell 或 django 中使用 runserver 命令或 mod_wsgi 执行相同的代码时，行为是正确的

您不清楚您显示的日志记录输出是来自这些环境之一，还是来自 mod_python 运行。它看起来没有错 - 在您的代码中，您将处理程序添加到根目录，而不是记录“站点错误”。您还在处理程序上设置了一个级别，而不是记录器 - 所以您不会期望在日志输出中看到为“站点错误”记录器设置的级别，不是吗？记录器和处理程序都可以设置级别，但它们并不相同，尽管它们以相同的方式过滤掉事件。

如果您查看配置的日志记录文档，则可以轻松解释有关自定义处理程序的问题，请参阅

[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)（搜索“类条目表示”）

这解释了配置文件中描述的任何处理程序类在日志包命名空间中都是 eval()。因此，通过将 logging.custhandlers 绑定到您的自定义处理程序模块，然后在配置文件中声明“custhandlers.MyCustomClass”，eval() 会产生预期的结果。你也可以做到

logging.sitemonitoring = 站点监控

并将处理程序类指定为

sitemonitoring.db_log_handler.DBLogHandler

这也可以正常工作（只要已经导入了 db_log_handler 子包）。

顺便说一句，人们有时在 settings.py 中配置登录时遇到问题的原因是 Django 的导入魔法导致循环导入问题。我通常在 settings.py 中配置日志记录，除非您想导入 Django 的某些位（例如在 django.db 中 - 因为应用程序导入逻辑在 django.db 中，所以如果您尝试导入可能会遇到循环导入问题）在 settings.py 中导入 django.db.x）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T13:45:13.837

使用 mod_wsgi 不能解决问题。

我可以通过将完整的配置放入一个文件来解决这个问题。混合文件和代码配置似乎会给 apache 带来问题（无论是使用 mod_wsgi 还是 mod_python）。

要使用带有文件配置的自定义日志记录处理程序，我必须执行以下操作：

```
import logging
import logging.config
logging.custhandlers = sitemonitoring.db_log_handler
logging.config.fileConfig(settings.MONITORING_FILE_CONFIG) 
```

从 settings.py 我无法导入`sitemonitoring.db_log_handler`，所以我必须将此代码放在根目录中`urls.py`。

在配置文件中，我引用`DBLogHandler`了以下语句

```
[handler_db]
class=custhandlers.DBLogHandler()
level=ERROR
args=(,) 
```

PS：请注意，`custhandler`“属性”是动态创建的，可以有另一个名称。这是使用动态语言的一个优势。

# .net - 使用 AMCAP 捕获静止图像？

> ID：919991
> 
> 赞同：0
> 
> 时间：2009-05-28T09:31:47.187
> 
> 标签：.net, visual-c++, webcam, video-capture

我是来自 *nix 世界的开发人员，所以任何指针都会有所帮助。

我正在使用 AMCAP SDK 示例，并且必须捕获实时预览和静止图像。我理解了获取实时预览的代码。现在如何在运行时从 gcap 数据结构中捕获图像？请注意，应用程序必须对捕获的图像进行一些实时图像处理并立即返回。所以我不想将实时预览保存为 avi 并从中提取帧。

问候安库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T14:21:47.663

我不确定是否使用 amcap 示例进行操作。但是，如果您尝试处理来自流的图像，请查看[此 CodeProject 示例](http://www.codeproject.com/KB/audio-video/VideoImageGrabber.aspx)。IMO 这个示例比 amcap 或 Microsoft SDK 中的任何其他示例更简单、更清晰。

# email - 在 Zend Framework 中将视图文件加载到变量中

> ID：919995
> 
> 赞同：1
> 
> 时间：2009-05-28T09:32:47.277
> 
> 标签：email, zend-framework, templates

我正在尝试使用邮件模板发送邮件。为此，我想将 .tpl 加载到变量中。我想知道是否可以在控制器中设置视图的值，然后将此视图加载到变量中，而不是加载 HTML 文件并替换占位符。这样，我将有一个包含 HTML 邮件的变量，该变量在加载视图之前用控制器中设置的信息填充。

我的意思是，如果已经有以更标准化的方式进行邮件模板的方法，也欢迎任何替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T10:35:10.023

一个好主意 Erik，我已经做过很多次了。

Zend_View 实际上只是一个模板系统，可以用来生成任何东西，而不仅仅是 HTML。

示例代码 - 创建一个视图，分配一些数据，渲染视图并发送邮件！

```
$view = $this->getHelper('ViewRenderer')->view;

$view->email = $data['email'];    
$view->password = $data['password'];

$text = $view->render('mail/new-user.php');
$mail = new Zend_Mail();

$mail->addTo($data['email'], $data['forename'] . ' ' . $data['lastname']);
$mail->setSubject('Account Details');
$mail->setBodyText($text, 'utf-8');

$mail->send(); 
```

在第一行中，我检索 ViewRenderer 的视图，以便可以访问正常的脚本路径。您可以创建一个新的 Zend_View 对象，但您需要手动将路径添加到您的视图脚本。

在我的示例中，生成了基于文本的内容，但您也可以生成 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T10:07:50.810

对不起，伙计们（和女孩们）。我的谷歌技能一定已经注意到它是清晨。我在这里找到了我想要的东西：http: [//myzendframeworkexperience.blogspot.com/2008/09/sending-mails-with-templates.html](http://myzendframeworkexperience.blogspot.com/2008/09/sending-mails-with-templates.html)

# c# - SQLSERVER 和 dot.net 之间的消息限制错误

> ID：919998
> 
> 赞同：0
> 
> 时间：2009-05-28T09:33:38.320
> 
> 标签：c#, sql-server, vb.net, error-handling

更新：

我试图在 sql-server 的本地实例上运行它，遗憾的是它成功了！！！

现在我知道代码是正确的，并且我需要找到某种 DBA 限制（并要求 DBA 删除）

**有任何想法吗？**

```
using System; 
using System.Collections.Generic;
using System.Text;
using System.Data.SqlClient;
using System.Data;

namespace testDBMessages
{
    public class CGeneral
    {
        // Declare and instantiate connection
        private static  Form1 caller;

        public CGeneral(Form1  caller1)
        {
            caller = caller1;
            string connString = "server=(local)\\SQLEXPRESS;database=tests;Integrated Security=SSPI";

            SqlConnection cn = new SqlConnection(connString);

            cn.InfoMessage += new SqlInfoMessageEventHandler(CnInfoMessage);            
            cn.FireInfoMessageEventOnUserErrors = true;
            SqlCommand cmd = new SqlCommand();

            String sql = "dbo.fillTables";
            cmd.Connection = cn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = sql;
            cmd.Parameters.Add(new SqlParameter("@test", 6));
            try
            {
                cn.Open();                
                SqlDataReader sdr;
                sdr = cmd.ExecuteReader(CommandBehavior.CloseConnection); 
            }
            catch (SqlException ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally
            {
                cn.Close();
            }
        }

        static void CnInfoMessage(object sender, SqlInfoMessageEventArgs ev) 
        {
            foreach (SqlError err in ev.Errors)
            {                
                Console.WriteLine("Message- " + err.Message);
                caller.addMessage(err.Message);
            }
        }       
    }
} 
```

表格代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace testDBMessages
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            CGeneral a = new CGeneral(this);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Application.DoEvents();            
        }

        public void addMessage(string msg)
        {
            listView1.Items.Add(msg);
            listView1.Refresh();

        }
    }
} 
```

存储过程

```
ALTER PROCEDURE [dbo].[fillTables]
(
    @test smallint
)

AS

BEGIN
    declare @counter as int
    SET @counter=1
    while @counter<100
    BEGIN
        Insert into tests.dbo.tToFill (id,description,testNum) 
        Values (@counter,'test_1',@test)
RAISERROR ('RECORD NUM %d',10,1,@counter)
        SET @counter=@counter+1
    END
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T09:45:00.013

严重性为 10 的 RAISERROR 被归类为警告，因此不会流向客户端代码。

使用 16，[它被定义为“表示可以由用户纠正的一般错误”](http://msdn.microsoft.com/en-us/library/ms164086.aspx) （编辑）我敢肯定，以前是不同的......

```
RAISERROR ('RECORD NUM %d',16,1,@counter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T09:46:31.320

您使用集成安全连接到数据库的用户是否对存储过程 (dbo.filltables) 具有 EXECUTE 权限，因为这表明只有 dbo（数据库所有者）对该过程具有完全权限。

您需要为任何想要使用它的人授予权限。如果安全是一个问题，请小心授予每个人权利。*`~~*******