# StackOverflow 问答 000764000-000764999

# delphi - Delphi：找不到所需的包

> ID：764000
> 
> 赞同：14
> 
> 时间：2009-04-18T19:24:41.307
> 
> 标签：delphi, path, delphi-2009, packages

我正在尝试构建 3 个包，A、B 和 C。A 定义了一些在 B 和 C 中使用的基类。我将它们中的所有 3 个都放在同一个项目组中，都设置为输出相同自定义 BPL 输出文件夹。此文件夹位于 B 和 C 的搜索路径中。但是当我去构建 B 和 C 时，编译器在 Requires 列表中阻塞。“找不到所需的包‘A’。”

我如何告诉 B 和 C 在哪里可以找到 A 以便他们正确构建？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-18T19:41:20.800

要么找不到包，要么编译器混乱。在后一种情况下，重新启动有时会有所帮助。然后按顺序从所有包中手动构建。

如果确实找不到，请检查所有包（bpl 和 dcp）和 dcu 文件是否可用。你需要两者。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-18T19:55:34.323

如果在 IDE 尝试加载包时发生这种情况：您的包输出目录（*.bpl 文件所在的位置）必须位于系统的 PATH 环境变量中。包是静态链接的 DLL，Windows 必须能够找到它们才能加载它们。

如果在构建包时发生这种情况：任何/所有 DCP 输出目录（*.dcp 文件所在的位置）必须位于相关项目的搜索路径中，以便编译器可以找到已编译的包。您也可以将包项目的 DCP 输出目录留空 - 在这种情况下，使用在 Tools\Options\Library 中设置的全局 DCP 输出目录；然后，依赖项目不需要将其包含在搜索路径中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T08:51:05.007

您尝试编译的包的“requires”子句中可能错误地指定了所需包的名称。举个例子：

我们有两个包 - VirtualTreesR.dpk 和 VirtualTreesD.dpk。VirtualTreesD 需要 VirtualTreesR。它们都具有“16”后缀，因此它们都在 Delphi 项目管理器窗口中显示为 VirtualTreesR16.bpl 和 VirtualTreesD16.bpl。你可能认为这些是包的名称，但你错了。包的名称仍然是 VirtualTreesR 和 VirtualTreesD，而不是 VirtualTreesR16 和 VirtualTreesD16。

编译 VirtualTreesR.dpk 时，Delphi 会生成两个文件（我这里不讨论 DCU）VirtualTreesR* *16* *.bpl 和 VirtualTreesR.dcp。看到不同？

然后我们尝试编译 VirtualTreesD.dpk 并得到错误：“[DCC 致命错误] VirtualTreesD.dpk(35): E2202 Required package 'VirtualTreesR16' not found”。

发生错误是因为 VirtualTreesD.dpk 包的“requires”子句包含以下行：

```
 requires
      designide,
      VirtualTreesR16; 

```

Delphi 尝试查找 VirtualTreesR16.dcp 并失败，即使 Delphi 搜索路径和 PATH 环境变量设置正确，因为没有 VirtualTreesR16.dcp。只有 VirtualTreesR.dcp。

解决方案是修复“requires”子句，使其如下所示：

```
 requires
      designide,
      VirtualTreesR; 

```

希望能帮助到你。

PS 这是一个非常令人沮丧的问题，因为这个名称不匹配并不明显，并且它的片段分散在不同的设置中。如果 Delphi 指定了它试图找到的确切文件（例如，'VirtualTreesR.dcp' 而不是 'VirtualTreesR'），它可能会更具体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-18T19:45:54.597

我会检查以确保您在哪里为包编写 .dcp 文件。一旦你有了这个，检查每个包的搜索路径是否有一个 .dcp 输出文件夹的条目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-10T04:56:30.080

通过 Delphi 项目管理器上下文菜单添加所需的包时，我有时会收到“找不到包”错误。（打开一个包，右键“Requires”，选择“Add Reference...”命令）

相反，通过手动编辑包项目文件来添加所需的包更容易：

1.  在项目管理器中选择包。`MyPackage.bpl`例如。
2.  `Ctrl+V`打开项目文件。
3.  将所需的包添加到 requires 子句。
4.  确保所需的包 *.DCP 文件位于包搜索路径中。

# c# - 重置主键

> ID：764004
> 
> 赞同：2
> 
> 时间：2009-04-18T19:28:05.887
> 
> 标签：c#, dataset, primary-key

我试图在网上找到答案，但显然无法完成（我的意思是在应用程序级别，而不是数据库）。我需要完全清除我的数据集并同时重置主键。有任何想法吗？

或者，我可以使用的一种技巧是重新初始化数据集，但这似乎也不可能，因为数据集在应用程序中的不同类之间共享（我在 Program.cs 中创建共享数据集）。

谢谢

法鲁克

更新：

好的，我试过这个：

MyDataSet sharedDS = new MyDataSet();

. . .

清洁DS()

{

```
 MyDataSet referenceDS = new MyDataSet(); 
    sharedDS.Table1.Reset(); 
    sharedDS.Merge(referenceDS); 
```

}

我的原始问题已解决，但现在我得到一个 System.ArgumentException for Column1 does not belongs to Table1 在那里我可以看到 DataSet Viewer 中的列以及填充的行。另请注意，我可以手动重新创建整个数据集，但我仍然得到同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-26T18:17:31.250

我用 autoincrementseed 和 autoincrementstep 尝试了它，它终于可以工作了。这里供其他人参考：

```
sharedDS.Clear();
sharedDS.Table1.Columns[0].AutoIncrementStep = -1;
sharedDS.Table1.Columns[0].AutoIncrementSeed = -1;
sharedDS.Table1.Columns[0].AutoIncrementStep = 1;
sharedDS.Table1.Columns[0].AutoIncrementSeed = 1; 
```

请参阅此线程中的推理： [http ://www.eggheadcafe.com/community/aspnet/10/25407/autoincrementseed.aspx](http://www.eggheadcafe.com/community/aspnet/10/25407/autoincrementseed.aspx)

和： http: [//msdn.microsoft.com/en-us/library/system.data.datacolumn.autoincrementseed (VS.85).aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.autoincrementseed(VS.85).aspx)

感谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T19:42:40.873

[DataSet.Clear()](http://msdn.microsoft.com/en-us/library/system.data.dataset.clear.aspx)方法是否符合您的要求？

## 编辑

因为您说要重置主键，所以您必须在 DataSet 保存的 DataTables 上谈论。您是否尝试过调用 DataSet.Tables["MyTable"].Reset()，它应该将表重置为原始状态，而不是整个 DataSet？

## 编辑 2

如果这是一个自动递增列，您是否尝试过将 DataColumn 的[AutoIncrementSeed](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.autoincrementseed.aspx)属性重置为 0？

# php - PHP：获取用逗号分隔的文本

> ID：764010
> 
> 赞同：2
> 
> 时间：2009-04-18T19:31:52.290
> 
> 标签：php, arrays

我有一个多维数组。例如这样的东西：

```
Array (
    [0] => Array
        (
            [title] => Star Trek - Viaje a las estrellas
            [country] => Venezuela, Spain, long title, poster title
        )

    [1] => Array
        (
            [title] => Viaje a Las Estrellas
            [country] => Venezuela
        )
) 
```

我想从 [country] 获取逗号之间的文本，并将每个元素插入单独的索引中，例如：

```
Array (
    [0] => Array
        (
            [title] => Star Trek - Viaje a las estrellas
            [country] => [0] => Venezuela
                         [1] => Spain
                         [2] => long title
                         [3] => poster title
        )

    [1] => Array
        (
            [title] => Viaje a Las Estrellas
            [country] => Venezuela
        )
) 
```

可能数组布局不正确，但我只想向您解释我需要做什么。请注意，并非总是 [country] 包含用逗号分隔的元素，有时只是一个元素。

我该怎么做？？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-18T19:33:42.767

尝试[`explode()`](http://php.net/explode)在国家元素上使用。您可以使用 分隔符`", "`，因为这些是逗号分隔值。

一种方法（类似于其他人的建议）是：

```
// Assuming that $data contains your multidimensional array...
for ($i = 0; $i < count($data); $i++)
{
    if (strstr($data[$i]['country'], ', '))
    {
        $data[$i]['country'] = explode(', ', $data[$i]['country']);
    }
} 
```

另外，请注意，您实际上并不需要使用`strpos()`—<code>strstr() 在这里完美工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T19:35:00.020

您可以使用该`preg_split`函数和正则表达式来拆分字符串：

```
foreach ($array as $key => $item) {
    if (strpos($item['country'], ',') !== false) {  // check if string contains a comma
        $array[$key]['country'] = preg_split('/,\s*/', $item['country']);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T20:39:22.517

```
$a = Array (
    0 => Array
        (
            "title" => "Star Trek - Viaje a las estrellas",
            "country" => "Venezuela, Spain, long title, poster title"
        ),

    1 => Array
        (
            "title" => "Viaje a Las Estrellas",
            "country" => "Venezuela"
        )
);
$res = array();    
    foreach($a as $k => $v){
        foreach($v as $key => $value){
            switch($key){
                case "country":                                
                    $r = split(",", $value); 
                    foreach($r as $index => $val){
                        $res[$k][$key][$index] = trim($val);
                    }
                  break;
                default:
                    $res[$k][$key] = $value;
                break;
            }
        }
    }

    print_r($res); 
```

输出：

```
Array
(
    [0] => Array
        (
            [title] => Star Trek - Viaje a las estrellas
            [country] => Array
                (
                    [0] => Venezuela
                    [1] => Spain
                    [2] => long title
                    [3] => poster title
                )
        )
    [1] => Array
        (
            [title] => Viaje a Las Estrellas
            [country] => Array
                (
                    [0] => Venezuela
                )
        )
) 
```

# encryption - 如何在代码中隐藏密钥？

> ID：764012
> 
> 赞同：49
> 
> 时间：2009-04-18T19:32:19.963
> 
> 标签：encryption, obfuscation

一段时间以来，我一直想知道某些软件如何以无法轻易发现的方式隐藏密钥。仅举几个例子：

*   DVD 播放器软件隐藏 CSS 键
*   带有序列号/注册码的软件隐藏了用于验证序列号的密钥/哈希

显然，这些程序所做的不仅仅是将密钥放在 byte[] 中，因为这样可以很容易地窃取他们的密钥并生成您自己的序列号等。

使用什么样的策略来隐藏这些键，使它们不容易被发现？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-04-18T19:35:00.127

这些密钥如此容易被发现的原因是它们隐藏在软件中。

不惜一切代价避免在软件中隐藏秘密——混淆只会让你走这么远。问问自己这个问题：对于完全访问反汇编、用户模式和内核模式调试器但没有日常工作的人，我能在多大程度上隐藏软件中的密钥？它被破解只是时间问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-18T23:02:14.593

您只需将密钥隐藏在某处，并在需要时对其进行解密。“安全地”使用密钥是复杂的部分。破解者可能会在您使用解密密钥的位置设置断点并将其转储。他们可能会扫描您的代码以查找表明您正在使用已知加密算法的模式（大多数算法都有预先计算的表）。等等等等

这就是为什么您需要使整个软件的可执行文件难以分析。为此，您使用可执行打包程序、在虚拟机中运行代码、完整性检查等。所有这些都是为了减慢调试和修改代码的速度。

正如这里的大多数人指出的那样，您无法阻止任何人，只能让他们慢下来。我会去一个破解者论坛并在那里询问有关关键隐藏问题的建议。如果您问得好，它们很可能会有所帮助。

附言。公钥加密不会更好地隐藏密钥，但如果您正在执行许可方案，它可能会使密钥生成器更难（或理论上不可能）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-18T19:53:46.230

底线是，你不能。有关原因，请参阅此处的任何其他评论。甚至像 PGP/GPG 这样的加密软件也将密钥存储在一个文件中，然后强烈要求将这些文件保存在安全的闪存驱动器或其他安全的地方。将发现作为可执行代码的一部分存储的密钥。

事实上，如果你试图在客户端机器上加密任何将被客户端解密作为正常操作的一部分的东西，那也是愚蠢的差事。客户端机器本质上是不安全的，您无法控制它们将能够对您的数据做什么。

相反，如果您尝试进行身份验证，请查看基于 Internet 的身份验证以及登录到服务器，或某种生成的用于验证软件的 KeyCode。

作为公钥-私钥对的一部分的密钥应该保存在可以保护的数据文件中。对称密钥应作为会话密钥即时生成，然后丢弃。始终假设在其计算机上拥有 Secret 或 Session 密钥的任何人都能够发现它，并违背您的意图使用它。

阅读Bruce Schneier 的“[应用密码学”以获取更多信息。](https://rads.stackoverflow.com/amzn/click/com/0471117099)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-18T19:45:29.777

你不能永远隐藏一把钥匙。但你可以肯定很难找到。一些方法是在内存中加密密钥，保留多个副本（可能以不同方式加密）相互检查，留下可供访问的虚拟副本，以某种奇怪的格式存储密钥等。如果有人真的这样做，它们都不会起作用想要你的钥匙，但你至少可以劝阻一个随便/没有经验的攻击者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-18T19:35:54.883

您并不总是需要密钥来验证许可证。

但忽略这一事实，您的密钥也可能是另一个函数的结果。您实际上并没有存储特定的键值，而是有一个动态生成键的函数（总是相同的结果）。尽管并非不可能，但由于您不再寻找值，因此要找到它要困难得多，但是您必须弄清楚它是一个方程式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-18T19:42:56.647

当我们开始开发我们的软件时，我们已经创建了一个注明日期的许可证文件。然后，我们意识到，甚至没有太多人有兴趣购买我们的软件。然后，我们决定免费赠送。更多的人开始关心至少尝试我们的杰作。最后，我们开源了我们的软件。更多的用户开始使用它。现在我们只是希望这些用户中的一小部分可能会变成付费客户（即购买产品支持或要求定制）。

底线是，如果有人想破解您的软件，他/她无论如何都会这样做。浪费时间试图用这个隐藏的密钥保护它真的值得吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-19T14:07:56.763

如果您负担得起，最好将私钥存储在加密 USB 令牌中。关键是只写，即您可以设置它但不能读取它。令牌在其硬件内部进行加密操作。检索密钥变得非常复杂（如果令牌没有已知的漏洞，那么旧的情况就不是这样）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-11T02:33:51.717

您可以使用[https://godbolt.org/](https://godbolt.org/)查看程序集并查看，您可以采取一些措施使其变得更加困难。首先是隐藏符号（所以`checkSecret()`不那么明显），其次是使用函数来生成密钥/密码。这个想法是找到将导致绕过任何安全性的代码部分需要更长的时间，因此也不从`main`函数中调用它可能是一个好主意。

看两种方法：

1.  明确声明的密码
2.  生成密码的函数

这是第一个示例：

```
#include <string>
#include <iostream>

using namespace std;

string secretKey = "fdasfdasfydsafhidljj3r32R#@f";

bool securityCheck(string key){
    if(key==secretKey) cout << "Success!" << endl;
    return key==secretKey;
}

int main(){
    securityCheck(secretKey);
} 
```

正如您在[https://godbolt.org/](https://godbolt.org/)上更清楚地看到的那样，这将创建以下程序集（使用 gcc 11.2）：

```
secretKey[abi:cxx11]:
        .zero   32
.LC0:
        .string "Success!"
securityCheck(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >):
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        mov     QWORD PTR [rbp-8], rdi
        mov     rax, QWORD PTR [rbp-8]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    __gnu_cxx::__enable_if<std::__is_char<char>::__value, bool>::__type std::operator==<char>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
        test    al, al
        je      .L16
        mov     esi, OFFSET FLAT:.LC0
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        mov     esi, OFFSET FLAT:_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_
        mov     rdi, rax
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))
.L16:
        mov     rax, QWORD PTR [rbp-8]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    __gnu_cxx::__enable_if<std::__is_char<char>::__value, bool>::__type std::operator==<char>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
        leave
        ret
main:
        push    rbp
        mov     rbp, rsp
        push    rbx
        sub     rsp, 40
        lea     rax, [rbp-48]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) [complete object constructor]
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    securityCheck(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     eax, 0
        jmp     .L22
        mov     rbx, rax
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
.L22:
        mov     rbx, QWORD PTR [rbp-8]
        leave
        ret
.LC1:
        .string "basic_string::_M_construct null not valid"

.LC2:
        .string "fdasfdasfydsafhidljj3r32R#@f"
__static_initialization_and_destruction_0(int, int):
        push    rbp
        mov     rbp, rsp
        push    rbx
        sub     rsp, 40
        mov     DWORD PTR [rbp-36], edi
        mov     DWORD PTR [rbp-40], esi
        cmp     DWORD PTR [rbp-36], 1
        jne     .L58
        cmp     DWORD PTR [rbp-40], 65535
        jne     .L58
        mov     edi, OFFSET FLAT:_ZStL8__ioinit
        call    std::ios_base::Init::Init() [complete object constructor]
        mov     edx, OFFSET FLAT:__dso_handle
        mov     esi, OFFSET FLAT:_ZStL8__ioinit
        mov     edi, OFFSET FLAT:_ZNSt8ios_base4InitD1Ev
        call    __cxa_atexit
        lea     rax, [rbp-17]
        mov     rdi, rax
        call    std::allocator<char>::allocator() [complete object constructor]
        lea     rax, [rbp-17]
        mov     rdx, rax
        mov     esi, OFFSET FLAT:.LC2
        mov     edi, OFFSET FLAT:secretKey[abi:cxx11]
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<std::allocator<char> >(char const*, std::allocator<char> const&)
        lea     rax, [rbp-17]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        mov     edx, OFFSET FLAT:__dso_handle
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     edi, OFFSET FLAT:std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        call    __cxa_atexit
        jmp     .L58
        mov     rbx, rax
        lea     rax, [rbp-17]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
.L58:
        mov     rbx, QWORD PTR [rbp-8]
        leave
        ret
_GLOBAL__sub_I_secretKey[abi:cxx11]:
        push    rbp
        mov     rbp, rsp
        mov     esi, 65535
        mov     edi, 1
        call    __static_initialization_and_destruction_0(int, int)
        pop     rbp
        ret 
```

您可以看到`secretKey`是清晰可见的，函数名称也是如此。

这是第二个例子：

```
#include <string>
#include <iostream>

using namespace std;

string getSecretKey(){
    srand(100);
    string chars = "qwertyuioplkjhgfdsazxcvbnm123456789";
    string result = "";
    for(int i = 0; i < 100; ++i){
        result += chars[rand()%chars.size()];
    }
    return result;
}

string secretKey = getSecretKey();

bool securityCheck(string key){
    if(key==secretKey) cout << "Success!" << endl;
    return key==secretKey;
}

int main(){
    securityCheck(secretKey);
} 
```

这将产生以下程序集：

```
.LC0:
        .string "qwertyuioplkjhgfdsazxcvbnm123456789"
.LC1:
        .string ""
getSecretKey[abi:cxx11]():
        push    rbp
        mov     rbp, rsp
        push    rbx
        sub     rsp, 72
        mov     QWORD PTR [rbp-72], rdi
        mov     edi, 100
        call    srand
        lea     rax, [rbp-22]
        mov     rdi, rax
        call    std::allocator<char>::allocator() [complete object constructor]
        lea     rdx, [rbp-22]
        lea     rax, [rbp-64]
        mov     esi, OFFSET FLAT:.LC0
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<std::allocator<char> >(char const*, std::allocator<char> const&)
        lea     rax, [rbp-22]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        lea     rax, [rbp-21]
        mov     rdi, rax
        call    std::allocator<char>::allocator() [complete object constructor]
        lea     rdx, [rbp-21]
        mov     rax, QWORD PTR [rbp-72]
        mov     esi, OFFSET FLAT:.LC1
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<std::allocator<char> >(char const*, std::allocator<char> const&)
        lea     rax, [rbp-21]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        mov     DWORD PTR [rbp-20], 0
        jmp     .L16
.L17:
        call    rand
        movsx   rbx, eax
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::size() const
        mov     rcx, rax
        mov     rax, rbx
        mov     edx, 0
        div     rcx
        mov     rcx, rdx
        mov     rdx, rcx
        lea     rax, [rbp-64]
        mov     rsi, rdx
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator[](unsigned long)
        movzx   eax, BYTE PTR [rax]
        movsx   edx, al
        mov     rax, QWORD PTR [rbp-72]
        mov     esi, edx
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::operator+=(char)
        add     DWORD PTR [rbp-20], 1
.L16:
        cmp     DWORD PTR [rbp-20], 99
        jle     .L17
        nop
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        jmp     .L26
        mov     rbx, rax
        lea     rax, [rbp-22]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
        mov     rbx, rax
        lea     rax, [rbp-21]
        mov     rdi, rax
        call    std::allocator<char>::~allocator() [complete object destructor]
        jmp     .L21
        mov     rbx, rax
        mov     rax, QWORD PTR [rbp-72]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
.L21:
        lea     rax, [rbp-64]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
.L26:
        mov     rax, QWORD PTR [rbp-72]
        mov     rbx, QWORD PTR [rbp-8]
        leave
        ret
secretKey[abi:cxx11]:
        .zero   32
.LC2:
        .string "Success!"
securityCheck(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >):
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        mov     QWORD PTR [rbp-8], rdi
        mov     rax, QWORD PTR [rbp-8]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    __gnu_cxx::__enable_if<std::__is_char<char>::__value, bool>::__type std::operator==<char>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
        test    al, al
        je      .L28
        mov     esi, OFFSET FLAT:.LC2
        mov     edi, OFFSET FLAT:_ZSt4cout
        call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)
        mov     esi, OFFSET FLAT:_ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_
        mov     rdi, rax
        call    std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))
.L28:
        mov     rax, QWORD PTR [rbp-8]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    __gnu_cxx::__enable_if<std::__is_char<char>::__value, bool>::__type std::operator==<char>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
        leave
        ret
main:
        push    rbp
        mov     rbp, rsp
        push    rbx
        sub     rsp, 40
        lea     rax, [rbp-48]
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) [complete object constructor]
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    securityCheck(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     eax, 0
        jmp     .L34
        mov     rbx, rax
        lea     rax, [rbp-48]
        mov     rdi, rax
        call    std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        mov     rax, rbx
        mov     rdi, rax
        call    _Unwind_Resume
.L34:
        mov     rbx, QWORD PTR [rbp-8]
        leave
        ret
.LC3:
        .string "basic_string::_M_construct null not valid"

__static_initialization_and_destruction_0(int, int):
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        mov     DWORD PTR [rbp-4], edi
        mov     DWORD PTR [rbp-8], esi
        cmp     DWORD PTR [rbp-4], 1
        jne     .L72
        cmp     DWORD PTR [rbp-8], 65535
        jne     .L72
        mov     edi, OFFSET FLAT:_ZStL8__ioinit
        call    std::ios_base::Init::Init() [complete object constructor]
        mov     edx, OFFSET FLAT:__dso_handle
        mov     esi, OFFSET FLAT:_ZStL8__ioinit
        mov     edi, OFFSET FLAT:_ZNSt8ios_base4InitD1Ev
        call    __cxa_atexit
        mov     eax, OFFSET FLAT:secretKey[abi:cxx11]
        mov     rdi, rax
        call    getSecretKey[abi:cxx11]()
        mov     edx, OFFSET FLAT:__dso_handle
        mov     esi, OFFSET FLAT:secretKey[abi:cxx11]
        mov     edi, OFFSET FLAT:std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() [complete object destructor]
        call    __cxa_atexit
.L72:
        nop
        leave
        ret
_GLOBAL__sub_I_getSecretKey[abi:cxx11]():
        push    rbp
        mov     rbp, rsp
        mov     esi, 65535
        mov     edi, 1
        call    __static_initialization_and_destruction_0(int, int)
        pop     rbp
        ret 
```

您绝对可以看到您不再天真地扫描代码以查找有趣的字符串，但涉及的内容更多。您必须设置断点并检查不同的值，并尝试从逻辑上查看它以解决它。尽管如此，在此示例中，符号是可见的，这会泄露有关应用程序正在做什么的大量敏感信息。从您所看到的情况来看，隐藏符号会使绕过安全性变得更加困难。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-18T19:38:08.390

在代码中隐藏密钥不会真正安全。您可能已经注意到 DVD 和大多数软件序列号注册每天都会被黑客入侵。如果你真的想保护你需要使用公钥加密的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-22T18:59:56.377

你不能，这是不可能的。任何有权访问目标机器的攻击者都可以反汇编您的代码以找到它，或者在目标机器上找到密钥文件等。

确保加密密钥安全的唯一方法是在需要时由用户手动输入。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2009-04-18T19:50:49.747

我认为这是 DVD 和 BluRay 如此迅速破解的最大原因之一。我认为他们能够真正阻止普通人以数字方式复制家庭电影的唯一方法是，如果他们创建了一种未经许可在计算机上使用且只能在经过认证的播放器上使用的媒体。将切断想要在他们的计算机和笔记本电脑上观看电影的市场部分，但可能会在更长时间内停止拥有完美的数字撕裂，并且会阻止普通人能够做到这一点。

# mysql - 在netbeans上访问mysql

> ID：764017
> 
> 赞同：0
> 
> 时间：2009-04-18T19:34:28.443
> 
> 标签：mysql, netbeans, jdbc

我试着做这个教程

[http://www.linglom.com/2007/12/05/accessing-mysql-on-netbeans-using-jdbc-part-i-create-a-connection/](http://www.linglom.com/2007/12/05/accessing-mysql-on-netbeans-using-jdbc-part-i-create-a-connection/)

但它给了我一个错误。我搜索以了解错误的含义，但我不知道。

错误说：

> 找不到类异常：java.lang.ClassNotFoundException：com.mysql.jdbc.Driver

我认为错误：加载mysql驱动程序时出错！

我不知道如何纠正错误！

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-18T19:40:19.443

我发现了错误：我添加了 jdbc 驱动程序 (mysql-connector-java-5.0.7.zip) 而不是 jdbc 驱动程序 (mysql-connector-java-5.0.7.jar)

# git - 用于 Trac 的 GitPlugin 并非每隔几个请求就可以工作

> ID：764022
> 
> 赞同：0
> 
> 时间：2009-04-18T19:36:14.570
> 
> 标签：git, trac

[我已经使用 GitPlugin ( http://trac-hacks.org/wiki/GitPlugin](http://trac-hacks.org/wiki/GitPlugin) )设置和配置了 Trac，但由于某种原因，每隔三个左右对 Trac 页面的请求，我就会收到错误消息：

```
Unsupported version control system "git". Check that the Python support libraries for "git" are correctly installed. 
```

刷新一两次后，它可以愉快地浏览源代码并在时间轴中查看提交。我认为这可能是 cached_repository 标志的问题，但禁用它并没有帮助。

我什至不知道从哪里开始解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T19:41:53.497

事情的间歇性看起来像是一个问题，因为您的 Web 服务器的不同实例看到不同的位配置。我要尝试的第一件事是重新启动一切（重新启动不是*必需*的，但这是确保*一切*重新启动的最简单方法）。如果这不起作用，那么至少你知道你已经消除了简单的东西。

# php - 使用 zend 框架从文件池中提供图像

> ID：764026
> 
> 赞同：0
> 
> 时间：2009-04-18T19:37:15.787
> 
> 标签：php, zend-framework

我有一个关于如何在使用 Zend 框架编写的应用程序中从存储库中提供数据的快速问题。

我目前的结构是：

/应用程序
/文件池
/库
/公共

在文件池中有许多用户可识别的文件夹，其中包含通过表单上传的用户内容，主要是 jpg/png 和 pdf。当尝试将图像显示回用户时，这会导致问题，因为我的数据库中引用文件的路径是：

../filespool/0/0/1/image.jpg

我无法在视图脚本中显示，因为它无法引用图像。

尝试将图像显示回用户时，将图像添加到视图脚本的最佳方法是什么？我曾考虑将 filespool 文件夹添加到 public，但宁愿将其保留在原处，因为该移动需要大量工作来重构更改。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-18T19:47:09.693

我想你可以尝试两种不同的东西（实际上只有一种）......

1.  使用 htacces 使用 rewrite 为文件池创建一个虚拟目录**（不工作）**
2.  在公共目录中创建一个 php 文件，该文件采用路径参数并提供文件

编辑很快就谈到了......你不能使用htaccess......那是因为它在你的文档根目录之外，所以服务器不能从那里提供文件。

# xml - xhtml 文档 - 语言选项问题

> ID：764028
> 
> 赞同：4
> 
> 时间：2009-04-18T19:38:06.657
> 
> 标签：xml, xhtml, accessibility, screen-readers

下面显示的 2 行之间有什么区别？：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">

<meta http-equiv="content-language" content="en-GB" /> 
```

如果我没有元标记，会有什么后果？

元一会影响屏幕阅读器而顶部不影响？我对他们到底做了什么感到有点困惑。

提前感谢您的帮助

最好的祝福

跳过。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T20:38:26.887

Dive Into Accessibility 的[识别您的语言页面](http://diveintoaccessibility.org/day_7_identifying_your_language.html)建议添加尽可能多的屏幕阅读器来处理尽可能多的屏幕阅读器，具体取决于您的文档类型：

> 如果您使用的是 HTML 4 的任何变体，请将您的标签更改为此（如果不是英语，请使用您自己的语言代码）：
> 
> `<html lang="en">`
> 
> 如果您使用的是 XHTML 1.0 的任何变体，请将您的标签更改为此（在两个地方都使用您的语言代码）：
> 
> `<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">`
> 
> 如果您使用的是 XHTML 1.1，请将您的标签更改为此（再次插入您自己的语言代码）：
> 
> `<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">`

同一篇文章还引用了[ISO 639.2](http://www.loc.gov/standards/iso639-2/englangn.html)来确定 xml:lang 的值，尽管 XML 规范引用了一个单独的文档[RFC4646 Best Current Practice - Tags For Identification Languages](http://www.rfc-editor.org/rfc/bcp/bcp47.txt)，这似乎表明您的“en-GB”值已验证。

Google 的[Web Authoring Statistics](http://code.google.com/webstats/2005-12/metadata.html) (2005) 对此有以下说法：

> 接下来是 Content-Language 值（用于 http-equiv 属性）。几乎和在 html 元素上指定 lang 属性一样多的人使用它。在当前的 HTML5 规范中，http-equiv 属性只允许用于设置字符编码的一种情况，如上图所示，它不能真正被删除。但是，至少有一个浏览器支持 http-equiv="Content-Language"，而且正如我们在此处看到的，它被广泛使用——也许 http-equiv 毕竟不应该被删除。

此外，[webproworld 上](http://www.webproworld.com/graphics-design-discussion-forum/74467-name-language-vs-http-equiv-content-language.html)的一个帖子讨论了使用 http-equiv=content-language 和 name=language 来描述文档语言之间的区别，并暗示两者都是必要的。

最后，请参阅 W3C 的[HTML 技术用于 Web 内容可访问性指南 1.0](http://www.w3.org/TR/WCAG10-HTML-TECHS/)文档以获取更多建议，特别是[识别主要语言](http://www.w3.org/TR/WCAG10-HTML-TECHS/#identify-primary-lang)。

总之，看起来屏幕阅读器正在查看语言属性而不是内容语言元信息，但我看到的大多数建议都建议使用元数据。尤其是谷歌的统计数据似乎很相关，所以也许你应该把两者都留在里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T20:01:14.293

我相信该版本的一个优点`<meta>`是您可以指定多种语言，`<meta http-equiv="Content-Language" content="en-GB, fr" />`例如在 中。请查看[此](http://www.w3.org/TR/i18n-html-tech-lang/)内容以更深入地检查该主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-18T20:15:41.357

`Content-Language` [在 XHTML5 中不符合标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-meta-http-equiv-content-language)。

虽然它确实允许您指定一种以上的语言，但您不应该这样做（它对任何人都没有帮助）。您应该`xml:lang`在特定元素上使用属性，例如

```
<p xml:lang="en">Hello <span xml:lang="de">Welt!</span></p> 
```

[W3C I18N FAQ](http://www.w3.org/International/questions/qa-http-and-lang#choosing)也明确反对`<meta>`：

> HTTP 标头或元元素信息与此处无关。通过扩展，您应该通过使用**标签中的****和/或****属性****来指定整个内容的文本处理语言`lang``xml:lang``html`**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T20:04:01.680

据我所知，只有 HTML 文档（不是 XHTML）需要 **meta http-equiv （如果有的话），因为 XHTML 允许使用****xml:lang**指定语言。

所以，没有区别，第二行只是多余的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T01:02:15.363

HTTP/1.0 RFC 1945 说 Content-Language 标头字段代表“目标受众的语言”。

> Content-Language entity-header 字段描述了封闭实体的目标受众的自然语言。请注意，这可能不等同于实体中使用的所有语言。

HTML4 和 XHTML1.x 将元 http-equiv 标记视为嵌入在 html 文档中的相同信息，而不是 HTTP 标头。

另一方面，xml:lang 和 html lang 属性标识文档的语言，或包含在该属性出现的元素中的片段。

因此，假设您有一个主要是法语的文档，目的是向讲英语的人教授法语，内容语言是 en-GB，en-US（比如说），而 xml:lang 属性是 fr-FR .

*然而*，HTML 5 改变了这一点，元 http-equiv="content-language" 被认为是不符合标准的 HTML，它仍然定义了文档范围的默认语言，并且只支持一种语言，因此实际上与 xml:lang on html 元素。我不能说我理解这种变化背后的原因，但 Daniel Glazman 和 Ian Hickson 在从[http://lists.w3.org/Archives/Public/public-html/2008Nov/0083.html开始的线程中讨论它](http://lists.w3.org/Archives/Public/public-html/2008Nov/0083.html)

# programming-languages - 使您免于澄清想法的语言

> ID：764032
> 
> 赞同：1
> 
> 时间：2009-04-18T19:39:23.533
> 
> 标签：programming-languages

好的，那么有没有一种[编程语言可以让你从澄清你的想法中解放出来](http://xkcd.com/568/)？

我忍不住问道。但如果有的话，你会说今天最接近的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-18T20:52:13.797

你的意思是，一种编程语言可以让你在不解释你想让程序做什么的情况下进行编程？

不，那将如何运作？需要告诉编译器要编译什么程序。

从查尔斯·巴贝奇（Charles Babbage）中挖掘出一句旧的，有些恰当的引语：

> 有两次我被问到，“请祈祷，巴贝奇先生，如果你把错误的数字输入机器，正确的答案会出来吗？” 我无法正确理解会引发这样一个问题的那种混乱的想法。

编译器无法读懂你的想法。它可以创建一个程序来做你想做的事情的唯一方法就是*告诉*它你想要什么。

当然，有些语言可以让您不必指定与您的整体问题无关且仅与底层实现相关的内容。（一个明显的例子是，大多数现代语言使您不必担心指针或许多其他低级问题。许多语言还为您提供了迭代序列的方法，而无需编写手动 for 循环。但您仍然必须“澄清你的想法”，你仍然必须指定*你的*程序应该做什么。语言能做的最好的事情就是让你从澄清与你的想法无关*的事情中解放出来。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T19:45:15.063

在我看来，这不应该是语言的作用。相反，语言应该*帮助*你澄清你的想法，并让你以尽可能直观的方式*表达这些澄清的想法。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-18T20:31:56.653

你可以从两个角度看：

*   [像Prolog](http://en.wikipedia.org/wiki/Prolog)这样的高级语言 使您不必表达算法的每一个混乱细节。你只是勾勒出高层次的画面，prolog 会填写细节（例如，如何搜索和推断你的问题的答案等）。

*   另一方面，像[C](http://en.wikipedia.org/wiki/C_(programming_language))这样的低级语言让你不必以抽象的方式表达你的想法。您可以只给出一系列非常具体、详细的程序步骤（尽管如果您愿意，您可以选择引入抽象）。

因此，这两个极端都将你从表达和澄清你的想法的某些方面解放出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-18T20:01:24.573

我不这么认为，但有一些阻碍你清楚地表达这些想法——我提名 BCPL。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-18T21:02:50.213

对于各种问题领域，有些语言可以让您不必输入大量**超出**澄清想法所需的内容。但是每种语言在某些情况下都会失败，对于某些人来说。不是每个人都乐于在面向对象的设计（比如 C# 或 Java）中表达他们的想法，作为函数和闭包（Scheme），作为逻辑推导（Prolog——它适合**一些**问题！），或者作为声明性语句期望的结果（XSLT、CSS、各种 DSL，取得了不同程度的成功）——但在某些情况下，每一个都是正确的答案，而且它们中的大多数在某种程度上重叠。事实上，很少有现代语言完全面向单一范式。

但是有些语言更喜欢其他东西而不是表达能力：例如具有高效的实现（C），或者易于学习（例如，Python 或其脚本同类）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-18T19:51:44.050

我希望没有一种语言可以让你免于澄清你的想法。所有程序员都有责任自己做这件事，而不是把它交给其他人或编程结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-29T18:55:12.490

所有的好处，更多地考虑脚本语言，你可以在调试器中输入，直到它完成你想要的（我已经为一些系统管理员 wmi 脚本做了一两次）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-02-03T06:04:32.117

是的，[空白](http://en.wikipedia.org/wiki/Whitespace_%28programming_language%29)。

# ruby-on-rails - 如何在 RoR 中的控制器（新 -> 创建）之间传递值

> ID：764033
> 
> 赞同：0
> 
> 时间：2009-04-18T19:39:25.530
> 
> 标签：ruby-on-rails, ruby

这可能看起来很基本，但我无法弄清楚。

我有一个“写评论”链接，如下所示：

```
<%= link_to 'Write', new_review_path(@new, :vendor_id => @vendor.id) %> 
```

这将创建 URL：

评论/新？vendor_id=10

我想要的只是基于三个输入创建一个新的 Review 对象：

1.  vendor_id（上）
2.  user_id（目前正在使用）
3.  @review 来自表单的哈希（正在工作）

但我无法让它存储 vendor_id：

```
 def new
    @review = Review.new
    @vendor = Vendor.find(params[:vendor_id])
    @vendor.reviews.create

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @review }
    end
  end

 def create
    @review = Review.new(params[:review])
    #@vendor = Vendor.find(params[:vendor_id]) #error

    #@review = @vendor.reviews.build #error

    @review = @current_user.reviews.build #build a review with the current_user id

    respond_to do |format|
      if @review.save
        flash[:notice] = 'Review was successfully created.'
        format.html { redirect_to(@review) }
        format.xml  { render :xml => @review, :status => :created, :location => @review }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @review.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

我在想我需要更改 form_for 中的 url，但我不清楚如何。这是我目前拥有的：

```
<% form_for(@review) do |f| %>
 ...... 
```

请问我可以帮忙吗？谢谢！

这是 new 的视图代码（注意：我还创建了一个 has_many 路由，以便 vendor/1/reviews/new 有意义，尽管我不再调用它）：

我在 routes.rb 中的代码：

```
map.resources :vendors, :has_many => :reviews 
```

我的views/reviews/new.html.erb代码：

```
<h1>New review for <%= @vendor.name%></h1>

Current User ID: <%= @current_user.id %>
Vendor ID: <%= @vendor.id %> <%= @review.vendor.id %>
Current Review ID: <%= @review.id %>

<% form_for @review do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :summary %><br />
    <%= f.text_field :summary %><br />

    <%= f.label :pro_review %><br />
    <%= f.text_field :pro_review %><br />

    <%= f.label :con_review %><br />
    <%= f.text_field :con_review %><br />

    <%= f.label :detail_review %><br />
    <%= f.text_field :detail_review %>  <br />

  </p>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', reviews_path %> 
```

这是源视图：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>Reviews: new</title>
  <link href="/stylesheets/scaffold.css?1238999620" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>

<p style="color: green"></p>

<h1>New review for Fiberlink</h1>

Current User ID: 2
Vendor ID: 16 16
Current Review ID: 

<form action="/reviews" class="new_review" id="new_review" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="XDknE1mvQT4zwem1z/gCYm8I2ODhqHLKKgd8y12zzzo=" /></div>

  <p>
    <label for="review_summary">Summary</label><br />
    <input id="review_summary" name="review[summary]" size="30" type="text" /><br />

    <label for="review_pro_review">Pro review</label><br />
    <input id="review_pro_review" name="review[pro_review]" size="30" type="text" /><br />

    <label for="review_con_review">Con review</label><br />
    <input id="review_con_review" name="review[con_review]" size="30" type="text" /><br />

    <label for="review_detail_review">Detail review</label><br />
    <input id="review_detail_review" name="review[detail_review]" size="30" type="text" />  <br />

  </p>
  <p>
    <input id="review_submit" name="commit" type="submit" value="Create" />
  </p>
</form>

<a href="/reviews">Back</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T20:56:19.857

您快到了。你需要稍微改变你的`new`方法。

```
 def new
    @review = Review.new
    @vendor = Vendor.find(params[:vendor_id])
    @review.vendor = @vendor # this will insert the vendor_id into the form
                             # when you do form_for

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @review }
    end
  end 
```

**编辑：**尝试在您的视图代码中添加一个隐藏字段来保存`vendor_id`.

```
<% form_for @review do |f| %>
  <%= f.hidden_field vendor_id %>
  # ... 
```

**编辑 2：**实际上，查看代码生成的 HTML，我认为您需要稍微不同的`form_for`. 正如您所知，Rails 的 UI 方面不是我的强项。:)

```
<% form_for :review, @review, :url => { :action => "create" } do |f| %>
  <%= f.hidden_field vendor_id %>
  # ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T21:36:13.667

I would normally do:

```
<% form_for Review.new, :url => new_review_path do |f| %>
  <%= f.hidden_field :vendor_id, :value => @vendor.id %> 
```

# java - Eclipse 插件是否卷起？

> ID：764034
> 
> 赞同：11
> 
> 时间：2009-04-18T19:39:39.353
> 
> 标签：java, eclipse, plugins, eclipse-plugin

我在大学，我们被教导使用记事本编程 java。我移动到记事本++并迅速进入日食。在 notepad++ 中，我可以汇总（加减号）if 语句或 for 循环以及方法和类。我想知道是否有一个 Eclipse 插件可以让我做同样的事情？

另外，我应该在 eclipse 中使用任何必要的插件吗？我对编程很陌生。

提前致谢

本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-18T21:17:40.850

在Eclipse中，您可以使用`Shift`++`Alt``↑</kbd> to mark the surrounding block to the current block
(and `Shift`+`Alt`+`↓</kbd> to narrow down again).``

然后`←</kbd> will place you at the beginning of the block, and `→</kbd> at the end.``

（未经测试，来自记忆，但非常方便）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-18T21:25:13.110

eclipse [Coffee-Bytes Code Folding Plug-in](http://www.eclipseplugincentral.com/Web_Links-index-req-viewlink-cid-269.html)（[由 htw 提及](https://stackoverflow.com/questions/764034/eclipse-plugin-to-roll-up-if-and-for/764047#764047)）不再可用。

[从 3.0 版开始，Eclipse 允许在其文本编辑器中进行折叠](http://www.eclipse.org/articles/Article-Folding-in-Eclipse-Text-Editors/folding.html)，包括类、注释、导入的代码折叠，但不适用于 if 或循环结构。

[![替代文字](https://i.stack.imgur.com/DvXlt.gif)](https://i.stack.imgur.com/DvXlt.gif)
[（来源：[ibm.com](http://www.ibm.com/developerworks/library/os-ecjbuild/3-codefolding.gif)）]

在块的开头或结尾处双击 ( `{`) 就足以突出显示所有块。

# css - 如何使用 CSS 将两个箭头图像（upvote/downvote）堆叠在一起？

> ID：764042
> 
> 赞同：2
> 
> 时间：2009-04-18T19:43:07.613
> 
> 标签：css

![替代文字](https://www.reddit.com/static/aupgray.gif)![替代文字](https://www.reddit.com/static/adowngray.gif)

uparrow.gif 和 downarrow.gif

所以，它看起来像这样：
![替代文字](https://www.reddit.com/static/aupgray.gif)
![替代文字](https://www.reddit.com/static/adowngray.gif)

如何创建 3 个 div 并使用 CSS 设置它们的样式，以便这些箭头位于底部箭头上方的顶部箭头位置？

```
<div class="vote">  
<div class="uparrow" />  
<div class="downarrow" />  
</div> 
```

我应该创建一个宽度受限的“投票”div吗？我会浮动：顶部和浮动：底部两个箭头div，背景设置为我的两个图像吗？我计划将内容直接放在投票箭头的右侧，因此需要限制和严格。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-18T20:23:10.607

不要将 div 用于图像 - 已经有一个非常好的 img 标签！

```
<div class="vote">
    <img alt="^" title="vote up"   src="/images/up.arrow.png" />
    <img alt="v" title="vote down" src="/images/down.arrow.png" />
</div> 
```

然后简单地说：

```
.vote
{
    width: 15px;
    float: left; clear: left;
}

.vote img
{
    display: block;
    float: none; clear: both;
} 
```

您可能希望为 .vote 添加一些边距，以将其与旁边的内容分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T19:47:50.767

默认情况下，`<div>`元素`block-level`意味着它们是每行一个，并且将水平扩展以填充其容器。

添加点击处理是另一个问题。您可以在`<a>`and`<img>`元素中包含`uparrow`and`downarrow`元素，或者按照您的建议在 CSS 中执行（不太兼容的方式）。另一种选择是使用 Javascript 注册 DOM 事件。

HTML：

```
<div class="vote">  
<div class="uparrow" />  
<div class="downarrow" />  
</div> 
```

CSS：

```
div.vote {
  width: 50px;
  float: left;
}

div.uparrow {
  background-image: url(...);
}

div.downarrow {
  background-image: url(...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T20:03:19.653

使用 2 个 div。将文本 div 向左浮动并将两个图像放在一个 div 中。使用 display: block 在图像上强制一个低于另一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T20:09:33.260

比 div 更语义和更有效的解决方案是这样，它还负责定位投票框。

```
.content-item {padding-left:110px;position:relative; width:500px;border:1px solid red;}
.vote{width:100px;position:absolute; top:0; left:0;border:1px solid red;}
.vote h4 {style heading how you like}
.vote img{width:100px;height:30px;background:black;}

<div class="content-item"> content 
    <div class="vote">
    <h4>Vote</h4> 
    <img alt="vote up" src="..." />
    <img alt="vote down" src="..." />
    </div>
</div> 
```

# asp.net - 如何从asp.net中的html控件访问数据

> ID：764044
> 
> 赞同：1
> 
> 时间：2009-04-18T19:43:42.120
> 
> 标签：asp.net, html, controls, server-side

如何从 .cs（代码隐藏）文件中的 asp.net 中的 html 访问数据？

在 .aspx 页面中，我有：

```
 <tr>
                <td>Username:</td><td><input id="username" type="text" /></td>
             </tr>
             <tr>
                <td>Password:</td><td><input id="password" type="password" /></td>
             </tr>
             <tr> 
```

我知道我可以将其转换为：

```
 <tr>
        <td>Username:</td><td><asp:TextBox ID="username" TextMode="SingleLine" runat="server"></asp:TextBox></td>
     </tr>
     <tr>
        <td>Password:</td><td><asp:TextBox ID="password" TextMode="Password" runat=server></asp:TextBox></td>
     </tr> 
```

这将允许我通过 ID 访问控件。但是我想知道是否有一种方法可以在不使用 asp.net 服务器端控件的情况下访问数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-18T19:51:19.370

给输入一个名称和一个 ID，您将能够从[Request.Form](http://msdn.microsoft.com/en-us/library/ms525985.aspx)获取值。没有名称的输入不会与表单帖子一起发回。

```
<input id="username" name="username" type="text" />
<input id="password" name="password" type="password" />

var username = Request.Form["username"];
var password = Request.Form["password"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T19:54:38.147

添加`runat="server"`到控件，然后您可以从代码隐藏中访问它们，几乎就像它们是`<asp:______ />`控件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T20:12:34.983

ASP.NET 控件，本质上是封装的 HTML 控件，因此`asp:Button`将呈现为`input`Html 控件。由于尺寸较小，一些 Web 开发人员更喜欢使用 Html 控件。因此，每个 HTML 控件都将映射到一个 asp 服务器控件。作为前面的答案，来自 Joel，添加`runat="server"`, 然后可以通过后面代码中的 ID 引用控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-07T12:17:26.063

这是你的代码：

```
<tr>
    <td>Username:</td>
    <td><input id="username" type="text" /></td>
</tr>
<tr>
    <td>Password:</td>
    <td><input id="password" type="password" /></td>
</tr> 
```

您可以将`runat="server"`属性添加到 Html 控件：

```
<tr>
    <td>Username:</td>
    <td><input id="username" runat="server" type="text" />  <!--NOTE THE RUNAT="SERVER"--></td>
</tr>
<tr>
    <td>Password:</td>
    <td><input id="password" **runat="server"** type="password" /></td>
</tr> 
```

现在您可以访问 asp.net 中的控件了。

# c# - 为 SQL 数据库插入构建日期时间对象

> ID：764046
> 
> 赞同：1
> 
> 时间：2009-04-18T19:44:54.130
> 
> 标签：c#, asp.net

我正在开发一个小型 Web 表单，该表单需要用户输入（除其他外），他们添加到系统中的任何服务器的预定备份时间。问题是，我正在努力寻找获取用户输入并构建 DateTime 对象（这是数据库所需要的）的最佳方法。

我只关心星期几、时间（12 或 24 小时制）。

我想过只创建一个空的 DateTime 对象，然后只添加来自用户的输入值，但是您只能获取而不是设置星期几、一天中的时间等。

我一直在查看日历 asp 控件，它适用于星期几的选择，但我似乎找不到任何时间的支持。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T19:56:38.827

我认为您不想将 DateTime 用于诸如备份之类的重复事件。DateTime 可用于存储特定的日期和时间，但不能作为重复事件的“模板”。相反，我会使用单独的列来存储事件的星期几值 (0-6) 和日期时间（午夜后的分钟数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T20:16:50.403

如果您要使用 datepicker [，这里](http://sowkot.blogspot.com/2008/08/jquery-is-excellent-javascript-library.html)是使用 C# 添加 JQuery 日期选择器的一个很好的示例。如果我确实了解有关 JQuery 和 java sripts 的任何内容，这有助于我将项目 evrn 包括在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T20:48:23.837

DateTime 是不可变的值类型。你不能在上面设置任何东西。

假设您在 DB 上坚持使用 DateTime 并且您不想使用 DateTimePicker 控件。

您必须指定如何在 DateTime 中表示星期几和时间。您可以从 DateTime.MinValue、1.1.0001、午夜 12:00 开始，然后添加星期几和时间。不幸的是，SqlServer 2005 中的常规 DateTime 字段无法存储此日期。所以让我们把它移到 2000 年。1.1.2000 是星期六。您可以像这样计算 DateTime：

```
int dayOfWeek; // 0 = mon, 6 = son
DateTime time;
DateTime scheduleTime = new DateTime(2000, 1, (dayOfWeek + 2) % 6 + 1) 
  + time.TimeOfDay; 
```

**但老实说，我不会这样做。**它闻起来臭臭的。我刚刚回答了你的问题。听听特万佛森。他把该说的都说了。

# sql - 为什么我的查询会产生错误“ORA-00933：SQL 命令未正确结束”？

> ID：764065
> 
> 赞同：2
> 
> 时间：2009-04-18T19:52:48.137
> 
> 标签：sql, oracle, ora-00933

我的查询：

```
CREATE VIEW cambiodatos AS 
SELECT 
    a.last_name||','||a.first_name AS "Nombre", 
    a.salary AS "Salario", 
    b.name AS "Nombre Departamento", 
    c.name AS "Nombre de Region"
FROM 
    s_emp a, s_dept b, s_region c
WHERE 
    a.dept_id = b.id AND b.region_id = c.id

UPDATE 
     cambiodatos 
SET 
     name = 'North America'
WHERE 
     last_name = 'Biri'||','||first_name = 'Ben' 
```

错误：

```
ORA-00933: SQL command not properly ended 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T09:42:50.330

你得到这个错误的确切原因是你有这个 WHERE 子句：

```
last_name = 'Biri'||','||first_name = 'Ben' 
```

这不是合法的语法。

这将是：

```
last_name = 'Biri' AND first_name = 'Ben' 
```

或者是这样的：

```
name = 'Biri'||','||'Ben' 
```

但是你可以这样写：

```
name = 'Biri,Ben' 
```

问题是在我看来您使用的是第二个 || 那里是一个 AND 子句，但这不适合您要添加的逗号。

也许您正在尝试执行此操作？

```
last_name || ',' || first_name = 'Biri,Ben' 
```

在任何情况下，正如其他人所指出的那样，如果您解决了该语法问题，您只会收到有关缺少列名的其他错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T09:29:40.440

First, separate you queries with a semicolon and fix your `SET` conditions:

```
CREATE VIEW cambiodatos AS 
SELECT 
    a.last_name||','||a.first_name AS "Nombre", 
    a.salary AS "Salario", 
    b.name AS "Nombre Departamento", 
    c.name AS "Nombre de Region"
FROM 
    s_emp a, s_dept b, s_region c
WHERE 
    a.dept_id = b.id AND b.region_id = c.id;

UPDATE 
     cambiodatos 
SET 
     name = 'North America'
WHERE 
     last_name = 'Biri'
     AND first_name = 'Ben' 
```

That's the reason of your error `ORA-00933`

Second, your `UPDATE` statement will fail, as the view you created does not contain field `name`.

This query will compile:

```
UPDATE 
     cambiodatos 
SET 
     "Nombre de Region" = 'North America'
WHERE 
     "Nombre" = 'Biri, Ben' 
```

, but most probably will fail as `s_region` is not `key-preserved` in this view.

To update, use this instead:

```
MERGE
INTO    s_region c
USING   (
        SELECT  b.region_id
        FROM    s_emp a, s_dept b
        WHERE   a.last_name || ',' || a.first_name = 'Biri, Ben'
                AND b.id = a.dept_id
        ) q
ON      c.id = q.region_id
WHEN MATCHED THEN
UPDATE
SET     c.name = 'North America' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T20:04:17.937

看起来您想要在更新中使用 AND

```
UPDATE 
     cambiodatos 
SET 
     name = 'North America'
WHERE 
     last_name = 'Biri' AND first_name = 'Ben' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T20:05:29.743

在过去 7 年左右的时间里，我根本没有使用过 Oracle，但您不需要 ; 在声明的末尾？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-18T20:09:23.167

首先，我认为您的 UPDATE 命令格式不正确。其次，您使用的是基础表中的字段，而不是运行更新的视图。另外，我认为您不能更新基于联接的视图。请参阅对此[问题](https://stackoverflow.com/questions/763802/how-to-permit-update-of-a-views-results-in-oracle)的回复。如果你可以看起来像这样。

```
UPDATE 
     cambiodatos 
SET 
     [Nombre de Region] = 'North America'
WHERE 
     Nombre = 'Biro, Ben' 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-20T03:42:40.073

CREATE VIEW cambiodatos AS SELECT a.last_name||','||a.first_name AS "Nombre", a.salary AS "Salario", b.name AS "Nombre Departamento", c.name AS "Nombre de Region" FROM s_emp a, s_dept b, s_region c WHERE a.dept_id = b.id AND b.region_id = c.id ; /* 缺少分号？*/

UPDATE cambiodatos SET name = 'North America' WHERE last_name = 'Biri'||','||first_name = 'Ben' /* 缺少 And last_name = <> AND first_name = <> */

# python - mod_wsgi/python sys.path.exend 问题

> ID：764081
> 
> 赞同：1
> 
> 时间：2009-04-18T20:02:05.837
> 
> 标签：python, apache, mod-wsgi

我正在研究一个 mod_wsgi 脚本。一开始是：

```
sys.path.extend(map(os.path.abspath, ['/media/server/www/webroot/'])) 
```

但我注意到，每次我更新脚本时，sys.path var 都会随着这个扩展的重复而不断增长：

```
['/usr/lib64/python25.zip'
'/usr/lib64/python2.5'
'/usr/lib64/python2.5/plat-linux2'
'/usr/lib64/python2.5/lib-tk'
'/usr/lib64/python2.5/lib-dynload'
'/usr/lib64/python2.5/site-packages'
'/usr/lib64/python2.5/site-packages/Numeric'
'/usr/lib64/python2.5/site-packages/gtk-2.0'
'/usr/lib64/python2.5/site-packages/scim-0.1'
'/usr/lib/python2.5/site-packages'
'/media/server/www/webroot'
'/media/server/www/webroot'
'/media/server/www/webroot'
'/media/server/www/webroot'] 
```

每次我重新启动apache时它都会重置..有没有办法确保这不会发生？我希望模块路径只加载一次..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-19T02:15:56.093

无需担心自己检查或使用 abspath。使用“站点”模块的内置[addsitedir](http://docs.python.org/library/site.html#site.addsitedir)功能。它将自动处理这些问题和其他问题（例如 pth 文件）：

```
import site
site.addsitedir('/media/server/www/webroot/') 
```

（这个函数只记录在 Python 2.6 中，但它几乎一直存在。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T20:33:16.243

一种相当简单的方法是在扩展之前检查路径是否已经扩展::

```
path_extension = map(os.path.abspath,['/media/server/www/webroot/']) 
if path_extension[0] not in sys.path:
    sys.path.extend(path_extension) 
```

`sys.path`然而，这有一个缺点，即在检查它是否已扩展时总是扫描大部分内容。一个更快但更复杂的版本如下：

```
path_extension = map(os.path.abspath,['/media/server/www/webroot/']) 
if path_extension[-1] not in reversed(sys.path):
    sys.path.extend(path_extension) 
```

但是，更好的解决方案可能是将路径扩展名添加到您的`PYTHONPATH`环境变量或将`.pth`文件放入您的`site-packages`目录：

[http://docs.python.org/install/index.html](http://docs.python.org/install/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T02:51:33.127

[关于代码重新加载](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)的 mod_wsgi文档涵盖了这一点。

# c - 什么样的企业还在雇佣 C 程序员？

> ID：764083
> 
> 赞同：17
> 
> 时间：2009-04-18T20:03:11.980
> 
> 标签：c

我正在开始找工作，最好是在 C 店结束。到目前为止，我在本地广告中出现的空缺，并且开始认为我需要扩大搜索范围，针对特定类型的企业。

那么，什么类型的地方通常使用这种语言？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-18T20:07:16.260

C 通常用于相当低级的开发。您会看到它经常用于嵌入式系统，这通常被列为计算机工程职位（而不是计算机科学或软件工程）。C 也经常用于设备驱动程序和“通用”低级代码，如数学大型项目的实用程序代码。

通常，需要 C 的工作由一直使用它的开发人员承担，并且很可能已经在那个位置上工作了很长时间。

继续寻找！正如您所见，C 是一种罕见的被列为“C 开发人员”的工作 - 所以显然他们很难找到。

但我只是想知道为什么你专门寻找 C 工作而不是 C++ 或 Objective C 之类的语言:)

**编辑：**
也请注意，不要误导您的答案；C仍然用于许多不同的东西。浏览器、即时通讯程序、服务器守护程序、甚至一些用其他语言编写的代码的网络代码。问题是，当您轻松地用 Python、.NET 或任何数量的其他技术编写它时，就花费在工作上的时间而言，这只是低效的。因此，它并不常见，但工作可以存在。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-18T22:03:09.600

我主要作为 C（和 Perl）开发人员工作，因为该应用程序很成熟，具有相当长的历史（即最初开发于 90 年代初）。该应用程序套件最初是为基于 Unix 的图形工作站开发的。我之前的工作是类似的情况，一个在多个 Unix 平台上开发的成熟的分布式应用程序，最初是在 1990 年代初期，由于源代码的大小和成熟度，很难证明简单地将代码库扔掉以移动到新的开发语言，甚至迁移到 C++。

我想仍然有许多用 C 编写的更大的内部（用于内部目的，不作为产品出售）应用程序仍在维护中。与大型公司（保险、金融、银行）仍在维护的大规模 COBOL 应用程序并无完全不同。

对于C 语言的**新**开发，其他人已经提到了嵌入式系统市场，该市场的开发通常是针对放入 ROM 或[EEPROM](http://www.tech-faq.com/eeprom.shtml) / 闪存的软件，它被称为固件，用于[微控制器](http://wiki.answers.com/Q/What_is_the_difference_between_a_microprocessor_and_a_microcontroller)（Microchip PIC、Atmel AVR、80C51、68HC11等），其中目标代码大小、RAM 使用和性能很重要，因此需要使用具有较少高级或通用抽象或假设的编程语言。

对优秀的 C 程序员来说，一件关键的事情是，如果不需要他们了解更多关于数据结构和算法的知识，他们就会被期望。优先级队列、二叉树、MergeSort、QuickSort、Knuth-Morris-Pratt 和 Karp-Rabin 至少应该有点熟悉。这是因为 C 语言缺少 STL、Boost、CPAN 和其他语言中可用的其他标准库。这至少部分是因为大多数实现都是特定于类型的（由于缺少模板或动态类型或类似机制）以具有足够通用的例程以在实践中有用。

了解一种以上的编程语言并不是一件坏事，即使你觉得不够自在，无法声称自己有足够的能力在其他语言专业中进行编程。“现代”脚本或“流行”Web 开发语言可能是一个很好的匹配。Perl、Python 和 Ruby 是很好的潜在候选者。

对于编程经验，LISP、Scheme、Prolog*、ML、Objective Caml、Haskell 和 Scala 等函数式语言非常适合让您“思考不同”。诚然，Prolog 实际上是一种声明式逻辑编程语言，但它仍在扩展编程经验。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-18T20:21:24.527

为了补充 Anthony 的出色答案，C 仍然广泛用于操作系统和固件的开发，因此您可能也想尝试朝那个方向看。

祝你找工作好运。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-18T20:27:37.693

必须靠近金属运行的东西，而且要快。所以除了 Anthony 写的——网络协议、存储设备驱动程序、文件系统，操作系统的核心，在 C 语言中仍然很重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-18T20:06:21.973

因为兴趣的焦点通常已经转移到应用程序和 Web 开发上，在这些开发中你不能用 C 做很多事情。

将您的搜索地理扩展到其他城市/国家或跟随行业趋势并学习新知识。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-18T20:40:39.627

大多数 C 编程工作都在“嵌入式​​系统”中……诸如电视、汽车、电话、闹钟、时钟、玩具之类的东西。由于成本原因，此类应用程序通常受内存限制，因此高级语言（例如 Python）不是一个选择。

在 C 和 C++ 是主要的编码环境时，据说 90% 的 C 编程工作是针对嵌入式工作的。没有被宣传为软件的东西，并且很少有任何著名的名字或面孔与之相关。今天更是如此。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-18T21:09:08.763

Linux 完全使用 C 语言。因此，任何为 Linux 做出贡献的公司都可能雇用 C 编码人员。我曾在一家用 C 语言开发的工业自动化公司工作。尽管大多数自​​动化商店都运行 PLC 和梯形逻辑。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-18T20:06:44.560

iPhone 开发商店在线。也试试 craigslist。

Objective-C 是 C 的超集，因此您的 C 技能可以很好地转化。

祝你好运！

# java - Java、代码生成和持久性框架

> ID：764106
> 
> 赞同：4
> 
> 时间：2009-04-18T20:15:47.643
> 
> 标签：java, database, persistence, orm

是否有任何 Java 代码生成持久性框架？“数据库优先”而不是对象模型优先的东西？我知道这在 Java 世界中可能是异端邪说，我只想知道是否存在这样的框架。

这些天我更像是一个 .NET 人。因此，想到了 .NET 端的工具，例如 .NET 层或 CSLA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-18T20:19:43.453

当然，例如 hibernate 和 netbeans 可以对数据库进行逆向工程。你可能想看看：

*   [休眠工具](http://tools.hibernate.org/)；维护中的站点
*   netbeans，使用最新版本的 netbeans，您可以从 JDBC 连接创建 JPA 实体

我的 2 美分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T20:32:17.167

[Apache Cayenne](http://cayenne.apache.org/) ORM 框架能够对数据库进行逆向工程。见[这里](http://cayenne.apache.org/doc12/reverse-engineer-database.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-01-10T16:50:09.597

我开发了[jOOQ](http://jooq.sourceforge.net)来完全满足您的需求 - 所以不要担心异端：-)

查看[示例页面](https://sourceforge.net/apps/trac/jooq/wiki/Examples)或[dzone 上的文章，](http://java.dzone.com/announcements/simple-and-intuitive-approach)说明我创建此类框架的动机。主要优点是：

*   它生成源代码
*   它通过在 Java 中提供类似 SQL 的 DSL 来接近 SQL
*   它支持轻松访问特定于供应商的功能，例如 UDT、存储过程
*   它支持所有高级 SQL 功能，例如 UNION、嵌套 SELECT、别名等

请注意，jOOQ 并不是**真正**的 OR 映射器。它专注于您的 RDBMS 中的关系数据模型，并没有让您像 Hibernate 或 JPA 那样创建自定义的面向对象的域模型。这正是您提到自己的原因：`Something that is "database first" rather than object model first`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-18T20:26:02.237

Checkout [EclipseLink](http://www.eclipse.org/eclipselink/)项目（eclipse 的插件），你可以从数据库表中[生成](http://wiki.eclipse.org/Using_Workbench_(ELUG))JPA 模型

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-03-14T16:24:24.077

[DB Importer](http://objectgeneration.com/importdb.html)是一个从数据库生成 JPA 类的 Eclipse 插件。

免责声明：我是 DB Importer 的创建者。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-30T15:11:26.477

Telosys Tools 是免费的“**数据库优先**”代码生成器

请参阅：[https ://sites.google.com/site/telosystools/](https://sites.google.com/site/telosystools/)

它是一个 Eclipse 插件，如果需要，模板是可定制的

它可以生成持久层（JPA），也可以生成 CRUD 屏幕（教程在这里：[https](https://sites.google.com/site/telosystutorial/) ://sites.google.com/site/telosystutorial/ ）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-18T20:20:52.903

许多基于 Java 的持久性工具包括基于现有模式生成代码的工具。Netbeans 将生成 JPA（如果需要，包括会话 bean 外观）。同样，JBoss Tools for Eclipse 将根据现有模式为您生成 Hibernate JavaBeans。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-19T10:02:52.303

我会推荐[HiberObjects](http://objectgeneration.com/eclipse/)。它是一个 Eclipse 插件，可用于对持久对象建模或对现有数据库进行逆向工程。它让你设置[单元测试](http://objectgeneration.com/eclipse/05-Behavior.html)的方式真的很棒。您还可以修改例如 DAO 类的生成方式：只需修改 Groovy 脚本，所有 DAO 类都会重新生成。我遇到了一些错误，但它背后的人反应迅速，并在短时间内发布了修复程序。在[Eclipse Plugin Central](http://www.eclipseplugincentral.com/Web_Links-index-req-viewlink-cid-881.html)中可以找到描述和用户评级/评论。

# mysql - 最好使用两列或 DATETIME

> ID：764109
> 
> 赞同：0
> 
> 时间：2009-04-18T20:18:32.550
> 
> 标签：mysql, database

我正在开发一个 MySQL 数据库，它将创建一个“Today at”列表并将其发送给订阅者。我想知道在开始和结束字段上使用 DATETIME 数据类型是否更好，或者两个有两列 startDate 和 startTime （具有适当的数据类型）。我的第一个想法是使用 DATETIME，但这使得系统的后续使用有点尴尬，因为你不能再写：

```
SELECT * FROM event_list WHERE startAt='2009-04-20'; 
```

相反，我发现最好的是：

```
SELECT * FROM event_list WHERE startAt LIKE '2009-04-20%'; 
```

而且我不喜欢 hack 或其对性能的潜在影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T20:26:43.110

只需使用该[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)功能。

```
SELECT * FROM event_list WHERE DATE(startAt) = '2009-04-20' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-18T20:38:40.100

SELECT * FROM event_list WHERE startAt >= '2009-04-20' AND startAt < '2009-04-21'

这将有效地使用 startAt 上的索引并正确处理边界条件。（任何包含函数的 WHERE 子句都不能使用索引 - 它无法知道表达式结果与列值具有相同的顺序。

使用两列有点像为实数的整数和小数部分设置列。如果您不需要时间，请不要一开始就保存它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-18T20:26:50.237

你可以像这样尝试 smf

```
select * from event_list where date(startAt) = '2009-04-20 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-18T20:37:16.610

两全其美——拥有一个使用单个日期时间列的表和一个为您提供日期和时间字段的表视图。

```
create view vw_event_list
   as select ..., date(startAt) as startDate, time(startAt) as startTime

select * from vw_event_list where startDate = '2009-04-20' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-19T22:28:27.130

单独的日期和时间字段或 1 个日期时间字段之间的真正考虑是索引。您不想这样做： select * from event_list where date(startAt) = '2009-04-20' 在日期时间字段上，因为它不会使用索引。MySQL 会将 startAt 数据转换为日期以进行比较，这意味着它不能使用索引。你想这样做： select * from event_list where startAt BETWEEN '2009-04-20 00:00:00' AND '2009-04-20 23:59:59'

日期时间字段的问题在于您不能真正将其用作复合索引，因为该值相当独特。例如，startAt+event 上的复合索引不允许您搜索 date+event，只能搜索 datetime+event。但是如果你在日期和时间字段之间拆分数据，你可以索引 startDate+event 并有效地搜索它。

这只是一个用于讨论目的的示例，您显然可以在 event+startAt 上建立索引，它会起作用。但是您可能会发现自己想要根据日期和另一个字段进行搜索/总结。在该数据上创建复合索引将使其非常有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-19T21:53:50.147

还有一件事要补充：当心时区，如果您提供在线服务，它迟早会出现，而且很难追溯。

夏令时特别糟糕。

（达姆希克）

# mysql - MySQL编码问题

> ID：764112
> 
> 赞同：-2
> 
> 时间：2009-04-18T20:19:41.550
> 
> 标签：mysql

我以前在[这里](https://stackoverflow.com/questions/747179/mysql-encoding-issue)问过这个问题，但是当我仔细观察时，该解决方案并没有解决它。这就是问题。

出于某种原因，我的 mysql 表正在将单引号和双引号转换为奇怪的字符。例如

```
"aha" 
```

改为：

```
â€œahaâ€ 
```

我该如何解决这个问题，或者在 PHP 中检测到这个并解码所有内容？

以前我尝试在连接到 MySQL 后立即执行此查询：

```
$sql="SET NAMES 'latin1'";
mysql_query($sql); 
```

但这不再有任何影响。我看到以下字符串：

```
 â€œahaâ€ (for "aha")
Itâ€™s (for "its") 
```

等等

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-18T20:33:28.053

根据您对原始问题的回答，您的输入实际上是 UTF-8，但您看到的输出看起来错误，因为您的输出终端和/或浏览器设置为（单字节）字符编码“Windows 1252”。

如果您只是确保您的*输出*也设置为 UTF-8，那么一切都应该没问题。

见[引号变成问号](https://stackoverflow.com/questions/760113/quotation-marks-turn-to-question-marks)

# msbuild - 如何让 Gallio MSBuild 任务找到我的特定 Gallio 可执行文件

> ID：764116
> 
> 赞同：0
> 
> 时间：2009-04-18T20:20:41.267
> 
> 标签：msbuild, teamcity, gallio

我正在尝试在 TeamCity 构建配置中从 MSBuild 调用 Gallio。TeamCity 的代理/服务器没有安装 Gallio，但我的源代码树中确实有一个 Gallio 分发版。我正在使用 MSBuild 进行项目的实际构建。

如何告诉 Gallio 任务使用源代码树中的 Gallio 可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T19:20:37.073

我认为您需要以下标签的等价物。

```
<UsingTask AssemblyFile="C:\Program Files\Gallio\bin\Gallio.MSBuildTasks.dll" TaskName="Gallio" /> 
```

将它放在主项目标签中。

科林

# objective-c - 每个核心数据关系都必须有一个逆关系吗？

> ID：764125
> 
> 赞同：162
> 
> 时间：2009-04-18T20:23:49.963
> 
> 标签：objective-c, core-data

假设我有两个实体类：`SocialApp`和`SocialAppType`

在`SocialApp`我有一个属性：`appURL`和一个关系：`type`。

在`SocialAppType`我有三个属性`baseURL`：`name`和`favicon`。

`SocialApp`关系的目标`type`是 中的单个记录`SocialAppType`。

例如，对于多个 Flickr 帐户，会有许多`SocialApp`记录，每条记录都包含一个人帐户的链接。“Flickr”类型将有一个`SocialAppType`记录，所有`SocialApp`记录都指向。

`SocialAppType`当我使用此架构构建应用程序时，我收到一条警告，指出和之间没有反比关系`SocialApp`。

```
 /Users/username/Developer/objc/TestApp/TestApp.xcdatamodel:SocialApp.type: warning: SocialApp.type -- relationship does not have an inverse 
```

我需要一个逆，为什么？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-07-03T11:28:31.657

Apple 文档中有一个很好的示例，它表明您可能会因为没有反向关系而遇到问题。让我们把它映射到这个案例中。

假设您对其建模如下： ![在此处输入图像描述](https://i.stack.imgur.com/sJz2x.png)

请注意，您有一个名为“**类型”****的一对一**关系，从到。该关系**是非可选的**，并且具有**“拒绝”删除规则**。**`SocialApp``SocialAppType`**

 ******现在考虑以下几点：

```
SocialApp *socialApp;
SocialAppType *appType;
// assume entity instances correctly instantiated

[socialApp setSocialAppType:appType];
[managedObjectContext deleteObject:appType];
BOOL saved = [managedObjectContext save:&error]; 
```

我们期望这个上下文保存失败，因为我们已将删除规则设置为拒绝，而关系是非可选的。

**但是这里保存成功。**

原因是我们没有设置**反比关系**。因此，当 appType 被删除时，socialApp 实例不会被标记为已更改。所以在保存之前没有对 socialApp 进行验证（它假设不需要验证，因为没有发生任何变化）。但实际上发生了变化。但它没有得到反映。

如果我们回忆 appType

```
SocialAppType *appType = [socialApp socialAppType]; 
```

appType 为零。

很奇怪，不是吗？对于非可选属性，我们得到 nil 吗？

因此，如果您建立了反向关系，您就没有问题。否则，您必须通过编写如下代码来进行强制验证。

```
SocialApp *socialApp;
SocialAppType *appType;
// assume entity instances correctly instantiated

[socialApp setSocialAppType:appType];
[managedObjectContext deleteObject:appType];

[socialApp setValue:nil forKey:@"socialAppType"]
BOOL saved = [managedObjectContext save:&error]; 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2009-04-19T00:44:16.267

在实践中，我没有因为没有逆向而丢失任何数据——至少我知道。一个快速的谷歌建议你应该使用它们：

> 反向关系不仅使事情更整洁，Core Data 实际上也使用它来维护数据完整性。

--[可可开发中心](http://cocoadevcentral.com/articles/000085.php)

> 您通常应该对两个方向的关系进行建模，并适当地指定反向关系。Core Data 使用此信息来确保对象图的一致性，如果发生更改（请参阅“操作关系和对象图完整性”）。有关您可能不想在两个方向上建模关系的一些原因以及如果不这样做可能出现的一些问题的讨论，请参阅“单向关系”。</p>

--[核心数据编程指南](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/HowManagedObjectsarerelated.html)

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2010-07-24T02:52:00.667

我将解释我在Dave Mark 和 Jeff LeMarche的*更多 iPhone 3 开发中找到的明确答案。*

**Apple 通常建议您始终创建并指定逆关系，即使您不在应用程序中使用逆关系。**出于这个原因，它会在您未能提供逆向时向您发出警告。

关系*不需要*有逆向关系，因为在少数情况下逆向关系可能会损害性能。例如，假设反向关系包含非常多的对象。去除逆需要迭代代表逆的集合，削弱性能。

但**除非你有特定的理由不这样做，否则建模 inverse**。它帮助 Core Data 确保数据完整性。如果您遇到性能问题，稍后删除反向关系相对容易。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2009-04-21T03:53:24.437

更好的问题是，“有理由*不做*逆”吗？Core Data 实际上是一个对象图管理框架，而不是持久性框架。换句话说，它的工作是管理对象图中对象之间的关系。反向关系使这*更*容易。出于这个原因，Core Data 期望反向关系并且是为那个用例编写的。没有它们，您将不得不自己管理对象图的一致性。特别是，没有反向关系的多对多关系很可能会被 Core Data 破坏，除非您*非常*努力地保持工作正常。与它为您带来的好处相比，反向关系在磁盘大小方面的成本确实微不足道。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2015-01-30T23:56:56.303

至少在一种情况下，可以为核心数据关系建立一个很好的案例，而无需逆向：当两个对象之间已经存在另一个核心数据关系时，它将处理维护对象图。

例如，一本书包含许多页，而一页在一本书中。这是一个双向的多对一关系。删除一个页面只会使关系无效，而删除一本书也会删除该页面。

但是，您可能还希望跟踪每本书正在阅读的当前页面。这可以通过*Page*上的“currentPage”*属性*来完成，但是您需要其他逻辑来确保在任何时候只有一页被标记为当前页。相反，建立从 Book 到单个页面的 currentPage*关系*将确保始终只有一个当前页面被标记，此外，可以通过简单的 book.currentPage 引用书籍轻松访问此页面。

 **![书籍与页面之间核心数据关系的图形化呈现](https://i.stack.imgur.com/nux7al.png)

在这种情况下，互惠关系是什么？在很大程度上是荒谬的。“myBook”或类似的东西可以在另一个方向添加回来，但它只包含页面的“book”关系中已经包含的信息，因此会产生自己的风险。也许在将来，您使用这些关系之一的方式会发生变化，从而导致您的核心数据配置发生变化。如果 page.myBook 已在代码中本应使用 page.book 的某些地方使用，则可能会出现问题。主动避免这种情况的另一种方法是不在用于访问页面的 NSManagedObject 子类中公开 myBook。但是，可以说，首先不对逆进行建模会更简单。

在概述的示例中，currentPage 关系的删除规则应设置为“No Action”或“Cascade”，因为与“Nullify”没有相互关系。（Cascade 意味着您在阅读时会撕掉书中的每一页，但如果您特别冷且需要燃料，这可能是真的。）

当可以证明对象图完整性没有风险时，如本例所示，并且代码复杂性和可维护性得到提高，可以认为没有逆关系的关系可能是正确的决定。

* * *

如评论中所讨论的，另一种解决方案是在目标上创建自己的 UUID 属性（在此处的示例中，每个 Page 都有一个 UUID 的 id），将其存储为属性（currentPage 仅将 UUID 存储为Book 中的一个 Attribute，而不是一个关系），然后在需要时编写一个方法来获取具有匹配 UUID 的 Page。这可能是比使用没有逆关系的关系更好的方法，尤其是因为它避免了所讨论的警告消息。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-07T04:28:33.630

虽然文档似乎不需要逆向，但我只是解决了一个实际上通过没有逆向而导致“数据丢失”的场景。我有一个与可报告对象有一对多关系的报告对象。如果没有反向关系，对多对关系的任何更改都会在重新启动时丢失。在检查了 Core Data 调试后，很明显，即使我保存了报表对象，也从未对对象图（关系）进行更新。我添加了一个逆，即使我不使用它，瞧，它有效。所以它可能不会说它是必需的，但没有逆关系的关系肯定会产生奇怪的副作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-15T17:02:55.297

一般不需要反比关系。但是核心数据中很少有需要反向关系的怪癖/错误。如果缺少反向关系，即使在保存上下文时没有错误，也存在关系/对象丢失的情况。检查这个[示例](https://github.com/Mahabali/CoreDataMissingObjectsDemonstration)，我创建该示例以演示在使用核心数据时缺少对象以及如何解决

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-15T15:00:29.040

倒数也用于`Object Integrity`（出于其他原因，请参阅其他答案）：

> 推荐的方法是对两个方向的关系进行建模，并适当地指定反向关系。如果进行更改，Core Data 使用此信息来确保对象图的一致性

来自：[https ://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/HowManagedObjectsarerelated.html#//apple_ref/doc/uid/TP40001075-CH17-SW1](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/HowManagedObjectsarerelated.html#//apple_ref/doc/uid/TP40001075-CH17-SW1)

提供的链接为您提供了为什么应该拥有`inverse`一套的想法。没有它，您可能会丢失数据/完整性。此外，您访问`nil`更有可能的对象的机会。

# c# - 如何没有/一个窗口标题和任务栏的不同标题？

> ID：764131
> 
> 赞同：3
> 
> 时间：2009-04-18T20:26:14.983
> 
> 标签：c#, wpf, windows, winforms

Windows 7 中的 Windows 资源管理器，也许还有 Vista（不记得），在窗口中没有标题。但在任务栏中确实有一个标题（一些文本）。

这可以在 C#（wpf 或 winforms）中重现吗？通过框架或introp。

我想在任务栏中有一个显示“选项”的窗口，但窗口本身没有标题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T20:45:41.050

MSDN 有一篇很好的文章，名为[使用 DWM 的自定义窗口框架](http://msdn.microsoft.com/en-us/library/bb688195(loband).aspx)，其中讨论了使用 Vista 和 Windows 7 的 DWM 可以对窗口框架执行的操作。特别是，*删除标准框架*部分应该与您的情况相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T07:16:31.820

查看[http://blogs.msdn.com/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx](http://blogs.msdn.com/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx)中标题为“Vista Explorer – 从标题栏中删除冗余信息”的部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T02:06:20.670

只需将以下属性添加到 .xaml 文件中的 Windows 元素

```
WindowStyle="None" 
```

旁注：任务管理器可以有标题栏或没有标题栏，具体取决于您使用的模式；双击边距以切换模式。另请注意，调出任务管理器最快的方法是 Ctrl+Shift+Esc。还要检查 Window 元素的 BorderThickness 和 WindowsState 属性。

归功于 WPF MSDN 文档中的粒子效果示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T03:06:32.790

您是否注意到 WPF 窗口的一个属性：

**ShowInTaskbar：** *获取或设置一个值，该值指示窗口是否有任务栏按钮。这是一个依赖属性。*

我认为这可能会有所帮助。您可以将 WindowStyle 属性设置为“无”，并将 ShowInTaskbar 属性设置为“True”。

# ruby - Ruby 与计算机科学相关的 yield 特性

> ID：764134
> 
> 赞同：50
> 
> 时间：2009-04-18T20:27:03.700
> 
> 标签：ruby, functional-programming, yield

我最近发现了 Ruby 的块和产生特性，我想知道：这在计算机科学理论方面适合什么？它是一种函数式编程技术，还是更具体的东西？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2009-04-19T09:28:34.273

Ruby`yield`不像 C# 和 Python 那样是迭代器。`yield`一旦您了解了块在 Ruby 中的工作原理，它本身实际上是一个非常简单的概念。

是的，块是一种函数式编程特性，尽管 Ruby 并不是一种适当的函数式语言。事实上，Ruby 使用该方法`lambda`来创建块对象，这是从 Lisp 用于创建匿名函数的语法中借用的——这就是块的含义。从计算机科学的角度来看，Ruby 的块（和 Lisp 的 lambda 函数）是[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)。在 Ruby 中，方法通常只占用一个块。（你可以通过更多，但这很尴尬。）

Ruby 中的`yield`关键字只是一种调用已赋予方法的块的方式。这两个例子是等价的：

```
def with_log
  output = yield # We're calling our block here with yield
  puts "Returned value is #{output}"
end

def with_log(&stuff_to_do) # the & tells Ruby to convert into
                           # an object without calling lambda
  output = stuff_to_do.call # We're explicitly calling the block here
  puts "Returned value is #{output}"
end 
```

在第一种情况下，我们只是假设有一个块并说调用它。另一方面，Ruby 将块包装在一个对象中并将其作为参数传递。第一个更高效和可读，但它们实际上是相同的。你会这样称呼任何一个：

```
with_log do
  a = 5
  other_num = gets.to_i
  @my_var = a + other_num
end 
```

它会打印最终分配给`@my_var`. （好吧，这是一个完全愚蠢的功能，但我想你明白了。）

块在 Ruby 中用于很多事情。几乎每一个你会在像 Java 这样的语言中使用循环的地方，它在 Ruby 中都被替换为带块的方法。例如，

```
[1,2,3].each {|value| print value} # prints "123"
[1,2,3].map {|value| 2**value}    # returns [2, 4, 8]
[1,2,3].reject {|value| value % 2 == 0} # returns [1, 3] 
```

正如 Andrew 所指出的，它也常用于打开文件和许多其他地方。基本上只要你有一个可以使用一些自定义逻辑的标准函数（比如排序数组或处理文件），你就会使用一个块。还有其他用处，不过这个答案已经这么长了，恐怕会导致体质较弱的读者心脏病发作。希望这可以消除对该主题的困惑。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-19T04:58:05.437

除了循环之外，还有更多的收益和阻塞。

[Enumerating enumerable](http://www.globalnerdy.com/tag/enumerating-enumerable/)系列有一系列你可以用枚举做的事情，比如询问一个陈述是否对一个组的任何成员都为真，或者它是否对所有成员都为真，或者搜索任何或所有满足特定条件的成员.

块对于变量范围也很有用。它不仅方便，还可以帮助进行良好的设计。例如，代码

```
File.open("filename", "w") do |f|
  f.puts "text"
end 
```

确保文件流在您完成后关闭，即使发生异常，并且一旦您完成该变量就超出范围。

一个随便的谷歌没有想出一篇关于红宝石块和产量的好博客文章。我不知道为什么。

**回复评论**：

我怀疑它是因为块结束而关闭的，而不是因为变量超出范围。

我的理解是，当指向对象的最后一个变量超出范围时，除了该对象有资格进行垃圾收集外，没有什么特别的事情发生。不过，我不知道如何确认这一点。

我可以证明文件对象在被垃圾收集之前就被关闭了，这通常不会立即发生。在下面的示例中，您可以看到在第二`puts`条语句中关闭了一个文件对象，但它还没有被垃圾回收。

```
g = nil
File.open("/dev/null") do |f|
  puts f.inspect # #<File:/dev/null>
  puts f.object_id # Some number like 70233884832420
  g = f
end
puts g.inspect # #<File:/dev/null (closed)>
puts g.object_id # The exact same number as the one printed out above,
  # indicating that g points to the exact same object that f pointed to 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-18T20:29:37.610

我认为该`yield`语句起源于[CLU](http://en.wikipedia.org/wiki/CLU_%28programming_language%29)语言。我一直想知道Tron的角色是否也以CLU命名......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T20:34:54.320

我认为[“协程”](http://en.wikipedia.org/wiki/Coroutine)是您要查找的关键字。

例如[http://en.wikipedia.org/wiki/Yield](http://en.wikipedia.org/wiki/Yield)

计算和信息科学的产出：

*   在计算机科学中，协程的返回（和重新进入）点

# algorithm - 定义明确的抽象编程任务的集合

> ID：764165
> 
> 赞同：2
> 
> 时间：2009-04-18T20:43:09.933
> 
> 标签：algorithm

我正在寻找可以用首选语言实现的网站或书籍或任何其他小型编程任务来源。如果也有例子，那就太好了。如果有人可以查看我的代码，那就太好了。可能有此类任务的维基。我试过谷歌，但没有找到适合我需要的东西。

我想提高使用某些语言进行编程的技能，但手头没有特定任务。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T20:45:02.190

[Project Euler](http://projecteuler.net/)和[Facebook Puzzles](http://www.facebook.com/careers/puzzles.php)是经常被吹捧的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T20:49:51.493

Jon Bentley有一本书叫“ [Programming Pearls](http://www.cs.utsa.edu/~lzhang/download/Programming%20Pearls%20(2nd%20Ed%202000)%20-%20Jon%20Bentley%20ADDISON%20WESLEY.pdf) ”，绝对值得一读和尝试……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T02:40:31.347

Chris Rathman 是我见过的至少为数不多的从事[多语言](http://lambda-the-ultimate.org/node/3035)[计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)练习的人之一。我目前仍处于方案阶段，但这对我来说似乎是一个很好的练习！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T20:46:38.740

试试 sourceforge，有很多有趣的项目，其中很多都在寻找志愿者。

# jquery - 类似 Haskell 中的 Jquery 选择器

> ID：764168
> 
> 赞同：7
> 
> 时间：2009-04-18T20:46:27.383
> 
> 标签：jquery, haskell

我在 Haskell 中做一些服务器端的 html 处理。想知道是否有一个等效的 jquery 类型选择器引擎实现用于我可以使用的 haskell。谷歌没有产生任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T14:46:56.427

一些可能相关的软件包：

*   [Haskell 的 DOM](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/DOM)
*   [哈XML](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/HaXml)
*   [Haskell 的 XML 工具](http://hackage.haskell.org/packages/archive/pkg-list.html#cat:xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T20:51:10.693

jQuery 选择器引擎（大致）的工作方式是利用现有的 Javascript DOM 选择/操作代码。据我所知，没有人在 Haskell 中创造过这样的东西，而且可能是有充分理由的。由于 DOM 和现有功能，使用 Javascript 很容易，但在 Haskell 中，您对它的需求不大，也不是特别容易。

然而，就您自己编写而言，您只会做很多讨厌的 XML 解析。如果您可以将页面整理成 XHTML，则可以将其解析为 XML；然后，您可以根据节点是否有子节点、节点是否具有给定属性、元素本身是什么等进行选择。

也许您只是在寻找一个 XML 库！如果这对你有用，我推荐[HaXml。](http://www.cs.york.ac.uk/fp/HaXml/)我只用过两次，但我很喜欢它。然而，没有什么比这个应用程序更像了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T12:00:52.957

看看 HaXml 中的 Xtract 模块。那里有一个同名的命令行工具来测试它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T00:52:50.480

我制作了一个支持一些 css 选择器的[dom-selector](http://hackage.haskell.org/package/dom-selector)包。这适用于[xml-conduit](http://hackage.haskell.org/package/xml-conduit)和[html-conduit](http://hackage.haskell.org/package/html-conduit)包。我预计 xml-conduit 和 html-conduit 将被积极开发，因为它们伴随着 Yesod，这是 Haskell 的主要 Web 服务器框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T05:15:45.250

我正在编写一个名为[HandsomeSoup](https://github.com/egonSchiele/HandsomeSoup)的模块来执行此操作。它使用[HXT](http://www.fh-wedel.de/~si/HXmlToolbox/)。[我还在此处](http://adit.io/posts/2012-04-14-working_with_HTML_in_haskell.html)编写了使用 HXT 处理 HTML 的完整指南。

# python - 尝试获取枚举样式选择=为 django 工作，但整个连音都出现在下拉列表中

> ID：764177
> 
> 赞同：1
> 
> 时间：2009-04-18T20:50:54.750
> 
> 标签：python, django, google-app-engine

我正在使用 appengine 和 appenginepatch （所以我的问题可能与此有关）

我已经设置了一个具有多个选择的属性的模型，但是当尝试在表单上或通过管理界面显示时出现错误：

> 属性模式为'o'；必须是 (('s', 'Single'), ('m', 'Multi'), ('o', 'Ordered')) 之一

这是我的代码：

```
MODES = (
  ('s', 'Single'),
  ('m', 'Multi'),
  ('o', 'Ordered')
)

class X(search.SearchableModel):
    mode = models.StringProperty( default='s', choices=MODES ) 
```

如果我将其设置为使用整数（如下所示），则管理表单（和我自己的 ModelForm）将属性的每个选项显示为整个连音，这样当我选择并尝试保存时，我会收到我没有保存的错误整数值

```
MODES = (
  (0, 'Single'),
  (1, 'Multi'),
  (2, 'Ordered')
)

class X(search.SearchableModel):
    mode = models.IntegerProperty( default=0, choices=MODES ) 
```

我有什么特别的事情要做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T22:11:45.367

看起来这是 Django/appengine 支持中的一个问题。它记录[在](http://code.google.com/p/google-app-engine-django/issues/detail?id=72)google-app-engine-django 错误跟踪器上，但它在那里被关闭为“wontfix”。它也记录[在](http://code.google.com/p/googleappengine/issues/detail?id=350)googleappengine 错误跟踪器上，并因无效而关闭。

根据[文档](http://code.google.com/appengine/docs/python/datastore/propertyclass.html#Property)， appengine`choices`参数的工作方式与 Django 不同。如果不创建自定义小部件，您似乎无法做您想做的事。根据 Guido 关闭 googleappengine 票证的评论，

> 我意识到，当您尝试从模型创建表单时，这可能会导致问题，但解决方案是使用自定义小部件覆盖表单字段并将所需选择的列表传递给小部件。（在 Rietveld 中有一个这样的例子，在 codereview/views.py 的类 SettingForm 中。）

# objective-c - 聚焦一个 NSTextField

> ID：764179
> 
> 赞同：20
> 
> 时间：2009-04-18T20:51:12.270
> 
> 标签：objective-c, cocoa

我有一个 NSTextField，如果我点击一个按钮，我想设置它的内容，而不是将光标设置在文本末尾的这个文本字段上，所以如果有人点击这个按钮，他就可以开始输入。

到目前为止，我使用 [NSTextField selectText] 它选择了这个文本字段，但它选择了整个文本，所以如果有人刚刚开始输入，他会丢失文本字段中已经存在的所有文本。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2011-01-06T19:31:09.580

甚至更容易

```
[yourTextField becomeFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-19T10:53:24.273

好的，我现在发现了：）

```
- (IBAction)focusInputField:(id)sender {
    [textField selectText:self];
    [[textField currentEditor] setSelectedRange:NSMakeRange([[textField stringValue] length], 0)];  
} 
```

在 RubyCocoa 中是：

```
def select_input_field
    @input.selectText self
    range = OSX::NSRange.new(@input.stringValue.length, 0)
    @input.currentEditor.setSelectedRange range
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-18T21:12:24.573

你会想做这样的事情：

```
[[self window] makeFirstResponder:[self yourTextField]]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-05-16T10:37:54.420

我正在写一个游戏插件，我遇到了类似的问题：

```
- (void)gotEvent:(NSEvent *)newEvent
{
  [mainWindow makeKeyAndOrderFront:self];
  [mainWindow makeFirstResponder:messageField];
  [mainWindow sendEvent:newEvent]; // will forward the typing event
} 
```

这可以完成工作:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-04T20:22:15.813

前段时间我做过类似的任务。我的解决方案是为 NSTextField 的部分文本选择写下小类别方法。此方法的作用与原始 selectText: 类似（将焦点设置为控制）。

```
@implementation NSTextField( SelExt )

-(void)selectTextRange:(NSRange)range
{
   NSText *textEditor = [self.window fieldEditor:YES forObject:self];
   if( textEditor ){
      id cell = [self selectedCell];
      [cell selectWithFrame:[self bounds] inView:self 
            editor:textEditor delegate:self
            start:range.location length:range.length];
   }
}

@end 
```

使用这种方法，您可以将文本选择放置在您想要的位置，然后立即开始输入。

# iphone - 捕捉返回按钮导航事件

> ID：764180
> 
> 赞同：0
> 
> 时间：2009-04-18T20:52:08.197
> 
> 标签：iphone, cocoa-touch, uitableview, uiwebview, uinavigationbar

我有一个基于导航的应用程序。在表格视图中单击一行后，我会推送一个 UIWebView。UIWebView 中有网络链接。用户单击一个链接，该链接呈现外部网页。这一切都发生在我的应用程序中。顶部导航栏没有随着单击呈现的链接和外部网页而改变。但是，一旦用户单击左上角的导航按钮，他们就会返回到 tableview 而不是初始的 UIWebView。如果用户从外部链接单击，我如何连接到导航返回按钮并将用户返回到初始 UIWebView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T09:33:52.547

您可以收到导航控制器更改的通知，但我不相信您可以阻止它们发生（UINavigationControllerDelegate 协议）。

解决此问题的一种方法是将对象设置为 webview 的委托（UIWebViewDelegate 协议）并实现：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

这里返回 NO 以避免在 webview 中打开链接，将请求交给第二个视图控制器中的 webview，然后将第二个视图控制器推送到导航控制器堆栈上。

这样您就不必拦截向后导航，但 UI 的行为就像用户期望的那样。

# c - RFC 3174 (SHA-1) 中指定的十六进制数的意义

> ID：764182
> 
> 赞同：3
> 
> 时间：2009-04-18T20:52:34.030
> 
> 标签：c, hex, sha1

我正在尝试了解 SHA-1，我正在查看规范 (RFC 31741) 中包含的 C 实现，这部分让我感到困惑：

> ```
> context->Intermediate_Hash[0]   = 0x67452301;
> context->Intermediate_Hash[1]   = 0xEFCDAB89;
> context->Intermediate_Hash[2]   = 0x98BADCFE;
> context->Intermediate_Hash[3]   = 0x10325476;
> context->Intermediate_Hash[4]   = 0xC3D2E1F0; 
> ```

那些硬编码的十六进制值有什么意义，它们只是使算法工作的特殊调味料，还是它们代表一些数学常数？

您可以在此处查看完整代码：http: [//www.faqs.org/rfcs/rfc3174.html](http://www.faqs.org/rfcs/rfc3174.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T20:58:47.180

为了避免过于冗长的答案，它们只是算法特定的常量。作为类似用法的示例，请参阅[Carmack Square Root。](http://www.codemaestro.com/reviews/9)它通过提供初始的幼稚猜测，使用特殊值作为加速传统平方根方法的一种方式。

正如代码所暗示的，它们只是帮助充当中间散列元素的数字。它们不一定像您可能暗示的数学常数那样具有任何*含义*，但它们对算法很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T09:19:20.083

它没有回答您的问题，但请注意，对 SHA-1 的真正引用（如 RFC 中所述）是[FIPS 180](http://www.itl.nist.gov/fipspubs/fip180-1.htm)。没有更多的解释，但至少它是原始来源:-(

另外，请记住 SHA-1 今天已[受到严重威胁](http://www.schneier.com/blog/archives/2005/02/sha1_broken.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:13:29.373

它们是[“我的袖珍号码”](http://en.wikipedia.org/wiki/Nothing_up_my_sleeve_number)。

所选值没有特殊属性。这些数字与随机选择的值具有相同的属性，但不允许算法设计者选择它们。选择常量的算法设计者可能允许他嵌入某种后门，因此它们的选择方式尽可能地降低了自由度。

典型的选择包括 pi 的第一个数字，或者在 SHA-1 小素数平方根的情况下：

> 使用的常数值被选为我的袖珍数字：四个圆形常数 k 是 2、3、5 和 10 的平方根的 2^30 倍。h0 到 h3 的前四个起始值与 MD5 相同算法，和第五个（对于h4）类似。

来自[维基百科：SHA-1](http://en.wikipedia.org/wiki/SHA-1)

# php - 使用 SQL 过滤 Drupal 视图

> ID：764183
> 
> 赞同：1
> 
> 时间：2009-04-18T20:53:36.397
> 
> 标签：php, drupal, drupal-views, cck, drupal-exposed-filter

我有一个带有 CCK 整数字段的内容类型，它采用 unix 时间戳。我想创建一个带有过滤器的视图，该过滤器采用 MySQL 函数“UNIX_TIMESTAMP”：

![截屏](https://i.stack.imgur.com/EOJur.png)

如果没有办法做到这一点，我该如何更改为视图生成的 SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T02:33:24.583

我找到了一个临时解决方案，其中涉及在视图模块中实现 views_pre_execute 钩子。

我已在标记为“在 CCK 整数字段上使用 SQL 值作为过滤器值”的注释中记录了[它](http://drupal.org/node/409808#comment-1492672)。

不过，我对这个解决方案不是很满意，因为它似乎有点不合时宜。

# python - Python：如何从 datetime.timedelta 对象中获取时间？

> ID：764184
> 
> 赞同：24
> 
> 时间：2009-04-18T20:55:48.703
> 
> 标签：python, mysql, timedelta

mysql 数据库表有一个数据类型为时间的列（[http://dev.mysql.com/doc/refman/5.0/en/time.html](http://dev.mysql.com/doc/refman/5.0/en/time.html)）。当访问表数据时，Python 将此列的值作为 datetime.timedelta 对象返回。我如何从中提取时间？（我真的不明白 python 手册中的 timedelta 是什么）。

例如，表中的列包含值“18:00:00” Python-MySQLdb 将其返回为 datetime.timedelta(0, 64800)

* * *

请忽略下面的内容（它确实返回不同的值） -

*补充：不管表中的时间值如何，python-MySQLdb 似乎只返回 datetime.timedelta(0, 64800)。*

注意：我使用 Python 2.4

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-04-18T21:04:40.427

奇怪的是 Python 将值作为`datetime.timedelta`. 它可能应该返回一个`datetime.time`. 无论如何，看起来它正在返回自午夜以来经过的时间（假设表中的列是下午 6:00）。为了转换为 a `datetime.time`，您可以执行以下操作：

```
value = datetime.timedelta(0, 64800)
(datetime.datetime.min + value).time() 
```

`datetime.datetime.min`当然，如果您想了解更多信息，它们会被记录为 datetime 模块的`datetime.time()`一部分[。](http://docs.python.org/library/datetime.html)

顺便说一下， A是两个值`datetime.timedelta`之间差异的表示。`datetime.datetime`因此，如果您`datetime.datetime`从另一个中减去一个，您将得到一个`datetime.timedelta`. 如果你`datetime.datetime`用 a添加 a `datetime.timedelta`，你会得到一个`datetime.datetime`. 上面的代码就是这样工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T09:57:54.173

在我看来，MySQL 中的 TIME 类型旨在表示时间间隔，就像 Python 中的 datetime.timedelta 一样。从您引用的文档中：

> TIME 值的范围可以从“-838:59:59”到“838:59:59”。小时部分可能会很大，因为 TIME 类型不仅可以用于表示一天中的某个时间（必须小于 24 小时），还可以用于表示经过的时间或两个事件之间的时间间隔（可能远大于24 小时，甚至是负数）。

从 datetime.timedelta 转换为 datetime.time 的替代方法是将列类型更改为 DATETIME 并且不使用日期字段。

-插入：

```
tIn = datetime.datetime(
    year=datetime.MINYEAR, 
    month=1, 
    day=1, 
    hour=10,
    minute=52,
    second=10
    )
cursor.execute('INSERT INTO TableName (TimeColumn) VALUES (%s)', [tIn]) 
```

-选择：

```
 cursor.execute('SELECT TimeColumn FROM TableName')
 result = cursor.fetchone()
 if result is not None:
     tOut = result[0].time()
     print 'Selected time: {0}:{1}:{2}'.format(tOut.hour, tOut.minute, tOut.second) 
```

在 datetime 对象上调用 datetime.time() 以获取时间对象。

# download - 下载应用程序时使用 MD5 哈希的目的是什么？

> ID：764192
> 
> 赞同：9
> 
> 时间：2009-04-18T21:02:40.900
> 
> 标签：download, md5

我从来没有在程序主页上检查和比较过 MD5 散列和真正的 MD5 散列。我下载的程序一直有效。

**有人可以在下载过程中放置​​自己的代码吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-18T21:04:38.837

散列根据其内容为文件提供（某种）唯一标识符。由于有损连接和传输方法不佳，以及四处飘荡的恶意文件副本，哈希提供了一种方法来证明您的文件与您尝试从服务器下载的文件相同。

您通过散列您获得的文件副本并查看散列是否相同来验证它。

人们可以注入讨厌的代码，更改正在下载的文件，或者**您可能只是获得损坏的下载。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T21:46:24.150

就损坏的下载而言，这是非常罕见的。我认为我从来没有下载过损坏的下载，除非它以某种方式被截断并且没有报告错误（当时的旧 FTP 客户端）。

如果您从镜像下载，并且您信任真实站点（发布 MD5）比您信任镜像（可能已过时，或邪恶，或有缺陷或 pwned，）可能会有一些安全优势，或其他东西，它和你之间的缓存网络代理也可能如此）。不过，这种情况不太可能发生，因为通常没有理由认为主站点比镜像更可靠或更安全。不过，这是第二种意见。

我通常不会检查已发布的校验和，除非有特定理由认为它们是正确的并且下载不安全（例如校验和位于 https URL 上而下载不是）。如果您担心作恶者，那么您需要签名，而不仅仅是不安全传输的校验和。

不过，我偶尔会在 virustotal 上使用基于散列的病毒扫描报告。我猜一个发布的 MD5sum 可以让你在下载文件之前对文件进行病毒检查，然后你必须在下载后检查总和，以确认你病毒检查的值确实是你下载的文件。

请注意，如果作恶者生成正版文件以及恶意加载病毒的文件，则 MD5 校验和是不安全的。可能会产生 MD5 冲突，尽管（还没有）完整的原像攻击。任何认真对待安全性的人都已在可能的情况下切换到 SHA256 总和。由于遗留和资源原因，这比您希望的要少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-18T21:07:03.870

> 有人可以在下载过程中放置​​自己的代码吗？

是的。如果下载是通过未加密的 HTTP 完成的，那么它会通过多个网络进行路由，人们肯定有机会操纵它并插入木马或病毒。

这正是下载的 MD5 校验和的目标，尽管这当然不是完美的安全性，因为校验和可以以相同的方式进行操作。但这需要攻击者更多的努力和协调。

总而言之，这不是一个非常常见的问题，因为目前还有其他攻击媒介对坏人更有用（主要是网络浏览器漏洞）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-18T21:03:38.387

可以检查文件是否损坏。这就是我想的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-18T21:10:15.250

MD5 哈希是一种验证形式。如果文件中的单个位不同，则提供的散列将与您下载的文件生成的散列不匹配。这会提醒您传输错误或犯规（罕见）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-18T22:35:44.203

除了使您能够确保您获得了您尝试下载的代码（它没有被有意或无意地损坏），如果您检查哈希，在发布代码时包含哈希的做法是良好的社会卫生。由于共享或销售软件的人通常在他们的代码中包含哈希值，而且我们相信有些人会定期检查它们（因为一些下载工具会自动执行），破解者会发现这是一种不太有用的传播恶意软件的方式。因此，那些只检查安全关键软件的哈希值的人，或者那些从不检查的人可以更有信心地相信该软件是它声称的那样。如果破解者试图开始将病毒或木马注入常用的下载站点，它们会很快被检测到，并且攻击会得到修复和公开。

因此，您可以通过偶尔检查来帮助每个人，即使您不检查，哈希的存在也应该提供一些保证，即代码可能与作者预期的一样，并且许多其他人下载了相同的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-18T21:46:46.193

它基本上回答了与身份验证相同的问题——说他是那个人的那个人是否真的是那个人。它可以帮助您确保您下载的程序实际上是作者首先提供的程序，并且在从供应商通过互联网迷宫进入您的桌面的过程中没有被篡改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-18T22:48:39.587

我大部分时间都检查md5。虽然可能只有一两次，是的，我确实得到了损坏的下载。

如果你下载了一些东西，检查它的 md5 并与文件一起存储，这也可能是以后检查发布者是否在不告诉任何人的情况下偷偷更改文件的一种方式。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-08-07T16:52:07.897

完全浪费时间。

黑客会更改哈希和二进制文件，因此这只是针对无能黑客的安全措施。

大多数下载的二进制文件都使用内置的错误检查进行压缩，因此哈希完全没有实现任何目标，这就是为什么除了极客之外我从未见过任何人实际使用它们的原因。

现在，软件包安装程序使用的数字签名散列是不同的且值得的。

# mysql - MySQL 文本列的索引长度有多好？

> ID：764194
> 
> 赞同：12
> 
> 时间：2009-04-18T21:02:55.830
> 
> 标签：mysql

我`TEXT`在 MySQL 数据库中有一个列。该应用程序就像一个博客，col 包含“帖子”的正文。我将在此列上进行大量复杂的布尔搜索。

MySQL 文档说您需要为 InnoDB 表的最大长度为 767 字节的 TEXT 列设置索引长度。

我应该将其设置为最大长度吗？比那个少更好吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-18T21:08:39.140

这取决于你将拥有什么。

我从您的问题中怀疑您正在想象列上的索引可以做它不能做的事情。常规索引不是全文索引，不能用于查找单词或除前缀之外的任何子字符串匹配项。数据库索引用于查找精确值，或仅用于查找值范围——它们不能执行任意匹配。

假设您打算将索引用于它可以做的事情，那么长度应该是最短的长度，让您有足够的特异性，您可以在不阅读太多行的情况下找到所需的行。多长时间取决于您的表的内容，例如，如果您的表有许多具有相同前缀的行，则索引需要比类似的前缀长，以避免将它们放入相同的索引条目 - 这意味着它们都需要被搜索。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-18T21:06:20.987

如果您正在执行“复杂的布尔搜索”，那么普通索引很可能对您没有任何用处。我想你可能会发现你需要一个[全文索引](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)。

# ruby-on-rails - 宁静的 Rails “观点”？

> ID：764201
> 
> 赞同：1
> 
> 时间：2009-04-18T21:05:01.677
> 
> 标签：ruby-on-rails, ruby

假设我想渲染一个不一定与模型绑定的页面。到目前为止，我一直在为每个页面创建一个名为“Pages”的控制器和一个路由：

```
map.home :controller => "pages", :action => "home" 
```

这并不平静，而且很乏味。当然有更好的方法来处理这样的“观点”吗？

注意：我避免使用“视图”一词，以便区分 Rails 视图和我希望完成的任务。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T21:43:07.497

有几种方法可以处理这个问题。[Josh Susser 写了一篇](http://blog.hasmanythrough.com/2008/4/2/simple-pages)关于它的文章，并且有[一个关于类似主题的 Railscast](http://railscasts.com/episodes/117-semi-static-pages)。

简而言之，没有一个很好的方法来处理它，但是你现在的处理方式还有一些改进的空间。

高温高压

# robotics - Lego MindStorms 是基本机器人开发的好选择吗？

> ID：764202
> 
> 赞同：28
> 
> 时间：2009-04-18T21:05:05.497
> 
> 标签：robotics, mindstorms, lego, nxt

我想学习如何编写控制机器人的软件。

Lego MindStorms 是一个不错的选择吗？有更好的选择吗？

我更喜欢 MindStorms，但在阅读了几篇文章后，我觉得乐高已经停止了 MindStorms 的研发。

你有什么建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-18T22:22:58.883

您没有表明您是否对机器人的硬件或软件方面更感兴趣。如果您主要对软件感兴趣并且不想在硬件上花钱，您应该考虑模拟环境。

想想飞行模拟器或游戏程序之类的东西。您可以“飞”一架飞机而无需购买。你也可以在这个过程中学到很多东西。

Microsoft 的[Robotics Studio](http://msdn.microsoft.com/en-us/robotics/default.aspx)有一个可以免费下载的版本，它允许您模拟 Lego Mindstorms 并为其编写程序。如果您是学生，您也可以免费获得完整版。

当然，如果你想花钱，没有什么能比得上真正的东西，我相信你会从中获得很多乐趣。

我刚刚了解到 LabView 也可用于对 Lego Mindstorms 进行编程。看看：[http](http://www.ni.com/academic/mindstorms/) ://www.ni.com/academic/mindstorms/他们有一个为[学生](http://sine.ni.com/apps/utf8/ni_academic.landing_page)提供的 LabView 版本，价格非常优惠。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-18T21:13:38.643

我拥有 Lego MindStorms 机器人工具包的第一个版本，我对它的赞美再怎么不过。它很容易上手，而且可能性是无穷无尽的。建造东西不仅很有趣，而且将它们带入生活也是一种乐趣。它对您作为工程师和软件开发人员提出了挑战。它让您真正体会和理解机器人研发的脆弱性。

新的 NXT 套装也已推出。它主要由用户反馈开发，是迄今为止最好的乐高机器人套件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-18T21:40:50.607

我执教了[第一乐高联盟](http://www.usfirst.org/firstlegoleague/community/homepage.html)球队几年，我们使用了 NXT 机器人。该团队由 6 年级、7 年级和 8 年级的学生组成，他们能够轻松学习图形编程环境并使用它开发一些非常复杂的程序。作为教练，我们指导他们进行良好的软件实践（需求、设计、模块化、文档、测试等），但孩子们完成了工作，他们学到了很多东西。[标准的 NXT 软件基本上是LabView](http://www.ni.com/labview/)的精简版，使用起来相当容易，但有一点问题。不过，这对孩子们来说是一个很好的功能——他们学会了经常保存工作的艰难方法，因为在您编辑时软件可能而且确实会崩溃。

如果您想玩得开心，尤其是如果您也想让孩子们参与其中，那么这是一个很好的环境。但是标准软件是一种图形化编程语言，所以你在连接和配置功能块而不是编写代码，有些人不认为这是“真正的”软件。这完全取决于你想学什么。由于 FLL 竞赛规则，我们只与孩子们一起使用标准 NXT 软件。如果您更喜欢使用程序语言，NXT 仍然是一个很好的学习平台，但您需要切换到像其中一个这样的替代开发[环境](http://www.teamhassenplug.org/NXT/NXTSoftware.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-19T03:08:36.420

假设您选择乐高路径，对于 Mindstorms，我绝对推荐[NQC](http://bricxcc.sourceforge.net/nqc/)。

NQC 是一种编程语言，可用于对 Lego Mindstorms 机器人进行编程，我发现它比在 WYSIWYG 风格的环境中拖动节点要容易得多（这是捆绑软件和基于 LabView 的版本的工作方式）*。*

我对 NXT 机器人没有任何经验，但如果 NQC 听起来很有趣，NXT 有一个等价物：[NBC/NXC](http://bricxcc.sourceforge.net/nbc/)。

史蒂夫

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-18T12:21:17.577

你有兴趣为机器人编写软件。您可以使用乐高开始并成长。一旦您的 Mindstorms 界面超出了您的要求，您就可以将 LeJOS 加载到“砖块”上并编写在您的计算机上运行并通过蓝牙控制机器人或与机器人交互的 Java 程序。有很多例子可以用来做 LeJOS 的基础知识。但是，您应该能够使用 Java 进行编程。

如果您可以使用 Java 编程并希望快速成长以包含更复杂的机器人场景，您应该查看我关于高级逻辑 (HLL) 开源项目的博客文章：http: [//highlevellogic.blogspot.com /2010/10/lego-mindstorms-nxt-robots-lejos.html](http://highlevellogic.blogspot.com/2010/10/lego-mindstorms-nxt-robots-lejos.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-18T21:11:37.667

我不能给你一个很好的与其他机器人工具包的并排比较（我知道 MS 有一个），但我花了很多时间进行头脑风暴（我做了一个用户组演示）和我认为它使编程变得愉快，并教您使用任何套件都需要了解的传感器、输入和输出的基础知识。

它为您提供了基础并使其变得有趣，这是一个很好的开始方式。虽然可能有更复杂的选择......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-19T03:02:53.563

我不知道您对使用哪种软件感兴趣，但 MATLAB 实际上有一个[LEGO MINDSTORMS NXT Toolkit](http://www.mathworks.com/programs/mindstorms/)。[一些MathWorks 博客](http://blogs.mathworks.com/loren/2008/06/30/lego-mindstorms-nxt-in-teaching/)上已对此进行了讨论，并且在 MathWorks 文件交换上发布了一些演示（[这里是一个](http://www.mathworks.com/matlabcentral/fileexchange/13399)）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-19T03:07:35.190

是的，Lego Mindstorms 很棒，但不要使用默认的 LabView G 语言界面来进行编程。

使用更高级的东西，比如 LeJos。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-19T02:43:29.803

如果您刚刚开始，最重要的将是您选择的任何套件背后的支持社区。MindStorms 非常受欢迎，我相信您在使用它时会遇到（许多）问题的答案。

# sql - 有许多索引有什么缺点？

> ID：764210
> 
> 赞同：17
> 
> 时间：2009-04-18T21:08:04.337
> 
> 标签：sql, database, sqlite, indexing, rdbms-agnostic

我最近通过为 SQLite 提供一个很好的索引来将复杂的查询速度提高了一个数量级。像这样的结果让我想知道我是否应该索引很多其他通常用于 JOIN 或 ORDER BY 子句的字段。但我不想过分热心并让它适得其反：我认为一定有一些理由*不*创建索引，否则默认情况下每个字段都会被索引。

在这种情况下，我使用的是 SQLite，但当然也欢迎与 DBMS 无关的建议。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-04-18T21:10:30.820

索引会减慢插入和更新速度（这可能会成为一个非常严重的锁定问题）并占用磁盘空间。差不多就是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-18T21:12:01.457

索引会占用磁盘空间来存储，并且需要时间来创建和维护。未使用的没有任何好处。如果查询有很多候选索引，则可能会因为让服务器为查询选择“错误”的索引而减慢查询速度。

使用这些因素来决定您是否需要索引。

通常可以创建永远不会使用的索引——例如，一个只有两个可能值的（非空）字段上的索引几乎肯定是没用的。

您需要解释您自己的应用程序的查询，以确保经常执行的查询尽可能使用合理的索引，并且创建的索引不超过所需的索引。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-19T16:49:21.093

为了测试您的特定应用程序，您可以将“EXPLAIN QUERY PLAN”放在您运行的任何查询前面并检查结果。它会告诉你它在哪里使用或不使用索引。

这样，您就可以确定在哪里可以使用更多索引以及它们不会产生影响的地方。

[Sqlite 解释](http://www.sqlite.org/lang_explain.html)

我使用[SqliteSpy](http://www.yunqa.de/delphi/doku.php/products/sqlitespy/index)来手动测试似乎引起麻烦的查询。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-19T02:46:22.027

磁盘空间中索引的成本通常是微不足道的。表更改时更新索引的额外写入成本通常适中。额外锁定的成本可能很高。

这取决于表上的读写比率，以及索引实际用于加速查询的频率。

# c# - 拳击与拆箱

> ID：764216
> 
> 赞同：28
> 
> 时间：2009-04-18T21:10:18.247
> 
> 标签：c#, boxing, unboxing

我最近遇到的另一个 C# 面试问题是我是否知道装箱和拆箱是什么。我解释了值类型在堆栈上，引用类型在堆上。当一个值被转换为引用类型时，我们称之为装箱，反之亦然。

然后他让我计算一下：

```
int i = 20;
object j = i;
j = 50; 
```

是什么`i`？

我把它搞砸了，说 50，实际上是 20。现在我想明白为什么了，但是当我玩不同的组合时，我很惊讶地看到这个：

```
Object a = 1; // Boxing
Object b = a; // referencing the pointer on stack to both objects on heap
a = 2; // Boxing 
```

我也期待看到`b == 2`，但事实并非如此，为什么？是不是因为第二次装箱破坏并替换`a`了堆上的整个对象？

因为如果我这样做，那很好：

```
public class TT
{
    public int x;
}

TT t = new TT();
t.x = 1;
TT t2 = new TT();
t2.x = 2;
t = t2;
t.x = 3; 
```

是什么`t2.x`？它应该是 3，它是。但这根本不是装箱/拆箱的例子，对吗？那么你会如何总结这一点呢？

**在装箱/拆箱转换中，这些值是否会变得与上述相同？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-18T22:55:43.797

非常简短：装箱意味着**创建引用类型的新实例**。如果您知道这一点，您就会明白一个实例不会因创建另一个实例而改变。

您所做`a = 2`的不是更改“框”中的值，而是创建引用类型的新实例。那么为什么还要改变呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-18T21:12:45.197

1.  你是对的，第二个任务取代了第一个。它不会更改装箱值。

2.  您的示例没有使用拳击。值 (int) 存储为 int 而非装箱。

3.  不，拳击仍然保持不变性保证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T18:24:38.003

这是另一个支持 Stefan 评论的有趣变体：

```
 int i = 2;
        object a = i; // Boxing
        object b = a; // Referencing same address on heap as 'a', b == a

        b = i; // New boxing on heap with reference new address, b != a 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-18T21:34:29.747

> 我也期待看到 b == 2，但事实并非如此，为什么？是因为第二次装箱破坏并替换了堆上的整个（a）对象吗？

不，不完全是。它将对象留在堆上（因为`b`变量也在引用它）并为新值创建一个新对象，`a`变量将引用该对象。

你是对的，你的第二个例子不使用拳击。除了取消装箱外，您无法访问以任何其他方式装箱的值，因此无法更改装箱值。

`Point`装箱时甚至不能更改可变结构。要访问结构的属性，您必须将其拆箱，因此您无法就地更改已装箱的结构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-18T21:38:54.747

b 仍然是 1，因为 b 是仍然指向堆上值为 1 的对象的引用。a 是 2，因为您将它分配给堆上的值为 2 的新对象。

t2.x 是 3，因为 t 和 t2 是对堆上同一对象的两个不同引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-18T22:27:13.770

我认为拆箱问题的答案是：拆箱转换的结果是一个临时变量（更多详细信息：[链接](http://msdn.microsoft.com/en-us/library/1zd0a13x(VS.80).aspx)）。

我认为您正在尝试做某事：

```
object a = new Point(10,10);
object b = new Point(20,20);
a = b;

((Point) b).X = 30; //after this operation also a.X should be 30 
```

上面的代码无法编译 - 上面链接中的详细信息，我认为这是您问题的答案：

> 我也期待看到 b == 2，但事实并非如此，为什么？是因为第二次装箱破坏并替换了堆上的整个（a）对象吗？

# data-structures - 大于内存数据结构以及它们的典型处理方式

> ID：764221
> 
> 赞同：3
> 
> 时间：2009-04-18T21:11:27.433
> 
> 标签：data-structures, b-tree

假设我有一个基于文件的数据结构，例如 B+ 树。我的理解是，数据预计存储在磁盘上，但索引通常加载在内存中。如果你有一个如此大的文件，甚至它的索引也不适合内存怎么办？这通常是如何处理的？其次，由于索引是一棵树，而不是一组线性数据，它通常如何在磁盘上布局？

我基本上很好奇它是如何在现实世界的项目中完成的（比如 Berkeley DB）。显然，我对广泛的笔触感兴趣。我希望得到一个想法，所以当我深入研究我的数据库书的 B-Tree 部分时，我有一些背景信息（或者从几年前的 CS XYZ 中回忆起我的记忆）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T21:15:15.130

B树适用于基于页面的系统，其中给定节点适合页面。要在 B 树中查找条目，一次只需要加载一页，因此您可以这样做。

即使更新它们也不需要大量页面同时在内存中 - 我想最困难的操作是在重组节点时删除，但如果它被仔细实施，即使这可以用相对较少的页面完成记忆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T21:27:46.190

您可能想看看[SQLite](http://www.sqlite.org/)。[代码库](http://www.sqlite.org/cvstrac/dir?d=sqlite/src)比Berkeley DB 小得多，它是公共领域的，它的组织和注释非常清晰，并且[源代码外的文档](http://www.sqlite.org/docs.html)非常好。教会了我很多关于现实世界中 btree 的知识

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-18T21:28:51.133

要回答你的第一个问题，一个太大而无法放入内存的数据结构通常被划分为“页面”，通常所有页面大小相同，每个页面包含数据结构的一部分，以使用您加载和卸载的数据页。

另一个常见的选项（在 RDBMS 中不常用，但在 XML 和媒体文件之类的东西中很常见）是流式传输，您可以通过加载下一部分并丢弃前一部分来按顺序处理数据。

这也回答了您的第二个问题，如果您使用分页而不是文件结构是一系列相同大小的页面，如果您使用流式传输，则数据应该按照您将要使用的顺序排列（在树的情况下，它可能是 DFS 或 BFS 顺序，具体取决于您的应用程序）。

# asp.net-mvc - ASP.NET MVC 存储页面特定设置

> ID：764226
> 
> 赞同：0
> 
> 时间：2009-04-18T21:13:36.477
> 
> 标签：asp.net-mvc

我正在用 ASP.NET MVC 编写一个学习项目。我有一个显示用户书籍的页面“书籍”，并且该页面中有一些排序和过滤选项，如下所示。

* * *

书页

排序参数：标题、年份、作者... 过滤参数：已读、未读...

* * *

当用户选择“标题”之类的排序参数时，控制器按标题对书籍进行排序并返回查看。然后，如果用户选择“阅读”过滤器，我希望列出的书籍按“标题”排序并按“阅读”参数过滤。

据我所知，我必须存储排序和过滤参数才能做到这一点。我不确定什么是最好和最简单的方法，因为我对 ASP.NET MVC 中的 Session、HttpContext、Tempdata 概念有点困惑。我可以使用经典的 ASP.NET Webforms 会话方式来做到这一点，但有些人说使用会话可能会引入问题。有什么替代方案，什么是最好和最简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-18T21:33:25.180

这取决于您是否希望在用户浏览站点然后返回页面时选择保持不变。如果它需要持久化，那么将选择存储在会话中是一种合理的方法。如果选择仅针对该特定页面，那么您可以将选择放入 ViewData 并让视图中的选择由 ViewData（或模型）中的值驱动。这样，当页面返回到浏览器时，每次往返的选择都会产生正确的默认值。

我个人的感觉是，应该在整个会话中保留这些选择，并且我将我的价值观保存在会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T21:53:56.377

MVC 框架为您提供了一些不错的选择。一个是在您的表单上有一个隐藏的输入，为您存储信息。因此，当您点击度假村按钮时，它会在该字段上键入以确定排序顺序。

第二种更优雅的方法是为您的按钮设置一个值，所以如果我点击标题，它会按标题排序，如果我点击作者，它会按作者排序。控制器将能够检测到这一点。

最后，您可以使用一些出色的 javascript 控件来自动为您完成所有这些工作。我想到的一个是 EXT Grid 控件，它绝对是非常棒的。它涉及一些使用 javascript 的工作，但它完全值得！希望这可以帮助

# sql-server - 如何将图像名称插入数据库？

> ID：764230
> 
> 赞同：0
> 
> 时间：2009-04-18T21:17:54.593
> 
> 标签：sql-server, vb.net, image

我成功上传和图像并调整它的大小。现在我想将我的图像名称插入数据库。

我正在使用 SQL Server。该表被命名`images`并有两列，一个整数`imageid`和`imagename`as `string(invarchar(max))`。我需要保存在 imagename 列中的文件名，并且`imageid`必须是一个身份。

这是我到目前为止的代码：

```
Imports System.Drawing
Imports System.Drawing.Drawing2D
Imports System.Drawing.Imaging
Imports System.IO
Imports System.Data.SqlClient
Imports System.Data
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub btnupload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnupload.Click
        Response.Write("Done")
        If (IsPostBack) Then
            HandleUploadedFile()
        End If
    End Sub
    Private Sub HandleUploadedFile()
        ' get the root of the web site 
        Dim root As String = Server.MapPath("~/")

        ' clean up the path 
        If Not root.EndsWith("\") Then
            root += "\"
        End If

        ' make a folder to store the images in 
        Dim fileDirectory As String = root & "Images/"

        ' create the folder if it does not exist 
        If Not System.IO.Directory.Exists(fileDirectory) Then
            System.IO.Directory.CreateDirectory(fileDirectory)
        End If

        ' make a link to the new file 
        Dim link As String = "<a href='Images/{0}' target='_blank'>{1}</a>{2}{3}"

        ' loop through the file in the request 
        For i As Integer = 0 To Request.Files.Count - 1

            ' get the file instance 
            Dim fi As HttpPostedFile = Request.Files.[Get](i)

            ' create a byte array to store the file bytes 
            Dim fileBytes As Byte() = New Byte(fi.ContentLength - 1) {}

            ' fill the byte array 
            Using stream As System.IO.Stream = fi.InputStream
                stream.Read(fileBytes, 0, fi.ContentLength)
            End Using

            ' create a random file name 
            Dim fileName As String = Guid.NewGuid().ToString()

            ' write the original file to the file system 
            File.WriteAllBytes(fileDirectory + fileName & ".jpg", fileBytes)
            litText.Text += String.Format(link, fileName & ".jpg", fileName & " Original", "<br/>", "")

            ' write the resized file to the file system 
            File.WriteAllBytes(fileDirectory + fileName & "_small.jpg", ResizeImageFile(fileBytes, 100))
            litText.Text += String.Format(link, fileName & "_small.jpg", fileName & " Small", "<br/>", "<br/>")

            ' cleanup 
            litText.Visible = True
            fileBytes = Nothing
        Next
    End Sub
    Private Shared Function ResizeImageFile(ByVal imageFile As Byte(), ByVal targetSize As Integer) As Byte()
        Using oldImage As System.Drawing.Image = System.Drawing.Image.FromStream(New MemoryStream(imageFile))
            Dim newSize As Size = CalculateDimensions(oldImage.Size, targetSize)
            Using newImage As New Bitmap(newSize.Width, newSize.Height, PixelFormat.Format24bppRgb)
                Using canvas As Graphics = Graphics.FromImage(newImage)
                    canvas.SmoothingMode = SmoothingMode.AntiAlias
                    canvas.InterpolationMode = InterpolationMode.HighQualityBicubic
                    canvas.PixelOffsetMode = PixelOffsetMode.HighQuality
                    canvas.DrawImage(oldImage, New Rectangle(New Point(0, 0), newSize))
                    Dim m As New MemoryStream()
                    newImage.Save(m, ImageFormat.Jpeg)
                    Return m.GetBuffer()
                End Using
            End Using
        End Using
    End Function
    Private Shared Function CalculateDimensions(ByVal oldSize As Size, ByVal targetSize As Integer) As Size
        Dim newSize As New Size()
        If oldSize.Height > oldSize.Width Then
            newSize.Width = CInt((oldSize.Width * (CSng(targetSize) / CSng(oldSize.Height))))
            newSize.Height = targetSize
        Else
            newSize.Width = targetSize
            newSize.Height = CInt((oldSize.Height * (CSng(targetSize) / CSng(oldSize.Width))))
        End If
        Return newSize
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T21:36:17.560

首先，您需要知道您的连接字符串。由于代码引用了 SQLClient，我假设您使用的是 SQL Server，因此您应该查看[此处](http://www.connectionstrings.com/sql-server-2005#1)。接下来，您将要使用 SQLCommand 对象的 ExecuteNonQuery 方法。我在下面粘贴了一个示例。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)阅读有关 SQLCommand 对象的更多信息。这个[网站](http://www.w3schools.com/SQL/sql_insert.asp)涵盖了插入语句。

```
Public Sub SaveNameInDatabase(ByVal fileName As String, ByVal connectionString As String)
    Using connection As New SqlConnection(connectionString)
String query = String.format("INSERT INTO Files_Table (FileName) Values (\"{0}\")",fileName)
        Dim command As New SqlCommand(, connection)
        command.Connection.Open()
        command.ExecuteNonQuery()
    End Using
End Sub 
```

# python - Python中的字典小写

> ID：764235
> 
> 赞同：59
> 
> 时间：2009-04-18T21:23:14.253
> 
> 标签：python, dictionary, lowercase

我希望这样做，但要一本字典：

```
"My string".lower() 
```

有内置函数还是应该使用循环？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2009-04-18T21:31:02.877

您将需要使用循环或列表/生成器理解。如果你想小写所有的键和值，你可以这样做::

```
dict((k.lower(), v.lower()) for k,v in {'My Key':'My Value'}.iteritems()) 
```

如果你只想小写键，你可以这样做::

```
dict((k.lower(), v) for k,v in {'My Key':'My Value'}.iteritems()) 
```

[生成器表达式](http://www.python.org/dev/peps/pep-0289/)（上面使用过）在构建字典时通常很有用；我一直在使用它们。循环理解的所有表现力，没有任何内存开销。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-19T13:25:52.923

以下与 Rick Copeland 的答案相同，只是在没有使用生成器表达式的情况下编写：

```
outdict = {}
for k, v in {'My Key': 'My Value'}.iteritems():
    outdict[k.lower()] = v.lower() 
```

生成器表达式、列表推导和（在 Python 2.7 及更高版本中）字典推导基本上是重写循环的方法。

在 Python 2.7+ 中，您可以使用字典理解（这是一行代码，但您可以重新格式化它们以使其更具可读性）：

```
{k.lower():v.lower()
    for k, v in
    {'My Key': 'My Value'}.items()
} 
```

它们通常比循环等效项更整洁，因为您不必初始化一个空的字典/列表/等。但是，如果您需要做的不仅仅是单个函数/方法调用，它们很快就会变得混乱。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-24T15:00:56.063

如果您想要多嵌套字典（json 格式）小写的键和值，这可能会有所帮助。需要支持**Python 2.7中的 dict 理解**

```
dic = {'A':['XX', 'YY', 'ZZ'],
       'B':(u'X', u'Y', u'Z'),
       'C':{'D':10,
            'E':('X', 'Y', 'Z'),
            'F':{'X', 'Y', 'Z'}
           },
       'G':{'X', 'Y', 'Z'}
      } 
```

***PYTHON2.7*** -- 也支持 OrderedDict

```
def _lowercase(obj):
    """ Make dictionary lowercase """
    if isinstance(obj, dict):
        t = type(obj)()
        for k, v in obj.items():
            t[k.lower()] = _lowercase(v)
        return t
    elif isinstance(obj, (list, set, tuple)):
        t = type(obj)
        return t(_lowercase(o) for o in obj)
    elif isinstance(obj, basestring):
        return obj.lower()
    else:
        return obj 
```

***蟒蛇3.6***

```
def _lowercase(obj):
    """ Make dictionary lowercase """
    if isinstance(obj, dict):
        return {k.lower():_lowercase(v) for k, v in obj.items()}
    elif isinstance(obj, (list, set, tuple)):
        t = type(obj)
        return t(_lowercase(o) for o in obj)
    elif isinstance(obj, str):
        return obj.lower()
    else:
        return obj 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-25T16:17:22.250

**python 3中更短的方法：** `{k.lower(): v for k, v in my_dict.items()}`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-09-16T16:25:03.900

这将小写你所有的 dict 键。即使您有嵌套的字典或列表。您可以执行类似的操作来应用其他转换。

```
def lowercase_keys(obj):
  if isinstance(obj, dict):
    obj = {key.lower(): value for key, value in obj.items()}
    for key, value in obj.items():         
      if isinstance(value, list):
        for idx, item in enumerate(value):
          value[idx] = lowercase_keys(item)
      obj[key] = lowercase_keys(value)
  return obj 
```

```
json_str = {"FOO": "BAR", "BAR": 123, "EMB_LIST": [{"FOO": "bar", "Bar": 123}, {"FOO": "bar", "Bar": 123}], "EMB_DICT": {"FOO": "BAR", "BAR": 123, "EMB_LIST": [{"FOO": "bar", "Bar": 123}, {"FOO": "bar", "Bar": 123}]}}

lowercase_keys(json_str)

Out[0]: {'foo': 'BAR',
 'bar': 123,
 'emb_list': [{'foo': 'bar', 'bar': 123}, {'foo': 'bar', 'bar': 123}],
 'emb_dict': {'foo': 'BAR',
  'bar': 123,
  'emb_list': [{'foo': 'bar', 'bar': 123}, {'foo': 'bar', 'bar': 123}]}} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-26T09:41:02.557

在 Python 3 中：

```
d = dict()
d = {k.casefold(): v for k, v in d.items()} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-05T07:51:57.890

我使用 JSON 库首先反序列化字典，应用小写而不是转换回字典

```
import json
mydict = {'UPPERCASE': 'camelValue'}
print(mydict)
mydict_in_str = json.dumps(mydict)
mydict_lowercase = json.loads(mydict_in_str.lower())
print(mydict_lowercase) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-22T06:18:25.597

如果提供的字典有多种类型的键/值（数字、字符串等）；然后使用以下解决方案。

例如; 如果您有一个名为 mydict 的字典，如下所示

```
mydict = {"FName":"John","LName":"Doe",007:true} 
```

**在 Python 2.x 中**

```
dict((k.lower() if isinstance(k, basestring) else k, v.lower() if isinstance(v, basestring) else v) for k,v in mydict.iteritems()) 
```

**在 Python 3.x 中**

```
dict((k.lower() if isinstance(k, str) else k, v.lower() if isinstance(v, str) else v) for k,v in mydict.iteritems()) 
```

**注意：**这适用于一维字典

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-27T15:49:25.603

喜欢你可以使用多级函数的方式，这是我的小写键的方式

```
def to_lower(dictionary):

    def try_iterate(k):
        return lower_by_level(k) if isinstance(k, dict) else k

    def try_lower(k):
        return k.lower() if isinstance(k, str) else k

    def lower_by_level(data):
        return dict((try_lower(k), try_iterate(v)) for k, v in data.items())

    return lower_by_level(dictionary) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-28T14:58:26.330

我很晚才回答这个问题 - 因为这个问题被标记了`Python`。因此，回答 和 的解决方案`Python 2.x`，`Python 3.x`并处理非字符串键的情况。

**Python 2.x** - 使用字典理解

```
{k.lower() if isinstance(k, basestring) else k: v.lower() if isinstance(v, basestring) else v for k,v in yourDict.iteritems()} 
```

**演示**：

```
>>> yourDict = {"Domain":"WORKGROUP", "Name": "CA-LTP-JOHN", 111: 'OK', "Is_ADServer": 0, "Is_ConnectionBroker": 0, "Domain_Pingable": 0}
>>> {k.lower() if isinstance(k, basestring) else k: v.lower() if isinstance(v, basestring) else v for k,v in yourDict.iteritems()}
{'domain': 'workgroup', 'name': 'ca-ltp-john', 'is_adserver': 0, 'is_connectionbroker': 0, 111: 'ok', 'domain_pingable': 0} 
```

* * *

**Python 3.x** - `iteritems()`Python 3.x 中没有

```
{k.lower() if isinstance(k, str) else k: v.lower() if isinstance(v, str) else v for k,v in yourDict.items()} 
```

**演示**：

```
>>> dict((k.lower() if isinstance(k, basestring) else k, v.lower() if isinstance(v, basestring) else v) for k,v in yourDict.iteritems())
Traceback (most recent call last):
  File "python", line 1, in <module>
AttributeError: 'dict' object has no attribute 'iteritems'
>>> {k.lower() if isinstance(k, str) else k: v.lower() if isinstance(v, str) else v for k,v in yourDict.items()}
>>> {'domain': 'workgroup', 'name': 'ca-ltp-john', 111: 'ok', 'is_adserver': 0, 'is_connectionbroker': 0, 'domain_pingable': 0} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-03T12:18:20.613

在`Python 3`你可以这样做：

```
dict((k.lower(), v.lower()) for k,v in {'Key':'Value'}.items()) 
```

`Python 2`只是`.items()`代替`.iteritems()`：_

```
dict((k.lower(), v.lower()) for k,v in {'Key':'Value'}.iteritems()) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-05-11T15:18:00.410

```
def convert_to_lower_case(data):
    if type(data) is dict:
        for k, v in data.iteritems():
            if type(v) is str:
                data[k] = v.lower()
            elif type(v) is list:
                data[k] = [x.lower() for x in v]
            elif type(v) is dict:
                data[k] = convert_to_lower_case(v)
    return data 
```

# asp.net - 如何在开发机器的aspx页面中使用绝对url？

> ID：764243
> 
> 赞同：0
> 
> 时间：2009-04-18T21:30:19.727
> 
> 标签：asp.net, absolute-path, resolveurl

我发现自己在我的 aspx 页面中经常使用 ResolveUrl 函数，但解析的路径始终是相对的。我希望能够使渲染路径以常规“ [http://localhost/myproject/](http://localhost/myproject/) ”开头

如果我更改文件的层次结构，如何在不破坏任何代码的情况下实现这一点？编写一个函数并为页面上的每个目标链接调用它会不会效率低下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T21:32:47.973

`~`在解析 url 时使用。它将始终转到应用程序根目录。

例子

`~/somedirectory/default.aspx`

将解决...

`{applicationRoot}/somedirectory/default.aspx`

您将需要手动添加服务器地址：

`Request.Url.Scheme + "://" + Request.Url.Host + ":" + Request.Url.Port`

一个示例函数是

```
string ResolveAbsoluteUrl(string path)
{
    return Request.Url.Scheme + "://" + Request.Url.Host + ":" + Request.Url.Port + ResolveUrl(path);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-18T21:44:32.487

别介意伙计们，我从 Rick Strahl[的帖子](http://www.west-wind.com/Weblog/posts/154812.aspx)中在线找到了一些代码，这似乎是我可能会在我的情况下使用的东西！谢谢您的帮助

# linux - 系统范围内连续的 linux 库分析

> ID：764246
> 
> 赞同：2
> 
> 时间：2009-04-18T21:32:47.957
> 
> 标签：linux, profiling

假设我想分析系统中许多应用程序中使用的单个库的使用情况。我只接受统计资料，而不是准确的资料（但那也很好）。

我不想做的是使用分析支持重新编译每个正在运行的程序。我希望定期或按需将分析信息转储到某个文件中。如果使用应用程序名称或 pid 对统计信息进行细分，那就太好了。

现在有什么办法可以实现吗？

示例用法：使用正在运行的系统中的数据分析 glib 库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-18T21:34:10.530

看看[oprofile](http://oprofile.sourceforge.net/news/)。我认为它完全符合您的要求。

Oprofile 使用硬件计数器采样来分析代码，并且您可以自定义要在哪个计数器上采样（*例如*，如果您不想要时间配置文件，您可以在浮点指令计数器上采样并查看代码中的部分做最多的FP工作）。对于时间配置文件，速率约为每秒 2000 个样本，因此开销非常低。

生成的摘要数据会告诉您您花费大部分时间的应用程序、加载模块和符号（如果您有符号信息）。您还可以选择分别分析内核空间和用户空间，如果需要，可以使用调用路径信息。最新版本的 oprofile 甚至支持分析 JITed 代码，因此它非常全面。

# regex - 为什么正则表达式如此有争议？

> ID：764247
> 
> 赞同：216
> 
> 时间：2009-04-18T21:33:07.520
> 
> 标签：regex

在探索正则表达式（也称为 RegEx-es）时，许多人似乎将正则表达式视为圣杯。看起来如此复杂的东西 - 必须是任何问题的答案。他们倾向于认为每个问题都可以使用正则表达式来解决。

另一方面，也有很多人不惜一切代价试图避免使用正则表达式。他们试图找到一种绕过正则表达式的方法，并为此接受额外的编码，即使正则表达式会是一个更紧凑的解决方案。

为什么正则表达式被认为如此有争议？对它们的工作方式是否存在普遍的误解？还是普遍认为正则表达式通常很慢？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-04-18T21:37:32.783

我不认为人们反对正则表达式是因为它们很慢，而是因为它们很难读写，而且很难正确处理。虽然在某些情况下，正则表达式为问题提供了一种有效、紧凑的解决方案，但有时它们会被硬塞到最好使用易于阅读、可维护的代码部分代替的情况。

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2010-10-29T15:44:39.533

## 使正则表达式可维护

揭开之前被称为“正则表达式”模式的神秘面纱的一个重大进展是 Perl 的`/x`正则表达式标志——有时是`(?x)`在嵌入时编写的——它允许空格（换行、缩进）和注释。这大大提高了可读性，从而提高了可维护性。空白允许认知分块，因此您可以查看哪些组与哪些组。

现代模式现在也支持相对编号和命名的反向引用。这意味着您不再需要计算捕获组来确定您需要`$4`或`\7`. 这有助于创建可包含在其他模式中的模式。

这是一个相对编号的捕获组的示例：

```
$dupword = qr{ \b (?: ( \w+ ) (?: \s+ \g{-1} )+ ) \b }xi;
$quoted = qr{ ( ["'] ) $dupword \1 }x;

```

这是命名捕获的高级方法的示例：

```
$dupword = qr{ \b (?: (?<word> \w+ ) (?: \s+ \k<word> )+ ) \b }xi;
$quoted  = qr{ (?<quote> ["'] ) $dupword  \g{quote} }x; 
```

## 语法正则表达式

**最重要的是**，这些命名的捕获可以放在一个`(?(DEFINE)...)`块中，这样您就可以将声明与模式的单个命名元素的执行分开。这使得它们的行为更像模式中的子例程。
这种“语法正则表达式”的一个很好的例子可以在[这个答案](https://stackoverflow.com/questions/4044946/regex-to-split-html-tags/4045840#4045840)和[这个](https://stackoverflow.com/questions/4031112/regular-expression-matching/4034386#4034386)中找到。这些看起来更像是一个语法声明。

后者提醒您：

> … 确保永远不要编写线路噪声模式。你不必，也不应该。任何禁止空格、注释、子例程或字母数字标识符的编程语言都是不可维护的。所以在你的模式中使用所有这些东西。

这一点怎么强调都不为过。当然，如果你不在你的模式中使用这些东西，你通常会制造一场噩梦。但是，如果您**确实**使用它们，则不需要。

这是现代语法模式的另一个例子，这个用于解析 RFC 5322：使用 5.10.0；

```
$rfc5322 = qr{

   (?(DEFINE)

     (?<address>         (?&mailbox) | (?&group))
     (?<mailbox>         (?&name_addr) | (?&addr_spec))
     (?<name_addr>       (?&display_name)? (?&angle_addr))
     (?<angle_addr>      (?&CFWS)? < (?&addr_spec) > (?&CFWS)?)
     (?<group>           (?&display_name) : (?:(?&mailbox_list) | (?&CFWS))? ; (?&CFWS)?)
     (?<display_name>    (?&phrase))
     (?<mailbox_list>    (?&mailbox) (?: , (?&mailbox))*)

     (?<addr_spec>       (?&local_part) \@ (?&domain))
     (?<local_part>      (?&dot_atom) | (?&quoted_string))
     (?<domain>          (?&dot_atom) | (?&domain_literal))
     (?<domain_literal>  (?&CFWS)? \[ (?: (?&FWS)? (?&dcontent))* (?&FWS)?
                                   \] (?&CFWS)?)
     (?<dcontent>        (?&dtext) | (?&quoted_pair))
     (?<dtext>           (?&NO_WS_CTL) | [\x21-\x5a\x5e-\x7e])

     (?<atext>           (?&ALPHA) | (?&DIGIT) | [!#\$%&'*+-/=?^_`{|}~])
     (?<atom>            (?&CFWS)? (?&atext)+ (?&CFWS)?)
     (?<dot_atom>        (?&CFWS)? (?&dot_atom_text) (?&CFWS)?)
     (?<dot_atom_text>   (?&atext)+ (?: \. (?&atext)+)*)

     (?<text>            [\x01-\x09\x0b\x0c\x0e-\x7f])
     (?<quoted_pair>     \\ (?&text))

     (?<qtext>           (?&NO_WS_CTL) | [\x21\x23-\x5b\x5d-\x7e])
     (?<qcontent>        (?&qtext) | (?&quoted_pair))
     (?<quoted_string>   (?&CFWS)? (?&DQUOTE) (?:(?&FWS)? (?&qcontent))*
                          (?&FWS)? (?&DQUOTE) (?&CFWS)?)

     (?<word>            (?&atom) | (?&quoted_string))
     (?<phrase>          (?&word)+)

     # Folding white space
     (?<FWS>             (?: (?&WSP)* (?&CRLF))? (?&WSP)+)
     (?<ctext>           (?&NO_WS_CTL) | [\x21-\x27\x2a-\x5b\x5d-\x7e])
     (?<ccontent>        (?&ctext) | (?&quoted_pair) | (?&comment))
     (?<comment>         \( (?: (?&FWS)? (?&ccontent))* (?&FWS)? \) )
     (?<CFWS>            (?: (?&FWS)? (?&comment))*
                         (?: (?:(?&FWS)? (?&comment)) | (?&FWS)))

     # No whitespace control
     (?<NO_WS_CTL>       [\x01-\x08\x0b\x0c\x0e-\x1f\x7f])

     (?<ALPHA>           [A-Za-z])
     (?<DIGIT>           [0-9])
     (?<CRLF>            \x0d \x0a)
     (?<DQUOTE>          ")
     (?<WSP>             [\x20\x09])
   )

   (?&address)

}x; 
```

这不是很了不起——而且很精彩吗？您可以采用 BNF 风格的语法并将其直接转换为代码，而不会丢失其基本结构！

如果现代语法模式对您来说*还*不够，那么[Damian Conway 出色的`Regexp::Grammars`模块](http://search.cpan.org/search?query=Regexp%3A%3AGrammars&mode=module)提供了更简洁的语法，并具有出色的调试功能。以下是将 RFC 5322 重新转换为该模块中的模式的相同代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;
use Data::Dumper "Dumper";

my $rfc5322 = do {
    use Regexp::Grammars;    # ...the magic is lexically scoped
    qr{

    # Keep the big stick handy, just in case...
    # <debug:on>

    # Match this...
    <address>

    # As defined by these...
    <token: address>         <mailbox> | <group>
    <token: mailbox>         <name_addr> | <addr_spec>
    <token: name_addr>       <display_name>? <angle_addr>
    <token: angle_addr>      <CFWS>? \< <addr_spec> \> <CFWS>?
    <token: group>           <display_name> : (?:<mailbox_list> | <CFWS>)? ; <CFWS>?
    <token: display_name>    <phrase>
    <token: mailbox_list>    <[mailbox]> ** (,)

    <token: addr_spec>       <local_part> \@ <domain>
    <token: local_part>      <dot_atom> | <quoted_string>
    <token: domain>          <dot_atom> | <domain_literal>
    <token: domain_literal>  <CFWS>? \[ (?: <FWS>? <[dcontent]>)* <FWS>?

    <token: dcontent>        <dtext> | <quoted_pair>
    <token: dtext>           <.NO_WS_CTL> | [\x21-\x5a\x5e-\x7e]

    <token: atext>           <.ALPHA> | <.DIGIT> | [!#\$%&'*+-/=?^_`{|}~]
    <token: atom>            <.CFWS>? <.atext>+ <.CFWS>?
    <token: dot_atom>        <.CFWS>? <.dot_atom_text> <.CFWS>?
    <token: dot_atom>        <.CFWS>? <.dot_atom_text> <.CFWS>?
    <token: dot_atom_text>   <.atext>+ (?: \. <.atext>+)*

    <token: text>            [\x01-\x09\x0b\x0c\x0e-\x7f]
    <token: quoted_pair>     \\ <.text>

    <token: qtext>           <.NO_WS_CTL> | [\x21\x23-\x5b\x5d-\x7e]
    <token: qcontent>        <.qtext> | <.quoted_pair>
    <token: quoted_string>   <.CFWS>? <.DQUOTE> (?:<.FWS>? <.qcontent>)*
                             <.FWS>? <.DQUOTE> <.CFWS>?

    <token: word>            <.atom> | <.quoted_string>
    <token: phrase>          <.word>+

    # Folding white space
    <token: FWS>             (?: <.WSP>* <.CRLF>)? <.WSP>+
    <token: ctext>           <.NO_WS_CTL> | [\x21-\x27\x2a-\x5b\x5d-\x7e]
    <token: ccontent>        <.ctext> | <.quoted_pair> | <.comment>
    <token: comment>         \( (?: <.FWS>? <.ccontent>)* <.FWS>? \)
    <token: CFWS>            (?: <.FWS>? <.comment>)*
                             (?: (?:<.FWS>? <.comment>) | <.FWS>)

    # No whitespace control
    <token: NO_WS_CTL>       [\x01-\x08\x0b\x0c\x0e-\x1f\x7f]

    <token: ALPHA>           [A-Za-z]
    <token: DIGIT>           [0-9]
    <token: CRLF>            \x0d \x0a
    <token: DQUOTE>          "
    <token: WSP>             [\x20\x09]

    }x;

};

while (my $input = <>) {
    if ($input =~ $rfc5322) {
        say Dumper \%/;       # ...the parse tree of any successful match
                              # appears in this punctuation variable
    }
} 
```

[*perlre*](http://perldoc.perl.org/perlre.html)[联机帮助页中](http://perldoc.perl.org/perlre.html)[有](http://perldoc.perl.org/perlre.html)*很多好东西，但是基本正则表达式设计功能的这些显着改进绝不仅限于 Perl。实际上[，*pcrepattern*联机帮助页](http://regexkit.sourceforge.net/Documentation/pcre/pcrepattern.html)可能更容易阅读，并且涵盖了相同的领域。*

 *现代模式与你在有限自动机课上学到的原始东西几乎没有共同之处。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2009-04-18T21:40:22.837

正则表达式是一个很棒的工具，但人们认为“嘿，多么棒的工具，我会用它来做 X！” 其中 X 是其他工具更适合（通常是解析器）的东西。在需要螺丝刀问题的情况下，这是使用锤子的标准。

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2009-04-19T02:03:18.727

我认识的几乎所有经常使用正则表达式（双关语）的人都来自 Unix-ish 背景，他们使用将 RE 视为一流编程结构的工具，例如 grep、sed、awk 和 Perl。由于使用正则表达式几乎没有语法开销，因此他们的工作效率会大大提高。

相比之下，使用 RE 是外部库的语言的程序员往往不会考虑正则表达式可以带来什么。程序员的“时间成本”是如此之高，以至于 a) RE 从未作为他们培训的一部分出现，或者 b) 他们不会“思考” RE 的问题，而是更愿意依靠更熟悉的模式。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2009-04-18T22:19:08.860

正则表达式允许您以紧凑的方式编写自定义有限状态机 (FSM)，以处理输入字符串。使用正则表达式很难，至少有两个原因：

*   老式软件开发涉及大量计划、纸模型和仔细思考。正则表达式非常适合这个模型，因为要正确地编写一个有效的表达式需要大量的盯着它，可视化 FSM 的路径。

    现代软件开发人员更愿意敲定代码，并使用调试器逐步执行，以查看代码是否正确。正则表达式不能很好地支持这种工作方式。正则表达式的一次“运行”实际上是一种原子操作。在调试器中很难观察逐步执行。

*   编写一个意外接受比您预期更多的输入的正则表达式太容易了。正则表达式的值并不是真正匹配有效输入，而是**无法匹配无效输入**。对正则表达式进行“否定测试”的技术不是很先进，或者至少没有被广泛使用。

    这导致正则表达式难以阅读。仅仅通过查看一个正则表达式，就需要花费很多精力来可视化所有可能的输入，这些输入应该被拒绝，但被错误地接受了。曾经尝试调试*别人的*正则表达式代码吗？

如果今天的软件开发人员对使用正则表达式有抵抗力，我认为主要是由于这两个因素。

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2009-04-18T22:06:03.073

人们倾向于认为正则表达式很难；但那是因为他们用错了。编写不带任何注释、缩进或命名捕获的复杂单行语句。（您不会将复杂的 SQL 表达式塞进一行，没有注释、缩进或别名，对吗？）。所以是的，对于很多人来说，它们没有意义。

但是，如果您的工作与解析文本有关（几乎所有的网络应用程序......）并且您不知道正则表达式，那么您的工作就很糟糕，而且您正在浪费自己的时间和您的时间*。*雇主。那里有[很好的资源](http://www.regular-expressions.info/)可以教你关于它们的一切，你需要知道的，还有更多。

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2009-04-18T22:25:54.507

因为他们缺乏普遍接受的 IDE 中最流行的学习工具：没有 Regex Wizard。甚至没有自动完成。您必须自己编写整个代码。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2009-04-18T21:35:24.097

“[正则表达式：现在你有两个问题](http://www.codinghorror.com/blog/archives/001016.html)”是 Jeff Atwood 就此事发表的一篇很棒的文章。基本上，正则表达式是“难”的！他们可以制造新的问题。然而，它们是有效的。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2009-04-18T22:09:28.883

我不认为他们有那么有争议。

我还认为您已经回答了自己的问题，因为您指出在任何地方都使用它们（[并非所有内容都是常规语言](http://en.wikipedia.org/wiki/Regular_language) [2](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages)）或根本避免使用它们是多么愚蠢。作为程序员，您必须对正则表达式何时有助于或损害代码做出明智的决定。当面对这样的决定时，要记住的两件重要的事情是可维护性（这意味着可读性）和可扩展性。

对于那些特别讨厌它们的人，我的猜测是他们从未学会正确使用它们。我认为大多数只花几个小时学习体面教程的人都会很快弄清楚并变得流利。这是我从哪里开始的建议：

[http://docs.python.org/howto/regex](http://docs.python.org/howto/regex)

尽管该页面讨论了 Python 上下文中的正则表达式，但我发现这些信息在其他地方非常适用。有一些东西是 Python 特有的，但我相信它们被清楚地指出，并且很容易记住。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2009-04-19T11:52:31.213

正则表达式之于字符串就像算术运算符之于数字一样，我不会认为它们有争议。我认为即使是像我这样相当激进的[OO](http://en.wikipedia.org/wiki/Object-oriented_programming)活动家（他们倾向于选择其他对象而不是字符串）也很难拒绝它们。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-04-18T22:17:23.840

问题是正则表达式可能非常强大，以至于你可以用它们做一些你应该使用不同的东西的事情。

一个好的程序员应该知道在哪里使用它们，在哪里不使用它们。典型示例是解析非常规语言（请参阅[确定语言是否为常规语言](http://en.wikipedia.org/wiki/Regular_language#Deciding_whether_a_language_is_regular)）。

*我认为，如果您首先将自己限制为真正的*正则表达式（没有扩展名），那么您就不会出错。一些扩展可以让你的生活更轻松一些，但是如果你发现一些东西很难用*真正的*正则表达式来表达，这很可能表明正则表达式不是正确的工具。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-04-18T21:42:29.340

您几乎可能会问为什么 goto 是有争议的。

基本上，当你获得如此多的“明显”权力时，人们很容易在他们不是最佳选择的情况下滥用它们。例如，要求在正则表达式中解析 CSV、XML 或 HTML 的人数之多令我震惊。这是工作的错误工具。但是有些用户仍然坚持使用正则表达式。

就个人而言，我试图找到一种快乐的媒介——将正则表达式用于它们的优点，并在它们不是最佳的时候避免它们。

请注意，正则表达式仍可用于解析 CSV、XML、HTML 等。但通常不在单个正则表达式中。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2010-08-24T19:07:14.067

这是一个有趣的话题。
许多正则*表达式*爱好者似乎将公式的简洁性与效率混淆了。
最重要的是，一个需要大量思考的正则表达式会给其作者带来巨大的满足感，使其立即合法化。

但是......当性能不是问题并且您需要快速处理文本输出时，正则表达式**非常方便，例如在 Perl 中。**此外，虽然性能*是*一个问题，但人们可能不想尝试通过使用可能有错误或效率较低的自制算法来击败正则表达式库。

此外，正则表达式受到不公平批评的原因还有很多，例如

*   正则表达式效率不高，因为构建顶部的并不明显
*   一些程序员“忘记”只编译一次要多次使用的正则表达式（如 Java 中的静态模式）
*   一些程序员采用*试错*策略 - 使用正则表达式的工作更少！

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2009-04-19T09:59:49.627

I don't think "controversial" is the right word.

But I've seen tons of examples where people say "what's the regular expression I need to do such-and-such a string manipulation?" which are X-Y problems.

In other words, they've started from the assumption that a regex is what they need, but they'd be better off with a split(), a translation like perl's tr/// where characters are substituted one for the other, or just an index().

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2011-03-31T10:18:33.893

我认为学习正则表达式和维护正则表达式不受欢迎，大多数开发人员都很懒惰，或者他们中的大多数人都依赖外部库为他们做解析......他们依靠谷歌的答案，甚至在论坛上询问他们问题的完整代码。但是，在实施或修改/维护正则表达式时，它们只会失败。

有一句流行的说法“朋友不要让朋友使用正则表达式解析 HTML”

但就我而言，我已经使用正则表达式制作了完整的 HTML 解析器，我发现正则表达式在速度方面和内存方面都更擅长解析 html 字符串（如果你有一个想法，你要实现什么:)）

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-04-18T21:48:25.860

正则表达式对很多人来说是一个严重的谜团，包括我自己。它工作得很好，但它就像看一个数学方程。[尽管有人终于在http://regexlib.com/](http://regexlib.com/)上创建了各种正则表达式函数的合并位置，但我很高兴地报告。现在，如果微软只创建一个正则表达式类，它会自动执行许多常见的事情，比如消除字母或过滤日期。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-04-19T02:25:41.047

我发现正则表达式有时是无价的。当我需要做一些“模糊”搜索时，可能会替换。当数据可能变化并具有一定的随机性时。但是，当我需要进行简单的搜索和替换或检查字符串时，我不使用正则表达式。虽然我认识很多人这样做，但他们将它用于一切。这就是争议。

如果你想在墙上钉钉子，不要用锤子。是的，它会起作用，但是当你拿到锤子时，我可以在墙上放 20 个大头钉。

正则表达式应该用于它们的设计目的，而且不能少。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-04-19T01:02:46.143

虽然我认为正则表达式是必不可少的工具，但最烦人的是它们有不同的实现。语法、修饰符和——尤其是——“贪婪”的细微差别会使事情变得非常混乱，需要反复试验，有时还会产生令人费解的错误。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-11-08T06:55:17.383

体面的正则表达式系统，例如用于编译器定义的 lex 和 yacc 是好的、非常有用和干净的。在这些系统中，表达式类型是根据其他定义的。这是在 perl 和 sed 代码（等）中常见的可怕的畸形不可读的行噪声巨大的单行正则表达式是“有争议的”（垃圾）。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-08-24T18:23:44.823

我认为这是程序员中鲜为人知的技术。因此，它并没有被广泛接受。如果你有一个非技术经理来审查你的代码或审查你的工作，那么正则表达式是非常糟糕的。您将花费数小时编写一个完美的正则表达式，并且您认为他/她编写的代码行数很少，因此模块得分很少。此外，正如其他地方所说，阅读正则表达式是非常困难的任务。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2010-02-27T11:15:06.487

在某些情况下，我认为您必须使用它们。例如构建一个词法分析器。

在我看来，这是可以写正则表达式的人和不会（或几乎不）写正则表达式的人的观点。我个人认为这是一个很好的想法，例如验证表单的输入，无论是在 javascript 中警告用户，还是在服务器端语言中。

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2009-04-19T02:39:05.913

正则表达式的最佳有效和正常用法是用于电子邮件地址格式验证。

这是一个很好的应用。

我已经无数次地在 TextPad 中一次性使用正则表达式来处理平面文件、创建 csv 文件、创建 SQL 插入语句等等。

写得好的正则表达式不应该太慢。通常替代方案，例如大量调用 Replace 是慢得多的选择。还不如一口气做完。

许多情况都需要正则表达式，仅此而已。

用无害的字符替换特殊的非打印字符是另一个很好的用法。

我当然可以想象有一些代码库过度使用正则表达式而损害了可维护性。我自己从未见过。实际上，我已经被代码审查者回避了，因为我没有足够地使用正则表达式。

# coding-style - 在编码时，您在实践中最终得到了多少嵌套代码块？

> ID：764253
> 
> 赞同：4
> 
> 时间：2009-04-18T21:34:46.783
> 
> 标签：coding-style

我刚刚完成了一个函数，该函数以嵌套代码块结束，如下所示：

```
class ... {
  void Method() {
    while (...) {
      ...
      switch (...) {
        while (...) {
          switch (...) {
            if (...) {
            }
          }
        }
      }
    }
  }
} 
```

你觉得这是你日常编码工作的标准，还是当你看到这样的事情时，你会迅速尝试重新设计和分解代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T21:57:17.040

我会非常担心`switch`-within-`switch`结构。那应该“永远不会”发生。[尤其是在这样](https://stackoverflow.com/questions/550919/does-anyone-disagree-with-the-statement-using-switch-is-bad-oop-style)的问题下（“使用 switch 是不好的 OOP 风格？”）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-18T23:17:54.587

永远不会超过三个。作为我个人的哲学。但是，在某些情况下您无法做得更好。一个典型的例子是：假设你必须迭代一个 6 索引矩阵的所有元素。不是您的典型案例，但有时会发生。

所以，你可以重构出最里面的三个循环。好...你如何调用你重构的例程？

最后，您会意识到高度嵌套的循环最有利于未来的理解。当然这是特例。如果您确实有像您粘贴的那样高度嵌套的循环和开关，那么您确实有问题，您应该考虑为各个部分赋予有意义的名称，隔离它们，使用面向对象处理开关等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-18T21:36:29.323

很难对此设置任何具体限制，因为有时这只是最好的方法。然而，如果你得到了嵌套那么深的东西，特别是嵌套循环有时会给出糟糕的算法，或者在 switch 中使用 ifs，你通常可以将这些东西抽象掉。

如果我有那么深的东西，我肯定会重构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-18T23:05:39.543

有时它会以这种方式结束。我尝试注意循环的所有退出条件等等，看看我是否可以简化它们。我还尝试用多态性（在可行的情况下）等替换开关。

我还倾向于通过逻辑语句的反转（不损害可读性）使我的代码尽可能简单。

例如

而不是这样做：

```
public string TransformString(string _input)
{    
    if(!string.IsNullOrEmpty(_input))
    {
       // do work
       // etc.

       return answer;
    }

    return null;
} 
```

做这个：

```
public string TransformString(string _input)
{    
    if(string.IsNullOrEmpty(_input))
         return null;

    // do work
    // etc.

    return answer;
} 
```

它有助于防止嵌套和支撑狂热。有时最好只保留嵌套版本（例如，我不喜欢在复杂的循环体中半途点击“继续”关键字，因为它很容易搞砸并引入错误），但我通常更喜欢这种方法:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-18T21:35:58.620

我确实有时在我的代码中发现了这一点。但是当我达到这一点时，我决定是时候重构了。重构非常关键，因为它允许更简洁的代码并降低代码的明显复杂性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-24T22:14:44.037

我正在寻找代码嵌套的恐怖故事。我只是花时间重构一个在最深处有**16层嵌套的方法类。**

雪上加霜的是，整个混乱被包裹在：

```
try{
  //1527 lines of code, 16 levels deep
} catch(Exception e) {
  log.error(e.getMessage());
  throw e;
} 
```

我提取了六个实现公共接口的内部类、十几个私有方法和一个枚举。结果是代码行数减少了 500 行，冗余可以忽略不计，公共方法中只有六层嵌套。

我的经验法则代码指标是：

A) 对于超过 3 的每一层嵌套，你应该重构的概率增加 1/3

B) 对于方法中的每一屏代码，你应该重构的概率增加 1/3

C) 对于方法中的每一行重复代码，你应该重构的概率增加 1/3

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T22:21:42.100

我尽量不让它变得比这更疯狂（5/6 级）......有时它可能是不可避免的。如果我的所有文件都在同一个命名空间中，我会删除命名空间声明并在项目属性中声明它，这会减少一层。

```
namespace MyNamespace
{
  class MyClass
  {
    static void MyMethod()
    {
      try
      {
        if(...)
        {
          for(...)
          {
          }
        }
      }
      finally
      {
      }
    }
  }
} 
```

一种方法应该专注于一件事，而且只做一件事……在可能的情况下。有许多“经验法则”，有些可以 100% 的工作，但大多数在 90% 的时间都可以工作，但不能涵盖所有角度。指导方针就是这样——它们不应该把你限制在你无法完成工作的地步。

使用你的常识，如果你的代码变得不可读，你有太多的嵌套。

我尽量遵循这些准则：

*   每种方法都应该只做一件事[——Curly 定律](http://www.codinghorror.com/blog/archives/000805.html)。
*   尝试在代码块中保持最少的代码量——我更喜欢将其保持在 20 行左右，但我会说 100 行它的边界太长了。
*   如果代码开始对我不可读，其他人也将不可读，重构它。
*   尝试在一个类中保留最少的代码量——1000 行，越短越好。
*   不要牺牲良好的编码标准，除非你绝对别无选择，即你有一个最后期限，如果不走捷径就不可能满足。如果您确实必须采用这样的捷径，请添加关于您为何采用该捷径的注释，以便下一个开发人员可以看到您这样做的原因。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-18T21:51:46.993

我每天都发现这一点，但这仅仅是因为继承的代码库。

在我自己的代码中，我早就重构了，甚至使方法只调用一次来表达意图。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-18T22:01:37.500

尽量避免嵌套，因为它会增加圈复杂度，为什么不将它们放在一个类中，或者使用其他策略。

我记得我大学的一位教授说“一个函数，不应该超过 7 行”。

我牢记这一点:)

希望这有助于最好的问候！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-18T22:09:14.127

我称之为**“孤立的丑陋”。**

这*很丑*，因为开关内的开关很丑。它们可以通过一些不错的 OO 技术来避免。但它可以完成工作并且需要更少的时间来编写代码。

*隔离*是因为最好编写代码，为它编写一些测试，然后将其收起，不再查看它。

但是，是的，这样做是可以的。如果你到处都这样做可能不好。

我会更关心嵌套`while`语句的大 O 复杂性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-01T08:51:33.050

我们在一个大型“业务线”应用程序中有一个代码库，其中方法中的嵌套级别可以是 15 或更多。在具有这么多缩进的方法中遵循逻辑流程是非常困难的。

但是，历史上的一项政策是避免方法中的多次返回。但事后看来，这似乎是一个有效率的设计决定。

# java - 将 Java 源代码导入 Eclipse 以避免弄乱引用的正确方法是什么？

> ID：764256
> 
> 赞同：4
> 
> 时间：2009-04-18T21:35:53.067
> 
> 标签：java, eclipse, import

我创建了一个 java 项目，然后尝试从两个不同的项目中导入 Java 源代码。我已经为此工作了几个小时，删除并重新创建了数十次项目，以尝试协调这两个项目之间所有混乱的引用——其他人说这些引用应该可靠地协同工作。

我正在做的是使用 svn 从每个项目下载源代码。然后在 Eclipse 中使用 File-Import-File System。一旦它在 Eclipse 中，我将使用 Refactor-Move 命令将所有内容移动到同一个 src 文件夹中。这就是我得到所有红色标记的地方，表明参考文献混乱。

将 Java 源代码导入 Eclipse 以避免弄乱引用的正确方法是什么？

当然不是每个人都按照我的方式去做——否则没有人会在 Eclipse 中完成任何事情。我在这里的假设是我对 Eclipse 完全一无所知，只是不知道协调这两批兼容代码的简单方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T16:09:06.833

1.  将源码添加到项目目录
2.  右键单击项目>刷新

瞧！在那里 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-18T21:58:37.287

为什么它们必须是同一个项目？然后，您可以将其导入两个项目，并让一个项目依赖于另一个项目。或者让它们都依赖于第三个项目。如果您仍然想要一个项目，您可以为每个项目创建一个新的源文件夹，而不是尝试移动到单个源文件夹中。一个 Eclipse 项目可以有多个源文件夹。理想情况下，一旦你开始工作，你还想将 eclipse 项目（.project 文件、.settings 等）签入到 svn 中，这样其他人就可以直接将它们签出到 eclipse 中，而不必导入到新项目中每次。这将使版本控制更容易。

# objective-c - 关于代表的问题

> ID：764269
> 
> 赞同：9
> 
> 时间：2009-04-18T21:42:00.323
> 
> 标签：objective-c, cocoa

这段代码很简单，对吗？我不知道我是否应该保留通过 init 方法传入的委托。

```
@interface SomeClass : NSObject {
    SomeClassDelegate *someClassDelegate;
}
-(id)initWithDelegate:(SomeClassDelegate *)delegate;
@end

@implementation SomeClass
-(id)initWithDelegate:(SomeClassDelegate *)delegate
{
    [delegate retain]; // should I be doing this?
    someClassDelegate = delegate;
}
-(void)dealloc
{
    [delegate release]; // obviously only do  this if I DO need to retain it
    [super dealloc];
}
@end 
```

我最初的想法是否定的，但是这段代码似乎暗示了其他情况。我知道我不能依赖保留计数，但我想知道处理代表的正确方法。

```
// self's retain count is 1
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:req delegate:self];
// the retain count is now 2, did the init of URLConnection retain self? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-18T22:51:51.340

不，一般来说，您不应该保留代表。由于委托已经具有对您的对象的引用，如果您保留委托，则本质上将创建一个循环引用。此外，出于同样的原因，您可以假设您的对象将在委托被销毁之前被销毁。

查看[这些](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html) [文章](http://cocoadevcentral.com/articles/000075.php)以获取有关使用/实现委托的更多信息。

编辑：有一些例外，其他人已经指出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T03:50:38.767

正如 htw 所说，您通常不应该保留代表。但是，在多线程环境中，您通常必须保留所需的一切，即使只是方法调用的持续时间，以确保它不会在您背后失效。例如，如果（实际上并非如此）`-[NSURLConnection initWithRequest:delegate]`创建了一个新线程，该线程可能已保留（然后可能会自动释放）其参数。实际上，`NSURLConnection`这是一种特殊情况，因为它在连接期间保留其委托。

# visual-studio-2008 - VS2008 Xaml Editor 完全不稳定

> ID：764272
> 
> 赞同：3
> 
> 时间：2009-04-18T21:43:51.957
> 
> 标签：visual-studio-2008, xaml

我已经安装了我能找到的所有涉及稳定性的补丁。我在 XAML 编辑器中关闭了智能感知。我已将 XAML 设置为仅使用 XML 视图（我从不使用预览）。

VS2008 在编辑 XAML 时每小时崩溃多次。在我第一次打开 XAML 文件之前它都很好，然后它崩溃或挂起只是时间问题。

有人知道是否有任何可用的补丁吗？我简直不敢相信这是多么糟糕。由于我们不得不重新启动 Visual Studio 和/或等待确定构建是否真的 HUNG 或仍在工作……

如果没有补丁，我们到底需要做什么？我等不及 VS2010 来解决这个问题，假设它会......在这一点上，我有疑问。

请帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-18T21:47:41.917

您是否尝试过[使用源代码编辑器](http://devlicious.com/blogs/christopher_bennage/archive/2009/02/04/an-essential-tip-for-working-with-xaml.aspx)？

> 1.  在解决方案资源管理器中右键单击 XAML 文件
> 2.  选择“打开方式...”
> 3.  选择“源代码（文本）编辑器”
> 4.  点击“设为默认值”
> 5.  点击确定
> 6.  你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T15:34:10.277

您是否尝试过将其缩小到特定的投诉，然后在[http://connect.microsoft.com/visualstudio/](http://connect.microsoft.com/visualstudio/)上输入 Connect 错误？它比抱怨的效果要好得多，尤其是当您在狭窄、具体、可重现的问题上创建错误时。

由于我怀疑您会产生许多此类错误，请将它们全部发布在这里，作为对您问题的编辑，以便我们都可以对它们进行投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T22:41:50.897

如果不使用设计器，可以将 .xaml 扩展名映射到更加稳定的 XML 编辑器。您可以在选项窗格中执行此操作。你唯一失去的是 Intellisense，但我发现它非常值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T22:50:14.900

您是否尝试过使用 Expression Blend 编辑您的 XAML？它比VS容易得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-18T22:04:57.350

如果您对视觉工作室的性能不满意，您可以随时尝试Sharpdevelop。Sharpdevelop 没有 xaml 的可视化设计器，但编辑器相当稳定。Kaxaml 也是 xaml 编辑的不错选择，因为它具有所见即所得。

# php - php全局变量修饰符不起作用

> ID：764274
> 
> 赞同：14
> 
> 时间：2009-04-18T21:45:28.207
> 
> 标签：php, global, modifier

我正在使用全局修饰符的基本 php 示例，它对我不起作用：-|

```
$a = 1;
$b = 2;

function Sum()
{
    global $a, $b;

    $b = $a + $b;
} 

Sum();
echo "***: ".$b; 
```

结果如下... $ ***: 2

php.ini 上是否有任何可能影响此的参数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-13T21:12:29.517

我也遇到了你的问题。当我使用框架 (Yii) 时，我并没有完全意识到我的代码确实嵌套在函数内部，因此`global`没有按预期运行（正如 omadmedia 和其他人所解释的那样）。

我的解决方案非常简单：

```
global $a;
global $b;
$a = 1;
$b = 2;

function Sum()
{
    global $a, $b;

    $b = $a + $b;
} 

Sum();
echo "***: ".$b; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-01-09T13:32:06.540

信不信由你，我也得到了答案：2。这意味着确实存在一些全局无法正常工作的情况。

尝试找到原因：似乎如果您有一个函数并将 OP 的代码（这是一个 php.net 示例）放入该函数中，您将得到答案 2。这有点奇怪，并且在某种程度上是有道理的。 ..

（我在 Win XP 的 Apache 2.2.8 下使用 PHP 5.2.5）

LE：我的解决方案好的，解决了这个问题：当你在第二个函数中使用 global 时，你显然会得到超全局变量，每个人都可以使用这些变量（即在任何函数之外声明），但是因为 $a 和 $b 在第一个函数中声明，它们不属于该范围，并且不适用于第二个功能。我对解决方案的猜测是在第二个函数之外，也就是在第一个函数内部声明 $a 和 $b 全局。！！请注意，由于各种原因，第一个可能并不那么明显，例如您的文件（仅包含第二个函数）被包含在不同文件中不同函数主体的某处。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-31T05:53:32.607

As @AgelessEssence answered, global keyword doesn't work if you have a nested function. It is obvious in his example. However, if it is not clear if a file is included. Here is the example.

```
//a.php
function f() {
    require_once('./a_inc.php');
}

f();

//a_inc.php
$a = 12;

function g() {
    global $a;

    var_dump($a);
}

g();

//result
null 
```

In the code above, $a looks like a global variable. Actually, it is not because it is included in the function f() in a.php and $a is part of function f().

So, when your global keyword doesn't work, check whether it is included in a function. As the solution for this problem well explained in other answers, so I didn't add it here.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-19T20:06:18.377

您上面的示例代码对我有用。但您也可以使用[$GLOBALS](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)超变量。

```
function Sum()
{
    $a = $GLOBALS["a"];
    $b =& $GLOBALS["b"];
    $b = $a + $b;
} 
```

如果您可以提供帮助，则不应使用全局变量。有更好的方法来制作你的函数。使用[参数（参数）](http://php.net/manual/en/functions.arguments.php)（可能[通过](http://php.net/manual/en/language.references.pass.php) [引用](http://php.net/manual/en/language.references.php)传递）并[返回一个值](http://php.net/manual/en/functions.returning-values.php)。

```
/**
 * Calculate the sum of the parameters
 * @param int|float $a one or more parameter
 * @param int|float $a, ... 
 * @return int|float
 */
function sum($a)
{
    $args = func_get_args();
    return array_sum($args);
}

$a = 1;
$b = 2;

$b = sum($a, $b); 
```

使用[PHPDOC](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.pkg.html)，您无需阅读代码即可了解您的函数多年后的功能。使用好的[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)，您还可以在编写函数时获得解释和参数顺序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-25T14:00:23.477

我和你有同样的**问题**，终于找到了答案

**工作代码**/ [DEMO](http://codepad.org/JW4WM5S9)

```
$a=1;

function showA() {

    global $a;
    var_export($a);  

} 

showA(); // outputs "1" 
```

**非工作代码**/[演示](http://codepad.org/UuIhKCPO)

```
function encapsulation() {

    $a=1;

    function showA() {

        global $a;
        var_export($a);  

    };

    showA();

}  

encapsulation(); // outputs "NULL" 
```

如您所见，在嵌套函数定义中使用*global 关键字时会出现问题*

更多信息：[php.net/manual/en/language.variables.scope.php#92868](http://php.net/manual/en/language.variables.scope.php#92868)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-19T20:20:41.977

我唯一能想象到的错误是，如果您在首先调用函数后在全局范围内分配变量。也就是说，您的函数实际上是在声明变量，然后您只需在其他地方覆盖它们。例如，*调用*`Sum()`然后执行, 。*`$a=1``$b=2`*

 *# svn - 将特定目录从一个 SVN 存储库分支到自己的存储库

> ID：764277
> 
> 赞同：1
> 
> 时间：2009-04-18T21:47:25.257
> 
> 标签：svn

所以这是我目前拥有的一个例子

```
RepoA
- trunk
-- directory_a
-- directory_b
-- directory_c 
```

我需要将 directory_b 从 RepoA 中取出并放入它自己的存储库 (RepoB)。

```
RepoA
- trunk
-- directory_a
-- directory_c

RepoB
- trunk
-- directory_b 
```

最好的方法是将主 RepoA SVN 目录克隆到 RepoB，然后从 RepoA 中删除 directory_b 并从 RepoB 中删除目录 directory_a 和 directory_c？

还是有其他更优雅的方法从 RepoA 中提取 directory_b 并将其放入自己的存储库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T21:53:24.087

如果您想在新存储库中保留 directory_b 的历史记录，那么您可以这样做：

*   转储现有存储库
*   [使用svndumpfilter](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svndumpfilter)过滤转储，使其仅包含 directory_b
*   将转储加载到新存储库中
*   在第一个存储库中，删除 directory_b

如果您不需要新存储库中的历史记录，则可以从现有存储库导出 directory_b 并将生成的文件夹导入新存储库。

当您说“克隆”时，您的意思是复制存储库吗？我不建议复制存储库，因为否则（AFAIK）您将拥有两个具有相同 ID 的存储库（这可能不是您想要的）。

# api - JIRA soap API怎么能没有这个方法？

> ID：764282
> 
> 赞同：8
> 
> 时间：2009-04-18T21:49:40.040
> 
> 标签：api, soap, jira

我希望能够获得给定的问题列表：

**项目名称**和**发布版本**

这似乎是一个基本的 JIRA soap API 101 请求

看来，查看文档：

[http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/index.html?com/atlassian/jira/rpc/soap/JiraSoapService.html](http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/index.html?com/atlassian/jira/rpc/soap/JiraSoapService.html)

您可以通过以下方式解决问题：

1.  筛选
2.  搜索词
3.  搜索词和项目

但不是上面的。这是一个完全的疏忽还是我遗漏了什么

我希望看到这样的东西：

```
RemoteIssue[] issues = _soapService.getIssues(string project_, string version_) 
```

有什么帮助吗？

* * *

**更新**：我看到 JIRA 4.0 已经发布，但如果 API 已更改为支持上述请求，我找不到任何文档。任何人都可以找到此链接来回答这些问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T23:36:30.610

使用当前的 JIRA API 是不可能的。他们可能会在 JIRA 4.0 中实现。

在 JIRA 客户端中，我们通过在 URL 中请求带有搜索条件的 IssueNavigator.jspa（查找问题选项卡）并请求 RSS 输出来解决此问题；然后解析RSS。

我在这个网络研讨会上解释了远程处理 JIRA 的一些复杂性，包括搜索：http: [//blogs.atlassian.com/news/2008/11/killer_jira_cli.html](http://blogs.atlassian.com/news/2008/11/killer_jira_cli.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-12-07T13:45:16.350

在 JIRA 4 中，您可以将 JIRA 查询语言与 SOAP 方法[getIssuesFromJqlSearch 一起使用](http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/index.html?com/atlassian/jira/rpc/soap/JiraSoapService.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-03-20T22:32:42.880

由于无法很快升级到 Jira 4 并且有类似的要求，我通过搜索词和项目检索了问题，混合了一个似乎可以用作通配符的“搜索词”：“- 0 1 2 3 4 5 6 7 8 9"。由于所有生成的问题键都是 XXX-YYY 的形式，其中 Y 是一个数字，因此应该可以找到所有问题，尽管对于大型项目可能效率不高。然后，您必须遍历结果检查版本号。

不漂亮 - 我还没有彻底测试过 - 但它似乎有效。

雷神

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-25T19:51:58.340

[可以使用RPC Endpoint Plugin Module](http://confluence.atlassian.com/display/JIRA/RPC+Endpoint+Plugin+Module)编写一个 JIRA 插件以通过 SOAP 公开所需的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-28T20:00:44.820

我相信您可以制作一个具有您想要的特征的过滤器 - 例如项目名称和发布版本 - 然后使用soap API获取基于该过滤器的列表，将您想要的项目名称和发布版本传递给它。我没有这个副手的例子，但我知道这是我们的应用程序所做的。缺点是你必须先手动创建一个过滤器，然后在某处硬编码它的 ID 并假设它存在，但如果你愿意变得那么“丑陋”。它应该适合你。

-卡尔

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-04T10:34:24.420

关于 JIRA 4.0 中提供的新方法，Atlassian JIRA 上有一些评论 [http://jira.atlassian.com/browse/JRA-17509](http://jira.atlassian.com/browse/JRA-17509)

另一个问题表明 SOAP api 在优先级列表中不是很高。根据 JRA-7614，Atlassian 建议您自己进行修改。

我还需要一个更详细的 SOAP API（例如问题链接，...）。任何想贡献/帮助完成它的人，这样我们就可以避免做“HTML屏幕抓取”......（@sereda，谢谢你的视频）

弗朗西斯

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-19T09:51:18.510

至于 TimeTracking （对不起，想在 seredas 答案中添加评论，但似乎我没有足够的声誉）

我们有 Jira 4.1.2 运行，这有效（python2.6 使用 suds）：

```
>>> client.service.getWorklogs(auth,"PROJ-650")
[(RemoteWorklogImpl){
   author = "philipp"
   comment = None
   created = 2010-07-21 12:46:34
   groupLevel = None
   id = "12651"
   roleLevelId = None
   startDate = 2010-07-21 12:46:00
   timeSpent = "10 minutes"
   timeSpentInSeconds = 600
   updateAuthor = "philipp"
   updated = 2010-07-21 12:46:34
 }] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-03-28T17:25:48.510

在尝试不同的选项时，我们发现了以下从 Jira 获取项目票证的解决方案：

```
soapService.getIssuesFromJqlSearch(token, jql, pageSize); 
```

jql是这样的

```
issueKey > ":keyOfTheLastIssueReceived" and project = ":projectCode" order by issueKey 
```

您需要按 issueKey 排序，因为此方法仅返回问题的“pageSize”并按 issueKey 过滤以前进到下一个“页面”（从上一个“页面”结束的地方开始）

我认为您将能够通过将 a 添加`fixVersion = ":requiredVersion"`到 jql 来获得所需的内容。

# firefox - 火狐版tidy

> ID：764284
> 
> 赞同：0
> 
> 时间：2009-04-18T21:50:16.277
> 
> 标签：firefox, tidy

我正在寻找一个二进制文件，它在标准输入上接受一个 html 字符串，并吐出一个表示 DOM 的格式良好的 xml 字符串。基本上“整洁”，但使用 FireFox。

任何想法我应该挂钩到 FF 源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-30T18:56:40.550

源代码中包含多个渲染测试。其中一些与我正在寻找的“接近”，但必须稍微修改挂钩。但作为起点，渲染测试是最好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T21:51:20.020

你见过`Firebug`HTML 标签吗？还是`Html Validator`插件？

# asp.net-mvc - ASP.NET MVC 不调用 global.asax' EndRequest

> ID：764298
> 
> 赞同：16
> 
> 时间：2009-04-18T21:56:45.200
> 
> 标签：asp.net-mvc, global-asax

我试图在每个请求结束时执行一些操作。我更改了创建新项目时生成的 Application_Start() 以进行测试：

```
protected void Application_Start()
{
    EndRequest += (s, e) =>
    {
        Console.Write("fghfgh");
    };
    RegisterRoutes(RouteTable.Routes);
} 
```

不会调用 lambda。任何想法为什么？

编辑：我看到他们在 SharpArch [ [http://code.google.com/p/sharp-architecture/]](http://code.google.com/p/sharp-architecture/])中做类似的事情并且它确实在那里工作......不，我不想使用 HttpModule .

edit2：我发现的唯一解决方法是将 Application_EndRequest 与 global.asax 的私有静态成员结合使用：

```
private static WebSessionStorage wss;
protected void Application_Start()
{
    //...
    wss = new WebSessionStorage(this);
    //...
}

protected void Application_EndRequest(object sender, EventArgs e)
{
    wss.EndRequest(sender, e);
} 
```

wss 必须是私有的，因为看起来 Application_EndRequest 是使用不同的实例对象（this）调用的。这也可能是我的事件（如开头所述）没有被调用的原因。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-18T22:00:50.323

我通常这样做：

```
protected void Application_EndRequest(object sender, EventArgs e)
{
} 
```

这按预期工作。虽然不知道这个事件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-01-02T22:05:03.090

由 global.asax 文件表示的 HttpApplication 实例是一个仅表示第*一个*HttpApplication 对象的实例。不保证此 HttpApplication 实例将用于任何其他请求。

您需要覆盖 global.asax 中的 Init() 方法，并在*该*方法中连接您想要的任何事件：

```
public override void Init() {
    base.Init();

    EndRequest += MyEventHandler;
} 
```

有关 HttpApplication 对象的更多信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/a0xez8f2(VS.71).aspx)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-18T22:48:17.090

您最好的选择是在 HttpModule 中执行此操作。我使用 HttpModule 来管理 MVC 应用程序中的 NHibernate 会话，它运行良好。在开始请求中，我将 sessionFactory 绑定到 ManagedWebSessionContext（在 NHibernate 中但相当无证），然后在结束请求中我提交任何事务并取消绑定 sessionFactory。

我认为将它分成一个 HttpModule 也更干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T18:49:45.873

对于 MVC.net，您需要添加。

```
protected void Application_EndRequest()
{
  Debug.WriteLine("End Request");
} 
```

# windows - 主文件表清理实用程序？

> ID：764304
> 
> 赞同：5
> 
> 时间：2009-04-18T21:58:12.797
> 
> 标签：windows, filesystems, ntfs, ntfs-mft

谁能推荐一个[MFT](http://www.pcguide.com/ref/hdd/file/ntfs/archMFT-c.html)清理工具？我想在我的 MFT 中将曾经存在但已被删除的文件的条目恢复为“原始”状态，并将条目归零。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-21T19:32:51.887

[Hal Berghel 和 David Hoelzer 的这篇论文](http://www.berghel.net/col-edit/digital_village/aug-06/dv_8-06.php)列出了一大堆声称可以安全擦除文件的产品。MFT 清洁是其中一些功能的特点。该论文的结论是，只有一种产品[Evidence Eliminator](http://www.evidence-eliminator.com/)实际上确实正确地清理了 MFT。

PGP Corp[在此](http://gcn.com/blogs/tech-blog/2006/09/pgp-challenges-disk-wiping-study.aspx)回应对其自有产品 PGP Shred 的批评。显然，它有一个高级选项“擦除 NTFS 内部数据结构”，它将清理 MFT，尽管默认情况下未启用此选项。

我自己使用过[PGP Shred](http://www.pgp.com/downloads/desktoptrial/desktoptrial2.html)，所以在某种程度上我可以推荐它，但我承认我从未检查过 MFT 擦除功能是否真的像描述的那样工作。

显然，供应商有时会夸大其软件的功能，因此您的里程可能会有所不同。如果正确擦除 MFT 条目对您来说真的很重要，您可能希望在擦除后对磁盘运行磁盘取证工具 - 有关如何执行此操作的一些想法在 Berghel 和 Hoelzer 论文中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T08:06:37.760

> 嗯。问题是错误的。我的意思是在使用中的卷上，MFT 中剩余的条目，从曾经存在但现在消失的文件中，这些条目被清除。

这听起来很像您要求的程序将 MFT 中当前不代表实际文件的部分归零。我要在这里冒个险，说没有公司会用棍子碰那个人。

*   NTFS 的文档记录最多
*   NTFS 是一个移动的目标，而 MFT 是那些“放手”的领域之一，可能会在没有通知的情况下发生变化
*   覆盖此块可能未使用的区域对普通用户的好处为零
*   将“自由”空间归零意味着将你认为微软没有用于任何重要事情的每一点都删除，充其量是一个微不足道的前景。
*   此操作中的错误（这很可能）意味着最好的情况是丢失文件，最坏的情况是丢失整个文件系统

换句话说，该项目的建造成本高昂且耗时，其安全性充满不确定性，并且不会为客户提供足够的（任何？）好处来说服他们使用它。

我无法想象这样的事情存在，我也不希望它永远存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-14T21:45:59.087

我为这个问题找到了一个令人满意的解决方案，如果你喜欢，请检查并测试：

Paragon HD Defrag 是 Paragon HD manager 2010 的一部分，使用该产品的引导光盘，具有截断 MFT 的功能或选项。该实用程序会切断任何多余的未使用的 mft 条目。（好的）

这些天也有 Piriform CCleaner。它声称会覆盖 mft 条目。它会生成大量称为 zzzz.zzzz 变体的文件

我建议使用 CCleaner 生成 8000 个额外的 mft 条目，然后使用 Paragon HD Manager 启动 CD 截断 mft，然后重新启动并 shift+删除 zzz.zzz 文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-12T12:37:07.307

我尝试[了 ccleaner](https://www.piriform.com/ccleaner)和其他工具来清零未使用的 MFT 引用。

然后我用十六进制编辑器搜索我之前删除的文件 - 并找到了它们。

然后我在重新安装 Windows 7 时执行了完整格式，再次运行十六进制编辑器，它们仍然存在。完全格式化并重新安装并没有覆盖 MFT，我感到非常震惊。

我摆脱一切的唯一方法是使用[DBAN](http://www.dban.org/)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-27T16:39:58.260

您可以使用[SDelete](http://technet.microsoft.com/en-us/sysinternals/bb897443.aspx)将剩余的可用空间归零

# iphone - iPhone SDK：如何存储在触摸事件期间生成的坐标对？

> ID：764305
> 
> 赞同：0
> 
> 时间：2009-04-18T21:58:25.383
> 
> 标签：iphone, touchscreen, multi-touch

我正在尝试为 iPhone 创建一个旋转对象。我让它计算所有的三角函数。问题是，对于我的项目，每次手指围绕中心点拖动超过 30 度时，我都需要让程序重置 x 和 y。每当我将变量链接到 touchesMoved 函数中当前位置的 x 和 y 时，它们会永久链接并随着拖动事件不断变化，而不是保持不变并每 30 度更新一次。有没有办法静态存储 x 和 y？

Kailoa Kadano，已经这样做了，它仍然链接和更新。代码：currentpoint = [touch locationInView:self.view]; 当起点和当前点之间的角度 >= 30 度设置 altpoint = currentpoint 时，我使用 CGPointMake 做到了，但它没有用。altpoint 不断更新到 currentpoint

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T23:17:50.483

使用 CGPoint 结构。

CGPoint 点 = CGPointMake(1,2); point.x // 1 point.y // 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-12T15:57:09.683

请务必在您的 classes .h 文件中声明 CGPoint startPoint，然后在您的 touchesBegan 实现中更新该值：

```
startPoint = CGPointMake(point1.x, point1.y); 
```

正如上面的 Kailoa 所指定的。然后，在您的 touchesMoved 实现中，您可以检查新点是否超过 30 度分离，如果是，则更新 startPoint。

如果以上不是您要查找的内容，请发布更多详细信息/示例代码。

# c - 什么限制了 c 中嵌套循环的数量？

> ID：764307
> 
> 赞同：1
> 
> 时间：2009-04-18T22:00:48.407
> 
> 标签：c, loops

**编辑：**对于那些正在寻找问题答案的人，标准限制了编译时嵌套循环的数量。在运行时，这是一个不同的问题，因为唯一的限制是程序段的大小。

**已解决：**我在构建过程中看得太早了。c 文件得到进一步的预处理。进行后续步骤。

我对通过 perl 从应用规则生成发音的语言生成的 c 代码有疑问。本质上，输入是一个巨大的发音规则例外字典。该代码充满了 goto，并且一直运行到异常字典之一达到 23K 规则。

该代码基本上是不可读的，但在删除似乎是第 6200 个嵌套循环后，我设法使 c 代码编译：

```
for (dictionionary1=seed1;dicitonary1<limit1;dictionary1++)
{
    for (dictionionary2=seed2;dicitonary2<limit2;dictionary2++)
    {
           /* .... */
        for (dictionionary6199=seed6199;dicitonary6199<limit6199;dictionary6199++)
        {
               /* two hundred more removed adding one makes it not compile */

        }

    }
} 
```

gcc 和 xlC 都能够处理这些，但 aCC 3.73（在 H11.23 PA RISC 上）正在呕吐。

```
Compiling /home/ojblass/exception_dictionary_a.c...
Loading the kernel...
Pid 18324 killed due to text modification or page I/O error
/bin/ksh: 28004 Bus error(coredump)
*** Error exit code 138 
```

我找到了这个[链接](http://forums11.itrc.hp.com/service/forums/questionanswer.do?threadId=378529)并尝试了许多建议的修复程序但没有成功。

由于遗留原因，我必须为 32 位编译（它使用一个 32 位库，我没有 64 位对应的库）。

```
maxdsiz = 256 MB (x10000000) tried up to 4 GB
maxssiz = 16 MB (x1000000) tried up to 100MB
maxtsiz = 256 MB (x10000000) tried up to 1 GB 
```

关于编译器设置的任何建议或 aCC 3.73 文档的良好链接？我淹没在搜索结果中。

我编写了一个解决方法，将字典分成两部分，生成 dictionary_an.c 和 dictionary_az.c。我不得不触摸一些我感觉不舒服的核心逻辑才能实现这一点，我希望能回到原来的配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-18T22:14:27.170

哇——我知道这对你没有帮助，但是嵌套 6199 层深度远远超过了 C 或 C++ 的要求（C90 为 15，C99 为 127，C++ 为 256）。

我很好奇这个东西运行得有多好——如果你的字典是任意大小的，循环迭代的次数一定是天文数字。假设每个字典大小为 10：(10 ^ 6199) 是一个相当大的数字。即使每个词典只有 2 个项目，(2 ^ 6199) 也令人印象深刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T22:09:04.547

> Pid 18324 由于文本修改或页面 I/O 错误而终止

对我来说，这听起来像是一个 stackoverflow^Wmemory 错误。这意味着它是编译器中的一个错误。我不会说 HPUX，所以我可能错了，但是向 HP 开票可能会产生更多信息。

# django - 在 Django 项目中，python 类的最佳位置是什么？

> ID：764311
> 
> 赞同：12
> 
> 时间：2009-04-18T22:02:07.013
> 
> 标签：django

这听起来可能微不足道，但我想知道我应该将我的 python 类（而不是 from `Model`）放在哪里？

我的意思是，我的模型类是在其中定义的，`myapp/models.py`但我想使用联合提要框架来编写一个简单的提要。[文档](http://docs.djangoproject.com/en/dev/ref/contrib/syndication/)说我需要编写一个 Feed 类但是......我应该把代码放在哪里？哪个路径和文件？我想坚持使用默认的 Django 目录结构。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-18T22:14:00.823

你可以随意把它放在你想要的地方。

例子：

```
project
  myapp 
     views.py
     models.py
     feeds.py 
```

然后，您可以使用 import 导入您的提要模块。

从 project.myapp.feeds 导入 *

当您处理大量文件时，制作目录会更好。例如：

```
project
    myapp
      models.py
      views.py
      extras
        feeds.py
        sitemaps.py 
```

我建议您阅读以下内容：[Python 模块：包](http://docs.python.org/tutorial/modules.html#packages)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T22:45:22.837

对于提要相关的类，通常将它们放在`feeds`适当的应用程序模块中调用的模块中。例如，如果您有一个带有 RSS 提要的博客，您的项目结构将如下所示：

```
project/
    blog/
        __init__.py
        feeds.py
        models.py
        views.py 
```

*一般来说*，对于其他非模型类，您可以将它们放在您想要的任何位置（如 Andrea Di Persio 所述）。通常，您将它们作为模块放置在适当的应用程序包中。对于通用类，我通常创建一个名为的包`lib`，其中包含通用类和函数，如下所示：

```
project/
    blog/
        __init__.py
        feeds.py
        models.py
        other_stuff.py
        views.py
    lib/
        __init__.py
        things.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T20:20:06.743

```
Models.py 
```

是您上课的最佳场所，因为模型可以访问存储在数据库中的数据。

# python - 如何从 .htaccess 修改 sys.path 以允许 mod_python 看到 Django？

> ID：764312
> 
> 赞同：4
> 
> 时间：2009-04-18T22:02:45.750
> 
> 标签：python, django, apache, .htaccess, mod-python

我正在考虑托管 Django 站点的主机安装了 mod_python，但没有 Django。Django 的 INSTALL 文件表明我可以简单地将 django 目录复制到 Python 的 site-packages 目录来安装 Django，所以我怀疑可以通过修改 sys.config 来配置 Python / mod_python 以在其他地方（即我的用户空间）查找它。路径，但我不知道如何从 .htaccess 或 mod_python 更改它。

**如何修改`sys.path`from`.htaccess`以允许 mod_python 看到 Django？**

PS 我只能通过 FTP 访问该站点（即没有 shell 访问）。我意识到这听起来像是我应该只是切换主机，但我有令人信服的理由来完成这项工作，所以我至少会尝试一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-18T22:22:26.887

根据 Django 的[票 #2255](http://code.djangoproject.com/ticket/2255)，您需要对 httpd.conf 的管理员访问权限才能将 Django 与 mod_python 一起使用，而这不会改变，因此您可能会陷入困境。要回答如何修改`sys.path`from的基本问题`.htaccess`，您可以使用 中的[PythonPath](http://www.modpython.org/live/current/doc-html/dir-other-pp.html)指令`.htaccess`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T22:20:16.097

[PythonPath](http://www.modpython.org/live/current/doc-html/dir-other-pp.html)设置是您正在寻找的吗？我没有用 Django 尝试过，但我认为它应该为你完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T03:15:58.570

您使用 mod_python 错误。它从未打算为 python web 应用程序提供服务。您应该为此使用 WSGI……或者至少是 FastCGI。

# opengl - 旋转的四元数数学？

> ID：764313
> 
> 赞同：8
> 
> 时间：2009-04-18T22:02:55.593
> 
> 标签：opengl, graphics, 3d, rotation, quaternions

我正在`gluDisk()`我的场景中绘制一个平面磁盘。`gluDisk()`绘制面向正 Z 轴的磁盘，但我希望它面向我拥有的任意法线。
显然我需要用它`glRotate()`来让磁盘正确面对，但应该是什么旋转？我记得这可以使用四元数计算，但我似乎不记得数学。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-18T22:48:55.577

解决方案应该非常简单，并且不需要四分位数。

从 Normal1 到 Normal2 的旋转轴必须与两者正交，因此只需取它们的**向量 cross-product**。

旋转量很容易从它们的**点积**中推导出来。这个值是|A|.|B|.cos(theta)，但是由于两个法向量应该被归一化它会得到cos(theta)，所以只需取反余弦即可得到旋转量。

结果向量和角度是所需的参数`glRotate()`- 无需自己计算实际的旋转矩阵。

ps 不要忘记`glRotate()`需要以度为单位的角度，但正常的 C 三角函数以弧度为单位工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-18T22:39:18.343

绕任意轴旋转：给定角度 r（以弧度表示）和单位向量 u = ai + bj + ck 或 [a,b,c]，定义：

```
q0 = cos(r/2)  
q1 = sin(r/2) a   
q2 = sin(r/2) b  
q3 = sin(r/2) c 
```

并从这些值构造旋转矩阵：

```
 ( q0^2+q1^2 - q2^2 - q3^2 | 2*(q1*q2 - q0*q3)           | 2*(q1*q3 + q0*q2)         )
Q =( 2*(q2*q1 + q0*q3)       | (q0^2 - q1^2 + q2^2 - q3^2) | 2*(q2*q3 - q0*q1)         )
   ( 2*(q3*q1 - q0*q2)       | 2*(q3*q2 + q0*q1)           | q0^2 - q1^2 - q2^2 + q3^2 ) 
```

要找到你需要做的旋转，你可以计算当前向量和目标向量之间的叉积。您将获得正交向量（这将是您创建四元数的旋转向量），并且该向量的长度是您必须补偿的角度的正弦值，以便起始向量和目标向量重叠。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-18T22:21:03.707

四元数描述围绕轴的旋转。`<w,x,y,z>`将围绕轴旋转`<x,y,z>`一些量，具体取决于`w`向量的大小和大小之间的平衡。

```
<cos θ/2, x*sin θ/2, y*sin θ/2, z*sin θ/2>, where |<x, y, z>| = 1 
```

例如，将其旋转为面向正 Y 轴，您需要将其围绕 X 轴旋转 90°。向量是`<0, 1, 0>`，四元数是`<cos 90°, 0, sin 90°, 0>`= `<0, 0, 1, 0>`。

要将图形从面向正 Z 轴旋转到面向矢量`<x,y,z>`，您需要找到旋转矢量和旋转角度。要找到旋转轴，您可以取当前向量的叉积，以及您想要的位置。

如果它面向正 Z 轴，则当前向量为`<0, 0, 1>`。如果您希望它面向`<x,y,z>`，则旋转轴为`<0, 0, 1> x <x, y, z> = <-y, x, 0>`，角度为`arctan(sqrt(x^2+y^2),z)`。四元数变成

```
<cos(θ/2), -y*sin(θ/2), x*sin(θ/2), 0>, where θ = arctan(sqrt(x^2+y^2), z) 
```

# applescript - 从 QuickTime 导出的 AppleScript：无法将其导出为 .mov 而不是 .mp4

> ID：764325
> 
> 赞同：2
> 
> 时间：2009-04-18T22:09:13.317
> 
> 标签：applescript, quicktime

我需要将一堆大的.avis 导出/压缩到.movs。

我找到了下面的动作脚本（取自[http://ldopa.net/2008/05/23/batch-export-for-quicktime-pro/](http://ldopa.net/2008/05/23/batch-export-for-quicktime-pro/)）来做到这一点。

它成功地从桌面上名为“Input”的文件夹中获取视频，并将它们导出到桌面上名为“Export”的文件夹中。

唯一的问题是，它没有导出我在 Quicktime 中使用的“最新设置”。此外，它将其导出为 .mp4 而不是 .mov。

注意：原始脚本确实说：

```
export front document to output_file as MPEG-4 
```

但我将其更改为：

```
export front document to output_file as QuickTime movie 
```

它仍然以 mpeg-4 格式导出。

完整脚本：

```
with timeout of 86400 seconds

    display dialog "Before beginning batch processing, make sure QuickTime Player is set to the desired export settings, and all videos to be processed are in a folder named ‘Input’ on the desktop." with icon note

    tell application "Finder"
        set the startup_disk to the name of the startup disk
    end tell

    set user to do shell script "whoami"
    set input_folder_name to "Input"
    set input_folder to startup_disk & ":Users:" & user & ":Desktop:" & input_folder_name & ":"
    set user_desktop to startup_disk & ":Users:" & user & ":Desktop:"
    set output_folder to startup_disk & ":Users:" & user & ":Desktop:Output:"
    set file_extension to "_export.mp4"

    try
        tell application "Finder"
            make new folder at user_desktop with properties {name:"Output"}
        end tell
    end try

    try
        set the_folder_list to list folder input_folder without invisibles
        repeat with x from 1 to count of the_folder_list
            set the_file to input_folder & item x of the_folder_list
            set output_file to output_folder & item x of the_folder_list & file_extension
            tell application "QuickTime Player"
                activate
                open the_file
                export front document to output_file as QuickTime movie using most recent settings with replacing
                close front document
            end tell
        end repeat
    on error
        display dialog "This script requires a folder named ‘" & input_folder_name & "‘ located on the desktop." with icon stop
    end try

    beep

end timeout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T06:21:47.030

只是一个快速的镜头，但您可以尝试更改以下行

```
set file_extension to "_export.mp4" 
```

至

```
set file_extension to "_export.mov" 
```

不知道这是否会起作用，但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-23T18:40:47.677

如果您想要比仅使用以前的设置更好的控制，您可以保存导出设置。使用您想要的设置设置导出，然后使用类似

```
tell quicktime player
    tell movie 1
        save export settings for Quick Time Movie to mysettingsfile--or whatever format you exported to
    end tell
end tell 
```

我不知道为什么你必须指定一个文档，而不是应用程序，但字典中就是这样。

* * *

您还可以使用诸如[MPEG Streamclip](http://www.squared5.com/)（免费）或[ffmpeg](http://stephenjungels.com/jungels.net/articles/ffmpeg-howto.html)（FOSS，仅命令行，但确实存在 GUI）之类的程序来做同样的事情。MPEG Streamclip 带有一个批处理列表功能，几乎可以将任何内容转换为其他任何内容。省去你重新发明轮子的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T11:46:42.083

您应该使用组合。

将 file_extension 更改为 .mov（如 Bjoern 所说）并将 MPEG-4 更改为 Quicktime Movie。

您的更改会将电影导出为 MOV 文件，但不会更改文件扩展名。（如果您尝试使用仅限 MOV 的播放器打开它，它应该能够播放电影）

干杯，

# c++ - 确定哪个编译器构建了 Win32 PE

> ID：764329
> 
> 赞同：10
> 
> 时间：2009-04-18T22:10:45.463
> 
> 标签：c++, c, compiler-construction, executable, disassembly

如何确定使用哪个 C 或 C++ 编译器来构建特定的 Windows 可执行文件或 DLL？一些编译器在最终的可执行文件中留下了版本字符串，但这在 Windows 上似乎比在 Linux 上更罕见。

具体来说，我有兴趣区分 Visual C++ 和各种 MinGW 编译器（通常从函数签名相当容易），然后区分 Visual C++ 版本（6、2002/2003、2005、2008；更难做到）。有没有一种工具可以以半可靠的方式进行区分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-18T22:43:37.820

区分 VC 版本的提示来源之一是链接的特定 C 运行时库。由于默认情况是（至少在现代版本中）链接到 DLL，所以这很容易做到。实用程序[Dependency Walker](http://www.dependencywalker.com/)对于验证您是否知道真正加载了哪些 DLL 几乎是必不可少的，它会告诉您正在使用哪个 C 运行时 DLL。虽然 Dependency Walker 包含在 Microsoft Platform SDK 中，但它已独立扩展，我链接的站点是其当前开发的所在地。

VC6 和 MinGW 默认都链接到 MSVCRT.DLL，所以这不会区分它们。通过一些努力，MinGW 也可以链接到更高的 C 运行时版本，因此您需要独立排除 MinGW。

```
Runtime       VC Version
----------    -------------
MSVCRT.DLL    VC6
MSCVR80.DLL   VC8 (VS 2005)
MSCVR90.DLL   VC9 (VS 2008) 
```

其他运行时 DLL 也是很好的线索，例如对 Delphi 运行时的引用可能表明 EXE 实际上是从 Delphi 构建的，而不是 C 工具链。

如果没有从 .EXE 文件中删除符号，那么您可能会发现一些线索，其中存在内部符号。例如，对类似内容的引用`_sjlj_init`可能表明在某些时候涉及为 setjmp/longjmp 异常处理配置的 MinGW GCC 3.x。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T22:46:06.737

另一种选择是检查 dll 链接到哪个 CRT 库，使用[depends.exe](http://www.dependencywalker.com/)
MinGW 和 Cygwin 有自己的 dll，这些 dll 很容易识别。
VC6 使用 MSVCRT.dll 通常
任何较新版本的 VS 在 dll 的文件名旁边都有其版本：
MSVCR90.dll - VS2008
MSVCR80.dll - VS2005
MSVCR71.dll - VS2003
MSVCR70.dll - VS2002

不要将此列表作为权威指南，因为这些名称往往会有奇怪的变化，尤其是在 VS2002-2003 领域。还有其他 dll，例如 MFC 和 ATL dll，它们具有类似的版本控制方案。

只要 PE 实际上依赖于 CRT 并且它没有静态链接到它，这将起作用。

我认为 Delphi 也有一些链接到的 DLL，但我不确定它是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-18T22:21:09.090

[IDA-Pro](http://www.datarescue.com/)执行的部分分析包含一些编译器识别。打开 PE 进行分析后，查看输出日志。它通常埋在那里的某个地方。

# sqlite - sqlite 列宽

> ID：764331
> 
> 赞同：1
> 
> 时间：2009-04-18T22:11:36.897
> 
> 标签：sqlite, schema

我正在通过 sqlite db 执行 PRAGMA table_info

```
PRAGMA table_info(my_table); 
```

这些是检索到的列：

名称类型 notnull dflt_value pk

我注意到在 (n)(var)char 数据类型的情况下没有列宽，¿有没有简单的方法来获取此信息？

注意：我知道在这些列中插入大值没有问题，但是，我还是想访问这个元数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-18T22:34:23.550

检查查询结果内容时：PRAGMA table_info(my_table);

类型列包含

*   (n)(var)char 用于宽度为 1 的列
*   (n)(var)char(x) 用于宽度大于 1 的列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T22:25:38.330

来自[http://www.sqlite.org/faq.html#q9](http://www.sqlite.org/faq.html#q9)：

> SQLite 不强制 VARCHAR 的长度。您可以声明一个 VARCHAR(10)，SQLite 很乐意让您在其中放入 500 个字符。并且它将保持所有 500 个字符的完整性——它永远不会被截断。

所以基本上，SQLite 在这些字段上并没有真正的长度，它会很乐意接受任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-27T20:04:00.680

您可以通过从 sqlite_master 表中进行选择来访问元数据

# standards - 是否有包含字母和标准数值的 DTMF API 或标准？

> ID：764333
> 
> 赞同：0
> 
> 时间：2009-04-18T22:12:26.303
> 
> 标签：standards, iso, dtmf

我还没有找到任何关于这个主题的文献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-01T15:29:58.577

下面的函数将在 Java 中生成一个 16 位、有符号、线性 PCM、DTMF 音调。

```
public byte[] generateTone(float a, float b)
{
    byte samples[] = new byte[16000];    // Tone data buffer.
    int frames = samples.length / 2;     // Number of frames that fit in the buffer.

    /* Fill the buffer with the tone data. */
    for(int i = 0; i < frames; i++)
    {
        /* The 8000 value is the sample rate. */
        short value = (short)(32768 + 63 * Math.sin(i * 2 * Math.PI * a / 8000) + 63 * Math.sin(i * 2 * Math.PI * b / 8000));
        samples[i + i] = (byte)(value >>> 8);
        samples[i + (i + 1)] = (byte)value;
    }

    return samples;
} 
```

我希望这会有所帮助......只需将两个频率作为参数 a 和 b 插入，然后你就会得到一个音调。例如，第一个将生成为：

```
byte tone[] = generateTone(697, 1209); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T22:44:50.407

“DTMF“触摸”音在 CCITT 第 VI 卷中定义：关于电话交换和信令的一般建议建议 Q.23：按钮电话机的技术特性。”。本文档及其相关标准文档将告诉您比您想知道的更多有关 DTMF 音调的信息。"

这句话来自[这里](http://www.dialabc.com/sound/dtmf.html)。该网页涵盖了所有基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T23:24:45.270

[DTMF](http://en.wikipedia.org/wiki/Dual-tone_multi-frequency)仅涵盖数字`0`to`9`和 字母`#, *, A, B, C,`和`D`. 因此，如果您的问题是是否存在任何支持 D 之后的字母的东西，那么答案是否定的。

# google-app-engine - 如何从谷歌数据存储中获取用户数据？

> ID：764337
> 
> 赞同：1
> 
> 时间：2009-04-18T22:16:29.320
> 
> 标签：google-app-engine, jdoql, google-cloud-datastore

我正在使用 google app engine 并且在[JDOQL 查询](http://code.google.com/appengine/docs/java/gettingstarted/usingdatastore.html)上遇到了一些麻烦。

该示例显示了如何从数据存储中获取内容：

```
PersistenceManager pm = PMF.get().getPersistenceManager();
String query = "select from " + Greeting.class.getName();
List<Greeting> greetings = (List<Greeting>) pm.newQuery(query).execute(); 
```

但是，如果我只想为给定用户获取东西怎么办？

在上面链接的页面底部，它显示我们可以这样：

```
select from guestbook.Greeting where author == 'alfred@example.com' 
```

但是，如果我尝试以下操作，它不会获取任何内容：

```
PersistenceManager pm = PMF.get().getPersistenceManager();
String query = "select from " + Greeting.class.getName() + " where author == '" + user.GetEmail() + "'";
List<Greeting> greetings = (List<Greeting>) pm.newQuery(query).execute(); 
```

where`user`被提取，如同一示例中所示：

```
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser(); 
```

我确信这是一项常见任务，但我无法让它工作 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T03:23:32.857

在 Google Groups 上讨论了[这个线程](http://groups.google.com/group/google-appengine-java/browse_thread/thread/41fa419692cf1bea?pli=1)后，我得到了它的工作方式：

```
String select_query = "select from " + Greeting.class.getName(); 
Query query = pm.newQuery(select_query); 
query.setFilter("author == paramAuthor"); 
query.declareParameters("java.lang.String paramAuthor"); 
greetings = (List<Greeting>) query.execute(user); 
```

JDQL 语法令人费解……

# unix - 无法在没有编辑器的情况下将数据放到终端的第一行？

> ID：764342
> 
> 赞同：0
> 
> 时间：2009-04-18T22:20:39.823
> 
> 标签：unix, terminal

重复[添加到文件一个衬里外壳？](https://stackoverflow.com/questions/54365/prepend-to-a-file-one-liner-shell).

我试图在不打开编辑器的情况下将我的粘贴放在第一行，但与相反的方向类似

```
echo Masi >> file 
```

**如何在不打开编辑器的情况下将数据放到终端的第一行？**

例如，

我有一个文件

```
M
M
M 
```

我想把 Masi 放到我的文件中，这样

```
Masi
M
M
M 
```

无需在终端中打开编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T22:42:24.937

这样做`ed`：

```
#!/bin/sh
/bin/ed $1 <<__EOT__
1i
Masi
.
wq
__EOT__ 
```

从技术上讲，这*是*启动编辑器，但它是非交互式的，因此可能符合您的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T22:32:42.480

你可以试试：

```
mv file temp_file
echo "Masi" > file
cat temp_file >> file
rm temp_file 
```

如果您必须做很多事情，请编写一个脚本...

* * *

或者我相信你*可以*用`ed`. 如果您认为这算作“打开编辑器”，您必须自己决定......

# unix - 如何将流量定向到 /etc/hosts 中的子域？

> ID：764348
> 
> 赞同：1
> 
> 时间：2009-04-18T22:22:21.333
> 
> 标签：unix, dns, subdomain

我试图把这条线放到/etc/hosts：

> IP math.com mathworld.com

其中 IP 应该是[http://mathworld.wolfram.com/classroom/](http://mathworld.wolfram.com/classroom/)的 IP 。我 ping 了该站点，我意识到我必须使用其他一些工具来引导流量：

> ping mathworld.wolfram.com/
> 
> ping：无法解析 mathworld.wolfram.com/：未知主机

那么问题来了：

> 如何将流量引导到子域，类似于上述子域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T22:33:29.577

您似乎对网络术语感到困惑。

[http://mathworld.wolfram.com/classroom/](http://mathworld.wolfram.com/classroom/)是 URL，而不是域名。它没有IP地址。`mathworld.wolfram.com` *是*一个域名并且有一个IP地址。

此外，`mathworld.wolfram.com`是一个子域，`wolfram.com`其是`com`顶级域的子域。

mathworld.wolfram.com*不是*mathworld.com的子域

`/etc/hosts`不足以将域的所有子域映射到同一个位置。您需要将它们全部输入，*或*进入正确的 DNS 服务器配置（例如`named.conf`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-18T22:26:33.210

您的 ping 失败是因为您在主机名上有一个尾随 /，这是无效的。

您是否尝试创建自己的本地别名 URL，将您放入该特定第三方 URL 的正确部分？

这不能单独工作，因为：

1.  第三方站点将在 HTTP 标头中看到*您的*主机名别名`Host:`，但它无法识别
2.  它不会让你进入他们服务器的正确子目录

要完成这项工作，您需要将该本地别名指向您控制的 Web 服务器，然后让该服务器发出 HTTP 重定向到真实站点。

# browser - 页面的 F5（刷新）和在新窗口中粘贴该 URL 有什么区别？

> ID：764356
> 
> 赞同：24
> 
> 时间：2009-04-18T22:26:13.587
> 
> 标签：browser

页面的 F5（刷新）与将该 URL 粘贴到新窗口并单击 Enter 之间有什么区别？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-19T19:56:41.190

它首先取决于页面的缓存策略和用于获取页面的方法。如果您通过 POST 获取页面，刷新将重新发送 POST 数据，而将 URL 放在新窗口中将向服务器发出 GET。

如果原始请求是 GET，则行为取决于当前页面的缓存方式。点击刷新将导致浏览器与服务器检查页面（但不一定是任何脚本或图像）。如果页面设置为可缓存，则将 URL 粘贴到新窗口中很可能只是将页面从缓存中拉出，而不会访问服务器。

请注意，与服务器检查不一定会导致页面重新生成或重新下载，因为浏览器可以发出条件 GET 或 HEAD 请求来检查页面自上次获取后是否实际发生了变化。此外，虽然某些操作可能会从缓存中提取页面，但不能保证它会（并且动态生成的页面通常必须正确设置才能被认为是可缓存的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-18T22:31:46.973

刷新页面不会显式刷新您的缓存。它将执行一个新的 GET，但任何缓存的内容都会保持缓存。但是，如果您按下 CTRL-F5，您将使用缓存进行刷新。

复制和粘贴只会使用 GET 获得该站点的另一个新副本，而不会忽略缓存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-18T22:30:27.057

当您点击刷新 (F5) 时，浏览器会询问您，例如您是否还想发送 POST 请求（例如，如果您之前在表单上输入了一些数据）。如果您粘贴 url 并按 enter，您将无法重新发送提到的 POST 数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T22:32:16.940

这将取决于很多事情。对于大多数网站，将 url 复制到新窗口或选项卡将启动新会话，刷新将保持当前会话。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-18T22:29:57.710

点击 Ctrl-F5 将清除您的本地（即浏览器的缓存）该站点的所有文件。而简单地在新选项卡中打开站点将首先从缓存中加载任何文件。

# python - Python 中的字符串替换列表

> ID：764360
> 
> 赞同：39
> 
> 时间：2009-04-18T22:28:06.827
> 
> 标签：python, string, replace

有没有更短的方法来编写以下代码？

```
my_string = my_string.replace('A', '1')
my_string = my_string.replace('B', '2')
my_string = my_string.replace('C', '3')
my_string = my_string.replace('D', '4')
my_string = my_string.replace('E', '5') 
```

请注意，我不需要替换那些确切的值；我只是在寻找一种将 5+ 行变成少于 5 行的方法

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-04-18T22:36:06.543

看起来是使用循环的好机会：

```
mapping = { 'A':'1', 'B':'2', 'C':'3', 'D':'4', 'E':'5'}
for k, v in mapping.iteritems():
    my_string = my_string.replace(k, v) 
```

如果您不介意括号，一种更快的方法是：

```
mapping = [ ('A', '1'), ('B', '2'), ('C', '3'), ('D', '4'), ('E', '5') ]
for k, v in mapping:
    my_string = my_string.replace(k, v) 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-04-19T00:59:10.083

您可以轻松地使用 string.maketrans() 创建映射字符串以传递给 str.translate()：

```
import string
trans = string.maketrans("ABCDE","12345")
my_string = my_string.translate(trans) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-19T18:20:59.300

如果你想慢慢地得到错误的答案，然后在循环中使用 string.replace 。（尽管在这种模式和替换之间没有重叠的情况下它确实有效。）

对于可能重叠或主题字符串较长的一般情况，请使用 re.sub：

```
import re

def multisub(subs, subject):
    "Simultaneously perform all substitutions on the subject string."
    pattern = '|'.join('(%s)' % re.escape(p) for p, s in subs)
    substs = [s for p, s in subs]
    replace = lambda m: substs[m.lastindex - 1]
    return re.sub(pattern, replace, subject)

>>> multisub([('hi', 'bye'), ('bye', 'hi')], 'hi and bye')
'bye and hi' 
```

对于 1 字符模式和 1 或 0 字符替换的特殊情况，请使用 string.maketrans。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-18T22:43:25.057

也调查一下[`str.translate()`](http://docs.python.org/library/stdtypes.html#str.translate)。它根据您为 Unicode 字符串提供的映射替换字符，否则必须告知用什么替换从 chr(0) 到 chr(255) 的每个字符。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-18T22:32:28.767

```
replaceDict = {'A':'1','B':'2','C':'3','D':'4','E':'5'}       
对于 key，replaceDict.items() 中的替换：  
  my_string = my_string.replace（键，替换）
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-27T15:13:04.803

我认为它可能会更有效一点：

```
mapping = { 'A':'1', 'B':'2', 'C':'3', 'D':'4', 'E':'5'}
my_string = "".join([mapping[c] if c in mapping else c for c in my_string]) 
```

我建议使用“timeit”进行一些基准测试，以“my_string”长度为基础的真实案例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-15T12:23:14.917

您可以使用 Pandas 在一行中完成。

```
import pandas as pd

my_string="A B C test"

my_string =pd.DataFrame([my_string])[0].replace(["A","B","C","D","E"],['1','2','3','4','5'],regex=True)[0]

print(my_string)
'1 2 3 test' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-26T12:00:15.757

我这样做的一种方法是使用关联的数组（字典）。下面是我使用正则表达式在 LaTeX 中准备部署文件时使用的替换示例。

```
 import re
  def escapeTexString(string): # Returns TeX-friendly string
    rep = { # define desired replacements in this dictionary (mapping)
         '&': '\\&',
         '%': '\\%',
         '#': '\\#',
         '_': '\\_',
         '{': '\\{', # REGEX Special
         '}': '\\}', # REGEX Special
         '~': '\\char"007E{}', # LaTeX Special
         '$': '\\$', # REGEX Special
         '\\': '\\char"005C{}', # REGEX/LaTeX Special
         '^': '\\char"005E{}', # REGEX/LaTeX Special
         '"': '\\char"FF02{}'
        }
    # use these two lines to do the replacement (could be shortened to one line)
    pattern = re.compile("|".join(map(re.escape,rep.keys()))) # Create single pattern object (key to simultaneous replacement)
    new_string = pattern.sub(lambda match: rep[match.group(0)], string)
    return new_string 
```

# smlnj - SMLNJ 有任何类型的调试器吗？

> ID：764362
> 
> 赞同：20
> 
> 时间：2009-04-18T22:29:58.197
> 
> 标签：smlnj

我浏览了[SMLNJ 用户指南](http://www.smlnj.org/doc/index.html)，找不到任何关于调试功能的信息。我很想看到一个堆栈跟踪，或者单步执行一个函数。这可能吗。是否有其他提供此功能的类似 SML 变体的实现*？*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-12-12T04:10:22.963

目前没有基于步骤的调试器。

您可以通过执行以下操作来获取堆栈回溯：

```
- CM.make "$smlnj-tdp/back-trace.cm";
[library $smlnj-tdp/back-trace.cm is stable]
[library $smlnj-tdp/plugins.cm is stable]
[library $SMLNJ-LIB/Util/smlnj-lib.cm is stable]
[library $smlnj/compiler/current.cm is stable]
[library $smlnj/compiler/x86.cm is stable]
[library $smlnj/viscomp/core.cm is stable]
[library $smlnj/viscomp/parser.cm is stable]
[library $smlnj/viscomp/basics.cm is stable]
[library $smlnj/viscomp/elaborate.cm is stable]
[library $smlnj/viscomp/elabdata.cm is stable]
[library $smlnj/MLRISC/MLRISC.cm is stable]
[library $SMLNJ-MLRISC/MLRISC.cm is stable]
[library $Lib.cm(=$SMLNJ-MLRISC)/Lib.cm is stable]
[library $Control.cm(=$SMLNJ-MLRISC)/Control.cm is stable]
[library $Graphs.cm(=$SMLNJ-MLRISC)/Graphs.cm is stable]
[library $smlnj/MLRISC/Control.cm is stable]
[library $smlnj/viscomp/debugprof.cm is stable]
[library $smlnj/viscomp/execute.cm is stable]
[library $smlnj/internal/smlnj-version.cm is stable]
[library $smlnj/viscomp/x86.cm is stable]
[New bindings added.]
val it = true : bool
- SMLofNJ.Internals.TDP.mode := true;
[autoloading]
[autoloading done]
val it = () : unit
- 
```

然后，您可以加载一些代码，而不仅仅是打印异常，您将获得一个模拟的堆栈回溯。您必须按照上述步骤重新编译您的代码，否则这将不起作用！

```
- exception Foo;
exception Foo
- fun otherFun() = raise Foo;
val otherFun = fn : unit -> 'a
- fun raiseAtZero(n) = if (n > 0) then raiseAtZero(n-1) else otherFun();
val raiseAtZero = fn : int -> 'a
- raiseAtZero 10;
stdIn:9.1-9.15 Warning: type vars not generalized because of
   value restriction are instantiated to dummy types (X1,X2,...)

*** BACK-TRACE ***
GOTO   stdIn:7.5-7.27: otherFun[2]
          (from: stdIn:8.60-8.70: raiseAtZero[2])
CALL-( stdIn:8.5-8.70: raiseAtZero[2]
          (from: stdIn:9.1-9.15: it)
GOTO   stdIn:5.5-5.27: otherFun[2]
          (from: stdIn:6.60-6.70: raiseAtZero[2])
CALL-( stdIn:6.5-6.70: raiseAtZero[2]
          (from: stdIn:6.71-6.86: it)

uncaught exception Foo
  raised at: stdIn:7.24-7.27
- 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-21T10:12:32.207

PolyML 现在有一个源代码级调试器：[http ://www.polyml.org/documentation/Tutorials/Debugging.html](http://www.polyml.org/documentation/Tutorials/Debugging.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-18T22:50:35.103

从[SMLNJ 常见问题](http://www.smlnj.org/doc/FAQ/faq.txt)的第 3.3 节：

> 问：是否有 SML/NJ 的调试器？Tolmach 的 SML/NJ 0.93 调试器发生了什么变化？
> 
> 答：简短的回答是否定的。

[还：](http://www.google.co.uk/url?sa=t&source=web&ct=html&cd=3&url=http%3A%2F%2F209.85.229.132%2Fsearch%3Fq%3Dcache%3AxG1EiMSjqmsJ%3Awww.cs.berkeley.edu%2F~aiken%2Fcs294_F01%2Flectures%2Flecture04.ppt%2Bsml%2Bdebugger%26cd%3D3%26hl%3Den%26ct%3Dclnk%26gl%3Duk&ei=dlbqSbPrN6OUjAeayoybCg&usg=AFQjCNFRgvpxXqo8NE2ps4pnGRHR9M8gTg&sig2=nDwHr46SOFcecGJGFeT-5A)

> ```
> Debugging SML 
> 
>     * For years, no one had an SML debugger
> 
>     * Why?
>           o No one had any bugs?
>           o It is hard to write a debugger for SML
>           o The user community wasn’t large enough
> 
>     * Likely all three are true 
> ```

不过，有[一个 .NET 编译器](http://www.cl.cam.ac.uk/research/tsg/SMLNET/)，它声称有一些调试支持。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-07T22:10:30.640

[Poly/ML](http://www.polyml.org)是标准 ML 的最佳未知实现。它从早期（至少在 1990 年代）就有一个命令行调试器。最近，它通过 Isabelle/PIDE 获得了完整的 IDE 支持，例如参见[ML](http://sketis.net/category/ml)，其中还包括一个源代码级调试器。

# asp.net - 使用 linq 进行数据列表分页

> ID：764364
> 
> 赞同：5
> 
> 时间：2009-04-18T22:30:47.210
> 
> 标签：asp.net, linq, datalist

我正在创建一个使用 Linq 进行数据访问的页面，并且我正在使用 DataList 来显示数据。如何使用 Linq 进行数据分页？请阅读下面的简单代码：

我通常使用 PagedDatasource 但这似乎只适用于 DataTable。

这是我的 Linq 返回与 Datalist 绑定的 Datatable ：

公共共享函数 GetStudentList() As DataTable

```
 Dim db As New DemoDataClassesDataContext()

    Dim query = From st In db.students _
                Order By st.st_studentid Ascending _
                Select st

    Dim dtStudent = New DataTable("myst")

    dtStudent.Columns.Add("st_id", GetType(Integer))
    dtStudent.Columns.Add("st_userid", GetType(Guid))
    dtStudent.Columns.Add("st_studentid", GetType(Integer))
    dtStudent.Columns.Add("st_firstname", GetType(String))
    dtStudent.Columns.Add("st_lastname", GetType(String))
    dtStudent.Columns.Add("st_gender", GetType(String))
    dtStudent.Columns.Add("st_email", GetType(String))

    For Each q In query
        dtStudent.Rows.Add(New Object() {q.st_id, q.st_userid, q.st_studentid, q.st_firstname, q.st_lastname, q.st_gender, q.st_email})
    Next

    Return dtStudent

End Function 
```

在页面后面的代码中：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not Page.IsPostBack() Then
        LoadData()
    End If

End Sub

Private Sub LoadData()
    dsStduent = da_Student.GetStudentList()
    dt_Student.DataSource = dsStduent
    dt_Student.DataBind()

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-18T22:42:30.880

您会发现[.Skip() 和 .Take()](http://blogs.msdn.com/wriju/archive/2007/10/04/linq-to-sql-paging-data.aspx)方法非常有用。

我注意到您提供了项目中的一些代码，因此这里更新了您应该如何实现这些方法。

在您获取数据的方法中，请执行以下操作：

```
Dim query = (From st In db.students _
            Order By st.st_studentid Ascending _
            Select st).Skip((CurrentPage - 1) * PageSize).Take(PageSize) 
```

然后提供`CurrentPage`和`PageSize`变量作为方法的参数。（您不想将它们构建到数据访问中，因为它们可能会因站点的不同部分而异……）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T22:40:41.243

您需要使用 Skip() 和 Take() 方法查看[使用 LINQ 的 SQL 分页。](http://blogs.msdn.com/wriju/archive/2007/10/04/linq-to-sql-paging-data.aspx)

# asp.net-mvc - 以编程方式获取到控制器操作（url）的路由

> ID：764375
> 
> 赞同：6
> 
> 时间：2009-04-18T22:38:05.600
> 
> 标签：asp.net-mvc, controller

我有一个名为“AccountController”的控制器和一个名为“ResetPassword”的操作。从 html 标记中，我可以执行以下操作：

```
<%= Html.ActionLink("LinkText", "ResetPassword", "AccountController") %> 
```

它会输出正确的网址。有没有办法以编程方式做到这一点？我正在尝试将 url 作为另一个类中的字符串获取，但 System.Web.Mvc.HtmlHelper 没有 ActionLink() 静态方法，并且创建该类的实例也没有它。

注意：如果我尝试创建 HtmlHelper 或 UrlHelper 的实例，那么我需要对 View Context 或 Request Context 的引用，但我不知道如何从控制器中获取它们（传递给我的类方法）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-18T22:40:20.947

改为使用`Url.Action`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T00:07:00.333

查看[没有 ViewContext 的 Url Form Action](https://stackoverflow.com/questions/363234/url-form-action-without-viewcontext)。

# regex - 使用正则表达式进行输入验证是一种好习惯吗？

> ID：764376
> 
> 赞同：5
> 
> 时间：2009-04-18T22:38:57.067
> 
> 标签：regex, language-agnostic

目前我在正则表达式方面有一些理论背景，但我几乎从未使用过它们。

我正在尝试开发一些用于一般输入验证的类，并且我正在编写不使用任何正则表达式的方法。我最近阅读[了这篇](http://www.codinghorror.com/blog/archives/001016.html)Jeff 的文章，现在我想知道是否应该重构一些方法以在其中包含 regexp。

我认为正则表达式用于为解析器和其他任何应用程序构建前端，但显然它们的用途远不止于此。

我意识到并非所有验证都可以或应该使用正则表达式完成，但它们是验证输入的好习惯吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-18T22:46:45.737

正则表达式只是将文本与模式匹配的一种方法。还有其他方法可以在不使用正则表达式的情况下做同样的事情。您不应将正则表达式视为必须包含在代码中的流行语。使用任何最有效的工具。

对于输入验证，只需确保您使用的任何工具都可以让您准确指定要接受的文本类型，并默认**拒绝其他所有内容**。正则表达式让您可以轻松简洁地为某些类型的输入执行此操作，这就是许多人使用它们的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-18T22:48:38.807

是的！

正则表达式通常可以让你在很短的时间内建立一个相当可靠的输入验证，它的可读性很强。

在我的书中，做正确工作、可维护并让您处理其他事情的东西很好。

与往常一样，*运用常识*，如果正则表达式不适合这项工作，请不要使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-18T22:50:25.040

使用正则表达式验证是一个好主意，前提是您不会分支到应用更多的正则表达式：

如果您发现自己正在验证潜在的复杂结构，例如[迈克尔·阿什（Michael Ash](http://regexlib.com/REDetails.aspx?regexp_id=113)）在尝试验证日期时所做的尝试，那么您就走投无路并自找麻烦：

```
^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[13-9]|1[0-2])(\/|-|\.)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-|\.)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$ 
```

您的代码将遇到维护问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-18T22:44:03.917

> 我意识到并非所有验证都可以或应该使用正则表达式完成

你在那个方面是完全正确的，但是对于需要完全以某种方式（例如社会安全号码、电话号码（在某种程度上）和电子邮件）的事情，使用正则表达式可能会有所帮助。

但不要依赖它们。例如，我有一个非常好的电子邮件正则表达式检查，但我也有一个明显伪造的域列表（example.com 和我在我们的数据库中看到的其他一些域（主要是本地的东西））来匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-18T23:11:03.290

您的问题的答案实际上取决于您的代码的目的。是的，正则表达式很棒，我同意所有以前的答案（我已经阅读过）。

使用正则表达式是验证某些输入的一种方便、快速和巧妙的方法，但也许您需要记住什么是好的代码并将正则表达式应用到正确的位置。我阅读了您发布的文章，并且我认为主题更多地是关于以正确的方式使用正则表达式，即不要仅仅将它们用于解决方案，因为您知道它会很快输入并且它会起作用但在turn 会产生不可读、冗长和可怕的代码。

我不会认为正则表达式是“不好的做法”。我想，他只是想说明，有时您可以多花几分钟时间考虑设计，并提出一个更好的概念来实现，或者只是得出结论，正则表达式就是那个概念！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-18T22:44:17.880

是的 - 正则表达式非常适合输入验证。然而，通常将这些东西尽可能地抽象为其他方法是一个非常好的主意 - 甚至有时甚至是特殊的验证器对象。

请记住，正则表达式通常会带来很多麻烦，但总的来说，输入验证是它们相当无条件地发挥作用的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-18T23:40:56.807

您应该在客户端和服务器端进行验证。正则表达式非常适合确保字符串具有有效格式（例如，电子邮件地址、电话号码等），但服务器不应仅依赖于此。服务器应自行检查并验证业务正确性（例如，如上面检查数据库中的虚假地址的答案）。

一次是不够的。有不同程度的“有效”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-18T23:41:21.830

如果您要验证的输入是正则语言，那么正则表达式是验证它的正确工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-18T22:44:29.487

我不知道我会称之为最佳实践，但我当然会使用正则表达式来验证电子邮件地址和操作等内容。如果不是最佳做法，那肯定是一种常见做法。

# dynamic - 如何在 GDB 中自动打印下 N 个执行的行？

> ID：764382
> 
> 赞同：16
> 
> 时间：2009-04-18T22:42:11.503
> 
> 标签：dynamic, gdb, trace, call-graph, control-flow

一段时间以来，我一直在尝试寻找一种方法来自动化 GDB 中跟踪程序控制流的进度。

甚至只是自动化`n`命令的一种简单方法，因此您可以查看调用例程的顺序。

我意识到您可以`n x`在 x 是 GDB 执行的次数的地方提出问题，但问题在于它显示了命令而不是例程的地址！但是如果你`n`在 GDB 中手动按下（然后按下回车键发出上一个命令）它会显示地址。

我在 GDB 中尝试了以下方法：

```
(after setting a breakpoint at say 0x0123456)
b *0x0123456 
```

GDB 说`<breakpoint 1 at 0x123456>`。我输入：

```
commands 1
n 1000
c
end 
```

但它没有按预期循环，也没有显示地址位置:-(。

任何帮助，将不胜感激！当然，自动记录调用的命令例程一定很简单？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-10-09T19:50:55.967

实际上，这很容易。我会给你最基本的，你可以修改以适应。

```
(gdb) define nstep
> set $foo = $arg0
> while ($foo--)
>  step
>  end
> end
(gdb) nstep 100 
```

我已经做过很多次了。希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-18T23:32:03.600

使用[strace](http://en.wikipedia.org/wiki/Strace)进行系统调用和使用[ltrace](http://en.wikipedia.org/wiki/Ltrace)进行库调用以查看跟踪而不是使用 gdb 怎么样？ 用于系统调用的[strace和用于库调用的](http://en.wikipedia.org/wiki/Strace)[ltrace](http://en.wikipedia.org/wiki/Ltrace)适用于任何应用程序，即使您没有源代码。

如果您有权访问源代码，那么您还可以使用自己的代码进行跟踪。Gcc 有一个允许你这样做的模式。这是一个[例子](http://ndevilla.free.fr/etrace/)。

然后你只需要分析日志文件。

如果你想使用普通的 GDB，那么你可以使用[断点命令列表](http://sourceware.org/gdb/current/onlinedocs/gdb_6.html#SEC40)

> 您可以为任何断点（或观察点或捕获点）提供一系列命令，以便在程序因该断点而停止时执行。例如，您可能想要打印某些表达式的值，或启用其他断点。

特别是：

> 例如，当 x 为正时，您可以使用断点命令在 foo 的入口处打印 x 的值。

```
break foo if x>0
commands
silent
printf "x is %d\n",x
cont
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-12-30T15:33:41.370

有一个用于使用 gdb 自动跟踪函数调用的 shell 脚本：

[http://blog.superadditive.com/2007/12/01/call-graphs-using-the-gnu-project-debugger/](http://blog.superadditive.com/2007/12/01/call-graphs-using-the-gnu-project-debugger/)

因为链接现在已经失效，所以我在这里发布文本副本（作者是 Juan M. Bello Rivas - jmbr）： [http ://web.archive.org/web/20090317091725/http://blog.superadditive.com /2007/12/01/call-graphs-using-the-gnu-project-debugger/](http://web.archive.org/web/20090317091725/http://blog.superadditive.com/2007/12/01/call-graphs-using-the-gnu-project-debugger/)

> *使用 GNU 项目调试器调用图*
> 
> [Chris Ball 向所有喜欢 Unix](http://blog.printf.net/articles/2007/11/30/tracing-internal-function-calls-in-a-binary)的人询问了一个用于函数调用的工具，strace 和 ltrace 分别用于系统和库调用。
> 
> 我想自己写这个很长一段时间，但阻止我这样做的原因是我想出了一个简单的 shell/awk 脚本，它实现了几乎相同的目标。由于那个小程序对我以外的其他人很有用，我想我会稍微润色一下，然后把它贴在这里。
> 
> 该工具的初衷是打印给定程序的调用图。它通过控制 GDB 并在每个函数调用处自动设置断点来工作。当然，可执行文件必须包含调试符号（也就是说，它必须是用 gcc 的 -g 选项编译的）。这是一些示例输出（格式为：调用者被调用者参数）：

```
xmltree_parse xmltree_itor_next (self=0x80571e8)
xmltree_itor_next xmlnode_stack_push (stack=0x80571f0, n=0x8056780)
xmltree_parse h_requires (n=0x8056808, u=0xbff9d504)
h_requires xmlnode_get_attr (self=0x8056808, name=0x80520ea "plugin")
h_requires probe_get_name (self=0x8056af0)
h_requires htab_lookup (self=0x8058100, key=0x8056868, len=3, create=0, value=0x0) 
```

> 您可以使用包含的`cg2dot.awk`脚本来生成适合使用`graphviz`.

程序（存档大小2110bytes，md5 54b583e637d19be0502ccadfa6174756）：

[http://web.archive.org/web/20110902010824/http://superadditive.com/software/callgraph.tar.gz](http://web.archive.org/web/20110902010824/http://superadditive.com/software/callgraph.tar.gz)

它从程序中转储所有函数，并在每个函数上生成一个带有断点的 gdb 命令文件。在每个断点处，都会执行“ `backtrace 2`”和“ `continue`”（通过`commands`）。

这个脚本在大型项目（〜数千个函数）上相当慢，所以我在函数列表上添加了一个过滤器（通过 egrep）。这很容易。我几乎每个月都使用这个脚本。

PS：有一份 callgraph.tar.gz 的副本，用于存档.org 将从档案中删除它的情况。用于`xxd -r`恢复

```
0000000: 1f8b 0800 825e 1d49 0003 ed58 7b73 db46  .....^.I...X{s.F
0000010: 0ecf bfe2 a740 6835 926c ea69 2799 8b62  .....@h5.l.i'..b
0000020: 5f69 89b6 7927 4b3e 926a 9ab3 5497 2257  _i..y'K>.j..T."W
0000030: d2d6 14a9 922b 3b4e 93fb ec07 2ca9 97d3  .....+;N....,...
0000040: 34d3 995c 3bbd 1126 1391 c0e2 87c7 0258  4..\;..&.......X
0000050: ae3d 3708 26b1 3b9f 56bd e5d3 93af 4d35  .=7.&.;.V.....M5
0000060: a417 4747 f45b 7ff9 bcb6 f92b 45cf 1b47  ..GG.[.....+E..G
0000070: 4fea 757c 383c 7af1 fca8 fea4 563f 3c44  O.u|8<z.....V?<D
0000080: 31d4 beba 27bf 428b 44b8 31c0 939f 66a3  1...'.B.D.1...f.
0000090: f8b7 d67d 49fe 17a5 bda7 d511 0fab c954  ...}I..........T
00000a0: 51f6 a015 cd1f 623e 990a 287a 2568 d46a  Q.....b>..(z%h.j
00000b0: 4765 fcef 25fc 63e1 8670 5981 5316 0411  Ge..%.c..pY.S...
00000c0: 58fc ce4d e035 25e4 db64 3167 b1eb fb5c  X..M.5%..d1g...\
00000d0: f03b 56f1 a2d9 89b2 8740 572c 9ef1 24e1  .;V......@W,..$.
00000e0: 5108 3c81 298b d9e8 01b0 b842 c17c 0dc6  Q.<.)......B.|..
00000f0: 3163 108d c19b baf1 8469 2022 70c3 0740  1c.......i "p..@
0000100: a424 0a51 3b1a 0997 873c 9c80 0b1e ba44  .$.Q;....<.....D
0000110: 6bc5 1481 9268 2cee dd98 e172 1fdc 2489  k....h,....r..$.
0000120: 3cee 2222 f891 b798 b150 b882 2c8e 79c0  <."".....P..,.y.
0000130: 1284 298a 2903 d5ce 74d4 9234 e433 3700  ..).)...t..4.37.
0000140: 1e02 c996 22b8 e762 1a2d 04c4 2c11 31f7  ...."..b.-..,.1.
0000150: 0845 4300 1e7a c1c2 273f 960b 023e e399  .EC..z..'?...>..
0000160: 1502 90b9 4a08 7691 601c e4ab 06b3 c8e7  ....J.v.`.......
0000170: 63fa 6514 1cc2 cc17 a380 2753 0d7c 4ef0  c.e.......'S.|N.
0000180: a385 c0b5 0931 3d16 921e 4653 8d62 4830  .....1=...FS.bH0
0000190: bb84 c159 9246 bcf6 9060 2866 b434 a7d4  ...Y.F...`(f.4..
00001a0: 8a2c 59d2 f6fd 349a 6dc7 83a9 1a2f e210  .,Y...4.m..../..
00001b0: 8d32 a9e3 4798 3ac2 40ab 3f31 4f10 8f14  .2..G.:.@.?1O...
00001c0: c611 eee7 3d05 e845 21ed 2122 be92 1be8  ....=..E!.!"....
00001d0: a0d4 1d45 774c 0695 d644 1809 f438 f583  ...EwL...D...8..
00001e0: 7663 bede e44c 944c 7186 c088 ad72 87e6  vc...L.Lq....r..
00001f0: 31d7 ee46 5c31 f980 2d17 0a8e 1b31 8f62  1..F\1..-....1.b
0000200: 69f4 71bc 95d4 890b 03ec de99 f346 b70c  i.q..........F..
0000210: 306d b8b2 7adf 996d a30d aa6e e3bb aac1  0m..z..m...n....
0000220: 1bd3 b9e8 f51d c015 96de 75de 42ef 0cf4  ..........u.B...
0000230: ee5b f8a7 d96d 53bc c6f7 5796 61db d0b3  .[...mS...W.a...
0000240: c0bc bcea 9846 5b03 b3db eaf4 db66 f71c  .....F[......f..
0000250: 4e51 b3db 73a0 635e 9a0e c23a 3d69 3203  NQ..s.c^...:=i2.
0000260: 330d d43b 4390 4bc3 6a5d 2043 3f35 3ba6  3..;C.K.j] C?5;.
0000270: f356 8333 d3e9 12ea 19c2 ea70 a55b 8ed9  .V.3.......p.[..
0000280: ea77 740b aefa d655 cf36 d085 36ea 757b  .wt....U.6..6.u{
0000290: 5db3 7b66 a125 e3d2 e83a 15b4 8c3c 30be  ].{f.%...:...<0.
00002a0: c317 b02f f44e 479a d3fb 1883 257d 6cf5  .../.NG.....%}l.
00002b0: aede 5ae6 f985 0317 bd4e dbb0 6c44 3935  ..Z......N..lD95
00002c0: d03f fdb4 63a4 e630 b856 4737 2f35 68eb  .?..c..0.VG7/5h.
00002d0: 97fa b921 f57a 8863 c965 9987 6f2e 0cc9  ...!.z.c.e..o...
00002e0: 428b 7a17 41f4 9663 f6ba 949d 56af eb58  B.z.A..c....V..X
00002f0: f8aa 61b4 96b3 527e 63da 8606 ba65 da94  ..a...R~c....e..
0000300: 9833 ab87 0628 b1a8 41b9 230c d4ec 1a29  .3...(..A.#....)
0000310: 0ea5 7d7b 7770 11bd f76d 63ed 4fdb d03b  ..}{wp...mc.O..;
0000320: 8866 9317 c840 88e5 f28a a2cc e368 7213  .f...@.......hr.
0000330: ba33 76ac ae0e 1e55 51f8 18ae 21bf 07e5  .3v....UQ...!...
0000340: 4040 1d86 4daa 8a50 0124 e64d 2350 fb89  @@..M..P.$.M#P..
0000350: 3b61 af20 bf52 c72d 365a 7d47 26e8 5ab7  ;a. .R.-6Z}G&.Z.
0000360: ceed 4aa5 3254 571a 1baa c63b 7736 0fb6  ..J.2TW....;w6..
0000370: 95ff 2387 9fc0 b62f 1333 7667 d813 1134  ..#..../.3vg...4
0000380: 0e33 8477 d869 7565 cc69 38da 6ec8 c503  .3.w.iue.i8.n...
0000390: 0e2d e6dd 2615 e5cc ec18 c7f9 7ae6 f253  .-..&.......z..S
00003a0: 28bf 833c f17e c5e9 b5c1 57d0 0fdd 51c0  (..<.~....W...Q.
00003b0: a801 c71c 1b89 bd63 de42 4856 41aa 173e  .......c.BHVA..>
00003c0: b1dc d1bb e7c7 aa0a 137f 04e5 32bb 7383  ............2.s.
00003d0: 32ce d919 b6e1 f1cf 0b5c 955a 6d9c 3cab  2........\.Zm.<.
00003e0: c340 ea7e c049 cbe6 5036 a050 0ca3 018e  .@.~.I..P6.P....
00003f0: bcd1 6232 c12e 1f40 f230 1b45 4132 c028  ..b2...@.0.EA2.(
0000400: 17a1 ff01 db76 800d 3ad8 7083 44f1 cc15  .....v..:.p.D...
0000410: a542 0a79 0255 9fdd 55c3 4510 649b f377  .B.y.U..U.E.d..w
0000420: 28b3 9fa1 f669 9ce5 703b d496 1b16 7050  (....i..p;....pP
0000430: c53c 1440 7b0c 7293 097f 192b 8e0a cfc5  .<.@{.r....+....
0000440: d109 5c14 121a 2238 f0d5 8dc4 e1e6 b8f1  ..\..."8........
0000450: c366 9230 f239 8e77 5f4e e475 64cb c02a  .f.0.9.w_N.ud..*
0000460: 9bd9 6bca f425 533e 1672 ff98 80c5 1c04  ..k..%S>.r......
0000470: 9be1 d421 5879 4e54 146a 07e3 58fd 7176  ...!XyNT.j..X.qv
0000480: 4b22 288b 8d02 a97c bfa2 1f55 f8f0 4122  K"(....|...U..A"
0000490: 2be7 8673 d6ef b6ec dfa5 2430 7828 c433  +..s......$0x(.3
00004a0: 288f 711b 3153 d2ae 8a0f 4b38 b580 c56c  (.q.1S....K8...l
00004b0: 3ad9 4af9 7f59 729a f09b 6acd 2cde 025c  :.J..Yr...j.,..\
00004c0: f4af b0d9 1cf8 57df 74c0 31ac 4b8a db71  ......W.t.1.K..q
00004d0: 6f29 6fa1 88a3 80e6 ec79 fb54 cef0 c71b  o)o......y.T....
00004e0: 5351 3c57 e07e af80 e1f5 6b03 0760 8279  SQ<W.~....k..`.y
00004f0: 9b32 7902 d414 1e8e b172 17a1 3c23 1385  .2y......r..<#..
0000500: e44a 5a98 2357 7853 fc5d d6e6 1a66 59a0  .JZ.#WxS.]...fY.
0000510: ab42 c20a 75ef 6fa1 a02c 8160 c2c4 0dbd  .B..u.o..,.`....
0000520: c8fc 15f1 942c 29bf e04e 26f3 800b 7ad5  .....,)..N&...z.
0000530: 60ee c642 03b5 a896 9a28 0858 08c7 9998  `..B.....(.X....
0000540: 24d7 f5e1 6a09 7c66 0932 d68b f669 11ae  $...j.|f.2...i..
0000550: 8a99 c083 1256 0b9a ca47 4539 35ce 7164  .....V...GE95.qd
0000560: 9103 2212 784a 1d43 8d10 d384 a994 8f7b  ..".xJ.C.......{
0000570: ee63 f9d5 d447 ec65 9a1e f3ef 583c 8a12  .c...G.e....X<..
0000580: fae6 19ab d242 f5da 2dbf d7cb ffbe 1966  .....B..-......f
0000590: 0fb5 f2df 6e86 fb83 6255 9a1d 93eb db39  ....n...bU.....9
00005a0: c9d7 4a2b d071 511d c5cc bd85 6f92 4188  ..J+.qQ.....o.A.
00005b0: a7e0 3894 b283 03e9 ae34 6074 db29 1236  ..8......4`t.).6
00005c0: 5b91 235a bd09 1c5e 1fa7 11e1 f3c1 4149  [.#Z...^......AI
00005d0: 2e58 f999 ed5b 8278 bc29 05d5 fda5 4cee  .X...[.x.)....L.
00005e0: 3a7e ab25 586b fbd5 4dad 91eb dd62 a5e2  :~.%Xk..M....b..
00005f0: d9df 509b db70 78c2 870b b6cd 65a1 2f19  ..P..px.....e./.
0000600: 1f95 7582 e245 a8a2 cb05 2a3d 59dc 9fad  ..u..E....*=Y...
0000610: 2829 4586 100f c7eb 622a 97c9 b3ac caf2  ()E.....b*......
0000620: df7e b9d0 a8e4 1956 d956 8d61 d418 2456  .~.....V.V.a..$V
0000630: 8696 964f ca26 de75 6348 295e 5756 aa8f  ...O.&.ucH)^WV..
0000640: 391d 8758 779b 6594 4ae4 066c 59c4 f272  9..Xw.e.J..lY..r
0000650: 6709 1909 1f19 4509 31d7 1691 210d 4a81  g.....E.1...!.J.
0000660: 0ad8 9199 3f8b 1116 0716 886c 0229 47e3  ....?......l.)G.
0000670: 8f8b 58fa b355 c13c 8999 17c5 feb2 8857  ..X..U.<.......W
0000680: ceab eaea 35a6 d77d b36b 3aa6 ded9 4f8b  ....5..}.k:...O.
0000690: 577a 9c2d a382 fde1 942a 6e1e d196 5d63  Wz.-.....*n...]c
00006a0: b50e 0fb4 ea63 0375 e9cd cac2 46ae 97d5  .....c.u....F...
00006b0: bb44 dd48 4abe a665 2aa5 ccd2 5efd 1a06  .D.HJ..e*...^...
00006c0: 6278 90e1 8fb1 8033 1b25 594b 2b9f f347  bx.....3.%YK+..G
00006d0: 9946 fed3 a5f0 ec19 5e62 d295 4fb7 c22b  .F......^b..O..+
00006e0: 6d15 3ef6 d237 09c8 7fb2 9752 95a5 4b5a  m.>..7.....R..KZ
00006f0: e672 a9b9 b64c a1ad 5cd8 ca13 d535 16b2  .r...L..\....5..
0000700: f267 dfe9 7e0f 79eb fbff a4e1 47a2 820d  .g..~.y.....G...
0000710: f3b5 6d7c e1fe 5f3b acbd fce4 fe7f f472  ..m|.._;.......r
0000720: 77ff ff23 28bb ff4f 684e 96c7 0a4e a71c  w..#(..OhN...N..
0000730: f327 2cb9 ced7 35c8 3786 695b af4e 945c  .',...5.7.i[.N.\
0000740: 36b4 7d9e 7ecc 9dc3 2f58 f839 79cc e09c  6.}.~.../X.9y...
0000750: 46a8 f4ca 2731 a8d1 72b9 74ae 2d85 9a14  F...'1..r.t.-...
0000760: 6960 f74f 6de3 0afb 2a97 5bf6 e140 0cb0  i`.Om...*.[..@..
0000770: 1707 2a94 4f20 7d6a ca96 2405 79c0 cb87  ..*.O }j..$.y...
0000780: 060d bddc c795 271f e580 fab3 d3f8 97a5  ......'.........
0000790: 75ff d32d a8e2 fd2f 6c7c a9ff 8f1a f547  u..-.../l|.....G
00007a0: fddf 7851 abef faff 8fa0 bdec 0f35 f03a  ..xQ.........5.:
00007b0: 113e 8f2a d313 658b 15f0 11f1 9484 feec  .>.*..e.........
00007c0: e5c1 5dc4 7dba 2217 a9f7 e8bb 6593 3f72  ..].}.".....e.?r
00007d0: e3cf f0df aff8 7883 10ca cce5 a1e4 e097  ......x.........
00007e0: 9ba7 c9bf 03c2 3e3e df5d 0fe9 fb28 4706  ......>>.]...(G.
00007f0: 1a87 b43a 4757 9b22 5d82 6eec 7eab 65d8  ...:GW."].n.~.e.
0000800: 76fa 9520 7195 b523 a445 e6c3 b558 59bb  v.. q..#.E...XY.
0000810: 934a df3f 92be df90 a69f 50bb 49b2 a31d  .J.?......P.I...
0000820: ed68 473b dad1 8e76 b4a3 1ded 6847 3bda  .hG;...v....hG;.
0000830: d18e fe0f e9bf e4d9 0494 0028 0000       ...........(.. 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-07-14T02:37:17.217

[Fenris](http://lcamtuf.coredump.cx/fenris/debug-tools.html)是您正在寻找的工具，而不是 gdb *。**[芬里斯主页](http://lcamtuf.coredump.cx/fenris/devel.shtml)*

由传奇人物[Michal Zalewski](http://lcamtuf.coredump.cx/)撰写，正是您所寻找的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T17:12:11.257

这是我尝试使用 gdb python API - [c - GDB 自动步进 - 自动打印行，同时自由运行？](https://stackoverflow.com/a/6964213/277826)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-20T01:44:14.957

我创建了一个脚本来专门执行此操作，它使 gdb 自动发送“s”，然后连续读取 gdb 的输出，然后将结果输出到文本文件和终端。

该脚本使用 C 语言编写，并发布在我的博客上。

[http://www.codeground.net/coding/gdb-step-into-all-lines-to-get-full-application-flow/](http://www.codeground.net/coding/gdb-step-into-all-lines-to-get-full-application-flow/)

我在搜索该脚本时遇到了这个问题，但找不到与它完全相同的东西，所以希望这对其他人有帮助。

```
wget http://www.codeground.net/downloads/gdbwalkthrough.c
gcc gdbwalkthrough.c -o gdbwalkthrough
./gdbwalkthrough <application full path> [application arguments] 
```

此脚本可以轻松修改为仅单步执行一组行，或者仅单步执行预定义的次数，只需替换

```
while(1)
    writeDebugger("s",NULL); 
```

有了这个

```
int x=1000;
while(x--)
    writeDebugger("s",NULL); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-20T03:18:57.993

AFAIK，自动化 gdb 并不容易。您可以尝试[洞察力](http://sources.redhat.com/insight/)，看看少量的 tcl scritiability 是否可以帮助您。

您可以尝试使用一些期望脚本自动化 gdb/MI。

在可自动化调试器中，我发现 Sun 的 dbx 是最好的。它集成了一个“ksh”。它在[linux上可用](http://developers.sun.com/sunstudio/features/index.jsp)

# regex - 正则表达式匹配的 Groovy 语法

> ID：764387
> 
> 赞同：54
> 
> 时间：2009-04-18T22:43:40.457
> 
> 标签：regex, groovy

以下 Perl 代码的 Groovy 等价物是什么？

```
my $txt = "abc : groovy : def";
if ($txt =~ / : (.+?) : /) {
  my $match = $1;
  print "MATCH=$match\n"; 
  # should print "MATCH=groovy\n"
} 
```

我知道有不止一种方法可以做到这一点（包括常规的 Java 方式）——但什么是“Groovy 方式”呢？

这是一种方法，但感觉有点笨拙——尤其是数组符号 ( `m[0][1]`)，感觉有点奇怪。有更好的方法吗？如果不是，请描述背后的逻辑`m[0][1]`。

```
def txt = "java : groovy : grails"
if ((m = txt =~ / : (.+?) :/)) {
  def match = m[0][1]
  println "MATCH=$match"
} 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-04-18T23:42:26.850

`m[0]`是第一个匹配对象。
`m[0][0]`是在这场比赛中匹配的所有内容。
`m[0][1]`是本场比赛的第一个捕获。
`m[0][2]`是本场比赛的第二次夺冠。

根据我读过的内容（我没有在 Groovy 中编程，也没有手边的副本），给定

```
def m = "barbaz" =~ /(ba)([rz])/; 
```

`m[0][0]`会 会`"bar"`
`m[0][1]`会`"ba"`
`m[0][2]`会 会`"r"`
`m[1][0]`会`"baz"`
`m[1][1]`会`"ba"`
`m[1][2]`会 会`"z"`

我受不了不知道我是否正确，所以我下载了groovy并写了一个例子：

```
def m = "barbaz" =~ /(ba)([rz])/;

println "m[0][0] " + m[0][0]
println "m[0][1] " + m[0][1]
println "m[0][2] " + m[0][2]
println "m[1][0] " + m[1][0]
println "m[1][1] " + m[1][1]
println "m[1][2] " + m[1][2] 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-04-18T23:38:29.013

这是我可以实现的与 Perl 代码最接近的匹配：

```
def txt = "abc : groovy : def"
if ((m = txt =~ / : (.+?) : /)) {
  def match = m.group(1)
  println "MATCH=$match"
}

// Prints:
// MATCH=groovy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T23:09:14.967

这是我对如何使用 Groovy 语法执行此操作的最佳理解（但也请参阅 lfaraone 的回复）：

```
import java.util.regex.Matcher

def txt = 'abc : groovy : def'
if (txt =~ ~/ : (.+?) : /) {
    def match = Matcher.lastMatcher[0][1]
    println "MATCH=$match"
} 
```

# bison - Lex/Yacc：输入前打印消息

> ID：764396
> 
> 赞同：4
> 
> 时间：2009-04-18T22:47:08.263
> 
> 标签：bison, yacc, lex, prompt, flex-lexer

我试图弄清楚在使用 lex/yacc (flex/bison) 时如何显示消息/提示。

例如， main 看起来像这样：

```
int main(int argc, char *argv[])
{
    yyparse();
} 
```

哪个调用yacc，哪个调用yylex()。这会产生一个在 STDIN 上等待的空行。我怎样才能显示类似...的消息

```
消息 $_
```

代替

```
_
```

其中下划线表示光标位置，等待来自 STDIN 的输入...

忘了提，我希望重复打印提示......所以在每次 lex/yacc 从标准输入请求输入之前......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-18T23:11:38.767

弄清楚了。我必须将它作为一个动作集成到我的 yacc 文件中。

我的矿看起来像：

```
int main(int argc, char *argv[])
{
    prompt();
    yyparse();
} 
```

我的 yacc 文件 (.y) 看起来像...

```
stmnt
     ： /* 空的 */
     | stmnt 不管什么 { do_something(); 迅速的（）; }
     ;

```

这样每次它解析一个stmnt（顶级）时，它都会在之后显示提示。

# python - Python 宏：用例？

> ID：764412
> 
> 赞同：21
> 
> 时间：2009-04-18T22:56:16.820
> 
> 标签：python, macros, lisp, scheme

如果 Python 有一个类似于 Lisp/Scheme 的宏工具（类似于[MetaPython](https://code.google.com/p/metapython/)），你会如何使用它？

如果你是一名 Lisp/Scheme 程序员，你会使用宏来处理哪些事情（除了在 Python 中具有明确的句法并行性的事情，例如 while 循环）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-18T23:05:46.877

我相信宏与 Python 的文化背道而驰。Lisp 中的宏允许使用[大泥球](http://en.wikipedia.org/wiki/Big_ball_of_mud)方法；您可以重新定义语言以更适合您的问题领域。相反，Pythonic 代码使用 Python 最自然的内置特性来解决问题，而不是用另一种语言更自然的方式来解决问题。

宏本质上是 unpythonic 的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-11T04:19:22.793

这是一个有点晚的答案，但[MacroPy](https://github.com/lihaoyi/macropy)是我的一个新项目，用于将宏引入 Python。我们有一个相当丰富的演示列表，所有这些都是需要宏来实现的用例，例如提供了一种非常简洁的声明类的方式：

```
@case
class Point(x, y)

p = Point(1, 2)
print p.x   # 1
print p     # Point(1, 2) 
```

MacroPy 已被用于实现以下功能：

*   案例类，来自 Scala的简单[代数数据类型](https://en.wikipedia.org/wiki/Algebraic_data_type)
*   来自函数式编程世界的模式匹配
*   尾调用优化
*   Quasiquotes，一种操作程序片段的快速方法
*   字符串插值，许多语言中的一个共同特性，以及 Pyxl。
*   跟踪和智能断言
*   PINQ to SQLAlchemy，从 C# 克隆 LINQ to SQL
*   来自 Scala 和 Groovy 的快速 Lambda，
*   解析器组合器，灵感来自[Scala 的](http://www.suryasuravarapu.com/2011/04/scala-parser-combinators-win.html).

查看链接页面以了解更多信息；我想我可以自信地说，我们展示的用例远远超过了迄今为止任何人在此线程上提出的任何建议 =D

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-19T05:45:58.990

lisp 宏的一些示例：

*   [ITERATE](http://common-lisp.net/project/iterate)这是一个有趣且可扩展的循环工具
*   [CL-YACC](http://www.pps.jussieu.fr/~jch/software/cl-yacc/) / [FUCC](http://common-lisp.net/project/fucc)是在编译时生成解析器的解析器生成器
*   [CL-WHO](http://www.weitz.de/cl-who/)，它允许指定带有静态和动态部分的 html 文档
*   [Parenscript](http://common-lisp.net/project/parenscript/)是一个 javascript 代码生成器
*   各种简单的代码包装器，例如错误处理程序（我有一个 with-gtk-error-message-handler 执行代码并在发生未处理的错误时显示 GtkMessageDialog），执行程序（例如，给定代码，在不同的线程中执行它；我有一个在不同线程中执行代码的主线程内宏；[PCall](http://marijn.haverbeke.nl/pcall/)库使用宏来包装要并发执行的代码）
*   具有宏的 GUI 构建器（例如，指定小部件层次结构和小部件的属性，并使用宏生成代码以创建所有小部件）
*   在编译期间使用外部资源的代码生成器。例如，处理 C 头文件并生成 FFI 代码的宏或基于数据库模式生成类定义的宏
*   声明性 FFI。例如，指定外部结构、函数、它们的参数类型并使用宏来生成相应的 lisp 结构、具有类型映射和编组代码的函数
*   Common Lisp 的基于延续的 Web 框架使用将代码转换为 CPS（延续传递样式）形式的宏。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-18T23:01:42.923

有一个[邮件列表发布](http://lists.warhead.org.uk/pipermail/iwe/2005-July/000130.html)（[archive.org mirror](http://web.archive.org/web/20080117093622/http://lists.warhead.org.uk/pipermail/iwe/2005-July/000130.html)）很好地解释了这一点。这篇文章是关于 Perl 的，但它也适用于 Python。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-18T23:22:39.177

在 lisp 中，宏只是抽象概念的另一种方式。

这是一个用 clojure 编写的不完整光线追踪器的示例：

```
(defmacro per-pixel
  "Macro.
Excecutes body for every pixel. Binds i and j to the current pixel coord."
  [i j & body]
  `(dotimes [~i @width]
     (dotimes [~j @height]
       ~@body))) 
```

如果你想对坐标为 (i,j) 的每个像素做一些事情，比如说，如果 i 是偶数，则画一个黑色像素，你会写：

```
(per-pixel i,j
  (if (even? i)
    (draw-black i,j))) 
```

没有宏就不可能做到这一点，因为@body 可以表示内部的任何内容（每像素 ij @body）

在 python 中也有可能发生这样的事情。你需要使用装饰器。你不能用 lisp 宏做所有能做的事情，但它们非常强大

查看这个装饰器教程： [http ://www.artima.com/weblogs/viewpost.jsp?thread=240808](http://www.artima.com/weblogs/viewpost.jsp?thread=240808)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-03-14T22:28:58.167

这是我遇到的一个真实示例，它对于宏或真正的元编程支持来说是微不足道的，但由于 Python 中两者都没有，因此必须使用 CPython 字节码操作来完成：

[http://www.aminus.net/dejavu/chrome/common/doc/2.0a/html/intro.html#cpython](http://www.aminus.net/dejavu/chrome/common/doc/2.0a/html/intro.html#cpython)

这就是在 Common Lisp 中使用常规宏和 read-macros 来扩展语法的组合解决问题的方式（如果没有后者，它可以完成，但不是前者）：

[http://clsql.b9.com/manual/csql-find.html](http://clsql.b9.com/manual/csql-find.html)

在 Smalltalk 中使用闭包和元编程解决了同样的问题（Smalltalk 是为数不多的真正获得正确消息传递的单调度 OO 语言之一）：

[http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg02096.html](http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg02096.html)

在这里，我尝试在 Common Lisp 中实现 Smalltalk 方法，这很好地说明了后者如何支持元编程：

[http://carcaddar.blogspot.com/2009/04/closure-orientated-metaprogramming-via.html](http://carcaddar.blogspot.com/2009/04/closure-oriented-metaprogramming-via.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-18T23:00:39.307

我之前见过的一些用例包括创建[类工厂](http://code.google.com/p/metapython/wiki/Tutorial)或从生产代码中[剥离日志语句。](http://blog.pythonisito.com/2009/03/announcing-metapython-macros-for-python.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-19T07:05:08.690

我认为 Python 不需要宏，因为它们对两件事很有用：

1.  为某事创建 DSL 或更雄辩的语法（Lisp LOOP 宏就是一个很好的例子）。在这种情况下，Python 哲学故意决定反对它。如果您缺少一些明确的符号，您可以随时要求 PEP。

2.  通过在编译时预先计算事物来使事情变得更快。Python 不以速度为导向，因此您始终可以使用函数。

我并不是说宏是错误的，只是它们不符合 Python 哲学。你总是可以不用它们而没有太多的代码重复，因为你有鸭子类型和运算符重载。

作为旁注，我更愿意看到 Lisp 在 Python 中的重新启动，而不是宏。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-06-11T19:37:34.280

阅读“The Lambda Papers”，您可能会大致了解为什么要使用宏。

你应该从“AIM-353 Lambda:The Ultimate Imperative”开始，然后是“AIM-443 Lambda: The Ultimate GOTO”。两者都可以在这里找到：

[http://library.readscheme.org/page1.html](http://library.readscheme.org/page1.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-06-01T10:57:08.530

Hy，为了我自己的使用，我创建了一个 Python 模块 (Espy)，它允许使用参数、循环和条件代码生成宏定义：您创建一个 source.espy 文件，然后启动相应的函数，然后生成 source.py。

它允许如下语法：

```
macro repeat(arg1):
    for i in range(%arg1%):
        socket
    print "stop"
   ...
repeat(5):
    print "Hi everybody"
    print "See you soon" 
```

相当于：

```
...
for i in range(5):
    print "Hi everybody"
    print "See you soon"
print "stop" 
```

其他语法：

```
macro doit(arg1):
    for i in %arg1%:
        socket suit(arg2):
            socket
            print %arg2%
        socket check(arg3):
            if %arg2%==%arg3%:
                socket
...
#use
doit(range(10)):
    suit(result):
        result=i*i
    check(result,25):
        print "I knew that 5*5 == 25" 
```

相当于：

```
for i in range(10):
    result=i*i
    print result
    if result==25:
        print "I knew that 5*5 == 25" 
```

此外，Espy 有 2 个函数：“macro for”和“macro if”。一个例子：

```
macro for v in [6,10,12,20,23]:
    macro if 7<%v%<22:
        True:
            print "At %v%, I'm awake."
        False:
            print "At %v%, I'm sleeping." 
```

由 Espy 翻译为：

```
print "At 6, I'm sleeping."
print "At 10, I'm awake."
print "At 12, I'm awake."
print "At 20, I'm awake."
print "At 23, I'm sleeping." 
```

完整的文档和免费下载可以在这里找到：[http ://elp.chronocv.fr](http://elp.chronocv.fr)

我在很多情况下都使用这个模块。它允许更结构化和更短的代码。有了它，我从 1000 行 espy 代码中为一个新的国际象棋引擎项目（仍在进行中）生成了 65000 行清晰高效的 p​​ython 代码。

如果 Python 可以在未来的版本中包含宏，它会变得更加令人印象深刻。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-25T08:55:04.390

我会用它来包装`yield`以使我能够构建更强大的生成器管道。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-04-23T16:27:33.173

目前，将特性添加到 Python 语言的唯一方法是通过 PEP（Python 增强提案）。这可能很慢，并且在您想向语言中添加仅对您的用例有用的功能时无济于事。

例如，[有一个 PEP 可以添加一个 do-while 循环](http://www.python.org/dev/peps/pep-0315/)。这可能会被添加到 Python 中，但 PEP 是在 2003 年创建的。我今天想编写`do-while`循环，如果 Python 有宏，我可以这样做。

同样，有一个[PEP 可以添加标记的中断并继续](http://www.python.org/dev/peps/pep-3136/)，但被拒绝了。如果带标签的 break 语句能让我的代码更清晰，我可以用宏来实现它们。

除了 PEP，我还想要一个`unless`宏。而不是写：

```
if not is_superman():
    dodge_bullet() 
```

我可以写：

```
unless is_superman():
    dodge_bullet() 
```

我想要一个`case`宏（通常`cond`在 Lisp 中调用）。而不是写：

```
if x == FOO:
    do_stuff_with_foos()
elif x == BAR:
    do_stuff_with_bars()
elif x == BAZ:
    do_stuff_with_bazs() 
```

我可以写：

```
switch x:
   case FOO:
       do_stuff_with_foos()
   case BAR:
       do_stuff_with_bars()
   case BAZ:
       do_stuff_with_bazs() 
```

这些将很容易实现为宏。更复杂、更有用的宏包括：

*   Ruby 风格的字符串插值，例如`"hello there {user}"`（可能最好作为阅读器宏实现）
*   模式匹配

目前，这些只是其他语言的功能。使用宏，我可以将它们添加到 Python。我什至可以编写包含示例实现的 PEP。（一些 PEP 已经这样做了，但他们被迫修改解释器本身的 C 源代码。）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-01-15T11:37:54.317

可能如果您想要在运行时使用源代码，例如用于调试（例如 printf 使用它的名称调试表达式的值，因此您不必编写两次）。

[我能想到在 python 中做到这一点的唯一方法是将字符串传递给 eval。](https://stackoverflow.com/questions/8573023/python-is-there-no-better-way-to-get-the-expression-in-a-debug-function)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-10T05:51:02.123

好吧，我想代替

```
print >> sys.stderr, "abc" 
```

来写

```
err "abc" 
```

在一些有许多调试打印输出语句的脚本中。

我可以

```
import sys
err = sys.stderr 
```

进而

```
print >> err, "abc" 
```

哪个更短，但这仍然需要太多字符。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-01-24T18:08:35.137

我想使用宏在 python 代码中启用 sql 语句。- 从表 1 中选择 *

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-03-11T18:53:32.070

来自 C 世界，我非常感谢能够有效地记录丰富的消息。而不是写

```
if logger.level > logger.DEBUG:
    logger.log('%s' % (an_expensive_call_that_gives_useful_info(),)) 
```

使用宏，可以改为执行类似的操作

```
DEBUG('%s' % (an_expensive_call_that_gives_useful_info(),)) 
```

# lambda - 冯诺依曼机器和 Lambdas

> ID：764414
> 
> 赞同：2
> 
> 时间：2009-04-18T22:57:18.347
> 
> 标签：lambda, von-neumann

[布赖恩在他对“副作用是好事吗？”](https://stackoverflow.com/questions/763835/are-side-effects-a-good-thing)这个问题的论证中的前提。很有趣：

> 计算机是 von-Neumann 机器，旨在与效果很好地配合使用（而不是设计为与 lambda 配合使用）

我对这些方法的并置感到困惑。我不能把它们看成黑白的。什么是证明价值：

> 计算机是 von-Neumann 机器，旨在与效果一起工作 [1]

最后一部分让我感到困惑：

> 而不是被设计为与 lambdas [2] 一起工作

Lambda 是否用作函数式编程的符号？还是它们是函数式编程的委婉说法？真正的讯息是什么？

在什么意义上，前提 [1] 和 [2] 的部分是正确的？回复中隐藏的前提是什么？有人可以证明最初的前提吗？冯诺依曼机器和 Lambda 是如何真正工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-19T00:14:50.300

这是*我*的意思更深入的内容，尽管看看其他人是否同意或他们必须说什么会很有趣。

想想今天的计算机是如何工作的。您拥有具有整数和浮点寄存器的硬件，以及大量随机存取存储器，以及主要形式为“基于读取此寄存器/存储单元的值，将这个新值插入此寄存器的指令” /细胞'。（当涉及到高速缓存行和一致性以及内存模型等等时，更新内存单元具有各种性能影响。）整数是 32 位或 64 位，几乎所有编程语言都显示这些与硬件完全匹配的数据类型。几乎每个运行时都使用一个小的调用堆栈，其中堆栈分配的对象很便宜，以及一个更昂贵的“堆”，当需要非基于堆栈的生命周期时，可以在其中创建和销毁其他对象。

现在考虑大多数现代函数式编程语言。不变性是常态；您很少会用新值“戳”内存。（这意味着你创造了更多*新的*对象，这意味着您分配了更多。） Lambda 和延续是常态；您很少有与堆栈相对应的对象生命周期。（事实上​​，一些 FP 运行时不使用堆栈；在 CPS 实现中，堆栈和程序计数器的概念是不合时宜的。）递归是一个循环结构，因此您至少需要“尾”调用来不消耗反正堆栈。几乎所有东西都需要“堆”分配，当然你需要一个垃圾收集器。代数数据类型提供标记数据；理论上，这些标签只需要额外的 2 或 3 位数据，但为了匹配运行时，它们通常需要额外的内存字或更多。...我有点曲折，但你*最常用*FP 语言做的事情往往与那些事情完全对应*在典型的计算机硬件架构和基本语言运行时上*扩展最差*或*最昂贵。**

 *不一定要那样。可以想象一个运行时避开堆栈并快速进行堆/分配（而不是多线程应用程序的瓶颈）的世界。可以想象这样一个世界，其中可互操作的整数类型有 29 位或 60 位，而运行时/硬件使用单词的额外剩余位，例如 GC、代数类型标签或诸如此类。（我认为一些 FP 实现/运行时会做一些这些技巧。）等等等等......关键是，如果你将现代函数式语言作为给定的，然后围绕它设计运行时/硬件，它看起来会非常不同从今天的典型硬件/运行时。

（我不认为我沟通得那么好，而且我对许多我不确切知道的细节不精确，但希望你能在这里理解我论文的要点。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T23:05:23.507

我不完全确定你在问什么，但是当我读到它时，你在问他所说的 lambdas 是什么意思？

他指的是[lambda 演算](http://en.wikipedia.org/wiki/Lambda_calculus)，它构成了函数式编程的大部分理论基础。它是（除其他外）描述和推理高阶函数的抽象符号。

冯诺依曼机器基本上就是我们所拥有的。程序由操作和访问存储（我们的 RAM）的指令执行。也就是说，一切都是通过副作用隐式完成的。数据从 RAM 中的某个区域读取，经过一些处理，然后写回 RAM 中的某个（可能是其他）区域。在没有副作用的情况下，CPU 将被限制在上电时处理其寄存器中碰巧出现的任何垃圾数据。

Lambda 演算没有副作用的概念，因此基于此原理的机器不会区分“CPU 可以访问的内容”（本质上是我们的寄存器）和“可以间接访问的内容”（我们的 RAM）。这样一台机器中的一切都将基于函数原理，即函数接受一个或多个参数，并返回一个新值，从不修改现有值。（不，我不确定这在硬件中如何工作...... :)）

这是否回答你的问题？

# bezier - 近似 N 次贝塞尔曲线

> ID：764415
> 
> 赞同：4
> 
> 时间：2009-04-18T22:58:00.187
> 
> 标签：bezier

我知道有[逼近三次贝塞尔曲线](https://stackoverflow.com/questions/427796/approximating-nonparametric-cubic-bezier)的方法（[这个页面](http://www.timotheegroleau.com/Flash/articles/cubic_bezier_in_flash.htm)也是一个很好的参考），但是有没有更快的方法来逼近 N 度的贝塞尔曲线？还是只能使用下面的概括？

来自维基百科：

n次贝塞尔曲线可以概括如下。给定点 P0、P1、...、Pn，贝塞尔曲线为：

![替代文字](https://upload.wikimedia.org/math/e/e/5/ee540a45155c347d28adddfcb0486b42.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T16:36:35.477

一个典型的（一般）加速像这样的表达式评估的方法是通过“前向差分”我快速查看了[这个](http://web.archive.org/web/20060510235113/http://www.cosc.brocku.ca/~cspress/HelloWorld/1999/04-apr/rendering_bezier_forms.html)，这看起来是正确的方法，但我不能保证它的准确性，因为我没有没有正确阅读。希望有帮助（警告，我也没有完全阅读你的链接，所以这可能不是什么新鲜事......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T22:17:36.680

前向差分非常快，但它需要一些设置成本，并且当您沿着曲线前进时它会累积误差。如果您使用的是双精度浮点数，则无需过多担心错误问题，但如果您使用的是定点或整数，则可能很重要。

根据我的经验，前向差分设置成本只值得超过 2*(N+1) 次评估；因此，对于（例如）三次曲线，如果您在曲线上需要少于八个点，则最好使用原始帖子中的公式直接评估曲线八次。

请注意，如果您扩展多项式并收集常用 N 值的项，则该公式实际上非常快。

# java - 是否可以在 JTable 中包含 JButton？

> ID：764417
> 
> 赞同：11
> 
> 时间：2009-04-18T22:59:38.123
> 
> 标签：java, swing, jtable, jbutton

我有一个存储数据库查询结果的 JTable，到目前为止一切顺利。我想要的是每个表中的最后一列有一个可点击的 JButton，它将打开该行中表示的对象的编辑屏幕，这意味着该按钮将需要从它的表中知道表中第一列的详细信息自己的行（数据库中的 ID）。

有什么建议吗？我已经尝试只添加 JButtons，但是当我尝试运行它时它们变成了文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-06-02T01:25:12.553

与上面的教程相反，有一种方法可以做到这一点，而无需复杂的定位数学、自定义鼠标侦听器和自定义表格模型。相反，它可以通过遵循此处描述的模式的单个简单自定义类来完成：

[http://web.archive.org/web/20100623105810/http://ivolo.mit.edu/post/A-Simple-Pattern-for-Embedding-Components-into-a-Swing-JTable.aspx](http://web.archive.org/web/20100623105810/http://ivolo.mit.edu/post/A-Simple-Pattern-for-Embedding-Components-into-a-Swing-JTable.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-08-19T20:15:28.180

您可能还会发现我关于类似主题的教程（在这种情况下，使用 JPanel）也很有帮助：[Custom JPanel cell with JButtons in JTable](http://pekalicious.com/blog/custom-jpanel-cell-with-jbuttons-in-jtable/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-18T23:23:25.617

看看 Sun 对`JTable`组件的介绍，特别是关于[Editors 和 Renderers](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#editrender)的部分。它讨论了alternative[`CellRenderers`](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#renderer)和[`CellEditors`](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#editor). 您需要做的是创建（或借用） a`ButtonCellRenderer`和 a`ButtonCellEditor`然后将它们应用到您的`JTable`. 链接文章中的示例应为您提供所需的所有信息。

# javascript - 如何捕获在包含多个表单的页面上按下的输入键？

> ID：764427
> 
> 赞同：17
> 
> 时间：2009-04-18T23:06:24.550
> 
> 标签：javascript, jquery, user-input, return, keyboard-events

我继承了一个 Web 应用程序，其中在任何输入字段中按回车键的通常功能已被禁用，原因是页面包含多个表单，并且应用程序无法确定（或者，我被告知) 采取行动的形式。应用程序的设计没有提交按钮（如 input type="submit"），相反，设计人员已经进行了 onclick 处理。这是在其中一个页面上定义的两个按钮，包括用于说明

```
<input type="button" value="LOGIN"  name="btnLoginOk" onclick="submit(); />"

<input type="button" class="button-click-grey" value="Find Link Partners"  
    onclick="raiseEvent('SubmitForm','',this);" style="cursor:pointer;" /> 
```

但我真的希望能够允许用户在他们愿意的情况下按回车键，例如，如果他们刚刚输入了与 LOGIN 关联的字段，然后检测到并执行 onclick="submit();"

也许 jQuery 有一个解决方案。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-19T02:52:52.040

> 页面包含多个表单，应用程序将无法确定（或者，我被告知）要执行哪个表单。

当您在输入控件上按 enter 时，浏览器会*在该表单中*查找第一个提交按钮并模拟单击它。在多个按钮的情况下，第一个将在键盘输入时按下（这绝不是一成不变的，浏览器可能会偏离这一点）。

如果您有两个表单，则获得按键的表单将按下*第*一个提交按钮。因此，您实际上并不需要对此进行任何特殊处理。你只需要停止挡路。

您可以在代码中以表格形式模拟这一点：

```
 $( 'form' ).bind('keypress', function(e){
   if ( e.keyCode == 13 ) {
     $( this ).find( 'input[type=submit]:first' ).click();
   }
 }); 
```

或窗口（用于演示大致发生的情况）：

```
 $( window ).bind('keypress', function(e){
   if ( $( e.originalTarget ).is( ':input' ) && e.keyCode == 13 ) {
     $(  e.originalTarget )
       .closest( 'form' )
         .find( 'input[type=submit]:first' )
           .click();
   }
 }); 
```

当然，假设`.preventDefault()`该事件尚未被调用。

底线：如果您有事件，您可以从中推断出它来自什么元素，因此它属于哪种形式。即使在这种情况下：

```
<input type="button" value="LOGIN" name="btnLoginOk" onclick="submit();"> 
```

这`submit()`是一个全局函数，但是当它被调用时，它的 context ( `this`) 将是元素，你可以这样做`submit(e){ this.form.submit(); }`。

> 应用程序的设计没有提交按钮（如 input type="submit"），相反，设计人员已经进行了 onclick 处理。

在我看来，这听起来像是设计师没有完全理解 DOM / 表单事件，并且正在解决这个问题。另一个可能的原因可能是程序很旧，并且是在这些东西不像今天那样稳定或没有正确记录的时候重新设计的。

替换这个：

```
<form action="/login/" method="POST">
  [...]
  <input type="button" value="LOGIN" name="btnLoginOk" onclick="submit();">
</form> 
```

有了这个：

```
<form action="/login/" method="POST">
  [...]
  <input type="submit" value="LOGIN" name="btnLoginOk">
</form> 
```

然后向所有需要它的表单添加一个键处理程序，如果满足某些条件，它会检测并禁止输入（对于您实际上确实想要禁用它的表单）。

```
// for all forms that POST that have 2+ submit buttons
$( 'form[method=post]:has(:submit:eq(1))' ).bind('keydown', function(e){
  // if target is an enter key, input element, and not a button
  if ( e.keyCode == 13 && e.target.tagName == 'INPUT' && 
       !/^(button|reset|submit)$/i.test( e.target.type ) ) {
    return false;  // kill event
  }
}); 
```

或者更好的是：使用知道如何为您执行此操作的表单验证库（或 jQuery 插件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-07-26T15:41:09.467

您可以在 jquery 中为 Enter 键绑定按键事件：

```
$("form").bind("keypress", function(e) {
   if (e.keyCode == 13) {
      your_custom_submit_function();
      return false; // ignore the default event
   }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-18T23:33:45.827

手指交叉这会工作

```
$(document).ready(function() {
  var focussed_form;
  $('input').focus(focus_form);
  $('input').blur(unfocus_form);
  $('textarea').focus(focus_form);
  $('textarea').blur(unfocus_form);
  $('select').focus(focus_form);
  $('select').blur(unfocus_form);

  $(document).keypress(function(e) {
    if(e.keyCode == 13) 
    {
      $(focussed_form).trigger('submit'); 
    }
  });

  function focus_form(){
    focussed_form = $(this).closest('form');
  }

  function unfocus_form(){
    focussed_form = NULL;
  }

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-18T23:40:42.223

我认为您不需要 jQuery 或 javascript。您确实可以检测到用户在哪个表单上点击了提交，甚至可以检测到哪个提交按钮被点击（如果每个表单有多个提交按钮）。

这是您将使用的代码：

```
<form action="http://foo.com/uri" method="POST">
  <input type="submit" name="action1a" value="add" />
  <input type="submit" name="action1b" value="delete" />
</form>
<form action="http://foo.com/uri" method="POST">
  <input type="submit" name="action2a" value="add" />
  <input type="submit" name="action2b" value="delete" />
  <input type="submit" name="action2c" value="someOtherAction" />
</form> 
```

然后对于表单处理脚本，您只需检查提交按钮的名称，例如：

```
if (isset($_POST['action1a'])) ... // PHP syntax 
```

或者，您可以使用图像作为提交按钮，然后您可以为所有提交按钮使用相同的名称并检查它们的值——如果每个按钮都有唯一的`value`属性，您也可以使用普通提交按钮执行此操作。

* * *

编辑：另一种方法是结合 POST 和 GET 值，即：

```
<form action="http://foo.com/uri?form=1" method="POST">
  <input type="submit" name="action" value="add" />
  <input type="submit" name="action" value="delete" />
</form>
<form action="http://foo.com/uri?form=2" method="POST">
  <input type="submit" name="action" value="add" />
  <input type="submit" name="action" value="delete" />
</form> 
```

# asp.net-mvc - 内部列表对象上的 Linq2Sql 管道和过滤器

> ID：764433
> 
> 赞同：0
> 
> 时间：2009-04-18T23:10:29.953
> 
> 标签：asp.net-mvc, linq, linq-to-sql

我正在使用带有管道/过滤器的 Linq2Sql。我的数据库由 Accounts 和 Transactions 表组成，其中每个 Transaction 行都链接到一个 Account。

显示帐户时，我想显示该帐户及其所有交易。很简单。例如，现在我试图限制 /accounts/4/{year}/{month}/{day} 显示的交易。

```
帐户 a = AccountsRepository.GetAccounts()
               .WithID(id)
               .FilterTransactions(年、月、日)
               .SingleOrDefault();

```

那么如何编写一个过滤器来返回帐户，同时过滤返回的交易呢？

当我在没有 FilterTransactions 的情况下运行分析器时，我得到 2 个 sql 调用......

```
exec sp_executesql N'SELECT [t0].[ID], [t0].[BankName],
[t0].[BankCode], [t0].[CardNumber], [t0].[Locale]
FROM [dbo].[帐户] AS [t0]
WHERE [t0].[ID] = @p0',N'@p0 int',@p0=1

exec sp_executesql N'SELECT [t0].[ID], [t0].[AccountID],
[t0].[日期], [t0].[描述], [t0].[金额]
FROM [dbo].[交易] AS [t0]
WHERE [t0].[AccountID] = @p0',N'@p0 int',@p0=1

```

我的想法是，在过滤器中执行类似（当年的简单示例）

```
公共静态 IQueryable<Account> FilterTransactions(
这个 IQueryable<Account> qry, int? 年，诠释？月，int？天）
{
    ...循环遍历每个帐户
    a. 交易 = a. 交易
    .Where(t => t.Date.Year == 年);
}

```

但是，a.Transactions 是一个 EntitySet，而 Where 返回一个 IEnumerable。

另一种解决方案是将帐户返回到我的视图，然后在视图中调用 HtmlHelper，该 HtmlHelper 调用另一个操作来显示事务。但是，这会导致 1 个额外的 sql 调用，并且还会导致我在显示所需信息时出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-18T23:46:27.747

在同一个 SQL 连接和同一个 datacontext 对象中，一个获取账户信息的 SQL 调用和一个获取交易的集合操作几乎是不可避免的。据我了解，您基本上必须编写一个返回两个表结果的存储过程，然后将讨厌的结果解释回您想要的两条信息。

也许比我更有智慧的人可以用 Linq 做到这一点，我知道你可以直接在 SQL 中做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T08:56:38.623

相反，我决定通过创建一个包含 Account 对象和交易列表的 ViewModel 来实现不同的方式。交易在同一操作中被过滤。由于延迟加载实际帐户对象上的实体事务，除非您对其进行迭代，否则永远不会调用它们。

# asp.net-mvc - 如何更改asp.net mvc中的默认路由点静态html文件

> ID：764438
> 
> 赞同：2
> 
> 时间：2009-04-18T23:12:47.140
> 
> 标签：asp.net-mvc

我们如何将默认文件指向**index.html**之类的东西，而不是默认操作**Home/Index**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-18T23:22:01.970

在 IIS 中将默认文档配置为列表顶部的 index.html？

或者您可以将 IgnoreRoute 添加到您的 global.asax

```
公共静态无效注册路由（RouteCollection 路由）
{
   路线.RouteExistingFiles = true;
   routes.IgnoreRoute("{file}.html");
   ...

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-17T09:06:50.447

我发现在 IIS 6 下，当您使用通配符总括将大多数请求路由到 MVC 时，至少默认文档拾取受到干扰。

我的解决方案（仅针对我的根路径）如下：（在 global.asax 中）

if (Request.Path == "" || Request.Path == "/") { Response.Redirect(Request.Path + "index.htm",true); 返回; }

这获取了请求并将其重定向到正确的位置。使用 Context.RewritePath(Request.Path + "index.htm"); 重写路径 而不是重定向似乎也有效。进一步的修订可能是查看路径的最后一个字符是否为“/”，如果是，则检查相应的文件 (thatpath/index.htm) 是否存在，如果存在则重定向......这将有效地允许 MVS 保持在提供逻辑的同时工作，因此任何确实存在的具有类似默认文档的文件夹都可以提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-18T23:17:51.513

您可以通过在项目文件中添加或更改**路由来更改默认控制器操作。**`Global.asax.cs`

在模板中，包括以下内容：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = null }); 
```

如果要默认指向不同的控制器动作，只需更改上面第四行代码中匿名类型中的值即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T18:21:13.327

我添加了

```
 routes.IgnoreRoute(""); 
```

到我的路线配置。这会忽略根文件夹，如果您的根目录中有 index.html 文件，它将被拾取。

# computer-science - 为什么是二进制而不是三元计算？

> ID：764439
> 
> 赞同：87
> 
> 时间：2009-04-18T23:15:47.447
> 
> 标签：computer-science, ternary-representation

三态对象不是立即能够保存更多信息和处理更大的值吗？我知道处理器目前使用大量的异或门网络，这需要重新设计。

由于我们处于 64 位（我们可以表示 2^63 个可能的状态）计算等效的[三元](http://en.wikipedia.org/wiki/Ternary_computer)生成可以支持多 30 个十位 log(3^63-2^63) 的数字。

我想检测 +1 和 0 之间的电位差就像检测 -1 和 0 之间的电位差一样容易。

硬件、功耗或芯片密度的某些复杂性会抵消存储和计算能力的任何收益吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-04-19T05:33:11.953

*   构建使用两个以上状态/级别/其他的组件要困难得多。例如，逻辑中使用的晶体管要么是闭合的，根本不导通，要么是全开的。将它们半开将需要更高的精度并使用额外的功率。然而，有时更多的状态用于打包更多的数据，但很少（例如现代 NAND 闪存、调制解调器中的调制）。

*   如果您使用两种以上的状态，则需要与二进制兼容，因为世界其他地方都在使用它。三是因为转换为二进制需要昂贵的乘法或除法余数。相反，您直接使用四或二的更高幂。

这些是未完成的实际原因，但从数学上讲，完全有可能在三元逻辑上构建计算机。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2011-09-05T06:27:43.000

这里有很多错误信息。二进制有一个简单的开/关开关。Trinary/Ternary 可以使用 2 种模式之一：Balanced aka -1、0、+1 或不平衡的 0、1、2，但不仅仅是开或关，或者更准确地说，有 2 个“开”状态。

随着光纤和扩展硬件的扩展，三元实际上会以更低的成本将我们带到更扩展、更快的状态。现代编码仍然可以与更新的三进制代码结合使用（就像 32 位软件仍然能够在 64 位硬件上使用一样），至少在最初是这样。只需要早期的硬件来检查哪条信息通过，或者软件提前宣布它是一点点还是一点点。代码可以一次发送 3 件，而不是现代的 2 件，功率相同或更少。

使用光纤硬件，而不是现代的开/关二进制过程，它将由 0=off 和其他 2 个开关作为光的正交偏振来确定。至于安全性，这实际上可以大大提高个人的安全性，因为每台 PC 甚至用户都设置为特定的极化“规格”，该极化“规格”只能在用户和目的地之间发送/接收。其他硬件的“门”也是如此。他们不需要更大，只需选择 3 种可能性而不是 2 种。

甚至有一些理论，甚至可能开始对约瑟夫森效应进行一些测试，这将允许使用循环超导电流，顺时针、逆时针或关闭三元存储单元。

直接比较时，三元是基数经济性最高的整数基数，其次是二元和四元。甚至一些现代系统也使用一种三元逻辑，也就是 SQL，它实现了三元逻辑作为处理 NULL 字段内容的一种方式。SQL 使用 NULL 来表示数据库中缺失的数据。如果字段不包含定义的值，SQL 假定这意味着存在实际值，但该值当前未记录在数据库中。请注意，缺失值与零数值或零长度的字符串值不同。将任何内容与 NULL（甚至另一个 NULL）进行比较会导致 UNKNOWN 真实状态。例如，SQL 表达式“City = 'Paris'”对于 City 字段中带有“Chicago”的记录解析为 FALSE，但对于具有 NULL City 字段的记录，它会解析为 UNKNOWN。换句话说，对于 SQL，一个未定义的字段可能代表任何可能的值：一个缺失的城市可能代表也可能不代表巴黎。这是现代二进制系统使用三进制逻辑的地方，尽管很粗糙。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-18T23:19:51.397

当然，我们每比特可以保存更多数据，就像我们的十进制数字系统可以在单个数字中保存更多数据一样。

但这也增加了复杂性。二进制在许多情况下表现得非常好，使其操作起来非常简单。二进制加法器的逻辑比三进制数（或十进制数）的逻辑要简单得多。

您将无法神奇地存储或处理更多信息。硬件必须更大、更复杂，才能抵消更大的容量。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-04-18T23:19:54.567

其中很大一部分与比特最终表示为电脉冲这一事实有关，并且更容易构建简单区分“充电”和“不充电”的硬件，并轻松检测状态之间的转换。使用三种状态的系统必须更准确地区分“充电”、“部分充电”和“不充电”。除此之外，电子产品中的“充电”状态不是恒定的：能量最终会开始“流失”，因此“充电”状态会随着能量的实际“水平”而变化。在三态系统中，这也必须考虑在内。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-18T23:18:28.437

嗯，一方面，没有比比特更小的信息单位。对比特进行操作是处理信息的最基本和最根本的方式。

也许更强有力的原因是因为制造具有两个稳定状态而不是三个稳定状态的电子元件要容易得多。

旁白：你的数学有点不对劲。一个 64 位的三进制数中大约有 101.4 个二进制数字。解释：最大的 64 位三进制数是 3433683820292512484657849089280 (3^64-1)。要以二进制表示，它需要 102 位：101011010101101101010010101111100011110111100100110010001001111000110001111001011111101011110100000000

这个很容易理解，log2(3^64)大约是101.4376

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2011-09-08T22:10:45.877

还有一些理论表明，光纤可以使用光频率（即颜色）来区分状态，从而允许接近无限（取决于检测单元的分辨率）数量的碱基可能性。

逻辑门对于任何基础都绝对是收费的，但让我们以三进制为例：

对于三元异或门，它可以是它正在比较的三个状态中的一个（或任何一个）排他性的，或者是其他三个状态之一。它还可以将三个状态中的两个连接在一起以形成二进制输出。可能性成倍增加。当然，这将需要更复杂的硬件和软件，但复杂性应该会降低尺寸，更重要的是降低功率（读取热量）。甚至有人谈论在纳米计算系统中使用三进制，其中有一个微观的“凸起”、“孔”或“不变”来表示三种状态。

现在，我们遇到了一个 QWERTY 类型的问题。Qwerty 被设计为效率低下，因为打字机制不再存在，但今天使用键盘的每个人都学会了使用 qwerty 系统，没有人愿意改变它。当我们达到二进制计算的物理限制时，三进制和更高的基础有一天会突破这个问题。也许再过 20 年都不会，但我们都知道，我们不可能永远继续每年半年将我们的能力翻一番。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-18T23:26:40.040

我相信这是有两个原因（如果我错了，请纠正我）：首先因为 0 和 1 的值并不是真正的无电流/电流或类似的东西。噪声非常高，电子元件必须能够区分从 0.0 到 0.4 波动的值是 0，从 0.7 到 1.2 是 1。如果添加更多级别，则基本上会使这种区分变得更加困难。

第二：所有布尔逻辑将立即失去意义。而且，由于您可以从布尔门和总和以及其他所有数学运算中实现求和，因此最好有一些可以很好地映射到数学实际用途的东西。假/可能/真之间的任意对的布尔真值表是什么？

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-03-24T03:56:25.577

另一个主要障碍是需要定义大量的逻辑操作。运算符的数量由公式 b^(b^i) 找到，其中 b 是基数，i 是输入数。对于两个输入的二进制系统，这适用于 16 个可能的运算符。并非所有这些通常都在门中实现，并且一些门涵盖了多个条件，但是所有这些都可以使用三个或更少的标准门来实现。对于一个双输入三进制系统，这个数字要高得多，约为 19683。虽然其中几个门彼此相似，但最终手动设计基本电路的能力几乎是不可能的。即使是工程专业的新生也能够在头脑中设计基本的二进制电路。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-31T15:05:28.807

螺丝球的回复是正确的，并纠正了这里提供的一些错误陈述。那些回答分数正值的人完全错过了基于0、+1和-1的三元系统的概念。当俄罗斯人在 1950 年代首次建造时，苏联和美国之间的竞争非常激烈。我怀疑两者之间的政治与美国二元对苏联三元的最终受欢迎程度有很大关系。

根据我的阅读，有一些三元计算机正在使用中。莫斯科的大学有一些在使用，IBM 的实验室也有一些。有其他人的参考，但我无法区分它们有多严重，或者它们是否只是为了实验或玩耍。显然，它们的建造成本要低得多，而且它们使用的能源也少得多。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-02-28T16:27:13.727

我敢肯定，其中很多都与数字信号的错误检查有关。例如，在量子计算中，这项任务几乎是不可能的，但并非不可能实现非克隆原理，而且还因为状态数量增加了。对于两种状态，错误检查的过程并不简单，但相对容易。对于三种状态，错误检查变得无限困难。这也是为什么排除了具有几乎无限多状态的模拟计算机的原因。

如果您对 Quantum Computing 感兴趣，尽管研究球体封装和量子错误检查，那里有一些非常简洁的东西。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-09-08T22:32:17.473

要让电路以二进制以外的方式运行，您必须定义其他状态的表示方式。你提出了一个-1、0和+1的系统，但是晶体管不是这样工作的，它们喜欢让电压或电流只在一个方向上流动。制作一个三态位需要 2 个晶体管，但您可以用相同的晶体管制作 2 个二进制位，并具有 4 个状态而不是 3 个状态。二进制在低电平上更实用。

如果您尝试在电路上设置阈值并改用 0、+1、+2，则会遇到不同的问题。我知道的不够详细，但对于逻辑电路来说，麻烦多于其价值，尤其是当该行业已经完全致力于二进制时。

有一个领域使用多个级别来获得每位以上 2 个状态：[MLC](http://en.wikipedia.org/wiki/Multi-level_cell)闪存。即使在那里，级别的数量也将是 2 的幂，因此可以轻松地将输出转换为二进制以供系统的其余部分使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-05T15:39:24.837

如果我们使用 3 个状态，那么由此产生的主要问题是

1.  如果我们使用单极性信号，则噪声容限会降低，从而增加误码率。
2.  为了使单极信号保持噪声容限恒定，我们必须增加电源，因此功耗会增加。
3.  如果我们使用双极信号，那么信号的总摆幅会增加，从而增加损耗。
4.  必须在多层 PCB 中添加额外层以解决双极信号中的负摆幅。

希望我有说服力

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-02-16T03:59:05.767

我认为三元会更有效。它只是从未流行过。二进制登上舞台，现在切换到三进制将改变我们所知道的一切。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-11-30T02:00:35.690

当然，但是三元“位”（tet？）会更复杂，您仍然会存储相同数量的信息，只是在 base3 中而不是 base2 中，并且如果两态组件的强大功能就是简单性。为什么不直接建立一个 10 州基地 10

二进制计算与二进制 AND、OR 和 NOT 门有关，它们非常简单并且能够组合成任意复杂的结构。它们实际上是您的计算机进行的所有处理的基石。

如果有严重的情况需要切换到三进制或十进制，那么他们会这样做。这不是“他们像那样尝试过它只是卡住了”的情况

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2013-03-24T21:55:41.980

我认为它更多地与可编程性、条件语句以及晶体管的有效使用和功能有关。很明显，如果有电流通过电路，嵌套的 IF 是正确的，但如果解决方案可以通过一千条不同的路径实现，程序怎么知道该怎么做呢？人工智能很有趣，其中记忆和学习远比强大的计算能力重要。

# unix - 当我通过 Find 只知道其名称时无法找到目录？

> ID：764440
> 
> 赞同：0
> 
> 时间：2009-04-18T23:15:52.063
> 
> 标签：unix, find

我正在尝试通过 Find 找到名为 macports 的目录。我不知道它在我的电脑里。

我试过不成功

```
find --mindepth 777 macports 
```

**你怎么能找到目录？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-18T23:19:08.593

```
find / -name macports -type d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T23:17:34.117

尝试

```
find . | grep macports 
```

从您可能认为它存在的任何父目录中。根据您的系统，您也可以尝试

```
locate macports 
```

# shared-libraries - 基于 3rd 方库构建自己的应用程序是否常见？

> ID：764443
> 
> 赞同：1
> 
> 时间：2009-04-18T23:16:36.883
> 
> 标签：shared-libraries

不确定这个问题是否愚蠢。

但是当我做一些（小）副项目时。我总是在网上冲浪并尝试找到一些第三个图书馆（最好是免费的），然后建立自己的。

有些是控制扩展，例如文件系统浏览器树视图。其中一些库非常流行，例如 iTextSharp。有些非常小众，仅用于解析某些专有文件格式。

我只想问，你也这样吗？（为您自己的项目使用 3rd 方库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-18T23:34:02.753

我的观点，但我可能错的是：每当我需要一个组件来做我需要的事情时，例如“在 C# 中管理一个 ZIP 文件”，我首先开始在网上查找，看看我能找到哪些代码和/或组件.

大多数时候你可以很容易地找到代码，因为你可能不是第一个想要这样做的人。然后我也在查看完整的组件，例如 Chilkat 有一些很好的组件来管理 ZIP。

像这样的组件的优势在于，它们已经开发了很长时间，并且已经发现了大多数错误。当然，有时它们会花钱，但如果这样的组件只需几百美元，大多数时候购买它会更便宜，然后自己开发（这需要再次进行更广泛的测试）。

我的老板总是问：哪个更便宜？自己构建完整的东西，或者只是从知道他们在做什么的一方在线购买？

Telerik (www.telerik) 控制装置也是如此。当然，这套设备的成本大约是 1500 美元或其他东西，但是创建我们需要的控件可能要花费我们大约 3 倍的成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-18T23:44:55.237

使用 3rd 方库和组件进行开发是很常见的，但与任何其他工程选择一样，它是各种风险和收益的权衡。

选择使用封闭源代码的 3rd 方库会带来最大的风险，因为如果出现问题，您只能由提供者来解决它。因此，选择一家拥有长期可靠业绩记录的公司。

如果库是开源的，那么您将始终可以选择自己解决任何问题。许多人可能会争论这一点，但您可能会发现技术帮助/参考资料更难获得。

事实上，我建议在尝试为可能已经完成的事情编写任何代码之前，始终寻找一个开源库。大多数开源库都由不止一个人开发，并且经过改进以避免许多您可能不知道的陷阱。好好利用它。并让自己专注于您的问题所独有的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-18T23:23:06.540

如果您了解自己在做什么，我认为没问题，而不仅仅是猴子粘贴其他人的代码。

# c# - 每台服务器的连接数？C#, 网页

> ID：764448
> 
> 赞同：0
> 
> 时间：2009-04-18T23:17:55.910
> 
> 标签：c#, .net, httpwebrequest

我正在连接到第 3 方服务器。我现在知道他们允许来自同一个远程用户的 8 个连接。但是我不知道他们是否会提高或降低连接限制。所以我希望我的应用程序能够动态找出。我怎样才能做到这一点？

## 我正在使用 C#，MSVS 2008

我开始为任何能给我工作 C# 的人提供赏金。如果没有人这样做，那么我会给它最好的答案。

我发现这很难做到，并且有几次失败的尝试:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-18T23:20:36.857

这不是服务器默认提供给客户端的信息。唯一知道的方法是保持打开连接直到它失败（坏主意），或者要求服务器所有者提供您可以轮询的服务，该服务会返回此信息。

编辑：在对这个问题进行了更多思考之后，我不确定是否可以通过“探测”以任何真正的准确度来确定这一点。如果服务器`503 Server Busy`在达到其连接限制时返回（我假设在我提出最初的建议时会发生这种情况），那么测试会更容易。但通常当服务器超出其连接限制时，它们只是在新连接可用之前不响应。客户端只是等待响应。没有硬性方法可以区分由于已达到其连接限制而需要 10 秒响应的服务器和由于任何其他原因而需要 10 秒响应的服务器。

此外，即使您仍然尝试以这种方式对其进行测试，您对服务器发出的请求也需要保持打开足够长的时间，以确保您创建的*第一个*连接（以及所有后续连接）在第 n 个请求时仍然打开超时。这意味着要么调用一个需要任意长时间才能返回的服务——一个长时间运行的进程，要么调用一个 Thread.Sleep(); 或下载不方便的大文件。这两种方法充其量都是极其低效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:17:56.660

穷人的做法是向 netstat 发送外壳，获取标准输出并检查它。它为您提供与其他计算机的当前连接的快照。由此您可以确定您连接到特定服务器的次数。

-大学教师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-26T13:51:00.703

在您的情况下，更好的主意可能是不在乎。我会尝试一一打开连接并检查应用程序的性能。只要通过打开另一个连接来提高性能，就继续打开新的连接。当性能停止增加时，您将合理地接近最佳连接数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T14:25:07.080

我会接受这个赏金的好先生。不完全确定您为什么要这样做以及为什么有人允许 8 个连接。

> 定义于 1999 年 (RFC 2616) “使用持久连接的客户端应该限制他们维护到给定服务器的同时连接的数量。单用户客户端不应与任何服务器或代理保持超过 2 个连接。一个代理应该使用最多 2*N 个连接到另一个服务器或代理，其中 N 是同时活跃的用户数。这些指南旨在改善 HTTP 响应时间并避免拥塞。” 由于开发人员正在使用 AJAX 或类似 AJAX 的请求来更新网页，因此越来越多地讨论了 http 限制。

正如 RFC 所说，我只能获得 2 个与 Web 服务器的开放连接。

但这里的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Threading;

namespace ConnectionTest
{
    public class RequestCounter
    {
        public int Counter = 0;
        public void Increment()
        {
            Interlocked.Increment(ref Counter);
        }
    }

    public class RequestThread
    {
        public AutoResetEvent AsyncWaitHandle { get; private set; }
        public RequestCounter RequestCounter;
        public String Url;
        public HttpWebRequest Request;
        public HttpWebResponse Response;

        public RequestThread(AutoResetEvent r, String u, RequestCounter rc)
        {
            Url = u;
            AsyncWaitHandle = r;
            RequestCounter = rc;
        }

        public void Close()
        {
            if (Response != null)
                Response.Close();

            if (Request != null)
                Request.Abort();
        }
    }

    public class ConnectionTest
    {
        static void Main()
        {
            string url = "http://www.google.com/";
            int max = GetMaxConnections(25, url);
            Console.WriteLine(String.Format("{0} Max Connections to {1}",max,url));
            Console.ReadLine();
        }

        private static int GetMaxConnections(int maxThreads, string url)
        {
            RequestCounter requestCounter = new RequestCounter();

            List<RequestThread> threadState = new List<RequestThread>();
            for (int i = 0; i < maxThreads; i++)
                threadState.Add(new RequestThread(new AutoResetEvent(false), url, requestCounter));

            List<Thread> threads = new List<Thread>();
            foreach (RequestThread state in threadState)
            {
                Thread t = new Thread(StartRequest);
                t.Start(state);
                threads.Add(t);
            }

            WaitHandle[] handles = (from state in threadState select state.AsyncWaitHandle).ToArray();
            WaitHandle.WaitAll(handles, 5000); // waits seconds

            foreach (Thread t in threads)
                t.Abort();

            foreach(RequestThread rs in threadState)
                rs.Close();

            return requestCounter.Counter;
        }

        public static void StartRequest(object rt)
        {
            RequestThread state = (RequestThread) rt;
            try
            {
                state.Request = (HttpWebRequest)WebRequest.Create(state.Url);
                state.Request.ReadWriteTimeout = 4000; //Waits 4 seconds

                state.Response = (HttpWebResponse)state.Request.GetResponse();
                if (state.Response.StatusDescription.Equals("OK", StringComparison.InvariantCultureIgnoreCase))
                    state.RequestCounter.Increment();

                //Do not close, or you will free a connection. Close Later
                //response.Close(); 
            }
            catch (WebException e)
            {
                //Console.WriteLine("Message:{0}", e.Message);
                state.Close();
            }
            catch (ThreadAbortException e)
            {
                //Console.WriteLine("Thread Aborted");
                state.Close();
            }
            catch(Exception e)
            {
                //Console.WriteLine("Real Exception");    
                state.Close();
            }
            finally
            {
                state.AsyncWaitHandle.Set();
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-18T23:21:52.627

这里有一些伪代码：

```
connection = MakeNewConnection("ServerAddress");
while (connection.connected)
{
connectionCounter++;
connection = MakeNewConnection("ServerAddress");
} 
```

最后，您的 connectionCounter 应该包含您可以建立的总连接数。如果您愿意，我实际上可以看到这需要什么样的 C# 代码。

PS。这对服务器来说不是一件好事，而且它可能会在一天内让你被禁止：P。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T12:31:20.823

好吧，如果您要连接的服务器是 Windows 机器并且正在运行 WMI，那么您只需确定此信息存储在哪个注册表项中并在那里获取信息。也就是说，如果您连接的用户具有 WMI 权限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T13:56:53.263

```
int counter = 0;
while(true) {

     try{
            Open New Connection
            counter++;

        }
        catch()
        {
           Trace.WriteLine(counter);
        }
} 
```

一定喜欢使用异常来控制流；）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-26T13:27:09.917

我无法发表评论:) 但[唐的](https://stackoverflow.com/users/300/don-dickinson)回答是可靠的。根据您需要监控服务多长时间，您可以安排 netstat 将管道输出到文件，并在时间段结束时查看数据。

要清理输出数据以查看您想要的内容，可能需要结合使用 logparser 和/或 excel。

netstat 的好处是您可以消除“喋喋不休”，只看到与感兴趣的进程相关的连接（通过 pid）。

否则，您可以通过 tcpv4（或 v6）性能计数器监视使用 tcp 的服务器连接数。此连接将包括与服务器的所有连接，但您可能能够大致了解您要查找的内容。

# ruby-on-rails - ActiveRecord 在 App Engine 上不起作用 - 有什么替代方法？

> ID：764450
> 
> 赞同：2
> 
> 时间：2009-04-18T23:18:31.010
> 
> 标签：ruby-on-rails, ruby, google-app-engine, activerecord, jruby

Google App Engine 上 JRuby 的早期报告表明**ActiveRecord 不起作用**。

据我了解，这是在 Rails 中与数据库对话的唯一方式。

不是这样吗？如果没有，**还有什么选择**？

Rails 中是否有更直接的方式与 Google 的 BigTable 数据存储进行交互？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-18T23:35:21.050

**编辑：**看起来有人创建了一个[示例 JRuby-Rails 应用程序](http://jruby-rack.appspot.com/)——这应该是一个简单的起点。示例代码在[这里](http://github.com/nicksieger/jruby-rack/tree/master/examples/rails)。

似乎有一些项目正在为[DataMapper](http://datamapper.org) ORM 创建 App Engine 适配器。 [这个](http://blog.s21g.com/articles/1426)应该可以与当前版本的DataMapper（0.9.11）一起使用，而[这个](http://code.google.com/p/appengine-jruby/)需要0.10.0版本的开发。它们都是相当新的（意料之中，考虑到 App Engine Java 公告是最近发布的），所以我当然不能保证它们目前的质量。

在 Rails 中使用 DataMapper 需要一些额外的配置；有关更多信息，请参阅[此博客文章](http://blog.teksol.info/2008/10/16/how-to-use-datamapper-from-rails-including-migrations-and-tests)。Rails 3 将使这变得不那么繁重，它旨在与 Merb 合并后与 ORM 无关。如果 Rails 2.3 + DataMapper 出现问题，还可以考虑其他 Ruby Web 框架（[Merb](http://merbivore.com)、[Sinatra](http://www.sinatrarb.com/)等）。

[这个库](http://github.com/knowtheory/reggae/tree/master)也可能有助于在 GAE 上设置 JRuby Web 应用程序。我还没有测试过这些，所以YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-18T23:37:18.907

尝试使用 JRuby on Rails： http: [//olabini.com/blog/2009/04/jruby-on-rails-on-google-app-engine/](http://olabini.com/blog/2009/04/jruby-on-rails-on-google-app-engine/)

# unix - Unix：“tee”命令的混淆使用

> ID：764463
> 
> 赞同：14
> 
> 时间：2009-04-18T23:23:29.457
> 
> 标签：unix, tee

该手册指出，*[三通](https://en.wikipedia.org/wiki/Tee_(command))*是一种“管件”工具。案例[[1]](http://www.commandlinefu.com/commands/tagged/38/tee)让我感到困惑：

**1.案例**

```
echo "foo bar" | sudo tee -a /path/to/some/file 
```

**2.案例**

```
:w !sudo tee % 
```

很难从案例中理解 tee 的逻辑。*三通*是如何工作的？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-18T23:28:37.243

`tee`用于拆分命令管道，允许您将命令的输出保存到文件*并*沿管道发送。在您给出的第一个示例中：

```
echo "foo bar" | sudo tee -a /path/to/some/file 
```

"foo bar" 将回显到标准输出*并附*加到`/path/to/some/file`. 将三通想象成管道中的“T”形接头，将输出分成另外两个管道。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-26T11:49:59.480

`tee`通常用于拆分程序的输出，使其既可以显示也可以保存在文件中。该命令可用于在数据被另一个命令或程序更改之前捕获中间输出。tee 命令读取标准输入，然后将其内容写入标准输出。它同时将结果复制到指定的文件或变量中

```
tee [OPTION]... [FILE]... 
```

例如

```
tee [ -a ] [ -i ]... [ File ]... 
```

*   `-a`将输出附加到 File 的末尾而不是覆盖它。

*   `-i`忽略中断。

[![在此处输入图像描述](https://i.stack.imgur.com/adIiJ.png)](https://i.stack.imgur.com/adIiJ.png)

使用`sudo`问题中的示例并附加到文件中

```
ls -l | sudo tee -a file.txt 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-18T23:28:08.320

`tee`复制`stdin`到`stdout`(like `cat`) 并另外将所有内容写入命名文件。以这种方式使用它`sudo`可以让人们将信息推送到特权模式，并同时监控是否有正确的东西到达那里。

另请注意，由于在 shell 中处理重定向的方式，几乎等同于

```
sudo echo "foo bar" > /path/to/some/file 
```

将不起作用，因为重定向将由调用用户而不是由`sudo`目标用户完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-08-24T07:52:24.027

**案例说明**

**1\. 使用 sudo- 和 -tee 命令提升权限**

这个例子不仅仅是逻辑，而是惯例。[它](http://en.wikipedia.org/wiki/Tee_(command))显示了升级权限的约定：

```
echo "Body of file..." | sudo tee root_owned_file > /dev/null 
```

> 此示例显示 tee 用于绕过 sudo 命令中的固有限制。sudo 无法将标准输出通过管道传输到文件。通过将其标准输出流转储到 /dev/null，我们还抑制了控制台中的镜像输出。

**2\. 用 Vim 运行 sudo-commands**

由于您可以在 Vim 中使用 Sudo 命令，因此如果您忘记以 sudo 身份运行，您可以使用该命令。它在诸如 /etc/init.d/ 之类的地方很有用，您可以在其中找到只读文件。

**使用 tee 命令的逻辑**

它就像 Git 中的一个分支，或者更好，请参阅[Rick Copeland 的 T 类比](https://stackoverflow.com/questions/764463/unix-confusing-use-of-the-tee-command/764475#764475)。希望修改后的示例[（原始）](http://en.wikipedia.org/wiki/Pipeline_(Unix))有助于理解其用途：

```
curl "http://en.wikipedia.org/wiki/Pipeline_(Unix)" | tee original_site | sed 's/[^a-zA-Z ]/ /g' | tr 'A-Z ' 'a-z\n' | grep '[a-z]' | sort -u | comm -23 - /usr/share/dict/words 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-18T23:34:05.187

请记住，目标`tee`不限于常规文件，还可以是设备、FIFO 等。此外，您可以通过管道传输到另一个`tee`调用，等等。:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-19T00:58:31.240

我发现该`tee`命令在调试包含长管道的 shell 脚本时非常有用。这是一个可怕的 shell 脚本的结尾，该脚本在 Perl 中被重写了十年，但它仍然有效。（它最后一次修改是在 1998 年，碰巧。）

```
# If $DEBUG is yes, record the intermediate results.
if [ "$DEBUG" = yes ]
then
    cp $tmp.1 tmp.1
    cp $tmp.2 tmp.2
    cp $tmp.3 tmp.3
    tee4="| tee tmp.4"
    tee5="| tee tmp.5"
    tee6="| tee tmp.6"
    tee7="| tee tmp.7"
fi

# The evals are there in case $DEBUG was yes.
# The hieroglyphs on the shell line pass on any control arguments
# (like -x) to the sub-shell if they are set for the parent shell.
for file in $*
do
    eval sed -f $tmp.1 $file                $tee4 |
    eval sed -f $tmp.3                      $tee5 |
    eval sh ${-+"-$-"}                      $tee6 |
    eval sed -f $tmp.2                      $tee7 |
    sed  -e '1s/^[  ]*$/--@/' -e '/^--@/d'
done 
```

运行的三个 sed 脚本非常糟糕——我不打算展示它们。这也是`eval`. 正常的临时文件名（$tmp.1 等）由固定名称（tmp.1 等）保存，中间结果保存在 tmp.4 .. tmp.7 中。如果我正在更新命令，它将使用 ' `"$@#"`' 而不是 ' `$*`'，如图所示。而且，当我调试它时，参数列表中只有一个文件，因此对调试文件的践踏对我来说不是问题。

请注意，如果您需要这样做，您可以一次创建多个输入副本；无需将一个`tee`命令输入另一个命令。

如果有人需要它，我有一个`tee`被调用的变体，`tpipe`它将输出的副本发送到多个管道而不是多个文件。即使其中一条管道（或标准输出）提前终止，它也会继续运行。（有关联系信息，请参阅我的个人资料。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-18T23:28:35.183

*tee*只是将输出镜像到一个文件中，该文件可以指定为*tee*的参数。

如果您显示*tee*被称为超级用户（通过*sudo*），其唯一目的是作为超级用户而不是执行回显的用户编写文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-31T06:40:01.073

*tee*命令只是创建 N+1 个文件，一个副本传递给标准输出，其他副本传递给提供给*tee*的参数（即文件），其中 N 是传递给*tee*的参数数量。

# macos - 无法在 Bash 中为 MacPorts 制作选项卡完成文件？

> ID：764476
> 
> 赞同：1
> 
> 时间：2009-04-18T23:29:05.837
> 
> 标签：macos, bash, tab-completion

我没有通过 Google 找到 MacPorts 的选项卡完成文件。它显然与 Git 和 Django 的区别不大。

**如何在 Bash 中为 MacPorts 完成制表符？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-18T23:57:03.743

您可以安装端口`bash-completion`，如此[处](http://trac.macports.org/wiki/howto/bash-completion)所述。

# gdi - 如何创建自定义 GDI 设备？

> ID：764480
> 
> 赞同：3
> 
> 时间：2009-04-18T23:30:35.630
> 
> 标签：gdi

是否可以在用户模式下创建自定义 GDI 设备？这个想法是创建一个设备上下文（HDC），我们可以将它传递给一个不透明的组件，这样当组件调用像 TextOut 这样的 GDI 函数时，我们可以获得实际的文本字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T03:58:59.160

我没怎么用过GDI，但是听说[metafiles]( [http://msdn.microsoft.com/en-us/library/dd145051(VS.85).aspx)](http://msdn.microsoft.com/en-us/library/dd145051(VS.85).aspx))记录画图可以回放. 您也许可以从中获取文本字符串。

我已经看过更多了，您可以创建一个 GDI，并将`CreateEnhMetaFile()`记录绘制到元文件中。使用此 GDI 设备绘制组件。然后你可以调用`EnumEnhMetaFile()`，传递一个回调。您的回调将使用指向`ENHMETARECORD`. 以`ENHMETARECORD`[ `EMR`]( [http://msdn.microsoft.com/en-us/library/dd162512(VS.85).aspx)](http://msdn.microsoft.com/en-us/library/dd162512(VS.85).aspx))开头。它有一个成员叫做`iType`那个是绘图操作的类型。

# delphi - Delphi Region编译器指令 - 向后兼容的单元文件？

> ID：764489
> 
> 赞同：5
> 
> 时间：2009-04-18T23:34:48.447
> 
> 标签：delphi, compiler-construction, region

鉴于希望在单元文件中使用有用的 Region 编译器指令，允许在以前版本的 Delphi 中使用这些相同单元的最佳方法是什么？似乎没有“体面”的方法。（所需的 IDE 版本是 Delphi 7）

我喜欢在方法定义上方设置区域来隐藏/显示方法定义帮助和版本历史注释，但我必须将区域指令与其他编译器指令包围起来，这有点破坏区域编译器指令的“清洁度”。

我想如果使用不支持区域的 Delphi 版本，可以编写一个预处理器来注释掉所有 Region/EndRegion 指令。然后再添加回来以供以后的版本使用？

我不是 100% 切换到 Delphi 2009 并且需要支持多个 IDE 版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-19T07:14:16.873

我假设 D7 不想编译 {$REGION} 或 {$ENDREGION}？我只安装了 D2007/9，无法检查。

试试这个：

```
{$IFDEF undef}{$REGION 'bla'}{$ENDIF}
//some code
{$IFDEF undef}{$ENDREGION}{$ENDIF} 
```

D2009 编辑器按预期创建区域。如果未定义“undef”，D7 应忽略 $REGION/$ENDREGION。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T07:39:57.787

那里有一些 Delphi(7) 编辑器增强组件，它们提供了类似的东西。我认为[GExperts](http://www.gexperts.org/)可以。

如果您对代码的影响感到满意，您可以考虑使用 {$I } 来拆分大文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-07T15:06:42.090

您可以使用以下代码：

```
{$IF CompilerVersion >= 17} // The $REGION directive is available since Delphi 2005
{$REGION 'RegionName'}
{$ENDIF} 

// codeblock

{$IF CompilerVersion >= 17} 
{$ENDREGION 'RegionName'}
{$ENDIF} 
```

# sql-server - 如何在 SQL Server Management Studio 中获得“管理员权限”？

> ID：764494
> 
> 赞同：5
> 
> 时间：2009-04-18T23:38:18.373
> 
> 标签：sql-server, ssms

我正在使用 SQL Management Studio 2008 Express 作为本地 SQL Server 2008 Express 实例的图形界面，这两个实例在本地仅用作我的 Web 项目的测试和开发界面。

我最近对 ​​SQL 编码更有信心，并开始使用一些更复杂的 sql 东西——我最新的探索领域是触发器。但是，令我惊讶的是，我的服务器实例似乎没有管理员权限，这意味着我不能做简单的事情，比如调试或更改访问权限。

当我尝试开始调试时，我收到一条权限被拒绝消息，当我尝试管理不同数据库的权限规则时，我也看到了它。我怀疑这与我在安装服务器时选择的某些选项有关，但是由于我已经设置了多个数据库并填充了数据，因此我不想卸载并重新安装整个东西。

有什么方法可以更改哪个用户帐户是服务器实例的主管理员？如果没有，是否有任何其他方法可以获得例如调试我的触发器的权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T00:15:28.627

以本地管理员帐户登录您的计算机。默认情况下，这应该是 MSSQL 中的系统管理员角色。

使用 SSMS，使用集成身份验证连接到您的 MSSQL 实例。您现在是系统管理员。作为系统管理员，您现在[可以将普通用户帐户添加到系统管理员角色](http://msdn.microsoft.com/en-us/library/ms186320.aspx)：

```
EXEC sp_addsrvrolemember @loginame = 'PC_OR_DOMAIN\loginname', @rolename = 'sysadmin' 
```

如果您使用 SSPI（又名集成身份验证，也就是启动 SSMS 时没有不同的用户名和密码），那么只需使用您的 Windows 登录名作为登录名。如果您使用 Sql Server 身份验证（又名用户名和密码），则使用用户名作为登录名。如果您使用任何其他登录名，也会创建一个帐户。

在 GUI 中肯定有一种方法可以做到这一点 - 但我没有方便的 ATM 来告诉你如何做。我认为它在 Security -> Logins -> Properties 和一些用于各种服务器角色的复选框下。

编辑：[在 Vista 上启用本地管理员帐户](http://www.howtogeek.com/howto/windows-vista/enable-the-hidden-administrator-account-on-windows-vista/) 此外，如果您*是*本地管理员（您的用户帐户列在本地管理员组下），那么 -*[默认情况下](http://support.microsoft.com/kb/263712)*- 您是系统管理员。可能值得仔细检查系统管理员角色 (SQL) 和本地管理员组 (Vista) 的成员。

Edit2：原来，SQL 2008[*不再*](http://msdn.microsoft.com/en-us/library/cc281849.aspx)[添加BUILTIN\Administators](http://msdn.microsoft.com/en-us/library/cc281849.aspx)*。*在*这种情况下，您需要检查您添加的内容。这应该可以通过 Logins 节点获得。请注意，如果您不选择 sysadmin 登录，您可能会被[锁定在 MSSQL Admin 之外。](http://msdn.microsoft.com/en-us/library/cc280562.aspx)如果是这种情况，我会重新安装。您可以通过停止 MSSQL 并复制 *.MDF 和 *.LDF 文件来保存数据库。重新安装后，将它们复制回来并使用 sp_attach_db 重新附加它们。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-18T23:41:26.197

Sql 服务器配置管理器。

这将允许您设置实例帐户。

但是，我认为您可能需要将数据库所有者更改为您连接到数据库的用户。如果您使用的是 SSPI，那么这将是您的登录用户，或者如果您使用 SQL 身份验证，这将是连接字符串中的用户。

额外的：

如果您在 Windows XP 或更高版本上进行调试，并且您不是管理员（本地），则需要将您放入该系统上的“调试用户”组。否则访问内存或将调试器附加到您不拥有的进程是一个很大的禁忌。

# sql - 将邻接列表层次结构展平为所有路径的列表

> ID：764497
> 
> 赞同：9
> 
> 时间：2009-04-18T23:39:45.080
> 
> 标签：sql, hierarchy, adjacency-list, flatten

我有一个使用邻接列表模型存储层次信息的表。（使用自引用键 - 下面的示例。此表可能看起来[很熟悉](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)）：

```
category_id name                 parent
----------- -------------------- -----------
1           ELECTRONICS          NULL
2           TELEVISIONS          1
3           TUBE                 2
4           LCD                  2
5           PLASMA               2
6           PORTABLE ELECTRONICS 1
7           MP3 PLAYERS          6
8           FLASH                7
9           CD PLAYERS           6
10          2 WAY RADIOS         6 
```

* * *

**将上述数据“展平”成这样的最佳方法是什么？**

```
category_id lvl1        lvl2        lvl3        lvl4
----------- ----------- ----------- ----------- -----------
1           1           NULL        NULL        NULL
2           1           2           NULL        NULL
6           1           6           NULL        NULL
3           1           2           3           NULL
4           1           2           4           NULL
5           1           2           5           NULL
7           1           6           7           NULL
9           1           6           9           NULL
10          1           6           10          NULL
8           1           6           7           8 
```

* * *

每一行都是通过层次结构的一个“路径”，除了每​​个节点都有一行*（*不仅仅是每个*叶子节点*）。category_id 列代表当前节点，“lvl”列是它的祖先。当前节点的值也必须在最右边的 lvl 列中。lvl1 列中的值将始终表示根节点，lvl2 中的值将始终表示 lvl1 的直接后代，依此类推。

如果可能，生成此输出的方法将使用 SQL，并且适用于 n 层层次结构。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-19T01:45:23.030

在一个简单的邻接列表中进行多级查询总是涉及到自左连接。制作右对齐表格很容易：

```
SELECT category.category_id,
    ancestor4.category_id AS lvl4,
    ancestor3.category_id AS lvl3,
    ancestor2.category_id AS lvl2,
    ancestor1.category_id AS lvl1
FROM categories AS category
    LEFT JOIN categories AS ancestor1 ON ancestor1.category_id=category.category_id
    LEFT JOIN categories AS ancestor2 ON ancestor2.category_id=ancestor1.parent
    LEFT JOIN categories AS ancestor3 ON ancestor3.category_id=ancestor2.parent
    LEFT JOIN categories AS ancestor4 ON ancestor4.category_id=ancestor3.parent; 
```

像你的例子一样左对齐它有点棘手。想到这：

```
SELECT category.category_id,
    ancestor1.category_id AS lvl1,
    ancestor2.category_id AS lvl2,
    ancestor3.category_id AS lvl3,
    ancestor4.category_id AS lvl4
FROM categories AS category
    LEFT JOIN categories AS ancestor1 ON ancestor1.parent IS NULL
    LEFT JOIN categories AS ancestor2 ON ancestor1.category_id<>category.category_id AND ancestor2.parent=ancestor1.category_id
    LEFT JOIN categories AS ancestor3 ON ancestor2.category_id<>category.category_id AND ancestor3.parent=ancestor2.category_id
    LEFT JOIN categories AS ancestor4 ON ancestor3.category_id<>category.category_id AND ancestor4.parent=ancestor3.category_id
WHERE
    ancestor1.category_id=category.category_id OR
    ancestor2.category_id=category.category_id OR
    ancestor3.category_id=category.category_id OR
    ancestor4.category_id=category.category_id; 
```

> 将适用于 n 层层次结构。

抱歉，在邻接列表模型中不可能进行任意深度的查询。如果您经常进行此类查询，则应将架构更改[为存储分层信息的其他模型之一](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)：完全邻接关系（存储所有祖先-后代关系）、物化路径或嵌套集。

如果类别不经常移动（对于像您的示例这样的商店来说通常是这种情况），我会倾向于嵌套集合。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-19T08:34:13.327

如前所述，SQL 没有干净的方法来实现具有动态变化的列数的表。我之前使用的唯一两个解决方案是：1\. 固定数量的 Self-Joins，给出固定数量的列（AS per BobInce） 2\. 将结果生成为单个列中的字符串

第二个听起来很怪诞。将 ID 存储为字符串？！但是当输出被格式化为 XML 或其他格式时，人们似乎并没有那么在意。

同样，如果您想加入 SQL 中的结果，这也没什么用。如果要将结果提供给应用程序，它可能非常合适。然而，就个人而言，我更喜欢在应用程序中进行扁平化而不是 SQL

我被困在一个 10 英寸的屏幕上，无法访问 SQL，所以我无法提供测试代码，但基本方法是以某种方式利用递归；
- 递归标量函数可以做到这一点
- MS SQL 可以使用递归 WITH 语句做到这一点（更有效）

**标量函数（类似）：**

```
CREATE FUNCTION getGraphWalk(@child_id INT)
RETURNS VARCHAR(4000)
AS
BEGIN

  DECLARE @graph VARCHAR(4000)

  -- This step assumes each child only has one parent
  SELECT
    @graph = dbo.getGraphWalk(parent_id)
  FROM
    mapping_table
  WHERE
    category_id = @child_id
    AND parent_id IS NOT NULL

  IF (@graph  IS NULL)
    SET @graph = CAST(@child_id AS VARCHAR(16))
  ELSE
    SET @graph = @graph + ',' + CAST(@child_id AS VARCHAR(16))

  RETURN @graph

END

SELECT
  category_id                         AS [category_id],
  dbo.getGraphWalk(category_id)       AS [graph_path]
FROM
  mapping_table
ORDER BY
  category_id 
```

我有一段时间没有使用递归 WITH 了，但即使我没有 SQL 来测试任何东西，我也会尝试一下语法：)

**递归的**

```
WITH
  result (
    category_id,
    graph_path
  )
AS
(
  SELECT
    category_id,
    CAST(category_id AS VARCHAR(4000))
  FROM
    mapping_table
  WHERE
    parent_id IS NULL

  UNION ALL

  SELECT
    mapping_table.category_id,
    CAST(result.graph_path + ',' + CAST(mapping_table.category_id AS VARCHAR(16)) AS VARCHAR(4000))
  FROM
    result
  INNER JOIN
    mapping_table
      ON result.category_id = mapping_table.parent_id
)

SELECT
  *
FROM
  result
ORDER BY
  category_id 
```

**编辑 - 两者的输出是相同的：**

```
1   '1'
2   '1,2'
3   '1,2,3'
4   '1,2,4'
5   '1,2,5'
6   '1,6'
7   '1,6,7'
8   '1,6,7,8'
9   '1,6,9' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T02:57:08.897

遍历任意深度的树通常涉及递归过程代码，除非您使用某些 DBMS 的特殊功能。

在 Oracle 中，如果您使用邻接列表，则 CONNECT BY 子句将允许您以第一顺序深度遍历树，就像您在此处所做的那样。

如果您使用嵌套集，左边的序列号将为您提供访问节点的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T00:18:12.257

实际上可以在存储过程中使用动态 SQL 来完成。然后，您将受限于存储过程可以做的事情。显然，将结果执行到一个临时表中，不知道有多少列是一个挑战。但是，如果目标是输出到网页或其他 UI，那么这可能是值得的……

# asp.net-mvc - MVC 中的异步

> ID：764498
> 
> 赞同：0
> 
> 时间：2009-04-18T23:40:19.523
> 
> 标签：asp.net-mvc, web-services, asynchronous

我有这个网络服务正在吸收有关汇率的数据，我的问题是加载需要很长时间。所以我想异步加载数据，但是当我调用 GetRatesASync() 方法时，它说

> “在此上下文中不允许异步操作。启动异步操作的页面必须将 Async 属性设置为 true，并且只能在 PreRenderComplete 事件之前的页面上启动异步操作。”

哦，顺便说一句，我使用的是肥皂服务和 MVC UserControl，如果这有帮助的话，我将 GetRatesASync() 方法放在受保护的覆盖 void OnPreRender(EventArgs e) 中。那么我如何在页面加载后使用 jquery 获取这些血腥数据异步。有没有办法让这个获取数据的事情更快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T00:15:13.963

如果你想在 MVC 中实现异步，你可以使用[ASP.NET MVC Futures 中包含的 AsyncController](http://blog.maartenballiauw.be/post/2009/04/08/Using-the-ASPNET-MVC-Futures-AsyncController.aspx)。

但是异步操作不会让你的网络服务更快......它只会阻止它阻塞你的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T13:30:15.347

使用jquery，如何：1）等待页面在浏览器中加载；2）调用一个对服务器进行异步调用的javascript函数；3）等待结果；4）当结果从服务器到达时，在浏览器中显示？

就像是：

网页中的 Javascript/jquery：

```
$().ready(GetExchangeRates);
function GetExchangeRates()
{
    // TODO: Maybe show a *loading* animation.
    $.get("/Currency/GetExchangeRates",
        null, GetExchangeRatesCompleted, "json");
}
function GetExchangeRatesCompleted(result)
{
    // TODO: Hide *loading* animation.
    // TODO: Display result on page.
} 
```

控制器动作（C#）：

```
public class CurrencyController : Controller
{
    public JsonResult GetExchangeRates()
    {
        var exchangeRates = _slowWebService.GetExchangeRates();
        return Json(exchangeRates);
    }
} 
```

* * *

另一件事：

如果您无法缓存汇率，如何将它们保存在 App_Data 文件夹中的 xml 文件中，并在条目中说明上次从慢速 Web 服务检索汇率的时间，然后在该 xml 文件早于某个指定的时间间隔？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:53:50.010

***这是一个没有 AsyncController 但使用 TPL Task 的更简单的代码***

```
 public async Task<ActionResult> Index() 
    {
      var exchangeRates = await _slowWebService.GetExchangeRates(); // this method should return Task<IEnumerable<ExchangeRate>>
        return Json(exchangeRates);

    return View(result);
    } 
```

检查此视频[mvc4 和 tpl 任务操作方法](http://blog.pluralsight.com/2012/08/06/video-taking-advantage-of-tpl-in-mvc4/#comment-6467)

# vba - 加快数据透视表过滤 VBA 代码

> ID：764504
> 
> 赞同：7
> 
> 时间：2009-04-18T23:42:38.177
> 
> 标签：vba, excel, pivot-table

我有一个带有数据透视字段的数据透视表并包含许多项目。我有 VBA 代码逻辑来决定枢轴值是否应该可见。问题是 excel 为显示或隐藏的每个字段重新计算数据透视表，这使得它非常慢。在设置所有值之后，我想要它只重新计算一次的东西。我尝试使用 Application.Calculation = xlCalculationManual 但没有帮助。

我正在使用的 vba 代码是这样的

```
For i = 1 To oPivotField.PivotItems.Count
    If (oPivotField.PivotItems(i).Name = "TestCondition") Then
        oPivotField.PivotItems(i).Visible = True   'Recalulates pivot table
    Else
        oPivotField.PivotItems(i).Visible = False 'Recalulates pivot table
    End If
Next 
```

我将通过取消选中“全部显示”框并重新检查我想要显示的字段来手动执行此操作。这会导致 Excel 重新计算一次并仅显示我希望可见的数据透视项。我想通过 VBA 代码做同样的事情。

我什至尝试使用

```
Application.ScreenUpdating = False
Application.DisplayAlerts = False 
```

但没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-04-22T19:44:27.760

哦！我刚刚解决了一个：

在代码的开头，像这样关闭自动更新：

```
PivotTable.ManualUpdate = True 
```

然后在代码的最后，重新打开它：

```
ActiveSheet.PivotTables("PivotTable1").PivotCache.Refresh 
```

我发现这个线程正在搜索帮助编写确定数据透视表值是否应该可见的代码。您的 oPivotField 背后是什么？那是我缺少的部分！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T01:50:08.400

`PivotTable`对象具有`ManualUpdate`可能是您正在寻找的属性。

有关一些相关代码，请参见[http://www.ozgrid.com/VBA/hide-pivot-fields.htm](http://www.ozgrid.com/VBA/hide-pivot-fields.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T08:22:54.523

**pivottable.ManualUpdate [ = setting ]**
True 导致 RefreshTable 从数据透视表中清除数据，而不是刷新它
False 允许 RefreshTable 正常工作。
默认为假。
调用过程结束后，此属性自动重置为 False（**重要**）

此属性应在您进行更新之前设置为 true（例如，更改数据透视项 Visible 属性）
因此您的代码如下所示：

```
For i = 1 To oPivotField.PivotItems.Count
    If (oPivotField.PivotItems(i).Name = "TestCondition") Then
        oPivotField.Parent.ManualUpdate = True
        oPivotField.PivotItems(i).Visible = True  'doesn't recalculate pivot table because ManualUpdate is set to True
    Else
        oPivotField.Parent.ManualUpdate = True
        oPivotField.PivotItems(i).Visible = False 'doesn't recalculate pivot table because ManualUpdate is set to True
    End If
Next

'setting pivot table ManualUpdate property to False might be redundant at this point because it gets reset to false immediately after you set Visible property of oPivotField
oPivotField.Parent.ManualUpdate = False
oPivotField.Parent.Update() 
```

作为结论，ManualUpdate 属性更改不会持续很长时间（在我的测试中，我可以看到它会尽快重置为 false，因此我建议您在想要进行更改时将其设置为 true对于枢轴项目）

有关 Excel 中更新意味着什么的更多信息，您可以查看以下内容：
[数据透视刷新与更新 - 有真正的区别吗？](http://www.powerpivotpro.com/2010/08/pivot-refresh-vs-update-is-there-a-real-difference)

参考：
标题：**使用 VBA 和 .NET 编程 Excel**
作者：**Jeff Webb、Steve Saunders**
打印 ISBN：**978-0-596-00766-9** | ISBN 10：**0-596-00766-3**
电子书 ISBN：**978-0-596-15951-1** | 国际标准书号 10：**0-596-15951-X**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T15:36:53.830

尝试添加以下内容。在我的情况下也有助于提高速度。

开头：

```
Application.Calculation = xlCalculationManual 
```

在最后：

```
Application.Calculation = xlCalculationAutomatic 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-18T07:08:41.407

保存工作簿的副本并将其另存为“excel 93-2007”文件。然后试试你的代码。希望这对您有所帮助。

# c - 输入到其他程序 [C/C++]

> ID：764505
> 
> 赞同：1
> 
> 时间：2009-04-18T23:44:35.113
> 
> 标签：c, email, logging

所以我有一个在 Windows 平台上运行的 C 程序，它定期发送日志文件的电子邮件，它应该在后台运行而不会受到干扰。我不想让电子邮件地址保持不变。

有哪些方法可以在此程序中输入电子邮件地址？

我在想一个简单的脚本，它只接受电子邮件地址、主题等参数。然后让脚本制作一个带有类似标签的文本文件，有点相当于：

TO*电子邮件地址* FROM*电子邮件地址* SUB*子*

然后让我的程序读取这些值并将它们分配给符号变量。而不是删除配置文件。

还有哪些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T00:24:50.853

其他一些方法是：

*   登记处
*   配置文件
*   命令行选项
*   环境变量
*   共享内存

# 登记处

使用注册表适用于多种配置信息。通过在注册表中选择合适的位置，您可以在系统范围内进行一些配置，为每个用户进行一些配置（这听起来不像您的应用程序，但我还是会提到它），或者两者的任意组合。Windows 管理数据的存储并为用户提供一种基本的编辑方式 ( `regedit.exe`)。

使用注册表使得同时运行多个具有不同选项的程序实例变得更加困难。

# 配置文件

您可以将配置信息存储在磁盘上的文本文件中。这允许您将配置保存在与可执行文件相同的位置（相同的文件夹），从而更容易找到（使用注册表时，您必须告诉用户在哪里查找）。配置文件通常可以使用常规文本编辑器进行编辑。但是，通常您必须指定要使用的格式以及读取和解析文本文件，并在需要时处理语法错误。

此方法允许您轻松运行程序的多个实例，每个实例都有自己的单独配置文件（例如，如果您的应用程序在其自己的目录中查找配置文件）。

# 命令行选项

您的程序可以从命令行读取其配置信息，但您仍然必须将数据存储在其他地方。命令行在变得笨拙之前只能支持有限数量的信息。

# 环境变量

您的程序可以从环境变量中读取其配置信息。这些可能是由运行程序的脚本设置的变量（您遇到与命令行选项相同的问题，数据仍必须存储在其他地方）或者可能是系统提供的全局设置环境变量。Windows 提供了非常原始的工具来改变全局环境，甚至不如`regedit`. 此选项在 Windows 上不常用。

# 共享内存

*这是一项高级技术，需要与将*数据放入共享内存的其他程序合作。而且，与许多其他选择一样，数据首先仍必须存储在其他地方。除非你真的知道你需要它，否则不推荐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T00:10:42.087

在这里戴上我的横向思维帽...您如何使电子邮件地址保持不变（或无论如何是可配置的）但使其成为列表地址。让您的邮件服务器管理对列表的订阅。现在你的程序做了它有好处的事情（收集日志），而邮件服务器做了它有好处的事情（分发电子邮件），它们之间的接口非常小（列表地址）。

每次您需要从日志收件人列表中添加/删除某人时，在某处编辑一些晦涩的配置文件或注册表项可能不是处理此问题的最佳方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-18T23:48:32.763

您还可以使用 Windows 注册表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T00:02:32.280

您是否有理由无法修改程序以仅读取您可以在启动期间传递的参数列表并以这种方式设置“to”和“from”？

示例：program.exe email@address.com email2@address2.com

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T00:21:02.343

我自己生活在一个 linux 世界中，所以我有管道来处理这种情况，但我听说在 windows 上做了以下事情：

它可以使用 API 控制其他窗口的 GUI 元素（或控件），例如填写 To、From 和 Data 字段，然后将按下事件发送到简单电子邮件程序的按钮。鬼鬼祟祟的部分是让这在后台发生。再次使用 API 可以使电子邮件程序的窗口具有“隐藏”状态，使其不可见。隐藏的窗口仍然可以像普通窗口一样操作其句柄。

所以这应该给你在windows中程序后台控制的效果，我知道它已经完成了，但我从来没有亲自看过它。它似乎不是世界上最有效的，但它是一个很酷的把戏。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-18T23:48:15.900

注册表！:-P

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-19T00:54:49.297

我个人会使用[Boost.Program_options](http://www.boost.org/doc/libs/1_38_0/doc/html/program_options.html)，它可以让你拥有一个配置文件或命令行参数（或两者兼有！）——尽管你标记了这个 C/C++，而 Boost 仅适用于 C++。尽管如此，在 C 语言中拥有一个配置文件并对其进行 fscanf 应该并不难。也总是有 argc 和 argv。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-19T01:01:44.507

您的程序可以打开一个套接字并通过该套接字接受数据。然后，您至少需要一个具有一定安全性的简单协议。您可能还必须编写某种客户端。根据您的描述，我会建议提供的其他答案之一，但这在某些情况下可能是一个可行的选择。

# flash - 如何在 App Engine 响应中包含 Flashvars？

> ID：764507
> 
> 赞同：0
> 
> 时间：2009-04-18T23:45:47.123
> 
> 标签：flash, google-app-engine, flashvars

我有一个 Flash 电影，我试图在 App Engine 处理程序中返回，但我想在返回 .swf 文件之前动态嵌入 Flashvars。

基本上试图得到它，所以要求：

[http://app.appspot.com/someurixyz](http://app.appspot.com/someurixyz)

返回等价于：

[http://app.appspot.com/xyz.swf?myvar=something](http://app.appspot.com/xyz.swf?myvar=something)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T02:31:17.677

我想我应该在发帖之前多考虑一下这个。

能够通过读取加载 SWF 文件的 url 来完成此操作：

在 AS3 中：

```
url = this.root.loader.loaderInfo.url; 
```

# macos - 无法在 Vim 的 ED 编辑器中进行 pbcopy

> ID：764518
> 
> 赞同：1
> 
> 时间：2009-04-19T00:02:24.433
> 
> 标签：macos, vim, copy, pwd, pbcopy

我尝试将 pwd 复制到 pbcopy 失败，如下所示

```
pwd | !pbcopy 
```

**如何在 Vim 的 ED 编辑器中复制路径**(: -mode)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T07:26:46.673

很多方法

```
in terminal
pwd | !pbcopy
and then in vim
"*p

in vim
:!r pwd
or in insert mode
<C-R>=getcwd()<CR>
or
<C-R>=system('pwd')<CR> 
```

剪贴板的当前文件位置

```
:let @*=expand('%:p:h') 
```

剪贴板的当前 vim 目录

```
:let @*=getcwd() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T01:38:11.730

为什么不`:!pwd|pbcopy`呢？

使用命令

```
cd 
```

如果需要，使用命令到当前工作目录

```
lcd %:p:h 
```

# css - 如何让 Firefox 打印背景颜色样式？

> ID：764520
> 
> 赞同：35
> 
> 时间：2009-04-19T00:04:38.203
> 
> 标签：css, firefox, printing, print-css

我有一些简单的 CSS：

```
#someElement {
    background-color:black;
    color:white;
} 
```

它在浏览器中看起来不错，但是当我在 Firefox 中打印它时，它会显示为白色背景上的黑色文本。我想这是某种节省墨水的功能，但有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-19T00:06:32.707

它是一个浏览器设置。在 CSS 中您无能为力。在 Windows 中 - `File > Page Setup... > Print Background`.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-03-25T10:59:46.783

我找到了一个解决方案，它有点 hacky，但是使用 CSS 伪元素，您可以使用粗边框创建背景。即使“打印背景”关闭，边框也会被打印出来，只要让它们真的很厚！请注意，Firefox 将所有白色字体颜色设置为黑色，因此当您创建假黑色背景时，Firefox 仍然使文本变黑，使文本不可见。无论如何，它是：

的HTML：

```
<div class="redBox">
  <div class="content">Black on red</div>
</div> 
```

的CSS：

```
.redBox {
  /* o no, does not work with print */
  background-color: red;
}

@media print {
  .redBox {
     position: relative;
     overflow: hidden; /* this might not work well in all situations */
  }
  .redBox:before {
     content: '';
     position: absolute;
     top: 0;
     right: 0;
     left: 0;
     bottom: 0;
     /* and here it is, the background color */
     border: 99999px red solid;
     z-index: 0; /* was required in my situation */
  }
  .redBox * {
    /* was required in my situation */
    position: relative;
    z-index: 1;
  }
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-20T09:43:07.547

有一个简单的解决方案。

对于`background-color`, 而不是使用：

```
background-color: red 
```

利用：

```
background-color: unset;
box-shadow: inset 0 0 0 1000px red /* 1000px is a random high 
                                     number that is definitely 
                                     larger than the box dimension*/ 
```

* * *

也为`color`, 而不是：

```
color: grey; 
```

利用：

```
color: unset;
text-shadow: 0 0 grey; 
```

* * *

您可以使用 将它们限制为仅打印`@media print`，但您不必这样做！

* * *

**注意：**有时您应该使用`background-color: transparent;`or`color: transparent;`如果`color`or`background-color`是从父元素继承的。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-04-13T19:03:40.457

这就是我通过将以下两行添加到特定 div 来使其在我的情况下工作的方式。"@@supports (-moz-appearance:meterbar)" 有助于添加特定于 Firefox 的样式。

> -webkit-print-color-adjust：精确；颜色调整：精确；

```
@@supports (-moz-appearance:meterbar) {
    .container {
        margin: 0;
        font-size: 0.85em;
        width: 100%;
        -webkit-print-color-adjust: exact;
        color-adjust: exact;
    }
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2019-06-14T00:46:18.917

用于在 Firefox 和 IE 中显示背景颜色

```
@media print {
  body{
    -webkit-print-color-adjust: exact; /*chrome & webkit browsers*/
    color-adjust: exact; /*firefox & IE */
  } 
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-07T06:56:58.713

对于铬，你可以使用这个：

```
-webkit-print-color-adjust:exact; 
```

或者在打印预览中，勾选*更多设置->背景图形*

![](https://i.stack.imgur.com/QrudK.png)

对于 Firefox，您无法使用任何 CSS 启用它。您可以按如下方式启用它（如果看不到文件，请按 Alt 键一次）。

*文件->页面设置*并勾选*打印背景（颜色和图像）* ![](https://i.stack.imgur.com/nymDr.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-24T16:02:36.410

我已经通过使用 SVG 元素破解了这个

```
.legendItem {
  position: relative;
}

.legentItemText {
  position: relative;
  z-index: 1;
}

.printBackground {
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  position: absolute;
  z-index: 0;
}
```

```
 <div class="legendItem">
    <div class="legentItemText">Some text.....<div>
  <svg class="printBackground">
    <rect width="100%" height="100%" fill="#000" />
  </svg>
</div>
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-19T01:23:11.757

也许不是您正在寻找的答案，但这里有：

我宁愿添加一个单独的样式表来打印页面。通常，您会想要删除导航菜单、面包屑、广告等内容，并且可能对边距、填充、边框和字体与屏幕上的样式表进行一些小的更改。

甚至考虑强迫用户用黑色墨水和白色文本填充整个页面对我来说似乎很愚蠢。

要添加单独的打印样式表，请在页面头部添加另一个样式表。

```
<link rel="stylesheet" href="print.css" type="text/css" media="print"> 
```

# protocols - 可靠多播的最有效协议是什么？

> ID：764525
> 
> 赞同：15
> 
> 时间：2009-04-19T00:07:12.970
> 
> 标签：protocols, file-transfer, multicast, ethernet, reliable-multicast

当发送者需要通过以太网以可靠的方式将相对大量的数据（例如每秒几兆字节）多播到同一子网上的适度数量的接收者（例如少于十二个）时，最有效的协议是什么？*可靠*是指如果一个数据包丢失，协议会确保它被重新发送，这样任何接收器都不会丢失数据。*高效*这个词很难定义，但是假设我们想要最大化吞吐量并最小化网络带宽，同时两端的 CPU 使用率适中。这仍然不是一个明确的定义，但这是我能想到的最好的定义。面向流或面向消息的协议都是可以接受的。

我很欣赏现实世界的例子，我很乐意接受主观答案，即你最喜欢的多播协议是什么，如果你能解释它的优缺点的话。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-22T22:55:07.413

实际示例：TIBCO Rendezvous。

数据通过带有序列号的多播发送出去。检测到丢失序列号的客户端在多播组上发送消息“嘿，我错过了数据包 12345”。服务器重新多播该数据。服务器有一个可配置的数据量来缓冲，以防客户端请求它。

问题：

想象一下，有一个客户端丢弃了一半的数据包，还有 100 个健康的客户端。此客户端为每个其他数据包发送重传请求。服务器开始在其中一个健康的客户端上造成足够的负载，以致它开始丢弃数据包并请求重新传输。额外的负载会导致另一个健康的客户端开始请求重传。等等。拥塞崩溃的结果。

Tibco 提供了一种解决方法，即切断发送过多重传请求的订阅者。这使得单个用户更难导致拥塞崩溃。

限制拥塞崩溃风险的另一种解决方法是限制服务器愿意重新传输的数据量。

Tibco 还应该在客户端和服务器中提供关于是多播还是单播重传请求以及重传本身的启发式方法。他们没有。（对于服务器，如果在某个时间窗口内只有一个客户端请求它，您可以单播重传，对于客户端，如果服务器告诉您 - 在重传的数据包中 - 您是唯一一个请求的客户端，您可以单播重传请求重传并请在将来单播请求）

从根本上说，您必须在您希望保证客户端接收数据的强度与拥塞崩溃的风险之间做出决定。您将不得不猜测数据包被丢弃的位置以及重传是最有效地发送单播还是多播。如果服务器理解数据并且可以决定在无论如何要发送更新的数据时不发送重传（这使得重传无关紧要），那么您比 Tibco RV 等框架处于更好的位置。

有时理解数据会导致错误的假设。例如，市场数据——当有更新的报价时，最初似乎可以不重新传输报价。但稍后，您可能会发现订阅者保留了报价历史记录，而不仅仅是试图跟踪当前报价。也许您可能有不同的要求，具体取决于订阅者，有些客户端会更喜欢单播 TCP 和多播。

在某些时候，您需要在服务器上任意决定要缓冲多少数据，以防重传或客户端缓慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-11-24T00:24:30.983

继 TIBCO 之后，PGM 协议是一种开放标准的可靠多播，具有许多优化功能，可通过网络元素加速在超大规模上高效工作。PGM 由 TIBCO 和 CISCO 开发，是 TIBCO Rendezvous 下的可选协议，默认协议是 TRDP，在设计上非常相似。

您可以计算理论效率，例如此处列出的 PGM，

[http://code.google.com/p/openpgm/wiki/PgmPerformance](http://code.google.com/p/openpgm/wiki/PgmPerformance)

不幸的是，现实世界的网络元素、NIC 和通用计算机体系结构的性能远低于理论最大值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T00:12:41.023

比特流！

不，认真的。您可能想[阅读它](http://wiki.theory.org/BitTorrentSpecification)。

UDP 对多播很有用，但它不能提供您正在寻找的保证 - BitTorrent 将要求您从原始源传输多个完整副本，但它仍然相当有效并提供有用的保证，特别是考虑到多少校验和在传递的每个“块”数据上完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-04T21:14:20.630

[http://www.jgroups.org/](http://www.jgroups.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-07T19:42:15.863

我可以建议[UFTP 吗](http://uftp-multicast.sourceforge.net)？它使用基于 NAK 的机制来确定要重新传输哪些数据包，并且可以选择使用[TFMCC](https://www.rfc-editor.org/rfc/rfc4654)进行固定传输速率或拥塞控制。

每个文件都是通过传递发送的，其中第一次传递传输整个文件，而随后的传递只发送重传。每个客户端都会跟踪它收到的数据包和丢失的数据包。在特定的检查点（以及传递结束时），如果接收器自上一个检查点以来错过了任何数据包，它将发送一个 NAK 列出丢失的数据包。这样做的好处是低损耗接收器将在高损耗接收器之前完成。UFTP 也可以配置为丢弃 NAK 百分比超过特定阈值的接收器。

通过将 NAK 限制为仅显示丢失的接收器，它降低了拥塞崩溃的风险，即发送者被接收器反馈淹没。

披露：UFTP 的作者。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-30T12:18:49.607

如果你真的想要可靠地同时传输到多个客户端，我认为你应该看看[流控制传输协议](http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)作为 UDP / 多播的替代方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-10T21:06:20.357

这是一个开放的研究问题；有可用的商业解决方案，但价格昂贵。祝你好运。

# java - 我可以使用什么策略来防止用户发现网站是用什么语言编写的？

> ID：764529
> 
> 赞同：3
> 
> 时间：2009-04-19T00:10:52.913
> 
> 标签：java, jsp, spring-mvc, struts

因此，如果您正在使用 Java 和 JSP 编写一个网站，并且不希望用户知道您用什么语言编写它。您会使用什么技术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T00:24:58.230

如果您使用某种框架，例如 Struts2，您将拥有一个映射到调度程序 servlet 的扩展名（*.action，或任何您选择的内容）。调度程序将请求“转发”到 WEB-INF 目录中的 JSP。用户只能看到被定向到 servlet 的 URL，并返回 HTML。他们不知道模板语言是什么。由于您可以为 servlet 映射选择您喜欢的任何内容，因此您可以编造一些东西，甚至用“.php”或“.asp”之类的东西误导它们。

当然，您可能有一些 JSP 就在 web 应用程序目录中，而不是在 WEB-INF 中。您可以给它们一个不同的扩展名，并告诉容器将它们作为 JSP 处理，方法是在 web.xml 中创建一个`<jsp-property-group>`带有`url-pattern`指定假扩展名的元素。

您还需要检查容器的文档以确定如何隐藏可能发送的任何服务器版本信息。要探索的另一件事是如何将会话 cookie 名称更改为“jsessionid”以外的名称。这有点小题大做，但它是 Servlet 规范的一部分，有些容器不支持更改它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T00:53:54.933

除了此处的其他答案，您还需要确保正确处理应用程序错误。如果你让一个 Exception 出来并且 web 容器处理它，那么你正在使用什么会很明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T00:13:43.080

我唯一要做的就是如何将请求传递到没有扩展名的页面（jsp、aspx、asp 等）。这可以通过手动解析请求 url 来完成。此外，重新配置您的服务器以隐藏其详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T01:05:23.470

1）制作您自己的文件扩展名并配置您的服务器以将其映射到您选择的处理程序。例如，重新映射 .whee 以调用 ASP.NET 处理程序或 PHP 处理程序。

2）确保您使用的任何处理程序都不会像大多数人一样将标题放入以指示它是什么。如果是，请将其配置为不这样做，或者将其前面的内容放入堆栈中以在传输之前删除这些标头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-19T02:34:33.693

您还需要检查您的应用发回的 HTTP 响应标头。通常，在响应标头中找到支持应用程序的技术是微不足道的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-19T03:02:16.077

在 Apache 配置文件中，以下行使其将 .php 识别为 PHP 脚本并按如下方式执行：

```
AddHandler php5-script .php 
```

将其更改为 .asp，Apache 会将 .asp 文件识别为 PHP 脚本。例如，将其更改为 .blarg，Apache 会将 .blarg 文件识别为 PHP 脚本。

# security - hacking能让你成为更好的程序员吗？

> ID：764533
> 
> 赞同：4
> 
> 时间：2009-04-19T00:14:37.587
> 
> 标签：security

您听说过所有被抓到然后获得杀手级工作机会的黑客。

但是话又说回来，您可能听说过 IT 员工在被解雇后破坏了他们的系统。有些人还认为，黑客攻击比保护系统要容易得多。

问题是，*你会聘请黑客*吗？*黑客能造就更好的程序员*吗？

**附录**

我问这个的原因是我认识一些人，他们最初是因为黑客技术而对编程产生兴趣，他们似乎对自己的编程能力相当有信心。结果，感觉就像人们尊重他们是最好的，但我总是觉得至少有能力，尽管我对黑客的了解不如他们多。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-19T00:27:24.077

我肯定会聘请*黑客*，但我不确定我们对黑客的定义是否相同。对我来说，黑客是一个充满激情、有动力、多才多艺的程序员，他对所有事情都了如指掌，至少知道去哪里寻找如何做任何事情。在我的公司，我们经常雇佣黑客，因为我们用脚本语言和低级 Unixy 东西做很多事情（至少我们的团队是这样做的。）

你的问题实际上是你是否应该雇用一个*饼干*。这真的取决于职位描述是什么，但只要你相信他/她不会做任何违法的事情，如果他或她是一名*优秀的工程师*，我会雇用。这对我来说真的很重要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-19T01:47:08.783

这里很大程度上取决于“黑客”的商定定义。

//Hackety hack hack hack。

;)

考虑一下：程序员 vs. 黑客 vs. 破解者 vs. 脚本小子 vs. 绝地 vs. 赛博朋克 vs. 忍者 vs. 代码猴子 vs. 逆向工程师 vs. 罪犯 vs. 恶作剧者 vs. 重罪犯 vs. 被定罪的重罪犯 vs. 疑似重罪犯 vs.策划者 vs. 混乱的好角色 vs. 混乱的恶人 vs. 独裁者 vs. 皇帝 vs. 叛乱分子 vs. 恐怖分子 vs. 特工 vs. Neo vs. 版权侵犯者 vs. 文案作者 vs. 垃圾邮件发送者 vs. 营销人员 vs. 电话推销员 vs. 间谍软件创建者例如，与计算机病毒创建者等相比。

在“绝地”的意义上，优秀的程序员以前一定做过黑客攻击。绝地反抗帝国，但总体而言，很好，虽然在技术上并不遵守法律。

大多数伟大的程序员当然将自己视为浪漫的赛博朋克意义上的黑客，但作为黑客并不意味着缺乏道德或道德。

一些黑客可能会发现，他们的良心并没有阻止他们执行一般社会共识可能认为有问题的技术行为，这些行为充其量是值得谴责的，或者最糟糕的是，从字面上看是非法的。当然，自由意志确实存在。

逆向工程师和破解者通常比普通黑客更擅长黑客攻击。

就个人而言，我永远不会雇用至少不知道如何进行逆向工程的人。从我的角度来看，这必然是成为一名优秀工程师的一部分。再说一次，我认为自己是一位相当资深的编码员/经理，并且已经看到异常多的实例完全证明逆向工程是为了公司收益和/或避免公司死亡。

如果我“真的想”，我从来没有遇到过不做我知道我“可以”做的酷/调皮的事情的问题。对于适度的懒惰，空闲时间是一个很好的即时奖励。谁想不择手段地触犯法律？来吧。除了利润动机之外，我从未确定是什么让犯罪组织成为现实。

很大程度上取决于您认为的“利润”。你看重什么。你奖励什么。

并非所有黑客都是罪犯。事实上，绝大多数不是。

打算继续成为顽固的罪犯的人可能不会成为您想雇用的人，但这取决于您的情况。首先，根据您的行业或您的申请，您甚至可能无法选择雇用被定罪的重罪犯。你在政府部门吗？

再说一次，如果你专门处理安全、反安全和反反安全，这实际上是一个要求，你真的“像狐狸一样聪明”，并且如果你得到一个有机会接受这样的使命。

真正的策划者永远不会被抓住。如果他们被抓住，他们将失去之前作为策划者的地位。策划者可能是罪犯，但不是重罪犯，并且可能不需要为你的微薄面包而被你雇用。可能有一些优秀的策划者在那里。我一个都不知道。

你确实想要那些绝地武士。你想要忍者。你想要赛博朋克。你想要侦探。你需要大量的智慧。您需要能够解决任何问题并且不会被错误吓倒的人。你想要知道任何事情都是可能的人。

这只是代码。

高度智能的逻辑系统会考虑所有选项。所以你永远不会找到聪明的人为你工作，他们一生都没有考虑过做错事。

如果您正在寻找守法公民为您工作，那么最好寻找至少在表面上刻画某些行为的人，这些行为似乎暗示着一种良好的、普遍的、内部的价值体系，通常与您认为正常的东西相吻合。你永远不知道人们脑子里在想什么。仅仅因为某人从未被捕并不意味着他们在个人生活中所做的一切都是完全合法的、道德的或道德的。但是有线条。

您可能不想雇用即使在自己的时间也做坏事的人。你认为非常糟糕的事情可能会有很大的不同。

所谓的“道德黑客”在您的国家可能并不违法，但仍然可能是不道德的。

为了自我、为了自我、为了家庭、为了国家、为了人类、为了地球、为了时空连续体/为了上帝

为了上帝/为了时空连续体，为了地球，为了人类，为了国家，为了家庭，为了自我，为了自我

另请参阅：龙与地下城阵营。

另见：宗教

一般来说，你想雇佣符合你“阵营”的人，无论你是政府还是某种犯罪头目。

我认为自己有点像白/灰帽黑客。我以前做过黑帽之类的事情，从来没有被抓到，也不打算定期从事这些活动。

在你的个人或职业生活中，人们可能会为了你敲诈你或将你送入监狱，这通常是愚蠢的，无论你是犯罪策划者，还是绝地武士，或者只是想雇用一个。

敲诈他人或收集可用于敲诈他人的信息是最严重的罪行，而且肯定比闯入任何系统都要糟糕得多。

我曾在运营商规模的电子邮件、工作委员会、银行工作过，并且可以访问极其荒谬的极其敏感的数据，并针对这些东西编写了应用程序。首先，我不是通过成为渡渡鸟大脑来做到这一点的。

您是否应该访问大量数据就像是在询问您是否应该拥有《指环王》中的 The One Ring。只有您认识的对使用它不感兴趣的人才应该具有高级别的访问权限。

获得官方专业访问大量数据的权限让我感到很自在，前提是我可以自己从互联网上免费抓取大部分数据，如果我真的陷入困境的话。大多数情况下，为什么要打扰？我担心什么？谁在乎。我是那种不会使用 The One Ring 的人，即使我有它。这就是为什么通常我不得不分担站在善良一边的负担，不得不希望坏人永远不会进入，并且不得不尽我最大的努力来确保事情的发展趋势。无论如何，谁是真正的坏人？我愿意把你当作我的朋友，而不是我的敌人。我不想看到你因为你对一些 1 和一些 0 所做的任何事情而入狱。然而，如果你，曾经直接或间接故意将人们的生命或自由置于危险之中，无论是以帝国的名义还是以叛乱的名义，都让你感到羞耻。不要那样做。事实是，人们的生命安全直接依赖于许多系统。没有坏人应该运行这些系统。任何可能变坏的人都不应该运行这些系统。考虑一下。任何人都应该拥有王国的钥匙吗？

三驾马车摇滚。

多键系统摇滚。

“你不知道该相信谁。” -运动鞋

要建立一个真正安全的系统，不要相信任何人——甚至是你自己。

另外，永远不要邀请吸血鬼进入你的家。

另外，不要像《黑客帝国》中的史密斯先生。

另外，不要咬喂你的手。

人民就是人民。找到宽恕的心。

努力记住一切，永远不要删除任何东西。

;)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-19T00:20:15.543

我对雇佣黑客持谨慎态度（只是因为我对雇佣任何从事犯罪或准犯罪活动的人持谨慎态度）。我会考虑雇用一个（特别是出于网络安全原因），因为他们熟悉发现其他人通常不会发现的漏洞，因此他们在闯入系统方面的专业知识对于学习如何使这些系统变得更好是不可或缺的。

另一个关于黑客让程序员变得更好的问题……那是不确定的。有这么多不同类型的黑客，很难说这是否会让他们成为更好的程序员。您可能会争辩说，黑客可以成为优秀的程序员，因为面向分析的思维可以很好地转化为优秀程序员所必需的分析思维。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-19T00:29:09.827

这是两个完全不同的问题，但这里有：

**你会雇佣黑客吗？**

说真的，为什么不呢？如果您的应用程序绝对是关键任务并且安全性是最重要的问题，那么这是测试您的应用程序是否存在安全漏洞的好方法。

当然，更困难的部分是找出黑客是真实的还是只是一个wanabe脚本小子。

在我国[，一位参议员最近提议举办一场黑客竞赛来测试我国新的自动投票系统](http://newsinfo.inquirer.net/breakingnews/infotech/view/20090417-199968/Hack-poll-machines-and-win-P100M)，我认为这是找出弱点并建立该系统可信度的好方法。

**黑客会成为更好的程序员吗？**

好吧，有黑客，也有脚本小子。两者之间的区别在于，第一个在发现系统缺陷方面确实很容易理解，而另一个仅使用公开可用的代码来利用已知漏洞。

如果这听起来不熟悉，那与爱因斯坦和莫特之间的区别完全一样。

此外，许多黑客遵循某种道德规范，他们发誓不会造成伤害——脚本小子根本不在乎，“只想玩得开心”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-19T00:46:43.407

我不会雇佣一个“黑客”（你的意思是：一个嫌疑犯或被定罪的罪犯），原因很简单：如果他们在道德和伦理上足够灵活，可以攻击一个系统，是什么阻止他们再次这样做，以及何时他们这样做了，这是我的公司和我的声誉。

**hacking能让你成为更好的程序员吗？**

我同意 TheTXI 的观点，即黑客所具备的某些特质有助于培养优秀的程序员。这些将包括研究能力，跳出框框思考和逻辑分析。

另一方面，“黑客”通常不是团队成员。他们经常追求自己的名声，而不是公司或产品的成功。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-19T00:58:52.160

只是我在“逆向工程”方面的经验。我花了一些时间分析 DLL 入口点、解析原始数据文件和 IP 数据包嗅探。

我能够通过逻辑和一些创造性的猜测来弄清楚网络上发生了什么，以及文件中的位是什么意思。从那里我可以劫持有线协议或拦截外部呼叫。

这很有趣，也很有挑战性，但它并没有让我成为一个更好的程序员。也没有让我变得更糟。利用编译代码中的弱点与良好的专业编程有着根本的不同。我确实学到了一些关于程序表面区域和攻击方法的东西，但后来我不得不将它们转化为程序架构。这些更多是关于结构而不是内容。

对我来说，一个“优秀”的程序员最重要的是能够生成尽可能复杂的代码，但仅此而已。能够在头脑中解析 IP 数据包中的位是一项很好且有趣的技能，但对您的软件设计技能毫无帮助。

为了回答 OP 的问题，如果黑客擅长编写软件，我会聘请他们。我不认为它会让你成为一个更好的程序员。它*可能*有助于整体系统设计，但您可以在没有攻击者经验的情况下学习这些课程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-19T00:22:27.317

黑客向您介绍有缺陷的软件，并向您介绍设计安全软件的实际困难。根据最初的问题，我会聘请一名黑客来测试我的系统的安全性。我可能会避免在涉及 HIPPA、PCI 或 PII 数据的项目中雇用臭名昭著的黑客。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-19T01:12:15.077

推倒沙堡比建造沙堡容易得多。

这同样适用于构建软件系统或批评遗留代码。

# ruby-on-rails - Ruby on Rails：如何连接两个表

> ID：764538
> 
> 赞同：7
> 
> 时间：2009-04-19T00:16:22.963
> 
> 标签：ruby-on-rails, join, activerecord

我有一个索引页面，我想显示所有用户的个人资料及其相关照片。我正在使用插件 Paperclip 来拍摄照片。在 Profiles 控制器中，我有实例变量 @profile，但它只向我显示了配置文件表中的表，而不是照片表。

```
@profile = Profile.find(:all, :include => :photos,
  :joins => "INNER JOIN photos ON photos.profile_id = profiles.id") 
```

模型如下所示：

```
class Profile < ActiveRecord::Base
  has_many :photos
end

class Photo < ActiveRecord::Base
  belongs_to :profile
end 
```

我希望能够在视图中显示的内容类似于：

*   John 的个人资料（例如，姓名、年龄、性别） - John 的照片（例如，仅显示一张照片）
*   玛丽的个人资料在这里 - 玛丽的照片在这里显示
*   Bob 的个人资料在这里 - Bob 的照片显示在这里

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-19T00:31:28.807

我已经编辑了我的答案以反映您的额外评论。

首先，你不应该需要`:joins`参数；`:include => :photos`应该为您处理“幕后”的加入。

这是执行您所要求的一种方法。

（在模型中）

```
class Profile < ActiveRecord::Base
  has_many :photos
  has_one :primary_photo, :class_name => "Photo", :conditions => {:primary => true}
end 
```

（在控制器中）

```
@profiles = Profile.find(:all, :include => :primary_photo) 
```

（在视图中）

```
<% @profiles.each do |profile| %>
  Name: <%= profile.name %>
  Age: <%= profile.age %>
  Photo: <%= image_tag profile.primary_photo.url %>
<% end %> 
```

# c++ - C++ 中的 HTML 清理

> ID：764540
> 
> 赞同：3
> 
> 时间：2009-04-19T00:19:35.203
> 
> 标签：c++, html, sanitization

**是否有任何可用的 C++（或者可能是 C）函数/类/库仅用于清理可能包含 HTML 的字符串？**

我发现很多源代码用于在 C# 或 Web 应用程序中更常用的其他语言中进行清理，但在 C++ 中没有。

如果我找不到任何可用的功能，我会尝试实现我自己的功能，但我认为经过大量测试的解决方案会好得多。

编辑>我的需求更精确：

我在我的 C++ 应用程序中从键盘获取文本输入。然后我需要在将其用作 javascript 函数调用中的参数之前对其进行清理。该javascript在加载的html页面中运行，该页面自动呈现（通过Chromium）在我通过库（Navi）显示的纹理中。因此，我使用的 javascript 函数将简单地获取给定的文本，在文本周围放置 P 标签并将其注入到这样的 div 中：

```
text_display.innerHTML += text_to_add; 
```

我需要在将文本发送到网页之前对其进行清理，无论是用于此功能还是其他功能。它只需要在输入 Chromium 之前进行消毒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-19T00:29:11.653

[HTML Tidy](http://tidy.sourceforge.net/)是用 c 编写的，但几乎所有语言/平台都有绑定，[包括 c++](http://users.rcn.com/creitzel/tidy.html#cplusplus)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T02:17:59.637

您可以使用[libxml2 的`xmlEncodeSpecialChars`](http://www.xmlsoft.org/html/libxml-entities.html#xmlEncodeSpecialChars).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T19:07:11.007

你在这里问了很多问题。在你得到一个好的答案之前，你需要清楚你想要从你的输入中“解析”出什么。例如，您可以查找任何“<”字符，并将它们转换为其他字符，这样它们就不会被任何 HTML 解析器解析。

或者，您可以搜索 < 和 > 的模式，然后是 </ > 模式。（对不起，我不得不把它放在这里，这样 HTML 解析器 HERE 就不会吃掉它）。然后，您还需要查找“< 单元素标签 />”。

您实际上可以查找有效/已知的 HTML 标记并将其删除。

那么，问题就变成了，哪种方法适合您的解决方案？知道如果您制作一个简单的解析器，您实际上可能会撕掉包含大于和小于符号的有效文本。

所以，到目前为止，这是我给你的答案。

如果您只想删除任何 HTML 风格的文本，我建议您使用正则表达式引擎 (PCRE)，并使用它来解析您的输入，并删除所有匹配的字符串。这可能是一个简单的解决方案，但它确实需要您获取并构建 PCRE，并且您需要为您的项目了解 GPL 问题。解析可能真的很容易实现，并且运行速度很快。

第二种选择是通过遍历缓冲区，寻找打开的 HTML 字符 (<)，然后解析直到遇到第一个空白，然后开始遍历，寻找关闭的 HTML 字符 (>)，然后再次开始遍历，根据您刚刚解析的内容寻找匹配的 CLOSING 标记。（比如说，它是一个 DIV 标签，你要查找 /DIV。）

我有在 STL HTML 解析器中执行此操作的代码，但也有很多问题需要考虑走这条路。例如，您需要处理实体代码、IMG、P 和 BR 等单元素标签，仅举几例。

如果您想查看一些非常棒的 C 代码，请查看 ClamAV 项目。他们有一个 HTML 解析器，可以去除页面中的所有标签，只剩下剩下的文本。（除其他外它确实..）。在文件 libclamav\htmlnorm.c 中查看有关“缓冲行走”和解析的一个很好的示例。这不是世界上最快的东西，但它确实有效......最新的 Clam 甚至可能有很多东西与 HTML 解析器相关联，实际上可能很难理解。如果是这样，请返回并查看早期版本，例如 .88.4 左右。请注意那些旧代码库中的错误，有一些好的。:)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T13:07:06.710

使用 Qt 的 QWebkit 并解析 HTML 树。然后用它吐出输出。这会稍微清理一下html。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-19T00:32:54.920

[这](http://www.codinghorror.com/blog/archives/001016.html)是几个小时前发布的。这只是一篇关于正则表达式的文章，但它恰好包含您想要的内容:) 我认为[这](http://refactormycode.com/codes/333-sanitize-html)也可能很有趣。

# c++ - 确定应用程序的退出点。C++/Linux

> ID：764555
> 
> 赞同：2
> 
> 时间：2009-04-19T00:30:40.447
> 
> 标签：c++, linux

我正在开发一个大型应用程序（ns2），并且有人在其中放置了一个 exit(1)，没有任何调试或打印语句，它正在执行。我不想手动检查每个调用 exit 的文件来找出程序退出的原因。是否可以确定程序退出的位置？这是在 Linux 上运行并用 C++ 编码的。是否有可能在 gdb 中做这样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-19T00:33:26.057

当然。在 exit(3) 的开头放置一个断点。当它中断时，查看堆栈。

第二个选择，在 truss(1) 下运行它（我很确定有一个 Linux 版本的 truss。）

或[strace(1)](http://linux.die.net/man/1/strace)。

### 更新

事实上，我在另一个问题中遇到了另一种方法： [这里有一个链接](http://ndevilla.free.fr/etrace/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T00:33:47.803

如果您提供自己的 实现`exit()`，那么将优先使用该实现，而不是库中的实现。构建它，在调试器中加载它，在你`exit()`的 .

或者正如[查理](https://stackoverflow.com/questions/764555/determing-exit-point-of-application-c-linux/764561#764561)所说，只需在 library 上放置一个断点`exit()`。如果您想运行其他一些特定的代码，请使用上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T17:12:38.900

由于您似乎可以访问源代码，因此我只需搜索退出并分析代码的调用。然后你很可能也可以通过用更合适的东西替换出口来修复它。

如果您的所有代码都在目录*src*中

```
grep -r exit src 
```

应该找到所有出现的单词 exit

如果您无权访问代码，请使用 Charlie 的建议。

# windows - 是否有任何支持加密的 Windows 开源文件系统？

> ID：764557
> 
> 赞同：1
> 
> 时间：2009-04-19T00:31:18.043
> 
> 标签：windows, filesystems, nfs, ext3

我知道 NTFS 支持加密，但其他方面是闭源的。同样，我知道诸如 truecrypt 之类的加载项，但我对内置加密与固定加密感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T00:50:08.857

不。

有[Bitlocker](http://en.wikipedia.org/wiki/Bitlocker)，但它的实现是闭源的。根据定义，所有其他非微软制造的产品都将被“固定”。微软没有在他们的操作系统 AFAIK 中提供任何开源文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T02:08:02.367

请记住，加密通常不在文件系统级别完成。它是在块级别完成的，扇区实际上是读/写到磁盘的。这允许人们使用任何具有加密功能的文件系统，因为文件系统位于加密层之上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T02:49:08.807

有什么具体的用例吗？

TrueCrypt[支持全卷加密](http://www.truecrypt.org/docs/?s=system-encryption)，带有启动密码。我无法确认这一点，但我相信 BitLocker 在启动时也需要密码。TrueCrypt 是我能找到的唯一选择，而且相对成熟。使用 TrueCrypt 的全盘加密将是透明的——我不确定您所说的“螺栓固定”是什么意思，但我认为您的意思是每次登录时都不必挂载加密卷。

编辑：不幸的是，没有适用于 Windows 的 FUSE 版本。有[Dokan 库](http://code.google.com/p/dokan/)，但它们并未广泛使用 AFAIK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T02:56:37.867

就个人而言，我使用 TrueCrypt，但[PGP](http://www.pgp.com/products/wholediskencryption/)也非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-15T14:08:45.750

[您可以查看我们的SolFS](http://www.eldos.com/solfs/)的操作系统版本，它可以满足您的需求。源代码可用，但不是免费的。

# encryption - BSD操作系统的开源全盘加密？

> ID：764564
> 
> 赞同：0
> 
> 时间：2009-04-19T00:34:02.827
> 
> 标签：encryption, filesystems, freebsd, bsd

任何人都知道与全盘加密产品（例如 Pointsec（一个 Check Point 产品））等效的开源软件，除非提供密码，否则机器将无法启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T00:43:44.550

从[这个 Wikipedia page](http://en.wikipedia.org/wiki/Comparison_of_disk_encryption_software)中，我看到了可以在 BSD（FreeBSD 或 NetBSD）上使用的以下磁盘加密方法：

*   [CGD](http://www.netbsd.org/docs/guide/en/chap-cgd.html) (NetBSD)
*   [GBDE](http://www.freebsd.org/doc/en/books/handbook/disks-encrypting.html) (FreeBSD)
*   [格力](http://www.freebsd.org/doc/en/books/handbook/disks-encrypting.html)(FreeBSD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-26T14:19:22.127

*在 FreeBSD 上，您几乎*可以加密整个磁盘。如果要加密包含文件系统根的分区，则需要一个未加密的分区来包含`/boot`.

在标准的 FreeBSD 9 安装中，`/boot`大约是 300 MB。其中大部分是`/boot/kernel`，尤其是`symbols`内核和模块的文件。

参见例如[这篇博客文章](https://www.dan.me.uk/blog/2012/05/05/full-disk-encryption-in-freebsd-9-x-well-almost/)。

就个人而言，我不会费心加密比保存数据的分区更多的东西。操作系统文件本身没有什么秘密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T10:32:57.350

Truecrypt 支持 windows、linux 和 mac。它支持[全盘加密](http://www.truecrypt.org/docs/?s=system-encryption)，尽管它仅被列为 Windows 支持。[显然](http://it.slashdot.org/comments.pl?sid=606473&cid=24099195) 有一些补丁增加了对 freebsd 的支持[，](http://forums.freebsd.org/showthread.php?t=3183)虽然我不知道这是否包括全盘加密。

[在 Bruce Schneier 对这篇博客](http://www.schneier.com/blog/archives/2008/07/truecrypts_deni.html)文章的评论中，除了 Rick Copeland 的回答中已经列出的内容之外，还提到了以下内容：

*   svnd (OpenBSD)

有可能

*   编码文件系统
*   CryptoFS

# ruby-on-rails - Ruby on Rails 和安全性

> ID：764565
> 
> 赞同：3
> 
> 时间：2009-04-19T00:36:50.323
> 
> 标签：ruby-on-rails, ruby, security, owasp

有没有人遇到过关于如何在 Ruby 中安全地开发 Web 应用程序的任何好的 Powerpoint 演示文稿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T00:50:49.417

Peepcode 有一[本关于 Rails 安全性的 PDF 书](http://peepcode.com/products/rails-security-audit-pdf)——售价 9 美元，但有免费预览版。我从这些人那里买了一堆截屏视频，它们都很棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T08:51:41.400

[Rory McCune](http://www.mccune.org.uk/)是一名安全顾问和 Rails 开发人员，他在 Scotland on Rails 上就该主题发表了演讲。您可以[在线查看幻灯片](http://www.slideshare.net/raesene/web-appliction-security-scotland-on-rails-presentation)。罗里也写了关于这个话题的博客。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-19T17:16:02.513

查看[Ruby on Rails 安全项目](http://www.rorsecurity.info/)。提供有关此主题的[免费书籍。](http://www.rorsecurity.info/the-book/)

当然，您应该阅读[Ruby On Rails 安全指南](http://guides.rubyonrails.org/security.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-30T09:08:05.987

Ruby Security 书是作为 OWASP 项目联合开发的[http://www.owasp.org/index.php/Category:OWASP_Ruby_on_Rails_Security_Guide_V2](http://www.owasp.org/index.php/Category:OWASP_Ruby_on_Rails_Security_Guide_V2)

在 OWASP 有更多与安全相关的材料会很好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-30T19:32:58.907

Rory 在 Rails 上的苏格兰演示的视频也在[这里在线](http://www.rubyinside.com/scotland-on-rails-presentations-now-online-27-awesome-videos-1799.html)

# vim - 在 Vim 中映射 Esc 键

> ID：764569
> 
> 赞同：9
> 
> 时间：2009-04-19T00:42:09.390
> 
> 标签：vim, text-editor, vi

我是 Vim 的初级用户。我讨厌`Esc`按键，这在我的 T61 上有点远。为了返回命令模式。如何将其映射到`F4`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-19T01:05:17.277

对于单个会话，您只需准确输入以下击键：

`esc``:``i``m``a``p``space``<``f``4``>``space``<``e``s``c``>``enter`

该`esc`键确保您处于命令模式，冒号开始一行命令，并将`imap`F4 键映射到 ESCAPE。

但是，如果您希望在每个会话中都保留它，则需要将其放入您的 Vim 启动文件中。

它的位置取决于您的环境（对于我的 Linux 机器，对于 gvim，它位于 $HOME/.gvimrc，对于 vim，它位于 $HOME/.vimrc）。您需要找到它并添加以下行：

```
imap <f4> <esc> 
```

您可以使用的一个技巧是启动一个裸 Vim 会话（`vim`不带参数）然后输入

```
:e $MYVIMRC 
```

这将打开您当前的启动文件。

还，

```
:echo $HOME 
```

应该告诉你它在 Windows 下的位置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-19T00:45:29.553

退出插入模式的另一种方法是使用 Ctrl+C。不确定这是否对您的情况有帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-19T16:59:25.877

就像许多 Emacs 用户将他们的“Caps Lock”键重新绑定到“Control”一样，vimers 将他们的“Caps Lock”重新绑定到“Escape”。

……至少我会。它创造了奇迹。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-19T12:41:56.930

尝试主行：

```
imap jj <Esc> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-19T00:46:04.700

```
imap <F4&> <ESC> 
```

# c# - FormView EditTemplate 如何在底层更新 ObjectDataSource UpdateParameters 中的值？

> ID：764570
> 
> 赞同：5
> 
> 时间：2009-04-19T00:43:26.143
> 
> 标签：c#, asp.net, objectdatasource, formview

我有一个绑定到 ObjectDataSource 的 FormView。

*** ObjectDataSource 定义（为简单起见省略了部分）***

```
<asp:ObjectDataSource 
    ID="odsHousehold" 
    runat="server"
    TypeName="BLL.Households"
    ConflictDetection="OverwriteChanges"
    UpdateMethod="UpdateHousehold" 
    >
    <UpdateParameters>
        <asp:Parameter Name="sName" Type="String" Direction="Input" />
        <asp:Parameter Name="sAddress" Type="String" Direction="Input" DefaultValue="" />
        <asp:Parameter Name="sCity" Type="String" Direction="Input" DefaultValue="" />
        <asp:Parameter Name="sState" Type="String" Direction="Input" DefaultValue="" />
        <asp:Parameter Name="sZip" Type="String" Direction="Input" DefaultValue="" />
    </UpdateParameters>
</asp:ObjectDataSource> 
```

*** FormView 定义（为简单起见，省略部分）***

```
 <asp:FormView 
    ID="fvHousehold"
    runat="server"
    DataKeyNames="HouseholdID"
    DataSourceID="odsHousehold"
    HorizontalAlign = "Left"
 >
<EditItemTemplate>
<asp:TextBox ID="txtHouseHoldName" runat="server" MaxLength="50" Width="100%" Text='<%# Bind("HouseholdName") %>'></asp:TextBox>
<asp:TextBox ID="txtAddress" runat="server" MaxLength="50" Width="100%" Text='<%# Bind("Address") %>'></asp:TextBox>
<asp:TextBox ID="txtCity" runat="server" MaxLength="50" Width="100%" Text='<%# Bind("City") %>'></asp:TextBox>
<asp:TextBox ID="txtState" runat="server" MaxLength="50" Width="100%" Text='<%# Bind("State") %>'></asp:TextBox>
<asp:TextBox ID="txtZip" runat="server" MaxLength="50" Width="100%" Text='<%# Bind("Zip") %>'></asp:TextBox>
 <asp:Button ID="btnUpdateHousehold" runat="server" Text="Update" CommandName="Update" />
</EditItemTemplate>
</asp:FormView> 
```

***我想知道：当单击更新按钮时，FormView 如何知道要使用哪个 EditTemplate TextBox 填充哪个 UpdateParameter？
例如，我没有在 FormView 中指示“txtAddress”填充 UpdateParameter“sAddress”，但 InputParameters[“sAddress”] 包含 txtAddress 的文本值。它怎么知道这样做？*** 
有哪位大师能开导我吗？

太感谢了，

卡伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-27T12:41:46.503

“当单击更新按钮时，FormView 如何知道要使用哪个 EditTemplate TextBox 填充哪个 UpdateParameter？”

我相信简单的答案是：它知道是因为您在 TextBox 控件中放置的 Bind 语句。例如 txtAddress 具有“Bind("Address")”，因此当调用更新时，它在 txtAddress 和参数“Address”之间建立了连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T06:13:14.283

Perhaps it is simply the order in which the TextBox controls are added to the EditItemTemplate? i.e. the order of the controls must match the order of the UpdateParameters...

Try swapping the position of txtHouseHoldName and txtAddress, does the address get passed into the sName parameter of your update method?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T14:29:29.823

我的博客上有一篇文章详细讨论了 Bind() 如何在[http://www.aarongoldenthal.com/post/2009/03/15/ASPNET-Databinding-Bind()-Method-Dissected.aspx](http://www.aarongoldenthal.com/post/2009/03/15/ASPNET-Databinding-Bind()-Method-Dissected.aspx) 上工作。

# c - 仅在大括号范围内缩进代码是否很常见？

> ID：764599
> 
> 赞同：1
> 
> 时间：2009-04-19T01:05:50.427
> 
> 标签：c, code-formatting

对于生成的代码，我可以选择缩进或不缩进大括号，这些大括号仅用于在范围内容纳变量。目前它没有在这个级别缩进，我想知道我是否要通过缩进来暗示嵌套结构？常见的做法是什么？

```
/* loop through the total number of letter a rules  */
for (a = 0; a < (number_a_rules - 1); a++) 
{
        /* loop through secondary position rules */           
        {
        int a2end = arulestableend[2];
        for (int a2 = arulestablestart[2]; a2 < a2end; a2++) 
        {
                  /* stuff */
        }
        }
} /* end for a 0 to numberarules -1 */ 
```

**相对**

```
/* loop through the total number of letter a rules  */
for (a = 0; a < (number_a_rules - 1); a++) 
{
        /* loop through secondary position rules */
        {
                 int a2end = arulestableend[2];
                 for (int a2 = arulestablestart[2]; a2 < a2end; a2++) 
                 {
                     /* stuff */
                 }
        }
} /* end for a 0 to numberarules -1 */ 
```

**澄清**：使用调试器额外的缩进意味着另一个级别的循环难以阅读的代码......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T01:10:51.490

在我看来，如果*没有*缩进，它会更具误导性。我看着未缩进的版本并想“这里有什么问题”？

真的有必要有多余的大括号吗？

### 更新

我想回答 ojblass 的评论，它会比我认为的评论占用更多的空间。

> 我认为你不能在没有大括号的情况下在 c 中声明变量......至少在一些悲惨的编译器上。

你在 C 中不像在 C++ 中那样自由；您要做的就是在任何可执行代码*之前放入任何新声明。*所以，在这个片段中

```
for (a = 0; a < (number_a_rules - 1); a++) 
{
        /* loop through secondary position rules */
        {
                 int a2end = arulestableend[2];
                 for (int a2 = arulestablestart[2]; a2 < a2end; a2++) 
```

你可以写

```
for (a = 0; a < (number_a_rules - 1); a++) 
{
     int a2end = arulestableend[2];
     for (int a2 = arulestablestart[2]; a2 < a2end; a2++) 
```

它会很好地工作。另一方面，for 循环中的声明也不是直接的 C。

现在，可能但不会在示例中显示的*是*，提问者是否使用大括号来限制范围，以便他拥有更简单的命名空间管理；也就是说，所以你可以有

```
{
     int a2 = some_good_thing();
     // do stuff
}
{
     int a2 = something_else();  // Now a different a2, 
                                 // and it's the compiler's problem
     // do other stuff
} 
```

（注意：抱歉，OJ，没有意识到你*是*提问者。我的眼睛受伤了，请在阅读时对语法进行必要的更正。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T01:10:20.150

在使用大括号进行变量作用域时，我肯定会始终缩进代码。

我用于生成 C（和 C++）代码的一种技术是在生成代码时完全不用担心*格式*。只需将代码扔在那里，而不考虑间距、缩进、行尾或任何东西。[生成后，通过GNU`indent`](http://www.gnu.org/software/indent/)运行它以使代码可读以用于调试目的。这比尝试自己创建所有格式要容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T01:12:17.900

我想不出不缩进的好理由。大括号表示一个块，无论它是用于循环还是其他条件语句，都具有重要意义。最后，它归结为您认为更具可读性的内容，因此请按照您的直觉行事，但要保持一致。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T01:52:48.427

如果您打算让人们阅读它，请缩进。没有缩进，大括号不起作用。我不得不盯着上面的例子看了一会儿，以说服自己它没有坏掉。

缩进并不意味着循环；还有许多其他结构使用它。如果大括号嵌套没有任何其他内容，我可能会感到困惑：

```
for (...)
{
    {
        /* huh? */
    }
} 
```

但是在第二个例子中使用了紧跟大括号的注释，很快就可以看出发生了什么。

您是否担心使用太多缩进并达到“80 个字符限制”？如果是这样，请增加限制和/或减少缩进大小（8 个空格确实有点大）。

（如果你*不*打算让它被人类阅读，那么谁在乎呢？）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-19T15:22:09.057

`for`在语句的第一部分使用逗号运算符怎么样？

```
for (int a2 = arulestablestart[2], int a2end = arulestableend[2]; a2 < a2end; a2++) 
{
    // do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-19T01:15:34.427

为其真正的客户吐出自动生成的代码：编译器。几块换行符通常会帮助编译器，它们仍然针对许多短行进行了优化，但除此之外，谁在乎呢？当你想手动检查它的正确性时，有很多漂亮的打印机可以让它看起来很漂亮。

# zsh - 如何将 .bashrc 导出到 .zshrc？

> ID：764600
> 
> 赞同：104
> 
> 时间：2009-04-19T01:07:14.010
> 
> 标签：zsh, bash, zshrc

我正在尝试从 Bash 迁移到 zsh。

我把我的 .bashrc 直接放到了我的 .zshrc 中，当我再次尝试使用 Bash 时，它导致了很多错误。

**如何将 .bashrc 导出到 .zshrc？**

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2014-09-24T15:21:16.420

虽然 lhunath 的回答将我推向了正确的方向，但 zsh 似乎并没有`.profile`自动来源。[在这个超级用户帖子](https://superuser.com/questions/187639/zsh-not-hitting-profile)中可以找到很多关于这个主题的好信息。

我正在使用的适应是将通用别名和函数放入`.profile`并手动获取它们，如下所示：

在`~/.bashrc`：

```
source ~/.profile 
```

在`~/.zshrc`：

```
[[ -e ~/.profile ]] && emulate sh -c 'source ~/.profile' 
```

[`emulate`](http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html)是一个 zsh 内置命令。使用单个参数设置 zsh 选项以尽可能多地模拟指定的 shell。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-04-19T06:46:15.617

您不能将您的“*导出*”`.bashrc`到`.zshrc`. `.bashrc`是一个运行`bash`命令的文件。 `.zshrc`是一个运行`zsh`命令的文件。

你不能指望`zsh`能够`bash`在你`.bashrc`的.`.zshrc``.bashrc``.zshrc`

如果你想为所有的 shell 提供一个通用的 shell 初始化文件；使用`.profile`（并删除`.bashrc`和`.zshrc`）。它由所有 POSIX shell 提供。**在那里，只**坚持使用 POSIX shell 功能。然后该代码将在任何 POSIX shell 中运行。（不过，我不能 100% 确定它`zsh`是否符合 POSIX）。

看：[http://mywiki.wooledge.org/DotFiles](http://mywiki.wooledge.org/DotFiles)。

虽然 - 我首先误读了你问题的这一部分 - 你不应该`bash`在运行你的时候遇到错误，`.bashrc`除非你把`zsh`命令放在那里。你是否？你得到什么错误？在我看来，您已将`zsh`代码添加到您的代码中`.bashrc`并且`bash`（显然）不理解。

顺便说一句，`ojblass`试图指出仅部分成功的可移植性。 `zsh`是一个很棒的外壳（虽然我自己没有获得荣誉），但是在编写脚本时；我建议你这样做`#!/usr/bin/env bash`。主要是为了您自己（以及最终与您共享的人）的可移植性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-05T16:28:15.963

对我来说，Ryen 的回答很方便。但我做了一点改变。我在用户目录（vim ~/.profile）的 .profile 中添加了所有别名命令。

```
alias gs='git status'
alias gp='git pull'
alias gph='git push'
alias gd='git diff | mate'
alias gau='git add --update'
alias gc='git commit -m'
alias gca='git commit -v -a'
alias gb='git branch'
alias gba='git branch -a'
alias gco='git checkout'
alias gcob='git checkout -b'
alias gcot='git checkout -t'
alias gcotb='git checkout --track -b'
alias glog='git log'
alias glogp='git log --pretty=format:"%h %s" --graph'
alias gfo='git fetch origin' 
```

然后，我在 bash 和 zsh shell 中添加了 source 命令。

**在 bash shell ( vim ~/.bashrc)**

```
source ~/.profile 
```

**在 zsh shell ( vim ~/.zshrc )**

```
source ~/.profile 
```

# c# - 我可以让 DLL 文件自动运行并继续工作吗？

> ID：764602
> 
> 赞同：1
> 
> 时间：2009-04-19T01:09:24.553
> 
> 标签：c#, .net, vb.net, winapi

我刚刚在一些 wordpress 插件中看到，有自动标签插件，自动 RSS 获取，只需安装插件，它就可以一直工作而无需调用它。

我想要做的是将一个dll文件放在我的Images文件夹中，它将监视上传的文件并根据一些选项对其进行编辑，我希望这个dll在上传到正确的文件夹时自动工作，并永远运行

这个可以做到？
如果没有，还有其他选择吗？
“我知道我可以使用 Windows 服务或启动应用程序，我的意思是其他选项”

**更新：**我想要任何其他选项，因为服务器可能是共享的，因此无法访问其 Windows 以提供服务或启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T01:22:24.037

> “您只需安装插件，它就可以一直工作而无需调用它”

您安装将针对已发布界面编写的插件，然后 wordpress 将在需要时根据需要自动调用该插件。

一个 dll 不能自己运行，它是一个库，你需要别的东西来调用它 - 检查 XP 或 Win2k3 服务器上正在运行的进程，你会看到许多 rundll32 实例 - 一个用于托管的可执行文件dll。

根据您想要做什么，以及您有什么限制，您也许可以做一些[Shell Extensions](http://msdn.microsoft.com/en-us/library/dd378464(VS.85).aspx)的事情，但我认为 Windows 服务将是最好的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T01:37:34.890

由于您没有包含任何链接，我只能假设您正在考虑[WP-o-Matic](http://wordpress.org/extend/plugins/wp-o-matic/faq/)。从常见问题解答中，它设置了一个[cron](http://en.wikipedia.org/wiki/Cron)作业 - 它不会自动运行。

Windows 等效项是[计划任务](http://support.microsoft.com/kb/308569)。您可以编写一个 EXE 来托管 DLL 并调用它。或者，使用[wget](http://gnuwin32.sourceforge.net/packages/wget.htm)调用可以完成工作的 URL。显然，正如您所提到的，具有 FileSystemWatcher 的 Windows 服务将具有更少的延迟。

话虽如此，有各种黑客[滥用 ASP.NET 的缓存服务](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)、[计时器](http://msdn.microsoft.com/en-us/magazine/cc163854.aspx#S7)或[线程](http://channel9.msdn.com/forums/TechOff/96222-HELP-Implementing-Background-Service-in-ASPNET-using-Threads/)来避免 Windows 服务或计划任务。就个人而言，我不赞成其中任何一个。;)

# c# - C# 列表框绑定到实体“实体框架”

> ID：764611
> 
> 赞同：2
> 
> 时间：2009-04-19T01:17:29.103
> 
> 标签：c#, winforms, entity-framework, listbox, linq-to-entities

在我的 WinForm 上，我将列表框绑定到`Entity`EDMX 上的一个表，但是当表数据更改时，我尝试调用

```
myListBox.DataSource = Entities.table;
myListBox.ResetBindings();
myListBox.Refresh(); 
```

但在`ListBox`. 该`Entities.table`对象虽然包含正确的数据，但它只是不反映在`ListBox`.

任何想法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T03:53:05.047

尝试以下

```
myListBox.DataSource = null;
myListBox.DataSource = Entities.table 
```

ListBox 和其他数据绑定类中有一个优化，如果分配给 DataSource 的引用没有更改，则基本上不会进行更新。它实际上并不检查数据的内容。事先将其设置为 null 将保证引用不同。

# javascript - 从另一个框架中获取选定的文本

> ID：764612
> 
> 赞同：2
> 
> 时间：2009-04-19T01:17:56.967
> 
> 标签：javascript, frames, getselection

我有一个框架集，我希望有人能够单击一个框架中的一个按钮，该按钮对另一个框架中选择的文本执行某些操作。中的按钮`frame[0]`调用以下 JavaScript 以从中获取所选文本`frame[1]`：

```
self.parent.frames[1].getSelection() 
```

我认为，问题在于单击按钮的行为会`frame[0]`取消选择 中的文本`frame[1]`，因此`getSelection`返回一个空字符串。我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T02:01:44.473

尝试使用 onmousedown 而不是 onclick 作为按钮的处理程序。我相信它会在焦点被赋予按钮并且选择丢失之前得到处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T03:14:11.430

你的问题出在别的东西上。先前的选择存在足够长的时间以在单击时记录下来。它可以帮助您查看执行您想做的工作的代码。

[我为FCKEditor](http://www.fckeditor.net/)编写了一个[智能报价](http://www.mrfixitonline.com/viewtopic.php?t=8025)插件。它可能看起来很复杂，但基本上它会做你想做的事：用户选择一些东西，点击一个按钮，编辑器响应 onclick 并从[这个 javascript](http://www.mrfixitonline.com/source.php?file=fckeditor/editor/plugins/quote/fckplugin.js)执行函数。该代码使用一些 FCKEditor 函数来进入编辑窗口，但这部分对您来说并不感兴趣。

最重要的是，您的计划有效。

# java - 我的代码在 Eclipse 中编译，但我在运行时得到一个 ClassNotFound 我该如何修复它？

> ID：764614
> 
> 赞同：3
> 
> 时间：2009-04-19T01:20:16.413
> 
> 标签：java, eclipse, jar, compilation, runtime-error

什么会导致 jar 成功添加到 Eclipse Java 项目，但在运行时找不到该 jar 中的某些类并出现 ClassNotFound 异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T01:22:00.293

运行时的 CLASSPATH 变量可能设置不正确，或者您错过了将一些类添加到 jar 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T01:25:13.953

@ojblas 几乎可以肯定它是对的。只是为了扩展它，您可以使用*jar(1)*工具转储 jar 文件并查看该类是否存在。我从 Eclipse 中得到了惊喜，项目定义不明白要放入我生成的 jar 文件中运行的`java -jar`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T01:53:59.030

每个人似乎都在正确的轨道上。你为什么不，当你解压 jar 时，将整个东西作为源文件夹添加到你的 eclipse 项目中，看看你是否可以这样加载它？有时，取决于类加载器，如果您的类在类路径上多次可用，您可以获得 CNFE……类加载器只是放弃，因为它不知道要使用哪一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T18:54:07.087

由于缺少权限，我发生了此错误。原来检查你是否连接到互联网（即可达性）和使用互联网的权限是单独的权限（生活和学习。）

缺少权限导致应用程序在尝试运行可达性测试时失败并出现 ClassNotFound 错误。

希望对某人有所帮助，因为这不是一个有趣的工作时间。

# sql-server - 在 Update 语句中使用子查询

> ID：764622
> 
> 赞同：0
> 
> 时间：2009-04-19T01:26:31.360
> 
> 标签：sql-server, subquery, sql-update

我在删除时触发的触发器中有以下 SQL 语句：

```
UPDATE bk2_InfoPages
SET SortOrder = SortOrder - (SELECT COUNT(*) FROM Deleted d WHERE d.SortOrder <= SortOrder) 
```

我的问题是最后一个`SortOrder`是指`Deleted`表格而不是`bk2_InfoPages`表格。我不允许向`bk2_InfoPages`表中添加别名，因为它是一个`UPDATE`语句 - 那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T01:29:44.830

```
UPDATE bk2_InfoPages
SET SortOrder = SortOrder - (SELECT COUNT(*) FROM Deleted d WHERE d.SortOrder <= bk2_InfoPages.SortOrder) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T01:47:08.673

这应该有效：

```
UPDATE b
SET SortOrder = SortOrder - 
  (SELECT COUNT(*) FROM Deleted d WHERE d.SortOrder <= b.SortOrder)
from bk2_InfoPages b 
```

您必须给表起别名才能进行子查询，例如：

```
-- this executes fine 
create table #t ( t int)

update t 
set t = (select count(*) from #t t1 where t.t = t1.t)
from #t t 
```

# c - Phar Lap 汇编器：如果可能，我需要信息/文档和二进制文件

> ID：764623
> 
> 赞同：1
> 
> 时间：2009-04-19T01:27:05.553
> 
> 标签：c, legacy, dos, assembly

我为最初针对 MSDOS 的程序[继承了一个相当古老的大而复杂的代码库。](https://stackoverflow.com/questions/688241/reverse-engineering-old-paint-programs)事实证明，该程序的某些部分是用 x86 汇编程序的一种晦涩方言编写的，称为“Phar Lap assembler”，以生产该汇编程序的公司和产品命名。我已经进行了相当深入的谷歌搜索，但我找不到原始的汇编程序或任何有关它的信息或文档。（尽管我在专家交流中发现了一些相当令人沮丧的页面，人们提出了类似的问题）。

所以基本上，在我找到 PharLap Assembler (386asm.exe) 的副本，或者找到足够的有关方言的信息将其翻译成更“标准”的 MASM 之前，我将无法编译这个东西。 . 要么，要么尝试通过阅读来弄清楚它。

或者，如果这都不可能，那么我只需要一些帮助来解决这个问题，我至少应该能够编译程序的一部分。

.c 文件中有一个结构声明，如下所示：

```
//static struct bhash *bhash;

typedef struct bhash_control {
 void   *cachedata;
 Rgb3   *ctab;
 int    rederr;
 int    grnerr;
 int    bluerr;
 ULONG  drgb;   // temp var used by dithering, blackbox to us here
#ifdef SHOW_STATS
 int calls, hits1, hits2, fhits, misses;
#endif
 } BhashCtl;

BhashCtl bhashctl;   // global so assembler code can see it. 
```

然后有一些看起来像这样的汇编器，它可能试图做出相同的类型声明，以便一些汇编器代码可以使用相同的类型：

```
BhashCtl struct
 cachedata  dd ?   ; pointer to alloc'd cache data area
ctab    dd ?   ; contains vb.pencel->cmap->ctab
rederr    dd ?   ; error diffusion dithering variables...
grnerr    dd ?
bluerr    dd ?
drgb    dd ?   ; rgb value with dithering rolled in

;calls     dd  ?    ; cache stats...
;hits1     dd  ?    ;   to use these, you also need to
;hits2     dd  ?    ;   uncomment a few lines below.
;fhits     dd  ?    ;   search for 'bhashctl.' to find them.
;misses     dd  ?

BhashCtl ends

 extern bhashctl:BhashCtl ; the one-and-only lives in bhash.c 
```

这在最后一行编译时出现错误，如下所示（watcom 汇编器）：

```
Error! E518: External definition different from previous one 
```

所以基本上，我认为这是说这个结构的汇编版本与这个结构的 C 版本不匹配。我已经在汇编器中尝试了多种 WORD 和 DWORD 的不同组合来代替 dd，但我无法克服这个小问题。也许如果我能找到一种方法让这两个声明完美匹配，我对 pharlap 信息的需求就会减少。

另外，如果有人能为这个庞大的问题想出一个更好的标题，我愿意接受。

编辑：好吧，事实证明我浏览了一些重要信息。这是一个最初为 Phar Lap 汇编器（我没有）编写的文件，我正在尝试使用 watcom 汇编器（wasm）进行汇编。事实证明，该特定错误的问题在于 Phar Lap 似乎区分大小写，而 watcom 不区分大小写。所以它认为 bhashctl 与 BhashCtl 相同。在我姐夫的帮助下解决了这个问题。我永远不会想到不区分大小写是导致该问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T02:47:05.550

一些 Phar Lap 手册（包括 386|ASM 手册）的 ZIP 位于：

[http://www.dinigroup.com/pharlap.php](http://www.dinigroup.com/pharlap.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T02:24:55.977

这可能不是您需要的答案，但无论如何我都会尝试：将您的程序集部分移植到 C 中有多难？我知道有些东西是 C 不能做的，但也许你可以使用内联汇编来完成它。

# javascript - 如何在 w3m 终端中使用 Javascript？

> ID：764624
> 
> 赞同：10
> 
> 时间：2009-04-19T01:27:52.730
> 
> 标签：javascript, unix, terminal, w3m

我发现文本浏览器 w3m 在我看来是迄今为止最好的。但是，主要问题是Javascript。

当我使用它时，我在 Stackoverflow 中根本看不到评论。

我不确定让 Javascript 进入终端有什么限制。

**如何为终端启用至少一些 JavaScript 以**使评论可见？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-19T01:34:03.760

Javascript 需要 Javascript 解释器。如果您的用户代理不理解特定类型的脚本，它会简单地忽略它。要获得最低程度的支持，请尝试**[w3m-js](http://abe.nwr.jp/w3m/w3m-js-en.html)**扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-19T01:33:55.180

不幸的是 w3m 根本不支持 JavaScript。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-19T08:12:38.997

## 试试康克勒

Masi——我建议看一下 Conkeror，它基本上是带有 Emacs 键绑定的 Firefox。如果你想要一个带有 Javascript 的键盘驱动 UI，这是你最好的选择：

[http://conkeror.org](http://conkeror.org)

[http://www.saltycrane.com/blog/2008/01/firefox-for-emacs-users/](http://www.saltycrane.com/blog/2008/01/firefox-for-emacs-users/)

头版可以改头换面，但一旦你下载并安装它，你会想知道为什么你以前从未尝试过...

（如果你是 vim 用户，你可以试试 vimerator）。

# python - 如何在python中隐藏控制台窗口？

> ID：764631
> 
> 赞同：91
> 
> 时间：2009-04-19T01:35:30.200
> 
> 标签：python, console, hide

我正在用 Python 编写一个 IRC 机器人。

我希望为它的 Linux 和 Windows 制作独立的二进制文件。主要我希望当机器人启动时，控制台窗口应该隐藏并且用户不应该能够看到该窗口。

我能为此做些什么？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2009-04-19T01:51:12.440

只需使用`.pyw`扩展名保存即可。这将阻止控制台窗口打开。

> 在 Windows 系统上，没有“可执行模式”的概念。Python 安装程序会自动将 .py 文件与 python.exe 关联，以便双击 Python 文件将其作为脚本运行。**扩展名也可以是 .pyw，在这种情况下，通常出现的控制台窗口会被抑制。**

[2.2.2节底部的解释](https://docs.python.org/2.6/tutorial/interpreter.html#executable-python-scripts "2.2.2。 可执行的 Python 脚本")

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-04-19T01:44:08.073

在linux中，运行它，没问题。在 Windows 中，您想使用 pythonw 可执行文件。

### 更新

好的，如果我理解评论中的问题，您是在问如何使您从命令行启动机器人的命令窗口在之后消失？

*   UNIX (Linux)

> $ nohup mypythonprog &

*   视窗

> C:/> 启动 pythonw mypythonprog

我*认为*这是对的。无论如何，现在您可以关闭终端了。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-01T00:30:37.360

## 在 Unix 系统上（包括 GNU/Linux、macOS 和 BSD）

使用`nohup mypythonprog &`，您可以在不中断进程的情况下关闭终端窗口。`exit`如果您在云中运行并且不想留下挂起的 shell 进程，您也可以运行。

## 在 Windows 系统上

使用扩展名保存程序`.pyw`，现在它将以`pythonw.exe`. 没有外壳窗口。

例如，如果您有`foo.py`，则需要将其重命名为`foo.pyw`.

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-03-14T18:00:11.507

这将隐藏您的控制台。首先在您的代码中实现这些行以开始隐藏您的控制台。

```
import win32gui, win32con

the_program_to_hide = win32gui.GetForegroundWindow()
win32gui.ShowWindow(the_program_to_hide , win32con.SW_HIDE) 
```

**2020 年 5 月更新：**

如果您`pip install win32con`在命令提示符上遇到问题，您可以简单地`pip install pywin32`. 然后在您的 python 脚本上，执行`import win32.lib.win32con as win32con`而不是`import win32con`.

要再次显示您的程序`win32con.SW_SHOW`可以正常工作：

```
win32gui.ShowWindow(the_program_to_hide , win32con.SW_SHOW) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-11-25T04:37:27.603

如果您只想在安装了 Python 解释器的 Windows 计算机上运行您的 Python 脚本，那么将保存的脚本的扩展名从“.py”转换为“.pyw”应该可以解决问题。

但是，如果您使用 py2exe 将脚本转换为可以在任何 Windows 机器上运行的独立应用程序，则需要对“setup.py”文件进行以下更改。

以下示例是使用 Tkinter 制作的简单 python-GUI：

```
from distutils.core import setup
import py2exe
setup (console = ['tkinter_example.pyw'],
       options = { 'py2exe' : {'packages':['Tkinter']}}) 
```

把上面代码中的“console”改成“windows”..

```
from distutils.core import setup
import py2exe
setup (windows = ['tkinter_example.pyw'],
       options = { 'py2exe' : {'packages':['Tkinter']}}) 
```

这只会打开 Tkinter 生成的 GUI，没有控制台窗口。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-20T15:32:17.517

一些额外的信息。对于需要 Mohsen Haddadi 在此线程前面发布的 win32gui 解决方案的情况：

从 python 361 开始，win32gui 和 win32con 不是 python std 库的一部分。要使用它们，需要安装 pywin32 包；现在可以通过 pip。

有关 pywin32 包的更多背景信息位于：[如何在 Python 中使用 win32gui 模块？](https://stackoverflow.com/questions/6624672/how-to-use-the-win32gui-module-with-python).

此外，为了在关闭窗口时应用谨慎，以免无意中关闭前台中的任何窗口，可以按照以下方式扩展分辨率：

```
try     :

    import win32gui, win32con;

    frgrnd_wndw = win32gui.GetForegroundWindow();
    wndw_title  = win32gui.GetWindowText(frgrnd_wndw);
    if wndw_title.endswith("python.exe"):
        win32gui.ShowWindow(frgrnd_wndw, win32con.SW_HIDE);
    #endif
except  :
    pass 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-02T23:42:15.973

编写完代码后要将文件从 转换`.py`为`.exe`，因此您可能会使用`pyinstaller`并且最好制作`exe`文件。所以你可以用这种方式隐藏控制台：

```
pyinstaller --onefile main.py --windowed 
```

我习惯了这种方式，并且有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-23T19:56:18.143

只需将文件扩展名从更改`.py`为`.pyw`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-05-29T01:43:12.880

为此的装饰器工厂（windows 版本，unix 版本应该更容易通过`os.fork`）

```
def deco_factory_daemon_subprocess(*, flag_env_var_name='__this_daemon_subprocess__', **kwargs_for_subprocess):
    def deco(target):
        @functools.wraps(target)
        def tgt(*args, **kwargs):
            if os.environ.get(flag_env_var_name) == __file__:
                target(*args, **kwargs)
            else:
                os.environ[flag_env_var_name] = __file__
                real_argv = psutil.Process(os.getpid()).cmdline()
                exec_dir, exec_basename = path_split(real_argv[0])
                if exec_basename.lower() == 'python.exe':
                    real_argv[0] = shutil.which('pythonw.exe')
                kwargs = dict(env=os.environ, stdout=subprocess.PIPE, stderr=subprocess.PIPE, )
                kwargs.update(kwargs_for_subprocess)
                subprocess.Popen(real_argv, **kwargs)

        return tgt

    return deco 
```

像这样使用它：

```
@deco_factory_daemon_subprocess()
def run():
    ...

def main():
    run() 
```

# unix - 如何扩展“less”命令行为？

> ID：764641
> 
> 赞同：1
> 
> 时间：2009-04-19T01:43:15.360
> 
> 标签：unix, binary

一般情况下，我想大家只使用“less”命令来读取纯文本文件的内容。

但是在 Gentoo 上，less 命令行似乎比我在其他 Linux 发行版或 Cygwin、Mac OS X 上使用的命令行更强大... Gentoo 上的 less 命令能够列出压缩存档文件的内容，可执行文件的ELF头和其他信息，也许还有更多……我不记得它是在什么平台上的，但我认为也可以使用某些版本的“更少”（或者可能是这只是一个梦？）。

所以我想知道是否有一种方法可以轻松地为 less 命令进行扩展，例如使其能够读取（以一种很好的方式显示）某种格式的二进制文件。我在谷歌上搜索了这方面的信息，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T02:24:39.723

你看过[`lesspipe.sh`](http://www-zeuthen.desy.de/%7Efriebel/unix/lesspipe.html)吗？

实际上，`lesspipe.sh`仅在管道传输到 less 之前处理文件或 url。顺便说一句，我没有使用这个，但我经常打字`ps2ascii some.pdf | less`来阅读 pdf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T02:08:58.137

根据[this](http://www.cyberciti.biz/tips/less-is-more-the-hidden-treasure-of-less-command.html) page和[this](http://www.thegeekstuff.com/2009/04/linux-less-command-open-view-different-files-less-is-more/) page，less已经支持PDF，至少在那个版本中

我尝试减少了几个不同的 PDF 文件，看起来有些是基于图形的，有些是基于文本的。我能够阅读基于文本的那些，但不是图形的，因为它们都是命令而不是太多的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T02:16:57.073

刚刚在我的 Mac 上做了一个“少人”。less 可以与输入预处理器一起使用。手册页有一个设置预处理器 shell 脚本以处理档案的示例。预处理器识别扩展名并将未压缩的文件输入 less。您可以使用环境变量 LESSOPEN 和 LESSCLOSE 指定预处理器脚本。

也许你的全功能系统有一些由 LESSOPEN 指定的脚本。在您的环境中寻找LESSOPEN。

酷，我学到了一些新的东西来寻找答案。

注意：我通常使用“readelf -h”来转储 ELF 标头。当我进行交叉编译并需要验证库格式时非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T02:26:14.647

尝试使用“man lessfile”和“man lesspipe”获取有关此行为的文档。

在 Ubuntu 上，less 默认将 PDF 处理为纯文本。（实际上我觉得这很烦人，因为当我输入“less something.pdf”时，通常是因为我想查看原始 PDF。不过，对于单文件情况，可以轻松地使用“less < something.pdf”。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T17:22:20.350

我对此进行了研究，因为我可以看到许多带有 的二进制文件`less`，但是偶尔，不支持二进制类型，并且添加支持会很棒...

首先，我想报告这实际上已记录在案：

```
man lesspipe 
```

最好的办法是使用 C 或 C++ 等语言创建脚本甚至二进制文件，并将可执行代码放入：

```
~/.lessfilter 
```

默认`lesspipe`脚本将运行该可执行文件，如果它存在并且是可执行的（`x`权限位设置）。如果您输出结果然后成功退出 ( `exit 0`)，则将显示该输出。如果您无法识别输入文件，您可以简单地退出并显示错误 ( `exit 1`)。

这是一个显示 ELF 文件*头*的示例（我在检查此类文件时希望看到的内容）：

```
#!/bin/bash -e
# Detect file type using `file ...` instead of extension
MIME=`file --brief --mime-type "$1"`
case "${MIME}" in
"application/x-sharedlib")
    objdump -x $1
    exit 0
    ;;
esac
exit 1 
```

您可以非常轻松地扩展该脚本，添加新案例并运行您想要生成您喜欢的输出的任何命令。

这样，你甚至可以从默认脚本中劫持一些已经实现的功能。

**注意：**实际上有一个名为的 github 项目[`lesspipe`](https://github.com/wofr06/lesspipe)，它的文件版本比当前支持的 Debian 软件包要好得多。

* * *

### 找到正确答案的步骤

我认为看`/usr/bin/lesspipe`是接近正确答案。但是，它似乎确实暗示您必须更新该脚本，并且每次更新相应的包时都会覆盖这样做。

但是，看看脚本，它告诉我们我们可以拥有自己的扩展。

首先，`$LESSOPEN`变量很重要。这就是定义`lesspipe`脚本位置的原因。它可以`/usr/bin`在 Ubuntu 下找到，它可能在不同的 Unix 系统上的其他地方。

所以我们首先要查看脚本的位置：

```
echo $LESSOPEN 
```

就我而言，我看到了这个：

```
| /usr/bin/lesspipe %s 
```

也就是说，通过管道输出`lesspipe`脚本。这应该是`lesspipe`刚刚创建的临时文件名。如果没有输出文件名，则输入文件直接由less显示。

现在，为了让我们扩展`lesspipe`脚本以支持新的二进制文件类型，请查看脚本并注意以下部分：

```
 if [ -x ~/.lessfilter ]; then
                    ~/.lessfilter "$1"
                    if [ $? -eq 0 ]; then
                            if [ $BASENAME = $LESSFILE ]; then
                                    if [ -s $TMPFILE ]; then
                                            echo $TMPFILE
                                    else
                                            rm -f $TMPFILE
                                    fi
                            fi
                            exit 0
                    fi
            fi 
```

这告诉我们可以在`~/.lessfilter`.

这是一个 shell 脚本，甚至是一个 ELF 二进制文件。任何可以执行的东西，真的，如果它产生了一些有效的输出，就可以用 0 退出。

请注意，代码走得更远，并`$TMPFILE`在该事件中回显。我不知道为什么会这样做，因为`$TMPFILE`通常是空的。我们在我们的脚本中所要做的（您可以在`lesspipe`脚本下面看到相同的内容）就是将我们想要的任何内容写入标准输出（文件描述符 1）并以 0 退出。其余的按预期工作，它使您的脚本非常简单（与`lesspipe`处理许多其他情况的脚本相比，例如`-`输入，您可以忽略这些情况）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-19T01:45:26.650

less 是开放的，如果你不喜欢现有的，就拿一个更新的。

# collision-detection - 如何测试两个移动的二维方向边界框的碰撞？

> ID：764656
> 
> 赞同：5
> 
> 时间：2009-04-19T01:53:31.233
> 
> 标签：collision-detection

OBB 具有位置（x，y）、速度（x，y）和方向（矩阵）。鉴于定期更新，OBB 必须相互碰撞，返回被认为成功的移动部分。

我查看了 GPWiki 上的多边形测试 - [http://gpwiki.org/index.php/Polygon_Collision](http://gpwiki.org/index.php/Polygon_Collision) - 但它没有考虑移动对象或完全在 OBB 内的对象。

Real Time Collision Detection 一书在第 4 章：包围体中介绍了 3D OBB，但在 3 维中进行测试的方法明显比在 2D 中更复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T03:27:22.927

为了测试 2 个定向边界框之间的碰撞检测，我将使用分离轴定理 ( [SAT](http://www.metanetsoftware.com/technique/tutorialA.html) )。事实上，SAT 可用于任意 2 个凸形之间的碰撞检测。这种技术理解起来并不太复杂，并且具有合理的性能。该定理可以很容易地扩展到 3D。

编辑：

该算法试图确定是否可以在两个对象之间拟合一个平面。如果存在这样的平面，则对象是分离的，并且不能相交。

要确定对象是否分离，只需将对象投影到平面的[法](http://en.wikipedia.org/wiki/Surface_normal)线上，然后比较间隔并查看它们是否重叠。

因此，显然有无数个平面可以容纳在两个分离的物体之间。但事实证明，您只需测试少数几架飞机。

可以看出，对于盒子来说，要测试的分离平面是法线等于两个盒子轴线的平面。所以对于 2 个盒子，你总共只需要测试 4 个分离平面。在这 4 个平面中，一旦你找到了一个分隔盒子的分离平面，那么你就知道盒子不能相交，并且你返回一个无碰撞标志。

如果这4个平面不能分开盒子，那么盒子一定是相交的，你就会发生碰撞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T03:46:31.693

另一个建议（包括遏制，我认为更便宜）：

检查 #1 的 4 个顶点是否在 #2 内，然后检查 #2 的 4 个顶点是否在 #1 内。我建议这样做：

假设您要检查的#1 的顶点是 v，而#2 的 4 个顶点是 v1 ... v4。*按 #2 的方向反向旋转*所有 5 个顶点。（要通过方向矩阵 M 对向量 u 进行反向旋转，将 u 乘以 M 转置：M^T u ，假设在您的约定中，方向通过左乘法起作用。）生成的第二个框，称为 #2'，现在是轴对齐的 - 您可以立即检查 v' 是否包含在其中。

如果您在#2 内发现任何#1-顶点 - 停止，则您有交叉点。否则 - 继续。

一些优化立即浮现在脑海中（也许您可以在每个框中存储未旋转的顶点副本？如果大小是固定的，也许您可​​以比较它们以立即消除其中一个可能的包含，并保存 3 个潜在的测试？）但除非你将它应用在数以万计的盒子对上，这个测试应该足够便宜。

关于运动，您可以随心所欲地深入 - 查找“连续碰撞”，然后自己看看。（我特别记得 Stephane Redon 的一些好作品）。我全心全意地相信，没有任何游戏能做到这些花哨的东西：如果你确实移动得非常快，你可以细分你的时间步，并对每个位置/方向子迭代执行碰撞检查。

（编辑：）这里有另一个讨论[，](https://stackoverflow.com/questions/641219/how-can-i-perform-collision-detection-on-rotated-rectangles)有很好的参考资料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T02:47:33.147

如果您有两个具有任意方向的边界框（即矩形）（我认为这意味着一些“旋转”），那么我将执行以下操作：

*   从初始位置开始（我假设边界框不相交），根据每个框的速度向前平移每个框（但是随着时间的推移您正在应用运动）。
*   找到每个平移边界框的角坐标。这 4 个坐标定义了构成边界框边缘的 4 条线段的端点。
*   对于边界框 #1，测试其每个线段与边界框 #2 的 4 个线段之间的交点。例如，您可以使用标准方程来计算两条线的交点，如此处[所述](http://local.wasp.uwa.edu.au/~pbourke/geometry/lineline2d/)。
*   如果存在交叉点，请使用交叉点的坐标和您应用的已知平移来计算成功移动的分数。
*   对每个更新重复上述步骤。

**编辑：**粗略的伪代码（包含评论中讨论的内容）如下所示：

```
...test for intersections between the OBB edges...
if any intersections are found{
    ...run code for when OBBs are partially overlapping...
}else{
    P = line segment whose endpoints are the OBB centers;
    ...test for intersections between P and OBB edges...
    if P intersects edges of both OBBs{
        ...run code for when OBBs are not touching...
    }else{
        ...run code for when one OBB is completely inside the other...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T08:00:26.763

您可能应该实现四叉树（参见[wikipedia](http://en.wikipedia.org/wiki/Quadtree)）来跟踪平面上的所有对象。不幸的是，我从未实现过碰撞检测，但似乎其他[人](http://www.youtube.com/watch?v=Zbk8R25xbB4)已经能够使用四叉树创建与您类似的场景。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-19T02:01:21.870

你说 2d，但也提到 3d 更复杂。对于碰撞检测，您基本上想测试两个形状是否相互交叉。在 2D 中，带有边界框，这些是[矩形](http://tekpool.wordpress.com/2006/10/12/rectangle-intersection-find-the-intersecting-rectangle/)。您需要使用一种算法来查看矩形是否相交，并检查一个矩形是否完全包含在另一个矩形中（简单算法的 3 次测试）。对于 3d，这些是立方体。一样。查看这个对象-对象交叉[矩阵并找到你想要的。](http://www.realtimerendering.com/intersections.html)检查对象本身的交集，并且枯萎的一个完全包含在另一个中。

此过程不仅可以扩展到边界框，还可以扩展到边界球体或凸边界壳、多边形或完整 3d 对象中的实际对象本身。最终结果是，随着物体在空间和时间中前进，它们的表面是否发生碰撞或它们是否在彼此内部。如果您的粒度太粗，并且在您建模的情况下，它们应该发生碰撞，但它们最终会相互移动，您应该进行额外的光线边界相交测试，以查看是否有某个中心加权点在对象与另一个对象的边界相交。

# javascript - 如何获取网页中元素的溢出宽度

> ID：764658
> 
> 赞同：33
> 
> 时间：2009-04-19T01:55:31.150
> 
> 标签：javascript, html, css, dom

我有两个像这样的div

```
<div id="parent" style="width:100px:overflow:hidden;">
    <div id="child"> 
      tooooooooooooooooooooo much content to fit in parent
    </div>
</div> 
```

我正在动态更新孩子的内容并使用 jQuery 滚动它。我希望能够找到孩子的宽度，以便我知道何时停止滚动。问题在于，一旦出现溢出内容，孩子的实际宽度甚至比屏幕还要宽（当前测试内容似乎约为 2500 像素）。元素的边框（如果设置了它）没有延伸到内容的实际宽度，则文本会溢出可见边框。

使用 jQuerys `$('#child').width`，`clientWidth`, `scrollWidth`（感谢 bobince）和`offsetWidth`属性都最大为 1024 像素（这是我的显示器的宽度）。有谁知道有什么方法可以找出元素内容包括溢出的宽度？如果有帮助，我正在构建的应用程序将在信息亭类型的环境中运行，因此仅 Firefox（甚至是夜间版本）解决方案就可以了。

更新：`scrollWidth`关于父作品，我应该更仔细地阅读，再次感谢 bobince。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-04-19T03:02:34.390

```
document.getElementById('parent').scrollWidth 
```

[scrollWidth](http://msdn.microsoft.com/en-us/library/ms534619(VS.85).aspx)是一个 IE 扩展，在历史上它的支持不如 offsetWidth 好。然而，现在所有现代桌面浏览器都包含它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-26T15:51:20.713

使用 JQuery，您可以执行以下操作：

```
$('#parent')[0].scrollWidth 
```

# asp.net - How to make sure my href's take prescedence over any other layers including flash?

> ID：764676
> 
> 赞同：0
> 
> 时间：2009-04-19T02:09:05.627
> 
> 标签：asp.net, javascript, css, flash

I have built a media gallery for my site. The media gallery contains media items from sites such as YouTube and Vimeo.

In the system that I'm using, no thumnail is generated for media items that I link to. So what I've done is just display a small "view" of the media in my media gallery. This means I'm just showing a small version of the embedded video in the grouped list area. This effectively gives me a thumbnail view of the media item.

I am then wrapping that embedded video in a the hope is that the link will take them to the 'view' page for that media item on my site. If I wrap a YouTube embedded video in a - it works great, the link takes the visitor to my media item page. However, if I wrap a Vimeo video in an the link is ignored and when clicked the Vimdeo video starts playing in a really small thumnbail view.

Ahy way for me to supress the Vimeo embedded area from handling clicks? Is there CSS that will make put my link on top of the Vimeo video?

Any suggestions greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T09:59:50.563

Try something like this. With `z-index` working as it does in order to get the a to cover the video something, the span needs to not wrap the video. You might need to put in some `height` and `width` conditions on `span` too.

```
<div class="vid_container">
    <a href="#">
        <span></span>
        < your video tag >
    </a>
</div> 
```

```
.vid_container a {
    position:relative;
}
.vid_container a span {
    display:block; 
    position:absolute;
    top:0;
    left:0;
    z-index:200;
}
.vid_container a videotag {
    display:block; 
    position:
    absolute;
    top:0;
    left:0;
    z-index:1;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-19T07:18:28.753

"3d" positioning in web layouts is ... complex, to say the least. The part everyone knows about is the z-index style. But what a lot of people don't realize is, the z-index difference between two elements only comes in to play if they're at the same depth in the DOM tree; if they're not, the one that is higher in the tree (ie. closest to being directly under the BODY) will always be "on top", regardless of the z-index.

So, in theory, if you put your A tag higher in the DOM, it should take precedence over the video. Except, maybe not in IE. In IE, certain elements (I know for sure SELECTs do this, but video probably does too) always appear "above" ... well, everything else. The common workaround for this is to use another one of those elements (usually an IFRAME) as the background for your content. Alternatively there are libraries (such as the bgiframe plugin for jQuery) that will handle this sort of thing for you.

If none of that works, you also might just want to try hooking up an "onclick" event handler to the A (or maybe even the video itself), and then in that handler do "e.stopPropagation()" to prevent the click from "bubbling up". You could also do "e.preventDefault()" to prevent the default action of the movie starting, but you'd have to do that on the movie (or if you do it on the A, you'll need to make the handler do "window.location = *link*", since it will prevent the default action of the A, ie. going to the link).

Hope one of those ideas works for you.

# wpf - 不，装饰器不会在 WPF 中自动获取其 AdornedElement 的 DataContext

> ID：764682
> 
> 赞同：4
> 
> 时间：2009-04-19T02:15:10.493
> 
> 标签：wpf, datacontext, adorner, adornerlayer

原始问题：`Adorner`WPF 中是否自动继承其“AdornedElement”的“DataContext”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T02:44:06.773

这证明（或可以证明）它没有：

```
public class SomeObject
{ }

public class SomeAdorner : Adorner
{
    public SomeAdorner(UIElement adornedElement) : base(adornedElement)
    {
        // comment out the following statement to see that, by default, an adorner does not
        // take on the data context of its adorned ui element
        SetBinding(
            DataContextProperty,
            new Binding(DataContextProperty.Name)
            {
                Mode = BindingMode.OneWay,
                Source = adornedElement
            }
        );
    }

    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        base.OnPropertyChanged(e);

        if ((e.Property.Name.Equals(DataContextProperty.Name)) && (e.NewValue is SomeObject))
        { MessageBox.Show("DataContext changed!"); }
    }
}

public partial class Window1 : Window
{
    public Window1()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(Window1_Loaded);
    }

    void Window1_Loaded(object sender, RoutedEventArgs e)
    {
        AdornerLayer.GetAdornerLayer(WindowContentWithElementName)
            .Add(new SomeAdorner(WindowContentWithElementName));

        WindowContentWithElementName.DataContext = new SomeObject();
    }
} 
```

# oop - 从另一个对象分配新对象值

> ID：764691
> 
> 赞同：0
> 
> 时间：2009-04-19T02:22:42.223
> 
> 标签：oop

我有一个 ObjectA，其属性值将始终分配给另一个对象的 (ObjectB) 属性。我一直在做的是让服务类实例化接收 ObjectB，然后将值分配给来自 ObjectA 的新对象。我是否应该通过 setter 参数或其他方法将整个 objectA 直接发送到 Object B？如果有的话，这里的最佳做法是什么？

编辑：在服务类中：

```
public AssignValues (objectA)
{
ObjectB objectB= new ObjectB();
objectB.prop1= ObjectA.prop1;
objectB.prop2= ObjectA.prop2;
} 
```

或者

```
public AssignValues(objectA)
{
ObjectB objectB= new ObjectB();
objectB.SetValuesFromObjectA= objectA;
} 
```

或者

```
public AssignValues(objectA)
{
ObjectB objectB= new ObjectB();
objectB.SetValuesFromObjectA(objectA);
} 
```

或者

```
public AssignValue(objectA)
{
ObjectB objectB= new ObjectB(objectA);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T03:25:55.050

很难回答，因为我们不知道这些类是什么。你可以说，“哦，我总是将 objectA 传递给 objectB 的构造函数”并以......

```
public Chicken( Gorilla g )
{
  this.IsAlive = g.IsAlive;
} 
```

......或者一些同样荒谬的东西。有很多方法可以做你想做的事，“正确方法”的基本问题完全取决于你在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T03:48:21.410

听起来好像有一个 Object b 构造函数，它接受一个参数，一个 Object A：

```
 // ctor:
 ObjectB( const ObjectA& a ) {
   prop1= a.prop1;
   prop2= a.prop2;
 }

 // or ctor:
 ObjectB( const ObjectA& a ) : prop1(a.prop1), prop2(a.prop2) {
 }

 . . . 
 // use
 ObjectB b(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T04:49:13.337

如果对象属于同一类型，我可能更喜欢使用`Clone()`（浅拷贝）方法。

如果对象属于不同类型，我可能会编写一个看起来像您的第一个案例的方法来保持两种类型分开。或者，我可以将其作为采用 objectA 和 objectB 的扩展方法来执行（如果其中一个是结构，您可能必须通过 ref 或返回值来执行此操作）。正如我所说，在这种情况下我不想使用构造函数或类/实例方法的主要原因是，您现在将这两种类型绑定在一起，而它们可能不一定需要真正了解彼此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T04:05:53.383

您是否考虑过使用 AutoFac 进行依赖注入？它允许您在实际制作任何东西之前声明关系是什么。然后很好地制作、使用和清理。

# dataset - 市政数据集？

> ID：764693
> 
> 赞同：2
> 
> 时间：2009-04-19T02:23:36.947
> 
> 标签：dataset

我正在寻找一些数据来创建查找表。具体来说，美国每个州的所有县，以及每个县的所有城市。

我在哪里可以找到这样的市政数据集？

编辑：我正在查看 census.gov，这看起来可能是票。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T02:29:26.467

[http://www.census.gov/statab/www/ccdb.html](http://www.census.gov/statab/www/ccdb.html)

查看“Selected features...”部分，其中有大量 Excel 和 PDF 下载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T02:30:36.027

我过去曾为这样的数据库使用过[邮政编码下载](http://www.zipcodedownload.com/)。我推荐商业版本，因为您正在寻找城市和县。

# java - 创建类似于 WCF 的 JSON/XML REST Web 服务的最佳 Java 方式是什么？

> ID：764707
> 
> 赞同：6
> 
> 时间：2009-04-19T02:31:54.493
> 
> 标签：java, spring, tomcat, jersey, xstream

我正在寻找一种可供 Java 开发人员实现将通过 JSON 或 XML 进行通信的 REST 服务的最佳方式。我正在寻找可生产的产品。

我知道 Spring 3.0 即将到来，但还没有完成——运气不好。

泽西岛是那个吗？

我的应用程序由 Tomcat 托管，使用 Spring、Jettison 和 XStream。

我想使用一个开源包，它可以让我拥有与 WCF.NET 类似的开发体验，我可以在其中声明 Url 模板、映射 GET/POST 并以 XML 或 JSON 格式获取输出。接受的有效负载也应该是 XML 或 JSON。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T18:05:29.663

Jersey、RESTEasy 和 Restlet 都声称可以满足您的要求。我只尝试过 Restlet，我觉得它很讨厌。

Spring 3 尚未发布最终版本，但 M2 构建似乎相当稳固，并且那里有 REST 的东西。如果我正在构建一个新的 REST webapp，我可能会冒险使用 M2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-12T14:54:55.707

我尝试了 Restlet、RestEasy、Jersey、CXF、Spring。以下是我的反馈：

1.  Restlet：有一套自己的注解有点讨厌。而且也有点混乱。不过也不能怪太多，因为他们甚至在 JAX-RS 出现之前就已经开始实施了。

2.  RestEasy / Jersey / CXF ：就像它的名字一样简单。简单直接地开始工作。这 3 个框架的好处是，由于它们与 JAX-RS 兼容，因此如果它的性能更好或更适合您的需求，将来任何时候都可以快速回退到其他 JAX-RS 兼容框架

3.  Spring：Spring 3 已经开始支持 REST API。但是请不要说它不符合 JAX-RS，原因与 Restlet 一样。

    所以我只会从 RestEasy / Jersey / CXF 中选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T18:36:59.300

是的，泽西岛相当不错，根据您的描述，它完全符合您的要求。

我不会等待 Spring-WS-thing——Jersey 很好，而且我不知道 Spring 替代品除了“Spring 品牌”之外还有什么好处。对我来说，JAX-RS（球衣实现的）是选择和使用实现开放 API 的最佳组件的一个很好的例子；Jersey 可以在（除其他外）任何 servlet 容器上运行，可以使用最好的 XML/JSON/etc 解析器，使用可插入验证（bean 验证 api）等等。其他 JAX-RS 实现也应该如此（如 Resteasy）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-14T17:27:35.800

我已经使用并提交了一些 CXF 补丁。它支持 JAX-RS 并且完全可以使用 spring 进行配置。这里有一个很好的教程：

[http://cwiki.apache.org/CXF20DOC/jax-rs.html](http://cwiki.apache.org/CXF20DOC/jax-rs.html)

CXF 是一个 apache 项目，并且由于 JAX-RS 是一个标准，如果您有任何困难，您应该毫无问题地摆脱它。

希望这可以帮助。

# python - SQLite 性能基准测试——为什么 :memory: 这么慢……只有磁盘的 1.5 倍？

> ID：764710
> 
> 赞同：53
> 
> 时间：2009-04-19T02:33:43.147
> 
> 标签：python, database, sqlite, memory, benchmarking

## 为什么 :memory: 在 sqlite 中这么慢？

我一直在尝试查看使用内存中的 sqlite 与基于磁盘的 sqlite 是否有任何性能改进。基本上我想交换启动时间和内存以获得在应用程序过程中*不会命中磁盘的非常快速的查询。*

然而，下面的基准测试只给了我 1.5 倍的速度提升。在这里，我生成 1M 行随机数据并将其加载到同一个表的基于磁盘和内存的版本中。然后我在两个数据库上运行随机查询，返回大小约为 300k 的集合。我预计基于内存的版本会快得多，但如前所述，我只能获得 1.5 倍的加速。

我尝试了几种其他大小的数据库和查询集；:memory: 的优势*似乎*随着数据库中行数的增加而增加。我不确定为什么优势如此之小，尽管我有一些假设：

*   使用的表不够大（按行），无法制作：memory：一个巨大的赢家
*   更多的连接/表将使 :memory: 优势更加明显
*   在连接或操作系统级别进行了某种缓存，以便可以以某种方式访问​​先前的结果，从而破坏了基准
*   有某种我没有看到的隐藏磁盘访问正在进行（我还没有尝试过 lsof，但我确实关闭了 PRAGMAs 进行日志记录）

我在这里做错了吗？关于为什么 :memory: 没有产生几乎即时查找的任何想法？这是基准：

```
==> sqlite_memory_vs_disk_benchmark.py <==

#!/usr/bin/env python
"""Attempt to see whether :memory: offers significant performance benefits.

"""
import os
import time
import sqlite3
import numpy as np

def load_mat(conn,mat):
    c = conn.cursor()

    #Try to avoid hitting disk, trading safety for speed.
    #http://stackoverflow.com/questions/304393
    c.execute('PRAGMA temp_store=MEMORY;')
    c.execute('PRAGMA journal_mode=MEMORY;')

    # Make a demo table
    c.execute('create table if not exists demo (id1 int, id2 int, val real);')
    c.execute('create index id1_index on demo (id1);')
    c.execute('create index id2_index on demo (id2);')
    for row in mat:
        c.execute('insert into demo values(?,?,?);', (row[0],row[1],row[2]))
    conn.commit()

def querytime(conn,query):
    start = time.time()
    foo = conn.execute(query).fetchall()
    diff = time.time() - start
    return diff

#1) Build some fake data with 3 columns: int, int, float
nn   = 1000000 #numrows
cmax = 700    #num uniques in 1st col
gmax = 5000   #num uniques in 2nd col

mat = np.zeros((nn,3),dtype='object')
mat[:,0] = np.random.randint(0,cmax,nn)
mat[:,1] = np.random.randint(0,gmax,nn)
mat[:,2] = np.random.uniform(0,1,nn)

#2) Load it into both dbs & build indices
try: os.unlink('foo.sqlite')
except OSError: pass

conn_mem = sqlite3.connect(":memory:")
conn_disk = sqlite3.connect('foo.sqlite')
load_mat(conn_mem,mat)
load_mat(conn_disk,mat)
del mat

#3) Execute a series of random queries and see how long it takes each of these
numqs = 10
numqrows = 300000 #max number of ids of each kind
results = np.zeros((numqs,3))
for qq in range(numqs):
    qsize = np.random.randint(1,numqrows,1)
    id1a = np.sort(np.random.permutation(np.arange(cmax))[0:qsize]) #ensure uniqueness of ids queried
    id2a = np.sort(np.random.permutation(np.arange(gmax))[0:qsize])
    id1s = ','.join([str(xx) for xx in id1a])
    id2s = ','.join([str(xx) for xx in id2a])
    query = 'select * from demo where id1 in (%s) AND id2 in (%s);' % (id1s,id2s)

    results[qq,0] = round(querytime(conn_disk,query),4)
    results[qq,1] = round(querytime(conn_mem,query),4)
    results[qq,2] = int(qsize)

#4) Now look at the results
print "  disk | memory | qsize"
print "-----------------------"
for row in results:
    print "%.4f | %.4f | %d" % (row[0],row[1],row[2]) 
```

这是结果。请注意，对于相当广泛的查询大小，磁盘占用的内存大约是内存的 1.5 倍。

```
[ramanujan:~]$python -OO sqlite_memory_vs_disk_clean.py
  disk | memory | qsize
-----------------------
9.0332 | 6.8100 | 12630
9.0905 | 6.6953 | 5894
9.0078 | 6.8384 | 17798
9.1179 | 6.7673 | 60850
9.0629 | 6.8355 | 94854
8.9688 | 6.8093 | 17940
9.0785 | 6.6993 | 58003
9.0309 | 6.8257 | 85663
9.1423 | 6.7411 | 66047
9.1814 | 6.9794 | 11345 
```

相对于磁盘，RAM 不应该几乎是即时的吗？这里出了什么问题？

## 编辑

这里有一些很好的建议。

我想对我来说主要的要点是**可能没有办法使 :memory:*绝对更快*，但是有一种方法可以使磁盘访问*相对较慢。***

换句话说，基准测试充分测量了内存的实际性能，但没有测量磁盘的实际性能（例如，因为 cache_size pragma 太大或者因为我没有进行写入）。当我有机会时，我会弄乱这些参数并发布我的发现。

也就是说，如果有人认为我可以从内存数据库中挤出一些更快的速度（除了提高 cache_size 和 default_cache_size，我会这样做），我全神贯注......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-04-19T02:57:03.670

这与 SQLite 具有页面缓存这一事实有关。根据[文档](http://www.sqlite.org/compile.html)，默认页面缓存为 2000 个 1K 页面或大约 2Mb。由于这大约是您数据的 75% 到 90%，因此这两个数字非常相似也就不足为奇了。我的猜测是，除了 SQLite 页面缓存之外，其余数据仍在 OS 磁盘缓存中。如果您让 SQLite 刷新页面缓存（和磁盘缓存），您会看到一些非常显着的差异。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-06-29T00:45:03.537

我对你的问题是，你想以什么为基准？

如前所述，SQLite 的 :memory: DB 与基于磁盘的 DB 相同，即分页，唯一的区别是页面永远不会写入磁盘。因此，两者之间的唯一区别是磁盘写入 :memory: 不需要这样做（当必须从缓存中卸载磁盘页面时，它也不需要进行任何磁盘读取）。

但是从缓存中读取/写入可能只代表查询处理时间的一小部分，具体取决于查询。您的查询有一个 where 子句，其中包含两个大组 id，所选行必须是其中的成员，这很昂贵。

正如 Cary Millsap 在他关于优化 Oracle 的博客中演示的那样（这里有一篇代表性文章：[http](http://carymillsap.blogspot.com/2009/06/profiling-with-my-boy.html) ://carymillsap.blogspot.com/2009/06/profiling-with-my-boy.html ），您需要了解查询的哪些部分处理需要时间。假设集合成员测试占查询时间的 90%，基于磁盘的 IO 占 10%，转到:memory: 只会节省这 10%。这是一个不太可能具有代表性的极端示例，但我希望它说明您的特定查询使结果倾斜。使用更简单的查询，查询处理的 IO 部分会增加，从而带来 :memory: 的好处。

最后一点，我们已经对 SQLite 的虚拟表进行了实验，您负责实际存储，并且通过使用 C++ 容器（其类型不同于 SQLite 存储单元格值的方式），我们可以看到处理时间的显着改进结束：记忆：，但这有点话题;）--DD

PS：我没有足够的业力来评论这个线程最受欢迎的帖子，所以我在这里评论:) 说最近的 SQLite 版本在 Windows 上默认不使用 1KB 页面：[http://www。 sqlite.org/changes.html#version_3_6_12](http://www.sqlite.org/changes.html#version_3_6_12)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-19T09:38:08.683

您正在执行 SELECT，您正在使用内存缓存。尝试将 SELECT 与 UPDATE 交错。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-26T09:07:26.687

SQLite 中的内存数据库实际上是从不接触磁盘的页面缓存。所以你应该忘记在 SQLite 中使用 memory db 来进行性能调整

可以关闭日志、关闭同步模式、设置大页面缓存，您在大多数操作上的性能几乎相同，但会丢失持久性。

从您的代码中可以清楚地看出，您**应该重用命令**并仅绑定参数，因为这会占用您**90% 以上**的测试性能。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-01T20:43:36.887

谢谢你的代码。我已经在 2 x XEON 2690 和 192GB RAM 和 RAID 5 中的 4 个 SCSI 15k 硬盘驱动器上进行了测试，结果是：

```
 disk | memory | qsize
-----------------------
6.3590 | 2.3280 | 15713
6.6250 | 2.3690 | 8914
6.0040 | 2.3260 | 225168
6.0210 | 2.4080 | 132388
6.1400 | 2.4050 | 264038 
```

内存的速度增加是显着的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-19T02:40:29.153

难道是 sqlite3 实际上并没有将数据从缓存写入磁盘？这可以解释为什么这些数字相似。

由于可用内存不足，您的操作系统也可能正在分页？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-19T02:40:59.463

我注意到您专注于涉及要返回的相对较大数据集的查询。我想知道使用较小的数据集会产生什么影响？多次返回单行可能需要磁盘进行多次搜索——内存的随机访问时间可能会快得多。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-10-21T15:04:28.600

numpy 数组比 dict 和 tuple 以及其他对象序列慢，直到您处理序列中的 500 万个或更多对象。您可以通过迭代大量数据并使用生成器来避免创建和重新创建临时大对象，从而显着提高处理大量数据的速度。

numpy 已成为您的限制因素，因为它旨在提供线性性能。它不是数据量小甚至大量的明星。但是numpy的性能并没有随着数据集的增长而变成曲线。它仍然是一条直线。

此外 SQLite 只是一个非常快速的数据库。甚至比大多数服务器数据库还要快。这就引出了一个问题，当使用 SQL 的轻量级超快速容错数据库已经出现并在从浏览器到手机的各种应用中进行了多年测试时，为什么会有人使用 NOSQL 数据库。

# open-source - Licensing software as open source but charging for compiled executables?

> ID：764714
> 
> 赞同：3
> 
> 时间：2009-04-19T02:35:47.997
> 
> 标签：open-source, licensing

As I understand it software being open source does not prevent you from selling it (does this depend on the type of license?) but is this a good idea?

For my pet project the target audience is for the most part non-programmers who wouldn't know how to compile the source anyway, but I still want to keep it open mostly for possible future employers to view my "portfolio" as well as to get critique from others, or just for others to learn from.

I don't expect to quit my day job from it or anything, mostly just to defray minor costs like web hosting, domain and other misc stuff, and hopefully some pocket change.

Providing support isn't really an option, it's and end-user app and one of the primary objectives is to make it as easy to use as possible.

The closest license that sounds like it'd be friendly to this is the [Ms-RSL](http://www.microsoft.com/resources/sharedsource/referencesourcelicense.mspx) but Google Code which I'm currently using doesn't support that license, and a quick search looks like Sourceforge doesn't either (I could be wrong). It's currently GPL, but I just have a few classes stubbed out right now, so changing isn't an issue.

Are there any examples of other people doing this (success or failure)? Am I better off just asking for donations? Should I just not license it as open source (is it automatically closed source if I don't have any license but just distribute it upon request?) Any other options I haven't thought of?

Edit: What I'm more interested aside from the legal aspect is whether the practice of straight selling open source software is generally frowned upon, i.e. will I piss off customers that bought it and later found out it was open source. Should I announce it on the site or keep a one-way link from source-code to retail site but not the other way around? Announce it but not make it prominent?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T02:47:08.873

Red Hat Enterprise Linux is probably a good example of something like this: they are open-source and you can download every source package from their FTP site; however, they charge for their own build.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T02:57:56.570

Nobody will care if you try to sell your own code, even if it is opensource. The only time people get riled up is when you try to sell **somebody else's** opensourced code, and then only if it's in violation of the license (in letter or in spirit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T02:42:43.033

If you share it without a licence, normal copyright laws applies. And I don't see anything wrong with charging for open source software. Most open source licences (like GPL) just requires that you supply the sourcecode to the people that got the binary, and that they can do anything they want with that sourcecode. Including selling their own compiled binaries.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T03:49:34.330

Free software isn't about “not charging a fee”. [Selling free software](http://www.gnu.org/philosophy/selling.html) is an excellent way to fund more work on free software.

What you probably *can't* do is treat it like loaves of bread; nothing strictly prevents you from trying, but your customers have their own perfectly functional loaf-duplication machines, so they're not likely to pay you if that's *all* you're doing for them.

Your consideration should be, then, **how to add value** on an ongoing basis, without making the software non-free.

One proven method is to become the most-reputable and most-knowledgeable vendor for the software. Another is to charge a fee for customisations (and, let's face it, *all* users want customisations, it's just a matter of how much they want them) that then get released into a future version is another. There are lots of ways to sell free software.

You're asking about business, though: be innovative! Work within the boundaries (don't make the software any less free for any of its recipients) and come up with something new.

# eclipse - Eclipse 中的 CLASSPATH“引导条目”和“用户条目”有什么区别？

> ID：764725
> 
> 赞同：15
> 
> 时间：2009-04-19T02:44:21.687
> 
> 标签：eclipse, twitter-bootstrap, jar, runtime, classpath

Eclipse 有一个带有 Classpath 选项卡的 Run Configurations 屏幕。

我在此选项卡的“用户条目”部分中列出了一些 jar，但直到我将这些 jar 文件复制到“引导条目”部分中，我的项目才运行。在这两个部分中列出了 jar 之后，该项目成功运行。

为什么？

这两种不同类别的 Classpath 设置有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-20T16:39:24.980

不同之处在于它们在类加载器中的规范顺序。

启动将执行应用程序的 VM 时，引导类路径由顶级类加载器管理。（从命令行使用 -Xbootclasspath 指定）

用户类路径是由应用程序类加载器管理的条目。

引导类路径中的任何条目都优先于用户类路径。

这些是基于包含要启动的应用程序的项目进行初始化的，但是您可以在启动器配置中修改它们，以便您想要在 Eclipse 中启动的应用程序。

至于为什么它不起作用：罐子是什么？它们是需要从运行时类加载的东西吗（比如 xml 解析器替换库？）

有关详细信息，请参阅[http://java.sun.com/j2se/1.4.2/docs/tooldocs/findingclasses.html 。](http://java.sun.com/j2se/1.4.2/docs/tooldocs/findingclasses.html)

——斯科特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T03:43:30.423

你能以两种方式生成jar文件吗？提取它们并比较它们。我非常好奇当您添加条目时 jar 文件是否发生了变化。有关[类加载](http://www.math.vu.nl/~eliens/documents/java/jdk1.2-docs/docs/tooldocs/solaris/software.html)的一些信息可能会提供一些见解。jar 文件的[规范](http://java.sun.com/j2se/1.3/docs/guide/jar/jar.html)并没有真正提供任何提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T03:13:57.357

其中一个用于检查编辑器中的源/类路径，另一个用于运行时环境。

我认为。

什么鬼，反正我今天已经满分了。

# vim - 在 VIM 中访问多个文件

> ID：764726
> 
> 赞同：12
> 
> 时间：2009-04-19T02:44:33.763
> 
> 标签：vim, file

“Unix in a Nutshell”一书在 572-573 页讨论了访问多个文件。似乎有一些非常有用的命令，例如 ":e"、":e #"、":e new_file"、":n files"、":args"、":prev" 和 ":n!"。这些命令让我感到困惑：

> ":n 编辑文件列表中的下一个文件。"
> 
> ":args 显示要编辑的文件列表。"
> 
> ":prev 编辑文件列表中的前一个文件。"

当我执行 ":args" 时，我看不到任何真实的列表。角落里只有一小段文字。我想查看我用 ":e" 访问的所有文件，即缓冲区中的文件列表。

当我执行命令“:n files”时，我在哪里可以看到列表？命令 ":prev" 和 ":n" 应该做什么？我收到错误消息：

> 只有一个文件可以编辑。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-19T03:20:13.693

我没有读过提到的书，但我会尝试解释 vim 如何处理文件。

Vim 有缓冲区。你打开每个文件：

`:e name_of_the_file.txt`（在缓冲区中加载文件，即“打开文件”）

你也可以：

`:e *.txt`

执行此操作时有用的选项是

`:set laststatus=2`（始终显示状态行）

`:set wildmenu`（以方便打开文件）

如果你有带有 netrw 插件的标准 vim，你可以：

`:e .`（对于 vim 的文件管理器之一，可以这么说）

要管理缓冲区：

`:ls`将为您提供当前打开的缓冲区（文件）的列表

`:bnext`, and `:bprevious`(or `:bn`and `:bp`) 使您能够循环浏览缓冲区

`:bd`关闭缓冲区/文件（缓冲区完成）

其他缓冲区类型用于其他目的（拉/粘贴，临时，vim 的内部，...等）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-19T04:05:27.607

除了 Jonathan Leffler 所说的，如果你不从命令行调用多个文件的 Vim，你可以在 Vim 打开后通过以下方式设置 Vim 的参数列表：

```
:args *.c 
```

请注意，参数列表与您从中获得的打开缓冲区列表不同`:ls`。即使在 Vim 中关闭所有打开的缓冲区，参数列表也保持不变。 `:n`并且`:prev`可能会在 Vim 中打开一个全新的缓冲区（如果该文件的缓冲区尚未打开），或者可能会将您带到现有的缓冲区。

同样，您可以在 Vim 中打开多个缓冲区而不影响参数列表（或者即使 arg 列表为空）。 `:e`打开一个新缓冲区，但不一定影响参数列表。打开缓冲区的列表和参数列表是独立的。如果您想遍历打开的缓冲区列表而不是遍历参数列表，请使用`:bn`and`:bp`和friends。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-19T02:54:32.613

为了使这些命令有意义，您可以：

```
vim *.c 
```

例如，在有 20 个 C 文件的目录中。对于单个文件，没有下一个或上一个或重要的文件列表。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-19T04:02:46.990

:n :p :ar :rew :last 对命令行参数列表进行操作。

例如

```
> touch aaa.txt bbb.txt ccc.txt
> gvim *.txt 
```

vim 在 aaa.txt 中打开

```
:ar gives a status line

[aaa.txt] bbb.txt ccc.txt

:n moves to bbb.txt

:ar gives the status line

aaa.txt [bbb.txt] ccc.txt

:rew rewinds us back to the start of the command line arg list to aaa.txt

:last sends us to ccc.txt

:e ddd.txt edits a new file ddd.txt

:ar gives the status line

aaa.txt bbb.txt [ccc.txt] 
```

所以命令集只对初始命令行参数列表进行操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-11-04T19:04:07.287

澄清一下，Vim 有参数列表、缓冲区列表、窗口和标签页。参数列表是你调用 vim 的文件列表（例如 vim file1 file2）；:n 和 :p 命令适用于此。缓冲区列表是您正在编辑的文件的内存副本列表，就像 emacs 一样。请注意，在开始时加载的所有文件（在参数列表中）也在缓冲区列表中。尝试 :help buffer-list 以获取有关两者的更多信息。

窗口是缓冲区的视口。将窗户想象成“桌子”，您可以在上面放置缓冲区来处理它们。窗口可以是空的，或者正在显示也可以在其他窗口中显示的缓冲区，例如，您可以使用这些缓冲区同时查看同一缓冲区的两个不同区域。尝试 :help windows 以获取更多信息。

选项卡是窗口的集合。例如，您可以有一个带有一个窗口的选项卡，而另一个带有两个窗口的选项卡垂直拆分。尝试 :help 标签页以获取更多信息。

# iphone - 如何在 iPhone 应用程序中获取对 UITabBar 的引用

> ID：764733
> 
> 赞同：0
> 
> 时间：2009-04-19T02:52:51.620
> 
> 标签：iphone, user-interface, uitabbarcontroller

UIActionSheet 有一个 showFromTabBar: 方法

```
- (void)showFromTabBar:(UITabBar *)view 
```

但是如何获得对 UITabBar 的引用呢？

我目前正在使用

```
UITabBar *tabBar = [self.tabBarController.view.subviews objectAtIndex:0]; 
```

我还看到有人遍历 tabBarController.view.subviews 并寻找 UITabBar 实例。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-07-28T22:22:44.897

您可以使用

```
UITabBar *tabBar = self.tabBarController.tabBar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T18:58:29.100

如果您使用的是 interface-builder ，则可以在类接口中定义类似这样的成员：

```
IBOutlet UITabBar* tabbar; 
```

并通过 interface-builder 将此插座连接到 UITabBar（在树视图模式下查看 xib 文档窗口时，UITabBar 应位于 tabBar 控制器内）。然后只需使用此标签栏成员在您的代码中引用它。

# open-source - 有使用 SANOS 操作系统内核的经验吗？

> ID：764735
> 
> 赞同：0
> 
> 时间：2009-04-19T02:53:03.117
> 
> 标签：open-source, linux-kernel, freebsd, kernel, kernel-module

[当我遇到SANOS](http://www.jbox.dk/sanos/index.htm)时，我正在浏览一个开源内核，这感觉像是值得作为开源保持活力的东西。为了使其达到现代标准，需要进行以下增强：

*   支持多个 CPU/内核
*   添加 IPv6（目前仅支持 IPv4）
*   能够运行 8192 个并发线程
*   能够支持 JDK 1.6 所需的附加仿真

所以，我有以下问题：

1.  这里有没有人想分享他们使用 sanos 的经验？
2.  什么是吸引其他愿意贡献时间以使其变得更好的人的最方便的方法？
3.  它在哪些方面比 BSD 和/或 Linux 中使用的内核更好？
4.  将 Ruby 移植到这个平台有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-29T16:22:13.497

我必须同意 Pax，但我会更进一步。如果您真的对构建 JAVA 操作系统感兴趣，为什么不将其作为新的 linux*发行*版在 Linux 内核之上进行。从内核开始，添加足够的用户级软件来启动和运行 Java，然后启动一个 java“shell”。通过这种方式，您可以获得您想要的 Java 的所有好处，而无需重新发明操作系统轮子的痛苦和痛苦。这正是我在 2001 年编写的嵌入式 Linux 书中使用 minicom 示例所做的。大部分示例可通过 Google 图书 ( [http://books.google.com/books?id=MFjhhiIMMHIC&printsec=frontcover](http://books.google.com/books?id=MFjhhiIMMHIC&printsec=frontcover) ) 获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T04:47:37.880

*   吸引他人的最便捷方式是使其成为更有用和更实用的操作系统，例如通过提到的四个增强功能。一旦其他人看到操作系统的优点，他们就会像您一样自己开发和增强它。
*   Sanos 大部分是 POSIX 兼容的，因此它能够运行大多数适用于 BSD、Linux 和其他 POSIX 兼容操作系统的程序。然而，Sanos 试图支持这些系统的最小子集，以适应其特定应用。因此，它适用于便携性和速度。然而，与 BSD 和 Linux 相比，它的安全性仍然相对未经测试。
*   将 Ruby MRI 移植到 Sanos 可能会有好处，应该相当容易。

启用 JDK 1.6 的最有效方法是废弃 Win32 层（或只是 Hotspot）并移植 Kaffe 取而代之。这应该相对容易，并且容易更新。但是，找到问题答案的最佳方式是联系 Sanos 开发团队并与他们讨论这些问题。他们会告诉您如何提供帮助。

编辑： Sanos 的维护者[有一篇](http://groups.google.com/group/sanos/msg/33f5092a55769bee)关于与其他操作系统的性能比较的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-29T03:08:56.150

我会保持简短和简单。我不想在你的游行中下雨，但在商业上，我认为维护 SANOS 是浪费时间。

这片土地上到处都是 FOSS 项目的尸体，这些项目是个好主意，但结果证明是不必要的，或者从未获得足够的支持。你可能会让一小部分人从事这样的项目，但目的是什么。BeOS、Haiku、ReactOS 等的安装基础在哪里？

让我们清楚一点。Linux 在开发工作方面遥遥领先，以至于其他项目需要数十年的努力才能赶上。我在这里不是在谈论技术价值（尽管可能也是如此），而是对商业思维方式的渗透。不幸的是，商业是钱的来源。

您列出的这四个项目符号已经在 Linux 中可用，因此通过将它们添加到另一个操作系统可以获得什么 - 人们可以使用 Linux。

回答您的具体问题（请注意，这个答案大部分是我的*意见*- 我的妻子会很乐意经常且无需太多提示地告诉您，我以前错了 - :)

*1\. 这里有没有人想分享使用SANOS的经验？*
     不，直到这个问题出现在 SO 上之前，我才真正听说过它（这应该有助于证明我的陈述，即它在宏伟的计划中可能永远不会重要）。

*2\. 什么是吸引其他愿意贡献时间以使其变得更好的人的最便捷方式？*
     这是一个好的开始，因为您已经让大量极客社区意识到了这一点。我会多买一些，你需要增加那个干部的规模。

*3\. 它在哪些方面比 BSD 和/或 Linux 中使用的内核更好？*
     不知道。我对这个项目的兴趣为零，因为我更关心经营企业和与家人共度时光，而不是将我的时间免费捐赠给我认为无处可去的项目（我不想在那里令人讨厌或居高临下，这是我的实际信念）。鉴于它是极简主义的方法，它*可能*会更快。

*4\. 将 Ruby 移植到这个平台有什么好处？*
     除了作为移植练习之外，可能不是。Ruby 人群不会仅仅因为您提供了 SANOS 就蜂拥而至。他们也必须谋生。

# c# - IEnumerable 和 Array、IList 和 List 有什么区别？

> ID：764748
> 
> 赞同：99
> 
> 时间：2009-04-19T02:58:21.530
> 
> 标签：c#

`IEnumerable`和有什么区别`Array`？

`IList`和有什么区别`List`？

这些似乎具有相同的功能。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2009-04-19T03:03:40.923

IEnumerable 仅提供最小的“可迭代”功能。您可以遍历序列，但仅此而已。这有缺点——例如，使用 IEnumerable 对元素进行计数或获取第 n 个元素的效率非常低——但它也有优点——例如，IEnumerable 可能是一个无限序列，就像素数序列一样。

Array 是具有随机访问的固定大小的集合（即您可以对其进行索引）。

List 是一个可变大小的集合（即您可以添加和删除元素），具有随机访问权限。

IList 是一个将列表功能（计数、添加、删除、索引器访问）从各种具体类（如 List、BindingList、ObservableCollection 等）中抽象出来的接口。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-19T03:03:40.033

IEnumerable 是一个接口，它允许通过项目集合进行迭代（例如，通过 foreach 关键字）。

数组是 .NET 内在函数。它拥有相同类型的项目，但它的大小是固定的。一旦你创建了一个包含 x 个元素的数组，它就不能增长或缩小。

IList 定义了列表的接口，也实现了 IEnumerable。

List 实现了 IList 接口；它是一种具体类型的列表。

.NET 列表和数组之间的区别在于，列表可以添加元素——它们增长到足以容纳所有必需的项目。该列表在内部将其存储在一个数组中，当数组不再大到足以容纳所有元素时，将创建一个新数组并复制项目。

IList 和数组都实现了 IEnumerable。这就是接口的工作方式——类实现契约并以类似的方式表现，因此可以类似地对待（你知道类实现了 IEnumerable，你不需要知道如何或为什么）。我建议您阅读接口等。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-19T03:00:55.907

IEnumerable 和 IList 是[接口](http://msdn.microsoft.com/en-us/library/ms173156.aspx)。Array 和 List 是类。数组实现 IEnumerable。List 实现了扩展 IEnumerable 的 IList。

编辑：正如 itowlson 在评论中提到的，Array 也实现了 IList。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-11-16T03:40:47.443

IEnumerable 集合的生成是惰性的。例子：

```
public IEnumerable<int> GetTwoInts()
{
  yield return 1;
  yield return 2;
}
public void Something()
{
  var twoInts = GetTwoInts();
} 
```

在方法 Something 中，对 GetTwoInts() 的调用实际上不会导致 GetTwoInts 方法被执行，因为枚举永远不会被迭代。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-19T03:05:20.810

`IEnumerable`是一个通用接口，被许多类使用，例如`Array`,`List`并且`String`为了让某人迭代一个集合。基本上，它是驱动`foreach`声明的原因。

`IList`通常是您`List`向最终用户公开类型变量的方式。该接口允许随机访问底层集合。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-07T16:01:27.277

为了补充其他答案，请注意执行 foreach 语句之间和执行时存在**性能差异。**`IList<T>``List<T>`

这是因为返回的迭代器对象`List<T>.GetEnumerator`是值类型，而返回的迭代器对象`IList<T>.GetEnumerator`是引用类型，因此需要分配内存（请参阅[C# 中列表的值类型的枚举](https://stackoverflow.com/questions/41036148/enumerator-of-value-type-of-list-in-c-sharp)器）。

在我看来，`IList<T>`反正不是一个很好的界面。例如调用`Add`可以抛出（请参阅[为什么数组实现 IList？](https://stackoverflow.com/questions/5968708/why-array-implements-ilist)）。如果您需要封装，最好使用`IEnumerable<T>`or `IReadOnlyList<T>`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-17T04:38:13.663

除了其他答案之外，了解使用 LINQ 时 Enumerable 与 List/Array 之间的区别会对性能产生巨大影响。简而言之，可以将 Enumerable 视为查询构建器，而 List/Array 是查询的结果。

在使用 EntityFramework 的 LINQ to SQL 的上下文中，前者只是构建 SQL 查询而不对数据库执行它，也不将任何数据加载到内存中，而后者则相反。这就是为什么我们会推迟调用`.ToList()`，直到我们需要它在内存中执行业务逻辑。

在其他上下文中，返回 IEnumerable 的 LINQ 表达式将推迟执行，直到`.ToList()`被调用。考虑下面的例子：

```
void Main()
{
    var w1 = "AB".AsEnumerable();
    Console.WriteLine($"W1: 1");
    w1 = w1.Where(W1);
    Console.WriteLine($"W1: 2");
    w1 = w1.Where(W2);
    Console.WriteLine($"W1: 3");
    w1.ToList();    
    Console.WriteLine($"----------");

    var w2 = "CD".AsEnumerable();
    Console.WriteLine($"W2: 1");
    w2 = w2.Where(W1);
    Console.WriteLine($"W2: 2");
    w2 = w2.ToList();
    Console.WriteLine($"W2: 3");
    w2 = w2.Where(W2);
    Console.WriteLine($"W2: 4");
    w2.ToList();    
    Console.WriteLine($"----------");
}

bool W1(char arg)
{
    Console.WriteLine($"W1:{arg}");
    return true;
}

bool W2(char arg)
{
    Console.WriteLine($"W2:{arg}");
    return true;
}

OUTPUT:
W1: 1
W1: 2
W1: 3
W1:A
W2:A
W1:B
W2:B
----------
W2: 1
W2: 2
W1:C
W1:D
W2: 3
W2: 4
W2:C
W2:D
---------- 
```

在第一个示例中，两个`.Where()`被“附加”并在最后一起执行，此时`.ToList()`项目“ **A** ”首先通过管道，然后是项目“ **B** ”，因此在输出中看到“ **AABB** ”，而在第二个示例中，如果我们之后立即调用，则每次都会执行，因此看到“ CD `.Where()`”**然后**再次看到“ **CD** ” ，输出两次。因此，每次将 Enumerable 转换为 List 或 Array 时，都会对集合中的所有项目进行一次**O(n)**迭代，这会在集合很大时对性能产生影响。`.ToList()`

 ******虽然我们不倾向于`.ToList()`在 LINQ 调用之间以这种方式编写代码，但是当我们将代码分解为返回`List/Array`而不是`IEnumerable`.

然而，这并不意味着我们应该总是在`IEnumerable`. 正如[towlson](https://stackoverflow.com/users/61700/itowlson)所提到的，诸如此类的操作`.Count()`将导致对集合进行迭代，而 List 或 Array 将预先计算此信息，因此如果您计划多次`List/Array`调用，转换为将更有效。`.Count()`这也是为什么`.Count`List 上有一个属性而不是一个`.Count()`方法来计算它的原因。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-25T17:25:53.383

这是一个旧帖子，但仍然想回复。IEnumerable 是一种行为，而 Array 是一种数据结构（具有固定大小的元素的连续集合，便于通过索引访问元素）。当一个数组实现 IEnumerable 时，它​​也应该描述 IEnumerable 的固有属性（便于对集合进行迭代）。

# c# - 编写 WPF 网格

> ID：764751
> 
> 赞同：1
> 
> 时间：2009-04-19T03:01:04.517
> 
> 标签：c#, wpf, grid

我需要编写一个类似 WPF excel 的网格控件。我是 WPF 新手，不知道从哪里开始。

它应该派生自 UserControl、FrameworkElement 还是其他东西？

我需要它有水平和垂直滚动条和一个内容区域。这是否意味着我的网格控件应该有一个带有滚动条的 DockPanel，然后是另一个用于内容区域的控件，以便我的 GridUserControl 将有一个带有 2 个停靠滚动条和一个 GridContentFrameworkElement 控件的 DockPanel？

购买网格不是一种选择。

* * *

这是我决定的：我有一个 GridUserControl（派生自 UserControl）。它有一个带有 2 个停靠 ScrollBar 对象的 DockPanel。主要内容区域（GridContent）是派生自Panel 的另一个控件。内容在 GridContent.OnRender 中绘制。

我没有使用 ScrollViewer，因为它想要渲染整个内容区域然后滚动它。我只想绘制当前可见的内容区域的一部分，因为网格中可以有数百万行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T03:10:40.830

你确定要写一个吗？那里有很多[好的网格](http://www.infragistics.com/dotnet/netadvantage/wpf/xamdatagrid.aspx#Overview)；[甚至免费的](http://xceed.com/Grid_WPF_Intro.html)。我知道它没有响应，但只是想提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-20T19:47:48.240

**自由**

首先，WPF 附带一个[GridView](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridview(VS.85).aspx)控件，它是一个简单的网格。如果它不能满足您的需求，您可以扩展它，以便继承一些现有功能。

**也免费**

大多数人发现它对于他们的要求来说太简单了，因此请查看 Microsoft 的*免费* [WPFToolkit](http://wpf.codeplex.com/)包含一个 DataGrid 控件，它可能满足您的需求。这是一个[概述](http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-datagrid-feature-walkthrough.aspx)。

*源代码可用*于此，如果您绝对必须自己实现整个控件并希望看到一种编写网格控件的方法，这可能会很有启发性。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T03:12:15.753

它可能应该派生自 UserControl 或 ItemsControl（或 ItemsControl 层次结构中的其他东西，例如 Selector）。如果您是 WPF 新手，最好从 UserControl 派生，因为创建一个漂亮的自定义控件需要对 WPF 开发的惯用语以及 API 有相当的流利程度。

与其尝试通过创建显式 ScrollBar 元素来手动管理滚动区域，不如考虑使用 ScrollViewer 类。如果您将网格内容托管在 ScrollViewer 中，并且对于可用的显示区域来说太大，则 ScrollViewer 将负责显示滚动条并自动滚动内容。

请注意，如果您正在寻找数据网格类型的功能，那么可以使用各种免费的、商业的和开源的 WPF 数据网格，尽管这些确实倾向于表格数据编辑，而不是类似于 Excel 的功能。

# jquery - 如何创建浮动菜单

> ID：764762
> 
> 赞同：3
> 
> 时间：2009-04-19T03:09:33.670
> 
> 标签：jquery, html, css

需要一些关于创建浮动菜单的建议，该菜单的行为与[苹果网站购物车上](http://store.apple.com/us/configure/MB420LL/A)使用的非常相似。我见过一些脚本做这样的事情（我们已经尝试过），但它们往往“落后”于运动，而苹果的版本看起来是静止的。一个 jQuery 解决方案会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T03:21:31.397

好吧，看起来他们正在从相对定位切换到固定。比大多数人做的更好，这只是随着窗口向下滚动更多而向下滚动。

您可以[按照以下链接中的](http://codepunk.hardwar.org.uk/ajs02.htm)操作来检测窗口向下滚动的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T03:28:15.903

一旦 div 的 y 位置等于当前窗口视图的顶部，将其设为固定位置。您将不得不使用逻辑来确保它在它们向上滚动后移回非固定状态，但这应该是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T11:43:47.420

这是一个名为 scroll-follow 的[插件](http://kitchen.net-perspective.com/open-source/scroll-follow/)，它会有所帮助。本质上，您使用 ul 为您的菜单选项定义一个 DIV。该插件将允许您设置速度、外观和拨动开关。

# wpf - 如何将 WPF 动画逐帧渲染为视频？

> ID：764770
> 
> 赞同：4
> 
> 时间：2009-04-19T03:17:57.520
> 
> 标签：wpf, video, animation, video-capture, record

我在 WPF 中创建了一个我喜欢的漂亮效果，我希望能够“记录”这个效果。但是在运行时它是不稳定的。

有没有办法可以将其转换为逐帧过程并自己将其保存为视频，而不是在播放期间尝试录制它？

基本上我想将 WPF 渲染为视频，或者列出一系列保存为位图的帧。

关键是能够在没有波涛汹涌的情况下录制动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T04:15:17.833

您是否看过使用[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/aa969775.aspx)将您的 Visual 渲染为位图？您可能必须使用动画的计时或挂钩到 OnRender 事件，但这会让您将控件捕获为图像。

扩展动画的计时位：如果要渲染动画并将其保存为位图（然后制作视频），您可以使用时钟的[ClockController](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.clockcontroller.aspx)手动推进动画并将每一帧渲染到文件中。

另一种选择是将`To`, `From`, 和设置`By`为让您渲染每一帧的值（例如，如果动画需要一秒钟，并且您想要制作 30 fps 的视频，您可能会在最坏的情况下将动画更改为需要 30 秒，提前一秒钟，并在每次前进后渲染到位图）。

# wsdl - JAX-WS 从 jar 加载 WSDL

> ID：764772
> 
> 赞同：46
> 
> 时间：2009-04-19T03:20:06.797
> 
> 标签：wsdl, jar, jax-ws, wsimport

我正在编写一个胖客户端，它使用 SOAP 服务来实现某些功能（错误报告等）

我的 JAX-WS 工作正常，但默认情况下（至少在 netbeans 中）它每次初始化服务时都会从远程服务器获取 WSDL。我希望这有助于提供一些版本控制支持等，但这不是我想要的。

我已将`wsdllocation`arg 添加到 wsimport 以将生成的类指向本地资源。以下片段是从 ApplicationService.java 加载 WSDL 资源的 URL。

```
baseUrl = net.example.ApplicationService.class.getResource(".");
url = new URL(baseUrl, "service.wsdl"); 
```

我很确定指向存储在 net/example/resources 包中的 jar 中的资源应该没有问题，并且 jar 本身是按预期构造的。但是该服务不会加载...具体来说，当我调用 ApplicationService.getPort(); 时，我得到一个 NullPointerException；

这可能吗？还是只是一场野鹅追逐？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-14T14:14:05.930

是的，这绝对是可能的，因为我在通过 javax.xml.ws.EndpointReference（一个 WS-A 相关类）创建客户端时已经做到了。我已经向 WS-A EndPointReference 添加了对 WSDL 的类路径引用，并且 JAX-WS 的 Metro 实现很好地加载了它。无论是从 WS-A EndPointReference 还是从文件或 http URL 加载 WSDL，您的 JAX-WS 实现都应该使用与解析 URL 相同的 WSDL 解析代码。

对您来说最好的方法可能是执行以下操作：

```
URL wsdlUrl = MyClass.class.getResource(
            "/class/path/to/wsdl/yourWSDL.wsdl");

Service yourService= Service.create(
            wsdlUrl,
            ...); 
```

其中 ... 表示 WSDL 内的 WSDL 服务的 QName。现在要记住的重要一点是您的 WSDL 需要完整且有效。这意味着如果您的 WSDL 导入 XSD 文件或其他 WSDL，则 URL 必须正确。如果您将导入的 WSDL 和 XSD 包含在与 WSDL 文件相同的 JAR 中，则应该使用相对 URL 进行导入并将所有导入保存在同一个 JAR 文件中。JAR URL 处理程序不会将相对 URL 视为相对于类路径，而是将相对于 JAR 文件中的相对 URL，因此您不能在跨 JAR 运行的 WSDL 中导入导入，除非您实现自定义 URL 处理程序和您自己的前缀来做基于类路径的导入解析。如果您的 WSDL 导入外部资源，那没关系，但是，如果这些资源移动了，您就会为自己注册维护问题。即使从您的类路径中使用 WSDL 的静态副本也违背了 WSDL、Web 服务和 JAX-WS 的精神，但有时它是必要的。

最后，如果您嵌入了静态 WSDL，我建议您至少使服务端点可配置以用于测试和部署目的。重新配置 Web 服务客户端端点的代码如下：

```
 YourClientInterface client = yourService.getPort(
            new QName("...", "..."),
            YourClientInterface.class);
  BindingProvider bp = (BindingProvider) client;
  bp.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,
                "http://localhost:8080/yourServiceEndpoint"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-19T22:01:29.257

**至少对于最近的 JAX-WS，如果**您将 WSDL 放在 JAR 中，然后将 wsimport 设置为 JAR 中`wsdlLocation`WSDL 的相对资源路径，则不需要执行任何模式目录或编程 wsdl 位置设置。那就是 JAX-WS 使用 Java 的内置函数`Class.getResource`来加载 WSDL。

如果您使用 Maven，它类似于：

```
 <plugin>
    <groupId>org.jvnet.jax-ws-commons</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>2.3</version>
    <executions>
      <execution>
        <goals>
          <goal>wsimport</goal>
        </goals>
        <!-- Following configuration will invoke wsimport once for each wsdl. -->
        <configuration>
            <!--- VERY IMPORTANT THAT THE PATH START WITH '/' -->
    <wsdlLocation>/com/adamgent/ws/blah.wsdl</wsdlLocation>
    <wsdlDirectory>${basedir}/src/main/resources/com/adamgent/ws</wsdlDirectory>
    <wsdlFiles><wsdlFile>blah.wsdl</wsdlFile></wsdlFiles>
       </configuration>
      </execution>
    </executions>
  </plugin> 
```

对于上面的示例，您可以将使用 Maven 项目布局的 WSDL 放在此处`src/main/resources/com/adamgent/ws`。

确保 WSDL 进入 Maven 的 JAR，例如：

```
<build>
      <resources>
        <resource>
          <directory>src/main/resources</directory>
        </resource>
      </resources> .... 
```

现在您的 wsimport 生成的代码和 WSDL 都在一个自包含的 JAR 中。要使用该服务，您不必设置 WSDL 位置，并且非常简单：

```
BlahService myService = new BlayService_Service().getBlahServicePort(); 
```

将它映射到 ANT 的 wsimport 应该很简单。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-11-20T14:40:29.240

也许有点晚了，但我找到了一个非常简单的解决方案来解决这个问题，但这涉及到 Service 类的生成代码的更改：

如果服务类中的以下行

```
baseUrl = net.example.ApplicationService.class.getResource("."); 
```

改为

```
baseUrl = net.example.ApplicationService.class.getResource(""); 
```

即使使用打包在 JAR 中的 WSDL，它也能正常工作。不确定在这两种情况下 getResource() 的确切假定行为，但到目前为止，在多个操作系统和 Java 版本上，我没有遇到这种方法的任何问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T21:57:30.537

您描述的是 JAX-WS 中的一个错误：[JAX_WS-888 - 用于解析自定义 wsdlLocation 的 URL 的错误代码](http://java.net/jira/browse/JAX_WS-888)。

它已针对 V2.2 进行了修复，因此`wsdlLocation`您编写的设置现在应该可以工作了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-06T17:40:14.750

如果你的类路径有“。” 在其中，Class.getResource(".") 将返回您执行 java 命令的目录的 URL。否则，它将返回一个空值。相应地调整 wsdllocation。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-01-08T07:11:06.753

另一个答案是使用

```
new Service(wsdllocation, servicename ); 
```

获取服务对象。

这就是我解决问题的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-09T14:35:05.967

我偶然发现了同样的问题。JAXWS 生成客户端代码使用该`MyService.class.getResource(".")`技巧来加载 wsdl 文件......但经过测试，这似乎只有在类文件位于文件系统上的目录中时才有效。如果类文件在 JAR 中，则此调用为 URL 返回 null。

这听起来像是 JDK 中的一个错误，因为如果您像这样构建 URL：

```
final URL url = new URL( MyService.class.getResource( MyService.class.getSimpleName() + ".class"), "myservice.wsdl"); 
```

如果类和 wsdl 捆绑在一个 jar 中，它也可以工作。

我想大多数人实际上会捆绑在一个罐子里！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-06-24T09:22:00.353

我在构建客户端 jar 之前替换了 WSDL 位置。

1.  将 WSDL 复制到类目录。
2.  使用类路径替换服务类引用 WSDL。
3.  构建客户端存根。
4.  罐子里的存根。

```
<copy todir="@{dest-dir}/@{dir-package}" verbose="@{verbose}">
  <fileset dir="@{dir-wsdl}" includes="*.wsdl,*.xsd" />
</copy>
<echo message="Replacing Service to point to correct WSDL path..." />
<replaceregexp match="new URL(.*)" replace='Class.class.getResource("@{name-wsdl}");' flags="gm">
  <fileset dir="@{source-dest-dir}">
    <include name="@{dir-package}/*Service.java" />
  </fileset>
</replaceregexp>
<replaceregexp match="catch (.*)" replace='catch (Exception ex) {' flags="gm">
  <fileset dir="@{source-dest-dir}">
    <include name="@{dir-package}/*Service.java" />
  </fileset>
</replaceregexp> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-29T14:27:32.403

无需复杂化，只需使用 jar 类加载器

```
ClassLoader cl = SomeServiceImplService.class.getClassLoader();
SERVICE_WSDL_LOCATION = cl.getResource("META-INF/wsdls/service.wsdl"); 
```

试试看！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-19T15:08:31.367

这是我的 hack-y 解决方法。

我从 jar 中解压 WSDL 并将其写入 jar 附近的文件中：

```
File wsdl = new File("../lib/service.wsdl");
InputStream source = getClass().getResource("resources/service.wsdl").openStream();
FileOutputStream out = new FileOutputStream(wsdl);

byte[] buffer = new byte[512];
int read;
while((read = source.read(buffer)) >= 0) {
    out.write(buffer, 0, read);
} 
```

然后将服务类指向`file:../lib/service.wsdl`.

这可行，但如果有人能向我展示一个更优雅的解决方案，我将不胜感激。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-02T16:09:56.170

这是对我有用的一个（特别是通过*http*和*https*）。Oracle JDK 1.8.0_51 的 JAX-WS 使用[Apache CXF](http://cxf.apache.org/) 3.1.1 创建的类的案例。

请注意，在任何情况下，仅在第一次调用时才获得远程 WSDL。根据使用模式（长时间运行的程序），这可能是完全可以接受的。

基础知识：

*   从远程主机下载 WSDL 并存储为文件：`wget --output-document=wsdl_raw.xml $WSDL_URL`
*   你可能想要`xmllint --format wsdl_raw.xml > wsdl.xml`漂亮的格式
*   [使用命令行工具](http://cxf.apache.org/docs/wsdl-to-java.html)生成客户端类：`./cxf/bin/wsdl2java -d output/ -client -validate wsdl.xml`并导入您的项目

验证WSDL 文件中是否存在*http*和*https的服务定义。*就我而言，提供者没有用于*https*（但确实接受*https*流量），我不得不手动添加它。WSDL 中应包含以下内容：

```
 <wsdl:service name="fooservice">
    <wsdl:port binding="tns:fooserviceSoapBinding" name="FooBarWebServicePort">
      <soap:address location="http://ws.example.com/a/b/FooBarWebService"/>
    </wsdl:port>
  </wsdl:service>
  <wsdl:service name="fooservice-secured">
    <wsdl:port binding="tns:fooserviceSoapBinding" name="FooBarWebServicePort">
      <soap:address location="https://ws.example.com/a/b/FooBarWebService"/>
    </wsdl:port>
  </wsdl:service> 
```

CXF 应该已经生成了一个实现`javax.xml.ws.Service`名为 example的类`Fooservice`，并带有适当的构造函数：

```
public class Fooservice extends Service {

  public Fooservice(URL wsdlLocation) {
      super(wsdlLocation, SERVICE);
  }

  public Fooservice(URL wsdlLocation, QName serviceName) {
      super(wsdlLocation, serviceName);
  }

  public Fooservice() {
      super(WSDL_LOCATION, SERVICE);
  }

  ...etc... 
```

在您的代码中的某处（这里是一些 Groovy 以便于阅读），您初始化上述`Service`实例，然后调用一个端口。在这里，根据调用的标志`secure`，我们使用*https*或*http*：

```
static final String NAMESPACE = 'com.example.ws.a.b'
static final QName SERVICE_NAME_HTTP = new QName(NAMESPACE, 'fooservice')
static final QName SERVICE_NAME_HTTPS = new QName(NAMESPACE, 'fooservice-secured')

Fooservice wsService
File wsdlfile = new File('/somewhere/on/disk/wsdl.xml')

// If the file is missing there will be an exception at connect
// time from sun.net.www.protocol.file.FileURLConnection.connect
// It should be possible to denote a resource on the classpath 
// instead of a file-on-disk. Not sure how, maybe by adding a handler
// for a 'resource:' URL scheme?

URI wsdlLocationUri = java.nio.file.Paths(wsdlfile.getCanonicalPath()).toUri()

if (secure) {
  wsService = new Fooservice(wsdlLocationUri.toURL(), SERVICE_NAME_HTTPS)
}
else {
  wsService = new Fooservice(wsdlLocationUri.toURL(), SERVICE_NAME_HTTP)
}

SomeServicePort port = wsService.getSomeServicePort()

port.doStuff() 
```

另一种方法是在与用于服务调用（用于`tcpdump -n -nn -s0 -A -i eth0 'tcp port 80'`观察流量）的连接不同的连接上下载 WSDL，只需执行以下操作：

```
URI wsdlLocationUri

if (secure) {
   wsdlLocationUri = new URI('https://ws.example.com/a/b/FooBarWebService?wsdl')
}
else {
   wsdlLocationUri = new URI('http://ws.example.com/a/b/FooBarWebService?wsdl')
}

Fooservice wsService = new Fooservice(wsdlLocationUri.toURL(), SERVICE_NAME_HTTP)

SomeServicePort port = wsService.getSomeServicePort()

port.doStuff() 
```

请注意，如果指定*https ，这实际上正确使用**https*，尽管事实上已经使用. （不知道为什么 - 服务是否使用用于检索 WSDL 资源的方案？）`wsdlLocationUri`*`wsService``SERVICE_NAME_HTTP`*

 *就是这样。

要调试连接，请通过：

```
-Dcom.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump=true
-Dcom.sun.xml.internal.ws.transport.http.HttpAdapter.dump=true 
```

在命令行上到 JVM。这会将来自 http 连接代码的信息写入标准输出（不幸的是，不是`java.util.logging`。Oracle，拜托！）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-22T21:21:21.053

我的解决方案是修改生成的服务。您必须更改标头注释中的**wsdlLocation**并且实例块如下所示：

```
 static {
    URL url = null;
    url = com.ups.wsdl.xoltws.ship.v1.ShipService.class.getResource("Ship.wsdl");
    SHIPSERVICE_WSDL_LOCATION = url;
    } 
```

我将 wsdl 文件放在 ShipService 类旁边的 bin 目录中

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-24T19:53:42.563

虽然你可以通过一些操作让它工作，但我建议*不*要这样做并保持你现在的方式。

Web 服务端点提供者应提供 WSDL 作为其合同的一部分。您生成的代码应该从服务器本身的 WSDL 中提取。

在 WebSphere 上部署时，您可以从部署 UI 将端点更改为其他端点。其他应用程序服务器您可能需要找出供应商特定的绑定 XML 来执行此操作。

它只发生在初始化时，因此对整个应用程序的影响应该可以忽略不计。

# php - PHP 或 LIghttpd 是否创建 fastcgi 套接字？

> ID：764775
> 
> 赞同：3
> 
> 时间：2009-04-19T03:21:08.247
> 
> 标签：php, fastcgi

我正在努力在 Mac OS X Leopard 上进行设置。我正忙着让 PHP5 在 lighttpd 下作为 fastcgi 工作。我已经验证我已经编译了启用 fastcgi 的 php。正如我在各种文档中看到的那样，我已经尝试过配置 lighttpd。

我不理解的核心是 php-cgi 是否应该创建套接字，或者 lighttpd 是否创建它。

我的 lighttpd 配置如下所示：

```
fastcgi.server = ( ".php" =>
        ( "localhost" =>
                (
                        "socket" => "/var/run/php-fastcgi.socket",
                        "bin-path" => "/usr/local/php/bin/php-cgi"
                )
        )
) 
```

当我检查 /var/run/ 时，没有创建 php-fastcgi.socket。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-07T23:26:43.427

你`mod_fastcgi`启用了模块吗？

```
server.modules += ( "mod_fastcgi" ) 
```

运行服务器的用户是否具有写入权限`/var/run`？

值得一提的是，这是我在运行 Debian Etch 的机器上的配置：

```
fastcgi.server = ( ".php" =>
    ((
      "bin-path" => "/usr/bin/php5-cgi",
      "socket" => "/tmp/php.socket",
      "max-procs" => 1,
      "idle-timeout" => 20,

      "bin-environment" => (
        "PHP_FCGI_CHILDREN" => "1",
        "PHP_FCGI_MAX_REQUESTS" => "1000"),

      "bin-copy-environment" => (
        "PATH", "SHELL", "USER"),

      "broken-scriptfilename" => "enable"
     ))
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T03:25:35.317

httpd 几乎肯定会创建它，因此 fastcgi 可以在 fork 可执行文件后继承它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-17T01:10:24.757

我因同样的问题而把头发扯掉。我在 linux 上设置了 lighty 和 php 很多次，但我很难让 php fastcgi-socket 在 OSX 下工作。

最后我手动启动了快速cgi服务器，使用 php-cgi -b 127.0.0.1:5555

然后在 lighty config 中指定一个 tcp 端口... fastcgi.server = ( ".php" =>( "localhost" =>("host" => "127.0.0.1","port" => 5555 )))

可能不理想，但它确实以这种方式工作

# python - 如何在 python ssmtp vs smtplib 中发送邮件

> ID：764778
> 
> 赞同：3
> 
> 时间：2009-04-19T03:24:33.680
> 
> 标签：python, smtplib, ssmtp

我需要在 delbian linux 中发送电子邮件。如何发送？我在 256 MB 的 linux 机器上运行我的服务器，我听说 postfix 和 sendmail 太过分了。

最近我遇到了ssmtp，它似乎是一个可执行文件，需要作为一个进程执行并使用os模块通过python调用。

或者，python 已经提供了 smtplib，它对我来说很好用。

与 python 的 smtplib 相比，使用 ssmtp 有什么优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T08:03:55.413

在 Python 程序中，没有优势。

ssmtp 的唯一目的是将 SMTP 协议包装在 sendmail API 中。也就是说，它提供了一个程序，该程序`/usr/sbin/sendmail`接受与成熟的 sendmail 相同的选项、参数和输入（尽管大多数选项什么都不做）；但在幕后，它不处理电子邮件本身，而是将消息发送到 SMTP 服务器。这适用于需要存在`sendmail`程序的系统，可能是因为他们不理解 SMTP - 例如，我认为旧版本的 PHP 有这个要求，即使在最近的版本中，配置 PHP 以使用所谓sendmail接口（即程序`sendmail`）比直接使用SMTP。（我有一段时间没用PHP了，不知道现在的状态）

但是，在 Python 中，情况正好相反：您有一个内置库，可以轻松地直接使用 SMTP，而 using 则`sendmail`需要您调用`subprocess`模块，这有点笨重，而且非常依赖于 Python 之外的东西。所以基本上没有理由不使用`smtplib`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T23:42:01.383

此外，*postfix*很容易在“卫星”模式下安装，它所做的只是为您排队和发送电子邮件。比实现自己的电子邮件队列要容易得多。大多数体面的包管理系统都会让你以这种方式配置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T12:22:44.533

还有其他轻量级 SMTP 发件人，例如我更喜欢的[msmtp 。](http://msmtp.sourceforge.net/)

但是 Postfix 适合 256 Mb 的机器。像 Postfix 这样的完整 MTA 的好处是它会保留消息并在目标服务器关闭时重试。使用 smtplib 和远程计算机上的服务器，您的程序现在取决于网络...

# vb.net - 两个 if 语句，为什么一个不执行？

> ID：764779
> 
> 赞同：0
> 
> 时间：2009-04-19T03:25:24.677
> 
> 标签：vb.net, if-statement, switch-statement

我有两个 if 语句，我的项目只看到一个而不是另一个。这是代码：

```
If (IsPostBack) Then
  HandleUploadedFile()
End If

Dim savePath As String = "Images\ "

If (fileUpload.HasFile) Then
  Dim fileName As String = fileUpload.FileName
  savePath = Server.MapPath(savePath) + fileName
  fileUpload.SaveAs(savePath)
  Me.Label1.Text = "Your file was saved as " & fileName
  adp.Insert(fileUpload.FileName)
  Me.Label1.Text = "You did not specify a file to upload."
End If 
```

当我跟踪我的代码时，我发现它转到第二个 if ，然后在没有在条件内运行代码的情况下转到 end if 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T03:35:57.397

HandleUploadedFile 中发生了什么？

如果一个错误没有被困住——你可能会从你的常规中掉下来（永远不会达到第二个如果）。

如果未声明 fileUpload ......同样的情况。

当你通过时，你看到它跳到最后吗？

编辑：当页面没有被发回时，你真的会上传文件吗？也许您真的打算将整个代码块放在 If IsPostBack 代码块中？

Edit2：您可以添加：

```
Public Sub HandleUploadedFile 
```

在这条线上：

```
Dim savePath As String = "Images\ " 
```

并添加：

```
End Sub 
```

在这条线下面：

```
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T03:37:26.317

不确定我是否正确理解了这个问题，但你确定 fileUpload.HasFile 是真的吗？

# .net - 在 ASP.NET MVC 网站上实现搜索

> ID：764783
> 
> 赞同：5
> 
> 时间：2009-04-19T03:26:26.563
> 
> 标签：.net, asp.net-mvc, search, full-text-search

我使用 ASP.NET MVC 创建了一个内容管理的网站。所有内容都存储在 SQL Server 数据库的“内容”表中，文本本身存储在数据类型“XML”的列中。

我想向站点添加一个搜索功能，该功能将搜索所有 XML 内容并返回结果列表，每个结果都链接到内容项。

关于哪种技术最合适的任何想法？

我应该使用 SQL Server 全文索引还是 DotLucene 之类的其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T04:15:21.343

[Lucene.net](http://incubator.apache.org/lucene.net/)将是您更好的选择。您可以通过 lucene 进行大量高级搜索。

文档@http: [//incubator.apache.org/lucene.net/docs/2.1/](http://incubator.apache.org/lucene.net/docs/2.1/)

# com - .Net COM DLL 不能跨 appdomains 从 vb6 工作

> ID：764788
> 
> 赞同：0
> 
> 时间：2009-04-19T03:31:41.107
> 
> 标签：com, vb6, appdomain

我们有一个大型的 vb6 应用程序，由于我们需要更改/修复一些东西，我们正在将部分移动到 .net，以框架 2.0 为目标。我们已经将一堆类移动到 .net dll 中，并且它们已正确设置以暴露给 com。

这就是问题所在：MainAppVB6.exe 实例化了 DOTNET_COM.ComClass。它将这个传递给不同的.net dll 中的一个方法，该方法将它传递给一个appdomain。对于用 vb6 编写的 COM 对象，这根本不是问题。

.net 查看 appdomain 边界，并希望对象可序列化或 marshalbyref。由于我们需要 .net 部分来更改返回到 vb6 的数据，因此可序列化不起作用。如果我们在 Inherits MarshalByRefObject 标记类，那么我们会得到“这个远程代理没有通道接收器，这意味着服务器没有注册的服务器通道正在监听，或者应用程序没有合适的客户端通道与服务器通信”。

没有渠道——我们只是在同一个 dll 中跨过一个 appdomain。.net 似乎没有将对象视为 COM，它应该这样做。

如果我同时删除 marshalbyref 和可序列化，则只有当 com 对象由 vb6 实例化时才会起作用。如果 appdomain 中的 .net 功能创建对象并分配给以传递回 vb6，则 vb6 会给我自动化错误。

一个非常丑陋的事情是序列化新appdomain中的对象，发回xml，然后让vb6反序列化，但这看起来很荒谬。

有人有想法么？

谢谢你。

赛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T03:48:00.613

您可以在您的第一个 .NET 方法中为您的 COM 类上的适当 mutator 方法创建一个委托，将该委托传递给 AppDomain 边界，使用该委托在第二个 .NET 方法中改变您的 COM 对象，然后返回变异的对象到 VB6。[Marshal 类](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getdelegateforfunctionpointer.aspx)中的方法可能会派上用场。:)

从评论编辑：如何在第一个 .net 调用中创建 vb6 类的 .net 副本，将该新对象传递给您需要进行的所有 .net 调用，然后修复您的 com 对象返回。这可能比 vb6 中的反序列化更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T19:40:29.053

您必须创建一个中间汇编程序外观。然后您在应用程序外观中创建一个 AppDomain - 它将负责管理具有 dll vb6 的应用程序的管道。

vb <===> Facade (appDomain) <====> 登录有 dll vb6

# java - 使图像 resize() 的代码工作

> ID：764794
> 
> 赞同：0
> 
> 时间：2009-04-19T03:41:54.513
> 
> 标签：java, image, netbeans6.5

我的导师给我发了这段代码，它应该是正在进行的项目的一个组成部分。问题是，它不起作用。

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.Kernel;
import java.awt.image.ConvolveOp;
import com.sun.image.codec.jpeg.JPEGImageEncoder;
import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGEncodeParam;
import javax.swing.*;

public class ImageUtil {

    public static void resize(File originalFile, File resizedFile, int newWidth, float quality) throws IOException{

        if(quality <0||quality>1){
            throw new IllegalArgumentException ("quality has to be between 0 and 1");

        }

        ImageIcon ii = new ImageIcon(originalFile.getCanonicalPath());
        Image i = ii.getImage();
        Image resizedImage = null;

        int iWidth = i.getWidth (null);
        int iHeight = i.getHeight(null);

        if (iWidth > iHeight){
            resizedImage = i.getScaledInstance(newWidth,(newWidth*iHeight)/iWidth, Image.SCALE_SMOOTH);
        } else {
            resizedImage = i.getScaledInstance((newWidth*iWidth)/iHeight,newWidth, Image.SCALE_SMOOTH);
        }

        Image temp = new ImageIcon (resizedImage).getImage();

        BufferedImage bufferedImage = new BufferedImage (temp.getWidth(null), temp.getHeight(null),
                                                         BufferedImage.TYPE_INT_RGB);

        // copy to a buffered image
        Graphics g = bufferedImage.createGraphics();

        g.setColor(Color.white);
        g.fillRect(0,0,temp.getWidth(null), temp.getHeight(null)); // causea el error de ejecución?
        g.drawImage(temp,0,0,null);
        g.dispose();

        float softenFactor = 0.05f;
        float [] softenArray = {0, softenFactor,0, softenFactor, 1-(softenFactor*4), softenFactor,0, softenFactor,0};
        Kernel kernel = new Kernel (3,3,softenArray);
        ConvolveOp cOp = new ConvolveOp (kernel, ConvolveOp.EDGE_NO_OP,null);
        bufferedImage = cOp.filter (bufferedImage,null);

        FileOutputStream out = new FileOutputStream(resizedFile);

        JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);

        JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bufferedImage);

        param.setQuality(quality,true);

        encoder.setJPEGEncodeParam(param);
        encoder.encode(bufferedImage);

    }

    public static void main(String args[]) throws IOException {
       File originalImage= new File ("/images/goya.jpg");
       resize(originalImage,new File("/images/goyanuevotamanio.jpg"),350, 0.2f);
       resize(originalImage, new File("/images/goyanuevotamanio.jpg"), 350, 1f);

    }

} 
```

他说代码应该能够调整高度和宽度，但他的调整大小方法：

```
public static void resize(File originalFile, File resizedFile, int newWidth, float quality) 
```

缺少`newHeight`参数。

抛出的 RuntimeException 说：

```
Exception in thread "main" java.lang.IllegalArgumentException: **Width (-1) and height (-1) cannot be <= 0**
        at java.awt.image.DirectColorModel.createCompatibleWritableRaster(DirectColorModel.java:999)
        at java.awt.image.BufferedImage.<init>(BufferedImage.java:312)
        at ImageUtil.resize(ImageUtil.java:38)
        at ImageUtil.main(ImageUtil.java:72)
Java Result: 1 
```

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T04:12:32.850

如果不分析代码以查看问题可能是什么，我可以说如果打算保持图像纵横比，则不需要新的高度参数。它始终是宽度的固定比例。

**更新：**

我已经针对我自己的测试图像运行了代码，它确实按预期工作。当程序找不到您指定的源图像时，很可能会导致您遇到的错误。当我指定一个不存在的源图像时，我得到了同样的错误。

尝试对源图像使用绝对路径（包括驱动器号等）。

**更新 2**

在行后添加以下代码..

```
ImageIcon ii = new ImageIcon(originalFile.getCanonicalPath());

if(ii.getImageLoadStatus() == MediaTracker.COMPLETE)
{
    System.out.print("Load image ok\n");
}
else
{
    System.out.print("Load image failed\n");
} 
```

这将告诉您程序是否无法加载源图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-09T17:08:53.403

为什么要应用软化来调整大小必须锐化内核 -1 -2 -1 -2 12+q -2 -1 -2 -1，其中典型的 q 可能是 28，而您没有应用 drawImage 的调整大小版本

（q = 36 相当于你的 F=0.05 用于锐化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T04:42:06.210

根据堆栈跟踪判断，此行引发了异常：

```
BufferedImage bufferedImage = new BufferedImage (temp.getWidth(null), temp.getHeight(null), BufferedImage.TYPE_INT_RGB); 
```

我认为这可能是因为`temp.getWidth`并且`temp.getHeight`正在返回 -1，因为图像尚未完成加载。

网络上提供了使用 Java 处理图像的教程和示例。一个示例在这里[http://snippets.dzone.com/posts/show/92](http://snippets.dzone.com/posts/show/92)。使用 查找代码`ImageObserver`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-27T16:37:40.910

你必须给程序一个介于 0 和 1 之间的起始参数。我做到了，它运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-13T20:12:05.250

适应这个：

```
private void ResizeImage(Image img, double maxWidth, double maxHeight)
{
    double srcWidth = img.Source.Width;
    double srcHeight = img.Source.Height;

    double resizeWidth = srcWidth;
    double resizeHeight = srcHeight;

    double aspect = resizeWidth / resizeHeight;

    if (resizeWidth > maxWidth)
    {
        resizeWidth = maxWidth;
        resizeHeight = resizeWidth / aspect;
    }
    if (resizeHeight > maxHeight)
    {
        aspect = resizeWidth / resizeHeight;
        resizeHeight = maxHeight;
        resizeWidth = resizeHeight * aspect;
    }

    img.Width = resizeWidth;
    img.Height = resizeHeight;
} 
```

# mysql - 高效的 SQL 查询

> ID：764808
> 
> 赞同：2
> 
> 时间：2009-04-19T03:59:23.520
> 
> 标签：mysql, performance

注意：这些不是作业问题。我正在自己学习 dbms，因此有这些类似家庭作业的问题。

两张表：

```
Teachers (teacher_id, teacher_name)
Courses (teacher_id,course_id, course_name) 
```

为了选择不教任何课程的教师姓名，我能想到两个查询：

```
mysql> explain select teacher_name from teachers left join courses on (teachers.
teacher_id = courses.teacher_id) where course_id is null;

mysql> explain select teacher_name from teachers where teacher_id not in (select
 teacher_id from courses); 
```

哪一个会更有效率？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T04:03:00.720

连接通常比子选择更快。

[http://www.codersrevolution.com/index.cfm/2008/7/31/MySQL-performance-INNER-JOIN-vs-subselect](http://www.codersrevolution.com/index.cfm/2008/7/31/MySQL-performance-INNER-JOIN-vs-subselect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T16:03:48.067

> 哪一个会更有效率？

与往常一样：这取决于表中的内容以及被索引的内容。

通常和默认情况下，连接比子查询更可取。它查看每位教师，然后直接转到课程表以查找与teacher_id 匹配的内容。希望您已经在“Courses.teacher_id”上创建了一个索引，这将是一个非常简单的查找。

但如果你不这样做，子查询可能会更快。如果您有很多课程由相对较少的教师教授，这将执行一次表扫描以生成一个小的临时表，然后可以更快地检查教师表中的每一行。

但在这种情况下，最好只添加索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T04:08:14.310

我认为子查询（在您的情况下是第二个选项）可以运行得更快，因为它们限制了返回的行数以及返回的列数。左外连接的第一个选项可能更慢且更占用内存。但同样，它可能取决于其他几个因素，如返回的行数、列索引等。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-19T04:02:51.640

我会推荐第三个选项——那就是在你的第二个选项中添加一个不同的子句并试一试。

我会投票支持第二个选项，因为它更有效（尤其是添加了 distinct 子句）。您希望在两个表中都添加了一个关于 teacher_id 的索引。

编辑：
我刚刚注意到这是一个技巧问题 - Courses 中没有teacher_id 字段。

如果一个以上的老师可以教一门课程 - 添加一个表 Teacher_Course （我总是避免在对象名称中使用复数 - 只是一种练习）。在这个新表中存储 TeacherCourseId（系统生成的 id）、course_id 和teacher_id，并且每个班级可以允许多个教师。

# asp.net - 语义 Web 与 ASP.NET MVC Web 开发有何关系？

> ID：764815
> 
> 赞同：1
> 
> 时间：2009-04-19T04:10:33.710
> 
> 标签：asp.net, semantic-web

是否有任何有前途的特定于 asp.net 的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-22T09:46:39.497

有一些有趣的语义 Web 技术构建在 .NET 堆栈上，可以与 ASP.NET MVC 结合使用。[我是Intellidimension](http://www.intellidimension.com/)技术的忠实粉丝，因为它使您能够将 SQL 服务器用作图形存储，并具有丰富的 .NET SDK 用于与任何类型的图形存储库进行交互，包括（SQL、Web 服务、第三方等...） .

@Anthony Kanago 正确地指出，没有什么将 ASP.NET MVC 与语义 Web 技术或标准联系起来，但也可以说是 ASP.NET MVC 与传统关系存储库之间的联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T04:42:11.887

# 简而言之，

它不是。不会持续很长时间。

就所有意图和目的而言，它是一组尚不存在用于主流开发的技术。我知道这可能不太符合您的问题的精神，但实际上，与 ASP.NET MVC 相关，您还没有真正关心过。

Web 2.0 的东西，如 AJAX、Web 服务，以及所有这些都是您真正感兴趣的。

# c# - 我的代码充满了服务接口！

> ID：764817
> 
> 赞同：3
> 
> 时间：2009-04-19T04:11:26.347
> 
> 标签：c#, asp.net-mvc, service, repository-pattern

大家好。我遇到了使用存储库和服务模型的奇怪设计模式。该应用程序由 ASP.NET MVC、WCF 和一些 Windows 服务组成。我的存储库正在使用 LINQ DataContext。随着我的应用程序的发展，我发现自己到处都在传递对 IWhateverService 服务的引用。例如，我有 IAccountService，它定义了诸如 ChangePlan(Account account, Plan plan) 之类的方法。

现在，似乎 IAccountService 是放置此方法的最佳位置，因为我们在这里为帐户提供服务。但是，ChangePlan 方法需要知道几件事才能真正更改计划。它必须知道用户的当前使用情况、可用计划列表、用于计费的电子商务服务接口的实例等。

我认为让 ChangePlan 方法接受 IAccountService 接口中的所有必需服务。但是这些其他服务的要求是一个实现问题，不应该是接口定义的一部分。

因此，现在我发现自己为 AccountService 创建了一个巨大的构造函数，其中包含 IAccountRepository、IPPlanService、IUsageService、IEcommerceService 和 IValidationDictionary 的实例。这感觉根本不对。

现在以这种情况为例。显然 IAccountService 包含一个通过 ID 检索用户帐户的简单方法： Account Get(int id) 有几次我只需要调用这个方法。所以，我去创建我的 AccountService，它需要所有这些其他服务的实例（尤其是 IValidationDictionary，我不需要对此进行验证）。再一次，这感觉不对。我可以传递 null，但这只是因为我知道实现不会仅将它们用于此方法。

此外，为了避免在需要的任何地方实例化服务，我创建了一个名为 ServiceFactory 的静态类，它具有静态方法、CreateAccountService、CreatePlanService 等……我在应用程序周围调用这些方法。看起来不错，但我无法摆脱这种不合适的感觉。

我的断线在哪里？有人有什么建议吗？

谢谢。

安德鲁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-19T05:31:12.503

您所描述的设计似乎非常符合[SOLID](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)原则。许多较小的组件通常也被认为是好的设计。

SOLID 原则通常会接受您在*实现*中描述的非规范化，并且宁愿专注于让此类组件的每个外部用例都有自己的接口。

我认为您遇到的主要问题是您花了太多时间想知道如何*构造*这些对象。您可能应该查看一个依赖注入框架来处理这个问题，例如[Castle Windsor](http://www.castleproject.org/container/index.html)。然后，您只需在其完整状态下构造对象，而不必担心所有依赖项都没有用于每次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T04:33:38.617

事件至少可以帮助您解耦其中的一部分。您可以让需要验证计划更改的其他服务注册到 ChangePlanRequestEvent，让每个服务执行必要的验证，并在不允许更改时抛出异常。现在你有问题了。计划的细节应该在计划对象中进行编码，除非您想显示它们，否则任何人都不需要可用计划的列表。

但是为什么会有 AccountService 呢？对我来说，为什么 ChangePlan 不是一种记账方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T15:35:26.483

> 所以现在我发现自己为 AccountService 创建了一个巨大的构造函数，其中包含 IAccountRepository、IPPlanService、IUsageService、IEcommerceService 和 IValidationDictionary 的实例。这感觉根本不对。

像这样的依赖关系不应该是一个大问题。您要注意的是 AccountService 中的大量方法。如果您有 100 行长的方法，那么可能是时候考虑重构并将 AccountService 分解为几个较小的服务了。

> 此外，为了避免在需要的任何地方实例化服务，我创建了一个名为 ServiceFactory 的静态类，它具有静态方法、CreateAccountService、CreatePlanService 等……我在应用程序周围调用这些方法。看起来不错，但我无法摆脱这种不合适的感觉。

您可以使用[Inversion of Control 容器](https://stackoverflow.com/questions/21288/which-c-net-dependency-injection-frameworks-are-worth-looking-into)来消除对这些工厂的需求。

除非您的对象非常大或在构造过程中加载数据（它们通常不应该这样做），否则构造一个类的新实例需要的时间非常少，不应该担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T10:30:49.023

I've been a little way down the same path as yourself on previous projects and I've yet to see a clean approach to solve the issue. I think the real answer is that SOA causes as many problems as it solves. The logic goes that by decoupling everything you can switch services and their implementations in/out easily. However, if the price that we pay for such a feature is code that turns into a spaghetti mess of interfaces, services, and injected dependencies then is the benefit worth the hassle - I say it's not.

My current approach to SOA is to approach with caution. We harvest services from conventionally written code once the the intent and implementation have settled down.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T06:51:50.570

您可以创建接受执行底层操作所需接口的重载构造函数吗？例如：

```
AccountService(IAccountRepository)
AccountService(IAccountRepository, IPlanService)
AccountService(IAccountRepository, IPlanService, IUsageService, IEcommerceService,IValidationDictionary) 
```

然后，帐户服务中的方法可以在对其进行操作之前断言特定接口引用不为空。

# c++ - 在游戏中组织实体的最佳方式？

> ID：764824
> 
> 赞同：15
> 
> 时间：2009-04-19T04:23:41.027
> 
> 标签：c++, opengl

假设我正在用 C++ 创建一个 OpenGL 游戏，它将创建许多对象（敌人、玩家角色、物品等）。我想知道组织这些的最佳方式，因为它们将根据时间、玩家位置/动作等实时创建和销毁。

到目前为止，这是我的想法：我可以有一个全局数组来存储指向这些对象的指针。这些对象的纹理/上下文被加载到它们的构造函数中。这些对象将具有不同的类型，因此我可以转换指针以将它们放入数组中，但我希望稍后有一个 renderObjects() 函数，该函数将使用循环为每个现有对象调用 ObjectN.render() 函数。

我想我以前试过这个，但我不知道用什么类型来初始化数组，所以我选择了一个任意的对象类型，然后转换任何不属于那种类型的东西。如果我记得的话，这是行不通的，因为如果编译器不再知道它们的类型，编译器不希望我取消对指针的引用，即使给定的成员函数具有相同的名称： (*Object5).render() <-doesn不行吗？

有没有更好的办法？像 HL2 这样的商业游戏如何处理这个问题？我想必须有一些模块等来跟踪所有对象。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-20T02:53:28.897

对于我即将成为个人游戏的项目，我使用基于组件的实体系统。

您可以通过搜索“基于组件的游戏开发”了解更多信息。一篇著名的文章是来自 Cowboy 编程博客的[Evolve Your Hierarchy 。](http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/)

在我的系统中，实体只是 ids - unsigned long，有点像在关系数据库中。与我的实体关联的所有数据和逻辑都写入组件。我有将实体 ID 与其各自的组件链接的系统。像这样的东西：

```
typedef unsigned long EntityId;

class Component {
    Component(EntityId id) : owner(id) {}
    EntityId owner;
};

template <typename C> class System {
    std::map<EntityId, C * > components;
}; 
```

然后针对每种功能，我编写一个特殊的组件。所有实体都没有相同的组件。例如，您可以有一个具有 WorldPositionComponent 和 ShapeComponent 的静态岩石对象，以及一个具有相同组件和 VelocityComponent 的移动敌人。这是一个例子：

```
class WorldPositionComponent : public Component {
    float x, y, z;
    WorldPositionComponent(EntityId id) : Component(id) {}
};

class RenderComponent : public Component {
    WorldPositionComponent * position;
    3DModel * model;
    RenderComponent(EntityId id, System<WorldPositionComponent> & wpSys)
        : Component(id), position(wpSys.components[owner]) {}
    void render() {
        model->draw(position);
    }
};

class Game {
    System<WorldPositionComponent> wpSys;
    System<RenderComponent> rSys;
    void init() {
        EntityId visibleObject = 1;
        // Watch out for memory leaks.
        wpSys.components[visibleObject] = new WorldPositionComponent(visibleObject);
        rSys.components[visibleObject] = new RenderComponent(visibleObject, wpSys);
        EntityId invisibleObject = 2;
        wpSys.components[invisibleObject] = new WorldPositionComponent(invisibleObject);
        // No RenderComponent for invisibleObject.
    }
    void gameLoop() {
        std::map<EntityId, RenderComponent *>::iterator it;
        for (it = rSys.components.iterator(); it != rSys.components.end(); ++it) {
            (*it).second->render();
        }
    }
}; 
```

这里有 2 个组件，WorldPosition 和 Render。Game 类包含 2 个系统。Render 组件可以访问对象的位置。如果实体没有 WorldPosition 组件，您可以选择默认值，或忽略实体。Game::gameLoop() 方法只会渲染可见对象。对不可渲染的组件没有处理浪费。

您还可以将我的 Game 类拆分为两个或三个，以将显示和输入系统与逻辑分开。模型、视图和控制器之类的东西。

我发现根据组件定义我的游戏逻辑并拥有只具有他们需要的功能的实体是很巧妙的——不再需要空的 render() 或无用的碰撞检测检查。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-19T05:17:26.577

我不确定我是否完全理解这个问题，但我认为您想要创建一个多态对象的集合。访问多态对象时，必须始终通过指针或引用来引用它。

这是一个例子。首先，您需要设置一个基类来派生您的对象：

```
class BaseObject
{
public:
    virtual void Render() = 0;
}; 
```

然后创建指针数组。我使用 STL 集，因为这样可以轻松地随机添加和删除成员：

```
#include <set>

typedef std::set<BaseObject *> GAMEOBJECTS;
GAMEOBJECTS g_gameObjects; 
```

要添加对象，请创建派生类并实例化它：

```
class Enemy : public BaseObject
{
public:
    Enemy() { }
    virtual void Render()
    {
      // Rendering code goes here...
    }
};

g_gameObjects.insert(new Enemy()); 
```

然后要访问对象，只需遍历它们：

```
for(GAMEOBJECTS::iterator it = g_gameObjects.begin();
    it != g_gameObjects.end();
    it++)
{
    (*it)->Render();
} 
```

要创建不同类型的对象，只需从类 BaseObject 派生更多类。当您从集合中删除对象时，不要忘记删除它们。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-19T05:59:24.637

我一直在接近它的方法是拥有一个对游戏世界本身一无所知的显示层。它唯一的工作是接收一个有序的对象列表以绘制到屏幕上，这些对象都适合图形对象的统一格式。例如，如果它是一个 2D 游戏，您的显示层将接收图像列表以及它们的缩放因子、不透明度、旋转、翻转和源纹理，以及显示对象可能具有的任何其他属性。视图还可能负责接收与这些显示对象的高级鼠标交互并将它们分派到适当的地方。但重要的是，视图层不知道任何关于它正在显示的东西的语义。只是它是某种具有表面积和一些属性的正方形。

然后下一层是一个程序，它的工作只是按顺序生成这些对象的列表。如果列表中的每个对象都有某种唯一的 ID，这将很有帮助，因为它使视图层中的某些优化策略成为可能。生成显示对象列表是一项比尝试为每种角色弄清楚其将如何物理呈现自身的艰巨任务。

Z 排序很简单。您的显示对象生成代码只需要按照您想要的顺序生成列表，您可以使用任何您需要的方式到达那里。

在我们的显示对象列表程序中，每个角色、道具和NPC都有两部分：资源数据库助手和角色实例。数据库助手为每个角色提供一个简单的界面，每个角色都可以从中提取角色需要的任何图像/统计/动画/排列等。您可能希望提供一个相当统一的接口来获取数据，但它会因对象而异。例如，一棵树或一块石头不需要像一个完全动画的 NPC 那么多的东西。

然后，您需要某种方式为每种类型的对象生成一个实例。您可以使用您的语言内置的类/实例系统来实现这种二分法，或者根据您的需要，您可能需要做一些超出此范围的工作。例如，让每个资源数据库都是资源数据库类的一个实例，每个字符实例都是“字符”类的一个实例。这使您不必为系统中的每个小对象编写大量代码。这样，您只需要为广泛的对象类别编写代码，并且只需要更改一些很小的事情，例如从数据库的哪一行获取图像。

然后，不要忘记有一个内部对象代表您的相机。然后，您的相机的工作就是查询每个角色相对于相机的位置。它基本上是围绕每个角色实例并询问其显示对象。“你长什么样子，你在哪里？”

反过来，每个角色实例都有自己的小资源数据库助手要查询。因此，每个角色实例都可以使用它需要告诉相机它需要知道的所有信息。

这会让你在一个世界中获得一组角色实例，这些实例或多或少地忽略了它们如何在物理屏幕上显示的细节，或多或少地忽略了如何从硬盘。这很好 - 它为您提供了一种柏拉图式的“纯粹”角色世界，您可以在其中实现游戏逻辑，而不必担心从屏幕边缘掉下来之类的事情。想一想如果您要将脚本语言放入您的游戏引擎中，您想要什么样的界面。尽可能简单吧？尽可能以模拟世界为基础，而不用担心很少的技术实现细节，对吧？这就是这个策略可以让你做的事情。

此外，关注点分离让您可以使用您喜欢的任何技术替换显示层：Open GL、DirectX、软件渲染、Adobe Flash、Nintendo DS 等等——而不必对其他层大惊小怪。

此外，您实际上可以换出数据库层来执行诸如重新设置所有角色的皮肤之类的操作 - 或者根据您的构建方式，在一个全新的游戏中更换新内容，该内容重用大部分角色交互/碰撞检测/路径您在中间层编写的查找器代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-19T05:20:09.630

您应该为所有具有通用 render() 方法的对象创建一个超类。将此方法声明为虚拟的，并让每个子类以自己的方式实现它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-20T02:54:07.973

> 有没有更好的办法？像 HL2 这样的商业游戏如何处理这个问题？我想必须有一些模块等来跟踪所有对象。

商业 3D 游戏使用[Scene Graph](http://en.wikipedia.org/wiki/Scene_graph)的变体。像 Adam 所描述的对象层次结构通常被放置在树结构中。要渲染或操作对象，您只需在树上行走。

有几本书讨论了这一点，我发现最好的是 3D 游戏引擎设计和架构，都是 David Eberly 的。

# html - MVC保留回车 - html中的换行

> ID：764827
> 
> 赞同：8
> 
> 时间：2009-04-19T04:26:00.103
> 
> 标签：html

如果我的数据库中有一个带有 crlf 的字段，我该如何在 HTML 中保存它？

有这样做的标准方法吗？

马尔科姆

编辑：如果可以的话，我实际上正在做一个 MVC 应用程序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-19T04:30:41.743

我认为最好的方法是`\r\n`用标签替换序列`<br />`，使用数据库支持的网站使用的任何脚本语言。

其他选项包括将文本放在`<textarea>`. 或者，如果它适合您的站点，则使用类似于`<pre>`标签（或 CSS 属性`white-space: pre`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T04:30:54.317

您可以搜索/替换这些字符`<br />`以使文本输出带有断线。您还可以使用`<pre>`标签来指定特定文本的换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T12:59:51.160

如果您使用的是 php，则可以使用[nl2br](http://www.php.net/manual/en/function.nl2br.php "nl2br")。如文档中所述，nl2br 在字符串中的所有换行符之前插入 HTML 换行符。它返回时在所有换行符（ *\r\n*、 *\n\r*、*\n*和*\r*`string` ）之前插入 '<br />' 或 '<br>' 。

 ***# c# - 使用 Linq-2-SQL 插入和更新

> ID：764829
> 
> 赞同：0
> 
> 时间：2009-04-19T04:29:50.497
> 
> 标签：c#, asp.net, linq-to-sql

只要我坚持只读操作，L2SQL 似乎就很棒。一旦我需要开始改变领域，事情就会变得有点棘手。

特别是，我遇到了两个不同的问题。

首先，我试图用任意数量的行填充一个表。架构大多无关紧要，但它确实有一个“BIGINT”主键，即标识列。

由于主键是一个身份，我没有在调用 Table.InsertOnSubmit() 或 Table.InsertAllOnSubmit() 之前设置它，并且我产生了 DuplicateKeyException：“无法添加具有已在使用中的键的实体。 "

我的第二个担忧源于需要一个与以下 SQL 语句等效的 LINQ：

```
UPDATE dbo.someTable SET someCol = 'someValue' WHERE pkValue = 20 
```

如果我先查询所需的行，然后在 DataContext.SubmitChanges() 之前更改 someCol 的值，一切都很好。但是，我正在寻找一种不需要我先查询该行的解决方案。换句话说，如果主键是一个已知的量，这怎么执行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T06:14:41.930

看看 Jose 指出的问题，我从中得到的是人们在尝试两次插入同一个对象时得到你得到的错误（这是有道理的——第一次插入会附加 ID，第二次更新然后将插入刚刚创建的 ID）；您是否有可能在提交时标记同一个对象以插入两次（或更多）？你说你要插入一个“任意数量的行”——你为什么不试着把它降到只有一个。

从本质上讲，Linq to SQL 应该处理您所说的情况 - Identity 列不应该填充值，您调用 InsertOnSubmit() 和 SubmitChanges 来获取它。

至于你的第二个问题，我认为 Linq to SQL 没有任何明确的方式来做你想做的事。可能最简单/最好的解决方案是拥有一个更新您想要的数据的存储过程，并使用 Linq to SQL 调用它（传递您想要更新的记录 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T07:37:09.893

我已经找到了我的问题的答案。

首先，我的重复键问题是由于我的表被设计器导入不当造成的。我从服务器资源管理器中删除了连接并从头开始并解决了这个问题。

其次，我确定以下代码示例解决了我的第二个问题：

```
using( var dc = new MyDataContext() )
{
   TableValue row = new TableValue();
   row.pkValue = 20;
   dc.TableValues.Attach(row); // DataContext thinks 'row' is the original.

   row.someCol = "Changed Value";  // DataContext formats an UPDATE statement
   dc.SubmitChanges();
} 
```

需要注意的是，我必须将所有表列的“更新检查”属性设置为“从不”，否则会引发异常。这让我感到有点不舒服，并让我相信这不是最好的解决方案，但这可能部分是因为我对“更新检查”属性的实际目的缺乏了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T06:21:16.550

对于您的第一个问题：您的 PK 是否由 DB 自动递增？

对于您的第二个问题，如果理解正确，以下内容应该会有所帮助（取自 MSDN FAQ on L2S）。您应该测试以下内容，因为我对 MSDN 有不好的体验；-)：

> 问：我可以在不先查询数据库的情况下更新表数据吗？
> 
> A. 虽然 LINQ to SQL 没有基于集合的更新命令，但您可以使用以下任一技术进行更新，而无需先查询：
> 
> 使用 ExecuteCommand 发送 SQL 代码。
> 
> 创建对象的新实例并初始化所有影响更新的当前值（字段）。然后使用 Attach 将对象附加到 DataContext 并修改要更改的字段。

我的注意事项：对于没有查询的更新，您必须确保 DataContext 没有加载相同的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-04T23:24:06.887

针对您的第二个问题：

```
DataContext.someTable.Where(a => a.pkValue == 20).SingleOrDefault().someCol = 'someValue';
DataContext.SubmitChanges(); 
```

# iphone - 您可以在 iPhone 上以编程方式在地址簿中设置联系人的图像吗？

> ID：764830
> 
> 赞同：1
> 
> 时间：2009-04-19T04:30:32.510
> 
> 标签：iphone, objective-c, cocoa-touch

我希望能够在 iPhone 上以编程方式设置联系人的默认图像。API 目前是否允许这样做？我发现您可以为该人切换多个属性，并创建新联系人。我似乎无法在允许设置照片的文档中找到任何地方。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T04:47:08.443

[ABPersonSetImageData](http://developer.apple.com/iphone/library/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABPersonSetImageData)是您正在寻找的。

# c++ - 用 C/C++ 编写隐写术应用程序

> ID：764833
> 
> 赞同：1
> 
> 时间：2009-04-19T04:31:43.660
> 
> 标签：c++, c, cryptography

我一直在阅读有关 steno 的信息。我已经看到了有助于在 .mp3 和 png 等中嵌入消息的工具。我熟悉它们通过替换最不重要的位来做到这一点。在图像中，这些 LIB 是人眼看不到的颜色；因此不需要。在音频文件中，人耳听不见的频率；也不需要。所以我的问题是，如何用 C 或 C++ 语言编写这样的程序，最好是在 Windows 环境中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T04:37:29.653

您的应用程序需要了解文件格式。您不能只更改 PNG 或 mp3 中随机单词的 LSB。一旦您可以读取和写回这些格式，分析数据，找出给定数据的 LIB（重要的是用户的感知，而不是架构的最不重要的位）在哪里，并将您的信息嵌入其中. 真的没有神奇的食谱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T04:34:54.993

任何文件都可以看作是字节流。对于每个字节，应用修改字节以保存速记位的转换，并将字节写入输出文件。

# php - php数据库同步

> ID：764836
> 
> 赞同：3
> 
> 时间：2009-04-19T04:35:06.540
> 
> 标签：php, mysql, schema, migration, mysqldump

我有一个本地服务器，我在其中进行所有测试和工作。完成后，我只需上传 db 架构以及相关代码即可。但是，当我对架构进行一些更改时，就会出现问题。我必须在我的实时服务器上手动输入“alter table”查询。

有没有办法获取数据库模式中发生的增量更改，以便我可以应用新的？还是我必须手动跟踪？

如果我使用 mysqldump，那么它会生成最终数据库的架构（而不是使用 alter table 等）。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T04:40:23.547

我将用于生产服务器的 delta sql 脚本与新代码一起保存。我编写所有内容，因此应用程序从版本 X 到版本 Y 的更改是“自动的”。[有些人还有撤消脚本](http://www.se-radio.net/podcast/2008-09/episode-109-ebay039s-architecture-principles-randy-shoup)，以防出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T04:40:45.637

存储您在开发中所做的更改，作为一个小组来测试这些更改如何？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T04:43:54.490

查看[Liquibase](http://www.liquibase.org/)。它是 Java，但运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T08:29:36.663

[MySQL Workbench](http://dev.mysql.com/downloads/gui-tools/5.0.html)允许您导出 ALTER 脚本（文件 -> 导出 -> Forward Engineer SQL ALTER 脚本）。您必须首先导入现有数据库并将您的修改应用到它。商业版本允许您对实时数据库进行逆向工程，而社区则可以导入 CREATE 脚本（这将是现有结构的简单转储）。[或者，您可以使用DBDesigner 4](http://www.fabforce.net/dbdesigner4/)对实时数据库进行反向工程，将所有内容保存到 XML 模型文件中，然后导入此文件，但您会丢失默认字符集等内容......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-07T05:53:20.317

您可以将此工具用于自动化过程^ [http://hg.antonoff.info/idler/mmp/wiki/Home](http://hg.antonoff.info/idler/mmp/wiki/Home)

仅要求 PHP（但版本 >= 5.3）

# java - java hashmaps的get()函数

> ID：764837
> 
> 赞同：18
> 
> 时间：2009-04-19T04:35:38.410
> 
> 标签：java, object, reference, hashmap

我已经声明了以下哈希图：

```
HashMap<Integer, Hive> hives 
```

Hive 是一个对象。

如果我调用“hives.get(2)”，它将返回该位置的对象 Hive 的副本还是对它的引用？

我的目标是修改该位置的 Hive 对象。如果它返回引用，我可以修改返回的配置单元并完成。但是，如果返回一个副本，那么我必须将该副本放回哈希图中。

对不起这个简单的问题。我尝试四处寻找解决方案，但在我所看到的任何地方，它都只是说将返回该值，并没有说明它是该值的副本还是对它的引用。

谢谢，赞恩

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-19T04:44:48.903

它返回一个引用。除非另有说明，否则您几乎可以假设是这种情况。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-19T04:45:00.273

您将获得对它的引用——Java 对象总是通过引用传递。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-19T05:13:37.740

在 Java 中，除了 byte、short、int、long、float、double 和 char 之外的所有内容都是通过引用传递的。以上类型是java中唯一的原始类型，并且是按值传递的。如果您想要按值复制，则需要在对象中创建自己的方法，该方法将返回自身的深层副本。

# unix - 将 --color 添加到所有 Unix 命令

> ID：764867
> 
> 赞同：1
> 
> 时间：2009-04-19T05:13:06.183
> 
> 标签：unix, shell

是否可以“别名”所有命令以附加--color？或者改为为每个支持它的程序自动激活它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T07:59:44.783

您应该小心这一点，尤其是在链接调用时。

```
grep --color=yes 'foo' bar.txt | less   #leads to weird ANSI stuff in output
grep --color=yes 'foo' bar.txt | less -R #binary codes interpreted as colors 
```

基本上，这可能会搞砸流水线...我建议使用彩色输出为单独的命令添加别名，以避免执行“cmd | myprog”并由于嵌入式 ANSI 而得到奇怪的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T07:55:47.023

shell 如何自动知道哪些程序支持 --color 选项？您必须给它一个列表，只要您要这样做，您还不如给它一个要运行的别名命令列表。我想它可以通过这样的方式（在bash中）以编程方式完成：

```
for cmd in ls blah foo; do
    alias "$cmd=$cmd --color"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T07:57:27.677

支持该选项的程序确实很少`--color`，而且它们实际上并不是由单个组织编写的。因此，他们不会为他们的选择引用一个中心位置。哎呀，甚至没有统一的参数集，所以`--color` 每个命令末尾的选项可能会造成很大的损害！

恐怕您必须一个一个地化名。例如，对于`ls`：

```
alias ls='ls --color' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-19T19:19:32.793

而不是尝试更改每个命令

为什么不改变控制台显示颜色的方式

# c# - C# 控制台应用程序 + 事件处理

> ID：764869
> 
> 赞同：6
> 
> 时间：2009-04-19T05:15:35.350
> 
> 标签：c#, event-handling, console-application

大家好。我正在尝试了解如何在控制台应用程序中处理事件。我宁愿不使用静默 WinForms（尽管我知道这是一种方法）来做到这一点。我已经阅读了一个类似的问题及其回复。请参阅下面的响应文本（[链接](https://stackoverflow.com/questions/687146/webbrowser-control-console-application-events-not-firing/687165#687165)）：

> STA 线程的基本要求是它需要运行消息泵。在 Windows 窗体中，您可以使用 Application.Run。或者您可以使用 user32!GetMessage 和 DispatchMessage 手动编写消息泵。但在 WinForms 或 WPF 中使用它可能更容易。

使用“user32 -> GetMessage”和“user32 -> DispatchMessage”的程序的基本结构是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T05:43:59.307

请参阅 MSDN 中的“使用消息和消息队列”主题（在 Win32 和 COM 开发 > 用户界面 > Windows 用户体验 > Windows 管理 > Windows 用户界面 > 窗口 > 消息和消息队列下；您可能需要查看同一节中的其他文章和示例）。快速总结，省略错误处理并使用 C 语法而不是 C#，原因如下所述：

```
RegisterClass(...);
CreateWindow(...);
ShowWindow(...);  // probably not in your case
while (GetMessage(&msg, NULL, 0, 0)) {
  TranslateMessage(&msg);
  DispatchMessage(&msg);
} 
```

从窗口设置样板中可以看出，这仍然依赖于“静默窗口”，尽管它是通过 Win32 API 而不是通过 WinForms 创建和发送消息的。所以你这样做并没有真正获得任何东西。因此，我觉得将这些东西翻译成 C# 并没有多大意义——如果您的问题的唯一解决方案是一个不可见的窗口，那么您不妨使用一个不可见的 Windows 窗体以及该平台附带的所有友好包装器。

但是，如果您实际上没有像链接问题的海报那样使用 Windows 窗体控件，那么您可以很高兴地在控制台应用程序中使用 .NET 事件。对 STA 的限制和对消息泵的需求特定于从 WinForms 和 ActiveX 控件（如 WebBrowser）接收事件（或来自 Win32 HWND 的消息，尽管这不一定需要 STA）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T06:21:47.017

你想处理什么样的事件？设置消息泵将允许您处理 Windows API 消息。但由于这是一个控制台应用程序，我想不出任何感兴趣的 Windows API 消息。

我们倾向于将“事件”视为与 Windows 消息相关联，因为 Windows 窗体应用程序中的控件使用 EventHandler 委托来响应用户输入，这些委托被调用以响应 Windows API 消息。但是，没有理由不能在控制台应用程序中使用委托。而且您不需要消息泵。您甚至可以使用 EventHandler 委托，尽管它看起来不合适，因为它不会响应 Windows API 消息。

当然，还有其他类型的“事件”您可能会感兴趣。涉及控制台应用程序的最常见的事件场景是等待来自控制台（stdin）的输入。如果有多个线程在使用，阻塞 WaitHandle 或其他同步对象也很常见。这两种情况都可以被认为是一种事件处理。

如果您创建了一个隐藏的窗口（一个由来已久的做法），您仍然需要一条 Windows 消息来响应。所以问题是：你试图回应什么或回应谁？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T13:05:11.413

我会使用 Application.Run 方法。我不认为它会自动创建一个隐藏窗口，它只是泵送消息，这是满足 STA 要求所需要的。

使用 PInvoke 编写您自己的消息泵并没有提供任何优势，并且引用 System.Windows.Forms 并没有太大的负担，因为它已经在您可能遇到的每台机器上。

# c# - 代码随机化

> ID：764870
> 
> 赞同：0
> 
> 时间：2009-04-19T05:16:32.540
> 
> 标签：c#, .net, dll

我正在尝试构建一个 ReTrust 系统，该系统需要将 DLL 文件从一个系统传输到另一个系统。因此，为了增加一点复杂性，我想随机化代码 - 即以每次我必须发送 DLL 的方式更改代码，它与之前发送的不同。请提出一些措施。（注意-这里的 DLL 是 .NET Dlls）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T05:45:51.923

您可以在编译之前对源代码文件进行预处理，以添加实际上不执行任何操作的随机数量的随机代码。在您希望插入垃圾代码的真实源代码中添加无害的注释会很简单。至于你不尝试做任何事情时所做的事情，我的建议是不要循环或等待太久，或者分配太多内存。我宁愿不关心二进制输出的大小，并让它变化很大。实现这一点的最简单和最有效的方法可能是只包含一些没有被调用的库，但由于没有被调用而没有得到优化。如果您优化了编译器，请快速调用一些东西，以便真正包含 lib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T09:23:03.383

你希望它每次有多大不同？您总是可以通过混淆器运行它吗？

# linux - 在 Linux 上安装 Oracle Instantclient 而不设置环境变量？

> ID：764871
> 
> 赞同：5
> 
> 时间：2009-04-19T05:16:35.003
> 
> 标签：linux, oracle, unix, instantclient

Oracle 的指令指定设置 LD_LIBRARY_PATH。这使得我的应用程序依赖于随机用户的配置，并且设置起来非常麻烦。

如何避免设置任何环境变量？

OS/X 的相关说明：[在 Mac OS/X 上安装 Oracle Instantclient 而不设置环境变量？](https://stackoverflow.com/questions/684352)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-19T05:19:28.290

Oracle 的 Instantclient 安装说明指定用户设置 LD_LIBRARY_PATH。这对于多个用户来说管理起来非常麻烦。

要在不设置任何环境变量的情况下使用 Instantclient：

从 oracle.com 下载 Instantclient 发行版。对于进行非 Java 软件开发，您将需要（假设 Oracle 10.2）：

```
instantclient-basic-linux-x86_64-10.2.0.4.0.zip
instantclient-sdk-linux-x86_64-10.2.0.4.0.zip
instantclient-sqlplus-linux-x86_64-10.2.0.4.0.zip 
```

解压这三个文件。这会给你一个目录

```
instantclient_10_2/ 
```

将文件复制到 /usr，这是动态加载程序搜索的默认位置之一。

```
sudo cp instantclient_10_2/sdk/include/*.h /usr/include
sudo cp instantclient_10_2/sqlplus         /usr/bin
sudo cp instantclient_10_2/*.so*           /usr/lib 
```

如果您使用 tnsnames.ora，请将其复制到 /etc，这是 oracle 运行时搜索的默认全局位置。

```
sudo cp tnsnames.ora /etc 
```

测试

```
/usr/bin/sqlplus scott/tiger@myoracle 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T20:00:19.053

将库路径添加到`/etc/ld.so.conf`，然后运行`/sbin/ldconfig`​​. 您不需要`LD_LIBRARY_PATH`为安装在标准位置的库进行设置，`/usr/lib`因为这些位置已经在`/etc/ld.so.conf`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-19T10:04:24.000

您当然可以将 sqlplus 重命名为 sqlplus.real 并制作一个包装脚本：

```
#!/bin/sh

if [ "$LD_LIBRARY_PATH" = "" ]
then
        LD_LIBRARY_PATH=/what/ever
else
        LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/what/ever
fi

export LD_LIBRARY_PATH

exec sqlplus.real ${1+"$@"} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-26T21:26:58.727

Oracle 关于设置的说明`LD_LIBRARY_PATH`不是最理想的。

在 Linux 或 Solaris 等 ELF 平台上，实际上不需要设置 ，`LD_LIBRARY_PATH`因为正确的库搜索路径（也称为运行路径）可以在构建时相对于二进制文件的位置写入二进制文件。因此，使用这样的二进制文件，运行时链接器总是能够找到打包的库，即使安装的子树被复制。

不幸的是，Oracle 并没有像这样创建 Linux 'Instant Client' 二进制文件。但是，可以使用[`patchelf`](https://nixos.org/patchelf.html).

例如：

```
patchelf --set-rpath '$ORIGIN/..' /path/to/instantclient_11_2/sdk/proc
patchelf --set-rpath '$ORIGIN'    /path/to/instantclient_11_2/sqlplus
patchelf --set-rpath '$ORIGIN'    /path/to/instantclient_11_2/libclntsh.so.11.1 
```

在这些更改之后，运行时链接器能够在没有任何`LD_LIBRARY_PATH`环境变量的情况下找到所有需要的库。

在 Solaris 上有`elfedit`- 但 IIRC 至少有一些适用于 Solaris 的 Oracle DB 包已经带有足够的运行路径。可以通过例如验证`elfdump /path/to/sqlplus | grep PATH`。

有关（不涉及更改二进制文件本身）的更多详细信息`elfedit`和其他好的替代方案，另请参阅我的文章[LD_LIBRARY_PATH 认为有害](https://gms.tf/ld_library_path-considered-harmful.html)。`LD_LIBRARY_PATH`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-05-04T10:23:28.923

或者您可以尝试使用此命令

*Linux*

```
sqlplus user/pass@'(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=hostname)(PORT=port_number)))(CONNECT_DATA=(SID=sid)))' 
```

*视窗*

```
sqlplus user/pass@"(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=hostname)(PORT=port_number)))(CONNECT_DATA=(SID=sid)))" 
```

所以你不需要 tnsnames.ora

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-16T02:41:09.660

对于来自 Linux 背景的任何使用 Solaris 的人（比如我！），我发现 @David Phillips 解决方案使用 Solaris 命令运行良好`crle -u -l /opt/instantclient`

感谢发帖[http://chrismiles.info/systemsadmin/solaris/articles/ld-path-customisation-on-solaris/](http://chrismiles.info/systemsadmin/solaris/articles/ld-path-customisation-on-solaris/)

# unix - 在 freeBSD unix 中分叉

> ID：764876
> 
> 赞同：0
> 
> 时间：2009-04-19T05:20:00.300
> 
> 标签：unix, process, freebsd

fork 系统调用是否为子进程分配了新的用户结构？它确实为子进程分配了新的进程结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T05:27:31.140

[http://svn.freebsd.org/base/release/7.1.0/sys/kern/kern_fork.c](http://svn.freebsd.org/base/release/7.1.0/sys/kern/kern_fork.c)

[http://www.freebsd.org/cgi/man.cgi?query=fork&apropos=0&sektion=0&manpath=FreeBSD+7.1-RELEASE&format=html](http://www.freebsd.org/cgi/man.cgi?query=fork&apropos=0&sektion=0&manpath=FreeBSD+7.1-RELEASE&format=html)

```
DESCRIPTION
     The fork() system call causes creation of a new process.  The new process
     (child process) is an exact copy of the calling process (parent process)
     except for the following:

       +o   The child process has a unique process ID.

       +o   The child process has a different parent process ID (i.e., the
           process ID of the parent process).

       +o   The child process has its own copy of the parent's descriptors.
           These descriptors reference the same underlying objects, so
           that, for instance, file pointers in file objects are shared
           between the child and the parent, so that an lseek(2) on a
           descriptor in the child process can affect a subsequent read(2)
           or write(2) by the parent.  This descriptor copying is also
           used by the shell to establish standard input and output for
           newly created processes as well as to set up pipes.

       +o   The child process' resource utilizations are set to 0; see
           setrlimit(2).

       +o   All interval timers are cleared; see setitimer(2). 
```

# language-agnostic - 当您有文件>>另存为...时，文件>>导出总是多余的吗？

> ID：764879
> 
> 赞同：1
> 
> 时间：2009-04-19T05:22:55.207
> 
> 标签：language-agnostic, user-interface

两者都保留更好吗？选择一个？你会使用什么标准来选择一个而不是另一个？如果您有一个必须命名的按钮，而不是用于存储它的菜单，“导出比另存为短”是否足以选择一个而不是另一个？ **编辑：**已经有文件>>保存或保存按钮会影响您的决定吗？我认为我在这里担心的是，在 As... 位中隐含了保存到另一个名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-19T05:29:20.200

不，它不是多余的。

“保存”应该是以不会导致数据严重丢失/降级的格式保存文件的主要方式。

对于预期会严重丢失保真度或信息的文件格式（例如，将电子表格导出为 txt 或 csv），我会使用“导出”。

查看逆操作（“打开”与“导入”）可能有用——我认为“打开”应该能够立即读取文件，而“导入”可能需要指定额外的选项来解析它（例如标记列或从 txt 文件中获取表格时使用的分隔符）。

导出/导入也可能暗示对格式的部分/不完全支持。当我使用保存/打开时，我希望能够将格式用作本机格式，而不会丢失数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T23:59:12.653

我不确定这在其他平台上是如何工作的，但在 Mac 上，基于文档的应用程序有以下明显区别，这与文件格式保真度无关：

**Save As...**导致所有后续**Save**覆盖您刚刚使用**Save As...**创建的文件，因此**Save As...**修改您正在使用的文档的位置并将其当前状态存储在新的位置，同时保持原件不变。

**导出**没有此效果，您只导出到特定路径一次，之后**保存**操作仍将保存到文档的位置，就像**导出**完成之前一样。

因此，即使在支持多种文件格式的应用程序中，例如 Excel，它允许您将**另存为... 保存**为不同保真度的各种格式，**导出**命令可能仍然有意义。事实上，它比将复杂的文档保存（作为）到 .CSV 更有意义，似乎保留了任何格式/图形/等。在文档中，同时影响任何后续保存以保存到同一个 lo-fi .CSV 文件。

总结：根本的区别不在于文件格式的保真度，或格式的“原生”程度，而是概念上的区别——正如我上面所描述的——导致在你的**Save中出现的文件格式（保真度）的条件上的逻辑区别作为...**选择，以及何时您可能希望将其归类为**导出**功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T05:26:50.797

在我使用的大多数应用程序中，另存为用于保存为本机格式，但导出用于保存为某种*有损*的格式，因为如果您重新打开文件（如果可能的话）一些用于创建它的信息将不再可用。

示例：假设您有一个生成音乐的程序。编辑器有一个乐谱和一些乐器可以演奏。您可以“另存为”并获得一个标准的 gmidi 格式文件，如果您想更改曲目，您可以稍后对其进行更多编辑。导出选项也将用于保存 MP3，但这不会让您之后更改文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T05:25:37.557

我通常会考虑使用“导出”功能来将文件写入与应用程序的“本机”格式不同的格式。例如，图像编辑应用程序可能具有“另存为”以将其另存为原生格式的不同文件，以及“导出”以将图像导出为 JPEG 或其他格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T05:27:10.813

我将 [导出] 视为更改保存数据的格式。而 [另存为] 将相同的格式保存到不同的位置。

显然，您可以通过指向[另存为]让您两者兼而有之的各种图像编辑程序来争论这一点。

# ruby-on-rails - 如何使用 Oracle 配置 Ruby on Rails？

> ID：764887
> 
> 赞同：15
> 
> 时间：2009-04-19T05:28:31.153
> 
> 标签：ruby-on-rails, ruby, oracle

网上有几个页面讨论了这个问题，但大多数都已过时或在某些方面不准确。

什么是独家新闻？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-19T05:50:08.653

## 构建 ruby​​、gem 和 rails

根据[http://rubyonrails.org/download](http://rubyonrails.org/download)：

```
build ruby
build gem
use gem to install rails 
```

## 获取 Oracle Instantclient

从 [https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html下载](https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html)

您的架构需要这两个包。

```
instantclient-basic
instantclient-sdk 
```

解压缩这些文件，并制作此链接

```
cd instantclient_10_2
# .dylib for mac, .so for linux
ln -s libclntsh.dylib.10.1 libclntsh.dylib 
```

## 构建 ruby​​-oci8

请注意，JRuby 用户不需要 ruby​​-oci8，但需要[Oracle JDBC jar](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html) ojdbc6.jar 或 ojdbc5.jar，具体取决于您使用的是 Java 6 还是 Java 5。

从[http://ruby-oci8.rubyforge.org/en/index.html](http://ruby-oci8.rubyforge.org/en/index.html)下载并运行

```
# DYLD for mac
export DYLD_LIBRARY_PATH=/path/to/instantclient_10_2
# LD for linux
export LD_LIBRARY_PATH=/path/to/instantclient_10_2
ruby setup.rb config
ruby setup.rb setup
ruby setup.rb install 
```

使用此行和您的数据库连接字符串进行测试。

```
ruby -r oci8 -e "OCI8.new('scott/tiger@orcl').exec('select * from user_tables') do |r| puts r.join(','); end" 
```

## 安装 activerecord-oracle_enhanced-adapter

请注意，***不是*** 许多旧页面提到**的 activrecord-oracle-adapter 。**

```
gem install activerecord-oracle_enhanced-adapter 
```

## 做那件甜蜜的事

```
rails railstest
cd railstest
# edit config/database.yml as below
ruby script/generate scaffold comic title:string issue:integer publisher:string
rake db:migrate
ruby script/server 
```

## 在浏览器中测试

```
<http://localhost:3000/comics> 
```

## 配置/数据库.yml

如果您有 TNS 条目，请使用*数据库，否则使用**主机*。请注意，您需要更新三个条目（开发、测试、生产）。

```
development:
    adapter: oracle_enhanced
    database: orcl           # format is tns-name entry
    host:  myorclhost/orcl   # format is hostname/instance-name
    username: scott
    password: tiger 
```

## 参考

*   [http://emphaticsolutions.com/2008/05/22/connecting-to-oracle-from-ruby-on-rails.html](http://emphaticsolutions.com/2008/05/22/connecting-to-oracle-from-ruby-on-rails.html)
*   [http://www.oracle.com/technology/pub/articles/saternos-ror-faq.html](http://www.oracle.com/technology/pub/articles/saternos-ror-faq.html)
*   [http://drawohara.com/post/37166893/rails-unsucking-oci-oracle-on-rails-2-1](http://drawohara.com/post/37166893/rails-unsucking-oci-oracle-on-rails-2-1)
*   [http://www.oracle.com/technology/pub/articles/haefel-oracle-ruby.html](http://www.oracle.com/technology/pub/articles/haefel-oracle-ruby.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T20:18:09.593

一些附加链接到以前的答案。

如果您使用的是 Mac，那么您可以按照教程[如何在 Mac OS X 上设置 Ruby 和 Oracle Instant Client](http://blog.rayapps.com/2008/04/24/how-to-setup-ruby-and-new-oracle-instant-client-on-leopard/)以从 Ruby 访问 Oracle 数据库。

然后，您可以阅读[ActiveRecord Oracle 增强适配器 wiki](http://wiki.github.com/rsim/oracle-enhanced)以在 Ruby on Rails 中获得 Oracle 连接。该适配器在 Oracle 项目中的许多 Ruby on Rails 中使用，并且正在积极维护中。

我还定期在我的[博客上](http://blog.rayapps.com)发布关于 Ruby 和 Oracle 的文章。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T21:23:49.633

就我而言，我已经在 Windows 7 上安装了 Ruby、gem、Rails 和 Oracle 客户端。我为 Windows 32 位安装了 ruby​​-oci8 二进制包：

来源：[http ://ruby-oci8.rubyforge.org/en/file.install-binary-package.html](http://ruby-oci8.rubyforge.org/en/file.install-binary-package.html)

```
gem install ruby-oci8
gem install --platform x86-mingw32 ruby-oci8 
```

进而：

```
gem install activerecord-oracle_enhanced-adapter 
```

你已经准备好在 Oracle 上做 Rails 了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T08:47:16.193

只是反映当前版本的更新（截至撰写时：2015 年 8 月）：

*   安装`libaio`（在 Ubuntu/Debian Linux 上可能使用`apt-get install libaio-dev`- 0.3.109-4）
*   下载 Oracle Instant Client（12.1.0.2.0，Basic + SDK 应该够用了，不过还没试过用 Basic Lite 代替 Basic）
*   设置环境变量（适合您的需要）：

    ```
    export LD_LIBRARY_PATH=/path/to/the/Instant/Client/directory
    export NLS_LANG="German_Germany.WE8ISO8859P1" 
    ```

*   Ruby (2.2.1p85)、gem (2.4.6)、Rails (4.2.3)、ruby-oci8 (2.1.8, [https://github.com/kubo/ruby-oci8](https://github.com/kubo/ruby-oci8) ) 和 activerecord-oracle_enhanced-adapter ( 1.6.2，[https://github.com/rsim/oracle-enhanced](https://github.com/rsim/oracle-enhanced)）可以按照通常的方式安装（我`rvm`为此使用（1.26.11）- [https://rvm.io/](https://rvm.io/)），所以基本上应该这样做三颗宝石的工作：

    ```
    gem install rails ruby-oci8 activerecord-oracle_enhanced-adapter 
    ```

*   创建您的 Rails 应用程序

*   配置您的 Rails 应用程序：

    *   在`Gemfile`添加`activerecord-oracle_enhanced-adapter`和`ruby-oci8`：

        ```
        gem 'activerecord-oracle_enhanced-adapter'
        gem 'ruby-oci8' 
        ```

    *   在`config/database.yml`添加您的 Oracle 环境中：

        ```
        development:
          adapter: oracle_enhanced
          host: my-db-host
          port: my-port
          database: my-db
          username: my-user
          password: my-password 
        ```

    *   让 Bundle 抢夺宝石: `bundle install`:

        ```
        ...
        Using activerecord-oracle_enhanced-adapter 1.6.2
        ...
        Using ruby-oci8 2.1.8
        ... 
        ```

    *   准备隆隆声：

        ```
        rails generate scaffold book title:string author:string
        rake db:create db:migrate
        ... 
        ```

*笔记：*

根据您的 Oracle 环境（即`my-user`已经存在或必须创建），您可以省略`db:create`或不省略该语句。在后一种情况下，`rake`提示您输入 SYS/SYSTEM 密码，以便能够创建用户并授予其相应的权限。

# c++ - 指针问题

> ID：764890
> 
> 赞同：0
> 
> 时间：2009-04-19T05:29:26.643
> 
> 标签：c++, pointers

有人知道如何将指针存储在多维数组中吗？我认为这可能是我主要遇到的问题：

```
// main.cpp
#ifdef  _DEBUG
#define _CRTDBG_MAP_ALLOC
#include <iostream>
#include <fstream>
#include <string>
#endif
#include "Word.h"
using namespace std;

const int WORD_SZ = 100;
Word** g_wordArray;
int g_arrSz;

static char filePath[ FILE_PATH_SZ ] = {};
void FreeWordArray();

int main( const int argc, const char **argv )
{
    int 
        wrdCount = 0;
    char 
        usrMenuOption     = 0,
        getFirstLetter    = 0,
        tmpArray[WORD_SZ] = {},
        *getWord = new char;
    string 
        str, 
        str2;
    ifstream 
        inFile, 
        inFile2;
    do 
    {
        cout << "Please make a selection: \n\
a) Read a text file\n\
b) Remove words starting with letter\n\
c) Print words to console\n\
d) Quit\n";
        cin  >> usrMenuOption;
        switch( usrMenuOption )
        {
        case'A':
        case'a':
            cout << "Enter a file name: ";
            cin.sync();
            cin  >> filePath;
            inFile.open( filePath );
            if ( !inFile ) return -1;
            inFile >> tmpArray; // prime the eof flag.
            while ( !inFile.eof() )
            {   
                inFile >> tmpArray;
                wrdCount++;
                g_wordArray = new Word *[wrdCount];

            }
        inFile.close();
        inFile2.open( filePath );
        while( !inFile2.eof()  )
        {   
            inFile2 >> tmpArray;
            // supplies the member functions with information from the file
            g_wordArray[wrdCount] = new Word( tmpArray );
            g_wordArray[wrdCount]->GetFirstLetterLower();
            g_wordArray[wrdCount]->GetWord();
        }
        cout << wrdCount << " Words read from the file " << endl;
        inFile2.close();
        break;
        case'B':
        case'b':
        // information not found returning null
                g_wordArray[wrdCount]->GetFirstLetterLower();
        break;
        case'C':
        case'c':
                g_wordArray[wrdCount]->GetWord();
        break;
        case'D':
        case'd':
        cout << "Quit Requested. " << endl;
        break;
        default:
        cout << '"' << usrMenuOption << '"' << " Not Defined! " << endl;
        }

    } while ( usrMenuOption != 'D' && usrMenuOption != 'd' );

#ifdef _DEBUG
    _CrtDumpMemoryLeaks();
#endif
    cin.ignore();
    return 0;
}

void FreeWordArray()
{
    delete[ ] g_wordArray;
    return;
}

// Word.cpp
#define _CRT_SECURE_NO_WARNINGS // disable warnings for strcpy
#define ARRY_SZ 100
#include <iostream>
#include <fstream>
#include "Word.h"
#include <vector>

using namespace std;

// No paramaters.
// Is this what im missing?
// I just threw it in because of an error.
Word::Word() 
{
}

Word::Word( const char* word )
{
    ptr_ = new char[ strlen( word ) + 1 ];
    strcpy( ptr_, word  ); 
    len_ = strlen( ptr_ );
}

Word::~Word()
{
    delete[ ] ptr_;
    ptr_ = NULL;
    len_ = NULL;
}

char Word::GetFirstLetterLower()
{
    char myChar = tolower( ptr_[0] );
    return myChar;

}

char* Word::GetWord()
{
    Word *objectOne = new Word;
    objectOne->ptr_ = ptr_;
    strcpy( objectOne->ptr_, ptr_ );
    return objectOne->ptr_;
} 
```

我的目标是从我的文件中读取所有单词，`g_wordArray[wrdCount]->SomeFunction()`而不依赖于文件读取循环。

我一直在尝试做的事情：

*   在实现文件中的 : 下，每次都`getFirstLetterLower`将私有成员添加到一个新变量中。`char *_ptr`像`someCharVar[0] = firstWord`，`someCharVar[1] = secondWord`...

*   将文件的内容读入单个变量。在我需要的每种情况下循环遍历该变量。

我喜欢这个主意，但还没有弄清楚如何去做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T16:05:40.060

您对数组的索引总是错误的：

```
g_wordArray[wrdCount]->GetFirstLetterLower(); 
```

这里的 'wrdCount' 是 'g_wordArray' 中的元素数，因此生成的 'g_wordArray[wrdCount]' 正在访问数组末尾之外的元素。

请记住，C/C++ 数组从 0 开始索引，因此具有有效元素 0 -> (wrdCount -1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T07:25:17.020

请发布可以重现您的问题的最少代码。现在看起来很朦胧。我想这段代码有很多问题

```
 inFile >> tmpArray;     // prime the eof flag.
        while ( !inFile.eof() )
        {       
                inFile >> tmpArray;
                wrdCount++;
                g_wordArray = new Word *[wrdCount];

        } 
```

您在这里严重泄漏内存。先前分配的“g_wordArray”会发生什么？

此外，当您分配“n”个元素时，您无法访问“第 n 个”索引。内存占用范围为 0 - (n-1)。

```
g_wordArray[wrdCount] 
```

请重新检查代码，尝试调试，然后发布最少的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-19T07:30:50.343

IIUC，您正在尝试读取文件并可选择删除一些以特定字母开头的单词。这是一个简短的示例，***甚至没有基本的错误处理***，关于如何使用 STL 和一些模板实现相同的目的：

```
#include <iterator>
#include <string>
#include <vector>
#include <algorithm>
#include <fstream>
#include <iostream>

struct starts_with {
    char mC;
    starts_with(char c) : mC(c) {}
    bool operator()(std::string const& s) { return s[ 0 ] == mC; }
};

// uses commandline parameters for input arguments
// usage:
//    ./test.exe "path/to/file" letter
// 
// (assumes the file to be read is the first such parameter
// the character to be checked for is the second parameter)
int main(int argc, char *argv[ ]) {
    using namespace std;
    vector<string> v;
    ifstream fStm(argv[ 1 ]);
    istream_iterator<string> b(fStm), e;

    remove_copy_if(b, e, back_inserter(v), starts_with(argv[ 2 ][ 0 ]));

    copy(v.begin(), v.end(), ostream_iterator<string>(cout, "\n"));

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T16:01:07.700

这是读取文件的常见反模式。
请注意，当您在循环内将单词读入 tmpArray 时检测到文件结尾 (EOF) 时，wrdCount 始终为一。

```
inFile >> tmpArray;     // prime the eof flag.
while ( !inFile.eof() )
{       
    inFile >> tmpArray;
    wrdCount++;
    g_wordArray = new Word *[wrdCount];
} 
```

改用这个：

```
/*
 * The result of the >> operator is a reference to a stream.
 *
 * When a stream is used in a boolean context (like a while loop)
 * it has a cast method that automatically returns an object
 * of a type that can be used as a boolean.
 *
 * The value of the boolean will be true if the file is still valid
 * and false if something went wrong (like reading past the end of file).
 *
 * So the loop will NOT be entered when you read past the EOF but will
 * be entered for every valid word that is read from the file.
 */
while ( inFile >> tmpArray )
{       
    wrdCount++;
    g_wordArray = new Word *[wrdCount];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T16:11:23.977

您到处都在泄漏内存。
您应该尝试使用 STL 标准容器来处理此类事情。

```
Word** g_wordArray; 
```

这可能会更好地表示为：

```
std::vector<Word>  g_wordArray; 
```

然后不是像这样为数组分配空间：

```
g_wordArray = new Word *[wrdCount];
-----
g_wordArray.reserve(wrdCount); 
```

最后添加新元素的变化在于：

```
g_wordArray[wrdCount] = new Word( tmpArray );
g_wordArray[wrdCount]->GetFirstLetterLower();
g_wordArray[wrdCount]->GetWord();

------

g_wordArray.push_back(Word( tmpArray ));
g_wordArray[wrdCount].GetFirstLetterLower();    // Note we use . not ->
g_wordArray[wrdCount].GetWord(); 
```

现在您的代码不再使用任何讨厌的新运算符，因此您不会泄漏任何内存。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-19T05:51:54.543

你的问题到底是什么？你在哪里得到错误？

您是否考虑过`main()`缩短工作时间并将工作放在其他功能中？这段代码很难阅读。此外，do...while 循环确实不好用，请考虑改用 while 循环。您将需要某种布尔值，但为了可读性，这是值得的。

# asp.net - 在 Visual Studio 2005 中使用 Silverlight 控件创建 ASP.net 网站

> ID：764893
> 
> 赞同：0
> 
> 时间：2009-04-19T05:33:41.063
> 
> 标签：asp.net, silverlight, visual-studio-2005

我只有 Visual Studio 2005。是否可以在**Visual Studio 2005**中创建带有 silverlight 控件的 asp.net 网站。

如果是的话，我需要安装什么并提供样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T05:49:56.937

[即可获得VS2008速成版](https://stackoverflow.com/questions/598812/silverlight-and-vs-2005-or-vs-2008-express-edition/599784)

或尝试关注仅涉及 SL 1.1[的旧博客文章](http://weblogs.asp.net/mschwarz/archive/2007/06/04/silverlight-with-visual-studio-net-2005.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-10T08:44:16.690

据我所知，您将需要带有 SP1 的 Visual Studio 2008 才能使用 silvrlight 控件

# c# - 跟踪 DLL 依赖项以将本机 C++ DLL 包装到 .NET

> ID：764898
> 
> 赞同：5
> 
> 时间：2009-04-19T05:40:32.013
> 
> 标签：c#, dll, interop, c++-cli

我有一个要向 .NET 应用程序公开的 C++ DLL（无代码）。

在考虑了我拥有/知道/可以找到的所有选项（COM、P/Invoke、SWIG 等）之后，我正在编写一个 .NET 类库（在 C++/CLI 中）。现在生成的 DLL（类库）也需要原始 DLL 及其依赖项。我的问题在于自动跟踪这些事情，以便使用包装器的应用程序不必跟踪其他（本机）DLL（特别是如果原始 DLL 开发了新的依赖项）。

更准确地说（并且有一些具体的讨论），我正在尝试包装`cmr`，所以我编写`MR`了类库（这`cmr`自然取决于）。`cmr`取决于`PNL`、`OpenCV`和其他。当我尝试`MR`在 (C#) 项目中添加对的引用时，Visual Studio (2005 SP1) 只是复制`MR.DLL`了 ，留下了所有依赖项，然后抱怨（抛出`FileNotFoundException`关于缺少模块的信息）。`cmr`手动将,`PNL`等复制到`bin`目录修复了问题。

事不宜迟，我的问题是：.NET 应用程序有没有办法只添加对一个 DLL 的引用，并且一切*正常*？

我一直在搜索谷歌和SO，但无济于事......

**编辑**：mergebin 似乎最接近我正在寻找的东西，但它只能将 .NET DLL 与一个本机 DLL 合并。太糟糕了，不能合并本机 DLL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-19T08:39:08.043

您可能会看一下[mergebin](http://www.koushikdutta.com/2008/09/day-6-mergebin-combine-your-unmanaged.html)，这是一种允许您将非托管和托管 DLL 组合到一个程序集中的工具。[System.Data.SQLite](http://sqlite.phxsoftware.com/)使用这种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-08T06:01:38.030

我目前有一个非常相似的问题。

实现我的目标的一大步是通过 C++/CLI 项目中的预构建步骤将 Native .DLL 复制到输出目录中并添加链接器选项

```
/ASSEMBLYLINKRESOURCE:"$(OutDir)\Native.dll" 
```

这会在生成的程序集中写入一个属于该程序集的文件“Native.dll”。现在所有引用该项目/程序集的项目也将复制 Native.dll！（如果你在那里组装，它也应该进入 GAC - 我没有检查）。

好的，您仍然需要添加所有依赖的 native.dll。如果您通过 Assembly.LoadFrom() 从一个非常不同的路径加载程序集，我也不知道是否在运行时找到本机 DLL（这是我必须解决的问题，因为我们的 C++/CLI 包装程序集Visual Studio 设计器需要）。

我希望这对您有所帮助。

**编辑：**

Further investigations showed that the Wrapper .DLL always finds the native .DLL...that's the good thing. The bad thing is that the Visual Studio Designer copies the needed assemblies to a temporary directory (somewhere inside the user directory) when you open a form. When it copies the assemblies it ignores the linked resources and by this the native .DLL!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T06:04:37.633

听起来你有两个具体问题：

1.  如何在构建开始之前复制本机代码 dll
2.  如何动态找出需要复制的本机代码依赖项，以防它们发生变化。

对于 1)，您可以在 C# 项目中使用预构建步骤来调用自定义工具来复制正确的文件。

看起来 2) 已经[在 Stack Overflow 上得到了回答](https://stackoverflow.com/questions/450039/how-to-programmatically-get-dll-dependencies)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T08:03:20.580

好吧，作为构建过程的一部分，您可以简单地添加命令以自动将所需的 DLL 复制到正确的输出目录中。这是在 Visual Studio 中通过转到项目的属性来完成的。

项目 -> MyProjectName 属性... -> 构建事件

添加命令以将您需要的文件复制到 $(TargetPath) 中，您就完成了。

另一种选择是简单地将项目的当前工作目录（仅当您从 Visual Studio 中运行它时）设置为您需要的所有 DLL 所在的目录。在外部执行程序时，您仍然需要手动复制文件，但这会使开发更容易一些。

# mysql - Mysql Max 查询

> ID：764899
> 
> 赞同：1
> 
> 时间：2009-04-19T05:40:45.493
> 
> 标签：mysql, max

我有两张桌子：

```
teachers (teacher_id,teacher_name)
courses (teacher_id,course_id) 
```

我需要显示教师的姓名，教授最多课程数：

mysql> select teacher.teacher_name,tmp1.teacher_id,tmp1.cnt from (select max(tm p.cnt) as tmpMax from (select teacher_id,count(teacher_id) as cnt from course g roup by teacher_id) as tmp) as tmp2, (select teacher_id,count(teacher_id) as cnt from courses by teacher_id) as tmp1,teachers where tmp1.cnt = tmp2.tmpMax and teacher.teacher_id = tmp1.teacher_id;

我想出了上面的查询。这个问题有更简单的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T14:00:53.380

这应该有效：

```
select teacher_name
from teachers
where teacher_id IN
(
    select t.teacher_id
    from teachers t inner join courses c on t.teacher_id = c.teacher_id
    group by t.teacher_id
    having count(*) = 
    (
        select max(courses_per_teacher) from
        (
            select teacher_id, count(*) as courses_per_teacher
            from teachers t inner join courses c on t.teacher_id = c.teacher_id
            group by teacher_id
        )
    )
) 
```

伪代码中的逻辑：

*   查找 ID 所在的教师姓名 -->
*   课程数量为的教师组 -->
*   等于最大数量 -->
*   每位教师的课程数量列表

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-19T05:50:09.277

SELECT teacher_id, teacher_name, COUNT(1) AS course_count
FROM Teachers
WHERE course_count = (SELECT MAX(COUNT(1)) FROM courses GROUP BY teacher_id)
GROUP BY teacher_id

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-19T06:20:03.883

试一试：

```
select a.teacher_name as 'Teacher', count(b.course_id) as 'Num of Courses'
from teachers a
inner join courses b on a.teacher_id = b.teacher_id
group by b.teacher_id
order by count(b.course_id) desc 
```

*编辑* 以下内容将为您提供与查询完全相同的结果：

```
select a.teacher_name as 'Teacher', a.teacher_id as 'Teacher Id', count(b.course_id) as 'Num of Courses' 
from teachers a 
inner join courses b on a.teacher_id = b.teacher_id 
group by b.teacher_id 
order by count(b.course_id) desc 
limit 1 
```

# ruby-on-rails - 如何显示给定用户对我的评论的 vendor_id？

> ID：764902
> 
> 赞同：0
> 
> 时间：2009-04-19T05:42:50.603
> 
> 标签：ruby-on-rails

我正在尝试编写一个简单的应用程序，但我很难过！

这是我对 users/show/1 的看法：

```
<p>
  <b>User:</b>
  <%=h @user.login %>
</p>

    <% if @user.reviews.empty? %>
        No Analyst Reports yet
    <% else %>
        <% for review in @user.reviews %>
            <%= review.vendor_id %><%= review.summary %><br />
            <hr class="span-5" />

        <% end %>
    <% end %> 
```

我创建了一个关系，其中用户：has_many 评论和供应商：has_many 评论

所以我假设review.vendor_id应该有一个值，其中vendor_id只是自动创建的，可以显示。

谢谢 ：）

这是我的评论模型：

```
class Review < ActiveRecord::Base
  belongs_to :vendor
  belongs_to :user

end 
```

实际上这已经解决了，我现在需要通过for循环并显示供应商的属性......请看我的另一个问题！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T17:34:42.077

您的评论模型是否具有相应的 belongs_to :user belongs_to :vendor - ？

另外，创建评论时，您是否检查过 vendor_id 是否已填写？检查这个问题： [创建 ActiveRecord 对象时如何设置属性？](https://stackoverflow.com/questions/753379/how-do-you-set-an-attribute-when-creating-an-activerecord-object)

# sql - 传递表格数据的二进制格式

> ID：764907
> 
> 赞同：4
> 
> 时间：2009-04-19T05:48:18.593
> 
> 标签：sql, c, database, embedded, protocols

我正在维护一个与现实世界交互的遗留嵌入式设备。一般来说，该设备从传感器收集数据，使用其内部算法对数据进行处理，并在数据达到某种“坏”状态时显示警告。

出于调试目的，我们希望该设备能够定期向我们发送它接收到的许多数据，以及处理后的数据。

我们得出的结论是，大多数数据可以用表格形式描述，类似于

```
sensor|time|temprature|moisture
------+----+----------+--------
1     |3012|20        |0.5
2     |3024|22        |0.9 
```

我们显然需要支持不止一种表格形式。

所以基本上我们需要一个协议，能够接受一组表描述，然后根据它的描述传递表数据。

发送数据的示例伪代码是：

```
table_t table = select_table(SENSORS_TABLE);
sensors_table_data_t data[] = {
    {1,3012,20,0.5},
    {1,3024,22,0.9}
    };
send_data(table,data); 
```

用于接收数据的示例伪代码是：

```
data_t *data = recieve();
switch (data->table) {
    case SENSORS_TABLE:
         puts("sensor|time|temprature|moisture");
         for (int i=0;i<data->length;i++) printf(
             "%5s|%4s|%9s|%9s\n",
              data->cell[i]->sensor,
              data->cell[i]->time,
              data->cell[i]->temprature,
              data->cell[i]->moisture);
         break;
    case USER_INPUT_TABLE:
         ...
} 
```

定义表格既可以在设备上也可以在与其通信的客户端计算机上离线完成，也可以在线完成。我们可以添加一个简单的握手协议来在设备启动时就表格的格式达成一致。

由于这是一个遗留设备，它只支持 RS232 通信，并且由于它的 CPU 非常慢（相当于 486），我们无法使用任何类似 XML 的数据传输方法。这些太昂贵了（无论是计算时间还是带宽）。由于带宽考虑，发送原始 SQL 命令也被考虑并拒绝。

**[编辑]**

为了澄清，也减少了每次发送表头的开销，我试图避免每次发送数据时发送表头。所以每次我发送一个表格行时，我只需要发送表格 ID。

我还想指出，我希望传递的大部分数据都是数字的，因此基于文本的协议太浪费了。

最后我看到了谷歌的协议缓冲区，它足够接近但它不支持 C。

**[/编辑]**

关于我所描述的已知协议或实现的任何想法？发送此数据有更好的主意吗？

我知道这个协议并不是很难设计，我想到了一个两阶段协议：

1）握手：发送您希望填写的所有表格的标题。每个表描述将包括有关每列大小的信息。

2）数据：发送表索引（根据握手），后面跟着实际数据。数据后跟校验和。

但我希望避免这种设计的小细节，并使用一些现成的协议。或者更好的是，使用可用的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T06:05:12.140

我不知道有任何协议可以做到这一点（可能有一个，但我不知道。）

我相信您已经想到了这一点：为什么不将*格式*也作为二进制数据流传递呢？

伪代码：

```
struct table_format_header {
  int number_of_fields; /* number of fields that will be defined in table */
                        /* sent before the field descriptions themselves  */
};

struct table_format {
   char column_name[8];   /* name of column ("sensor");  */
   char fmt_specifier[5]; /* format specifier for column */

   ... (etc)
} 
```

然后您可以计算字段/列（以某种方式），传输`header`结构以便接收者可以分配缓冲区，然后迭代地传输`table_format`每个字段的结构。该结构将包含您需要的与该标头有关的所有信息 - 名称、字段中的字节数等等。如果空间真的很狭窄，您可以使用位域 ( `int precision:3`) 来指定不同的属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T08:25:41.587

**您可能想尝试协议缓冲区。**

```
http://code.google.com/p/protobuf/ 
```

> 协议缓冲区是一种以高效且可扩展的格式对结构化数据进行编码的方法。Google 几乎所有内部​​ RPC 协议和文件格式都使用协议缓冲区。

基于 rascher 的评论，protobufs 编译格式，因此传输和接收效率非常高。如果您以后想添加/删除字段，它也是可扩展的。并且有很棒的 AP​​I（例如 protobuf python）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T08:47:33.170

如果您的所有数据都是恒定长度的，那么它们之间不需要任何分隔符。所以你可以直接发送二进制内容。例如，该行：

```
sensor|time|temprature|moisture
------+----+----------+--------
1     |3012|20        |0.5 
```

将被发送为：

```
0x01 0x0B 0xC4 0x14 [4 bytes for float 0.5] 
```

我假设传感器和温度用一个字节表示，时间用两个字节表示，湿度用 4 个字节（浮点数）表示。您不需要发送标头。

现在每一行的长度都是恒定的，接收器必须完成转换工作。嵌入式设备可以轻松地以这种格式发送数据。

现在，还存在将数据封装在消息中的问题，以便接收者知道消息何时开始。您通常通过添加页眉和页脚来做到这一点：

```
[STX] message [ETX] 
```

通常使用 ASCII 字符 STX 和 ETX（我认为是 0x02 和 0x03）。问题是这些值也可能出现在消息正文中。因此，您需要在传输中添加另一层。当要发送字节 0x02 或 0x03 时，发送两次。在接收器上，单个 0x02 字节表示消息的开始。必须删除消息正文中额外的 0x02 和 0x03 字节。

最后，如果通信链路不可靠，还需要添加校验和。

这些技术通常由 PPP 等串行协议使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T07:31:44.523

在嵌入式工作中，一般建议嵌入式设备做的工作越少越好，让客户端计算机利用自身的速度和工具的可用性。鉴于您的示例，我可以收集数据，然后格式化表格，只需查看我收到的数据的最大大小或列标题的最大大小（我的选择）。并且由于它是调试信息，因此如果表大小从一个集合更改为下一个集合，则无关紧要。或者，您的设备可以仅通过发送标题标签来“强制”列大小，或者它甚至可以传输第一行虚拟数据，其中所有数据都为零，但具有所需的格式和长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-19T09:23:57.030

我会投票支持 CSV（有关 CSV的最佳描述，请参阅[RFC 4180 ），因为它是最简单的格式（请参阅 gbarry 的答案）。](http://www.ietf.org/rfc/rfc4180.txt)

如 RFC（第 2 节，第 3 项）中所述，您将需要一个带有列名的可选标题。

在 CSV 发件人中要注意的主要问题就是转义“特殊”字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T17:10:19.273

正如有人所说：

```
[header][data][checksum] 
```

但是，如果您想扩展它，您可以使用：

```
[header][table_id][elements][data][checksum]

[header]   : start of frame
[table_id] : table
[elements] : payload size
[data]     : raw data
[checksum] : checksum/crc, just to be on the safe side 
```

您可以使用“元素”作为固定大小数据的数量，甚至可以使用“数据”段中的字节数。

在屏幕上查看数千个十六进制字符时，标题和校验和可以让您的生活更轻松。

编辑：

标头是告诉主机程序消息已经开始/结束的好方法。你有想过吗？

另一方面，您必须以统计方式考虑标题的使用。每 10 个字节 4 个字节是 40%，但在 256 个字节中只有 1.6%。所以，相应地调整大小。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T12:19:46.913

我知道您说过您不想使用文本，但您应该考虑使用 B64。这允许直接且相对有效的二进制到文本和返回到二进制的转换。开销是 1/3。每三个字节的二进制转换为四个字节的文本值。转换为文本后，您可以使用简单的数据样式协议。在发送设备上，您只需要实现编码器。请参阅下面的完整代码：

```
/********************************************************************/
/*                                                                  */
/* Functions:                                                       */
/* ----------                                                       */
/* TBase64Encode()                                                  */
/* TBase64Decode()                                                  */
/* TBase64EncodeBlock()                                             */
/* TBase64DecodeBlock()                                             */
/*                                                                  */
/********************************************************************/

#include "yourstuff.h"

// This table is used to encode 6 bit binary to Base64 ASCII.
static char Base64Map[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdef"
                          "ghijklmnopqrstuvwxyz0123456789+/";

// This table is used to decode Base64 ASCII back to 6 bit binary.
static char Base64Decode[]=
{
    62,                                         // '+'
    99, 99, 99,                                 // **** UNUSED ****
    63,                                         // '/'
    52, 53, 54, 55, 56, 57, 58, 59, 60, 61,     // '0123456789'
    99, 99, 99, 99, 99, 99, 99,                 // **** UNUSED ****
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9,               // 'ABCDEFGHIJ'
    10, 11, 12, 13, 14, 15, 16, 17, 18, 19,     // 'KLMNOPQRST'
    20, 21, 22, 23, 24, 25,                     // 'UVWXYZ'
    99, 99, 99, 99, 99, 99,                     // **** UNUSED ****
    26, 27, 28, 29, 30, 31, 32, 33, 34, 35,     // 'abcdefghij'
    36, 37, 38, 39, 40, 41, 42, 43, 44, 45,     // 'klmnopqrst'
    46, 47, 48, 49, 50, 51                      // 'uvwxyz'
};

/** Convert binary data to Base64 data.
 *
 * @return  Size of output buffer if ok, -1 if problem (invalid paramaters).
 *
 * @param   input  - Pointer to input data.
 * @param   size   - Number of bytes to encode.
 * @param   output - Pointer to output buffer.
 *
 * @note    Up to caller to ensure output buffer is big enough. As a rough
 *          guide your output buffer should be (((size/3)+1)*4) bytes.
 */
int TBase64Encode( const BYTE *input, int size, PSTR output)
{
    int i, rc=0, block_size;

    while (size>0)
    {
        if (size>=3)
            block_size = 3;
        else
            block_size = size;

        i = TBase64EncodeBlock( input, block_size, output);

        if (i==-1)
            return -1;

        input += 3;
        output += 4;
        rc += 4;
        size -= 3;
    }

    return rc;
}

/** Convert Base64 data to binary data.
 *
 * @return  Number of bytes in output buffer, negative number if problem
 *          as follows:
 *           -1 : Invalid paramaters (bad pointers or bad size).
 *           -2 : Outside of range value for Base64.
 *           -3 : Invalid base 64 character.
 *
 * @param   input  - Pointer to input buffer.
 * @param   size   - Size of input buffer (in bytes).
 * @param   output - Pointer to output buffer.
 *
 * @note    Up to caller to ensure output buffer is big enough. As a rough
 *          guide your output buffer should be (((size/4)+1)*3) bytes.
 *          NOTE : The input size paramater must be multiple of 4 !!!!
 *          Note that error codes -2 and -3 essentiallty mean the same
 *          thing, just for debugging it means something slight different
 *          to me :-). Calling function can just check for any negative
 *          response.
 */
int TBase64Decode( CPSTR input, int size, BYTE *output)
{
    int output_size=0, i;

    // Validate size paramater only.
    if (size<=0 || size & 3)
        return -1;

    while (size>0)
    {   
        i = TBase64DecodeBlock( input, output);
        if (i<0)
            return i;

        output_size += i;
        output += i;
        input += 4;
        size -= 4;
    }

    return output_size;
}

/** Convert up to 3 bytes of binary data to 4 bytes of Base64 data.
 *
 * @return  0 if ok, -1 if problem (invalid paramaters).
 *
 * @param   input  - Pointer to input data.
 * @param   size   - Number of bytes to encode(1 to 3).
 * @param   output - Pointer to output buffer.
 *
 * @note    Up to caller to ensure output buffer is big enough (4 bytes).
 */
int TBase64EncodeBlock( const BYTE *input, int size, PSTR output)
{
    int i;
    BYTE mask;
    BYTE input_buffer[3];

    // Validate paramaters (rudementary).
    if (!input || !output)
        return -1;
    if (size<1 || size>3)
        return -1;

    memset( input_buffer, 0, 3);
    memcpy( input_buffer, input, size);

    // Convert three 8bit values to four 6bit values.
    mask = input_buffer[2];
    output[3] = mask & 0x3f;            // Fourth byte done...

    output[2] = mask >> 6;
    mask = input_buffer[1] << 2;
    output[2] |= (mask & 0x3f);         // Third byte done...

    output[1] = input_buffer[1] >> 4;
    mask = input_buffer[0] << 4;
    output[1] |= (mask & 0x3f);         // Second byte done...

    output[0] = input_buffer[0]>>2;     // First byte done...

    // TEST
//  printf("[%02x,%02x,%02x,%02x]", output[0], output[1], output[2], output[3]);

    // Convert 6 bit indices to base64 characters.
    for (i=0; i<4; i++)
        output[i] = Base64Map[output[i]];

    // Handle special padding.
    switch (size)
    {
        case 1:
            output[2] = '=';
        case 2:
            output[3] = '=';
        default:
            break;
    }

    return 0;
}

/** Convert 4 bytes of Base64 data to 3 bytes of binary data.
 *
 * @return  Number of bytes (1 to 3) if ok, negative number if problem
 *          as follows:
 *           -1 : Invalid paramaters (bad pointers).
 *           -2 : Outside of range value for Base64.
 *           -3 : Invalid base 64 character.
 *
 * @param   input  - Pointer to input buffer (4 bytes).
 * @param   output - Pointer to output buufer (3 bytes).
 *
 * @comm    While there may be 1, 2 or 3 output bytes the output
 *          buffer must be 3 bytes. Note that error codes -2 and -3
 *          essentiallty mean the same thing, just for debugging it
 *          means something slight different to me :-). Calling function
 *          can just check for any negative response.
 */
int TBase64DecodeBlock( CPSTR input, BYTE *output)
{
    int i, j;
    int size=3;
    BYTE mask;
    BYTE input_buffer[4];

    // Validate paramaters (rudementary).
    if (!input || !output)
        return -1;

    memcpy( input_buffer, input, 4);

    // Calculate size of output data.
    if (input_buffer[3]=='=')
    {
        input_buffer[3] = 43;
        size--;
    }
    if (input_buffer[2]=='=')
    {
        input_buffer[2] = 43;
        size--;
    }

    // Convert Base64 ASCII to 6 bit data.
    for (i=0; i<4; i++)
    {
        j = (int) (input_buffer[i]-43);
        if (j<0 || j>79)
            return -2;          // Invalid char in Base64 data.
        j = Base64Decode[j];
        if (j==99)      
            return -3;          // Invalid char in Base64 data.

        input_buffer[i] = (char) j;
    }

    // TEST
//  printf("[%02x,%02x,%02x,%02x]", input_buffer[0], input_buffer[1], input_buffer[2], input_buffer[3]);

    // Convert four 6bit values to three 8bit values.
    mask = input_buffer[1] >> 4;
    output[0] = (input_buffer[0]<<2) | mask;    // First byte done.

    if (size>1)
    {
        mask = input_buffer[1] << 4;
        output[1] = input_buffer[2] >> 2;
        output[1] |= mask;              // Second byte done.

        if (size==3)
        {
            mask = input_buffer[2] << 6;
            output[2] = input_buffer[3] | mask;     // Third byte done.
        }
    }

    return size;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-20T05:09:59.537

串行计算的基础...

```
[header] [data] [check-sum] 
```

[data] 是最重要的部分，但 [header] 和 [checksum] 确实有助于解决奇怪的真实单词问题。无论多么小，总是尝试使用 [header] 和 [checksum]。

现在，通过制作大型数据链来减少 [header]、[checksum] 过载肯定会有所帮助。

读取数据后，通过在主机 PC（这将是您的调试 PC..）上执行任何操作，以任何格式**读取和显示数据**

# bash - 语法错误：文件结尾意外（期待“fi”）

> ID：764908
> 
> 赞同：20
> 
> 时间：2009-04-19T05:48:22.430
> 
> 标签：bash, makefile

我正在用 bash 编写一个 makefile，我有一个目标，我试图在其中查找文件是否存在，即使我认为语法正确，我仍然给我一个错误。

这是我要运行的脚本

```
read: 
        if [ -e testFile] ; then \ 
        cat testFile\ 
        fi 
```

我正在使用标签，所以这不是问题。

错误是（当我输入：“make read”）

```
if [ -e testFile] ; then \
        cat testFile \
        fi
/bin/sh: Syntax error: end of file unexpected (expecting "fi")
make: *** [read] Error 2 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-19T06:01:41.587

尝试在`cat testFile`. 例如：

```
read: 
    if [ -e testFile ] ; then  cat testFile ; fi 
```

或者：

```
read:
    test -r testFile && cat testFile 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-03-25T23:39:35.553

我遇到了同样的问题。这应该这样做：

```
file:
    @if [ -e scripts/python.exe ] ; then \
    echo TRUE ; \
    fi 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-02T21:04:37.320

从 GNU Make 3.82 开始，您可以`.ONESHELL:`在文件顶部添加以告诉 make 在单个 shell 中运行目标中的所有行。

```
.ONESHELL:
SHELL := /bin/bash

foobar:
    if true
    then
        echo hello there
    fi 
```

请参阅[文档](https://www.gnu.org/software/make/manual/html_node/One-Shell.html)。

在行`@`前添加或添加`.SILENT:`选项`.ONESHELL:`以抑制回显行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-18T02:38:32.187

我也遇到了这个问题。

原因是我在“\”之后添加了一些注释。

# c# - 将 perforce 数据导入 .NET 应用程序

> ID：764910
> 
> 赞同：0
> 
> 时间：2009-04-19T05:49:31.070
> 
> 标签：c#, .net, database, api, perforce

我很好奇，好像有人使用过任何方法将数据从 perforce 获取到托管语言中。我在那里找到了一些示例应用程序，我希望这里有人已经成功地做到了这一点并可以提供一些建议。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-20T22:29:11.830

我们在我们的应用程序中使用了[P4.NET 库](http://sourceforge.net/projects/p4dotnet/)。它工作正常，但是我们将它包装起来，因为界面难以使用。Perforce 不支持 P4.NET，并且可能缺少一些功能。

我曾考虑在 C++ 库上运行 SWIG 并创建一个我们自己的托管库，但没有机会（时间）这样做。

**编辑**只需重新阅读我的帖子，这绝对是胡言乱语。让我们再试一次...

我们在我们的应用程序中使用了 P4.NET 库，它工作正常。它的界面有点难看，我们编写了一个包装器来隐藏它并公开我们想要的功能。无论如何，编写包装器是一个好主意，因为它为我们提供了将 VC 系统与 SVN 或 GIT 交换的选项/灵活性（如果你可以使用 Perforce，我不知道为什么你会这样做......）。

我已经简要介绍了针对 Perforce C++ 库运行 SWIG 并使用更简洁的界面创建我们自己的包装器的选项，但它并不是 P4.NET 工作的高优先级任务。

# testing - Perl、C#、C、Java 的 Lorem ipsum？

> ID：764914
> 
> 赞同：2
> 
> 时间：2009-04-19T05:51:16.077
> 
> 标签：testing, testcase

在代码可能存在的可视化测试界面中，您将什么用于您的特定语言的标准？在大多数情况下，“Hello World”不够复杂。我对 Perl 特别感兴趣，但 C#、C、C++ 和 Java 即将出现。

根据评论：

假设您创建了一个新的 IDE、配色方案或一个网页，您或其他人将在其中放置代码。你想看看你的改变是什么样子的，看起来像典型的代码。 [Lorem Ipsum](http://en.wikipedia.org/wiki/Lorem_ipsum)由类型设置程序使用，但它不是真正的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T07:03:51.440

我建议您为您感兴趣的每种此类语言创建一个代码示例，并将其保存在一个文件中。

例如`sample.c`, `sample.py`,`sample.java`等。

[Editra](http://editra.org/)使用这些文件来测试语法着色和东西。

[http://svn.wxwidgets.org/svn/wx/wxPython/3rdParty/Editra/tests/syntax/](http://svn.wxwidgets.org/svn/wx/wxPython/3rdParty/Editra/tests/syntax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T06:52:02.840

我可能会打开一个（嗯，几个）我的代码文件。因为它们包含我每天使用的那种代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T06:06:08.363

我认为您可能很难在一页上完全适应自己的身份。您应该确保使用所有关键字。查看[Perltidy Style Key](http://perltidy.sourceforge.net/stylekey.html)，因为这可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T06:19:41.217

快速维基百科搜索“<name of prog language> keywords”将为大多数包含关键字的文章提供不错的文章。

你可以测试的东西（我的头）：

算术运算符

对象创建和删除（如果支持）

类型声明

导入外部库或函数

# oracle - Oracle：什么是“instantclient”连接字符串格式？

> ID：764916
> 
> 赞同：5
> 
> 时间：2009-04-19T05:52:42.640
> 
> 标签：oracle, connection-string, instantclient

它与常规连接字符串有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T12:52:10.027

与即时客户端的连接与与全栈客户端的连接没有什么不同——所有连接字符串格式都是相同的。如果您将即时客户端安装在文件系统上的非标准位置或在连接到数据库侦听器时遇到问题，请确保您的 TNS_ADMIN 环境指向包含 tnsnames.ora 和 sqlnet.ora 文件的目录，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T06:23:12.223

[以下](http://www.connectionstrings.com/oracle)是 Oracle 连接字符串的完整列表 ( [http://www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T05:50:03.987

格式为：

```
name/pass@//host:1521/instance 
```

标准 Oracle 连接字符串通常看起来像

```
name/pass@tnsentry 
```

已通过文件`tnsentry`等多种方式之一定义的位置`tnsnames.ora`。如果您正在寻找更多详细信息，idstram 的答案有一个很好的指示。

# asp.net - url问题中的疯狂字符串

> ID：764917
> 
> 赞同：0
> 
> 时间：2009-04-19T05:52:42.717
> 
> 标签：asp.net

我正在研究asp.net 2.0。

目前我开始的项目已经有 80% 是由其他人开发的。

当涉及到我的手时，没有问题。

但是突然间我在 URL 中看到了一个问题，例如

```
http://localhost:1281/MyProject/(S(tvrt5hnlt5tlwemdyjwrobjw))/Admin/WelcomeAdmin.aspx 
```

所以项目文件夹和子文件夹或任何子文件之间有一个疯狂的字符串。

令人惊讶的是它没有影响我的项目。

但我想知道它来自哪里以及如何？有什么猜测吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-19T05:55:42.883

[这是无 cookie 的会话](http://msdn.microsoft.com/en-us/library/ms178582.aspx)。

# css - 在 IE 和 firefox 中工作的 CSS 页脚

> ID：764920
> 
> 赞同：1
> 
> 时间：2009-04-19T05:56:55.500
> 
> 标签：css, internet-explorer, firefox, footer

大家好，我正在尝试添加一个 CSS 页脚，但它不能正常工作。现在我正在疯狂地调整它，如果它在 Firefox 中看起来很好，它会在 Internet Explorer 7 中变得一团糟，有时是页面的一半:(。有没有基于 css 的页脚的好例子。

考虑我的页面有一个固定的宽度，两列不同的高度，而我的页脚有 100% 的宽度。

* * *

好吧，我按原样使用 css 粘性页脚 - 它在 Firefox 中似乎工作正常，但使用 IE，我的页脚在页面的中间浮动。我注意到我的页脚挂在浏览器视口高度的底部。我认为它是 IE 如何将高度解释为 100% 的。css 粘性页脚本身可以正常工作，但是当我进行修改和添加时，它在 IE 中变得一团糟。页脚和页眉的基本代码如下：

```
@charset "utf-8";
/* CSS Document */

html, body, #wrap {height: 100%;}
body > #wrap > #main > #pageContent {height: auto !important; min-height: 100%;}

#main
{
    background-color:#FFFFFF;
    width:960px;
    height:100% !important;
    text-align:left;
    position:relative;
}

#footer
{
    display:block;
    width:100%;
    text-align:center;
    position: relative;
    height: 150px;
    clear:both;

}
/* CLEAR FIX*/
.clearfix:after 
{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
.clearfix 
{
    display: inline-block;
}
/* Hides from IE-mac \*/
* html .clearfix {
    height: 1%;
}
.clearfix 
{   
    display: block;
}
/* End hide from IE-mac */ 
```

HTML有点像这样

```
<div id="wrap">
 <div> header is here</div>
 <div id="main" class="clearfix">content is here </div>
</div>
<div id="footer"></div> 
```

我在哪里搞砸了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-19T05:59:55.493

我会尝试[CSS Sticky Footer](http://ryanfait.com/sticky-footer/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T06:31:23.263

我认为，这取决于您要达到的目标。我的第一个建议是使用：

```
#footer {clear: both;
        } 
```

这至少会将页脚推到最长的列下方，假设有不止一个。

第二个建议，也是我首选的解决方案（请记住，我不确定跨浏览器/操作系统的兼容性）是：

```
#footer {position: absolute;
         bottom: 0;
         left: 0;
         right: 0;
         } 
```

这很不言自明，但本质上是将页脚附加到页面底部，并允许`#footer`根据其内容进行调整，也意味着`#footer`将是 100% 宽（给或取一个像素），所以根据你的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T06:18:43.187

没有看到代码就不能说，但是如果使用两列布局，您可能至少有一列浮动。将 style="clear:both" 放在页脚应该强制它到页面底部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T14:54:43.933

我把它整理好了——出于某种原因，有两个 clear:both 实例虽然我不明白这是如何导致问题的，但删除冗余条目修复了它：\ 那些似乎没有任何作用的奇怪解决方案之一感觉。无论如何，谢谢你们。

# php - 混淆 PHP 代码

> ID：764927
> 
> 赞同：17
> 
> 时间：2009-04-19T06:02:52.380
> 
> 标签：php, obfuscation, source-code-protection

我使用 PHP 创建软件。我打算出售这个软件，所以我需要保护我的源代码，这样任何人都无法查看它。如何保护我的 PHP 代码以使该软件的功能仍然相同？

我还需要将软件绑定到特定的授权 PC。它不应在任何其他 PC 上运行。我怎样才能做到这一点？我应该使用 LAN MAC 地址加密吗？有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-19T06:36:39.693

我把下面的列表放在一起——不知道它们是否都是最新的，或者现在有多少是免费的，但你应该在这里找到有用的东西：

关于：

1.  [维基百科文章：PHP 加速器](http://en.wikipedia.org/wiki/PHP_accelerator)
2.  [APC、Zend、xCache 和 Zend 框架的比较](http://blog.digitalstruct.com/2007/12/23/php-accelerators-apc-vs-zend-vs-xcache-with-zend-framework)

软件：

1.  [Safeyar](http://www.safe.setyar.com/)（[最佳](http://www.safe.setyar.com/)）
2.  [PHP 的 APC](http://php.net/apc)（[PECL 页面](http://pecl.php.net/package/APC)）
3.  [路送](http://www.roadsend.com/home/index.php?pageID=compiler)
4.  [图尔克-mmcache](http://turck-mmcache.sourceforge.net/index_old.html)
5.  [电子加速器](http://eaccelerator.net/wiki/PoweredByeA)
6.  [PHP-加速器](http://www.php-accelerator.co.uk)
7.  [源卫士](http://www.sourceguardian.com)
8.  [NuSphere Nu-coder](http://www.nusphere.com/products/nucoder.htm?)
9.  [网格软件](http://www.gridinsoft.com/protect.php)
10.  [IonCube SA-Encoder.php](http://www.ioncube.com/sa_encoder.php)

SO上的另一个线程增加了一些（检查出来）：

[我可以加密 PHP 源代码或编译它以便其他人看不到吗？如何？](https://stackoverflow.com/questions/470409/can-i-encrypt-php-source-or-compile-it-so-others-cant-see-it-and-how)

1.  [Zend Guard](http://www.zend.com/en/products/guard/)
2.  [BCompiler](http://php.net/bcompiler)（[PECL 页](http://pecl.php.net/package/bcompiler)）
3.  [PHC](http://www.phpcompiler.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T06:09:09.120

您可能正在寻找的不是密码学本身，而是混淆。如果你用谷歌搜索“php obfuscate”，就会出现很多选择。第一个来自[Raizlabs](http://www.raizlabs.com/software/phpobfuscator/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-19T06:11:22.877

[SourceGuardian](http://www.sourceguardian.com)会做你想做的事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T07:02:01.710

只需下载[http://www.phplockit.com/demo.php](http://www.phplockit.com/demo.php)即可满足您的需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-19T08:04:02.980

为什么不使用[ionCube](http://www.ioncube.com/)或[Zend Guard](http://www.zend.com/en/products/guard/)？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-07T03:01:17.233

有关可靠的 PHP 混淆工具，请参阅我们的[SD PHP 混淆器。](http://www.semanticdesigns.com/Products/Obfuscators/PHPObfuscator.jsp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T21:12:21.747

通常每扇上锁的门都有一把钥匙...

因此，在使用/购买市场上的一些加密器之前，请花点时间搜索谷歌以检查它是否已经不是一种“容易破解”的编码方式。

例如：[http ://www.kgbiz05.com/decoders](http://www.kgbiz05.com/decoders)

# qt - /usr/bin/ld: 找不到 -lfreetype 为什么？我怎样才能让它发挥作用？

> ID：764928
> 
> 赞同：2
> 
> 时间：2009-04-19T06:03:06.717
> 
> 标签：qt

### 完全重复：

> [/usr/bin/ld: 找不到 -lfreetype qt](https://stackoverflow.com/questions/646232/-usr-bin-ld-cannot-find-lfreetype-qt)

* * *

嗨，我正在为一个研究生项目编写一个跨平台的 Qt 应用程序。我一直在使用 Qt 4.3，但最近才升级到 4.5。在我的 Windows 机器上，它运行良好。没问题。然而，在我的 Linux 机器上，事情并不是那么好。

我正在使用 Qt 创建器，它通过编译过程制作所有目标文件。但随后它会调用：

g++ -Wl, -rpath, (所有.o文件都在这里) -L/media/HOME/Qt-Linux-4.5/qt/lib -lQtGui -L/media/HOME/Qt-Linux-4.5/qt/lib - l/usr/X11R6/lib -pthread -lfreetype -lgobject-2.0 -lrt -lglib-2.0 -ldl -lpthread

它给了我错误：

/usr/bin/ld: 找不到 -lfreetype collect2: ld 返回 1 退出状态

现在，我可以在 /usr/lib 文件夹中找到 libfreetype.so.6 和 libfreetype.so.6.3.18。我试过运行这个插入-L/usr/lib，但是没有用。我试过 ln -s /usr/lib/libfreetype.so.6.3.18 libfreetype.so，我试过编辑 ld.so.conf 文件。

如果有帮助，我正在使用 Eeebuntu 在 eeepc 上尝试此操作。

帮助！！我一直试图让这个工作两天。我不知道我还能做什么。有什么建议么？

非常感谢！布伦特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-19T06:16:34.750

你缺少开发库，安装 libfreetypeX-dev，在 debian lenny 中它会是 apt-get install libfreetype6-dev

```
sudo apt-get install libfreetype6-dev 
```

> 我试过 ln -s /usr/lib/libfreetype.so.6.3.18 libfreetype.so

**除非你想破坏你的系统并学习如何修复它，否则**永远不要做这样的事情****

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T05:11:57.557

为了构建一个简单的测试应用程序，我必须在 Kubuntu 9.04 64 位上安装这些：

```
sudo apt-get install libfreetype6-dev
sudo apt-get install libavahi-gobject-dev
sudo apt-get install libSM-dev
sudo apt-get install libXrender-dev
sudo apt-get install libfontconfig-dev
sudo apt-get install libXext-dev 
```

编辑：要构建 OpenGL，我还必须安装**libgl1-mesa-dev**和**freeglut3-dev**。

Edit2：需要音频**libphonon-dev**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:32:30.630

非常感谢！安装开发库让它工作。我还必须安装大约五个库，但是一旦我把它们全部安装好，一切都编译得很好。非常感谢大家！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T06:16:00.103

当你做你的时`ln -s /usr/lib/libfreetype.so.6.3.18 libfreetype.so`，你是否确保`libfreetype.so`符号链接也结束了`/usr/lib`？可以肯定的是，运行`ls -l /usr/lib/libfreetype.so`并确保它符合您的期望。

# contextmenu - 如何从 NotifyIcon 上下文菜单中实现模式对话框？

> ID：764930
> 
> 赞同：1
> 
> 时间：2009-04-19T06:05:04.810
> 
> 标签：contextmenu, modal-dialog, notifyicon, showdialog

我有一个带有上下文菜单的外壳托盘图标。我遇到的问题是从上下文菜单 Clicked 处理程序调用 ShowDialog() 不会导致模式对话框。

使用默认的 C# 项目很容易重现这一点。只需将以下代码添加到 Form1.cs 文件中：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);

    ToolStripMenuItem contextMenuShowMsg = new System.Windows.Forms.ToolStripMenuItem();
    contextMenuShowMsg.Name = "contextMenuShowMsg";
    contextMenuShowMsg.Text = "Show MessageBox...";
    contextMenuShowMsg.Click += new System.EventHandler(this.contextMenuShowMsg_Click);

    ContextMenuStrip contextMenuStrip = new System.Windows.Forms.ContextMenuStrip(this.components);
    contextMenuStrip.Items.Add(contextMenuShowMsg);

    NotifyIcon notifyIcon = new NotifyIcon();
    notifyIcon.Text = "DlgTest";
    notifyIcon.Icon = SystemIcons.Application;
    notifyIcon.Visible = true;
    notifyIcon.ContextMenuStrip = contextMenuStrip;
}

private void contextMenuShowMsg_Click(object sender, EventArgs e)
{
    MessageBox.Show(this, "Test MessageBox");
} 
```

如果您构建并运行它，您只需选择两次上下文菜单项即可在屏幕上显示两个消息框。这不应该是模态的吗？将其替换为对另一个表单的 ShowDialog() 调用会导致相同的非模态行为。

我最好的猜测是 NotifyIcon 并不像在典型的 Windows 应用程序中那样专门绑定到表单。但我看不出有什么办法。

有任何想法吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T07:41:56.793

我建议在尝试显示模式消息框之前做两件事：

1.  使您的图标的所有者窗口可见。
2.  给它重点。

完成此操作后，`this`MessageBox.Show 中的 将成为合法的“模态父级”。

哎呀，消息框将显示在生成它的任何程序之上更有意义，对吧？这样，用户就可以了解消息框的内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T08:49:10.843

您需要跟踪系统托盘菜单的激活情况，并在对话框打开时禁用它。

# oop - 亚马逊面试题：设计一个OO停车场

> ID：764933
> 
> 赞同：118
> 
> 时间：2009-04-19T06:07:18.907
> 
> 标签：oop

设计一个面向对象的停车场。它将具有哪些类和功能。它应该说，满的，空的，也能找到代客泊车的地方。该地段有 3 种不同类型的停车场：普通、残疾人和紧凑型。

谢谢！

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-04-19T06:22:27.933

这是让齿轮转动的快速入门...

ParkingLot 是一个类。

ParkingSpace 是一类。

ParkingSpace 有一个入口。

入口有一个位置，或者更具体地说，是与入口的距离。

ParkingLotSign 是一个类。

ParkingLot 有一个 ParkingLotSign。

ParkingLot 具有有限数量的停车位。

HandicappedParkingSpace 是 ParkingSpace 的子类。

RegularParkingSpace 是 ParkingSpace 的子类。

CompactParkingSpace 是 ParkingSpace 的子类。

ParkingLot 保留一系列 ParkingSpaces，以及一个单独的空置 ParkingSpaces 数组，按与其入口的距离顺序排列。

通过调用 .Full()、.Empty() 或 .Normal()，可以告诉 ParkingLotSign 显示“已满”、“空”或“空白/正常/部分占用”

帕克是一类。

帕克可以 Park()。

帕克可以 Unpark()。

Valet 是 Parker 的子类，可以调用 ParkingLot.FindVacantSpaceNearestEntrance()，返回一个 ParkingSpace。

派克有一个停车位。

Parker 可以调用 ParkingSpace.Take() 和 ParkingSpace.Vacate()。

Parker 调用 Entrance.Entering() 和 Entrance.Exiting() 并且 ParkingSpace 在它被占用或腾出时通知 ParkingLot，以便 ParkingLot 可以确定它是否已满。如果它是新满或新空或新未满或空，则应更改 ParkingLotSign.Full() 或 ParkingLotSign.Empty() 或 ParkingLotSign.Normal()。

HandicappedParker 可以是 Parker 的子类，CompactParker 可以是 Parker 的子类，RegularParker 可以是 Parker 的子类。（实际上可能有点矫枉过正。）

在此解决方案中，Parker 可能应重命名为 Car。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2011-12-25T07:47:49.010

```
public class ParkingLot 
{
    Vector<ParkingSpace> vacantParkingSpaces = null;
    Vector<ParkingSpace> fullParkingSpaces = null;

    int parkingSpaceCount = 0;

    boolean isFull;
    boolean isEmpty;

    ParkingSpace findNearestVacant(ParkingType type)
    {
        Iterator<ParkingSpace> itr = vacantParkingSpaces.iterator();

        while(itr.hasNext())
        {
            ParkingSpace parkingSpace = itr.next();

            if(parkingSpace.parkingType == type)
            {
                return parkingSpace;
            }
        }
        return null;
    }

    void parkVehicle(ParkingType type, Vehicle vehicle)
    {
        if(!isFull())
        {
            ParkingSpace parkingSpace = findNearestVacant(type);

            if(parkingSpace != null)
            {
                parkingSpace.vehicle = vehicle;
                parkingSpace.isVacant = false;

                vacantParkingSpaces.remove(parkingSpace);
                fullParkingSpaces.add(parkingSpace);

                if(fullParkingSpaces.size() == parkingSpaceCount)
                    isFull = true;

                isEmpty = false;
            }
        }
    }

    void releaseVehicle(Vehicle vehicle)
    {
        if(!isEmpty())
        {
            Iterator<ParkingSpace> itr = fullParkingSpaces.iterator();

            while(itr.hasNext())
            {
                ParkingSpace parkingSpace = itr.next();

                if(parkingSpace.vehicle.equals(vehicle))
                {
                    fullParkingSpaces.remove(parkingSpace);
                    vacantParkingSpaces.add(parkingSpace);

                    parkingSpace.isVacant = true;
                    parkingSpace.vehicle = null;

                    if(vacantParkingSpaces.size() == parkingSpaceCount)
                        isEmpty = true;

                    isFull = false;
                }
            }
        }
    }

    boolean isFull()
    {
        return isFull;
    }

    boolean isEmpty()
    {
        return isEmpty;
    }
}

public class ParkingSpace 
{
    boolean isVacant;
    Vehicle vehicle;
    ParkingType parkingType;
    int distance;
}

public class Vehicle 
{
    int num;
}

public enum ParkingType
{
    REGULAR,
    HANDICAPPED,
    COMPACT,
    MAX_PARKING_TYPE,
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-07T16:46:39.097

模型不是孤立存在的。您为模拟进入停车场的汽车、引导您进入空闲空间的嵌入式系统、停车场计费系统或停车场中常见的自动门/票机定义的结构都是不同的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-19T06:31:51.140

在面向对象的停车场中，不需要服务员，因为汽车会“知道如何停车”。

在地块上找到可用的汽车将很困难；最常见的模型要么将所有移动部件暴露为公共成员变量，要么将它们“完全封装”为没有窗户或门的汽车。

我们OO停车场的停车位与汽车的大小和形状不匹配（空间和汽车之间的“阻抗不匹配”）

我们拍品上的许可证标签在每个字母和数字之间都有一个点。残障人士停车将仅适用于以“_”开头的许可证，以“m_”开头的许可证将被拖走。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-19T06:32:15.430

您将需要一个停车场，其中包含“空间”类型的多维数组（在构造函数中指定）。停车场可以通过调用填充和清空空间的函数来跟踪占用了多少空间。空间可以保存一个枚举类型，告诉它是什么类型的空间。Space也有一个方法taken()。对于代客泊车，只需找到第一个开放的空间并将汽车放在那里。您还需要一个 Car 对象来放置空间，无论它是残障车辆、紧凑型车辆还是普通车辆。

```
 class ParkingLot
{
    Space[][] spaces;

    ParkingLot(wide, long); // constructor

    FindOpenSpace(TypeOfCar); // find first open space where type matches
}

enum TypeOfSpace = {compact, handicapped, regular };
enum TypeOfCar = {compact, handicapped, regular };

class Space
{
    TypeOfSpace type;
    bool empty;
    // gets and sets here
    // make sure car type
}

class car
{
    TypeOfCar type;
} 

```

# unix - 通过 SSH 使用本地设置

> ID：764942
> 
> 赞同：12
> 
> 时间：2009-04-19T06:16:34.877
> 
> 标签：unix, shell, ssh

登录时是否可以让 SSH 会话使用所有本地配置文件（.bash_profile、.vimrc 等）？这样，您将拥有相同的配置，例如，在远程会话中编辑 vim 中的文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-05T20:19:50.200

我刚刚遇到了两种选择，而不是只做一个`git clone`点文件。我对其中任何一个都没有任何功劳，也不能说我已经广泛使用了任何一个，所以我不知道其中任何一个是否存在陷阱。

# sshrc

**[sshrc](https://github.com/Russell91/sshrc)**是一个工具（实际上只是一个大的 bash 功能），它可以复制本地 rc 文件，而不会将它们永久写入删除用户的文件`$HOME`——这个想法可能是其他人使用的共享管理员帐户。似乎也可以为不同的远程主机定制。

# .ssh/config 和`LocalCommand`

[这篇博文](http://klaig.blogspot.com/2013/04/make-your-dotfiles-follow-you.html)提出了一种在您登录到远程主机时自动运行命令的方法。它将一组文件压缩并通过管道传输到远程，然后在远程的 $HOME 上解压缩它们：

您的本地`~/.ssh/config`将如下所示：

```
Host *
   PermitLocalCommand yes
   LocalCommand tar c -C${HOME} .bashrc .bash_profile .exports .aliases .inputrc .vimrc .screenrc \
               | ssh -o PermitLocalCommand=no %n "tar mx -C${HOME}" 
```

您可以修改上述内容以仅在某些主机（而不是`*`通配符）上运行该命令，或者也可以针对不同的主机进行自定义。使用这种方法，每个主机可能会有相当多的重复 - 尽管您可以将整个打包`tar c ... | ssh .. "tar mx .."`成一个脚本。

请注意，当您连接时，上面看起来会破坏遥控器上的相同文件，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-19T08:20:01.427

## 使用 dotfiles.git 存储库

我所做的是将所有配置文件保存在中央服务器上的 dotfiles.git 中。

您可以对其进行设置，以便当您 ssh 进入远程机器时，您会自动提取最新版本的点文件。我做这样的事情：

```
ssh myhost
cd ~/dotfiles
git pull --rebase
cd ~
ln -sf dotfiles/$username/linux/.* . 
```

笔记：

1.  要将其放入 shell 脚本中，您可以通过[管道自动在远程机器上执行命令的过程 ssh](http://linux.icydog.net/ssh/piping.php)。

2.  “$username”在那里，以便您可以与您正在使用的其他人共享您的配置文件。

3.  “ln -sf”创建指向所有点文件的符号链接，覆盖任何本地文件，这样 ~/.emacs 链接到版本控制文件 ~/dotfiles/$username/.emacs。

4.  使用“linux”子目录只是为了允许跨平台进行配置更改。我在 dotfiles/$username/mac 下也有一个 mac 目录。/mac 目录中的大多数文件都是从 linux 目录符号链接的，因为它非常相似，但也有一些例外。

5.  最后，请注意，您可以使用主机名等使其更加复杂，而不仅仅是通用的“linux”。使用 dotfiles.git，您还可以从您的朋友那里突袭 dotfiles，这太棒了——每个人都有自己的一套小技巧和小技巧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-19T06:22:15.750

不，因为它不是使用您的配置文件的 SSH，而是远程 shell。

我建议将您的配置文件保存在 Subversion 或其他一些 VCS 中。[这是我的做法](http://xoa.petdance.com/How_to:_Keep_your_home_directory_in_Subversion)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-19T06:59:55.677

好吧，不，因为正如*Andy Lester*所说，远程机器是做这项工作的机器，它无法访问本地机器来获取 .vimrc ...

另一方面，您可以使用[sshfs](http://fuse.sourceforge.net/sshfs.html "sshfs")在本地挂载远程文件系统并在本地编辑文件。这不需要您在远程机器上安装任何东西。不确定它的效率如何，可能不适合通过慢速链接编辑大文件。

或者 Komodo IDE 有一个简洁的“打开 >> 远程文件”选项，它允许您通过自动来回扫描远程计算机上的文件来编辑它们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T14:57:00.930

我每天都在做这样的事情。我有大约 15 个`bash`rc 文件`.vimrc`、一些`vim`插件脚本`.screenrc`和一些其他 rc 文件。我有一个同步脚本（用 编写`bash`），它使用cool`rsync`命令将所有这些文件同步到远程服务器。每次我更新主服务器上的一些文件时，我都会调用脚本将它们同步到远程服务器。

在主服务器上设置`svn/git/hg`存储库也适用于我，但我的远程服务器需要反复重新安装以进行测试。所以我觉得用起来更方便`rsync`。

几年前我也用过这个`rdist`工具，大部分时间也能满足要求。但现在我更喜欢`rsync`它，因为它支持非常有效的增量同步。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-19T07:33:07.267

ssh 可以配置为将某些环境变量传递给另一个（远程端）。而且由于大多数 shell 会检查一些环境变量以应用其他设置，因此您可以将其破解为远程应用一些本地设置。但它有点复杂，大多数管理员无论如何都会在 sshd 配置中关闭 ssh 环境变量传递。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-19T15:12:05.713

在连接 ssh 之前，您总是可以将文件复制到机器上：

```
#!/bin/bash

scp ~/.bash_profile ~/.vimrc user@host:
ssh user@host 
```

如果您使用密钥登录并且没有其他人以该用户身份登录，则此方法效果最佳。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-06T17:39:13.287

我认为[https://github.com/fsquillace/kyrat](https://github.com/fsquillace/kyrat)可以满足您的需求。

我在sshrc诞生之前很久之前就写过，相比sshrc有更多的好处：

*   它不需要两个主机都依赖 xxd（远程主机上可能不可用）
*   Kyrat 使用更高效的编码算法
*   它只有大约 20 行代码（真的很容易理解！）
*   无需 root 访问权限或对远程主机进行任何安装

例如：

```
$> echo "alias q=exit" > ~/.config/kyrat/bashrc
$> kyrat myuser@myserver.com
myserver.com $> q
exit 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-28T14:03:05.733

这是我为此目的使用的一个简单的 bash 脚本。它会同步一些我喜欢复制的文件夹`rsync`，然后将`~/bin`文件夹添加到远程计算机`.bashrc`（如果它还没有的话）。如果您已将[ssh 密钥复制到每台服务器](https://askubuntu.com/q/4830/4804)，则效果最佳。我使用这种方法而不是“dotfiles repo”，因为我连接的许多服务器上都没有 git。

所以要使用它，你会做这样的事情：

`./bin_sync_to_machine.sh server1`

### bin_sync_to_machine.sh

```
function show_help()
{
  echo ""
  echo "usage: SERVER {SERVER2 SERVER3 etc...}"
  echo ""

  exit
}

if [ "$1" == "help" ]
then
  show_help
fi

if [ -z "$1" ]
then
  show_help
fi

# Sync ~/bin and some dot files to remote server using rsync
for SERVER in $*; do
  rsync -avrz --progress ~/bin/ -e ssh $SERVER:~/bin     
  rsync -avrz --progress ~/.vim/ -e ssh $SERVER:~/.vim
  rsync -avrz --progress ~/.vimrc -e ssh $SERVER:~/.vimrc
  rsync -avrz --progress ~/.aliases $SERVER:~/.aliases
  rsync -avrz --progress ~/.aliases $SERVER:~/.bash_aliases

  # Ensure remote server has ~/bin in the path
  ssh $SERVER '~/bin/path_add_to_path.sh'
done 
```

### path_add_to_path.sh

```
pathadd() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="${PATH:+"$PATH:"}$1"
    fi
}

# Add to current path if running in a shell
pathadd ~/bin

# Add to ~/.bashrc 
if ! grep -q PATH:~/bin ~/.bashrc; then 
  echo "PATH=\$PATH:~/bin" >> ~/.bashrc
fi
if ! grep -q source ~/.aliases ~/.bashrc; then 
  echo "source ~/.aliases" >> ~/.bashrc
fi 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-01T16:53:55.677

我为此编写了一个非常简单的工具，它允许您在 ssh时通过以非标准方式使用 SSHd 内置配置选项**本地传输 .vimrc 文件。**

**不需要额外`svn`的 , `scp`,`copy/paste`等。**

它简单、轻量级，并且默认适用于我迄今为止测试过的所有服务器配置。

[https://github.com/gWOLF3/viSSHous](https://github.com/gWOLF3/viSSHous)

# windows - Spy++ 之类的软件如何获取信息？

> ID：764960
> 
> 赞同：3
> 
> 时间：2009-04-19T06:30:36.543
> 
> 标签：windows, winapi, desktop

我正在开发用于测试自动化的软件。为了让它工作，它需要在桌面和所有打开的窗口上“看看”。它需要知道打开了哪些窗口以及它们包含哪些控件。所以它必须做一些类似于 Spy++ 正在做的事情（来自 Visual Studio 的 Spy++）。有谁知道 Spy ++ 如何获取所有信息？是否可以调用任何 Windows 方法来检索有关打开的窗口的信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-19T07:26:31.430

您可以使用[EnumWindows](http://msdn.microsoft.com/en-us/library/ms633497.aspx)获取所有顶级窗口。您可以在其中`lpEnumFunc`调用[FindWindowEx](http://msdn.microsoft.com/en-us/library/ms633500(VS.85).aspx "FindWindowEx")来获取每个顶级窗口的子窗口/控件，然后调用任何其他有趣的函数来为您提供所需的信息，例如[GetClassName](http://msdn.microsoft.com/en-us/library/ms633582(VS.85).aspx "获取类名")、[GetClassInfo](http://msdn.microsoft.com/en-us/library/ms633578(VS.85).aspx "获取类信息")、[GetClientRect](http://msdn.microsoft.com/en-us/library/ms633503(VS.85).aspx "获取客户端矩形")等。查看[此处](http://msdn.microsoft.com/en-us/library/ms632595(VS.85).aspx "这里")了解更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T06:32:49.143

它被称为[windows 钩子](http://msdn.microsoft.com/en-us/library/ms997537.aspx)。签出 Win32 API [SetWindowHookEx](http://msdn.microsoft.com/en-us/library/ms644990.aspx)。

有不同类型的钩子，它们驻留在 DLL 中，并且 Windows 调用 DLL 函数来处理特定线程或同一桌面中所有线程的 Windows 消息类型。

另请[在此处查看我在 Windows 挂钩上的相关答案](https://stackoverflow.com/questions/310576/low-level-keyboard-input-on-windows/310602#310602)。

# jquery - 带有 ASP.NET MVC 的基本 AJAX 示例？

> ID：764965
> 
> 赞同：25
> 
> 时间：2009-04-19T06:33:29.407
> 
> 标签：jquery, ajax, asp.net-mvc

我正在制作一个用于教育目的的演示 ASP.NET MVC 应用程序。

我有一个将帖子标记为冒犯性的图像/链接。我想通过 AJAX 从服务器请求标记冒犯性并检查以确保用户具有此能力。

如果用户这样做，那么我想在数据库中将该帖子标记为冒犯性，并返回该标记已通过。如果用户最终无权标记项目，那么我想向客户端返回一条否定消息，以便我可以弹出一个漂亮的 jQuery 框，说明它没有通过。

我正在尝试在没有完整回发/刷新的情况下完成这一切。

有没有人有任何指向使用 MVC 发出的简单 AJAX 请求示例的链接？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-19T19:56:52.877

使用 jQuery 实际上很容易。假设您的链接是这样的：

```
<a href="javascript:flagInappropriate(<%=Model.PostId%>);">Flag as inappropriate</a> 
```

创建一个 javascript 来调用控制器中的操作以根据需要进行检查和标记：

```
function flagInappropriate(postId) {
    var url = "<CONTROLLER>/<ACTION>/" + postId;
    $.post(url, function(data) {
        if (data) {
            // callback to show image/flag
        } else {
            // callback to show error/permission
        }
    });
} 
```

在您的控制器中的操作方法可能如下所示：

```
[AcceptVerbs("POST")]
public bool FlagAsInappropriate(int id) {
    // check permission
    bool allow = CheckPermission();

    // if allow then flag post
    if (allow) {
        // flag post

        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:21:14.717

这是使用@Ajax 对象的示例。更简单地说，它是@Ajax.ActionLink。

[http://ovisdevelopment.com/davisisms/?p=82&preview=true&preview_id=82&preview_nonce=32c77db2e4](http://ovisdevelopment.com/davisisms/?p=82&preview=true&preview_id=82&preview_nonce=32c77db2e4)

# asp.net-mvc - ASP.NET 跟踪代码和唯一访问者

> ID：764976
> 
> 赞同：4
> 
> 时间：2009-04-19T06:53:07.503
> 
> 标签：asp.net-mvc, tracking

我正在尝试找到一种方法来为我的网站跟踪和生成报告（出于兴趣）。有谁知道您可以了解的任何文章/项目等

1.  跟踪页面/唯一身份访问者等
2.  跟踪 1) 相对于时间戳等

在 asp.net mvc 中还是在 asp.net 中？

PS-我知道谷歌分析等可用，但出于对网络分析如何工作的兴趣而想为自己创建一些基本统计数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-19T11:46:30.090

有几种好方法可以尝试确定唯一身份访问者，但没有一个是准确的（这就是为什么不同的分析会报告不同的数字的原因）。

第一个是使用cookie。为您要跟踪唯一性的每个时间范围内的用户创建一个 cookie，这样您就可以创建一个在一天内到期和一个在一个月内到期的 cookie。然后，您可以使用这两者来跟踪您拥有的每日/每月唯一访问者的数量。当然这并不完美，因为人们可以清除或拒绝 cookie，但它非常准确。

另一种方法是使用请求用户的 IP 地址和用户代理的组合来跟踪唯一性，这可能不太准确，因为如果公司拥有良好的 IT 团队，许多内部用户将拥有相同的用户代理，因为他们都来自同一个内部网络可能具有相同的 IP 地址。

如果您有兴趣阅读有关不同方法的更多信息，这里有一篇很棒的文章：[http ://www.google.com/support/urchin45/bin/answer.py?answer=28325](http://www.google.com/support/urchin45/bin/answer.py?answer=28325)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-15T09:57:59.143

我写了一篇关于简单 asp.net 模块的博客。

你可以在这里查看
[http://ilkeraksu.com/post/2009/07/14/Very-very-simple-But-very-very-efficient-Aspnet-Tracking-module.aspx](http://ilkeraksu.com/post/2009/07/14/Very-very-simple-But-very-very-efficient-Aspnet-Tracking-module.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-19T06:56:08.150

我建议使用[谷歌分析](http://www.google.com/analytics)而不是重新发明轮子。您所要做的就是在您的母版页中添加一些 javascript，然后您就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-19T11:16:49.333

你可以检查[Piwik](http://piwik.org/)。它是使用 PHP 和 mysql 编写的开源 Web 分析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-12T11:06:57.140

[您可以在http://www.codeproject.com/KB/aspnet/PageTracking.aspx](http://www.codeproject.com/KB/aspnet/PageTracking.aspx) 找到很棒的文章，
它是 http://www.15seconds.com/Issue/021119.htm 的升级
[版](http://www.15seconds.com/Issue/021119.htm)

借助在 Application_PreRequestHandlerExecute 中运行的 Session Tracker 类和会话结束时的邮件报告以及许多有用的提示

感谢韦恩·普劳德的所有这些东西

# javascript - 使用 Javascript 打印？

> ID：764978
> 
> 赞同：1
> 
> 时间：2009-04-19T06:55:50.773
> 
> 标签：javascript, css, printing

我的网页中有特定的部门。我只想在我的网页中单击“打印”时打印该 div。我有一些 javascript 代码。但这不是很好的格式。

是否有任何 javascript 可以从我的网页打印特定部门？

提前致谢

*   格纳尼亚尔祖拜尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-19T07:01:22.240

[您可以使用该属性`media="print"`](http://www.w3.org/TR/CSS2/media.html)指定 CSS 样式表，并将该样式`display: none;`应用于除您要打印的元素之外的所有元素。

例如：

打印.css

```
* { display: none; }
div.print_block { display: block; } 
```

page.html

```
<HEAD>
<LINK rel="stylesheet" type="text/css" 
     media="print" href="print.css" />
</HEAD>

<DIV class="print_block">
   ...
</DIV> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-19T07:05:55.333

如果您想在打印时隐藏一些 div，您可以在样式表的打印媒体部分将它们设置为“显示：无”，它们不会出现。

例如，在您的样式表中：

```
 @media print {

    div.header {
        display: none;
    }

    div.printable {
        page-break-inside: avoid;
        page-break-after: always;
    }
 } 
```

这个答案与比我快 4 分钟的两个答案几乎完全相同:-)，请注意，如果您不想这样做，则不需要完整的单独样式表...

此外，“page-break-inside：避免；” 和“分页后：总是；” 子句非常适合打印出几个 div，每个 div 都在自己的页面上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T11:07:23.020

检查这个 jQuery 插件[jqPrint](http://plugins.jquery.com/project/jqPrint)。它似乎做你想做的事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-19T07:01:04.237

我认为没有直接的方法可以做到这一点。但是，您可以：

*   创建一个特殊的 CSS，用于`media=print`隐藏除要打印的一个 div 之外的所有 div，或者
*   为要打印的内容使用隐藏的 iframe

使用“javascript print partial page”一词进行谷歌搜索可能会帮助您找到一些教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T07:45:40.840

我在工作的一个项目中看到了这样的 smf。您必须在弹出窗口中打开弹出窗口，然后将要打印的父页面中的内容放入其中。这就是全部:)

# asp.net-mvc - 在 asp.net mvc 中显示带有自定义超链接的日历年

> ID：764981
> 
> 赞同：4
> 
> 时间：2009-04-19T06:57:45.900
> 
> 标签：asp.net-mvc

我正在寻找以日历格式显示一年中的 12 个月的 MVC 网页。在该月的每一天中，我将仅粗体显示有任何活动的日期（来自数据库的数据）。活动日期也将超链接到 /Activity/2008/12/25 之类的路线

我正要尝试尝试asp.net ajax 控件工具包日历控件，但想知道是否有其他人有任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-19T08:19:42.897

渲染日历并不是非常复杂。通过在 System.Globalization 和 DateTime 中使用 DateTimeFormatInfo ，可以检索所有必要的信息：

*   DateTimeFormatInfo.CurrentInfo.FirstDayOfWeek
*   DateTimeFormatInfo.CurrentInfo.GetMonthName(月)
*   DateTimeFormatInfo.CurrentInfo.GetAbbreviatedDayName((DayOfWeek)dayNumber)

日历中的一个月可以在表格中呈现：

```
_ _ _ 1 2 3 4 
5 6 7 8 9 ... 
```

要在开始时确定空单元格的数量，可以使用以下方法：

```
DateTime date = new DateTime(year, month, 1);
int emptyCells = ((int)date.DayOfWeek + 7 
    - (int)DateTimeFormatInfo.CurrentInfo.FirstDayOfWeek) % 7; 
```

由于一个月最多有 31 天，开始时最多有 6 个空单元格，因此一个月可以在最多 Ceil(37 / 7) = 6 行上呈现。所以一个月内最多可​​以渲染 42 个单元格，其中一些是空的。

每 7 个（一周中的天数）单元格在表中插入一个新行。

```
int days = DateTime.DaysInMonth(year, month);
for (int i = 0; i != 42; i++)
{
    if (i % 7 == 0) {
        writer.WriteLine("<tr>");
        if( i > 0 ) writer.WriteLine("</tr>");
    }

    if (i < emptyCells || i >= emptyCells + days) {
        writer.WriteLine("<td class=\"cal-empty\">&nbsp;</td>");
    } else {
        writer.WriteLine("<td class=\"cal-day\"\">" + date.Day + "</td>");
        date = date.AddDays(1);
    }
} 
```

此外，当日期有活动时，只需在非空单元格中添加一个附加链接到所需路线。

# regex - 检索字符串中 % 符号前面的数字的正则表达式是什么？

> ID：764991
> 
> 赞同：0
> 
> 时间：2009-04-19T07:05:19.563
> 
> 标签：regex, parsing, string-formatting

我正在使用一个使用 % 作为 mod 符号的数学解析器。我想将它用于百分号，以允许用户输入“25%*10”或“25% of 10”并收到答案“2.5”（他们可以输入任何内容）。

然后我会使用要求的正则表达式来获取“25%”（可以在字符串的任何部分）并进行简单的计算（25 / 100），然后将字符串中的 25% 替换为计算值传递给数学解析器。基本上，在将完整字符串传递给数学解析器之前，我正在对百分比符号前面的数字进行一些预计算。

我一直在与正则表达式作斗争，并希望有人能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-19T07:09:16.997

最简单的方法是让数学解析器进行除法：

```
s/([0-9.]+)%/($1\/100)/g 
```

这只是用“（25/100）”替换“25％”......所以如果用户输入“ `25%*10`”他们现在将拥有“ `(25/100)*10`”，当评估时会给他们正确的答案。

或者，在 Perl 中，您可以这样做：

```
s{([0-9.]+)%}{$1/100}eg 
```

这将使 Perl 计算除以 10 并将其传递给数学解析器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-19T14:10:42.163

在 '%' 符号前查找数字的正则表达式是`/(\d+)%/`.

但是，数学表达式不是正则语言，因此正则表达式可能不是正确的工具。相反，您应该告诉*解析器*将 '%' 解释为“取之前的任何内容并将其除以 100”。“在此之前的任何内容”都可以是任何数学表达式，并且您不会遇到运算符优先级问题。您可以在语法树解析器中对它们进行排序。

Mixing text substitution with real language features often violates the principle of least astonishment. When a user sees that '%' divides whatever comes before by 100, he might try to use expressions like `(23+42)%`, but that will just produce a syntax error. Also, you need a more elaborate regex if you have something like `1.34e-14%`, but these things would just sort themselves out when you use the tree parser.

# c# - 以编程方式连接和断开 USB 设备

> ID：764999
> 
> 赞同：9
> 
> 时间：2009-04-19T07:09:40.333
> 
> 标签：c#, .net, windows, usb

我需要以编程方式连接和断开 USB 设备（例如闪存驱动器），而无需拔下和重新插入设备。

有没有办法在 C# Windows 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-19T07:49:29.537

你可能想看看一些相关的问题：

*   [使用 Win32 API 安全删除 USB 驱动器？](https://stackoverflow.com/questions/85649/safe-remove-usb-drive-using-win32-api)
*   [Windows - 在软件中关闭 USB 设备](https://stackoverflow.com/questions/404097/windows-power-off-an-usb-device-in-software)

答案中提到的两种方法都可以轻松转换为 C#。************************