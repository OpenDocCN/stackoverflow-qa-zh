# StackOverflow 问答 11844000-11844999

# django - 使用 Sphinx 自动化 Django 文档

> ID：11844001
> 
> 赞同：1
> 
> 时间：2012-08-07T10:30:54.673
> 
> 标签：django, python-sphinx

我正在使用 Sphinx 为 Django 项目生成文档，它运行得非常好。然而，似乎有必要自己编写 .rst 文件，一旦完成，sphinx 将在您运行 make HTML 时从文档字符串编译文档。

我的问题是：我正在寻找能够自动反映项目新增内容的文档，而无需手动编辑 .rst 文件。

由于 Django 中的一切看起来总是那么简单，我觉得很奇怪你必须手动为整个项目创建第一个文件，我原以为已经存在一些东西，它会自动检查项目的结构并构建第一个来自那个。

我看过这个项目[http://pypi.python.org/pypi/django-sphinx-autodoc/0.0](http://pypi.python.org/pypi/django-sphinx-autodoc/0.0)看起来很有希望，但我很惊讶没有更成熟的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:39:22.113

一段时间以来，[Sphinx apidoc](http://sphinx-doc.org/man/sphinx-apidoc.html)与 Sphinx 捆绑在一起。这可以为您创建一整套`.rst`文件。

如果您想记录您在一个站点中使用的所有各种 django 应用程序（这似乎是您想要的），这将成为一个更大的问题。Sphinx apidoc 需要一堆目录来扫描 python 包。

# objective-c - Objective-C @implementation 变量可见性

> ID：11844004
> 
> 赞同：0
> 
> 时间：2012-08-07T10:31:08.490
> 
> 标签：objective-c, variables, implementation

我有两个类，其中实现包含一个名为“geometryCoords”的数组，在“Corridor”类中它在声明中初始化，在“RhombusArray”中它在“init”方法中完成：

```
GLfloat _geometryCoords[]={/*Values here*/}; 
```

* * *

```
GLfloat _geometryCoords[];
...//In the init method
_geometryCoords = (GLfloat*)malloc(somevalue);
for(...){/*Assignment*/} 
```

在调试此方法时，我注意到“geometryCoords”在传递初始化代码之前具有第一个类的数组的值。将“RhombusArray”中的数组声明更改为：

```
GLfloat _geometryCoords[]; 
```

至

```
GLfloat* _geometryCoords; 
```

我收到“Apple Mach-o 链接器错误：/BlaBla/Corridor.o 和 /BlaBla/RhombusArray.o 中的重复符号 _geometryCoords”。这两个类的标题都被导入到 .mm 文件中，删除其中一个可以解决冲突。我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:37:10.630

这两个数组都必须具有全局范围（即它们在函数之外和类接口之外声明），以便您获得链接器错误和其他问题。像这样声明它们：

```
static GLfloat _geometryCoords[]={/*Values here*/};
//^^^^ this is the new bit 
```

`static`关键字使符号仅在`.m`声明它们的编译单元（文件）中可见。

# c# - 使用 ExecuteScalar 的异常

> ID：11844007
> 
> 赞同：0
> 
> 时间：2012-08-07T10:31:15.687
> 
> 标签：c#, ado.net, timeout, executescalar

我想用 ADO.net 从 C# 数据库中获取一个人。

我使用这个命令：

```
System.Data.Common.DbCommand command = DatabaseManager.Database.GetStoredProcCommand(proc_name, firstName); 
```

接着

```
object personID = DatabaseManager.Database.ExecuteScalar(command); 
```

当我单击一个按钮时，这些命令会调用两次。

第一次没问题。但第二次，我得到`TimeOutException`：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

我用`command.Disposed();`和`command.Connection.Close();`。但这些并不能解决我的问题。

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:37:34.453

在您第一次执行该过程期间，似乎某些事务处于打开状态。这可能是由于您的程序中的错误或您的应用程序中的错误连接管理。

# iphone - UIActionSheet 是如何工作的？

> ID：11844008
> 
> 赞同：0
> 
> 时间：2012-08-07T10:31:19.977
> 
> 标签：iphone, objective-c, ios, xcode

弹出视图时，我想通过询问确认来保存一些数据。我要求使用 UIActionSheet 进行确认。但是，无论我在操作表中的响应如何，视图都在背景中发生变化，这给我使用响应带来了一些问题。我正在使用导航控制器来切换视图。我该如何解决这个问题

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:20:31.833

@PooLas如果我理解正确，您使用 uiactionsheet 进行用户确认，而在后台（实际上在操作表下）您更改视图控制器。好吧，你不能这样做，因为委托必须附加到显示它的控制器（如果我错了，请纠正我）。所以当你点击按钮的时候，你只能先dismiss actionsheet，然后再改变view controller，而不是相反——PooLaS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:42:02.427

更好的选择是使用 uialertview 来询问确认。要做到这一点，请按照以下步骤操作：

确保您的头文件包含以下内容：

```
@interface YourViewController : UIViewController <UIAlertViewDelegate> 
```

现在，当询问确认添加此代码：

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"Are You Sure" delegate:self cancelButtonTitle:@"YES" otherButtonTitles:@"NO", nil];
[alert show];
[alert release]; 
```

现在按下委托下方的一个按钮后将被调用，因此添加应用程序的 .m 文件

```
 - (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
 // the user clicked one of the YES/NO buttons
  if (buttonIndex == 0)
  {
    NSLog(@"NO button pressed");
  }                
  else
  {
    //Save data here                                          
    NSLog(@"YES button pressed");
  }
 } 
```

# java - 他们在java中说“一切都是对象”。真的吗？

> ID：11844012
> 
> 赞同：9
> 
> 时间：2012-08-07T10:31:37.917
> 
> 标签：java, oop

当我输入

```
int a = 5; 
```

是`a`对象吗？

谁能向我解释一下在java中每件事都是一个对象吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T10:36:30.723

每个对象都是一个`java.lang.Object`（注意：`java.lang.Object`没有超类。;)）

但是，有很多东西不是对象。

*   原语和参考。
*   字段（字段本身不是内容）
*   局部变量和参数。
*   泛型类（在 Java 8 中可能会改变）
*   方法（将在 Java 8 中更改）
*   代码块（将在 Java 8 中更改）

* * *

将代码块作为对象是 Java 8 中最令人兴奋的特性之一。以下示例都是闭包，因此都是对象。

```
x => x + 1
(x) => x + 1
(int x) => x + 1
(int x, int y) => x + y
(x, y) => x + y
(x, y) => { System.out.printf("%d + %d = %d%n", x, y, x+y); }
() => { System.out.println("I am a Runnable"); } 
```

例如这里的代码块将作为`Runnable` *对象传递*

```
new Thread(() => { System.out.println("I am a Runnable"); }).start(); 
```

[http://mail.openjdk.java.net/pipermail/lambda-dev/2011-September/003936.html](http://mail.openjdk.java.net/pipermail/lambda-dev/2011-September/003936.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T10:35:01.850

这在java中是**不正确的。**例如，`int`实际上是一个原语。在 java 中，一切都是`Object`扩展的`Object`。其他一切都不**是**。

因此，例如，您不能像对象一样操作名称空间（Java 术语中的包），但在 Erlang 或 Clojure 中您可以。

尽管 java 提供了一个自动装箱功能，可以将原语转换为对象。在你的情况下，如果你说

```
Integer a = 5; 
```

java 将 5 放入`Integer`参考中。如果您想阅读有关自动装箱的信息，请单击此处：[自动装箱文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)。java中的对象：[对象](http://docs.oracle.com/javase/tutorial/java/concepts/object.html)

如果你正在寻找一种在技术上**一切**都是对象的语言，你可以试试 Common Lisp。在 Lisp 中，甚至`T`(代表布尔真) 也是一个对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T10:33:58.790

**不**，这不是一个对象。Java 不是纯粹的面向对象语言，因为`primitives`and `static`。为了将原始变量作为 Object，java 引入了[Integer](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)、[Boolean](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Boolean.html)等包装器类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T10:34:44.440

在 Java 中，您有原始类型（int、boolean、char、byte...），其他所有内容都扩展了`Object`该类，因此是一个对象。

但是*一切都是对象*的事情主要意味着您不能在对象类之外拥有代码。您可以为示例制作脚本文件，它必须包装在一个类中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-07T10:35:03.097

`a`这是一个原始的。Java既有原语也有对象。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-07T10:37:19.943

尽管`a`不是对象而是原始类型的值，Java 尽一切努力向您隐藏这一事实。从 Java 5 开始，[原语会在必要时自动转换为相应的对象包装器](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，以便您可以将它们存储在容器中，将它们传递给需要对象的方法等等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-07T10:38:12.533

并非 Java 中的所有内容都是对象。一些值是原始类型，仅举几例：`int`, `float`, `double`, `byte`, `char`, ... 有一些方法可以将这些原始类型包装到 Objects 中（Java 也可以自动为您执行此操作）。

现在，可以更准确地说，“在 Java 中，一切都 [定义] 在一个对象中”，作为强调在 Java 中的一种方式，您不能定义一个既不是类也不是实例方法的函数或子函数，例如例如，您可以这样做`C++`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-07T10:34:00.647

他们错了。a 不是对象。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-07T10:35:53.723

我认为这来自于 Java 经常被比作 C 的“早期”，以及它的结构性质。然而，这句话本身是不正确的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-07T10:56:57.947

并非 Java 中的所有内容都是对象。还有以下可以在对象中使用的*原始类型（取自*[Oracle 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的定义：

> *   **byte** : byte 数据类型是一个 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127（含）。字节数据类型可用于在大型数组中节省内存，其中内存节省实际上很重要。它们也可以用来代替 int ，它们的限制有助于澄清您的代码；变量的范围有限这一事实可以作为一种文档形式。
>     
>     
> *   **short**：short 数据类型是一个 16 位有符号二进制补码整数。它的最小值为 -32,768，最大值为 32,767（含）。与 byte 一样，适用相同的准则：在内存节省实际上很重要的情况下，您可以使用 short 来节省大型数组中的内存。
>     
>     
> *   **int**：int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他内容。这种数据类型很可能对于您的程序将使用的数字足够大，但如果您需要更广泛的值，请改用 long。
>     
>     
> *   **long**：long 数据类型是一个 64 位有符号二进制补码整数。它的最小值为-9,223,372,036,854,775,808，最大值为9,223,372,036,854,775,807（含）。当您需要比 int 提供的值范围更广的值时，请使用此数据类型。
>     
>     
> *   **float**：float 数据类型是单精度 32 位 IEEE 754 浮点数。它的值范围超出了本讨论的范围，但在 Java 语言规范的浮点类型、格式和值部分中指定。与 byte 和 short 的建议一样，如果您需要在大型浮点数数组中节省内存，请使用浮点数（而不是双精度数）。此数据类型绝不应用于精确值，例如货币。为此，您需要改用 java.math.BigDecimal 类。Numbers and Strings 涵盖了 Java 平台提供的 BigDecimal 和其他有用的类。
>     
>     
> *   **double**：双精度数据类型是双精度 64 位 IEEE 754 浮点数。它的值范围超出了本讨论的范围，但在 Java 语言规范的浮点类型、格式和值部分中指定。对于十进制值，此数据类型通常是默认选择。如上所述，这种数据类型不应该用于精确值，例如货币。
>     
>     
> *   **boolean**：布尔数据类型只有两个可能的值：true 和 false。将此数据类型用于跟踪真/假条件的简单标志。这种数据类型代表一点信息，但它的“大小”并不是精确定义的。
>     
>     
> *   **char**：char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

Java中的大多数其他东西*都是*一个对象（它继承自`Object`类），并且该`main()`方法是从类的实例中运行的。为了允许在主要基于对象的系统中使用原语，Java 提供了包装类，*它们是*表示原语值的对象（例如，`Integer`该类表示与 相同类型的数据`int`）。Java 还做了一些称为*[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)*的事情，它会在其对象包装器中自动包装一个原始类型，例如，当您想要将一个存储`int`在一个`ArrayList<Integer>`. 同样，您可以执行类似的操作`int x = intArrayList.get(0);`，Java 将取消装箱`Integer`存储在数组中。请注意，这些自动装箱操作并非完全免费，因为它们具有与之相关的性能成本，因此如果性能对您的系统确实很重要，请注意这一点。

# asp.net-mvc-3 - MVC 3 Authorize 属性从 URL 中删除“#”

> ID：11844016
> 
> 赞同：1
> 
> 时间：2012-08-07T10:31:50.477
> 
> 标签：asp.net-mvc-3

我的控制器的一项操作具有该`Authorize`属性。

当我输入那个 URL

```
http://localhost:39217/MC/MA/10#MyHash 
```

它变为：

```
http://localhost:39217/Access/Login?ReturnUrl=%2f MC %2f MA %2f 10 #MyHash 
```

但是，在唱歌之后，由于重定向，`#MyHash`散列消失了。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:35:57.500

因为 # 代表一个锚点，所以它被解释为重定向 url 的一部分。我想您必须更改在 LogIn 操作中处理重定向的代码。

# wait - 如何等待一组子流程完成

> ID：11844018
> 
> 赞同：1
> 
> 时间：2012-08-07T10:31:54.923
> 
> 标签：wait, background-process

我有一个主进程 A.sh 和一组子进程 a1.sh、a2.sh 和 a3.sh 这些在这个例子中执行

```
./A.sh &  // master

./a1.sh &
./a2.sh &
./a3.sh 
```

我需要等到这些子流程完成，然后才能以类似的方式启动另一组子流程，例如 b1.sh、b2.sh、b3.sh

```
./A.sh &  // master

./a1.sh &
./a2.sh &
./a3.sh &

// sleep for a1, a2, a3 to finish, then start

./b1.sh &
./b2.sh &
./b3.sh & 
```

“等待”命令等待整个后台进程完成，我如何为一组子进程执行此操作，我是否根据子进程的每个 pid 等待。

# eclipse - 如何通过 Eclipse 查找/替换对话替换 aptana studio 查找/替换对话？

> ID：11844019
> 
> 赞同：5
> 
> 时间：2012-08-07T10:31:58.387
> 
> 标签：eclipse, aptana

我在 Eclipse Juno 上使用 Aptana studio 插件。

我喜欢 Aptana 工作室提供的功能，但我不喜欢 Aptana 的查找和替换对话。

我想用 Eclipse 中的默认值替换它。

有可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T19:24:04.947

在 Aptana Studio 的首选项中，像这样转到`Aptana Studio -> Find Bar`并**取消选中** `Use custom find bar on Aptana editors`：

![在此处输入图像描述](../Images/7093cb994fdc2ced24c41244a84caf06.png)

之后，如果您按 Ctrl + F，您应该会得到正常的 Eclipse 查找/替换搜索对话框，如下所示：

![在此处输入图像描述](../Images/b7bad22c3c70791ccdaf011d05347fb4.png)

# ruby-on-rails - Capybara 可以使用 Selenium Iphone Driver 吗？

> ID：11844029
> 
> 赞同：4
> 
> 时间：2012-08-07T10:32:45.717
> 
> 标签：ruby-on-rails, ruby, selenium, webdriver, capybara

我正在尝试在 iphone 模拟器上运行一些测试，我有 iWebdriver iphone 模拟器在 IP 地址上运行。

这是否可能，因为所有谷歌结果都是关于更新到用户代理以使其就像正在使用 iphone，但我实际上想使用来自 selenium 的实际 iphone 模拟器。

配置：

```
 Capybara.default_driver = Selenium::WebDriver.for :remote, :url => "http://192.168.1.12:3001/wd/hub", :desired_capabilities => :iphone 
```

错误：

```
 Failure/Error: visit 'http://localhost:8090'
     Capybara::DriverNotFoundError:
       no driver called Selenium::WebDriver was found, available drivers: :rack_test, :selenium, :webkit, :webkit_debug
     # ./create_page.rb:16:in `block (2 levels) in createpage' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T13:01:51.927

Capybara.default_driver 方法接受 :rack_test, :selenium, :webkit, :webkit_debug

尝试

```
Capybara.default_driver = :selenium
Capybara.register_driver :selenium do |app|
  Capybara::Driver::Selenium.new(app,
    :browser => :remote,
    :url => "http://192.168.1.12:3001/wd/hub",
    :desired_capabilities => : iphone)
end 
```

# c - 如何在 libdbi 中使用游标 - postgresql

> ID：11844030
> 
> 赞同：0
> 
> 时间：2012-08-07T10:32:47.667
> 
> 标签：c, postgresql

我正在使用 libdbi 连接到一个大型 postgresql 数据库（3 亿条记录）并执行`SELECT *`查询，然后逐行显示结果。我正在获得完整的交换和内存，因此它似乎`autocommit`已启用并将整个结果集加载到内存中。是否有任何选项可以禁用自动提交或至少在提交后保持游标，就像`ResultSet.HOLD_CURSORS_OVER_COMMIT`在 java 中一样？我没有找到任何选择`dbi_conn_set_option`。这是我的代码：

```
dbi_conn conn;
dbi_result result;
int64_t id;

dbi_initialize(NULL);
conn = dbi_conn_new("pgsql");

if (conn == NULL)
{
    printf("connection error.\n");
return EXIT_FAILURE;
}

dbi_conn_set_option(conn, "host", "127.0.0.1");
dbi_conn_set_option(conn, "username", "postgres");
dbi_conn_set_option(conn, "password", "123456");
dbi_conn_set_option(conn, "dbname", "backup");

if (dbi_conn_connect(conn) < 0)
{
    printf("could not connect to database.\n");
    return EXIT_FAILURE;
}

result = dbi_conn_query(conn, "SELECT * FROM tbl");
if (result)
{
    while (dbi_result_next_row(result))
    {
        id = dbi_result_get_longlong(result, "_id");
        printf("This is _id: %ld\n", id);
    }

    dbi_result_free(result);
}

dbi_conn_close(conn);
dbi_shutdown(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:07:54.580

它与自动提交无关。

内存不足问题的解决方案确实是使用游标一次获取 N 个结果，而不是一步获取所有结果。

`libdbi`没有为 SQL 游标提供抽象，因此需要使用 SQL 查询来完成。

FETCH 上的文档[页面](http://www.postgresql.org/docs/current/static/sql-fetch.html)在其示例中提供了完整的查询序列，显示了它是如何完成的。您需要在 C 中使用 libdbi 调用这些查询，其中包含两个循环：一个外部循环调用`FETCH N from cursor_name`，直到没有任何东西可以获取，一个内部循环处理该 FETCH 的结果，就像您当前的代码处理自身的结果一样`select *`。

# iphone - 重新启动应用程序

> ID：11844031
> 
> 赞同：-3
> 
> 时间：2012-08-07T10:32:49.417
> 
> 标签：iphone, objective-c, xcode

我创建了一个可以在后台运行的跟踪应用程序。它总是在我的 iPhone 上运行。我重新启动我的 iPhone。有什么方法可以让我的应用程序也自动启动...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:35:41.853

不，手机重启后无法自动启动应用程序，用户必须点击您的应用程序图标才能启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:39:03.687

重新启动时，手机的所有设置都恢复为默认设置，一旦您关闭手机，曾经启动的应用程序就会关闭。很抱歉，用户必须点击才能启动应用程序。

# .net - 执行保证在 IIS 网站内执行的异步操作，即使应用程序池被回收

> ID：11844034
> 
> 赞同：8
> 
> 时间：2012-08-07T10:33:01.350
> 
> 标签：.net, iis, asynchronous, threadpool

我的网站用户执行的某些操作会导致发送电子邮件。发送电子邮件的代码可能会阻塞一段时间，所以我想在他们的 HTTP 请求处理程序的线程中执行此操作。

目前我正在使用类似的东西：

```
ThreadPool.QueueUserWorkItem(o => {
    try
    {
        email.Send();
    }
    catch (Exception ex)
    {
        _log.Error("Error sending email", ex);
    }
}); 
```

在大多数情况下，这是可行的。但是，该网站在可以回收应用程序池的托管环境中运行。

每隔一段时间我都没有收到应该发送的电子邮件，并且我怀疑线程池队列上的这个工作项在应用程序池回收期间被丢弃了。

我怎样才能执行这样的异步操作并保证它会在这种情况下完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T14:14:21.670

如果您的应用程序以集成模式运行，您可以在主机环境中注册您的邮件调度程序服务。主机将在回收完成*之前通知您的服务。*主机将调用您的执行`IRegisteredObject.Stop`恰好 2 次。在第一次通话时，主持人为您提供完成工作的机会。如果达到超时并且您的服务尚未从主机中删除自己，则会进行另一个调用，但这一次只是通知将在有或没有服务同意的情况下进行回收。

这是如何实现 Stop() 方法的示例（未测试）：

```
public class MailDispatchService : IRegisteredObject
{
    private AutoResetEvent _processQueueEvt = new AutoResetEvent();
    private ConcurrentQueue<MailMessage> _queue = new ConcurrentQueue<MailMessage>();
    private Thread _dispatcherThread;
    private volatile bool _enabled = true;

    #region Implementation of IRegisteredObject

    public void Stop(bool immediate)
    {
        if (_dispatcherThread != null && _dispatcherThread.IsAlive)
        {
            // it's not an immediate stop, we can wait for the queue to empty
            if (!immediate)
            {
                // stop accepting new items in the send queue...
                _enabled = false;
                // awake dispatcher thread, so it can quit if the queue is empty
                _processQueueEvt.Set();
                // and wait for a while but not forever.
                _dispatcherThread.Join(TimeSpan.FromSeconds(30));
            }
            else
            {
                // host env will recycle now, nothing to do...
                _dispatcherThread.Abort();
            }
        }
        // remove the service from host
        HostingEnvironment.UnregisterObject(this);
    }

    #endregion

    public void Start()
    {
        _dispatcherThread = new Thread(ProcessQueue);
        _dispatcherThread.Start();
    }

    private void ProcessQueue()
    {
        while (_enabled)
        {
            _processQueueEvt.WaitOne();
            MailMessage message;
            while (_queue.TryDequeue(out message)) { /* send mail ...*/}
        }
    }

    public void DispatchEmail(MailMessage message)
    {
        if (!_enabled) throw new Exception("....");
        _queue.Enqueue(message);
        _processQueueEvt.Set();
    }
} 
```

启动服务并在主机上注册。

```
var mailService = new MailDispatchService();
System.Web.Hosting.HostingEnvironment.RegisterObject(mailService);
mailService.Start();

var message = new MailMessage();
mailService.DispatchEmail(message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:27:10.220

这里最好的选择是使用持久消息队列或服务总线。您的应用程序将电子邮件请求写入队列，队列处理程序（可能是您的网络应用程序）读取队列并处理消息。如果事情死了，持久性角度就会开始——消息会一直存在，直到它们可以被处理。

# c# - 将 vbs 转换为 c# - 启动和停止 iis 网站和应用程序池

> ID：11844036
> 
> 赞同：2
> 
> 时间：2012-08-07T10:33:10.647
> 
> 标签：c#, vbscript, iis-6

谁能帮我获取以下 vbscript 代码的 c# 代码。

```
Option Explicit

Dim WebSiteID, objWebSite, ObjAppPool

WebSiteID = "1"

Set objWebSite = GetObject("IIS://localhost/W3SVC/" & WebSiteID)
WScript.Echo "Stopping Web Site : " & objWebSite.ServerComment
objWebSite.Stop()

wscript.echo "Stopping Application Pool : " & objWebSite.AppPoolID
Set objAppPool = GetObject("IIS://localhost/W3SVC/AppPools/" & objWebSite.AppPoolID)
objAppPool.Stop()

wscript.echo "Starting Application Pool : " & objWebSite.AppPoolID
objAppPool.Start()

WScript.Echo "Starting Web Site : " & objWebSite.ServerComment
objWebSite.Start() 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:38:39.117

停止 + 开始 = 回收，所以应该这样做：

参考：System.DirectoryServices.dll

```
 using System.DirectoryServices;

  void Recycle(string appPool)
    {
        var appPoolPath = "IIS://localhost/W3SVC/AppPools/" + appPool;

        using (DirectoryEntry appPoolEntry = new DirectoryEntry(appPoolPath))
        {
            appPoolEntry.Invoke("Recycle", null);
            appPoolEntry.Close();
        }
    } 
```

如果此方法失败，您可能需要在服务器上启用“IIS 6 WMI 兼容性”。

# jquery-mobile - iOS中的jQuery Mobile点击和点击灵敏度问题

> ID：11844037
> 
> 赞同：2
> 
> 时间：2012-08-07T10:33:13.440
> 
> 标签：jquery-mobile

在我的 jQuery Mobile 应用程序中，我想使用点击和点击事件。我尝试使用将事件处理程序绑定到这些事件的标准方法，但在点击事件的情况下，点击事件总是触发，所以我使用了我在 stackoverflow 上找到的以下方法： [jQuery 在点击事件后调用点击事件](https://stackoverflow.com/questions/10502383/jquery-calling-click-event-after-taphold-event)

```
$("#list li").live('vmousedown vmouseup', function (event) 
{
    if (event.type == 'vmousedown')
{
        tapTime = new Date().getTime();
    } 
    else 
    {
        //event.type == 'vmouseup'
        //here you can check how long the `tap` was to determine what do do
        duration = (new Date().getTime() - tapTime);

        //The tap code
        if(duration >250 && duration <750)
        {

        }
        //The taphold code

        else if (duration >=750) {

 } 
```

现在，在装有 iOS 5 的 iPhone 上，我遇到了点击事件被触发并且当我向下滚动列表时选择了一个项目的问题。我试图增加点击事件的持续时间，但它似乎在 iOS 中没有效果。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:10:07.773

*[尝试和测试]* 我检查了 jQuery Mobile 的实现。他们每次在“vmouseup”上“taphold”之后都会触发“tap”事件。

如果 'taphold' 已被触发，解决方法是**不触发 'tap' 事件**。根据需要创建自定义事件或修改源，如下所示：

```
$.event.special.tap = {
    tapholdThreshold: 750,

    setup: function() {
        var thisObject = this,
            $this = $( thisObject );

        $this.bind( "vmousedown", function( event ) {

            if ( event.which && event.which !== 1 ) {
                return false;
            }

            var origTarget = event.target,
                origEvent = event.originalEvent,
                /****************Modified Here**************************/
                tapfired = false,
                timer;

            function clearTapTimer() {
                clearTimeout( timer );
            }

            function clearTapHandlers() {
                clearTapTimer();

                $this.unbind( "vclick", clickHandler )
                    .unbind( "vmouseup", clearTapTimer );
                $( document ).unbind( "vmousecancel", clearTapHandlers );
            }

            function clickHandler( event ) {
                clearTapHandlers();

                // ONLY trigger a 'tap' event if the start target is
                // the same as the stop target.
                /****************Modified Here**************************/
                //if ( origTarget === event.target) {
                 if ( origTarget === event.target && !tapfired) {
                     triggerCustomEvent( thisObject, "tap", event );
                 }
            }

            $this.bind( "vmouseup", clearTapTimer )
                .bind( "vclick", clickHandler );
            $( document ).bind( "vmousecancel", clearTapHandlers );

            timer = setTimeout( function() {
                tapfired = true;/****************Modified Here**************************/
                triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
            }, $.event.special.tap.tapholdThreshold );
        });
    }
}; 
```

# algorithm - 将整数划分为 9 个有限制的非负整数

> ID：11844038
> 
> 赞同：1
> 
> 时间：2012-08-07T10:33:14.237
> 
> 标签：algorithm, puzzle, partition-problem

有一个等式：**1a + 2b + 3c + 4d ... + 9i = 9**

约束：**1 <= a + b + c + ... + i <= 10 ⁴**

其中**a,b,..,i**是非负整数，每个整数都有一个特定的范围。

例如：**1 <= a <= 5、2 <= b <= 3**等等。

我需要找出这些变量的不同值集的数量，或者简单地说，解决该方程的方法的数量。

有一种递归方法可以解决这个问题，但这很慢。在给定的约束下，我无法想出一种有效解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:42:59.650

如果你仔细想想，解决方案实际上是*非常*有限的。

由于所有数字都是非负数，因此您有：

```
1a + 2b + 3c + 4d ... + 9i = 9 
```

这意味着：

```
0 <= a <= 9
0 <= b <= 4
0 <= c <= 3
0 <= d <= 2
0 <= e <= 1
0 <= f <= 1
0 <= g <= 1
0 <= h <= 1
0 <= i <= 1 
```

也就是说，只有`10*5*4*3*2*2*2*2*2 = 19200`一些情况需要考虑。

您可以遍历这些案例并找出哪些满足您的其他约束，哪些满足

```
1a + 2b + 3c + 4d ... + 9i = 9 
```

提示：首先给出从`i`到的值`a`。这样，例如，`i`或的高值会`h`立即减小较小数字的可能值范围。

* * *

确保在计算之前应用[MSalters](https://stackoverflow.com/a/11844223/912144)的方法。尽管在这种情况下没有必要，因为问题太简单了，但总的来说它有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:43:48.380

您基本上想要替换范围受到限制的变量，所以 `a' = a+1, 0 <= a' <= 4`和`b' = b+2, 0 <= b' <= 1`。从零开始使数学更容易。它还允许您将等式重写为`1a' + 2b' + ... + 9i = 4`。由于所有术语都是非负的，这极大地限制了搜索空间。例如，这意味着`e`up`i`必须全部为 0。这将等式简化为``1a' + 2b' + 3c + 4d = 4`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:56:21.770

另一种解决方案是解决`1a + 2b + 3c + 4d ... + 9i = 1`（微不足道的）并找到`1a + 2b + 3c + 4d ... + 9i = N+1`给定解决方案的所有解决方案`1a + 2b + 3c + 4d ... + 9i = N`。这基本上是`a => a+1`或`a=>a-1, b=>b+1`或`b=>b-1, c=>c+1`等。

这是很好的递归，但只需要 8 次迭代即可达到 N=9，并且在每次迭代中，您只是增加或减少 9 个变量。

# php - 如何将多维数组插入 cakephp 2.2.1 数据库？

> ID：11844042
> 
> 赞同：2
> 
> 时间：2012-08-07T10:33:26.043
> 
> 标签：php, cakephp, cakephp-2.1

我有三个表，我会在数据库中插入一个数组。它的一个电视节目，有很多季节。季节有很多情节。这是我的表：

**节目**

```
id
title
created
modified 
```

**季节**

```
id
shows_id
created
modified 
```

**剧集**

```
id
seasons_id
title
created
modified 
```

模型文件：

**显示.php**

```
<?php
class Show extends AppModel {
    public $name = 'Show';
    public $hasMany = 'Season';
} 
```

**季节.php**

```
<?php
class Season extends AppModel {
    public $name        = 'Season';
    public $belongsTo   = 'Show';
    public $hasMany     = 'Episode';
} 
```

**情节.php**

```
<?php
class Episode extends AppModel {
    public $name = 'Episode';
    public $belongsTo = 'Season';
} 
```

我已经用这个数组试过了：

```
$this->Show->create();

$sql_show = array(
    'Show' => array(
        'id'        => 2,
        'title'     => 'Super Mega Show',
    ),
    'Season' => array(
        array(
            'id'        => 1,
            'shows_id'  => 2,
            'Episode'   => array(
                array(
                    'id'    => 1,
                    'title' => 'Episode Title 1'
                ),
                array(
                    'id'    => 2,
                    'title' => 'Episode Title 2 '
                ),
                array(
                    'id'    => 3,
                    'title' => 'Episode Title 3'
                ),
            )
        ),
    )
);

$this->Show->saveAll($sql_show); 
```

我怎样才能插入这个数组？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:52:29.317

您可以尝试以下代码来保存多个关联数据：

```
 $this->Show->save($sql_show, array('deep' => true)); 
```

您也可以使用[saveAssociated()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)方法进行尝试。

请询问它是否不适合您。

# javascript - 如何按一个属性值对关联数组进行排序，仍然保持字母顺序（另一个属性值）？

> ID：11844043
> 
> 赞同：0
> 
> 时间：2012-08-07T10:33:27.607
> 
> 标签：javascript, arrays

如何按“组”值对对象进行排序/分组，同时仍保持字母顺序（“名称”值）？

例如之前

```
 [{
        name:'A'
        group:'a',
    },
    {
        name:'A'
        group:'b',
    },
    {
        name:'B'
        group:'a',
    },
    {
        name:'B'
        group:'b'
    }] 
```

后

```
 [{
        name:'A'
        group:'a',
    },
    {
        name:'B'
        group:'a',
    },
    {
        name:'A'
        group:'b',
    },
    {
        name:'B'
        group:'b'
    }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:36:46.610

检查组是否相等，如果是，则比较名称。如果组不相等，则比较组。

```
var a = [{
    name: 'A',
    group: 'a'
}, {
    name: 'A',
    group: 'b'
}, {
    name: 'B',
    group: 'a'
}, {
    name: 'B',
    group: 'b'
}]

a.sort(function(a, b) {
    return a.group.localeCompare(b.group) === 0 ?
           a.name.localeCompare(b.name) : /*groups are equal, compare names*/
           a.group.localeCompare(b.group); /* groups are not equal, compare groups*/
}); 
```

# android - HttpsURLConnection server_name 已损坏（？）超过 3g

> ID：11844044
> 
> 赞同：0
> 
> 时间：2012-08-07T10:33:34.287
> 
> 标签：android, ssl, 3g, sni

根据 Google 的建议，我将 HttpsURLConnection 用于我的 api-level 15 项目。

我的测试用例非常简单：

```
URL url = new URL(STATS);
HttpsURLConnection we = (HttpsURLConnection)url.openConnection();
InputStream in = new BufferedInputStream(we.getInputStream()); 
```

当我通过 WiFi 连接到我的服务器时，一切正常。

当我通过 3g 连接到我的服务器时，我的 Apache 日志中出现错误：

```
Hostname 202.139.83.152 provided via SNI and hostname myserver.com provided via HTTP are different 
```

现在 202.139.83.152 地址是我的移动提供商 APN 的代理地址。

我已经转储了两个请求的“Client Hello”数据包，并且 Handshake Protocol/Extension:server_name 字段包含 wifi 请求的目标主机名 (myserver.com) 但 3g 请求的 APN 代理地址。

这是 ：

*   我编码错误的东西
*   我在手机上配置错误的东西（三星 Galaxy S3）
*   我在服务器上配置不正确的东西
*   我的移动提供商正在做的一些邪恶的事情
*   Android 库中的一个错误

我的服务器为此虚拟主机使用专用 IP 地址。

我可以使用 DefaultHttpClient 的简单子类成功地发出超过 3g 的请求，但由于我的最低 API 级别为 15，我希望沿着“首选”路径走下去。

任何建议都会非常受欢迎。我花了太多时间试图让这个基本的东西正常工作。

我正在为这个项目处理 iPhone 开发的同事摇头，因为他的代码“开箱即用”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:30:54.640

事实证明，这是一个[已知问题](http://code.google.com/p/android/issues/detail?id=35050 "已知问题")。

我找到了一种解决方法，尽管我不确定它有多强大。到目前为止对我有用的是在建立连接时禁用代理：

```
HttpsURLConnection http = (HttpsURLConnection) url.openConnection(Proxy.NO_PROXY); 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:18:49.050

这是我针对 Apache 的服务器端解决方法（去年在 Apache2 - Apache/2.2.14 上工作）。

通过删除“return HTTP_BAD_REQUEST;”更改 ssl_engine_kernel.c 后重新编译 Apache/mod_ssl.so 对于 strcmp(host, servername) 检查：

```
if (strcmp(host, servername)) { 
        ap_log_error(APLOG_MARK, APLOG_ERR, 0, r->server, 
                "Hostname %s provided via SNI and hostname %s provided" 
                    " via HTTP are different", servername, host); 
        //return HTTP_BAD_REQUEST; // REMOVE THIS LINE 
```

您仍然会收到错误日志消息，但不会收到错误 400 响应代码。

# c# - 在silverlight中选择元素时以编程方式选择tabItem

> ID：11844046
> 
> 赞同：0
> 
> 时间：2012-08-07T10:33:37.403
> 
> 标签：c#, wpf, silverlight, tabitem

我有一个图像编辑器，它在画布上有许多图像元素和文本元素。我有两个单独的选项卡，允许用户重新调整文本或图像的大小。我想在选择文本元素时切换到文本选项卡，并在选择图像时切换到图像选项卡。我很难弄清楚该怎么做。

MainPage.xaml -

```
<!-- Control Panel -->
<sdk:TabControl x:Name="elementEditor" Margin="10,0,10,19" Width="215" Background="#FFD6D6D6"
       Grid.RowSpan="2">//removed selectedIndex binding from here
<sdk:TabItem x:Name="tabCanvasSettings" DataContext="{Binding Project}">
    <sdk:TabItem.Header x:Name="tabCanvas">
        <TextBlock Text="Canvas" />
    </sdk:TabItem.Header>
    <sdk:TabItem.Content>
        <!-- Content -->
    </sdk:TabItem.Content>
</sdk:TabItem>

<!-- Text tab -->
<sdk:TabItem x:Name="tabText" IsSelected="{Binding Path=TabTextSel}">
    <sdk:TabItem.Header>
        <TextBlock Text="Text" />
    </sdk:TabItem.Header>
    <sdk:TabItem.Content>
        <!-- Content -->
    </sdk:TabItem.Content>
</sdk:TabItem>

<!-- Image tab -->
<sdk:TabItem x:Name="tabImage" IsSelected="{Binding Path=TabImgSel}">
    <sdk:TabItem.Header>
        <TextBlock Text="Image" />
    </sdk:TabItem.Header>
    <sdk:TabItem.Content>
        <!-- Content -->
    </sdk:TabItem.Content>
</sdk:TabItem>
</sdk:TabControl> 
```

Project.cs（不是我的 MainPage 代码隐藏）-

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.IO;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Effects;
using System.Windows.Media.Imaging;
using ImageEditor.Client.Behaviors;
using ImageEditor.Client.Views;
using System.Linq;
using ImageEditor.Client.ImageDesignerService;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
namespace ImageEditor.Client.BLL
{
  public class Project : INotifyPropertyChanged
  {
    private bool tabTextSel;
    public bool TabTextSel
    {
        get { return tabTextSel; }
        set
        {
            tabTextSel = value;
            NotifyPropertyChanged("TabTextSel");
        }
    }

    private bool tabImgSel;
    public bool TabImgSel
    {
        get { return tabImgSel; }
        set
        {
            tabImgSel = value;
            NotifyPropertyChanged("TabImgSel");
        }
    }
    //Other properties and methods

    public void element_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        this.SelectedElement = sender as FrameworkElement;
        if (sender is TextBlock)
        {
            this.SelectedTextElement = sender as TextBlock;

            //Change tab to text tab
            tabImgSel = false;
            tabTextSel = true;
        }
        else if (sender is Image)
        {
            this.SelectedImageElement = sender as Image;

            //Change tab to image tab
            tabTextSel = false;
            tabImgSel = true;
        }

    }

  }
} 
```

我如何让它在这里切换标签？我敢肯定，这可能很简单，我只是无法解决。当我调试时，这些值似乎很好地传递给了绑定，但它们仍然没有正确切换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:41:08.323

您的属性（TabTextSel 和 TabImgSel）应该是 bool 类型，而不是字符串。您应该将它们设置为 true 或 false (bool)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:23:05.360

您必须分配给属性而不是变量，以便数据绑定可以通过调用您的 NotifyPropertyChanged 方法来工作......

# c++ - C++ wParam 和 Lparam 混淆

> ID：11844050
> 
> 赞同：0
> 
> 时间：2012-08-07T10:33:51.923
> 
> 标签：c++, winapi

我知道 wParam 和 lParam 是（我相信是 32 位）特定于当时传递的消息的信息位，但是有没有办法告诉每条消息放入两者中的内容？

我在某处读到 wParam 是 16 位而 lParam 是 32 位，但它仍然没有真正解释我应该看到什么，或者至少我应该看到哪个变量。我已经看到了一些消息示例使用 lParam，以及使用 wParam 的消息的其他示例，以及两者都使用的其他示例。

例如，我看到 keydown 使用 wParam 来接收特定的键，但 lParam 在 LButtondown 中使用，上面的 16 是 y，下面的 16 是 x。一个特别应该在 lParam 中的原因是有道理的（因为它需要 32 位），但是我怎样才能找出其他消息发送的消息，以及其中的内容？

（对不起，我想我可能在那个轻微的咆哮中重复了我的问题几次）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:36:55.077

对不起。但是要知道每条消息的 wParam 和 lParam 中传递了什么，可靠的方法是参考[文档](http://msdn.microsoft.com/en-us/library/ff468922(v=vs.85))。

> 我在某处读到 wParam 是 16 位而 lParam 是 32 位

据此[，](http://msdn.microsoft.com/en-us/library/aa383751%28VS.85%29.aspx)是`WPARAM`一个**无符号（32位） int**，而`LPARAM`是一个有符号**long**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:36:34.423

您必须查看您感兴趣的每条消息的 MSDN 参考，并单独阅读它的意义`wParam`和意义`lParam`。完整的参考资料可以在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927%28v=vs.85%29.aspx#system_defined)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:37:50.350

看看微软的文档：例如 WM_KEYDOWN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646280 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280(v=vs.85).aspx)

# objective-c - IOS - 在运行时执行外部包/库

> ID：11844059
> 
> 赞同：0
> 
> 时间：2012-08-07T10:34:28.793
> 
> 标签：objective-c, ios, runtime, bundle, libraries

我已经阅读了很多关于它是否可能的东西..我有点困惑：S

我正在尝试从服务器下载一个包或类似的东西并在运行时执行它（一个带有控制器和自己的库的 xib）。有人说可以，但苹果商店不允许，有人说没有办法。我不能把它存放在苹果商店没关系。

如果可能，我该如何创建捆绑包或可执行文件？如何从主项目链接它？

谢谢！

# jquery - jQuery 简单的调查基础设施

> ID：11844062
> 
> 赞同：1
> 
> 时间：2012-08-07T10:34:31.270
> 
> 标签：jquery, survey

我目前正在构建一个包含 10-11 个问题的在线调查。我正在寻找一个简单的 jQuery 结构，我可以 slideUp() 和 slideDown 每个问题.. 我的调查具有以下基本结构

```
<div class="question">
  Question 1 ....
</div>

<div class="question noshow">
  Question 2 goes here .... 
</div> 
```

我正在考虑使用 jQuery 命令，如下所示：

```
$('document').ready(function() {
  $('.nextbutton').click(function() {
     $('.question').slideUp()
     $('.question').next().slideDown() 
  });

  $('.prevbutton').click(function() {
     $('.question').slideUp()
     $('.question').prev().slideDown()
  });
}); 
```

我对 jQuery 很陌生，我认为我被困在逻辑上。请帮助我了解有关如何为调查构建简单基础架构的逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:40:13.597

您可以使用以下指南之一来创建手风琴：

[**http://net.tutsplus.com/tutorials/javascript-ajax/exactly-how-to-create-a-custom-jquery-accordion/**](http://net.tutsplus.com/tutorials/javascript-ajax/exactly-how-to-create-a-custom-jquery-accordion/)

如果你想在 2 分钟内手工编码，我可以为你创建一个 Fiddle。

* * *

编辑：

这里有一个自定义手风琴：**[JSFIDDLE](http://jsfiddle.net/toroncino/AHBB3/)**

* * *

编码：

HTML

```
<div>
    <div class="question">
        <a href="">Click here</a>
        <p>Question here?</p>
    </div>
    <div class="question">
        <a href="">Click here</a>
        <p>Question here?</p>
    </div>
    <div class="question">
        <a href="">Click here</a>
        <p>Question here?</p>
    </div>
</div>​ 
```

jQuery

```
$('.question a').click(function(e) {
   $('.question').find('.open').slideUp().removeClass('open');
   $(this).siblings('p').slideDown().addClass('open');
    e.preventDefault();        
});​ 
```

一点CSS：

```
.question {border: 1px solid #e4e4e4; padding:10px;}
.question p {display: none;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T10:41:19.757

```
<div id="questions">
<div class='question'>Qqqqqqq1</div>
<div class='question'>Qqqqqqq2</div>
<div class='question'>Qqqqqqq3</div>
<div class='question'>Qqqqqqq4</div>
</div>
<button class='prevbutton' />
<button class='nextbutton' /> 
```

JS部分：

```
$('document').ready(function() {
    $(".question").not(".question:first").hide();

  $('.nextbutton').click(function() {
      $('.question:visible').slideUp().next().slideDown() 
  });

  $('.prevbutton').click(function() {
      $('.question:visible').slideUp().prev().slideDown()
  });
});​ 
```

另见：http: [//jsfiddle.net/93S8B/](http://jsfiddle.net/93S8B/)

# razor - Ajax.BeginForm() 未通过 ajax 提交

> ID：11844066
> 
> 赞同：0
> 
> 时间：2012-08-07T10:34:56.033
> 
> 标签：razor, asp.net-ajax, asp.net-mvc-4

这几天我一直在为此苦苦挣扎。我有一个表单，它是通过 Ajax 加载的部分视图，但它没有通过 Ajax 提交，即使它使用 Ajax.BeginForm()。

控制器：

```
<HttpGet()> _
    Public Function PersonalDetailsEdit(PersonalInfo As DetailsViewModel.PersonalDetails) As PartialViewResult
        Return PartialView(PersonalInfo)
    End Function

    <HttpPost()> _
    <AjaxOnly()> _
    Public Function PersonalDetailsEdit(formcollection As FormCollection, model As DetailsViewModel.PersonalDetails) As PartialViewResult
        Return PartialView("PersonalDetails", model)
    End Function 
```

看法：

```
@ModelType ASK.Everest.ViewModels.DetailsViewModel.PersonalDetails

@Using Ajax.BeginForm("PersonalDetailsUpdate", "Details", New AjaxOptions() With {
                     .InsertionMode=InsertionMode.Replace,
                     .UpdateTargetId = "PersonalDetailsSection",
                     .OnFailure = "alert('fail');"}, New With {.id="PersonalDetailsForm"})
    @Html.ValidationSummary(True)

@<fieldset id="PersonalDetailsUpdate">
    <table class="table table-striped ">
        <tr>
            <th class="display-label">
                <input type="hidden" value="@Html.NameFor(Function(model) model.Title)" />
                @Html.DisplayNameFor(Function(model) model.Title)
            </th>
            <th class="display-label">
                <input type="hidden" value="@Html.NameFor(Function(model) model.FirstName)" />
                @Html.DisplayNameFor(Function(model) model.FirstName)
            </th>
            <th class="display-label">
                <input type="hidden" value="Surname" />
                @Html.DisplayNameFor(Function(model) model.Surname)
            </th>
        </tr>
        <tr>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.Title)
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.FirstName)
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.Surname)
            </td>
        </tr>
        <tr>
            <th>
            </th>
            <th class="display-label">
                @Html.DisplayNameFor(Function(model) model.Gender)
            </th>
            <th class="display-label">
                <input type="hidden" value="@Html.NameFor(Function(model) model.DOB)" />
                @Html.DisplayNameFor(Function(model) model.DOB)
            </th>
        </tr>
        <tr>
            <td>
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.Gender)
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.DOB)
            </td>
        </tr>
        <tr>
            <th>
            </th>
            <th class="display-label" colspan="2">
                @Html.DisplayNameFor(Function(model) model.IDNumber)
            </th>
        </tr>
        <tr>
            <td>
            </td>
            <td class="display-field" colspan="2">
                @Html.DisplayFor(Function(model) model.IDNumber)
            </td>
        </tr>
        <tr>
            <th>
            </th>
            <th class="display-label">
                @Html.DisplayNameFor(Function(model) model.MaritalStatus)
            </th>
            <th class="display-label">
                @Html.DisplayNameFor(Function(model) model.Nationality)
            </th>
        </tr>
        <tr>
            <td>
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.MaritalStatus)
            </td>
            <td class="display-field">
                @Html.DisplayFor(Function(model) model.Nationality)
            </td>
        </tr>
    </table>
    @*@Html.ActionLink("Back to List", "Index")*@
    <p class="pull-right">

        <input type="submit" value="Save" />
    </p>
</fieldset>
End Using 
```

我的捆绑包：

```
bundles.Add(New ScriptBundle("~/bundles/ask").Include(
                "~/Scripts/jquery-1.7.*",
                "~/Scripts/jquery-ui*",
                "~/Scripts/jquery.validate*",
                "~/Scripts/jquery.unobtrusive*",
                "~/Content/bootstrap/js/bootstrap.js")) 
```

_Layout.vbtml：

```
<!DOCTYPE html>
<html lang="eng">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData("Title")</title>
    @Styles.Render("~/Content/css")
    @RenderSection("styles", required:=False)

    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/ask")

    @RenderSection("scripts", required:=False)
</head>
<body>
    @RenderBody()
</body>
</html> 
```

在经历了很多挫折之后放弃了，决定在客户端使用 MVVM 的 JQuery + Knockout 路线，如下所示：

```
<script type="text/javascript">
var data = @Html.Raw(Json.Encode(Model)) ;
var PersonalDetailsVM = ko.mapping.fromJS(data);
ko.applyBindings(PersonalDetailsVM, $('section#PersonalDetails')[0]);
</script> 
```

现在我只是在为 JSON/MVC 日期转换而苦苦挣扎——我认为 MVC4 应该默认使用 JSON.NET？如果很麻烦，我会发布另一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:38:03.813

免去您的头疼并使用 jQuery。微软基本上在他们的 ASP.NET AJAX 上“跳船”，现在支持 jQuery。

[http://weblogs.asp.net/toddanglin/archive/2010/04/19/microsoft-ajax-client-library-is-dead-long-live-jquery.aspx](http://weblogs.asp.net/toddanglin/archive/2010/04/19/microsoft-ajax-client-library-is-dead-long-live-jquery.aspx)

[http://stephenwalther.com/archive/2010/03/16/microsoft-jquery-and-templating.aspx](http://stephenwalther.com/archive/2010/03/16/microsoft-jquery-and-templating.aspx)

# php - Symfony 2 DOM 爬虫。获取没有标签的文本

> ID：11844071
> 
> 赞同：0
> 
> 时间：2012-08-07T10:35:23.817
> 
> 标签：php, symfony, filter, web-crawler

我使用以下代码抓取页面：

```
<br/>

<td class="PropertyBody">
<b>Category:</b>
 Miscellanea: Soft Skill
<br>
<b>Owner:</b>
<a href="mailto:">blabla</a>
<br>
<b>Location:</b>
 bla bla
<br>
<b>Duration:</b>
 6:00
<br>
<b>Max attendees:</b>
 15
<br>
<b>Start at:</b>
 7/19/2012 10:00:00 AM
<br>
<b>Your status:</b>
<br>
</td> 
```

例如，如何`'7/19/2012 10:00:00 AM'`使用 Symfony Crawler 从这段代码中提取？ `$crawler->filter('.PropertyBody > b')->eq(5)->text();`就拿`'Start at:'`

谢谢，我已经做到了：

```
$bigPiece = $crawler->filter('.PropertyBody')->text();
        //getting CATEGORY         
         $pos = strpos($bigPiece, ':')+1;
         $pos2 = strpos($bigPiece, 'Owner:');
         $category = trim(substr($bigPiece, $pos, $pos2-$pos));
         $this->category = $category;
        //getting OWNER
         $pos = strpos($bigPiece, 'Owner:')+6;
         $pos2 = strpos($bigPiece, 'Location:');
         $owner = trim(substr($bigPiece, $pos, $pos2-$pos));
         $training->setOwner($owner);
        //getting LOCATION
         $pos = strpos($bigPiece, 'Location:')+9;
         $pos2 = strpos($bigPiece, 'Duration:');
         $location = trim(substr($bigPiece, $pos, $pos2-$pos));
         $training->setLocation($location);
        //getting DURATION
         $pos = strpos($bigPiece, 'Duration:')+9;
         $pos2 = strpos($bigPiece, 'Max attendees:');
         $duration = trim(substr($bigPiece, $pos, $pos2-$pos));
         $training->setDuration($duration);
        //getting MAXATTENDEES
         $pos = strpos($bigPiece, 'Max attendees:')+14;
         $pos2 = strpos($bigPiece, 'Start at:');
         $maxattendees = trim(substr($bigPiece, $pos, $pos2-$pos));
         $training->setMaxattendies($maxattendees);
        //getting START AT
         $pos = strpos($bigPiece, 'Start at:')+9;
         $pos2 = strpos($bigPiece, 'Your status:');
         $start = trim(substr($bigPiece, $pos, $pos2-$pos));
         $training->setStarts($start); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:44:24.693

添加`span`标签。执行以下操作：

```
<b>Start at:</b>
<span class="wantthis">7/19/2012 10:00:00 AM</span> 
```

然后选择它：

```
$crawler->filter('.wantthis')->text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:59:51.687

如果您需要测试这种特殊情况并且您没有添加标签的能力，那么您可能应该考虑使用`assertContains()`PHPUnit。

```
$text = $crawler->filter('.PropertyBody > b')->text();
$this->assertContains('7/19/2012 10:00:00 AM', $text); 
```

# python - Python：TypeError：无法连接“str”和“int”对象

> ID：11844072
> 
> 赞同：153
> 
> 时间：2012-08-07T10:35:24.670
> 
> 标签：python, string, printing, integer

我有这个将字符串添加到整数的 python 程序：

```
a = raw_input("Enter a: ")
b = raw_input("Enter b: ")
print "a + b as strings: " + a + b
a = int(a)
b = int(b)
c = a + b
str(c)
print "a + b as integers: " + c 
```

我收到此错误：

```
Python: TypeError: cannot concatenate 'str' and 'int' objects 
```

如何将字符串添加到整数？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-08-07T10:38:04.110

有两种方法可以解决由最后一条`print`语句引起的问题。

您可以将`str(c)`调用结果分配给`c`@jamylak 正确显示的内容，然后连接所有字符串，或者您可以`print`简单地替换最后一个：

```
print "a + b as integers: ", c  # note the comma here 
```

在这种情况下

```
str(c) 
```

不是必需的，可以删除。

样品运行的输出：

```
Enter a: 3
Enter b: 7
a + b as strings:  37
a + b as integers:  10 
```

和：

```
a = raw_input("Enter a: ")
b = raw_input("Enter b: ")
print "a + b as strings: " + a + b  # + everywhere is ok since all are strings
a = int(a)
b = int(b)
c = a + b
print "a + b as integers: ", c 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-08-07T10:37:09.117

`str(c)`返回 的**新**字符串表示形式`c`，并且不会改变`c`自身。

```
c = str(c) 
```

可能是您正在寻找的

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-08-07T10:37:34.610

如果你想连接 int 或 floats 到一个字符串，你必须使用这个：

```
i = 123
a = "foobar"
s = a + str(i) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-25T09:38:28.240

```
c = a + b 
str(c) 
```

实际上，在最后一行中，您并没有更改变量 c 的类型。如果你这样做

```
c_str=str(c)
print "a + b as integers: " + c_str 
```

它应该工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-21T15:57:40.183

除了其他答案，还可以使用`format()`

`print("a + b as integers: {}".format(c))`

例如 -

```
hours = 13
minutes = 32
print("Time elapsed - {} hours and {} minutes".format(hours, minutes)) 
```

将导致输出 -`Time elapsed - 13 hours and 32 minutes`

查看[文档](https://docs.python.org/3/library/stdtypes.html#str.format)以获取更多信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-25T06:52:12.723

您可以转换`int`为`str`使用字符串函数：

```
user = "mohan"

line = str(50)

print(user + "typed" + line + "lines") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-26T11:28:52.080

最简单和最不容易混淆的解决方案：

```
a = raw_input("Enter a: ")
b = raw_input("Enter b: ")
print "a + b as strings: %s" % a  + b
a = int(a)
b = int(b)
c = a + b
print "a + b as integers: %d" % c 
```

我在[http://freecodeszone.blogspot.com/上找到了这个](http://freecodeszone.blogspot.com/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-10T23:20:36.237

我还收到错误消息“TypeError：无法连接'str'和'int'对象”。事实证明，我只是在打印变量时忘记在变量周围添加 str() 。这是我的代码：

```
def main():
	rolling = True; import random
	while rolling:
		roll = input("ENTER = roll; Q = quit ")
		if roll.lower() != 'q':
			num = (random.randint(1,6))
			print("----------------------"); print("you rolled " + str(num))
		else:
			rolling = False
main()
```

我知道，这是一个愚蠢的错误，但对于像我这样对 python 非常陌生的初学者来说，它会发生。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-07T08:59:47.513

这就是我为摆脱用“，”分隔变量的错误所做的工作，这对我有所帮助。

```
# Applying BODMAS 
arg3 = int((2 + 3) * 45 / - 2)
arg4 = "Value "
print arg4, "is", arg3 
```

**这是输出**

## 值为 -113

（程序退出代码：0）

# python - (Python) For 循环语法 - 只执行一项？

> ID：11844074
> 
> 赞同：0
> 
> 时间：2012-08-07T10:35:25.640
> 
> 标签：python, list, for-loop, while-loop

一般来说，python/编程很新，这是我最大的项目。

我正在编写一个程序来为你做 SUVAT 方程。（SUVAT 方程用于计算具有恒定速度的物体的位移、开始/结束速度、加速度和经过的时间，您可以将它们称为不同的东西。）

我列了这个清单：

```
variables = ["Displacement", "Start Velocity", "End Velocity", "Acceleration", "Time"] 
```

在以下 while/for 循环中使用：

```
a = 0
while a==0:
  for variable in variables:

    # choice1 is what the user is looking to calculate
    choice1 = raw_input("Welcome to Mattin's SVUVAT Simulator! Choose the value you are trying to find. You can pick from " + str(variables))

    # will execute the following code when the for loop reaches an item that matches the raw_input
    if choice1 == variable: 
        print "You chave chosen", choice1
        variables.remove(variable) #Removes the chosen variable from the list, so the new list can be used later on
        a = 1 # Ends the for loop by making the while loop false

    # This part is so that the error message will not show when the raw_input does not match with the 4 items in the list the user has not chosen
    else:
        if choice1 == "Displacement":
            pass
        elif choice1 == "Start Velocity":
            pass
        elif choice1 == "End Velocity":
            pass
        elif choice1 == "Acceleration":
            pass

        # This error message will show if the input did not match any item in the list
        else:
            print "Sorry, I didn't understand that, try again. Make sure your spelling is correct (Case Sensitive), and that you did not inlcude the quotation marks." 
```

希望我在代码中写的评论能解释我的意图，如果没有，请随时提出任何问题。

问题是当我运行代码并输入choice1时，for循环会激活最后一行代码：

```
else:
    print "Sorry, I didn't understand that, try again. Make sure your spelling is correct (Case Sensitive), and that you did not inlcude the quotation marks." 
```

然后提示我再次输入输入，并会根据需要多次执行此操作，以获取我正在输入的列表中的项目。

但是，我特别编写了代码，如果我输入的内容与 for 循环当前正在检查的列表中的项目不匹配，但与列表中的其他项目之一匹配，那么它应该通过并循环检查下一个项目。

我可能在做一些愚蠢的事情，但我没有看到，所以请帮我弄清楚我必须做什么才能得到我想要的结果？我认为这是我错误的语法，所以这就是标题的原因。

感谢您的帮助，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:46:10.437

除了粘贴代码中的缩进问题之外，我会这样重写它：

```
while True:
    choice = raw_input('...')

    if choice in variables:
        print "You chave chosen", choice

        # Remove the chosen member from the list
        variables = [v for v in variables if v != choice]

        # Break out of loop
        break

    # Print error messages etc. 
```

还要记住，字符串比较区分大小写。即`'Displacement' != 'displacement'`。

# c# - 为 DisplayFor 连接一个字符串

> ID：11844080
> 
> 赞同：0
> 
> 时间：2012-08-07T10:35:44.643
> 
> 标签：c#, .net, asp.net-mvc-3, html-helper, string-concatenation

我有一个名为 Lines 的模型。在它上面我有一个包含许多字符串的地址类，即：

```
public string ReferenceKey { get; set; }
public string Country { get; set; }
public string County { get; set; }
public string Postcode { get; set; }
public string PremisesName { get; set; }
public string PremisesName { get; set; } 
```

我从对外部方的 Web 服务调用中获取信息，然后用返回的数据填充这些字段 - 请注意，在某些情况下，它们可能不会返回所有内容，因此例如 County 或 PostTown 可能返回为空。

目前在我的 cshtml 页面中，我显示的地址如下：

```
@Html.DisplayFor(model => model.Address.ReferenceKey),
@Html.DisplayFor(model => model.Address.PremisesName),
@Html.DisplayFor(model => model.Address.PostTown),
@Html.DisplayFor(model => model.Address.Postcode),
@Html.DisplayFor(model => model.Address.County),
@Html.DisplayFor(model => model.Address.Country) 
```

返回所有数据时它工作正常但是如果某些字段为空白，它将显示例如 - REF1,,,POSTCODE,County,Country - 即它没有值的字段不会被打印但逗号看起来不太好的。我的想法是在我的模型中添加另一个字符串，如下所示。

```
public string ConcatAddress { get; set; } 
```

现在我有点卡住了 - 在我的控制器中，我正在执行以下操作来构建字符串：

```
model.ConcatAddress = model.Address.ReferenceKey + model.Address.PremisesName....etc, etc 
```

我需要做什么才能用一个等替换双逗号，这取决于值是否。在每个值检查之前可能有一个 string.IsNullorEmpty 但替换是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:42:27.287

您可以结合使用[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)和 Linq 查询。下面的方法可以很容易地变成字符串的扩展方法。您也可以使用 Linq 的 Aggregate 函数，但在我看来，String.Join 更直观。

此解决方案还将确保您无需担心前导或尾随逗号。

```
// Jon all the non-empty address components together.
model.ConcatAddress = string.Join(
    ", ", 
    (new string[] {
        model.Address.ReferenceKey,
        model.Address.PremisesName,
        model.Address.PostTown,
        model.Address.Postcode,
        model.Address.County,
        model.Address.Country
    }).
    Where(s => !string.IsNullOrEmpty(s)).
    ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:45:01.087

在列表中添加您想要的字符串，例如：

```
var str = New List<string>();
if (!string.IsNullOrEmpty(model.Address.ReferenceKey)) {
  str.Add(model.Address.ReferenceKey);
} 
```

然后加入字符串：

```
return string.Join(",", str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:44:25.417

您需要将 DisplayFor 参数映射到模型中的属性，例如 FullAddress，这样您就可以添加如下属性：

```
public string FullAddress 
{ 
    get
    {
        string[] addressParts = { ReferenceKey, Country, County, Postcode, PremisesName }
        return string.Join(",", addressParts.Where(s => !string.IsNullOrEmpty(s)).ToArray());
    }  
} 
```

并做：

```
@Html.DisplayFor(model => model.FullAddress) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:48:05.097

您可以将这样的属性添加到您的模型中

```
public string FullAddress
{
    get
    {
        return new List<string>
            { 
                Address.ReferenceKey,
                Address.PremisesName,
                Address.PostTown,
                Address.PostCode,
                Address.County,
                Address.Country
            }
            .Where(s => !string.IsNullOrWhiteSpace(s))
            .Aggregate((s1, s2) => s1 + "," + s2);
    }
} 
```

我假设*空白字段*是指空白或空格，否则替换`IsNullOrWhiteSpace`为`IsNullOrEmpty`.

# jquery - Grails中的jQuery-未捕获的ReferenceError：$未定义

> ID：11844081
> 
> 赞同：1
> 
> 时间：2012-08-07T10:35:46.107
> 
> 标签：jquery, grails, grails-plugin

我有一个基于 groovy 和 Grails（grails 版本 2.0.4）的应用程序。我正在使用 grails jQuery -plugin

如果我尝试这样的事情，在 gsp 页面中

```
 <script type="text/javascript">

     $(document).ready(function() {
        alert($); 
     });

</script> 
```

在控制台中给我错误

```
 Uncaught ReferenceError: $ is not defined list:24
      (anonymous function) 
```

但如果我尝试这样的事情

```
 <r:script>

         $(document).ready(function() {
             alert($); 
        });

    </r:script> 
```

它按预期发出警报。

grails jQuery插件安装jquery 1.7.1版本

是什么导致了这种行为/错误？

当我看到页面源代码时，我看到 jQuery 是在脚本标记之后加载的

如何解决？

我的 main.gsp 页面

```
 <!doctype html>
   <!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
   <!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
   <!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
   <!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
   <!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <r:require modules="jquery"/>
    <title><g:layoutTitle default="Grails"/></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="${resource(dir: 'images', file: 'favicon.ico')}" type="image/x-icon">
    <link rel="apple-touch-icon" href="${resource(dir: 'images', file: 'apple-touch-icon.png')}">
    <link rel="apple-touch-icon" sizes="114x114" href="${resource(dir: 'images', file: 'apple-touch-icon-retina.png')}">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'main.css')}" type="text/css">
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'mobile.css')}" type="text/css">
    <g:layoutHead/>
     <g:javascript library="jquery"/>
    <r:require module="application"/>
    <r:layoutResources />

</head>
<body>
    <div id="spinner" class="spinner" style="display:none;"><g:message code="spinner.alt" default="Loading&hellip;"/></div>
     <div class="page_header">
        <g:render template="/templates/header" />
    </div>
    <div class="container">
        <div class="left_column">
            <g:render template="/templates/commonMenu" />
        </div>
        <div class="center">
            <g:layoutBody />
        </div>
    </div>
    <div class="footer">
        <g:render template="/templates/footer" />
    </div>

</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:41:29.763

首先查看 Grails Resourses 插件的文档以了解它的工作原理以及如何使用它。当您使用脚本标记时，它将在定义的位置呈现。但是如果你使用 r:script 那么它将在页面末尾的所有模块（包括 jQuery）之后呈现（通常）。

# common-lisp - 如何正确等待 n 秒

> ID：11844092
> 
> 赞同：3
> 
> 时间：2012-08-07T10:36:16.387
> 
> 标签：common-lisp

我想实现一个函数，它在失败的情况下重试之前等待 n 秒，但是实现等待例程的正确方法是什么。

我认为带有 if 子句的无限循环可能会导致不必要的 CPU 使用。

```
(do ((time (+ (get-universal-time) (- n 1)))
     (time-cur (get-universal-time) (get-universal-time)))
    ((< time time-cur) nil)) 
```

因此：这会被认为是正确的代码还是有更标准的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:17:36.910

[睡眠](http://www.lispworks.com/documentation/lw50/CLHS/Body/f_sleep.htm)不是你要找的吗？

# google-maps - ExtJS 4从商店添加动态标记

> ID：11844102
> 
> 赞同：0
> 
> 时间：2012-08-07T10:36:51.083
> 
> 标签：google-maps, extjs, google-maps-markers

这是我的代码。我想从商店或其他文件（如 .php）中动态添加标记，其中包含添加它的函数。

```
Ext.define('Ext.ux.GMapPanel', {
extend: 'Ext.panel.Panel',
alias: 'widget.gmappanel',
requires: ['Ext.window.MessageBox'],
initComponent : function(){
    Ext.applyIf(this,{
        plain: true,
        gmapType: 'map',
        border: false
    });

    this.callParent();
},

afterFirstLayout : function(){
    var center = this.center;
    this.callParent();

    if (center) {
        if (center.geoCodeAddr) {
            this.lookupCode(center.geoCodeAddr, center.marker);
        } else {
            this.createMap(center);
        }
    } else {
        Ext.Error.raise('center is required');
    }

},

createMap: function(center, marker) {
    options = Ext.apply({}, this.mapOptions);
    options = Ext.applyIf(options, {
        zoom: 14,
        center: center,
        mapTypeId: google.maps.MapTypeId.HYBRID
    });
    this.gmap = new google.maps.Map(this.body.dom, options);
    if (marker) {
        this.addMarker(Ext.applyIf(marker, {
            position: center
        }));
    }

    Ext.each(this.markers, this.addMarker, this);
},

addMarker: function(marker) {
    marker = Ext.apply({
        map: this.gmap
    }, marker);

    if (!marker.position) {
        marker.position = new google.maps.LatLng(marker.lat, marker.lng);
    }
    var o =  new google.maps.Marker(marker);
    Ext.Object.each(marker.listeners, function(name, fn){
        google.maps.event.addListener(o, name, fn);
    });
    return o;
},

lookupCode : function(addr, marker) {
    this.geocoder = new google.maps.Geocoder();
    this.geocoder.geocode({
        address: addr
    }, Ext.Function.bind(this.onLookupComplete, this, [marker], true));
},

onLookupComplete: function(data, response, marker){
    if (response != 'OK') {
        Ext.MessageBox.alert('Error', 'An error occured: "' + response + '"');
        return;
    }
    this.createMap(data[0].geometry.location, marker);
},
afterComponentLayout : function(w, h){
    this.callParent(arguments);
    this.redraw();
},

redraw: function(){
    var map = this.gmap;
    if (map) {
        google.maps.event.trigger(map, 'resize');
    }
}

}); 
```

这是索引 php

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Stateful Array Grid Example</title>
<link rel="stylesheet" type="text/css" href="../../grid/extjs-4.1.1/resources/css/ext-all.css" />
<link rel="stylesheet" type="text/css" href="../../extjs-4.1.1./examples/shared/example.css" />

<!-- GC -->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=abcde&sensor=false"> </script>

<script type="text/javascript" src="../../extjs-4.1.1/ext-all.js"></script>

<script type="text/javascript"
        src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=true">
</script>

<!-- page specific -->

<script type="text/javascript" src="gmap.js"></script>
</head>
   <body>
  <h1>GMap</h1>
      <input type="button" id="show-btn" value="Gimme a Map" /><br /><br />

           </body> 
```

如何从文件或存储中添加标记？我不知道。请帮我。

这是来自 gmap.js 的代码

```
Ext.Loader.setConfig({enabled: true});
 Ext.Loader.setPath('Ext.ux', '../ux');
 Ext.require([
'Ext.window.*',
'Ext.ux.GMapPanel'
 ]);

 Ext.onReady(function(){
var mapwin;
Ext.get('show-btn').on('click', function() {
    // create the window on the first click and reuse on subsequent clicks
    if(mapwin) {
        mapwin.show();
    } else {
        mapwin = Ext.create('Ext.window.Window', {
            autoShow: true,
            layout: 'fit',
            title: 'GMap Window',
            closeAction: 'hide',
            width:450,
            height:450,
            border: false,
            x: 40,
            y: 60,
            items: {
                xtype: 'gmappanel',
                center: {
                    geoCodeAddr: 'Baku, Azerbaijan',
                    marker: {title: ''}
                },
                markers: [{
                    lat: 42.339641,
                    lng: -71.094224,
                    title: 'Boston Museum of Fine Arts',
                    listeners: {
                        click: function(e){
                            Ext.Msg.alert('It\'s fine', 'and it\'s art.');
                        }
                    }
                },{
                    lat: 42.339419,
                    lng: -71.09077,
                    title: 'Northeastern University'
                }]
            }
        });

    }
});
}); 
```

此代码取自 extjs 4 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:29:16.717

1.  创建一个商店来加载你的记录。
2.  然后为该商店创建一个加载事件，并为您的加载事件调整下面的代码。

**我商店的加载事件。**

```
// Put the markers on the map after the store loads.
onLoad: function(store, records, success, options) {
    var me = options.scope
    Ext.each(records, function(record) {
        this.addMarker(record.data);
    }, me)
}, 
```

# ruby-on-rails - 跟踪被破坏的对象

> ID：11844107
> 
> 赞同：3
> 
> 时间：2012-08-07T10:37:06.437
> 
> 标签：ruby-on-rails, events, destroy

我在堆栈溢出中搜索了类似的方法，但没有找到任何东西，所以我的问题是：

我需要能够跟踪一个对象是否发生了破坏以及它发生的时间。我也并不真正需要整个对象，只需要它的 id。

是否有一个宝石可以做到这一点，或者它需要在我的数据库中处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:41:16.123

应该使用观察者[模式。](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

您需要创建一个模型来观察您的模型：

```
class AuditObserver < ActiveRecord::Observer
  observe :account

  def after_destroy(account)
    p "#{account.id} destroyed"
  end
end 
```

在这里`AuditObserver`观察`Account`模型并在帐户被销毁时打印出消息。

请记住，您需要将观察者添加到您的配置 ( `config/appplication.rb`) 中：

```
config.active_record.observers = :audit_observer 
```

### 更新

如果您想在一段时间内拥有被破坏的对象，您可以使用[rails3_acts_as_paranoid](https://github.com/goncalossilva/rails3_acts_as_paranoid) gem。

然后您可以获取已删除的帐户：

```
Account.deleted_after_time(time) 
```

或者，您可以创建一个新模型 ( `Audit`)，然后将带有时间戳的已销毁 id 插入该表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:31:58.563

如果您不*介意*保留记录，您可以使用[paranoia gem](https://github.com/radar/paranoia)，它会添加`deleted_at`时间戳并使用它限定模型的范围，因此默认情况下会排除已删除的记录。

# c# - 图形的 C# 字符串长度

> ID：11844108
> 
> 赞同：2
> 
> 时间：2012-08-07T10:37:07.513
> 
> 标签：c#, graphics

我开发了一个像 Word 这样的程序。为此，我需要将字符串写入同一“行”，并且我还希望能够以不同的方式格式化每个单词/字母/句子，控制颜色、大小、字体等。

所以我必须计算一个字符串的像素长度和高度，把它们排成一行。但是这个函数有一个问题`(Graphics) MeasureString`，这个函数在字符串的前面/后面放置了额外的长度。这个函数在空白方面也有一些问题。

我尝试了不同的 StringFormater，但每次它们返回的长度过长或不够。

是否存在用于在`Graphics`对象上写入不同格式字符串的函数或用于计算字符串的确切像素长度的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:59:43.790

首先，要正确解决这是一个相当棘手的问题——您最好尝试找到一个现有的控件（例如[RichTextBox](https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.richtextbox)）来为您解决这个问题。

也就是说，如果您确实想这样做，那么这或多或少是解决此问题的正确方法，但是如果您查看[MeasureString 文档](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.measurestring)，您会注意到您看到的行为是故意的

> [MeasureString](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.measurestring)方法设计用于单个字符串，并在字符串前后包含少量额外空间，以允许悬垂字形。此外，[DrawString](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.drawstring)方法会调整字形点以优化显示质量，并且可能会显示比**MeasureString**报告的更窄的字符串。要获得适合布局中相邻字符串的度量（例如，在实现格式化文本时），请使用[MeasureCharacterRanges](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.measurecharacterranges)方法或采用[StringFormat](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.stringformat)的 MeasureString 方法之一，并传递 [GenericTypographic](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.stringformat.generictypographic)。此外，确保[图形](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics)的[TextRenderingHint](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.textrenderinghint)是 [AntiAlias](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.text.textrenderinghint).

因此，在我看来，您应该改用[Graphics.MeasureCharacterRanges 方法](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurecharacterranges%28v=vs.80%29.aspx)。

这是我准备的示例，交易以两种不同的颜色呈现一些文本。要试用它，只需将其粘贴到新表单中

```
protected override void OnPaint(PaintEventArgs e)
{
    // This is where we wish to print our string
    var region = new RectangleF(50, 50, 200, 50);

    // This is the font we wish to use
    var font = new Font("Times New Roman", 16.0F);

    // Draw a string for comparison
    DrawString(e.Graphics, "RedBlack", font, Brushes.Black, new RectangleF(50, 150, 200, 50));

    // Draw the first string and keep a track of the Region it was rendered in
    var first = DrawString(e.Graphics, "Red", font, Brushes.Red, region);

    // Adjust the region we wish to print 
    region = new RectangleF(region.X + first.GetBounds(e.Graphics).Width, region.Y, region.Width, region.Height);

    // Draw the second string
    DrawString(e.Graphics, "Black", font, Brushes.Black, region);

    base.OnPaint(e);
}

private Region DrawString(Graphics g, string s, Font font, Brush brush, RectangleF layoutRectangle)
{
    var format = new StringFormat();
    format.SetMeasurableCharacterRanges(new[] { new CharacterRange(0, s.Length) });

    g.DrawString(s, font, brush, layoutRectangle, format);
    return g.MeasureCharacterRanges(s, font, layoutRectangle, format)[0];
} 
```

这就是它的样子

![表格截图](../Images/a26872bc3fe43fa13299f4fc2fbf124a.png)

请注意，您需要小心剪辑 - 默认情况下，GDI 会为您将渲染的文本“换行”到新行，但是这将不再起作用，您最终会得到这样的结果

![换行不正确的表单截图](../Images/b9210cfeac3424f6b8b6c5c6e4fbc2a4.png)

此外，如果您尝试打印出具有不同字体/字体大小的文本，那么每种字体的“底部”都不会在您期望的位置排列。尝试查看[Formatting text on a common baseline](https://web.archive.org/web/20141006045800/http://bobpowell.net/formattingtext.aspx)以获取有关如何处理该问题的一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:41:05.047

MeasureString 无疑是解决这个问题的正确方法。看看这一边底部的示例[http://msdn.microsoft.com/de-de/library/957webty(v=vs.80).aspx](http://msdn.microsoft.com/de-de/library/957webty(v=vs.80).aspx)因为我会说没有其他方法。

# maven - RPM 警告的意义是什么：文件列出了两次

> ID：11844118
> 
> 赞同：2
> 
> 时间：2012-08-07T10:37:19.320
> 
> 标签：maven, rpm-maven-plugin

目前我正在使用 RPM Maven 插件根据需要生成 RPM。我的情况要求我对该目录中包含的文件应用不同的目录权限。
不幸的是，我不能使用默认目录权限，因为并非所有目录的所有权限都相同。
因此，我以导致以下规范文件片段的方式配置插件：

```
%files
%config %dir %attr(0755,team_prod,prodgroup) /basedir/product/tool/config
%config %dir %attr(0755,team_prod,prodgroup) /basedir/product/tool/config/examples
%config %attr(0644,team_prod,prodgroup) /basedir/product/tool/config/examples/test.conf
%config %attr(0644,team_prod,prodgroup) /basedir/product/tool/config/examples/dest.conf 
```

从网站[http://www.rpm.org/max-rpm-snapshot/s1-rpm-specref-files-list-directives.html](http://www.rpm.org/max-rpm-snapshot/s1-rpm-specref-files-list-directives.html)我了解以下内容，因为我正在使用 %dir 宏，%dir 指令用于指示 RPM 仅对目录本身进行打包，而不管在创建包时目录中可能存在哪些文件。因此，默认情况下它不会列出该目录下的所有内容。这意味着使用 %dir 指令，然后在下面明确列出文件（具有不同的权限不应导致“文件列出两次”警告消息：

```
[WARNING] warning: File listed twice: /basedir/product/tool/config/examples/dest.conf
[WARNING] warning: File listed twice: /basedir/product/tool/config/examples/test.conf 
```

我的问题与使用 maven RPM 插件无关，上述规范片段是否不足以消除警告消息？
此外，由于规范文件没有任何逻辑来查找文件或列出它们，忽略这些消息是否安全？
RPM 可以正常安装和卸载，并且所有其他 RPM 命令都可以正常工作，但是这些警告消息仍然出现？
目前我正在忽略它们。

请注意，如果目录和文件的权限相同（我认为），则不会出现警告消息。

提前感谢您的任何回复。

Maven 特定设置：

```
<mappings>
<mapping>                            
    <configuration>true</configuration>                       
    <directory>/basedir/product/tool/config</directory>
    <filemode>0755</filemode>
    <username>team_prod</username>
    <groupname>prodgroup</groupname>
</mapping>

 <mapping>                           
    <configuration>true</configuration>                       
    <directory>/basedir/product/tool/config/examples</directory>
    <filemode>0755</filemode>
    <username>team_prod</username>
    <groupname>prodgroup</groupname>
</mapping>

<mapping>
  <configuration>true</configuration>                       
  <directory>/basedir/product/tool/config/examples</directory>
  <directoryIncluded>false</directoryIncluded>
  <filemode>0644</filemode>
  <username>team_prod</username>
  <groupname>prodgroup</groupname>
  <sources>
    <source>                                  
       <location>src/main/config/examples</location>
    </source>
  </sources>
</mapping> 
```

与上述类似的条目有很多。我的以下定义太真实了，但没有别的。我知道这个插件也有递归 maven 道具，但我需要对应用的权限进行细粒度控制。例如对于 bin 目录，所有文件都有 755 等。如前所述，产生了 %dir 指令，但似乎不遵守 RPM 规则。

# java - 如何使用 swt.TabItem 添加关闭按钮？

> ID：11844119
> 
> 赞同：2
> 
> 时间：2012-08-07T10:37:20.397
> 
> 标签：java, swt, tabitem

```
TabFolder tabFolder = new TabFolder(composite, SWT.CLOSE);      

TabItem tab1 = new TabItem(tabFolder, SWT.CLOSE);
tab1.setText("Tab 1");

TabItem tab2 = new TabItem(tabFolder, SWT.CLOSE);
tab2.setText("Tab 2"); 
```

我有一个 swt.TabFolder，上面有一些 swt.TabItems。我想要一个带有这些 TabItems 的关闭按钮，所以我可以在运行时关闭我想要的选项卡。我不想使用 CTabFolder 或 CTabItem

有人可以告诉我为此我能做些什么吗？

```
public DomainUI(Composite composite, TabFolder newTabFolder, boolean comingFromSelf)
    {       
        boolean itemsDisposed = false;
        TabItem[] itemsOnTabFolder = newTabFolder.getItems();
        String[] namesOfItemsOnTabFolder = new String[itemsOnTabFolder.length];
        if(comingFromSelf) // checking when to dispose other tabs
        {
            if(itemsOnTabFolder.length != 0)
            {
                for(int i=0; i<itemsOnTabFolder.length; i++)
                {
                    namesOfItemsOnTabFolder[i] = itemsOnTabFolder[i].getText();
                    itemsOnTabFolder[i].dispose();
                }
                itemsDisposed = true;
            }
        }
        final Composite compositeInTab = new Composite(newTabFolder, SWT.NONE);
        compositeInTab.setLayout(null);

        // CREATIION OF LABELS AND TEXTFIELDS
        systemCodeLabel = new Label(compositeInTab, 0);
        systemCodeText = new Text(compositeInTab, SWT.BORDER);

        domainNameLabel = new Label(compositeInTab, 0);
        domainNameText = new Text(compositeInTab, SWT.BORDER);

        organizationalUnitLabel = new Label(compositeInTab, 0);
        organizationalUnitText = new Text(compositeInTab, SWT.BORDER);

        organizationNameLabel = new Label(compositeInTab, 0);
        organizationNameText = new Text(compositeInTab, SWT.BORDER);

        systemCodeLabel.setText("System Code");
        domainNameLabel.setText("Domain Name");
        organizationalUnitLabel.setText("Organizational Unit");
        organizationNameLabel.setText("Organization Name");
newTabFolder.addMouseListener(new MouseAdapter() 
        {
            public void mouseUp(MouseEvent arg0)
            {
                TabFolder curFolder = (TabFolder)arg0.widget;
                Point eventLocation = new Point(arg0.x, arg0.y);
                TabItem item = curFolder.getItem(eventLocation);
                if(item == null)
                    return;

                Image image = item.getImage();

                // check if click is on image
                if(        eventLocation.x >= item.getBounds().x + image.getBounds().x && eventLocation.x <= item.getBounds().x + image.getBounds().x + image.getBounds().width
                        && eventLocation.y >= item.getBounds().y + image.getBounds().y && eventLocation.y <= item.getBounds().y + image.getBounds().y + image.getBounds().height)
                {
                    System.out.println("Close tab");
                    item.dispose();
                }
                else
                {
                    System.out.println("Don't close tab");
                }
            }

        });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:41:32.233

`TabItem`没有此功能（它将忽略您使用的样式`SWT.CLOSE`）。[`CTabItem`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/CTabItem.html)除了使用instead 并使用 style之外，没有其他方法（我知道）`SWT.CLOSE`。您也必须替换`TabFolder`为`CTabFolder`。

请参阅[此](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet165.java)页面或[此](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratesCTabFolder.htm)页面以获取一个很好的示例。

**或者**，如果您无法离开`TabItem`，您可以`x`通过使用`item.setImage(xImage);`并添加`Listener`到文件夹中来为每个选项卡添加图像，处理“关闭的东西”。当然，该`x`项目将在左侧，而不是右侧...

设法让它工作。只需将 替换为`img/x.gif`您的关闭图像（为了测试，您可以使用：）`display.getSystemImage(SWT.ICON_ERROR)`：

```
public static void main(String[] args) {
    Display display = Display.getDefault();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final TabFolder folder = new TabFolder(shell, SWT.NONE);

    TabItem item = new TabItem(folder, SWT.NONE);
    item.setImage(Images.loadImage("img/x.gif"));
    item.setText("Text");

    TabItem item2 = new TabItem(folder, SWT.NONE);
    item2.setImage(Images.loadImage("img/x.gif"));
    item2.setText("Text2");

    folder.addMouseListener(new MouseListener() {

        @Override
        public void mouseUp(MouseEvent arg0) {
            TabFolder curFolder = (TabFolder)arg0.widget;
            Point eventLocation = new Point(arg0.x, arg0.y);
            TabItem item = curFolder.getItem(eventLocation);
            if(item == null)
                return;

            Image image = item.getImage();

            // check if click is on image
            if(        eventLocation.x >= item.getBounds().x + image.getBounds().x && eventLocation.x <= item.getBounds().x + image.getBounds().x + image.getBounds().width
                    && eventLocation.y >= item.getBounds().y + image.getBounds().y && eventLocation.y <= item.getBounds().y + image.getBounds().y + image.getBounds().height)
            {
                System.out.println("Close tab");
                item.dispose();
            }
            else
            {
                System.out.println("Don't close tab");
            }
        }

        @Override
        public void mouseDown(MouseEvent arg0) {
        }

        @Override
        public void mouseDoubleClick(MouseEvent arg0) {
        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
} 
```

结果如下所示：

关闭前：

![关闭前](../Images/1350ca811161784204169f096aeefe6d.png)

关闭后：

![关闭后](../Images/95de0bcc42762df1ac86117d4eaadeab.png)

# zend-framework - Zend Framework - 显示来自两个表的数据

> ID：11844125
> 
> 赞同：1
> 
> 时间：2012-08-07T10:37:44.377
> 
> 标签：zend-framework

这是我当前的模式 - 部分显示。

```
CREATE TABLE cart (
username VARCHAR(60),
productid INT(5),
quantity INT(6),

PRIMARY KEY (username, productid),
FOREIGN KEY (username) REFERENCES login(username),
FOREIGN KEY(productid) REFERENCES product(productid)
);

CREATE TABLE product (
productid INT(5) NOT NULL AUTO_INCREMENT,
name VARCHAR(30) NOT NULL,
description VARCHAR(1000),
price VARCHAR(6) NOT NULL,
stocks INT(6) NOT NULL,

PRIMARY KEY (productid)
); 
```

我的 CartController 中有这个功能：

```
public function indexAction()
{   
    $auth= Zend_Auth::getInstance(); 
    $user= $auth->getIdentity();
    $username   = $user->username;

    $cart = new Application_Model_DbTable_Cart();
    $fetch = $cart->fetchAll($cart->select()->where('username = ?', $username));
    $this->view->cart = $fetch;     
} 
```

我的 index.phtml 正在调用它：

```
<?php foreach($this->cart as $cart) :?>
<tr>
<td><?php echo $this->escape($cart['productid']);?></td>
<td></td>
<td><?php echo $this->escape($cart['quantity']);?></td>
<td></td>
<td>    
    <a href="<?php echo $this->url(array('controller'=>'product', 
        'action'=>'edit', 'id'=>$product->productid));?>">Edit</a>
</td>   
<td>    
    <a href="<?php echo $this->url(array('controller'=>'product', 
        'action'=>'delete', 'id'=>$product->productid));?>">Delete</a>
</td>
</tr>
<?php endforeach; ?> 
```

在表格中显示产品名称和价格的最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:55:30.613

您正在寻找的是加入。这就是我通常会这样做的方式。

```
$select = $cart->select()
    ->from(array('c' => 'cart'))
    ->join(array('p' => 'product', 'p.productid = c.productid')
    ->where('username = ?', $username);
$fetch = $cart->fetchAll($select); 
```

然后，您可以像使用数量一样从 $cart 变量中获取数据。

# android - 如何调出闹钟声音选择器

> ID：11844126
> 
> 赞同：0
> 
> 时间：2012-08-07T10:37:46.107
> 
> 标签：android

我发现了如何使用...调出铃声选择器

```
Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
startActivityForResult( intent, 999); 
```

...但找不到选择**警报**声音的等效项。是不是类似的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:28:10.360

您可以将标志 ( ) 与and[`ACTION_RINGTONE_PICKER`](http://developer.android.com/reference/android/media/RingtoneManager.html#ACTION_RINGTONE_PICKER)结合使用。希望能帮助到你 ：-）[`EXTRA_RINGTONE_TYPE`](http://developer.android.com/reference/android/media/RingtoneManager.html#EXTRA_RINGTONE_TYPE)[`TYPE_ALARM`](http://developer.android.com/reference/android/media/RingtoneManager.html#TYPE_ALARM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:45:31.857

您可以通过在意图中设置信息来从声卡设置 mp3，例如：

```
intent.putExtra("Ringtone", Uri.parse("file:///sdcard/audiofile.mp3")); 
```

# php - notepad++中的黄色和紫色高亮是什么意思？

> ID：11844130
> 
> 赞同：3
> 
> 时间：2012-08-07T10:37:55.247
> 
> 标签：php, syntax-highlighting, notepad++

当我在 Notepad++ 中打开我的 PHP 文件时，一些语句被突出显示，包括 PHP 开始和结束标记（紫色）和一些语句（黄色）。

这些亮点是什么意思？

PS我知道这似乎是一个非常基本的问题，但我对使用记事本++和一般编码只是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:39:46.263

它被称为[语法高亮](http://en.wikipedia.org/wiki/Syntax_highlighting)。它只是更容易看到函数在哪里，字符串在哪里，特殊代码在哪里。从链接：

> 语法高亮是某些文本编辑器的一项功能，它们根据术语的类别以不同的颜色和字体显示文本（尤其是源代码）。此功能简化了结构化语言（例如编程语言或标记语言）的编写，因为结构和语法错误在视觉上都是不同的。突出显示不影响文本本身的含义；它仅适用于人类读者和编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:52:57.023

-黄色 ; 标签匹配突出显示

*   紫色：标记高亮3

    编辑更多转到顶部菜单 -> 设置 -> 样式配置器

在这里你会找到不同语言的颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:48:59.950

在[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)它说：

> ***echo***实际上不是一个函数（它是一种语言结构）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T01:04:45.630

也许您拥有的是记事本++ 上的默认语法突出显示设置。它是当今 IDE 的一个共同特征。您可以检查您的设置突出显示颜色代表什么。它不一定表示错误或警告，而只是作为开发人员/用户查看标签开始和结束位置以及他/她使用的语法的视觉辅助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-12T15:07:17.043

当谈到notepad++中的json样式时，黄色表示错误。

我不知道这是否意味着我的文件中的 json 存在错误，或者 notepad++ 设计中是否存在邪恶错误，导致您无法纠正错误，因为黄色无法阅读。

[无效 JSON 不可读示例](https://i.stack.imgur.com/BG7te.png)

# php - Mysql解析错误

> ID：11844133
> 
> 赞同：1
> 
> 时间：2012-08-07T10:38:10.773
> 
> 标签：php, mysql

谁能帮我修复这个 MySQL 查询？我无法弄清楚我做错了什么。

```
for ($i=1;$i<=12;$i++) {

mysql_query(UPDATE bbank SET created=NOW() + INTERVAL $i MINUTES WHERE bankID='$i' );

} 
```

**错误：**

> 解析错误：语法错误，第 19 行 E:\stuff\www\test\roger.php 中的意外 T_STRING

我试过添加括号，引号等......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:39:58.510

对于整个查询，它应该`MINUTE`而且不应该缺少引号：`MINUTES`

```
mysql_query("UPDATE bbank SET created=NOW() + INTERVAL $i MINUTE WHERE bankID='$i'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:39:45.140

你错过了报价

```
mysql_query("UPDATE bbank SET created=NOW() + INTERVAL $i MINUTES WHERE bankID='$i'"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T10:39:57.777

```
mysql_query("UPDATE bbank SET created=NOW() + INTERVAL $i MINUTES WHERE bankID='$i'"); 
```

你没有创建一个字符串，所以 PHP 认为它是代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T10:39:31.333

缺少 SQL 查询周围的引号：

```
mysql_query("UPDATE bbank SET created=NOW() + INTERVAL $i MINUTES WHERE bankID='$i'"); 
```

# jquery - 添加和删 除带有表格标题的 div 标签

> ID：11844139
> 
> 赞同：0
> 
> 时间：2012-08-07T10:38:41.053
> 
> 标签：jquery

我试图让我的代码运行，但 insertAfter 在第一个 div 标签而不是最后一个标签之后插入 div。
我想在最后一个之后动态附加它。
此外，如果用户单击删除按钮，则应消除单击删除按钮的 div。
我的字幕也不好用。需要进行一些小的调整。

```
<script type="text/javascript" src="jquery.js"></script> 
```

```
$(document).ready(function() {
    var uniqueId = 1;
    $("#addRequest").click(function() {
        var RequestDiv = "#div_" + $('#combo_3 option:selected').val() + "_1";
        var RequestTableCap = "tbl_" + $('#combo_3 option:selected').val();
        if ($(RequestDiv).is(":visible")) {
            var template = $(RequestDiv).clone();
            uniqueId++;

            template.find('input,select,textarea,table').each(function() {
                var newId = this.id.substring(0, this.id.length - 1) + uniqueId;
                $(this).prev().attr('for', newId); // update label for
                this.name = this.id = newId; // update id and name (assume the same)    
            })

            .end()
            .attr('id', 'div_data_1_1_1_1_' + uniqueId)
            .appendTo('#idRequestDetails');

            var TableCaption = 'Request #:  ' + uniqueId + '  ' + $('#combo_2 option:selected').text() + '    ' + $('#combo_1                        option:selected').text() + ' (' + $('#combo_3 option:selected').text() + ')';
            var tbcaption = document.getElementById('RequestTableCap').createCaption()
            tbcaption.innerHTML = TableCaption

        }

        if ($(this).attr("enabled", true)) {
            if ($("#div_data_1_1_1_1_1").is(":hidden")) {
                $(RequestDiv).slideDown("fast"); //Slide Down Effect
                var RequestTableCap = "tbl_" + $('#combo_3 option:selected').val();
                var TableCaption = 'Request #:  ' + uniqueId + '  ' + $('#combo_2 option:selected').text() + '    ' + $('#combo_1 option:selected').text() + ' (' + $('#combo_3 option:selected').text() + ')';
                var tbcaption = document.getElementById(RequestTableCap).createCaption()
                tbcaption.innerHTML = TableCaption;

            }
        }
        else {

            $(RequestDiv).slideUp("fast"); //Slide Up Effect
        }

    });
    $('.removeReq').click(function() {
        $(this).closest.attr('div').remove();

    });
}); 
```

# hibernate - 休眠错误无法在刷新时将数据库状态与会话同步

> ID：11844149
> 
> 赞同：1
> 
> 时间：2012-08-07T10:39:21.033
> 
> 标签：hibernate

我在刷新时收到以下休眠错误消息。我在 for 循环中进行迭代，从数据库中获取对象修改它并在每次迭代中保存对象。它不会对前 20 条记录给出任何错误。对于下一条记录，它会引发以下错误。有什么建议么 ？谢谢 ！

```
 WARN [main] (org.hibernate.util.JDBCExceptionReporter:233) - SQL Error: -803, SQLState: 23505 
```

错误 [main] (org.hibernate.util.JDBCExceptionReporter:234) - DB2 SQL 错误：SQLCODE: -803, SQLSTATE: 23505, SQLERRMC: 3;REFERN.METHODOLOGY ERROR [main] (org.hibernate.event.def.AbstractFlushingEventListener :324) - 无法将数据库状态与会话 org.hibernate.exception.ConstraintViolationException 同步：无法更新：[com.MethodologyDO#1396] at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:96) at org. hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66) 在 org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2594) 在 org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java: 2476）在 org.hibernate.persister.entity.AbstractEntityPersister。update(AbstractEntityPersister.java:2803) at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:113) at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273) at org.hibernate.engine.ActionQueue .executeActions(ActionQueue.java:265) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:185) 在 org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) 在 org.hibernate。 event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216) at org.springframework.orm.hibernate3.HibernateTemplate$28.doInHibernate(HibernateTemplate.java:892 ) 在 org.springframework.orm.hibernate3.HibernateTemplate。doExecute(HibernateTemplate.java:419) at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374) at org.springframework.orm.hibernate3.HibernateTemplate.flush(HibernateTemplate.java:890)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:05:01.397

谷歌搜索错误中提到的 SQLState 导致我进入以下页面： http: [//publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp ?topic=/com.ibm.db2.udb.doc/核心/r0sttmsg.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/core/r0sttmsg.htm)。

唯一约束被破坏。您正在尝试插入/更新数据，并且两行最终在具有唯一约束的列中具有相同的值。

# string - 仅当 URI 不包含特定字符串时才进行 301 重定向

> ID：11844155
> 
> 赞同：6
> 
> 时间：2012-08-07T10:39:42.460
> 
> 标签：string, .htaccess, redirect, rewrite

我有一个 drupal 网站，它被分成两个独立的网站，现在我需要设置一些重写规则，以便将流量吸引到新网站。

原来的网站是这样的：

```
http://www.website.com (frontpage)
http://www.website.com/web1/subpage1 (subpage)
http://www.website.com/web1/subpage2 (subpage)
http://www.website.com/subpage3 (subpage)
http://www.website.com/subpage4 (subpage) 
```

对不在 web1 类别中的子页面的所有引用都已从网站中删除，但这些页面仍会发布，并且仍会显示在 Google 中。

我需要的是一个重写规则，如果用户尝试访问不是首页且不在 web1 类别中的页面，则该规则从“website.com”重定向到“new-website.com”的首页。

我想在 URI 中检查字符串“web1”的重写规则将是我的问题的答案，但不幸的是我不知道如何编写语法。

任何帮助，将不胜感激。

提前致谢。

* * *

编辑：

我的 htaccess 文件与@zessx 提出的解决方案：

```
Options -Indexes
Options +FollowSymLinks

DirectoryIndex index.php

RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^my-website\.com$ [NC]
RewriteRule ^(.*)$ http://www.my-website.com/$1 [L,R=301]

RewriteCond %{REQUEST_URI} !web1
RewriteRule  ^(.+)$ http://www.my-new-website.com [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T14:26:26.197

这就是你需要的：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_URI} !web1

RewriteRule  ^(.+)$ http://new-website.com [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:44:29.387

我的一位同事找到了解决方案：

```
RewriteCond %{REQUEST_URI} !^/web1(/|$)
RewriteCond %{REQUEST_URI} !^/admin(/|$)
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^([\w/]*)$ http://www.new-website.com [L]` 
```

# c# - 如何将json数据传递给查看

> ID：11844158
> 
> 赞同：1
> 
> 时间：2012-08-07T10:39:51.003
> 
> 标签：c#, asp.net-mvc-3

如果我想传递 json 数组来查看自动完成的目的怎么办？

ViewBug 够好吗？

最好的方法是什么？

还有一个问题。

我的页面分为几个部分。一组部分是静态内容（它不可编辑，类似于 span 标签），我通过 viewmodel 传递给查看。其他组是动态内容（输入、选择等）。

所以对于这种类型的页面，我们使用以下 ViewModel：

```
public class ViewModel
{
     public ViewModelPart1 Part1 {get; set;}
     public ViewModelPart2 Part2 {get; set;}
     public ViewModelPart3 Part3 {get; set;}
} 
```

在视图中我们有以下代码：

```
@using (Html.BeginForm())
{

      <span>@model.Part1.Age</span>   
      <span>@model.Part1.Name</span>   

.....

     <div>
          @Html.TextBoxFor(x => x.Part3.CountryName)<br />
          @Html.ValidationMessageFor(x => x..Part3.CountryId)
     </div>

     <button id="SaveButton" type="submit">Save</button>
} 
```

因此，当用户按下保存按钮时，我们将返回我们的视图模型，除了包含在`<span>`标签中的所有字段。当然这不好，因为验证失败后我们无法恢复我们的页面。为了解决这个问题，我们可以使用隐藏字段`<span>@model.Part1.Age</span> @Html.HiddenFor(x => x.Part1.Age)`。不幸的是，它使 HTML 代码变脏了，我认为这不是一个好习惯。那么怎么做才对呢？这个问题也有很多变化（传递数据部分视图，当我们动态添加新数据时保存状态等等）。我希望找到可以帮助我学习基本 asp.net mvc 模式的食谱。

# search - 在 jqGrid 树中突出显示多个搜索结果

> ID：11844163
> 
> 赞同：0
> 
> 时间：2012-08-07T10:40:07.853
> 
> 标签：search, jqgrid, tree, multi-select

我有一个树网格，我想在其中提供搜索工具并突出显示树中的结果。我查看了链接[如何搜索一行然后在 jqGrid 中选择它？](https://stackoverflow.com/questions/3791020/how-to-search-for-a-row-and-then-select-it-in-jqgrid/3798151#3798151)同样的工作正常。

但是，我的 Grid 是一棵树，如链接[Selecting multiple rows in jqGrid tree 中所述](https://stackoverflow.com/questions/9257996/selecting-multiple-rows-in-jqgrid-tree)，MultiSelect:true 选项不起作用。因此，当我搜索模式时，仅突出显示匹配模式的最后一行。我想知道如何使用匹配模式突出显示所有行。

链接[Access jqgrid elements using a javascript](https://stackoverflow.com/questions/5817489/access-jqgrid-elements-using-a-javascript/5819136#5819136)中提供的解决方案建议提供复选框以获取选定行的列表，但我的要求是突出显示满足搜索结果的行。

如果此描述不充分，我将提供我的 jqgrid 定义，但我认为这是一个通用问题，因此目前没有粘贴相同的内容。

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:11:50.127

我更改了与搜索模式匹配且符合我的目的的行的背景颜色。另一个帮助我的链接是 - [jQuery Highlight Effect with no fade away](https://stackoverflow.com/questions/3116616/jquery-highlight-effect-with-no-fade-away?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:15:43.833

如果您有匹配的行的ID..

你可以做..

```
//matchingRowIds

$.each(matchingRowIds, function(rowId, _){
    grid.setSelection(rowId); //or however it is that you're selecting the row
}); 
```

注意：不要边打电话`resetSelection()`边打电话`setSelection()`

# css - CSS Liquid 列宽

> ID：11844164
> 
> 赞同：0
> 
> 时间：2012-08-07T10:40:08.150
> 
> 标签：css

我正在开发一个需要这种布局的小部件：

![在此处输入图像描述](../Images/b303550d677366788b2e3ff28260fd87.png)

让我们假设上面显示的每个项目都是相同的小部件，但整体宽度不同。

深绿色部分是小部件项目，排列在特定宽度的列中。

我的问题是在每列之间实现液体间距，即浅绿色区域。

另请注意，当小部件无法容纳每个项目时，它会将它们扔到下一行 - 通常使用 CSS 实现`float:left`。

重要的是，这仍然是流动的，因为小部件宽度会根据窗口宽度而变化。

**编辑：**我需要的似乎是证明跨度元素（而不是文本）。我尝试使用 CSS `text-align: justify;`，但[失败了](http://jsfiddle.net/Beqgy/3/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:18:38.893

我认为`text-align: justify;`技术对你来说是完美的。

可以在这里看到一个活生生的例子 - [http://jsfiddle.net/xbmkr/7/](http://jsfiddle.net/xbmkr/7/)。

注意这里红块之间的距离是自动的，不是由任何`margin`s 设置的。尝试将`inline-block` `li`s 的宽度设置为 30% 或 20% 以获得更好的想法；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:19:38.650

您可以尝试百分比保证金：http: [//jsfiddle.net/6w2qj/1/](http://jsfiddle.net/6w2qj/1/)

# java - 如何在运行时向 JXTable 添加新行？

> ID：11844166
> 
> 赞同：0
> 
> 时间：2012-08-07T10:40:12.053
> 
> 标签：java, swing, swingx, jxtable

我正在使用 JXTable 来显示记录列表。

*   当我单击“刷新”按钮时，我希望刷新 JXTable 以显示新插入的记录。

*   而且当我单击“添加新行”按钮时，必须将新行添加到 JXTable。

我该怎么做这些？我找不到任何有用的参考或样本。请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:56:14.873

它的工作原理与普通的一样，这在[表教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)`JTable`中都有解释。但要回答你的问题：

*   不需要“刷新”按钮，除非“刷新”按钮更新`TableModel`. 更新您的那一刻，`TableModel`您应该触发适当的事件，以便`JTable`了解对模型所做的更改。那一刻，它`JTable`会自动刷新。如果您`TableModel`从`DefaultTableModel`那里扩展已经有可用的方法来处理事件（例如`insertRow`）
*   插入一行意味着将一行添加到`TableModel`+ 触发适当的事件。如果您使用`DefaultTableModel`，则可以使用可用的 API`DefaultTableModel`

# java - 声纳运行客户端路径错误

> ID：11844169
> 
> 赞同：1
> 
> 时间：2012-08-07T10:40:32.970
> 
> 标签：java, path, sonarqube

SONAR 新手路障：

1.  我刚刚在 Windows XP 上安装了 SONAR。能够将其配置为服务并使服务器运行。
2.  然后我安装了 sonar-runner（在一个名为 的目录中`sonar-run`），`sonar-project.properties`在 root 中创建了一个，并将其配置为指向我在**C:\sonar-run\src 的**Java src 项目。

3.  尝试从我的 Java 项目 src 目录运行 - C:\sonar-run\src>`..\bin\sonar-runner`

首先它因消息而失败

```
Unable to resolve path '"C:sonar-runsrc"' 
```

所以我用额外的反斜杠逃脱了路径**`"C:\\sonar-run\\src"`**，然后我陷入了这个错误：

```
C:\sonar-run\src>..\bin\sonar-runner
C:\sonar-run
Runner configuration file: C:\sonar-run\conf\sonar-runner.properties
Project configuration file: C:\sonar-run\src\sonar-project.properties
Runner version: 1.3
...
...

Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: org.sonar.api.utils.SonarException: Unable to resolve path '"C:\sonar-run\src"'
        at org.sonar.runner.Runner.delegateExecution(Runner.java:189)          
Caused by: org.sonar.api.utils.SonarException: 
Unable to resolve path **'"C:\sonar-run\src"'** 
```

* * *

**我认为是错误：**与 Unix/Windows/path/escape 序列有关。

观察：之前我使用**C:\runsonar**作为文件夹名称，并将 \r 作为特殊字符转义。

* * *

**结论：虽然这是我遇到的一个局部错误，但这些是 SONAR 新手的学习经验：**

1.  当您是作为客户端程序的 sonar-runner 时，您需要了解 SONAR 是为 *nix 设计的，因此它在 Windows 中的行为方式是不同的，并且没有明确记录
2.  在属性文件> src的windows路径>你需要转义**`\`**
3.  如果您的路径包含以**`r`**. 例如`\src\red`，即使在逃脱之后，`src\\red`它也会变成`src` `\r` `ed`这意味着一个`return`角色，依此类推`\n`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:54:13.147

您必须**删除**属性文件中的双引号错误消息显示无法解析路径' **“* *C:\sonar-run\src*** *”* *'

您的条目应类似于 C:\sonar-run\src

# javascript - 带有 CSS 和 JavaScript 的粒子

> ID：11844170
> 
> 赞同：0
> 
> 时间：2012-08-07T10:40:37.257
> 
> 标签：javascript, html, css, particles

我正在尝试创建一个非常简单的粒子系统。在这一点上不需要物理，只需动画看起来像气泡、蜜蜂或其他任何东西的 div。下面的代码创建了 div，通过 CSS 我可以让它们改变位置，向上浮动。但我似乎无法锻炼如何破坏粒子。每个粒子都做它的运动，然后返回到它的原点。如果它被完全删除，我更愿意。

谢谢你。

```
/* ==================== PARTICLES CONTROLLER ==================== */

/**
 * Particle controller interates through all elements with 
 * CSS class name PARTICLE_CSS and when found a ParticleController is instantiated 
 * for each of the elements.
 */

function ParticleBaseController(){
  var ParticleContainer = document.querySelectorAll(PARTICLE_CSS),
      ParticleContainerLength = ParticleContainer.length;

  for (var i = ParticleContainerLength - 1; i >= 0; i--){
    new ParticleController(ParticleContainer[i]);
  };  
};

 function ParticleController(element) {
  var particleElement, fragment = document.createDocumentFragment();
  var numberOfParticles = 1;

   for (var i = 0; i < numberOfParticles; i ++) {
    particleElement = document.createElement("div");
        particleElement.addClassName(PARTICLE_ELEMENT_CSS_CLASS);
    var Ypos = Math.floor((Math.random()*200)+1);
    var Xpos = Math.floor((Math.random()*200)+1); 
    particleElement.style.top = Ypos + "px";
    particleElement.style.left = Xpos + "px";  
    fragment.appendChild(particleElement);  
  }
  element.appendChild(fragment);

 setTimeout(ParticleBaseController, 3000);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:24:34.763

这对我有用。我猜测它的工作方式是只要粒子少于 15 个，粒子只会附加到容器中。虽然我不知道它们实际上是如何被销毁的。但在屏幕上，我一次只能看到 15 个粒子，或者我设置的多少个。

```
/* ==================== PARTICLES CONTROLLER ==================== */
    const NumberOfParticles = 15;

function smoking()
{
    var container = document.getElementById('particleContainer');
    for (var i = 0; i < NumberOfParticles; i++) 
    {
        container.appendChild(createParticle());
    }
}   

function randomFloat(low, high)
{
    return low + Math.random() * (high - low);
}

function createParticle()
{
    var particleDiv = document.createElement('div');
    particleDiv.style.top = "-300px";
    particleDiv.style.left = "200px"

    particleDiv.style.webkitAnimationName = 'smoke-rise, smoke-fade';

    var SmokeDuration = randomFloat(5, 10)+"s";
    var FadeDuration = randomFloat(4, 11)+"s";
    var SmokeDelay = randomFloat(0, 5)+"s";
    var FadeDelay = randomFloat(2, 9)+"s";

    particleDiv.style.webkitAnimationDuration = SmokeDuration + ', ' + FadeDuration;       
    particleDiv.style.webkitAnimationDelay = SmokeDelay + ', ' + FadeDelay;

    return particleDiv;
}

window.addEventListener("DOMContentLoaded", smoking, false); 
```

# sql - 字段不等于的 SQL While 循环

> ID：11844171
> 
> 赞同：0
> 
> 时间：2012-08-07T10:40:42.487
> 
> 标签：sql, sybase

我正在尝试在 SQL 中运行一个循环，直到找到一个等于某事的字段。例如

```
while exists (select account from #nodes where account IS NOT EQUAL TO 'STRATERGY') 
```

但我不知道该怎么做，我希望它循环，直到它在帐户列的一个字段中找到单词 STRATERGY。

任何人都可以伸出援助之手吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:57:43.820

根据您的查询，我假设您必须对每个帐户执行一些等于“战略”的操作。如果是这样，请使用游标而不是循环。

如果我的假设是错误的，请检查[这个](http://blog.sqlauthority.com/2007/10/24/sql-server-simple-example-of-while-loop-with-continue-and-break-keywords/)

像这样的东西。

```
DECLARE @intFlag INT
select @intFlag =count(*) from #nodes where account IS NOT EQUAL TO 'STRATERGY'
WHILE (@intFlag >1 )
BEGIN
PRINT @intFlag
select @intFlag =count(*) from #nodes where account IS NOT EQUAL TO 'STRATERGY'
END
GO 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-16T12:53:59.270

您可以使用不等于在 C 语言、java、C# 等中使用的相同。

```
declare @n int
set @n=5
while @n !=0
begin
    print @n
    set @n=@n-1
end 
```

# entity-framework - 使用 Code First 搜索实体框架域模型

> ID：11844174
> 
> 赞同：1
> 
> 时间：2012-08-07T10:40:57.120
> 
> 标签：entity-framework, reflection, entity-framework-4.1, ef-code-first, fluentvalidation

得到了一个非常困难的 EntityFramework Code First 问题。我会尽可能简单。

假设我们有 n 个类，现在让我们从 2 个开始

```
public class Person  
{   
    public string Name { get; set; }  
}

public class Address   
{  
    public string AddressLine1 { get; set; }  
    public string AddressLine2 { get; set; }  
} 
```

现在，我想做的是能够使用单个字符串搜索域模型，即像 DbContext.Search("Foo") 之类的东西。该调用将在人员和地址表中搜索字符串匹配项，并返回一个包含人员和地址实体的列表。

不得不说我不完全清楚如何去做，但我正在考虑使用 DataAnnotations 来做这样的事情

```
public class Person  
{  
    **[Searchable]**  
    public string Name { get; set; }  
}

public class Address   
{  
    **[Searchable]**  
    public string AddressLine1 { get; set; }  
    **[Searchable]**  
    public string AddressLine2 { get; set; }  
} 
```

我在正确的轨道上吗？我应该改用 Fluent API 吗？反射？

任何和所有的想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:35:00.810

创建一个新的对象类型，您将在其上投影 2 种类型的搜索结果：

```
public class Result
{
    public string MainField { get; set; } 
    // you may have other properties in here.
} 
```

然后找到符合您的条件的每种类型的实体，将它们投影到此类型上：

```
var personResults = DbContext.Persons
      .Where(p => p.Name == "Foo")
      .Select(p => new Result{MainField = p.Name}); 
      // don't forget to map to any other properties you have in Result as well

var addressResults = DbContext.Adresses
     .Where(a => 
        a.AddressLine1 == "Foo" ||  
        a.AddressLine2 == "Foo"
     ).
     .Select(a => new Result{MainField = a.AddressLine1 + ", " + a.AddressLine2 });
     // again, don't forget to map to any other properties in Result 
```

然后合并列表：

```
var allResults = personResults.Union(addressResults).ToList(); 
```

...此时您可以根据需要对列表进行排序。

“Result”和“MainField”，比较通用；只是使用它们，因为我不完全了解您的域模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:01:14.440

the Find method searches only in the Primary Key column. If we don't make any column explicitly primary key column then find method will throw error. Generally EF convention takes propertyName+id as the primary key in the class. But if you want to search with Name then Make add [Key] to the property. it will become primary key and u will be able to find properties. dbContext.Addresses.find("Foo");

# java - AppEngine中的JDO：从无主关系中删除时保留原始实体

> ID：11844175
> 
> 赞同：2
> 
> 时间：2012-08-07T10:41:03.250
> 
> 标签：java, google-app-engine, jdo

我使用 JDO 3.0 语法定义了一个无主关系：

```
@Persistent
@Unowned
private Set<Role> roles; 
```

我有几个应该分配给用户的预定义角色。我使用以下代码向用户添加/删除角色：

```
roles.add(roleEntity);
roles.remove(roleEntity); 
```

问题是这样删除也会从数据存储中删除原始实体，但我只想删除引用。我知道我只能在父实体中存储可以解决问题的密钥，但是有更好的解决方案吗？使用这种“自然”的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:59:25.333

我看到同样的事情。当然，我是这一切的新手，但即使使用@Unowned，如果我从第一次持久化时所在的 ArrayList 中删除一个项目，该对象也会从数据存储中删除。似乎与我添加@Unowned 之前几乎相同。因此，我可以将对象从一个对象的 ArrayList 转移到另一个对象的唯一方法是在调用 remove() 之前先找到它，然后进行深层复制，然后我可以 remove() 并将副本放在另一个列表中. 一点都不自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T14:34:02.630

由于我多年来一直在努力解决这个问题，让我分享最终对我有用的解决方案。谁知道，它可能会帮助其他人，因为文档不是很有帮助。

要在不删除原始持久对象的情况下从父集合中删除子对象，您需要：

1）使用**集合**而不是列表

起初我只使用列表，A) 用于排序，B) 因为 Sets + RequestFactory ValueProxy 不起作用。所以一定要使用**EntityProxy**

2) 用**@Unowned注释这个集合**

他们没有将此注释放在他们的 Unowned 一对多示例中：[https](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Unowned_Relationships) ://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Unowned_Relationships 但是如果没有它，当您尝试时会出现异常将元素添加到您的集合（不能更改父级）

3）不确定是否有必要，但我也用**@Element(dependent = "false")进行了注释**

希望这会帮助一些人。如果没有，好吧，没有伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:58:18.183

我想这个问题应该得到一个真正的最终答案。

所描述的行为是由 JDO 中的错误引起的，现在应该修复它。有关详细信息，请参阅[http://code.google.com/p/datanucleus-appengine/issues/detail?id=290 。](http://code.google.com/p/datanucleus-appengine/issues/detail?id=290)另请注意，无论文档怎么说，`owned`关系*始终是 。* `dependent`

不幸的是，在我搬回**JDO 2.0**后它被修复了。在 JDO 2.0 中，我`unowned`使用`collections of keys`或使用`foreign keys`. 实际上这不是一个糟糕的解决方案，所以我不打算再次尝试**JDO 3.0**。对于我`batch fetch`用来获取子对象的键集合，如果是外键，我使用带有`where`语句的简单查询。有时最好使用第一种解决方案，有时使用第二种解决方案。无论如何，这一切都被一个干净的 API 所覆盖，因此最终的代码简单而“自然”。（我希望在文档中直接描述这种方法，这样我们就不必费力地学习它。）

重要的是，在这两种情况下，我都可以在不删除原始实体的情况下破坏关系。这是真正的`unowned`关系。

# php - 用 php 给下拉列表一个默认值

> ID：11844179
> 
> 赞同：1
> 
> 时间：2012-08-07T10:41:09.647
> 
> 标签：php, mysql, html, sql, drop-down-menu

我想使用 php / mysql 查询为下拉列表提供默认值

就像在 db 表 users 中有一条记录说 usergroup

我想要它所以下拉默认值更改为该记录的值到目前为止我得到了这个代码：

```
Usergroup: <select value=\"" . $usergroup . "\" name='usergroup'>
<option value='4'>Administrator</option>
<option value='3'>Moderator</option>
<option value='2'>Donator</option>
<option value='1'>Regular Member</option>
</select> 
```

和 php 部分：

```
 $username = mysql_real_escape_string(htmlentities(stripslashes($_POST['username'])));
  $query="SELECT * FROM users where `username` like '{$username}'";
$result = mysql_query($query);

$num = mysql_numrows($result);

$i=0;
while ($i < $num) {
$username2=mysql_result($result,$i,"username");
$name=mysql_result($result,$i,"name");
$usergroup=mysql_result($result,$i,"usergroup");
$email=mysql_result($result,$i,"email");
$ip=mysql_result($result,$i,"ip");
$profpic=mysql_result($result,$i,"profilepic");
$id=mysql_result($result,$i,"id");
$i++;
} 
```

谢谢！

我让它与一些 if 语句一起工作，我打算那样使用它，但不希望代码变得太乱：

```
if ($usergroup == 4) {
echo "<select name='usergroup'><option value='4' selected='selected'>Administrator</option><option value='3'>Moderator</option><option value='2'>Donator</option><option value='1'>Regulat Member</option></select><br>";
}
if ($usergroup == 3) {
echo "<select name='usergroup'><option value='4'>Administrator</option><option value='3' selected='selected'>Moderator</option><option value='2'>Donator</option><option value='1'>Regulat Member</option></select><br>";
}
if ($usergroup == 2) {
echo "<select name='usergroup'><option value='4'>Administrator</option><option value='3'>Moderator</option><option value='2' selected='selected'>Donator</option><option value='1'>Regulat Member</option></select><br>";
}
if ($usergroup == 1) {
echo "<select name='usergroup'><option value='4'>Administrator</option><option value='3'>Moderator</option><option value='2'>Donator</option><option value='1' selected='selected'>Regulat Member</option></select><br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:15:41.440

这可能是您正在寻找的：

```
<?php
  // $userGroup = the value from the database
  $userGroup = 4;
?>

<select>
  <option <?php echo ($userGroup) == 1 ? "selected" : "" ?> value="1">Administrator</option>
  <option <?php echo ($userGroup) == 2 ? "selected" : "" ?> value="2">Moderator</option>
  <option <?php echo ($userGroup) == 3 ? "selected" : "" ?> value="3">Donator</option>
  <option <?php echo ($userGroup) == 4 ? "selected" : "" ?> value="4">Regular member</option>
</select> 
```

如果您不认识 if/else 语法（简写），[请查看本指南](http://davidwalsh.name/javascript-shorthand-if-else-examples)。对于这种情况真的很方便。

# java - 从java中的复杂JSON中提取特定值

> ID：11844180
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:11.490
> 
> 标签：java, json

我有一个有效的复杂json，我需要解析这个json并从java中这个复杂的json中只打印ak、dt和mi的值......希望你能帮助我......

```
{
  "CP": "{\"e\":{\"h\":{\"ak\":\"1c8d1d7eaa32ff3f58a882\",\"at\":\"app\"},\"c\":{\"dt\":\"MEmulator\",\"mi\":\"DD278047D56BF292F1FC16F\",\"ui\":\"m4J\/2s=\",\"av\":\"0.2\",\"pn\":\"WP\",\"pv\":\"7.10\",\"nv\":\"C# 1.1.0\",\"al\":\"en\"},\"b\":[{\"ts\":139658547,\"tz\":-400,\"s\":\"StartUpScreen\",\"et\":8,\"ev\":\"sessionStart\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{\"DaySessionStarted\":\"Tuesday\"}},{\"ts\":1319549658751,\"tz\":-400,\"s\":\"StartUpScreen\",\"et\":3,\"ev\":\"AutomaticFeedRefresh\",\"si\":\"19477682-de5ec331dc33\",\"tt\":{}},{\"ts\":1319549675609,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549677179,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549678401,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-de55-414f-82c9-19bec331dc33\",\"tt\":{}},{\"ts\":1319549679973,\"tz\":-400,\"s\":\"MainScreen\",\"et\":3,\"ev\":\"MainScreen Event\",\"si\":\"19477682-c9-19bec331dc33\",\"tt\":{}}],\"tt\":{\"OSV\":\"ME\"}}}",
  "SP": {
    "httpHeaders": {
      "x-bluecoat-via": [
        "35D3468F4D5F18"
      ],
      "content-type": [
        "application\/x-form-ur"
      ],
      "connection": [
        "Keep-Alive"
      ],
      "host": [
        "20.198.134.198:8080"
      ],
      "accept": [
        "text\/html, image\/gif, image\/jpeg, *; q=.2, *\/*; q=.2"
      ],
      "content-length": [
        "1791"
      ],
      "user-agent": [
        "Java\/1.6.0_23"
      ]
    },
    "senderIp": [
      "112.101.216.113"
    ],
    "receiveTimeStamp": "2012-06-26T06:29:36+0000"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:44:33.097

使用[json-path](http://code.google.com/p/json-path/)。

它就像 JSON 的 xpath，允许您在 JSON 对象上编写字符串查询。项目站点上有很多示例显示了可能的用法，但在您的情况下，它可能只是一个简单的*点表示法*。

提供的 JSON 示例：

```
// First extract the CP value, as its JSON-string-inside-JSON:
String cp = JsonPath.read(yourJsonString, "$.CP");

// Treat the `cp` as another JSON-string, and extract the ak value:
String ak = JsonPath.read(cp, "$.e.h.ak");

// Do the rest yourself... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-27T17:13:14.327

您可以使用 JsonPath 来提取值。我推荐[JsonSurfer](https://github.com/jsurfer/JsonSurfer)库。

```
<dependency>
    <groupId>com.github.jsurfer</groupId>
    <artifactId>jsurfer-simple</artifactId>
    <version>1.2.1</version>
</dependency> 
```

示例代码分两步解决您的问题：

1) 从“$.CP”节点中提取纯字符串。

2) 解析“CP”字符串并提取“ak”、“dt”和“mi”的值。

```
JsonSurfer jsonSurfer = JsonSurfer.simple();
String cp = jsonSurfer.collectOne(new StringReader(yourString), String.class, "$.CP");
Collection<Object> result = jsonSurfer.collectAll(new StringReader(cp), "$..ak", "$..dt", "$..mi"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:55:16.480

就像其他人建议的那样，您可以使用许多库（npe 建议似乎非常好）。另一方面，如果您只有那些简单的案例，并且您真的不需要对 JSON 做任何其他事情，那么您可能只需要一个正则表达式。本质上 JSON 只是文本，因此您可以执行以下操作：

```
 Pattern akPattern = Pattern.compile("ak\":\"([^\"]+)");
    Matcher matcher = akPattern.matcher(jsonAsString);

    matcher.find();
    String akValue = matcher.group(1);

    System.out.println(akValue); 
```

这将打印出“ak”的值。

但同样，如果我没有任何其他 JSON 要求，我只会这样做。否则，请使用 JSON 库。

我的 2 美分。

# .net - 多个端口的 TCPListener

> ID：11844182
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:14.717
> 
> 标签：.net, multithreading, sockets, tcplistener

我需要一些关于以下问题的指示（工作示例会很棒）。我是套接字编程的新手，虽然不是 .net，但不介意 VB 或 c# 中是否有任何帮助。

我有一个“客户端”系统，它每隔几秒（比如说 10 秒）就会吐出规则的数据块（实际上是 ascii）。数据将很小，可能小于 1K，并且我可以让每个输出由特定序列（例如`<EoM>`）分隔。这个“客户端”将输出到几个（多于 1 个，少于 5 个）不同的端口。

我需要编写一个服务器，它将打开所需数量的端口，监听它们是否有数据到达。当消息到达其中一个端口时，`<EoM>`最后带有分隔符，我希望能够获取该数据并对其进行一些处理（解析它并输入数据库以获取信息）。并继续监听下一条数据到达。这需要对所有定义的端口进行。如果客户端应该断开连接，我希望端口能够等待并监听重新连接，然后像以前一样继续处理。但是作为将要进行通信的单个客户端，我可以假设如果 1 个端口断开连接，如果这比断开连接后再次侦听更容易，则可以重新启动服务器进程。

很抱歉，就像我说的那样，我对套接字编程很陌生，所以对于如何做到这一点的任何实际示例，我们将不胜感激。理想情况下，最终结果将是一个 Windows 服务，但我想将它作为一个表单应用程序启动，直到我完成所有工作以便于调试。

为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:28:45.897

[TCPListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.71%29.aspx)一次只监听一个端口。如果要侦听多个端口，则需要创建许多 TCPListener 实例。

由于您希望每个端口上的侦听器执行不同的操作，因此您需要在每个端口上接受一个客户端，并处理您在那里接收的数据。

上面的链接提供了一个关于如何接受客户端和监听数据的基本初学者示例。尽管异步方法的性能要好得多，但此同步代码更简单，可以让您轻松上手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T12:25:08.163

您可以使用 TAP/TUN 驱动程序来安装您自己的网络接口（Windows 和 Linux），让您可以访问原始以太网帧。这样您就可以对帧执行自己的过滤，找到相关的 IP 和端口，并转发到您自己的 TCP/IP 软件堆栈进行服务。

虽然这可行，但也有缺点：

1.  TAP/TUN 驱动程序往往为 10Mbps
2.  较低级别数据包的用户模式处理是 CPU 密集型的，有时会丢弃数据包
3.  必须构建或使用 TCP/IP 库将帧消化成 TCP 协议，包括维护 TCP 会话状态。

TAP/TUN 非常适合安全筛选和 UDP 壮举，但 TCP/IP 是另一个级别。

尽管这是一个可行的答案，但我会推荐@nunespascal 的答案。异步编程并没有那么难，如果你只是在说大约 5 个听众，那是合理的。即使是数百个休眠的异步侦听器也应该是合理的。

# python - 多处理是适合我的工具吗？

> ID：11844184
> 
> 赞同：2
> 
> 时间：2012-08-07T10:41:18.353
> 
> 标签：python, multiprocessing

我需要编写一个非常具体的数据处理守护进程。

这是我认为它可以与多处理一起使用的方式：

*   进程#1：一个进程来获取一些重要的元数据，它们可以每秒获取一次，但这些数据必须在进程#2中可用。进程#1 写入数据，进程#2 读取它们。

*   进程#2：两个进程将根据进程#1 中收到的内容获取真实数据。获取的数据将存储到（大）队列中以“稍后”处理

*   进程#3：两个（或更多）进程轮询在进程#2 中创建的队列并处理这些数据。完成后，将填充一个新队列以在流程 #4 中使用

*   进程#4：两个进程将读取由进程#3 填充的队列并通过HTTP 发送回结果。

所有这些不同过程背后的想法是尽可能地将它们专门化，并使它们尽可能独立。

所有这些进程将被包装到一个在这里实现的主守护进程中：

*   [http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)

我想知道我所想象的是否相关/愚蠢/过度杀伤/等等，特别是如果我在将守护进程`multiprocessing.Process`的主父进程中运行守护进程（es）。此外，我有点担心潜在的锁定问题。理论上，读写数据的过程使用不同的变量/结构，因此应该避免一些问题，但我仍然担心。

也许对我的上下文使用多处理不是正确的做法。我很想得到您对此的反馈。

备注：

*   我不能使用 Redis 作为数据结构服务器
*   我考虑过将 ZeroMQ 用于 IPC，但如果多处理也可以完成这项工作，我会避免使用另一个额外的库。

提前感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:30:18.697

一般来说，你在不同工作人员中的不同任务以及你让他们沟通的计划看起来已经很好了。但是，您应该注意的一件事是，每当处理步骤受 I/O 或 CPU 限制时。如果您受 I/O 限制，我会尽可能使用线程模块：您的应用程序的内存占用会更小，并且线程之间的通信可以更有效，因为允许共享内存。仅当您需要额外的 CPU 能力时，才使用多处理。在您的系统中，您可以同时使用两者（看起来进程 3（或更多）将执行一些繁重的计算，而其他工作人员将主要受 I/O 限制）。

# perl - 为什么我的 Perl 脚本会说“无法在未定义的值上调用方法解析”？

> ID：11844186
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:22.250
> 
> 标签：perl, csv

我是 Perl 的新手，但仍在试图弄清楚如何用这种语言编写代码。

我目前正在尝试将一长串 csv 拆分为多行。

数据示例

```
a,b,c<br />x,y,x<br /> 
```

到目前为止，我已经设法将其拆分，添加引号，以便稍后再次添加到 CSV 文件中：

```
"a,b,c""x,y,z" 
```

通过使用引号，它只是表示哪些 CSV 集是这样在一起的。

我遇到的问题是，当我尝试创建 CSV 文件时，在字符串中传递数据时出现错误

> “无法在未定义的变量上调用方法“解析”。

当我打印出我传入的字符串时，它被定义并保存数据。我希望这是一件简单的事情，由于缺乏经验，我做错了。

我正在使用的 CSV 代码是：

```
use warnings;
use Text::CSV;
use Data::Dumper;
use constant debug => 0;
use Text::CSV;

print "Running CSV editor......\n";

#my $csv = Text::CSV->new({ sep_char => ',' });

my $file = $ARGV[0] or die "Need to get CSV file on the command line\n";

my $fileextension = substr($file, -4);

#If the file is a CSV file then read in the file.
if ($fileextension =~ m/csv/i)
{   
    print "Reading and formating: $ARGV[0] \n";

    open(my $data, '<', $file) or die "Could not open '$file' $!\n";

    my @fields;
    my $testline;
    my $line;

    while ($line = <$data>) 
    {       
        #Clears the white space at the end of the line.
        chomp $line;

        #Splits the line up and removes the <br />.
        $testline = join "\" \" ", split qr{<br\s?/>}, $line;

        #my $newStr = join $/, @lines;
        #print $newStr;
        my $q1 = "\"";
        $testline = join "", $q1,$testline,$q1;
        print "\n printing testline: \n $testline \n";

    } 

    $input_string = $testline;

    print "\n Testing input string line:\n $input_string";

    if ($csv->parse ($input_string)) 
    {
     my @field = $csv->fields;

     foreach my $col (0 .. $#field) {
         my $quo = $csv->is_binary ($col) ? $csv->{quote_char} : "";
         printf "%2d: %s%s%s\n", $col, $quo, $field[$col], $quo;#
        }
    }
    else 
    {
     print STDERR "parse () failed on argument: ",
         $csv->error_input, "\n";
     $csv->error_diag ();
     }
    #print $_,$/ for @lines;

print "\n Finished reading and formating: $ARGV[0] \n";
}else
{   
    print "Error: File is not a CSV file\n"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:46:08.400

您没有创建`Text::CSV`对象，但您尝试使用它。

> “无法在未定义的变量上调用方法“解析”

这意味着 your`$csv`不存在，因此它没有名为`parse`. `Text::CSV`只需在所有行下方的代码顶部首先创建一个对象`use`。

```
my $csv = Text::CSV->new; 
```

请查看[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV).

* * *

另外，我有没有提到你应该**`use strict`**？

# asp.net - ASP.NET 表单默认按钮不起作用。

> ID：11844188
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:26.897
> 
> 标签：asp.net, forms, login

ASP.NET 默认按钮和默认焦点不起作用。我的应用程序托管在我的服务器机器中的 IIS 上。（服务器名称说**Server1**）。如果我在机器焦点之外访问应用程序 URL，并且默认按钮单击工作正常 (http://Server1/VPath/Login.aspx)。如果我在服务器中使用 localhost 访问应用程序 URL，它工作正常（http://localhost/VPath/Login.aspx），但是当我使用服务器访问 URL 时，焦点和默认按钮单击（在 Enter 上）不起作用服务器中的名称。(http://server1/VPath/Login.aspx)。可能是什么问题？

**注意：**以上所有情况下 IE 版本相同。

这是我的代码文件。

## 登录.aspx

```
<asp:Panel ID="LoginWrapper" runat="server" CssClass="loginWrapper" >
    <asp:Login ID="LoginControl" runat="server" meta:resourcekey="LoginResource1" 
        DisplayRememberMe="false" OnAuthenticate="authenticate">
        <LayoutTemplate>
            <table>
                <tr>
                    <td>
                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName" meta:resourcekey="UserNameLabelResource1"
                            Text="User Name:"></asp:Label></td>
                    <td>
                        <asp:TextBox ID="UserName" runat="server" meta:resourcekey="UserNameResource1"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName"
                            ErrorMessage="User Name is required." ToolTip="User Name is required."
                            meta:resourcekey="UserNameRequiredResource1" Text="*"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password" meta:resourcekey="PasswordLabelResource1"
                            Text="Password:"></asp:Label></td>
                    <td>
                        <asp:TextBox ID="Password" runat="server" TextMode="Password" meta:resourcekey="PasswordResource1"></asp:TextBox>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: center; color: red">
                        <asp:Literal ID="FailureText" runat="server" EnableViewState="False" meta:resourcekey="FailureTextResource1"></asp:Literal>
                    </td>
                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                        <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Login"
                            meta:resourcekey="LoginButtonResource1" /></td>
                </tr>
            </table>
        </LayoutTemplate>
    </asp:Login>
</asp:Panel> 
```

## 登录.aspx.cs

```
 protected void Page_Init(object sender, EventArgs e)
    {
        Response.RedirectLocation = Request.Url.ToString();
        // bug#19156 Enter key should Login
        LoginControl.Focus();
        Page.Form.DefaultButton = ((Button)LoginControl.FindControl("LoginButton")).UniqueID;
    }

protected void Page_Load(object sender, EventArgs e)
    {
        log.Debug("Loading login Page");
        try
        {
            if (Request.QueryString["activity"] != null)
            {
                string activity = Request.QueryString["activity"].ToString();
                switch (activity)
                {
                    case "login":
                        if (Request.QueryString["Username"] != null)
                            un = Request.QueryString["Username"].ToString();
                        if (Request.QueryString["Password"] != null)
                            pw = Request.QueryString["Password"].ToString();
                        authenticate(null, null);
                        break;
                }
            }
        }
        catch (ExecutionEngineException ex)
        {
        }
        if (Request.IsAuthenticated && !IsPostBack)
        {
            Response.Redirect("~/VPath/NotAuthorized.aspx");
        }
        else if (!IsPostBack)
        {
           HideTopMenu();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:26:59.717

我不知道为什么您的代码在从外部访问时不起作用，但我认为问题出在`page_init`event 上。

所以更好我会建议覆盖它，这也是安全的： -

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        Response.RedirectLocation = Request.Url.ToString();
        // bug#19156 Enter key should Login
        LoginControl.Focus();
        Page.Form.DefaultButton = ((Button)LoginControl.FindControl("LoginButton")).UniqueID;
    } 
```

# linux - 通过脚本设置永久路径

> ID：11844195
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:54.937
> 
> 标签：linux, bash, shell

我正在尝试将一个文件夹添加到 linux 中的 PATH 中。我想通过脚本自动化它。这是我写的脚本：

```
#!/bin/sh
echo "Setting PATH..."
echo "export PATH=$PATH:/opt/mysoftware/scripts/client" >> ~/.bashrc
. ~/.bashrc 
```

即使在执行脚本之后，PATH 也没有得到更新。但我可以看到 bashrc 文件已更新。

当我注销并登录时，PATH 会更新。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:43:38.330

您正在子 shell 中运行脚本。尝试采购它：

```
source script.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:50:46.927

如果您希望在 .bashrc 中使用此脚本，请删除该脚本。你现在完成了。;-)

另一种方法是将它放在一个函数中。我曾经有两个功能， `use()`而`forget()`在我的 ksh 环境中正是这样做的。

`use /opt/python`将相当于`PATH=/opt/python/bin:$PATH`, 一次。第二次运行将无济于事。Even`use python`会在几个位置查找 /{usr,opt}/python/{bin,sbin} 并将第一个匹配项插入 PATH。

相反， `forget python`将`/opt/python/bin:`再次从 PATH 中删除。

# java - 使用 JMXProxyServlet 在 Java 程序中监控 Tomcat

> ID：11844196
> 
> 赞同：0
> 
> 时间：2012-08-07T10:41:56.463
> 
> 标签：java, tomcat, proxy, jmx

我正在尝试在 Java 程序中监视 Tomcat，但我不知道应该如何将用户名和密码传递给`JMXProxyServlet`. 有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:18:24.120

因此，您的监控软件将使用 Java 编写。您可以配置您的管理器 web 应用程序以使用 HTTP BASIC 身份验证和 MemoryRealmDatabase（这是默认设置的方式）。然后，

*   启用`tomcat-users.xml`具有该`manager-jmx`角色的用户。
*   使用常规 Web 浏览器验证 HTTP BASIC 身份验证是否正常工作。
*   将“授权”HTTP 标头与您的 HTTP 请求一起设置为`JMXProxyServlet`. 该标头的值应该是`base64(username + ":" + password)`.

各种 HTTP 帮助程序库（如[Apache httpclient](http://hc.apache.org/httpcomponents-client-ga/)）都有专门的方法来帮助您执行此操作，或者您可以`HttpURLConnection`直接使用。

# php - 更改日期时间选择器的时区

> ID：11844202
> 
> 赞同：1
> 
> 时间：2012-08-07T10:42:20.363
> 
> 标签：php, jquery

单击“现在”按钮时，我的 datetimepicker(jquery.ui.datepicker.js) 显示服务器时间。是否可以在单击“现在”按钮时显示“加拿大汉密尔顿的当前当地时间”？即，是否可以使日期时间选择器按照汉密尔顿时间工作？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:47:49.053

不，JavaScript 使用用户操作系统中的时间设置。您可以将时区设置传递给服务器端，并在时区之间进行转换（即，如果您想将 UTC 存储在数据库中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:50:50.633

加拿大...嗯，那是-4Hours UTC？

这可以帮助您：

```
$(".timepick1").datetimepicker({ 
    dateFormat: $.datepicker.RFC_2822, 
    timeFormat: 'hh:mm z', 
    showTimezone: true,
    timezoneList: [
            {"value": "-0400", "label": "Time in Canada"}, 
        ]
}); 
```

或者如果您不想显示时区：

```
$(".timepick2").datetimepicker({ 
    dateFormat: $.datepicker.RFC_2822, 
    timeFormat: 'hh:mm z', 
    showTimezone: true, 
    timezone: "-0400" 
}); 
```

# java - 如何处理Java中大量小对象的内存效率

> ID：11844203
> 
> 赞同：2
> 
> 时间：2012-08-07T10:42:24.900
> 
> 标签：java, oop, memory

我有一个应用程序，它从文件中获取数据并将其存储以供以后使用。文件中的每一行对应一个对象`Foo`，该对象包含由单个字符组成的`n`成对对象，每个对象都有一个不同的. 所以我像这样存储这些数据：`Bar``String``Name`

`Foo extends HashMap<Name, Pair<Bar, Bar>>`

`Pair<A, B>`我自己的类在哪里，它只存储 2 个值并提供一些方法（`equals`等`hashcode`）。

我遇到的问题是，当我存储`n=114`（这恰好是我的测试数据中的数字）`Pair`对象时，`Foo`它的保留大小应该不超过 228 字节，而实际上它更像是 25kbytes。这意味着当我有大约 1000 个`Foo`对象时，我需要 25MB 的内存而不是 228kB，这是不可接受的。（注意：每个`Foo`对象的键是相同的，`fooOne.keySet().equals(fooTwo.keySet())`）

我正在使用[VisualVM](http://visualvm.java.net)来分析我的应用程序，当我深入研究一个实例时，`Foo`我看到：

```
Field           Type             Retained
-               
this            Foo              24750
...             
v table         HashMap$Entry[]  24662
  v [0]         HashMap$Entry    200
    v value     Pair             156
      v first   Bar              60
        ...
        > code  String           36
      v second  Bar              60
        ...
        > code  String           36
    v key       Name             72
      ...
      > name    String           36
  > [1]         HashMap$Entry    200
  > [2]        <HashMap$Entry>   -
  ...
  > [233]       HashMap$Entry    600
  ...
  > [255]      <HashMap$Entry>   - 
```

因此，正如您所看到的，所有有用的信息都被大量无用的（对我而言）数据所包围。如果我有更少、更大的对象和相同的数据，我可以看到有用：无用的比率会更好，但我看不出如何以任何其他方式实现这一点。有没有其他方法可以存储我的数据，但仍然像这样方便易用？

**编辑**

我的应用程序需要可扩展到 6000 个以上的`Bar`实例，甚至可能有更多的`Foo`实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:47:38.643

我不完全确定我的问题是否正确，但在这种情况下使用 Flyweights 可能会奏效。

[蝇量级模式](http://en.wikipedia.org/wiki/Flyweight_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:51:08.833

我认为你的很多问题通常只是面向对象的代码，特别是 Unicode 转换。

在 Java 中，字符串中的一个字符需要两个字节来存储。因此，与将文件保存在驱动器上相比，您至少可以期望将内存使用量翻倍。

每个对象，每个小字符串都需要一个字的信息，因为 JVM 需要指向您的对象的指针。因此，每对数据都是一个单词表示键，一个单词表示值加上每个数据的实际大小。现在这些指针被添加到散列中，散列使用一个词指向自身，并使用几个词指向条目集。就这样。这是面向对象的编程。

现在您可以更改您的代码以将该对存储为一个简单的 char[2]。这会减少你的记忆足迹。然后当你想与它交互时，你可以用一个 Pair 对象包装数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:51:45.307

您可以尝试删除 Bar 和 Pair 对象并存储一对简单的 String 对象，例如“ab”（其中“a”、“b”当前对应于由 Bar("a") 和 Bar(" b"))

可能使用享元模式来共享所有 Foo 对象的通用名称，因为您有`fooOne.keySet().equals(fooTwo.keySet())`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:58:36.463

你说：

> 我有一个应用程序，它从文件中获取数据并将其存储以供以后使用

后来（在评论中）

> 我被要求尽可能提高内存效率

我怀疑您最节省内存的解决方案是存储文件并根据请求对其进行解析，而不是提前解析和存储。但是您真的要这样做并承受相关的性能成本吗？我不认为你的记忆问题特别大，但是（正如其他人所说）我会调查[flyweight 模式](http://en.wikipedia.org/wiki/Flyweight_pattern)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T11:00:21.900

看看[这里](http://www.ibm.com/developerworks/java/library/j-codetoheap/)。您会发现在 JVM 堆中存储类（字符串或其他）所需的字节数比您想象的要多得多。

1 个字符串的 36 个字节听起来很正确，因为您需要为包含该字符的对象存储大量元数据（请务必考虑 UTF 编码）以及字符串类开销。

# linux - 当前正在运行并记录到标准输出的 linux 终端。你如何让它的输出静音？

> ID：11844208
> 
> 赞同：0
> 
> 时间：2012-08-07T10:42:31.350
> 
> 标签：linux, unix, command

我有一个打印到标准输出的控制台。

如何访问命令提示符并将输出静音到 stdout ？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:51:53.680

你有几个选择：

*   使用您的 shell 重定向和进程控制运算符将命令的标准输出和标准错误发送到文件，同时在后台启动它：

    例如在`bash`：

    ```
    make all 1>make.log 2>&1 & 
    ```

    更好的是，您可以为每个流使用单独的文件：

    ```
    make all 1>make.out 2>make.err & 
    ```

    该命令在后台启动，shell 将在完成时通知您。同时，您可以使用文本查看器，甚至只是`tail`在输出文件上查看发生了什么。

    如果错误消息很少见并且您想立即看到它们，则只能重定向标准输出：

    ```
    make all 1>make.log & 
    ```

    如果您根本不关心控制台消息，只需将它们发送到`/dev/null`：

    ```
    make all 1>/dev/null & 
    ```

*   如果您对新控制台的关注是登录过程，您可以使用工具，例如[`GNU screen`](http://linux.die.net/man/1/screen)或[`tmux`](http://tmux.sourceforge.net/)在当前会话中创建额外的控制台窗口。

*   如果您想访问已经启动进程的控制台，您需要首先使用适当的键盘快捷键停止它，然后让它在后台继续运行。例如在 Linux/`bash`中使用`Ctrl+Z`快捷方式：

    ```
    $ make all
    1/10
    2/10
    ^Z
    [1]+  Stopped                 make all
    $ bg
    [1]+ make all &
    3/10
    $ 4/10
    5/10
    6/10
    7/10
    8/10
    9/10
    10/10

    [1]+  Done                    make all
    $ 
    ```

    不幸的是，[没有简单的方法](https://stackoverflow.com/q/1323956/507519)来重定向/静默已经运行的进程的输出 - 消息仍然会淹没控制台。

    当然，如果您只需要短期访问控制台（例如检查输出文件），您可以在完成之前*不要*重新启动该过程：

    ```
    $ make all
    1/10
    2/10
    ^Z
    [1]+  Stopped                 make all
    $ ls
    1  2  Makefile
    $ fg
    make all
    3/10
    4/10
    5/10
    6/10
    7/10
    8/10
    9/10
    10/10
    $ 
    ```

    有关 的`bg`和`fg`作业控制 内置命令的更多信息，`bash`请查看[此处](http://www.gnu.org/software/bash/manual/html_node/Job-Control-Builtins.html#Job-Control-Builtins)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:11:07.933

如果您不想看到控制台输出，请不要登录控制台。如果您将日志消息写入不应该是控制台的设备，那么您的系统设置错误。您需要在启动时更改可以设置控制台设备的内核命令行。

很可能您有一个没有 GUI 的系统，它作为控制台登录到主显示器。在这种情况下，您可以将 /etc/rsyslog.conf 中的消息严重性从 kern.*（默认值）更改为 kern.err。您也可以考虑修复记录如此多消息的损坏程序。

# algorithm - 中点圆算法的速度提升

> ID：11844211
> 
> 赞同：1
> 
> 时间：2012-08-07T10:42:44.653
> 
> 标签：algorithm, geometry

如果我们将圆分成 16 部分而不是一般算法中给出的 8 部分，中点圆算法的速度会提高吗？请对任何一种情况进行解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:48:57.570

如果将圆分成 16 块而不是 8 块，则需要进行 1 次额外的镜像操作，同时将镜像的饼图减半。如果由于将饼减半而获得的性能增益大于额外镜像减速，那么您应该使用 16 块。

将圆圈分成两部分：

```
 1 x 180degree computing and 180degree mirroring. 
```

将圆圈分成4部分：

```
1 x 90degree computing and 
90degree mirroring x1 
180degree mirroring x1 
```

将圆圈分成8个部分：

```
 1x 45degree computing and 
 1x 45degree mirroring.
 1x 90degree mirroring.
 1x 180 degree mirroring. 
```

将圆圈分成16个部分：

```
 1x 22.5degree computing (half of before) +performance
 1x 22.5degree mirroring.(an extra from before) -performance
 1x 45degree mirroring.
 1x 90 degree mirroring.
 1x 180 degree mirroring. 
```

就像用 22.5 度计算交换 22.5 度镜像

但是，镜像较小的角度比镜像 90 度角更复杂。

# web2py - xml到web2py html标签的转换

> ID：11844218
> 
> 赞同：0
> 
> 时间：2012-08-07T10:43:26.570
> 
> 标签：web2py

我正在使用 web2py 应用程序，因为我有一个要求，例如，在我的第一页中，我必须创建一个 web2py DIV() 标记，显示它并将该值存储在数据库中。在第二页中，我必须获取此数据库值并将其添加到 TABLE() 函数中。

它不是抛出错误。但在第二个页面视图中，划分内容显示为 XML，而不是显示为 HTML。

所以在我的 HTML 表格中，我得到的值为`<div style="float:right">content</div>`

我认为 DIV() 作为 xml() 存储在数据库中。如何将此 xml() 转换回 DIV()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:00:31.943

数据库正在存储原始 HTML。但是，写入 web2py 视图的任何文本都会自动转义，因此 HTML 代码按字面显示而不是呈现为 HTML。为了避免这种情况，正如您所指出的，您可以简单地将 HTML 包装在`XML()`帮助程序中。

不过要小心——您不应该对用户输入的输入执行此操作。恶意用户可以输入 Javascript 代码，这可能会为查看该内容的其他用户创建一个安全漏洞（这就是 web2py 首先自动转义所有内容的原因）。为了更安全，你也可以这样做`XML(..., sanitize=True)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:51:00.777

我找到了解决方案。必须使用 XML()。示例：XML(database_field)

# iphone - iPhone中滚动视图内的图像

> ID：11844219
> 
> 赞同：0
> 
> 时间：2012-08-07T10:43:31.163
> 
> 标签：iphone, image, ipad, uiscrollview, uiimageview

我是 iPhone 新手，

我想在 scrollView 内的图像中滚动，但我无法滚动图像，

这是我的代码片段，

```
UIImage *image1 = [UIImage imageWithContentsOfFile:@"768bg_with_footer.gif"];
self.imageView = [[UIImageView alloc] initWithImage:image1];
[self.scrollView addSubview:self.imageView];
scrollView.contentSize = image1.size;
self.scrollView.contentOffset = CGPointZero; 
```

我在我的`.xib`文件中使用了 ScrollView。

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:51:27.403

试试这个代码：

```
UIImage *image1 = [UIImage imageNamed:@"768bg_with_footer.gif"];
self.imageView = [[UIImageView alloc] initWithImage:image1];
[self.scrollView addSubview:self.imageView];
scrollView.contentSize = image1.size;
self.scrollView.contentOffset = CGPointZero; 
```

`initWithContentsOfFile`当我们知道图像的名称时，我们使用`path`它。将它与 imageName 一起使用将给出一个空图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:06:38.107

尝试跟随

```
self.scrollView.contentSize = self.imageView.frame.size; 
```

# javascript - Liferay webform portlet 字段验证

> ID：11844221
> 
> 赞同：0
> 
> 时间：2012-08-07T10:43:40.447
> 
> 标签：javascript, webforms, validation, liferay

Portlet 描述了它应该如何工作：

> 输入返回 true 或 false 的 JavaScript 代码以验证该字段。以下隐式变量可用。
> 
> currentFieldValue：正在验证的值 fieldsMap：按名称索引的所有表单值的数组

我还没有找到任何关于此的文档。

无论如何，我有网络表单，可以将表单输入发送到我的电子邮件，但如果最后一个复选框没有选中，那么它应该会出错。

所以我想出了这段代码，但它不起作用：

```
if(currentFieldValue == false){return false;} 
```

有人知道这个 liferay webform portlet 验证是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:16:04.647

我以这种方式尝试过，但我总是得到 rrror `You have entered invalid data. Please try again.`。

于是我开始改变

```
if(currentFieldValue == false){return false;} 
```

进入

```
if(currentFieldValue != ""){return true;} 
```

似乎提交需要一个`true`可以自动设置为`false`.

这适用于所有类型的领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:40:06.617

1.  停止 Tomcat

2.  转到 APPLICATION_SERVER_ROOT_DIRECTORY/webapps/web-form-portlet/WEB-INF/classes 目录

3.  打开 portlet.properties 并将“validation.script.enabled”属性从“false”更改为“true”

4.  启动Tomcat

5.  将**Web 表单**portlet 添加到页面

6.  在 Web 表单 portlet 的配置弹出窗口中，我们添加了一个复选框类型字段，其中包含您在描述中编写的验证脚本：“if(currentFieldValue == false){return false;}”和验证错误消息：“勾选复选框！”

7.  尝试发送创建的表单而不选择上一步中创建的复选框。

**结果**：“勾选复选框！” 消息出现在屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T09:43:43.323

总是一个字符串，`currentFieldValue`所以对我来说正确的解决方案是设置验证脚本如下：

```
return (currentFieldValue == 'true') 
```

# ajax - ajax setRequestHeader 选项

> ID：11844231
> 
> 赞同：0
> 
> 时间：2012-08-07T10:44:15.213
> 
> 标签：ajax, object, xmlhttprequest

下面是一个关于AJAX的面试题。我应该更正代码：

```
httpconn.open('POST','http://mysecondserver.com/listen/xxx.php',true,'username','password');

httpconn.setRequestHeader('Accept-Encoding','auto');
httpconn.setRequestHeader('Content-type', 'text/plain');
httpconn.setRequestHeader('Content-length', data.length);

httpconn.send(data); 
```

我想知道是否可以在 httpconn.open 中指定用户名和密码？

setRequestHeaders 呢？他们是正确的吗？我确定 httpconn.setRequestHeader('Content-type', 'text/plain'); 是正确的。另外两个呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:57:29.437

用户名和密码有效：
[http ://en.wikipedia.org/wiki/XMLHttpRequest#The_open_method](http://en.wikipedia.org/wiki/XMLHttpRequest#The_open_method)

根据 W3C，以下标头无效并应引发异常：
**Content-Length, Accept-Encoding**
[http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)

# c++ - libpthread 和 libc 中未定义的引用

> ID：11844236
> 
> 赞同：2
> 
> 时间：2012-08-07T10:44:35.890
> 
> 标签：c++, linux, linker, g++, undefined-reference

我无法在 odbc sdk 中编译一些示例。在与图书馆订单混在一起一段时间后，我以某种方式设法获得了对其中少数几个的未定义引用的数量。

可悲的是，我不知道如何摆脱剩余的。这是失败的命令：

```
g++ -Wall -z defs -m64 -DSIMBA -D_REENTRANT -fPIC -O0 -g -shared Common/TabbedUnicodeFileReader_Linux_x8664_debug.cpp.o Core/QSConnection_Linux_x8664_debug.cpp.o Core/QSDriver_Linux_x8664_debug.cpp.o Core/QSEnvironment_Linux_x8664_debug.cpp.o Core/QSStatement_Linux_x8664_debug.cpp.o DataEngine/QSDataEngine_Linux_x8664_debug.cpp.o DataEngine/QSMetadataHelper_Linux_x8664_debug.cpp.o DataEngine/QSTable_Linux_x8664_debug.cpp.o DataEngine/QSTableUtilities_Linux_x8664_debug.cpp.o DataEngine/QSTypeInfoMetadataSource_Linux_x8664_debug.cpp.o Common/QSTableMetadataFile_Unix_Linux_x8664_debug.cpp.o Common/QSUtilities_Unix_Linux_x8664_debug.cpp.o Main_Unix_Linux_x8664_debug.cpp.o    -Wl,--no-undefined -Wl,--no-allow-shlib-undefined -Wl,--whole-archive,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libSimbaDSI_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libSimbaSupport_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libAEProcessor_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libCore_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libDSIExt_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libExecutor_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libParser_debug.a,/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//Lib/Linux_x8664/libSimbaODBC_debug.a -Wl,--no-whole-archive -Wl,--soname=../Bin/Linux_x8664/libQuickstart_debug.so -L/home/hector/Downloads/SimbaEngineSDK/9.0/DataAccessComponents//ThirdParty/icu/Linux_x8664/lib -licuuc_simba64 -licudata_simba64 -licui18n_simba64 -lpthread -lm -lc -ldl -Wl,--version-script=exports_Linux.map -o ../Bin/Linux_x8664/libQuickstart_debug.so 
```

编辑：缺少符号

```
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libdl.so: undefined reference to `_dl_rtld_di_serinfo@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_dl_allocate_tls_init@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__libc_stack_end@GLIBC_2.2.5'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_dl_get_tls_static_info@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__tls_get_addr@GLIBC_2.3'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_dl_deallocate_tls@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_rtld_global@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libc.so.6: undefined reference to `_dl_argv@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libc.so.6: undefined reference to `__libc_enable_secure@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_dl_allocate_tls@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_rtld_global_ro@GLIBC_PRIVATE'
/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_dl_make_stack_executable@GLIBC_PRIVATE' 
```

固定的：

删除 -Wl,--no-allow-shlib-undefined 似乎可以解决问题。构建的共享库似乎运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:41:40.103

我在完全独立的应用程序中遇到了类似的问题。以下编译时标志对我有用：

-B/usr/lib/gold-ld/

我发现在：

[https://bugs.launchpad.net/ubuntu/+source/binutils/+bug/885927](https://bugs.launchpad.net/ubuntu/+source/binutils/+bug/885927)

我正在使用 gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1 我试图用 lto 编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:01:28.223

You do a very common newbie mistake. you place the libraries to link with in the middle or the beginning of the command line. The linker GCC uses needs dependencies in *reverse* order. That means if you have an source/object file S using a function in library L, the file A has to be before the library L on the command line.

In short, put the libraries (`-lm -lc -ldl`) last on the command line instead.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T18:28:59.460

如果链接器无法解析所有引用的符号，那么这可能是由于提供的库的顺序错误。如果您不确定正确的顺序是什么，则将档案放在“--start-group archives --end-group”中，根据 ld 手册，这将强制链接器重复搜索指定的档案，直到没有创建新的未定义引用。但要注意性能成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T16:54:05.200

OP提到“删除`-Wl,--no-allow-shlib-undefined`”有帮助。就我而言，我不得不添加相反的内容： `-Wl,--allow-shlib-undefined`

（旧版本的 GCC 一切正常）

# java - 播放 2 - 如何从 Java 控制器设置模板参数的默认值？

> ID：11844238
> 
> 赞同：7
> 
> 时间：2012-08-07T10:44:46.913
> 
> 标签：java, templates, parameters, playframework, playframework-2.0

在 Play Framework 2 中渲染 scala 模板时是否可以定义可选参数？

我的控制器如下所示：

```
public static Result recoverPassword() {
    Form<RecoveryForm> resetForm = form(RecoveryForm.class);
    return ok(recover.render(resetForm));
    // On success I'd like to pass an optional parameter:
    // return ok(recover.render(resetForm, true));
} 
```

我的 Scala 模板如下所示：

```
@(resetForm: Form[controllers.Account.RecoveryForm], success:Boolean = false) 
```

也试过：

```
@(resetForm: Form[controllers.Account.RecoveryForm]) (success:Boolean = false) 
```

在这两种情况下，我都得到“错误：类恢复中的方法渲染不能应用于给定类型；”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:57:01.667

从 Java 控制器中，您不能省略值的分配（在 Scala 控制器或其他模板中它会起作用），在这种情况下，最快和最干净的解决方案是每次使用默认值进行分配，即：

```
public static Result recoverPassword() {
    Form<RecoveryForm> resetForm = form(RecoveryForm.class);

    if (!successfullPaswordChange){
        return badRequest(recover.render(resetForm, false));
    }

    return ok(recover.render(resetForm, true));
} 
```

Scala 模板可以保持不变，因为 Scala 控制器和其他可以调用该模板的模板将尊重默认值（如果没有给出）。

顺便说一句：如您所见，您应该使用正确的方法从 Play's 返回结果`actions`，另请参见`ok()`vs `badRequest()`: `forrbiden()`,`notFound()`等

您还可以使用[flash 范围](http://www.playframework.org/documentation/2.0.2/JavaSessionFlash)填充消息并`redirect()`在成功更改密码后使用到主页，然后您可以检查 flash 消息是否存在并显示它：

```
public static Result recoverPassword() {
    ...
    if (!successfullPaswordChange){
        return badRequest(recover.render(resetForm, false));
    }

    flash("passchange.succces", "Your password was reseted, check your mail");
    return redirect(routes.Application.index());
} 
```

在任何模板中：

```
@if(flash.containsKey("passchange.succces")) {
    <div class="alert-message warning">
        <strong>Done!</strong> @flash.get("passchange.succces")
    </div>
} 
```

（此代码段是从 Java 的计算机数据库示例中复制的，因此您可以在自己的磁盘上查看）

# xpages - 从分类视图重复控制

> ID：11844240
> 
> 赞同：0
> 
> 时间：2012-08-07T10:44:51.583
> 
> 标签：xpages

我试图从 xPages 中的分类视图中获取重复控件中的列值，那时我得到的列值是单行的，并且同一行重复

如何获取“**从分类视图中重复控制**”中的列值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:38:04.333

我有一种情况，我必须从更大的视图向下钻取，并用以下内容重复信息。

视图按我正在钻取的内容分类在第一列中。我在 XPage/Custom Control 中通过将视图定义为数据选项卡中的源来实现这一点，然后选择“按类别名称过滤”，将我的转发器绑定到该视图数据源，并计算我正在向下钻取的值。

然后在我的重复表中，每个列条目的每个计算字段都如下所示：

```
rowData.getColumnValues()[1] 
```

在 getColumnValues 方法之后使用数组修饰符按位置调整其他列。这不是一个优雅的解决方案，但可以满足我的需求。希望这对您正在寻找的内容有所帮助。

[更新]

值得注意的是，这样做可能会为任何可能在整个方法中返回的*DateTime*`getColumnValues`对象创建内存句柄。如果您打算使用这种方法，我强烈建议您单独处理列值，以便您可以`session.recycle(colVals);`对它们执行 a 以防止任何内存蠕变。

[/更新]

# c# - 使用更新面板时，保存按钮不起作用

> ID：11844242
> 
> 赞同：5
> 
> 时间：2012-08-07T10:45:03.817
> 
> 标签：c#, asp.net, ajax, gridview, updatepanel

我`BulkEditGridView.ascx`通过复制粘贴从下面的链接创建了一个批量可编辑的 gridview Web 用户控件 ()，我没有包含任何外部代码：

[http://blogs.msdn.com/b/mattdotson/archive/2005/11/09/real-world-gridview-bulk-editing.aspx](http://blogs.msdn.com/b/mattdotson/archive/2005/11/09/real-world-gridview-bulk-editing.aspx)

我将 BulkEditGridView 控件添加到另一个 Web 用户控件`OrderDetailGridView.ascx`并将数据源添加到 BulkEditGridView

我要做的是在我的 BulkEditGridView 中有一个相互依赖的下拉列表和 2 个文本框。（见OrderDetailGridView.ascx源码） 在下拉列表改变的那一刻，文本框保持不变，点击保存按钮后，相应的值更新并在文本框中可见。

但是我想要做的是当下拉列表更改时，在单击保存按钮之前，我想在文本框中查看相应的值，然后能够使用保存按钮进行保存。

我尝试设置 autpostback=true 和 ddl_MaterialCode_SelectedIndexChanged 事件来更改文本框，但随后保存按钮不起作用，

我试图放一个更新面板，同样，保存按钮不起作用。

以下是我的代码的源代码，其中保存按钮在单击保存后更新的文本框起作用。

BulkEditGridView.ascx 源代码（我自己没有添加任何东西，只是复制粘贴）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Exportal.Controls 
{
    public partial class BulkEditGridView : System.Web.UI.WebControls.GridView
    {

        private List<int> dirtyRows = new List<int>();

        [IDReferenceProperty(typeof(Control))]
        public string SaveButtonID
        {
            get
            {
                string val = (string)this.ViewState["SaveButtonID"];
                if (val == null)
                {
                    return string.Empty;
                }
                return val;
            }
            set
            {
                this.ViewState["SaveButtonID"] = value;
            }
        }

        protected override GridViewRow CreateRow(int rowIndex, int dataSourceIndex, DataControlRowType rowType, DataControlRowState rowState)
        {
            return base.CreateRow(rowIndex, dataSourceIndex, rowType, rowState | DataControlRowState.Edit);
        }

        protected override void OnLoad(EventArgs e)
        {

            base.OnLoad(e);

            //Attach an event handler to the save button.
            if (false == string.IsNullOrEmpty(this.SaveButtonID))
            {
                Control btn = RecursiveFindControl(this.NamingContainer, this.SaveButtonID);
                if (null != btn)
                {
                    if (btn is Button)
                    {
                        ((Button)btn).Click += new EventHandler(SaveClicked);
                    }
                }
            }

        }
        private void SaveClicked(object sender, EventArgs e)
        {
            this.Save();
            this.DataBind();
        }

        protected override void InitializeRow(GridViewRow row, DataControlField[] fields)
        {
            base.InitializeRow(row, fields);
            foreach (DataControlFieldCell cell in row.Cells)
            {
                if (cell.Controls.Count > 0)
                {
                    AddChangedHandlers(cell.Controls);
                }
            }
        }

        private void AddChangedHandlers(ControlCollection controls)
        {
            foreach (Control ctrl in controls)
            {
                if (ctrl is TextBox)
                {
                    ((TextBox)ctrl).TextChanged += new EventHandler(this.HandleRowChanged);
                }
                else if (ctrl is CheckBox)
                {
                    ((CheckBox)ctrl).CheckedChanged += new EventHandler(this.HandleRowChanged);
                }
                else if (ctrl is DropDownList)
                {
                    ((DropDownList)ctrl).SelectedIndexChanged += new EventHandler(this.HandleRowChanged);
                }
            }
        }

        void HandleRowChanged(object sender, EventArgs args)
        {
            GridViewRow row = ((Control)sender).NamingContainer as GridViewRow;
            if (null != row && !dirtyRows.Contains(row.RowIndex))
            {
                dirtyRows.Add(row.RowIndex);
            }
        }
        public void Save()
        {
            foreach (int row in dirtyRows)
            {
                this.UpdateRow(row, false);
            }

            dirtyRows.Clear();
        }
        private Control RecursiveFindControl(Control namingcontainer, string controlName)
        {
            Control c = namingcontainer.FindControl(controlName);

            if (c != null)
                return c;

            if (namingcontainer.NamingContainer != null)
                return RecursiveFindControl(namingcontainer.NamingContainer, controlName);

            return null;
        }
    }
} 
```

OrderDetailGridView.ascx 源代码：

```
<cc1:BulkEditGridView ID="BulkEditGridView1" runat="server" AutoGenerateColumns="False"
    DataKeyNames="RowNo" DataSourceID="SqlDataSource1" SaveButtonID="btn_Kaydet">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
        <asp:BoundField DataField="PONumber" HeaderText="PONumber" SortExpression="PONumber" />
        <asp:TemplateField HeaderText="MaterialCode" SortExpression="MaterialCode">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_MaterialCode" runat="server" DataSourceID="SqlDataSource2"
                    DataTextField="MaterialCode" DataValueField="MaterialCode" SelectedValue='<%# Bind("MaterialCode") %>'
                    OnSelectedIndexChanged="ddl_MaterialCode_SelectedIndexChanged" >
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="MaterialDescription" SortExpression="MaterialDescription">
            <EditItemTemplate>
                <asp:TextBox ID="txt_MaterialDescription" runat="server" Text='<%# Bind("MaterialDescription") %>'
                    Enabled="false"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="MaterialCategory" SortExpression="MaterialCategory">
            <EditItemTemplate>
                <asp:TextBox ID="txt_MaterialCategory" runat="server" Text='<%# Bind("MaterialCategory") %>'
                    Enabled="false"></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="UnitOfMeasure" HeaderText="UnitOfMeasure" SortExpression="UnitOfMeasure" />
        <asp:BoundField DataField="Quantity" HeaderText="Quantity" SortExpression="Quantity" />
        <asp:BoundField DataField="ContainerType" HeaderText="ContainerType" SortExpression="ContainerType" />
        <asp:BoundField DataField="LoadingDate" HeaderText="LoadingDate" SortExpression="LoadingDate" />
    </Columns>
</cc1:BulkEditGridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:MyDbConn %>"
    DeleteCommand="DELETE FROM [OrderDetail] WHERE [RowNo] = @RowNo" InsertCommand="INSERT INTO [OrderDetail] ([FileNo], [PONumber], [MaterialCode], [MaterialDescription], [MaterialCategory], [UnitOfMeasure], [Quantity], [ContainerType], [LoadingDate]) VALUES (@FileNo, @PONumber, @MaterialCode, @MaterialDescription, @MaterialCategory, @UnitOfMeasure, @Quantity, @ContainerType, @LoadingDate)"
    SelectCommand="SELECT * FROM [OrderDetail]" UpdateCommand="UPDATE [OrderDetail] SET [FileNo] = @FileNo, [PONumber] = @PONumber, [MaterialCode] = @MaterialCode, [MaterialDescription] = @MaterialDescription, [MaterialCategory] = @MaterialCategory, [UnitOfMeasure] = @UnitOfMeasure, [Quantity] = @Quantity, [ContainerType] = @ContainerType, [LoadingDate] = @LoadingDate WHERE [RowNo] = @RowNo">
    <DeleteParameters>
        <asp:Parameter Name="RowNo" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
        <asp:Parameter Name="RowNo" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource>
<asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:MyDbConn %>"
    SelectCommand="SELECT [MaterialCode] FROM [Materials]"></asp:SqlDataSource>
<asp:Button ID="btn_Kaydet" runat="server" Text="Save" /> 
```

OrderDetailGridView.ascx.cs 源代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using SOrderDetailData;
using System.Data;

namespace Exportal.Controls
{
    public partial class OrderDetailGridView : System.Web.UI.UserControl
    {
        protected void ddl_MaterialCode_SelectedIndexChanged(object sender, EventArgs e)
        {

            DataTable dt = new DataTable();
            dt = OrderDetailData.GetMaterials();

            DropDownList ddl_MaterialCode = (DropDownList)sender;
            GridViewRow r = (GridViewRow)ddl_MaterialCode.Parent.Parent;

            TextBox txt_MaterialDescription = (TextBox)r.FindControl("txt_MaterialDescription");
            TextBox txt_MaterialCategory = (TextBox)r.FindControl("txt_MaterialCategory");            

            txt_MaterialDescription.Text = dt.Rows[ddl_MaterialCode.SelectedIndex]["MaterialDescription"].ToString();
            txt_MaterialCategory.Text = dt.Rows[ddl_MaterialCode.SelectedIndex]["MaterialCategory"].ToString();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:53:18.047

您可能需要坚持下去`List<int> dirtyRows`，以便它可以在回帖中幸存下来。我建议使用`Cache`或`Session`，但是请查看此 MSDN 文章[九个选项，用于在您的 ASP.NET 应用程序中管理持久用户状态以](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)了解所有可用选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:17:09.640

如果您只想用下拉列表中的选定值填充文本框，我建议您使用 jquery ...

```
$('.dropdownclass').change(function() {
    $(this).closest('tr').find('.textboxclass').val($(this).val());
}); 
```

然后你不必做额外的回发，希望你的按钮点击会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T04:04:06.237

如果您想要做的只是用下拉列表中的选定值填充文本框，我还建议像以前写的那样使用 jquery ...

但是，如果您需要在下拉列表更改时做更多事情......您需要使用网格的 RowCommand 事件。这可能有助于[RowCommand](http://msdn.microsoft.com/es-es/library/system.web.ui.webcontrols.gridview.rowcommand%28v=vs.80%29.aspx)

短篇故事：

1.  将 OnRowCommand="myGrid_RowCommand" 添加到网格的属性中
2.  将 CommandName="ddlChanged" 添加到网格中下拉列表的属性中
3.  如果您在网格的每一行中有超过 1 个命令，则 myGrid_RowCommand 函数应如下所示

    ```
    void myGrid_RowCommand(Object sender, GridViewCommandEventArgs e)  {    
    if(e.CommandName=="ddlChanged") 
        {// Do something
        } 
    if(e.CommandName == "ddl2Changed")
        {// Do something else
        }
    ...
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T20:24:54.373

您应该尝试两件事：在下面的代码上设置断点并进行调试。检查应用程序是否到达此 btn...

```
if (null != btn) {
    if (btn is Button) {
        ((Button)btn).Click += new EventHandler(SaveClicked);
    }
} 
```

验证后，您应该将此按钮添加到脚本管理器

```
if (null != btn) {
    if (btn is Button) {
        ((Button)btn).Click += new EventHandler(SaveClicked);
        ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(btn);
    }
} 
```

此控件是否以某种方式位于更新面板中（也许您的母版页有一个用于所有内容的更新面板）？

# java - 如何检查之前谁运行/激活了锁定特定端口的进程？

> ID：11844243
> 
> 赞同：0
> 
> 时间：2012-08-07T10:45:03.770
> 
> 标签：java, windows, tcp, process, tcplistener

我运行 java 应用程序，该应用程序使用端口（例如 9911）运行码头。运行应用程序后，我看到该端口已在使用中：

> 2012-08-07 10:36:06.848::WARN: SslSocketConnector@localhost:9911 java.net.BindException 失败：地址已在使用中：JVM_Bind

使用**netstat**我得到：

> ```
> TCP    NoamPc:9911            MyPc:0       LISTENING       1436 
> ```

使用**tcpView**我得到：

> ```
> java.exe  1436    TCP 9999    MyPc    0   LISTENING 
> ```

该进程从 VirtualVM 中的 C:\dev\jdk1.6\bin\java.exe 运行我看不到任何进程...

我知道我可以与其他端口号一起使用， **但我的问题是如何检查 Windows 环境，谁运行/激活之前锁定特定端口的进程。** 肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:18:15.710

我发现这个有用的应用程序 - *Process Monitor*

您可以使用进程树查看正在运行和执行的进程。您可以从[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx下载它](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# php - 如何选择一个来自数据库的声明？我不太确定如何正确地表达这个问题——但这只是出于兴趣。我不得不不断地从数据库中加载信息并使用这些值预先填充表单。所以在文本框的情况下，它很简单，我只需设置值：  但是当我来选择框时，我发现我的代码变得非常草率，因为我需要在某处放置一个选定的值。所以我真的有两个选择，我都不喜欢： $one = $two = ""; switch ($m

> ID：11844244
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:45:05.250
> 
> 标签：php, mysql, html, database

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:46:41.673

在输出中创建一个包含所需数据的数组。循环它。为其中的每个项目生成一个选项元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:49:11.483

作为 Quentin 的补充（只是一些帮助你的代码），我也倾向于使用数组，如下所示：

```
<select name="myval">
    <?php
        $options = array(
            "1" => "One",
            "2" => "Two"
        );
        foreach ($options as $value => $text) {
            echo '<option value="' . $value . '"' . ($myval == $value ? ' selected' : '') . '>' . $text . '</option>';
        }
    ?>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:54:15.073

对于这种重复输出，最简单的方法是自己编写一个函数，例如：

```
function selectbox(array $options, $name, $value = null) {
    $out = '<select name="' . $name . '">';
    foreach($options as $key => $text) {
        $out .= '<option value="' . $key. '"' . ($key == $value ? ' selected="selected"' : null) . '>' . $text . '</option>';
    }

    return $out . '</select>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:49:36.910

有很多方法可以让代码更简洁。找到一个或发明你自己的:)

对于选择语句，我喜欢使用实用方法。例如：

```
<?= HTML::createSelect($name, $actualvalue, $optionslist, $passthrough) ?> 
```

那条线上的东西。从数据库中读取选项列表和实际值。Passthrough 用于添加 HTML 装饰器，例如 id、class 等。

# android - 水平寻呼机

> ID：11844246
> 
> 赞同：0
> 
> 时间：2012-08-07T10:45:21.050
> 
> 标签：android

嗨，我刚刚为我的 android 应用程序实现了水平滚动，根据我从[这里](https://github.com/ysamlan/horizontalpager)收到的一些出色的示例代码，我唯一的问题是我正在浏览 TextViews 我真正想做的是浏览活动。如您所见通过我提供的链接，Tex​​tViews 是在 Horizo​​ntalpager 的 .xml 文件中定义的，因此滚动浏览它们是非常自动的。我怎样才能获得相同的结果，但这次是活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:20:43.467

活动没有意见所以无论如何也没有好主意！

但是你想做的事情可以用 ViewPager 和 Fragments 来完成！

片段：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

ViewPager：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

编辑：这将是您想要使用的适配器：http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:55:11.993

嗨，我遇到了一个优秀的博客，非常明确地解释了上述内容并提供了一些示例代码，所以我会发布[它](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)以防万一有人偶然发现与我相同的问题，请注意：这是一个快速下载[示例的链接](https://github.com/mitchwongho/Andy.git)

# c# - WCF REST 服务在本地工作正常，在远程服务器上给出未经授权 (401) 错误，而该服务具有匿名访问权限

> ID：11844248
> 
> 赞同：4
> 
> 时间：2012-08-07T10:45:28.433
> 
> 标签：c#, asp.net, .net, wcf

我已经通过网络漫无目的，但没有找到任何解决方案。
现在 WCF 服务在本地完美运行，而在远程服务器上它为 POST 调用引发 401（未经授权）Web 异常。GET 工作正常。

```
Implementation Details :
On the Remote Server-
    IIS : 6.0
    .NET : 4.0
    Calling App : WPF app.

On the Local Server-
    IIS : 7.0
    .NET : 4.0
    Calling App : WPF app. 
```

该服务在 web.config 中为 WCF 休息指定了匿名访问。对于身份验证我们已经实现了一个 AuthManager 类，它使用硬编码的用户名和密码对请求进行身份验证。

在调用调用者时添加网络凭据。

我调用本地网络时的标题是：

```
Authorization: Basic dG9ueXXXXXXX 
```

而在调用服务器时：

```
Authorization: Negotiate TlRMTVNTUAABAAAAl4IIXXXXXXX 
```

这对我来说看起来很可疑。

下面给出的是 Service 的 Web.config ：

```
 <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <connectionStrings>
    <add name="SqlServerConnectionString" connectionString="Data Source=BHUVINT\SQL2008R2;Initial Catalog=CPNS;User ID=sa;Password=orion@123"/>
  </connectionStrings>
  <system.diagnostics>
    <trace>
      <listeners>
        <add name="myListener"
                     type="System.Diagnostics.EventLogTraceListener"
             initializeData="Application" />
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <machineKey decryption="AES" decryptionKey="0CA3EFAF0F7A5E7A62681C0BF656EE0ECE31ACEE3E1023BA3FAD20EA5F199DE8" validation="SHA1" validationKey="3E4528C0FFE94A75DF02052B358BD9DE40800DD89DE62168764FF0DCE537184F0535D5D9AD66DEDC97DC1ABFF7FA540B4DFD82E5BB196B95D15FF81F75AD5328" />
  </system.web>

  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Mg">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="Mg" name="ApmWcfServiceWebRole.Push">
        <endpoint binding="webHttpBinding" name="firstBinding" contract="ApmWcfServiceWebRole.IPushService" />
      </service>
      <service behaviorConfiguration="Mg" name="ApmWcfServiceWebRole.WP7Device">
        <endpoint binding="webHttpBinding" name="secondBinding" contract="ApmWcfServiceWebRole.IWP7Service" />
      </service>
      <service behaviorConfiguration="Mg" name="ApmWcfServiceWebRole.iOSDevice">
        <endpoint binding="webHttpBinding" name="thirdBinding" contract="ApmWcfServiceWebRole.IIOSService" />
      </service>
      <service behaviorConfiguration="Mg" name="ApmWcfServiceWebRole.AndroidDevice">
        <endpoint binding="webHttpBinding" name="fourthBinding" contract="ApmWcfServiceWebRole.IAndroidService" />
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true">
    </serviceHostingEnvironment>

  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

**编辑： AuthManager 仅在需要进行检查的 POST 时被调用，而这些是失败的。**

**编辑 2：我在 AuthManager 中添加了一个 Trace ，它没有收到凭据，它得到一个空白值。似乎问题在于传递凭据。**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:09:32.023

问题已解决：

我启用了匿名访问，但它启用了对 Windows 身份验证的检查，我将其删除并开始工作![解决方案](../Images/0d631ebbd5c2dfe803dcef5718e9382d.png)

# javascript - 科尔多瓦 2.0.0 给出未捕获的类型错误：对象 0 没有方法 'func'

> ID：11844250
> 
> 赞同：2
> 
> 时间：2012-08-07T10:45:37.303
> 
> 标签：javascript, android-ndk, cordova

我在cordova2.0.0中创建了一个应用程序，我在cordova的帮助下从java脚本调用本机函数（用c编写）。

以前我使用的是phonegap 1.0.0，其中应用程序工作正常。但是当我将它更新到cordova 2.0.0时，我收到了错误

```
08-07 15:24:12.527: I/Web Console(855): JSCallback Error: Request failed. at file:///android_asset/www/cordova-2.0.0.js:3698
08-07 15:22:27.815: E/Web Console(855): Uncaught TypeError: Object 0 has no method 'func' at file:///android_asset/www/file.js:359 
```

谁能帮我解决这个问题。

我的 .html 文件的代码：

```
<!DOCTYPE html>
 <head>
   <script type="text/javascript" charset="utf-8" src="cordova2.0.0.js"></script>
   <script type="text/javascript" charset="utf-8" src="find.js"></script>
   <script type="text/javascript">

      function js_find(fthisval){   

        ws_find(socket,js_found);           

      }
      function js_found(retval){    

       alert(retval);           

      }
      function onBodyLoad(){        

            document.addEventListener("deviceready",onDeviceReady,false);

      }

       function onDeviceReady()
      {

            document.getElementById('d1').style.visibility = "visible";

        }   
   </script>    
 </head>
 <body onload="onBodyLoad()">
 <div id="d1" style="visibility:hidden">
    <button id="b1" onclick="js_find("ram")">Find it plz</button><br />
     </div>
</body> 
```

在 find.js 中：

```
var Find = function() {};

Find.prototype.func = function(funcname,funcdata) { 

return cordova.exec(
  null,                 
  null,                 
  'findPlugin',     
  funcname,            
  funcdata);            
};
window.find = new Find();

function ws_find(name, param, callback){

     if(undefined == callback){

            var dataArray = [param, param, name];   

    }
    else{

        var dataArray = [callback, callback, name, param];

     }

     alert("Calling plugin function find with \r\n"+dataArray);       
     return window.find.func("find",dataArray);     

} 
```

该行`return window.find.func("find",dataArray);`应该调用本机 java 函数，但它给了我上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:04:20.997

适合我

在冰淇淋三明治和 GingerBread 上进行了测试（您可能需要重新调整结构，移除开关并选择您喜欢的任何选项）

尝试使用警报调试您的版本以查看它的去向。

你还需要从那里回来`cordova.exec`吗？

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

function callPlugin(type){

    switch(type){

        case 1: 

                //Func Ptr
                window.echo = function(str, callback) {

                                cordova.exec(callback, function(err) {  callback('Nothing to echo.'); }, "Echo", "echo", [str]);

                          };    

                //Func Call           
                window.echo("echome", function(echoValue){alert(echoValue);} );
                break;

        case 2: 

                var MyClass = function (){};                //Prototype

                MyClass.prototype.echo = function(str, callback) {

                                                cordova.exec(callback, function(err) {  callback('Nothing to echo.'); }, "Echo", "echo", [str]);

                                         };

                window.echo = new MyClass();                                                    
                window.echo.echo("echome2", function(echoValue){alert(echoValue);} );   

                //OR
                //window.echo = new MyClass().echo;                                         //Add Function to Window Object
                //window.echo("echome1", function(echoValue){alert(echoValue);} );          //Call Plugin

                break;
    }   
}

</script>
</head>
<body>
<h1>Plugin Test</h1>
<button onclick="callPlugin(1)">Call Plugin by Cordova 2.0.0 Method</button><br />
<button onclick="callPlugin(2)">Call Plugin by Cordova 1.0.0 Method</button><br />
</body>
</html> 
```

# javascript - 提醒未保存的表单更改

> ID：11844256
> 
> 赞同：74
> 
> 时间：2012-08-07T10:46:11.257
> 
> 标签：javascript, jquery

我想在主文件中编写 Jquery 代码，这样如果用户更改页面并且有任何未保存的更改，用户应该得到警报。我得到了一个答案：[link](https://stackoverflow.com/questions/155739/detecting-unsaved-changes-using-javascript)

但是在大多数解决方案中，我必须在所有页面上编写代码。我希望它只写在一个地方，这样每个人都不必担心在他们的模块中编写它。我的代码是这样的：

```
<script type="text/javascript">
    var isChange;
    $(document).ready(function () {
        $("input[type='text']").change(function () {
            isChange = true;
        })
    });
    $(window).unload(function () {
        if (isChange) {
            alert('Handler for .unload() called.');
        }
    });

</script> 
```

但是每次我在文本框中进行更改时，.change() 事件都不会触发。

代码中可能有什么问题？

编辑：我将 .change() 更改为 .click 并被触发。我正在使用 jquery 1.4.1 ..是因为 jquery 版本导致 change() 不起作用吗？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-08-07T10:54:51.677

**这就是我正在使用的，将所有这些代码放在一个单独的 JS 文件中并将其加载到你的头文件中，这样你就不需要一次又一次地复制它：**

```
var unsaved = false;

$(":input").change(function(){ //triggers change in all input fields including text type
    unsaved = true;
});

function unloadPage(){ 
    if(unsaved){
        return "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?";
    }
}

window.onbeforeunload = unloadPage; 
```

**未找到 $ 编辑：**

此错误只能由以下三种情况之一引起：

> 1.  您的 JavaScript 文件未正确加载到您的页面中
> 2.  你有一个拙劣的 jQuery 版本。这可能是因为有人编辑了核心文件，或者插件可能覆盖了 $ 变量。
> 3.  您在页面完全加载之前运行 JavaScript，因此，在 jQuery 完全加载之前。

确保所有 JS 代码都放置在此：

```
$(document).ready(function () {
  //place above code here
}); 
```

**编辑保存/发送/提交按钮异常**

```
$('#save').click(function() {
    unsaved = false;
}); 
```

**编辑以使用动态输入**

```
// Another way to bind the event
$(window).bind('beforeunload', function() {
    if(unsaved){
        return "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?";
    }
});

// Monitor dynamic inputs
$(document).on('change', ':input', function(){ //triggers change in all input fields including text type
    unsaved = true;
}); 
```

在您的 alert_unsaved_changes.js 文件中添加上述代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-01-20T11:59:19.670

使用形式序列化的版本：

执行此代码，当 dom 就绪时：

```
// Store form state at page load
var initial_form_state = $('#myform').serialize();

// Store form state after form submit
$('#myform').submit(function(){
  initial_form_state = $('#myform').serialize();
});

// Check form changes before leaving the page and warn user if needed
$(window).bind('beforeunload', function(e) {
  var form_state = $('#myform').serialize();
  if(initial_form_state != form_state){
    var message = "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?";
    e.returnValue = message; // Cross-browser compatibility (src: MDN)
    return message;
  }
}); 
```

如果用户更改字段然后手动回滚，则不会显示警告

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T10:49:56.103

*一旦用户从输入中模糊而不是在输入的每个字符上都将触发*change事件。**

 *如果您需要在每次更改某些内容时调用它（即使焦点仍在该输入字段中），您将不得不依靠*keyup*和一堆事件的组合来跟踪仅使用鼠标进行的粘贴/剪切。

PS我希望你知道你检测变化的方法不是最好的？如果用户输入一些文本，离开该字段然后恢复更改，脚本仍会提醒他有关修改的文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T10:53:30.120

如果您的意思是带有文本框的 textarea，您不仅应该为输入注册事件，还应该为 textareas 注册事件。您可以将 keyup 用于 isChange，这样您就不必等待用户从该区域模糊。

```
$("input[type='text'], textarea").keyup(function () {
    isChange = true;
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T11:04:19.763

为什么不简单地将事件绑定到`change`回调？

```
$(":input").change(function()
{
    $(window).unbind('unload').bind('unload',function()
    {
        alert('unsaved changes on the page');
    });
}); 
```

作为额外的奖励，您可以使用`confirm`并选择触发更改事件的最后一个元素：

```
$(":input").change(function()
{
    $(window).unbind('unload').bind('unload',(function(elem)
    {//elem holds reference to changed element
        return function(e)
        {//get the event object:
            e = e || window.event;
            if (confirm('unsaved changes on the page\nDo you wish to save them first?'))
            {
                elem.focus();//select element
                return false;//in jQuery this stops the event from completeing
            }
        }
    }($(this)));//passed elem here, I passed it as a jQ object, so elem.focus() works
    //pass it as <this>, then you'll have to do $(elem).focus(); or write pure JS
}); 
```

如果您有一些保存按钮，请确保取消绑定卸载事件，但：

```
$('#save').click(function()
{
    $(window).unbind('unload');
    //rest of your code here
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-16T19:43:34.540

这实际上只是@AlphaMale 答案的不同版本，但在几个方面有所改进：

```
# Message displayed to user. Depending on browser and if it is a turbolink,
# regular link or user-driven navigation this may or may not display.
msg = "This page is asking you to confirm that you want to leave - data you have entered may not be saved."

# Default state
unsaved = false

# Mark the page as having unsaved content
$(document).on 'change', 'form[method=post]:not([data-remote]) :input', -> unsaved = true

# A new page was loaded via Turbolinks, reset state
$(document).on 'page:change', -> setTimeout (-> unsaved = false), 10

# The user submitted the form (to save) so no need to ask them.
$(document).on 'submit', 'form[method=post]', ->
  unsaved = false
  return

# Confirm with user if they try to go elsewhere
$(window).bind 'beforeunload', -> return msg if unsaved

# If page about to change via Turbolinks also confirm with user
$(document).on 'page:before-change', (event) ->
  event.preventDefault() if unsaved && !confirm msg 
```

这在以下方面更好：

*   恕我直言，它是咖啡脚本自动使它变得更好。:)
*   它完全基于事件冒泡，因此会自动处理动态内容（@AlphaMale 的更新也有这个）。
*   它只在 POST 表单上运行，因为 GET 表单没有我们通常希望避免丢失的数据（即 GET 表单往往是搜索框和过滤条件）。
*   它不需要绑定到特定的按钮来执行保存。每当提交表单时，我们假定提交正在保存。
*   它与[Turbolinks](https://github.com/rails/turbolinks)兼容。如果您不需要，只需删除两个`page:`事件绑定。
*   它的设计使您可以将其包含在您的 JS 的其余部分中，并且您的整个站点都将受到保护。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-19T08:15:34.000

我使用`$('form').change`etc. 函数来设置脏位变量。不适合捕获所有更改（根据以前的答案），但在我的应用程序中捕获了我感兴趣的所有内容。*

# android - 如何在android中使用finger在画布上的两点之间绘制一条直线

> ID：11844257
> 
> 赞同：0
> 
> 时间：2012-08-07T10:46:13.973
> 
> 标签：android

嗨，我是 android 开发的初学者。我正在开发一种类似油漆的应用程序。我已经在画布上画了一些点。现在我想通过手指在这些点之间画线。我不知道我该怎么做。我没有使用谷歌地图。

```
 package com.example.point;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PointF;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawView extends View implements OnTouchListener {
    private static final String TAG = "DrawView";

    List<Point> points = new ArrayList<Point>();
    List<Point> points1 = new ArrayList<Point>();
    List<Point> points2 = new ArrayList<Point>();
    Paint paint = new Paint();
PointF firstpoint=new PointF(100,100);
PointF secondpoint=new PointF(200,200);
Path path=new Path();
    public DrawView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        this.setOnTouchListener(this);

        paint.setColor(Color.BLACK);

        paint.setAntiAlias(true);
    }

    @Override
    public void onDraw(Canvas canvas) {

        paint.setStrokeWidth(3);
        canvas.drawPoint(100, 100, paint);
        canvas.drawPoint(200, 200, paint);
        canvas.drawPoint(200, 400, paint);
        Point p=new Point();
        Point p1=new Point();
        //p1=points.get(1);
        for(int i=points.size()-2;i<points.size();i++)
        {

            p=points.get(i);
            //if(p1.x==100 && p1.y==100)
        //canvas.drawLine(100, 100, p.x, p.y, paint);
    //  path.moveTo(100, 100);
        //path.lineTo(200, 200);
        //canvas.drawPath(path, paint);
        }

    }

    public boolean onTouch(View view, MotionEvent event) {

        /*if(event.getAction()==MotionEvent.ACTION_MOVE)
        {
         Point point1 = new Point();          
            point1.x = event.getX();
            point1.y = event.getY();
            points.add(point1);
            invalidate();
            Log.d(TAG, "point: " + point1);

        }*/
        //if(event.getX()==100 && event.getY()==100)
        //{
            if(event.getAction()==MotionEvent.ACTION_MOVE)
            {
            Point point1 = new Point();          
            point1.x = event.getX();
            point1.y = event.getY();
            points.add(point1);

            invalidate();
            Log.d(TAG, "point: " + point1);
            //}

        }
        //return false;
        return true;

        /*switch (event.getAction()) {
         case MotionEvent.ACTION_DOWN:
             Point point = new Point();          
             point.x = event.getX();
             point.y = event.getY();
             points.add(point);
             invalidate();
             Log.d(TAG, "point: " + point);

             return true;

         case MotionEvent.ACTION_MOVE:
             Point point1 = new Point();          
             point1.x = event.getX();
             point1.y = event.getY();
             points1.add(point1);
             invalidate();
             Log.d(TAG, "point: " + point1);

             return true;

         case MotionEvent.ACTION_UP:

             Point point2 = new Point();          
             point2.x = event.getX();
             point2.y = event.getY();
             points2.add(point2);
             invalidate();
             Log.d(TAG, "point: " + point2);

             return true;
         }
     return false;

        //        return true;*/
    }
}

class Point {
    float x, y;

    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

我想用手指在这些点之间画一条直线。如果我的手指远离那个特定点，然后我向后移动我的手指，那么画的线就会被抹去。即仅在这些特定点之间绘制的线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:07:31.553

```
public class HelloGoogleMaps extends  MapActivity  {
    /** Called when the activity is first created. */

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapController mMapController;
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mMapController = mapView.getController();
        mMapController.setZoom(18);
      // Two points in Mexico about 1km apart
        GeoPoint point1 = new GeoPoint(19240000,-99120000);
        GeoPoint point2 = new GeoPoint(19241000,-99121000);
        mMapController.setCenter(point2);
        // Pass the geopoints to the overlay class
        MapOverlay mapOvlay = new MapOverlay(point1, point2);
        mapView.getOverlays().add(mapOvlay);
    }

    public class MapOverlay extends com.google.android.maps.Overlay {

      private GeoPoint mGpt1;
      private GeoPoint mGpt2;

      protected MapOverlay(GeoPoint gp1, GeoPoint gp2 ) {
         mGpt1 = gp1;
         mGpt2 = gp2;
      }
      @Override
      public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
         super.draw(canvas, mapView, shadow);
         Paint paint;
         paint = new Paint();
         paint.setColor(Color.RED);
         paint.setAntiAlias(true);
         paint.setStyle(Style.STROKE);
         paint.setStrokeWidth(2);
         Point pt1 = new Point();
         Point pt2 = new Point();
         Projection projection = mapView.getProjection();
         projection.toPixels(mGpt1, pt1);
         projection.toPixels(mGpt2, pt2);
         canvas.drawLine(pt1.x, pt1.y, pt2.x, pt2.y, paint);
         return true;
      }
   }
   @Override
   protected boolean isRouteDisplayed() {
      // TODO Auto-generated method stub
      return false;
   }
} 
```

它在我的应用程序中运行代码......一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:51:36.767

只是在这里提醒一下，通常最好是在您尝试过某些事情但没有成功之后才来这里询问。通过这种方式，您希望获得诸如“您尝试过什么......？”之类的评论。和类似的东西。

关于你的问题。[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)是一个很好的起点。Android 文档非常有用。如您所见，您有一个[drawLine()](http://developer.android.com/reference/android/graphics/Canvas.html#drawLine%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)方法。这应该做你问的。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:18:10.687

您的画布是否位于视图内？如果是这样，这是一个起点，假设您正在询问使用手指运动在点之间画线......

查找以下方法以获取帮助：

```
public boolean onTouchEvent(MotionEvent event) 
```

检测手指运动。您需要区分刚刚发生的动作动作类型和动作动作“索引”。然后，如果运动是移动运动（例如手指在点之间移动），那么您可以调用[drawPath](http://developer.android.com/reference/android/graphics/Canvas.html#drawPath%28android.graphics.Path,%20android.graphics.Paint%29)或[drawLine](http://developer.android.com/reference/android/graphics/Canvas.html#drawLine%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)来绘制线条。

# javascript - Ember 1.0 预发布支持属性是否更改？

> ID：11844258
> 
> 赞同：1
> 
> 时间：2012-08-07T10:46:20.977
> 
> 标签：javascript, ember.js

在我的应用程序中，我从服务器获取 json 对象，然后转换为 Ember.Object 并绑定到 html 控件。用户将更改一些字段并提交到服务器。但我只想提交由用户更改的字段。

我的伪代码：

```
var jsObj = myObj.getProperties(myObj.getListPropertyChanged); 
```

然后，我将 jsObj 转换为 json 并发送到服务器。

Ember.js 预发布版是否支持？

目前，我将代码注入 Ember.Set 函数以跟踪属性更改，这是可行的，但我真的不想这样做。

我正在为此寻找新的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:39:02.327

您可以为这种排序功能创建一个 mixin。

[Ember.mixin](http://docs.emberjs.com/#doc=Ember.Mixin&src=false)

[Ember.Editable](https://gist.github.com/3294879)

# excel - vba excel形状

> ID：11844260
> 
> 赞同：3
> 
> 时间：2012-08-07T10:46:32.803
> 
> 标签：excel, vba, macos, excel-2011

我使用了一个小子程序将图片插入到我的工作表中

```
ActiveSheet.Pictures.Insert(URL).Select 
```

这适用于 Excel 2003 (Windows)，但不再适用于 Excel 2011 (Mac)。

因此我修改了我的子程序（如建议的[http://www.launchexcel.com/google-maps-excel-demo/](http://www.launchexcel.com/google-maps-excel-demo/)），但子程序停在

```
theShape.Fill.UserPicture URL 
```

带有错误消息

“-2147024894 (80070002) Fehler der Methode UserPicture des Objekts FillFormat”

矩形是绿色的！

```
Sub Q1()

Dim wks As Worksheet
Dim URL As String
Dim i As Long
Dim lastRow As Long
Dim theShape As Shape
Dim pasteCell As Range

' Used Worksheet
Set wks = Worksheets("Blatt1")

' Delete already existing shapes
For Each theShape In wks.Shapes
        theShape.Delete
Next theShape

' Check all existing rows in Column K
lastRow = Cells(Rows.Count, "K").End(xlUp).Row
For i = 2 To lastRow

' the URLs are already computed and stored in column K
URL = wks.Range("K" & i).Value

' try to put the images in column L
Set pasteCell = wks.Range("L" & i)
pasteCell.Select

' Create a Shape for putting the Image into
' ActiveSheet.Pictures.Insert(URL).Select is deprecated and does not work any more!!!
Set theShape = wks.Shapes.AddShape(msoShapeRectangle, pasteCell.Left, pasteCell.Top, 200, 200)

' fill the shape with the image after greening
theShape.Fill.BackColor.RGB = RGB(0, 255, 0)
theShape.Fill.UserPicture URL

Next i

End Sub 
```

有什么建议或提示吗？大概我是个瞎子吧……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:44:01.393

您是否尝试过按照以下方式将形状设置为 URL 的语法：

```
Sub Picadder()

Dim Pic As Shape

Set Pic = ActiveSheet.Shapes.AddPicture("http://stackoverflow.com/content/stackoverflow/img/apple-touch-icon.png", msoFalse, msoTrue, 0, 0, 100, 100)

End Sub 
```

这段代码在适应您的工作时，可能看起来像这样：

```
Sub Q1()

Dim wks As Worksheet
Dim URL As String
Dim i As Long
Dim lastRow As Long
Dim theShape As Shape
Dim pasteCell As Range

' Used Worksheet
Set wks = Worksheets("Blatt1")

' Delete already existing shapes
For Each theShape In wks.Shapes
        theShape.Delete
Next theShape

' Check all existing rows in Column K
lastRow = Cells(Rows.Count, "K").End(xlUp).Row
For i = 2 To lastRow

' the URLs are already computed and stored in column K
URL = wks.Range("K" & i).Value

' try to put the images in column L
Set pasteCell = wks.Range("L" & i)
pasteCell.Select

' Create a Shape for putting the Image into
' ActiveSheet.Pictures.Insert(URL).Select is deprecated and does not work any more!!!
Set theShape = wks.Shapes.AddPicture(URL, pasteCell.Left, pasteCell.Top, 200, 200)

' Set shape image backcolor.
theShape.Fill.BackColor.RGB = RGB(0, 255, 0)

Next i

End Sub 
```

您的网址需要正确格式化 - 我必须在我的网址上使用引号来获取初始片段以使其有效运行，但这可能是一个解决方案。

对于 Mac-Excel 2011，[Michael McLaughlin](http://blog.mclaughlinsoftware.com/2011/03/08/add-image-comment-vba/)在他的博客上讨论了一种解决方法。显然，在 Mac-Excel 2011 中将图像与单元格关联起来并不容易（如果有的话）。此外，研究表明，将图像插入 Excel 工作簿的问题已被多次提出。到目前为止，在研究中似乎还没有通过图片方法轻易地解决它。因此，变通办法可能是最好的解决方案。

代码片段非常接近地改编自 Michael 的博客，如下所示：

```
Function InsertImageCommentAsWorkAround(title As String, cellAddress As Range)

    ' Define variables used in the comment.
    Dim ImageCommentContainer As comment

  ' Clear any existing comments before adding new ones.
  Application.ActiveCell.ClearComments

  ' Define the comment as a local variable and assign the file name from the _
  ' _ cellAddress as an input parameter to the comment of a cell at its cellAddress.

  ' Add a comment.
  Set ImageCommentContainer = Application.ActiveCell.AddComment

  ' With the comment, set parameters.
  With ImageCommentContainer
    .Text Text:=""

        'With the shape overlaying the comment, set parameters.
        With .Shape
          .Fill.UserPicture (cellAddress.Value)
          .ScaleHeight 3#, msoFalse, msoScaleFormTopLeft
          .ScaleWidth 2.4, msoFalse, msoScaleFromTopLeft
        End With

  End With

  InsertImageCommentAsWorkAround = title

End Function 
```

我建议将注释集调整到您的循环中，并使用它来将图像设置到位，使用循环中的形状格式来设置由调整后的代码生成的注释形状的格式。

# silverlight - 计算用户登录时间

> ID：11844264
> 
> 赞同：0
> 
> 时间：2012-08-07T10:46:45.933
> 
> 标签：silverlight

我正在尝试开发以下问题的解决方案。我需要在数据库中存储有关用户登录并在页面上的时间的信息。目前，当用户使用 WCF 服务登录和注销时，我正在写入 db，但是当用户关闭窗口或转到其他网页时如何处理这种情况。我想知道每分钟调用每个用户以检查他是否还活着的线程函数是否是一个好的解决方案。任何帮助都会很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:44:59.650

如果您可以稍微等待数据（取决于您的应用程序使用情况），您可以将数据保存到 IsolatedStorage，并在用户再次启动应用程序时发送。这是非常简单的解决方案，但是如果用户不再打开应用程序，您将不得不等待数据并且一些数据将会丢失（同样，取决于您的应用程序）。

其他解决方案是在 OnUnload 或 OnBeforeUnload 事件期间从 JavaScript 发送数据（[如何](http://msdn.microsoft.com/en-us/library/ie/ms536973%28v=vs.85%29.aspx)从[JS](http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx)调用[WCF](http://weblogs.asp.net/ricardoperes/archive/2011/03/29/calling-wcf-web-services-from-javascript.aspx)） 。或者甚至从 JS 到某个 aspx 站点做一个简单的[HttpRequest](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)，在查询中传递时间。

编辑：另一个线程是一个好主意（我在当前项目中有这样的解决方案）但过于频繁地运行它会阻塞 IIS（取决于用户数量、带宽等）。即使用户什么都不做，它也会防止 Session 超时（这是在我的项目中使用此解决方案的主要目的）。

# blackberry - 黑莓模拟器中的图形加速错误

> ID：11844265
> 
> 赞同：4
> 
> 时间：2012-08-07T10:46:47.600
> 
> 标签：blackberry, blackberry-simulator

当我在模拟器上运行任何程序时，它会打开并显示错误：

> 图形加速错误 - BlackBerry 9900 Simulator
> 
> 检测到您当前的图形加速设置有问题。图形加速需要具有最新视频驱动程序的 OpenGL 1.x+ 兼容视频卡。请通过导航到视图菜单尝试较低的图形加速设置。
> 
> 模拟器现在将恢复为软件渲染。
> 
> 无法创建纹理 (err=0x501)

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T19:00:55.957

我使用 Blackberry SDK for Eclipse（插件）进行开发，并且出现了同样的问题。

我通过`<BodyBuilder::opengl-acceleration>0</BodyBuilder::opengl-acceleration>`在以下目录中找到的文件 fledge-settings.conf 中添加该行来解决`C: \ eclipse \ plugins \ net.rim.ejde . componentpack7.1.0_7.1.0.10 \ components \ simulator`

如果此行存在，只需将标签 <> value <> 之间的值更改为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T20:25:14.253

尝试以下操作：

导航到安装了 eclipse 的文件夹。就我而言，它已安装在桌面上。即`C:\Users\Username\Desktop\eclipse\` 在此之后导航到插件文件夹 -> `Blackberry Installed SDK folder -> Components -> Simulator`。然后尝试搜索文件`fledge-settings.conf`。使用记事本或任何编辑器打开它。添加以下行

```
<BodyBuilder::opengl-acceleration>0</BodyBuilder::opengl-acceleration> 
```

`</fledge-configuration>`标签之前。

导航`fledge-settings.conf`文件的路径：

C:\Users\Username\Desktop\eclipse\plugins\net.rim.ejde.componentpack7.1.0_7.1.0.10\components\simulator

[更多信息](http://www.flickr.com/photos/48436294@N05/8354219539/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:19:07.410

关闭图形加速。对于 BlackBerry Torch 9800 模拟器，在哪里可以找到关闭选项（红色标记），如下图所示。在您的模拟器上尝试类似的操作。

![在此处输入图像描述](../Images/f254e5655557aa3dc6af05802fcb3757.png)

# filenames - Doxygen：名称中有哈希（#）的文件

> ID：11844266
> 
> 赞同：0
> 
> 时间：2012-08-07T10:47:00.433
> 
> 标签：filenames, doxygen

我在为名称中带有 # 的文件生成文档时遇到问题。IE ：

```
Filename ab#cd.h starts with line:
/** @file ab#cd.h some description */ 
```

生成的 Doxygen HTML 中缺少此描述。此外，所有链接都是错误的，但它们已由将 # 交换为 %23 的附加脚本修复。我正在考虑另一个用于在生成前后重命名文件名的脚本，但也许有可能以其他方式处理这个问题？

为什么 # char 会影响 Doxygen 文档的生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:37:57.337

文件名中的哈希是问题的根源，但在您的示例中，您可以简单地编写

```
/** @file
 *  some description
 */ 
```

不需要文件名，描述应该放在下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:54:33.283

Doxygen 使用 # 作为链接。我相信你可以用 \ 来逃避 #，但我并不肯定。

# node.js - 带有选项 --coffee 的 RailwayJS 和 Mongoose

> ID：11844271
> 
> 赞同：1
> 
> 时间：2012-08-07T10:47:27.177
> 
> 标签：node.js, mongoose, railway.js

有人知道为什么使用 --coffee 选项的铁路项目中的数据不会存储在 mongodb 中吗？

以常规方式创建项目（不带 --coffee 选项）数据将保存在 mongodb 中。因此，何时执行以下操作：

```
railway init blog && cd blog 
```

并将 database.json 修改为

```
{ "development":
  { "driver":   "mongoose"
  , "host":     "localhost"
  , "database": "blog_dev"
  }
} 
```

当我安装所有依赖项并启动服务器时一切正常

```
npm install -l
railway g scaffold post title content
railway s 
```

至今。但是当我使用 --coffee 选项创建项目时，例如：

```
railway init blog --coffee 
```

并在修改 database.yml （这在咖啡模式中不同）之后

```
development:
  driver:   "mongoose"
  host:     "localhost"
  database: "blog_dev" 
```

并在安装所有依赖项并启动服务器后

```
npm install -l
railway g scaffold post title content --coffee
railway s 
```

数据只会存储在内存中。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:08:12.810

使用`database.json`代替`database.yml`：

```
{
  "development": {
    "driver": "mongoose",
    "host": "localhost",
    "database": "blahblahblah"
  },
  "test": {
    "driver": "memory"
  }
} 
```

# perl - 在perl中从每个键的多个值的哈希中获取所有值

> ID：11844273
> 
> 赞同：1
> 
> 时间：2012-08-07T10:47:32.850
> 
> 标签：perl, hash, hashmap

如何获取所有值并打印它，在代码中每个键都有多个值

```
%ages = (
" Michael Caine" => {39,34,11,12},
" Dirty Den" => {34,56,76,58},
" Angie" => {27,56,78,89}
);    

@keys = keys %ages;
@val = values %ages;
print @keys;
print @val; #it will not work in case of multiple values per key 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:52:07.820

你有三个问题。

1.  您使用的是 hashrefs，而不是 arrayrefs
2.  你没有分配任何东西`@val`（至少，在你编辑问题之前你没有分配任何东西）
3.  你没有做任何事情来取消引用你的引用

这样的：

```
use v5.10;

my %ages = (
" Michael Caine" => [39,34,11,12],
" Dirty Den" => [34,56,76,58],
" Angie" => [27,56,78,89]
);    

foreach my $key (keys %ages) {
    say $key;
    say @{$ages{$key}};
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:37:08.213

Bhargav Gor，bhai，这是为一个键存储多个值的常用方法。

但，

1.  请记住，**这是一个匿名哈希，即键值对：** {39,34,11,12} = ("39"=>34, "11"=>12)

2.  **这是一个匿名数组：** [ 39,34,11,12 ]

您使用了 1\. 这意味着您正在使用另一个哈希作为 %ages 哈希的值，即

```
%ages =
" Michael Caine" => ("39"=>34,"11"=>12),
" Dirty Den" => ("34"=>56,"76"=>58),
" Angie" => ("27"=>56,"78"=>89) 
```

如果要提取键“Michael Caine”的键“39”的值

```
print %{$ages{" Michael Caine"}}->{"39"}  #prints 34 
```

如果你真的想要这样的结构，那么这就是你可以显示所有值的方式

```
foreach(keys %ages) {
  $name = $_;
  foreach(keys %{$ages{$name}}) {
    print %{$ages{$name}}->{$_},",";
  }
  print "\n";
}
#output:
#>34,12,
#>56,58,
#>56,89, 
```

* * *

我不认为你想要这种结构，你可能想使用一个数组，（一个匿名数组）。

```
%ages = (
" Michael Caine" => [39,34,11,12],
" Dirty Den" => [34,56,76,58],
" Angie" => [27,56,78,89]
); 
```

现在您可以轻松地显示如下输出：

```
foreach(keys %ages) {
  $name = $_;
  foreach( @{$ages{$name}} ) {
    print $_,",";
  }
  print "\n";
}
#output:
#>39,34,11,12,
#>34,56,76,58,
#>27,56,78,89, 
```

* * *

对不起，我必须着急，对不起错别字，希望你明白你应该怎么做这样的存储

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:15:46.823

```
%ages = (
" Michael Caine" => [39,34,11,12],
" Dirty Den" => [34,56,76,58],
" Angie" => [27,56,78,89],
);    

@keys = keys %ages;
@val = values %ages;
print "@keys\n";
print "@{$_}\n" for @val; 
```

# jsp - 如何在从 jsp 导出的 .csv 中进行格式化？

> ID：11844274
> 
> 赞同：0
> 
> 时间：2012-08-07T10:47:36.097
> 
> 标签：jsp

我成功地将一些数据从 JSP 导出到 Excel 作为 .csv 文件。我想做一些格式化。我不知道它的语法。这是代码的一部分：

```
FileWriter fw = new FileWriter("C:\\Documents and Settings\\user\\My Documents\\ Excel\\Report.csv");

fw.append("Name");
fw.append(',');
fw.append("Address");
fw.append(',');
fw.append('\n'); 
```

如何使“名称”加粗。有没有办法增加excel中列的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T11:17:58.237

使用一些库进行 csv 处理。像 [opencsv](http://opencsv.sourceforge.net/)，[supercsv](http://supercsv.sourceforge.net/)

# javascript - 从 JSON 对象中删除额外的括号和数据 - Javascript

> ID：11844277
> 
> 赞同：0
> 
> 时间：2012-08-07T10:47:42.310
> 
> 标签：javascript, xml, json, parsing, xml-parsing

我正在用这个函数解析一个 XML 文件：

```
function xmlToJson(xml) {
    var attr, child, attrs = xml.attributes,
        children = xml.childNodes,
        key = xml.nodeType,
        obj = {},
        i = -1,
        o = 0;
    if (key == 1 && attrs.length) {
        obj[key = o] = {};
        while (attr = attrs.item(++i)) {
            obj[key][attr.nodeName] = attr.nodeValue;
        }
        i = -1;
    } else if (key == 3) {
        obj = xml.nodeValue;
    }
    while (child = children.item(++i)) {
        key = child.nodeName;
        if (obj.hasOwnProperty(key)) {
            if (obj.toString.call(obj[key]) != '[object Array]') {
                obj[key] = [obj[key]];
            }
            obj[key].push(xmlToJson(child));
        } else {
            obj[key] = xmlToJson(child);
        }
    }
    return obj;
} 
```

解析下一个文件会产生以下字符串（使用 JSON.stringify 看到）：

文件（不包括 '<' 字符，因为那时内容不可见，但在我的文件中显然我有它们）：

```
?xml version="1.0" encoding="UTF-8" standalone="no"?>
playlist>
vid src="video/intro.mp4" type="video/mp4"/>
vid src="video/intro.mp4" type="video/mp4"/>
/playlist> 
```

JSON：

```
{"playlist":{"#text":["\n","\n","\n"],"vid":[{"0":{"src":"video/intro.mp4","type":"video/mp4"}},{"0":{"src":"video/intro.mp4","type":"video/mp4"}}]}} 
```

但我需要输出只是：

```
[{"0":{"src":"video/intro.mp4","type":"video/mp4"}},{"0":{"src":"video/intro.mp4","type":"video/mp4"}}] 
```

对不起，如果菜鸟问题，但我对 JS 和 JSON 一样陌生，我和他们在一起的日子可以用我的一只手来数。

提前致谢。

编辑：已解决-由我自己解决：我决定将其转换为“子字符串”，然后将剩余的字符串重新转换回来，而不是粗鲁地不允许将对象转换为字符串。这是结果：

```
JSON.parse(JSON.stringify(jsonPlaylist).substring(44,JSON.stringify(jsonPlaylist).length-2)); 
```

假设这`jsonPlaylist`是包含整个已解析 XML 文件的字符串 var。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:59:50.340

在`php`：

```
$yourxmlstring = rtrim(ltrim($yourxmlstring, '{"playlist":{"#text":["\n","\n","\n"],"vid":'),"}}"); 
```

基本上我所做的就是使用`ltrim`并`rtrim`砍掉你不想要的东西。

在`js`：

```
str.replace(/{"playlist":{"#text":\["\\n","\\n","\\n"\],"vid":/,'').replace(/}+$/,''); 
```

# iphone - NSPredicate 查询父子节点

> ID：11844280
> 
> 赞同：1
> 
> 时间：2012-08-07T10:47:55.677
> 
> 标签：iphone, objective-c, ios, core-data, nspredicate

我有一个包含三个实体的数据模型设置，Course、Student、TestScores。

它们以太多的关系联系在一起，如下所示：

```
Course <---->> Student <---->> TestScores 
```

所以一个课程会有几个学生，而学生又可能有几个测试分数（或没有测试分数）

Course 实体有一个 Name 属性。TestScores 是一个简单的实体，它只包含一个 testScore int 属性。

我希望能够获得一组学生，他们至少有一个 textScore 为 100，按课程名称排序。NSPredicate 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:34:04.573

我认为您可以将谓词设为

```
ANY testScores.score == 100 
```

然后将它们放在一个 fetch 请求中：

```
NSFetchRequest *req = [NSFetchRequest fetchRequestForEntityNamed:@"Student"];
req.predicate = [NSPredicate predicateWithFormat:@"ANY testScores.score == 100"];
req.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"course.name" ascending:YES]]; 
```

# c - 为什么 write(2) 不返回 EINTR？

> ID：11844284
> 
> 赞同：4
> 
> 时间：2012-08-07T10:48:12.953
> 
> 标签：c, linux

我一直在阅读`EINTR`等`write(2)`，并试图确定是否需要在我的程序中检查它。作为健全性检查，我尝试编写一个会运行它的程序。程序永远循环，反复写入文件。

然后，在一个单独的 shell 中，我运行：

```
while true; do pkill -HUP test; done 
```

但是，我从 test.c 看到的唯一输出是`.`来自信号处理程序的 s。为什么不是`SIGHUP`导致`write(2)`失败的原因？

测试.c：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <fcntl.h>
#include <signal.h>
#include <string.h>
#include <errno.h>

#include <sys/types.h>

void hup_handler(int sig)
{
    printf(".");
    fflush(stdout);
}

int main()
{
    struct sigaction act;
    act.sa_handler = hup_handler;
    act.sa_flags = 0;
    sigemptyset(&act.sa_mask);

    sigaction(SIGHUP, &act, NULL);

    int fd = open("testfile", O_WRONLY);

    char* buf = malloc(1024*1024*128);

    for (;;)
    {
        if (lseek(fd, 0, SEEK_SET) == -1)
        {
            printf("lseek failed: %s\n", strerror(errno));
        }
        if (write(fd, buf, sizeof(buf)) != sizeof(buf))
        {
            printf("write failed: %s\n", strerror(errno));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T10:58:31.573

Linux 倾向于避免`EINTR`写入/读取文件；请参阅[此处的讨论](http://www.gossamer-threads.com/lists/linux/kernel/325533)。当进程在磁盘写入时阻塞时，它可能会处于不可[中断的睡眠](https://stackoverflow.com/questions/223644/what-is-an-uninterruptable-process)状态（进程代码`D`），这表明它当时不能被中断。这取决于设备驱动程序；Linux Device Drivers, 3rd Edition的[在线副本](http://www.makelinux.net/ldd3/chp-6-sect-2)是一个很好的参考，可以从内核方面看到它。

对于其他可能表现不同的平台，或者对于肯定会发生 EINTR 的管道和套接字，您仍然需要处理 EINTR。

请注意，您`sizeof(void *)`一次只写入字节：

```
char* buf = malloc(1024*1024*128);

    if (write(fd, buf, sizeof(buf)) != sizeof(buf)) 
```

这应该是

```
const size_t BUF_SIZE = 1024*1024*128;
char* buf = malloc(BUF_SIZE);

    if (write(fd, buf, BUF_SIZE) != BUF_SIZE) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T10:57:31.923

有2种可能：

*   你写的字节很少，因为**你误用了`sizeof`operator**。因此，这种`write`情况会立即发生并且永远不会被打断——你一次只写 4 或 8 个字节

*   系统调用以某种方式重新启动，就好像您申请`SA_RESTART`了`sigaction`

* * *

在您的代码中，因为`buf`是一个指针，所以会`sizeof(buf)`产生您机器上指针的大小，而不是（更大的）分配空间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:57:01.863

如果您查看手册[页](http://linux.die.net/man/2/write)`EINTR`

> 在写入任何数据之前调用被信号中断

同样来自[信号（7）手册页](http://linux.die.net/man/7/signal)：

> read(2)、readv(2)、write(2)、writev(2) 和 ioctl(2) 在“慢”设备上调用。“慢”设备是 I/O 调用可能无限期阻塞的设备，例如终端、管道或套接字。（根据此定义，磁盘不是慢速设备。）如果慢速设备上的 I/O 调用在被信号处理程序中断时已经传输了一些数据，则调用将返回成功状态（通常，传输的字节数）。

将这两者结合起来，如果写入磁盘上的文件，并且`write`已经开始写入（即使只写入了一个字节），则该`write`调用的返回将是成功的。

# fuse - fusermount：umount 失败：参数无效

> ID：11844289
> 
> 赞同：6
> 
> 时间：2012-08-07T10:48:23.887
> 
> 标签：fuse

当我尝试卸载 FUSE 文件系统时，出现错误：

```
root@ubuntu:/home/fufs/src# fusermount -u /tmp/kpfss
fusermount: failed to unmount /tmp/kpfss: Invalid argument
root@ubuntu:/home/fufs/src# fusermount -z -u /tmp/kpfss
fusermount: failed to unmount /tmp/kpfss: Invalid argument 
```

如何卸载文件系统？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-20T12:32:04.283

之前遇到过这个问题，您可能会发现使用 umount 会有所帮助：

```
umount -f /tmp/kpfss # or whatever the mount point is 
```

当我看到这个问题时，与远程服务器的连接断开了，并且试图访问挂载点锁定了 shell。shell进程甚至不能被杀死。

使用 umount 似乎有助于解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T22:24:43.337

通常在开发 fuse 文件系统时，当 fuse 文件系统锁定在无限的 while 循环中或以某种方式出现段错误时，我会遇到这种情况。我知道如何释放它的唯一方法是 ps -ef | grep name_of_fuse_filesystem_process 并杀死相应的pid。

# java - 使用 iText 将 word 文档转换为 pdf 时出错

> ID：11844292
> 
> 赞同：1
> 
> 时间：2012-08-07T10:48:24.373
> 
> 标签：java, pdf, itext

下面是我用来将word文档转换为pdf的代码。编译代码后，生成PDF文件。但是该文件包含一些垃圾字符以及 word 文档内容。请帮助我知道我应该做些什么修改来摆脱垃圾字符。我使用的代码是：

```
import com.lowagie.text.Document; 
import com.lowagie.text.Paragraph; 
import com.lowagie.text.pdf.PdfWriter; 
import java.io.File; 
import java.io.FileOutputStream; 

public class PdfConverter 
{

    private void createPdf(String inputFile, String outputFile)//, boolean isPictureFile) 
    {
        Document pdfDocument = new Document(); 
        String pdfFilePath = outputFile; 
        try
        {
            FileOutputStream fileOutputStream = new FileOutputStream(pdfFilePath); 
            PdfWriter writer = null; 
            writer = PdfWriter.getInstance(pdfDocument, fileOutputStream); 
            writer.open(); 
            pdfDocument.open(); 
            /*if (isPictureFile) 
            { 
            pdfDocument.add(com.lowagie.text.Image.getInstance(inputFile)); 
                } 
            else 
            { */
            File file = new File(inputFile); 
    pdfDocument.add(new Paragraph(org.apache.commons.io.FileUtils.readFileToString(file))); 
                //} 
            pdfDocument.close(); 
            writer.close(); 
            System.out.println("PDF has been generted"); 
            } 
            catch (Exception exception) 
            { 
            System.out.println("Document Exception!" + exception); 
            } 
            } 

    public static void main(String args[]) 
    { 
    PdfConverter pdfConversion = new PdfConverter(); 
    pdfConversion.createPdf("C:/test.doc", "C:/test.pdf");//, true); 

        }

    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:58:46.727

只是因为你命名你的类 PdfConverter 你没有。您所做的就是将二进制内容作为字符串读取并将其写为一个段落（这就是您所看到的）。这种方法肯定不会成功。有关类似问题，请参阅[https://stackoverflow.com/questions/437394 。](https://stackoverflow.com/questions/437394)

如果您只对 word 文档的内容感兴趣，您可能希望尝试使用[Apache POI（Microsoft 文档的 Java API）](http://poi.apache.org)来阅读您的文档，而不是二进制级别，而是高度抽象级别。如果您的 Word 文档具有简单（我的意思是*非常*简单）的结构，您可能会得到合理的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:33:29.753

为此，您必须正确读取 doc 文件，然后使用读取的数据创建 PDF 文件。

您现在正在做的是从 doc 文件中读取数据，该文件具有垃圾值，因为您没有使用适当的 API 来读取数据，然后将获得的垃圾数据存储在 PDF 文件中。因此问题。

# objective-c - 绘制条中具有不同颜色的 NSProgressIndicator

> ID：11844296
> 
> 赞同：2
> 
> 时间：2012-08-07T10:48:40.040
> 
> 标签：objective-c, macos, cocoa, nsprogressindicator

我想更改在`NSProgressIndicator`栏内绘制的默认渐变的颜色。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-08T08:50:50.547

最简单的方法是更改​​ HUE....请参阅屏幕截图以更好地理解...

![在此处输入图像描述](../Images/6d5711d18e8c802bd1eef772e12f5bce.png)

然后你将有进度条：

![在此处输入图像描述](../Images/77b65a05105837c6fdf70de7455c672a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:27:26.467

正如[这个答案](https://stackoverflow.com/a/10643148/244340)中所建议的，您可以应用核心图像过滤器来重新着色。那将是最简单的方法，因为您不必自己制作动画。

如果你想要一个完全不同的外观，然后覆盖`drawRect:`并绘制你想要的任何东西，使用`[self doubleValue]`并`[self maxValue]`找出在哪里绘制。不过，这不会让您免费获得任何动画或渐变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T13:36:22.257

试试[这个](https://github.com/kelan/yrk-spinning-progress-indicator)代码。提取`YRKSpinningProgressIndicator`类并将其用作通常的进度指示器

# php - 删除 FB 应用程序而不检查“删除所有活动”

> ID：11844305
> 
> 赞同：0
> 
> 时间：2012-08-07T10:49:22.210
> 
> 标签：php, facebook, facebook-apps, facebook-authentication

如果人们在他们的 facebook 设置中删除一个应用程序，他们可以在不选中“删除所有应用程序活动”的情况下这样做。

![在此处输入图像描述](../Images/715241c9a641cff84d4ef4f60cf51c48.png)

（屏幕是德语，但复选框右侧的文字显示：“删除所有应用程序活动”）

我使用此代码段进行身份验证：

```
$user = null;
$facebook = new Facebook(array(
  'appId'  => 'MYID',
  'secret' => 'MYSECRET',
  'cookie' => true
));
$user = $facebook->getUser();
if (!$user)
{
   //Request new Authentication, get Permissions and Token
}
else
{
   //Start App
} 
```

**如果有人在未**选中该选项的情况下删除了应用程序，他仍然可以访问我的应用程序并且`$user`仍然包含用户 ID，因此不会启动新的身份验证过程。

但是我真的很想知道，如果您不检查该选项并且我的所有权限仍然存在，那么究竟删除了什么？否则如果不是，我怎么能检测到这种“轻删”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:28:17.287

该选项只会阻止在他们的个人资料上共享内容。他们没有完全删除该应用程序，这就是您不需要重新验证它们的原因。

他们需要从[App Settings Page](http://www.facebook.com/settings?tab=applications)中删除该应用程序。这将删除对用户个人资料的所有访问权限，然后您需要重新授权用户。

# javascript - 比使用大量 else if 语句更有效的方法

> ID：11844307
> 
> 赞同：2
> 
> 时间：2012-08-07T10:49:26.280
> 
> 标签：javascript, if-statement

我正在尝试在 Javascript 中找到更好的方法：

```
if ( text === 'amy' ) {
var url = 'http://www.mydomain.com/amylikescats.html';
}
else if ( text === 'dave' ) {
var url = 'http://www.mydomain.com/daveshome.html';
}
else if ( text === 'steve' ) {
var url = 'http://www.mydomain.com/steve2.html';
}
else if ( text === 'jake' ) {
var url = 'http://www.mydomain.com/jakeeatstofu.html';
}
else {
var url = 'http://www.mydomain.com/noone.html';
} 
```

有没有更高效的代码方式来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T10:51:47.537

使用对象作为地图：

```
var map = {
    "amy": 'http://www.mydomain.com/amylikescats.html',
    "dave": 'http://www.mydomain.com/daveshome.html',
    // etc
};

var text = "whatever";
var url = map[text] === undefined ? 'http://www.mydomain.com/noone.html' : map[text]; 
```

这将为您节省最大数量的重复代码，但如果您还需要做其他事情而不是设置`url`a`switch`可能更合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T10:50:46.287

切换声明！

```
var url = 'http://www.mydomain.com/noone.html';
switch(text) {
  case 'amy': url = 'http://www.mydomain.com/amylikescats.html';
  break;
  case 'dave': url = 'http://www.mydomain.com/daveshome.html';
  break;
  case 'steve': url = 'http://www.mydomain.com/steve2.html';
  break;
  case 'jake': url = 'http://www.mydomain.com/jakeeatstofu.html';
  break;
} 
```

现在不需要`default`子句，因为您已经`url`在切换之前进行了初始化。

否则你可以添加这个：

```
default: url = 'http://www.mydomain.com/noone.html';
break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:52:06.167

关联数组：

```
var data = {
  amy: 'http://www.mydomain.com/amylikescats.html',
  dave: 'http://www.mydomain.com/daveshome.html',
  // etc... 
} 
```

要使用：

```
var url = data[text]; 
```

这种`else`情况可以通过数组中不存在的项目来复制，所以扩展一下：

```
var url = '';
if(!(text in data)){
    url = 'http://www.mydomain.com/daveshome.html';
}
else{
    url = data[text];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:52:39.427

将唯一部分存储在字典中，然后从那里获取：

```
var map = {
    amy: "amylikescats",
    dave: "daveshome",
    steve: "steve2",
    jake: "jakeeatstofu"
};
var url = map[text];
if (!url) {
    url = 'http://www.mydomain.com/noone.html';
} else {
    url = 'http://www.mydomain.com/' + url + '.html';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T10:58:09.237

您可以使用一个对象来保存不同文本值的 URL，然后`||`在分配值时使用运算符以`url`在必要时使用备用值。

```
var urlsForText = {
      'amy': 'http://www.mydomain.com/amylikescats.html',
     'dave': 'http://www.mydomain.com/daveshome.html',
    'steve': 'http://www.mydomain.com/steve2.html',
     'jake': 'http://www.mydomain.com/jakeeatstofu.html'
};

var url = urlsForText[text] || 'http://www.mydomain.com/noone.html'; 
```

# perl - Mail::POP3Client 下载最新的 n 封电子邮件？

> ID：11844312
> 
> 赞同：1
> 
> 时间：2012-08-07T10:49:50.930
> 
> 标签：perl, email, pop3

我正在使用[Mail::POP3Client](http://search.cpan.org/~sdowd/Mail-POP3Client-2.16/POP3Client.pm)的简单性，并希望提取最新`n`消息的标题（我的代码中为 5）。这将是一个网页脚本，并在页面加载时下载并解析了最新的 5 封电子邮件（他们的主题和发件人）但是现在我从 7 月收到一些各种各样的电子邮件，而不是我最近的 5 封电子邮件（我在 7 月之前有很多电子邮件以及）。显然`my $email_count = $pop->Count;`只是计数而不是索引类型的值？

```
for (my $i = $email_count; $i >= $email_count-5; $i--) {
    foreach ($pop->Head($i)) {
        if (/^(From):\s+/i)    { $FROM = $_; }
        if (/^(Subject):\s+/i) { $SUBJECT = $_; }

        if (/^(Date):\s+/i) {
            $TIME = $_;
            $TIME =~ s/Date: (.*)/$1/;

            my $tstamp = str2time($TIME);
#           $TIME = $tstamp;
            $TIME = scalar localtime($tstamp);

            my @fromsubj;
            $fromsubj[0] = $FROM;
            $fromsubj[1] = $SUBJECT;
            $subject{$TIME} = [@fromsubj];
        }
    }

    print "Index: $i \n";
    }
print Dumper(%subject);
print "\n";
print Dumper(%from);

print "Mails $email_count to ".($email_count-5); 
```

输出：

```
Index: 4030 
Index: 4029 
Index: 4028 
Index: 4027 
Index: 4026 
Index: 4025

$VAR1 = 'Thu Jul 26 09:01:07 2012';
$VAR2 = [
          'From: Person one ',
          'Subject: Fwd: test '
        ];
$VAR3 = 'Tue Jul 24 15:09:43 2012';
$VAR4 = [
          'From: person two ',
          'Subject: subj '
        ];
(And so on)
 ....
Count 4030 4020 
```

我怎样才能只提取最新的电子邮件？POP/this 模块是否有可能，如果不是，我可以使用什么来代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:22:52.080

这应该有很大帮助 - [http://www.ietf.org/rfc/rfc1939.txt](http://www.ietf.org/rfc/rfc1939.txt)。我没有看到任何关于按日期排序的信息，也没有看到任何关于排序的信息。

我开发了一个必须处理大量邮件的 IMAP 解决方案。由于无法限制结果，我不得不用大量 id 填充数组，然后以块的形式迭代数组。在我开发此解决方案时，POP 不可靠且速度慢。**IMAP 绝对不是完美的，但使用它进行开发比流行音乐要顺畅得多。**

既然你说你*没有*处理那么多数据，我只会从邮箱中提取所有数据，然后按日期对其进行排序并在 Perl 中对其进行限制。

# android - 在按钮单击时更改片段的视图

> ID：11844316
> 
> 赞同：3
> 
> 时间：2012-08-07T10:50:03.533
> 
> 标签：android, android-layout, android-fragments

我正在使用 Android 应用程序。在我的应用程序中，我必须更改按钮单击时片段的视图。以下是我的代码：

```
public View onCreateView(final LayoutInflater inflater, final ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    if (container == null) {
        return null;
    }
LinearLayout theLayout = (LinearLayout)inflater.inflate(R.layout.settings, container, false);
Button edit = (Button) theLayout.findViewById(R.id.btn_edit);
edit.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
// Here I want to change the view.[xml file]
}
        });
return theLayout;

} 
```

在活动中，我们可以通过使用来更改视图`setContentView()`。我怎么能在片段中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:38:27.330

我找到了我的问题的答案。实际上非常愚蠢的怀疑。

```
edit.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                /**
                 * Edit button click will replace Settings screen to
                 * edit screen
                 **/

                theLayout = (LinearLayout)inflater.inflate(R.layout.edit_settings, container, false);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:06:16.630

认为最好使用两个片段并在单击按钮时将一个片段替换为另一个片段。如果您想动态添加片段 - 请参阅此示例： http: [//notionink.wikidot.com/rajeshbabu](http://notionink.wikidot.com/rajeshbabu)

# sql - SQL性能分析

> ID：11844318
> 
> 赞同：0
> 
> 时间：2012-08-07T10:50:04.130
> 
> 标签：sql

我有一个表 1 lac 行，有 50 列。我知道我必须根据主键准确选择一行和一列。那么我必须使用什么查询

```
SELECT * FROM <TAB_NAME> WHERE <IND_COL_NAME> = XXXXXX 
```

或者

```
SELECT COL_NAME FROM <TAB_NAME> WHERE <IND_COL_NAME> = XXXXXX 
```

所以任何人请告诉我哪种方法更好以及为什么。从性能上看。假设此查询在可扩展的应用程序中频繁运行。请说明原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:51:26.790

理想的方法是

```
 SELECT yourcolumn FROM yourtable WHERE yourcondition 
```

它将产生更少的网络流量，并且更准确地说明您的要求。

此外，如果您的表具有某些类型的列，则可以避免对它们进行昂贵的查询，从而提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:54:17.953

这完全取决于您的索引，但是，在我能想到的大多数情况下，窄选择 ( `SELECT COL_NAME`) 会执行得更好，因为它为 SQL 提供了更多关于如何获取数据的“选项”。

一般来说，对于任何给定的查询，最好的情况是有一个索引，它允许根据您的`WHERE`条件进行索引搜索，但也包括您在`SELECT`. 这样，RDBMS 只需要使用索引来获取查询结果——它根本不需要基础表。

在 MS SQL Server 中，覆盖索引将允许您执行此操作。

不太可能

```
SELECT * FROM <TAB_NAME> WHERE <IND_COL_NAME> = XXXXXX 
```

在许多情况下将是最佳的，因为除非您有一个`IND_COL_NAME`包含表中所有列的索引（这将浪费存储，除非`<IND_COL_NAME>`您的聚集索引）。否则，这意味着查询将需要查找索引，`<IND_COL_NAME>`然后重新连接到物理表中以检索其余列数据。

所以对于你的狭隘查询

```
SELECT COL_NAME FROM <TAB_NAME> WHERE <IND_COL_NAME> = XXXXXX 
```

最佳索引将打开`<IND_COL_NAME>`，其中包括`COL_NAME`。由于您说这`<IND_COL_NAME>`是您的主键，因此它将具有很高的选择性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:57:19.543

不要`*`用于指定字段，始终准确指定您想要的字段。

获取单行时，数据大小差异很小，但您通常应该只获取减少带宽使用所需的数据。另一方面是使用`*`增加了对表格设计的依赖。如果您稍后向表中添加更多字段，则查询也会获取这些字段，这可能意味着您获得的数据多于缓冲区的容量，并且您会遇到异常。

当您从表中获取单个字段（或几个字段）时，会有特定的性能优势。如果您有一个包含所需字段的键的索引作为包含的列，则可以仅从索引运行查询，甚至不触及表本身。

# php - 将 PHP 类对象获取到 HTML 用户变量（HTML 中的 PHP 变量）的方法

> ID：11844319
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:50:04.363
> 
> 标签：php

我想以简单的方式将 PHP DB 类对象的值获取到 HTML 端，以便我可以简单地回显。将 DB PHP 类对象回显到 HTML 的方法（例如 smart T 中的简单方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:09:32.707

有多种方法可以使对象对模板可见，您可以尝试通过

*   [要求](http://uk.php.net/manual/en/function.require.php)
*   [要求一次](http://uk.php.net/manual/en/function.require-once.php)

也看看这里

*   [变量范围](http://www.php.net/manual/en/language.variables.scope.php)

# java - 不能从一个 JSP 移动到另一个

> ID：11844324
> 
> 赞同：2
> 
> 时间：2012-08-07T10:50:28.747
> 
> 标签：java, html, jsp, web-applications, servlets

一开始我在`adminPage.jsp`：

```
<!DOCTYPE html>
<html>
<head><title>System Administrator Page</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>

<h1>Hello ${name.firstName} ${name.lastName} , You've logged in successfully!</h1>
<h1>
Please choose one of the following options
</h1>

<fieldset>
  <legend>Add a new manager to the bank system</legend>
  <form action="adminAddNewManager"> 
    <a href="registration.jsp">Press here to continue</a>
  </form>
</fieldset> 
```

我想移动到`registration.jsp`位于同一文件夹中的`adminPage.jsp`.

但是当我尝试移动到`adminPage.jsp` ：

![在此处输入图像描述](../Images/f103cd55df326172cdebb0af298fc101.png)

我得到：

```
HTTP Status 404 - /WebBank/registration.jsp

--------------------------------------------------------------------------------

type Status report

message /WebBank/registration.jsp

description The requested resource (/WebBank/registration.jsp) is not available.

--------------------------------------------------------------------------------

Apache Tomcat/7.0.28 
```

这是为什么 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:18:14.510

如果它在同一个文件夹中，请使用`< a href="/registration.jsp">Press here to continue< /a>`

如果它没有帮助（我怀疑）：
`HTTP Status 404`意味着在服务器上找不到请求的文件（不足为奇）
所以这些都发生了：

1.  网址不正确。（我敢打赌）。

2.  文件**未创建**或**名称不同**或未**保存**。

    您可能还想检查页面名称是全部小写还是完全`registration.jsp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:26:29.480

首先，我认为表单标签是无用的，您使用链接而不是表单调用新页面，因此您可以简单地删除它。

第二个在你的href尝试放./registration.jsp

# c# - 在配置中为 Tracesource TextWriterTraceListener 输出添加自定义路径

> ID：11844326
> 
> 赞同：2
> 
> 时间：2012-08-07T10:50:33.747
> 
> 标签：c#, path, app-config, relative-path, trace

所以我使用 Tracesource 来记录一些错误并且不想在用户本地 Windows 文档结构中创建日志文件（类似于`System.Environment.SpecialFolder.LocalApplicationData`）。

但是我不知道我是否可以在配置文件中做类似的事情。

```
<system.diagnostics>
    <trace autoflush="true"/>
    <sources>
        <source name="MainSource"
              switchName="MainSwitch"
              switchType="System.Diagnostics.SourceSwitch" >
            <listeners>
                <add name="LogFileListener" />
            </listeners>
        </source>
    </sources>
    <sharedListeners>
        <add name="LogFileListener"
           type="System.Diagnostics.TextWriterTraceListener"
           initializeData="This is the place the output file goes to"
           traceOutputOptions="ProcessId, DateTime, Callstack" />
    </sharedListeners>
    <switches>
        <add name="MainSwitch" value="Verbose" />
    </switches>
</system.diagnostics> 
```

initializeData 是我认为构造函数的参数，是我必须放置自定义路径的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:55:14.047

配置文件中日志文件的路径是绝对路径，不能由任何特殊变量假定。

但是，您可以动态创建它，这应该可以解决您的问题

[如何：创建和初始化跟踪源](http://msdn.microsoft.com/en-us/library/ms228984.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:16:27.710

下面是我用于选项的示例代码。它可以帮助您理解架构。

```
Configuration exeConfiguration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

ConfigurationSection diagnosticsSection = exeConfiguration.GetSection("system.diagnostics");

ConfigurationElementCollection switches = diagnosticsSection.ElementInformation
                                                            .Properties["switches"]
                                                            .Value as ConfigurationElementCollection;

foreach (ConfigurationElement switchElement in switches)
{
    Debug.WriteLine("switch: name=" + 
        switchElement.ElementInformation.Properties["name"].Value +
        " value=" + 
        switchElement.ElementInformation.Properties["value"].Value);
} 
```

# java - 立即将新的源文件添加到 Eclipse 项目中

> ID：11844328
> 
> 赞同：0
> 
> 时间：2012-08-07T10:50:42.637
> 
> 标签：java, eclipse

[这个问题是从命令行打开指定 eclipse 项目中的 .java 文件](https://stackoverflow.com/questions/11798201/open-java-file-in-specified-eclipse-project-from-command-line)的后续问题 ，特别是这一部分（有关更多背景信息，请参见原始问题）：

> 我实际上是在尝试自动创建一个源文件并希望像我在 eclipse 中默认创建它一样对其进行编辑。

简而言之，我需要`.java`在 Eclipse 编辑器中打开一个外部生成的文件。Eclipse 的自动刷新最多需要 5 秒才能找到新文件，但我想在最多 1-2 秒内打开它。

对此的任何指示/想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:56:05.460

也许 eclipse 的[FileSync](http://marketplace.eclipse.org/content/filesync)插件对你来说是正确的。如果速度不够快，您可以[查看源代码](http://code.google.com/a/eclipselabs.org/p/filesync4eclipse/source/browse/)并根据需要进行调整。

# asp.net - 使用 ajaxmin 的默认缩小（不更改变量、函数名 - 仅删除注释和空格）

> ID：11844333
> 
> 赞同：0
> 
> 时间：2012-08-07T10:50:48.933
> 
> 标签：asp.net, minify, microsoft-ajax-minifier, ajaxmin

我正在使用 microsoft ajax minifier 并且我正在使用下面的代码来缩小 CSS 和 JS 文件，我希望只删除注释和空格。我不想重命名或更改变量名或函数名。

我如何使用默认缩小选项，这将只从我的 css 和 JS 文件中删除空格和注释。我的 .net 实用程序代码如下所示......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.IO;
namespace CallAjaxMin
{
class CallAjaxMin
{
    static void Main(string[] args)
    {
        try
        {

            string sWebsiteScriptsFolder = @"D:\NewMerchandising\Javascript";
            string[] strFiles = Directory.GetFiles(sWebsiteScriptsFolder);

            foreach (string file in strFiles)
            {
                string sSourceFileName = file;
                if (!((sSourceFileName == sWebsiteScriptsFolder + "\\eluminate.js") | (sSourceFileName == sWebsiteScriptsFolder + "\\EventMediaPlayer.js")))
                {
                    string sDestFile = file;
                    ProcessStartInfo processinfo = new ProcessStartInfo(@"C:\Program Files\Microsoft\Microsoft Ajax Minifier\AjaxMin.exe");

                    processinfo.Arguments = "\"" + sSourceFileName + "\" -o \"" + sDestFile + "\" -clobber";
                    Process.Start(processinfo);
                }

            }

        }
        catch (Exception ex)
        {
            System.Console.WriteLine(ex.ToString());
        }
    }
} 
```

}

关于如何从 CSS 和 JS 文件中仅删除注释和空格的任何想法？是否有任何特定的参数或我需要在这里传递的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T17:12:03.490

如果您不想重命名任何变量或函数，只需将**-rename:none**命令行参数添加到您正在构建的 Arguments 字符串。查看[http://ajaxmin.codeplex.com/wikipage?title=Command-Line%20Switches](http://ajaxmin.codeplex.com/wikipage?title=Command-Line%20Switches)上的文档以获取可用开关的完整列表。

# python - python中max函数没有cmp关键字

> ID：11844335
> 
> 赞同：2
> 
> 时间：2012-08-07T10:50:52.727
> 
> 标签：python, max, cmp

因此，在 python 中对列表进行排序时，该`sorted`函数可以带一个`cmp`关键字来覆盖`__cmp__`我们正在排序的对象的函数。

我希望`max`有一个类似的关键字，但它没有。人们知道为什么吗？

无论如何，有人知道解决这个问题的最pythonic方法吗？我不想覆盖`__cmp__`类本身，而我能想到的其他选项`sorted(L,cmp=compare)[0]`看起来很丑陋。什么是这样做的好方法？

给出的实际示例是`L=[a1,a2,...,an]`其中 each`ak`本身就是一个整数列表，我们想要最大的整数在哪里`ai<aj`是词典意义上的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:53:41.940

不要使用`cmp`. 它已从 Python3 中删除，取而代之的是`key`.

由于 Python 按字典顺序比较字符串，您可以使用它`key = str`来查找“最大”整数：

```
In [2]: max([10,9], key = str)
Out[2]: 9 
```

# sql - 如何更新单个表中的多个列

> ID：11844338
> 
> 赞同：1
> 
> 时间：2012-08-07T10:51:05.163
> 
> 标签：sql

我创建了一个包含三列 GsID、ALlowance 和数量的表

```
Begin   if exists(select * from [dbo].[HRAllowances] where GdId=@GdId)  begin
        update [dbo].[HRAllowances]          set
             Amount=@Amount  where GdId=@GdId        end

end 
```

这仅适用于一个特定的行..

我想允许用户更新所有行的金额

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:52:58.800

看到您的评论后，如果您希望更新**所有记录的所有** `Amount`字段，请删除您的`WHERE`子句，因为这是按 where 过滤记录`GdId=@GdId`：

```
UPDATE [dbo].[HRAllowances]
SET Amount=@Amount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:56:49.467

如果要更新所有行，则必须删除 where 条件

`where GdId=@GdId`从你查询。

像这样 ：-

```
update [dbo].[HRAllowances] set  Amount=@Amount 
```

我希望它会奏效！！

# android - Android：如何在 Android 中使用 xxx:node-set() 进行 XSLT 转换

> ID：11844341
> 
> 赞同：0
> 
> 时间：2012-08-07T10:51:13.693
> 
> 标签：android, xslt, transform, exslt, node-set

我有一个 XSL 文件，它成功地在桌面浏览器上转换了我的 XML。在那个 XSLT 中，我使用了 EXLT node-set() 函数。
尝试在 Android 上使用相同的 XSL 文件转换相同的 XML 文件时，它会抛出一个错误，指出“XPATH 表达式中的错误”，并指向我调用 node-set() 函数的行。
关于如何在 Android 中使用 xxx:node-set() 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T14:43:01.237

Android使用LibXML2，所以有一个`hasExsltSupport()`方法。如果启用，请按照[http://www.exslt.org/exsl/index.html所示使用](http://www.exslt.org/exsl/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-23T18:20:25.517

Android 使用 Xalan。我还没有设法让 Android Studio 使用声明的 exslt 扩展进行构建，但是 xalan 命名空间函数是在下载命名空间声明后构建的。不幸的是，它仍然抛出错误：

`javax.xml.transform.TransformerException: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object org.apache.xalan.extensions.ExtensionsTable.extFunction(org.apache.xpath.functions.FuncExtFunction, java.util.Vector, org.apache.xalan.extensions.ExpressionContext)' on a null object reference`

这似乎是一个错误，因为上下文应该来自处理器，xsl 只提供参数/变量。

# jquery - location.reload() 不带参数

> ID：11844342
> 
> 赞同：0
> 
> 时间：2012-08-07T10:51:16.467
> 
> 标签：jquery

我有下面的代码。

```
<button id="RefreshMe">Refresh Page</button>
<script>
jQuery('#PageRefresh').click(function() {
    location.reload();
});
</script> 
```

这很好用，但是我的页面在表单中有一些隐藏的值，因此它不会重新加载 www.example.com，而是重新加载 www.example.com?a=111 等，这会导致错误，因为 uri 很大。我希望用户返回 www.example.com 而不是 www.example.com?a=111 还需要添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T12:04:18.197

一个更好的答案是这样的：

```
 history.pushState({}, 'title', '/'); 
```

这将刷新没有参数和路径的页面（基本上是您的主页）。但是假设您有一个非主页，例如：

```
yoursite.com/pricing?myparam=shazam 
```

如果您只想删除参数，您可以这样做：

```
history.pushState({}, 'title', '/pricing'); 
```

你最终会得到这个：

```
yoursite.com/pricing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:53:45.740

```
document.location = document.location.replace(/[\?].*/,''); 
```

# java - JTable - 多类型列

> ID：11844343
> 
> 赞同：0
> 
> 时间：2012-08-07T10:51:24.903
> 
> 标签：java, swing

我正在尝试使用具有两列的 JTable 创建一个简单的属性窗口：属性和值。我希望“值”列是文本编辑或复选框。如何实现？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:59:38.827

您应该实现您的自定义[TableCellRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellRenderer.html)和[TableCellEditor](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellEditor.html)。

然后检索您需要自定义的 TableColumn 并设置您实现这些接口的类。

```
TableColumn column = table.getColumnModel().getColumn(vColIndex);
column.setCellRenderer(new YourCustomCellRenderer());
column.setCellEditor(new YourCustomCellEditor()); 
```

# webgl - 带有 Three.js 的着色器中的字段“值”

> ID：11844352
> 
> 赞同：1
> 
> 时间：2012-08-07T10:51:42.490
> 
> 标签：webgl, three.js

我注意到纹理在所有着色器中都有一个名为“值”的字段，但似乎从未使用过这个字段。

例子 ：

```
tDiffuse: { type: "t", value: 0, texture: null }, 
```

这个领域的目的是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:45:56.533

它被使用。

它定义了纹理需要存储在哪个槽中。插槽是着色程序可以访问纹理槽采样器的地方。这确实大部分是 0，因为我们在着色器中只使用了 1 个纹理。但是如果我们想要在着色器中访问多个纹理，则需要将值更改为必要的插槽数。

就像你可以在这里看到的：

[https://github.com/gero3/three.js/blob/master/src/renderers/WebGLShaders.js#L1392-1397](https://github.com/gero3/three.js/blob/master/src/renderers/WebGLShaders.js#L1392-1397)

地图是第一个纹理。(slot 0) envMap 是第二个纹理。(slot 1) lightMap 是第三个纹理。（插槽 2）

对于您在 shaderprogram 中使用的每个纹理，您必须选择一个新插槽。

# javascript - 无法使用变量访问数据 JSON

> ID：11844355
> 
> 赞同：0
> 
> 时间：2012-08-07T10:51:47.943
> 
> 标签：javascript, json, jquery, getjson

我尝试使用带有破折号的 ID 来获取有关 JSON 中某些按钮状态的信息，该`$. getJson ()` ID 分为两部分，并将它们输入到数组 regarr 中。但我无法在此查询中从 JSON 获取数据：

```
data.regarr[0].regarr [1] //regarr is undefined 
```

HTML：

```
<div class='buttons' id='lamps-fire1'>OFF</div> 
```

我的 JSON：

```
{"lamps":{"fire1":"off","fire2":"off","fire3":"off"},"motor":"on","temperature":"12"} 
```

JavaScript

```
$(document).ready(function()
{
    function reloadvalues()
    {
        $('.buttons').each(function ()
        {
                var id=$(this).attr('id');
                var re=/-/;
                var re2=/[a-z0-9]{1,}[^-][a-z0-9]{1,}/ig;
                var regarr=[];
                 regarr=id.match(re2);
                if (id.search(re)==-1)
                {
                    $.getJSON('homeapi.ini','tire=none&id='+encodeURIComponent(id),function (data)
                    {
                    if (data.motor=='off')
                    {
                        $(this).html('OFF.');
                    }
                    else{
                        $(this).html('ON.');
                    }
                    });
                }
                else{
                    $.getJSON('homeapi.ini','',function (data)
                    {
                    if ((regarr[1]!='undefined')||(regarr[0]!='undefined')||(regarr !='undefined'))
                    {
                    if (data.regarr[0].regarr[1]=='off')
                    {
                        $(this).html('OFF.');
                    }
                    else{
                        $(this).html('ON.');
                    }
                    }
                });
                }
            });
    }
    setInterval(function (){
        reloadvalues();
        },5000);
}); 
```

也许有人知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:02:16.920

`this`回调函数范围内的引用与每个循环内的引用不同。在输入子功能之前，您必须缓存对它的引用。然后，在您的`$.getJSON`方法中的回调函数块中，使用存储的引用（在这种情况下我称之为`self`）而不是`this`：

```
$(document).ready(function() {
    function reloadvalues() {
        $('.buttons').each(function() {
            var self = this;

            /* ... */ 
            if (id.search(re) == -1) {
                $.getJSON('homeapi.ini', 'tire=none&id=' + encodeURIComponent(id), 
                function(data) {

                    if (data.motor == 'off') {
                        $(self).html('OFF.');
                    }
                    else {
                        $(self).html('ON.');
                    }
                });
            }
            /* ... */
        });
    }
});​​​ 
```

关于引用错误，当使用存储在变量中的属性名称时，您必须使用`[ ]`而不是简单的`.`. 在这种情况下：

代替~~`data.regarr[0].regarr[1]`~~和`data[regarr[0]][regarr[1]]`

# html - Chrome 和 Firefox 之间的 HTML 换行符

> ID：11844370
> 
> 赞同：-2
> 
> 时间：2012-08-07T10:53:05.023
> 
> 标签：html, firefox, line-breaks

我在 html 页面中使用简单的换行符来分隔页面上的某些项目。

我谷歌浏览器这似乎工作正常，但是当我在 Firefox 中加载页面时，换行符似乎根本没有效果。

还有什么其他方法可以在所有网络浏览器上运行？

代码贴在下面。换行符似乎都没有做任何事情。

```
echo "</br><b style='font-size:40px;color:white;'>".date('D d F Y   -   h:i A')."</b></br></br>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:01:16.847

没有结束标签`</br>`，因为这是一个空标签，要么不被关闭，要么通过在开始标签（XML 表示法）中**附加斜杠**`<br />`来关闭： 。

# c# - 正则表达式和 C# 检查范围数字 + 字符（可选）

> ID：11844371
> 
> 赞同：2
> 
> 时间：2012-08-07T10:53:11.623
> 
> 标签：c#, regex

我正在尝试使用此类检查有效的正则表达式：

```
using System.Text.RegularExpressions;

namespace Checking
{
    public static class CheckALF
    {
        public static bool IsValueOk(string value)
        {
            Regex isValidNumber = new Regex(@"^\d{1,3}(?:I|D|R)?", RegexOptions.IgnoreCase);
            if (isValidNumber.IsMatch(value)) {
                return true;
            }
            return false;            
        }

    }
} 
```

为了方便 regexp 表达式构造，我使用： [http ://www.radsoftware.com.au/regexdesigner/](http://www.radsoftware.com.au/regexdesigner/)

但是我已经尝试了很多在“regexdesigner”上运行但不在 C# .net 4 上运行的东西，所以我对此有点茫然。

我将测试代码（仅部分）与失败的测试一起放在这里。

```
using Checking;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace TestCheck
{
    [TestClass]
    public class TestCheckALF
    {
        [TestMethod]
        public void Check_IsValid_OnlyNumbers_LessThan3Digits()
        {
            Assert.IsTrue(CheckALF.IsValueOk("40"));
            Assert.IsTrue(CheckALF.IsValueOk("0"));
            Assert.IsTrue(CheckALF.IsValueOk("999"));
        }

        [TestMethod]
        public void Check_IsValid_OnlyNumbersMoreThan3Digits()
        {
            Assert.IsFalse(CheckALF.IsValueOk("1000"));  //  ERROR.......
        }

        [TestMethod]
        public void Check_IsValid_NumbersAndR_LessThan3Digits()
        {
            Assert.IsTrue(CheckALF.IsValueOk("40R"));
            Assert.IsTrue(CheckALF.IsValueOk("0R"));
            Assert.IsTrue(CheckALF.IsValueOk("999R"));
        }

        [TestMethod]
        public void Check_IsValid_NumbersAndL_LessThan3Digits()
        {
            Assert.IsTrue(CheckALF.IsValueOk("40I"));
            Assert.IsTrue(CheckALF.IsValueOk("0i"));
            Assert.IsTrue(CheckALF.IsValueOk("999I"));
        }
    }
} 
```

提前致谢。

* * *

# 编辑 2（重要）

RegExDesigner 使表达式失败，因为表达式`new line`末尾有 a。我是说：

^\d{1,3}(?:I|D|R)?
`<new line>`

但它失败了，正如您在下面的第二个“屏幕截图”中看到的那样。它在 C# 代码中使用了正确的表达式，这个表达式：^\d{1,3}(?:I|D|R)?$

# 编辑 1

我在这里复制 RegExDesigner 的两个屏幕截图：

![RegExDesigner 的第一张截图](../Images/2d7a76194d18eac86f1f6c2f6d18f54e.png)

![RegExDesigner 的第二张截图 - 与 Daniel 建议 -](../Images/6a52e0a39b9654b34ba800af9abe8302.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:59:07.203

您不仅需要在开头而且在结尾处锚定正则表达式：

```
@"^\d{1,3}(?:I|D|R)?$" 
```

注意`$`表达式末尾的 。

1000 个匹配项，因为前三位数字与表达式匹配。如果最后没有丢失的锚点，那么之后有不匹配的字符是有效的。

# ruby-on-rails - ember-rails父子下拉列表，计算属性？

> ID：11844373
> 
> 赞同：0
> 
> 时间：2012-08-07T10:53:26.253
> 
> 标签：ruby-on-rails, ember.js

我有 2 个 Ember.Select 下拉菜单。一个有**类别**，另一个有**子类别**。我想根据**类别**下拉列表中选择的值过滤**子类别。**这两个下拉列表的值最初都是从 API 调用中填充到 rails 代码的。

 **类别和子类别具有 has_many、belongs_to 关系。

一个 jsFiddle 示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:20:55.237

我认为您需要的答案在这个 Stackoverflow 答案中有所描述：[emberjs Ember.Select dynamic contentBinding](https://stackoverflow.com/questions/11899274/emberjs-ember-select-dynamic-contentbinding)

它在这里有一个 JSfiddle：http: [//jsfiddle.net/lifeinafolder/4fjC4/](http://jsfiddle.net/lifeinafolder/4fjC4/)**

# c# - 使用 Json.NET 进行自定义映射

> ID：11844374
> 
> 赞同：7
> 
> 时间：2012-08-07T10:53:28.997
> 
> 标签：c#, json, serialization, json.net

我正在尝试映射看起来像的 JSON

```
"ids": {
    "id": {
        "@value":"6763754764235874140"
    }
} 
```

我想将它映射到几个看起来像的类

```
class Property
{
    public Ids Ids { get; set; }
}

class Ids
{
    public string Id { get; set; }
} 
```

所以基本上我想`ids/id/@value`将 JSON 文档`Ids.Id`中的值填充到类架构中。通过浏览文档，我想我可以使用类似的东西

```
[JsonProperty(ItemConverterType=typeof(IdConverter))]
public string Id { get; set; } 
```

并提供一个`JsonConverter`名为`IdConverter`. 但是，当我这样做时，我`IdConverter.ReadJson`永远不会被调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T11:46:19.550

看起来答案`ItemConverterType`是用于转换数组中的项目。`JsonProperty`使用和属性对属性进行双重注释`JsonConverter`有效：

```
[JsonProperty(PropertyName="id")]
[JsonConverter(typeof(IdConverter))]
public string Id { get; set; } 
```

# vb.net - 通用接口 vb

> ID：11844376
> 
> 赞同：0
> 
> 时间：2012-08-07T10:53:30.677
> 
> 标签：vb.net, generics

试图了解通用接口和类。在新方法中使用我的类并使用这种类型调用 data.method 时如何“获取 T”？

```
Public MustInherit Class RepositoryBase(Of T)
    Implements IRepository(Of T)

    Private Data As IDAL

    Public Sub New()
        Data = DTOParserFactory.GetParser(T.GetType().ToString())
    End Sub

    Public Sub delete(BaseDTO As T) Implements Domain.Business.IRepository(Of T).delete
        'Data.delete(Convert.ChangeType(BaseDTO, TypeOf(Type))
    End Sub

    Public Function getAll() As System.Linq.IQueryable(Of T) Implements Domain.Business.IRepository(Of T).getAll
        'Return Data.getAll()()
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:04:38.920

我假设您需要获取`Type`T 的对象？

在你的构造函数中

```
Public Sub New()
    Data = DTOParserFactory.GetParser(GetType(T).ToString())
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:26:14.617

我对这个问题不是很清楚，但也许这就是你要找的。

假设您有一个公共基类`BaseDTO`，那么您将像这样定义您的 RepositoryBase 类：

```
Public MustInherit Class RepositoryBase(Of T As BaseDTO) 
```

然后你像这样声明一个类的实例：

```
Dim userRepository As New RepositoryBase(Of User)() 
```

它的作用是将 T 限制为 BaseDTO 的子类，并让您可以访问 BaseDTO 的所有方法。

# wcf - IIS 上的 WCF 服务与 net.tcp 端口共享。根据性能问题是不是很好的解决方案？

> ID：11844377
> 
> 赞同：1
> 
> 时间：2012-08-07T10:53:33.037
> 
> 标签：wcf, net.tcp, tcpportsharing

我们正计划开发一大组带有 net.tcp 绑定的 WCF 服务（大约 50 个服务）。它们将托管在 IIS 上。

据我了解，有两种实现方式：

1.  在 IIS 上创建一个站点。服务将部署为 IIS 应用程序。因此，所有服务将根据站点的 net.tcp 绑定使用相同的端口（net.tcp 端口共享功能）。

2.  在 IIS 上创建 50 个站点，一个站点用于一项服务。每个站点在 net.tcp 绑定中都有不同的端口 - 因此，每个服务都将使用不同的端口工作。

根据性能问题，哪种方式更好？我找不到有关 net.tcp 端口共享解决方案性能的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:29:36.613

NetTcpPortSharing 是 WCF TCP 端口共享服务。它实现了一个集中的 TCP 侦听器，以便多个进程可以侦听同一个 TCP 端口。
有关更多信息，您可以参考此链接。 [http://msdn.microsoft.com/hi-in/magazine/cc163357(en-us).aspx](http://msdn.microsoft.com/hi-in/magazine/cc163357(en-us).aspx)

端口共享不应该只是部署服务的一个考虑因素。您必须基于设计您的部署。

1.  应用程序池。
2.  崩溃和恢复。
3.  服务器硬件。
4.  服务性质（大数据交易）

# php - 如何使 mod_topbanner 向 2 个不同的链接显示 2 个图像

> ID：11844378
> 
> 赞同：0
> 
> 时间：2012-08-07T10:53:33.027
> 
> 标签：php, joomla

我正在尝试让 Joomla topbanner 显示 2 个不同的图像导致 2 个不同的链接，所以我更改了以下代码，

由此：

```
// get a parameter from the module's configuration
$imgname = $params->get('imgname');
$imgwidth = $params->get('imgwidth', '');
$imgheight = $params->get('imgheight', '90');
$imgtarget = $params->get('imgtarget', '');
$imgpath = JURI::base().'images/stories/';

$html   = "<a href='".$imgtarget."' target='_blank'>";
$html   .= "<img src='".$imgpath.$imgname."' border='0' alt=''       width='".$imgwidth."' height='".$imgheight."'>";
$html   .= "</a>"; 
echo $html; 
```

对此：

```
// get a parameter from the module's configuration
$imgname = $params->get('imgname');
$imgwidth = $params->get('imgwidth', '');
$imgheight = $params->get('imgheight', '90');
$imgtarget = $params->get('imgtarget', '');
$imgpath = JURI::base().'images/stories/';

//split up image and targets
list($image1,$image2) = explode(',',$imgname);
list($target1,$target2) = explode(',',$imgtarget);

//steps
//divide image into 2 using any image editing tool
//upload to server
//set up images separated by comma in admin
//add second target to admin separated by comma

$html   = "<a href='".$target1."' target='_blank'>";
$html   .= "<img src='".$imgpath.$image1."' border='0' alt='' width='".$imgwidth."'     height='".$imgheight."'>";
$html   .= "</a>"; 
$html   = "<a href='".$target2."' target='_blank'>";
$html   .= "<img src='".$imgpath.$image2."' border='0' alt='' width='".$imgwidth."'    height='".$imgheight."'>";
$html   .= "</a>"; 
echo $html; 
```

我在后端使用分隔符对其进行了编辑，但它仅读取第二张图像和链接。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:57:33.293

问题在于这一行：

```
$html   = "<a href='".$target2."' target='_blank'>"; 
```

您不是在 cocatenating `$html`，而是在重新分配它。所有旧信息都丢失了。只需这样做：

```
$html   .= "<a href='".$target2."' target='_blank'>"; 
```

# raphael - 逐渐增加行 Raphael.js

> ID：11844384
> 
> 赞同：0
> 
> 时间：2012-08-07T10:53:51.737
> 
> 标签：raphael, line

我想知道是否可以画一条线`raphael.js`，逐渐增加它的宽度。

它将以例如 的笔划宽度开始，以的`2px`结束。`stroke-width``10px`

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:35:06.017

是的，这很简单。给定一个 Raphael 纸元素`paper`和路径字符串`pathstr`，只需执行以下操作：

```
var linepath = paper.path( pathstr ).attr( { stroke: 'black', fill: 'none', 'stroke-width': 2.0 } ).animate( { 'stroke-width': 10.0 }, 5000 ); 
```

除非我在您的请求中遗漏了某些内容，否则这真的很容易。

# vim - 是否可以在 Vim 中显示网格？

> ID：11844385
> 
> 赞同：4
> 
> 时间：2012-08-07T10:53:56.447
> 
> 标签：vim, vim-plugin

我在 Vim 7 中使用 DrawIt 插件来绘制一些 ASCII 图。

这可能太多了，但仍然——</p>

有没有插件可以在背景中显示网格，使绘图更容易？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T12:41:34.553

我无法在@David 和@romainl 的想法中添加任何内容（我认为@romainl 使用带有网格的半透明窗口的建议受到了启发！）。

但是，您可能会发现使用以下命令更容易可视化光标位置：

```
set cursorline
set cursorcolumn 
```

当然它不能代替真正的网格，但它至少会让你一眼就看到光标的对齐方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:10:11.123

让我提出一个使用 Vim 突出显示功能来模拟引导网格的实现。以下函数创建必要的突出显示，采用两个强制参数和另外两个可选参数。前两者分别是水平线和垂直线之间的距离。后面的参数是网格覆盖区域的高度和宽度（相应地以行和字符表示）。如果未指定这些参数，则使用缓冲区中的行数和最长行的长度。

```
function! ToggleGrid(...)
    if exists('b:grid_row_grp') || exists('b:grid_prev_cc')
        call matchdelete(b:grid_row_grp)
        let &colorcolumn = b:grid_prev_cc
        unlet b:grid_row_grp b:grid_prev_cc
        return
    endif

    let [dr, dc] = [a:1, a:2]
    if a:0 < 4
        let [i, nr, nc] = [1, line('$'), 0]
        while i <= nr
            let k = virtcol('$')
            let nc = nc < k ? k : nc
            let i += 1
        endwhile
    else
        let [nr, nc] = [a:3, a:4]
    endif
    let rows = range(dr, nr, dr)
    let cols = range(dc, nc, dc)

    let pat = '\V' . join(map(rows, '"\\%" . v:val . "l"'), '\|')
    let b:grid_row_grp = matchadd('ColorColumn', pat)
    let b:grid_prev_cc = &colorcolumn
    let &colorcolumn = join(cols, ',')
endfunction 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:25:42.547

我倾向于同意@romainl；我想不出任何方法可以在 Vim 中真正做到这一点，而不会弄乱源代码。但是，我可以想到一些解决方法。

1.  在许多终端仿真器中，您可以设置背景图像。（`xfce4-terminal`例如具有此功能）。您可以设计一个背景，其中每个单元格的尺寸对应于等宽字体占用的空间。

2.  Nate Kane 的[vim-indent-guide](https://github.com/nathanaelkane/vim-indent-guides)可能会有所帮助 - 它显示可用于对齐字符的垂直线。有关一些示例，请参阅[屏幕截图](https://github.com/nathanaelkane/vim-indent-guides#screenshots)页面。

3.  你可以滥用 Vim 的高亮来模拟各种网格。

# iphone - 如何让下一行在 iphone 中导出 csv 文件

> ID：11844386
> 
> 赞同：0
> 
> 时间：2012-08-07T10:53:58.203
> 
> 标签：iphone, objective-c

如果我在一行中有多个值并在 exporting 中显示，如何在行值中给出下一行`csv file`。

我想将文本添加为​​新行，这段代码做得很好，但是我在一行中有多个值，然后它不打印该行，它只打印另一行。如何解决这个问题缓冲区是字符串。

```
buffer  =  [buffer stringByAppendingFormat: @"\r\n%@", rowString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:58:07.400

"\n\n" 应该给你一个新行。

# powershell - 如何将脚本块作为启动作业中的参数之一传递

> ID：11844390
> 
> 赞同：20
> 
> 时间：2012-08-07T10:54:04.503
> 
> 标签：powershell

我正在尝试创建一个执行脚本块的后台作业。我需要将此脚本块作为参数传递，但我似乎无法使语法正常工作。脚本块正在沿途某处转换为字符串。

当我将脚本块传递给本地函数时它工作正常，但不是通过 start-job

以下语法有效：

```
function LocalFunction
{
    param (
        [parameter(Mandatory=$true)]
        [ScriptBlock]$ScriptBlock
    )

    &$ScriptBlock | % { echo "got $_" }
}

LocalFunction -ScriptBlock { echo "hello" } 
```

这会按预期输出“打招呼”。

但以下失败：

```
$job = start-job -argumentlist { echo "hello" } -scriptblock {
    param (
        [parameter(Mandatory=$true)]
        [ScriptBlock]$ScriptBlock
    )
    &$ScriptBlock | % { echo "got $_" }
}
start-sleep -s 1
receive-job $job 
```

它返回的错误是

```
Receive-Job : Cannot process argument transformation on parameter 'ScriptBlock'. Cannot convert the " echo "hello" " value of type "System.String" to type "System.Management.Automation.ScriptBlock". 
```

因此，如果我正确阅读错误，则 -argumentlist 似乎以某种方式将其参数强制转换为字符串。

任何 powershell 大师都知道如何使这种语法起作用吗？

提前致谢，

本

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T11:29:24.290

这是解决此问题的一种方法，将脚本块代码作为字符串传递，然后从作业中的字符串创建一个脚本块并执行它

```
Start-Job -ArgumentList "write-host hello"  -scriptblock {

    param (
        [parameter(Mandatory=$true)][string]$ScriptBlock
    )

    & ([scriptblock]::Create($ScriptBlock))

} | Wait-Job | Receive-Job 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-07T13:07:06.663

看起来这在今天有效。

```
function LocalFunction
{
    param
    (
        [scriptblock] $block
    )

    $block.Invoke() | % { "got $_" }
}

LocalFunction { "Hello"} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T18:12:13.230

根据我的实验，即使您传入脚本块，PowerShell 也会将 -ArgumentList（它是一个 Object[]）解析为字符串。以下代码：

```
$job = start-job -scriptblock { $args[0].GetType().FullName } -argumentlist { echo "hello" }
start-sleep -s 1
receive-job $job 
```

产生以下输出：

系统字符串

据我所知，这里唯一的解决方案是 Shay's，尽管您不需要将 -ArgumentList 作为字符串传递，因为在这种情况下，PowerShell 会将您的脚本块解析为字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T19:08:18.740

您必须将其作为字符串读入，然后将其转换为脚本块。

在 powershell v1 中，您可以这样做：

```
$ScriptBlock = $executioncontext.invokecommand.NewScriptBlock($string) 
```

在 powershell v2 中，您可以这样做：

```
$ScriptBlock = [scriptblock]::Create($string) 
```

所以你的代码看起来像这样：

```
function LocalFunction
{
    param (
        [parameter(Mandatory=$true)]
        $ScriptBlock
    )

    $sb = [scriptblock]::Create($ScriptBlock)

    $sb | % { echo "got $_" }
}

LocalFunction -ScriptBlock "echo 'hello'" 
```

'[scriptblock]::Create($ScriptBlock)' 将在字符串周围放置花括号，以便您创建脚本块。

在这里找到信息[http://get-powershell.com/post/2008/12/15/ConvertTo-ScriptBlock.aspx](http://get-powershell.com/post/2008/12/15/ConvertTo-ScriptBlock.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-14T16:04:32.093

因此，如果您希望插入内联脚本块，那么 Shay 的解决方案（如前所述）可能是最好的。另一方面，如果您只是想将脚本块作为参数传递，请考虑使用类型变量，`scriptblock`然后将其作为`-ScriptBlock`参数的值传递。

```
function LocalFunction
{
    param (
        [parameter(Mandatory=$true)]
        [ScriptBlock]$ScriptBlock
    )

    &$ScriptBlock | % { echo "got $_" }
}

[scriptblock]$sb = { echo "hello" }

LocalFunction -ScriptBlock $sb 
```

# php - 我们如何读取/侦听 linux 服务器中的 UDP 端口并将传入的数据保存到 MYSQL DB

> ID：11844391
> 
> 赞同：0
> 
> 时间：2012-08-07T10:54:05.837
> 
> 标签：php, udp

使用 PHP，我们如何读取/侦听 Linux 服务器中的 UDP 端口并将传入的数据保存到 MYSQL 数据库。是否可以将 PHP 文件设置为 cron/Daemon 来执行此任务。我们应该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:02:19.100

要使用 php 侦听 UDP，您可以使用[套接字](http://php.net/manual/en/function.socket-recvfrom.php)。有一个很好的例子可以开始。关于您的第二个问题，是的，您可以使用脚本的 cron 启动或 php 之类的[daemon](http://phpdaemon.net/)。

# c# - C#，MVC - 试图从控制台删除站点缓存

> ID：11844392
> 
> 赞同：0
> 
> 时间：2012-08-07T10:54:09.637
> 
> 标签：c#, asp.net-mvc, caching

我正在使用 HttpRuntime.Cache 缓存我网站的部分内容。在另一个进程（控制台）中，我试图通过调用位于我的站点中的删除缓存函数来删除一些缓存键。问题是控制台缓存和站点缓存之间似乎没有连接，因为站点缓存似乎没有被删除。我可能做错了。请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:59:36.457

它们在不同的进程中运行，并且`HttpRuntime`包含在正在运行的进程/上下文中。所以你的控制台应用程序正在清除`Cache`，但它是你的控制台进程的缓存，而不是 Web 应用程序的进程（它有一个单独的`HttpRuntime`）。

如果您希望您的控制台应用程序清除 Web 应用程序的缓存，您需要在您的 Web 应用程序上公开一个控制台应用程序可以调用的操作方法。在该操作方法中，您可以清除`HttpRuntime.Cache`.

*关于控制器的操作方法可能看起来像的一些伪代码：*

```
[HttpDelete]
public ActionResult ClearCache(){
  HttpRuntime.Cache.Clear();
} 
```

# database - cakephp下拉框数据未保存到数据库

> ID：11844397
> 
> 赞同：1
> 
> 时间：2012-08-07T10:54:21.777
> 
> 标签：database, cakephp

嗨，我的下拉框中的所有数据都没有正确保存到数据库中，它保存到外键`template_id`为`null`

这是功能

```
 function add(){

$this->Session->setFlash("Please create your required fields.");
$templates = $this->Template->find('all', array('fields' => array('Template.id' )));
$this->set('templates', $templates);

    if($this->request->is('post'))
    {

    $this->Field->create(); 

    if ($this->Field->save($this->request->data)) 
    {   
        if($this->request->data['submit'] == "type_1") 
            { 
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'fields','action' => 'add'));
            } 
            if($this->request->data['submit'] == "type_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 
 } 
  } 
```

这是视图

```
<?php

echo $this->Form->create('Field', array('action'=>'add'));

echo $this->Form->create('Field', array('action'=>'add'));
echo $this->Form->input('name', array('label'=>'Name: '));
echo $this->Form->input('description', array('label'=>'Description: '));
echo $this->Form->input('template_id',array('label'=>'Template ID: ', 'options' => $templates));
echo $this->Form->button('Continue adding fields', array('name' => 'submit', 'value' => 'type_1'));
echo $this->Form->button('Finish adding fields', array('name' => 'submit', 'value' => 'type_2'));
echo $this->Form->end();

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:28:10.410

对不起，这是漫长的一天，它正在保存更正信息。

# sql - SQL Server 变量 DB 作为存储过程参数

> ID：11844398
> 
> 赞同：1
> 
> 时间：2012-08-07T10:54:26.927
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个应用程序数据库（A-DB），它从一组数据库（B-set-DB，（大约 50 个 DB））导入。用户选择“B-set-DB”的 4 个 DB，他希望从这些 DB 中为他的应用程序导入 A-DB。

我为导入（大约 4000 行 SQL 代码）编写了一个存储过程，其中包含 4 个硬编码的 B-set-DB 数据库，它运行良好。

所以我的问题是如何使导入的数据库名称变量？

整个4000行我不能使用动态SQL，因为我调用函数和其他存储过程，有很多参数和字符串以及临时表的定义和sub的子查询的supqueries......还有很多其他奇怪的事情。（我知道这听起来很丑，但我只需要让它运行，我没有设计整个东西。）

也许可以在导入存储过程的第一行定义一个同义词：

```
ALTER PROCEDURE [dbo].[test_storedProcedure]  
(@DBName_1 nvarchar(512), @table_name_1 nvarchar(512))
AS
BEGIN
DECLARE @cmd nvarchar(max);
set @cmd = N'create synonym DB_SYN' + 
        N' for ' + 
        @DBName_1 + --[A70_V70_V280]
        @table_name_1 --.[dbo].[UNITCHANGEMAP]
exec sp_executesql @cmd
...
SELECT * INTO A-DB
FROM DB_SYN
...
END 
```

然后只使用同义词。

或者有没有人知道一种方法可以做到这一点？

顺便说一句，我使用的是 SQL Server 2008，所以我在 SQL Server 的对象资源管理器中看到了所有 50 个数据库。

# string - 使用字典修改列表 (Python)

> ID：11844405
> 
> 赞同：0
> 
> 时间：2012-08-07T10:55:05.793
> 
> 标签：string, list, dictionary, int, negative-number

我有以下内容：

```
list = [['1234-4321-1',[5, 6, -4, 11, 22]], ['8763-1234-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]]] 
```

.

```
reversed__dict = {'8763-1234-1'} 
```

我想编写一个循环遍历列表，当它检测到 reversed_dict 中保存的反向值以永久重新排列字符串（更改为 '1234-8763-1' 即交换前两个段）并将其对应的 int 值乘以 - 1.

我尝试了以下方法：

```
for i, x in list:
    if i in ordered_dict:
        p = (x * -1)
return list[p] 
```

但我只是不断收到'return'和语法错误，这也不会尝试重新排列'8763-1234-1'

期望的最终结果是：

```
 >>list
    >>[['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-8763-1', [-43, 5, 0, 0, 1]], ['1234-5376-1', [3, 0, -5, -6, 0]]] 
```

帮助很大，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:20:06.507

```
for val in lst:
    num = val[0]
    if num in reversed_set:
        parts = num.split('-')
        val[0] = '-'.join([parts[1], parts[0], parts[2]])

>> lst
[['1234-4321-1', [5, 6, -4, 11, 22]], ['1234-8763-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]]] 
```

顺便说一句，{'8763-1234-1'} 不是一个字典，它是一个集合。使用“list”作为变量名也不是一个好主意。

另外，你试图通过将列表乘以 -1 来实现什么？

# django - Nginx + uWSGI 基本配置

> ID：11844409
> 
> 赞同：0
> 
> 时间：2012-08-07T10:55:19.183
> 
> 标签：django, ubuntu, nginx, uwsgi

我对两者都是新手，我必须使用 Emperor 运行 2 个 Django 框架应用程序（只显示“它有效！”页面），但我想在*没有*Emperor 的情况下尝试它。（为了更好地理解它是如何工作的）

我的 nginx.conf：

```
# snipped...
server { 
  listen 92; 
  server_name example.com; 
  access_log /home/john/www/example.com/logs/access.log; 
  error_log /home/john/www/example.com/logs/error.log; 

  location / { 
    include uwsgi_params; 
    uwsgi_pass 127.0.0.1:8001; 
  } 
}
# snipped... 
```

我通过以下方式启动 uWSGI：

```
$ uwsgi --ini /home/john/www/example.com/uwsgi.ini 
```

uwsgi.ini 是：

```
[uwsgi]
http = :8001
chdir = /home/john/www/example.com/example
module = example.wsgi
master = True
home = /home/john/Envs/example.com 
```

一旦 uwsgi 和 nginx 运行，我可以访问`localhost:8001`，但不能访问`localhost:92`.

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:54:08.523

您正在告诉 uwsgi 进程使用 http 协议为应用程序提供服务。此功能主要是为了方便开发人员。你应该告诉它使用 uwsgi 协议：

```
[uwsgi]
protocol = uwsgi
socket = 127.0.0.1:8001
chdir = /home/john/www/example.com/example
module = example.wsgi
master = True
home = /home/john/Envs/example.com 
```

# html - 如何锐化css3中的文本？

> ID：11844413
> 
> 赞同：0
> 
> 时间：2012-08-07T10:55:47.127
> 
> 标签：html, css, photoshop

> **可能重复：**
> [CSS 中是否有任何尖锐的样式？](https://stackoverflow.com/questions/5003816/is-there-any-sharp-style-in-css)

有没有办法在 css3 中做文本清晰样式？在我的设计中，文字很清晰！但是当我将它编码为 HTML/CSS 时，并没有得到确切的样式。反正有没有在css3中赋予文本清晰的风格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:13:52.037

您可以使用一种技术（或两种技术）为 webkit 浏览器中的某些字体提供一点“额外”的清晰度。Chris Coyer 有一篇文章[在这里](http://css-tricks.com/beefing-up-dull-text-in-webkit/)

# c# - 上传文件的路径

> ID：11844414
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:55:48.140
> 
> 标签：c#, sql

我已将文件上传到名为 quiz 的文件夹并使用

```
 server_filepath = Server.MapPath(folderName) + "\\" + fileName;
        fileUpload.PostedFile.SaveAs(server_filepath);
cmd.CommandText = "Insert Into quiz(description) Values('" + server_filepath +  "')"; 
```

并将上传文件的链接保存到数据库。

该链接在另一个页面中显示为。

```
<asp:BulletedList ID="BulletedList1" runat="server" DisplayMode="HyperLink" 
            DataSourceID="SqlDataSource1" DataTextField="description" 
            DataValueField="id">
        </asp:BulletedList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:chaaapaConnectionString4 %>" 
            SelectCommand="SELECT * FROM [quiz]"></asp:SqlDataSource> 
```

但是当点击链接时会发生错误，即**找不到资源。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:06:11.070

您正在将绝对路径 (C:\inetpub\wwwroot\yoursite\quiz\filename.pdf) 保存到数据库。

尝试将 Path.Combine(folderName, fileName) 保存到数据库，并将其用作超链接。

# php - 将 curl 与 Google 计算器一起使用总是返回 0

> ID：11844422
> 
> 赞同：2
> 
> 时间：2012-08-07T10:56:10.043
> 
> 标签：php, curl, google-api

我正在尝试将 curl 与谷歌计算器一起使用以从该网址获取货币换算：[http](http://www.google.com/ig/calculator?hl=en&q=100RUB=?EUR) ://www.google.com/ig/calculator?hl=en&q=100RUB=?EUR 。但是下面的代码总是返回 0：

```
<?php

function currency($from_Currency, $to_Currency, $amount) {
    $amount = urlencode($amount);
    $from_Currency = urlencode($from_Currency);
    $to_Currency = urlencode($to_Currency);
    //www.google.com/ig/calculator?hl=en&q=1USD=?EUR
    $url = 'http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency';
    $ch = curl_init();
    $timeout = 0;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)');
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $rawdata = curl_exec($ch);
    curl_close($ch);
    $data = explode('"', $rawdata);
    $data = explode(',', $data['3']);
    $var = $data['0'];

    return round($var, 2);                  

}
echo currency("USD", "EUR", 1);
?> 
```

任何人都可以建议这里有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:01:46.033

[使用单引号将意味着变量不会扩展](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)。请改用双引号，或将字符串连接成多个部分。

```
$url = "http://www.google.com/ig/calculator?hl=en&q=$amount$from_Currency=?$to_Currency";
//or
$url = 'http://www.google.com/ig/calculator?hl=en&q=' . $amount . $from_Currency . '=?' . $to_Currency; 
```

# google-apps-script - 复制电子表格时，触发不获取副本

> ID：11844426
> 
> 赞同：1
> 
> 时间：2012-08-07T10:56:21.993
> 
> 标签：google-apps-script

我有一个包含脚本和基于时间的触发器的电子表格，当我使用 DocsList 制作副本时，触发器没有得到副本，有没有办法实现这一点？

# asp.net - 通过位于另一台服务器上的另一个应用程序保护 asp.net 网站

> ID：11844427
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:56:23.887
> 
> 标签：asp.net, .net, asp.net-mvc, security, license-key

我已经分发了 asp.net 网站。此应用程序安装在客户服务器上。我想许可此应用程序，如果许可期限已过以阻止客户应用程序。需要一种方法来保护许可申请不受另一台服务器的影响。例如，在 web-config 中包含使用另一台服务器上的应用程序的加密数据，这将授予在分发服务器上运行应用程序的权限。如果服务器重新启动，可能会通过传递一些 masterKey 数据来初始化应用程序。有一些想法或做法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:18:41.483

您可以将密钥与应用程序一起存储在文件中。如果文件丢失或密钥无效，则不要让应用程序在服务器上运行。

密钥可以包含日期和服务器 s/n 以确保密钥仅在有限的时间内有效，而 s/n 可以确保文件不会复制到另一个服务器。

通过 TCP 询问另一台服务器对我来说是不好的做法，因为您的所有客户都将依赖于您的服务器 100% 在线。

# asp.net - 使用 SmtpClient 发送邮件

> ID：11844428
> 
> 赞同：3
> 
> 时间：2012-08-07T10:56:24.363
> 
> 标签：asp.net, .net, asp.net-mvc, sendmail

这是我第一次编写发送邮件的程序。我不知道在 SMTP 客户端构造函数中放入什么：

```
SmtpClient client = new SmtpClient(????); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T11:03:16.500

始终查阅文档。SmptClient具有三个构造函数[。](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

```
SmtpClient()
SmtpClient(String)
SmtpClient(String, Int32) 
```

如果您选择最后一个，那么对于 gmail，您的代码将如下所示：

```
SmtpClient client = new SmtpClient("smtp.gmail.com", 587); 
```

您也可以使用第**一个**构造函数并设置属性。

```
SmtpClient smtp = new SmtpClient();
smtp.Port = 587; 
smtp.EnableSsl = true;
smtp.Credentials = new NetworkCredential("<email_from>",  "password");
smtp.Host = "smtp.gmail.com"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:00:28.110

这是您的`host`和可选的`port`。

例如：

```
SmtpClient client = new SmtpClient("mail.domain.com", 123); 
```

有关更多信息，您应该阅读此类的 MSDN 文档：

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T12:03:55.537

您可以按照其他人的建议在代码中指定 SMTP 主机和端口。

但是如果你总是使用相同的主机和端口，使用默认构造函数可能更容易和更灵活，并在[应用程序配置文件](http://msdn.microsoft.com/en-us/library/ms164240.aspx)[的](http://msdn.microsoft.com/en-us/library/ms164240.aspx)`SmtpClient`元素中指定主机和端口：[`<smtp>`](http://msdn.microsoft.com/en-us/library/ms164240.aspx)

```
using(var smtpClient = new SmtpClient())
{
    ...
}

<system.net>
    <mailSettings>
        <smtp deliveryMethod="network" from="ben@contoso.com">
            <network 
                 host="localhost"
                 port="25"
                 defaultCredentials="true"
            />
        </smtp>
    </mailSettings>
<system.net> 
```

这样做的一个优点是您可以在开发/测试环境中使用不同的配置，例如下面的配置，这将避免在不更改任何代码的情况下向系统的邮件收件人发送不需要的邮件。

```
<smtp deliveryMethod="SpecifiedPickupDirectory" from="ben@contoso.com">
  <network host="localhost"/>
  <specifiedPickupDirectory pickupDirectoryLocation="C:\temp\mail\"/>
</smtp> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:04:13.443

```
public SmtpClient(
    string host,
    int port
) 
```

基本上你需要传递***主机名***和***端口号***

请阅读有关[SmtpClient 构造函数的更多信息](http://msdn.microsoft.com/en-us/library/67w4as51.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-17T16:55:16.607

这有点离题，但支持与通过 SMTP 进行现代电子邮件传递相关的最佳实践方法......

我建议始终使用支持 TLS over SSL 的服务，因为它提供更安全的传输。

如果您不熟悉 TLS，@gideon 提供了一个使用 TLS 和 GMail 的示例，这里有一篇支持这种方法的文章：[C# ASP.NET Send Email via TLS](https://stackoverflow.com/questions/2057227/c-sharp-asp-net-send-email-via-tls)

# javascript - window.location.replace(href) 后后退按钮失败；

> ID：11844430
> 
> 赞同：19
> 
> 时间：2012-08-07T10:56:28.003
> 
> 标签：javascript, jquery, firefox, google-chrome, opera

我做了一个简单的函数，它使所有容器的行为都像链接（“a”元素）。

```
function allHot(element){
$(element)
.click(
    function(){
    var href = $(this).find('a').attr('href');
    window.location.replace(href);
})

.hover(
    function(){
    $(this).css({'text-shadow' : '0px 1px 0px #D6D6D6'});
    },
    function(){
    $(this).css({'text-shadow' : 'none'});
    }

);
} 
```

功能很好用。用户可以单击容器上的任何位置并正确重定向，而不是单击“更多”按钮。

但是，如果用户在重定向后单击返回按钮，浏览器会返回两步而不是应有的一步。更奇怪的是，历史看起来还不错。

简单的方案更好地描述：

> 第1页->第2页
> 
> Page2 [用户点击“allHot”容器] -> allHot 重定向到 Page3
> 
> Page3 [用户点击浏览器返回按钮] -> Page1

这是我现在正在开发的网站的主要错误。我真的没有办法阻止它。在 Firefox、Chrome 和 Opera 上测试的错误。

也在 Opera“无 javascript 模式”上进行了测试。如果 javascript 被禁用，则不会发生问题。

在此先感谢您提供任何线索或解决方案。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-07T10:58:43.463

而不是使用`replace`，请使用以下内容：

```
window.location.href = '' 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-05T23:33:22.147

添加到MarcoK的答案。

使用时，`replace`您正在替换历史状态，因此您不会再向历史推送一个状态。

如果您有以下情况：

`Page1`至`State1`

`Page2`至`State2`

然后你使用 replace 你将替换`Page3`为`State2`.

当您按下后退按钮时，您将从`State2`to转到`State1`，这就是您要去的原因`Page1`。

使用时，`window.location.href`您将添加一个状态，因此`Page3`将设置为`State3`，当您单击后退按钮时，您将转到`State2`具有`Page2`URL 的状态。

# php - 网络上线时魔法常数不起作用（PHP）

> ID：11844431
> 
> 赞同：0
> 
> 时间：2012-08-07T10:56:30.160
> 
> 标签：php, path

**< 参考[使路径在 PHP 的各个级别的文件夹中可访问](https://stackoverflow.com/questions/11840317/make-path-accessible-at-various-level-of-folder-on-php)>**

下面的代码：

```
require_once __DIR__ . '/../FolderB2/PageB21.php'; 
```

这在本地有效，但在我将页面上传到服务器时无效。我的托管公司是否限制对此的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:03:46.027

如果你运行这段代码，你会得到你期望的确切路径吗？

```
echo dirname(__FILE__) . '/../FolderB2/PageB21.php'; 
```

可能是相对路径错误，或者大小写有误（即，如果您的本地计算机是 Windows，路径不区分大小写，但它们会在 Linux 服务器上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:18:02.643

也许您可以使用 $_SERVER['DOCUMENT_ROOT'] 。'/path/to/file.php' 如果您的主机运行的 PHP 低于 5.3

# tinymce - TinyMCE 执行 HTML 标签 - 如何阻止它？

> ID：11844433
> 
> 赞同：1
> 
> 时间：2012-08-07T10:56:41.780
> 
> 标签：tinymce, textarea, html

我正在尝试在 TinyMCE 编辑器中包含简单的代码示例。当我编写它并保存在 MySQL 数据库中时，它看起来很好。但是当再次在 TinyMCE 编辑器中加载它时，HTML 标记似乎被执行，即使它们被保存为 HTML 名称而不是实际标记。

例如，如果我写

```
&lt;b&gt;test&lt;/b&gt; 
```

在数据库中，这正是存储的内容，但是当在 TinyMCE 编辑器中加载它时，它现在看起来像

```
<b>test</b> 
```

如果再次保存并加载它，它会变成

> **测试**

所以看起来 TinyMCE 正在执行标签，即使它们不是真正的标签。有谁知道为什么会这样？

我试图在代码周围添加前标记和代码标记，但 TinyMCE 似乎忽略了它。我也尝试添加

```
preformatted : true,
verify_html : false, 
```

到 TinyMCE 初始化函数。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:46:03.827

从[v3 文档](https://www.tiny.cloud/docs-3x/reference/Configuration3x/Configuration3x@cleanup/)：

> **在 3.4 中移除**
> 
> 此选项启用或禁用内置清理功能。TinyMCE 配备了强大的清理功能，使您能够指定允许的元素和属性以及应该如何生成 HTML 内容。此选项默认设置为 true，但如果您想禁用它，可以将其设置为 false。
> 
> 注意：不建议禁用此功能。
> 
> 值得一提的是，浏览器通常会混淆 HTML。清理不仅修复了浏览器解析的 HTML 文档的几个问题，如路径等，它还确保它是正确的 XHTML 文档，所有标签都已关闭，“在正确的位置，等等。
> 
> 清理选项的使用示例：
> 
> ```
> tinyMCE.init({
>         cleanup : true
> }); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:04:15.580

我发现这不是 TinyMCE 问题，这就是 textareas 的工作方式。我使用了 PHP 函数 htmlspecialchars()，现在一切都按预期工作。

```
<textarea><?=htmlspecialchars($content)?></textarea> 
```

# php - DOMPDF：间距和边距与 HTML 页面不匹配

> ID：11844441
> 
> 赞同：0
> 
> 时间：2012-08-07T10:57:15.223
> 
> 标签：php, dompdf

我有这个[HTML 页面](http://www.frakorn.it/riep.htm)和这个由 PHP 脚本使用 DOMPDF 生成的[PDF 页面。](http://www.frakorn.it/riep.pdf)

如您所见，边距和间距不一样。

有什么建议可以制作正确的页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:29:32.190

这对我有用：

```
<style>
@page { margin: 0px 0px; }
</style> 
```

# spring - Spring 安全性：Autowired userDetailsS ervice

> ID：11844446
> 
> 赞同：0
> 
> 时间：2012-08-07T10:57:35.957
> 
> 标签：spring, spring-mvc, spring-security

我试图实现基于弹簧安全的自定义授权。这是config.xml：

```
<global-method-security pre-post-annotations="enabled" />
    <http use-expressions="true">
        <form-login login-page="/wellcome/" login-processing-url="/login" default-target-url="/" 
            username-parameter="email" password-parameter="password" />
        <remember-me key="skyhandling" token-validity-seconds="-1" />
        <logout invalidate-session="true" logout-success-url="/" logout-url="/logout"/>
        <intercept-url pattern="/administration/**" access="authenticated"/>
        <intercept-url pattern="/wellcome/" access="permitAll"/>
        <intercept-url pattern="/login" access="permitAll"/>
        <intercept-url pattern="/css/**" access="permitAll"/>
        <intercept-url pattern="/images/**" access="permitAll"/>
        <intercept-url pattern="/javascript/**" access="permitAll"/>
    </http>
    <beans:bean id="authenticationProvider"
        class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <beans:property name="userDetailsService" ref="userDetailsService"/>
    </beans:bean>
    <beans:bean id="authenticationManager"
        class="org.springframework.security.authentication.ProviderManager">
        <beans:property name="providers">
            <beans:list>
                <beans:ref local="authenticationProvider" />
            </beans:list>
        </beans:property>
    </beans:bean>
    <beans:bean class="com.test.service.UserDetailsExtendedService" id="userDetailsService" />
    <beans:bean class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" 
        id="passwordEncoder" />
    <authentication-manager>
        <authentication-provider user-service-ref="userDetailsService">
            <password-encoder ref="passwordEncoder" />
        </authentication-provider>
    </authentication-manager> 
```

用户详情服务：

```
@Service("userDetailsService")
@SuppressWarnings("deprecation")
public class UserDetailsExtendedService implements UserDetailsService {
    @Autowired
    private UsersDAO dao;

    /**
     * 
     * @param user
     * @return
     */
    private User prepare(com.test.User user) {
        boolean enabled = user.getState().equals(UserState.Active);

        Collection<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
        for (UserRole r: user.getRoles()) {
          authorities.add(new GrantedAuthorityImpl(r.getName()));
        }

        return new UserDetailsExtended(user.getEmail(), user.getPassword(), user.getNickname(), enabled,
            enabled, enabled, enabled, authorities);
    }

    /**
     * 
     * @param email
     * @return
     */
    @Transactional(readOnly = true)
    public User loadUserByUsername(final String email) 
            throws UsernameNotFoundException, DataAccessException {
        com.test.User user = dao.getByEmail(email);
        if (user == null)
            throw new UsernameNotFoundException(email);

        return prepare(user);
    }
} 
```

一切正常。但是当我添加

```
@Autowired 
private UserDetailsExtendedService useDetailsService; 
```

进入控制器类，应用程序开始失败：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.test.service.UserDetailsExtendedService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

我错过了什么？谢谢

更新#1：

```
 <context:annotation-config />
    <context:component-scan base-package="com.test.service" />
    <bean id="usersDao" class="com.test.dao.UsersDAO" />
    <bean id="eventsLogDao" class="com.test.dao.EventsLogDAO" />
    <bean id="employeesDao" class="com.test.dao.EmployeesDAO" />
    <bean id="dictionariesDao" class="com.test.dao.DictionariesDAO" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:20:45.137

在您的配置中，您有一个`com.ejl.skyhandling.service.UserDetailsExtendedService`但在您的 bean 中您试图访问`com.test.service.UserDetailsExtendedService`这显然是另一种类型。

请检查您的进口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:35:11.480

由于您使用值“userDetailsS​​ervice”来限定@Service，请确保@Autowired 是

```
@Autowired
private UserDetailsExtendedService userDetailsService; 
```

您目前在变量名中缺少 r -> useDetailsS​​ervice

# jquery - 在类中选择特定元素

> ID：11844447
> 
> 赞同：1
> 
> 时间：2012-08-07T10:57:36.863
> 
> 标签：jquery, jquery-selectors

我是 jQuery 的初学者，我正在努力解决这个问题：

所以我有类似的东西：

```
<div class="app">
<div class="app-text"></div>
</div>

<div class="app">
<div class="app-text"></div>
</div> 
```

我想使用 jquery 来更改 .app-text 的颜色，但是当使用 .app-text 时，它也会更改另一个 div 中的 app-text（显然）所以我将如何只更改 .app-text在悬停的 .app div 中。悬停在 .app div 上时需要触发该事件。

（同一页面上会有相当多的 .app div）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:01:02.950

您可以使用`$(selector, context)`：

```
$('.app').hover(function(){
   $('.app-text', this).foo()
  }, function(){
   $('.app-text', this).bar()
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:00:01.047

```
$('.app').hover(function() {
    var text = $(this).find('.app-text');
    ...
}); 
```

或者，在 CSS3 兼容的浏览器中：

```
.app:hover .app-text {
    color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:59:21.060

您可以使用 访问悬停元素`this`。

尝试这样的事情：

```
$('.app').hover(function(){ //function on hover-in
                  $('.app-text', this).css('color', 'red');
               }, 
               function(){ //function on hover-out
                  $('.app-text', this).css('color', 'black');
               }); 
```

# javascript - jquery binding to select changes

> ID：11844451
> 
> 赞同：0
> 
> 时间：2012-08-07T10:57:54.870
> 
> 标签：javascript, jquery

I have a hidden select which should be automatically selected via a visible select, my jquery is:

```
$(document).ready(function() {

    var selected_val = $('#id_foo option:selected').val();
    $('#id_bar').val(selected_val);

    $("#id_foo").change(function() {
        selected_val = $(this).attr('value');
        $('#id_bar').val(selected_val);
    });

}); 
```

This works fine, but the page I am working on has the option to add a value to the (visible) select on the fly. How do I bind to this event and add this to the hidden list before updating the selected value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:10:07.613

解决此问题的最佳方法是在更新可见选择时使用新值更新隐藏选择。

或者，根据我的评论，您可以在`select`更改可见项时填充隐藏项：

```
$("#id_foo").change(function() {
    selected_val = $(this).attr('value');

    //clear and re-populate all of hidden select here
    $('#id_bar').val(selected_val);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:55:17.460

此代码段正确识别事件并成功地将选择选项从 foo 复制到 bar。但是，它似乎没有`:selected`正确设置，`id_foo`或者`id_bar`使用 DOMSubtreeModified 感觉很hackish

```
$('#id_foo').bind("DOMSubtreeModified", function(){
    var high = 0;
    $('#id_foo').children().each(
        function(){
            if ($(this).val() > high) {
                high = $(this).val();
            }
        }
    );
    $('#id_foo').val(high);
    var new_options = $('#id_foo').clone();
    $('#id_bar').html('');
    $('#id_bar').append(new_options.children());
}); 
```

所以，现在我能想到的最好的：

```
$('#id_foo').bind("DOMSubtreeModified", function(){
    location.reload();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:33:23.713

这应该可以解决问题：

```
$(function () {
    var $bar = $('#id_bar');
    var $foo = $('#id_foo');

    $bar.val($foo.val());

    $foo.change(function () {
        var newValue = $(this).val();
        if ($bar.find('[value="' + newValue + '"]').length === 0) {
            $bar.append($('<option/>').val(newValue));
        }
        $bar.val(newValue);
    });
}); 
```

在设置新值之前，检查该值是否是一个选项。如果不是，请添加为选项。

# opengl - 在 cocos2d 的模态层上使用 glScissor

> ID：11844459
> 
> 赞同：1
> 
> 时间：2012-08-07T10:58:31.260
> 
> 标签：opengl, cocos2d-iphone, modal-dialog, cclayer, ccscrolllayer

我正在 cocos2d 中编写一个模态层，我想使用 OpenGL `glScissor`API 调用来裁剪`CCScrollLayer`我正在使用的 a 的内部，

基本上，

1.  呈现某种模态精灵
2.  将带有资产的 CCScrollLayer 放在模态精灵上
3.  我想裁剪 CCScrollLayer 使其不会溢出精灵。

看起来很简单。

我遇到的问题是该`visit`功能似乎永远不会被击中，因此`glScissor`永远不会被实现。

我不确定我做错了什么。

我做模态的方式是使用块来处理是和否条件/状态。

```
// This appears in my "Pick City scene"
-(id) init
{

    if ((self = [super init])) 
    {
        NSLog(@"City list");

        for (City *cityObj in listOfCities) 
        {
            citySpriteOff = [CCSprite spriteWithSpriteFrameName:@"city.png"];
            citySpriteOn = [CCSprite spriteWithSpriteFrameName:@"city_on.png"];

            int x = [cityObj.x intValue];
            int y = [cityObj.y intValue];

            CCMenuItemSprite *mapMenuItem = [CCMenuItemSprite itemFromNormalSprite:citySpriteOff selectedSprite:citySpriteOn target:self selector:@selector(btnCity:)];
            [mapMenuItem setTag:i];
            [mapMenuItem setIsRelativeAnchorPoint:YES];
            [mapMenuItem setAnchorPoint:CGPointMake(0, 0)];
            [mapMenuItem setPosition:CGPointMake(x, y)];
            [mapMenuItem setIsEnabled:YES];

            [mapMenu addChild:mapMenuItem];
            i++;
        } // next

        [self addChild:mapMenu z:2];
    }
}

-(void) btnCity:(id)sender
{
    NSLog(@"clicked a city button");
    int tag = [sender tag];

    City *cityObj = [listOfCities objectAtIndex:tag];
    NSLog(@"You clicked on city: %@", cityObj.name);

    [self lockLayers];

    CCLayer *layer = [CCLayer node];
    [self addChild:layer z:100];

    [MapModalLayer ConfirmCity:cityObj onLayer:layer yesBlock:^{[self btnConfirmedCity:cityObj];} noBlock:^{[self unlockLayers];}];

}

-(void) btnConfirmedCity:(City *)cityObj
{
    NSLog(@"confirmed city: %@", cityObj.name);
}

#pragma mark - Lock/Unlock layers

-(void) lockLayers
{
    [self MenuStatus:NO Node:self];   
}

-(void) unlockLayers
{
    [self MenuStatus:YES Node:self];
}

// Disabled/Enable layers
-(void) MenuStatus:(BOOL)_enable Node:(id)_node
{
    for (id result in ((CCNode *)_node).children) {
        if ([result isKindOfClass:[CCMenu class]]) {
            for (id result1 in ((CCMenu *)result).children) {
                if ([result1 isKindOfClass:[CCMenuItem class]]) {
                    ((CCMenuItem *)result1).isEnabled = _enable;
                }
            }
        }
        else
            [self MenuStatus:_enable Node:result];
    } // next
} 
```

实际的模态代码出现在这里，

```
@implementation MapModalLayer

- (id)init {
    self = [super init];
    if (self) {
        // This method never seems to be called
        NSLog(@"MapModalLayer init");
    }
    return self;
}

// This method never seems to be called
- (void) visit {
    NSLog(@"Visit");
    if (!self.visible)
        return;

    glPushMatrix(); 
    glEnable(GL_SCISSOR_TEST);  
    glScissor(50, 50, 100 , 150);

    [super visit];

    glDisable(GL_SCISSOR_TEST);
    glPopMatrix();
}

+ (void) CloseAlert: (CCSprite*) alertDialog onCoverLayer: (CCLayer*) coverLayer executingBlock: (void(^)())block {
    // shrink dialog box
    [alertDialog runAction:[CCScaleTo actionWithDuration:kAnimationTime scale:0]];

    // in parallel, fadeout and remove cover layer and execute block 
    // (note: you can't use CCFadeOut since we don't start at opacity 1!)
    [coverLayer runAction:[CCSequence actions:
                           [CCFadeTo actionWithDuration:0.2f opacity:0], 
                           [CCCallBlock actionWithBlock:^{
                                [coverLayer removeFromParentAndCleanup:YES];
                                if (block) block();
                            }],
                           nil]];
}

+(void) ConfirmCity:(City *)cityObj onLayer:(CCLayer *)layer yesBlock :(void (^)())yesBlock noBlock:(void (^)())noBlock
{

    CCLayerColor *coverLayer = [CoverLayer new];
    [layer addChild:coverLayer z:INT_MAX]; // put to the very top to block application touches
    [coverLayer runAction:[CCFadeTo actionWithDuration:kAnimationTime opacity:80]]; // smooth fade-in to dim with semi-transparency

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite *dialog = [CCSprite spriteWithSpriteFrameName:@"modal.png"];
    [dialog setPosition:CGPointMake(winSize.width/2,winSize.height/2)];
    [dialog setTag:kDialogTag]; 

    //
    // We put our CCScrollLayer *scroller  content here... it doesn't matter what it is right now
    //

    //
    // Finally we put our accept/reject buttons
    //

    // Tick/Cross buttons    
    CCSprite *closeButtonOn = [CCSprite spriteWithSpriteFrameName:@"btn_close.png"];
    CCSprite *tickButtonOn  = [CCSprite spriteWithSpriteFrameName:@"btn_accept.png"];

    // add one or two buttons, as needed 
    CCMenuItemSprite *opt1Button = [CCMenuItemSprite itemFromNormalSprite:closeButtonOn
                                                           selectedSprite:nil
                                                                    block:^(id sender){ 
                                                                        // close alert and call opt1block when first button is pressed
                                                                        [self CloseAlert:dialog onCoverLayer: coverLayer executingBlock:noBlock];
                                                                    } ];

    [opt1Button setPosition:CGPointMake(-200, -120)];

    // create second button, if requested
    CCMenuItemSprite *opt2Button = [CCMenuItemSprite itemFromNormalSprite:tickButtonOn
                                             selectedSprite:nil
                                                      block:^(id sender){ 
                                                          // close alert and call opt2block when second button is pressed
                                                          [self CloseAlert:dialog onCoverLayer: coverLayer executingBlock:yesBlock];
                                                      } ];

    [opt2Button setPosition:CGPointMake(40, -120)];

    CCMenu *menu = [CCMenu menuWithItems:opt1Button, opt2Button, nil];
    [menu setContentSize:dialog.contentSize];
    [dialog addChild:menu z:2];

    [coverLayer addChild:dialog];

}  

@end 
```

我认为这是因为我只使用 MapModalLayer 的私有方法。

但我不确定。

有没有办法让我`glScissor`像上面解释的那样在模态中使用？

我已经尝试将`glScissor`代码移动到模式的显示，但它似乎从来没有做任何事情。

为了确认它工作正常，我将`glScissor`代码移到了父级，它似乎工作正常。

因此，我如何使模态层使用/工作`glScissor`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:01:55.433

我已经解决了这个问题。

我使用了来自[http://pastebin.com/tWsEbxvJ的视口](http://pastebin.com/tWsEbxvJ)

我这样做的方式是：

```
 CoverLayer *coverLayer = [CoverLayer new];
    [layer addChild:coverLayer z:INT_MAX]; // put to the very top to block application touches
    [coverLayer runAction:[CCFadeTo actionWithDuration:kAnimationTime opacity:80]]; // smooth fade-in to dim with semi-transparency

    // ------------------------------

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite *dialog = [CCSprite spriteWithSpriteFrameName:@"modal.png"];
    [dialog setPosition:CGPointMake(winSize.width/2,winSize.height/2)];
    [dialog setTag:kDialogTag]; 

.. // Build your pagesArray here for ScrollLayer...

    // Now create the scroller and pass-in the pages (set widthOffset to 0 for fullscreen pages)
    CCScrollLayer *scroller = [[CCScrollLayer alloc] initWithLayers:pagesArray widthOffset: 350];
    [scroller setShowPagesIndicator:NO]; 

    // finally add the scroller to your scene
    //[dialog addChild:scroller];

    Viewport *cn = [[Viewport alloc] initWithRect:CGRectMake(3, 0, dialog.contentSize.width-12, dialog.contentSize.height-5)];
    [cn addChild:scroller];

    [scroller release];

    [coverLayer addChild:dialog z:1]; 
```

这允许我在层上放置一个模态，放置一个 CCScrollLayer 并确保内容不会溢出我制作的模态精灵的内部（这就是为什么宽度配置看起来有点奇怪）。

谢谢。

# linq - NHibernate (3.3.1) LINQ - 每个对象多次调用 Select()

> ID：11844464
> 
> 赞同：2
> 
> 时间：2012-08-07T10:58:42.970
> 
> 标签：linq, nhibernate

我编写了一个简化为以下内容的 LINQ 扩展方法：

```
public static class NHibernateSelectWithoutProxies
{
    public static IQueryable<T> SelectWithoutProxies<T>(this IQueryable<T> query) where T : new()
    {
        return query.Select<T, T>(x => Transform<T>(x));            
    }

    private static T Transform<T>(T source) where T : new()
    {
        return source;  // Simplified                                           
    }
} 
```

从数据库中选择了 2 条记录。但是，“Transform(source)”被调用了 3 次，其中 2 次在同一个“源”上。

（注意：执行查询并调用 ToList() 后，列表包含 2 条记录。NHibernate LINQ 似乎忽略了 Select 返回的非唯一对象）。

此行为仅在查询具有 Fetch 时发生，例如：

```
var groups = repository.Get()
                       .FetchMany(x => x.Members)
                       .Where(...)
                       .SelectWithoutProxies()
                       .ToList<ContactGroup>(); 
```

将导致 groups.Count == 2 和对 Transform 的**三个**调用。

然而：

```
var groups = repository.Get()
                       .Where(...)
                       .SelectWithoutProxies()
                       .ToList<ContactGroup>(); 
```

将导致 groups.Count == 2 和对 Transform 的**两次**调用。

在我看来，这是错误，但我可能会遗漏一些东西。这是预期的行为吗？

# bluetooth - 创建\编辑蓝牙 SDP 记录

> ID：11844466
> 
> 赞同：0
> 
> 时间：2012-08-07T10:58:49.623
> 
> 标签：bluetooth, sdp

有人知道任何（免费）工具可以帮助创建/编辑蓝牙的 SDP（服务发现）记录吗？

首选基于 Windows 的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:47:00.153

You can use my [32feet.NET](http://32feet.codeplex.com/) library. There's no UI for this but there's library code which could be easily used for this. Use class ServiceRecordBuilder. Some docs at [Creating Records](http://32feet.codeplex.com/wikipage?title=Creating%20Records). For example:

```
ServiceRecordBuilder bldr = new ServiceRecordBuilder();
bldr.AddServiceClass(BluetoothService.SerialPort);
bldr.ServiceName = "Alan's SPP service";
bldr.AddBluetoothProfileDescriptor(BluetoothService.AVRemoteControl, 1, 0);
bldr.AddCustomAttribute(new ServiceAttribute(0x8001,
    ServiceElement.CreateNumericalServiceElement(ElementType.UInt16, 0xFEDC)));
//
ServiceRecord record = bldr.ServiceRecord;
//
var txt = ServiceRecordUtilities.Dump(record);
Console.WriteLine(txt);
//
var byteArr = record.ToByteArray();
var txtBA = BitConverter.ToString(byteArr);
Console.WriteLine(txtBA); 
```

Output is:

```
ElementSequence
    ElementSequence
        Uuid16: 0x100 -- L2CapProtocol
    ElementSequence
        Uuid16: 0x3 -- RFCommProtocol
        UInt8: 0x0
( ( L2Cap ), ( Rfcomm, ChannelNumber=0 ) )

AttrId: 0x0006 -- LanguageBaseAttributeIdList
ElementSequence
    UInt16: 0x656E
    UInt16: 0x6A
    UInt16: 0x100

AttrId: 0x0009 -- BluetoothProfileDescriptorList
ElementSequence
    ElementSequence
        Uuid16: 0x110E -- AVRemoteControl
        UInt16: 0x100

AttrId: 0x0100 -- ServiceName
TextString: [en] 'Alan's SPP service'

AttrId: 0x8001
UInt16: 0xFEDC 
```

array:

```
35-51-09-00-01-35-03-19-11-01-09-00-04-35-0C-35-03-19-01-00-35-05-19-00-03-08-00-09-00-06-35-09-09-65-6E-09-00-6A-09-01-00-09-00-09-35-08-35-06-19-11-0E-09-01-00-09-01-00-25-12-41-6C-61-6E-27-73-20-53-50-50-20-73-65-72-76-69-63-65-09-80-01-09-FE-DC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:45:57.317

BlueZ 是 linux 蓝牙堆栈，它带有 sdptool 实用程序，用于与 SDP 一起工作。这个页面有一些例子，[http://alanjmcf.wordpress.com/2011/08/09/bluez-sdptool-usage-notes/](http://alanjmcf.wordpress.com/2011/08/09/bluez-sdptool-usage-notes/)

# c# - 以编程方式更新/替换 visio 图表中的形状 (C#)

> ID：11844467
> 
> 赞同：1
> 
> 时间：2012-08-07T10:58:53.000
> 
> 标签：c#, visio

我想以编程方式（C#）更新/替换给定 visio 流程图（*.vsd）的所有形状。图表布局保持不变（所有连接、坐标等都相同），但主形状应该不同（来自不同的模具）。任何示例、建议和想法都将受到高度赞赏。

* * *

感谢您的建议！源图有许多被分组的受保护形状（+多个子形状），所以我想如果我获取给定源形状的所有信息，然后从目标模具中删除一个新的主人，会更好设置这些属性。接下来，我将采用下一个形状并做同样的事情。我会创建一个新的 Visio 文档，因为我不确定源 Page-ShapeSheet 是否没有以某种方式自定义。但我不知道如何在 C# 中以编程方式执行基本步骤，例如

*   如何在 C# 中创建新的 vsd 文件（可能是 application.Documents.AddEx(“”)）
*   然后我是否必须使用 application.Document.OpenEx 打开此文档，或者该文档已经打开/处于活动状态
*   我必须在此文档中创建一个新页面吗？-...</li>

在这篇文章中：[“保存和关闭 visio 文档 Visual Basic 宏”](https://stackoverflow.com/questions/3910309/save-and-close-visio-documents-visual-basic-macro)解释了类似的步骤，但在 VBA 中而不是在 C# 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:18:09.723

我建议只使用 Visio 2013，它具有开箱即用的功能。

但是，这可能对您不起作用。过去我采取了两条不同的路线，具体取决于原始形状和替换形状之间的差异。

一种方法是，在形状之间复制尽可能多的属性，并复制胶水和所有东西。所以要做到这一点，你只需复制宽度、高度、引脚等，然后逐步遍历原始形状中的所有胶水，并将胶水移动到新形状。

在我看来，另一种更简洁的方法是将所有几何部分从原始形状批量复制到目标形状中。这样您就不必担心胶水和格式等问题，而只需复制构成形状的图形。

如果您有一个包含多个子形状的分组形状，那么删除一个新的母版可能会更容易，但如果它只是一个简单的图形类型的形状，复制几何图形可能会更好。

使用“复制几何”方法需要注意的一件事是，您必须确保新形状中任何几何单元之前的任何用户单元或控件也存在于原始形状中。Visio 的 Cell 类告诉您单元格的先例，所以这很容易做到。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:53:46.663

我认为您可以从这两个链接中提取一些信息并使用它：

[Visio 形状 - 获取 X、Y 位置](https://stackoverflow.com/questions/3736712/visio-shape-get-x-y-position)

[http://msdn.microsoft.com/en-us/library/cc160747.aspx](http://msdn.microsoft.com/en-us/library/cc160747.aspx)

# java - 比较忽略毫秒的日期？

> ID：11844468
> 
> 赞同：11
> 
> 时间：2012-08-07T10:58:55.457
> 
> 标签：java, datetime, calendar

**有没有办法比较两个日历对象，但忽略毫秒？**

我写了一个比较两个日历对象的测试用例，但是有一个问题。尽管所有天、月、分钟和小时都匹配，但毫秒不匹配。我在得到实际日期之前得到了预期的日期：

```
/**
 * @return
 */
private Calendar getExpectedOneMonthDateFromCurrentDate() {
    Calendar expectedOneMonth = Calendar.getInstance();
    expectedOneMonth.add(Calendar.MONTH, -1);
    return expectedOneMonth;
}

assertEquals(getExpectedOneMonthDateFromCurrentDate(),
             DateRange.LAST_ONE_MONTH.getToDate()); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T11:02:14.073

Remove milliseconds from your calendar

```
cal.set(Calendar.MILLISECOND, 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:03:06.827

你需要使用

```
cal.set(Calendar.MILLISECOND, 0); 
```

也可能

```
cal.set(Calendar.SECOND, 0); 
```

如果你只需要分钟来匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T14:03:07.703

将毫秒设置为 0 的解决方案有一个问题：如果日期是 12:14:29.999 和 12:14:30.003，您将日期分别设置为 12:14:29 和 12:14:30，并且会检测到你不想要的差异。

我想过一个比较器：

```
private static class SecondsComparator implements Comparator<Calendar>
{
    public int compare(Calendar o1, Calendar o2)
    {
        final long difference = o1.getTimeInMillis() - o2.getTimeInMillis();
        if (difference > -1000 && difference < 1000)
            return 0;
        else
            return difference < 0 ? 1 : -1;
    }
}

public static void main(String args[])
{
    Calendar c1 = Calendar.getInstance();
    Utils.waitMilliseconds(100);
    Calendar c2 = Calendar.getInstance();
    // will return 0 
    System.out.println(new SecondsComparator().compare(c1,c2));
} 
```

但是，它也不是一个好的解决方案，因为这个 Comparator 违反了以下规则：

*实施者必须确保 x.compareTo(y)==0 意味着 sgn(x.compareTo(z)) == sgn(y.compareTo(z))，对于所有 z。*

什么导致`(x=y and y=z) => x=z`。

所以我没有看到任何解决方案......但事实上，如果你定义一些不同的日期，它们*是*不同的，不是吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T11:07:24.313

恕我直言，最简单的方法是使用 Apache Commons DateUtils ( [Apache Commons DateUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html#truncate%28java.util.Calendar,%20int%29) ) 中的 truncate() 来删除毫秒并比较结果日期。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-15T18:03:38.833

如果您使用的是 Java 8，则可以使用 Java Time API，具体来说[`Calendar::toInstant()`](https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#toInstant--)，后跟[`Instant::truncatedTo()`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#truncatedTo-java.time.temporal.TemporalUnit-). [`ChronoUnit`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/temporal/ChronoUnit.html)使用枚举指定截断的粒度。

```
myCalendar.toInstant().truncatedTo( ChronoUnit.SECONDS )  // Lop off any fractional second. 
```

例子。

```
 Calendar oneMonthIsh = Calendar.getInstance();
    oneMonthIsh.add(Calendar.MONTH, -1);
    oneMonthIsh.add(Calendar.MINUTE, 1);

    assertNotEquals(oneMonthIsh.toInstant(), getExpectedOneMonthDateFromCurrentDate());
    assertEquals(oneMonthIsh.toInstant().truncatedTo(ChronoUnit.DAYS),getExpectedOneMonthDateFromCurrentDate().toInstant()
    .truncatedTo(ChronoUnit.DAYS)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T11:03:20.760

一种选择是调用 Calendar.set(Calendar.MILLISECOND, 0) 来清除毫秒。另一种方法是调用 getTimeInMillis() 以获取两个日历的时间（以毫秒为单位）。然后，您可以将它们除以 1000，然后再进行比较以删除毫秒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T11:31:41.560

如果您要执行基本日期操作之外的任何操作，我建议您使用 Joda Time。在您的情况下，您可以像这样截断日期，然后进行比较：

```
DateTime dateTime = new DateTime().millisOfDay().roundFloorCopy(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T18:40:40.147

```
clearMilis(date1).compareTo(clearMilis(date2))

/**
 * @param date date
 *
 * @return truncated miliseconds
 */
@Nonnull
public static Date clearMillis(final @Nonnull Date date)
{
    DateTime result = new DateTime(date);

    return result.minusMillis(result.getMillisOfSecond()).toDate();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-08T02:18:10.000

```
public static String getFromatDateTime(Date date) {
    SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S");
    final GregorianCalendar gc = new GregorianCalendar();
    gc.setTime( date );
    //gc.set( Calendar.HOUR_OF_DAY, 0 );
    //gc.set( Calendar.MINUTE, 0 );
    //gc.set( Calendar.SECOND, 0 );
    //block ignore millisecond 
    gc.set( Calendar.MILLISECOND, 0 );
    String strDate = sdfDate.format(gc.getTime());
    return strDate;
}
public static void main(String[] args) throws ParseException {
    SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S");
    Date now = new  Date();
    String currentDate = Testing.getFromatDateTime(now);
    String fullDate = "2015-12-07 14:53:39.30";
    String effDateStr = Testing.getFromatDateTime(sdfDate.parse(fullDate));

    System.out.println("Currennt Date: " + currentDate);
    System.out.println("Effective Date: " + effDateStr);
    System.out.println(currentDate.compareTo(effDateStr)==0);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-13T10:12:52.330

虽然我参加聚会为时已晚，但为后代分享我的简单替代方法

通过使用忽略毫秒来比较两个日期对象`org.apache.commons.lang3.time.DateUtils`

```
Date date1 = new Date(1503055069000L);
Date date2 = new Date(1503055069683L);
//Here the two dates are differed by 683 milliseconds, if we want to skip just the 
//683 milliseconds difference then we can use the below logic
if(DateUtils.setMilliseconds(date1, 0).equals(DateUtils.setMilliseconds(date2, 0))){
    //your business process

} 
```

**注意**：`DateUtils#setMilliseconds`方法将毫秒字段设置为返回**新对象**的日期。**原始日期不变**。因此，在您重新分配对象引用之前，原始日期对象值保持不变。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-05T22:28:01.413

如果使用 jodaTime，setCopy("0") 方法返回一个 DateTime 对象，其毫秒设置为 0，以便于比较：

```
DateTime dateTimeZerodMillis = new DateTime().millisOfSecond ().setCopy("0") 
```

# javascript - jQuery 手风琴获取父 li

> ID：11844470
> 
> 赞同：1
> 
> 时间：2012-08-07T10:59:05.190
> 
> 标签：javascript, jquery, html

```
I am trying to get clicked links', all parent item classes using jQuery 
```

![在此处输入图像描述](../Images/128925ea016f6f6f41f0617d3e8e0cf5.png)

前 - 当我点击“用丙烯酸涂料绘制建筑物外墙”时，我想要上课

项目 150

项目 149

项目 143

我目前为此编写 aj Query，但它提供了一个最接近的 li 类，但无法获得其他它说未定义的类。

```
jQuery(".menu-sol a").click(function(event) {
event.preventDefault();
clicked=jQuery(this).closest('.parent').attr('class');
clicked=clicked.replace('parent ','');
clicked2=jQuery('.'+clicked).prev('.parent').attr('class');

alert(clicked);
alert(clicked2);

}); 
```

这是html的一部分

```
 <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: auto;" id="level_3">
      <li class="parent item144"><span src="" title=""></span><span class="separator"><span>Repairs of plasters</span></span>
        <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 0px;" id="level_3_0">
          <li class="item152"><a href="/Repairing-of-fallen-plaster.html"><span>Repairing of fallen plaster</span></a></li>
          <li class="item153"><a href="/Repairing-of-hairline-cracks-in-plaster.html"><span>Repairing of hairline cracks in plaster</span></a></li>
        </ul>
      </li>
      <li class="parent item145"><span src="" title=""></span><span class="separator"><span>Repairs of masonries</span></span>
        <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 0px;" id="level_3_1">
          <li class="item154"><a href="/Repairing-of-masonry-cracks-crack-width.html"><span>Repairing of masonry cracks (crack width </span></a></li>
          <li class="item155"><a href="/Repairing-of-detached-masonry-from-the-supporting-elements.html"><span>Repairing of detached masonry from the supporting elements</span></a></li>
          <li class="item156"><a href="/Repairing-of-severe-masonry-cracks-cracks-width-1-cm-Disorganised-masonry.html"><span>Repairing of severe masonry cracks (cracks width &gt; 1 cm) - Disorganised masonry</span></a></li>
        </ul>
      </li>
      <li class="parent item146"><span src="" title=""></span><span class="separator"><span>Repairs of concrete elements</span></span>
        <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 0px;" id="level_3_2">
          <li class="parent item147"><span></span><span class="separator"><span>Reinforcement with composite materials (F.R.P.)</span></span>
            <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 0px;" id="level_3_2_0">
              <li class="item162"><a href="/Reinforcement-of-the-shear-strength-of-a-beam.html"><span>Reinforcement of the shear strength of a beam</span></a></li>
              <li class="item163"><a href="/Reinforcement-of-the-flexural-strength-of-a-beam-or-slab.html"><span>Reinforcement of the flexural strength of a beam or slab</span></a></li>
              <li class="item164"><a href="/Columns-confinement.html"><span>Column's confinement</span></a></li>
            </ul>
          </li>
          <li class="item157"><a href="/Repairing-of-peeled-concrete-due-to-corrosion-of-the-steel-reinforcement.html"><span>Repairing of peeled concrete due to corrosion of the steel reinforcement</span></a></li>
          <li class="item158"><a href="/Repairing-of-damaged-concrete-surface-damage-blisters-broken-corners-etc.html"><span>Repairing of damaged concrete (surface damage, blisters, broken corners etc.)</span></a></li>
          <li class="item159"><a href="/Repairing-of-damaged-concrete-elements-by-grouting-with-concrete-or-high-strength-mortar.html"><span>Repairing of damaged concrete elements by grouting with concrete or high strength mortar</span></a></li>
          <li class="item160"><a href="/Repairing-of-cracks-in-concrete-elements-with-resin-injection.html"><span>Repairing of cracks in concrete elements with resin-injection</span></a></li>
          <li class="item161"><a href="/Repairs-with-composite-materials-welding-metal-plates-to-concrete-elements.html"><span>Repairs with composite materials - welding metal plates to concrete elements</span></a></li>
        </ul>
      </li>
      <li class="parent item148"><span src="" title=""></span><span class="separator"><span>Painting</span></span>
        <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: auto;" id="level_3_3">
          <li class="parent item149"><span src="" title=""></span><span class="separator"><span>Acrylic paints</span></span>
            <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: auto;" id="level_3_3_0">
              <li class="parent item150"><span src="" title=""></span><span class="separator"><span>Painting of exterior surfaces</span></span>
                <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 60px;" id="level_3_3_0_0">
                  <li class="item166"><a href="/Painting-of-buildings-facades-with-acrylic-paint.html"><span>Painting of buildings facades with acrylic paint</span></a></li>
                  <li class="item167"><a href="/Painting-of-building-facades-with-highly-elastic-waterproofing-paint.html"><span>Painting of building facades with highly-elastic waterproofing paint</span></a></li>
                </ul>
              </li>
              <li class="item165"><a href="/Painting-of-interior-surfaces.html"><span>Painting of interior surfaces</span></a></li>
            </ul>
          </li>
          <li class="parent item151"><span src="" title=""></span><span class="separator"><span>Epoxy paints</span></span>
            <ul style="padding-top: 0px; border-top: medium none; padding-bottom: 0px; border-bottom: medium none; overflow: hidden; height: 0px;" id="level_3_3_1">
              <li class="item168"><a href="/Painting-of-metal-surfaces-with-anti-corrosive-epoxy-primer.html"><span>Painting of metal surfaces with anti-corrosive epoxy primer</span></a></li>
              <li class="item169"><a href="/Painting-of-walls-with-high-durability-epoxy-coating.html"><span>Painting of walls with high durability epoxy coating</span></a></li>
              <li class="item170"><a href="/Waterproofing-of-pools-and-painting-with-epoxy-coating.html"><span>Waterproofing of pools and painting with epoxy coating</span></a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul> 
```

您可以通过 [http://isomat.eu/technical-solutions/menu-id-73访问示例站点](http://isomat.eu/technical-solutions/menu-id-73)

我的刺激是商店点击链接父项目类到 cookie 并在刷新页面时加载相同的节点。任何人都可以帮助我获得父类

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:12:39.073

这将为您提供该类的所有父节点`parent`：

```
$(this).parents('.parent') 
```

这是你要求的吗？

以下将为您提供每个父母的所有班级名称的列表：

```
$(this).parents('.parent').map(function() {
    return $(this).attr('class').split(/\s+/);
}).toArray();

// [ [ "parent", "item150" ], [ "parent", "item149" ], ... ] 
```

现在，如果您知道总会有两个类，并且您总是想要第二个，您可以执行以下操作：

```
$(this).parents('.parent').map(function() {
    return $(this).attr('class').split(/\s+/)[1];
}).toArray();

// [ "item150", "item149" ] 
```

否则，如果您可以假设只有一个`item...`类，那么这可能是一种更简洁的方法：

```
$(this).parents('.parent').map(function() {
    var classes = $(this).attr('class').split(/\s+/);
    for(var i = 0; i < classes.length; i++) {
       if(classes[i].substring(0, 4) == 'item')
          return classes[i];
    }
}).toArray();

// [ "item150", "item149" ] 
```

# iphone - 如何使用 nsxmlparser 解析具有相同标签名称的 xml 文件？

> ID：11844478
> 
> 赞同：0
> 
> 时间：2012-08-07T10:59:31.797
> 
> 标签：iphone, ios5, nsxmlparser

如何使用 NSXMLParser 解析这种类型的 XML

```
<category> <categoryName> userName</categoryName> <categoryName>password</categoryName><category> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:13:51.570

在 h 文件中声明数组和字符串，如：

```
 NSMutableArray *aryCategory;
 NSString *strCategroyName; 
```

在 .m 文件中用于启动 Parser 使用：

```
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:yourData]; // your data will be instance of NSData or NSMutableData
parser.delegate = self;
[parser parse]; 
```

这将在您获得 xml 数据后完成。对于处理结果，您可以使用`NSXMLParserDelegate`如下：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
     if ([elementName isEqualToString:@"category"]) {
          aryCategory = [[NSMutableArray alloc] init];
          strCategroyName = @"";
     }
}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
     strCategroyName = [NSString stringWithFormat:@"%@%@", strCategroyName, string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([elementName isEqualToString:@"categoryName"]) {
          [aryCategory addObject:strCategroyName];
          strCategroyName = @"";
     } 
```

}

现在，您将使用所有类别名称填充您的数组。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:02:39.610

编写作为解析器代表的`<category>`in`didStart`和元素。`didEnd`

# ios - 第一次运行时关键帧动画延迟

> ID：11844481
> 
> 赞同：2
> 
> 时间：2012-08-07T10:59:35.473
> 
> 标签：ios, animation, cakeyframeanimation

我正在使用关键帧动画来为一系列图像设置动画。但是当我第一次运行它时，动画开始之前会有延迟。之后，它运行顺利。我尝试强制加载所有图像。它减少了延迟，但它仍然可见。我怎样才能进一步减少延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:30:43.917

Apple 因使用“延迟”加载技术而臭名昭著，很可能放置从“[UIImage imageNamed:]”检索到的图像实际上并没有创建缓存位图，只是创建它的收据。

如果所有其他方法都失败了，请尝试蛮力方法：强制系统通过在上下文中渲染图像来渲染它，然后你就扔掉了。

```
CGSize bigSize; // MAX width and height of your images

UIGraphicsBeginImageContextWithOptions(bigSize, YES, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

for(UIImage *image in arrayOfImages) {
    CGContextDrawImage(context, (CGRect){ {0,0}, image.size }, [image CGImage]);
}
UIGraphicsEndImageContext(); 
```

现在您不仅可以参考图像，而且还被迫渲染它们，因此希望系统保留该内部位图。对你来说应该是一个简单的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-03T23:24:33.497

此代码适用于 swift 2.2！

尝试在动画结束之前放置您想要的最终图像。

它更像是：

```
// the animation key is for retrive the informations about the array images
func animation(cicleTime:Int, withDuration: Double, animationKey:String){

    var images = [UIImage]()

    // get all images for animation
    for i in 0...cicleTime {
        let fileName = String(format: "image%d",i)
        let image = UIImage(named: fileName)

        images.append(image!)
    }

    let animation = CAKeyframeAnimation(keyPath: "contents")

    animation.setValue(animationKey, forKey: "animationName")

    animation.duration = withDuration
    animation.repeatCount = 1 // times you want to repeat the animation
    animation.values = images.map{$0.CGImage as! AnyObject}
    animation.delegate = self
    images.removeAll(keepCapacity: false)
    YourViewHere.layer.addAnimation(animation, forKey: "contents")

    YourViewHere.image = UIImage(named: "nameOfYourLastImageOfAnimation")
} 
```

好吧，这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T14:53:23.347

我最近遇到了这个问题，并通过尽早“预运行”动画来解决它，持续时间为 ，`0`并且在完成时不删除它。当我真正想运行它时，整个序列已加载且流畅

```
let animation: CAKeyframeAnimation = CAKeyframeAnimation(keyPath: "contents")
    animation.calculationMode = kCAAnimationDiscrete
    animation.duration = 0
    animation.values = spritesArray
    animation.repeatCount = 1
    animation.removedOnCompletion = false
    animation.fillMode = kCAFillModeForwards
    layer.addAnimation(animation, forKey: "animateIn") 
```

在我的情况下，我实际上已经将序列拆分为 2 个单独的关键帧动画用于介绍/结尾，并且结尾总是在开始之前停止。在持续时间关键帧动画中首先预加载整个事物可以`0`防止这种情况发生。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T11:06:25.847

考虑将图像预加载到`NSArray`. 您的延迟很可能是由于它首先必须加载图像。

所以，基本上，假设你有`img1.png`,`img2.png`等最多`img10.png`：

```
//do this before your keyframe animation.

NSMutableArray *frames = [NSMutableArray array];
for(int i = 1 ; i <= 10 ; i++)
    [frames addObject:[UIImage imageNamed:[NSString stringWithFormat:@"img%d.png" , i]]];

//now use this array for the animation 
```

希望这可以帮助。干杯!

# php - PHP MVC，部分视图？

> ID：11844488
> 
> 赞同：2
> 
> 时间：2012-08-07T10:59:56.850
> 
> 标签：php, model-view-controller, views, partial

我正在构建一个小型 PHP MVC，并且我已经用一小部分编码撞到了墙。我认为我需要“部分视图”，但我可能能够使用现有代码实现某些目标。

我的控制器目前最简单的形式：

*   实例化一个对象
*   检查 POST 变量是否已设置
*   根据需要显示视图 1 或显示视图 2

目前的观点：

*   显示 HTML 标记
*   使用并回显模型获取函数，例如 getUserInfo()

一切都很好，但是代码现在在控制器和视图中都变得相当大，并且我已经达到了需要在主视图（1和2）中包含“模块”或子视图的情况。

例如，如果加载了 view2，那么我需要显示（作为 view2 的一部分）另一个视图，比如一个 3 部分的注册表单。该注册表单也带有它自己的控制器文件。

我可以做这样的事情，它会起作用并让您对我正在尝试做的事情有所了解，但我承认这会破坏 MVC 设计模式。

看法

```
<div id="mydiv">Some content</div>
<div id="mysignup"> <?php include('controller_signup.php'); ?></div>
<div id="content"> The views main page content </div> 
```

然后在正确的位置从控制器中拉入视图。

如前所述，我认为我需要使用部分视图，但是我发现的大部分信息都是针对 ASP 的，我有点迷失了！

我会认为这是一个相当普遍的问题，所以我认为有一个明显的解决方案！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:16:00.127

你问题的根源是你没有观点。您所谓的“视图”实际上是一个[模板](http://codeangel.org/articles/simple-php-template-engine.html)。这反过来又强制控制器中的表示逻辑。

在正确的 MVC 视图中是包含所有表示逻辑的实例。他们从模型层获取信息，然后根据数据选择如何显示这些信息。每个视图操作多个模板。

此外，您的控制器似乎获得了额外的责任。它应该改变模型层和当前视图的状态，而不是渲染模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T14:54:51.420

不能说我同意tereško。将表示逻辑放在单独的视图类中似乎更合适，但它确实增加了另一层复杂性。在许多情况下，这个额外的层是不必要的——通常一个视图可以直接渲染你注入的任何模型或数据。因此，您最终会得到仅将模型从控制器传递到模板的空视图类。

我想说，保持简单，您可以使用简单的 MVC 制作非常复杂（且可维护）的网站，而无需引入模板的概念。

要处理子视图，您可以简单地让主视图将数据注入子视图，这对控制器应该是透明的（控制器只提供主数据而不关心它应该如何呈现）。所以在实践中，你可以有这样的东西：

**控制器：**

```
public function someAction() {
    // ...
    $view = new View('name');
    $view->data = $someList;
} 
```

**看法：**

```
<?php foreach ($someList as $item): ?>
    <?php echo (new View('subview', $item))->render();
<?php endforeach; ?> 
```

# linq - LINQ RowNumber、Aggregate (Sum) 和 GroupBy

> ID：11844492
> 
> 赞同：1
> 
> 时间：2012-08-07T11:00:23.900
> 
> 标签：linq, row-number

我有一个类似的 SQL 代码；

```
Select GroupName, sum(LineAmount) as Total, WeekNumber,
    ROW_NUMBER() over (partition by WeekNumber order by sum(LineAmount) desc) as RowNum
from
    Invoices
where
    month(InvoiceDate)=month(getdate())
group by
    GroupName,WeekNumber 
```

我想将其转换为 LINQ，但没有运气。我正在使用 LINQ to Object。任何帮助，将不胜感激。TIA

编辑：这是一些示例数据和预期结果。

```
public class Invoice
{
    public string GroupName { get; set; }
    public int LineAmount { get; set; }
    public int WeekNum { get; set; }
}

   List<Invoice> theData = new List<Invoice>();
    theData.Add(new Invoice { GroupName = "A", LineAmount = 1, WeekNum = 1});
    theData.Add(new Invoice { GroupName = "A", LineAmount = 2, WeekNum = 1 });
    theData.Add(new Invoice { GroupName = "A", LineAmount = 3, WeekNum = 1 });
    theData.Add(new Invoice { GroupName = "A", LineAmount = 2, WeekNum = 2 });
    theData.Add(new Invoice { GroupName = "A", LineAmount = 3, WeekNum = 2 });
    theData.Add(new Invoice { GroupName = "A", LineAmount = 4, WeekNum = 2 });
    theData.Add(new Invoice { GroupName = "B", LineAmount = 4, WeekNum = 1 });
    theData.Add(new Invoice { GroupName = "B", LineAmount = 3, WeekNum = 1 });
    theData.Add(new Invoice { GroupName = "B", LineAmount = 7, WeekNum = 2 });
    theData.Add(new Invoice { GroupName = "B", LineAmount = 6, WeekNum = 2 });
    theData.Add(new Invoice { GroupName = "B", LineAmount = 5, WeekNum = 2 }); 
```

![在此处输入图像描述](../Images/371c6b8f7cacbb6a1bf328f2fc8e5f4c.png)

我已经从我的第一个查询中删除了“where”，因为它目前不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:11:26.663

```
theData
.GroupBy(g => new {g.GroupName, g.WeekNum}, (key, gg) => new {key.GroupName, key.WeekNum, Total = gg.Sum(g => g.LineAmount)})
.GroupBy(g => g.WeekNum, (weekNum, gg) => gg.OrderByDescending(g => g.Total).Select((g,i) => new {g.GroupName, g.Total, g.WeekNum, RowNum = i}))
.SelectMany(g => g) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:27:55.200

您尚未指定所需的语言。这是 C# 中的代码

```
int index = 0;
var filteredInvoices = (from i in invoices
where i.InvoiceDate.Month == DateTime.Now().Month
group i by new { i.GroupName, i.WeekNumber }
into ig
select new {i.GroupName, Total = ig.Sum(i => i.LineAmount), i.WeekNumber, RowNum = ++index}).OrderByDescending(n => n.Total); 
```

filtersInvoices 应该有你想要的结果。此外，我假设 i.InvoiceDate 的类型为 DateTime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:16:12.297

Serg Rogovtsev 的回答给了我预期的结果。下面的代码就是我所做的。不知道哪个表现更好，但结果是一样的。

```
(theData.GroupBy(f => new { f.GroupName, f.WeekNum})
                .Select(r => new {r.Key.WeekNum, r.Key.GroupName, Total = r.Sum(f => f.LineAmount)}))
                .GroupBy(r => new {r.WeekNum}).SelectMany(
                    g =>
                    g.OrderByDescending(f => f.Total).Select(
                        (f, index) => new { f.GroupName, f.Total, f.WeekNum, Ix = index + 1 })) 
```

# java - The location of an individual object in JVM Heap Space

> ID：11844493
> 
> 赞同：2
> 
> 时间：2012-08-07T11:00:23.837
> 
> 标签：java, jvm

I am able to monitor the java application with various tools at JVM level. I can dump heap objects and find out the number of the objects and their total size.

At this point, I would like to know the heap location of each object, I mean, as you may know that there are three heap sections (eden, old, perm spaces), at the time of dump which object located at which heap space.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:05:47.373

单个对象的位置不是您可以追踪的。只是转储堆可能会导致对象移动。无论你想做什么，我建议你做另一种方式。

顺便说一句：如果您转储“活动”对象，则会触发完整的 GC，该 GC 可以将所有对象移动到旧代中，因此在这种情况下您知道所有对象在哪里。;)

# php - chrome中的javascript问题

> ID：11844501
> 
> 赞同：1
> 
> 时间：2012-08-07T11:00:49.053
> 
> 标签：php, javascript

我在javascript中有以下代码
我将一个php数组存储在下面的javascript数组中

```
<script type="text/javascript">

    var name=new Array();
    <?php
        for($i=0;$i<count($ids); $i++)
            {
                echo "name[$i]='".$name[$i]."';";
            }
    ?>

</script> 
```

当我警告名称 [1] 时，在 Firefox 中我能够看到名称 [1] 的值，但是当我在 chrome 中运行代码时，我在警告框中未定义。

我该如何解决这个问题。我必须改变存储数组的方式还是必须做其他事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:12:59.880

因为您在声明变量时犯了大罪：

*   这是一个全球性的，这是不好的做法。
*   它的名字是`name`，这是chrome中的保留关键字，只需打开控制台并输入`for (n in window){if (n === 'name'){console.log(true)}}`，它就会记录为true
*   不使用`new Array();`，使用`[]`

在 php 前面：要么始终使用双引号，要么使用单引号（但这只是我个人的偏好）：

```
echo "name[$i]='{$name[$i]}';";
echo 'name['.$i.']="'.$name[$i].'";'; 
```

就像你放置卷曲的方式一样，虽然...... :-P

# javascript - toggleDown jquery not working

> ID：11844503
> 
> 赞同：0
> 
> 时间：2012-08-07T11:00:59.233
> 
> 标签：javascript, jquery

When you hover over the arrow it should toggle the footer down so you can see its content. When the mouse is inside the `#footer` the div should remain opened so you can read the content.

The problem is when you hover on the arrow the div just opens and closes.

here is a working example: [http://jsfiddle.net/MEJgb/1/](http://jsfiddle.net/MEJgb/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:06:01.937

尝试更改此行

```
jQuery(this).next("#footer_toggle").slideToggle("slow"); 
```

至

```
jQuery(this).next("#footer_toggle").stop().slideToggle("slow"); 
```

或者尝试这样的事情我想如果我理解你的问题是正确的

[http://jsfiddle.net/MEJgb/21/](http://jsfiddle.net/MEJgb/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:14:39.967

而不是使用悬停事件使用点击事件

```
jQuery("#toggleDiv").click(function() {}); 
```

[**工作演示**](http://jsfiddle.net/MEJgb/12/)在这里！！

我希望它会工作..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T11:17:46.783

```
$(document).ready(function() {
    // footer Toggle        
    $("#footer_toggle").hide();

    $("#toggleDiv").click(function() {
        $("#footer_toggle").slideToggle();
        if($("#toggleDiv").hasClass('active'))
            $("#toggleDiv").removeClass("active");
        else
        $("#toggleDiv").addClass("active");
    });
}); 
```

# android - onAnimationRepeat() method not working

> ID：11844504
> 
> 赞同：1
> 
> 时间：2012-08-07T11:01:00.387
> 
> 标签：android, animation

onAnimationRepeat() method is not working. I have tested through logger that the method is not being accessed by android. What am I doing wrong ?

**code**

```
public class MainActivity extends Activity  {

       private TextView textView;
       String animText;
       private Animation fadeInAnimation;
       ArrayList<String> numList;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       textView = (TextView)findViewById(R.id.animationText);
       numList=new ArrayList<String>();
       Random random = new Random();
               int num = random.nextInt(20);
               for(int i = 1; i <= num ; i++){
                       animText = String.valueOf(i);
                       numList.add(animText);
               }        
       doFadeEffectAnimation();
   }

   public void doFadeEffectAnimation(){

             textView = (TextView)findViewById(R.id.animationText);
             textView.setTextSize(50);
               fadeInAnimation = AnimationUtils.loadAnimation(MainActivity.this, R.anim.fade_in);
               fadeInAnimation.setAnimationListener(new AnimationListener() {
                       @Override
                       public void onAnimationStart(Animation animation) {
                               // TODO Auto-generated method stub

                       }
                       @Override
                       public void onAnimationRepeat(Animation animation) {
                               // TODO Auto-generated method stub
                       for (int i = 0; i < numList.size(); i++) {
                               textView.setText(numList.get(i));
                       }
                       }
                       @Override
                       public void onAnimationEnd(Animation animation) {
                               // TODO Auto-generated method stub

                       }
               });
               textView.startAnimation(fadeInAnimation);

       }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
       getMenuInflater().inflate(R.menu.activity_main, menu);
       return true;
   }

} 
```

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
   <alpha
       android:duration="2000"
       android:fromAlpha="0.1"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:toAlpha="1.0"
       android:repeatCount="2"
      />

</set> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T11:13:12.113

尝试从 onWindowFocusChanged() 方法调用***doFadeEffectAnimation(*** )，而不是从 onCreate() 方法调用它...

```
@Override
public void onWindowFocusChanged(final boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    if (hasFocus) {
        doFadeEffectAnimation();
    }
} 
```

希望它可以帮助解决您的问题...

# database - Undefined variable in codeigniter vol.2

> ID：11844506
> 
> 赞同：0
> 
> 时间：2012-08-07T11:01:11.383
> 
> 标签：database, view, model, foreach, controller

So, I have already asked for this problem today. But it has reiterate. So, the error is: A PHP Error was encountered Severity: Notice

Message: Undefined variable: news

Filename: views/main_text_view.php

Line Number: 5

A PHP Error was encountered Severity: Warning

Message: Invalid argument supplied for foreach()

Filename: views/main_text_view.php

Line Number: 5

Controller:

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

   class First extends CI_Controller
   {

    public function __construct()
    {
    parent::__construct();
    $this->load->model('materials_model');
    }    

    public function index()
      {
        $this->load->view('header_view');
        $this->load->view('menu_view');
        $this->load->view('about_me_view');
        $this->load->view('navigation_view');
        $this->load->view('search_view');
        $this->load->view('main_text_view',$news);
        $this->load->view('footer_view');

      }

    public function mat()
    {
        $data = array();
        $data['news'] = $this->load->model('materials_model');

    }

   }

?> 
```

Model:

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

class Materials_model extends CI_Model
{
    public function get()
    {
        $query = $this->db->get('materials');
        return $query->result_array();
    }
}

?> 
```

View:

```
<div id="main">
            <div class="post"> <a name="TemplateInfo"></a>
              <h1>Template Info</h1>
              <?php foreach ($news as $one):?>
              <p>Posted by <?=$one['author']?></p>
              <?php endforeach; ?>

<p><strong>Enlighten 1.0</strong> is a free, W3C-compliant, CSS-based website template by <strong><a href="http://www.styleshout.com/">styleshout.com</a></strong>. This work is distributed under the <a rel="license" href="http://creativecommons.org/licenses/by/2.5/"> Creative Commons Attribution 2.5 License</a>, which means that you are free to use and modify it for any purpose. All I ask is that you include a link back to <a href="http://www.styleshout.com/">my website</a> in your credits.</p>
          <p>For more free designs, you can visit <a href="http://www.styleshout.com/">my website</a> to see my other works.</p>
          <p>Good luck and I hope you find my free templates useful!</p>
          <p class="post-footer align-right"> <a href="http://web-mastery.info/" class="readmore">Read more</a> <a href="http://web-mastery.info/" class="comments">Comments (7)</a> <span class="date">Jan 09, 2007</span> </p>
        </div>

            <br />
          </div>
        </div>
      </div> 
```

# jquery - How to do render partial on jQuery ajax success method with rails 3

> ID：11844513
> 
> 赞同：9
> 
> 时间：2012-08-07T11:01:36.893
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.2

I'm using rails 3.2.1 with jQuery for an ajax call.

My jQuery code is :

```
jQuery.ajax({
  url: "/org_pages",
  data: 'org_id='+ org_id,
  type: "POST",
  success: function(result){                        
    jQuery("#image_center").html("<%= escape_javascript(render(:partial => 'pages/top_link')) %>");
  },
  error: function(){
    alert('Error occured');
  }
}); 
```

My problem is on the web page the output is showing this :

```
<%= render :partial => 'pages/top_link', :collection=>@pages %> 
```

How it should display my render partial page. :(

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-10T07:43:56.877

尝试将控制器中的部分渲染为，

```
def method_name
  render :partial => 'some_partial'
end 
```

在js中，

```
success: function(result){                      
  jQuery("#image_center").html(result);
} 
```

要不然

创建一个与该操作对应的 js.erb 文件，并在其中粘贴以下内容：

```
jQuery("#image_center").html("<%= escape_javascript(render(:partial => 'pages/top_link')) %>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:00:21.517

您可以创建此文件：/app/views/org_pages/index.js.erb 并将其放入您的文件中：

```
jQuery("#image_center").html("<%= escape_javascript(render(:partial => 'pages/top_link')) %>"); 
```

此代码将在成功时呈现和执行。

# javascript - jQuery val() returns an array with IE8 on select/option element

> ID：11844514
> 
> 赞同：3
> 
> 时间：2012-08-07T11:01:38.983
> 
> 标签：javascript, jquery, css, internet-explorer, internet-explorer-8

The following alert returns "string" in the majors browsers. Returns "object" (an array of one element) on <=IE8.

HTML:

```
<SELECT id="adults_1" type="select">
    <OPTION value="1">1 persona</OPTION>
</SELECT>​ 
```

JS:

```
 alert(typeof $("#adults_1").val()); 
```

JsFiddle: [http://jsfiddle.net/JM9AY/2/](http://jsfiddle.net/JM9AY/2/)

Is it a bug or it is the expected value? If it's a bug, is there a workaround?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T11:06:12.197

删除`type="select"`可纠正此意外行为。`type`无论如何，这里的属性是什么意思？HTML5 中没有这样的属性。

# visual-studio-2010 - Program window not viewable during debug pause

> ID：11844515
> 
> 赞同：0
> 
> 时间：2012-08-07T11:01:44.687
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-debugging

When my program is paused in Visual Studios 2010 during debugging, like from reaching a break point and me doing a manual step through, the program window becomes impossible to view.

It is a GUI window not a console window, which I run simultaneously with my program and am still able to view. The window seems to be open it's just that when I click its icon on the taskbar it doesn't come to the front of all the other windows. When I minimize all the windows in front of it, I see the outline of the window but it is either blacked out or showing the remnants of previously expanded windows.

I've noticed this with using Visual Studio's before (various versions of it), and after trying other IDE's that didn't have this behavior I notice it more. It would be really helpful to view the program's change's as I step through the program. Anyone know how I can do this?

I searched a long while and couldn't find a single reference to this matter.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:13:56.640

如果您单步执行由主线程运行的代码，则主线程无法同时轮询消息泵，这是 GUI 工作所必需的。

如果您调试不同的线程，则 GUI 将在您调试时工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:15:51.690

窗口不显示的原因是如果主线程已暂停，则不会处理窗口绘制消息。还有哪些其他 IDE 允许您这样做？我还没有遇到任何在 Windows 上执行此操作的本机代码调试器。

# sql - SQL messages that can be read by specified users

> ID：11844520
> 
> 赞同：2
> 
> 时间：2012-08-07T11:01:52.073
> 
> 标签：sql

Task:

At present, the database knows two types of messages:

1.  Messages that a user posts and that are public for anyone and everyone to read
2.  Messages that a user posts and that are non-public.

These messages can only be read by users that the posting user has marked as friends. In this step, you should add a third type of message. This third type of message should be readable by specified recipients only.

This means the database needs to provide the following:

*   A way of distinguishing between the three types of messages. This involves a change to the Message table.
*   A way of specifying who the recipients of a particular message are. This will probably require an additional table.

Your job is to implement the necessary changes and additional table for this purpose and any keys and foreign key relationships required.

here are two existing tables witch relate to the task(copies from my db).

User table

```
CREATE TABLE IF NOT EXISTS `User` (
  `user_id` int(10) unsigned NOT NULL auto_increment,
  `given_name` varchar(60) default NULL,
  `surname` varchar(60) default NULL,
  `address` varchar(255) default NULL,
  `city_id` int(10) unsigned NOT NULL,
  `date_of_birth` datetime default NULL,
  `email` varchar(80) default NULL,
  PRIMARY KEY  (`user_id`),
  KEY `ix_user_surname` (`surname`),
  KEY `ix_user_given_name` (`given_name`),
  KEY `ix_user_name` (`given_name`,`surname`),
  KEY `ix_user_date_of_birth` (`date_of_birth`),
  KEY `ix_user_email` (`email`),
  KEY `ix_user_city_id` (`city_id`)
) ENGINE=InnoDB 
```

Message table

```
CREATE TABLE IF NOT EXISTS `Message` (
  `message_id` int(10) unsigned NOT NULL auto_increment,
  `owner_id` int(10) unsigned default NULL,
  `subject` varchar(255) default NULL,
  `body` text,
  `posted` datetime default NULL,
  `is_public` tinyint(4) default '0',
  PRIMARY KEY  (`message_id`),
  KEY `ix_message_owner_id` (`owner_id`)
) ENGINE=InnoDB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:30:22.907

好的，所以 is_public 使您能够区分两种类型（例如 is_public = '0' 表示私有，is_public = '1' 表示公共）。但是现在您有了指定收据的新概念，因此是/否模型将不再适用，因为您有 3 种类型。通常在这种情况下，您可以切换到标志或类型列。

因此，也许可以创建一个 message_type 列，它是“PUBLIC”、“PRIVATE”、“SPECIFIED”或类似内容之一。

之后，听起来您至少还需要两张桌子。用户必须能够指定朋友，并且用户必须能够指定用户接收特定消息。

# r - 在 R 中拟合函数

> ID：11844522
> 
> 赞同：13
> 
> 时间：2012-08-07T11:01:56.560
> 
> 标签：r, curve-fitting, lm, nls

我有一些似乎具有对数关系的数据点（x 和 y）。

```
> mydata
    x   y
1   0 123
2   2 116
3   4 113
4  15 100
5  48  87
6  75  84
7 122  77

> qplot(x, y, data=mydata, geom="line") 
```

![阴谋](../Images/f06507b22ee94ce336ff950eb4a89b11.png)

现在我想找到一个适合该图的基础函数，并允许我推断其他数据点（即`3`或`82`）。我读过`lm`，`nls`但我真的没有得到任何地方。

起初，我创建了一个我认为最像情节的函数：

```
f <- function(x, a, b) {
    a * exp(b *-x)
}
x <- seq(0:100)
y <- f(seq(0:100), 1,1)
qplot(x,y, geom="line") 
```

![情节2](../Images/cb0c89715c9fb567720dc88745d87ddd.png)

之后，我尝试使用以下方法生成拟合模型`nls`：

```
> fit <- nls(y ~ f(x, a, b), data=mydata, start=list(a=1, b=1))
   Error in numericDeriv(form[[3]], names(ind), env) :
   Missing value or an Infinity produced when evaluating the model 
```

有人可以指出我从这里做什么的正确方向吗？

**跟进**

在阅读了您的评论并进一步搜索后，我调整了 的起始参数`a`，`b`然后`c`模型突然收敛。

```
fit <- nls(y~f(x,a,b,c), data=data.frame(mydata), start=list(a=1, b=30, c=-0.3))
x <- seq(0,120)
fitted.data <- data.frame(x=x, y=predict(fit, list(x=x))
ggplot(mydata, aes(x, y)) + geom_point(color="red", alpha=.5) + geom_line(alpha=.5) + geom_line(data=fitted.data) 
```

![情节3](../Images/6a860f8887d33cc562ae0440a460f1fa.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T12:42:28.240

也许对您的模型使用三次规格并通过估计`lm`会给您一个很好的选择。

```
# Importing your data
dataset <- read.table(text='
    x   y
1   0 123
2   2 116
3   4 113
4  15 100
5  48  87
6  75  84
7 122  77', header=T)

# I think one possible specification would be a cubic linear model
y.hat <- predict(lm(y~x+I(x^2)+I(x^3), data=dataset)) # estimating the model and obtaining the fitted values from the model

qplot(x, y, data=dataset, geom="line") # your plot black lines
last_plot() + geom_line(aes(x=x, y=y.hat), col=2) # the fitted values red lines

# It fits good. 
```

![在此处输入图像描述](../Images/4c2f9ea6a81d02b40913c37177eed94a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T11:32:06.017

尝试记录您的响应变量，然后`lm`用于拟合线性模型：

```
fit <- lm(log(y) ~ x, data=mydata) 
```

调整后的 R 平方为 0.8486，从表面上看还不错。您可以使用绘图查看拟合，例如：

```
plot(fit, which=2) 
```

但也许，它毕竟不是那么合适：

```
last_plot() + geom_line(aes(x=x, y=exp(fit$fitted.values))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T11:34:42.983

查看此文档：[http ://cran.r-project.org/doc/contrib/Ricci-distributions-en.pdf](http://cran.r-project.org/doc/contrib/Ricci-distributions-en.pdf)

简而言之，首先您需要确定模型以适合您的数据（例如指数），然后估计其参数。

以下是一些广泛使用的发行版： [http ://www.itl.nist.gov/div898/handbook/eda/section3/eda366.htm](http://www.itl.nist.gov/div898/handbook/eda/section3/eda366.htm)

# haskell - What is the preferred way to combine two sinks?

> ID：11844523
> 
> 赞同：21
> 
> 时间：2012-08-07T11:02:01.797
> 
> 标签：haskell, conduit

I've used `zipSinks :: Monad m => Sink i m r -> Sink i m r' -> Sink i m (r, r')` for this but it is considered deprecated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:14:55.190

**编辑**

考虑到这一点，我认为当前版本的 Data.Conduit 不可能。管道不是类别，所以`&&&`是不可能的。而且我无法想到从上游提取结果，将它们逐步馈送到两个接收器，并在第一个接收器完成时短路。（虽然我不认为以`Data.Conduit.Util.zipSinks`这种方式短路，但它似乎是非常可取的。）当然，除了在两个接收器上进行模式匹配（就像`zipSinks`在包中那样），但这就是我们想要的避开这里。

也就是说，我很想*在*这里被证明是错误的。

* * *

它不漂亮，但你可以用一种显而易见的方式做到这一点。

首次进口：

```
module Main where

import Control.Monad.Trans
import Data.Conduit
import qualified Data.Conduit.Binary as CB
import qualified Data.Conduit.List as CL
import qualified Data.Conduit.Text as CT
import qualified Data.Conduit.Util as CU
import Data.Maybe
import Data.Text (unpack) 
```

现在为`zipSinks`. 基本上，您想创建一个接收器，从上游提取输入并将其分别发送到每个子接收器。在这种情况下，我曾经`CL.sourceList`这样做过。如果`await`返回`Nothing`，`maybeToList`则返回一个空列表，因此子接收器也会在没有输入的情况下运行。最后，然后将每个子接收器的输出馈送到元组中。

```
zipSinks :: Monad m => Sink i m r -> Sink i m r' -> Sink i m (r, r')
zipSinks s1 s2 = do
    l  <- fmap maybeToList await
    o1 <- lift $ CL.sourceList l $$ s1
    o2 <- lift $ CL.sourceList l $$ s2
    return (o1, o2) 
```

以下是一些使用`zipSinks`. 它似乎在它的内部`IO`和外部都可以正常工作，并且在我所做的少数测试中，输出与`zipped'`使用旧的`zipSinks`.

```
doubleHead :: Monad m => Sink Int m (Maybe Int)
doubleHead = await >>= return . fmap (2*)

-- old version
zipped' :: Monad m => Sink Int m (Maybe Int, Maybe Int)
zipped' = CU.zipSinks CL.head doubleHead

-- new version
zipped :: Monad m => Sink Int m (Maybe Int, Maybe Int)
zipped = zipSinks CL.head doubleHead

fromList = CL.sourceList [7, 8, 9] $$ zipped
-- (Just 7, Just 14)

fromFile :: String -> IO (Maybe Int, Maybe Int)
fromFile filename = runResourceT $
       CB.sourceFile filename
    $= CB.lines
    $= CT.decode CT.utf8
    $= CL.map (read . unpack)
    $$ zipped

-- for a file with the lines:
--
-- 1
-- 2
-- 3
--
-- returns (Just 1, Just 2) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:42:36.167

（（（包是[conduit-0.5.2.3](http://hackage.haskell.org/package/conduit-0.5.2.3)。整个[模块](http://hackage.haskell.org/packages/archive/conduit/0.5.2.3/doc/html/Data-Conduit-Util.html#v%3azipSinks)只是为了向后兼容。））

* * *

[**编辑**]

所以，我直截了当的一元猜测（**见下文**）似乎是**错误**的，即使类型是正确的。现在，我只能猜测答案是：

替换功能仍在开发中，与所有 Pipe/Conduit 以及类似的概念和库非常相似。

我会等待下一个 API 来解决这个问题并在此`zipSink`之前仍然使用。（也许只是放错地方了。）

[ **/编辑**]

我对这个包不是很熟悉，但它不会和这个一样吗？

```
zipSinks :: Monad m => Sink i m r -> Sink i m r' -> Sink i m (r, r')
zipSinks s1 s2 = (,) <$> s1 <*> s2 
```

毕竟这是一个[Monad 。](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Monad.html#v%3aliftM2)([函子](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-Functor.html#v%3a-60--36--62-),[应用](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Control-Applicative.html#v%3a-60--42--62-))

```
zipSinks :: Monad sink => sink r -> sink r' -> sink (r, r')
zipSinks s1 s2 = liftM2 (,) s1 s2 
```

# java - How to send text in clipboard to EditText box

> ID：11844525
> 
> 赞同：2
> 
> 时间：2012-08-07T11:02:07.657
> 
> 标签：java, android, android-intent, android-edittext, android-activity

My app with two activities is targeted to run on Android 4 or above. **Activity 1** displays a Webview, and **Activity 2** consists of a Listview and an EditText.

I would like to programmatically send/export any text copied in the Webview of **Activity 1** to the EditText of **Activity 2** once a button is pressed.

To make it clear, my purpose is to create a button to listen to any text copied to clipboard. When the button is pressed, Activity 2 will be called and the text in clipboard will be sent/pasted to the EditText (edtbox) of Activity 2

So far, I have applied the following code lines:

Activity 1 (on button clicked):

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
clipboard.setText("Text to copy");
clipboard.getText();

Intent i = new Intent(Activity1.this, Activity2.class);
Bundle bundle=new Bundle();
bundle.putString("clipboard", "Android");
i.putExtras(bundle);   
startActivity(i); 
```

Activity 2 (under onCreate):

```
Bundle bundle=getIntent().getExtras();
if(bundle !=null)
{
    String name=bundle.getString("clipboard");
    EditText edttxt=(EditText)findViewById(R.id.edtbox);
    edttxt.setText(name);
} 
```

However, Activity 2 fails to be loaded and Eclipse throws a crash. I guess I haven't sent clipboard text to EditText of Activity 2 but don't know how to do.

I wonder whether you guys can help me to solve this problem. Thank you very much in advance.

=====

**UPDATED:**

Here is the [Eclipse LogCat](https://dl.dropbox.com/u/15034088/Others/Temps/logcat.rtf):

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:13:44.270

试试这个::

**活动 1（点击按钮）：**

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
clipboard.setText("Text to copy");
Sting cpytext = clipboard.getText();

Intent i = new Intent(Activity1.this, Activity2.class);
//Bundle bundle=new Bundle();
//bundle.putString("clipboard", cpytext);
i.putExtra("clipboard", cpytext);   
startActivity(i); 
```

**活动 2（在 onCreate 下）：**

```
if(getIntent().hasExtra("clipboard")) {
     String name = (getIntent().getStringExtra("clipboard"));
     EditText edttxt=(EditText)findViewById(R.id.edtbox);
     edttxt.setText(name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:31:16.493

我不明白你为什么不能这样使用......

```
 ====>At Activity 1

 Intent i = new Intent(Activity1.this, Activity2.class);
 //Bundle bundle=new Bundle();
 //bundle.putString("clipboard", "Android");
  i.putExtras("clipboard", "Android");
  startActivity(i);

 ====>At Activity 2
EditText edttxt=(EditText)findViewById(R.id.edtbox);//place edit text declaration out side of the Bundle Extras block
Bundle bundle=getIntent().getExtras();
if(bundle !=null)
{
  String name=bundle.getString("clipboard");
  edttxt.setText(name);
} 
```

# ruby-on-rails - Watir - using proxy in Firefox with authentication

> ID：11844526
> 
> 赞同：4
> 
> 时间：2012-08-07T11:02:11.087
> 
> 标签：ruby-on-rails, ruby, watir, watir-webdriver

I want to set up a proxy in Firefox with Watir. The proxy requires authentication - username and password.

I get error when I want to do the following thing:

```
profile = Selenium::WebDriver::Firefox::Profile.new
profile.proxy = Selenium::WebDriver::Proxy.new :http => "user:pass@133.212.109.502:8080" 
```

The error is:

```
ArgumentError: invalid value for Integer(): "pass@133.212.109.502:8080" 
```

What am I doing wrong? How to use proxy with authentication in Firefox properly?

Thanks for help

# android-layout - 在android中定位图像视图

> ID：11844530
> 
> 赞同：0
> 
> 时间：2012-08-07T11:02:16.930
> 
> 标签：android-layout

我希望在 android 中定位不同的图像视图。我为此使用 FrameLayout。它在三星 S3 中工作。当我在三星 Galaxy Y 中查看同一页面时，添加的最后一个图像视图位于顶部，而图像视图的其余部分没有t 出现在该页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:13:57.463

当您使用 FrameLayout 作为父级时，我不认为您将具有定位图像视图的灵活性。因此，如果您想将其定位在不同的位置，最好使用 RelativeLayout 作为父级。我从您的问题中感觉到，您可能正在使用 android:padding 或 android:layoutmargin 的硬核值。你无法在 Galaxy Y 上看到图像，因为 comp Galaxy s3 Galaxy y 是小分辨率手机。

# mysql - 对 MySQL 语句使用“常量”或“类型”

> ID：11844534
> 
> 赞同：0
> 
> 时间：2012-08-07T11:02:30.743
> 
> 标签：mysql, sql

我的数据库（在 MySQL 中）看起来像：

```
CREATE TABLE tbl1(... ,title VARCHAR(69) DEFAULT("new title"), ...);
CREATE TABLE tbl3(... ,title VARCHAR(69) DEFAULT("new title"), ...);
CREATE TABLE tbl3(... ,title VARCHAR(69) DEFAULT("new title"), ...); 
```

问题是：**有什么办法不重复 values(66,"new title") 多次？**
谢谢 ！

我已经尝试了 2 个解决方案，但它们不起作用。

1-

```
SET @title_len=69,@title_def="new title";
CREATE TABLE tbl1(... ,title VARCHAR(@title_len) DEFAULT(@title_def), ...); 
```

2-

```
CREATE TYPE TitleType FROM VARCHAR(69) DEFAULT("new title");
CREATE TABLE tbl1(... ,title TitleType, ...); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:22:37.880

创建第一个表，例如 -

```
CREATE TABLE tbl1(column1 INT, column2 INT); 
```

然后使用带有**LIKE选项的**[CREATE TABLE](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)语句来复制表结构 -

 **```
CREATE TABLE tbl2 LIKE tbl1;
CREATE TABLE tbl3 LIKE tbl1;
... 
```**

# javascript - js中的html5视频标签错误检测

> ID：11844540
> 
> 赞同：0
> 
> 时间：2012-08-07T11:03:03.557
> 
> 标签：javascript, jquery, html, safari, html5-video

Windows XP 中的 Safari 5 不播放视频标签。有什么方法可以检测到这是 JS。

基本上我的要求是我需要显示加载视频。如果不支持，请显示图像。所以我将视频标签放在一个 div 中，并给这个 div 一个背景图像。但是我如何检测在 js 中是否正在显示图像或正在播放视频。

谢谢Vinesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:06:16.920

如果浏览器 HTML5 视频，您可以使用此测试。

```
var supportsHTML5video = !!document.createElement("video").canPlayType; 
```

# objective-c - 如何在 UIScrollView (Obj-C) 中禁用垂直滚动

> ID：11844548
> 
> 赞同：7
> 
> 时间：2012-08-07T11:03:19.323
> 
> 标签：objective-c, ios, uiscrollview

如果可能，我想从我的 UIScrollView 禁用垂直滚动.. 我的代码如下所示.. 工作正常，除了用户可以上下滚动我相信不应该存在.. 提前谢谢..

```
 UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 100, self.view.frame.size.width, self.view.frame.size.height / 3)];   
    scroll.contentSize = CGSizeMake(scroll.contentSize.width,scroll.frame.size.height); 
    scroll.pagingEnabled = YES;
    scroll.backgroundColor = [UIColor blackColor];
    int xVal = 30;

    NSInteger numberOfViews = 5;
    for (int i = 0; i < numberOfViews; i++) {
        UILabel *testLabel1 = [[UILabel alloc] initWithFrame:CGRectMake(xVal, 0, 90, 100)];
        UILabel *testLabel2 = [[UILabel alloc] initWithFrame:CGRectMake(xVal, 20, 90, 100)];
        UILabel *testLabel3 = [[UILabel alloc] initWithFrame:CGRectMake(xVal, 40, 90, 100)];

        testLabel2.backgroundColor = [UIColor clearColor];
        testLabel2.text =@"Test1";
        testLabel2.textColor = [UIColor whiteColor];
        testLabel2.font = [UIFont boldSystemFontOfSize:12];

        testLabel1.backgroundColor = [UIColor clearColor];
        testLabel1.text =@"Test2";
        testLabel1.textColor = [UIColor whiteColor];
        testLabel1.font = [UIFont boldSystemFontOfSize:12];

        testLabel3.backgroundColor = [UIColor clearColor];
        testLabel3.text =@"Test3";
        testLabel3.textColor = [UIColor whiteColor];
        testLabel3.font = [UIFont boldSystemFontOfSize:12];

        xVal += 120;

        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(xVal, 30, 150, 130)];
        view.backgroundColor = [UIColor blackColor];

        xVal += 200;

        [scroll addSubview:testLabel1];
        [scroll addSubview:testLabel2];
        [scroll addSubview:testLabel3];
        [scroll addSubview:view];
    }

    [self.view addSubview:scroll]; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-05T05:08:03.680

在我的情况下，我无法获得滚动视图的高度（由于自动布局，我无法获得 viewDidLoad 中的高度）。您可以将其添加到委托方法中。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    self.scrollView.contentOffset = CGPointMake(self.scrollView.contentOffset.x, 0);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-07T11:30:49.783

您必须将滚动视图内容高度设置为滚动视图高度

```
`CGSize scrollableSize = CGSizeMake(scrollableWidth, yourScrollViewHeight);
[myScrollView setContentSize:scrollableSize];` 
```

* * *

 `## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T11:25:19.920

这里可能有重复

[在 UIScrollView 中禁用垂直滚动](https://stackoverflow.com/questions/5095713/disabling-vertical-scrolling-in-uiscrollview/5095989#5095989)

或者你也可以试试这个：

```
self.scrollview.contentSize = CGSizeMake(self.scrollview.frame.size.width * number_of_items, 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T11:35:59.840

假设它是一个 iPhone 应用程序，那么屏幕分辨率是**320×480**。

现在您将滚动视图的高度设置为`self.view.frame.size.height / 3`. 在这里，您的视图高度实际上是**460**而不是**480**（状态栏为 20px）。

因此，当您将另一个视图作为子视图添加到滚动视图时，它的框架会超出滚动的内容视图。因此，您需要在设置框架/内容大小时对其进行管理。

让我知道这是否适合您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T11:37:23.133

没有问题，只需更改 UIScrollView 的 contentSize 即可。增加它的宽度大小和高度应该与现在一样。此外，您还可以隐藏垂直滚动条。

```
scroll.showsVerticalScrollIndicator = NO;
scroll.contentSize = CGSizeMake(scroll.contentSize.width + xVal,scroll.frame.size.height); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T02:38:42.640

你应该这样做：

```
aScrollView.scrollsToTop = NO;
aScrollView.delegate = self;
aScrollView.contentSize = CGSizeMake(aScrollView.frame.size.width * X, aScrollView.frame.size.height/2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-06T13:32:02.363

在您的 xml 文件中有两个可用于滚动视图的属性，即水平滚动和垂直滚动。根据您的要求，您可以选中或取消选中，如果要停止垂直或水平滚动，则必须分别使滚动视图的内容大小与滚动视图的高度或宽度相同`

# android - android Jersey api客户端创建NoClassDefFoundError

> ID：11844551
> 
> 赞同：0
> 
> 时间：2012-08-07T11:03:22.287
> 
> 标签：android, jersey

我正在尝试从我的 android 应用程序中发布一个宁静的帖子。我已将 jersey-core1.13、jersey-server1.13 和 jersey client1.13 jar 文件导入到我的项目中。当我像这样创建客户端时：

```
 Client client = Client.create(); 
```

我收到运行时错误：`E/AndroidRuntime(540): java.lang.NoClassDefFoundError: com.sun.jersey.api.client.Client`

问题是什么？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:14:26.260

如果未配置 jar 文件的构建路径，则通常会出现此错误。

避免此问题的最佳方法是将所有 jar 文件保存在名为***libs***的文件夹中（创建文件夹并复制所有 jar 文件）。如果您使用的是 ADT 17+（不确定，但至少可以在 ADT 20 中使用），那么它会自动配置构建路径。

注意：从构建路径中删除所有外部 jar 文件（ADT 将自动从***libs***文件夹中检测和配置它们）

希望这对您有所帮助。

有关我描述的方法的图示说明，请参阅

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# jakarta-ee - 关于 Web 应用程序中的日志记录和错误消息

> ID：11844553
> 
> 赞同：1
> 
> 时间：2012-08-07T11:03:28.310
> 
> 标签：jakarta-ee, servlets, logging

我正在使用 Servlet/JSP 开发一个演示应用程序，并使用来自[http://logging.apache.org/log4j/1.2/的名为 log4j 的 apache 记录 JAR](http://logging.apache.org/log4j/1.2/)

**我的问题与在哪里使用日志记录有关。任何最佳实践。？**

*1 -*应该在 try/catch 中记录错误消息并抛出异常。看下面的例子？

*2 -*应该在我们需要使用 System.out.println("message") 进行调试或打印信息的地方使用它吗？

*3 -*应该在生产中使用还是仅在开发中使用？

**你如何在你的应用程序中使用它？**

**我做得对还是产生了无用的消息？**

```
try{
            con = ConnectionManager.getConnection();
            ps = prepareStatement(con, SQL_DELETE, false, values);
            int affectedRows = ps.executeUpdate();
            if(affectedRows == 0){
                log.error("delete: Deleting user failed, no rows affected");
                throw new DAOException("Deleting user failed, no rows affected.");
            }else{
                user.setId(null);
            }
        }catch(SQLException e){
            log.error("delete: " + e.getMessage());
            throw new DAOException(e);
        }finally{
            close(con, ps);
        }

try{
            Class.forName(DRIVER);

            try{
                Class.forName(DRIVER);
                log.info("Connecting database...");
                con = DriverManager.getConnection(URL, USERNAME, PASSWORD);
                log.info("Database connected!");

            }catch(SQLException ex){
                throw new RuntimeException("Cannot connect the database!", ex);
            }
        }catch(ClassNotFoundException e){
            log.error("Closing ResultSet failed: " + e.getMessage());
            System.exit(-1);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:52:00.287

记录器主要用于捕获日志文件中的调试语句、信息或错误消息。

理想情况下，您不应在 Web 应用程序的任何地方使用 System.out.println("message")，而应仅使用记录器，例如 log4j。

1.  在 try-catch 块中捕获的所有错误消息都应记录为

    if(log.isErrorEnabled()) { log.error("错误信息"); }

2.  用于调试应用程序或在日志中打印一些开发信息的语句可以写成：

    if(log.isDebugEnabled()) { log.debug("调试信息"); }

或者

```
if(log.isInfoEnabled()) {
   log.info("debug message");
} 
```

在代码中添加上述格式的记录器后，您可以通过在 Log4j 配置（属性或 XML 文件）中设置日志记录级别来启用或禁用它们在日志中打印，而无需重新编译源代码。

例如，

如果日志记录级别为 DEBUG -> 调试，则信息和错误消息将记录在日志文件中。

如果日志记录级别为 INFO -> 日志文件中将仅记录信息和错误消息（无调试消息）。

如果日志记录级别为 ERROR -> 日志文件中将仅记录错误消息（没有调试或信息消息）。

理想情况下，在生产中我们将记录器级别设置为错误，而在开发中记录器级别设置为调试或信息。

Log4j 比我上面写的更强大和有用。有关更多详细信息，请参阅[Log4j 手册](http://logging.apache.org/log4j/1.2/manual.html)。

# iis-7 - Webdeploy 问题：除非管理员，否则无法部署

> ID：11844555
> 
> 赞同：24
> 
> 时间：2012-08-07T11:03:37.640
> 
> 标签：iis-7, msdeploy, webdeploy

我正在尝试使用 msdeploy 部署站点，但无法将其部署在 IIS 用户帐户下。我的管理员帐户能够成功部署。

我已采取的步骤：

1.  创建 IIS 用户帐户
2.  授予帐户访问相关网站的权限
3.  为授予 iis 用户帐户部署权限的站点设置部署
4.  确保 WMSVC 拥有物理文件夹的完全权限
5.  将 IIS 用户帐户添加到管理服务委派中的相关规则

我收到以下错误：

```
Unable to perform the operation. Please contact your server administrator to check authorization and delegation settings. 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-07T12:23:05.697

原来它是 WDeployConfigWriter 帐户的过期密码。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2019-01-21T23:44:40.783

以下更改解决了我的问题。

```
Start >> Administrative tools >> Computer Mangement. 
```

有一个名为 **WDeployConfigWriter**的用户。根据下面的链接，将密码设置为**永不过期并在 IIS 中更新。**

[https://blog.workinghardinit.work/2011/07/18/wdeployconfigwriter-account-issues-trouble-shooting-web-deploy-2-0-with-lessons-learned/](https://blog.workinghardinit.work/2011/07/18/wdeployconfigwriter-account-issues-trouble-shooting-web-deploy-2-0-with-lessons-learned/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-15T07:56:09.797

正如其他人所提到的，这通常是`WDeployConfigWriter`Windows Server 中用户密码过期的问题。

我在**重置密码**和配置**密码永不过期**时通常做的事情是不够的：

1.  去`Windows Programs and Features`
    *   选择`Uninstall for Web Deploy 3.6`
    *   现在选择`Repair`
2.  去`IIS Manager`。然后为您的 IIS 站点重新配置 Web 部署：您可以*更改*旧的 Web 部署用户的密码*或删除*该用户并创建一个新用户。
3.  接下来，前往`Start | Administrative tools | Computer Management.`
4.  然后去`Local Users and Groups`- 检查`password never expires`用户`WDeployConfigWriter`

这通常可以解决我的问题。

# xmpp - Smack Api 经常无法与 MSN 断开连接。尽管我调用了断开连接方法，但用户仍然出现在线..

> ID：11844557
> 
> 赞同：1
> 
> 时间：2012-08-07T11:03:43.887
> 
> 标签：xmpp, smack, disconnect

我使用 smack 构建用于连接到 MSN 和 Gtalk 的 XMPP 客户端遇到了一个非常令人不安的行为。我可以成功建立连接，并且可以与我的应用程序聊天。

但在 MSN 情况下（不是 Gtalk），当我尝试断开与 MSN 服务的连接时。有时我会遇到这个异常：

```
java.lang.IllegalStateException: Not connected to server.
at org.jivesoftware.smack.XMPPConnection.sendPacket(XMPPConnection.java:445) 
```

在这个异常的捕获块中，我正在建立新的连接。然后再次发送断开连接。在这种情况下，我可以断开与 MSN 网络的连接。但是几秒钟后，用户再次出现在其好友面前。

请帮我解决这些问题。这个问题对我们的应用非常关键。

此致，

阿尔珀·奥兹达马尔

# c# - 查找字段中的 Sharepoint 计算字段

> ID：11844560
> 
> 赞同：0
> 
> 时间：2012-08-07T11:03:58.153
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我无法从 SharePoint 代码隐藏中另一个列表的查找字段中的列表访问计算字段的值。

页面上的 ListFieldIterator 向用户显示大量选项。我需要对用户所做的某些特定选择执行一些后端验证。

我有一个名为“事件类型”的列表，用户可以从中选择播放、性能、显示等。这个列表有 4 列 - 描述、启用、默认和过滤。Filtered 是一个计算列，它是根据在其他列上选择的选项生成的。

列表事件有一个列，它是对该列表的查找，并显示过滤的列。

现在在页面上，这一切都很好。选项显示给用户，他们可以进行选择。在添加计算字段之前，我可以通过执行以下操作访问所做的选择

```
SPFieldLookup eventTypeField = ListFieldIterator.Item.Fields.GetField("Event_x0020_Type") as SPFieldLookup;
if (eventTypeField.GetFieldValueAsText(ListFieldIterator.Item["Event_x0020_Type"]) == "Performance")
{
    // some other logic
    errorMessages.Add("There is an error here");                
} 
```

但是，现在当以这种方式访问​​该字段时，我只会得到一个空字符串。

如果我尝试使用

```
string value = eventFields.Item["Event_x0020_Type_x0020_1"].ToString(); 
```

然后我返回“8”，这是我选择的项目列表中的位置。（它会根据我选择的列表中的项目而变化）

这篇文章[获取计算字段的值](https://stackoverflow.com/questions/898291/sharepoint-get-value-of-calculated-field-without-manual-parsing)似乎相关，但我看不到从查找字段中获取计算字段的明显方法。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:16:50.947

事实证明，当使用查找列或带有计算字段的查找列时，就像我一样，我做错了事情。[这篇](http://social.technet.microsoft.com/Forums/lt/sharepoint2010programming/thread/ddc8a7a2-b83e-4f60-8912-2d39f5195a24)文章让我找到了解决方案。代码也在下面。

本质上，我需要访问存储在 ListFieldIterator 控件中的值，而不是项目中的值。下面的代码（来自上面的链接）提供了一个很好的方法来做到这一点。

```
public static List<T> GetControlsOfType<T>(this ControlCollection controls)
{
  List<T> resultList = new List<T>();
  foreach (Control control in controls)
  {
    if (control is T)
      resultList.Add((T)((object)control));
    if (control.Controls.Count > 0)
    {
      resultList.AddRange(GetControlsOfType<T>(control.Controls));
    }
  }
  return resultList;
}

public object GetFieldValue(ListFieldIterator lfi, string fieldName)
{
  FormField formField = lfi.Controls.GetControlsOfType<FormField>().Where(f => f.FieldName == fieldName).FirstOrDefault();
  if (formField == null) return null;
  return formField.Value;
} 
```

# ftp - 如何使用通配符在水壶勺上获取 ftp 文件

> ID：11844561
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:01.667
> 
> 标签：ftp, wildcard, pentaho, kettle

我有一份使用获取 ftp 文件的工作，我正在使用此通配符来获取所有 xml.zip 文件 .*.zip

工作正常，但下载所有文件。我尝试了一个通配符来只下载具有这种模式的文件：.outsideXXXXXX.xml.zip（没有成功）。

```
 .outside\*.zip 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:58:40.847

最后我找到了解决方案：

```
.outside.*\.zip 
```

仅供参考：pentaho pdi 正则表达式基于 java.util.regex 包。创建正则表达式的确切语法在 java.util.regex.Pattern javadoc 中定义。

[https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:13:07.940

`outside*\\.zip`注意（正确）和（不正确）之间的区别`.outside\\*.zip`？

你需要逃跑`"."`，而不是`"*"`

# c++ - 如何在 Windows 上的 qt 中获取 USB 设备的供应商 ID 和 PID？

> ID：11844563
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:10.700
> 
> 标签：c++, windows, qt, winapi, usb

我在 Windows 上使用 qt。我的程序需要知道插入的 USB 闪存驱动器的供应商 ID 和产品 ID。

我试图从[这个主题](https://stackoverflow.com/questions/2935184/how-to-get-vendor-id-and-product-id-of-a-plugged-usb-device-on-windows)实现示例，但我在[WinUsb_Initialize 函数](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540277%28v=vs.85%29.aspx)上遇到分段错误。

这是我的代码：

```
HANDLE hDevice = CreateFileA("\\\\.\\PhysicalDrive1", GENERIC_WRITE | GENERIC_READ ,
     FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, FILE_FLAG_OVERLAPPED, 0);

if(hDevice == INVALID_HANDLE_VALUE)
{
    qDebug() << "hDevice - INVALID_HANDLE_VALUE";
}
else
{
    qDebug() << "hDevice handle ok";
    PWINUSB_INTERFACE_HANDLE phWinUSBHandle;
    BOOL result = false;
    result = WinUsb_Initialize(hDevice, phWinUSBHandle); //seg
} 
```

我需要 phWinUSBHandle 来使用[WinUsb_GetDescriptor](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540257%28v=vs.85%29.aspx)函数。

我将非常感谢任何帮助。也许有人知道在 Windows 中获取供应商 ID 和产品 ID 的其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:12.753

你提到`libusb`图书馆了吗？它可能会帮助你。

# qt - 检查 Qt 应用程序中是否打开了任何窗口

> ID：11844566
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:17.513
> 
> 标签：qt

我在 Qt 中有一个应用程序，它有一个托盘图标。如果应用程序中打开了任何窗口，我不想打开托盘图标菜单。实际上，我想防止用户同时打开多个窗口。能否请你帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:57:12.600

只需检查是否使用 isHidden() 方法打开了任何窗口。如果您没有窗口列表，您可以使用 QApplication::topLevelWidgets()，但这不是最好的主意。

# mysql - MySQL查询中使用了两张表时如何引用一张表？

> ID：11844569
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:20.170
> 
> 标签：mysql, join, multiple-tables

到目前为止，我一直在 MySQL 查询中使用一个表，但现在我在查询中使用两个表来仅返回用户的收藏夹，即：

```
$query1="SELECT tracks.id, favourites.track FROM tracks, favourites WHERE tracks.id = favourites.track";
$result=mysql_query($query1) or die(mysql_error()); 
```

我想知道如何仅引用轨道表中的行中的列来构造来自该查询的变量。以前我用过：

```
while ($row = mysql_fetch_array($result)) {
$title = $row['title'];
...etc
} 
```

但显然这需要调整以仅引用轨道表中的行，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:14:42.983

您可以使用以下方法执行相同操作：

```
$query1="SELECT T.id as Tid, F.track , T.title as Title FROM tracks T inner join favourites F ON T.id = F.track";
 $result = mysql_query($query1);
 while ($row = mysql_fetch_object($result)) 
 {
     $title = $row->Title;
     $tid = $row->Tid;
     /*...etc...*/
 } 
```

# c# - 如何在服务 exe 启动期间找到我的服务名称

> ID：11844571
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:28.957
> 
> 标签：c#, windows, service

我想部署一个提供 Web 服务的 exe，并且能够多次启动它（每个都作为单独的 Windows 服务）。exe 的每个实例都需要能够加载不同的配置文件（例如，它可以侦听不同的端口，或使用不同的数据库）。

理想情况下，我不想将 exe 安装在多个文件夹中，只需有多个配置文件。

但是，似乎没有办法找到 Windows 正在启动的服务名称。

我看过 [Windows 服务如何确定其服务名称？](https://stackoverflow.com/questions/1841790/how-can-a-windows-service-determine-its-servicename) 但它似乎对我不起作用，因为在启动期间，正在启动的服务的进程 ID 为 0。

我想我问得太早了。我的代码执行以下操作：

Main 设置当前目录并构造一个 WebService 对象（ServiceBase 的子类）

WebService 对象构造函数现在需要设置其 ServiceName 属性，并使用[Windows 服务如何确定其 ServiceName？](https://stackoverflow.com/questions/1841790/how-can-a-windows-service-determine-its-servicename)尝试找到正确的名称。但是，此时正确的 servicename 的 processid 仍然是 0。

在此之后，Main 将构建一个包含 (1) ServiceBase 的数组，其中包含 WebService 对象，并在该数组上调用 ServiceBase.Run。此时服务名称需要正确，因为一旦服务运行，它可能不会更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:13:58.780

[在阅读https://stackoverflow.com/a/7981644/862344](https://stackoverflow.com/a/7981644/862344)后，我找到了实现目标的替代方法

在安装 web 服务期间，安装程序（恰好是同一个程序，但带有“install”的命令行参数）知道要使用哪个设置文件（因为有一个命令行参数“settings=” ）。

链接的问题显示有一种简单的方法可以在每次启动时将命令行参数传递给服务，方法是覆盖 Installer 类的 OnBeforeInstall（和 OnBeforeUninstall）方法。

```
protected override void OnBeforeInstall(System.Collections.IDictionary savedState) {
    if (HasCommandParameter("settings")) {
        // NB: Framework will surround this value with quotes when storing in registry
        Context.Parameters["assemblypath"] += "\" \"settings=" + CommandParameter("settings");
    }
    base.OnBeforeInstall(savedState);
}

protected override void OnBeforeUninstall(System.Collections.IDictionary savedState) {
    if (HasCommandParameter("settings")) {
        // NB: Framework will surround this value with quotes when storing in registry
        Context.Parameters["assemblypath"] += "\" \"settings=" + CommandParameter("settings");
    }
    base.OnBeforeUninstall(savedState);
} 
```

我发现框架中的某些内容在将**Context.Parameters["assemblypath"]**值存储在注册表中之前（在**HKLM\System\CurrentControlSet\Services\\ImagePath 处**）用引号括起来，因此有必要添加 ' **" "** ' 在现有值（即 exe 路径）和参数之间。

# mysql - mysql引用聚合表列名没有别名

> ID：11844572
> 
> 赞同：1
> 
> 时间：2012-08-07T11:04:36.800
> 
> 标签：mysql

我做了

```
创建表 tmp select min(xxx_id) from xxx group by y with count(*)>1;

```

现在我需要将此 tmp 表与另一个表连接起来，但是如何引用 tmp 表中唯一的列？

```
select * from table2 s, tmp t where s.xxx_id=t.xxx_id?

```

显然行不通，应该用什么替换 t.xxx_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:07:43.147

您需要将该列括在引号中，如下所示：

```
select * from table2 s, tmp t where s.xxx_id = t.`min(xxx_id)`; 
```

但最好为列提供别名，因为它不会造成混淆：

```
create table tmp select min(xxx_id) AS min_xxx_id from xxx group by y having count(*)>1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:11:20.880

尝试这个：

```
select * 
from table2 s join tmp t  
on s.xxx_id=t.xxx_id 
```

# ruby-on-rails - Ruby on Rails 自定义路由或如何在控制器初始化之前获取 request.request_url

> ID：11844574
> 
> 赞同：0
> 
> 时间：2012-08-07T11:04:44.177
> 
> 标签：ruby-on-rails, ruby, routes, request, uri

我试图做几个小时的事情，但我被铁路路线困住了。

所以.. 这个想法是有一些更加用户友好的 URL，例如 /Laptops 用于类别和 /Laptops/Apple-MacBook-Air-and-so-on。我还应该将此类链接用于 /MyDummyPage 等简单页面。

所以我的想法是获取 request_url 并检查我是否可以自己找到该页面。但似乎 rails 在定义路由之后和调用控制器之前正在初始化这个请求类。

如您所见，我被卡住了，看不到任何可能的解决方案。如果有人可以帮助我，我会很高兴。

先感谢您。一切顺利！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:29:48.673

（整件事修改了）

如果您想允许动态匹配以及正常的宁静路线，有几个选项 - （将其放在路线的末尾，否则它将匹配所有内容）

```
match '*raw' => 'dynamic#show' 
```

在 dynamic_controller.rb

```
def show
  parts = params[:raw].split '/'
  # do logic here to set all variables used in views
  render @resource_or_page
end 
```

您还可以在搜索功能中使用输入并重定向到该搜索的第一个结果。如果没有结果，则返回 404。

```
def show
  results = search_method_here params[:raw].sub('/', ' ')
  if results.any?
    redirect_to results.first        
  else
    raise ActionController::RoutingError.new 'Not Found'
  end
end 
```

此外，对于宁静路线中的 freindlier url，试试这个：[https ://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

* * *

我认为重要的是要意识到人们通常不会手动操作 URL，拥有可读的 url 很好，但更重要的是让他们清楚自己在做什么/去哪里。

针对您的评论，我认为您在路由方面存在误导。如果您创建 2 条路线`:category`和`:page`，它们匹配完全相同的 url，除了其中一个将其存储`params[:category]`在`params[:page]`. 为了区分它，您需要匹配不同数量的参数，例如`:category/:product`命名空间或命名空间，或者可能是指定路由路由到的 MVC 的 restful 路由。

# python - BeautifulSoup + URLLib2 没有从目标中提取所有 XML

> ID：11844575
> 
> 赞同：2
> 
> 时间：2012-08-07T11:04:44.907
> 
> 标签：python, xml, beautifulsoup, urllib2

这是我的代码：

```
import urllib2
from bs4 import BeautifulSoup

url = "http://www.sec.gov/Archives/edgar/data/1288776/000119312512312575/goog-20120630.xml"

req = urllib2.Request(url, "r")
response = urllib2.urlopen(req)
xml = response.read()

soup = BeautifulSoup(xml, features="xml")
print soup.prettify() 
```

输出仅显示来自目标的前几行 XML：

```
>>> 
<?xml version="1.0" encoding="utf-8"?>
<!-- EDGAR Online I-Metrix Xcelerate Instance Document, based on XBRL 2.1  http://www.edgar-online.com/ -->
<!-- Version:  6.17.6 -->
<!-- Round: 8321e8af-cc4a-498e-a38d-da694ed77a41 -->
<!-- Creation date: 2012-07-24T16:17:46Z -->
<xbrl xmlns="http://www.xbrl.org/2003/instance" xmlns:country="http://xbr" xmlns:iso4217="http://www.xbrl.org/2003/iso4217" xmlns:xbrll="http://www.xbrl.org/2003/linkbase" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/> 
```

任何想法如何提取所有的 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T18:52:54.130

实际上我自己也遇到了这个问题，但是在我通过 FTP 从 SEC 网站获取完整的 SGML 文档并从磁盘读取它之后。我有：

```
soup = bs4.BeautifulSoup(xbrl, ["lxml", "xml"]) 
```

我将其更改为：

```
soup = bs4.BeautifulSoup(xbrl, "lxml") 
```

...然后我就能够获得所有的 XML。我相信您的问题可能是 BeautifulSoup 函数调用中的附加 'features="xml"' 代码？这与 Inbar Rose 的回答一致，该回答对 BeautifulSoup() 函数调用没有任何附加参数。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:09:02.457

你试过用开瓶器吗？

```
import urllib2
from BeautifulSoup import BeautifulSoup

url = "http://www.sec.gov/Archives/edgar/data/1288776/000119312512312575/goog-20120630.xml"

opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]  
resource = opener.open(url)
data = resource.read()
resource.close()
soup = BeautifulSoup(data)
print soup.prettify() 
```

上面的代码对我有用。

# javascript - 在 Javascript 中使用正则表达式

> ID：11844576
> 
> 赞同：0
> 
> 时间：2012-08-07T11:04:57.267
> 
> 标签：javascript, regex

我需要检查输入的信息是否是 3 个字符长，第一个应该是`0-9`第二个`A-Z`，然后是第三个`0-9`。

我写的模式如下：

```
var pattern = `'^[A-Z]+[0-9]+[A-Z]$'`;
var valid = str.match(pattern); 
```

我对使用正则表达式进行选择、匹配和替换感到困惑。

*   在这种情况下，是`[A-Z]`只检查一个字符还是整个字符串？
*   是否`+`分开（拆分？）出字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:09:20.447

`+`表示一个或多个字符，因此可能的字符串为 ABCD1234EF 或 A3B，无效为 3B 或 A 6B

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:11:24.107

1)`+`匹配一个或多个。你想要一个

2）将您的模式声明为正则表达式文字，在正斜杠内

考虑到这两点，你的模式应该是

```
/^[A-Z][0-9][A-Z]$/ 
```

`[0-9]`另请注意，您可以通过替换为`\d`快捷方式（匹配任何数字字符）来使模式略短。

`i`3) （可选）如果您想允许任何一种情况，请在最后的斜杠后添加不区分大小写的标志。

4）如果您只想*测试*字符串与模式匹配，而不是从中检索匹配，请使用`test()`，而不是`match()`- 它更有效。

```
var valid = pattern.test(str); //true or false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:07:37.983

这是您需要的正则表达式：

```
^[0-9][A-Z][0-9]$ 
```

> 在这种情况下，[AZ] 是只检查一个字符还是整个字符串？

它只是检查 1 个字符，但一个字符可以在一个字符串中多次出现..

您应该像我一样添加 ^ 和 $ 以匹配整个字符串。

> + 是否分开（拆分？）出字符？不。

`+`符号只是表明一个字符可以重复 1 次以上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:09:12.243

“+”表示一个或多个。在您的情况下，您应该使用精确的数量匹配：

```
/^\w{1}\d{1}\w{1}$/ 
```

# git - git删除并重新创建分支

> ID：11844581
> 
> 赞同：17
> 
> 时间：2012-08-07T11:05:07.750
> 
> 标签：git

摘要：重现错误

*   创建一个分支并检查它
*   让其他人删除它并创建一个具有相同名称的新分支
*   现在做`git branch -D <branch>`和`git checkout -b <branch> --track origin/<branch>`
*   在`git pull`你得到`! [rejected] <branch> -> origin/<branch> (non-fast-forward)`

`git branch -d -r origin/<branch>`要修复它，您还必须删除远程跟踪信息

* * *

OLD：有人删除了开发分支并创建它以删除所有功能分支并再次将主分支作为基础。然后他添加了一些功能分支，但没有添加其他一些问题。

我做了一个`git branch -D develop`和`git checkout -b develop --track origin/develop`。

当我现在尝试时`git pull`，我得到一个`! [rejected] develop -> origin/develop (non-fast-forward)`

一个`git remote show origin`节目

```
Local refs configured for 'git push': 
develop       pushes to develop     (local out of date) 
```

我现在可以做一个`git fetch origin develop`，`git merge FETCH_HEAD`但后来我有一些冲突，他想推动很多事情发展。（也许旧分支提交？）`git reset --hard`我回到了 git pull 显示被拒绝消息的地方。

我如何最好地签出重新创建的分支？

编辑：即使我这样做`git branch -D develop`了，我`git pull` `! [rejected] develop -> origin/develop (non-fast-forward)`也`git remote show origin`说了一切（最新的）

编辑：起初我没有认出它，因为提交消息是相同的，但是重置后 HEAD 位于遥控器没有的 sha 上，所以仍然在“旧”分支上？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T17:34:09.030

我也必须删除跟踪分支

```
git branch -d -r origin/develop 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T11:10:35.030

你不能拉，因为它现在是另一个分支。

也许您应该从头开始并将`remote develop`分支作为新的本地分支获取！

```
git checkout -b new_develop --track origin/develop 
```

完成此操作后，您可以在本地计算机上的分支之间合并或更改。比较目录树和其他文件。

如果您已完成编辑，只需删除您的本地`develop`分支，然后将其重命名`new_develop`为`develop`.

# knockout.js - 将淘汰赛子视图模型绑定到多个视图？

> ID：11844582
> 
> 赞同：2
> 
> 时间：2012-08-07T11:05:12.150
> 
> 标签：knockout.js, single-page-application

我被困在淘汰赛 JS 绑定问题上。我有一个主视图模型，它绑定到我的单页应用程序的外壳页面。这个 masterviewmodel 控制当前可见的视图（使用 Sammy JS）。它还保存对绑定到视图的子视图模型的引用。

```
var app = function () {
    var self = this;

    self.State = ko.observable('home');

    self.Home = ko.observable(new homepageVm());
    self.User = ko.observable(new userInfoVm());
    self.Request = ko.observable(new requestVm());
}; 
```

用户视图模型有一个要绑定到的视图，如下所示：

```
<div data-bind="with: User, visible: State() === 'user'">
    .. snip ..
</div> 
```

**with:**绑定确保正确的子视图模型绑定到视图。这种方法适用于主视图和用户信息视图。

requestVm 使用向导风格的 UI，需要绑定到多个视图。这是我目前陷入困境的地方。

```
<div data-bind="with: Request, visible: State() === 'request-step-1'">
    .. snip ..
</div>

<div data-bind="with: Request, visible: State() === 'request-step-2'">
    .. snip ..
</div>

<div data-bind="with: Request, visible: State() === 'request-step-3'">
    .. snip ..
</div> 
```

当我启动站点时，绑定似乎工作正常（Knockout 没有引发任何绑定错误）但是当我开始通过 VM 推送数据时，它们不再更新 UI，好像所有绑定都被破坏了（即使是那些有绑定到它们的单个视图，例如用户 VM）。

如果我只包含向导第一步的视图，这让我在请求 VM 上只有一个绑定而不是三个，那么应用程序中的所有绑定都会重新开始工作！

我不知道是什么原因造成的。淘汰赛只能将一个可观察对象绑定到一个元素吗？还是我在尝试不受支持的东西？

**更新：** 我的虚拟机中的 observableArrays 似乎发生了一些事情。与简单可观察对象的绑定工作正常。

这是其中一个虚拟机：

```
 function userInfoVm() {
    var self = this;

    self.UserName = ko.observable();

    self.Beun = ko.observable();

    self.LoadingUser = ko.observable(false);
    self.LoadingObjects = ko.observable(false);

    self.UserData = ko.observableArray([]);
    self.UserObjects = ko.observableArray([]);

    self.LoadUser = function (userName) {

        self.LoadingUser(true);

        $.get('UserData/UserDetail', { username: userName }, function (details) {
            self.UserData(details);
            self.Beun(JSON.stringify(details));

            self.LoadingUser(false);
        });
    };

    self.LoadObjects = function (userName) {

        self.LoadingObjects(true);

        $.get('UserData/UserObjects', { username: userName }, function (objects) {
            alert(JSON.stringify(objects));
            self.UserObjects([objects]);
            self.LoadingObjects(false);
        });
    };

    self.Load = function (userName) {
        self.UserName(userName);

        self.UserData(null);
        self.UserObjects(null);

        self.LoadUser(userName);
        self.LoadObjects(userName);
    };
}; 
```

以及正在使用来自所述 VM 的数据的视图：

```
<div data-bind="with: User, visible: State() === 'user'">
    <h1>
        <button class="backbutton" onclick="history.back();">
        </button>
        Details for user <span data-bind="text: UserName"></span>
    </h1>
    <div class="display detail">
        <table>
            <tbody data-bind="foreach: UserData">
                <tr>
                    <td class="property" data-bind="text: Key">
                    </td>
                    <td class="value" data-bind="text: Value">
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="loader" data-bind="visible: LoadingUser">
            Please wait while we process your request...
        </div>
    </div>
    <div class="display detail">
        <h1>
            Objects and services for user <span data-bind="text: UserName"></span>
        </h1>
        <table class="detailtable">
            <tbody data-bind="foreach: UserObjects">
                <tr>
                    <td class="value">
                        <a class="service" data-bind="text: Value, attr: { href: '#/service/' + Key }" href="#">
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="loader" data-bind="visible: LoadingObjects">
            Please wait while we process your request...
        </div>
    </div>
    Details for user <span data-bind="text: Beun"></span>
</div> 
```

数组不会通知 UI 提供给它们的数据。其他 observables，包括包含来自 AJAX 调用的字符串化数据的 .Beun 会按预期更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:39:35.490

您从服务器接收的内容是什么？

如果您想手动操作，您可以尝试使用 eval(objects) 将数据（字符串）转换为对象，并使用 foreach 循环中的映射插件（knockout.mapping.js）将其转换为可观察数组。

```
var data = '[{ "Id": 1, "Titel": "Title1", "Description": "Description 1" }, { "Id": 2, "Titel": "Title 2", "Description": "Description 2" }, { "Id": 3, "Titel": "Title 3", "Description": "Description 3"}]';
//fist convert your string to JS-objects using eval() ; then to observableArray using mapping pluging
self.UserObjects = ko.mapping.fromJS(eval(data)); 
```

# ruby-on-rails - 为什么 form_tag 生成带有错误 url 的表单（没有路由匹配 [POST] “/assets”）

> ID：11844583
> 
> 赞同：0
> 
> 时间：2012-08-07T11:05:15.440
> 
> 标签：ruby-on-rails, forms, controllers

我看了一些关于这个问题的帖子，但我不知道如何解决这个问题。

我有一个索引页，我有表单，我将使用它从它的参数哈希中获取它们。

这是表格：

```
 <%= form_tag(:action => '/show', :method => "get") do %>
   <%= datepicker_input "report","start_date", :dateFormat => "dd/mm/yy" %>
   <%= datepicker_input "report", "end_date", :dateFormat => "dd/mm/yy"%>
   <%=  submit_tag "Run Report", :class => "btn super", :id => "btn "%>
   < %end %> 
```

和输入的名称：

```
 <input id="report_start_date" name="report[start_date]" size="30" type="text" class="hasDatepicker">
  <input id="report_end_date" name="report[end_date]" size="30" type="text" class="hasDatepicker"> 
```

但它正在生成这样的 URL：

```
 action="/assets?action=%2Fshow&controller=financial_reports&method=get" 
```

另外，我需要将参数值传递给索引控制器，如下所示：

```
def index
 start_date = params[:start_date]
 end_date = params[:end_date]
  @financial_reports = current_user.financial_reports#.where(:created_at => the_start.to_date..the_end.to_date)
end 
```

但它当然给了我错误'nilClass 的未定义方法'。

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:32:43.030

您最后一行中 < 和 & 之间的空格是 SO 中的错字吗？否则 Ruby 可能会把事情搞砸，因为表单标签在另一个地方结束，而不是你想象的......

# c# - 将椭圆映射到 kinect sdk 1.5 中的关节

> ID：11844585
> 
> 赞同：0
> 
> 时间：2012-08-07T11:05:29.700
> 
> 标签：c#, c#-4.0, kinect

我想将一个椭圆映射到手关节。椭圆必须随着我的手关节移动而移动。

请提供一些参考链接，帮助我使用 kinect Sdk 1.5 进行程序。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:02:22.310

尽管 @Heisenbug 可以工作，但 WPF 中有一种更简单的方法。您可以在[Channel 9 的 Skeleton Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)找到有关它的教程。基本上你需要一个画布，不管你想要多少椭圆。这是代码 XAML

```
 <Window x:Class="SkeletalTracking.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="600" Width="800" Loaded="Window_Loaded"  
    Closing="Window_Closing" WindowState="Maximized">       
<Canvas Name="MainCanvas">
    <Ellipse Canvas.Left="0" Canvas.Top="0" Height="50" Name="leftEllipse"  Width="50" Fill="#FF4D298D" Opacity="1" Stroke="White" />
    <Ellipse Canvas.Left="100" Canvas.Top="0" Fill="#FF2CACE3" Height="50" Name="rightEllipse" Width="50" Opacity="1" Stroke="White" />
    <Image Canvas.Left="66" Canvas.Top="90" Height="87" Name="headImage" Stretch="Fill" Width="84" Source="/SkeletalTracking;component/c4f-color.png" />
    <Ellipse Canvas.Left="283" Canvas.Top="233" Height="23" Name="leftknee" Stroke="Black" Width="29" />
    <Ellipse Canvas.Left="232" Canvas.Top="233" Height="23" Name="rightknee" Stroke="Black" Width="30" />
</Canvas>
</Window> 
```

在这里，我使用了 4 个椭圆（膝盖、手）和一个图像（头部）。基本代码就在这里：

```
 private void ScalePosition(FrameworkElement element, Joint joint)
    {
        //convert the value to X/Y
        //Joint scaledJoint = joint.ScaleTo(1280, 720); 

        //convert & scale (.3 = means 1/3 of joint distance)
        //note you need to have Coding4Fun
        Joint scaledJoint = joint.ScaleTo(1280, 720, .3f, .3f);

        Canvas.SetLeft(element, scaledJoint.Position.X);
        Canvas.SetTop(element, scaledJoint.Position.Y);
    } 
```

这是这个程序的关键。它从关节获取位置并将元素位置更改为那里。下一部分也很重要，您将执行以下操作：

```
 void GetCameraPoint(Skeleton first, AllFramesReadyEventArgs e)
    {

        using (DepthImageFrame depth = e.OpenDepthImageFrame())
        {
            if (depth == null ||
                kinectSensorChooser1.Kinect == null)
            {
                return;
            }

            //Map a joint location to a point on the depth map
            //head
            DepthImagePoint headDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.Head].Position);
            //left hand
            DepthImagePoint leftDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.HandLeft].Position);
            //right hand
            DepthImagePoint rightDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.HandRight].Position);

            //Map a depth point to a point on the color image
            //head
            ColorImagePoint headColorPoint =
                depth.MapToColorImagePoint(headDepthPoint.X, headDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);
            //left hand
            ColorImagePoint leftColorPoint =
                depth.MapToColorImagePoint(leftDepthPoint.X, leftDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);
            //right hand
            ColorImagePoint rightColorPoint =
                depth.MapToColorImagePoint(rightDepthPoint.X, rightDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);

            //Set location
            CameraPosition(headImage, headColorPoint);
            CameraPosition(leftEllipse, leftColorPoint);
            CameraPosition(rightEllipse, rightColorPoint);
        }
    } 
```

上面的代码将骨架点映射到深度帧，然后映射到颜色帧。

```
 Skeleton GetFirstSkeleton(AllFramesReadyEventArgs e)
    {
        using (SkeletonFrame skeletonFrameData = e.OpenSkeletonFrame())
        {
            if (skeletonFrameData == null)
            {
                return null;
            }

            skeletonFrameData.CopySkeletonDataTo(allSkeletons);

            //get the first tracked skeleton
            Skeleton first = (from s in allSkeletons
                              where s.TrackingState == SkeletonTrackingState.Tracked
                              select s).FirstOrDefault();

            return first;

        }
    } 
```

这只是获取您将选择的骨架的代码。然后，`AllFrameReadyEventArgs`您将这样做以将它们整合在一起。

```
 void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        if (closing)
        {
            return;
        }

        //Get a skeleton
        Skeleton first = GetFirstSkeleton(e);

        if (first == null)
        {
            return;
        }

        //set scaled position
        ScalePosition(headImage, first.Joints[JointType.Head]);
        ScalePosition(leftEllipse, first.Joints[JointType.HandLeft]);
        ScalePosition(rightEllipse, first.Joints[JointType.HandRight]);
        ScalePosition(leftknee, first.Joints[JointType.KneeLeft]);
        ScalePosition(rightknee, first.Joints[JointType.KneeRight]);

        GetCameraPoint(first, e);
    } 
```

如果您后面有彩色图像，您的结果将看起来最好，但我决定暂时跳过这部分。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:29:52.353

基本上，在代码中的某个地方，您将拥有一个与 Kinect SDK 交互的类：

```
private KinectSensor kinectSensor; 
```

您可以通过这种方式初始化 KinectSensor：

```
public void kinectInit()
{
    KinectSensor.KinectSensors.StatusChanged += (object sender, StatusChangedEventArgs e) =>
    {
        if (e.Sensor == kinectSensor)
        {
            if (e.Status != KinectStatus.Connected)
            {
                SetSensor(null);
            }
        }else if ((kinectSensor == null) && (e.Status == KinectStatus.Connected))
        {
            SetSensor(e.Sensor);
        }
    };

    foreach (var sensor in KinectSensor.KinectSensors)
    {
        if (sensor.Status == KinectStatus.Connected)
        {
            SetSensor(sensor);
         }
    }
} 
```

基本上，您正在定义一个委托来处理 KinectSensor 的状态更改。SetSensor 方法可能是这样的：

```
private void SetSensor(KinectSensor newSensor)
{
    if (kinectSensor != null)
    {
        kinectSensor.Stop();
    }

    kinectSensor = newSensor;

    if (kinectSensor != null)
    {
        kinectSensor.SkeletonStream.Enable();
        kinectSensor.SkeletonFrameReady += OnSkeletonFrameReady;
        kinectSensor.Start();
     }
} 
```

现在， OnSkeletonFrameReady 它是“更新功能”。每次 Kinect 传感器更新时都会连续调用它。您可以在其中检索有关关节的信息并渲染您想要的内容。

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{

    skelFrame = e.OpenSkeletonFrame();
    skeletons = new Skeleton[kinectSensor.SkeletonStream.FrameSkeletonArrayLength];          

    if (skelFrame != null)
    {
        skelFrame.CopySkeletonDataTo(skeletons);
        foreach (Skeleton skel in skeletons) {
        if (skel.TrackingState >= SkeletonTrackingState.Tracked)
        {
            //here's get the joints for each tracked skeleton
            SkeletonPoint rightHand = skel.Joints[JointType.HandRight].Position;
            ....    
         }
    }
} 
```

由于您使用的是 C# 和 Kinect，因此可用于渲染椭圆的简单库是[XNA](http://msdn.microsoft.com/en-us/centrum-xna.aspx)。

# c# - 如何将 xml 内容下载到文件中

> ID：11844588
> 
> 赞同：0
> 
> 时间：2012-08-07T11:05:48.763
> 
> 标签：c#, xml, asp.net-mvc-3

我想下载一个 xml 文件，但我在一个字符串中有一个 xml 内容。

```
 public FileResult Download(string id)//guid
    {
        string fid = Convert.ToString(id);

        var model = service.GetAllDefinitions().First(x => x.ID == id);            
        var definitionDetails = new StatisticDefinitionModel(model);
        var definition = definitionDetails.ToXml;
         //in this definition i have xml content not a path
        string fileName = definitionDetails.Name + ".xml";
        string contentType = "text/xml";

        return File(definition , contentType);
    } 
```

但这不起作用，出现非法路径之类的错误。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:15:31.747

**编辑** 只有第一个选项有效。此外，为客户端指定默认文件名：

```
 return File(Encoding.UTF8.GetBytes(definition), contentType, "somefilename.xml"); 
```

# android - 安卓模拟器权限

> ID：11844590
> 
> 赞同：4
> 
> 时间：2012-08-07T11:05:55.437
> 
> 标签：android

Android 模拟器在运行使用保护功能（如拨号等）的应用程序时不要求任何许可。是否仅在移动设备上而不是在模拟器上运行时才要求用户同意？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T11:10:53.693

安装时询问权限，一旦安装应用程序，它将使用安装时询问的手机的所有功能。

所以在模拟器上，你只需点击运行按钮，它就会自动安装，这就是你认为它没有请求许可的原因。

如果您进入 Settings->Applications->YourApp，您将看到您的应用将使用的权限的详细信息。

# php - Wordpress - 下一个和上一个链接不再有效

> ID：11844591
> 
> 赞同：0
> 
> 时间：2012-08-07T11:06:00.820
> 
> 标签：php, wordpress

在我的页面上，我正在使用下一个和上一个帖子链接功能，它们工作正常，但我刚刚注意到它们已损坏并且不再可点击。

```
previous_post_link('%link','<img id="prev" src="images/prev.png" alt="previous" />', FALSE, '');

next_post_link('%link','<img id="next" src="images/next.png" alt="next" />', FALSE, ''); 
```

页面上的来源似乎很好并且没有改变，只是图像本身不再可点击：

```
<a href="?p=117" rel="prev"><img id="prev" src="images/prev.png" alt="previous"></a>
<a href="?p=121" rel="next"><img id="next" src="images/next.png" alt="next"></a> 
```

有没有人有任何想法？

唯一奇怪的是，我在图像上使用相对定位将它们移动到我想要它们的位置，所以当我检查元素时，`a`标签出现在距离实际图像数英里的地方，但我确信情况就是这样之前也是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:18:32.330

您的 HTML 代码很好，所以问题应该出在您的 CSS 上。尝试删除相对定位以查看它们是否变得可点击，仅使用这么多代码就无法为您提供更多帮助。

# jsf - c:为 bean 属性设置

> ID：11844595
> 
> 赞同：5
> 
> 时间：2012-08-07T11:06:15.687
> 
> 标签：jsf, properties, jstl, managed-bean

我正在寻找一些用于在 JSF 托管 bean 中设置属性的代码。我的第一个想法是这样的：

```
<c:set var="#{loginBean.device}" value="mobil"></c:set> 
```

这意味着我想将属性设置为不需要单击按钮`device`的值。`"mobil"`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T11:39:35.690

是的，您可以为此目的使用 c:set。

```
<c:set value="mobil" target="#{loginBean}" property="device" /> 
```

文档：[http ://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/c/set.html](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/c/set.html)

但是，设置静态值很少有意义。您可能会考虑直接在托管 bean 类中设置默认值。同样在可维护性方面，因为您可以在 Java 代码中比在视图层中更好地处理常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:26:44.043

我认为您想要 JSF 标记子标记 setPropertyActionListener。您可以将其设置为任何 ActionComponent 中的子标记。

```
<h:anyActionComponent id="component1">
  <f:setPropertyActionListener target="#{loginBean.device}" value="mobil" />
</h:anyActionComponent> 
```

**更新：**

我最初误解了用户问题。他们有一个页面，并且他们希望在页面加载时设置一个属性。有几种方法可以做到这一点，但两者都有点不同。如果要在每次回发后将属性设置为值，则可以在 ManagedBean 方法上使用 @PostConstruct 注释。

```
@PostConstruct
public void initializeStuff() {
  this.device = "mobil";
} 
```

现在，如果我有一个 ViewScoped 或 SessionScope bean 需要在页面加载时使用默认值初始化一次，那么您可以设置一个阶段生命周期事件，该事件将在每次回发后运行并检查页面是否应该初始化.

**mah.xhmtl:**

```
<f:event listener="#{loginBean.initialize()}" type="preRenderView" /> 
```

**登录豆：**

```
public void initialize() {
  if (this.device == null)
    this.device = "mobil";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:47:44.173

我无法评论：如果您需要在页面加载时准备好值，您可以使用托管 Bean 直接初始化值或使用其构造函数或 @PostConstruct 来做同样的事情。

```
 @ManagedBean
     @ResquestScoped
     public class LoginBean {
          private String device = "some value";
          //Using Constructor
          public LoginBean() {
               device = getvalueFromSomewhere();
          }

          //Using PostConstruct
          @PostConstruct
          public void init() {
               device = getvalueFromSomewhere();
          }

     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T08:54:10.057

您可以通过另一个 ManagedBean 进行设置，而不是在 xhtml 文件中设置值。例如，如果您有管理 page1.xhtml 的 managedBean1 和管理 page2.xhtml 的 managedBean2。如果 page1.xhtml 包含 page2.xhtml，例如：

```
<ui:include src="page2.xhtml"/> 
```

在 managedBean1 你可以在顶部

```
@ManagedProperty(value = "#{managedBean2}")
private ManagedBean2 managedBean2; 
```

在 PostConstruct 中

```
@PostConstruct
public void construct() {
    managedBean2.setProperty(...);
} 
```

无论如何为我工作...

# ios - 设置 Core-Plot 注释区域

> ID：11844597
> 
> 赞同：1
> 
> 时间：2012-08-07T11:06:22.010
> 
> 标签：ios, annotations, core-plot

我有这个：

![在此处输入图像描述](../Images/503f393ce6c3deb90b33a96e1f923ffb.png) ![在此处输入图像描述](../Images/7c88c559d3301a5a231fec920a97f6e1.png)

当我向上或向右滚动时会发生这种情况。轴设置为固定（使用约束），所以当我滚动时，注释层会一直显示，直到图形框架结束（它几乎在屏幕底部）。我可以设置注释层框架（或其他东西），所以它们留在绘图区域内吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:10:12.503

这不是自动支持的。您可以使用绘图空间委托来监视绘图空间的变化并在需要时重新定位注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:01:46.200

如果将注释添加到 CPTScatterPlot 而不是将其添加到 plotArea，则可以解决此问题。

我希望我能帮上忙

利纳德

# c# - 禁用 RichTextBox 中的滚动（c#）

> ID：11844599
> 
> 赞同：1
> 
> 时间：2012-08-07T11:06:24.153
> 
> 标签：c#, winforms, richtextbox

我编写了代码以在单独的页面中显示文本，例如 Microsoft Word，我使用一组文本框，当用户填写一个文本框时，会自动显示新框，并且光标会移动到她身上。

问题是当用户在文本框中写入最后一行时，该框会向下滚动一点，正如您将在何时运行此代码时看到的那样，我该如何禁用滚动。

编码 ：

```
 using System;
        using System.Collections.Generic;
        using System.ComponentModel;
        using System.Data;
        using System.Drawing;
        using System.Linq;
        using System.Text;
        using System.Windows.Forms;
        using System.Runtime.InteropServices;

        namespace WindowsFormsApplication1
        {
            public partial class Form1 : Form
            {
                List<myRTB> pages; // collection of our RichTextBox, use as pages

                public Form1()
                {
                    InitializeComponent();

                    pages = new List<myRTB>();
                    pages.Add(new myRTB());
                    pages[0].Width = 200;
                    pages[0].Height = 290;
                    pages[0].Location = new Point(50, 10);
                    pages[0].Name = "0";
                    this.Controls.Add(pages[0]);

                    this.Width = 300;
                    this.Height = 360;
                    this.AutoScroll = true;
                }

                public void AddPage(int correntPageIndex)
                {
                    if (correntPageIndex == (pages.Count - 1)) 
                    {
                        // create a new page
                        pages.Add(new myRTB());
                        pages[correntPageIndex + 1].Width = 200;
                        pages[correntPageIndex + 1].Height = 290;
                        pages[correntPageIndex + 1].Location = new Point(50, pages[correntPageIndex].Location.Y + 300);
                        this.Controls.Add(pages[pages.Count - 1]);
                        this.Name = (correntPageIndex + 1).ToString();
                    }

                    bool CursorInEnd = (pages[correntPageIndex].SelectionStart == pages[correntPageIndex].TextLength);

                    // Transfer the last word on the previous page, to the new page

                    int lastLineIndex = pages[correntPageIndex].GetLineFromCharIndex(pages[correntPageIndex].TextLength - 2);
                    // find the index of the first char in the last line
                    int indexOfFirstCharInLastLine = pages[correntPageIndex].GetFirstCharIndexFromLine(lastLineIndex);
                    // find the index of the last space in the last line
                    int indexOfLastSpace = pages[correntPageIndex].Text.LastIndexOf(' ', indexOfFirstCharInLastLine);

                    string restOfString; 

                    if (indexOfLastSpace < 0) // no spaces in the last line
                    {
                        restOfString = pages[correntPageIndex].Text.Substring(pages[correntPageIndex].TextLength - 1);
                        pages[correntPageIndex + 1].Text.Insert(0, restOfString);
                        pages[correntPageIndex].Text.Remove(pages[correntPageIndex].TextLength - 1);
                    }
                    else // there is spaces in the last line
                    {
                        restOfString = pages[correntPageIndex].Text.Substring(indexOfLastSpace + 1);
                        pages[correntPageIndex + 1].Text = pages[correntPageIndex + 1].Text.Insert(0, restOfString);
                        pages[correntPageIndex].Text = pages[correntPageIndex].Text.Remove(indexOfLastSpace + 1);
                    }

                    if (CursorInEnd)
                    {
                        // Move the cursor to next page 
                        pages[correntPageIndex + 1].SelectionStart = restOfString.Length;
                        pages[correntPageIndex + 1].Focus();
                    }
                }
            }

            class myRTB : RichTextBox
            {
                public myRTB()
                {
                    this.ScrollBars = RichTextBoxScrollBars.None;
                }
                protected override void WndProc(ref Message m)
                {
                    // catch the request resize message
                    if (m.Msg == (WM_REFLECT | WM_NOTIFY)) 
                    {
                        REQRESIZE rrs = (REQRESIZE)(Marshal.PtrToStructure(m.LParam, typeof(REQRESIZE)));
                        if (rrs.nmhdr.code == EN_REQUESTRESIZE)
                        {
                            if (rrs.rc.ToRectangle().Height > this.ClientRectangle.Height)
                            {
                                ((Form1)Parent).AddPage(int.Parse(this.Name));
                            }
                        }
                    }
                    base.WndProc(ref m);
                }

                [StructLayout(LayoutKind.Sequential)]
                public struct NMHDR
                {
                    public IntPtr HWND;
                    public uint idFrom;
                    public int code;
                    public override String ToString()
                    {
                        return String.Format("Hwnd: {0}, ControlID: {1}, Code: {2}",
                        HWND, idFrom, code);
                    }
                }

                [StructLayout(LayoutKind.Sequential)]
                public struct REQRESIZE
                {
                    public NMHDR nmhdr;
                    public RECT rc;
                }

                [StructLayout(LayoutKind.Sequential)]
                public struct RECT
                {
                    public int Left, Top, Right, Bottom;
                    public override string ToString()
                    {
                        return String.Format("{0}, {1}, {2}, {3}", Left, Top, Right,
                        Bottom);
                    }
                    public Rectangle ToRectangle()
                    {
                        return Rectangle.FromLTRB(Left, Top, Right, Bottom);
                    }
                }

                public const int WM_USER = 0x400;
                public const int WM_NOTIFY = 0x4E;
                public const int WM_REFLECT = WM_USER + 0x1C00;
                public const int EN_REQUESTRESIZE = 0x701;

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:17:22.587

为确保文本不会自动滚动，请查看以下类似问题的答案。

[禁用 RichTextBox 自动滚动](https://stackoverflow.com/questions/4919969/disabling-richtextbox-autoscroll)

这是您的问题的另一个很好的答案：

[防止 RichTextBox 中的自动滚动](https://stackoverflow.com/questions/626988/prevent-autoscrolling-in-c-sharp-richtextbox)

我从上面的链接中复制了代码，请确保为提供此代码的用户提供信用（它不是我的）

```
 [System.Runtime.InteropServices.DllImport("user32.dll")] 

   static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, Int32 wParam, Int32 lParam); 
   const int WM_USER = 0x400; 
   const int EM_HIDESELECTION = WM_USER + 63;

   void OnAppend(string text)     
   {         
   bool focused = richTextBox1.Focused; 
   //backup initial selection 
   int selection = richTextBox1.SelectionStart;         
   int length = richTextBox1.SelectionLength;         
   //allow autoscroll if selection is at end of text         
      bool autoscroll = (selection==richTextBox1.Text.Length);
      if (!autoscroll)         
      {  
         //shift focus from RichTextBox to some other control            
        if (focused) 
          textBox1.Focus();             
         //hide selection             
      SendMessage(richTextBox1.Handle, EM_HIDESELECTION, 1, 0);
      }          

      richTextBox1.AppendText(text);

      if (!autoscroll)         
      {             
         //restore initial selection            
         richTextBox1.SelectionStart = selection;             
         richTextBox1.SelectionLength = length;             
         //unhide selection             
         SendMessage(richTextBox1.Handle, EM_HIDESELECTION, 0, 0);             
         //restore focus to RichTextBox             
         if(focused) richTextBox1.Focus();         
      }     
   } 
```

# postgresql - 如何在首次运行时避免使用 Doctrine 2 Migrations diff 的 DROP DEFAULT 语句？

> ID：11844601
> 
> 赞同：6
> 
> 时间：2012-08-07T11:06:28.430
> 
> 标签：postgresql, symfony, doctrine-orm

我有一个现有的 PostgreSQL 数据库，其中创建了一个像这样的表：

```
CREATE TABLE product (id SERIAL PRIMARY KEY, name VARCHAR(100) DEFAULT NULL) 
```

该表在 Symfony2 项目中的 YML Doctrine2 文件中进行了描述：

```
Acme\DemoBundle\Entity\Product:
    type: entity
    table: product
    fields:
        id:
            id: true
            type: integer
            nullable: false
            generator:
                strategy: SEQUENCE
        name:
            type: string
            length: 100
            nullable: true 
```

当我第一次运行 Doctrine Migrations diff 任务时，我应该得到一个在`up`and`down`方法中没有数据的版本控制文件。但我得到的是：

```
// ...

class Version20120807125808 extends AbstractMigration
{
    public function up(Schema $schema)
    {
        // this up() migration is autogenerated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "postgresql");

        $this->addSql("ALTER TABLE product ALTER id DROP DEFAULT");
    }

    public function down(Schema $schema)
    {
        // this down() migration is autogenerated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "postgresql");

        $this->addSql("CREATE SEQUENCE product_id_seq");
        $this->addSql("SELECT setval('product_id_seq', (SELECT MAX(id) FROM product))");
        $this->addSql("ALTER TABLE product ALTER id SET DEFAULT nextval('product_id_seq')");
    }
} 
```

为什么会检测到差异？我怎样才能避免这种情况？我尝试了几种序列策略，但均未成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-09T13:10:54.020

关于这个问题的一点更新。

使用 Doctrine 2.4，解决方案是使用`IDENTITY`生成器策略：

```
Acme\DemoBundle\Entity\Product:
    type: entity
    table: product
    id:
        type: integer
        generator:
            strategy: IDENTITY
    fields:
        name:
            type: string
            length: 100
            nullable: true 
```

为了避免`DROP DEFAULT`在数据库中具有默认值的字段，`default`字段上的选项是要走的路。当然，这可以通过生命周期回调来完成，但如果该数据库被其他应用程序使用，则必须在数据库中保留默认值。

对于像默认值这样的“DEFAULT NOW()”，解决方案如下：

```
Acme\DemoBundle\Entity\Product:
    type: entity
    table: product
    id:
        type: integer
        generator:
            strategy: IDENTITY
    fields:
        creation_date:
            type: datetime
            nullable: false
            options:
                default: CURRENT_TIMESTAMP 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T05:53:16.197

Doctrine 2.0 不支持 SQL DEFAULT 关键字，并且总是会尝试删除 postgres 默认值。

我没有找到解决这个问题的方法，我只是让学说自己处理序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T16:14:42.757

这是在此处注册的已打开错误：

[http://www.doctrine-project.org/jira/browse/DBAL-903](http://www.doctrine-project.org/jira/browse/DBAL-903)

# image - 图像拼接和OCR

> ID：11844602
> 
> 赞同：0
> 
> 时间：2012-08-07T11:06:32.210
> 
> 标签：image, ocr, rounding, image-stitching

想象一根金属棒，长 20 毫米，圆形约 30 毫米。吧台上印着数字。10 个字符，高 4.5 毫米，分布在大约 120° 的圆周上。

我需要对字符执行 OCR，但文本字符在一张图像中并非全部可见。三张相距约 30° 的图像看起来还不错。

下一个问题是金属是新加工的，文字字符似乎不能很好地进行 OCR；我认为是由于缺乏真正的对比。即黑白差异。

有没有人对如何对这些字符进行 OCR 处理有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:10:31.870

你可以试试这个 ImageMagick 命令来增加“对比度”。它基本上只为每种颜色留下 2 个值（零或最大值）。低于阈值的每个值都设置为`0`，高于阈值的值设置为`255`（或者`65535`如果工作在 16 位深度）：

```
 convert  original.jpg  -threshold 50%  modified.jpg 
```

使用 的值`50%`来获得最佳结果 - 将其设置得更高或更低...根据您的输入图像，这可能已经足以获得适合 OCR 处理的图像。

# javascript - JavaScript (w/jQuery) - 当被其他元素包围时，在悬停时增长一个元素以填充容器

> ID：11844605
> 
> 赞同：0
> 
> 时间：2012-08-07T11:06:39.733
> 
> 标签：javascript, jquery, html, css

我有一个元素网格（3 x 3）形成，可以在悬停时切换可见性，很容易。

但是我的下一步是在悬停时增加所述元素以填充其容器，我假设我需要获取当前的 (x,y) 值，然后将其增长到父容器的 (x,y) 值和使用css定位，但是我采取的每一种方法都是碰壁。我在这里有一个小提琴，它演示了布局/预期的功能 - [http://jsfiddle.net/u2w7J/](http://jsfiddle.net/u2w7J/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:25:00.790

目前你的 HTML 设置方式，虽然看起来很流畅，但有点难以完成。第一次尝试是使用 .toggleClass 函数并为悬停的元素切换“box”和“miniBox”。有关演示，请参见[http://jsfiddle.net/u2w7J/6/ 。](http://jsfiddle.net/u2w7J/6/)

定位比较困难，因为 miniBox 不是绝对定位的。因此，添加动画会导致奇怪的结果（参见上面的演示）。

我建议绝对定位迷你盒子。悬停时，获取父级 div left 和 top 值并使用这些值为 miniBox 设置动画。此外，在动画期间或之前提高 z-index 以防止其他 miniBoxes 可见。

# symfony - 想在 symfony 2 中发送一封带有变量的电子邮件

> ID：11844608
> 
> 赞同：0
> 
> 时间：2012-08-07T11:07:03.223
> 
> 标签：symfony, swiftmailer

我想发送一封带有变量名的电子邮件。我创建了如下操作：

```
$product = $this->getDoctrine()
            ->getRepository('EnsNewBundle:Products')
            ->find(2);

        $message = \Swift_Message::newInstance()
        ->setSubject('Hello Email')
        ->setFrom('ucerturohit@gmail.com')
        ->setTo('ucerturohit@gmail.com')
        ->setContentType("text/html")
        ->setBody($this->renderView('EnsNewBundle:Default:index.html.twig'));
    $this->get('mailer')->send($message);

    return $this->render('EnsNewBundle:Default:index.html.twig',array('name'=>$product->getName())); 
```

这里我想`$product->getName()`用邮件传输数据。在`index.html.twig`我定义如下：

```
Id of the product 5<br/>
Name of the product {{name}} <br/>
Description Fast Internet browsing speed 
```

当我执行此操作时，我收到错误消息`undefined variable name in index.html.twig`。如果我想在发送邮件之前设置此值，我该怎么办。如果我为电子邮件正文制作硬代码，那么就没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:16:27.693

Doctrine 的方法`find()`应该返回结果集合，而不是单个对象。

您可能应该使用`findOneByXXX()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:21:29.920

我只添加了这个东西，问题就解决了。

```
 ->setBody($this->renderView('EnsNewBundle:Default:index.html.twig',array('name1'=>$product->getName()))); 
```

# sql - 如何在某些列中选择具有相等值的记录？

> ID：11844609
> 
> 赞同：2
> 
> 时间：2012-08-07T11:07:14.690
> 
> 标签：sql, database

如何为姓氏列选择具有相等值的记录？

这是表格`empl`：

```
 ide    fn     ln     debt
 3421   jed    trt    43
 354    jed    res    43
  43    ged    hjkhg  79
  73    ghghg  gfgf   79
 456    jkl    gdfg   78
 532    kkhg   vjv    23
  45    ki     vt     79
 243    k      vt     78 
```

我需要选择最后两条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:10:08.493

```
SELECT ide, fn, ln, debt
FROM empl
WHERE ln IN
(
    SELECT ln
    FROM empl
    GROUP BY ln
    HAVING COUNT(*) > 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:11:30.193

我认为这样做可以：

```
select ide, fn, ln, debt
from empl
where ln in
  (
    select ln from empl
    group by ln
    having count(1) > 1
  )
order by ln 
```

# c# - C# XML - 为什么此代码一直失败并出现 0x3A 错误？

> ID：11844610
> 
> 赞同：0
> 
> 时间：2012-08-07T11:07:15.983
> 
> 标签：c#, xml, linq, soap

我有以下代码示例：

```
PlentySoapRequest_GetAuthentificationToken username = new PlentySoapRequest_GetAuthentificationToken();

        username.Username = user_textbox.ToString();
        username.Userpass = password_textbox.ToString();

        Uri uri = new Uri("http://www.****.de/plenty/api/soap/version105/");

        XNamespace soapenv = @"http://schemas.xmlsoap.org/soap/envelope/";
        XNamespace xsi = @"http://www.w3.org/2001/XMLSchema-instance";
        XNamespace xsd = @"http://www.w3.org/2001/XMLSchema";
        XNamespace ver = @"http://www.****.de/plenty/api/soap/version105/";

        var document = new XDocument(
           new XDeclaration("1.0", "utf-8", String.Empty),
           new XElement(soapenv + "Envelope",
               new XAttribute(XNamespace.Xmlns + "xsi", xsi),
               new XAttribute(XNamespace.Xmlns + "xsd" , xsd),
               new XAttribute(XNamespace.Xmlns + "soapenv" , soapenv),
               new XAttribute(XNamespace.Xmlns + "ver" , ver),
           new XElement(soapenv + "Header"),
           new XElement(soapenv + "Body",
                   new XElement(ver + "GetAuthentificationToken",
                        new XElement("oLogin" + xsi + "type" + ver + "PlentySoapRequest_GetAuthentificationToken",
                            new XAttribute("Username" + xsi + "type" + xsd + "string", username.Username),
                            new XAttribute("Userpass" + xsi + "type" + xsd + "string", username.Userpass)
                           )
                        )
                    )
                )
               ); 
```

我一直在第一行收到错误消息。“大量的请求……”

```
The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

如果我注释掉这些行，它会一直说它在代码的第一行。

**编辑：** xml 应该如下所示：

```
<soapenv:Body>
  <ver:GetAuthentificationToken>
     <oLogin xsi:type="ver:PlentySoapRequest_GetAuthentificationToken">
        <!--You may enter the following 2 items in any order-->
        <Username xsi:type="xsd:string">apitest</Username>
        <Userpass xsi:type="xsd:string">apitest</Userpass>
     </oLogin>
  </ver:GetAuthentificationToken> 
```

所以xml-sysntax似乎有问题。我不知道如何设置**xsi:type**或**xsi:type**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:19:00.037

`"oLogin" + xsi + "type"`将创建一个带有 value 的字符串`"oLoginhttp://www.w3.org/2001/XMLSchema-instancetype"`。这不是一个有效的名字...

你需要一些更接近这个的东西：

```
var document = new XDocument(
   new XDeclaration("1.0", "utf-8", String.Empty),
   new XElement(soapenv + "Envelope",
       new XAttribute(XNamespace.Xmlns + "xsi", xsi),
       new XAttribute(XNamespace.Xmlns + "xsd", xsd),
       new XAttribute(XNamespace.Xmlns + "soapenv", soapenv),
       new XAttribute(XNamespace.Xmlns + "ver", ver),
   new XElement(soapenv + "Header"),
   new XElement(soapenv + "Body",
           new XElement(ver + "GetAuthentificationToken",
                new XElement(xsi + "Login", 
                    new XAttribute(xsi + "type", "blahblah"),
                    new XElement("Username",
                        new XAttribute(xsi + "type", "xsd:string"),
                                "myUserName")
                   )
                )
            )
        )
       ); 
```

生成此 XML

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ver="http://www.****.de/plenty/api/soap/version105/">
  <soapenv:Header />
  <soapenv:Body>
    <ver:GetAuthentificationToken>
      <xsi:Login xsi:type="blahblah">
        <Username xsi:type="xsd:string">myUserName</Username>
      </xsi:Login>
    </ver:GetAuthentificationToken>
  </soapenv:Body>
</soapenv:Envelope> 
```

# c# - 其他语言的资源文件

> ID：11844614
> 
> 赞同：3
> 
> 时间：2012-08-07T11:07:25.553
> 
> 标签：c#, localization, resources

如何在现有资源文件下添加其他语言的资源？

请参阅解决方案资源管理器中的图片：

![在此处输入图像描述](../Images/f0767c465abe780219983c4ddb579ff6.png)

如果我尝试添加新的，我会得到：

![在此处输入图像描述](../Images/ea8f41a619af3c0590683698cd60e08e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:57:52.150

添加资源文件时，Visual Studio 将在文件夹级别添加它，如您所见。

为了让它显示为子节点，您需要`.csproj`直接编辑文件（您可以右键单击项目，选择“卸载项目”，然后再次右键单击并选择“编辑 .csproj” - 完成后，通过右键单击重新加载项目。或者，`.csproj`在任何文本编辑器中打开文件）。

您将获得这样的条目：

```
<Compile Include="Error.cs.Designer.cs">
  <DependentUpon>Error.cs.resx</DependentUpon>
</Compile>
<Compile Include="Error.cs.resx"> 
```

您需要将其更改为：

```
<Compile Include="Error.cs.resx">
  <DependentUpon>Error.resx</DependentUpon>
</Compile>
<Compile Include="Error.cs.Designer.cs">
  <DependentUpon>Error.resx</DependentUpon>
</Compile> 
```

这将把两者都放在`Error.cs.resx`节点`Error.cs.Designer.cs`下`Error.resx`。

无法在解决方案资源管理器中直接执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:05:35.003

是否要求其他语言资源文件在当前文件之下？否则你可以创建这样的东西：

![翻译](../Images/aff33e85848b1b79ab4b9a07f6ec1131.png)

这将自动用于翻译。

.cs 不是翻译文件，它是支持 resx 文件的类文件。

# php - 如何将日期时间字符串转换为 UTC？

> ID：11844617
> 
> 赞同：-6
> 
> 时间：2012-08-07T11:07:41.247
> 
> 标签：php, datetime

我如何转换这样的日期时间字符串：`2012-09-03 22:00`US Estern to UTC timezone?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:12:05.823

您应该查看[`DateTime`](http://php.net/manual/en/book.datetime.php)文档中的对象及其相关功能。

如果您的输入日期已经是字符串格式，[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)将帮助您创建对象可以使用的纪元类型整数日期。之后，它只是[`getTimezone()`](http://www.php.net/manual/en/datetime.gettimezone.php)and [`setTimezone()`](http://www.php.net/manual/en/datetime.settimezone.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:20:44.667

您可以将时间戳从 DB 转换为纪元时间，`strtotime`并将它们包装在一个特殊的 CSS 类中：

```
<span class="timestamp"><?php echo strtotime('2012-09-03 22:00'); ?></span> 
```

然后使用一点 Javascript（jQuery 示例），将 unix epoch 动态转换为 locale datetime ：

```
 $('.timestamp').each(function(){
        var seconds = $(this).html();
        var d = new Date(1000 * parseInt(seconds));
        var t = (d.getMonth()<9 ? '0':'') + parseInt(d.getMonth()+1) + '/';
        t+= (d.getDate()<10 ? '0' : '') + parseInt(d.getDate()) + '/';  
        t+= parseInt((d.getYear()<1000 ? d.getYear()+1900 : d.getYear())) + ' ';
        t+= (d.getHours()<10 ? '0' : '') + d.getHours() + ':' + (d.getMinutes()<10 ? '0' : '') + d.getMinutes();            
        $(this).html(t);
    }); 
```

`mm/dd/yyyy hh:ii`这将以相对于浏览器时区的格式输出日期。

# android - AR：在 iPhone 屏幕上绘制点（POI 或标记）

> ID：11844621
> 
> 赞同：2
> 
> 时间：2012-08-07T11:08:07.013
> 
> 标签：android, iphone, gis, augmented-reality

关于在 iPhone 屏幕上绘图的 x 坐标计算问题。当点在 300 米范围内时，我们将所有兴趣点都拉得更近，尽管实际上它们是分散的。我什至将视口的宽度从 0.5 更改至 0.17（以度为单位将 28.647889757 转换为 10.0）。任何人都可以建议每个兴趣点都相对于实际位置正确放置。

在 AR 上计算点的标准方法（Mixare,ARToolkit）是

**使用 ARKit 计算**

```
double pointAzimuth = coordinate.coordinateAzimuth;

//our x numbers are left based.
double leftAzimuth = self.currentCoordinate.coordinateAzimuth - VIEWPORT_WIDTH_RADIANS / 2.0;

if (leftAzimuth < 0.0) {
    leftAzimuth = 2 * M_PI + leftAzimuth;
}

if (pointAzimuth < leftAzimuth) {
    //it's past the 0 point.
    point.x = ((2 * M_PI - leftAzimuth + pointAzimuth) / VIEWPORT_WIDTH_RADIANS) * 480.0;
} else {
    point.x = ((pointAzimuth - leftAzimuth) / VIEWPORT_WIDTH_RADIANS) * 480.0;
} 
```

**在混合：**

```
CGPoint point;
CGRect viewBounds = self.overlayView.bounds;
//NSLog(@"pointForCoordinate:   viewBounds.size.width = %.3f, height = %.3f", viewBounds.size.width, viewBounds.size.height );

double currentAzimuth = self.currentCoordinate.coordinateAzimuth;
double pointAzimuth = coordinate.coordinateAzimuth;

//NSLog(@"pointForCoordinate: location = %@, pointAzimuth = %.3f, pointInclination = %.3f, currentAzimuth = %.3f", coordinate.coordinateTitle, point.x, point.y, radiansToDegrees(pointAzimuth), radiansToDegrees(currentAzimuth), radiansToDegrees(pointInclination) );

double deltaAzimuth = [self deltaAzimuthForCoordinate:coordinate];
BOOL isBetweenNorth = [self isNorthForCoordinate:coordinate];

//NSLog(@"pointForCoordinate: (1) currentAzimuth = %.3f, pointAzimuth = %.3f, isNorth = %d", radiansToDegrees(currentAzimuth), radiansToDegrees(pointAzimuth), isBetweenNorth );

//  NSLog(@"pointForCoordinate: deltaAzimuth = %.3f", radiansToDegrees(deltaAzimuth));
//NSLog(@"pointForCoordinate: (2) currentAzimuth = %.3f, pointAzimuth = %.3f, isNorth = %d", radiansToDegrees(currentAzimuth), radiansToDegrees(pointAzimuth), isBetweenNorth );

if ((pointAzimuth > currentAzimuth && !isBetweenNorth) || 
    (currentAzimuth > degreesToRadians(360-self.viewRange) && 
     pointAzimuth < degreesToRadians(self.viewRange))) {

        // Right side of Azimuth            
        point.x = (viewBounds.size.width / 2) + ((deltaAzimuth / degreesToRadians(1)) * 12);  
    } else {

        // Left side of Azimuth
        point.x = (viewBounds.size.width / 2) - ((deltaAzimuth / degreesToRadians(1)) * 12);    
    } 
```

# java - Hibernate（最佳）最常见的结构

> ID：11844623
> 
> 赞同：1
> 
> 时间：2012-08-07T11:08:18.583
> 
> 标签：java, hibernate

我有一个 POJO 类，其中包含数据库中每个表的休眠注释。我的数据库也有一个 HibernateUtility，它创建了 SessionFactory。

我应该为每个数据库表创建一个管理器还是为每个数据库创建一个管理器？

在经理下，我的意思是一个类，它执行所有事务，CRUD。

哪个给我最好的表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:25:50.533

每个表都有一个 DAO 通常很有帮助。您不需要编写大量代码，因为您可以使用[通用 dao](https://www.google.com/search?q=hibernate%20generic%20dao)。

性能方面：请记住，您使用的是休眠，它没有将性能作为其支柱之一，但休眠通常会缩短开发时间。如果您需要性能，请尝试使用 myBatis 或简单的 jdbc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:26:13.670

我更喜欢为数据库中的每个表都有一个 DAO 类。我实际上有一个抽象 DAO 对象，它执行所有常见的 CRUD 操作，然后我将根据需要覆盖或添加其他查询方法。如果它全部在一个 DAO 中，我将无法重用我的 CRUD 逻辑。

实际上，我很惊讶没有每个人都使用的标准抽象 CRUD 实现 - 编写起来很简单（也许有一个维护良好的？）。我的通用 DAO 也有方便的方法来获取`EntityManagerFactory`- 在没有注入这些东西的 Java SE 环境中很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T12:26:28.080

性能与您拥有的课程数量无关。

每个数据库表的经理太多了：业务用例通常涉及多个表。

整个数据库的管理器太少：将应用程序的所有业务逻辑放在一个类中是不可维护的。

应用程序通常具有一组用例：用户管理、通知管理等。我将使用这些作为将逻辑拆分为类的一种方式。

另外，请注意，业务逻辑（我假设在您的管理器类中）应该与数据访问逻辑（DAO、存储库）分开。CRUD 通常由 DAO 负责，而业务逻辑和事务划分是在服务（管理器）层中完成的。

# javascript - 没有验证的属性上的客户端验证成功消息？

> ID：11844624
> 
> 赞同：3
> 
> 时间：2012-08-07T11:08:20.957
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, client-side-validation

我正在使用[client_side_validations gem](http://goo.gl/t2M57)来验证联系表。当字段无效时，gem 会在字段旁边显示错误消息。我还实现了一个自定义回调（[参见 Github wiki](http://goo.gl/Ozbdi)），当用户用有效信息填充字段时，在字段旁边显示成功消息。

```
// Define a callback to run whenever an attribute passes validations
clientSideValidations.callbacks.element.pass = function($element, callback) {
  console.log("Element passed", $element);
  // Allow clientSideValidations to do it's thing.
  callback();
  // Add a success message to give the user an ego lift.
  $element.closest('p').addClass('pass');
  $message = $('<span class="message">Great job!</span>');
  $element.after($message);
}; 
```

但是，当我有一个根本没有验证的字段时遇到了问题

```
class Contact < ActiveRecord::Base

  attr_accessible :name, :phone_number

  validates :name, presence: true
  # I don't need to validate the phone number in any way.
end 
```

在这种情况下，当用户在电话号码字段中切换时，`pass`回调永远不会运行。我试图使用`after`回调来代替，但我似乎也没有运行。

有没有办法强制回调在表单中的每个字段上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:57:42.527

[这不是宝石的行为。这是不可能的。](https://github.com/bcardarella/client_side_validations/issues/359)

# javascript - 如何在javascript中触发触摸事件

> ID：11844626
> 
> 赞同：0
> 
> 时间：2012-08-07T11:08:21.957
> 
> 标签：javascript, cordova

我的 phonegap 应用程序表单中有一个文本区域，例如

```
<form name="myform">
<textarea name="myTextarea" id="myTextarea"></textarea>
</form> 
```

我想在页面加载后将焦点放在这个 texarea 上，并希望键盘调出。我该如何实施？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:10:32.690

```
window.onload = function(){
   document.getElementById('myTextarea').focus();
}; 
```

# python - Matplotlib 与 TkAgg 错误：PyEval_RestoreThread: null tstate on save_fig() - 我需要启用线程吗？

> ID：11844628
> 
> 赞同：1
> 
> 时间：2012-08-07T11:08:35.187
> 
> 标签：python, c, matplotlib

我对嵌入式*Python 2.7.2 解释器*问题感到困惑。我已将解释器嵌入到*Visual C++ 2010*应用程序中，它本质上只是调用用户编写的脚本。

我的最终用户想要使用`matplotlib`- 我已经解决了许多与它对 numpy 的依赖相关的问题 - 但是当他们调用时`savefig()`，应用程序崩溃：

`**Fatal Python Error: PyEval_RestoreThread: NULL tstate`

这不是使用标准*Python 2.7.2 解释器*运行相同脚本的问题，即使使用相同的站点包，所以我的嵌入似乎肯定有问题。我打电话`Py_Initialize()`- 我需要做一些设置 Python 线程的事情吗？

我无法从这里的其他问题中得到解决方案，但我更担心这是我如何设置 Python 解释器的更广泛问题的症状。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:12:14.740

终于解决了这个问题 - 所以为了 Google 员工，我要解释发生了什么！

这仅在使用 numpy 或 matplotlib 等第三方库时发生，但实际上与我代码中其他地方的错误有关。作为我编写的软件的一部分，我按照 Python C API 文档中所示的相同基本模式扩展了 Python 解释器。

在这段代码的最后，我对我在此过程中创建的一些 Python 对象调用了 Py_DECREF 函数。我的错误是我在*借用*的引用上调用了这个函数，这是不应该的。

这导致软件在到达我用来清理的 Py_Finalize 命令时因上述错误而崩溃。删除借用引用上的 DECREF 修复了此错误。

# delphi - Delphi - 与 Indy 组件的 SSL TCP 通信

> ID：11844630
> 
> 赞同：2
> 
> 时间：2012-08-07T11:08:39.620
> 
> 标签：delphi, ssl, tcp, openssl, indy

我在 Delphi XE2 中使用 TIdSSLIOHandlerSocketOpenSSL Indy 组件通过 TCP 将数据发送到 SSL 服务器（Apple Push Notification Service）。我已经让它在一定程度上工作，但不确定我是否会以最好的方式去做。我正在做以下事情：

*   设置 SSL 属性公司。证书路径
*   调用 .Open 方法打开连接
*   检查 OnStatusInfoEx 事件中的 AType 参数，直到我得到“握手完成”
*   使用 .WriteDirect 发送数据
*   使用 .Close 关闭连接

有没有更好的方法来知道连接何时准备好发送数据？有人有直接通过 TCP 使用 TIdSSLIOHandlerSocketOpenSSL 组件的示例代码吗？我发现的示例主要用于 HTTP 调用，其中仅附加了 TIdSSLIOHandlerSocketOpenSSL 组件以保护连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:03:10.687

由于您使用的是客户端组件，因此如果服务器要对客户端的证书进行身份验证，则只需在客户端上设置证书。

否则，将 TIdSSLIOHandlerSocketOpenSSL 的 SSLOptions.Mode 设置为 sslmClient，您应该能够连接。

最好启用 VerifyMode 并使用套接字组件上的 OnVerifyPeer 事件来验证服务器证书上的指纹，以避免中间人攻击。

根据您的 Indy 版本，您可能需要将 SSLOptions Method 设置为 sslvTLSv1。一些 Web 服务器不再支持 SSLv2，Indy 9 默认支持 SSLv2。

下面是一些示例代码，演示了使用 TCP 组件通过 SSL 检索网页：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  s: String;
begin
  IdTCPClient1.Host := 'example.com';
  IdTCPClient1.Port := 443;
  IdTCPClient1.Connect;
  IdTCPClient1.WriteLn('GET / HTTP/1.1');
  IdTCPClient1.WriteLn('Host: example.com');
  IdTCPClient1.WriteLn('');
  // Retrieve all the data until the server closes the connection
  s := IdTCPClient1.AllData;
  Memo1.Lines.Add(s);
end; 
```

不要忘记将 OpenSSL 库包含在`libeay32.sll`与`ssleay32.dll`Windows 上的 EXE 相同的文件夹中。使用 Indy 10 的标准（最新）二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:04:37.733

这对我有用。我正在使用 Delphi 2010，但这可能在 Delphi XE2 上也同样有效（未经测试）。我使用 Indy 的最新版本，即版本 4774，而不是开箱即用的版本。

我在数据模块或 web 模块上有 3 个组件：

1.  TIdHTTP
2.  TIdSSLIOHandlerSocketOpenSSL
3.  TidCookieManager

在设计时将所有组件相互连接，在运行时进行以下更改：如果协议是纯 http:，则断开 TIdSSLIOHandlerSocketOpenSSL 组件。如果协议为 https:，则将 IdHTTP 的 Handler 属性设置为 IdSSLIOHandlerSocketOpenSSL。

在 SSL 选项中，将方法设置为 sslvSSLv23，将 SSLVersions 设置为 [sslvSSLv2,sslvSSLv3,sslvTLSv1,sslvTLSv1_1,sslvTLSv1_2]。我发现这些属性的其他排列不起作用。我无法解释。我只知道这适用于各种网络服务器。

从那里开始很容易。要获取 GET，只需调用 TIdHTTP 上的 Get() 方法。对于 POST，调用 Post()。参数和 Cookie 可以通过明显命名的属性访问。

我在让开箱即用的版本正确 POST 时遇到了很多麻烦，但是有了提示修订，并设置了我提到的选项，它变得轻而易举。

# c++ - 如何防止堆栈损坏？

> ID：11844631
> 
> 赞同：5
> 
> 时间：2012-08-07T11:08:43.580
> 
> 标签：c++, android-ndk, gdb

我正在尝试在 android 的本机应用程序中调试段错误。GDB 显示以下内容：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 5200]
0xbfcc6744 in ?? ()
(gdb) bt
#0  0xbfcc6744 in ?? ()
#1  0x5cfb5458 in WWMath::unProject (x=2.1136094475592566, y=472.2994384765625, z=0, mvpMatrix=@0x0, 
    viewport=@0x0, result=@0x0) at jni/src/core/util/WWMath.cpp:118
#2  0x00000000 in ?? () 
```

是否有可能获得良好的堆栈？或者找到堆栈损坏的地方？

UPD：提到的功能参考：

```
bool WWMath::unProject(double x, double y, double z, const Matrix &mvpMatrix,
         const Rect& viewport, Vec4& result) 
```

并且对简单局部变量的引用作为最后一个参数传递：

```
Vec4 far, near;
if (!unProject(x, y, 0, tMvp, viewport, near)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:28:46.693

我们没有太多信息可以参考！除了要小心寻址之外，没有避免内存损坏的一般规则。

但在我看来，你溢出了一个`float`s 数组，因为虚假地址`0xbfcc6744` [等于](http://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml)一个合理的`float`值`-1.597`，该值与 GDB 报告的其他值一致。

覆盖返回地址会导致执行跳转到该值，因此请特别查看函数的调用者`WWMath::unProject`，其局部变量在其返回地址之前，以找到有问题的缓冲区。（现在我们有了它，`near`.）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:51:49.227

编译`--fstack-protector-all`将导致您的程序在从损坏堆栈的函数返回时中止（使用信号 SIGABRT），如果该损坏包括返回地址周围的堆栈区域。

Stack-protector-all 不是一个很好的调试工具，但它很容易尝试，有时确实会遇到这样的问题。虽然它不会指出是哪一行导致了问题，但它至少会将其缩小到一个函数。一旦你有了这些信息，你就可以在 GDB 中单步执行它以查明有问题的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T19:24:29.860

仅通过从可疑代码的开头逐行执行并查找堆栈损坏的那一刻来解决此问题。（这是二维数组的丑陋指针算法。）

而且似乎还有另一种方式：尝试把所有东西都放入堆中，希望不正确的操作会导致segfault。

# android - 如何从android中的短信链接启动应用程序？

> ID：11844633
> 
> 赞同：0
> 
> 时间：2012-08-07T11:08:45.397
> 
> 标签：android

我想通过短信提供链接来启动安装在手机中的应用程序。有人有想法吗？

它在模拟器上工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:19:27.740

有很多资源可以做到这一点。Twitter API 还使用一个回调链接来启动应用程序，因为该应用程序已注册以启动该意图，或者至少在单击或关注该链接时为用户提供使用该应用程序。

[在 Android 浏览器中创建一个链接来启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app)

[从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

[Android Docs - 意图和意图过滤器](http://developer.android.com/guide/components/intents-filters.html)

# javascript - Android 浏览器 - 本地主机通信（电话微型网络服务器）

> ID：11844636
> 
> 赞同：1
> 
> 时间：2012-08-07T11:08:51.400
> 
> 标签：javascript, android, ajax, android-browser

是否可以在 Android 手机后台运行服务上启动，该服务将在某个端口上侦听传入的本地 http 连接并与内置的网络浏览器（我不是在谈论网络视图）、Opera 或 Dolphin 浏览器进行通信通过捕获所有此类本地主机调用 - `http://localhost:8081/serviceCall`？

目标是做一个运行在安卓手机上的微型网络服务器，它可以向网络浏览器提供一些浏览器无法访问的信息。但我不确定是否有一些安全限制等。

BR彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:28:21.263

技术上可行吗？当然。

明智吗？仅当您是安全专家或拥有大量法律辩护基金时。您将不只是将数据发送到“内置 Web 浏览器”，而是发送到任何选择发出 HTTP 请求的应用程序。

# javascript - 对来自 XPathEvaluator 的对象使用 setAttribute()

> ID：11844638
> 
> 赞同：2
> 
> 时间：2012-08-07T11:08:58.050
> 
> 标签：javascript, css, firefox, xpath

我在对象上使用`evaluate()`函数时遇到了一些麻烦。`XPathEvaluator()`我的代码如下所示：

```
var evaluator = new XPathEvaluator();
var result = evaluator.evaluate("//div[@id='header']/div[4]", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
result.setAttribute("style", "background: red; outline: blue solid thick;"); 
```

`evaluate()`不要返回函数可以使用的对象`setAttribute()`。我读了[https://developer.mozilla.org/en-US/docs/Using_XPath](https://developer.mozilla.org/en-US/docs/Using_XPath)。如何获得可以使用的正确对象`setAttribute()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:29:17.017

您可以`setAttribute`在元素节点上使用。该`evaluate`方法不返回元素节点或节点列表，而是为您提供[XPathResult](http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-singleNodeValue)对象。所以你要

```
var div = document.evaluate("//div[@id='header']/div[4]", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
if (div !== null) {
  div.setAttribute("attribute-name", "attribute-value");
} 
```

# python - 在 Python 中，当类不在范围内时，对象上的函数如何仍然可用？

> ID：11844643
> 
> 赞同：4
> 
> 时间：2012-08-07T11:09:11.047
> 
> 标签：python

例如，仍然是下面的方法

```
def func(value):
     class A:
         x = 2
         def __init__(self, value):
           A.x = value
         def print_x(self):
           print self.x
     return A(value)

a = func(4)
b = func(5) 
```

现在你会发现`a.print_x()`prints `4`。但`type(a)`会给予`'instance'`。当类不在范围内时，print_x 方法如何仍然附加到对象？

其次，您会发现在`a.print_x()`使用新参数再次调用 func 方法时，不会改变的值`'5'`。

调用 func 方法时，python 是否为同一个类创建不同的类对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:21:57.020

在 Python 2.x 中，如果类不继承自其他任何东西，则应*始终*让它们继承自。`object`这是因为大约在 Python 2 生命周期的一半左右，所有类都被放置在同一个继承树中（因此一切都是对象）。为了向后兼容，他们不能强迫这种情况发生，所以你必须自己做。

如果您从中`A`继承，`object`那么一切正常。请注意，不在主要范围内的事实`A`并没有说明解释器是否知道它。事实上，解释器知道很多不在主范围内的东西，因为它知道*程序中的所有东西*！

您应该清楚 和 的类`a`是`b`不同*的*类，都命名为`A`. 您可以这样做，因为它们不在主要范围内，因此没有名称冲突。因此有*两个*类属性称为`x`，每个版本都有一个 class `A`，因此没有理由更改一个应该修改另一个。如果您希望 的两个实例都`A`引用*同一个*类`A`，则（当然）应该将其设为`A`全局！

我假设您打算写`print A.x`而不是`print x`，所以我为您解决了这个问题。

* * *

请注意，这是一件奇怪的事情：您正在动态地创建一个具有类属性的类`x`，实例化它，然后返回带有类变量的实例。你确定你不想在里面做`self.x = value`，`__init__`并且摆脱掉线`x = 2`吗？

* * *

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> def f(value):
...     class A(object):
...             x = 2
...             def __init__(self, value):
...                     A.x = value
...             def print_x(self):
...                     print A.x
...     return A(value)
... 
>>> a = f(4)
>>> b = f(5)
>>> 
>>> a.print_x()
4
>>> b.print_x()
5
>>> a
<__main__.A object at 0x10e2e1ed0>
>>> A
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'A' is not defined
>>> a
<__main__.A object at 0x10e2e1ed0>
>>> b
<__main__.A object at 0x10e2e1fd0>
>>> type(a)
<class '__main__.A'>
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:14:48.273

该类可能不在“范围内”，但该类的实例（在您的情况下，`a`and `b`）是。由于对这些对象的引用仍然存在，因此它们不会被垃圾回收。

我建议您阅读 Python 入门书籍以获得更多说明。此外，文档非常好。

# php - 控制器和 URL 的设计理念 - Symfony2

> ID：11844645
> 
> 赞同：2
> 
> 时间：2012-08-07T11:09:13.807
> 
> 标签：php, symfony

我有一个页面（我们称之为编辑页面）有两个表单 - 第一个用于更新数据库中一个表中的信息，它有一个提交按钮“保存”，另一个用于在另一个表中保存信息，它有它自己的按钮“添加”和一个链接 - “删除”来删除现有的行。无论您按下三个保存、添加或删除中的哪一个，您都应该保持在同一页面上。您能否建议我哪种方法是制作东西的最佳方法：

1.  当您按删除时，我正在路由到另一个调用 deleteController 的 url，它在其中重定向回上一页（编辑页面）

    我想不出更好的办法，因为 Delete 是一个链接。随意提出您的建议，请告诉我的方式是非常愚蠢还是可以接受的。

2.  如何管理这两种形式？

    1.  起初我认为一个控制器可以管理这两种表单，但有一个问题 - 我不知道控制器如何准确识别按下了哪个按钮（保存或添加）来做正确的事情。当两个按钮同时按下时，它可以每次更新两个表，但我认为这是不合理的，因为大多数时候只有一个表会发生变化。

    2.  另一个想法是对 Delete 重复相同的操作 - 让两个不同的控制器执行一些操作（更新和持久化），然后重定向到编辑页面，我的目标是让用户感觉永远不会离开起始页面的 url （编辑页面）。

管理此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:39:09.693

[`SensioGeneratorBundle`](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/index.html)可以生成 CRUD 表单和控制器。它包含在 Symfony 标准版中。你应该看看它。生成的代码很容易定制并且设计良好。

* * *

1.  你做了正确的选择。您还可以将删除按钮放入一个表单中，`method="delete"`并在您的控制器中执行以下操作：

    ```
    /**
     * @Route("/{id}")
     * @Method("DELETE")
     * @ParamConverter("entity", class="MyAdminBundle:MyEntity")
     */
    public function deleteAction(MyEntity $entity)
    {
        // Do deletion
        // ...

        // Do redirection
        $this->redirect($this->generateUrl('list'));
    } 
    ```

2.  您可以设置不同的`method`（版本：`POST`，创建：）`PUT`。
    您可以设置不同`action`，然后进行重定向。

# iphone - 在特定级别计算 PList 键

> ID：11844651
> 
> 赞同：0
> 
> 时间：2012-08-07T11:09:24.310
> 
> 标签：iphone, objective-c, ios, plist

我正在尝试创建一个分组的表格视图，但是当涉及到部分中的行数时，我无法获得正确的值。从下面的列表中，“OrdreLinje”、“OrdreStatus”和“KundeLeveranse”是部分，下面的项目将是用户可见的行。因此，部分中的行数分别为 4,1,1，我的问题是如何计算这些键以产生正确的结果。

1.  根（字典）

    *   -->行（数组）
        *   ---->项目0（字典）
        *   ------> **OrdreLinje(数组)**
        *   -------->item0（字典）
        *   -------->item1（字典）
        *   -------->item2（字典）
        *   -------->item3（字典）
        *   ------> **KundeLeveranse（数组）**
        *   -------->item0（字典）
        *   ------> **OrdreStatus(数组)**
        *   -------->item0（字典）

抱歉，我确实尝试插入图像，但我的信誉不够好:)

非常感谢任何帮助，B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:15:50.347

您想要计算 Rows 数组中第一个字典中的键的数量*，还是需要 Rows 数组中**所有*字典中的键的总和？

首先，你可以这样做：

```
NSArray *rows = [rootDict objectForKey:@"Rows"];
NSInteger count = 0;
if (rows.count > 0)
{
    NSDictionary *firstRow = [rows objectAtIndex:0];
    count = firstRow.allKeys.count;
} 
```

如果要计算 Rows 数组中所有字典中所有键的计数，可以执行以下操作：

```
NSArray *rows = [rootDict objectForKey:@"Rows"];
NSInteger count = 0;
for (NSDictionary *dict in rows)
{
    count += dict.allKeys.count;
} 
```

# node.js - 获取 CouchDB 数据库中所有最近更改的文档

> ID：11844654
> 
> 赞同：5
> 
> 时间：2012-08-07T11:09:34.347
> 
> 标签：node.js, couchdb, cradle

使用以下代码：

```
db.changes({'include_docs':true}).on('response', function (res) {
    res.on('data', function (change) {
        console.log(change);
    });
}); 
```

我能够获取数据库中更改的所有（旧和新）文档，但是如何获取最近更改的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:58:24.570

查看`since`参数，[更改文档中的详细信息](http://wiki.apache.org/couchdb/HTTP_database_API#Changes)

# sql - 如何形成这个 SQLite 查询？

> ID：11844655
> 
> 赞同：0
> 
> 时间：2012-08-07T11:09:36.107
> 
> 标签：sql, sqlite

我有两张桌子，一张是

```
ItemData(ItemID, ItemName) 
```

另一个有几列。

我可以从第二个表中检索 ID，但我希望`ItemNames`与这些 iID 相对应。我使用了以下代码，但它只返回一个项目名称：

```
SELECT ItemName
  FROM ItemData
 WHERE ItemID = ( SELECT ItemID
                    FROM StoreItem
                   WHERE StoreId = 3
                     AND Value = 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:11:43.487

```
SELECT ItemName from ItemData
WHERE ItemID in ( SELECT ItemID from StoreItem WHERE StoreId = 3 AND Value = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:11:48.340

如果您的内部查询返回超过 1 个 ItemID，则使用该`IN`子句 -

```
SELECT ItemName from ItemData WHERE ItemID IN ( SELECT ItemID from StoreItem WHERE StoreId =3 AND Value=1) 
```

# android - 如何使用扬声器检测闹钟铃声或其他应用程序？

> ID：11844657
> 
> 赞同：4
> 
> 时间：2012-08-07T11:09:45.850
> 
> 标签：android, audio, alarm, speaker

我正在开发一个音乐应用程序。我想检测其他应用程序使用扬声器或闹钟铃声来播放/暂停音乐。

对于电话，我使用 PhoneStateListener。我尝试使用 OnAudioFocusChangeListener 来检测其他音频。但是没有用。

我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T13:46:49.110

我解决了默认警报应用程序的问题：

```
public static final String ALARM_ALERT_ACTION = "com.android.deskclock.ALARM_ALERT";
public static final String ALARM_SNOOZE_ACTION = "com.android.deskclock.ALARM_SNOOZE";
public static final String ALARM_DISMISS_ACTION = "com.android.deskclock.ALARM_DISMISS";
public static final String ALARM_DONE_ACTION = "com.android.deskclock.ALARM_DONE";

private BroadcastReceiver mReceiver = new BroadcastReceiver() 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
          String action = intent.getAction();
          if (action.equals(ALARM_ALERT_ACTION) || action.equals(ALARM_DISMISS_ACTION) || action.equals(ALARM_SNOOZE_ACTION) || action.equals(ALARM_DONE_ACTION)) 
          {
              // for play/pause mediaplayer
              playPause();
          }
    }
};

@Override
public void onCreate(Bundle savedInstanceState) 
{
    IntentFilter filter = new IntentFilter(ALARM_ALERT_ACTION);
    filter.addAction(ALARM_DISMISS_ACTION);
    filter.addAction(ALARM_SNOOZE_ACTION);
    filter.addAction(ALARM_DONE_ACTION);
    registerReceiver(mReceiver, filter);
} 
```

# port - 让 apache camel 监听一个端口并将请求负载平衡到其他 URI

> ID：11844665
> 
> 赞同：0
> 
> 时间：2012-08-07T11:10:15.760
> 
> 标签：port, load-balancing, apache-camel, host

我这里有一个代码，它是骆驼官方网站的示例代码：

```
package org.apache.camel.processor;

import org.apache.camel.AsyncCallback;
import org.apache.camel.ContextTestSupport;
import org.apache.camel.Exchange;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.mock.MockEndpoint;
import org.apache.camel.processor.loadbalancer.LoadBalancerSupport;

public class CustomLoadBalanceTest extends ContextTestSupport {
    protected MockEndpoint x;
    protected MockEndpoint y;
    protected MockEndpoint z;

    @Override
    protected void setUp() throws Exception {
        super.setUp();

        x = getMockEndpoint("mock:x");
        y = getMockEndpoint("mock:y");
        z = getMockEndpoint("mock:z");
    }

    protected RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                // START SNIPPET: e1
                from("direct:start")
                    // using our custom load balancer
                    .loadBalance(new MyLoadBalancer())
                    .to("mock:x", "mock:y", "mock:z");
                // END SNIPPET: e1
            }
        };
    }

    public void testCustomLoadBalancer() throws Exception {
        x.expectedBodiesReceived("x", "x", "x");
        y.expectedBodiesReceived("y", "y");
        z.expectedBodiesReceived("foo", "bar", "baz");

        template.sendBody("direct:start", "x");
        template.sendBody("direct:start", "y");
        template.sendBody("direct:start", "foo");
        template.sendBody("direct:start", "bar");
        template.sendBody("direct:start", "y");
        template.sendBody("direct:start", "x");
        template.sendBody("direct:start", "x");
        template.sendBody("direct:start", "baz");

        assertMockEndpointsSatisfied();
    }

    // START SNIPPET: e2
    public static class MyLoadBalancer extends LoadBalancerSupport {

        public boolean process(Exchange exchange, AsyncCallback callback) {
            String body = exchange.getIn().getBody(String.class);
            try {
                if ("x".equals(body)) {
                    getProcessors().get(0).process(exchange);
                } else if ("y".equals(body)) {
                    getProcessors().get(1).process(exchange);
                } else {
                    getProcessors().get(2).process(exchange);
                }
            } catch (Throwable e) {
                exchange.setException(e);
            }
            callback.done(true);
            return true;
        }
    }
    // END SNIPPET: e2

} 
```

此代码用于使用 apache camel 执行自定义负载平衡。我希望 apache camel 监听本地主机和端口，并平衡通过 IP 地址和端口号指定的服务器之间的负载。服务器端安装了tomcat，它会监听请求。

那么如何修改以下代码以满足我的要求。我对骆驼有点陌生。非常感谢任何帮助。

提前致谢。干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:33:59.600

这是使负载均衡器工作的一些路由代码 但是，我没有检查您的自定义负载均衡类的内部结构，但这应该是相当简单的。

```
from("jetty://http://0.0.0.0:8080/test")
  .loadBalance(new MyLoadBalancer())
  .to("http://tcserver1:8080/hello","http://tcpserver2:8080/hello","http://tcpserver3:8080/hello"); 
```

# c++ - 高级 CFontDialog

> ID：11844666
> 
> 赞同：0
> 
> 时间：2012-08-07T11:10:22.227
> 
> 标签：c++, c, visual-c++, mfc

如您所知，MFC 的 CFontDialog 仅支持 int 字体大小。如果您检查了 MS Office，您会发现字体对话框通常支持浮动字体大小。

那么实现此功能的适当方法是什么

1.  我可以在 MFC 中使用任何已实现的字体对话框吗？
2.  是否有任何外部第三奇偶校验库或代码？
3.  我应该继承 CFontDialog 并实现该功能吗？这适用吗？
4.  我可以使用 .NET 对话框并在 MFC 中调用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:42:14.067

MS Office 不使用 CFont 对话框。您不能使用 CFont 对话框来支持十进制数。检查有关同一主题的讨论[。](http://www.databaseforum.info/2/5/d1af32f0d64a3115.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:40:10.657

1.  将我使用的字体的磅值更改为双倍。
2.  添加了允许编辑的下拉组合框。
3.  处理了 Combo、Edit 和 Selection Changed 的​​两个事件。
4.  它像魅力一样工作，无需创建对话框

# javascript - jquery - 添加到数组

> ID：11844667
> 
> 赞同：0
> 
> 时间：2012-08-07T11:10:22.480
> 
> 标签：javascript, jquery

为什么这不起作用？

```
var inputs = new Array();
$("input").each(function(){
    input = $(this).val();
})

console.log(input); 
```

如何在 jQuery 中正确使用数组？像 PHP 一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:11:32.407

利用[`Array.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

```
var inputs = new Array();
$("input").each(function(){
   inputs.push($(this).val());
}) 
```

还要注意变量差异..`input != inputs`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:11:53.993

我假设您要做的是获取 `<input>`页面上所有元素的值的数组。您需要做的是使用该`.each()`函数遍历所有元素并将每个值附加到您的`inputs`数组中。

尝试这个 -

```
 var inputs = new Array();
  $("input").each(function(){
      inputs.push($(this).val());
  })

  console.log(inputs); 
```

您需要使用该`push()`函数将元素添加到数组中。

# [小提琴演示](http://jsfiddle.net/HTztq/)

* * *

参考 -

*   [MDN 上的数组推送方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

* * *

最后一点，这是定义新数组的简写方式 -

```
var inputs = []; 
```

该行在功能上与 -

```
var inputs = new Array(); 
```

# php - 使用 strpos 在目标中找不到我的字符串

> ID：11844671
> 
> 赞同：0
> 
> 时间：2012-08-07T11:10:31.303
> 
> 标签：php

$cartArray 结构：

```
Array ( [0] => 1\. X => 2\. Y [2] => 3\. Z [3] => 4\. XX [4] => 5\. YY [5] => ) 
```

$列表：

```
$list = array(
    "1.",
    "2.",
    "3.",
    "4.",
    "5."
); 
```

功能

```
function alignNum($cartArray, $list)
{
   foreach($cartArray as $cA)
   {
      echo "<br />" . $cA . "<br /><br />";
      foreach($list as $l)
      {
            echo $l . "<br />";
            echo "Type of \$l is " . gettype($l) . " and type of \$cA is " . gettype($cA) . "<br />";

            $pos = strpos($cA, $l);

            echo "Comparing " . $l . " to " . $cA . "<br />";

            if ($pos !== true)
            {
                echo "<br />" . $l . " was not found in " . $cA . "<br /><br />";
                continue;
            }
            else
            {
                $post_cA = str_replace("EUR", "EUR</span>", $cA);

                $new_cA[] = (str_replace($l, substr($l, 0, -4) . "<span style='float: right>'", $cA)) . $post_cA;

                return $new_cA;
            }

          }
      }
}

$new_cart = alignNum($cart, $list); 
```

所以，我不断收到我的自定义调试消息：“在 Y 中找不到 X”。即它没有在任何提供的字符串中创建它 X。

这也不是类型的问题。两者都是字符串。

有任何想法吗？

编辑：另外，请注意我已经审查了一些内容，因为这是与业务相关的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:20:45.610

德国阿灵顿实际上是对的。看看[strpos](http://php.net/strpos)返回了什么：

> 返回针相对于 haystack 字符串开头的位置（与偏移量无关）。另请注意，字符串位置从 0 开始，而不是 1。
> 
> 如果未找到针头，则返回 FALSE。

和

```
if ($pos !== true) 
```

您是在询问 strpos 是否返回了布尔值 true（因为您正在使用 !== 检查类型安全）。但实际上 strpos 可能已经找到了指针并返回 ie 2 作为第一个匹配的位置，但您要求的是 true。

尝试反过来检查：

```
if (false === $pos) { // your debug message } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:32:08.050

比较数字和布尔值通常是一个坏主意（除非你是 C 程序员），
`if ($pos != true)`
但在
`if ($pos !== true)`
AFAIK 中它永远不会匹配，因为变量是不同的类型

# actionscript-3 - 如何使用 Flex4 浏览服务器文件

> ID：11844674
> 
> 赞同：0
> 
> 时间：2012-08-07T11:10:36.873
> 
> 标签：actionscript-3, flash, apache-flex, flex4

我需要在 flex 4.5 中显示服务器上传的文件，以便 Web 应用程序管理上传的文件，如上传、删除和打开预览。

谁能帮助我如何在 Flex 动作 script3.0 中列出服务器端文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:25:28.397

您不能只让 Flash 播放器浏览您的服务器文件。但是您可以创建一个解决方法。在服务器上创建一个脚本，它将为您提供位于您正在寻找的路径的文件列表。通过基本 POST，您可以请求目录的文件列表。然后你可以在你的闪存端显示它。但请记住，文件上发生的每一个实际操作都**必须**发生在服务器端。还要**注意**这些事情，因为查找在浏览器中发出的网络请求非常容易，因此有一天您可能会删除所有文件。因此，请确保您实施了一些安全措施。

# ruby-on-rails - MongoDB IDEA中的数据库导入导出

> ID：11844675
> 
> 赞同：1
> 
> 时间：2012-08-07T11:10:49.997
> 
> 标签：ruby-on-rails, mongodb, mongoid, mongoimport

我打字

```
`mongo` 
```

在终端它连接到 mongodb。我在那里有很多数据库和集合。我想导出我的

```
 `hero` (dbs name) 
```

及其收藏

```
users 
```

到新文件夹中的桌面。通过复制该文件夹并粘贴到另一台计算机上，我想导入它

```
`hero(dbs name)` 
```

及其收藏。现在当我输入

```
show dbs 
```

那么应该有

```
`hero` 
```

在我的第二台电脑上。我怎样才能做到这一点。我也使用 mongodump。谁能给我这个想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:08:21.290

这是来自 10gen 的一个很好的手册页，其中显示了示例命令以及不适合做你想做的事情：http: [//docs.mongodb.org/manual/administration/backups/#database-dumps](http://docs.mongodb.org/manual/administration/backups/#database-dumps)和[http://www.mongodb.org /display/DOCS/Import+Export+Tools#ImportExportTools-mongodump](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodump)。

所以你的一个例子是（复制集合）：

```
mongodump --collection hero --database name 
```

然后在将上述命令的输出复制到保存 mongorestore 的当前文件夹后，在另一台计算机上恢复它：

```
mongorestore --collection hero --database name 
```

我不确定您使用的是什么操作系统，因此我已将它们放在 Linux 命令语法中。

# javascript - 在 Javascript 中聚合表格数据

> ID：11844677
> 
> 赞同：1
> 
> 时间：2012-08-07T11:10:54.007
> 
> 标签：javascript, jquery

我有很多数据，这些数据本质上是基于日期的，但报告间隔不规则。我希望做的是让我的 PHP 后端将数据发送到前端 JS/jQuery 进行显示，但为了有效地报告，我需要能够按“周”、“月”等报告。我可以尝试并在后端执行 SQL 并为每个间隔构建不同的数据系列，但这将在后端占用大量 CPU，我希望前端能够在这些间隔之间移动时有点动态（又名，“告诉我每月一次，无需等待，每周显示一次”等）

我正在寻找的——我认为——是一个 JS/jQuery 库，它将帮助我获取表格数据并根据基于日期的条件对其进行分组/聚合。如果需要，我可以尝试在表格结构中添加一列，指定周数（从而简化前端的数据数学）。无论如何，我现在很灵活，只是希望听到一些以前尝试过解决这类问题的好的资源或方法。

**注意：**我将[jqGrid](http://www.trirand.com/blog/)用于前端的表格视图，使用[Highcharts](http://www.highcharts.com/)进行图形表示。这可能并不重要，但它也可能会打开一些创造性的选择。

# javascript - Javascript - 清除元素的属性

> ID：11844678
> 
> 赞同：1
> 
> 时间：2012-08-07T11:11:00.677
> 
> 标签：javascript, html

我有一个 HTML 元素：

```
<a id="link" href="javascript : void(0);" onclick="jsFunction();">Some Text</a> 
```

当单击按钮时，我希望清除**onclick属性。**就像是

```
<a id="link" href="javascript : void(0);" onclick="">Some Text</a> 
```

我试过这样做：

```
document.getElementById('link').onclick=""; 
```

这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:13:04.327

利用`removeAttribute()`

```
document.getElementById('link').removeAttribute('onclick'); 
```

## [看演示](http://jsfiddle.net/akhurshid/FZEgs/)

# perl - 使用 Perl 从文本文件中提取和打印键值对

> ID：11844679
> 
> 赞同：4
> 
> 时间：2012-08-07T11:11:03.260
> 
> 标签：perl, search, hash, extract

我有一个文本文件 temp.txt，其中包含以下条目，

```
cinterim=3534
cstart=517
cstop=622
ointerim=47
ostart=19
ostop=20 
```

注意：键值对可以换行排列，也可以同时排列在一行中，用空格隔开。

我正在尝试使用 Perl 将这些值打印并存储在数据库中以获取相应的键。但是我收到了很多错误和警告。现在我只是想打印这些值。

```
use strict;
use warnings;

open(FILE,"/root/temp.txt") or die "Unable to open file:$!\n";

while (my $line = <FILE>) {
  # optional whitespace, KEY, optional whitespace, required ':', 
  # optional whitespace, VALUE, required whitespace, required '.'
  $line =~ m/^\s*(\S+)\s*:\s*(.*)\s+\./;
  my @pairs = split(/\s+/,$line);
  my %hash = map { split(/=/, $_, 2) } @pairs;

  printf "%s,%s,%s\n", $hash{cinterim}, $hash{cstart}, $hash{cstop};

}
close(FILE); 
```

有人可以提供帮助来完善我的程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T11:24:26.220

```
use strict;
use warnings;

open my $fh, '<', '/root/temp.txt' or die "Unable to open file:$!\n";
my %hash = map { split /=|\s+/; } <$fh>;
close $fh;
print "$_ => $hash{$_}\n" for keys %hash; 
```

这段代码的作用：

`<$fh>`从我们的文件中读取一行，或者在列表上下文中读取所有行并将它们作为数组返回。

在内部`map`，我们使用 regexp 将我们的行拆分为一个数组`/= | \s+/x`。这意味着：当您看到一个`=`或一系列空白字符时拆分。这只是原始代码的精简和美化形式。

然后，我们将产生的列表`map`转换为`hash`类型。我们可以这样做，因为列表的项目数是偶数。（此时输入类似`key key=value`或`key=value=value`将引发错误）。

之后，我们打印散列。`printf`在 Perl 中，我们可以直接在字符串中插入哈希值，除了特殊格式外，不必使用和朋友。

`for`循环遍历所有键（在特殊变量中返回）`$_`，并且`$hash{$_}`是相应的值。这也可以写成

```
while (my ($key, $val) = each %hash) {
  print "$key => $val\n";
} 
```

where`each`遍历所有键值对。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T11:22:21.910

试试这个

```
use warnings;

my %data = ();

open FILE, '<', 'file1.txt' or die $!;
while(<FILE>)
{
    chomp;
    $data{$1} = $2 while /\s*(\S+)=(\S+)/g;
}
close FILE;

print $_, '-', $data{$_}, $/ for keys %data; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T12:36:10.823

最简单的方法是将整个文件放入内存并使用正则表达式将键/值对分配给散列。

该程序显示了该技术

```
use strict;
use warnings;

my %data = do {
  open my $fh, '<', '/root/temp.txt' or die $!;
  local $/;
  <$fh> =~ /(\w+)\s*=\s*(\w+)/g;
};

use Data::Dump;
dd \%data; 
```

**输出**

```
{
  cinterim => 3534,
  cstart   => 517,
  cstop    => 622,
  ointerim => 47,
  ostart   => 19,
  ostop    => 20,
} 
```

# git - 配置 GitLab 以将每个用户的存储库存储在个人目录中

> ID：11844683
> 
> 赞同：3
> 
> 时间：2012-08-07T11:11:08.143
> 
> 标签：git, gitolite, gitlab

刚刚安装了[GitLab](http://gitlabhq.com/)，它运行良好，但有一个例外：它默认将所有用户的存储库存储在一个目录中，如果两个用户独立尝试创建具有相同名称的项目，例如“test”，第二个用户将收到像“已经采取的路径”这样的失败。

隔离每个用户的存储库的基本方法是将它们放在带有用户名的子文件夹中，就像[GitHub](http://github.com/)一样。但我不知道该怎么做。

我知道 GitLab 使用 Gitolite 来管理存储库，最后一个有一个应该允许它的功能：它被命名为“通配符用户”，在 gitolite.conf 中它看起来像这样：

```
@wildcard_users = user1 user2 user3
repo    CREATOR/.*
    C     = @wildcard_users
    CRW+D = CREATOR
    RW    = WRITERS
    R     = READERS 
```

这样我们在 repo 路径中看到 CREATOR，它将被替换为用户名创建的存储库。但我认为我可以使用此功能的唯一方法是使用 gitolite-admin.git 存储库的克隆手动管理 gitolite，这扼杀了 GitLab 的整个想法，其中应该允许通过 Web 界面进行所有此类操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:10:26.800

满足该需求的确切 Gitolite 功能称为“[**野生回购**](http://sitaramc.github.com/gitolite/wild.html)”，它基于*创建*回购的用户（因此，不是[GitLab](https://github.com/gitlabhq/gitlabhq)）

> 只需以用户“u4”（学生）的身份创建一个新的存储库：

```
$ git clone git@server:assignments/u4/a12
Initialized empty Git repository in /home/sitaram/a12/.git/
Initialized empty Git repository in /home/git/repositories/assignments/u4/a12.git/
warning: You appear to have cloned an empty repository. 
```

> 注意两个空的 repo 初始化，以及它们发生的顺序；-)

GitLab 不支持该工作流程，并且需要一些大补丁来管理不直接位于`repositories`目录下的存储库。

# php - MySQL 表未找到或未显示

> ID：11844687
> 
> 赞同：0
> 
> 时间：2012-08-07T11:11:29.407
> 
> 标签：php, html, mysql

我有一个网页，我想显示一些从数据库更新的项目，在这种情况下是 mysql。列表的**html**

```
<div id="right-column-sidebar-two">
<h3 id="header">Most</h3>
<ol>
<li><a href="#">R</a></li>
<li><a href="#">Q</a></li>
<li><a href="#">P</a></li>
<li><a href="#">O</a></li>
<li><a href="#">N</a></li>
<li><a href="#">M</a></li>
<li><a href="#">L</a></li>
<li><a href="#">K</a></li>
<li><a href="#">J</a></li>
<li><a href="#">I</a></li>
</ol>
</div> 
```

这些列表项已存储在我的数据库中，组合的**mysql/php/html**如下所示

```
<div id="right-column-sidebar">
<ol>
<?php
$link = mysql_connect("host", "user", "password");
mysql_select_db("db", $link);
$query = "SELECT * FROM `table_name` LIMIT 0, 30 ";
$result = mysql_query($query) or die (mysql_error());
while ($row = mysql_fetch_array($result)):
?><li><a href="#"> <?php echo $row['title']; ?></a></li>
<?php endwhile;
?>
</ol>
</div> 
```

现在我有两个要在这种情况下使用的表，我分别尝试了它们，并且在 a) 我没有收到任何错误消息，但没有显示任何内容，在 b) 我收到一条错误消息，指出该表不存在。

除了我刚刚提供的代码之外，我不知道任何 mysql，因此很难确定原因可能是什么。将不胜感激一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:21:40.897

首先，不要使用`mysql_*`，而是使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

至于您的问题，从第一个表中，您没有得到任何结果，因为表中可能没有数据。

在第二个表中，您会收到未找到表的错误，因为该表不存在，这意味着您的表名错误。

[您可以使用SqlYog](http://code.google.com/p/sqlyog/downloads/list)或 phpmyadmin等 GUI 客户端访问数据库吗？尝试在此工具中运行您的查询，看看您会得到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T18:13:32.563

如果您的 phpMyAdmin 不再看到任何本地数据库中的任何表，那是因为权限从 /var/lib/mysql 下的任何数据库目录上的 mysql.mysql 更改为 root.root（很可能）。使用此查询更改所有者：

chown -R mysql.mysql /var/lib/mysql/*

教程通过[http://www.geckoandfly.com/7481/solution-for-no-tables-found-in-database-mysql-error-in-phpmyadmin/](http://www.geckoandfly.com/7481/solution-for-no-tables-found-in-database-mysql-error-in-phpmyadmin/)

# php - 如何自动将新行添加到另一个表 PHP MYSQL

> ID：11844691
> 
> 赞同：1
> 
> 时间：2012-08-07T11:11:34.290
> 
> 标签：php, mysql, phpmyadmin, row

我在 mySQL 中有 2 个具有一对一关系的表。它们都具有与主键相同的 user_id，当我将帖子插入到我的第一个表中时，我需要以某种方式自动将具有相同 user_id 的行插入到我的第二个表中。是否有任何我可以使用的 mysql 命令或 PHP 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:18:31.813

[`TRIGGER`](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)您可以在数据库中设置一个。这些触发器实体存储在数据库的结构中，使用 PHP 您可能只执行`CREATE TRIGGER`创建一个的查询。

但是，两个表具有完全相同的数据，`PRIMARY KEY`听起来像您的数据库结构有点糟糕。您应该花时间改造数据库，基本上将两个表合并（如果可能）在一起。

如果您`INSERT INTO`对数据库使用 PHP，则可以依次调用这两个查询：

```
INSERT INTO table1(field1, field2...) VALUES (value1, value2...)
INSERT INTO table2(field1, field2...) VALUES (value1, value2...) 
```

但是依赖于两个彼此之后的查询需要精确的准确性，因为主键可能会不同步，从而破坏关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:23:47.773

如果我正确理解您的问题，您可以从第一个表中获取插入的 user_id 并使用它在第二个表中插入新行。

```
$query = mysql_query("SELECT * FROM first_table ORDER BY user_id DESC LIMIT 1");
$row = mysql_fetch_assoc($query); 
```

现在 $row['user_id'] 可以插入到第二个表中。

如果同时插入许多行，这当然是有风险的。

# list - Haskell data.list.class 用法

> ID：11844700
> 
> 赞同：0
> 
> 时间：2012-08-07T11:11:53.033
> 
> 标签：list, haskell, typeclass

这是一个关于 Data.List.Class 使用问题的问题（与[Haskell Data.List.Class and syntax](https://stackoverflow.com/questions/11770733/haskell-data-list-class-and-syntax)的上一个问题有关）。

下面列出了代码的相关部分。据我了解，这个类提供了一个类型类接口或对 Haskell 列表类型的泛化，这可能非常有用。但是，我真的找不到太多关于这个类的使用的文档。有谁知道好的教程吗？

另外，我有一个关于它的用法和类型的技术/具体问题。从代码中，我会认为在类型类定义中，runList 和 joinL 是相互的（在某种意义上）。

```
-- other stuff omitted
import Data.Functor.Identity (Identity(..))

data ListItem l a =
    Nil |
    Cons { headL :: a, tailL :: l a }

Data.List.Class
-- | A class for list types. Every list has an underlying monad.
class (MonadPlus l, Monad (ItemM l)) => List l where
    type ItemM l :: * -> *
    runList :: l a -> ItemM l (ListItem l a)
    joinL :: ItemM l (l a) -> l a
    cons :: a -> l a -> l a
    cons = mplus . return

instance List [] where
    type ItemM [] = Identity
    runList [] = Identity Nil
    runList (x:xs) = Identity $ Cons x xs
    joinL = runIdentity
    cons = (:)

fromList :: List l => [a] -> l a
fromList = foldr cons mzero 
```

首先，我`joinL $ runList [1, 2, 3]`以emacs模式进入，但出现以下错误：

```
Couldn't match type `ItemM (ListItem [])' with `Identity'
Expected type: ItemM (ListItem []) (ListItem [] Integer)
  Actual type: ItemM [] (ListItem [] Integer) 
```

正如它所说，预期和实际类型并不完全匹配。但我不明白为什么他们首先需要不同的类型。它们`runList :: l a -> ItemM l (ListItem l a)`的`joinL :: ItemM l (l a) -> l a`含义或语义有何不同？

另外，我在emacs模式下尝试了一个非常简单的fromList函数，如下所示：`fromList [1,2,3]`，但我得到了：

```
Ambiguous type variable `l0' in the constraint:
  (List l0) arising from a use of `fromList'
Probable fix: add a type signature that fixes these type variable(s)
In the expression: fromList [1, 2, 3]
In an equation for `it': it = fromList [1, 2, 3] 
```

我在这里很困惑为什么这里有歧义，以及如何添加类型签名作为错误消息提示。谁能帮忙解释一下？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:00:43.763

最后一个问题：实现List类型类的可能有好几种类型，如果后面不去推断，应该指定。例如`fromList [1, 2, 3] :: [Int]`工作正常。

# ruby-on-rails - 外键关系

> ID：11844704
> 
> 赞同：0
> 
> 时间：2012-08-07T11:12:26.277
> 
> 标签：ruby-on-rails, ruby

我在rails中有两个模型类。

```
class EmployeeDetail < ActiveRecord::Base
  attr_accessible :department_id
  belongs_to :department, :class_name => "Department", :foreign_key => :department_id
end 
```

和

```
class Department < ActiveRecord::Base
  attr_accessible :name
  validates :name, presence: true, uniqueness: { case_sensitive: false }
end 
```

我必须在这两个类之间创建外键关系。但是当我看到`employee_details`表格时，`department_id`它只是一个整数列，没有参考部门表。任何人都可以帮助创建外键关系。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:22:17.160

没有必要。Rails 为它做了所有的工作。

您可以做的是`index`在迁移中添加一个。喜欢：

```
add_index :employee_details, :department_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:31:59.483

尝试将此添加到部门模型：

> has_many :employeedetails

也许，你不需要

> , :class_name => "部门", :foreign_key => :department_id

因为 Rails 会自动为你做这件事

# ios - 如何使用 AudioUnitEffect 进行 AudioUnitRender？

> ID：11844712
> 
> 赞同：1
> 
> 时间：2012-08-07T11:13:07.587
> 
> 标签：ios, core-audio

我正在尝试在 AudioUnit Mixer 的回调中使用 audioUnit Effect 执行 AudioUnitRender 但没有运气。

我的混音器进入 RemoteIO 单元并在其回调中处理 AudioData（来自文件）。工作得很好。

然后，我在我的图表中添加了一个 AudioUnit 效果节点（一个混响）并将其链接到一个 AudioUnit。我的效果节点未连接到图中的任何内容。

```
AudioComponentDescription auEffectDescription;
auEffectDescription.componentType           = kAudioUnitType_Effect;
auEffectDescription.componentSubType        = kAudioUnitSubType_Reverb2;
auEffectDescription.componentManufacturer   = kAudioUnitManufacturer_Apple;
auEffectDescription.componentFlags          = 0;
auEffectDescription.componentFlagsMask      = 0; 
```

我知道 AudioGraph (zerokidz.com/audiograph) 示例中描述的 StreamFormat 问题，并按照 AudioGraph 中的说明设置了我的效果单元的 StreamFormat。

所以我知道存在流格式兼容性问题（请参阅[Bit-shifting audio samples from Float32 到 SInt16 导致严重剪辑](https://stackoverflow.com/questions/10073467/bit-shifting-audio-samples-from-float32-to-sint16-results-in-severe-clipping)）。我的 ASBD：

```
[AudioUnitEffect]------------------------------
[AudioUnitEffect] Sample Rate:       44100
[AudioUnitEffect] Format ID:          lpcm
[AudioUnitEffect] Format Flags:         41
[AudioUnitEffect] Bytes per Packet:      4
[AudioUnitEffect] Frames per Packet:     1
[AudioUnitEffect] Bytes per Frame:       4
[AudioUnitEffect] Channels per Frame:    2
[AudioUnitEffect] Bits per Channel:     32
[AudioUnitEffect]------------------------------

[AudioUnitMixer]------------------------------
[AudioUnitMixer] Sample Rate:       44100
[AudioUnitMixer] Format ID:          lpcm
[AudioUnitMixer] Format Flags:       3116
[AudioUnitMixer] Bytes per Packet:      4
[AudioUnitMixer] Frames per Packet:     1
[AudioUnitMixer] Bytes per Frame:       4
[AudioUnitMixer] Channels per Frame:    2
[AudioUnitMixer] Bits per Channel:     32
[AudioUnitMixer]------------------------------ 
```

我已经理解（如果我错了，请纠正我）我的效果在 Float32 中，而我的混音器使用 AudioUnitSampleType 类型（SInt32）。在效果上调用 AudioUnitRender 之前和之后，我尝试了各种转换数据缓冲区的方法。我试图将混音器的 ASBD 与 AudioUnit 效果匹配，它可以工作，但我得到了一些可怕的失真（如果效果使用 Float32 类型（我猜是在 [-1,+1] 之间？），这是正常的。

苹果文档说：

*Effect Units Stream 格式说明

在输入范围内，按如下方式管理流格式： - 如果输入由音频单元连接馈送，则它从该连接获取其流格式。- 如果输入由渲染回调函数提供，请在总线上设置完整的应用程序流格式。使用与回调提供的数据相同的流格式。在输出范围上，设置与输入相同的完整流格式。*

我发现这没什么帮助..

无论如何，必须有一种方法可以使用效果单元进行 AudioRenderRender。有人成功了吗？谢谢。

安德烈

* * *

我的混音器回调：

```
static OSStatus mainMixerCallback(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData)
{  
SoundEngine* se = (SoundEngine*)inRefCon;

// init buffers with zeros
memset((Byte *)ioData->mBuffers[0].mData, 0, ioData->mBuffers[0].mDataByteSize);
memset((Byte *)ioData->mBuffers[1].mData, 0, ioData->mBuffers[1].mDataByteSize);

// Render the Audio Track (works fine)
AudioUnitRender((AudioUnit)se.auTrack,ioActionFlags, inTimeStamp, inBusNumber, inNumberFrames, ioData);

//  Effect (fails when there. Error:-50)
AudioUnitRender((AudioUnit)se.auEffect, ioActionFlags, inTimeStamp, inBusNumber, inNumberFrames, ioData);
    return noErr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T20:36:23.247

您现在可能已经解决了您的问题，但只是为了记录：缓冲区需要有一个通道，因此您需要设置两个 AudioBuffers，每个通道都有一个通道，而不是您现在拥有的 2 个通道。

# iphone - NSMutableDictionary 问题

> ID：11844716
> 
> 赞同：-2
> 
> 时间：2012-08-07T11:13:17.570
> 
> 标签：iphone, ios, nsmutabledictionary

在我的应用程序中，我从用户那里获取输入并将其存储`NSMutableDictionary`并成功获取结果。

但我对控制台上的输出打印有点困惑。**它没有顺序**。

这个输出背后的原因是什么？

谢谢

![在此处输入图像描述](../Images/1ff8bf864bd7ff4df039fd1937421dd7.png)

我使用以下代码存储来自 textField 的输入并在控制台上打印它。

```
-(IBAction)doneButtonClicked:(id)sender
{
 NSArray *arr=[NSArray arrayWithObjects:@"firstName",@"middleName",@"lastName",@"address",@"email",@"phone",nil];

 DataClass *obj=[DataClass getInstance];  

 obj.personelInfo=[NSMutableDictionary dictionary];

 for (int a=1; a<=personelInfoCounter; a++) {

    UITextField *textField = (UITextField*)[self.view viewWithTag:a];

    NSString *fieldValue = textField.text;

    if(fieldValue != nil)
    {
    [obj.personelInfo setObject:fieldValue forKey:[arr objectAtIndex:a-1]];
    }
    else
    {
       [obj.personelInfo setObject:@"" forKey:[arr objectAtIndex:a-1]]; 
    }

}

NSLog(@"Final value of Personal Info Dictionary is ----------------------------------:");

for (id key in obj.personelInfo) {

    NSLog(@"%@      ,      %@", key, [obj.personelInfo objectForKey:key]);

}
} 
```

控制台上的输出是

![在此处输入图像描述](../Images/01dd766bd7a00f303af4cc0426d396b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:18:04.073

> 这是不正常的。这个输出背后的原因是什么？

`NSDictionary`并且`NSMutableDictionary`不要维护您放入其中的东西的顺序。枚举字典时将获得什么顺序是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:25:59.657

正如沃特森所说的“字典未排序”。您可以根据您的关键值制定自己的逻辑。

更多信息[https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

# extjs4.1 - extjs 4.1.0 如何在不使用 id 的情况下获取文本字段值

> ID：11844720
> 
> 赞同：0
> 
> 时间：2012-08-07T11:13:31.317
> 
> 标签：extjs4.1

我有一个文本字段、组合和收音机。我想在单击一个按钮时获取这 3 个字段的值。我如何在不使用的情况下获得上述 3 的值`Ext.getCmp('id').getValue();`

有没有其他方法可以获取值，
请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:12:42.897

这取决于您包含字段的方式以及要单击以获取其值的按钮。

您可以上下导航容器

```
var TheComponent = this.up('form').down('#MyTextField') 
```

这会爬上你的容器层次结构，直到它找到一个“表单”容器（不管它的 ID 或名称是什么），然后它们会向下爬，直到找到一个 ID 为“MyTextField”的组件

如果您的单选按钮位于单选按钮组容器中，您可以检索具有所有“on”键/值的对象。

如果您的容器是一个表单，您可以使用 lzhaki 提出的方法并检索一个包含表单上所有值的对象。请记住，组合框的行为与文本框不同。

这些方法中的每一个都将返回单个值或包含一组值的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:16:23.127

在 ExtJS 4.1 中，我发现前面的例子很接近，但不正确：

```
var TheComponent = this.up('form').down('#MyTextField') 
```

表单对象中没有“向下”方法（显然表单字段不包含在向下方法的导航逻辑中）。

以下是我将初始焦点设置在表单中的编辑字段上的方法。

```
var theForm = this.down('form').getForm();
var theField = theForm.findField('idEditVolname');
theField.focus(); 
```

您仍然必须使用`getForm()`来获取嵌入的表单对象，然后`findField()`定位特定字段 - 至少这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:40:15.833

我不知道这是否仍然相关，但这里有。
首先，在 Extjs4 及更高版本中，您使用`Ext.ComponentQuery.query()`而不是`Ext.getCmp()`.
这允许您做的是直接访问您拥有的任何 xtype，就像其他答案中提到的`up`, 和`down`方法一样，但是此方法在搜索整个组件层次结构时不需要任何锚点。由于页面上的每个元素只有一个，因此无需使用 id 即可轻松实现。我将命名包含字段的主面板，但这只是为了方便。
看看这个[小提琴](http://jsfiddle.net/bldoron/cdVn9/)

代码非常简单：

```
var panel = Ext.create('Ext.panel.Panel', {
    renderTo: Ext.getBody(),
    name: 'myForm',
    title: 'Sample Test',
    layout: 'anchor',
    height: 200,
    items: [{
        xtype:'textfield',
        fieldLabel: 'text',
        value: 'Oh yeah!'
    }]    
});

var myVal = Ext.ComponentQuery.query('panel[name=myForm] textfield')[0];
alert (myVal.getValue()); 
```

`radio`和字段也可以做同样的事情`combo`，你不需要一个表格，尽管这样更合乎逻辑。

# java - 无效的转义字符

> ID：11844721
> 
> 赞同：1
> 
> 时间：2012-08-07T11:13:34.700
> 
> 标签：java

在java中制作服务器，首先，这是代码。

```
 AnsiConsole.out.println("This is a Test.");
    AnsiConsole.out.println("\e[0;31m Red");
    AnsiConsole.out.println("\e[0;34m Blue");
    AnsiConsole.out.println("\e[0;32m Green");
    AnsiConsole.out.println("\e[1;33m Yellow"); 
```

所以，我的问题是它读取转义字符是非法的。任何意见？

使用 Jansi 库[http://jansi.fusesource.org/index.html](http://jansi.fusesource.org/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:15:10.050

您需要转义反斜杠：

```
AnsiConsole.out.println("This is a Test.");
AnsiConsole.out.println("\\e[0;31m Red");
AnsiConsole.out.println("\\e[0;34m Blue");
AnsiConsole.out.println("\\e[0;32m Green");
AnsiConsole.out.println("\\e[1;33m Yellow"); 
```

因为在 Java 中，反斜杠在字符串`\`中具有[特殊的含义](http://docs.oracle.com/javase/tutorial/java/data/characters.html)：它用于特殊字符，例如`\n`(new line) 或`\t` (tab)。

[这里](http://www.codecodex.com/wiki/Escape_sequences_and_escape_characters#Java)有一个很好的主题描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:15:45.290

这是因为`\e`不是有效的转义序列。如果您确实想打印反斜杠，则需要对其进行转义：`"\\e[0;31m Red"`

您可以查看[此页面](http://docs.oracle.com/javase/tutorial/java/data/characters.html)以获取有效转义序列的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:22:27.413

我假设您正在尝试在这里生成[ANSI 转义序列](http://ascii-table.com/ansi-escape-sequences-vt-100.php)。

`\e`不是 Java 中的有效字符，您需要的是`\u001b`ANSI 序列的开头。

```
AnsiConsole.out.println("\u001b[0;31m Red"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:16:30.413

如果你想在打印的字符串中包含一个 '\' （反斜杠），你应该用另一个 '\' =>`AnsiConsole.out.println("\\e[0;31m Red");`

目前java理解你试图逃避不是特殊字符的'e'并且它抱怨这一点。

# lucene - 词干+通配符：意想不到的效果

> ID：11844722
> 
> 赞同：0
> 
> 时间：2012-08-07T11:13:40.693
> 
> 标签：lucene, lucene.net, wildcard, stemming

我正在编辑一个 lucene .net 实现（2.3.2），以包括词干和自动通配符（在单词末尾添加 *）。

我发现带有通配符的确切单词不起作用。（所以 stack* 适用于 stackoverflow，但 stackoverflow* 没有受到影响），并且想知道是什么原因造成的，以及如何修复它。

提前致谢。（也感谢你没有问我为什么要*同时*实现自动通配符和词干。）

我将让查询始终作为查询的前缀，这样我就不必在查询中添加任何讨厌的“*”，所以我们会看看是否有什么变得清楚。

编辑：只有词干不能使用通配符。示例 Silicate* 不起作用，但 silic* 起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:50:51.353

它不起作用的原因是因为您阻止了内容，从而更改了术语。

例如考虑“阀门”这个词。雪球分析仪会将其限制为“valv”。

因此，在搜索时，由于您停止输入查询，“阀门”和“阀门”都将被分解为“阀门”。使用`TermQuery`词干的`Term`“valv”将在“valve”和“valve”出现时产生匹配。

但是现在，由于您在索引中存储了`Term`“valv”，因此对“valve*”的查询将不匹配任何内容。那是因为`QueryParser`不运行`Analyzer`通配符查询。

有[AnalyzingQueryParser](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/contrib-misc/org/apache/lucene/queryParser/analyzing/AnalyzingQueryParser.html)可以处理其中一些情况，但我不认为它出现在 Lucene 的 2.3.x 版本中。无论如何，它不是通用的，文档说：

> **警告**：此类只能与不使用停用词或添加标记的分析器一起使用。此外，一些词干分析器是不合适的：例如，GermanAnalyzer 会将 Häuser 转换为 hau，但使用此解析器时 H?user 将变为 h?user，因此找不到匹配项（即使用此解析器不会比 QueryParser 中的此类情况）。

我链接的副本中提到的解决方案适用于所有情况，但您将获得更大的索引。

# jquery - Jquery .change 检查脏表单

> ID：11844728
> 
> 赞同：1
> 
> 时间：2012-08-07T11:14:00.370
> 
> 标签：jquery, forms, input, dialog

我刚刚开始使用 PHP 和 JQuery，如果表单中的所有输入字段都是脏的，我想显示一个警报框 - 如果不是，请转到所选页面。我无法让下面的代码运行。

```
var formChanged = false;

function check_dirtyForm(){
    $(':input',document.myForm).change(function() {
        formChanged = true;
    });
}

function show_new_page($controller) {
    check_dirtyForm();
    if (formChanged == true)
    {
        alert("Form is dirty");
    }
    else
    {
        //show page
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:31:20.637

您可以使用[dirtyFields](http://www.thoughtdelimited.org/dirtyFields/examples.cfm)插件并检查表单上的“dirtyForm”类。

# entity-framework - Entity Framework 5.0 RC - 包管理器命令“添加迁移”由于据称缺少配置类型而失败

> ID：11844729
> 
> 赞同：5
> 
> 时间：2012-08-07T11:14:17.410
> 
> 标签：entity-framework, nuget, visual-studio-2012, database-migration, entity-framework-5

使用 Entity Framework 5.0.0 RC/EF 5.x DbContext Generator for C#/Visual Studio 2012 RC/.NET 4.0，我试图在我的项目中启用自动迁移。我`enable-migrations`在包管理器控制台中运行：

```
PM> enable-migrations
No classes deriving from DbContext found in the current project.
Edit the generated Configuration class to specify the context to enable migrations for.
Code First Migrations enabled for project Test. 
```

如您所见，它没有自动检测我的 DbContext 派生类型，但我通过在生成的代码文件中输入此类型的名称很容易地解决了这个问题，`Migrations/Configuration.cs`.

但是，下一步，Package Manager Console 命令`enable-migrations`由于找不到上一步添加的迁移配置类型而失败。

```
PM> add-migration Initial
No migrations configuration type was found in the assembly 'Test'. (In Visual Studio you can use the Enable-Migrations command from Package Manager Console to add a migrations configuration). 
```

我该如何解决这个问题？

**编辑：**我发现我可以使用参数指定配置类型的名称`-ConfigurationTypeName`：

```
PM> add-migration -ConfigurationTypeName Test.Migrations.Configuration Initial
The type 'Configuration' is not a migrations configuration type. 
```

这仍然不起作用，但至少它阐明了为什么`add-migration`保释，即它认为`Test.Migrations.Configuration`不是迁移配置类型。鉴于它是由 enable- 生成的，有没有人知道为什么它不被接受`migrations`？请参阅下面生成的代码以供参考（UserModelContainer 派生自 DbContext）：

```
namespace Test.Migrations
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Migrations;
    using System.Linq;
    using Test.Models;

    internal sealed class Configuration : DbMigrationsConfiguration<UserModelContainer>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = false;
        }

        protected override void Seed(UserModelContainer context)
        {
            //  This method will be called after migrating to the latest version.

            //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
            //  to avoid creating duplicate seed data. E.g.
            //
            //    context.People.AddOrUpdate(
            //      p => p.FullName,
            //      new Person { FullName = "Andrew Peters" },
            //      new Person { FullName = "Brice Lambson" },
            //      new Person { FullName = "Rowan Miller" }
            //    );
            //
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T13:22:40.380

问题原来是我在面向 .NET Framework 4.5 时安装了 Entity Framework 5.0.0 RC。由于部署到 Windows Azure，我发现我必须改为以 .NET 4.0 为目标。我不知道 NuGet 的复杂性，但似乎为 .NET 4.5 安装的 EF 包不适用于我的 4.0 目标项目。

重新安装 EF NuGet 包后，将我的项目定位在 .NET 4.0，一切正常。

# java - 列表视图中的android链接

> ID：11844730
> 
> 赞同：1
> 
> 时间：2012-08-07T11:14:18.290
> 
> 标签：java, android

我有这个代码：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.romantic.aacplay.R;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.graphics.Color;
import android.graphics.drawable.GradientDrawable;
import android.os.AsyncTask;
import android.os.Bundle;
// import android.text.Html;
// import android.text.Html;
import android.text.Html;
import android.util.Log;
import android.view.View;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;

public class PodCast extends ListActivity {
        private ProgressDialog pDialog;

        JSONParser jParser = new JSONParser();

        ArrayList<HashMap<String, String>> productsList;

        private static String url_all_products = "http://mysite.net/andro/pcast.php";
        private static final String TAG_SUCCESS = "success";
        private static final String TAG_PRODUCTS = "podcast";
        private static final String TAG_LINK = "link";
        private static final String TAG_NAME = "nume";

        JSONArray products = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.poadcast);

             GradientDrawable gd = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[] {Color.RED,Color.BLACK});
                View title = getWindow().findViewById(android.R.id.title);
                View titleBar = (View) title.getParent();
                titleBar.setBackgroundDrawable(gd);

            productsList = new ArrayList<HashMap<String, String>>();

            new LoadAllProducts().execute();

        }

        class LoadAllProducts extends AsyncTask<String, String, String> {
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(PodCast.this);
                pDialog.setMessage("Se incarca. Asteapta...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();

            }

            protected String doInBackground(String... args) {

                List<NameValuePair> params = new ArrayList<NameValuePair>();
                JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

                Log.d("Ultimele 10 piese: ", json.toString());

                try {
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        products = json.getJSONArray(TAG_PRODUCTS);
                        for (int i = 0; i < products.length(); i++) {
                            JSONObject c = products.getJSONObject(i);
                            String link = c.getString(TAG_LINK);
                            String name = c.getString(TAG_NAME);
                            HashMap<String, String> map = new HashMap<String, String>();
                            // String href = String.format("<a href=\"%s\"> %s </a>", link, name);
                            // String cici = Html.fromHtml(href).toString();
                            map.put(TAG_NAME, name);
                            map.put(TAG_LINK, "" + Html.fromHtml(link));
                            // map.put(TAG_LINK, link);
                            productsList.add(map);
                        }
                    } else {

                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
            }

            protected void onPostExecute(String file_url) {

                pDialog.dismiss();
                runOnUiThread(new Runnable() {
                    public void run() {
                        ListAdapter adapter = new SimpleAdapter(
                                PodCast.this, productsList,
                                R.layout.list_item, new String[] {
                                        TAG_NAME, TAG_LINK },
                                new int[] { R.id.link, R.id.name });

                        setListAdapter(adapter);
                    }
                });

            }

        }

} 
```

现在我想弄清楚如何使列表视图中的链接可点击。我正在尝试链接在此处找到的文本视图：

```
protected void onPostExecute(String file_url) {

                pDialog.dismiss();
                runOnUiThread(new Runnable() {
                    public void run() {
                        ListAdapter adapter = new SimpleAdapter(
                                PodCast.this, productsList,
                                R.layout.list_item, new String[] {
                                        TAG_NAME, TAG_LINK },
                                new int[] { R.id.link, R.id.name });

                        setListAdapter(adapter);
                    }
                });

            } 
```

R.layout.list_item 是列表视图的不同 .xml 布局。那你们能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:26:56.630

我觉得不要使用 SimpleAdapter，请扩展 BaseAdapter 并将您正在使用的 textview 设置为 linkify.so 它会自动获得点击。请参考：

[Android 开发者博客](http://android-developers.blogspot.in/2008/03/linkify-your-text.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:38:47.860

把这一行放到你的 textview

`android:autoLink="web"`

我希望这能解决你的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T22:54:46.893

我还想在我的列表适配器上创建一个可链接的 textView，所以我使用了：

```
 Linkify.addLinks(textViewLocationPhone, Linkify.PHONE_NUMBERS);
    textViewLocationPhone.setLinksClickable(true); 
```

它奏效了。

# java - 为什么这个通用分配不起作用？

> ID：11844732
> 
> 赞同：0
> 
> 时间：2012-08-07T11:14:29.120
> 
> 标签：java, generics, wildcard

我有这样的方法：

```
<T extends ImportedGroupTxtContact> Importer<T> createImporter(Class<T> classToImport) 
```

在方法体中这很好：

```
ParseResult<? extends ImportedGroupTxtContact, ?> parseResult = new ParseResult<ImportedGroupTxtContact, ChildContactField<?>>(); 
```

然而这不是：

```
ParseResult<T, ?> parseResult = new ParseResult<ImportedGroupTxtContact, ChildContactField<?>>(); 
```

这对我来说毫无意义，因为`T extends ImportedGroupTxtContact`具有与 相同的上限`? extends ImportedGroupTxtContact`。究竟是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:21:28.477

`T`延伸`ImportedGroupTxtContact`。所以它可以是`ImportedGroupTxtContact`. 让我们将其替换为`Fruit`. 苹果延伸水果。但你做不到

```
Basket<Apple> basket = new Basket<Fruit>(); 
```

事实上，a`Basket<Apple>`只接受苹果，而 a`Basket<Fruit>`接受任何种类的水果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:19:14.093

您正在将 a 分配给`ParseResult<A, B>`可能等于或不等于 的`ParseResult<T, ?>`地方，因此这一定会失败。更准确地说，可以是 的任何子类型。您的第一个示例中的和都具有相同的上限这一事实并未在此处输入等式。`T``A``T``A``T``?`

# c# - C# 站点操作

> ID：11844748
> 
> 赞同：0
> 
> 时间：2012-08-07T11:15:18.570
> 
> 标签：c#

我需要使用 C# 编程语言（Microsoft Visual Studio 2010）进行一些站点操作。它是网站“ [http://m.vk.com](http://m.vk.com) ”。我在这个网站上授权。一切都很正常。授权后的第一个网页是我的个人资料页面。但是当我转到该站点的另一个页面时，我失去了授权。显示了另一个站点页面，但处于非授权模式。我将 cookie 文件保存并写入另一个查询。我接下来编写我的 C# 编程代码：

我使用了这些指令：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using HtmlAgilityPack; 
```

它是主按钮按下后启动的主功能代码：

```
private void button1_Click(object sender, EventArgs e)
{
     string login = textBox1.Text;
     string pass = textBox2.Text;
     bool avt = http_auth_vk(login, pass);

     if (avt == true)
     {
         toolStripStatusLabel1.Text = "Succes authorization !";
     }
     else 
     {
         toolStripStatusLabel1.Text = "Authorization data incorrect !";
     }
 } 
```

这是函数“http_auth_vk”：

```
 public bool http_auth_vk(string login, string pass)
    {
        //*****************************
        //Получаем action_url
        //*****************************
        System.Net.ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
        System.Net.WebRequest reqGET = System.Net.WebRequest.Create("http://m.vk.com/");
        System.Net.WebResponse resp = reqGET.GetResponse();
        System.IO.Stream stream = resp.GetResponseStream();
        System.IO.StreamReader sr = new System.IO.StreamReader(stream);
        string s = sr.ReadToEnd();

        //*****************************
        //Парсим
        //*****************************
        // Создаём экземпляр класса
        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        // Загружаем в класс (парсер) наш html
        doc.LoadHtml(s);
        // Извлекаем значения
        HtmlNode bodyNode = doc.DocumentNode.SelectSingleNode("//div[@class='cont']/form");
        // Выводим на экран значиение атрибута src
        // у изображения, которое находилось
        // в теге <div> в слассом bla
        string result1 = bodyNode.Attributes["action"].Value;

        //*****************************
        //POST запрос
        //*****************************
        var cookies = new CookieContainer();
        ServicePointManager.Expect100Continue = false;
        var request = (HttpWebRequest)WebRequest.Create(result1);
        request.CookieContainer = cookies;
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        using (var requestStream = request.GetRequestStream())
        using (var writer = new StreamWriter(requestStream))
        {
            writer.Write("email=" + login + "&pass=" + pass);
        }

        using (var responseStream = request.GetResponse().GetResponseStream())
        using (var reader = new StreamReader(responseStream))
        {
            var result = reader.ReadToEnd();

            //*****************************
            //Парсим, поиск ID
            //*****************************                 
            HtmlAgilityPack.HtmlDocument doc2 = new HtmlAgilityPack.HtmlDocument();                
            doc2.LoadHtml(result);
            string result2;
            try
            {
                //textBox3.Text = result;

                HtmlNode bodyNode2 = doc2.DocumentNode.SelectSingleNode("//div[@class='user_wrap']/a");
                result2 = bodyNode2.Attributes["href"].Value.Substring(3);
                //Если ID найден, то авторизация удалась

                //ПЕРЕХОД НА СТРАНИЦУ ГРУППЫ

                //string sLocation = myHttpWebResponse.Headers["Location"];

                // получам cookie
                string sCookies = "";
                if (!String.IsNullOrEmpty(resp.Headers["Set-Cookie"]))
                {
                    sCookies = resp.Headers["Set-Cookie"];
                }

                MessageBox.Show(sCookies);

                // формируем запрос
                HttpWebRequest myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create("http://m.vk.com/id100669061");
                //myHttpWebRequest.Proxy = new WebProxy("127.0.0.1", 8888);

                myHttpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; MyIE2;";
                myHttpWebRequest.Accept = "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-shockwave-flash, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*";
                myHttpWebRequest.Headers.Add("Accept-Language", "ru");
                myHttpWebRequest.ContentType = "text/plain";

                if (!String.IsNullOrEmpty(sCookies))
                {
                    myHttpWebRequest.Headers.Add(HttpRequestHeader.Cookie, sCookies);
                }

                // выполняем запрос
                HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

                StreamReader myStreamReader = new StreamReader(myHttpWebResponse.GetResponseStream(), Encoding.GetEncoding(1251));

                textBox3.Text = myStreamReader.ReadToEnd();

                MessageBox.Show(myStreamReader.ReadToEnd());

                //Console.WriteLine(myStreamReader.ReadToEnd());
                //Console.ReadKey();

                return true;
            }
            catch
            {
                //textBox3.Text = result;

                //Если ID не науден, то авторизация не удалась
                MessageBox.Show("Authorization error !");

                return false;
            }
        }
    } 
```

下一页通过后如何保存授权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:44:01.870

经过一番调查，我相信我发现了你的问题。.NET 框架将为您处理 cookie，您无需担心设置 cookie 或保存 cookie 以供以后使用，但您需要为所有请求使用相同的 CookieContainer。

因此，首先设置您要使用的 cookie 容器：

```
var cookies = new CookieContainer(); 
```

您也可以删除所有使用 sCookies 的代码。

```
string sCookies = "";
if (!String.IsNullOrEmpty(resp.Headers["Set-Cookie"]))
{
      sCookies = resp.Headers["Set-Cookie"];
}
MessageBox.Show(sCookies); 
```

在第二个/第三个请求中，而不是这样：

```
 if (!String.IsNullOrEmpty(sCookies))
        {
            myHttpWebRequest.Headers.Add(HttpRequestHeader.Cookie, sCookies);
        } 
```

你需要有这个（CookieContainer）

```
myHttpWebRequest.CookieContainer = cookies; 
```

# html - 页面在 FIREFOX 上不显示内容，但在 Chrome 甚至 IE 中显示

> ID：11844753
> 
> 赞同：1
> 
> 时间：2012-08-07T11:15:39.520
> 
> 标签：html, css, firefox, background, css-float

奇怪的是，我的一个页面的某些方面没有显示在 FireFox 上。我已将问题缩小到这个：

主页（适用于所有浏览器）`<div id="wrapper">`具有以下 CSS：

```
margin: 0px auto;
width: 1000px;
background-color: #272727;
min-height: 100%; /* ie6 ignores min-height completely */
height: 100%;
background-size:100%; 
```

这确保了漂亮的灰色背景。此外，我正在使用砖石 jquery 脚本来浮动我所有的东西。在我所有的花车结束时，我用以下命令清除它们：

```
<div style="clear: both;"></div> 
```

这使一切变得完美。但是在另一个页面上，这似乎不起作用，所以我将这行代码添加到包装器样式中（对于该页面）

```
style="overflow: auto;" 
```

现在在 IE 和 Chrome 上一切都很好，并且恢复了背景，但在 Firefox 上，内容或背景都看不到。删除代码时，内容在那里，但背景不存在。

为什么是这样？最让我吃惊的是 IE 可以工作而 Firefox 没有？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:31:14.053

**编辑：**

在**包装器**css中添加`clear:both`或`clear:left`和。`overflow:auto;`

 **```
#wrapper {
    background-color: #272727;
    background-size: 100% auto;        
    height: 100%;
    margin: 0 auto;
    min-height: 100%;
    width: 1000px;
    clear: both; /* Added Clear Property */
    overflow:auto; /* Added Overflow Property */
} 
```

因为**wrapper**上方的**tagbar** 是向左浮动的，所以需要清除浮动。`<div>` **`<div>`**

 **[http://img841.imageshack.us/img841/3145/imgej.png](http://img841.imageshack.us/img841/3145/imgej.png)****

# jquery - 使用 jquery.load() 加载 div

> ID：11844757
> 
> 赞同：0
> 
> 时间：2012-08-07T11:15:48.773
> 
> 标签：jquery, load

我创建了一个网页并使用 load() 函数将页面加载到固定 div 上。但是在连续点击不同的链接时……整个网页停止响应。

这是我加载页面的代码：

```
$( document ).ready( function() {  

        $('a').bind('click' , function( e ) {
            e.preventDefault();   // prevent the browser from following the link
            e.stopPropagation();  // prevent the browser from following the link

            $( '#part1' ).load( $( this ).attr( 'href' ) );
        });
    }); 
```

当我单击上述 load() 函数的链接时，我还想更改 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:21:43.220

通过连续单击，您将添加一堆在后面运行的异步请求。它们都需要处理。`#part1`因此，每次请求返回时，浏览器都会将其内容添加到并呈现它。这可能是页面没有响应的原因。

**编辑**

您可以显示一个指示器，让用户知道他正在做某事并防止再次执行加载。以下示例显示了在加载零件时防止执行加载。

```
$( document ).ready( function() {  
    var isLoading = false;

    $('a').bind('click' , function( e ) {
        e.preventDefault();   // prevent the browser from following the link
        e.stopPropagation();  // prevent the browser from following the link
        if(!isLoading){
           //start loading
           isLoading = true;
           $( '#part1' ).load( $( this ).attr( 'href' ), function(response, status, xhr) {
               //this is the callback method for success or failure
               //stop loading
               isLoading = false; 
           });
        }
    });
}); 
```

指标的显示/隐藏不应该那么难添加。开始加载时显示，停止加载时隐藏。

# javascript - html下拉选择值

> ID：11844762
> 
> 赞同：0
> 
> 时间：2012-08-07T11:15:59.710
> 
> 标签：javascript, html

我的 html 页面中有一个下拉列表，其中包含大约 5 个值：A、B、C、D、E。当我选择 C ​​并刷新页面时，我想将所有选定的值重置为默认页面。我怎么做？目前，当我刷新页面时，下拉值显示先前选择的值。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:26:28.157

您可以向**body**的**onload**函数添加一个函数，并将下拉列表的选定值设置为所需的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:29:10.783

将**[autocomplete="off"](https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion)**添加到您的标签中，这样它就不会自动填充字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:49:22.627

```
You can try this:
<select autocomplete="off">
        <option value="">Select none</option>
        <option value="1">A</option>
        <option value="2">B</option>
        <option value="3">C</option>
        <option value="4">D</option>
        <option value="5">E</option>
      </select>
  [1]: http://jsfiddle.net/nR6CP/2/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:35:05.117

只需将`selected="selected"`属性添加到`<option>`标记，这将使其成为默认选择的下拉列表值，而不是使用 JavaScript。

```
<form>
  <select>
    <option value="default" selected="selected">Select A Letter:</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
    <option value="E">E</option>
  </select>
</form>​​​ 
```

**[JSFIDDLE](http://jsfiddle.net/nR6CP/)**

# nhibernate - NHibernate 升级使用具有类型约束的方法破坏 EntityBase

> ID：11844763
> 
> 赞同：3
> 
> 时间：2012-08-07T11:16:00.473
> 
> 标签：nhibernate, fluent-nhibernate

提前为长篇道歉。我希望有人能帮忙。

我被要求在 ASP.NET 应用程序中升级 NHibernate（从 2.1.2.4000 到 3.3.1.4000）和 Fluent NHibernate（从 1.1.0.685 到 1.3.0.0）。我是 NHibernate 的新手，但已经花了几个星期的时间来解决这个问题，所以我对此有所了解。

例如，我知道新版本的 NHibernate 有一个内置的代理生成器，所以我删除了对旧的 NHibernate.ByteCode.Castle.dll 的任何引用，这是我们之前使用的代理生成器，摆脱了引用从 nhibernate.config 到该文件，目的是使用内置代理。

我已经成功地解决了各种问题，但遇到了一个我被困住的问题，而且我在网上找到的任何东西似乎都与它完全对应。这令人惊讶，因为我原以为进行此类升级的任何人都会遇到此问题，但也许这只是我们编写 Entity Base 类的方式。

有两种 Visual Studio 解决方案，一种是“框架”解决方案，其中包含 EntityBase 类，另一种是主应用程序解决方案，它使用来自框架解决方案的 DLL。

在 EntityBase 类中，有两种方法返回“真实”对象而不是代理，非常类似于此处描述的“As”方法：http: [//sessionfactory.blogspot.com/2010/08/hacking-lazy-loaded -继承.html](http://sessionfactory.blogspot.com/2010/08/hacking-lazy-loaded-inheritance.html)

据我了解，这些方法本质上是返回由 NHibernate 代理对象包装的“真实”（域）对象。在我的情况下，有问题的方法称为“CastTo”和“AsOfType”。似乎是这些方法的类型限制导致了我的问题。

这是我的 EntityBase 类中的相关代码：

```
/// <summary>
/// Represents the base class for a domain entity.
/// </summary>
/// <typeparam name="TIdentity">The type of the identity.</typeparam>
/// <remarks>
/// This class implements all the interfaces that all domain entities must have.
/// </remarks>
[Serializable]
public abstract class EntityBase<TIdentity> : IAuditable, IEntity<TIdentity>, IPersistent
{
    /// <summary>
    /// Casts to.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    public virtual T CastTo<T>() where T : EntityBase<TIdentity>
    {
        return (T)this;
    }

    /// <summary>
    /// Casts this entity to the type passed in.
    /// This is required when trying to cast from a proxy.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    public virtual T AsOfType<T>() where T : EntityBase<TIdentity>
    {
        return this as T;
    } 
```

因此，当我在主应用程序解决方案中运行单元测试时，我会收到如下错误：

创建代理实例失败---> System.TypeLoadException：来自程序集'LocationProxyAssembly，Version = 0.0.0.0，Culture = Neutral，PublicKeyToken = null'的类型'LocationProxy'的方法'AsOfType'试图隐式覆盖具有较弱类型的方法参数约束。

因此，创建 NHibernate 代理的 Reflection.Emit 代码似乎在抱怨 AsOfType 和 CastTo 方法的类型约束。

所以我想我会稍微放松一下这些约束，而不是在类型约束中使用泛型，我会尝试只使用“Entity”作为约束（从 EntityBase 派生的类）。所以我尝试了以下方法（是的，我知道这两种方法本质上是做同样的事情，但我只是试图保留 EntityBase 类的接口以避免破坏对这些方法的所有调用）：

```
[Serializable]
public abstract class EntityBase<TIdentity> : IAuditable, IEntity<TIdentity>, IPersistent
{
    /// <summary>
    /// Casts to.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    public virtual T CastTo<T>() where T : Entity
    {
        if (!typeof(T).IsAssignableFrom(GetType()))
        {
            throw new InvalidCastException();
        }

        return this as T;
    }

    /// <summary>
    /// Casts this entity to the type passed in.
    /// This is required when trying to cast from a proxy.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    public virtual T AsOfType<T>() where T : Entity
    {
        return this as T;
    } 
```

所以现在测试以不同的方式失败了。我有一个看起来像这样的单元测试：

```
 /// <summary>
    /// Tests the type of the get real.
    /// </summary>
    [TestMethod, TestCategory("Integration")]
    public void TestEntityProxyCastToMethod()
    {
        using (var unitOfWork = UnitOfWork.Begin(Database.MainSolution.Name()))
        {
            var person = unitOfWork.GetProxy<Person>(new Guid("E196BC94-DFBA-4D6C-B504-03E00F5CA914"));

            Assert.IsTrue(person.IsOfType<Employee>());

            var employee = person.AsOfType<Employee>();

            Assert.IsNotNull(employee);
        }
    } 
```

现在运行单元测试时抛出的异常是：

测试方法 MainSolution.Data.Tests.EntityProxyTests.TestEntityProxyCastTo 抛出异常：System.InvalidOperationException：不能对 ContainsGenericParameters 为 true 的类型或方法执行后期绑定操作。

所以这似乎仍然是一些 Reflection.Emit 错误，当 NHibernate 尝试生成代理时就会发生这种错误。很明显，NHibernate 现在生成其代理的方式与我们编写 EntityBase 类的方式不兼容。当我们使用 NHibernate.ByteCode.Castle.dll 生成代理时，它曾经工作正常，但显然对这些方法的类型约束不满意。

现在，我看到过这样的帖子（ [Nhibernate：获取真实实体类而不是代理类](https://stackoverflow.com/questions/5454621/nhibernate-get-real-entity-class-instead-of-proxied-class) ），这表明我们应该只“取消代理”该类以获取底层“真实”对象。但这意味着更改这些方法的签名（可能），中断对“CastTo”和“AsOfType”方法等的所有调用。据我了解，我必须获得一个 UnitOfWork，从中获取当前会话，然后执行“Unproxy”来获取底层对象，而使用当前代码，我们所要做的基本上就是返回“this as T”，它就可以工作了。我想也许我可以在调用代码中获取当前会话，然后将其传递给 EntityBase 上的某个方法，

所以问题是：a）我做错了什么，b）在 3.3\. NHibernate 的版本，以及 c) 有没有办法在我的 EntityBase 类上保留“CastTo”和“AsOfType”方法的现有签名，同时仍然让 NHibernate 正确生成其代理而不抱怨这些方法的类型约束？

任何帮助表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T16:11:22.200

它存在JIRA问题：

*   [https://nhibernate.jira.com/browse/NH-2726](https://nhibernate.jira.com/browse/NH-2726)
*   [https://nhibernate.jira.com/browse/NH-2819](https://nhibernate.jira.com/browse/NH-2819)

甚至还有一个拉取请求，遗憾的是它还没有被拉取：

*   [https://github.com/nhibernate/nhibernate-core/pull/129](https://github.com/nhibernate/nhibernate-core/pull/129)

**编辑：**拉取请求已被拉取，因此已修复此特定问题。但是还有另一个问题也会影响 .NET 2.0 运行时：[https ://nhibernate.jira.com/browse/NH-3244](https://nhibernate.jira.com/browse/NH-3244)

但是您只使用“实体”作为约束的代码现在应该可以工作了。

# javascript - javascript中计算不正确的问题

> ID：11844764
> 
> 赞同：1
> 
> 时间：2012-08-07T11:16:07.963
> 
> 标签：javascript, validation, acrobat

```
 var spring = this.getField("Calibration_Spring_Value_low").value;
    if (event.value > (spring + .2) || event.value < spring - .2) {
        event.rc = false
        app.alert("Value is out of range");
        } 
```

上面的代码片段用于 Adob​​e Acrobat 中数据表单的字段验证。当我按照书面方式运行它时，将事件值与 Spring 值的 +/- .2 进行比较，它可以正常工作。但是，当我为“弹簧”值输入 19.9 时，表单将拒绝 20.1 的值。这似乎是唯一失败的一组值。

我设法通过将声明更改为这个来为其贴上创可贴

```
if (event.value >= (spring + .3) || event.value  < spring -.2) { 
```

是否有任何见解为什么会以这种方式执行，以及我如何正确解决问题并确保它将正确执行所有输入的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:27:00.590

用括号试试？

```
if (event.value > (spring + .2) || event.value < (spring - .2)) { 
```

# javascript - 无法使用 JavaScript 在下拉框中获取所选值

> ID：11844765
> 
> 赞同：0
> 
> 时间：2012-08-07T11:16:10.040
> 
> 标签：javascript, html

在[这个线程](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)中，描述了如何使用 JavaScript 从下拉框中获取选定的值。我一直在尝试按照该线程中的说明进行操作，但无法使其正常工作。

这是我正在尝试做的一个最小（非工作）示例。代码应该从下拉框中打印第二个选项的值，但是我`Uncaught TypeError: Cannot read property 'options' of null`在第 11 行的 Chrome 的 JavaScript 控制台中收到以下错误（即，当我定义第二个变量时）。

```
<html>
  <body>
    <select name='a_drop_down_box'>
        <option value='1'>One</option>
        <option value='2' selected='selected'>Two</option>
        <option value='3'>Three</option>
    </select>
    <p id='message'></p>
    <script type="text/javascript">
        var test = document.getElementById("a_drop_down_box");
        var testValue = test.options[test.selectedIndex].value;
        document.getElementById('message').innerHTML=testValue;
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:18:09.783

```
document.getElementById("a_drop_down_box"); 
```

您是否注意到您没有为选择项定义一个 id？

该`name`属性用于标识使用表单发送的请求的表单元素。您应该使用 id 从 dom 中检索它。

或者，如果您的选择位于表单内，则可以使用：

```
document.getElementById("myForm").elements["a_drop_down_box"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:17:51.377

你忘了给你`<select>`一个`id`属性。

```
<html>
  <body>
    <select id='a_drop_down_box' name='a_drop_down_box'>
        <option value='1'>One</option>
        <option value='2' selected='selected'>Two</option>
        <option value='3'>Three</option>
    </select>
    <p id='message'></p>
    <script type="text/javascript">
        var test = document.getElementById("a_drop_down_box");
        var testValue = test.options[test.selectedIndex].value;
        document.getElementById('message').innerHTML=testValue;
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:17:52.837

下拉列表的`name`属性是“a_drop_down_box”——你认为这是它的`id`.

每当您收到“...未定义”错误时，这意味着您认为您正在处理的对象（或元素，在您的情况下）尚未找到。因此，在想知道为什么会发生错误之前，请务必确认这一点。在你的情况下，你可以这样做：

```
alert(test); //undefined - no element found with that ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T11:31:34.663

您忘记将 id 添加到您的选择标签

```
var e = document.getElementById("a_drop_down_box");
var strUser = e.options[e.selectedIndex].value; 
```

将返回 2。如果您愿意 `Two`，请执行以下操作：

```
var e = document.getElementById("a_drop_down_box");
var strUser = e.options[e.selectedIndex].text; 
```

这是一个简单的例子 [http://jsfiddle.net/VCerV/3/](http://jsfiddle.net/VCerV/3/)

# text - 不要在 ActionBar 导航选项卡 Android 4.x 中换行

> ID：11844766
> 
> 赞同：6
> 
> 时间：2012-08-07T11:16:19.447
> 
> 标签：text, tabs, android-actionbar, word-wrap

我正在使用 ActionBar.Tabs (4.x)，如果我在标题中有更长的文本，它会被换成 2 行，就在单词的中间。

喜欢：标签上的文本= ABCDEF：

> ABCDE
> 
> F

这是非常丑陋的。 [看截图](http://www.shareimage.org/images/zzdapdvz8yltn3pt7dg.jpg)

如何防止 ActionBar.Tabs 换行文本，并使标签变宽？谢谢

# c++ - 使用 natvis 的循环双链表可视化

> ID：11844774
> 
> 赞同：1
> 
> 时间：2012-08-07T11:17:04.167
> 
> 标签：c++, visual-studio, debugging, debuggervisualizer, natvis

我想为双链表编写一个[natvis 可视化工具。](http://code.msdn.microsoft.com/Writing-type-visualizers-2eae77a2)该列表没有存储计数节点，并且简单的方法效果不佳，因为扩展永远不会停止（next 永远不会为空，列表的最后一项指向列表根）。

```
<Type Name="TListBidir&lt;*&gt;">
    <Expand>
        <LinkedListItems>
            <HeadPointer>next</HeadPointer>
            <NextPointer>next</NextPointer>
            <ValueNode>($T1 *)this</ValueNode>
        </LinkedListItems>
    </Expand>
</Type> 
```

我希望我能够添加一个 Condition 属性，将 NextPointer 与列表头进行比较，但是由于 NextPoint 在节点的上下文中进行评估，我不知道将其与什么进行比较：

```
<NextPointer Condition="next!=XXXXXXXXX">next</NextPointer> 
```

这是使用 skip 指令的以前（2010）可视化工具的样子，因为[#list 会自动处理](http://www.virtualdub.org/blog/pivot/entry.php?id=120)：

> `#list`可以防止无限遍历，并且可以优雅地处理循环列表。此外，您可以使用`skip:`表达式来表示不应报告的哨点节点。虽然名字暗示该节点将被跳过，但它实际上会导致遍历停止，所以如果你的哨兵节点是第一个，你应该在它之后开始遍历。

```
TListBidir<*,*,*>{
    children
    (
      #list(
        head: ((($T2 *)&$c)->next),
        next: next,
        skip : &($c)
      ): (($T1 *)(&$e))
    )
} 
```

我如何在 natvis 中向调试器解释它一旦再次到达根元素就应该停止扩展列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-09T15:04:09.933

我有一个类似的问题，不是循环列表，而是在末尾有一个指向自身的哨兵节点，并提出了一个可能适合您需求的有趣解决方案：您可以使用三元运算符伪造一个真正的终止。里面的表达式`<NextPointer>`可以是任何你可以用 vanilla C 写的东西，所以你可以在那里进行真正的计算（但遗憾的是，没有递归）。

（请注意，您不能在 上放置`Condition`属性`<NextPointer>`，因此三元运算符是在那里完成条件的唯一方法。）

所以在我的情况下，列表像这样终止：

```
<LinkedListItems>
    <HeadPointer>this</HeadPointer>
    <NextPointer>next != this ? next : 0</NextPointer>
    <ValueNode>items</ValueNode>
</LinkedListItems> 
```

在您的情况下，如果每个节点都有一个指向其容器的指针，您可以使用它与头节点进行比较：

```
<LinkedListItems>
    <HeadPointer>container-&gt;head</HeadPointer>
    <NextPointer>next != container-&gt;head ? next : 0</NextPointer>
    <ValueNode>items</ValueNode>
</LinkedListItems> 
```

或者，没有`&gt;`实体并写成更传统的 C，这相当于：

```
next != container->head ? next : NULL 
```

但是，如果您没有某种`container`反向指针，那么您可能对此不走运，因为无法通过仅查看循环链接列表中的单个节点来回答它是否实际上是“最后一个“节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-22T16:20:40.383

你可以用一个`CustomListItems`元素来做到这一点：

```
<CustomListItems>
    <Variable Name="orig_head" InitialValue="head"/>
    <Variable Name="iter" InitialValue="first_elem"/>
    <Loop>
        <Break Condition="iter == orig_head || iter == 0"/>
        <Item>*iter</Item>
        <Exec>iter = iter-&gt;next_elem</Exec>
    </Loop>
</CustomListItems> 
```

`CustomListItems`允许您将头部保存在变量中，以便在遍历列表时使用它。如果您的头部具有不同的类型，那么您需要将列表节点转换为节点类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T20:09:19.907

natvis 框架目前不支持没有提供计数的循环链表。如果您提供计数，它应该可以工作。但是，如果没有计数，就没有好的方法可以阻止扩张永远持续下去。

# ios - 旧的 mysqlite.db 文件复制到模拟器文件夹中，即使我删除了它 ios

> ID：11844775
> 
> 赞同：0
> 
> 时间：2012-08-07T11:17:10.443
> 
> 标签：ios, xcode, file, sqlite, copy

这很奇怪。我有一个带有 sqlite 文件（mysqlite.db）的 xcode 项目我在 xcode 中更新了这个文件，但是当我使用模拟器时，旧版本出现了。我删除了整个模拟器文件夹，当我启动模拟器时，旧文件仍然出现。我什至取消了文件并重命名了它。旧文件（旧名称）仍然存在，在 myapp.app 中，即使它不在计算机中。

它必须缓存在某个地方，但在哪里？

你有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:44:17.370

你试过清理你的项目吗？Xcode > 项目 > 清理。

如果这不起作用，请考虑从模拟器中删除应用程序，清理然后再次运行它。

# c++ - 将matlab连接到c语言dll

> ID：11844776
> 
> 赞同：0
> 
> 时间：2012-08-07T11:17:11.890
> 
> 标签：c++, c, matlab, dll

我正在尝试在 matlab 中使用 clllib 函数我将 .dll 文件和 .h 文件放在与正在开发的 .m MATLAB 文件相同的目录中，之后我尝试使用 loadlibrary 函数 bui 它有一些警告

警告：

```
Warning: 
Message from C preprocessor:

lcc preprocessor error: C:\Users\MAHNAZ\Documents\MATLAB\T1Header.h:1 Could not find include file
<iostream>

lcc preprocessor warning: C:\Users\MAHNAZ\Documents\MATLAB\T1Header.h:21 EOF inside comment

> In loadlibrary at 351

Warning: The function 'Add' was not found in the library

> In loadlibrary at 435

Warning: The function 'Function' was not found in the library

> In loadlibrary at 435 
```

当我想使用这样的`calllib`函数时：`calllib('t1', 'Add', 2,3)`matlab 给我一个错误：

```
??? Error using ==> calllib Method was not found. 
```

我的头文件是：

```
#ifndef T1_HEADER_H
#define T1_HEADER_H
extern int Add( int a, int b );
extern void Function( void );
#endif 
```

我的源文件是：

```
#include iostream
#include "T1Header.h"

  extern int Add( int a, int b )
   {
       return( a + b );
   }

  extern void Function( void ) 
  { 
     std::cout << "DLL Called!" << std::endl;
  } 
```

我使用 Visual c++ 2010 和 Matlab 7.6.0(R2008a)

关于什么是错误的任何建议，我可以做些什么来修复这个错误，或者我可以尝试从 MATLAB 中调用这个 .dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:24:13.793

前面的一些注释和评论：

*   加载 iostream 的错误听起来有点像代码被处理为 C 而不是 C++。
*   您粘贴的源文件名称周围没有尖括号`iostream`，但我猜他们在您写这篇文章时丢失了。
*   `extern`当您定义它们时，这些功能不应该是。
*   您粘贴的错误消息提到了未包含在您的粘贴中的评论。
*   我对 matlab 甚至查看标题感到有点惊讶，我会假设它只使用 DLL 文件。

但是这个问题的主要原因，假设最终创建了 DLL 文件，应该是这样的：Matlab 可能会想要使用**C 调用约定**，所以你应该`extern "C" { … }`在头文件和实现中将你的函数包含在块中。

# python - 当某些项目相互依赖时，如何运行异步进程列表？

> ID：11844780
> 
> 赞同：3
> 
> 时间：2012-08-07T11:17:27.803
> 
> 标签：python, asynchronous, callback, twisted, process

我有一个需要运行的动态生成进程（带参数的命令行库）的列表。

我知道其中一些是相互依赖的。我已经有一些包含此信息的对象。例如，standalone_exec_item 包含 process_data.process_id 和dependent_on_process_ids（这是一个进程 ID 列表。）

目前我正在考虑使用多处理库来异步运行进程列表，如下所示：

```
from multiprocessing import Process
import subprocess

def execute_standalone_exec_items(standalone_exec_items):

        standalones = []

        def run_command(command):
            output = subprocess.check_output(shlex.split(command))
            return output

        for standalone_exec_item in standalone_exec_items:
            standalone_command = generate_command(standalone_exec_item.process_data)

            standalone = Process(
                target=run_command,
                args=(standalone_command,)
            )
            standalones.append(standalone)

        for standalone in standalones:
            standalone.start()

        while True:
            flag = True
            for standalone in standalones:
                if standalone.is_alive():
                    flag = False
            if flag:
                break 
```

但是我想知道在运行依赖进程之前是否有更好的方法来等待异步进程运行。我可以使用回调吗？我听说过 Twisted 的 deferred，我可以用这个吗？

最佳做法是什么？

编辑：Popen 是非阻塞的并且我不需要使用多处理是否正确？还是我需要使用 fcntl()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:26:03.100

我会使用一个消息队列，其中一些进程发布消息，被调用的进程将订阅这些消息。

# powershell - 从远程计算机卸载程序

> ID：11844781
> 
> 赞同：1
> 
> 时间：2012-08-07T11:17:33.717
> 
> 标签：powershell

我想从远程计算机上卸载程序。我知道用于安装的 MSI 的位置，它在远程服务器上，路径可以在下面的变量`$MSIPathFile`中看到。

当我运行以下脚本时：

```
$TargetServer = "d-vasbiz01"
$MSIPathFile = "c:\biztalkdeployment\x.Int.MIS-3.0.0.msi"

Invoke-Command -Computer $TargetServer -ScriptBlock {Param($MSIPathFile, $UninstallFlag, $QuietFlag) Start-Process msiexec.exe "/x" $MSIPathFile "/qn"} -ArgumentList "$MSIPathFile", "/x", "/qn" 
```

我收到以下错误：

```
Invoke-Command -Computer $TargetServer -ScriptBlock {Param($MSIPathFile, $UninstallFlag, $QuietFlag) Start-Process msiexec.exe "/x" $MSIPathFile "/qn"} -ArgumentList "$MSIPathFile", "/x", "/qn"
A positional parameter cannot be found that accepts argument 'c:\biztalkdeployment\x.Int.MIS-3.0.0.msi'.
+ CategoryInfo          : InvalidArgument: (:) [Start-Process], ParameterBindingException
+ FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.PowerShell.Commands.StartProcessCommand 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:59:55.737

这并不是我的问题的真正答案，但它解决了我远程卸载 MSI 的问题。我希望这可以帮助其他人，因为我在过去的 3 个小时里尝试了各种技术！

事实证明，这可以通过一行代码来实现！

(Get-WmiObject -Class Win32_Product -Filter "Name='x.Int.MIS for BizTalk 2010 3.0.0'" -ComputerName $TargetServer).Uninstall()

由以下技术网页面提供：[http ://technet.microsoft.com/en-us/library/dd347651.aspx](http://technet.microsoft.com/en-us/library/dd347651.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:45:02.757

抱歉，由于我正在回复，PC 的后期编辑崩溃了，所以它更新了一半。

问题是 start Start-Process 似乎没有扩展变量并使用命令执行它。因此，我要做的就是构建一个包含可执行文件路径的字符串，然后构建一个包含我想使用的参数的字符串。然后我使用 Invoke-expression 命令来执行它。下面是一个例子，如果你喜欢我可以编辑你的代码，但我想你可能会喜欢一个例子和解释。

```
$MSIPathFile = "c:\biztalkdeployment\x.Int.MIS-3.0.0.msi"

$msiexec = "C:\Windows\System32\msiexec.exe"
$arguments = '/x' + $MSIPathFile + " /qn"
Invoke-Expression  -Command "$msiexec $arguments" 
```

# refactoring - Javascript 重构常被称为函数

> ID：11844784
> 
> 赞同：0
> 
> 时间：2012-08-07T11:17:43.587
> 
> 标签：refactoring, dry, javascript

我使用 javascript 已经很长时间了，但我经常遇到以下代码：

```
function1 () {
  // do stuff
  ...
  end_function();
}

function2 () {
  // do stuff
  ...
  end_function();
}

function3 () {
  // do stuff
  ...
  end_function();
} 
```

我知道这与 DRY 原则相冲突，但不幸的是，我不知道如何处理它来消除重复。有人知道答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:10:18.343

有很多解决方案。

一种方法是包装函数，如“我不是”的答案，

另一个是使用高阶函数。

```
var end_function = function(callback){

    callback.call();

    // do some stuff 
};

var stuff1 = function(){};
var stuff2 = function(){}:

end_function(stuff1);
end_function(stuff2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:42:06.030

`end_function`如果您直接将其编码到其他函数中，它将与 DRY 冲突。最终，您确实需要*一些*语法来调用您抽象为自己的函数的代码。

如果函数被组合成一个对象，我想你可以枚举对象的属性，并包装每个函数，但这可能只有你拥有许多这些函数才值得。

```
var funcs = {
    function1 () {
      // do stuff
    },
    function2 () {
      // do stuff
    },
    function3 () {
      // do stuff
    }
}; 
```

* * *

```
Object.keys(funcs).forEach(function(key) {
    var orig = funcs[key];
    funcs[key] = function() {
        orig.apply(this, arguments);
        end_function();
    };
}); 
```

# java - 带有固定选项卡的操作栏

> ID：11844787
> 
> 赞同：0
> 
> 时间：2012-08-07T11:17:51.750
> 
> 标签：java, android, android-layout, android-tabhost, android-actionbar

现在在我的应用程序中，我有一个[`TabActivity`](http://developer.android.com/reference/android/app/TabActivity.html)带有三个固定选项卡的选项卡，每个选项卡都包含一个标准`Activity`.

这是相关的代码片段：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.tab_activity);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, Tab1Activity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("tab1").setIndicator("Tab 1", res.getDrawable(R.drawable.Tab1Icon)).setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, Tab2Activity.class);
    spec = tabHost.newTabSpec("tab2").setIndicator("Tab 2", res.getDrawable(R.drawable.Tab2Icon)).setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Tab3Activity.class);
    spec = tabHost.newTabSpec("tab3").setIndicator("Tab 3", res.getDrawable(R.drawable.Tab3Icon)).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
} 
```

这样，每次我选择一个选项卡时，应用程序都会在屏幕上显示`Activity`与该选项卡相关联的内容。

我想使用[`ActionBar`](http://developer.android.com/design/patterns/actionbar.html#considerations-split-action-bars)设计模式来获得相同的结果。

现在我只对固定选项卡布局感兴趣，如您[在此处](http://developer.android.com/design/patterns/actionbar.html#elements)看到的：

![在此处输入图像描述](../Images/e1d89cacff63e99ce537242ffc1fcc13.png)

我应该如何更改我的代码？

这些 SO 问题并没有太大帮助：

*   [ActionBar 选项卡 - 固定和可滚动？](https://stackoverflow.com/questions/10243945/actionbar-tabs-fixed-and-scrollable)
*   [具有多个片段的 ActionBar 选项卡](https://stackoverflow.com/questions/9216108/actionbar-tabs-with-multiple-fragments)
*   [在 Android 4 上自定义 ActionBar 选项卡](https://stackoverflow.com/questions/10272812/customizing-actionbar-tabs-on-android-4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:38:54.870

> 这样，每次我选择一个选项卡时，应用程序都会在屏幕上显示与该选项卡关联的活动。

这种方法已正式弃用。

> 我想使用 ActionBar 设计模式来获得相同的结果。我应该如何更改我的代码？

最直接的方法是将那些嵌套的活动转换为片段，然后`FragmentTransaction`随着所选选项卡的变化而提交。如果您使用的是本机 API 级别 11 操作栏，您可以使用本机 API 级别 11`Fragment`类并`FragmentTransaction`传入您的`TabListener`. 如果您想使用 ActionBarSherlock，您将最终使用 Android 支持包中的`Fragment`and `FragmentTransaction`。

# excel - 复制到剪贴板的 Unix 编程

> ID：11844791
> 
> 赞同：2
> 
> 时间：2012-08-07T11:18:03.860
> 
> 标签：excel, unix, ubuntu

知道我是否可以使用 unix 命令将文本从 unix 中的文件复制到剪贴板？

我不能使用 xclip 和 xsel，因为我的公司不允许我安装 utils。

因此我想知道是否有任何解决方法

如果有人需要我在这里所做的事情的背景：

我正在使用 excel 宏启动 putty，然后使用 excel 宏向 putty 发送命令。此过程的一部分要求我将文本或某些文本复制到剪贴板并将其粘贴到我的 Excel 工作表中的活动单元格中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:02:15.957

It is unlikely that `xclip` or `xsel` would be useful here, unless you actually start an X application from `PuTTY`.

If your excel macros allow the capture of any command output, you could use [`Plink`](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter7.html), the cli tool which is included in a full PuTTY installation. You still need to address any issues with remote access (creating and managing public/private keypairs for authentication.)

Check the [PuTTY docs](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/index.html) for more information.

# objective-c - 可可：如何在不使用 CALayer 的情况下将视图的背景颜色设置为可可中的浅绿色？

> ID：11844799
> 
> 赞同：1
> 
> 时间：2012-08-07T11:18:26.803
> 
> 标签：objective-c, cocoa

我想在不使用 CALayer 的情况下设置视图的背景颜色。

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:48:13.693

您没有指定您是在谈论 AppKit (OSX) 还是 UIKit (iOS)。我假设您在谈论 AppKit，因为大多数来自 UIKit 的人都会遇到这个问题。

NSView 本身并不绘制背景或背景颜色。您必须继承 NSView 并在 中绘制自己的颜色`drawRect`，或者使用 AppKit 中提供的 NSBox 绘制背景。

如果你将 NSView 子类化，那么你的`drawRect`方法可能如下所示：

```
- (void) drawRect:(NSRect)dirtyRect {
    [[NSColor blackColor] setFill];
    NSRectFill(dirtyRect);
} 
```

如果你决定使用 NSBox，那么你可以这样设置背景颜色：

```
[myBox setFillColor:[NSColor blackColor]]; 
```

# c# - 隐式和显式 StringBuilder.ToString() 方法调用有什么区别？

> ID：11844803
> 
> 赞同：2
> 
> 时间：2012-08-07T11:18:33.450
> 
> 标签：c#, unit-testing, tostring, stringbuilder, implicit-conversion

我刚刚写了一个小单元测试，我在其中使用了`StringBuilder()`.

```
var stringBuilder = new StringBuilder();
stringBuilder.Append("Foo");

Assert.AreEqual(stringBuilder, "Foo"); 
```

此测试将失败。

```
Expected: <Foo>
But was:  "Foo" 
```

但是，如果我将断言更改为

```
Assert.AreEqual(stringBuilder.ToString(), "Foo"); 
```

测试将通过。

那么，方法的隐式调用和显式调用有什么区别`ToString()`呢？或者/这些括号 ( `<>`) 代表什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T11:21:19.030

在您的第一个示例中，您正在测试您的`StringBuilder` *实例*是否等于字符串，这将失败。

在您的第二个中，您正在测试调用的结果`ToString()`（它是一个字符串）是否等于另一个字符串。

* * *

括号 (<>) 是 NUnits 的方式，表示它得到了一个非字符串对象，但为了显示消息，NUnit 调用`ToString()`该对象。

```
Expected: <Foo> But was: "Foo" 
```

一个在调用时`<Foo>`返回的对象也是如此，而只是一个*Foo*。`Foo``ToString()``"Foo"``String`

 *MSTest 会向您显示一条不同的消息，这会更清楚：

```
Expected:<Foo (System.Text.StringBuilder)>. Actual:<Foo (System.String)>. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:23:03.527

*在第一个版本中，没有对 ToString 的隐式调用* 。这只发生在 Console.WriteLine 等方法中。

所以实际发生的事情是您将 stringbuilder 对象等同于 string 对象。甚至类型也不匹配:-)*

# c# - 如何在我的 ASP.NET 控件中获得黑色且没有下划线的 LinkBut ton？

> ID：11844804
> 
> 赞同：2
> 
> 时间：2012-08-07T11:18:37.167
> 
> 标签：c#, asp.net, css, listview, linkbutton

我有一个 ASP.NET 应用程序，我使用一个 ListView。如果我创建一个 ListItem（一行），我想使用一个 LinkBut​​ton。我希望这个 LinkBut​​ton 具有 CSS 属性..

```
color:Black;
text-decoration:none; 
```

但是如果我启动应用程序。我将链接按钮设为蓝色并带有下划线:(

这是我的代码：

ASPX：

...

```
<asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0">
                <tr id="Tr1" style="background-color:#E5E5FE">
                    <th runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr> 

                <td align="left" ><asp:LinkButton ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

             <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>'  runat="server" /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr style="background-color:#EFEFEF"> 

                <td align="left" ><asp:LinkButton ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

            <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>'  runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView> 
```

...

我的 CSS 文件：

...

```
#Label1
{
    color:Black;
    text-decoration:none;

} 
```

...

怎么了 ？

塔拉索夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T11:23:35.523

`#Label1`意味着只有`id="Label1`最终 HTML 中带有 " 的控件才会被 CSS 格式化。

当您在 ASP.NET 中创建控件时（无论是在页面、用户控件、中继器等中），它不会只是`Label1`在 HTML 中调用，而是在`ctl100_Label1`.

您需要做的是将 CSS 创建为一个**类**，然后使用`CssClass`.

```
.MyLabel {
  color: Black;
  text-decoration: none;
}

<asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" CssClass="MyLabel" /> 
```

另一种选择（而不是将 the`CssClass`放入每个单独的`asp:Label`）是使用`ID`或`CssClass`其中一个父控件，并改用它。例如...

```
<table id="UserTable" runat="server" border="0" class="UserTableClass">

.UserTableClass span {
  color: Black;
  text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:41:52.100

解决方案

……

```
<td align="left" ><asp:LinkButton ForeColor="Black" Font-Underline="false" ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td> 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:26:07.833

默认情况下，ASP ID 的工作方式不同，并且与 HTML id 不同，您可以告诉它是否要使用[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)。

或者，您可以设置`CssClass`.`asp:LinkButton`

```
<asp:LinkButton .... CssClass="Label1" ... /> 
```

# php - 如何在 php 中从 src 获取 id 91

> ID：11844808
> 
> 赞同：0
> 
> 时间：2012-08-07T11:18:50.597
> 
> 标签：php

我从这里获取了 id 91

```
 <img width="526" height="339" style="float: none;" src="http://www.test.com/files/thumb/91/595" class="pyro-image" alt="floyd mayweather"> 
```

我已经尝试过使用爆炸和剥离标签，但无法得到这个。它是一个字符串，将根据图像不断变化。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:33:53.130

如果我正确理解了你的问题，那么下面的正则表达式应该适合你（注意，正则[表达式和 HTML 不是朋友](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，但你可以使用它而不是 HTML 解析器，如果它不比这更复杂的话）。

一个正则表达式`#<img.*src.*/files/thumb/([0-9]+)/([0-9]+).*>#`应该工作：

```
<?php
    $string = '<img width="526" height="339" style="float: none;" src="http://www.test.com/files/thumb/91/595" class="pyro-image" alt="floyd mayweather">';
    preg_match('#<img.*src.*/files/thumb/([0-9]+)/([0-9]+).*>#', $string, $matches);
    echo "Image ID: " . $matches[1] . "<br />";
    echo "Other number: " . $matches[2] . "<br />";
?> 
```

输出

```
Image ID: 91
Other number: 595 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:36:14.137

我将假设您发布的字符串正是 - 一个字符串。考虑到这一点：

```
$str = '<img width="526" height="339" style="float: none;" src="http://www.test.com/files/thumb/91/595" class="pyro-image" alt="floyd mayweather">';
if (preg_match('/(?<=files\/thumb\/)[^\/\?]+/', $str, $match))
    echo $match[0]; //91 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:37:52.193

检查此代码，您可以获得所有参数 -

```
<?php
$html = '<img width="526" height="339" style="float: none;" src="http://www.test.com/files/thumb/91/595" class="pyro-image" alt="floyd mayweather">';
preg_match_all("/<img .*?(?=src)src=\"([^\"]+)\"/si", $html, $m); 
//echo $m[1][0];

list($par1, $par2, $par3, $par4, $par5, $par6, $par7) = explode("/", $m[1][0]);

echo $par1."   ".$par2." ".$par3."   ".$par4." ".$par5."   ".$par6." ".$par7; 
```

# android - 调整图像大小以适合 Imageview

> ID：11844815
> 
> 赞同：8
> 
> 时间：2012-08-07T11:19:24.250
> 
> 标签：android, android-imageview

我已经查看了有关 Stackoverflow 的许多问题，并尝试了许多解决方法，但仍然没有奏效。

我想要实现的目标：

![在此处输入图像描述](../Images/633eafb43007485741e1a773bab84820.png) ![在此处输入图像描述](../Images/14cee9cdef6bb642a221291005e3f40e.png)

然而我正在实现这一点：

![在此处输入图像描述](../Images/ef980bdb73efa5199bcb6939e6a3d677.png)

这是我当前的 xml 代码：

```
<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/text"
    android:layout_gravity="center"
    android:adjustViewBounds="true"
    android:scaleType="centerInside"
    android:src="@drawable/ic_action_search" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:36:56.490

实现这一点的最佳方法是使用矩阵缩放图像（位图）。

另一种方法是使用我之前创建的库来为您执行此操作：

[https://github.com/laurencedawson/ZoomableImageView](https://github.com/laurencedawson/ZoomableImageView)

这将自动缩放图像以适应屏幕，并添加捏合缩放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-27T08:02:58.613

添加

```
<ImageView
android:id="@+id/image"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:layout_below="@+id/text"
android:layout_gravity="center"
android:adjustViewBounds="true"
android:scaleType="fitXY"
android:src="@drawable/ic_action_search" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:29:51.920

CenterInside，根据视图尺寸及其分辨率调整图像大小。所以如果一个图像的大小为 300*450 并且我们已经将此图像设置为一个 scale 类型 centerinside 的 imageview，尺寸为 200*400，那么它将使图像的大小为 200*300，根据目标尺寸，所以缩放它向下使 200 的宽度和高度最小。我希望我足够清楚。如果您需要设置精确尺寸的尺寸，请按照 Adeel 的建议使用 FItXY。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T16:53:35.077

您想在 XML 文件中执行此操作吗？

```
<ImageView  
android:layout_width="size of image (in density pixels)"  
android:layout_height="size of image (in density pixels)" /> 
```

例如：

```
<ImageView  
android:layout_width="60dp"  
android:layout_height="60dp" /> 
```

# java - 使用摇摆代码获得意外的输出

> ID：11844817
> 
> 赞同：2
> 
> 时间：2012-08-07T11:19:26.480
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我正在尝试构建一个简单的应用程序，它有一个半透明的框架，它在用户想要的地方画线。我还添加了侦听器来捕获鼠标事件，并相应地显示这些事件。一切正常，但问题是：1）窗口不透明 2）它完全是黑色的，线条呈白色。

任何人都可以这是代码：

```
import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class MouseListen2 extends JFrame implements MouseListener {

    String str = "Nothing";
    int x[][] = new int[100][2];
    int count = 0;
    int flag = 1;
    boolean draw = false;

    MouseListen2() {
        super("Line Draw App");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(400, 300);
        this.addMouseListener(this);
        setBackground(new Color(0, 0, 0, 0));
        JPanel jp = new JPanel() {

            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2 = (Graphics2D) g;
                Paint gp = new GradientPaint(300, 700, new Color(20, 20, 210, 0), 100, 00, new Color(10, 20, 40, 255));
                g2.setPaint(gp);
                g2.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        setContentPane(jp);
        setVisible(true);
        //c.setOpaque(true);
    }

    public void paint(Graphics g) {
        //Graphics g=this.getGraphics();
        //super.paint(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.clearRect(0, 0, getWidth(), getHeight());
        g2.drawString(str, 50, 50);
        //initially count=0 hence i<-1 so loop will not automatically run in the beginning
        for (int i = 0; i < count - 1; i = i + 2) {
            g2.drawLine(x[i][0], x[i][1], x[i + 1][0], x[i + 1][1]);
        }
        //repaint(); using this here creates an infinite loop as after mouse event paint is called and  at the end
        //this method is again called using the repaint() and so on the loop continues.
    }

    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                new MouseListen2();
            }
        });
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        str = "clicked";
        repaint();

    }

    @Override
    public void mousePressed(MouseEvent e) {
        str = "pressed";
        repaint();
        x[count][0] = e.getX();
        x[count][1] = e.getY();
        count++;
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        str = "released";
        draw = true;
        x[count][0] = e.getX();
        x[count][1] = e.getY();
        count++;
        //draw();
        repaint();
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        str = "entered";
        repaint();
    }

    @Override
    public void mouseExited(MouseEvent e) {
        str = "exited";
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:44:49.573

1.  必须添加`MouseListener`到`JPanel`，因为您添加`MouseListener`到`JFrame`( `this.addMouseListener(this);`)

2.  这条代码行`setContentPane(jp);`放在`JPanel`的`BorderLayout.CENTER`位置`JFrame`，在这种情况下（是否没有任何其他`JComponent`添加到`JFrame`）将整个/所有可用空间填充到`JFrame`

3.  然后 for`mouse event`只能`JPanel`访问，鼠标无法访问`JFrame`'s`RootPane`或`ContentPane`

4.  remove/comment `public void paint(Graphics g)`和相关代码块移到`paintComponent`for`JPanel`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T13:33:06.733

请参阅[如何创建半透明和异形窗口](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)。

# jsp - Jsp 用 jsp:include 模仿自定义标签？

> ID：11844819
> 
> 赞同：0
> 
> 时间：2012-08-07T11:19:33.967
> 
> 标签：jsp, jspinclude, custom-tag

我的应用程序以前广泛使用 jsp 2.0 自定义标签。我们更喜欢这些而不是 jsp:includes，因为我们不必手动将对象设置到请求范围内。然而，自定义标签对我们来说有一个主要限制，即无法动态调用它们。在我们这种规模的应用程序中，这迫使我们改用 jsp:includes。

所以我们有很多看起来像这样的代码：

```
<c:set var="product" value="${product}" scope="request" />
<jsp:include page="${product.name}.jsp" />
<c:remove var="product" scope="request"/> 
```

除了看起来很丑，它容易出错，所以我想把它封装到一个标签中以获得两全其美的效果，一个在幕后调用动态 jsp 的自定义标签。我尝试了一个名为“include”的自定义标签，如下所示：

```
<%@ attribute name="name" rtexprvalue="true" required="true" %>
<%@ attribute name="value" rtexprvalue="true" required="true" %>
<%@ attribute name="page" rtexprvalue="true" required="true" type="java.lang.Object" %>

<c:set var="${name}" value="${value}" scope="request" />
<jsp:include page="${page}" />
<c:remove var="${name}" scope="request"/> 
```

但它不起作用，因为 c:set 不允许 var 标记中的表达式。我怎样才能使这项工作？我愿意在这个标签中使用 scriptlet，只是因为它对我们的应用程序有价值。

理想情况下，我希望能够编写一个接受无限数量参数的标签，如下所示：

```
<i:include product="${product}" order="${order}" page="${product.name}.jsp"/> 
```

但我不知道该怎么做。任何建议都会很棒。顺便说一下，这个例子只是为了展示，所以不要挂断它，这只是我想表达的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:51:57.400

好吧，由于缺乏更好的实现，我选择了 scriptlet：

```
<%@ attribute name="page" rtexprvalue="true" required="true" %>
<%@ attribute name="name" rtexprvalue="true" required="true" %>
<%@ attribute name="value" rtexprvalue="true" required="true" type="java.lang.Object" %>

<% request.setAttribute(name, value); %>
<jsp:include page="${page}" />
<% request.removeAttribute(name); %> 
```

# javascript - 如何禁用打开新窗口的最大化、最小化和关闭按钮

> ID：11844823
> 
> 赞同：0
> 
> 时间：2012-08-07T11:19:41.793
> 
> 标签：javascript

我正在使用`window.open()`方法将页面打开为链接按钮单击事件的弹出窗口。但是弹出窗口有最小化、最大化、关闭（x）按钮。

我不想要那些按钮。怎样才能去掉这些按钮？

这是我正在使用的方法，

```
window.open(url,"Link","toolbar=0,location=0,directories=0,status=0,menubar=0,titlebar=no,scrollbars=1,resizable=0,width=450,height=310,left=500,top=350"); 
```

告诉我怎么能做到这一点。

问候，奇拉格耆那教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:21:19.907

你不能。

如果你想要一个没有完整窗口装饰的弹出*式*窗口，你必须`<div>`在现有内容之上创建一个新的覆盖并用内容填充它，也许使用`<iframe>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:51:43.343

您不能仅从 javascript 中做到这一点。想一想，如果可以的话，人们可以将其放入网页上的代码中，并导致其他人的计算机打开他们无法轻易关闭的窗口。

相反，您必须寻找特定于您用于托管此应用程序的浏览器的答案，并在用户的计算机上适当地更改它。即使那样，尽管我认为您不会走运（例如，使用 Firefox，我可以看到如何在所有浏览器窗口上摆脱它们，但不仅仅是一个）。

# jquery - 使用 jQote jQuery 调用对象

> ID：11844828
> 
> 赞同：0
> 
> 时间：2012-08-07T11:20:17.930
> 
> 标签：jquery, underscore.js, jqote

我正在为 javascript 模板使用 jQote 库，以下是我对 ajax 请求的**JSON**响应

```
{"Person":[{"actor_image":"Image1","actor":"Name1"}]} 
```

**以下是jQuery代码**

```
$(document).on('click',".notifications",function(){    
    $("#notificationRegionWrapper").toggle();
    $.ajax({
        type: 'post',
        url: "/async/getnotificationfeed",
        dataType: 'json',
        async:false,
        success: function(res) {
            var dataJson = $.parseJSON(res);
            $('#users').jqotesub('#template', dataJson);
        }
    });   
}); 
```

在这里我试图取出对象，但是给我一个错误
**this.Person 是未定义的**

这就是我试图输出对象的方式，因为我想迭代对象

```
<table id="users">

</table>
<script type="text/html" id="template">
    <![CDATA[
        <tr>
            <td class="title"><%=  this.Person.length %></td>
        </tr>
    ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:27:24.963

我删除后它起作用了

```
 var dataJson = $.parseJSON(res); 
```

并将 jQote 函数编辑为：

```
 $('#users').jqotesub('#template', res); 
```

# java - 为什么项目 Jigsaw / JPMS？

> ID：11844829
> 
> 赞同：80
> 
> 时间：2012-08-07T11:20:19.203
> 
> 标签：java, java-9, java-platform-module-system

Java 的包管理系统在我看来总是简单而有效。它被 JDK 本身大量使用。我们一直在使用它来模仿命名空间和模块的概念。

**拼图项目**（又名[Java 平台模块系统](https://jcp.org/en/jsr/detail?id=376)）试图填写什么？

来自官方网站：

> 该项目的目标是为 Java SE 平台设计和实现标准模块系统，并将该系统应用于平台本身和 JDK。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-07T11:27:14.930

Jigsaw 和 OSGi 正在尝试解决相同的问题：如何允许粗粒度的模块进行交互，同时屏蔽它们的内部。

在 Jigsaw 的案例中，粗粒度模块包括 Java 类、包及其依赖项。

这是一个示例：Spring 和 Hibernate。两者都依赖于第 3 方 JAR CGLIB，但它们使用不同的、不兼容的 JAR 版本。如果你依赖标准的JDK，你能做什么？包括 Spring 想要打破 Hibernate 的版本，反之亦然。

但是，如果您有像 Jigsaw 这样的高级模型，您可以轻松地在不同模块中管理 JAR 的不同版本。将它们视为更高级别的包。

如果您[从 GitHub 源代码构建 Spring，](https://github.com/spring-projects)您也会看到它。他们重做了框架，因此它由几个模块组成：核心、持久性等。您可以挑选应用程序所需的最小模块依赖集，而忽略其余的。它曾经是一个单一的 Spring JAR，其中包含所有 .class 文件。

更新：五年后 -​​ Jigsaw 可能仍有一些[问题](https://dzone.com/articles/ec-rejects-jigsaw)需要解决。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-08-07T11:27:33.413

AFAIK 计划是让 JRE 更加模块化。即有较小的罐子是可选的和/或您可以只下载/升级您需要的功能。

它使它不那么臃肿，并让您可以选择删除可能大多数人不使用的遗留模块。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-01-15T14:47:41.793

根据[Mark Reinhold](https://stackoverflow.com/users/4321344/mark-reinhold)在比利时 Devoxx的[主题演讲](https://www.youtube.com/watch?v=l1s7R85GF1A)，*Project Jigsaw*将解决两个主要痛点：

1.  类路径
2.  庞大的单体 JDK

### 类路径有什么问题？

* * *

我们都知道[JAR 地狱](https://en.wikipedia.org/wiki/Java_Classloader)。该术语描述了*类加载*过程最终无法工作的所有各种方式。类路径最广为人知的限制是：

*   很难说有没有冲突。像 maven 这样的构建工具可以根据工件名称做得很好，但是如果工件本身具有不同的名称但内容相同，则可能会发生冲突。
*   jar 文件的根本问题是它们不是组件。它们只是一堆将被线性搜索的文件容器。类路径是一种查找类的方法，无论它们在什么组件中、它们在什么包中或它们的预期用途如何。

### 庞大的单体 JDK

* * *

JDK 的大单体性质导致了几个问题：

*   它不适合小型设备。尽管小型 IoT 类型的设备具有能够运行 SE 类 VM 的处理器，但它们不一定具有容纳所有 JDK 的内存，尤其是当应用程序只使用它的一小部分时。
*   这甚至是云中的一个问题。云就是为了优化硬件的使用，如果你有成千上万个包含整个 JDK 的图像，但应用程序只使用了其中的一小部分，那将是一种浪费。

### 模块：通用解决方案

* * *

为了解决上述问题，我们将模块视为一种基本的新型 Java 程序组件。模块是一个命名的、自描述的代码和数据集合。它的代码被组织成一组包含类型的包，即Java 类和接口。它的数据包括资源和其他种类的静态信息。

为了控制其代码如何引用其他模块中的类型，模块声明它需要哪些其他模块才能编译和运行。为了控制其他模块中的代码如何引用其包中的类型，模块声明它导出哪些包。

模块系统定位所需的模块，并且与类路径机制不同，它确保模块中的代码只能引用它所依赖的模块中的类型。Java 语言和 Java 虚拟机的访问控制机制阻止代码访问包中的类型，这些类型不是由它们的定义模块导出的。

除了更可靠之外，模块化还可以提高性能。当模块中的代码引用包中的类型时，则保证该包被定义在该模块中或恰好在该模块读取的模块之一中。因此，在查找特定类型的定义时，无需在多个模块中搜索它，或者更糟的是，沿着整个类路径搜索。

# 跟随的 JEP

* * *

Jigsaw 是一个巨大的项目，已经持续了好几年。它有大量的 JEP，这是获取有关该项目的更多信息的好地方。其中一些 JEP 如下：

*   [JEP 200：模块化 JDK](http://openjdk.java.net/jeps/200)：*使用 Java 平台模块系统 (JPMS) 模块化 JDK*
*   [JEP 201：模块化源代码](http://openjdk.java.net/jeps/201)：*将 JDK 源代码重组为模块，增强构建系统以编译模块，并在构建时强制执行模块边界*
*   [JEP 261：模块系统](http://openjdk.java.net/jeps/261)：*实现 JSR 376 指定的 Java 平台模块系统，以及相关的特定于 JDK 的更改和增强*
*   [JEP 220：模块化运行时映像](http://openjdk.java.net/jeps/220)：*重构 JDK 和 JRE 运行时映像以适应模块并提高性能、安全性和可维护性*
*   [JEP 260: Encapsulate Most Internal APIs](http://openjdk.java.net/jeps/260)：*默认情况下使大部分 JDK 的内部 API 不可访问，但保留一些关键的、广泛使用的内部 API 可访问，直到它们的全部或大部分功能存在受支持的替代品*
*   [JEP 282：jlink：Java 链接器](http://openjdk.java.net/jeps/282)：*创建一个工具，可以将一组模块及其依赖项组装和优化成[JEP 220中定义的自定义运行时映像](http://openjdk.java.net/jeps/220)*

# 结束语

* * *

[在模块系统状态](http://openjdk.java.net/projects/jigsaw/spec/sotms/)报告的初始版本中，Mark Reinhold 描述了模块系统的具体目标如下：

*   **可靠的配置**，用一种程序组件声明彼此显式依赖的方法来替换脆弱、容易出错的类路径机制，以及
*   **强封装**，允许组件声明它的哪些公共类型可以被其他组件访问，哪些不能。

这些特性将直接或间接地使 Java SE 平台本身的应用程序开发人员、库开发人员和实现者受益，因为它们将支持可扩展的平台、更高的平台完整性和改进的性能。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-06-15T18:03:20.123

为了论证，让我们断言 Java 8（及更早版本）*已经具有*模块（jar）和模块系统（类路径）的“形式”。但这些都有众所周知的问题。

通过检查问题，我们可以说明 Jigsaw 的动机。（以下假设我们没有使用 OSGi、JBoss 模块等，它们肯定会提供解决方案。）

**问题一：public*太*公开了**

考虑以下类（假设两者都是公共的）：

```
com.acme.foo.db.api.UserDao
com.acme.foo.db.impl.UserDaoImpl 
```

在 Foo.com，我们可能会决定我们的团队应该使用`UserDao`而不是`UserDaoImpl`直接使用。但是，没有办法在类路径上强制执行。

在 Jigsaw 中，一个模块包含一个`module-info.java`文件，该文件允许我们明确声明对其他模块公开的内容。也就是说，公众有细微差别。例如：

```
// com.acme.foo.db.api.UserDao is accessible, but
// com.acme.foo.db.impl.UserDaoImpl is not 
module com.acme.foo.db {
    exports com.acme.foo.db.api;
} 
```

**问题2：反射肆无忌惮**

鉴于 #1 中的类，有人仍然可以在 Java 8 中执行此操作：

```
Class c = Class.forName("com.acme.foo.db.impl.UserDaoImpl");
Object obj = c.getConstructor().newInstance(); 
```

也就是说：反射是强大且必不可少的，但如果不加以检查，它可能会以不合需要的方式进入模块的内部。Mark Reinhold 有一个相当[惊人的例子](https://www.youtube.com/watch?v=fxB9cVNcyZo&feature=youtu.be&t=18m18s)。（SO帖子在[这里](https://stackoverflow.com/questions/38505237/with-java-8-update101-java-util-hashmap-cannot-be-cast-to-java-util-collection)。）

在 Jigsaw 中，*强封装*提供了拒绝访问类的能力，包括反射。（这可能取决于命令行设置，等待 JDK 9 的修订技术规范。）请注意，由于 Jigsaw 用于 JDK 本身，Oracle 声称这将允许 Java 团队更快地创新平台内部结构。

**问题 3：类路径删除了架构关系**

一个团队通常有一个关于 jar 之间关系的心智模型。例如，`foo-app.jar`可以使用`foo-services.jar`which uses `foo-db.jar`。我们可以断言，类`foo-app.jar`不应绕过“服务层”而`foo-db.jar`直接使用。但是，没有办法通过类路径来强制执行。Mark Reinhold[在这里提到了这一点](https://www.youtube.com/watch?v=WJHjKMIrbD0&feature=youtu.be&t=10m25s)。

相比之下，Jigsaw 为模块提供了明确、可靠的可访问性模型。

**问题 4：单片运行时**

Java 运行时是单体的`rt.jar`。在我的机器上，它是 60+ MB 和 20k 类！在微服务、物联网设备等的时代，如果不使用 Corba、Swing、XML 和其他库，则不希望将它们放在磁盘上。

Jigsaw 将*JDK 本身*分解为许多模块；例如[java.sql](http://download.java.net/java/jdk9/docs/api/java.sql-summary.html)包含熟悉的 SQL 类。这样做有几个好处，但一个新的好处是`jlink`工具。假设一个应用程序是完全模块化的，`jlink`生成一个可[分发的运行时映像](https://youtu.be/WJHjKMIrbD0?t=25m45s)，该映像被修剪为仅包含指定的模块（及其依赖项）。展望未来，Oracle[设想了一个](https://www.youtube.com/watch?v=WJHjKMIrbD0&feature=youtu.be&t=33m19s)将 JDK 模块提前编译为本机代码的未来。虽然`jlink`是可选的，而且 AOT 编译是实验性的，但它们是 Oracle 发展方向的主要迹象。

**问题 5：版本控制**

众所周知，类路径不允许我们使用同一个 jar 的多个版本：例如`bar-lib-1.1.jar`和`bar-lib-2.2.jar`.

Jigsaw 没有解决这个问题。Mark Reinhold 在这里陈述了[理由](https://youtu.be/WJHjKMIrbD0?t=42m40s)。要点是 Maven、Gradle 和其他工具代表了一个庞大的依赖管理生态系统，而另一种解决方案将弊大于利。

应该注意的是，其他解决方案（例如 OSGi）确实解决了这个问题（以及除了#4 之外的其他解决方案）。

**底线**

这是 Jigsaw 的一些关键点，由特定问题驱动。

请注意，解释 Jigsaw、OSGi、JBoss 模块等之间的争议是属于另一个 Stack Exchange 站点的单独讨论。解决方案之间的差异比此处描述的要多得多。更重要的是，对于 JSR 376的[公共审查复议投票](https://jcp.org/en/jsr/results?id=6016)获得了足够的共识。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-11T06:20:35.313

本文详细解释了 OSGi 和 JPMS/Jigsaw 都试图解决的问题：

[“Java 9、OSGi 和模块化的未来”](https://www.infoq.com/articles/java9-osgi-future-modularity) [2016 年 9 月 22 日]

它还深入探讨了 OSGi 和 JPMS/Jigsaw 的方法。截至目前，与成熟（16 岁）的 OSGi 相比，作者似乎几乎没有列出 JPMS/Jigsaw 的实用优点。

# sql - 达到某个阈值时，SQL 插入会因 ADO 而变慢

> ID：11844830
> 
> 赞同：0
> 
> 时间：2012-08-07T11:20:19.787
> 
> 标签：sql, sql-server, delphi

我使用 ADO 来启动这个查询：

```
INSERT INTO mytable (a,b) VALUES
(1,a)
,(2,b)
..
,(900,zzz) 
```

我首先将它放在一个字符串列表中，然后使用 ADOQuery.SQL.Text := sl.Text 一次将它全部放入查询组件中。这一次插入 900 条记录。我用它来加快在数据库中插入数据的速度。我可以将它扩展到 100.000 条记录，它会在大约 4 秒内完成。但是，当我尝试 200.000 条记录时，它突然需要很长时间。我使用了 queryanalyzer，突然它变慢了，每个查询都需要 1-2 秒才能触发。当插入大约 150.000 条记录时，就会发生这种情况。我可以对 ADO 或 SQL 服务器进行设置以保持我的速度吗？

我使用 MS SQL 数据库。

# mysql - Mysql存储过程

> ID：11844833
> 
> 赞同：3
> 
> 时间：2012-08-07T11:20:27.597
> 
> 标签：mysql, stored-procedures

我想要做的是，通过在存储过程中将表名作为参数传递来在 mysql 中创建一个表。我在 mysql 中使用以下代码进行存储过程。

```
DELIMITER //
CREATE PROCEDURE createtable(IN tablename varchar(20))
BEGIN
   SET @s=CONCAT('CREATE TABLE', tablename, '(month varchar(20))');
   PREPARE stmt FROM @s;
   EXECUTE stmt;
END // 
```

当我打电话给它时

```
CALL createtable('account'); 
```

我收到以下错误

> 您的 SQL 语法有错误；检查 MySQL 服务器版本以获取正确的语法...

我不知道我错在哪里。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:24:20.867

您忘记了表名前后的空格。尝试

```
DELIMITER //
CREATE PROCEDURE createtable(IN tablename varchar(20))
BEGIN
    SET @s=CONCAT('CREATE TABLE ', tablename, ' (month varchar(20))');
    PREPARE stmt FROM @s;
    EXECUTE stmt;
END // 
```

# php - 保存数据后禁用表单元素

> ID：11844834
> 
> 赞同：0
> 
> 时间：2012-08-07T11:20:28.057
> 
> 标签：php, mysql, forms

我有一个网站，用户必须使用文本框输入大量数据。我想在第一次使用后锁定文本框。我的意思是，对于这个例子，用户必须输入他的名字并保存它，但是一旦保存，用户就不能再改变它了。

那么任何人都可以建议我在这段代码中必须进行哪些更改

```
<td align="left" valign="top">
    <input class="tooltip v_empty" title="first name" type="text"
    name="<?php echo "LP".$lp_id."_";  ?>firstname[self]"
    id="firstname[self]"
    value="<?php echo $PLAN->lp[$lp->lp_id]->info['self']->firstname; ?>" />
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:23:42.560

你应该使用更好的标题。html 中的 disabled 属性可能会对您有所帮助。

[http://www.javascriptkit.com/javatutors/deform3.shtml](http://www.javascriptkit.com/javatutors/deform3.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:24:14.273

`<input>`HTML 元素带有一个参数，该`disabled="disabled"`参数使用户无法正常修改该字段的内容（它将*变灰*）。（请注意，本地 HTML 源代码修改可能会导致数据更改！）

除此之外，您应该看看[会话](http://php.net/manual/en/book.session.php)是如何工作的。您应该将已经输入的值存储在会话或数据库后端中，并且在打印表单时，您应该检查会话或数据库中已经存在的值。

# python - 仅在作为外部进程调用时出现python编码错误

> ID：11844835
> 
> 赞同：6
> 
> 时间：2012-08-07T11:20:31.940
> 
> 标签：python, bash, encoding, invocation

一个简单的文件，如

```
$ cat x.py
x = u'Gen\xe8ve'
print x 
```

运行时会给我：

```
$ python x.py
Genève 
```

但是，当作为“命令替换”运行时，将给出：

```
$ echo $(python x.py)
...
UnicodeEncodeError: 'ascii' codec... 
```

我尝试过使用不同的终端仿真器（xterm、gnome-term）和 ttyS 上的控制台。使用 bash 和 sh。使用 python2.4 和 2.7。在运行 python 之前，我尝试将 LC_ALL 或 LANG 设置为一些 utf-8 语言环境。我检查了 sys.getdefaultencoding()。没有任何帮助。

当从另一个进程（如java）调用脚本时也会出现问题，但上面是我发现复制它的最简单方法。

我不明白这两个电话之间有什么区别。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T11:33:32.527

这里的问题是，在第二次调用中，您基本上是在写入一个只接受字节串​​（类文件对象）的管道。如果您尝试执行此操作，也会发生同样的情况：

```
python x.py > my_file
Traceback (most recent call last):
File "x.py", line 2, in <module>
    print x
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe8' in position 3: ordinal not in range(128) 
```

由于接收者只理解字节串而不是 unicode 字符，因此您必须首先使用以下`encode`函数将 unicode 字符串编码为字节串：

```
x = u'Gen\xe8ve'.encode('utf-8') 
print x 
```

这将打印编码为 utf-8 字节串（字节序列）的 unicode 字符串，允许将其写入类似文件的对象。

```
$echo $(python x.py)
Genève
$python x.py 
Genève 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T11:31:32.133

正如您所怀疑的，当 Python 的标准输出不是已知终端时，Python 不知道如何打印 unicode。考虑在打印之前对字符串进行编码：

```
# coding: utf-8
x = u'Gen\xe8ve'
print x.encode("utf-8") 
```

请注意，调用程序和您的脚本将需要在通用编码中达成一致。

# nunit - Moq : 模拟 GetbyId 存储库方法返回 null

> ID：11844836
> 
> 赞同：3
> 
> 时间：2012-08-07T11:20:33.297
> 
> 标签：nunit, moq, repository-pattern

我正在使用 Moq，并且我有一个我正在尝试创建模拟方法的存储库。GetAll 方法返回值，但 GetById 返回 null。

```
var currencyRepo = new Mock<ICurrencyRepository>();
var currencies =  new List<Currency>{new Currency
                                      {
                                          CurrencyCode = "USD",
                                          CurrencyId = 1,
                                      }, 
                                      new Currency
                                             {
                                                  CurrencyCode = "EUR",
                                                  CurrencyId = 2
                                             }};

currencyRepo.Setup(c => c.GetAll()).Returns(currencies);
currencyRepo.Setup(c => c.GetById(It.IsAny<int>())).Returns((int i) =>  currencies.Single(c => c.CurrencyId == i));

var currency = currencyRepo.Object.GetById(1); //This always returns null
//currency is always null
//but calling the GetAll method works!

var currencyList = currencyRepo.Object.GetAll(); //this works! 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:18:57.823

我解决了它在设置方法中更改为 long 的问题，因为 GetById 接受一个 long 参数。呃！

# mysql - 如何从存储在备份硬盘上的 Windows 7 MySQL 数据库中获取数据库？

> ID：11844837
> 
> 赞同：1
> 
> 时间：2012-08-07T11:20:38.127
> 
> 标签：mysql, windows-7

我的开发机器上发生了灾难性的驱动器故障。幸运的是，我备份了所有内容。

我刚刚安装了 WAMP，它似乎可以在 Windows 7 x64 中运行（在新驱动器上全新安装之后）。现在我需要访问我存储在备份驱动器上的数据库。我没有 .sql 转储文件。

有谁知道如何从备份驱动器上的 MySQL 文件夹中导出数据库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:25:24.630

位于 MySQL 数据目录中的文件和文件夹的简单副本应该可以解决问题（只要 MySQL 版本相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:26:41.650

不确定这是否可行。只需将 wamp 安装目录中的 mysql 文件夹替换为您的文件夹即可。更换前记得备份

# c# - 使用 SOAP 方法调用 Web 服务时如何保留空格

> ID：11844841
> 
> 赞同：0
> 
> 时间：2012-08-07T11:20:44.493
> 
> 标签：c#, soap, whitespace

我有一个由 C# 编写的 Web 服务，假设它是[http://www.mysvr.com/answer/sms.asmx](http://www.mysvr.com/answer/sms.asmx)。该服务有一个名为“Hello”的操作，一个名为“cnt1”的变量，我将把值传递给这个变量。

如果我使用 XML 来阅读它，例如：

```
XmlDocument xdoc = new XmlDocument();

xdoc.Load("http://www.mysvr.com/answer/sms.asmx/Hello?cnt1=abc");

return xdoc.ChildNodes[1].InnerXml; 
```

我会得到字符串“Hello_ *_* _everybody”。“Hello”和“everybody”之间有 5 个空格。我想保留这个空白。

但是当我使用 SOAP 来阅读它时，比如：

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://tempuri.org/Hello",RequestNamespace="http://tempuri.org/",ResponseNamespace="http://tempuri.org/",Use=System.Web.Services.Description.SoapBindingUse.Literal,ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
public string Hello(string cnt1)
{
     object[] results = this.Invoke("Hello", new object[] {cnt});
     return ((string)(results[0]));            
} 
```

我会得到字符串“大家好”。“Hello”和“everybody”之间只有一个空格。

问题：我想使用 SOAP 调用 Web 服务，我想在“Hello”和“everybody”之间保留 5 个空格。

任何人都可以帮我解决这个问题吗？我是否必须重新编码 Web 服务，或向 SOAP 添加参数以启用读取 5 个空格？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:22:13.540

尝试在其中包含“大家好”字符串

```
" <![CDATA[" " ]]>"
```

字符串。喜欢：

```
<root>
    <welcome><![CDATA[Hello     everybody]]></welcome>
</root> 
```

# msbuild - 错误代码 MSB3191 巡航控制构建

> ID：11844842
> 
> 赞同：1
> 
> 时间：2012-08-07T11:20:45.963
> 
> 标签：msbuild, cruisecontrol.net

当我尝试通过巡航控制构建它时，我收到以下错误：`code=MSB3191`

更多细节

```
<target name="Clean" startTime="08/07/2012 16:35:54" elapsedTime="00:00:00" elapsedSeconds="0" success="false">
      <project name="Clean" file="M:\ye66_Cruise_01_00_int\ISOS_DEMO_COMP\Cruise\RPTSolution\RPTSolution\RPTSolution.csproj" startTime="08/07/2012 16:35:54" elapsedTime="00:00:00" elapsedSeconds="0" success="false">
        <target name="CoreClean" startTime="08/07/2012 16:35:54" elapsedTime="00:00:00" elapsedSeconds="0" success="false">
          <message level="normal"><![CDATA[Creating directory "obj\Debug\".]]></message>
          <error code="MSB3191" file="C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets" line="3626" column="9" timeStamp="08/07/2012 16:35:54"><![CDATA[Unable to create directory "obj\Debug\". Access to the path 'obj\Debug\' is denied.]]></error>
        </target>
      </project>
 </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:54:44.850

这是来自 Msbuild 的错误。听起来像 Msbuild 无法创建目录，可能是权限问题。

如果您查看项目目录，帐户 ccservice 是否正在运行，是否具有创建文件和目录的权限？

# php - CGridView 自定义列过滤器

> ID：11844844
> 
> 赞同：5
> 
> 时间：2012-08-07T11:20:57.197
> 
> 标签：php, yii, filter, cgridview

问：如何为我的 gridview 创建过滤器？

状态：客户名称 = first_name。姓

这是我的网格视图

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'customer-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        array(
              'header'=>'Customer Name',
              'name'=>'$data->first_name',
              'value'=>'$data->first_name.\' \'.$data->last_name',
              ),        
        'company_name',
        'country',
        'state',
        'city',     
        'address1',         
        'phone1',       
        'email',        
        array('name' => 'company_id',
               'value'=>'$data->companies->name',
               'filter'=>CHtml::listData($records, 'id', 'name'),
        ),
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T04:54:02.253

在模型中创建一个 var

```
class Customer extends CActiveRecord
{
    public $customer_name;
    public function search()
    {            
        $criteria->compare('CONCAT(first_name, \' \', last_name)',$this->customer_name,true);            
    }
} 
```

在视图中

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'customer-grid',
        'dataProvider'=>$model->search(),
        'filter'=>$model,
        'columns'=>array(
            array(           
                'name'=>'customer_name',
                'value'=>'ucwords($data->first_name.\' \'.$data->last_name)',
                  ),        
            'company_name',
            'country',
            'state',
            'city', 
            'address1',
            'phone1',
            'email',
            array(
                'class'=>'CButtonColumn',
            ),
        ),
    )); ?> 
```

并且不要忘记在模型的 rules() 方法中将新属性声明为“安全”，否则将不会考虑您的输入

```
public function rules()
{
    return array(
    /* ... */
        array('customer_name', 'safe', 'on'=>'search'),
    );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T12:58:41.770

第一个变化：

```
'name'=>'$data->first_name', 
```

到：

```
'name'=>'first_name', 
```

在模型的`search`方法中，您必须添加`LIKE`条件：

```
$model->addSearchCondition( 'CONCAT( first_name, " ", last_name )', $this->first_name ); 
```

# javascript - 调用分配在 var 中的 url

> ID：11844846
> 
> 赞同：1
> 
> 时间：2012-08-07T11:20:59.367
> 
> 标签：javascript, map, svg, raphael

在玩[Raphael.js Australia map](http://raphaeljs.com/australia.html)时，我尝试通过更改路径末尾的属性来为每个元素分配 URL：

```
country.cityone = R.path("coordinates").attr({href: "cityone.html"}).attr(attr);
country.citytwo = R.path("coordinates").attr({href: "citytwo.html"}).attr(attr);
... 
```

以上适用于 Firefox、Chrome 等，但 IE6-IE9 无法使用该声明。

所以我想在之后声明另一个变量`var country`并将网址分配给它：

```
var url = {};
url.cityone = "cityone.html";
url.citytwo = "citytwo.html"; 
```

然后在鼠标单击/向下时调用它：

```
 st[0].onmousedown = function() {

    current && country[current] && document.getElementById(“current”).appendChild(url);

    }; 
```

但是，它根本不起作用。显然我没有从函数中正确调用，将每个 URL 与其各自的城市相关联。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:58:27.930

我没有对此进行测试，但我很确定您应该取消 href 并添加鼠标事件：

```
country.cityone = R.path("coordinates").attr(attr).click(function(){
  window.location.href = "cityone.html";
}); 
```

我很确定这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:19:34.670

只是为了关闭这个问题，经过几次试验，我最终发现IE需要双击`click(function(){`才能打开href页面

我发现在上面的代码中：

```
country.cityone = R.path("coordinates").attr(attr).click(function(){
  window.location.href = "cityone.html";
}); 
```

我必须更改`.click(function(){`为`.mousedown(function(){`IE 才能正常工作。

谢谢@Zevan！干杯

# macos - 如何设置自动机（mac）来创建文件夹并用x个文件填充它们？

> ID：11844850
> 
> 赞同：2
> 
> 时间：2012-08-07T11:21:10.740
> 
> 标签：macos, organization, automator

我见过这个问题的几种变体，但是没有一个女巫完全回答我的问题。我有几个文件夹，其中包含 2,000 到 150,000 个图像文件。随着文件数量随着速度的急剧下降而增加，搜索这些目录变得非常低效。

我想要做的是使用automator：1.选择文件夹2.创建子文件夹3.用（1.）中选择的文件夹中的前1000个文件填充新创建的子文件夹4.如果外部文件夹中存在更多文件，创建另一个子文件夹并填写接下来的 1000 个文件等。

这可能吗？非常感谢任何帮助。

谢谢你，布伦登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:03:36.373

这需要一个目录并将内容移动到名为“newFolder1”、“newFolder2”等的新文件夹中。

您是否经常使用终端？如果您需要更多指导，请告诉我。我也没有进行任何检查，所以如果您有任何错误，请告诉我。

o 将此文件保存到您的桌面（作为教程目的的 script.sh）

```
#!/bin/bash

cd "$1"                   #Change directory to the folder to sort
filesPerFolder=$2       #This is how many files will be in each folder

currentDir='newFolder1';
currentFileCount=0;
currentDirCount=1;

mkdir $currentDir;

for file in *
do
 if [ -f "$file" ]
  then
   mv "$file" "$currentDir";
 fi 
 currentFileCount=$(($currentFileCount + 1));
 if [ $(($currentFileCount % $filesPerFolder)) -eq "0" ]   #Every X files, make a new folder
  then
   currentDirCount=$(($currentDirCount + 1));
   currentDir='newFolder'$currentDirCount;
   mkdir "$currentDir";
 fi
done 
```

o 打开终端并输入`cd ~/Desktop/`

o 键入`chmod 777 script.sh`以更改文件的权限

o 类型`./script.sh "/path/to/folder/you/want/to/sort" 30`

o 这里的**30**是你想要在每个文件夹中有多少个文件。

# objective-c - 在 Storyboard 的视图中显示隐藏的对象

> ID：11844853
> 
> 赞同：2
> 
> 时间：2012-08-07T11:21:19.897
> 
> 标签：objective-c, xcode, storyboard

我有一个问题 - 我隐藏了一些我在代码中使用的按钮（隐藏/显示），但我需要在我的视图中添加一些功能，但我无法找到它们。我的意思是，我当然可以单击它们并且可能会找到它们，但是有没有办法在 XCode(4.4) 或类似的东西中打开“显示隐藏视图”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:56:57.097

好的，有两种方法可以做到这一点：

1.  **理智（安全）的方式**（我知道你不会喜欢它，但我不得不提一下）

    只需选择所有视图并取消选中视图检查器中的**隐藏**复选框

2.  **冒险的方式**（小心！）

    如果您确实隐藏了很多视图并且您想取消隐藏**所有**视图，则可以将 Storyboard 打开到文本编辑器中并进行大量替换`hidden="YES"`（`hidden="NO"`您可以看到它实际上只是带有视图图的 XML）

# iphone - 将字符串 URL 与字符串值进行比较

> ID：11844854
> 
> 赞同：1
> 
> 时间：2012-08-07T11:21:24.170
> 
> 标签：iphone, objective-c, ios, ipad

如何在字符串 url 中搜索字符串值？

字符串网址：

```
http://localHost:8070/serviceCase=ActiveService
http://localHost:8070/serviceCase=KoplService 
```

字符串值为：

```
ActiveService 
```

我需要打印具有“ActiveService”的网址！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:31:02.793

你可能会做这样的事情（如果你的 url 真的是一个字符串）：

```
if ([url rangeOfString:value].location == NSNotFound){
     dosomething
} else {
     doSomethingElse
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:29:32.730

```
if([string hasSuffix:@"ActiveService"]) {
            // Do your stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:30:17.737

```
NSString *url =  @"http://localHost:8070/serviceCase=ActiveService";

if ([url rangeOfString:@"ActiveService"].location != NSNotFound) {
    NSLog(@"URL has the string");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:41:49.090

我推荐下面的 NSString 类别。

**`NSString+Extend.h`**

```
#import <Foundation/Foundation.h>

@interface NSString (Extend)
- (BOOL)containsString:(NSString *)aString ignoringCase:(BOOL)flag;
- (BOOL)containsString:(NSString *)aString;
@end 
```

**`NSString+Extend.m`**

```
#import "NSString+Extend.h"

@implementation NSString (Extend)
- (BOOL)containsString:(NSString *)aString 
{
    return [self containsString:aString ignoringCase:NO];
}

- (BOOL)containsString:(NSString *)aString ignoringCase:(BOOL)flag 
{
    unsigned mask = (flag ? NSCaseInsensitiveSearch : 0);
    return [self rangeOfString:aString options:mask].length > 0;
}
@end 
```

* * *

```
#import "NSString+Extend.h"

NSString *url = @"http://localHost:8070/serviceCase=ActiveService";
NSString *findString = @"ActiveService";

BOOL isContains = [url containsString:findString];
if(isContains)
{
    //do stuff
}
else
{
   //do stuff
} 
```

# sql - firebird中的链接表，丢弃一对多链接表中具有特定值的记录

> ID：11844855
> 
> 赞同：0
> 
> 时间：2012-08-07T11:21:23.837
> 
> 标签：sql, join, firebird

我在firebird 1.5数据库中有两个表，表是client和notes，在notes表中，Client表中的每个对应记录可以有多个记录，有时没有。表格的结构类似于

## 客户

```
Client_id   name
----------------- 
1           Sam 
2           Lee
3           Steve 
4           Linda 
5           Sue 
6           Jill 
7           Jack 
```

## 笔记

```
Notes_id   client_id   Note 
------------------------------ 
1          1           New
2          1           do not send
3          2           old
4          2           likes
5          4           do not send
6          5           new
7          5           Cats and Dogs
8          5           drives 
```

我想运行一个 select 语句，该语句只返回来自客户端表的记录，其中没有名为“不发送”的注释链接到注释表中的客户端。因此，对于上述示例，select 语句只会从客户端表中返回以下记录。

```
Client_id   name
----------------- 
2           Lee
3           Steve 
5           Sue 
6           Jill 
7           Jack 
```

这可能吗？对此的任何帮助将不胜感激。

问候艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:56:47.607

以下是将完成任务的三个查询：

```
SELECT
  c.*
FROM
  client c 
WHERE
  NOT EXISTS(SELECT * FROM notes n WHERE n.client_id = c.client_id 
    AND n.note = 'do not send') 
```

或者

```
SELECT
  c.*, n.client_id
FROM
  client.c LEFT JOIN
    (SELECT client_id FROM notes WHERE note = 'do not send') n
  ON c.client_id = n.client_id
WHERE
  n.client_id IS NULL 
```

或者

```
SELECT
  c.*
FROM
  client c 
WHERE
  NOT c.client_id IN (SELECT client_id FROM notes n 
    WHERE n.note = 'do not send') 
```

# c# - MVC动态表单如何添加验证

> ID：11844858
> 
> 赞同：1
> 
> 时间：2012-08-07T11:21:29.867
> 
> 标签：c#, asp.net-mvc

我想从头开始构建一个动态表单，并且我已经创建了以下元素：

包含我要显示的所有字段的 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Fields>
    <FieldList>
        <Field>
            <Type>checkbox</Type>
            <Name>gender</Name>
            <DefaultValue>false</DefaultValue>
            <CssClass>myclass</CssClass>
        </Field>
        <Field>
            <Type>textbox</Type>
            <Name>name</Name>
            <DefaultValue>fill name</DefaultValue>
            <CssClass>formtextbox</CssClass>
        </Field>
    </FieldList>
</Fields> 
```

输入到我用来反序列化 xml 的类的视图：

```
@model Fields
@{
    if(Model!=null)
    {
        using (Html.BeginForm())
        {
            foreach (Field field in Model.FieldList)
            {
                switch(field.Type)
                {
                    case "textbox":
                        @Html.TextBox(field.Name, field.DefaultValue);
                    break;

                    case "checkbox":
                        @Html.CheckBox(field.Name,Convert.ToBoolean(field.DefaultValue));
                    break;
                }
            }    
        }
    }
} 
```

目前该应用程序正常运行，但我有以下疑问：

1）我认为这不是一个优雅的解决方案，因为我必须在视图中放置太多代码，对吧？

2）我现在想添加一些服务器验证。我通常使用数据注释，但我想这是不可能的，因为我不知道我提交的东西是怎样的。有什么方法可以动态创建类实例并动态添加数据注释？

3）我创建了另一个处理帖子的动作和控制器。因为我不知道我提交的操作是什么，所以我没有收到任何参数。我想我必须从我的行动中使用 Request.Form 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:02:54.950

我的第一个想法是实现一个自定义 HtmlHelper 方法，该方法将获取 XML 并为您生成视图。就像那样，您的视图中只有一行代码。
至于验证，您可以扩展 DataAnnotationsModelValidatorProvider 并覆盖 GetValidators() 以根据您认为合适的任何参数或策略注入默认的 mvc 验证器和/或您自己的验证器。这些也将传播到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:06:28.710

我建议添加不止一种类型：

```
abstract class Field {
     public string Name {get;set; }
}

class BooleanField : Field{
     public bool Value { get;set; }
}

class TextField : Field{
      public string ValidationRegEx { get; set }
      public string Value { get;set; }
} 
```

等等。

还为每种类型添加编辑器模板

要为 TextField 添加验证，您可以创建自定义验证属性，该属性检查与验证 reg ex 匹配的值

# installshield - 安装加盾代码

> ID：11844861
> 
> 赞同：1
> 
> 时间：2012-08-07T11:21:41.550
> 
> 标签：installshield

我是 InstallShield 的初级用户。我在向导界面中添加了一个按钮。现在我想添加一些在单击它时要执行的代码。我不知道这样做的程序。任何的想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:58:33.300

阅读这些博客文章，了解如何从套件安装程序中编写和调用 DLL。

[从套件安装中的向导页面或窗口调用 DLL 中的函数](http://blogs.flexerasoftware.com/installtalk/2011/12/calling-a-function-in-a-dll-from-a-wizard-page-or-window-in-a-suite-installation.html)

[在套件项目中验证用户输入](http://blogs.flexerasoftware.com/installtalk/suite-installations/)

# javascript - 将选定的树视图节点附加到另一个 div

> ID：11844863
> 
> 赞同：0
> 
> 时间：2012-08-07T11:21:48.117
> 
> 标签：javascript, jquery, asp.net

我有一个带有复选框的 ASP.Net 树视图控件。我的要求是，如果检查了任何节点（父节点或子节点），则应将节点复制到另一个 div。如果选中父节点，则应将具有子节点的父节点复制到 div。任何人请帮我完成这项任务。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:00:00.403

您可以轻松地使用`clone()`方法来完成此任务。

参考这里了解更多详情： [http ://api.jquery.com/clone/](http://api.jquery.com/clone/)

# javascript - Express - 将 mysql 连接传递给脚本

> ID：11844868
> 
> 赞同：0
> 
> 时间：2012-08-07T11:21:54.630
> 
> 标签：javascript, node.js, express

我用所有必要的参数定义了mysql连接，默认情况下**`app.js`**如何使其他脚本可见*`routes/`*，而不需要或重新定义mysql参数，只需使用`client.query(..)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:03:36.203

我使用的一种模式是在一个模块中设置我的`db`对象一次并导出它：（我们称之为`utils/mySQL.js`）

```
//I haven't used real mysql in node so excuse the pseudo-syntax:
var db = require('mysql-driver-thingy');
db.connect('localhost', 'sqlport', options...);
db.otherSetupFunctions();
console.log("Finished db setup. You should only see this message once! Cool.");

module.exports = db; 
```

然后我可以在我需要的`db`任何地方都需要该对象。由于`require`s 被缓存，这实际上并没有多次调用 setup 方法。

在 app.js 中：

```
var db = require('./utils/mySQL.js');
... 
```

在模型/user.js 中：

```
var db = require('../utils/mySQL.js');
... 
```

* * *

最后一个不推荐的选择是污染全局命名空间。这似乎是您真正想要的答案：

```
//set up your db
...
// and now make it available everywhere:
global.client = db.client 
```

您现在可以在所有模块中神奇地使用客户端对象，甚至不需要它。

但是，全局变量不好的原因有很多：

*   如果您的代码和其他代码定义了全局变量，它们可能会发生冲突并相互覆盖。
*   很难找到您定义`db`/`client`对象等的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T11:30:30.583

您可以将 mysql 连接注入到其他脚本中，如下所示：

应用程序.js

```
var mysqlConnection = new Conection(params);
require('controller/main.js)(mysqlConnection); 
```

main.js

```
module.exports = function(mysqlConnection) {
    // You can access your mysql connection here
}; 
```

**更新：**

您可以以相同的方式注入多个变量。如果需要，您仍然可以从模块中导出方法：

应用程序.js

```
var mysqlConnection = new Conection(params);
var news = require('model/news.js)(app, mysqlConnection);
news.list(function(err, news) {
    // Do something
}); 
```

新闻.js

```
module.exports = function(app, mysqlConnection) {
    var methods = {};
    // mysql connection and app available from here
    methods.list = function(cb) {
        mysqlConnection.list(function(err, data) {
            cb(err, data);
        });
    };

    return methods;
}; 
```

# javascript - 通过与 jquery 的链接启用默认行为链接

> ID：11844871
> 
> 赞同：0
> 
> 时间：2012-08-07T11:21:57.180
> 
> 标签：javascript, jquery

我是一个 html css 设计类型，对 jquery 不太满意。我继承了一个禁用链接默认行为的站点，我可以看到以下代码：

```
$('a').click(function(event) {
    event.preventDefault();

    var locationHref = window.location.href;
    var elementClick = $(this).attr("href");
    var destination = $(elementClick).offset().top;

    $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination}, 1000, function() {
        window.location.hash = elementClick
    });
      return false; 
```

我需要在不弄乱此代码的情况下向这个单页网站添加普通链接（它启用视差滚动）。有什么办法可以通过链接来完成这个链接吗？

顺便说一句，我在这里看到了解决方案，但我必须承认我不太了解它们。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:31:17.223

`data-donthandle="true"`给这些特殊链接一个属性怎么样。然后，在 jQuery 中检查该属性。如果该属性存在并且为假，则只需`return true;`在事件处理程序的开头。

正如已经建议的那样，这将节省您通过 javascript 浏览和禁用 onclick 的时间。

```
$('a').click(function(event) {
    if($(this).attr('data-donthandle')) {
        return true;
    }
    else {
       event.preventDefault();
       //code here for handling clicks
       alert('Stopped.');

       return false;
    }
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:29:30.227

不知道为什么有人会以这种方式全面禁用页面上的所有链接。不幸的是你继承了这样的代码。我不确定你的意思是你*不能*触碰那个代码，还是只是不想触碰。

如果是前者，您有两种选择：

1) 为某些链接解绑此点击事件。例如，如果您在容器内有链接`#container`，或者您的所有链接都有特定的类`.class`，您可以这样做：

```
$('#container a').off('click');
$('a.class').off('click'); 
```

然后，这些链接将不受继承的 click 事件处理程序的影响。

唯一的问题是您取消绑定到此类链接的*所有*单击事件处理程序。由于继承的事件没有命名空间，这是不可避免的。第二种选择是...

2）设置第二个点击事件处理程序，通过将用户转发到链接的 HREF 来绕过继承处理程序的默认操作预防：

```
$('a').on('click', function() { location.href = $(this).attr('href'); }); 
```

# session - 如何在禁用 cookie 时设置标志

> ID：11844872
> 
> 赞同：0
> 
> 时间：2012-08-07T11:21:58.377
> 
> 标签：session, cookies

我正在编写一个移动网站，并在网站加载之前短暂显示启动画面。

我在 index.php 文件中使用以下代码重定向到启动画面

```
session_start();
if(!isset($_SESSION['splash'])){
    $_SESSION['splash']=true;
    header('Location: splash.html');
}

//Do normal index.php 
```

启动屏幕在 1 秒后重定向回 index.php，这一次跳过启动屏幕部分并正常加载站点。在有人禁用 cookie 之前，这一切都非常有效！在这种情况下，会话变量 'splash' 永远不会被设置，所以你只会得到一个无限循环，一次又一次地显示启动屏幕......

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:32:40.750

您可以让 PHP 将会话 ID 作为 GET 变量传递，而不是将其存储在 cookie 中。有关如何执行此操作的信息，[请参见此处。](http://my.php.net/manual/en/session.idpassing.php)

# bluetooth-lowenergy - 限制 BLE 外围设备只连接一个 Master

> ID：11844873
> 
> 赞同：0
> 
> 时间：2012-08-07T11:22:06.200
> 
> 标签：bluetooth-lowenergy

我想限制我的 BLE 外围设备始终只连接一个主设备。如果我收到来自其他主设备/中央设备的连接请求，它应该拒绝连接请求！

谢谢你的帮助 ！

问候，

森提尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:32:22.800

您的问题有点模糊，所以我将其分为两种情况：

(1) 如果它连接到一个master，它不能连接到另一个。这个限制是由 BLE 标准强加的。

(2) 可能你的意思是这个。如果它连接到一个主设备，但由于某种原因，连接丢失并且外围设备再次广告。您不希望此外围设备连接到听筒中的任何其他中央设备并仍然等待其原始主机，对吗？好吧，您的外围设备只能做可连接的广告并响应任何发起连接请求的中央设备。但是一旦两者都连接起来，您的外围设备可能会向主设备询问任何信息以进行识别。如果主设备无法正确回答，您的外围设备可能会断开连接并再次做广告，直到原始中央设备连接到它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T22:13:59.197

然后，您必须在从站上编辑​​应用程序。

有BLE芯片应用层源码吗？你有BLE芯片编程器吗？开发包？你用的是什么芯片？

# mysql - 在 MySQL 中设置过期日期的值

> ID：11844874
> 
> 赞同：0
> 
> 时间：2012-08-07T11:22:12.233
> 
> 标签：mysql, job-scheduling

MySQL 中有一种方法可以在特定日期时间设置值。例如：

今天在我的表测试中有

```
Id    Value     Expiration Date
1       0      2012-08-07 18:20
2       0      2012-08-10 15:20 
```

明天我想拥有

```
Id    Value     Expiration Date
1       1      2012-08-07 18:20
2       0      2012-08-10 15:20 
```

做到这一点的方法只是一份工作（一些计时器......）？最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:27:08.053

更好的方法是在 MySQL 中创建[EVENT ：](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

```
DELIMITER $$

CREATE EVENT event1
ON SCHEDULE EVERY 1 DAY
DO
BEGIN
    UPDATE table_name 
    SET Value = 1
    WHERE DATE(Expiration Date) < CURRENT_DATE AND
          Value = 0;
END$$

DELIMITER ; 
```

# python - Python中的Tkinter OpenGL上下文

> ID：11844882
> 
> 赞同：26
> 
> 时间：2012-08-07T11:22:37.883
> 
> 标签：python, opengl, tkinter, tk

我需要在 Tkinker 中创建一个 OpenGL 上下文，以便将它与 PyOpenGL Python 模块一起使用。

Tkinker 本身并不支持 OpenGL 上下文，但我在 PyOpenGL 文档上找到了这个页面，解释了如何使用模块中包含的包装器：http: [//pyopengl.sourceforge.net/documentation/context/](http://pyopengl.sourceforge.net/documentation/context/)

我尝试运行提供的代码，但收到一条消息，提示找不到 TOGL 模块。[我从http://togl.sourceforge.net/](http://togl.sourceforge.net/)下载了模块，但无法让它工作。

PS。我使用 virtualenv 在 Mac OS X 上使用 Python 3.2 进行了测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T19:03:34.633

PyOpenGL 为 Tk OpenGL 小部件 (Togl) 提供 Python 绑定，但不为 Togl 本身提供绑定，这就是您必须下载它的原因。现在，安装 Togl 很容易，但没有准备好执行任务的工具。由于 Python 绑定将使用 Tcl 加载 Togl 模块，因此小部件需要位于 Tcl 中存在的目录之一中`auto_path`，这是 Tcl 查找加载库的地方。你可以做的是启动一个 Tcl 解释器，`tclsh`然后通过 . 检查哪些是这些目录`puts $auto_path`。就我而言，我将目录`lib/Togl2.0`（在 Togl 的 .tar.gz 中）复制到`/opt/local/lib/tcl8.5`. 您还可以扩展`auto_path`以查找其他目录，但我不在这里介绍。

然后我在 Mac OSX 上使用 Python 2.7 进行了测试。`import OpenGL.Tk`尝试加载 Togl，太糟糕了，它失败了。原因是 Togl 是为 i386 预编译的，因为我将 Python 构建为通用二进制文件，我所做的只是将它`arch -i386 python2.7`作为`import OpenGL.Tk`.

# c# - 马歇尔 c# 字符串到 c++

> ID：11844885
> 
> 赞同：0
> 
> 时间：2012-08-07T11:22:46.283
> 
> 标签：c#, marshalling

我想知道如何将 C# 字符串编组为本机 C++ char*。我正在尝试，但似乎没有任何效果。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:51:39.237

请记住，C++ char 实际上是一个字节，因此您需要使用类似的东西将其作为 byte[] 传递

```
string str; // Contains string to pass to C++ DLL
byte[] bytes = Encoding.UTF8.GetBytes(str);
MyFun(bytes); // Call the C++ function with the string 
```

另请参阅[将 C# 字符串传递给 C++ 并将 C++ 结果（字符串、char*.. 任何东西）传递给 C#](https://stackoverflow.com/questions/2179270/pass-c-sharp-string-to-c-and-pass-c-result-string-char-whatever-to-c-s)以获得不同的视角。

# c++ - 将新对象传递给函数 c++

> ID：11844886
> 
> 赞同：4
> 
> 时间：2012-08-07T11:22:54.677
> 
> 标签：c++

我只是想知道这是否是一种不好的做法。

```
for(int i=0;i<1000;i++)
    happyFunction(new Car()); 
```

新`car()`对象在调用它`happyFunction`之后应该存在，然后它应该被销毁。现在可以这样做了。我的意思是我不应该删除为该实例分配的内存吗？

示例使其更清楚。

```
int i = 0;
for (i=0;i<1000;i++){
    new car();
} 
```

这是一个好习惯吗？我应该删除内存分配吗？我希望我的问题很清楚。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T11:26:49.813

```
happyFunction(new Car()); 
```

这本身并不是一个坏习惯（尽管几乎可以肯定是错误的），内存可以在函数内部被删除。但这会令人困惑，所以这真的不是最好的主意。

此外，虽然使用一个参数是安全的，但如果是这样的话

```
happyFunction(new Car(), new Thing()); 
```

并且其中一条消息在执行另一条新消息后引发了异常，无法释放内存，因此不安全。

您总是必须自己在 C++ 中释放内存，因此您的第二个示例会导致大量内存泄漏。有 unique_ptr 和 shared_ptr 等类来帮助您管理它，而无需自己编写删除，您可以在网上找到任意数量的关于它们的教程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:38:59.967

有两种可能：

1.  `happyFunction`应该拥有指针的所有权，调用者从不担心它。在这种情况下，这样写会更明智

    ```
    void happyFunction(std::unique_ptr<Car> &&car)
    {
        // car is mine now, and is automatically destroyed when I return
        // unless I explicitly request otherwise
    }

    void caller()
    {
        happyFunction(std::unique_ptr<Car>(new Car));
        // the new Car is immediately handed over to the unique_ptr
        // and I don't have to worry about leaks
    } 
    ```

2.  `happyFunction`只应该*使用*指针：调用者保留控制权和所有权。在这种情况下，最好传递一个引用，这样就不会有所有权转移的建议

    ```
    void happyFunction(Car &car)
    {
        // car is still owned by the caller,
        // I just get a reference to use in here
    }

    void automatic_caller()
    {
        Car car;
        happyFunction(car);
        // car is always owned by me, and is
        // automatically destroyed at the end of this scope
    }

    // alternatively (only if car should live longer than the enclosing scope)
    void dynamic_caller()
    {
        std::unique_ptr<Car> car(new Car);
        // or get pointer from somewhere else ...
        // or get shared_pointer, etc. etc.
        happyFunction(*car);
        // again car is destroyed here unless we do something special
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-24T11:18:29.677

`new Car()`如果您返回指向`happyFunction()`由`new Car()`.

考虑以下代码：

```
#include <string>
#include <iostream>

using std::string;
using std::cout;

class Car
{
public:
    string s;
    Car(string str):s(str) {}
};

Car* happyFunction(Car *pCar)
{
    // do something with data pointed to by pCar
    return pCar;
};

int main()
{
    // outer pointer to memory allocated by new operator
    Car *pCar = happyFunction(new Car("test"));
    // pCar still points to valid object even after happyFunction() content
    // went out of scope
    cout << pCar->s << "\n";

    // release pCar memory outside the happyFunction()
    delete pCar;

    return 0;
} 
```

# php - Indexing 2.5 million items with assorted other information

> ID：11844889
> 
> 赞同：0
> 
> 时间：2012-08-07T11:23:11.170
> 
> 标签：php, mysql, scalability

I have a table with a list of 2.5 million doctors. I also have tables for accepted insurance, languages spoken, and for specialties (taxonomy) provided. The doctor table is like:

```
CREATE TABLE `doctors` (
  `doctor_id` int(10) NOT NULL AUTO_INCREMENT,
  `city_id` int(10) NOT NULL DEFAULT '0',
  `d_gender` char(1) NOT NULL DEFAULT 'U',
  `s_insurance` int(6) NOT NULL DEFAULT '0',
  `s_languages` int(6) NOT NULL DEFAULT '0',
  `s_taxonomy` int(6) NOT NULL DEFAULT '0',
  PRIMARY KEY (`doctor_id`)
) ENGINE=InnoDB; 
```

The other information is stored as such:

```
CREATE TABLE `doctors_insurance` (
  `assoc_id` int(10) NOT NULL AUTO_INCREMENT,
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `insurance_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`assoc_id`)
) ENGINE=InnoDB;

CREATE TABLE `doctors_languages` (
  `assoc_id` int(10) NOT NULL AUTO_INCREMENT,
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `language_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`assoc_id`)
) ENGINE=InnoDB;

CREATE TABLE `doctors_taxonomy` (
  `assoc_id` int(10) NOT NULL AUTO_INCREMENT,
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `taxonomy_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`assoc_id`)
) ENGINE=InnoDB; 
```

Naturally each doctor supports various different insurance plans, maybe speaks multiple languages, and some doctors can have several different specialties (taxonomy). So I opted to have separate tables for indexing, this way need I add new indices or drop old ones, I can simply remove the tables and not have to wait the long time it takes to actually do it the old fashioned way.

Also because of other scaling techniques to consider in the future, classic JOINs make no difference to me right now, so I'm not worried about it.

Indexing by name was easy:

```
CREATE TABLE `indices_doctors_names` (
  `ref_id` int(10) NOT NULL AUTO_INCREMENT,
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `practice_id` int(10) NOT NULL DEFAULT '0',
  `name` varchar(120) NOT NULL DEFAULT '',
  PRIMARY KEY (`ref_id`),
  KEY `name` (`name`)
) ENGINE=InnoDB; 
```

However when I wanted to allow people to search by the city, specialties, insurance, language, and gender and other demographics, I created his:

```
CREATE TABLE `indices_doctors_demos` (
  `ref_id` int(10) NOT NULL AUTO_INCREMENT,
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `city_id` int(10) NOT NULL DEFAULT '0',
  `taxonomy_id` int(6) NOT NULL DEFAULT '0',
  `insurance_id` int(6) NOT NULL DEFAULT '0',
  `language_id` int(6) NOT NULL DEFAULT '0',
  `gender_id` char(1) NOT NULL DEFAULT 'U',
  PRIMARY KEY (`ref_id`),
  KEY `index` (`city_id`,`taxonomy_id`,`insurance_id`,`language_id`,`gender_id`)
) ENGINE=InnoDB; 
```

The idea is that there will be an entry for each change in specialty, insurance, or language primarily, though others will still the same. This creates an obvious problem. If a doctor has 3 specialties, supports 3 insurance providers, and speaks 3 languages, this alone means this specific doctor has 27 entries. So 2.5 million entries easily balloons into far more.

There has to be a better approach to do this, but how can it be done? Again, I'm not interested in moving to classic indexing techniques and using JOINs because it will quickly become too slow, I need a method that can scale out easily.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:23:26.967

I know this is not the answer you're looking for, but you've now taken the things that a RDBMs do well and tried implementing it yourself, using the same mechanism that the RDBMs could use to actually make sense of your data and optimize both retrieval and querying. In practice you've decided to drop using proper indexes to create your own half-way-there-solution, which will try to implement indexes by itself (by actually using the indexing capability of the RDBMs with the KEY).

I'd suggest to actually try to just use the database the way you've already structured it. 2.5m rows isn't that many rows, and you should be able to make it work fast and within your constraints using both JOINs and indexes. Use EXPLAIN and add proper indexes to support your the queries you want answered. If you ever run into an issue (and I'd doubt it regarding the amount of data you're querying here), decide to solve the bottle neck then when you actually know what could be the issue instead of trying to solve a problem you've only imagined so far. There might be other technologies than MySQL that can be helpful - but you'll need to know what's *actually* hurting your performance first.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:29:15.277

The normal way to deal with the explosion of rows in a denormalized table like "indices_doctors_demos" is to normalize to 5NF. Try to keep in mind that normalizing has nothing at all to do with the decision to use id numbers as surrogate keys.

In the scenario you described, normalizing to 5NF seems practical. You wouldn't have any table with more than about 7 million rows. The table "indices_doctors_demos" vanishes entirely, the four "doctors" tables all become narrower, and all of them would end up with highly selective indexes.

If you worked for me, I'd require you to prove that 5NF can't work before I'd let you take a different approach.

Since you already *have* all the data, it makes sense to build it and test it, paying close attention to the query plans. It shouldn't take you more than one afternoon. Guessing at some table names, I'd suggest you load data into these tables.

```
-- You're missing foreign keys throughout. I've added some of them, 
-- but not all of them. I'm also assuming you have a way to identify 
-- doctors besides a bare integer.
CREATE TABLE `doctors` (
  `doctor_id` int(10) NOT NULL AUTO_INCREMENT,
  `city_id` int(10) NOT NULL DEFAULT '0',
  `d_gender` char(1) NOT NULL DEFAULT 'U',
  PRIMARY KEY (`doctor_id`)
) ENGINE=InnoDB;

CREATE TABLE `doctors_insurance` (
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `insurance_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`doctor_id`, `insurance_id`),
  FOREIGN KEY (`doctor_id`) REFERENCES `doctors` (`doctor_id`),
  FOREIGN KEY (`insurance_id`) REFERENCES `insurance` (`insurance_id`)
) ENGINE=InnoDB;

CREATE TABLE `doctors_languages` (
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `language_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`doctor_id`, `language_id`),
  FOREIGN KEY (`doctor_id`) REFERENCES `doctors` (`doctor_id`),
  FOREIGN KEY (`language_id`) REFERENCES `languages` (`language_id`)
) ENGINE=InnoDB;

CREATE TABLE `doctors_taxonomy` (
  `doctor_id` int(10) NOT NULL DEFAULT '0',
  `taxonomy_id` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`doctor_id`, `taxonomy_id`),
  FOREIGN KEY (`doctor_id`) REFERENCES `doctors` (`doctor_id`),
  FOREIGN KEY (`taxonomy_id`) REFERENCES `taxonomies` (`taxonomy_id`)
) ENGINE=InnoDB; 
```

# ant - 如何为 ant contrib 准备 ant-contrib-0.3.jar

> ID：11844890
> 
> 赞同：2
> 
> 时间：2012-08-07T11:23:10.810
> 
> 标签：ant, installation, ant-contrib

我进行了很多搜索，并在关注所有这些链接之后......

[windows下如何安装ant contrib](https://stackoverflow.com/questions/653552/how-to-install-ant-contrib-under-windows)

[Apache 蚂蚁贡献](http://www.scmgalaxy.com/apache-ant/ant-ant-contrib.html)

[在 ANT 中使用 If-else](http://www.vincentkong.com/blog/-/blogs/if-else-in-ant)

[蚂蚁贡献@Sourceforge](http://ant-contrib.sourceforge.net/)

我所能产生的只是而已`cpptasks.jar`，没有别的。

谁能引导我走向`ant-contrib-0.3.jar`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:36:58.157

在[ant-contrib.sourceforge.net 上](http://ant-contrib.sourceforge.net/)，您可以找到“下载”链接（在文本中间的某处）。这将引导您进入文件部分，您可以在其中找到 0.3 版的档案：http: [//sourceforge.net/projects/ant-contrib/files/ant-contrib/ant-contrib-0.3/](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/ant-contrib-0.3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T09:54:29.873

您可以从以下网址获取 jar 文件： [http ://www.java2s.com/Code/Jar/a/Downloadantcontrib03jar.htm](http://www.java2s.com/Code/Jar/a/Downloadantcontrib03jar.htm)

# asp-classic - 如果此数据的长度 = 0，我如何加载访问数据？

> ID：11844892
> 
> 赞同：1
> 
> 时间：2012-08-07T11:23:27.777
> 
> 标签：asp-classic, ms-access-2003

我正在从访问数据库加载数据，但我遇到了没有长度的列的问题。这是asp代码：

```
sql= "select * from clientes where usuario_clientes="+id_usuario
        rs.Open sql, oConn
        while not rs.EOF    
            nombre=rs.Fields("Nombre_clientes")
            dni=rs.Fields("dni_clientes")
            mail=rs.Fields("mail_clientes")
            domicilio=rs.Fields("direccion_clientes")
            cp=CStr(rs.Fields("cp_clientes"))
            poblacion=rs.Fields("poblacion_clientes")           
            movil=rs.Fields("movil_clientes")

            if not rs.Fields("observaciones_clientes") then
                observaciones=" "
            else
                observaciones=rs.Fields("observaciones_clientes")
            end if

            if not rs.Fields("telefono_clientes") then
                telefono=""
            else
                telefono=rs.Fields("telefono_clientes")
            end if

            fila="<tr><td>"+nombre+"</td><td>"+dni+"</td><td>"+mail+"</td><td>"+domicilio+"</td><td>"+cp+"</td><td>"+poblacion+"</td><td>"+telefono+"</td><td>"+movil+"</td><td>"+observaciones+"</td></tr>"
            response.Write(fila)
            rs.MoveNext
        wend 
```

如果此数据不存在但它不起作用，我尝试显示长度为 0 的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:30:35.320

我不确定我是否理解，但 MS Access 通常设置为不允许零长度字符串，因此这些字段可能为空。也许：

```
if IsNull(rs.Fields("telefono_clientes")) then
    telefono="--"
else 
```

# java - 未知 SMTP 主机 android JavaMail

> ID：11844893
> 
> 赞同：0
> 
> 时间：2012-08-07T11:23:30.087
> 
> 标签：java, android

我有一个邮件服务器，它与我的手机在同一个网络上托管，但我不断收到异常消息`Unknow SMTP host`。当然，我已经阅读了几个地方，当主机名拼写不正确时会发生此异常。但在这种情况下它**是**。在`C#`它完成一个简单的方式是这样的：

```
var client = new SmtpClient(_strSmtpHost);
client.UseDefaultCredentials = true; 
var mailMessage = new MailMessage(_strFrom, emailTo);
mailMessage.Subject = subject;
mailMessage.Attachments.Add(attachment);
client.Send(mailMessage); 
```

在我的应用程序中，它是这样完成的：

```
 SendMail m = new SendMail("Username", "password"); 

      String[] toArr = {"TO@EXAMPLE.com"};   
      m.setTo(toArr); 
      m.setFrom("FROM@EXAMPLE.com"); 
      m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
      m.setBody("Email body."); 

      try { 
        m.addAttachment(fileName); 

        if(m.send()) { 
          Log.i("MAIL SENDER: ", "Succesfully");
        } else { 
              Log.i("MAIL SENDER: ", "UnSuccesfully");
        } 
      } catch(Exception e) { 
        Log.e("MailApp", "Could not send email" + e); 
      } 
```

在我的 SendMail 类中，我定义了一个包含`DNS`主机地址的字符串

```
_host = "napserver"; // default smtp server
_port = "25"; // default smtp port 
```

在尝试进行连接之前，我想验证发送邮件的邮件地址的用户名和密码：

```
Session session = Session.getInstance(props, new GMailAuthenticator(_user, _pass)); 
```

然后尝试连接并发送消息

```
 Transport transport = session.getTransport("smtp");
  transport.connect(_host, 25, _user, _pass);
  Transport.send(msg); 
```

只是为了测试目的，我尝试了`SMTP`Gmail 的地址，这很有效，邮件被发送到指定的邮件帐户。任何人都可以给我一个提示吗？

**编辑**

我还应该提到，当与主机和端口连接时，我尝试通过连接`Telnet`到此邮件服务器以及 PuTTy 的输出：`napserver``25`

```
220 napserver.nap01.dac.no.eu-admin.net Microsoft ESMTP MAIL Service, Version: 6                                               .0.3790.3959 ready at  Tue, 7 Aug 2012 13:38:55 -0700 
```

**编辑 2**

从 PuTTy 输出中可以看到：

```
Microsoft ESMTP MAIL Service 
```

我的邮件服务器使用 ESMTP，但据我所知，这只是实现了一些安全层等等。也许这就是错误所在？

**编辑 3**

我试图通过远程桌面访问邮件服务器，我ping我的手机IP地址只是为了确保服务器和手机位于同一个网络上，而且它是..

# performance - 是否有关于 Azure VM 本地驱动器有多快的数据？

> ID：11844900
> 
> 赞同：5
> 
> 时间：2012-08-07T11:24:03.540
> 
> 标签：performance, azure, disk, infrastructure

我正在`OnStart()`使用“小型”实例在我的 Azure 角色中进行试验。事实证明，将位于驱动器 D 上“本地存储”中的 400 兆字节 ZIP 文件解压缩到驱动器 E 上的文件夹中大约需要两分钟。

我虽然也许应该以其他方式来做，但我找不到任何关于 Azure VM 上的本地磁盘通常有多快的数据。

是否有关于 Azure VM 本地磁盘速度的测试结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:00:32.510

我刚刚比较了 Azure 和 Amazon EC2 之间的磁盘性能。[你可以在这里](http://programmator.no/er-amazon-raskare-enn-azure/)阅读它，虽然你可能想从挪威语翻译它:-)

不过，有趣的部分是以下 HD Tune 屏幕截图。

首先，在 Amazon EC2 上运行 Windows Server 2008 的小型实例：

![在此处输入图像描述](../Images/a3421cd73bf3499e6b59d54b4bf260f4.png)

接下来，在 Azure 上运行 Windows Server 2012 的一个小实例：

![在此处输入图像描述](../Images/969ab64359c2c884e022b8b74ce46ab7.png)

这不是一个公平的比较，因为某些差异可能是由于缺少 Windows 2012 驱动程序，但您可能仍然会发现它很有用。

然而，正如 Sandrino 所指出的，Azure 上的小型实例只能获得“中等”的 I/O 性能，这可能是支持 Amazon 的一个论据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T11:44:13.283

这完全取决于您的 VM 大小：[https](https://www.windowsazure.com/en-us/pricing/details/#cloud-services) ://www.windowsazure.com/en-us/pricing/details/#cloud-services 。如您所见，小型实例将为您提供中等 I/O 性能，而中/大型/xxl 将为您提供高 I/O 性能。

如果您想了解详细信息，我建议您阅读这篇博文：[Windows Azure 虚拟机上的 Microsoft SQL Server 2012 VM 性能 - 第 I 部分：I/O 性能结果](http://blogs.technet.com/b/the_cloud_pilot/archive/2012/07/09/microsoft-sql-server-2012-vm-performance-on-windows-azure-virtual-machines-part-i-results.aspx)。他们谈到了 SQLIO 工具，该工具可以帮助人们决定将他们的 SQL Server 基础架构迁移到 Windows Azure VM。

这个工具很有趣，因为它可能只会为您提供所需的信息（读取和写入 MB/s）：

![在此处输入图像描述](../Images/34550505d0f21fb141d605406ce8fddf.png)

![在此处输入图像描述](../Images/dbf9dcc6007685e5d4fb568c1596f1cc.png)

# javascript - 在 MVC 应用中组织 JS 代码

> ID：11844905
> 
> 赞同：3
> 
> 时间：2012-08-07T11:24:36.383
> 
> 标签：javascript, asp.net-mvc-3

我在几个局部视图中有几个 JS 代码。

我认为将所有这些代码放在单独的 JS 文件中以将 JS 代码与 HTML 代码分开是个好主意。

但是你如何处理 JS 中的 MVC 代码呢？

下面的示例是我在部分视图中的 JS 代码。我想放入 JS 文件，但 JS 代码有 MVC 代码`@Url.Action("ResultForm", "File")`，它不会在 JS 文件中执行。

有什么建议吗？

**Javascript代码**

```
<script type="text/javascript">
    var varTimerSpeed = 5000;
    var varTimerInterval;
    var onlyOneInstance = false;

    startTimer();

    function startTimer() {
        onlyOneInstance = false;
        varTimerInterval = setInterval(loadResultForm, varTimerSpeed);
    }

    function loadResultForm() {
        if (onlyOneInstance) return;
        clearInterval(varTimerInterval);
        onlyOneInstance = true;
        $.ajax({
            url: '@Url.Action("ResultForm", "File")',
            data: '',
            dataType: 'html',
            success: function (data) {
                $('#ResultForm').html(data);
                startTimer();
            }
        });
    };
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:04:47.453

我假设仅对 js 代码使用 Razor 部分不是一个选项。在这种情况下，您可以使用这种方法：

在你的 view.cshtml

```
<script type="text/javascript">
    var Namespace.urlForModule = '@Url.Action("ResultForm", "File")';
</script>
<script type="text/javascript" src="customScript.js"></script> 
```

在你 customScript.js

```
$.ajax({
    url: Namespace.urlForModule,
}) 
```

这个想法是从 js 代码中分离出 Asp.Net MVC 特定代码。

你想这样做的方式取决于你。正如其他人建议的那样，您可以将 data-* 属性附加到某些 div 并阅读它们。我更喜欢这个，因为它清楚地表达了我的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:58:51.920

一种解决方案是创建具有所需动态值的`meta`标记或属性，并使用 JavaScript 捕获它。`data-*`通过这种方式，您可以通过微小的更改完全分离代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:58:31.277

创建一个文件“somescript.js”并将代码放在一个唯一的公共函数中，提取硬编码的外部依赖项并将它们替换为参数。

```
var startXyz = function(resultFormUrl) {
    var varTimerSpeed = 5000;
    var varTimerInterval;
    var onlyOneInstance = false;

    startTimer();

    function startTimer() {
        onlyOneInstance = false;
        varTimerInterval = setInterval(loadResultForm, varTimerSpeed);
    }

    function loadResultForm() {
        if (onlyOneInstance) return;
        clearInterval(varTimerInterval);
        onlyOneInstance = true;
        $.ajax({
            url: resultFromUrl,
            data: '',
            dataType: 'html',
            success: function (data) {
                $('#ResultForm').html(data);
                startTimer();
            }
        });
    };
}; 
```

然后，在您的页面中执行以下操作：

```
<script>
   $(function(){ 
       startXyz('@Url.Action("ResultForm", "File")');
   });
</script> 
```

现在您有一个模块化功能，它将启动您的页面/部分和一个不直接依赖于服务器状态并且可以在相同或另一个页面上重用的脚本文件。

如果部分视图在每页中多次呈现，则此方法特别有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T12:22:24.627

您可以使用 url 添加隐藏字段：

```
// View:   
@Html.Hidden("LoadResultFormUrl", @Url.Action("ResultForm", "File"))

// js-file
function loadResultForm() {
    url = $("#LoadResultFormUrl").val();
    ...
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T12:24:48.073

为什么不只创建一个只包含 js 代码的局部视图，
而`renderpartial`不是添加脚本标记？

# c++ - 私有函数中对私有静态成员的未定义引用

> ID：11844906
> 
> 赞同：-2
> 
> 时间：2012-08-07T11:24:36.393
> 
> 标签：c++, opengl

我正在编写一个简单的着色器管理器，因此我不必一直编写涉及我的着色器的重复代码并且我遇到了一些问题，这里是出现错误的函数：

```
void ShaderManager::create_program(std::string name)  {
    GLuint vertexshader;
    GLuint fragmentshader;

    GLint link_ok = GL_FALSE;

    if ((vertexshader = create_shader(name + ".v.glsl", GL_VERTEX_SHADER)) == 0)  {
        print_shader_errors(&vertexshader);
    }

    if ((fragmentshader = create_shader(name + ".f.glsl", GL_FRAGMENT_SHADER)) == 0)  {
        print_shader_errors(&fragmentshader);
    }

    program_values.emplace_back(glCreateProgram());
    program_keys.emplace_back(name);
    glAttachShader(program_values.at(program_values.size()), vertexshader);
    glAttachShader(program_values.at(program_values.size()), fragmentshader);
    glLinkProgram(program_values.at(program_values.size()));

    glGetProgramiv(program_values.at(program_values.size()), GL_LINK_STATUS, &link_ok);

    if (!link_ok)  {
        std::cout << "The shaders did not link correctly." << "\n";
    }
} 
```

我尝试访问的每个私有静态成员都说同样的话：

```
Generator\src\ShaderManager.cpp|33|undefined reference to ShaderManager::program_values' 
```

我的头文件如下所示：

```
#ifndef SHADERMANAGER_H
#define SHADERMANAGER_H

#include <string>
#include <vector>

#include <GL/glew.h>
#include <GL/glu.h>
#include <GL/gl.h>

class ShaderManager {
    public:
        ShaderManager();
        virtual ~ShaderManager();

        static GLuint get_program(std::string shader_name);
        static int get_index_of_program_key(std::string program_name);

        static void create_program(std::string name);
        static bool bind_attribute(std::string shader_name, std::string attribute_name);
        static bool bind_uniform(std::string shader_name, std::string uniform_name);

    protected:
    private:
        static std::vector<GLuint> program_values;
        static std::vector<std::string> program_keys;

        static std::vector<GLuint> attribute_values;
        static std::vector<std::string> attribute_keys;

        static std::vector<GLuint> uniform_values;
        static std::vector<std::string> uniform_keys;

        static void print_shader_errors(GLuint *shader);
        static const char* file_read(std::string filename);
        static GLuint create_shader(std::string filename, GLenum type);
};

#endif // SHADERMANAGER_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:38:31.337

首先，您正在`program_values.at( program_values.size() )`访问，它正在访问最后一个元素之后的元素（索引从 0 而不是 1 开始）并且`std::vector::at()`函数将引发 out_of_range 异常。这是访问最后一个元素的正确代码：`program_values.at( program_values.size() - 1 )`或更短`program_values.back()`。

其次，如果你声明任何静态成员，你需要在**一个**cpp 文件中定义它，像这样：

```
std::vector<GLuint> ShaderManager::program_values;
std::vector<std::string> ShaderManager::program_keys;

std::vector<GLuint> ShaderManager::attribute_values;
std::vector<std::string> ShaderManager::attribute_keys;

std::vector<GLuint> ShaderManager::uniform_values;
std::vector<std::string> ShaderManager::uniform_keys; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:34:47.300

在类定义中，您只*声明*了静态成员`program_values`。在某些 .cpp 文件（最好的选择是包含所有类方法定义的文件）中，您需要定义它 - 像这样

```
std::vector<GLuint> ShaderManager::program_values; 
```

或者

```
std::vector<GLuint> ShaderManager::program_values(some_constructor_parameters); 
```

# ios5 - 在 ios 中播放 mp3 文件失败

> ID：11844908
> 
> 赞同：-2
> 
> 时间：2012-08-07T11:24:39.187
> 
> 标签：ios5, avaudioplayer

> **可能重复：**
> [声音停止播放](https://stackoverflow.com/questions/8094557/sound-stop-playing)

我对 iPhone 应用程序开发真的很陌生。我想在我的应用程序中播放一个 .mp3 文件。这是我尝试执行的代码片段。“dd.mp3”是支持文件下的文件。但它不起作用。我做错了什么吗？

```
NSError *error=nil;
NSURL *audioURL =[[NSBundle mainBundle] URLForResource:@"dd" withExtension:@"mp3"];
AVAudioPlayer *avPlayerObject = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:&error];

if(avPlayerObject)
{
 [avPlayerObject play];
} 
```

当我运行此代码时，我收到以下错误输出。

2012-08-08 06:46:30.802 serviceTest[408:10703] 加载/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn: dlopen(/System/Library/) 时出错Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在： /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security。框架/版本/A/Security 2012-08-08 06:46:30.895 serviceTest[408:10703] 加载/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn 时出错。bundle/Contents/MacOS/AudioIPCPlugIn：dlopen（/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library /Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/ /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 CoreFoundation.framework/CoreFoundation 2012-08-08 06:46:31.196 serviceTest[408:10703] 加载 /System/Library/Extensions/AppleHDA.kext 时出错/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer /Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.221 serviceTest[408:10703] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext /Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security。framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation在 /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.276 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/时出错AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System /Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5。/System/Library/Frameworks/Security.framework/Versions/A/Security 中的 0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-08 06:46:31.301 serviceTest[408:10703] 加载错误/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/ AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform /Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06：46:31.358 serviceTest[408:10703] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents /PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode。 app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.382 serviceTest[408:10703] 加载 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn 时出错。bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library /Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/ /System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.461 serviceTest[408:10703] 加载 /System/Library/Extensions/AppleHDA.kext 中的 CoreFoundation.framework/CoreFoundation /Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer /Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.486 serviceTest[408:10703] 加载错误 /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext /Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security。framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation在/System/Library/Frameworks/Security.framework/Versions/A/Security 2012-08-08 06:46:31.549 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/时出错AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System /Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5。/System/Library/Frameworks/Security.framework/Versions/A/Security 中的 0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载错误/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/ AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform /Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security/System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载 /System 时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer /SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security/System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载 /System 时出错/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn: dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer /SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System/Library/Frameworks/Security.framework/Versions/A/Security框架/版本/A/安全框架/版本/A/安全框架/版本/A/安全框架/版本/A/安全/System/Library/Frameworks/Security.framework/Versions/A/Security 中的框架/CoreFoundation 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents 时出错/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 /Library/Frameworks/CoreFoundation.framework/CoreFoundation/System/Library/Frameworks/Security.framework/Versions/A/Security 中的框架/CoreFoundation 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents 时出错/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 /Library/Frameworks/CoreFoundation.framework/CoreFoundation框架/版本/A/Security 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错： dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions /A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System /Library/Frameworks/Security.framework/Versions/A/Security框架/版本/A/Security 2012-08-08 06:46:31.575 serviceTest[408:10703] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错： dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions /A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation 在/System /Library/Frameworks/Security.framework/Versions/A/Securitykext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号： ___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0。 /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundationkext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号： ___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0。 /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0。 /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation___CFObjCIsCollectable 引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security 预期在：/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0。 /System/Library/Frameworks/Security.framework/Versions/A/Security 中的 sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:37:26.850

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:02:11.250

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"caf"];
self.audioPlayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:path] error:nil];
[self.audioPlayer setDelegate:self];
[self.audioPlayer prepareToPlay];
[self.audioPlayer play]; 
```

caf is the audio file format.

Also, Add AVFoundation.framework into your project.

Add, into '.h' file.

# android - 在android中每1/4秒获取一个音频文件的频率

> ID：11844914
> 
> 赞同：6
> 
> 时间：2012-08-07T11:24:58.143
> 
> 标签：android, audio, fft, frequency

我有一个声音文件（.3gp），大约 1 分钟。我想每 1/4 秒得到这个声音文件的频率。我的想法是每 1/4 秒从音频文件中接收样本，并使用 FFT 我可能会得到频率值。有没有办法做到这一点？

实际上，我会将声音文件分成 1/4 秒的样本声音文件（总是覆盖以前的文件），然后使用 FFT 算法并检测幅度最大的频率。但是可能有更简单的解决方案，但是我也不知道如何做到这一点。

***更新 2 - 新代码

到目前为止，我使用此代码：

```
public class RecordAudio extends AsyncTask<Void, double[], Void> {

    @Override
    protected Void doInBackground(Void... arg0) {

        try {
             int bufferSize = AudioRecord.getMinBufferSize(frequency,
             AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);

            //int bufferSize = AudioRecord.getMinBufferSize(frequency, 
                  //  channelConfiguration, audioEncoding); 

            AudioRecord audioRecord = new AudioRecord( 
                    MediaRecorder.AudioSource.MIC, frequency, 
                    channelConfiguration, audioEncoding, bufferSize); 

            short[] buffer = new short[blockSize];
            //double[] toTransform = new double[blockSize];

            audioRecord.startRecording();

            // started = true; hopes this should true before calling
            // following while loop

            while (started) {
               sampling++;

               double[] re = new double[blockSize];
               double[] im = new double[blockSize];

               double[] newArray = new double[blockSize*2];
               double[] magns = new double[blockSize];

               double MaxMagn=0;
               double pitch = 0;

               int bufferReadResult = audioRecord.read(buffer, 0,
                        blockSize);

               for (int i = 0; i < blockSize && i < bufferReadResult; i++) {
                   re[i] = (double) buffer[i] / 32768.0; // signed   16bit
                   im[i] = 0;
               }    

               newArray = FFTbase.fft(re, im,true);

               for (int i = 0; i < newArray.length; i+=2) {

                   re[i/2]=newArray[i];
                   im[i/2]=newArray[i+1];
                   magns[i/2] = Math.sqrt(re[i/2]*re[i/2]+im[i/2]*im[i/2]);
               }

              // I only need the first half      

              for (int i = 0; i < (magns.length)/2; i++) {
                   if (magns[i]>MaxMagn)
                   {
                       MaxMagn = magns[i];
                       pitch=i;
                   }
               }                                           
                 if (sampling > 50) {
                   Log.i("pitch and magnitude", "" + MaxMagn + "   " + pitch*15.625f);
                   sampling=0;
                   MaxMagn=0;pitch=0;
                   }                   

            }

            audioRecord.stop();

        } catch (Throwable t) {
            t.printStackTrace();
            Log.e("AudioRecord", "Recording Failed");
        }
        return null;
    } 
```

我用这个： http: [//www.wikijava.org/wiki/The_Fast_Fourier_Transform_in_Java_%28part_1%29](http://www.wikijava.org/wiki/The_Fast_Fourier_Transform_in_Java_%28part_1%29)

吉他弦似乎是正确的，但我自己的声音并不好，因此：

![在此处输入图像描述](../Images/2f303d748671f9adaf45c616b9235244.png)

两个峰值的幅度大部分时间都在变化，我总是找到最大的来获得基频。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T22:46:59.190

在 Stack Overflow 上经常询问使用 FFT 进行音高跟踪，我写了[一篇带有示例代码的博客条目](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)。代码在 C 中，但通过解释和链接，您应该能够做您想做的事。

至于将其划分为 1/4 秒增量，您可以按照您的建议简单地采用 1/4 秒段的 FFT，而不是默认值（我认为大约是 1 秒）。如果这不能为您提供所需的频率分辨率，您可能必须使用不同的音高识别方法。您可以做的另一件事是使用超过 1/4 秒的重叠段，但以相隔 1/4 秒的间隔开始。此方法在博客条目中有所提及，但可能不符合您的设计规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:50:00.760

尝试***AsyncTask***：

```
class GetFrequency extends AsyncTask<String, Void, Void> {
   public Void doInBackground(String... params) {
          while (true) {

             // Apply Logic Here

           try {
                Thread.sleep(250);
               } catch (Exception ie) {
                  // TODO Auto-generated catch block
                e.printStackTrace();
               }
       }
   }  
} 
```

在你的 MainActivity 中调用它，

```
frequencyButtonListener.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        new GetFrequency.execute(params);

        }
    }); 
```

# android - onServiceConnected 没有被调用，得到一个空指针异常

> ID：11844920
> 
> 赞同：1
> 
> 时间：2012-08-07T11:25:18.060
> 
> 标签：android, android-service

我已经开发了一个绑定服务作为一个单独的项目，我正在尝试从客户端访问该服务，但不知何故我得到了

```
AndroidRuntime: FATAL EXCEPTION: main
08-08 12:00:40.898  3206  3206 E AndroidRuntime: java.lang.NullPointerException
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at    com.test.binder.BinderServiceActivity.onClick(BinderServiceActivity.java:61)
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at android.view.View.performClick(View.java:3526)
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at android.view.View$PerformClick.run(View.java:14139)
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:605)
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:92)
08-08 12:00:40.898  3206  3206 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:137) 
```

08-08 12:00:40.898 3206 3206 E AndroidRuntime: 在 android.app.ActivityThread.main(ActivityThread.java:4725) 08-08 12:00:40.898 3206 3206 E AndroidRuntime: 在 java.lang.reflect.Method。调用原生（原生方法）

我怀疑 onServiceConnected 没有被调用。有人可以帮我解决这个问题。

提前致谢，

请在下面找到客户端代码：

```
public class BinderServiceActivity extends Activity implements OnClickListener {
private static final String TAG = "LogActivity";
ILogService logService;
LogConnection conn;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// Request bind to the service
conn = new LogConnection(); // 
Intent intent = new Intent("com.test.binder.ILogService"); // 
intent.putExtra("version", "1.0"); // 
bindService(intent, conn, Context.BIND_AUTO_CREATE); // 

// Attach listener to button
((Button) findViewById(R.id.button1)).setOnClickListener(this);
}

class LogConnection implements ServiceConnection { // 

public void onServiceConnected(ComponentName name, IBinder service) { // 
  logService = ILogService.Stub.asInterface(service); // 
  Log.i(TAG, "connected");
}

public void onServiceDisconnected(ComponentName name) { // 
  logService = null;
  Log.i(TAG, "disconnected");
}

}

public void onClick(View button) {
try {

  logService.log_d("LogClient", "Hello from onClick()"); // 
  Message msg = new Message(Parcel.obtain()); // 
  msg.setTag("LogClient");
  msg.setText("Hello from inClick() version 1.1");
  logService.log(msg); // 
} catch (RemoteException e) { // 
  Log.e(TAG, "onClick failed", e);
}

}

@Override
protected void onDestroy() {
super.onDestroy();
Log.d(TAG, "onDestroyed");

unbindService(conn); // 

logService = null;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:11:28.443

由于您尚未发布包括服务在内的完整源代码，因此很难解决您的问题。您可以[`Demo Source`](https://github.com/lalit3686/ServiceLifeCycle)通过示例下载每种类型的服务绑定并快速了解。该演示包含使用三种类型的服务绑定

> 1.) 使用 IBinder 绑定
> 
> 2.) 使用 Messenger 绑定
> 
> 3.) 使用 AIDL 绑定

# java - Java透明窗口

> ID：11844927
> 
> 赞同：9
> 
> 时间：2012-08-07T11:25:37.757
> 
> 标签：java, linux, swing, window, transparent

我正在尝试创建一个跟随鼠标并将点击传递给底层窗口的圆形窗口。

我用 Python 和 Qt 做这个（见[Python 覆盖窗口](https://stackoverflow.com/questions/11836912/python-overlay-window)），但后来我切换到 Java 和 Swing。但是我无法使窗口透明。我尝试[了这种方法](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)，但它不起作用，但是我认为我的系统支持透明度，因为如果我启动[Screencast-O-Matic](http://screencast-o-matic.com/screen_recorder)（在 Java 中），矩形实际上是透明的。

我怎样才能实现这样的目标？（我在 Linux KDE4 上）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T12:01:46.953

Why did the Java tutorial [How to Create Translucent and Shaped Windows](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html) fail to work? Are you using the latest version of Java 6 or Java 7? In the [May/June issue of Java Magazine](http://www.oraclejavamagazine-digital.com/javamagazine/20120506#pg36), there was a tutorial on shaped and transparent windows requiring java 7\. You will probably need to sign up for Java magazine in order to read it. See if you can get this to run on your system:

```
import java.awt.*; //Graphics2D, LinearGradientPaint, Point, Window, Window.Type;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

/**
 * From JavaMagazine May/June 2012
 * @author josh
 */
public class ShapedAboutWindowDemo {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        //switch to the right thread
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("About box");
                //turn of window decorations
                frame.setUndecorated(true);
                //turn off the background
                frame.setBackground(new Color(0,0,0,0));
                frame.setContentPane(new AboutComponent());
                frame.pack();
                //size the window
                frame.setSize(500, 200);
                frame.setVisible(true);
                //center on screen
                frame.setLocationRelativeTo(null);
            }
        }
        );
    }

    private static class AboutComponent extends JComponent {
        public void paintComponent(Graphics graphics) {
            Graphics2D g = (Graphics2D) graphics;

            //create a translucent gradient
            Color[] colors = new Color[]{
                           new Color(0,0,0,0)
                            ,new Color(0.3f,0.3f,0.3f,1f)
                            ,new Color(0.3f,0.3f,0.3f,1f)
                            ,new Color(0,0,0,0)};
            float[] stops = new float[]{0,0.2f,0.8f,1f};
            LinearGradientPaint paint = new LinearGradientPaint(
                                        new Point(0,0), new Point(500,0),
                                        stops,colors);
            //fill a rect then paint with text
            g.setPaint(paint);
            g.fillRect(0, 0, 500, 200);
            g.setPaint(Color.WHITE);
            g.drawString("My Killer App", 200, 100);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T20:32:41.797

如果您使用的是 Java 6，则需要使用私有 API AWTUtilities。查看[Java SE 6 Update 10 API](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html#6u10)了解更多详情

**例子**

这是一个快速的技巧，但它让想法得到了理解

```
public class TransparentWindow {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                MyFrame frame = new MyFrame();
                frame.setUndecorated(true);

                String version = System.getProperty("java.version");
                if (version.startsWith("1.7")) {

                    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
                    GraphicsDevice graphicsDevice = ge.getDefaultScreenDevice();

                    System.out.println("Transparent from under Java 7");
                    /* This won't run under Java 6, uncomment if you are using Java 7
                    System.out.println("isPerPixelAlphaTranslucent = " + graphicsDevice.isWindowTranslucencySupported(GraphicsDevice.WindowTranslucency.PERPIXEL_TRANSLUCENT));
                    System.out.println("isPerPixelAlphaTransparent = " + graphicsDevice.isWindowTranslucencySupported(GraphicsDevice.WindowTranslucency.PERPIXEL_TRANSPARENT));
                    System.out.println("isPerPixelAlphaTranslucent = " + graphicsDevice.isWindowTranslucencySupported(GraphicsDevice.WindowTranslucency.TRANSLUCENT));
                    */
                    frame.setBackground(new Color(0, 0, 0, 0));

                } else if (version.startsWith("1.6")) {

                    System.out.println("Transparent from under Java 6");
                    System.out.println("isPerPixelAlphaSupported = " + supportsPerAlphaPixel());
                    setOpaque(frame, false);

                }

                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    public static class MyFrame extends JFrame {

        public MyFrame() throws HeadlessException {

            setContentPane(new MyContentPane());
            setDefaultCloseOperation(EXIT_ON_CLOSE);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {

                    if (e.getClickCount() == 2) {

                        dispose();

                    }

                }
            });

        }
    }

    public static class MyContentPane extends JPanel {

        public MyContentPane() {

            setLayout(new GridBagLayout());
            add(new JLabel("Hello, I'm a transparent frame under Java " + System.getProperty("java.version")));

            setOpaque(false);

        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(Color.BLUE);

            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
            g2d.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 20, 20);

        }
    }

    public static boolean supportsPerAlphaPixel() {

        boolean support = false;

        try {

            Class<?> awtUtilsClass = Class.forName("com.sun.awt.AWTUtilities");
            support = true;

        } catch (Exception exp) {
        }

        return support;

    }

    public static void setOpaque(Window window, boolean opaque) {

        try {

            Class<?> awtUtilsClass = Class.forName("com.sun.awt.AWTUtilities");
            if (awtUtilsClass != null) {

                Method method = awtUtilsClass.getMethod("setWindowOpaque", Window.class, boolean.class);
                method.invoke(null, window, opaque);
//                com.sun.awt.AWTUtilities.setWindowOpaque(this, opaque);
//                ((JComponent) window.getContentPane()).setOpaque(opaque);

            }

        } catch (Exception exp) {
        }

    }

    public static void setOpacity(Window window, float opacity) {

        try {

            Class<?> awtUtilsClass = Class.forName("com.sun.awt.AWTUtilities");
            if (awtUtilsClass != null) {

                Method method = awtUtilsClass.getMethod("setWindowOpacity", Window.class, float.class);
                method.invoke(null, window, opacity);

            }

        } catch (Exception exp) {

            exp.printStackTrace();

        }

    }

    public static float getOpacity(Window window) {

        float opacity = 1f;
        try {

            Class<?> awtUtilsClass = Class.forName("com.sun.awt.AWTUtilities");
            if (awtUtilsClass != null) {

                Method method = awtUtilsClass.getMethod("getWindowOpacity", Window.class);
                Object value = method.invoke(null, window);
                if (value != null && value instanceof Float) {

                    opacity = ((Float) value).floatValue();

                }

            }

        } catch (Exception exp) {

            exp.printStackTrace();

        }

        return opacity;

    }
} 
```

在 Windows 7 上它产生

在 Java 6 下 ![Java6](../Images/181e663a46ca64af5624be2047ea2057.png)

在 Java 7 下 ![Java7](../Images/9517e3508f5e058f39a2c1c9f6ddb65c.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-09T02:47:46.453

我想这会起作用，我已经尝试过了..要使 JFrame 或窗口透明，您需要先取消装饰`Undecorated(true)`框架。这是示例代码：

```
import javax.swing.*;
import com.sun.awt.AWTUtilities;
import java.awt.Color;   

    class transFrame {
      private JFrame f=new JFrame();
      private JLabel msg=new JLabel("Hello I'm a Transparent Window");

     transFrame() {
       f.setBounds(400,150,500,500);
       f.setLayout(null);
       f.setUndecorated(true);     // Undecorates the Window
       f.setBackground(new Color(0,0,0,25));  // fourth index decides the opacity
       f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       msg.setBounds(150,250,300,25);
       f.add(msg);
       f.setVisible(true);
      }

      public static void main(String[] args) {
      new transFrame();
      }

     } 
```

唯一的问题是您需要添加自己的代码以使用按钮关闭和最小化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T11:39:44.230

如果你想自己做，不使用外部库，你可以启动一个线程来执行：

*   设置透明窗口不可见
*   制作桌面截图
*   将此屏幕截图作为窗口的背景图像

或者你可以使用[JavaFX](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-03T22:54:34.033

我也面临同样的问题。经过几个小时的搜索，我终于找到了问题！如果你想制作一个透明的 JFrame，这些是你必须写的：

```
public void enableTransparentWindow(float opacity) {
        GraphicsEnvironment ge =
                GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        f.setLocationRelativeTo(null);
        f.setBackground(new Color(0, 0, 0));
        //If translucent windows aren't supported, exit.
        f.setUndecorated(true);

        if (!gd.isWindowTranslucencySupported(TRANSLUCENT)) {
            System.err.println(
                    "Translucency is not supported");
            System.exit(0);
        }
        f.setOpacity(opacity);
    } 
```

不要忘记在这段代码之后调用 setVisible() 方法。
快乐编码！

# java - ScrollView 内容更新

> ID：11844935
> 
> 赞同：10
> 
> 时间：2012-08-07T11:26:14.387
> 
> 标签：java, android, textview, scrollview, handler

我有一个以编程方式生成`ScrollView`的`TextView`内部。我希望`TextView`不时更新文本，有些人已经实现了一个处理函数来更新`TextView`GUI 元素。这似乎可以正常调用/工作。

但是，目前我发现*实际*显示附加信息的唯一方法`TextView`是调用：

```
consoleText.append("New text to add to TextView");
// then:
myScrollView.removeView(myTextView);
myScrollView.addView(myTextView); 
```

这不是最佳的特殊性，我想知道我还能如何刷新内容`ScrollView`以显示我新添加的信息......

还：

```
invalidate();
postvalidate(); 
```

似乎什么也没做 -`TextView`对象中有新文本（在调试中查看）它只是没有将它绘制到屏幕上，除非我调用添加/删除函数。

感谢您提供的任何信息/帮助

FR

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T12:23:16.920

您应该调用TextView`invalidate()`和`requestLayout()`ScrollView。

# emacs - Emacs Auctex 自定义语法高亮

> ID：11844936
> 
> 赞同：6
> 
> 时间：2012-08-07T11:26:15.237
> 
> 标签：emacs, syntax-highlighting, auctex

我想强调一下我在 LaTeX 中创建的一个新命令：

```
\newcommand{\conceito}[3]{
  \subsection{#1} (Original: \textit{#2} #3).
} 
```

我以这种方式使用此代码：

```
\conceito{Foo}{Bar}{Bla} 
```

我按照[手册](http://emacswiki.org/emacs/AddKeywords)并将此代码放入我的 中`~/.emacs`，但它不起作用：

```
(add-hook 'LaTeX-mode-hook
    (lambda ()
        (font-lock-add-keywords nil
          '((""\\<\\(\\conceito)\\>"" 1 font-lock-warning-face t))))) 
```

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T14:40:54.223

编辑： Deokhwan Kim 最初指出您的正则表达式包含两个连续的双引号，并且右括号`)`也需要用双引号进行转义：

```
(add-hook 'LaTeX-mode-hook
    (lambda ()
        (font-lock-add-keywords nil
          '(("\\<\\(\\conceito\\)\\>" 1 font-lock-warning-face t))))) 
```

除了Deokhwan Kim指出的几点，还有以下两个问题：

*   你需要四个反斜杠，而不是 'conceito' 前面的两个：`\\\\conceito`

*   反斜杠序列`\\<`仅匹配单词开头的空字符串，但是，新 LaTeX 命令开头的反斜杠不被视为单词的一部分，因此`\\<`不会匹配。

试试这个：

```
(add-hook 'LaTeX-mode-hook
    (lambda ()
        (font-lock-add-keywords nil
            '(("\\(\\\\conceito\\)\\>" 1 font-lock-warning-face t))) 
```

编辑： Deokhwan Kim 所做的另一个很好的观察是，在这种特殊情况下，您根本不需要括号，因为无论如何您都在尝试匹配整个表达式。所以最后一行的替代方案可能是：

```
'(("\\\\conceito\\>" 0 font-lock-warning-face t))))) 
```

关于括号的观点是正确的，但是您实际上可以扩展您的正则表达式以仅在左大括号`{`跟随单词“conceito”时匹配。但是由于您真的不想突出显示该括号，因此使用括号定义的子组是要走的路：

```
(add-hook 'LaTeX-mode-hook
    (lambda ()
        (font-lock-add-keywords nil
            '(("\\(\\\\conceito\\)\\s-*{" 1 font-lock-warning-face t))) 
```

请注意，由于我们正在测试`{`紧跟在“conceito”之后的 a（除非中间有空格），因此我们根本不需要测试`\\>`。

通常，尝试`M-x re-builder`以交互方式制作正则表达式：您可以在一个小缓冲区中编辑一个新的正则表达式，并立即查看您调用重新构建器的缓冲区中突出显示的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-28T10:18:43.283

GNU AUCTeX 有一种为用户定义的宏定义自定义突出显示的内置方式。查看变量`font-latex-user-keyword-classes`和[AUCTeX 文档](https://www.gnu.org/software/auctex/manual/auctex/Fontification-of-macros.html#Fontification-of-macros)。

这是一个简单的例子（我的配置）：

```
(setq font-latex-user-keyword-classes
      '(("shadow-hidden"    (("hide" "{"))      shadow command)
        ("shadow-mycomment" (("mycomment" "{")) shadow command)
        ("shadow-comment"   (("comment" "{"))   shadow command))) 
```

这将在暗淡的阴影面上显示 \hide{}、\mycomment{} 和 \comment{} 宏的内容。

# visual-studio-2010 - 对解决方案文件调用 TransformWebConfig

> ID：11844938
> 
> 赞同：3
> 
> 时间：2012-08-07T11:26:19.267
> 
> 标签：visual-studio-2010, msbuild

我有一个包含多个项目的解决方案，其中一个项目是 Web 应用程序，我希望能够在使用 MSBuild 构建解决方案时使用 web.release.config 转换 web.config。当我打电话

> MSBuild "WebProject.csproj" /t:TransformWebConfig /p:Configuration=Release

在 Web 项目中，我将转换后的 web.config 输出到 ...\obj\Release\TransformWebConfig\transformed\Web.config

但是当我尝试打电话时

> MSBuild "Solution.sln" /t:TransformWebConfig /p:Configuration=Release

我收到“项目中不存在TransformWebConfig”的错误。有没有你让这个工作，所以如果可能的话它会输出一个转换的 web.config，否则忽略命令的 TransformWebConfig 部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:08:41.383

最简单的方法似乎是将 web 项目 .csproj 文件更改为

```
<Project ToolsVersion="4.0" DefaultTargets="BuildWithConfig" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"> 
```

然后添加一个新目标

```
<Target Name="BuildWithConfig">
    <CallTarget Targets="Build"/>
    <CallTarget Targets="TransformWebConfig"/>
</Target> 
```

然后运行

> MSBuild "Solution.sln" /p:Configuration=Release

该文件将输出到 ...\WebProject\obj\Release\TransformWebConfig\transformed

# javascript - 选择第一个下拉菜单与另一个下拉菜单的值相同

> ID：11844943
> 
> 赞同：0
> 
> 时间：2012-08-07T11:26:32.350
> 
> 标签：javascript

我想选择所有下拉列表与从主下拉列表中选择的值相同。如果从主要下拉列表中选择了一个选项，我可以使用它，但如果有两个选项，我将无法使用它，我在下面添加了一些代码供您参考。

HTML：

```
<select name="ForceSelection" id="ForceSelection" onChange="javascript:return setDropDown();">
<option value="" selected>Select Name</option>
<option value="Pass">Pass</option>
<option value="Fail">Fail</option>
</select>

<select id="Qualifications" name="Qualifications">
    <option value="select">select</option>
    <option value="Pass">Pass</option>
    <option value="Fail">Fail</option>
</select>

<select  id="Qualifications" name="Qualifications">
    <option value="select">select</option>
    <option value="Pass">Pass</option>
    <option value="Fail">Fail</option>
</select> 
```

JavaScript：

```
function setDropDown() {
    var index_name=document.QualificationForm.ForceSelection.selectedIndex;  

    document.QualificationForm.Qualifications.selectedIndex=index_name;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:32:11.823

试试这个

```
function setDropDown() {
   var index_name = 
        document.getElementsByName('ForceSelection')[0].selectedIndex;
   var others = document.getElementsByName('Qualifications');
   for (i = 0; i < others.length; i++)
       others[i].selectedIndex = index_name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:32:43.277

您可能会使用以下内容，但目前未经测试：

```
function setDropDown(el){
    if (!el) {
        return false;
    }
    else {
        var index = el.selectedIndex,
            selects = document.getElementsByName('qualifications');
            for (var i=0, len=selects.length; i<len; i++){
                selects[i].selectedIndex = index;
            }
    }
} 
```

这要求您将`#ForceSelection` `select`元素传递给函数，因此称为：

```
<select name="ForceSelection" id="ForceSelection" onChange="javascript:return setDropDown(this);">
<!-- other stuff -->
</select> 
```

此`selectedIndex`传入元素的 将应用于`select`名称为 的其他元素`qualifications`。

另外，请允许我重申：an在文档中`id` ***必须***是唯一的，才能成为有效的 HTML。

# java - httpd error_log 记录在 https 上运行 Web 应用程序的错误

> ID：11844944
> 
> 赞同：0
> 
> 时间：2012-08-07T11:26:33.343
> 
> 标签：java, tomcat, web-applications, apache

当应用程序通过 https 而不是 http 运行时，Apache Tomcat 5.5 上运行了一个 Web 应用程序（以下是 url）

```
https://170.21.101.23:2001/appl/ 
```

然后在 IE8 上的 httpd error_log 中，出现以下错误（其他文件也有同样的错误）：

```
[Tue Aug 07 16:17:46 2012] [error] [client 10.203.128.142] File does not exist: 
/base/pro/ApacheTomcat/instances/Tomcat/webapps/appl/js/test.js 
referer: https://170.21.101.23:2001/appl/sk/Display.html 
```

如果我们检查报告的文件是否存在？那么是的，它们存在。应用程序工作得很好。但是 httpd 的 error_log 正在报告这些错误。这些错误是如何被记录在 error_log 中的。

以下是 mod_jk 日志：

```
JkLogFile /var/log/httpd/mod_jk.log

JkMount /appl default
JkMount /appl/* default
JkUnMount /appl/*/*.css default
JkUnMount /appl/*/*.html default
JkUnMount /appl/*/*.gif default
JkUnMount /appl/*/*.ico default
JkUnMount /appl/*/*.jpg default
JkUnMount /appl/*/*.png default
JkUnMount /appl/js/* default 
```

请提出您宝贵的建议。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:54:50.117

`mod_jk`为每个 VirtualHost使用一组单独的指令：如果您为非 HTTPS（例如端口 80）VirtualHost 设置`JkMount`了上述指令，那么您必须在启用 SSL 的 VirtualHost 中配置相同的指令集。您还可以在顶层设置指令，然后使用将它们复制到您的 VirtualHost（默认情况下不会发生）。`JkMount``JkMount``JkMount``httpd.conf``JkMountCopy`

有关配置的更多信息，请参阅[Tomcat 连接器文档](http://tomcat.apache.org/connectors-doc/reference/apache.html)`mod_jk`。

# java - java反射：getMethods函数不显示方法

> ID：11844954
> 
> 赞同：4
> 
> 时间：2012-08-07T11:27:01.467
> 
> 标签：java, reflection

```
import java.lang.reflect.Method;
import java.util.Arrays;

public class Test
{
     public static void main(String s[]) throws ClassNotFoundException
     {
        Class cls = Class.forName("Test");
        System.out.println("Class is "+cls);
        Method[] mtds = cls.getMethods();
        System.out.println("Methods are "+Arrays.deepToString(mtds));  // not having all methods
    }

    void reflectionTestMethod()
    {
        System.out.println("test");
    }
} 
```

输出是

> 类是类测试
> 
> 方法是 [public static void Test.main(java.lang.String[]) throws java.lang.ClassNotFoundException, public final void java.lang.Object.wait() throws java.lang.InterruptedException, public final native void java。 lang.Object.wait(long) throws java.lang.InterruptedException, public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException, public boolean java.lang.Object.equals(java.lang .Object), public java.lang.String java.lang.Object.toString(), public native int java.lang.Object.hashCode(), public final native java.lang.Class java.lang.Object.getClass() , public final native void java.lang.Object.notify(), public final native void java.lang.Object.notifyAll()]

为什么**反射测试方法（）**在输出中不可用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-07T11:29:19.903

`getMethods()`返回公共方法（如其 Javadoc 中所述）

尝试`getDeclaredMethods()`改为公开该方法。

顺便说一句，你可以这样做：

```
Class cls = Test.class;
System.out.println("Class is " + cls);
for(Method method : cls.getDeclaredMethods())
    System.out.println(method); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:28:23.977

因为那个方法不是公开的。[javadoc 状态](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethods%28%29)（强调我的）：

> 返回包含 Method 对象的数组，反映此 Class 对象表示的类或接口的所有**公共成员方法**

# c# - 传递参数来控制

> ID：11844955
> 
> 赞同：1
> 
> 时间：2012-08-07T11:27:03.300
> 
> 标签：c#, asp.net

我正在开发一个 ASP .net 项目。我正在尝试使用以下代码在 Control 对象中加载用户控件，并尝试将参数传递给该控件。在调试模式下，我在该行收到一条错误消息`The file '/mainScreen.ascx?matchID=2' does not exist.`。如果我删除参数，那么它可以正常工作。谁能帮我传递这些参数？有什么建议么？

```
 Control CurrentControl = Page.LoadControl("mainScreen.ascx?matchID=2"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T11:38:53.960

您不能通过查询字符串表示法传递参数，因为用户控件只是虚拟路径引用的“构建块”。

您可以做的是创建一个公共属性并在加载控件后为其分配值：

```
public class mainScreen: UserControl
{
    public int matchID { get; set; }
}

// ...

mainScreen CurrentControl = (mainScreen)Page.LoadControl("mainScreen.ascx");
CurrentControl.matchID = 2; 
```

您现在可以使用`matchID`内部用户控件，如下所示：

```
private void Page_Load(object sender, EventArgs e)
{
    int id = this.matchID;

    // Load control data
} 
```

请注意，只有将控件添加到页面树中时，该控件才会参与页面生命周期：

```
Page.Controls.Add(CurrentControl); // Now the "Page_Load" method will be called 
```

希望这可以帮助。

# android - Android 处理很多意图

> ID：11844965
> 
> 赞同：7
> 
> 时间：2012-08-07T11:27:29.420
> 
> 标签：android, android-intent

我的应用程序旨在从嵌入式蓝牙设备获取消息。当我使用每秒或更多发送数据的传感器时，将意图广播到活动并不是什么大问题。唯一可见的减速是蓝牙设备刷新其缓冲区时。现在我需要处理高刷新率传感器（例如心电图，每 2 毫秒），所以我必须更清楚一点，因为意图的数量使得可视化不是实时的（输入的测量比显示的多）。

我尝试`putIntegerArrayListExtra()`每 2 秒发送一次数据，但现在我得到了**ANR**。

有人可以建议我处理很多意图吗？（看来我的服务记忆也长大了很多）。

要绕过意图，我必须将对象从服务发送到活动。就我现在而言，这是不可能的，也是原因`Intent`。

编辑：

我低估了约束力。事实上，它使活动能够从服务中获取一个“ `DeviceDriver`”实例，该实例注册侦听器以执行回调。因为我可以在活动中检索驱动程序的实例，所以我可以将其注册为侦听器并减少服务和活动之间的所有意图（至少对于数据交换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:32:13.540

在您的情况下，我建议您不要使用意图。尝试在活动或共享内存和同步中使用线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:32:38.703

您还可以使用绑定将数据从服务传递到意图：http: [//developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

# asp.net-mvc - 我们可以在 asp.net mvc 3 中一次调用两个 actionresult/controller 吗？

> ID：11844973
> 
> 赞同：0
> 
> 时间：2012-08-07T11:28:08.610
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我们可以同时调用两个都返回部分视图的 ActionResult /Controller 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:39:27.207

不，您不能使用一个 URI 同时调用两个操作。这是因为路由表只会匹配一个路由，然后将执行传递给该控制器和操作。您可以从该操作中调用另一个操作，但我不建议这样做，只是让您的客户端向服务器发送另一个请求以执行您要运行的其他操作。

# javascript - 使用backbone.js从带有'd'的ASMX获取数据

> ID：11844977
> 
> 赞同：2
> 
> 时间：2012-08-07T11:28:34.040
> 
> 标签：javascript, jquery, web-services, backbone.js, asmx

我对 Backbone 很陌生，我一直在尝试用它创建自动完成功能，由 ASMX 网络服务提供。我似乎遇到的问题是，当我的 web 服务以 JSON 格式返回时（在与它进行了一场痛苦的战斗之后），它将响应包装在一个“d”（数据集）中。如何让视图理解这一点并获取正确的数据？

这是我的代码：-

```
var Airline = Backbone.Model.extend({
                initialize: function () {},
                defaults: {
                    name: 'Airline Name',
                    rating: 50,
                    icon: '/blank.png'
                }
            });

            var AirlineCollection = Backbone.Collection.extend({
                model: Airline,
                contentType: "application/json",
                url: '/ControlTower/public/runway.asmx/all-airlines',
                parse: function (response) {
                    return response;
                }
            });

            var SelectionView = Backbone.View.extend({
              el : $('#airline'),
              render: function() {
                $(this.el).html("You Selected : " + this.model.get('AirlineName'));
                return this;
              },
            });

var airlines = new AirlineCollection();
            airlines.fetch({async: false, contentType: "application/json" });
            var airlineNames = airlines.pluck("AirlineName");

$("#airline").autocomplete({
              source : airlineNames,
              minLength : 1,
              select: function(event, ui){
                var selectedModel = airlines.where({name: ui.item.value})[0];
                var view = new SelectionView({model: selectedModel});
                view.render();
              }
            }); 
```

谁能看到我做错了什么？我已经坐在这里太久了！

帮助表示赞赏;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:13:41.033

你的呢`AirlineCollection`：

```
parse: function (response) {
  return response.d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T06:49:19.643

这对我有用

在**AirlineCollection 中**

```
parse: function (response) {
    var data = (typeof response.d) == 'string' ? eval('(' + response.d + ')') :    response.d;
    return data;        
} 
```

# php - PHP强制下载不起作用

> ID：11844979
> 
> 赞同：0
> 
> 时间：2012-08-07T11:28:40.747
> 
> 标签：php, header, download, content-type, content-disposition

这是我的问题。我正在尝试使用标题下载文件。这是我的代码：

```
$content_type = mime_content_type('uploads/MyBBIntegrator_v1.3.1.zip');
$file = 'uploads/MyBBIntegrator_v1.3.1.zip';
header("Cache-Control: public");
header('Content-type: application/octet-stream');
header("Content-Description: File Transfer");
header('Content-Disposition: attachment; filename="MyBBIntegrator_v1.3.1.zip');
header("Content-Transfer-Encoding: binary");
header('Expires: 0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
readfile('uploads/MyBBIntegrator_v1.3.1.zip'); 
```

但是，这样做的唯一结果是页面显示文件的内容（它是文本文件）或如果文件是 image/zip/exe 等，则显示一串奇怪的符号

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:39:40.210

首先，`mime_content_type()`不推荐使用，您应该尝试另一种方法来获取 MIME 值。

我检查了您的代码，它在我的服务器上运行良好，对我来说也运行良好。您应该检查可能会阻止下载的 INI 指令。尝试全新安装服务器。

此外，在您放入问题的代码段之前，脚本不应生成任何输出。

# wix - 如何授予现有用户“作为服务登录”权限？

> ID：11844985
> 
> 赞同：2
> 
> 时间：2012-08-07T11:29:11.607
> 
> 标签：wix, wix3.5

如何设置用户被授予“作为服务登录”权限？

是否有这样做的本机方式或自定义操作？

# python - 在 Python 中将字符串转换或取消格式化为变量（如 format()，但相反）

> ID：11844986
> 
> 赞同：35
> 
> 时间：2012-08-07T11:29:11.257
> 
> 标签：python, string-formatting

`Version 1.4.0\n`我有形如and的字符串`Version 1.15.6\n`，我想要一种从它们中提取三个数字的简单方法。我知道我可以使用 format 方法将变量放入字符串中；我基本上想倒着做，像这样：

```
# So I know I can do this:
x, y, z = 1, 4, 0
print 'Version {0}.{1}.{2}\n'.format(x,y,z)
# Output is 'Version 1.4.0\n'

# But I'd like to be able to reverse it:

mystr='Version 1.15.6\n'
a, b, c = mystr.unformat('Version {0}.{1}.{2}\n')

# And have the result that a, b, c = 1, 15, 6 
```

我发现其他人也问过同样的问题，但回复是针对他们的特定情况的： [使用 Python 格式字符串反向解析](https://stackoverflow.com/questions/10663093/use-python-format-string-in-reverse-for-parsing)

一个一般的答案（如何`format()`反过来做）会很棒！不过，我的具体案例的答案也会非常有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-25T10:46:38.380

只是为了建立[Uche 的答案](https://stackoverflow.com/a/11849360/698289)，我一直在寻找一种通过带有 kwargs 的模式来反转字符串的方法。所以我把以下功能放在一起：

```
def string_to_dict(string, pattern):
    regex = re.sub(r'{(.+?)}', r'(?P<_\1>.+)', pattern)
    values = list(re.search(regex, string).groups())
    keys = re.findall(r'{(.+?)}', pattern)
    _dict = dict(zip(keys, values))
    return _dict 
```

哪个按以下方式工作：

```
>>> p = 'hello, my name is {name} and I am a {age} year old {what}'

>>> s = p.format(name='dan', age=33, what='developer')
>>> s
'hello, my name is dan and I am a 33 year old developer'
>>> string_to_dict(s, p)
{'age': '33', 'name': 'dan', 'what': 'developer'}

>>> s = p.format(name='cody', age=18, what='quarterback')
>>> s
'hello, my name is cody and I am a 18 year old quarterback'
>>> string_to_dict(s, p)
{'age': '18', 'name': 'cody', 'what': 'quarterback'} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T11:35:22.430

```
>>> import re
>>> re.findall('(\d+)\.(\d+)\.(\d+)', 'Version 1.15.6\n')
[('1', '15', '6')] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-30T15:47:14.503

编辑：另请参阅[此答案](https://stackoverflow.com/a/45293384/2437514)`parse`以获取有关and的更多信息`parmatter`。

pypi 包`parse`很好地满足了这个目的：

```
pip install parse 
```

可以这样使用：

```
>>> import parse
>>> result=parse.parse('Version {0}.{1}.{2}\n', 'Version 1.15.6\n')
<Result ('1', '15', '6') {}>
>>> values=list(result)
>>> print(values)
['1', '15', '6'] 
```

请注意，[文档说](https://pypi.python.org/pypi/parse)该`parse`包默认情况下不完全模拟[格式规范迷你语言](https://docs.python.org/3.4/library/string.html#format-specification-mini-language)；它还使用 . 指定的一些类型指示符`re`。特别要注意的是，`s`默认情况下这意味着“空白”，而不是`str`. `s`通过将默认类型更改为`str`（使用） ，可以轻松地将其修改为与格式规范一致`extra_types`：

```
result = parse.parse(format_str, string, extra_types=dict(s=str)) 
```

`string.Formatter`这是使用包修改内置类`parse`以添加`unformat`我自己使用的功能的概念性想法：

```
import parse
from string import Formatter
class Unformatter(Formatter):
    '''A parsable formatter.'''
    def unformat(self, format, string, extra_types=dict(s=str), evaluate_result=True):
        return parse.parse(format, string, extra_types, evaluate_result)
    unformat.__doc__ = parse.Parser.parse.__doc__ 
```

重要提示：方法名称`parse`已被`Formatter`该类使用，因此我选择`unformat`了避免冲突。

更新：您可能会像这样使用它 - 与类非常相似[`string.Formatter`](https://docs.python.org/3.4/library/string.html#string.Formatter)。

格式（与 相同`'{:d} {:d}'.format(1, 2)`）：

```
>>> formatter = Unformatter() 
>>> s = formatter.format('{:d} {:d}', 1, 2)
>>> s
'1 2' 
```

取消格式化：

```
>>> result = formatter.unformat('{:d} {:d}', s)
>>> result
<Result (1, 2) {}>
>>> tuple(result)
(1, 2) 
```

如上所示，这当然是非常有限的用途。但是，我提出了一个 pypi 包（[parmatter](https://pypi.python.org/pypi/parmatter) - 一个最初供我自己使用但也许其他人会发现它有用的项目），它探讨了如何将这个想法用于更有用的工作的一些想法。该软件包严重依赖于上述[`parse`](https://pypi.python.org/pypi/parse)软件包。编辑：几年后的经验，我意识到`parmatter`（我的第一个包裹！）是一个可怕的、令人尴尬的想法，并且已经删除了它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-07T15:38:09.457

实际上 Python 正则表达式库已经提供了您所要求的一般功能。您只需稍微更改模式的语法

```
>>> import re
>>> from operator import itemgetter
>>> mystr='Version 1.15.6\n'
>>> m = re.match('Version (?P<_0>.+)\.(?P<_1>.+)\.(?P<_2>.+)', mystr)
>>> map(itemgetter(1), sorted(m.groupdict().items()))
['1', '15', '6'] 
```

如您所见，您必须将 (un) 格式字符串从 {0} 更改为 (?P<_0>.+)。您甚至可以使用 (?P<_0>\d+) 来要求小数。此外，您必须对某些字符进行转义，以防止它们被解释为正则表达式特殊字符。但这反过来可以再次自动化，例如

```
>>> re.sub(r'\\{(\d+)\\}', r'(?P<_\1>.+)', re.escape('Version {0}.{1}.{2}'))
'Version\\ (?P<_0>.+)\\.(?P<_1>.+)\\.(?P<_2>.+)' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-30T13:42:31.450

前段时间我做了下面的代码，它与格式相反，但仅限于我需要的情况。

**而且**，我从未尝试过，但我认为这也是[`parse library`](http://pypi.python.org/pypi/parse)

我的代码：

```
import string
import re

_def_re   = '.+'
_int_re   = '[0-9]+'
_float_re = '[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?'

_spec_char = '[\^$.|?*+()'

def format_parse(text, pattern):
    """
    Scan `text` using the string.format-type `pattern`

    If `text` is not a string but iterable return a list of parsed elements

    All format-like pattern cannot be process:
      - variable name cannot repeat (even unspecified ones s.t. '{}_{0}')
      - alignment is not taken into account
      - only the following variable types are recognized:
           'd' look for and returns an integer
           'f' look for and returns a  float

    Examples::

        res = format_parse('the depth is -42.13', 'the {name} is {value:f}')
        print res
        print type(res['value'])
        # {'name': 'depth', 'value': -42.13}
        # <type 'float'>

        print 'the {name} is {value:f}'.format(**res)
        # 'the depth is -42.130000'

        # Ex2: without given variable name and and invalid item (2nd)
        versions = ['Version 1.4.0', 'Version 3,1,6', 'Version 0.1.0']
        v = format_parse(versions, 'Version {:d}.{:d}.{:d}')
        # v=[{0: 1, 1: 4, 2: 0}, None, {0: 0, 1: 1, 2: 0}]

    """
    # convert pattern to suitable regular expression & variable name
    v_int = 0   # available integer variable name for unnamed variable 
    cur_g = 0   # indices of current regexp group name 
    n_map = {}  # map variable name (keys) to regexp group name (values)
    v_cvt = {}  # (optional) type conversion function attached to variable name
    rpattern = '^'    # stores to regexp pattern related to format pattern        

    for txt,vname, spec, conv in string.Formatter().parse(pattern):
        # process variable name
        if len(vname)==0:
            vname = v_int
            v_int += 1
        if vname not in n_map:
            gname = '_'+str(cur_g)
            n_map[vname] = gname
            cur_g += 1                   
        else:    
            gname = n_map[vname]

        # process type of required variables 
        if   'd' in spec: vtype = _int_re;   v_cvt[vname] = int
        elif 'f' in spec: vtype = _float_re; v_cvt[vname] = float
        else:             vtype = _def_re;

        # check for regexp special characters in txt (add '\' before)
        txt = ''.join(map(lambda c: '\\'+c if c in _spec_char else c, txt))

        rpattern += txt + '(?P<'+gname+'>' + vtype +')'

    rpattern += '$'

    # replace dictionary key from regexp group-name to the variable-name 
    def map_result(match):
        if match is None: return None
        match = match.groupdict()
        match = dict((vname, match[gname]) for vname,gname in n_map.iteritems())
        for vname, value in match.iteritems():
            if vname in v_cvt:
                match[vname] = v_cvt[vname](value)
        return match

    # parse pattern
    if isinstance(text,basestring):
        match = re.search(rpattern, text)
        match = map_result(match)
    else:
        comp  = re.compile(rpattern)
        match = map(comp.search, text)
        match = map(map_result, match)

    return match 
```

对于您的情况，这是一个使用示例：

```
versions = ['Version 1.4.0', 'Version 3.1.6', 'Version 0.1.0']
v = format_parse(versions, 'Version {:d}.{:d}.{:d}')
# v=[{0: 1, 1: 4, 2: 0}, {0: 3, 1: 1, 2: 6}, {0: 0, 1: 1, 2: 0}]

# to get the versions as a list of integer list, you can use:
v = [[vi[i] for i in range(3)] for vi in filter(None,v)] 
```

注意`filter(None,v)`删除不可解析的版本（返回无）。这里没有必要。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-07T11:34:22.997

这

```
a, b, c = (int(i) for i in mystr.split()[1].split('.')) 
```

将为您`int`提供`a`,`b`和`c`

```
>>> a
1
>>> b
15
>>> c
6 
```

根据您的数字/版本格式的规则或不规则，即一致，您可能需要考虑使用*正则表达式*，但如果它们保持这种格式，如果它适用于您，我会倾向于更简单的解决方案.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-17T14:47:03.143

如果您不想使用 parse 模块，这里有一个解决方案。它将格式字符串转换为具有命名组的正则表达式。它做了一些假设（在文档字符串中描述）在我的情况下是可以的，但在你的情况下可能不行。

```
def match_format_string(format_str, s):
    """Match s against the given format string, return dict of matches.

    We assume all of the arguments in format string are named keyword arguments (i.e. no {} or
    {:0.2f}). We also assume that all chars are allowed in each keyword argument, so separators
    need to be present which aren't present in the keyword arguments (i.e. '{one}{two}' won't work
    reliably as a format string but '{one}-{two}' will if the hyphen isn't used in {one} or {two}).

    We raise if the format string does not match s.

    Example:
    fs = '{test}-{flight}-{go}'
    s = fs.format('first', 'second', 'third')
    match_format_string(fs, s) -> {'test': 'first', 'flight': 'second', 'go': 'third'}
    """

    # First split on any keyword arguments, note that the names of keyword arguments will be in the
    # 1st, 3rd, ... positions in this list
    tokens = re.split(r'\{(.*?)\}', format_str)
    keywords = tokens[1::2]

    # Now replace keyword arguments with named groups matching them. We also escape between keyword
    # arguments so we support meta-characters there. Re-join tokens to form our regexp pattern
    tokens[1::2] = map(u'(?P<{}>.*)'.format, keywords)
    tokens[0::2] = map(re.escape, tokens[0::2])
    pattern = ''.join(tokens)

    # Use our pattern to match the given string, raise if it doesn't match
    matches = re.match(pattern, s)
    if not matches:
        raise Exception("Format string did not match")

    # Return a dict with all of our keywords and their values
    return {x: matches.group(x) for x in keywords} 
```

# sql-server - 如何在返回表中查找父 ID

> ID：11844987
> 
> 赞同：4
> 
> 时间：2012-08-07T11:29:10.943
> 
> 标签：sql-server, sql-server-2008

我有下表：

```
ID     ParentID
1         NULL
2          1
3          2
4          NULL
5          4
6          5
7          3 
```

我想找到特定子 ID 的第一个 ID。示例：ID=7 结果为 1
ID=6 结果为 4

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:44:56.360

你需要做一些递归 CTE 魔法来解决这个问题。

因此，给定表变量中的数据：

```
declare @data table(id int, parentid int)
insert into @data
  select 1, null
  union select 2,1
  union select 3,2
  union select 4, null
  union select 5,4
  union select 6,5
  union select 7,3 
```

以下应该可以解决问题：

```
;with recursiveTable as
(
    select d.id, d.parentId, 0 as depth
    from @data d
    where d.id=6 -- Parameterize this
    union all

    select d.id, d.parentid, r.depth-1
    from @data d
    inner join recursiveTable r
    on d.id = r.parentId
)
select top 1 id 
from recursiveTable 
order by depth 
```

插入`6`如上返回`4`。将此更改为按要求`7`返回`1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:50:44.607

试试这个：

```
 CREATE TABLE childpar(ID int,ParentID int)
    INSERT INTO childpar 
    values(1,NULL),
    (2, 1),
    (3, 2),
    (4, NULL),
    (5, 4),
    (6, 5),
    (7, 3)

DECLARE @inpyID int
SET @inpyID=7

;WITH CTE1 as (
select * from childpar where id=@inpyID
union all
select c2.* from CTE1 c1 inner join childpar c2 on c1.ParentID = c2.ID
)

select top 1 id from CTE1 order by id asc 
```

# c# - 预期：System.Int32，得到 System.Decimal

> ID：11844991
> 
> 赞同：1
> 
> 时间：2012-08-07T11:29:21.293
> 
> 标签：c#, nhibernate

> **可能重复：**
> [为什么 select SCOPE_IDENTITY() 返回小数而不是整数？](https://stackoverflow.com/questions/2601620/why-does-select-scope-identity-return-a-decimal-instead-of-an-integer)

我正在使用以下代码来确定我的列中最后插入的 id

```
var sql = "SELECT IDENT_CURRENT('TableName')"; 
var query = session.CreateSQLQuery(sql); 
var lastInsertedId = query.UniqueResult(); 
```

但是当我尝试使用这些 id 值时

```
photo.Property = session.Load<Domain.Property>(lastInsertedId); 
```

我收到以下错误消息 **提供了错误类型的 ID。预期：System.Int32，得到 System.Decimal**

我该如何克服这些？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:41:36.350

`lastInsertedId`正在返回，因为`decimal`您必须将其转换为`Int`并将其传递给`session.Load`方法

```
photo.Property = session.Load<Domain.Property>(System.Convert.ToInt32(lastInsertedId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:39:23.840

你可以写：

```
SELECT Cast(IDENT_CURRENT('Core.Clients') As Int) 
```

# jquery-ui - UI Datepicker，一次工作，只在 IE9 上停止

> ID：11844997
> 
> 赞同：0
> 
> 时间：2012-08-07T11:29:41.653
> 
> 标签：jquery-ui, internet-explorer

这是我的第一个问题，我希望是特别的。我将 UI DatePicker 与 Magento 和 Php 一起使用，一切都会好起来的，但在 IE9 上没有任何效果。这是我的代码，我在这里无法更好地格式化代码，不知道为什么。

```
<script type="text/javascript">
            jQuery(document).ready(function(jQuery){

    jQuery.datepicker.regional['pt-BR'] = {
        closeText: 'Fechar',
        prevText: '&#x3c;Anterior',
        nextText: 'Pr&oacute;ximo&#x3e;',
        currentText: 'Hoje',
        monthNames: ['Janeiro','Fevereiro','Mar&ccedil;o','Abril','Maio','Junho',
        'Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
        monthNamesShort: ['Jan','Fev','Mar','Abr','Mai','Jun',
        'Jul','Ago','Set','Out','Nov','Dez'],
        dayNames: ['Domingo','Segunda-feira','Ter&ccedil;a-feira','Quarta-feira','Quinta-feira','Sexta-feira','S&aacute;bado'],
        dayNamesShort: ['Dom','Seg','Ter','Qua','Qui','Sex','S&aacute;b'],
        dayNamesMin: ['Dom','Seg','Ter','Qua','Qui','Sex','S&aacute;b'],
        weekHeader: 'Sm',
        dateFormat: 'dd/mm/yy',
        firstDay: 0,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: ''};
    jQuery.datepicker.setDefaults(jQuery.datepicker.regional['pt-BR']);

                jQuery('#entregaprodutoCalendario').datepicker({

                    onSelect: function(dataSelecionada){
                        jQuery.ajax({
                            cache: false,
                            url: '<?php echo Mage::getUrl()?>Entregaproduto/standard/ajaxVerificaDataEntrega',
                            data: {dataSelecionada: dataSelecionada},
                            type: 'GET',
                                                        async: false,
                            dataType: 'json',
                            success: function(data){
                                jQuery('#ul_data_entrega').empty();
                                if(data.length > 0){
                                    jQuery('#ul_data_entrega').append(jQuery('<li></li>').html(' Data : <b>'+data[0].entrega_data+'</b>'));

                                    for(var i=0; i<data.length; i++){
                                        var li = jQuery('<li></li>');
                                                                                var label = jQuery('<label></label>');
                                        var radio = jQuery('<input />').attr({type: 'radio', name: 'entrega_data_hora'});
                                                                                radio.attr('class','radio_hora');            
                                        if(i == 0)
                                            radio.attr('checked','checked');

                                        radio.val(data[i].entrega_data+' entregar ate as '+data[i].entrega_hora_final);
                                        label.append(radio,' entregar at&eacute; &aacute;s <b>'+data[i].entrega_hora_final+'</b>');
                                        li.append(label);
                                                                                jQuery('#ul_data_entrega').append(li);
                                    }
                                }else{
                                    jQuery('#ul_data_entrega').html('<li><span class=dataJaSelecionada>Nenhum horario encontrado!</span></li>');
                                }
                            }
                        });

                        jQuery('#data_entrega').val(dataSelecionada);
                    }
                });

                                jQuery(".radio_hora").live('click', function(){
                                    jQuery(".radio_hora").attr('checked',false);
                                    jQuery(this).attr('checked',true);
                                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:40:16.240

I've solved this guys, after 1 day of fight. Its becouse, the document ready execute before IE ready to recive all instructions. And get it together with IE bug lose reference we got caos.

```
jQuery(document).ready(function(jQuery){

jQuery.datepicker.regional['pt-BR'] = {
    closeText: 'Fechar',
    prevText: '&#x3c;Anterior',
    nextText: 'Pr&oacute;ximo&#x3e;',
    currentText: 'Hoje',
    monthNames: ['Janeiro','Fevereiro','Mar&ccedil;o','Abril','Maio','Junho',
    'Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
    monthNamesShort: ['Jan','Fev','Mar','Abr','Mai','Jun',
    'Jul','Ago','Set','Out','Nov','Dez'],
    dayNames: ['Domingo','Segunda-feira','Ter&ccedil;a-feira','Quarta-feira','Quinta-feira','Sexta-feira','S&aacute;bado'],
    dayNamesShort: ['Dom','Seg','Ter','Qua','Qui','Sex','S&aacute;b'],
    dayNamesMin: ['Dom','Seg','Ter','Qua','Qui','Sex','S&aacute;b'],
    weekHeader: 'Sm',
    dateFormat: 'dd/mm/yy',
    firstDay: 0,
    isRTL: false,
    showMonthAfterYear: false,
    yearSuffix: ''};
jQuery.datepicker.setDefaults(jQuery.datepicker.regional['pt-BR']);

setTimeout(function(){ativarCalendario()},3000);    
        });
    function ativarCalendario(){
        jQuery('#entregaprodutoCalendario').datepicker({

            onSelect: function(dataSelecionada){
                jQuery(".ui-datepicker a").removeAttr("href");
                jQuery.ajax({
                    cache: false,
                    url: '<?php echo Mage::getUrl()?>Entregaproduto/Standard/ajaxVerificaDataEntrega',
                    data: {dataSelecionada: dataSelecionada},
                    type: 'GET',
                                                async: false,
                    dataType: 'json',
                    success: function(data){
                        jQuery('#ul_data_entrega').empty();
                        if(data.length > 0){
                            jQuery('#ul_data_entrega').append(jQuery('<li></li>').html(' Data : <b>'+data[0].entrega_data+'</b>'));

                            for(var i=0; i<data.length; i++){
                                var li = jQuery('<li></li>');
                                                                        var label = jQuery('<label></label>');
                                var radio = jQuery('<input />').attr({type: 'radio', name: 'entrega_data_hora'});
                                                                        radio.attr('class','radio_hora');            
                                if(i == 0)
                                    radio.attr('checked','checked');

                                radio.val(data[i].entrega_data+' entregar ate as '+data[i].entrega_hora_final);
                                label.append(radio,' entregar at&eacute; &aacute;s <b>'+data[i].entrega_hora_final+'</b>');
                                li.append(label);
                                                                        jQuery('#ul_data_entrega').append(li);
                            }
                        }else{
                            jQuery('#ul_data_entrega').html('<li><span class=dataJaSelecionada>Nenhum horario encontrado!</span></li>');
                        }
                    }
                });

                jQuery('#data_entrega').val(dataSelecionada);
            }
        });

        jQuery(".radio_hora").live('click', function(){
        jQuery(".radio_hora").attr('checked',false);
        jQuery(this).attr('checked',true);
        });
    } 
```

# mysql - 同一个模型的多个关系 CakePHP

> ID：11844998
> 
> 赞同：3
> 
> 时间：2012-08-07T11:29:44.117
> 
> 标签：mysql, cakephp, associations, relationships

嘿，我们的数据库中有三个表，它们通过帐户和发票这两个关系连接起来。

账户（id....） 发票（id、sender_id、receiver_id） 关系（id、sender_id、receiver_id）

发送者和接收者都是引用帐户表的外键，因此在 cakePHP 中是 account_id。关系表指定可以发送或接收发票的关系，并且发票表显示已发送的发票。

我们如何将这两个外键与 CakePHP 中的 Accounts 关联起来？

Cake 发现存在关系并列出可用于向其发送发票的接收方。目前它将正确的 sender_id 发送到数据库，但将 relationship_id 作为发票表中的 receiver_id 发送到数据库。

已经经历过这个但不起作用：[http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)

以下是我们的两个模型：

账户模式：

```
class Account extends AppModel{

    var $name='Account';
    public $useTable = 'accounts';
    public $primaryKey = 'id';
    var $hasAndBelongsToMany = array(
        'User' =>
            array(
                'className'=>'User',
                )
            );
    var $hasMany = array(
        'Template' =>
            array(
                'className'=>'Template',
                'foreignKey'=>'account_id',     
            ),  
            'InvoiceRecieved' => array(
                'className'=>'Invoice',
                'foreignKey'=>'receiver_id',        
            ),
            'InvoiceSent' => array(
                'className'=>'Invoice',
                'foreignKey'=>'sender_id',      
            )

        );

    } 
```

发票型号：

```
class Invoice extends AppModel{ 
    var $name='Invoice'; 
    var $hasAndBelongsToMany = array(
        'Field' =>
            array(
                'className'=>'Field',
                'joinTable'=>'fields_invoices'

                )
            );
    var $belongsTo = array(
            'Sender' => array(
            'className' => 'Account',
            'foreignKey' =>'account_id',
            ),
            'Receiver' => array(
            'className' => 'Account',
            'foreignKey' =>'receiver_id',
            )
        ); 

    public $useTable='invoices';
    public $primaryKey='id'; 
```

发票控制器：

```
 $accounts2=$this->User->AccountsUser->find('list', array(
            'fields'=>array('account_id'),'conditions' => array(
            'user_id' => $this->Auth->user('id'))));

    $accounts=$this->User->Relationship->find('list', array('fields'=>array('receiver_id'),'conditions' =>  array('sender_id' => $accounts2)));

if($this->request->is('post')){
        ($this->Invoice->set($this->request->data));
        //if($this->Invoice->validates(array('fieldList'=>array('receiver_id','Invoice.relationshipExists')))){

            $this->Invoice->save($this->request->data); 
            $this->Session->setFlash('The invoice has been saved');  
      }else { 
                $this->Session->setFlash('The invoice could not be saved. Please, try again.');
             }
    //}
     $this->set('accounts', $accounts); 
     $this->set('accounts2', $accounts2); 
```

添加视图：

```
<?php
echo $this->Form->create('Invoice', array('action'=>'addinvoice'));
echo $this->Form->input('sender_id',array('label'=>'Sender: ', 'type' => 'select', 'options' => $accounts3));
echo $this->Form->input('receiver_id',array('label'=>'Receiver: ', 'type' => 'select', 'options' => $accounts));
echo $this->Form->end('Click here to submit Invoice');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:48:01.007

我认为您不需要用于发票、发送方和接收方的连接表。您可以将这些外键存储在您的发票表中。你的关系将是：

```
<?php
class Invoice extends AppModel {

    public $belongsTo = array(
        'Sender' => array(
            'className' => 'Account',
            'foreignKey' => 'sender_id'
        ),
        'Receiver' => array(
            'className' => 'Account',
            'foreignKey' => 'receiver_id'
        )
    );
} 
```

然后如果需要区分发票是否已发送，还可以添加一个名为`status_id`或类似的列，并将另一个外键存储到一个新`statuses`表中，其中包含ID列和名称列，以及以下示例数据：

```
id name
== ====
1  Draft
2  Sent 
```

以及您可能需要的任何其他状态。