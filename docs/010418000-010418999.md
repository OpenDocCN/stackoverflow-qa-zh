# StackOverflow 问答 10418000-10418999

# java - Java - Eclipse IDE

> ID：10418001
> 
> 赞同：3
> 
> 时间：2012-05-02T16:37:59.500
> 
> 标签：java, eclipse, ide

通过 Eclipse 运行程序时，是否可以像在命令行上一样提供要存储在 String[] args 中的命令之类的参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:39:48.643

只需在项目的运行配置（参数选项卡）菜单中指定这些参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T16:40:03.627

是的。

如果单击“运行”按钮旁边的箭头，则可以打开“运行配置”菜单。您可以指定程序参数（传递给您的 main 方法的 args[] 参数）以及 VM 参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T16:39:23.370

是的。您可以将其指定为项目运行配置的一部分

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T16:40:06.160

是的。单击运行 - 运行配置...然后选择您的运行配置，选择参数选项卡，然后在参数文本区域中输入参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-02T16:40:51.777

是的。最简单的方法是右键单击要运行的类并选择

```
Run As->Run Configurations 
```

有一个选项卡可以添加参数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T16:42:27.847

`Run configuuration`你可以在这个位置给它。

![在此处输入图像描述](../Images/e11d17088ac3990aa2e301f6515b9e6a.png)

# r - read.zoo 总是打印出结果——为什么？

> ID：10418002
> 
> 赞同：1
> 
> 时间：2012-05-02T16:38:01.467
> 
> 标签：r, zoo

我`read.zoo`用来将制表符分隔的数据文件读入动物园时间序列。我有以下代码：

```
z <- read.zoo("poolBL03GD04_842_WMO_03862.tts", index=2:5, FUN = conv) 
```

据我了解，这是将`read.zoo`函数的结果分配给`z`变量，但它也会打印出整个结果`read.zoo`。为什么会这样，我该如何阻止它？

**更新了可重现的示例：**

```
library(chron)
library(zoo)

conv <- function(y,m,d,t) {
  date_str <- paste(m,"/", d, "/", y, " ", sep="")
  time_str <- paste(t, ":00", sep="")
  print(date_str)
  print(time_str)
  chron(date_str, time_str)
}

zz <- textConnection("51645  2000 04 11  00:00  2367.35   80.9   12.5
51645  2000 04 11  01:00  2370.38   88.8   13.7
51645  2000 04 11  02:00  2357.50   80.6   12.5
51645  2000 04 11  03:00  2360.38   87.2   13.5
51645  2000 04 11  04:00  2354.70   84.0   12.9
51645  2000 04 11  05:00  2345.91   79.3   12.2")
z <- read.zoo(zz, index=2:5, FUN = conv, header=F) 
```

`read.zoo`当尝试从函数中使用时，这更加令人沮丧。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:10:12.077

注释函数`print`中的行`conv`。

```
conv <- function(y,m,d,t) {
  date_str <- paste(m,"/", d, "/", y, " ", sep="")
  time_str <- paste(t, ":00", sep="")
#  print(date_str)
#  print(time_str)
  chron(date_str, time_str)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:00:17.753

我对动物园了解不多，但值得注意的是，您可以使用 capture.output 来强制任何东西将其输出发送到变量。

# c# - 我如何逃避正则表达式？

> ID：10418008
> 
> 赞同：0
> 
> 时间：2012-05-02T16:38:37.287
> 
> 标签：c#, regex

我有一个正则表达式，我现在需要将它移到 C# 中。我收到这样的错误

```
Unrecognized escape sequence 
```

我正在使用 Regex.Escape - 但显然不正确。

```
string pattern = Regex.Escape("^.*(?=.{7,})(?=.*[a-zA-Z])(?=.*(\d|[!@#$%\?\(\)\*\&\^\-\+\=_])).*$");
hiddenRegex.Attributes.Add("value", pattern); 
```

这是如何正确完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:40:17.507

你得到的错误是在编译时出现的，对吗？这意味着 C# 编译器无法理解您的字符串。在字符串之前添加@符号，你应该没问题。你不需要 Regex.Escape。

请参阅[C# 中字符串前面的 @ 是什么？](https://stackoverflow.com/questions/556133/whats-the-in-front-of-a-string-in-c)

```
var pattern = new Regex(@"^.*(?=.{7,})(?=.*[a-zA-Z])(?=.*(\d|[!@#$%\?\(\)\*\&\^\-\+\=_])).*$");
pattern.IsMatch("Your input string to test the pattern against"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:43:11.277

您收到的错误是由于您的字符串包含无效的转义序列（例如`\d`）。要解决此问题，请手动转义反斜杠或编写[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)：

```
string pattern = @"^.*(?=.{7,})(?=.*[a-zA-Z])(?=.*(\d|[!@#$%\?\(\)\*\&\^\-\+\=_])).*$"; 
```

`Regex.Escape`当您想要将动态内容嵌入到正则表达式时将使用，而不是在您想要构建固定的正则表达式时使用。例如，您将在此处使用它：

```
string name = "this comes from user input";
string pattern = string.Format("^{0}$", Regex.Escape(name)); 
```

您这样做是因为`name`很可能在正则表达式中包含具有特殊含义的字符，例如点或括号。何时`name`是硬编码（如您的示例中），您可以手动转义这些字符。

# ruby-on-rails - 我如何从 github 安装 rails 应用程序

> ID：10418015
> 
> 赞同：0
> 
> 时间：2012-05-02T16:39:03.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3

嗨，我在 github 上有我的应用程序源代码，现在我想将它上传到我的服务器。我应该先运行`rails new blog`然后执行 git init 和 git pull 吗？还是我必须手动创建一个文件夹，对其进行 git pull 并且不需要`rails new blog`命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:44:27.420

首先你想从 git hub 克隆那个 repo

`git clone blaa@github.com/blaa`

一旦你创建了一个文件夹，去那里尝试做

`bundle`

一旦完成并且解决了您的依赖关系，您就可以启动服务器

`rails server`

# php - Opencart如何测试模块是否安装？

> ID：10418022
> 
> 赞同：2
> 
> 时间：2012-05-02T16:39:29.873
> 
> 标签：php, opencart

有没有更好的方法来检查 opencart 中是否安装了模块。对于这样一项常见的任务，我确信我一定遗漏了一些明显的东西。

我希望它在前端（目录）和管理区域都有效。这就是检查方法是否存在以及它是否是多维数组的原因。

```
$this->load->model('setting/extension');
$this->model_setting_extension = new ModelSettingExtension($this->registry);

if(method_exists($this->model_setting_extension, "getExtensions")){ 
    $extensions = $this->model_setting_extension->getExtensions('module');
} else {
    $extensions = $this->model_setting_extension->getInstalled('module');
}   

$installed = false;
foreach($extensions as $extension){
    if(is_array($extension) && $extension['code'] == "myfoo"){
        $installed = true;
    } elseif($extension == "myfoo") {
        $installed = true;
    }
}
if(!$installed){
    exit('Error: Could not load module: myfoo!');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:48:51.077

最简单的方法是简单地通过数据库查询进行检查

```
$result = $this->db->query("SELECT * FROM `" . DB_PREFIX . "extension` WHERE `code` = 'myfoo'");
if($result->num_rows) {
    // .. installed
} else {
    // .. not installed
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-11T14:05:36.503

也许不是优雅的解决方案，但我没有找到另一个

```
$module_name = 'bla-bla-module';
$this->load->model('setting/extension');
    $installed_modules = $this->model_setting_extension->getInstalled('module');
    if(in_array($module_name, $installed_modules)) {
      // Module installed
    } 
```

UPD：这是针对 1.5.x

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:45:30.497

这行得通吗？（来源： http: [//forum.opencart.com/viewtopic.php?t=49724](http://forum.opencart.com/viewtopic.php?t=49724)）

```
<?php
    if ($this->config->get('modulename_status')) {
        // ....do something
    }
?> 
```

# c# - 如何处置内联声明的对象

> ID：10418023
> 
> 赞同：1
> 
> 时间：2012-05-02T16:39:29.920
> 
> 标签：c#, dispose

我有一个大型项目，它使用内联声明的对象一次性使用（画笔、颜色、字体等）。

当我在 VS2010 中运行代码分析工具时，我被警告说有些对象不会在每条路径上处理。

鉴于下面的代码行，我如何确保在不再使用或发生异常时明确处理引发的项目。

```
g.DrawString(stringNames[i],
     (Font)new Font("Segoe UI", 7, FontStyle.Regular),
     (Brush)Brushes.Black, 
     new Point(hStart.X - 12, hStart.Y - 6)); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:40:41.967

`Graphics`您可以通过将对象包装在`using`语句中来确保您的对象在使用后立即被处理掉。任何实现`IDisposable`.

```
using (Graphics g = e.Graphics)  // Or wherever you are getting your graphics context
{
    using(Font font = new Font("Segoe UI", 7, FontStyle.Regular))
    {
        g.DrawString(stringNames[i], font, Brushes.Black, new Point(hStart.X - 12, hStart.Y - 6));
    }
} 
```

*作为旁注，您不需要在上面的示例中显式转换 Font 或 Brush 对象。这些已经是强类型的。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:45:28.183

您不能处理内联声明的对象，您必须将其移出线外。

```
using (Font font = new Font(...))
   graphics.DrawString(..., font, ...); 
```

但是，如果您每次绘制时都创建相同的字体，则应考虑创建一次并将其附加到使用它的 Control。

```
class MyControl : Control
{
    private Font segoe7Font = new Font(...);

    protected override void Dispose(bool disposing)
    {
        if (disposing)
            segoe7Font.Dispose();
        base.Dispose(disposing);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:41:13.237

只是不要以这种方式声明非托管资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:41:20.077

```
using (var f = new Font("Segoe UI", 7, FontStyle.Regular))
    g.DrawString(stringNames[i], f, (Brush)Brushes.Black, new Point(hStart.X - 12, hStart.Y - 6)); 
```

# ios - ios5 将数据从 calloutAccessoryControlTapped 传递到另一个控制器

> ID：10418025
> 
> 赞同：0
> 
> 时间：2012-05-02T16:39:40.673
> 
> 标签：ios, ios5, uinavigationcontroller, xcode4.2, pushviewcontroller

在此方法之后，我正在尝试将 nsmutablearray 从一个导航嵌入式视图控制器发送到另一个视图控制器

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{NSLog(@"tapped %@ %d",view.annotation.title,[res count]);
    gpDetailViewController *gpDetailView = [[gpDetailViewController alloc] init];
    gpDetailView.title = @"Details";
    gpDetailView.detailArray = res;
         [self.navigationController pushViewController:gpDetailView animated:YES];

} 
```

被执行。这是 gpDetailViewController 的接口和实现文件。

```
//
//  gpDetailViewController.h
//  livewell prototype
//
//  Created by MyOxygen Mobile on 02/05/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface gpDetailViewController : UIViewController{
    NSMutableArray *detailArray;
}
@property (nonatomic,retain) NSMutableArray *detailArray;

@end 
```

和 gpDetailViewController.m

```
//
//  gpDetailViewController.m
//  livewell prototype
//
//  Created by MyOxygen Mobile on 02/05/2012.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "gpDetailViewController.h"

@interface gpDetailViewController ()

@end

@implementation gpDetailViewController
@synthesize detailArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    detailArray = [[NSMutableArray alloc]init];

    NSLog(@"%@",[self.detailArray count]);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

当我尝试打印数组元素大小时，我得到一个空值。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:49:01.620

代替

```
NSLog(@"%@",[self.detailArray count]); 
```

尝试这个

```
NSLog(@"%d",[self.detailArray count]); 
```

count 是一个整数，而不是一个类

# wcf - WCF 的 xml 架构上的奇怪名称

> ID：10418030
> 
> 赞同：2
> 
> 时间：2012-05-02T16:39:50.367
> 
> 标签：wcf, xsd

我在通过 IIS 发布的 WCF 服务中遇到了这个问题。

由于我不是英语本地人，也许我缺乏正确的术语来找到正确的答案。

我有一个名为 Result 的泛型类，它封装了操作结果代码和方法返回的类型，所以我使用它的两种情况是这样的：

结果注册结果> GetAddressBook

现在，我希望在 xsd 上的类型中分别生成 ResultOfCustomerInfo 和 ResultOfListOfAddressBookEntry。

当我列出我的 xsd 时，我有 ResultOfCustomerInfoZEwW4PK0 和 ResultOfArrayOfAddressBookEntryZEwW4PK0。

我不知道为什么我最后会得到这个 ZEwW4PK0。有没有办法强制特定名称出现在 WCF 生成的 xsd 中？

有人可以指出我解决这个问题的正确方向吗？

谢谢

# javascript - 如何捕获 iframe 的 HTTP 代码？

> ID：10418031
> 
> 赞同：1
> 
> 时间：2012-05-02T16:39:52.760
> 
> 标签：javascript, http, iframe

我想捕捉 iframe 的 HTTP 代码。根据 HTTP 代码，iframe 必须继续/停止加载。有没有办法做到这一点，使用 Jquery 等？还是我应该先使用 Curl 检查 HTTP 代码，然后再加载 iframe？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T18:11:51.403

您可以通过使用 XmlHttRequest 加载您的“iframe”来做到这一点：

```
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
        if (httpRequest.status === 200) {
            // success
            document.getElementById('iframeId').innerHtml = httpRequest.responseText;
        } else {
            // failure. Act as you want 
        }
    }
};
httpRequest.open('GET', iframeContentUrl);
httpRequest.send(); 
```

无需为此使用 jquery。

# c# - 应该显示的面板不显示

> ID：10418037
> 
> 赞同：0
> 
> 时间：2012-05-02T16:40:10.903
> 
> 标签：c#

因此，在我非常小的程序中，我正在生成一个随机百分比，并根据该百分比显示两个面板之一。但是，它只显示一个。

这是我的代码：

```
Random random = new Random();
    private void button1_Click(object sender, EventArgs e)
    {
        bool button1Clicked = true;
        if (button1Clicked == true) { ITIpanel.Visible = true; }
    }

    private void ITIpanel_Paint(object sender, PaintEventArgs e)
    {
        ITItimer.Enabled = true; 
    }

    private void ITItimer_Tick(object sender, EventArgs e)
    {

      double rand = random.NextDouble();
      if (rand <= .50) { bluestimPanel.Visible = true; }
      if (rand >= .50) {  redstimPanel.Visible = true; }

      ITItimer.Enabled = false; 
    }

    private void bluestimPanel_Paint(object sender, PaintEventArgs e)
    {
       Trialtimer.Enabled = true; 
    }

    private void redstimPanel_Paint(object sender, PaintEventArgs e)
    {
        Trialtimer.Enabled = true;
    }

    private void Trialtimer_Tick(object sender, EventArgs e)
    {
        bluestimPanel.Visible = false;
        redstimPanel.Visible = false;
        Trialtimer.Enabled = false;
        ITIpanel.Visible = true; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:33:41.893

我认为这里发生的事情是在 TrialTimer_Tick 方法中将 ITIPanel.Visible 设置为 true 不会导致 ITIPanel 重新绘制，因此 ITITimer 永远不会重新启动。

您可以在 ITITimer_Click 方法中放置一个断点，并查看它是否在第一次调用后再次被调用。

# iphone - 解码我的 NSData

> ID：10418040
> 
> 赞同：0
> 
> 时间：2012-05-02T16:40:21.723
> 
> 标签：iphone, objective-c, nsdata, decode, encode

我目前正在使用 initWithDecoder 解码我通过无线发送的数据。我注意到的一件事是，当它被调用时，它看不到范围内的变量，因此不会按照我想要的方式运行，这是我所做的一个示例：

首先我对所有数据进行编码：

```
-(void) encodeWithCoder: (NSCoder *) encoder 
{
  for(BaseGroup *attackCard in myArray)
  {
    [encoder encodeObject: attackCard];
  }
} 
```

在同一个班级中，我记下了我拥有的物品数量：

```
self.numItems = [self.myArray count]; 
```

在 initWithCoder 我希望迭代和解码编码的 NSData 如下

```
-(id) initWithCoder: (NSCoder *) decoder
{

  for(int i =0; i < self.numItems; i++)
  {
    [self.myArray addObject:[decoder decodeObject]];   
  }

  return self;

} 
```

问题是 initWithCoder 超出了变量 numItems 的范围，因此根本不迭代。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:51:59.357

为什么不对整个数组进行编码/解码？这会让事情变得更容易......

另外，别忘了打电话`[super init...]`！

```
-(void) encodeWithCoder: (NSCoder *) encoder 
{
      [encoder encodeObject: myArray];
}

-(id) initWithCoder: (NSCoder *) decoder
{
   if ((self = [super init]))
       self.myArray = [decoder decodeObject];
   return self;
} 
```

# mysql - 为 Apache 修改 DYLD_LIBRARY_PATH？连接到 MySQL 时 Perl CGI 脚本不起作用

> ID：10418043
> 
> 赞同：0
> 
> 时间：2012-05-02T16:40:29.687
> 
> 标签：mysql, perl, apache, cgi, dbi

我有一个 Perl CGI 脚本，当我从命令行运行它时可以正常工作，`./roster_return.cgi StudentID=101095`但是当我在 MAMP 中运行它时`(http://localhost:8888/cgi-bin/roster_return.cgi?StudentID=101095)`，我的 apache 日志中出现以下错误：

```
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1] install_driver(mysql) failed: Can't load '/Library/Perl/5.10.0/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle' for module DBD::mysql: dlopen(/Library/Perl/5.10.0/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle, 1): Library not loaded: libmysqlclient.18.dylib
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1]   Referenced from: /Library/Perl/5.10.0/darwin-thread-multi-2level/auto/DBD/mysql/mysql.bundle
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1]   Reason: image not found at /System/Library/Perl/5.10.0/darwin-thread-multi-2level/DynaLoader.pm line 207.
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1]  at (eval 11) line 3
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1] Compilation failed in require at (eval 11) line 3.
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1] Perhaps a required shared library or dll isn't installed where expected
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1]  at /Users/jerickson/Desktop/helpfulscripts/cgi-bin/roster_return.cgi line 16
[Wed May 02 10:56:47 2012] [error] [client 127.0.0.1] Premature end of script headers: roster_return.cgi 
```

我现在记得几年前我不得不将这一行添加到我的 .bash_profile 中：

`export DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:/usr/local/mysql/lib/"`

为了让命令行 perl 脚本工作。这可以解释为什么该库没有从 MAMP 加载，因为它没有使用我的 .bash_profile 路径。我如何为 MAMP 服务器的路径添加这个位置？

任何建议或帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:59:55.023

您可以在 VirtualHost 配置中尝试[Apache 的 mod_env ：](http://httpd.apache.org/docs/2.0/mod/mod_env.html)

```
SetEnv DYLD_LIBRARY_PATH path/to/libs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T06:40:01.080

您还可以将该行添加到`apachectl`脚本中：

`export DYLD_LIBRARY_PATH="$DYLD_LIBRARY_PATH:/path/to/libs"`

它通常在Apache的**bin目录中。**我需要为一个项目加载*pdo_informix*，这是唯一让它工作的地方。

# java - Apache Sling 可恢复上传

> ID：10418048
> 
> 赞同：1
> 
> 时间：2012-05-02T16:40:54.313
> 
> 标签：java, file-upload, download, jcr, sling

我想知道，Apache Sling 是否支持可恢复的文件上传/下载。

我想用 java 客户端构建 Web 内容存储库系统（基于 JCR 存储库）。类似于 Dropbox 和 Google Drive 的东西。并且它应该能够在网络错误或用户暂停请求后继续文件传输。

如果没有对此的支持，有人可以建议使用 JCR 存储库进行可恢复文件上传/下载的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:54:57.070

我认为 Sling 或任何其他 Java 框架中没有开箱即用的可恢复上传。我要做的是在客户端将大文件分成块，然后按顺序上传。

您可以查看[ResumableHttpUploadTask - Apache 2 License](http://gdata-java-client.googlecode.com/svn-history/r189/trunk/java/src/com/google/gdata/client/uploader/ResumableHttpUploadTask.java)以获得纯 HTTP 单文件方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:00:18.177

目前（2013 年）在 Sling 中努力添加可恢复的上传：[https ://issues.apache.org/jira/browse/SLING-2707](https://issues.apache.org/jira/browse/SLING-2707)

# symfony - 如何在 ActionController 之外获取 yml 参数

> ID：10418052
> 
> 赞同：2
> 
> 时间：2012-05-02T16:41:04.257
> 
> 标签：symfony

*   我在我的 ActionContoller-Method 中有：doSomeAction()。
*   这个在调用一个新的类，例如。我的 DocumentManager，控制我的文档。
*   此 DocumentManager 需要 FileUploadManager。

好的 ...

*   ActionContoller -> DocumentManager -> FileUploadManager

现在我需要从存储在以下位置的配置文件中获取一些参数：app/config/config.yml

*   我想在 Symfony 1.4 中使用类似的东西： sfConfig::get('myVar') ....
*   我不想为每个参数池编写一个单独的服务....
*   我不能将所有参数定义为服务的参数...

*   此外，我不想通过我接触的所有类传递 actionController （类似的对象，如 AppKernel ）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:08:12.480

您是否尝试使用解析器和转储程序：

```
use Symfony\Component\Yaml\Dumper;
use Symfony\Component\Yaml\Parser;

    private function readconfigFile(){
            $configFile = $baseUrl.'/config/config.yml';
            $yaml = new Parser();
            $configArray = $yaml->parse(file_get_contents($configFile));

            $readValue = $configArray['doctrine']['orm']['entity_managers'];

            return $readValue;

} 
```

# facebook - Facebook Like 按钮 HTML5 代码错误

> ID：10418054
> 
> 赞同：0
> 
> 时间：2012-05-02T16:41:06.497
> 
> 标签：facebook, facebook-like

我目前在 html5 版本中使用 facebook like 按钮时遇到问题，似乎每次我的 wordpress 博客的访问者喜欢一篇博客文章时，它都不起作用。它会工作一段时间，但是当你刷新它时，它会回到活动按钮，这很奇怪，因为用户已经喜欢了这篇博文。

我还遇到过，当我喜欢自己的博客文章时，它获取了错误的详细信息。例如，我喜欢第 1 篇博文，但是当我查看我的 Facebook 时，获取的图片是错误的，描述和标题也是错误的。

在 wordpress 博客中添加 facebook like 按钮的正确方法是什么？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:52:02.640

我之前也遇到过同样的错误。我已经尝试过 linter 来调试它，但它真的不起作用。无论如何，我对此的简单解决方案是将我的 facebook 之类的代码更改为**iframe 版本**（因为 html5 给了我废话，如果我使用 iframe 哈哈没有坏处）。我没有遇到任何错误。它完美地工作。

关于[如何在索引文件中添加 facebook 或在 wordpress 中添加多个博客文章的问题](http://www.bendaggers.com/how-to-add-facebook-like-twitter-tweet-google-plus-one-and-pinterest-pin-it-button-in-your-index-file-multiple-blog-posts-in-wordpress/ "如何在您的索引文件或 wordpress 中的多个博客文章中添加 facebook")，链接（如何...的指南）可能会对您有所帮助。我以前用过那个。它还讨论了 twitter 推文、google plus 和 pinterest pin it 按钮的 wordpress 实现。

祝你有美好的一天！

# git - 如何生成上个月的 git 提交日志，并将其导出为 CSV？

> ID：10418056
> 
> 赞同：80
> 
> 时间：2012-05-02T16:41:09.503
> 
> 标签：git, csv, github

有没有办法生成上个月的 git 提交日志，并将其导出为 CSV 文件？我正在寻找可以从命令行或 3rd 方应用程序运行的东西。我想要以下列：作者、提交日期、主题、文件编辑和哈希。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-05-02T16:58:30.347

您可以使用 的`--since`and`--pretty`选项`git log`，例如：

```
git log --since="last month" --pretty=format:'%h,%an,%ar,%s' > log.csv 
```

有关更多选项，请参阅[Git 日志手册页](https://git-scm.com/docs/git-log#_pretty_formats)的 PRETTY FORMATS 部分。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-05-02T07:03:47.477

此命令创建一个格式化的 CSV，其中包含哈希、用户、日期/时间、描述、更改的文件、插入、删除

```
git log --pretty=format:'"%h","%an","%aD","%s",' --shortstat --no-merges | paste - - - > log.csv 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-20T12:29:34.287

要添加，如果要应用日期范围，请添加 --after 或 --before 格式为“yyyy-mM-d”

```
git log --before="2016-12-1" --pretty=format:'"%h","%an","%ae","%aD","%s",' --shortstat --no-merges | paste - - - > log.csv 
```

# javascript - Javascript：如何将参数传递给不带括号调用的方法

> ID：10418064
> 
> 赞同：0
> 
> 时间：2012-05-02T16:41:30.980
> 
> 标签：javascript, methods, arguments, parentheses

对不起，这听起来多么愚蠢。我的 JS 词汇量很糟糕，我完全不知道要搜索什么。

我正在使用 jQuery。

所以我有这个代码：

```
var example = {
    open: function(element){
       alert(element.text());
    },
    init: function(){
        $("a").click(example.open);
    }
};

$(document).ready(function(){example.init();) 
```

所以这就是问题所在：当我单击“a”元素时，我想将一个参数传递给 example.open()。不过，我好像做不到。为了使 example.open 方法仅...存在于页面加载而不只是运行，它不能有括号。我认为。所以没有办法通过它的论点。

所以我想我的问题是......你如何将参数传递给不能有括号的函数？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:49:52.040

插入另一个匿名函数：

```
var example = {
    open: function(element){
       alert(element.text());
    },
    init: function(){
        $("a").click(function()
        {
          example.open($(this));
        });
    }
}; 
```

你也可以试试这个版本，因为 jQuery 将函数的上下文 ( `this`) 设置为 DOM 元素：

```
var example = {
    open: function(){
       alert($(this).text());
    },
    init: function(){
        $("button").click(example.open);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:44:59.563

您可以通过自己的处理程序传递锚点：

```
var example = {
    open: function( element ){
       alert(element.text());
    },
    init: function(){
      $("a").on("click", function() {
        example.open( $(this) );                           
      });
    }
};

$(document).ready(function() {
  example.init();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T16:50:38.317

由于 jQuery 将引发事件的 HTML 元素绑定到`this`变量中，因此您只需将其作为常规参数传递：

```
var example = {
    open: function(element){
       alert(element.text());
    },
    init: function(){
        $("a").click(function() {
            // jQuery binds "this" to the element that initiated the event
            example.open(this);
        });
    }
}

$(document).ready(function(){example.init();) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T17:03:08.180

我不明白你到底想做什么；但是，我可以试一试：

```
var example = {
open: function(event){
   event.preventDefault();
   alert($(event.target).text()+' : '+event.data.x);
},
init: function(){
    $("a").bind('click',{x:10},example.open);
}
};

$(example.init); 
```

**演示：http:** [//jsfiddle.net/rahen/EM2g9/2/](http://jsfiddle.net/rahen/EM2g9/2/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T16:52:09.013

对不起，我误解了这个问题。

* * *

有几种方法可以处理这个问题：

1.  **将调用包装在一个函数中：**

    ```
    $('a').click( function(){ example.open( $(this) ) } ); 
    ```

    哪里`$(this)`可以替换为您的参数列表

2.  **调用不同的事件创建函数**，它将参数作为参数：

    ```
    $('a').bind( 'click', {yourvariable:yourvalue}, example.open ); 
    ```

    其中 open 需要一个名为的参数，您可以通过（在上面它是）`event`访问您的变量`event.data``event.data.yourvariable`

## 错误和其他信息

* * *

但是，除非是 jQuery 对象，否则您`element.text()`将无法正常工作。`element`因此，您可以在将对象传递给函数之前或在函数接收到对象之后对其进行 jQueryify：

1.  jQuery*传递*的对象：

    ```
    function(){ example.open(this) } /* to */ function(){ example.open($(this)) } 
    ```

2.  jQuery*接收到*的对象：

    ```
    alert(element.text());           /* to */ alert($(element).text()); 
    ```

也就是说，当调用不带参数的对象时，`this`将引用范围内的对象（生成事件的对象）。所以，真的，如果你不需要传递额外的参数，你可以摆脱类似的事情：

```
var example = {
    open: function(){           // no argument needed
       alert($(this).text());   // this points to element being clicked
    },
    init: function(){
       $("a").click(example.open);
    }
};

$(document).ready(function(){
   example.init();
});                             // your ready function was missing closing brace '}' 
```

# jquery - 复选框：使用 jQuery 检查检测

> ID：10418065
> 
> 赞同：2
> 
> 时间：2012-05-02T16:41:33.160
> 
> 标签：jquery, forms, checkbox, checked

我有一个复选框，如果选中，它将作为每月礼物发送一份礼物。如果未选中复选框，则该礼物为单件礼物。

是）我有的：

```
<div id="monthly-right">
    <input type="checkbox" name="level_autorepeat" id="level_autorepeat" value="false" /> Yes, automatically repeat this gift every year on this date.</div>
<div id="donation-length"></div> 
```

如果选中，我需要显示的内容：

```
<div id="monthly-right"><input type="checkbox" name="level_autorepeat" id="level_autorepeat" value="false" /> Yes, automatically repeat this gift every year on this date.</div>
<div id="donation-length">
    <input type=hidden name="sustaining.frequency" id="sustaining_frequency" value="monthly" />
    <input type="hidden" name="sustaining.duration" id="sustaining_duration" value="0" />
</div> 
```

如果未选中则返回

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:52:01.000

我会做

```
$('#check').click(function() {
    var type = $(this).is(':checked') ? "checkbox" : "radio";
    var input_r_or_c = $('<input />', {
        type: type,
        name: "level_autorepeat",
        id: "level_autorepeat",
        value: "false"
    });
    if ($(this).is(':checked')) {
        var input1 = $('<input />', {
            type: "hidden",
            name: "sustaining.frequency",
            id: "sustaining_frequency",
            value: "monthly"
        });
        var input2 = $('<input />', {
            type: "hidden",
            name: "sustaining.duration",
            id: "sustaining_duration",
            value: "0"
        });
        $('#donation-length').append(input1).append(input2);
    } else {
        $('#donation-length').empty();
    }
    $('#monthly-right input').replaceWith(input_r_or_c);
}); 
```

[http://jsfiddle.net/vKLWA/1/](http://jsfiddle.net/vKLWA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:46:56.277

如果这些是隐藏输入，我会在服务器端执行此操作。否则，如果 javascript 被禁用，用户将不知道复选框没有做任何事情，并且可能会无意中做出单一或重复的贡献。

隐藏和显示隐藏的输入不会影响它们是否在提交时被发送到服务器。您将需要从 DOM 中实际删除它们，或者将它们移出当前表单。

所以基本上，总是发送隐藏的输入，但在服务器端，除非设置了复选框值，否则忽略频率/持续时间。

如果你仍然想用 javascript 来做，你需要这样做：

```
var freq = '<input type=hidden name="sustaining.frequency" id="sustaining_frequency" value="monthly" /><input type="hidden" name="sustaining.duration" id="sustaining_duration" value="0" />';

$('#monthly-right').on('change', '#level_autorepeat', function() {
   if($(this).is(':checked')) {
       $('#level_autorepeat').html(freq);
   } else {
       $('#level_autorepeat').html("");
   }
} 
```

其他答案向您展示了如何检查复选框是否被选中，但您确实需要使用`onchange`处理程序来观察它何时发生变化，这是通过`.on()`. 我将处理程序附加到父级，并观察复选框何时更改。如果选中该复选框，我将频率/持续时间代码（存储在变量中）添加到 中`div`，否则我清除 div 中的 HTML。您可以通过多种方式执行此操作，包括将内容保存在表单之外的另一个 div 中，以及将内容移动/复制到 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:43:27.480

这是您可以使用 jquery 检查您的复选框是否已“选中”的方法：

```
$('#your_checkbox_id').is(':checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:44:43.557

试试这个

**`$('#checkBox').attr('checked');`**

（或者）

**`$('#checkBox').prop('checked');`**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T16:45:30.713

您可以使用

```
 $('#donation-length').hide();
 if ($('#level_autorepeat').is(':checked')){
     $('#donation-length').show();
 } 
```

# php - 使用 PHP 的 IP 信息

> ID：10418068
> 
> 赞同：2
> 
> 时间：2012-05-02T16:41:40.303
> 
> 标签：php, ip

我正在寻找全套 IP 信息，例如主机名、反向 dns、IP 所有者等。

```
<?php

$ip       = $_SERVER['REMOTE_ADDR'];
$hostname = php_uname('n');
echo "<br>" . $hostname;

echo "<br>" . $ip;

?>

 $hostname = php_uname('n'); 
```

这是返回我的服务器主机名而不是访问者主机名。我还需要其他信息，例如反向 DNS、ISP 等

是否有任何免费 API 可用于此查找？

我考虑的解决方案，[如何通过 PHP 检索访问者的 ISP？](https://stackoverflow.com/questions/855967/how-do-i-retrieve-the-visitors-isp-through-php)

现在不工作了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:47:19.483

您正在寻找[`gethostbyaddr($ip)`](http://php.net/gethostbyaddr).

`php_uname`就像`uname`在命令行上 => 它总是使用系统的主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:47:57.420

```
$clientIp =  $_SERVER['REMOTE_ADDR'];
$clientDns = gethostbyaddr($clientIp);
$clientISP = geoip_isp_by_name($clientIp); 
```

[geoip_* 需要 pecl Geoip 扩展和来自 maxmind 的免费数据库](http://www.php.net/manual/en/geoip.requirements.php)

# jquery - JQGRID 开启/关闭列排序

> ID：10418069
> 
> 赞同：6
> 
> 时间：2012-05-02T16:41:47.847
> 
> 标签：jquery, sorting, jqgrid

无论如何我可以在运行时启用或禁用列排序吗？

我可以删除或添加使排序成为可能的类，当我删除它时，无法对列进行排序。但是当我恢复它时，网格会自动对该列进行排序，就好像有人对其进行了排序一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T08:01:29.027

是的你可以。

让我们写一些上下文：

```
//Here you have your grid.
jQuery('#myGrid');
//Here the definition of a colModel
{name:'Name', index:'name', sortable:true, align:'left', required: true, editable:true, edittype:'text'} 
```

现在，当您单击某个按钮时，您会调用一个函数，该函数应该禁用从列名称进行排序。这就是函数的样子。

```
function disableSorting(){
    jQuery('#myGrid').setColProp('Name', {sortable: false});
} 
```

经过测试，它可以工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-11T08:02:31.860

```
$("#jqGrid").jqGrid({
    colModel: [ { label: 'Category Name', name: 'CategoryName', width: 75, **sortable: false** }]
}); 
```

# javascript - 如何从 Google Maps Geocoder 获取返回值

> ID：10418073
> 
> 赞同：-2
> 
> 时间：2012-05-02T16:42:06.423
> 
> 标签：javascript, jquery, google-maps, maps

```
geocoder.geocode( { 'address': full_address}, function(results, status) {
    lat = results[0].geometry.location.lat();
    lng = results[0].geometry.location.lng();
    alert(lat); // works perfectly
});
alert(lat); // doesn't return anything 
```

为什么对象外的最后一个警报没有返回任何内容？有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:47:38.690

这可能是变量范围问题吗？如果变量是对象/函数的本地变量，则它可能不在该块之外定义。如果您在目标代码之前将 lat 和 lng 声明为全局，则可能没问题：

```
var lat;
var lng;

geocoder.geocode( { 'address': full_address}, function(results, status) {
lat = results[0].geometry.location.lat();
lng = results[0].geometry.location.lng();
alert(lat); // works perfectly
});
alert(lat); // doesn't return anything 
```

# javascript - 使用 imgPreview.js 编写 innerHTML

> ID：10418074
> 
> 赞同：0
> 
> 时间：2012-05-02T16:42:07.537
> 
> 标签：javascript, jquery, tooltip, innerhtml

我正在使用一个图像预览 jQuery 插件，恰当地命名为 imgPreview.js（由 James Padolsey 编写）。

我的插件运行良好，但是在尝试将一些 HTML 写入呈现的 Div 时遇到了困难。

该插件`rel`在添加到时以属性为目标`<img />`并呈现 URL。

我们的用途是用于汽车购物网站，其中的“工具提示”将显示汽车的更大图片。

我想修改实现以在“工具提示”中显示年份、品牌、型号和价格。大概使用jQuery`.html()`

HTML：

```
<ul>
   <li>
      <a href="#">
          <img src="http://www.web2carz.com/images/thumbs/22/80/thumb_large_70364184.jpg"
                         rel="http://www.web2carz.com/images/articles/201205/bmw_bike_seats_1335883115_600x275.jpg" />
       </a>
    </li>
</ul> 
```

CSS：

```
#imgPreview {
    display:none;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    box-shadow:0px 3px 15px rgba(0, 0, 0, 1);
    padding: 15px 15px 30px;
    z-index: 5;
    border: 2px solid #D4D4D4;
    background: #1a1a1a; /* Old browsers */
    background: -moz-linear-gradient(top,  #1a1a1a 0%, #1a1a1a 24%, #5e5e5e 50%, #1a1a1a 78%, #1a1a1a 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1a1a1a), color-stop(24%,#1a1a1a), color-stop(50%,#5e5e5e), color-stop(78%,#1a1a1a), color-stop(100%,#1a1a1a)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #1a1a1a 0%,#1a1a1a 24%,#5e5e5e 50%,#1a1a1a 78%,#1a1a1a 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #1a1a1a 0%,#1a1a1a 24%,#5e5e5e 50%,#1a1a1a 78%,#1a1a1a 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #1a1a1a 0%,#1a1a1a 24%,#5e5e5e 50%,#1a1a1a 78%,#1a1a1a 100%); /* IE10+ */
    background: linear-gradient(top,  #1a1a1a 0%,#1a1a1a 24%,#5e5e5e 50%,#1a1a1a 78%,#1a1a1a 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a1a1a', endColorstr='#1a1a1a',GradientType=0 ); /* IE6-9 */
}
#imgPreview img {
    box-shadow:inset 0px 0px 10px rgba(0, 0, 0, 1);
    border:1px solid #555;
}
#imgPreview span {
    position:absolute;
    bottom:0px;
    left:0px;
    color:#fff;
} 
```

JavaScript：

```
jQuery(document).ready(function() {
    // imgPreview
    jQuery('#photo_lot .leftCol .photos ul li img').imgPreview({
      srcAttr: 'rel',
      containerID: 'imgPreview',
      imgCSS: {
          // Limit preview size:
          height: 250
      },
      // When container is shown:
      onShow: function(link){
          // Animate link:
          jQuery(link).stop().animate({opacity:0.4});
          // Reset image:
          jQuery('img', this).stop().css({opacity:0});
      },
      // When image has loaded:
      onLoad: function(){
          // Animate image
          jQuery(this).animate({opacity:1}, 300);
      },
      // When container hides: 
      onHide: function(link){
          // Animate link:
          jQuery(link).stop().animate({opacity:1});
      }
    });
}); 
```

如果我将 onLoad 修改为：

```
// When image has loaded:
      onLoad: function(){
          // Animate image
          jQuery(this).animate({opacity:1}, 300);
          jQuery('#imgPreview').html("<span>Hello <b>World</b></span>");
      }, 
```

仅加载文本，覆盖图像。

我还设置了一个 jsfiddle，其中还添加了完整的插件代码：

[http://jsfiddle.net/QjJ4G/3/](http://jsfiddle.net/QjJ4G/3/)

# powershell - 仅使用 Power shell 从 AD 中提取用户名并选择组

> ID：10418084
> 
> 赞同：0
> 
> 时间：2012-05-02T16:42:35.790
> 
> 标签：powershell, active-directory

我想获取我的 OU 中的所有用户，并仅列出作为任何组成员的用户的名称，其中包含单词管理器，并列出他们所属的组。

所以例如

TSmith 设备经理 经理夜班

Bkline 设备经理白班

我一直在尝试调整以下脚本。问题是，如果用户是任何名称为 manager 的组的成员，它会列出有关该用户的所有信息。所有组的最后一次登录时间都在 AD 中。

非常感谢您的帮助。

```
 Import-Module ActiveDirectory
  $users = Get-ADUser -searchbase "OU=East,DC=CHM,DC=com" -Filter * -Properties * 
  foreach ( $user in $users ) {
  $user
      $groups = $user | select -ExpandProperty memberof

      if ($groups -match 'manager') {
          $user.samaccountname
          $groups
          }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:14:49.947

尝试这个：

```
Get-ADUser -SearchBase "OU=East,DC=CHM,DC=com" -Search -ResultSetSize $null -Filter * -Properties memberOf | Foreach-Object {

    # extract grouop names and check if they contain the word 'manager'
    $manager = ($_.memberof -replace '^CN=([^,]+),.+$','$1') -like "*manager*"

    if($manager)
    {
        New-Object -TypeName PSObject -Property @{
            UserName = $_.SamAccountName
            ManagerGroups = $manager -join ';'
        }   
    }
} 
```

# flash - 如何在不使用闪存的情况下编写 .sol 文件？

> ID：10418087
> 
> 赞同：0
> 
> 时间：2012-05-02T16:43:03.807
> 
> 标签：flash, amf

基本上，尝试使用 .sol 文件登录游戏而无需实际登录。它只是电子邮件和密码，明文，当然在 AMF3 或任何 .sol 文件中。关于如何做到这一点的任何想法？我想最好用 AutoHotKey 来做，最坏的情况是用 Python，尽管它们不应该有那么不同的工作方式。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:49:20.160

[http://www.pyamf.org/index.html](http://www.pyamf.org/index.html)

这可以做到。但是 AMF 是一种可能嵌入自定义序列化的格式，在这种情况下，除非您知道序列化程序是如何工作的，否则无法反转它/以相同的方式编写它。

我不确定，但为什么不能选择 AIR？

# getter - 目标 C：Getter 方法与 Class.ivarName

> ID：10418089
> 
> 赞同：0
> 
> 时间：2012-05-02T16:43:10.343
> 
> 标签：getter, nslog, inheritance, ivar

我对如何跨文件访问变量感到很困惑。

例如：

我有 3 个文件：Apple、Fruit 和 Eat

水果.h

```
@interface Fruit
{
NSString *name;
}
@property (nonatomic, retain) NSString *name;
@end 
```

水果.m

```
@implementation Fruit
    #import "Fruit.h"
{
    @synthesize name;

    -(id) init
    {
        self = [super init];
        if (self) {
            name = [[NSMutableArray alloc] init];
        }
        return self;
    }
    }
@end 
```

苹果.h

```
@interface Apple
#import Fruit.h
{
Fruit *apple;
}
@property (nonatomic, retain) Fruit *apple;
@end 
```

苹果.m

```
#import Apple.h
@implementation Apple
@synthesize apple;

apple = [[Fruit alloc] init];
apple.name = @"apple";
@end 
```

//我的 Eat.h 实际上是空的，因为我认为我不需要它

吃.m

```
@implementation Eat
#import Apple.h
//why is this not working?
NSLog(@"I am eating %@", apple.name); 
```

**我从头开始写这些只是作为示例。因此，请忽略愚蠢的语法错误，例如缺少分号，以及我错过的明显内容。我只是在反映我正在努力解决的问题。**

我想我的困惑是在 Apple.m 中，您可以使用句点符号 (.) 访问 Fruit 的名称 ivar。但在 Eat.m 中，我无法使用 (.) 访问苹果的名称 ivar。我知道我应该/可以编写一个 getter 方法，但是有没有办法以我尝试跨文件的方式直接访问变量？我知道它可能是糟糕的编程技术（如果它甚至可以完成的话），但我只是很困惑为什么功能不一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:52:53.637

如果 Apple 是一种水果，那么它将继承“名称”属性。您的示例实现并未将 Apple 显示为一种水果，但我认为您的意思是（稍后会详细介绍）。

变量“apple”在 Eat.m 中使用，在 Apple.m 中分配，但不会在任何地方导出。Eat.m 的编译应该因“变量‘苹果’未知”而失败。

'name' 的 Fruit 字段被分配了一个 NSMutableArray 但它实际上是一个字符串。编译器应该对此提出警告。而且，您没有为水果分配初始名称的 Fruit 'init' 例程。

这是一个有效的版本：

```
/* Fruit.h */
@interface Fruit : NSObject { NSString *name; };
@property (retain) NSString *name;
 - (Fruit *) initWithName: (NSString *) name;
@end

/* Fruit.m */
/* exercise for the reader */

/* Apple.h */
# import "Fruit.h"
@interface Apple : Fruit {};
@end

/* Apple.m */
/* exercise for the reader - should be empty */

/* main.c - for example */
#import "Apple.h"
int main () {
 Apple apple = [[Apple alloc] initWithName: @"Bruised Gala"];
 printf ("Apple named: %@", apple.name);
} 
```

# php - 将预加载器添加到 jquery 自动完成

> ID：10418094
> 
> 赞同：3
> 
> 时间：2012-05-02T16:43:30.640
> 
> 标签：php, jquery, autocomplete, preloader

我正在使用 Jquery 的自动完成功能从 mysql 数据库中检索选项列表并在搜索时输出它们。但有时需要一分钟，所以我想在输入搜索查询时添加一个小的预加载 gif。我搜索了谷歌和这里，并没有找到我需要的答案。如果有人可以提供帮助，将不胜感激！这是我的代码：

查询：

```
<script>
$(document).ready(function() {
  $("#keywords").autocomplete({
    source: keywordList,
    minLength: 2,
    select: function(event, ui){
        $("#keywords").val(ui.item.value);
        } 
  });
});
</script>
<?php echo keywordArray(); ?> 
```

//这是从数据库中检索数组并输出它，这是执行此操作的代码：

```
 function keywordArray()
{
  $rsKeywords = mysql_query("SELECT Destination FROM Destinations WHERE Country = 'Mexico'");

  $output = '<script>'."\n";
  $output .= 'var keywordList = [';

  while($row_rsKeywords = mysql_fetch_assoc($rsKeywords))
  {
    $output .= '"'.$row_rsKeywords['Destination'].'",';
  }

  $output = substr($output,0,-1); //Get rid of the trailing comma
  $output .= '];'."\n";
  $output .= '</script>';
  return $output;
} 
```

HTML：

```
<input id="keywords" name="keywords" type="text" autocomplete="off" size="40" > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T16:50:21.927

在你的CSS中添加这个：

```
.ui-autocomplete-loading { background:url('img/indicator.gif') no-repeat right center } 
```

替换`img/indicator.gif`为您的图像预加载路径，如果您希望预加载位于左侧，您也`right`可以`left`更改

js：

```
$("#keywords").autocomplete({
    source: keywordList,
    minLength: 2,

    search  : function(){$(this).addClass('ui-autocomplete-loading');},
    open    : function(){$(this).removeClass('ui-autocomplete-loading');},

    select: function(event, ui){
        $("#keywords").val(ui.item.value);
        } 
```

# linux - sed 在不同平台上返回不同的结果

> ID：10418099
> 
> 赞同：5
> 
> 时间：2012-05-02T16:43:38.610
> 
> 标签：linux, sed, embedded, embedded-linux

您好，在 x86 机器上使用以下命令（使用 /bin/sh）返回：`<port>3<port>`

```
test="port 3"
echo $test | sed -r 's/\s*port\s*([0-9]+)\s*/<port>\1<\/port>/' 
```

但在基于 ARM 的网络交换机的 sh shell 上运行相同的命令会返回字符串`port 3`。

如何在交换机上获得与 x86 机器上相同的结果？在我看来，数字似乎没有被 [0-9] 捕获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:30:11.697

`\s`是标准 sed 行为的 GNU sed 扩展。GNU sed 是桌面/服务器 Linux 系统上的实现。大多数嵌入式 Linux 系统都运行[BusyBox](http://busybox.net/)，这是一套实用程序，占用空间明显更小，功能更少。

指定“任何空格字符”的标准方法是`[:space:]` [字符类](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_03_05)。BusyBox 支持它（至少，大多数 BusyBox 安装都支持；大多数 BusyBox 功能可以被剥离以减少占用空间）。

BusyBox 也不支持该`-r`选项，您需要使用[基本的正则表达式](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_03)。在 BRE 中，`\(…\)`标记组，并且没有`+`运算符，只有`*`.

```
echo "$test" | sed 's/[[:space:]]*port[[:space:]]*\([0-9][0-9]*\)[[:space:]]*/<port>\1<\/port>/' 
```

请注意，由于您没有在 周围加上任何引号`$test`，因此 shell 对变量的值执行了分词和通配符扩展。也就是说，变量的值被视为以空格分隔的文件名列表，然后由单个空格连接。因此，如果您省略引号，您不必担心不同类型的空格，您可以编写`echo $test | sed 's/ *port *([0-9][0-9]*) */<port>\1<\/port>/'`. 但是，如果`$test`是`port *`，则结果将取决于当前目录中存在哪些文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T16:52:50.783

并非所有 seds 都支持 reg-expression 简写，例如`\s`. 更便携的版本是

```
 test="port 3"
  echo "$test" | sed -r 's/[ ]*port[ ]*([0-9]+)[ ]*/<port>\1<\/port>/' 
```

如果您确实还需要检查制表符，只需将它们添加到 char 类（在所有 3 个位置），在我的示例中只包含空格字符，`[ ]`即位。

**输出**

```
<port>3</port> 
```

我希望这有帮助。

# linux - 在 shell 脚本中并行运行 ssh 并设置远程变量

> ID：10418103
> 
> 赞同：2
> 
> 时间：2012-05-02T16:43:44.240
> 
> 标签：linux, shell, ssh

我正在编写一个脚本来从输入文件中读取，该文件包含约 1000 行主机信息。脚本 ssh 到每个主机，cd 到远程主机日志目录并 cat*最新*的每日日志文件。然后我在本地重定向 cat 日志文件以进行一些模式匹配和统计。

我的程序的简化结构是一个 while 循环，如下所示：

```
while read host
do
    ssh -n name@$host "cd TO LOG DIR AND cat THE LATEST LOGFILE" | matchPattern
done << EOA
    $(awk -F, '{print &7}' $FILEIN)
EOA 
```

其中 matchPattern 是一个匹配模式并进行统计的函数。

现在我有两个问题：

1）如何远程查找*最新*的每日日志文件？*最新*的日志文件名匹配 xxxx2012-05-02.log 并且是最新创建的，是否可以远程执行 ls 并找到与 xxxx2012-05-02.log 文件名匹配的文件？（我可以在本地执行此操作但会卡住将其附加到 ssh 命令时）我可以想出的另一种方法是

```
cat 'ls -t | head -1'  or
cat $(ls -t | head -1) 
```

但是，如果我将此附加到 ssh，它将列出我本地最新创建的文件名，我们可以将其设置为远程变量，以便 cat 找到正确的文件吗？

2）由于有近 1000 个主机，我想知道我是否可以并行执行此操作（例如一次执行 20 个 ssh，并在前 20 个完成后执行下一个 20），将 & 附加到每个 ssh 似乎不足以完成它。

任何想法将不胜感激！

* * *

跟进：大家好，我终于找到了一个糟糕的方法来解决第一个问题：

```
ssh -n name@$host "cd $logDir; cat *$logName" | matchPattern 
```

其中 $logName 是“今天的 date.log”(2012-05-02.log)。问题是我只能在双引号内使用**局部变量。**由于我的日志文件以 2012-05-02.log 结尾，并且没有其他文件以这个后缀结尾，我只是`cat *2012-05-02.log`在远程机器上盲目地做一个，它会为我找到所需的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:12:48.223

对于你的第二个问题，看看并行分布式外壳：

[http://sourceforge.net/projects/pdsh/](http://sourceforge.net/projects/pdsh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:36:20.610

对于你的第一个问题，

```
ssh -n name@$host 'cat $(ls -t /path/to/log/dir/*.log | head -n 1)' 
```

应该管用。注意远程命令周围的单引号。

对于您的第二个问题，将所有内容包装`ssh | matchPattern | analyse`到它自己的函数中，然后通过

```
outstanding=0
while read host
do
    sshMatchPatternStuff &
    outstanding=$((outstanding + 1))
    if [ $outstanding -ge 20 ] ; then
        wait
        outstanding=$((outstanding - 1))
    fi
done << EOA
    $(awk -F, '{print &7}' $FILEIN)
EOA
while [ $outstanding -gt 0 ] ; do
    wait
    outstanding=$((outstanding - 1))
done 
```

（我假设您正在使用`bash`.）

最好将这些`ssh | matchPattern | analyse`东西分离到自己的*script*中，然后使用并行变体`xargs`来调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T17:17:54.453

如果你安装了 GNU Parallel [http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)你可以这样做：

```
parallel -j0 --nonall --slf <(awk -F, '{print $7}' servers.txt) 'cd logdir; cat `ls -t | head -1` | grep pattern' 
```

这样您就可以在远程服务器上完成匹配。如果您希望传输完整的日志文件并在本地进行匹配，只需将 grep 移到外面：

```
parallel -j0 --nonall --slf <(awk -F, '{print $7}' servers.txt) 'cd logdir; cat `ls -t | head -1`' | grep pattern 
```

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# ruby - Puppet 中的字符串替换？

> ID：10418104
> 
> 赞同：25
> 
> 时间：2012-05-02T16:43:45.270
> 
> 标签：ruby, puppet

是否可以使用正则表达式在 Puppet 中进行字符串替换/转换？

如果 $hostname 是“web1”，我希望 $hostname_without_number 是“web”。以下不是有效的 Puppet 语法，但我认为我需要这样的东西：

```
$hostname_without_number = $hostname.gsub(/\d+$/, '') 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-03T18:11:50.240

是的，有可能。

检查 puppet 函数参考：[http ://docs.puppetlabs.com/references/2.7.3/function.html](http://docs.puppetlabs.com/references/2.7.3/function.html)

有一个内置的正则表达式替换函数。它可能调用相同的底层 gsub 函数。

```
$hostname_without_number = regsubst($hostname, '\d+$', '') 
```

或者，如果您更喜欢实际调用 Ruby，则可以使用内联 ERB 模板：

```
$hostname_without_number = inline_template('<%= hostname.gsub(/\d+$/, "") %>') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T07:41:47.360

在此页面中：

[https://blog.kumina.nl/2010/03/puppet-tipstricks-testing-your-regsubst-replacings-2/comment-page-1/](https://blog.kumina.nl/2010/03/puppet-tipstricks-testing-your-regsubst-replacings-2/comment-page-1/)

它得到了很好的解释，并且有一个用 irb 测试正则表达式的绝妙技巧。

通过这个链接和freiheit的答案，我可以用'\'替换'/'来解决我的问题。

$programfiles_sinbackslash = regsubst($env_programfiles,'\','/','G')

# web-services - 表示状态在 REST 中是什么意思？

> ID：10418105
> 
> 赞同：75
> 
> 时间：2012-05-02T16:43:55.913
> 
> 标签：web-services, rest, soap

我一直在网上阅读以了解两个词的确切含义：

代表性国家

我有个疑问。我误解了这些术语。我想与一些人澄清对此的理解。

我的理解是，服务器中有一个资源。SO Rest 意味着，将此资源的某些表示状态传输给客户端。

如果服务器有资源 x，那么如果我们可以制作资源 x 的表示状态 y，并通过网络传输它就是 REST 的意思，这是正确的还是它的正确含义是什么。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-02-19T08:13:06.763

尽管 REST 是无状态的，但它的名称中包含状态转移。这让每个人都感到有些困惑。

***无状态***

当您在浏览器中打开网页时，您将充当服务消费者，而 www 服务器将充当服务提供者，为您提供网页服务。如果是正常连接，客户端和服务器都会进行握手并发起会话（称为 TCP 连接）。

之后，根据服务器和客户端的行为，状态将更改为 ESTABLISHED、IDLE、TIMEOUT 等。但在 REST 中，我们使用的是无状态的 HTTP 协议，这意味着服务器不会存储任何会话信息客户端。客户端负责发送服务器获得服务所需的所有详细信息，这意味着当我们 `http://somedomain:8080/senthil/services/page1`从服务器调用 URI 时，它有足够的关于客户端的详细信息来完全服务 page1。

***状态转移***

使用相同的示例，当您使用某个 URL 打开网页以查看服务器上的图像文件（资源）时，www 服务器将以某种格式向您（客户端）显示图像，即资源的表示（图像文件）。

在这个过程中，服务器的恒定***资源状态***（即存储在服务器数据库中的图像文件的状态）将以一种可以理解的格式，即客户端的***应用程序状态***，呈现给客户端。因此，资源状态相对于客户端将保持不变，只有资源的表示会改变，这反过来会改变应用程序的状态。

最后，隐式改变服务器和客户端状态的资源表示（图像如何显示给客户端）称为 REST。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-05-02T20:55:51.317

具象状态转移是指转移“表象”。您正在使用资源的“表示”将位于服务器上的资源状态转换为客户端上的应用程序状态。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-02-01T09:04:32.160

每个对象都有一些状态（数据）和行为（方法）。为了在特定时间实例将服务器上对象的状态传输到客户端，需要某种表示形式，例如 JSON 或 xml 或任何其他格式。

所以 REST 是关于创建对象当前状态的表示并通过网络传输该表示。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-31T13:20:06.913

**TL;博士**

`Representational state transfer`或者简单地说 REST 是一个术语，用于以明确定义的格式交换数据以提高互操作性。通过应用某些约束，应该实现从客户端到服务器的解耦，这使得前者更健壮，而后者更灵活地适应变化。

资源表示是将资源当前状态映射到媒体类型定义良好的语法和结构的结果。因此，它与内容协商高度耦合，[内容协商](https://www.rfc-editor.org/rfc/rfc7231#section-5.3)定义了就媒体类型达成一致以将资源状态转换为请求的表示（=语法和结构）的过程。

* * *

REST 可以被视为一种在分布式系统中将客户端与服务器/API 分离的技术，它使服务器端可以自由地根据需要发展和更改其结构，而不会破坏客户端实现。

为了获得如此强大的利益，需要具备几个先决条件，因为几乎没有什么是免费的。菲尔丁在这里定义了几个限制条件，他在他[著名的博客文章](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)中进一步阐明（和解释）了这些限制条件。如果客户端不遵循 REST 方法，服务器将无法实现这种自由，如果服务器不支持客户端，客户端将无法动态探索进一步的可能性。总之，双方需要遵循相同的原则。如果不严格遵循该方法，则服务器和客户端之间的直接耦合将保持不变，如果服务器要更改，这将导致失败。

*但实际上是如何实现脱钩的呢？*

首先，服务器应该通过包含客户端能够使用的 URI 来支持客户端完成其任务。让服务器提供客户端可以从客户端当前状态调用的所有 URI，从而消除了客户端对 API 和 URI 结构的先验知识的需要。

其次，服务器不应让客户端解释 URI，而应返回 URI 和链接关系名称。即，与其使用（和解释）类似 URI 的客户端`http://server.org/api/orders`应该使用类似`new-order`. 如果服务器将上面的 URI 更改为 ie `http://server.org/api/new-orders`，无论出于何种原因，使用链接关系名称的客户端仍将能够执行其任务，而直接使用 URI 的客户端将需要更新才能继续。

据我所知，目前还没有定义和记录此类链接关系名称的标准。对于集合链接，关系名称的语义，如、 、`self`和 `prev`似乎足够有意义，尽管更具体的领域喜欢或可能不喜欢。这种语义可以用特殊的媒体类型或新标准来描述。`next``first``last``order``product-xyz`

到目前为止，这些要点解决了 HATEOAS 约束，但不幸的是，这还不是全部。根据菲尔丁的博客文章：

> REST API 应该花费几乎所有的描述性工作来定义用于表示资源和驱动应用程序状态的媒体类型，或定义扩展关系名称和/或现有标准媒体类型的超文本启用标记。

菲尔丁进一步评论说：

> REST API 永远不应该有对客户端很重要的“类型化”资源。规范作者可以使用资源类型来描述接口背后的服务器实现，但这些类型必须是不相关的并且对客户端不可见。对客户端重要的唯一类型是当前表示的媒体类型和标准化关系名称。

[类型化资源](http://soabits.blogspot.com/2012/04/restful-resources-are-not-typed.html)是客户端对内容有预先假设的资源。即，接收到`http://server.org/api/user/sam+sample`具有链接关系名称的 URI 的客户端`user`确定属于该资源的数据描述了一个人，因此可能会尝试`application/json`将资源数据的表示编组到`Person`对象。

类型化资源的问题在于，客户端对这些资源中包含的数据有某些预先分配的假设或知识，即用户资源可能因服务器而异。虽然一个服务器可能会将用户名公开为`name`其他服务器可能使用的属性`firstName`，`lastName`并且想要为每种可能性提供服务器的客户端几乎是不可维护的。此外，如果服务器曾经更改其逻辑客户端可能会以一定的可能性中断。为了应对这种耦合，应该使用媒体类型。

媒体类型是表示格式的人类可读文本描述，它定义了使用的语法以及包含在以该格式交换的文档中的可用元素的结构和语义。因此，遵循 REST 架构模型的应用程序应使用已[建立](https://www.iana.org/assignments/media-types/media-types.xhtml)或自定义的媒体类型来提高互操作性。不是直接耦合客户端和服务器，而是实际上都耦合到媒体类型。可以通过加载现有库或从头实现规范来提供对此类媒体类型的支持。如果支持，甚至可以通过插件动态加载此类媒体类型。

客户端和服务器应使用[内容协商](https://www.rfc-editor.org/rfc/rfc7231#section-5.3)来就双方都理解的通用媒体类型格式达成一致，以交换资源的当前状态。内容协商是通过提供 HTTP`Accept`标头（和/或其兄弟之一）来实现的，该标头列出了客户端能够或愿意在请求中处理的 MIME 类型，并由服务器以所请求的格式之一进行响应，包括`Content-Type`HTTP 响应标头通知客户端实际使用了哪种媒体类型表示或返回`406`失败响应。

`Accept`对于上面的 person 示例，客户端可以发送具有以下内容的 HTTP标头：`application/vcard+json, application/hal+json;q=0.6, application/json;q=0.1`到服务器，它要求服务器以列​​出的媒体类型之一定义的语法和结构返回资源的状态。它进一步指定客户端更喜欢接收根据`application/vcard+json`媒体类型描述规范格式化的状态，如果服务器不能接收，它应该更喜欢 hal+json 而不是传统的 json 语法。`406`服务器现在要么将当前资源的状态映射到请求的格式之一，要么在所有请求的媒体类型未知或状态无法转换为客户端支持的这种结构或默认表示时以适当的失败消息进行响应.

总而言之，REST 是一种通过依赖于定义良好的媒体类型来实现高互操作性的技术，并通过使用内容协商和 HATEOAS 等功能将客户端与服务器解耦。作为奖励，客户端将对更改变得健壮，因此通常需要较少的维护，而服务器则获得了能够进化和更改的好处，而不必担心一旦更改生效，客户端将无法与之交互。

某些事情，如标准化的有意义的链接关系名称、自定义的依赖于域的媒体类型和将状态转换为适用于媒体类型的表示的映射过程，需要首先设置，这是一项不平凡的任务 TBH，尽管一旦可用，它们就会提供上述好处。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-11-09T16:13:14.267

[从我的博客](https://tech-geek-passion.blogspot.com/2019/11/what-is-rest-actually.html)复制

REST 是关于创建对象当前状态（如数据库中的数据）的表示（如 JSON 或 xml 或任何其他格式）并通过网络传输该表示。休息是一组约束/约定。

资源与其表示分离，因此可以以各种格式访问其内容，例如 HTML、XML、纯文本、PDF、JPEG、JSON 等。有关资源的元数据可用并用于，例如，控制缓存、检测传输错误、协商适当的表示格式以及执行身份验证或访问控制

在底层，休息只不过是一系列原则的集合。

1.  通信应该是无状态的：服务器不应该存储任何状态。如果需要，它应该是消息的一部分

2.  状态应该是有代表性的：服务器的内部资源可以是一种形式，但它应该能够改变它的表现形式。一个 URI 引用的对象可以有不同的可用格式。不同的平台需要不同的格式。移动设备可能需要 JSON，而桌面设备可能需要 XML

3.  必须严格遵循 GET、POST、PUT 和 DELETE 等 HTTP 动词。

4.  资源应该是可寻址的：网络上的每个资源都应该有一个特定的地址（特定的 URI）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-06T13:56:45.187

我认为关于 REST 架构风格的整个问题，围绕着理解，作者 Roy Fielding 在他的论文中提出了一套架构原则，用于构建基于 Hipertext 或超媒体范式。

我认为，这种范式是理解这一重要主题的核心关键。

在 Roy Fielding 提出的组织客户端-服务器应用程序架构的风格背后，我认为现代客户端-服务器应用程序有一个特定的想法，它由一种管理应用程序状态转换的引擎组成，其状态可能可扩展为无限的。

在这个愿景中，Ipertext\Ipermedia 是菲尔丁提出的整个建筑风格的中心，而让这种范式发挥作用的关键概念是“表征（状态）转移”。

***我认为“具象”是指关于“转移”***的概念，而不是关于“状态”的概念，即转移是具象的（具象类型的），也就是说，在我看来， “代表性国家转移”名称的主要原因。

***因此，设计一个 Restful 应用程序，首先要设计一个基于组件网络的架构，每个组件都在客户端-服务器分层架构模型中与其他组件通信，向每个组件发送其状态的表示。***

因此，前端，这个架构的第一个客户端，通过它的状态传输，显示一个或多个组件发送的状态的表示，它调用在统一一致的接口上而不是在“私有”api 上进行背书。

***在作者看来，这种类型的应用程序可能会扩展到无限状态，因为它的状态不依赖于私有 api，而是依赖于该架构中所有代理共享的唯一标识符系统（如 URI） ，在一些动词上管理其状态的转换，以及在商定的共享表示传输系统上，或加号。***

这个转换结束于它的表示通过构成“公共”api的动词与被调用的服务器组件通信，它应该属于组件客户端-服务器使用的无状态通信协议。

以这种方式，这种客户端-服务器组件交互包括使用无状态协议交换（传输、通信）组件状态的表示。

允许所有这些架构潜在地扩展到无限的核心概念是支持其架构的表示转移。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-02T16:59:30.600

REPRESENTATIONAL STATE TRANSFER 的含义是 REST

RESTful 已将 DIRECT VERB 放入服务器

在实际考虑的例子中，放入 VERB 的值一般有 HTTP GET 和 POST

具有与 SOAP 不同的简单协议（非常复杂！）

如果答案不满意，请提供更详细的问题

REST 有很多讨论的话题，是很多博客和书籍的话题

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-21T18:46:55.070

想象一个状态图——下面就可以了。

[![由 LucidChart 提供的简单状态图](../Images/9c7c7ef8a183855fd4188c3254826778.png)](https://i.stack.imgur.com/Y9KTb.png)

如果这是一组网页，您将从学生的**本科**登录页面开始。根据图表，当您单击“下一步”链接时，它将带您进入**新生**页面 - 假设学生已经毕业。通过多次单击“下一步”，您可以到达最后一页。

当然，可能还有其他转换，例如“主页”，允许您跳转到默认页面。

网站的可见状态与服务器如何在内部实现这种关联无关——即内部状态。它可能涉及多个数据库、服务器等等。学生可能毕业，他/她的状态可能已通过其他方法更新。客户不知道这些细节——但总是可以期望获得一个连贯的可见状态（集合）供人类（或机器）消费。

另一个示例：当您查看此页面时，您处于 StackOverFlow Web 层次结构中特定可识别且可重现的“位置”。

因此，RESTful State 处理导航。

# php - Difficulty checking if elements in array are type integer PHP

> ID：10418107
> 
> 赞同：5
> 
> 时间：2012-05-02T16:44:15.740
> 
> 标签：php, arrays, validation, isnumeric

I am trying to detect if one or more variables contain numbers. I have tried a few different methods, but I have not been entirely successful.

Here is what I have tried.

```
<?php
$one = '1';
$two = '2';

$a1 = '3';
$a2 = '4';
$a3 = '5';

$string_detecting_array = array(); 

array_push($string_detecting_array, $one,$two,$a1,$a2,$a3); 

foreach ($string_detecting_array as $key) { 
    if (is_numeric($key)) {
        echo 'Yes all elements in array are type integer.';
    } 
    else {
        echo "Not all elements in array were type integer.";
    }
}

?> 
```

I haven't been successful using this method. Any ideas? Thankyou in advance!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:47:02.740

First off, your loop logic is wrong: you should process *all* the items in the array before reaching a verdict. The shortest (although not most obvious) way to do this is with

```
$allNumbers = $array == array_filter($array, 'is_numeric'); 
```

This works because `array_filter` preserves keys and [comparing arrays with `==`](http://php.net/manual/en/language.operators.comparison.php) checks element counts, keys, *and* values (and the values here are primitives, so can be trivially compared).

A more mundane solution would be

```
$allNumbers = true;
foreach ($array as $item) {
    if (!is_numeric_($item)) {
        $allNumbers = false;
        break;
    }
}

// now $allNumbers is either true or false 
```

Regarding the filter function: if you only want to allow the characters `0` to `9`, you want to use [`ctype_digit`](http://php.net/manual/en/function.ctype-digit.php), with the caveat that this will not allow a minus sign in front.

[`is_numeric`](http://www.php.net/manual/en/function.is-numeric.php) will allow signs, but it will also allow floating point numbers and hexadecimals.

`gettype` will not work in this case because your array contains *numeric strings*, not numbers.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T16:46:09.487

You can use `gettype` if you want to explicitly know if the variable is a number. Using `is_numeric` will not respect types.

If you are intending to use `is_numeric` but want to know if **all** elements are, then proceed as follows:

```
$all_numeric = true;
foreach ($string_detecting_array as $key) { 
    if (!(is_numeric($key))) {
        $all_numeric = false;
        break;
    } 
}

if ($all_numeric) {
    echo 'Yes all elements in array are type integer.';
} 
else {
    echo "Not all elements in array were type integer.";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T16:50:41.587

You can chain `array_map` with `array_product` to get a one-liner expression:

```
if (array_product(array_map('is_numeric', $string_detecting_array))) {
    echo "all values are numeric\n";
} else {
    echo "not all keys are numeric\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T17:40:24.307

You can use this:

```
$set = array(1,2,'a','a1','1');  

if(in_array(false, array_map(function($v){return is_numeric($v);}, $set)))
{
    echo 'Not all elements in array were type integer.';
}
else
{
    echo 'Yes all elements in array are type integer.';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-08T16:19:52.270

You can create own batch testing function. It may be static function on your utility class!

```
/**
 * @param array $array
 * @return bool
 */
public static function is_all_numeric(array $array){
    foreach($array as $item){
        if(!is_numeric($item)) return false;
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T16:47:22.117

Use `gettype()`

[http://php.net/manual/en/function.gettype.php](http://php.net/manual/en/function.gettype.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T16:49:35.627

You have to set a flag and look at all the items.

```
$isNumeric = true;
foreach ($string_detecting_array as $key) { 
    if (!is_numeric($key)) {
        $isNumeric = false;
    }
}

if ($isNumeric) {
    echo 'Yes all elements in array are type integer.';
} 
else {
    echo "Not all elements in array were type integer.";
} 
```

# function - 如何编写一个在其中调用 simulink 文件的函数

> ID：10418113
> 
> 赞同：0
> 
> 时间：2012-05-02T16:44:28.923
> 
> 标签：function, 2d, simulink, matlab

我刚刚编写了一个带有一些定义输入的 m 文件，其中调用了一个 simulink 文件。

它工作正常，但是当我要基于同一个 m 文件定义一个函数时（所以我可以给它多个输入）它给了我这个错误：

"" 在 'blocks/From Workspace' 中指定为工作空间输入的无效矩阵格式变量。矩阵必须有两个维度和至少两列。任何数据类型的复数信号和非双实数信号必须采用结构格式。第一列必须包含时间值，其余列必须包含数据值。“”

但我很确定该变量具有二维并且有两个列。

我不知道在这里做什么。

我能在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:50:20.407

您是说运行 Simulink 仿真的 mfile 在 mfile 是脚本时有效，但在 mfile 是函数时无效？如果是这样，这个[答案](https://stackoverflow.com/questions/5279199/how-do-i-provide-input-to-a-simulink-model-without-placing-it-in-the-workspace)可能会提供一些见解。尽管偏爱函数，但我还是使用脚本来运行 Simulink 参数研究 - 设置起来更容易。

# crystal-reports - 对于每个交叉表列，突出显示最大值

> ID：10418114
> 
> 赞同：1
> 
> 时间：2012-05-02T16:44:35.380
> 
> 标签：crystal-reports, formatting, conditional, crystal-reports-2008, crosstab

我试图突出显示 Crystal Reports 交叉表列中每列的最大值，即显示每个月表现最好的推销员。

这似乎是一个相当基本的要求，但我无法弄清楚！突出显示专家似乎是显而易见的答案，但它仅在您定义了标准（例如总销售额> 120,000）时才有效，并且我对突出显示列/行末尾的总计不感兴趣......我只想要每列的最高值行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:44:24.270

这比它需要的要困难得多......

将此文本添加到汇总字段的“工具提示文本”条件格式公式中：

```
// this assumes that there is a Total column and that it is the left-most column.

Numbervar max:=0;
local Numbervar col;

// exclude (left-most) total column
for col := 1 to GetNumColumns-1 do (

    local numbervar value := GridValueAt (CurrentRowIndex, col, CurrentSummaryIndex);
    if value > max then max := value;

);

ToText(max,"#"); 
```

然后将此文本添加到*同一*字段的“样式”条件格式公式中：

```
Numbervar max;

If GridValueAt (CurrentRowIndex, CurrentColumnIndex, 0) = max Then
    crBold
Else
    crRegular 
```

# ajax - 什么是用于 ajax 交互的好的 Web 服务？在 Zend 框架上下文中？

> ID：10418115
> 
> 赞同：1
> 
> 时间：2012-05-02T16:44:40.863
> 
> 标签：ajax, web-services, zend-framework

当您设计一个将使用 javascript 和 ajax 与您的服务器交互的页面时，您应该使用的最佳技术是什么？

我所说的使用基本上是诸如为简单的 CRUD 发送和接收数据之类的东西，以及诸如自动完成和搜索之类的东西。

我通常编写自己的服务器，读取 $_POST 变量，并使用 Jquery 的 jQuery.post() 将内容发送到服务器并读取内容。

我想知道是否应该使用更标准的协议，例如：

*   XML_RPC
*   休息
*   肥皂
*   JSON_RPC

请告诉我我是否应该使用这些或其他东西，并证明你对哪种协议/技术更适合这类事情的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:02:30.017

我倾向于使用 REST/JSON，因为它在大多数情况下最简单、最快。我讨厌 XML 解析，而且 Zend Framework 支持非常轻松地创建 REST 应用程序。*最重要的是，如果您确实*需要扩展，它将允许您将视图和数据层分离到不同的服务器。我经常在同一个模块中使用“常规”控制器和 REST 控制器，这很容易掌握。

get/post/put/delete 动作对应 HTTP 请求类型

```
class MyRestController extends Zend_Rest_Controller
{

    public function init()
    {
        $this->_helper->viewRenderer->setNoRender(true);
    }

    public function indexAction()
    {
    }

    public function getAction()
    {
    }

    public function postAction()
    {
    }

    public function putAction()
    {
    }

    public function deleteAction()
    {
    }

} 
```

然后你必须在你的引导程序中初始化路由：

```
protected function _initRestRoute()
{
        $this->bootstrap('frontController');
        $frontController = Zend_Controller_Front::getInstance();
        $restRoute = new Zend_Rest_Route($frontController);
        $frontController->getRouter()->addRoute('default', $restRoute);

} 
```

一些轻读：

[http://www.techchorus.net/create-restful-applications-using-zend-framework](http://www.techchorus.net/create-restful-applications-using-zend-framework "使用 Zend 框架创建 Restful 应用程序")

[http://www.xfront.com/REST-Web-Services.html](http://www.xfront.com/REST-Web-Services.html "REST 网络服务")

[http://www.develop.com/httpstatuscodesrest](http://www.develop.com/httpstatuscodesrest "HTTP 状态码")

# c# - 使用 1D 柏林噪声创建粗略/摇摆不定的线

> ID：10418118
> 
> 赞同：3
> 
> 时间：2012-05-02T16:44:46.410
> 
> 标签：c#, algorithm, imaging, perlin-noise

有人可以帮助我开始使用伪代码或步骤来使用 1D perlin 噪声来绘制粗略/摆动的线条，如页面中所示

[http://freespace.virgin.net/hugo.elias/models/m_perlin.htm](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)

[![摇摇晃晃的圈子](../Images/44a72ab6ea7d2dbb51754c1b2b4272e9.png)](https://i.stack.imgur.com/j7BT5.gif)
[（来源：[处女网](http://freespace.virgin.net/hugo.elias/models/sketch1.gif)）]

我确实发现 aforge.net 具有 1D 和 2D perlin 噪声函数的函数。它显示了使用 2D 噪声生成云的示例。

[http://www.aforgenet.com/framework/docs/html/f2f36ce1-ddab-389e-b538-0ccaca81fa87.htm](http://www.aforgenet.com/framework/docs/html/f2f36ce1-ddab-389e-b538-0ccaca81fa87.htm)

但我不确定如何使用它来生成摇摆不定的线条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:32:00.537

我看到您的问题希望以伪代码作为答案。我最终没有使用渐变（我已经有一个难以兼容的单纯形噪声函数），而是做了其他事情。

这个想法是选择一个间隔长度（统一很好，但较大的会产生较小的舍入误差）并使用随机种子考虑噪声间隔`[s, s + I]`，其中 I 是间隔长度，s 是种子。然后，您通过将角度 theta 映射到 来将其“包裹”在一个圆圈周围`I / (2 * Pi) * theta`。但是，您需要确保 和 的噪声值`s`相同`s + I`，否则您将在圆中出现不连续性。然而，这很容易；给出`x`，`[s, s + I]`只需这样做：

```
interpolate(x, s, I)
  mid <- noise(s) - noise(s + I)
  out <- noise(x)
  out <- out + (x - s) / I * mid
  out <- out - (s + I - x) / I * mid
  return out 
```

请注意，如果`x = s`，我们减去`mid`，如果`x = s + I`，我们添加`mid`。

我们现在有一个从角度到噪声值的映射。给定我们希望圆的半径，我们可以设置噪声的最小值和最大值，然后对于我们希望评估的任何 theta，只需将相应的值添加到圆的半径即可。在极坐标中，这看起来像：

```
radius(theta)
  s <- randomDouble
  I <- 1
  theta <- theta / (2 * pi)
  dr <- interpolate(theta, s, I)
  dr <- dr * (noisemax - noisemin) / 2 + (noisemax + noisemin) / 2
  return dr + r 
```

假设您已经有了平均半径 ( `r`) 和所需的方差 ( `noisemin`, `noisemax`)，并且您的噪声函数在 中输出值`[-1, 1]`。您需要在噪声最大值和噪声最小值之间保持紧密的分布，否则您的圈子大部分会摇摆不定。

对于正方形，过程相同，但您不需要任何控制或插值，只需要缩放因子和间隔正方形边长。

您可以花哨并进行非线性插值，但我并没有真正看到需要，它可能会弄乱单纯形噪声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:33:35.273

从一维到二维的唯一区别是计算斜率。一旦你有了斜率和一维噪声，只需在垂直于斜率方向的方向上添加噪声。

# java - 如何使用外键将两个表映射到一个实体？

> ID：10418121
> 
> 赞同：3
> 
> 时间：2012-05-02T16:44:58.160
> 
> 标签：java, hibernate, jpa

我有一个与此非常相似的问题：[如何在辅助表中的非主键列上连接表？](https://stackoverflow.com/q/1494368/1061499) 但我不确定我是否可以应用相同的解决方案。

我有两个这样的表：

```
CREATE TABLE CUSTOMER
(
    CUSTOMER_ID INTEGER NOT NULL,
    DETAIL_ID INTEGER NOT NULL,
    PRIMARY KEY( CUSTOMER_ID ),
    CONSTRAINT cust_fk FOREIGN KEY( DETAIL_ID ) REFERENCES DETAILS( DETAIL_ID )
)

CREATE TABLE DETAILS
(
    DETAIL_ID INTEGER NOT NULL,
    OTHER INTEGER NOT NULL,
    PRIMARY KEY( DETAIL_ID )
) 
```

我想将这些表映射到一个名为 的类`Customer`，所以我有：

```
@Entity
@Table(name = "CUSTOMERS")
@SecondaryTable(name = "DETAILS", pkJoinColumns=@PrimaryKeyJoinColumn(name="DETAIL_ID"))
public class Customer {
    @Id
    @GeneratedValue
    @Column(name = "CUSTOMER_ID")
    private Integer id;

   @Column(table = "DETAILS", name = "OTHER")
   private Integer notes;

   // ...
} 
```

但这仅在主表中`DETAIL_ID`匹配时才有效。`CUSTOMER_ID`

所以我的问题是：如何使用主表中的外键字段来加入辅助表的主键？

* * *

**更新** 我试图设置：

`@SecondaryTable(name = "DETAILS", pkJoinColumns=@PrimaryKeyJoinColumn(name="DETAIL_ID", referencedColumnName="DETAIL_ID"))`

但是当我运行应用程序时，我得到了这个异常：

`org.hibernate.MappingException: Unable to find column with logical name: DETAIL_ID in org.hibernate.mapping.Table(CUSTOMERS) and its related supertables and secondary tables`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-20T19:51:08.573

对于正在寻找答案的任何人，使用 @SecondaryTable 不是连接两个具有非主键列的表的方法，因为默认情况下 Hibernate 将尝试通过主键关联这两个表；您必须使用@OneToMany 审查[http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/](http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/)以获得解决方案，这是一个代码片段，以防 url 停止工作：

客户类别：

```
@Entity
@Table(name="CUSTOMERS")
public class Customer {

    @Id
    @GeneratedValue
    @Column(name="CUSTOMER_ID")
    private Integer id;

    @ManyToOne
    @JoinColumn(name="DETAIL_ID")
    private Details details;

    // Getter and Setter methods...
} 
```

细节类：

```
@Entity
@Table(name="DETAILS")
public class Details {

    @Id
    @GeneratedValue
    @Column(name="DETAIL_ID")
    private int detailId;

    @Column(name="OTHER")
    private String other;

    @OneToMany(mappedBy="details")
    private Set<Customer> customers;

    // Getter and Setter methods...
} 
```

这可以通过 hibernate 使用以下代码轻松访问：

```
Session session = HibernateUtil.getSessionFactory().openSession();
Query query = session.createQuery("select id, details.other from Customer"); 
```

我希望这可以帮助那些像我一样花费数小时寻找实现这一目标的方法的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:57:07.950

您可以使用注释的`referenceColumnName`属性`@PrimaryKeyJoinColumn`来定义被引用表的连接列。事实上，通过结合使用 name/referencedColumnName 你可以任意加入，如果发现重复，你的 ORM 提供者将抛出异常。

# java - 如何围绕优先队列池工作？这是最好的选择吗？

> ID：10418122
> 
> 赞同：2
> 
> 时间：2012-05-02T16:44:58.597
> 
> 标签：java, algorithm, oop, design-patterns, data-structures

[这是一个关于如何表示优先级](https://stackoverflow.com/questions/10399598/what-is-the-best-way-to-represent-priorities-preferences-in-objects)的后续问题
答案引导我将设计基于`Priority Queue ADT`.

我的问题是我无法弄清楚*如何为*这个问题建模（我了解 a 的`PQ`工作原理）。
所以使用我原来的（简单的例子）假设我有`PersonA` `PersonB`...... `PersonY`（表示为类），它们喜欢各种菜肴`Pizzas` `Spaggeti` `Steak`等。
我想找到一种方法来指定应该根据哪些菜肴来祝愿人`Preference`（这可能是一个额外的类正如在开始问题线程的答案中的朋友也建议的那样）。
我不确定这应该如何建模。我的第一个想法是`PriorityQueue`为每道菜（`PizzaPQ`等`SpaggetiPQ`）创建一个，在每个队列中加入**所有**`Persons`并开始从每个队列中删除顶部（作为对该菜具有最大偏好的队列）并将其`Person`从其他队列中删除。此过程按顺序遍历所有队列。
现在虽然从概念上看它*似乎是*正确的（但这不是最好的方法，因为我认为由于过程本身会出现差异），但我不认为我走在正确的轨道上，因为

1.  从其他队列中删除是线性操作（我说的是已经在`remove(Object)`哪里提供服务并且不应该再出现在其他队列中）并且将花费 队列数量在哪里（在我看来，这增加了很多优先级队列的使用）`Object``Pizza``O(N*k)``k`
2.  在我看来，我需要一些抽象来处理*优先队列的“池”，*我不确定是否真的存在这样的数据结构，我也不知道。

我想这个问题可以概括为如何分配作业或如何操作多个队列（也许？）
对于这些问题必须有一个标准的设计方法。
非常欢迎任何输入

**@Thomas 回答后更新：**
问题稍微复杂一些。
除了偏好之外，还可能存在其他（一个人的）属性。
例如`PersonA`，`PersonB`他们都喜欢牛排而不是其他任何菜肴。但`PersonA`胆固醇高，`PersonB`是一名运动员。以某种方式考虑这些属性，然后`PersonB`应该得到牛排。也许`PersonA`最终会以其他方式结束。
这就是我最初想到`PQs`菜肴的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:04:17.900

这个应用程序是否可以在多线程环境中执行？如果是这样，我有一些想法可以提供帮助。

1.  创建一个调度线程，其工作是获取一个 Person 对象并将其分配给 PQ。假设一个人应该只在 1 个 PQ 上，这有助于解决您从上述其他 PQ 中删除人的问题。这会将 Person 应放置在何处的逻辑（和 CPU 处理时间）从代码的 PQ 执行部分移开，从而使 PQ 更具凝聚力并降低其与 Person 的耦合。如果一个人可能在多个 PQ 上，或者您想将他们从一个 PQ 移动到另一个 PQ，等等，这应该在调度程序代码中执行。

2.  如果 PQ 多于可用线程，则为 PQ 创建一个线程池，否则只需为每个 PQ 创建一个线程。这样您就不必担心如何迭代 PQ 和可能的 PQ 饥饿。处理 PQ 和 Person 对象的代码对于每个线程都是相同的。

即使您不使用多线程模型，我也会考虑让 Person 对象继承自 PQ 知道的 PQitem 对象，因此 PQ 不必知道有关 Person 对象的任何内容，可能是这样的：（对不起c++，但我想你明白了）

```
class PQitem
{
public:
    virtual void execute() = 0;
    virtual void getPriority() = 0;
private:
    // PQ specific stuff here
};

class Person : public PQitem
{
public:
    void execute() { /* logic executed when taken off the PQ */ }
    void getPriority() { /* logic used to determine where to place this Person */ }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:58:06.137

颠倒逻辑呢？

*   将所有菜肴放入地图
*   遍历所有人
    *   循环遍历该人的菜肴优先队列
    *   检查这道菜是否还在地图中
    *   如果这道菜在地图上，请将其移除并结束循环

这样，您将拥有一份菜肴地图和一份人员列表以及他们的优先队列（或地图人员-> 队列）。

然后迭代将`O(n * m)`是`n`人数，并且`m`是一个人的菜优先队列的长度。

如果您稍后在菜肴地图中添加一个计数器，例如您有 5 个披萨可用，您需要更改的只是当计数器达到 0 时从地图中删除该菜肴（并在上菜时增加计数器，课程 ：） ）。

您仍然需要处理以下问题：

*   谁将开始接受服务？
*   如果一个人的优先队列中的菜肴都不再出现在地图上，会发生什么？

解决这些问题的一种方法可能是从优先队列最短的人开始，因为他们更有可能没有得到任何菜。这仍然不能解决整个问题（如果两个人只想要披萨而周围只有一个披萨怎么办？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:59:41.627

这是 java 的优先级队列的链接：http: [//docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

定义优先级的关键是定义一个比较不同菜肴的比较器。可能每个人只有一个比较器或一个比较器来定义他们的偏好。

# c++ - 打印关键点描述符矩阵opencv的值

> ID：10418124
> 
> 赞同：8
> 
> 时间：2012-05-02T16:45:00.497
> 
> 标签：c++, opencv, matrix, unsigned-char, feature-descriptor

我在打印通过使用任何 opencv 描述符提取器的“计算”方法获得的描述符矩阵的值时遇到了一些问题。我想将一个特征的描述符一个一个地打印到一个文件中，但是当我使用“at”访问描述符矩阵的某个元素时，我会收到该元素的不同值。以下是我在使用'at'时用来测试描述符矩阵的输出值的'for'循环：

```
for(int i=0; i<nF; i++){

    if(lpx != keypoints[i].pt.x && lpy != keypoints[i].pt.y){
        usedFeatures++;
        cerr << descriptors.row(i) << endl << endl; // printing row of descriptor matrix
        fileS << keypoints[i].pt.y << " " << keypoints[i].pt.x << " ";
        fileS << keypoints[i].size << " " << keypoints[i].angle << endl;

        if(i == nF - 2){
            //printing subvector of descriptor matrix made of the element at row i and col 0
            cerr << "get row i, col 0 " << descriptors.row(i).col(0) << endl;

            //same as before just inverting the order of access
            cerr << "get col 0, row i: " << descriptors.col(0).row(i) << endl;

            //printing the value of the element with 'at'
            cerr << (int)descriptors.at<uchar>(i, 0);

            //creating a new int and giving it the value of element (i, 0) of descriptor matrix. Should be the same
            //value shown on the subvector before
            int test = descriptors.at<uchar>(i, 0);

            //printing value of element
            cerr << "i, 0: " << test << endl;
        } 
```

第二个'if'是一个测试'if'，我在访问描述符元素时查看打印的值。现在，由印刷

```
cerr << descriptors.row(i) << endl << endl; 
```

在 nF - 2 迭代中，我得到以下结果：

```
[20, 11, 0, 18, 51, 3, 0, 3, 133, 50, 0, 0, 0, 0, 0, 11, 133, 18, 0, 0, 0, 0, 0, 3,
119, 2, 0, 0, 0, 0, 0, 2, 19, 5, 0, 4, 55, 27, 1, 1, 133, 25, 0, 1, 4, 1, 0, 22, 133,
18, 0, 0, 0, 0, 0, 14, 131, 13, 1, 0, 0, 0, 0, 1, 12, 1, 0, 1, 56, 133, 25, 13, 133,
14, 0, 0, 3, 8, 20, 80, 133, 38, 0, 0, 0, 0, 0, 51, 106, 11, 1, 0, 0, 0, 0, 23, 0, 0,
0, 0, 19, 126, 70, 11, 23, 0, 0, 0, 0, 9, 83, 133, 53, 1, 0, 0, 0, 0, 2, 133, 26, 
3, 2, 0, 0, 0, 0, 28] 
```

正如预期的那样，前两个打印在第二个“if”中：

```
cerr << "get row i, col 0 " << descriptors.row(i).col(0) << endl;

cerr << "get col 0, row i: " << descriptors.col(0).row(i) << endl; 
```

给我 [20]

但是另外两张

```
cerr << (int)descriptors.at<uchar>(i, 0); 
```

和

```
int test = descriptors.at<uchar>(i, 0);
cerr << "i, 0: " << test << endl; 
```

给我 0 而不是 20。我之前展示的 nF-2 行的完整结果，当使用 'at' 访问元素并打印它们时是：

```
 0 0 160 65 0 0 48 65 0 0 0 0 0 0 144 65 0 0 76 66
 0 0 64 64 0 0 0 0 0 0 64 64 0 0 5 67 0 0 72 66
 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 0 0 48 65 0 0 5 67 0 0 144 65 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0 0 0 0 0 64 64 0 0 238 66
 0 0 0 64 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 64 
```

这与我的预期完全不同。我已经尝试了很多东西：使用 float、double、unsigned int 而不是仅使用 int 进行强制转换，以及分配给这些类型的变量；在打印之前转换矩阵，复制矩阵然后转换，创建具有不同类型的描述符矩阵......但它们都不起作用。我怀疑它与描述符矩阵的类型有关，尽管我几乎可以肯定它具有 uchar 类型（我检查了 elemSize）

在此先感谢，对我的英语和问题的大小感到抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T16:17:02.247

找到了答案。这确实是一个类型问题。返回的描述符矩阵的类型不像我想的那样 uchar ，它实际上是浮点数。获得价值

```
(float)descriptors.at<float>(i, 0); 
```

给我正确的价值。有趣的是我可以发誓我之前尝试过浮动，但它没有用。我必须只为 int、double 和 unsigned int 尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:41:07.967

这不能回答您的问题发生的原因，但我记得在尝试访问我的描述符值时遇到了类似的问题。

我试图编写一段可以与任何描述符一起使用的代码，因为 OpenCV`cv::DescriptorExtractor`实现了多个 s。问题是，因为我希望有一天能够制作我自己的、OpenCV 独立的库来与我的描述符接口一起工作，所以我想要`std::vector<vector<double> >`结构中的所有描述符。

这是我的代码转换`cv::Mat descOld`为`std::vector< std::vector <double> > desc`：

```
cv::DescriptorExtractor *descCalc;

// initialize descCalc

descCalc->compute(*image, feats, descOld);

// conversion to std::vector<std::vector <double> > :

const double *temp;
desc.clear();
desc.reserve(descOld.cols);
for (int i=0, szi = this->desc.rows; i < szi; ++i){
    temp = descOld.ptr<double>(i);
    desc.push_back(std::vector<double>(temp, temp+descOld.cols));
}

assert(desc.size() == descOld.rows);
assert(desc[0].size() == descOld.cols); 
```

希望对一些人有所帮助。

# css - CSS背景定位与精灵

> ID：10418125
> 
> 赞同：0
> 
> 时间：2012-05-02T16:45:00.873
> 
> 标签：css, background-position

我正在通过精灵制作一个滑动门按钮，有一个部分给我带来了一些麻烦。有没有办法设置锚点和背景网址图像位置：所以像这样：

```
background-position: 0 -47px top right; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:34:23.620

如果您的锚点的宽度和高度是恒定的，那么您可以使用精灵并定义坐标（在您的示例中为 0 -47px）。如果锚点可以有各种尺寸，那么我认为最好将该背景切割为单独的图像并为背景添加“右上角”位置。正如我上面的人所说 - 没有办法同时使用 - 0 -47px 和右上角的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:47:51.097

不可以。您的“窗口”的尺寸需要与图像完全匹配，否则它将被剪切/显示其他图像。

您可能没有指定放置精灵的位置（这有点超出目的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:48:08.973

不，“top”和“right”只是值 0 和 100% 的别名。

# iphone - 将应用程序部署到 iPhone 设备后如何添加代码更改

> ID：10418126
> 
> 赞同：0
> 
> 时间：2012-05-02T16:45:01.910
> 
> 标签：iphone

将代码部署到 iPhone 设备上后如何修改代码。我只看到摘要、信息、构建设置、构建阶段和构建规则。看不到我可以打开并添加更改的所有项目文件。

在真实设备上部署和测试后如何添加更改的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:50:38.757

听起来您在项目或目标设置中。如果您在屏幕左侧看到一个菜单，您应该能够浏览项目中的文件以进行更改。如果您没有看到该菜单，那么在屏幕的右上角应该有 3 个按钮，其下方带有“查看”一词。单击这 3 个按钮中最左侧的按钮，将显示菜单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T16:52:27.943

@user1120133，如果您只是在您的设备上再次运行该程序而不是模拟器，它会自动为您更新所有内容。我想这就是你的意思。

# visual-studio - TFS 2010 和/或测试管理器中的测试用例结果列

> ID：10418133
> 
> 赞同：3
> 
> 时间：2012-05-02T16:45:36.530
> 
> 标签：visual-studio, testing, qa, microsoft-test-manager

我试图弄清楚如何将工作项字段结果添加到我在 TFS 2010 和/或测试管理器 2010 中的查询中，以便我可以查看我们的测试用例结果并将它们用于报告目的。

虽然我意识到此列可通过将 TFS 链接到 SharePoint 网站提供的默认报告获得，但我目前无法设置此列，因为我们的客户尚未配置他们的 SharePoint 来执行此操作。

我目前的计划是在 Excel 中创建自己的报告，但为了简单地分解我的问题，是否可以从 TFS 或测试管理器中查询该字段？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T20:46:02.887

我发现目前确实没有办法从 TFS 或测试管理器访问结果字段（肯定是 TFS 2012）。

对于没有设置报告的项目（或没有测试报告的 Visual Studio Online），最简单的方法是从测试管理器中的结果手动执行。

感谢大家的观看和帮助。

# c# - NHibernate.Driver.FirebirdClientDriver 不支持多查询

> ID：10418143
> 
> 赞同：1
> 
> 时间：2012-05-02T16:46:20.660
> 
> 标签：c#, nhibernate

我在我的应用程序中使用 nhibernate 作为 orm 并使用 firebird 作为数据库。目前正在尝试行使会员资格提供者，但我收到以下错误消息

```
The driver NHibernate.Driver.FirebirdClientDriver does not support multiple queries. 
```

我的测试方法具有以下代码

```
#region Test FindUserByEmail
        [Test]
        public void FindUserByEmail()
        { 
            //Arrange
            var email = "jamesbond@mi6.uk";
            var recs = -1;
            var expectedRecords = 1;

            //Act
            var actual = _provider.FindUsersByEmail(email, 0, 99, out recs);
            //Assert
            Assert.AreEqual(expectedRecords, recs);
            Assert.AreEqual(expectedRecords, actual.Count);
        }
        #endregion 
```

是否有 nhibernate firebird 驱动程序接受多个查询的解决方案？

**更新**添加 FindUsersByEmail 方法

```
public override MembershipUserCollection FindUsersByEmail(string emailToMatch, int pageIndex, int pageSize, out int totalRecords)
        {
            CheckParameter(ref emailToMatch, false, false, false, 100, "emailToMatch");

            if (pageIndex < 0)
            {
                throw new ArgumentException("The pageIndex must be greater than or equal to zero.", "PageIndex");
            }
            if (pageSize < 1)
            {
                throw new ArgumentException("The pageSize must be greater than zero.", "pageSize");
            }

            long upperBound = (long)pageIndex * pageSize + pageSize - 1;
            if (upperBound > Int32.MaxValue)
            {
                throw new ArgumentException("The combination of pageIndex and pageSize cannot exceed the maximum value of System.Int32.", "pageIndex and pageSize");
            }

            totalRecords = 0;
            MembershipUserCollection users = new MembershipUserCollection();
            IList results;
            using (ISession session = SessionProvider.Instance.OpenSession())
            {
                using (ITransaction tran = session.BeginTransaction())
                {

                    results = session.CreateMultiCriteria()
                                        .Add(session.CreateCriteria(typeof(User)).Add(Restrictions.Like("UpperEmail", emailToMatch.ToUpper())).SetFirstResult(pageIndex * pageSize).SetMaxResults(pageSize))
                                        .Add(session.CreateCriteria(typeof(User)).Add(Restrictions.Like("UpperEmail", emailToMatch.ToUpper())).SetProjection(Projections.RowCountInt64()))
                                        .List();
                    tran.Commit();
                }
            }
            var dbUsers = (List<User>)results[0];
            totalRecords = (int)results[1];
            foreach (User u in dbUsers)
            {
                users.Add(new MembershipUser(Name,
                               u.UserName,
                               u.Id,
                               u.EMail,
                               u.PasswordQuestion,
                               u.Comment,
                               u.IsApproved,
                               u.IsLockedOut,
                               u.CreationDate,
                               GetNullableDateTime(u.LastLoginDate),
                               GetNullableDateTime(u.LastActivityDate),
                               GetNullableDateTime(u.LastPasswordChangeDate),
                               GetNullableDateTime(u.LastLockedOutDate)));
            }
            return users; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:46:33.780

`FirebirdClientDriver`并且`FirebirdDriver`两者都不支持多查询

如果您有多个 rdbms 支持，我建议使用 Futures 而不是 MultiCriteria，因为如果不支持多查询，它们会自动回退到正常查询

例子：

```
var userquery = session.CreateCriteria(typeof(User))
    .Add(Restrictions.Like("UpperEmail", emailToMatch.ToUpper()))
    .SetFirstResult(pageIndex * pageSize)
    .SetMaxResults(pageSize);

var totalcountQuery = CriteriaTransformer.Clone(userquery)
    .SetProjection(Projections.RowCountInt64()));

IEnumerable<User> dbUsers = userquery.Future<User>();

IFutureValue<long> count = totalcountQuery.FutureValue<long>();

totalcount = count.Value;  // both will be executed here
foreach ( User u in dbUsers) 
```

# css - 带有图像链接和翻转的 Firefox 3

> ID：10418147
> 
> 赞同：0
> 
> 时间：2012-05-02T16:46:33.383
> 
> 标签：css, rollover, firefox-3

我有一个不适用于 Firefox 3（以及可能的其他版本）的菜单

```
 <div id="menu">
<p style="margin-right: 10px;">
<ul id="image-menu">
    <a href="/#middle"><li class="home_menu"></li></a> |
    <a href="/#top"><li class="about"></li></a> | 
    <a href="/#right"><li class="stories"></li></a> | 
    <a href="/#bottom"><li class="whats_on"></li></a> | 
    <a href="/#left"><li class="get_involved"></li></a> | 
    <a href="http://secure.theatreroyal.com/tickets/production.aspx?PID=308539"><li class="tickets"></li></a> | 
    <a href="/index.php/twayf/contact"><li class="contact"></li></a>
</ul>
</p>

</div> 
```

CSS

```
 <style type="text/css">

#image-menu ul {line-height: 20px;}

#image-menu li {list-style: none; height: 22px; display: inline-block;}

#image-menu a {display:inline-block;}

.home_menu {background-image: url(/images/menu/home1.png); background-repeat: no-repeat; width: 50px; }
.home_menu:hover {background-image: url(/images/menu/home2.png);}

.about {background-image: url(/images/menu/about1.png); background-repeat: no-repeat; width:64px; }
.about:hover {background-image: url(/images/menu/about2.png);}

.stories {background-image: url(/images/menu/stories1.png); background-repeat: no-repeat; width:88px; }
.stories:hover {background-image: url(/images/menu/stories2.png);}

.whats_on {background-image: url(/images/menu/whats_on1.png); background-repeat: no-repeat; width:96px; }
.whats_on:hover {background-image: url(/images/menu/whats_on2.png);}

.get_involved {background-image: url(/images/menu//behind_the_scenes1.png); background-repeat: no-repeat; width:192px; }
.get_involved:hover {background-image: url(/images/menu/behind_the_scenes2.png);}

.tickets {background-image: url(/images/menu/tickets1.png); background-repeat: no-repeat; width:83px; }
.tickets:hover {background-image: url(/images/menu/tickets2.png);}

.contact {background-image: url(/images/menu/contact1.png); background-repeat: no-repeat; width:83px; }
.contact:hover {background-image: url(/images/menu/contact2.png);}

</style> 
```

我最好的解决方案是什么......添加一个火狐版本条件语句来要求人们升级（我知道 ff 11 工作正常）还是有另一个更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:58:07.060

我怀疑这里的问题是这个 html 无效，所以你需要一个像样的解析器来纠正这些问题。

你能不能把 html 改成这样：

```
<div id="menu" style="margin-right: 10px;">
    <ul id="image-menu">
        <li class="home_menu"><a href="/#middle"></a></li> |
        <li class="about"><a href="/#top"></a></li> | 
        <li class="stories"><a href="/#right"></a></li> | 
        <li class="whats_on"><a href="/#bottom"></a></li> | 
        <li class="get_involved"><a href="/#left"></a></li> | 
        <li class="tickets"><a href="http://secure.theatreroyal.com/tickets/production.aspx?PID=308539"></a></li> | 
        <li class="contact"><a href="/index.php/twayf/contact"></a></li>
    </ul>
</div> 
```

我怀疑这是 FF11 在解析 html 后显示的内容。您可以通过使用 Firebug（或类似的）查看 html 来验证这一点

# php - 表单在 jquery 对话框 ui 之前提交

> ID：10418155
> 
> 赞同：0
> 
> 时间：2012-05-02T16:47:00.033
> 
> 标签：php, jquery, jquery-ui

我有这个 openid 插件，但是当我点击 aol 时，对话框会打开，很快它就会自动关闭并提交表单。我希望它在对话框打开时停止，并且只有在我关闭对话框时才提交表单

请帮帮我

```
(function($){
  $.fn.openid = function() {
    $('input').click(function(e){
      var provider = $(this).attr('class');
     if (provider == 'aol') {
        $("#dialog").dialog();  
         }
     else{
      var provider_url = $(this).attr('id');  //get id
      var myinput = $('<input type="hidden" name="provider_url"/>').val(provider_url);
        }  
        $('form').append(myinput);
      $('form').submit();
    })
  }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:51:14.840

添加`e.stopPropogation();`到`click`事件处理程序的第一行以防止发生正常的表单提交。

# android - 有什么方法可以加快monkeyrunner 脚本的执行速度吗？

> ID：10418156
> 
> 赞同：2
> 
> 时间：2012-05-02T16:47:00.173
> 
> 标签：android, python, perl, jython, monkeyrunner

我有一个特定的 monkeyrunner 脚本（在 Jython 中），我用它来截取屏幕截图或触摸特定的坐标。我的主程序是用 Perl 编写的——它只是在需要其功能时执行 monkeyrunner 脚本。
问题在于这种方法的缓慢：每次在 monkeyrunner 脚本中我都应该得到一个 MonkeyDevice 对象并使用它：

```
device = MonkeyRunner.waitForConnection() 
```

整个操作似乎需要 5 到 9 秒，这对我的程序来说非常慢。
有什么方法可以更快地工作（至少，触摸坐标）？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T01:08:52.243

您可以在子进程中运行它并使用普通的 Python 函数（例如 raw_input）让它等到您需要做某事时，而不是每次需要运行脚本时都重新启动 MonkeyRunner。

这将为您节省每次需要做某事时重新启动 MonkeyRunner 的开销。您甚至可以使用此方法为 MonkeyRunner 提供您尝试执行的操作。

# c# - Gridview 文本框多行仅适用于一种情况

> ID：10418160
> 
> 赞同：0
> 
> 时间：2012-05-02T16:47:10.073
> 
> 标签：c#, asp.net, datagridview

我是 asp.net 的新手，我有一个特殊问题，

我必须从一些数据库值加载一个gridview ...

我的gridview中有2列，一列是标签，一列是文本框..

对于标签中的特殊值，文本框应该是多行的..对于其他情况，文本模式应该是单行...

有人可以帮我解决这个问题吗？

PS：如果我的问题不清楚，请告诉我，我可以解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:04:50.017

您可以使用[GridView.RowDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

然后找到值，如果匹配，您可以更改属性`TextMode`

```
protected void GVRowDataBound(object sender, GridViewRowEventArgs e)
        {
            var txb= (TextBox) e.Row.FindControl("TextBoxID"); 

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:56:14.420

您说的是新的，所以如果您不知道如何将绑定字段转换为模板字段，请按照以下教程进行操作：

[教程](http://msdn.microsoft.com/en-us/library/bb288032.aspx)

一旦你转换为模板文件，然后在 RowDataBound 上这样做：

```
void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
foreach (GridViewRow gRow in GridView1.Rows)
{
TextBox myfieldtxt = gRow.FindControl("yourTxtBxID") as TextBox;
Label myLable = gRow.FindControl("yourLableID") as Label;

if(myLable.Text.Equals("XYZ"))
{
  myfieldtxt.TextMode = TextBoxMode.MultiLine;
}
else
{
 myfieldtxt.TextMode = TextBoxMode.Single;
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T16:49:18.787

你可以这样试试：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" ReadOnly="True" Text='Sometext'
            TextMode="MultiLine"></asp:TextBox>
    </ItemTemplate>
</asp:TemplateField> 
```

# php - Wordpress 自定义插件 - 顶级管理菜单中的 PHP 文件上传器 - 找不到页面 404

> ID：10418162
> 
> 赞同：2
> 
> 时间：2012-05-02T16:47:19.350
> 
> 标签：php, file-upload, wordpress

这是我真正需要完成的第一个自定义 Wordpress 插件。整晚都在这里，无法弄清楚出了什么问题……我假设我缺少标准插件编码的一些简单和基本的东西。

我编写了一个插件，允许在管理仪表板中使用顶级菜单项。它是一个简单的 PHP 上传表单。我要做的就是让客户端将 CSV 文件上传到特定文件夹。我刚刚在 wordpress 框架之外测试了 PHP 代码并且它可以工作......但是当我尝试使用实际的 wordpress 管理员上传文件时，我按下提交并且它没有上传文件它也将我发送到“找不到页面404"... 最重要的是，当我在生产站点上激活插件时，它会导致错误和一些小故障...所以我假设我只是在插件 php 文件中丢失了一些我需要的代码。

这是我的插件主 php 文件的完整代码 - 减去处理所有“上传代码”的单独 php 文件

```
<?php
/*
Plugin Name: Points Uploader
*/
?>

<?php
add_action( 'admin_menu', 'sheets_plugin_menu' );

function sheets_plugin_menu() {
add_menu_page( 'Upload Points Sheets', 'Upload Points', 'manage_options', 'upload-   points-sheets', 'sheets_plugin_page', '', 10);
 }

function sheets_plugin_page() {
if ( !current_user_can( 'manage_options' ) )  {
wp_die( __( 'You do not have sufficient permissions to access this page.' ) );
}
echo '<div class="wrap">';
echo '<h1>Upload Points Sheets</h1>';
?>

<form action="uploader.php" method="post" enctype="multipart/form-data">
<label for="file">Select a file:</label> <input type="file" name="userfile" id="file">    
<br />
<button>Upload File</button>
</form>

<?php
echo '</div>';
}
?> 
```

那么我需要在这个 php 页面中添加什么来使它成为一个更“标准”的操作插件呢？当我按下提交按钮时，就像我错过了“wordpress 发送”代码，它只是 404，我不知道如何让它在管理屏幕字段中运行。感谢您提供的任何帮助，我真的很难过。;)

...好的，以防万一这里需要的是 uploader.php 文件。只是我在网上找到的用于测试的示例代码。

```
<?php
// Configuration - Your Options
$allowed_filetypes = array('.csv'); // These will be the types of file that will pass the validation.
$max_filesize = 524288; // Maximum filesize in BYTES (currently 0.5MB).
$upload_path = './upload/'; // The place the files will be uploaded to (currently a 'files' directory).

$filename = $_FILES['userfile']['name']; // Get the name of the file (including file extension).
$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); // Get the extension from the filename.

// Check if the filetype is allowed, if not DIE and inform the user.
if(!in_array($ext,$allowed_filetypes))
die('The file you attempted to upload is not allowed.');

// Now check the filesize, if it is too large then DIE and inform the user.
if(filesize($_FILES['userfile']['tmp_name']) > $max_filesize)
die('The file you attempted to upload is too large.');

// Check if we can upload to the specified path, if not DIE and inform the user.
if(!is_writable($upload_path))
die('You cannot upload to the specified directory, please CHMOD it to 777.');

// Upload the file to your specified path.
if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $filename))
echo 'Your file upload was successful, view the file <a href="' . $upload_path . $filename . '" title="Your File">here</a>'; // It worked.
else
echo 'There was an error during the file upload.  Please try again.'; // It failed :(.

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:32:45.807

作为在 WordPress 中使用自定义上传器的新手，我不知道我会得到多少帮助。但我确实知道一件事：它可能是 404-ing，因为您的表单操作是“uploader.php”。这不会飞（除非您的 uploader.php 文件位于服务器的根目录中） - WordPress 不能很好地使用相对路径。我很确定您需要使用类似`plugin_dir_url() . '/uploader.php'`或`plugin_dir_path() . '/uploader.php'`

您还必须记住，有些服务器在上传文件时对于使用服务器路径还是 http 路径非常挑剔。很多时候，当我上传时，我必须确保我使用的是服务器路径到我将文件放入的文件夹（你在那里又有一个相对路径=“./upload/”。在某些情况下, 它只喜欢 http 路径。因此，就这一点而言，这是很多试验和错误（无论如何对我来说）。

就像我说的，不知道它是否有很大帮助，但也许这只是从相对路径到绝对路径的简单切换？

# javascript - 用 JavaScript 更改 href

> ID：10418165
> 
> 赞同：1
> 
> 时间：2012-05-02T16:47:28.770
> 
> 标签：javascript, sharepoint-2003

我正在尝试将单击事件添加到 SharePoint 中的链接。SharePoint 设置的当前 href 是`href="javascript:ClickOnce()"`. 如果我添加以下代码：

```
var saveNclose = document.getElementById("diidIOSaveItem");
saveNclose.href = "javascript:JSEPreSaveAction()";
alert(saveNclose.href); 
```

警报输出我试图获取的 href，`javascript:PreSaveAction()`但是当我在页面中查看它时，它仍然是`ClickOnce()`.

为什么警报告诉我 href 是一回事，而源代码和行为说是另一回事？是否有什么原因导致 SharePoints 脚本优先于我的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:50:41.400

```
document.getElementById("diidIOSaveItem").setAttribute("href", "javascript:JSEPreSaveAction()");

alert( document.getElementById("diidIOSaveItem").getAttribute("href") ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:31:06.920

我可以通过添加一个计时器来做到这一点，以便在页面加载完成后 10 秒将 PreSaveAction() 添加到按钮。

# c# - 使用 Linq 来做：编译对象列表中所有列表的列表

> ID：10418183
> 
> 赞同：0
> 
> 时间：2012-05-02T16:48:23.823
> 
> 标签：c#, linq

我确信 Title 很清楚，所以让我举个例子，看看是否有人能指出我正确的方向：

```
public class topObj
{
    public List<midObj> Mids { get; set; }
    public List<botObj> Bots { get { // do some LINQ magic here } }
}
public class midObj
{
    public List<botObj> Bots { get; set; }
}
public class botObj
{
} 
```

因此，从顶部对象中，我试图从顶部对象的 List<> 中的任何中间对象的 List<> 中获取所有底部对象的列表。

现在我有这样的事情：

```
public List<botObj> Bots
    {
        get
        {
            List<botObj> lst = new List<botObj>();
            foreach (midObj mo in Mids)
            {
                lst.AddRange(mo.Bots);
            }

            return lst;
        }
    } 
```

当然，它可以工作，但我必须假设 LINQ 有一种方法可以用更少的行来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:50:47.127

```
 get { return Mids.SelectMany(mid => mid.Bots).ToList(); } 
```

我也至少会考虑只返回`IEnumerable<botObj>`而不是 a `List`，这样您只需花费精力评估所有内容并将其放入列表中（如果您真的需要）。但是，如果您通过使用列表知道自己在做什么，请随时忽略此评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:55:01.640

你将不得不做这样的事情：

```
get{ Mids.SelectMany(x => x.Bots).ToList(); } 
```

希望能帮助到你！

# asp.net - 我的服务层中的服务是否应该存在于单独的项目/DLL/程序集中？

> ID：10418186
> 
> 赞同：2
> 
> 时间：2012-05-02T16:48:29.180
> 
> 标签：asp.net, asp.net-mvc-3, soa, service-layer

我有一个我目前正在开发的 ASP.NET MVC 3 应用程序。我正在实现一个服务层，它包含业务逻辑，并由控制器使用。服务本身使用存储库进行数据访问，存储库使用实体框架与数据库通信。

所以从上到下是：控制器 > 服务层 > 存储库（每个服务层都依赖于一个可注入的存储库）> 实体框架 > 单个数据库。

我发现自己正在制作诸如 UserService、EventService、PaymentService 等项目。

在服务层，我将有如下功能：

*   `ChargePaymentCard(int cardId, decimal amount)`（支付服务的一部分）
*   `ActivateEvent(int eventId)`（事件服务的一部分）
*   `SendValidationEmail(int userId)`（用户服务的一部分）

此外，作为我使用它的第二个地方的示例，我有另一个简单的控制台应用程序，它作为计划任务运行，它利用这些服务*之一*。还有一个即将推出的第二个 Web 应用程序需要使用其中的*多个*服务。

此外，我想让我们对拆分事物（例如我们的单个数据库）保持开放态度，并在未来转向面向服务的架构，并将其中的一些分解为 Web 服务（甚至可能被非-.NET 应用程序有一天）。我一直在睁大眼睛寻找可能使向 SOA 的飞跃在未来不那么痛苦的步骤。

**我已经开始为每个服务创建一个单独的程序集 (DLL)，但我想知道我是否开始走错了路。我正在尝试保持灵活性并保持松散耦合，但这条路径对我有任何帮助（朝向 SOA 或一般来说），还是只是增加了复杂性？我是否应该创建一个包含整个服务层的单个程序集/dll，并在需要使用任何服务的地方使用该单个程序集？**

我不确定我开始的路径的含义，所以对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:18:48.517

IMO - 答案是它取决于您的应用程序的很多因素。

假设您正在构建一个重要的应用程序（即不是学习 SOA 的大学/爱好项目）：

*   *用户服务/事件服务/支付服务* ——如果有多个应用程序使用该服务，并且如果将 DLL 共享给不同的应用程序风险太大，则创建自己的 DLL 并将其公开为 WCF 服务
    ——这些服务应该彼此之间没有相互依赖关系，应该专注于各自的领域
    ——注意：这些服务可能共享一些常见的服务，如日志记录、身份验证、数据访问等。

*   *创建一个组合服务* ——该服务将对所有其他服务的调用进行组合
    ——例如：如果您有一个订单并且业务流程是该订单 > 确认用户存在（用户服务）> 提出一个订单event (Event Service) > Confirm Payment (Payment Service)
    -- 所有此类服务调用的组合都可以在这一层处理
    -- 同样，根据环境，您可以选择将此服务公开为它自己的 DLL 和/或公开它作为 WCF
    - 注意：这是唯一一个共享对其他服务的引用的服务，并且将是单点组合

现在 - 使用此布局 - 如果您想单独与该服务交互，您将可以选择直接调用服务，如果您需要一个需要组合不同服务来完成的业务工作流程，则需要调用组合服务交易。

作为起点，我建议您阅读任何有关 SOA 架构的书籍——这将有助于理清很多概念。

我试图尽可能简短以保持这个答案有意义，有很多方法可以做同样的事情，这只是可能的方法之一。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:57:21.317

每个服务都有一个 DLL 听起来是个坏主意。[根据 Microsoft 的说法，由于性能影响（从这里](http://msdn.microsoft.com/en-us/library/ms998530.aspx)通过[这篇文章](https://stackoverflow.com/questions/337144/does-net-assembly-size-affect-performance)），您希望在多个较小的程序集上拥有一个大型程序集。

我会将您的基础或核心服务拆分为一个单独的项目，并将大部分（如果不是全部）服务保留在其中。根据您的需求，您可能拥有仅在 Web 项目或控制台应用程序上下文中有意义的服务，而在其他任何地方都没有。这些服务不应该是“核心”服务层的一部分，应该驻留在相应的项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:19:20.757

最好将服务与消费者分开。在我们的项目中，我们有两个层次的分离。我们曾经将所有服务接口组合到一个 Visual Studio 项目中。所有服务实现都被分组到另一个项目中。服务的使用者需要引用两个 dll，但它使解决方案更具可维护性和可扩展性。我们可以有多种服务实现。例如，服务接口可以在接口项目中为 WebSearch 定义合同。并且可以通过不同的搜索服务提供商（如 Google 搜索、Bing 搜索、Yahoo 搜索等）实现 WebSearch 的多种实现。

# ruby-on-rails - 如何向 has_many 集合添加方法

> ID：10418193
> 
> 赞同：1
> 
> 时间：2012-05-02T16:48:52.467
> 
> 标签：ruby-on-rails

假设一个典型的 has_many 关联

```
class Customer < ActiveRecord::Base
  has_many :orders
end

class Order < ActiveRecord::Base
  belongs_to :customer
end 
```

如何向订单集合添加方法？为了代码组织，我试图在我的`Customer`类中反应这个方法（这是一个虚构的例子）：

```
def update_orders
  ThirdPartyAPI.look_up(self.orders) do |order|
    # Do stuff to the orders
    # May need to access 'self', the Customer...
  end
end 
```

我不喜欢这样，因为它`Order`在我的`Customer`课堂中加入了很多关于课堂的知识。我不能使用订单的实例方法，因为 ThirdPartyAPI 可以对多个订单进行批量查找。我可以制作一个静态方法`Order`并传入订单数组及其父客户，但这感觉很笨拙。

我在[rails docs](http://guides.rubyonrails.org/association_basics.html#association-extensions)中找到了这个，但我找不到任何关于如何在实践中使用它的好例子。还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:50:30.523

我认为这应该这样做

```
has_many :entities do
  def custom_function here

  end

  def custom_function here

  end 
end 
```

# wordpress - 如何实现 Wordpress 分页？

> ID：10418198
> 
> 赞同：0
> 
> 时间：2012-05-02T16:49:11.810
> 
> 标签：wordpress

我正在尝试为我的帖子实现分页。虽然我有点卡在 php 函数以及如何调用它。

我猜这个简单的方法是：

```
<?php posts_nav_link(); ?> 
```

但是如果我想要自定义分页怎么办？

这是我当前的代码：

```
<?php 
    global $wp_query;
    $total = $wp_query->max_num_pages;
    if ( $total > 1 )  {
         if ( !$current_page = get_query_var('paged') )
              $current_page = 1;
         echo paginate_links(array(
              'base' => get_pagenum_link(1) . '%_%',
              'format' => '?paged=%#%',
              'current' => $current_page,
              'total' => $total,
              'mid_size' => 4,
              'type' => 'list'
         ));
    }
?> 
```

这是正确的，我该怎么称呼它？在 index.php 中？在哪里循环？谢谢。

编辑澄清：如何实现此代码？目前我已经把它放在我的functions.php中。那么我如何（以及在​​循环中的哪个位置）“引用”这个函数以便显示分页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T20:16:39.937

有两种方法可以实现此代码。看起来你现在介于两者之间。

第一种方法是将您的分页代码直接添加到模板中，它将在循环内的某个地方使用（很可能是在结束`<?php endwhile; ?>`标记之前的某个地方）。如果您使用的是 single.php 模板，则将其放入其中，如果没有，请将其放入 index.php。将其放置在循环内取决于您希望分页出现在页面上的位置。

第二种方法是将分页代码添加到 functions.php 文件（您已经完成）。但是，您需要为此修改代码。您需要将代码包装在一个函数中，并为该函数命名。我用过`your_custom_pagination`一个例子。您的 functions.php 文件很可能已经包含在 php 标记中，因此我已将其删除。

```
function your_custom_pagination() {
    global $wp_query;
    $total = $wp_query->max_num_pages;
    if ( $total > 1 ) {
        if ( !$current_page = get_query_var('paged') ) {
            $current_page = 1;
        }
        echo paginate_links(array(
            'base' => get_pagenum_link(1) . '%_%',
            'format' => '?paged=%#%',
            'current' => $current_page,
            'total' => $total,
            'mid_size' => 4,
            'type' => 'list'
        ));
    }
} 
```

然后，您需要进入您正在使用的模板，并将此代码`<?php your_custom_pagination(); ?>`放入我上面说明的同一位置以调用分页函数。

我还没有真正测试过你的代码，所以假设它是有效的，一切都应该工作。

# c++ - 使用智能指针管理缓冲区

> ID：10418199
> 
> 赞同：3
> 
> 时间：2012-05-02T16:49:14.150
> 
> 标签：c++, c++11, shared-ptr, smart-pointers, unique-ptr

我最近开始将许多现有的类迁移到使用智能指针，我有一些关于如何移植一些我认为可以从使用智能指针中受益的代码的问题（但我当然可能错了）。我通过其头文件有一个**UtlMemBuffer**缓冲区管理器类，如下所示。

本质上，这个类拥有一个由 void*/length 对组成的缓冲区向量。缓冲区管理是通过辅助方法实现的（**UtlMemBuffer::append** - 其实现也如下所示）。

我想让这个类使用新的**C++11**智能指针，以便可以很好地定义所有权并最小化重新分配。要使用此类，客户端代码通常将其自己的原始指针缓冲区/长度传递给构造函数，或者它可以调用 append。最终，当**UtlMemBuffer**的析构函数被调用时，它会释放自己的副本，确保在调用者负责其副本时没有内存泄漏。我认为，与其传入原始指针，不如使用**std::shared_ptr**将消除对这种类型的双缓冲区所有权的需要（即调用者将负责更新**std::shared_ptr**并将其传递给**UtlMembuffer**。

我看到的最大挑战是支持读取方法（接口类似于文件的工作方式），我需要通过原始指针传回扁平内存。也许更好的设计方法是让我传回一个 std::unique_ptr，它是通过展平 shared_ptrs 的内部集合创建的。我不太确定最好的方法是什么，尽管我必须更改相当多的当前代码，这些代码使用该类来采用这种方法。

调用者是否都应该传入**std::shared_ptr**指针。我想知道进行这种转换的最佳方法是什么。

我对这个智能指针业务很陌生，所以任何建议都将不胜感激。谢谢

```
/**
 * Smart Buffer class
 */
class UtlMemBuffer
{
public:
    // default constructor
    UtlMemBuffer(
        const UtlPath& rBufferPath = UtlPath::ssNull,
        const void* pBytes = NULL,
        const size_t& rBufLength = 0);

    // copy constructor
    UtlMemBuffer(const UtlMemBuffer& rhs);

    // move constructor
    UtlMemBuffer(UtlMemBuffer&& rhs);

    inline void swap(UtlMemBuffer& rhs) throw() {
        // enable ADL (not necessary in our case, but good practice)
        using std::swap;
        // no need to swap base members - as we are topmost class
        swap(mBufferPath, rhs.mBufferPath);
        swap(mBufferLength, rhs.mBufferLength);
        swap(mBufferBlocks, rhs.mBufferBlocks);
    }

    // unified assignment operator
    UtlMemBuffer& operator=(UtlMemBuffer rhs);

    // destructor - pure virtual
    virtual ~UtlMemBuffer();

    // add buffer to this one
    virtual OsStatus append(
        const void* pBytes,
        const size_t& rBufLength,
        size_t& rBufLengthWritten);

    // comparator
    bool operator==(const UtlMemBuffer& rhs) const;

    // comparator
    bool operator<(const UtlMemBuffer& rhs) const;

    // determine the size of the buffer
    size_t size() const;

    /**
     * comparable interface
     *
     * @returns 0 if equal, negative val if less than &
     *          negative value if greater.
     */
    virtual int compareTo(const UtlMemBuffer& rhs) const;

    /** copy the bytes into the designated buffer */
    OsStatus read (void* pReturnBuffer,
        const size_t& rMemBufferOffset,
        const size_t& rReturnBufferLength,
        size_t& rBytesRead) const;

    // free existing linked list of blocks
    void clear();

    // path property
    void setBufferPath(const UtlPath& rBufferPath);

    UtlPath getBufferPath() const;

private:
    typedef std::vector< std::pair<void*, size_t> > MemBufInfo;

    // the name of the buffer (sort of file name)
    UtlPath mBufferPath;

    // this is updated whenever we append data
    size_t mBufferLength;

    // here we have a collection of received appends (effectively blocks)
    MemBufInfo mBufferBlocks;
}; 
```

这是管理对缓冲区块向量的访问的辅助方法。如您所见，它重新分配原始指针并将它们存储在**mBufferBlocks**成员中。

```
OsStatus
UtlMemBuffer::append(const void* pBytes,
    const size_t& rBufLength,
    size_t& rBytesWritten)
{
    rBytesWritten = 0;
    if (pBytes != NULL) {
        void* block = new char [rBufLength];
        memcpy(block, pBytes, rBufLength);
        mBufferBlocks.push_back(std::make_pair(block, rBufLength));
        rBytesWritten = rBufLength;
        mBufferLength += rBufLength;
    }
    return OS_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:16:54.677

如果作者像往常一样简单地使用 char* 来表示内存字节，那么您可以简单地存储向量而不是成对的 void*/len。

这就是我可能会在这里做的事情。假设您不必对此内存空间中的对象进行任何实际破坏，只需转换为 char* 并粘贴在向量中。

# .htaccess - symfony 2 中的 no_script_filename 配置

> ID：10418200
> 
> 赞同：0
> 
> 时间：2012-05-02T16:49:14.230
> 
> 标签：.htaccess, symfony

我们需要在 symfony1.4 中将一些东西配置为 no_script_name，但在 symfony 2 中将其配置为“On”。我们寻找这个 var 但在项目中没有找到这个词。

我们可以配置在 symfony 2 中不显示 app.php 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:51:03.980

Symfony 默认不显示它。

# macos - Mac 中带有 JAR 的 FileNotFoundException

> ID：10418205
> 
> 赞同：0
> 
> 时间：2012-05-02T16:49:29.060
> 
> 标签：macos, file, filenotfoundexception

我正在尝试制作一个从 jar 中访问文件的 java 程序。我有代码

```
private static final File LOCK_FILE = new File("src/version2/LOCK"); 
```

当我单独运行文件时，它工作正常。但是当我在 Netbeans 中“清理并构建”并尝试运行 jar 时，我收到了 FileNotFoundException。在清理和构建此文件后，我将如何引用它？顺便说一句，我正在使用Mac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:11:56.883

事实证明，在 JAR 中写入文件几乎是不可能且不切实际的。有时它很有用，但可以通过将文件写入已知目录来解决。

# django - Django：无法让 django-admin.py 运行任何东西

> ID：10418209
> 
> 赞同：2
> 
> 时间：2012-05-02T16:49:38.927
> 
> 标签：django

系统：Windows 7x64

Django v. 1.4

Python v. 3.2

第一次使用 Django 或 python，我正在把头撞到墙上。我已经根据安装说明为 Django 安装了所有东西。我跳过的唯一步骤是“可选”virtualenv 安装。

我正在尝试在 djangoproject.com 上运行教程，但我无法让 startproject 工作。这是我的问题。

当尝试使用 'django-admin.py startproject mysite' 甚至只是 'django-admin.py help' 功能时，我得到以下信息：

> Traceback（最近一次调用最后一次）：
> 文件“C:\Python32\Scripts\django-admin.py”，第 2 行，在
> 
> 从 django.core 导入管理文件“C:\Python32\lib\site-packages\django\core\management__init__.py”，第 54 行
> 
> 除了 ImportError,e:
> ^ SyntaxError: invalid syntax

^ 指向逗号的地方。

我已经检查了我所在文件夹的权限，那里的一切似乎都很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:52:10.253

Django 不适用于 Python 3（目前）。

改为安装 2.7。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:18:38.283

您可能还坚持使用 Python 3.X 并获得当前处于 beta 阶段的[django 1.5 。](https://docs.djangoproject.com/en/dev/releases/1.5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T17:18:54.883

Python 3.3 提供实验性支持。django-admin.py 仍然无法正常运行，但这里有一个解决方法：

您可以直接从您自己的 python 脚本中调用 django-admin 子命令。

```
from django.core import management    
management.call_command("startproject", "mysite") 
```

几乎所有其他事情都应该从它生成的 manage.py 文件中完成，它应该可以正常工作：

```
python manage.py runserver 
```

或您正在寻找的任何命令。您也可能使用“python33”而不是 python。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T16:56:18.107

一般答案：该语法行在 Python 3.2 中无效（Django[尚不适用于 Python 3](https://docs.djangoproject.com/en/dev/faq/install/#can-i-use-django-with-python-3)）。[这是您可以与特定版本的 Django 一起使用的 2.x 版本的列表](https://docs.djangoproject.com/en/dev/faq/install/#what-python-version-can-i-use-with-django)。

具体答案：根据[PEP-3110](http://www.python.org/dev/peps/pep-3110/)，异常的语法在 Python 3 中从 更改为`except Exception, e`，`except Exception as e`这就是出现该错误的原因。

# android - Android：动画门

> ID：10418212
> 
> 赞同：0
> 
> 时间：2012-05-02T16:49:43.397
> 
> 标签：android, animation

当用户进入系统时，我想做开门动画。例如在下图中：![在此处输入图像描述](../Images/7ee56f2e5259f554c1548e0c9e389c1c.png)

当用户按下回车键时，门应该打开。

但我该怎么做？根据我的搜索，也许顺序图像可以解决它。但任何想法都会很棒。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:29:54.630

从 android 演示中查找**Rotation 3D演示。**

在此它使用**180 度。**

但是对于您的问题，为左侧门创建**两个门的传出图像。**一个用于右侧门。

将动画设置为**90 度。**

希望这会帮助你。

编辑：API 演示链接...

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Transition3d.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Transition3d.html)

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html)

# c# - 打印控件

> ID：10418215
> 
> 赞同：3
> 
> 时间：2012-05-02T16:50:07.173
> 
> 标签：c#, printing, controls

我想知道是否有一种简单的方法可以将 C# 中的任何控件打印到打印机。我的具体示例是尝试将 TableLayoutPanel 打印到收据上（因此我不必担心分页符或其他任何事情），但我希望能够打印出发送给我的任何可见对象。现在我必须创建一个位图，然后做一个 TableLayoutPanel.DrawToBitmap，但这似乎非常低效，因为我已经有了用于打印的 Graphics 对象，应该有一个简单的方法来做到这一点.. 谢谢！

编辑：我注意到有一个“ControlPaint.Draw__”，但是它没有很多可以绘制的控件（它有边框、按钮、复选框、组合框）..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:58:07.063

```
private static void PrintControl(Control control)
{
    var bitmap = new Bitmap(control.Width, control.Height);

    control.DrawToBitmap(bitmap, new Rectangle(0, 0, control.Width, control.Height));

    var pd = new PrintDocument();

    pd.PrintPage += (s, e) => e.Graphics.DrawImage(bitmap, 100, 100);
    pd.Print();
} 
```

它仍在使用 DrawToBitmap，但它是你会得到的最优雅的。

它非常简洁、易读且效率不低，所以我看不出有什么理由不喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T17:32:45.230

我对我自己的问题有一个答案，这个答案与我之前的方向有些不同。在 WPF 中，您可以将控件绘制到任何表面，因此我创建了一个“FlowDocument”对象并添加了“段落”，其中包含网格、图像以及我需要显示的任何其他内容。我会将另一个答案标记为已接受，但我想我会添加这个，以防有人对我最终走向的方向感兴趣。

```
FlowDocument flowDoc = new FlowDocument();

Paragraph header = new Paragraph();
Grid imageGrid = new Grid();
imageGrid.ColumnDefinitions.Add(new ColumnDefinition());
ColumnDefinition colDef = new ColumnDefinition();
colDef.Width = new GridLength(4, GridUnitType.Star);
imageGrid.ColumnDefinitions.Add(colDef);
imageGrid.ColumnDefinitions.Add(new ColumnDefinition());

BitmapImage bitImage = new BitmapImage(new Uri("{...}", UriKind.RelativeOrAbsolute));
Image image = new Image();
image.Source = bitImage;
image.Margin = new Thickness(10.0d);

Grid.SetColumn(image, 1);
imageGrid.Children.Add(image);

header.Inlines.Add(imageGrid);
header.Inlines.Add(new LineBreak());

header.Inlines.Add("Some text here");
header.Inlines.Add(new LineBreak());

flowDoc.Blocks.Add(header); 
```

并且应该有很多关于如何打印出 FlowDocument 的示例，但是如果需要，我总是可以在示例中添加更多内容。

# php - 无法获得扩展权限.. :( 像电子邮件

> ID：10418216
> 
> 赞同：0
> 
> 时间：2012-05-02T16:50:07.123
> 
> 标签：php, jquery, facebook, facebook-graph-api, connect

嗨，我设置了一个像下面这样的新闻 facebook 应用程序，但是当我调用身份验证对话框时，没有请求电子邮件，所以我没有得到任何信息..

[http://hpics.li/b91d453](http://hpics.li/b91d453)

任何想法 ？

我的脸书要求：

```
$data['get'] = array(
    'access_token'  => $access_token,
    'locale' => 'fr_FR',
    'req_perms' => 'email,user_about_me,user_birthday,user_location,publish_actions',
    'ext_perms' => 'publish_stream',
    'fields' => 'email,name,picture,first_name,last_name,gender,link,birthday,email,location'
); 
```

并且 PermissionDialog 不包含电子邮件和 req_prems .. 为什么？而且预览当前对话框与预览参考对话框（包含电子邮件等）不同。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:24:46.197

您使用的是哪个文档？2011 年 10 月，需要传递给 Auth 对话框以请求额外权限的参数更改为“范围”

有关权限信息，[请](https://developers.facebook.com/docs/authentication/)参阅[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/) ，有关如何进行身份验证，请参阅 https://developers.facebook.com/docs/authentication/

如果您正在执行服务器端身份验证，则将用户重定向到的 URL 是：

```
https://www.facebook.com/dialog/oauth/?
    client_id=YOUR_APP_ID
    &redirect_uri=YOUR_REDIRECT_URL
    &state=YOUR_STATE_VALUE
    &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES 
```

然后您使用 oauth 端点（所有这些都包含在上面的文档中）交换令牌的代码 - 您的服务器使用以下参数发出请求：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &client_secret=YOUR_APP_SECRET
   &code=CODE_GENERATED_BY_FACEBOOK_AND_SENT_TO_YOUR_APP_IN_EARLIER_STEP 
```

# mysql - SQL 行返回顺序

> ID：10418218
> 
> 赞同：10
> 
> 时间：2012-05-02T16:50:19.810
> 
> 标签：mysql, sql-server, oracle, sqlite, postgresql

直到最近我开始每天使用它时，我才很少使用 SQL。我注意到如果没有使用“order by”子句：

1.  选择表格的一部分时，如果我选择整个表格，返回的行似乎与它们出现的顺序相同
2.  从连接中选择返回的行的顺序似乎是由连接的最左边的成员决定的。

在最常见的数据库（MySql、Oracle、PostgreSQL、Sqlite、Sql Server）中，这种行为是一种可以指望的标准吗？（我什至不知道是否可以在 sqlite 中真正指望它）。如果是这样，它的尊重程度有多严格（例如，如果使用“分组依据”，各个组是否都有该排序）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T16:53:26.167

如果查询中不包含 ORDER BY 子句，则返回的行顺序未定义。

尽管即使省略了 ORDER BY 子句，某些 RDBMS 在某些情况下也会以特定顺序返回行，但绝不应依赖这种行为。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T16:53:32.320

[SQL-92 规范](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)的第 20.2 节 <直接选择语句：多行>，“一般规则”小节：

> ```
> 4) 如果 <order by 子句> 没有指定，那么
>    Q 的行是依赖于实现的。
> 
> ```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-02T16:56:22.473

如果您想要订购，请包含一个`ORDER BY`. 如果你不包括`ORDER BY`，你告诉 SQL Server：

***我不在乎您返回行的顺序，只需返回行***

由于您不在乎，SQL Server 将决定如何返回它认为*现在*可能最有效的方式（或根据上次缓存此特定查询的计划的时间）。因此，您不应依赖您观察到的行为。它可以从一次查询运行更改为下一次查询，包括数据更改、统计信息更改、索引更改、服务包、累积更新、升级等等等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T17:40:18.563

对于 PostgreSQL，如果您省略该`ORDER BY`子句，您可以在数据库未被修改的情况下运行完全相同的查询 100 次，并在中间以与其他顺序不同的顺序运行一次。事实上，每次运行的顺序可能不同。

发生这种情况的一个原因是，如果选择的计划涉及对表堆的顺序扫描，并且已经对该表的堆进行了 seqscan，那么您的查询将在另一个扫描已经在的任何点开始扫描，以减少对磁盘访问的需求。

正如其他答案所指出的那样，如果您希望数据按特定顺序排列，请指定该顺序。PostgreSQL 将在选择计划时考虑请求的顺序，并且可以使用按该顺序提供数据的索引，如果这样比以其他方式获取行然后对它们进行排序更便宜的话。

`GROUP BY`不提供订单保证；PostgreSQL*可能*对数据进行排序以进行分组，或者它*可能*使用哈希表并按照哈希算法生成的数字的顺序返回行（即非常随机）。这可能会从一次运行到下一次发生变化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T21:10:34.607

当我还是一名 DBA 时，我总是惊讶于 SQL 的这个特性经常被认为是古怪的。考虑一个针对文本文件运行并产生一些输出的简单程序。如果程序永远不会改变，数据永远不会改变，那么您会期望输出永远不会改变。

至于这个：

*如果查询中不包含 ORDER BY 子句，则返回的行顺序未定义。*

不完全正确 - 在我曾经使用过的每个 RDBMS（Oracle、Informix、SQL Server、DB2 等等）上，DISTINCT 子句也与 ORDER BY 具有相同的效果，因为查找唯一值涉及按定义进行排序。

**编辑（2014 年 6 月 2 日）：**

**创建一个简单的表**

![在此处输入图像描述](../Images/fba65656dbec24b7b45c50de4952a7a9.png)

**对于 DISTINCT 和 ORDER BY，计划和成本都是相同的，因为它表面上是要执行的相同操作**

![在此处输入图像描述](../Images/5c7835f1375db74e7f312d2d115a3f3e.png)

![在此处输入图像描述](../Images/77ea32218ad02bd109358398e8e6b6b3.png)

**毫不奇怪，效果是一样的**

![在此处输入图像描述](../Images/3c1767308eaf1bef837a5b08825d3c91.png)

# apache - Symfony2 - 重写 url 以添加带有现有 .htacess 文件的 www 前缀

> ID：10418222
> 
> 赞同：1
> 
> 时间：2012-05-02T16:50:29.760
> 
> 标签：apache, .htaccess, symfony, rewrite

Symfony2 核心配置带有以下 .htacess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

我知道这会从浏览器的 url 中删除 app.php。我想添加以下重写规则来添加 www。每次用户输入不带 www 的域名时访问我的网站。：

```
 RewriteCond %{HTTP_HOST} ^valutao\.com$ [NC]
    RewriteRule ^(.*)$ http://www.valutao.com/$1 [L,R=301] 
```

所以现在我有以下 .htacess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
    RewriteCond %{HTTP_HOST} ^valutao\.com$ [NC]
    RewriteRule ^(.*)$ http://www.valutao.com/$1 [L,R=301]
</IfModule> 
```

我的问题是 app.php 会再次出现。看来我的规则只是隐藏了基本配置。这是我输入 valutao.com 时 url 中显示的示例：[http ://www.valutao.com/app.php](http://www.valutao.com/app.php)

有人知道如何解决这个问题。不幸的是，我只有重写规则的基本知识。

感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:26:30.097

您只需要更改顺序（应该先进行 www 重写）。

我也会减少对域名的依赖：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

# c# - C# 等效于 db.repairDatabase()

> ID：10418230
> 
> 赞同：3
> 
> 时间：2012-05-02T16:50:42.187
> 
> 标签：c#, mongodb

有没有办法从 C# 驱动程序调用 MongoDB 的 db.repairDatabase() 函数？

我能够压缩收藏：

```
database.RunCommand(new CommandDocument("compact","collectionname")); 
```

但我没有设法调用repairDatabase。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:08:23.243

该`database.RunCommand`方法已重载。它还可以采用一个字符串作为命令的名称，如下所示：

```
database.RunCommand("repairDatabase") 
```

它还返回一个`CommandResult`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:12:11.657

在回应您收到消息“错误选项”异常的评论时，事实证明服务器对您使用 1 还是 true 作为 repairDatabase 字段的值很挑剔。以下两个是等效的，并且都失败了，因为服务器不喜欢“true”而不是“1”：

```
database.RunCommand("repairDatabase");
database.RunCommnad(new CommandDocument("repairDatabase", true)); 
```

但这有效：

```
database.RunCommnad(new CommandDocument("repairDatabase", 1)); 
```

如果这与您有关，您可以向服务器报告 JIRA：

[https://jira.mongodb.org/browse/SERVER](https://jira.mongodb.org/browse/SERVER)

# php - PHP如何处理变量？

> ID：10418231
> 
> 赞同：13
> 
> 时间：2012-05-02T16:50:44.730
> 
> 标签：php, c

多年来，我一直是一名 PHP 开发人员，但我不知道 PHP 如何在幕后处理变量及其类型的一个细节。我的意思是：在 PHP 中 - 理论上 - 我可以使用相同的变量来存储一个整数，然后是一个字符串，然后是一个布尔值，然后是一个数组......等等......

就个人而言，我讨厌这种“糟糕的”编程方式，但我想知道 PHP 如何按照我的要求存储和管理变量及其类型。我想象解释器在后面创建和处理 C 变量，但我不知道如何。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T16:56:01.850

在幕后，PHP 变量存储在“zval”结构中，该结构由变量可以存储的所有数据类型之间的联合组成（例如，long、double、字符串指针/长度、对象指针...)，以及联合之外的几个其他字段，它们指示它是哪种类型并跟踪引用计数。

对此有一些进一步的讨论：

[http://devzone.zend.com/317/extension-writing-part-ii-parameters-arrays-and-zvals/](http://devzone.zend.com/317/extension-writing-part-ii-parameters-arrays-and-zvals/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T16:57:12.963

如果我没记错的话，PHP 将为 PHP 中的每个变量在内存中启动几个变量：

```
$test = 0; 
```

翻译为...

```
int test = 0;
float test = 0;
char test = 0;
bool test = false;
pointer test = null;
... 
```

# php - Codeigniter $_GET 验证，XSS 问题

> ID：10418233
> 
> 赞同：1
> 
> 时间：2012-05-02T16:50:48.937
> 
> 标签：php, codeigniter, get, xss

我的站点中基于 CodeIgniter 构建的 XSS 漏洞存在问题。

我确实有`$config['global_xss_filtering'] = TRUE;`，如下所示，我还设置了`,TRUE`参数以强制它过滤 XSS。

我输入我的输入`"<h1>test"`和`var_dump($parameters['query']);`输出：

```
string(10) ""
data"" 
```

上述输出的问题是断线，为什么会发生这种情况？

大批：

```
 $parameters = array(
        'query'     => $this->input->get('search_query', TRUE),
        'page'      => !empty($page) ? $page : 1,
        'sort'      => !empty($sort) ? $sort : 'relevance',
        'filter'    => $this->input->get('search_filter', TRUE),
        'action'    => $action,
        'view'      => $action.'sPage'
    ); 
```

## 更新：

这是我在查看源代码中看到的：`"<h1>data"`

# python - 矩阵中单元之间连接的交互式可视化

> ID：10418236
> 
> 赞同：3
> 
> 时间：2012-05-02T16:51:10.303
> 
> 标签：python, matplotlib, traits, chaco

我已经使用 matplotlib 绘制了一个矩阵。我想知道是否可以使用一些工具包/模块对该图产生一些交互性。

根据我们的分析，我们先验地知道矩阵的哪个单元与其他单元相连。我们想要做的是当用户用鼠标指针将鼠标悬停在矩阵单元上时，它应该通过（指针或任何其他方式）突出显示它连接到的其他单元格。它是一种图形数据结构，但我希望用户获得交互式体验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:01:19.633

Matplotlib 有一个[事件处理 API](http://matplotlib.sourceforge.net/users/event_handling.html)，您可以将其用于交互式图形。

下面的示例脚本使用`matshow`. 矩阵的值是彩色编码的。

您可以在连接字典中设置连接：键是要为其添加连接（作为元组）的矩阵位置，连接在连接点列表中给出（再次作为元组）。

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib import patches

class MatrixBrowser(object):

    def __init__(self, matrix, matrix_ax, connections):
        self.matrix = matrix
        self.matrix_ax = matrix_ax
        self.con = connections
        self.index = (0, 0)
        self.rect = patches.Rectangle((0, 0), 1.1, 1.1,
                    linewidth=3, fill=False, visible=False)
        self.con_rects = self.add_connection_rects()

    def add_connection_rects(self):
        max_cons = max([len(_) for _ in self.con.values()])
        rects = []
        for con in range(max_cons):
            con_rect = patches.Rectangle((0, 0), 1.1, 1.1, linewidth=5,
                        fill=False, visible=False, edgecolor='red')
            rects.append(con_rect)
            self.matrix_ax.add_patch(con_rect)
        return rects

    def update_connections(self, event):
        current_ax = event.inaxes
        cx = event.xdata
        cy = event.ydata
        # only if the cursor is on the matrix ax
        if current_ax == self.matrix_ax:
            rx = round(abs(cx))
            ry = round(abs(cy))
            if not self.index == (rx, ry):
                # make every previous rect invisible
                for rect in self.con_rects:
                    rect.set_visible(False)
                cons = self.con.get((rx, ry), [])
                for rect, con in zip(self.con_rects, cons):
                    rect.set_xy((con[0] - 0.55, con[1] - 0.55))
                    rect.set_visible(True)
                self.index = (rx, ry)
            self.rect.set_visible(True)
            self.rect.set_xy((rx - 0.55, ry - 0.55))
        else:
            self.rect.set_visible(False)
        plt.draw()

def main(matrix, connections):
    fig, ax = plt.subplots()
    im = ax.matshow(matrix, aspect='auto', cmap=plt.cm.winter)
    plt.colorbar(im, use_gridspec=True)
    browser = MatrixBrowser(matrix, ax, connections)
    ax.add_patch(browser.rect)
    fig.canvas.mpl_connect('motion_notify_event', browser.update_connections)
    plt.tight_layout()
    plt.show()

if __name__ == '__main__':
    matrix = np.random.rand(15, 15) * 10
    connections = {(0, 0): [(1, 1), (2, 2), (10, 2), (8, 5)],
                   (3, 2): [(3, 3)],
                   (14, 14): [(0, 0), (0, 14), (14, 0)]}
    main(matrix, connections) 
```

为了给你一个印象，我添加了一个屏幕截图。黑色矩形随着鼠标光标移动，如果当前鼠标位置存在连接，则会出现红色矩形。

在此屏幕截图中，光标位于`(0, 0)`矩阵中的点上。由于为此点定义了一个连接（请参阅连接字典：）`(0, 0): [(1, 1), (2, 2), (10, 2), (8, 5)]`，因此定义的连接用红色矩形突出显示。

![结果图](../Images/0ae90b0ef47dcb25b7f71aac0f1728fc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T18:33:42.563

例如，您可以将 gtk 与 matplotlib 一起使用以使其成为应用程序。那里有很多教程（[这里有一个](http://www.freesbi.ch/en/python/plot-gtk)）。如果您选择 gtk，您可以将侦听器连接到对鼠标运动作出反应的 matplotlib-widget。该侦听器的回调函数将获得一个事件，该事件将具有图形画布上鼠标位置的坐标以及您正在绘制的数据空间 (`event.ydata`和) 中的坐标。`event.xdata`

至于悬停效果，使用补丁（matplotlib）可能是一种解决方案，如果您希望它们位于图表顶部，或者您可以将信息放在 gtk 中的另一个小部件中。

一些代码在路上（编写整个应用程序有点太多了，也就是说它不会做太多但会产生一些错误来复制和粘贴它们）。

```
from matplotlib.backends.backend_gtk import FigureCanvasGTK as FigureCanvas

self.image_fig = plt.Figure(figsize=figsize, dpi=75)
image_plot = self.image_fig.add_subplot(111)
image_canvas = FigureCanvas(self.image_fig)
self.image_fig.canvas.mpl_connect('motion_notify_event', self.plot_drag
self.plots_vbox.pack_start(image_canvas, False, False, 2) 
```

最后，一旦您更新了绘图，您需要重新绘制画布。在我的示例行中，我会这样做

```
self.image_fig.canvas.draw() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T18:19:27.947

matplotlib 有一些较低层的 API 和钩子，您可以使用它们来为绘图添加交互性。[API 示例](http://matplotlib.sourceforge.net/examples/index.html)展示了一些方法来做到这一点。确切的方法可能取决于您使用的后端。

# c++ - Arduino C++ char 数组为空，元素已填充

> ID：10418237
> 
> 赞同：1
> 
> 时间：2012-05-02T16:51:10.793
> 
> 标签：c++, arduino

我正在尝试将 char 数组打印到串行。数组本身充满了字符，但只要我打印整个数组 - 而不仅仅是它的元素 - 打印的字符串就是空的。

```
#define MAX_PAYLOAD_SIZE 80
class CmdBuffer {
...
private:
    char buffer[MAX_PAYLOAD_SIZE+1];
    int bufferpointer;
...
};

//In cpp File
String CmdBuffer::readCommand(char data) {
    buffer[++bufferpointer]=data;
    if(data != CMD_EOF) {
       return NULL;
    }
    buffer[++bufferpointer]='\0';
    ...
    for(int i=0; i<bufferpointer; i++) {
        Serial.print(buffer[i]);
    }
    Serial.println("\n-------"); 
    Serial.println(buffer);
    Serial.println("END");  
    ...
} 
```

如果输入字符是`abcdefg`那么输出看起来像

```
abcdefg
-------

END 
```

那么为什么可以打印元素，而不能打印整个数组呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:55:35.730

我怀疑这是因为您没有分配第一个字符：

```
buffer[++bufferpointer]=data; 
```

由于预增量，您缺少第一个字符。它可能包含一个空值，因此它会在此处终止您的字符串。要修复它，请使用后增量：

```
buffer[bufferpointer++]=data; 
```

# windows-phone-7.1 - 运行 Windows Phone 的 Marketplace 测试套件时出现意外的能力验证错误

> ID：10418238
> 
> 赞同：0
> 
> 时间：2012-05-02T16:51:13.280
> 
> 标签：windows-phone-7.1, marketplace, capability

我正在尝试提交我的应用程序的更新，而市场测试套件的功能验证测试返回“[错误]：意外错误”。多么棒的错误信息。

向市场提交更新也会给我同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:11:02.523

所需的功能部分可以放入 App Manifest 文件中。我什么都试过了。

最后，我创建了一个新的空项目，将所有文件复制到其中，瞧：一切正常。

我永远不会明白为什么...

# javascript - 使用 jquery 调用 WCF 服务检索 System.IO.Stream 集合的 JavaScript 和/或 JavaScript 代码？

> ID：10418245
> 
> 赞同：1
> 
> 时间：2012-05-02T16:51:33.630
> 
> 标签：javascript, jquery, wcf, collections, stream

我正在创建一个 WCF 服务，该服务将由客户端的纯 JavaScript 和客户端的一些 jQuery JavaScript 使用。

1) 我怎样才能实现普通的客户端 JavaScript，以便它以这样的方式调用 WCF 服务，以便立即检索 System.IO.Stream 的集合？此外，我将如何遍历在纯 JavaScript 端接收到的集合，以便可以将集合中的每个 System.IO.Stream 对象与 HTML 图像元素相关联？

2) 是否有可能实现使用 jquery 的 JavaScript 代码，以便它以这样的方式调用 WCF 服务，即一次检索 System.IO.Stream 的集合？此外，我将如何遍历使用 jQuery 的 JavaScript 接收的集合，以便可以将集合中的每个 System.IO.Stream 对象与 HTML 图像元素相关联？

```
 /*********Start of Excerpt from the Interface Code of a WCF Service 

  Contract*****************/ 

  using System; 

  using System.Collections.Generic; 

  using System.Linq; 

  using System.Runtime.Serialization; 

  using System.ServiceModel; 

  using System.ServiceModel.Activation; 

  using System.Text; 

  using System.ServiceModel.Web; 

  using System.IO; 

  using ConsoleForWCFServiceTutorial.PerlsDataContracts; 

  using ConsoleForWCFServiceTutorial.DataAccessObjectsDAO; 

  namespace ConsoleForWCFServiceTutorial 

  { 

     [ServiceContract(Namespace = 

  "http://ConsoleForWCFServiceTutorial.CarService")] 

     public interface ICarService 

     { 

    [OperationContract] 

    [WebInvoke(Method = "GET", 

                    BodyStyle = WebMessageBodyStyle.WrappedRequest)] 

         Stream[] getImagesList(); 

     } 

  } 

  /*********End of Excerpt from the Interface Code of a WCF Service 
  Contract*****************/ 

  /*********Start of Excerpt of the code associated with the Class that 
  implements the WCF Service Contract*****************/ 

  using System; 
  using System.Collections.Generic; 
  using System.Linq; 
  using System.Text; 
  using System.Collections; 
  using System.ServiceModel.Activation; 
  using System.Configuration; 
  using System.Data; 
  using System.IO; 
  using System.ComponentModel; 
  using ConsoleForWCFServiceTutorial.PerlsDataContracts; 
  using ConsoleForWCFServiceTutorial.DataAccessObjectsDAO; 

  namespace ConsoleForWCFServiceTutorial 
  { 
       [AspNetCompatibilityRequirements(RequirementsMode = 
       AspNetCompatibilityRequirementsMode.NotAllowed)] 
  class CarService : ICarService 
  { 

        public Stream[] getImagesList() 
         { 

             List<Stream> myImagesList = new List<Stream>(); 

             string fileName = Path.Combine("BMWpicture.jpg"); 

             FileStream fileStream = 
               new FileStream(fileName, FileMode.Open, FileAccess.Read); 
             // Set the content type as image/ jpeg 
             System.ServiceModel.Web.WebOperationContext. 
               Current.OutgoingResponse.ContentType = "image/jpeg"; 

             myImagesList.Add(fileStream); 

             string fileName2 = Path.Combine     ("MercedesBenzpicture.jpg"); 

             FileStream fileStream2 = 
          new FileStream(fileName2, FileMode.Open, FileAccess.Read); 
             // Set the content type as image/ jpeg 
             System.ServiceModel.Web.WebOperationContext. 
               Current.OutgoingResponse.ContentType = "image/jpeg"; 

             myImagesList.Add(fileStream2); 

             return myImagesList.ToArray(); 
         } 
     } 
  } 
  /*********End of Excerpt of the code associated with the Class that 
  implements the WCF Service Contract*****************/ 

  <!--Start of Excerpt of the plain JavaScript client code that 
  invokes one of the Methods in the WCF Service 
  Contract--> 

  <script type="text/javascript"> 

  function getImagesList2() { 

    var listOfStreams = 
  'http://localhost:8732/Design_Time_Addresses/ConsoleForWCFServiceTutorial/c     arService     /getImagesList' 

    document.getElementById("image11").onload = function () { 
      }; // img.onload = function() 

  document.getElementById("image11").src = listOfStreams[0]; 

    document.getElementById("image12").onload = function () { 
         }; // img.onload = function() 

       document.getElementById("image12").src = listOfStreams[1]; 

  } 
  </script> 
  <!--End of Excerpt of the plain JavaScript client code that 
  invokes one of the Methods in the WCF Service 
  Contract--> 

  <!--Start of Excerpt of the HTML code that is affected by the 
  JavaScript client and WCF Service interaction--> 
  <body> 
     <form id="form1" runat="server"> 
     <div> 

                  <img src=""  id="image11" alt="Smiley face" />      

                <img src=""  id="image12" alt="Smiley face" /> 

          <br /> 
          <a class="large blue button" id="A7" 
  onClick="getImagesList2()">getImagesList2</a> 

         </div> 
     </form> 
  </body> 
  </html> 

  <!--End of Excerpt of the HTML code that is affected by the 
 JavaScript client and WCF Service interaction--> 
```

1) 我怎样才能实现普通的客户端 JavaScript，以便它以这样的方式调用 WCF 服务，以便立即检索 System.IO.Stream 的集合？此外，我将如何遍历在纯 JavaScript 端接收到的集合，以便可以将集合中的每个 System.IO.Stream 对象与 HTML 图像元素相关联？

2) 是否有可能实现使用 jquery 的 JavaScript 代码，以便它以这样的方式调用 WCF 服务，即一次检索 System.IO.Stream 的集合？此外，我将如何遍历使用 jQuery 的 JavaScript 接收的集合，以便可以将集合中的每个 System.IO.Stream 对象与 HTML 图像元素相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:24:41.933

您要求的内容在您指定的方案中使用并没有真正意义。您已经在获取图像的 URL，只需发送路径数组，然后在客户端上构建图像。您的页面上有 jQuery，因此 Ajax 请求就足够简单了。像这样的事情应该可以推动您朝着正确的方向前进：

```
// return this from the server:
{ "data" : [ "path/to/image1.jpg", "path/to/image2.jpg" ] }

// then consume in your response on the client side:
$.ajax({
    url: 'http://localhost:8732/Design_Time_Addresses/ConsoleForWCFServiceTutorial/carService/getImagesList',
    dataType: 'json',
    type: 'post',
    success: function (response) {
        var container = $("<div/>");
        $.each( response.data, function (value, index) {
            container.append("<img src='" + value "' />");
        });

        container.prependTo("#form1");
    }
}); 
```

# ruby-on-rails-3 - 无法在 Rails 3.2 中禁用控制器类缓存

> ID：10418261
> 
> 赞同：1
> 
> 时间：2012-05-02T16:52:21.033
> 
> 标签：ruby-on-rails-3, caching

我正在使用`rails s`WEBrick 服务器开发 Rails 应用程序。出于某种原因，即使我处于开发模式，我的一个控制器类看起来仍然被缓存，因为控制器的类变量值在页面请求之间持续存在。

这是预期的行为，考虑到在我的 config/environments/development.rb 文件中，我有以下设置吗？

```
config.cache_classes = false
config.action_controller.perform_caching = false 
```

谢谢！

**更新：**真的，我主要想了解为什么控制器的类变量继续在页面请求之间存储它们的值，而我希望每次导航到新页面时都会清除这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:52:10.870

默认情况下，Rails 仅在类发生更改时才重新加载它们。这可以通过设置来改变

```
config.reload_classes_only_on_change = false 
```

这应该在每个请求上重新加载类并重新初始化类变量。

# netbeans - 用于 Zend Studio 或 NetBeans 7.1 的 Dreamweaver CS5.5 颜色主题？

> ID：10418267
> 
> 赞同：2
> 
> 时间：2012-05-02T16:52:41.130
> 
> 标签：netbeans, dreamweaver, zend-studio, color-scheme

寻找 DW CS5.5 的经典颜色主题放在 Zend Studio 或至少在 NetBeans 上。有没有人知道任何地方可以找到，因为我的搜索没有带来任何结果。

UPD：我已经为这个问题赢得了“风滚草”徽章。为什么？没有人回答它，没有人为此竖起大拇指。奇怪的。

# vb.net - 为什么我必须在这里双重施法？

> ID：10418269
> 
> 赞同：3
> 
> 时间：2012-05-02T16:52:43.090
> 
> 标签：vb.net, generics, inheritance, .net-3.5, casting

我有继承结构：`Foo`实现`IGraphNode`继承`IGraphItem`。

`Foo`, `IGraphItem`/和/`IGraphNode`的实现都位于单独的程序集中。我正在使用控制容器的反转，因此我正在处理的项目引用了前两个（和/ ），但没有/的实现。我还打开了 Option Strict，因为它是该项目所必需的（如果关闭不能解决问题，则关闭）。我正在使用.NET 3.5。`IGraphItem``IGraphNode``Foo``IGraphItem``IGraphNode``IGraphItem``IGraphNode`

我正在传递`IGraphItem`，我的代码如下所示：

```
Public Sub ProcessItem(of IGraphItem)(item As IGraphItem)
    If TypeOf item Is Foo Then
        Dim f1 = CType(item, Foo) 'Compiler error
        Dim f2 = DirectCast(item, Foo) 'Compiler error

        'This is what I'm currently having to do. It works.
        Dim f = CType(CType(item, IGraphNode), Foo)

        'Do stuff
    End If
End Sub 
```

知道为什么我必须这样做吗？我应该补充一下`TryCast`，但由于我们刚刚确认`item`' 类型是`Foo`，我不明白为什么我不能`DirectCast`这样做。如果我错了，它不应该让我抛出异常吗？有没有更好的方法来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:53:46.810

即使目标框架是 3.5，您的原始代码也可以毫无问题地编译。

您当前代码的问题是您定义了一个泛型方法，而`IGraphItem`不是您的接口的类型，而是`T`可以是任何类型的泛型类型。但它不能是另一种类型，`T`并且您正在尝试将其强制转换为 type `Foo`。

如果您将方法签名更改为其他任何内容，它将起作用，例如：

```
Public Sub ProcessItem(of IGraphItm)(item As IGraphItem) 
```

我假设你在某种程度上用这个方法中`IGraphItem`的泛型类型“遮蔽”了你的接口类型。`IGraphItem`

如果您明确告诉编译器`item As IGraphItem`实际上是一个`item As YourNamespace.IGraphItem`.

[我敢肯定 Jon 或 Eric 可以更好地解释它，但也许它还是有帮助的；）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:02:00.787

这篇文章可能会回答你的问题。如果不是，那么，无论如何，这是一本优秀的读物。 [http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)

# cron - 在 OS X 服务器上找到计划的作业 - Cron 作业？

> ID：10418273
> 
> 赞同：3
> 
> 时间：2012-05-02T16:53:02.997
> 
> 标签：cron, osx-snow-leopard, launchd, osx-server

目前正在从旧的 OS X 服务器迁移到使用 Red Hat Enterprise 的新 IBM 设置。旧系统按计划（每天早上 7:30）运行 PHP 脚本以从 FTP 服务器获取文件。

我的问题：我不知道它是如何安排的。我已经检查了 Cron Jobs 但那里什么都没有（使用终端`$ chrontab -l`）。

**OS X/BSD 还有哪些其他常用的调度程序？**我也检查了launchd，但这似乎也不是调度程序。

服务器运行：

```
OS X Snow Leopard Server 10.6.8 
```

# sql - Intellisense 在键入时插入错误的单词

> ID：10418275
> 
> 赞同：3
> 
> 时间：2012-05-02T16:53:11.250
> 
> 标签：sql, sql-server-2008, intellisense

当我在 Management Studio 中输入 SQL 时，有时 Intellisense 会做出非常明显的错误选择，让我感到困惑，比如当我尝试输入时：

```
SELECT CASE WHEN Name IS NOT NULL THEN 
```

只要我在“IS”之后点击空格，它就会输入

```
SELECT CASE WHEN Name IS_MEMBER ... 
```

有什么办法可以防止这种情况发生吗？这很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:01:21.643

如果可能，请使用 SQL Server 2012 版本的 Management Studio。这种愚蠢的东西要好得多。在以前的版本中，我完全关闭了它，因为这让我很恼火。在 2012 年，我不会考虑将其关闭 - 除了在这方面做得更好之外，它还具有部分匹配，这意味着您可以输入如下内容：

```
SELECT * FROM sys.index 
```

并且完成列表不仅会列出 sys.indexes，还会列出 sys.index_columns、sys.dm_db_index_physical_stats 等。不再需要知道名称以什么*开头*。嘘！

但如果 2012 年不是一个选项，那么我同意@HLGEM - 将其关闭。

# javascript - DOM操作后防止页面滚动

> ID：10418281
> 
> 赞同：3
> 
> 时间：2012-05-02T16:53:29.930
> 
> 标签：javascript, html, dom, scroll

我有一个 JavaScript 函数，它在页面加载时执行，然后在设定的时间间隔内自动执行。该函数循环显示在另一个脚本（由 PHP 生成）中提供的图像。但是每当这个函数操作 DOM 时，页面就会滚动到包含我正在编辑的 div 的 div 的顶部。我真的很想避免这种情况！

我已经查看了 stackOverflow 和其他网站上的其他帖子，但它们都涉及用户的操作，通常是 jQuery 或 Ajax 以及带有锚点的链接。这些都不适用于这种情况。

为了让您了解我的 HTML：

```
<div id="the_rest_of_my_page">
  <div id="scrolls_to_the top_of_this">
    <div id="img_div">
      This is where my JavaScript is doing stuff
    </div>
  </div>
</div> 
```

我的 JavaScript 代码：

```
function advance_slideshow( )
{
    document.getElementById( img_div ).innerHTML = '<img src="' + img_array[index] + '">';
    index = (index+1) % img_array.length;
    setTimeout('advance_slideshow()', swap_delay);
} 
```

问题相当严重，因为页面每隔几秒就会自动向上滚动一次，而且页面下方还有很多重要的内容。

有谁知道如何防止这种滚动？

编辑：现在我再次尝试，页面在编辑 DOM 后滚动到页面顶部，而不是 div 的顶部。我猜这会更有意义，但实际上更糟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:16:32.777

我在评论中所说的似乎是您问题的根源：您的高度`img`未设置，父 div 既没有`height`也没有`min-height`。

那么，会发生什么？当您替换图像时，在 div 中没有实际图像的几微秒内：旧图像已被丢弃，新图像正在加载。

您的父 div 没有图像 = 0 高度。整个页面较短，滚动跳转到顶部。

可能的解决方案：`min-height`在 CSS 中的 div 上，或计算图像尺寸和设置`width`以及`height`何时附加它们。

# apache-flex - 如何在 FlashBuilder 中设置配置常量

> ID：10418283
> 
> 赞同：1
> 
> 时间：2012-05-02T16:53:33.527
> 
> 标签：apache-flex, flash-builder

在 FlashProfessional 中，有一个称为“配置常量”的概念，它在发布设置中进行设置。它们可用于条件编译，如此处所述[http://help.adobe.com/en_US/Flash/10.0_UsingFlash/WS3e7c64e37a1d85e1e229110db38dec34-7fa4a.html#WS7D94A7C3-8F91-421a-936C-F076374C470F](http://help.adobe.com/en_US/Flash/10.0_UsingFlash/WS3e7c64e37a1d85e1e229110db38dec34-7fa4a.html#WS7D94A7C3-8F91-421a-936C-F076374C470F)

问题：如何在 FlexBuilder IDE 中设置配置常量？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-20T10:45:44.017

通过以下方式在附加编译器选项中设置它：`-define+=CONFIG::isRelease,false`

# excel - 根据列号是否列在另一个工作表中自动填充列

> ID：10418285
> 
> 赞同：1
> 
> 时间：2012-05-02T16:53:38.670
> 
> 标签：excel, ms-office, excel-formula, excel-2010

首先是在 Microsoft Office 2010 中。

我正在比较两个不同的工作表，每个工作表都有一个权限列表。“Worksheet1”包含我们新的 POS 权限，而“Worksheet2”包含我们当前的 POS 权限。我基本上是在检查我们的旧权限并找到匹配的新权限。

在 Worksheet1 上，A 列包含权限（字符串），而 B 列包含 Worksheet2 中具有类似权限的行号。Worksheet1 上的 C 列包含来自 Worksheet2 的引用（旧）权限（字符串），基于 Worksheet1 的 B 列中列出的行 #。因此，基本上在 Worksheet1 上，A 列具有新权限，B 列具有与 Worksheet1 相同权限的行号，而 C 列实际上包含旧权限。例如，对于来自 CI 列的引用，在第 2 行使用了 '=INDIRECT("Worksheet2!B"&B2)'。

现在我正在尝试做的是记录来自 Worksheet2 的哪些权限已经被考虑，而无需手动输入来自 Worksheet1 的引用行。使用相同的格式，我将拥有权限（一个字符串），而 B 列包含来自 Worksheet1 的行号，其中包含补充权限。最后在 C 列中，基于 B 列中给出的行的实际权限字符串。

所以基本上我试图找出 Worksheet1 列 B 是否包含 Worksheet2 上的行号。如果是这样，我希望用 Worskheet1 上的行号填充单元格，其中包含来自 Worksheet2 的引用行。从那里我可以使用上面提供的 INDIRECT 示例来完成 C 行。但现在我被困在找出 Worksheet2 B 列。

而且我不确定我是否清楚地解释了所有这些，如果没有，请询​​问我很乐意做出必要的澄清。提前感谢您的帮助。

* * *

澄清示例

工作表 1 - 第 2 行

*   A 列（新权限名称）：SYSTEM > MODIFY LIST VIEW

*   B 列（来自 WS2 的引用行，我将手动填写）：146

*   C 列（来自 WS2 的引用权限名称，基于 B 列中给出的行，使用 INDIRECT 生成）：rPro - Retail Pro v8 - 系统 - 修改列表视图

工作表 2 - 第 146 行

*   A 列（旧权限名称）：rPro - Retail Pro v8 - 系统 - 修改列表视图

*   列 B（来自 WS1 的行＃，其中列 B == 146，应该自动填充）：**这是我希望根据是否在 B 列中的 WS1 中引用此行来自动生成的内容）**在这种情况下，应该显示的数字向上是 2

*   C 列（从 WS1 引用的权限名称，基于 B 列中给出的行，使用 INDIRECT 生成）：SYSTEM > MODIFY LIST VIEW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:26:57.213

工作表 1 - D 列 - 放置`=ROW()`

工作表 2 - B 列 -`=VLOOKUP(row(),sheet1!B:D,3,FALSE)`

如果你想避免**#N/A**然后将函数包装在函数`iferror()`中

# ide - Dreamweaver 的代码编辑器，突出显示

> ID：10418291
> 
> 赞同：1
> 
> 时间：2012-05-02T16:54:32.097
> 
> 标签：ide, dreamweaver

我是 Dreamweaver（和 Mac）的新手。我习惯使用记事本++。我习惯于突出显示一个术语，并在当前文档中到处突出显示相同的术语。这可以用 Dreamweaver 完成吗？如果使用 Dreamweaver 无法做到这一点，那么在 Mac 上哪个代码编辑器可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:09:56.450

试试[http://www.barebones.com/products/textwrangler/](http://www.barebones.com/products/textwrangler/)。或者尝试使用 eclipse，这可能有点矫枉过正，但我​​又不知道在 Dreamweaver 中做了什么。

# javascript - 有没有办法在 Aptana Studio 3 IDE 中运行 JavaScript 代码？

> ID：10418292
> 
> 赞同：10
> 
> 时间：2012-05-02T16:54:34.933
> 
> 标签：javascript, aptana3

我创建了一个*Test.js*文件并在其中编写了两行 JS 代码：

```
var a = 5;
console.log("The result is = " + a); 
```

输出应该是：

```
"The result is = 5" 
```

有没有办法可以在 Aptana 脚本控制台中看到这一点，而不是将 JS 代码集成到 HTML 文件中并保存/刷新它？

如果不是 Aptana，Netbeans 可以提供任何其他 IDE 吗？

任何建议将不胜感激。

问候

罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:47:17.597

我很确定控制台是用来查看 Aptana 基于 Ruby 的命令的输出（安装在命令菜单下）。可以按照此处的说明进行操作：http: [//www.chromium.org/for-testers/enable-logging](http://www.chromium.org/for-testers/enable-logging)，然后在终端面板中尾随生成的日志文件（与控制台窗口不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:35:07.310

我认为最好尝试一下[Node.js。](http://nodejs.org)这样，您可以调用`node test.js`控制台窗口并查看结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:02:22.777

恐怕这是不可能的。

但我所做的是设置一个简单的 workbench.html 文件，我把

```
[...]
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/myJsFile.js"></script> 
```

然后修改`myJsFile.js`并保存。

[http://www.developer.nokia.com/Community/Wiki/Aptana_WRT_Plugin:_Displaying_log_messages_in_Output_console](http://www.developer.nokia.com/Community/Wiki/Aptana_WRT_Plugin:_Displaying_log_messages_in_Output_console)给出了另一个非常有趣的可能性

只是检查一下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T05:26:44.523

您可以从 node.js 下载 node.js，下载软件包并按照屏幕上的安装说明进行操作。

如果使用 Windows，node.js 包带有自己的交互式命令提示符，您可以打开它。要在 windows 上运行 js 文件，请打开 windows 命令提示符，输入 node，然后输入文件名，例如 test.js。Node.js 应该运行您的文件。

如果使用 Mac，node.js 包通过 mac 上的终端应用程序运行。要运行文件，请输入 node，然后输入文件名，例如 test.js，node.js 应该运行该文件。

Aptana Studio 3 能够在 IDE 内部打开终端。将文件保存在 Aptana Studio 中，然后按照说明在 Mac 上运行文件。

顺便说一句，将您的文件标记为小写字母，我尝试使用大写字母作为第一个字母，但它不起作用。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T00:59:05.510

这不完全是您所要求的，但它可能会为您指明正确的方向。有一个名为 EclipseMonkey 的项目......我不确定状态。这是一个有效的（？）示例。您的里程会有所不同。[http://blogs.edgehill.ac.uk/webservices/2008/10/16/aptana-outline-auto-expansion-monkeyed/](http://blogs.edgehill.ac.uk/webservices/2008/10/16/aptana-outline-auto-expansion-monkeyed/)

# c++ - 有哪些好的工具可以创建带有顶点和边的图？

> ID：10418293
> 
> 赞同：0
> 
> 时间：2012-05-02T16:54:41.050
> 
> 标签：c++, graph

我已经在 C++ 中实现了图论中的一些算法。我的老师希望我们用图表来展示一些例子，所以我需要画一个图表，然后一步一步地解释我的实现是如何工作的。

我不想在这项工作中使用绘画，所以我想知道在尝试创建带有边和顶点的加权图时，是否有任何工具可以让您的生活更轻松？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:12:22.420

是的，使用graphvis。如果你已经在使用 boost.graph 来实现你的实现，你可以简单地将你的图写成 graphvis 格式。

# php - 如何在此 if 语句中添加“OR”运算符？

> ID：10418295
> 
> 赞同：-2
> 
> 时间：2012-05-02T16:54:49.017
> 
> 标签：php, if-statement

我有这个 IF 语句，我想添加一个 OR，所以它应该是 if($variable1 ==$variable2) 或 if($variable3 == $variable4)。

```
if($variable1 == $variable2)
die("");

else
echo(""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:56:22.280

```
if($variable1 == $variable2 || $variable3 == $variable4){
die("");
}
else{
echo("");} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:56:02.817

请参阅[PHP 逻辑运算符](http://php.net/manual/en/language.operators.logical.php)

```
 if($variable1 ==$variable2 || $variable3 == $variable4) {
//do whatever
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T16:56:48.897

```
if($variable1 == $variable2  || $variable3 == $variable4)
die("");
else
echo(""); 
```

# linux - Linux 到 Linux GUI 远程

> ID：10418296
> 
> 赞同：-1
> 
> 时间：2012-05-02T16:54:49.617
> 
> 标签：linux, remote-access

我想从另一台 Linux 机器访问 Linux 机器的**GUI 。**

我可以使用“ **ssh username@IP_Address** ”命令访问它的终端，但我想要访问它的 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:03:58.337

尝试使用“-X”标志：

```
$ ssh -X user@server.corp.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:11:47.787

我使用 SSH 隧道和 VNC。您需要在远程计算机上设置 VNC 服务器并启动 vnc 会话。

在 SSH 连接上添加`-L`标志。`-L 5555:localhost:5901`- 这意味着将本地端口 5555 绑定到远程计算机上的 5901。

最后，用于`vncviewer localhost:5555`通过 SSH 连接到远程机器。

这样做，您的所有流量都将通过 SSH 发送并被加密。这很重要，因为 VNC 是未加密的协议。

# javascript - 每秒循环功能

> ID：10418299
> 
> 赞同：0
> 
> 时间：2012-05-02T16:55:03.170
> 
> 标签：javascript, jquery

我正在做一个倒数计时器，我希望时间每秒刷新一次。我使用 setInterval 但它似乎只运行一次而不是每秒运行一次。我的代码有什么问题？

```
var countDown = setInterval(function(){
$('#days').val(daysLeft);
$('#hours').val(hoursLeft);
$('#minutes').val(minLeft);
$('#seconds').val(secLeft);   
},1000); 
```

演示：http: [//jsfiddle.net/EnigmaMaster/pyRR8/14/](http://jsfiddle.net/EnigmaMaster/pyRR8/14/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:56:37.277

您需要重新计算间隔内剩余的时间，否则您将继续将其设置为相同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:03:12.760

您的代码没有更新`currentDate`变量。我更新了[jsFiddle](http://jsfiddle.net/pyRR8/21/)上的代码并将其粘贴到此处：

```
var endDay = new Date('May 24, 2012 11:30:00');

var countDown = setInterval(function(){
    var currentDate = new Date();

    var daysdecimal = (endDay - currentDate)/(1000*60*60*24);
    var daysLeft = Math.floor(daysdecimal);
    var hoursdecimal = (daysdecimal - Math.floor(daysdecimal))*24;
    var hoursLeft = Math.floor(hoursdecimal);
    var minLeft = 60 - currentDate.getMinutes();
    var secLeft = 60 - currentDate.getSeconds();

    $('#days').val(daysLeft);
    $('#hours').val(hoursLeft);
    $('#minutes').val(minLeft);
    $('#seconds').val(secLeft);   
},1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:06:30.623

想要这样吗？我已经更新了你的 Jsfiddle

见这里：http: [//jsfiddle.net/pyRR8/23/](http://jsfiddle.net/pyRR8/23/)

# c++ - 基于节点的容器的最佳分配器？

> ID：10418300
> 
> 赞同：1
> 
> 时间：2012-05-02T16:55:23.697
> 
> 标签：c++, boost, stl

什么是基于节点的容器（如 list、map 和 multi_map）的最佳分配器？我有`boost::unordered_map<std::array<char, 32>, int>`400 万个条目。应避免 400 万次单独分配（出于性能考虑）。

理想情况下，分配器将分配多个（非常）大块并将它们划分为每个节点开销为 0 的节点。应该跟踪空闲节点，但在整个池被破坏或重置之前不需要释放块。池不应该是线程安全的（为了性能）。

我可以尝试自己写，但我不喜欢重新发明轮子。事先不知道节点端似乎也有问题。

Boost 有 Pool，但它似乎只提供单例使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:34:36.403

您可以调整/包装[Loki 小对象分配器](http://loki-lib.sourceforge.net/index.php?n=Idioms.SmallObject)。它适用于相同尺寸的小物体。另一种选择是使用[Boost.Pool](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/index.html)。它支持面向对象（非单例）的使用，但您必须将其包装到由`boost::unordered_map`.

# git - Git fetch/pull 仅在连接到特定 wifi 时才有效？

> ID：10418302
> 
> 赞同：2
> 
> 时间：2012-05-02T16:55:29.807
> 
> 标签：git, wifi, fetch, pull

几天前我克隆了一个 Git 存储库并开始对其进行处理，一直在我们将调用的 wifi 连接上`wifi_a`。

有时，`wifi_a`没有响应，但`wifi_b`通常在`wifi_a`没有响应时起作用。所以，有些日子我`wifi_b`改用。今天是那种日子之一。

我决定我想使用上游遥控器获取最近的更新。但是， fetch 只是挂在那里。然后我决定尝试拉动。没有什么。在这里坐了几分钟后，我得到的只是：

> 致命：无法连接到
> github.com：github.com [0：207.97.227.239]：errno =操作超时

所以，出于好奇，我检查了是否`wifi_a`再次工作。它做了！所以，我切换回`wifi_a`. 我再次尝试了 git fetch，它立即工作！

我现在的问题是……为什么？为什么我不能使用不同的 wifi 连接？`wifi_b`当我等待 git 完成获取或超时时，我能够在连接时使用我的网络浏览器，所以并不是我没有连接。我只是觉得这种行为很奇怪，任何解释都会有帮助。毕竟，如果我需要做一些工作但`wifi_a`情绪低落，那我就完蛋了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T18:45:04.210

这取决于谁拥有 wifi 连接以及他们的政策是什么。最有可能的是，所有者`wifi_b`正在阻止 ssh 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:51:45.823

我仍然不确定为什么`wifi_b`不起作用。大学拥有之前的连接，但`wifi_b`不受任何密码保护。我唯一的猜测是，由于我使用创建了 fork `wifi_a`，它只让我在 on 时使用它来做事`wifi_a`。

# jquery - JQuery，Canvas，更新变量

> ID：10418303
> 
> 赞同：0
> 
> 时间：2012-05-02T16:55:29.973
> 
> 标签：jquery, canvas

我正在尝试学习一些 JQuery，主要是为了好玩，但也是为了 seriouz。这是一个小程序，它在加载文档时显示窗口的宽度。

```
function window_width(window_w){

    var window_w = ($(window).width());
    var canvas = document.getElementById("width_w");
    if (canvas.getContext) {   
    var ctx = canvas.getContext("2d");
    ctx.strokeText(window_w, 0, 10);
    ctx.stroke();
}
} 
```

我希望它进一步做的是不断更新这个变量的显示，因为有人会重新调整窗口的大小。我不知道该怎么做，我需要编写另一个函数还是有方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:07:28.180

您可以使用 jQuery将函数绑定到[resize事件：](http://api.jquery.com/resize/)

```
$(window).resize(function() {
  // You can put the code from your window_width function here.
}); 
```

# javascript - 响应式图像 - 在不同的屏幕尺寸上调整图像大小

> ID：10418309
> 
> 赞同：1
> 
> 时间：2012-05-02T16:55:39.033
> 
> 标签：javascript, html, css, response, media-queries

我在我的网站框架中使用[http://www.getskeleton.com/ 。](http://www.getskeleton.com/)我希望图像可以在不同的屏幕尺寸（例如 iPhone）上调整大小。有谁知道最简单的方法？我已经进行了谷歌搜索并获得了太多选择，不知道哪个是最好的。我追求的是随着屏幕变小，图像会变小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:02:55.640

这是一个棘手的问题：设计界已经设计了很多方法，每种方法都有不同的优缺点。没有“完美”的（i/ea 带有媒体查询的新 img 标签，但一个[工作组](http://www.w3.org/community/respimg)正在解决这个问题）

马最喜欢的方法是这里描述的一种：http: [//headlondon.com/our-thoughts/technology/posts/creating-responsive-images-using-the-noscript-tag](http://headlondon.com/our-thoughts/technology/posts/creating-responsive-images-using-the-noscript-tag)

您必须调整他们的脚本，因为它是一个 ruby​​ 助手 gem，而不是普通的 html/js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:52:27.227

你会找到

```
img.scale-with-grid {max-width: 100%;height: auto; } 
```

只需在您的图像中使用“scale-with-grid”，它就可以解决问题

# actionscript-3 - 如何在闪存中获取文件中的偏移量

> ID：10418311
> 
> 赞同：0
> 
> 时间：2012-05-02T16:55:40.327
> 
> 标签：actionscript-3, flash

我对 flash/actionscript 比较陌生，但遇到了问题。我需要获取文本文件中的当前偏移量，以字节为单位。

Java 有一个名为*getFilePointer*的不错的小函数，它完全可以做到这一点，但我需要在 actionscript 中使用它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:18:06.727

偏移量是指文件指针的位置？

使用 ByteArray 类的 position 属性读取或设置文件指针的位置：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#position](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#position)

# java - 框/表内的输入框

> ID：10418314
> 
> 赞同：0
> 
> 时间：2012-05-02T16:55:50.120
> 
> 标签：java, html

我有一个名为关键字的输入框。我想把这个盒子放在另一个盒子里。这是我的代码：

```
<div class="tfirst">
<h3>Keywords</h3>

    <input id="keywords" type="text" size="100" runat="server" title="Keywords" />

</div>
<div class="tsecond" style="visibility:hidden">
    <h3>Cost</h3>
    <ul>
    <li><input id="chkOnlyFree" type="checkbox" /><label for="chkOnlyFree">Only show images having free required materials</label></li>
    </ul>
</div>
<div class="tthird">  
    <h3>Genders</h3>
    <ul>
    <li></li>
    <li></li>
    </ul>
</div> 
```

我想把第一个 Div 放在一个盒子里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:01:49.753

也许您可以使用 a`table`而不是`div`元素。

# php - PHPUnit 3.6 中的引导选项发生了什么变化？

> ID：10418315
> 
> 赞同：2
> 
> 时间：2012-05-02T16:55:51.643
> 
> 标签：php, phpunit, bootstrapping

配置选项在最新版本的文档 `bootstrap`中被注释掉了： [http ://www.phpunit.de/manual/current/en/appendixes.configuration.html](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)`phpunit.xml`

事实上，它似乎没有在我的配置文件中读取它。为什么是这样？如何配置 phpunit 3.6 以自动包含引导文件？

在我看来，设置您的项目非常有用，因此 PHPUnit 会自动配置引导文件，而运行 PHPUnit 的人不必知道它，所以他们可以简单地做：

```
> phpunit 
```

而不是：

```
> phpunit --bootstrap [file] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:19:10.263

引导文件应在测试之前运行，它是 phpunit 的可用命令行选项

`--bootstrap <file>`

有关 cli 选项的更多信息：

[http://www.phpunit.de/manual/current/en/textui.h​​tml#textui.clioptions](http://www.phpunit.de/manual/current/en/textui.html#textui.clioptions)

我从来没有将 xml 配置文件用于引导选项，所以我不知道为什么它不工作或不再工作，但希望 cli 像它对我一样工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:54:11.590

在 PHPUnit 的配置文件中，`3.4`您可以在版本中包含一个引导文件，如下所示：

```
<phpunit backupGlobals="false"
         backupStaticAttributes="true"
         bootstrap="/path/to/bootstrap.php" 
```

[http://www.phpunit.de/manual/3.4/en/appendixes.configuration.html](http://www.phpunit.de/manual/3.4/en/appendixes.configuration.html)

但是由于`3.5`此选项已被注释掉，因此您不能再使用它：

```
<phpunit backupGlobals="true"
         backupStaticAttributes="false"
         <!--bootstrap="/path/to/bootstrap.php"--> 
```

[http://www.phpunit.de/manual/3.5/en/appendixes.configuration.html](http://www.phpunit.de/manual/3.5/en/appendixes.configuration.html)

我找不到任何关于为什么禁用此选项的参考。我查找了 PHPUnit 的发行说明，`3.5`看看他们是否提到了任何内容，但我发现根本没有提到引导程序。

[http://sebastian-bergmann.de/archives/897-PHPUnit-3.5.html](http://sebastian-bergmann.de/archives/897-PHPUnit-3.5.html)

[https://github.com/sebastianbergmann/phpunit/blob/3.5/README.markdown](https://github.com/sebastianbergmann/phpunit/blob/3.5/README.markdown)

我仍然欢迎任何知道为什么删除此选项的人发表评论。

# javascript - 浏览器加载脚本的重复副本

> ID：10418318
> 
> 赞同：2
> 
> 时间：2012-05-02T16:56:03.003
> 
> 标签：javascript, ruby, load, nginx

如果我打开我的网页，然后查看 chrome/firefox/ie 等浏览器上的开发人员工具，我会看到加载了相同视图/javascript 文件的多个副本。这可能会破坏 javascript 在其状态下的行为方式。

几乎每次，进行页面刷新都会解决它。

这非常随机地发生。

我不能随意发布我的代码，但设置是 nginx/thin/ruby/haml。

什么会导致这种行为？是服务器端还是浏览器端的问题？

我们最初的预感是它们可能是同一个文档的多个版本，但它们都是精确的副本。所以我排除了缓存可能是罪魁祸首。

有关页面的更多信息：

1.  没有动态加载脚本 - 简单的脚本标签
2.  页面上没有框架 - 带有表单的简单正文标签
3.  页面上没有广告脚本
4.  发生在所有浏览器上
5.  间歇性 - 频率就像在 500 个页面加载中出现一次

# python - 基本 NumPy 数据比较

> ID：10418325
> 
> 赞同：1
> 
> 时间：2012-05-02T16:56:22.850
> 
> 标签：python, numpy

我有一个排列在二维数组中的 N 维值数组。就像是：

```
import numpy as np
data = np.array([[[1,2],[3,4]],[[5,6],[1,2]]]) 
```

我还有一个值`x`，我想与每个数据点进行比较，我想获得一个布尔值的二维数组，显示我的数据是否等于`x`.

```
x = np.array([1,2]) 
```

如果我做：

```
data == x 
```

我明白了

```
# array([[[ True,  True],
#        [False, False]],
#
#       [[False, False],
#        [ True,  True]]], dtype=bool) 
```

我可以轻松地将这些组合起来以获得我想要的结果。但是，我不想遍历这些切片中的每一个，尤其是在`data.shape[2]`更大的时候。我正在寻找的是一种直接的获取方式：

```
array([[ True,  False],
        [False, True]]) 
```

对于这个看似简单的任务有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:00:46.790

嗯，`(data == x).all(axis=-1)`给你你想要的。它仍在构建一个 3-d 结果数组并对其进行迭代，但至少该迭代不是 Python 级别的，因此它应该相当快。

# ruby-on-rails - Rails：检查cookie

> ID：10418326
> 
> 赞同：4
> 
> 时间：2012-05-02T16:56:23.713
> 
> 标签：ruby-on-rails, cookies

我真的找不到解决这个非常常见问题的确切信息。我想设置一个 cookie，如果不可能（cookie 被禁用）我想显示一个错误页面。

在我的应用程序控制器中，我设置了 cookie：

```
 if (cookies[:user].blank?)
    cookies[:user] = {
      :value => (0...10).map{ ('a'..'z').to_a[rand(26)] }.join,
      :expires => 6.months.from_now,
      :domain => 'localhost'          
    }           
   end 
```

然后在我的另一个控制器 Booking 控制器中：

```
if cookies[:user].blank?
  @publish_form = false
  @no_cookies = true
end 
```

在视图中：

```
 <% if @no_cookies %>
You need to enable cookies
<% end %> 
```

现在，这真的行不通。如果启用 cookie，它将创建一个 cookie，但如果禁用 cookie，它仍会创建一个“cookie”，因此在我的预订控制器中它将有一个值，因此不会为空。如果页面被重新加载，它将创建另一个 cookie 值。似乎它只是在创建一个会话或其他东西。使用 request.cookie 也不起作用。

每当用户进入页面时，我应该使用什么来创建 cookie，检查 cookie 是否存在并根据 cookie 是否存在显示不同的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:59:26.620

我想你必须做第二个请求？由于无法在一个请求中知道您是否可以实际设置它们。

也许您可以使用 javascript 来尝试读取 cookie？

# arm - 带有 LSL 进位标志的 MOVS

> ID：10418327
> 
> 赞同：1
> 
> 时间：2012-05-02T16:56:28.573
> 
> 标签：arm

我正在学习 Arm System Developers Guide，我想知道书中的一个例子：

```
cpsr = nzcvqiFt_USER   // capital indicates flag is set
r0 = 0x00000000
r1 = 0x80000004

MOVS r0, r1, LSL #1

cpsr = nzCvqiFt_USER   // capital indicates flag is set
r0 = 0x00000008
r1 = 0x80000004 
```

我知道 8 被结转并且 C 标志是由于这个基于逻辑左移的进位而设置的。为什么 r1 中的 4 也没有移动？MOVS操作是否只移动携带的8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:14:59.400

因为您的结果以 r0 结尾。

所以，会发生什么：

```
carry = r1[31] = 1
r0    = r1 << 1 
```

这就是为什么 r0 变成`0x00000008`因为 r1 的 MSB 移出到进位，第三位 (2^3=4) 移到第四位 (2^4=8)。

# google-maps-api-3 - parentNode 在带有图像的可拖动可调整大小的自定义覆盖中为 null 或未定义。地图 v3

> ID：10418328
> 
> 赞同：1
> 
> 时间：2012-05-02T16:56:36.447
> 
> 标签：google-maps-api-3

我用图像制作了一个可调整大小的自定义叠加层，它可以工作，你可以在这里看到它，
[调试](http://wifigator.com/dash/debug2.php)。在右上角和左下角有一些红色的角图标，您可以拖动并调整图像和覆盖的大小。问题是，当您缩小图像时，会留下较大比例图像的残余。

然后我添加了一个函数来在绘制新的覆盖之前删除覆盖，直接从示例中出来，overlay.onRemove(); 它起作用了，但是一旦您取消单击标记，它就会给出错误“父节点：对象为空或未定义”，您可以在这里看到它[debug2](http://wifigator.com/dash/debug.php)

如果您查看它们的源代码，第 173 行的拖动侦听器并调用 overlay = new USGSOverlay(bounds, srcImage, map, 'yes'); 在第 194 行。

该函数位于第 71 行。查找 ifDrag 然后删除之前的叠加层，我对它为什么起作用感到困惑，但是一旦您取消单击标记，它就会引发错误并破坏脚本。

如果有人可以为我提供错误的修复或解决方法，那就太棒了。这是一个非常好的功能，而且离放弃太近了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:15:18.933

我们得出的结论是，太多的事件被触发并杀死了脚本，“dragend”是解决方案（不完美但有效），适用于所有浏览器并将不透明度设置为 50% 以获得与位置的完美对齐。感谢你的帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:45:49.597

我相信您的问题出在`draw`功能上：

```
var div;
USGSOverlay.prototype.draw = function() {
  // Size and position the overlay. We use a southwest and northeast
  // position of the overlay to peg it to the correct position and size.
  // We need to retrieve the projection from this overlay to do this.
  var overlayProjection = this.getProjection();
  // Retrieve the southwest and northeast coordinates of this overlay
  // in latlngs and convert them to pixels coordinates.
  // We'll use these coordinates to resize the DIV.
  var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
  var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());
  // Size the image's DIV to fit the indicated dimensions.
  div = this.div_;
  div.style.left = sw.x + 'px';
  div.style.top = ne.y + 'px';
  div.style.width = (ne.x - sw.x) + 'px';
  div.style.height = (sw.y - ne.y) + 'px';
} 
```

您不想删除外部声明`var div`并在`draw`函数引用中进行引用`this.div`吗？我相信这是你的问题。

`draw`不应该像这样实现最后几行：

```
//Remove this line:
//div = this.div_;
this.div_.style.left = sw.x + 'px';
this.div_.style.top = ne.y + 'px';
this.div_.style.width = (ne.x - sw.x) + 'px';
this.div_.style.height = (sw.y - ne.y) + 'px'; 
```

`add`您在函数中也有类似的代码。我建议您制作`add`类似的代码 - 直接使用`this.div_`; 看起来你可能会得到一个参考。

# jquery - history.js 的 replaceState() 不断将新的哈希附加到 url

> ID：10418332
> 
> 赞同：1
> 
> 时间：2012-05-02T16:56:54.993
> 
> 标签：jquery, history.js

我在 Mac 上使用 Safari 5.1.5

我目前的网址是：www.mysite.com

然后我点击一个特定的组：

```
History.replaceState(null, null, 'groups/' + group_id + '/'); 
```

如果我点击第 32 组，我会得到网址：www.mysite.com/groups/32/

到目前为止很好......但如果我在那之后点击第 31 组，我会得到：www.mysite.com/groups/32/groups/31/

...或者更好的是，如果我去第一组，我会得到：www.mysite.com/groups/32/groups/31/groups/32/

... 等等...

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:59:32.493

如果您的 URL 以 开头`/`，它将相对于文档根目录表示：

```
replaceState(null, null, '/groups/' + group_id + '/'); 
```

省略`/`, 并假设您正在寻找相对 URL。

# c# - File.Copy(source, dest) 是否锁定文件？

> ID：10418343
> 
> 赞同：4
> 
> 时间：2012-05-02T16:57:33.847
> 
> 标签：c#

File.Copy(source, dest) 是否在复制时锁定文件？在一个线程中复制一个文件时，第二个线程可以开始将同一文件复制到不同的目标吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:05:37.307

当一个线程复制文件时，多个线程可以同时以只读模式访问文件。可以对同一个文件同时进行多次复制操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:59:37.470

是的，您可以:) 这就像您将相同的文件复制到 Windows 上的不同文件夹中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:02:26.790

不，没有锁，多线程应该可以调用它就好了。

# xslt-1.0 - 从 XML 内容中删除不匹配的括号和不匹配的括号

> ID：10418344
> 
> 赞同：2
> 
> 时间：2012-05-02T16:57:36.113
> 
> 标签：xslt-1.0

我看到了与 Ruby 等相关的问题。我没有看到任何可以涵盖这种情况的答案。

我正在使用 XSLT 来转换 XML 文档。我被迫使用 XSLT 1.0，因为使用 XSLT 和 XPATH 的应用程序仍在 1.0 上。

您会使用正则表达式来使用嵌入在 XSL 中的 Javascript 函数吗？

我有这样的xml代码：

```
<document>
<content name="PROD_MAJ_CLS_CD" type="text" vse-streams="2" u="20" action="cluster" weight="1">2</content>
<content name="PART_DESC_SHORT" type="text" vse-streams="2" u="22" action="cluster" weight="1">SCREW-ROCKER</content>
</document> 
```

name="PART_DESC_SHORT" 的内容属性中可以有括号和方括号

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:44:30.033

在您的示例中，*没有*一个括号匹配，并且都是开括号；在这种情况下，删除*不匹配*的括号和括号的任务相当于删除*所有*括号和括号。使用以下功能最容易做到这一点`translate`：

```
<xsl:value-of select="translate(.,'([','')"/> 
```

如果您确实需要保留匹配的大括号并将表单的输入`a(b[c]d(e`转换为`ab[c]de`，那么在 XSLT 中执行此操作的最简单方法是使用递归命名模板，该模板接受两个参数：输入字符串和记录到目前为止处理的材料的堆栈。（堆栈可以只是由您选择的分隔符分隔的字符串序列，您希望它不会出现在输入中。由于您将输入显示为来自属性值，`&amp;#x9;`因此可能是一个安全的选择（它将具有除非数据生成器为其使用数字字符引用，否则已从输入中标准化），但`|||never-use-this-string-in-a-part-description|||`如果您愿意，可以使用。）

在初始调用中，您只传递输入字符串，并让堆栈默认为空。

在每次使用非空输入调用时，模板会从输入流中取出一个字符并用它做正确的事情：

*   对于“（”和“[”，将一个新字符串压入堆栈。
*   对于匹配栈顶项的第一个字符的“]”和“)”，弹出栈两次，连接第 2 项、第 1 项（旧的顶层项）和字符“]”或“)”，以及将串联压入堆栈。
*   对于不匹配的“]”和“)”，说明输入平衡不好，需要做点什么。（此处的代码删除了字符。）
*   对于任何其他字符，将其附加到堆栈的顶部项目。

因此，在任何给定时间，堆栈中的每个项目（除了底部项目）都以尚未匹配的左括号或括号开头。每次我们得到一个匹配，括号内的字符串被附加到堆栈上的下一个项目，从而减少堆栈大小。

当输入字符串用完并且堆栈中有多个项目时，需要剥离堆栈顶部项目上的前大括号并将顶部项目（减去大括号）附加到下一个项目。

一旦堆栈减少到一个项目，该项目将包含您想要的字符串。

这是在 XSLT 中：

```
<xsl:template name="paren-match-or-strip">
  <xsl:param name="input"/>
  <xsl:param name="stack"/>

  <xsl:variable name="char" 
                select="substring($input,1,1)"/>
  <xsl:variable name="stacktop" 
                select="substring-before($stack,$sep)"/>
  <xsl:variable name="stackrest" 
                select="substring-after($stack,$sep)"/>

  <xsl:choose>
    <xsl:when test="not($input = '')">
      <xsl:choose>
        <xsl:when test="$char = '(' or $char = '['">
          <!--* Push another potential-left-brace on the stack *-->
          <xsl:call-template name="paren-match-or-strip">
            <xsl:with-param name="input" 
                            select="substring($input,2)"/>
            <xsl:with-param name="stack" 
                        select="concat(
                                $char,
                                $sep,
                                $stack
                                )"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:when test="($char = ']' and substring($stacktop,1,1) = '[')
                        or 
                        ($char = ')' and substring($stacktop,1,1) = '(')
                        ">
          <!--* Match the left brace at the top of the stack *-->
          <xsl:variable name="stacktop2" 
                        select="substring-before($stackrest,$sep)"/>
          <xsl:variable name="stackrest2" 
                        select="substring-after($stackrest,$sep)"/>

          <xsl:call-template name="paren-match-or-strip">
            <xsl:with-param name="input" 
                            select="substring($input,2)"/>
            <xsl:with-param name="stack" 
                        select="concat(
                                $stacktop2,
                                $stacktop,
                                $char,
                                $sep,
                                $stackrest
                                )"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:when test="$char = ']' or $char = ')'">
          <!--* Unmatched right brace, drop it silently *-->      
          <xsl:call-template name="paren-match-or-strip">
            <xsl:with-param name="input" 
                            select="substring($input,2)"/>
            <xsl:with-param name="stack" 
                        select="$stack"/>
          </xsl:call-template>
        </xsl:when>     
        <xsl:otherwise>
          <xsl:call-template name="paren-match-or-strip">
            <xsl:with-param name="input" 
                            select="substring($input,2)"/>
            <xsl:with-param name="stack" 
                            select="concat(
                                    $stacktop,
                                    $char,
                                    $sep,
                                    $stackrest
                                    )"/>
          </xsl:call-template>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:when>
    <xsl:when test="$input = '' and contains($stackrest,$sep)">
      <!--* Input is exhausted and at least one unmatched
          * parenthesis is on the stack.
          *-->
      <xsl:variable name="stacktop2" 
                    select="substring-before($stackrest,$sep)"/>
      <xsl:variable name="stackrest2" 
                    select="substring-after($stackrest,$sep)"/>

      <xsl:call-template name="paren-match-or-strip">
        <xsl:with-param name="input" 
                        select="$input"/>
        <xsl:with-param name="stack" 
                        select="concat(
                                $stacktop2,
                                substring($stacktop,2),
                                $sep,
                                $stackrest2
                                )"/>
      </xsl:call-template>

    </xsl:when>
    <xsl:otherwise>
      <!--* input is exhausted, stack only has one item *-->
      <xsl:value-of select="substring-before($stack,$sep)"/>
    </xsl:otherwise>
  </xsl:choose>

</xsl:template> 
```

# java - Jackson JSON 处理器：SerializationConfig.Feature.USE_ANNOTATIONS 设置为 false

> ID：10418352
> 
> 赞同：0
> 
> 时间：2012-05-02T16:58:18.230
> 
> 标签：java, linux, json, jackson

嗨，我在使用带有 ObjectMapper 类的 Jackson JSON PRocessor 时遇到了一个令人讨厌的问题。这是我的测试类，应该将对象（UserHeader）序列化为 Json 字符串。

```
 import org.codehaus.jackson.map.ObjectMapper;
 import org.codehaus.jackson.map.SerializationConfig;

 public class TestJson {

   public static void main(String[] args) throws Exception {
            ObjectMapper mapper = new ObjectMapper();
            UserHeader userHeader = new UserHeader();
            userHeader.setFirstName("A");
            userHeader.setLastName("A1");
            userHeader.setSystem("2A");

            mapper.configure(SerializationConfig.Feature.USE_ANNOTATIONS, false);
            StringWriter sw = new StringWriter();
            mapper.writeValue(sw, userHeader);
            System.out.println(sw.toString());
    }
 } 
```

这是我的 UserHeader 类，带有从不同的 ObjectMapper 使用的注释（不是这个）

```
 import org.codehaus.jackson.annotate.JsonIgnore;
  import org.codehaus.jackson.annotate.JsonProperty;
  import org.codehaus.jackson.map.annotate.JsonSerialize;
  import org.codehaus.jackson.map.annotate.JsonSerialize.Typing;

  @JsonSerialize(typing=Typing.STATIC)
  public class UserHeader implements Serializable,LoggedObject, MessagesInterface {

   private static final long serialVersionUID = 1L;

   private String system;
   private String userName;
   private String firstName;
   private String lastName;

       private List<Scrivania> scrivanie;

   public String getUserName() {
      return userName;
   }

   public void setUserName(String userName) {
    this.userName = userName;
   }

       @JsonProperty("Nome utente")
   public String getFirstName() {
    return firstName;
   }

   public void setFirstName(String firstName) {
    this.firstName = firstName;
   }

   @JsonProperty("Cognome utente")
   public String getLastName() {
    return lastName;
   }
   public void setLastName(String lastName) {
    this.lastName = lastName;
   }

      @JsonProperty("Scrivanie associate")
  public List<Scrivania> getScrivanie() {
    return scrivanie;
   }
   public void setScrivanie(List<Scrivania> scrivanie) {
    this.scrivanie = scrivanie;
   }
   @JsonProperty("Sistema (IAM o EDOC)")
   public String getSystem() {
    return system;
   }
   public void setSystem(String system) {
    this.system = system;
   }

   @Override
   @JsonIgnore
    public String getObjectId() {
    return this.userName;
   }

   @Override
   @JsonIgnore
   public Object getObjectData() {
    try {
        return this.clone();
    }
    catch (Exception e) {
        return null;
    }
   }
   @Override
   public String getName() {
    return this.userName;
    }
    } 
```

但是，如果我运行 main 方法，系统会返回给我这个异常：

```
Exception in thread "main" java.lang.NullPointerException
at org.codehaus.jackson.map.introspect.AnnotatedClass.resolveClassAnnotations(AnnotatedClass.java:295)
        at org.codehaus.jackson.map.introspect.AnnotatedClass.construct(AnnotatedClass.java:141)
        at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forClassAnnotations(BasicClassIntrospector.java:185)
        at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forClassAnnotations(BasicClassIntrospector.java:15)
        at org.codehaus.jackson.map.SerializationConfig.introspectClassAnnotations(SerializationConfig.java:661)
        at org.codehaus.jackson.map.ser.BasicSerializerFactory.createTypeSerializer(BasicSerializerFactory.java:180)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory.findPropertyContentTypeSerializer(BeanSerializerFactory.java:406)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory._constructWriter(BeanSerializerFactory.java:778)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanProperties(BeanSerializerFactory.java:608)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory.constructBeanSerializer(BeanSerializerFactory.java:436)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanSerializer(BeanSerializerFactory.java:349)
        at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:295)
        at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:778)
        at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:731)
        at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:369)
        at http://stackoverflow.com/questions/6661717/how-to-process-an-invalid-value-with-jackson-json-processororg.codehaus.jackson.map.ser.StdSerializerProvider.findTypedValueSerializer(StdSerializerProvider.java:452)
        at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:597)
        at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:280)
        at org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:2260)
        at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1813)
        at it.unina.edoc.json.TestJson.main(TestJson.java:65) 
```

我不知道这个异常，因为由于 USE_ANNOTATION 错误配置，@Annotations 应该被忽略。此外，如果我将 USE_ANNOTATION 设置为 true，错误就会消失。我的构建路径上有这些罐子：

*   杰克逊核心asl-1.8.3.jar
*   杰克逊-jaxrs-1.8.3.jar
*   jackson-mapper-asl-1.8.3.jar
*   杰克逊-xc-1.8.3.jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:07:44.497

DeserializationConfig.Feature.USE_ANNOTATIONS 属性（设置为 false）的使用将导致 JACKSON DeserializerConfig 类使用 NopAnnotationIntrospector。然后将使用此 NopAnnotationIntrospector 解析类的注释。NopAnnotationIntrospector 将对类上的任何注释的每个 isHandled 请求返回 false - 实际上不会在进一步处理中使用此注释。

所以 - 系统仍然“检查”注释 - 在这种情况下必须在 Classpath 上。由于 Android 不提供任何 jaxb-api 注释，这会导致 NoClassDefFoundError。

我预计 USE_ANNOTATIONS = false 会让 JACKSON 完全忽略任何注释 - 但不幸的是它没有。我现在将使用 Jackson Streaming API 来解析 JSON 字符串，而不是使用 JACKSON 数据绑定功能。

# c - 自定义释放函数是否应该考虑与通用容器的兼容性？

> ID：10418354
> 
> 赞同：1
> 
> 时间：2012-05-02T16:58:23.093
> 
> 标签：c, containers, void-pointers, generic-programming

在 C 中，如果您想拥有通用容器，一种流行的方法是使用`void*`. 如果通用容器包含一些具有自己的释放函数的自定义结构，它可能会要求该函数：

```
struct Foo {...};
Foo *Foo_Allocate(...);
void Foo_Deallocate(const Foo*);

int main(void)
{
    /* Let's assume that when you create the list you have to
       specify the deallocator of the type you want to hold */
    List *list = List_Allocate(Foo_Deallocate);

    /* Here we allocate a new Foo and push it into the list.
       The list now has possession of the pointer. */
    List_PushBack(list, Foo_Allocate());

    /* When we deallocate the list, it will also deallocate all the
       items we inserted, using the deallocator specified at the beginning */
    List_Deallocate(list);
} 
```

但很可能释放器函数的类型需要一个`void*`

```
typedef void (*List_FnItemDeallocator)(const void*); 
```

问题是`Foo_Deallocate`需要 a `const Foo*`，而不是 a `const void*`。即使它们的签名不匹配，传递函数是否仍然安全？可能不是，因为指针类型在 C 中不一定是相同的大小。

如果这不可能，那么让所有释放器函数采用 a`const void*`而不是指向它们相关类型的指针是否是个好主意，以便它们与通用容器兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:07:01.523

正如您所说，将指针分配给不同的函数类型是无效的。

您应该将 a`void*`作为参数，并在每个函数内部执行一些检查，以查看给定指针是否与预期类型匹配（例如检查结构开头的幻数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:19:31.743

如前所述，您可以使用幻数或“标题”来指定析构函数。您可以使用此标头走得很远，甚至可以选择一个“众所周知的、已注册的”释放器（在这种情况下，您实际上不需要存储函数指针，可能只是将整数索引存储到数组中），或者有一个 '标头中的 flags 部分，指定它包含一个“扩展”释放器。可能性很远，很有趣。

所以你的列表“标题”看起来像这样

```
#define LIST_HEAD struct list *next; struct list *prev; short flags;
struct list { LIST_HEAD };
struct list_with_custom_deallocator { LIST_HEAD void (*dealloc)(void*); }; 
```

现在，实际上回答了您的问题.. 为什么不定义一个通用的标头类型，并让您的释放器获取指向*该*类型的指针（在我的示例中为 a `struct list*`），然后将其转换为任何特定的相关类型-甚至更好，也许启发式地确定实际的结构和释放`flags`器（如 Binyamin 所暗示的）。

# google-docs - 如何将分页符从 html 导入到谷歌文档？

> ID：10418357
> 
> 赞同：3
> 
> 时间：2012-05-02T16:58:32.287
> 
> 标签：google-docs, google-docs-api

我正在尝试以 html 格式导出文档并再次导入（出于测试目的，我什至不编辑文件）。导出后，我可以看到分页符保存在 html 中：

```
<hr style="page-break-before:always;display:none;"> 
```

但是在我将此文件导入谷歌文档并进行转换后，分页符未在文档中实现。我只能看到分页符应该在的一行。有没有办法让它工作？

PS：我正在使用 python gdata v3 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-06T09:27:55.907

我也一直在找这个。看起来这就像添加一样简单：

```
<hr class="pb"> 
```

信用：[https ://productforums.google.com/forum/#!topic/docs/fqLmAJkPpTs](https://productforums.google.com/forum/#!topic/docs/fqLmAJkPpTs)

# perl - 如何启用 cgi-perl-script 以 root-authorization 执行操作？

> ID：10418361
> 
> 赞同：2
> 
> 时间：2012-05-02T16:59:21.807
> 
> 标签：perl, cgi, authorization

我是我自己的网络服务器的根，我确实编写了一个 perl 脚本来维护我的网站。从浏览器调用此脚本显示用于维护的用户界面。为了能够从我的浏览器启动这个脚本，我必须输入用户名和密码，所以除了我之外没有人可以运行这个脚本。

当我点击相应的按钮时，我希望这个脚本重命名服务器上的一些文件。从 perl-script 我调用 shell-command ``mv oldFilename newFilename``，但没有任何反应。Apache 的错误日志显示以下消息：

> [ *timestring* ] [error] [client *nnnn* ] mv: cannot move *oldFilename* to *newFilename* : Permission denied, referer: *referrer*

*filename*的所有者是 root，权限设置为 0644（每个人都可以读取，只有 root 可以写入）

这个问题的最佳解决方案是什么？有没有比将文件权限更改为 0666 更好的方法？我想避免更改权限。我更喜欢一种解决方案，其中 perl 脚本对 shell 说：“*亲爱的 shell，这是 root 的密码。现在请将文件 X 重命名为 Y！* ”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:06:28.367

这不正是 Unix 小组想要解决的问题吗？将文件权限设置为`0664`，将目录权限设置为`0775`，并将文件和目录分配给 webserver 用户所属的组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:15:57.813

不要忽视安全。使用[sudo](http://en.wikipedia.org/wiki/Sudo)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:40:19.973

我维护一个带有 html 页面和 Java 脚本的 Perl 网站。所有程序文件均受根所有权保护。

即使您通过网站上的用户名和密码限制对该程序的访问，root 也应该拥有该程序`chown root:root <full-path-to-your-program-name>`，并且该程序文件应该受到保护`chmod 755 <full-path-to-your-program-name>`。

# ruby-on-rails - Rails - 从另一个进程启动后台进程（Resque）

> ID：10418363
> 
> 赞同：0
> 
> 时间：2012-05-02T16:59:26.420
> 
> 标签：ruby-on-rails, background-process, resque

我有一个将 Resque 用于后台进程的应用程序。所以我有

```
-/app/workers/dataCollector.rb 
```

在控制器中：

```
def new
    @my_model = MyModel.new(params[:])
    Resque.enqueue(DataCollector, @my_model.id)
end 
```

我想添加另一个工作人员，它会在某个时候从 dataCollector 获取一些信息并进行处理。

所以我尝试了：

```
-app/workers/dataCollector.rb
            /dataProcessor.rb 
```

并在我的 MyModel 课程中：

```
def my_function
    ...
    data.each do |d|
        Resque.enqueue(DataProcessor, data)
    end
end 
```

我的新工人看起来像：

```
class DataProcessor
  @queue = :processing_queue
  def self.perform(data)
    new_var = processingFunction(data)
    newModel.column = new_var
  end
end 
```

产生的错误是“堆栈级别太深”</p>

我在本地运行了一次程序......

```
 bundle exec env rake resque:work QUEUE='*'
 redis-server /usr/local/etc/redis.conf 
```

并且永远不会在 resque Web 界面中看到 processing_queue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T09:20:15.193

根本问题是一个错字。代替：

```
data.each do |d|
    Resque.enqueue(DataProcessor, data)
end 
```

我想你的意思是：

```
data.each do |d|
    Resque.enqueue(DataProcessor, d)
end 
```

那么您看到消息“堆栈级别太深”的原因是[Resque 作业只能接受可以 JSON 编码的参数](https://github.com/resque/resque/tree/1-x-stable#persistence)，并且可能`data`不能。

# jsf - PrimeFaces 3.0 中的标记

> ID：10418368
> 
> 赞同：0
> 
> 时间：2012-05-02T16:59:40.663
> 
> 标签：jsf, primefaces

我想创建一个基于 JSF 2.0 和 PrimeFaces 3.0 的 Java Web 应用程序我对标签有一些问题：http: [//www.primefaces.org/showcase/ui/ring.jsf](http://www.primefaces.org/showcase/ui/ring.jsf)

我在标签中使用的图片大于默认限制，我不能再减小它们的大小以保持它们的良好分辨率。我试图改变许多标签的宽度和高度，但没有什么新东西那么我如何修改提供的源代码以在环形标签中使用更大的照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:34:10.973

解决方案1.覆盖ui-ring css样式类的height属性值。您可以在其中使用自定义 css 文件或内联样式标签`.ui-ring { height: 18em; }`。

解决方案 2\. 使用 style 属性直接设置高度`style="height: 18em !important;"`（!important 可能不需要）

**5**月 3 日更新

要放大环，您可以使用 style 属性定义固定宽度值。组件将自动调整图像之间的距离。例如：`width: 100%;`或`width: 300px`或`width: 50em`

不幸的是，没有办法调整 Ring 组件的其他选项，只有缓动。

# javascript - 无法在 Magento 中加载文件，尽管它们存在于服务器上

> ID：10418380
> 
> 赞同：0
> 
> 时间：2012-05-02T17:00:47.573
> 
> 标签：javascript, jquery, magento, e-commerce

我在安装 Magento 1.5.1 时遇到问题。这不是全新安装，而是已在另一台服务器上移动的安装（复制了文件和数据库）。

它无法加载我的 Javascript 文件，因此我的菜单和与 JS 相关的所有内容都不起作用。管理员中的此行为与前端商店中的行为相同。我已经三次检查文件是否在服务器上，我可以通过 FTP 访问和编辑它们，但不能通过 HTTP（浏览器）访问和编辑它们。文件的权限为 644，包含它们的文件夹的权限为 766。

关于它为什么有这种行为的任何线索？这让我发疯了，我在移植网站时已经迟到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:17:21.870

如果您的权限与您描述的一样，那么您的 Web 服务器（apache？）的行为符合预期。

用户需要对该文件夹的执行权限才能`cd`访问该文件夹。当“您”将权限更改为 时`766`，您最终会得到这样的位掩码

```
drwxrw-rw- 
```

或者拆分出来有用

```
 User  Group   Everyone
d rwx   rw-     rw- 
```

所以你的用户对文件夹有**读**、写**和**执行**权限**，但组和每个人的权限只有**读**、**写**。这意味着用户 apache 运行时没有执行权限，因此无法更改到文件夹，因此不会提供该文件夹中的任何文件。

传统上`chmod 755`，您需要 Web 服务器上的文件夹，或者**如果** `777`您的安全容忍度使您对系统上的任何用户帐户都具有对该文件夹的写访问权限感到满意。如果您无法做出判断，您可能需要考虑寻找具有 IT/Magento 支持服务的特定主机，因为托管 Web 应用程序（甚至是“简单”的电子商务商店）在 2012 年的互联网上是一项艰巨的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T20:52:53.113

766错误，设置为775。当目录设置为6时，不能“执行”，即不能访问。

# iphone - AFNetworking UIImageView setImageWithURLRequest 返回响应代码 0

> ID：10418381
> 
> 赞同：2
> 
> 时间：2012-05-02T17:01:03.983
> 
> 标签：iphone, objective-c, ios, ipad, afnetworking

我正在使用 AFNetworking 的 UIImageView 类别，并且在我的响应代码状态中不断收到响应代码 0。知道这是为什么吗？这是我的做法：

```
[self.newsPicture_ setImageWithURLRequest:storyImageRequest 
                                         placeholderImage:nil 
                                                  success:^(NSURLRequest * request, NSHTTPURLResponse * response, UIImage * image) {
                                                      if ([response statusCode] == 200){
                                                          dispatch_async(dispatch_get_main_queue(), ^(void){

 });
                                                      } else {
                                                          NSLog(@"RESPONSE ERROR WITH CODE IS %d", [response statusCode]);
                                                      }
                                                  }failure:^(NSURLRequest * request, NSHTTPURLResponse * response, NSError * error){
                                                      if (error){
                                                          NSLog(@"Error in requesting news story image");
                                                      }
                                                  }]; 
```

知道为什么会发生这种情况吗？

这仅在我使用基于块的函数调用时发生。

当我使用 setImageWithURL 时，一切正常

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T17:37:20.677

`UIImageView+AFNetworking`使用内部缓存来优化滚动视图和表视图的性能。响应代码 0 表示图像来自该内部缓存而没有发出 HTTP 请求。您不需要检查状态代码是否为 200 in `success`，因为这已经是成功/失败区分正在做的事情。

# ruby-on-rails - Rails 设计 - 重置密码时更新错误

> ID：10418382
> 
> 赞同：0
> 
> 时间：2012-05-02T17:01:09.613
> 
> 标签：ruby-on-rails, ruby, devise

我有这个控制器代码：

```
 def update

    super
    respond_to do |format|
      format.html{redirect_to session[:redirect_to]}
    end
  end 
```

我的类继承自这样的设计密码：

```
class Mobile::PasswordsController < Devise::PasswordsController 
```

我得到这个错误：

```
AbstractController::DoubleRenderError in Mobile::PasswordsController#update

    Render and/or redirect were called multiple times in this action. 
Please note that you may only call render OR redirect, and at most once per action. 
Also note that neither redirect nor render terminate execution of the action, so 
if you want to exit an action after redirecting, you need to do something like 
"redirect_to(...) and return". 
```

知道该怎么做吗？我知道它的重定向，但我不知道如何使它们正确。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:40:40.433

[Devise gem的`update`方法](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/passwords_controller.rb)已经有一个重定向。然后你调用你的重定向，这会导致错误。如果你想做一个自定义重定向，你需要重写一个没有`super`像这样调用的 Devise 方法：

```
def update
    self.resource = resource_class.reset_password_by_token(params[resource_name])

    if resource.errors.empty?
      flash_message = resource.active_for_authentication? ? :updated : :updated_not_active
      set_flash_message(:notice, flash_message) if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with resource, :location => #your_path_on_success
    else
      flash[:error] = resource.errors.full_messages
      redirect_to #your_path_on_failure
    end
  end 
```

# php - 如何查找当前时间戳和登录日期之间的天数

> ID：10418389
> 
> 赞同：4
> 
> 时间：2012-05-02T17:01:56.917
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)
> [如何使用php查找两个日期之间的天数](https://stackoverflow.com/questions/2040560/how-to-find-number-of-days-between-two-dates-using-php)
> [如何查找两个指定日期之间的日期？](https://stackoverflow.com/questions/2736784/how-to-find-the-dates-between-two-specified-date)

我的表中有三个字段

```
 seeker
 name ....current_time.... login_date

second field i have created through timestamp phpmyadmin
type: timestamp
default: current_timestamp 
```

当搜索者注册时，他的 current_time 自动按时间戳插入

```
 third field is login_date filed. when user logins then this field is updated 

//login date
$login_date = date("Y-m-d");
echo "login date"."".$login_date;
$qry1 = "update seeker set login_date = '$login_date' where name='$uname'";
$res1=mysql_query($qry1,$con);

now current_date is like 
"2012-04-10 21:58:01"

and login_date is like
"2012-05-02" 
```

我想找出这两个日期之间的天数。我不知道如何减去这些日期，因为 current_date 也包括时间.. 或者有没有其他方法可以从当前日期中排除时间，即它只输入日期而不是时间

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T17:09:54.963

```
 $login_date = strtotime(x); // change x with your login date var
 $current_date = strtotime(y); // change y with your current date var
 $datediff = $current_date - $login_date;
 $days = floor($datediff/(60*60*24)); 
```

# jquery - asp.net mvc 3 razor & jquery ui datepicker

> ID：10418391
> 
> 赞同：0
> 
> 时间：2012-05-02T17:02:21.533
> 
> 标签：jquery, asp.net-mvc-3, razor

我想在我的日期时间文本框中显示 jquery datepickers。

我在 Views/Shared/EditorTemplates 创建了 DateTime.cshtml 文件，添加了这个：

```
@model Nullable<System.DateTime>
@if (Model.HasValue)
{
    @Html.TextBox("", String.Format("{0:yyyy-MM-dd HH:mm}", Model.Value), new { @class = "date" })
}
else
{
    @Html.TextBox("", String.Format("{0:yyyy-MM-dd HH:mm}", ""), new { @class = "date" })
}
@{
    string name = ViewData.TemplateInfo.HtmlFieldPrefix;
    string id = name.Replace(".", "_");
}
<reference path="jquery-1.4.4.js" />
<reference path="jquery-ui.js" />
<script type="text/javascript">
    $(document).ready(function () {
        $(".date").datepicker
            ({
                dateFormat: 'dd/mm/yy',
                showStatus: true,
                showWeeks: true,
                highlightWeek: true,
                numberOfMonths: 1,
                showAnim: "scale",
                showOptions: {
                    origin: ["top", "left"]
                }
            });
    });
</script> 
```

这是我的看法：

```
<td>
                <div class="editor-label" >
                    @Html.LabelFor(model => model.Birthdate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Birthdate, null, new { @class = "date"})
                    @Html.ValidationMessageFor(model => model.Birthdate)
                </div>
</td> 
```

我在实体 ado 模型中的模型：

```
 public Nullable<global::System.DateTime> Birthdate
        {
            get
            {
                return _Birthdate;
            }
            set
            {
                OnBirthdateChanging(value);
                ReportPropertyChanging("Birthdate");
                _Birthdate = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Birthdate");
                OnBirthdateChanged();
            }
        } 
```

但它不起作用我已经添加`$(".date").click(function{alert('Clicked')});`但`DateTime.cshtml`jquery没有提醒任何东西

谢谢

浏览器 html

```
<!DOCTYPE html>

<html>

<head>

    <title>Add Client - Lombard Admin Panel</title>

    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />

    <script src="/Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>

    <script src="/Scripts/jquery-ui.js" type="text/javascript"></script>

    <link href="/Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />

</head>

<body>

    <div>

        <div id="top-bar">

            <div class="page-full-width cf">

                <ul id="nav" class="fl">

                    <li class="v-sep"><a href="#" class="round button dark ic-left-arrow image-left">მთავარი

                        საიტი&lt;/a></li>

                    <li class="v-sep"><a href="/home" class="round button dark home-left image-left">სახლი

                    </a></li>

                    <li class="v-sep"><a href="#" class="round button dark menu-user image-left">შესული

                        ხართ როგორც: <strong>acid</strong></a>

                        <ul>

                            <li><a href="#">ლომბარდის პროფილი&lt;/a></li>

                            <li><a href="#">პარამეტრები&lt;/a></li>

                            <li><a href="#">პაროლის შეცვლა</a></li>

                            <li><a href="/logout">გასვლა</a></li>

                        </ul>

                    </li>

                    <li><a href="#" class="round button dark menu-email-special image-left">3 ახალი შეტყობინება&lt;/a></li>

                    <li><a href="#" class="round button dark menu-logoff image-left">გასვლა</a></li>

                </ul>

            </div>

        </div>

        <div id="header-with-tabs">

            <div class="page-full-width cf">

                <a href="#" id="company-branding-small" class="fr">

                    <img src="/Content/images/company-logo.png" alt="Blue Hosting" /></a>

            </div>

        </div>

        <div id="content">

            <div class="page-full-width cf">

                <div class="side-menu fl">

                    <h3>

                        მთავარი მენიუ&lt;/h3>

                    <ul>

                        <li><a href="#">დამატება/რედაქტირება&lt;/a>

                            <ul>

                                <li><a href="#">ფილიალები&lt;/a></li>

                                <li><a href="/client">კლიენტები&lt;/a></li>

                                <li><a href="#">მომხმარებლები&lt;/a></li>

                                <li><a href="details.aspx">კომპანიის დეტალები</a></li>

                            </ul>

                        </li>

                        <li><a href="#">საწყობი&lt;/a></li>

                        <li><a href="#">შემოსავლები&lt;/a></li>

                        <li><a href="#">გაყიდვების ისტორია&lt;/a></li>

                        <li><a href="#">ანალიზი&lt;/a></li>

                    </ul>

                </div>

                <div class="side-content fr">

                    <div class="content-module">

                        <div id="render-body">

                            <h1>

    ახალი კლიენტის დამატება</h1>

<br />

<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>

<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

<script src="/Scripts/jquery-ui.js" type="text/javascript"></script>

<script src="/Scripts/jquery-1.4.4.js" type="text/javascript"></script>

<link href="/Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />

<form action="/client/Create" method="post">    <table>

        <tr>

            <td>

                <div class="editor-label">

                    <label for="Firstname">სახელი</label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Firstname" name="Firstname" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Firstname" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="Lastname">გვარი&lt;/label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Lastname" name="Lastname" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Lastname" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="IsMale">სქესი&lt;/label>

                </div>

                <div class="editor-field">

                    <select class="list-box tri-state" id="IsMale" name="IsMale"><option selected="selected" value="">Not Set</option>

<option value="true">True</option>

<option value="false">False</option>

</select>

                    <span class="field-validation-valid" data-valmsg-for="IsMale" data-valmsg-replace="true"></span>

                </div>

            </td>

            <td>

                <div class="editor-label" >

                    <label for="Birthdate">დაბადების თარიღი</label>

                </div>

                <div class="editor-field">

                    <input class="date" id="Birthdate" name="Birthdate" type="text" value="" /><reference path="jquery-1.4.4.js" />

<reference path="jquery-ui.js" />

<script type="text/javascript">

    $(document).ready(function () {

        $(".date").click(function{

        alert('Boo')

        });

        $(".date").datepicker

            ({

                dateFormat: 'dd/mm/yy',

                showStatus: true,

                showWeeks: true,

                highlightWeek: true,

                numberOfMonths: 1,

                showAnim: "scale",

                showOptions: {

                    origin: ["top", "left"]

                }

            });

    });

</script>

                    <span class="field-validation-valid" data-valmsg-for="Birthdate" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="PrivateNumber">პირადი ნომერი</label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="PrivateNumber" name="PrivateNumber" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="PrivateNumber" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="Address">მისამართი&lt;/label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Address" name="Address" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>

                </div>

            </td>

            <td>

                <div class="editor-label">

                    <label for="Phone1">ტელ. 1</label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Phone1" name="Phone1" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Phone1" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="Phone2">ტელ. 2</label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Phone2" name="Phone2" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Phone2" data-valmsg-replace="true"></span>

                </div>

                <div class="editor-label">

                    <label for="Email">ელ-ფოსტა&lt;/label>

                </div>

                <div class="editor-field">

                    <input class="text-box single-line" id="Email" name="Email" type="text" value="" />

                    <span class="field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>

                </div>

            </td>

        </tr>

    </table>

    <br />

    <p>

        <input type="submit" value="დამატება" class="button round blue image-right ic-add text-upper" />

    </p>

</form><div>

    <a href="/client">უკან დაბრუნება&lt;/a>

</div>

                        </div>

                    </div>

                </div>

            </div>

        </div>

        <div id="footer">

            <p>

                &copy; Copyright 2012 <a href="#">Acid Labs 2011</a>. All rights reserved.</p>

            <p>

                <strong>Lombard Admin Panel </strong>V 1.0 <a href="http://www.acidlabs.ge">Acid Labs</a></p>

        </div>

    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T09:45:46.913

好的，我遇到了类似的问题，这就是我解决问题的方法：

我创建了一个 UserControl 并在 Views/Shared/EditorTemplates 中将其命名为“DateTime”（DateTime.ascx）添加添加了这个：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<System.DateTime?>" %>
<%: Html.TextBox("",  String.Format("{0:yyyy-MM-dd}", Model.HasValue ? Model : DateTime.Today), new { @class = "dp"})%> 
```

我的视图看起来像这样：

```
<div class="editor-field">
        @Html.EditorFor(model => model.ReleaseDate) 
        @Html.ValidationMessageFor(model => model.ReleaseDate)
    </div> 
```

我的脚本如下所示：

```
<script type="text/javascript">
$(function () {
    $(".dp").datepicker();
}); 
```

这些是我添加的链接（如果你没有它们）：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js") " type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.core.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DatePickerReady.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" type="text/css" rel="Stylesheet"/>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" type="text/css"/ rel="Stylesheet"/>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" type="text/css" rel="Stylesheet"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:27:52.313

你有很多问题。首先，您需要去掉模板中的引用标签，它们是不合法的。这不是您使用参考标签的方式。

其次，您不想包含 script 标签，否则如果页面上有多个 DateTime，它将多次执行代码。

接下来，您不能这样做：

```
@Html.EditorFor(model => model.Birthdate, null, new { @class = "date"}) 
```

编辑器模板不采用 html 属性。您还指定了一个空模板（第二个参数），因此它根本不使用任何模板，即使您的模板名为 DateTime.cshtml，这也会覆盖模板选择。

只需这样做：

```
@Html.EditorFor(model => model.Birthdate) 
```

另外，在你的属性的类型定义中去掉 global:: ，而是确保你在 using 列表中包含 System 。不确定 global:: 是否会干扰类型解析。

# vb.net - VB.net 和基本编程中的参考资料

> ID：10418395
> 
> 赞同：1
> 
> 时间：2012-05-02T17:02:33.283
> 
> 标签：vb.net, reference

我已经编程了一段时间，但是我有一些基本的问题，其中一个如下：

```
Public Class PriceListDetails
    Dim pricelist As BSPLib.PriceLists.PriceList
    Dim IsReadOnly1 As Boolean

    Public Sub New(ByVal IsReadonly2 As Boolean)

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.

        'Readonly prevents from Modifying/Saving
        IsReadOnly1 = IsReadonly
    End Sub
End Class 
```

是否必须创建 IsReadyOnly1 和 IsReadyOnly2，有没有办法像引用类型一样直接将参数从新方法获取到 IsReadyOnly1？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:10:25.407

很难说出你的意思，发布的代码无法编译。我猜你的意思是这样的：

```
Private IsReadOnly As Boolean

Public Sub New(ByVal IsReadOnly As Boolean)
    InitializeComponent()
    Me.IsReadOnly = IsReadOnly
End Sub 
```

其中*Me*关键字确保分配字段而不是参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:12:28.060

使用构造函数参数设置成员是 OOP 中非常常见的做法。但是，如果您使用公共属性，那么您也可以使用对象初始值设定项：

```
Dim priceList1 = New PriceListDetails With {.IsReadOnly = True} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:10:56.530

Boolean 不是引用类型变量，所以不可能。

如果您想复制参考，那么您还需要两个变量。您只能将 IsReadonly2 作为参考。

# python - 字符串乘法与 for 循环

> ID：10418398
> 
> 赞同：2
> 
> 时间：2012-05-02T17:02:43.580
> 
> 标签：python

我在 CodingBat.com 上解决了一个 Python 问题。我为打印字符串 n 次的简单问题编写了以下代码-

```
def string_times(str, n):
    return n * str 
```

官方结果是——

```
def string_times(str, n):
    result = ""
    for i in range(n):
       result = result + str
    return result

print string_times('hello',3) 
```

两个函数的输出相同。我很好奇字符串乘法（第一个函数）如何在性能基础上针对 for 循环（第二个函数）执行。我的意思是哪一个更快并且最常用？

另外请建议我自己获得这个问题的答案（使用 time.clock() 或类似的东西）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:12:16.390

我们可以使用[该`timeit`模块](http://docs.python.org/library/timeit.html)进行测试：

```
python -m timeit "100*'string'"
1000000 loops, best of 3: 0.222 usec per loop

python -m timeit "''.join(['string' for _ in range(100)])"
100000 loops, best of 3: 6.9 usec per loop

python -m timeit "result = ''" "for i in range(100):" "  result = result + 'string'"
100000 loops, best of 3: 13.1 usec per loop 
```

您可以看到乘法是更快的选择。您可以注意到，虽然字符串连接版本在 CPython 中并没有那么糟糕，[但在其他版本的 Python 中可能并非如此](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#String_Concatenation)。您应该始终选择字符串乘法或`str.join()`出于这个原因 - 不仅是速度，还有可读性和简洁性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:13:55.490

我已经为以下三个功能计时：

```
def string_times_1(s, n):
    return s * n

def string_times_2(s, n):
    result = ""
    for i in range(n):
       result = result + s
    return result

def string_times_3(s, n):
    "".join(s for _ in range(n)) 
```

结果如下：

```
In [4]: %timeit string_times_1('hello', 10)
1000000 loops, best of 3: 262 ns per loop

In [5]: %timeit string_times_2('hello', 10)
1000000 loops, best of 3: 1.63 us per loop

In [6]: %timeit string_times_3('hello', 10)
100000 loops, best of 3: 3.87 us per loop 
```

如您所见，`s * n`它不仅最清晰、最简洁，而且也是最快的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T17:05:51.977

您可以从命令行或代码中使用[timeit的东西来查看一些 python 代码的速度：](http://docs.python.org/library/timeit.html)

```
$ python -m timeit "\"something\" * 100"
1000000 loops, best of 3: 0.608 usec per loop 
```

为您的其他功能做类似的事情并进行比较。

# c++ - 在 C 中创建一个 DLL 并从 C++ 项目中链接它

> ID：10418404
> 
> 赞同：8
> 
> 时间：2012-05-02T17:03:01.767
> 
> 标签：c++, c, dll, linker

根据标题，我正在尝试使用 C 构建一个 DLL 并将其从 C++ 项目链接。我在互联网上阅读并遵循了不同的教程，但每次都缺少一些东西，我不明白是什么。

这是我做的，一步一步：

我创建了一个名为 的新 Win32 项目，`testlib`然后，从向导中，我选择了“DLL”和“空项目”。

添加了一个标题：

```
//testlib.h

#include <stdio.h>

__declspec(dllexport) void hello(); 
```

添加了一个来源；因为我希望它是我阅读的 C 源代码，所以我应该简单地重命名 .c 中的 .cpp 文件，所以

```
//testlib.c

#include "testlib.h"

void hello() {
    printf("DLL hello() called\n");
} 
```

构建成功。

现在我想在另一个项目中使用我有用的 dll。

然后：新项目（`testlibUse`）。这次我选择了“空项目”。
无需添加header，创建一个cpp源即可

```
//main.cpp
#include <testlib.h>

int main() {
    hello();
} 
```

然后：

*   我将路径添加到`testlib.dll`属性-> VC++ 目录-> 可执行目录中的文件夹

*   我将路径添加到`testlib.h`属性-> VC++ 目录-> 包含目录中的文件夹

*   `testlib.lib`我在属性->链接器->输入->附加依赖项中添加了（包含的扩展名）的路径

我尝试构建，但出现链接器错误：

> LINK : C:\path\testlibUse\Debug\testlibUse.exe 未找到或不是由最后一个增量链接构建的；执行完整链接
> main.obj：错误 LNK2019：无法解析的外部符号“void __cdecl hello(void)”(?hello@@YAXXZ) 在函数 _main
> C:\path\testlibUse\Debug\testlibUse.exe 中引用：致命错误 LNK1120：1未解决的外部

如果我回到，`testlib`重新命名并重新构建 dll，那么我可以构建，但在运行时出现“找不到 dll”错误。`testlib.c``testlib.cpp``testlibUse`

我还尝试在“发布”中更改两个项目的配置（在需要的地方更改路径），但没有任何改变。

很抱歉这篇文章很长，但我认为有必要准确地写下我所做的。

有什么建议么？

此外，如果我想在 Qt 项目中使用我的 dll，是否需要更改任何配置参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T17:26:27.203

你有几个问题：

1.  头文件应将函数标记为在 DLL 中编译时导出但在库用户编译时导入。
2.  头文件应在编译为 C++ 时将函数声明包装在一个`extern "C"`块中，以确保名称不会被破坏
3.  DLL 不在可执行文件的库搜索路径中，因此在运行时无法找到。

要修复 (1) 和 (2)，请像这样重写标题：

```
#ifdef __cplusplus
extern "C" {
#endif

// Assume this symbol is only defined by your DLL project, so we can either
// export or import the symbols as appropriate
#if COMPILING_MY_TEST_DLL
#define TESTLIB_EXPORT __declspec(dllexport)
#else
#define TESTLIB_EXPORT __declspec(dllimport)
#endif

TESTLIB_EXPORT void hello();
// ... more function declarations, marked with TESTLIB_EXPORT

#ifdef __cplusplus
}
#endif 
```

要修复 (3)，请将 DLL 复制到与可执行文件相同的文件夹中。您设置的“可执行目录”设置不会影响 DLL 搜索——有关如何搜索 DLL 的详细说明，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)对您来说最好的解决方案是将 DLL 复制到可执行文件所在的目录中。您可以手动执行此操作，也可以将构建后步骤添加到为您执行此操作的项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:09:53.940

你应该`extern "C"`包括：

```
extern "C" {
    #include <testlib.h>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:09:33.170

看起来您似乎需要确保编译器不会[破坏](http://en.wikipedia.org/wiki/Name_mangling)cpp 构建中的符号名称。您应该能够`extern "C"`在 testlib.h 中的定义中添加一个：

```
#ifdef __cplusplus
extern "C"
#endif
__declspec(dllexport) void hello(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T17:26:46.097

这是 C++ 可以包含的 C 头文件的方法。确保`TESTLIB_EXPORTS`仅在您的**DLL**预处理器设置中进行设置。在包含此头文件以使用 DLL 的项目中，头文件会将函数声明为导入而不是导出。

守卫将`__cplusplus`告诉编译器使用 C 名称修饰而不是 C++ 名称修饰来导入您的函数。

```
#include <stdio.h>

#ifdef TESTLIB_EXPORTS
#define TESTLIB_API __declspec(dllexport)
#else
#define TESTLIB_API __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C" {
#endif

TESTLIB_API void hello();
/* other prototypes here */

#ifdef __cplusplus
}
#endif 
```

# facebook-like - 单击我的应用程序上的“喜欢”按钮后，个人时间轴上会显示不同的图标和名称

> ID：10418409
> 
> 赞同：0
> 
> 时间：2012-05-02T17:03:43.023
> 
> 标签：facebook-like, facebook-apps

我在[https://www.facebook.com/#!/iakverzekeringen](https://www.facebook.com/#!/iakverzekeringen)上创建了一个名为 EK 2012 actie 和 EK 2012 徽标的应用程序。当有人点击应用程序中的“赞”按钮时，它会显示 IAK 公司徽标和名称 IakApp我不知道它是从哪里来的。你知道为什么在应用程序的标志和应用程序名称的地方，API 显示的是我不清楚的公司标志和名称吗？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:08:53.287

您应该检查您的 opengraph 元标记是否实施良好。

检查这里的文档：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

有一个生成opengraph标签的工具。

# java - JSF t:datatable 和 c:forEach 看起来像冲突

> ID：10418413
> 
> 赞同：2
> 
> 时间：2012-05-02T17:03:54.997
> 
> 标签：java, jsf

我有`<t:datatable>`里面的哪些`<c:forEach>`项目`<c:forEach>`有列表。（我从后端 bean 检查）。

```
<t:dataTable id="insuranceListTable" rowIndexVar="row" width="100%"
styleClass="table" cellspacing="0" border="0"
value="#{insuranceBackingBean.allInsurancesByPatientId}"
var="insuranceBean">
<h:column>
<f:facet name="header">
    <f:verbatim>Drug Formulary</f:verbatim>
</f:facet>
<h:panelGroup id="formularyInformation">
    <h:panelGroup rendered="#{!empty insuranceBean.response4CheckDrugFormulary.reactionList[0].warningList}">
        <c:forEach items="${insuranceBean.response4CheckDrugFormulary.reactionList[0].warningList}" var="warning">
            <b><span title="${warning.warningText}"><c:out value=" [${warning.warningCode}] "></c:out></span></b>
        </c:forEach>
    </h:panelGroup>
    &nbsp;&nbsp;
    <a4j:commandLink onclick="setVisibleAlternativeListGrid();" rendered="#{!empty insuranceBean.response4CheckDrugFormulary.reactionList[0].drugAlternativeList.alternativeList}">
        <a href="#" id="alternative">Alternative [<h:outputText value="#{insuranceBean.response4CheckDrugFormulary.reactionList[0].drugAlternativeList.count}"></h:outputText>]</a> &nbsp;
    </a4j:commandLink>
    <a4j:commandLink onclick="setVisibleAlternativeListGrid();" rendered="#{!empty insuranceBean.response4CheckDrugFormulary.reactionList[0].coPayList}">
        &nbsp;<a href="#" id="coPay">Co-Pay</a>
    </a4j:commandLink>
</h:panelGroup> 
</h:column>
</t:dataTable> 
```

下面不反映任何事情... :(

```
<c:forEach items="${insuranceBean.response4CheckDrugFormulary.reactionList[0].warningList}" var="warning">
        <b><span title="${warning.warningText}"><c:out value=" [${warning.warningCode}] "></c:out></span></b>
    </c:forEach> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:06:57.667

JSTL 标记在视图构建期间运行，其中 JSF 组件树是基于视图源代码生成的。JSF 组件在视图呈现期间运行，其中 HTML 输出基于 JSF 组件树生成。换句话说，JSTL 标记和 JSF 组件不会像您对编码所期望的那样同步运行。

在您的特定情况下，在`<c:forEach>`运行时，`${insuranceBean}`将始终评估为`null`，因为它已被定义为当时未运行`var`的 JSF组件。`<t:dataTable>`

你需要`<t:dataList>`而不是`<c:forEach>`.

```
<t:dataList value="#{insuranceBean.response4CheckDrugFormulary.reactionList[0].warningList}" var="warning">
    <b><span title="#{warning.warningText}"><h:outputText value=" [#{warning.warningCode}] " /></span></b>
</t:dataList> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# .htaccess - 重写子域例外

> ID：10418416
> 
> 赞同：0
> 
> 时间：2012-05-02T17:04:30.343
> 
> 标签：.htaccess, exception, mod-rewrite, subdomain

我对此使用了重写规则：

> RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?abrir=$1

仅当我的域为 WWW 或为空时，我如何才能进行此重写工作？因为我有其他不使用此规则的子域。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:08:26.053

添加

```
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteCond %{HTTP_HOST} ^example.com$ [NC] 
```

在你之前`RewriteRule`

# java - 关于通过在java中实现的反射的工厂设计模式

> ID：10418417
> 
> 赞同：1
> 
> 时间：2012-05-02T17:04:35.680
> 
> 标签：java, oop, reflection

> **可能的重复：**
> [关于通过反射的工厂设计模式](https://stackoverflow.com/questions/10417688/regarding-factory-design-pattern-through-reflection)

我正在对工厂模式进行研发，我开发了以下代码。现在我知道子类是`Dog`and `Cat`，但请告诉我。如果我想通过传递类名来通过反射实现同样的事情该`main.java`怎么办？

## 动物

```
public abstract class Animal {
    public abstract String makeSound();
} 
```

## 狗

```
public class Dog extends Animal {

    @Override
    public String makeSound() {
        return "Woof";
    }
} 
```

## 猫

```
public class Cat extends Animal {

    @Override
    public String makeSound() {
        return "Meow";
    }
} 
```

## 动物工厂

```
public class AnimalFactory {

    public Animal getAnimal(String type) {
        if ("canine".equals(type)) {
            return new Dog();
        } else {
            return new Cat();
        }
    }
} 
```

## 主要的

```
public class Main {

    public static void main(String[] args) {
        AnimalFactory animalFactory = new AnimalFactory();

        Animal a1 = animalFactory.getAnimal("feline");
        System.out.println("a1 sound: " + a1.makeSound());

        Animal a2 = animalFactory.getAnimal("canine");
        System.out.println("a2 sound: " + a2.makeSound());
    }
} 
```

请告知我如何向其中添加反射功能，这样我什至不需要确定类型，只需在主 java 中传递类名并创建该子类的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:06:29.693

```
public Animal getAnimal(String clName) {
  try {
      return (Animal) Class.forName(clName).newInstance();
  } catch (Exception e) {
      throw new RuntimeException(e);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:06:43.720

如果您传递类的完全限定名称，则可以按如下方式实例化它们：

```
return (Animal) Class.forName(fullyQualifiedClassName).newInstance(); 
```

为了避免 ClassCastException，您可以在调用之前测试返回的类`Class.forName()`确实是 的子类。为此使用。`Animal``newInstance()``isAssignableFrom`

# jquery - jQuery - 按 id 过滤元素

> ID：10418420
> 
> 赞同：0
> 
> 时间：2012-05-02T17:04:55.307
> 
> 标签：jquery

我正在尝试选择一组具有相似类的元素。然后按元素 id 过滤选择。有没有更好的方法来解决这个问题？

然后使用相同的 id，我想对使用相同的 show entitcal 类设置的元素做一些事情

```
$('ElementClass-1').attr('ElementId-1');
   $(this).hover(function(){
        ..do stuff
       });
  });

<a class="ElementClass-1" id="ElementId-1">hover me</a>
<a class="ElementClass-1" id="ElementId-2">hover me</a>
<a class="ElementClass-1" id="ElementId-3">hover me</a>
<div style="display:none; class="ElementId-1">show me</div>
<div style="display:none; class="ElementId-2">show me</div>
<div style="display:none; class="ElementId-3">show me</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:06:47.727

试试下面的东西，

```
$(ElementClass).each(function () {
    $('.' + this.id).<your_function>();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:25:17.673

您可以为所有元素添加一个具有相同名称的类吗？就像是

```
class="ElementSelector" 
```

稍后您可以使用该类进行选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:11:14.137

使用 jquery 的多属性选择器 [http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

第一个属性将是“类”，第二个属性将是“id”

# linq - LINQ 分组或拆分

> ID：10418423
> 
> 赞同：0
> 
> 时间：2012-05-02T17:05:02.017
> 
> 标签：linq, c#-4.0, entity-framework-4

我在做一些可能很简单的事情时遇到问题。

我的 LINQ 查询返回 10 个对象的结果集。

就像是：

```
Name: Bill, Action: aaa, Id: 832758
Name: Tony, Action: aaa, Id: 82fd58
Name: Bill, Action: bbb, Id: 532758
Name: Tony, Action: bbb, Id: 42fd58 
```

我需要做的是对这些进行分组，以便只有 2 行，即每个名称一个，但将带有“Action: bbb”的行移到不同的列中。所以输出将是：

```
Name: Bill, Action: aaa, Action_2: bbb, Id: 832758, Id_2: 532758
Name: Tony, Action: aaa, Action_2: bbb, Id: 82fd58, Id_2: 42fd58 
```

谁能向我解释我该怎么做？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:31:03.380

我认为没有真正简单的方法可以做到这一点。不过，我已经确定了这一点，这可能会让你开始：

```
var myData = new []
{
    new { Name = "Bill", Action="aaa", Id = "832758" },
    new { Name = "Tony", Action="aaa", Id = "82fd58" },
    new { Name = "Bill", Action="bbb", Id = "532758" },
    new { Name = "Tony", Action="bbb", Id = "42fd58" }
};

// group all the Names together
var result = from m in myData
group m by m.Name into names
orderby names.Key
select names;

// go through each Name group and create the output string to store in sbLines
var sbLines = new StringBuilder();
foreach (var name in result)
{
    var sb = new StringBuilder();
    sb.AppendFormat("Name: {0}, ", name.Key);

    int count = 1;
    foreach (var item in name)
    {
        if(count > 1)
            sb.AppendFormat("Action_{0}: {1}, ", count, item.Action);
        else
            sb.AppendFormat("Action: {0}, ", item.Action);
        count++;
    }

    count = 1;
    foreach (var item in name)
    {
        if(count > 1)
            sb.AppendFormat("Id_{0}: {1}, ", count, item.Id);
        else
            sb.AppendFormat("Id: {0}, ", item.Id);
        count++;
    }

    sbLines.Append(sb.ToString().Trim(new char[] { ' ',',' }));
    sbLines.Append(Environment.NewLine);
}

Console.WriteLine(sbLines.ToString()); 
```

在这里运行它：http: [//ideone.com/8UTxr](http://ideone.com/8UTxr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:54:47.070

```
var myData = new [] 
{ 
    new { Name = "Bill", Action="aaa", Id = "832758" }, 
    new { Name = "Tony", Action="aaa", Id = "82fd58" }, 
    new { Name = "Bill", Action="bbb", Id = "532758" }, 
    new { Name = "Tony", Action="bbb", Id = "42fd58" } 
}; 

var result = myData
    .GroupBy(x=>x.Name)
    .Select(g=>new
    {
        Name = g.Key,
        Action = g.First().Action,
        Action_2 = g.Last().Action,
        Id = g.First().Id,
        Id_2 = g.Last().Id
    }); 
```

上面的查询假设每个名称只有两行；如果每个名称有多行，则可以使用而不是取第二个`Action`/值`Id``.Skip(1).Take(1)``.Last()`

# jsf - JSF 过滤器跳过一些文件

> ID：10418426
> 
> 赞同：2
> 
> 时间：2012-05-02T17:05:24.483
> 
> 标签：jsf, servlet-filters

我有一个具有这种结构的项目（我无法更改）：

```
Web Pages
   META-INF
   WEB-INF
   assets (javascript, css and images)
   includes (top.xhtml, bottom.xhtml, etc)
   templates (master.xhtml)
   views
      fornecedor
         -home.xhtml
         -user.xhtml
         -login.xhtml
      franqueador
         -home.xhtml
         -user.xhtml
         -login.xhtml 
```

O`login.xhtml`每个文件夹都有一个原因，我不能更改它，它是由项目经理通过的。

这是我的会话过滤器：

```
@WebFilter("/views/*")
public class SessionFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
        LoginController loginController = (LoginController) ((boolean) (session != null) ? session.getAttribute("loginController") : null);
        if (!request.getRequestURI().endsWith("/fornecedor/index.xhtml")) {
            if (loginController == null || !loginController.getIsLoggedIn()) {
                response.sendRedirect(request.getContextPath()
                        + "/views/index.xhtml");
            } else {
                chain.doFilter(req, res);
            }
        }
    }

} 
```

它不起作用，返回一个没有 html 代码的空白页面，当我更改为时`.xhtml`，`.html`它给了我一个重定向循环。

我需要避开我`login.xhtml`的所有页面和`index.xhtml`on`views`文件夹。我已经调试了`if`我的过滤器，但它总是返回`false`。

**编辑**

按照 BalusC 的回答，我得出了这个结论：

```
if (!request.getRequestURI().endsWith("/views/index.html")
                && !request.getRequestURI().endsWith("/views/fornecedor/login.html")
                && !request.getRequestURI().endsWith("/views/franqueado/login.html")
                && (loginController == null || !loginController.getIsLoggedIn())) {
            response.sendRedirect(request.getContextPath() + "/views/index.html");

        } else {
            chain.doFilter(req, res);
        } 
```

它正在工作，但还有另一个问题，如果我有 10 个文件夹，我需要将它们添加到此`if`语句中......我需要使其自动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:17:13.753

你的第一个`if`条件没有`else`。这解释了空白页。

您需要在一个单一的情况下评估 URL 和登录条件`if`。

```
if (!request.getRequestURI().endsWith("/fornecedor/index.xhtml") && (loginController == null || !loginController.getIsLoggedIn()) {
    response.sendRedirect(request.getContextPath() + "/views/index.xhtml");
} else {
    chain.doFilter(req, res);
} 
```

至于重定向循环，那是因为您`FacesServlet`被映射到 URL 模式`*.html`而不是`*.xhtml`出于某种不清楚的原因。所以请求 URL 永远不会匹配。相应地修复过滤器中的 URL。要对所有请求进行概括，`login.html`请`index.html`执行以下操作：

```
if (!request.getRequestURI().endsWith("/index.html") 
    && !request.getRequestURI().endsWith("/login.html") 
    && (loginController == null || !loginController.getIsLoggedIn())
{
    response.sendRedirect(request.getContextPath() + "/views/index.html");
} else {
    chain.doFilter(req, res);
} 
```

# javascript - SlickGrid 编辑器工厂的期望是什么？

> ID：10418428
> 
> 赞同：1
> 
> 时间：2012-05-02T17:05:37.277
> 
> 标签：javascript, editor, factory, slickgrid

*SomeEditorFactory.getEditor(column)*的返回值应该是函数还是对象？

从代码

```
function getEditor(row, cell) {
    var column = columns[cell];
    var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
    var columnMetadata = rowMetadata && rowMetadata.columns;

    if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined) {
        return columnMetadata[column.id].editor;
    }
    if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined) {
        return columnMetadata[cell].editor;
    }

    return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));
} 
```

不是很明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:25:32.433

它应该是实现`getEditor(columnDefinition)`并返回给定列的编辑器的对象。

请参阅[https://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors](https://github.com/mleibman/SlickGrid/wiki/Writing-custom-cell-editors)和[https://github.com/mleibman/SlickGrid/blob/master/slick.editors.js](https://github.com/mleibman/SlickGrid/blob/master/slick.editors.js)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T13:00:34.733

当 SlickGrid 调用*YourEditorFactory.getEditor(column)*时，它需要一个函数。

# c# - 无法在 Windows 服务中托管 IIS Express

> ID：10418430
> 
> 赞同：1
> 
> 时间：2012-05-02T17:05:38.160
> 
> 标签：c#, windows-services, iis-express

我已关注以下 SO 文章 -[如何将 IIS Express 作为通过 Windows 服务启动的进程运行](https://stackoverflow.com/questions/4931374/how-to-run-iis-express-as-a-process-started-via-a-windows-service)

我已经使用以下代码在我的机器上安装了 Windows 服务：

```
private Process _process;

protected override void OnStart(string[] args)
{
    var processStartInfo = new ProcessStartInfo
    {
        FileName = @"C:\Program Files (x86)\IIS Express\iisexpress.exe",
    };

    _process = new Process
    {
        StartInfo = processStartInfo,
        EnableRaisingEvents = true
    };

    _process.Start();
}

protected override void OnStop()
{
    _process.Kill();
} 
```

但是，当我尝试启动服务时，在长时间尝试启动服务后它失败了。当我检查事件日志时，我收到以下 IIS Express 错误：

```
The worker process for app pool 'Clr4IntegratedAppPool', PID='8596', failed to initialize the http.sys communication when asked to start processing http requests and therefore will be considered ill by W3SVC and terminated.  The data field contains the error number.

The worker process failed to initialize correctly and therefore could not be started.  The data is the error. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:57:21.570

我认为 LocalSystem 默认情况下没有网络访问权限。尝试使用 NetworkService 用户。

# java - Java：在 JMonkey 中绘制 3D 点

> ID：10418433
> 
> 赞同：1
> 
> 时间：2012-05-02T17:06:04.640
> 
> 标签：java, java-3d, jmonkeyengine

有人可以为我提供一个如何绘制的示例，例如 JmonkeyEngine 中 x、y、z 范围为 0..100 的 10000 个随机 3D 点。有人建议我使用 Jmonkey 而不是 java3D。我对两者都很陌生。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:38:21.543

这是在 JMonkey2 中制作的。以下是 0 到 100 中的 10000 个球体。这最终形成了一个几乎完整的盒子。使用 WASD 控制摄像机。

```
package wall;

import java.util.Random;
import java.util.concurrent.Callable;

import com.jme.math.Vector3f;
import com.jme.scene.shape.Sphere;
import com.jme.util.GameTaskQueueManager;
import com.jmex.editors.swing.settings.GameSettingsPanel;
import com.jmex.game.StandardGame;
import com.jmex.game.state.DebugGameState;
import com.jmex.game.state.GameStateManager;

public final class SphereExample {

    private static final int MAX = 100;
    private static final int TOTAL = 10000;

    public static void setupGame() {
        final DebugGameState state = new DebugGameState() {
            @Override
            public void update(final float timeStep) {

                // Update the game state
                super.update(timeStep);
            }
        };
        final Random random = new Random();
        for (int i = 0; i < TOTAL; i++) {
            final Sphere sphere = new Sphere("sphere", 5, 5, 1);
            sphere.setLocalTranslation(random.nextInt(MAX),
                    random.nextInt(MAX), random.nextInt(MAX));
            sphere.updateRenderState();
            state.getRootNode().attachChild(sphere);
        }

        GameStateManager.getInstance().attachChild(state);
        state.setActive(true);

    }

    public static void main(final String[] args) throws Exception {

        final StandardGame game = new StandardGame("Points");

        if (GameSettingsPanel.prompt(game.getSettings())) {

            game.start();

            GameTaskQueueManager.getManager().update(
                    new Callable<Void>() {
                        @Override
                        public Void call() throws Exception {
                            setupGame();
                            game.getCamera() // moves the camera to the middle
                                             // of the spheres
                                    .setFrame(
                                            new Vector3f(50.0f,
                                                    50.0f, 50.0f),
                                            new Vector3f(-1.0f, 0.0f,
                                                    0.0f),
                                            new Vector3f(0.0f, 1.0f,
                                                    0.0f),
                                            new Vector3f(0.0f, 0.0f,
                                                    -1.0f));
                            game.getCamera().update();
                            game.getCamera().apply();
                            return null;
                        }
                    });
        }
    }
} 
```

# ruby-on-rails - 使用 gmaps4rails 在信息窗口中放置一个链接

> ID：10418435
> 
> 赞同：1
> 
> 时间：2012-05-02T17:06:19.750
> 
> 标签：ruby-on-rails, google-maps, ruby-on-rails-3, dom-events, gmaps4rails

我正在使用 gmaps4rails，现在当我单击标记时会出现数据库中的信息，我需要在标记内放置一个链接。我如何能？

模型：

```
def gmaps4rails_address
  city
end

def gmaps4rails_infowindow
   "<h4>#{city}</h4>"  
end 
```

控制器：

```
def index
  @postos = Posto.all
  @markers = Posto.all.to_gmaps4rails  

  @json = Posto.all.to_gmaps4rails  do |posto, marker|
    marker.json "\"id\": #{posto.id}"
  end  
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @postos }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T10:56:42.790

这里有两种方法。

直接在控制器中：

```
hashes = Gmaps4rails.build_markers(collection) do |item, marker|
  marker.infowindow(ActionController::Base.helpers.link_to(item.name ||= 'Name?',preplan_path(item)).html_safe)

  marker.title item.name
  marker.picture({
                     # :url => "/assets/building_icon.png",
                     :url => "/assets/text.png",
                     :width => 32,
                     :height => 32
                 })
  marker.lat item.latitude
  marker.lng item.longitude
end 
```

并使用来自控制器的部分：

```
hashes = Gmaps4rails.build_markers(collection) do |item, marker|
  marker.infowindow render_to_string(:partial => "/structures/info_window", :locals => { :structure => item}) 
```

部分可以是任何你喜欢的：

```
# view/structures/_info_window.html.haml
= link_to structure.name, [structure.preplan, structure]
- unless structure.longitude.nil?
  %br
  = link_to "Drive to?", "https://maps.google.com/maps?daddr=#{structure.latitude},#{structure.longitude}", target: "_blank" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:46:49.847

我不建议您使用该`gmaps4rails_infowindow`方法：不应在模型层提供视图详细信息。

您应该使用部分配置控制器中的信息窗口：

```
@json = Posto.all.to_gmaps4rails do |posto, marker|
  marker.infowindow render_to_string(:partial => "/path_to/your_template", :locals => { needed_locales })
end 
```

详细信息在[gem 的 wiki](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Controller)中。（你甚至可以使用 js 模板，但这不是问题，在 wiki 中也有解释）

# maven - 为 Maven Assembly 插件创建一个新的格式选项

> ID：10418438
> 
> 赞同：2
> 
> 时间：2012-05-02T17:06:23.387
> 
> 标签：maven, maven-plugin, iso, maven-assembly-plugin, iso9660

Maven Assembly 插件允许在程序集描述符中指定不同的格式。我怎样才能开发一种新格式以便支持它？

我想创建一个 ISO 映像，而不是它已经支持的 zip、jar 或 tar 文件。我找到了一个可以创建 ISO 映像的插件（[https://github.com/stephenc/java-iso-tools](https://github.com/stephenc/java-iso-tools)），但不是作为程序集插件的一部分，所以很乐意使用它，或者甚至扩展该插件。

我基本上希望能够在我的程序集描述符中执行以下操作：

```
<assembly>
  <id>cd-image</id>
  <formats>
    <format>iso</format>
  </formats>
  <!-- Rest of descriptor here -->
</assembly> 
```

我还希望它能够在创建的存档中删除额外的间接级别，这样当我声明一个文件应该位于存档的根目录时，它确实是。如果它是 tar 文件，这将是一个 tar 炸弹，但对于 ISO 映像来说将是一个有用的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:51:52.607

最好的办法是在问题跟踪系统中提交问题：http: [//jira.codehaus.org/browse/MASSEMBLY](http://jira.codehaus.org/browse/MASSEMBLY)此外，为了更好地支持这一点，请查看 maven-assembly- 的源代码插件，并且可能会尝试生成一个补丁来实现您喜欢的功能。但我怀疑它会被开发人员接受，因为您引用的工具是基于 GPL 的软件，无法集成到 Apache 许可的部分中。因此，如果他们后悔这样的事情，我不会感到惊讶。但也许我错了。试一试。此外，建议一个完全用于此目的的新 Maven 插件（maven-iso-pugin？）可能是个好主意。

非常重要的是，您应该检查 Maven Central，因为已经存在用于此类目的的[http://search.maven.org/#search|ga|1|iso9660-maven-plugin](http://search.maven.org/#search|ga|1|iso9660-maven-plugin) maven 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T17:22:17.713

iso9660-maven-plugin（java-iso-tools 的一部分）现在直接支持这一点。您必须将其作为扩展名和对 maven-assembly-plugin 的依赖项添加到您的 pom.xml 中：

```
 <build>
    <extensions>
        <extension> <!-- Adds "iso" as an assembly format. -->
            <groupId>com.github.stephenc.java-iso-tools</groupId>
            <artifactId>iso9660-maven-plugin</artifactId>
            <version>2.0.1</version>
        </extension>
    </extensions>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                       ...
                    </configuration>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>com.github.stephenc.java-iso-tools</groupId>
                    <artifactId>iso9660-maven-plugin</artifactId>
                    <version>2.0.1</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build> 
```

然后你可以`<format>iso</format>`在你的程序集描述符中使用。

我看到最初的提问者是将这个功能添加到 iso9660-maven-plugin 的人。谢谢！

# vba - 无法传递多个参数

> ID：10418444
> 
> 赞同：1
> 
> 时间：2012-05-02T17:06:31.977
> 
> 标签：vba, subroutine

我有一个看起来像这样的子程序。它有两个参数。

```
Sub Advance(ByRef listR() As String, rCount)
    ...code
End Sub 
```

当我尝试调用它时：

```
Advance listR:=theList, theCount 
```

它给了我一个编译错误：

> 预期：命名参数

为什么是这样？它工作得很好，就像......

```
Sub Advance(rCount)
    ...code
End Sub 
```

并通过以下方式调用：

```
Advance theCount 
```

或者也可以仅使用数组参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:15:02.753

我相信您可以通过以下任何方式调用您的 sub，但您不能命名第一个参数，也不能命名第二个参数：

```
Advance listR:=theList, rCount:=theCount
Advance rCount:=theCount, listR:=theList
Advance theList, rCount:=theCount
Advance theList, theCount

Call Advance(listR:=theList, rCount:=theCount)
Call Advance(rCount:=theCount, listR:=theList)
Call Advance(theList, rCount:=theCount)
Call Advance(theList, theCount) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:26:04.463

来自[MSDN](http://msdn.microsoft.com/en-us/library/51wfzyw0.aspx)：

> 当您通过位置和名称的混合提供参数时，位置参数必须全部放在第一位。一旦按名称提供参数，其余参数都必须按名称。

# objective-c - 在 Documents 或 Caches 文件夹中使用 iOS 文件名设备修饰符（~ipad、~iphone）

> ID：10418453
> 
> 赞同：1
> 
> 时间：2012-05-02T17:07:17.057
> 
> 标签：objective-c, ios, uiimage, imagenamed

有没有办法利用设备修饰符〜ipad，〜iphone，@2x，用于存储在缓存或文档中的图像。据我所知，它仅在文件存储在主包中时才有效。

```
NSArray *cachePaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachePath = ([cachePaths count] > 0) ? [cachePaths objectAtIndex:0] : nil;
NSString *cacheResourcesPath = [cachePath stringByAppendingPathComponent:@"Resources"];

NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *documentPath = ([documentPaths count] > 0) ? [documentPaths objectAtIndex:0] : nil;
NSString *documentsResourcesPath = [documentPath stringByAppendingPathComponent:@"Resources"];

    // SUCCESS (/caches/resources)
    UIImage *image = [UIImage imageWithContentsOfFile:[cacheResourcesPath stringByAppendingPathComponent:@"image~ipad.png"]];

    // FAIL (/caches/resources)
    UIImage *image = [UIImage imageWithContentsOfFile:[cacheResourcesPath stringByAppendingPathComponent:@"image.png"]];

    // SUCCESS (/documents)
    UIImage *image = [UIImage imageWithContentsOfFile:[documentsResourcesPath stringByAppendingPathComponent:@"image~ipad.png"]];

    // FAIL (/documents)
    UIImage *image = [UIImage imageWithContentsOfFile:[documentsResourcesPath stringByAppendingPathComponent:@"image.png"]];

    // SUCCESS (main bundle)
    UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"]];

    // SUCCESS (main bundle)
    UIImage *image = [UIImage imageNamed:@"image"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:15:23.667

我很确定该`imageWithContentsOfFile:`方法不会分析文件名。当我尝试加载一些不属于捆绑包的@2x 图像时，我在 iPhone 上遇到了同样的问题。最后，我必须使用`initWithCGImage:scale:orientation:`才能正确设置比例。基于此，如果它可以处理`~ipad`后缀，我会感到惊讶。

# java - 在字符串变量中获取消息 myLogger.log(e)

> ID：10418454
> 
> 赞同：1
> 
> 时间：2012-05-02T17:07:25.153
> 
> 标签：java, log4j

我想在字符串变量中获取此方法 myLogger.log(e) 的输出，以便能够使用 Junit 进行测试。

```
myLogger.log(e);
String s= ????
assertEqual(expected,s); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:24:30.820

您可以编写一个写入 StringWriter 的 log4j appender。看看这个帖子：

[如何将 log4j 输出读取到网页？](https://stackoverflow.com/questions/2555865/how-to-read-log4j-output-to-a-web-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:12:10.440

You can add an additional Appender to your Logger. Use a WriterAppender to write to a StringWriter then you change the content of your TextArea to the value of StringWriter#toString()

```
public static void main(String[] args) {
    Logger logger = Logger.getLogger("logger");
    Layout layout = new PatternLayout();
    StringWriter stringWriter = new StringWriter();
    WriterAppender writerAppender = new WriterAppender(layout, stringWriter);
    logger.addAppender(writerAppender);

    logger.error("test");
    String string = stringWriter.toString();
    System.out.println(string);
  } 
```

as described [here](https://stackoverflow.com/a/12403701/1515052).

# javascript - javascript中的从日期到日期验证

> ID：10418458
> 
> 赞同：-3
> 
> 时间：2012-05-02T17:07:44.387
> 
> 标签：javascript

我想验证 From Date 和 To Date 即，From Date 不应该大于 To Date 但它可以是相同的 & Dates 的格式是'03-MAR-2012'...请帮助我。你可以改变如有必要，请随意选择日期格式。但它不应该影响我的实际日期值..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T17:24:39.540

如果可以，首先比较年份，然后比较月份，然后再比较天使用嵌套 if 条件

# javascript - 如何使用 javascript 增长的 bin 打包算法获得最终的 bin 大小？

> ID：10418460
> 
> 赞同：2
> 
> 时间：2012-05-02T17:07:54.930
> 
> 标签：javascript, binary-tree, bin-packing

使用这个[2d bin-packing algorithm](http://pastebin.com/Ke8WpMZ7) (EDIT: Fixed demo) 这是一个变体，[我](https://github.com/jakesgordon/bin-packing)怎样才能得到每个 bin 的最终 bin 宽度和高度？

我的演示代码如下：

```
 var blocks = [
    {w: 1000, h: 800},
    {w: 500, h: 700},
    {w: 500, h: 700},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 500, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350},
    {w: 250, h: 350}
];

var sheets = [];

while(blocks.length) {
    var packer = new GrowingPacker(1000,800);
    packer.fit(blocks);

    sheet = [];
    for (var i=blocks.length-1; i>=0; i--) {
        if (blocks[i].fit !== undefined && blocks[i].fit !== null) {
            //console.log(blocks[i].fit);
            sheet.unshift(blocks[i]);
            blocks.splice(i,1);
        }
    }
    //console.log(sheet[sheet.length-1].fit.y + sheet[sheet.length-1].h);
    //console.log(sheet);
    sheets.push(sheet);
}

for(var i=0; i<sheets.length; i++) {
    var sheet = sheets[i];
    var sheetWidth = sheet[sheet.length-1].w + sheet[sheet.length-1].fit.x;
    var sheetHeight = sheet[sheet.length-1].h + sheet[sheet.length-1].fit.y;

    for(var j=0; j<sheet.length; j++) {
        console.log("SHEET #" + i + " - W: " + sheetWidth + " H: " + sheetHeight + " BLOCK #" + j + " - W: " + sheet[j].w + " H: " + sheet[j].h + " X: " + sheet[j].fit.x + " Y: " + sheet[j].fit.y);
    }
} 
```

原始算法只处理一个不断扩展的 bin，因此我对其进行了修改以获取最大宽度和高度。然后我遍历块数组，调用打包器，将合适的块推送到一个新数组，然后将它们从“块”中取消设置，直到“块”为空。这是否是最好的方法是另一个问题的主题。

无论如何，我已经尝试像这样修改growNode：

```
growNode: function(w, h) {
    var canGrowRight  = (w <= this.root.w && this.root.w + w <= maxW);
    var canGrowDown = (h <= this.root.h && this.root.h + h <= maxH);

    if (canGrowRight) {
        this.sheetW = this.root.w + w; //<--------------added
        return this.growRight(w, h);
    }
    else if (canGrowDown) {
        this.sheetH = this.root.h + h; //<--------------added
        return this.growDown(w, h);
    }
    else

        return null; // need to ensure sensible root starting size to avoid this happening
}, 
```

它适用于除第一张以外的每张纸。我也尝试用其他一些方法添加这些行，但没有成功。我还尝试从工作表宽度 + x 的最后一个块中获取工作表大小，但这仅在工作表已满时才有效。

我的问题又是如何获得每张纸的最终尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:19:33.160

我最终想通了。我在 findNode() 中添加了两行

```
findNode: function(root, w, h) {
    if (root.used) {
        return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);
    }
    else if ((w <= root.w && w <= this.maxW) && (h <= root.h && w <= this.maxW)) {
        this.binWidth = this.root.w <= this.maxW ? this.root.w : this.maxW;
        this.binHeight = this.root.h <= this.maxH ? this.root.h : this.maxH;
        return root;
    }
    else {
        return null;
    }
}, 
```

[如果你想玩它，这里是 jsfiddle。](http://jsfiddle.net/XDGHE/3/)我建议尝试这样的输入：

```
100x80
50x70
50x35x2
25x35x4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:01:27.653

您可以使用增长算法，并且可以将 bin 向左或向右增长：[http](http://codeincomplete.com/posts/2011/5/7/bin_packing) ://codeincomplete.com/posts/2011/5/7/bin_packing 。

# sql-server - 作为 CSV 导入操作的一部分，如何在一个步骤中创建和填充表？

> ID：10418461
> 
> 赞同：18
> 
> 时间：2012-05-02T17:07:56.527
> 
> 标签：sql-server, sql-server-2000, bulkinsert, create-table, openrowset

我正在寻找一种快速而简单的方法来将 CSV 文件导入 SQL Server *，而无需事先创建表并定义其列*。

每个导入的 CSV 都将导入到自己的表中。

我们不关心数据类型推断。CSV 的结构和布局各不相同，它们都有很多列，但我们只关心其中的一小部分：街道地址和邮政编码。我们只想快速将 CSV 数据导入 SQL 数据库并提取相关列。

我想提供 FieldTerminator 和 RowTerminator，将其指向 CSV，然后让实用程序完成剩下的工作。有没有办法使用 BULK INSERT 和/或 OpenRowset(BULK ... ) 一步完成创建表并填充它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T20:18:56.320

[引用 SQLServerPedia](https://web.archive.org/web/20130106192819/http://sqlserverpedia.com/blog/sql-server-bloggers/so-you-want-to-read-csv-files-huh)，我认为这会起作用：

```
sp_configure 'show advanced options', 1;
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE;
GO

select TerritoryID
      ,TotalSales
      ,TotalCost
INTO CSVImportTable
from openrowset('MSDASQL'
               ,'Driver={Microsoft Access Text Driver (*.txt, *.csv)}'
               ,'select * from C:\csvtest.CSV') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-02T18:20:21.803

烦人，我还没有代表点来评论，所以我会根据 TyT 添加一个答案（那个句柄在所有格中看起来很糟糕，顺便说一句......）

工作人员代码需要一个双“\”而不是一个，以避免“找不到文件”错误。而且您不必指定字段；它们将从文件的第一行推断：

```
select *
into   CsvImportTable
from   openrowset(
           'MSDASQL',
           'Driver={Microsoft Access Text Driver (*.txt, *.csv)}',
           'select * from C:\\csvtestfile.csv') 
```

我对 Access 驱动程序没有任何问题。

更新：如果您在错误推断类型时遇到问题，请在文件顶部插入几行，其中包含您在表中所需类型的数据，这样您就会得到，比如 text -> VARCHAR 而不是 text-> INT 然后导入后删除这些行。

作为最后的结冰，向表中添加一个 PK，以便您可以操作数据 - 删除虚拟行等：

```
alter table CsvImportTable add Id int identity(1, 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-25T21:43:49.933

如果您使用的是 SQL Server Management Studio 17，则更新答案。

**右键单击数据库 -> 任务 -> 导入平面文件...**

它会自动将数据的第一行推断为列名。它*应该*自动拾取终结器。您将获得设置主键、允许空值以及为列指定数据类型的选项。

# javascript - 为什么 z-index 不起作用？

> ID：10418465
> 
> 赞同：2
> 
> 时间：2012-05-02T17:08:25.247
> 
> 标签：javascript, jquery, html, css

我正在编写一个 Web 应用程序，但我在某个部分遇到了问题，我有一个翻转的东西，但它目前正在滚动。编辑：pastehtml 被拒绝，这里是 jfiddle：http: [//jsfiddle.net/XmKwt/1/](http://jsfiddle.net/XmKwt/1/)

右边的 div 位于左边的 div 之下，即使 z-index 说它不应该。

我发现如果“位置：相对；” css 被删除（参见源代码）然后它工作得很好，但我不明白为什么，我需要“位置：相对；” css 有其他原因，在这个简化的例子中没有展示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <style>
    /* Remove this line and it works */

    #featureleft {position:relative;}

    /* End */

    #layoutdiv { text-align: left; width: 940px; }
    #featureleft { width: 580px; float: left;z-index:10; background:red; }
    #featureright { float: right; z-index:100;}
    #copypaste { background-color: #bbb; margin-bottom: 40px; padding-right: 10px; padding-left: 10px; width: 300px; height:200px; margin-left: 20px; border: solid 5px #000; }
    </style>

    <script language='javascript'>
    $(document).ready(function() {
        $('#copypaste').mouseenter(function(){
            p=$(this).position();
            // increase/move by p.left
            move=Math.round(p.left)-0;
            width=parseInt($(this).css('width'))+parseInt(move);
            margin=0-(parseInt(move)-20);
            inputs=parseInt(move)+280;
            $(this).css('width',width+'px').css('margin-left',margin+'px').css('height',$(this).height);
        });

        $('#copypaste').mouseleave(function(){
            $(this).css('width','300px');
            $(this).css('margin-left','20px');
        });
    });
</script>
</head>

<body>
    <div id="layoutdiv" class='container fakewindowcontain'>
        <div id='featurewrapper'>
            <div id='featureleft'>
                <p>Lorem ipsum dolor sit amet, ut eget et enim, nec auctor habitasse eu mattis eget odio, lacinia vivamus libero dictum, tempor nunc nec nam fringilla mauris, et class dolor curabitur ipsum. Commodo ultricies id</p>
            </div>

            <div id='featureright'>
                <div id='copypaste'>
                <p>Lorem ipsum dolor sit amet, ut eget et enim, nec auctor habitasse eu mattis eget odio, lacinia vivamus libero dictum, tempor nunc nec nam fringilla mauris, et class dolor curabitur ipsum. Commodo ultricies id</p>
                </div>      
            </div> 
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:27:21.600

#featureright div 没有声明位置（因此它与 position: static 相同）。正如我在评论中所说

> “CSS z-index 属性在除了静态（默认）之外没有位置的元素上被忽略”

因此，要使其服从 z-index 属性，您需要添加 position: relative to #featureright

# c# - MSSQL XQuery 的语法错误或根本没有结果

> ID：10418467
> 
> 赞同：0
> 
> 时间：2012-05-02T17:08:28.567
> 
> 标签：c#, sql, visual-studio, syntax, xquery

我使用了 MS 的这份白皮书作为参考： http: [//msdn.microsoft.com/en-us/library/ms345117 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms345117(v=sql.90).aspx)

但是，当我尝试以下查询时出现错误：

```
 command = new SqlCommand(
    "SET QUOTED_IDENTIFIER ON SELECT XML FROM XMLObject WHERE" + 
    "XML.exist('//Root/ActiveRecord[" + s1 + 
    "= " + s2 + "]') = 1"
    , connection); 
```

错误是：““。”附近的语法错误。

如果我删除“XMLObject”之后的所有内容直到逗号，我就能够执行该命令，并且如果数据库中存在元素，则返回一些内容。

我也很好奇我是否以正确的方式设置 QUOTED_IDENTIFIER 值。

我可能会看到的任何 C#/MSSQL 示例项目/教程也将不胜感激！

编辑：对于看到这一点的任何人，我还发现使用存在的正确方法是：

```
 "...exist('/Root/ActiveRecord[" + s1 + 
    "= \"" + s2 + "\"]') = 1" 
```

没有 "s 唯一的数字比较工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:26:43.480

您应该避免通过连接字符串来构建 SQL，因为它存在 SQL 注入漏洞。ON 后需要一个分号。您的列数据类型必须是 xml，或者您必须将其转换为 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:28:03.500

`WHERE`我认为您在and之间缺少空格`XML`：

```
command = new SqlCommand(
    "SET QUOTED_IDENTIFIER ON SELECT XML FROM XMLObject WHERE " + // Note space
    "XML.exist('//Root/ActiveRecord[" + s1 + 
    "= " + s2 + "]') = 1"
    , connection); 
```

# linux - wxWidgets Linux GCC，如何在 wxFrame 中添加滚动条

> ID：10418470
> 
> 赞同：0
> 
> 时间：2012-05-02T17:08:35.570
> 
> 标签：linux, gcc, wxwidgets

我的应用程序有一个 GUI，它首先读取一个初始化文件，然后决定需要将多少控件对象（例如，wxTextCtrl、wxToggleButton 等）添加到 wxFrame。当 wxFrame 上的对象过多时，有些对象超出了可见边界，即它们在 wxFrame 上，但用户看不到它们。

我想知道是否可以在 wxFrame 中添加垂直和水平滚动条。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:48:09.033

您不应该将控件添加到 wxFrame。wxFrame 可用于保存可以放置控件的窗口，包括滚动窗口。

查看发行版中的一些示例应用程序以了解其工作原理。

# python - 遇到 HTTP 错误 400：在 python 中使用 mechanize 时出现错误请求

> ID：10418473
> 
> 赞同：2
> 
> 时间：2012-05-02T17:08:59.940
> 
> 标签：python, cookies, mechanize, bad-request, cookiejar

我在 Python 中使用 mechanize 时遇到了一个问题，请先查看我的代码：

```
>>> s
'http://www.renren.com'
>>> br=mechanize.Browser()
>>> br.open(s)
<response_seek_wrapper at 0x1012b15f0 whose wrapped object = <closeable_response at 0x1012b11b8 whose fp = <socket._fileobject object at 0x1012949d0>>>
>>> br.set_cookiejar(cj)
>>> br.open(s)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.macosx-10.7-intel/egg/mechanize/_mechanize.py", line 203, in open
  File "build/bdist.macosx-10.7-intel/egg/mechanize/_mechanize.py", line 255, in _mech_open
mechanize._response.httperror_seek_wrapper: HTTP Error 400: Bad Request 
```

变量“s”的值是我要访问的网站的url，然后我创建了一个Browser()，然后执行了br.open(s)，这里没有错误，但是在我将cookiejar分配给“ br"，继续用正确的参数调用open()方法，错误发生，显示“Bad Request”。

我应该怎么办？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T19:38:31.727

尝试在浏览器中复制它。该网站似乎对cookies有一定的要求。该网站不喜欢您添加的 cookie，因此会以 400 错误阻止您。

# algorithm - SelectionSort的复杂度分析

> ID：10418474
> 
> 赞同：3
> 
> 时间：2012-05-02T17:09:08.647
> 
> 标签：algorithm, complexity-theory

这是我写的一个 SelectionSort 例程。我的复杂性分析是否正确？

```
public static void selectionSort(int[] numbers) {

    // Iterate over each cell starting from the last one and working backwards
    for (int i = numbers.length - 1; i >=1; i--)
    {
        // Always set the max pos to 0 at the start of each iteration
        int maxPos = 0;

        // Start at cell 1 and iterate up to the second last cell
        for (int j = 1; j < i; j++)
        {
            // If the number in the current cell is larger than the one in maxPos,
            // set a new maxPos
            if (numbers[j] > numbers[maxPos])
            {
                maxPos = j;
            }
        }

        // We now have the position of the maximum number. If the maximum number is greater
        // than the number in the current cell swap them
        if (numbers[maxPos] > numbers[i])
        {
            int temp = numbers[i];
            numbers[i] = numbers[maxPos];
            numbers[maxPos] = temp;
        }
    }
} 
```

**复杂性分析**

外循环（比较和分配）：2 次操作执行 n 次 = 2n 次操作

分配 maxPos：n 个操作

内循环（比较和分配）：2 次操作执行 2n^2 次 = 2n² 次操作

数组元素的比较（2 个数组引用和一个比较）：3n² 操作

分配新的 maxPos: n² ops

数组元素的比较（2 个数组引用和一个比较）：3n² 操作

赋值和数组引用：2n² 操作

赋值和 2 个数组引用：3n² 操作

赋值和数组引用：2n² 操作

**原始操作总数**

2n + n + 2n² + 3n² + n^2 + 3n² + 2n² + 3n² + 2n² = 16n² + 3n

通向大哦(n²)

这看起来正确吗？特别是当涉及到内部循环和里面的东西时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:11:25.583

是的，O(N ² ) 是正确的。

编辑：就“从第一原则”而言，*很难*准确猜测他们可能想要什么，但我猜他们（本质上）正在寻找证据（或至少是迹象）的东西) 满足 big-O 的基本定义：

> 存在正常数**c**和**n [0]**使得：
> 
> 0 ≤ f(n) ≤ cg(n) 对于所有 n ≥ n [0]。

^(因此，找到 16N 2) +3N之后的下一步是找到 n [0]和 c的正确值。至少乍一看， c 似乎是 16，而 n [0]，-3，（可能被视为 0，没有实际意义的负数元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:33:29.447

通常，将实际操作相加是没有意义的（也是不正确的），因为操作需要不同数量的处理器周期，其中一些从内存中取消引用值需要更多时间，然后因为编译器优化代码而变得更加复杂，然后你有诸如缓存位置之类的东西，所以除非你**非常非常清楚地**知道下面的一切是如何工作的，否则你就是在加起来苹果和橘子。您不能只是将“j < i”、“j++”和“numbers[i] = numbers[maxPos]”相加，就好像它们相等一样，而且您不需要这样做 - 出于复杂性的目的分析，恒定时间块就是恒定时间块。您没有进行低级代码优化。

复杂度确实是 N^2，但是你的系数没有意义。

# .net - 非托管 Visual C++ 是否在 CLR 上运行？

> ID：10418476
> 
> 赞同：0
> 
> 时间：2012-05-02T17:09:18.627
> 
> 标签：.net, visual-c++, clr

如果我在 Visual C++ 中编写 C++ 代码而不使用任何托管代码，它是否仍在 CLR 上运行？如果是，我如何使用 Visual C++ 编写本机应用程序。有没有什么办法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:10:08.890

“非托管”代码不使用 CLR；它是本机代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T20:18:12.940

公共语言运行时 (CLR) 用于执行 .NET 框架程序。这包括与本机 C++ 完全不同的托管 C++。

如果您使用的是 MS Visual Studio，您可以使用 MFC、Win32 或 ATL 项目模板创建使用本机 C++ 编写的应用程序。

# c++ - 插入算子结果后向量中出现垃圾

> ID：10418480
> 
> 赞同：3
> 
> 时间：2012-05-02T17:09:41.943
> 
> 标签：c++

我有一个对象，其运算符定义如下：

```
P& operator +(const P &rhs) {
    return P(x + rhs.x, y + rhs.y, z + rhs.z);
} 
```

它没有自定义复制或赋值运算符。

在我直接分配向量内的加法结果后，其中会出现垃圾。

```
P p1(1.0, 0.0, 0.0);
P p2(0.0, 0.0, 0.0);

vector<P> v(1);
v[0] = p1 + p2; // v[0] now contains garbage. 
```

如果我通过一个变量来做，一切都如预期的那样。

```
vector<P> u(1);
P q = p1 + p2;
u[0] = q; // u[0] contains correct value. 
```

这种行为的原因是什么？这两种情况有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T17:12:05.267

您返回对临时的引用。这是一个坏主意，因为临时变量在函数末尾超出范围（在本例中为`operator+`函数）。将您的运营商声明为：

```
P operator +(const P &rhs) const 
```

反而。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:15:08.063

如你所见

```
P& operator +(const P &rhs) 
{
    return P(x + rhs.x, y + rhs.y, z + rhs.z);
} 
```

返回对局部变量的引用，一旦超出函数范围，该变量就会被销毁`operator +`。

您可以将指针返回到堆中创建的数据，但如果调用者未能删除对象，这将为内存泄漏留下足够的空间。

您也可以将对象作为副本返回，但这有时可能是一个真正的开销

在最近的 C++11 中，使用 move 构造来转移所有权，这应该是未来理想和首选的方法。

# anchor - localScroll 下一个上一个按钮

> ID：10418481
> 
> 赞同：1
> 
> 时间：2012-05-02T17:09:48.987
> 
> 标签：anchor, scrollto, next

我正在使用 localScroll/scrollTo 创建一个全屏滚动条。

现在我需要关于 next-prev 按钮的帮助。也许还有键盘按钮。

任何人都可以帮助我。

代码在 [http://www.hell-yeah.se/localscroll](http://www.hell-yeah.se/localscroll)

锚代码是 p1,p2,p3,p4,p5,p6 等等，所以也许可以用它来做点什么。

/埃里克

# android - 如何检查画布功能是否支持给定设备上的硬件加速？

> ID：10418483
> 
> 赞同：2
> 
> 时间：2012-05-02T17:09:54.117
> 
> 标签：android

我有一个自定义 AdapterView 覆盖 drawChild 以在画布动画期间剪辑子视图。

这似乎在蜂窝上运行良好，但一旦加载到 Android 4.0 平板电脑上就会死去。我怀疑这是因为 Android 4.0 默认打开硬件加速，而我使用的一种或多种画布方法不支持我正在使用的特定设备上的硬件加速（带有 ICS 4.0.3 的 Acer A100）

这是我的 drawChild 方法（来自我的 NinjaMenu.java 类）：

```
@Override
    protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
        final int top = child.getTop();
        final int left = child.getLeft();
        Bitmap bitmap = child.getDrawingCache();
        if (bitmap == null) {
            child.setDrawingCacheEnabled(true);
            child.buildDrawingCache();
            bitmap = child.getDrawingCache();
        }
        if (mCutPath != null) {
            // clip child views so that they partially show
            // as menu is expanded
            canvas.clipPath(mCutPath);
            canvas.drawBitmap(bitmap, left, top, null);
        }

        return false;
    } 
```

mCutPath 是在代码的其他地方创建的 Path 对象（对这个问题不重要）。

这是 AdapterView 尝试绘制孩子时发生的异常：

```
FATAL EXCEPTION: main
java.lang.UnsupportedOperationException
    at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:408)
    at com.phunware.funimation.android.views.NinjaMenu.drawChild(NinjaMenu.java:529)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.draw(View.java:10986)
    at android.view.View.getDisplayList(View.java:10422)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.getDisplayList(View.java:10420)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.draw(View.java:10986)
    at android.widget.FrameLayout.draw(FrameLayout.java:450)
    at android.view.View.getDisplayList(View.java:10422)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.getDisplayList(View.java:10420)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.getDisplayList(View.java:10420)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.getDisplayList(View.java:10420)
    at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
    at android.view.View.draw(View.java:10986)
    at android.widget.FrameLayout.draw(FrameLayout.java:450)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2152)
    at android.view.View.getDisplayList(View.java:10422)
    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:852)
    at android.view.ViewRootImpl.draw(ViewRootImpl.java:1910)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

除了完全禁用硬件加速之外，有没有办法检查给定的画布功能是否支持硬件加速以及是否不关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:03:10.743

坏消息：不，没有办法以编程方式检查给定函数是否支持硬件加速。

好消息：你不是第一个遇到这个问题的人，有问题的功能（以及许多其他关于硬件加速的好东西）都很好地记录[在这里](http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html)：

*   帆布

    *   剪辑路径
    *   剪辑区域
    *   画图
    *   绘制点
    *   drawPosText
    *   drawTextOnPath
    *   绘制顶点
*   画
    *   设置线性文本
    *   设置掩码过滤器
    *   设置光栅化器

请注意，该文档还列出了一些具有*不同*行为的函数。

一个可靠的解决方法是识别代码中的有问题的操作，将它们绘制到位图上，然后将位图blit 到您的加速画布上。

# algorithm - 如何找出字符串中最长的模式

> ID：10418490
> 
> 赞同：-2
> 
> 时间：2012-05-02T17:10:55.790
> 
> 标签：algorithm

我正在尝试找出字符串中最长的模式。例如，我有 string='aabbbcc'，让它返回最长的模式 'bbb'。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:18:17.847

您的 .NET 可以使用以下内容轻松完成此操作，

```
string s = "aabbbcc";
var countByObject = s.GroupBy(q => q).OrderByDescending(q1 => q1.Count())
                                     .Select(q2 => new { Letter = q2.Key, CountOfObjects = q2.Count() })
                                     .ToList(); 
```

...其中`countByObject`是包含 a`Letter`和对应的匿名对象的列表`Count`。实施的：

```
s.GroupBy(q => q).OrderByDescending(q1 => q1.Count())
                 .Select(q2 => new { Letter = q2.Key, CountOfObjects = q2.Count() })
                 .ToList().ForEach(q3=>{
                       Console.WriteLine(String.Format("{0} {1}",q3.Letter, q3.CountOfObjects));   
                 }); 
```

...打印出来：

```
b 3
a 2
c 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:19:17.983

您没有说语言...但是您可以使用**for**将字符串的每个字母与最后一个字母进行比较。每次相等，你可以给一个变量加1...最后，你只需要得到最大的变量......（你可以只使用两个变量）

# c# - 为什么在这个例子中并行版本比顺序版本慢？

> ID：10418493
> 
> 赞同：5
> 
> 时间：2012-05-02T13:44:31.457
> 
> 标签：c#, parallel-processing

在过去的几天里，我一直在学习一些关于并行性的知识，并且遇到了[这个](http://msdn.microsoft.com/en-us/library/dd460703.aspx)例子。

我将它与这样的顺序 for 循环并排放置：

```
private static void NoParallelTest()
{
    int[] nums = Enumerable.Range(0, 1000000).ToArray();
    long total = 0;
    var watch = Stopwatch.StartNew();
    for (int i = 0; i < nums.Length; i++)
    {
        total += nums[i];
    }
    Console.WriteLine("NoParallel");
    Console.WriteLine(watch.ElapsedMilliseconds);
    Console.WriteLine("The total is {0}", total);
} 
```

我很惊讶地看到 NoParallel 方法的完成速度比网站上给出的并行示例要快得多。

我有一台 i5 电脑。

我真的认为 Parallel 方法会更快完成。

对此有合理的解释吗？也许我误解了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T14:15:15.210

顺序版本更快，因为在您的示例中每次迭代执行操作所花费的时间非常少，并且创建和管理多个线程涉及相当大的开销。

仅当每次迭代在处理器时间方面足够昂贵时，并行编程才能提高效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:11:48.697

我认为这是因为循环执行了一个非常简单、非常快速的操作。

在非并行版本的情况下，这就是它所做的一切。但是并行版本必须调用委托。调用委托非常快，通常您不必担心这样做的频率。但在这种极端情况下，这就是与众不同的地方。我可以很容易地想象，调用委托将比从数组中添加一个数字慢十倍（或者更多，我不知道确切的比率是多少）。

# c++ - 如何以 SM5.0 方式渲染填充的 B-Spline？

> ID：10418499
> 
> 赞同：1
> 
> 时间：2012-05-02T17:11:14.643
> 
> 标签：c++, 2d, direct3d11, tessellation

如果我想为 GPU 提供一些等值线补丁，最后让它给我一些三角形图元。有没有一些实用的方法，或者我应该在哪里寻找它们？

似乎 Direct2D 使用 D3D9 函数。我想它可能会在 CPU 中进行镶嵌。我想知道是否有GPU方式。

# static - 在静态 iphone tableview 中的单元格上创建渐变

> ID：10418501
> 
> 赞同：0
> 
> 时间：2012-05-02T17:11:38.933
> 
> 标签：static, cell, tableview, gradient

你知道是否可以使用 UI Builder 为静态单元格设置特定的渐变？从代码访问单元格也可以。不幸的是，我不能使用 tableview 委托方法来提取单元格，因为这会影响所有其他单元格。

多谢

克劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:05:34.720

我认为一种可能的解决方案可能是使用该方法：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

它实际上提供了修改静态表格视图中的单元格而不影响其他单元格的可能性。其他解决方案非常受欢迎:)

# sql - 在数据库中存储 Ruby 代码

> ID：10418502
> 
> 赞同：4
> 
> 时间：2012-05-02T17:11:42.823
> 
> 标签：sql, ruby-on-rails, database, erb

我的 Ruby on Rails 应用程序需要根据数据库记录生成报告 我一直在存储在数据库中生成这些报告所需的 SQL 和 ERB 代码。每份报告由三部分组成：

*   一个标头，它是一个 ERB 片段，使用`<%= render inline: @report.header %>`
*   页脚，它是另一个 ERB 片段，使用`<%= render inline: @report.footer %>`

然后使用 评估其内容的主体，`@rows = eval("#{@report.model}.find_by_sql('#{@report.query}')")`使用以下方式呈现：

```
<% @rows.each do |row| %>
  <tr>
    <% row.attributes.each_value do |value| %>
      <td><%= value %></td>
    <% end %>
  </tr>
<% end %> 
```

中的模型`@report.model`是存储在列中的 Ruby 类的名称。

虽然这可以很好地完成工作，但我开始对在数据库中存储实际源代码感到不安。已提出的替代方案是将代码存储在文件中，并从数据库中引用这些文件，而不是将代码存储在数据库中。对我来说，这听起来并没有好多少（实际上这更麻烦，因为我必须打开并读取文件，而不是简单地呈现数据库列中的文本）。

在数据库中存储这样的源代码的普遍共识是什么，以及有哪些（更好的）替代方案：一些考虑因素包括：

*   很少添加新数据（我们正在谈论基于自 1999 年以来未更改的联邦法规的报告）
*   如果确实需要更改，则除我之外的任何人都不会对其进行修改（虽然我显然无法预测未来，但为了争论，我们假设这是正确的）。
*   记录的数量是有限的。我们在这里最多讨论八种不同的报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:16:41.337

我在数据库中存储代码没有问题，但我*确实*想知道，如果它很少被添加，并且你是唯一一个改变它的人，那么这样做你真正获得了什么（将它保存在数据库中）。我有点怀疑它是否值得，除非它需要经常改变。OTOH，IMO，只要对您的应用程序的其余部分进行相同的测试，这样做就没有害处。

数据库中的模板——这也没有问题，尽管同样的警告也适用。请注意，特别是在 Rails 3+ 中，您可以扩展 Rails 以自动从数据库中检索模板，从而可能为您节省一些手动工作。

我不知道还有什么其他*很好的*选择，尽管如果您担心重新部署，我可能会考虑上传文件而不是 DB blob。

# php - 如何让会话变量在标头重定向中保持不变？

> ID：10418509
> 
> 赞同：0
> 
> 时间：2012-05-02T17:12:15.500
> 
> 标签：php, html, sql

**如何让会话变量在标头重定向中保持不变？**

我的标头重定向如下所示：`header("Location:./content/user_dash.php");`

我`session_start();`在每一页的顶部都有。

我在我的标头重定向之前尝试过`session_regenerate_id(true);`

我在我的标题之前和 session_regenerate_id 重定向之后尝试过`session_write_close();`

我已经尝试过`exit(0);`，并且`die();`在我的标头重定向之后；

我试过了`header("Location:./content/user_dash.php?PHPSESSID=".session_id());`

如果我包括最后一页它可以工作（但我不能使用它）并且当我改变它以重定向我的变量时停止工作。我通过 $_SESSION 使用 foreach 循环对此进行了测试，它在包含页面时打印，但不重定向。

我有点担心这个问题，因为我确实需要在重定向后使用会话变量。

文件结构：

index.php = 提交登录表单 => login_code.php = 设置会话 vars 后重定向 => user_dash.php 回显 vars 并且没有任何显示（空 vars，if 语句回显 if isset）

我已经删除了重定向，甚至简单的超链接也没有将我的会话变量带到下一页。

**实时 HTTP 标头：**

```
*serverinfo*/login_code.php

POST *serverinfo*/login_code.php HTTP/1.1
Host: server
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: *serverinfo*
Cookie: PHPSESSID=im7kid3isj1q9ft03a68s6d5i3
Content-Type: application/x-www-form-urlencoded
Content-Length: 29
username=user&password=pass
HTTP/1.1 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Type: text/html
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Server: Microsoft-IIS/7.5
X-Powered-By: PHP/5.3.10, ASP.NET
Date: Thu, 03 May 2012 16:24:54 GMT
Content-Length: 159
----------------------------------------------------------
*serverinfo*/content/admin_dash.php

GET *serverinfo*/content/admin_dash.php HTTP/1.1
Host: server
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cookie: PHPSESSID=im7kid3isj1q9ft03a68s6d5i3

HTTP/1.1 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Type: text/html
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Server: Microsoft-IIS/7.5
X-Powered-By: PHP/5.3.10, ASP.NET
Date: Thu, 03 May 2012 16:24:54 GMT
Content-Length: 3474 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:13:36.523

将 放在`session_start()`任何其他代码（包括纯文本）之前。

```
<?php session_start(); ?>
Hello<?php echo " ".$_SESSION['firstname']." ".$_SESSION['lastname'];?>. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T19:34:40.117

您需要调试您的应用程序。

这可能会让您大吃一惊，但调试需要程序员的大部分时间。所以，是时候学习一些真正的程序员工作了。

```
header("Location:./content/user_dash.php?".session_name()."=".session_id()); 
```

一起使用`session_write_close()`是最防弹的方式

如果它仍然不起作用，请开始调试它。

*   检查会话文件
*   检查饼干
*   检查ini设置
*   检查 user_dash.php 中的会话 ID - 是否相同？
*   检查您是否真的丢失了所有会话或者可能只是一个变量

谢谢你的ini设置。我可以看到 2 个可疑的

*   session.use_only_cookies On 表示通过 url 发送 SID 无效。再次检查会话 cookie
*   session.cache_expire 180 180 太小了。

我可能忽略了一些，因为我没有为调试您的应用程序获得报酬，而且我有自己的工作要做。所以，我只是建议将所有设置设为默认值，并且在您确定自己在做什么之前永远不要触摸它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:55:46.823

我发现我的问题的一部分，我的 $_SESSION 变量虽然被设置，但没有与会话 ID 一起保存到 cookie 中。就该特定问题发布新问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T11:56:31.243

我们可以通过两种方式解决此问题

一世 。在 Firefox 浏览器设置中将字符编码更改为“UTF-8”

二、在页面添加PHP代码

`<?php header('Content-Type: text/html; charset=utf-8'); ?>`

which you going to post

Thanks,

Suresh Ramakrishnan

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T17:46:58.973

处理重定向和 header() + 刷新/位置，可能会导致 session_id 被更新，具体取决于所使用的 PHP 结构：

根据经验，我发现命名会话确实有助于解决这些值，因为 session_name 会阻止 session_id 被刷新：

* * *

阅读它： http: [//pt2.php.net/session_name](http://pt2.php.net/session_name)

* * *

**PHP 优先**

```
// If session is not set, this will set it up with the defined name.
// Session is then initialized.
define("CONF_SESSION_NAME", 'my_session_named');
if (!isset($_SESSION)) {
    session_name(CONF_SESSION_NAME);
    session_start();
} 
```

以我的经验，这避免了来自同一位置的多个平台的会话冲突，并且确实有助于解决 header() 问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-02T20:08:36.900

在阅读了一些关于这个特定问题的信息后，我注意到在[bugs.php.net](https://bugs.php.net/bug.php?id=14636)上，有很多关于这个问题的讨论。

在关于这个特定问题的讨论中找到的解决方案是使用 META Refresh 重定向用户：

```
<meta http-equiv="refresh" content="0; url=http://example.com/"> 
```

**报价：**

*为了让 PHP 能够“找到”先前设置的会话变量，它必须能够识别客户端，对吗？嗯，用于完成此操作的默认方法是通过在您启动会话时设置的 cookie。由于您似乎正在使用启动会话的同一页面上的 Location 标头将用户重定向到成员的唯一页面，因此不会设置 PHPSESSID cookie。因此，一旦用户到达会员的唯一页面，PHP 将无法识别该用户。他们的会话变量仍然存在，但 PHP 不会把它交给陌生人。:)*

*基本上，在包含 Set-Cookie 标头的 HTTP 响应中，它需要是常规的 200 OK 响应，而不是协议级别的重定向。如果您绝对必须拥有您想要的行为，您将不得不使用元刷新进行重定向。是的，它不是那么酷，但它是设置 cookie 并在同一响应中重定向客户端的唯一方法。否则，您必须在 URL 上传递 cookie 的值，这实际上对您来说可能是一个不错的选择。*

# javascript - 当所有先前的字段都填满后，添加新的输入字段

> ID：10418518
> 
> 赞同：6
> 
> 时间：2012-05-02T17:12:39.323
> 
> 标签：javascript, jquery, forms, dynamic

这是我当前的 HTML 和 CSS 代码：

```
 <form method="post" id="achievementf1" action="">
    <span>1.</span>
    <input type="text" name="achievement1" id="achievement1" />
    <br />
    <span>2.</span>
    <input type="text" name="achievement2" id="achievement2" />
    <br />
    <span>3.</span>
    <input type="text" name="achievement3" id="achievement3" />  
    <br />                      
    <input type="submit" name="submit1" value="Registrate" />
  </form>  ​ 
```

```
#border #info-box #info #box input[type="text"] {
  float: left;
  margin-top: 10px;
  margin-bottom: 10px;
  height: 25px; 
  width: 650px; 
  outline: none;
}
#border #info-box #info #box input[type="submit"] {
  margin-left: 500px;
  margin-top: 10px;
  margin-bottom: 10px;
  height: 35px; 
  color: #fff;
  font-size: 20px;
  border: 2px solid #fff;
  border-radius: 8px 8px 8px 8px;
  padding-left: 15px;
  padding-right: 15px;
  padding-top: 3px;
  cursor: pointer;  
}​ 
```

[您可以在http://jsfiddle.net/mzNtj/2/](http://jsfiddle.net/mzNtj/2/)看到它的实际效果。我想知道当所有其他输入字段都填满后，我如何自动附加一个新的输入字段。我有一个基本的想法，读入每个字段的值并用`if`语句检查它。然后，如果没有一个为空，则添加一个新的。

这是一种适当的检查方式，还是有人有更好的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T17:34:37.753

试试下面的代码：

```
$(function(){
    $(document).on("change","input", function(){
        var allGood=true;
        var lastInputField=0;
        $("input").each(function() {
            if ($(this).val() =="") {
                allGood=false;
                return false;
            }
            lastInputField++;
        });

        if (allGood) {
            $("<span>" + lastInputField + "<input type='text' id='lastinputfieldId" + lastInputField +"'" +
              "name='lastinputfieldName" + lastInputField + "'></span>").appendTo("form");
        }
    });
});
​ 
```

**演示：http: [//jsfiddle.net/mzNtj/3/](http://jsfiddle.net/mzNtj/3/)。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:21:05.563

当所有字段都填满时，首先隐藏您想要添加的内容......然后当最后一个字段使用键侦听器调用一个函数并在该函数中使该字段可见时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:43:56.413

试试这个：

[http://jsfiddle.net/F8qR2/](http://jsfiddle.net/F8qR2/)

代码是：

```
function AllInputsFilled() {
    return $("input[type='text']", $("#achievementf1")).filter(function() {
        return $(this).val().trim() === "";
    }).size() === 0;
}

function AdditionEvent() {
    if (AllInputsFilled()) {
        AddInput();    
    }
}

function AddInput() {
    var cnt = $("input[type='text']", $("#achievementf1")).size() + 1;
    $("<br><span>" + cnt + "</span><input type='text' name='achievement" + cnt+ "' id='achievement" + cnt+ "' />").insertAfter("#achievementf1 input[type='text']:last");
    $("input", $("#achievementf1")).unbind("keyup").bind("keyup", function(){ AdditionEvent() });

}

$("input", $("#achievementf1")).bind("keyup", function(){ AdditionEvent() });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T17:53:23.427

好吧，看看这个 jsfiddle：http: [//jsfiddle.net/Ralt/mzNtj/4/](http://jsfiddle.net/Ralt/mzNtj/4/)

仔细阅读注释以了解此代码的作用：

```
// First, listen for the "onkeypress" event instead of the "blur" or "change".
// Why? For the UX, since the user will think he can click the submit
// button as soon as the third field is filled in if you use the "blur" or
// "change" event.
document.forms[ 'achievementf1' ].onkeypress = function( e ) {
    // Some cross-browser handling
    var e = e || window.event,
        target = e.target || e.srcElement;

    // If the target is an INPUT
    if ( target.nodeName === 'INPUT' ) {

        // Now here is the tricky part:
        // The "every" method returns false if *one* callback returns false,
        // otherwise it returns true.
        // And we use !! to check if it's not empty.
        var allNotEmpty = [].every.call( this.elements, function( el ) {
            return !!el.value;
        } )

        // If it's true, it means all the fields are not empty
        if ( allNotEmpty ) {

            // So let's create an input
            var newInput = document.createElement( 'input' )
            // Set some properties
            // And then... insert it before the submit button :-)
            this.insertBefore( newInput, this.elements[ 'submit1' ] );
        }
    }
} 
```

我知道，我的代码很奇怪，因为我关心跨浏览器来处理事件，但[`every`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)旧版浏览器不支持。那好吧...

# vb.net - 在 Vb.net 中使用数组

> ID：10418522
> 
> 赞同：-1
> 
> 时间：2012-05-02T17:13:05.697
> 
> 标签：vb.net, arrays

我是创建数组的新手并且有一个问题。假设您正在创建一个数组并且您不知道将在数组中的项目总数。您如何使用它而不会出现空错误。请注意，我知道我可以像这样添加数组：

```
 Dim myArray("1", "2", "3", "4", "5") as string 
```

例如，假设用户正在将名称输入到文本框中，我想将它们添加到数组中。我将如何做到这一点：

这就是我到目前为止所拥有的，我得到一个空错误：

```
 Dim myArray() as string

   myArray(0) = "John"
   myArray(1) = "Jim"
   myArray(2) = "James" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:22:42.680

您收到异常是因为您尚未定义数组的长度。您可以使用 ReDim 来定义长度，例如：

```
ReDim myArray(3) 
```

但似乎您在编译时或运行时都不知道数组的长度，那么最好使用 List 或[ArrayList](http://www.dotnetperls.com/arraylist-vbnet)。以下行的内容：

```
Dim list As New ArrayList
    list.Add("One")
    list.Add("Two")
    list.Add("Three") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:14:42.247

您在第二个代码示例中遇到了崩溃，因为数组没有定义的大小而没有在`()`. 要使数组在定义后具有大小，请使用[`ReDim`](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.80%29.aspx)

在 .NET 中，最好使用 a[`List(of T)`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.80%29.aspx#Y0)而不是数组，除非您确实必须使用数组。这样您就不必担心边界，列表会根据需要增长。

如果您真的需要一个数组并且在 .NET 3.5 中，那么您可以使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/bb298736%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:17:46.877

就像 davisoa 所说，您可以使用通用列表类：

```
Dim list as new List(of string)
list.Add("John")
list.Add("Jim")
list.Add("James")

Console.WriteLine(list(2)) 
```

# python - 如何在脚本完成之前返回 HttpResponse？

> ID：10418523
> 
> 赞同：1
> 
> 时间：2012-05-02T17:13:24.820
> 
> 标签：python, django

我目前正在用 django 编写一个 Web 应用程序，现在在我的主页上放置一个按钮，该按钮将打开一个新的浏览器窗口并运行一个 python 脚本。现在脚本大约需要 5 分钟才能完成。如何在此之前返回响应，以便用户知道正在发生某些事情并且只需要一些时间。这是我正在使用的views.py的一部分。

感谢您的帮助！

```
def redoScan(request):
   main()
   return HttpResponse("Submitted new scan job. New data will be displayed on main page in 5 minutes") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:08:56.383

您可以返回 HttpResponse 并异步添加任务。使用 celery 或 cron 或其他一些任务管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:02:12.743

您可以使用消息队列，例如 django-celery。如您所知，它已经有一个简单的 django 集成。Celery 允许您将“任务”异步传递到要处理的消息队列。这将允许用户开始时间密集的过程，而不必等待他们。

[http://mathematism.com/2010/02/16/message-queues-django-and-celery-quick-start/](http://mathematism.com/2010/02/16/message-queues-django-and-celery-quick-start/)

正如 pahaz 所建议的，一个 cron 也可以用于聚合数据。如果您定期为每个用户进行相同的计算。然后可以轻松地将其转换为自定义管理命令，并将数据存储在中间表中。这样，用户只需查找数据，而不必等待数据被处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:18:56.097

好吧，我现在实际上已经使用 Javascript 在屏幕上写了一个状态，然后我调用了一个 AJAX 函数，该函数将在扫描完成后发布新的状态。这实际上并没有那么糟糕，因为我使用 AJAX 反正没什么大不了的。早该想到的。

无论如何，谢谢你们的帮助！

# inversion-of-control - 自定义配置注入 - Castle Windsor / IoC 的新手

> ID：10418525
> 
> 赞同：4
> 
> 时间：2012-05-02T17:13:34.923
> 
> 标签：inversion-of-control, castle-windsor, castle

嗨，我是温莎城堡的新手，正在努力理解一些基础知识，所以我想我发布一个问题，而不是通过代码，希望能尽快解决我的问题。

我有一个需要从配置文件 web.config 中提取信息的网络服务。此信息位于自定义配置部分中，我想知道如何将该信息提供给需要它的类。我不想将该类绑定到配置文件，因为我可能通过 IIS 或自定义 Windows 服务托管它。我的第一次尝试是做这样的事情：

```
iocCon.Register(Component.For<ErrorMessagesSection>().LifeStyle.Singleton.Instance(FindConfigSection<ErrorMessagesSection>())); 

private T FindConfigSection<T>() where T : ConfigurationSection
    {
        System.Configuration.Configuration config = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/web.config");//TODO: remove this hard coding to iis hosting  .OpenExeConfiguration(ConfigurationUserLevel.None);
        ConfigurationSectionGroupCollection sectionGroups = config.SectionGroups;

        foreach (ConfigurationSectionGroup sectionGroup in sectionGroups)
            foreach (ConfigurationSection configurationSection in sectionGroup.Sections)
                if (configurationSection.GetType() == typeof(T))
                    return (T) configurationSection;
        return null;
    } 
```

该部分只能定义一次，因此这基本上抓住了该部分，因此可以将其注入到错误消息工厂类的构造函数中。这不会引发任何错误，但是我注意到该部分被创建了两次，这导致了其他问题（我应该修复但是......）无论如何要解决这个问题，我决定我将创建单个实例并自己注册它所以我尝试了：

```
UGLY_HACK = new ConfigFileErrorMessageManager(eMessages);
iocContationer.Register(Component.For<IErrorMessageManager>().ImplementedBy<ConfigFileErrorMessageManager>().LifeStyle.Singleton.Instance(UGLY_HACK)); 
```

那是刚刚创建的容器的第一次注册，它爆炸了以下内容：

```
[ComponentRegistrationException: This component has already been assigned implementation xxx.ConfigFileErrorMessageManager]
Castle.MicroKernel.Registration.ComponentRegistration`1.ImplementedBy(Type type,     IGenericImplementationMatchingStrategy genericImplementationMatchingStrategy) +310

Castle.MicroKernel.Registration.ComponentRegistration`1.Instance(TService instance) +44 
```

我的第一个问题：这个错误怎么可能（没有注册其他内容）/或者它是否意味着比看起来更微妙的东西？第二个问题：将配置信息获取到需要它的类的最佳实践是什么（我是不是错了）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:31:28.293

看起来您真正需要的只是一个*适配器*，`ConfigurationManager`它允许您向 Windsor 注册应用程序的配置。

[这是一个`IConfigurationManager`](https://github.com/NathanGloyn/IConfigurationManager)带有适配器的[实现](https://github.com/NathanGloyn/IConfigurationManager)`WebConfigurationManager`，可以让您做到这一点。

注册它

```
container.Register(
    Component.For<IConfigurationManager>()
             .Instance(new WebConfigurationManagerAdapter())); 
```

现在您可以注入`IConfigurationManager`需要访问配置的组件。

如果您只想注入特定部分，您可以向 Windsor 注册一个工厂方法，以从`IConfigurationManager`注册到容器中检索强类型部分，例如

```
container.Register(
    Component.For<ErrorMessagesSection>()
             .UsingFactoryMethod(kernel => 
                 kernel.Resolve<IConfigurationManager>()
                       .GetSection<ErrorMessagesSection>("errorSectionName"))); 
```

# java - 设置我的菜单对象的布局

> ID：10418528
> 
> 赞同：1
> 
> 时间：2012-05-02T17:13:49.253
> 
> 标签：java, jbutton, grid-layout, jmenu

我无法设置我的新窗口布局。我有一个菜单和子菜单。我的子菜单上有一个动作监听器，它将我引导到新窗口。问题是我无法将其设置为给定的布局。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Converter extends JFrame
{
    private static final long serialVersionUID = 1L;
    private MoneyDetails convertMe = new MoneyDetails();
    private JLabel tlLabel = new JLabel("     Amount of TL");
    private JLabel dollarsLabel = new JLabel("Amount of Dollars");
    private JTextField tlField = new JTextField("0.0");
    private JTextField dollarsField = new JTextField("0.0");
    private JButton tlButton = new JButton("Convert to $");
    private JButton dollarsButton = new JButton("<<< Convert to TL");
    private JButton setRates = new JButton("Set Rates");

    private JMenuBar menuBar = new JMenuBar(); // Window menu bar
    public Converter(String title) {
        setTitle(title);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setJMenuBar(menuBar); // Add the menu bar to the window
        JMenu fileMenu = new JMenu("File"); // Create File menu
        JMenu elementMenu = new JMenu("Elements"); // Create Elements menu
        JMenuItem subTest = new JMenuItem("Test");

        // Here is the problem
        subTest.addActionListener(new ActionListener(){     
            public void actionPerformed(ActionEvent actionEvent){
                Converter convert = new Converter();

                GridLayout expLay = new GridLayout(2,2,12,6);
                convert.setLayout(expLay);
                convert.getLayout();
                convert.doLayout();
                convert.setVisible(true);
            }
        });

        menuBar.add(fileMenu); // Add the file menu
        menuBar.add(elementMenu); // Add the element menu
        fileMenu.add(subTest);
    }

    public Converter()
    {
        JPanel dataPanel = new JPanel(new GridLayout(2, 2, 12, 6));
        dataPanel.add(tlLabel);

        dataPanel.add(dollarsLabel);
        dataPanel.add(tlField);
        dataPanel.add(dollarsField);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(tlButton);
        buttonPanel.add(dollarsButton);
        Container container = this.getContentPane();
        container.add(dataPanel, BorderLayout.CENTER);
        container.add(buttonPanel, BorderLayout.SOUTH);
        tlButton.addActionListener(new TLConverter());
        dollarsButton.addActionListener(new DollarsConverter());
        buttonPanel.add(setRates);
    }

    private class TLConverter implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            try
            {
                String input = tlField.getText();
                double tl = Double.parseDouble(input);
                convertMe.setTL(tl);
                double dollars = convertMe.getDollars();
                dollarsField.setText(String.format("%.2f", dollars));
            }
            catch(Exception ex)
            {
                JOptionPane.showMessageDialog(null, "Please enter the amount that will be converted.");
            }
        }
    }

    private class DollarsConverter implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String input = dollarsField.getText();
            double dollars = Double.parseDouble(input);
            convertMe.setDollars(dollars);
            double tl = convertMe.getTL();
            tlField.setText(String.format("%.2f", tl));
        }
    }

    public static void main(String [] args)
    {
        System.out.println("bbb");
        Converter window = new Converter("Para Dönüstürücü"); 
        System.out.println("aaa");
        window.setBounds(30, 30, 300, 300);
        window.setVisible(true);
    /*  Converter theGUI = new Converter();
        theGUI.setTitle("TL to $ or $ to TL Converter");
        theGUI.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        theGUI.pack();
        theGUI.setVisible(true); */
    }
} 
```

问题在于带有`String`参数的构造函数：`subTest.addActionListener(new ActionListener(){...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:30:35.767

`pack()`在默认构造函数中添加调用。

# java - 使用 JSR 303 验证集合

> ID：10418529
> 
> 赞同：2
> 
> 时间：2012-05-02T17:13:50.570
> 
> 标签：java, validation, bean-validation

我想使用 JSR 303 验证来验证 bean 数组。就像[规范](http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html_single/#d0e416)说的那样，可以验证整个集合。如果我有这样的对象

```
public class Car {
  @NotNull
  @Valid
  private List<Person> passengers = new ArrayList<Person>();
} 
```

所以我可以通过执行以下操作来验证乘客名单：

```
Car car = ....
Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
Set<ConstraintViolation<Car>> validation = validator.validate(car); 
```

但我想知道，为什么我不能通过执行以下操作来验证乘客名单：

```
Validator validator = Validation.buildDefaultValidatorFactory().getValidator();
Set<ConstraintViolation<List<Person>>> validation =validator.validate(passengers); 
```

它只是行不通！任何人都可以给我任何解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:24:39.250

Bean Validation 不提供用于直接验证集合的 API。仅支持使用的集合/数组的级联验证`@Valid`。

`validate()`您使用的方法验证在传递对象的类型上声明的约束。没有在`List`or上声明约束`ArrayList`，这就是为什么在将列表直接传递给 时不会发生约束违规的原因`validate()`。

您可以遍历乘客列表并验证各个元素或验证拥有该列表的对象（如您的原始示例中所示）。

# twitter-bootstrap - bootstrap：允许滚动到特定宽度以下

> ID：10418530
> 
> 赞同：0
> 
> 时间：2012-05-02T17:13:54.510
> 
> 标签：twitter-bootstrap, responsive-design

第一次在这里提问。已经尝试通过搜索“引导强制滚动”等来完成作业。

我正在学习使用 twitter bootstrap 设计一个专门针对移动设备的响应式视图，所以我希望页面在宽度低于 1024 像素时水平滚动。我尝试查看标准 bootstrap-responsive.css 并删除了 max-width=980px / (min-width:768) 和 (max-width:979) 的所有块，但我的 div 仍然被包裹成多行而不是滚动。我在做傻事吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:40:24.000

直接修改引导 CSS 是个坏主意 - 它是从CSS 预处理器[LESS编译而来的。](http://lesscss.org)你有两个选择：

1.  使用方便的 Bootstrap 自[定义页面](http://twitter.github.com/bootstrap/customize.html)并选择您想要包含的响应式尺寸。在您的情况下，您可能希望取消选中“窄型平板电脑及以下”和“平板电脑到台式机”。

2.  以 LESS 形式下载 Bootstrap，将响应宽度更改为您想要的，然后编译成 CSS。

# javascript - javascript jquery.getJSON 奇怪的行为

> ID：10418533
> 
> 赞同：2
> 
> 时间：2012-05-02T17:14:17.247
> 
> 标签：javascript, jquery

我已经开始尝试使用 javascript 和 jQuery。我试图创建一个将 json 文件加载到指定 div 的类，但我遇到了我不理解的行为：

*注意：我知道这段代码不会将任何内容加载到 div 中，这只是我能找到的最短示例来显示我不理解的行为。*

```
function test(div) {
    this.div = div;
    _this = this;
    jQuery.getJSON('/example.json', null, function(data) {
        console.log(_this.div);
    });
} 
```

当我跑步时

```
a = new test("a"); 
b = new test("b"); 
```

我希望看到“ab”作为输出，但实际输出是“bb”。但是，如果我允许第一行在调用第二行之前完成，则会显示预期的输出。我很困惑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:18:16.080

你 `_this`是一个全局变量，`var`在它之前添加。

工作示例：http: [//jsfiddle.net/SQRwn/](http://jsfiddle.net/SQRwn/)

顺便说一句，如果您的代码如下所示，您的代码将可以正常工作，但是您在这里拥有的可能不是您将要使用的代码......

```
function test(div) {
    jQuery.getJSON('/example.json', null, function(data) {
        console.log(div);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:18:27.140

如果您在变量之前不包含`var`它，它将成为全局变量：

```
_this = this; 
```

应该是

```
var _this = this; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:18:45.487

这是因为你没有正确地删除`_this`变量，它是全局的。将行更改为：

```
var _this = this; 
```

但是，使用您的代码示例，您甚至不需要缓存`this`：

```
function test(div) {
    jQuery.getJSON('/example.json', null, function(data) {
        console.log(div);
    });
} 
```

# javascript - 使用 Javascript/jQquery 创建垂直时间线

> ID：10418534
> 
> 赞同：8
> 
> 时间：2012-05-02T17:14:18.500
> 
> 标签：javascript, jquery, charts, timeline

我看到了有关使用 Javascript 创建时间线的库的其他问题。有一些库，但它们创建水平时间线，但我想创建垂直时间线。

那么，哪个是创建垂直时间线的好库？

我不想要像 Facebook 这样的带有帖子的时间线，而是一个简单的时间线，其中包含年数和类似[问题](https://stackoverflow.com/questions/4700419/alternative-to-simile-timeline-for-timeline-visualization)中的项目，但垂直而不是水平。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T19:47:11.743

我有一个 jQuery 插件来创建一个简单的垂直时间线。有关背景，请参阅[this](http://www.technotarek.com/timeliner/) ，有关演示，请参阅[this 。](http://technotarek.com/timeliner/demo-future/timeliner-future.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T17:22:15.457

如果你想做一个像时间轴这样的 FB，jQuery mansonry 是相当不错的，并且用一点 CSS 就足以创建核心时间轴。然后添加你想要的东西，我知道那里甚至有一个教程但是找不到它。[http://masonry.desandro.com/](http://masonry.desandro.com/)

否则有[这个](https://github.com/chimericdream/jquery-vertical-timeline)项目

这是 FB 时间线[教程](http://www.9lessons.info/2012/01/facebook-timeline-design-using-jquery.html)，不是最好的，但有助于掌握基本知识

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:16:24.283

我认为这就是您要寻找的东西[https://github.com/balancemedia/Timeline](https://github.com/balancemedia/Timeline)

这使用[同位素](http://isotope.metafizzy.co/)以垂直时间排序的结构创建一系列事件。

# python - Python 列表列表

> ID：10418536
> 
> 赞同：-1
> 
> 时间：2012-05-02T17:14:28.697
> 
> 标签：python, list, physics

我是 python 和一般编程的新手，我正在做我的计算物理学的最终项目，并且在获得允许我实例化 n 个粒子的结构时遇到了麻烦，每个粒子都具有属性 x，y，vx， & 维。这一切都在建立一个理想的气体模拟，最终将被插入到恒星聚变模型中。任何帮助将不胜感激。这是我到目前为止所拥有的。

```
 import random

    atoms = 10
    x = 1000
    y = 1000
    vx = 1000
    vy = 1000
    t = 1
    n = 10000
    b = 0   
    dt = 10
    particle = [x, y, vx, vy]
    system = [particle]
    for i in range(atoms):
        system.append(i)

        for system[i] in range(atoms):
            particle.x = x * random.uniform(0.1, 0.9999)
            particle.y = y * random.uniform(0.1, 0.9999)
            particle.vx = vx * random.uniform(0.1, 0.9999)
            particle.vy = vy * random.uniform(0.1, 0.9999)

        for particle[i] in range(atoms):    
                for t in range(dt):
                    x = x + vx
                    y = y + vy
                    if y < 0:
                        y = -y
                        vy = -vy

                    if x < 0:
                        x = -x
                        vx = -vx

                    if y > 10:
                        m = y - 10
                        y = 10 - m
                        vy = -vy

                    if x > 10:
                        k = x - 10
                        x = 10 - k
                        vx = -vx 
```

基本思想是有一个称为“系统”的列表，其元素是称为“粒子”的列表，随着系统随时间的发展，我需要跟踪这些粒子的位置。非常感谢！

本

*更新

当我运行它时，我得到了particle.x = x * random.uniform（0.1，0.9999），我遇到“AttributeError：'list'对象没有属性'x'”

如何将属性（x、y、vx、vy）分配给每个列表“粒子”，然后将这些列表用作称为“系统”的列表中的元素？

我知道代码“按原样”是可悲的，我想我咬得比我能咀嚼的多一点。谢谢你的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:37:44.180

我不想做别人的功课，很难看出你的问题是什么，但似乎是“请解释列表列表”？

```
characters = []
characters.append (["plumber","wrench"])
characters.append (["wizard","wand"])
> print characters [0]
['plumber', 'wrench']
> print characters [1]
['wizard', 'wand']
> print characters [1][1]
wand 
```

# c# - 我似乎无法使用模型的属性值填充文本框

> ID：10418538
> 
> 赞同：1
> 
> 时间：2012-05-02T17:14:35.023
> 
> 标签：c#, asp.net-mvc, razor

我正在尝试像这样填充文本框：

```
<span class="display-label">Volume Amount:</span><span>@Html.TextBoxFor(m=>m.VolumeAmount)</span> 
```

这不起作用。显示文本框，但该属性的文本从不填充该字段。但是，如果我这样做：

```
<span class="display-label">Volume Amount:</span><span><input type"text" name="VolumeAmount" value="@(Model.VolumeAmount)" /></span> 
```

一切似乎都很好，但是当字段更改时，如果不做一些 AJAX，我将无法更新属性。

注意：这是从视图加载的局部视图内部。加载它的视图会加载现有表单元素内的部分视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:41:56.913

在您的控制器中尝试：

```
ModelState.Clear(); 
```

MVC 喜欢保留以前帖子中的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:44:56.163

将 mvc 模型变量写入以下 using 子句中包含的 aspx 页面中

```
<% using(Html.BeginForm("HandleForm", "Home")) %>
<% { %>
    <!-- Form content goes here -->
<% } %> 
```

请参阅[http://msdn.microsoft.com/en-us/library/dd410596.aspx](http://msdn.microsoft.com/en-us/library/dd410596.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:25:15.820

您应该将文本框放在表单内。尝试检查任何样品。例如：创建asp.net mvc项目并打开Account控制器的Login(Login.cshtml)视图。它可以让你弄清楚它是如何工作的。

# c++ - 计算相邻异或

> ID：10418543
> 
> 赞同：1
> 
> 时间：2012-05-02T17:14:58.813
> 
> 标签：c++, c, algorithm, xor

输入是一个最多包含 1000,000 个元素的布尔数组`a_0,i`。

每次新数组由`xor`前一个数组中的相邻（循环）元素组成时：

```
a_t,i = a_t-1,i ^ a_t-1,(i+1)%n     // n is size of input 
```

需要第 p 个数组 (a_p,i)。(p <= 1000,000,000)。

根据上限，`p`我认为可能存在数组结构，或者数组可以在`O(lg(p) * n)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:50:00.653

如果 t 是 2 的幂 (t=2 ^k )，

```
a_t,i = a_0,i ^ a_0,(i+t)%n 
```

此外，如果 t 是两个分量的和，其中一个是 2 的幂 (t = v + w, w=2 ^m )，

```
a_t,i = a_v,i ^ a_v,(i+w)%n 
```

这允许使用 p 的二进制表示来递归地计算结果数组。复杂度按要求：O(lg(p) * n)：

```
shift = 1;
while (p != 0)
{
  if (p&1)
    a ^= a.rotate(shift);
  shift *= 2
  p /= 2
} 
```

# ruby-on-rails-3 - rails button_to方法上的路由错误

> ID：10418547
> 
> 赞同：0
> 
> 时间：2012-05-02T17:15:08.260
> 
> 标签：ruby-on-rails-3

试图创建一个`button_to`更新单个属性的，但我收到路由错误。这是代码：

```
<%= button_to 'update', :action => 'update', :controller => 'users', :form => {:user => current_user, :share_articles_on_facebook => true} %> 
```

和错误：

```
No route matches {:action=>"update", :controller=>"users", :form=>{:user=>#<User id: 3, ema.... 
```

添加显式`:method`并不能解决问题。以下是路线：

```
 users GET    /users(.:format)    {:action=>"index", :controller=>"users"}
          POST   /users(.:format)        {:action=>"create", :controller=>"users"}
 new_user GET    /users/new(.:format)    {:action=>"new", :controller=>"users"}
edit_user GET    /users/:id/edit(.:format)      {:action=>"edit", :controller=>"users"}
     user GET    /users/:id(.:format)  {:action=>"show", :controller=>"users"}
          PUT    /users/:id(.:format)    {:action=>"update", :controller=>"users"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:17:50.893

所以，简单的错误。显然，它想要一个`:id`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:22:13.237

我想我遇到了类似的问题。对我来说，我`button_to`改为`link_to`. 据我所知，我无法通过按钮进行操作。我只是做了一个链接并将其设置为按钮。

# css - wordpress css图片链接

> ID：10418548
> 
> 赞同：0
> 
> 时间：2012-05-02T17:15:17.873
> 
> 标签：css, wordpress-theming

您好——我正在尝试（但失败得很惨）让这些社交媒体图标位于我的 Wordpress 博客 (www.doublecrossxx.com) 导航的右上角。我设法添加代码以正确放置它们，但我无法弄清楚如何在图像周围创建可点击区域。

```
#access {

background: black;
background-image: url("http://doublecrossxx.com/images/sm_dcxx.jpg");
background-repeat: no-repeat;
background-attachment: scroll;
background-position: 599pt 2pt;
height: 27px;
width: 23px;
display: inline-block;

    float: left;

    margin: 0;

    width: 845px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:03:01.160

您没有任何实际链接（`<a>`'s）；供人们点击。您只需将背景图像应用于您的#access div。

因此，您必须以某种方式将链接添加到您的#access div。我看不到您的主题文件，但如果我不得不*猜测*，请查看名为**header.php**的文件。这通常用于构建 wordpress 页面的顶部。

您应该能够很快找到#access div，并且可以添加链接，如下所示：

```
<div id="access">
   <!-- some php stuff for your menu -->
   <a id="fb_link" href="(link to facebook)"></a>
   <a id="twitter_link" href="(link to twitter)"></a>
</div> 
```

然后，在您的 CSS（可能是 style.css）中，使用该图像作为这两个链接的背景，而不是 #access：

```
#fb_link, #twitter_link {
    background: url("images/sm_dcxx.jpg") no-repeat top left;
    width: 25px;
    height: 25px;
 }
#twitter_link {
    background-position: top -25px;
 } 
```

（您将不得不调整 25px 的数量，这只是我的猜测）

这种技术的缺点是，如果您需要更改链接，则必须手动更改 header.php。没什么大不了的，但你应该意识到这一点。

另外，我注意到您的图片网址是这样的：

[http://doublecrossxx.com/images/sm_dcxx.jpg](http://doublecrossxx.com/images/sm_dcxx.jpg)

这告诉我您在 wordpress 安装的顶层创建了一个名为 /images/ 的文件夹。你不应该那样做。您添加到 WP 安装中的所有文件至少应放在 /wp-content/ 中。作为演示文稿一部分的图像（如此处所讨论的）*绝对*应该在您的主题文件夹中。在上面的 CSS 中，我使用了指向位于 CSS 文件旁边的图像文件夹的相对链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:10:35.497

我为您创建了一个 js fiddle，它可以让您的链接可点击，如果您有任何问题，请告诉我。

[http://jsfiddle.net/trickeedickee/PYTnm/](http://jsfiddle.net/trickeedickee/PYTnm/)

# wcf - 在注入 Autofac 的 WCF 服务上配置绑定

> ID：10418552
> 
> 赞同：2
> 
> 时间：2012-05-02T17:15:31.513
> 
> 标签：wcf, binding, configuration, integration, autofac

我正在使用 Autofac 提供一些 WCF 服务，并且按照教程它工作正常！但是现在，我需要发送一个大于 65Kb 的请求，所以我必须更改服务器上的绑定以允许该请求，但我不知道该怎么做！

如何拦截服务的注入以分配动态创建或在 .config 中定义的绑定？在客户端，我做得正确并且工作正常！

提前致谢，

马克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:12:05.887

最后我找到了解决方案，按照[这篇文章](https://groups.google.com/forum/#!msg/autofac/vPrvd0RtOtM/rmrjUvgrNj0J)。

我已经使用他的配置和我的服务名称重写了配置文件，它可以工作。我之前尝试过，但是没有用；真诚地，我不知道我的错误在哪里。

配置：

```
<bindings>
  <basicHttpBinding>
    <binding name="clearHttpBinding">
      <security mode="None" />
    </binding>
    <binding name="secureHttpBinding">
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName" />
      </security>
    </binding>
    <binding name="largeMessageHttpBinding" maxBufferSize="10000000"
        maxReceivedMessageSize="10000000" messageEncoding="Text" transferMode="Buffered">
      <readerQuotas maxArrayLength="10000000" />
      <security mode="None" />
    </binding>
  </basicHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="defaultBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="defaultBehavior" name="my.Services.MyService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="largeMessageHttpBinding" contract="my.ServiceModel.ServiceContracts.IMyService"/>
  </service>
</services> 
```

希望能帮助到你。

# ruby-on-rails - Rails/Mongoid 动态模型

> ID：10418553
> 
> 赞同：4
> 
> 时间：2012-05-02T17:15:33.130
> 
> 标签：ruby-on-rails, model, nosql, mongoid

我正在 RoR 中开发一个类似 CMDB 的应用程序，它有一个根“节点”模型，其子模型如“服务器”、“防火墙”、“路由器”……将继承，添加自己的特定字段。

因为每个子模型都有特定的字段，所以我将使用 MongoDB 和 Mongoid 进行无模式设计。

因为我将有数百个字段，所以我想根据配置文件动态生成子模型，该配置文件也将用于生成我的视图。这将有助于同步视图和模型并避免一些错误。

我不想使用 Mongoid “动态属性”，因为我不希望任何数据被盲目地持久化，所以我需要强制执行某种基于模型的动态模式。

有没有办法根据 YAML 中的配置文件使用特定字段动态增强我的根模型，其中包含子模型字段、类型、验证等？

我不认为使用这个配置文件来生成我的视图会有什么大不了的，但我不知道如何为我的模型做到这一点。

也许已经有 Gem 这样做了？（我在问之前已经搜索过）如果是，它是否与 Mongoid 兼容？（我希望是这样，因为这种动态模型只有在无模式 NoSQL 数据库中才有可能）。

# c# - 文本更改时如何从编程文本框中获取文本？

> ID：10418556
> 
> 赞同：0
> 
> 时间：2012-05-02T17:15:47.487
> 
> 标签：c#

我正在根据用户选择（1-5）创建几个文本框。当文本更改时，如何访问编程文本框的值。

```
class starts{
    int i=0;

    .....

    TextBox txtb4 = new TextBox();
    txtb4.Name = "textname" + Convert.ToString(i);
    ArrayText.Add(txtb4);
    System.Drawing.Point p5 = new System.Drawing.Point(120, 15);
    txtb4.Location = p5;
    txtb4.Size = new System.Drawing.Size(80, 30);
    txtb4.Text = stringMy;
    grBox1.Controls.Add(txtb4);
    i++;
} 
```

我可以使用下面的代码访问初始文本框文本，但在更改值后我无法访问它。

```
label15.Text = grBox1.Controls["textname0"].Text; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:21:16.563

所以，像...

```
TextBox txtb4 = new TextBox();
txtb4.Name = "textname" + Convert.ToString(i);
txtb4.TextChanged += textbox_TextChanged;
ArrayText.Add(txtb4);

// ...

void textbox_TextChanged(object sender, EventArgs e)
{
    var textbox = (TextBox)sender;
    // work with textbox
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:22:18.570

添加事件处理程序

```
txtb4.TextChanged += Txtb4_TextChanged; 
```

像这样声明处理程序

```
static void Txtb4_TextChanged(object sender, EventArgs e)
{
    string s = txtb4.Text;
    ...
} 
```

* * *

您动态创建文本框；但是您的代码看起来不是很动态。尝试这个

```
List<TextBox> _textBoxes = new List<TextBox>();
int _nextTextBoxTop = 15;

private void AddTextBox(string initialText)
{
    var tb = new TextBox();
    tb.Name = "tb" + _textBoxes.Count;
    _textBoxes.Add(tb);
    tb.Location = new Point(120, _nextTextBoxTop);
    _nextTextBoxTop += 36;
    tb.Size = new Size(80, 30);
    tb.Text = initialText;
    tb.TextChanged += TextBox_TextChanged
    grBox1.Controls.Add(tb);
}

static void TextBox_TextChanged(object sender, EventArgs e)
{
    TextBox tb = (TextBox)sender;
    string s = tb.Text;
    ...
} 
```

而且我不会通过`grBox1.Controls["textname0"].Text;`. 文本框列表是更好的选择，因为您可以通过数字索引而不是控件名称来访问它

```
string s = _textBoxes[i].Text; 
```

# javascript - 为什么我的 mongodb 调用这么慢？

> ID：10418558
> 
> 赞同：11
> 
> 时间：2012-05-02T17:15:50.193
> 
> 标签：javascript, node.js, mongodb, mongoose, database

好的，所以我正在构建一个基于 Node.js 的应用程序，并且我正在使用 mongoose 来处理我与 mongodb 的连接。我有一个这样的端点：

```
getTestStream : function(req, res, conditions, callback) {   
  Activity.find()
    .limit(1000)
    .run(function(err, activities) {
      if (err){
        util.sendError(req, res, "Query Error", err);
      } else if (activities) {     
        res.send(activities);
      } else {
        util.send('nope');
      }
  });
} 
```

由于某种原因，此调用需要 700 毫秒以上才能完成。甚至没有应用 mongodb shell 限制的相同调用在大约 4 毫秒内返回。这似乎是一个如此简单的查询，那么是什么让它这么慢呢？我猜我在某处的配置中遗漏了一些明显的东西，但我不知道。

感谢任何可以提供帮助的人。

其他信息：

```
mongoose@2.6.0
mongodb@2.0.4
node@0.6.9 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T00:14:39.627

经过一段时间的试验，我发现了一些导致缓慢的原因，希望这可以帮助任何有类似问题的人：

*   我请求的对象很大，因此处理它们需要一些时间。*对于大型对象，请修改查询以仅返回您现在*需要的字段。
*   Mongoose 很有用，但是当您请求大量项目时它会真正变慢，如果您想要调用速度，最好直接与 node-mongodb-native 接口。（对于我的场景，这大约提高了 50% 以上的速度）

使用这些技术，我现在可以在比以前处理 1000 条记录的时间更短的时间内处理 4000 条记录。感谢任何评论的人，特别感谢[盖茨副总裁](https://stackoverflow.com/users/261188/gates-vp)指出猫鼬并不适合这种电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:27:41.683

> 甚至没有应用 mongodb shell 限制的相同调用在大约 4 毫秒内返回。

默认情况下，shell 应用的限制为 30 左右。**尝试从 shell 执行实际限制？**

此外，您可能想`.explain()`从 Shell 尝试一个。

如果这些都不起作用，那么您可以接受@Kyle Banker 的建议并查看[分析器](http://www.mongodb.org/display/DOCS/Database+Profiler)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T06:32:33.063

checkout [ensureIndex](http://docs.mongodb.org/manual/reference/method/db.collection.ensureIndex/) 这将加快您的搜索速度

# php - 输出在我的 PHP 中转义（html 标签按原样呈现）

> ID：10418561
> 
> 赞同：3
> 
> 时间：2012-05-02T17:16:13.443
> 
> 标签：php, xml, json, escaping

所以我有最初编码为（一个实例）的文本

```
&amp;lt;b&amp;gt;Location.&amp;lt;/b&amp;gt;&amp;lt;br /&amp;gt; &amp;lt;UL&amp;gt;&amp;lt;LI&amp;gt;Park Central New York Hotel is located in New York, N.Y. 
```

此数据来自 xml 文件。所以在处理它之前，我将它转换为一个 simplexmlelement 对象，对其进行 json_encode（使用参数 1），然后对其进行 json_decode。最终，我手中的上述内容是呈现的文本，这就是我想要呈现的内容。

```
<b>Location.</b><br /> <UL><LI>Park Central Ne 
```

但是 HTML 标记不会呈现自己，只是像上面看到的那样输出自己。我有点困惑我需要在这里应用什么功能才能获得所需的输出。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T17:20:33.327

您已经对文本进行了双重 HTML 编码。这个字符串：

```
&amp;lt;b&amp;gt;Location.&amp;lt;/b&amp;gt; 
```

当解释为 HTML 时将呈现为：

```
&lt;b&gt;Location.&lt;/b&gt; 
```

您必须首先使用例如解码[`html_entity_decode`](http://php.net/manual/en/function.html-entity-decode.php)以使其呈现为所需的输出：

```
<b>Location.</b> 
```

但更好的是修复输入，使其一开始就不会被双重编码。

# android - FREBitmapData 无法编辑

> ID：10418563
> 
> 赞同：3
> 
> 时间：2012-05-02T17:16:29.077
> 
> 标签：android, actionscript-3, flash, air-native-extension

对于 Android Flash 移动应用程序，我尝试从相机中获取预览帧。

不幸的是，我不能使用 AIR Built-in Camera 类，因为除非我调用 setMode()，否则相机不会聚焦（这是不可接受的，因为它会冻结 UI）。

所以我决定为此编写一个原生扩展。扩展本身正在工作（我在 NativeCamera.pixels 中获得了正确的图像数据），但我无法使用 FREBitmapData 传输帧。在 ActionScript 方面，BitmapData 具有正确的尺寸，但它仍然是黑色的。

我的 Java 代码

```
package com.jumptomorrow.nativecamera;

import java.nio.ByteBuffer;

import com.adobe.fre.FREBitmapData;
import com.adobe.fre.FREContext;
import com.adobe.fre.FREFunction;
import com.adobe.fre.FREObject;

public class NativeCameraGrabFrameFunction implements FREFunction {

    @Override
    public FREObject call(FREContext context, FREObject[] object) {
        try {
            FREBitmapData out = null;

            try {
                out = FREBitmapData.newBitmapData(NativeCamera.size.width, NativeCamera.size.height, false, new Byte[]{0xf,0xf,0x0,0x0});
                out.acquire();
                ByteBuffer bb = out.getBits();
                bb = ByteBuffer.wrap(NativeCamera.pixels);
                out.invalidateRect(0, 0, NativeCamera.size.width, NativeCamera.size.height);

            } catch (Exception e) {
                e.printStackTrace();
            } 

            try {
                out.release();
            } catch(Exception e) {
                e.printStackTrace();
            }

            return out;

        } catch (IllegalStateException e) {
            e.printStackTrace();
        } 

        return null;
    }

} 
```

我的 ActionScript 代码

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.utils.ByteArray;

    import net.hires.debug.Stats;

    public class camera_test extends Sprite
    {
        private var nc:NativeCameraInterface;
        private var bitmap:Bitmap;

        public function camera_test()
        {
            super();

            // support autoOrients
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;

            nc = new NativeCameraInterface();
            try {
                nc.startCamera();
            }
            catch(e:Error) {
                trace(e.getStackTrace());
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        protected function onEnterFrame(event:Event):void
        {
            if(nc) {
                var bmpd:BitmapData = nc.getFrame() as BitmapData;

                try {
                    var bmp:Bitmap = new Bitmap(bmpd);

                    addChild(bmp);
                    bmp.scaleX = bmp.scaleY = 2;

                } catch(e:Error) {
                    trace("failed");
                }
            }
        }
    }
} 
```

有谁知道这可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:41:54.520

这些线不应该...

```
ByteBuffer bb = out.getBits();
bb = ByteBuffer.wrap(NativeCamera.pixels); 
```

……是这样的吗？

```
ByteBuffer bb = out.getBits(); // (no change)
bb.position(0);
bb.put(ByteBuffer.wrap(NativeCamera.pixels)); 
```

这会修改`ByteBuffer`通过 获得的实例`out.getBits()`，而不是通过创建新`ByteBuffer`实例`bb = ByteBuffer.wrap(...)`。

# c# - installutil 与 windows 服务安装，然后立即卸载自定义 windows 服务

> ID：10418567
> 
> 赞同：1
> 
> 时间：2012-05-02T17:16:38.203
> 
> 标签：c#, visual-studio, windows-services, installation, installutil

我有一个用 c# 编写的自定义 Windows 服务，我需要安装和调试它。当我使用

```
installutil "[path].exe" 
```

从命令行然后尝试搜索该服务，它不会出现在任何地方的已安装服务列表中。查看安装日志文件，我看到：

```
Installing assembly 'myservice'.   
Affected parameters are:  
   logtoconsole =    
   assemblypath = mypath  
   logfile = mylogfile  
Installing service MyService  
Service MyService has been successfully installed.  
Creating EventLog source MyService in log Application...  
Committing assembly 'myservice'.  
Affected parameters are:  
   logtoconsole =   
   assemblypath = myservice  
   logfile = pathtoinstalllog  
Uninstalling assembly myservice  
Affected parameters are:  
   logtoconsole =   
   assemblypath = myservice   
   logfile = pathtoinstalllog  
Removing EventLog source myservice.  
Service myservice is being removed from the system...  
Service myservice was successfully removed from the system.  
Uninstalling assembly myservice'.  
Affected parameters are:    
   logtoconsole =   
   assemblypath = myservice  
   logfile = pathtoinstalllog  
Removing EventLog source myservice.  
Service myservice is being removed from the system...  
Service myservice was successfully removed from the system. 
```

（名称 path、myservice、pathtoinstalllog 等代替公司具体信息）

无论如何，从日志文件中看起来好像正在安装服务，然后立即卸载......

如果需要更多代码或信息，请告诉我，并提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:00:57.007

根据我们的讨论总结...

*   use '`InstallUtil full-path`' to your service main output (bin/debug/assembly.exe). Usually if there's an error InstallUtil 'performs rollback' (so watch for errors) - it looks like it's doing so but your log doesn't say - so I'm guessing your 'myservice' is of wrong path (also pick the right InstallUtil version, .NET framework and 32/64)...

*   for security/account issues - `run InstallUtil elevated` ('run as admin', the command prompt etc.) - (and for additional debugging if needed, try specifying different user/type for your service account, check your installer class details, RunInstaller attribute etc.).

hope this helps

# javascript - 如何使用 javascript 从域中删除子域

> ID：10418570
> 
> 赞同：9
> 
> 时间：2012-05-02T17:16:48.610
> 
> 标签：javascript, regex, replace, dns, url-parsing

我从如下所示的域开始：

```
www.exemple.com
main.testsite.com
www.ex-emple.com.ar
main.test-site.co.uk
en.tour.mysite.nl
www.ip.com
www.one.lv 
```

我需要删除子域以获得如下所示的值：

```
exemple.com
testsite.com
ex-emple.com.ar
test-site.co.uk
mysite.nl
ip.com
one.lv 
```

其他顶级域名：

```
.ac
.ad
.ae
.af
.ag
.ai
.al
.am
.ao
.aq
.ar
.as
.asia
.at
.au
.aw
.ax
.az
.ba
.bb
.bd
.be
.bf
.bg
.bh
.bi
.bj
.bm
.bn
.bo
.br
.bs
.bt
.bw
.by
.bz
.ca
.cc
.cd
.cf
.cg
.ch
.ci
.ck
.cl
.cm
.cn
.co
.co.ao
.co.ba
.co.bw
.co.cc
.co.ck
.co.cr
.co.fk
.co.id
.co.il
.co.im
.co.in
.co.jp
.co.ke
.co.kr
.co.ls
.co.ma
.co.mz
.co.nl
.co.nz
.co.th
.co.tz
.co.ug
.co.uk
.co.uz
.co.ve
.co.vi
.co.za
.co.zm
.co.zw
.com
.com.af
.com.ag
.com.ai
.com.al
.com.ar
.com.au
.com.aw
.com.az
.com.bb
.com.bd
.com.bh
.com.bi
.com.bm
.com.bn
.com.bo
.com.br
.com.bs
.com.bt
.com.by
.com.bz
.com.cm
.com.cn
.com.co
.com.cu
.com.cv
.com.cy
.com.do
.com.dz
.com.ec
.com.ee
.com.eg
.com.es
.com.et
.com.fj
.com.ge
.com.gh
.com.gi
.com.gl
.com.gn
.com.gp
.com.gr
.com.gt
.com.gu
.com.hk
.com.hn
.com.hr
.com.ht
.com.jm
.com.jo
.com.kg
.com.kh
.com.ki
.com.kw
.com.ky
.com.kz
.com.lb
.com.lc
.com.lk
.com.lr
.com.lv
.com.ly
.com.mg
.com.mk
.com.mm
.com.mo
.com.mt
.com.mu
.com.mv
.com.mw
.com.mx
.com.my
.com.na
.com.nf
.com.ng
.com.ni
.com.np
.com.nr
.com.om
.com.pa
.com.pe
.com.pg
.com.ph
.com.pk
.com.pl
.com.pr
.com.ps
.com.pt
.com.py
.com.qa
.com.ro
.com.sa
.com.sb
.com.sc
.com.sg
.com.sl
.com.sn
.com.sv
.com.sy
.com.tj
.com.tn
.com.tr
.com.tt
.com.tw
.com.ua
.com.uy
.com.uz
.com.vc
.com.ve
.com.vi
.com.vn
.com.ye
.cr
.cv
.cx
.cy
.cz
.de
.dj
.dk
.dm
.do
.dz
.ec
.edu
.ee
.eg
.es
.eu
.fi
.fj
.fk
.fm
.fo
.fr
.ga
.gd
.ge
.gf
.gg
.gh
.gi
.gl
.gm
.gn
.gov
.gp
.gq
.gr
.gs
.gt
.gu
.gy
.hk
.hm
.hn
.hr
.ht
.hu
.id
.ie
.il
.im
.in
.io
.iq
.is
.it
.je
.jm
.jo
.jp
.ke
.kg
.kh
.ki
.km
.kn
.kr
.kw
.ky
.kz
.la
.lb
.lc
.li
.lk
.lr
.ls
.lt
.lu
.lv
.ly
.ma
.mc
.md
.me
.mg
.mil
.mk
.ml
.mm
.mn
.mo
.mobi
.mp
.mq
.mr
.ms
.mt
.mu
.mv
.mw
.mx
.my
.na
.name
.nc
.ne
.ne.jp
.net
.net.ck
.net.cm
.net.in
.nf
.ng
.ni
.nl
.no
.np
.nr
.nu
.nz
.og.ao
.om
.or.th
.org
.org.ck
.org.cn
.org.ls
.pa
.pe
.pf
.pg
.ph
.pk
.pl
.pm
.pn
.pr
.pro
.ps
.pt
.py
.qa
.re
.ro
.rs
.ru
.rw
.sa
.sb
.sc
.se
.sg
.sh
.si
.sk
.sl
.sm
.sn
.so
.sr
.st
.su
.sv
.sy
.tc
.td
.tf
.tg
.th
.tj
.tk
.tl
.tm
.tn
.to
.tr
.tt
.tv
.tw
.tz
.ua
.ug
.uk
.us
.uy
.uz
.vc
.ve
.vg
.vi
.vn
.vu
.wf
.ws
.xxx
.ye
.yt
.za
.zm
.zw 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T17:19:35.360

```
var result = string.replace(/^[^.]+\./g, ""); 
```

# css - Shailan Dropdown 3rd level 在 chrome 中工作但在 IE 中没有

> ID：10418571
> 
> 赞同：0
> 
> 时间：2012-05-02T17:16:50.927
> 
> 标签：css, internet-explorer, wordpress, drop-down-menu

我在我的 wordpress 网站上使用了 shailan 下拉菜单插件，在我引入深度 3 项目之前一切都很好。它们在 Chrome 中似乎工作正常，但 3 级（服务-> 公司服务-> 垂直）没有出现在 IE 中。

```
 div.shailan-dropdown-menu table,div.shailan-dropdown-menu tbody,div.shailan-dropdown-menu tr,div.shailan-dropdown-menu td,div.shailan-dropdown-menu ul,div.shailan-dropdown-menu li,div.dropdown-horizontal-container,ul.dropdown *{margin:0;padding:0;border:0}
.shailan-dropdown-menu{position:relative;z-index:597}
ul.dropdown,ul.dropdown li,ul.dropdown ul{list-style:none;margin:0;padding:0}
ul.dropdown li{position:relative;display:inline;vertical-align:middle;zoom:1}
ul.dropdown li ul{position:absolute;z-index:598}
ul.dropdown li.hover,ul.dropdown li:hover{cursor:default}ul.dropdown > li{float:left}
ul.dropdown li a{padding:.3em .8em;cursor:pointer}
ul.dropdown ul{position:absolute;top:100%;left:0px}
ul.dropdown ul li{float:none;display:list-item;list-style:none}
ul.dropdown ul ul{top:1px;left:99%;z-index:600000;}
ul.dropdown a:active,ul.dropdown a:focus{outline-style:none}
* html ul.dropdown li{height:1px}
ul.dropdown ul li,ul.dropdown-vertical{margin-left:0px}
ul.dropdown ul,ul.dropdown li.hover ul ul,ul.dropdown li.hover ul ul ul,ul.dropdown `li.hover ul ul ul ul,ul.dropdown li.hover ul ul ul ul ul,ul.dropdown ul,ul.dropdown li:hover ul ul,ul.dropdown li:hover ul ul ul,ul.dropdown li:hover ul ul ul ul,ul.dropdown li:hover ul ul ul ul ul{display:none}`
ul.dropdown ul ul ul ul ul ul{display:none!important}
.dm-align-right table{float:right}
.dm-align-left table{float:left}
ul.dropdown-horizontal.dropdown-align-right ul{right:0;left:auto}
ul.dropdown-horizontal.dropdown-align-right ul ul{right:99%;left:auto;z-index:6000000}
ul.dropdown-vertical.dropdown-align-left ul{top:1px;left:99%;right:auto}
ul.dropdown-vertical.dropdown-align-right ul{top:1px;right:99%;left:auto}
ul.dropdown-vertical li{float:none;display:block}
.clearfix:after{clear:both;content:".";display:block;height:0;visibility:hidden}
* html > body .clearfix{display:block;width:100%}* html .clearfix{height:1%} 
```

继承人的网站[http://umanahr.com/index.php](http://umanahr.com/index.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:59:52.723

我对 shailan 也有同样的问题，所以我找到的解决方案是创建一个 ie.css 然后添加下面的代码。希望这会有所帮助。

```
.shailan-dropdown-menu-widget{z-index: 9999;}
ul.dropdown ul {
filter:none;
} 
```

# python - Python multi-lists iteration

> ID：10418575
> 
> 赞同：7
> 
> 时间：2012-05-02T17:16:57.357
> 
> 标签：python, list, iteration

Is there a clever way to iterate over **two** lists in Python (without using *list comprehension*)?

I mean, something like this:

```
# (a, b) is the cartesian product between the two lists' elements
for a, b in list1, list2:
   foo(a, b) 
```

instead of:

```
for a in list1:
    for b in list2:
        foo(a, b) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T17:19:11.353

[`itertools.product()`](http://docs.python.org/library/itertools.html#itertools.product) does exactly this:

```
for a, b in itertools.product(list1, list2):
  foo(a, b) 
```

It can handle an arbitrary number of iterables, and in that sense is more general than nested `for` loops.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-31T09:46:19.477

```
for a,b in zip(list1, list2):
    foo(a,b) 
```

`zip` combines the elements of lists / arrays together element wise into tuples. e.g.

```
list1 = [1,2,5]
list2 = [-2,8,0]
for i in zip(list1,list2):
    print(i)
>>> (1, -2)
>>> (2, 8)
>>> (5, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T10:03:08.127

Use zip it allows you to zip two or more lists and iterate at a time.

```
list= [1, 2]
list2=[3,4]
combined_list = zip(list, list2)
for a in combined_list:
        print(a) 
```

# c++ - 如何使用 boost::signals 来实现观察者模式？

> ID：10418582
> 
> 赞同：2
> 
> 时间：2012-05-02T17:17:17.003
> 
> 标签：c++, boost, observer-pattern, boost-bind, boost-signals2

我有一个由许多链接对象组成的应用程序，每个对象都有它们运行所需的参数。我正在使用**上下文**模式，以便每个对象根据构造时给出的上下文对象引用设置自己的参数。这在下面给出的简化代码示例中效果很好。

我尝试添加的下一个特性是**观察者**模式，这样当上下文对象中的参数发生变化时，每个订阅者对象都会收到通知并相应地更新其参数。但是，我无法确定将信号连接到插槽所需使用的语法。

理想情况下，我希望订阅者对象在构造时使用参数类注册自己，以便他们可以在对象的生命周期内更新自己（即他们必须在销毁时注销自己，或者更好的是，使用某种 RAII 技术如果超出范围，则注销自己）。下面是一个代码示例，我希望它尽可能简单。

目前的输出是

> 处理单元 0 参数 = 1
> 
> 处理单元 1 参数 = 2
> 
> 处理单元 0 参数 = 1
> 
> 处理单元 1 参数 = 2

目标是让它成为...

> 处理单元 0 参数 = 1
> 
> 处理单元 1 参数 = 2
> 
> 处理单元 0 参数 = 11
> 
> 处理单元 1 参数 = 22

我目前正在使用的代码如下。如果您想尝试一下，它可以以现在的形式编译得很好。请提出我需要的更改，以便将我的信号连接到插槽。随时指出任何可能导致麻烦的设计问题。提前致谢。

```
//
//  main.cpp
//  context_observer
//

#include <iostream>
#include <sstream>
#include <map>

#include "boost/signals2.hpp"

/* This class holds the parameters and is the class that I want to set
 * observable. It holds a std::map of the parameters and a simple accessor*/
class cParamsContext
{      
    typedef std::map<std::string, float> myMap_t; 
    typedef boost::signals2::signal<void (cParamsContext&)> signal_t;

    myMap_t paramMap;    

public:            
    signal_t sig;

    cParamsContext()
    {
        paramMap["a0"] = 1.f;
        paramMap["a1"] = 2.f;                
    }

    float getParam( std::string key, float const & defaultVal ) 
    {        
        myMap_t::iterator it = paramMap.find(key); 
        if ( it == paramMap.end() ) 
            return defaultVal; 
        else 
            return it->second; 
    }

    void changePars()
    {
        paramMap["a0"] = 11.f;
        paramMap["a1"] = 22.f;
        sig(*this);
    }    
};

/* This is an example of a processing class that I would like to have
 * subscribe to the parameter class.*/
class cProcessingUnit
{
    float parameter;
    int id;

public:
    cProcessingUnit(cParamsContext &contextObj, int id_) :  parameter (80.f), id(id_)
    { 
        updatePars(contextObj);
        // Something like contextObj.sig.connect ... here
    }

    void updatePars(cParamsContext &contextObj) 
    {
        std::stringstream idStream;
        idStream << id;        
        std::string key = std::string( "a" + idStream.str() );                      

        parameter = contextObj.getParam( key, parameter );
    }

    float getParam() {return parameter;}
};

/* This is a very simple main function used here for testing. It 
 * instantiates 2 processing objects. The parameters are then changed
 * in the observable parameter object. The processing objects should
 * then update themselves and so the last "cout" calls should reveal the 
 * new parameters. At least, this is what I would like to happen!*/
int main(int argc, char *argv[])
{
    cParamsContext contextObj;       

    cProcessingUnit temp0(contextObj, 0);
    cProcessingUnit temp1(contextObj, 1);

    std::cout << "Processing unit "  << 0 << " param = " << temp0.getParam() << std::endl;
    std::cout << "Processing unit "  << 1 << " param = " << temp1.getParam() << std::endl;

    contextObj.changePars();

    std::cout << "Processing unit "  << 0 << " param = " << temp0.getParam() << std::endl;
    std::cout << "Processing unit "  << 1 << " param = " << temp1.getParam() << std::endl;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:07:09.713

假设您希望在信号触发时调用 updatePars ，您将连接到您对此发表评论的位置：

```
// Something like contextObj.sig.connect ... here
contextObj.sig.connect(boost::bind(&cProcessingUnit::updatePars, this, _1)); 
```

您可能需要保留返回的连接，以便在您被破坏时断开连接。您的问题的措辞不是很好，所以很难说这是否是您真正需要的。

基本上，要连接到信号，您需要向其传递与信号签名匹配的“可调用实体”。这可以是一个 binder（bind 和其他一些函数的结果）、一个自由函数、一个 lambda 表达式......一个自定义仿函数......等等......

我最新的博客条目可能会有所帮助，但它相当快速和表面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:11:34.393

对于任何人来说，使用 scoped 执行此操作的方法是将`cProcessingUnit`上面类的第一部分更改为以下 . . .

```
class cProcessingUnit
{
    float parameter;
    int id;
    boost::signals2::scoped_connection c;

public:
    cProcessingUnit(cParamsContext &contextObj, int id_) :  parameter (80.f), id(id_)
    { 
        updatePars(contextObj);
        c =  contextObj.sig.connect(  boost::bind(&cProcessingUnit::updatePars, this, _1)   );
    } 
```

非常感谢@Crazy Eddie 将我推向正确的方向

# php - Windows案例问题上的PHP realpath

> ID：10418590
> 
> 赞同：2
> 
> 时间：2012-05-02T17:17:50.527
> 
> 标签：php, windows, symlink

我的 Windows 服务器上有一个符号链接，它是这样制作的：

```
F:\>mkdir link-target
F:\>mklink /D link f:\link-target 
```

*`f:`（注意符号链接目标中的小写字母）*

在 PHP 中我运行这个：

```
$dir = realpath('f:\link');
var_dump($dir);

$dir = realpath($dir);
var_dump($dir); 
```

哪个输出：

```
string 'f:\link-target' (length=14)
string 'F:\link-target' (length=14) 
```

注意第二个真实路径上大小写的变化。

这是一个错误，还是有意的？解决它的最佳方法是什么？

它正在打破这样的案例：

```
function check_link($to, $from) {
    if (realpath($to) !== realpath($from)) {
        ...
    }
} 
```

用于检查是否`$to`存在，并链接到`$from`.

*   PHP 5.4
*   Windows 7的

**编辑：**

我需要在 Windows 和 Linux 上保持一致的行为，并且有以下工作非常讨厌：

```
if (realpath($from) === false) {
} elseif (realpath($to) === false) {
} else {
    do {
        $to = realpath($to);
    } while (realpath($to) !== false && $to !== realpath($to));
    do {
        $from = realpath($from);
    } while (realpath($from) !== false && $from !== realpath($from));
    if ($to !== $from) {
        ...
    }
} 
```

**编辑2：**

在进一步调查中，我注意到在 Windows 上，符号链接仅被跟踪 1 级：

```
// F:\>mkdir link-target
// F:\>mklink /D link f:\link-target 
// F:\>mklink /D link2 f:\link

$dir = realpath('f:\link2');
var_dump($dir);

$dir = realpath($dir);
var_dump($dir);

$dir = realpath($dir);
var_dump($dir);

// string 'f:\link' (length=7)
// string 'f:\link-target' (length=14)
// string 'F:\link-target' (length=14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T20:19:40.800

原来

```
do {
    $to = realpath($to);
} while (realpath($to) !== false && $to !== realpath($to)); 
```

是唯一的方法。

[https://bugs.php.net/bug.php?id=61933](https://bugs.php.net/bug.php?id=61933)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:22:19.447

这是有道理的，如果你仔细考虑的话。对于第一个路径解析，它正在查找定义为链接目标的内容。对于第二个，您最终会得到相同的路径，但驱动器号的大写字母正确。

在 Windows 文件系统下，路径/文件名不区分大小写。要比较它们，只需在测试前将两者都转换为大写或小写。

```
if (strtoupper(realpath($to)) !== strtotupper(realpath($from))) { 
```

# javascript - 如何在重新排序 DOM 时重绘和重新组织 Isotope 容器中的元素？

> ID：10418592
> 
> 赞同：4
> 
> 时间：2012-05-02T17:17:52.393
> 
> 标签：javascript, jquery, jquery-isotope

根据[这个 JSFiddle](http://jsfiddle.net/rjcd/8NvMk/)，我创建了一个包含我的每个元素的[同位素](http://isotope.metafizzy.co)容器，单击其中一个链接（左下角）后，我想重新排序元素，将匹配的元素拉到容器的左侧。

我通过将它们从 DOM 中删除并将它们移动到包含 div 的顶部来做到这一点。如果您检查浏览器的控制台，您会看到这成功发生了，但是对 Isotope（重绘）的以下调用会触发回调，但似乎不会触发实际的重绘。不完全确定为什么会这样，有人能解释一下吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T10:36:37.177

解决了它：

```
$('#products').isotope( 'reloadItems' ).isotope( { sortBy: 'original-order' } ); 
```

要不就：

```
$('#products').isotope( 'reloadItems' ).isotope(); 
```

仍然不确定为什么 reLayout 不会触发此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-06T08:57:52.577

将新项目添加到网格后，您需要将它们添加到 Isotope，但如果您直接添加它们（即，如果项目包含图像但仍未加载），则布局将不正确。

你需要[`imageLoaded`](https://isotope.metafizzy.co/layout.html#imagesloaded)像这样使用：

```
var $items = $(response).find('.grid-item');
$container.append($items);                    //add items to grid
$container.imagesLoaded(function(){
  $container.isotope( 'appended', $items );   //add items to isotope after images are loaded
}); 
```

# html - Internet Explorer 8 中的 HTML5 视频

> ID：10418593
> 
> 赞同：2
> 
> 时间：2012-05-02T17:17:57.213
> 
> 标签：html, video, html5-video

我知道该`<video>`标记在 Internet Explorer 8 中无法正常工作，这很好。我想要做的是，如果用户尝试使用 IE8 打开链接，则会显示类似`you're using browser XX and it's not supported`.

我试过这个：

```
<video id="ivideo" src="skins/Sandbox_Light/styleVideos/anima.mp4" controls onended="ivideo();" style="width:952px; height=435px" autoplay="autoplay">
  Not supported by your browser
</video> 
```

但是，相反，我看到中间有一个 X 的黑色`div`，好像问题出在插件丢失一样。我试图打开[这个页面](http://www.quirksmode.org/html5/tests/video.html)，它在 IE9 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:23:49.293

使用这段代码来检测它：

```
function supports_video() {
    return !!document.createElement('video').canPlayType;
} 
```

由潜入 html5 提供： http: [//diveintohtml5.info/detect.html](http://diveintohtml5.info/detect.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:46:55.230

在下面的链接中查看 ie6 阻止程序脚本。

将其放在加载 html 5 的单独文件中

```
<!--[if <= IE 8]>
    <script type="text/javascript" src="jquery.ie6blocker.js"></script> 
<![endif]-->

    <video id="ivideo" src="skins/Sandbox_Light/styleVideos/anima.mp4" controls onended="ivideo();" style="width:952px; height=435px" autoplay="autoplay"> 
```

然后通过 iframe 加载视频。如果需要，我会建议编辑脚本以证明您正在做的事情。同时更改图像的大小。另外，放一个升级浏览器的链接。

[http://css-tricks.com/ie-6-blocker-script/](http://css-tricks.com/ie-6-blocker-script/)

# .net - 使用 FileStreamResult，MemoryStream 是如何关闭的？

> ID：10418594
> 
> 赞同：33
> 
> 时间：2012-05-02T17:17:57.997
> 
> 标签：.net, asp.net-mvc-3, memorystream, filestreamresult

以下代码有效，但我想知道`MemoryStream`创建的是否正确关闭。这应该如何执行或`FileStreamResult`为我处理？

```
public FileStreamResult DownloadBudgetedRoleOpportunities(
    Guid projectGuid, 
    IEnumerable<Guid> guidRequiredRoles)
{
    var rolebroker = new ProjectRoleBudgetBroker();
    var memstream = rolebroker.CreateBudgetedRoleOpportunies(
        projectGuid, 
        guidRequiredRoles);

    var fsr = new FileStreamResult ( memstream, "application/csv" )
              {
                FileDownloadName = "RoleOpportunities.csv"
              };
    // memstream.Close(); throws exception
    return fsr;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-03T10:53:11.563

`FileStreamResult`将为您做到这一点。如有疑问，请务必检查代码，因为代码永远不会说谎，而且由于 ASP.NET MVC 是开源的，因此查看代码更加容易。

在 Google 上快速搜索 FileStreamResult.cs 可让您验证在方法中使用语句`WriteFile`正确处理流。`using`（没有双关语）

```
protected override void WriteFile(HttpResponseBase response) {
    // grab chunks of data and write to the output stream
    Stream outputStream = response.OutputStream;
    using (FileStream) {
        byte[] buffer = new byte[_bufferSize];

        while (true) {
            int bytesRead = FileStream.Read(buffer, 0, _bufferSize);
            if (bytesRead == 0) {
                // no more data
                break;
            }

            outputStream.Write(buffer, 0, bytesRead);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:54:28.207

您可以访问源代码，因此您可以检查自己;-)

```
protected override void WriteFile(HttpResponseBase response)
{
  Stream outputStream = response.OutputStream;
  using (this.FileStream)
  {
    byte[] buffer = new byte[4096];
    while (true)
    {
      int count = this.FileStream.Read(buffer, 0, 4096);
      if (count != 0)
        outputStream.Write(buffer, 0, count);
      else
        break;
    }
  }
} 
```

# git - 在 Github 中找不到 api 令牌

> ID：10418596
> 
> 赞同：9
> 
> 时间：2012-05-02T17:18:04.640
> 
> 标签：git, github

我刚刚安装了 GitExtension。一切都配置好了。当我单击“克隆 Github 存储库”时，它会打开一个标题为“Github 配置”的对话框，其中包含以下输入框：1\. 用户 2\. 密码 3\. APIToken 当我单击“获取 Api 令牌”按钮时，它会将我带到我的github.com 个人资料。但是那里没有 API 密钥。我搜索了大约一个小时，但无法弄清楚在哪里可以找到它。

注意：最近 GitHub 似乎改变了他们的身份验证方法！我不知道现在该怎么办。任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T17:35:40.000

Github 不再支持 API 令牌 [https://github.com/blog/1090-github-api-moving-on](https://github.com/blog/1090-github-api-moving-on)

您不需要 API 令牌即可使用 git。

可能是 GitExtension 没有更新他们的身份验证方法。有一个适用于 Windows 的命令行 Git 工具，这将起作用： http: [//msysgit.github.com/](http://msysgit.github.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-17T06:10:01.533

自 2013 年 5 月以来，API 令牌似乎又回来了：“[*个人*API 令牌](https://github.com/blog/1509-personal-api-tokens)”
（请参阅​​您的[设置页面](https://github.com/settings/applications)）

> 与将密码放入脚本相比，使用令牌的优势在于可以撤销令牌，并且您可以生成大量令牌。

# android - 获取资源（）；错误

> ID：10418600
> 
> 赞同：0
> 
> 时间：2012-05-02T17:18:26.567
> 
> 标签：android

我试图创建一个小部件，但在尝试使用资源 res = getResources(); 时出现错误 它说它在小部件中未定义，所以我想知道我可以将它替换为什么。在聊天中询问会更容易，但这里的 android 聊天中没有人

无论如何继承我的代码：

```
package kevin.erica.box;

import java.util.Arrays;
import java.util.Random;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.util.Log;
import android.widget.RemoteViews;

public class Widget extends AppWidgetProvider {

    Resources res = getResources();

private static final Random rgenerator = new Random();
private static final Random rgenerator2 = new Random();
private String[] myString1;

private String[] myString2,

myString = res.getStringArray(R.array.myArray);

  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    final int N = appWidgetIds.length;
    Log.i("ExampleWidget",  "Updating widgets " + Arrays.asList(appWidgetIds));
    // Perform this loop procedure for each App Widget that belongs to this
    // provider
    for (int i = 0; i < N; i++) {
      int appWidgetId = appWidgetIds[i];
      // Create an Intent to launch ExampleActivity
      Intent intent = new Intent(context, Widget.class);
      PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
      // Get the layout for the App Widget and attach an on-click listener
      // to the button
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
      views.setOnClickPendingIntent(R.id.imagewidgeterica, pendingIntent);
      // To update a label
      views.setTextViewText(appWidgetId, myString[rgenerator.nextInt(myString.length)]);
      // Tell the AppWidgetManager to perform an update on the current app
      // widget
      appWidgetManager.updateAppWidget(appWidgetId, views);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:22:11.643

移动行：

```
Resources res = getResources();
myString = res.getStringArray(R.array.myArray); 
```

到`onUpdate`方法：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
{
    Resources res = context.getResources();
    if (myString == null)
    {
        myString = res.getStringArray(R.array.myArray);
    }
    // ...
} 
```

# ruby-on-rails - Nosql 设计 - 标签和 mvc

> ID：10418602
> 
> 赞同：0
> 
> 时间：2012-05-02T17:18:32.990
> 
> 标签：ruby-on-rails, mongodb, tags, mongoid

我正在使用 Rails 和 Mongoid。我正在尝试提出一个标记功能（类似于 stackoverflow，因为每个用户都可以拥有“最喜欢的”标签）。

从我读过的关于 mongodb 的设计文章中，我了解到我需要停止以“第四范式”形式思考。我一直在想有一个带有 and 的多对多表和另一个带有`tag_id`and`user_id`的多对多`tag_id`表`item_id`。但是从阅读关于 nosql 的内容来看，在每个用户或项目中嵌入标签（作为标签甚至是字符串数组）似乎要好得多。

“标签”集合中将有一个标签列表，应用程序将控制用户是否可以将标签添加到他们的收藏夹中。

我试图弄清楚如何做到这一点。我是否让`tag`模型`key`上有一个`title`并且只将一组数组存储`keys`在用户模型中？在这种情况下，“链接”或“嵌入”会更好吗？我正在考虑如何检索标签，因为它们有一个键，例如`foo-bar`标题是`Foo Bar`. 如果我需要检索用户的标签，那么我是否需要遍历数组并获取每个标签模型以获取标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:39:18.483

我无法在 Ruby 方面为您提供帮助，但这里有一些 MongoDB 方面的选项..

您可以创建一个标签集合，其中的条目看起来有点像这样：`{_id: ObjectId(), title: "Foo Bar"}`. 然后，每个用户也可以拥有他订阅的标签的 id 值数组：

```
{ username: ...,
  tags: [ObjectId(), ObjectId(), ... ]} 
```

然后，您可以使用 $in 运算符检索用户标签的标题：

```
db.tags.find({_id: { $in: [array from user] }}); 
```

# html - 通过单击显示链接在 iPhone 中运行 html5 视频：无

> ID：10418607
> 
> 赞同：1
> 
> 时间：2012-05-02T17:18:53.920
> 
> 标签：html

我有一个链接“观看视频”，当用户点击它时，他们应该能够看到在 iPhone 和其他手机播放器中播放的视频。我已经使用 display:none 隐藏了视频，但是如何在单击时运行视频？

我的代码在这里

```
<p class="links right_links"><a href="#!" onClick="playVideo();">Watch Video Review!</a>
<script>
    function playVideo(){
        $('#mPlayer').show().play();
       //document.getElementById('mPlayer').play();
      }
 </script>
 <video style="display:none" id="mPlayer" controls width="150" src="/imgs/vidrvws/<%=request.querystring("prod")%>.mp4" poster="inc/vscript/poster.png" height="150"></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:12:53.590

您可以通过使用 .get( 0 ) 方法传入所需项目的索引来访问 jQuery 中的 DOM 元素。在您的情况下，索引 0 可以正常工作，因为您使用了 ID 选择器。

更新：Opps，我忘记将 .get( 0 ) 添加到代码片段中，如上所述。

试试这个..

`$('#mPlayer').show().get( 0 ).play();`反而。

# sql - SQL 给出最近插入的记录

> ID：10418608
> 
> 赞同：0
> 
> 时间：2012-05-02T17:19:01.163
> 
> 标签：sql, oracle, oracle10g

我有一个包含 id、username、timestamp 列的表。

```
ID 用户名时间戳
1 个 2009 年 10 月 10 日
1 bbb 2010 年 12 月 10 日
2 cc 2009 年 10 月 11 日
2 日 12/10/2010
2 EEE 2011 年 12 月 5 日
3 kkk 04/03/2012

```

输出应该为我们提供最近插入的 ID、用户名。

```
1 bbb 2010 年 12 月 10 日
2 EEE 2011 年 12 月 5 日
3 kkk 04/03/2012

```

我想使用 Join 来做到这一点。但是我可以写一个更有效的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:28:16.593

您可以使用分析函数

```
SELECT id,
       username,
       timestamp
  FROM (SELECT id,
               username,
               timestamp,
               rank() over (partition by id
                                order by timestamp desc) rnk
          FROM your_table_name )
 WHERE rnk = 1; 
```

如果有可能出现平局（两行具有相同的`id`和`timestamp`），这将返回两行。您可以扩展`order by`以指定您想要的绑定行，或者您可以切换到使用`row_number`分析函数而不是`rank`任意获取其中一个绑定行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:39:35.417

使用聚合函数的另一个选项。这从 Justin 的查询中删除了子查询，但确实意味着`LAST`需要在返回的每一列上添加该函数。

```
select 
  id, 
  max(username) keep (dense_rank last order by timestamp), 
  max(timestamp)
from my_table
group by id 
```

不幸的是，LAST 和 FIRST 函数的语法有点奇怪，因为在命令开头需要一个聚合函数（MAX、MIN、SUM、AVG 等）。如果分区和排序提供了一个确定性的集合来处理，这会令人困惑，但意味着结果将是一致的。

# c - glibc 中的更改不起作用

> ID：10418612
> 
> 赞同：3
> 
> 时间：2012-05-02T17:19:10.697
> 
> 标签：c, linux, gcc, x86

我已经下载了*glibc*，以便我可以修改它的代码然后使用它。所以只是为了玩它，我更改了glibc*的**stdio-common*目录中的*printf*函数，以便它打印“你能看到我吗？”。

 **```
int
__printf (const char *format, ...)
{
  va_list arg;
  int done;

  va_start (arg, format);
  done = vfprintf (stdout, "Can you see me?", arg);
  va_end (arg);

  return done;
} 
```

进行该更改后，我编译了*glibc*，然后在此*glibc目录中使用 LD_PRELOAD 和**libc.so来使用**printf*运行示例程序。但是我还是看到*printf*打印正常，就是我做的改动没有体现出来。我在这里犯了什么错误？

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:25:43.170

这可能有几个原因，最简单的是你使用了一个没有真正格式的字符串，编译器将调用从 更改`printf`为`puts`：

```
printf("hello\n");
// becomes:
puts("hello"); 
```

尝试添加一个参数：

```
char ex = '!';
printf("Hello %c\n", ex); 
```*****

# macos - Darwin/MacOS 是否修改了 Bash？

> ID：10418616
> 
> 赞同：4
> 
> 时间：2012-05-02T17:19:18.873
> 
> 标签：macos, bash, portability

我想知道使用 Bash 内置命令的 Bash 脚本的可移植性。

我知道每种 UNIX 风格都倾向于修改各种 UNIX 实用程序。但他们是否倾向于单独留下 Bash 和 Bash 内置程序？尤其是 MacOS 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:58:21.803

据我所知，bash 在 Mac OS X 上是未经修改的（除了使其编译所需的细微调整；您可以在[http://opensource.apple.com/](http://opensource.apple.com/)上查看源代码），并且脚本应该非常便携。

正如 Graham Lee 和 Gordon Davisson 所指出的，Mac OS X 附带旧版本，支持的版本之间存在差异。Bash 4 具有关联数组和[其他更改](http://wiki.bash-hackers.org/bash4)。Bash 3 包括正则表达式匹配（可能还有其他我没有搜索过的）。不记得 Bash 2 的差异，也许是一些括号/条件测试差异？

Mac OS X 10.7.x Lion 包括 Bash 3.2.x。我不记得我脑海中的确切版本，但 Mac OS X 10.6.x Snow Leopard 和 10.5.x Leopard 包括 Bash 3.x。Mac OS X 10.4.x Tiger 和更早的版本使用 Bash 2.0.5。因此，您肯定会遇到默认支持的内容之间的差异。

当然，除了 Mac OS X 上不同`bash`版本的功能集和内置程序之间的差异之外，您还会发现其他工具的差异。例如，Mac OS X 上存在`getopt`问题（在 Mac OS X 目录/文件路径中经常出现的空格，在参数中不受支持；`getopts`较新`bash`版本中的内置可以帮助解决此问题，但在旧版本）。当然，也会有其他工具具有不同的功能或语法。

我绝对不是专业的`bash`开发人员，但我编写了*许多*支持各种版本的 Mac OS X 特定脚本。有关2.x 与 3.x 正则表达式功能和解决方法的讨论，请参阅我[的 Bash 和替代品中的正则表达式一文。](http://www.makkintosshu.com/journal/regular-expressions-in-bash-and-alternatives)或者，我的一些`bash`脚本已经考虑到了 Mac OS X：[tools-osx](https://github.com/morgant/tools-osx) & [bash_stub](https://github.com/morgant/bash_stub)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:25:09.840

Apple 使用相当旧的 Bash 版本，因为他们不发布根据 GPL3 许可的代码。[您可以从 Apple 的开源站点](http://www.opensource.apple.com/source/bash/bash-84/)下载当前版本，并看到它至少声称是 vanilla Bash 3.2（尽管显然已经添加了 Xcode 项目）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T14:01:35.573

bash 版本 4 未在 Darwin 或 MacOS Lion 上发布。所以mac不支持对read命令等的改进，这是不幸的。

cygwin 有 bash 4.1.10

# html - 如何使用 location.hash 作为页面中变体元素的选择器

> ID：10418618
> 
> 赞同：1
> 
> 时间：2012-05-02T17:19:23.067
> 
> 标签：html, hash, selector

是否有一种本地方法可以使用[http://site.tld/page.html#select(h3:nth(5))来定位页面上的第 n 个元素](http://site.tld/page.html#select(h3:nth(5)))

我可以想出很多为什么不能接受它作为 HTML 中的功能存在的原因，但这不是这里的问题。

因此，如果无法在 HTML 中实现，是否可以使用 Chrome 或 Firefox 等特定浏览器中的某些功能构建？

有时，我想将人们指向页面的某个部分，但是当我浏览代码时，没有 id="paragraph4" 甚至没有 a，我发现不能做这样的事情非常令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:20:16.110

这不会真正回答你的问题（我认为），但我相信只有浏览器扩展才能实现这种行为，即消费者端。

该扩展还可以帮助您选择您想要的部分并生成一个您可以收藏或共享的特制 URL。

但是，要与其他人共享此功能，您必须让他们也安装扩展程序（以及针对不同的浏览器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-09T14:09:49.753

[https://en.wikipedia.org/wiki/Fragment_identifier#Proposals](https://en.wikipedia.org/wiki/Fragment_identifier#Proposals) 引用...

“在 Firefox 5 之前，Firefox 支持 XPath 链接，例如 #xpath:/html/body/div[3]，它可以与诸如[http://antimatter15.com/wp/2009/11/xpath之类的书签一起使用-bookmark-bookmarklet/](http://antimatter15.com/wp/2009/11/xpath-bookmark-bookmarklet/)在缺少正确 ID 的 HTML 文档中进行链接。此功能已作为 Mozilla 错误 #457102 中代码清理的一部分被删除

（由于stackoverflow不希望我发布3个链接，因此从引用中删除了错误链接）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:22:20.247

您需要`document.location.hash`在 JavaScript/jQuery 中抓取、解析值并执行适当的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T00:08:53.853

8年后回答我自己的问题：

WICG 为**[Text Fragments](https://wicg.github.io/ScrollToTextFragment/#indicating-the-text-match)**提供了一个草稿，现在您可以通过将以下内容添加到哈希中来链接到页面上的文本，就好像您正在搜索它一样

`#:~:text=<Text To Link to>`

工作示例`Chrome Version 81.0.4044.138`：

[单击此链接](https://stackoverflow.com/q/10418618/614277#:~:text=Click%20on%20this%20link)应重新加载页面并突出显示链接的文本

# java - (Java) JLabel 的 setBounds 问题

> ID：10418622
> 
> 赞同：1
> 
> 时间：2012-05-02T17:19:41.933
> 
> 标签：java, swing, user-interface, jlabel, layout-manager

我会保持简短，因为我所要求的只是一行代码。这是我的问题，所以为了让我的 Jlabel 出现，我使用 .setBounds

我的问题是我无法猜测我的文本的宽度，所以我需要做什么才能让我的 setBounds 将 Width 和 Height 作为文本。

如果我没有很好地解释这一点，请说，我会尝试解释更多。

Some1 想要一个例子，所以这里是：

我的代码片段：

```
JLabel poisonDescription = new JLabel("This is the poison icon, when this appears...");
//My declaration.. the next is inside a void.
poisonDescription.setBounds(50, 50, 400, 20);
        add(poisonDescription); 
```

它非常简单，我希望将边界调整为字体的大小！

哦，是的，另一个问题...我如何制作 JLabel 多行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:24:48.163

不要使用setBounds，只需让JLabel 自己处理其preferredSize。无论您为标签容器选择何种布局，它都会正确处理标签。

要拥有多行标签，只需使用 JTextArea：

```
JTextArea textArea = new JTextArea();
textArea.setEditable(false);
textArea.setLineWrap(true);
textArea.setOpaque(false);
textArea.setWrapStyleWord(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:24:53.330

您可以使用 HTML 来做到这一点。

```
import javax.swing.JLabel;
import javax.swing.JOptionPane;

public class Main {
    public static void main(String[] args) {
        JLabel label = new JLabel("<html>One<br>Two!");
        JOptionPane.showMessageDialog(null, label);
    }
} 
```

有关更多详细信息，请参阅[Java 教程中的](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)*如何在 Swing 组件*中使用 HTML

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:25:40.413

您的主要问题的答案是这是 LayoutManagers 旨在解决的问题。如果您想解决此问题，请停止使用空布局，开始使用简单的布局管理器，如 FlowLayout 或 BorderLayout，并让布局管理器调整您的标签大小

对于关于多行标签的问题 #2，最简单的方法是传入包含 <HTML> 标记的格式正确的 HTML

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-26T17:50:42.393

```
 l1 = new JLabel("UserName");
    l2 = new JLabel("Password");

    t1 = new JTextField();
    t2 = new JTextField();

    b1 = new JButton("Log In");
    b2 = new JButton("Cancel");

    l1.setBounds(100,100,40,30);
    l2.setBounds(100,150,70,30);
    t1.setBounds(200,100,150,30);
    t2.setBounds(200,150,150,30);
    b1.setBounds(100,200,90,30);
    b2.setBounds(200,200,90,40); 
```

只需您可以提供按钮文本字段和其他的尺寸...

# mercurial - CM Synergy 和 Mercurial 之间的互操作

> ID：10418623
> 
> 赞同：0
> 
> 时间：2012-05-02T17:19:50.337
> 
> 标签：mercurial, cm-synergy

是否有可能从 Mercurial(Hg) 推动和拉动到 CM 协同作用。例如，我们有一个主服务器，所有源代码控制和相关任务都使用 CM Synergy 完成。我有一个位于我的机器本地的私有 mercurial 存储库，在某些时候我想将我的工作从我的 hg 存储库推送到主 CM Synergy 服务器。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:45:01.430

您最好的选择是在您准备好推送时从 cmsynergy 中获取最新信息。然后将您在 mercurial 中更改的所有文件复制到 cmsynergy 工作区。在 cmsynergy 中执行“与工作区同步”并选择保持工作区更改。这是我在公司使用的 cmsynergy 版本中发现的最简单的方法。一些旧版本有一个协调命令，可以使这更容易一些，但有一些控制问题。

# java - JSTL 访问 Hash Map 中的整数/长键

> ID：10418624
> 
> 赞同：2
> 
> 时间：2012-05-02T17:19:57.253
> 
> 标签：java, hashmap, jstl, el

我在 JSTL 中使用 EL 时遇到了一些问题，并且无法按照我的意愿访问 Java Hash Map。我知道在 EL 中，如果 Integer 被访问为 Long。我有以下我试图在 JSTL 中访问的哈希映射定义 -

```
Map<Long, Object> testMap = new HashMap<Long, Object>(); 
```

在 JSP 页面中，我需要检查地图是否包含特定键。我尝试通过检查是否不为空来做到这一点，如下所示 -

```
<c:if test='${ ! empty testMap[currObj.currVal]}'> 
```

我还访问了代码中某处某个键的映射值，如下所示 -

```
<c:if test='${ testMapMap[5].data == 'something'}'> 
```

现在的问题 -

如果我在上面定义我的地图，`<Integer, Object>`那么第一个 c:if 有效，但第二个失败（因为第二个尝试以 Long 形式访问它）。但是，如果我将上面的地图定义为`<Long, Object>`第一个 if 检查总是失败，因为它总是将其识别为空，但我检查值的第二个 if 语句有效。

有什么好方法可以确保我正确访问两个 if 语句的 HashMap 吗？我会欣赏意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:26:57.013

是什么`currObj`？您可以将其`currVal`成员重新定义为`Long`（或`long`）吗？

* * *

数字文字（匹配`IntegerLiteral`EL 语法中的产生式）将表示为`Long`. 该表达式的`currObj.currVal`计算结果为`Integer`。A `Long`never `equals()`an `Integer`，因此一个表达式必须产生不同的类型。

本质上，您需要的是显式类型转换。EL 中没有内置这样的功能，但您可以创建一个自定义 EL 函数来为您完成。这是您在 Java 中实现的静态函数，然后在 TLD 中进行描述。我的另一个答案[给出了一个](https://stackoverflow.com/a/296752/3474)包装的例子。以下是您的情况下的功能及其用法。

```
package com.y.taglib.core;

public final class CoercionUtil {

  public static Long toLong(Long n) {
    return n;
  }

} 
```

TLD 如下所示：

```
<taglib xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd" version="2.0">
  <tlib-version>1.0</tlib-version>
  <short-name>x-c</short-name>
  <uri>http://dev.y.com/taglib/core/1.0</uri>
  <function>
    <description>Coerce to a java.lang.Long.</description>
    <display-name>long</display-name>
    <name>long</name>
    <function-class>com.y.taglib.core.CoercionUtil</function-class>
    <function-signature>java.lang.Long toLong(java.lang.Long)</function-signature>
  </function>
</taglib> 
```

在您的 JSP 中：

```
<%@taglib uri="http://dev.y.com/taglib/core/1.0" prefix="my" %>
...
<c:if test='${ ! empty testMap[my:long(currObj.currVal)]}'> 
```

JSP 引擎负责必要的类型强制（从方法的`Integer`结果`currVal`到`Long`所需的`toLong()`类型。您的方法只是为了指示所需的类型；没有它，JSP 引擎会看到参数的（已删除）类型`testMap.get(Object)`，并且认为不需要执行任何强制，因为`Integer`is-an `Object`。

# list - haskell中两个列表的两个操作

> ID：10418630
> 
> 赞同：1
> 
> 时间：2012-05-02T17:20:22.490
> 
> 标签：list, haskell, functional-programming

我有点像 Haskell 新手。假设我有两个无限的数字列表，`A`并且`B`我想创建另一个无限列表`C`，其中包含`x+y`'s 和`x-y`'s where `x <- A`and的序列`y <- B`，即`C`在每个循环中增长 2；最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:23:51.443

制作一个无限的二元素列表并将它们连接起来。

```
concat [[x+y, x-y] | (x, y) <- zip listA listB] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:23:28.717

您可能不想要最聪明的方法，因为根据定义它对您来说太聪明了无法调试:-)

一种明显的方法是将无限流压缩在一起，如下所示：

```
zipWith k as bs
    where
        k a b = (a + b, a - b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T14:56:31.023

仅适用于无限列表

```
mkList (x:xs) (y:ys) = x+y : x-y : mkList xs ys 
```

并且为了支持有限列表，您必须添加基本情况

```
mkList _ _ = [] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T08:41:50.820

```
f xs = concat . zipWith go xs where 
       go x y = map (($y).($x)) [(+),(-)] 
```

# hadoop - 在 ec2 上开始使用 hadoop 最简单的方法是什么，最好是 mapr

> ID：10418632
> 
> 赞同：0
> 
> 时间：2012-05-02T17:20:28.763
> 
> 标签：hadoop, amazon-ec2, mapr

我想在 ec2 上安装一个小的工作 mapr hadoop 实例，这样我就可以玩弄它并开始了解更多关于它的信息。

我将如何进行？

mapr 站点 (1) 提到以 vmplayer (2) 开头。

那么，是否在 ec2 AMI 上安装 vmplayer 而不是安装 mapr 或者是否有 AMI 可用，并且已经安装了 vmplayer 和/或已经安装了 vmplayer+mapr？

(1) [http://mapr.com/download](http://mapr.com/download) (2) [https://my.vmware.com/web/vmware/downloads](https://my.vmware.com/web/vmware/downloads)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:30:08.133

这个问题也在[http://answers.mapr.com/questions/2257/what-is-the-easyest-way-for-a-hadoop-newbie-to-get-started-with-mapr-on-中得到解答一个ec2-box](http://answers.mapr.com/questions/2257/what-is-the-easiest-way-for-a-hadoop-newbie-to-get-started-with-mapr-on-one-ec2-box)

它的要点是，对于 EC2，最简单的方法是简单地安装 Ubuntu 或 Redhat 软件包或使用 Whirr。

此外，单节点集群有点令人难过。拥有至少两个节点会使热图变得更加有趣。

# hadoop - Hive 外部表中的最大列数

> ID：10418639
> 
> 赞同：1
> 
> 时间：2012-05-02T17:21:23.067
> 
> 标签：hadoop, amazon-web-services, hive, amazon-dynamodb

我正在尝试在 Amazon 的 EMR 上设置 Hive，以从 DynamoDB 表中提取数据并将其转储到 S3。我已按照[此处](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EMR_Hive_Commands.html)的说明进行操作，并且在我们的大多数桌子上都取得了成功。但是，对于一个 DynamoDB 表，我收到一个错误（如下所示）。

有问题的表有*很多*列（> 100），将映射减少到其中的一个子集允许脚本运行，所以我假设这是问题所在，但我找不到任何文档围绕这个。

我可以定义的列数是否有某种硬性限制？还是我可能会在这里遇到其他限制？有没有办法解决这个问题？

* * *

我得到的错误看起来像：

```
FAILED: Error in metadata: javax.jdo.JDODataStoreException: Put request failed : INSERT INTO `TABLE_PARAMS` (`PARAM_VALUE`,`TBL_ID`,`PARAM_KEY`) VALUES (?,?,?)
NestedThrowables:
org.datanucleus.store.mapped.exceptions.MappedDatastoreException: INSERT INTO `TABLE_PARAMS` (`PARAM_VALUE`,`TBL_ID`,`PARAM_KEY`) VALUES (?,?,?)
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

我尝试运行的脚本如下所示：

```
CREATE EXTERNAL TABLE hive_WSOP_DEV_STATS_input (col1 string, col2 string...)
    STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
    TBLPROPERTIES ( "dynamodb.table.name" = "DYNAMO_TABLE_NAME",
        "dynamodb.column.mapping" = "col1:col1,col2:col2..."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:18:27.850

几年前我遇到了类似的问题。如果我没记错的话，问题是配置单元限制了它写入数据库的查询中的文本长度。如果您查看调用堆栈，您可能会发现该变量是否可配置，以及在哪里编辑代码。

# php - php中相对日期格式的问题

> ID：10418641
> 
> 赞同：2
> 
> 时间：2012-05-02T17:21:30.493
> 
> 标签：php, datetime

考虑到有些月份的天数比其他月份少，我正在使用我在[这里找到的一个函数来为日期添加月份。](https://stackoverflow.com/questions/5760262/php-adding-months-to-a-date-while-not-exceeding-the-last-day-of-the-month)

```
 function addMonths($date_str, $months){
        $date = new DateTime($date_str);
        $start_day = $date->format('j');
 var_dump($date->format('Y-m-d'));
        $date->modify("+{$months} month");
        $end_day = $date->format('j');
        var_dump($date->format('Y-m-d'));
        if ($start_day != $end_day)
            $date->modify('last day of last month');
        var_dump($date->format('Y-m-d'));die();
        return $date->format('Y-m-d');
    } 
```

由于该函数没有按预期工作，我转储了一些变量以查看发生了什么。让我们尝试以下方法：

```
addMonths('2012-05-31',1) 
```

我得到以下错误的输出：

```
string(10) "2012-05-31" string(10) "2012-07-01" string(10) "2012-05-31" 
```

正如您所看到的，当我在输入日期中添加一个月时，我得到“2012-07-01”，但随后满足条件，我应该得到 6 月的最后一天，即 7 月的前一个月，而不是 5 月。我不知道发生了什么，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:47:18.613

PHP 在PHP 5.2.17 之前[存在日期时间相关格式的错误](https://bugs.php.net/bug.php?id=53741)

试试这个：

```
<?php
function addMonths($date_str, $months) {
  $date      = new DateTime($date_str);
  $start_day = $date->format('j');

  $date->modify("+{$months} month");
  $end_day = $date->format('j');

  if ($start_day != $end_day) {
    $date->modify('last day');
  }

  return $date->format('Y-m-d');
}

echo addMonths('2012-05-31', 1); 
```

我这里没有这么旧的 PHP 版本，但我认为它可以`last day`在这个版本中处理。

对我来说，它返回：

```
2012-06-30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:40:32.233

我复制/粘贴了您的代码，以下是我在 PHP 5.3.3 上的输出：

```
string(10) "2012-05-31"
string(10) "2012-07-01"
string(10) "2012-06-30" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T15:26:20.003

```
 function add_month($format , $date , $months_to_add ){
        return date($format, strtotime("$date +$months_to_add month"));
} 
```

我正在使用这个。你可以试试这个。

# javascript - 动态创建具有给定 HTML 的 iframe

> ID：10418644
> 
> 赞同：177
> 
> 时间：2012-05-02T17:21:50.077
> 
> 标签：javascript, iframe

我正在尝试从 JavaScript 创建一个 iframe 并用任意 HTML 填充它，如下所示：

```
var html = '<body>Foo</body>';
var iframe = document.createElement('iframe');
iframe.src = 'data:text/html;charset=utf-8,' + encodeURI(html); 
```

然后我希望`iframe`包含一个有效的窗口和文档。但是，情况并非如此：

> > 控制台.log(iframe.contentWindow);
> 无效的

自己试试吧：http: [//jsfiddle.net/TrevorBurnham/9k9Pe/](http://jsfiddle.net/TrevorBurnham/9k9Pe/)

我在看什么？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-05-03T14:31:44.677

虽然你`src = encodeURI`应该工作，但我会采取不同的方式：

```
var iframe = document.createElement('iframe');
var html = '<body>Foo</body>';
document.body.appendChild(iframe);
iframe.contentWindow.document.open();
iframe.contentWindow.document.write(html);
iframe.contentWindow.document.close(); 
```

由于这没有 x 域限制并且完全通过`iframe`句柄完成，因此您可以稍后访问和操作框架的内容。您需要确保的是，内容已被渲染，这将（取决于浏览器类型）在发出 .write 命令期间/之后启动 -*但*在调用时不必完成`close()`。

一种 100% 兼容的回调方法可能是这种方法：

```
<html><body onload="parent.myCallbackFunc(this.window)"></body></html> 
```

然而，iframes 有 onload 事件。这是一种将内部 html 作为 DOM (js) 访问的方法：

```
iframe.onload = function() {
   var div=iframe.contentWindow.document.getElementById('mydiv');
}; 
```

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2012-05-02T17:53:53.743

在将元素插入文档之前，在 javascript 中设置`src`新创建的元素不会触发 HTML 解析器。`iframe`然后更新 HTML，并调用 HTML 解析器并按预期处理属性。

[http://jsfiddle.net/9k9Pe/2/](http://jsfiddle.net/9k9Pe/2/)

```
var iframe = document.createElement('iframe');
var html = '<body>Foo</body>';
iframe.src = 'data:text/html;charset=utf-8,' + encodeURI(html);
document.body.appendChild(iframe);
console.log('iframe.contentWindow =', iframe.contentWindow); 
```

这也回答了您的问题，重要的是要注意这种方法与某些浏览器存在兼容性问题，请参阅@mschr 的答案以获得跨浏览器解决方案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-03-01T03:58:34.210

谢谢你的好问题，这让我好几次了。在使用 dataURI HTML 源时，我发现我必须定义一个完整的 HTML 文档。

请参见下面的修改示例。

```
var html = '<html><head></head><body>Foo</body></html>';
var iframe = document.createElement('iframe');
iframe.src = 'data:text/html;charset=utf-8,' + encodeURI(html); 
```

`<html>`记下用标签和`iframe.src`字符串包裹的 html 内容。

需要将 iframe 元素添加到要解析的 DOM 树中。

```
document.body.appendChild(iframe); 
```

`iframe.contentDocument`除非您`disable-web-security`使用浏览器，否则您将无法检查。你会收到一条消息

> DOMException：无法从 'HTMLIFrameElement' 读取 'contentDocument' 属性：阻止具有源“ [http://localhost:7357](http://localhost:7357) ”的框架访问跨域框架。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-06-24T18:43:46.763

创建内容为 HTML 字符串的 iframe 有另一种方法：[srcdoc 属性](https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/srcdoc)。这在旧浏览器中不受支持（其中最主要的是：[Internet Explorer，可能还有 Safari](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#Browser_compatibility)？），但是有一个针对这种行为的[polyfill](https://github.com/jugglinmike/srcdoc-polyfill)，你可以在 IE 中添加条件注释，或者使用类似 has.js 的东西来有条件地懒惰加载它。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-03-27T14:29:29.650

我知道这是一个老问题，但我想我会提供一个使用该`srcdoc`属性的示例，因为这现在得到了[广泛的支持](https://caniuse.com/#search=srcdoc)，而且这个问题经常被查看。

使用该[`srcdoc`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-srcdoc)属性，您可以提供要嵌入的内联 HTML。如果支持，它会覆盖该`src`属性。`src`如果不受支持，浏览器将回退到该属性。

我还建议使用该[`sandbox`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-sandbox)属性对框架中的内容应用额外的限制。如果 HTML 不是您自己的，这一点尤其重要。

```
const iframe = document.createElement('iframe');
const html = '<body>Foo</body>';
iframe.srcdoc = html;
iframe.sandbox = '';
document.body.appendChild(iframe);
```

如果您需要支持较旧的浏览器，您可以检查`srcdoc`支持并从其他答案中回退到其他方法之一。

```
function setIframeHTML(iframe, html) {
  if (typeof iframe.srcdoc !== 'undefined') {
    iframe.srcdoc = html;
  } else {
    iframe.sandbox = 'allow-same-origin';
    iframe.contentWindow.document.open();
    iframe.contentWindow.document.write(html);
    iframe.contentWindow.document.close();
  }
}

var iframe = document.createElement('iframe');
iframe.sandbox = '';
var html = '<body>Foo</body>';

document.body.appendChild(iframe);
setIframeHTML(iframe, html);
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-06-09T22:56:39.763

URL 方法仅适用于小的 HTML 片段。更可靠的方法是从 blob 生成对象 URL 并将其用作动态 iframe 的源。

```
const html = '<html>...</html>';
const iframe = document.createElement('iframe');
const blob = new Blob([html], {type: 'text/html'});
iframe.src = window.URL.createObjectURL(blob);
document.body.appendChild(iframe); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-31T22:43:49.240

做这个

```
...
var el = document.getElementById('targetFrame');

var frame_win = getIframeWindow(el);

console.log(frame_win);
... 
```

***getIframeWindow***在这里定义

```
function getIframeWindow(iframe_object) {
  var doc;

  if (iframe_object.contentWindow) {
    return iframe_object.contentWindow;
  }

  if (iframe_object.window) {
    return iframe_object.window;
  } 

  if (!doc && iframe_object.contentDocument) {
    doc = iframe_object.contentDocument;
  } 

  if (!doc && iframe_object.document) {
    doc = iframe_object.document;
  }

  if (doc && doc.defaultView) {
   return doc.defaultView;
  }

  if (doc && doc.parentWindow) {
    return doc.parentWindow;
  }

  return undefined;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2021-04-26T18:53:17.653

（功能（）{

```
var frame = document.createElement('iframe');
frame.src = 'https://1zr2h9xgfxqt.statuspage.io/embed/frame';
frame.style.position = 'fixed';
frame.style.border = 'none';
frame.style.boxShadow = '0 20px 32px -8px rgba(9,20,66,0.25)';
frame.style.zIndex = '9999';
frame.style.transition = 'left 1s ease, bottom 1s ease, right 1s ease';

var mobile;
if (mobile = screen.width < 450) {
  frame.src += '?mobile=true';
  frame.style.height = '20vh';
  frame.style.width = '100vw';
  frame.style.left = '-9999px';
  frame.style.bottom = '-9999px';
  frame.style.transition = 'bottom 1s ease';
} else {
  frame.style.height = '115px';
  frame.style.width = '320px';
  frame.style.left = 'auto';
  frame.style.right = '-9999px';
  frame.style.bottom = '60px';
}

document.body.appendChild(frame);

var actions = {
  showFrame: function() {
    if (mobile) {
      frame.style.left = '0';
      frame.style.bottom = '0';
    }
    else {
      frame.style.left = 'auto';
      frame.style.right = '60px'
    }
  },
  dismissFrame: function(){
    frame.style.left = '-9999px';
  }
}

window.addEventListener('message', function(event){
  if (event.data.action && actions.hasOwnProperty(event.data.action)) {
    actions[event.data.action](event.data);
  }
}, false);

window.statusEmbedTest = actions.showFrame; 
```

})();

# jquery - jquery检查/取消选中事件触发器

> ID：10418647
> 
> 赞同：1
> 
> 时间：2012-05-02T17:21:55.730
> 
> 标签：jquery

我有这个代码可以通过一半

```
jQuery('#checkbox').click(function () {
   jQuery('.cssBox').animate({height:'+=50px'}, 500);
   jQuery('#extra').toggle(this.checked);
}); 
```

现在，选中复选框时 cssbox 会放大，但未选中时 cssbox 会继续变大。如何修复它，以便在未选中时恢复到原始大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:24:48.160

使用`change`代替`click`（否则通过跳格和使用空格键将绕过您的代码）。此外，根据`checked`状态应用您的动画：

```
jQuery('#checkbox').change(function(){
  jQuery('.cssBox').animate({
    height: this.checked   // is it checked?
      ? '+=50px'              // yes, increase by 50px
      : '-=50px'              // no, decrease by 50px
  },500);
  jQuery('#extra').toggle(this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:23:49.730

试试下面的东西，

```
jQuery('#checkbox').click(function () {
   jQuery('.cssBox').animate({height: ((this.checked)?'+=50px':'-=50px')}, 500);
   jQuery('#extra').toggle(this.checked);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:28:16.590

```
$(function(){
    var isSmall=true;
    $('#checkbox').click(function () {
        if(isSmall)
        {
           $('.cssBox').animate({height:'+=50px'}, 500);
        }
        else            
        {
           $('.cssBox').animate({height:'-=50px'}, 500);
        }
       isSmall=!isSmall;
    });        
});​ 
```

示例：http: [//jsfiddle.net/2nU7b/4/](http://jsfiddle.net/2nU7b/4/)

# osgi - 分布式基础架构中的 OSGi

> ID：10418650
> 
> 赞同：5
> 
> 时间：2012-05-02T17:22:02.520
> 
> 标签：osgi, distributed, dosgi

我们正在开发一个基于 OSGi 的基础架构，用于处理基于流的数据流。特定的处理任务由各个 OSGi 组件执行。我们现在需要能够将这些组件分布在不同的机器上，这意味着我们需要某种 OSGi 组件/容器之间的通信机制。

在我的研究中，我遇到了不同的潜在解决方案：R-OSGi、用于分布式 OSGi 的 Apache CXF、Eclipse 通信框架。

ECF 似乎特别有趣，因为它支持不同的传输格式并提供对服务发现等内容的支持。

我的核心问题：

*   是否有在 Felix 中设置 ECF 基础架构的详细教程/演练？（根据我的研究，我发现最近添加了对 Felix 的支持）
*   除了上面列出的三个我可能错过的解决方案之外，还有其他解决方案吗？
*   是否有理由使用 Apache CXF 而不是 ECF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:04:42.313

第一个问题——是否有关于使用 Felix 设置 ECF 的详细演练——我不知道答案，尽管可能会使用搜索引擎来找出这些术语的组合。

问题是 ECF 使用 Equinox 基础设施，并且有时不经意地依赖于通过传递依赖项（尤其是使用 Equinox 进行非公共调试的运行时 API）的非公共包。反过来，这意味着 ECF 依赖于一整套可用的其他组件，而正是这个集合通常在 Felix 运行时没有很好地定义。

您错过了 Paremus 的 Service Fabric，它是一个商业 OSGi 云解决方案。我不确定您是否特别关注开源；但是，如果您包含商业许可证，那么它们具有非常强大的远程服务架构。

最后，Apache CXF over ECF 问题——如果您使用的是 Felix，我认为使用 Apache CXF 可能比使用 ECF 更容易。这主要是由于依赖集及其工作，再加上 ECF 可能未在 Felix 上测试，因此可能会假设 Equinox 运行时的特定方面（例如，包括运行时的父类加载器委托来获取引导类路径上的东西）。这实际上并不是 ECF 本身的错，而是 Eclipse 生态系统如何工作的产物。

如果您想与非 OSGi 运行时进行通信，Apache CXF 的优势在于它们可以生成 WDSL 以与其他语言进行交互。我相信您可以通过更多的工作在 ECF 中做同样的事情。CXF 解决方案可能比相应的 ECF 解决方案更冗长（WSDL 总是如此），但如果您不使用大量请求，这不太可能产生显着差异。

# c# - 使用 EnumMemberAttribute 并进行自动字符串转换

> ID：10418651
> 
> 赞同：28
> 
> 时间：2012-05-02T17:22:03.333
> 
> 标签：c#, enums

我有以下代码

```
[DataContract]
public enum StatusType
{
    [EnumMember(Value = "A")]
    All,
    [EnumMember(Value = "I")]
    InProcess,
    [EnumMember(Value = "C")]
    Complete,
} 
```

我想做以下事情：

```
 var s = "C";
 StatusType status = SerializerHelper.ToEnum<StatusType>(s);   //status is now StatusType.Complete
 string newString = SerializerHelper.ToEnumString<StatusType>(status);   //newString is now "C" 
```

我已经使用 DataContractSerializer 完成了第二部分（请参见下面的代码），但这似乎需要做很多工作。

我错过了一些明显的东西吗？想法？谢谢。

```
 public static string ToEnumString<T>(T type)
    {
        string s;
        using (var ms = new MemoryStream())
        {
            var ser = new DataContractSerializer(typeof(T));
            ser.WriteObject(ms, type);
            ms.Position = 0;
            var sr = new StreamReader(ms);
            s = sr.ReadToEnd();
        }
        using (var xml = new XmlTextReader(s, XmlNodeType.Element, null))
        {
            xml.MoveToContent();
            xml.Read();
            return xml.Value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-02T17:42:33.513

这是我的建议 - 它应该让您了解如何执行此操作（另请查看[获取 Enum 值的属性](https://stackoverflow.com/questions/1799370/getting-attributes-of-enums-value)）：

```
public static string ToEnumString<T>(T type)
{
    var enumType = typeof (T);
    var name = Enum.GetName(enumType, type);
    var enumMemberAttribute = ((EnumMemberAttribute[])enumType.GetField(name).GetCustomAttributes(typeof(EnumMemberAttribute), true)).Single();
    return enumMemberAttribute.Value;
}

public static T ToEnum<T>(string str)
{
    var enumType = typeof(T);
    foreach (var name in Enum.GetNames(enumType))
    {
        var enumMemberAttribute = ((EnumMemberAttribute[])enumType.GetField(name).GetCustomAttributes(typeof(EnumMemberAttribute), true)).Single();
        if (enumMemberAttribute.Value == str) return (T)Enum.Parse(enumType, name);
    }
    //throw exception or whatever handling you want or
    return default(T);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-05-23T09:02:14.883

如果您的项目引用[Newtonsoft.Json](https://www.nuget.org/packages/Newtonsoft.Json/)（这些天没有什么？！），那么有一个不需要反射的简单单行解决方案：

```
public static string ToEnumString<T>(T value)
{
   return JsonConvert.SerializeObject(value).Replace("\"", "");
}

public static T ToEnum<T>(string value)
{
   return JsonConvert.DeserializeObject<T>($"\"{value}\"");
} 
```

该`ToEnumString`方法仅在您已`StringEnumConverter`注册时才有效`JsonSerializerSettings`（请参阅[JavaScriptSerializer - JSON serialization of enum as string](https://stackoverflow.com/questions/2441290/net-json-serialization-of-enum-as-string)），例如

```
JsonConvert.DefaultSettings = () => new JsonSerializerSettings
{
    Converters = { new StringEnumConverter() }
}; 
```

这种方法的另一个优点是，如果只有一些枚举元素具有成员属性，事情仍然按预期工作，例如

```
public enum CarEnum
{
    Ford,
    Volkswagen,
    [EnumMember(Value = "Aston Martin")]
    AstonMartin
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-06-01T20:39:57.340

使用扩展和 C# 7.3 约束

```
 public static class EnumMemberExtensions
    {
        public static string ToEnumString<T>(this T type)
            where T : Enum
        {
            var enumType = typeof(T);
            var name = Enum.GetName(enumType, type);
            var enumMemberAttribute = ((EnumMemberAttribute[])enumType.GetField(name).GetCustomAttributes(typeof(EnumMemberAttribute), true)).Single();
            return enumMemberAttribute.Value;
        }

        public static T ToEnum<T>(this string str)
            where T : Enum
        {
            var enumType = typeof(T);
            foreach (var name in Enum.GetNames(enumType))
            {
                var enumMemberAttribute = ((EnumMemberAttribute[])enumType.GetField(name).GetCustomAttributes(typeof(EnumMemberAttribute), true)).Single();
                if (enumMemberAttribute.Value == str) return (T)Enum.Parse(enumType, name);
            }
            //throw exception or whatever handling you want or
            return default;
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T17:36:21.017

您可以使用反射来获取`EnumMemberAttribute`.

```
public static string ToEnumString<T>(T instance)
{
    if (!typeof(T).IsEnum)
        throw new ArgumentException("instance", "Must be enum type");
    string enumString = instance.ToString();
    var field = typeof(T).GetField(enumString);
    if (field != null) // instance can be a number that was cast to T, instead of a named value, or could be a combination of flags instead of a single value
    {
        var attr = (EnumMemberAttribute)field.GetCustomAttributes(typeof(EnumMemberAttribute), false).SingleOrDefault();
        if (attr != null) // if there's no EnumMember attr, use the default value
            enumString = attr.Value;
    }
    return enumString;
} 
```

根据您的`ToEnum`工作方式，您可能也想在那里使用这种方法。此外，可以在调用时推断类型`ToEnumString`，例如`SerializerHelper.ToEnumString(status);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-11T07:18:04.813

此示例显示如何使用`DescriptionAttribute`、`EnumMemberAttribute`和属性名称转换枚举：

```
using System;
using System.ComponentModel;
using System.Linq;
using System.Reflection;
using System.Runtime.Serialization; 
```

```
 public static class EnumExtensions
    {
        public static T ToEnumByAttributes<T>(this string value)
            where T:Enum
        {
            var enumType = typeof(T);
            foreach (var name in Enum.GetNames(enumType))
            {
                var field = enumType.GetField(name);
                if(field == null) continue;

                var enumMemberAttribute = GetEnumMemberAttribute(field);
                if (enumMemberAttribute != null && enumMemberAttribute.Value == value)
                {
                    return (T)Enum.Parse(enumType, name);
                }

                var descriptionAttribute = GetDescriptionAttribute(field);
                if (descriptionAttribute != null && descriptionAttribute.Description == value)
                {
                    return (T)Enum.Parse(enumType, name);
                }

                if (name == value)
                {
                    return (T)Enum.Parse(enumType, name);
                }
            }

            throw new ArgumentOutOfRangeException(nameof(value), value, $"The value could not be mapped to type {enumType.FullName}");
        }

        public static string ToStringByAttributes(this Enum value)
        {
            var field = value
                .GetType()
                .GetField(value.ToString());

            if (field == null) return string.Empty;

            var enumMemberAttribute = GetEnumMemberAttribute(field);
            if (enumMemberAttribute != null)
            {
                return enumMemberAttribute.Value ?? string.Empty;
            }

            var descriptionAttribute = GetDescriptionAttribute(field);
            if (descriptionAttribute != null)
            {
                return descriptionAttribute.Description;
            }

            return value.ToString();
        }

        private static DescriptionAttribute? GetDescriptionAttribute(FieldInfo field)
        {
            return field
                .GetCustomAttributes(typeof(DescriptionAttribute), false)
                .OfType<DescriptionAttribute>()
                .SingleOrDefault();
        }

        private static EnumMemberAttribute? GetEnumMemberAttribute(FieldInfo field)
        {
            return field
                .GetCustomAttributes(typeof(EnumMemberAttribute), false)
                .OfType<EnumMemberAttribute>()
                .SingleOrDefault();
        }
    } 
```

NUnit 测试：

```
 [TestFixture]
    public sealed class EnumExtensionsTests
    {
        public enum TestEnum
        {
            [EnumMember(Value = "A")]
            Alpha,

            [Description("O")]
            Omega
        }

        [Test]
        public void ShouldSerialize_FromEnumAttribute()
        {
            var result = TestEnum.Alpha.ToStringByAttributes();
            Assert.That(result, Is.EqualTo("A"));
        }

        [Test]
        public void ShouldSerialize_FromDescriptionAttribute()
        {
            var result = TestEnum.Omega.ToStringByAttributes();
            Assert.That(result, Is.EqualTo("O"));
        }

        [Test]
        public void ShouldDeserialize_FromEnumAttribute()
        {
            var result = "A".ToEnumByAttributes<TestEnum>();
            Assert.That(result, Is.EqualTo(TestEnum.Alpha));
        }

        [Test]
        public void ShouldDeserialize_FromDescriptionAttribute()
        {
            var result = "O".ToEnumByAttributes<TestEnum>();
            Assert.That(result, Is.EqualTo(TestEnum.Omega));
        }

        [Test]
        public void ShouldDeserialize_FromPropertyName()
        {
            var result = "Alpha".ToEnumByAttributes<TestEnum>();
            Assert.That(result, Is.EqualTo(TestEnum.Alpha));
        }
    } 
```

# vb.net - vb.net 数组在函数内调整大小

> ID：10418652
> 
> 赞同：0
> 
> 时间：2012-05-02T17:22:08.853
> 
> 标签：vb.net, reference

我在 vb.net 中遇到了数组调整大小的问题。我有点理解为什么会出现这个问题，但我不确定如何解决它。基本上，我有一个类，它有一个传递给它的对象数组。我试图让一个子调整数组的大小并向其中添加另一个对象。但是，一旦完成，原始对象就不会得到更新。

最理想的情况是我想要这样的东西。

```
Sub Main()
    Dim parent As New Parent
    Dim first As New Child()
    Dim second As New Child()
    Dim children As Child() = New Child() {first, second}
    parent.children = children
    setChildren(getChildren(parent))
End Sub

Private Function getChildren(parent As Parent) As Child()
    Return parent.children
End Function

Private Sub setChildren(ByRef testArray As Child())
    testArray = New Child(3) {}
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:30:23.677

因为`setChildren`接受它的`testArray`参数 by `ref`，所以必须给它一个变量或字段，而不是一个属性或函数返回。如果`Parent.children`是一个字段，而不是一个属性，则可以调用`setChildren(parent.children);`. 或者，可以让`Parent.children`持有一个本身持有对数组的引用的类型；满足该标准的两个内置类型是`List(Of Child)`和`Child()()`。顺便说一句，我建议更改您的标识符名称，以便类型名称和变量名称明显不同（vb.net 不区分大小写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:39:52.300

由于您使用的是数组，因此您需要重新调整数组以添加另一个元素。

```
Private Sub setChildren(ByRef testArray As Child())
   Dim arrayLength as Int = testArray.Length  'total number of elements in array
   ReDim Preserve testArray(arrayLength) 
   testArray(arrayLength) = New Child {}
End Sub 
```

编辑：忘记 Preserve 关键字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:40:08.170

根据您的要求，我认为这[`ReDim Statement`](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.100%29.aspx)就是您所追求的：

```
Private Sub setChildren(ByRef testArray As Child())
    ReDim Preserve testArray(3)
End Sub 
```

该`Preserve`语句会将 的内容复制`testArray`到新创建的数组中。

# algorithm - 与所有其他给定点的曼哈顿距离最小的所有点 [优化]

> ID：10418654
> 
> 赞同：9
> 
> 时间：2012-05-02T17:22:13.163
> 
> 标签：algorithm, optimization

这里的问题是找到所有整数点的集合，它给出从给定点集合的所有曼哈顿距离的最小总和！

例如：

让我们有一组给定的点 { P1, P2, P3...Pn }

基本问题是找到一个点，比如说 X，它在从点 { P1，P2，P3...Pn} 的所有距离上具有最小总和。

即|P1-X| + |P2-X| + .... + |Pn-X| = D，其中 D 将是所有 X 中的最小值。

更进一步，可以有多个 X 值满足上述条件。即，可能有多个 X 会给出相同的值 D。所以，我们需要找到所有这样的 X。

任何人都可以想到的一种基本方法是找到输入的中位数，然后暴力破解本文中提到的[坐标](https://stackoverflow.com/questions/10402087/algorithm-for-minimum-manhattan-distance)

但是这种方法的问题是：如果中位数给出了两个相差很大的值，那么我们最终会暴力破解所有在给定时间内永远不会运行的点。

那么，即使这些点相距很远（其中中位数给出的范围约为 10 ^ 9），是否还有其他方法可以给出结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T20:18:41.577

您可以分别考虑 X 和 Y，因为它们彼此独立地增加距离。这将问题简化为在给定一条线上的 n 个点的情况下，找到一个与其他点的距离之和最小的点。这很简单：两个中位数（包括）之间的任何点都将满足这一点。

* * *

**证明**：如果我们有偶数个点，将有两个中位数。两个中位数之间的点将在左侧有 n/2 个点，在右侧有 n/2 个点，以及到 S 的这些点的总距离和。

如果我们将它向左移动一点，S 将上升 n/2 *（因为我们正在远离最右边的点）*并下降 n/2 *（因为我们正在向最左边的点移动)*，所以整体 S 保持不变。在我们达到最左边的中点之前，这都是正确的。当我们将最左边的中间点向左移动时，我们现在有 (n/2 + 1) 个点向右，(n/2 - 1) 个点向左，所以 S 上升了 2。继续向左只会进一步增加S。
同样的逻辑，最右边中位数右边的所有点也有一个更高的 S。

如果我们有奇数个点，则只有一个中位数。使用与上述相同的逻辑，我们可以证明它具有最低的 S 值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T19:01:30.510

如果中位数为您提供 10^9 数量级的区间，则该区间中的每个点都与其他点一样好。

因此，根据您以后想要对这些点做什么，您可以返回范围或枚举该范围内的点。没办法。。

显然，在二维中你会得到一个边界矩形，在 3 维中你会得到一个边界长方体等。

结果将始终是为每个维度获得的范围的笛卡尔积，因此您可以返回这些范围的列表作为结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:29:17.970

由于在曼哈顿距离中，每个组件都是单独贡献的，因此您也可以单独考虑它们。最佳答案是（中位数（x），中位数（y））。您需要在这一点上寻找整数解决方案。

**注意**：我在回答时没有正确阅读您的问题。我的回答仍然成立，但您可能已经知道这个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:30:27.790

是的，我还认为，对于网格上的奇数 N 个点，将只有一个点（即 MEDIAN），它与所有其他点的曼哈顿距离之和最小。

对于 N 的偶数值，情况会有所不同。

根据我的说法，如果两个集合，`X = {1,2} and Y= {3,4}`他们的笛卡尔积将始终为 4。

即`X × Y = {1,2} × {3,4} = {(1,3), (1,4), (2,3), (2,4)}`。这是我到目前为止所理解的。

至于偶数个值，我们总是将“中间两个”值作为 MEDIAN。从 X 中取 2 并从 Y 中取 2 将始终返回 4 点的笛卡尔积。

如果我错了，请纠正我。

# wordpress - WordPress 插件和单向加密

> ID：10418655
> 
> 赞同：0
> 
> 时间：2012-05-02T17:22:15.220
> 
> 标签：wordpress, security, pci-dss

我希望有人可以帮我解决一些问题。我一直在为 WordPress 开发一个购物车插件已经有一段时间了。我在 2008 年底开始编写它（它是那些“有时间就开始工作”的项目之一，所以进展非常缓慢，很明显！）并且已经走了很远。甚至有一些测试人员接受我并给我反馈。（请注意，这个插件也是收费下载的——我无意让它成为一个高级插件。）

无论如何，在 2010 年，当所有 PCI/DSS 的东西都成为标准时，我把它搁置了，因为插件是为了在数据库中保留某些信息，我不能 100% 确定什么是“敏感数据”，我没有不想把任何可能危及任何人的东西放在那里，并可能回到我身上。

在过去的几周里，我和一些同事一直在讨论 PCI/DSS 合规性，这引发了对最终完成这个插件的重新兴趣。我将删除信用卡号和任何此类性质的数据的存储，但我确实喜欢存储自愿可能希望在可能使用此插件的网站上创建帐户的人的姓名和送货地址的想法因此，如果他们再次在那里购物，则会保留此类信息。请记住，存储的数据将是*公共信息*- 你会在电话簿中找到的那种东西，或者在法院的记录室里偷看。所以没有什么比存储 SS#、病史或信用卡号码更重要的了。只是可能会让某人看到过去购买的东西，并保留一些信息以使将来的结帐过程更容易一些。

我的一位同事建议我仍然做一些事情来增强安全性，因为名称和送货地址可能会传递到网站所有者选择使用的任何支付网关。他们建议我使用“单向加密”。现在，我不是一个巨大的安全怪胎，但我很确定这涉及（无论如何都是一方面）诸如带有盐的 MD5 哈希之类的东西。所以这让我很困惑，因为我根本不知道在哪里查看如何在我的代码中使用这种东西，和/或在将这种数据传递给 PayPal 或 Google Checkout 时它是否可以工作，或者马尔的，或者你有什么。

所以我想这不是“我需要代码示例”之类的问题，而更像是“请赐教，因为我有点笨”之类的问题。（我敢肯定，这让人们对我正在编写购物车插件 LOL 感觉好多了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:16:20.373

一种方式加密用于将信息存储在数据库中，您不需要在未加密阶段再次从数据库中退出（因此是单向名称）。在更一般的意义上，它可以用来证明两个不同的人（或系统）拥有相同的数据。例如，Git 使用哈希来检查文件（以及整个目录结构）是否相同。

通常在 ecomm contect 中，哈希用于密码（有时是信用卡），因为作为网站所有者，您不需要保留实际密码，您只需要一个函数来确定当前是否发送密码用户与之前提供的用户相同。因此，为了验证用户身份，您将传递通过加密算法（MD5、SHA 等）提供的密码以获得“哈希”。如果哈希与先前生成并存储在数据库中的哈希匹配，则您知道密码是相同的。

WordPress 使用加盐哈希来存储它的密码。如果您在数据库中打开 wp_users 表，您将看到哈希值。

这个系统的好处是，如果有人窃取了你的数据库，他们不会得到原始密码，只有小偷不能用来登录你用户的 Facebook、银行等网站的哈希值（如果你的用户使用了相同的密码）。实际上，他们甚至不能使用哈希登录到他们被盗的站点，因为哈希哈希会产生不同的哈希。

盐提供了一种针对哈希字典攻击的保护措施。有一些数据库可用于常见密码和散列值之间的映射，其中散列值是通过经常使用的单向散列函数生成的。如果在生成哈希时，您在密码字符串的末尾添加了一个盐值（例如，我的密码变为 abc123salt），您仍然可以与之前生成并存储的哈希值进行比较（如果您使用相同的值）每次的盐值。

如果您将来需要以原始形式再次使用它，您不会以一种方式散列地址或电话号码（或类似的东西）之类的东西，例如预先填充一个已登录的结帐字段用户。

最佳实践还包括不再存储您将来不再需要的数据，如果您将来不需要电话号码，请不要存储它。如果您存储来自支付网关的响应交易编号，您可以将其用于欺诈调查，并将所有其他数据的存储留给网关。

我将留给其他人讨论 MD5 与 SHA 与 ??? 的相对优点 哈希系统。请注意，PHP 内置了一些函数来进行哈希处理。

# java - 在禁用按钮上显示图像，而不会使图像变灰？

> ID：10418662
> 
> 赞同：0
> 
> 时间：2012-05-02T17:22:37.823
> 
> 标签：java, image, button, swt

我正在用 java swt 编写一个播放井字游戏的程序，但如果不使用 button.setImage(image) 方法，我找不到在按钮上显示带有 x 或 o 的图像的方法。当我这样做时，图像会变灰，我不希望这样。有什么办法可以做到，所以当我单击按钮时，按钮会被禁用并且图像会显示在它上面，或者我至少可以让按钮在禁用时不灰显吗？

还应该注意的是，我在我的 GUI 中使用了 SWT。

如果有任何帮助，这是我遇到问题的代码部分：

```
public static void drawX(Button b, Shell s, Image x){   //draws an X image
        int topLeft_X=b.getLocation().x;
        int topLeft_Y=b.getLocation().y;
        GC gc = new GC(b);
        gc.drawImage(x,  topLeft_X, topLeft_Y);
    }

public static void drawO(Button b, Shell s, Image o){   //draws an O image
    int topLeft_X=b.getLocation().x;
    int topLeft_Y=b.getLocation().y;
    GC gc = new GC(b);
    gc.drawImage(o,  topLeft_X, topLeft_Y);
}

static double turnCount = 1;        

public static void button(final Button b, final Shell s,  final int i, final int j, final Image g, final Image h){      //the method that would make the image appear
    b.addSelectionListener(new SelectionListener() {

        public void widgetSelected(SelectionEvent e) {
            b.setEnabled(false);
            turnCount++;
            if(p1()){
                a[i][j]++;
                drawX(b, s, g);
                b.setVisible(false);
            }
            else{
                a[i][j]--;
                drawX(b, s, h);
                b.dispose();
            }
        }

        public void widgetDefaultSelected(SelectionEvent e) {
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:32:16.697

见[`AbstractButton.setDisabledIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setDisabledIcon%28javax.swing.Icon%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:23:54.467

您可以在按钮显示上过滤事件，而不是使用 Button.setEnabled(boolean) 来启用/禁用按钮。

**button.getDisplay().addFilter(eventType,listener); button.getDisplay().removeFilter(eventType,listener);**

当您想禁用/启用按钮时，添加/删除鼠标事件和键盘事件的过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T15:08:13.660

为什么不用FillLayout 将按钮放在一个组合中，而不是禁用按钮，而是禁用父组合。按钮看起来已启用，但鼠标单击和选项卡遍历不会到达它。

警告：用户看到无法单击的启用按钮可能会很烦人，但这就是您所要求的。

# actionscript-3 - AS3 为屏幕截图定义坐标？

> ID：10418667
> 
> 赞同：1
> 
> 时间：2012-05-02T17:22:43.803
> 
> 标签：actionscript-3, screenshot

我已经为安装构建了一个照相亭应用程序，我需要用它的框架截取位图数据的屏幕截图......我愚蠢地在游戏中太早地嵌套了我的对象，所以只拍一张显示器的照片对象在这个关头没有实际意义，我没有时间重新组织一切。

我知道编码器可以输出舞台的静止图像，但这可以是一组定义的坐标吗？我有一个需要输出的 800x600 区域，忽略舞台的其余部分。

我也在玩其他选项，但如果有什么看起来很明显，我会非常感激它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:44:27.087

您可以将整个舞台作为位图数据，然后使用 copypixels 方法复制您需要的区域。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)

或者您可以使用 BitmapData 类的 draw 方法将显示对象绘制到该位图数据中。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)

# php - Wordpress 发布到 xml

> ID：10418668
> 
> 赞同：0
> 
> 时间：2012-05-02T17:22:46.563
> 
> 标签：php, xml, wordpress

我有一个项目，我必须将给定 wordpress 后端的值链接到 xmls，因为我是 Worpress 的新手，我不知道从哪里开始。

所以xml看起来像这样

```
 <?xml version="1.0"?>
<articles>
    <article>
        <title><![CDATA[Teddiedrum - The Audience]]>
        </title>
        <image><![CDATA[http://niteversions.com/uploads/Teddiedrum-The-Audience-490x490.jpg]]>
        </image>
        <content>
            <![CDATA[Oei.]]>
        </content>
        <date>
            <![CDATA[16/04/2012]]>
        </date>
    </article>
    <article>
        <title><![CDATA[Soap&Skin - Boat Turns Toward The Port ]]>
        </title>
        <image><![CDATA[http://neuundgut.zib21.com/wp-content/uploads/2011/12/soap-skin-boat-turns-towards-the-boat-video.jpg]]>
        </image>
        <content>
            <![CDATA[Elke aanleiding moéten we gebruiken om deze magistrale Soap&Skin-song te posten. We geraken immers nog steeds niet uit de wurggreep van ‘Boat Turns Toward The Port’. De 22-jarige Anja Plaschg slaat ons, op amper 2:30, compleet murw met dit hartverscheurend, schuifelend treurlied. Alle haren overeind, woensdagavond in AB, Brussel.]]>        
        </content>
        <date>
            <![CDATA[17/04/2012]]>
        </date>
    </article>
    <article>
        <title><![CDATA[Mr. Scruff Vs Kirsty Almeida - Pickled Spider]]>
        </title>
        <image><![CDATA[http://ecx.images-amazon.com/images/I/41HRpRNhG-L.jpg]]>
        </image>
        <content>
            <![CDATA[De dolgedraaide Ninja Tuner Mr Scruff palmt vrijdag - van 20u30 tot 2u (!) - het podium van de Brusselse VK* in. Mail snel naar filip.rifraf@skynet.be met als subject Mr. Scruff voor één van de 3 gratis duotickets. De winnaars maken we hier donderdag bekend. “Maar als je niet tegen vette bassen kan, ben blijf je beter thuis”, waarschuwt hij. Doe de bass-test met deze ‘Pickled Spider’.]]> 
        </content>
        <date>
            <![CDATA[18/04/2012]]>
        </date>
    </article>
    <article>
        <title><![CDATA[DJ Muggs feat Dizzee Rascal & Bambu - Snap Ya Neck Back]]>
        </title>
        <image><![CDATA[http://www.danceeuphoria.com/wp-content/uploads/2012/03/djmuggssnapyaneckback.jpg]]>
        </image>
        <content>
            <![CDATA[Een goed jaar geleden op de RifRaf-cover, nu bruutweg een banaan molesterend. Tsssss.]]> 
        </content>
        <date>
            <![CDATA[18/04/2012]]>
        </date>
    </article>
    <article>
        <title><![CDATA[Steak Number Eight - Dickhead]]>
        </title>
        <image><![CDATA[http://userserve-ak.last.fm/serve/500/6144813/Steak+Number+Eight++010.jpg]]>
        </image>
        <content>
            <![CDATA[Een goed jaar geleden op de RifRaf-cover, nu bruutweg een banaan molesterend. Tsssss.]]>
        </content>
        <date>
            <![CDATA[19/04/2012]]>
        </date>
    </article>
    <article>
        <title><![CDATA[The Heart Is A Drum - Drums Are For Parades feat. Tim Vanhamel]]>
        </title>
        <image><![CDATA[http://www.liegecity.be/wp-content/uploads/2012/03/DrumsAreForParade.jpg]]>
        </image>
        <content>
            <![CDATA[De 'IMPERIVM’-picture disc van Drums Are For Parades is één van de vele, unieke releases nav Record Store Day, nu zaterdag. Drums Are For Parades sluiten trouwens die hoogdag van de onafhankelijke platenwinkels ’s avonds live af in Handelsbeurs, Gent. Uit ‘IMPERIVM’, deze ‘The Heart Is A Drum’ feat. Tim Vanhamel.]]>
        </content>
        <date>
            <![CDATA[20/04/2012]]>
        </date>
    </article>
</articles> 
```

我想要的是在后端创建字段，例如标题、图像、内容、日期，并且每次保存该字段时都会向 xml 添加一个新节点。

欢迎任何有关如何开始执行此操作/我必须采取的步骤的信息。

亲切的问候

香椿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:39:11.717

wordpress 中已经有 2 个工具可以在后端导入和导出 xml 只需安装它，你就会得到你想要的，不需要在每个帖子上做任何自定义的事情，但如果你仍然想要它，那么请阅读`'publish_post'`hook

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:49:08.877

如前所述，您最好的选择是搜索现有插件。我将从这个开始，也许会根据您的需要修改它：

[http://wordpress.org/extend/plugins/backwpup/](http://wordpress.org/extend/plugins/backwpup/)

# asp.net - 在 IIS7 中托管 ASP.NET 会导致访问被拒绝？

> ID：10418669
> 
> 赞同：135
> 
> 时间：2012-05-02T17:22:51.317
> 
> 标签：asp.net, iis-7, access-denied

我在我的 IIS7 中设置了一个使用 .NET Framework 4.0（由 NetworkService 运行）的应用程序，但是在浏览网站时我得到了这个：

> 访问被拒绝。
> 说明：访问处理此请求所需的资源时出错。您可能无权查看请求的资源。
> 错误消息 401.3：您无权使用您提供的凭据查看此目录或页面（由于访问控制列表而拒绝访问）。请求 Web 服务器的管理员授予您访问权限*

我试图为保存网站的文件夹（IIS 中的 Web 应用程序指向的文件夹）授予 NetworkService 完全权限，但我仍然拒绝访问？

为什么？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-05-03T16:46:32.553

我授予了对**"IIS_IUser"**的访问权限，但它应该是**"IUSR"**。这解决了问题。

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2013-06-05T11:26:08.417

对我来说，除了以下解决了问题的方法外，没有任何效果：打开 IIS，选择站点，打开身份验证（在 IIS 部分中），右键单击匿名身份验证并选择编辑，选择应用程序池标识。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-27T13:55:09.827

我遇到了同样的问题，我启用了“匿名身份验证”，但它仍然不起作用。所以我也启用了“表单身份验证”然后它没有任何问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-09T02:13:04.013

如果您使用匿名身份验证，IIS 7 将使用“IUSR”帐户进行目录访问（除非您已将其设置为使用应用程序池标识。如果您没有授予 IUSR 对站点文件夹和文件的足够权限，你会得到这个错误

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-28T09:16:08.627

操作系统：Windows 7 和 IIS 7

如果您在添加 IUSR & NETWORK SERVICE 后仍有权限被拒绝。还要添加 IIS_WPG。最后一个用户的添加解决了我的问题。

对于找不到这些用户的人：当您尝试在文件夹（文件夹的属性）的安全性中添加用户时，单击“选择用户或组”窗口的“高级”。将位置更改为计算机名称，然后单击“立即查找”。您会在下面的列表中找到这些用户。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-05T17:38:18.930

在这里尝试了大多数解决方案，但没有运气。对我有用的是将“所有人”添加到安全权限中。属性 -> 安全 -> 编辑 -> 添加 -> 每个人。给定的默认值足以让我重新获得访问权限。

在不久的将来，我可能应该弄清楚哪些凭据被发送到服务器，以便我可以提供适当的权限。但我希望它可以帮助某人！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-03-15T14:02:34.790

**对我来说，在 Windows 7 中，它只有在我为两个**用户授予站点文件夹的“读取和执行”、“列出文件夹内容”、“读取”权限后才开始工作

*   IUSR
*   网络服务

[![IUSR 权限](../Images/c7eb98e8190fa99348ce1bd8fe4858b5.png)](https://i.stack.imgur.com/9zMix.png) [![网络服务权限](../Images/58aa5414312ca9235dda1e9dc7f71bd7.png)](https://i.stack.imgur.com/MYrda.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-02T17:23:55.083

在 APP 本身的身份验证设置（IN IIS）中，查看您是否启用了匿名。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-01-09T19:53:05.443

我在这个问题上转了一圈，结果发现默认页面设置不正确。希望这可以帮助其他人避免浪费一小时的时间。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-23T07:21:52.577

检查匿名身份验证中的应用程序池标识并启用表单身份验证将解决拒绝访问错误的问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-06T10:31:55.690

经过一番思考和大量试验和错误后，我发现发生此错误是因为我的**web.config**的一部分已**加密**，并且由于某种原因密钥不再有效。

重新加密配置部分解决了这个问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-07-15T20:10:13.063

我们需要创建一个新用户 ComputerName\IUSR，方法是转到网站文件夹-->Properties-->Security-->Edit-->Add 并授予读取权限。这肯定会奏效。

此解决方案适用于 IIS7

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-08-24T20:16:14.260

在我的情况下，运行 c:\windows\Microsoft.Net\Framework64\v4.0.30319\aspnet_regiis.exe /i 解决了 403 访问被拒绝问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-06-24T06:34:59.017

这是由于 WWWRoot 目录安全问题。

简单的解决方案是，只需将 applicatio 文件夹复制到其他驱动器，而不是“C:\Inetpub\wwwroot”，然后为这个新路径创建一个虚拟目录。而已。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-09-19T10:08:58.687

这就是发生在我身上的事情：

`Get`-`Post`没关系。工作得很好。

当我尝试使用`Options`动词时，服务器会返回这样的错误。

[![403](../Images/f9b1b85edc5df251eb4b8dd9e9671e62.png)](https://i.stack.imgur.com/hvLdR.jpg)

然后，小心使用[urlScan](https://hackercool.com/2013/09/how-to-configure-urlscan-in-iis-7-5-and-iis-8-2/)

我将 OPTIONS 动词添加到 urlscan 配置 .ini 文件中，然后一切正常。

要检查是否安装了 urlscan，请打开 iis 管理器，打开的`ISAPI FILTERS`url scan 应该会出现在列表中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-06T14:08:52.623

从远程主机拉出并添加到 web.config 上的 appsettings 后，我遇到了这个问题。我通过启用 Windows 身份验证解决了这个问题：

单击项目并按 f4

确保启用了 Windows 身份验证：

[![在此处输入图像描述](../Images/be11f00df2c636cdd3d0641bf2dedc04.png)](https://i.stack.imgur.com/hSURy.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-03T13:33:50.220

After watching this tutorial :

[https://www.youtube.com/watch?v=RbrZbHpXBTE&list=PLp1Emx1rT4z9YWLDXBjUwBb130qv2Zq2x&index=4&ab_channel=LearningProgrammingTutorial](https://www.youtube.com/watch?v=RbrZbHpXBTE&list=PLp1Emx1rT4z9YWLDXBjUwBb130qv2Zq2x&index=4&ab_channel=LearningProgrammingTutorial)

I had the same problem using RDP ( windows server 2016 Datacenter ) i followed the tutorial above & enbaled my directory browsing options from the IIS internet infromation services manager.

[![error screenshot](../Images/67325f95b56edf3f2ecdb8c852f9961f.png)](https://i.stack.imgur.com/JqJ1B.png)

what you want to do is to access your IIS manager , you can check out the tutorial above to learn how to access IIS manager if you have trouble acessing there , it was useful for me that's why I'm sharing then ... go to :

[![go to authentication](../Images/497cd78298df7ec5ca0d6894d11a3c06.png)](https://i.stack.imgur.com/qEe4s.png)

[![you should gave access to IUSER ](../Images/937a0762db9854a9ebe9eff30a7c8ceb.png)](https://i.stack.imgur.com/pHU9c.png)

you should gave access to IUSER ( or **application tool identity** , depends or what you want to work with ) and your problem would be solved! :)

Also you need to check your firewall and TCP settings , if ping between two machines didn't work for you , you can check this out : [https://operavps.com/rdp-connection-issues/](https://operavps.com/rdp-connection-issues/)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-27T10:51:52.490

我也面临同样的问题，一切正常，用户和文件夹的所有权利也被授予。经过多次研究，我发现 wwwroot（源代码文件夹）与其他用户共享。我停止了分享，它就像一个魅力。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-09-20T20:36:36.647

如果已在身份验证中指定了 IUSR 用户并且您仍然遇到此问题，则可能是您的目录列表未启用。一定要检查一下。我就是这样。

# c# - Entity Framework 中的简单查询性能非常差

> ID：10418670
> 
> 赞同：4
> 
> 时间：2012-05-02T17:22:53.130
> 
> 标签：c#, sql, entity-framework

所以我有一个非常简单的结构：

*   我有具有唯一 OrderNumber 的订单
*   订单有很多 OrderRows
*   OrderRows 有许多 RowExtra，它们有 2 个字段，位置（OrderRow 中的 RowExtra 的序列号）和 Info，它是一个字符串。通常，一个 OrderRow 不会有多个 RowExtra。

（现在不要介意愚蠢的结构，它就是这样）。

所以现在我得到一个具有三个属性的对象列表：

*   订单号
*   位置
*   信息

我想要做的只是 1）检查具有给定 OrderNumber/Position 对的 RowExtra 是否存在于数据库中，如果存在，则 2）更新 Info 属性。

我尝试了几种不同的方法来实现这一点，但结果非常糟糕。解决方案遍历对象列表并发出查询，例如

```
myContext.RowExtras.Where(x => x.Position == currentPosition &&
                          x.OrderRow.Order.OrderNumber == currentOrderNumber) 
```

或从另一边走

```
myContext.Orders.Where(x => x.OrderNumber == currentOrderNumber)
                .SelectMany(x => x.OrderRows)
                .SelectMany(x => x.RowExtras)
                .Where(x => x.Position == currentPosition) 
```

然后检查计数是否等于 1，如果是，则更新属性，否则继续下一项。

我目前在数据库中大约有 4000 个 RowExtra，需要更新其中的大约一半。这些方法使程序需要几分钟才能完成，这确实是不能接受的。我不明白为什么要花这么长时间，因为返回所需 RowExtra 的 SQL 子句很容易手动编写（在 where 部分中只有 2 个连接和 2 个条件）。

我设法实现的最佳性能是使用如下所示的编译查询

```
Func<MyContext, int, string, IQueryable<RowExtra>> query = 
CompiledQuery.Compile( 
  (MyContext ctx, int position, string orderNumber) => 
    from extra in ctx.RowExtras 
    where 
      extra.Position == position && 
      extra.OrderRow.Order == orderNumber 
    select extra); 
```

然后为列表中的每个对象调用所述查询。但即使是这种方法也需要一分钟多的时间。那么我如何才能让这个东西在合理的时间范围内运行呢？

另外，我很抱歉解释过长，但希望有人能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:47:44.750

尽量减少数据库调用的次数。根据经验，每个至少需要大约 10 毫秒——即使是只返回一个标量的。

因此，一般来说，一次性获取您需要的所有数据，在代码中对其进行修改，然后保存。

```
List<Order> orders = myContext.Orders
    .Include( "OrderRows.RowExtras" )
    .Where( ... select all the orders you want, not just one at a time ... )
    .ToList();

foreach ( Order order in orders )
{
    ... execute your logic on the in-memory model
}

myContext.SaveChanges(); 
```

# ubuntu - 使用 xsel 或 xclip 从 Linux 客户机复制虚拟机到非 Linux 主机

> ID：10418678
> 
> 赞同：2
> 
> 时间：2012-05-02T17:23:50.683
> 
> 标签：ubuntu, command-line, copy-paste, virtualbox

我可以使用标准的 shft-ctrl-c 将我的来宾（Ubuntu 10.10）复制/粘贴到我的主机（OS X 10.6）中，以复制屏幕上突出显示的任何内容。这工作正常。

我也可以`cat something.txt | xsel`在`cat something.txt | xclip`Ubuntu 中粘贴。这也有效。

什么不起作用：`cat something.txt | xsel`，然后将其粘贴到我的主机 OS X 中。

有谁知道为什么“正常”剪贴板副本可以跨客户/主机操作系统工作，但命令行 xsel 和 xclip 复制技术只能在本地工作，而不是跨操作系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:04:13.657

您是否尝试过相关选项？

```
--primary   (-p)
--secondary (-s) 
--clipboard (-b) 
```

如果这没有帮助，这听起来像是对 Linux 来宾虚拟机添加的实施者的疏忽。您可以在以下位置提交错误报告

[https://www.virtualbox.org/wiki/Bugtracker](https://www.virtualbox.org/wiki/Bugtracker)

你可以试试[`xclip`](http://elcasey.wordpress.com/2008/02/12/xclip-use-the-clipboard-from-the-command-line)运气

# css - 向元素添加渐变会破坏 IE 中的 CSS 功能

> ID：10418680
> 
> 赞同：0
> 
> 时间：2012-05-02T17:23:52.080
> 
> 标签：css

我正在开发一个基于 CSS 的下拉菜单。在我向元素添加渐变之前，它工作正常。比 IE 中的某些东西中断，当我将鼠标悬停`<li>`在子菜单中的项目上时，菜单框就会消失。

这是我用来添加渐变并使其跨浏览器兼容的代码：

```
background-color: #c1ddf4; /* for non-css3 browsers */
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#c1ddf4', endColorstr='#ffffff', GradientType=0); /* for IE */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #c1ddf4), color-stop(100%, #ffffff));/* for webkit browsers */
background: -moz-linear-gradient(top, #c1ddf4, #ffffff); /* for firefox 3.6+ */
background-image: -o-linear-gradient(#c1ddf4, #ffffff); 
```

请参阅以下示例：

[**OK** *（无渐变）*](http://jsfiddle.net/DqTyh/8/)与[**NOT OK** *（有渐变）*](http://jsfiddle.net/DqTyh/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:08:04.637

IE 过滤器在应用于元素时*会破坏某些功能。*我的建议是为 IE 使用水平平铺的渐变图像，或者使用 CSS hack、仅限 IE 的样式表，或者使用[Modernizr.js](http://modernizr.com/)来定位它。

真正正确的方法是使用 Modernizr，然后编写这个 CSS：

```
.no-cssgradients li {
     background: url(gradient.png) repeat-y;
} 
```

这样，任何不支持 CSS 渐变的浏览器（不仅仅是 IE）都将获得图像。

# web-applications - 在 Ubuntu 中本地托管 Web 应用程序

> ID：10418686
> 
> 赞同：1
> 
> 时间：2012-05-02T17:24:13.793
> 
> 标签：web-applications, ubuntu

如何在本地 ubuntu 中托管我的 Web 应用程序文件？

我习惯在 Windows 上工作，我们将所有文件放在 wwwroot 文件夹中，然后配置 IIS 并在 localhost:8080 上运行应用程序

我希望在 Ubuntu 12.04 中做同样的事情（如果版本有什么不同，请告诉我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:39:17.183

在 Ubuntu 中，该位置是 /var/www。该位置应该已经有一个 index.html 文件。如果您没有安装其他基于 Web 的应用程序（如 tomcat 或 jboss），这将照常工作，因为这些安装可能已经修改了 Web 服务器的配置。

如果您要开发基于 Web 的应用程序并希望它在本地设置以进行开发和调试，那么使用 Eclipse 和 MySQL 或您的 DB 选择有更好的方法，但您的帖子并没有说明您真正想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:10:19.043

我能够自己找到答案。我们需要在 Ubuntu 中安装 apache2 以启动 localhost。

这个[链接](http://maketecheasier.com/install-and-configure-apache-in-ubuntu/2011/03/09)有帮助。

# javascript - Ajax 不适用于 javascript。我应该做些什么？

> ID：10418692
> 
> 赞同：1
> 
> 时间：2012-05-02T17:24:29.440
> 
> 标签：javascript, mysql, ajax, database

这是我调用 Ajax 请求的代码，而不是一个简单的输入按钮，它在 onClick 事件上将一些数据发送到一个名为 setValue() 的函数；

这是代码（JS）：
//请求ajax XML

```
<script type='text/javascript'>
function callAjax(){
var XMLObj = false;

if(window.XMLHttpRequest)
    XMLObj = new XMLHttpRequest();
else if(window.ActiveXObject)
    XMLObj = new ActiveXObject('Microsoft.XMLHTTP');

if(!XMLObj)
    return false;

return XMLObj; 
```

}

//var 用于 ajaxobject 句柄；

```
var objAjax = callAjax();

function setValue(value, id, num, item){
if(objAjax){
   if(objAjax.readyState == 4 || objAjax.readyState == 0){
       objAjax.open('POST', 'addview.php', true);
       objAjax.send('value=' + val + '&id='+id+'&num='+num+'&item='+item);
   }
}
} 
```

//向函数setValue()发送值的输入；

```
<input type='button' onClick='setValue(1, 2, 3, 4)' /> 
```

//这是我通过php处理发送数据的地方

```
<?php
if(!$_POST['value'] || !$_POST['id'] || !$_POST['num'] || !$_POST['item'])
    exit();

include('config.php');

$value = mysql_real_escape_string($_POST['value']);
$id = mysql_real_escape_string($_POST['id']);
$num = mysql_real_escape_string($_POST['num']);
$item = mysql_real_escape_string($_POST['item']);

mysql_query("UPDATE `window` SET window_val = window_val + ".$value." WHERE window_id = '".$id."' AND window_num = '".$num."' AND window_item = '".$item."' ") or die(mysql_error() );
mysql_close($con);
?> 
```

php 脚本正在运行，我尝试手动发送数据（$_GET['']）并且它正在运行。我还用 alert('value='+value+'&id='+id...) 检查了 URL，所有变量都正常，但不会查询数据库。

如果您看到，我没有添加任何响应功能，从服务器回复。我只想发送这些数据并查询数据库。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:52:45.097

你可能会失踪

```
objAjax.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

考虑改进您的函数名称：`callAjax`不调用 Ajax，它返回对 XHR 对象的引用。称呼它`getXhr`或更像它实际在做的事情。

如果你对 jQuery 没问题，只需调用

```
function setValue(value, id, num, item){
    $.post('addview.php', 'value=' + val + '&id='+id+'&num='+num+'&item='+item);
    // or the cleaner version
    $.post('addview.php', {value: val, id: id, num: num, item:item});
} 
```

# git - 无法将 git 子模块添加到存储库

> ID：10418695
> 
> 赞同：6
> 
> 时间：2012-05-02T17:24:41.137
> 
> 标签：git, github, git-submodules, pyrocms

*（主要是一个 Git 问题，但可能与其他 PyroCMS 用户有关）*

我有一个 PyroCMS 的本地存储库 - 该存储库是主项目的 github 分支的克隆。我还有一个 PyroCMS 模块，它也是*该*项目的 github 分支的本地克隆。

我把它们都放在不同的目录中。

```
~/Dropbox/websites/pyrocmscommunity-test/
~/Dropbox/github/PyroDatabase/ 
```

我想将 PyroDatabase 添加为pyrocmscommunity-test 的**子模块**，这样我就可以从 github 拉取更新，跟踪我自己的更改等。

我试图通过转到工作树的顶部并执行以下操作来做到这一点：

```
git submodule add ../../github/PyroDatabase/ addons/shared_addons/modules/ 
```

但它没有正确完成：

```
Cloning into 'addons/shared_addons/modules/database'...
ssh_exchange_identification: Connection closed by remote host
fatal: The remote end hung up unexpectedly 
```

我不明白这一点，因为我没有指定 SSH 连接，我只是想使用本地存储库。它试图连接到什么，为什么？

另外，现在，每当我重复该命令时，我都会得到以下信息：

```
'addons/shared_addons/modules' already exists in the index 
```

但我不明白这一点，因为没有`.gitmodules`文件，也没有提到模块文件`.gitconfig`。

我做错了什么，我该如何重置？

谢谢，威廉

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T22:58:24.670

当为子模块位置指定相对 URL 时，Git 将其相对于`origin`当前项目的（此处为 Github）URL，而不是相对于文件系统上的项目位置。这是因为子模块是指向远程位置的永久指针。在这里，Git 尝试联系上两级的原始 github 存储库，这是一个不正确的 URL。

至于第二个错误Git has created an entry in the staging area in your index, and it must be remove (unstaged) with

```
git rm -r addons/shared_addons/modules 
```

然后使用克隆的绝对路径重试：

```
git submodule add $HOME/Dropbox/github/PyroDatabase/ addons/shared_addons/modules/ 
```

无论如何，将项目的本地克隆添加为自身的子模块很奇怪，因为子模块意味着包含项目的不同存储库。为什么不以标准 Git 方式跟踪本地和原始提交？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:41:47.837

你运行的是什么版本的 git？您可能无法再次运行该命令，因为您指定的目录结构已暂存。您可以像这样重置（小心使用此命令）：

```
$ git status # check what has been changed
$ git reset --hard HEAD # destroy all working copy changes 
```

调试 git 发生的事情的一个非常有用的方法是设置`GIT_TRACE=1`. 因此，一旦您像这样进行清理，请尝试再次运行该命令：

```
$ GIT_TRACE=1 git submodule add ../../github/PyroDatabase/ addons/shared_addons/modules/ 
```

# coldfusion - 如果您将 manifest="cache.manfest" 放在 .cfm 页面中会怎样？

> ID：10418703
> 
> 赞同：0
> 
> 时间：2012-05-02T17:24:58.217
> 
> 标签：coldfusion

我们正在开发一个平板电脑应用程序，我的同事有一个流氓想法：

> 如果您在 ColdFusion 页面的 html 标记上放置清单属性会怎样？如果用户无法访问服务器，它仍然有效吗？

我认为这很疯狂，但我想听听你们怎么说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:44:57.887

客户端不知道页面是如何生成的。他甚至不知道页面是否生成。因此，该页面像另一个页面一样被缓存。

如果您没有连接，可以使用一些 javascript 处理这种情况并提醒用户您无法与服务器通信。您可以简单地禁用应用程序或使用 localStorage 等...

# mongodb - MongoDB 的高级查询语言

> ID：10418711
> 
> 赞同：2
> 
> 时间：2012-05-02T17:25:20.180
> 
> 标签：mongodb, mongodb-query

RDBMS 的一大优势是 SQL 作为一种非常声明性和强大的查询语言。我知道 MongoDB 有一种查询语言，但它不包括连接。有没有人尝试为 MongoDB 制作一种高级查询语言

a) 处理不同集合的连接？

b) 通过查看集合中的索引和索引的基数来巧妙地处理连接——即模仿 SQL 中的查询计划？

似乎您应该能够编写更高级别的查询语言，使用 (b) 来巧妙地输出 Javascript 代码和执行 (a) 的 Mongo 本机查询的组合。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T17:49:52.017

**1）** MongoDB确实有“查询计划”。不过，它[的做法略有不同](http://www.mongodb.org/display/DOCS/Query+Optimizer)。它衍生出各种选项以并行运行相同的查询，并查看哪个首先完成，然后记住它并将其用作*编译计划*一段时间，然后再次重新运行测试以考虑数据的变化等。

**2)**跨集合加入将使 Mongo 跨不同节点运行散列和合并，这将减慢其他客户端的速度。不允许这样的查询并将其推送到应用程序显然是一个有意识的决定。您可以构建您的文档，以便您拥有所需的一切（因此[支持嵌套文档](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)），或者您在客户端中进行连接

最后但并非最不重要的一点是，有人尝试在 NoSQL 数据库中构建统一的查询语言[——UnQL——](http://www.unqlspec.org/display/UnQL/Home)但在面向列、面向文档、键值和图形数据库之间存在如此大的差异，所以人们可以做的事情太多了概括查询数据的过程。

*   [如何在 MongoDB 中执行等效的 SQL Join？](https://stackoverflow.com/questions/2350495/how-do-i-perform-the-sql-join-equivalent-in-mongodb)
*   [MongoDB和“加入”](https://stackoverflow.com/questions/4067197/mongodb-and-joins)

还有一些关于这个主题的信息：

*   [MongoDB 应该使用 SQL 作为查询语言吗？](http://blog.mongodb.org/post/447761175/should-mongodb-use-sql-as-a-query-language)
*   [使用 MongoDB 从 SQL 迁移到 MapReduce](http://rickosborne.org/blog/2010/02/infographic-migrating-from-sql-to-mapreduce-with-mongodb/)

# javascript - DOMAttrModified 不会触发

> ID：10418721
> 
> 赞同：2
> 
> 时间：2012-05-02T17:25:57.650
> 
> 标签：javascript, events, firefox, dom, javascript-events

当脚本修改元素（文本字段）时，我试图触发事件处理程序`input`。在 Internet Explorer 上，我可以使用该`onpropertychange`事件，但在 Firefox 和其他浏览器上没有这样的事件。因此，根据[W3C 文档](http://www.w3.org/TR/DOM-Level-2-Events/events.html)，该`DOMAttrModified`事件似乎完全符合我的要求。但它不会在`Firefox 11`.

这是一个重现问题的简单代码片段。我有一个输入文本字段和一个向`value`输入文本字段的属性添加字符的按钮。点击`add char`按钮应该会`DOMAttrModified`触发事件：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function addChar() {
                var q = document.getElementById("query");
                q.value += "X";
            }

            function loadevents() {
                var q = document.getElementById("query");
                q.addEventListener("DOMAttrModified", function() {alert("DOMAttrModified event!");
                }, false);
            }
        </script>
    </head>
    <body onLoad="loadevents()">
        <input type="text" id="query">
        <br>
        <input type="submit" value="add char" onclick="addChar()">
    </body>
</html> 
```

但事实并非如此。知道我做错了什么吗？（我知道 DOM Level 3**已弃用**此事件，但目前似乎没有可行的替代方案。据我所知，Firefox 11 仍然支持它。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:28:57.740

更改输入中的值不会触发`DOMAttrModified`事件，仅此而已..

您需要更改输入节点的属性，而不是**变量的****属性**。
这就像[两个 jQuery 函数之间的区别：`.prop`和`.attr`](https://stackoverflow.com/questions/5874652/prop-vs-attr)

读：

*   [哪个 HTMLElement 属性更改会生成 DOMAttrModified？](https://stackoverflow.com/q/9919594/601179)
*   [本次论坛讨论](http://forums.mozillazine.org/viewtopic.php?f=25&t=1983083)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:26:19.640

（重复我从[哪个 HTMLElement 属性更改生成 DOMAttrModified?](https://stackoverflow.com/questions/9919594/which-htmlelement-property-change-generates-domattrmodified)的回答，因为它与这个问题有关）：

Please also note that NO DOMAttrModified events will be fired when the 'disabled' attribute is set. So if your event is not firing, that could be the reason. This also goes for the IE-only 'onPropertyChange' event.

# performance - 与守护进程的高性能持续通信

> ID：10418726
> 
> 赞同：0
> 
> 时间：2012-05-02T17:26:17.483
> 
> 标签：performance, ipc, hardware-interface

我需要几个客户端程序（立体声 DSP 音频发生器），以便能够以大约 16kB/s 的数据速率与 I2C 总线上的外部外围设备进行连续双向通信，每 1ms 更新一次，所有这些都在 700MHz CPU 上运行。这些程序将需要同时访问读取和写入，但我不关心写入锁定。

我正在设想一个守护进程来管理原始 I2C 通信，客户端音频程序通过以下 IPC 选项之一与守护进程通信：

*   总线
*   伯克利/POSIX 套接字
*   内存映射文件

对于 DBUS，我有性能问题，对于 Berkeley/POSIX 套接字，我不确定如何处理多个客户端。同样重要的是不会发生锁定，因为守护进程通信必须与音频渲染发生在同一个线程中。

内存映射似乎适合这项任务。10 个字节就可以了，我需要 4 个字节用于输入，4 个字节用于输出，以某种方式告诉守护程序它现在应该写入输出字节，以及以某种方式告诉守护程序它当前应该不断更新输入字节。但据我了解，内存映射依赖于操作系统的缓冲，所以我不确定如果我的守护进程在我的客户端应用程序处于`read()`操作中间时更新输入字节会发生什么。

在我的场景中，进程间通信的最佳选择是什么？

# .net - GAC 范围：为什么它会覆盖本地程序集，我们能做些什么呢？

> ID：10418736
> 
> 赞同：3
> 
> 时间：2012-05-02T17:26:59.897
> 
> 标签：.net, visual-studio, gac

我今天花了一些时间与 GAC 斗争，因为它取代了我的应用程序目录中的本地程序集，我认为 GAC 会“排名”本地文件很奇怪。在几乎所有的开发案例中，本地范围都取代了全局范围。

为什么这样做？这似乎违反直觉。如果我有同一个程序集的多个构建（但使用不同的令牌）并且我想使用不在 GAC 中的那个，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:11:00.557

如果要使用特定版本的引用程序集，请在 Visual Studio 的属性编辑器中为选定的此引用程序集将“特定版本”设置为 True。

如果将其设置为 false，则 VS 应首先在 exe 文件附近的本地文件夹中搜索，除非 GAC 版本的程序集之前已被其他加载的程序集作为强类型依赖项加载。

# android - 从 MS SQL Server 填充对象列表

> ID：10418737
> 
> 赞同：0
> 
> 时间：2012-05-02T17:27:08.737
> 
> 标签：android, sql, list, jdbc

我有这个用户类（这是示例的简化版本，真实的有更多参数，但它们的实现方式相同）：

```
public class User {

    private int _userID;
    private String _fullName;

    public User(){

    }

    public User(int userID, String fullName){
        this._userID = userID;

        this._fullName = fullName;
    }

    int getUserID(){
        return this._userID;
    }

    String getFullName(){
        return this._fullName;
    }
    void setUserID(int userID){
        this._userID = userID;
    }

    void setFullName(String fullName){
        this._fullName = fullName;
    }
} 
```

我想从我的 MS SQL Server 中检索 Android 中此类对象的列表，我在连接器助手类（负责使用 JDBC 与服务器建立连接的类）中使用此方法：

```
public List<User> getUsers(int ID){

        java.sql.ResultSet result = null;
        List<User> users = new ArrayList<User>();
        User user = new User();
        try {
             connection = this.getConnection();
             if (connection != null) {

                    //QUERY
                    String statement = "SELECT * Users WHERE groupID = " 
                                    + ID;
                    Statement select = connection.createStatement();

                    //Calls Query
                    result = select.executeQuery(statement);
                    while (result.next()){
                        user.setUserID(result.getInt("UserID"));
                        user.setFullName(result.getString("FullName"));
                        System.out.println(result.getString("FullName"));

                        //Adds to the list
                        users.add(user);

                    }

                    result.close();
                    result = null;
                    closeConnection();
             } 
             else {
                    System.out.println("Error: No active Connection");
             }
         }  catch (Exception e) {
             e.printStackTrace();
            }

        return users;
    } 
```

根据我在每次迭代中使用的 System.out.println 从服务器中很好地检索数据，问题是列表总是充满关于我检索的最后一个用户的重复信息，以澄清：

如果我有用户A，B和C，当我读取用户A时，列表具有以下结构：[A]，当我读取用户B时，列表是：[B，B]，当我读取用户C时：[C，C ,C] 等。所以基本上列表中的所有对象都被最后一个读取的对象覆盖。

我已经为此苦苦挣扎了几个小时，希望有人能发现问题，因为我不能，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:31:42.900

您在循环之前实例化一个 User 对象，然后在每次迭代时修改相同的 User 对象。因此，您最终会在列表中添加 N 次相同的用户对象。您必须在每次迭代时重新创建一个新用户：

```
while (result.next()){
    User user = new User();
    user.setUserID(result.getInt("UserID"));
    ... 
```

# php - Joomla 媒体表单字段 - 仅图像

> ID：10418739
> 
> 赞同：0
> 
> 时间：2012-05-02T17:27:16.190
> 
> 标签：php, joomla

在 joomla 1.7 中，“媒体”类型的表单字段只允许使用图像，或者可以使用其他类型的媒体，如 pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:09:30.820

1.  你真的应该升级到 2.5.4+ 的 Joomla！1.6 -> 2.5 存在重大安全问题，已在 2.5.4 中修补。

2.  还有一种表单字段类型`file`- 您可以[在此处找到标准字段类型的列表](http://docs.joomla.org/Standard_form_field_types)。

3.  如果这无助于创建自定义字段类型并不太难 - 我们已经为独特的客户需求制作了几个，从[这篇文章开始做 Joomla！文档](http://docs.joomla.org/Creating_a_custom_form_field_type)。

# objective-c - iOS UIWebView - 捕获加载无效文件格式的异常

> ID：10418742
> 
> 赞同：5
> 
> 时间：2012-05-02T17:27:26.250
> 
> 标签：objective-c, ios, exception, exception-handling, uiwebview

我有一个 UIViewController 包含一个 UIWebView 我用来查看各种文档。有时，可能会尝试加载 UIWebView 不支持的文档（例如旧的 Excel 2.0 工作表）。目前这会导致调试窗口中的输出如下：

**异常：CPMessageException：文件格式无效。**

**异常 CPMessageException: (null)**

webViewDidStartLoad 方法会触发，但 webViewDidFinishLoad 或 didFailLoadWithError 都不会触发。

该错误不会使应用程序崩溃，但我想捕获此异常以向用户提供我自己的消息。有人可以建议如何捕获和处理这个吗？

非常感谢，乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:41:15.443

不幸的是 CPMessageException 是 Apple 私有框架的一部分，如果是办公文件，OfficeImport.framework。当框架接收到不可用的文件时会抛出此错误。

您的应用程序没有崩溃的原因是它可能是在导入代码本身中处理的。即使设置 NSSetUncaughtExceptionHandler 也不起作用（就像我过去尝试过的那样）。

解决这个问题的最好方法是使用 UIWebView 的 shouldStartLoadWithRequest 委托方法：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在这里，您可以先发制人地阻止文件被加载到 Web 视图中，并避免出现毫无头绪的空白屏幕。

（我不确定是否有办法即时读取 NSLog 输出，以便您可以监控它。但这可能不是正确的方法！）

更新：刚刚提交了一个关于此的错误。让我们看看苹果开发者对此有何评论。

# java - 如何在 playframework 2 中构建模块

> ID：10418743
> 
> 赞同：9
> 
> 时间：2012-05-02T17:27:31.010
> 
> 标签：java, playframework, playframework-2.0

[似乎我在http://www.playframework.org/](http://www.playframework.org/)上找不到关于为 playframework 2 构建模块的说明。

任何人都知道是否有这方面的文档或构建模块所需的步骤？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T20:26:28.317

这个链接是迄今为止我见过的最好的指南。

[http://java.dzone.com/articles/writing-modules-play-2-get](http://java.dzone.com/articles/writing-modules-play-2-get)

作者 Steve 使用 Play 模块已经有一段时间了，并且基于他的 Play 1.x 发布了一些 Play2 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-26T03:38:34.607

我也没有找到任何好的文档。所以，我自己想通了，并记录了这篇文章中的步骤。它针对 Play 2.5 及更高版本。它是在 Java 中！

[https://medium.com/confest/writing-a-play-module-e8cc95cb9285#.y7zt92vpa](https://medium.com/confest/writing-a-play-module-e8cc95cb9285#.y7zt92vpa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T18:30:19.800

在撰写此答案时没有官方文档。但是这里有指向 playframework 网站的文档链接：[http ://www.playframework.org/documentation/2.0.3/Modules](http://www.playframework.org/documentation/2.0.3/Modules)

从上面的链接：

> 可以在[http://www.objectify.be/wordpress/?p=363](http://www.objectify.be/wordpress/?p=363)和[http://developer.vz.net/2012/03/16/writing-a-上找到描述编写模块过程的博客文章play-2-0-模块/](http://developer.vz.net/2012/03/16/writing-a-play-2-0-module/)

第二个环节其实就是如何构建插件，我相信它只是一个实现特定接口的模块，以提供一种在启动和关闭期间挂钩到框架的方法。

此外，上一个答案中的指南似乎也可能很好：http: [//java.dzone.com/articles/writing-modules-play-2-get](http://java.dzone.com/articles/writing-modules-play-2-get)

# javascript - 使用 jQuery 切换内容

> ID：10418745
> 
> 赞同：0
> 
> 时间：2012-05-02T17:27:43.773
> 
> 标签：javascript, jquery, html

我有一个链接“显示更多...”。当我单击它时，我会切换带有详细信息的 div 的可见性。我想知道当div切换发生时是否有一种简单而漂亮的方法来切换“显示更多...”和“隐藏详细信息”之间的链接内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:34:34.733

如果您只想切换文本，这里有一个简单的 jQuery 示例，基于使用 SPAN 作为标签。

```
$('#SpanLabel').html($('SpanLabel').text() == 'Show More...' ? 'Hide details' : 'Show More...'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:34:56.070

使用 html 5 [http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_summary](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_summary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:36:07.827

我以前使用过这个并取得了一些成功：

[http://plugins.learningjquery.com/expander/index.html](http://plugins.learningjquery.com/expander/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T19:10:25.667

您可以使用 CSS 规则更改正在显示的内容：http: [//jsfiddle.net/8G6fm/](http://jsfiddle.net/8G6fm/)

我想优点是如果您想进一步设置样式，您可以添加样式（例如，使用指向左/下的箭头的背景图像，具体取决于它是否打开）。

# php - php mysql 购物车

> ID：10418756
> 
> 赞同：1
> 
> 时间：2012-05-02T17:28:30.557
> 
> 标签：php, cart, shop

你好最近我读了一个关于购物车 [的教程点击这里](http://www.insanelyart.com/tutorial.php?id=168#)！我注意到对于每个用户，它将购物车中的物品存储在数据库中。我的问题是可以将易失性购物车数据存储在数据库中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:33:45.520

我认为这是最好的方法，另一个好的方法是将所有内容存储在会话中，例如作为 json 编码的数组。在几个项目上都进行了测试，它们几乎没有时间差（我不考虑 3-5 毫秒）。我建议实施对您来说更方便的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:37:46.693

根据您的情况，您是否需要存储“易失性”数据？例如：可能需要记住用户购物车的内容，因此如果用户关闭浏览器并稍后返回，您可以检索以前的购物车。它也可能对统计非常有用。为了避免大量数据的开销，您可以删除过期的购物车。

另一种方法是将其存储到会话中，并且内容存在直到会话销毁，可能更容易实现，更快（如果不存储在数据库中）。

# android - 在 WebView 中进行双击工作

> ID：10418757
> 
> 赞同：1
> 
> 时间：2012-05-02T17:28:40.267
> 
> 标签：android, webview, overriding, double-click, simulate

我有一个网站，它有一些双击功能，所以当你在浏览器中双击它时，它只会缩放。所以我正在构建一个 WebView，这样我就可以跳过双击并让它做出应有的反应。

```
public class myWebView extends Activity{

GestureDetector gs = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView engine = (WebView) findViewById(R.id.web_engine);
    engine.getSettings().setJavaScriptEnabled(true);
    engine.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    engine.getSettings().setSupportMultipleWindows(true);
    engine.setWebChromeClient(new WebChromeClient() {
        @Override
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
                    return super.onJsAlert(view, url, message, result);
           }
    });
    engine.setWebViewClient(new WebViewClient() {
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    view.loadUrl(url);
                    return true;
                }
            });

    engine.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gs == null) {
                gs = new GestureDetector(
                        new GestureDetector.SimpleOnGestureListener() {
                            //overrides the double click
                            @Override
                            public boolean onDoubleTapEvent(MotionEvent e) {
                                // SOME CODE THAT SIMULATES A DOUBLE CLICK
                                return true;
                            }
                        });
            }
            gs.onTouchEvent(event);
            return false;
        }
    }); 
    engine.loadUrl("http://www.google.com");
}
} 
```

因此，函数 onDoubleTapEvent(MotionEvent e) 将在双击事件中执行介于两者之间的任何操作。 [上面的代码也主要是感谢 Cehm](https://stackoverflow.com/a/9294572/1366422)。

所以此时我需要欺骗它执行双击。我可以在那里模拟几次点击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T07:58:54.077

尝试一次：

```
private GestureDetector gs = null;

private OnTouchListener onTouch = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        if (gs == null) {
            gs = new GestureDetector(
                    new GestureDetector.SimpleOnGestureListener() {
                        @Override
                        public boolean onDoubleTapEvent(MotionEvent e) {

                            //Double Tap
                            snapWebView.zoomIn();//Zoom in
                            return true;
                        }

                        @Override
                        public boolean onSingleTapConfirmed(MotionEvent e) {

                            //Single Tab
                            snapWebView.zoomOut();// Zoom out
                            return false;
                        };
                    });
        }

        gs.onTouchEvent(event);

        return false;
    }
}; 
```

最后，将 OnTouch 事件设置为 WebView：

```
webView.setOnTouchListener(onTouch); 
```

查看详细信息：[如何在 WebView 中进行双击？](http://thinkandroidsimple.blogspot.com/2014/01/android-snippets-double-click-webview.html)

# powershell - 使用哈希表重命名文件

> ID：10418759
> 
> 赞同：1
> 
> 时间：2012-05-02T17:29:13.620
> 
> 标签：powershell

我有以下哈希表。

```
$m = @{
    "AAA" = "XX";
    "BBB" = "YY";
    "CCC" = "ZZ";
    ....
} 
```

我想将名称以“AAA”开头的文件重命名为“XX....”，“BBB”为“YY....”等。例如，“AAA1234.txt”将重命名为“XX1234” 。文本文件”。

如何在 Powershell 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:40:45.807

这段代码对我有用：

```
$m = @{"AAA" = "XX"; "BBB" = "YY"}
$files = gci *.txt
$m.GetEnumerator() | % {
    $entry = $_ # save hash table entry for later use
    $files | ? { $_.Name.StartsWith($entry.Key) } | 
        % {
            $trimmed = $_.Name.Substring($entry.Key.length) # chops only the first occurence
            $newName = $entry.Value + $trimmed
            $_ | Rename-Item -NewName $newName        
        }        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T03:55:10.007

太好了..清楚地解释了。但这将重命名完整的文件夹名称..直截了当。

```
$m = @{"AA" = "XX"; "BB" = "YY"}
$files = Get-ChildItem -Path C:\test\ -Directory
$m.GetEnumerator() | %{Rename-Item "C:\test\$($_.Key)" -NewName "C:\test\$($_.value)" -Force
} 
```

# mysql - 阻止用户访问管理区域

> ID：10418763
> 
> 赞同：1
> 
> 时间：2012-05-02T17:29:35.000
> 
> 标签：mysql, php

再会，

我的管理控制面板 PHP 页面出现代码错误。

我想阻止任何其他用户访问此页面，除非他的 job_title= admin。

它可以工作，但即使是管理员 himslef 也会再次重定向回登录页面！

这是代码

```
<?php
include('db.php');
?>
<?php
// Inialize session
@session_start();
ob_start();
// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['name']) || ($_SESSION['job_title'] != "admin")) {
header('Location: index.php');
}
ob_flush();
?>
>?

<!-- STARTING HTML FORMAT !-->

?> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:39:04.330

试试这个，如果还有问题，请告诉我。

```
$_SESSION['name'] = 'dennis';
$_SESSION['job_title'] = 'admin';
if (!isset($_SESSION['name']) || (!isset($_SESSION['job_title']) ? false: ($_SESSION['job_title'] !== 'admin'))) {
    echo 'Redirecting';
} else {
    echo 'You\'re good! Not redirecting!';
} 
```

这可能是一种更容易理解的方式，只需放入一个函数中即可。

```
$_SESSION['name'] = 'dennis';
$_SESSION['job_title'] = 'admin';

if (!isset($_SESSION['name']) || !isBoss()) {
    echo 'Redirecting';
} else {
    echo 'You\'re good! Not redirecting!';
}

function isBoss() {
    if (isset($_SESSION['job_title']))
        if ($_SESSION['job_title'] === 'admin')
            return true;
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:16:00.297

我认为您的问题是 fubar 换行符 :) 添加了登录页面参考，如果登录失败，则取消设置您检查的会话变量。

**非常**小心放置`<?php ?>`标签的位置 - 以及在 .inc 文件中，例如 db.php 包含 - 您可以省略`?>`最后一行的结束标签以避免意外 ENTER，然后 CTRL + S 失败，潜入不需要的换行符在您的输出缓冲区（ob）中。如果 ob_start 被激活，则在您选择或脚本结束之前不会从服务器写入任何内容。否则，如果不是，则默认为每个 \n 将刷新输出并启动有效负载的内容部分。

登录.php：

```
<?php
session_start(); // put this on top-most line in your script
$ok = check($_POST['user'], $_POST['pass']);
if($ok) {
 $user = db_get_user_creds($_POST['user']);
 $_SESSION['name'] = $user['name'];
 $_SESSION['job_title'] = $user['job_title'];
} else {
 // session_unset();
 unset($_SESSION['name']);
 unset($_SESSION['job_title']);
}
?> 
```

管理员.php

```
<?php
session_start(); // put this on top-most line in your script
// or, use ob_start at the very first line
// (with no widespace what so ever written out before it)

include('db.php');
?> I am writing out a newline here, session / header section is going to become unstable
<?php
// Inialize session
// @session_start(); moved up top
ob_start();
// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['name']) || ($_SESSION['job_title'] != "admin")) {
header('Location: index.php');
}
ob_flush();
?> 
```

*请参阅“我在这里写出换行符”位*

更深一点的兔子洞去；通信流程是这样的：

```
1) HEADERS such as
Connection: keep-alive\r\n
Content-Type: text/html\r\n    (etc)
2) DOUBLE NEWLINE (one newline with no previous chars on that line)
\r\n
3) CONTENTS
Body
Of Page 
```

# android - 删除选中的 ListView 项目

> ID：10418764
> 
> 赞同：0
> 
> 时间：2012-05-02T17:29:35.087
> 
> 标签：android, checkbox, android-listview

我正在尝试删除`ListView`已检查的项目。如果只检查了一个项目，但如果有两个或三个，则应用程序强制关闭。在错误日志上它说：

> E/AndroidRuntime(2173): java.lang.IndexOutOfBoundsException: 位置 2 无效，大小为 2

当列表中有三个项目并删除 2\. 任何人都可以帮助纠正这个错误吗？这是代码：

```
 public void delete() {
    btnDelete = (Button) findViewById(R.id.btnDelete);
    btnDelete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            for (int i = 0; i < list.getChildCount(); i++) {
                View view = list.getChildAt(i);

                 CheckedTextView cv = (CheckedTextView) view.findViewById(R.id.checkList);
                 if(cv.isChecked()){
                    Log.i("DELETE", adapter.getItem(i).toString()+"   "+cv.toString());

                     adapter.remove(adapter.getItem(i));
                 }
                 adapter.notifyDataSetChanged();

            }
           Toast.makeText(getApplicationContext(), "Selected Items Cleared", Toast.LENGTH_SHORT).show();
       }
    });
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:34:34.703

问题出在你的 for 循环上。您正在 for 循环中迭代列表视图，`list.getChildCount()`其中不正确正确读取 Api 文档，将其替换为`adapter.getCount();`它将解决问题。

# java - OverlayLayout 似乎不是分层的

> ID：10418771
> 
> 赞同：1
> 
> 时间：2012-05-02T17:30:02.933
> 
> 标签：java, swing, layout, overlay

我正在尝试使用 OverlayLayout 将一小部分文本与 JTabbedPane 的顶部选项卡对齐，但它似乎不起作用。

作为一个注释，我使用的是 JLayeredPane，但是我需要 TabbedPane 来填充父组件，而且如果没有一些麻烦，它似乎无法工作。

无论如何，似乎当您不理会对齐方式时，行为会按预期工作（按钮漂浮在背景上）。但是，当使用任何对齐方式时（据我了解，这是您使用此布局管理器设置位置的方式），它会将背景缩小到按钮应位于的边缘。

这是一些示例代码。

```
import java.awt.Color;
import java.awt.Container;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.OverlayLayout;

public class Test {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        Container c = frame.getContentPane();
        c.setLayout(new OverlayLayout(c));

        JButton button = new JButton("Test");
        JPanel background = new JPanel();
        background.setBackground(Color.BLUE);
        background.setSize(500, 500);
        // toggle the following between 0 and 100 to see the described behavior
        background.setAlignmentX(100);

        frame.add(background);
        frame.add(button);

        frame.pack();
        frame.setSize(800, 800);
        frame.setVisible(true);

    }
} 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:34:16.587

您可以使用`setGlassPane`将窗格放在框架中的其他窗格的方法。签入[http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:53:34.023

*   错误是使用 setBound() 对这个 LayoutManager 来说是无用且适得其反的

*   [在 API 中使用已实现](http://docs.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html)的方法`setMaximumSize()`

*   [那么没有问题](http://www.java2s.com/Tutorial/Java/0240__Swing/OverlayLayoutforlayoutmanagementofcomponentsthatlieontopofoneanother.htm)

* * *

如果您想真正创建覆盖另一个的 JComponents，您可以查看

*   JLayeredPane --> 已过时，您最多只能使用 6.th LayeredPanes

*   JXLayer for Java6 或直接实现为 Java7 中的 JLayer

*   对于简单的叠加，您也可以使用 GlassPane，

# ruby-on-rails - Rails 将附加参数传递给模型

> ID：10418773
> 
> 赞同：5
> 
> 时间：2012-05-02T17:30:24.587
> 
> 标签：ruby-on-rails, ruby, activerecord, model

在控制器中我有一个创建动作

```
 def create

    params[:note]
    @note = current_user.notes.new(params[:note])

      if @note.save
        respond_with @note, status: :created
      else
        respond_with @note.errors, status: :unprocessable_entity
      end
  end 
```

我想将另一个名为 current_user 的参数传递给模型，如何做到这一点以及如何在模型方法中检索传递的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:48:59.387

```
@note = Note.new(params[:note].merge(:user_id => current_user.id)) 
```

但也许这不是最好的方法，看看这个：[Adding variable to params in rails](https://stackoverflow.com/questions/4350499/adding-variable-to-params-in-rails)

如果您想访问模型中的 current_user，请参阅：[Rails 3 devise, current_user is not access in a Model ？](https://stackoverflow.com/questions/3742785/rails-3-devise-current-user-is-not-accessible-in-a-model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:42:14.093

通常，您使用 hidden_​​field 来执行此操作。

因此，在您的创建视图中，您将添加 current_user 作为隐藏字段。

```
<%= form_for @note do |f| %>
  # all your real fields
  <%= f.hidden_field :current_user current_user %>
<% end %> 
```

然后在创建控制器中 params[:note][:current_user] 将被定义，并添加到您的模型中，假设您的模型有一个名为“current_user”的属性

# c# - 在 RavenDb 中使用子集合映射减少 2 个集合

> ID：10418778
> 
> 赞同：6
> 
> 时间：2012-05-02T17:30:52.043
> 
> 标签：c#, mapreduce, ravendb

我在 RavenDb 中存储了 2 种不同的对象类型，它们是父/子类型关系，在 JSON 中是这样的：

```
Account/1
{        
    "Name": "Acc1",
}

Items/1
{
    "Account": "Account/1",
    "Value" : "100",
    "Tags": [
       "tag1",
       "tag2"]
}

Items/2
{
    "Account": "Account/1",
    "Value" : "50",
    "Tags": [
       "tag2"]
} 
```

请注意，我不想将这些存储在同一个文档中，因为一个帐户可能有数千个项目。

我正在尝试编写一个 map/reduce 索引，它会返回如下内容：

```
{
    "Account": "Acc1",
    "TagInfo": [
        { "TagName" : "tag1",
          "Count" : "1",  //Count of all the "tag1" occurrences for acc1
          "Value" : "100" //Sum of all the Values for acc1 which are tagged 'tag1'
        },
        { "TagName" : "tag2",
          "Count" : "2",  //Two items are tagged "tag2"
          "Value" : "150"
        }]
} 
```

即所有不同标签名称的列表以及每个标签的数量及其值。

我想我需要使用多映射将 Account 和 Items 集合映射在一起，但我无法弄清楚减少部分来创建结果的“TagInfo”部分。

这是可能的，还是我在 Raven 中建模这一切都错了？

**编辑：**

我想从此查询中检索的类看起来像这样：

```
public class QueryResult
{
    public string AccountId {get;set;}
    public TagInfo Tags {get;set;} 
}

public class TagInfo
{
    public string TagName {get;set;}
    public int Count {get;set;}
    public int TotalSum {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T19:14:32.367

您不能为此使用 Multi Map/Reduce 索引，因为您希望标签上的一张地图和帐户上的另一张地图。它们没有共同的属性，所以你不能在这里有一个多映射/减少。

但是，您可以改用 TransformResult。这是如何做到的：

```
public class Account
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class Item
{
    public string Id { get; set; }
    public string AccountId { get; set; }
    public int Value { get; set; }
    public List<string> Tags { get; set; }
}

public class TagsWithCountAndValues : AbstractIndexCreationTask<Item, TagsWithCountAndValues.ReduceResult>
{
    public class ReduceResult
    {
        public string AccountId { get; set; }
        public string AccountName { get; set; }
        public string Tag { get; set; }
        public int Count { get; set; }
        public int TotalSum { get; set; }
    }

    public TagsWithCountAndValues()
    {
        Map = items => from item in items
                        from tag in item.Tags
                        select new
                        {
                            AccountId = item.AccountId,
                            Tag = tag,
                            Count = 1,
                            TotalSum = item.Value
                        };
        Reduce = results => from result in results
                            group result by result.Tag
                            into g
                            select new
                            {
                                AccountId = g.Select(x => x.AccountId).FirstOrDefault(),
                                Tag = g.Key,
                                Count = g.Sum(x => x.Count),
                                TotalSum = g.Sum(x => x.TotalSum)
                            };
        TransformResults = (database, results) => from result in results
                                                    let account = database.Load<Account>(result.AccountId)
                                                    select new
                                                    {
                                                        AccountId = result.AccountId,
                                                        AccountName = account.Name,
                                                        Tag = result.Tag,
                                                        Count = result.Count,
                                                        TotalSum = result.TotalSum
                                                    };
    }
} 
```

稍后，您可以像这样查询：

```
var results = session.Query<TagsWithCountAndValues.ReduceResult, TagsWithCountAndValues>()
    .Where(x => x.AccountId == "accounts/1")                        
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:27:32.303

好的，所以我想出了一种以丹尼尔的回答为基础的可接受的方式来做到这一点，所以我会在这里为任何未来的旅行者（可能是我自己！）记录下来。

我从尝试为每个帐户返回一个结果更改为每个帐户/标签组合一个结果，因此索引必须更改如下（注意`group by`在`reduce`2 个属性上）：

```
public class TagsWithCountAndValues : AbstractIndexCreationTask<Item, TagsWithCountAndValues.ReduceResult>
{
    public class ReduceResult
    {
        public string AccountId { get; set; }
        public string AccountName { get; set; }
        public string TagName { get; set; }
        public int TagCount { get; set; }
        public int TagValue { get; set; }
    }

    public TagsWithCountAndValues()
    {
        Map = items => from item in items
                       from tag in item.Tags
                       select new ReduceResult
                       {
                           AccountId = item.AccountId,
                           TagName = tag,
                           TagCount = 1,
                           TagValue = item.Value
                       };

        Reduce = results => from result in results
                            where result.TagName != null
                            group result by new {result.AccountId, result.TagName}
                            into g
                            select new ReduceResult
                                       {
                                           AccountId = g.Key.AccountId,
                                           TagName = g.Key.TagName,
                                           TagCount = g.Sum(x => x.TagCount),
                                           TagValue = g.Sum(x => x.TagValue),
                                       };

        TransformResults = (database, results) => from result in results
                                                  let account = database.Load<Account>(result.AccountId)
                                                  select new ReduceResult
                                                             {
                                                                 AccountId = result.AccountId,
                                                                 AccountName = account.Name,
                                                                 TagName = result.TagName,
                                                                 TagCount = result.TagCount,
                                                                 TagValue = result.TagValue,
                                                             };
    }
} 
```

和以前一样，查询这只是：

```
var results = session
    .Query<TagsWithCountAndValues.ReduceResult, TagsWithCountAndValues>()
    .ToList(); 
```

然后可以通过内存中的 LINQ 查询将其结果转换为我最初想要的对象。此时可以返回的结果数量相对较少，因此在客户端执行此操作很容易接受。LINQ 语句是：

```
var hierachicalResult = from result in results
                        group new {result.TagName, result.TagValue} by result.AccountName
                        into g
                        select new
                        {
                            Account = g.Key,
                            TagInfo = g.Select(x => new { x.TagName, x.TagValue, x.TagCount })
                        }; 
```

这为每个帐户提供了一个对象，并带有一个子`TagInfo`对象列表 - 每个唯一标签一个。

# ms-access - 需要在 access 2007 中刷新基于子表单的列表框选择

> ID：10418781
> 
> 赞同：0
> 
> 时间：2012-05-02T17:30:54.383
> 
> 标签：ms-access, ms-access-2007

**前言：**我有一个带有标签的表单。在其中一个选项卡中，我有一个列表框、一个按钮和一个子表单。列表框由两个表填充并具有绑定列。

**需要：**我需要子表单来编辑列表框所基于的表之一的现有记录，并在单击按钮时将记录附加到同一个表中。子表单将链接到列表框的非绑定列。请帮助..我在Vb中尝试了一些东西但无法完成..

——车谷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:30:09.803

我不确定我是否理解正确，但如果您想在列表框中选择一行，编辑基础表中的相应记录，然后保存记录并更新列表框，您可以按照这些思路工作：列表框应该不被链接，子表单也不应该。创建过程

```
Sub UpdateSubform()
  subform![id]=listbox!changetableID]
End sub 
```

在窗体的 OnLoad 事件和列表框的 OnChange 事件中调用此过程

在子窗体的 afterUpdate 事件中：

```
 Private Sub Form_AfterUpdate()
    me.parent.requery
  End Sub 
```

我自己没有检查这一点，因为我无法访问 - 但它应该按照这些思路工作。

如果那不是您要查找的内容，请编辑您的帖子并至少发布列表框中的信息以及您的子表单应链接到的位置。

# php - 在函数声明的签名中在参数名称之前指定类名称有什么影响？

> ID：10418782
> 
> 赞同：2
> 
> 时间：2012-05-02T17:30:57.147
> 
> 标签：php

有什么区别：

```
public function init(a_class_name $classObj) 
```

和

```
public function init($classObj) 
```

不同之处在于示例 1 指定了我得到的对象类型。我的问题更多：php 是否仍然通过引用传递对象（默认行为）或者示例 1 是一些奇怪的克隆对象的快捷方式。我之所以这么问，是因为在更严格的语言（C、Java）中，示例 1 非常简单（也是唯一可行的示例）。在 PHP 中不是很清楚，这两种方法都在 PHP 文档中的不同位置使用。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:33:12.457

这称为 aa[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)。

> PHP 5 引入了类型提示。函数现在可以强制参数为对象（通过在函数原型中指定类的名称）、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。

-- [http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

在这两种情况下（有和没有类型提示），对象都是通过引用传递的。那不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:34:14.517

据我所知，a_class_name 可以是**数组**类型或**类**或**接口**名称。它只是验证针对该规则给出的形式参数，就像 instanceof 一样。

此功能不适用于 int、bool、string 等简单类型...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:34:37.423

不同之处在于，对于第一个，您只能将 a_class_name 类型的对象传递给 init 方法，但对于第二个，您可以传递任何类型（int、string...等）

# php - php表单列表

> ID：10418785
> 
> 赞同：0
> 
> 时间：2012-05-02T17:31:13.920
> 
> 标签：php, javascript, html, forms

我在 php 脚本中有以下代码

```
foreach( $results as $i => $value ){ ?>
    <li><form action="getDetail.php" id="detailForm<?= $i ?>" >
    <input name="application" value="myTemplate" type="hidden" />
    <input name="user" value=<?= $value->publisherID ?> type="hidden" />
    <a href="javascript:document.getElementById('detailForm<?= $i ?>').submit();" >
    <div class="row" style="padding-left: 10px;"><?= $value->publisherName ?></div>
    </a></form></li>
<?php } 
```

它的工作，但我想知道我怎么能把这个更好

删除所有表单 ID 并放置更通用的内容，例如

```
<a href="javascript:$(this).parents('form').submit();" > 
```

这不起作用

也没有：

```
<a href="javascript:$('#detailForm<?= $i ?>').submit();" > 
```

（给出这个 jquery 错误-> 未捕获的错误：语法错误，无法识别的表达式：）；'））

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:35:51.270

我想也许 parents() 函数会返回一个列表，请尝试这样做：

```
<a href="javascript://" onclick="$(this).closest("form").submit(); return false"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:42:13.577

在 for each 循环结束时，我会执行 $i++ 以便您的 id 是唯一的

如果你想拥有一个语义正确的网页，你需要在你的输入中有 id。

关于重写代码，如果您希望 jquery 处理您的代码，例如使用 json，您可以使用以下代码执行某些操作

```
$(document).ready(function() {
    $('.preloader<?php echo $i; ?>').html('<img src="ajax-loader.gif" />'); 
    $.post('post.php', $("#detailForm<?php echo $i; ?>").serialize(),
        function(data){
            $('#returnData<?php echo $i; ?>').html(data.returnData);
            console.log(data);
        },'json');

}); 
```

希望它有所帮助，如果我的想法和你一样。

# mysql - mySQL 多重交叉引用选择查询

> ID：10418791
> 
> 赞同：1
> 
> 时间：2012-05-02T17:31:42.880
> 
> 标签：mysql

我正在尝试选择存储在不同表列中的产品名称作为 ID 列表。有 20 列要查找，所以我的正常方法会进行大量查询。有人可以建议一个简单的方法来做到这一点吗？

```
Table1:
id | productName

Table2
id | p1 | p2 | p3 | p4... up to p20 
```

p1 -​​ p20 每个都包含 table1 中产品的 ID 号

我需要在table2中选择行，将p1-p20替换为table1中对应的productName

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:34:46.830

> 有人可以建议一个简单的方法来做到这一点吗？

我想这是一个*简单*的方法：

```
SELECT 
    Table2.id,
    T1.productName,
    T2.productName,
    T3.productName,
    -- etc...
FROM Table2
JOIN Table1 T1 ON Table2.p1 = T1.id
JOIN Table2 T2 ON Table2.p1 = T2.id
JOIN Table3 T3 ON Table2.p1 = T3.id
-- etc... 
```

是的，这是一个巨大的查询，但它很简单。

* * *

您可能需要重新考虑您的数据库设计。这里有一个建议：

```
Table1:
id | productName

Table2
id | index | productid
1    1       p1
1    2       p2
1    3       p3
...etc 
```

像这样查询：

```
SELECT id, index, productName
FROM Table2
JOIN Table1
ON Table2.productid = Table1.id 
```

# android - Android - 条码扫描器

> ID：10418792
> 
> 赞同：1
> 
> 时间：2012-05-02T17:31:44.173
> 
> 标签：android, barcode-scanner

我需要创建一个应用程序，其中一个功能将具有条形码扫描仪。我正在寻找一些代码示例来制作条形码扫描仪，但我没有找到任何完整的示例代码。

我唯一发现的是一个适用于 Zxing 应用程序的代码示例。但我不想执行任何辅助应用程序。我想要多合一。

有人知道一些例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T18:21:10.497

ZXing是开源的！如果您真的想实现自己的条形码扫描仪，请查看源代码。

[你可以在这里](http://code.google.com/p/zxing/source/browse/trunk)在线浏览代码，它被许可为 Apache License 2.0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:56:59.380

Zxing 有一个很棒的基于 Intent 的 API，旨在用作辅助应用程序。我建议检查用户是否安装了 Zxing 应用程序，如果没有，将他们重定向到 Google Play 商店进行下载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-04T06:04:03.353

我知道我在这里回答已经很晚了，但是所有人都在寻找这个问题的更新答案，不再需要依赖第三方 API，Google通过 Google Play Services 7.8提供[条形码扫描 API 。](http://android-developers.blogspot.in/2015/08/barcode-detection-in-google-play.html)有关更多信息，请参阅[CodeLabs](https://search-codelabs.appspot.com/codelabs/bar-codes#1)、[文档](https://developers.google.com/vision/?utm_campaign=barcode-815&utm_source=dac&utm_medium=blog)、[Github 示例](https://github.com/googlesamples/android-vision)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T22:04:37.573

如果你想在你的应用程序中实现条码扫描器而不依赖于其他应用程序，你可以使用*ZXing Android Embedded*，你只需要在你的 gradle 依赖项中声明它的依赖项并在你的应用程序中使用它的功能。

要使用它，请将以下内容添加到您的 build.gradle 文件（项目/模块）中：

```
repositories {
    jcenter()
}

dependencies {
    compile 'com.journeyapps:zxing-android-embedded:3.2.0@aar'
    compile 'com.google.zxing:core:3.2.1'
    compile 'com.android.support:appcompat-v7:23.1.0'   // Version 23+ is required
}

android {
    buildToolsVersion '23.0.2' // Older versions may give compile errors
} 
```

现在在您的代码中，您以这种方式开始扫描活动：

```
public void scanBarcode() {
    IntentIntegrator integrator = new IntentIntegrator(this);
    integrator.setDesiredBarcodeFormats(IntentIntegrator.ONE_D_CODE_TYPES);
    integrator.setPrompt("Scan the barcode");
    integrator.setCameraId(0);  // Use a specific camera of the device
    integrator.setBeepEnabled(false);
    integrator.setBarcodeImageEnabled(true);
    integrator.initiateScan();        
} 
```

并以这种方式处理结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
    if (scanResult != null && scanResult.getContents() != null) {
        String content = scanResult.getContents().toString();
        // content = this is the content of the scanned barcode

        // do something with the content info here
    }
} 
```

更多信息可以在*ZXing Android Embedded* github repo 中找到，链接如下。

来源：[https ://github.com/journeyapps/zxing-android-embedded](https://github.com/journeyapps/zxing-android-embedded)

# android - 防止活动被破坏

> ID：10418793
> 
> 赞同：14
> 
> 时间：2012-05-02T17:31:47.227
> 
> 标签：android, android-activity, android-camera-intent, android-ondestroy

我正在从我这样称呼的活动向相机发送意图：

```
 Intent testphoto = new Intent(Dashboard.this,CameraHandler.class);
 startActivity(testphoto); 
```

在`CameraHandler`课堂上，我称相机为：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(intent, 0); 
```

但是在类中`onActivityResult`调用之前`CameraHandler`，活动被破坏了。有没有办法防止这种情况发生？

找到答案：我`noHistory="true"`在我的中`AndroidManifest`，这使得操作系统在结果之前破坏了活动。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-11-17T22:55:42.340

确保您没有打开“不保留活动”开发人员设置，因为它会破坏您要离开的活动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:46:52.427

您不必担心调用`Activity`时调用被破坏`startActivityForResult()`，因为它根本不会改变预期的行为（即无论父活动是否被破坏，子活动都会记住将结果传递回父活动） . 看到这个[**帖子**](https://stackoverflow.com/q/10319330/844882)。

另请注意，虽然有时需要防止`Activity`s 被销毁（即配置更改等），但通常您希望不理会`Activity`生命周期，让系统`Activity`为您管理后台 s。一旦你启动一个新的`Activity`，你不应该明确地阻止以前`Activity`的 s 被破坏。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-03-04T07:16:45.367

您必须在清单中提及

```
 android:persistent="true" 
```

下面的SO帖子回答了同样的问题

[如何通过 BACK 键使活动停止而不是被销毁？](https://stackoverflow.com/questions/6791493/how-to-make-an-activity-stop-rather-then-be-destroyed-from-the-back-key/35789879#35789879)

[如何防止 onPause() 之后调用 onDestroy()？](https://stackoverflow.com/questions/8557255/how-to-prevent-call-of-ondestroy-after-onpause/35789825#35789825)

[尽可能长时间地防止活动被破坏](https://stackoverflow.com/questions/22168287/prevent-activity-from-being-destroyed-as-long-as-possible/35789751#35789751)

# linux - 如何在多个主机上使用 ssh 和 xargs 运行 bash 脚本而不将脚本复制到每个主机？

> ID：10418796
> 
> 赞同：3
> 
> 时间：2012-05-02T17:31:50.543
> 
> 标签：linux, bash, shell, ssh, xargs

如何在多个主机上使用 ssh 和 xargs 运行 bash 脚本而不将脚本复制到每个主机？

这行得通，
ssh host1.com bash -s < ~/httpd-conf/weblogrotate.sh

这行不通，
cat webserver.hosts | xargs -I % ssh % bash -s < ~/httpd-conf/weblogrotate.sh
tcsh：不明确的输入重定向。

猫 webserver.hosts
host1.com
host2.com
host3.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:52:23.430

在 bash 中：

```
while read host; do
   ssh $host bash -s < ~/httpd-conf/weblogrotate.sh &
done < webserver.hosts 
```

这也并行运行它们。

我相信你也可以在 tcsh 中做到这一点，但我不熟悉那个 shell 的语法。

或者，您也可以使用 GNU 并行而不是 xargs，它通过 ssh 远程执行到远程主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:00:57.537

You're looking for [DSSH](http://bashcurescancer.com/dssh-executing-an-arbitrary-command-in-parallel-on-an-arbitrary-number-of-hosts.html). It's a distributed terminal. Execute command once, it will be executed across all of the hosts.

A hosts file is used

```
$ cat hosts
mojito
-l noland kodiak
mojito
kodiak
-C mojito
-i /home/noland/.ssh/id_rsa kodiak 
```

Running a command

```
$ ./dssh.sh "uptime" < hosts
mojito:O:0:19:16:45 up 3 days, 14 min,  5 users,  load average: 0.22, 0.22, 0.20
kodiak:O:0:13:24:00 up 20:00,  1 user,  load average: 0.42, 0.16, 0.05
mojito:O:0:19:16:45 up 3 days, 14 min,  5 users,  load average: 0.22, 0.22, 0.20
kodiak:O:0:13:24:00 up 20:00,  1 user,  load average: 0.42, 0.16, 0.05
mojito:O:0:19:16:45 up 3 days, 14 min,  5 users,  load average: 0.22, 0.22, 0.20
kodiak:O:0:13:24:00 up 20:00,  1 user,  load average: 0.42, 0.16, 0.0 
```

# php - jquery - 使用会话电子邮件地址预填充 php 文本字段

> ID：10418797
> 
> 赞同：1
> 
> 时间：2012-05-02T17:31:56.707
> 
> 标签：php, jquery, codeigniter

我对这将如何工作有一些想法，但到目前为止没有任何工作。

当用户登录 php/codeigniter 应用程序时，电子邮件地址将存储到会话数据中。onLoad，我想预先弹出一个字段，其中包含使用 jquery 登录的用户的电子邮件地址。

我正在使用它来输出页面上的代码以进行测试：

```
<?php
$userEmail = $this->session->userdata('USER_EMAIL');
echo $userEmail;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:36:23.013

最好的方法是像这样使用php：

```
<input type="text" name="userEmail" value="<?php echo htmlentities($userEmail); ?>" /> 
```

但如果你想使用 jQuery，只需执行以下操作：

```
$("#userEmailId").val("<?php echo htmlentities($userEmail); ?>"); 
```

为清楚起见，**会话数据仅存在于 server-side**。如果你想在客户端访问它（在 jquery 中），它需要在实际页面的某个地方，或者在一个 cookie 中。

# ios - 为什么我不能将 iPad 应用程序放在我的 iPad 上进行开发？

> ID：10418798
> 
> 赞同：0
> 
> 时间：2012-05-02T17:31:57.027
> 
> 标签：ios, xcode4.2

以前，我已经能够将我的应用程序从 Xcode 4.2 推送到我的 iPad。我正在使用 Phonegap 进行构建。过程是：在开发中心注册我的 App ID，创建配置文件，然后将其下载到我的 Xcode 中。然后从 Xcode 中播放按钮旁边的下拉菜单中，我将看到 iPad 作为一个选项。

现在我第一次用 Objective-C 构建一个 iPhone 应用程序。我重复了上面的过程，但我没有看到我的 iPad 在播放按钮旁边列出。怎么了？

一些想法：我认为我的 iPad 没有 iOS 5。我认为它可能仍在运行 iOS 4.x。这是一个可能的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:53:58.280

如果可能的话，

*   将所有内容更新到最新版本（Mac、Xcode、iPad 等）

* * *

# 配置设备

*   如果您是团队管理员，或者您的团队管理员已经为您和您的设备配置了必要的凭据，您可以使用设备管理器自动下载并应用配置文件。

*   每次您想通过使用自动配置将设备添加到配置文件时，都无需访问 iOS 配置门户。

*   自动配置设备以进行开发。. .

    1.  打开设备管理器。
    2.  插入您的设备。
    3.  选择设备，然后单击“用于开发”。

![Xcode 组织者](../Images/67dd1fbabd8d34ec0282c1aaae3db578.png)

开发应用程序需要配置的设备。配置过程设置 Xcode 在设备上安装应用程序所需的证书和配置数据。

*   [Xcode 4 用户指南](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Devices/Devices.html "Xcode 4 用户指南")

* * *

**只支持最新版本的操作系统是可以的。**

*   [Matt Gemmell - 最新版本](http://mattgemmell.com/2011/12/05/latest-version/ "最新版本")

# vim - Vim 等效于 emacs 主模式标签

> ID：10418799
> 
> 赞同：2
> 
> 时间：2012-05-02T17:32:02.377
> 
> 标签：vim, modeline

我对 vim 还是很陌生，但我注意到`-*- mode: {lang} -*-`第一行或第二行的文件打开了该语言的语法突出显示。当谷歌忽略标点符号时，很难搜索 -*- 但几个小时后，我能够找出它在 emacs 中的名称。（[主要模式](http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html#Choosing-Modes)）

到目前为止，在`mode:python`没有 .py 的 python 文件上使用它时效果很好，但我似乎无法`mode:javascript`为没有 .js 扩展名的 javascript 文件工作。我搜索了 vim 文档，但无法找到将语法模式嵌入到文件中的方法，就像 main-mode 对 emacs 所做的那样。

我能够找到[这篇](https://stackoverflow.com/questions/3853028/how-to-force-vim-to-syntax-highlight-a-file-as-html)关于在 .vimrc 中设置覆盖的帖子，但我希望突出显示保留在文件中而不依赖于我的 .vimrc。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:33:42.633

它被称为模式线。详情请参阅`:help modeline`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:46:27.907

如果您正在处理的文件已经有 emacs 主要模式行，那么您可以尝试使用[emacsmodeline](http://www.vim.org/scripts/script.php?script_id=3381) vim 插件来解析这些行，而不是添加您自己的模式行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:33:43.710

您要查找的内容在 vim-land 中的模式行中调用。

例如，为文件设置 python 模式，添加一行

```
# vi:filetype=python 
```

到您的文件。你可以做更多，看

```
:help modeline 
```

在 vim.

# javascript - 创建一个 Web 服务器控件来模仿 jquery 自动完成 API

> ID：10418800
> 
> 赞同：2
> 
> 时间：2012-05-02T17:32:06.160
> 
> 标签：javascript, jquery, vb.net, jquery-autocomplete, custom-server-controls

[我正在尝试为使用jQuery auto-complete](http://jqueryui.com/demos/autocomplete/#default)的自动完成下拉菜单创建一个 ASP .Net (VB.Net) 自定义控件。

基本流程是控件的使用者将设置一些属性（例如数据源），然后将其作为 javascript 注入以初始化自动完成。

涉及的部分很多，所以我可能错过了发布一些代码，如果您认为缺少某些内容，请发表评论，我会添加它。

消费者背后的代码（PreInit 事件）：

```
myDropDown.DataCallback = "testFunc"; 
```

控件中的 DataCallback 属性：

```
Public Property DataCallback As String 
```

后面的控制代码中的选项对象创建和javascript注入（PreRender事件）：

```
Dim _serializer As New JavaScriptSerializer()
Dim optionsObject As New Dictionary(Of String, Object)
optionsObject.Add("source", DataCallback)
Dim optionsJSON = _serializer.Serialize(optionsObject)

Dim initializeScript = String.Format("initialize('{0}', {1});", ClientID, optionsJSON)
Attributes.Add("onfocusin", initializeScript) 
```

最后，javascript：

```
var initialize = function (controlID, options) {
    if (options) {
        $('#' + controlID).autocomplete(options);
    }

    // remove the blur event handler that called this initialize function
    $('#' + controlID).removeAttr('onfocusin');
}; 
```

当我调试`initialize`函数时，我看到`options`有一个属性，`source`，字符串`"testFunc"`作为它的值。我需要的是`source`'s 的值`testFunc`（而不是字符串），因此它可以作为自动完成中的回调执行，而不是自动完成认为它是一个 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:59:51.747

纠正这个问题的最简单方法是进行一些模式识别。出现问题是因为字符串属性被序列化为字符串并用引号引起来。相反，您希望它代表一个对象引用，这意味着摆脱那些引号。要删除引号，您可以将一个简单的正则表达式应用于序列化对象字符串：

```
Dim optionsJSON = _serializer.Serialize(optionsObject)
optionsJSON = Regex.Replace(optionsJSON , "(?<=""source"":)""(.+?)""", "$1") 
```

这将做的是查找文本前面的带引号的字符串`"source":`并捕获内部的内容以捕获组#1。然后它将用内部文本替换整个匹配，有效地从回调函数名称的任一侧删除引号。

# javascript - javascript 全局命名空间是否会在每次完整回发时被清除？

> ID：10418802
> 
> 赞同：0
> 
> 时间：2012-05-02T17:32:13.057
> 
> 标签：javascript, global-namespace

我一直在阅读有关将全局命名空间与全局变量和函数混淆的危险。

我刚刚读到定义全局函数的“旧”方法是有问题的，尤其是在您有多个开发人员在同一个项目上工作的情况下。

我理解并想写出我能写的最好的代码，但上面的陈述让我感到困惑。

开发人员很少在项目的同一页面上工作，我假设全局命名空间会随着用户更改项目中的页面而清除。

不是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:35:41.120

“开发人员很少在项目的同一页面上工作”

根据我的经验，这个假设是错误的。特别是，将库用于常用功能是一种很好的做法。库的关键在于它是可重用的。因此，根据定义，图书馆作者正在“在您的”页面上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:35:54.250

> 开发人员很少在项目的同一页面上工作

这是非常不真实的。在维护公司网站的过程中，很容易雇佣和解雇几个开发人员，他们可能都必须在您创建的同一页面上工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:38:53.800

> 开发人员很少在项目的同一页面上工作，我假设全局命名空间会随着用户更改项目中的页面而清除。

是的，每次请求都会清除全局命名空间，但这不是污染全局命名空间的理由。您似乎在考虑一个小型开发团队，在同一个房间里工作。但是，即便如此，如果一位开发人员决定使用一些第三方库或小部件怎么办？如果该小部件修改了全局命名空间，它可能会干扰您当前的代码。这就是为什么最好的做法是避免在全局命名空间上创建变量/函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T17:40:56.337

首先 - 是的，当页面重新加载时，所有 javascript 都会重新初始化。`window.foo`因此，如果每次加载页面时，您都拥有以下内容：

```
window.foo = 1;

alert(foo);

window.foo++; 
```

其次 - 在团队中（或在您的项目中） ，命名空间的**一种**方式是这样的：

```
var myCompany = {};

myCompany.Utils = {};

myCompany.Utils.doSomething = function() {
  alert("doSomething");
};

myCompany.Utils.doSomethingElse = function() {
  alert("doSomethingElse");
};

myCompany.Utils.doSomethingElse(); 
```

这不仅可以防止开发团队中的“冲突”。它还可以将您的代码与您页面上引用的另一个 3rd 方 javascript 意外“冲突”隔离开来。

# android - IntelliJ EAP：如何停止强制重建 Android 应用程序？

> ID：10418804
> 
> 赞同：0
> 
> 时间：2012-05-02T17:32:20.503
> 
> 标签：android, intellij-idea

我目前在 Nika.1-IC-117.281 并正在制作一个 android 应用程序。

在旧版本 (117.81) 上，我将能够修改布局 XML 文件并将应用程序推回设备上，而无需完全重建项目（只要没有触及代码文件）。现在在新版本中，我无法这样做——它每次都会重建。

有没有一种简单的方法可以让它恢复到旧的行为而不恢复到旧版本？谢谢！

# linux - LD_PRELOAD 加载事件

> ID：10418805
> 
> 赞同：1
> 
> 时间：2012-05-02T17:32:21.007
> 
> 标签：linux

我写了我的 LD_PRELOAD 模块，我想在我的重写函数工作之前添加一些初始化代码。也许 LD_PRELOAD 有任何加载的事件或类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:50:06.287

我不确定“加载”事件，但是如果您使用`gcc`，您可能会发现该`constructor`属性很有用。举个例子：

**testlib.c**：#include

```
void testing(void) __attribute__((constructor));

void testing(void)
{
  printf("It worked!\n");
} 
```

**hworld.c**：

```
#include <stdio.h>

int main(void)
{
  printf("Hello world!\n");
  return 0;
}

$ gcc -o hworld hworld.c
$ gcc -shared -fPIC -o testlib.so testlib.c
$ export LD_PRELOAD=./testlib.so
$ ./hworld 
It worked!
Hello world! 
```

[构造函数](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Function-Attributes.html)属性意味着该函数应该在之前执行`main()`。或者，如果您使用 C++，您可以创建一个类的静态全局实例，该类的构造函数进行初始化，这将达到与使用`constructor`.

# c# - usercontrol vs iframe，限制和已知问题

> ID：10418810
> 
> 赞同：0
> 
> 时间：2012-05-02T17:32:41.460
> 
> 标签：c#, asp.net, iframe, user-controls

如果这太假设并且需要在其他地方，请告诉我。

我有一个需要特定`gridviews`出现在多个页面上的项目。与其`gridviews`在每个页面上复制和粘贴，我认为`user control`为每个特定`gridview`创建一个页面或为每个页面创建一个`gridview`然后使用`iframes`将是我的最佳选择。

我没有广泛使用过，所以我正在寻找 SO 社区的经验，使用`user controls`和/或`iframes`在以下方面是否存在已知问题：

1.  验证
2.  `user control`/`iframe`和父页面之间的通信
3.  `ajax`/`updatepanels`包含`user control`/`iframe`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:20:08.947

由于 gridview 本质上是一个用户控件（非常灵活），因此我将首先探索不使用任何选项来执行此操作。如果可能，请使用标准的 gridview 并让您的数据层完成大部分工作。但是，假设您已经知道...但是您的要求需要您选择其中一个或另一个，这里有一些事情需要考虑。

iframe 很容易实现，但除非您的需求在用户交互方面非常简单，否则用户控件将是最灵活的。iframe 的另一个缺点是它的大小（您实际上是在加载两个页面）。用户控件的缺点是构建它们的前期时间。

根据您的标准：

**1\. 验证**- 可以使用任一选项，但您将拥有更多的用户控件灵活性

**2\. 用户控件/iframe 和父页面之间的通信**- 使用用户控件更容易，除非查询字符串参数可以解决问题

**3\. ajax/updatepanels 包含用户控件/iframe** - 再次用户控件

# debugging - 为什么在启动程序时单步执行每条指令都会崩溃？[调试]

> ID：10418811
> 
> 赞同：0
> 
> 时间：2012-05-02T17:32:45.250
> 
> 标签：debugging, x86, x86-64, ollydbg

我正在尝试在调试器（ollydbg）中遵循我用 C++ 编译的一个简单程序的执行指令（它计算一些素数然后退出），但我有几个问题：

*   为什么第一条指令不是“CODE”部分的入口点？他们有区别
*   一旦我“跳过”一些指令，调试器就会崩溃并写入“ntdll.someaddress 处的单步事件，按 shift+F7/F8/F9 将异常传递给程序”并崩溃。如果我在不执行指令的情况下运行程序，它可以正常工作并且程序加载没有问题

为什么会这样？这不仅发生在我的程序中，而且发生在其他几个程序中（我系统中几乎每隔一个 32 位 exe）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:38:55.740

如果你在 64 位操作系统下运行 OllyDbg，我相信你不走运，因为 OllyDbg 不支持 x86-64 Windows，甚至不支持用于调试 32 位应用程序的调试器。看到[这个论坛帖子](http://www.masm32.com/board/index.php?topic=5738.0)，它是从 2006 年开始的，但我认为从那以后没有任何变化。他们建议使用不同的调试器，例如 64 位版本的 WinDbg（这是一个很棒的调试器）。

> 为什么第一条指令不是“CODE”部分的入口点？他们有区别

您可以在 OllyDbg 中进行设置：选项 - 调试选项 - 事件 - “首先暂停”。您可以从“系统断点”开始，它位于 ntdll 中，甚至在调用启动模块的入口点之前就被调用。

# svn - Jenkins 检测到 SVN 更改但不更新工作区？

> ID：10418814
> 
> 赞同：6
> 
> 时间：2012-05-02T17:32:46.160
> 
> 标签：svn, jenkins, jenkins-plugins

我正在使用 Jenkins 1.461，但在使用 SVN 轮询时遇到问题。我的存储库 URL 的格式为 svn+ssh:// ***** ******。我已将 Jenkins 配置为每 5 分钟轮询一次更改。发生的情况是每 5 分钟检测一次更改：

> 开始于 2012 年 5 月 2 日 8:26:24 PM 在 2012 年 5 月 2 日 8:26:25 PM 收到 SCM poll call on XXXXXXXXX svn+ssh://XXXX/svn/XXXX/XXXXXXXXX/XXXXXXXX/trunk is at revision 26,192（从 26,181 更改）完成。花了 2.6 秒发现更改

但是，每次投票后工作区都不会更新。工作区的最新版本仍然是 26181，而不是预期的 26192。我不明白为什么。任何想法？

迈克尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T19:16:11.030

您的 Jenkins 和 SVN 服务器上的时钟是否同步？如果时钟稍微偏离一点，就会发生奇怪的事情。我自己不太使用 SVN，所以我不记得这是否是症状之一，但最好从检查时钟开始。

最简单的方法是在两台主机上安装 ntpd，将它们配置为与同一源同步，然后忘记它。如果您的组织中没有 ntp 服务器，请查看[http://www.pool.ntp.org](http://www.pool.ntp.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-04T07:11:56.060

在 SVN URL 的末尾使用 @HEAD 实际上解决了 Mickael Marrache 在上面的评论中提到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-03T13:48:45.623

这就是我为解决问题所做的。

单击**启用自动刷新**（屏幕右上角）

> 1）点击我的项目
> 2）点击配置
> 3）在常规选项卡下，向下滚动到“源代码管理”
> 4）在存储库 URL 后面添加“@HEAD”
> 5）点击“保存”
> 6）点击“应用”（重要）
> 7）为我的项目单击“立即构建”
> 
> 单击我的项目>>最近的更改

现在，您将看到您的项目已使用存储库中的最新提交进行了更新。

# java - 我们如何有效地防止在一个会话中同时使用 Web 应用程序？

> ID：10418815
> 
> 赞同：1
> 
> 时间：2012-05-02T17:32:58.350
> 
> 标签：java, session, spring-mvc

我们已经构建了一个 Spring MVC Web 应用程序，该应用程序严重依赖用户按特定顺序执行操作，并且在通常情况下（通过不提供“转到地方”你不应该在给定的时刻），当人们在新选项卡或浏览器窗口中打开应用程序的另一个实例时，我们会遇到一些问题。

由于应用程序将域模型存储在用户的会话中，因此在另一个窗口中使用该程序可能会弄乱模型的数据，我们已经实现了一个页面 ID 机制，该机制可以验证用户以正确的顺序使用程序而不是使用浏览器导航，但是当重置程序（这是一项功能，将用户重定向到主屏幕并清除域模型）之类的事情发生在一个窗口中时，我们仍然面临问题，然后用户尝试依赖要在另一个窗口中填充有效数据的域模型（很快导致 NullPointerException）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:07:43.543

在会话中存储一些用户详细信息（如 ID、姓名、电子邮件）可能没问题，但存储用户**状态**（或任何经常更改和/或显着影响应用程序中其他内容的数据）听起来不是一个好主意.

希望以下方法之一适合您：

*   不要在会话中保存状态 - 在您需要时从数据库中加载它（在您的情况下，每当用户尝试访问应该按顺序完成的步骤之一时）。如果您使用缓存，这不会对性能产生重大影响。
*   不要在数据库中保存状态，仅在会话中 - 适用于有限的情况（例如，订购机票），您可以推迟提交域对象，直到过程完成。
*   将 Ajax 用于多步骤流程并且根本不保存状态（除了在浏览器中隐式保存）。这需要将所有步骤放在一个页面中并 ajaxifying 你的一些代码。

无论如何，如果有人登录并尝试进入第 3 步，他们不应该向他们抛出异常，但这是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T18:55:40.247

万一有人再次阅读此问题：

而不是 HttpSession 只保留域模型的一个副本，它现在拥有一个集合，我们通过请求/响应传输对单个模型的引用，以便我们可以在控制器和视图中获得正确的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T18:08:52.567

如果我是你，我会让用户在网站的其他部分闲逛——不会干扰你的向导过程的部分。但是，一旦他们尝试重新启动它 - 检查会话中是否有 PageID，并提醒他们尚未完成他们开始的操作，并询问他们是否要取消/重新启动或从离开的地方继续。

# jquery-mobile - Jquery Mobile - 单击颜色上的 ListView

> ID：10418816
> 
> 赞同：1
> 
> 时间：2012-05-02T17:33:01.583
> 
> 标签：jquery-mobile

对于 Jquery Mobile，我有一个 ListView。我没有 ListView 的任何主题。这是正常的灰色。

在列表项的 MouseOver 上，我喜欢它带有蓝色

```
 theme-b. 
```

我喜欢只为鼠标悬停做这件事。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:27:55.223

进入 jQuery Mobile 主题 CSS 并将`.ui-btn-hover-a`代码复制到`.ui-btn-hover-c`声明中。基本上只需复制您想要的代码并使用它来覆盖“c”样本类（或您想要使用的任何样本）。

我实际上将代码从声明复制`.ui-btn-up-*`到了，`.ui-btn-hover-*`因此没有“悬停”状态（“悬停”和“向上”状态是相同的，因此当“悬停”类添加到元素时无需重绘） . 这有助于提高性能，尤其是当您有一个用户必须滚动的长列表时。

# ios - DDMathParser - 如何识别错误是 iOS

> ID：10418820
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:15.583
> 
> 标签：ios, cocoa-touch, parsing

我正在构建一个应用程序，该应用程序使用 Dave DeLong 的 DDMathParser 绘制文本给定函数。我需要知道（对于我评估的每个“x”）解决方案是否存在，或者它只给我 0.00，因为它无法评估它。也许是布尔？

```
while (x <= (viewWidth - originOffsetX)/axisLenghtX) {

        NSDictionary *variableSubstitutions = [NSDictionary dictionaryWithObject: [NSNumber numberWithDouble:x] forKey:@"x"];
        NSString *solution = [NSString stringWithFormat:@"%@",[[DDMathEvaluator sharedMathEvaluator] 
                                                               evaluateString:plotterExpression withSubstitutions:variableSubstitutions]];
        numericSolution = solution.numberByEvaluatingString.doubleValue;
        NSLog(@"%f", numericSolution);
        if (newline) {
            CGContextMoveToPoint(curveContext, (x*axisLenghtX + originOffsetX), (-numericSolution * axisLenghtY + originOffsetY));
            newline = FALSE;
        } else {
            CGContextAddLineToPoint(curveContext, (x*axisLenghtX + originOffsetX), (-numericSolution * axisLenghtY + originOffsetY));
        }
        x += dx; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:38:54.920

好吧，由于您使用的是最简单的 API，因此如果出现错误，则无法通知您。[这在 wiki 上的使用](https://github.com/davedelong/DDMathParser/wiki/Usage)页面的第一部分有清楚的解释：

> 有几种方法可以评估字符串，具体取决于您要进行多少自定义。这些选项中的大多数都需要一个 NSError ** 参数，尽管有些不需要。
> 
> *   如果您使用不接受 NSError ** 的选项之一，则任何标记化、解析或评估错误都将被 NSLogged。
> *   如果您使用接受 NSError ** 的选项之一，那么您必须提供一个。不这样做可能会导致崩溃。

所以你想要做的是：

```
NSDictionary *variableSubstitutions = [NSDictionary dictionaryWithObject: [NSNumber numberWithDouble:x] forKey:@"x"];
NSError *error = nil;
NSNumber *number = [[DDMathEvaluator sharedMathEvaluator] evaluateString:plotterExpression withSubstitutions:variableSubstitutions error:&error]];

if (number == nil) {
  NSLog(@"an error occurred while parsing: %@", error);
} else {
  numericSolution = [number doubleValue];
  // continue on normally
} 
```

# android - 无法在Android的外部存储中写入文件

> ID：10418821
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:16.457
> 
> 标签：android

请检查下面的代码。我无法将资源文件复制到 android 手机的外部存储中。虽然，我可以使用我评论过的代码进行复制，但我想知道我的原始代码的问题。

```
public class ExternalData extends Activity implements OnItemSelectedListener,
    OnClickListener {

TextView canRead = null;
TextView canWrite = null;
String state = null;
boolean canR, canW;

EditText userEnteredFileName;
Button bConfirm, bSaveAs;

Spinner spinner = null;
String[] stuff = { "Music", "Pictures", "Downloads" };
File path = null;
File file = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.externaldata);

    canRead = (TextView) findViewById(R.id.tvCanRead);
    canWrite = (TextView) findViewById(R.id.tvCanWrite);

    userEnteredFileName = (EditText) findViewById(R.id.etUserEnteredFileName);
    bConfirm = (Button) findViewById(R.id.bConfirm);
    bSaveAs = (Button) findViewById(R.id.bSaveAs);

    bConfirm.setOnClickListener(this);
    bSaveAs.setOnClickListener(this);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, stuff);
    spinner = (Spinner) findViewById(R.id.spinner1);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(this);

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {

    int position = spinner.getSelectedItemPosition();
    switch (position) {
    case 0:
        path = Environment
                .getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);
        break;
    case 1:
        path = Environment
                .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        break;
    case 2:
        path = Environment
                .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
        break;
    }
}

public void checkState() {

    state = Environment.getExternalStorageState();
    if (state.equals(Environment.MEDIA_MOUNTED)) {
        canRead.setText("Can Read: true");
        canWrite.setText("Can Write: true");
        canR = canW = true;
    } else if (state.equals(Environment.MEDIA_MOUNTED_READ_ONLY)) {
        canRead.setText("Can Read: true");
        canWrite.setText("Can Write: false");
        canR = true;
        canW = false;
    } else {
        canRead.setText("Can Read: false");
        canWrite.setText("Can Write: false");
        canR = canW = false;
    }
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case R.id.bConfirm:
        bSaveAs.setVisibility(View.VISIBLE);
        break;
    case R.id.bSaveAs:
        checkState();
        if(canR == canW == true){

            file = new File (path, userEnteredFileName.getText().toString() + "/");

            try {
                if(!file.exists()){
                    boolean success = file.mkdirs();
                    if(success){
                        Toast.makeText(ExternalData.this, "File created", Toast.LENGTH_LONG).show();
                    }else{
                        Toast.makeText(ExternalData.this, "Not able to create file", Toast.LENGTH_LONG).show();
                    }
                }
                InputStream fis = getResources().openRawResource(R.drawable.darthvader);
                /* this works....but wats wrong with the original code
                file = new File(file, "darthVader.png");
                if(!file.exists()){
                    file.createNewFile();
                }
                */
                FileOutputStream fos = new FileOutputStream(file);
                byte[] data = new byte[fis.available()];
                fis.read(data);
                fos.write(data);
                fis.close();
                fos.close();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Toast.makeText(ExternalData.this, "FilNOT", Toast.LENGTH_LONG).show();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(ExternalData.this, "IO", Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }
        }
        break;
    }
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:37:05.710

您是否在清单中请求了许可？

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:47:48.577

请参阅[此](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)示例以了解如何在 sdcard（外部存储）中写入文件

```
 InputStream input;
        try {
            URL url = new URL (strURL);
            input = url.openStream();
            byte[] buffer = new byte[1500];
            OutputStream output = new FileOutputStream ("/sdcard/"+pos+".png");

                int bytesRead = 0;
                while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0)
                {
                    output.write(buffer, 0, bytesRead);
                }

            finally
            {
                output.close();
                buffer=null;
            } 
```

不要忘记在清单文件中给予许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# lotus - 如何在莲花连接中创建甘特图

> ID：10418822
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:28.000
> 
> 标签：lotus, connection, gantt-chart

有没有办法在 Lotus 连接中创建活动的甘特图？或者有没有办法在从存储莲花连接内容的数据库中收集信息时创建一个图形莲花连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:54:51.730

您可以使用 Connections API 来检索数据并构建小部件。有关如何检索活动数据的信息，请参阅[http://www-10.lotus.com/ldd/lcwiki.nsf/dx/Retrieving_activity_nodes_ic301 。](http://www-10.lotus.com/ldd/lcwiki.nsf/dx/Retrieving_activity_nodes_ic301)

# android - Android：处理大型数组的最佳实践

> ID：10418823
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:42.223
> 
> 标签：android, arrays

我的原始文件夹中有超过 150 种声音，尝试处理它们变得非常乏味。我有一个音板，可以动态获取`int file[]`数组中的所有声音，并将其与`string soundnames[]`大批。然后将这些数组转换为 gridview 的自定义按钮适配器。数组按字母顺序（手动完成）以具有某种形式。问题是，当我必须添加新声音时，我必须非常小心地找到它在当前数组中的位置并完美匹配，以便字符串名称和文件正确匹配。由于两个数组必须匹配，这意味着我必须跟踪 300 多个项目，并且已经变得不堪重负。有没有办法让我可以将新歌曲添加到这些数组的末尾，但让它们按字母顺序排序，这样它们仍然可以匹配，同时仍然对数组有顺序。

**是否有一种更简单或更有效的方法来处理大型互斥（不确定这是否是正确的词）数组？**此外，我还有一些具有通用名称的声音文件，即声音 1..声音 N，我想将其保留在数组的末尾是否也可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:38:47.477

将数据放入 sqlite 数据库并使用游标。SQL 允许排序并且速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:37:38.457

您可以使用集合类

您可以使用

*   列表
*   有地图

根据您的要求，您需要排序数据。

使用[SortedMap](http://developer.android.com/reference/java/util/SortedMap.html)

# java - java将整数作为字符串与比较器进行比较-奇怪的结果

> ID：10418828
> 
> 赞同：0
> 
> 时间：2012-05-02T17:33:52.027
> 
> 标签：java, int, comparator, dereference

我正在尝试将一些玩家与比较器通过他们获得的跑量进行比较。

```
System.out.println("Comparing: " + p2.getRuns() + " and " + p1.getRuns());
int newRESULT = intConvert(p2.getRuns()).compareTo(intConvert(p1.getRuns()));
System.out.println("Returns: " + newRESULT);
return newRESULT; 
```

但是，这会返回：

比较：25 和 0，返回：2

比较：0 和 100，返回：-1

比较：25 和 100，返回：1

...因此以错误的顺序命令玩家。

第一个比较不应该返回 1、第二个 -1 和最后一个 -1 吗？

转换：

```
 private static String intConvert(int x)
     {
      return "" + x;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:40:12.450

我假设`intConvert(...)`将 an 转换`int`为 a `String`，因此您会得到 meahs`"25"`大于的词法比较，`"100"`因为第一个字符更大（2 > 1）。

如果您想获得正确的比较，请坚持比较`int`s 或者如果您需要使用`String`创建相等长度的字符串并在前面填充缺失的零（例如`25 -> "025")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:42:45.260

要以合理的方式比较`Numbers`它们`String`，您需要以相同的方式始终如一地格式化它们。

[`String`s 使用词法比较。](https://stackoverflow.com/questions/4064633/string-comparison-in-java)这意味着`"5"`将是`>` `"20"`因为`5`is `>`than `2`。要获得逻辑上预期的输出，您需要使用某种格式化程序对数字进行格式化，以使它们在词法上具有可比性。

`"05"`是`<` `"20"`

最简单的方法是使用[`String.format()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)一个模式来格式化所有数字，`Strings`以便它们在词法上进行一致的比较。

```
String.format("%04d", yourInteger); 
```

这将生成所有`int`传入的 s，左侧填充`0`4 个位置。

```
String.format("%04d", 5); 
```

会产生`0005`

使`"%0Xd"`where`X`是您希望将其格式化为的位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:47:35.447

您不必为了排序而将数字转换为字符串，您可以执行以下操作：

```
class ComparePlayersByRuns implements Comparator<Player> {
    public int compareTo(Player p1, Player p2) {
        return p1.getRuns().compareTo(p2.getRuns());
    }
} 
```

或者在 Java 8 及更高版本中，创建比较器所需的只是：

```
Comparators.comparing(Player::getRuns); 
```

不，比较不需要返回 1、0 或 -1，文档说：

> 回报：
> 
> 作为第一个参数的负整数、零或正整数小于、等于或大于第二个参数。

# zend-framework - 如何禁用一些 Zend View Helpers

> ID：10418829
> 
> 赞同：2
> 
> 时间：2012-05-02T17:33:56.867
> 
> 标签：zend-framework, helper, bootstrapping, view-helpers, zend-view

我正在尝试一种方法来禁用“应用程序/视图/助手”中的一些视图助手......

我真正想要的是在 application.ini 上放置一些选项来启用或禁用一些 Helpers。

**application.ini 上的示例：**

```
helpers.Helper1=on
helpers.Helper2=off 
```

现在的问题是，当一个助手关闭时，我想重写这个助手的一些功能，以便在视图上返回不同的结果。这样，我不需要更改视图脚本中的任何内容。

我想在不同的位置为每个助手有 2 个不同的 php 文件。一个带有真正的助手，另一个带有更改的助手（在 application.ini 上关闭时工作）。

问题是我不知道如何告诉视图应该加载哪个视图...

有谁知道怎么做？

**最终代码**

好的，经过多次尝试，我将其与以下代码一起使用：

**引导程序**

```
protected function _initConfigureHelpers(){
    $this->bootstrap('view');
    $view = $this->getResource('view');

    $view->addHelperPath("./../library/ConfigHelpers","Configurable_Helper");
    $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
        'ViewRenderer'
    );
    $viewRenderer->setView($view);
    $front  = Zend_Controller_Front::getInstance();
    $front->registerPlugin(new Application_Plugin_ViewPlugins());
    return $view;
} 
```

**Application_Plugin_ViewPlugins**

```
class Application_Plugin_ViewPlugins extends Zend_Controller_Plugin_Abstract
{

    public function preDispatch(Zend_Controller_Request_Abstract $request){

        $front=Zend_Controller_Front::getInstance();
        $bootstrap=$front->getParam('bootstrap');
        $options=$bootstrap->getOption("helpers");
        if (is_array($options)){
            $view = $bootstrap->getResource('view');

            foreach($options as $option => $value){
                $helper=$view->getHelper($option);
                if ($helper){
                    if ($value=="off")
                        $helper->__disable();
                    else if ($value!="on")
                        throw new Exception('The value of helpers.'.$option.' must be "on" or "off" on application.ini.');
                } else {
                    throw new Exception("Inexistent Helper");
                }
            }
        }
    }

} 
```

**修改的助手示例**

```
require_once APPLICATION_HELPERS."CssCrush.php";

class Configurable_Helper_CssCrush extends Zend_View_Helper_CssCrush {

    protected $__config_enabled = true;

    public function __disable(){
        $this->__config_enabled = false;
        return $this;
    }

    public function __enable(){
        $this->__config_enabled = true;
        return $this;
    }

    public function cssCrush(){
        if ($this->__config_enabled){
            return parent::cssCrush();
        } else{
            return new Modified_CssCrush();
        }
    }

}

class Modified_CssCrush {

    public static function file ( $file, $options = null ) {
        return $file;
    }

} 
```

APPLICATION_HELPERS 在 /public/index.php 上定义为“../application/views/helpers/”。

现在，当我想添加一个可配置的助手时，我将原始助手放在“/application/views/helpers/”上，然后使用上面示例的结构在“/library/ConfigHelpers”上创建它的修改版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:24:28.893

我认为您想要的是[zf2中的](http://packages.zendframework.com/docs/latest/manual/en/zend.di.html)[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，但在zf1 中不可用。

通过一些修补，虽然你可以得到你需要的东西。

## 在引导程序中配置助手

*（假设默认项目结构）*

查看助手路径配置：application/configs/application.ini：

```
resources.view.helperPath.Zf_View_Helper_ = "Zf/View/Helper" 
```

一个简单的可配置助手，*（允许禁用/启用，但您显然可以添加您需要的任何方法（将其用作需要行为的助手的基类）*

```
class Zf_View_Helper_Configurable extends Zend_View_Helper_Abstract
{
    protected $isEnabled = true;

    public function configurable()
    {
        return $this;
    }

    public function disable()
    {
        $this->isEnabled = false;
        return $this;
    }

    public function enable()
    {
        $this->isEnabled = true;
        return $this;
    }

    public function __toString()
    {
        if ($this->isEnabled) {
            return 'Configurable is enabled';
        } else {
            return 'Configurable is disabled';
        }
    }
} 
```

并在引导程序中配置助手：

```
public function _initConfigureHelpers()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');

    $configurableHelper = $view->configurable();
    $configurableHelper->disable();
} 
```

您可以在 .ini 文件中添加选项并在引导程序 initConfigureHelpers() 方法中获取它们。

如果您想从任何默认的 zf 帮助程序中获得此行为，请按照@Ratzo 所说的操作并扩展这些帮助程序并添加所需的行为，然后在您的引导程序中配置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:23:32.093

请看下面的链接[Zend_View 链接](http://framework.zend.com/manual/en/zend.view.helpers.html)

下面是您应该从 Zend 文档中考虑的要点。

> 注意：默认助手路径
> 
> 默认的助手路径总是指向 Zend Framework 视图助手，即'Zend/View/Helper/'。即使您调用 setHelperPath() 来覆盖现有路径，也会设置此路径以确保默认助手工作。

这意味着您不能真正关闭帮助程序，除非您想扩展 Zend_View 对象并覆盖 setHelperPath 方法。这不是要走的路。

这可能是您想要做的。首先，这是我的假设。

假设：您想编写自己的视图助手，通过在这里或那里更改一些方法来稍微改变当前视图助手所做的事情。

这是您应该做的事情。

首先，编写您的视图助手。确保类名的最后一部分与您要“覆盖”的视图助手相同。您不必这样做，但这可以确保无法再使用原始助手。

```
class My_View_Helper_BaseUrl extends Zend_View_Helper_BaseUrl

{   
    private $_enabled = true;
    public function setEnabled( $bool ){ $this->_enabled = (boolean) $bool; }
    public function baseUrl(){ 
        if( $this->_enabled ){
             return 'testUrl'; //other code 
        }
        else return parent::baseUrl();
} 
```

既然你有了，请执行以下操作

```
$view->setHelperPath('/path/to/my/helpers', 'My_View_Helper'); //1
echo $view->baseUrl();  //2 
```

优秀的。现在您已经有效地隐藏了原始 BaseUrl 帮助器。上面的代码将使视图在扫描默认的 zend 目录之前扫描您的目录以查找任何帮助程序。当它到达第 2 行时，视图将首先找到您的 baseUrl 助手并使用它而不是原始的 baseUrl 助手。在上面的示例中，它应该回显“testurl”而不是正常的 baseUrl 行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T19:59:47.690

您可以制作一个扩展原始助手的自定义助手，例如

```
class My_Helper_Url extends Zend_View_Helper_Url
{} 
```

并根据需要重写方法。

# java - 使用 JSR-303 进行 Bean 验证

> ID：10418836
> 
> 赞同：0
> 
> 时间：2012-05-02T17:34:20.507
> 
> 标签：java, bean-validation

我们使用 eclipselink 作为我们的 ORM 层，当我们尝试使用 java-validation 框架和 Hibernate Validator 作为默认工厂时，验证不起作用。我们被这个错误[http://goo.gl/hQfzG](http://goo.gl/hQfzG)击中。

我们正在尝试寻找替代方法来验证 bean，而不使用 Hibernate Validator 作为默认的 Validator Factory。除了 Hibernate Validator 之外，还有其他可用的东西吗？

顺便说一句，我们没有使用弹簧，所以我猜这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:38:58.773

不确定您对参考实现有什么看法，但如果您对它不满意，您可以看看[Apache Bean Validation](http://bval.apache.org/)。Afaik 它是迄今为止唯一的其他（完整）实现。

# javascript - 模拟特定地址的延迟响应

> ID：10418846
> 
> 赞同：2
> 
> 时间：2012-05-02T17:35:11.010
> 
> 标签：javascript, networking, simulate

当远程服务器响应缓慢时，我想测试加载外部 javascript 对页面的影响。

我寻找可以减慢特定站点连接速度的工具，但我只能找到减慢整个网络或 Mac 不存在的工具（如此[处](https://stackoverflow.com/questions/614795/simulate-delayed-and-dropped-packets-on-linux)或[此处](https://stackoverflow.com/questions/1094760/network-tools-that-simulate-slow-network-connection)）

有这样的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:39:45.743

使用Mac[版 Detours 应用程序，您可以将某些主机重定向到您自己的本地 Web 服务器。](http://detoursapp.com/)然后，您可以从您的服务器获取资源（通过 curl 等），休眠一段时间，然后返回响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:24:47.703

这不是简单的出路，但您可以将 IPTABLES（unix ip-router）与 TC（流量控制）结合使用吗？如果您不知道终端 bash 脚本是如何工作的，那么这非常广泛，但是您需要 100% 的终端才能获得正确的解决方案。

如果这对您不起作用，请尝试更简单的方法： http: [//lartc.org/howto/lartc.ratelimit.single.html](http://lartc.org/howto/lartc.ratelimit.single.html)

将其存储在例如您的主文件夹中，称为 bwm.sh

```
#!/bin/bash

# through this interface
IF=$1
# on this HOST
HOST=$2
# get the IP from HOST
HOSTIP="`nslookup $HOST|grep Address|grep -v "#"|cut -d " " -f2`"
# with this rate
your_rate=$3

# defaults /sbin/tc
TC="`whereis tc | sed 's/[^\ ]*.\([^\ ]*\).*/\1/'`" 
# defaults /sbin/iptables
IPTABLES="`whereis iptables | sed 's/[^\ ]*.\([^\ ]*\).*/\1/'`" 

#some number
PRIO="123"
# you create a new rule in the mangle table
IPT="$IPTABLES -t mangle"

echo "Program locations found: iptables: $IPTABLES and tc: $TC"
echo "down-rating bandwidth\n on $HOST\n to $your_rate whilst marking packages that origins\n from $HOSTIP\n with $PRIO on interface\n named $IF"
echo -n "starting setup.."

# apply custom filter
$IPT -N myfilter

# add it to the POSTROUTING chain
$IPT -A POSTROUTING -j myfilter

# if conntrack is used - restore a mark and allow the packets, which already have been marked, through - no need to check again

$IPT -A myfilter -p tcp -j CONNMARK --restore-mark
$IPT -A myfilter -m mark --mark $PRIO -j ACCEPT

# add to it your matching rule

$IPT -A myfilter -p tcp -s $HOSTIP -j MARK --set-mark $PRIO

# conntrack it optionally, so not every packet has to be rematched
$IPT -A myfilter -j CONNMARK --save-mark

# use that mark in a tc filter rule
echo qdisc add
$TC qdisc add dev $IF root handle 1: htb default 30
echo class add
$TC class add dev $IF parent 1: classid 1:1 htb rate $your_rate # <<<<<<<< fill in rate

echo sfq add
# add an SFQ qdisc to the end - to which you then attach the actual filter
$TC qdisc add dev $IF parent 1:1 sfq perturb 10
echo filter add
$TC filter add dev $IF parent 1:1 prio 1 handle $PRIO fw flowid 1:1
echo "done" 
```

现在打开终端窗口并获得root权限

finder > 终端 > 打开，我们将进入用户主页并输入超级用户

```
cd; su 
```

输入root密码

使用接口、主机名、速率参数启动程序

```
sh bwm.sh IF HOST RATE 
```

# android - 被触摸对象的先前坐标

> ID：10418847
> 
> 赞同：0
> 
> 时间：2012-05-02T17:35:11.043
> 
> 标签：android, coordinates, processing, multi-touch

我正在使用 Processing 进行编程，我需要的是 pmouseX/Y 的等价物，但用于触摸，但我不能使用 pmouse，因为我使用多点触控，并且我需要每个触摸点的先前坐标。我不知道我是否说清楚了，举个例子，我需要知道滑动的初始坐标和最终坐标

我目前用来获取初始坐标：

```
 public boolean surfaceTouchEvent(MotionEvent me) {
    float x0=me.getX(0);
    float y0=me.getY(0);
    ....
    ....
    return super.surfaceTouchEvent(me);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:34:18.140

我不确定我是否在这里得到你的权利，因为这似乎是非常基本的编程，但我会尝试。

只需使用 ArrayList 并在那里添加每个位置。对于不同的触摸，您可能需要使用 HashMap，如下所示：

```
HashMap<MotionEvent, ArrayList<Point2D.Float>> touches = new HashMap<MotionEvent, ArrayList<Point2D.Float>>();

public boolean surfaceTouchEvent(MotionEvent me)
{
    float x0=me.getX(0);
    float y0=me.getY(0);
    if (!touches.containsKey(me))
    {
        touches.add(me, new ArrayList<Point2D.Float>());
    }
    else
    {
        // get previous position
        Point2D.Float prevpos = touches.get(me).get(touches.get(me).size() - 1);
    }
    touches.get(me).add(new Point2D.Float(x0, y0));
    ....
} 
```

没有对此进行测试，但这基本上就是它的工作方式。

# java - 在 HBase 中存储和更新 Set 的最佳方式是什么？

> ID：10418848
> 
> 赞同：3
> 
> 时间：2012-05-02T17:35:14.267
> 
> 标签：java, performance, hadoop, mapreduce, hbase

所以情况如下：我创建了一个 SetWritable 类，基本上是实现 Writable 接口的 java.util.Set 的包装器。我有一个包含一列族和一列的 HBase 表，并且该列的值是序列化的 SetWritable 对象。现在，如果我想向集合中添加一个元素，我需要从 HBase 中提取行，将其反序列化为 SetWritable，添加我的元素，序列化 SetWritable，然后将其推回 HBase。所以这意味着我的映射器和 HBase 之间有很多很多的通信。鉴于我正在处理大量数据，这可能会影响我的表现。

我想做的只是将新元素发送到 HBase，并在 HBase 服务器上有一些代码反序列化 SetWritable，添加元素，序列化 SetWritable，然后提交它。这可能吗？协处理器可以提供帮助吗？

另一个想法：不是将我的集合序列化为一列，我可以为集合的每个已知元素设置一列。一个缺点：我可能会得到数十万（或数百万）列。这是一个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T23:35:41.393

本地或远程序列化不是正确的方法。使用列限定符来存储您的值，您将获得您想要的行为。

如果您使用列限定符作为您的集合元素，那么 hbase 可以稀疏地存储您的集合。即你可以在一个集合中有一百万个元素；另一个具有不相交的百万元素的集合。HBase 只能存储 200 万个项目。

添加或删除集合元素很容易：添加是 put(key, column, column qualifier)，删除是 delete (key, column, column qualifier)。要检索整个集合，您只需迭代行中的值。

修改这种方法以使用计数而不是二进制成员资格甚至不是那么困难——您只需使用原子增量指令：[http ://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable .html#increment%28org.apache.hadoop.hbase.client.Increment%29](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#increment%28org.apache.hadoop.hbase.client.Increment%29)

# windows-phone-7 - 我无法在 wp7 中即时创建 ReverseGeocodeRequest

> ID：10418849
> 
> 赞同：0
> 
> 时间：2012-05-02T17:35:16.760
> 
> 标签：windows-phone-7

我在 wp7 中使用地理编码服务从纬度和经度获取 CountryName 我写了以下内容：-

```
GeoCoordinate location1 = null;
    private GeoCoordinateWatcher watcher;
    public void FindCountryUsingGps()
    {
        progressbar.Visibility = Visibility.Visible;
        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
        watcher.Start(); 

    }

    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        if (watcher != null)
        {

            watcher.Stop();
            watcher.Dispose();
            watcher = null;

            location1 = e.Position.Location;
            ObtainCountry();//by this function you obtain country region
        }
    } 
```

然后添加了以下参考：- ![在此处输入图像描述](../Images/6a32f35dc663f7141b3a4b4a586bb248.png) 之后我写了

```
public void ObtainCountry()
        {
            if (location == null)
                return;

            ReverseGeocodeRequest reverseGeocodeRequest = new ReverseGeocodeRequest(); 
```

但我不能写这个 **ReverseGeocodeRequest reverseGeocodeRequest = new ReverseGeocodeRequest();** 线，它是红色的

在 wp7 中，这是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:54:17.667

尝试删除/重新添加服务引用。有时我会遇到无法正确生成代码的问题。该代码应位于 ServiceReference 文件夹下的一个名为 Reference.cs 的代码文件中。

# symfony - FOSUserBundle 单元测试

> ID：10418855
> 
> 赞同：4
> 
> 时间：2012-05-02T17:35:44.063
> 
> 标签：symfony, fosuserbundle

我正在使用 fosUserBundle 建立一个站点。我需要编写一些单元测试，但我似乎无法让身份验证正常工作以与它们一起使用。我已经尝试了一些没有运气的方法。

方法 1 - 安全设置中的链提供程序以进行我可以依赖的标准登录。当我这样做时，唯一有效的身份验证是 in_memory 提供程序，这意味着我可以使用管理员用户登录，但不能使用 fosUserBundle 创建的任何用户

安全.yml

```
安全：
    编码器：
        “FOS\UserBundle\Model\UserInterface”：明文
        “Symfony\Component\Security\Core\User\User”：纯文本

    提供者：
        链提供者：
            提供者：[in_memory，fos_userbundle]
        在记忆中：
            用户：
                管理员：{密码：管理员，角色：['ROLE_ADMIN']}
        fos_userbundle：
            id：fos_user.user_manager

    防火墙：
        主要的：
            模式：^/
            表单登录：
                提供者：fos_userbundle
                登录路径：/
                csrf_provider：form.csrf_provider
                default_target_path：/媒体
            注销：真
            匿名：真实
            http_basic：
                提供者： in_memory

```

方法 2- 我在单元测试的设置中创建了一个用户。但是使用这种方法，我永远无法使用我刚刚创建的用户登录，我不需要用户确认。

```
公共功能设置（）{

        $kernel = 静态::createKernel();
        $this->repo = $kernel->boot();
        $this->repo = $kernel->getContainer();

        $userManager = $this->repo->get('fos_user.user_manager');

        $email = "testing".(string) self::newRandomNumber()."@test.com";
        $un = "test".(string) self::newRandomNumber();
        $fn = "测试";
        $ln = "激光";
        $pwd = "密码1";

        $user = $userManager->createUser();

        $user->setEmail($email);
        $user->setUsername($un);
        $user->setFirstName($fn);
        $user->setLastName($ln);
        $user->setPlainPassword($pwd);
        $user->setBimStaff(True);

        // 将用户持久化到数据库         
        $userManager->updateUser($user);

        $this->user = $user;

        $this->client = static::createClient();
        $crawler = $this->client->request('GET', '/');

        $form = $crawler->selectButton('登录')->form();

        // 设置一些值
        $un = 'Lucas'.self::newRandomNumber();
        $form['_username'] = $un;
        $form['_password'] = $pwd;

        // 提交表单

        $crawler = $this->client->submit($form);
        print_r($this->client->getResponse());

        $this->client->followRedirects();

    }

```

我已经尝试过以表单和 http 基本身份验证登录，但似乎都不起作用。

有人有什么建议吗？

谢谢，科里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:50:12.870

嗯，如果您在安全性中链接提供者，您似乎不能只使用其中一个提供者，至少这为我解决了这个问题。

```
// security.yml 
providers:
    chain_provider:
        providers: [in_memory, fos_userbundle]
    in_memory:
        users:
            admin: { password: admin, roles: [ 'ROLE_ADMIN' ] }
    fos_userbundle:
        id: fos_user.user_manager

firewalls:
    main:
        pattern: ^/
        form_login:
            provider: chain_provider
            login_path:  /
            csrf_provider: form.csrf_provider
            default_target_path: /media
        logout:       true
        anonymous:    true
        http_basic:
            provider: chain_provider 
```

由于某种原因，一旦我将两个提供商都更改为`chain_provider`它就开始合作。

我的单元测试现在看起来像这样

```
public function setUp() {

    $kernel = static::createKernel();
    $this->repo = $kernel->boot();
    $this->repo = $kernel->getContainer();

    $this->client = static::createClient(array(), array(
        'PHP_AUTH_USER' => 'admin',
        'PHP_AUTH_PW'   => 'admin',
    ));
    $this->client->followRedirects();

} 
```

如果复制此内容，我建议您为您的用户使用更强的密码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T07:53:20.627

我有同样的问题，但我希望选项 2 起作用。你的例子*几乎*就在那里，帮助了我。我认为它对您不起作用的原因是用户未启用。FOSUserBundle 中的用户构造函数默认会创建禁用用户，所以你必须调用`$user->setEnable(true)`

这是我的工作示例

```
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Symfony\Component\BrowserKit\Cookie;
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;

class MyControllerTest extends WebTestCase
{
    private $client = null;

    public function setUp()
    {
        $this->client = static::createClient();
    }

    private function logIn()
    {
        $session = $this->client->getContainer()->get('session');

        $userManager = $this->client->getContainer()->get('fos_user.user_manager');

        $user=$userManager->findUserByUsername('tester');
        if (!$user) {
            $user = $userManager->createUser();

            $user->setEmail('test@example.com');
            $user->setUsername('tester');
            $user->setPlainPassword('foo');
            $user->setEnabled(true);
            $user->addRole('ROLE_SUPER_ADMIN');

            $userManager->updateUser($user);
        }

        $firewall = 'main_firewall';
        $token = new UsernamePasswordToken($user, null, $firewall, array('ROLE_SUPER_ADMIN'));

        $session->set('_security_'.$firewall, serialize($token));
        $session->save();

        $cookie = new Cookie($session->getName(), $session->getId());
        $this->client->getCookieJar()->set($cookie);
    }

    public function testCompleteScenario()
    {
        $this->logIn();

        $crawler = $this->client->request('GET', '/foo/');
        $this->assertEquals(200, $this->client->getResponse()->getStatusCode(),
            "Unexpected HTTP status code for GET /foo/".$this->client->getResponse()->getContent());

    }

} 
```

# ruby - 如何通过 Ruby 访问 Mule 消息？

> ID：10418856
> 
> 赞同：2
> 
> 时间：2012-05-02T17:35:48.373
> 
> 标签：ruby, jruby, mule

使用 Mule 脚本，我可以通过`message`变量访问 Groovy、JavaScript 和 Jython 中的 Mule 消息。使用 JRuby 我不能：

```
undefined local variable or method `message' for main:Object (NameError) 
```

Mule 文档或 Internet 对此都无话可说。如何从 Ruby 访问消息？

**代码**

```
<scripting:transformer name="SetData" doc:name="Set Data">
    <scripting:script engine="jruby">
        <scripting:text><![CDATA[File.open('/tmp/foo', 'w') { |f| f.puts message.payload }]]></scripting:text>
    </scripting:script>
</scripting:transformer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:50:48.743

Mule 绑定变量最终在全局范围内，因此您需要使用`$name`.

在你的情况下：

```
<scripting:transformer name="SetData" doc:name="Set Data">
    <scripting:script engine="jruby">
        <scripting:text><![CDATA[
           File.open('/tmp/foo', 'w') { |f| f.puts $message.payload }
        ]]></scripting:text>
    </scripting:script>
</scripting:transformer> 
```

请注意，如果您只需要消息有效负载，您宁愿使用`$payload`而不是`$message.payload`.

此外，您的转换器看起来更像是 IMO 组件：它作用于数据（写入文件）而不是对其进行转换。它甚至没有明确的返回值（你肯定不想`File.open`在 Mule 中处理返回。所以`scripting:component`这里 a 会更有序。

最后，如果您只需要写入文件，您可以使用[Mule 的 File 出站端点来](http://www.mulesoft.org/documentation/display/MULE3USER/File+Transport+Reference)执行此操作。

# javascript - 可滚动的 jQuery 工具：屏幕上显示 3 个项目，但一次滚动一个

> ID：10418858
> 
> 赞同：5
> 
> 时间：2012-05-02T17:35:51.357
> 
> 标签：javascript, jquery, css, jquery-tools

我正在使用 jQuery Tools 可滚动的轮播，一次查看三个项目，并以自动滚动和循环方式滚动一个项目。

我已经使用 CSS 来显示这三个项目。在轮播到达最后一个项目之前，这可以正常工作，它似乎要等到它经过它才能加载以下项目。

在显示最后一个项目之前，它似乎也要等到中间项目完全显示。

在这里演示：http: [//jsfiddle.net/pgxSm/6/](http://jsfiddle.net/pgxSm/6/)

对此我能做些什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T19:04:22.693

是的你可以。我也有同样的问题。

1.  包含项目的元素需要具有非常大的宽度。尝试像这样添加 CSS：

    ```
    .items {
        width: 20000em;
    } 
    ```

    实际上，这是使 jQuery Tools Scrollable 正常工作的要求之一，如开发人员的演示页面所述。这样，所有项目都可以显示在一行中，以便在滚动时最后一个项目之后没有可见空间。它是否比需要的大并不重要，只要它永远不会太小。

2.  jQuery Tools Scrollable 实际上是为一次只显示一项而构建的。这意味着您必须更改脚本的代码：

    [您可以在此处](https://github.com/jquerytools/jquerytools/raw/dev/src/scrollable/scrollable.js)找到未缩小的脚本。在 Scrollable 脚本中搜索显示的行

    ```
    cloned2 = self.getItems().eq(1).clone().appendTo(itemWrap); 
    ```

    用这一行替换它：

    ```
    cloned2 = self.getItems().slice(1,4).clone().appendTo(itemWrap); 
    ```

    这样，您可以克隆前 3 个项目（而不仅仅是第一个项目）并将其添加到项目的末尾，这样即使一次可见多个项目，也可以进行循环滚动。如果您希望一次显示更多项目，只需替换`4`为`[number of visible items] + 1`. Afaik，没有其他方法可以让 jQuery 工具同时处理多个可见的项目。我也在工作中使用这个解决方案。

    如果您想再次获得脚本的缩小版本，在您更改后，只需使用此[minifier](http://jscompress.com/)。它就像一个魅力。:)

如果这是您要查找的内容，请考虑将其标记为正确答案。谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:24:54.510

上面的[答案](https://stackoverflow.com/questions/10418858/jquery-tools-scrollable-3-items-on-screen-but-scroll-one-at-a-time/10420052#10420052)在技术上是正确的，但是，如果你是从 jQuerytools 网站捆绑下载它，它的措辞会略有不同。

您可能正在寻找的行是：

```
l = f.getItems().eq(1).clone().appendTo(h); 
```

应该以与上述答案类似的方式更改为：

```
l = f.getItems().slice(1,4).clone().appendTo(h); 
```

未经全面测试，使用风险自负。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-03T09:56:32.787

如果您想使其可配置，只需添加

```
circularVisibleItems:1 
```

变成`conf`对象然后改变

```
l=f.getItems().eq(1).clone().appendTo(h); 
```

进入

```
l=e.circularVisibleItems>1?f.getItems().slice(1,e.circularVisibleItems+1).clone().appendTo(h):f.getItems().eq(1).clone().appendTo(h); 
```

比您可以定义必须在哪个滑块中克隆多少项目。

# android - 使触摸时位图的某些区域透明->再次

> ID：10418860
> 
> 赞同：5
> 
> 时间：2012-05-02T17:36:04.980
> 
> 标签：android, bitmap, android-canvas, transparency

我试图达到与每个线程相同的结果： [Make some area of​​ bitmap transparent on touch](https://stackoverflow.com/questions/5368774/make-certain-area-of-bitmap-transparent-on-touch)。我坚持使用此答案中提供的代码：[Lumis 答案](https://stackoverflow.com/a/5439357/1370623)并根据 SteD，此解决方案应该可以工作。

不幸的是对我不起作用（也对另一个用户：[使触摸时位图的某些区域透明不起作用，它画了一个黑色圆圈](https://stackoverflow.com/questions/7033443/make-certain-area-of-bitmap-transparent-on-touch-doesnt-works-its-draw-a-blac)），我只是得到黑色圆圈。我尝试了很多东西，但没有解决这个问题。根据第二个线程的建议使背景透明并没有任何区别。

经过多次实验，我发现透明度正在起作用，当我设置这个时

```
android:theme="@android:style/Theme.Translucent" 
```

在我的 AndroidManifest.xml 中，我可以看到我的应用程序（即桌面）下的所有内容。我多次查看代码并看不到明显的错误，我认为的唯一原因是因为这是 Z 顺序，但位图和画布不维护 z 顺序。Z 排序是通过按特定顺序绘制来完成的（在此代码中是正确的）。

这是android代码优化的一些奇怪例子，还是我在android清单文件中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T04:48:45.973

最后我找到了有效的解决方案：

```
@Override
public void onDraw(Canvas canvas){
    super.onDraw(canvas);

    //draw background
    canvas.drawBitmap(bgr, 0, 150, null);
    //copy the default overlay into temporary overlay and punch a hole in it                          
    c2.drawBitmap(overlayDefault, 0, 0, null); //exclude this line to show all as you draw
    c2.drawCircle(X, Y, 80, pTouch);
    //draw the overlay over the background
    //canvas.drawBitmap(overlay, 0, 0, null);

    Paint new_paint = new Paint(/*Paint.ANTI_ALIAS_FLAG*/);
    new_paint.setXfermode(new PorterDuffXfermode(Mode.SRC_ATOP));
    canvas.drawBitmap(overlay, 0, 0, new_paint);
} 
```

但我不明白为什么工作。我正在使用以下源代码研究 xfermodes：[android Xfermodes demo](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/Xfermodes.html)并根据此图像：[Xfermodes image](http://imagepaste.nullnetwork.net/viewimage.php?id=3784)

这没有任何意义，除了 xfermode 确保覆盖位图是 bean 绘制的第二个（Z 顺序）并且透明度开始发挥作用。但是Z顺序应该通过绘图顺序来维护。

如果有人有更好的想法如何解决这个问题，请分享您的知识。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T07:10:29.730

您可以编辑 onDraw() 方法：

```
public void onDraw(Canvas canvas){
        super.onDraw(canvas);
        canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(bgr, 0, 0, null);

        c2.drawCircle(X, Y, 10, pTouch);
        Paint new_paint = new Paint(/*Paint.ANTI_ALIAS_FLAG*/);
        new_paint.setXfermode(new PorterDuffXfermode(Mode.SRC_ATOP));
        canvas.drawBitmap(overlay, 0, 0, new_paint);
    } 
```

我试过了，它奏效了！希望这个解决方案可以帮助你

# iphone - 提取字符串以进行 iPhone/iPad 应用程序本地化的工具？

> ID：10418862
> 
> 赞同：2
> 
> 时间：2012-05-02T17:36:15.293
> 
> 标签：iphone, objective-c, localization, internationalization

有没有一种工具可以从我的源代码中提取字符串，并用常量名替换它们，以便我可以自动生成我需要翻译的字符串文件？

或者我是否需要在我的项目中搜索 @" 并评估每个字符串以查看它是否应该本地化，然后手动将其移动到 strings.h 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:23:42.677

我已经阅读了两种有助于本地化的工具：

*   ibtool，处理xib文件
*   genstrings 生成字符串表

据我所知，两者都包含在 Mac OSX 中，但我没有使用它们中的任何一个。

# php - 如何从表中获取日期然后将其存储到 php 中的变量

> ID：10418868
> 
> 赞同：0
> 
> 时间：2012-05-02T17:36:24.263
> 
> 标签：php

我有一个表，在用户注册时按时间戳存储 current_date。

```
seeker
name.. current_date
ali...2012-04-22 22:12:36 
```

现在我必须将此日期存储在某个变量中。我正在使用这个查询：

```
$uname= $_REQUEST['name2']; 

$qry5= "select current_date from seeker where name='$uname'";
                $res4=mysql_query($qry5, $con);
                $rs5= mysql_result($res4,0); 
                echo $rs5; 
```

此查询应返回存储在用户“2012-04-22”的通信中的日期，但此查询返回今天的日期“2012-05-02”。请告诉我我在哪里做错了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:39:24.160

[`CURRENT_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-date)是 MySQL 中的一个特殊关键字，它返回今天的日期，作为 function 的同义词`CURDATE()`。如果您将列括在反引号中，它应该可以工作，但最好将列重命名为不与 MySQL 关键字冲突的名称。由于该列实际保存的值不是*当前日期*，而是用户的注册日期，我建议将其重命名为`registration_date`.

```
// Enclose current_date in backquotes as `current_date`
$qry5= "select `current_date` from seeker where name='$uname'"; 
```

另外，不要忘记 escape `$uname`，因为它目前容易受到 SQL 注入的影响。

```
$uname = mysql_real_escape_string($_POST['name2']); 
```

# python - Python 包安装程序 exe 是如何工作的？

> ID：10418869
> 
> 赞同：1
> 
> 时间：2012-05-02T17:36:24.937
> 
> 标签：python, setuptools

Windows 7 x86 的 setuptools 安装程序被命名为 exe 文件，但可以作为 zip 文件打开。当我查看它时，有两个顶级文件夹：PURELIB 和 SCRIPTS。这些是什么，当我双击这个 exe 时，Windows 为我运行它是怎么回事，虽然它是一个 zip 文件？也就是说，Windows 怎么知道在这个 zip/exe 中运行什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:38:29.527

这是一个[自解压档案](https://en.wikipedia.org/wiki/Self-extracting_archive)。

> 自解压存档是一种计算机应用程序，其中包含文件存档以及提取此信息的程序。此类文件存档不需要从存档中提取第二个可执行文件或程序，因为存档文件通常需要。因此，任何人都可以提取存档中的文件，无论他们是否拥有适当的解压缩程序，只要该程序可以在他们的计算机平台上运行。

它是一个可执行文件，只是您的解压软件知道查找自解压档案，并将其视为普通档案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:49:15.687

> 这些是什么，当我双击这个 exe 时，Windows 为我运行它是怎么回事，虽然它是一个 zip 文件？

来自[http://zziplib.sourceforge.net/sfx-make.html](http://zziplib.sourceforge.net/sfx-make.html)

> 基本方案是这样的：最终文件将有一个从偏移量 null 开始的 EXE，然后是 ZIP 存档的数据条目。ZIP 存档的最后一部分是 ZIP 中央目录，它在文件末尾结束。

魔术是可能的*，*因为 exe 格式允许将任何数据附加到可执行文件中，而 zip 格式允许将任何数据附加到存档中。

# sorting - excel-vba中的一些字符串匹配难题

> ID：10418870
> 
> 赞同：1
> 
> 时间：2012-05-02T17:36:27.033
> 
> 标签：sorting, excel, matching, vba

我正在为分类问题编写一个程序。我以代码、描述、小计的形式获取数据，例如：

```
LIQ013 干邑 25
LIQ023 伏特加 21
FD0001 椒盐脆饼 10
PP0502 餐巾纸 5

```

现在这一切通常都遵循这样的......问题是我的公司提供了许多不同的酒吧。因此，每月大约有 800 条记录包含这样的数据。我的老板想要分解数据，以便她知道我们每个月在某个类别上的花费。例如：

```
酒精 46
食品 10
论文 5

```

我想到的是我设置了一种“数据库”，它实际上是一个包含如下条目的 csv 文本文件：

```
酒液、干邑白兰地、酒精
酒液、伏特加、酒精
FD、椒盐脆饼、食品
FD、爆米花、食品

```

我已经编写了将数据库作为工作表导入并将每个字段分成自己的列的代码。我希望 excel 浏览该文件，并在它看到 LIQ 和 COGNAC 时为其分配 ALCOHOL 指示符。这样我就可以使用数据透视表来获取类别总和。例如，我希望最终产品看起来像这样：

```
LIQ013 干邑白兰地 25 酒精
LIQ023 伏特加 21 酒精
FD0001 椒盐脆饼 10 食品
PP0502 餐巾纸 5 纸

```

有没有人有什么建议？我担心的是，单点表达式仅与代码匹配，即仅与 LIQ 匹配而与 COGNAC 不匹配，以后可能会在描述冲突时导致问题？我还希望用户能够添加分类帐条目，以便识别术语的数据库增长并变得更广泛，希望更准确。

# 编辑

根据@Marc 的要求，我包括我的解决方案：

[代码](https://docs.google.com/document/pub?id=1-1HycqztBQTUYmXFpM5lgCxrFwwMJkbMe4gdqe2kyvw)
[文件](https://docs.google.com/spreadsheet/pub?key=0Al_4JvWSCtTndER3YVFIRnRBd0p4TndYOWZTb01ENmc&output=html)

请注意，这是一个相当愚蠢的解决方案。我删除了一堆与健壮代码相关但与我们的特定解决方案无关的故障保护和其他代码。

为了使它起作用，有两个部分：

第一个是宏源代码第二个是实际文件

因为所有的故障保险都被删除了，所以需要导入文件才能**完全**按照它出现的方式表现出来。即googleDoc上的Sheet1应该是excel上的Sheet1，开始在单元格“A1”处粘贴数据。在运行宏之前，请务必在 Sheet1 中选择单元格“A1”。正如我所说，成品中有一些实现使其更加用户友好！请享用！

# 编辑2

这些链接很烂。他们不能很好地粘贴到excel中。如果您对它感到满意，我可以通过电子邮件将实际工作簿发送给您。这将有助于保留格式等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:46:44.120

在单独的工作表中使用查找表。查找表的 A 列包含查找值（例如 PRETZELS），B 列包含类别（食物、酒精等）。在您希望类别显示在原始工作表中的单元格中（让我们使用 D3 作为 B3 保存“PRETZELS”值的结果），键入以下公式：

```
=VLOOKUP(B3,OtherSheet!$A$1:$B$500,2,FALSE) 
```

这假设您的查找表在`A1:B500`名为“OtherSheet”的工作表的范围内。

此公式告诉 Excel 在查找的 A 列中查找查找值 (B3)，并从查找表的 B 列返回相应的值。绝对引用 (the `$`) 确保当您在其他单元格中复制/粘贴公式时，您的公式不会增加单元格引用。

当您获得新的类别和/或库存时，您只需向其中添加新行即可在此位置更新您的查找表。

# php - PHP XML Foreach 错误

> ID：10418873
> 
> 赞同：0
> 
> 时间：2012-05-02T17:36:55.447
> 
> 标签：php, xml, xml-parsing

循环遍历子元素时出现错误：

```
 $placeById=simplexml_load_file("http://www.43places.com/service/get_place_by_id?api_key=1234&id=".$placeId);
 $children=$placeById->children;
 echo '<ul>';
 foreach ($children as $child)
 {
      echo '<li>'.$child->child.'</li>';
 }
 echo '</ul>'; 
```

我的输出只有这个：

*   阿拉巴马州

虽然有几个孩子，看[这里的 XML](http://www.43places.com/service/get_place_by_id?api_key=1234&id=103061)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:42:52.310

你唯一引用的第一个孩子，试试这个：

```
$placeById=simplexml_load_file("http://www.43places.com/service/get_place_by_id?api_key=1234&id=".$placeId);
$children=$placeById->children;
echo '<ul>';
foreach ($children->child as $child) {
  echo '<li>'.$child.' - '. $child['id'].'</li>';
}
echo '</ul>'; 
```

# java - 带有 2 对公钥/私钥的 SSL

> ID：10418874
> 
> 赞同：1
> 
> 时间：2012-05-02T17:37:03.163
> 
> 标签：java, security, ssl

我是`SSL`协议的初学者。我想将我的应用程序连接到服务器。服务器找到我`Certificate File`并想要我的`Certificate File`. `Certificate`文件是自签名的。我的应用程序开发者`Java`和服务器应用程序开发者`C`。服务器`Certificate`由`OpenSSL`.

我现在有 `private/public`我的自我和服务器`certificate`文件。

我不知道我该怎么办？我尝试了一天，但没有得到任何结果。

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

**已编辑**

我在网上研究，发现我必须研究`two-way SSL authentication by java`任何人有更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:05:10.543

您将不得不为客户端和服务器使用 OpenSSL 实现。该协议是标准的，因此您可以在每一侧使用任何实现。

看看这里的客户端示例（在 java 中）： [http ://stilius.net/java/java_ssl.php](http://stilius.net/java/java_ssl.php)

使用了标准的 java 类，因此您也可以以此为起点来了解要开始阅读的 javadocs！;)

至于客户端，您可以使用 openssl （它也是一个库）。我从来没有在 C 上使用过 SSL，所以我无法帮助你。

通常，您会像对待普通 tcp 套接字一样对待 sslsocket。:)

* * *

作为旁注，您*可能*会对使用 HTTPS 而不是原始 SSL 感兴趣，具体取决于您的应用程序（只是说；您可能想考虑一下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:59:14.530

不确定我是否理解正确；但似乎您的客户端无法连接到您的服务器。您需要在客户端信任库中导入您的服务器证书。由于您的客户端是 Java 应用程序，因此您需要 Java 兼容 PKCS 格式的信任库。获取有关使用 java Keytool 实用程序创建信任库的帮助。由于您的服务器端是 C 应用程序，您需要为服务器端创建一个与 C 兼容的信任库。您可以通过简单地将证书的 PEM 表示复制到一个文件 (cat server.crt > truststore.pem) 中以用作信任库。由于您的证书是自签名的，因此仅复制背书机构的证书（在您的情况下是服务器证书本身）就足够了。配置您的客户端和服务器以使用它们各自的信任库，它应该可以工作。

# excel - 复制数据透视表格式

> ID：10418875
> 
> 赞同：3
> 
> 时间：2012-05-02T17:37:05.400
> 
> 标签：excel, vba

我无法将数据透视表格式复制到新工作表。基本上我想要做的是：

```
someRange.Copy
someOtherRange.pasteSpecial xlPasteValues
someOtherRange.pasteSpecial xlPasteFormats 
```

基本上，我想要一个新工作表中数据透视表上当前视图的精确副本，但我只想要值和格式（并且不再连接到数据透视表）。手动执行此过程会产生正确的结果，但由于某种原因，当我通过 vba 使用相同的方法时，格式不会复制......想法？

**更新：** 要求的确切代码：

```
Application.CutCopyMode = False
pivotSheet.Range(pivotSheet.usedRange.Cells(1, 2), pivotSheet.Cells(pivotSheet.usedRange.Rows.Count, pivotSheet.Columns.Count)).Copy
updatesSheet.Range(updatesSheet.Cells(1, 1), updatesSheet.Cells(pivotSheet.usedRange.Rows.Count, pivotSheet.usedRange.Columns.Count)).PasteSpecial xlPasteValues
updatesSheet.Range(updatesSheet.Cells(1, 1), updatesSheet.Cells(pivotSheet.usedRange.Rows.Count, pivotSheet.usedRange.Columns.Count)).PasteSpecial xlPasteFormats
Application.CutCopyMode = False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:58:18.323

**久经考验**

```
Option Explicit

Sub Sample()
    With Sheets("Sheet1")
        .Range("H1:I6").Copy

        With .Range("M7")
            .PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
            :=False, Transpose:=False

            .PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, _
            SkipBlanks:=False, Transpose:=False
        End With
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/f76141db4cf3c2d82b4f75191dd3e976.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:47:39.393

在手动复制和粘贴之前，开始录制宏。完成后，停止录制并检查录制的代码。你会得到一堆额外的东西，你可以删除，但你也会得到正确的语法来做你想做的事。

# vb.net - 比较两个二维列表并确定差异 VB.NET

> ID：10418879
> 
> 赞同：0
> 
> 时间：2012-05-02T17:37:29.990
> 
> 标签：vb.net, arrays, visual-studio

我声明我的二维列表：

```
Dim _invoiceitems As New List(Of List(Of String))
Dim _dbitems As New List(Of List(Of String)) 
```

每个列表都是这样填充的：

![二维列表填充](../Images/1c33a140da0a4b15d316c4460c518aa5.png)

示例代码填写：

```
_invoiceitems.Add(New List(Of String))
_invoiceitems(0).Add("Code #")
_invoiceitems(0).Add("Quantity") 
```

好吧，现在我需要一个名为 (_changesitems) 的第三个列表。请注意，此结果存在差异：如果找到，则为减去数量的结果（dbitems - invoiceitems）。

![在此处输入图像描述](../Images/594ca54be16f70075f93a625e1c1b466.png)

我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:21:43.353

以下代码将生成您正在寻找的结果：

```
Private Function getChangesItems(ByVal invoiceItems As Dictionary(Of String, Integer), ByVal dbItems As Dictionary(Of String, Integer)) As Dictionary(Of String, Integer)
    Dim changesItems As Dictionary(Of String, Integer) = New Dictionary(Of String, Integer)()
    Dim allCodes As List(Of String) = New List(Of String)()
    allCodes.AddRange(invoiceItems.Keys)
    allCodes.AddRange(dbItems.Keys)
    For Each code As String In allCodes
        If Not changesItems.ContainsKey(code) Then
            Dim dbQuantity As Integer = 0
            Dim invoiceQuantity As Integer = 0
            If dbItems.ContainsKey(code) Then
                dbQuantity = dbItems(code)
            End If
            If invoiceItems.ContainsKey(code) Then
                invoiceQuantity = invoiceItems(code)
            End If
            Dim changeQuantity As Integer = dbQuantity - invoiceQuantity
            If changeQuantity <> 0 Then
                changesItems.Add(code, changeQuantity)
            End If
        End If
    Next
    Return changesItems
End Function 
```

我使用字典而不是其他人推荐的列表。只要您的数据只包含一个代码和一个值，字典就更合适了。如果您有更多列，我建议创建一个包含每列属性的类，然后制作该类类型的列表，而不是简单的二维字符串列表。这样做会更安全且更易于阅读。

# collections - Salesforce 批处理 Apex 类 - 查询大型数据集

> ID：10418891
> 
> 赞同：0
> 
> 时间：2012-05-02T17:38:29.310
> 
> 标签：collections, batch-file, salesforce, force.com

我有一个批处理 apex 类，我在其中构建网站和电子邮件的集合，以便我可以使用这些集合来过滤将被制成集合的其他查询。设置完所有集合后，我想通过范围的最后一个循环来执行业务流程。

小样：

```
for(Object o : scope)
{
listEmails.add(o.Email);
listWebsites.add(o.Websites);
}

Map<String, Account> accounts = Gather all accounts where website not in :listWebsties; //Website is key
List<String, Contact> contacts = Gather all contacts where email not in :listEmails; //Email is key

for(Object o : scope)
{
   Account = accounts.get(o.website);
   Contact = contacts.get(o.Email);

   Perform business logic here
} 
```

问题是当我运行这个批处理时，它会持续处理几个小时。当使用一个相当小的数据库时，这工作得很好。但是在更大的环境中工作，也许这不是最好的解决方案。

谁能帮助我用更有效的方法加快批处理过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:00:52.080

无论如何要发布整个批处理顶点课程吗？或者帮助更多地了解数据？从您的地图上看，您的所有帐户（理论上）都有独特的网站，并且您的所有联系人都有独特的电子邮件？我假设您手动构建这些地图？那就是您遍历帐户并执行 map.put(account.website,account)？

您是否有任何系统调试语句来确认您的地图大小？如果调用accounts.get() 时没有帐户或没有联系人会发生什么？

以及业务逻辑——它是否更循环？

您是否以静态方式使用批处理变量 - 即您可以有一个计数器来计算处理的记录总数。如果是这样，您的变量是列表吗？这当然是危险的。

还有什么对象是你的范围对象？这并不重要，但我认为您希望您的范围是帐户本身或联系人本身。

我会尝试将 system.debug 语句添加到您的批处理中以验证它是否正在运行并查看无限循环可能发生的位置。

# ios - XCode (4.3.2) 自动补全和 IBAction

> ID：10418901
> 
> 赞同：5
> 
> 时间：2012-05-02T17:39:00.223
> 
> 标签：ios, xcode, autocomplete

我试图找出在 Xcode 中创建 IBAction 最不烦人的方法，而不会自动完成减慢我的速度：

所以在这里，在 .h 中，我创建了一个 IBAction：

![在此处输入图像描述](../Images/d55821b2d824cd52f9fa30ce79d9af43.png)

我键入打字，自动完成启动，太棒了，让我们按 Tab 并按 Tab 我的 IBAction 的名称

![在此处输入图像描述](../Images/5f26f171797a7ed9b6dc8f0aba8ce6e0.png)

这里没有显示的是光标，它在“myAction”之后闪烁，但在自动完成的“（id）发件人”之前所以我的第一个问题：1）你如何在“发件人”之后跳转以添加我的“;” 在这种情况下，选项卡不会这样做。我正在使用Command +右箭头，常规的行尾快捷方式，但感觉自动完成应该足够聪明以响应选项卡，返回，......
然后在.m中我实现我开始输入的方法-（IB。 ..

![在此处输入图像描述](../Images/0e1a29e366456c4122fb275caa052d83.png)

很好，让我们创建一个选项卡并开始输入我的方法的名称：

![在此处输入图像描述](../Images/0741ada7a7de9b2b339d442e39a065f8.png)

哎呀，我们可以看到问题来了，我不想要多个（id）发件人......显然，如果我再做一个标签：

![在此处输入图像描述](../Images/805052df86436f33aa7deb3b3fb0b252.png)

我最终不得不手动清洁

所以这是我的第二个问题：2）在这种情况下你如何使用自动完成功能来避免这个问题

我必须假设我在做一些“错误”的事情，因为我一定不是唯一一个试图自动完成某些 IBAction 的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T03:20:23.013

我已经忍受这种痛苦太久了。刚刚发现你可以在你的实现中输入“-methodName”，Xcode 会自动为你完成其他所有事情。

![例子](../Images/e78ca88e5ccfb5acace07b954dadb729.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:38:07.587

最好的答案是你的方法。以我的经验，我只成功使用了命令+右箭头。这对我没有太大影响，所以我不去想它。有时，我只是将鼠标放在屏幕的右侧，这样我就可以轻松单击并使光标跳到最右边的列……但这需要准确性，而且我大部分时间都错过了我的行……

# php - 如何将JPGraph第二个Y轴数据放在前面（AddY2）？

> ID：10418905
> 
> 赞同：2
> 
> 时间：2012-05-02T17:39:09.017
> 
> 标签：php, graph, jpgraph

我有这个 JPGraph（有正确的数据）：

```
// Create the graph. These two calls are always required
$graph = new Graph(640,350,"auto");
$graph->SetScale("textlin");
$graph->SetY2Scale("lin",0,100);

// Create the bar graph
$bplot1 = new BarPlot($datay);
$bplot1->SetFillGradient("darkolivegreen1","darkolivegreen4",GRAD_VERT);
$bplot1->SetWeight(0);
$graph->Add($bplot1);

// Create the line graph
$lplot = new LinePlot($datay2);
$lplot->SetBarCenter();
$lplot->SetStepStyle();
$graph->AddY2($lplot);

// Display the graph
$graph->Stroke(); 
```

这很好用（至少它显示了正确的数据），但我的问题是 Y2 数据在栏后面。我想要 Y2 数据在前面，这样数据可以以不透明的方式显示，我可以看到它是多少百分比。

我尝试重新排列代码，以便 AddY2 排在第一位或最后，甚至将其混合，但仍然相同 - 总是在栏杆后面。

有人对此有任何见解吗？

如果这不可行，那么还有什么替代方案 - 任何其他与 JPGraph 一样出色的免费图形工具（我使用 CentOS 和 PHP）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T21:28:42.913

如果我了解您要实现的目标...尝试翻转 Y 刻度。

`$graph->Add($bplot1);`到`$graph->AddY2($bplot1);`

和

`$graph->AddY2($lplot);`变成`$graph->Add($lplot);`

**编辑：**

正如我所误解的那样...... Add`$graph->SetY2OrderBack(false);`会将 Y2 放在 Y1 的前景上。 **来源：** [docs/classref/Graph.html#_GRAPH_SETY2ORDERBACK](http://jpgraph.net/download/manuals/classref/Graph.html#_GRAPH_SETY2ORDERBACK)

# java - 在 NetBeans IDE 中运行关闭挂钩

> ID：10418907
> 
> 赞同：3
> 
> 时间：2012-05-02T17:39:13.557
> 
> 标签：java, netbeans

我正在开发一个将作为服务运行的应用程序。我在程序中添加了一个关闭挂钩来进行一些文件清理。当我将程序安装为服务（在 Linux 上作为守护程序或 Windows 服务）时，关闭挂钩会正确执行。但是，在 IDE 中运行时，永远不会执行关闭挂钩。有没有办法在 IDE 中停止正在运行的进程并执行关闭挂钩？

谢谢，巴勃罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:11:03.383

不幸的是，在当前的 Netbeans 系统中没有办法做到这一点，因为两种类型的应用程序测试（调试和正常）的终止方法都可以终止进程，使其没有机会清理。根据您的应用程序的架构，您可能能够添加 System.exit(0) 调用，但除此之外，您还无法在控制台中打开它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:18:42.963

我不同意。根据定义，unix 中的 sigkill 或 windows 中的终止进程将终止**正在**运行的进程，而不赋予应用程序捕获这些事件的任何能力。这是终止无响应进程所必需的。仅当进程不响应 siginit (ctrl c) 或 sigterm 或 windows 中的结束任务时，才应使用这些信号。NetBeans 似乎发送的是 sigkill 而不是 siginit 或 sigterm。就我而言，这是不好的做法。

应该有一个辅助选项来终止进程，但是主要的结束进程按钮应该是发送 siginit 或 sigterm。应用程序应预期用户在其应用程序上按**ctrl c**或结束任务，并尽最大努力干净地关闭`files/sockets`并保存`persistent/state`数据。应用程序不应预期 sigkill 或终止进程，而应以不需要 sigkill 或终止进程的方式开发。

通过 NetBeans 使用这些方法作为从 IDE 终止应用程序的唯一手段是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:18:29.287

没有。不要使用关闭挂钩清理程序。从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)...

> 在极少数情况下，虚拟机可能会中止，即在没有完全关闭的情况下停止运行。当虚拟机在外部终止时会发生这种情况，例如在 Unix 上使用 SIGKILL 信号或在 Microsoft Windows 上使用 TerminateProcess 调用。如果本地方法出错，例如破坏内部数据结构或尝试访问不存在的内存，虚拟机也可能中止。如果虚拟机中止，则无法保证是否会运行任何关闭挂钩。

当合同说不能保证您的关闭挂钩将始终被调用时，不建议将它们用于关键操作。

# java - SimpleXml 无法解析的日期

> ID：10418909
> 
> 赞同：0
> 
> 时间：2012-05-02T17:39:23.030
> 
> 标签：java, android, simple-framework

我在我的 Android 项目中使用 Simple XML 进行 XML 序列化。我在解析 Date 对象时遇到问题。我收到一个例外：

> 无法解析的日期：2012-05-01T08:22:34+02:00

谁能帮我告诉 Simple XML 日期格式是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:38:45.240

SimpleXML 仅支持某些`DateFormat`'s，但您可以`Transform`为 Dates 使用自定义。

试试我在此处发布的示例：[使用 SimpleFramework 解析日期](https://stackoverflow.com/questions/12277887/parse-date-with-simpleframework/12492925#12492925)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T19:01:49.840

您在日期结束时有一个时区。Java 可以解析时区偏移量，但没有':' 分隔符。因此，如果您的日期时区是 +0200 而不是 +02:00，它应该可以工作。您可以通过[SimpleDateFormatter](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)运行它。

# autotools - 如何使用 autotools 执行但不安装二进制文件？

> ID：10418919
> 
> 赞同：2
> 
> 时间：2012-05-02T17:40:19.957
> 
> 标签：autotools, automake

我正在编写一个小型库，并希望使用带有 automake 1.11 的 autotools 来访问它。唯一有趣的结果是库 libfoo.so。

我为要在 make 过程或运行时执行的库编写了一个单元测试`make check`。我不希望单元测试出现在`$PREFIX/foo/bin/`.

我如何实现这些目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T18:27:48.273

正如 automake 手册所述，您使用`"check_"`前缀。假设库是在目录下构建的`src/`，并且单元测试在`tests/`- 那么在`tests/Makefile.am`文件中：

```
check_PROGRAMS = unit_test

unit_test_SOURCES = unit_test.c
unit_test_LDADD = $(top_builddir)/src/libfoo.la 
```

我假设你`libtool`当然在使用。如果您正在构建共享库，这将负责链接、动态路径等。

您还应该看看`TESTS`automake 中变量的使用。

# android - 无重复的 drawable-xlarge-mdpi 和 drawable-sw600dp-mdpi 资源

> ID：10418926
> 
> 赞同：6
> 
> 时间：2012-05-02T17:40:49.673
> 
> 标签：android

我想为 drawable-xlarge-mdpi 和 drawable-sw600dp-mdpi 提供相同的图像资源/drawable。

看来我能做到这一点的唯一方法是在 res/ 下创建两个文件夹并将同一组资源复制到每个文件夹中。

使用布局我们可以做别名。即在具有特定限定符的值文件夹中创建一个名为 layout.xml 的文件，并添加项目以指向两个限定符的单个布局文件：

*   值-xlarge\values.xml
*   值-sw600dp\values.xml

这两个文件的内容将类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="activity_shows" type="layout">@layout/activity_shows_tablet</item>
</resources> 
```

（匹配 xlarge 的设备或匹配 sw600dp 的设备现在将使用 activity_shows_tablet.xml 作为“activity_shows”的布局文件）

可绘制对象有类似的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T18:04:37.163

> 可绘制对象有类似的方法吗？

它应该与布局完全一样

将`png`资源放入默认文件夹

```
res/drawable/largescreen.png
res/drawable/smallscreen.png 
```

创建`.xml`引用`png`s 的资源

```
res/drawable/image.xml
res/drawable-xlarge-mdpi/image.xml
res/drawable-sw600dp-mdpi/image.xml 
```

`image.xml`类似的东西在哪里（[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#bitmap-element)）

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/largescreen" /> 
```

然后像直接使用 png 一样使用 XML 资源

```
<ImageView
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:src="@drawable/image" /> 
```

# asp.net-mvc-3 - Html.RenderAction 找不到我的控制器

> ID：10418928
> 
> 赞同：2
> 
> 时间：2012-05-02T17:40:59.520
> 
> 标签：asp.net-mvc-3

我有一个剃须刀母版页 (_Layout.cshtml)，我在其中布局了一个 3 列网站。在其中一个侧栏中，我想显示“登录控件”

根据我的阅读，我可以使用 Html.RenderAction 来调用我的 LoginController，它会在侧栏中显示登录视图。

但是，当我运行它并将其指向控制器/视图以填充 RenderBody() 时，对 Html.RenderAction("Index", "LoginController") 的调用失败并出现此错误。

```
 "The controller for path '/[insert path to a Controller/View to fill the 
  RenderBody()]' was not found or does not implement IController. " 
```

那么，我做错了什么？

我的代码真的很简单：

```
 <div id="Navigation">@{ Html.RenderPartial("Test"); }</div>
    <div id="Main">@RenderBody()</div> 
    <div id="Misc">@{ Html.RenderAction("Index", "LoginController");}</div> 
```

在我的控制器文件夹中，我有 RenderBody 和 LoginController 的控制器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T18:36:39.323

在 MVC 中按约定指定控制器名称时，不包括“控制器”部分。

```
Html.RenderAction("Index", "LoginController") 
```

除非您有一个名为“LoginControllerController”的控制器，否则它将无法工作

尝试

```
<div id="Misc">@{ Html.RenderAction("Index", "Login");}</div> 
```

# android - 如何以编程方式将视图添加到 RelativeLayout？

> ID：10418929
> 
> 赞同：64
> 
> 时间：2012-05-02T17:41:10.963
> 
> 标签：android, android-layout, android-relativelayout

你能给我一个非常简单的例子，以编程方式`RelativeLayout`在给定位置添加子视图吗？

例如，要反映以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="107dp"
    android:layout_marginTop="103dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我不明白如何创建适当的`RelativeLayout.LayoutParams`实例。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-02T17:48:15.353

这是一个让您入门的示例，请根据需要填写其余部分：

```
TextView tv = new TextView(mContext);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
    ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
params.leftMargin = 107
...
mRelativeLayout.addView(tv, params); 
```

RelativeLayout.LayoutParams 和构造函数的文档在[这里](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#RelativeLayout.LayoutParams%28int,%20int%29)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-02T17:49:10.323

首先，你应该给你的RelativeLayout一个id，比如说relativeLayout1。

```
RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.relativeLayout1);
TextView mTextView = new TextView(context);
mTextView.setText("Dynamic TextView");
mTextView.setId(111);
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
params.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
mainLayout.addView(mTextView, params); 
```

# maven - 如何让 Jenkins 在 Maven 2 构建中快速失败？

> ID：10418931
> 
> 赞同：3
> 
> 时间：2012-05-02T17:41:22.357
> 
> 标签：maven, jenkins, maven-2, maven-surefire-plugin

我正在尝试使用 Jenkins 构建一个多模块 Maven 项目。

当我使用与 Jenkins**相同的环境（variables/settings.xml/user）在****命令行**上构建相同的项目时，测试失败会导致构建立即失败：

 **```
Failed tests:
  testSomething(com.package_name.TestSomethingOrTheOther)

Tests run: .., Failures: 1, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] There are test failures.
...
# Build fails immediately 
```

在**Jenkins**中构建时：

```
Failed tests:
  testSomething(com.package_name.TestSomethingOrTheOther)

Tests run: .., Failures: 1, Errors: 0, Skipped: 0

[ERROR] There are test failures.
...
# Build continues to other modules
...
[INFO] Reactor Summary:
[INFO] ------------------------------------------------------------------------
[INFO] parent ................................................ SUCCESS [.....s]
[INFO] module-that-failed .................................... SUCCESS [.....s]
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------ 
```

该构建声明所有模块和父模块都是**成功**的，而实际上，这些应该是失败的。

**如何让 Jenkins 在 Maven 构建中强制执行快速失败，就像 Maven 在命令行中所做的那样？**

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T20:24:13.217

Jenkins 默认忽略测试失败，然后将构建标记为不稳定（如果有的话）。

控制它的参数是：testFailureIgnore（参见[surefire插件文档](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)）

我从未尝试过，但我会尝试覆盖 jenkins 作业配置上的该设置：

-Dmaven.test.failure.ignore=false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:02:44.790

您可以指定`MAVEN_OPTS`是否单击“*构建*”部分中的“*高级*”按钮。**

# xml - 使用系统 xsd 对 xml 进行离线验证

> ID：10418932
> 
> 赞同：3
> 
> 时间：2012-05-02T17:41:23.767
> 
> 标签：xml, xsd, xsd-validation

当我们将 xsd 放入 xsi:schemaLocation 时，它会从 Internet 下载 xsd 并验证 xml 吗？

如果是这种情况，我想通过下载 xsd 来进行离线验证，我该如何实现？

我知道如何对 DTD 进行离线验证，但不确定 xsd。

对于 DTD，我目前正在执行以下操作：

```
<!DOCTYPE struts-config SYSTEM "struts-config_1_1.dtd"> 
```

我可以做这样的事情吗？

**从**

```
<!-- beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd"--> 
```

**至**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           file://spring-beans-3.0.xsd
                           http://www.springframework.org/schema/context
                           file://spring-context-3.0.xsd"> 
```

编辑：

看来我错了。spring 只有在 jar 文件中找不到 dtd/xsd 时才会访问 Internet。我拔下互联网插头，发现应用程序运行良好。

另外，来源：[https ://forum.hibernate.org/viewtopic.php?f=1&t=949031](https://forum.hibernate.org/viewtopic.php?f=1&t=949031)

很抱歉给您带来麻烦和错误的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:57:20.017

是的你可以; 您需要确保的是 URI 必须对您的方案有效（在您的情况下为 file://，在 Windows 上更像是 file://c:/something/my.xsd）。

确保所有 XSD 文件也都存储在本地，并且 XSD 文件之间的所有引用都是正确的。

# vb.net - VB.NET 应用程序中的连接字符串

> ID：10418940
> 
> 赞同：1
> 
> 时间：2012-05-02T17:42:25.953
> 
> 标签：vb.net

我以前只使用过asp.net 网站。我知道在 ASP.NET 网站中，可以在 web.config 文件中找到连接字符串。

我的问题是现在我已经开始使用需要连接到数据库的 VB.NET 应用程序。连接字符串是如何创建的，我应该把它放在哪里？

谢谢！

这是整个 app.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration> 
  <connectionStrings>
    <add name="dbAsthmaConnectionString" connectionString="Data Source=9300-00\SQLEXPRESS;Initial Catalog=dbStore;Persist Security Info=True;User ID=johnsmith;Password=1234" providerName="System.Data.SqlClient"/>
  </connectionStrings>

  <system.diagnostics>
    <sources>
      <!-- This section defines the logging configuration for My.Application.Log -->
      <source name="DefaultSource" switchName="DefaultSwitch">
         <listeners>
           <add name="FileLog"/>
             <!-- Uncomment the below section to write to the Application Event Log -->
             <!--<add name="EventLog"/>-->
         </listeners>
      </source>
    </sources>
    <switches>
      <add name="DefaultSwitch" value="Information" />
    </switches>
    <sharedListeners>
      <add name="FileLog"
           type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" 
           initializeData="FileLogWriter"/>
      <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
      <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
    </sharedListeners>
  </system.diagnostics>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T19:12:28.313

好的，这是一个示例：1-您的 app.config 应该如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="Amlakconn" connectionString ="Data Source=KHASHAYAR-PC\SQLEXPRESS;Initial Catalog=Amlak;Integrated Security=True"/>
  </connectionStrings>
</configuration> 
```

2-在您的代码中，您可以通过以下方式访问连接字符串：

```
private string conn = ConfigurationManager.ConnectionStrings["Amlakconn"].ConnectionString; 
```

去试试吧；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T23:22:25.337

The other answers tell you where to put the connection string: [http://msdn.microsoft.com/en-us/library/ms254494(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms254494(v=vs.80).aspx)

This is the easiest way to create a Connection String.

a) Create a Text file, rename the extension from TXT to UDL, press enter.

b) Double click the UDL file and choose OLEDB Provider For SQL Server > Next > type the Database Server name > Select the database and click Test Connection.

![enter image description here](../Images/8ce46933cbf7509c9eb64cc53b055782.png)

c) When the Test passes, close the UDL file and open it with notepad, the bold lines are the connection string:

[oledb] ; Everything after this line is an OLE DB initstring
Provider=SQLOLEDB.1;**Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=YourDatabase;Data Source=SQLEXPRESS**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:50:34.757

非 ASP.NET 应用程序也可以使用配置文件，只是没有命名为`web.config`. 该文件的结构与您从 ASP.NET 中了解的完全相同，包括`ConnectionStrings`部分。您可以从需要的部分复制内容`web.config`并将其粘贴到`app.config`. 在项目中，它将显示为，`app.config`但在 bin 文件夹中，它以可执行文件名（带有 exe 扩展名）加上“.config”命名。

要创建此文件，请转到项目`Add -> New Item`并选择应用程序配置文件。要访问您的连接字符串，请创建/复制`<ConnectionString>`部分到`<configuration>`部分，然后使用以下代码：

```
string conStr = ConfigurationManager.ConnectionStrings["ConStringName"].ConnectionString;
SqlDataAdapter adapter = new SqlDataAdapter("Select * from Users", conStr); 
```

您需要添加对“System.Configuration”程序集的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T17:53:40.543

如果你在做一个 webapp 项目也是一样的！你可以把它放在 web.config 文件中，如果你的项目是 win 应用程序，你可以在你的项目中添加一个 app.config 文件并将连接字符串放入其中！

# c# - 让 NHibernate 以中等信任度处理共享主机

> ID：10418941
> 
> 赞同：2
> 
> 时间：2012-05-02T17:42:27.850
> 
> 标签：c#, asp.net, nhibernate, shared-hosting, medium-trust

一位朋友在他的计算机上本地使用 NHibernate 制作了一个 ASP.NET 网站，并在我从 SVN 存储库下载它之后在我的计算机上使用它。但是，我们正在尝试将其托管在具有中等信任级别的共享托管环境中。服务器给出以下异常（部分堆栈跟踪）：

```
[SecurityException: Request for the permission of type 'System.Security.Permissions.ReflectionPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap, StackCrawlMark& stackMark) +31
   System.Security.CodeAccessPermission.Demand() +46
   System.Reflection.Emit.DynamicMethod.PerformSecurityCheck(Type owner, StackCrawlMark& stackMark, Boolean skipVisibility) +166
   System.Reflection.Emit.DynamicMethod..ctor(String name, Type returnType, Type[] parameterTypes, Type owner, Boolean skipVisibility) +40
   NHibernate.Bytecode.Lightweight.ReflectionOptimizer.CreateDynamicMethod(Type returnType, Type[] argumentTypes) in ReflectionOptimizer.cs:104 
```

与反思有关。NHforge.org 上有一个[指南](http://nhforge.org/wikis/howtonh/run-in-medium-trust.aspx)，告诉您关闭反射优化器。我找不到如何做到这一点，但我怀疑你根本无法在 VS2010的**ASP.NET 网站中做到这一点。**SO 上的其他人建议首先将其转换为**ASP.NET Web 应用程序**，您可以在其中对程序集引用进行更多控制。

问题是网站（这是一个学校项目）的截止日期已经是下周五了。我们还没有学习任何类型的 ORM，但我们希望它可以为我们节省大量时间。我想提出3个问题：

1.  **鉴于例外情况以及它是具有中等信任度的共享主机这一事实，我们是否可能让 NHibernate 在相当长的时间内工作？**

2.  **我们如何将我们的网站转换为 Web 应用程序？**

3.  **我们还需要采取哪些进一步的措施？**

我知道实际上不允许一次问多个问题，但这些问题非常相关，我觉得所有问题都有一个答案。

任何帮助表示赞赏。如果您需要完整的堆栈跟踪，我会发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:54:01.573

请参阅这篇[博文](http://puredotnetcoder.blogspot.co.uk/2011/09/update-nhibernate-32-and-medium-trust.html)和[这篇](http://puredotnetcoder.blogspot.co.uk/2011/08/nhibernate-32-and-medium-trust.html)博文。我需要在使用中等信任的 Rackspace 云上使用 NH3.2。您需要做的就是运行这个 Nuget 命令，它应该会下载正确的程序集（您可能需要先删除现有的 NH dll）。

```
PM> Install-Package NHibernate.DependencyInjection 
```

[可以在此处](http://You%20can%20download%20Randy%27s%20version%20of%20NHibernate.DependencyInjection%20from%20Nuget.)找到的 nuget 包。

然后将此代码放入您的应用程序中：-

```
protected void Application_Start() {  
  Initializer.RegisterBytecodeProvider();  
  ...  
  Rest of configuration code here  
} 
```

看起来 Randy 已将其更新为与 NH3.3 一起使用。

# asp.net-mvc-3 - ASP.NET MVC 中的自定义验证

> ID：10418944
> 
> 赞同：0
> 
> 时间：2012-05-02T17:42:38.303
> 
> 标签：asp.net-mvc-3, validation

我有一个 Page 对象，其中包含这样的 Metadata 属性

```
public class Page {
    public int Id { get; set; }
    public int ParentId { get; set; }
    public Metadata Metadata { get; set; }
}

public class Metadata {
    public string Slug { get; set; }
} 
```

当我保存我的页面时，我需要验证没有其他具有相同父级的页面具有相同的 slug。我正在考虑在 slug 属性上使用验证属性，但是当我这样做时，我无法找到页面对象。验证此类事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:25:25.113

如果您坚持使用数据注释验证属性，则可以通过将属性放在 Page 类而不是 Slug 属性上来访问所有属性。

然而[，有更好的东西](http://fluentvalidation.codeplex.com/wikipage?title=CreatingAValidator&referringTitle=Documentation&ANCHOR#ReusingValidators)。

# c# - 将接口转换为不继承的另一个接口

> ID：10418949
> 
> 赞同：13
> 
> 时间：2012-05-02T17:42:57.727
> 
> 标签：c#, inheritance, interface, casting

我希望这里有人可以解释我所做的错误假设。在 C# 4.0 中，我有 2 个接口和一个实现它们的类。在一个方法中，我使用第一个接口的类型声明了一个变量，使用实现两个接口的类对其进行实例化，并且可以以某种方式成功地将其转换为第二个接口，如下面的代码：

```
 public interface IFirstInterface 
    {
        void Method1();
    }

    public interface ISecondInterface
    {
        void Method2();
    }

    public class InterfaceImplementation : IFirstInterface, ISecondInterface
    {
        public void Method1() { }
        public void Method2() { }
    }

    public class SomeClass
    {
        public void SomeMethod()
        {
            IFirstInterface first = new InterfaceImplementation();
            first.Method1();

            // Shouldn't the next line return null?
            ISecondInterface second = first as ISecondInterface; 
            // second is not null and the call to Method2() works fine
            second.Method2();
        }
    } 
```

我试图理解为什么选角是成功的。是的，该类实现了这两个接口，但我认为由于第一个变量被声明为 IFirstInterface（它不从 ISecondInterface 继承），因此转换应该仍然失败。

我也尝试过以其他方式重组我的代码，例如不使用'as'，但演员仍然成功。

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T17:56:05.347

从您的示例中，您应该在调用任何功能之前测试类型类型。第一次创建将创建一个支持两个接口的完全限定的“InterfaceImplementation”。但是，您将其放入仅第一个接口的声明类型中。因此，从“第一个”对象的角度来看，它只关心与 IFirstInterface 实现相关联的任何内容。

现在，第二个……即使你已经创建了对象，你仍然可以问……顺便问一下……你也是第二个接口吗？如果是这样，请这样做...

```
IFirstInterface first = new InterfaceImplementation();

if( first is ISecondInterface )
  // typecast since the second interface is legit, then call it's method 2
  ((ISecondInterface)first).Method2(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:54:23.577

实例的实际类型`first`指向实现这两个接口。所以很明显两者`Method1`和`Method2`在对象上都可用。

的静态类型`first`只允许您访问`Method1`. 的静态类型`second`只允许您访问`Method2`. 如果您使用任一接口声明对对象的引用，您只需选择将实例视为满足所选合同（接口）的对象。

由于`InterfaceImplementation`实现了这两个接口，您可以选择使用任一接口引用实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:46:51.380

如果你从具体对象的角度来看，你可以说“我是一个 IFirstInterface，但我也是一个 ISecondInterface”。你是这个意思吗？您描述的问题最终会在继承/实现链中进行转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T17:49:30.730

您唯一缺少的是，这正是它的本意，这是一个有用的功能，而不是问题。转换时，您可以将代码视为基本上是在说，“我不在乎我知道这个对象的类型是什么，我想看看它是否可以转换为类型 T”。在这种情况下，由于基础对象的类型是`InterfaceImplementation`，不管它目前被称为 an `IFirstInterface`，答案是肯定的，它可以转换为 an `ISecondInterface`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T17:51:30.137

欢迎来到多态性。该对象`first`将始终是 InterfaceImplementation 的一个实例。您选择引用它的方式不会影响对象真正“是”什么。这就是抽象概念作为一个整体的运作方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T15:42:52.290

这确实表明存在设计缺陷。客户端知道这两个接口是由同一个对象实现的。对于您的示例，这很好，但如果这些接口是单独实现的，您将无法从第一个跳转到第二个。理想情况下，最好有某种查询界面，您可以在其中从一种类型转到另一种类型。

# ios - 会话 cookie 在 Android/iOS 设备上持续多长时间？

> ID：10418950
> 
> 赞同：7
> 
> 时间：2012-05-02T17:43:04.830
> 
> 标签：ios, mobile, cookies, session-state

据我了解，如果我的代码创建了一个没有明确过期时间的 cookie，它会在浏览会话期间持续（例如，直到用户关闭浏览器）。

*这如何适用于您从未真正*退出 Safari的移动设备，尤其是 iOS ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:07:35.500

据我了解，如果我的代码创建了一个没有明确过期时间的 cookie，它会在浏览会话期间持续（例如，直到用户关闭浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T18:44:38.533

iPhone 上 Safari 中的 Cookie 存储在属性列表文件中。他们一直呆在那里，直到用户手动清除他们设备上的 cookie。

# sql - Access 2007 / VBA中的表达式和分组求和

> ID：10418952
> 
> 赞同：3
> 
> 时间：2012-05-02T17:43:08.990
> 
> 标签：sql, group-by, ms-access-2007, sum

这是我开始的代码，它不太正确：

```
 UPDATE mt
 SET mt.action = 'A', mt.TQA = TRUE,
     mt.OPID = 'SYS', mt.rc= 'DAR', mt.h='DAR'
 WHERE EXISTS 
 (
     SELECT mt.Account FROM mt AS pm
     WHERE mt.Account = pm.Account
     GROUP BY pm.Account, pm.[amount] + Nz(pm.[SFS],0)
     HAVING (pm.[amount] + Nz(pm.[SFS],0) > 500)
 ); 
```

我需要的是帐户所有实例的金额和 SFS 的总和，其中超过 500。

例如，如果我有下表

```
 Account   Amount   SFS
 123       350.00   0.00
 123       125.00   125.00
 123       350.00   0.00
 123       125.00   125.00
 234       1600.00  5.00
 345       2.50     4.60 
```

我应该得到

```
 123    1200.00
 234    1605.00 
```

我从上面的代码中得到的是不同的总数，而不是组，这意味着它们没有被 >500 捕获：

```
 123    350.00
 123    250.00
 234    1605.00 
```

任何人都可以帮忙吗？这让我们 5 个人感到难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:06:52.473

从您的 group by 子句中删除`pm.[amount] + Nz(pm.[SFS],0)`- 您不想按总和分组，只有帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:44:50.207

也许这就是您正在寻找的：

```
UPDATE mt
SET mt.action = 'A', mt.TQA = TRUE,
    mt.OPID = 'SYS', mt.rc= 'DAR', mt.h='DAR'
WHERE EXISTS 
(
    SELECT mt.Account FROM mt AS pm
    WHERE mt.Account = pm.Account
    GROUP BY pm.Account~~, pm.[amount] + Nz(pm.[SFS],0)~~
    HAVING (**SUM(**pm.[amount] + Nz(pm.[SFS],0)**)** > 500)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T14:30:16.180

我需要使用两个子查询。这是有效的决赛。

```
UPDATE mt
SET rc='DAR'
WHERE  Account IN
(
  SELECT mt.account
  FROM 
    (
    SELECT mt.Account, SUM(mt.[amount]+Nz(mt.[SFS],0)) as total
    FROM mt
    GROUP BY mt.Account
    )    
  WHERE total>=500
); 
```

# spring - 如何获取详细的 Spring Beans 加载日志？

> ID：10418953
> 
> 赞同：0
> 
> 时间：2012-05-02T17:43:10.550
> 
> 标签：spring

我需要详细的日志来查看 spring 如何加载我的接口及其各自的实现类。我想监控 Spring 的 BeanFactory 的行为，看看它是如何管理依赖注入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:49:36.450

将 log4j.xml 添加到您的项目和相应的 JAR 文件中。登录到 INFO 或 DEBUG 的控制台，你就会得到你想要的。

# c# - 使用循环缓冲区查看 Log4Net

> ID：10418954
> 
> 赞同：1
> 
> 时间：2012-05-02T17:43:16.397
> 
> 标签：c#, wpf, buffer, log4net

我在 WPF 应用程序中使用 Log4Net。我在使用 NotifyAppender 更新`TextBox`表单的地方工作。这是最旧的在顶部，最新的在底部。

我需要扭转这一点，并在上面放上最新的。我还希望能够“冻结”视图的更新，以便用户可以滚动浏览消息，然后能够“解冻”它。现在可以显示“缓冲”的任何消息。我假设我需要捕获消息并将它们放在一个集合中，对其进行排序，然后将它们显示在视图中，但我不确定如何捕获消息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:07:18.267

# ruby-on-rails - Rails 3 UJS 意外行为

> ID：10418955
> 
> 赞同：0
> 
> 时间：2012-05-02T17:43:19.613
> 
> 标签：ruby-on-rails, ujs

我有这样一个表格：

```
<form id="new-application" method="post" enctype="multipart/form-data" data-remote="true" action="/inv/claims?locale=uk" accept-charset="UTF-8">
<a rel="nofollow" data-remote="true" data-method="delete" data-confirm="Are You sure?" href="/inv/claims/1?locale=uk">delete</a> 
<a rel="nofollow" data-remote="true" data-method="delete" data-confirm="Are You sure?" href="/inv/claims/2?locale=uk">delete</a> 
</form> 
```

我在 my.js 中也有这样的代码行：

```
var toggleLoading = function() { $("#ajax-loader").toggle() };

$("#new-application")
    .bind("ajax:loading",  alert('loading'))
    .bind("ajax:complete", alert('complete'))
    .bind("ajax:success", function(event, data, status, xhr) {
      alert('succ');
    }); 
```

当我点击**删除**时，我只收到一条消息**succ**但我正在等待一条消息**加载**，然后是一条消息**succ**。

**为什么我在成功之前没有收到消息加载？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:40:51.747

我找到[了这个](http://tesoriere.com/2011/05/19/rails-3.1-—-fixing-the-%27ajax-loading%27-event/)。

希望能帮助到你。

这是网址：

```
http://tesoriere.com/2011/05/19/rails-3.1-%26%238212%3B-fixing-the-'ajax-loading'-event/ 
```

# cocoa - 如果卷是 Time Machine 磁盘，如何检测（适用于 Apple AppStore 提交规则）

> ID：10418956
> 
> 赞同：0
> 
> 时间：2012-05-02T17:43:25.900
> 
> 标签：cocoa, timemachine

我想检测路径（即根文件夹）是否引用 Time Machine 磁盘，我需要一种符合 AppStore 批准规则的方法

该代码必须适用于雪豹及以上

# python - 具有特定搜索的深度嵌套的 Python lxml XPath

> ID：10418958
> 
> 赞同：2
> 
> 时间：2012-05-02T17:43:46.227
> 
> 标签：python, xpath, lxml

我希望提取的文本的 xpath 可靠地位于树的深处

```
...table/tbody/tr[4]/td[2] 
```

具体来说， td[2] 的结构如下

```
<td class="val">xyz</td> 
```

我正在尝试提取文本“xyz”，但广泛搜索会返回多个结果。例如，以下路径返回 10 个元素。

```
xpath('//td[@class="val"]') 
```

...虽然特定搜索不返回任何元素。**我不确定为什么以下内容不返回任何内容。**

```
xpath('//tbody/tr/td[@class="val"]') 
```

一种解决方案涉及..

```
table = root.xpath('//table[@class="123"]')

#going down the tree
xyz = table[0][3][1]
print vol.text 
```

**但是，我很确定这非常脆弱。如果有人能告诉我如何构建既不脆弱又资源相对便宜的 xpath 搜索，我将不胜感激**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:17:39.750

```
...table/tbody/tr[4]/td[2] 
```

我猜你是通过像 Firebug 这样的工具找到这个 XPath 的。关于 Firebug（或浏览器中的其他检查工具）之类的工具需要注意的一点是，它们使用浏览器本身生成的 DOM 树，并且浏览器中的大多数（如果不是全部）HTML 解析器会努力使传递的 HTML 有效。这通常需要添加标准规定的各种标签。

`<tbody>`是这些标签之一。[`<tr>`标记只能作为`<thead>`、`<tbody>`或`<tfoot>`标记的子级。](http://www.w3.org/TR/html4/struct/tables.html#h-11.2.3)不幸的是，根据我的经验，您很少会`<table>`在实际源代码中看到其中一个标签，但是浏览器会在解析时添加这些必要的标签以使 HTML 有效，因为[标准要求这样做](http://www.w3.org/TR/2009/NOTE-xhtml-media-types-20090116/#C_19)。

**简而言之，`<tbody>`您的实际来源中可能没有标签。这就是您的 XPath 什么也不返回的原因。**

至于生成 XPath 查询，这高度依赖于特定的页面/xml。一般来说，位置查询`td[4]`应该是最后的手段，因为当在它们之前添加一些东西时，它们往往很容易中断。您应该仔细检查标记并尝试提出使用属性的查询，`id`或者`class`因为它们比位置属性更可靠地添加了特异性。但最终，这一切都归结为相关页面的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:07:52.360

您没有明确提到它，但是如果您的目标`table`和`td`标记类是可靠的，那么您可以执行以下操作：

```
//table[@class="123"]/descendant::td[@class="val"] 
```

你一半回避了`tbody`存在与否的问题。

但是，没有什么可以替代实际查看您尝试解析的材料以推荐 XPATH 查询...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T18:09:33.433

这似乎工作

```
from lxml import etree

doc = etree.HTML('<html><body><table><tbody><tr><td>bad</td><td class="val">xyz</td></tr></tbody></table></body></html>')
print doc.xpath('//tbody/tr/td[@class="val"]')[0].text 
```

输出：

```
xyz 
```

那么你的问题是什么？

# android - [Android SDK]无法从 Assets 复制外部数据库 (13MB)

> ID：10418961
> 
> 赞同：2
> 
> 时间：2012-05-02T17:44:03.290
> 
> 标签：android, database, large-files

我需要一个我正在开发的游戏的意大利语单词列表，但我实际上不能让它从资产中复制我的数据库。我尝试了很多在网站上找到的解决方案，例如：

1.  [在 Android 应用程序中使用您自己的 SQLite 数据库](http://goo.gl/pvog)
2.  [如何将占用大量内存的大型数据库从资产文件夹复制到我的应用程序？](https://stackoverflow.com/questions/8008327/how-to-copy-large-database-which-occupies-much-memory-from-assets-folder-to-my-a)
3.  [从 assets 文件夹加载大于 1M 的文件](https://stackoverflow.com/questions/2928214/how-to-read-large-sqlite-file-to-be-copied-into-android-emulator-or-device-from)

但是我没有运气，它一直在给我[这个错误](http://pastebin.com/Qmamistc)就行了

```
os.write(buffer, 0, len); 
```

但我不明白为什么。这是[函数的代码](http://pastebin.com/eLqnL2dc)和我正在使用的[常量。](http://pastebin.com/D8uhNYRV)一个奇怪的问题是我的数据库在 11.45MB 之后停止复制，距离目标只有 1MB。

有人可以帮我解决这个问题吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:49:50.183

首先，默认资产文件夹支持 db 文件的最大大小为 1mb。

您需要将数据库分成几部分。

[下载**HJSplit**](http://hjsplit.en.softonic.com/download)并将您的数据库分成小部分，例如 13MB = 13 个部分，每个 1MB。

demoDB.sqlitedb = 13MB 然后

```
demodb..sqlitedb.001
demodb..sqlitedb.002
demodb..sqlitedb.003
demodb..sqlitedb.004
...
...
demodb..sqlitedb.013 
```

然后使用以下代码合并您的数据库。

```
private void copyDataBase() throws IOException {
        AssetManager am = mContext.getAssets();
        OutputStream os = new FileOutputStream(DB_PATH + DB_NAME);
        byte[] b = new byte[1024];
        String[] files = am.list("");
        Arrays.sort(files);
        int r;
        for (int i = 1; i <= 9; i++) {
            InputStream is = am.open("demoDB.sqlitedb.00" + i);
            while ((r = is.read(b)) != -1) {
                os.write(b, 0, r);
            }
            Log.i("BABY_DATABASE_HELPER", "Copying the database (part " + i
                    + " of 9)");
            is.close();
        }
        os.close();
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T17:57:11.817

Use [`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)，它有一个调试版本的 package-the-database-with-the-app 逻辑，所以你不需要自己搞砸这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T12:57:10.143

```
private void copyDataBase() throws IOException {
    AssetManager am = getAssets();
   OutputStream os = new FileOutputStream(DB_PATH + DB_NAME);

    byte[] b = new byte[1024];
    String[] files = am.list("");
    Arrays.sort(files);
    int r;
    for (int i = 1; i <=21; i++) {
        InputStream is;

        if ( i < 10){
            System.out.println("coping file demoDB.sqlitedb.00"+i );
             is = am.open("demoDB.sqlitedb.00" + i);
        }else{
            System.out.println("coping file demoDB.sqlitedb.0"+i );
             is = am.open("demoDB.sqlitedb.0" + i);
       }
        while ((r = is.read(b)) != -1) {
            os.write(b, 0, r);
        }
        is.close();
    }
    os.close();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T17:03:43.033

我知道这已经得到解答，但是我在创建测试时遇到了类似的情况，我想在其中存储一个带有故障的特定数据库来测试错误的数据。问题是在资产中根本找不到测试数据库。为了看到它，我不得不这样做：

```
InputStream is = mContext.createPackageContext("com.activities.tests", Context.CONTEXT_IGNORE_SECURITY).getAssets().open("mydb.db"); 
```

通过忽略安全性，您可以看到它，然后获取输入流并将其保存到外部目录。

# php - 注销后的 CodeIgniter 后退按钮

> ID：10418964
> 
> 赞同：7
> 
> 时间：2012-05-02T17:44:15.937
> 
> 标签：php, html, codeigniter, session, caching

当用户退出我的 CodeIgniter (PHP) 应用程序时，我试图停止/禁用浏览器的后退按钮功能。但是，我认为浏览器正在缓存页面，因此尽管会话因注销而被破坏，但它仍然可见。

我知道会话已死，因为当用户尝试做任何事情（单击任何链接等）时，他们会通过我控制器中的方法被踢出。

让后退按钮以这种方式工作并不理想，因为前一页包含机密信息。

不知道如何解决这个问题，可能是介于两者之间的重定向页面（但是用户可以非常快地按下后退按钮吗？），帮助！

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T21:55:23.897

我认为这可以帮助你，它对我有用。

CodeIgniter 框架版本：

```
$this->output->set_header('Last-Modified:'.gmdate('D, d M Y H:i:s').'GMT');
$this->output->set_header('Cache-Control: no-store, no-cache, must-revalidate');
$this->output->set_header('Cache-Control: post-check=0, pre-check=0',false);
$this->output->set_header('Pragma: no-cache'); 
```

PHP版本：

```
header('Last-Modified:'.gmdate('D, d M Y H:i:s').'GMT');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0',false);
header('Pragma: no-cache'); 
```

如果您使用的是 PHP OOP，请将上述代码放入您的构造函数中以在您的页面上进行初始化。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T21:38:14.660

添加这个以防止缓存前一页：

```
header("cache-Control: no-store, no-cache, must-revalidate");
header("cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T13:51:58.023

我对这个问题的解决方案：

1.  检查cookie是否设置了if。
2.  步骤参数并调用用户模型的登录方法。
3.  最后收取相应的意见。

如果未设置 cookie 将重定向到登录页面。

```
if(isset($_COOKIE['ci_session'])){ 
  $user= $this->security->xss_clean($this->input->post('user'));
  $pass= $this->security->xss_clean($this->input->post('pass'));

  $result = $usrLog->loguearUsuario($user, $pass);

  if($result == TRUE){
     $data = $this->session->set_userdata('logged_in', $sessArray);
     $this->load->view('pages/admin', $data);
  }

}else{
   header('Location: login'); 
} 
```

我希望你学习！对不起我的英语！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T06:15:40.410

我认为以下内容应该可以帮助您

1）创建一个logout.php文件并添加以下代码

```
<html>
 <head>
  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script type="text/javascript">
$( document ).ready(function() {
$( "#submit" ).trigger( "click" );
});
</script>
</head>

<body>
<form action="<?php echo base_url();?>login" method="post">
<input type="submit" id="submit" style="display: none;">
</form>
</body>
</html> 
```

2）修改您的注销功能以加载上述视图文件logout.php

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T04:36:56.180

您可以在他们注销后使用 javascript 关闭窗口 - 从而消除任何返回页面的能力。

许多网上银行这样做是为了解决这个确切的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T18:10:50.267

注销后转到一个页面显示一些消息，例如“很快再见”，并在一段时间后从该页面重定向到所需页面，这可能会解决您的问题，例如以下用于重定向第二次标头的代码（“Refresh 3; url=home.php” );

# crystal-reports - Crystal Reports 从两个不同的数据库中选择数据

> ID：10418965
> 
> 赞同：1
> 
> 时间：2012-05-02T17:44:23.823
> 
> 标签：crystal-reports, multiple-databases

我有两个数据库，它们包含完全相同的表并且位于同一台服务器上。我希望能够创建一个允许我“合并”这些数据库的报告，以便当用户查询时，他们将同时查询两个数据库。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:47:51.280

实现这一点的最简单方法是创建数据库视图，将两个数据库中相同表中的所有值联合起来 - 例如：

```
CREATE VIEW CombinedSalesTable AS
SELECT * FROM database1.SalesTable
UNION ALL
SELECT * FROM database2.SalesTable 
```

- 并设计报表以查询视图。

您可能希望在视图中添加一个附加列以显示每条记录来自哪个数据库，因为一个表中唯一的键值可能在另一个数据库的等效表中具有“重复”。

# postgresql - PostgreSQL DEFERRED CONSTRAINTS 和开始结束块

> ID：10418969
> 
> 赞同：0
> 
> 时间：2012-05-02T17:44:40.360
> 
> 标签：postgresql, constraints, deferred

我有一个带有唯一约束的表，标记为`DEFERRABLE INITIALLY DEFERRED;`

然后我执行下一个查询：

```
START TRANSACTION;
INSERT INTO "T" VALUES (1,2);
INSERT INTO "T" VALUES (1,2);
INSERT INTO "T" VALUES (1,2);
ROLLBACK; 
```

一切都很顺利。但是如果我尝试执行

```
START TRANSACTION;
BEGIN;
    INSERT INTO "T" VALUES (1,2);
    INSERT INTO "T" VALUES (1,2);
    INSERT INTO "T" VALUES (1,2);
END;
ROLLBACK; 
```

我得到一个错误。为什么 Postgres 在退出`BEGIN END`块时强制进行约束检查？不应该在事务结束时检查约束吗？我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:10:17.180

`END`是手册中记录的同义词`COMMIT`：

[http://www.postgresql.org/docs/current/static/sql-end.html](http://www.postgresql.org/docs/current/static/sql-end.html)

因此，在第一个示例中，您启动一​​个事务，插入冲突的行并进行回滚。

在第二个示例中，您启动一​​个事务，然后启动另一个事务（因为`BEGIN`是 的同义词`START TRANSACTION`），然后尝试通过运行来提交插入`END`，然后进行回滚。

# mysql - 应该使用 SQL 联合还是联接？

> ID：10418973
> 
> 赞同：0
> 
> 时间：2012-05-02T17:44:57.630
> 
> 标签：mysql, sql, join, union

我正在尝试获取我拥有的 2 张桌子（患者和医生）的邮政编码和该邮政编码的呼叫次数。我通过计算邮政编码来获得#of 呼叫，例如，如果有 5 名患者的邮政编码为 79555，那么计数将为 5。如果患者表有 3 人使用该邮政编码，而医生表有 4 人，它应该返回邮政编码和 7。我尝试了下面的联合。乍一看它看起来像我想要的，但我想总结重复的邮政编码，我可以在联合中使用 sum 函数吗？还是我必须创建一个联接？

```
SELECT zip_code, COUNT(zip_code) AS Num_Patient_Calls FROM patients GROUP BY zip_code
UNION ALL
SELECT zip_code, COUNT(zip_code) AS Num_Physician_Calls FROM physicians GROUP BY zip_code 
```

**编辑：解决方案** 我使用 Gordon 和 dweiss 的响应来生成这个 SQL 代码。它做我想要的，即从不相关的表中获取两个可能具有或不具有相同值的字段，计算每个表中具有该值的记录数，然后将两个表的结果相加。示例：患者表中邮政编码 99709 的 6 个实例，医师表中的 1 个实例，显示的值为 99709 - 7。

```
SELECT zip_code, SUM(Patient_Calls) FROM (
    SELECT zip_code, COUNT(zip_code) AS Patient_Calls FROM patients GROUP BY zip_code
    UNION ALL
    SELECT zip_code, COUNT(zip_code) AS Physician_Calls FROM physicians GROUP BY zip_code
) AS new_table
GROUP BY zip_code ORDER BY `new_table`.`zip_code` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:46:23.497

由于这些是不相关的表，因此您希望使用`UNION`. 此外，`COUNT`和`SUM`是不同的功能，在这种情况下，您正在寻找`COUNT`. SUM 会将所有值相加，而`COUNT`会给您在 a 中找到该行的次数`GROUP`。这样的事情怎么样？

```
SELECT zip_code,COUNT(*) FROM (
SELECT zip_code AS Num_Patient_Calls FROM patients
UNION ALL
SELECT zip_code AS Num_Physician_Calls FROM physicians
) AS new_table
GROUP BY zip_code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:02:10.160

为了回答您的问题，您需要 a`UNION ALL`或`FULL OUTER JOIN`，因为您的邮政编码可能只有一种呼叫类型。

我会这样构建结果：

```
select zip_code, sum(Patient_Call) as Num_Patient_Calls,
       sum(Physician_Call) as Num_Physician_Calls,
       sum(Patient_Call + Physician_Call) as Num_Calls
from 
(
  (SELECT zip_code, 1 AS Patient_Call, 0 as Physician_Call
   FROM patients
  )
  UNION ALL
  (SELECT zip_code, 0 AS Patient_Call, 1 as Physician_Call
   FROM physicians
  )
) calls
GROUP BY zip_code 
```

如果您多次运行此查询，您可以尝试在每个子查询中进行聚合，看看是否更快（例如，如果 zip_code 上有索引，那么它可能会更快）。

# git - 如何更改行尾设置

> ID：10418975
> 
> 赞同：757
> 
> 时间：2012-05-02T17:45:07.460
> 
> 标签：git, msysgit

是否有文件或菜单可以让我更改如何处理行尾的设置？

我读到有3个选项：

1.  **签出 Windows 风格，提交 Unix 风格**

    检出文本文件时，Git 会将 LF 转换为 CRLF。提交文本文件时，CRLF 将转换为 LF。对于跨平台项目，这是 Windows 上的推荐设置（“core.autocrlf”设置为“true”）

2.  **按原样结帐，提交 Unix 风格**

    Git 在检出文本文件时不会执行任何转换。提交文本文件时，CRLF 将转换为 LF。对于跨平台项目，这是 Unix 上的推荐设置（“core.autocrlf”设置为“input”）。

3.  **按原样结帐，按原样提交**

    Git 在签出或提交文本文件时不会执行任何转换。跨平台项目不建议选择此选项（“core.autocrlf”设置为“false”）

* * *

## 回答 #1

> 赞同：673
> 
> 时间：2012-05-02T18:12:26.190

控制它的正常方法是`git config`

例如

```
git config --global core.autocrlf true 
```

有关详细信息，请在此链接中向下滚动[到 Pro Git](http://git-scm.com/book/en/Customizing-Git-Git-Configuration#_formatting_and_whitespace)到名为“core.autocrlf”的部分

* * *

如果你想知道它保存在什么*文件中，你可以运行命令：*

```
git config --global --edit 
```

并且 git 全局配置文件应该在文本编辑器中打开，您可以看到该文件是从哪里加载的。

* * *

## 回答 #2

> 赞同：238
> 
> 时间：2016-11-26T18:56:13.097

操作系统中使用的行结束格式：

*   Windows：（`CR`回车`\r`）和`LF`（换行`\n`）对
*   OSX，Linux：（`LF`换行`\n`）

我们可以通过两种方式将 git 配置为为每个操作系统自动更正行尾格式。

1.  Git 全局配置
2.  使用`.gitattributes`文件

## 全局配置

### 在 Linux/OSX 中

```
git config --global core.autocrlf input 
```

这将在您提交时`CRLF`修复任何问题。`LF`

### 在 Windows 中

```
git config --global core.autocrlf true 
```

这将确保当您在 Windows 中结帐时，所有内容都`LF`将转换为`CRLF`.

## .git 属性文件

保留文件是个好主意，`.gitattributes`因为我们不希望团队中的每个人都设置自己的配置。此文件应放置在存储库根目录中。如果它存在，git 会尊重它。

```
* text=auto 
```

这会将所有文件视为文本文件，并在结帐`LF`时自动转换为操作系统的行并返回到提交时。如果要明确指定行结尾，可以使用：

```
* text eol=crlf
* text eol=lf 
```

第一个用于签出，第二个用于提交。

```
*.jpg binary 
```

这会将所有`.jpg`图像视为二进制文件，无论路径如何。所以不需要转换。

或者您可以添加路径限定符：

```
my_path/**/*.jpg binary 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-07-08T08:03:54.553

> 对于可以重新分发给所有开发人员的存储库设置解决方案，请查看[.gitattributes](http://git-scm.com/docs/gitattributes)文件中的[文本](http://git-scm.com/docs/gitattributes)属性。这样，开发人员不必在存储库上手动设置自己的行尾，而且因为不同的存储库可以有不同的行尾样式，所以 global core.autocrlf 不是最好的，至少在我看来。

例如，在给定路径 [ 上取消设置此属性*。*- text] 将强制 git 在签入和签出时不要触摸行尾。在我看来，这是最好的行为，因为大多数现代文本编辑器都可以处理这两种类型的行尾。此外，如果您作为开发人员仍然希望在签入时进行行尾转换，您仍然可以设置路径以匹配某些文件或在存储库上设置 eol 属性（在 .gitattributes 中）。

另请查看此相关帖子，其中更详细地描述了 .gitattributes 文件和文本属性：[Git 的最佳 CRLF（回车，换行）处理策略是什么？](https://stackoverflow.com/questions/170961/whats-the-best-crlf-carriage-return-line-feed-handling-strategy-with-git)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-10-23T09:11:23.447

对我来说，诀窍是运行命令

```
git config auto.crlf false 
```

在项目的文件夹中，我希望它专门用于一个项目。

该命令通过添加行更改了路径 {project_name}/.git/config 中的文件（仅供参考 .git 是一个隐藏文件夹）

```
[auto]
    crlf = false 
```

在文件的末尾。我想更改文件也有同样的作用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-06-30T01:05:16.677

## .gitattributes 文件

最简单的方法是在您的存储库中使用本地`.gitattributes`文件。

您还可以更改特定文件扩展名的行尾

```
*           text=auto     # auto
*.txt       text
*.vcproj    text eol=crlf # windows line-endings
*.sh        text eol=lf   # linux line-endings
*.jpg       -text 
```

这也覆盖了全局默认值，因此它更具可移植性，并使 repo 在不同的机器上更加可靠。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-02T11:00:12.240

如果您想将已从 PC 格式更改为 UNIX 格式的文件格式转换回。

(1)您需要重新安装tortoise GIT，并在“行尾转换”部分确保您选择了“按原样签出-按原样签入”选项。

(2) 并保持其余配置不变。

(3) 安装完成后

(4)将所有转换为UNIX格式的文件扩展名写入一个文本文件(extensions.txt)。

```
ex:*.dsp
   *.dsw 
```

(5)将文件复制到你的克隆中在GITBASH中运行以下命令

```
while read -r a;
do
find . -type f -name "$a" -exec dos2unix {} \;
done<extension.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-08T09:13:33.980

以下步骤对我有用

在根项目文件夹上添加 git 属性（这将对即将发布的文件有用）

```
* text=auto

*.tf  eol=lf
*.tfvars  eol=lf
*.yml  eol=lf 
```

执行以下命令以支持已存在的文件后

```
find ./ -type f \( -iname \*.tf -o -iname \*.tfvars -o -iname \*.md -o -iname \*.yml \) -print0 | xargs -0 dos2unix

dos2unix .gitignore
dos2unix .gitattributes 
```

# actionscript-3 - AS3 删除未使用的变量

> ID：10418981
> 
> 赞同：0
> 
> 时间：2012-05-02T17:45:44.117
> 
> 标签：actionscript-3, flash

如何删除未使用和未初始化的变量？我有一些可能会根据屏幕尺寸使用的遮罩和滤镜，但是当我不需要它们时，我可以简单地去掉它们吗？例如：

```
var appMask:Shape;
if ((screenR % 1) > 0) {
    appMask = new Shape;
    appMask.graphics.beginFill(0x000000);
    appMask.graphics.drawRect(0,0,screenW,screenH);
    appMask.graphics.endfill();
} else {
    //delete appMask variable?
} 
```

我还考虑过在变量创建时创建新形状，并将其设置为 null 以便稍后进行垃圾清理，但我想确保这将按预期工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:49:32.940

简短的回答，不。

在您提供的示例中，您实际上并没有实例化任何对象，因此您不必担心任何事情。该变量将在创建它的范围内存在，然后它将消失，没有不良影响。**没有显着的内存开销，也没有潜在的内存泄漏。**

如果您确实实例化了一个对象，您实际上**无法**删除它。为了帮助自动垃圾收集器尽快将其拾取，请删除与对象关联的所有事件侦听器，更改（null 有效）对该对象的所有引用，并且它应该在下一次扫描时处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:49:41.063

在这种情况下，您无需执行任何操作来删除 appMask，如果它未使用且未在应用程序的任何位置引用，则垃圾收集器将释放它占用的内存。您不必在 else 块中将其显式设置为 null。

另一方面，您可以使用 delete 关键字而不是局部变量来删除动态对象的成员。

# sql - 选择没有关系的记录

> ID：10418983
> 
> 赞同：1
> 
> 时间：2012-05-02T17:45:52.150
> 
> 标签：sql, oracle

假设我有 3 张桌子：

```
People
-------------
PID   |  NAME
-------------
1       Bob
2       Garry
3       Alex
4       Peter
5       Victor

Tasks
-------------
TID   |  TASK
-------------
1       Work
2       Work Hard
3       Work Harder 
```

以及将任务分配给人员的表格

```
Assigns
-------------
PID   |  TID
-------------
1       2
2       1
4       3 
```

问题：如何选择未分配给任何任务的人员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:47:09.663

该`LEFT JOIN`方法可行，但这里还有两种您可能会发现更容易阅读的方法：

**1\. 不在**

```
SELECT NAME
FROM People
WHERE PID NOT IN
(
    SELECT PID
    FROM Assigns
) 
```

**2.不存在**

```
SELECT NAME
FROM People
WHERE NOT EXISTS
(
    SELECT *
    FROM Assigns
    WHERE People.PID = Assigns.PID
) 
```

**结果**

```
Alex
Victor 
```

**有关的**

*   [NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL: Oracle](http://explainextended.com/2009/09/17/not-in-vs-not-exists-vs-left-join-is-null-oracle/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:49:45.273

使用 NOT IN 子选择可能比 LEFT-JOIN 和期望 NULL 对性能造成更大的影响

```
SELECT NAME
   FROM People
      LEFT JOIN Assigns
         on People.PID = Assigns.PID
   where
      Assigns.PID IS NULL 
```

通过使用 LEFT-JOIN 方法，People 表通过 ONCE 并根据索引查找连接到第二个。它实际上并没有查询整个第二个“Assigns”文件以了解所有可能性然后加入（并且不一定利用索引）。左连接直接利用索引，要么找到记录，要么不找到。如果不是，则 PID 将为 NULL，因此表明此人未在分配表中找到。

# php - PHP/SQL 数学添加问题

> ID：10418985
> 
> 赞同：0
> 
> 时间：2012-05-02T17:46:03.067
> 
> 标签：php, sql, math

所以我有这个代码......

```
$remaining = $remaining + $row['total']; 
```

这是在一个foreach循环中..

```
foreach($clientArrayInvoice as $key => $row) 
```

它的作用是遍历每条记录并将总数添加到该`$remaining`变量中，一些记录总数是正数，一些是负数，它似乎工作正常，但我需要在`$remaining`完成记录后显示变量我把这个作为结果之一......

```
-2.84217094304E-14 
```

这是从哪里冒出来的，所有的数学加起来应该是`0`而不是`-2.84217094304E-14`

我究竟做错了什么？

这是总数来自的查询

```
select i.invoiceid as transactionid, i.date, i.total, 
i.total - (select ifnull(sum(p.amount), 0) from payment p where p.invoice = i.invoiceid) as remainingbalance,
'invoice' as transaction_type
        from invoice i inner join client c
        on i.client = c.clientid
        where i.isdeleted = 0 and i.client = " . $clientId . "
        union
select p.paymentid as transactionid, p.date,(0 - p.amount) as total, p.invoice, 'payment' as transaction_type
        from payment p inner join invoice i
        on i.invoiceid = p.invoice
        inner join paymenttype
        on paymenttype.paymenttypeid = p.paymenttypeid
        inner join client c
        on c.clientid = i.client
        where c.clientid = " . $clientId . "
        and i.isdeleted = 0
        order by date 
```

谢谢，我很感激你的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:50:19.980

don't store money as floats - e.g. store it as integers (in cents + present the amounts as `cents / 100`)

or whatever you find usefull from [https://www.google.com/search?q=money+datatypes](https://www.google.com/search?q=money+datatypes)

# geronimo - 如何在 WASCE Web 应用程序中允许符号目录遍历

> ID：10418987
> 
> 赞同：0
> 
> 时间：2012-05-02T17:46:25.253
> 
> 标签：geronimo, symlink-traversal

我目前在 RHEL 4 Update 9 上运行 WebSphere Application Server Community Edition v3.0.0.1。

我有一个 Web 应用程序以前在 WAS 6.1 上运行，但我们想迁移到 WASCE。实现是这样的，我们在 Web Content 文件夹内有一个符号链接目录“symdir”，它指向同一文件系统上但在 Web 应用程序和 WASCE 之外的另一个文件夹。在幕后，我们将在符号链接目录中动态构建内容，然后创建指向它的链接。例如，在 symdir -> /tagHome 中，我们将创建 /tagFile/some.tag，这样 Web 应用程序就会知道它是 symdir/tagFile/some.tag，而 f/s 会知道它是 /tagHome/tagFile/some.tag。然后我们将在[http://hostname:port/context/symdir/tagFile/some.tag](http://hostname:port/context/symdir/tagFile/some.tag)创建一个指向它的链接并渲染文件——它是简单的 xml。这一切都曾在 WAS 6.1 上运行过。

但是，现在当我将应用程序移至 WASCE 时，这种类型的配置不再起作用。具体来说，我无法遍历任何符号链接目录并取回任何内容。为此，我什至尝试在 Web 应用程序包中添加目录并使用它们进行部署，然后尝试点击它们。就像任何 /context/* 被阻止一样！

我在网上挖掘的最后一件事是 org.apache.geronimo.tomcat.GeronimoStandardContext.allowLinking=true。似乎没有改变行为。

也在这里找到了类似的东西[JSP files in external directory](https://stackoverflow.com/questions/1775700/jsp-files-in-external-directory)，但是在 web.xml 中添加上下文模块会导致编译器错误。

除了编写 servlet 之外，还有什么想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:48:13.497

这解决了问题：在我添加的 /etc/system.properties 文件中：

```
org.apache.geronimo.tomcat.GeronimoStandardContext.allowLinking=true
org.apache.geronimo.webapplication.stage=development 
```

重新启动了 WASCE，这让我可以提供静态内容。可能不是每个 WASCE 用户的最佳解决方案，但对我们有用。

# python - 有效计算列表中的元素

> ID：10418988
> 
> 赞同：1
> 
> 时间：2012-05-02T17:46:38.177
> 
> 标签：python, algorithm

我有一个清单：

```
color_list = [    ['black', 'maroon', 'maroon', 'maroon', 'maroon']
['purple', 'black', 'maroon', 'maroon', 'maroon']
['maroon', 'purple', 'maroon', 'teal', 'teal']
['maroon', 'maroon', 'purple', 'maroon', 'maroon']
['teal', 'olive', 'teal', 'maroon', 'maroon']
    ....
 ] 
```

现在，我想计算以下内容：

栗色和黑色一起出现了多少次

紫色和黑色一起出现了多少次

栗色和紫色一起出现了多少次。

等等.. color_list 中的颜色来自预定义的颜色。即假设我有一个颜色列表 ['red','green','teal'....] 并且我想基本上找到红色和绿色在 color_list 中一起出现“n”次的计数。 .红色和蓝绿色一起出现“m”次..等等..

然后..下一步是找出红色，绿色和蓝色的次数..（一次取3个）...

在 python 中实现这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T18:08:27.480

您可以使用 collections.Counter：

```
color_list = [                                        
['black', 'maroon', 'maroon', 'maroon', 'maroon']  ,   
['purple', 'black', 'maroon', 'maroon', 'maroon']  ,   
['maroon', 'purple', 'maroon', 'teal', 'teal']     ,   
['maroon', 'maroon', 'purple', 'maroon', 'maroon'] ,   
['teal', 'olive', 'teal', 'maroon', 'maroon']         
]                                                     

from collections import Counter

cnt = [Counter(x) for x in color_list]

for x, y in [('black', 'maroon'), ('teal', 'olive')]:
    print x, y, sum(min(c[x], c[y]) for c in cnt) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T17:53:36.947

假设您将子列表中出现的任意次数表示一个“一起”：

```
color_sets = [set(sublist) for sublist in color_list]
looking_for = {"maroon", "black"}
sum(looking_for <= sublist for sublist in sublist) 
```

这通过将您的列表分成集合，然后检查是否`looking_for`是集合的子集，对结果求和（作为整数`True`计算）。`1`

# 编辑：

刚刚看到您的评论说您确实希望出现的次数很重要。如果是这样的话，那么我所拥有的简单改编是：

```
sum(min(sublist.count(item) for item in looking_for) for sublist in color_list) 
```

但是，由于使用了这么多，这对于较大的 s`list.count()`不会很有效。`looking_for`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:54:37.633

[您的问题与Association Rule Mining](http://en.wikipedia.org/wiki/Association_rule_learning)非常相似。你应该看看： http: [//orange.biolab.si/doc/ofb/assoc.htm](http://orange.biolab.si/doc/ofb/assoc.htm)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T18:04:15.717

听起来您实际上只是在寻找可以从任何给定列表中制作的每种颜色对组合。我可能会离开，但如果这是你的目标，这是一个简单的问题。您只需要获取集合中的唯一项目并将列表的长度相加 - 1。这是查找顺序不重要的对的标准解决方案。如果您从 4 个列表中最左侧的元素开始，索引为 0。它的右侧有 3 个项目可以配对。移动到索引 1，我们已经计算了索引为 0 的对，所以它的右边有 2 个项目可以与之配对，依此类推。在 Python 中执行此操作的简单方法就是

```
sum(xrange(0, len(set(colors))-1)) 
```

如果您有特定的颜色，您需要在任意列表中找到成对的颜色，这同样简单：

```
sum(xrange(0, len(set(colors) & set(chosen_colors))-1)) 
```

ps `set`intersection 踢屁股

# asp.net-mvc - 我应该在我的 ASP.NET MVC3 项目中进行哪些单元测试？

> ID：10418989
> 
> 赞同：2
> 
> 时间：2012-05-02T17:46:38.800
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, nunit

我是单元测试的新手。我有一个使用 asp.net mvc3 和 s#arp lite 的 Web 应用程序。我想向这个应用程序添加单元测试。到目前为止，我对控制器类中的每个操作都进行了测试。只是好奇，我还需要测试什么？视图是否也需要测试？

另一个问题，我在网上找到的所有测试示例都是使用起订量或其他工具来制作假数据。我们是否还应该再次测试真实数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T19:20:30.203

您既不应该对视图进行单元测试，也不应该针对真实数据库进行单元测试。对代码级工件使用单元测试，例如控制器操作、操作过滤器、html 帮助程序、模型以及用 C# 编写的任何内容。

要测试真实的数据库和视图，请查看集成测试。集成测试不像单元测试，但你仍然可以使用像 nunit 这样的单元测试框架来执行它们。基本上，您只需编写测试代码来使用 Selenium WebDriver 或 Watin 之类的东西来驱动浏览器。但这些并不是真正的单元测试，它们是集成测试、端到端测试或用户验收测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T14:13:11.123

“测试直到无聊”

话虽如此，请注意不要通过集成测试进行大部分测试。换句话说，一次测试一件事。例如。你可能对测试感兴趣

*   控制器逻辑
*   路由逻辑
*   数据库
*   加载方法
*   意见

但不要在同一个测试中测试 2 个或更多。因此，如果您测试控制器逻辑，请传入或模拟出正在使用的数据对象。

话虽如此，您可能还对“如何”测试这些部分感兴趣。我将在下面介绍 3 个部分（数据库、加载函数、视图）

**数据库**

实际上只有两件事你需要在数据库中测试

1.  有联系吗？
2.  它的架构是否正确

对于连接，我更喜欢回声测试

```
Assert.AreEqual(42, QuerySingleResult("Select 42")); 
```

测试数据库元数据的方法有很多种，但如果您存储了版本号，您可以简单地测试它。这也使升级路径更容易。

```
Assert.AreEqual(6, QuerySingleResult("Select version From Schema")); 
```

**加载函数**

有很多方法可以测试加载函数（我将在这里展示一个简单的方法），但它们都依赖于将加载隔离到一个函数中。

测试 linq 到...假设你有

```
var people = From db in new EntityFrameworkContext().People Where ...... Select .... 
```

如果你把它分成两个函数

```
IEnumerable<People> LoadPeople()
{
 return LoadPeople( new EntityFrameworkContext().People);
}
IEnumerable<People> LoadPeople(IEnumerable<People> fromPeople)
{
 return From db in fromPeople Where ...... Select ....

} 
```

这现在很容易测试。

**意见**

虽然视图很容易测试，但有很多细节。我会向您推荐所有视频：[http ://www.youtube.com/watch?v=SttlPzwJw3U](http://www.youtube.com/watch?v=SttlPzwJw3U)

但两个重要的部分是

1) 测试

```
MvcApprovals.VerifyMvcPage(new YourController().YourTestAction 
```

2) 控制器中的测试接缝

```
public ActionResult YourTestAction()
{
  // setup your model
  return View("viewpage", model);
} 
```

快乐测试！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T19:22:58.083

测试任何可能包含错误的东西。视图有点难以测试，但这不是一个坏主意。如果您正在寻找细节，请测试任何自定义属性、事件、静态方法、扩展方法以及任何其他实用程序。

如果您要针对数据库进行测试，请确保它是专用于测试的数据库。许多 ORM 还为您提供了一种模拟数据库的方法。

我个人是 Ayehde (www.ayende.com) 产品的粉丝，并分别使用 Rhino.Mocks 和 RavenDB 作为我的模拟框架和数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T19:17:51.250

如果视图中没有逻辑，则可能不需要对它们进行单元测试。您可能希望通过一些端到端测试来补充您的单元测试，这些测试涵盖了使用 Selenium 等重要的基本场景。

是的，您希望与单元测试一起进入数据库的集成测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T19:23:21.870

根据定义，我们无法告诉您要单元测试什么，因为您正在测试您的代码，而不是框架代码。而且我们不知道您的代码是做什么的。只有你这样做。

单元测试框架代码没有意义，它已经被测试过了。您需要专注于编写涵盖您的逻辑的测试。

# c# - 如何在 GridView 中显示图像？

> ID：10418990
> 
> 赞同：-2
> 
> 时间：2012-05-02T17:46:42.730
> 
> 标签：c#, asp.net, gridview

我在数据库表中有一个图像列，我想在 GridView 列中显示这个图像，我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:01:45.890

假设您将图像保存在数据库中作为字符串（图像的路径），您可以像这样在 gridview 中放置一个 itemtemplate：

```
<asp:TemplateField>
  <ItemTemplate>
  <asp:image ID="image" runat="server" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "imagePath") %>'  />
  </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:27:51.673

与@JaneDoe 建议的类似，您需要指定 ImageUrl，但是当您绑定时，您需要将 ImageUrl 属性设置为指向一个 HttpHandler，并将主键作为查询字符串参数。

例如`<asp:Image runat="server" ImageUrl="/myImageHandler.axd?pk=<%# Eval("PrimaryKey") %>"/>`

然后，您需要配置 HttpHandler 以发送图像/jpeg 或您存储的任何图像类型的响应，然后根据传入的 PK 在查询字符串中从数据库中读取 varbinary 数据并将该数据输出到响应流。

# ios - 解除删除控件后自定义 UITableViewCell 的状态

> ID：10418992
> 
> 赞同：1
> 
> 时间：2012-05-02T17:46:49.503
> 
> 标签：ios, uitableview

我创建了一个自定义，为其 contentView`UITableViewCell`提供了一个自定义。`UIView`自定义 UIView 使用 CoreText，以便我可以以斜体显示书名或期刊标题的书目数据。表格显示正确，如果您滑动行，则会调整文本。但是，如果您关闭该控件，则调整后的文本只会扩展以填充空间并显得臃肿。我可以看到`drawRect`在第一次显示单元格和出现控件时在内容视图中调用了它。但是，当控件被解除时，它不会被调用。

我应该如何处理删除控件的解除？我是否应该要求在生命周期的某个特定点重绘单元格？

带有自定义单元格的表格：

![带有自定义单元格的表格视图](../Images/787fda3083858b6fa9477b270fe9db7d.png)

带有控件的表格单元格：

![带有删除控件的自定义表格单元格](../Images/a0e3fb4c1a9a959e6a17b06860b273f1.png)

取消删除控件后的表格单元格：

![取消删除控件后的自定义表格单元格](../Images/c5160f8b8715ed6211b14601a816a75c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:53:40.237

尝试将`contentMode`自定义内容视图的属性设置为`UIViewContentModeRedraw`. 听起来，这将导致您的视图在其边界更改时重绘自身。如果您的布局是基于边界矩形在 drawRect 中完成的，这应该为您排序。

# javascript - 在 Javascript 正则表达式中的匹配字符串中向后退

> ID：10418999
> 
> 赞同：-1
> 
> 时间：2012-05-02T17:47:05.670
> 
> 标签：javascript, regex, match, backtracking

在我的应用程序中，HTML 元素的 id 属性应该以 #. 开头。根据 HTML5，id 属性的唯一限制是，它不能包含任何空格，并且应该至少有一个字符长。所以我写了以下正则表达式根据上述约束匹配 id 属性

```
idMatch: /^#\S+$/ 
```

现在我想删除字符串开头的#字符...我的问题是，我可以在一个正则表达式中执行这两个操作...即..我可以在第一个'#'之后提取字符（字符可能包含使用单个正则表达式匹配上述约束的字符串中的任何非空白字符，包括“#”。匹配的结果应该做两件事 1）从一组字符串中识别 id 字符串（id 以 # 开头并遵循 HTML5 id 命名规则） 2）在第一个 #.. 之后提取已识别字符串的部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T18:03:01.850

这是一个小片段，只需在替换方法中执行正则表达式文本，因此如果匹配，则返回不带# 的 id。创建一个小辅助函数以使其更易于使用。

```
var regex = /^#\S+$/,
    id = '#foo',
    str;

str = id.replace(regex, function($1) {
    return $1.split('#').join('');
});

console.log(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:04:20.300

你可以在 RegExes 中使用括号来做你想做的事。

```
/^#(\S+$)/.test(testString);
var idWithoutHash = RegExp.$1; 
```