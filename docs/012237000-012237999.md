# StackOverflow 问答 12237000-12237999

# java - 如何检索当前星期几？

> ID：12237000
> 
> 赞同：-3
> 
> 时间：2012-09-02T15:04:26.527
> 
> 标签：java, date, simpledateformat, dayofweek

我将如何获得一周中的当前日期？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:08:39.643

使用 a[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)并获取[`DAY_OF_WEEK`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_WEEK)字段：

```
Calendar cal = Calendar.getInstance();
int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK); 
```

或者，如果您想要日期名称，您可以使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
Date today = Calendar.getInstance().getTime();
DateFormat df = new SimpleDateFormat("EEEE", Locale.ENGLISH); // override the default Locale
String dayNameInWeek = df.format(today); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:15:30.300

要获得星期几的文本显示，您可以使用：

```
DateFormat dateFormat = new SimpleDateFormat("EEEE");
System.out.println("Today is " + dateFormat.format(new Date())); 
```

输出：

```
Today is Sunday 
```

# machine-learning - 确定分层集群中的组

> ID：12237001
> 
> 赞同：1
> 
> 时间：2012-09-02T15:04:32.000
> 
> 标签：machine-learning, hierarchical-clustering

我有一个算法可以将数据分组到一个层次聚类树中。该算法是 Toby Seagram 的 Programming Collective Intelligence 中描述的算法。树输出是一个二叉树，每个节点都有一个“距离”值，它告诉您两个子节点相距多远。

然后我可以将其显示为树状图，这使得将值组合在一起的人类点变得相当容易。但是，我很难想出一个自动决定组应该是什么的算法。我希望能够自动确定：

*   组数
*   每组应该放置哪些点

有没有一个标准的算法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:26:41.593

我认为没有默认的方法可以做到这一点。简单的“手动”方法是：

*   指定您想要/期望的集群数量
*   设置两个节点之间最大距离的阈值；任何距离较大的节点都属于另一个集群

有一些自动方法[可以确定集群的数量](https://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set)。`R`有自动处理这个问题的[Dynamic Tree Cut 包](http://bioinformatics.oxfordjournals.org/content/24/5/719.full)，也可以使用[pvclust 。](http://www.is.titech.ac.jp/~shimo/prog/pvclust/)以下是描述处理此问题的另外两种方法，[Salvador (2002)](https://encrypted.google.com/url?sa=t&rct=j&q=hierarchical%20clustering%20cutoff&source=web&cd=7&cad=rja&ved=0CEgQFjAG&url=http%3A%2F%2Fcs.fit.edu%2F~pkc%2Fpapers%2Fictai04salvador.pdf&ei=onhDUP_cCeOh0QWZs4GQDQ&usg=AFQjCNF50x_zO-F2wDfYsZShimQzsNriMw)和[Daniels (2006)](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=4041503&url=http://ieeexplore.ieee.org/iel5/4041453/4041454/04041503.pdf?arnumber=4041503)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T21:06:50.743

我发现 Calinski-Harabasz 指数（也称为方差比标准）适用于由层次聚类生成的树状图。[您可以在本文](https://www.siam.org/proceedings/datamining/2009/dm09_067_vendraminl.pdf)中找到更多信息（和比较研究）。

# java - 如何在 Spring JPA Web 应用程序中设置一些 Hibernate 属性？

> ID：12237003
> 
> 赞同：19
> 
> 时间：2012-09-02T15:04:59.537
> 
> 标签：java, spring, hibernate, jpa, configuration

我试图摆脱`persistence.xml`Spring JPA Web 应用程序中的典型文件。到目前为止，我已经成功地注入`EntityManager`了以下内容：

```
@Configuration
@EnableTransactionManagement
public class JpaConfig {

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean(){

        LocalContainerEntityManagerFactoryBean factoryBean
            = new LocalContainerEntityManagerFactoryBean();

        factoryBean.setDataSource( this.restDataSource() );
        factoryBean.setPackagesToScan( new String[ ] { "com.jverstry" } );
        factoryBean.setPersistenceUnitName("MyMy");

        JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter(){
         {
            // JPA properties ...
         }
        };

        factoryBean.setJpaVendorAdapter( vendorAdapter );

        return factoryBean;

    }

    @Bean
    public DataSource restDataSource(){

        DriverManagerDataSource dataSource = new DriverManagerDataSource();

        dataSource.setDriverClassName("org.hsqldb.jdbcDriver");
        dataSource.setUrl("jdbc:hsqldb:mem:testdb");
        dataSource.setUsername("sa");
        dataSource.setPassword("");

        return dataSource;

    }

    @Bean
    public PlatformTransactionManager transactionManager(){

        JpaTransactionManager transactionManager = new JpaTransactionManager();

        transactionManager.setEntityManagerFactory(
            this.entityManagerFactoryBean().getObject() );

        return transactionManager;

    }

} 
```

我设法为数据源移动了我的 persistence.xml 的属性：

```
<properties>
    ... 
    <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
    <property name="hibernate.hbm2ddl.auto" value="create"/>
</properties> 
```

但是如何设置上面剩下的两个休眠属性？谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-02T15:13:46.663

`AbstractJpaVendorAdapter`Spring 提供了一种使用(`setDatabase()`和`setGenerateDdl()`，虽然`setGenerateDdl()`不采用 DDL 模式) 以独立于提供者的方式配置这些选项的方法。

或者，您可以将任意属性传递给`LocalContainerEntityManagerFactory`using `setJpaProperties()`(or `setJpaPropertyMap()`)：

```
Properties props = new Properties();
props.put("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
props.put("hibernate.hbm2ddl.auto", "create");
factoryBean.setJpaProperties(props); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-02T08:22:37.023

这是一个老问题，但可能对使用 XML 进行配置的人有所帮助。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="test-jpa"/>
    <property name="dataSource" ref="dataSourceProxy"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>

    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="false"/>
            <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="database" value="MYSQL"/>
        </bean>
    </property>
    <property name="jpaPropertyMap">
        <map>
            <entry key="hibernate.jdbc.batch_size" value="10"/>
            <entry key="hibernate.jdbc.fetch_size" value="10"/>
            <entry key="hibernate.order_inserts" value="true"/>
            <entry key="hibernate.order_updates" value="true"/>
            <entry key="hibernate.jdbc.batch_versioned_data" value="true"/>
            <entry key="hibernate.format_sql" value="true"/>
        </map>
    </property>
</bean> 
```

# c# - Microsoft Moles 和类型转换

> ID：12237005
> 
> 赞同：1
> 
> 时间：2012-09-02T15:05:23.630
> 
> 标签：c#, unit-testing, moles

我尝试了一些单元测试并遇到了使用类实例而不是接口的测试方法的问题。在那种情况下，我发现 MS Moles 可以帮助我。但似乎他们对类型转换情况并不友好。我没有找到任何信息，甚至没有发现如何处理这种情况的问题。例子：

```
public class ClassA
{
 public int Number {get {return 10;}}
}

public class ClassB
{
 public int Count1(ClassA arg) { return arg.Number; } 
 public int Count2(object arg) { return (arg as ClassA).Number; }
} 
```

并且在测试时

```
var cl = new MolesUnitTesting.Moles.MClassA();
MolesUnitTesting.Moles.MClassA.AllInstances.NumberGet = t1 => 20; 
```

第一个`Count`工作正常并返回 20 但在第二个返回中进行转换`Null`。有没有办法在不使用接口和通常的模拟的情况下测试这种方法？如果有其他库可以帮助我，请提供它的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:25:53.907

`ClassA`您可以执行以下操作，而不是模拟该类型的所有实例：

```
var target = new MClassA();

target.NumberGet = () => 42;

Assert.AreEqual(Count1(target), 42);
Assert.AreEqual(Count2(target.Instance), 42); 
```

注意`Count1`你可以直接使用mole，因为它会自动转换为`ClassA`实例。但是，由于`Count2`收到 an ，`object`您需要明确并传递`target.Instance`代表 moled`ClassA`实例的 。

之所以`Count1(target)`有效，是因为生成的 moole 类`MClassA`，它继承自`MoleBase<ClassA>`，定义了以下隐式运算符：

```
public static implicit operator ClassA(MoleBase<ClassA> mole) { // ... } 
```

# php - CodeIgniter 处理一个函数但停留在当前页面

> ID：12237007
> 
> 赞同：0
> 
> 时间：2012-09-02T15:05:38.323
> 
> 标签：php, facebook, codeigniter

我有一个网站布局，分为多个部分文件。其中之一是位于侧边栏中的视图。其中有一个链接（Facebook Connect），当我按下它时，它会调用一个特定的函数，当它完成且没有任何错误时，我收到一个空白页面。

如何编程，所以在另一个控制器中处理一个函数后，它将保持相同的 url ？

这是一个视觉效果。想象一下我在这个 url 上`http://localhost/web/blog`。在这里，在那个页面上，我有一个加载了一个链接的侧边栏，一旦按下它就会处理一个函数。侧边栏中此链接的 url 是`http://localhost/web/member/facebook_login`. 完成后，它应该保持在同一个 url`http://localhost/web/blog`而不是`/web/member/facebook_login`.

`redirect()`不使用函数可以做到吗？因此，无论您的网址是什么，它都会保持在同一页面`/web/home`上`web/about-us`？

提前谢谢各位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:12:49.040

为什么使用 HTTP 引荐来源网址是一个坏主意，我刚刚在我的评论中解释过。

> 侧边栏中此链接的网址是`http://localhost/web/member/facebook_login`

然后您应该将当前页面的 URL 作为参数放入该链接中：

`http://localhost/web/member/facebook_login?go_back_url={url_of_the_current_page}`

然后，成功登录后，您可以使用该参数的值`go_back_url`重定向回它包含的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:43:59.463

找到了！而不是使用`redirect('somecontroller/somefunction/someslug')`你可以使用`user_agent`库。

```
redirect($this->agent->referrer()); 
```

通过加载`user_agent`库使其成为可能`$this->load->library('user_agent');`

# ruby-on-rails - 仅列出唯一值

> ID：12237010
> 
> 赞同：1
> 
> 时间：2012-09-02T15:06:04.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu

我有两个当前设置的 collection_select 下拉菜单，如下所示：

```
<div class="field">
    <%= f.label :country_cont, "Country" %>
    <%= f.collection_select(:country_cont, Country.all, :country, :country) %>
</div>

<div class="field">
    <%= f.label :city_cont, "City" %>
    <%= f.collection_select(:city_cont, Job.all, :city, :city) %>
</div> 
```

我想要的是下拉列表只显示我的数据库表中的唯一值列表（例如在城市而不是显示伦敦 5 次，因为有 5 行有那个城市我希望伦敦只列出一次）。

对此的任何建议将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:32:31.220

我会在您的 Job 类中创建一个按唯一城市过滤的范围。**您如何实际实现这将取决于您的数据库**。下面的示例使用 MySQL 语法：

```
class Job
  scope :unique_by_city, lambda { select('DISTINCT(city)') }
end 
```

在你看来

```
<div class="field">
    <%= f.label :city_cont, "City" %>
    <%= f.collection_select(:city_cont, Job.unique_by_city, :city, :city) %>
</div> 
```

另一个版本是，如果您的数据库中没有很多作业，只需加载所有记录并在 ruby​​ 中执行：

```
class Job
  def self.unique_by_city
    all.uniq_by(&:city)
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:44:03.230

以下答案的更好范围另[见](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)

```
class Job
  scope :unique_by_city, lambda { select(:city).uniq}
end 
```

# c# - 在 linq where 语句中使用 cookie 值

> ID：12237013
> 
> 赞同：0
> 
> 时间：2012-09-02T15:06:09.247
> 
> 标签：c#, .net, linq, cookies

我有一个 linq WHERE 语句，我想使用 cookie 值字符串 (aspxauth) 来匹配表中的字符串，但是我得到一个“对象引用未设置为对象的实例”。错误。

代码是：

```
 HttpCookie authCookie = Request.Cookies[".aspxauth"];
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
        string cookieUser = authCookie.Value;

        if (User.Identity.IsAuthenticated)
        {
            if (Request.Cookies[".aspxauth"] != null)
            {
                var loginStatus = new UsersDataContext();
                var loginstatus = from s in loginStatus.sessions
                                  where s.aspxauth == cookieUser
                                  select s;

                var x = loginstatus.FirstOrDefault().UserId.ToString(); 
```

如果我删除 where 语句，我不会收到错误消息。

关于我在哪里出错的任何想法？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:09:02.950

它告诉您至少有一个会话项为空，或者您的 where 语句将集合过滤到零项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:09:57.943

如果没有元素匹配，您将收到此错误，`where s.aspxauth == cookieUser`即`loginStatus.sessions`. FirstOrDefault() 将返回对象的默认值，即 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:10:38.270

我的猜测是`loginStatus.sessions`序列中没有一个元素与 where 子句的条件匹配，导致`loginstatus.FirstOrDefault()`返回 null，所以当你尝试访问时`.UserId`，你会得到 null 引用异常。

您应该自己检查 null 并处理此案：

```
var firstLoginStatusMatch = loginstatus.FirstOrDefault();

if (firstLoginStatusMatch  == null)
{
   // Handle no match
}

var userId = firstLoginStatusMatch.UserId.ToString() 
```

我还建议将变量命名为更具描述性。您有两个同名但大小写不同的变量，这使得代码很难扫描。

# html - 表格的右边框问题

> ID：12237016
> 
> 赞同：2
> 
> 时间：2012-09-02T15:06:45.650
> 
> 标签：html, css, html-table, border

请看看这个小提琴

```
jsfiddle.net/Qstuw/2/ 
```

正如您从图片中看到的，第一行的右边框在不同的位置。我正在尝试设置所有正确的边框看起来像 1 行 - 我的意思是在同一个地方

![在此处输入图像描述](../Images/3afd32dbca559672f4a2994ff1f0b7d3.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:12:19.627

`div`为您的所有-s添加一个透明的左边框- [http://jsfiddle.net/Qstuw/4/](http://jsfiddle.net/Qstuw/4/)

```
div.Answer {
    margin: 5px 0 5px 0;
    padding-left: 10px;
    border-left: 4px solid transparent;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:11:32.977

见[http://jsfiddle.net/Qstuw/3/](http://jsfiddle.net/Qstuw/3/)

```
div.Answer {
    margin: 5px 0 5px 4px; /* 4px margin-left */
    padding-left: 10px;
}

div.Answer.SelectedDiv{
    border-left: 4px solid #90db99; /* same to border-left */
    margin-bottom: 15px;
    margin-left:0; /* reset margin-left */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:12:00.830

这是所选答案左侧的 4px 边框正在执行此操作。

```
div.Answer.SelectedDiv{
border-left: 4px solid #90db99;
} 
```

您可以在所有答案的左侧添加一个边框。

```
div.Answer {
border-left:4px solid #ffffff;
} 
```

# php - 在 CodeIgniter 的 Active Record 中使用“have”

> ID：12237017
> 
> 赞同：2
> 
> 时间：2012-09-02T15:06:52.053
> 
> 标签：php, codeigniter, activerecord, syntax

有谁知道为什么这种语法不起作用/导致服务器错误？

```
 $this->db->having('post_timestamp >=' . strtotime('last saturday')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:17:16.740

如果您使用的是 MySQL，则查询可能会被转义。尝试这个：

```
$this->db->having('post_timestamp >='. strtotime('last saturday'), NULL, FALSE); 
```

# r - 提取data.table的段

> ID：12237018
> 
> 赞同：4
> 
> 时间：2012-09-02T15:06:56.203
> 
> 标签：r, data.table, rbind, do.call

我有一个`data.table`，我需要从不同的行位置开始提取等长的段。最简单的方法是什么？例如：

```
x <- data.table(a=sample(1:1000,100), b=sample(1:1000,100))
r <- c(1,2,10,20,44)
idx <- lapply(r, function(i) {j <-which(x$a == i); if (length(j)>0) {return(j)} })
y <- lapply(idx, function(i) {if (!is.null(i)) x[i:(i+5)]})
do.call(rbind, y)
    a   b
1:  44  63
2:  96 730
3: 901 617
4: 446 370
5: 195 341
6: 298 411 
```

这当然不是`data.table`做事的方式，所以我希望有更好的方法？

编辑：根据下面的评论，我对此进行了编辑，以便清楚地看出其中的值`a`不一定是连续的，也不对应于行号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T22:07:19.123

不确定您是否已经知道行位置，或者是否要搜索它们。无论哪种方式，这都应该涵盖两者。

```
require(data.table)
set.seed(1)
DT = data.table(a=sample(1:1000,20), b=sample(1:1000,20))
setkey(DT,a)
DT
#       a   b
#  1:  62 338
#  2: 175 593
#  3: 201 267
#  4: 204 478
#  5: 266 935
#  6: 372 212
#  7: 374 711
#  8: 380 184
#  9: 491 659
# 10: 572 651
# 11: 625 863
# 12: 657 380
# 13: 679 488
# 14: 707 782
# 15: 760 816
# 16: 763 404
# 17: 894 385
# 18: 906 126
# 19: 940  14
# 20: 976 107
r = c(201,380,760)
starts = DT[J(r),which=TRUE]  # binary search for items
                              # skip if the starting row numbers are known
starts
# [1]  3  8 15 
```

**选项1：**制作行号序列，连接并在其中进行一次查找`DT`（无需键或二进制搜索即可按行号进行选择）：

```
DT[unlist(lapply(starts,seq.int,length=5))]
#       a   b
#  1: 201 267
#  2: 204 478
#  3: 266 935
#  4: 372 212
#  5: 374 711
#  6: 380 184
#  7: 491 659
#  8: 572 651
#  9: 625 863
# 10: 657 380
# 11: 760 816
# 12: 763 404
# 13: 894 385
# 14: 906 126
# 15: 940  14 
```

**选项 2：**列出 data.table 子集，然后将`rbind`它们放在一起。这比选项 1 效率低，但为了完整性：

```
L = lapply(starts,function(i)DT[seq.int(i,i+4)])
L
# [[1]]
#      a   b
# 1: 201 267
# 2: 204 478
# 3: 266 935
# 4: 372 212
# 5: 374 711
# 
# [[2]]
#      a   b
# 1: 380 184
# 2: 491 659
# 3: 572 651
# 4: 625 863
# 5: 657 380
# 
# [[3]]
#      a   b
# 1: 760 816
# 2: 763 404
# 3: 894 385
# 4: 906 126
# 5: 940  14 
```

```
rbindlist(L)   # more efficient that do.call("rbind",L). See ?rbindlist.
#       a   b
#  1: 201 267
#  2: 204 478
#  3: 266 935
#  4: 372 212
#  5: 374 711
#  6: 380 184
#  7: 491 659
#  8: 572 651
#  9: 625 863
# 10: 657 380
# 11: 760 816
# 12: 763 404
# 13: 894 385
# 14: 906 126
# 15: 940  14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:47:57.017

我认为这应该是一种更好的方法，根据对 data.table 的[10 分钟介绍](http://datatable.r-forge.r-project.org/datatable-intro.pdf)，这是一种二分搜索，因此更可取：

```
library(data.table)
x <- data.table(a=1:100, b=1:100, key="a")
r <- c(1,2,10,20,44)
vec <- numeric()
for (elem in r) {
  vec <- c(vec, seq(from=elem, by=1, length.out=6))
}
x[data.table(vec)]
     a  b
 1:  1  1
 2:  2  2
 3:  3  3
 4:  4  4
 5:  5  5
 6:  6  6
 7:  2  2
... 
```

请注意，我首先将列 a 设置为键，然后创建一个内部 data.table 以与该列 a 连接。创建`vec`可能不是最好的方法，但这不应该是瓶颈。

# mysql - Mysql避免重复URL

> ID：12237020
> 
> 赞同：2
> 
> 时间：2012-09-02T15:07:08.817
> 
> 标签：mysql, sql

是否有用于检查字段是否存在的 SQL 语句？示例：我有一个包含以下内容的数据库：`URL, IsCrawled, Level`等等。我需要检查 URL 是否已经存在。我不关心其他领域。我正在编写一个非常快速的爬虫，这是需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:10:03.043

```
ALTER TABLE `table`
ADD UNIQUE INDEX `urls` (`URL`) 
```

或简单，

```
ALTER TABLE `table`
ADD UNIQUE(`URL`); 
```

不过，我使用第一种方法。也只阅读了第二种工作方法。*可能并非如此*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:10:09.767

这是你想要的吗？

```
SELECT COUNT(*)
FROM tableName
WHERE `URL` = 'urlHERE' 
```

`0`如果它不存在，它将有一个结果。或在字段上添加唯一索引`URL`

```
ALTER TABLE tableName
ADD CONSTRAINT indexName UNIQUE (`Url`) 
```

这样，`Insert`如果您插入一个已经存在的 url，该语句将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:12:39.643

为什么不在任何索引下使用普通选择：

```
SELECT ID FROM TABLE WHERE URL = @URL 
```

如果选择不为空，那么已经有一个。

现在，根据您的问题，另一个更好的主意是添加一个[UNIQUE CONSTRAINT](http://dev.mysql.com/doc/refman/5.0/en/constraint-primary-key.html)以便通过设计您的数据库将不允许该值的重复。

现在，如果您只想比较 URL 的一部分（即域），那么您可以使用[LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)比较功能来查看是否已经存在一个使用相同域名存储的 URL。

# javascript - javascript eval 方法语法

> ID：12237025
> 
> 赞同：0
> 
> 时间：2012-09-02T15:07:43.637
> 
> 标签：javascript, jquery, json

我在我的 Web 应用程序中使用 jquery。在那里我们使用下面的 eval 方法。

```
 var json = eval('(' + data + ')'); 
```

谷歌搜索后，我发现上面使用的 eval 方法将 json 数据转换为 javascript 对象。但是这种语法是什么意思？为什么它必须包含在 ('(' ')') 括号内。请帮助我理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:09:00.087

不要`eval`用来解析 json。由于您使用的是 jQuery，因此请使用`$.parseJSON(data)`. 如果包含数据`window.close()`怎么办？

[WRT 到括号中，您可以在douglas crockford 的 json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L467)中看到解释它们的注释：

> ```
> // In the third stage we use the eval function to compile the text into a
> // JavaScript structure. The '{' operator is subject to a syntactic ambiguity
> // in JavaScript: it can begin a block or an object literal. We wrap the text
> // in parens to eliminate the ambiguity. 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:14:15.150

用于`()`封装数据是为了防止`{}`被解析为块。

```
var json = eval('{}');  // the result is undefined
var json = eval('({})');  // the result is the empty object. 

var json = eval('{"a": 1}'); // syntax error
var json = eval('({"a": 1})'); // the result is object: {a: 1} 
```

但是你**不应该** `eval`用来解析 json 数据。

改用`var json = JSON.parse(data);`或一些库函数。

# r - 调度程序绘图以可视化构建过程

> ID：12237028
> 
> 赞同：2
> 
> 时间：2012-09-02T15:08:19.970
> 
> 标签：r, ggplot2

我想为此使用 ggplot2 但不知道在哪里看。我有一个全局开始和结束时间`min(begin)`，`max(end)`分别是我的 x 轴。我的 y 轴将是每个处理器，我的数据包括每个处理器的时间块，其中编译器将忙于编译或链接特定文件。我想查看处理器空闲的空白区域。我的 df 看起来像这样：

```
df <- data.frame(proc = as.factor(c('P_1', 'P_1', 'P_1', 'P_2', 'P_2', 'P_3')), begin=c(1, 20, 23 , 3, 5, 8), end=c(5, 19, 21, 4, 9, 100), what=c('compiling A', 'compiling B', 'linking A', 'compiling C', 'compiling D', 'compiling E'))
df
> df
  proc begin end        what
1  P_1     1   5 compiling A
2  P_1    20  19 compiling B
3  P_1    23  21   linking A
4  P_2     3   4 compiling C
5  P_2     5   9 compiling D
6  P_3     8 100 compiling E
> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T20:06:56.073

像这样的东西？

```
library(ggplot2)
ggplot(df, aes(x=begin, xend=end, y=proc, yend=proc, colour=what)) + 
  geom_segment(size=5) 
```

![在此处输入图像描述](../Images/c00d713a9dd3b9256a3b79c8a93d43e8.png)

# jquery-ui - jQuery UI Range Slider 事件条件

> ID：12237034
> 
> 赞同：0
> 
> 时间：2012-09-02T15:09:01.500
> 
> 标签：jquery-ui

我需要使用 Range Slider 来设置时间范围（8-23），但我需要一些基本条件（我基本上需要最小范围为 1h）：

*   当两个拾取器位于同一位置时，右侧拾取器变为“+1”
*   在右限 (23) 上，值必须是“22,23)

这是我到目前为止测试的代码：[JSFiddle URL](http://jsfiddle.net/convoy83/FzGwU/)

这仅在滑块的右限制之前有效，当我有“23,23”或“22,23”时，我的*getSlide*检查功能无法正常工作，我不明白如何修复它..

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:30:27.157

我解决了自己仅在幻灯片事件中编码所有条件的问题：

```
...
slide: function (event, ui) {
    val1 = ui.values[0];
    val2 = ui.values[1];
    if(val2-val1 < 1 || val1 > 22){
         return false;
    }
    $("#start").text(ui.values[0]);
    $("#stop").text(ui.values[1]);
},
... 
```

以前版本的奇怪行为仍然没有解释，但它确实有效。

# cocos2d-iphone - cocos2d-Menu 的标签显示在图层上，但对触摸没有反应

> ID：12237038
> 
> 赞同：0
> 
> 时间：2012-09-02T15:09:26.680
> 
> 标签：cocos2d-iphone, ccmenuitem

我不知道出了什么问题，也许是因为我使用了更多层？
我认为我的另一层（滑动菜单网格子类正在窃取触摸...） // // BGLayer.m // MainProject // // 由 NSSL1 于 2012 年 8 月 30 日创建。// 版权所有 (c) 2012 **MyCompanyName**。版权所有。//

```
#import "BGLayer.h"
#import "GameManager.h"
#import "MainMenuLayer.h"

@interface BGLayer() 
-(void)displayBGMenu;
@end

@implementation BGLayer

-(void)backtomenu:(CCMenuItem*)itemPassedIn{
    CCLOG(@"why I can't reach here?");
    [[GameManager sharedGameManager] runSceneWithID:kMainMenuScene];} 
-(id)init {
    self = [super init];
    if (self != nil) {
        self.isTouchEnabled=YES;

        [self displayBGMenu];

    }
    return self;
}
    -(void)displayBGMenu{
        NSString* backLabelstring = [NSString stringWithFormat:@"Back to Menu"];
        CGSize screenSize = [CCDirector sharedDirector].winSize;
        //Shadow
        CCLabelTTF *backLabel = [CCLabelTTF labelWithString:backLabelstring fontName:@"Marker Felt" fontSize:32];
        backLabel.position=CGPointMake(screenSize.height*0.5f, screenSize.width*0.1f);
        backLabel.color = ccBLUE;

        CCMenuItem* backbtnitem=[CCMenuItemLabel itemWithLabel:backLabel target: self
                                                      selector:@selector(backtomenu:)];
        [backbtnitem setTag:21];
        menu = [CCMenu menuWithItems:backbtnitem ,nil];
        menu.position = CGPointMake((screenSize.width / 2), screenSize.height*0.1f);
        menu.tag = 200;
        [self addChild:menu z:20 tag:200];

    }

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:11:36.713

我遇到了层在同一类型的类中吞咽触摸的问题，为了避免这种情况，有人建议我在网格按钮项类的 init 方法中添加它：

```
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:-1 swallowsTouches:YES]; 
```

效果是调用此方法的类不会贪婪地检测父层触摸检测器，只检测其区域内的触摸，并允许用户以平滑的方式滚动菜单以及按下父级中的其他项目层（例如您的菜单）。

# c++ - 在同一个容器中存储不同的模板类

> ID：12237040
> 
> 赞同：1
> 
> 时间：2012-09-02T15:09:41.327
> 
> 标签：c++, templates

我有以下课程：

```
template<unsigned int offsetX, unsigned int offsetY>
class myClass {
//several int and floats that are computed with offsetX and offsetY
//and other stuff
} 
```

无论模板化参数是什么，它的大小都是相同的。我可以将 myClass<1,1> 和 myClass<0,0> 等的实例存储在同一个容器中吗？我知道当模板化的东西是一个类时这是不可能的，但在这种情况下，类的布局总是相同的

编辑：我知道我可以将 offsetX 和 offsetY 发送到类的构造函数并且没有模板，但在这种情况下它们在编译时是已知的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:22:45.723

为您的模板定义基类，将放置所有这些常见的整数和浮点数。

仅使用派生模板来计算基本字段。然后，您可以将模板实例插入到使用基类定义的容器中。这称为对象切片。一般来说，这不是一件好事...

最好是删除模板类并定义模板函数，该函数将完成您的模板 c-tor 已经完成的工作。

```
template <int x, int y> inline MyClass compute()
{…} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:13:36.290

不，你不能，因为类型不同。您可以使用通用基类并存储指向它的[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，或存储[boost::any](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html)。

```
class MyBase { .... };

template<unsigned int offsetX, unsigned int offsetY>
class myClass : public MyBase{ .... }; 
```

然后

```
std::vector<std::unique_ptr<MyBase>> v;

v.push_back(std::unique_ptr<MyBase>(new myClass<1,1>()));
v.push_back(std::unique_ptr<MyBase>(new myClass<0,0>())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:13:10.830

不，你不能。类型`myClass<1, 1>`和`myClass<0, 0>`无关。

# video - 以编程方式将 Sdd 水印到 YUV 视频数据 (SDL_Overlay)

> ID：12237042
> 
> 赞同：0
> 
> 时间：2012-09-02T15:09:57.503
> 
> 标签：video, ffmpeg, sdl, video-processing, yuv

我的应用程序通过 SDL + ffmpeg 库（不是 exe 工具）播放视频。

我想将文字添加到视频中

ffmpeg 的 VHOOK[源代码](http://svn.tribler.org/ffmpeg/trunk/vhook/watermark.c)显示它将数据转换为 RGB32。不能直接在YUV中完成吗？

这是我当前的代码，你能给我一些建议吗？

```
SDL_Overlay * pOverlay = SDL_CreateYUVOverlay( pDecodedFrame->width
            , pDecodedFrame->height
            , SDL_YV12_OVERLAY
            , pThis->m_pSurface
            );
if( pOverlay != NULL )
{
    SDL_LockYUVOverlay(pOverlay);

    pSwsContext = sws_getCachedContext( pSwsContext
        , pDecodedFrame->width
        , pDecodedFrame->height
        , pThis->m_pMediaFile->GetVideoPixcelFormat()
        , pDecodedFrame->width
        , pDecodedFrame->height
        , PIX_FMT_YUV420P
        , SWS_SPLINE
        , NULL
        , NULL
        , NULL
        );

    AVPicture tPicture;
    tPicture.data[0] = pOverlay->pixels[0];
    tPicture.data[1] = pOverlay->pixels[2];
    tPicture.data[2] = pOverlay->pixels[1];

    tPicture.linesize[0] = pOverlay->pitches[0];
    tPicture.linesize[1] = pOverlay->pitches[2];
    tPicture.linesize[2] = pOverlay->pitches[1];

    int nSliceHeight = sws_scale( pSwsContext
        , pDecodedFrame->data
        , pDecodedFrame->linesize
        , 0
        , pDecodedFrame->height
        , tPicture.data
        , tPicture.linesize
        );

    SDL_UnlockYUVOverlay(pOverlay);
    VideoPicture tVideoPicture = {0};
    tVideoPicture.pOverlay = pOverlay;
    tVideoPicture.nWidth = pDecodedFrame->width;
    tVideoPicture.nHeight = pDecodedFrame->height;
    tVideoPicture.dbPTS = dbPTS;

    pThis->m_pVideoPictureQueue.Append(tVideoPicture);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:14:40.720

是的，您可以只编写 foreach 循环来遍历 YUV 像素（YUV 基本上是亮度+色度），您只需很少的处理即可将 RGB 数据（水印图像）转换为 YUV 并将它们组合起来。这不会那么难，但您需要了解如何将 rgb 混合和转换为 yuv420p。

# java - this.mCtx 和 mCtx Android 的区别

> ID：12237047
> 
> 赞同：0
> 
> 时间：2012-09-02T15:10:09.753
> 
> 标签：java

如果我创建一个如下所示的类：

```
public class TagManager {
private final Context mCtx;

public TagManager (Context ctx) {
    this.mCtx = ctx;
} 
```

}

使用和使用有什么区别

> 这个.mCtx = ctx;

相对

> mCtx = ctx;

据我所知，他们都做同样的事情，但我找不到任何讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:14:06.353

肯定是一样的。这只是 CodeStyle 的问题 - 由您来选择您更喜欢的内容。

唯一合理的情况。***是当您的参数和成员变量具有相同名称时。例如

```
 private final Context ctx;
    public TagManager (Context ctx) {
        this.ctx = ctx;
    } 
```

但是，Android Code Style 告诉我们对成员变量使用 m*** 前缀，因此这种情况在您的类中应该很少发生。

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:15:15.010

> 在实例方法或构造函数中，**this**是对当前对象的引用——正在调用其方法或构造函数的对象

```
public class Point {
    public int x = 0;
    public int y = 0;

    //constructor
    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

`this.x`在示例中参考`public int x`否`int x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:15:25.707

考虑一下：

```
public class foo {
private final int bla = 1;

public int blabla () {
    int bla = 2;
    return bla;//this will return 2
} 
```

/

```
public class foo {
private final int bla = 1;

public int blabla () {
    int bla = 2;
    return this.bla;//this will return 1
} 
```

# ruby - 使用捆绑器时如何使用不在 Gemfile 中的 gem？

> ID：12237055
> 
> 赞同：23
> 
> 时间：2012-09-02T15:11:07.333
> 
> 标签：ruby, rubygems, bundler

当将捆绑器用于一般项目，特别是 Rails 时，您只能访问 Gemfile 中定义的 gem。虽然这是有道理的，但它可能是有限的。大多数情况下，当我想使用团队其他成员不使用的某个 RSpec 格式化程序时，我发现它会受到限制。除非它在 ​​Gemfile 中，否则无法访问。

有什么办法，或者我必须将它添加到 Gemfile？

更新：我的问题不是 Bundler，而是 Spork。在没有 Spork 的情况下运行 RSpec 时，我可以毫无问题地使用我想要的任何格式化程序。

更新 #2：看起来使用 Bundler 仍然是问题的原因。使用 Spork 和不使用 Spork 的区别在于，在不使用 Spork 的情况下运行 RSpec 时，它会在加载项目并进入 Bundler“沙箱”之前加载格式化程序。

使用捆绑器：

```
$ bundle exec irb
>> require 'fivemat'
LoadError: cannot load such file -- fivemat

from (irb):1:in `require'
from (irb):1
from /Users/arikfr/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

没有捆绑器：

```
$ irb
>> require 'fivemat'
=> true 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-02T15:56:49.593

在[ChiliProject 中](https://www.chiliproject.org)，我们允许用户创建一个`Gemfile.local`包含在主`Gemfile`加载中的内容。这允许用户指定额外的 gem，而无需更改我们`Gemfile`以简化更新。

为此，我们[在 Gemfile 的底部](https://github.com/chiliproject/chiliproject/blob/master/Gemfile#L102)包含了以下代码。

```
gemfile_local = File.expand_path('Gemfile.local', __dir__)
if File.readable?(gemfile_local)
  puts "Loading #{gemfile_local}..." if $DEBUG
  instance_eval(File.read(gemfile_local))
end 
```

它`Gemfile.local`本身通过`.gitignore`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-12T22:53:13.817

我认为这些答案都没有被选为正确的，因为它们不能很好地解决问题：拥有可以*默认使用的*额外 gem不需要对存储库中已有的文件进行任何更改即可实现. 也就是说，您不必修改任何文件，也不必记住不要签入本地更改。这是我的做法。

这个想法基本上是反转 Holger 答案的依赖关系，这样就不需要修改共享的 Gemfile。Bundler 允许指定将[哪个文件用作 gemfile](http://bundler.io/v1.5/man/bundle-config.1.html)，但奇怪的是，文档中的方法[显然不适用于其配置文件，并且不会被修复](https://github.com/bundler/bundler/issues/1315)。Bundler 有一个有点模糊的特性，即任何配置选项都可以在环境变量中设置或在命令行中传递。运行所有命令为`bundle [command] --gemfile [yourgemfile]`或`BUNDLE_GEMFILE="[yourgemfile]" bundle [command]`将导致 Bundler 读取您想要的任何 gemfile。我强烈建议使用环境变量方法，并为当前会话创建别名或导出变量，特别是因为我无法将命令行开关与“exec”命令一起使用。

因此，我像这样运行 rspec: ，并且我在我的 bashrc 中`BUNDLE_GEMFILE="[mygemfile]" bundle exec rspec [filename]`使用了这个别名的第一部分。`bem`奇迹般有效。

然后，您应该设置您的源代码管理以忽略您的 Gemfile，无论是在项目的 .gitignore 中，还是为了保持项目完全卫生而不更改其 .gitignore，到您的个人全局忽略文件（默认情况下，[`~/.config/git/ignore`](https://www.kernel.org/pub/software/scm/git/docs/gitignore.html)它具有相同的格式为项目的 gitignore 文件）。

需要注意的另一件事是 Bundler 将根据 Gemfile 的名称创建一个锁定文件。这非常方便，因为它可以防止您在签入项目时覆盖项目的 Gemfile.lock，但您也需要忽略这个新的锁定文件。如果您的 gemfile 是`Foo.bar`，请查找`Foo.bar.lock`.

最后，您可以在自定义 Gemfile 中执行类似于 Holger 建议的操作：

```
source "http://rubygems.org"
gem "fivemat"
instance_eval(File.read(File.dirname(__FILE__) + "/Gemfile")) 
```

只要你记得指定你的 Gemfile，你就可以开始了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T10:28:22.300

您可以在 Gemfile 中使用类似的内容：

```
gem 'foo' if ENV['ENABLE_FOO_GEM'] 
```

然后只需在您的环境中设置 ENABLE_FOO_GEM 即可。

```
export ENABLE_FOO_GEM=1 
```

默认情况下，gem 将被禁用，但任何想要使用它的人都可以轻松地（永久地）打开它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-28T16:51:03.597

添加到*.gitignore*

```
Gemfile.local
Gemfile.local.lock 
```

将包含以下内容的*Gemfile.local.sample*文件添加到项目中：

```
# Include gems that are note meant to be part of the project but for development purposes
# That's why Gemfile.local and Gemfile.local.lock must be git-ignored

# To use these gems:
#   1\. Create a "Gemfile.local" file (at same level of "Gemfile")
#   2\. Prepend "BUNDLE_GEMFILE=Gemfile.local" before "bundle install" or "bundle exec rails c" and so forth.

eval_gemfile "./Gemfile"

group :development, :test do
  # Suggested gems
  gem "awesome_print", require:"ap"
  gem "hirb"
  gem "pry"
  gem "pry-byebug"
  gem "pry-rails"
  gem "meta_request"

  # My gems
  gem "fivemat"
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T15:34:30.670

如果您仍然决定这样做（可怕的想法）：

您可以将 ruby​​ 代码添加到 Gemfile 以加载 ~/.gemfile（或类似文件）（如果存在）。

就像是：

```
eval(IO.read('~/.gemfile'), binding) if FileTest.exists?("~/.gemfile") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-05T14:36:18.040

I believe the gem [Devpack](https://github.com/bobf/devpack) provides the functionality you are looking for.

The gem allows you to add a single gem to your Gemfile which will permit any developer to configure their own preferred set of development gems either for an individual project or globally by creating a `.devpack` file containing a list of gems.

(I am the author of this gem; I came across this post while developing it so thought it may be worth adding).

# c++ - 为什么在使用内置 qsort 时会出现错误

> ID：12237056
> 
> 赞同：3
> 
> 时间：2012-09-02T15:11:20.503
> 
> 标签：c++

我写了一些代码，这给了我错误。代码如下：-

```
 long long int compare (const void * a, const void * b)
   {
     return ( *(long long int*)a - *(long long int*)b );
   }

 long long int number; 
 long long int *ar =(long long int *)(malloc(sizeof(long long int)*number));
 //Took the values of number and  ar from and then performed the following
 qsort(ar,number,sizeof(long long int),compare); 
```

此代码导致以下错误：-

`invalid conversion from long long int (*)(const void*, const void*)' to int (*)(const void*, const void*) initializing argument 4 of void qsort(void*, size_t, size_t, int (*)(const void*, const void*))'`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:13:36.083

qsort 需要一个返回类型为 int 的方法，而不是 long long。

而且因为直接转换为 int 可能实际上会搞砸您的比较器函数，您可能应该这样做（假设您已经将 a 和 b 转换为 long long）：

```
return a < b ? -1 : (a == b ? 0 : 1); 
```

为了符合要求，即：

> 此函数的返回值应通过分别返回负值、零或正值来表示是否认为 elem1 小于、等于或大于 elem2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:14:52.577

的第 4 个参数`void qsort(void*, size_t, size_t, int (*)(const void*, const void*))'`是指向签名为 的函数的指针`int (*)(const void*, const void*))`。

您正在给它一个签名函数`long long int (*)(const void*, const void*)`，它不同，因为它的返回类型不是正确的，它应该是一个`int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:24:16.510

```
long long compare (const void * a, const void * b)
{
  return ( *(long long*)a - *(long long*)b );
} 
```

除了与 不兼容之外`qsort`，这种类型的比较通常只保证适用于足够小的整数（或更一般地说，整数不会相距太远）。更喜欢这种方式：

```
int compare(const void *a, const void *b)
{
  long long rhs = *static_cast<const long long*>(a),
            lhs = *static_cast<const long long*>(b);
  return (rhs > lhs) - (lhs > rhs);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T15:17:36.323

正如其他人所说，您的函数需要返回一个 int。qsort 函数不知道它排序的元素的类型，因此在其签名中指向 void 的指针。当左参数大于右参数时，您需要返回一个正值，当它们相等时返回零，当左参数小于右参数时返回负值。你不需要提供一些确切的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T15:15:10.953

改变

```
long long int compare (const void * a, const void * b) 
```

到

```
int compare (const void * a, const void * b) 
```

无论您的数组类型如何，此函数的返回值始终为 int。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-02T15:15:26.970

```
void qsort ( void * base, size_t num, size_t size, int ( * comparator ) ( const void *, const void * ) ); 
```

> 比较两个元素的函数。该函数应遵循此原型：

```
int comparator ( const void * elem1, const void * elem2 ); 
```

将功能转为

```
int compare (const void * a, const void * b)
   {
     return ( *(int*)a - *(int*)b );
   } 
```

**我不能长时间这样做吗？**

> 不，此函数的内容与标准 C 库头文件相同 `<stdlib.h>`。只有函数签名已被两个声明替换。（N3337/ § 25.5）。

```
extern "C" void qsort(void* base, size_t nmemb, size_t size,
int (*compar)(const void*, const void*));
extern "C++" void qsort(void* base, size_t nmemb, size_t size,
int (*compar)(const void*, const void*)); 
```

**为什么不应该在使用 long long int 时返回 int。**

> 当你做这样的事情时，`a=8589934592,b=4294967296;` 你就会知道最好将 a & b 声明为 int。

# c# - 初始化相机视图矩阵的不同方法

> ID：12237058
> 
> 赞同：0
> 
> 时间：2012-09-02T15:11:50.847
> 
> 标签：c#, matrix, xna, camera

有哪些方法可以在 XNA 中为相机创建视图矩阵？

到目前为止，我只看到了这种`createLookAt()`方法，并且很好奇还有什么可能。

它出现在[MSDN 站点上](http://msdn.microsoft.com/en-us/library/bb197914)，这`creatLookAt()`是构造视图矩阵的唯一矩阵方法。

**编辑：**

这是关于如何组成世界矩阵的一个很好的[教程。](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:12:18.267

视图矩阵只不过是一个恰好被反转的典型矩阵（表示世界空间方向和位置）。

如果您知道如何创建一个典型的世界空间矩阵，只需将其反转并变成一个视图矩阵。

例如，在 Xna 中：

```
Matrix m = Matrix.CreateYawPitchRoll(yawFloat, pitchFloat, rollFloat) * Matrix.CreateTranslation(someVector3);

Matrix myViewMatrix = Matrix.Invert(m); 
```

myViewMatrix 将在您的效果中按预期工作。

# javascript - HTML5 视频链接在 Chrome 中不起作用

> ID：12237064
> 
> 赞同：1
> 
> 时间：2012-09-02T15:12:22.530
> 
> 标签：javascript, html, html5-video, webrtc

我有以下代码可通过可公开访问的链接直接查看我的网络摄像头。

```
<!DOCTYPE html>
<html>
<head>
    <title>webRTC Test</title>
</head>
<script type = "text/javascript">
    function init()
    {
        if(navigator.webkitGetUserMedia)
        {

            navigator.webkitGetUserMedia({video:true}, onSuccess, onFail);

        } 
        else
        {
            alert('webRTC not available');
        }

    }

    function onSuccess(stream)
    {
        document.getElementById('camFeed').src = webkitURL.createObjectURL(stream);
        var src = document.getElementById('camFeed').getAttribute('src');
        document.getElementById('streamLink').href = src;
    }

    function onFail()
    {
        alert('could not connect stream');
    }

</script>
<body onload = "init();" style="background-color:#ababab;">
    <div style="width:352px; height:625px; margin:0 auto; background-color:#fff;">
        <div>
            <video id ="camFeed" width="320" height="240" autoplay>
            </video>
        </div>
        <div>
            <canvas id="photo" width="320" height="240">
            </canvas>
        </div>

        <div style="margin: 0 auto; width:82px;">
            <a id="streamLink">Visit Stream</a>
        </div>
    </div>

    </div>
</body>
</html> 
```

锚标记中生成的链接类似于：

```
blob:http%3A//sitename.com/7989e43a-334r-4319-b9c5-9dfu00b00cd0 
```

在访问 chrome 时告诉我“糟糕！此链接似乎已损坏。”

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:12:29.517

[文件 API 规范](http://dev.w3.org/2006/webapi/FileAPI/)定义了`URL.createObjectURL`. 有几个部分使您在遵循规范的浏览器中尝试做的事情变得不可能。

*   [第 11.5 节](http://dev.w3.org/2006/webapi/FileAPI/#originOfBlob)说：

    > Blob URI 的来源必须是调用`URL.createObjectURL`. **Blob URI 必须仅在此 origin 内有效**。

    换句话说，返回的 URI`createObjectURL`只能在创建它们的网站的上下文中使用（请参阅[RFC6454：Web 起源概念](https://www.rfc-editor.org/rfc/rfc6454)，以更准确地定义 HTML 规范中“起源”的含义）。您无法访问`createObjectURL`直接返回的 URL。

*   [第 11.6 节](http://dev.w3.org/2006/webapi/FileAPI/#lifeTime)说：

    > 该规范添加了一个额外的卸载文档清理步骤：用户代理必须撤消`URL.createObjectURL`从该文档中创建的任何 Blob URI。

    这意味着即使您可以直接访问该 URL，一旦您离开调用`createObjectURL`所创建 URL 的页面，该页面将不复存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:27:15.177

**Your code won't work on localhost or your machine alone.**

> All you need is, upload this HTML document on the Net(just in case you are wondering on how to get Hosting for yourself, then try checkout Dropbox, you can upload your HTML page publicly and get access via Public Link for free or try some other product or simply get hosting for yourself). As you can see that this example [http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/) works perfectly in chrome, though the code that it is utilising is the same as yours. I hope this solution is of some help to your and others searching for an answer to this bug.

Also, you can then use an iframe to get access to the video element to perform operations on it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:44:18.247

您必须确保您在**HTTP**或**HTTPS**协议上使用/测试您的代码 --- 因为`URL.createObjectURL`在协议上有一些问题--- 并且在使用**file://**`file://`时它无法为您的视频生成正确的 BLOB - --- !!!

# java - 预览打开时，相机视图上的 Android SurfaceView 覆盖不显示

> ID：12237067
> 
> 赞同：2
> 
> 时间：2012-09-02T15:12:32.313
> 
> 标签：java, android, camera, overlay, surfaceview

我有一个包含两个 SurfaceView 的 FrameLayout。其中一个将显示相机预览，另一个是我用于绘图的自定义表面视图。问题是没有显示表面视图。如果我注释掉相机开始预览的行，它会在黑色背景上进行。这表明 Surface 视图定位良好，但我怀疑在绘制相机预览时出现问题。

相机视图：

```
public CameraView(Context context, AttributeSet a) {
    super(context, a);
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
} 
```

自定义视图：

```
public InclinaisonGauge(Context context, AttributeSet attrs) {
    super(context, attrs);
    getHolder().addCallback(this);
    getHolder().setFormat(PixelFormat.TRANSLUCENT);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    run = true;
    updateThread = new Thread()
    {
        public void run()
        {
            Canvas c = null;
            final SurfaceHolder inclHolder = getHolder();
            while (run) {
                try {
                    c = inclHolder.lockCanvas();
                    if(c!=null)
                    {
                        synchronized (inclHolder) {
                            onDraw(c);
                        }
                    }
                } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    inclHolder.unlockCanvasAndPost(c);
                }
            }           
        }
    }
}; 
```

我在自定义视图上使用这个非常简单的绘制方法来确保它不是帧率问题

```
public void doDraw(final Canvas canvas, final boolean bigSize, float daDirection)
{
    canvas.drawARGB(255, 255, 255, 255);
} 
```

有没有人经历过这个？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T11:26:45.127

好的，如果其他人得到这个，解决方案是在surfaceView上调用它

```
this.setZOrderMediaOverlay(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-02T16:12:59.847

我不认为 SurfaceViews 旨在用作叠加层，但可以实现这种行为。您要做的是在创建 SurfaceView 类时：

```
 setZOrderMediaOverlay(true);
    getHolder().setFormat(PixelFormat.TRANSPARENT); 
```

# c - 如何为结构本身及其成员分配内存

> ID：12237074
> 
> 赞同：0
> 
> 时间：2012-09-02T15:13:12.610
> 
> 标签：c, struct, dynamic-allocation

我有这个结构：

```
struct foo {
  char *a;
  char *b;
  char *c;
  char *d;
}; 
```

可以为结构本身及其成员分配空间，而不是例如，

```
struct foo f;
f.a = malloc();
f.b = malloc();
f.c = malloc();
f.d = malloc();
strcpy(f.a, "a");
strcpy(f.b, "b");
//.. 
```

像这样的东西（当然它不起作用）：

```
struct foo f = malloc(sizeof(struct f));
strpcy(f.a, "a");
//etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:19:22.250

如果这是您所要求的，您当然可以一次性为结构本身及其成员分配内存。你只需要知道你将需要多少（总共）并处理任何可能的对齐问题（虽然在这种特殊情况下不存在）。

```
struct foo *f = malloc(sizeof *f + size_a + size_b + size_c + size_d);
f.a = (char*)(f + 1);
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:18:08.320

如果您在构建时知道所有“动态”变量大小，则可以这样做。

```
struct foo *f = malloc(sizeof(struct f) + nSizeExtra);

f->a = (char*) (f + 1);
f->b = ((char*) (f + 1)) + nLengthOfA;
f->c = ((char*) (f + 1)) + nLengthOfA + nLengthOfB;
f->d = ((char*) (f + 1)) + nLengthOfA + nLengthOfB + nLengthOfC; 
```

当然最后你应该只释放`f`（不是它的成员）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:19:14.200

当然你可以为你的结构和它的成员分配内存，但是如果你为整个事情分配一个连续的内存，你无论如何都需要初始化你的结构的成员，所以你不能像你想要的那样轻松地做你想做的事喜欢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T15:31:47.337

这称为构造函数。省略了错误处理，它可能看起来像：

```
struct foo *new_foo()
{
    struct foo *obj = malloc(sizeof(struct foo));
    obj->a = malloc(...);
    obj->b = malloc(...);
    obj->x = new_x(...);
    ...
    return obj;
} 
```

并需要相应的析构函数。如果您发现自己经常需要编写这样的代码，那么可能是时候切换到 C++ 了 :)。

# backbone.js - Backbone-forms + Zepto 无法渲染

> ID：12237085
> 
> 赞同：0
> 
> 时间：2012-09-02T15:14:21.017
> 
> 标签：backbone.js, zepto

我正在使用 Phonegap + Zepto + Backbone 为 Blackberry OS5 开发应用程序。为了做到这一点，我一直在使用 Backbone-forms 来处理提交，但由于 OS5 的 jQuery 版本高于 1.4.4 存在问题，我搬到了 Zepto，但是 BackboneForms 上的渲染方法停止工作，谁能帮我它？

这是它中断的部分，有关完整代码，请在此处查看[https://github.com/powmedia/backbone-forms](https://github.com/powmedia/backbone-forms)：

```
render: function() {
  var self = this,
      options = this.options,
      template = Form.templates[options.template];

  //Create el from template - HERE IT BREAKS
  var $form = $(template({
    fieldsets: '<b class="bbf-tmp"></b>'
  }));

  //Render fieldsets
  var $fieldsetContainer = $('.bbf-tmp', $form);

  _.each(options.fieldsets, function(fieldset) {
    $fieldsetContainer.append(self.renderFieldset(fieldset));
  });

  $fieldsetContainer.children().unwrap();

  //Set the template contents as the main element; removes the wrapper element
  this.setElement($form);

  if (this.hasFocus) this.trigger('blur', this);

  return this;
}, 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:49:42.837

Zepto、backbone 和 underscore 不正式支持 BB5.0 浏览器 - BB5.0 在引擎盖下有芒果，而 BB6.0 向上有 webkit。除此之外，根据我的经验，我可以说 BB5.0 中的 javascript 支持至少可以说不是很好。所以解决这个问题有点像大海捞针。

一个可能的罪魁祸首是下划线，这是我看到您用于模板的内容。Underscore 似乎无法处理 BB5.0 上具有任何逻辑的模板（任何循环或 if 语句）。因此，如果您想在模板中做任何比基本数据绑定更复杂的事情，您将需要修改下划线或执行您自己的模板解决方案。

不确定这是否是您想要的答案，但希望对您有所帮助。. .

编辑：

关于下划线模板问题：BB OS5.0 上的本机 foreach 实现似乎存在问题。如果可用，下划线将调用此本机 foreach。用下划线注释掉以下行修复了我们在 OS5.0 中的集合渲染：

```
/* if (nativeForEach && obj.forEach === nativeForEach) {
     obj.forEach(iterator, context);
} else */ 
```

希望有帮助。

# dialog - 使用 MonoDroid，如何在 EditText 字段获得焦点时打开对话框？

> ID：12237088
> 
> 赞同：0
> 
> 时间：2012-09-02T15:14:31.203
> 
> 标签：dialog, focus, xamarin.android, android-edittext

我使 EditText 可点击，但您必须“双击”才能弹出对话框，这并不是真正想要的行为。当 EditText 被单击/获得焦点时，如何调出对话框？

包括阻止键盘弹出的方法的奖励积分:)

```
 _createProfileDobEdtTxt.Clickable = true;

        _createProfileDobEdtTxt.Click += (sender, e) =>
            {
                ShowDialog(DATE_OF_BIRTH_DIALOG);
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:34:43.933

我找到了 - 使用 .Touch 事件处理程序：

```
 _createProfileDobEdtTxt.Touch += (sender, e) =>
     {
        ShowDialog(DATE_OF_BIRTH_DIALOG);
     }; 
```

# java - 在 Android 上挂载 NFS 共享

> ID：12237097
> 
> 赞同：1
> 
> 时间：2012-09-02T15:15:15.837
> 
> 标签：java, android, network-programming

我需要从 Java 应用程序挂载 NFS（网络文件系统）共享。当我尝试使用 mount（在使用 adb shell 的非 root 设备上）时，系统说不允许该操作。

因为 NFS 在内核中。我更喜欢使用一些系统解决方案。有人知道怎么做吗？（从 Java 应用程序读取和写入文件）。

或者有人可以推荐任何灯光库吗？

感谢您的回答。

# c++ - 类成员对象的多态性

> ID：12237103
> 
> 赞同：2
> 
> 时间：2012-09-02T15:15:36.100
> 
> 标签：c++, class, polymorphism, virtual

我想知道当您正在操作的对象存储在类中（而不是作为指针或引用类型）时，C++ 中的多态性如何工作。

我读过多态性只适用于指针和引用，但是我重载了 << 运算符，它将接受对 A 的引用。

在我的实现中测试这个示例时，我发现它没有按预期工作，并且将返回基类字符串（“A”）而不是“B”。

这是因为对象存储在类本身内部吗？并且 << 运算符接受引用与多态性的工作无关？（即，因为它的核心对象存储在类中，除非我将它作为指针/引用存储在类中，否则它将不起作用）谢谢

```
class Test {

    public:
       void Run() {
           object_ = B();
           std::cout << object_ << std::endl;
       }

    private:
       A object_;
};

Class A {
    // Assume this is already implemented. All it does it add obj.getType()
    // to stream
    friend ostream& operator<<(ostream& stream, A obj);

    public:
      virtual std::string getType() {
             return std::string("A");
      }
};

Class B : public A {
    public:
      std::string getType() {
            return std::string("B");
      }
};

int main(int argc, char* argv[]) {
    Test test = Test();
    test.Run();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:21:44.733

你的类中有一个`A`对象，所以当你这样做时：

```
object_ = B(); 
```

`B`RHS 上的对象被切片。请参阅[对象切片](http://en.wikipedia.org/wiki/Object_slicing)。这与作为类成员的对象无关，可以用一个更简单的例子来说明：

```
int main()
{
  B b;
  A a;
  a = b;
  std::cout << a << "\n";
} 
```

# c# - 如何在 C#.net 中读取 Windows 应用程序根目录中的文件？

> ID：12237104
> 
> 赞同：5
> 
> 时间：2012-09-02T15:15:45.990
> 
> 标签：c#, .net, winforms, filestream, windows-applications

如果我使用 Application.StartupPath 或 AppDomain.CurrentDomain.BaseDirectory 它在 bin\debug 文件夹中搜索文件，但我必须在 mac #.net 项目中使用我的根目录“Resources\imagefile.png”中的文件夹！

```
Filestream fs;
fs = new Filestream(AppDomain.CurrentDomain.BaseDirectory + "folder\\imagefile.png"); 
```

那么如何编写代码来从我的根目录读取文件，尽管使用了上面的代码或目录的完整路径“@C:.......”，甚至我们不能使用 Server.MapPath。

> 要获取我的应用程序路径，但这会给出类似 C:\Projects\XYZ\ABC\bin\Debug
> 
> 我不想要 bin\Debug 。有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:19:18.083

通常，您会将这些项目设置为复制到 bin 文件夹中。右键单击解决方案资源管理器/导航器，选择属性并将“复制到输出目录”设置为不同的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T06:46:26.333

通过使用 Environment.CurrentDirectory

```
string yourpath = Environment.CurrentDirectory + @"\YourImage.jpg";
FileStream stream = new FileStream(yourpath, FileMode.Open, FileAccess.Read);
Image image = Image.FromStream(stream);
stream.Close(); 
```

# spring - 如何为 Spring 的嵌入式数据库生成 sql 脚本？

> ID：12237106
> 
> 赞同：0
> 
> 时间：2012-09-02T15:15:50.780
> 
> 标签：spring, unit-testing, initialization, embedded-database, spring-jdbc

我在单元测试中使用 Spring 嵌入式数据库。来自 Spring 文档：

```
<jdbc:embedded-database id="dataSource">
    <jdbc:script location="classpath:schema.sql"/>
    <jdbc:script location="classpath:test-data.sql"/>
</jdbc:embedded-database> 
```

网络上有很多例子，它们基本上讲述了同一个故事。我能够从生产数据库手动创建 sql 语句。例如，我可以使用 mysqldump（假设生成的 SQL 被 HSQL 接受）。但是我的表已经在 .hbm.xml 文件中定义了。有没有办法将它们自动生成到 .sql 文件中？

这一切的目的自然是初始化数据库。我的直接意图是只设置表格；我将在单元测试本身中插入必要的测试数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:51:12.787

你可以让 Hibernate 从映射文件中生成你的模式。然后，您不需要为您的集成测试编写脚本。查看[Hibernate 工具集指南](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/toolsetguide.html)以了解如何执行此操作。

或者，您可以为您正在使用的数据库重新标记此问题，并查看创建模式生成脚本的最佳方法。

# php - Doctrine 2.2/ORM 问题：为每个 PostgreSQL 模式复制实体/表

> ID：12237111
> 
> 赞同：2
> 
> 时间：2012-09-02T15:16:55.930
> 
> 标签：php, symfony, doctrine-orm, postgresql-9.1

当使用 Doctrine 2.2 和 PostgreSQL（在 Symfony 2.1 下，但与它无关）时，声明一个实体如下：

```
<doctrine-mapping ...>
  <entity name="User" table="**clientschema**.*User*">
  </entity>
</doctrine-mapping> 
```

我的数据库托管的*用户*表与这样的**客户端**模式模式一样多（它将数据从一个客户端分隔到另一个客户端，并且是干净的实践 IMO）：

*   client1.User
*   客户端2.用户
*   ...

因此，基本上，对于每个新客户端，我都会在新的专用模式下复制 User 表。当然，我还在新的客户端模式下复制了所有其他必要的表。

麻烦来了，在声明我的*用户*实体时，我实际上无法在表字段中设置模式名称，因为有很多可能！实际上，这取决于哪个客户端连接到应用程序......

各位有什么办法吗？我们可以为每个实体（包括正确的模式）动态设置表字段吗？也许另一个能更好地处理 PostgreSQL 模式的 ORM？

# java - Spring DispatcherServlet 多实例

> ID：12237114
> 
> 赞同：5
> 
> 时间：2012-09-02T15:17:21.877
> 
> 标签：java, spring

好的，春季大师……为我打破这个。在阅读有关 Spring MVC 的文档时，我遇到了这样的声明：

> "....Spring 中的ApplicationContext 实例可以是作用域的。在Web MVC 框架中，每个DispatcherServlet 都有自己的WebApplicationContext，它继承了根WebApplicationContext 中已经定义的所有bean。这些继承的bean 可以在特定于servlet 的情况下被覆盖范围，并且可以在给定 servlet 实例的本地定义新的特定于范围的 bean。”

[Spring 文档参考](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s02.html)

基于此，我有几个问题：

1.  该语句暗示可以有多个 DispatcherServlet 实例。这是否完全不正确，因为在 Web 应用程序中，只有一个 Servlet 实例可以（并且理想情况下应该）存在？
2.  在上述语句的上下文中，“特定于 servlet 的范围”究竟是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:10:08.763

> 这不是完全不正确吗

这转化为“偶尔为真”，我认为这不是您的意思。

> 在 Web 应用程序中，只有一个 Servlet 实例可以（并且理想情况下应该）存在

这并不完全不正确——只是大部分不正确。您`<servlet>`将部署描述符 ( `web.xml`) 的元素与实现该 servlet 的类混淆了。

*确实，除了在某些有限的情况下，容器只允许每个 servlet*实例化一个类的实例。但是，您可以有多个`<servlet>`条目都指定相同的类。

> 在上述语句的上下文中，“特定于 servlet 的范围”究竟是什么意思

作为一个不太好的例子（实际上，我认为很少有好的例子）：您可能有一个支持多个客户端的应用程序，每个客户端都有不同的 URL 和不同的数据库，但在其他方面是相同的。您可以在根配置中定义业务对象，在 web-app 配置中定义数据源。以及任何特定于客户端的配置 bean。

# c# - UserControl 在回发后不保存值

> ID：12237117
> 
> 赞同：1
> 
> 时间：2012-09-02T15:17:51.407
> 
> 标签：c#, asp.net

我在带有文本框的 Gridview 中有一个 UserControl。文本框由数据库调用填充，然后用户可以对其进行编辑以保存另一个值。但是当我尝试保存另一个值时，它什么都不是。下面的代码：

```
 public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            string sql;
            sql = "select lname from clients order by lname";
            SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ApplicationServices"].ToString());

            DataTable dt = new DataTable();
            SqlCommand cmd = new SqlCommand(sql, conn);

            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(dt);

            GridView1.DataSource = dt;
            GridView1.DataBind();
        }

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        UserControl uc;
        TextBox tb;
        string name;

        foreach (GridViewRow row in GridView1.Rows)
        {

            uc = (UserControl)row.FindControl("UserInfo1");
            tb = (TextBox)uc.FindControl("txt_name");
            name = tb.Text; 

        }

    }

} 
```

}

用户控制代码：

```
public partial class UserInfo : System.Web.UI.UserControl
{ 

    public string Name {get;set;}

    protected void Page_Load(object sender, EventArgs e)
    {

        txt_name.Text = Name;

    }

    protected void Button1_Click(object sender, EventArgs e)
    {

        string name;

        name = this.txt_name.Text;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:21:33.943

问题出在`UserControl`代码中。无论是否回发，您每次都将文本设置为`Name`属性的值。

你需要这样做：

```
if(!IsPostback)
 txt_name.Text = Name; 
```

# ruby-on-rails - 运行rails服务器的问题

> ID：12237123
> 
> 赞同：0
> 
> 时间：2012-09-02T15:18:21.160
> 
> 标签：ruby-on-rails, ruby

我刚刚在我的 Mac OSX 10.7.4 上使用 Rails 安装程序安装了 rails env。

我使用“rails new”命令创建了一个项目。

当我尝试运行“rails server”命令时，我收到以下消息：

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator/options.rb:32:in `default_options': undefined method `write_inheritable_attribute' for Rails::Generator::Base:Class (NoMethodError)
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator/base.rb:90:in `<class:Base>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator/base.rb:85:in `<module:Generator>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator/base.rb:48:in `<module:Rails>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator/base.rb:6:in `<top (required)>'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/rails_generator.rb:37:in `<top (required)>'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/bin/rails:15:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/rails:23:in `load'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/rails:23:in `<main>' 
```

当我运行 $ ruby​​ -v 和 $ gem -v 时，我分别得到“ruby 1.9.3p194”和“1.8.24”。我在这里想念什么？我怎样才能让这个服务器运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:34:57.020

看起来您正在尝试在 Rails 2.3 中使用 Rails 3.x 命令。Pre 3.0 你必须使用服务器脚本。

从您的应用程序目录中运行：

```
./script/server 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:41:49.060

将导轨安装为 gem `gem install rails`，. 当您使用 rvm 时，此处显示的文件夹路径显示 rails 2.3.4，而您尝试运行`rails server`. 检查/更改 gem 文件中的 rails 版本，然后进行捆绑安装。

# python - GAE 数据存储性能与 SQLite

> ID：12237125
> 
> 赞同：0
> 
> 时间：2012-09-02T15:18:48.897
> 
> 标签：python, sqlite, google-app-engine, google-cloud-datastore

我看到在开发服务器和生产服务器上使用 GAE 数据存储的性能都很糟糕。我有以下简化模型：

```
class Team(db.Model):
    name = db.StringProperty()
    # + 1 other property
    # home_games from Game
    # away_games from Game

class Game(db.Model):
    date = db.DateProperty()
    year = db.IntegerProperty()
    home_team = db.ReferenceProperty(Team, collection_name='home_games')
    away_team = db.ReferenceProperty(Team, collection_name='away_games')
    # + 4 other properties
    # results from TeamResults

class TeamResults(db.Model):
    game = db.ReferenceProperty(Game, collection_name='results')
    location = db.StringProperty(choices=('home', 'away'))
    score = db.IntegerProperty()
    # + 17 other properties 
```

我只有一个索引，关于游戏年份和日期。插入一个包含 478 支球队和 786 场比赛的小数据集大约需要 50 秒。一个简单的查询：

```
games = Game.all()
games.filter('year = ', 2000)
games.order('date')

for game in games:
    for result in game.results:
        # do something with the result 
```

花了大约 45 秒。

我正在从基于 SQLite 的数据存储中迁移出来，上面对更大数据集的查询只需要几分之一秒。我的数据只是建模不佳吗？数据存储就这么慢吗？

**编辑 1**
为了提供更多背景信息，我从用户上传的文件中插入数据。该文件被上传到 blobstore，然后我使用 csv.reader 来解析它。这会定期发生，并且查询是基于 cron 作业运行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:26:27.807

您的问题是您将这些记录一一插入

您需要使用批量插入，请参阅[https://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

或者您可能想要插入记录列表，如文档中所述：

[https://developers.google.com/appengine/docs/python/datastore/entities#Batch_Operations](https://developers.google.com/appengine/docs/python/datastore/entities#Batch_Operations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:07:45.103

我没有看到任何证据表明您在`indexed=False`您的任何财产上使用。每个这样的属性每次写入将需要两次额外的写入（一次用于升序索引，一次用于降序索引）。这些加起来很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:04:20.043

您不需要批量加载程序，因为您已经上传了 CSV。但是您可以使用批量插入。请参阅这些提示： http: [//googleappengine.blogspot.nl/2009/06/10-things-you-probably-didnt-know-about.html](http://googleappengine.blogspot.nl/2009/06/10-things-you-probably-didnt-know-about.html) 查找： 5\. 您可以批量放置、获取和删除操作以提高效率

# c++ - 功能模板部分专业化的解决方法？

> ID：12237126
> 
> 赞同：0
> 
> 时间：2012-09-02T15:18:51.737
> 
> 标签：c++, templates, c++11, metaprogramming, partial-specialization

考虑以下用于积分 pow 的元函数（这只是一个示例）：

```
class Meta
{
    template<int N, typename T> static constexpr T ipow(T x)
    {
        return (N > 0) ? (x*ipow<N-1>(x)) 
                       : ((N < 0) ? (static_cast<T>(1)/ipow<N>(x)) 
                                  : (1))
    }
}; 
```

如何为这样的函数编写停止条件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T16:13:24.087

任何时候你问自己“如何模拟函数的部分特化”，你可以想“重载，让部分排序决定什么重载更特化”。

```
template<int N>
using int_ = std::integral_constant<int, N>;

class Meta
{
    template<int N, typename T> static constexpr T ipow(T x)
    {
        return ipow<N, T>(x, int_<(N < 0) ? -1 : N>());
    }

    template<int N, typename T> static constexpr T ipow(T x, int_<-1>)
    {
        //                             (-N) ??
        return static_cast<T>(1) / ipow<-N>(x, int_<-N>());
    }

    template<int N, typename T> static constexpr T ipow(T x, int_<N>)
    {
        return x * ipow<N-1>(x, int_<N-1>());
    }

    template<int N, typename T> static constexpr T ipow(T x, int_<0>)
    {
        return 1;
    }
}; 
```

我认为您想通过`-N`而不是`N`在注释标记的位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T16:17:26.873

一个简单的版本可能是这样的：

```
template <typename T, unsigned int N> struct pow_class
{
    static constexpr T power(T n) { return n * pow_class<T, N - 1>::power(n); }
};

template <typename T> struct pow_class<T, 0>
{
    static constexpr T power(T) { return 1; }
};

template <unsigned int N, typename T> constexpr T static_power(T n)
{
    return pow_class<T, N>::power(n);
} 
```

用法：

```
auto p = static_power<5>(2);  // 32 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:27:50.647

只需`static`在类模板中使用成员并专门化类模板。不过，为了方便起见，您可能希望创建一个转发函数模板。

# python-2.7 - 如何在 scikit_learn 的 KFold 中使用 shuffle

> ID：12237127
> 
> 赞同：6
> 
> 时间：2012-09-02T15:19:02.703
> 
> 标签：python-2.7, scikit-learn

我正在使用 scikit-learn 提供的 KFold 函数运行 10 倍 CV，以选择一些内核参数。我正在实施这个（grid_search）过程：

```
1-pick up a selection of parameters
2-generate a svm
3-generate a KFold
4-get the data that correspons to training/cv_test
5-train the model (clf.fit)
6-classify with the cv_testdata
7-calculate the cv-error 
8-repeat 1-7
9-When ready pick the parameters that provide the lowest average(cv-error) 
```

如果我在 KFold 生成中不使用 shuffle，如果我重复相同的运行并且“最佳结果”是可重复的，我会得到非常相同的平均结果（cv_errors）。如果我使用随机播放，如果我多次重复相同的运行并且“最佳值”不可重复，我会得到不同的平均值（cv-errors）。我可以理解，对于每个 KFold 通道，我应该得到不同的 cv_errors，但最终的平均值应该是相同的。带有 shuffle 的 KFold 是如何真正起作用的？每次调用 KFold 时，它都会打乱我的索引并生成训练/测试数据。它如何为“培训/测试”选择不同的折叠方式？它是否有随机方式来选择不同的折叠进行训练/测试？任何与“洗牌”有关的情况和不是的情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T20:18:36.137

如果 shuffle 为 True，则首先对整个数据进行 shuffle，然后拆分为 K-Folds。对于可重复的行为，您可以将 random_state 设置为例如整数种子 (random_state=0)。如果您的参数依赖于改组，这意味着您的参数选择非常不稳定。可能你的训练数据很少，或者你习惯了很少的折叠（比如 2 或 3）。

如果您的数据以某种方式按类排序，则“洗牌”主要有用，因为每个折叠可能只包含来自一个类的样本（特别是对于随机梯度体面分类器排序的类是危险的）。对于其他分类器，它应该没有区别。如果改组非常不稳定，则您的参数选择可能是无用的（又名垃圾）。

# svn - svn 无法 svn mkdir 我的存储库下的文件

> ID：12237133
> 
> 赞同：2
> 
> 时间：2012-09-02T15:19:32.017
> 
> 标签：svn, ubuntu

我已经在我的服务器上设置了一个 svn 存储库。我没有删除存储库下的目录，而是使用 rm -rf 删除目录。现在我无法在我的服务器下创建任何目录，即使我删除了 subversion 并重新安装它。这就是我得到的。

```
root@skynet2012:/webserver/repos# svn mkdir file:///webserver/repos/blahblah

Log message unchanged or not specified
(a)bort, (c)ontinue, (e)dit:
c
svn: File already exists: filesystem '/webserver/repos/db', transaction '2-2', path '/blahblah' 
```

我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:34:58.937

该目录仍然存在于您的存储库中。这就是错误所说的。

因此，您所需要的只是一种将其恢复到工作副本中的方法。

最简单的方法是（Subversion 1.7 或更高版本）

```
svn revert -R DIR 
```

这将恢复 DIR 上的所有本地更改。

或（所有 Subversion 版本）

```
svn update DIR 
```

这将首先从工作副本中恢复所有可能的内容，然后将您的工作副本更新到最新版本。

在 Subversion 1.7 之前，数据是按目录存储在`.svn`子目录中的，因此简单的还原无法解决所有问题。

# .net - IEnumerable<> 到 ObjectSet<>，原因：INCLUDE

> ID：12237138
> 
> 赞同：1
> 
> 时间：2012-09-02T15:20:42.397
> 
> 标签：.net, entity-framework, linq-to-entities, entity-framework-4.1, ienumerable

我正在使用 Entity Framework 4.1 开发 MVC3 应用程序。我进行了 LINQ 查询，并将其返回为`IEnumerable<T>`. 但是，在控制器中，我必须使用`Include(other entity)`，比如 in `ObjectSet`，这样我才能在视图中显示其他实体值（与我正在查询的实体值相关联）。我尝试了从`IEnumerable<T>`to显式转换`ObjectSet<T>`，但它引发了异常。有什么方法可以从中获取`ObjectSet`或`IEnumerable`将实体包含在其中`IEnumerable`吗？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:42:04.727

如果您的上下文仍然存在（如果您还没有离开使用）并且如果您还没有完成`.ToList()`，您应该能够转换为`ObjectQuery<T>`.

一种更安全的做法是使用扩展方法，在`IQueryable<T>`该方法上检查 queryable 是否为 a `ObjectQuery<T>`，如果是，则转换为`ObjectQuery<T>`并返回结果 .Include() 否则返回输入查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:33:14.383

一旦将它转换为 IEnumerable，它就会与数据源断开连接。

当 DAL 仍然是 IQueryable 或 IObjectQuery 时，您应该在 DAL 中包含相关实体，然后将完整结果作为 IEnumerable 返回。

否则，您将对数据库进行额外的打击。

硅

# zend-framework - 使用 Zend DB-Table 选择 DATE_FORMAT

> ID：12237141
> 
> 赞同：1
> 
> 时间：2012-09-02T15:21:11.470
> 
> 标签：zend-framework, date, select, format

是否可以使用 Zend_Db_Select 适配器（如“SELECT DATE_FORMAT....”）正确格式化时间戳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:06:22.203

利用

```
$database->select ()->from ('table', array (new Zend_Db_Expr ('DATE_FORMAT("...")'))); 
```

形式。

# php - 在哪里检查 HTTP 请求（get/post/etc）：在控制器、类构造函数或方法中？

> ID：12237151
> 
> 赞同：0
> 
> 时间：2012-09-02T15:21:58.863
> 
> 标签：php, oop, constructor, httprequest

检查 HTTP 请求的正确位置是什么？在控制器、类构造函数或方法中？有没有标准的方法来做到这一点？在处理 GET/POST/etc 时，OOP 教程非常不同......

示例 #1（构造函数中的 http 请求检查，导致构造函数混乱）

```
class xxx {

    public function _construct() {

        if (isset($_GET["action"]) && $_GET["action"]=="logout") {
            $this->doLogout();  
        }
    }
} 
```

示例 #2（http 请求签入方法，导致这里发生了什么构造函数）

```
class xxx {

    public function _construct() {
            $this->doLogout();
    }

    public function doLogout() {  

        if (isset($_GET["action"]) && $_GET["action"]=="logout") {
            $_SESSION = array();
            session_destroy();
        }        
    }
} 
```

没有示例＃3，因为您知道我的意思；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:07:12.070

我想说最干净的方法是拥有一个路由器组件。让它作用于从服务器变量生成的对象（参见 symfony httpfoundation 或 zend http，这使得路由器和完整堆栈易于测试）并返回到哪个控制器和哪个方法来发送您的请求。如果您的某些方法有非常特殊的调用要求，请在两者之间放置一个中间控制器方法以路由到正确的方法。

如果你有一个前端控制器或一个主应用程序类，那将是一个很好的调用点。

# selenium - 遇到错误：java.lang.NoClassDefFoundError: com/google/common/collect/ImmutableList$Builder

> ID：12237153
> 
> 赞同：4
> 
> 时间：2012-09-02T15:22:09.117
> 
> 标签：selenium, webdriver, noclassdeffounderror

我是使用 EclipseIDE 和 TestNG 的 Selenium WebDriver 新手。我目前正在通过 TestNG 在 Eclipse 中运行此示例代码：

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import java.util.List;

public class CheesecakeFactory {

    FirefoxDriver driver;

    @BeforeTest
    public void startDriver() {
        driver = new FirefoxDriver();
    }

    @AfterTest
    public void stopDriver() {
        driver.close();
    }

    @Test
    public void listCheesecakes() {
        driver.get("http://www.thecheesecakefactory.com/");
        driver.findElement(By.linkText("Menu")).click();
        driver.findElement(By.linkText("Cheesecake")).click();
        List<WebElement> cheesecakes = driver.findElements(By.xpath("id('leftNav_levelTwo')//li"));

        System.out.println(cheesecakes.size() + " cheesecakes:");
        for (int i=0; i<cheesecakes.size(); i++) {
            System.out.println(i+1 + ". " + cheesecakes.get(i).getText());
        }
    }

} 
```

但是 Eclipse 会返回这个：

```
[TestNG] Running:
  C:\Users\ryan\AppData\Local\Temp\testng-eclipse--616826937\testng-customsuite.xml

FAILED CONFIGURATION: @BeforeTest startDriver
java.lang.NoClassDefFoundError: com/google/common/collect/ImmutableList$Builder
    at org.openqa.selenium.os.WindowsUtils.getPathsInProgramFiles(WindowsUtils.java:275)
    at org.openqa.selenium.firefox.internal.Executable.locateFirefoxBinaryFromPlatform(Executable.java:148)
    at org.openqa.selenium.firefox.internal.Executable.<clinit>(Executable.java:25)
    at org.openqa.selenium.firefox.FirefoxBinary.<init>(FirefoxBinary.java:60)
    at org.openqa.selenium.firefox.FirefoxBinary.<init>(FirefoxBinary.java:56)
    at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:78)
    at CheesecakeFactory.startDriver(CheesecakeFactory.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:138)
    at org.testng.TestRunner.beforeRun(TestRunner.java:641)
    at org.testng.TestRunner.run(TestRunner.java:609)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1197)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
    at org.testng.TestNG.run(TestNG.java:1030)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

我不明白为什么我会收到这个错误。我做了以下事情：

1.  添加了 guava-12.0.jar 文件（以及 Selenium-2.25.0 webdriver 中的其他 jar 文件）作为 Eclipse 中的外部 jar 文件。（这个 jar 文件包含 ImmutableList$Builder 类）

2.  在CLASSPATH中添加了这个jar文件的路径（Environment Variables>System Variables）

我错过了什么吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T05:04:45.410

我猜你正在使用 selenium-java-2.25.0.jar。您应该使用**selenium-server-standalone-2.25.0.jar，**它会处理所有依赖项（即所需的 jar 文件）。

此外，如果在 Eclipse 中添加了 jar 文件，则不需要显式定义环境变量，除非您在 Eclipse 之外运行测试。

希望这可以帮助... ：）

# python - 我怎样才能读一行字？

> ID：12237155
> 
> 赞同：0
> 
> 时间：2012-09-02T15:22:22.863
> 
> 标签：python

这就是我所做的。问题将在最后。

1）我首先打开了一个.txt文件，`open().read()`用来运行如下函数：

```
def clean_text_passage(a_text_string):
    new_passage=[]
    p=[line+'\n' for line in a_text_string.split('\n')]
    passage = [w.lower().replace('</b>\n', '\n') for w in p]

    if len(passage[0].strip())>0:
       if len(passage[1].strip())>0:
           new_passage.append(passage[0])
    return new_passage 
```

2）使用返回的`new_passage`，我使用以下命令将单词转换为单词行：

```
newone = "".join(new_passage) 
```

3）然后，运行另一个函数，如下所示：

```
def replace(filename):
    match = re.sub(r'[^\s^\w+]risk', 'risk', filename)
    match2 = re.sub(r'risk[^\s^\-]+', 'risk', match)
    match3 = re.sub(r'risk\w+', 'risk', match2)
    return match3 
```

到目前为止，一切都很好。现在问题来了。当我打印时`match3`：

```
i agree to the following terms regarding my employment or continued employment
with dell computer corporation or a subsidiary or affiliate of dell computer
corporation (collectively, "dell"). 
```

看起来单词是成行的。但，

4）我`convert = count_words(match3)`按如下方式运行最后一个函数：

```
def count_words(newstring):
     from collections import defaultdict
     word_dict=defaultdict(int)
     for line in newstring:
    words=line.lower().split()
    for word in words:
        word_dict[word]+=1 
```

当我打印`word_dict`时，它显示如下：

```
defaultdict(<type 'int'>, {'"': 2, "'": 1, '&': 4, ')': 3, '(': 3, '-': 4, ',': 4, '.': 9, '1': 7, '0': 8, '3': 2, '2': 3, '5': 2, '4': 2, '7': 2, '9': 2, '8': 1, ';': 4, ':': 2, 'a': 67, 'c': 34, 'b': 18, 'e': 114, 'd': 44, 'g': 15, 'f': 23, 'i': 71, 'h': 22, 'k': 10, 'j': 2, 'm': 31, 'l': 43, 'o': 79, 'n': 69, 'p': 27, 's': 56, 'r': 72, 'u': 19, 't': 81, 'w': 4, 'v': 3, 'y': 16, 'x': 3}) 
```

因为我的代码的目标是计算一个特定的单词，所以我需要像'risk'这样的单词（即我喜欢冒险）而不是'I'、'l'、'i'

问题：如何`match3`以与我们使用相同的方式包含单词，`readlines()`以便我可以计算一行中的单词？

当我另存`match3`为 .txt 文件时，使用 重新打开它`readlines()`，然后运行 ​​count 函数，它工作正常。我确实想知道如何在不使用保存和重新打开它的情况下使其工作`readlines()`？

谢谢。我希望我能弄清楚这一点，这样我就可以睡觉了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:40:37.857

尝试这个

`for line in newstring`表示逐个迭代

```
def count_words(newstring):
     from collections import defaultdict
     word_dict=defaultdict(int)
     for line in newstring.split('\n'):
         words=line.lower().split()
         for word in words:
            word_dict[word]+=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:40:56.470

tl;博士，问题是你如何按行分割文本？

然后就很简单了：

```
>>> text = '''This is a
longer text going
over multiple lines
until the string
ends.'''
>>> text.split('\n')
['This is a', 'longer text going', 'over multiple lines', 'until the string', 'ends.'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:41:24.580

你`match3`是一个字符串，所以

```
for line in newstring: 
```

迭代 newstring 中的*字符*，而不是行。你可以简单地写

```
 words = newstring.lower().split()
 for word in words:
     word_dict[word]+=1 
```

或者如果你喜欢

```
 for line in newstring.splitlines():
     words=line.lower().split()
     for word in words:
         word_dict[word]+=1 
```

管他呢。[我自己会用`Counter`，但`defaultdict(int)`几乎一样好。]

笔记：

```
def replace(filename): 
```

`filename`不是文件名！

# java - Spring MVC - 带有注释的约束验证 - 不显示错误消息

> ID：12237159
> 
> 赞同：3
> 
> 时间：2012-09-02T15:22:43.087
> 
> 标签：java, spring, spring-mvc, spring-roo, thymeleaf

我希望能够在 Web 界面中显示**我的实体字段约束验证错误。**

例如，我在我的实体上定义了以下约束：

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord
public class Member {

    @NotNull
    @Email
    @Column(unique = true)
    private String email;

    private String pseudo;

    @NotNull
    @Size(min = 6)
    private String password;

    @NotNull
    @Size(min = 2)
    private String firstName;

    @NotNull
    @Size(min = 2)
    private String lastName;

    @Temporal(TemporalType.DATE)
    @DateTimeFormat(pattern = "dd/MM/yyyy")
    private Date dateOfBirth;

    @NotNull
    @Enumerated
    private Orientation orientation;

    @NotNull
    private String token;

    @NotNull
    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(pattern = "dd/MM/yyyy")
    private Date registrationDate;

    private boolean activated;
} 
```

我还定义了一个在 spring mvc 控制器中使用的辅助 javabean；这里是：

```
@RooJavaBean
public class RegistrationInfo {

    private Member member;

    private String passwordConfirmation;

} 
```

这是我的spring mvc控制器中的相关代码：

```
@RequestMapping(value = "/registration", method = RequestMethod.POST, produces = "text/html")
public String registerMember(@ModelAttribute("registrationInfo") @Valid RegistrationInfo registrationInfo, Model model, BindingResult bindingResult) {
    if (!registrationInfo.getMember().getPassword().equals(registrationInfo.getPasswordConfirmation())) {
        bindingResult.addError(new ObjectError("member.password", "passwords don't match"));
    }
    if (!registrationService.isEmailAvailable(registrationInfo.getMember().getEmail())) {
        bindingResult.addError(new ObjectError("member.email", "email already used"));
    }
    if (bindingResult.hasErrors()) {
        //HOW TO ADD BEAN CONSTRAINTS VALIDATION ERRORS HERE????
        populateForm(model, registrationInfo);
        return "registration";
    }
    registrationService.registerMember(registrationInfo.getMember());
    return "redirect:/";
} 
```

从我的用户界面：

```
<div id="errors">
            <ul th:if="${#fields.hasErrors('*')}">
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
            </ul>
        </div> 
```

但是，就目前而言，唯一要显示的错误是我手动添加的错误（像这样`bindingResult.addError`）......

任何人都可以提供建议吗？

编辑：如果我用 注释`member`变量`@Valid`，验证表单时会出现此异常：

```
org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 5 errors
Field error in object 'registrationInfo' on field 'member.password': rejected value []; codes [Size.registrationInfo.member.password,Size.member.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registrationInfo.member.password,member.password]; arguments []; default message [member.password],2147483647,6]; default message [la taille doit �tre entre 6 et 2147483647]
Field error in object 'registrationInfo' on field 'member.firstName': rejected value []; codes [Size.registrationInfo.member.firstName,Size.member.firstName,Size.firstName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registrationInfo.member.firstName,member.firstName]; arguments []; default message [member.firstName],2147483647,2]; default message [la taille doit �tre entre 2 et 2147483647]
Field error in object 'registrationInfo' on field 'member.token': rejected value [null]; codes [NotNull.registrationInfo.member.token,NotNull.member.token,NotNull.token,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registrationInfo.member.token,member.token]; arguments []; default message [member.token]]; default message [ne peut pas �tre nul]
Field error in object 'registrationInfo' on field 'member.registrationDate': rejected value [null]; codes [NotNull.registrationInfo.member.registrationDate,NotNull.member.registrationDate,NotNull.registrationDate,NotNull.java.util.Date,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registrationInfo.member.registrationDate,member.registrationDate]; arguments []; default message [member.registrationDate]]; default message [ne peut pas �tre nul]
Field error in object 'registrationInfo' on field 'member.lastName': rejected value []; codes [Size.registrationInfo.member.lastName,Size.member.lastName,Size.lastName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [registrationInfo.member.lastName,member.lastName]; arguments []; default message [member.lastName],2147483647,2]; default message [la taille doit �tre entre 2 et 2147483647]
    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:111)
    org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:02:30.387

添加`@Valid`到`member`里面的属性`RegistrationInfo`：

```
@RooJavaBean
public class RegistrationInfo {

    private @Valid Member member;

    private String passwordConfirmation;

} 
```

然后在您的控制器方法中，`bindingResult`必须紧随其后`registrationInfo`：

```
public String registerMember(@ModelAttribute("registrationInfo") @Valid RegistrationInfo registrationInfo,
BindingResult bindingResult, Model model) { 
```

# jquery - 萤火虫：语法错误：缺少）在参数列表之后

> ID：12237160
> 
> 赞同：0
> 
> 时间：2012-09-02T15:22:44.770
> 
> 标签：jquery

抱歉我的英语不好，我的代码适用于 jquery 1.4.2，但不适用于 1.7.1 我在 firebug 中收到“参数列表后缺少）错误，代码如下：

```
$(document).ready(function() {
  $('#content').html($('#content').html().replace(/#([a-zA-Z1-9]{1,})/gi,'<a href="<?php echo $this->webroot ?>instagrams/index/$1" class="tag_replace">#$1</a>'));
}); 
```

我生成的代码：

```
$(document).ready(function() {
  $('#content').html($('#content').html().replace(/#([a-zA-Z1-9]{1,})/gi,'<a href="/instagram/instagrams/index/$1" class="tag_replace">#$1</a>'));
}); 
```

浏览器错误代码：SyntaxError: missing ) 在参数列表 [Break On This Error] 之后

...agram/instagrams/index/content" class="tag_replace">#content").append(html)

jquery....min.js（第 11 行，第 63 列）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:13:55.600

如果您*必须*使用 PHP 动态编写 JS 代码，请将相关变量单独放在一行中，这样您就可以将问题与 JS 代码问题分开。

您还可以利用以下函数参数版本`.html()`：

```
$(document).ready(function() {
    $('#content').html(function(index, old) {
        var root = "<?php echo $this->webroot ?>";
        var match = /#([a-zA-Z1-9]{1,})/gi;

        return old.replace(match, '<a href="' + root + 'instagram/instagrams/index/$1" class="tag_replace">#$1</a>');
    });
}); 
```

# jquery - 使用 jQuery 单击时显示 div #id

> ID：12237163
> 
> 赞同：19
> 
> 时间：2012-09-02T15:22:54.097
> 
> 标签：jquery, html, hide, show

单击 div 时，我希望出现不同的 div。

因此，当单击“#music”时，我希望出现“#musicinfo”。

这是CSS：

```
#music {
    float:left;
    height:25px;
    margin-left:25px;
    margin-top:25px;
    margin-right:80px;
    font-family: "p22-underground",sans-serif;
    font-style: normal;
    font-weight: 500;
    font-size:13pt;

    }

#musicinfo {
    width:380px;
    margin:25px;
    font-family: "p22-underground",sans-serif;
    font-style: normal;
    font-weight: 500;
    font-size:13pt;
    line-height:1.1;
    display:none;

} 
```

和jQuery：

```
<script type="text/javascript">
$("#music").click(function () {
$("#musicinfo").show("slow");
});
</script> 
```

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-02T15:26:50.257

您遇到的问题是事件处理程序在元素出现在 DOM 之前被绑定，如果您将 jQuery 包装在 a 中，`$(document).ready()`那么它应该可以很好地工作：

```
$(document).ready(
    function(){
        $("#music").click(function () {
            $("#musicinfo").show("slow");
        });

    }); 
```

另一种方法是将 放置`<script></script>`在页面的底部，以便在 DOM 加载并准备好之后遇到它。

要`div`再次隐藏，`#music`单击元素后，只需使用`toggle()`：

```
$(document).ready(
    function(){
        $("#music").click(function () {
            $("#musicinfo").toggle();
        });
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/UpX3L/)。

对于褪色：

```
$(document).ready(
    function(){
        $("#music").click(function () {
            $("#musicinfo").fadeToggle();
        });
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/UpX3L/1/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T15:41:29.110

您可以使用`jQuery toggle`来显示和隐藏 div。脚本会是这样的

```
 <script type="text/javascript">
    jQuery(function(){
      jQuery("#music").click(function () {
        jQuery("#musicinfo").toggle("slow");
      });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-16T07:26:31.377

**这是使用以下方式显示 Div 的简单方法：-**

```
$("#musicinfo").show();  //or
$("#musicinfo").css({'display':'block'});  //or
$("#musicinfo").toggle("slow");   //or
$("#musicinfo").fadeToggle();    //or 
```

# iphone - 自定义 UITableViewCell 作为委托 - UI 元素被意外重用

> ID：12237164
> 
> 赞同：0
> 
> 时间：2012-09-02T15:22:57.467
> 
> 标签：iphone, objective-c, ios

我创建了一个自定义`UITableViewCell`，每个单元格都`AVPlayer`从`UITableViewController`. 在每个单元格上，我都有一个播放按钮、暂停按钮和加载指示器。

当我播放音频时，元素按要求工作，并在播放器状态发生变化时发生变化，例如播放时，暂停按钮出现，播放按钮消失。当我在第二个单元格上播放音频时，第一个单元格知道这一点，将其重置为按钮状态，然后第二个单元格执行它的业务。

所以这个功能完美地工作，唯一的问题是因为`UITableViewCell`s 被重复使用，当我向下滚动到下面的单元格时，我开始看到暂停按钮出现在它们上面。这是因为它们与上面的单元格相同（重用），并且因为我的单元格是我的自定义子类的代表`AVPlayer`，所以音频播放器正在向一个不正确的单元格发送消息。

我该怎么做才能使每个`UITableViewCell`单独的委托对象为我的`AVPlayer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:26:11.687

您必须在重用时从单元格中删除元素：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} else {
    /* prepare for reuse */
    [cell.playButton removeFromSuperview];
    /* or */
    [[cell viewWithTag:10] removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:33:37.193

我从 JSON blob 加载的图像也有同样的问题。我使用 GCD 并将图像保存到与分配给每个单元格的键配对的 NSDictionary 中。

```
- (UIImage *)imageForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    // get the dictionary for the indexPath
    NSDictionary *tweet = [tweets objectAtIndex:[indexPath row]];

    // get the user dictionary for the indexPath
    NSDictionary *user = [tweet objectForKey:@"posts"];

    //get the image URL
    NSURL *url = [NSURL URLWithString:[[[[[tweet objectForKey:@"photos"] objectAtIndex:0] objectForKey:@"alt_sizes"] objectAtIndex:3] objectForKey:@"url"]];

    // get the user's id and check for a cached image first
    NSString *userID = [user objectForKey:@"id"];
    UIImage *image = [self.images objectForKey:userID];
    if(!image)
    {

        // if we didn't find an image, create a placeholder image and
        // put it in the "cache". Start the download of the actual image
        image = [UIImage imageNamed:@"Placeholder.png"];
        [self.images setValue:image forKey:userID];

        //get the string version of the URL for the image
        //NSString *url = [user objectForKey:@"profile_image_url"];

        // create the queue if it doesn't exist
        if (!queue) {
            queue = dispatch_queue_create("image_queue", NULL);
        }

        //dispatch_async to get the image data
        dispatch_async(queue, ^{

            NSData *data = [NSData dataWithContentsOfURL:url];
            UIImage *anImage = [UIImage imageWithData:data];
            [self.images setValue:anImage forKey:userID];
            UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

            //dispatch_async on the main queue to update the UI
            dispatch_async(dispatch_get_main_queue(), ^{
                cell.imageView.image = anImage;
            });
        });

    }

    // return the image, it could be the placeholder, or an image from the cache
    return image;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T16:48:02.747

`UITableViewController`我通过为音频播放器设置代理解决了这个问题。然后将“当前播放”单元格保存`indexPath`到`@property`.`UITableViewController`

然后在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`我检查 indexPath 是否与“当前播放”单元格的相同`indexPath`，如果是，则设置“音频播放”按钮排列，如果不是，则设置默认按钮排列。

这在区分单元格时效果更好，因为您有一个唯一的标识符`indexPath`来比较它们。

# asp.net-mvc-4 - 未找到需要 POST 的简单控制器

> ID：12237167
> 
> 赞同：45
> 
> 时间：2012-09-02T15:23:21.913
> 
> 标签：asp.net-mvc-4, asp.net-web-api, forms

自从我将 MVC4 webapi beta 更新为 RC 以来，我已经提出了一些先前的问题，寻求有关问题的帮助。我现在最有秩序了，但这里有一个我还不能弄清楚原因。

对于这个简单的控制器，我有一个接受 POST 和一个接受 GET。当我尝试通过从 HTML 表单发送请求来运行它们时，只找到了 GET 控制器，而 POST 控制器将返回以下错误。

```
{
  "Message": "No HTTP resource was found that matches the request URI 'http://localhost/webapi/api/play/test'.",
  "MessageDetail": "No action was found on the controller 'Play' that matches the name 'test'."
} 
```

为什么找不到 POST 控制器？

**控制器**

```
public class PlayController : ApiController
{
    [HttpPost]  // not found
    public string Test(string output)
    {
        return output;
    }

    [HttpGet]  // works
    public string Test2(string output)
    {
        return output;
    }
} 
```

**HTML 表单**

```
<form action="http://localhost/webapi/api/play/test" method="post">
<input type="text" name="output" />
<input type="submit" name="submit" />
</form>

<form action="http://localhost/webapi/api/play/test2" method="get">
<input type="text" name="output" />
<input type="submit" name="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-02T15:59:50.230

当您想发布“简单”值时，Web.API 有点挑剔。

您需要使用该`[FromBody]`属性来表明该值不是来自 URL，而是来自发布的数据：

```
[HttpPost]
public string Test([FromBody] string output)
{
    return output;
} 
```

通过此更改，您将不再获得 404，但`output`将始终为空，因为 Web.Api 需要以[特殊格式](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)发布的值（查找 Sending Simple Types 部分）：

> 其次，客户端需要发送以下格式的值：
> 
> `=value`
> 
> 具体来说，对于简单类型，名称/值对的名称部分必须为空。并非>所有浏览器都支持 HTML 表单，但您在脚本中创建此格式...

所以建议你应该创建一个模型类型：

```
public class MyModel
{
    public string Output { get; set; }
}

[HttpPost]
public string Test(MyModel model)
{
    return model.Output;
} 
```

然后它将与您的示例一起使用，而无需修改您的视图。

# iphone - 条件 NSNumberFormatterCurrencyStyle 处理

> ID：12237169
> 
> 赞同：1
> 
> 时间：2012-09-02T15:24:07.917
> 
> 标签：iphone, objective-c, nsnumberformatter

我有两种货币价值：2.60 英镑和 22,000 英镑。两者都存储`NSDecimalNumber`在 Core Data 中。我使用以下内容从它们创建一个字符串：

```
 // The app will be GB only, which is the reason locale is set to en_GB
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"];
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setLocale: locale];
    [formatter setNumberStyle: NSNumberFormatterCurrencyStyle];

    // job is a Core Data entity, value1 and value2 or NSDecimalNumbers
    NSString *value1 = [formatter stringFromNumber: [job value1]]; // 2.60
    NSString *value2 = [formatter stringFromNumber: [job value2]];    // 22000
    NSString *testString = [NSString stringWithFormat:@"%@ and %@", value1, value2]; 
```

这作为一个整体工作正常，但`testString`打印为 2.60 英镑和 22,000.00 英镑。

`[formatter setMaximumFractionDigits: 0];`仅对 largeValue实施的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:34:10.040

答案取决于您的格式要求，但我认为一个好的启发式方法是在数字显示千位分隔符时去掉小数位：

```
if ([[job value2] doubleValue] >= 1000.0) {
    [formatter setMaximumFractionDigits: 0];
} 
```

# php - 从下拉列表中获取价值。（有点棘手）

> ID：12237171
> 
> 赞同：4
> 
> 时间：2012-09-02T15:24:16.897
> 
> 标签：php, javascript, html, get

首先，我对 PHP 和编码很陌生，但这里有。

我有一个网络表单，它必须从 txt 文件（位于服务器上的文件夹中）获取一些信息 我知道如何让它从文件中获取信息以及如何制作下拉列表，显示所有文件文件夹。我不知道如何使它们一起工作，因此它读取的文件名取自下拉列表的选定值。

下拉列表的代码：

```
<? 
$currentdir = 'files'; //change to your directory 
$dir = opendir($currentdir); 

echo 'Files are as follows:<br>'; 
echo '<select name="select">'; 
while($file = readdir($dir)) 
{ 
    echo '<option value="'.$file.'">'.$file.'</option>'; 
} 
echo '</select>'; 
closedir($dir); ?> 
```

以及从文件中读取的代码：

```
<input type="text" value="<?php $myFile = ""; $lines = file($myFile); echo $lines[2]; ?>" name="refnr" id="refnr" class="input" /> 
```

假设下拉显示 2 个文件 test.txt 和 test2.txt，如果我从下拉列表中选择 test2.txt，我希望它把“test2.txt”放在“”之间`<?php $myFile = ""`；但无论我如何尝试将代码放在那里以获取所选值，它都会失败......

我的表单的完整代码现在是：

```
<?php
if (!empty($_POST)) {

    // Used for later to determine result
    $success = $error = false;

    // Object syntax looks better and is easier to use than arrays to me
    $post = new stdClass;

    // Usually there would be much more validation and filtering, but this
    // will work for now.
    foreach ($_POST as $key => $val)
        $post->$key = trim(strip_tags($_POST[$key]));

    // Check for blank fields
    if (empty($post->refnr))
        $error = true;

    else {

        // Get this directory, to include other files from
        $dir = dirname(__FILE__);

        // Get the contents of the pdf into a variable for later
        ob_start();
        require_once($dir.'/pdf.php');
        $pdf_html = ob_get_contents();
        ob_end_clean();

        // Load the dompdf files
        require_once($dir.'/dompdf/dompdf_config.inc.php');

        $dompdf = new DOMPDF(); // Create new instance of dompdf
        $dompdf->load_html($pdf_html); // Load the html
        $dompdf->render(); // Parse the html, convert to PDF
        $pdf_content = $dompdf->output(); // Put contents of pdf into variable for later

        // Get the contents of the HTML email into a variable for later
        ob_start();
        require_once($dir.'/html.php');
        $html_message = ob_get_contents();
        ob_end_clean();

        // Load the SwiftMailer files
        require_once($dir.'/swift/swift_required.php');

        $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance of SwiftMailer

        $message = Swift_Message::newInstance()
                       ->setSubject('Felanmalan') // Message subject
                       ->setTo(array('mymail@hidden' => 'Fel')) // Array of people to send to
                       ->setFrom(array('mymail@hidden' => 'Fel')) // From:
                       ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                       ->attach(Swift_Attachment::newInstance($pdf_content, 'Felanmalan.pdf', 'application/pdf')); // Attach the generated PDF from earlier

        // Send the email, and show user message
        if ($mailer->send($message))
            $success = true;
        else
            $error = true;

    }

}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Felanm&auml;lan fr&aring;n IKEA</title>
    <style type="text/css">
        html, body, h1, h2, h3, h4, h5, h6, p, span, ul, li, div, form, input, select, textarea, button {margin:0; padding:0;}
        ul {list-style:none;}
        a, a:hover {text-decoration:none; outline:0;}
        a img {border:0;}

        body {font:12px/16px Verdana, Arial, sans-serif; background:#ffffff;}
        #container {width:450px; margin:10px auto; padding:10px; overflow:hidden; border:1px solid #000; border-radius:10px; -moz-border-radius:10px; -webkit-border-radius:10px; background:#F9F9F9;}
        #container h1 {margin-bottom:20px; font-size:40px; line-height:40px; font-family:'HelveticaNeue-Light', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight:normal;}
        .message {margin-bottom:10px; padding:5px;}
        .success {color:#4F8A10; border:1px solid #4F8A10; background:#DFF2BF;}
        .error {color:#D8000C; border:1px solid #D8000C; background:#FFBABA;}
        label {display:block; margin-bottom:3px; cursor:pointer;}
        .input, textarea, select, button {display:block; width:440px; margin-bottom:10px; padding:3px; font:22px/22px 'HelveticaNeue-Light', 'Helvetica Neue', Helvetica, Arial, sans-serif; border:1px solid #CCC; border-top-width:2px;}
        textarea {font-size:13px; line-height:16px;}
        select {width:396px;}
        button {float:right; width:auto; margin-bottom:0; padding:3px 30px; cursor:pointer; font-size:16px; border:1px solid #999; border-bottom-width:2px; border-radius:5px; -moz-border-radius:5px; -webkit-border-radius:5px; background:#EEE;}
        button:active {border-bottom-width:1px; padding:4px 30px 3px; background:#E9E9E9;}
    </style>
</head>
<body>
<? 
$currentdir = 'files'; //change to your directory 
$dir = opendir($currentdir); 

echo 'Files are as follows:<br>'; 
echo '<select name="select">'; 
while($file = readdir($dir)) 
{ 
    echo '<option value="'.$file.'">'.$file.'</option>'; 
} 
echo '</select>'; 
closedir($dir); ?>

    <div id="container">

        <h1><img src="felimg.png" />  Felanm&auml;lan</h1>

        <?php if ($success) { ?>
            <div class="message success">
                <h4>Congratulations! It worked! Now check your email.</h4>
            </div>
        <?php } elseif ($error) { ?>
            <div class="message error">
                <h4>Sorry, an error occurred. Try again!</h4>
            </div>
        <?php } ?>

        <form method="post" action="">
            <label for="date"><b>Date:</b></label>
            <input type="text" readonly name="date" id="date" class="input" value="<? print(Date("Y-m-d")); ?>"/>

            <label for="refnr"><b>Referensnummer:</b></label>
            <input type="text" value="<?php $myFile = ""; $lines = file($myFile); echo $lines[2]; ?>" name="refnr" id="refnr" class="input" />

            <label for="bestav"><b>Best&auml;lld av:</b></label>
            <input type="text" name="bestav" id="bestav" class="input" />           

            <label for="tel"><b>Tel:</b></label>
            <input type="text" name="tel" id="tel" class="input" />

            <label for="email"><b>Email:</b></label>
            <input type="text" name="email" id="email" class="input" />         

            <label for="kund"><b>Kund:</b></label>
            <textarea name="kund" id="kund" rows="4" cols="40"></textarea>

            <label for="ktel"><b>Tel:</b></label>
            <input type="text" name="ktel" id="ktel" class="input" />

            <label for="art"><b>Ber&ouml;rd Artikel:</b></label>
            <textarea name="art" id="art" rows="3" cols="40"></textarea>

            <label for="fel"><b>Fel p&aring; varan: </b></label>
            <textarea name="fel" id="fel" rows="2" cols="40"></textarea>

            <label for="q1"><b>Installation gjord av fackman:</b></label>
            <select name="q1" id="q1">
                <option value="Ja">Ja</option>
                <option value="Nej">Nej</option>
            </select>

            <label for="q2"><b>Serviceverkstad:</b></label>
            <input type="text" name="q2" id="q2" class="input" />

            <label for="q3"><b>Servicenr:</b></label>
            <input type="text" name="q3" id="q3" class="input" />

            <label for="q4"><b>Serienr:</b></label>
            <input type="text" name="q4" id="q4" class="input" />

            <label for="q5"><b>Inom garanti eller reklamation:</b></label>
            <select name="q5" id="q5">
                <option value="Garanti">Garanti</option>
                <option value="Reklamation">Reklamation</option>
            </select>

            <label for="q6"><b>Informerat om punkt 8:</b></label>
            <select name="q6" id="q6">
                <option value="Ja">Ja</option>
                <option value="Nej">Nej</option>
            </select>           

            <label for="q7"><b>Har kund sj&auml;lv g&aring;tt igenom manual f&ouml;r fels&ouml;kning:</b></label>
            <select name="q7" id="q7">
                <option value="Ja">Ja</option>
                <option value="Nej">Nej</option>
            </select>               

            <label for="q8"><b>Ordernr:</b></label>
            <input type="text" name="q8" id="q8" class="input" />

            <label for="q9"><b>Ink&ouml;psdatum:</b></label>
            <input type="date" name="q9" id="q9" class="input" /><br>

            <p><button type="submit">Submit!</button></p>
        </form>

    </div>

</body>
</html> 
```

希望这是有道理的，再次抱歉，如果这是一个菜鸟问题:) 我已经使用了 2 天的谷歌搜索和测试，我只是到了需要再次朝着正确方向推动的地步。

提前致谢。

ps 简单解释一下我的目标是什么，然后我有 1 个生成 txt 文件并将其保存在服务器上的网络表单，然后是另一个表单，“管理员”可以从下拉列表中选择文件，获取其中的信息客户填写txt版本，然后填写他需要填写的内容，然后将其保存并以PDF格式发送给技术人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:47:31.277

你可以使用

```
echo '<select id="select" name="select">'; 
while($file = readdir($dir)) 
{ 
    echo '<option value="'.$file.'">'.$file.'</option>'; 
} 
echo '</select>'; 
```

在它被加载到 DOM 之后，使用

```
document.getElementById('select').onchange=changeSelect;
function changeSelect(){
    document.getElementById('refnr').value=document.getElementById('select').value;
}
changeSelect(); 
```

在这里看到它：http: [//jsfiddle.net/7nzBS/](http://jsfiddle.net/7nzBS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:12:21.640

谢谢你，Oriol，那行得通：）

代码现在看起来像这样，并且正在按我的需要工作。也感谢所有其他建议，可爱的快速和有用的回复:)

```
 <label for="refnr"><b>Referensnummer:</b></label>
        <input type="text" value="<?php $selectedfile = @$_POST['file2']; $myFile = "files/$selectedfile"; $lines = file($myFile); echo $lines[0]; ?>" name="refnr" id="refnr" class="input" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:03:35.287

```
I wanted it to put "test2.txt" in between the "" at `<?php $myFile = ""` 
```

你不能做这样的事情，因为`"text2.txt"`是在客户端，而`$myfile`, php 变量是在服务器端。如果要从服务器端访问客户端的数据，则需要通过 HTTP 发送数据。所以你有两个选择：

1.  通过 HTTP **post**或**get**发送选定的值。
2.  **通过AJAX**发送选定的值。

# javascript - 我们可以使用 Graph API 在朋友墙上发布照片吗

> ID：12237172
> 
> 赞同：1
> 
> 时间：2012-09-02T15:24:27.787
> 
> 标签：javascript, django, facebook, facebook-graph-api, facebook-javascript-sdk

朋友圈可以`upload`拍照吗？文档从未提到过！但它正在发生。**我可以发布到`/friend_id/photos`连接。**

我实际上是使用 localhost 隧道在本地服务器上运行我的应用程序。因此，在 8 月，我制作了一个应用程序，人们可以在其中将照片张贴在他们的朋友墙上（仅应他们的要求）。所以，由于我对 FB API 很陌生，我没有注意到它是不允许的。

我刚刚离开应用程序几个星期，然后回来修复问题**，我注意到我无法将照片发布到`/friend_id/photos`连接**（它只是不工作。我没有收到任何错误）。它甚至不适用于其他*可能的*连接，例如`/friend_id/feed`我的应用程序是否仅限于某些图形操作？

**所以，我刚刚创建了一个测试应用程序并执行了相同的连接`/friend_id/photos`并且**它的工作。**不知道为什么！**

这不是惊喜的结束：

1.  我使用我的测试应用程序成功地在我的朋友墙上发布了一张照片
2.  当我打开照片时，我可以从“Surya 的照片”中看到它——我的照片
3.  我在我的相册中没有看到那张照片。我只是不知道它实际保存在哪里。

![在此处输入图像描述](../Images/7e74807308120233f800905a1c1864a3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:51:33.967

**更新 2：** 这确实是可能的（这是一个错误吗？）同样的常规方式。

但似乎发布`photo`到其他用户的`/photos`连接的行为与发布到`/me/photos`. 以下是关于发布到的一些事实`/FRIEND_ID/photos`：

1.  以这种方式发布的每个都会`photo`创建名为的单独相册`Posting User's photos`（即上传的照片永远不会被分组，并且无法在一个地方查看所有照片）。
2.  这`photo`不会在用户或朋友的相册中看到，而只能通过提要/时间线看到/访问。
3.  当然，这只有在您能够在该朋友的提要上发帖时才有效

所以它的行为与发布到朋友的任何其他内容一样`feed`。

我想说，如果您不依赖相册功能和这些照片的持久性，而只想在朋友的墙上“分享”照片，那就去吧（除非它被证明是错误的）。

* * *

**TL;博士;** ~~不，您不能发布`photo`到朋友的`/photos`连接。~~好吧，您可以发布`photo`到朋友的`/photos`连接，但如果发布到您的`/photos`.

根据[`photos`](https://developers.facebook.com/docs/reference/api/user/#photos)连接文档[`user`](https://developers.facebook.com/docs/reference/api/user)：

> **创建**
> 您可以使用 publish_stream 权限和以下参数向 PROFILE_ID/photos 发出 HTTP POST 请求，代表用户将照片发布到用户的墙上。

同样根据[`photo`](https://developers.facebook.com/docs/reference/api/photo/)对象的文档：

> `https://graph.facebook.com/USER_ID/photos`- 照片将发布到为您的应用创建的相册中。如果您的应用尚不存在，我们会自动为您的应用创建相册。以这种方式上传的所有照片都将添加到同一个相册中。

所以一般来说，您尝试将照片上传到其他用户的相册，但您只能将照片发布到您的个人资料（或者如果使用页面，则发布到`access_token`页面）。

但是，您可以发布给[`feed`](https://developers.facebook.com/docs/reference/api/user/#feed)其他用户（例如`post`，可能有也可能没有`picture`作为附件，这与 不同`photo`）。

~~**更新：** 照片只能上传到`/USER_ID/photos`与（所有者）`USER_ID`相同的位置。`me``access_token`~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:43:58.273

> 我的应用程序是否仅限于某些图形操作？

FB 在文档或开发人员博客文章中的某些地方说，“如果您滥用功能*xy*，您的应用程序使用它的能力可能会被撤销”（不是字面意思；我在这里转述，但类似的话）。

因此，FB 完全有可能专门为*您的*应用取消了将照片发布到朋友墙上的功能，因为太多用户以这种方式在他们的墙上接收照片已将其标记为“垃圾邮件”。

（“撤销权限”在这里可能不是完全正确的措辞；我认为 Graph API 更有可能首先接受您的应用程序发出的请求，然后在后面默默地过滤掉它；这也可以解释为什么你不会得到任何错误。）

# google-analytics - 如何获取引用链接的完整网址

> ID：12237173
> 
> 赞同：3
> 
> 时间：2012-09-02T15:24:36.940
> 
> 标签：google-analytics, google-analytics-api

假设有一个页面包含指向我的网站的链接，并且该引用页面的 url 是这样的：

[http://source.com/referral_path/topic.php?t=123](http://source.com/referral_path/topic.php?t=123)

在谷歌分析中，它会显示为：

*   **ga：来源**：source.com
*   **ga:referral_path** : /referral_path/topic.php

我记得很久以前有一个开关/设置可以控制是否将**t=123**（即查询参数）作为参考路径的一部分包含在内。这个对吗？如果是我如何控制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T20:10:29.340

GA 对查询参数的唯一设置是搜索查询参数。[为个人资料设置站点搜索](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1012264&topic=1031951&ctx=topic)

对于完整的 URL，您仍然应该应用过滤器。

[在报告中查看整页 URL](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1012243)

另请参阅：[Google Analytics（分析）报告中的完整引荐来源网址](http://blog.yjl.im/2012/03/full-referrer-url-in-google-analytics.html)

# tcp - 为什么 Windows 上的 iperf 性能比 Linux 上的 iperf 差？

> ID：12237178
> 
> 赞同：1
> 
> 时间：2012-09-02T15:25:13.043
> 
> 标签：tcp, device-driver, android-wifi, ethernet, data-link-layer

我正在尝试测量我的 android 设备和接入点之间的 TCP 吞吐量。设置：-

```
Android device<------>AP<---connected wired(10Gbps ethernet)----->windows/linux laptop 
```

当我在另一端使用 linux 笔记本电脑时，iperf 提供了 5-8 Mbps 的高 tput。

Windows 上使用的 iperf 版本为 2.0.5。2.0.4 在 Linux 上。

任何人都对这种行为有任何想法..？

# apache-flex - Flex Mobile 4.6 StageVideo 未从舞台上移除

> ID：12237184
> 
> 赞同：1
> 
> 时间：2012-09-02T15:25:46.450
> 
> 标签：apache-flex, air, flex4

当我使用 stage.stageVideos[0] 实例化一个新的 StageVideo 实例时，一切正常，但是当我离开显示视频的视图时，它会粘在舞台上。因此，当我转到另一个视图时，它仍然在后台显示在舞台上。我尝试设置 sv = null，删除事件侦听器......等等。我创建了一个 StageVideoDisplay 类，它在 mxml 中实例化，例如： 在视图初始化时我调用 play() 方法：

```
if ( _path )
        {
            //... 
            // Connections 
            _nc = new NetConnection(); 
            _nc.connect(null); 
            _ns = new NetStream(_nc); 
            _ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus); 
            _ns.client = this; 

            // Screen 
            _video = new Video(); 
            _video.smoothing = true;  

            // Video Events 
            // the StageVideoEvent.STAGE_VIDEO_STATE informs you whether 
            // StageVideo is available 
            stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, 
                onStageVideoState); 
            // in case of fallback to Video, listen to the VideoEvent.RENDER_STATE 
            // event to handle resize properly and know about the acceleration mode running 
            _video.addEventListener(VideoEvent.RENDER_STATE, videoStateChange); 
            //... 
        } 
```

视频舞台活动：

```
if ( stageVideoInUse ) {
            try {
                _rc = new Rectangle(0,0,this.width,this.height);
                _sv.viewPort = _rc;       
            } catch (e:Error) {}
        } else {
            try {
                _video.width = this.width;
                _video.height = this.height;
            } catch (e:Error) {}
        } 
```

以及舞台视频可用性活动：

```
protected function toggleStageVideo(on:Boolean):void 
    {     
        // To choose StageVideo attach the NetStream to StageVideo 
        if (on) 
        { 
            stageVideoInUse = true; 
            if ( _sv == null ) 
            { 
                try {
                    _sv = stage.stageVideos[0]; 
                    _sv.addEventListener(StageVideoEvent.RENDER_STATE, stageVideoStateChange); 
                    _sv.attachNetStream(_ns); 
                    _sv.depth = 1;
                } catch (e:Error) {}
            } 

            if (classicVideoInUse) 
            { 
                // If you use StageVideo, remove from the display list the 
                // Video object to avoid covering the StageVideo object 
                // (which is always in the background) 
                stage.removeChild ( _video ); 
                classicVideoInUse = false; 
            } 
        } else 
        { 
            // Otherwise attach it to a Video object 
            if (stageVideoInUse) 
                stageVideoInUse = false; 
            classicVideoInUse = true; 
            try {
                _video.attachNetStream(_ns); 
                stage.addChildAt(_video, 0); 
            } catch (e:Error) {}
        } 

        if ( !played ) 
        { 
            played = true; 
            _ns.play(path); 
        } 
    } 
```

当我 navigator.popView() 时，在视图中会发生什么，stageVideo 仍保留在舞台上，即使在其他视图中也是如此，并且当返回该视图以播放不同的流时，相同的流在顶部有点“烧毁”。我想不出办法摆脱它！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:50:46.143

在 Flash Player 11 中，Adobe 将该`dispose()`方法添加到`NetStream`类中。

这对于在完成后清除`Video`or`StageVideo`对象很有用。

当您在运行时调用该方法时，您可能会收到一个异常，指示该对象上`dispose()`没有命名属性。`dispose``NetStream`

这是因为 Flash Builder 没有使用正确的 SWF 版本编译应用程序。要解决这个问题，只需将其添加到您的编译器指令中：

`-swf-version=13`

在新的 Flash Builder 4.7 中，我们希望不必指定 SWF 版本即可使用更新的 Flash Player 功能。

这似乎是最好的解决方案，但如果您不能使用 Flash 11（或最新的 Adob​​e AIR），其他一些解决方法是：

*   将`viewPort`舞台视频对象设置为 width=0 和 height=0 的矩形
*   由于舞台视频出现在您的应用程序下方，因此您始终可以覆盖视口（使用背景颜色或一些`DisplayObject`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:06:05.830

好的，问题实际上是，尽管自从我在状态中收到“加速”消息以来似乎正在使用舞台视频，但实际上它甚至是正在运行的视频渲染，并且实际上正在使用经典视频。我唯一需要做的就是将 stage.removeChild( _video ) 添加到类的 close() 事件中！！

# html - 在电子邮件客户端中自动选择和显示新闻稿 HTML 版本

> ID：12237186
> 
> 赞同：-1
> 
> 时间：2012-09-02T15:25:55.670
> 
> 标签：html, css, email, newsletter

这里有任何人在 HTML 时事通讯电子邮件制作过程中经验丰富吗？我想知道你们如何编码标记和 CSS，以便电子邮件客户端自动选择 HTML 版本而不是纯文本版本。

我尝试自己编写一封自定义 HTML 时事通讯电子邮件，但当它到达 Gmail、Yahoo Mail 和 Hotmail 等电子邮件客户端时，内容上方有一个链接['Show Images' / 'Display Images'](http://sitemaker.umich.edu/cop-its/files/gmail_image_show.png)。

如何摆脱这个问题，以便电子邮件客户端自动选择 HTML 版本并隐藏内容上方的“显示图像”/“显示图像”链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:27:52.737

客户端已经在显示 HTML 版本。
但是，出于安全原因，大多数邮件客户端不会显示图像，除非用户单击该链接。

你对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:46:58.533

收件人而不是发件人负责选择他或她的首选格式（如果有多种格式）。如果您不想提供文本/纯文本，请不要；但也要理解这可能会令一些收件人感到不安和/或疏远。对于某些人来说，残疾可能会使（尤其是复杂的）HTML 完全无用；对于其他人来说，这可能只是关注内容而不是展示的问题。

同意在这种情况下，您正在查看的显然是禁用图像加载的 HTML 版本的观察结果。将图像添加为附件可以帮助避免某些客户端出现此问题，但不能避免其他客户端出现此问题，并且可能会给您带来不同类型的麻烦（消息过大和/或普遍浪费带宽）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T23:09:44.400

收件人决定他收到什么。

最佳做法是确保您提供适当的回退，以便即使图像未显示人们仍然可以在一定程度上阅读电子邮件。

字体样式，与图像文本匹配的 alt 标签以及图像的标题

例如

```
<td bgcolor="#000000">
  <font style="color:#ff0000; font-size:25px">
     <img src="title.jpg" alt="MY TITLE TEXT" title="MY TITLE TEXT">
  </font>
</td> 
```

这应该可以帮助您更详细地

[http://www.campaignmonitor.com/blog/post/3574/](http://www.campaignmonitor.com/blog/post/3574/)

并尝试以仍然可以显示图像形状的方式将设计切片，例如

[http://www.campaignmonitor.com/blog/post/3642/email-with-pixel-art-fallback-when-images-are-blocked](http://www.campaignmonitor.com/blog/post/3642/email-with-pixel-art-fallback-when-images-are-blocked)

[http://emailfail.posterous.com/pizza-express-have-fun-with-images-off](http://emailfail.posterous.com/pizza-express-have-fun-with-images-off)

# assembly - 如果数字不是> = 0，为什么代码加7

> ID：12237188
> 
> 赞同：6
> 
> 时间：2012-09-02T15:26:22.240
> 
> 标签：assembly, mips

我在 MIPS 程序集中有这个程序，它来自一个 C 代码，它对函数的第 8 个参数进行简单平均。

```
average8:
    addu $4,$4,$5
    addu $4,$4,$6
    addu $4,$4,$7
    lw $2,16($sp)
    #nop
    addu $4,$4,$2
    lw $2,20($sp)
    #nop
    addu $4,$4,$2
    lw $2,24($sp)
    #nop
    addu $4,$4,$2
    lw $2,28($sp)
    #nop
    addu $2,$4,$2
    bgez $2,$L2
    addu $2,$2,7
$L2:
    sra $2,$2,3
    j $31 
```

* * *

当数字为正时，我们直接除以8（移位3位），但当数字为负时，我们先`addu 7`进行除法。

我的问题是我们为什么要`7`添加`$2`when `$2 is not >= 0`？

* * *

编辑：这是 C 代码：

```
int average8(int x1, int x2, int x3, int x4, int x5, int x6, int x7, int x8)
{
    return (x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8) / 8;
} 
```

注意：在这种情况下，由于我们使用整数而不是浮点数或双精度数，除法中可能的损失并不重要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T16:07:33.007

这种差异似乎解释了负数的不同行为`/ 8`以及`>> 3`涉及负数的情况：

```
int main() {
    printf("%d\n", (-50) / 8);
    printf("%d\n", (-50) >> 3);
    printf("%d\n", (-50 + 7) >> 3);
} 
```

给

```
-6
-7
-6 
```

因此，编译器想要使用`>> 3`优化，但它并不完全相同`/ 8`，所以它添加了一些代码来纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:02:57.337

看到欧文的回答后，这里是对他的回答的补充，这解释了二进制级别的差异：

舍入的问题发生在二进制级别：

```
50; // 0011 0010
50 >> 3 // 0000 0110 which is 6

-50;  // 1100 1110
-50 >> 3; // 1111 1001 -> which is -7 
```

因此，要纠正这个问题，我们必须对数字进行 2E(rightShift -1) 以纠正舍入问题。

```
-50 + 7; // 1101 0101
-43 >> 3; // 1111 1010 -> which is -6 (and this is what was expected) 
```

但是如果这个数字已经可以被 8 整除呢？那么不会有问题！

```
-32; // 1110 0000
-32 >> 3; // 1111 1100 -> which is -4 (that's already the good answer)

-32+7; // 1110 0111
-25 >> 3; // 1111 1100 -> which is still -4\. 
```

请注意，当一个数字可以除以 8 时，将 7 添加到答案不会改变 3 个 LSB 中的任何一个，因此 3 的右逻辑移位保持不变。

# filesystems - 如何根据文件系统了解文件名的字符编码

> ID：12237195
> 
> 赞同：8
> 
> 时间：2012-09-02T15:26:51.723
> 
> 标签：filesystems, filenames

我想知道文件系统中文件名的字符编码，以便在 GUI 中正确显示它们。

我该怎么做？

我想我会根据文件系统（FAT、NTFS、ext3 等）得到不同的字符编码。

谢谢

（我在 C++ 中工作，但这个主题与语言无关）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T16:02:26.987

NTFS 是 Unicode (UTF-16)。exFAT 也是 Unicode。

原始 FAT 和 fAT32 使用 OEM 字符集（在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317748%28v=vs.85%29.aspx)上阅读更多内容）。

在 Linux 和 Unix 上，文件名可以包含除 NUL 之外的任何字节，并且未定义字符集。因此，每个应用程序自行决定使用哪一个。许多应用程序使用 UTF8。[在这个问题](https://unix.stackexchange.com/questions/2089/what-charset-encoding-is-used-for-filenames-and-paths-on-linux)中查看更多信息。

上面的 unix 方法用于大多数文件系统（主要是因为“字符集”概念在操作系统级别上比在存储级别上更有意义）。[您可以在此处](http://en.wikipedia.org/wiki/Comparison_of_file_systems)检查 FS 功能和有关文件名字符的要求（表 2 第 3 列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T14:30:44.370

在 Linux 中运行以下命令：locale | egrep "LANG=" | 切 -d 。-f 2

在类 Unix 系统上，文件名的编码不是在文件系统级别设置的，而是在用户环境中设置的。例如，UTF-8 是 Ubuntu 中的默认设置。

在 Windows 上，默认编码是 CP-1252（AKA ISO-8859-1 或 Latin-1），但 FS 通过 UTF-16 编码使用 Unicode。请参阅[http://en.wikipedia.org/wiki/Filename](http://en.wikipedia.org/wiki/Filename)。

但如果您使用 Qt，您可以使用 Qt Creator 构建以下内容，结果是当前用户编码名称。

```
#include <QTextCodec>
#include <iostream>

using namespace std;
int main(int argc, char *argv[])
{
  Q_UNUSED(argc); Q_UNUSED(argv);
  QTextCodec* tc = QTextCodec::codecForLocale();

  cout << "Current names text codec: " << tc->name().data() << endl;
  return 0;
} 
```

# open-source - Documentum 的开源替代方案

> ID：12237198
> 
> 赞同：2
> 
> 时间：2012-09-02T15:27:31.810
> 
> 标签：open-source, content-management-system, documentum

Documentum CMS 是否有任何开源替代方案。在对此进行评估时，我遇到了 Alfresco、Nuxeo 和 Apache Jackrabbit。我想知道我是否错过了什么以及是否还有其他我错过的产品。

提前致谢。

问候 Ajai G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:42:30.420

你很明白这一点。Nuxeo 基于开源，但您必须支付许可证，而且非常昂贵（在这一点上，无论如何 Documentum 更好。Apache Jackrabbit，我个人从未在行动中看到过，所以我不知道。Apache 是一个强大的开源大量项目，所以我认为对于 Java 开发人员来说是一个很好的起点。最后，Alfresco 是这里的最佳选择，因为你有企业版和社区版，如果你想支付支持或备注. 在这里，如果您是/有 Java 开发人员，您可以使用一些很棒的工具（例如共享内容/工作流程/全文索引等）创建一个非常不错的 Web 应用程序。我认为它是目前最完整的系统，并且它真的有很大的潜力。我在一家与这个产品做生意的公司工作，我不得不说我们对此感到非常高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T14:15:19.900

这几乎就是这些，AFAIC 我会选择 Nuxeo

@Alch3mi5t Nuxeo 是完全开源和免费的 (LGPL)，甚至比 Afresco 还要多：社区版和企业版之间没有区别，只是一样。付费的客户与其他人拥有相同的产品。

他们付什么钱？

*   Nuxeo Studio，一个在线图形工具，可以轻松自定义 Nuxeo，无需编辑 xml，也无需编写 java 代码。
*   支持获得问题的答案
*   可以从管理中心轻松安装特定版本的热修复程序。（如果您不是 Nuxeo 客户，可以在 github 中找到资源，您可以使用 maven 重新构建这些资源）

如果您需要进行更复杂的定制，这里是 Java 开发人员会很高兴的地方。Nuxeo 有一个带有插件和扩展点的可插拔架构，几乎任何 nuxeo 中的任何东西都可以在 Nuxeo 中通过扩展点覆盖：UI、服务器和功能配置、核心配置、文档结构、rest 服务、后端 DB 等......它非常强大.

Eclipse 有一个免费的开源插件可以帮助 Java 开发者：Nuxeo IDE 不要犹豫在 irc 频道上提问：#nuxeo in freenode

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T00:30:57.057

如此全面的披露 - 我为 Nuxeo 工作。但我想澄清一个误解：Nuxeo 是完全开源的，并且不收取许可证费用。代码在[GitHub 上](http://nuxeo.github.com/)。只有一个版本 - 没有企业/社区版本。我们收取订阅支持、维护和定制工具的费用。

# android - 通知中 Android 和 iOS 之间的字符集转换

> ID：12237200
> 
> 赞同：0
> 
> 时间：2012-09-02T15:27:45.733
> 
> 标签：android, ios

我有一个应用程序可以在 Android -> Android、iOS -> iOS 和 Android 之间向 iOS 发送通知。

当我使用非拉丁字符时，Android 到 iOS 之间的通知显示为奇怪的字符。

我认为 iOS 和 Android 上使用的默认字符集之间存在差异，我可能需要在它们之间进行转换，有没有人遇到更棘手的问题，并找到了解决方案？

# matlab - 在 MATLAB GUIDE 中执行函数调用

> ID：12237208
> 
> 赞同：1
> 
> 时间：2012-09-02T15:29:11.787
> 
> 标签：matlab, function, matlab-guide

在 MATLAB 中：

我有这个在命令行中运行最佳的独立函数：

```
function datacollect()
filename = uigetfile('*.txt')
[col] = importdata(fileName)
long = columns(:,1)
lat = columns(:,2)
handles.long = long;
handles.lat = lat; 
```

但是当我在 GUIDE 中进行函数调用时：

```
datacollect() 
```

我收到一个错误：

> > ？？？引用不存在的字段“输出”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:32:23.940

我的猜测是，用于保存图形句柄和其他数据的变量与您的函数使用 的`handles`变量之间存在名称冲突。`GUIDE`

尝试将`handles`您的函数重命名为其他名称，然后再次运行。

# java - Java编译错误：找不到符号

> ID：12237209
> 
> 赞同：21
> 
> 时间：2012-09-02T15:29:38.307
> 
> 标签：java, compiler-errors

嘿，我刚开始写第一本关于 java 的编程书，所以这应该很容易解决。使用我对条件句的新知识，我得到了标题错误。

这是代码：

```
import java.util.Scanner;

public class Music
{
    public static void main( String[] args )
    {

        Scanner x = new Scanner( System.in );

        int y;

        System.out.print( "Which is better, rap or metal? 1 for rap, 2 for metal, 3 for neither" );
        y = input.nextInt();

        if ( y == 1 )
            System.out.print( "Someone hasn't heard\nhttp://www.youtube.com/watch?v=Vzbc4mxm430\nyet" );

        if ( y == 2 )
            System.out.print( "Someone hasn't heard\nhttp://www.youtube.com/watch?v=s4l7bmTJ7j8\nyet" );

        if ( y == 3 )
            System.out.print( "=/ \nMusic sucks anyway." );
    }
} 
```

当我尝试编译时：

```
Music.java:13: error: cannot find symbol
y = input.nextInt();

symbol: variable input
location: class Music
1 error 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-02T15:31:43.300

错误消息告诉您变量“输入”在您的范围内不存在。您可能想使用您的 Scanner 对象，但您将其命名为“x”，而不是“输入”。

```
Scanner input = new Scanner( System.in ); 
```

应该修复它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-02T15:31:51.657

您尚未在`input`此处定义变量。你应该有：

```
Scanner input = new Scanner( System.in ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T15:33:52.013

您使用了变量输入，如

```
y=input.nextInt(); 
```

你不能这样做，因为它不是一个变量。我相信你的意思是它是“x”，或者你可以替换

```
Scanner x = new Scanner( System.in ); 
```

和

```
Scanner input = new Scanner( System.in ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T15:56:25.427

或者，您可以更改：

```
y = input.nextInt(); 
```

到：

```
y = x.nextInt(); 
```

然后它将起作用。

这是因为`input`没有在代码中的任何地方定义。提供的代码表明您希望它是`Scanner`该类的一个实例。但是 class 的实例`Scanner`实际上被定义为`x`and not `input`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T06:05:23.477

```
 Scanner x = new Scanner( System.in ); 
 int y = x.nextInt(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-31T08:50:05.933

```
Scanner input = new Scanner( System.in );
int y = input.nextInt(); 
```

（或者）

```
Scanner x = new Scanner( System.in ); 
int y = x.nextInt(); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-05T19:37:18.367

这是简单的修复 y = x.nextInt(); 而不是 y = input.nextInt();

# c# - 如何在加载前禁用 webBrowser 控件（Windows 应用程序）的样式和图像？

> ID：12237217
> 
> 赞同：0
> 
> 时间：2012-09-02T15:31:06.480
> 
> 标签：c#, .net-4.0, styles, webbrowser-control, windows-applications

我想在加载之前禁用`Styles`和`Images`WebBrowser 控件（在 Windows 应用程序中）？
意思是我不希望在 Web 浏览器的控制范围内有任何样式或图像的网站。

> 因为速度更快

我怎样才能禁用它们？
有什么属性可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:44:43.550

我不认为这是捆绑的 WebBrowser 控件的标准功能。 [这个先前关于在 WebBrowser 控件中禁用图像的 SO 问题](https://stackoverflow.com/questions/2048424/disable-image-loading-from-webbrowser-control-in-c-net-before-the-documentcompl)建议使用此替换 WebBrowser 控件，它提供您需要的图像禁用功能。

[该站点](http://www.codeproject.com/Articles/18935/The-most-complete-C-Webbrowser-wrapper-control)提供源代码和演示应用程序。ATS++ 对该站点的评论（标题：Re:HOWTO 将其合并到我自己的项目中。）显示了如何用作独立的 WebBrowser 控件替代品。

但是我没有亲自使用过它，所以我无法提供任何关于它的工作原理的更多细节。

# java - 序列图请求 portlet

> ID：12237219
> 
> 赞同：0
> 
> 时间：2012-09-02T15:31:24.380
> 
> 标签：java, client-server, portlet, sequence-diagram, jsr286

详细来说，我想知道它是否是门户和门户容器之间的正确表示。

![在此处输入图像描述](../Images/632a5fc2983dfc8a55c479b0b36f7018.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:55:43.607

这取决于您的门户。行动阶段首先出现。之后，门户可以开始呈现任何 portlet。Portlet 甚至可以并行呈现。

# linux - Linux time_to_tm 和本地时间

> ID：12237224
> 
> 赞同：0
> 
> 时间：2012-09-02T15:31:44.313
> 
> 标签：linux, linux-kernel

Linux 内核提供`time_to_tm()`（参见[此处](http://lxr.free-electrons.com/source/kernel/time/timeconv.c?v=2.6.32#L77)）：

```
/**
 * time_to_tm - converts the calendar time to local broken-down time
 *
 * @totalsecs   the number of seconds elapsed since 00:00:00 on January 1, 1970,
 *              Coordinated Universal Time (UTC).
 * @offset      offset seconds adding to totalsecs.
 * @result      pointer to struct tm variable to receive broken-down time
 */
void time_to_tm(time_t totalsecs, int offset, struct tm *result) 
```

据介绍，`tm`将是局部故障时间。因此，我理解`tm`将尊重我的当地时区和 DST。如果这是正确的，我在代码中看不到它。

也许`offset`应该使用参数来“提供”本地时区和 DST？

**更新**

按照[这个问题](https://stackoverflow.com/questions/5077192/how-to-get-current-hour-time-of-day-in-linux-kernel-space)，因此使用[sys_tz](http://lxr.free-electrons.com/source/kernel/time.c?v=2.6.33#L51)结合`time_to_tm()`我们可以获得“真实”的本地时间？AFAIK，本地时间表示法属于用户空间。例如，DST 是在每个时区专门编译的配置文件中定义的。

我很困惑。`sys_tz`内核中的比是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:28:00.023

内核不知道也不关心时区或 DST，它所做的一切都以自纪元以​​来的秒数为单位。时区和 DST 由库在用户模式下处理，它们检查您的环境变量并可以扫描时区文件。

这个函数不能被最终用户调用——它没有系统调用接口。它只是在内核内部使用。如果您查看交叉引用 (http://lxr.free-electrons.com/ident?v=2.6.33;i=time_to_tm)，当前调用它的唯一位置是 FAT 文件系统驱动程序。它确实用于调整时区；这样做是为了支持`tzoff`挂载选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T06:43:54.287

用户空间可以调用`settimeofday()`将本地时间和时区传递给内核。时区存储在`sys_tz`（参见`do_sys_settimeofday()`中`kernel/time.c`）。内核主要用于`sys_tz`通过等方式将本地时间返回给用户空间`gettimeofday()`，还有一些地方`fs/fat`也想使用时区。

# javascript - 谷歌地图代码不起作用

> ID：12237226
> 
> 赞同：0
> 
> 时间：2012-09-02T15:31:49.737
> 
> 标签：javascript, google-maps

我正在使用谷歌地图，我正在尝试在地图上创建一个多边形，但由于某种原因，谷歌只是给了我没有多边形的地图

代码：

```
 <script type="text/javascript">
  var map;
  var infoWindow;
  var sandCoodrs;

function initialize() {

  var myLatLng = new google.maps.LatLng(-26, 28);
  var mapOptions = {
    zoom: 10,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

  var sandtonCoords = []; 
```

//出于某种原因，在这一点之后firebug没有进入代码并且sandtonCoords保持为空，因此没有多边形

```
 jQuery.get('http://localhost/magnetic/Main.txt', function(data) 
    {
        var StringData = data;
        StringData.trim();
        var MainArray = data.split(",");
        var length = MainArray.length;
        for(k=0;k<length;k++)
        {
            var StringCoords = MainArray[k];
            var LatLongArray = StringCoords.split(" ");
            var Lat = parseFloat(LatLongArray[0]);
            Lat.trim();
            var Long = parseFloat(LatLongArray[1]);
            Long.trim();
            sandtonCoords.push(new google.maps.LatLng(Lat,Long));
        }
    });

andton = new google.maps.Polygon({
    paths: sandtonCoords,
    strokeColor: "#FF0000",
    strokeOpacity: 0.8,
    strokeWeight: 3,
    fillColor: "#FF0000",
    fillOpacity: 0.35
  });

  sandton.setMap(map);

  // Add a listener for the click event
  google.maps.event.addListener(sandton, 'click', showArrays);

  infowindow = new google.maps.InfoWindow();
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:17:33.827

LatLongArray 是一个字符串数组。纬度和经度是数值，类型转换不是自动的。所以：

```
var Lat = parseFloat(LatLongArray[0]);
var Long = parseFloat(LatLongArray[1]); 
```

顺便说一句，确保 Main.txt 中的对是 [lat lon] 而不是 [lon lat]。

# spring - 弹簧和多模块设置

> ID：12237230
> 
> 赞同：4
> 
> 时间：2012-09-02T15:32:02.187
> 
> 标签：spring, dependency-injection, module

我的（基于 Maven 的）项目是由几个模块构建的。基本上有一个核心模块和几个模块，它们利用它向外部提供各种服务。这些模块之间的“粘合剂”是“父”模块。“父”模块不应该包含任何代码。像这样的东西：![在此处输入图像描述](../Images/c222655f929652cc6818e9404bdc25df.png)

我想做的是使用 Spring IoC 将核心部件注入/自动装配到服务部件中。但我似乎找不到配置它的方法。或者至少我似乎无法找到一种方法来避免服务部分中的冗余 IoC 配置。

更具体地说 - 使用[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-autowired-annotation)中的示例- 假设这将是服务模块之一的配置 - 我如何将`example.SimpleMovieCatalog`配置部分移动到核心模块中而不会失去将它们注入“兄弟”之一的能力“模块？

```
 <?xml version="1.0" encoding="UTF-8"?>
  <beans...>
    <context:annotation-config/>
    <bean class="example.SimpleMovieCatalog">
        <qualifier value="main"/>
    </bean>
    <bean class="example.SimpleMovieCatalog">
        <qualifier value="action"/>
    </bean>
    <bean id="movieRecommender" class="example.MovieRecommender"/>
  </beans> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:01:21.813

我终于想出了一种现在似乎可行的方法：

1.  每个模块都将他的弹簧配置保存在`/META-INF/spring-<module>.xml`
2.  每个模块都必须将其代码保存在自己的包中，否则`context:component-scan`将无法正常工作
3.  所有依赖于其他模块的模块都必须通过应用程序上下文的“configLocations”加载外部模块配置 - 外部模块配置应该用 sth 引用。像“类路径*：META-INF/spring-core.xml”

* * *

一些备注

*   “classpath*:” 有什么魔力——因为它可以在嵌入的 jar 文件中包含其他资源
*   这个解决方案对我来说仍然有一个缺点，我的 IDE (Intellij IDEA) 无法解析交叉引用的 bean。这是由于直接通过上下文加载 spring-core.xml 的“hack”。不幸的是，到目前为止我还没有找到任何其他方法:(
*   另一件给我带来相当痛苦的事情是使用某物。我的IDE可以理解like `<import resource="classpath*:META-INF/spring-core.xml" />`，但根本没有给出想要的结果（例如中断`context:component-scan`配置）

# sqlalchemy - SQLAlchemy 按映射表中的关系排序

> ID：12237234
> 
> 赞同：0
> 
> 时间：2012-09-02T15:32:44.307
> 
> 标签：sqlalchemy

因此，在阅读[SQLAlchemy ordering by count on a many to many relationship](https://stackoverflow.com/questions/5973553/sqlalchemy-ordering-by-count-on-a-many-to-many-relationship)之后，我尝试复制结果，但它无法正常工作。所以我的模型是

```
class Group(Base):
__tablename__='groups'
__table_args__={
    'mysql_engine':'InnoDB',
    'mysql_charset':'utf8',
}

id = Column(Integer, primary_key=True, unique=True)
name = Column(VARCHAR(30), primary_key=True, unique=True)
time = Column(DateTime, onupdate = datetime.datetime.now)
description = Column(VARCHAR(255))
creator_id = Column(Integer, ForeignKey('users.id'))
privacy = Column(SMALLINT) # 0 == public, 1 == friends, 2 == private

def __init__(self, name, descr, creator, privacy):
    self.name = name
    self.description = descr
    self.creator_id = creator
    self.privacy = privacy

class GroupUserRelationship(Base):
__tablename__='groupUserRelationships'
__table_args__={
    'mysql_engine':'InnoDB',
    'mysql_charset':'utf8',
}

id = Column(Integer, primary_key = True)
group_id = Column(Integer, ForeignKey('groups.id'))
user_id = Column(Integer, ForeignKey('users.id'))
time = Column(DateTime, onupdate=datetime.datetime.now)

def __init__(self, group, user):
    self.group_id = group
    self.user_id = user 
```

我的 sqlalchemy 查询是`groups = session.query(Group, func.count(GroupUserRelationship.user_id).label('total')).join(GroupUserRelationship).group_by(Group).order_by('total DESC').limit(20).all()`，但是当我尝试遍历它返回的列表并访问组 id 时，我得到一个 AttributeError：'NamedTuple' 没有属性 id。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:11:38.517

这种形式的查询：

```
session.query(Group, func.count(GroupUserRelationship.user_id).label('somelabel')) 
```

将返回一个像这样的元组列表：

```
[
    (group1, 5),
    (group2, 7),
    ...
] 
```

.. ETC。

然后迭代到 group.id 是：

```
for group, user_id in session.query(Group, func.count(GUR.user_id).label('somelabel')).join(...):
    print group.id 
```

对于计数，我认为重要的第一个技巧是养成不按整行分组的习惯（即 group_by(Group)）。虽然可以使用该技术使此处的查询工作，但这是不好的做法，因为您正在使数据库执行大量额外的工作来匹配整个组表的所有列，而实际上您需要分组的是单列 GroupUserRelationship.user_id . 我参考这篇文章[http://weblogs.sqlteam.com/jeffs/archive/2005/12/14/8546.aspx](http://weblogs.sqlteam.com/jeffs/archive/2005/12/14/8546.aspx)对此进行了一些阐述。SQLAlchemy 教程随后在此处提供了此表单的示例：http: [//docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#using-subqueries](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#using-subqueries)。

在 SQLAlchemy 中真正有用的下一件事是使用 relationship() 在两个类之间建立特定的连接路径。所以这就是使用子查询完成的分组表达式。此处使用的特殊技巧是可选的，您可以说`join(subquery, Group.gur)`“使用 Group.gur 关系的等效连接条件连接到此子查询”。

*编辑以说明完整的往返示例*

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Group(Base):
    __tablename__ = 'groups'

    id = Column(Integer, primary_key=True)
    name = Column(VARCHAR(30))
    gur = relationship("GroupUserRelationship")

class GroupUserRelationship(Base):
    __tablename__ = 'groupUserRelationships'

    id = Column(Integer, primary_key=True)
    group_id = Column(Integer, ForeignKey('groups.id'))

e = create_engine("sqlite://", echo=True)
Base.metadata.create_all(e)

s = Session(e)

s.add_all([
    Group(name='g1', gur=[GroupUserRelationship() for i in xrange(3)]),
    Group(name='g2', gur=[GroupUserRelationship() for i in xrange(8)]),
    Group(name='g3', gur=[GroupUserRelationship() for i in xrange(5)]),
    Group(name='g4', gur=[GroupUserRelationship() for i in xrange(1)]),
    Group(name='g5', gur=[GroupUserRelationship() for i in xrange(2)]),
])
s.commit()

gur_count = s.query(
                func.count(GroupUserRelationship.id).label('total'),
                GroupUserRelationship.group_id
            ).group_by(GroupUserRelationship.group_id).\
            subquery()

for group, gur_count in s.query(Group, gur_count.c.total).\
            join(gur_count, Group.gur).\
            order_by(gur_count.c.total):
    print "GROUP:", group.name, "GROUP ID:", group.id, "NUMBER OF GUR:", gur_count 
```

输出（减去 SQL 回显，这对于查看正在发生的事情很有用）：

```
GROUP: g4 GROUP ID: 4 NUMBER OF GUR: 1
GROUP: g5 GROUP ID: 5 NUMBER OF GUR: 2
GROUP: g1 GROUP ID: 1 NUMBER OF GUR: 3
GROUP: g3 GROUP ID: 3 NUMBER OF GUR: 5
GROUP: g2 GROUP ID: 2 NUMBER OF GUR: 8 
```

# iphone - 应用程序介绍一旦被 Facebook 登录，下次如何跳过介绍？

> ID：12237239
> 
> 赞同：0
> 
> 时间：2012-09-02T15:33:13.730
> 
> 标签：iphone, ios, xcode, facebook, uiscrollview

我正在构建一个应用程序，该应用程序以 UIScrollView 开头，其中包含 3 个有关如何使用该应用程序的信息图像，然后在您登录的应用程序打开后，它会在第 3 个屏幕上打开 Facebook 登录屏幕......如果应用程序已关闭它再次使用 UIScrollView 重新启动！

用 Facebook 登录后，有没有办法跳过这个？

请对此提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:59:04.257

一旦你通过 Facebook 登录，存储一个对象作为密钥`kFirstTimeLogIn`，`NSUserDefaults`就像这样......

```
NSString *value = @"NO";
NSUserDefaults *userPreferences = [NSUserDefaults standardUserDefaults];
[userPreferences setObject:value forKey:@"kFirstTimeLogIn"];
[userPreferences synchronize]; 
```

所以当你的应用程序每次启动时检查这个键，如果这导致一个 nil 值而不是通过滚动视图显示滚动视图。

希望这会有所帮助。

# xcode - (Xcode) 启用 iCloud 的权限被拒绝

> ID：12237240
> 
> 赞同：2
> 
> 时间：2012-09-02T15:33:16.030
> 
> 标签：xcode, macos, icloud, permission-denied, key-value-store

如果我激活 iCloud Key-Value Store 并添加一个 iCloud 容器，我会在尝试启动我的 (mac) 应用程序时收到错误“权限被拒绝”。但为什么？

为 iCloud（生产和开发）启用了应用 ID，并且在为 iCloud 启用了应用 ID 后，我生成并安装了新的配置文件（生产和开发）。

我已经用 iOS 应用程序做了很多次，并且都有效。那么错误在哪里呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:52:53.940

我有同样的问题。通过修复公司标识符中的错字解决了我的问题。

当我构建配置文件时，我使用了 net.company（全部小写）。在 Xcode 中启动我的代码时，我使用了 net.Company（注意大写）。

当我开始一个新程序时，我使用了与配置文件相同的大小写。我的编译工作。

# jquery - jQuery Sortable：如何编辑包含属性行为

> ID：12237241
> 
> 赞同：1
> 
> 时间：2012-09-02T15:33:19.807
> 
> 标签：jquery, jquery-ui, customization, jquery-ui-sortable

我正在做一个项目，这是一个简单的待办事项列表。您可以拖动任务并重新排列它，我已将任务设置为`containment`包含它们的 div。

但是当你想把一个任务放在顶部时，你只需将它拖到顶部，容器 div 就会阻止它在顶部的当前任务之上。

我想修改可排序的插件，`10px`在顶部和底部添加一个额外的，所以任务不会完全停在 div 的顶部，但在它之外，`10px`同样会到达容器 div 的底部。

自己尝试一下以了解我的意思。[在这里](http://check.staticloud.com/)。添加几个任务并尝试将一些任务放在容器的顶部。

我尝试`sortable`使用开发包进行修改，我到了这些行但不知道要修改什么：

```
 if(!(/^(document|window|parent)$/).test(o.containment) && o.containment.constructor != Array) {
       var c = $(o.containment);
       var ce = c[0]; if(!ce) return;
       var co = c.offset();
       var over = ($(ce).css("overflow") != 'hidden');

       this.containment = [
           (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0),
           (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0),
           (over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right,
           (over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top  - this.margins.bottom
       ];
    this.relative_container = c;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:49:36.457

嗯，看来我已经解决了，对于遇到此问题的任何人，请将此选项添加到`sortable`：

```
tolerance: "pointer" 
```

> 这是拖动期间重新排序的行为方式。可能的值：“相交”、“指针”。在某些设置中，“指针”更自然。
> 
> *   **intersect** : draggable 与 droppable 重叠至少 50%
> *   **指针**：鼠标指针与可放置对象重叠

奇怪的`intersect`是，默认值是默认值，最好`pointer`是默认值。

# android - Android NDK 调试——硬件断点

> ID：12237243
> 
> 赞同：3
> 
> 时间：2012-09-02T15:33:27.687
> 
> 标签：android, debugging, android-ndk

对于我的 Android NDK 应用程序，我想监视内存地址并在修改时中断，因为我怀疑某处存在损坏内存的错误指针。

我在调试 Android NDK 时遇到了很多麻烦，我想知道是否支持硬件断点/观察点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:59:00.167

[您的问题与此](https://stackoverflow.com/questions/11577139/gdb-hardware-breakpoint-dont-work-with-remote-debugging)非常相关，我在其中提交了一个可能对您有所帮助的答案。

# module - ** 异常错误：未定义函数 eredis:start_link/0

> ID：12237245
> 
> 赞同：2
> 
> 时间：2012-09-02T15:33:34.743
> 
> 标签：module, include, erlang

我正在尝试将[eredis](https://github.com/wooga/eredis)包含在我的 Erlang 项目中以连接到 redis。我将它放在 lib/ 目录中，并使用`-include_lib ("../lib/eredis/include/eredis.hrl").`It compiles fine in `erl`，但随后尝试创建客户端失败`** exception error: undefined function eredis:start_link/0`。

redis_worker.erl：

```
-module (redis_worker).
-export ([get/2, set/3, client/0]).
-include_lib ("../lib/eredis/include/eredis.hrl").

client() ->
  eredis:start_link().

get(Client, Key) when is_list(Key) ->
  {ok, Val} = eredis:q(Client,["GET", Key]),
  io:format("Got key: ~s which had value ~s~n", [Key, Val]).

set(Client, Key, Value) when is_list(Key) andalso is_list(Value)->
  {ok, <<"OK">>} = eredis:q(Client, ["SET", Key, Value]),
  io:format("Set key: ~s to ~s~n",[Key, Value]). 
```

为什么它编译得很好（我假设这意味着执行`include_lib`）但是当我尝试使用包含的库时会爆炸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:06:10.370

include_lib 一直是引起轻微混淆的根源。include_lib 的行为与 include 几乎相同，但不应指向文件路径。在 include_lib 中，第一个路径组件被假定为应用程序的名称。

例如

`-include_lib("../lib/eredis/include/eredis.hrl").`

将使用 code:lib_dir(lib) 查找当前（最新）版本 lib 的目录，然后在子目录 include 中搜索文件 eredis/include/eredis.hrl（忽略模式替换）。

值得注意的是，Erlang 中通常首选的依赖策略是使用 rebar 并编译并在 via 中传递适当的依赖路径`-pa`。但是，在您的无钢筋设置中，这意味着`-pa ../lib/eredis/include/eredis.hrl`在编译后直接传递给 erl。`-pa`将该目录包含到您的代码路径中。

# python - scipy.interpolate.UnivariateSpline.get_coeffs

> ID：12237249
> 
> 赞同：1
> 
> 时间：2012-09-02T15:33:44.423
> 
> 标签：python, scipy, interpolation, spline

我使用 UnivariateSpline 对 4560 个支持点进行插值。

现在我想用

```
UnivariateSpline.get_coeffs() 
```

这种方法给了我一个大约 400 个系数的一维数组。它们以哪种方式排序？我想用它们在 C 中进行更多计算。

有任何想法吗？

# iphone - 如何在 Airplay 选择器中启用镜像选项

> ID：12237254
> 
> 赞同：2
> 
> 时间：2012-09-02T15:33:56.857
> 
> 标签：iphone, mirroring, airplay

我在应用程序中添加了播放选择器功能。Airplay 选择器只显示两个选项 iphone 和 Apple TV 不显示镜像选项。我如何在播放选择器中显示镜像选项，以便可以在 Apple TV 上看到应用程序本身。

请指导。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:37:05.680

它仅适用于 iPhone 4S 和 iPad 2 及更高版本。我的 iPhone 4 也有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T11:24:13.210

不，您没有镜像选项。它是私有 API，我在 github 上找到的一些解决方案与 iOS 9 不兼容。

我了解 Apple 他们希望通过仅手动更改的开关来保护用户。

# oracle - Oracle 用户为 varchar 的 varray 定义的聚合函数

> ID：12237263
> 
> 赞同：8
> 
> 时间：2012-09-02T15:34:39.657
> 
> 标签：oracle, oracle11g, aggregate-functions, varray

我正在尝试为 varray 编写一些聚合函数，当我尝试将它与数据库中的数据一起使用时，我得到了这个错误代码：

```
ORA-00600 internal error code, arguments: [kodpunp1], [], [], [], [], [], [], [], [], [], [], []
[koxsihread1], [0], [3989], [45778], [], [], [], [], [], [], [], [] 
```

该函数的代码非常简单（实际上它什么也不做）：

```
create or replace
TYPE "TEST_VECTOR" as varray(10) of varchar(20)
 ALTER TYPE "TEST_VECTOR" MODIFY LIMIT 4000 CASCADE

create or replace
type Test as object(
  lastVector TEST_VECTOR,

  STATIC FUNCTION ODCIAggregateInitialize(sctx in out Test) return number,
MEMBER FUNCTION ODCIAggregateIterate(self in out Test, value in TEST_VECTOR) return number,
MEMBER FUNCTION ODCIAggregateMerge(self IN OUT Test, ctx2 IN Test) return number,
MEMBER FUNCTION ODCIAggregateTerminate(self IN Test, returnValue OUT TEST_VECTOR, flags IN number) return number
);

create or replace
type body Test is
  STATIC FUNCTION ODCIAggregateInitialize(sctx in out Test) return number is
  begin
    sctx := Test(TEST_VECTOR());
    return ODCIConst.Success;
  end;
MEMBER FUNCTION ODCIAggregateIterate(self in out Test, value in TEST_VECTOR) return number  is
begin
  self.lastVector := value;
  return ODCIConst.Success;
end;
MEMBER FUNCTION ODCIAggregateMerge(self IN OUT Test, ctx2 IN Test) return number is 
begin
 return ODCIConst.Success;
end;
MEMBER FUNCTION ODCIAggregateTerminate(self IN Test, returnValue OUT TEST_VECTOR, flags IN number) return number is
begin
  returnValue := self.lastVector;
 return ODCIConst.Success;
end;
end;

create or replace
FUNCTION test_fn (input TEST_VECTOR) RETURN TEST_VECTOR 
PARALLEL_ENABLE AGGREGATE USING Test; 
```

接下来我创建一些测试数据：

```
create table t1_test_table(
  t1_id number not null,
  t1_value TEST_VECTOR not null,
  Constraint PRIMARY_KEY_1 PRIMARY KEY (t1_id)
) 
```

下一步是将一些数据放入表中

```
insert into t1_test_table (t1_id,t1_value) values (1,TEST_VECTOR('x','y','z')) 
```

现在一切都准备好执行查询：

```
Select test_fn(TEST_VECTOR('y','x')) from dual 
```

上面的查询效果很好

```
Select test_fn(t1_value) from t1_test_table where t1_id = 1 
```

我使用的 Oracle DBMS 版本：11.2.0.3.0

有没有人试过做这样的事情？为什么你认为它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T17:53:04.877

如前所述，`ORA-00600`这是一个内部 Oracle 错误。他们没有押韵或理由，唯一真正的解决方法是从 Oracle 获得补丁。

然而......这一切都说......通常可以稍微调整您的代码以避免错误。

在您的情况下，您可以这样做：

```
Select test_fn(cast(t1_value as test_vector)) 
from t1_test_table 
where t1_id = 1; 
```

也就是说，在将列`test_vector`传递到您的 ODCI 聚合之前显式转换该列。

无论如何，这在 12c 中有效。（而且，在 12c 中，您也将获得 ORA-00600 而不进行此修复）。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-09-15T23:40:55.200

“ORA-00600 内部错误代码，参数：”，表示某些块在内部损坏，尝试恢复系统表空间和特定用户表空间。

# objective-c - 在iOS中找出货币中的小数位数

> ID：12237266
> 
> 赞同：4
> 
> 时间：2012-09-02T15:35:02.223
> 
> 标签：objective-c, ios, cocoa-touch, nsnumberformatter, nslocale

我使用 NSNumberFormatter 以本地化方式格式化货币，它工作正常。但我想覆盖它并让用户选择覆盖小数分隔符后的位数。

如何找出 NSNumberFormatter 将用于某种货币的位数？我查看了 NSLocale 对象，但没有一个键告诉我这一点。

```
NSString * const NSLocaleIdentifier;
NSString * const NSLocaleLanguageCode;
NSString * const NSLocaleCountryCode;
NSString * const NSLocaleScriptCode;
NSString * const NSLocaleVariantCode;
NSString * const NSLocaleExemplarCharacterSet;
NSString * const NSLocaleCalendar;
NSString * const NSLocaleCollationIdentifier;
NSString * const NSLocaleUsesMetricSystem;
NSString * const NSLocaleMeasurementSystem;
NSString * const NSLocaleDecimalSeparator;
NSString * const NSLocaleGroupingSeparator;
NSString * const NSLocaleCurrencySymbol;
NSString * const NSLocaleCurrencyCode;
NSString * const NSLocaleCollatorIdentifier;
NSString * const NSLocaleQuotationBeginDelimiterKey;
NSString * const NSLocaleQuotationEndDelimiterKey;
NSString * const NSLocaleAlternateQuotationBeginDelimiterKey;
NSString * const NSLocaleAlternateQuotationEndDelimiterKey; 
```

我怎样才能找出像 NSNumberFormatter 似乎知道的货币的正确小数位数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T15:40:02.430

创建一个 NSNumberFormatter 实例并将货币代码设置为所需的货币。然后，您可以在货币格式化程序上查询属性 maximumFractionDigits。

# php - 将多个媒体查询分组为 LESS css 的输出

> ID：12237267
> 
> 赞同：1
> 
> 时间：2012-09-02T15:35:03.590
> 
> 标签：php, css, less, css-parsing

我打算在我的项目（PHP）中使用 LESS css。我打算使用它的嵌套`@media`查询功能。我发现它无法在它生成的输出 css 中对多个媒体查询进行分组。

例如：

```
// 较少的
.header {
  @media all and (min-width: 240px) and (max-width: 319px) {
    字体大小：12px；
  }

  @media all and (min-width: 320px) and (max-width: 479px) {
    字体大小：16px；
    字体粗细：粗体；
  }
}

。身体 {
  @media all and (min-width: 240px) and (max-width: 319px) {
    字体大小：10px；
  }

  @media all and (min-width: 320px) and (max-width: 479px) {
    字体大小：12px；
  }
}

// 输出 CSS
@media all and (min-width: 240px) and (max-width: 319px) {
  .header {
    字体大小：12px；
  }
}
@media all and (min-width: 320px) and (max-width: 479px) {
  .header {
    字体大小：16px；
    字体粗细：粗体；
  }
}
@media all and (min-width: 240px) and (max-width: 319px) {
  。身体 {
    字体大小：10px；
  }
}
@media all and (min-width: 320px) and (max-width: 479px) {
  。身体 {
    字体大小：12px；
  }
}

```

我的预期输出是（@media 查询分组）

```
@media all and (min-width: 240px) and (max-width: 319px) {
  .header {
    字体大小：12px；
  }
  。身体 {
    字体大小：10px；
  }
}
@media all and (min-width: 320px) and (max-width: 479px) {
  .header {
    字体大小：16px；
    字体粗细：粗体；
  }
  。身体 {
    字体大小：12px；
  }
}

```

我想知道它是否可以在 LESS (PHP) 中完成，或者是否有任何基于 PHP 的简单 CSS 解析器可以用来操作输出 CSS 以对 @media 查询进行分组和合并。如下面的流程所示。

```
  少文件
      |
      五
[LESSphp 编译器]
      |
      五
   CSS 文件
      |
      五
生成的 CSS 文件
会接受我的剧本
使用 CSS 解析器编写
      |
      五
   CSS 文件
有类似的@media
分组。

```

如果在 LESS (PHP) 中实现分组 @media 查询不是一个选项，我想知道您对可以在上述流程中使用的 CSS 解析器 (PHP) 的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-12T16:24:06.630

我调整[autoCompileLess](http://leafo.net/lessphp/docs/#compiling_automatically)函数以在 CSS 末尾对媒体查询进行分组，而无需更改 less 代码。

```
@mobile: ~"only screen and (max-width: 529px)";
.test {
    color:green;
    @media @mobile { color:red; }
}    
.test2 {
    color:red;
    @media @mobile { color:blue; }
} 
```

默认使用less编译

```
.test {
    color:green;
}    
.test2 {
    color:red;
}
@media only screen and (max-width: 529px) {
    .test {
        color:red;
    }
}    
@media only screen and (max-width: 529px) {
    .test2 {
        color:blue;
    }
} 
```

用下面的函数编译less

```
.test {
    color:green;
}    
.test2 {
    color:red;
}
@media only screen and (max-width: 529px) {
    .test {
        color:red;
    }
    .test2 {
        color:blue;
    }
} 
```

和功能：

```
<?php
function autoCompileLess($inputFile, $outputFile)
{
    // load cache
    $cacheFile = $inputFile.".cache";

    if (file_exists($cacheFile))
    {
        $cache = unserialize(file_get_contents($cacheFile));
        if (empty($cache)) $cache = $inputFile;
    }
    else
    {
        $cache = $inputFile;
    }

    // compile less
    $less = new lessc;
    $newCache = $less->cachedCompile($cache);

    // save less cache
    $saveCache = $newCache;

    // search media query in CSS
    preg_match_all('#@media(.*?)\{(.+?}[ \n])\}#si',$newCache['compiled'],$match,PREG_SET_ORDER);//$MatchingString now hold all strings matching $pattern.

    $media = array();

    // group same media query
    foreach ($match as $val)
    {
        if (!isset($media[$val[1]])) $media[$val[1]] = '';

        $media[$val[1]] .= $val[2];
    }

    // delete media query of cache
    $newCache['compiled'] = preg_replace('#@media(.*?)\{(.+?}[ \n])\}#si', '', $newCache['compiled']);

    // add groups of media query at the end of CSS
    $final = $newCache['compiled'] . "\n";
    foreach ($media as $id => $val)
    {
        $final .= "\n" . '@media' . $id . '{' . $val . '}' . "\n";
    }

    // save less
    // save CSS with groups of media query
    if (!is_array($cache) || $newCache["updated"] > $cache["updated"]) 
    {
        file_put_contents($cacheFile, serialize($saveCache));
        // file_put_contents($outputFile, $newCache['compiled']);
        file_put_contents($outputFile, $final);
    }
}

// use of function
autoCompileLess('style.less', 'style.css'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:10:29.690

为什么您的媒体查询中也没有选择器，就像您预期的输出一样？然后，您将摆脱对您所做的一切的双重媒体查询......

# c# - 如何在 C# 中使用继承的类实现 Xml 序列化

> ID：12237268
> 
> 赞同：15
> 
> 时间：2012-09-02T15:35:10.047
> 
> 标签：c#, xml, inheritance, serialization

我有两个类：基类名称 Component 和名为 DBComponent 的继承类

```
[Serializable]
public class Component
{
    private string name = string.Empty;
    private string description = string.Empty;  
}

[Serializable]
public class DBComponent : Component
{
    private List<string> spFiles = new List<string>();

    // Storage Procedure Files
    [XmlArrayItem("SPFile", typeof(string))]
    [XmlArray("SPFiles")]
    public List<string> SPFiles
    {
        get { return spFiles; }
        set { spFiles = value; }
    }

    public DBComponent(string name, string description)
        : base(name, description)
    { }
}  

[Serializable]
public class ComponentsCollection
{
  private static ComponentsCollection instance = null;
  private List<Component> components = new List<Component>();

  public List<Component> Components
  {
      get { return components; }
      set 
      { 
            components = value; 
      }
  }

   public static ComponentsCollection GetInstance()
    {
        if (ccuInstance == null)
        {
            lock (lockObject)
            {
                if (instance == null)
                    PopulateComponents();
            }
        }
        return instance;
    }

    private static void PopulateComponents()
    {
        instance = new CCUniverse();
        XmlSerializer xs = new XmlSerializer(instance.GetType());
        instance = xs.Deserialize(XmlReader.Create("Components.xml")) as ComponentsCollection;
    }
} 
```

}

我想从 Xml 文件中读取\写入。我知道我需要为 DBComponent 类实现序列化，否则它不会读取它。但我找不到任何简单的文章。对于这个简单的场景，我发现的所有文章都太复杂了。
Xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
  <ComponentsCollection>    
    <Components>
            <DBComponent Name="Tenant Historical Database" Description="Tenant Historical Database">
                    <SPFiles>
                        <SPFile>Setup\TenantHistoricalSP.sql</SPFile>
                    </SPFiles>
            </DBComponent>
            <Component Name="Agent" Description="Desktop Agent" />
        </Components>  
  </ComponentsCollection> 
```

有人可以给我一个简单的例子来说明如何阅读这种 xml 文件以及应该实现什么？

谢谢
里奥

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-02T15:47:39.720

不幸的是，您需要使用该属性告诉`XmlSerializer`您打算序列化或反序列化的类。`XmlArrayItem()`每种不同的类型也需要自己的元素名称。例如：

```
public class ComponentDerviedClass1: Component
public class ComponentDerivedClass2: Component
public class ComponentDerivedClass3: Component

// ...

public class ComponentsCollection
{
    [XmlArray("Components")]
    [XmlArrayItem("ComponentDerivedClass1", typeof(ComponentDerivedClass1))]
    [XmlArrayItem("ComponentDerivedClass2", typeof(ComponentDerivedClass2))]
    [XmlArrayItem("ComponentDerivedClass3", typeof(ComponentDerivedClass3))]
    public List<Component> Components
    {
        // ...
    }
} 
```

这将读取一个 XML 文件，如：

```
<?xml version="1.0" encoding="utf-8" ?>
<ComponentsCollection>    
  <Components>
     <ComponentDerivedClass1>
         <!-- ... -->
     </ComponentDerivedClass1>
     <ComponentDerivedClass2>
         <!-- ... -->
     </ComponentDerivedClass2>
     <ComponentDerivedClass3>
         <!-- ... -->
     </ComponentDerivedClass3>
   </Components>  
</ComponentsCollection> 
```

每个元素的多个实例可以存在（或不存在）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-02T15:48:18.967

不同场景的两种选择：告诉基类

```
[XmlInclude(typeof(DBComponent))]
public class Component
{
    private string name = string.Empty;
    private string description = string.Empty;  
} 
```

或者：告诉集合：

```
[XmlArray]
[XmlArrayItem("Component", typeof(Component))]
[XmlArrayItem("DBComponent", typeof(DBComponent))]
public List<Component> Components {...} 
```

实际上，如果您不想要外部节点（组件），也可以使用 [XmlElement(...)] 代替 [XmlArrayItem]。另外：您不需要[Serializable]。

# intellij-idea - Intellij Javafx 神器——你是怎么做到的？

> ID：12237269
> 
> 赞同：8
> 
> 时间：2012-09-02T15:35:23.223
> 
> 标签：intellij-idea, javafx, jar, executable-jar, artifact

我整天都在尝试将我的 javafx 应用程序转换为 jar 文件。我正在使用 Java 1.7 更新 7。

Oracle 有[一些信息](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm)，但它似乎散落在各处。Intellij 几乎可以完成这项工作，但我收到以下错误：

```
java.lang.NoClassDefFoundError: javafx/application/Application 
```

这似乎是说我需要告诉 java jfxrt.jar 在哪里......如果我将此 jar 添加到我的类路径信息中，以在 intellij - ctrl+shift+alt+s -> Artifacts -> Output Layout 选项卡中构建清单-> 类路径，然后我得到另一个错误：

```
 Could not find or load main class com.downloadpinterest.code.Main 
```

不过，必须在我的类路径中包含 jfxrt.jar 似乎很奇怪......

我也尝试过创建一个 ant 脚本，但我觉得 IntelliJ 已经完成了 90% - 我只需要一些帮助来弄清楚为什么我需要包含 jfxrt.jar，以及为什么我的 Main 类没有找到（我猜我需要以某种方式将它添加到类路径中？）。

谁能告诉我发生了什么？我之前有一个基本的 gui，它工作得很好，但是 JavaFX 似乎让生活变得复杂了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T09:40:19.073

您的假设是正确的，您需要将 JavaFX 添加到类路径中。
它位于`[JDK]/jre/lib/jfxrt.jar`。

要在运行时提供 JavaFX，您可以将它与您的应用程序捆绑在一起，如本[Oracle 指南中所示，](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm) *或者* 使 Java 7 Update 6 成为您的应用程序的要求，然后`[JAVA_HOME]/lib/jfxrt.jar`在应用程序方便时尽早添加到类路径中。

第一个选项意味着您需要做更多的工作，但绝对确保所有用户都拥有相同版本的库 - 您也可以在使用 JRE 时捆绑 JRE。第二个版本不提供这种确定性，但更容易实现。

作为第二个选项的变体 - 如果您实际上可以捆绑 JRE - 您也可以将其捆绑在您的发行版中，然后包含一个 shell-scripts/batch-file/executable-wrapper 以使您的程序使用它。这样，您可以从选项 I 中获得所有确定性，而选项 II 只会适度提高难度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-30T09:05:50.953

我有同样的问题。但我发现这篇博文：[在 IntelliJ IDEA 12.1 中打包 JavaFX 2 应用程序](http://blogs.jetbrains.com/idea/2013/03/packaging-javafx-2-applications-in-intellij-idea-121/)，展示了如何在 Intellij 12.1 中执行此操作

显然 IntelliJ 有能力生成一个特殊的“JavaFX 应用程序”工件。它会自动将所需的所有内容捆绑到您的 jar 文件中。

# javascript - 如何在jquery中的未命名函数上调用（）？

> ID：12237270
> 
> 赞同：1
> 
> 时间：2012-09-02T15:35:36.503
> 
> 标签：javascript, jquery, function

假设我有 button `#click`，

并假设我将点击事件绑定如下：

```
$('#click').click(function(){
   alert('own you'+'whatever'+$(this).attr('href'));
}); 
```

但我想`this`引用其他一些元素，比如说`#ahref`.

如果它是一个命名函数，我会简单地按名称引用它：

```
foo.call('#ahref'); 
```

`.call()`但是，如果该函数被称为内联并且没有名称，我该如何使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:38:54.767

您可以使用[`proxy`](http://api.jquery.com/jQuery.proxy/)函数来更改上下文：

```
$('#click').click($.proxy(function() {
    alert('own you'+'whatever'+$(this).attr('href'));
}, $('#ahref'))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:38:22.357

您不能强制 jQuery 使用 jQuery`this`想要的值以外的任何值调用函数。也就是说，您可以向 jQuery 传递一个函数，该函数通过以下方式调用您的`this`函数`.bind()`：

```
$('#click').click(function() {
  // whatever
}.bind(someObject)); 
```

Function 原型上的`.bind()`方法返回一个函数，该函数使用您传递的对象调用原始函数（您的匿名事件处理程序）作为`this`. 它在较新的浏览器中，[在 Mozilla 文档站点上有一个 shim。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

*编辑*- 或者查看@dfsq 的答案，涉及`$.proxy()`jQuery 本身的类似功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:38:14.923

也许我遗漏了一些东西，但是是什么阻止您直接访问其他元素？

```
$('#click').click(function(){
   alert('own you'+'whatever' + $('#ahref').attr('href'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T15:38:46.620

不是 100% 确定你在追求什么，但你可以像这样绑定上下文：

```
$('#click').click(function(){
   alert('own you'+'whatever'+this.attr('href'));
}.bind($('#ahref'))); 
```

# node.js - 为什么将全局变量分配给节点js中回调函数内的值在控制台中返回未定义？

> ID：12237271
> 
> 赞同：1
> 
> 时间：2012-09-02T15:36:04.587
> 
> 标签：node.js, callback

举这个例子

```
var s;
cb = function(error,result){
s = result;
}
memcached.get('hellow',cb);
console.log(s); 
```

这个给我`undefined`。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:11:17.440

变量**s**在回调函数中被初始化。只有当 memcached.get() 完成获取 'hellow' 的数据时，才会触发此回调函数。

Javascripty 依赖于事件循环机制。这意味着 javascript 运行时将继续执行脚本，直到它到达末尾，而不会阻止任何回调的发生。

因此，在您的示例中，javascript 运行时将执行**console.log(s)****memcached.get('hellow',cb)**行之后立即行，而不会阻塞。因此，仅当**cb**在最后一行之前执行时，您的情况下的 console.log(s) 才会打印有效值（除**undefined之外）。**

 **请移行**console.log(s)**请在回调函数中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:43:10.523

该`console.log(s);`行在`cb`函数执行之前执行，因为直到可用时才`cb`调用。这是 node.js 中任何 I/O 操作都会发生的经典异步。`memcached.get``result`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T15:46:51.680

您需要`console.log`在定义后执行，`s`因为它是异步的：

```
var s;
cb = function(error,result){
    s = result;
    console.log(s);
}
memcached.get('hellow',cb); 
```**

# linux - .so、.la 和 .a 库文件有什么区别？

> ID：12237282
> 
> 赞同：268
> 
> 时间：2012-09-02T15:38:10.977
> 
> 标签：linux, shared-libraries, static-libraries, ld

我知道一个`.so`文件是一种动态库（很多线程可以共享这样的库，所以不需要在内存中拥有多个副本）。`.a`但是和有什么区别`.la`？这些都是静态库吗？

如果动态库比静态库有很大的优势，为什么还有很多静态库？我什么时候应该尝试将代码构建到`.so`or中`.a`？

```
[mirror@home ins_openvpn]$ ls lib/openvpn/plugins/ -l
total 96
-rw-r--r-- 1 mirror mirror 22892 Sep  2 23:25 openvpn-plugin-auth-pam.a
-rwxr-xr-x 1 mirror mirror   931 Sep  2 23:25 openvpn-plugin-auth-pam.la
-rwxr-xr-x 1 mirror mirror 23621 Sep  2 23:25 openvpn-plugin-auth-pam.so
-rw-r--r-- 1 mirror mirror 17228 Sep  2 23:25 openvpn-plugin-down-root.a
-rwxr-xr-x 1 mirror mirror   932 Sep  2 23:25 openvpn-plugin-down-root.la
-rwxr-xr-x 1 mirror mirror 18805 Sep  2 23:25 openvpn-plugin-down-root.so 
```

* * *

## 回答 #1

> 赞同：350
> 
> 时间：2012-09-02T16:16:29.240

`.so`文件是**动态库**。后缀代表“共享对象”，因为与库链接的所有应用程序都使用相同的文件，而不是在生成的可执行文件中制作副本。

`.a`文件是**静态库**。后缀代表“存档”，因为它们实际上只是原始 .o 目标文件的存档（使用`ar`命令制作——它的前身`tar`现在仅用于制作库）。

`.la`files 是**GNU "libtools" 包**用来描述组成相应库的文件的文本文件。您可以在以下问题中找到有关它们的更多信息：[什么是 libtool 的 .la 文件？](https://stackoverflow.com/questions/1238035/what-is-libtools-la-file-for)

静态库和动态库各有利弊。

Static pro：用户始终使用您在应用程序中测试过的库版本，因此不应该出现任何令人惊讶的兼容性问题。

静态问题：如果问题在库中得到修复，您需要重新分发应用程序以利用它。但是，除非它是用户可能自行更新的库，否则您可能仍需要这样做。

Dynamic pro：您的进程的内存占用更小，因为用于库的内存在使用该库的所有进程中摊销。

Dynamic pro：库可以在运行时按需加载；这对插件有好处，因此您在编译和安装软件时不必选择要使用的插件。可以即时添加新插件。

动态缺点：有人尝试安装应用程序的系统上可能不存在该库，或者他们的版本可能与应用程序不兼容。为了缓解这种情况，应用程序包可能需要包含库的副本，以便在必要时安装它。包管理器通常也可以缓解这种情况，包管理器可以下载和安装任何必要的依赖项。

动态缺点：链接时间优化通常是不可能的，因此在高性能应用程序中可能会影响效率。[请参阅WPO 和 LTO](https://en.wikipedia.org/wiki/Interprocedural_optimization#WPO_and_LTO)的 Wikipedia 讨论。

动态库对于系统库特别有用，例如`libc`. 这些库通常需要包含依赖于特定操作系统和版本的代码，因为内核接口已经改变。如果您将程序与静态系统库链接，它将仅在编写此库版本的操作系统版本上运行。但是如果您使用动态库，它会自动选择安装在您运行的系统上的库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-07-14T09:41:45.777

除了给出的答案之外，还要说静态库就像一个目标文件的集合。当调用静态库中的函数或其他任何内容时，链接器会在库中搜索引用的项，并将定义引用项的目标文件添加到可执行文件中。另一方面，共享库就像一个由所有其他目标文件组成的单个大目标文件。因此，如果您调用共享库中的符号，则可执行文件中会引用所有目标文件。

# python - 如何迭代列表的笛卡尔积

> ID：12237283
> 
> 赞同：16
> 
> 时间：2012-09-02T15:38:10.697
> 
> 标签：python, list, for-loop, loops

我想使用具有任意数量元素的 3 个（或任意数量）列表在 for 循环中进行迭代，例如：

```
from itertools import izip
for x in izip(["AAA", "BBB", "CCC"], ["M", "Q", "S", "K", "B"], ["00:00", "01:00", "02:00", "03:00"]):
    print x 
```

但它给了我：

```
('AAA', 'M', '00:00')
('BBB', 'Q', '01:00')
('CCC', 'S', '02:00') 
```

我想：

```
('AAA', 'M', '00:00')
('AAA', 'M', '01:00')
('AAA', 'M', '02:00')
.
.

('CCC', 'B', '03:00') 
```

其实我想要这个：

```
for word, letter, hours in [cartesian product of 3 lists above]
    if myfunction(word,letter,hours):
       var_word_letter_hours += 1 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-02T15:39:43.457

您想使用列表的[产品](http://docs.python.org/library/itertools.html#itertools.product)：

```
from itertools import product

for word, letter, hours in product(["AAA", "BBB", "CCC"], ["M", "Q", "S", "K", "B"], ["00:00", "01:00", "02:00", "03:00"]): 
```

演示：

```
>>> from itertools import product
>>> for word, letter, hours in product(["AAA", "BBB", "CCC"], ["M", "Q", "S", "K", "B"], ["00:00", "01:00", "02:00", "03:00"]):
...     print word, letter, hours
... 
AAA M 00:00
AAA M 01:00
AAA M 02:00
AAA M 03:00
...
CCC B 00:00
CCC B 01:00
CCC B 02:00
CCC B 03:00 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-02T15:43:17.020

使用`itertools.product`：

```
import itertools

for x in itertools.product(["AAA", "BBB", "CCC"],
                           ["M", "Q", "S", "K", "B"],
                           ["00:00", "01:00", "02:00", "03:00"]):
    print x 
```

输出：

```
('AAA', 'M', '00:00')
('AAA', 'M', '01:00')
...
('CCC', 'B', '02:00')
('CCC', 'B', '03:00') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T09:24:05.180

只是为了记录，另一个解决方案只是嵌套`for`循环：

```
for a in ["AAA", "BBB", "CCC"]:
    for b in ["M", "Q", "S", "K", "B"]:
       for c in ["00:00", "01:00", "02:00", "03:00"]:
           x = (a, b, c)
           # Use x ... 
```

在我看来，这比必须找出/记住`itertools.product`函数的作用要清楚得多。使用它的唯一充分理由是如果您处于更抽象的情况；例如，您需要将迭代器传递给函数，而不是立即对其进行迭代，或者如果您有一个任意列表列表，您想要获取其笛卡尔积（在这种情况下，您可以使用`product(*lists)`）。

# matlab - 基频提取

> ID：12237286
> 
> 赞同：0
> 
> 时间：2012-09-02T15:38:20.557
> 
> 标签：matlab

我正在研究输入嗡嗡声的旋律（音高轮廓）提取。我正在尝试实现 praat 使用的算法。该算法使用自相关来获得候选 f0。我设法从原始音频（wav）创建帧（段）的自相关。但现在我被困在从自相关中提取候选 f0（最大值）。在 praat，他们使用 brent 算法提取了至少 4 个候选 f0。有人可以帮我实现布伦特算法以从自相关中提取最大值。谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:55:03.940

Brent's algorithm is a root-finding algorithm. So, in order to find maxima of your autocorrelation, I'd suggest to compute the first derivative (using Matlab's `diff()` function) and then find the roots in this sequence. The location of the roots should be a maximum or minimum of the autocorrelation.

Regarding Brent's algorithm itself: A Matlab implementation is available in the [German Wikipedia](http://de.wikipedia.org/wiki/Brent-Verfahren#Algorithmus_von_Brent_f.C3.BCr_Matlab).

# symfony - 在 ER 图中实现或

> ID：12237290
> 
> 赞同：0
> 
> 时间：2012-09-02T15:38:38.113
> 
> 标签：symfony, doctrine, entity-relationship

我有这些信息来绘制 ER 图。

一个企业生成文档，这些文档是和员工相关的，但是文档的种类很多。我只是无法得到这个 er 图的正确答案。

我的解决方案是：

Enterprise 1-M Document 文档 M-1 文档类型

如何根据文档类型更改 Document 表的属性？您认为解决此问题的最佳方法是什么？

我是否必须将所有文档属性放在文档类型表上？如果我们谈论的是document1，那么document 2的属性将为null？

我认为的另一个解决方案是：一个文档可以是具有不同属性的表格文档 1 或具有其他一些属性的表格文档 2 或具有其他一些属性的表格文档 3，等等，但我只是不知道如何显示这个在 ER - 图上。

我想以最好的方式解决它。

顺便说一句，我正在使用 Doctrine 和 Symfony2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:59:53.197

我看到（和理解）你的情况的方式：

“一个企业生成文档，这些文档是和员工相关的，但是文档的种类很多。”

**企业**编号、名称

**员工**ID、名字、姓氏、企业 ID（FK 到 Enterprise.id）

**文档**类型 ID、名称

**文档**id、内容、document_type_id（FK 到 DocumentType.id）

**SpecificDocument** id (FK to document.id), specificfield1, specificfield2

**SpecificDocument2** id (FK to document.id), specificfield3, specificfield4

**EmployeeDocument** employee_id（FK 到 Employee.id）、document_id（FK 到 Document.id）

您应该能够使用此信息生成您的 ER 图。

编辑 ：

但最好的方法是不使用 ER DB，而是使用 Document DB（例如：MongoDB）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:09:09.933

听起来文档类型是一种专业化的情况。如果你在做 ER 建模，你可以使用 Extended ER 的一个特性来直接表达专业化。加载以下 PDF 并向下导航到“专业化”以了解图表专业化的方式。

[http://www.sis.pitt.edu/~valeriab/1022-spring08/Chapter6.pdf](http://www.sis.pitt.edu/~valeriab/1022-spring08/Chapter6.pdf)

如果你正在设计一个关系数据库来实现你的 ER 模型，你需要学习一些技术，即类表继承和共享主键。这些技术中的每一种在 SO 中都有一个标签，以及许多有用的答案。

# c# - 如何在wpf中获取文本框的绑定

> ID：12237293
> 
> 赞同：2
> 
> 时间：2012-09-02T15:39:24.317
> 
> 标签：c#, wpf, binding

我想在 wpf 中获取控件属性的绑定（如 setBinding（Dp，Binding））。之后，我想为那个添加更多绑定，比如在代码中添加validationRule（而不是在xaml中）。任何人都可以用示例代码回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T16:42:29.743

```
BindingExpression bindingExpression = c_textBox1.GetBindingExpression(TextBox.TextProperty);
    Binding parentBinding = bindingExpression.ParentBinding;

    //make new MultiBinding expression and add parentBinding into it.
     MultiBinding bindingList = new MultiBInding();
     bindingList.Bindings.Add(parentBinding);
    c_textBox1.SetBinding(TextBox.TextProperty, bindingList); 
```

# netty - 是什么导致了netty中的这种内存泄漏

> ID：12237297
> 
> 赞同：0
> 
> 时间：2012-09-02T15:39:56.720
> 
> 标签：netty

我有两个服务器进程，它们通过两个套接字连接进行通信。两个连接都只能单向发送消息。（一个用于 c->s，一个用于 s->c）。

服务端和客户端分别用 OioServerSocketChannelFactory / OioClientSocketChannelFactory 初始化。

经过一些分析，发现这三个类的对象从未释放（在双方）。我不直接使用这些类，我只保留对两个 Channel 对象的引用。

```
java.util.concurrent.LinkedTransferQueue$Node 1005351 32171232  
org.jboss.netty.channel.Channels$2 1005351 24128424  
org.jboss.netty.channel.socket.ChannelRunnableWrapper 1005351 48256848 
```

我的代码中泄漏的哪种对象可能导致这些对象无法释放？

更新：环境，jdk7u7，centos6 64bit，netty 3.5.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:23:07.300

这是因为 Netty Oio impl 中的一个错误。该错误已作为 3.5.4.Final 的一部分得到修复。所以请升级到 3.5.4.Final 或 3.5.5.Final。

见[1]。

[1] [https://github.com/netty/netty/issues/520](https://github.com/netty/netty/issues/520)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:24:33.103

这是一个很好的机会，这是一个网络错误。在我将 OioServerSocketChannelFactory / OioClientSocketChannelFactory 更改为 NioServerSocketChannelFactory / NioClientSocketChannelFactory 后，问题就消失了。

# java - 我们如何区分客户端套接字上服务器套接字连接关闭的异常？

> ID：12237299
> 
> 赞同：1
> 
> 时间：2012-09-02T15:40:00.267
> 
> 标签：java, sockets

我想区分客户端套接字上服务器连接关闭的异常，例如服务器套接字是否由于空闲超时而关闭，该原因必须在客户端生成为空闲超时异常。同样对于连接失败如连接失败异常等等。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:37:13.723

最好的方法是让服务器向您发送一条消息，说明它关闭连接的原因。服务器不会关闭默认处于空闲状态的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T21:17:29.377

如果服务器正确关闭了套接字，那么客户端只有一个可能的异常，而不是客户端必须捕获和找出的一系列不同的异常。只有一个 EOS 指示：read() 返回 -1，readLine() 返回 null，readXXX() 对任何其他 X 抛出 EOFException。

如果由于网络故障而断开连接，则客户端可能会收到带有文本“连接重置”的 IOException。如果连接保持正常但服务器没有发送数据并且客户端有读取超时，客户端将收到 SocketTimeoutException。这些都不意味着服务器已经关闭了连接（尽管服务器可能会导致连接重置，我不会在这里记录）。

如果您需要知道服务器关闭套接字的原因，它必须通过消息告诉您。

# c# - Windows Phone 7 - 通过代码显示“SIM 应用程序”页面

> ID：12237305
> 
> 赞同：0
> 
> 时间：2012-09-02T15:40:24.817
> 
> 标签：c#, windows-phone-7, mvvm, show

如何通过代码显示 SIM 应用程序页面？我在Tasks中搜索过，但没有发现任何有用的东西！感谢您关注我的问题^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:39:59.243

如果没有符合您要求的任务，则无法启动操作系统的这一部分。

# java - 如果我知道它的名称，如何投射对象？

> ID：12237311
> 
> 赞同：2
> 
> 时间：2012-09-02T15:41:24.580
> 
> 标签：java, android, reflection

我在字符串变量***模型***中有类名，所以我想将一个对象转换为加载的类 ba 反射的类型

我正在加载的类名是“通知”，它是用字符串变量***模型编写的***

```
String model = "Notification";   
Class<?> cls = Class.forName("biznea.zredzic.pojo."+model); 
```

所以我有抽象类`PojoAbstract`，它扩展了所有 pojo 类，因为它是`cls`或实际上是`Notification.class`

```
public class Notification extends PojoAbstract{...} 
```

现在我想把它转换成`cls`真正的类类型*（通知）*

```
WHAT_TO_PUT_HERE po = (WHAT_TO_PUT_HERE) gson.fromJson(json.toString(), cls); 
```

我不想`po`成为`PojoAbstract`类型 我希望它成为`Notification`类型

我希望我很清楚：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:44:08.730

你应该使用的方法[`public T cast(Object obj)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)。`Class<T>`

```
Object o = cls.cast(gson.fromJSon(json.toString(), cls)); 
```

但是您不能直接分配给静态声明，因为在编译时您不会知道类型。您必须尽可能保持声明的非特定性，因为您不能在编译时假设任何内容。

# android - Android 测试自动化工具

> ID：12237314
> 
> 赞同：5
> 
> 时间：2012-09-02T15:41:51.087
> 
> 标签：android, testing, automated-tests

我需要一个工具来自动测试我的 android 应用程序。特别是我想涵盖以下测试用例：

*   发送 10 条短信
*   拍张照片
*   拨打 10 次电话

它更像是一个脚本，可以让我记录动作。

有什么提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T16:34:23.910

你应该看看[Monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

我很确定这正是您正在寻找的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T16:14:42.487

您可以查看三个选项：[Robotium](http://code.google.com/p/robotium/)、[Scirocco](http://code.google.com/p/scirocco/)和[Robolectric](http://robolectric.org)。

我发现它们对基本操作很有用，只要你明确说明应该发生什么以及点击什么等等。我不能说他们是否可以使用内置的短信应用程序发送短信，很可能你将需要以某种方式构建这种自动化，甚至[通过模拟器发送短信](https://stackoverflow.com/questions/4325669/sending-and-receiving-text-using-android-emulator)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T17:40:11.467

Android 测试框架呢？ [http://developer.android.com/tools/testing/index.html](http://developer.android.com/tools/testing/index.html)

# ruby-on-rails - Refinerycms 未定义方法“title_with_meta”

> ID：12237320
> 
> 赞同：0
> 
> 时间：2012-09-02T15:42:25.627
> 
> 标签：ruby-on-rails, ruby, refinerycms

我正在将我的 refinerycms 项目迁移到生产环境，现在我遇到了错误

```
 NoMethodError in Refinery/admin/pages#index

Showing /var/www/vhosts/tomstestsite.us/PersonalTrainingKT/app/views/refinery/admin/pages/_page.html.erb where line #10 raised:

undefined method `title_with_meta' for #<Refinery::Page:0x000000083d5538>

Extracted source (around line #10):

7:     <% end %>
8: 
9:     <span class='title <%= 'toggle' if page.children.present? %>'>
10:       <%= page.title_with_meta.html_safe %>
11:       <% if Refinery.i18n_enabled? and Refinery::I18n.frontend_locales.many? %>
12:         <span class='preview'>
13:           <% page.translations.each do |translation| %> 
```

什么会导致这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:35:54.660

该错误是由 Refinery::Page 没有定义 title_with_meta 方法引起的。不确定您使用的是什么版本，但截至[本次提交](https://github.com/resolve/refinerycms/commit/7dca4374087b067f7b6fa562c8123db8a0e5526e)，title_with_meta 已移至[页面助手](https://github.com/resolve/refinerycms/blob/master/pages/app/helpers/refinery/admin/pages_helper.rb#L28-49)。

# javascript - 如何在ie7或更高版本中设置密码字段的占位符

> ID：12237322
> 
> 赞同：-3
> 
> 时间：2012-09-02T15:42:42.083
> 
> 标签：javascript, html

我需要在密码字段中显示一些默认文本，例如“输入您的密码”。由于我需要支持 IE7，所以 placeholder 属性在这里没有解决方案。我使用了 onfocus 和 blur 但它在 Internet Explorer 中不起作用。

```
<input type="text" value="Enter the password" id="fieldPassword" onfocus="showPass()" onblur="hidePass()"/> 
```

```
function showPass()
{
    var pass = document.getElementById('fieldPassword').value;
    if((pass=="Enter the password")||pass=="")
    {
        document.getElementById('fieldPassword').type="password";
        document.getElementById('fieldPassword').value="";   
    }
    else
    {
    }
}

function hidePass()
{
    var pass = document.getElementById('fieldPassword').value;
    if(pass=="")
    {
        document.getElementById('fieldPassword').type="text";
        document.getElementById('fieldPassword').value="Enter the password";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:45:00.513

为了实现这一点，您必须使用

```
<input type='text' value='Enter your password' /> 
```

在单击/聚焦时，您将输入元素的类型更改为

```
<input type='password' /> 
```

如果值没有变化，则在模糊时将其更改回文本类型。您也可以使用显示/隐藏的 2 个不同输入来实现此目的，但在这种情况下，您必须触发对新可见元素的关注，并且您不能对两者使用相同的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:10:59.317

见[http://jsfiddle.net/9GTcL/2/](http://jsfiddle.net/9GTcL/2/)

HTML：

```
<div class="placeholder">
    <input type="password" id="pswdInput" />
    <input type="text" value="Enter password..." id="textInput" />
</div> 
```

JavaScript：

```
var text=document.getElementById('textInput'),
    pswd=document.getElementById('pswdInput');
text.onfocus=pswd.onfocus=function(){
    text.style.display='none';
    pswd.focus();
}
pswd.onblur=function(){
    if(pswd.value==''){
        text.style.display='block';
    }
} 
```

CSS：

```
.placeholder{
    position:relative;
}
.placeholder>#textInput{
    position:absolute;
    top:0;
    left:0;
}
.placeholder>input{
    width:140px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T16:28:11.890

这是我用来在 IE 中使用占位符的 js 文件，只需[下载](http://www.mediafire.com/?ug3sj9zafbbaxmj)它并将其链接到页面的标题中，然后在结束正文标记之前添加这段代码：

```
<script type="text/javascript">$('input[placeholder], textarea[placeholder]').placeholder();</script> 
```

# c# - sqlserver 连接字符串中的用户名、密码和其他参数

> ID：12237330
> 
> 赞同：3
> 
> 时间：2012-09-02T15:44:05.217
> 
> 标签：c#, .net, sql-server-ce, connection-string, sql-server-express

我是 C# 和 .net 的新手，只使用过 php 和 mysql。
要使用 c# 连接到 sqlserver express（在 Visual Studio 2010 中），我们应该提供一个连接字符串，该字符串具有我在网络上特别是在[connectionstrings](http://connectionstrings.com)中找到的多种格式。
例如标准格式：
“Data Source=myServerAddress;Initial Catalog=myDataBase;UserId=myUsername;Password=myPassword;”

什么是用户名和密码？我在哪里可以找到它们？它们是像 php mysql 还是其他东西中的“root”和“”？

如前所述，我在 Visual Studio 2012 的 sqlserver express 中创建了一个名为“db.sdf”的数据库。

我真的很困惑。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:47:47.827

如果您的数据库扩展名是`SDF`，您正在创建`SQL Server CE`（*精简版*）数据库文件。使用此连接字符串

```
Data Source=" + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) + "\\MyData.sdf;Persist Security Info=False; 
```

或者

```
Data Source=MyData.sdf;Persist Security Info=False; 
```

**[更多关于这个链接。](http://www.connectionstrings.com/sql-server-2005-ce)**

**更新 1**

您需要`System.Data.SqlServerCe`命名空间。

```
SqlCeConnection conn = new SqlCeConnection("Data Source=\\Mobile\\Northwind.sdf;");
conn.Open();
.
.
.
conn.Close(); 
```

**来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection%28v=VS.100%29.aspx)：**
**命名空间：** System.Data.SqlServerCe
**程序集：** System.Data.SqlServerCe（在 system.data.sqlserverce.dll 中）

# php - 在重复调用方法时增加一个计数器变量，PHP

> ID：12237334
> 
> 赞同：3
> 
> 时间：2012-09-02T15:44:44.157
> 
> 标签：php, oop

```
<html>
//index.php

<form action="" method="post"> 
  <label for="item">Item: </label>
    <select name="item">
        <option value="fruit tea">Fruit Tea</option>
         <option value="strawberries">Strawberries</option>
         <option value="coffee">Coffee</option>
    </select><br />

    <label for="qty">Qty: </label>
        <input type="text" name="qty" />
        <input type="submit" name="submit" value="submit" />
</form>

<?php

    @$qty = $_POST['qty'];
    @$item = $_POST['item'];

    $co = new Checkout( $pricing_rules );
    print $co->scan( $item ). ' has been scanned '.$co->increment(). ' times';

?>
</html>

<?php

/**
* Description of Checkout
*
* @author cookie
*/
class Checkout {

private $pricing_rules = array();
private $pcode;
public $item;

public function __construct( array $pricing_rules ) {
    $this->pricing_rules = $pricing_rules;
}

public function scan( $item ) {

    $this->increment();
    return $item;
}

private function prod_code( $pcode ) {

    $this->pcode = $pcode;
}

public function increment() {
    static $count = 0;
    $count++;
    return $count;
}

public function total() {

}

}

?> 
```

它应该做什么...

如果我点击提交按钮四次，说从下拉列表中选择草莓。该脚本应打印到屏幕上：

草莓已被扫描 1 次

草莓已被扫描 2 次

草莓已被扫描 3 次

草莓已被扫描 4 次

ETC....

随着`$count`增量的跟踪。

它实际上做了什么：

它打印：

不管我按提交多少次，草莓都被扫描了 2 次。并停在那里。我在这里遗漏了一些东西。

我看到它在做什么 - 在页面加载时，通过这一行对 increment() 进行了两次调用：

```
print $co->scan( $item ). ' has been scanned '.$co->increment(). ' times'; 
```

我试过了：

```
 if($_SERVER['REQUEST_METHOD'] == 'POST') $co->increment(); 
```

此外，这会将 $count 增加一，但停在那里。我在这方面有点挣扎..

帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:49:22.890

`static`变量仅对当前脚本执行是静态的。每次重新加载页面（提交时）时，您的变量都会丢失。为此，您需要将其存储在`$_SESSION`. 事实上，有一个与您在[`$_SESSION`基本使用手册中尝试的非常相似的示例。](http://us3.php.net/manual/en/session.examples.basic.php)

```
// Call session_start() at the beginning of your script...
session_start();

// And modify your method to store count in the $_SESSION.
public function increment() {
    // initialize it if not already initialized
    $_SESSION['count'] = !isset($_SESSION['count']) ? 0 : $_SESSION['count'];
    $_SESSION['count']++;
    return $_SESSION['count'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:52:45.583

Every time you submit a form, it's making a new HTTP request to the server, and the script runs afresh. Variables do not retain their values from one run to the next.

If you want to save variables across page reloads, you need to use session variables as Michael Berkowski suggests. However, that's just within a browser session. If you need longer retention, you can use cookies, although the user can delete these. Finally, if you want real permanent memory, you can use a database.

The database is also appropriate if you need to combine data from multiple users. E.g. if user A scans an item and then user B scans the item, and you want to display the combined total.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T16:06:30.213

除了 Michael Berkowski 的回答之外，我还想指出其他一些事情。`$counter`如果它应该是一个*对象*字段，为什么要在函数中声明它。既然它应该是一个*对象*场，那为什么`static`呢？如果它是静态的，它将计算`Checkout`给定点的所有实例。您也可以在内部
调用一次，然后再次调用 `increment()``scan()`

```
print $co->scan( $item ). ' has been scanned '.$co->increment(). ' times';
//         ^ here $counter == 1                       ^ and here $counter == 2 
```

**添加**
这样的东西对我来说更有意义

```
class Checkout{

    private $counter;

    public __construct(){
        $this->counter = 0;
        // ......
    }
    // ..... 

    public function scan(){
        // ....
        $this->counter++;
    }

    public function getCounter(){
        $return $this->counter;
    }

} 
```

# asp.net-mvc-3 - 如何处理模型编辑上的远程属性？ASP.Net MVC3

> ID：12237338
> 
> 赞同：0
> 
> 时间：2012-09-02T15:45:21.763
> 
> 标签：asp.net-mvc-3, model, controller, action, remote-validation

我在我的模型中使用远程属性来检查重复的页面标题，如下所示

```
public class Page
{
  [Remote("CheckDuplicate", "Page", ErrorMessage = "Title already taken")]
  public string Title { get; set; }
} 
```

在控制器中，我根据“**检查”结果返回****JsonResult**数据，如下所示：

 **```
public JsonResult CheckDuplicate(string Title)
{
   var result = db.Pages.Where(a => a.Title == Title).Count() == 0;
   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

这在**创建**操作中运行良好，但问题是，它限制我编辑现有页面，因为它正在检查相同的查询。

如何解决这个问题呢？请给我一些建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:15:15.420

您的问题类似于：[ASP.NET MVC 3 Remote validation to allow original value](https://stackoverflow.com/questions/4778151/asp-net-mvc-3-remote-validation-to-allow-original-value)

我认为诀窍是`AdditionalFields`在模型中使用远程验证属性的参数，并将其与视图中的隐藏字段结合起来——就像上面的 StackOverflow 帖子中所建议的那样。然后，您可以将“初始”值与新值一起发送到远程验证方法，并使用这两个参数进行唯一性检查。

如何解决这个问题的另一个例子可以在这里找到：[https ://stackoverflow.com/a/4756796/700926](https://stackoverflow.com/a/4756796/700926)

`AdditionalFields`可以在此处找到文档：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.remoteattribute.additionalfields (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.remoteattribute.additionalfields(v=vs.98).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-03T11:39:52.140

我觉得应该是这样

您必须在编辑页面中有一个隐藏字段，`InitialUsername`并且模型上的`Remote`属性必须包含`User``AdditionalFields``InitialUsername`

**控制器**

```
 [HttpPost]
    public JsonResult doesUserNameExist(string UserName,string InitialUsername)
    {
        User user=null;
        //Check if user already exists
        if (UserName.Equals(InitialUsername)==false)
        {
         user = db.Users.Where(u => u.USERNAME == UserName).FirstOrDefault();
        }
        //

        return Json(user == null);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T06:55:22.703

只需在要禁用远程验证的地方添加 Html 属性，例如

```
 @Html.EditorFor(model => model.CODE, 
                    new { 
                          htmlAttributes = new { 
                                                 @readOnly = true, 
                                                 @data_Val = false } }) 
```

如果您存储了它，还可以查看 HiddenField 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T05:39:14.530

我是使用以下步骤解决的：在我看来，我把`@Html.Hidden("InitialUserName", Model.UserName)`；

在模型上放置：`[Remote("IsUserNameUsed", "User", AdditionalFields="InitialUserName")]`

在 Controller actionmethod 中编写 actionmethod 如下：

```
 public JsonResult IsUserNameUsed(string UserName, string InitialUserName){
    bool isExist = true;
    if(UserName  != string.empty && InitialUserName == "undefined"){
    var isexist= db.model.where( x=>x.UserName == UserName).single();
    if(isexist != string.empty){
    bool isExist = false;
    }

    if(UserName  != string.empty && InitialUserName != "undefined"){
    var isexist= db.model.where( x=>x.UserName == UserName && x.UserName != InitialUserName ).single();
    if(isexist != string.empty){
    bool isExist = false;
    }    
return Json(isExist , JsonRequestBehavior.AllowGet);  
}    
} 
```**

# python - 更改列表列表中的项目

> ID：12237342
> 
> 赞同：1
> 
> 时间：2012-09-02T15:46:40.853
> 
> 标签：python, list

> **可能重复：**
> [关于双循环的简单python代码](https://stackoverflow.com/questions/12236148/simple-python-code-about-double-loop)

我遇到了一个众所周知的问题，即更改列表中的一项。我需要使用固定大小的列表列表。

如果我使用：

```
In [21]: a=[[2]*2]*3

In [22]: a
Out[22]: [[2, 2], [2, 2], [2, 2]]

In [23]: a[0][0]=1

In [24]: a
Out[24]: [[1, 2], [1, 2], [1, 2]] 
```

但是，如果我按以下方式定义列表列表，它会起作用：

```
In [26]: a = [
   ....: [2,2],
   ....: [2,2],
   ....: [2,2],
   ....: ]

In [27]: a   
Out[27]: [[2, 2], [2, 2], [2, 2]]

In [28]: a[0][0]=1

In [29]: a
Out[29]: [[1, 2], [2, 2], [2, 2]] 
```

对我来说，第 22 行和第 27 行看起来是一样的。那么有什么区别呢？

有人可以解释一下如何解决这个问题，特别是如何更改更改列表列表中单个项目的代码吗？如果这是不可能的，有什么建议可以转移到不同的数据结构吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:58:00.560

There is a fundamental difference in the 2 ways you defined the matrix in both code samples. In the first (line 21) when you multiply the outer list by 3 you actually multiply the references to the inner list.

Here's a parameterized example:

```
a = [2,2]
b = [a] * 3
b => [a, a, a] => [[2,2], [2,2], [2,2]] 
```

As you can see the numerical representation of `b` is what you would expect, but it actually contains 3 references to `a`. So if you change either of the inner lists, they all change, because they are actually the same list.

Instead of multiplication you need to clone the lists doing something like this

```
new_list = old_list[:] 
```

or

```
new_list = list(old_list) 
```

In the case of nested lists, this can be done using loops.

# templates - 在 AngularJS 中加载模板，当前页面除外

> ID：12237348
> 
> 赞同：0
> 
> 时间：2012-09-02T15:47:25.833
> 
> 标签：templates, angularjs

假设我有 2 个 HTML 页面，`foo.html`并且`bar.html`.

内部`foo.html`：

```
<a href="/foo.html" class="selected">Open Foo</a>
<a href="/bar.html">Open Bar</a>
<!-- shared content -->
<div id="content">Nested HTML specific to Foo</div>
<!-- shared content --> 
```

内部`bar.html`：

```
<a href="/foo.html">Open Foo</a>
<a href="/bar.html" class="selected">Open Bar</a>
<!-- shared content -->
<div id="content">Nested HTML specific to Bar</div>
<!-- shared content --> 
```

正如预期的那样，当我单击任一页面中的链接时，它将打开相应的页面。现在，我想“AngularJSify”这个，这样点击一个链接只会更新`div#content`. 我试过这个：

```
$routeProvider
.when('/foo.html', {templateUrl:'/foo.html?onlyContent=true'})
.when('/bar.html', {templateUrl:'/bar.html?onlyContent=true'}) 
```

```
<div id="content" ng-view>Nested HTML specific to Foo (or Bar, depending which page you're in)</div> 
```

但是打开`foo.html`也会加载`foo.html?onlyContent=true`这是不必要的，因为`foo.html`已经有内容了！

您可能会问，“为什么不使用 empty `div#content`？” 因为我想（1）减少加载额外文件，以及（2）即使 JS 被禁用也使内容可用。

在 Backbone.js 中，我可以使用：

```
Backbone.history.start({pushState:true, silent:true}); 
```

这基本上意味着，“如果页面已经加载，不要再次调用路由。” 我如何在 AngularJS 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:00:53.210

内部`foo.html`：

```
<a href="/foo.html" class="selected">Open Foo</a>
<a href="/bar.html">Open Bar</a>
<div id="defaultTemplate">Nested HTML specific to Foo</div> <!-- note this -->
<div id="content" ng-view></div> 
```

内部`bar.html`：

```
<a href="/foo.html">Open Foo</a>
<a href="/bar.html" class="selected">Open Bar</a>
<div id="defaultTemplate">Nested HTML specific to Bar</div> <!-- note this -->
<div id="content" ng-view></div> 
```

在 JavaScript 中：

```
function routing(path, controller, template) {
    var route = {templateUrl:'/templates/' + path, controller:controller};

    if (path === window.location.pathname) {
        var defaultTemplate = $('#defaultTemplate');

        route = {template:defaultTemplate.html(), controller:controller};
        defaultTemplate.remove();
    }

    $routeProvider.when(path, route);
} 
```

Essentially means, "if the route you're opening is the same with the path in address bar, use template from current page instead".

# python - 选择 3d ndarray 中的第一列

> ID：12237353
> 
> 赞同：2
> 
> 时间：2012-09-02T15:47:47.133
> 
> 标签：python, select, numpy, multidimensional-array

我有一个关于 python 的简单问题。我不想遍历 3D 的第一行`ndarray`，而是想选择整个列。所以让我们说：而不是：

```
print test[0][20][33]
print test[1][20][33]
... 
```

我想放一些类似的东西：

```
 print test[:][20][33] 
```

但这不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:54:19.937

Put all the terms inside the square brackets:

```
>>> import numpy as np
>>> v = np.array(np.arange(24)).reshape(2,3,4)
>>> v
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
>>> v[:, 1, 3]
array([ 7, 19]) 
```

.. although I'm not sure I'd call that the first column. You can easily shuffle the indices to get whatever you're after, though:

```
>>> v[0, :, 0]
array([0, 4, 8])
>>> v[1, 1, :]
array([16, 17, 18, 19]) 
```

[[relevant doc section on indexing]](http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c)

# c - 十进制到 BASE-26 表示

> ID：12237361
> 
> 赞同：0
> 
> 时间：2012-09-02T15:48:20.607
> 
> 标签：c, number-systems

我编写了将十进制数转换为相应字母表示的代码。

例子：

```
1: A
2: B
.
.
.
26: Z
27: AA
.
.
.
703: AAA 
```

这是我的方法：

```
void print(int n)
{
    if( n > 0 )
    {
        n--;
        print( n / 26 );
        printf( "%c", ( n % 26 ) + 'A' );
    }
} 
```

上面的代码[工作正常](http://ideone.com/tMBAE)。我可以在可读性方面对其进行优化吗？
最好的方法是什么？

现在，我想修改上面的代码，使其像这样工作：

```
0: A
1: B
.
.
.
25: Z
26: AA
.
.
.
702: AAA 
```

显而易见的方法是将输入的十进制数加 1 并将其传递给原始代码中的函数。如何修改第一个程序以使其适用于第二种情况而不添加 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:24:23.890

经过一些观察，我尝试了以下代码及其适用于`Case: 2`.

```
void print(int n)
{
    if(n < 26)
        printf("%c", n + 'A');
    else
    {
        print(n / 26 - 1);

        print(n % 26);
    }
} 
```

[请参阅此处](http://ideone.com/Qvlec)的输出。

# windows - 如何解开 SSDT 钩子并使它们远离？

> ID：12237363
> 
> 赞同：0
> 
> 时间：2012-09-02T15:48:32.320
> 
> 标签：windows, hook, rootkit

我正在研究一个rootkit并对其进行反转。我打算为这种rootkit编写我的anti-rk。rootkit挂钩了一些无法从用户模式中解脱出来的内核模式函数，或者如果我将它们从用户模式中解开，它们不会逃脱并且会回来。那么你有什么建议呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:25:32.443

有很多示例代码和开源项目可以做到这一点。您可以参考他们的来源以了解 SSDT 脱钩。几个例子：
[https ://code.google.com/p/arkitlib/](https://code.google.com/p/arkitlib/)
[https://code.google.com/p/oark/](https://code.google.com/p/oark/)

# java - 如何使用 GWT 闪烁浏览器窗口

> ID：12237366
> 
> 赞同：-1
> 
> 时间：2012-09-02T15:48:49.880
> 
> 标签：java, gwt, browser

我每 10 秒请求一次检查是否有新内容，如果有，我希望窗口闪烁，以便用户立即收到通知。我怎样才能在 GWT 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:01:50.323

如果我代替你，我想使用
**Server-Push(Reverse ajax)**，
**启用长轮询 Comet 的方法**。
不要通过刷新页面来惹恼用户..:) 这里的链接可以帮助你。

[GWT-彗星集成](http://code.google.com/p/gwt-comet/wiki/GettingStarted)

# perl - 如何在 Perl 中进行参数分配

> ID：12237368
> 
> 赞同：0
> 
> 时间：2012-09-02T15:48:56.693
> 
> 标签：perl, foreach, arguments

当使用以下命令调用 perl 脚本时：

`myPerlScript --myarg 10 --my2Darg 42x87`.

我如何做作业：

```
$myarg = 10;
$my2Darg_x = 42;
$my2Darg_y = 87; 
```

当且仅当`myarg`且`my2Darg`是有效参数？

我想我需要这样的东西：

```
#!/usr/bin/perl

foreach (@ARGV) {

    if ($_ eq '--myarg') {

        $myarg =
    }
    elsif ($_ eq '--my2Darg') {
        $my2Darg_x =
        $my2Darg_y =
    }
    else {

        print "Not valid argument!!";
    }
} 
```

如您所见，此代码不完整。请。帮助。

有没有一种简短的写法`if($_ eq 'text')`（是`if('text')`有效的 Perl 吗？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:17:22.313

检查`Getopt::Long`模块，它在核心上。

**脚本**

```
use strict;
use Getopt::Long;

my ($arg, $arg_2d);

# prepare format cmd string
GetOptions( "myarg=i" => \$arg, "my2Darg=s" => \$arg_2d);

unless ( $arg && $arg_2d && $arg_2d =~ m{\d+x\d+}i ) {

    print "Usage: $0 --myarg 10 --my2Darg 42x87 \n";
    exit 1;
}

my ($arg_2d_x, $arg_2d_y) = split 'x', $arg_2d;

printf "arg: %s \narg_2d_x: %s \narg_2d_y: %s\n", $arg, $arg_2d_x, $arg_2d_y; 
```

**输出**

```
arg: 10 
arg_2d_x: 42 
arg_2d_y: 87 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T15:54:47.097

`==` is the numerical comparison operator. Use `eq` to compare strings (see [equality operators](http://perldoc.perl.org/perlop.html#Equality-Operators) in the manual).

Once you have the string, you can use [`split`](http://perldoc.perl.org/functions/split.html) to get a list of the two values.

You should probably use one of the [getopt modules](https://metacpan.org/search?q=getopt) instead of looping over `@ARGV`.

# asp.net-mvc-3 - 为什么这段代码会抛出 NULL 异常

> ID：12237371
> 
> 赞同：0
> 
> 时间：2012-09-02T15:50:01.190
> 
> 标签：asp.net-mvc-3, file

我在选择文件的地方有以下代码。但无论我选择什么文件，我都会得到以下异常：

> 无法将值 NULL 插入 ImgPath 列。

似乎文件没有将任何值传递回控制器，我做错了吗？

创建.cshtml：

```
<div class="editor-label">
    @Html.LabelFor(model => model.ImgPath)
</div>
<div class="editor-field">
    <input type="file" name="file" />
</div> 
```

家庭控制器：

```
public ActionResult Create(TopSong topsong, HttpPostedFileBase file)
{
    if (ModelState.IsValid)
    {
        //verify user has selected file
        if (file != null && file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath(
                "~/Content/themes/base/images/Movie Images"), fileName);

            file.SaveAs(path);
        }
        db.TopSongs.Add(topsong);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.DateId = new SelectList(db.TopDates, "DateId", "DateId", 
                                    topsong.DateId);

    return View(topsong);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:39:22.117

您永远不会在顶级歌曲对象上设置 ImgPath 属性。您在视图中有一个标签，但这并没有分配价值。如果我正确阅读了您的代码，则您需要将图像路径与其他一些东西一起存储在数据库中，因此您只需要添加一行：

```
topsong.ImgPath = path; 
```

但是按照您的代码现在的情况，即使用户没有上传图片（您的保存在 if 语句之外），您似乎总是会保存一首热门歌曲。通过重构你的函数并减少嵌套，这应该做你想做的事

```
public ActionResult Create(TopSong topsong, HttpPostedFileBase file)
{
    if (!ModelState.IsValid)
    {
       ViewBag.DateId = new SelectList(db.TopDates, "DateId", "DateId",                                  topsong.DateId);
         Return this.View(topsong);
    }

//verify user has selected file
    if (file == null || file.ContentLength == 0)
    {
         ViewBag.DateId = new SelectList(db.TopDates, "DateId", "DateId",                                  topsong.DateId);
         ModelState.AddModelError("file", "You must choose a file to upload.");
         Return this.View(topsong);
    }

    var fileName = Path.GetFileName(file.FileName);
    topsong.ImgPath = Path.Combine(Server.MapPath("~/Content/themes/base/images/Movie Images"), fileName);
    file.SaveAs(topsong.ImgPath);
    db.TopSongs.Add(topsong);
    db.SaveChanges();
    return RedirectToAction("Index");  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:54:55.737

我猜你需要为 ImgPath 添加一个隐藏字段。提交表单时，只有输入字段（不是标签）不会传递给控制器​​...

# android - 关于 Android Activity 性能的建议

> ID：12237374
> 
> 赞同：0
> 
> 时间：2012-09-02T15:50:19.077
> 
> 标签：android, android-activity

如果以下方法是正确的方法，我需要你的建议（它有效）

我有一个活动，在 onResume() 函数上我从数据库中提取数据。如果您需要，我有一个 onClick 事件可以删除数据。

我的问题是如何用新数据刷新屏幕，所以我决定这样做：

```
onPause();onResume(); 
```

这似乎有效（我可以说完美无缺，我什至没有注意到过渡），为什么不呢，对吧？但后来我突然想到，如果一个 Activity 被暂停，它不应该做任何其他动作（onResume() 调用）。

你们觉得怎么样？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:56:36.347

每当您想再次刷新数据时，您就不能拥有`refreshData()`哪个将被调用吗？`onResume`

根据@webnetMobile 的请求，我重新表述了答案：

这样做：当你想再次刷新数据时，你不能有`refreshData()`which 会被调用吗？`onResume`

# html - 将两个 div 粘贴到另一个上

> ID：12237379
> 
> 赞同：3
> 
> 时间：2012-09-02T15:51:45.023
> 
> 标签：html, css

这是我想要实现的目标。我有 3 个 div。让我们称他们为左中右。中心 div 的宽度是动态的。它可能是 100 像素、200 像素等，具体取决于中心 div 保存的图像。无论中心 div 的大小如何，如何使左右 div 都粘在中心 div 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:57:34.820

像[http://jsfiddle.net/t3Gjx/](http://jsfiddle.net/t3Gjx/)这样的东西？

HTML：

```
<div class="wrapper">
    <div class="left">Left</div>
    <div class="center">
        <img src="http://upload.wikimedia.org/wikipedia/commons/8/80/A-Caracas.png" alt="img" />
    </div>
    <div class="right">Right</div>
</div> 
```

CSS：

```
.wrapper{
    text-align:center;
    border:2px solid blue;
    font-size:0;
}

.wrapper>div{
    display:inline-block;
    text-align:left;
    vertical-align:top;
    border:2px solid red;
    font-size:16px;
} 
```

**编辑：**

正如 Zoltan Toth 所说，如果窗口宽度小于元素组合宽度，它们将垂直堆叠而不是彼此相邻。

如果你不想这样，请添加

```
.wrapper{
    white-space:nowrap;
} 
```

在这里看到它：http: [//jsfiddle.net/t3Gjx/1/](http://jsfiddle.net/t3Gjx/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:04:33.810

您可以对侧面元素使用绝对定位 - [**DEMO**](http://jsfiddle.net/C5gvt/1/)

**HTML**

```
<div id="center">
    <div id="left"></div>

    <img src="http://lorempixel.com/200/200" />

    <div id="right"></div>
</div> 
```

**CSS**

```
#left, #right {
    width: 100px;
    background: orange;
    height: 200px;
    position: absolute;
    top: 0;
    left: -100px;
}

#right {
    left: 100%;
}

#center {
    margin-left: 100px; /* width of the left div */
    position: relative;
    display: inline-block;
} 
```

# java - Stored procedure not giving accurate results from java code

> ID：12237385
> 
> 赞同：0
> 
> 时间：2012-09-02T15:52:59.640
> 
> 标签：java, jakarta-ee, jdbc

I have stored procedure that searches persons on basis of any given inputs (any bio data e.g blood group, name, identity no. etc. taking almost 26 inputs).

I am executing a stored procedure (sql server) from java using `Callable Statement` `preparecall` method. Previously I had a problem that my stored procedure was not giving any results (0 row result) whenever the string input was passed in one of its many input parameters. On other hand gave correct results when any integer type parameter value was passed but when I changed `jdbc` driver from `jdbc:odbc` driver to `sqlserver` driver (`driver name=com.microsoft.sqlserver.jdbc.SQLServerDrive`), the problem was solved.

Now my new problem is that when my procedure `procSearch2`, that is taking 16 inputs, is running it gives results perfectly fine with the same `Connection` variable of `jdbc` driver (changed one), but the other procedure, which have 27 inputs (`procSearch1`) is not giving any results even with `int` or `string` input values passed.

It does not give any error it just returns me 0 row result where it should return 3 rows result.

here is the code

```
 CallableStatement stmt=connect.prepareCall("{CALL  procSearch1(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}");
 stmt.setInt(1,0);
 stmt.setString(2,"");
 stmt.setString(3,"");
 .
 .
 .
stmt.setInt(27,0);
 ResultSet result=stmt.executeQuery();

 if(result!=null)
{
   System.out.println(result.getRow()); 
  while(result.next)
  {
    System.out.println(result.getString("Name"));

   }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:03:21.407

您需要为 CallableStatement 设置一个输出参数来读取 sp 的返回值。像这样的东西（为简洁起见省略了异常处理）：

```
CallableStatement  stmt = connection.prepareCall("{? = call procSearch1(?,?,?) }");
stmt.registerOutParameter(1, java.sql.Types.INTEGER);
stmt.setString(2, "abc");
stmt.setString(3, "xyz");
stmt.execute();
Integer sp_return_value = stmt.getInt(1); 
```

编辑：根据您的评论，如果您的 SP 返回 Select 的结果，即 resultSet，我认为您需要使用 statement.execute() 而不是 executeQuery()。

请参阅[http://msdn.microsoft.com/en-us/library/ms378630.aspx](http://msdn.microsoft.com/en-us/library/ms378630.aspx)和[http://msdn.microsoft.com/en-us/library/ms378487.aspx](http://msdn.microsoft.com/en-us/library/ms378487.aspx)。

所以，你的代码应该是这样的：

```
CallableStatement stmt=connect.prepareCall("{CALL  procSearch1(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)}");
stmt.setInt(1,0);
stmt.setString(2,"");
stmt.setString(3,"");
.
.
.
stmt.setInt(27,0);
ResultSet result = stmt.execute();

if(result!=null) {
    System.out.println(result.getRow()); 
    while(result.next) {
        System.out.println(result.getString("Name"));
    }
} 
```

# php - PHP library to manage database definitions?

> ID：12237389
> 
> 赞同：0
> 
> 时间：2012-09-02T15:53:43.587
> 
> 标签：php, database-schema

I'm looking for a convenient way of storing and managing SQL-table definitions in an application, mostly to make installation easier.

I could just hard code an "install.php" full of `CREATE TABLE`, but I figure there are nicer alternatives.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:53:43.587

One answer I've found myself is [Doctrines ORM](http://doctrine-orm.readthedocs.org/en/latest/tutorials/getting-started.html) which appears to have a this capability. Would like to hear about other options as well.

# android - Android 在被告知时未完成活动

> ID：12237392
> 
> 赞同：0
> 
> 时间：2012-09-02T15:54:04.647
> 
> 标签：android

我有一个场景，用户可以单击后退按钮访问上一个活动*或*执行其他任何操作，活动将自行结束（例如来电，单击电源按钮，切换应用程序......）。这些调用必须将不同的结果返回给前一个活动（用 调用`startActivityForResult`），根据将要采取的行动，它要么是优雅的退出，要么是混乱的......

现在，当 Android 调用时`onBackPressed`，它也总是会调用`onStop`，但不是相反。所以我希望我的应用程序在我打电话`onBackPressed`而不打电话时完成，在里面`onStop`打电话是行不通的。`finish()``onBackPressed`

一些代码来说明我的问题：

```
@Override
public void onStop() {
    // this gets called no matter what, I don't like that
    Log.i(TAG, "Canceled");
    setResult(RESULT_CANCELED, new Intent());
    finish();
    super.onStop();
}

@Override
public void onBackPressed() {
    Log.i(TAG, "User ended activity");
    setResult(RESULT_OK, new Intent());
    finish();
    super.onBackPressed();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T15:57:23.850

如果您不想`setResult()`在应用关闭时重复调用，请使用[Activity.isFinsihing()](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)：

```
@Override
public void onStop() {
    // Now this is only called if Activity is not finishing already
    if(!isFinishing()) {
        Log.i(TAG, "Canceled");
        setResult(RESULT_CANCELED, new Intent());
        finish();
    }
    super.onStop();
} 
```

# database - 数据库设计：喜欢表

> ID：12237395
> 
> 赞同：2
> 
> 时间：2012-09-02T15:54:07.783
> 
> 标签：database, database-design, normalization, data-warehouse

我有两张桌子（现在）：

1.  `Topic`
2.  `Post`（帖子是对某个主题的评论）

我想将选项添加到**喜欢**这些对象。
所以我考虑创建一个 Likes 表并使用枚举来指示喜欢哪个对象（当然包括对象的 id）。

顺便说一句，如果我选择这个选项，它应该是一个枚举还是另一个表代表所有对象：

> id object_name
> 1 主题
> 2 帖子

另一种选择是为每个对象创建喜欢表。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:01:14.393

我认为为每个对象创建一个单独的表会更好。

如果你只使用一张桌子，我看不出你会得到什么。您也不能在一张表中正确使用外键。

我的意思是您不能在表中添加列`object_id`，因为您不知道它将指向的表。在这种情况下，您有两个添加两列，`topic_id`并且`post_id`. 总是两者之一将是`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T17:32:31.827

只需为喜欢创建另一个表：

> tbl_posts_likes（likeID、userID、postID、like = 1、like = -1）

那么您可以编写一个子查询，例如：

```
SELECT SUM(like) as likeCount, SUM(unlike)
FROM tbl_posts_likes
GROUP BY postID
WHERE postID= posts.postID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:04:00.190

根据*您*跟踪“喜欢”的方式，我建议添加另一个名为`likes`以下效果的表：

```
likes (like_id, like_type) 
```

从这一点开始，您只需`COUNT()`计算每个（主题/帖子）的“喜欢”数量，`like_type`因为每次有人喜欢某个主题或帖子时，都会插入一条记录。但是，如果您计划按用户跟踪“喜欢”，则需要为用户添加另一列。

如果您想跟踪单个帖子或主题，您将为每个对象设置一个表并为主题或帖子创建一个外键约束`ID`。

```
topic_likes (tl_id, topic_id)
post_likes (pl_id, post_id) 
```

上面的设计将为每个喜欢创建一个条目。如果您只关心每个对象的喜欢总数，您可以设置如下内容：

```
likes (like_id, like_type, likes) 
```

# python - Python 正则表达式编译

> ID：12237399
> 
> 赞同：1
> 
> 时间：2012-09-02T15:54:43.947
> 
> 标签：python, regex

编写以下代码行的程序员可能使用了一个名为[`regex`](http://pypi.python.org/pypi/regex).

```
UNIT = regex.compile("(?:{A}(?:'{A})?)++|-+|\S".format(A='\p{Word_Break=ALetter}')) 
```

有人可以帮助解释什么`A='\p{Word_Break=ALetter}'`和`-+`意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:05:15.743

该`\p{property=value}`运算符匹配 unicode 代码点属性，并记录在您链接到的包索引页面上：

> *   Unicode 代码点属性，包括脚本和块
>     
>     
>     
>     ```
>     \p{property=value}; \P{property=value}; \p{value} ; \P{value} 
>     ```

[`Word_Break`该条目匹配其代码点具有属性](http://unicode.org/Public/UNIDATA/auxiliary/WordBreakProperty.txt)值的任何 Unicode 字符`ALetter`（Unicode 代码点数据库中当前有 24941 个匹配项，有关详细信息，请参阅[Unicode 文本分割，字边界章节规范](http://www.unicode.org/reports/tr29/#Word_Boundaries)）。

您提供的示例还使用标准 python[字符串格式](http://docs.python.org/library/string.html#formatstrings)将部分表达式插入到正在编译的正则表达式中。“{A}”部分只是`.format(A='...')`要填充的部分的占位符。最终结果是：

```
"(?:\p{Word_Break=ALetter}(?:'\p{Word_Break=ALetter})?)++|-+|\S" 
```

该`-+`序列只匹配 1 个或多个`-`破折号，就像在 python`re`模块表达式中一样，真的没有什么特别的。

现在，`++` *之前*的那个更有趣。它是一个[占有量词](http://www.regular-expressions.info/possessive.html)，使用它可以防止正则表达式匹配器尝试所有可能的模式排列。这是一种性能优化，可以防止[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)问题。

# node.js - node.js:201 process.nextTick error?

> ID：12237407
> 
> 赞同：3
> 
> 时间：2012-09-02T15:55:21.823
> 
> 标签：node.js, meteor

So I'm messing around with meteor, and out of no where I received this error? What is it asking me to change?

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
SyntaxError: Unexpected end of input
    at /Users/devinandrews/my_cool_app/.meteor/local/build/server/server.js:109:21
    at Array.forEach (native)
    at Function.<anonymous>(/Users/devinandrews/my_cool_app/.meteor/local/build/server/underscore.js:76:11)
at /Users/devinandrews/my_cool_app/.meteor/local/build/server/server.js:95:7
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

Thanks guys..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:01:46.277

当您有语法错误时会出现此错误。也许您在 中缺少右括号`server.js`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:06:36.220

您需要查看代码并查看它在 109 左右的 server.js 中做了什么。它可能正在处理突然终止的网络连接。您是否正在做任何事情，例如在连接到您的服务器时使用 curl 和 CTRL-C-ing 访问您的站点？由于 vanilla node.js 堆栈跟踪的断开特性，我们需要查看代码来帮助您调试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T01:17:10.727

检查您的全局和本地路径中是否没有重复且可能存在冲突的模块版本。

```
npm list 
```

和

```
npm list -g 
```

不应列出模块的重复和/或冲突版本。就我而言，我在本地安装了*ws*，并且它的一些依赖项也在全局路径上。

我的解决方案是从我的本地路径中删除所有内容，然后在全球范围内安装所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T19:58:28.273

当我尝试在众所周知的端口 (0-1023) 上启动在 ubuntu 上运行的服务器时遇到此错误

如果是这种情况，只需以超级用户 (sudo) 身份运行它

如果您无法做到这一点，请查看此替代方案 ( [https://serverfault.com/a/112798](https://serverfault.com/a/112798) )

# iphone - iphone开发：从不同的viewControllers中获取对象

> ID：12237408
> 
> 赞同：0
> 
> 时间：2012-09-02T15:55:22.743
> 
> 标签：iphone, objective-c, ios, imageview, viewcontroller

在我的应用程序中，我遇到了一个问题，这听起来很简单，但我无法解决。好吧，情况就是这样。

我有两个视图控制器。VC1 和 VC2。在 VC1 中，我有一个按钮和一个 imageView。按下按钮时，imageView 会随着动画从左向右移动，并且 VC2 通过 pushtoViewController 打开。在 VC2 中还有一个按钮，它是一个后退按钮，当按下它时，它应该打开第一个 VC1，并且图像应该从右向左移动。

我可以使用 PopViewController 打开 VC1，但是我无法从 VC2 控制图像视图，因此我可以从右到左对其进行动画处理。如何从 VC2 访问 VC1 的 imageView？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:49:58.913

这是在 VC1 中调用 VC2 的方法：

```
 VC2 *vc2 = [[VC2 alloc] initWithNibName:@"VC2" bundle:nil ];
  vc2.delegate = self; // here you set the delegate for the coming back call
  [self presentModalViewController: vc2 animated: YES]; // or however you present your VC2 
```

这就是你从 vc2 回到 vc1 的方式，你调用：

```
[self.delegate vc2HasFinished]; 
```

为此，您需要创建一个像这样的协议：`VC2Protocol.h`

```
 @protocol VC2Protocol <NSObject>
    -(void)vc2HasFinished;
    @end 
```

然后将其包含 `VC2Protocol.h`在 VC1 和 VC2 中。在 VC1 中你必须像这样定义这个方法：

```
-(void) weitereRufNrVCDidFinish{
    [self dismissModalViewControllerAnimated:YES completion: nil];

} 
```

这是 Apple 最干净和推荐的方式 - 它看起来很麻烦 - 我同意 - 但它有效并且你已经习惯了 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:09:26.297

第一个答案非常正确，但我有另一个解决方案。

您可以使用以下内容覆盖 VC1 的`viewDidAppear:`消息：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (imageView.frame.origin.x > 0.0) {
        // make your animation here
    }
} 
```

# objective-c - SQLite insert from objective c

> ID：12237409
> 
> 赞同：1
> 
> 时间：2012-09-02T15:55:24.913
> 
> 标签：objective-c, sql, sqlite

i am trying to insert into sqlite database using objective c, the following is my code:

-(void)insertCustomer:(CustomerDetails *)cd{

```
CustomerDetails *cDetails=[[CustomerDetails alloc] initWithIdNumber:cd.idNumber name:cd.name surname:cd.surname];

NSString *name= cDetails.name;
NSString *surname=cDetails.surname;
NSString *idNumber=cDetails.idNumber;

NSString *insertQuery=[NSString stringWithFormat:@"INSERT INTO CUSTOMER_DETAILS(Name,Surname,ID_Number) VALUES(?,?,?);"];
sqlite3_stmt *insertStatement;
sqlite3_prepare_v2(database, [insertQuery UTF8String], 1, &insertStatement, NULL);

sqlite3_bind_text(insertStatement, 1,[name UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(insertStatement, 2,[surname UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(insertStatement, 3,[idNumber UTF8String], -1, SQLITE_TRANSIENT);

sqlite3_step(insertStatement);
sqlite3_finalize(insertStatement);
sqlite3_close(database); 
```

}

this is not inserting anything, also when i debug insertStatement seems to be null i am new to objective c so would appreciate any help :)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:05:34.483

第三个参数[`sqllite3_prepare_v2`](http://www.sqlite.org/c3ref/prepare.html)是从 SQL 语句中读取的字节数。由于您传递 1，因此读取了一个字节，换句话说，您正在尝试执行 SQL 语句`"I"`。这是行不通的，并且`sqllite_prepare_v2`可能会失败，因此没有分配任何东西`insertStatement`- 但由于您没有检查错误代码的返回值，您的代码只会继续。

您可以传递 -1 以读取准备函数，直到 UTF8 字符串的空终止符。换句话说，这应该有效：

```
sqlite3_prepare_v2(database, [insertQuery UTF8String], -1, &insertStatement, NULL); 
```

此外，在代码中使用 sqllite API 时，您确实应该检查错误；这可能会避免或解释未来的其他问题。根据文档：

> 成功时，sqlite3_prepare() 系列例程返回 SQLITE_OK；否则返回错误代码。

# vba - Global variable resets when adding a command button with code

> ID：12237410
> 
> 赞同：2
> 
> 时间：2012-09-02T15:55:57.643
> 
> 标签：vba, excel

I have this short piece of code

```
Public n As Integer

Public Sub Foo()

    For i = 0 To 4

        MyModule.n = MyModule.n + 1

    Next i

End Sub 
```

which is defined in a Module named `MyModule`. This code is working as expected: After executing for the first time 'MyModule.n' has the value 5\. After executing the second time it has the value 10 and so on.

When I extend the code, to add a CommandButton and place it onto the working sheet, the global variable `MyModule.n` loses it's value on every new call of `Foo`:

```
Public n As Integer

Public Sub Foo()

    Dim btn As OLEObject

    For i = 0 To 4

        Set btn = Worksheets("Aufträge").OLEObjects.Add(ClassType:="Forms.CommandButton.1", _
        Left:=122, Top:=321, Width:=30, Height:=30)

        MyModule.n = MyModule.n + 1

    Next i

End Sub 
```

The code seems to work because the command button is created and placed correctly. Why does the global variable reset if executing the second code fragment?

Furthermore I can't place a break point after or inside the For-Loop in the second code fragment. I get the message `Can't enter break mode at this time`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T17:04:05.587

Based on the search I did & my conclusion is that you can't add controls dynamically to the worksheet and retain the state of variables.

Here is why: Adding a button will force the sheet to goto design mode & hence reset of variables.

Supporting links

1.  [http://www.pcreview.co.uk/forums/dynamically-adding-activex-controls-via-vba-kills-global-vba-heap-t3763287p2.html](http://www.pcreview.co.uk/forums/dynamically-adding-activex-controls-via-vba-kills-global-vba-heap-t3763287p2.html)

2.  [https://web.archive.org/web/20101215134333/http://support.microsoft.com/kb/231089](https://web.archive.org/web/20101215134333/http://support.microsoft.com/kb/231089) (originally //support.microsoft.com/kb/231089)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:09:35.830

对于第一个示例，您不需要使用 for next 循环。你为什么不这样做：

```
Public n As Integer

Public Sub Foo()

    MyModule.n = 5

End Sub 
```

这将在一次操作中完成。

在第二个示例中，您没有添加一个按钮，而是添加了 5 个按钮。查看“For Next”的帮助。

# c - 更改变量后的奇怪输出

> ID：12237412
> 
> 赞同：0
> 
> 时间：2012-09-02T15:56:12.260
> 
> 标签：c

我在 Windows XP 上使用 DevC++ 作为我的编译器。这是我的代码：

```
#include<stdio.h>
int main(void){
  int a;
  printf("%d\n", a);
  int b = a;
  a = 10;
  printf("%d %d %d", a, b, a);
  getch();
  return 0;
} 
```

输出：

```
2
10 2 10 
```

我不明白为什么变量`a`会得到 value `2`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:57:47.473

```
int a;
printf("%d\n", a); 
```

未初始化的对象具有不确定的值。访问未初始化的对象是未定义的行为。如果您尝试打印它的值，您可能会被`2`打印出来，`42`或者您的应用程序可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:58:20.043

变量`a`未由您初始化，因此它具有一些随机值。在另一个应用程序运行/计算机重新启动后，它可能等于另一个值。您必须分配一些值以确保它`a`等于它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:06:15.893

它必须`garbage value`存储在编译器为变量分配的地址中`a`，因为它没有被初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T16:13:47.513

这是一种未定义的行为。

我用相同的编译器在我的计算机上得到了 4334。

# jquery - jQuery updateAfterEvent like Actionscript?

> ID：12237418
> 
> 赞同：0
> 
> 时间：2012-09-02T15:56:37.520
> 
> 标签：jquery, actionscript-3

Is there a updateAfterEvent function like in jQuery ? I'm playing with the mouse events (mousemove, mouvedown, mouseup) while resizing some containers (divs). Even if it's smooth, i am wondering if there is way to have it smoother.. In AS3.0 updateAfterEvent makes a significant difference...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T23:08:54.593

不，没有 updateAfterEvent 函数，但 JavaScript 人员想说已经构建了一个，这只是部分正确。:) 当应用程序基于精确的鼠标行为时，尤其是在 HTML5 中，JavaScript 会产生严重的错误。根据处理器的速度和应用程序的复杂性，鼠标事件可能根本不会触发。实际上，画布内没有事件 :) 画布可以有事件，但其中的对象事件是通过复杂的计算模拟的。在处理器过载的情况下，模拟系统将失败或延迟工作。所以，答案是 - 没有 JavaSctipt 从未用于 RIA - 富 Internet 应用程序。就 Jquery 而言，它只不过是 WRITE LESS DO MORE 的 JavaScript 编码风格的变体。它不是奇迹制造者：) 我不建议创建任何比使用 JavaSctipt 的网站更复杂的应用程序。Flash、Unity、Silverlight 更适合这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:53:26.667

不，在 jQuery 中没有与 ActionScript 的 updateAfterEvent() 等效的功能。

它实际上并不适用，因为浏览器中的重绘与 Flash Player 中的固定帧速率无关。您可以说 updateAfterEvent() 在浏览器中处理鼠标事件时已经“内置”，因为浏览器会在需要时自动重新绘制。

# android - 填写 ListView

> ID：12237421
> 
> 赞同：0
> 
> 时间：2012-09-02T15:56:57.283
> 
> 标签：android, listview

我正在处理项目，主要布局包含 ListView。我想动态地将子项添加到`ListViewItem`视图中。我的主要布局如下：

main_layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="TextView"/>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >
    </ListView>
</RelativeLayout> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:background="@android:color/transparent" >

</LinearLayout> 
```

我想添加`TextView`到返回`view`的`getView`以下属性：

1.  **高度**：fill_parent
2.  **宽度**：wrap_content
3.  **文本**：文本视图项

    ```
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) this.M_context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.list_item, parent, false);

        return convertView;
    } 
    ```

**请注意**，我想将 subItems 动态添加到 ListViewItem。你可以假设，我有一个 TextView 数组，并想用这个 Items 填充我的 listView。我该怎么做这个场景？我在其他线程和谷歌上搜索都找不到任何结果。那么，有人可以帮我解决我的问题吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:42:02.927

这是我的 getView() 方法。

## 主要的.xml

```
<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_below="@+id/button1"
    android:cacheColorHint="@android:color/transparent"
    android:divider="#00ff00"
    android:fastScrollEnabled="true"
    android:focusable="false"
    android:listSelector="#000000"
    android:paddingTop="5dp"
    android:saveEnabled="true" >
</ListView> 
```

## 项目.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

## 适配器

```
 class CustomAdapter extends ArrayAdapter<String> {

    public CustomAdapter(Context context, int resource, List<String> objects) {
        super(context, resource, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;

        /*convertView = mInflater.inflate(R.layout.item, null);
        holder = new ViewHolder(convertView);
        convertView.setTag(holder);
        holder = (ViewHolder) convertView.getTag();

        holder.getAppName().setText(str.get(position));*/

        if(position==0)
        {
            ImageView iv = new ImageView(getApplicationContext());
            iv.setBackgroundResource(R.drawable.ic_launcher);
            convertView = iv;
        }
        else if(position==1)
        {
            TextView tv = new TextView(getApplicationContext());
            tv.setText("text view");
            convertView = tv;
        }
        else
        {
            EditText et = new EditText(getApplicationContext());
            et.setText("ET go home");
            convertView = et;
        }

        return convertView;
    }

    private class ViewHolder {
        private View pathRow;
        private TextView appNameView = null;

        public ViewHolder(View row) {
            pathRow = row;
        }

        public TextView getAppName() {
            if (null == appNameView) {
                appNameView = (TextView) pathRow.findViewById(R.id.tv);
            }
            return appNameView;
        }
    }
} 
```

注释掉的部分是以前的部分。它下面的代码是我用来动态生成视图并返回它们的代码。我的 listitem.xml 中仍然有一个 textView。但是适配器设置了我们从 getView() 返回的视图。这对我有用。

我真的不；在您的 item.xml 中看不到 LinearLayout 的意义。您可以在自己的代码中执行此操作。

# ruby - 4x4 字母网格 - 单词生成器 - 与朋友争夺

> ID：12237422
> 
> 赞同：4
> 
> 时间：2012-09-02T15:57:01.263
> 
> 标签：ruby, string, algorithm, grid, permutation

我正在尝试创建一个基于 4x4 字母网格的单词生成器（如下）。

![与朋友争夺](../Images/18a14287c34d4babf830b435491af19f.png)

以下是规则：

*   字母不能重复
*   单词必须由相邻的字母组成
*   单词可以水平，垂直或对角向左，向右或上下形成

目前，我输入 16 个字符并遍历字典中的每个单词，确定该单词是否可以用网格上的字母拼写。

```
#!/usr/bin/ruby

require './scores'   # alphabet and associated Scrabble scoring value (ie the wordValue() method)
require './words.rb' # dictionary of English words (ie the WORDS array)

# grab users letters
puts "Provide us the 16 letters of your grid (no spaces please)"
word = gets.chomp.downcase

arr = word.split('')

# store words that can be spelled with user's letters
success = []

# iterate through dictionary of words
WORDS.each do |w|

    # create temp arrays
    dict_arr = w.split('')
    user_arr = arr.dup
    test = true

    # test whether users letters spell current word in dict
    while test
        dict_arr.each do |letter|
            if (user_arr.include?(letter))
                i = user_arr.index(letter)
                user_arr.delete_at(i)
            else
                test = false
                break
            end
        end

        # store word in array
        if test 
            success << w
            test = false
        end
    end

end

# create hash for successful words and their corresponding values
SUCCESS = {}

success.each do |w|
  score = wordValue(w)
  SUCCESS[w] = score
end

# sort hash from lowest to smallest value
SUCCESS = SUCCESS.sort_by {|word, value| value}

# print results to screen
SUCCESS.each {|k,v| puts "#{k}:  #{v}"} 
```

然而，这种方法没有考虑棋盘上棋子的位置。 **你会建议我如何寻找可以根据它们在 4x4 网格中的位置创建的单词？**

对于上图中的棋盘游戏，我运行 Ubuntu 的 VM 需要大约 1.21 秒来计算 1185 个可能的单词。我在 /usr/share/dict/words 中使用 Ubunut 提供的词典

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:08:42.503

不要遍历单词并搜索它们的存在，而是遍历网格上的每个图块并找到源自该图块的所有单词。

首先，将您的字典编译成[trie](http://en.wikipedia.org/wiki/Trie)。尝试在执行前缀匹配字符串比较方面是有效的，这将很快对我们有用。

要在棋盘中查找单词，请对 16 个图块中的每一个执行以下步骤，从 . 的空字符串开始`prefix`。

1.  将当前图块的值添加到`prefix`.
2.  检查我们的 trie 是否包含任何以`prefix`.
3.  如果是，则分支搜索：对于与该图块相邻的每个合法（未访问）图块，返回步骤 1（递归）。
4.  如果不匹配，请停止此搜索分支，因为没有匹配的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:02:36.653

我会创建一个代表整个董事会的简单图表。字母将是顶点。如果板上的两个字母彼此靠近，我会在它们的顶点之间创建一条边。很容易找出输入是否有效。您只需检查图中是否有匹配的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T19:04:25.503

我原来的答案不是你想要的。我正在创建网格中所有“单词”的列表，而不是搜索您已经从字典中识别的单词。现在我编写了一个函数，它在网格中搜索特定的单词。它以递归方式工作。

所以，现在算法是：

1) 从用户那里获取 16 个字母
2) 在字典中搜索包含这些字母的所有单词
3) 使用这些单词中的每一个调用 is_word_on_board 以查看是否有匹配项

```
#!/usr/bin/ruby

# This script searches a board for a word
#
# A board is represented by a string of letters, for instance, the string
# "abcdefghijklmnop" represents the board:
#
#    a b c d
#    e f g h
#    i j k l
#    m n o p
#
# The array ADJACENT lists the cell numbers that are adjacent to another
# cell.  For instance ADJACENT[3] is [2, 6, 7].  If the cells are numbered
#
#     0  1  2  3
#     4  5  6  7
#     8  9 10 11
#    12 13 14 15

ADJACENT = [
    [1, 4, 5],
    [0, 2, 4, 5, 6],
    [1, 3, 5, 6, 7],
    [2, 6, 7],
    [0, 1, 5, 8, 9],
    [0, 1, 2, 4, 6, 8, 9, 10],
    [1, 2, 3, 5, 7, 9, 10, 11],
    [2, 3, 6, 10, 11],
    [4, 5, 9, 12, 13],
    [4, 5, 6, 8, 10, 12, 13, 14],
    [5, 6, 7, 9, 11, 13, 14, 15],
    [6, 7, 10, 14, 15],
    [8, 9, 13],
    [8, 9, 10, 12, 14],
    [9, 10, 11, 13, 15],
    [10, 11, 14]
]

# function:  is_word_on_board
#
# parameters:
#   word   - word you're searching for
#   board  - string of letters representing the board, left to right, top to bottom
#   prefix - partial word found so far
#   cell   - position of last letter chosen on the board
#
# returns true if word was found, false otherwise
#
# Note:  You only need to provide the word and the board.  The other two parameters
# have default values, and are used by the recursive calls.

# set this to true to log the recursive calls
DEBUG = false

def is_word_on_board(word, board, prefix = "", cell = -1)
    if DEBUG
        puts "word = #{word}" 
        puts "board = #{board}"
        puts "prefix = #{prefix}"
        puts "cell = #{cell}"
        puts
    end

    # If we're just beginning, start word at any cell containing
    # the starting letter of the word
    if prefix.length == 0
        0.upto(15) do |i|
            if word[0] == board[i]
                board_copy = board.dup
                newprefix = board[i,1]

                # put "*" in place of letter so we don't reuse it
                board_copy[i] = ?*

                # recurse, and return true if the word is found
                if is_word_on_board(word, board_copy, newprefix, i)
                    return true
                end
            end
        end

        # we got here without finding a match, so return false
        return false
    elsif prefix.length == word.length
        # we have the whole word!
        return true
    else
        # search adjacent cells for the next letter in the word
        ADJACENT[cell].each do |c|
            # if the letter in this adjacent cell matches the next
            # letter of the word, add it to the prefix and recurse
            if board[c] == word[prefix.length]
                newprefix = prefix + board[c, 1]
                board_copy = board.dup

                # put "*" in place of letter so we don't reuse it
                board_copy[c] = ?*

                # recurse, and return true if the word is found
                if is_word_on_board(word, board_copy, newprefix, c)
                    return true
                end
            end
        end

        # bummer, no word found, so return false
        return false
    end
end

puts "Test board:"
puts
puts "  r u t t"
puts "  y b s i"
puts "  e a r o"
puts "  g h o l"
puts

board = "ruttybsiearoghol"

for word in ["ruby", "bears", "honey", "beast", "rusty", "burb", "bras", "ruttisbyearolohg", "i"]
    if is_word_on_board(word, board)
        puts word + " is on the board"
    else
        puts word + " is NOT on the board"
    end
end 
```

运行此脚本会产生以下结果：

```
Test board:

  r u t t
  y b s i
  e a r o
  g h o l

ruby is on the board
bears is on the board
honey is NOT on the board
beast is on the board
rusty is NOT on the board
burb is NOT on the board
bras is on the board
ruttisbyearolohg is on the board
i is on the board 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T02:20:54.697

我碰巧有一个我不久前写的 Boggle 求解器。它遵循 Cheeken 的大纲。它的调用方式略有不同（您提供单词列表文件和带有 4x4 网格的文本文件作为参数），但我认为它值得分享。另请注意，它将“Q”视为“QU”，因此其中有一些额外的逻辑。

```
require 'set'

def build_dict(dict, key, value)
  if key.length == 0
    dict[:a] = value
  else
    if key[0] == "q"
      first = key[0..1]
      rest = key[2, key.length - 1]
    else
      first = key[0]
      rest = key[1, key.length - 1]
    end

    dict[first] = {} unless dict.has_key? first
    build_dict(dict[first], rest, value)
  end
end

dict = {}
#parse the file into a dictionary
File.open(ARGV[0]).each_line do |line|
  real_line = line.strip
  build_dict(dict, real_line, real_line)
end

#parse the board
board = {}
j = 0
File.open(ARGV[1]).each_line do |line|
  line.chars.each_with_index do |l, i|
    board[[j, i]] = l
  end
  j += 1
end

#(0..3).each{|r| puts (0..3).map{|c| board[[r, c]]}.join}

#how can i get from one place to another?
def get_neighbors(slot, sofar)
  r, c = slot
  directions =
   [
    [r+1, c],
    [r+1, c+1],
    [r+1, c-1],
    [r, c+1],
    [r, c-1],
    [r-1, c],
    [r-1, c+1],
    [r-1, c-1]
   ]
  directions.select{|a| a.all?{|d| d >= 0 && d <= 3} && !sofar.include?(a)}
end

#actual work
def solve(board, slot, word_dict, sofar)
  results = Set.new
  letter = board[slot]
  letter = "qu" if letter == "q"
  stuff = word_dict[letter]
  return results if stuff.nil?
  if stuff.has_key? :a
    results << stuff[:a] if stuff[:a].length > 2
  end
  unless stuff.keys.select{|key| key != :a}.empty?
    get_neighbors(slot, sofar).each do |dir|
      results += solve(board, dir, stuff, sofar.clone << slot)
    end
  end
  results
end

#do it!
results = Set.new
all_slots = (0..3).to_a.product((0..3).to_a)
all_slots.each do |slot|
  results += solve(board, slot, dict, slot)
end

puts results.sort 
```

# ruby-on-rails - The Law of Demeter

> ID：12237431
> 
> 赞同：2
> 
> 时间：2012-09-02T15:57:47.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oop, law-of-demeter

I recently posted a question on stackoverflow where I did something to effect of

`@period_registration.period.event`

However, it was suggested that I do something like the following:

```
def event
  period.event
end

@period_registration.event 
```

My general sense is that this seems a little heavy-handed. Looking at this previous posting [How do I apply the Law of Demeter to this?](https://stackoverflow.com/questions/8950122/how-do-i-apply-the-law-of-demeter-to-this) shows how heavy handed this can become if you did this for every association.

How common of a practice is this in rails? My thought is that even if this is technically the right thing to do, if it isn't a part of the rails culture then it seems that doing this will throw people off. And, more importantly, actually make the code less maintainable as other developers think you're wasting your time with all these helper methods.

Let's say I wanted to impliment this, would @period_registration.event.city, where city is an attribute of event, not a seperate object also violate LoD or would I need to write *ANOTHER* method so I could do: @period_registration.city

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:14:48.497

老实说，盲目地遵守得墨忒耳法则是非常罕见的。尽管如此，对于关联来说，这是一种常见的模式，它有一个快捷方式可以消除您的大部分辛勤工作：

```
class PeriodRegistration < ActiveRecord::Base
  belongs_to :period
  delegate :event, :to => :period
end

PeriodRegistration.new.event # calls PeriodRegistration.new.period.event 
```

[您可以在Module#delegate](http://apidock.com/rails/Module/delegate)文档中阅读更多相关信息。

冒着听起来过度自我推销的风险，我有一篇博客文章讨论了这个和其他尝试尊重德墨忒耳法则的方法，如果那是你的事。如果您想了解更多信息，[请查看它。](http://joshsymonds.com/blog/2012/03/28/delegation-when-delegate-just-wont-work/)

# c# - Getting HTML SELECT length property in C#

> ID：12237434
> 
> 赞同：0
> 
> 时间：2012-09-02T15:57:51.197
> 
> 标签：c#, html, dom

I'm trying to figure out how to grab DOM elements from a webpage. Here is the function I'm using:

```
private void processHTML(String htmlContent)
{
    IHTMLDocument2 htmlDocument = (IHTMLDocument2)new mshtml.HTMLDocument();
    htmlDocument.write(htmlContent);

    IHTMLElementCollection allElements = htmlDocument.all;

    webBrowser1.DocumentText = allElements.item("storytext").innerHTML;
    textBox2.Text = allElements.item("chap_select").length.ToString();
} 
```

If I set a breakpoint at either of the last two lines and then check the allElements collection, I'm able to find the SELECT element. It correctly shows the ID as being chap_select and the length property shows 13 for the particular document that is being passed. For some reason the length that is being put into the textBox2 field is 2, however.

Any suggestions on what I'm doing wrong here? I've spent several hours trying to figure this out, but have not been able to find any code samples of somebody trying to grab this property of a SELECT.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:12:47.017

而不是使用`IHTMLDocument2`，`mshtml.HTMLDocument`我建议使用更容易使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

类似（未经测试）：

```
var doc = new HtmlDocument();
doc.LoadHtml(htmlContent);
textBox2.Text = doc.DocumentNode
            .SelectNodes("//select[@id='chap_select']/option").Count().ToString(); 
```

# drupal-6 - 如何使用 Drupal 视图

> ID：12237439
> 
> 赞同：0
> 
> 时间：2012-09-02T15:58:16.377
> 
> 标签：drupal-6, drupal-views

我正在使用 Drupal 6.x

我创建了两个用户，即一个拥有所有权限的用户，即网站管理员，另一个是会员。成员的权限受到限制，只能创建故事、删除自己的故事和编辑自己的故事。但是，当我使用会员名登录时，我只有三个选项，即：

1.  我的帐户
2.  创建内容
3.  登出

该用户提交的帖子不可见。我想在其帐户详细信息中显示该用户发布的所有帖子，他/她可以在这里轻松地编辑、删除或修改他/她的内容。怎么可能。你有什么想法。如果是，请逐步指导我。等待你的回复。提前感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:24:06.733

这是因为权限问题，解决此问题的步骤

1.  创建一个视图以使用编辑按钮列出故事。
2.  转到 admin/user/permissions 并为用户授予创建、编辑和查看权限。
3.  通过管理员用户发布创建的文章。
4.  最后将创建的视图块分配给用户主页。

# android - 在 ListPreference 摘要上显示图像

> ID：12237441
> 
> 赞同：5
> 
> 时间：2012-09-02T15:58:37.157
> 
> 标签：android, listpreference

我正在尝试添加图像`ListPreference`并实现了这一点，但在 Android API 级别 15 或更高级别上它不起作用。我做错了什么？我已经在 2.2 和 2.3.3 上测试过这段代码，一切正常！这是我的代码。

```
private void addSummary(Drawable d, Spannable sp) {

    d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());

    SpannableStringBuilder builder = new SpannableStringBuilder();
    builder.append(Const.IMAGE_ANCHOR);
    builder.append("  ");
    builder.append(sp);
    setTextColor(builder);
    ImageSpan imageSpan = new ImageSpan(d);
    int end = Const.IMAGE_ANCHOR.length();

    builder.setSpan(imageSpan, 0, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    listPreference.setSummary(builder);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:42:33.880

除了使用这种方法，更简洁的方法是为首选项对象声明一个布局，并`android:layout`使用自定义布局的资源 ID 设置首选项的参数。

[这](https://stackoverflow.com/a/6194194/1186983)是一个工作代码示例。

# java - 为什么 JVM 在其变量超出范围后不销毁 JFrame 对象？

> ID：12237444
> 
> 赞同：3
> 
> 时间：2012-09-02T15:59:24.363
> 
> 标签：java, swing, concurrency, garbage-collection, event-dispatch-thread

我正处于学习 Java 的初学者阶段。在我到目前为止阅读的所有文档中，都提到 Java 使用安全引用来访问对象而不是内存指针。而且当一个方法返回时，它的局部范围的变量变得有资格进行垃圾收集。

那么为什么在下面的代码中，在 createFrame 方法返回后，JFrame 对象没有与窗口一起被销毁？

```
import javax.swing.*;

public class HelloJava {
    public static void main( String[] args ) {
        createFrame();
    }

    private static void createFrame() {
        JFrame frame = new JFrame( "Hello, Java!" );
        JLabel label = new JLabel( "Hello, Java!", JLabel.CENTER );
        frame.getContentPane().add( label );
        frame.setSize( 300, 300 );
        frame.setVisible( true );
    }
} 
```

不仅窗口是可见的，我还可以在该窗口上执行所有操作，例如拖动、最大化、最小化等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T16:03:45.050

因为 EDT 现在正在运行。

有关更多详细信息，请参阅[Swing 中的并发，](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)尤其是：

*   [初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

    > 在标准程序中，只有一个这样的线程：调用`main`程序类方法的线程。

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

    > Swing 事件处理代码在称为事件分派线程的特殊线程上运行。大多数调用 Swing 方法的代码也在这个线程上运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T16:04:26.497

JFrame 对象没有被销毁，因为 UI 线程或所谓的[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)对它有一个引用并且正在积极地使用它。

# javascript - 在多个画布上绘图时的奇怪行为

> ID：12237445
> 
> 赞同：1
> 
> 时间：2012-09-02T15:59:32.150
> 
> 标签：javascript, html, dom, canvas

基本上，我正在尝试创建一个跨越多个画布的网格，但我在第一个和最后一个画布上出现了奇怪的行为。笔触颜色和间距已更改。我不明白它怎么会发生。这是相关代码，请点击链接查看它的实际效果。（该网站正在进行中） [http://www.gjar-po.sk/~hudak9c/test3/](http://www.gjar-po.sk/~hudak9c/test3/)

```
var canvasCount = document.getElementsByTagName("canvas").length;

if (canvasCount > 0) {
  for (var i = 0; i < canvasCount; i++) {
    var canvas = document.getElementsByTagName("canvas")[i];

    if (canvas.getContext("2d")) {
      var can = canvas.getContext("2d");

      can.beginPath();

      for (var x = 5; x < 640; x += 20) {
        can.moveTo(x, 0);
        can.lineTo(x, canvas.height);
      }

      for (var y = 5; y < canvas.height; y += 20) {
        can.moveTo(0, y);
        can.lineTo(canvas.width, y);
      }

      can.lineWidth = 1;
      can.strokeStyle = "#000";
      can.stroke();
    } else {
      alert("getContext fail");      
    }
  }
} 
```

编辑：我设法解决了这个问题。这是由我（显然）通过 style.width 和 style.height 设置画布的宽度和高度引起的，而不是通过 canvas.width 和 canvas.height，这使它们从默认尺寸拉伸/收缩而不是调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:19:27.133

尝试通过标签属性设置画布的宽度和高度，`width`如下`height`所示：

```
<canvas width="640" height="50"> 
```

不是按`style`属性。这非常重要。因为当您设置`style`属性并指向那里`width`和`height`属性时，您的画布将具有默认真实值`width`，并且`height`只会拉伸到您的新尺寸。

# c++ - 对 SDL_*many* 的未定义引用

> ID：12237448
> 
> 赞同：3
> 
> 时间：2012-09-02T15:59:39.427
> 
> 标签：c++, sdl

这是我的生成文件：

```
CFLAGS = -Wall -pedantic -pedantic-errors -g -lSDL -lSDL_image
CC = g++
OBJ = Point.o Personaje.o Juego.o EventHandler.o

all: main

#%.o: %.cpp %.h
#   $(CC) -c $(CFLAGS) $<

bin: other $(OBJ)

Point.o: Point.cpp Point.h
    $(CC) -c $(CFLAGS) $<

Personaje.o: Personaje.cpp Personaje.h
    $(CC) -c $(CFLAGS) $<

Juego.o: Juego.cpp Juego.h
    $(CC) -c $(CFLAGS) $<

EventHandler.o: EventHandler.cpp EventHandler.h
    $(CC) -c $(CFLAGS) $<

main: $(OBJ)
    cd ../vista/; make
    cp ../vista/*.o .
    rm ../vista/*.o
    g++ $(CFLAGS) $(OBJ) Pantalla.o Imagen.o main.cpp -o main

clean:
    rm *.o;
    rm main

PHONY: main 
```

当我使用“make”编译时，出现以下错误：

```
EventHandler.cpp:17: undefined reference to `SDL_PollEvent'
Pantalla.o: In function `Pantalla::initialize(int, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
Pantalla.cpp:6: undefined reference to `SDL_Init'
Pantalla.cpp:9: undefined reference to `SDL_SetVideoMode'
Pantalla.cpp:14: undefined reference to `SDL_WM_SetCaption' 
```

和许多其他错误。

“Pantalla.h”的标题包含这一行：

```
#include "SDL/SDL.h" 
```

我已经安装了 SDL 包。

我不知道我做错了什么......请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:13:27.380

```
CFLAGS = -Wall -pedantic -pedantic-errors -g -lSDL -lSDL_image 
```

这不好。您将编译器标志（警告和调试）与链接器信息（您需要链接到哪些库）混合在一起。为此使用两个单独的变量：

```
CFLAGS = -Wall -pedantic -pedantic-errors -g
LIBS = -lSDL -lSDL_image 
```

然后当你编译时（但不链接，即当你生成`.o`文件时），只使用`$(CFLAGS)`（就像你现在一样）。但是当您进行链接（以生成最终的可执行文件）时，请添加链接器指令。

```
g++ $(CFLAGS) -o main main.cpp $(OBJ) Pantalla.o Imagen.o $(LIBS) 
```

放置对象和库的顺序*很重要*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:12:52.110

一个问题是您使用完全相同的标志进行编译和链接。编译器不使用库；链接器不知道迂腐。

一个更大的问题是你`-lSDL -lSDL_image`在链接命令中出现得太早了，`g++ $(CFLAGS) $(OBJ) Pantalla.o Imagen.o main.cpp -o main`. 链接器不会查看 libSDL.a 或 libSDL_image.a（或它们的等价物），因为在您指定搜索的位置没有未解析的外部引用。将选项放在`-lSDL -lSDL_image`选项之前`-o`。

# cloud-foundry - PlayFramework 和 MongoDB 自动重新配置错误

> ID：12237449
> 
> 赞同：0
> 
> 时间：2012-09-02T15:59:42.573
> 
> 标签：cloud-foundry

我在使用 Play2 和 MongoDB 进行自动重新配置时遇到问题。任何帮助将非常感激。我已将错误日志、编译的应用程序和 application.conf 通过电子邮件发送到 support@cloudfoundry.com..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:05:51.310

只是为了更新这个线程；

[请参阅https://cloudfoundry.atlassian.net/browse/CF-141](https://cloudfoundry.atlassian.net/browse/CF-141)上提交的票证的评论

> 我们只为 Postgres 和 MySQL 实现了 Play 自动重新配置。我们想为 Mongo 等附加服务进行自动配置，但需要找到在 Play 应用程序中使用的通用模式（一种可能性是 application.conf 中的通用属性名称）。同时，您可以将连接属性外部化到 application.conf 并使用 CF 提供的在应用启动时解析的属性：mongodb.host=${?cloud.services.mongodb.connection.hostname} mongodb.port=${ ?cloud.services.mongodb.connection.port} mongodb.db=${?cloud.services.mongodb.connection.db} mongodb.username=${?cloud.services.mongodb.connection.username} mongodb.password=$ {?cloud.services.mongodb.connection.password}

# android - 获取图标的阴影/轮廓/形状

> ID：12237453
> 
> 赞同：2
> 
> 时间：2012-09-02T16:00:05.490
> 
> 标签：android, icons, shape, homescreen, outline

我想知道是否可以在android的主屏幕上获得图标的阴影/形状？我知道当您将一些自定义图标添加到主屏幕然后移动它时，您会得到该图标的轮廓。（至少在三星 TouchWiz 4+ 和 API 11+ 中）。那么有没有办法获取主屏幕上图标的形状和位置呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T08:02:08.627

以下是您可以执行的操作的简短示例：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView view = ((ImageView) findViewById(R.id.img_outline));
        view.setImageBitmap(createOutline(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher)));
        view.setColorFilter(Color.RED);
    }

    private Bitmap createOutline(Bitmap src) {
        Paint p = new Paint();
        p.setMaskFilter(new BlurMaskFilter(10, Blur.OUTER));
        return src.extractAlpha(p, null);
    }
} 
```

你是这么想的吗？（请注意，如果您必须将模糊图像与原始图像对齐，则应将长度为 2 的 int 数组传递给 extractAlpha。该数组将包含您应用于对齐轮廓的偏移量。）

# python - 如何在python中对工厂进行单元测试？

> ID：12237454
> 
> 赞同：6
> 
> 时间：2012-09-02T16:00:19.233
> 
> 标签：python, unit-testing, dependency-injection

当单元测试类一应该只针对其合作者的公共接口进行测试。*在大多数情况下，这很容易实现用假对象*替换协作者- 模拟。当正确使用依赖注入时，大多数时候这应该很容易。

但是，当尝试测试工厂类时，事情变得复杂了。让我们看看例子

模块`wheel`

```
class Wheel:
    """Cars wheel"""

     def __init__(self, radius):
         """Create wheel with given radius"""

         self._radius = radius #This is private property 
```

模块`engine`

```
 class Engine:
     """Cars engine"""

     def __init(self, power):
     """Create engine with power in kWh"""

         self._power = power #This is private property 
```

模块`car`

```
class Car:
    """Car with four wheels and one engine"""

    def __init__(self, engine, wheels):
        """Create car with given engine and list of wheels"""

        self._engine = engine
        self._wheels = wheels 
```

现在让我们有`CarFactory`

```
from wheel import Wheel
from engine import Engine
from car import Car

class CarFactory:
    """Factory that creates wheels, engine and put them into car"""

    def create_car():
        """Creates new car"""

        wheels = [Wheel(50), Wheel(50), Wheel(60), Wheel(60)]
        engine = Engine(500)
        return Car(engine, wheels) 
```

现在我想为`CarFactory`. 我想测试一下，工厂正确地创建了对象。但是，我不应该测试对象的私有属性，因为它们将来可能会被更改，这会破坏我的测试。想象一下，`Wheel._radius`被替换`Wheel._diameter`或被`Engine._power`替换`Engine._horsepower`。

那么如何测试工厂呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T16:00:19.233

幸运的是，由于monkey_patching，python 测试工厂很容易。您不仅可以替换对象的实例，还可以替换整个类。让我们看看例子

```
import unittest
import carfactory
from mock import Mock

def constructorMock(name):
    """Create fake constructor that returns Mock object when invoked"""
    instance = Mock()
    instance._name_of_parent_class = name
    constructor = Mock(return_value=instance)
    return constructor

class CarFactoryTest(unittest.TestCase):

    def setUp():
        """Replace classes Wheel, Engine and Car with mock objects"""

        carfactory.Wheel = constructorMock("Wheel")
        carfactory.Engine = constructorMock("Engine")
        carfactory.Car = constructorMock("Car")

    def test_factory_creates_car():
        """Create car and check it has correct properties"""

        factory = carfactory.CarFactory()
        car_created = factory.create_car()

        # Check the wheels are created with correct radii
        carfactory.Wheel.assert_called_with(radius=50)
        carfactory.Wheel.assert_called_with(radius=50)
        carfactory.Wheel.assert_called_with(radius=60)
        carfactory.Wheel.assert_called_with(radius=60)

        # Check the engine is created with correct power
        carfactory.Engine.assert_called_once_with(power=500)

        # Check the car is created with correct engine and wheels
        wheel = carfactory.Wheel.return_value
        engine = carfactory.Engine.return_value
        carfactory.Car.assert_called_once_with(engine, [wheel, wheel, wheel, wheel])

        # Check the returned value is the car created
        self.assertEqual(car_created._name_of_parent_class, "Car") 
```

所以我们用 Mock 替换类和它们的构造函数，它返回我们的假实例。这使我们能够检查，构造函数是用正确的参数调用的，所以我们不需要依赖真正的类。我们真的能够在 python 中不仅使用假实例，还可以使用假类。

另外，我不得不提一下，上面的代码并不理想。例如，假构造函数应该为每个请求创建新的 Mock，因此我们可以检查汽车是否使用正确的车轮（例如正确的顺序）。这是可以做到的，但代码会更长，我想让示例尽可能简单。

在示例中，我使用了 Python 的 Mock 库[http://www.voidspace.org.uk/python/mock/](http://www.voidspace.org.uk/python/mock/)

但这不是必需的。

# c++ - 对向量的整数元素进行排序

> ID：12237456
> 
> 赞同：1
> 
> 时间：2012-09-02T16:00:46.550
> 
> 标签：c++, algorithm, sorting, vector

我想计算存储在向量中的元素的中位数

```
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>
using namespace std;

 ....
 ....
 ....

vector<int> trmVa;
int size;
int median;
int trimVal;

trmVa.push_back(trimVal);
size = trmVa.size();
sort(trmVa.begin(), trmVa.end()); //I am having troubles here!!!!

if(size % 2) {
  median = (trmVa[size/2 - 1] + trmVa[size/2]) /2;
  printf("Module %d \n\n \t Median = %d\n", mod, median); 
}else {
   median = trimVa[size/2];
   printf("Module %d \n\n \t Median = %d\n", mod, median);
} 
```

错误：运算符 - 未为向量 >::iterator algo.h:722 定义。我很感激帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:19:00.053

[您可以使用std::nth_element](http://en.cppreference.com/w/cpp/algorithm/nth_element)更有效地解决此问题。这只会对向量进行部分排序，并且具有线性复杂性。这是一个奇数大小向量的示例：

```
size_t midIndex = trmVa.size()/2;
nth_element(trmVa.begin(), tmrVa.begin() + midIndex, trmVa.end()); 
```

中值为

```
trmVa[midIndex]; 
```

您可以轻松地扩展它以覆盖偶数大小的向量。

# android - Android：如何将 url 存储在 string.xml 资源文件中？

> ID：12237462
> 
> 赞同：19
> 
> 时间：2012-09-02T16:01:50.943
> 
> 标签：android, xml, string, url

我正在尝试存储一个完全限定的 url，还有查询参数：

```
www.miosito.net?prova&reg=bis 
```

但它导致了一个问题，因为`&reg`它类似于`&reg;`实体，android 告诉我，html 实体写得不好。

我需要这个，因为每个语言环境都使用一组完全不同的 url 查询参数。

我尝试过，`[[CDATA[.. ]]`但 xml 解析器不喜欢这种语法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-02T16:12:20.683

问题不在于问题，而在于问题`&req`本身`&`。对于 XML/HTML，您必须使用`&amp;`实体（或`&#38;`），但对于 URL，您应该使用 URL 编码（[请参阅 docs](http://en.wikipedia.org/wiki/Percent-encoding)）字符串，在这种情况下，`&`应该用`%26`. 所以你的最终字符串应该如下所示：

> www.miosito.net?prova%26reg=bis

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T18:42:52.107

像这样存储它：

```
<string name="my_url">"www.miosito.net?prova&amp;reg=bis"</string> 
```

*& 符号*`&amp;`的 XML 等效项在哪里。 *`&`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T16:08:04.620

百分比编码可以解决问题：[http](http://en.wikipedia.org/wiki/Percent-encoding) ://en.wikipedia.org/wiki/Percent-encoding 你基本上会有这样的东西：www.miosito.net?prova%26reg=bis

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T16:21:55.020

您可以用双引号将您的网址括起来，例如：

```
<string name="my_url">"www.miosito.net?prova&reg=bis"</string> 
```

这是在 Android 中包含字符串资源的推荐方法。

更新 1：查看以下链接了解更多信息：

[http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

更新 2：@WebnetMobile.com：正确，确实 :) '&' 被 xml 视为特殊字符，并且用引号括起来不起作用。我试过了
`www.miosito.net?prova%26reg=bis`

它也没有成功。我什至尝试用引号括起来，但仍然没有用。我错过了什么吗？
同时，以下确实有效：

`<string name="my_url">www.miosito.net%1$sprova%2$sreg=bis</string>`

然后在代码中：

`Resources resources=getResources();`
`String url=String.format(resources.getString(R.string.my_url),"?","&") ;`

'%1$s' 和 '%2$s' 是格式说明符，很像 C 中 printf 中使用的内容。'%1$s' 用于字符串，'%2$d' 用于十进制数，所以上。*

# java - Java：如何识别“真实”单词

> ID：12237471
> 
> 赞同：2
> 
> 时间：2012-09-02T16:02:35.047
> 
> 标签：java, nlp

我正在开发一个接收文本块的程序。文本可能会在单词之间或单词中间分开——无法确定。我想丢弃部分单词，无论是在开头还是结尾。是否有可以帮助识别合法单词的程序/API？显然，会有一些问题，专有名称，复合词等。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:32:59.737

所以你正在寻找像英语词典这样的东西？那么：[如何用Java实现一个英文词典？](https://stackoverflow.com/questions/8986543/how-to-implement-an-english-dictionary-in-java)应该可以帮助你。[自然的英语单词](https://stackoverflow.com/questions/450493/natural-english-language-words?rq=1)也可能很有趣。

基本上，他们正在解析一长串英语中所有（或大部分）单词的列表，并检查是否包含特定单词。

# python - MongoDB 和 Django

> ID：12237473
> 
> 赞同：0
> 
> 时间：2012-09-02T16:02:43.667
> 
> 标签：python, django, mongodb, django-templates, mongoengine

我目前在我的 django 应用程序中使用两个数据库 - 用于存储数字数据的 mongodb 和用于处理关系和提供业务域背景的 mysql。

我有一个担心：

首先 - 我正在使用 mongoengine 以及 django 信号和自定义模板标签。意义：

每当我调用这个过滤器时。{{myobject|do_sth:"20"}} 过程是这样的：

过滤器调用 -> myobject 的 do_sth 属性，参数为“20”调用 -> 发送信号 job_done -> 接收信号 job_done -> 创建单引擎文档 -> 保存

我不知道这是否清楚，但这只是不同技术的组合-我的问题是：在这种情况下效率问题如何？有没有人尝试过该解决方案或有类似的经验？

另一个问题：由于我比较经常使用上面描述的过程，我应该关心mongodb集合中的项目数。让我们假设它会在一周内增长到 10 000，然后我们清除集合 - 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:09:09.017

我建议对于一个简单的模板标签来说逻辑太多了，在视图本身中做可能会更好——至少这是 djangonauts 会争论的。

我认为您正在输出过滤器的结果 - 而不仅仅是调用信号以便创建数据。如果您不输出结果，则使处理脱机并且对用户无阻塞。对于长时间运行/可能阻塞的任务，我在[celery](http://docs.celeryproject.org/en/latest/index.html)上取得了巨大的成功（你不必使你的堆栈复杂化，因为 mongodb 作为队列后端工作得很好）。

MongoDB 在生产中具有跨大型集群的大量数据 - 因此 10,000 个文档是相对少量的数据。

# image - 在图像井中显示图像

> ID：12237474
> 
> 赞同：2
> 
> 时间：2012-09-02T16:02:49.300
> 
> 标签：image

我是一个初学者，试图显示图像，位图和 tiff 已经尝试过，在图像井或按钮中，但没有成功。代码如下。它运行但没有显示任何内容。我尝试了两种定义字符串的方法以及使用 self.well 或 _well 但没有任何效果。如果我尝试使用 [well1 setImage:testImage]; 如其他示例所示，我收到错误“使用未声明的标识符。

//代码是

```
 NSString *inFilePath = @"/Documents/Track1bmp.bmp";
  NSImage *testImage = [[NSImage alloc] initWithContentsOfFile:inFilePath];
   //well1 is your outlet
  [self.well1 setImage:testImage];
  [self.butt1 setImage:testImage];
  [_well2 setImage:testImage];

// Also trying this

  NSString* imageName = [[NSBundle mainBundle]
                       pathForResource:@"/Applications/Sudoku4/Pinktiff" ofType:@"TIFF"];
  NSImage* tempImage = [[NSImage alloc] initWithContentsOfFile:imageName];
  [self.well1 setImage:tempImage]; 
```

# java - 在 Java 中，如何在新的侦听器块中访问静态方法参数？

> ID：12237477
> 
> 赞同：2
> 
> 时间：2012-09-02T16:03:01.770
> 
> 标签：java, listener, static-methods, inner-classes

我有一个接受几个参数的静态方法。在该方法中，我正在创建一个新对象并为其附加一个新侦听器。问题是侦听器块需要访问外部静态方法变量，但我不知道如何引用它们。我知道如何使用非静态方法来实现这一点，但不是静态方法。

这是代码：

```
v.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                case MotionEvent.ACTION_UP:             
                    ((Activity)*context*).startActivityForResult(*intent*, 0);
                    break;
                }

                return true;
            }
        }); 
```

星号包围的上下文和意图变量是传递给静态方法的对象。由于 OnTouchListener 是一个内部块，它不知道这些对象。我怎样才能引用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:05:03.063

在创建侦听器之前，将静态方法的参数声明为 final 或将传入的参数分配给静态方法中的 final 局部变量。您可以使用匿名类定义中的最终引用。

# php - 加载视图时 CodeIgniter 的意外行为

> ID：12237478
> 
> 赞同：4
> 
> 时间：2012-09-02T16:03:04.990
> 
> 标签：php, codeigniter, bug-tracking

我有一个查看器辅助函数，可以在页脚/页眉旁边加载主要内容。当我为主要内容视图中的变量加载相同名称的标题的数组键时，发生错误/意外行为 - 为标题和主要内容加载了相同的数组。

我认为这很正常，因为相同的`$data`数组也被发送到标题和主要内容（如前所述）。所以变量自然会出现在两个视图中。但是，好吧，情况并非完全如此。我`$data`在将数据发送到标头后取消设置变量，然后在我想将一些数据发送到主视图时重新创建它 - 但问题仍然没有解决。

**我为这个错误/意外行为做了一个简单的例子：**

考虑这个视图，命名为`test`：

```
<?php 
echo $some_data; 
```

而这个控制器：

```
class Test extends CI_Controller {

    function index() {

    $data['some_data'] = 'Some data.';
    $this->load->view('test', $data);
    /* 
     * Output:
     * Some data.
     */
    unset($data);
    unset($data['some_data']);//Just to make sure it's not PHP's fault.
    $this->load->view('test');
    /*
     * Output:
     * Some data.
     * 
     * Even though the $data variable is unsetted AND not passed!
     */

    $different_data = array();

    $this->load->view('test', $different_data);     
    /*
     * Output:
     * Some Data.
     * 
     * Still outputs the same thing, even though
     * I'm sending different array(and the $data array is unstted).
     * 
     */ 

    }
} 
```

**注意：整个代码会输出`Some data.`三遍。**

解决此问题的唯一方法是发送一个不同的数组并将数组键（即`some_data`）设置为其他将覆盖旧数组的键。

那么，这是一个错误还是 CodeIgniter 的家伙制造的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-04T11:34:52.617

我们遇到了和你一样的问题，我们的 Alien 同事找到了解决方案：

如果文件：codeigniter\system\core\Loader.php

找到代码：（我认为行号是 806）：

`$this->_ci_cached_vars = array_merge($this->_ci_cached_vars, $_ci_vars);`

并将其更正为：

`$this->_ci_cached_vars = $_ci_vars;`

最好的祝福

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:19:21.297

这是预期的行为。

一旦设置了变量，它们就可以在控制器类及其视图文件中使用。发送一个数组与调用视图文件之前`$this->load->view()`直接发送一个数组相同。`$this->load->vars()`这简化了大多数人在控制器中使用多个视图的事情。如果您在单个控制器中使用多个视图文件并希望它们各自拥有自己的一组变量，则需要手动清除`$this->load->_ci_cached_vars`视图调用之间的数组。

Loader 类中的代码注释描述了另一种情况，说明了为什么这是所需的默认行为：

```
//You can either set variables using the dedicated $this->load_vars()
//function or via the second parameter of this function. We'll merge
//the two types and cache them so that views that are embedded within
//other views can have access to these variables. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:07:48.813

这是一个 CodeIgniter 问题。您发送的变量似乎会被缓存，直到您覆盖它们。我自己也遇到过，可以验证。

`$this->load->view('test', array('some_data' => NULL));`

# java - 测量java算法的性能

> ID：12237484
> 
> 赞同：3
> 
> 时间：2012-09-02T16:03:53.487
> 
> 标签：java, algorithm, testing

如何有效地衡量我的 java 算法的性能？有什么准确的方法吗？

我读了其他同类但不满意的问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:07:35.973

```
long reference=System.nanoTime();
your_funct();
long finishm=System.nanoTime();

System.out.println( ( (double)(finishm-reference) )/1000000000.0);  //in seconds 
```

在我的机器中具有约 0.003 秒的有意义的水平。我的意思是，您以纳秒为单位进行测量，但在我的机器中，最小的步长约为 3000000 纳秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T16:40:40.103

您要求性能表明某种时间。但那你会和什么比较呢？

衡量算法的一般方法是使用 Big O，它采用简化的数学方法。

为了在非常基本的层面上解释这一点，整数列表的简单线性搜索具有线性 (n) 最坏情况大 o。例如： for(int i = 0; i < sizeofarray; ++i) if(array[i] == to_find) return i;

在最坏的情况下，这将需要 i 次迭代（通常在大 o 中将数字称为 n） - 所以我们称之为 n 或线性复杂度算法。

类似于冒泡排序算法的东西是循环中的循环，因此我们有 n * n 复杂度 = n^2 或二次复杂度。

与 like 相比，如果我们只考虑排序，快速排序比二次复杂度（它是 n log n 复杂度）更有效，因此您可以认为快速排序比冒泡排序“更好”。

So when evaluating your algorithm think about it in terms of n. Is there a loop? how many? The fewer the better. No loops even better - constant big o.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T16:05:53.017

如果可以使其实用或理论。如果可行，则在算法开始之前放置一个计时器，并在算法结束时停止它。如果是理论上的，那么使用[Big O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)（不是那么难），您将获得对其时间或空间复杂度的估计。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T16:08:09.037

您可以使用一些分析器。许多 IDE（例如 Netbeans）都有一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-04T12:40:19.913

The best way to do it is still java.lang.System.currentTimeMillis() as it will work regardless the IDE you are using.

# c# - 索引 getter 中的 IndexOutOfRangeException

> ID：12237487
> 
> 赞同：5
> 
> 时间：2012-09-02T16:04:12.530
> 
> 标签：c#, .net, code-analyst

在我的索引属性中，我检查索引是否超出范围。如果是，我抛出一个`IndexOutOfBoundsException`.

当我运行代码分析器（在 VS12 中）时，它会抱怨 CA1065: Unexpected exception in unexpected location。

参考CA1065的描述，只有

```
System.InvalidOperationException
System.NotSupportedException
System.ArgumentException
KeyNotFoundException 
```

在索引 getter 中是允许的。

投掷`IndexOutOfBoundsException`对我来说似乎很自然，那么这里的推理是什么？（是的，我知道我可以关闭警告，我只是想知道原因）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T17:40:46.470

很多类都`ArgumentOutOfRangeException`用于此目的，包括[`List<T>`](http://msdn.microsoft.com/en-us/library/0ebtbkkc). 这是一个子类，`ArgumentException`所以应该满足规则。我想您可能会争辩说，对于直接访问的向量等，实际上没有方法调用（它是专用的操作码 - `ldelem*`），因此这种情况下的索引*实际上*不是参数。不过，这似乎是一个软弱的论据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T17:45:52.320

请参阅 MSDN：[IndexOutOfRangeException](http://msdn.microsoft.com/en-us/library/system.indexoutofrangeexception.aspx)是系统异常，保留用于访问数组元素。它是由一些 MSIL 指令抛出的：ldelem., ldelema, stelem..

对于开发类，请使用 ArgumentOutOfRangeException。

# c++ - boost.asio.detail.read_op 是什么意思？

> ID：12237493
> 
> 赞同：1
> 
> 时间：2012-09-02T16:04:50.187
> 
> 标签：c++, boost, boost-asio

我在boost.1.50源代码中阅读了asio，方法是什么？

```
void operator()(const boost::system::error_code& ec,
    std::size_t bytes_transferred, int start = 0)
{
  switch (start)
  {
    case 1:
    buffers_.prepare(this->check_for_completion(ec, total_transferred_));
    for (;;)
    {
      stream_.async_read_some(buffers_,
          BOOST_ASIO_MOVE_CAST(read_op)(*this));
      return; default:
      total_transferred_ += bytes_transferred;
      buffers_.consume(bytes_transferred);
      buffers_.prepare(this->check_for_completion(ec, total_transferred_));
      if ((!ec && bytes_transferred == 0)
          || buffers_.begin() == buffers_.end())
        break;
    }

    handler_(ec, static_cast<const std::size_t&>(total_transferred_));
  }
} 
```

代码是从 boost_1_50_0\boost\asio\impl\read.hpp 中获取的。switch case 样式看起来很奇怪，“return;default:”？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:56:10.800

这是一个管理组合读取操作的函子。

当第一次调用 ( `start == 1`) 时，它准备缓冲区，发出第一次读取，将自己作为完成处理程序传递，然后返回。

现在，每次作为完成处理程序调用时，它都会直接跳转到`default`标签并更新缓冲区和内部计数器，并在需要时发出另一个读取。

实际上，可以将此运算符拆分为 2 个单独的运算符：一个用于初始读取，另一个用于后续调用。但也许这种方法会生成更多代码，因此被库作者拒绝。

# macos - 有什么方法可以启用 Adob e Air Apps 的 MacOS Lion 原生全屏支持？

> ID：12237503
> 
> 赞同：3
> 
> 时间：2012-09-02T16:06:21.167
> 
> 标签：macos, air, adobe, osx-lion

仅有标准选项和无选项，但两者都不支持 Lion 的新全屏功能。

# ruby-on-rails - 如何在 localhost 中使用 rails plus 回形针和雾

> ID：12237508
> 
> 赞同：3
> 
> 时间：2012-09-02T16:06:36.977
> 
> 标签：ruby-on-rails, paperclip, fog

我正在尝试设置我的开发环境以在本地主机中存储和获取图像。我已经设法将图像保存在正确的路径上，但我找不到加载页面并从资产管道中检索它们的方法。

我的模型上有这个：

```
has_attached_file :cover, :styles => {:small => '80x80'},
                                    :storage => :fog,
                                    :fog_credentials => {:provider => "Local",
                                                         :local_root => "#{Rails.root}/public"},
                                    :fog_directory => 'system/migos',
                                    :fog_host => "http://localhost:3000/assets",
                                    :default_url => '/assets/missing/:attachment/missing_:class_:style.png',
                                    :path => ':rails_env/:class/:attachment/:id_partition/:style/:filename' 
```

并且文件被正确保存到： **public/system/migos/development/workgroups/covers/000/000/011/small/logo.png**

加载页面时，它会尝试从此处获取文件： **/assets/localhost/development/workgroups/covers/000/000/011/small/logo.png** ?1346598225 并失败。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:19:47.587

```
 has_attached_file :photo,
   :url  => "/assets/vehicles/:id/:style/:basename.:extension",
   :path => ":rails_root/public/assets/vehicles/:id/:style/:basename.:extension" 
```

试试上面的代码，检查 URL 和 PATH，它将返回下一个图像地址：

```
http://localhost:3000/assets/vehicles/1/original/72854906.jpg?1346092386 
```

文件夹结构为 assets/vehicles/1/original。

# video - 我可以将 CloudFlare 用作视频提供商吗？

> ID：12237509
> 
> 赞同：20
> 
> 时间：2012-09-02T16:06:43.897
> 
> 标签：video, cdn, cloudflare

我正在创建一个人们可以上传和观看视频的网站。我预计始终有 1000 名同时观看者（平均而言）。问题是我查看过的所有 CDN 收费约为 0.06 美元/GB。这意味着 0,17 MB/s (720p) x 1000 个用户 x 60 秒 x 60 分钟 / 1024 = 每小时 36 美元的托管费用！

我错过了什么吗？

在 CloudFlare，您无需为带宽付费。这是否意味着我可以在 CloudFlare 以非常便宜的价格买到它。这不是很好吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-04T10:49:42.300

**2018 年更新！**
[Cloudflare 现在有一个流媒体视频服务](https://www.cloudflare.com/products/cloudflare-stream/)来补充他们的 CDN，所以这肯定是第一个看的地方。但是，如果您只想在您的站点上托管一些 MP4 文件并节省一些带宽，那么以下帖子可能仍然相关。

* * *

假设您的视频内容只是通过 HTTP/HTTPS 下载的文件（而不是通过其他协议流式传输），那么 CloudFlare 似乎实际上可能支持这一点。

我刚刚在客户的网站上测试了一个 MP4 视频文件，它似乎被 CloudFlare 正确缓存了。

## 我的 CloudFlare 设置页面规则：

![在此处输入图像描述](../Images/8b92c57840f1c5464f9010185ef2f26e.png)

## 请求（显示缓存命中）：

![在此处输入图像描述](../Images/b5338804b31e962c9f867afc28f0e8ed.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-22T23:44:42.287

缓存一切规则将缓存它，因为它基本上是这样做的……缓存一切。

但是，我们不建议[通过 CloudFlare 的代理运行流媒体内容](https://support.cloudflare.com/hc/en-us/articles/200169706-Can-I-use-CloudFlare-with-a-streaming-music-or-video-site-)。在他们的网站上运行流媒体内容的人应该把它放在我们不接触的子域上。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-04T11:42:38.217

是的，您错过了 Cloudfare 只会缓存具有这些扩展名的“静态和小”文件的观点：https: [//support.cloudflare.com/hc/en-us/articles/200172516-What-file-extensions- dos-CloudFlare-cache-for-static-content-](https://support.cloudflare.com/hc/en-us/articles/200172516-What-file-extensions-does-CloudFlare-cache-for-static-content-)如您所见，mp4 和类似的不在列表中。

因此，假设大部分成本是带宽成本，您将拥有相同但更快的网站，因为某些资源将由 cloudfare CDN 提供服务。

这完全取决于您将拥有多少视频，但通常专用服务器会以固定的月费提供更多的存储空间（和足够的带宽）。问题是 1000 个同时查看者对于提供文件的单个服务器来说太多了。

# sql-server-2008 - 从 C# 运行 SSIS 包，并限制内存使用

> ID：12237510
> 
> 赞同：0
> 
> 时间：2012-09-02T16:06:43.873
> 
> 标签：sql-server-2008, c#-4.0, memory-leaks, ssis

我正在从 C# 代码运行一个 SSIS 包，如下所示：

```
ErrorHandler errorHandler = new ErrorHandler();
Application app = new Application();
DTSExecResult res;
Package pkg = app.LoadPackage(packagePath, null);
res = pkg.Execute(null, null, errorHandler, null, null); 
```

我有两个问题：

1.  什么“引擎”运行这个包？SQL Server 是否运行它，或者只需要一个较小的 SSIS 引擎。

2.  当这个 c# 代码（它是一个控制台应用程序）长时间运行时，它会逐渐消耗越来越多的内存。如何限制正在运行的包的内存使用量？

*想到的一个想法是，这种行为类似于 SQL Server 行为，即它占用内存并且从不释放它，当然是在定义的内存限制下。所以也许运行包的“引擎”设置了一定的内存限制，逐渐被填满。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:33:27.287

这是一些合理的推断——但并不准确。

1.  运行包的“引擎”是您在 C# 应用程序中引用的库。它与 DTExec 中的代码相同 - 使用代理 SSIS 作业步骤时执行 SSIS 包（在 SQL 2008R2 及更低版本中）的实用程序。（SSIS2012 在服务中使用相同的代码执行它们，而不是可执行文件。）不需要安装 SQL Server 数据库服务。在您运行代码的机器上需要完整的 SQL Server 许可证。所需的 SQL 安装部分只是 SSIS“共享”组件。
2.  在这个问题上我没有给你一个好的答案，因为我自己也遇到过类似的问题，还没有得到真正的答案。如果您观看任务管理器，您会发现私有工作集（您的进程实际使用的内存量）始终保持合理。是“提交大小”变得不合理。提交大小包括您的进程实际未使用但 Windows 已分配给它的内存。就我而言，在运行一个包很长一段时间后（它有一个循环来处理大量文件），我可以看到私有工作集稳定在 2GB，但看到提交大小增长并增长超过 4GB，直到包失败因为它无法获取内存。我不明白为什么会这样，因为我理解为我的进程保留了大量内存 t 实际上已经习惯了。我只能假设（没有根据）该进程在内部对内存进行了碎片化。它必须在这 4GB 中使用 2GB 的“散布”，使得散布在内存块周围的空白空间太小而无法填充任何请求。我不知道对内存进行“碎片整理”的 SSIS API 调用:)

我可以建议的是你创建你的包来限制自己。在我的情况下，使用循环，我可以实现“最大 20 个循环”，即使仍有文件要处理，程序包也会在 20 个循环后完成。返回值或数据库表可能表明还有更多的处理需要完成。在您的 C# 应用程序中，您可以循环调用 pkg.Execute，其中可能有一些 GC 尝试。我不知道这是否足以触发进程释放所获得的任何内存和/或连续重新分配它，但这就是我要尝试的。

# .net - XP Pro 上带有 WebBrowser 控件的访问冲突绘画 ToolStripComboBox

> ID：12237519
> 
> 赞同：3
> 
> 时间：2012-09-02T16:07:54.353
> 
> 标签：.net, windows

我正在调试一个问题，即当用户锁定/解锁机器或当用户点击 ctrl-alt-delete 然后点击转义（不一定锁定在这种情况——但他们可以选择锁定、启动任务管理器等）。这是非常可重复的。

它与绘画有关`ToolStripComboBox`。这在引擎盖下的`AccessViolationException`一些例程中产生了一个。`gdiplus`

我见过它崩溃的几种不同方式，但都在绘制此控件的同一区域。这是一个堆栈跟踪：

```
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
at System.Drawing.SafeNativeMethods.Gdip.GdipFillRectangleI(HandleRef graphics, HandleRef brush, Int32 x, Int32 y, Int32 width, Int32 height)
at System.Drawing.Graphics.FillRectangle(Brush brush, Int32 x, Int32 y, Int32 width, Int32 height)
at System.Drawing.Graphics.FillRectangle(Brush brush, Rectangle rect)
at System.Windows.Forms.ToolStripComboBox.ToolStripComboBoxControl.ToolStripComboBoxFlatComboAdapter.DrawFlatComboDropDown(ComboBox comboBox, Graphics g, Rectangle dropDownRect)
at System.Windows.Forms.ComboBox.FlatComboAdapter.DrawFlatCombo(ComboBox comboBox, Graphics g)
at System.Windows.Forms.ComboBox.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
... 
```

有没有人有关于如何解决这个问题的建议，或者机器锁定/解锁或 ctrl-alt-delete 屏幕的意义是什么？

编辑：

我将它归结为粘贴在下面的一个简单应用程序，它在 XP Pro 上非常可重现。这是非常普通的 - 就像我们能得到的一样简单。一切都是在 UI 线程上创建/操作的。

```
namespace Test
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }

    public class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, System.EventArgs e)
        {
            webBrowser2.Navigate("http://www.cnn.com");
        }

        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.toolStripContainer1 = new System.Windows.Forms.ToolStripContainer();
            this.webBrowser2 = new System.Windows.Forms.WebBrowser();
            this.toolStrip1 = new System.Windows.Forms.ToolStrip();
            this.toolStripLabel1 = new System.Windows.Forms.ToolStripLabel();
            this.toolStripComboBox1 = new System.Windows.Forms.ToolStripComboBox();
            this.toolStripContainer1.ContentPanel.SuspendLayout();
            this.toolStripContainer1.TopToolStripPanel.SuspendLayout();
            this.toolStripContainer1.SuspendLayout();
            this.toolStrip1.SuspendLayout();
            this.SuspendLayout();
            // 
            // toolStripContainer1
            // 
            this.toolStripContainer1.BottomToolStripPanelVisible = false;
            // 
            // toolStripContainer1.ContentPanel
            // 
            this.toolStripContainer1.ContentPanel.Controls.Add(this.webBrowser2);
            this.toolStripContainer1.ContentPanel.Size = new System.Drawing.Size(555, 268);
            this.toolStripContainer1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.toolStripContainer1.LeftToolStripPanelVisible = false;
            this.toolStripContainer1.Location = new System.Drawing.Point(0, 0);
            this.toolStripContainer1.Name = "toolStripContainer1";
            this.toolStripContainer1.RightToolStripPanelVisible = false;
            this.toolStripContainer1.Size = new System.Drawing.Size(555, 296);
            this.toolStripContainer1.TabIndex = 1;
            this.toolStripContainer1.Text = "toolStripContainer1";
            // 
            // toolStripContainer1.TopToolStripPanel
            // 
            this.toolStripContainer1.TopToolStripPanel.Controls.Add(this.toolStrip1);
            // 
            // webBrowser2
            // 
            this.webBrowser2.Dock = System.Windows.Forms.DockStyle.Fill;
            this.webBrowser2.Location = new System.Drawing.Point(0, 0);
            this.webBrowser2.MinimumSize = new System.Drawing.Size(20, 20);
            this.webBrowser2.Name = "webBrowser2";
            this.webBrowser2.Size = new System.Drawing.Size(555, 268);
            this.webBrowser2.TabIndex = 0;
            // 
            // toolStrip1
            // 
            this.toolStrip1.Dock = System.Windows.Forms.DockStyle.None;
            this.toolStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.toolStripLabel1,
            this.toolStripComboBox1});
            this.toolStrip1.Location = new System.Drawing.Point(3, 0);
            this.toolStrip1.Name = "toolStrip1";
            this.toolStrip1.Size = new System.Drawing.Size(173, 28);
            this.toolStrip1.TabIndex = 0;
            // 
            // toolStripLabel1
            // 
            this.toolStripLabel1.Name = "toolStripLabel1";
            this.toolStripLabel1.Size = new System.Drawing.Size(38, 25);
            this.toolStripLabel1.Text = "blah";
            // 
            // toolStripComboBox1
            // 
            this.toolStripComboBox1.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
            this.toolStripComboBox1.Items.AddRange(new object[] {
            "a b",
            "c",
            "d",
            "e",
            "f"});
            this.toolStripComboBox1.Name = "toolStripComboBox1";
            this.toolStripComboBox1.Size = new System.Drawing.Size(121, 28);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 16F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(555, 296);
            this.Controls.Add(this.toolStripContainer1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.Load += new System.EventHandler(this.Form1_Load);
            this.toolStripContainer1.ContentPanel.ResumeLayout(false);
            this.toolStripContainer1.TopToolStripPanel.ResumeLayout(false);
            this.toolStripContainer1.TopToolStripPanel.PerformLayout();
            this.toolStripContainer1.ResumeLayout(false);
            this.toolStripContainer1.PerformLayout();
            this.toolStrip1.ResumeLayout(false);
            this.toolStrip1.PerformLayout();
            this.ResumeLayout(false);
        }
        #endregion

        private ToolStripContainer toolStripContainer1;
        private ToolStrip toolStrip1;
        private ToolStripLabel toolStripLabel1;
        private ToolStripComboBox toolStripComboBox1;
        private WebBrowser webBrowser2;
    }
} 
```

编辑2：

我无法在 Windows XP Media Center 版本上重现这一点，到目前为止只有 XP Pro。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:20:03.857

这个问题我们已经有一段时间了。相同的调用堆栈，当用户执行 ctrl-alt-del 并转义时发生。场景有点不同，它发生在我们的 WinForm 应用程序中，该应用程序是 WinForm 和 WPF 控件的混合。在应用程序中，我们在 ElementHost 中托管了一个 WPF UserControl，当此组件位于浮动窗口中时，将鼠标悬停在正在重新绘制的 WinForm 控件上，并且屏幕被锁定和解锁时，会引发 AccessViolationException 并且应用程序崩溃. 我应该提到我们也在使用 Infragistics UltraDockWorkspace。

我们还没有找到解决方案，但是最近在使用 MS 源进行调试时，我在引发异常的方法（在 System.Drawing 中的 Graphics.cs 中）注意到了这条评论：

```
 /// <devdoc>
    ///     GDI+ will return a 'generic error' with specific win32 last error codes when
    ///     a terminal server session has been closed, minimized, etc...  We don't want 
    ///     to throw when this happens, so we'll guard against this by looking at the
    ///     'last win32 error code' and checking to see if it is either 1) access denied 
    ///     or 2) proc not found and then ignore it. 
    ///
    ///     The problem is that when you lock the machine, the secure desktop is enabled and 
    ///     rendering fails which is expected (since the app doesn't have permission to draw
    ///     on the secure desktop). Not sure if there's anything you can do, short of catching
    ///     the desktop switch message and absorbing all the exceptions that get thrown while
    ///     it's the secure desktop. 
    /// </devdoc>
    private void CheckErrorStatus(int status) { 
        if (status != SafeNativeMethods.Gdip.Ok) { 
            // Generic error from GDI+ can be GenericError or Win32Error.
            if (status == SafeNativeMethods.Gdip.GenericError || status == SafeNativeMethods.Gdip.Win32Error) { 
                int error = Marshal.GetLastWin32Error();
                if (error == SafeNativeMethods.ERROR_ACCESS_DENIED || error == SafeNativeMethods.ERROR_PROC_NOT_FOUND ||
                        //here, we'll check to see if we are in a term. session...
                        (((UnsafeNativeMethods.GetSystemMetrics(NativeMethods.SM_REMOTESESSION) & 0x00000001) != 0) && (error == 0))) { 
                        return;
                    } 
                } 

            //legitimate error, throw our status exception 
            throw SafeNativeMethods.Gdip.StatusException(status);
        }
    } 
```

根据我在这里的理解，由于在安全桌面模式下呈现，应该在此处抑制 AccessViolationException，但在某些情况下，此异常正在传播。

抱歉，我无法提供解决方案，但希望此信息有用。

# javascript - 这是正确的 javascript 代码格式吗？

> ID：12237520
> 
> 赞同：-1
> 
> 时间：2012-09-02T16:08:02.197
> 
> 标签：javascript, jquery

我正在尝试添加更改任何与具有 JQuery 元素的匹配项的 css，`b-video > p`但`embed`我遇到了麻烦。

我正在尝试使用以下代码：

```
$('div.b-video > p').has('embed').attr('style','display:block;'); 
```

任何人都可以帮忙吗？这是完整的代码：

```
<script type="text/javascript">
$(document).ready(function() {
$('div.sb-video > p').has('iframe').attr('style','display:block;');
$('div.sb-video > p').has('embed').css('display','block');
$('div.b-video > p').has('embed').css('display','block'); 
$('div.b-video > p').has('iframe').attr('style','display:block;');
});
</script> 
```

它适用于 iframe，但不适用于嵌入。

这是嵌入 HTML

```
<div class="b-video"><p>
<embed width="500" height="281" wmode="transparent" allowfullscreen="true" allowscriptaccess="always" type="application/x-shockwave-flash" src="http://v.wordpress.com/hrPKeL5t">
</p> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:09:09.487

不，不是。无论如何，那是 jQuery，而不是纯 JavaScript

它应该是

```
$('div.b-video > p').has('embed').css('display','block'); 
```

只需查看文档（[http://api.jquery.com/has/](http://api.jquery.com/has/)），它有以下示例：

```
$('li').has('ul').css('background-color', 'red'); 
```

# javascript - 我不能让 Divs 中的 3 个 twitter 小部件彼此相邻排列？

> ID：12237523
> 
> 赞同：0
> 
> 时间：2012-09-02T16:08:21.203
> 
> 标签：javascript, css, html, twitter

除了第 3 个小部件位于所有其他小部件的下方但仍位于右侧之外，它们都去了正确的位置。

Stackoverflow 不太好，所以我不得不将代码放在 Pastbin 上。

HTML [http://pastebin.com/hSLwp2u7](http://pastebin.com/hSLwp2u7)

CSS [http://pastebin.com/k0eWm0Bn](http://pastebin.com/k0eWm0Bn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:21:13.993

试试这个

```
#midtweet{
    margin:0 4.5%;
    float: left;
    width: 30%;
 } 
```

还从#leftweet 中删除边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:33:10.127

`center`不是浮点数的正确值，所以中间的不是浮点数，这就是为什么第三个在第二个下呈现的原因。此外，“margin: auto”对于浮点数绝对没有意义。

你应该要么让中间的一个浮动，要么一起摆脱浮动并[使用`display: table-cell`](http://jsfiddle.net/R4QPj/14/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:57:58.490

这是正确的代码：

CSS： http: [//pastebin.com/B7N5uyYZ](http://pastebin.com/B7N5uyYZ)

更改： 1\. 浮动没有中心值（与 lqc 相同） 2\. 左右浮动不需要自动边距（再次与 lqc 相同） 3\. 重要的事情：当您将左右边距设置为自动时边距覆盖整个 div，因此附近没有其他元素可以呈现。所以一个小数学： (100 - (30*3))/2 = 5 .. 所以你需要给中间元素 5% 的边距才能进入中心。（纠正Hareesh ..这不是99％。这是100％的人：D）

# ios - Core Data 关系可以是它自己的逆关系吗？

> ID：12237524
> 
> 赞同：0
> 
> 时间：2012-09-02T16:08:22.093
> 
> 标签：ios, core-data, entity-relationship

Core Data 关系可以是它自己的逆关系吗？

我有一个通用实体，用于表示不同类型的对象。其中一些对象彼此之间有一对多的关系。我是简单地将关系设置为它自己的逆关系，还是创建一个与逆关系具有相同目的地的新关系？

由于 Xcode 为您提供了将关系设置为它自己的逆关系的选项，所以我假设它没问题，但只是想确定一下。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:38:50.510

是的，这种关系没有问题。您可能总是有指向类中对象的链接，甚至指向对象本身。

以防万一您必须从 ManagedObjectContext 中删除对象，您需要考虑此处的删除规则[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html#// apple_ref/doc/uid/TP40001857-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-SW1)。

但总的来说，你的方法真的没有问题......

# iphone - 如何禁用 UIScrollView 的减速动画？

> ID：12237525
> 
> 赞同：1
> 
> 时间：2012-09-02T16:08:28.627
> 
> 标签：iphone, ios, cocoa-touch, ipad, uiscrollview

有没有办法禁用它，这样当用户停止滚动时，滚动视图会立即停止滚动，而不是慢慢减速？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-23T07:19:44.843

只需在`ScrollView`委托方法 ( `willBeginDecelerating`) 中添加这一行。

```
[scrollView setContentOffset:scrollView.contentOffset animated:NO]; 
```

参考 [停止 UIScrollView 减速](https://stackoverflow.com/questions/2037892/stop-deceleration-of-uiscrollview)， [如何以编程方式强制停止 UIScrollView 中的滚动？](https://stackoverflow.com/questions/3410777/how-can-i-programmatically-force-stop-scrolling-in-a-uiscrollview)

# javascript - 计算一个div中有多少个元素

> ID：12237529
> 
> 赞同：33
> 
> 时间：2012-09-02T16:08:54.977
> 
> 标签：javascript, html

我有一个里面有 span 的 div。有没有一种方法可以计算 div 中有多少元素，然后将其作为值给出。例如，一个 div 中有 5 个跨度，然后它会计算它并警告 5 个。请在 Javascript 中。

谢谢你。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-02T16:22:14.507

如果你想要后代的数量，你可以使用

```
var element = document.getElementById("theElementId");
var numberOfChildren = element.getElementsByTagName('*').length 
```

但是，如果您想要直系子女的数量，请使用

```
element.childElementCount 
```

在此处查看浏览器支持：http: [//help.dottoro.com/ljsfamht.php](http://help.dottoro.com/ljsfamht.php)

或者

```
element.children.length 
```

在此处查看浏览器支持：[https ://developer.mozilla.org/en-US/docs/DOM/Element.children#Browser_compatibility](https://developer.mozilla.org/en-US/docs/DOM/Element.children#Browser_compatibility)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-02T16:15:07.983

您可以使用此功能，它将避免计算 TextNodes。可以选择对孩子的孩子进行计数（即递归）

```
function getCount(parent, getChildrensChildren){
    var relevantChildren = 0;
    var children = parent.childNodes.length;
    for(var i=0; i < children; i++){
        if(parent.childNodes[i].nodeType != 3){
            if(getChildrensChildren)
                relevantChildren += getCount(parent.childNodes[i],true);
            relevantChildren++;
        }
    }
    return relevantChildren;
} 
```

用法：

```
var element = document.getElementById("someElement");
alert(getCount(element, false)); // Simply one level
alert(getCount(element, true)); // Get all child node count 
```

在这里尝试一下： [JS Fiddle](http://jsfiddle.net/tsgXs/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-02T16:13:38.667

没有 jQuery：

```
var element = document.getElementById("theElementId");
var numberOfChildren = element.children.length 
```

使用 jQuery：

```
var $element = $(cssSelectocr);
var numberOfChildren = $element.children().length; 
```

这两个都只返回直系子级。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-02T16:16:39.360

使用 jQuery；仅检查 div 内的跨度：

[JSFiddle](http://jsfiddle.net/gbsandeep/FfcFM/)

```
$(function(){
    var numberOfSpans = $('#myDiv').children('span').length;
    alert(numberOfSpans);
})();​ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-01T02:34:05.420

我可能会添加一个愚蠢而简单的答案

```
<div>this is div no. 1</div>
<div>this is div no. 2</div>
<div>this is div no. 3</div> 
```

您可以通过以下方式获取文档中的 div 数量：

```
const divs = document.querySelectorAll('div');
console.log(divs.length) // 3 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-02T16:12:00.420

使用 jQuery，您可以这样做：

```
var count = $('div').children().length;
alert( count );​​​ 
```

这是一个小提琴：http: [//jsfiddle.net/dryYq/1/](http://jsfiddle.net/dryYq/1/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-02T16:24:13.810

要计算所有后代元素，包括纯 javascript 中的嵌套元素，有几个选项：

最简单的大概是这样的：

```
var count = parentElement.getElementsByTagName("*").length; 
```

如果您想自由地围绕您的计数添加更多逻辑，您可以像这样通过本地树递归：

```
function countDescendantElements(parent) {
    var node = parent.firstChild, cnt = 0;
    while (node) {
        if (node.nodeType === 1) {
            cnt++;
            cnt += countDescendantElements(node);
        }
        node = node.nextSibling;
    }
    return(cnt);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/kD73F/](http://jsfiddle.net/jfriend00/kD73F/)

如果您只想计算直接子节点（不是更深层次）并且只想计算元素节点（不是文本或注释节点）并且想要广泛的浏览器支持，您可以这样做：

```
function countChildElements(parent) {
    var children = parent.childNodes, cnt = 0;
    for (var i = 0, len = children.length; i < len; i++) {
        if (children[i].nodeType === 1) {
            ++cnt;
        }
    }
    return(cnt);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-27T14:24:35.283

最简单的方法是选择 div 内的所有跨度，这将返回一个节点列表，其中包含所有跨度...然后您可以像下面的示例一样提醒长度。

```
alert(document.querySelectorAll("div span").length)
```

```
<div>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
</div>
```

# android - 使用 Viewpager 显示特定数量的选项卡

> ID：12237530
> 
> 赞同：3
> 
> 时间：2012-09-02T16:09:09.047
> 
> 标签：android, tabs, android-viewpager

我正在使用 ViewPager 在 4 个选项卡之间滑动。我很想将当前选项卡位于对齐中间的选项卡对齐，并且在最右边有一个选项卡（如果可用），在最左边有一个。

我知道你可以用一些第三方库（例如，Jake Wharton）做一些棘手的事情。但是我可以使用本机 ViewPager 进行此控制吗？（我也在使用支持库 v4。）

**至少，我的问题是，我可以定义屏幕上显示多少个选项卡吗？我有 4 个，并且在任何给定时间都想要 3 个。**

这是我的布局

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="horizontal" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0" />

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-30T16:37:26.620

选项卡式应用程序的正常视图在顶部有三个选项卡，您可以在它们之间滑动。如果您的 viewpager 中有更多选项卡，您可以滚动浏览任意数量的选项卡。

实现将与此类似：

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    private ViewPager ViewPager;
    private TabsPagerAdapter SectionsPagerAdapter;
    private ActionBar actionBar;

    private String[] tabs = { "Event Details", "Line-up", "Donations", "Concert"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

     // Initialisation
        ViewPager = (ViewPager) findViewById(R.id.pager);
        actionBar = getActionBar();
        SectionsPagerAdapter = new TabsPagerAdapter(getSupportFragmentManager());

        ViewPager.setAdapter(SectionsPagerAdapter);
        actionBar.setHomeButtonEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 

     // Adding Tabs
        for (String tab_name : tabs) {
            actionBar.addTab(actionBar.newTab().setText(tab_name).setTabListener(this));
        }

        ViewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

            @Override
            public void onPageSelected(int position) {
                // on changing the page
                // make respected tab selected
                actionBar.setSelectedNavigationItem(position);
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
            }

            @Override
            public void onPageScrollStateChanged(int arg0) {
            }
        });
    }

    @Override
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {

    }

    @Override
    public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
        ViewPager.setCurrentItem(tab.getPosition());

    }

    @Override
    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
    }
} 
```

希望这可以帮助 ：）

# google-maps-api-3 - Google 地图 v3 示例在我的网站上不起作用 - 对象在 main.js 中没有“加载”方法或未定义 _xdc_。

> ID：12237535
> 
> 赞同：-1
> 
> 时间：2012-09-02T16:09:28.763
> 
> 标签：google-maps-api-3

我正在尝试制作此[https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel?hl=ru](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel?hl=ru) 但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:30:11.280

您将 API 包含两次。删除第二个包含，以

`<!--<script src`...

你不能那样注释掉脚本

您对该页面进行了其他更改，包括页面加载方式。

当我“开箱即用”使用它时，只需修复缺少的 css 规则，它就[对](http://www.geocodezip.com/v3_GoogleEx_directions-panel.html)我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:27:10.507

问题是以下css不起作用。

```
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet"> 
```

如果没有为`<div id="map_canvas"></div>`. 这是在 default.css 中完成的。使用 chrome 或 IE 检查，将 default.css 文件保存在本地计算机上并更改 html 所在的路径并相应地设置链接标签的 href。

# php - 我如何插入 Table1 中的 table2.column = value？

> ID：12237539
> 
> 赞同：0
> 
> 时间：2012-09-02T16:09:49.530
> 
> 标签：php, sql

我有一个基本上像标题一样的问题，我尝试过的查询是：

```
INSERT INTO 
  pendingresults, 
  l1_afixtures (pendingresults.TeamAName, pendingresults.TeamA, 
pendingresults.TeamAScore, pendingresults.TeamBScore, pendingresults.TeamB) 
VALUES (
  '$pls', 
  '$TeamA', 
  '$TeamAScore', 
  '$TeamBScore', 
  '$TeamB') 
WHERE 
  l1_afixtures.team_name = $TeamA 
AND  
  l1_afixtures.fixture = $TeamB 
AND 
  l1_afixtures.disabled = 'enabled'; 
```

这个查询有什么问题吗，我知道没有

```
 where l1_afixtures.team_name = $TeamA AND  
 l1_afixtures.fixture = $TeamB AND l1_afixtures.disabled = 'enabled'; 
```

工作，但与 where 功能我似乎无法让它工作

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:18:20.317

你可以这样尝试：

```
INSERT INTO Table2 (<columns>)
SELECT <columns>
FROM Table1
WHERE <condition>; 
```

在这种特殊情况下，它可能是这样的：

```
INSERT INTO pendingresults (TeamAName, TeamA, TeamAScore, TeamBScore, TeamB) 
SELECT TeamAName, TeamA, TeamAScore, TeamBScore, TeamB
FROM l1_afixtures
WHERE 
    l1_afixtures.team_name = $TeamA 
    AND l1_afixtures.fixture = $TeamB 
    AND l1_afixtures.disabled = 'enabled' 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-02T16:11:17.050

你不能做一个`INSERT ... VALUES... WHERE`

你可以做一个`INSERT .... SELECT ... WHERE`

而且您一次只能`INSERT`进入一张桌子。

所以

```
insert into pendingresults (TeamAName, TeamA, TeamAScore, TeamBScore, TeamB) 
values('$pls', '$TeamA', '$TeamAScore', '$TeamBScore', '$TeamB') 
```

或者

```
insert into pendingresults (TeamAName, TeamA, TeamAScore, TeamBScore, TeamB) 
Select TeamAName, TeamA, TeamAScore, TeamBScore, TeamB
from l1_afixtures
where 
    l1_afixtures.team_name = $TeamA 
    AND l1_afixtures.fixture = $TeamB 
    AND l1_afixtures.disabled = 'enabled' 
```

# android - Android 静音模式切换

> ID：12237542
> 
> 赞同：1
> 
> 时间：2012-09-02T16:11:06.597
> 
> 标签：android

我开始为傻瓜阅读 Android，我正在尝试制作我的第一个应用程序，即静音模式切换。

现在我面临的问题是：

在布局中，我需要的东西应该只有一个按钮。如果手机处于静音状态，则文本应显示“已激活静音模式”，而当手机处于正常模式时，应显示“已激活正常模式”。

它应该询问用户他/她是否想要激活振动模式。

下面是我的代码：

**XML 布局**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff" >    

    <ImageView
        android:id="@+id/phone_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="7dp"
        android:src="@drawable/phone_on" />

    <Button
        android:id="@+id/silent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="35dp"
        android:text="@string/silent_off" />

</LinearLayout> 
```

**Java 代码**

```
public class MainActivity extends Activity {
    private AudioManager mAudioManager;
    private boolean mPhoneIsSilent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        super.onCreate(savedInstanceState);
        mAudioManager = (AudioManager)getSystemService(AUDIO_SERVICE);
        checkIfPhoneIsSilent();
        setButtonClickListener();
        Log.d("SilentModeApp", "This is a test");
    }    

    private void setButtonClickListener() {
        Button toggleButton = (Button)findViewById(R.id.silent);
        toggleButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (mPhoneIsSilent) {
                    //change back to normal mode
                    mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                    mPhoneIsSilent = false;
                }
                else
                {
                    //change to silent mode
                    mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    mAudioManager.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                    mPhoneIsSilent = true;
                }
                // Now toggle the UI again
                toggleUi(); 
            }
        });
    }

    private void checkIfPhoneIsSilent() {
        int ringermode = mAudioManager.getRingerMode();
        if (ringermode == AudioManager.RINGER_MODE_SILENT) {
            mPhoneIsSilent = true;
        }
        else
        {
            mPhoneIsSilent = false;
        }
    }

    private void toggleUi() {
        ImageView imageView = (ImageView) findViewById(R.id.phone_icon);
        Drawable newPhoneImage;
        if (mPhoneIsSilent){
            newPhoneImage = 
                    getResources().getDrawable(R.drawable.phone_silent);
        }
        else
        {
            newPhoneImage = 
                    getResources().getDrawable(R.drawable.phone_on);

        }
        imageView.setImageDrawable(newPhoneImage);
    }

    @Override      
    protected void onResume() {
        super.onResume();
        checkIfPhoneIsSilent();
        toggleUi();
    }
} 
```

**更新**

现在我删除了“mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);”，它从正常模式进入振动模式。

我需要布局方面的帮助。

我需要 3 个按钮和一个文本状态文本 - 我知道如何创建按钮和文本消息，但我不知道如何将它与 java 集成。

如果手机处于正常模式，我需要在按钮上方的图片下方显示一条状态消息：（XXX 模式已激活）其中 XXX 是静音、正常或振动。

如果手机处于正常模式，则应该只有 2 个按钮：切换到静音模式和切换到振动模式。

其他模式也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:41:25.563

听起来您想要一个文本视图来说明静音模式是否已激活/未激活？即只是按钮附近的一小段文字，显示状态？你的按钮也会动态出现/消失吗？

```
TextView tv = (TextView)findviewbyid(R.id.relevanttextview); //text above button/wherever
Button bt = (Button)findviewbyid(R.id.relevantbutton); //button to make appear/dissapear 

if(vibrate is on){
tv.setText("vibrate is on");
bt.setVisibility(View.VISIBLE); //make button appear
}

if(normal mode is on){
tv.setText("normal");
bt.setVisibility(View.INVISIBLE); //make button dissapear
} 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-18T16:38:32.463

```
AndriodManifest.xml
<uses-permission android:name="android.permission.ACCESS_NOTIFICATION_POLICY"/>

package com.example.myapplication;

import android.Manifest;
import android.app.AlertDialog;
import android.app.NotificationManager;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.database.ContentObserver;
import android.media.AudioManager;
import android.os.Build;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import android.os.Handler;
import android.provider.Settings;
import android.service.notification.StatusBarNotification;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.ImageView;
import static android.app.NotificationManager.*;

public class MainActivity extends AppCompatActivity {
    AudioManager audioManager;
    //private int CAMREA_CODE = 1;

    private int MOD_ADO_CODE=1;
    private NotificationManager mNotificationManager;
    private StatusBarNotification[] mText;
    private int MZenMode;
    private static final String TAG = "ZenModeObserver";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
        setContentView(R.layout.activity_main);
        FrameLayout contentView = (FrameLayout) findViewById(R.id.content);
        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        contentView.setOnClickListener(
                new View.OnClickListener() {
                    public void onClick(View v) {
                        //RingerHelper.performToggle(audioManager);
                        //Toast.makeText(MainActivity.this, Policy, Toast.LENGTH_SHORT).show();
                        try {
                            MZenMode=logZenModeState();
                        } catch (Settings.SettingNotFoundException e) {
                            e.printStackTrace();
                        }
                        if (MZenMode==2)
                            changeInterruptionFiler(INTERRUPTION_FILTER_ALL);
                        else
                            changeInterruptionFiler(INTERRUPTION_FILTER_NONE);
                        updateUi();
                    }
                }
        );
    }
    private void updateUi() {
        ImageView imageView = (ImageView) findViewById(R.id.phone_icon);
        int phoneImage = MZenMode==2?R.drawable.ringer_off : R.drawable.ringer_on;
        //int phoneImage = RingerHelper.isPhoneSilent(audioManager) ? R.drawable.ringer_off : R.drawable.ringer_on;
        imageView.setImageResource(phoneImage);
    }

    protected void changeInterruptionFiler(int interruptionFilter) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            if (mNotificationManager.isNotificationPolicyAccessGranted()) {
                mNotificationManager.setInterruptionFilter(interruptionFilter);

            } else {
                Intent intent = new Intent(Settings.ACTION_NOTIFICATION_POLICY_ACCESS_SETTINGS);
                startActivity(intent);
            }
        }
    }

    private int logZenModeState() throws Settings.SettingNotFoundException {
        int zenModeValue = Settings.Global.getInt(getContentResolver(), "zen_mode");
        return zenModeValue;
    }

    private class ZenModeObserver extends ContentObserver {

        ZenModeObserver(Handler handler) {
            super(handler);
        }
    }
        @Override
    protected void onResume()
    {
        super.onResume();
        updateUi();
    }

} 
```

# iphone - CGContextRef - EXC_BAD_ACCESS 错误

> ID：12237554
> 
> 赞同：2
> 
> 时间：2012-09-02T16:12:14.723
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我正在继承 UIView 并使用它的实例来设置我的 UITableViewCell backgroundView 和 selectedBackedView 属性。我在 UIView 子类的 drawRect 方法中收到 EXC_BAD_ACCESS 错误。

```
 if(nil == cell){

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                 reuseIdentifier:CellIdentifier];
    cell.backgroundView = [[CCViewBackground alloc]init];
    cell.selectedBackgroundView = [[CCViewBackground alloc]init];

    } 
```

UIView 子类 CCBackgroundView -drawRect：

```
- (void)drawRect:(CGRect)rect
{
     // Drawing code
     CGContextRef context = UIGraphicsGetCurrentContext();

     CGColorRef redColor = 
     [UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0].CGColor;

     CGContextSetFillColorWithColor(context, redColor); //Receiving EXC_BAD_ACCESS here
     CGContextFillRect(context, self.bounds);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T17:02:27.303

我假设您正在使用ARC。如果是这样，您将遇到一个众所周知的问题，`CGColorRef`即发布时间比您预期的要早。[本文](https://www.bignerdranch.com/blog/arc-gotcha-unexpectedly-short-lifetimes/)详细解释了该问题并提供了几种解决方案。

# java - 反思：为什么会有setAccessible()这样的方法？

> ID：12237565
> 
> 赞同：4
> 
> 时间：2012-09-02T16:13:19.620
> 
> 标签：java, reflection, language-design, access-modifiers

只是想知道，为什么发明 Java 的人会编写类似 的方法`setAccessible(boolean flag)`，这使得访问修饰符（特别是私有的）无用并且无法保护字段、方法和构造函数不被访问？看下面这个简单的例子：

```
public class BankAccount
{
    private double balance = 100.0;

    public boolean withdrawCash(double cash)
    {
        if(cash <= balance)
        {
            balance -= cash;
            System.out.println("You have withdrawn " + cash + " dollars! The new balance is: " + balance);
            return true;
        }
        else System.out.println("Sorry, your balance (" + balance + ") is less than what you have requested (" + cash + ")!");
        return false;
    }
} 
```

```
import java.lang.reflect.Field;

public class Test
{
    public static void main(String[] args) throws Exception
    {
        BankAccount myAccount = new BankAccount();
        myAccount.withdrawCash(150);

        Field f = BankAccount.class.getDeclaredFields()[0];
        f.setAccessible(true);
        f.set(myAccount, 1000000); // I am a millionaire now ;)

        myAccount.withdrawCash(500000);
    }
} 
```

**输出：**

```
Sorry, your balance (100.0) is less than what you have requested
(150.0)! You have withdrawn 500000.0 dollars! The new balance is: 500000.0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T16:20:20.397

因为某些代码是受信任的代码——即，如果本地应用程序想要这样做，也许这没什么大不了的。但是，对于*不受信任的代码*——例如，applet，或 web 启动应用程序，或 RMI 存根，或任何其他下载的代码——有一个适当的`SecurityManager`位置，它（通常基于策略文件）有机会说“对不起，查理”并拒绝该`setAccessible()`请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:24:52.020

Well, once you have released a Java program, anyone is free to reverse engineer, or de-compile, it anyways, so if someone wanted it badly enough, they would probably be able to access your your "privates" anyway.

What you *can* do however, is to forbid any foreign code to access your stuff in *your runtime*. That is, if you're for instance using someone else's code you could disable reflections, access to files etc before those libraries are used.

Search for ClassLoader and Security Manager to find out more. [Here](http://www.cs.ait.ac.th/~on/O/oreilly/java-ent/security/ch06_02.htm)'s something that looks relevant.

# c++ - C++ 指针混淆（二叉搜索树）

> ID：12237573
> 
> 赞同：1
> 
> 时间：2012-09-02T16:13:57.363
> 
> 标签：c++

```
struct node{
  int element;
  node* left;
  node* right;
};

typedef node* SET;

void INSERT(int x, SET* A){
  node* pA = *A;
  if (pA == NULL){
    pA = new node;
    pA->element = x;
    pA->left = NULL;
    pA->right = NULL;
  }
  else{
    if (x < pA->element){
      INSERT(x,&(pA->left));
    }
    else if (x>pA->element){
      INSERT(x, &(pA->right));
    }
  }
}

int main(){
  node* A = NULL;
  INSERT(1,&A);
  cout <<A->element<<endl;
  return 0;
} 
```

上面的代码是一个简单的插入方法，它将一个元素插入到 BST 中。当我访问 A-> 元素时，我只是不断获得段默认值。非常感谢您的回答。

**编辑：**

哇，这个指针的东西真的很混乱。所以当我做 node* pA = *A 时，我想我会创建一个指向 A 位置的指针。然后当我做 pA = new node 时，它​​会在 pA 指向的堆中创建一个节点对象，这是相同的作为A。我说错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:20:15.010

你没有改变`*A`：

```
 if (pA == NULL) {
     pA = new node;
     pA->element = x;
     pA->left = NULL;
     pA->right = NULL;

     *A = pA;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:16:29.803

我会将其更改为：

```
void INSERT(int x, SET* A){
  if (*A == NULL){
     *A = new node;
     *A->element = x;
     *A->left = NULL;
     *A->right = NULL;
 }
 /* The rest */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T17:12:41.997

考虑使用 C++ 引用。

引用允许`A`in`INSERT`和`A`in`main`表示相同的数据，减少指针混淆。

```
struct node{
  int element;
  node* left;
  node* right;
};

void INSERT(int x, node* &A){
  if (A == NULL){
    A = new node;
    A->element = x;
    A->left = NULL;
    A->right = NULL;
  }
  else{
    if (x < A->element){
      INSERT(x,&(A->left));
    }
    else if (x>A->element){
      INSERT(x, &(A->right));
    }
  }
}

int main(){
  node* A = NULL;
  INSERT(1,A);
  cout <<A->element<<endl;
  return 0;
} 
```

# webcam - DirectShow - 在查看时捕获网络摄像头？

> ID：12237577
> 
> 赞同：2
> 
> 时间：2012-09-02T16:14:49.633
> 
> 标签：webcam, directshow, video-capture, directshow.net, audio-capture

我正在尝试用 c# 制作一个允许用户录制视频的网络摄像头应用程序。我一直在使用 DirectShow.Net 来预览网络摄像头并拍摄快照。但需要能够在预览网络摄像头的同时捕捉视频和音频。我尝试过的一件事是使用捕获多个快照并使用 ffmpeg 将它们转换为视频，但这显然不会捕获音频。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:46:55.530

您应该注意的事项：

1.  捕获设备通常是专门使用的，因此可以在单个图形中使用
2.  图表整体改变状态，你不能停止图表的一部分，尤其是。与预览分开开始/停止录制

最简单的方法是创建一个同时进行记录和预览的图表：

[![在 DirectShow 中捕获和预览过滤器图](../Images/0170a4586fe12e235df285bf42b17274.png)](https://i.imgur.com/oDZK4.png)

一个更复杂的场景是创建 2 个图表用于捕获+预览以及从第一个到第二个记录和复制数据，以便您可以分别无缝地开始/停止记录。

# .htaccess - 如何在标题中使用带有 301 的 Errordocument 404？

> ID：12237579
> 
> 赞同：1
> 
> 时间：2012-09-02T16:14:55.393
> 
> 标签：.htaccess, redirect, http-status-code-404

我有一个动态内容网站，我想将所有不存在的页面重定向到索引页面，但标题显示 301 永久重定向而不是 404 错误。

我知道我可以使用 .htaccess 重定向

```
Errordocument 404 /index.php 
```

但这将在标题中具有 404 状态，我希望标题显示 301 重定向。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:52:35.687

首先，你不应该。如果有些内容没有找到，服务器应该返回404；仅当内容已被移动时，您才应返回 301。

也就是说，可以使用[mod_rewrite 模块](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [R=301] 
```

这应该将请求重定向到不是文件或目录的 URI 到 index.php，标头为 301。

但话又说回来，不要。它肯定会混淆人类访问者和搜索引擎。

# sql - 为什么这个日期比较 where 子句没有返回结果？

> ID：12237583
> 
> 赞同：0
> 
> 时间：2012-09-02T16:15:16.563
> 
> 标签：sql, oracle

```
SELECT * FROM TABLE1
WHERE WEEKENDDT = (SELECT MAX(ENDDTE)FROM TABLE2) 
```

由于某种原因，此选择不返回数据。两个表都有特定日期的数据：MAX(ENDDTE) 有 02-MAY-12 的数据，WEEKENDDT 也有 02-MAY-12 的数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T17:49:19.050

如果`time`部分`date`不同，就会发生这种情况。

例如，如果`WEEKENDDT`in`Table1`具有值`02-09-2012 18:47`，并且`MAX(ENDDTE)`of`Table2`是`02-09-2012 00:00`，则它们***不***相等，因此无法与 进行比较`=`。

如果要截断`time`部分，只需使用[`TRUNC()`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions201.htm)：

```
SELECT * FROM TABLE1
WHERE TRUNC(WEEKENDDT) = (SELECT TRUNC(MAX(ENDDTE)) FROM TABLE2) 
```

这是一个**[演示](http://sqlfiddle.com/#!4/cd58f/2)**。

# r - 为什么 R 找不到 auto.arima 函数？

> ID：12237584
> 
> 赞同：3
> 
> 时间：2012-01-09T02:21:19.147
> 
> 标签：r, java

我是 R 新手。我想使用该`auto.arima`功能时遇到错误。消息是：

> 找不到函数“auto.arima”

我已经安装了`forecast`软件包。我正在使用 R2.14.1 版本并在 windows 7 操作系统中预测 3.16。我能做些什么？

如果我可以`auto.arima`在 R 中使用该函数并获得最佳结果模型，我想`auto.arima`在我的 Java 项目中调用该方法。我将如何在 java 项目中使用 R 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-01-09T12:55:49.953

正如其他人指出的那样：您已经使用`install.packages()`菜单或从菜单下载了软件包，但您没有*加载*软件包。这是由`library(forecast)`或完成的`require(forecast)`。您也可以使用命令获得单个功能：`package::function()`就像：`forecast::auto.arima()`。这么多需要澄清一下。如果您需要图形用户界面（它让生活更轻松），请查看 Zach 提出的 Rstudio [Rstudio](http://www.rstudio.org)或 R 指挥官 `install.packages(Rcmdr)`或 rJava。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-09T03:31:19.413

1.  正如@Jeromy Anglim 所说：`library(forecast)`
2.  [http://www.rforge.net/rJava/](http://www.rforge.net/rJava/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T03:25:44.513

安装时，请确保标记“安装依赖项”选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-22T01:57:27.387

要使用 auto.arima 包，您需要安装包“quadprog”。首先安装该软件包并将预测放入库中，你应该没问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T07:51:57.387

您需要执行以下步骤

```
install.packages("xts")
install.packages("forecast", dependencies = TRUE)
library(forecast) 
```

这对我有用。

# python - 如何使用 python-requests 和 event hooks 编写带有回调函数的网络爬虫？

> ID：12237587
> 
> 赞同：4
> 
> 时间：2012-09-02T16:15:18.103
> 
> 标签：python, callback, web-scraping, python-requests

我最近看了一下[python-requests](http://docs.python-requests.org)模块，我想用它写一个简单的网络爬虫。给定一组起始 url，我想编写一个 Python 函数，在起始 url 的网页内容中搜索其他 url，然后再次调用相同的函数作为回调，并将新的 url 作为输入，依此类推。起初，我认为[事件挂钩](http://docs.python-requests.org/en/latest/user/advanced/#event-hooks)是用于此目的的正确工具，但它的文档部分非常稀疏。在[另一页上](http://notebook.okfn.org/2011/10/08/implementing-an-http-cache-using-requests-api-hooks/)，我读到用于事件挂钩的函数必须返回传递给它们的相同对象。所以事件挂钩对于这类任务显然是不可行的。或者我根本没听懂……

这是我想做的一些伪代码（从伪 Scrapy 蜘蛛借来的）：

```
import lxml.html    

def parse(response):
    for url in lxml.html.parse(response.url).xpath('//@href'):
        return Request(url=url, callback=parse) 
```

有人可以告诉我如何使用 python-requests 来做这件事吗？事件挂钩是正确的工具还是我需要不同的东西？（**注意：**由于各种原因，Scrapy 不是我的选择。）非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T17:59:19.023

这是我的做法：

```
import grequests
from bs4 import BeautifulSoup

def get_urls_from_response(r):
    soup = BeautifulSoup(r.text)
    urls = [link.get('href') for link in soup.find_all('a')]
    return urls

def print_url(args):
    print args['url']

def recursive_urls(urls):
    """
    Given a list of starting urls, recursively finds all descendant urls
    recursively
    """
    if len(urls) == 0:
        return
    rs = [grequests.get(url, hooks=dict(args=print_url)) for url in urls]
    responses = grequests.map(rs)
    url_lists = [get_urls_from_response(response) for response in responses]
    urls = sum(url_lists, [])  # flatten list of lists into a list
    recursive_urls(urls) 
```

我还没有测试过代码，但总体思路就在那里。

请注意，我使用[`grequests`](https://github.com/kennethreitz/grequests)而不是`requests`提高性能。`grequest`基本上是`gevent+request`这样，根据我的经验，这种任务要快得多，因为您可以异步检索*链接*`gevent`。

* * *

编辑：这是不使用递归的相同算法：

```
import grequests
from bs4 import BeautifulSoup

def get_urls_from_response(r):
    soup = BeautifulSoup(r.text)
    urls = [link.get('href') for link in soup.find_all('a')]
    return urls

def print_url(args):
    print args['url']

def recursive_urls(urls):
    """
    Given a list of starting urls, recursively finds all descendant urls
    recursively
    """
    while True:
        if len(urls) == 0:
            break
        rs = [grequests.get(url, hooks=dict(args=print_url)) for url in urls]
        responses = grequests.map(rs)
        url_lists = [get_urls_from_response(response) for response in responses]
        urls = sum(url_lists, [])  # flatten list of lists into a list

if __name__ == "__main__":
    recursive_urls(["INITIAL_URLS"]) 
```

# php - 高效使用mysql表缓存复杂查询

> ID：12237590
> 
> 赞同：4
> 
> 时间：2012-09-02T16:15:56.673
> 
> 标签：php, mysql, query-cache

我曾经在查询中有相当多的多个联接。

为了能够（至少）使用内置的 MySql Cache 功能，我编写了以下函数，它只是将原始查询编码为 base64，检查它是否存在且未过期。

这极大地提高了性能，并且我有优势在源代码中逐个查询地控制缓存时间。

但是在繁忙的时候，由于删除或选择时间太长，该表变得不可用。有什么建议可以让这个运行更快并避免前面提到的问题吗？

桌子：

```
CREATE TABLE `cachesql` (
`id` int(9) NOT NULL AUTO_INCREMENT,
`expire` int(15) NOT NULL,
`sql` text NOT NULL,
`data` mediumtext NOT NULL,
PRIMARY KEY (`id`,`sql`(360)),
KEY `sdata` (`sql`(767)) USING HASH
) ENGINE=InnoDB 
```

功能：

```
 function fetchRows_cache($sql,$cachetime,$dba){
    // internal function (called by fetchRows)
    global $Site;
    $expire = 0;
    $this->connect($dba);

    // check if query is cached
    $this->q = mysql_query("SELECT `expire`,`data` from cachesql where `sql`='".base64_encode($sql)."' limit 1;", $this->con) OR $this->error(1, "query$".$sql."$".mysql_error());
    $this->r = mysql_fetch_assoc($this->q);
    $expire = $this->r['expire'];
    $data = $this->r['data'];

    if (($expire < time())||($cachetime =="0")) { // record expied or not there -> execute query and store
        $this->query("DELETE FROM `cachesql` WHERE `sql`='".base64_encode($sql)."'",$dba); // delete old cached entries

        $this->q = mysql_query($sql, $this->con) OR $this->error(1, "query$".$sql."$".mysql_error());
        $this->r=array();
        $this->rc=0;
        while($row = mysql_fetch_assoc($this->q)){
            $arr_row=array();
            $c=0;
            while ($c < mysql_num_fields($this->q)) {        
                $col = mysql_fetch_field($this->q, $c);    
                $arr_row[$col -> name] = $row[$col -> name];            
                $c++;
            }    
            $this->r[$this->rc] = $arr_row;
            $this->rc++;
        }
        $out = $this->r;

        // write results into cache table
        if ($cachetime != "0") {
            // not store cache values for now (too many locks)
            $this->query("INSERT INTO `cachesql` (`sql`,`data`,`expire`) VALUES ('".base64_encode($sql)."','".mysql_real_escape_string(serialize($out))."','".(time()+$cachetime)."')",$dba);       
        }
        return $out;

    }
    else { // use Cached data
        return unserialize($data); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:02:11.727

我认为主要的减速点是，您使用 InnoDB 作为缓存表。

我发现，除了读取繁重的缓存表之外，您应该将 InnoDB 用于所有内容；）

MyISAM 特别适用于读取密集型（选择）表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:58:18.427

感谢@HeatfanJohn - 他指出了一些非常简单和高效的东西。

由于原始查询不用于任何事情（除了缓存条目的匹配），只需存储校验和即可唯一地标识相关查询。

新结构只存储原始查询的 MD5 哈希（16 字节）、expireUnixTime 和序列化的行集

新结构：

```
CREATE TABLE `cachesql` (
`sql` varchar(32) NOT NULL,
`expire` int(11) NOT NULL,
`data` text NOT NULL,
PRIMARY KEY (`sql`),
UNIQUE KEY `sql` (`sql`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='cache for db->fetchRows' 
```

列上的主索引`sql`响应非常快，因为它非常短，并且可以更好地为搜索建立索引。

在为数据集使用 BLOB 或 TEXT 字段时，我没有得到不同的速度结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T14:25:32.557

让我们试试 inmemory 表以使其更快。

# php - PHP：保持数组填充

> ID：12237592
> 
> 赞同：0
> 
> 时间：2012-09-02T16:16:04.843
> 
> 标签：php, arrays, forms

每次我按下`addproduct`按钮时，我的阵列都会被清空。我认为这是因为`$productarray = array();`声明，但我想保留每次添加的内容。所以，如果我按`addproduct`两次，我希望第一个条目保持不变。我将有另一个按钮将用户重定向到下一页，但在此之前清除数组；

```
$productarray = array();
if(isset($_POST['addproduct'])){
  $prod = trim(mysql_real_escape_string(stripslashes(htmlspecialchars($_POST['prodcall']))));
  array_push($productarray,$prod);
}
print_r($productarray); 
```

寻找一种希望不需要使用 SQLDB 或 SESSION 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:21:10.917

一旦脚本执行完成，所有声明的变量都会自行销毁。作为替代方案，您可以利用 Session 变量`$_SESSION`或数据库中的临时表。如果您将其更改为按钮而不是提交按钮，JavaScript 也可以提供帮助。

# css - 线性梯度的光栅化

> ID：12237593
> 
> 赞同：1
> 
> 时间：2012-09-02T16:16:08.470
> 
> 标签：css, image, svg, webkit, browser

我正在寻找一些算法来光栅化线性渐变定义，即将线性渐变转换为 RGB 颜色空间中的像素颜色。我已经看到了 PS/PDF 使用的算法。但是，我对网络技术更感兴趣。

有人可以描述或提供一些关于浏览器（或 webkit）在渲染 SVG/CSS 时通常如何做的参考吗？

# image-processing - opencv/javacv中的面积计算？

> ID：12237598
> 
> 赞同：4
> 
> 时间：2012-09-02T16:16:35.983
> 
> 标签：image-processing, opencv, area, javacv

请有人解释一下如何识别下图中应该是红色和蓝色的区域？我尝试使用 cvFindContours() 方法，但它没有给我预期的结果。

**输入图像**

![在此处输入图像描述](../Images/cd9fde35dd20d0aae983023faa229128.png)

**预期结果**

![在此处输入图像描述](../Images/0a43d5c4b9ace3ffd82f6e6de0ef00d0.png) 我想知道是否有任何其他方法可以识别或计算这种轮廓的面积。请善意地与此分享简单的代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:16:49.457

函数 floodFill 也可以返回一个区域作为它的返回值。因此，您可以做的一件事是光栅扫描每个像素：每次到达未触及的像素时，将其着色为某种颜色（黑色），并将该区域的面积与像素坐标一起存储，继续直到不会覆盖整个图像.

最后，您将拥有一组区域，其中每个区域的一个像素都有坐标。

您是否需要恢复特定区域，您可以通过将该区域着色为特定颜色来再次使用 floodFill。

# c# - 任何现有的无垃圾字典实现？

> ID：12237599
> 
> 赞同：-2
> 
> 时间：2012-09-02T16:16:36.030
> 
> 标签：c#, .net, visual-studio, .net-4.0

我们有一个庞大的程序，它产生了太多的垃圾。这会损害性能，每秒产生数千个软页面错误，减少延迟，损害吞吐量等。

罪魁祸首之一是`System.Collections.Generic.Dictionary`，因此我们希望将其替换为允许我们预先分配 10,000 个条目的版本，然后即时重用这些条目。

是否有任何现有的实现`Dictionary`允许预先分配条目，并且不会在运行时产生垃圾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:23:43.513

我们最终决定不使用无垃圾字典，因为它对整体 GC 的影响不大。

作为记录，这里是一个无垃圾字典的实现。它的内存很饿，但效果很好。

要使用，请实例化一个新字典，为潜在的整数键提供足够的插槽。例如，如果主整数键的范围在 0 到 50,000 之间，那么在实例化它时需要传入 50,000：

```
MyIntegerKeyDictionary = new MyIntegerKeyDictionary<int, MyClass>(50000); 
```

如果密钥的范围从 200,000 到 250,000，则使用 50,000 个潜在密钥对其进行实例化，它会自动“重新设置”密钥（基于它看到的第一个密钥），因此它的范围可以从 200,000 到 250,000。

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using MyLogType;

namespace MyHelper
{
/// <summary>
/// NOTE: Non thread safe, only run this individually.
/// </summary>
/// <typeparam name="T">Type of item we are adding to the dictionary.</typeparam>
public class MyIntegerKeyDictionary<T> where T : class
{
    /// <summary>
    /// Array in which we store the entries.
    /// </summary>
    volatile private T[] ArrayToUse;

    /// <summary>
    /// Allows us to check the maximum size, just in case.
    /// </summary>
    private readonly int SizeInternal;

    /// <summary>
    /// Keeps track of the current number of items in the dictionary.
    /// </summary>
    public int Count = 0;

    /// <summary>
    /// Base number. For numbers that start with a huge base, this allows the index to work without allocating megabytes of memory.
    /// </summary>
    private int BaseNumberToAdd { get; set; }

    /// <summary>
    /// Constructor.
    /// </summary>
    /// <param name="Size">Size of the dictionary.</param>
    public MyIntegerKeyDictionary(int Size)
    {
        // Create the array to hold n number of items.
        ArrayToUse = new T[Size];

        // We must touch all of these entries, to force page faults now (rather than later).
        for (int i = 0; i < ArrayToUse.Length; i++)
        {
            ArrayToUse[i] = null;
        }
        BaseNumberToAdd = int.MinValue;

        this.SizeInternal = Size;
    }

    /// <summary>
    /// Add an item.
    /// </summary>
    /// <param name="Key">Key.</param>
    /// <param name="Value">Value.</param>
    /// <returns>True if the item was added, false if not.</returns>
    public bool TryAdd(int Key, T Value)
    {
        if (BaseNumberToAdd == int.MinValue)
        {
            BaseNumberToAdd = Key;
            //Console.Write(string.Format("{0}Message W20120907-3751\. TryAdd. Adding first item {1}.\n",
            //MyLog.NPrefix(), Key));
        }
        Key = Key - BaseNumberToAdd;

        if (Key < 0)
        {
            Console.Write(string.Format("{0}Warning W20120907-3750\. TryAdd. Attempted to add a key with index {1} which is < 0.\n",
                MyLog.NPrefix(), Key));
            return false;
        }

        if (Key >= this.SizeInternal)
        {
            Console.Write(string.Format("{0}Warning W20120907-3756\. TryAdd. Attempted to add a key with index {1} which is > max {2}\n",
                MyLog.NPrefix(), Key, this.SizeInternal));
            return false;
        }

        if (ArrayToUse[Key] == null)
        {
            Interlocked.Increment(ref Count);
        }

        ArrayToUse[Key] = Value;
        return true;
    }

    /// <summary>
    /// Remove an item from the dictionary.
    /// </summary>
    /// <param name="Key">Key that we want to remove.</param>
    /// <returns>True if the item could be removed, false if not.</returns>
    public bool TryRemove(int Key)
    {
        if (BaseNumberToAdd == int.MinValue)
        {
            Console.Write(string.Format("{0}Warning W20120907-8756\. TryRemove. Attempted to remove an item without any items in the dictionary yet {1}.\n",
                MyLog.NPrefix(), Key));
            return false;
        }
        Key = Key - BaseNumberToAdd;

        if (Key < 0)
        {
            Console.Write(string.Format("{0}Warning W20120907-9756\. TryRemove. Attempted to remove a key with index {1} which is < 0.\n",
                MyLog.NPrefix(), Key));
            return false;
        }

        if (Key >= this.SizeInternal)
        {
            Console.Write(string.Format("{0}Warning W20120907-6756\. TryRemove. Attempted to remove a key with index {1} which is > max {2}\n",
                MyLog.NPrefix(), Key, this.SizeInternal));
            return false;
        }

        if (ArrayToUse[Key] != null)
        {
            Interlocked.Decrement(ref Count);
        }

        ArrayToUse[Key] = null;

        return true;
    }

    /// <summary>
    /// Indexer.
    /// </summary>
    /// <param name="key">Key.</param>
    /// <returns>Value.</returns>
    public T this[int key]
    {
        get
        {
            T valueToReturn;
            TryGetValue(key, out valueToReturn);
            return valueToReturn;
        }
    }

    /// <summary>
    /// Attempt to get the value.
    /// </summary>
    /// <param name="Key">Key.</param>
    /// <param name="Value">Value.</param>
    /// <returns>True if the value exists, false if not.</returns>
    public bool TryGetValue(int Key, out T Value)
    {
        Value = null;
        if (BaseNumberToAdd == int.MinValue)
        {
            Console.Write(string.Format("{0}Warning W20120907-8756\. TryGetValue. Attempted to retrieve an item without any items in the dictionary yet {1}.\n",
                MyLog.NPrefix(), Key));
            return false;
        }
        Key = Key - BaseNumberToAdd;
        if (ArrayToUse[Key] == null)
        {

            return false;
        }

        Value = ArrayToUse[Key];
        return true;
    }

    /// <summary>
    /// Checks to see if the key exists.
    /// </summary>
    /// <param name="Key">Key index.</param>
    /// <returns>True if the item exists, false if not.</returns>
    public bool ContainsKey(int Key)
    {
        if (Key == 0)
        {
            Console.Write(string.Format("{0}Warning W20120907-1914\. ContainsKey. Have not rebased yet. Ignoring query for ContainsKey(0).\n",
                MyLog.NPrefix()));
            return false;
        }

        if (BaseNumberToAdd == int.MinValue)
        {
            Console.Write(string.Format("{0}Warning W20120907-8756\. ContainsKey. Attempted to check if Key {1} exists, however BaseNumber is not set yet.\n",
                "", Key));
            return false;
        }
        Key = Key - BaseNumberToAdd;

        if (Key < 0)
        {
            Console.Write(string.Format("{0}Warning W20120907-8756\. ContainsKey. Key = {1} which is < 0.\n",
                "", Key));
            return false;
        }

        if (Key >= this.SizeInternal)
        {
            MyLogAsync.LogWarning(string.Format("{0}Warning W20120907-5756\. ContainsKey. Key({1}) >= this.SizeInternal ({2}).\n",
                MyLog.NPrefix(), Key, this.SizeInternal));
            return false;
        }

        if (ArrayToUse[Key] == null)
        {
            return false;
        }
        return true;
    }
    /*
    private bool CheckKeyBounds(int Key, string description)
    {
        if (Key < 0)
        {
            MyLogAsync.LogWarning(string.Format("{0}Warning W20120907-8756\. {1}. Attempted to add a key with index {2} which is < 0.\n",
                MyLog.NPrefix(), description, Key));
        }

        if (Key >= this.SizeInternal)
        {
            MyLogAsync.LogWarning(string.Format("{0}Warning W20120907-5756\. {1}. Attempted to add a key with index {2} which is > max {3}\n",
                MyLog.NPrefix(), description, Key, this.SizeInternal));
            return false;
        }
    }
    */
}
} 
```

# c# - 网格视图中的复杂对象

> ID：12237601
> 
> 赞同：4
> 
> 时间：2012-09-02T16:16:39.677
> 
> 标签：c#, entity-framework, gridview, lazy-loading

我有一个gridview，它的数据源是以下函数：

```
public static List<Train> GetTrainsByIDs(int [] ids) {
    using (var context = new MyEntities()) 
    {
        return ids.Select(x => context.Trains.Single(y => y.TrainID ==x)).AsQueryable().Include(x=>x.Station).ToList();
    }
} 
```

网格视图的 ItemTemplate 为`<%# Eval("Station.Name") %>`. `The ObjectContext instance has been disposed and can no longer be used for operations that require a connection`尽管我使用了 include 方法，但这会导致错误。

当我将功能更改为

```
public static List<Train> GetTrainsByIDs(int [] ids) {
    using (var context = new MyEntities()) 
    {
        return context.Trains.Where(x => ids.Contains(x.TrainID)).Include(x=>x.Station).ToList();
    }
} 
```

它工作正常，但是它们以错误的顺序出现，而且如果我有 2 个相同的 id，我希望列表中有 2 个相同的火车。

除了创建一个新的视图模型，我还能做些什么吗？感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:55:03.063

至于第一个查询：那是延迟执行。你创建了一个`IEnumerable`of `Train`，注意到它没有`Include`方法，所以将它转换为`IQueryable`，添加 Include 并添加`ToList()`以防止延迟加载。

但根据[DbExtensions.Include 上的 MSDN](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)：

> 此扩展方法调用 IQueryable 源对象的 Include(String) 方法（如果存在此类方法）。如果源 IQueryable 没有匹配方法，*则此方法不执行任何操作。*

（强调我的）

select 的结果是一个`IEnumerable`转换为`IQueryable`，但现在由[`EnumerableQuery`](http://msdn.microsoft.com/en-us/library/system.linq.enumerablequery%28v=vs.95%29.aspx)which 不实现`Include`。什么也没有发生。

现在数据进入试图显示车站的网格，这会在上下文消失时触发延迟加载。

除此之外，这种设计还有另一个缺陷：它分别为每个 id 触发一个查询。

所以第二个查询要好得多。这是一个查询，包括`Station`s。但是现在顺序是由数据库返回的顺序决定的。你可以`Concat`用来解决这个问题：

```
IQueryable<Train> qbase = context.Trains.Include(x=>x.Station);
IQueryable<Train> q = null;

foreach (var id in ids)
{
  var id1 = id; // Prevent modified closure.
  if (q == null)
    q = qbase.Where(t => t.Id == id1);
  else
    q = q.Concat(qbase.Where (t => t.Id == id1));
} 
```

生成的查询不是很优雅（至少可以说），但毕竟它是一个查询而不是多个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:10:42.507

在阅读了@Gert Arnold 的答案并获得了分两个阶段执行此操作的想法后，我非常简单地使用了这样的第一个查询：

```
using (context = new MyEntities())
{
    var trns = context.Trains.Include(x => x.Station);
    return ids.Select(x => trns.Single(y => y.TrainID == x)).ToList();
} 
```

# python - 稀疏矩阵上的元素操作

> ID：12237604
> 
> 赞同：3
> 
> 时间：2012-09-02T16:16:50.790
> 
> 标签：python, numpy, scipy, sparse-matrix

如果你有一个稀疏矩阵 X：

```
>> print type(X)
<class 'scipy.sparse.csr.csr_matrix'> 
```

...您如何将每行中每个元素的平方求和，并将它们保存到列表中？例如：

```
>>print X.todense()
[[0 2 0 2]
 [0 2 0 1]] 
```

你怎么能把它变成每行平方和的列表：

```
[[0²+2²+0²+2²]
 [0²+2²+0²+1²]] 
```

或者： `[8, 5]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T16:23:44.377

首先，csr矩阵有一个`.sum`方法（依靠点积）效果很好，所以你需要的是平方。最简单的解决方案是创建稀疏矩阵的副本，对其数据求平方，然后求和：

```
squared_X = X.copy()
# now square the data in squared_X
squared_X.data **= 2

# and sum each row:
squared_sum = squared_X.sum(1)
# and delete the squared_X:
del squared_X 
```

如果您真的必须节省空间，我想您可以先替换`.data`然后再将其替换回来，如下所示：

```
X.sum_duplicate() # make sure, not sure if this happens with normal usage.
old_data = X.data.copy()
X.data **= 2
squared_sum = X.sum(1)
X.data = old_data 
```

**编辑**：实际上还有另一种不错的方法，因为 csr 矩阵有一个`.multiply`元素乘法的方法：

```
squared_sum = X.multiply(X).sum(1) 
```

* * *

加法： 因此，通过访问which 存储所有非零元素的值，可以轻松完成逐元素**操作。***注意：*我想可能是必要的，我不确定什么样的操作会使其成为必要。`csr.data`*`.sum_duplicates()`*

# php - 如何在 PHP 中自动加载函数

> ID：12237608
> 
> 赞同：0
> 
> 时间：2012-09-02T16:17:29.623
> 
> 标签：php, autoload

我使用此代码加载类

```
 function __autoload($className)
 {
      $files = dirname(__FILE__).'/public/class/'.$className.'.php';

      if(file_exists($files))
      {
           include_once($files);
      }
 } 
```

有谁也知道如何自动检索该功能？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:21:51.047

注册的 Autoloader 函数[`spl_autoload_register()`](http://www.php.net/manual/en/function.spl-autoload-register.php)可用于加载类，但**不能**用于加载函数。将您的函数包装在一个或多个类中以利用自动加载，即

```
class Utils {
  static function foo() {
    ..
  }
} 
```

然后将其称为静态方式：

```
Utils::foo(); 
```

您可以在需要时自动加载它。请参阅[PHP 手册中有关自动加载的](http://php.net/manual/en/language.oop5.autoload.php)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:26:01.880

是的，您可以使用自动加载功能自动加载**类**，但**不**，您不能对**函数**执行相同的操作。

# php - 将 PHP 与 Google 串行通知 (IPN) 结合使用

> ID：12237614
> 
> 赞同：0
> 
> 时间：2012-09-02T16:18:22.173
> 
> 标签：php, notifications, checkout

我试图弄清楚如何让它与 PHP 一起工作。我有一个可用的贝宝 IPN，不到 20 行代码就可以获取我需要的数据。我试过阅读谷歌文档，但它们要么太具体，要么太笼统。有一些示例代码，在 5 个文件中大约有 1300 行，我无法理解。我只需要从已完成的事务中返回一些变量，仅此而已。是否有可能用几行代码来做到这一点（我的意思是没有 1300 行的“包含”文件）或者 Google Checkout 的过程真的那么庞大吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:34:51.197

这是我开始的一些代码。还没有完成。它完美地工作。您需要做的就是获取 Google 发回的数据并将此代码写入文件并使用它插入到您的销售表中，将收到的付款通知发送给客户等等。诀窍是，当 Google 向您发送帖子时，您必须使用 Authorization 标头进行回调，否则它不会考虑它。

```
function post2google($url, $timeout = 30, $port = 80, $buffer = 128) {
  $mid = "123456789";
  $mky = "qwertyuiop";
  $aut = base64_encode($mid . ":" . $mky);

  $arr = parse_url($url);

  $ssl = "";
  if($arr['scheme'] == "https") $ssl = "ssl://";

  $post  = "POST " . $arr['path'] . " HTTP/1.1\r\n";
  $post .= "Host: " . $arr['host'] . "\r\n";

  $post .= "Authorization: Basic " . $aut . "\r\n";
  $post .= "Content-Type: application/xml; charset=UTF-8\r\n";
  $post .= "Accept: application/xml; charset=UTF-8\r\n";

  $post .= "Content-Length: " . strlen($arr['query']) . "\r\n";
  $post .= "Connection: Close\r\n";
  $post .= "\r\n";
  $post .= $arr['query'];

  $f = fsockopen($ssl . $arr['host'], $port, $errno, $errstr, $timeout);

  if(!$f)
    return $errstr . " (" . $errno . ")";

  else{
    fputs($f, $post);
    while(!feof($f)) { $echo .= @fgets($f, $buffer); }
    fclose($f);

    return $echo;
  }
}
$re =  post2google("https://checkout.google.com/api/checkout/v2/reportsForm/Merchant/123456789?_type=notification-history-request&serial-number=" . $_REQUEST['serial-number'], 3, 443);

$re = str_replace("&", "\n", $re) . "\n\n--\n\n";

file_put_contents("gpn.txt", $re, FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T08:53:29.357

我已经让它工作了，这是我的代码框架，可用于处理 HTTP 通知/响应。这显然是从上面 tntu 的示例中得出的。（谢谢！）

```
//incoming data is in the var $_POST['serial-number']
//"send" the response to acknowledge the serial number that google talks about all over but never explains how
echo "_type=notification-acknowledgment&serial-number=".$_POST['serial-number'];

//now we need to call google's server and ask for this transaction's data:
//you'll need to change your merchant id in the $url and $mid vars, and your merchant key in the $mky var
$url = "https://sandbox.google.com/checkout/api/checkout/v2/reportsForm/Merchant/1234567890?_type=notification-history-request&serial-number=" . $_REQUEST['serial-number'];
$mid = "1234567890"; 
$mky = "ABCDEFGHIJK";
$aut = base64_encode($mid . ":" . $mky);

$arr = parse_url($url);
$ssl = "";
if($arr['scheme'] == "https") $ssl = "ssl://";

$post  = "POST " . $arr['path'] . " HTTP/1.1\r\n";
$post .= "Host: " . $arr['host'] . "\r\n";
$post .= "Authorization: Basic " . $aut . "\r\n";
$post .= "Content-Type: application/xml; charset=UTF-8\r\n";
$post .= "Accept: application/xml; charset=UTF-8\r\n";
$post .= "Content-Length: " . strlen($arr['query']) . "\r\n";
$post .= "Connection: Close\r\n";
$post .= "\r\n";
$post .= $arr['query'];

//now we actually make the request by opening a socket and calling Google's server
$f = fsockopen($ssl . $arr['host'], 443, $errno, $errstr, 30);

if(!$f){
    //something failed in the opening of the socket, we didn't contact google at all, you can do whatever you want here such as emailing yourself about it and what you were trying to send, etc
    @mail("troubleshooting@yourdomain.com","Google IPN - HTTP ERROR ",$errstr . " (" . $errno . ")\n\n\n".$arr['query']);
}else{
    //the socket was opened, send the request for the order data: 
    fputs($f, $post); // you're sending
    while(!feof($f)) { $response .= @fgets($f, 128); } //google replies and you store it in $response
    fclose($f); //close the socket, we're done talking to google's server

    $spl=strpos($response,"_type="); //parse the type because parse_str won't catch it
    if ($spl!==false){
        $spl2=strpos($response,"&",$spl);
        $ordertype=substr($response,($spl+6),($spl2-$spl)-6);
    }//$ordertype will tell you which type of notification is being sent, new-order-notification, risk-information-notification, etc
    $subresponse=substr($response,$spl2+1); //put the rest of it into an array for easy access
    parse_str($subresponse,$order);//you can now access google's response in $order[] vars
    //IMPORTANT: dots in Google's field names are replaced by underscore, for example:
    // $order['google-order-number'] and $order['buyer-billing-address_address1'] NOT $order['buyer-billing-address.address1']
    //order field names are shown here: 
    //https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API#order_summary

     //this is the point where you will want to use the data contained in $order[] to create a new record in your database or whatever.
    //NOTE: be sure to store and check for duplicates using the google-order-number because you will get multiple notifications from google regarding the same order

    if (strtoupper($order['order-summary_financial-order-state']) == "CHARGEABLE"){
        //CHARGEABLE is what indicates it is safe to create a login for the user (if you are delivering digital goods) 
        // insert into db, and/or email user with key or download url
    }
} 
```

# deployment - 云中的 Playframework 2

> ID：12237615
> 
> 赞同：3
> 
> 时间：2012-09-02T16:18:49.667
> 
> 标签：deployment, hosting, cloud, playframework-2.0

3 个月前，我开始在谷歌应用引擎上使用 python。

然后我切换到Play2！在 Heroku + mongodb 上，使用起来轻而易举。

我的项目真的很远，我想在接下来的几天内发布该网站。但是我刚刚在heroku上看到了SSL的定价，真的很高。

而且我不想在没有 SSL 的情况下启动我的网站。在没有证书的情况下，heroku 上的 SSL 每月收费 20 美元。

我在这篇文章中看到了一些替代方案[什么云平台支持 playframework 2.x 部署？](https://stackoverflow.com/questions/10224087/what-cloud-platform-supports-playframework-2-0-deployments)

但我还是不太高兴。我想支付尽可能少的费用来启动我的网站。

所以目前我正在再次查看 Google App Engine。这意味着我必须重写我的整个数据库。

*   GAE 是否限制 play2 的某些功能？

我也看到了 dotcloud，但他们的定价页面真的很混乱。我不知道在沙盒模式下我能走多远，而且 SSL 上有一个标记，所以我认为它以某种方式包含在内，但还有一个 SSL 插件可以使价格翻倍。

如果我的网站会花费我更多的钱，那我没关系，然后我会离开它几个月，但是使用 heroku 上的 ssl 实在是太多了。

*   你会推荐我什么？

编辑：

目前我正在研究看起来很有趣的openshift。他们为所有用户免费实施了 SSL，但我仍然不确定是否可以将其与我的自定义域一起使用。

编辑2：

好的，它只是共享的 ssl。这意味着我必须获得每月 42 美元的“Megashift”

编辑3：

看来我只能将war文件部署到GAE，这破坏了play2的目的。

所以我不得不在heroku、dotcloud和openshift之间做出选择。如果你想使用 SSL，所有这些都是昂贵的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:56:11.660

我怀疑 GAE 能否与 Play 一起正常工作。将某些类列入黑名单会影响您的项目，但您会遇到一些在其他环境中不会遇到的限制，并且您会遇到部署 war 文件的问题（Play 2 中有用于此的插件，但仍然存在）。

从另一个角度来看：

*   如果您的项目是个人的“娱乐”项目，除了尝试之外没有其他目的，那么您可能不需要 SSL。即使您真的需要（或想要）SSL，每月 20 美元对于一个爱好来说也不算多，人们每个月在 WoW（订阅 + 附加）等游戏中支付的费用也接近于此。

*   如果你的项目很严肃（启动，旨在赚钱），你应该停止担心像 20 美元这样的费用。它们是为了获得现金而进行的投资。如果作为一家企业，您愿意重写代码以节省 20 美元，那么您注定要失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:19:52.220

我建议您尝试一下 openshift

它是免费的，red hat 已表示将保留免费产品（不仅仅是在 beta 期间......）

这是一个截屏视频：

[http://playlatam.wordpress.com/2012/05/21/deploying-play-framework-2-apps-with-java-and-scala-to-openshift/](http://playlatam.wordpress.com/2012/05/21/deploying-play-framework-2-apps-with-java-and-scala-to-openshift/)

一个 github 仓库

[https://github.com/opensas/play2-openshift-quickstart](https://github.com/opensas/play2-openshift-quickstart)

和 red hat 的一篇文章

[https://openshift.redhat.com/community/blogs/supporting-play-framework-on-openshift-with-the-diy-application-type](https://openshift.redhat.com/community/blogs/supporting-play-framework-on-openshift-with-the-diy-application-type)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T15:16:36.300

我可以向你推荐 Jelastic。

此外，它还以合理的价格提供[Jelastic SSL](http://jelastic.com/docs/jelastic-ssl)和[Custom SSL 。](http://jelastic.com/docs/custom-ssl)

一些托管服务提供商允许他们的客户免费使用 SSL，价格实际上取决于您选择的托管服务提供商。所以你在这里有选择。

Jelastic 最近提供了一个关于[如何将 Play 2 Web 框架应用程序部署](http://blog.jelastic.com/2013/07/02/play-2-web-application-deployment-tutorial/)到云端的教程。因此，您可以自由地使用它作为基础。

# xpath - Xpath选择功能？

> ID：12237616
> 
> 赞同：2
> 
> 时间：2012-09-02T16:18:51.557
> 
> 标签：xpath

我在 Drupal 7 cms 中使用 feed 导入模块，它接受 xpath 指令来映射导入数据。是否可以仅选择原子值的一部分或使用 xpath 将其分解？例如：

```
<book>
...
<categories>1,4,88</categories>
...
</book> 
```

是否可以使用 xpath 语句分别获得 1 个或 4 个或 88 个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:37:45.210

**您可以使用[substring-before()](http://www.w3.org/TR/xpath-functions/#func-substring-before)和[substring-after()](http://www.w3.org/TR/xpath-functions/#func-substring-after)函数：**

*   选择 1：`substring-before(/book/categories, ',')`
*   选择 4：`substring-before(substring-after(/book/categories, ','), ',')`
*   选择 88：`substring-after(substring-after(/book/categories, ','), ',')`

* * *

**使用 XPath 2.0，您可以使用[tokenize()](http://www.w3.org/TR/xpath-functions/#func-tokenize)函数：**

*   选择 1：`tokenize(/book/categories, ',')[1]`
*   选择 4：`tokenize(/book/categories, ',')[2]`
*   选择 88：`tokenize(/book/categories, ',')[3]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:55:31.160

**或者，使用 XPath 2.0，可以通过以下方式访问第`N`th 组件**：

```
tokenize(/*/categories[1], ',')[$pN] 
```

其中`$pN`是所需的基于 1 的索引。

# c# - EntityFramework同一张表多对多关系

> ID：12237617
> 
> 赞同：50
> 
> 时间：2012-09-02T16:18:54.317
> 
> 标签：c#, asp.net, sql, entity-framework

我有一个名为 Products 的表，其中显然包含产品。但是，我需要创建相关产品。所以我所做的是创建一个名为 product_related 的联结表，它有两个 PK。Products 表中的 ProductID 和 Products 表中的 RelatedID。

我已经使用 EF 并在其他表上设置了所有内容。我应该如何正确添加它以便与产品建立关系： `product.Products.Add(product object here)`. 当然，这里`product`代表我使用从数据库中获取的产品对象`db.Products.FirstOr...`。

我应该如何正确地做到这一点？多对多到同一张桌子？

谢谢。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-08T13:14:05.243

**为了使用Database-First 方法**创建多对多关系，您需要设置遵循某些规则的数据库模式：

*   创建以`Products`列`ProductID`为主键的表
*   创建一个`ProductRelations`包含一列`ProductID`和一列的表，`RelatedID`并将两列都标记**为主键**（复合键）
*   **不要在表中添加任何其他`ProductRelations`列**。两个关键列必须是表中唯一的列，才能让 EF 将此表识别为多对多关系的链接表
*   在两个表之间 创建**两个外键关系：**
    *   第一个关系将`Products`表作为主键表，`ProductID`主键作为主键，`ProductRelations`表作为外键表，**仅`ProductID`作为外键**
    *   第二个关系也有`Products`作为主键的表`ProductID`作为主键表和**只有****作为外键**`ProductRelations`的表作为外键表**`RelatedID`**
*   为两个关系中的第一个启用**级联删除**。（你不能对两者都这样做。SQL Server 不允许这样做，因为它会导致多个级联删除路径。）

如果您现在从这两个表生成实体数据模型，您将**只得到一个实体**，即一个`Product`实体（或者`Products`如果您禁用单数化）。链接表`ProductRelations`不会作为实体公开。

该`Product`实体将有**两个导航属性**：

```
public EntityCollection<Product> Products { get { ... } set { ... } }
public EntityCollection<Product> Products1 { get { ... } set { ... } } 
```

这些导航集合是同一个多对多关系的两个端点。（如果您有两个不同的表，您想通过多对多关系链接，例如 table`A`和`B`，一个导航集合 ( `Bs`) 将在 entity`A`中，另一个 ( `As`) 将在 entity 中`B`。但是因为您的关系是“self -reference”两个导航属性都在实体中`Product`。）

这两个属性的含义是：`Products`是与给定产品相关的产品，`Products1`是指给定产品的产品。例如：如果关系意味着一个产品需要其他产品作为零件来制造，并且您有产品“笔记本电脑”、“处理器”、“硅芯片”，那么“处理器”**由**“硅芯片”（“Silicon芯片”是产品实体`Products`集合中的一个元素）**并由**一个“笔记本”使用（“笔记本”是产品实体集合中的一个元素）。代替and的名字and会更合适。`Processor`**`Products1``Processor``Products``Products1``MadeOf``UsedBy`**

 **如果您只对关系的一侧感兴趣，则可以安全地从生成的模型中删除其中一个集合。`Products1`只需在模型设计器界面中删除例如。您还可以重命名属性。关系仍然是多对多的。

**编辑**

正如评论中所问的那样，使用**Code-First 方法**的模型和映射将是：

模型：

```
public class Product
{
    public int ProductID { get; set; }

    public ICollection<Product> RelatedProducts { get; set; }
} 
```

映射：

```
public class MyContext : DbContext
{
    public DbSet<Product> Products { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Product>()
            .HasMany(p => RelatedProducts)
            .WithMany()
            .Map(m =>
            {
                m.MapLeftKey("ProductID");
                m.MapRightKey("RelatedID");
                m.ToTable("product_related");
            });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:24:37.963

让我们举个例子：

**相关**表格

```
 Related_id      PK
  Related_name
  Date 
```

**产品**表

```
 Product_id      PK
  Related_id      FK
  Product_Name
  Date 
```

如何在 EF 中表示它

**相关模型类**命名为 RelatedModel

```
 [Key]
  public int Related_id { get; set; }

  public string Related_name {get;set}

  public Datetime Date{get;set;} 
```

**产品模型类**命名为 ProductModel

```
 [Key]
  public int Product_id { get; set; }

  public string Product_name {get;set}

  public string Related_id {get;set}

  public Datetime Date{get;set;}

  [ForeignKey("Related_id ")]      //We  can also specify here Foreign key
  public virtual RelatedModel Related { get; set; } 
```

这样我们就可以在两个表之间创建关系

**现在在多对多关系的情况下，我想在这里举另一个例子**

假设我有一个模型类**Enrollment.cs**

```
public class Enrollment
{
    public int EnrollmentID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public decimal? Grade { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
} 
```

这里**CourseID 和 StudentId**是两个外键

现在我有另一个类**Course.cs**，我们将在其中创建多对多关系。

```
public class Course
{
    public int CourseID { get; set; }
    public string Title { get; set; }
    public int Credits { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; }
} 
```

希望这会有所帮助！！！**

# php - 使用jQuery而不是AJAX将JSON数组传递给PHP脚本

> ID：12237619
> 
> 赞同：0
> 
> 时间：2012-09-02T16:19:02.613
> 
> 标签：php, javascript, jquery, json

我有一个 JavaScript 数组，其中包含 JSON 格式的值对：

```
var myArray = [{attribute: "attributeID1", option: "optionID1"},
{attribute: "attributeID2", option: "optionID2"}]; 
```

我有一个 PHP 脚本，它希望以数组形式获取该数据并用它搜索我的数据库。在进行此搜索时，我不希望留在页面上，因此我不想使用 AJAX - 我只想将此数据传递给 PHP 脚本，然后它将呈现新页面。

对我来说最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:34:32.303

首先，您需要获取 json2.js 的副本，以便将对象转换为 JSON 字符串。

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

然后，您可以对对象进行字符串化并将其放置在表单中的隐藏输入字段中。

```
document.getElementById('search').value = JSON.stringify(your_object); 
```

现在它将通过 PHP 脚本发送，您可以在其中使用内置函数 json_decode() 对其进行解码

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

```
$object = json_decode($_POST['search']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:19:59.793

把它放在一个隐藏的`input`元素中。然后提交输入元素所在的表单。

# c++ - C++：文本文件的扩展名？

> ID：12237624
> 
> 赞同：0
> 
> 时间：2012-09-02T16:19:37.090
> 
> 标签：c++, text, fstream

当我使用文件流使用文本文件进行输入和输出`fstream`时，使用的文件扩展名是`.txt`

我见过人们使用而不是`.txt`：

他们使用`.DAT`并且仍然在文本编辑器中打开它，就好像它是一个文本文件一样。

文本文件扩展名也是如此`DAT`，我可以对文本文件使用哪些扩展名。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:23:38.603

简短的回答：文本文件可以有你想要的任何扩展名，包括没有扩展名。如果您愿意，可以使用 somefile.txt 并将其重命名为 somefile.XYZPDQ。它仍然是一个文本文件。

这是从纯 C++ 语言的角度来看的。在操作系统级别，文件扩展名可能与特定程序类型相关联（例如，您可能在视频播放器中打开了 .mp4 视频）。但是您仍然可以随意调用任何文本文件。没有什么能阻止你这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:22:25.880

扩展名只是文件名的一部分。您使用什么扩展名`DAT`或`TXT`. 我的意思是，扩展帮助人们识别文件类型，只对人们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T16:33:23.240

您可以使用任何扩展名，但是：

*   使用`.txt`，您通常会提示该文件可以在文本编辑器（如 vim 或记事本）中打开并且可供人类阅读
*   使用`.dat`，您通常会提示该文件是**二进制**文件，无法使用文本编辑器打开。一个人应该使用一个特殊的程序（也许是你的；）或者一个十六进制的二进制编辑器，它的内容不容易阅读或修改。
*   您可能使用的另一个常见扩展名是`.csv`逗号分隔值文件（即使不使用逗号而是使用制表符或任何东西），可以在文本编辑器或 Excel 的 openoffice 等电子表格应用程序中打开。
*   Windows 用户经常使用`.ini`扩展名来暗示该文件是一个文本文件（可在文本编辑器中查看），其中包含一些键/值参数，例如`ConfirmBeforeExit=true`. 通过扩展，它用于任何包含参数的文本文件。
*   另一个是`.log`，暗示该文件是一个文本文件，其中包含执行某事的日志。然后，Linux 用户将立即`tail -f foo.log`在应用程序运行时查找问题。

顺便说一句，使用 TXT 或 DAT 等大写扩展名是对旧 DOS 时间的提醒，现在被认为是不好的风格。只需使用小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T16:23:43.377

您可以使用任何扩展名，因为这无关紧要。该`.dat`扩展名通常用于二进制数据，因此对于您的程序的用户来说，它实际上是一个可编辑的文本文件可能并不明显。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T16:25:10.887

扩展名对您可以放入文件中的数据类型没有影响。例如，您可以使用`TXT`,`DAT`和 even(not recommended) `EXE`。最好坚持一个扩展。如果某些内容是要由人类阅读的，我会使用`TXT`, but`DAT`或类似的方式来表示。

# php - 如何让这部分 PHP 在此表中输出？

> ID：12237625
> 
> 赞同：-3
> 
> 时间：2012-09-02T16:19:44.100
> 
> 标签：php, html

这是代码

```
for($r=1; $r<=10; $r++){
if($shirt_info[$r][0]!='Select One')
{
    echo '<div class='shirtinfo'>Order $r: </div>';
    echo '<div class='shirtinfo'>Size: '.$shirt_info[$r][0].'</div>';
    echo '<div class='shirtinfo'>Price: '.$shirt_info[$r][1].'</div>';
    echo '<div class='shirtinfo'>Qty: '.$shirt_info[$r][2].'</div>';
    echo '<div class='shirtinfo'>SPE: '.$shirt_info[$r][5].'</div>';
    echo '<div class='shirtinfo'>LIA: '.$shirt_info[$r][6].'</div>';
    echo '<div class='shirtinfo'>Vendor: '.$shirt_info[$r][7].'</div>';
    echo '<div class='shirtinfo'>Style: '.$shirt_info[$r][8].'</div>';
    echo '<div class='shirtinfo'>Color: '.$shirt_info[$r][9].'</div>';
    echo '<div style='clear:both;'></div>';
}} 
```

这就是结果[http://www.redfivedesigns.com/screenshot2.jpg](http://www.redfivedesigns.com/screenshot2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:32:22.063

来自php手册：

> 有关字符串如何表现的信息，尤其是关于单引号、双引号和转义序列的使用，请参阅手册类型部分中的字符串条目。

[http://www.php.net/manual/en/language.types.string.php](http://www.php.net/manual/en/language.types.string.php)

```
// Outputs: Arnold once said: "I'll be back"
echo 'Arnold once said: "I\'ll be back"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:36:49.857

转义引号或使用双引号：

逃脱：

```
echo '<div class=\'shirtinfo\'>Order $r: </div>';
echo '<div class=\'shirtinfo\'>Size: '.$shirt_info[$r][0].'</div>';
echo '<div class=\'shirtinfo\'>Price: '.$shirt_info[$r][1].'</div>';
echo '<div class=\'shirtinfo\'>Qty: '.$shirt_info[$r][2].'</div>';
echo '<div class=\'shirtinfo\'>SPE: '.$shirt_info[$r][5].'</div>';
echo '<div class=\'shirtinfo\'>LIA: '.$shirt_info[$r][6].'</div>';
echo '<div class=\'shirtinfo\'>Vendor: '.$shirt_info[$r][7].'</div>';
echo '<div class=\'shirtinfo\'>Style: '.$shirt_info[$r][8].'</div>';
echo '<div class=\'shirtinfo\'>Color: '.$shirt_info[$r][9].'</div>';
echo '<div style=\'clear:both;\'></div>'; 
```

使用双引号：

```
echo '<div class="shirtinfo">Order $r: </div>';
echo '<div class="shirtinfo">Size: '.$shirt_info[$r][0].'</div>';
echo '<div class="shirtinfo">Price: '.$shirt_info[$r][1].'</div>';
echo '<div class="shirtinfo">Qty: '.$shirt_info[$r][2].'</div>';
echo '<div class="shirtinfo">SPE: '.$shirt_info[$r][5].'</div>';
echo '<div class="shirtinfo">LIA: '.$shirt_info[$r][6].'</div>';
echo '<div class="shirtinfo">Vendor: '.$shirt_info[$r][7].'</div>';
echo '<div class="shirtinfo">Style: '.$shirt_info[$r][8].'</div>';
echo '<div class="shirtinfo">Color: '.$shirt_info[$r][9].'</div>';
echo '<div style="clear:both;"></div>'; 
```

另外，我认为您的意思`echo '<div class="shirtinfo">Order '.$r.': </div>';`是`echo '<div class="shirtinfo">Order $r: </div>';`

# php - PHP 发送批量电子邮件

> ID：12237628
> 
> 赞同：4
> 
> 时间：2012-09-02T16:19:51.480
> 
> 标签：php, email, batch-file

> **可能重复：**
> [使用 PHP 发送大量电子邮件](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)

我有一个 PHP 脚本，可以向我的数据库中的所有用户发送一封单独​​的电子邮件，例如每月/每周的时事通讯。

我使用的代码如下：

```
$subject = $_POST['subject'];
$message = $_POST['message'];

// Get all the mailing list subscribers.
$query = $db->prepare("SELECT * FROM maildb");
$query->execute();

// Loop through all susbcribers, and send and individual email.
foreach ($query as $row) {

    // Setting maximum time limit to infinite.
    set_time_limit(0);

    $newMessage = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        </head>
        <body>';

    // Search for the [unsubscribe] tag and replace it with a URL for the user to unsubscribe
    $newMessage .= str_replace("[unsubscribe]", "<a href='".BASE_URL."unsubscribe/".$row['hash']."/".$row['email']."'>unsubscribe</a>", $message);

    $newMessage .= '</body></html>';

    $to = $row['email'];

    // Establish content headers
    $headers = "From: info@domain.com"."\n";
    $headers .= "Reply-To: bounce@domain.com"."\n";
    $headers .= "X-Mailer: PHP v.". phpversion()."\n";
    $headers .= "MIME-Version: 1.0"."\n";  
    $headers .= "Content-Type: text/html; charset=iso-8859-1"."\n";
    $headers .= "Content-Transfer-Encoding: 8bit;";

    mail($to, $subject, $newMessage, $headers); // Send email to each individual user

} 
```

这段代码与一个非常小的数据库完美配合......我最近用 200k + 用户填充了我的测试数据库，显然这个脚本失败了，内存不足，然后死了......

我知道这是发送这么多电子邮件的不好方法，这就是为什么我想问你更有效的方法来做到这一点！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:23:34.437

您遇到的超时是因为 Apache 和 PHP 执行限制。

您需要将其作为 CLI 应用程序运行`set_time_limit(0);`

php`/path/to/app/script.php`类似这样的东西直接在控制台中。

如果您没有 SSH 访问权限，请`shell_exec`像这样运行它：

```
shell_exec("php /path/to/app/script.php > /dev/null 2>/dev/null &"); 
```

这将确保调用它的脚本在完成之前不会挂起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:24:46.750

您可以将 Cron 调度程序设置为每分钟或某个时间间隔运行。每次执行脚本都会从数据库中挑选几条记录并将它们从数据库中删除或设置为非活动状态。将邮件发送到一小块并让脚本死掉。另一个 cron 调用将选择很少的其他记录并死掉。您也可以利用 exec()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T16:26:48.243

分批进行，这样你一次只发送几个，在你的数据库中有一个字段来检查他们是否已经发送了当月的时事通讯，并在时事通讯发送给该用户时检查它，然后您可以继续运行脚本，直到它被发送给每个人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T16:28:49.573

我宁愿`implode`用户进入一个变量并一次性发送电子邮件

```
$to_array = array();

foreach ($query as $row) {

  $to_array[] = $row['email'];

}

$to = implode(', ', $to_array);

//do your email stuff here

 mail($to, $subject, $newMessage, $headers); // Send email to all users at once 
```

希望这可以帮助 ：-）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T16:29:02.987

看到这个网址：--

[使用 PHP 发送大量电子邮件](https://stackoverflow.com/questions/1118154/sending-mass-email-using-php)

首先，使用 PHP 自带的 mail() 函数并不是最佳解决方案。它很容易被标记为垃圾邮件，您需要设置标题以确保您正确发送 HTML 电子邮件。至于代码片段是否会起作用，它会起作用，但我怀疑你是否会在不[指定额外标题的情况下正确获得其中的 HTML 代码](http://sg2.php.net/manual/en/function.mail.php)

我建议您看一下[SwiftMailer](http://swiftmailer.org/)，它支持 HTML，支持不同的 mime 类型和 SMTP 身份验证（不太可能将您的邮件标记为垃圾邮件）。

# c - 在 PIC 单片机项目中使用 clang 进行自动完成：需要禁用 clang 警告

> ID：12237630
> 
> 赞同：1
> 
> 时间：2012-09-02T16:19:55.683
> 
> 标签：c, autocomplete, clang, pic, microchip

我使用 Microchip PIC 微控制器。我正在尝试在 Vim 中使用 clang 进行自动完成。

当然，我需要使 clang 能够编译我的源代码。问题是 PIC 编译器是特定的并且有一些特殊的属性，clang 会为此生成警告。

这是PIC头文件的一部分：

```
extern __attribute__((space(prog))) int _FBS;
#define _FBS(x) __attribute__((section("__FBS.sec"),space(prog))) int _FBS = (x); 
```

Clang 会产生如下错误：

```
23: warning:
      unknown attribute 'space' ignored [-Wattributes]
extern __attribute__((space(prog))) int _FUID2; 
```

如何禁用此类警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:04:17.230

This should disable warnings generated by `-Wattributes`:

```
clang -Wno-attributes 
```

# r - 在 R 中绘制时间序列图

> ID：12237634
> 
> 赞同：1
> 
> 时间：2012-09-02T16:20:26.450
> 
> 标签：r, plot, timeserieschart

我需要在 R 中绘制一个时间序列。但是很难弄清楚如何使用这些格式。

```
dates <- c(20060901, 20060905, 20060906, 20060907, 20060908, 20060911)
values <- c(33.6, 32.0, 30.0, 30.0, 30.0, 28.4) 
```

需要以适当的格式转换日期，例如：20060901 到 Sep-01-2006 等等

**到目前为止我的方法：**

```
dates = as.Date(dates, "%Y%m%d")
plot(dates , values) 
```

但是，我收到以下错误：

```
Error in charToDate(x) : character string is not in a standard unambiguous format 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:26:14.797

您可能想阅读一些基本文档以了解有关基本类型的更多信息，但这里有一个使用您的数据的工作示例：

```
R> data <- data.frame(dates=as.Date(as.character(c(20060901,20060905,20060906, 
+                                                  20060907,20060908,20060911)), 
+                                   "%Y%m%d"), 
+                     values=c(33.6, 32.0, 30.0, 30.0, 30.0, 28.4))
R> data
       dates values
1 2006-09-01   33.6
2 2006-09-05   32.0
3 2006-09-06   30.0
4 2006-09-07   30.0
5 2006-09-08   30.0
6 2006-09-11   28.4
R> class(data[,1])
[1] "Date"
R> plot(data) 
```

产生

![在此处输入图像描述](../Images/ec1db9ba2e992653dc90d4e2c9ba6606.png)

# c# - 是还是不是？我可以在不同的程序集中划分接口和实现类吗？

> ID：12237636
> 
> 赞同：2
> 
> 时间：2012-09-02T16:20:49.083
> 
> 标签：c#, vb.net, class, interface, assemblies

我是编程新手，但我正在努力学习！

我有一个应用程序，我必须将 IView 注入到我的 ViewModel 中。这意味着 IView 接口应该位于 ViewModel 程序集中，而不是在 View 中，否则我会破坏 MVVM 规则，添加从 VM 到 View 程序集的引用。

所以我的问题是：在两个不同的程序集中划分接口和实现类是否荒谬，或者这是正确的方法？

非常感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:29:36.240

> 在两个不同的程序集中划分接口和实现类是否荒谬，

不，这很常见。例如，当您的类实现 INotifyPropertyChanged 时，它已经发生了。

在 WCF 中，将服务接口放在单独的程序集中（即，在*仅*包含接口的程序集中）是一种（推荐的）做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T16:34:19.013

这正是[API](http://en.wikipedia.org/wiki/Application_programming_interface)所包含的内容。您为了与系统交互而实现的一堆接口。这就是某些工件（即[插件](http://en.wikipedia.org/wiki/Plug-in_%28computing%29)）的实现方式。所以这并不荒谬。

正如我看到的那样，您在问题标签上放置了两种语言，使用 .NET 可以获得另一个优势。您可以用一种语言声明接口并用另一种语言实现它们。

# jquery - 将 html 列表 ul / li 保存在 asp.net contentplaceholder 中

> ID：12237638
> 
> 赞同：0
> 
> 时间：2012-09-02T16:20:56.340
> 
> 标签：jquery, asp.net, css, html-lists, content-pages

对此有一些问题。我使用 c# 代码将目录中的文件绑定到 asp.net 中继器中。这是有效的，但我的问题不存在（我认为）。它可能与 CSS 或只是 ul 的性质有关。

为什么我的列表会超出设置的母版页内容页面区域？

我的内容页面：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

<div>
 <ul id="pg">
<ASP:Repeater id="repeater1" runat="Server" >
 <ItemTemplate>  
<li> <img src='<%#DataBinder.Eval(Container.DataItem,"n1") %>'> </li>
 </ItemTemplate>  
 </ASP:Repeater>    
 </ul>
 </div>
</asp:Content> 
```

CSS：

```
#pg {  width: 1200px; background: white; }
#pg li {  list-style: none; width: 200px; height: 200px; overflow: hidden; float: left; z-index: 2; opacity: .8; }
#pg li.active { opacity: 1; }
#pg li.selected { opacity: 1; z-index: 99; -moz-box-shadow: 0px 0px 10px #fff; -webkit-box-shadow: 0px 0px 10px #fff; }
#pg li img { display: block; width: 100%; }
#pg li p { color: white; margin: 10px 0; font-size: 12px; } 
```

jquery （注意 jphotogrid.js 中没有样式 .. 所以不会在这里列出。

$(文档).ready(函数(){

```
 $('#pg').jphotogrid({
        baseCSS: {
            width: '175px',
            height: '175px',
            padding: '5px'
        },
        selectedCSS: {
            top: '50px',
            left: '250px',
            width: '700px',
            height: '700px',
            padding: '5px'
        }
    });

}); 
```

我渲染的标记：

```
 <div>
    <div>
     <ul id="pg">
    <li> <img src='products/r/1.JPG'> </li>
    <li> <img src='products/r/127-2800_IMG - Copy (5).JPG'> </li>
    <li> <img src='products/r/127-2800_IMG - Copy (6).JPG'> </li>

    .. like 100 more of these many more of these

    <li> <img src='products/r/127-2800_IMG - Copy (7).JPG'> </li>
   </ul>
    </div>
    </div>
    <div>
    some text from my master page that follows the content page but is being 
    stepped on by ul/li content.
    </div> 
```

我尝试用跨度包装。看着CSS。想知道这是否是本机行为以及我如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:01:27.623

当您指定 a`float:left`时，该元素将从正常的页面流中取出并扔到左侧。

结果，您的列表正在`li`建立，但它超出了母版页的内容区域，因为它不再关心它。

您是否试图让母版页的以下内容出现在项目下方？如果是这样，请添加：

```
<div style="clear:both;">&nbsp;</div> 
```

之后`</ul></div>`

# google-chrome - 更改谷歌浏览器的外观

> ID：12237639
> 
> 赞同：0
> 
> 时间：2012-09-02T16:21:00.910
> 
> 标签：google-chrome, user-interface, themes

我想为 Chrome 创建一个个人主题。并且想知道我可以在哪里编辑/更改选项卡的轮廓、边框、搜索栏等。

我非常想将它们全部删除以提供更简洁的用户界面。

谢谢

顺便说一句，我在 OSX 狮子上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:52:17.603

您可以尝试以下在线工具之一：

*   [http://www.chromethememaker.com/](http://www.chromethememaker.com/)
*   [http://www.chrometheme.net/chrome-theme-creator-online.html](http://www.chrometheme.net/chrome-theme-creator-online.html)

# makefile - 在 Windows 上的 makefile 中查找环境

> ID：12237642
> 
> 赞同：0
> 
> 时间：2012-09-02T16:21:18.030
> 
> 标签：makefile

`msys`如果我在 posix shell ( / `cygwin`) 或 windows shell中运行，如何签入 makefile `cmd`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:07:25.890

以下对我有用：

```
ifeq ($(shell echo %OS%),%OS%)
$(info Running in a POSIX shell)
else
$(info Running in a Windows cmd shell)
endif 
```

您可以替换`%OS%`为 DOS 环境中定义的任何标准环境变量。

# c - unsigned in C 做任何内部工作吗？

> ID：12237644
> 
> 赞同：1
> 
> 时间：2012-09-02T16:21:37.603
> 
> 标签：c, unsigned

自从我开始用 C 编程已经有一段时间了，但是我仍然对`unsigned`. 如果我们编译这段代码：

```
#include <stdio.h>

int main(int argc, char **argv)
{
    unsigned int x = -1;

    return 0;
} 
```

gcc 和 VC++ 都不会引发任何错误，甚至不会发出关于将负数与`unsigned`.

我的问题是它`unsigned`做任何内部工作还是只是向程序员***暗示***这个值不应该是负数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:27:03.627

这不仅仅是一个提示。以下两个片段的行为应该不同：

签名整数：

```
int x = -1;
printf("%d\n", x > 0);  // prints 0 
```

无符号整数：

```
unsigned int x = -1;
printf("%d\n", x > 0);  // prints 1 
```

你可能会想出另外 5 个签名很重要的例子。例如，与操作员一起右移`>>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:28:12.567

用于`-Wsign-conversion`获得警告`gcc`。

在`gcc`4.7.1 中，`-Wsign-conversion`既不是也不`-Wall`属于 `-Wextra`.

另请注意，C 标准不需要对此初始化发出警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T16:42:20.223

`unsigned`不是`static`,或`extern`等限定符。它是类型的一部分。`const``inline`

`int`并且`unsigned int`是两种完全不同的类型。你永远不会找到一个`unsigned int`可以容纳负数的。还要注意`int`和`signed int`是完全相同的类型。对于 来说，这是一个稍微不同的故事`char`，但我会再讲一遍。

分配`-1`给一个无符号整数是一个常见的技巧，可以将它设置为它可以容纳的最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T16:25:59.993

尝试通过以下方式在 gcc 中启用警告：`gcc -Wall -o out input.c`

`unsigned int`和 normal之间的另一个区别`int`：`int`使用 4 字节的范围：–2,147,483,648 到 2,147,483,647，`unsigned`使用 4 字节的范围：0 到 4,294,967,295。您不必存储有关符号（最高位）的信息，因此您可以分配更大的值并且应用程序将正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T16:29:11.943

`unsigned`会影响整数溢出、比较和按位移位行为。这不仅仅是一个“提示”，它不应该是负面的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-02T18:36:09.860

`((unsigned int) -1)`等价于`(UINT_MAX)`( `<limits.h>`)，因为从负值到无符号值的转换保证通过模运算完成。

> **C11 § 6.3.1.3 有符号和无符号整数**
> 
> 2 否则，若新类型为`unsigned`，则在新类型所能表示的最大值的基础上反复加减一，直到该值在新类型的范围内。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-02T16:28:00.277

用于计算的内部（机器级）指令有带符号和无符号版本，例如乘法`mul`（用于无符号）和`imul`（有符号）。当您将变量声明为无符号或有符号时，编译器会选择它们。

# c# - 使用 c# 在 asp.net 中验证下拉列表？

> ID：12237645
> 
> 赞同：0
> 
> 时间：2012-09-02T16:21:43.417
> 
> 标签：c#, asp.net, validation, drop-down-menu

我在页面上有一个下拉列表，默认情况下显示的选项是“请选择一个”。目前用户可以选择该选项并访问下一页，我想要做的是如果“请选择”选择一个'确保在选择下拉列表中的实际选项之前不会授予对下一页/步骤的访问权限。

我猜测某种 If 语句，但我不确定如何执行此操作。

任何帮助都会很棒。

这是我的 ddl 代码

```
 <td class="question">
     Out of Hours Working:
 </td>
 <td>
    <asp:DropDownList ID="ddlout" runat="server" Width="150px">
      <asp:ListItem Text="Please Select One"></asp:ListItem>
      <asp:ListItem Text="Yes"></asp:ListItem>
      <asp:ListItem Text="No"></asp:ListItem>
    </asp:DropDownList>
    <span class="mandatory">*</span>
    <asp:RequiredFieldValidator
        ID="RequiredFieldValidator14" runat="server" ControlToValidate="ddlout"
        ErrorMessage=" Required." InitialValue="Please select one..."
        ForeColor="Red" SetFocusOnError="true"></asp:RequiredFieldValidator>
 </td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:52:06.760

而不是使用`<asp:RequiredFieldValidator>`使用`<asp:CompareValidator>`...

```
<asp:CompareValidator
    ID="val14" runat="server" ControlToValidate="ddlout"
    ErrorMessage=" Required." Operator="NotEqual"
    ValueToCompare="Please Select One"
    ForeColor="Red" SetFocusOnError="true" /> 
```

注意额外的`Operator`和`ValueToCompare`。如果下拉列表的值“不等于”“要比较的值”，那么它是可以的 - 否则它会触发。

[有关详细信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.aspx)

但是，我建议您`Value`为每个`ListItem`对象提供实际的 's，而不是单独使用 Text。例如`<asp:ListItem value="0" Text="Please Select One"/>`，您可以测试`ValueToCompare="0"`

# objective-c - UITableView 删除并重新加载单元格

> ID：12237649
> 
> 赞同：5
> 
> 时间：2012-09-02T16:22:05.737
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我像这样删除 UITableView 中的一些行：

```
[tableView deleteRowsAtIndexPaths:toDelete withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

这为删除操作添加了一个漂亮的动画。

但是，删除后我需要更新所有当前可见的行。打电话

```
[tableView reloadData]; 
```

第一次通话后立即生效，但漂亮的动画效果消失了。有什么更好的方法来做到这一点？即，动画删除操作，并更新所有当前可见的行？谢谢！

我需要这样做的原因是因为每个单元格都包含一个“复选框”。我的视图控制器是复选框的代表，每个复选框都有一个与之关联的 NSIndexPath。当复选框被切换时，会调用委托，告诉它我们切换了 x 索引路径。现在，如果删除了某些行，则需要更新索引路径。这就是为什么我需要重新加载所有内容，以便每个复选框都知道它所属的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-03T19:38:33.267

在您的删除操作中使用**performBatchUpdates**而不是 [tableView beginUpdates] 这允许您有一个完成块

> 将多个插入、删除、重新加载和移动操作作为一个组进行动画处理。

```
self.tableView.performBatchUpdates({
     //do stuff then delete the row
     self.tableView.deleteRows(at: [indexPath], with: .fade)
}, completion: { (done) in
     //perform table refresh
     self.tableView.reloadData()

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:34:11.610

无论经过多长时间，ctrahey 的动画块都对我不起作用。我研究了UITableView的删除、插入和重载的机制。我在 Github 上维护我的项目来解决这个问题。

[https://github.com/VansonLeung/VanTableController](https://github.com/VansonLeung/VanTableController)

它包括一个工作单元测试。通常为了给 UITableView 的单元格动画设置动画，我们必须做这样的事情：

```
[tableView_ beginUpdates];
[tableView_ deleteRowsAtIndexPaths: indexPathDelete withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView_ insertRowsAtIndexPaths: indexPathInsert withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView_ reloadRowsAtIndexPaths: indexPathReload withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView_ endUpdates]; 
```

我们必须确定删除行、插入行和重新加载行的 indexPath 数组，这是一项非常讨厌的工作！我的项目工作基本上是生成这些 indexPaths 的包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T18:24:23.993

***注意：*** *如评论中所述，**此答案可能不起作用**。如果不被接受，我会删除它。*

我不是 100% 确定这是*最好*的方法，但它有一些令人愉快的干净。`reloadData`修改底层模型后，我们可以在常规 UIView 动画块中进行包装：

```
// if self.people is a mutable array
[self.people removeObjectAtIndex:13];

[UIView animateWithDuration:0.5 animations:^{
  [self.tableView reloadData];
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T11:21:37.880

我遇到了一些与之相关的问题。使用固定索引可能你会面临很多头痛。我已经解决了这个问题，向 UITableViewCell 添加了对来自我的数据源的项目的引用，而不是 NSIndexPath。因此，无需使用保存到单元格中的 indexPath。

此外，Apple 网站上有一些信息说我们不能`reloadData`在 insert 或 delete 方法中使用该方法。

[苹果文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadData)

> 所有这个方法重新加载用于构造表格的所有数据，包括单元格、节页眉和页脚、索引数组等。为了提高效率，表格视图只重新显示那些可见的行。如果表因重新加载而缩小，它会调整偏移量。表视图的委托或数据源在它希望表视图完全重新加载其数据时调用此方法。不应在插入或删除行的方法中调用它，尤其是在通过调用 beginUpdates 和 endUpdates 实现的动画块中

# opengl - OpenGL如何知道每个顶点缓冲对象是什么类型？

> ID：12237652
> 
> 赞同：1
> 
> 时间：2012-09-02T16:22:46.000
> 
> 标签：opengl, vertex-buffer, vertex-array

我刚刚阅读了有关顶点数组对象和顶点缓冲区对象的教程，但我无法从以下代码中弄清楚 OpenGL 如何知道第一个 VBO ( `vertexBufferObjID[0]`) 表示顶点坐标，而第二个 VBO ( `vertexBufferObjID[1]`) 表示颜色数据？

```
glGenBuffers(2, vertexBufferObjID);

// VBO for vertex data
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObjID[0]);
glBufferData(GL_ARRAY_BUFFER, 9*sizeof(GLfloat), vertices, GL_STATIC_DRAW);
glVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, 0); 
glEnableVertexAttribArray(0);

// VBO for colour data
glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObjID[1]);
glBufferData(GL_ARRAY_BUFFER, 9*sizeof(GLfloat), colours, GL_STATIC_DRAW);
glVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, 0);
glEnableVertexAttribArray(1); 
```

**编辑：**感谢彼得的回答，我发现以下两行代码将每个 VBO 与着色器连接起来（索引 0 和 1 与 VBO 索引相关）：

```
glBindAttribLocation(programId, 0, "in_Position");
glBindAttribLocation(programId, 1, "in_Color"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:35:36.707

它没有，你必须告诉它哪个是着色器中的哪个。

```
layout(location = 0) in vec3 position;
layout(location = 1) in vec3 color;

void main()
{
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:35:11.777

`glVertexAttribPointer`仅用于着色器。因此，作为着色器编写者，您总是知道每个属性索引应该做什么，因为它映射到顶点着色器中的某个变量。`glBindAttribLocation`您可以使用命令或`glGetAttribLocation`或从 GLSL 中的特殊关键字控制变量映射的索引。

如果您只是使用固定功能管道（默认着色器），那么您不想使用`glVertexAttribPointer`. 而对于固定功能管道，等效命令是`glVertexPointer`and`glColorPointer`等。请注意，这些是不推荐使用的命令。

另请注意，对于固定功能`glEnableVertexAttribArray`将替换为`glEnableClientState`.

# java - JavaScript 的 Array，Scriptlet 组合不起作用

> ID：12237654
> 
> 赞同：2
> 
> 时间：2012-09-02T16:23:02.407
> 
> 标签：java, javascript, jsp, jakarta-ee, struts

我编写了以下代码来检索数组 abc 中“recipientList”的值，但它不起作用。每当我使用

```
alert(abc[i]); 
```

它返回“未定义”。我需要使用这个 abc[i] 的值作为 'options[]' 索引

document.getElementById("recipients").options[i].selected

我究竟做错了什么？

```
var abc;

    <logic:greaterThan value="0" property="ConfigId" name="ConfigForm">
    <%

    ArrayList<RecipientDTO> recipientList= (ArrayList<RecipientDTO>) request.getAttribute("recipientTypesList");
    if (recipientList != null && recipientList.size() > 0) 
    {
            for (int i=0; i < recipientList.size(); i++) 
             {
                RecipientDTO recipientType = (RecipientDTO) recipientList.get(i);%>
                abc = [<%=recipientType.getRecipientType().toString()%>];
    <%  } %> 

    var i;      
    for(i=0;i<abc.length;i++) {

        document.getElementById("recipients").options[i].selected = true; 

    }       

<% }
    %>
    </logic:greaterThan> 
```

我也用过

```
var abc = new Array();
abc[i] = "<%=recipientType.getRecipientType().toString()%>"; 
```

代替

```
var abc;
abc = [<%=recipientType.getRecipientType().toString()%>]; 
```

但没用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:30:59.390

尝试用`var abc`和`var abc=new Array()`替换

```
abc = [<%=recipientType.getRecipientType().toString()%>]; 
```

和

```
abc[<%=i%>] = '<%=recipientType.getRecipientType().toString()%>'; 
```

# objective-c - 从 NSMutableArray 中提取值的问题

> ID：12237656
> 
> 赞同：0
> 
> 时间：2012-09-02T16:23:11.377
> 
> 标签：objective-c, ios, crash, nsmutablearray, uilabel

我正在尝试将 plist 文件中的数据解析为 NSMutableArray。

在我的 plist Root 中，是一个包含 6 个数字数组的字典

我创建了一个与 IBOutlet UILabel *lbl4 对象挂钩的标签，我希望该标签显示读取 plist 的数组的第一个元素。问题是程序在分配指令（最后一条）处崩溃。我的代码是这样的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath = [paths objectAtIndex:0];
NSString *plistPath = [docPath stringByAppendingPathComponent:@"settings.plist"];

if(![[NSFileManager defaultManager] fileExistsAtPath:plistPath]);
{
    plistPath = [[NSBundle mainBundle] pathForResource:@"settings" ofType:@"plist"];
}

NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
NSString *err = nil;
NSPropertyListFormat format;

NSDictionary *temp = (NSDictionary *) [NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&err];
if(!temp)
{
    NSLog(@"Error reading plist: %@, format: %d", err, format);
}

self.dataSet = [NSMutableArray arrayWithArray:[temp objectForKey:@"Dadi"]];
[lbl4 setText:[NSString stringWithFormat:@"%@", [dataSet objectAtIndex:0]]]; 
```

plist源代码如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Dadi</key>
    <array/>
    <key>D4</key>
    <integer>0</integer>
    <key>D6</key>
    <integer>0</integer>
    <key>D8</key>
    <integer>0</integer>
    <key>D10</key>
    <integer>0</integer>
    <key>D12</key>
    <integer>0</integer>
    <key>D20</key>
    <integer>0</integer>
</dict>
</plist> 
```

调试输出显示“2012-09-02 18:29:55.483 Faith[6014:707] *** 由于未捕获的异常 'NSRangeException' 而终止应用程序，原因：'*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array '"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:36:11.867

在您的 plist 中，存储在字典`Dadi`键处的数组为空！

```
<key>Dadi</key>
    <array/> 
```

所以

```
self.dataSet = [NSMutableArray arrayWithArray:[temp objectForKey:@"Dadi"]]; 
```

将 self.dataSet 设置为一个空数组（即甚至 index:0 超出范围）。

我会检查 se.f.dataSet.count == 0 并在这种情况下提供默认值。

@warrenm 在评论中提到您的 plist 的结构可能不是您所期望的。这些是 XML 文件，因此任何以`/>`“自动关闭”结尾的标签，因此始终为*空*。要包含这些数字，您需要添加一个结束标签并将它们放在里面：

```
<array>
  <integer>7</integer>
</array> 
```

当然，在进一步评估中，您现有的 plist 具有与这些关联的键，因此这也可能不是正确的解决方案。您需要评估您对该 plist 的需求。

# python - ndb 是否适用于在 GAE 上未使用 ndb 创建的实体？

> ID：12237658
> 
> 赞同：1
> 
> 时间：2012-09-02T16:23:26.447
> 
> 标签：python, google-app-engine, app-engine-ndb

切换到`ndb`python GAE 上的库。

我可以`ndb`与之前使用低级 api 创建的实体一起使用吗？还是我必须复制所有旧实体并重新保存它们才能使用 ndb？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:26:40.977

`ndb`只是一个包装 API。核心数据存储基于协议缓冲区，并不关心您使用什么来访问它。换句话说，是的，AFAIK 它应该可以正常工作。

# sql - 外键父亲为男性，母亲为女性，您不能成为自己的母亲/父亲

> ID：12237660
> 
> 赞同：3
> 
> 时间：2012-09-02T16:23:35.260
> 
> 标签：sql, database, sqlite, foreign-keys, constraints

我有 3 张桌子：

```
CREATE TABLE "Names" (
"Name" TEXT(20) NOT NULL,
"Gender" TEXT(20) NOT NULL,
PRIMARY KEY ("Name", "Gender") 
);

CREATE TABLE "Snames" (
"Sname" TEXT(20) NOT NULL,
PRIMARY KEY ("Sname") 
);

CREATE TABLE "People" (
"ID" INTEGER NOT NULL,
"Name" TEXT(20) NOT NULL,
"Sname" TEXT(20) NOT NULL,
"Gender" TEXT(1) NOT NULL,
"FatherID" INTEGER,
"MotherID" INTEGER,
PRIMARY KEY ("ID") ,
CONSTRAINT "Father" FOREIGN KEY ("FatherID") REFERENCES "People" ("ID"),
CONSTRAINT "Mother" FOREIGN KEY ("MotherID") REFERENCES "People" ("ID"),
CONSTRAINT "Sname" FOREIGN KEY ("Sname") REFERENCES "Snames" ("Sname"),
CONSTRAINT "Name" FOREIGN KEY ("Name", "Gender") REFERENCES "Names" ("Name", "Gender")
); 
```

我的问题是“FatherID”和“MotherID”的外键约束，它们引用了自己的表。是否可以只允许“M”在“FatherID”的性别列中的“M”和“F”用于“MotherID”的外键？是否可以禁止母亲/父亲引用同一行？

基本上：父亲必须是男性。妈妈一定是女性。你不能成为你自己的母亲/父亲。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:44:51.820

我相信 SQLite 不支持包含具有从其他行动态获取的值的表达式的约束，外键除外。

您必须创建触发器来检查父亲和母亲的性别。

使用此表定义：

```
CREATE TABLE "People" (
    "ID" INTEGER NOT NULL,
    "Name" TEXT(20) NOT NULL,
    "Sname" TEXT(20) NOT NULL,
    "Gender" TEXT(1) NOT NULL,
    "FatherID" INTEGER,
    "MotherID" INTEGER,
    PRIMARY KEY ("ID") ,
    CONSTRAINT "Father" FOREIGN KEY ("FatherID") REFERENCES "People" ("ID"),
    CONSTRAINT "Mother" FOREIGN KEY ("MotherID") REFERENCES "People" ("ID"),
    CHECK (Gender IN ('M', 'F')),
    CHECK ("ID" NOT IN ("FatherID", "MotherID"))); 
```

这可能是 INSERT 触发器（我会让您编写 UPDATE 触发器）：

```
CREATE TRIGGER checkParentIdsOnInsert BEFORE INSERT ON People 
    WHEN new.FatherID IS NOT NULL OR new.MotherID IS NOT NULL
BEGIN
    SELECT CASE     
    WHEN ((SELECT Gender FROM People AS t1 WHERE t1.ID=new.FatherID) = 'F' 
            AND (SELECT Gender FROM People AS t2 WHERE t2.ID=new.MotherID) = 'M')
       THEN RAISE(ABORT, 'Father must be male and mother female') 
    WHEN ((SELECT Gender FROM People AS t3 WHERE t3.ID=new.FatherID) = 'F')
       THEN RAISE(ABORT, 'Father must be male') 
    WHEN ((SELECT Gender FROM People AS t4 WHERE t4.ID=new.MotherID) = 'M')
       THEN RAISE(ABORT, 'Mother must be female') 
    END; 
END; 
```

一些简单的测试：

```
sqlite> pragma foreign_keys=on;
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Jo", "Blo", "M", NULL, NULL);
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Za", "Bla", "F", NULL, NULL);
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Bad", "Kid", "M", 2, 1);
Error: Father must be male and mother female
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Bad", "Kid", "M", 2, NULL);
Error: Father must be male
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Bad", "Kid", "M", NULL, 1);
Error: Mother must be female
sqlite> INSERT INTO People (Name, SName, Gender, FatherID, MotherID) VALUES
   ...>     ("Good", "Kid", "M", 1, 2);
sqlite> .headers on
sqlite> .mode column
sqlite> SELECT * FROM People;
ID          Name        Sname       Gender      FatherID    MotherID  
----------  ----------  ----------  ----------  ----------  ----------
1           Jo          Blo         M                                 
2           Za          Bla         F                                 
3           Good        Kid         M           1           2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:58:48.247

以下应该可以工作，但需要几个其他冗余列作为外键（[SQL Fiddle](http://sqlfiddle.com/#!7/c814e/2)）

```
CREATE TABLE "People" (
"ID" INTEGER NOT NULL,
"Name" TEXT(20) NOT NULL,
"Sname" TEXT(20) NOT NULL,
"Gender" TEXT(1) NOT NULL,
"FatherID" INTEGER NULL,
"FatherGender" TEXT(1) NULL,
"MotherID" INTEGER NULL,
"MotherGender" TEXT(1) NULL,
PRIMARY KEY ("ID") ,
UNIQUE ("ID", "Gender"),
CHECK ("ID" NOT IN ("FatherID", "MotherID")),
CHECK ("FatherGender" = 'M'),
CHECK ("MotherGender" = 'F'),
CONSTRAINT "Father" FOREIGN KEY ("FatherID","FatherGender") REFERENCES "People" ("ID", "Gender"),
CONSTRAINT "Mother" FOREIGN KEY ("MotherID","MotherGender") REFERENCES "People" ("ID", "Gender")
);

INSERT INTO "People"
VALUES(1, 'Adam', '?', 'M', NULL, NULL, NULL, NULL);

INSERT INTO "People"
VALUES(2, 'Eve', '?', 'F', NULL, NULL, NULL, NULL);

INSERT INTO "People"
VALUES(3, 'Cain', '?', 'M', 1, 'M', 2, 'F'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T16:52:10.773

要应用这种类型的约束，您需要使用可以完成工作的***触发器***

编辑：SQLite 支持触发器。谢谢@catcall

# c# - 在 .net 中创建只读嵌套对象

> ID：12237665
> 
> 赞同：1
> 
> 时间：2012-09-02T16:23:55.723
> 
> 标签：c#, .net, vb.net

我是 .net 的新手，正在寻找有关如何最好地创建只读对象结构的建议。这些结构是在编译时布局的，根本不会改变。我的对象如下所示：

```
Public Structure CatPair
    Public code, name As String
End Structure

Public Structure Category
    Public code, name As String
    Public subcategories() As EpfPair
End Structure

Public ReadOnly categories() As Category = {
    New Category With {.code = "Code1", .name = "cat title 1", .subcategories = Nothing
    },
    New Category With {.code = "Code2", .name = "cat title 2", .subcategories = Nothing
    },
    New Category With {.code = "Code3", .name = "cat title 3", .subcategories = Nothing
    },
    New Category With {.code = "Code4", .name = "cat title 4", .subcategories = {
            New CatPair With {.code = "subC1", .name = "subcat title 1"},
            New CatPair With {.code = "subc2", .name = "subcat title 2"},
            New CatPair With {.code = "subc3", .name = "subcat title 3"}
        }
    },
    New Category With {.code = "Code5", .name = "Cat title 5", .subcategories = Nothing
    }
} 
```

所以这个对象实际上是一个嵌套的常量表，其中有些有子类别，有些没有。我的目标是：

1.  确保所有内容都是只读的，并且
2.  以某种方式实现它（如果可能的话），这样我的不使用此代码的 ASP.net 页面就不会在每次加载页面时都会产生初始化对象的任何重大开销。我已经在 App_Code 文件夹的模块中声明了该对象，因此我不确定编译器如何处理不接触该对象的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:22:57.603

您提供的代码不会实现您的目标。要使对象不可变，您至少需要将对象的属性设置为只读（没有设置器），只需将所有内容都传递给构造函数参数。

# jquery - 使用 jQuery 重新加载 div（未找到文件）

> ID：12237666
> 
> 赞同：0
> 
> 时间：2012-09-02T16:24:00.580
> 
> 标签：jquery, html, reload

我有这个脚本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script> 
<script  type="text/javascript"> 
var updateGallery = setInterval(function() {
$('#gmap2').fadeOut('fast').load('map.php').fadeIn('fast');}, 10000);
</script> 
```

需要加载文件（map.php）。

我在 index.php 页面中有这行代码；

```
<div id="gmap2"> <?php include 'map.php'; ?></div> 
```

在 firefox 错误控制台中，我得到 Network error 404 File not found (http://domain.com/map.php) 即使我将完整的 url 路径放入 map.php 文件，我也得到了同样的错误。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:31:53.607

这里没有足够的信息来给你答案，但这是你首先要看的地方：

您的 http 服务器日志（和 HTTP 错误日志）应该显示您的脚本试图获取的 URL（以及文件）。注意相对 URL 是相对于包含它们的资源（文件）解析的。

根据您的托管服务和/或 Web 服务器，它们可能位于您使用 ftp 或 ssh 登录的子目录中；在我的系统上，它们位于 /var/log/httpd/error_log 和 /var/log/httpd/access_log 中（如果服务器繁忙，它们可能是大文件！）。

当您进行 AJAX 开发时，运行“tail -f /var/log/httpd/error_log”的窗口会有所帮助。

# c# - EF 5.0 迁移丢弃枚举

> ID：12237668
> 
> 赞同：0
> 
> 时间：2012-09-02T16:24:07.500
> 
> 标签：c#, entity-framework, ef-code-first, migration, entity-framework-migrations

我生成了一个新的迁移，但由于某种原因，它删除了我正在使用的所有枚举，并且没有在 db 模式中添加对它的任何支持。虽然它是在 Code-First 中定义的

这些是我的枚举：

```
using System;
namespace StockManagement.Enums
{
    public enum InventoryMethod
    {
        FIFO = 0,
        LIFO = 1,
        WEIGHTED_AVERAGE = 2
    }

    public enum TransactionDirection
    {
        BUY = 0,
        SELL = 1
    }
} 
```

这些是我的 2 个相关课程：

```
public class User
{
    [Key]
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    /// <summary>
    /// FIFO = First In First Out
    /// LIFO = Last In First Out
    /// AVG = Average
   /// </summary>
    public InventoryMethod InventoryMethod { get; set; }
    public virtual ICollection<Article> Articles { get; set; }
}

public class ArticleTransaction
{
    [Key]
    public int ArticleTransactionID { get; set; }
    public DateTime TransactionDate { get; set; }
    /// <summary>
    /// Buy = Buying goods from suppliers
    /// Sell = Selling goods to customers
    /// </summary>
    public TransactionDirection BuyOrSell { get; set; }
    public int Number { get; set; }
    public double PriceExclusive { get; set; }
    public virtual Article Article { get; set; }
} 
```

这是我生成的迁移：

```
using System.ComponentModel.DataAnnotations;
using System;
using StockManagement.Enums;
public class ArticleTransaction
{
    [Key]
    public int ArticleTransactionID { get; set; }

    public DateTime TransactionDate { get; set; }
    /// <summary>
    /// Buy = Buying goods from suppliers
    /// Sell = Selling goods to customers
    /// </summary>
    public TransactionDirection BuyOrSell { get; set; }
    public int Number { get; set; }
    public double PriceExclusive { get; set; }

    public virtual Article Article { get; set; }

} 
```

我有 EF 5.0，这最近没有改变 :) 任何人都知道为什么会突然发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:12:54.023

大多数数据库没有枚举的概念。这反映在 EF 中，其中枚举属性由相应枚举类型的基础类型列支持。例如，因为 InventoryMethod 类型的基础枚举类型是 System.Int32/int（如果未指定特定基础类型，则这是默认基础类型）此类型的所有属性都将由 int 类型的列支持（C# 映射中的 int到 EDM 中的 Edm.Int32，后者又映射到数据库中的 int（我在这里谈论的是 Sql Server））。

# perl - Perl Hash + While 添加元素

> ID：12237671
> 
> 赞同：1
> 
> 时间：2012-09-02T16:24:30.653
> 
> 标签：perl

我需要将每个元素存储在第一列中，文件中的键和值的权限在哪里，我这样做了，但我不明白。

它是我的文件“文件特权”中的内容

```
-rw-rw-r--. file-privilege
-rw-rw-r--. file-selinux
-rwxrwxrwx. funcion-split-join.pl
-rwxrwxr-x. hash2.pl
-rw-rw-r--. hash3.pl
-rwxrwxr-x. hash.pl
-rwxrwxr-x. inthashfile.pl
-rw-rw-r--. ls
-rwx------. probando.pl 
```

perl 中的代码。

```
%pr_file = ();
open(WHO, "file-privilege");
while (<WHO>) {
    ($privilege, $file) = split ;
    push( @{$pr_file{$privilege}}, $file );
} 
```

这个输出。

```
-rwx------. = ARRAY(0x83bb7f0)
-rw-rw-r--. = ARRAY(0x83a06f8)
-rwxrwxr-x. = ARRAY(0x83bb780)
-rwxrwxrwx. = ARRAY(0x83bb750) 
```

我需要：

键=值

```
-rw-rw-r--. = file-privilege 
```

ETC...

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:30:29.310

相同的键映射到多个值。您需要像添加值一样取消引用数组引用；或使用仅记住最后一个（或第一个，或随机）值的标量。

无论如何，您向我们展示的代码是正确的；问题出在打印出您未提供的值的代码中。但是这样的事情：

```
for my $priv (keys %pr_file) {
    for my $file (@{$pr_file{$priv}}) {
        print "$priv => $file"; # Already contains trailing newline
    }
} 
```

顺便说一句，您可能应该使用 Perl 的内置`stat()`函数，而不是尝试解析`ls`输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:34:32.450

在没有看到代码的情况下，您可能正在执行以下操作：

```
print "$privilege = $pr_file{$privilege}\n"; 
```

由于您将文件名列表存储在数组引用中，因此此代码通过打印“ARRAY（地址）”来使用**数组引用**`$pr_file{$privilege}`的默认字符串化。

 **当您打印结果时，您需要自己以更有用的格式对文件名的数组引用进行字符串化：

```
print "$privilege = $pr_file{$privilege}->[0]\n"; # Print the first file in the list

print "$privilege = $pr_file{$privilege}->[-1]\n"; # Print the last file in the list

my $files_string = join(",", @{ $pr_file{$privilege} })); #Comma separated files
print "$privilege = $files_string\n"; # Print all files, comma separated

my @files = @{ $pr_file{$privilege} }); # Dereference the array ref into array
print "$privilege = @files\n"; # Print all files, space separated. 
                               # Uses default stringification of an array 
```**

# android - 使用惰性列表的图库小部件

> ID：12237674
> 
> 赞同：0
> 
> 时间：2012-09-02T16:24:50.243
> 
> 标签：android, android-widget, lazy-loading

对于我正在尝试编写的这个应用程序，我的想法是我将在线托管一些图片并将各个 url 保存到 sqlite 数据库中。然后我将从数据库中提取每个 url 并下载要在画廊小部件中显示的图片。我读到了 Lazy List （为伟大的工作而赞叹！），但我在实现它时遇到了问题。我试图从惰性列表中修改编码，但它似乎不起作用。我不确定我的应用程序是否有错误，或者我是否错误地修改了惰性列表。非常感谢您的任何帮助，并在此先感谢您！=)

我的应用程序代码：

```
public class ResultDetails extends ListActivity {

    protected int foodId;
    protected String pic1, pic2, pic3, pic4, pic5;
    LazyAdapter adapter1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result_details);
        foodId = getIntent().getIntExtra("FOOD_ID", 0);
        SQLiteDatabase db = (new DatabaseHelper(this)).getWritableDatabase();
        Cursor cursor = db.rawQuery("SELECT _id, pic1, pic2, pic3, pic4, pic5 FROM database WHERE _id = ?", new String[]{""+foodId});
    pic1 = cursor.getString(cursor.getColumnIndex("pic1"));
    pic2 = cursor.getString(cursor.getColumnIndex("pic2"));
    pic3 = cursor.getString(cursor.getColumnIndex("pic3"));
    pic4 = cursor.getString(cursor.getColumnIndex("pic4"));
    pic5 = cursor.getString(cursor.getColumnIndex("pic5"));
    String[] mStrings={
            pic1,
            pic2,
            pic3, 
            pic4, 
            pic5};
    Gallery g = (Gallery) findViewById(R.id.photobar);
    adapter1=new LazyAdapter(this, mStrings);
    g.setAdapter(adapter1);
} 
```

我已经这样修改了 LazyAdapter：

```
public class LazyAdapter extends BaseAdapter {
   int mGalleryItemBackground;
   private Context mContext;

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }
    public LazyAdapter(Context c) {
       mContext = c;
       TypedArray b = c.obtainStyledAttributes(R.styleable.Theme);
       mGalleryItemBackground = b.getResourceId(
         R.styleable.Theme_android_galleryItemBackground,
                   0);
       b.recycle();
   }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView vi = new ImageView(mContext);
        imageLoader.DisplayImage(data[position], vi);
        vi.setLayoutParams(new Gallery.LayoutParams(150, 100));
    vi.setScaleType(ImageView.ScaleType.FIT_XY);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:49:19.450

在 Fedor 的帮助下，我找出了实施的问题所在。无论是列表还是图库，都无需更改 LazyAdapter！只需按原样使用适配器并在您的应用程序中使用以下代码来加载图片：

```
 g = (Gallery) findViewById(R.id.photobar);
 adapter1=new LazyAdapter(this, mStrings);
 g.setAdapter(adapter1);} 
```

我注意到有很多关于将 LazyList 用于列表而不是画廊的示例。为了帮助那些想要将它用于画廊的人，这里是一个实现示例：

```
public class ResultDetails extends ListActivity {

protected int foodId;
protected String pic1, pic2, pic3, pic4, pic5;
LazyAdapter adapter1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.result_details);
    foodId = getIntent().getIntExtra("FOOD_ID", 0);
    SQLiteDatabase db = (new DatabaseHelper(this)).getWritableDatabase();
    Cursor cursor = db.rawQuery("SELECT _id, pic1, pic2, pic3, pic4, pic5 FROM database WHERE _id = ?", new String[]{""+foodId});
    pic1 = cursor.getString(cursor.getColumnIndex("pic1"));
    pic2 = cursor.getString(cursor.getColumnIndex("pic2"));
    pic3 = cursor.getString(cursor.getColumnIndex("pic3"));
    pic4 = cursor.getString(cursor.getColumnIndex("pic4"));
    pic5 = cursor.getString(cursor.getColumnIndex("pic5"));
    String[] mStrings={pic1, pic2, pic3, pic4, pic5};
    g = (Gallery) findViewById(R.id.photobar);
    adapter1=new LazyAdapter(this, mStrings);
    g.setAdapter(adapter1);} 
```

# php - 无法获取 Mysqli_result

> ID：12237683
> 
> 赞同：6
> 
> 时间：2012-09-02T16:25:43.107
> 
> 标签：php, mysqli

我有这个错误

> **警告**：mysqli_fetch_array() [function.mysqli-fetch-array]：无法在第**12**行的 /home/fights7/public_html/include/load_more_home_posts.php 中获取**mysqli_result**

 **并且想知道我在下面的代码中做错了什么？

```
$articles_data = mysqli_query($mysqli,"SELECT * FROM streamdata WHERE streamitem_id < '$lastID' ORDER BY streamitem_id DESC LIMIT 10") or die(mysql_error());
while($articles_info = mysqli_fetch_array($articles_data)) {
$json = array();
$json['streamitem_id'] = $articles_info['streamitem_id'];
$json['streamitem_content'] = $articles_info['streamitem_content'];
$json['streamitem_timestamp'] = $articles_info['streamitem_timestamp'];
mysqli_free_result($articles_data); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T16:27:25.713

马上，您似乎`mysqli_free_result()`在 fetch 循环内部调用，因此在第一次循环迭代之后，您的结果资源已被关闭并释放，并且不再有可用的结果。

```
while($articles_info = mysqli_fetch_array($articles_data)) {
  $json = array();
  $json['streamitem_id'] = $articles_info['streamitem_id'];
  $json['streamitem_content'] = $articles_info['streamitem_content'];
  $json['streamitem_timestamp'] = $articles_info['streamitem_timestamp'];
  // Don't do this!
  //mysqli_free_result($articles_data);
}
// If you need to, free it outside the loop
mysqli_free_result($articles_data); 
```

我注意到你在`mysqli_fetch_array()`没有指定的情况下调用`MYSQLI_ASSOC`，所以你得到了数字键和关联键。`MYSQLI_ASSOC`如果您使用 JSON 中的所有内容，则使用or时不需要执行所有这些任务`mysqli_fetch_assoc()`：

```
while($articles_info = mysqli_fetch_assoc($articles_data)) {
  // No need for the $json array. Just use $articles_info directly
  // if you were going to json_encode() it.
} 
```**

# asp.net-mvc - 如何通过 Url.Action 传递模型？

> ID：12237684
> 
> 赞同：6
> 
> 时间：2012-09-02T16:25:54.923
> 
> 标签：asp.net-mvc

我想在 Jquery Dailog 中返回一个局部视图，并想将 viewmodel 对象传递给特定的控制器操作，该怎么做？

**看法**

```
@Html.DropDownListFor(model => model.SelectedCountry, new SelectList(Model.CountryList, "CountryCode", "CountryName"), "---SELECT COUNTRY---",
                                    new { @class = "chosen", @onchange = "this.form.action='/Home/Index'; this.form.submit(); " })
<input type="button" id="button1" value="Push"/>
<div id="dialog" title="Report" style="overflow: hidden;"></div> 
```

**JS**

```
<script type="text/javascript">
$(function () {
    $('#dialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        title: 'Report',
        modal: true,
        open: function() {
            //here how to pass viewmodel
            $(this).load("@Url.Action("CreatePartial")");
        },
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    });

    $('#button1').click(function () {
        $('#dialog').dialog('open');
    });
}); 
```

**控制器**

```
public ActionResult CreatePartial(HomeViewModel homeViewModel)
{
        return PartialView("_CreatePartial", homeViewModel);
} 
```

**目前，"homeViewModel.SelectedCountry" 为 Null，如何在 Jquery 中传递模型？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T19:09:18.630

如果您使用 AJAX，则不应使用 HTTP GET 将模型传递给服务器。而是使用 HTTP POST（如 in`$().ajax({method: 'POST'})`并将数据作为 POST 数据 ( `$().ajax({method: 'POST', data: @Html.Raw(Json.Encode(Model))})`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T18:39:30.720

您可以使用内置 JSON-helper 将模型转换为 JSON 对象，只需将您的请求修改为：

```
$(this).load('@Url.Action("CreatePartial")',@Html.Raw(Json.Encode(Model))); 
```

需要@Html.Raw 来防止 HTML 编码。

我测试了它并且它有效。

# asp.net - ASP.net 母版页、Web 根目录和目录结构

> ID：12237691
> 
> 赞同：1
> 
> 时间：2012-09-02T16:26:16.967
> 
> 标签：asp.net, iis, master-pages, directory-structure

*为简洁起见，我已修改（但未更改）此问题；查看以前版本的[编辑](https://stackoverflow.com/posts/12237691/revisions)*

我有一个具有以下（*建议*的）文件系统层次结构的 ASP.net 网站（*非应用程序，非 MVC ）：*

 *![建议的目录结构](../Images/89bdab5f8da35d6422dd3fc4006793b5.png)

可以进行哪些配置更改（*如果有*）来实施此方案？这可能吗？定位为应用程序`Cannot use a leading .. to exit above the top`时，我收到了错误。`/Site`我想知道是否有办法解决这个问题。

正如我所看到的，鉴于该网站在以下位置`C:\www\SiteRoot\`运行`http://example.com/`：

```
 PATH                        URL
~           C:\www\SiteRoot\            none
/           C:\www\SiteRoot\Site\       http://example.com/
~/Site      C:\www\SiteRoot\Site\       http://example.com/
/About      C:\www\SiteRoot\Site\About  http://example.com/About/ 
```

因此，仍然 会`MasterPageFile="~/Site/About.master"`正确解析，. 希望这种配置是可能的。
`<img src="/About/ImageInAboutFolder.jpg" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:31:28.840

如果我正确理解你的问题，不，你不能。*

# rspec - 为什么 Timecop.freeze 仅在我运行完整的规格套件时才有效？

> ID：12237694
> 
> 赞同：0
> 
> 时间：2012-09-02T16:26:43.050
> 
> 标签：rspec, rake, bundler, timecop

我有一个大型 Rails 测试套件，我只使用过一次 Timecop。

```
it "should not include votes from today" do
  assert_equal 8, @answer.todays_score
end

it "should include today's votes tomorrow" do
  Timecop.travel(Date.today + 1) do
    assert_equal 10, @answer.yesterdays_score
  end
end 
```

当我运行完整套件时，这些规格通过：

```
rake 
```

或者

```
rake spec 
```

但是，如果我尝试运行较小的集合或单个规范，Timecop.freeze 将不起作用。也就是说，以下两个都将失败：

```
rspec ./spec/models/answers_spec.rb

rake spec:models 
```

有任何想法吗？我是否遗漏了有关 ruby​​ / rspec / rake 和 bundler 之间的交互的信息？（作为记录——当我运行上述所有以“捆绑执行”开头的内容时，我得到了相同的结果）。

我包括我的 Gemfile 和 spec.helper 以防这澄清任何事情。

宝石文件：

```
gem 'rails', '3.2.8'
gem 'omniauth'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'haml-rails'
gem 'sass'
gem 'chronic'
gem 'chronic_duration'
gem 'heroku'
gem 'pg', '0.13.1'
gem 'jquery-rails'
gem 'jquery_mobile_rails', "1.1.0"
gem "bcrypt-ruby", :require => "bcrypt"
gem 'rails_autolink'

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
end

group :development, :test do
  gem 'timecop'
  gem 'ruby-prof' 
  gem 'factory_girl_rails'
  gem 'rspec-rails'  
  gem 'capybara'
  gem 'mocha'
end 
```

spec_helper.rb：

```
require 'rubygems'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'capybara/rails'
require 'rspec/autorun'
require 'mocha'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.mock_with :mocha
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.include(MailerMacros)  
  config.before(:each) { reset_email }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:06:58.503

我相信，如果您尝试运行`rake spec`足够多的时间，就会有失败的时候。当测试之间的时间间隔较小时（只是预感），某处可能存在时间依赖性问题。

我的猜测是它`@answer`有一个时间字段，它在 Timecop 块中被调用之前已经实例化。我认为您必须在另一个 Timecop.freeze 块中创建，这样就不会对的时间起源进行`@answer`第二次猜测。`@answer`

检查你的`before`块。（任何`before :all`块？）我认为，当在`before`块中运行较小的测试套件命令时，会导致在 Timecop 启动之前使用不需要的时间戳实例化对象。如果`before :all`之前的测试中存在一些东西也可能导致更改。

# hibernate - hibernate怎么火查询？

> ID：12237695
> 
> 赞同：0
> 
> 时间：2012-09-02T16:26:45.080
> 
> 标签：hibernate, hibernate-mapping

我有一对一的休眠注释映射。喜欢例如。

```
 @Entity
     @Table(name="person")
     class Person{
       @OneToOne( mappedBy = "person", cascade = CascadeType.ALL)    
       private Passport passport;
       ......
     }

     @Entity
     @Table(name="passport")
     class Passport{
     @OneToOne
     @JoinColumn(name = "statusid")
     private Person person;
     ......
     .....
     } 
```

这里`Person`是拥有者，`Passport`也是所有者。当我执行`select`操作时，`person`为什么休眠会触发两个查询，即 select from`person`和`passport`. 根据休眠文档

```
the owner is responsible for the association column(s) update 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:16:13.033

由于您添加了 -cascad all 字段（在一对一映射中）hibernate 在此处执行的操作，因此会触发两个查询。.它带来了所有引用字段的数据。

1-假设你选择一个id=3的人；

2-那么你将在你的 dao 层中有一个具有以下语法的方法

Person finbyid(Integer personid) { ......... ........ return person; }

3-和相应的sql查询会是这样的

select * from Person where id=3;

4-休眠在这里做了一件事-

它还带来了与之相关的所有护照对象。

所以你可以做 Passport pass=person.getPassport();

现在 Passport 的传递对象将包含所有列 现在不会触发单独的查询。. 你可以直接使用 pass.getPassportid(); pass.getPassportnumber();

ETC。 。希望你的疑惑被清除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:04:48.003

Concept of relationship's owner is not connected to your issue. As also excerpt you took from documentation hints, owning side is consulted when persisting relationship. It does not mean that other side of relationship is lazily loaded.

What you would need for your use case is lazy loading of one-to-one relationship. Unfortunately Hibernate does not support it. Typical hack to get around this limitation is to define relationship that is one-to-one on the one side and one-to-many (lazy) on the other side.

# javascript - 如何构建原点具有单个标签的坐标轴？

> ID：12237703
> 
> 赞同：3
> 
> 时间：2012-09-02T16:27:24.160
> 
> 标签：javascript, coordinates, d3.js, coordinate-systems

我希望用 d3.js 绘制多项式函数，并且**我正在寻找正确的解决方案**（这应该比从头开始构建轴更简单）关于**如何**在 2D 中构建坐标轴，其中我有一个**原点标签**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T15:11:52.090

D3 轴生成后即可进行操作。例如，您可以通过专门选择它们来删除原点标​​签：

```
//make default origin labels invisible
svg.selectAll(".axis g text")
    .filter(function(d) {return d==0 ? true : false})
    .style("opacity", 1e-6); 
```

然后您可以添加自己的原产地标签：

```
//add a custom origin identifier
svg.append("text")
    .attr({
        "class": "origintext",
        "x": -8,
        "y": height + 8,
        "text-anchor": "end",
        "dy": ".71em"
    })
    .text("(0,0)"); 
```

在这里查看完整的实现：http: [//jsfiddle.net/kcPEX/1/](http://jsfiddle.net/kcPEX/1/)

![单一来源标签](../Images/d413245307e6299d1583266597360147.png)

# ios - 如何在 iOS 中实现视频 DRM

> ID：12237706
> 
> 赞同：15
> 
> 时间：2012-09-02T16:27:56.347
> 
> 标签：ios, h.264, drm

我希望在 iOS 视频播放器中实现 DRM，但我不确定如何实现。为了实现视频 DRM（同时仍然使用 Apple 的硬件加速 H264 解码），我需要一种将解密的 H264 流输入标准 iOS 视频播放 API 的方法。

根据[这个问题](https://stackoverflow.com/a/3682640/184998)，2010 年 9 月无法实施第 3 方 DRM。Apple [Developer Forums](https://devforums.apple.com/message/695359#695359)中有一个帖子无处可去。但是，截至今天，存在许多第 3 方 DRM 库：[Widevine](http://www.widevine.com/available_platforms.html)、[Irdeto (PDF)](http://irdeto.com/documents/SO_AC_OTT_iPad_EN_L.pdf)、[Marlin](http://irdeto.com/documents/SO_AC_OTT_iPad_EN_L.pdf)。他们显然已经找到了将自定义流传递到 Apple 批准的应用程序中的媒体播放器的方法。

我找到了两条线索。一个是[创建自定义 URL 协议](http://aptogo.co.uk/2010/07/protecting-resources/)的建议，但人们似乎在将其用于视频时效果不佳。另一种是创建本地HTTP服务器线程，通过iDevice内部127.0.0.1上的HTTP直播提供内容。我想非常确定苹果会在走这条路之前批准。

那么——第 3 方 DRM 实现使用哪些 Apple 批准的 API 将解密的视频数据输入视频播放器？

编辑：[适用于 iOS 的最新 BBC iPlayer](http://www.bbc.co.uk/blogs/bbcinternet/2012/09/iplayer_mobile_downloads.html)允许下载程序以供以后查看。他们要么明文存储内容，要么解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:34:33.237

您可以开始将文件解密为另一个文件并在解密时播放该文件。您需要让它缓冲几秒钟的视频，但它会起作用。

此外，您需要确保原子在文件中的`moov`原子之前`mdat`，否则它将不起作用。（例如，AVFoundation 创建 MP4，其中`moov`原子位于原子之后`mdat`，因此需要对其进行修改才能工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:20:37.923

一个可行的解决方案是本地 http 服务器。但专利申请是由 Authentec 提交的。

[http://www.google.com/patents/US20120284802](http://www.google.com/patents/US20120284802)

# cocoa - 如何设置 NSOutlineView 以使用自动布局考虑最小内容的宽度？

> ID：12237707
> 
> 赞同：2
> 
> 时间：2012-09-02T16:27:59.090
> 
> 标签：cocoa, nstableview, nsoutlineview, autolayout

我有`NSSplitView`里面`NScrollView`和基于视图的`NSOutlineView`里面`NSScrollView`，它有例如一列。我的大纲视图必须只能垂直滚动，并且必须考虑列内容的最小宽度以适应它。我认为他们必须返回`-(NSSize)fittingSize`值`{minColumnWidth, 0}`，但它返回 {0,0}。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:03:54.623

尝试返回所需的视图大小`(NSSize)intrinsicContentSize`。我不确定我是否完全理解你的情况。您可以添加屏幕截图或线框，以便更容易理解设置。不管怎样，看看我[处理类似问题的问题](https://stackoverflow.com/questions/13029052/autolayout-constraints-do-no-work-for-nsview-composition-with-drawrect/13034819#13034819)。

也许还可以查看**WWDC Session 232 - Auto Layout by Example**。它涵盖了一个新的拆分视图 API 以及自动布局（大约 41:00 分钟开始）。

# linux - 如何在 /proc 中显示文件的大小？它的大小不应该为零

> ID：12237712
> 
> 赞同：6
> 
> 时间：2012-09-02T16:28:12.240
> 
> 标签：linux, file, filesize, ls, proc

从下面的消息中，我们知道文件 /proc/sys/net/ipv4/ip_forward 中有两个字符，但是为什么 ls 只是显示这个文件的大小为零？

我知道这不是磁盘上的文件，而是内存中的文件，那么有什么命令可以让我看到 /proc 中文件的实际大小吗？

```
root@OpenWrt:/proc/sys/net/ipv4# cat ip_forward | wc -c
2
root@OpenWrt:/proc/sys/net/ipv4# ls -l ip_forward
-rw-r--r--    1 root     root            0 Sep  3 00:20 ip_forward
root@OpenWrt:/proc/sys/net/ipv4# pwd
/proc/sys/net/ipv4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:37:57.157

这些不是磁盘上的真正文件（正如您所提到的），但它们也不是内存中的文件 - /proc 中的名称对应于对操作系统中正在运行的内核的调用，并且内容是动态生成的。

如果不生成文件，系统不知道文件有多大，但是如果您读取“文件”两次，则无法保证您获得相同的数据，因为系统可能已更改。

您可能正在寻找程序 *sysctl -a* 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T16:38:30.840

/proc 中的东西并不是真正的文件。在大多数情况下，它们甚至不是内存中的文件。当您访问这些文件时，proc 文件系统驱动程序会执行系统调用，获取适合文件的数据，然后将其格式化以输出。这通常是动态构建的动态数据。一个例子是 /proc/net/arp，它包含当前的 ARP 缓存。

获取这些东西的大小只能通过格式化整个输出来完成，所以不能只在列出文件时完成。如果您想要尺寸，请照常使用`wc -c`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T16:36:03.150

文件系统是由内核维护的`/proc/`“幻觉”，它不会费心给出（大部分）其伪文件的大小（因为计算“真实”大小通常涉及构建整个文本伪文件的内容），并期望`/proc/`从第一个字节到最后一个字节（即直到 EOF）以合理大小（例如 1K）的块顺序读取大多数 [pseudo-] 文本文件。有关详细信息，请参见[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页。

因此，无法在单个系统调用（例如[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)`/proc/self/maps`中获取（某些文件的真实大小，例如or ） ，因为它会给出 0 的大小，如[stat(1)](http://www.kernel.org/doc/man-pages/online/pages/man1/stat.1.html)或[ls(1)](http://www.kernel.org/doc/man-pages/online/pages/man1/ls.1.html)命令所报告的那样）。阅读这些文本文件的典型方式可能是`/proc/sys/net/ipv4/ip_forward`

```
FILE* f = fopen("/proc/self/maps", "r"); 
                // or some other textual /proc file, 
                // e.g. /proc/sys/net/ipv4/ip_forward
if (f) 
  {
      do {
        // you could use readline instead of fgets
        char line[256];
        memset (line, 0, sizeof(line));
        if (NULL == fgets(line, sizeof(line), f))
          break;
        // do something with line, for example:
        fputs(line, stdout);
      } while (!feof (f));
    fclose (f);
  } 
```

当然，某些文件（例如 `/proc/self/cmdline`）被记录为可能包含`NUL`字节。你需要一些`fread`给他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T16:34:00.183

它实际上并不是内存中的文件，它是用户和内核之间的接口。

# android - 使用 onClicked 时可以禁用按钮吗？

> ID：12237713
> 
> 赞同：0
> 
> 时间：2012-09-02T16:28:14.870
> 
> 标签：android

当我使用这样的侦听器时，很容易禁用按钮：

```
button.setOnClickListener(btnSub);
button.setEnabled(false); 
```

但是，当我对 XML 文件中的按钮使用 onClick 并仅在主文件中调用一个方法时，是否可以访问该按钮并禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:36:05.773

如果您使用xml布局来设置按钮的点击功能，那么您使用这样的东西，对吗？：

```
<Button
    ...
    android:onClick="yourFunction"
    ... /> 
```

如果你看一下[文档](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)，它说，你需要为此提供一个函数，什么需要一个`View`参数。

所以你需要这样实现`yourFunction`：

```
public void yourFunction(View view){...} 
```

`View`您在该功能中获得的 是（`Button`或任何其他`View`）您单击的内容。

因此，您只需要像这样实现该功能：

```
public void yourFunction(View view)
{
    view.setEnabled(false);
} 
```

* * *

**编辑** 如果你给它`Button`一个具有以下 xml 属性的 id：

```
android:id="@+id/my_button" 
```

然后你可以从你的（或）访问那个`View`（）：`Button``Activity``Dialog`

```
Button myButton = (Button) findViewById(R.id.my_id); 
```

并启用它：

```
myButton.setEnabled(true); 
```

# python - 从 dbpedia 检索数据时出错

> ID：12237718
> 
> 赞同：1
> 
> 时间：2012-09-02T16:29:03.267
> 
> 标签：python, sparql, dbpedia

我尝试从 dbpedia 检索数据，但每次运行代码时都会出错。

Python中的代码是：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from SPARQLWrapper import SPARQLWrapper, JSON

sparql = SPARQLWrapper("http://dbpedia.org/sparql")
sparql.setQuery("""
    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
    SELECT ?subject
    WHERE { <http://dbpedia.org/resource/Musée_du_Louvre> dcterms:subject ?subject }
""")

# JSON example
print '\n\n*** JSON Example'
sparql.setReturnFormat(JSON)
results = sparql.query().convert()
for result in results["results"]["bindings"]:
    print result["subject"]["value"] 
```

我相信我必须在“Musée_du_Louvre”中为“é”使用不同的字符，但我不知道是哪个。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:50:34.603

第一个问题是，它**`SPARQLWrapper`**似乎期望它的查询是 unicode 格式的，但是你传递给它的是一个 utf-8 编码的字符串——这就是你得到一个`UnicodeDecoreError`. 相反，您应该通过解码您的 utf-8 字符串来传递一个 unicode 对象

```
unicode_obj = some_utf8_string.decode('utf-8') 
```

或使用 unicode 文字：

```
unicode_obj = u'Hello World' 
```

向它传递一个 unicode 对象可以避免这种情况`UnicodeDecodeError`，但不会产生任何结果。所以看起来**dbpedia** API 期望包含非 ASCII 字符的 URL 是百分比编码的。因此，您需要事先使用以下代码对 URL 进行编码`urllib.quote_plus`：

```
from urllib import quote_plus
encoded_url = quote_plus(url, safe='/:') 
```

通过这两项更改，您的代码可能如下所示：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from SPARQLWrapper import SPARQLWrapper, JSON
from urllib import quote_plus

url = 'http://dbpedia.org/resource/Musée_du_Louvre'
encoded_url = quote_plus(url, safe='/:')

sparql = SPARQLWrapper("http://dbpedia.org/sparql")

query = u"""
    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
    SELECT ?subject
    WHERE { <%s> dcterms:subject ?subject }
""" % encoded_url

sparql.setQuery(query)

# JSON example
print '\n\n*** JSON Example'
sparql.setReturnFormat(JSON)
results = sparql.query().convert()
for result in results["results"]["bindings"]:
    print result["subject"]["value"] 
```

# php - 在 str_replace() 中搜索数组时存储匹配的特定值

> ID：12237719
> 
> 赞同：1
> 
> 时间：2012-09-02T16:29:08.567
> 
> 标签：php, regex, str-replace

该函数`str_replace()`接受一个数组作为其第一个参数，但我看不到任何方法来存储字符串以用于替换找到的文本的第二个参数。例如，如果我想用括号或引号围绕字符串格式化。

这是一个例子。假设我想在 $array 中的单词被吐出时在它们周围插入引号，或者将单词的大小写从全部小写更改为 $array 中设置的大小写：

```
$array = array('Over','Dog','Quick');

$string = "The quick brown fox jumps over the lazy dog";

$string = explode(" ",$string);

foreach ($string as $word) {

    echo str_replace($array, "???", $word);

    echo " ";

} 
```

那将返回`The ??? brown fox jumps ??? the lazy ???`。我意识到这可能是正则表达式的工作，但我无法弄清楚如何让它处理格式化和替换。我觉得我在这里遗漏了一些东西，但我在谷歌上什至没有触及这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:34:25.473

```
$array = array('Over', 'Dog', 'Quick');

$string = "The quick brown fox jumps over the lazy dog";

echo str_ireplace($array, $array, $string); 
```

在此处查看实际操作：http: [//viper-7.com/q7n7uw](http://viper-7.com/q7n7uw)

* * *

因此，例如，如果您想在字符串周围加上引号，请使用以下命令：

```
$array = array('Over', 'Dog', 'Quick');
$replacements = array();
foreach($array as $item) $replacements[] = '"' . $item . '"';

$string = "The quick brown fox jumps over the lazy dog";

echo str_ireplace($array, $replacements, $string); 
```

见这里：http: [//viper-7.com/2afgL5](http://viper-7.com/2afgL5)

* * *

但实际上，这是一份工作`preg_replace`：

```
$search = array('Over','Dog','Quick');

foreach($search as &$item) $item = '~\b(' . $item . ')\b~i';

$string = "The quick brown fox jumps over the lazy dog";

echo preg_replace($search, '"$1"', $string); 
```

见这里：http: [//viper-7.com/nAlqzX](http://viper-7.com/nAlqzX)

# android - 当我点击时，列表视图图像会自动更改位置？

> ID：12237722
> 
> 赞同：0
> 
> 时间：2012-09-02T16:29:12.680
> 
> 标签：android, listview, android-arrayadapter

我正在开发一个应用程序，其中有一个列表视图，该列表视图通过 ArrayAdapter 填充。除了现在变得非常烦人的问题之外，所有的事情都运行良好。

我的列表视图有一个自定义布局，其中包含图像，然后是文本。问题在于图像部分。当我在填充列表后点击列表时，列表中的图像会交换那里的位置。例如，与第一个单元格关联的图像转到第三个单元格，反之亦然，依此类推。它只发生在图像上。文本保持在其位置。我不知道问题是什么。请帮我解决这个严重的问题。

以下是我的适配器代码：

```
 public class PListAdapter extends ArrayAdapter<Product> {

Context context;
ArrayList<Product> products;
LayoutInflater vi;
ProgressBar mSpinner;

private ImageView imageView;

public void setItems(ArrayList<Product> items) {
    this.products = items;
}

public ProductListAdapter(Context context, ArrayList<Product> productList) {
    super(context, 0, productList);
    // TODO Auto-generated constructor stub

    this.context = context;
    this.products = productList;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View v = convertView;
    final Product p = products.get(position);

    if (p != null) {

        if (v == null) {

            vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.sample_singlerow, null);
        }

        imageView = (ImageView) v.findViewById(R.id.product_image);
        TextView title = (TextView) v.findViewById(R.id.product_title);
        TextView summary = (TextView) v.findViewById(R.id.product_summary);
        TextView price = (TextView) v.findViewById(R.id.product_price);
        TextView type = (TextView) v.findViewById(R.id.product_type);
        ImageView pImage = (ImageView) v.findViewById(R.id.persons);

        if (imageView != null) {
            if (p.getImage() == null) {
                if (p.getImageURL() != null) {

                    new AsyncImageLoader(imageView, p.getImageURL());

                }
            }
        }

        if (title != null) {
            Log.i("Title: ", p.getName());
            title.setText(p.getName());
        }

        if (summary != null) {

            Log.i("Summary: ", p.getDescription());
            summary.setText(p.getDescription().substring(0, 110) + "...");
        }

        if (price != null) {
            Log.i("Price: ", p.getPrice());
            price.setText(p.getPrice());
        }

        if (type != null) {
            Log.i("Type: ", p.getType());
            type.setText(p.getType() + " Person");
        }

        if (pImage != null) {

            try {

                if (p.getType().equals("1")) {

                    pImage.setImageResource(R.drawable.one_person);

                } else if (p.getType().equals("2")) {

                    pImage.setImageResource(R.drawable.two_person);

                }

            } catch (NotFoundException e) {
                // TODO Auto-generated catch block
                pImage.setImageDrawable(null);
                e.printStackTrace();
            }
        }

    }

    return v;
} 
```

*编辑：*

公共类 AsyncImageLoader { private final WeakReference imageViewReference;

```
public  AsyncImageLoader(ImageView imageView,String imageUrl) {
    imageViewReference = new WeakReference<ImageView>(imageView);
    String[] url={imageUrl};
    new BitmapDownloaderTask().execute(url);
}
// static int counter = 0;
// int imageNum = 0;

/**
 * This Interface in used by {@link AsyncImageLoader} to return a response
 * by after loading image
 */

public interface ImageCallback {
    public Drawable temp = null;

    /**
     * Load the Image in imageDrable, Image is loaded form imageUrl
     * 
     * @param imageDrawable
     *            Image in drawable format
     * @param imageUrl
     *            URL of image to be load
     */
    public void imageLoaded(Drawable imageDrawable, String imageUrl);
}

private String LOG_TAG;

class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
    private String url;

    @Override
    // Actual download method, run in the task thread
    protected Bitmap doInBackground(String... params) {
         // params comes from the execute() call: params[0] is the url.
         return downloadBitmap(params[0]);
    }

    @Override
    // Once the image is downloaded, associates it to the imageView
    protected void onPostExecute(Bitmap bitmap) {
        if (isCancelled()) {
            bitmap = null;
        }

        if (imageViewReference != null) {
            ImageView imageView = imageViewReference.get();
            if (imageView != null && !(bitmap==null)) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

Bitmap downloadBitmap(String url) {
    final int IO_BUFFER_SIZE = 4 * 1024;

    // AndroidHttpClient is not allowed to be used from the main thread
    final HttpClient client = AndroidHttpClient.newInstance("Android");
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {
            Log.w("ImageDownloader", "Error " + statusCode +
                    " while retrieving bitmap from " + url);
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent();
                // return BitmapFactory.decodeStream(inputStream);
                // Bug on slow connections, fixed in future release.
                return BitmapFactory.decodeStream(new FlushedInputStream(inputStream));
            } finally {
                if (inputStream != null) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    } catch (IOException e) {
        getRequest.abort();
        Log.w(LOG_TAG, "I/O error while retrieving bitmap from " + url, e);
    } catch (IllegalStateException e) {
        getRequest.abort();
        Log.w(LOG_TAG, "Incorrect URL: " + url);
    } catch (Exception e) {
        getRequest.abort();
        Log.w(LOG_TAG, "Error while retrieving bitmap from " + url, e);
    } finally {
        if ((client instanceof AndroidHttpClient)) {
            ((AndroidHttpClient) client).close();
        }
    }
    return null;
}
/*
 * An InputStream that skips the exact number of bytes provided, unless it reaches EOF.
 */
static class FlushedInputStream extends FilterInputStream {
    public FlushedInputStream(InputStream inputStream) {
        super(inputStream);
    }

    @Override
    public long skip(long n) throws IOException {
        long totalBytesSkipped = 0L;
        while (totalBytesSkipped < n) {
            long bytesSkipped = in.skip(n - totalBytesSkipped);
            if (bytesSkipped == 0L) {
                int b = read();
                if (b < 0) {
                    break;  // we reached EOF
                } else {
                    bytesSkipped = 1; // we read one byte
                }
            }
            totalBytesSkipped += bytesSkipped;
        }
        return totalBytesSkipped;
    }
} 
```

}

请让我知道是什么问题。焦急等待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:55:58.120

正如我所看到的，您在适配器中的视图重用和异步加载方面遇到了一些麻烦。为了优化性能和内存，而不是反复膨胀视图，Android 尝试在 ListView 的回收器中“缓存”列表项 - 这意味着同一视图（列表项）将被多次使用，每次用于不同的数据项。

如果是这样 - 让我们检查一下如果滚动现有列表会发生什么：某些视图将被填充，填充数据并开始为 ImageView 下载图像。在单独的线程中。

现在，如果在之前的 Image 成功加载之前，这个 View 将被重用于另一个数据项怎么办？目前，将为该图像启动一个新的 AsyncTask。这里出现了一个竞速条件，没有人知道 AsyncTask 将以什么顺序返回结果。

因此，我建议您将 AsyncTask 与 View 一起存储（例如，在 Tag 中），或者制作一些 hashmap。主要目的 - 确定位图加载何时完成 - 此图像是否用于另一个位图请求，如果是 - 跳过图像设置，因为它已过时。

这种方法将防止 imageViews 为另一个项目显示错误的图像。

希望对你有帮助，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T09:36:16.737

如果图像 url 为空，您需要添加默认图像，只需添加 else 检查并添加任何占位符

# java - 外部资源与@Before/@After

> ID：12237723
> 
> 赞同：1
> 
> 时间：2012-09-02T16:29:23.273
> 
> 标签：java, junit

我正在尝试 JUnit 规则：ExternalResource 并且看不到 @Before 和 @After 的区别。

```
@Rule
public ExternalResource externalResource = new ExternalResource() {

    @Override
    protected void before() throws Throwable {
        super.before();
        LOG.info("before");
        serverSocket = new ServerSocket(2004, 10);
        socket = new Socket();
        socket.connect(serverSocket.getLocalSocketAddress());
    }

    @Override
    protected void after() {
        super.after();
        LOG.info("after");
        try {
            socket.close();
            serverSocket.close();
        } catch (IOException e) {
            LOG.log(Level.SEVERE , "Error closing socket", e);
        }
    }
}; 
```

这段代码的顺序是：

```
1\. before (ExternalResource)
2\. before (@Before)
3\. after  (@After)
4\. after  (ExternalResource) 
```

使用 ExternalResource 有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:33:48.783

`ExternalResource`与共享 before/after 方法相比，您可以更轻松地在多个测试类中重用实现。

# assembly - 在减法中携带标志

> ID：12237725
> 
> 赞同：5
> 
> 时间：2012-09-02T16:29:32.173
> 
> 标签：assembly, x86, status, masm, carryflag

我正在使用 MASM32。

使用此代码：

```
mov eax,5
sub eax,10 
```

CF 状态标志将被设置。但是使用我的铅笔和纸，我实际上看到 MSB 没有任何进位。是的，我知道从少数大数集 CF 中减法。但我想知道为什么？

因为使用此代码：

```
mov eax,5
mov ebx,10
not ebx
add ebx,1
add eax,ebx 
```

永远不会设置 CF 标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T17:06:38.923

```
5 - 10 = 5 + (-10) = 0x05 + (0xF5 + 1) = 0x05 + 0xF6 = 0xFB

  00000101 -- 0x05
  11110101 -- 0xF5
+ 00000001 -- 0x01
==========
  11111011 -- 0xFB 
```

And this continues for 16 or 32 or 64 bits 0+1+0 = 1, carry 0

You are right in the sense that it doesnt carry out. A subtract is an add with the second operand inverted and the carry in inverted. Some processor families invert the carry out some dont. Sounds like you are looking at something that inverts the carry out on a subtract.

So if 5 - 10 gives carry out (borrow) then try 10 - 5 on the same processor, you should not see the carry bit set (no borrow).

Your second example is an add operation, the carry out is not inverted on any processor that I know of, further supporting the carry bit being positive logic indicating a borrow.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:09:30.947

在第一种情况下，设置进位标志是因为您从较小的数字中减去了较大的数字。在第二种情况下，假设 eax 是 8 位寄存器然后

```
 eax=00000101=05
    ebx=00010000=10
not ebx=11101111
         +     1
---------------------
        11110000
         +  0101
 ---------------------
        11110101 
```

没有发生溢出，即没有设置进位标志。

# ios - AppStore 下载了错误的 iOS 应用版本

> ID：12237728
> 
> 赞同：3
> 
> 时间：2012-09-02T16:29:43.260
> 
> 标签：ios, app-store, version

我开发了一个 iOS 应用程序，昨晚发现了一些我以前从未见过的东西。我的手机上有一个应用程序的临时开发版本，并想向某人展示发布在 AppStore 上的版本。我删除了我的本地版本，去了 AppStore，它正确显示了 1.1.0，但是当我下载它时，安装了旧版本 1.0.9.9。我马上就知道了，因为缺少主要的 UI 改造。

我知道在发布应用程序后经常会有延迟（我总是使用 Developer Hold），但这是在我发布新版本后将近 2 周，突然旧版本被下载。有没有人看到这种行为，如果有，是否有任何真正的追索权？

# php - PHP memcache 客户端 - 它是否依赖于要路由的服务器 IP 地址？

> ID：12237736
> 
> 赞同：0
> 
> 时间：2012-09-02T16:30:36.033
> 
> 标签：php, amazon-web-services, memcached

我正在从单个 memcache 服务器迁移到 AWS 上的多个服务器。我需要从内部网络和外部访问 memcache 服务器。所以我正在使用

```
// get data from memcache for counter
$memcache = new Memcache;
$memcache->addServer('server1_internal_IP', 11211);
$memcache->addServer('server2_internal_IP', 11211); 
```

从另一个区域上的应用服务器，我正在使用以下方式访问相同的服务器：

```
$memcache->addServer('server1_external_IP', 11211);
$memcache->addServer('server2_external_IP', 11211); 
```

当本地服务器写入 memcache 而远程读取时，看起来路由没有转到相同的服务器

可能是因为我使用不同的 IP 地址（亚马逊内部和外部）来访问服务器吗？那么路由机制在进行路由时会考虑实际的IP地址吗？我认为它应该是按键上的简单 CRC32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:11:53.423

发现当 memcache.hash_strategy=consistent 时，IP 地址用于哈希算法，因此您无法路由到具有不同地址的相同服务器（每个服务器的 AWS 内部和外部 IP 地址就是这种情况）。

解决方案是切换到标准散列。在 php.ini 中添加：

[memcached] memcache.hash_strategy=标准

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:27:45.760

这并不理想。如果可能的话，您应该根据您存储的内容将数据隔离到单独的内存缓存服务器中。

如果您使用内置的散列算法将数据分布在服务器之间，则无法保证负载会均匀分布，并且添加/删除服务器将重置您在所有服务器上的整个缓存，这将导致您的站点出现重大问题（每个人都被记录如果您使用它来存储会话，则 out/ 会丢失他们的购物车内容）

# java - 如何从 LoaderCallbacks 的 onLoadFinished 方法中显示 DialogFragment

> ID：12237739
> 
> 赞同：2
> 
> 时间：2012-09-02T16:31:02.780
> 
> 标签：java, android

尝试从实现 LoaderCallbacks 接口的 Fragment 的 onLoadFinished 方法中显示 DialogFragment 时收到异常。基本上我正在使用 LoaderCallbacks 从休息服务中获取一些数据，然后在 onLoadFinished 上我试图显示一个包含 ListVeiw 的自定义 DialogFragment 以允许用户进行选择。一切都很好，除非我尝试从 onLoadFinished 中启动对话框。我怎样才能做到这一点..这是解决问题的正确方法。

这是我正在尝试做的一个例子：

```
public class EventFragment extends Fragment implements LoaderCallbacks<someresponse> {

    @Override
    public void onLoadFinished(Loader<someresponse> arg0, someresponse data) {
        //an exception is generated when trying to launch a dialog fragment from 
        //within the onLoadFinished
        FragmentManager manager = getFragmentManager();             
        ListViewDialogFragment dialog = ListViewDialogFragment.newInstance(data);   
        dialog.show(manager, "event_list_dialog");  

    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:49:39.997

所以经过一番研究，我确定我的方法是不正确的。您永远不应尝试从 LoaderCallbacks 异步任务的 onLoadFinished 方法中启动新片段。该框架试图阻止您这样做，因为当前运行的片段或活动的状态，实现 LoaderCallbacks 是不确定的，因此不能保证在异步任务完成时存在。

此外，试图将处理对话框状态和数据显示状态分成两个单独的片段，这有点违背 android 框架支持的 MVC 设计模式。也就是说，我的新方法包括动态更改实现 LoaderCallbacks 的片段的视图，以隐藏或显示特定的线性布局，一个用于流程指示器，一个用于显示数据。这种方法让我修改了现有的片段，而不是启动一个效果很好的新片段。

这是一个讨论的链接，最终让我明白了。

[https://groups.google.com/forum/#!topic/android-developers/dXZZjhRjkMk/discussion](https://groups.google.com/forum/#!topic/android-developers/dXZZjhRjkMk/discussion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:20:20.673

您定义的方法非常好，除了一种情况 - 如果您的活动已经从屏幕上消失，加载操作完成时会发生什么？在这种情况下它将如何显示对话框？

所以一般来说，如果你能说出你得到了哪个例外，我将不胜感激。然而，作为一种通用方法，检查持有该片段的活动是否仍在顶部或什至它是否已完成可能很有用。更好的是 - 当活动/片段正在破坏时，您应该考虑取消所有后台操作，在这种情况下，您不会有显示对话框的问题。

祝你好运！

# loops - 带有 Shader Model 2.0 的 HLSL 循环：错误 X3511 无法展开循环

> ID：12237741
> 
> 赞同：11
> 
> 时间：2012-09-02T16:31:28.180
> 
> 标签：loops, for-loop, shader, hlsl

在 Shader Model 2.0 下的 HLSL 着色器中编译以下 for 循环时，出现错误 X3511。

```
for (int x = -5; x <= 5; x++)
{
    for (int y = -5; y <= 5; y++)
    {
            ... 
```

错误内容如下：无法展开循环，循环似乎没有及时终止（5 次迭代），使用 [unroll(n)] 属性强制使用更高的数字。

我知道这个错误消息，但我没有在 for 语句的条件部分使用变量 - 这是一个硬编码的 x <= 5 条件。这里有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T13:43:04.343

试试这个：

```
[unroll(121)] for (int i=0; i<121; i++)
{
    int x = i / (int)11 - 5;
    int y = i % (int)11 - 5;
} 
```

# javascript - 从 URL 获取身份验证令牌

> ID：12237744
> 
> 赞同：0
> 
> 时间：2012-09-02T16:31:32.333
> 
> 标签：javascript, oauth

我正在尝试使用以下字符串获取 Twitter oauth 令牌。如何“运行”字符串然后获取令牌？

**这是请求字符串：**

```
https://api.twitter.com/oauth/request_token?oauth_consumer_key=9TL0JGKTIv7GyOBeg8ynuxg&oauth_nonce=Xty48&oauth_signature=3skps99e6zkn0rcUGadVUEuHFon4%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1346603336 
```

**这是结果：**

```
oauth_token=TBFdNoytaizrfMAWNZ6feqNz3BsozHk5AesIioX8u8Ec&oauth_token_secret=DtQ3jiUIeVdRcBAKwVQJRWpgKtEHi3m1ylk0nlsHCBj0&oauth_callback_confirmed=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:38:19.573

[请参阅此问题](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)的答案。它演示了如何从查询字符串中获取值。

在这里，我将其更改为将名称值集合作为参数：

```
function getParameterByName(name, qs)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(qs);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

用法：

```
var result = "oauth_token=TBF...&oauth_token_secret=DtQ...";
var token = getParameterByName("oauth_token", result); 
```

# django - 部署 bitnami django

> ID：12237746
> 
> 赞同：1
> 
> 时间：2012-09-02T16:32:12.480
> 
> 标签：django, postgresql, amazon-ec2, amazon-ami, bitnami

我是个电脑盲，但我设法在我自己的机器上使用了 Django 框架。我在 Amazon Web Service (AWS) 上拥有一个帐户已经有一段时间了，但它的设置和使用似乎相当复杂，所以我搁置了一段时间。然后我决定试一试，它并不像我最初想象的那么难，加载一个 AMI 并使用 PuTTY 连接到服务器。但由于我已经在使用 BitNami 的 Django-Stack，我决定看看他们的托管服务（基于 AWS 构建）。由于他们似乎提供“一键部署”，我通过他们的界面设置了一个新服务器。但是，“一键部署”的承诺似乎与服务器本身有关。似乎没有通过他们的站点部署 Django 项目的任何界面。已经用过 PuTTY，并将 WinSCP 添加到我的机器，我可以访问服务器并将我的 Django 代码加载到服务器。但后来我迷路了。文档似乎有点薄（看[在这里](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/)）。

关键在于：任何人都可以使这部分过程更容易理解。即，如何使用 Apache/mod_WSGI 在 Linux 服务器上部署 Django 项目？

另一个问题是：我想使用 Postgres。我可以免费在服务器上安装它吗？我应该为此选择 EBM（EMB？），还是没有 EBM 的缺点是什么？

我希望我不会太不值得你的关注，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:17:33.993

`how to deploy a Django project on a Linux server with Apache/mod_WSGI` Bitnami AMI 已经配置了所有这些。安装后尝试转到`EC2 public url`默认`8000`端口，您将在那里看到演示 django 项目设置。通过 putty 登录机器后，您可以添加自己的项目，检查`/home/bitnami/`演示项目的目录。复制您的项目，配置您的数据库 `The other question is: I want to use Postgres. Am I free to install this on the server` `Postgres`，并`Mysql`以与您在本地计算机上相同的方式进行安装。在您的项目中这样做是`./manage.py runserver 0.0.0.0:9000`因为该`8000`端口已经在运行另一个应用程序。

# linux - Linux x11 XGrabKeyboard() 导致键盘被冻结

> ID：12237755
> 
> 赞同：2
> 
> 时间：2012-09-02T16:34:05.580
> 
> 标签：linux, input, keyboard, hook, x11

我正在编写一个需要听用户键盘敲击的程序。

我使用函数 XGrabKeyboard() 这是我的代码：

```
XGrabKeyboard(pDisplay, DefaultRootWindow(pDisplay), True, GrabModeAsync, GrabModeAsync, CurrentTime);
XEvent event;
while (true)
{
  XNextEvent(pDisplay, &event);
  switch (event.type)
  {
  ...
  }
} 
```

但它会导致键盘和光标被冻结。

我查看了手册页，它只说：“第三个参数指定一个布尔值，指示是否要像往常一样报告键盘事件。”

我尝试了 true 或 false 或第三个参数，GrabModeAsync 和 GrabModeSync 都用于第四个和第五个参数，但它不起作用。

调用 XGrabKeyboard() 后，键盘被冻结，鼠标点击无响应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:05:21.830

XGrabKeyboard() （如果成功 - 请务必检查返回值），将所有关键事件重定向到您的客户端。

因此，如果您在 while(true) 中的“...”没有正确处理这些键事件，或者从未取消抓取 (XUngrabKeyboard) 或释放同步事件 (XAllowEvents，仅适用于 GrabModeSync)，那么键盘将出现锁定向上。

布尔参数是 owner_events，它指示是始终将关键事件报告给提供给 XGrabKeyboard 的窗口，还是将它们报告给他们通常在没有抓取的情况下会去的窗口。通常你想要 False（报告到抓取窗口）。

对于 XGrabKeyboard 的典型用途（我不知道您的用例），您需要的参数是：

*   抓取窗口 = 应用中与抓取原因相关的某个窗口
*   owner_events=False 将所有事件发送到该窗口
*   pointer_mode=Async 不拧指针
*   keyboard_mode=Async 仅重定向所有键事件并避免需要 AllowEvents
*   时间=触发抓取的事件的时间戳，理想情况下，或者是通过更改属性并从 PropertyNotify 抓取时间戳而生成的时间戳

但是，这取决于。要给出任何明确的答案，您可能需要发布一个可编译的程序，我认为该错误可能在代码的“...”部分。尝试将您的应用程序缩小到可能由其他人运行的单文件测试用例。或者更多地解释你为什么要抓住，以及你想在大局中完成什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T18:57:59.920

我对 XGrabKeyboard 功能无能为力——我以前没有使用过它，也不知道它是如何工作的——但我可以建议另一种获取键盘事件的方法。

使用 XCreateWindow 创建窗口时，最后一个参数是 XSetWindowAttributes 对象。此对象有一个成员 event_mask，您可以使用它来选择您的窗口将接收哪些事件。

我这样设置我的：

```
XSetWindowAttributes setWindAttrs
setWindAttrs.event_mask = ExposureMask           
                        | KeyPressMask  
                        | KeyReleaseMask    
                        | ButtonPressMask 
                        | ButtonReleaseMask; 
```

这意味着如果您在创建窗口时将此对象传递给 XCreateWindow，您将收到键盘按键和鼠标按钮单击的事件。

您还可以使用另一个注释`XPending(pDisplay)`来检查是否仍有事件等待处理 - 因此它可以`true`在您的`while(true)`行中替换。

编辑：您的冻结问题也可能是您在 while 循环中的任何地方都没有返回 false ？它可能会陷入无限循环，除非您刚刚为帖子删除了该位。尝试按照我上面的建议将 true 替换为 xpending ，它可能会解决问题，或者在处理事件后仅返回 false ，但这只会处理每帧一个事件，而不是像 XPending 那样处理所有当前待处理的事件，我假设这就是你想要做的。

# java - Java jinja/django-like html 模板

> ID：12237759
> 
> 赞同：4
> 
> 时间：2012-09-02T16:34:18.473
> 
> 标签：java, google-app-engine, template-engine, templating

我一直在寻找一个类似于 Jinja / Django 的模板引擎的 Java 模板框架。我发现似乎很流行的是 StringTemplate 和 FreeMarker，但似乎都不支持“块”（ jinja/django ）。

我发现的是 Jangod，它工作得很好——但是，根本没有支持，它没有被任何人维护，并且未完成（即没有文档）。

我也使用过 Playframework 的模板，遗憾的是它与我现在正在开发应用程序的平台不兼容；谷歌应用引擎。

( TLDR; 寻找一个还活着的 Java 模板框架，有类似 jinja 的块系统，并且可以在 Appengine 的严格规则下运行)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:49:12.867

看看 Rythm 模板引擎：[http ://rythmengine.com](http://rythmengine.com)

jinja 中的“block”功能在 Rythm 中称为“section”。因此，假设您的布局模板（父模板）称为`main.html`：

```
<h1>@get("title", "default main page")</h1>
<div id="left-panel">@render("leftPanel")<div>
<div id="right-panel">@render("rightPanel")</div>
<div id="main-content">@render()</div>
<div id="footer">
@render("footer"){
   @**
    * the content here is supplied if the child template failed 
    * to provide it's own footer implementation
    *@
   <div class="footer">copyright 2012 ...</div>
}
</div> 
```

这是您的目标模板：

```
@extends(main)
@set(title: "My Cool Page")
@section("leftPanel") {
<ul class="menu">
...
</ul>
}

@section("rightPanel") {
<div class="news">
...
</div>
}

@*** note no "footer" section supplied so the default content will be used **@

@*** the rest is for the main content **@
... 
```

此功能的真实演示可以在[http://rythmengine.com/demo/testdefaultlayoutcontent找到](http://rythmengine.com/demo/testdefaultlayoutcontent)

可以在[http://www.playframework.org/modules/rythm](http://www.playframework.org/modules/rythm)找到一个全面的文档。虽然它是针对 Play!Framework 的，但大部分内容也适用于没有 Play!Framework 的纯节奏引擎。

您无需担心 GAE，因为演示本身正在 GAE 上运行。

# ruby-on-rails - 在任何源中都找不到 rake-0.9.2.2 (Bundler::GemNotFound)

> ID：12237762
> 
> 赞同：2
> 
> 时间：2012-09-02T16:34:31.110
> 
> 标签：ruby-on-rails, apache2

在尝试更新 Rails 应用程序时，它需要安装新的 gem 在服务器（Apache2）上运行 Rails 时出现以下错误

```
Could not find rake-0.9.2.2 in any of the sources (Bundler::GemNotFound)

/home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb    90  in `block in materialize'
1   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb    83  in `map!'
2   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/spec_set.rb    83  in `materialize'
3   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/definition.rb  127 in `specs'
4   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/definition.rb  172 in `specs_for'
5   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/definition.rb  161 in `requested_specs'
6   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/environment.rb 23  in `requested_specs'
7   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler/runtime.rb 11  in `setup'
8   /home/server/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.4/lib/bundler.rb 107 in `setup' 
```

当我这样做时`bundle install`，或者`gem list --local`它列出了宝石：

```
actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
bcrypt-ruby (3.0.1)
builder (3.0.0)
bundler (1.1.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
devise (2.1.2)
dynamic_form (1.1.4)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.3)
jquery-rails (2.0.2)
json (1.7.3)
mail (2.4.4)
mime-types (1.18)
multi_json (1.3.6)
orm_adapter (0.3.0)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12)
sass (3.1.19)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.4)
warden (1.2.1) 
```

但是当我执行 ruby​​ -v 时，它显示 ruby​​ 1.8.7，并且错误日志显示 .rvm/gems/ruby-1.9.2-p320... 我如何告诉它使用已安装的 1.8.7，因为这一直工作（对升级不感兴趣）

我找到了这篇文章-[[为什么我收到此乘客错误在任何来源中都找不到 rake-0.9.2.2？](https://stackoverflow.com/questions/8173995/why-am-i-getting-this-passenger-error-could-not-find-rake-0-9-2-2-in-any-of-the][1])

[1]：[为什么我会收到此乘客错误在任何来源中都找不到 rake-0.9.2.2？](https://stackoverflow.com/questions/8173995/why-am-i-getting-this-passenger-error-could-not-find-rake-0-9-2-2-in-any-of-the)- 试了没有成功！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T18:47:25.003

为了简单起见，创建一个 gemset

> rvm gemset first_app

*   在项目文件夹中创建一个 .rvmrc 文件并输入 rvm use 1.8.7@first_app

当您进入项目时，通过输入进行检查，

红宝石-v

导轨-v

> rvm 使用 first_app

现在做 bundle install 然后 rails server，你不应该在这之后得到问题，如果有问题回复

# python - django pythonforfacebook 处理移动应用程序访问？

> ID：12237765
> 
> 赞同：5
> 
> 时间：2012-09-02T16:34:32.947
> 
> 标签：python, django, facebook, pythonanywhere

受到 Hacker News (http://blog.pythonanywhere.com/35/) 上在 PythonAnywhere 上在 20 分钟内编写一个 facebook 应用程序的启发，我正在编写一个 facebook 应用程序。通过网络浏览器访问 facebook 应用程序一切正常。真的只花了我20分钟...

但是，当我通过 facebook iphone 应用程序访问时，它抱怨没有移动版本的 URL。然后我注意到 Facebook 应用程序设置页面中的“移动网络”URL。我更新了 URL，现在它至少尝试访问我的网站。但访问不同，它返回“400 Bad Request”和“missing signed_request”

我从其他几个问题中收集到这些类型的 Facebook 应用程序之间存在差异。但是，由于 pythonforfacebook 为画布应用程序在幕后处理所有会话工作，我希望它可以通过移动应用程序来完成。

所以，我想知道——pythonforfacebook 是否也可以处理移动应用程序？需要进行什么样的重新配置来处理这两种类型的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:14:43.083

有一些为此准备好的 django 应用程序。

从人群中脱颖而出的是**socialregistration**（您可以在[https://github.com/flashingpumpkin/django-socialregistration](https://github.com/flashingpumpkin/django-socialregistration)找到它），因为它也支持 openID。

# jquery - jquery文件上传插件模板引擎？

> ID：12237768
> 
> 赞同：3
> 
> 时间：2012-09-02T16:34:38.317
> 
> 标签：jquery, html, jst

我在我们的网站上安装了 jquery 文件上传插件： [https ://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine](https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine)

然而，它使用了一种 java 脚本模板语言，该语言曾一度与 jquery 绑定，但已被停止并从 jquery 中删除。与我一起工作的人希望我删除插件的模板引擎部分并用直接的 javascript 编写它。由于不支持模板语言，他不喜欢在我们的代码中使用它。

我在这里找到了文档讨论在直接 JS 中创建自己的模板引擎的地方，我想这是我需要做的。

[https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine](https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine)

我不确定了解更多有关模板语言的信息是否对我也有帮助，我已经查看了一些关于模板语言的网站。

我现在正在度假，但是当我一周后回来时，我需要开始处理这个问题。

我写了相当多的 javascript 和 jquery 的东西，但我并不总是对所有的习语都非常熟悉，在某些情况下我会复制和粘贴代码示例。

这是您自己的模板引擎的代码示例。我猜它设置了回调..我基本上必须剪切和粘贴它，看看它是否有效。我确实尝试过，但最初它对我不起作用。

```
$('#fileupload').fileupload({
    uploadTemplateId: null,
    downloadTemplateId: null,
    uploadTemplate: function (o) {
        var rows = $();
        $.each(o.files, function (index, file) {
            var row = $('<tr class="template-upload fade">' +
             '<td class="preview"><span class="fade"></span></td>' +
             '<td class="name"></td>' +
             '<td class="size"></td>' +
             (file.error ? '<td class="error" colspan="2"></td>' :
                    '<td><div class="progress">' +
                        '<div class="bar" style="width:0%;"></div></div></td>' +
                        '<td class="start"><button>Start</button></td>'
              ) + '<td class="cancel"><button>Cancel</button></td></tr>');
            row.find('.name').text(file.name);
            row.find('.size').text(o.formatFileSize(file.size));
            if (file.error) {
               row.find('.error').text(
                  locale.fileupload.errors[file.error] || file.error
               );
            }
            rows = rows.add(row);
         });
        return rows;
    },
   downloadTemplate: function (o) {
      var rows = $();
      $.each(o.files, function (index, file) {
        var row = $('<tr class="template-download fade">' +
            (file.error ? '<td></td><td class="name"></td>' +
                '<td class="size"></td><td class="error" colspan="2"></td>' :
                    '<td class="preview"></td>' +
                        '<td class="name"><a></a></td>' +
                        '<td class="size"></td><td colspan="2"></td>'
            ) + '<td class="delete"><button>Delete</button> ' +
                '<input type="checkbox" name="delete" value="1"></td></tr>');
        row.find('.size').text(o.formatFileSize(file.size));
        if (file.error) {
            row.find('.name').text(file.name);
            row.find('.error').text(
                locale.fileupload.errors[file.error] || file.error
            );
        } else {
            row.find('.name a').text(file.name);
            if (file.thumbnail_url) {
                row.find('.preview').append('<a><img></a>')
                    .find('img').prop('src', file.thumbnail_url);
                row.find('a').prop('rel', 'gallery');
            }
            row.find('a').prop('href', file.url);
            row.find('.delete button')
                .attr('data-type', file.delete_type)
                .attr('data-url', file.delete_url);
        }
        rows = rows.add(row);
    });
    return rows;
} 
```

});

* * *

这是我在文件加载完成后调用的一些工作代码。这是否需要与上述代码结合才能工作？

为什么这段代码是一种形式为 $(function() { $("#fileupload").fileupload(){ ...

另一个代码示例不在匿名函数中。也许这并不重要？

```
$(function () {
  $('#fileupload').fileupload({
    dataType: 'json',
    done: function (e, data) {                          
         var str = "<h4>" + data.result.name + '  -  ' + data.result.text_status + "</h4>";
         console.log(str);
         <% if @ie %>
           data.context.html(str);
           $("#files_tbody").append("<tr>" + str + "</tr>");
         <% else %>
           data.context.html(str);
         <% end %>
    }
  });
}); 
```

我尝试将这两个代码段分开，如图所示，但我的上传不起作用，我尝试将它们组合如下，但这也不起作用..任何关于我缺少什么或在哪里查看的建议将不胜感激..

使用下面的代码块，我在 firebug 中收到文件加载错误：

TypeError: $("#fileupload").fileupload 不是函数 downloadTemplate: function (o) {

并且：

TypeError: document.getElementById(a) is null ...urn{"\n":"\n","\r":"\r","\t":"\t"," ":" " }[a]||"\"+a;if(c)return c==="="?"'+...

```
$('#fileupload').fileupload({
   dataType: 'json',
    done: function (e, data) {                          
         var str = "<h4>" + data.result.name + '  -  ' + data.result.text_status + "</h4>";
         console.log(str);
         <% if @ie %>
           data.context.html(str);
           $("#files_tbody").append("<tr>" + str + "</tr>");
         <% else %>
           data.context.html(str);
         <% end %>
    }
uploadTemplateId: null,
downloadTemplateId: null,
uploadTemplate: function (o) {
    var rows = $();
    $.each(o.files, function (index, file) {
        var row = $('<tr class="template-upload fade">' +
            '<td class="preview"><span class="fade"></span></td>' +
            '<td class="name"></td>' +
            '<td class="size"></td>' +
            (file.error ? '<td class="error" colspan="2"></td>' :
                    '<td><div class="progress">' +
                        '<div class="bar" style="width:0%;"></div></div></td>' +
                        '<td class="start"><button>Start</button></td>'
            ) + '<td class="cancel"><button>Cancel</button></td></tr>');
        row.find('.name').text(file.name);
        row.find('.size').text(o.formatFileSize(file.size));
        if (file.error) {
            row.find('.error').text(
                locale.fileupload.errors[file.error] || file.error
            );
        }
        rows = rows.add(row);
    });
    return rows;
},
downloadTemplate: function (o) {
    var rows = $();
    $.each(o.files, function (index, file) {
        var row = $('<tr class="template-download fade">' +
            (file.error ? '<td></td><td class="name"></td>' +
                '<td class="size"></td><td class="error" colspan="2"></td>' :
                    '<td class="preview"></td>' +
                        '<td class="name"><a></a></td>' +
                        '<td class="size"></td><td colspan="2"></td>'
            ) + '<td class="delete"><button>Delete</button> ' +
                '<input type="checkbox" name="delete" value="1"></td></tr>');
        row.find('.size').text(o.formatFileSize(file.size));
        if (file.error) {
            row.find('.name').text(file.name);
            row.find('.error').text(
                locale.fileupload.errors[file.error] || file.error
            );
        } else {
            row.find('.name a').text(file.name);
            if (file.thumbnail_url) {
                row.find('.preview').append('<a><img></a>')
                    .find('img').prop('src', file.thumbnail_url);
                row.find('a').prop('rel', 'gallery');
            }
            row.find('a').prop('href', file.url);
            row.find('.delete button')
                .attr('data-type', file.delete_type)
                .attr('data-url', file.delete_url);
        }
        rows = rows.add(row);
    });
    return rows;
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:34:28.630

'TypeError: $("#fileupload").fileupload' 消息可能意味着您在'无冲突' 模式下加载 jQuery：http: [//api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/) 这是由 wordpress 引擎完成的. 这里建议了一个解决方案（来自[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)）：

恢复 $ 别名，然后创建并执行一个函数以在函数范围内将 $ 作为 jQuery 别名提供。在函数内部，原始 $ 对象不可用。这适用于大多数不依赖任何其他库的插件。

> ```
> jQuery.noConflict();
> (function($) { 
>   $(function() {
>     // more code using $ as alias to jQuery
>   });
> })(jQuery);
> // other code using $ as an alias to the other library 
> ```

# php - 用 PHP 获得“a”

> ID：12237769
> 
> 赞同：0
> 
> 时间：2012-09-02T16:34:39.110
> 
> 标签：php, javascript, jquery, proxy, cross-domain

不久前有人给我写了这段代码，用于提取网站的某个元素（/数据）：

```
 $(function(){

   var site = 'http://www.telegraaf.nl'; 

   $.get('proxy.php', { site:site }, function(data){

      var href = $(data).find('h2').first().children(':first-child').prop('href');
      var url = href.split('/');
      href = href.replace(url[2], 'telegraaf.nl');

      $('.myDiv').html('<a href="' + href + '" target="_blank">' + href + '</a>');

   }, 'html');

}); 
```

它运作良好，但不适用于这个荷兰新闻网站：[http ://www.telegraaf.nl](http://www.telegraaf.nl)

有人可以向我解释为什么会这样，这个网站有什么特别之处吗？我必须改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:45:25.993

这可能是因为他们也在 telegraaf.nl 上使用 jQuery。

看看这里的答案：[jQuery dialog over content from another site](https://stackoverflow.com/questions/12109596/jquery-dialog-over-content-from-another-site) where someone遇到类似问题。Guy mograbi 的回答非常详细，解释了很多。

# css - 菜单在 IE8 中不可见

> ID：12237770
> 
> 赞同：3
> 
> 时间：2012-09-02T16:34:40.697
> 
> 标签：css, html, menu, internet-explorer-8

我对这个网站有疑问：http: [//paulverhaeghe.psychoanalysis.be](http://paulverhaeghe.psychoanalysis.be) 在每个浏览器中，菜单都按预期显示，但在 WindowsXP 上的 ie8 中菜单不可见。我已经更改了 z-index 但没有区别。

我已经看了一千遍，但找不到任何东西。也许你有更清晰的愿景。

欢迎任何帮助！

提前致谢。

问候，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:09:39.190

好的，我解决了。真是愚蠢。我的一个 div 被放置在另一个样式表中（skin.css 用于 javascript 轮播）（dreamweaver 在设计模式中工作时有时会使用另一个样式表）。可能 ie8 没有选择这行代码：“display: block; position: absolute;”。“干净编码”重要性的另一个例子:)。道格拉斯，谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:24:21.690

我想在几个不同的浏览器中查看后我可能会有一个想法。

我在您的 CSS 中注意到您使用了“不透明度”。这不是跨浏览器解决方案。

IE 兼容性说明

如果您希望 opacity 在所有 IE 版本中都有效，则顺序应为：

```
.opaque {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; // first!
    filter: alpha(opacity=50);                  // second!
} 
```

来自：[http ://www.quirksmode.org/css/opacity.html](http://www.quirksmode.org/css/opacity.html)

还可以尝试其他一些事情：

```
.opaque1 {  // for all other browsers
    opacity: .5;
}

.opaque2 {  // for IE5-7
    filter: alpha(opacity=50);
}

.opaque3 {  // for IE8
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
} 
```

# email - 使用有没有意义 tag in HTML e-mail?

When sending an HTML e-mail, is there any sense in using the `<title></code> tag? In the <a href="http://php.net/manual/en/function.mail.php">PHP Manu</h1> <blockquote> <p>ID：12237776</p> <p>赞同：34</p> <p>时间：2012-09-02T16:35:32.447</p> <p>标签：email, html-email</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：15</p> <p>时间：2013-01-18T05:27:52.800</p> </blockquote> <p>当我正在编写一个使用该<code>sendmail()</code>函数的 PHP 邮件列表管理器脚本时，我自己一直在研究这个问题。</p> <p>该脚本允许管理员创建和发送多格式电子邮件（文本和 html 版本）。</p> <p>经过大量测试后，我发现一些电子邮件服务器的标题标签 ( <code><title></title></code>) 似乎存在问题。</p> <p>我创建了一封测试电子邮件并将其发送到我的 5 个电子邮件地址，我的<code>@blueyonder.co.uk</code>电子邮件未能到达，但其他 4 个没有问题。</p> <p>经过一个消除过程，结果发现<code>@blueyonder.co.uk</code>邮件服务器不喜欢电子邮件 html 部分中的标题标签，当我删除该标签时，电子邮件没有收到任何问题。</p> <p>很奇怪！</p> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：8</p> <p>时间：2012-09-02T17:12:25.780</p> </blockquote> <p>我看到的唯一用途是某些客户端（例如 Outlook）允许您在浏览器中查看电子邮件以更好地呈现。设置 html 标题标签将是一个加分项。</p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：2</p> <p>时间：2020-07-17T18:36:07.727</p> </blockquote> <p><em>（老问题，我知道；））</em></p> <p>我的经验是，有些邮件客户端会<code><title></code>在他们的电子邮件预览中显示标签，而有些则不会。有些客户端预览会是“主题 + <code><title></code>+ 预标题”，有些只会是“主题 + 预标题”，这样会产生不一致的体验。</p> <p>因此，我发现最好只使用预标题。</p> <hr/> <p>为了完整起见，“Preheader”是正文中的隐藏文本，仅在预览中使用，例如，...</p> <pre class="lang-html prettyprint-override"><code><div style="display: none; max-height: 0px; overflow: hidden;"> Insert hidden preheader text here </div> </code></pre> </body> </html></title>`

# objective-c - plist 更新后在 UITableView 中重新加载数据？

> ID：12237780
> 
> 赞同：0
> 
> 时间：2012-09-02T16:35:43.463
> 
> 标签：objective-c, uitableview, plist, reload, property-list

> **可能重复：**
> [UITableView 重新加载数据](https://stackoverflow.com/questions/5094972/uitableview-reload-data)

我的应用程序中有一个 UITableView，其数据存储在属性列表（plist）中。可以从 Internet 更新/重新下载 plist 并替换 plist。如何在无需重新加载视图的情况下重新加载表视图数据？我希望在调用方法时更新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:41:41.207

根据您的描述，我不明白为什么您不能简单地调用[UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)`reloadData`上的方法。

# qt - 如何通过单击菜单项打开“外部链接”？

> ID：12237782
> 
> 赞同：4
> 
> 时间：2012-09-02T16:35:59.533
> 
> 标签：qt, menu, external-links

我需要以类似于`setOpenExternalLink`Qlabel 的方式打开一些链接（在我的默认浏览器中），但通过单击菜单中的一个项目。

有什么简单的方法吗？我考虑使用带有所需链接的 Qlabel 并使用一些动作/事件来假装点击它，同时 Qlabel 被隐藏了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T16:43:43.187

[`openUrl(const QUrl &url)`](http://qt-project.org/doc/qt-4.8/qdesktopservices.html#openUrl)单击特定菜单项（使用标准信号和插槽处理）后，您可以使用[QDesktopServices](http://qt-project.org/doc/qt-4.8/QDesktopServices.html)在默认浏览器中启动该链接。

正如文档所述，它将打开

> ...用户桌面环境的相应 Web 浏览器中的给定 url，如果成功则返回 true；否则返回假。

所以不需要使用 QLabels 之类的花哨的技巧。

# c - C 中针对 100 万条记录的数组的内存优化

> ID：12237784
> 
> 赞同：2
> 
> 时间：2012-09-02T16:36:04.117
> 
> 标签：c, optimization, memory

我正在编写一个程序，它需要我创建一个包含一百万条记录的数组。数组索引是唯一的 id（0-million 代表唯一的产品 id）。首先，所有元素都初始化为零。它们根据销售的产品而增加。

然而，这种方法具有很高的空间复杂度（4 * 百万字节）。后来我看到只有某些产品需要频繁更新。那么有什么方法可以减少内存使用并跟踪所有产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:04:08.923

This sounds more like a situation for table in a database than an in-memory array to me. If your use case allows for it, I'd use a database instead.

Otherwise, if in your use case:

1.  a significant fraction of the products will eventually be used,
2.  RAM is limited,
3.  external storage (disk, serial memory) is available,
4.  average access performance comparable to RAM speeds is required, and
5.  increased worst case access time is acceptable,

then you could try some sort of caching scheme (lru maybe?). This will use more code space, somewhat increase your average access time, and more significantly increase your worst case access time.

If a large fraction of the products will not just be infrequently, but never used, then you should look into @fatrock92's suggestion of a hash table.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:58:06.310

如果您不需要频繁更新，则可以将所有结果存储在一个文件中。每当您更新任何条目时，您都可以创建一个临时文件，其中包含所有其他条目以及更新的条目。之后，您可以使用更改临时文件的名称`rename(temp,new);`。

虽然，一百万条记录的数组不需要那么多内存（只需 4 兆字节）。因此，您的方法是最好和最简单的方法。

最好的方法（算法）是制作一个哈希表来存储所有条目。但是，如果您不是 C 方面的专家，那么制作哈希表对您来说可能是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T17:09:13.423

You can use [link list](http://en.wikipedia.org/wiki/Linked_list), so whenever you need you can add or update elements in your list.
Also you can hold last time access in each node so you'd able to remove the nodes that has not been used lately.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T16:59:55.483

最好为数组使用动态分配内存。使用 malloc 或 realloc 可以为您提供更好的内存分配方式 我想您知道如何使用 malloc 和 realloc

# c++ - 如何在 C++ 中混合原子和非原子操作？

> ID：12237786
> 
> 赞同：8
> 
> 时间：2012-09-02T16:36:07.550
> 
> 标签：c++, multithreading, c++11, atomic, vectorization

std::atomic 类型允许对变量进行原子访问，但我有时会喜欢非原子访问，例如当访问受互斥体保护时。考虑一个允许多线程访问（通过插入）和单线程矢量化访问（通过运算符|=）的位域类：

```
class Bitfield
{
    const size_t size_, word_count_;
    std::atomic<size_t> * words_;
    std::mutex mutex_;

public:

    Bitfield (size_t size) :
        size_(size),
        word_count_((size + 8 * sizeof(size_t) - 1) / (8 * sizeof(size_t)))
    {
        // make sure words are 32-byte aligned
        posix_memalign(&words_, 32, word_count_ * sizeof(size_t));
        for (int i = 0; i < word_count_; ++i) {
            new(words_ + i) std::atomic<size_t>(0);
        }
    }
    ~Bitfield () { free(words_); }

private:
    void insert_one (size_t pos)
    {
        size_t mask = size_t(1) << (pos % (8 * sizeof(size_t)));
        std::atomic<size_t> * word = words_ + pos / (8 * sizeof(size_t));
        word->fetch_or(mask, std::memory_order_relaxed);
    }
public:
    void insert (const std::set<size_t> & items)
    {
        std::lock_guard<std::mutex> lock(mutex_);
        // do some sort of muti-threaded insert, with TBB or #pragma omp
        parallel_foreach(items.begin(), items.end(), insert_one);
    }

    void operator |= (const Bitfield & other)
    {
        assert(other.size_ == size_);
        std::unique_lock<std::mutex> lock1(mutex_, defer_lock);
        std::unique_lock<std::mutex> lock2(other.mutex_, defer_lock);
        std::lock(lock1, lock2); // edited to lock other_.mutex_ as well
        // allow gcc to autovectorize (256 bits at once with AVX)
        static_assert(sizeof(size_t) == sizeof(std::atomic<size_t>), "fail");
        size_t * __restrict__ words = reinterpret_cast<size_t *>(words_);
        const size_t * __restrict__ other_words
            = reinterpret_cast<const size_t *>(other.words_);
        for (size_t i = 0, end = word_count_; i < end; ++i) {
            words[i] |= other_words[i];
        }
    }
}; 
```

注意 operator|= 非常接近我的真实代码中的内容，但 insert(std::set) 只是试图捕捉人们可以

```
acquire lock;
make many atomic accesses in parallel;
release lock; 
```

我的问题是：混合这种原子和非原子访问的最佳方式是什么？下面对 [1,2] 的回答表明强制转换是错误的（我同意）。但该标准肯定允许如此明显的安全访问吗？

更一般地说，是否可以使用读写锁并允许“读者”以原子方式读写，而唯一的“作者”可以非原子方式读写？

## 参考

1.  [如何有效地使用 std::atomic](https://stackoverflow.com/questions/8749038/how-to-use-stdatomic-efficiently)
2.  [将 C++0x 的 atomic<int> 作为非原子访问](https://stackoverflow.com/questions/7234270/accessing-atomicint-of-c0x-as-non-atomic)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T19:59:26.480

C++11 之前的标准 C++ 没有多线程内存模型。我没有看到标准中定义非原子访问的内存模型的任何变化，因此它们得到了与 C++11 之前的环境类似的保证。

实际上，它在理论上甚至比 using 更糟糕`memory_order_relaxed`，因为非原子访问的跨线程行为是完全未定义的，而不是多个可能的执行顺序，其中一个最终必须发生。

因此，要在混合原子和非原子访问的同时实现这样的模式，您仍然必须依赖特定于平台的非标准构造（例如，`_ReadBarrier`）和/或对特定硬件的深入了解。

更好的选择是熟悉`memory_order`枚举，并希望使用给定的代码和编译器实现最佳的汇编输出。最终结果可能是正确的、可移植的，并且不包含不需要的内存栅栏，但如果你像我一样，应该先拆解和分析几个有缺陷的版本；并且仍然无法保证在所有代码路径上使用原子访问不会导致在不同架构或不同编译器上出现一些多余的栅栏。

所以最好的实际答案是简单第一。尽可能简单地设计您的跨线程交互，而不会完全扼杀可扩展性、响应性或任何其他圣牛；几乎没有共享的可变数据结构；并尽可能少地访问它们，始终以原子方式访问它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T19:26:15.843

如果你能做到这一点，你将（可能）有一个线程使用原子访问读取/写入数据对象，而另一个线程读取/写入相同的数据对象而不使用原子访问。这是一场数据竞赛，行为将是不确定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T12:51:45.203

在 C++20 中有[`std::atomic_ref`](https://en.cppreference.com/w/cpp/atomic/atomic_ref)，它允许对非原子数据进行原子操作。

因此，您应该能够声明`words_`为非原子`size_t*`并`std::atomic_ref<size_t>`在需要时用于执行原子操作。但请注意以下要求：

> 虽然存在引用对象的任何 atomic_ref 实例，但必须通过这些 atomic_ref 实例以独占方式访问该对象。atomic_ref 对象引用的对象的子对象不能被任何其他 atomic_ref 对象同时引用。

upd：在这种特殊情况下，您可能还需要`std::shared_mutex`将原子“读者”修改与非原子“作者”修改分开。

# python - 如何自动运行模块中的所有功能？

> ID：12237788
> 
> 赞同：3
> 
> 时间：2012-09-02T16:36:23.103
> 
> 标签：python

我需要在一个模块中运行几个函数，如下所示：

```
mylist = open('filing2.txt').read()
noTables = remove_tables(mylist)
newPassage = clean_text_passage(noTables)
replacement = replace(newPassage)
ncount = count_words(replacement)
riskcount = risk_count(ncount) 
```

有什么方法可以一次运行所有功能吗？我应该把所有的功能都变成一个大功能并运行那个大功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:51:38.957

您应该在执行正在使用的公共序列的模块中创建一个新函数。这将要求您弄清楚需要哪些输入参数以及要返回哪些结果。因此，鉴于您发布的代码，新函数可能看起来像这样——我只是猜测您可能会感兴趣的最终结果。另请注意，我在`with`语句中打开了文件以确保它在阅读后关闭.

```
def do_combination(file_name):
    with open(file_name) as input:
        mylist = input.read()
    noTables = remove_tables(mylist)
    newPassage = clean_text_passage(noTables)
    replacement = replace(newPassage)
    ncount = count_words(replacement)
    riskcount = risk_count(ncount)

    return replacement, riskcount 
```

使用示例：

```
replacement, riskcount = do_combination('filing2.txt') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:40:02.380

如果您只是将这些行存储在 Python (.py) 文件中，您可以简单地执行它们。

或者我在这里错过了什么？

创建一个函数也很容易调用它们：

```
def main():
    mylist = open('filing2.txt').read()
    noTables = remove_tables(mylist)
    newPassage = clean_text_passage(noTables)
    replacement = replace(newPassage)
    ncount = count_words(replacement)
    riskcount = risk_count(ncount)

main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T17:01:05.377

据我了解，使用需要函数组合。Python stdlib 中没有为此的特殊函数，但您可以使用`reduce`函数执行此操作：

```
funcs = [remove_tables, clean_text_passage, replace, count_words, risk_count]
do_all = lambda args: reduce(lambda prev, f: f(prev), funcs, args) 
```

用作

```
with open('filing2.txt') as f:
    riskcount = do_all(f.read()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T19:24:41.710

这是另一种方法。

您可以编写一个类似于Wikipedia 关于*Function composition文章的*[**First-class composition**](http://en.wikipedia.org/wiki/Function_composition_%28computer_science%29#First-class_composition)部分中所示的通用函数。请注意，与文章中不同，函数按照它们在调用中列出的顺序应用。*`compose()`*

 *```
try:
    from functools import reduce  # Python 3 compatibility
except:
    pass

def compose(*funcs, **kwargs):
    """Compose a series of functions (...(f3(f2(f1(*args, **kwargs))))) into
    a single composite function which passes the result of each
    function as the argument to the next, from the first to last
    given.
    """
    return reduce(lambda f, g:
                    lambda *args, **kwargs: f(g(*args, **kwargs)),
                        reversed(funcs)) 
```

这是一个简单的例子来说明它的作用：

```
f = lambda x: 'f({!r})'.format(x)
g = lambda x: 'g({})'.format(x)
h = lambda x: 'h({})'.format(x)

my_composition = compose(f, g, h)
print my_composition('X') 
```

输出：

```
h(g(f('X'))) 
```

以下是它如何应用于模块中的一系列函数：

```
my_composition = compose(remove_tables, clean_text_passage, replace,
                         count_words, risk_count)
with open('filing2.txt') as input:
    riskcount = my_composition(input.read()) 
```*

# github - Github - 分叉一个私人仓库

> ID：12237790
> 
> 赞同：25
> 
> 时间：2012-09-02T16:36:36.923
> 
> 标签：github

我已被添加到一个拥有一些私有存储库的组织中，我需要向他们发送包含一些更改的拉取请求，但我不知道我是否可以。

我在 GitHub 上没有付费帐户，那么我如何分叉该私人仓库来修改和发送拉取请求？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-02T18:47:23.617

正如“[如果我将其他人的私人 Github 仓库分叉到我的帐户中，它会作为公共仓库出现在我的帐户中吗？](https://stackoverflow.com/questions/9629538/if-i-fork-someone-elses-private-github-repo-into-my-account-is-it-going-to-app) ”中所述，您可以分叉一个私有仓库（为此您被添加为私人用户）。生成的 repo 仍然是私有的，你将能够提出 pull-requests。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T20:31:53.600

您可以从私有存储库中的分支发出拉取请求，而无需分叉。

我们开始使用的工作流程是：

```
 1\. clone the private repository
 2\. make a branch
 3\. work on the branch
 4\. push the branch to the private repository
 5\. goto GitHub and create a pull request from the branch on the private repository
 6\. someone else reviews the the pull request and decides to merge it with master on GitHub
 7\. delete the branch unless there was a problem and it was not merged then go back to #3 
```

# java - Android 开发新波士顿 *电子邮件*

> ID：12237793
> 
> 赞同：0
> 
> 时间：2012-09-02T16:36:56.503
> 
> 标签：java, android

我在 youtube 上第 36 期 thenewboston android 应用程序开发教程。他让我们复制并粘贴我们的代码（因为我们现在应该知道如何去做）。我复制并粘贴了它，没有用，所以我尝试将其全部输入。仍然没有工作。我的 R.id 不工作。我之前已经遇到过这个问题，所以我知道要检查我的 XML 文件。那里的一切都很疯狂。在我拥有 android:layout_width="match_parent" 的任何地方都会出现错误。做了一些研究，我想更新为“fill_parent”改变了这一点，现在我在我的 XML 中收到一个错误，说“错误：错误解析 XML：格式不正确（无效令牌）”。我已经尝试过多次开始。清洁项目。重新启动。三重检查我的代码。我不知道我做错了什么。请帮助伙计们！我要疯了！！提前致谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="100"
<ScrollView
    android:layout_weight="30"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <TextView 
        android:text="Email address(es):"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/etEmails"
        />          

    <TextView 
        android:text="Hatfull intro"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/etIntro"
        />

    <TextView 
        android:text="Persons name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/etName"
        />

    <TextView 
        android:text="Stupid things this person does:"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="etThings"
        />

    <TextView 
        android:text="What do you want to do to this person?"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/etAction"
        />

    <TextView 
        android:text="Hatefull Outro"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/etOutro"
        />

    </LinearLayout>

    </ScrollView>

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="40">

    <Button 
        android:text="Send"
        android:id="@+id/bSentEmail"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    </Button>

</LinearLayout>

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="30">

    <AnalogClock 
        android:id="@+id/analogClock1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    </AnalogClock>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:55:36.483

你错过了`>`第 6 行末尾的 a：

改变

```
android:weightSum="100" 
```

到

```
android:weightSum="100"> 
```

# ruby-on-rails - 将当前路径与 capybara 和 rspec 进行比较时出错

> ID：12237795
> 
> 赞同：6
> 
> 时间：2012-09-02T16:37:16.983
> 
> 标签：ruby-on-rails, rspec, capybara

我的评论视图中有一个链接，用于回复这样的评论：

```
<%= link_to t('.reply', :default => t("helpers.links.reply")), new_story_comment_path(comment.story, parent_id: comment)%> 
```

测试的某些部分是这样的：

```
 it "replies to a comment" do
    comment = FactoryGirl.create :comment, story_id: story.id, user_id: user.id
    visit story_path story
    save_and_open_page
    click_link "reply"
    current_path.should eq(new_story_comment_path story.id, parent_id: comment.id)
    ...
  end 
```

我收到此错误：

```
 1) Comments replies to a comment
     Failure/Error: current_path.should eq(new_story_comment_path story.id, parent_id: comment.id)

       expected: "/stories/1/comments/new?parent_id=1"
            got: "/stories/1/comments/new"

       (compared using ==)
     # ./spec/requests/comments_spec.rb:23:in `block (2 levels) in <top (required)>' 
```

我用 save_and_open_page 检查了页面，链接是正确的：

```
file:///stories/1/comments/new?parent_id=1 
```

我还检查了 test.log 文件，我可以看到这一行：

```
Started GET "/stories/1/comments/new?parent_id=1" for 127.0.0.1 at 2012-09-02 21:05:57 
```

为什么我每次都会收到这个错误，而它应该是正确的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T16:42:37.993

current_path 只包含路径，不包含 URL 参数。您可能需要使用 current_url 来获取整个 URL。

# objective-c - NSSplitView 中固定大小的视图

> ID：12237796
> 
> 赞同：0
> 
> 时间：2012-09-02T16:37:32.383
> 
> 标签：objective-c, nssplitview

我有一个 NSSplitView，有三个视图。我不希望第一个视图（从左侧）为 100.0 宽，我希望第二个（从左侧）为 250.0 宽。我还希望这两个视图的宽度保持固定。

所以，in`applicationDidFinishLoading`是设置的位置。

```
[mainSplitView setPosition:100.0 ofDividerAtIndex:0];
[mainSplitView setPosition:350.0 ofDividerAtIndex:1]; 
```

我还设置了委托：

```
[mainSplitView setDelegate:self]; 
```

最后，我实现了协议的以下部分：

```
- (NSRect)splitView:(NSSplitView *)splitView effectiveRect:(NSRect)proposedEffectiveRect forDrawnRect:(NSRect)drawnRect ofDividerAtIndex:(NSInteger)dividerIndex
{
    return NSZeroRect;
} 
```

但是，当我调整整个窗口的大小时，所有视图的大小都会发生变化。我只希望第三个视图改变它的大小。我需要做什么来防止这种行为？

不，我不想使用第三方库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:32:22.990

我知道这听起来很明显，但是您尝试过好的旧支柱和弹簧吗？卸下弹簧并在顶部和左侧添加支柱，它们将留在左上角并且不会调整大小。

# django - Django内部连接

> ID：12237797
> 
> 赞同：1
> 
> 时间：2012-09-02T16:37:38.387
> 
> 标签：django

我在使用 django 查询时遇到了一些困难。基本上我正在尝试在 Tutor_info(user,contact,etc.) 和 UserProfile(user,points,etc.) 之间执行内部连接，该连接由“用户”列连接。结果将按 UserProfile 中的“points”列按降序排列，生成有序的 Tutor_info 对象列表。

我不确定如何使用另一个表（UserProfile 表）上的属性生成 Tutor_info 列表的排序。

我应该做以下事情吗？

```
tutors_list = Tutor_info.objects.all() 
for t in tutors_list:
    UserProfile.objects.filter(user=t.user)
    ??? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:41:38.200

如果您尝试在外部列上过滤/排序，Django 会隐式执行内部连接。所以这将起作用：

```
tutors_list = Tutor_info.objects.all().order_by('-user__points') 
```

或者，如果您通过`auth.User`模型加入（感谢 Daniel Roseman）：

```
tutors_list = Tutor_info.objects.all().order_by('-user__userprofile__points') 
```

# windows - 托盘中的窗口名称

> ID：12237799
> 
> 赞同：0
> 
> 时间：2012-09-02T16:37:45.363
> 
> 标签：windows, tray

我有一个相当不寻常的问题，即如何从图标托盘中调用此窗口？

![在此处输入图像描述](../Images/32bda0b3aca2ffb6150131f500b1e73f.png)

我想在我的申请中填写，但我找不到他的名字。我会询问一些信息，或者名字，其余的我应该处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:06:52.630

The Windows UX Guidelines don't say anything about it. From my perspective it's just a normal dialog, albeit one that has rather immediate actions (as opposed to first clicking on an OK button of sorts) and resides in a fairly small size in a specific location. It is meant to be opened, interacted with quickly and then dismissed, never being the center of your attention. If your idea fits those criteria as well, then go ahead. It's easy to recreate with standard means.

# c# - 3D数组切片中的最小值和最大值

> ID：12237801
> 
> 赞同：1
> 
> 时间：2012-09-02T16:38:03.127
> 
> 标签：c#, max, min, multidimensional-array

我有一个 3d 数组`double[,,] numbers = new double[x,y,z];`，现在如果想象 3d 数组看起来像一个带有数字的立方体，我需要找到沿所有三个方向的每个切片的最小值和最大值。

通过简单的循环当然很容易做到，但是C#有什么函数可以找到切片中的最小值和最大值吗？

为了进一步解释它，也许这个“不真实”的代码会有所帮助：

```
int i;

double[] xmin = new double[x];
double[] xmax = new double[x];
double[] ymin = new double[y];
double[] ymax = new double[y];
double[] zmin = new double[z];
double[] zmax = new double[z];

for(i = 0; i < x; i++)
{
    MinOf(numbers[i, y, z]) = xmin[i];
    MaxOf(numbers[i, y, z]) = xmax[i];
}

for(i = 0; i < y; i++)
{
    MinOf(numbers[x, i, z]) = ymin[i];
    MaxOf(numbers[x, i, z]) = ymax[i];
}

for(i = 0; i < z; i++)
{
    MinOf(numbers[x, y, i]) = zmin[i];
    MaxOf(numbers[x, y, i]) = zmax[i];
} 
```

希望有人可以帮助我。干杯，菲尔13131

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:55:26.110

你在寻找这样的东西吗？

```
double[, ,] numbers = new double[2, 2, 2];

numbers[0, 0, 0] = 0;
numbers[0, 0, 1] = 1;
numbers[0, 1, 0] = 2;
numbers[0, 1, 1] = 3;
numbers[1, 0, 0] = 4;
numbers[1, 0, 1] = 5;
numbers[1, 1, 0] = 6;
numbers[1, 1, 1] = 7;

double[] xmax = new double[numbers.GetLength(0)];
double[] ymax = new double[numbers.GetLength(1)];
double[] zmax = new double[numbers.GetLength(2)];

for (int x = 0; x < xmax.Length; x++) xmax[x] = int.MinValue;
for (int y = 0; y < ymax.Length; y++) ymax[y] = int.MinValue;
for (int z = 0; z < zmax.Length; z++) zmax[z] = int.MinValue;

for (int x = 0; x < xmax.Length; x++)
    for (int y = 0; y < ymax.Length; y++)
        for (int z = 0; z < zmax.Length; z++)
        {
            xmax[x] = Math.Max(xmax[x], numbers[x, y, z]);
            ymax[y] = Math.Max(ymax[y], numbers[x, y, z]);
            zmax[z] = Math.Max(zmax[z], numbers[x, y, z]);
        }

// xmax == { 3, 7 }
// ymax == { 5, 7 }
// zmax == { 6, 7 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T17:00:18.280

您可以创建枚举切片的方法。这是一个维度，你需要另外两个，但我认为你可以管理：

```
public static IEnumerable<T> SliceX<T>(T[,,] data, int x) {
  for (int y = 0; y < data.GetLength(1); y++) {
    for (int z = 0; z < data.GetLength(2); z++) {
      yield return data[x, y, z];
    }
  }
} 
```

然后你可以只使用`Min`and`Max`方法，但这当然会循环两次数据：

```
double min = SliceX(numbers, x).Min();
double max = SliceX(numbers, x).Max(); 
```

您可以制作一个在一次迭代中同时获得最小值和最大值的扩展方法：

```
public static class IEnumerableExtensions {

  public static void GetMinMax<T>(this IEnumerable<T> data, out T min, out T max) where T : IComparable<T> {
    bool first = true;
    min = max = default(T);
    foreach (T value in data) {
      if (first) {
        min = max = value;
        first = false;
      } else {
        if (value.CompareTo(min) < 0) min = value;
        if (value.CompareTo(max) > 0) max = value;
      }
    }
  }

} 
```

用法：

```
double min, max;
SliceX(numbers, 0).GetMinMax(out min, out max); 
```

# android - 如何在屏幕上实现多图像，每个图像都可以选择、移动、旋转、缩放和加边框？

> ID：12237812
> 
> 赞同：0
> 
> 时间：2012-09-02T16:39:21.027
> 
> 标签：android, image, imageview, border, selection

用户可以选择一些图像到屏幕上，并且能够选择/拖动/移动/缩放/旋转每个图像。选择图像后，它将具有蓝色边框。用户还可以将图像带到前面或背景。

这是以下示例图片：星形背景上有两个图像（女孩）。顶部的已被选中（它有一个蓝色边框）。

![在此处输入图像描述](../Images/2721e4e884b7bf42e891980a8ba8610c.png)

我不知道必须实施它。经过几天的学习，我现在可以拖动/移动/缩放/旋转单个图像（在图像视图内，并按矩阵缩放）。但我不知道如何处理多图像。

我想知道：

1.  使用 ImageView（对于每个图像）还是一个好主意，或者我应该使用哪些类？
2.  如何执行命令？（所以我可以把它们带到前面或背景）
3.  如何确定选择了哪个图像
4.  如何查找并绘制所选图像的边框？

目前，我只知道如何使用 ImageView，但我不确定是否可以使用它来实现这个任务。请给我一些建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:44:44.230

将所有内容直接绘制到画布上是一种方法。有一篇文章介绍了使用 Canvas 的基础知识。你可以在[这里阅读](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

这样做有一个主要缺点 - 您必须自己处理所有输入事件。API 不会告诉您单击或拖动了哪个图像。您必须自己实施。

# c++ - 关闭调试，NDEBUG

> ID：12237818
> 
> 赞同：3
> 
> 时间：2012-09-02T16:40:12.257
> 
> 标签：c++, assert

C++ Primer 说

> assert 的行为取决于名为 NDEBUG 的预处理器变量的状态。`#define`我们可以通过提供一个定义 来“关闭”调试`NDEBUG`

我的期望是在提供定义时，不会执行断言。

```
#define NDEBUG TRUE

int main (int argc, char const *argv[])
{
    assert(argc==0);  // checked

    return 0;
} 
```

在这个例子中，为什么要`assert`检查语句，何时`NDEBUG`定义？（如果我错了，请纠正我，但这与它的定义无关，对吧？）

从命令行执行时，使用`-DNDEBUG`标志，所有工作都按预期工作（`assert`不执行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T16:41:33.327

`NDEBUG`仅影响`assert`在包含之前定义它`<cassert>`（或`<assert.h>`；请注意，您可以包含这些标头多次更改`assert`取决于的行为`NDEBUG`）。

您不需要将其定义为任何特定值，或者根本不需要任何值：

```
// this is OK
#define NDEBUG 
```

# c++ - 通过 http 代理使用 POCO C++ 发送 SMTP 邮件

> ID：12237819
> 
> 赞同：1
> 
> 时间：2012-09-02T16:40:25.393
> 
> 标签：c++, proxy, smtp, poco-libraries

我没有太多的 C++ 编程经验，但我需要构建一个基本应用程序，用于使用 windows 或 linux 从计算机发送状态电子邮件，我发现 POCO C++ 支持这两个平台，但我有一个代理 http提供者背后过滤未经授权的连接，那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:39:50.000

您不能通过 HTTP 代理发送 SMTP 电子邮件。

但是您可以与您控制的网站建立 HTTP 连接。您可以编写一个网络到电子邮件的脚本并将其放在您的网站上。例如，您的脚本可以将状态消息作为 POST 参数，然后将其作为电子邮件发送出去。

垃圾邮件发送者经常尝试破解网络到电子邮件脚本来发送垃圾邮件，因此请确保您的脚本具有硬编码的目标电子邮件地址。这样，垃圾邮件发送者只能向您发送邮件，而不是 Internet 上的其他所有人。无论您做什么，都不要将目标电子邮件地址作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T05:45:04.557

关于网络到电子邮件脚本 - 确保从电子邮件标题中结束的任何内容中删除换行符！（以防止垃圾邮件发送者注入标头）

# android - 启动活动在某些真实设备上不起作用

> ID：12237820
> 
> 赞同：0
> 
> 时间：2012-09-02T16:40:26.700
> 
> 标签：android, android-intent, android-activity

我的 Android 应用程序有一个非常奇怪的问题。简而言之，我的应用程序使用一个接收器来监听来自某个号码的短信，如果手机收到来自该号码的短信，它应该播放一些不同的音调并以特定模式振动，它还应该启动另一个活动。

这在 avd 模拟器上按预期工作，但不适用于所有真正的 android 设备。例如。它不起作用，当它应该启动活动时它只是显示一个黑屏，应用程序不会崩溃，只是显示一个完全黑屏。另一方面，在我朋友的手机上，同样的应用程序可以正常运行，除了我们在设备上有不同的供应商之外，我们也没有完全相同的 android 版本，我有 2.3.3，我的朋友有 2.3。 5\. 我真的不认为这是问题，但仅供参考。

我已将我的设备连接到 Eclipse 并进行了一些调试，但我找不到问题所在。我不知道它是否有帮助，但在下面我从 Logcat 中写了一些文本，它是活动 ax.ha.it.smsalarm_jfbk/.AcknowledgeHandler 无法启动。我还写下我是如何开始这项活动的。

开始活动：

```
 if(enableAlarmAck == true && type.equals("primary")) {
        Intent ackIntent = new Intent(ctx,AcknowledgeHandler.class);
        ackIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        ctx.startActivity(ackIntent);
    } 
```

和 Logcat（对不起，大日志）：

```
09-02 18:59:58.183: D/SMSDispatcher(224): New SMS Message Received
09-02 18:59:58.210: D/Gsm/SmsMessage(1151): SMS SC address: +358xxxxxxxxxx
09-02 18:59:58.210: D/Gsm/SmsMessage(1151): originatingAddress.address : +358xxxxxxxxxx
09-02 18:59:58.214: D/Gsm/SmsMessage(1151): SMS SC timestamp: 1346601684000
09-02 18:59:58.214: E/Gsm/SmsMessage(1151): hasUserDataHeader : false
09-02 18:59:58.222: D/Gsm/SmsMessage(1151): messageBody : Test
09-02 18:59:58.242: V/MmsSmsProvider(224): uri=content://mms-sms/threadID?recipient=xxxxxxxxxx
09-02 18:59:58.246: V/Telephony(224): getOrCreateThreadId cursor cnt: 1
09-02 18:59:58.394: D/SmsProvider(224): insert content://sms/1467 succeeded
09-02 18:59:58.406: V/AudioPolicyManager(84): setStreamVolumeIndex() stream 3, index 15
09-02 18:59:58.406: V/AudioPolicyManager(84): setStreamVolume() for output 1 stream 3, volume 0.668344, delay 0
09-02 18:59:58.406: I/FmReceiverService(231): BrdcstReceiver onReceive ACTION: android.media.VOLUME_CHANGED_ACTION
09-02 18:59:58.406: I/FMRadioService(129): mReceiver: VOLUME_CHANGED_ACTION
09-02 18:59:58.406: I/FMRadioService(129):    stream: 3
09-02 18:59:58.406: I/FMRadioService(129):    volume: 15
09-02 18:59:58.406: V/AudioPolicyManager(84): setStreamVolumeIndex() stream 10, index   15
09-02 18:59:58.406: V/AudioPolicyManager(84): setStreamVolume() for output 1 stream 10, volume 0.007499, delay 0
09-02 18:59:58.410: V/AudioHardwareALSA(84): setParameters(FMRadioVol=0.0074989409)
09-02 18:59:58.410: V/AudioHardwareALSA(84): FMRadioVol = 0.007499
09-02 18:59:58.410: I/AudioHardwareALSA(84): virtual android::status_t android::AudioHardwareALSA::setFmRadioVolume(float) : Volume = [0.007499]
09-02 18:59:58.410: V/AudioPolicyManager(84): setStreamVolumeIndex() stream 9, index 15
09-02 18:59:58.410: V/AudioPolicyManager(84): setStreamVolume() for output 1 stream 9, volume 1.000000, delay 0
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): Client(27) constructor
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): Create new client(27) from pid 1151, fd=39, offset=69, length=86475, audioSessionId=31
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): setDataSource fd=39, offset=69, length=86475
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): st_dev  = 45826
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): st_mode = 33188
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): st_uid  = 1000
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): st_gid  = 1000
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): st_size = 2418792
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84): player type = 1
09-02 18:59:58.414: V/ANDROID_DRM_TEST(84):  create PVPlayer
09-02 18:59:58.414: V/PlayerDriver(84): PVSuspensionState struct constructor
09-02 18:59:58.414: V/PVPlayer(84): PVPlayer constructor
09-02 18:59:58.414: V/PVPlayer(84): construct PlayerDriver
09-02 18:59:58.414: V/PlayerDriver(84): constructor
09-02 18:59:58.414: V/PlayerDriver(84): OpenCore hardware module not found
09-02 18:59:58.414: V/PlayerDriver(84): start player thread
09-02 18:59:58.414: V/PlayerDriver(84): startPlayerThread
09-02 18:59:58.414: V/PlayerDriver(84): InitializeForThread
09-02 18:59:58.414: V/PlayerDriver(84): OMX_MasterInit
09-02 18:59:58.417: V/PlayerDriver(84): OsclScheduler::Init
09-02 18:59:58.417: V/PlayerDriver(84): CreatePlayer
09-02 18:59:58.437: V/PlayerDriver(84): AddToScheduler
09-02 18:59:58.437: V/PlayerDriver(84): PendForExec
09-02 18:59:58.437: V/PlayerDriver(84): OsclActiveScheduler::Current
09-02 18:59:58.437: V/PlayerDriver(84): StartScheduler
09-02 18:59:58.437: V/PVPlayer(84): send PLAYER_SETUP
09-02 18:59:58.437: V/PlayerDriver(84): Send player code: 2
09-02 18:59:58.437: V/PlayerDriver(84): CommandCompleted
09-02 18:59:58.437: V/PlayerDriver(84): Completed command PLAYER_SETUP status=1
09-02 18:59:58.441: V/AudioSink(84): AudioOutput(31)
09-02 18:59:58.441: V/PVPlayer(84): setDataSource(39, 69, 86475)
09-02 18:59:58.441: V/ANDROID_DRM_TEST(84): [27] setAudioStreamType(3)
09-02 18:59:58.441: V/ANDROID_DRM_TEST(84): [27] prepareAsync
09-02 18:59:58.441: V/PVPlayer(84): prepareAsync
09-02 18:59:58.441: V/PVPlayer(84):   data source = sharedfd://40:69:86475
09-02 18:59:58.441: V/PlayerDriver(84): Send player code: 3
09-02 18:59:58.441: V/PlayerDriver(84): handleSetDataSource
09-02 18:59:58.441: V/PlayerDriver(84): handleSetDataSource- scanning for extension
09-02 18:59:58.441: D/(84): PVFile::GetFileName
09-02 18:59:58.445: V/PlayerDriver(84): CommandCompleted
09-02 18:59:58.445: V/PlayerDriver(84): Completed command PLAYER_SET_DATA_SOURCE status=1
09-02 18:59:58.445: V/PVPlayer(84): run_init s=0, cancelled=0
09-02 18:59:58.445: V/PlayerDriver(84): Send player code: 6
09-02 18:59:58.445: V/PlayerDriver(84): release string is 2.3.3 len 5
09-02 18:59:58.449: V/PlayerDriver(84): CommandCompleted
09-02 18:59:58.449: V/PlayerDriver(84): Completed command PLAYER_INIT status=1
09-02 18:59:58.449: V/PVPlayer(84): run_set_video_surface s=0, cancelled=0
09-02 18:59:58.449: V/PVPlayer(84): run_set_audio_output s=0, cancelled=0
09-02 18:59:58.449: V/PlayerDriver(84): Send player code: 5
09-02 18:59:58.449: V/PlayerDriver(84): Create realtime output 
09-02 18:59:58.449: V/PlayerDriver(84): CommandCompleted
09-02 18:59:58.449: V/PlayerDriver(84): Completed command PLAYER_SET_AUDIO_SINK  status=1
09-02 18:59:58.449: V/PVPlayer(84): run_prepare s=0, cancelled=0
09-02 18:59:58.449: V/PlayerDriver(84): Send player code: 7
09-02 18:59:58.449: V/PlayerDriver(84): disable natpkt - 0
09-02 18:59:58.460: V/PlayerDriver(84): HandleInformationalEvent: 44
09-02 18:59:58.460: V/PlayerDriver(84): HandleInformationalEvent: type=44 UNHANDLED
09-02 18:59:58.460: V/ANDROID_DRM_TEST(84): [27] notify (0x3f680, 200, 1, 44)
09-02 18:59:58.460: W/MediaPlayer(1151): info/warning (1, 44)
09-02 18:59:58.460: V/PlayerDriver(84): CommandCompleted
09-02 18:59:58.460: V/PlayerDriver(84): Completed command PLAYER_PREPARE status=1
09-02 18:59:58.460: V/PlayerDriver(84): PLAYER_PREPARE complete mDownloadContextData=0x0, mDataReadyReceived=0
09-02 18:59:58.460: V/ANDROID_DRM_TEST(84): [27] notify (0x3f680, 1, 0, 0)
09-02 18:59:58.460: V/ANDROID_DRM_TEST(84): [27] setVolume(0.000000, 0.000000)
09-02 18:59:58.460: V/AudioSink(84): setVolume(0.000000, 0.000000)
09-02 18:59:58.464: V/PVPlayer(84): check_for_live_streaming s=0, cancelled=0
09-02 18:59:58.472: V/AudioSink(84): open(44100, 2, 1, 4, 31)
09-02 18:59:58.472: V/AudioPolicyManager(84): getDeviceForStrategy() from cache strategy 0, device 2
09-02 18:59:58.472: V/AudioPolicyManager(84): getOutput() stream 3, samplingRate 0, format 0, channels c, flags 0
09-02 18:59:58.472: V/AudioSink(84): setVolume
09-02 18:59:58.472: V/PlayerDriver(84): HandleInformationalEvent: 41
09-02 18:59:58.472: V/PlayerDriver(84): .... with duration = 5146 ms
09-02 18:59:58.484: I/ActivityManager(129): Starting: Intent { flg=0x10000000 cmp=ax.ha.it.smsalarm_jfbk/.AcknowledgeHandler } from pid 1151 //<--------The activity that fails to start
09-02 18:59:58.484: W/ActivityManager(129): Trying to launch ax.ha.it.smsalarm_jfbk/.AcknowledgeHandler
09-02 18:59:58.496: D/SMSDispatcher(224): BroadcastReceiver - mResultReceiver 
09-02 18:59:58.496: D/SMSDispatcher(224): GcfMode : 
09-02 18:59:58.496: E/SMSDispatcher(224): intent.getAction() : android.provider.Telephony.SMS_RECEIVED
09-02 18:59:58.496: D/SMSDispatcher(224): mResultReceiver : success = true
09-02 18:59:58.500: I/MediaPlayer(1151): Info (1,44)
09-02 18:59:58.562: I/Launcher(234): onResume(). mIsNewIntent : false
09-02 18:59:58.566: E/(234): onResume() check 0
09-02 18:59:58.566: V/ProgramMonitor(234): Binding::bindTaskManagerService() com.sec.android.widgetapp.programmonitorwidget.ProgramMonitorWidgetActivity$1@4056e350 com.sec.android.app.controlpanel.service.ITaskManagerService$Stub$Proxy@4063cef0
09-02 18:59:58.566: E/(234): onResume() check 1
09-02 18:59:58.566: E/Launcher(234): setWindowOpaque()
09-02 18:59:58.589: E/(234): onResume() check 2, mRestoring : false
09-02 18:59:58.589: E/(234): onResume() check 3
09-02 18:59:58.589: E/(234): onResume() check 4
09-02 18:59:58.589: E/(234): onResume() check 5
09-02 18:59:58.593: I/Launcher(234): onResume() ended
09-02 18:59:58.593: I/Launcher(234): onPause()
09-02 18:59:59.148: E/DataRouter(82): [*] Received suspend/ resume event but DUN is not up so neglect 
```

确认处理程序.onCreate：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ack);

    //Shared preferences
    final SharedPreferences sharedPref = this.getSharedPreferences(SmsAlarm.SHARED_PREF, Context.MODE_PRIVATE);

    //Get full message as string
    String fullMessage = sharedPref.getString(SmsAlarm.FULL_MESSAGE_KEY, "");

    //Get acknowledge number
    final String ackNumber = sharedPref.getString(SmsAlarm.ACK_NUMBER, "");

    TextView messageTextView = (TextView)findViewById(R.id.fullAlarmMessage);

    //Set larm text message to ui
    messageTextView.setText(fullMessage);

    //Find buttons and set the to button variables
    Button abortButton = (Button)findViewById(R.id.abortAlarm);
    Button ackButton = (Button)findViewById(R.id.acknowledgeAlarm);

    //Create objects that acts as listeners to the buttons
    abortButton.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {
            finish();
        }
    });

    //Create objects that acts as listeners to the buttons
    ackButton.setOnClickListener(new OnClickListener() {            
        public void onClick(View v) {
            //Check if user has given any number to call, else show toast
            if(!ackNumber.equals("")) {
                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:"+ackNumber));
                startActivity(callIntent);
            }   else {
                Toast.makeText(AcknowledgeHandler.this, R.string.cannotAck, Toast.LENGTH_LONG).show();
            }
        }
    });      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:38:12.380

您可以执行以下操作来打开屏幕并显示您的活动：

```
private android.view.Window window;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    /**** Turn the screen on and show your activity ****/
    window = getWindow();
    window.addFlags(android.view.WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    window.addFlags(android.view.WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    window.setContentView(R.layout.ack);
    /***************************************************/

    // setContentView(R.layout.ack);  // This is no longer needed

    /**** Rest of your code as it is ****/

    /*  ---------------------------- ****/

    /************************************/
} 
```

但请记住，您只是专门“唤醒设备并打开屏幕”。您没有“解锁”设备。当您按返回键时，您将看到锁定屏幕。本质上，您的活动将打开屏幕并显示在锁定屏幕上。

希望这可以帮助 ：）

# iphone - 有没有一种安全的方法来手动动画 UIScrollView 的滚动？

> ID：12237825
> 
> 赞同：0
> 
> 时间：2012-09-02T16:40:56.433
> 
> 标签：iphone, ios, cocoa-touch, ipad, uiscrollview

我对 UIScrollView 有非常自定义的动画需求，而不仅仅是减速。

在不干扰默认动画行为的情况下，为 UIScrollView 的 contentOffset 或边界设置动画的最安全方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:42:48.667

如果你创建一个动画块，你可以通过直接设置 contentOffset 'tablView.contentOffset = foo'（或关闭动画'tableView setContentOffset:foo animated:NO'）来为 tableView 移动设置动画。这解耦了 tableview 自己的内部动画。

# java - 关于 ArrayList 类中的 fastRemove() 方法

> ID：12237830
> 
> 赞同：0
> 
> 时间：2012-09-02T16:41:38.633
> 
> 标签：java, collections

我在反编译器中通过 Array List 类发现了这个方法..

```
private void fastRemove(int paramInt)
  {
    this.modCount += 1;
    int i = this.size - paramInt - 1;
    if (i > 0)
      System.arraycopy(this.elementData, paramInt + 1, this.elementData, paramInt, i);
    this.elementData[(--this.size)] = null;
  } 
```

我只是想知道我们在什么情况下真正需要fastRemove()方法，请提供示例以便理解

![在此处输入图像描述](../Images/8219171c9cab965979788888dd23a07c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:56:17.597

用户永远不会直接调用该方法（因此使用关键字`private`）。是调用`fastRemove()`时实际执行的删除操作。`remove(Object o)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T16:57:23.690

从此方法的评论中：

> 跳过边界检查且不返回已删除值的私有删除方法。

正如您可能已经看到的，这是由`public` `remove()`方法内部调用的。如果您查看此方法的源代码，您可以清楚地理解何时以及为何`fastRemove()`调用此方法：

```
public boolean remove(Object o) {
    if (o == null) {
      for (int index = 0; index < size; index++)
        if (elementData[index] == null) {
            fastRemove(index);
            return true;
        }
    } else {
        for (int index = 0; index < size; index++)
        if (o.equals(elementData[index])) {
            fastRemove(index);
            return true;
        }
        }
    return false;
} 
```

使用此方法的想法很简单：不执行任何边界检查并在内部重新排列数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:53:30.187

`fastRemove(...)``ArrayList`是在类中使用的私有方法，由类中的方法使用`remove`。作为`fastRemove`私有方法，您不能使用它。但是，您可以使用`remove`使用此方法的方法。从`remove`方法的总结： -

```
Removes the first occurrence of the specified element from this list,
if it is present.  If the list does not contain the element, it is
unchanged. 
```

# haskell - 为什么在 MonadState 中使用 MultiParamTypeClasses

> ID：12237831
> 
> 赞同：5
> 
> 时间：2012-09-02T16:41:40.837
> 
> 标签：haskell

```
class Monad m => MonadState s m | m -> s where
    -- | Return the state from the internals of the monad.
    get :: m s
    get = state (\s -> (s, s))

    -- | Replace the state inside the monad.
    put :: s -> m ()
    put s = state (\_ -> ((), s))

    -- | Embed a simple state action into the monad.
    state :: (s -> (a, s)) -> m a
    state f = do
      s <- get
      let ~(a, s') = f s
      put s'
      return a

instance MonadState s m => MonadState s (MaybeT m) where... 
```

为什么一个 MonadState 的实例需要一个 state 和一个 monad，为什么不创建一个单参数的 State 类呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T18:19:23.263

让我试着在评论中回答 Gert 的问题，因为这是一个完全不同的问题。

问题是，为什么我们不能只写

```
class State s where
   get :: s
   put :: s -> () 
```

好吧，我们可以写这个。但现在的问题是，我们能用它做什么？困难的部分是，如果我们有一些代码，`put x`然后稍后`get`，我们如何将 链接`get`到`put`以便返回与输入的值相同的值？

问题是，只有类型`()`and `s`，没有办法将一个链接到另一个。您可以尝试以各种方式实现它，但它不会起作用。没有办法将数据从`put`传送到`get`（也许有人可以更好地解释这一点，但最好的理解方法是尝试编写它）。

Monad 不一定是使操作可链接的唯一方法，但它是一种方法，因为它具有将`>>`两个语句链接在一起的运算符：

```
(>>) :: m a -> m b -> m b 
```

所以我们可以写

```
(put x) >> get 
```

* * *

编辑：这是一个使用[包中定义](http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/src/Control-Monad-State-Class.html#MonadState)[的实例的示例`StateT`](http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/src/Control-Monad-State-Class.html#MonadState)

```
foo :: StateT Int IO ()
foo = do
    put 3
    x <- get
    lift $ print x

main = evalStateT foo 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T17:09:30.480

您需要某种方式将状态的类型与 monad 的类型相关联。`MultiParamTypeClasses`with`FunctionalDependencies`是一种方法。但是，您也可以使用`TypeFamilies`.

```
class (Monad m) => MonadState m where
    type StateType m

    -- | Return the state from the internals of the monad.
    get :: m (StateType m)
    get = state (\s -> (s, s))

    -- | Replace the state inside the monad.
    put :: StateType m -> m ()
    put s = state (\_ -> ((), s))

    -- | Embed a simple state action into the monad.
    state :: (StateType m -> (a, StateType m)) -> m a
    state f = do
      s <- get
      let ~(a, s') = f s
      put s'
      return a

instance MonadState m => MonadState (MaybeT m) where
    type StateType (MaybeT m) = StateType m

    ... 
```

这是[monads-tf 包](http://hackage.haskell.org/packages/archive/monads-tf/latest/doc/html/Control-Monad-State-Lazy.html)采用的方法。

# java - 在按钮开始时从游戏循环中调用绘制方法

> ID：12237834
> 
> 赞同：4
> 
> 时间：2012-09-02T16:41:42.550
> 
> 标签：java, swing

嗨，我试图在游戏循环中每次都调用paint方法。此时，一旦按下按钮，屏幕就会弹出一个标签和一个按钮，我想要的标签和按钮去，但我无法得到开始的绘画方法我尝试了 j.repaint() 和 j.validate() 都没有访问绘画方法。任何帮助将不胜感激。

```
package sgame;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class SGame extends JPanel
{

    public static void main(String[] args)
    {

        final JFrame window = new JFrame("hello");
        final JPanel window1 = new JPanel();
        Timer loop = new Timer(1000, new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                GameLoop(window1);

            }
        });
        Window(window, loop);

    }

    public static void Window(final JFrame window, final Timer loop)
    {
        final JButton b1 = new JButton("GO!");
        b1.setLocation(210, 300);
        b1.setSize(70, 50);
        window.setVisible(true);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(500, 500);
        window.setLocation(420, 170);
        window.setBackground(Color.BLACK);
        final JLabel Title = new JLabel("Snake", JLabel.CENTER);
        Title.setFont(new Font("Times New Roman", Font.ITALIC, 60));
        Title.setVerticalAlignment(JLabel.CENTER);
        Title.setForeground(Color.WHITE);
        window.add(b1);
        window.add(Title);
        b1.addActionListener(new ActionListener() // runs when buttons pressed
            {

                @Override
                public void actionPerformed(ActionEvent e) // clears header,button and starts timer
                {
                    b1.invalidate();
                    b1.setVisible(false);
                    Title.setVisible(false);
                    Title.invalidate();
                    loop.start();
                }

            });

    }

    public static void GameLoop(JPanel j)
    {
        // Call paint method
    }

    public void paintComponent(Graphics g)
    {
        g.setColor(Color.yellow);
        g.drawRect(30, 30, 30, 30);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:25:28.203

`paintComponent()`永远不会调用in中的方法，`SGame`因为您没有实例化任何 SGame 对象。并且 window1 尚未添加到框架中。

像这样的东西应该更好：

```
public class SGame extends JPanel {

    private Timer loop;

    public SGame(){
        loop = new Timer(1000, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                gameLoop();
            }
        });
    }

    public static void main(String[] args) {
        final JFrame window = new JFrame("hello");
        final JButton b1 = new JButton("GO!");
        b1.setLocation(210, 300);
        b1.setSize(70, 50);
        window.setVisible(true);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(500, 500);
        window.setLocation(420, 170);
        window.setBackground(Color.BLACK);
        final JLabel Title = new JLabel("Snake", JLabel.CENTER);
        Title.setFont(new Font("Times New Roman", Font.ITALIC, 60));
        Title.setVerticalAlignment(JLabel.CENTER);
        Title.setForeground(Color.WHITE);
        window.add(b1);
        window.add(Title);
        b1.addActionListener(new ActionListener() { // runs when buttons pressed
            @Override
            public void actionPerformed(ActionEvent e) // clears header,button
            {
                b1.invalidate();
                b1.setVisible(false);
                Title.setVisible(false);
                Title.invalidate();
                SGame sg = new SGame();
                window.add(sg);
                sg.start();
            }
        });;
    }

    public void start(){
        loop.start();
    }

    public void gameLoop() {
        repaint();
    }

    @Override
    public void paintComponent(Graphics g) {
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(Color.yellow);
        g.drawRect(30, 30, 30, 30);
    }
} 
```

# matlab - 获取 Matlab 中的函数代码？

> ID：12237836
> 
> 赞同：7
> 
> 时间：2012-08-31T09:11:51.823
> 
> 标签：matlab

我想知道我们是否 - Matlab 用户可以获取 Matlab 中某些函数的代码（如 fft - 快速傅立叶变换、dwt - 离散小波变换等。）以防万一我们想要编辑一些东西以适应我们的内容需要。在matlab中可以吗？如果是这样，我们如何获得代码？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-18T06:50:21.127

键入“edit function.m”（不带引号），其中“function”是您希望查看的代码的函数名称。

阅读更多：[http ://www.ehow.com/how_8465386_matlab-function-codes.html#ixzz2wILKOXJI](http://www.ehow.com/how_8465386_matlab-function-codes.html#ixzz2wILKOXJI)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T17:59:01.780

如前所述，很多 MATLAB 函数都是用 MATLAB 编写的，因此您可以查看源代码。出于性能原因，有些东西是用本机代码实现的，或者使用外部库。在 FFT 的情况下，MATLAB 使用 FFTW 库，其源代码可免费获得。另见[http://www.mathworks.co.uk/help/techdoc/ref/fftw.html](http://www.mathworks.co.uk/help/techdoc/ref/fftw.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:13:07.137

左侧当前目录菜单下matlab中有一个选项，选项名称为“find Files”，用望远镜图标表示，直接点击，将目录设置为“Enter Matlab Path”，进入功能要搜索的名称，

例如，如果我想搜索函数 imnoise ，我会在得到搜索结果后输入“imnoise.m”，只需双击函数文件，你就可以编辑任何你想要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-29T12:47:13.930

总结一下，有几种方法可以做到这一点。

例如，如果我们想查看函数的源代码`imread`：

a)`edit`编辑或创建文件

```
edit imread; %namely, edit('imread')
edit imread.m; %edit('imread.m') 
```

b)`open`在适当的应用程序中打开文件

```
open imread; %open file 'imread.m' with matlab editor 
```

c)`type`显示文件内容：

```
type imread; %this will display all the contents in command window, which is hard to read 
```

**请注意**，这`funcName stringLiteral`是*命令语法*，它等于它的*函数语法* `funcName('stringLiteral')`。请参阅 [命令与函数语法](http://cn.mathworks.com/help/matlab/matlab_prog/command-vs-function-syntax.html)

# c++ - 无法使用 OpenSSL 验证服务器证书

> ID：12237838
> 
> 赞同：2
> 
> 时间：2012-09-02T16:42:00.010
> 
> 标签：c++, soap, ssl, openssl, betfair

我已经使用 OpenSSL（在 Ubuntu 12.04 上用 C++ 编写）编写了一个 SOAP 客户端，但它目前无需检查服务器安全证书即可工作。这是我用来设置连接和检查证书的功能

```
bool bInitialiseSSL(SSL_CTX* &ctx, SSL* &ssl, BIO* &bio)
{
    ctx = SSL_CTX_new(SSLv23_client_method());  
    bio = BIO_new_ssl_connect(ctx);
    if (bio == NULL) {
        ERR_print_errors_fp(stderr);    
        SSL_CTX_free(ctx);
        return false;
    }

    BIO_get_ssl(bio, &ssl);

    SSL_set_mode(ssl, SSL_MODE_AUTO_RETRY);
    char target[]  = "api.betfair.com:https";

    BIO_set_conn_hostname(bio, target);
    BIO_set_nbio(bio,1);
    while (1) {
        if (BIO_do_connect(bio) <= 0) {
            if (!BIO_should_retry(bio)) {
                cout << "Connect failed." << endl;
                BIO_free_all(bio);
                SSL_CTX_free(ctx);
                return false;
            }
        } else {
            break;
        }
    }

    if (BIO_do_handshake(bio) <= 0) {
        BIO_free_all(bio);
        SSL_CTX_free(ctx);
        return false;
    }

    X509 *cert;
    bool bValid  = false;
    cert = SSL_get_peer_certificate(ssl); 
    if ( cert != NULL ) {
        long res = SSL_get_verify_result(ssl);
        if (res == X509_V_OK) {
            bValid = true;
        } else {
            cout << "Error in security validation: " << res << endl;
        }
        X509_free(cert);   
    }
    return bValid;
} 
```

这工作正常，但 SSL_get_verify_result 的返回值为 20，对应于

> X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY：无法获取本地颁发者证书

我已经阅读了一些 OpenSSL 文档以了解它们的功能，但它对用户不是特别友好。我查看了许多网络教程，但我看不出我做错了什么。在我尝试实施证书检查之前，我的软件运行良好，但我看不到我需要做什么。我需要在我的机器上配置设置吗？该服务器是必发的，据说非常安全，我很难相信他们没有有效的 SSL 证书。如果有人能告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:16:11.167

这取决于服务器的证书。

*   如果它是公共有效证书，您可以将 CA 证书文件包含在 SSL_CTX 中。

代码：

```
ctx = SSL_CTX_new(SSLv23_client_method()); 
// You can load CA certs into SSL_CTX
SSL_CTX_load_verify_locations(ctx, cafile, NULL); // cafile: CA PEM certs file 
```

[您可以从 mozilla.org](http://curl.haxx.se/docs/caextract.html)的 cURL 网站 CA Certs 下载公共 CA 证书文件

*   如果它是私有证书，并且您有证书文件，则可以`SSL_CTX_use_certificate_file`使用`SSL_CTX_load_verify_locations`.

# javascript - 如何使用带有“取消”按钮的 queue()？

> ID：12237840
> 
> 赞同：0
> 
> 时间：2012-09-02T16:42:05.077
> 
> 标签：javascript, jquery

我正在尝试学习如何使用 .queue() JQuery 方法。所以我从只使用 setTimeout 的基本动画开始。我这里有代码：

[http://jsfiddle.net/2gJQS/8/](http://jsfiddle.net/2gJQS/8/)

我想知道如何使用队列实现相同的动画。这样做的原因是我希望能够在页面上添加一个“取消”按钮，该按钮将完全取消所有未来的步骤。现在，如果你快速按下 Start 按钮几次，setTimeout 会相互堆积，看起来很奇怪。

我尝试分别列出每个动画，例如：

```
$('#target').queue(function(){
    $(this).delay(1000).fadeIn(1000);
    $(this).dequeue();
}); 
```

但只有fadeIns 和fadeOuts 发生在正确的时间，颜色和文本没有变化。所以我在颜色和文本更改的队列函数中添加了 setTimeout，这使得计时工作。但是当我打电话时

```
$('#target').clearQueue(); 
```

它只停止了淡入淡出和淡入淡出，而颜色和文本的变化仍然发生。

总结一下我的问题：

1.  如何在链接中实现动画，同时还有一个取消按钮，如果按下该按钮将完全清除所有未来步骤？

2.  如果 1 的答案是使用 queue()，那么我该如何正确地执行此操作（鉴于上述失败的尝试）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:00:00.230

`.html()`类似和`.css()`不使用动画队列的函数，因此您应该使用`.queue()`在其他动画之间安排这些调用，然后`.stop(true, true)`在再次按下开始按钮时使用取消队列。

绝对*不要*与 jQuery 动画混合`setTimeout`使用——它不会可靠地工作。

请参阅[http://jsfiddle.net/alnitak/EKNAd/](http://jsfiddle.net/alnitak/EKNAd/)以了解您的小提琴已更正为使用 jQuery 动画队列：

```
$('#target').stop(true, true)
    .html("This is one.")
    .css('color', '#000000')
  .fadeIn(1000).fadeOut(2000).queue(function() {
    $(this).html("This is two.").css('color', '#dc0000');
    $(this).dequeue();
}).fadeIn(1000).fadeOut(2000).queue(function() {
    $(this).html("This is three").css('color', '#990099');
    $(this).dequeue();
}).fadeIn(1000).fadeOut(2000); 
```

此外，我[之前发布了](https://stackoverflow.com/a/10973084/6782)这个函数，以允许调用*任何*jQuery 函数，就好像它已排队一样：

```
(function($) {
    $.fn.queued = function() {
        var self = this;
        var func = arguments[0];
        var args = [].slice.call(arguments, 1);
        return this.queue(function() {
            $.fn[func].apply(self, args).dequeue();
        });
    }
}(jQuery)); 
```

请参阅[http://jsfiddle.net/alnitak/AYMY7/](http://jsfiddle.net/alnitak/AYMY7/)为您的函数重写以使用它：

```
$('#target')
    .stop(true, true)
    .html('This is one')
    .css('color', '#000000')
    .fadeIn(1000)
    .fadeOut(2000)
    .queued('html', 'This is two')
    .queued('css', 'color', '#dc0000')
    .fadeIn(1000)
    .fadeOut(2000)
    .queued('html', 'This is three')
    .queued('css', 'color', '#990099')
    .fadeIn(1000)
    .fadeOut(2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:12:19.843

也许是这样的：[这里](http://jsfiddle.net/2gJQS/10/)

**HTML**：

```
<div id="holder">
<div id="target" style="display:none"></div>
</div>

<button id="start">Start</button>
<button id="cancel">Cancel</button> 
```

**脚本**：

```
$(function(){   
    $('#start').click(function(){
        $(this).attr("disabled", "true");
        $("#target").html("This is one.").fadeIn(1000, function(){
            $(this).fadeOut(1000, function(){
                $(this).html("This is two.").css("color","#dc0000").fadeIn(1000, function(){
                    $(this).fadeOut(1000, function(){
                        $(this).html("This is three.").css("color","#990099").fadeIn(1000, function(){
                            $(this).fadeOut(1000, function(){
                                $(this).css("color","#000000");
                                $("#start").removeAttr("disabled");
                            });
                        });
                    });
                });
            });
        });                 
    });

    $("#cancel").click(function(){
        $("#target").stop().empty();
        $("#start").removeAttr("disabled");

    });
}); 
```

# arrays - Flash AS3，如何使用整数键索引哈希图

> ID：12237841
> 
> 赞同：2
> 
> 时间：2012-09-02T16:42:08.653
> 
> 标签：arrays, actionscript-3, search, indexing, timestamp

这是交易。

现在我有一本游戏状态字典

```
history = new Dictionary(); 
```

每个状态`key`都是一个时间戳（int）

```
history[100] = currentState;
history[500] = currentState;
history[699] = currentState; 
```

我的问题是，我怎样才能找到最近的游戏状态。假设我想知道状态是什么样的`670`，我想要不大于的最新历史`670`（我不想显示未来）。这将是`history[500]`。

现在我正在遍历每个键，以找到最近的一个。有什么方法可以索引这些时间戳，所以我可以比线性时间更快地搜索？（我会有很多钥匙！）也许我不想要字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:15:58.993

您可以使用二进制搜索（分而治之）方法，将状态保存在排序数组中，然后递归：

1.  将数组分成两半
2.  如果数组包含一项，则返回该项
3.  确定哪一半将包含正确的结果
4.  转到第 1 步

这应该在对数时间内找到结果。（注意 log [2] (1,000) ~ 10 和 log [2] (10,000) ~ 13）

* * *

这是一个草案（未经测试）的实现：

```
class HistoryEntry
{
    public var timestamp:int;
    public var state:GameState;

    public function HistoryEntry(timestamp:int, state:GameState)
    {
        this.timestamp = timestamp;
        this.state = state;
    }
}

class History
{
    private var states:Array;

    public function History()
    {
        super();
        states = [];
    }

    public function addState(state:State):void
    {
        var timestamp:int = getTimer();
        var entry:HistoryEntry = new HistoryEntry(timestamp, state);
        states.push(entry);
    }

    public function getStateBefore(timestamp:int):State
    {
        return doGetStateBefore(timestamp, 0, states.length - 1);
    }

    // Recursive function
    private function doGetStateBefore(timestamp:int, beginIndex:int, endIndex:int):State
    {
        if (beginIndex == endIndex) {
            return states[beginIndex];
        }

        var beginEntry:HistoryEntry = states[beginIndex];
        var endEntry:HistoryEntry = states[endIndex];
        if (beginEntry.timestamp == timestamp) {
            return beginEntry.state;
        }
        if (endEntry.timestamp == timestamp) {
            return endEntry.state;
        }

        var middleIndex:int = (beginIndex + endIndex) / 2;
        var middleEntry:HistoryEntry = states[middleIndex];
        if (midleEntry.timestamp >= timestamp) {
            return doGetStateBefore(timestamp, beginIndex, middleIndex);
        } else {
            return doGetStateBefore(timestamp, middleIndex + 1, endIndex);
        }
    }
} 
```

我引入了这个类`HistoryEntry`，以便从数组中获取类型化的对象，因为使用动态对象会对性能产生负面影响。

# php - 如何通过 .htaccess Action/AddHandler 的 php 脚本获取源文件

> ID：12237845
> 
> 赞同：1
> 
> 时间：2012-09-02T16:42:31.347
> 
> 标签：php, .htaccess, watermark

我制作了一个简单的脚本来为目录中的所有图像文件添加水印图像。

所以，我有.htaccess：

```
AddHandler watermarked .jpg 
AddHandler watermarked .jpeg 
AddHandler watermarked .gif 
AddHandler watermarked .png 

Action watermarked /spimg/vitowatermark.php 
```

因此，现在对于来自该目录的每个图像请求，vitowatermark.php 都在工作。

如何获取源图像文件，用户从我的 PHP 脚本请求，在其上添加水印并生成答案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:08:17.913

酷，我自己找到了这个问题的答案。

```
$filename =  $_SERVER["PATH_TRANSLATED"]; 
```

# sql - 在 VB.net 中使用 SQL 查询读取平均值

> ID：12237847
> 
> 赞同：0
> 
> 时间：2012-09-02T16:42:38.850
> 
> 标签：sql, vb.net, average

我需要在 vb.net 中运行 SQL 查询来找到我的应用程序的平均评分。我认为这是执行此操作的正确 SQL：

```
SELECT AVG(Rating) FROM Feedback; 
```

唯一的问题是我不确定如何正确运行此查询。我有一个类似的查询，我已将其更改为以下内容（它不起作用），我只是想知道您是否可以帮助调整它以使其真正起作用？

```
 Dim conn As New MySqlConnection(DBCred)
    Dim sqlquery As String = "SELECT AVG(Rating) FROM Feedback;"
    Dim cmd As MySqlCommand
    Dim AVGRating As String
    conn.Close()
    cmd = New MySqlCommand(sqlquery, conn)
    conn.Open()
    Try
        AVGRating = cmd.r
    Finally
        cmd.Connection.Close()

    End Try
    conn.Close() 
```

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:49:59.623

试试这个。

```
 Dim AVGRating As String = String.Empty
    Using xConn As New MySqlConnection(DBCred)
        Using xComm As New MySqlCommand()
            With xComm
                .Connection = xConn
                .CommandType = CommandType.Text
                .CommandText = "SELECT AVG(Rating) FROM Feedback WHERE Feedback.Rating > 0"
            End With
            Try
                xConn.Open()
                AVGRating = CStr(xComm.ExecuteScalar)
            Catch ex As Exception
                MsgBox(ex.Message.ToString)
            Finally
                xConn.Close()
            End Try
        End Using
    End Using 
```

**[链接：SqlCommand 对象中的 ADO.NET ExecuteScalar](http://vb.net-informations.com/ado.net-dataproviders/ado.net-executescalar-sqlcommand.htm)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:47:11.833

您需要执行命令 - 在这种情况下，使用`ExecuteScalar`

```
AVGRating = cmd.ExecuteScalar().ToString() 
```

# delphi - 从资源 DLL 加载时，是否可以在 Delphi 中更改资源字符串？

> ID：12237848
> 
> 赞同：2
> 
> 时间：2012-09-02T16:42:40.243
> 
> 标签：delphi, resources

我有一个带有本地化资源 DLL 的 Delphi 应用程序。

从 DLL 加载资源字符串后，我想对其进行搜索和替换。

是否有任何内部程序可以执行此操作？

我需要一种方法来搜索和替换加载的任何资源字符串，而不仅仅是更改特定的资源字符串。

拉乌尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:53:04.670

是的，您必须挂钩 System.pas 中定义的 LoadResString() 过程。

例如，请参阅我们在[http://synopse.info/fossil/finfo?name=SQLite3/SQLite3i18n.pas中的操作](http://synopse.info/fossil/finfo?name=SQLite3/SQLite3i18n.pas)

本单元代码中包含所有内容：

*   用于提取所有资源字符串（但您也可以使用“详细地图”选项编译可执行文件以获得相同的列表）；
*   用于将所有资源字符串即时替换为您期望的语言；
*   用于缓存所有资源字符串，因为默认的 LoadResString API 可能很慢。

您也有类似的代码，但这是包含在我们的开源 mORMot 框架中的代码，适用于从 Delphi 6 到 XE2。还有一些代码可以从同一个翻译文本文件中即时更改所有 .dfm 内容（即您的表单）。在[http://mormot.net的框架文档中有一个关于它的章节](http://mormot.net)

我认为您将在这里获得您的任务所需的所有代码模式。

# django - 如何使用 Django 创建类别和子类别系统？

> ID：12237849
> 
> 赞同：1
> 
> 时间：2012-09-02T16:42:55.703
> 
> 标签：django

如何使用 Django 创建类别和子类别系统？有申请吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:44:41.197

实际上有：[https ://github.com/django-mptt/django-mptt/](https://github.com/django-mptt/django-mptt/)

这是文档：[http ://django-mptt.github.com/django-mptt/](http://django-mptt.github.com/django-mptt/)

# python - mongodb - 需要处理海量数据，只有一个服务器实例

> ID：12237850
> 
> 赞同：2
> 
> 时间：2012-09-02T16:43:06.360
> 
> 标签：python, mongodb, pymongo

我正在尝试在 mongodb 中处理大约一亿条记录。基本上，每个键（处方号）响应大约 1300 条记录（不是唯一的）。这些键已**编入索引。**

现在，我正在使用 pymongo 查询特定键以返回这些结果集，以便可以使用 python 处理它们。

查询mongo是最大的瓶颈。每个查询大约需要**20 秒**。按照目前的速度，查询每条记录需要**400 小时。**

*这就是我“解释”我的查询时的样子：*

```
db.prescriptions.find({'key':68565299}).explain()

                            {
    "cursor" : "BasicCursor",
    "nscanned" : 103578563,
    "nscannedObjects" : 103578563,
    "n" : 1603,
    "millis" : 287665,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
} 
```

这表明我有索引

```
> db.prescriptions.getIndexes()
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "processed_data.prescriptions",
        "name" : "_id_"
    }
] 
```

我是否因为试图在一个服务器实例上运行此数据处理而失去兴趣？（有趣的是，当我运行 top 时，我的 CPU 和 RAM 似乎没有被最大化。）

我将不胜感激任何建议。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:56:28.757

## 添加索引

从查询的解释结果看，“key”上没有索引，需要加一个。

```
> db.prescriptions.addIndex({'key': 1}); 
```

如果 mongo 报告任何类型的警告，您需要采取行动

# vb.net - 如果文本框包含来自文本文档的文本，我怎样才能让它触发一个动作？

> ID：12237858
> 
> 赞同：0
> 
> 时间：2012-09-02T16:44:17.497
> 
> 标签：vb.net, winforms

我正在尝试制作一个序列号注册程序。我如何做到这一点，以便如果他们从我的资源中的文本文档中键入序列号，就会发生操作？我想要它，如果有人在文本文档中输入某个序列号，然后按下注册，就会触发动作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:31:58.353

在 WinForms 中，创建事件处理程序非常容易。在表单设计器中选择序列号文本框。在属性窗口中，通过单击带有闪电符号的按钮切换到事件。在这里，您可以在许多事件之间进行选择。`TextChanged`活动很好。每次输入或删除字符时都会触发。根据您想要执行的不同`Key...`事件，一个`Leave`或`Validated`多个`Validating`事件可能有用。如果您使用的是按钮，只需双击该按钮即可获取`Click`事件的处理程序。

双击事件名称旁边的空白字段。Visual Studio 会自动为您创建一个事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:21:50.767

在 .NET 中创建一个程序来检查嵌入资源中是否存在某个 TextBox 条目非常容易。但...

请注意，.NET 对于这类事情完全不是一个好的平台。与确保没有人可以使用免费提供的软件（例如[ILSpy ）读取您的文档/资源（其中包含所有有效密钥）相比，实施它非常容易](http://wiki.sharpdevelop.net/ILSpy.ashx)

还要检查[这个问题](https://stackoverflow.com/questions/12151308/confuser-net-obfuscator-is-it-safe)。

一个简单的实现可能是这样的：

```
TextBox ValidationKey = new TextBox(); 
```

绑定事件处理程序：

```
ValidationKey.KeyPress += new KeyPressEventHandler(ValidationKey_KeyPress); 
```

事件处理程序的实现：

```
private void ValidationKey_KeyPress(object sender, KeyPressEventArgs e)
{
    bool isKeyValid = MyResourceFile.Keys.Contains(ValidationKey.Text);
    MessageBox.Show(string.Format("Is it a valid key: {0}", isKeyValid.ToString()));
} 
```

这是一个非常幼稚的实现，因为当用户只输入一个字符时，它很可能通过测试。您可能想要使用 RegExp 或首先检查 是否`ValidationKey.Text.Length`等于有效密钥的长度。

# vector - 在矩阵中赋值的函数（j 编程）

> ID：12237863
> 
> 赞同：0
> 
> 时间：2012-09-02T16:44:45.190
> 
> 标签：vector, boxing, j

我有两个向量（比如 X 和 Y），它们对应于行号和列号。我想编写一个函数（一个动词，在 j 编程中），它接受这些并在 anxn 零矩阵中分配 1。这是一个简单的案例。

我有这些向量：

```
X=:1 2 1 5
Y=:0 3 3 9 
```

和一个零矩阵：

```
mat=: 10 10$0 
```

我编写了以下函数（我使用了拳击）：

```
 1(|:(,./<"0(|:(X,:Y)))) } 10 10$0 
```

但问题是它需要这些向量并将 1 分配给每一列。因此，如果我采用 (1,0) ，它会将 1 分配给所有列中的第 1 行和第 0 行（就像在 Matlab (1,:) 中一样）。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T04:20:17.240

我了解您想修改布尔名词以将 1 放在指定的坐标处。您从作为单独列表的坐标对开始。我建议将这些列表拼接在一起，如下所示：

```
 Y,.X
0 1
3 2
3 1
9 5 
```

Y 位于 X 之前，因为在 J 中，轴自然地以递减顺序排列（也就是说，最细粒度的向右排列。）要将它们用作 Amend 的坐标对，需要将它们装箱：

```
 <"1 Y,.X
+---+---+---+---+
|0 1|3 2|3 1|9 5|
+---+---+---+---+ 
```

这些将与 Amend 一起在这些特定坐标处设置 1，因此：

```
 1 (<"1 Y,.X)} 10 10$0
0 1 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 1 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 0 0 0 0 
```

如果我理解了您的问题，这就是您想要生成的矩阵。

# php - 输入聊天框链接

> ID：12237864
> 
> 赞同：-1
> 
> 时间：2012-09-02T16:44:46.470
> 
> 标签：php

> **可能重复：**
> [PHP：STR 通过链接替换](https://stackoverflow.com/questions/1587480/php-str-replace-by-link)

我正在尝试制作一个具有聊天框或喊话框的网站..

当我在 textarea 上输入一个链接，例如[http://link.com/](http://link.com/)并提交它时，它在聊天框上只显示一个纯文本，我怎样才能让它像 facebook 聊天一样当你输入链接时的任何其他聊天它将显示为带有下划线的链接，您可以单击它..我不知道该怎么做..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:48:49.410

[RegEx](http://php.net/manual/en/reference.pcre.pattern.syntax.php)和[preg_replace](http://php.net/manual/en/function.preg-replace.php)是一个好的开始：

```
$pattern = "/http:\/\/(www\.)?([^.]+\.[^.\s]+\.?[^.\s]*)/i";
$replace = "<a href='http://\\1\\2'>http://\\1\\2</a>";
$string = preg_replace($pattern,$replace,$string);
echo $string; 
```

这里的好处是，您可以输入以下内容：

`Hello, look at my site http://www.google.de`

这将被翻译成：

`Hello, look at my site <a href="http://www.google.de">http://www.google.de</a>`

# android - FOCUS_MODE_CONTINUOUS_VIDEO 和我的私人课程 AutoFocusCallback

> ID：12237873
> 
> 赞同：0
> 
> 时间：2012-09-02T16:47:00.797
> 
> 标签：android, camera, focus, continuous

我有一个问题，我正在使用相机制作应用程序，需要知道何时激活自动对焦。使用 setFocusMode (Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO) 并使用 onAutoFocus 方法创建了一个私有类 AutoFocusCallBackImpl **（布尔成功，Camera camera）**，但它从未被调用。作为[developer.android](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_VIDEO)它应该被调用。我究竟做错了什么？感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:55:44.410

在 API 14 之前，您的回调根本不会在此模式下调用。你不需要；设备（试图保持图像）始终处于焦点位置。从 API 14 开始，您可以调用`autoFocus()`它，它会回调以指示它现在是否认为图像处于焦点位置。

# c# - 无法在 datagridviewlinkcolumn 中显示链接标签文本

> ID：12237875
> 
> 赞同：0
> 
> 时间：2012-09-02T16:47:10.727
> 
> 标签：c#, winforms, visual-studio-2010

我有一个小但很烦人的问题：

我创建了一个 datagridview 并将其绑定到数据源。然后现在我想添加一个列，该列将显示供用户单击的链接。为了做到这一点，我添加了一个 datagridviewlink 列。对于数据网格的每一行，我将该列中单元格的值设置为我想要显示的文本。但它什么也没显示。所有 datagridlink 列都用“空白文本”填充。

这是我的代码：

```
DataGridViewLinkColumn dgvColDeletion = new DataGridViewLinkColumn();
dgvColDeletion.Name = "Deletion";
dgvColDeletion.HeaderText = "";
dgvColDeletion.ReadOnly = false;
dgvTrainings.Columns.Add(dgvColDeletion);

foreach (DataGridViewRow row in dgvTrainings.Rows)
{
     row.Cells["Deletion"].Value = "Delete";
}
dgvColDeletion.Update();
dgvTrainings.Update(); 
```

我也尝试直接设置linklabels或datagridviwlinkcells，但问题仍然存在。

我不知道为什么这不起作用。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:47:01.523

要为每个单元格显示相同的链接文本，请将`UseColumnTextForLinkValue`属性设置为 true 并将`Text`属性设置为所需的链接文本。

```
DataGridViewLinkColumn dgvColDeletion = new DataGridViewLinkColumn();
dgvColDeletion.UseColumnTextForLinkValue = true;
dgvColDeletion.Text = "Delete"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T11:40:01.527

尝试这个。我希望这对你有帮助。

```
DataGridViewLinkColumn dgvColDeletion = new DataGridViewLinkColumn();  

dgvColDeletion.UseColumnTextForLinkValue = true;<br/>
                dgvColDeletion.Text = "Delete";<br/>
                dgvColDeletion.ActiveLinkColor = Color.White;<br/>
                dgvColDeletion.LinkBehavior = LinkBehavior.SystemDefault;<br/>
                dgvColDeletion.LinkColor = Color.Blue;<br/>
                dgvColDeletion.TrackVisitedState = true;<br/>
                dgvColDeletion.VisitedLinkColor = Color.YellowGreen;<br/>
                dgvColDeletion.Name = "Delete";<br/>
                dgvColDeletion.HeaderText = "Delete";<br/>
                if (grid_shared.Columns.Contains("Delete") == false)<br/>
                {<br/>
                    dgvColDeletion.Columns.Add(lnkDelete);<br/>
                    dgvColDeletion.Columns["Delete"].Width = 40;<br/>
                }<br/> 
```

快乐编码..:)

# objective-c - 尝试从框架内加载 nib 时找不到 nib 命名错误

> ID：12237880
> 
> 赞同：0
> 
> 时间：2012-09-02T16:47:25.673
> 
> 标签：objective-c, xcode, macos, frameworks

我有一个“主应用程序”和一个“辅助应用程序”（沙盒，如果重要的话）共享一个私有框架，包括一些资源、nib 文件、声音文件等。

该框架被两个应用程序调用和使用而没有问题。但是，在框架代码中，我有一个`NSViewController`加载一个包含在其资源文件夹中的 nib 文件。只要它被“主应用程序”调用，这似乎就可以工作。但是，对 Helper 应用程序（登录项）执行相同操作不起作用并失败并出现`"Unable to find nib named"`错误。

实际的“框架”被复制到主应用程序的“框架”目录中，我在帮助应用程序中使用 @rpath 来查找框架：`@executable_path/../../../../Frameworks`

这个设置似乎工作得很好，但是在运行时框架代码似乎试图在帮助应用程序的资源文件夹下而不是在框架的资源文件夹下找到命名的资源。我可以在 xcode 中设置一个设置或一些标志，以使框架始终查看框架的可执行文件/库的安装路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:14:03.030

似乎唯一的解决方案是将框架也复制到“Helper”应用程序中。如果框架只是指向放置在主应用程序内的实际框架的符号链接，则资源不会被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T18:36:18.703

您可以做的是使您的框架动态或共享，如此处所述[动态库编程主题](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/000-Introduction/Introduction.html)

虽然这是一个复杂的过程，但一个非常好的功能。

还有什么可以帮助你？
也许在 Xcode 的 Build Settings 下编辑 Library Search Paths 或 Framework Search Paths。您可以在此处指定要查找的其他搜索路径。

尽管如此，我不会将框架复制到主应用程序的目录中。我会将它留在磁盘上的一个位置，将它们添加到您的项目（主要和助手）并添加指定的搜索路径。

顺便说一句：你的框架是如何实现的？它是一个文件夹，是编译的，还是只是代码文件？

# c# - IEnumerable LINQ查询

> ID：12237885
> 
> 赞同：0
> 
> 时间：2012-09-02T16:47:43.893
> 
> 标签：c#, linq, process, ienumerable

在此代码中尝试按名称获取进程我如何添加第二个过滤器来查询

```
 IEnumerable<Process> processList =

                from p in Process.GetProcesses()
                where p.ProcessName.StartsWith("Mon") || p.ProcessName.StartsWith("Tue")
                select p; 
```

这是我尝试纠正的，上面的例子 dows 工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:49:50.393

```
IEnumerable<Process> processList = from p in Process.GetProcesses()
                where p.ProcessName.StartsWith("Mon") && p.Property == somethingElse && ...
                select p; 
```

只需添加 && 如果你想要 AND 条件或 || 如果你想要 OR 条件。

OP评论后编辑：

如果要访问 IEnumerable 的元素：

```
var element1 = processList.ElementAt(0); 
```

如果要遍历所有元素，可以使用 foreach。

```
 foreach (var i in processList)
    {
    Response.Write(i.ProcessName);
    //or if you're using a console application: Console.WriteLine(i.ProcessName);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:50:28.447

```
IEnumerable<Process> processList =
    from p in Process.GetProcesses()
    where p.ProcessName.StartsWith("Mon")
    where p.ProcessName.EndsWith("day")
    select p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T17:04:57.980

我的答案是在 OP 更正问题以演示扩展方法之后

```
IEnumerable<Process> processes = 
Process.GetProcesses()
.Where(p => p.ProcessName.StartsWith("Mon") || p.ProcessName.EndsWith("Tue")); 
```

# java - 整个文件的“ResourceBundle”？

> ID：12237886
> 
> 赞同：5
> 
> 时间：2012-09-02T16:47:46.207
> 
> 标签：java, resourcebundle

显然`ResourceBundle`需要在它找到的文件中使用类似语法的属性文件。

我们有一种情况，我们想使用整个文件（在我们的例子中是 HTML 文件）作为“值”。这意味着我们没有这样的密钥。好吧，也许文件名可以作为关键。

这是一个目录树：

```
src/
    main/
        resources/
            html/
                content.html
                content_de.html
                content_fr.html
                content_es.html
                order.html
                order_de.html
                order_fr.html
                order_es.html 
```

现在我们需要逻辑来根据当前语言环境找到正确的文件。如果当前语言环境是德语并且我正在寻找`html/content.html`文件，它应该找到`html/content_de.html`. 它不一定需要立即加载。Java中有一些现有的机制吗？我们需要手动执行此操作吗？

由于一些限制，我们目前计划不使用任何第三方库。因此，如果 Java 6 SE 中有可用的东西，那将是我们最好的选择；但是，如果您知道第三方库，请随意命名。

编辑#1：一个明显的解决方案是使用一个键`messages.properties`来命名该 HTML 文件。虽然这会起作用，但从长远来看，它可能会成为一件痛苦的事情（除此之外，我认为这不会解决我们所有的问题）。

编辑#2：我忘了说这是一个桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T20:58:55.723

为了表明我没有做任何事情，这里有两次尝试使用“我们自己”的方法：

第一次尝试使用 locale-postfix 构建并直接加载资源：

```
 public void attempt1(String baseName, String extension) {
    List<String> locales = buildLocaleStrings(Locale.getDefault());
    String resourceFound = null;

    for (String locale : locales) {
      String resourceName = baseName + locale + "." + extension;
      URL resource = getClass().getClassLoader().getResource(resourceName);
      if (resource != null) {
        resourceFound = resourceName;
        break;
      }
    }
    System.out.println("found #1: " + resourceFound);
  }

  private List<String> buildLocaleStrings(Locale localeBase) {
    String locale = "_" + localeBase;
    List<String> locales = new ArrayList<String>();

    while (locale.length() > 0) {
      locales.add(locale);
      locale = locale.replaceFirst("_[^_]*?$", "");
    }
    locales.add("");

    return locales;
  } 
```

第二次尝试“滥用”`ResourceBundle`及其`toString()`：

```
 public void attempt2(String baseName, final String extension) {
    ResourceBundle.Control control = new ResourceBundle.Control() {

      private String resourceFound = null;

      @Override
      public List<String> getFormats(String baseName) {
        return Arrays.asList(extension);
      }

      @Override
      public ResourceBundle newBundle(String baseName, Locale locale, String format, ClassLoader loader, boolean reload) throws IllegalAccessException, InstantiationException, IOException {
        String bundleName = toBundleName(baseName, locale);
        String resourceName = toResourceName(bundleName, format);

        if (loader.getResource(resourceName) != null) {
          resourceFound = resourceName;
          return new ResourceBundle() {

            @Override
            public Enumeration<String> getKeys() {
              return null;
            }

            @Override
            protected Object handleGetObject(String key) {
              return null;
            }

          };
        }
        return null;
      }

      @Override
      public String toString() {
        return resourceFound;
      }
    };

    ResourceBundle.getBundle(baseName, control);

    System.out.println("found #2: " + control.toString());
  } 
```

示例调用：

```
 public void proof() {
    attempt1("html/content", "html");
    attempt2("html/content", "html");
  } 
```

两者都找到相同的文件。

老实说，我都不喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:16:18.043

为了使这更理想，如果您的文件命名约定保持一致（即对于每个区域设置，您使用语言的两个字母前缀 - 意思是“en”表示英语，“fr”表示法语，“es”表示西班牙语），那么这个过程非常简单。

我们将使用[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)该类来读取属性，然后使用[`MessageFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html)从结果属性中格式化我们想要的适当语言环境。

首先，我们对属性文件进行更改——我们对其进行参数化，以便我们能够传入我们喜欢的任何内容。

```
content=content_{0}.html
order=order_{0}.html 
```

表示属性的`{0}`第一个参数。

现在，我们只需要加载属性，并传入适当的参数。

```
Properties prop = new Properties();
try {
    MessageFormat messageFormat = new MessageFormat("");
    String property;
    // change to suit the locale you wish to serve
    String[] param = {"en"};

    prop.load(new FileReader(new File("/full/path/to/property/file.properties")));
    property = prop.getProperty("content");
    messageFormat.applyPattern(property);
    System.out.println(messageFormat.format(param));
} catch(IOException ioex) {
    System.out.println("no property file here");
} 
```

这打印出来：

```
content_en.html 
```

在进行此调用之前确保您要访问的 HTML 文件存在，或者将其转换为返回的函数`String`，并确保文件在返回之前存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T19:33:45.293

我知道这是一个老问题，但我刚刚遇到了完全相同的问题，我找到了一个更优雅的解决方案。您需要将区域设置委托给标准 Java API 的文件映射，就像 API 解决键的翻译一样。因此，在您的示例中，如果当前语言环境是 fr_FR，您希望加载名为“content_fr.html”和“order_fr.html”的文件，对吗？

然后只需拥有一组资源包文件并指定一个变量以将当前语言环境转换为最接近的现有语言环境：

文件翻译.properties：

```
localeCode = 
```

文件translation_fr.properties：

```
localeCode = fr 
```

文件 translation_en.properties：

```
localeCode = en 
```

然后您只需要读取“localeCode”的值并将其与“content”和“.html”或“order”和“.html”连接起来。

# jquery - 带有 jquery tablesorter 的 Google App 脚本不起作用

> ID：12237887
> 
> 赞同：1
> 
> 时间：2012-09-02T16:47:51.147
> 
> 标签：jquery, google-apps-script, tablesorter

只是想知道我们是否可以在 Google App Script 中使用 jquery 插件？我尝试使用 jquery tablesorter 编写一个带有表的简单 html，但它不起作用。html 呈现样式，但表中没有 tablesorter 函数。当我单击标题时，它假设对表格进行排序，但单击每个标题时未执行任何操作。我将完全相同的代码复制并粘贴到 .html 中，并在我的 wampserver 上对其进行了测试，它可以工作。我的代码如下。请问有什么建议吗？

```
<html>

  <head>

    <link rel="stylesheet" href="http://tablesorter.com/themes/blue/style.css" type="text/css" media="print, projection, screen" />
    <script type="text/javascript"src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript" src="http://tablesorter.com/__jquery.tablesorter.min.js"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        $("#myTable").tablesorter();
      });
    </script>
  </head>

  <body>

<table id="myTable" class="tablesorter">
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>First Name</th> 
    <th>Email</th> 
    <th>Due</th> 
    <th>Web Site</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith</td> 
    <td>John</td> 
    <td>jsmith@gmail.com</td> 
    <td>$50.00</td> 
    <td>http://www.jsmith.com</td> 
</tr> 
<tr> 
    <td>Bach</td> 
    <td>Frank</td> 
    <td>fbach@yahoo.com</td> 
    <td>$50.00</td> 
    <td>http://www.frank.com</td> 
</tr> 
<tr> 
    <td>Doe</td> 
    <td>Jason</td> 
    <td>jdoe@hotmail.com</td> 
    <td>$100.00</td> 
    <td>http://www.jdoe.com</td> 
</tr> 
<tr> 
    <td>Conway</td> 
    <td>Tim</td> 
    <td>tconway@earthlink.net</td> 
    <td>$50.00</td> 
    <td>http://www.timconway.com</td> 
</tr> 
</tbody> 
</table> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:46:26.133

jQuery 插件有明确的限制，但 HtmlService 使用的 Caja 引擎可能会拒绝 JavaScript 库，如果它们使用不安全的操作。如评论中所述，使用[Caja Playground](http://caja.appspot.com/)查看您的 HTML 和 JavaScript 是否通过验证。

# javascript - 在 init function() 中调用 getElementById("....") 而不是想要用它做某事的函数

> ID：12237891
> 
> 赞同：1
> 
> 时间：2012-09-02T16:48:08.883
> 
> 标签：javascript, getelementbyid, init

在完成以下作业时出现了问题：创建 4 个`divs`当我单击`button`.

一切正常，但我的老师使用`init function`来获取`divs`通路`getElementById("div1")`，而我使用它`changeColorFunction()`本身，根本没有使用`init function`。见下文：

我的解决方案：

```
function changeColor () {

    document.getElementById("div1").style.background = createNewColor();
    document.getElementById("div2").style.background = createNewColor();
    document.getElementById("div3").style.background = createNewColor();
    document.getElementById("div4").style.background = createNewColor();

} 
```

我的老师解决方案：

```
 var d1,d2,d3,d4;

    function init(){

    d1 = document.getElementById("d1");
    d2 = document.getElementById("d2");
    d3 = document.getElementById("d3");
    d4 = document.getElementById("d4");
    }
window.onload = init; 
```

它只是一个关于获得`elements`. 有了这小段代码，我想差别不大，但什么时候有关系？

当这个项目增长时，用户是否会通过我的解决方案认识到浏览器总是必须先获得第`elements`一个才能运行代码？

希望你能跟上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:52:46.890

它几乎没有什么区别。旧浏览器上*可能*存在非常非常非常小的性能差异。您没有创建任何全局变量，这意味着如果您必须更改相同的其他内容，则`div`必须再次通过 ID 获取它。你教授的方法会让他只使用变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:54:32.847

实际上，不同之处在于您的老师有点“缓存” div。这意味着当他必须更改颜色时，他不必每次都使用 getElementById 搜索页面，因为他将它们保存在变量中。

在您的情况下，每次您想要更改 div 颜色时，您都将扫描页面以获取 div，即使您之前已经找到它们。

这可能会对大页面产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T16:58:56.617

如果您要`div`多次访问这些 s，则事先缓存它们可能会有所帮助，这就是您的老师正在做的事情。

也就是说，每次您想更改其样式时，使用更改缓存元素的 存储在变量中，然后从 DOM 树中获取它会***更快。***`style``DOM``getElementById`

然而，差异几乎可以忽略不计，但与往常一样，查看它的最佳方法是对其进行基准测试。我创建了一个[**jsperf.com**](http://jsperf.com)测试用例来说明它。您可以[**在此处查看**](http://jsperf.com/cachegetelementbyid)结果并使用它：

```
Testing in Chrome 21.0.1180.83 32-bit on Windows Server 2008 R2 / 7 64-bit
+-----------------------+------------------------------------------------+
| Test                  |  Ops/sec                                       |
+-----------------------+------------------------------------------------+
| Cached getElementById |  584,606 ±2.62% fastest                        |
+-----------------------+------------------------------------------------+
| getElementById        |  422,957 ±1.27% 27% slower                     |
+-----------------------+------------------------------------------------+ 
```

# java - 在 Django 中使用基于 Java 的 API

> ID：12237894
> 
> 赞同：2
> 
> 时间：2012-09-02T16:48:44.640
> 
> 标签：java, python, django, api

我正在使用 Django 创建网站，并希望将来自 Google Play 商店（Android 市场）的数据合并到其中。我考虑过手动抓取 Store，但它似乎是一个缓慢而乏味的过程，所以我决定考虑其他选项，即一个名为[android-market-api](http://code.google.com/p/android-market-api/)的开源 API 。

android-market-api 的问题在于它是用 Java 编写的，并且只有 Ruby/PHP 端口（不确定这到底是什么意思）。这是一个问题，因为我希望能够使用我现有的 Python 代码与 API 进行交互。我应该如何处理这个？

*   我应该尝试将现有代码翻译成 Python 吗？

*   我是否应该在 Python 中编写一些与 API“通信”并将其输出转换为 Python 代码的东西，以便我可以将结果用于我的其他应用程序？

*   我应该使用一些现有的中间语言/模块来让 Python 和 Java 代码无缝交互吗？

或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:36:30.243

GitHub 上似乎有一个 Python 端口：[android-market-api-py](https://github.com/liato/android-market-api-py)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:55:54.760

它在项目描述页面上说：

> 主要目标是 java，但它可以很容易地适应其他语言，因为它是基于 Google ProtoBuf 的。

因此，您可以告诉`protoc`为 Python 编译 protobuf，然后移植到高级 API。这样你就可以最好地控制你的 Python 端口了`android-market-api`。

# vim - VIM 上的 Sublime Text Editor 替代品的多级折叠和 Search Everything 功能？

> ID：12237910
> 
> 赞同：0
> 
> 时间：2012-09-02T16:51:22.847
> 
> 标签：vim, sublimetext2

多级折叠使您可以通过按热键将所有内容折叠起来。了解您的代码是很有用的，如下所示：http: [//o7.no/N72vMK](http://o7.no/N72vMK)

转到任何内容按 Alt+P。这使您可以快速转到任何文件的名称部分（“teshtm”将跳转到“test.html”），甚至可以转到文件中的任何函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:11:54.483

我很少使用 Sublime 文本（只尝试了很短的时间），但是“多级折叠”你可以通过`foldlevel`在 Vim 中折叠到某个特定来实现。

至于其他（转到文件）的事情，类似地，您可以通过使用`gf`函数来实现它，例如 CtrlP 插件。CtrlP 背后的想法源于 Mac 的 Textmate。我个人不使用它，但有些人喜欢这个原则并发誓......据我所见，对于那些喜欢这种导航的人来说，它的实现非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T20:32:35.970

**多级折叠**

使用`zM`and`zR`关闭和打开当前缓冲区中的所有折叠。这相当于 ST2 的“Fold all”和“Unfold All”。

用于`: set foldlevel=x`关闭关卡后的所有内容`x`。`:set fdl=0`会关闭一切，而`:set fdl=999`会打开一切。这相当于“Fold Level x”。

见`:help fold.txt`和`:help 'foldlevel'`。

至于所有内容，如果您认为输入过多，您可以为所有这些创建自定义映射。但是请注意，您可以使用`zm`and`zr`来增加和减少折叠级别。

**Alt+P（在 Linux 上为 Ctrl+P）**

我喜欢前面提到的用于打开文件、导航缓冲区、导航标签等的[CtrlP 。它设计得非常好并且直观。](http://www.vim.org/scripts/script.php?script_id=3736)有些人抱怨它在大型项目中缺乏速度……我的项目相对较小，所以我无法对此发表评论。

它比 ST2 的实现有一个相当大的优势：文件导航不限于当前项目。如果您在 ST2 中打开单个文件，则无法使用`Ctrl``P`（在 Linux 上）打开附近的文件：您必须打开文件夹或创建项目。或使用常规的“打开文件...”用户界面。在这里，“去任何地方”有点牵强。

以下是我使用 CtrlP 的方法：

```
,ffo<CR> open foo.txt
,bba<CR> jump to buffer bar.txt
,tba<CR> jump to function baz() in curent buffer
,Tfo<CR> jump to function foo() in project 
```

实际上有很多插件都在探索相同的想法：[Command-T](http://www.vim.org/scripts/script.php?script_id=3025)、[LustyExplorer](http://www.vim.org/scripts/script.php?script_id=1890)、[FuzzyFinder](http://www.vim.org/scripts/script.php?script_id=1984)等。一定要在加入`{pluginname}`潮流之前尝试所有这些插件。

请记住，Vim 的默认文件导航本身就相当不错：、、、…… `:e filename`< /p> `:e fi<Tab>``:e *na<Tab>`

# .net - C 或 .NET 程序员如何在他们的程序中存储和加载字符串？

> ID：12237913
> 
> 赞同：0
> 
> 时间：2012-09-02T16:51:40.547
> 
> 标签：.net, internationalization, c++-cli

去年我一直在做 PHP 和其他东西；我刚刚接触了一点 C 和 C++。

在我刚刚阅读的书中，所有字符串实际上都在代码中（我意识到这只是举例，但只是好奇）。

我的兴趣是——程序员是否有一种通用的方式来存储和显示字符串？.NET 是否有一些预定义的方式来执行此操作——就像 Android 在字符串文件中所做的那样？

（在 PHP 中，我将它们保存在所有 CSV 文件中，与代码完全分开。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:32:02.053

如果您询问如何在代码中存储字符串：使用预处理器，例如

string_literals.h

```
#define PATH_TO_FILE "/home/usr/filename"
/* and so on...*/ 
```

*.cpp 文件

```
#include "string_literals.h"

const char* path = PATH_TO_FILE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:40:49.510

您的问题并不完全清楚，但在 .NET 中，字符串的存储方式应该在资源文件 (.resx) 中。这就是本地化的方式。您可以查看[此链接](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T21:32:12.077

对于 C 和 C++，可以考虑使用 GNU[`gettext`](http://www.gnu.org/software/gettext)系统。 [POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/catgets.html)有一个相关的系统。基本上，它们提供存储在已知位置的文件，其中包含程序中字符串的本地化版本。在运行时，代码从适当的文件中收集正确版本的消息以供程序使用。

这些与 Windows 系统上的资源文件松散相关。

# winforms - 基本网站导航

> ID：12237922
> 
> 赞同：1
> 
> 时间：2012-09-02T16:53:19.900
> 
> 标签：winforms, web, navigation

我想制作一个程序，当给定用户名和密码列表时，它将转到一个网站，登录并与给定的每个用户名/密码组合的网站交互（单击几个按钮等）。

我想知道社区是否对从哪里开始（语言/平台）有任何建议？
我在网络编程方面经验很少，而且我的程序看起来很简单，不需要任何复杂的架构。我更愿意使用 Windows 窗体对其进行编程，因为我提供该程序的人也不会在任何与计算机相关的方面经验丰富。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:00:36.737

完成这项任务的最佳和简单的方法是使用 **PHP**语言的**CURL**库。您可以借助本[教程](http://net.tutsplus.com/tutorials/php/techniques-and-resources-for-mastering-curl/)页面。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:57:10.050

看看我关于[最简单的 MVC 的](http://www.ganymedes.be/index/blog/2)教程/博客。它有一个实时示例，您可以下载源代码，或者从示例中自己构建它。**

# algorithm - Sutherland-Hodgman 算法在 C 中的工作实现？

> ID：12237923
> 
> 赞同：1
> 
> 时间：2012-09-02T16:53:25.310
> 
> 标签：algorithm, geometry, 2d

我正在努力寻找一个好的 Sutherland–Hodgman 算法的有效实现，用于通过另一个多边形的边缘裁剪一个多边形。输入多边形始终是由四个点组成的四边形。

我能找到的**最好**的C 实现是[这个](http://rosettacode.org/wiki/Sutherland-Hodgman_polygon_clipping#C)看起来完美且速度极快的实现，但不幸的是，它在某些输入上崩溃，而且我不够聪明，无法确定算法中究竟出了什么问题（它适用于一些输入值和中断和其他人）。这是使其崩溃的四边形的一些值的示例：

```
vec_t c[] = {{400,400}, {200,200}, {400,200}, {200,400}};
vec_t s[] = {{300,300}, {100,100}, {300,100}, {100,300}};

poly_t clipper = {4, 0, c};
poly_t subject = {4, 0, s};

poly res = poly_clip(&subject, &clipper); 
```

**任何人都可以提出该算法的问题**或建议可以使用相同样式的输入（轮廓点）的更好的实现吗？C 是首选，但只要实现了所有步骤，我就可以使用任何实现（我将不得不用 C 重写它）。在渲染二维四边形时，我需要它来执行数学裁剪。

*在上面的例子中，输入四边形都是矩形，但实际上它们可以是任何凸四边形。输出可以是 3 到 8 点之间的任何值（上面的示例应该发出 4 点多边形）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T21:07:02.920

裁剪点必须定义一个凸多边形。您的观点似乎按照他们定义的数字 8 的顺序排列。尝试： vec_t c[] = {{400,400}, {400,200}, {200,200}, {200,400}};

见算法描述：[http ://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman](http://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T16:54:00.283

您的积分必须按逆时针顺序排列...

# libreoffice - 在 libreoffice writer 中删除边框

> ID：12237927
> 
> 赞同：9
> 
> 时间：2012-09-02T16:53:49.757
> 
> 标签：libreoffice

我创建了一个 LibreOffice Writer 文档，并从网页中复制了一些文本。

现在，每当我创建一个项目符号列表时，这些项目都有一个顶部和底部的黑色边框。

我可以使用格式 - 段落 - 边框 - 无删除边框，但边框只是跳转到下一个或上一个项目。

如何在不将整个文本写入新文档的情况下摆脱这种奇怪的现象？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-12-10T18:30:09.640

我知道这个线程已经死了，但是如果有人在尝试解决这个问题时偶然发现了这个线程，这是我的建议：

转到查看并从那里取消选中“文本边框”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-08T00:33:16.770

以上都不适合我。

起作用的是转到**Tools - Options**，然后单击“ **LibreOffice** ”旁边的“ **+** ” - 转到“ **Appearance** ”并单击它。

 ****在右侧白色框的顶部，取消选中“**文本边界**”-然后单击“确定**”**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:58:36.507

选择几个段落，包括具有烦人边框的段落。为所有添加底部边框。申请。重新打开边框对话框。单击删除所有图标并应用。你完成了：D（我希望。为我工作）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T15:52:44.397

尝试使用 Format-Page-Borders 然后选择无。而不是段落。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-07T23:18:48.163

标记有问题的部分，仅在左侧添加白色边框（或您可能使用的任何背景颜色），然后应用。为我删除了所有其他边框。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-08T16:19:42.857

此说明适用于 LibreOffice 5.1.5.2（在 Fedora 24 上测试）：

要删除文档中页面的边框（很可能是在 Microsoft Word 软件中创建的），请在主菜单上转到“格式”->“页面”，然后转到“边框”选项卡。您将看到以下屏幕：
[![在此处输入图像描述](../Images/1ec0cfe64b75923f367c03760e7a4082.png)](https://i.stack.imgur.com/SVEhR.png)

*Default*下对话框的左上角有四个方块。如图选择最左边的一个，然后按OK，所有的边框都会消失。****

# xcode - Cocoapods 试飞

> ID：12237928
> 
> 赞同：5
> 
> 时间：2012-09-02T16:53:54.250
> 
> 标签：xcode, linker, testflight, cocoapods

任何人都拥有可用于 Testflight 的 Ad Hoc 配置的 cocoapods？

我有同样的问题：[找不到 -lPods 的库，](https://stackoverflow.com/questions/9863836/library-not-found-for-lpods)但这个答案没有任何意义，而且文档稀少得离谱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:19:56.953

听起来您的项目可能正在寻找该`libPods.a`文件但找不到它。如果您构建 Pods 项目，该文件应该可以访问。

转到您的目标摘要并查看`Linked Frameworks and Libraries`是否`libPods.a`不存在或红色（丢失）尝试构建仅 pods 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T12:58:48.827

这可以通过在 [library not found for -lPods 中找到](https://stackoverflow.com/questions/9863836/library-not-found-for-lpods)一个答案来解决， 但 JIC 可以让您在尝试决定选择 31 个答案中的哪一个时省去一些心痛，试试这个可能很简单的解决方案。

1.  从列表中选择主项目（打开 .xcworkspace 文件时出现在项目导航器中）。
2.  选择产品 > 方案 > 编辑方案。
3.  在左侧窗格中选择“构建”项。
4.  选中“查找隐式依赖项”框。
5.  清洁和重建。

# django - django 多语言站点和子域

> ID：12237931
> 
> 赞同：4
> 
> 时间：2012-09-02T16:54:31.740
> 
> 标签：django, subdomain, multilingual

有没有办法用 django 和子域创建多语言站点？

我想要这个：

en.mysite.com -> 英文网站 it.mysite.com -> 意大利文网站

我听说过 localeurl 应用程序，但它主要用于像 /en/index.html 或 /it/index.html 这样的 url 路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:51:58.787

您可以使用[域框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/#getting-the-current-domain-for-full-urls)来获取当前域：

```
from django.contrib.sites.models import Site
domain = Site.objects.get_current().domain
language = domain.split('.')[0] 
```

或者从[HTTP_HOST META](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)获取：

```
domain = request.META['HTTP_HOST']
language = domain.split('.')[0] 
```

然后[激活](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.translation.activate)语言：

```
from django.utils import translation
translation.activate(language) 
```

您可以使用此代码编写自己的中间件。

# ios - CCMenuItem 背景颜色

> ID：12237937
> 
> 赞同：0
> 
> 时间：2012-09-02T16:55:37.060
> 
> 标签：ios, cocos2d-iphone, ccsprite, ccmenuitem

我正在使用[Cocosbutton](http://johnehartzog.com/2009/10/easy-to-create-buttons-with-cocos2d/)类来创建一个添加到场景中的按钮。这将创建一个 CCSprite，它被添加到 CCMenu 内的 CCMenuItem 中：

```
@interface CocosButtonItem : CCMenuItem {
... 
```

在init方法中，添加了背景：

```
 UIImage *bgImage = [UIImage imageWithContentsOfFile:@"buttonback.png"],
        back = [CCSprite spriteWithCGImage:bgImage.CGImage key:@"bgimage"];
        back.anchorPoint = ccp(0,0);
        self.contentSize = back.contentSize;

        CCLayerColor *bgFill = [CCLayerColor layerWithColor:ccc4(255.0, 255.0, 255.0, 255.0)];
        bgFill.contentSize = self.contentSize;
        bgFill.position = ccp(0,0);
        [self addChild:bgFill];

        back.color = ccc3(255,255,255);
        [self addChild:back]; // without this, I just get a whit layer (as intended) 
```

添加最后一行以将精灵添加到 CCMenuItem 后，我会得到黑色背景（见屏幕截图）。CCSprite 背景图像的来源是具有透明度的 8 位 .png，我无法弄清楚为什么我会看到这个黑色背景。

![CCMenuItem 中 CCSprite 周围的黑色背景](../Images/58f3ae04da42188761456a8dcdb25e14.png)

# ruby - gmail 和 parse_resource gems 之间的 Ruby 自动加载冲突

> ID：12237941
> 
> 赞同：2
> 
> 时间：2012-09-02T16:56:03.360
> 
> 标签：ruby, activerecord, gem, gmail, parse-platform

[早些时候](https://stackoverflow.com/questions/12231134/why-is-autoload-failing-to-load-files-for-gems#comment16393317_12231134)，我询问了 gmail gem 中的自动加载无法找到它想要加载的文件。在构建最小脚本时，我发现 gmail gem 在我不包含 parse_resource gem 时加载了它的文件。

[gmail gem](https://github.com/nu7hatch/gmail)允许您从gmail 访问您的电子邮件、标签和收件箱。[parse_resource gem](https://github.com/adelevie/parse_resource)将[parse.com](http://parse.com/) api包装在 ActiveRecord 模式中。

如果我在 gmail gem*之前*包含 parse_resource gem ，ruby 会抛出 LoadError。

这些是我编写的最小脚本的排列，按错误组织。

# 加载错误

```
require 'rubygems'
require 'parse_resource' 
require 'gmail'

Gmail.new('yourEmail@gmail.com', 'password') 
```

# 工作正常

```
require 'rubygems'
#require 'parse_resource'
require 'gmail'

Gmail.new('yourEmail@gmail.com', 'password') 
```

# 自动加载错误

```
require 'rubygems'
require 'gmail'
require 'parse_resource' 

Gmail.new('yourEmail@gmail.com', 'password') 
```

`/Library/Ruby/Gems/1.8/gems/gmail-0.4.0/lib/gmail.rb:50:in 'new': no such file to load -- gmail/client (LoadError) from emailError.rb:6`

如何在我的程序中同时包含 parse_resource 和 gmail gem？

-缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:17:01.123

我已经用 bundler 安装了 gems。

为了解决加载这两个库的问题，我使用 gem 命令安装了 gem： `sudo gem install gmail parse_resource`

完成此操作后，我能够以任何顺序要求这些库，并且可以毫无问题地连接到 gmail 和解析。

-缺口

# apache-flex - adobe flex 空气通话罐

> ID：12237943
> 
> 赞同：0
> 
> 时间：2012-09-02T16:56:18.723
> 
> 标签：apache-flex, air, jar, adobe, call

我们有一个可以从命令行运行的可执行 jar 文件，它会持续运行以执行一些与文件相关的任务。

```
java -jar 'fileTester.jar' 'params' 
```

我们还有一个 Adob​​e AIR 客户端，它需要启动这个 jar 命令。我们如何从 Flex 调用 jar 文件命令？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:17:36.953

我认为您需要的功能称为 NativeProcess。这里有一些关于它的文档：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html)

[http://www.seriousmagic.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html](http://www.seriousmagic.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html)

[http://www.adobe.com/devnet/air/flex/articles/air_screenrecording.html](http://www.adobe.com/devnet/air/flex/articles/air_screenrecording.html)

# playframework - AngularJS 和 Playframework 集成

> ID：12237945
> 
> 赞同：2
> 
> 时间：2012-09-02T16:56:59.383
> 
> 标签：playframework, jasmine, angularjs

我试图弄清楚集成我的 AngularJS 和 Play 框架项目的最佳方式是什么，以便将它们分别打包为前端和后端。

我发现这篇[博客文章](http://basav.github.com/blog/Angular-JS-Phonecat-example-with-Play-Framework/)谈论的是完全相同的问题，但我的略有不同，因为我使用的是 Play 框架 1.2.5 而不是 2.0，因此我无法控制资产文件夹：

> `GET /assets/*file controllers.Assets.at(path="/public", file)`

没有明显/有效的区别，因为这家伙暴露了很多不属于他的应用程序的文件，/public 下的文件与 javascripts/、images/ 和 stylesheets/ 不同。这就是我想要避免的，在生产中公开这些文件或者在部署到生产之前必须删除它们。

值得一提的是，与javascripts/、images/和stylesheets/不同的/public下的文件是AngularJS文件/文件夹，主要与测试相关。AngularJS 在内部使用 Jasmine 进行测试（这是我读过的），因此这些文件是伪装成 AngularJS 文件的 Jasmine 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:41:38.970

自从我使用 Play 1.2.x 以来已经有一段时间了，但是您应该能够通过条件在路线文件中将它们从生产中隐藏。就像是：

```
%{ if(Play.isProd() }%

    GET     /your-path-#1            404
    GET     /your-path-#2            404

%{ } else { }%
    GET     /your-path-#1            real path to file
%{ } }% 
```

请注意，语法可能是错误的，已经很长时间了，但这就是想法:)

# c++ - 无法交换值

> ID：12237946
> 
> 赞同：8
> 
> 时间：2012-09-02T16:57:03.623
> 
> 标签：c++, c, visual-studio-2010, assembly

在下面的代码中，两种情况下的输出都保持不变，感谢您指出我缺少什么：-

```
Before Swap:-
a=10     b=512
After Swap:-
a=10     b=512 
```

以下是代码，它编译并运行没有任何问题： -

```
#include <stdio.h>
int swap(int* x, int* y)
{
    if(x != y)
    {
        _asm
        {
            mov eax,[x]; x into eax
            mov ebx,[y]
            mov [x],ebx;swapping now
            mov [y],eax
        }
    }
    return 0;
}

int main () {
  int a=10,b=512;
  printf("Before Swap:- \na=%d\t b=%d\n",a,b);
  swap(&a,&b); 
  printf("After Swap:- \na=%d\t b=%d",a,b);//Value remains same
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:59:33.980

汇编块内的变量没有间接性不起作用。而是在寄存器中获取地址，然后只尝试间接性。它宁愿闯入类似的东西`mov eax, DWORD PTR _x$[ebp]`

```
#include <stdio.h>
int swap(int* x, int* y)
{
    if(x != y)
    {
        _asm
        {
            mov eax,x
            mov ebx,y
            mov ecx,[ebx]
            xchg ecx,[eax]
            xchg [ebx],ecx
        }
    }
    return 0;
}

int main () {
  int a=10,b=512;
  printf("Before Swap:- \na=%d\t b=%d\n",a,b);
  swap(&a,&b);
  printf("After Swap:- \na=%d\t b=%d",a,b);
  getchar();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-02T17:30:18.150

您可以使用 Xor 操作进行交换 -

```
void swap(int *x, int *y)
{
     *x = *x ^ *y; /* #1 */
     *y = *x ^ *y; /* #2 */
     *x = *x ^ *y; /* #3 */
} 
```

# c++ - 10341 - 解决它WA

> ID：12237950
> 
> 赞同：0
> 
> 时间：2012-09-02T16:57:24.860
> 
> 标签：c++, visual-studio-2010, algorithm, visual-c++

我正在从 ACM Uva 网页上解决这个问题，并且我已经尝试了来自论坛的每一个输入，并且效果很好。它一直给我“错误的答案”，而且由于我不是说英语的人，也许我忘记了一些东西。也许这里有人提交了这个解决方案。这是我从这个问题中提交的第 5 次提交，而且总是错误的。非常感谢。编辑：

求解方程：

> > p*ex + q*sin(x) + r*cos(x) + s*tan(x) + t*x2 + u = 0
> > 
> > 其中 0 <= x <= 1。

输入

输入由多个测试用例组成，并由 EOF 终止。每个测试用例在一行中包含 6 个整数：p、q、r、s、t 和 u（其中 0 <= p,r <= 20 和 -20 <= q,s,t <= 0）。输入文件中最多有 2100 行。

输出

对于每组输入，应该有一行包含 x 的值，正确至小数点后 4 位，或字符串“No solution”，以适用者为准。

```
#include <math.h>
#include <stdio.h>
#define eps 0.00001

int p, q, r,s,t,u;

long double fdex(long double x)
{
long double res=p*exp(-x)+ q*sin(x)+r*cos(x)+s*tan(x)+t*x*x+u;

return res;

}

int main()
{
freopen("input.txt","rt",stdin);
freopen("output.txt","wt",stdout);

long double x,inf,sup,fx;
while(scanf("%d %d %d %d %d %d\n",&p, &q, &r,&s,&t,&u)!=EOF)
{
    long double x1;
    inf=0.0;
    sup=1.0;
    if (p==0 && q==0 && r==0 && s==0 && t==0)
    printf("0.0000\n");
    else if((fdex(inf)*fdex(sup)>0.0))
    printf("No solution\n");

        else 
        {

                do
                {
                    x=(inf+sup)/2.0;
                    fx=fdex(x);
                        if(fx>eps)
                        {
                        inf=x;
                        }
                        else if(fx<-eps)
                        {
                        sup=x;

                        }

                }while( fx<-eps || fx>eps);
                printf("%.4llf\n",x);

        }
}

} 
```

[问题](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=1282)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:35:47.137

要尝试/考虑的一些事情：

1.  `printf("%.4llf\n",x);`会将答案**四舍五入**到小数点后 4 位，因此`1.23456`将变为`1.2346`. 如果这是您期望做的事情，问题尚不清楚 - 它可能需要前 4 位小数而不四舍五入；
2.  jrok在评论中说[：](https://stackoverflow.com/users/947836/jrok)

    > 如果输出需要成行输入，那么像输入末尾多余的空行这样愚蠢的东西可以使您在 Uva 上提交 WA。例如 for (int i = 0; i < ARRAYSIZE; ++i) cout << arr[i] << '\n'; 可能不起作用。您需要额外检查以在最后一行之后不打印 '\n'。愚蠢的IMO，但事实就是这样......

    就我个人而言，我从未在 UVA 上经历过这种情况，但我在那里不是很活跃，所以你可能想检查一下。

3.  不要使用`scanf(..) != EOF`. `scanf`返回成功读取值的数量，所以你应该这样做`scanf(...) == 6`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:18:28.670

使 eps 变小有帮助吗？

我担心使用当前的 0.00001 可能无法完全准确地找到根以正确到 4 个有效数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:50:47.707

一种可能性是您忘记了 p=q=r=s=t=0，但 u != 0 的情况。

此外，long double 的 printf 修饰符是 L，而不是 ll。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T22:51:46.293

错误在于：

```
else if((fdex(inf)*fdex(sup)>0.0))
    printf("No solution\n"); 
```

我相信这个 fn 正在减少，所以替换将是：

```
x = sup;
else if((fdex(x)>0.0)&& (x==1))
    printf("No solution\n"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T22:36:57.610

您将 x 上的二进制搜索（超过 10,000 个可能值：0.0000 到 1.0000）与 f(x) 上的二进制搜索混淆了：仅仅因为 f(x) 非常接近 0 并不意味着 f(x + 0.0001) 是不接近 0。

# mysql - 给其他表中的行相同的值

> ID：12237951
> 
> 赞同：1
> 
> 时间：2012-09-02T16:57:30.663
> 
> 标签：mysql

我正在尝试将现有数据库迁移到另一个数据库。问题如下：

我有 2 张桌子：

1.）hhhhhhhhyhhjhjhhhhhh，行是：

```
relatie_id,
tempvar 
```

2.) op_clienten_communicatie，行是：

```
Nummer,
Volledige naam,
Volledig adres,
Postcode,
Plaats,
Communicatiemiddel,
Nummer/Adres,
tempvar 
```

当我执行查询时；

```
UPDATE op_clienten_communicatie, hhhhhhhhyhhjhjhhhhhh
SET op_clienten_communicatie.Nummer = hhhhhhhhyhhjhjhhhhhh.relatie_id
WHERE op_clienten_communicatie.tempvar = hhhhhhhhyhhjhjhhhhhh.tempvar 
```

我只`op_clienten_communicatie.Nummer`从`hhhhhhhhyhhjhjhhhhhh.relatie_id`

我正在寻找的结果是所有行都`op_clienten_communicatie.Nummer`应该使用来自`hhhhhhhhyhhjhjhhhhhh.relatie_id`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:30:55.583

表`hhhhhhhhyhhjhjhhhhhh`和的基数是`op_clienten_communicatie`多少？是吗`one-to-many`？`many-to-many`

如果`one to many`

```
UPDATE op_clienten_communicatie a 
           INNER JOIN hhhhhhhhyhhjhjhhhhhh b
              on a.tempvar = b.tempvar
SET a.Nummer = b.relatie_id 
```

但是如果是多对多，你怎么知道哪个`tempvar`会加入呢？

*PS：请改一下表名，听起来有点怪*

# python - 将稀疏数组中的元素与矩阵中的行相乘

> ID：12237954
> 
> 赞同：7
> 
> 时间：2012-09-02T16:57:55.233
> 
> 标签：python, matrix, numpy, scipy, sparse-matrix

如果你有一个稀疏矩阵 X：

```
>> X = csr_matrix([[0,2,0,2],[0,2,0,1]])
>> print type(X)    
>> print X.todense()    
<class 'scipy.sparse.csr.csr_matrix'>
[[0 2 0 2]
 [0 2 0 1]] 
```

和一个矩阵 Y：

```
>> print type(Y)
>> print text_scores
<class 'numpy.matrixlib.defmatrix.matrix'>
[[8]
 [5]] 
```

...如何将 X 的每个元素乘以 Y 的行。例如：

```
[[0*8 2*8 0*8 2*8]
 [0*5 2*5 0*5 1*5]] 
```

或者：

```
[[0 16 0 16]
 [0 10 0 5]] 
```

我已经厌倦了这个，但显然它不起作用，因为尺寸不匹配： `Z = X.data * Y`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T17:22:24.450

不幸的是，`.multiply`如果另一个矩阵是密集的，则 CSR 矩阵的方法似乎会使矩阵密集。所以这将是避免这种情况的一种方法：

```
# Assuming that Y is 1D, might need to do Y = Y.A.ravel() or such...

# just to make the point that this works only with CSR:
if not isinstance(X, scipy.sparse.csr_matrix):
    raise ValueError('Matrix must be CSR.')

Z = X.copy()
# simply repeat each value in Y by the number of nnz elements in each row: 
Z.data *= Y.repeat(np.diff(Z.indptr)) 
```

这确实会创建一些临时变量，但至少是完全矢量化的，并且不会使稀疏矩阵变密。

* * *

对于 COO 矩阵，等价于：

```
Z.data *= Y[Z.row] # you can use np.take which is faster then indexing. 
```

对于 CSC 矩阵，等效值为：

```
Z.data *= Y[Z.indices] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-22T17:01:42.147

我用来执行逐行（或逐列）乘法的方法是使用矩阵乘法，左侧有对角矩阵（右侧）：

```
import numpy as np
import scipy.sparse as sp

X = sp.csr_matrix([[0,2,0,2],
                   [0,2,0,1]])
Y = np.array([8, 5])

D = sp.diags(Y) # produces a diagonal matrix which entries are the values of Y
Z = D.dot(X) # performs D @ X, multiplication on the left for row-wise action 
```

保留稀疏性（以 CSR 格式）：

```
print(type(Z))
>>> <class 'scipy.sparse.csr.csr_matrix'> 
```

并且输出也是正确的：

```
print(Z.toarray()) # Z is still sparse and gives the right output
>>> print(Z.toarray()) # Z is still sparse and gives the right output
[[ 0\. 16\.  0\. 16.]
 [ 0\. 10\.  0\.  5.]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-05T17:37:23.353

我有同样的问题。就我个人而言，我没有找到`scipy.sparse`非常有用的文档，也没有找到直接处理它的函数。所以我试着自己写，这为我解决了：

```
Z = X.copy()
for row_y_idx in range(Y.shape[0]):
    Z.data[Z.indptr[row_y_idx]:Z.indptr[row_y_idx+1]] *= Y[row_y_idx, 0] 
```

`Y`这个想法是：对于第 -th位置的每个元素`row_y_idx`，执行与`row_y_idx`第 -th 行的标量乘法`X`。[有关在此处](https://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_(CSR,_CRS_or_Yale_format))访问 CSR 矩阵中的元素的更多信息（其中`data`is `A`，`IA`is `indptr`）。

给定`X`并`Y`按照您的定义：

```
import numpy as np
import scipy.sparse as sps

X = sps.csr_matrix([[0,2,0,2],[0,2,0,1]])
Y = np.matrix([[8], [5]])

Z = X.copy()
for row_y_idx in range(Y.shape[0]):
    Z.data[Z.indptr[row_y_idx]:Z.indptr[row_y_idx+1]] *= Y[row_y_idx, 0]

print(type(Z))
print(Z.todense()) 
```

输出与您的相同：

```
<class 'scipy.sparse.csr.csr_matrix'>
 [[ 0 16  0 16]
  [ 0 10  0  5]] 
```

# mongodb - 如何在 Dreamhost VPS 上使用 MongoVUE？

> ID：12237955
> 
> 赞同：0
> 
> 时间：2012-09-02T16:57:56.657
> 
> 标签：mongodb, dreamhost

我联系了 Dreamhost 支持，但他们拒绝帮助设置第三方软件。而且，官方用户论坛的流量很少：我在论坛上问了3次支持问题，每次都得到0回复。

**问题**

我正在尝试在我的 Dreamhost VPS 上连接到 MongoDB。我在 MongoVUE 中为条目“服务器”输入什么？我必须设置 SSH 隧道吗？

是否有更简单的替代方法来为 MongoDB 提供 GUI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:46:02.943

MongoVUE（或任何其他[管理 UI](http://www.mongodb.org/display/DOCS/Admin+UIs)）通过 MongoDB 服务器端口连接，默认情况下为 27017。假设您没有防火墙或[`bind_ip`](http://www.mongodb.org/display/DOCS/File+Based+Configuration)配置限制阻止访问 MongoDB 端口，您应该能够使用您的直接从 MongoVUE 连接服务器名称作为主机。

使用带有端口转发的 SSH 隧道进行连接比直接使用数据库服务器端口要*好得多。*

限制访问的其他选项包括：

*   [防火墙限制](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-SecuringtheNetwork).. 理想情况下，您的家庭或远程网络有一个固定 IP 地址，可用于限制访问

*   [用户身份验证](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-RunninginSecureMode%28with%5Cauthor%5CkeyFile%29).. 限制每个数据库的访问（只读或读/写）

*   [您可以安装其中一个基于 Web 的管理 UI，例如RockMongo](http://code.google.com/p/rock-php/wiki/rock_mongo)，而不是使用像 MongoVUE 这样的桌面 UI 。在这种情况下，您可以在与 localhost:27017 对话的服务器上配置管理 UI，而不必打开对 MongoDB 服务器的外部访问。为了提高安全性，您可以使用标准 Web 服务器控件，例如密码验证和 SSL。

> 是否有更简单的替代方法来为 MongoDB 提供 GUI？

[`mongo`熟悉交互式 shell](http://www.mongodb.org/display/DOCS/mongo+-+The+Interactive+Shell)是值得的。您可以在 shell 中使用一些功能，例如 JavaScript 函数，这些功能在管理 UI 中可能不可用。作为奖励，您还将了解更多有关对开发人员有帮助的语法和查询的知识。不过，这确实取决于您对使用命令行界面有一定的舒适度。

# iphone - 用块简化委托方案 - 在这种情况下可能吗？

> ID：12237958
> 
> 赞同：4
> 
> 时间：2012-09-02T16:58:10.050
> 
> 标签：iphone, ios, block

我已经阅读了很多关于使用块的积极内容——特别是它通过消除委托调用来简化代码。我发现了在动画结束时使用块而不是委托调用的示例 - 我了解它是如何完成的。

但我真的很想知道在呈现和关闭视图控制器时必须使用委托的繁琐方案是否也可以通过块来简化。

显示和解除方案的标准推荐方法如下所示，其中在 VC1 中呈现一个新的 VC2，该新 VC2 再次被 VC1 中的代表解除。

```
 VC2 *vc2 = [[VC2 alloc] initWithNibName:@"VC2" bundle:nil ];
  vc2.delegate = self; 
  [self presentModalViewController: vc2 animated: YES]; // or however you present your VC2 
```

Withis VC2 返回 vc1：

```
[self.delegate vc2HasFinished]; 
```

为此，必须创建一个像这样的协议：在`VC2Protocol.h`文件中

```
 @protocol VC2Protocol <NSObject>
    -(void)vc2HasFinished;
    @end 
```

然后将其包含 `VC2Protocol.h`在 VC1 和 VC2 中。在 VC1 中，必须像这样定义这个方法：

```
-(void) weitereRufNrVCDidFinish{
    [self dismissModalViewControllerAnimated:YES completion: nil];

} 
```

如果可以编写更简洁的代码，避免为此而声明协议，那将是非常好的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T17:48:42.777

对于解除模态呈现的 vc 的情况，请注意 vc 可以自行解除。因此，`[self.delegate vc2HasFinished];`您可以`[self dismissModalViewControllerAnimated:YES completion: nil];`在 vc2.

但我同意你的观点，即块有用而委托很笨拙（而且更容易出错，尤其是在 ARC 之前）。所以这里是你如何在 vc 中替换委托回调的方法。让我们发明一种情况，VC 想要告诉它委托某些东西，例如，它只是获取了一个图像......

```
// vc2.h
@property (nonatomic, copy) void (^whenYouFetchAnImage)(UIImage *);
// note, no delegate property here

// vc2.m
// with your other synthesizes
@synthesize whenYouFetchAnImage=_whenYouFetchAnImage;

// when the image is fetched
self.whenYouFetchAnImage(theFetchedImage); 
```

呈现的 vc 没有设置委托，但它确实为新 vc 提供了一些代码以在获取图像时运行（在它自己的执行上下文中）......

```
// presenting vc.m
VC2 *vc2 = [[VC2 alloc] initWithNibName:@"VC2" bundle:nil];

// say this presenting vc has an image view that will show the image fetched
// by vc2\.  (not totally plausible since this image view will probably be covered by vc2
// when the block is invoked)
vc2.whenYouFetchAnImage = ^(UIImage *image) { self.myImageView.image = image; }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T17:47:50.593

块可以用作 VC2 上的属性/变量，因此您可以拥有一个完成块，VC1 将其设置为它想要的任何内容，并且`completionBlock();`一旦完成，VC2 就可以调用它。

基本上：

```
typedef void (^VC2CompletionBlock)(void);
@interface VC2 : UIViewController {
     VC2CompletionBlock completionBlock;
}

@property (nonatomic, copy) VC2CompletionBlock completionBlock;

@end 
```

然后在 VC2.m 的某个地方你可以调用

```
...
self.completionBlock();
... 
```

对你的块进行类型定义允许你创建一种新的自定义类型的块，可能是一个带有返回值或其他参数的块，然后可以通过 VC2 传递给块

```
typedef void (^VC2CompletionBlock)(BOOL success, NSData data); 
```

我希望这会有所帮助，使用块是强大的，因为对象本身只需要知道块的基本结构（即它能够接受的参数），它不需要任何关于块或谁创建它的信息。

但请注意，块可能会导致奇怪的内存问题，因此请务必阅读有关它们的合适文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T18:43:45.723

您可以以一般方式解决此问题，而无需在所有控制器中创建特定的块 iVar。您可以创建一个提供“完成时”块处理的类，然后从它继承，您的视图控制器都将具有“完成时”的能力。您可以只设置属性或提供“方便”方法。

请注意，第一部分的原始代码刚刚损坏，所以我更改了它。——呃。多么尴尬。无论如何，你明白了（如果你是一个厌恶联想的人，我只建议这样做）。

```
// Use this as a base class for your view controllers...
typedef void(^WhenDoneWithViewControllerBlock)(
    UIViewController *viewController,
    BOOL canceled);
@interface BlockDismissingViewController : UIViewController
@property (nonatomic, strong) WhenDoneWithViewControllerBlock whenDone;
- (void)done:(BOOL)canceled;
@end

@implementation BlockDismissingViewController
- (void)done:(BOOL)canceled {
    if (self.whenDone) {
        self.whenDone(self, canceled);
    }
}
@end

// The "convenience" method should probably be something like this...
@implementation UIViewController (BlockDismissingViewController)
- (void)presentViewController:(BlockDismissingViewController *)viewControllerToPresent
                     animated:(BOOL)flag
                   completion:(void (^)(void))completion
                     whenDone:(WhenDoneWithViewControllerBlock)whenDone {
    viewControllerToPresent.whenDone = whenDone;
    [self presentViewController:viewControllerToPresent
                        animated:flag
                      completion:completion];
}
@end 
```

或者，您可以将其作为 UIViewController 上的一个类别，现在您的所有视图控制器都将获得此功能。您可以使用通知中心来调用适当的块...

```
@interface UIViewController (WhenDoneWithViewControllerBlock)
- (void)done:(BOOL)canceled;
@end

@implementation UIViewController (WhenDoneWithViewControllerBlock)
- (void)presentViewController:(UIViewController *)viewControllerToPresent
                     animated:(BOOL)flag
                   completion:(void (^)(void))completion
                     whenDone:(WhenDoneWithViewControllerBlock)doneBlock {
    if (doneBlock) {
        __block id observer = [[NSNotificationCenter defaultCenter]
                               addObserverForName:@"DoneWithViewControllerNotification"
                               object:viewControllerToPresent
                               queue:nil
                               usingBlock:^(NSNotification *note) {
            [[NSNotificationCenter defaultCenter] removeObserver:observer];
            doneBlock(viewControllerToPresent, [[note.userInfo objectForKey:@"canceled"] boolValue]);
        }];
    }
    [self presentViewController:viewControllerToPresent
                       animated:flag
                     completion:completion];
}

- (void)done:(BOOL)canceled {
    [[NSNotificationCenter defaultCenter]
        postNotificationName:@"DoneWithViewControllerNotification"
                      object:self
                    userInfo:@{ @"canceled" : @(canceled) }];
}
@end 
```

或者，如果您仍然想要一个类别，但想要一个 iVar 并绕过通知中心......

```
// Using associated objects in a category
@interface UIViewController (WhenDoneWithViewControllerBlock)
@property (nonatomic, strong) WhenDoneWithViewControllerBlock whenDone;
- (void)done:(BOOL)canceled;
@end
@implementation UIViewController (WhenDoneWithViewControllerBlock)
char const kWhenDoneKey[1];
- (WhenDoneWithViewControllerBlock)whenDone {
    return objc_getAssociatedObject(self, kWhenDoneKey);
}
- (void)setWhenDone:(WhenDoneWithViewControllerBlock)whenDone {
    objc_setAssociatedObject(self, kWhenDoneKey, whenDone, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
- (void)presentViewController:(UIViewController *)viewControllerToPresent
                     animated:(BOOL)flag
                   completion:(void (^)(void))completion
                     whenDone:(WhenDoneWithViewControllerBlock)whenDone {
    viewControllerToPresent.whenDone = whenDone;
    [self presentViewController:viewControllerToPresent animated:flag completion:completion];
}

- (void)done:(BOOL)canceled {
    if (self.whenDone) {
        self.whenDone(self, canceled);
    }
}
@end 
```

当然，这些只是示例，但希望您能理解。

当你的视图控制器完成后，它只是调用

```
[self done:canceledOrSuccess]; 
```

并且该块将被调用。

使用最后一个类别是我最喜欢的，尽管关联对象在时间和内存上都有性能成本。您可以获得保存“whenDone”块的“iVar”的便利（您可以显式设置它），并且您可以获得用于呈现的“convenience”方法，并且每个视图控制器都会自动获得此功能，只需添加类别即可。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-02T17:01:14.907

关闭视图控制器的推荐方法是dismissViewControllerAnimated:completion。所以这是你在寻找的街区。

# java - 获取常量的值

> ID：12237959
> 
> 赞同：0
> 
> 时间：2012-09-02T16:58:22.467
> 
> 标签：java

我有一个 Java EE 项目，其中我有很多函数调用正在接收一个字符串，并且这个字符串存储在一个不一定在同一个文件中定义的常量中，它有时在一个单独的常量类中定义。我需要检查项目中的所有类并检索这些常量的值。这样做的聪明方法是什么？我考虑过使用反射并加载项目中的每个类（几百个），但我不确定这是最好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:40:23.797

> 我需要检查项目中的所有类并检索这些常量的值。

您极不可能需要这样做。您创建的 String 将是`equals()`现有常量，您不应假设它必须是同一个对象。您不应该使用`==`字符串，因为这是不好的做法。

但是要从字面上回答您的问题，您可以调用它，`String.intern()`这将为您提供任何现有 String 常量的 String 引用。（或者相同的参考，如果它还没有被定义为这样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:02:04.330

因为您知道常量的所有名称并且它们在一个类（常量类）中，所以我建议只使用该类。如果常量都在一个类中，则不需要遍历所有其他类。

您可以做的是将参数设置为等于常量名称并使用反射查看常量类（并且仅该类）以获取名称与参数匹配的所有常量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T17:50:09.873

我不确定我是否完全理解，但基于您知道常量在哪里及其名称的事实，您可以静态导入所有常量类并使用这些值做任何您想做的事情：

```
public class Constants1 {
    public static final String A = "A";
    public static final String B = "B";
}
public class Constants12 {
    public static final String C = "C";
} 
```

导入常量：

```
import static constants.Constants1.*;
import static constants.Constants2.*;

public class ConstantsProcessor {

    static String[] constants = {A,B,C};

} 
```

# vb.net - 如何在VB中创建一个列表文件？

> ID：12237960
> 
> 赞同：0
> 
> 时间：2012-09-02T16:58:25.320
> 
> 标签：vb.net, file

> **可能重复：**
> [获取 vb.net 目录中所有文件的列表](https://stackoverflow.com/questions/1457525/get-a-list-of-all-files-inside-of-a-directory-in-vb-net)

我需要在网络驱动器中搜索许多文件。XP下的Window explorer里一一使用搜索功能很慢。我的计划是创建一个 VB 程序，首先以字符串格式生成可用文件的完整列表，然后在列表中使用字符串搜索功能。我的问题是如何使用 VB 创建目录列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:14:40.963

请参阅[MSDN：`Directory.GetFiles()`](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx#Y0)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:19:44.667

有人回答了我在这里找到的一个有点类似的问题，请在此处[输入链接描述](https://stackoverflow.com/questions/2428136/get-all-folder-directories-list-in-vb-net) 我可能会建议尝试使用 contains 方法检查项目是否包含字符串，然后将其添加到第二个列表以包含可能的匹配项。就像是

 `````
Imports System
Imports System.IO
Public Function GetFileMatches(byval searchText as string) as list(of string)

Dim fileMatches as new list(of string)

for each directory in GetDirectories("c:\", "*")
       for each file in GetFiles(directory,"*")
          if file.contains(searchText) then fileMatches.add(file)
       next

next

return fileMatches
End Function 
````  `可能也可以应用一些线程来加速它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T17:09:34.107

您可以为此使用 FileSystemObject。

你可以参考[链接](http://msdn.microsoft.com/en-us/library/zfk1t850%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T17:23:14.653

你甚至不需要使用VB，只要做

```
dir *.* /s > filelist.txt 
```

它会将目录列表输出到文件filelist.txt，您可以在记事本中打开它。``

# javascript - Google AnnotatedTimeLine：“错误：容器宽度为零。应为有效宽度。”

> ID：12237965
> 
> 赞同：4
> 
> 时间：2012-09-02T16:59:14.907
> 
> 标签：javascript, css, google-visualization

我需要绘制`google.visualization.AnnotatedTimeLine`一个`<div id="visualization" style="width: 800px; height: 400px; display: none;"></div>`div。Google 使用 div 的宽度和高度来确定可视化的大小。不幸的是，谷歌无法获得宽度或高度，因为我正在向**显示器绘图：无；**div，因此我得到一个**错误：容器宽度为零。期望一个有效的宽度。**错误。

我唯一能想到的就是绘制到一个**显示器上：block;** div 然后隐藏 div，但这样做看起来有点奇怪，因为图表会显示一瞬间。还有其他选择吗？

重现的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Google Visualization API Sample</title>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load('visualization', '1', {packages: ['annotatedtimeline']});
    function drawVisualization() {
      var data = new google.visualization.DataTable();
      data.addColumn('date', 'Date');
      data.addColumn('number', 'Sold Pencils');
      data.addColumn('string', 'title1');
      data.addColumn('string', 'text1');
      data.addColumn('number', 'Sold Pens');
      data.addColumn('string', 'title2');
      data.addColumn('string', 'text2');
      data.addRows([
        [new Date(2008, 1 ,1), 30000, null, null, 40645, null, null],
        [new Date(2008, 1 ,2), 14045, null, null, 20374, null, null],
        [new Date(2008, 1 ,3), 55022, null, null, 50766, null, null],
        [new Date(2008, 1 ,4), 75284, null, null, 14334, 'Out of Stock', 'Ran out of stock on pens at 4pm'],
        [new Date(2008, 1 ,5), 41476, 'Bought Pens', 'Bought 200k pens', 66467, null, null],
        [new Date(2008, 1 ,6), 33322, null, null, 39463, null, null]
      ]);

      var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
          document.getElementById('visualization'));
      annotatedtimeline.draw(data, {'displayAnnotations': true});
    }

    google.setOnLoadCallback(drawVisualization);
  </script>
</head>
<body style="font-family: Arial; border: 0 none;">
  <div id="visualization" style="width: 800px; height: 400px; display: none;"></div>
  <input type="button" onclick="toggle();" value="Toggle Visualization">
  <script language="javascript">  
    function toggle() {   
      var ele = document.getElementById('visualization'); 
      if(ele.style.display == "block") {
        ele.style.display = "none";
      } else {
        ele.style.display = "block";
      } 
    }  
  </script> 
</body>
</html> 
```

参考：

[https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)

[http://code.google.com/apis/ajax/playground/?type=visualization](http://code.google.com/apis/ajax/playground/?type=visualization)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:49:30.940

我在[jQuery UI 页面](http://jqueryui.com/demos/tabs/)上找到了答案。

任何需要一些维度计算来初始化的组件都不能在隐藏的选项卡中工作，因为选项卡面板本身是通过 display: none 隐藏的，因此内部的任何元素都不会报告它们的实际宽度和高度（在大多数浏览器中为 0） .

有一个简单的解决方法。使用[off-left 技术](http://www.456bereastreet.com/archive/200905/hiding_with_css_problems_and_solutions/)来隐藏非活动的选项卡面板，而不是`display: none;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:08:38.710

我有同样的问题，可以通过将单位添加到宽度和高度来解决它：

```
<div id="visualization" style="width: 800px; height: 400px; display: none;"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T22:09:34.347

@Jon 的解决方案有效，但我尝试了不同的方法。我的解决方案是这样的：

在 HTML 部分使“div”像这样隐藏：

```
<div id="visualization" style="width: 800px; height: 400px; display: none;">
    </div> 
```

在脚本标签之间，使“div”在 AnnotatedTimeLine 行之前可见

```
 data.addRows([
        [new Date(2008, 1 ,1), 30000, null, null, 40645, null, null],
        [new Date(2008, 1 ,2), 14045, null, null, 20374, null, null],
        [new Date(2008, 1 ,3), 55022, null, null, 50766, null, null],
        [new Date(2008, 1 ,4), 75284, null, null, 14334, 'Out of Stock', 'Ran out of stock on pens at 4pm'],
        [new Date(2008, 1 ,5), 41476, 'Bought Pens', 'Bought 200k pens', 66467, null, null],
        [new Date(2008, 1 ,6), 33322, null, null, 39463, null, null]
      ]);

      document.getElementById('visualization').style.display = 'inline-block';
      var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
          document.getElementById('visualization'));
      annotatedtimeline.draw(data, {'displayAnnotations': true}); 
```

因为`new google.visualization.AnnotatedTimeLine`需要一个可见的“div”。当您取消隐藏“div”时，可视化类成功构造对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T08:48:09.223

你也可以使用 style='visibility: hidden;' 如果您希望您的 div 是“不可见的”。

# c# - 如何使用 Lambda 和 EF 返回列表而不是对象

> ID：12237966
> 
> 赞同：1
> 
> 时间：2012-09-02T16:59:19.527
> 
> 标签：c#, linq, entity-framework-4, lambda

我有这个返回单个用户的代码：

```
 return RetryWithExpression<User, User>(u => u.FirstOrDefault(x => x.UserEmail == userEmail)); 
```

我正在尝试对其进行转换，以便它返回许多这样的用户：

```
return RetryWithExpression<User, List<User>>(u => u.Select(x => x.sUserCity == cityId)); 
```

这不编译，我得到一个错误：

```
Cannot implicitly convert type 'System.Linq.IQueryable<bool>' to 'System.Collections.Generic.List<User>'. An explicit conversion exists (are you missing a cast?) 
```

如何从此方法返回列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T17:00:38.627

我想你想要`Where`哪些过滤器。`Select`做一个投影。在你的情况下`Select`会返回一个`IEnumerable<bool>`，因此编译错误。

```
return RetryWithExpression<User, List<User>>(u => u.Where(x => x.sUserCity == cityId)); 
```

由于`RetryWithExpression`需要一个列表，请致电`ToList()`

```
return RetryWithExpression<User, List<User>>(u => u.Where(x => x.sUserCity == cityId).ToList()); 
```

# android - 在内容提供者中保留一个变量

> ID：12237971
> 
> 赞同：1
> 
> 时间：2012-09-02T16:59:57.227
> 
> 标签：android, android-contentprovider

我想在我的内容提供程序中保留 db 中的行数。

```
private int nRows;
public int getNRows(){
   return nRows;
} 
```

这个想法是在 onOpen() 方法中初始化这个变量，并在插入/删除方法中增加/减少它，这是正确的吗？

由于内容提供者的生命周期由 android 处理，我担心它可能会在某些时候删除我的私有变量......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:10:32.730

我猜你的意思是`onCreate()`，不是`onOpen()`吗？如果是这样 - 如果您要更新此变量，那将是正确的

1.  在 onCreate() - 可能从底层结构/数据库请求当前计数
2.  每次插入/删除操作后

如果你在上面做 - 所以你不会有问题，因为它保证`onCreate`会在任何其他提供者的方法之前被调用，即使系统会杀死提供者 - 你会在下一个实例中恢复这个值`onCreate()`

**注意：**仅当只能通过此提供程序对 DB 进行任何更改时，所有这些都适用。否则 - 您应该每次请求数据计数，或在其他级别缓存。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:08:47.207

You should use the [Cursor#getCount()](http://developer.android.com/reference/android/database/Cursor.html) method to get the number of rows instead of keeping track manually.

# ruby-on-rails-3 - 使用 Object.const_set 创建 rails 模型

> ID：12237978
> 
> 赞同：4
> 
> 时间：2012-09-02T17:00:32.600
> 
> 标签：ruby-on-rails-3, metaprogramming, jruby, neo4j

我在玩`rails console`Neo4j 并尝试创建一个像这样的模型类：

```
Object.const_set("TestNode", Class.new(super_class=Neo4j::Rails::Model))
node = TestNode.new 
```

如果我然后尝试保存实例，`node.save`我会收到一堆错误：

```
node.save
NoMethodError: undefined method `each' for nil:NilClass
from /Users/oskbor/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.0-java/lib/neo4j/rails/attributes.rb:57:in `init_on_create'
from /Users/oskbor/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.0-java/lib/neo4j/rails/node_persistance.rb:16:in `create'
from /Users/oskbor/.rvm/gems/jruby-1.6.7.2/gems/neo4j-2.0.0-java/lib/neo4j/rails/callbacks.rb:39:in `create_with_callbacks'
from /Users/oskbor/.rvm/gems/jruby-1.6.7.2/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:417:in `_run__1980184148__create__1722973119__callbacks'
from org/jruby/RubyKernel.java:2076:in `send'
... 
```

如果我像往常一样创建 TestNode 类，一切正常：

```
class TestNode < Neo4j::Rails::Model
end 
```

第一种创建模型类TestNode的方法有什么问题？

我的目标是能够使用元编程动态创建新模型，然后能够将实例持久化到 neo4j 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:41:23.270

正如 Andreas Ronge 评论的那样，使用 Object.const_set 时不会触发一些回调。评估字符串有效，所以这是我的解决方案：

```
name ="Classname"
super_klass ="Neo4j::Rails::Model"
string_to_eval = "class #{name} < #{super_klass}; end;"
eval(string_to_eval, TOPLEVEL_BINDING) 
```

# php - 如何用 PHP 生成随机数？

> ID：12237982
> 
> 赞同：0
> 
> 时间：2012-09-02T17:00:39.037
> 
> 标签：php, random

我有一个用 PHP 和 javascript 构建的游戏，它允许用户在圆形板上旋转瓶子。我包含了 php 文件中的一段代码，它解释了用户在登陆某个部分时获得的奖励。我正在尝试编辑“5 点”消息部分并对其进行更改，以便它奖励 1 到 50 之间的随机点数。这更多是语法问题，因为我尝试输入

```
45 => array(
    'message' => '5 Points',
    'callback' => array('point_add', array rand(1,50))
), 
```

但这没有用。什么是正确的语法？

```
SpinBubble::$rewards = array(
0 => array(
    'message' => 'MINI Cooper Sweepstakes Entry',
    'callback' => array('sweepstakes_entry', array('cooper'))
),
15 => array(
    'message' => 'Spin Again',
    'callback' => array('credit_add', array(1))
),
30 => array(
    'message' => 'Designated Driver',
),
45 => array(
    'message' => '5 Points',
    'callback' => array('point_add', array(5))
), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:02:29.473

Try this

```
45 => array(
    'message' => '5 Points',
    'callback' => array('point_add', array(mt_rand(1, 50)))
), 
```

# android - 如何以编程方式更改 Android 中的代理设置

> ID：12237983
> 
> 赞同：0
> 
> 时间：2012-09-02T17:00:54.710
> 
> 标签：android, proxy, android-browser

我正在尝试在 android 中制作一个简单的代理更换器应用程序。所以我想知道，是否可以以编程方式更改 Android 中的代理设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:06:44.383

You could use [the Android Proxy Library](https://github.com/shouldit/android-proxy).

# php - '加载更多' 获得 10 多个结果

> ID：12237986
> 
> 赞同：0
> 
> 时间：2012-09-02T17:01:14.620
> 
> 标签：php, jquery, mysql, ajax

我的脚本工作正常，但只显示 1 个结果。我需要添加什么才能从我的数据库中获取接下来的十个结果。我已经提供了一小部分我认为最重要的代码。

AJAX

```
 <script type="text/javascript">
$(function() 
{
$('.load_more').live("click",function() 
{
var ID = $(this).attr("id");
if(ID)
{
$("#load"+ID).html('Loading...');

$.ajax({
type: "POST",
url: "include/load_more_home_posts.php",
cache: false, 
dataType: "json",
data: { streamitem_id: ID},
cache: false,
success: function(response){
$("#articles").prepend("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div class'delete' style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+response['streamitem_content']+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a title='Like "+response['first']+" "+ response['middle']+" "+response['last']+"s status' id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</a></div><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'><a title='See who likes "+response['first']+" "+ response['middle']+" "+response['last']+"s status' href='include/likes.php?streamitem_id="+response['streamitem_id']+"' /></a></div></div></form></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</a></div><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></form><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'></div><div class='stream_comment_inputarea'><form id='mycommentform' method='POST'  class='form_statusinput'>\
<input type='hidden'  name='streamidcontent' id='streamidcontent' value='"+response['streamitem_id']+"'>\
<input type='input' name='commentingcontents' id='commentingcontents' placeholder='Say something' autocomplete='off'>\
<input type='submit' id='button' value='Feed'><br/></div></div>").show();
// remove the previous load more link
$("#load"+ID).remove();
}
});
}
return false;
});
});
</script> 
```

LOAD_MORE_HOME_POSTS

```
 <?php
session_start();
include("rawfeeds_load.php");

// get the article ID from ajax POST
if (isset($_POST['streamitem_id']) && $_POST['streamitem_id'] != "") {
$lastID = mysqli_real_escape_string($mysqli,$_POST['streamitem_id']);

 $following_string=mysqli_real_escape_string($mysqli,$_SESSION['id']);
 $sql_follows =  "SELECT * FROM friends WHERE user1_id=".$following_string." AND status=2 OR user2_id=".$following_string." AND status=2"; 
 $query_follows=mysqli_query($mysqli, $sql_follows) or die("Error finding friendships");

if($query_follows){
$friendlist="(".$_SESSION['id'].",";
$t=0;
while($follow=mysqli_fetch_array($query_follows))
{
if($follow['user1_id']==$_SESSION['id']){
if($t>0){
$friendlist=$friendlist.",";
}
$friendlist=$friendlist. $follow['user2_id'];
}else{
if($t>0){
$friendlist=$friendlist.",";
}
$friendlist=$friendlist. $follow['user1_id'];
}
$t=$t+1;
}
$friendlist=$friendlist.")";
}
//STREAMDATA
$badcall = "(".mysqli_real_escape_string($mysqli,$_SESSION['id']).",)";
if($friendlist==$badcall){
$friendlist="(".mysqli_real_escape_string($mysqli,$_SESSION['id']).")";
}
if(isset($_GET['limit'])){
$sqllimit = $_GET['limit'];
}else{
$sqllimit = 20;
}

$following_string = mysqli_real_escape_string($mysqli,$_SESSION['id']);
$call="SELECT * FROM streamdata WHERE streamitem_id < '$lastID' AND streamitem_target=".$following_string." OR streamitem_creator=".$following_string." OR streamitem_creator IN ".$friendlist." AND streamitem_target IN ".$friendlist." ORDER BY streamitem_id DESC LIMIT 10";
$chant= mysqli_query($mysqli, $call) or die(mysqli_error($mysqli));
$json = array();   
 while ($resultArr = mysqli_fetch_assoc($chant)) {
    $json[] = array(
        'streamitem_id' => $resultArr['streamitem_id'],
        'streamitem_content' => $resultArr['streamitem_content'],
        'streamitem_timestamp' => Agotime($resultArr['streamitem_timestamp'])
    );
}

$check = "SELECT comment_id, comment_datetime, comment_streamitem, comment_poster, comment_content FROM streamdata_comments WHERE comment_poster=".$following_string."  ORDER BY comment_datetime DESC";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_assoc($check1);
$json['comment_id'] = $resultArr['comment_id'];
$json['comment_content'] = $resultArr['comment_content'];
$json['comment_poster'] = $resultArr['comment_poster'];
$json['comment_datetime'] = Agotime($resultArr['comment_datetime']);
$json['comment_streamitem'] = $resultArr['comment_streamitem'];

$check = "SELECT * FROM users WHERE id=".$following_string."";
$check1 = mysqli_query($mysqli,$check);
$resultArr = mysqli_fetch_assoc($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
$json['first'] = $resultArr['first'];
$json['middle'] = $resultArr['middle'];
$json['last'] = $resultArr['last'];

echo json_encode($json);

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:09:35.693

现在你没有遍历你的结果集，因此你只获取一行。尝试以下操作，它将您的`$json`数组拆分为三个数组（流、评论、用户），而这三个数组又是数组（每行一个）。请注意，您必须相应地更改您的 jQuery 代码。

```
/***** STREAMS *****/
$chant = mysqli_query($mysqli, $call) or die(mysqli_error($mysqli));
$json = array();
$json['streams'] = array();

while ($resultArr = mysqli_fetch_assoc($chant)) {
    $arr = array();
    $arr['streamitem_id'] = $resultArr['streamitem_id'];
    $arr['streamitem_content'] = $resultArr['streamitem_content'];
    $arr['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);

    $json['streams'][] = $arr;
}

/***** COMMENTS *****/
$check = "SELECT comment_id, comment_datetime, comment_streamitem, comment_poster, comment_content FROM streamdata_comments WHERE comment_poster=".$following_string."  ORDER BY comment_datetime DESC";
$check1 = mysqli_query($mysqli,$check);
$json['comments'] = array();

while ($resultArr = mysqli_fetch_assoc($check1)) {
    $arr = array();
    $arr['comment_id'] = $resultArr['comment_id'];
    $arr['comment_content'] = $resultArr['comment_content'];
    $arr['comment_poster'] = $resultArr['comment_poster'];
    $arr['comment_datetime'] = Agotime($resultArr['comment_datetime']);
    $arr['comment_streamitem'] = $resultArr['comment_streamitem'];

    $json['comments'][] = $arr;
}

/***** USERS *****/

$check = "SELECT * FROM users WHERE id=".$following_string."";
$check1 = mysqli_query($mysqli,$check);
$json['users'] = array();

while ($resultArr = mysqli_fetch_assoc($check1)) {
    $arr = array();
    $arr['username'] = $resultArr['username'];
    $arr['id'] = $resultArr['id'];
    $arr['first'] = $resultArr['first'];
    $arr['middle'] = $resultArr['middle'];
    $arr['last'] = $resultArr['last'];

    $json['users'][] = $arr;
}

echo json_encode($json); 
```

至于 jQuery，我将只向您展示您可以做什么的示例，因为我不知道您的 DOM 是什么样的，而且您的代码也不是那么简单。您应该能够更新您的代码而不会感到头疼。

```
success: function(response) {
    // Streams
    $.each(response.streams, function(i, stream) {
        alert(response.streams[i].streamitem_id);
    });

    // Comments
    $.each(response.comments, function(i, comment) {
        alert(response.comments[i].comment_id);
    });

    // Users
    $.each(response.users, function(i, user) {
        alert(response.users[i].id);
    });
} 
```

**编辑：**在上面，直接使用`stream`,`comment`和`user`变量而不是查看位置 i 处的数组会更漂亮。

另外，我建议您将脚本拆分为几个关注范围更窄的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:09:50.277

尝试这个：

```
$json = array();    
while($resultArr = mysqli_fetch_assoc($chant)) { 
    $json[] = array(
        'streamitem_id' => $resultArr['streamitem_id'],
        'streamitem_content' => $resultArr['streamitem_content'],
        'streamitem_timestamp' = Agotime($resultArr['streamitem_timestamp'])
    );
} 
```

# java - 在 GWT 中自动关闭 JS Alert 窗口

> ID：12237992
> 
> 赞同：0
> 
> 时间：2012-09-02T17:02:25.143
> 
> 标签：java, javascript, gwt

如何在一定时间后自动关闭 GWT 中的 Window.alert()？问题是，我想通知用户新事物，但 Window.alert() 将阻止应用程序，直到单击“确定”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:34:25.873

您不能关闭由 Window.alert() 创建的对话框，但您可以使用普通的 GWT 对话框并将其显示给您的用户。它可以以编程方式关闭。

看看：http: [//google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DialogBox.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DialogBox.html)

# matlab - RAM de-fragmentation from command prompt

> ID：12237995
> 
> 赞同：0
> 
> 时间：2012-09-02T17:02:36.893
> 
> 标签：matlab, cmd

Can I de-fragment RAM from cmd? or matlab

I know that `pack` command de-fragment RAM in matlab. but it should run from command window. I want something callable from scripts or functions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:33:57.377

AMS 的 FAST Defrag 具有命令行支持。到目前为止我只使用了 GUI，但它可能值得一试...... [http://www.amsn.ro/index.php?action=2](http://www.amsn.ro/index.php?action=2)