# StackOverflow 问答 10437000-10437999

# objective-c - 在 iPad 中呈现模式视图翻转视图

> ID：10437000
> 
> 赞同：0
> 
> 时间：2012-05-03T18:07:55.697
> 
> 标签：objective-c, ipad, modalviewcontroller, presentmodalviewcontroller

我在 iPad 的视图中心有一个矩形视图。当我按下按钮时，我希望该矩形视图翻转并显示带有一些信息的模态视图。如何实现这一点而不是翻转所有的整个主视图？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:25:07.713

看看不同的模态视图转换样式：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalTransitionStyle](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/modalTransitionStyle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:11:19.837

我懂了！

这是我使用的解决方案：

```
[UIView transitionWithView:self.tutorialView
                  duration:0.4
                   options:UIViewAnimationOptionTransitionFlipFromLeft | UIViewAnimationOptionCurveEaseInOut
                animations:^{
                    [[[self.tutorialView subviews] objectAtIndex:0] removeFromSuperview],
                    [self.tutorialView addSubview:infoView.view];
                }
                completion:^(BOOL finished){

                }]; 
```

# c# - 在c#项目中运行时选择连接字符串

> ID：10437010
> 
> 赞同：2
> 
> 时间：2012-05-03T18:08:47.700
> 
> 标签：c#, visual-studio-2010, windows-forms-designer

我对 c# 相当陌生。到目前为止，学习效果很好。我确实有一个问题，也许是两个。

如何在项目启动时创建用户对话框以允许选择连接字符串？我有 4 个具有相同架构的数据库，并希望允许用户在启动程序时选择要连接的数据库。

我目前正在使用数据集，但愿意学习/尝试另一种方法来获得所需的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:14:04.890

将它们放入配置`connectionStrings`区域并为用户提供一个包含连接字符串名称的组合框。然后使用选中的那个。

在您的配置中：

```
<connectionStrings>
  <add name="Environment1" connectionString="connString1" providerName="System.Data.SqlClient" />
  <add name="Environment2" connectionString="connString2" providerName="System.Data.SqlClient" />
  <add name="Environment3" connectionString="connString3" providerName="System.Data.SqlClient" />
  <add name="Environment4" connectionString="connString4" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

在您的代码中，将连接字符串添加到 ComboBox：

```
foreach (ConnectionStringSettings connString in ConfigurationManager.ConnectionStrings)
{
    myComboBox.Items.Add(connString.Name);
} 
```

从 ComboBox 中获取名称，然后获取您需要的 connString 并使用它：

```
// Access chosen one:
string chosenName = (string)myComboBox.SelectedItem;
string connString = ConfigurationManager.ConnectionStrings[chosenName].ConnectionString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:16:30.043

**您需要按照zimdanen**的建议将各种数据库的连接字符串放入`app.config`or`web.config`文件中，例如：

 **```
 <connectionStrings>
    <add name="Database1" connectionString="Data Source=.\SQLEXPRESS;Initial 
     Catalog=db1;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings> 
```

然后你可以使用`ConfigurationManager`类来实现结果：

```
foreach (ConnectionStringSettings connectionString in 
                     ConfigurationManager.ConnectionStrings)
 {
     //YOU CAN ADD NAME OF CONNECTION STRING TO A COMBOBOX FOR USER TO MAKE
     // A SELECTION
     //connectionString.Name
 } 
```

做出选择后，您可以通过以下行获得所需的连接字符串：

```
var s=ConfigurationManager.ConnectionStrings[<SELECTED NAME>].ConnectionString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:17:59.700

添加应用程序配置文件并在 <connectionStrings> 中添加您的连接字符串。在您的代码中，使用 ConfigurationManager.ConnectionString 枚举连接字符串列表。**

# regex - 查找命令和反正则表达式

> ID：10437012
> 
> 赞同：5
> 
> 时间：2012-05-03T18:09:08.267
> 
> 标签：regex, find, exec, inverse

我正在寻找一种表达此命令的方法，该命令排除所有可执行权限，但以“.EXE”结尾的文件除外

我正在尝试使用“find”命令和-exec来解决它，拜托。谢谢。

我尝试过的命令和其他版本的命令不起作用：

```
find . -type f -regex "[^\.EXE$]" -printf "%f\n" -exec chmod a-x {} + 
```

感谢任何帮助，贝科。

* * *

编辑：

为了找到正则表达式的“逆”，我在（更多）研究之后尝试过：

```
find . -type f ! -regex ".EXE$" -printf "%f\n" -exec chmod a-x {} + 
```

但这也没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:18:49.963

您的命令可以解决的问题很少

首先排除条件。要排除“*.EXE”，请说`! -name "*.EXE"`. OP 中的条件采用所有包含不同于 、 或 的`\`字母`.`的`E`文件`X`。

另一件事是，对于这个特定目的，只检查可执行文件是有意义的。这可以通过`-executable`谓词来完成。

其余的似乎还可以。

这是一个完整的版本

```
 find -executable -type f ! -name "*.EXE"  -exec chmod a-x {} + 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T18:14:54.740

如果`find . -name "*.EXE" -exec chmod a-x {} +`不起作用，那么我只需在脚本中“查找 .-name ..-print”并编辑脚本。

# go - 通道是否返回两个值？

> ID：10437015
> 
> 赞同：29
> 
> 时间：2012-05-03T18:09:34.323
> 
> 标签：go, channel

我在这个链接中看到了一些代码，很困惑：[http ://www.darkcoding.net/software/go-lang-after-four-months/](http://www.darkcoding.net/software/go-lang-after-four-months/)

第二个值（ok）是什么意思？

```
for self.isRunning {

    select {
    case serverData, ok = <-fromServer:   // What's the meaning of the second value(ok)?
        if ok {
            self.onServer(serverData)
        } else {
            self.isRunning = false
        }

    case userInput, ok = <-fromUser:
        if ok {
            self.onUser(userInput)
        } else {
            self.isRunning = false
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-03T19:41:28.790

[接收运算符](http://golang.org/ref/spec#Receive_operator)`ok`返回的布尔变量指示接收到的值是在通道上发送的 (true) 还是由于通道关闭且为空 (false) 而返回的零值。

当`for`Go 程序的其他部分关闭`fromServer`或`fromUser`通道时，循环终止。在这种情况下，其中一个 case 语句将设置`ok`为 true。所以如果用户关闭连接或者远程服务器关闭连接，程序就会终止。

[http://play.golang.org/p/4fJDkgaa9O](http://play.golang.org/p/4fJDkgaa9O)：

```
package main

import "runtime"

func onServer(i int) { println("S:", i) }
func onUser(i int)   { println("U:", i) }

func main() {
    fromServer, fromUser := make(chan int),make(chan int)
    var serverData, userInput int
    var ok bool

    go func() {
        fromServer <- 1
        fromUser <- 1
        close(fromServer)
        runtime.Gosched()
        fromUser <- 2
        close(fromUser)
    }()

    isRunning := true
    for isRunning {
        select {
            case serverData, ok = <-fromServer:
                if ok {
                    onServer(serverData)
                } else {
                    isRunning = false
                }

            case userInput, ok = <-fromUser:
                if ok {
                    onUser(userInput)
                } else {
                    isRunning = false
                }
            }
        }
        println("end")
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-03T20:37:44.143

有几个答案引用了接收运算符的规范，但要了解您可能还需要阅读[close 函数](http://golang.org/ref/spec#Close)的规范。然后，既然您会想知道为什么这些功能是这样的，请阅读[for 语句](http://golang.org/ref/spec#For_statements)在通道上的范围。for 语句需要一个信号来停止迭代，并且`close`是发送者可以说“没有更多数据”的方式。

使用`close`并`, ok = <-`作为语言的一部分公开，当您希望发送 goroutine 发出“没有更多数据”信号时，您可以在其他情况下使用它们。问题中的示例代码是对这些功能的有趣使用。它同时处理“服务器”通道和“用户”通道，如果“没有更多数据”信号从它们中的*任何一个*到达，它就会跳出循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T19:37:41.807

请参阅 Go 语言规范中的相关部分：http: [//golang.org/ref/spec#Receive_operator](http://golang.org/ref/spec#Receive_operator)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T18:13:20.713

在 Go 中，函数和通道可以返回超过 1 个值。这里 ok 必须是一个布尔变量，具有 true（成功）和 false（不成功），serverData 是从通道接收到的实际数据。

# c# - 使用 String.Split 的替代方法

> ID：10437020
> 
> 赞同：0
> 
> 时间：2012-05-03T18:09:45.257
> 
> 标签：c#, linq

下面的代码在一个由逗号分隔的电子邮件组成的字符串中查找，如果它不在结果集合中，则添加一个电子邮件，该集合也是字符串类型。

```
string [] oEmails=orderEmails.Split(',');
string[] partEmails= part[Constants.Emails].ToString().Split(','); 
foreach(string email in oEmails)
{
  if(!partEmails.Contains(email))
  {
      part[Constants.Emails] += "," + email;
  }
} 
```

这是编写此逻辑的最佳方法吗？我工作得很好，但我想知道是否有一种方法可以将这个逻辑整合到一个 lambda 表达式中？

困扰我的是我没有对这些数组做任何事情，而是拆分输入字符串。它们没有其他用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:16:43.833

```
part[Constants.Emails] =
 string.Join(",", part[Constants.Emails].Split(',').Union(orderEmails.Split(',')).ToArray()); 
```

除此之外，您以错误的方式存储电子邮件。不要将它们存储为逗号分隔的字符串，将它们存储为列表。这样您就不必在每次修改“集合”时解析它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T18:19:45.980

您可以使用 a`HashSet`而不是单个 large`string`吗？如果列表中尚不存在值，这只会将值添加到列表中。例如

```
part[Constants.Emails] = new HashSet<string>();
foreach (var email in oEmails)
    part[Constants.Emails].Add(email); 
```

如果您需要更轻松地与一个大字符串进行转换，您可以创建一个类，例如

```
class Emails : HashSet<string>
{
    public Emails(string concatenatedList)
        : base(concatenatedList.Split(','))
    {
    }
    public override string ToString()
    {
        return string.Join(",", this);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:16:36.207

```
part[Constant.Emails] += oEmails.Where(email => !partEmails.Contains(email))
                                .Aggregate(b, (current, email)
                                              => current + ("," + email)); 
```

首先，这会选择尚未出现的电子邮件（第一行），然后将它们聚合成一个由几`,mail`部分组成的字符串（第二行和第三行）。然后它将它添加回字符串（第一行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:19:20.523

这种方式`part[Constants.Emails].Split(',')`通过直接在字符串中执行查找来避免您：

```
string[] oEmails = orderEmails.Split(',');
string partEmails = part[Constants.Emails];

foreach (string email in oEmails)
{
    bool index = partEmails.IndexOf(email);
    bool isAlreadyPresent = index != -1 && 
        (index == 0 || partEmails[index - 1] == ',') &&
        (index + email.Length == partEmails.Length || partEmails[index + 1] == ',');

    if (!isAlreadyPresent)
    {
        partEmails += "," + email;
    }
}

part[Constants.Emails] = partEmails; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T18:20:38.713

试试这个：

```
part[Constants.Emails] = string.Join( ",", ( 
    from e in (part[Constants.Emails].ToString() + "," +  orderEmails).Split(',')
    where !string.IsNullOrEmpty( e )
    select e 
).Distinct().ToArray() ); 
```

它的可读性较差，但可能运行得更快。

**编辑：**大多数其他解决方案（包括问题）使用字符串连接。StringBuilder 对此要好得多。

**编辑：**将此数据存储为列表或哈希表比将生成的数组/列表连接成逗号分隔的字符串并每次都将其解析出来要好得多，如果您的一个字符串有合法的答案，请不要说得到错误的答案逗号在里面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T18:23:26.533

您应该能够像这样整合逻辑：

```
oEmails.Where(partEmails.Contains).Select(e => partEmails[Constants.Emails] += string.Format(",{0}", e)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T18:25:58.257

也许你可以试试

```
 var result = oEmails.Select((x, i) => oEmails[i] == partEmails[i] ? part[Constants.Emails] :
             partEmails.Contains(x) ? part[Constants.Emails] : -1).ToArray(); 

```

# c# - c# TcpListener async BinaryFormatter.Deserialize

> ID：10437023
> 
> 赞同：2
> 
> 时间：2012-05-03T18:09:51.573
> 
> 标签：c#, tcpclient, networkstream, tcplistener

我有非常简单的 TcpListener + TcpClient 静默服务器应用程序。我接受异步传入连接。然后我从网络流中读取数据。

我在新线程中运行此代码。但我必须为每个客户运行新线程......

```
while (true)
    (MyCoreMessage)BinaryFormatter.Deserialize(TcpClient.GetStream()) 
```

是否有一些（简单而简单的）异步方法可以从网络流中反序列化对象？不为每个客户创建新线程...

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:21:12.940

我强烈建议您在数据前面加上长度前缀（例如，作为 network-byte-order 4 个字节），然后*先*读取此长度。然后你知道下一帧会有多少数据，所以使用异步读取**缓冲**那么多数据（假设大小不是太大）。当您完成数据缓冲（异步）**后**，您可以使用 MemoryStream 之类的东西并正常反序列化。

这：

*   允许适当的取景
*   允许您全面检查长度
*   允许您以异步方式进行所有网络访问
*   仅当您知道您有合理的数据时才允许您使用反序列化器

# wpf - WPF RotateTransform 数据触发器

> ID：10437024
> 
> 赞同：8
> 
> 时间：2012-05-03T18:10:00.480
> 
> 标签：wpf, datatrigger, rotatetransform

是否可以使用 DataTrigger 在 WPF 中设置 RotateTransform 的角度？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T18:26:20.827

当然，这样的事情应该可以

```
<TextBox>
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Text}"
                             Value="RotateMe">
                    <Setter Property="LayoutTransform">
                        <Setter.Value>
                            <RotateTransform Angle="45"/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

或者，如果您已经`LayoutTransform`有一套，您可以使用`EnterActions`and `ExitActions`of`DataTrigger`

```
<TextBox>
    <TextBox.LayoutTransform>
        <RotateTransform Angle="0"/>
    </TextBox.LayoutTransform>
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Text}"
                                Value="RotateMe">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 To="45"
                                                 Storyboard.TargetProperty="(LayoutTransform).(RotateTransform.Angle)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0"
                                                 To="0"
                                                 Storyboard.TargetProperty="(LayoutTransform).(RotateTransform.Angle)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

# python - 使用 Boto 确定 AWS AMI 是否可用

> ID：10437026
> 
> 赞同：4
> 
> 时间：2012-05-03T18:10:08.267
> 
> 标签：python, amazon-web-services, boto

我正在使用 Boto 为我的一个 EC2 盒子创建一个 AMI，然后我想用那个 AMI 启动更多盒子，但是`run_instances`命令正在咆哮我的 AMI 还不可用。

如何使用 boto 查询 aws 以了解我的 ami 何时准备就绪？

EC2 连接支持[get_image的方法](http://boto.readthedocs.org/en/latest/ref/ec2.html#boto.ec2.connection.EC2Connection.get_image)

但是[图像](http://boto.readthedocs.org/en/latest/ref/ec2.html#module-boto.ec2.image)没有任何类型的状态属性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:21:21.957

Image的快速[目录](http://docs.python.org/library/functions.html#dir)使我获得`Image.state`了`"pending"`和`"available"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:49:33.650

除了“pending”和“available”之外，还有“failed”状态。这是可用的全套 AMI 状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-24T06:09:18.080

我可以使用 boto3 编写一个简单的函数

```
def check_ami_exists(ami_id, region): 
  client = boto3.client('ec2', region_name = region)
  response = client.describe_images()
  for image in response['Images']:
    if ami_id == image['ImageId']:
      return True
  return False 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-26T23:40:05.803

我使用了上述方法，但我花了一点时间才弄清楚。不是蟒蛇人，但这是我所做的。希望它可以帮助某人。

```
#EC2 Connection
conn = boto.ec2.connect()

image_status = conn.get_all_images(image_ids='ami-XXX')[0]
image_state = image_status.state
print image_state 
```

# php - PHP数组从函数传递到新工作表上的数组

> ID：10437030
> 
> 赞同：0
> 
> 时间：2012-05-03T18:11:02.943
> 
> 标签：php

我正在尝试将数组从一张表上的函数传递到另一张 php 表上的新数组中。

这是我所拥有的：

功能是：

```
//the arr.php file

<?php

function search($var){
$var;

$a=array();
$a[0]=$var+1;
$a[1]=$var+2;
$a[2]=$var+3;
$a[3]=$var+4;
return $a;
}
?> 
```

第二张表是：

```
<?php

include ('arr.php');
$n=4;

for($i=0;$i<$n;$i++)
{

$temp=search(3); 

$thearrayfromarr[$i]=$temp;//doesn't work
print_r($thearrayfromarr[$i]);//doesn't work
}

?> 
```

我希望第二张表有一个数组变量，我可以回显它将从搜索函数中输出 $a 数组数据。

所以，例如，当我输入

```
echo thearrayfromarr[0]; // It will have the value of $a[0] echo'd to me 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:13:54.460

您的功能没有`return`任何作用：

```
function search($var) {
    $a=array();
    $a[0]=$var+1;
    $a[1]=$var+2;
    $a[2]=$var+3;
    $a[3]=$var+4;
    return $a; // Need this
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:15:45.347

你的`search()`函数没有返回`$a`。这是一个有效的清理版本：

```
<?php
//the arr.php file

function search($var){
    $a = array();

    for($n=1; $n<=4; $n++) {
        $a[] = $var + $n;
    }

    return $a;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:15:52.923

您可以简单地从函数中返回此数组：

```
return $a; 
```

如果您已经返回其他内容，则应声明`$a`为参考参数：

```
function search($var, &$a) {
  $a[0]=$var+1;
  $a[1]=$var+2;
  $a[2]=$var+3;
  $a[3]=$var+4;
  return "something";
}

$a = array();
$temp = search(3, $a);
// $a now has new value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:17:20.323

您在函数内部定义的数组无法从外部访问。您需要返回数组才能使用它。

**返回数组**

```
function search($var){
$var;

$a=array();
$a[0]=$var+1;
$a[1]=$var+2;
$a[2]=$var+3;
$a[3]=$var+4;
return $a;
} 
```

然后你像这样使用它：

```
include ('arr.php');
$n=4;

for($i=0;$i<$n;$i++)
{

$temp=search(3); 

$thearrayfromarr[$i] = $temp;
print_r($thearrayfromarr[$i]);
} 
```

在这种情况下，如果你这样做：`$thearrayfromarr[0]`应该有 [1,2,3,4] 因为你返回的是一个数组，而不是一个值。这一点尤其重要，因为您希望根据这一行得到其他东西：

```
echo thearrayfromarr[0]; // It will have the value of $a[0] echo'd to me 
```

**回答问题**

如何使 $thearrayfromarr 具有 search(3) 的值？

你不需要 for 循环，你可以这样做：

```
include ('arr.php');

$thearrayfromarr = search(3); 
print_r($thearrayfromarr); //should return [4,5,6,7] 
```

# c++ - XCode 4.3 单元测试 C++ 库，未命中断点。为什么？

> ID：10437031
> 
> 赞同：1
> 
> 时间：2012-05-03T18:11:05.557
> 
> 标签：c++, macos, unit-testing, xcode4.3

我在 XCode 4.3 中向我的 C++ 静态库中添加了一个单元测试目标。单元测试的类型为“Bundle”，面向 Mac OS 10.7，而不是 iOS。

当我执行“产品-> 测试”时，测试之前失败并出现“测试台”错误 139，但我无法调试它，因为没有命中断点。

为什么没有命中断点，我该如何解决？

**编辑：**

好吧，在尝试*了所有*可能的路线、Mac OS X 单元测试、iOS 单元测试，甚至将应用程序目标添加到我的库之后，我终于放弃并开始了一个新的 iOS 应用程序，将我所有的 C++ 代码复制到它，现在我可以至少正确调试它。

# ruby-on-rails - 在 Windows 上安装 ImageMagick for Spree 的最简单方法是什么？

> ID：10437032
> 
> 赞同：1
> 
> 时间：2012-05-03T18:11:06.873
> 
> 标签：ruby-on-rails, windows, imagemagick, spree

我想在 Windows 上尝试 Spree 并遵循入门指南，但我未能安装 ImageMagick。

有没有一种方便的方法来安装 ImageMagick 进行狂欢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:51:13.313

自从我使用 Windows 以来已经有很长时间了，但我知道 ImageMagick 为 Windows 提供了二进制发行版。这可能会让你开始。

[http://www.imagemagick.org/script/binary-releases.php#windows](https://www.imagemagick.org/script/download.php#windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:49:34.863

您是否正在通过 XAMPP 或类似方式运行 Spree？

我将 Imagemagick 与 XAMPP 一起使用，并按照 Chris 的建议从二进制文件中安装它；它在没有任何其他设置的情况下工作。

# c# - 用于导入 .dll 的 C# 包装器，“尝试读取或写入受保护的内存”

> ID：10437042
> 
> 赞同：4
> 
> 时间：2012-05-03T18:11:37.173
> 
> 标签：c#, .net, dll, vb6, pinvoke

经过大量的研究和实验，我仍然无法弄清楚从外部库访问非托管函数时遇到的问题。

*快速相关的背景故事：我用 Visual C++ 编写了一个应用程序来驱动一个通过 USB 连接到系统的外部仪表，但正在虚拟化一个串行端口，我注意到奇怪的输出行为。为了为自己辩护，制造商希望我使用他们的 .dll 从我的应用程序中控制仪表。很好，但是....*

我无法直接包含这个 .dll 作为参考（名称和路径已删除）：![在此处输入图像描述](../Images/e401645436062b7d1c2b5e1ede0e8375.png)

所以为了使用它，我大概查看了 DllImport。我决定将自己的程序集作为驱动程序的包装器，而不是将代码直接包含到我的应用程序中，这样我就可以通过类访问功能。在 .dll 上做了一个 dumpbin /exports 之后，我找到了所有函数的入口点，并像这样制作了一个 C# 类库，只包含相关示例：

```
namespace Meter
{
    public class PortDrv
    {

        [DllImport("PortDrv.dll", EntryPoint = "SERIALNUMBER",
            CallingConvention = CallingConvention.StdCall,
            CharSet = CharSet.Auto)]
        public static extern long SerialNumber(Byte Index);

        [DllImport("PortDrv.dll", EntryPoint = "OPENPORT",
            CallingConvention = CallingConvention.StdCall,
            CharSet = CharSet.Auto)]
        public static extern int OpenPort();

    };
} 
```

函数原型是从他们发给我的描述他们的库的 .pdf 文件中提取的：

```
SERIALNUMBER (ByVal Index As Byte) As Long
OPENPORT () As Integer 
```

并且也在他们的示例 VB 程序中使用：

```
Private Declare Function SerialNumber Lib "PortDrv" Alias "SERIALNUMBER" (Index As Byte) As Long
Private Declare Function OpenPort Lib "PortDrv" Alias "OPENPORT" () As Integer 
```

还在我这儿？行。所以在编译我自己的程序集之后，我添加了对我的应用程序的引用并访问了包装器：

```
int port_return = PortDrv::OpenPort(); 
Byte bite = 0x31;
__int64 serial = PortDrv::SerialNumber(bite); 
```

但是在尝试检索序列号后它会爆炸：![在此处输入图像描述](../Images/d6f07a3457d1c38031047c8c4cbd4bc7.png)

而且我不太确定我哪里出错了。一些函数返回正确的信息，但似乎我必须传递信息才能失败。我已经尝试了 CharSets 和 CallingConventions 的所有不同组合，我已经将 ExactSpelling 设置为 true 等。有什么明显的地方我做错了，或者我可以不在我当前的环境中使用这个库吗？

编辑：我忘了提到，我将'1'传递给函数的原因是，如果只有一个仪表连接到系统，“索引”将为 1。如果有 2 个仪表，我可以访问第二个通过传入'2'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:28:35.103

您提供的示例 VB 程序：

```
Private Declare Function SerialNumber Lib "PortDrv" Alias "SERIALNUMBER" (Index As Byte) As Long 
```

不说`ByVal`。VB 中的默认值是`ByRef`. 这是您的错字还是问题所在？如果是这样，您需要`ref Byte`在签名中注明 SerialNumber。

道德：总是说`ByRef`或`ByVal`。

# git - 如何在远程服务器上更新 .git/config

> ID：10437054
> 
> 赞同：3
> 
> 时间：2012-05-03T18:12:31.463
> 
> 标签：git, version-control, configuration

我想将非快进合并设置为已投入使用的存储库的默认设置。这意味着添加

```
 [merge]
          ff = false 
```

到存储库的 .git/config 文件。因为那是元数据，所以当我像往常一样推送存储库时，我不能指望它会更新。

所以我一直在克隆裸仓库，进行更改，并尝试将结果推送回服务器。除了我无法对“git push”进行任何参数组合之外，实际上可以做我想做的事。

**更新：**看起来我试图描述的内容是不可能的（感谢#git 上的耐心人士）；我只需要鼓励我的开发人员这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:47:23.063

ssh 引入远程服务器并在裸 git 中做任何你喜欢的事情（小心！）

但是，是的，你应该使用钩子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:04:19.487

也许您可以使用共享/跟踪文件的“包含”：

```
git clone ...
git config include.path '../.gitconfig'

$ cat .gitconfig 
[merge]
    ff = false
[local]
    policy = true

$ git config -l | tail -3
include.path=../.gitconfig
merge.ff=false
local.policy=true 
```

也许有一些钩子来执行策略（在结帐后和提交前检查 local.policy）。

我只是在编造这个，所以把它当作一个想法，而不是建议。这可能会在我不熟悉的情况下中断......

祝你好运

# php - mysql 使用第一个表中的 auto_increment 值作为第二个表中的外键插入两个表

> ID：10437055
> 
> 赞同：1
> 
> 时间：2012-05-03T18:12:31.863
> 
> 标签：php, mysql, myisam

我想插入购物车表

```
**orderId** | cartId | cartDate | cartStatus
____________________________________________
1           | 1      | 20120102 | complete
2           | 2      | 20120102 | complete
3           | 3      | 20120102 | complete
4           | 4      | 20120102 | complete 
```

使用订单表中的自动递增值 orderId

```
**orderId** | orderStatus | secret   | sauce
____________________________________________
1           | 7          | 020200202 | bbq
2           | 6          | 020200202 | bbq
3           | 6          | 020200202 | t
4           | 4          | 020200202 | m

INSERT INTO ordertable VALUES(null,7,020200202,bbq) 
```

但随后使用 orderId（现在为 5）

```
INSERT INTO carttable VALUES(orderId,20120102,complete) 
```

但是，此插入必须作为相同的查询完成。如果我使用 mysql_last_id (php)，那么在执行我的购物车插入之前，其他人就有机会插入数据库。否则连接可能会超时。数据库是 MyISAM（我无法更改，第 3 方解决方案）。

谢谢你，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:20:35.963

我认为您对使用的担忧`mysql_last_id`是没有根据的——它将返回当前连接的最后一个 id，而不是所有连接的全局最后一个 id。

因此，除非您有多个线程共享同一个数据库连接，或者您在调用之前在同一个连接上执行另一个身份插入，否则您不必`mysql_last_id`担心。

ETA：您可以通过一次发送多个查询来做到这一点，如下所示：

```
INSERT INTO ordertable VALUES(null,7,020200202,bbq);
INSERT INTO carttable VALUES(LAST_INSERT_ID(),20120102,complete); 
```

但是如果你使用`mysql_query`它，通常不会让你在同一个调用中发送多个查询（主要是作为一种安全措施来防止 SQL 注入）。

# .net - 如何使实体框架数据上下文只读

> ID：10437058
> 
> 赞同：130
> 
> 时间：2012-05-03T18:12:56.410
> 
> 标签：.net, entity-framework, entity-framework-4, datacontext, readonly

我需要向 3rd 方插件公开实体框架数据上下文。目的是允许这些插件仅获取数据，而不是让它们发出插入、更新或删除或任何其他数据库修改命令。因此，我怎样才能使数据上下文或实体只读。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-05-03T20:38:33.330

除了与只读用户连接之外，您还可以对 DbContext 执行一些其他操作。

```
public class MyReadOnlyContext : DbContext
{
    // Use ReadOnlyConnectionString from App/Web.config
    public MyContext()
        : base("Name=ReadOnlyConnectionString")
    {
    }

    // Don't expose Add(), Remove(), etc.
    public DbQuery<Customer> Customers
    {
        get
        {
            // Don't track changes to query results
            return Set<Customer>().AsNoTracking();
        }
    }

    public override int SaveChanges()
    {
        // Throw if they try to call this
        throw new InvalidOperationException("This context is read-only.");
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Need this since there is no DbSet<Customer> property
        modelBuilder.Entity<Customer>();
    }
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2019-03-10T22:26:57.233

与公认的答案相反，我相信更[倾向于组合而不是继承](https://codingdelight.com/2014/01/16/favor-composition-over-inheritance-part-1/)。那么就不需要保留诸如 SaveChanges 之类的方法来引发异常。此外，为什么你首先需要有这样的方法？您应该设计一个类，使其使用者在查看其方法列表时不会被愚弄。公共接口应该与类的实际意图和目标一致，而在接受的答案中 SaveChanges 并不意味着 Context 是只读的。

在我需要只读上下文的地方，例如[CQRS](https://martinfowler.com/bliki/CQRS.html)模式的读取端，我使用以下实现。除了向消费者提供查询功能外，它不提供任何其他功能。

```
public class ReadOnlyDataContext
{
    private readonly DbContext _dbContext;

    public ReadOnlyDataContext(DbContext dbContext)
    {
        _dbContext = dbContext;
    }

    public IQueryable<TEntity> Set<TEntity>() where TEntity : class
    {
        return _dbContext.Set<TEntity>().AsNoTracking();
    }
} 
```

通过使用 ReadOnlyDataContext，您只能访问 DbContext 的查询功能。假设您有一个名为 Order 的实体，那么您将以如下方式使用 ReadOnlyDataContext 实例。

```
readOnlyDataContext.Set<Order>().Where(q=> q.Status==OrderStatus.Delivered).ToArray(); 
```

如果您想手动选择（和限制）通过这个新上下文公开哪些实体，则可以选择另一种选择。您将删除上面基于泛型的方法（其中包含 TEntity 的完整块）并使用类似于下面的方法。

```
 public IQueryable<MyFirstThing> MyFirstHandPickThings => this.dbContext.Set<MyFirstThing>().AsNoTracking();

    public IQueryable<MySecondThing> MySecondHandPickThings => this.dbContext.Set<MySecondThing>().AsNoTracking(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-23T09:35:44.933

```
public sealed class MyDbContext : DbContext
{
    public MyDbContext(DbContextOptions<MyDbContext> options, IHttpContextAccessor httpContextAccessor)
        : base(options)
    {
        ChangeTracker.QueryTrackingBehavior = QueryTrackingBehavior.NoTracking;
    }
} 
```

并覆盖 SaveChanges 以抛出异常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-11T16:48:35.253

在我使用 EF Core/.NET 5.0 的场景中，我希望 SaveChanges 具有编译时安全性。这仅适用于“新”而不是“覆盖”。

我并排使用读/写和只读上下文，其中一个从另一个继承，因为附加了很多表。这就是我使用的，“ContextData”是我原来的 R/W DbContext：

```
public class ContextDataReadOnly : ContextData
{
    public ContextDataReadOnly() : base()
    {
        ChangeTracker.QueryTrackingBehavior = QueryTrackingBehavior.NoTracking;
    }

    [Obsolete("This context is read-only", true)]
    public new int SaveChanges()
    {
        throw new InvalidOperationException("This context is read-only.");
    }

    [Obsolete("This context is read-only", true)]
    public new int SaveChanges(bool acceptAll)
    {
        throw new InvalidOperationException("This context is read-only.");
    }

    [Obsolete("This context is read-only", true)]
    public new Task<int> SaveChangesAsync(CancellationToken token = default)
    {
        throw new InvalidOperationException("This context is read-only.");
    }

    [Obsolete("This context is read-only", true)]
    public new Task<int> SaveChangesAsync(bool acceptAll, CancellationToken token = default)
    {
        throw new InvalidOperationException("This context is read-only.");
    }
} 
```

注意：

*   在覆盖继承的 SaveChanges*() 时，我必须使用“new”而不是“override”才能出现警告/错误。使用“覆盖”，根本没有编译时错误/警告。

*   使用“覆盖”可以获得 CS0809 [1]，但不会使用“新”

*   使用“new”仅适用于类本身，但不适用于父级：

    ```
    Base b = new Derived();
    Derived d = new Derived();

    b.SaveChanges();     // Calls Base.SaveChanges, will compile and run without exception
    d.SaveChanges();     // Calls Derived.SaveChanges, will not compile 
    ```

*   SaveChanges 和 SaveChangesAsync 的变体需要正确选择（可选）参数。（这是针对 .NET 5.0 的，我没有检查它是否因其他版本的 EF Core/EF 而异）

**结论**

1.  “覆盖”将提供完全继承，但在我的环境中不起作用
2.  "new" 提供了所需的功能，但对于某些多态性场景会返回意外的结果
3.  如果你有很多表，根本不使用继承会很痛苦

==> 没有灵丹妙药，选择取决于品味和环境......

[1] [https://docs.microsoft.com/en-us/dotnet/csharp/misc/cs0809?f1url=%3FappId%3Droslyn%26k%3Dk(CS0809)](https://docs.microsoft.com/en-us/dotnet/csharp/misc/cs0809?f1url=%3FappId%3Droslyn%26k%3Dk(CS0809))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-11T12:37:48.600

由于在**Entity Framework Core**`DbQuery<T>`中不再可用，您需要稍微修改@bricelam 的答案并直接使用：**`IQueryable<T>`**

 **```
public class ReadOnlyContext : DbContext
{
    public IQueryable<Customer> Customers => this.Set<Customer>().AsNoTracking();

    // [...]
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-08-25T20:42:36.363

情况：我需要参考 DB1 在 DB2 中创建记录，并希望在此过程中保护 DB1。DB1 和 DB2 是彼此的模式副本。

我更新了自动生成的实体上下文文件。并在使用 ReadOnly 选项时通过覆盖 SaveChanges() 来实例化实体上下文以中止写入时放入只读选项。

缺点：

1.  您必须在配置设置中创建单独的 EF 连接字符串
2.  自动更新模型时必须小心。保留代码更改的副本，并记住在模型更新后应用它。
3.  未提供未执行保存的通知。我选择不提供通知，因为我的使用非常有限，而且我们执行了很多保存操作。

优点：

1.  您不必实现 CQRS 类型的解决方案。
2.  通过使用相同的实体模型，您不必创建第二个并维护它。
3.  数据库或其用户帐户没有更改。

只需确保在命名上下文实例时使用 ReadOnly 或类似名称命名它。

```
public partial class db1_Entities : DbContext
{
    public bool IsReadOnly { get; private set; }

    public db1_Entities()
        : base(ConfigurationManager.ConnectionStrings["db1_Entities"].ConnectionString)
    {
    }

    public db1_Entities(bool readOnlyDB)
        : base(ConfigurationManager.ConnectionStrings["db1_ReadOnly_Entities "].ConnectionString)
    {
        //  Don't use this instantiation unless you want a read-only reference.
        if (useReferenceDB == false)
        {
            this.Dispose();
            return;
        }
        else
        { IsReadOnly = true; }
    }

    public override int SaveChanges()
    {
        if (IsReadOnly == true)
        { return -1; }
        else
        { return base.SaveChanges(); }
    }

    public override Task<int> SaveChangesAsync()
    {
        if (isReadOnly == true)
        { return null; }
        else
        { return base.SaveChangesAsync(); }
    } 
```

..... }**

# c# - MvcScaffolding: Adding Default Datetime Field & Current User Field (from Forms Authentication)

> ID：10437062
> 
> 赞同：0
> 
> 时间：2012-05-03T18:13:12.927
> 
> 标签：c#, asp.net, entity-framework, forms-authentication, asp.net-mvc-scaffolding

I'm working on a project that uses MvcScaffolding to build a quick CRUD interface (many thanks to Steven Sanderson), but I'm having trouble adding two 'code-first' fields (I normally work in SQL Server and know very little about C#).

I'd like to add a column for the SQL equivalent of `DEFAULT (getdate())`, and a varchar field for representing the name of the user logged in on via Forms Authentication on the project (I believe this is storing `HttpContext.Current.User.Identity.Name`, but I'm not certain).

The end goal is to allow users to log in; create a new record & save; and then the list/index page only returns records where their username is stored in the `CreatedBy` field (in SQL, something like `WHERE CreatedBy = <HttpContext.Current.User.Identity.Name>`).

Any suggestions appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:03:23.810

I feel your pain. I remember encountering this problem myself.

The sad and simple answer is that there is no default annotation that you can use with Code First yet. There is still a lot to be desired when it comes to Code First.

Below is a list of all available annotations that the Entity Framework offers. As you can see it is still a bit limited.

[http://msdn.microsoft.com/en-us/library/gg197525(v=VS.103).aspx](http://msdn.microsoft.com/en-us/library/gg197525(v=VS.103).aspx)

When using the Entity Framework, I myself rely on using a simple EDMX file generated from a database I have created from scratch. This allows you to not have to worry about writing all the CRUD statements and still provides control over the little things.

As far as MVC Scaffolding goes, the EDMX file works exactly the same as a Code First model. I am a huge fan of MVC Scaffolding and I use it with an EDMX file for multiple projects.

In regards to your goal of returning records where their username is stored in the CreatedBy field. There are many way to solve this issue. You can create a query with LINQ or you can write a stored procedure yourself and import it with the EDMX file (another strong point to using EDMX over Code First).

With LINQ it would look something like this:

```
 public List<Record> GetAllRecordsByUserName(string credentials)
    {
        List<Record> recordList;
        using (CustomEntities context = new CustomEntities())
        {

            IQueryable<Section> recordQuery = from records in context.Records
                                                  where records.UserName == credentials
                                                  select records; 
            recordList = recordQuery.ToList<Record>();
        }
        return recordList;
    } 
```

As for writing a stored procedure, you would simply write your stored procedure in TSQL. When the EDMX file has been generated you would right click on the screen and select "Import Function". From there you would find your stored procedure and you will have the option of automatically mapping it to the object you desire, or creating a new Complex Type if the object type does not exist. This is a very powerful tool and it performs better than using the LINQ statement written above.

# .net - 打开文件所需的 window.open URL 上的特殊字符

> ID：10437065
> 
> 赞同：0
> 
> 时间：2012-05-03T18:13:27.497
> 
> 标签：.net, url, special-characters, filenames, window.open

我有一个应用程序，用户可以在其中单击打开文档路径的链接按钮打开文档

```
if (e.CommandArgument.ToString().ToLower().IndexOf(".pdf") > 0)
        ScriptManager.RegisterStartupScript(Page, this.GetType(), "myPopUp", "<script language='Javascript'>mywin=window.open('file:" + e.CommandArgument.ToString().Trim().Replace("\\", "/") + "', '', 'location=0,status=0,resizable=1,scrollbars=1,height=800px, width=1000px');</script>", false); 
```

在这种情况下，当**文件名**类似于 xyz## 时，它读取为 xyz#

如果文件名像 xyz# 它正在读取 xyz

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:41:25.217

在我看来......这些正是由IE引起的问题，但也是由仁慈的程序员引起的。

作为更好的解决方案，我看到如下内容：

window.open('scriptUrl?parameters')

并在脚本内部从参数中获取文件名并在重定向或类似之后返回文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:29:37.983

```
if (e.CommandArgument.ToString().ToLower().IndexOf(".pdf") > 0)
    ScriptManager.RegisterStartupScript(Page, this.GetType(), "myPopUp", "<script language='Javascript'>mywin=window.open('file:" + e.CommandArgument.ToString().Trim().Replace("\\", "/") + "', '', 'location=0,status=0,resizable=1,scrollbars=1,height=800px, width=1000px');</script>", false); 
```

**用这个代替上面的**：

```
if (e.CommandArgument.ToString().ToLower().IndexOf(".pdf") > 0)
    ScriptManager.RegisterStartupScript(Page, this.GetType(), "myPopUp", "<script language='Javascript'>mywin=window.open('file:" + e.CommandArgument.ToString().Trim().Replace("\\", "/") + "', **'_self'**, 'location=0,status=0,resizable=1,scrollbars=1,height=800px, width=1000px');</script>", false); 
```

解决了这个问题。

# iphone - 单击 TTStyledTextLabel 选择 UITableViewCell

> ID：10437068
> 
> 赞同：1
> 
> 时间：2012-05-03T18:13:37.360
> 
> 标签：iphone, ios, uitableview, ttstyledtextlabel

我有一个`TTStyledTextLabel`里面的`UITableViewCell`。单击单元格导航到一个新的视图控制器，因此我无法禁用选择，但是当我单击 时`TTStyledTextLabel`，`UITableViewCell`也选择了。在不选择表格视图单元格的情况下单击 TTStyledTextLabel 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:35:07.503

只需**继承 TTStyledTextLabel**并覆盖以下两个方法：

*   (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
*   (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event

像这样：

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:self];
    point.x -= _contentInset.left;
    point.y -= _contentInset.top;

    TTStyledBoxFrame* frame = [_text hitTest:point];
    if (frame) {
        [self setHighlightedFrame:frame];
    }
}

- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event {
    TTTableView* tableView = (TTTableView*)[self ancestorOrSelfWithClass:[TTTableView class]];
    if (!tableView) {
        if (_highlightedNode) {
            // This is a dirty hack to decouple the UI from Style. TTOpenURL was originally within
            // the node implementation. One potential fix would be to provide some protocol for these
            // nodes to converse with.
            if ([_highlightedNode isKindOfClass:[TTStyledLinkNode class]]) {
                TTOpenURL([(TTStyledLinkNode*)_highlightedNode URL]);

            } else if ([_highlightedNode isKindOfClass:[TTStyledButtonNode class]]) {
                TTOpenURL([(TTStyledButtonNode*)_highlightedNode URL]);

            } else {
                [_highlightedNode performDefaultAction];
            }
            [self setHighlightedFrame:nil];
        }
    }
} 
```

# math - Nth平方自由半素数

> ID：10437080
> 
> 赞同：4
> 
> 时间：2012-05-03T18:14:16.910
> 
> 标签：math

我试图找到第 n 个（n <= 2000000）[平方自由](http://en.wikipedia.org/wiki/Square-free_integer) [半素数](http://en.wikipedia.org/wiki/Semiprime)。我有以下代码可以做到这一点。

```
 int k = 0;
for(int i = 0; i <= 1000; i++)
{
    for(int j = i +1 ; j <= 2500; j++ )
    {
        semiprimes[k++] = (primes[i]*primes[j]);
    }
}
 sort(semiprimes,semiprimes+k); 
```

`primes[]`是一个素数列表。

我的问题是，我得到不同的值`n = 2000000`，对 for 循环有不同的限制。有人可以告诉正确计算这些限制的方法吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:09:58.603

您想计算第 n 个第**一个**半素数无平方数。**“第一”**意味着您必须在某个值下生成所有这些。您的方法包括生成大量这些数字，对它们进行排序并提取第 n 个第一个值。

这可能是一个好方法，但您必须生成所有数字。在嵌套循环中有两个不同的限制是错过其中一些限制的好方法（在您的示例中，您没有计算`primes[1001]*primes[1002]`哪个应该在 中`semiprimes`）。

为避免此问题，您必须计算正方形中的所有半素数，例如`[1,L]*[1,L]`，其中 L 是两个循环的极限。

要确定 L，您只需要计数即可。令 N 为 下的半素数无平方数的个数`primes[L-1]*primes[L-1]`。

`N = (L * L - L) / 2`

L*L 是成对乘法的总数。L 是正方形的数量。这有两个除以二得到正确的数字（因为`primes[i]*primes[j] = primes[j]*primes[i]`）。

你想选择 L 使得 n<=N。所以对于 n = 2000000 ：

```
 int L = 2001, k = 0;
    for(int i = 0; i < L; i++)
    {
        for(int j = i+1 ; j < L; j++ )
        {
            semiprimes[k++] = (primes[i]*primes[j]);
        }
    }
    sort(semiprimes,semiprimes+k); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:59:28.847

我不相信通过计算一个盒子内的所有半素数来工作的方法会在任何合理的时间内工作。假设我们绘制前 200 万个半素数的因子 (p,q)。为了使图形更加对称，让我们为 (p,q) 和 (q,p) 绘制一个点。该图没有形成一个漂亮的矩形区域，而是看起来更像双曲线 y=1/x。这个双曲线延伸得很远，在包含这些的整个矩形上进行迭代将浪费大量的计算。

您可能要考虑首先解决“N 以下有多少个半素数？”的问题。然后使用二进制搜索。每个查询都可以在大约 sqrt(N) 步骤中完成（提示：二分搜索再次触发）。您将需要一个相当大的素数表，肯定至少多达 100 万个，甚至可能更多。虽然这可以通过一些预先计算的任意大的常数因子来减少。

# php - 在jquery的帮助下修改元素的id

> ID：10437081
> 
> 赞同：0
> 
> 时间：2012-05-03T18:14:20.687
> 
> 标签：php, jquery, jquery-ui

我想在 jquery 的帮助下修改元素 id

```
<img src="images/AOL_button.png" id='http://openid.aol.com/***username***' class="indirect" />
<img src="images/google_button.png" id='https://www.***username***.google.com/accounts/o8/id' class="direct"/> 
```

所以使用 jquery 我想根据条件将“用户名”的值更改为其他值

```
$(.direct).click(function(){
   var username=userA;
   // replace username from id here
})

$(.direct).click(function(){
   var username=userB;
   // replace username from id here
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:15:42.897

尝试如下，

```
$('.direct').click(function(){
   var username=userA;
   //            ^--assuming userA is a var in scope 
   //            if it is a string, just use it below as "userA"(including the quotes)
   this.id = this.id.replace('***username***', username);
}); 
```

# android - 检测设备移动距离

> ID：10437082
> 
> 赞同：1
> 
> 时间：2012-05-03T18:14:31.853
> 
> 标签：android, location

检测用户设备移动的最佳方法是什么？现在，我正在使用网络/GPS 位置来确定小间隔的最佳坐标。但是，将用户运动信息的准确性提高到几米会很棒。地理位置很大程度上取决于网络连接质量或天气。有没有办法找到有关设备移动的非常准确的信息？加速度计可能有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:19:17.170

加速度计往往是测量移动距离的糟糕方法，因为加速度或方向测量中的最轻微误差会迅速集成到相当大的位置误差。对于消费类设备中使用的低精度组件来说，情况更是如此——飞机/航天器中使用的惯性导航系统并不便宜，甚至那些可能还不够准确，无法满足您的需求。

如果您想要定位精度，尤其是在任何时间段内，您需要像 GPS 那样测量与外界的关系。有各种可用的信标系统，使用诸如超声波之类的东西，甚至可以将假卫星添加到 GPS 系统中，您可以查看这些系统，但这并不简单。

# javascript - jQuery.data() 命名空间

> ID：10437083
> 
> 赞同：8
> 
> 时间：2012-05-03T18:14:40.747
> 
> 标签：javascript, jquery, html

如何避免与其他使用 jQuery 插件的冲突`$.data()`？

我在想我可以使用一个键来存储我的数据，比如

`$(el).data('myplugin', { foo: 'a', xyz: 34});`

`$(el).data('myplugin').foo`并像等一样访问它。

但是如何在不覆盖整个数据的情况下轻松更改值？就像改变“foo”的值一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:18:18.873

为什么不使用

```
$(el).data('myplugin.foo') 
```

和

```
$(el).data('myplugin.xyz') 
```

?

因此，如果您不需要同时访问多个值，则可以避免无用的间接和测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T18:18:20.003

只需更改您要更改的属性。

[http://jsfiddle.net/rQQdf/](http://jsfiddle.net/rQQdf/)

```
var el = $("<div />");    
el.data("myPlugin",{ foo: "foo" });
console.log(el.data("myPlugin").foo); // foo
el.data("myPlugin").foo = "bar";
console.log(el.data("myPlugin").foo); // bar 
```

至于命名空间冲突，一种解决方案是在运行时（定义插件时）生成时间戳并在命名空间中使用该时间戳。在最快的浏览器中，它仍然不能 100% 防止冲突，但它已经非常接近了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T18:22:41.767

我个人使用连字符分隔的命名约定，它在类名、ID、数据属性等前面加上拥有代码的实体的缩写标识符，一个用于功能区域。

如果我正在为 Foo 公司开发图表程序，我的前缀可能是：

```
foo-chart- 
```

这使我可以使所有公司标识符对公司而言都是唯一的，并且代码区域彼此唯一（以避免在其他功能领域与其他开发人员发生冲突）。

**人为的例子：**

```
<button id="foo-chart-refresh" class="foo-chart-interact" data-foo-chart-last="201205031421">Refresh Chart</button>
<script type="text/javascript">
    var lastRefresh = $('#foo-chart-refresh').data('fooChartLast'); // see docs on .data() for case/hyphenation handling
</script> 
```

我发现使用连字符几乎适合任何需要我的标识符的地方——作为标记属性值*或*名称，或者在代码等中。你可以使用任何适合你需要的字符（`.`很常见）

# iphone - 从 sqlite 文件中选择数据中的 NSInvalidArgumentException

> ID：10437086
> 
> 赞同：3
> 
> 时间：2012-05-03T18:14:46.877
> 
> 标签：iphone

我以以下格式存储数据

```
 05/03/2012 10:11PM : <0818aaaa aaaaaaaa aaaa454d 554c4154 4f520000 00000000 0000> 
```

但是当检索数据时，我使用以下方法

```
 sqlite3 *database;

if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    // Setup the SQL Statement and compile it for faster access
    const char *sqlStatement = "select logText from logTable";

    sqlite3_stmt *compiledStatement;

    if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {

        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {              

            NSString *addressField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(compiledStatement, 0)];

            // Read the data from the result row

            fullLog=[NSString stringWithFormat:@"%@%@",fullLog,addressField];

        } // end of the while

    }
    sqlite3_finalize(compiledStatement);
}
sqlite3_close(database); 
```

我收到以下错误，

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSPlaceholderString initWithUTF8String:]: NULL cString' 
```

***在第一次抛出时调用堆栈：

请帮助为什么会出现这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:25:32.917

您不能`NSString`使用指针初始化对象，`NULL`因此只需检查该条件：

```
const char* addressField_tmp = (const char*)sqlite3_column_text(compiledStatement, 0);

NSString *addressField = addressField_tmp == NULL ? nil : [[NSString alloc]           initWithUTF8String:addressField_tmp]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:34:39.257

请使用以下代码修复它，而不是您的代码。

```
 NSString *addressField = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 0)]; 
```

# qt - 我想处理在 QWebView 中单击的链接

> ID：10437091
> 
> 赞同：2
> 
> 时间：2012-05-03T18:15:15.143
> 
> 标签：qt, qwebview

所以这是我的问题：我想在`QWebView`. 有信号

`void QWebView::linkClicked ( const QUrl & url )`

当用户单击链接时发出，因此我可以将其用于我的目的，但这取决于 `linkDelegationPolicy property`默认情况下设置为不委托链接的值

但我不能改变它，因为它是一个函数，`QWebPage`我有一个`QWebView`并且`QWebView`不继承自`QWebPage`......所以我真的很困惑

请提供任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:26:57.190

QWebView 有一个底层的 QWepPage。[您可以使用QWebView::page()](http://doc.qt.nokia.com/4.7-snapshot/qwebview.html#page)方法获取指向它的指针。

# html - JSF Bean 返回 HTML 到 DataTable

> ID：10437097
> 
> 赞同：1
> 
> 时间：2012-05-03T18:15:42.633
> 
> 标签：html, jsf, datatable

这是我的`dataTable`，我需要我的 bean 属性`status`是这样的：

`<span class="label label-warning">Warning</span>`但它正在打印文本，而不是编译`html`and `dataTable`or`column`没有`espace`选项。有没有办法解决这个问题？

```
<h:dataTable value="#{pedidoController.orderList}" var="order"
                                 styleClass="table table-striped">
                        <h:column>
                            <f:facet name="header">#</f:facet>
                            #{order.orderNo}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Cliente</f:facet>
                            #{order.client}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Data</f:facet>
                            #{order.date}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Status</f:facet>
                            #{order.status}
                        </h:column>
                    </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:20:00.903

使用 h:outputText 来显示数据而不是隐式的 JSF 输出。检查[这个相关问题](https://stackoverflow.com/questions/10402900/writing-html-in-a-string/10403035#10403035)，看看它是否能解决您的问题。

# jquery - 如何让 ajax .load 函数不重新加载整个页面

> ID：10437101
> 
> 赞同：0
> 
> 时间：2012-05-03T18:15:50.340
> 
> 标签：jquery

我正在使用 ajax .load 函数在我的网站上加载内容和图像。单击链接后，我希望将目标内容（带有#sub-content 的任何页面）动态加载到#content div中。到目前为止，代码可以加载内容。但是，在第一次加载任何页面时，似乎整个页面仍在浏览器中重新加载。更具体地说，单击链接时，带有导航和标题的左侧边栏区域会闪烁。直到第一次加载页面并缓存在浏览器中，然后再次单击加载功能才能按我想要的方式工作。也就是说，加载内容而不重新加载整个页面，即侧边栏和导航。

那么问题是**如何使此代码工作以链接到所需的页面并将其加载到#content div中而无需在初始单击时重新加载整个页面？**（我以前使用 iframe 来加载内容，但这种方法显然是最新的，我希望我可以让它工作）。谢谢！！

网站网址：[www.adamclarkart.com](http://www.adamclarkart.com)

编码：

```
 // Part 1
$(document).ready(function(){
    $("#content").load("beach-1.html");
});

$(function(){

        $('#illustrationsSection a').click(function(){
            location.hash=$(this).attr('href').match(/(^.*)\./)[1]
            return false
        })

        $('#sketchesSection a').click(function(){
            location.hash=$(this).attr('href').match(/(^.*)\./)[1]
            return false
        })

        $('#motionTab a').click(function(){
            location.hash=$(this).attr('href').match(/(^.*)\./)[1]
            return false
        })

        $('#infoTab a').click(function(){
            location.hash=$(this).attr('href').match(/(^.*)\./)[1]
            return false
        })

        $('#info a').click(function(){
            location.hash=$(this).attr('href').match(/(^.*)\./)[1]
            return false
        })
// Part 2 
        var originalTitle=document.title
        function hashChange(){
            var page=location.hash.slice(1)
            if (page!=""){
                $('#content').load(page+".html #sub-content")
                document.title=originalTitle+' – '+page
            }
        }

// Part 3, ajax spinner .gif
    $('html')
    .ajaxStart(function(){
        $(this).addClass('ajax-spinner')
    })
    .ajaxStop(function(){
        $(this).removeClass('ajax-spinner')
    })

// Part 4
        if ("onhashchange" in window){ // cool browser
            $(window).on('hashchange',hashChange).trigger('hashchange')
        }else{ // lame browser
            var lastHash=''
            setInterval(function(){
                if (lastHash!=location.hash)
                    hashChange()
                lastHash=location.hash
            },100)
        }
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:22:59.767

我将为这些链接应用一个类，以便我可以在 jQuery 选择器上轻松选择

```
<a href="media.php" class="ajaxLink">Media</a>
<a href="photos.php" class="ajaxLink">Photos</a>
<a href="contact.php" class="ajaxLink">Contact</a> 
```

**脚本**

```
$(function(){

  $(".ajaxLink").click(function(e){
   e.preventDefault();
   $("#content").load($(this).attr("url"));   
  });

}); 
```

# spring - JSF，如何启动一个单独的线程来处理pdf生成并直接渲染视图

> ID：10437102
> 
> 赞同：2
> 
> 时间：2012-05-03T18:15:50.370
> 
> 标签：spring, jsf-2

我通常使用带有一些字段的 jsf 页面。用户最终调用托管 bean 的函数

```
 <h:commandButton value="Go" action="#{myManagedBean.myFunction}"/> 
```

在 myFunction 中，使用飞碟库生成 pdf，并以 pdf 文件作为附件发送电子邮件。

我的问题：PDF生成需要一段时间......所以当用户点击h：command按钮时，数据被发送，页面正在处理很长时间......

如何快速向用户呈现 jsf 视图并在单独的线程中开始处理 PDF（并稍后发送邮件）。

任何帮助将不胜感激！克里斯托夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:02:30.910

这个问题并不真正依赖于 JSF 也不依赖于 spring。既然你已经用 spring 标记了你的问题，请看[这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html)。`TaskExecutor`是用于异步处理的抽象 API。如果您不想要 spring 依赖项，请`java.util.concurrent.Executor`使用`ThreadPoolExecutor`.

使用单个`ThreadPoolExecutor`用于此任务 - 例如弹簧单例 - 您可以通过设置适当的池大小来控制可以并行运行多少个 pdf 生成线程。

```
executor.execute(new Runnable() {
  public void run() {
    Reader r = generatePDF(someData);
    sendEmail(r, userData);
    r.close(); // in finally preferably
  }
} 
```

如果您想在 pdf 生成完成后更新 JSF GUI，您可以尝试一些推送实现，但如果可能的话我会避免这种情况。

# javascript - 我应该和不应该在 javascript 中缓存什么？

> ID：10437103
> 
> 赞同：0
> 
> 时间：2012-05-03T18:15:50.450
> 
> 标签：javascript, caching

我知道缓存将被多次使用的对象是个好主意。但是，如果我将多次使用以下内容怎么办：

```
var chacheWindow = window;
var chacheDocument = document;
var chacheNavigator = navigator;
var chacheScreen = screen;
var chacheWindowLocationHash = window.location.hash;
var chacheDocumentBody = document.body; 
```

也许只有在 之间追逐东西才有好处`<html></html>`？请解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T18:20:48.593

缓存的目的是避免：

**重复输入长名称**

您的每个示例的名称都比原始名称长，因此您不会获得这种好处

**避免重复进行昂贵的操作**（或稍微昂贵的操作，例如`array.length`在`for`循环之前，非常多次）

也没有迹象表明您正在获得这种好处。

您可能根本不应该复制对局部变量的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:22:13.097

很难确切地说*你*应该缓存什么。

我不会缓存本地全局对象或可能改变的东西。您在示例中所做的只是创建对同一对象的另一个引用。

应该缓存对 DOM 元素的引用，否则您将花时间再次*搜索它们*。执行繁重操作的函数的*结果*也可以被缓存。

您可以使用一些分析器并查看不同功能的性能，以提示您应该缓存什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:22:06.037

缓存是一把双刃剑。如果您有一些需要密集计算的值或需要往返服务器的值，那么缓存是一个绝妙的主意。对于您在问题中指定的几乎所有值，您并没有给自己买任何东西。您只是将一个变量引用替换为另一个。

一般来说，让自己陷入这些微优化并不是一个好主意。优化和提高性能是好的，但你的时间通常最好花在寻找工作量太大的循环或修复错误的算法上，而不是处理这种情况，如果有任何改进，你只看一个最多只提高纳秒 - 但是对于您提到的值，您绝对不会看到任何改进。

# php - 如何通过 URL 捕获/传递关键字并将其传递给 PHP 页面

> ID：10437106
> 
> 赞同：1
> 
> 时间：2012-05-03T18:16:06.080
> 
> 标签：php, html, forms, url, get

我希望通过 URL 字符串将关键字从 HTML 页面传递到 PHP 页面。 **请参阅下面的示例以了解我所说的内容：**

mysite.com/index.html?keyword=Google

“*关键字*”是**谷歌**，它需要转到我的感谢页面。

mysite.com/thankyou.php

我在“谢谢”页面上使用的代码是：

```
<?php $id = $_GET['keyword']; echo $id;?> 
```

**注意：**我已经访问并尝试了在 stackflow 站点上找到的链接......但它们似乎都不起作用（至少从我对它们所做的事情来看）。当涉及到代码时，我是否遗漏了其他任何事情？

[如何获取当前 URL，然后获取最后一句话](https://stackoverflow.com/questions/4418831/how-do-i-get-the-current-url-and-then-get-the-last-words)

[如果是这样的 <keyword>，我如何获取 url？](https://stackoverflow.com/questions/8355687/how-can-i-get-the-url-if-it-is-like-this-keyword)

[如何从 URL 传递关键字但将其隐藏？（广告词）](https://stackoverflow.com/questions/8022603/how-to-pass-a-keyword-from-url-but-keep-it-hidden-adwords)

**[如果您可以在http://jsfiddle.net](http://jsfiddle.net)页面上提供一个功能示例，那么我可以了解它是如何工作的。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:19:14.327

您需要在 php 页面 url 上有 get 变量，而不是 index.html 页面。

示例：mysite.com/thankyou.php?keyword=Google

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:41:42.110

或者，您可以编写一个 html`<form>`并制作一个`<input type="hidden" name="keyword" value="Google">`并从 POST 而不是使用 PHP 的 GET 获取它。

```
<?php $id = $_POST['keyword']; ?> 
```

# mysql - 为什么我的 Perl 脚本无法连接到数据库？

> ID：10437116
> 
> 赞同：0
> 
> 时间：2012-05-03T18:16:35.177
> 
> 标签：mysql, perl, dbi, perl-module

我有一个从 MySQL 数据库中检索数据的 Perl 脚本。这是代码：

```
sub startSession{
    my $self = shift;

    my $dsn = "dbi:".$self{platform}.":".$self{database}.":".$self{host}.":".$self{port};
    print "$dsn\n" ;
    $self{dbHandle} = DBI->connect($dsn,$user,$password);   
} 
```

我提供了来自外部文件的所有信息。我收到错误消息

`DBI connect('dbname:**.**.**.**:3306','',...) failed: Access denied for user 'root'@'dbserver' (using password: NO) at line 89`

`Can't call method "prepare" on an undefined value at at line 97`

我非常确定 root 可以从任何主机连接，并且密码也是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:20:07.450

我看到的警告的关键部分是“ **using password: NO** ”。检查密码是否设置正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T18:30:34.607

首先，正如@Sinan Ünür 所说，您的直接问题是您需要更改`$self{platform}`为`$self->{platform}`等。

`$user`您的第二个直接问题是，您似乎`$password`从无处获得（它们没有传递给函数，因此除非它们是全局变量，否则它们是未定义的），这可以解释`using password: NO`错误的一部分。也许那些应该是`$self->{user}`和`$self->{password}`？

您应该考虑将其放在模块的顶部，至少在开发期间，以自动捕获如下错误：

```
use warnings qw(all);
use strict; 
```

但我还要评论，从设计的角度来看，您确实应该将 DSN 视为不透明的字符串。每个数据库都有自己的 DSN 格式。因此，如果您想要针对不同的数据库，您将需要不同的 DSN 格式。或者，可能有一天 MySQL 会使用不同的格式（它已经有两种格式）。无论哪种方式，在配置文件中将其更改为一个位置要比跟踪将各个部分连接在一起的每个位置要容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T18:22:23.287

据推测，`$self`是一个 hashref，而不是一个普通的 hash，并且你没有[警告](http://perldoc.perl.org/warnings.html)。因此，打开它们并使用`$self->{platform}`等。

# javascript - Javascript - 动画管或线来写文本

> ID：10437120
> 
> 赞同：0
> 
> 时间：2012-05-03T18:16:48.420
> 
> 标签：javascript, drawing

是否可以为具有某些效果的矢量线设置动画以编写文本/绘制图像？

这是我正在寻找的一个例子；

![在此处输入图像描述](../Images/97fa900d2834e04fc3ef88e087d89d2f.png)

我怎么会

1.  从直线过渡到那？

2.  从一种形状过渡到另一种形状？

3.  它是否从侧面进入并追踪图像（如电子游戏“蛇”或“电子循环”）？

用纯粹的编程术语来说，我认为这意味着移动一个点并留下痕迹。

最好这将是矢量而不是画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:24:09.143

矢量图形（IMO）的最佳 JS 库是[http://raphaeljs.com/](http://raphaeljs.com/)

以下示例向您展示如何为形状设置动画 [http://raphaeljs.com/animation.html](http://raphaeljs.com/animation.html)

像下面这样的东西会从正方形动画到三角形

```
var path1 = "M170,220l40,0 0,40 -40,0z",
    path2 = "M290,220l20,40 -40,0z";
r.path("M170.5,220.5l40,0 0,40 -40,0z").attr(dashed);
r.path(path2).attr(dashed);
var el = r.path(path1).attr({fill: "none", stroke: "#fff", "stroke-width": 2}),
    elattrs = [{path: path2}, {path: path1}],
    now = 1;
r.arrow(240, 240).node.onclick = function () {
    el.stop().animate(elattrs[+(now = !now)], 1000);
}; 
```

# java - android客户端-java服务器实现

> ID：10437123
> 
> 赞同：0
> 
> 时间：2012-05-03T18:16:56.517
> 
> 标签：java, android, client

我正在构建一个 android 客户端 - 单服务器应用程序，并希望使用 JSON 对象进行通信。服务器上会有一些简单的数据库。什么是服务器端实现的好方案。这是我的选择：

Socket 编程——那我还能在 android 客户端上使用 HttpClient 吗？HttpServer - 我听说它不适用于 android，你如何在服务器端进行多线程处理？

任何其他建议都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:24:40.860

在这个 SO 问题上有一些有趣的讨论，可能会提供一些有用的信息：[How to call a SOAP web service on Android](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-with-android)

# entity-framework-4 - 更新数据返回无法在对象中插入重复的键行

> ID：10437129
> 
> 赞同：1
> 
> 时间：2012-05-03T18:17:09.763
> 
> 标签：entity-framework-4

我正在使用实体框架，我的数据库的结构是这样的：

一个用户有一组订阅者，所以......

订阅者：名称 UserId 用户（在用户对象上导航）

如果我在没有用户的情况下获得订户，我会修改“名称”并提交更改并且一切正常，但是如果我在 CommitAndRefreshChanges 中获得用户实例化的订户，则会抛出我：无法在对象中插入重复的键行具有唯一索引 'PK_Email' 的 dbo.User'。\r\n语句已终止

但我没有为用户改变任何东西......我做错了什么？

要获取我在存储库上运行的订阅者：

```
 RegistrationModuleDataModelContainer context = UnitOfWork as RegistrationModuleDataModelContainer;

 Subscriber subscriber = (from s in context.Subscribers.Include(it=>it.User)
                                where s.IdSubscriber == idSubscriber
                                select s).FirstOrDefault(); 
```

要修改数据，请使用以下代码：

```
Subscriber subscriber = this.GetSubscriberWithUser(idSubscriber);
        subscriber.FirstName = FirstName;
        subscriber.LastName = LastName;

         //Condition with subscriber.User.x
              subscriber.Email = Email;

        _subscriberRepository.Modify(subscriber);

        IUnitOfWork unitOfWork = _subscriberRepository.UnitOfWork;
        unitOfWork.CommitAndRefreshChanges(); 
```

如果我删除条件，无论如何都会失败，问题是当我与用户一起加载订阅者时，如果我只加载订阅者，则提交有效。

谢谢！

# java - 如何使 JPanel 透明？

> ID：10437132
> 
> 赞同：1
> 
> 时间：2012-05-03T18:17:15.300
> 
> 标签：java, swing, user-interface, transparency, jpanel

我尝试使用 setOpaque(false); 但它只是让 JPanel 的背景变白。我如何让它根本不绘制面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:21:10.803

你自己回答了这个问题。

JPanel 没有变成白色，但它显示了——因为它变得不透明——它后面的 JFrame（或其他控件）。

# javascript - 使用客户端访问位于列的页脚模板中的特定控件

> ID：10437134
> 
> 赞同：2
> 
> 时间：2012-05-03T18:17:20.593
> 
> 标签：javascript, asp.net, telerik

我需要访问位于 gridtemplatecolumn 的页脚模板中的标签 (lblTotalWeight)。从那里我想改变前景色，虽然我想在客户端做这一切。您可以在下面的函数中看到我已经成功访问​​了每一行，尽管似乎对页脚这样做并不那么直接。到目前为止，我的研究一直导致服务器端解决方案，或者曾经是硬编码的 row[] cell[] 情况。

get_masterTableViewFooter 还没有返回任何东西。

哦，我后面的代码是用 C# 编写的。

JavaScript：

```
 function GridCreated(sender, eventArgs) {
        grid = $find("<%=rgActivities.ClientID %>");
        var masterTable = grid.get_masterTableView();
        var rows = masterTable.get_dataItems();
        var total = 0.0;

        for (var row = 0; row < rows.length; row++) {
            var rcb = rows[row].findControl("rcbWeight");
            total += parseInt(rcb.get_value());
        }

        if (total== 100) {
           //lblTotalWeight = black;
        } 
        else {
          //lblTotalWeight = Red;
        }
    } 
```

（作为旁注 rcb 是 RadComboBox。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:43:03.923

你可能需要稍微调整一下，但这样的事情应该会让你接近：

```
var footerLabelID = '<%= ((GridFooterItem)rgActivities.MasterTableView.GetItems(GridItemType.Footer)[0]).FindControl("lblTotalWeight").ClientID %>';

var footerLabel = document.getElementById(footerLabelID);
if (footerLabel){
    footerLabel.innerText = "Hello World!";
} 
```

# delphi - 如何通过索引访问 WideString 的字符？

> ID：10437144
> 
> 赞同：4
> 
> 时间：2012-05-03T18:17:50.090
> 
> 标签：delphi, delphi-5, widestring

我有以下无法编译的代码片段：

```
procedure Frob(const Grob: WideString);
var
   s: WideString;
begin
   s := 
       Grob[7]+Grob[8]+Grob[5]+Grob[6]+Grob[3]+Grob[4]+Grob[1]+Grob[2];
   ...
end; 
```

德尔福⁵抱怨`Incompatible types`。

我尝试将其简化为：

```
s := Grob[7]; 
```

哪个有效，并且：

```
s := Grob[7]+Grob[8]; 
```

没有。

我只能假设`WideString[index]`不返回 a `WideChar`。

我试图强迫事情成为`WideChars`：

```
s := WideChar(Grob[7])+WideChar(Grob[8]); 
```

但这也失败了：

> 不兼容的类型

## 脚注

*   `5`: 德尔福 5

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T18:57:38.760

在您的情况下，更简单、更快捷的是以下代码：

```
procedure Frob(const Grob: WideString);
var
   s: WideString;
begin
  SetLength(s,8);
  s[1] := Grob[7];
  s[2] := Grob[8];
  s[3] := Grob[5];
  s[4] := Grob[6];
  s[5] := Grob[3];
  s[6] := Grob[4];
  s[7] := Grob[1];
  s[8] := Grob[2];
   ...
end; 
```

使用`WideString(Grob[7])+WideString(Grob[8])`表达式会起作用（它可以规避 Delphi 5 错误，您不能通过该错误`WideString`从 的串联中生成 a `WideChars`），但速度要慢得多。

创建 a`WideString`非常慢：它不使用 Delphi 内存分配器，而是使用 Windows 提供的 BSTR 内存分配器（用于 OLE），这非常慢。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T18:27:59.520

`Grob[7]`是一个`WideChar`；那不是问题。

问题似乎是`+`操作员不能对宽字符采取行动。但它可以作用于宽字符串，并且任何宽字符都可以转换为宽字符串：

```
S := WideString(Grob[7]) + WideString(Grob[8]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T18:38:49.287

正如 Geoff 指出我在 Delphi 中处理 WideString 怪异的另一个问题，我从那里随机尝试了我的解决方案：

```
procedure Frob(const Grob: WideString);
var
   s: WideString;
const
   n: WideString = ''; //n=nothing
begin
   s := 
      n+Grob[7]+Grob[8]+Grob[5]+Grob[6]+Grob[3]+Grob[4]+Grob[1]+Grob[2];
end; 
```

它有效。Delphi 对什么类型的 a 感到困惑`WideString[index]`，所以我必须克服它。

# c - 通过 LD_PRELOAD 插入 JVM 时卡在关闭套接字

> ID：10437146
> 
> 赞同：0
> 
> 时间：2012-05-03T18:18:01.167
> 
> 标签：c, sockets

我通过 LD_PRELOAD 变量插入 JVM。

基本上，我想建立一个虚拟路由表（VRT）。在调用 bind() 时，我将 IP 地址和端口参数修改为我的选择（我保存在 VRT 中）。此外，我将套接字描述符（bind() 的第一个参数）添加到链接列表中。（直到这个阶段，socket 的 sin_family 类型为 AF_INET6）。

现在当套接字关闭时（close()），我想删除虚拟路由表条目。因此，我检查我们试图关闭的套接字描述符是否存储在链接列表中。如果是，则说明它的记录存在于VRT中，所以我应该在关闭套接字之前删除VRT条目。我面临的问题是，在这个阶段，同一个套接字描述符的 sin_family 值为 1（我不知道它代表什么）而不是 10（AF_INET6，bind() 期间的值）。此外，我在这个阶段尝试打印套接字描述符的 IP 地址和端口，但它是垃圾。

我不知道我错过了什么。

更新：我的代码没有问题。由于 JVM 的以下行为（我通过 strace 跟踪）而出现异常

```
9722  socket(PF_INET6, SOCK_STREAM, IPPROTO_IP) = 12
...(receive messages)...
9722  dup2(11, 12)                      = 12 (?!?)
9722  close(12)                         = 0 
```

JVM 在我们的套接字上复制了另一个文件描述符，因此它的 sin_family 在 close() 上没有正确显示。奇怪的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:48:00.323

`sin_family == 1`即`AF_UNIX`，即管道或域名套接字。

* * *

你确定它真的是“相同”的套接字描述符吗？你怎么识别它？它的整数值仅对进程是唯一的。

如果你的进程`LD_PRELOAD`派生出子进程，他们也将使用你的钩子，使用与父进程相同的描述符集，以及他们所有的兄弟姐妹和孩子都会这样做。

因此，要解决这种歧义`getpid()`，请在挂钩`bind()`代码中使用 PID，并将 PID 添加到您为此套接字存储的密钥中。

* * *

`dup2(int fdOld, int fdNew)`在`fdNew`将其复制为`fdOld`. 但我想你不能把`close()`它挂起来，我想:-(。

# mysqli - 自定义 mysqli 类与 php 5.4 有错误？

> ID：10437147
> 
> 赞同：1
> 
> 时间：2012-05-03T18:18:04.660
> 
> 标签：mysqli, php, strict

我刚刚将我的网络服务器升级到 php 5.4，并且在使用从内置 mysqli 扩展的数据库类的网站上遇到错误。错误出现在我班级的最后一行，尽管出现错误消息，但一切正常......

错误信息：

```
Strict Standards: Declaration of yamiko_mysqli::connect() should be compatible with mysqli::connect($host = NULL, $user = NULL, $password = NULL, $database = NULL, $port = NULL, $socket = NULL) in /home/markwe6/public_html/_php/yamiko_mysqli.php on line 109 
```

课程是：

```
class Yamiko_mysqli extends mysqli
{
    public $host='localhost';
    public $user='markwe6_yamiko';
    public $pass='1chrysanthemum!';
    public $db='markwe6_cp';
    public $result=NULL;#stores most recent result

    /*
     * 
     */
    public function __construct($auto=TRUE)
    {
        if($auto)
        {
            return $this->connect();
        }else
        {
            return TRUE;
        }
    }

    /*
     * 
     */
    public function connect($auto=TRUE, $user=NULL, $pass=NULL, $host=NULL, $db=NULL)
    {
        if($auto)
        {
            parent::__construct($this->host, $this->user, $this->pass, $this->db);
            return $this->check_error();
        }else
        {
            parent::__construct($host, $user, $pass, $db);
            return $this->check_error();
        }
    }

    /*
     * 
     */
    public function query($sql)
    {
        $result=parent::query($sql);
        if($this->check_error())
            return FALSE;
        $this->result=$result;
        return $result;
    }

    /*
     * 
     */
    private function check_error()
    {
        if($this->connect_error!=NULL)
        {
            $GLOBALS['yamiko']->set_error('yamiko_myslqi connection error: '.$this->connect_error);
            return FALSE;
        }elseif ($this->error!=NULL)
        {
            $GLOBALS['yamiko']->set_error('yamiko_myslqi error: '.$this->error);
            return FALSE;
        }
    }
}#this is line 109....-_- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:20:25.660

> 自定义 mysqli 类与 php 5.4 有错误？

不，不是错误，而是严格的标准警告。如果您认为警告是错误，那么是的，您的自定义 mysqli 类在 php 5.4 中存在错误。

严格的标准警告内容如下：

如果您打算从基类扩展。连接函数的声明必须与基类之一匹配：

```
mysqli::connect($host = NULL, $user = NULL, $password = NULL, $database = NULL, $port = NULL, $socket = NULL) 
```

在您的情况下，它不会：

```
Yamiko_mysqli::connect($auto=TRUE, $user=NULL, $pass=NULL, $host=NULL, $db=NULL) 
```

如您所见，两者都有不同的参数。

`NULL`在您的情况下，修复相当简单，如果您提供类自己的默认值，您只需重新使用第一个参数：

```
/*
 * 
 */
public function connect($host = NULL, $user = NULL, $password = NULL, $database = NULL, $port = NULL, $socket = NULL)
{
    if($host === NULL)
    {
        parent::__construct($this->host, $this->user, $this->pass, $this->db);
        return $this->check_error();
    }else
    {
        parent::__construct($host, $user, $password , $database, $port, $socket);
        return $this->check_error();
    }
} 
```

请注意默认配置中缺少端口和套接字。

# performance - Quickhull - 凸包上的所有点 - 性能不佳

> ID：10437149
> 
> 赞同：2
> 
> 时间：2012-05-03T18:18:12.097
> 
> 标签：performance, computational-geometry, convex-hull

当输入中的所有点都位于凸包上时，如何避免快速壳算法的性能不佳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:32:26.810

QuickHull 的性能主要来自能够在每次递归调用（或迭代）时丢弃一部分输入。不幸的是，当所有点都在一个圆上时，这不会发生。即使在这种情况下，如果拆分步骤在每次递归调用时都提供了相当平衡的分区，仍然可以获得*O(nlog n)的最坏情况性能。*导致二次运行时的最坏情况是我们在每次调用中都有严重不平衡的分割（比如一个分割总是以空的结尾）。因为这在很大程度上取决于数据集，所以对此无能为力。

您可能想尝试其他算法，例如[Andrew 的 Graham 的 scan 变体](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)或[MergeHull](http://www.cse.unsw.edu.au/~lambert/java/3d/divideandconquer.html)。两者都保证了*O(nlog n)*最坏情况的时间复杂度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-26T04:43:47.660

对于一些算法实现比较，我建议看我的文章：[Fast and Improvement 2D Convex Hull algorithm and its implementation in O(n log h)](https://www.codeproject.com/Articles/1210225/Fast-and-improved-D-Convex-Hull-algorithm-and-its)比较许多 2D 算法的性能，如：

*   单调链
*   格雷厄姆扫描
*   德劳内/沃罗诺伊
*   陈
*   刘和陈
*   欧莱（我的）

# android - 移动设备上的 Twitter Bootstrap 模式

> ID：10437151
> 
> 赞同：69
> 
> 时间：2012-05-03T18:18:19.403
> 
> 标签：android, ios, mobile, webkit, twitter-bootstrap

Bootstrap 模态在 Android 和 iOS 上无法正常工作。问题跟踪器承认问题，但不提供有效的解决方案：

[2.0 中的模态在移动设备上被破坏。](https://github.com/twitter/bootstrap/issues/3230)

[2.0 中的模态窗口没有正确定位](https://github.com/twitter/bootstrap/issues/1036)

屏幕变暗，但模态本身在视口中不可见。可以在页面顶部找到它。当您在页面上向下滚动时会出现问题。

这是 bootstrap-responsive.css 的相关部分：

```
.modal {
    position:fixed;
    top:50%;
    left:50%;
    z-index:1050;
    max-height:500px;
    overflow:auto;
    width:560px;
    background-color:#fff;
    border:1px solid #999;
    -webkit-border-radius:6px;
    -moz-border-radius:6px;
    border-radius:6px;
    -webkit-box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);
    -moz-box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);
    box-shadow:0 3px 7px rgba(0, 0, 0, 0.3);
    -webkit-background-clip:padding-box;
    -moz-background-clip:padding-box;
    background-clip:padding-box;
    margin:-250px 0 0 -280px;
} 
```

我可以申请修复吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-30T04:56:44.637

**编辑：已经建立了一个[非官方的引导模式修改来解决响应/移动问题。](https://github.com/jschr/bootstrap-modal)这可能是解决问题的最简单和最简单的方法。**

此后[，在您之前讨论的问题之一中找到了修复程序](https://github.com/twitter/bootstrap/issues/3230#issuecomment-5629022)

在`bootstrap-responsive.css`

```
.modal { 
    position: fixed; 
    top: 3%; 
    right: 3%; 
    left: 3%; 
    width: auto; 
    margin: 0; 
}
.modal-body { 
    height: 60%; 
} 
```

并且在`bootstrap.css`

```
.modal-body { 
    max-height: 350px; 
    padding: 15px; 
    overflow-y: auto; 
    -webkit-overflow-scrolling: touch; 
 } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-02T06:42:30.783

Gil 的回答很有希望（他链接到的库）——但目前，在移动设备上向下滚动时它仍然不起作用。

我只在我的 CSS 文件末尾使用了一段 CSS 为自己解决了这个问题：

```
@media (max-width: 767px) {
  #content .modal.fade.in {
    top: 5%;
  }
} 
```

选择`#content`器只是一个包装我的 html 的 id，因此我可以覆盖 Bootstrap 的特异性（设置为您自己的 id 包装您的模态 html）。

**缺点：**它不在移动设备上垂直居中。

**好处：**它是可见的，并且在较小的设备上，合理大小的模态将占据大部分屏幕，因此“非居中”不会那么明显。

## 为什么有效：

当您使用 Bootstrap 的响应式 CSS 处于低屏幕尺寸时，对于屏幕较小的设备，它*会将 .modal.fade.in*的“顶部”设置为“自动”。出于某种原因，移动 webkit 浏览器似乎很难通过“自动”分配来确定垂直位置。因此，只需将其切换回固定值，它就可以很好地工作。

由于模式已经设置为 postition: absolute，该值是相对于视口的高度，而不是文档的高度，所以无论页面有多长或滚动到哪里，它都可以工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T15:21:32.263

[niftylettuce](https://github.com/twitter/bootstrap/issues/2130#issuecomment-7664836)在[issue 2130](https://github.com/twitter/bootstrap/issues/2130)中的解决方案似乎修复了所有移动平台中的模态......

*9/1/12 更新*：修复已在此处更新：[twitter bootstrap jquery plugins](https://github.com/niftylettuce/twitter-bootstrap-jquery-plugins/tree/master/modal-responsive-fix)

（下面的代码较旧但仍然有效）

```
// # Twitter Bootstrap modal responsive fix by @niftylettuce
//  * resolves #407, #1017, #1339, #2130, #3361, #3362, #4283
//   <https://github.com/twitter/bootstrap/issues/2130>
//  * built-in support for fullscreen Bootstrap Image Gallery
//    <https://github.com/blueimp/Bootstrap-Image-Gallery>

// **NOTE:** If you are using .modal-fullscreen, you will need
//  to add the following CSS to `bootstrap-image-gallery.css`:
//
//  @media (max-width: 480px) {
//    .modal-fullscreen {
//      left: 0 !important;
//      right: 0 !important;
//      margin-top: 0 !important;
//      margin-left: 0 !important;
//    }
//  }
//

var adjustModal = function($modal) {
  var top;
  if ($(window).width() <= 480) {
    if ($modal.hasClass('modal-fullscreen')) {
      if ($modal.height() >= $(window).height()) {
        top = $(window).scrollTop();
      } else {
        top = $(window).scrollTop() + ($(window).height() - $modal.height()) / 2;
      }
    } else if ($modal.height() >= $(window).height() - 10) {
      top = $(window).scrollTop() + 10;
    } else {
      top = $(window).scrollTop() + ($(window).height() - $modal.height()) / 2;
    }
  } else {
    top = '50%';
    if ($modal.hasClass('modal-fullscreen')) {
      $modal.stop().animate({
          marginTop  : -($modal.outerHeight() / 2)
        , marginLeft : -($modal.outerWidth() / 2)
        , top        : top
      }, "fast");
      return;
    }
  }
  $modal.stop().animate({ 'top': top }, "fast");
};

var show = function() {
  var $modal = $(this);
  adjustModal($modal);
};

var checkShow = function() {
  $('.modal').each(function() {
    var $modal = $(this);
    if ($modal.css('display') !== 'block') return;
    adjustModal($modal);
  });
};

var modalWindowResize = function() {
  $('.modal').not('.modal-gallery').on('show', show);
  $('.modal-gallery').on('displayed', show);
  checkShow();
};

$(modalWindowResize);
$(window).resize(modalWindowResize);
$(window).scroll(checkShow); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T17:09:00.773

当 Bootstrap 模态对话框打开时，我们使用此代码将它们居中。在使用它时，我在 iOS 上没有遇到任何问题，但我不确定它是否适用于 Android。

```
$('.modal').on('show', function(e) {
    var modal = $(this);
    modal.css('margin-top', (modal.outerHeight() / 2) * -1)
         .css('margin-left', (modal.outerWidth() / 2) * -1);
    return this;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-07T09:04:52.983

诚然，我没有尝试过上面列出的任何解决方案，但是当我在 Bootstrap 3 中尝试[jschr 的 Bootstrap-modal 项目](https://github.com/jschr/bootstrap-modal)（链接到最佳答案）时，我（最终）欣喜若狂。js 给我带来了麻烦，所以我放弃了它（也许我的问题是一个独特的问题，或者它适用于 Bootstrap 2），但 CSS 文件本身似乎在 Android 的原生 2.3.4 浏览器中可以解决问题。

就我而言，到目前为止，在使用覆盖来允许现代手机中的预期行为之前，我已经使用（次优）用户代理检测。

例如，如果您希望所有 3.x 及以下版本的 Android 手机仅使用全套 hack，您可以在使用 javascript 检测用户代理后向正文添加一个类“oldPhoneModalNeeded”，然后将 jschr 的 Bootstrap-modal CSS 属性修改为总是有 .oldPhoneModalNeeded 作为祖先。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T17:49:32.910

您可以在 javascript 中全局添加此属性：

```
if( navigator.userAgent.match(/iPhone|iPad|iPod/i) ) {
    var styleEl = document.createElement('style'), styleSheet;
    document.head.appendChild(styleEl);
    styleSheet = styleEl.sheet;
    styleSheet.insertRule(".modal { position:absolute; bottom:auto; }", 0);
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T04:09:01.100

好的，这确实解决了它我今天在 2012 年 9 月 5 日尝试过，但你必须确保查看演示

> niftylettuce 在 issue 2130 中的解决方案似乎修复了所有移动平台中的模态......
> 
> 2012 年 9 月 1 日更新：修复已在此处更新： [twitter bootstrap jquery plugins](https://github.com/niftylettuce/twitter-bootstrap-jquery-plugins/tree/master/modal-responsive-fix)

这是[演示](http://niftylettuce.github.com/twitter-bootstrap-jquery-plugins/#bootstrap-image-gallery)的链接 它工作得很好这是我使用的代码

```
 title_dialog.modal();
            title_dialog.modalResponsiveFix({})
            title_dialog.touchScroll(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-11T16:52:39.007

我的解决方案...

[Ver en jsfiddle](http://jsfiddle.net/infinito84/23AYq/#base)

```
//Fix modal mobile Boostrap 3
function Show(id){
    //Fix CSS
    $(".modal-footer").css({"padding":"19px 20px 20px","margin-top":"15px","text-align":"right","border-top":"1px solid #e5e5e5"});
    $(".modal-body").css("overflow-y","auto");
    //Fix .modal-body height
    $('#'+id).on('shown.bs.modal',function(){
        $("#"+id+">.modal-dialog>.modal-content>.modal-body").css("height","auto");
        h1=$("#"+id+">.modal-dialog").height();
        h2=$(window).height();
        h3=$("#"+id+">.modal-dialog>.modal-content>.modal-body").height();
        h4=h2-(h1-h3);      
        if($(window).width()>=768){
            if(h1>h2){
                $("#"+id+">.modal-dialog>.modal-content>.modal-body").height(h4);
            }
            $("#"+id+">.modal-dialog").css("margin","30px auto");
            $("#"+id+">.modal-dialog>.modal-content").css("border","1px solid rgba(0,0,0,0.2)");
            $("#"+id+">.modal-dialog>.modal-content").css("border-radius",6);               
            if($("#"+id+">.modal-dialog").height()+30>h2){
                $("#"+id+">.modal-dialog").css("margin-top","0px");
                $("#"+id+">.modal-dialog").css("margin-bottom","0px");
            }
        }
        else{
            //Fix full-screen in mobiles
            $("#"+id+">.modal-dialog>.modal-content>.modal-body").height(h4);
            $("#"+id+">.modal-dialog").css("margin",0);
            $("#"+id+">.modal-dialog>.modal-content").css("border",0);
            $("#"+id+">.modal-dialog>.modal-content").css("border-radius",0);   
        }
        //Aply changes on screen resize (example: mobile orientation)
        window.onresize=function(){
            $("#"+id+">.modal-dialog>.modal-content>.modal-body").css("height","auto");
            h1=$("#"+id+">.modal-dialog").height();
            h2=$(window).height();
            h3=$("#"+id+">.modal-dialog>.modal-content>.modal-body").height();
            h4=h2-(h1-h3);
            if($(window).width()>=768){
                if(h1>h2){
                    $("#"+id+">.modal-dialog>.modal-content>.modal-body").height(h4);
                }
                $("#"+id+">.modal-dialog").css("margin","30px auto");
                $("#"+id+">.modal-dialog>.modal-content").css("border","1px solid rgba(0,0,0,0.2)");
                $("#"+id+">.modal-dialog>.modal-content").css("border-radius",6);               
                if($("#"+id+">.modal-dialog").height()+30>h2){
                    $("#"+id+">.modal-dialog").css("margin-top","0px");
                    $("#"+id+">.modal-dialog").css("margin-bottom","0px");
                }
            }
            else{
                //Fix full-screen in mobiles
                $("#"+id+">.modal-dialog>.modal-content>.modal-body").height(h4);
                $("#"+id+">.modal-dialog").css("margin",0);
                $("#"+id+">.modal-dialog>.modal-content").css("border",0);
                $("#"+id+">.modal-dialog>.modal-content").css("border-radius",0);   
            }
        };
    });  
    //Free event listener
    $('#'+id).on('hide.bs.modal',function(){
        window.onresize=function(){};
    });  
    //Mobile haven't scrollbar, so this is touch event scrollbar implementation
    var y1=0;
    var y2=0;
    var div=$("#"+id+">.modal-dialog>.modal-content>.modal-body")[0];
    div.addEventListener("touchstart",function(event){
        y1=event.touches[0].clientY;
    });
    div.addEventListener("touchmove",function(event){
        event.preventDefault();
        y2=event.touches[0].clientY;
        var limite=div.scrollHeight-div.clientHeight;
        var diff=div.scrollTop+y1-y2;
        if(diff<0)diff=0;
        if(diff>limite)diff=limite;
        div.scrollTop=diff;
        y1=y2;
    });
    //Fix position modal, scroll to top.    
    $('html, body').scrollTop(0);
    //Show
    $("#"+id).modal('show');
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-13T00:39:01.323

找到了一个非常hacky的解决方案来解决这个问题，但它确实有效。我向用于打开模式的链接添加了一个类（使用数据目标），然后使用 Jquery，向该类添加了一个单击事件以获取数据目标，找到它应该打开的模式，然后然后通过Javascript打开它。对我来说效果很好。我还在我的手机上添加了一个移动检查，以便它只能在移动设备上运行，但这不是必需的。

```
$('.forceOpen').click(function() {
  var id = $(this).attr('data-target');
  $('.modal').modal('hide');
  $(id).modal('show');
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-27T14:02:56.427

主要是 Nexus 7 模态问题，模态在屏幕下方

```
 .modal:before {
    content: '';
    display: inline-block;
    height: 50%; (the value was 100% for center the modal)
    vertical-align: middle;
    margin-right: -4px;
  } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-27T21:54:24.983

对我来说只是`$('[data-toggle="modal"]').click(function(){});`工作正常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-29T07:41:37.190

尽管这个问题已经很老了，但有些人在寻找改善手机模态用户体验的解决方案时仍然可能会偶然发现它。

我制作了一个库来改善 Bootrsrap 模态在手机上的行为。

*引导程序 3*：[https ://github.com/keaukraine/bootstrap-fs-modal](https://github.com/keaukraine/bootstrap-fs-modal)

*引导程序 4*：[https ://github.com/keaukraine/bootstrap4-fs-modal](https://github.com/keaukraine/bootstrap4-fs-modal)

# java - 我应该如何将 Composite 模式包装到 Builder 模式中？

> ID：10437154
> 
> 赞同：5
> 
> 时间：2012-05-03T18:18:19.967
> 
> 标签：java, oop, design-patterns, composite, builder-pattern

假设我有一个**Composite**设置如下：

```
public abstract class Element {
    //position, size, etc.

    //element methods

    //setters/getters
}

public class SimpleElement1 extends Element {
    //...
}

public class SimpleElement2 extends Element {
   //...
}

public class CompositeElement extends Element {
     protected List<Element> childrenElements;

     //methods to add/remove/get children
} 
```

现在，我将如何将这个**Composite**包装成一个**Builder**模式，这样我就可以简化客户端代码，让它不关心（或不关心）如何将孩子链接到他们的**Composite**的复杂性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:30:47.163

在您的构建器中，添加方法“startComposite”和“endComposite”。这些方法将组合推入堆栈并从堆栈中移除组合。添加元素的消息总是添加到栈顶。

```
 builder.startComposite();
        builder.simpleElement1();
        builder.simpleElement2();
    builder.endComposite();
    builder.startComposite();
        builder.simpleElement2();
    builder.endComposite(); 
```

如果您的构建器方法总是返回构建器，您可以消除接收器的重复：

```
 builder.
        startComposite().
            simpleElement1().
            simpleElement2().
        endComposite().
        startComposite().
            simpleElement2().
        endComposite(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:42:20.000

下面是一个建造者制作不同动物部分的动物复合材料的例子。您应该能够为您的特定应用程序修改它。

```
class BuilderDesignPattern{
     public static void Main(string[] args)
        {
            Kid aKid = new Kid();
            aKid.Name = "Elizabeth";

            AnimalBuilder builderA = new MonkeyBuilder();
            aKid.MakeAnimal(builderA);
            builderA.aAnimal.ShowMe();

            AnimalBuilder builderB = new KittenBuilder();
            aKid.MakeAnimal(builderB);
            builderB.aAnimal.ShowMe();

        }
    }
    public abstract class AnimalBuilder
    {
        public Animal aAnimal;

        public abstract void BuildAnimalHeader();
        public abstract void BuildAnimalBody();
        public abstract void BuildAnimalLeg();
        public abstract void BuildAnimalArm();
        public abstract void BuildAnimalTail();
    }
    public class MonkeyBuilder : AnimalBuilder
    {

        public MonkeyBuilder()
        {
            aAnimal = new Monkey();
        }

        public override void BuildAnimalHeader()
        {
            aAnimal.Head = "Moneky's Head has been built";
        }

        public override void BuildAnimalBody()
        {
            aAnimal.Body = "Moneky's Body has been built";
        }

        public override void BuildAnimalLeg()
        {
            aAnimal.Leg = "Moneky's Leg has been built";
        }

        public override void BuildAnimalArm()
        {
            aAnimal.Arm = "Moneky's Arm has been built";
        }

        public override void BuildAnimalTail()
        {
            aAnimal.Tail = "Moneky's Tail has been built";
        }
    }
    public class KittenBuilder : AnimalBuilder
    {
        public KittenBuilder()
        {
            aAnimal = new Kitten();
        }

        public override void BuildAnimalHeader()
        {
            aAnimal.Head = "Kitten's Head has been built";
        }

        public override void BuildAnimalBody()
        {
            aAnimal.Body = "Kitten's Body has been built";
        }

        public override void BuildAnimalLeg()
        {
            aAnimal.Leg = "Kitten's Leg has been built";
        }

        public override void BuildAnimalArm()
        {
            aAnimal.Arm = "Kitten's Arm has been built";
        }

        public override void BuildAnimalTail()
        {
            aAnimal.Tail = "Kitten's Tail has been built";
        }
    }
    public abstract class Animal
    {
        public BodyPart Head { get; set; }
        public BodyPart Body { get; set; }
        public BodyPart Leg { get; set; }
        public BodyPart Arm { get; set; }
        public BodyPart Tail { get; set; }

        //helper method for demo the Polymorphism, so we can 
        //easily tell what type object it is from client.
        public abstract void Eat();

        //helper method for demo the result from client
        public void ShowMe()
        {
            Console.WriteLine(Head);
            Console.WriteLine(Body);
            Console.WriteLine(Leg);
            Console.WriteLine(Arm);
            Console.WriteLine(Tail);
            Eat();

        }
    }
    public class Monkey : Animal
    {
        //helper method to show monkey's property for demo purpose
        public override void Eat()
        {
            Console.WriteLine("Since I am Monkey, I like to eat banana");
        }
    }
    public class Kitten : Animal
    {
        public override void Eat()
        {
            Console.WriteLine("Since I am Kitten, I like to eat kitten food");
        }
    }
    public class Kid
    {
        public string Name { get; set; }

        //construct process to build an animal object, 
        //after this process completed, a object 
        //will be consider as a ready to use object.
        public void MakeAnimal(AnimalBuilder aAnimalBuilder)
        {
            aAnimalBuilder.BuildAnimalHeader();
            aAnimalBuilder.BuildAnimalBody();
            aAnimalBuilder.BuildAnimalLeg();
            aAnimalBuilder.BuildAnimalArm();
            aAnimalBuilder.BuildAnimalTail();
        }

    }
    public class BodyPart{
        String name= "";
        public BodyPart(String name){
            this.name=name;
        }
    }
} 
```

# java - 奇怪的循环输出 - Java

> ID：10437155
> 
> 赞同：1
> 
> 时间：2012-05-03T18:18:27.873
> 
> 标签：java, loops, while-loop, nested-loops

这些循环是什么：

```
while (x <= gridWidth) {
            while (y <= gridHeight) {
                System.out.println("X: " + x + ", Y: " + y);
                y++;
            }
            x++;
        } 
```

输出这个：

```
 X: 0, Y: 0
    X: 0, Y: 1
    X: 0, Y: 2
    X: 0, Y: 3
    X: 0, Y: 4
    X: 0, Y: 5
    X: 0, Y: 6
    X: 0, Y: 7
    X: 0, Y: 8
    X: 0, Y: 9
    X: 0, Y: 10
    X: 0, Y: 11
    X: 0, Y: 12
    X: 0, Y: 13
    X: 0, Y: 14
    X: 0, Y: 15
    X: 0, Y: 16
    X: 0, Y: 17
    X: 0, Y: 18
    X: 0, Y: 19
    X: 0, Y: 20
    X: 0, Y: 21
    X: 0, Y: 22
    X: 0, Y: 23
    X: 0, Y: 24
    X: 0, Y: 25
    X: 0, Y: 26
    X: 0, Y: 27
    X: 0, Y: 28
    X: 0, Y: 29
    X: 0, Y: 30
    X: 0, Y: 31
    X: 0, Y: 32
    X: 0, Y: 33
    X: 0, Y: 34
    X: 0, Y: 35
    X: 0, Y: 36
    X: 0, Y: 37
    X: 0, Y: 38
    X: 0, Y: 39
    X: 0, Y: 40
    X: 0, Y: 41
    X: 0, Y: 42
    X: 0, Y: 43
    X: 0, Y: 44
    X: 0, Y: 45
    X: 0, Y: 46
    X: 0, Y: 47
    X: 0, Y: 48
    X: 0, Y: 49
    X: 0, Y: 50 
```

?

我很确定`gridWidth = 50`，因为我打印了它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T18:20:18.983

`y`在嵌套循环开始之前，您需要重置为零。否则，外层循环将执行 50 次，但内层循环的最后 49 次根本不会执行，因为`y`已经在`gridHeight`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:34:27.553

正如[Joshua Bloch](http://en.wikipedia.org/wiki/Joshua_Bloch)在其著作[Effective Java](http://java.sun.com/docs/books/effective/)中所建议的那样，尽可能使用 for 构造而不是 while。更不容易出错，更简洁，实际上它可能会阻止你的错误。

```
for (int x=0;x <= gridWidth;x++)
    for (int y=0;y <= gridHeight;y++)
        System.out.println("X: " + x + ", Y: " + y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:27:09.333

您没有在每个循环中重新初始化 y

```
 while (x <= gridWidth) {
        y = 0;
        while (y <= gridHeight) {
            System.out.println("X: " + x + ", Y: " + y);
            y++;
        }
        x++;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:27:11.520

```
int y=0,x=0;
while (x <= gridWidth) {
   while (y <= gridHeight) {
    System.out.println("X: " + x + ", Y: " + y);
    y++;
  }
x++;
y=0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T18:31:34.763

```
final int gridWidth = 50, gridHeight = 50;

for(int x = 0; x <= gridWidth; x++)
  for(int y = 0; y <= gridHeight; y++)
    System.out.println("X: " + x + ", Y: " + y); 
```

# windows - 使用 VBScript 从 Windows 上下文（右键单击）菜单中选择特定菜单项？

> ID：10437161
> 
> 赞同：1
> 
> 时间：2012-05-03T18:19:12.080
> 
> 标签：windows, windows-7, vbscript, cloud

有没有一种方法可以自动右键单击 Windows 7 文件夹中的文件并在简单的 VB 脚本中选择“发送到 -> Amazon Cloud Drive”上下文菜单选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:43:48.033

答案是肯定的和否定的。没有直接的方法可以做到这一点。您可以创建一个解决方法，但它会非常复杂。

“正确”的方法是使用 ShellFolderItem 对象的`InvokeVerb`方法。它看起来像这样：

```
Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.Namespace("C:")
Set objFile = objFolder.ParseName("test.vbs")

' Execute context menu item
'objFile.InvokeVerb("&Copy")

' List all possible verbs
Set colFolderItemVerbs = objFile.Verbs

For Each objFolderItemVerb in colFolderItemVerbs
    WScript.Echo Chr(34) & objFolderItemVerb.Name & Chr(34)
Next 
```

问题是子菜单项被列为空字符串。

一种可能的解决方法是导航到“发送到”文件夹并获取要使用的快捷方式的命令行。然后你可以直接实现它。

# php - Db 单例类失败

> ID：10437162
> 
> 赞同：0
> 
> 时间：2012-05-03T18:19:12.897
> 
> 标签：php, database, class, singleton

我有一个我想成为单身人士的 Db 访问类。但是，我不断收到此错误：

```
Accessing static property Db::$connection as non static  
    in /srv/www/htdocs/db_mysql.php on line 41"    
(line 41 is marked below) 
```

这是代码：

```
Class Db {
  // debug mode
  var $debug_mode = false;
  //Hostname - localhost
  var $hostname = "localhost";
  //Database name
  var $database = "db_name";
  //Database Username
  var $username = "db_user";
  //Database Password
  var $password = "db_pwd";

  private static $instance;

  //connection instance
  private static $connection;

  public static function getInstance() {
    if (!self::$instance) {
      self::$instance = new Db;
      self::$instance->connect();
    } //!self::$instance
    return self::$instance;
  } // function getInstance()

  /*
   * Connect to the database
   */
  private function connect() {
    if (is_null($this->hostname))
      $this->throwError("DB Host is not set,");
    if (is_null($this->database))
      $this->throwError("Database is not set.");
    $this->connection = @mysql_connect($this->hostname, $this->username, $this->password); // This is line 41
    if ($this->connection === FALSE)
      $this->throwError("We could not connect to the database.");
    if (!mysql_select_db($this->database, $this->connection))
      $this->throwError("We could not select the database provided.");
  } // function connect()

  // other functions located here...

} // Class Db 
```

似乎在 getInstance() 函数中检查静态变量 $instance 失败了。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:21:44.563

你正在使用`$this->connection`而不是`self::$connection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:22:43.897

您已将其贴`$connection`为静态：

`private static $connection;`

但是您尝试使用以下方式访问它`$this`：

`$this->connection = ...`（第 41 行）

这就是你得到错误的原因。你应该像使用一样访问它`self`

`self::$connection = ...`（更正的第 41 行）

或`static`从声明中删除`$connection`：

`private $connection;`

顺便说一句：就在这条线的下方，您一次`$this->connection === FALSE`又一次地`if (!mysql_select_db($this->database, $this->connection))`

# c# - 解析pdf文件

> ID：10437163
> 
> 赞同：10
> 
> 时间：2012-05-03T18:19:13.150
> 
> 标签：c#, parsing, pdf, pdf-scraping

我需要根据文件的内容将大型 pdf 文档拆分为较小的文件。我们使用 BCL easyPDF 来操作 pdf 文件。easyPDF可以根据页码拆分pdf文档，但不能根据文件内容拆分文档。它也没有搜索功能（据我所知，如果我错了，请有人告诉我。）来确定内容的位置。

现在有人可以告诉我如何使用 .net 在 pdf 文件中找到文本的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:45:18.457

您可以尝试[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)来完成您的任务。

该库可以[从 PDF 中提取文本（带或不带格式）](https://bitmiracle.com/blog/extract-text-from-pdf-in-net)。

或者，您可以[从 PDF 中检索带有边界矩形的单词](https://bitmiracle.com/pdf-library/help/extract-text-by-words.aspx)集合。这应该可以帮助您找到文件中文本的位置。

免责声明：我为图书馆的供应商工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:23:55.537

您需要 .NET 中的 PDF 库，例如 iText.Net。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:22:40.077

看看这个问题。有一些可以满足您要求的库的链接

[如何在 C# 中以编程方式搜索 PDF 文档](https://stackoverflow.com/questions/567951/how-to-programatically-search-a-pdf-document-in-c-sharp)

# android - 创建意图 onClick 按钮但活动接收器的 tabhost 消失的 TabActivity

> ID：10437181
> 
> 赞同：0
> 
> 时间：2012-05-03T18:20:16.437
> 
> 标签：android, android-intent, android-tabhost, tabactivity

我有 2 个活动：A、B。第一个是 TabActivity，第二个是 Activity。在 A 内部，我有一个可点击的按钮，用于调用其他活动。

```
public class A extends TabActivity implements OnClickListener {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tabHost = getTabHost();
        tabHost.addTab(tabHost.newTabSpec("a").setContent(R.id.a).setIndicator("a"));

        b = new Intent(this,B.class);
    tabHost.addTab(tabHost.newTabSpec("b").setContent(b)
            .setIndicator(this.getString(R.string.b)));

        btn.setOnClickListener(this);
    }

    public void onClick(View arg0) {
        if (arg0 == btn) {
        startActivity(b);
        }
    }
} 
```

在 B 内部，每次单击 A 类中的按钮时，我都有一个线程从 Internet 获取数据：

```
public class B extends Activity {
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.search_result);

       searchHandler = new Handler() {
           @Override
           public void handleMessage(Message msg) {
               draw(msg.obj.toString());
           }
    }

    Intent intent = getIntent();
    if(..)
        sendHttpRequest();
} 
```

数据正确返回，我可以管理它，但我的 tabhost 消失了。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:16:31.057

自动更改选项卡的android方法是：

```
tabHost.setCurrentTab(tab); 
```

并且不使用：

```
startActivity(intent); 
```

要在所有活动中使用它，最好的方法是将 TabHost 设置为公开和静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:27:50.030

每当您单击按钮时，您都会调用一个不是选项卡活动的子活动的活动。所以tabhost消失了。像这样在选项卡活动中调用活动 b

```
 tabHost.addTab(tabHost.newTabSpec("Tab")
                    .setIndicator("Tab")
                    .setContent(new Intent(this, b.class)
                   )); 
```

# java - 如何使用 JXDatePicker？

> ID：10437193
> 
> 赞同：2
> 
> 时间：2012-05-03T18:20:45.537
> 
> 标签：java, swing, jframe, swingx

我想在我的 jframe 中有一个日期选择器。我正在使用来自 SwingX 的 JXDatePicker，但我很难找出它是如何工作的，日期选择器没有显示。

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        JXDatePicker picker = new JXDatePicker();

jLabel2.setText(picker.getDate().toString());
    } 
```

我想要的是让选择器在执行按钮的操作时显示，然后在 jlabel 中写入选择的日期。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:29:17.117

[JXDatePicker](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/JXDatePicker.html)被设计为一个结合了按钮、可编辑字段和 JXMonthView 组件的组件。用户可以从日历组件中选择一个日期，该组件在按下按钮时出现。

所以，不要忘记将你的选择器添加到容器中，即：

```
panel.add(picker); 
```

这是一个[例子](http://www.javalobby.org/java/forums/t45447.html)。

# coldfusion - Arithmetic Error

> ID：10437199
> 
> 赞同：0
> 
> 时间：2012-05-03T18:21:11.647
> 
> 标签：coldfusion

> **Possible Duplicate:**
> [Why does this subtraction not equal zero?](https://stackoverflow.com/questions/2002821/why-does-this-subtraction-not-equal-zero)

I just came across a weird situation. Why is below code not returning 0? Instead it's returning a very small negative number.

```
<cfset x = 5448.10-3311.23-2136.87>
<cfoutput>x=#x#</cfoutput> 
```

Above code will output: x=4.54747350886E-013

I ran above code both in CF9 and CF10 with the same results.

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:53:24.910

```
<cfset x = PrecisionEvaluate(5448.10-3311.23-2136.87)>
<cfoutput>x=#x#</cfoutput> 
```

Doc for `PrecisionEvaluate()`: [http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fd9.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fd9.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:36:42.670

As others have stated it is Floating point accuracy related. I just wanted to point out a resolution if you are trying to get a reasonable result

```
<cfset x1 = 5448.19-3311.23-2136.87 />
<cfset x2 = numberformat(x1, "9.99") />
<cfoutput>x1=#x1#<br />x2=#x2#</cfoutput> 
```

Result

```
x1=0.0899999999997
x2=0.09 
```

The numberformat function will round the number to the specified decimal place when given mask.

# image - 如何从与上传图片的文件夹相同的文件夹下载图片？

> ID：10437204
> 
> 赞同：1
> 
> 时间：2012-05-03T18:21:27.600
> 
> 标签：image, jsp, servlets, file-upload, download

我正在创建一个项目，用户可以在其中上传他的照片。这张照片存储在文件夹“images/uploads/filename”中。创建他的个人资料并显示照片时，我使用`<img>`带有“图像/上传/文件名”的标签`src`，但照片没有显示。如果我手动将照片复制到相邻的文件夹“images/abc/filename”，然后将其用作源，那么它就可以工作。

这是如何引起的，我该如何解决？我需要使用同一个文件夹来上传和下载照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:13:30.853

如果您将 web 应用程序作为 IDE 项目运行并将上传的图像存储在 IDE 的项目空间中，则可能会发生这种情况。在 IDE 的项目文件夹中执行的外部更改（如通过您的 servlet 代码）不会立即反映在已部署服务器的工作文件夹中。只有当您触摸它（通过刷新项目）或通过复制它（正如您碰巧发现的那样）时，它才会被反映。

毕竟，将上传的文件存储在 webapp 的部署文件夹中是个坏主意。每当您重新部署 webapp 时，这些文件都会丢失，因为这些文件不包含在原始 WAR 文件中。

您需要将它们存储在 webapp 的部署文件夹之外的某个不同的固定路径上，例如`/var/webapp/uploads`. 您不应该使用相对路径或围绕它`getRealPath()`创建对象。`File`只需使用固定路径。您始终可以将固定路径配置为上下文参数设置、VM 参数、属性文件设置甚至 JNDI 条目。

然后，要将其提供给万维网，只需将该路径作为另一个 docroot 添加到服务器配置中。目前尚不清楚您使用的是什么服务器，但在 Tomcat 中，`<Context>`只需在`server.xml`.

### 也可以看看：

*   [刷新页面后上传的图片才可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)
*   [如何在 java webapp 中的服务器上保存和检索图像](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server/8521981#8521981)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:48:28.563

确保您的路径正确并包含图像扩展名

只是为了测试，把你的 img 标签放在 index.php

```
<img src="images/abc/filename.jpg"> 
```

**/root/index.php**

现在将您的图像放入您的 abc/ 文件夹

**/root/images/abc/文件名.jpg**

这应该显示图像。

如果您的 img 标签位于根目录中的另一个文件夹中，如下所示

**/root/user/index.php**

现在，当您使用 img 标签时，请使用此路径（相对链接）：

```
<img src="../images/abc/filename.jpg"> 
```

注意图像路径“../”的开头，它用于返回根目录。

如果包含 img 标签的 php 或 html 文件更深，请记住为每个级别添加 ../，2 个文件夹的深度应该是：

```
<img src="../../images/abc/filename.jpg"> 
```

问题很模糊，所以希望这就是你要找的。

让我知道，如果这是错误的，请多解释一下，我会尽力提供帮助:)

# php - 动态排序和显示 PHP 数组

> ID：10437208
> 
> 赞同：1
> 
> 时间：2012-05-03T18:21:56.243
> 
> 标签：php, arrays, facebook, sorting

我有一个数组，其中包含 Facebook 用户的好友列表。

我必须显示该列表并在列表顶部提供一个文本字段以输入他/她的任何朋友姓名的第一个字母。当用户在文本字段中输入一个字母时，程序应该只显示以输入字母开头的名称，所有其他名称都应该消失。

此外，名称应按字母顺序排序。

如何执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:26:39.710

不管你这样做，你可能需要一些 ajax。除非您只是在客户端对列表进行排序和过滤。[已经有一个名为Datatables](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)的表格数据库将为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:42:05.200

首先我要问你是使用 javascript 或任何东西来过滤还是只是使用 php 的服务器端代码？

除此之外，这里是我将如何在 php 端执行此操作的步骤。

1) 对所有用户朋友的整个列表进行排序，以便整个数组按顺序排列。看看这个[http://www.php.net/manual/en/function.sort.php](http://www.php.net/manual/en/function.sort.php)。

2）当用户输入他们的单个字母时，您只需：

*   创建一个新数组来存储用户搜索的结果
*   循环遍历所有朋友的大数组并将匹配项插入到较小的数组中
*   显示小数组，因为它已经从已经排序的主列表中排序。

    ```
    for ($i = 1; $i <= $masterFriendsList.length; $i++) {
        if (substr($masterFriendsList[i],0,1)==$yourMatchValue){
            $filteredArray[]=$masterFriendsList[i];
        }
    } 
    ```

# c# - 控制容器和线程的反转 / Parallel.ForEach

> ID：10437211
> 
> 赞同：1
> 
> 时间：2012-05-03T18:22:03.813
> 
> 标签：c#, .net, multithreading, inversion-of-control, ninject

如果我有一个名为 WidgetProcessor 的服务（服务层对象不是 Web 服务），并且该服务只有一个名为 Process() 的方法，在该方法中我使用另一个服务（服务层对象）。让我们将此服务称为 WidgetValidator，它有一个方法 Validate()，该方法从 Parallel.ForEach 中调用。

1）我假设如果我什么都不做 Validate 方法，如果它执行多个计算，它将不是线程安全的......对吗？
2）注入 WidgetValidator 对象的正确方法是什么。如果我通过构造函数注入 WidgetValidator 并将其分配给类级别的私有变量 - 与在 Parallel.ForEach 中新建一个 WidgetValidator 相比，这似乎会降低线程安全性……好吧。但这一切都让我想到了“代码气味”！我是否应该对 Validate 方法内的代码应用锁定。

注意：我使用 Ninject 作为我的 IoC 容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:25:07.913

这取决于验证器是否正在改变共享状态。如果不是，那么您可以重用相同的实例。如果它正在改变共享变量，则您不能同时调用它。

# google-analytics - 为什么 PRWeb 推荐不显示？

> ID：10437215
> 
> 赞同：1
> 
> 时间：2012-05-03T18:22:20.117
> 
> 标签：google-analytics

我创建了一个[PRWeb Release](http://www.prweb.com/releases/embeddedanalytics/embeddedcharts/prweb9466323.htm)。当我检查 Google Analytics 时，我没有从 PRWeb 链接本身找到任何推荐（即使我的服务器日志显示许多访问）。它确实检测到来自已获取该版本的新闻机构的推荐（[示例](http://www.mysanantonio.com/business/press-releases/article/EmbeddedAnalytics-Takes-the-Burden-out-of-Logging-3527045.php)）。

为什么 GA 没有获取 PRWeb 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:48:56.787

肯定是因为没有人通过 PRWeb 站点上的链接首先访问您的站点，而是来自已获取该版本的机构。
（您可以检查您的服务器日志，以验证来自 PRWeb 的人之前是否来自其他来源）

# java - 部署后查看 Google App Engine 应用程序时出错

> ID：10437217
> 
> 赞同：0
> 
> 时间：2012-05-03T18:22:35.437
> 
> 标签：java, eclipse

我使用 Eclipse 完成了 Google App Engine 教程来创建留言簿。在 Eclipse 环境中的本地机器上一切正常。我成功地将应用程序部署到 Google App Engine。当我访问 URL (http://dcsnetlink-guestbook.appspot.com/) 以查看我的应用程序时，我收到以下错误。

错误：服务器错误 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询

我在网上做了一些研究来解决这个问题，但到目前为止还没有成功。请帮忙。

以下是与此相关的 Google App Engine 日志中的内容。

## 用于留言簿的 Google App Engine 日志条目 - 2012 年 5 月 5 日

runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google .tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) at java.lang.Thread.run(Thread.java:679) C 2012-05-05 17:05:14.720 来自 servlet javax.servlet.UnavailableException 的未捕获异常: 初始化失败。在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:211) 在 com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171) 在 com.google.apphosting.runtime .jetty.JettyServletEngineAdapter.serviceRequest（JettyServletEngineAdapter.java：725 此请求导致为您的应用程序启动一个新进程，从而导致您的应用程序代码首次加载。因此，与您的应用程序的典型请求相比，此请求可能需要更长的时间并使用更多的 CPU。

谢谢，塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:26:46.453

> java.lang.UnsupportedClassVersionError：guestbook/GuestbookServlet：不支持的major.minor 51.0版

如果您使用 JRE 1.7 (jre7) 编译 java 类，则会出现此原因

解决方案是：

1.  将JDK降级到JDK6
2.  将项目“编译器合规性级别”更改为 1.6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T17:30:49.617

如果您使用 Java 1.8，则必须使用 Java 1.7 重新编译。但是，如果您有 *.jsp 文件，您还应该从系统中完全删除 Java 1.8。如果您使用 Mac，请按照[以下](https://stackoverflow.com/questions/19039752/removing-java-8-from-mac)步骤操作。

# java - 在 Java 中创建 locale -object 的正确方法是什么（例如芬兰语）

> ID：10437224
> 
> 赞同：2
> 
> 时间：2012-05-03T18:23:02.690
> 
> 标签：java, jsf-2, localization, locale, facescontext

有人可以告诉我为什么语言环境芬兰语不起作用而其余的都起作用吗？

```
private static Map<String,Object> countries;
    private static Locale finnishLocale = new Locale("fi", "FI");

static{
    countries = new LinkedHashMap<String,Object>();
    countries.put("English", Locale.ENGLISH); //label, value
    countries.put("French", Locale.FRENCH);
    countries.put("German", Locale.GERMAN);
    countries.put("Finnish", finnishLocale); <---------- Not working!
}

public void setLocaleCode(String localeCode) {

                this.localeCode = localeCode;
                updateLocale(localeCode);          

        }

public void updateLocale(String newLocale){

        String newLocaleValue = newLocale;

        //loop country map to compare the locale code
                for (Map.Entry<String, Object> entry : countries.entrySet()) {

               if(entry.getValue().toString().equals(newLocaleValue)){

                FacesContext.getCurrentInstance()
                    .getViewRoot().setLocale((Locale)entry.getValue());

              }
               }

        } 
```

我的意思是我用 New-clause 创建的语言环境不起作用。我无法更好地解释它，因为我认为这样实现的语言环境与例如 Locale.GERMAN 类似的语言环境对象？我的软件除了更新语言环境 ja Faces 上下文之外什么都不做。没有例外。对不起，如果q是愚蠢的。其他一切正常，我的意思是德语、英语等，并且程序会更新语言环境和 Faces 上下文。

如果您回答这个问题，我将不胜感激，我（再次）迷路了萨米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T21:04:35.770

你的`updateLocale()`方法似乎是罪魁祸首。您正在`Locale#toString()`与`newLocale`. `Locale`常量只有语言集，而不是国家。`Locale.ENGLISH.toString()`例如返回`"en"`而`new Locale("fi", "FI").toString()`返回`"fi_FI"`。这只能意味着您的变量`newLocale`实际上包含`"en"`、`"fr"`和。前三个将匹配常量，但后者不会匹配，因为您正在与它进行比较而不是.`"de"``"fi"``finnishLocale``toString()``getLanguage()`

要解决您的问题，*请*更改

```
private static Locale finnishLocale = new Locale("fi", "FI"); 
```

到

```
private static Locale finnishLocale = new Locale("fi"); 
```

*或者*，更好的是，更改`Map<String, Object>`为`Map<String, Locale>`然后更改

```
if(entry.getValue().toString().equals(newLocaleValue)){ 
```

到

```
if(entry.getValue().getLanguage().equals(newLocaleValue)){ 
```

总而言之，这个地图循环相当笨拙。如果`newLocale`是服务器端控制的值，则`viewRoot.setLocale(new Locale(newLocale))`改为执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T21:03:40.497

由于此方法有效，因此您在其他地方有错误：

```
public class Runner01 {
private static Map<String,Object> countries;
private static Locale finnishLocale = new Locale("fi", "FI");

static{
    countries = new LinkedHashMap<String,Object>();
    countries.put("English", Locale.ENGLISH); //label, value
    countries.put("French", Locale.FRENCH);
    countries.put("German", Locale.GERMAN);
    countries.put("Finnish", finnishLocale); 
}

public static void main(String[] args) {
    for( Map.Entry<String, Object> entry : countries.entrySet() ) {
        System.out.println(entry.getKey() + "=>" + entry.getValue().toString());
    }
}

} 
```

# javascript - 使用 http.send() ajax

> ID：10437226
> 
> 赞同：0
> 
> 时间：2012-05-03T18:23:11.767
> 
> 标签：javascript, ajax

```
if(document.getElementById(callerName).checked) {
    //alert(callerName);        
    var poststr = "field=" + escape(encodeURI(callerName)) +
      "&op=add" + "&nocache=" + nocache;
}
else {
    //alert(callerName);
    var poststr = "field=" + escape(encodeURI(callerName)) + 
      "&op=del" + "&nocache=" + nocache;
}
http.send(poststr); 
```

当我收到`$_POST['field']`'％20'时，有空格..任何解决方案来获得准确的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:26:21.643

PHP：

```
$field = urldecode($_POST['field']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:26:28.040

您同时使用`escape`和对数据进行双重转义`encodeURI`。另外，我建议您`encodeURIComponent`改用。尝试更改为：

```
var poststr = "field=" + encodeURIComponent(callerName) + 
  "&op=add&nocache=" + nocache; 
```

# java - hapi library 'getAll(String name)' 不会从消息中返回所有自定义 z 段

> ID：10437229
> 
> 赞同：1
> 
> 时间：2012-05-03T18:23:39.670
> 
> 标签：java, hl7, hapi

好的，所以我已经使用 HAPI 库（版本 1.2）实现了自定义 ORU_R01 v2.3 消息和自定义 Z 段（称为 ZDS）。

他们似乎运作良好。但是，当我收到包含多个 ZDS 段的消息时，我发现我无法全部获取它们。我称之为'getAll（“ZDS”）；' 方法，认为它将返回一个 ID 为 ZDS 的段数组。然而，它只会返回一个长度为 0 或 1 的数组（即使有多个 ZDS 段也返回长度 1）。

这是我的自定义 ORU_R01 消息中的代码，它尝试获取 ZDS 段数组：

```
public ZDS[] getZDSList() throws HL7Exception {
        System.out.println("NUM REPS: " + currentReps("ZDS"));
        Structure[] list = getAll("ZDS");
        ZDS[] zdsSegments = new ZDS[list.length];

        for (int i=0; i < list.length; i++)
            zdsSegments[i] = (ZDS) list[i];

        return zdsSegments;
    } 
```

currentReps("ZDS") 的输出始终为 0 或 1。

我正在学习，但我遇到了一些障碍。我很感激你们能提供的任何帮助！！

干杯

贾勒特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:18:49.503

好的，事实证明，当我将 ZDS 段添加到我的自定义 ORU_R01 时，我需要将段设置为重复。IE：

`this.add(ZDS.class, false, false);`

需要改为

`this.add(ZDS.class, false, true);`

然后它就起作用了！

感谢所有检查过这个的人。

干杯

贾勒特

# java - Java/iText/Flying Saucer：将包含 svg 标签的 HTML 转换为 pdf

> ID：10437234
> 
> 赞同：4
> 
> 时间：2012-05-03T18:23:55.570
> 
> 标签：java, pdf, itext, flying-saucer

我正在尝试从 HTML 生成 Java 中的 pdf 文件。HTML 代码包含由 Google Charts API 生成的 svg 标记，用于显示柱形图。

我试着用 Flying Saucer R8 来做这件事：

```
 StringBuffer sb = new StringBuffer();
    sb.append("<div id='chartArea'><svg width='830' height='400'><defs id='defs'><clipPath id='_ABSTRACT_RENDERER_ID_0'><rect x='45' y='77' width='560' height='247'/></clipPath></defs><rect x='0' y='0' width='830' height='400' stroke='none' stroke-width='0' fill='#ffffff'/><g><rect x='45' y='77' width='560' height='247' stroke='none' stroke-width='0' fill-opacity='0' fill='#ffffff'/><g clip-path='url(#_ABSTRACT_RENDERER_ID_0)'><g><rect x='45' y='323' width='560' height='1' stroke='none' stroke-width='0' fill='#cccccc'/><rect x='45' y='262' width='560' height='1' stroke='none' stroke-width='0' fill='#cccccc'/><rect x='45' y='200' width='560' height='1' stroke='none' stroke-width='0' fill='#cccccc'/><rect x='45' y='139' width='560' height='1' stroke='none' stroke-width='0' fill='#cccccc'/><rect x='45' y='77' width='560' height='1' stroke='none' stroke-width='0' fill='#cccccc'/></g><g><rect x='60' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='140' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='220' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='300' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='380' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='460' y='323.5' width='49' height='0' stroke='none' stroke-width='0' fill='#757575'/><rect x='540' y='111' width='49' height='212' stroke='none' stroke-width='0' fill='#757575'/></g><g><rect x='45' y='323' width='560' height='1' stroke='none' stroke-width='0' fill='#333333'/></g></g><g/><g><g><text text-anchor='middle' x='85.42857142857143' y='343.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-04-26</text></g><g><text text-anchor='middle' x='165.28571428571428' y='360.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-04-27</text></g><g><text text-anchor='middle' x='245.14285714285717' y='343.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-04-28</text></g><g><text text-anchor='middle' x='325' y='360.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-04-29</text></g><g><text text-anchor='middle' x='404.8571428571429' y='343.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-04-30</text></g><g><text text-anchor='middle' x='484.7142857142857' y='360.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-05-01</text></g><g><text text-anchor='middle' x='564.5714285714286' y='343.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#222222'>2012-05-02</text></g><g><text text-anchor='end' x='39' y='328.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#444444'>0</text></g><g><text text-anchor='end' x='39' y='266.55' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#444444'>6</text></g><g><text text-anchor='end' x='39' y='205.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#444444'>12</text></g><g><text text-anchor='end' x='39' y='143.55' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#444444'>18</text></g><g><text text-anchor='end' x='39' y='82.05' font-family='Arial' font-size='13' stroke='none' stroke-width='0' fill='#444444'>24</text></g></g></g><g><g><text text-anchor='middle' x='17.05' y='200.5' font-family='Arial' font-size='13' font-style='italic' transform='rotate(-90 17.05 200.5)' stroke='none' stroke-width='0' fill='#222222'>Amount (USD)</text></g></g><g/></svg></div>");

    Document document = XMLResource.load(new ByteArrayInputStream(sb.toString().getBytes())).getDocument();
    ITextRenderer renderer = new ITextRenderer();
    renderer.setDocument(document,"test");
    String outputFile = "test.pdf";
    OutputStream os = new FileOutputStream(outputFile);
    renderer.layout();
    renderer.createPDF(os);
    os.close(); 
```

结果是生成的 PDF，其中包含图表的轴值，但不包含图表本身；即不包括图表图像。

任何想法或建议都会非常有帮助。

谢谢，肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:16:39.663

希望您找到了解决问题的方法 - 已经一个月了。

但是，如果您仍在寻找，并且如果您对要呈现为 PDF 的页面有足够的控制权，则可以尝试使用蜡染 ( [http://xmlgraphics.apache.org/batik/](http://xmlgraphics.apache.org/batik/) )。我继承了一个较旧的 grails 应用程序，该应用程序从作为网页查看时确实包含 SVG 的报告创建 PDF。该代码首先从 SVG 元素创建一个 PNG，然后使用 iText 渲染器创建 PDF。

在 batik 项目页面中，有对 PDF 生成的引用，但我找不到将包含一些 SVG 和一些“正常”标记的 DOM 并呈现为 PDF 的示例。

# javascript - jQuery 表达式从标签中提取属性

> ID：10437236
> 
> 赞同：0
> 
> 时间：2012-05-03T18:24:00.233
> 
> 标签：javascript, jquery

什么 jquery 表达式会给我`['a','b']`doc `<tag att1='a' /><tag att1='b' />`。

我正在处理的实际案例是列出 html 文档中使用的所有图像的数组（不是标签，而是图像的实际位置）。因此，所需的结果将类似于`["http://mywebsite.com/path_to_image_1.jpg", ...]`包含以下片段的文档：

```
<img src="http://mywebsite.com/path_to_image_1.jpg" />
<img src="http://mywebsite.com/path_to_image_2.jpg" /> 
```

我真的不想列出所有`<img>`标签，然后手动迭代以获取`src`属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:28:02.340

```
var array = $('img').map(function() { return this.src; }).toArray(); 
```

如果有帮助，如果您需要为不同的元素和属性执行此操作，这里有一个插件可以自动执行任务。

```
(function($) {
    $.fn.attrAsArray = function(attr) {
        return this.map(function() { return $(this).attr(attr); }).toArray();
    };
})(jQuery);

var array = $('img').attrAsArray('src'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:28:10.003

```
var imgs = $('img').map(function(){
    return this.src;
}).get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:27:07.280

```
var imageArray = [];
$('img').each(function() {
    imageArray.push($(this).attr('href'));
}); 
```

# c# - MVVM：绑定到模型，同时保持模型与服务器版本同步

> ID：10437241
> 
> 赞同：32
> 
> 时间：2012-05-03T18:24:24.843
> 
> 标签：c#, silverlight, mvvm, domain-driven-design, prism

我花了相当长的时间来尝试为以下挑战找到一个优雅的解决方案。我一直无法找到解决问题的解决方案。

我有一个简单的视图、视图模型和模型设置。为了解释起见，我将保持非常简单。

*   `Model`有一个名为`Title`String 类型的属性。
*   `Model`是`View`. _
*   模型上`View`有一个`TextBlock`数据绑定到`Title`该模型。
*   有`ViewModel`一个方法调用`Save()`，将保存`Model`到`Server`
*   `Server`可以推送对`Model`

到现在为止还挺好。现在我需要进行两项调整，以使模型与`Server`. 服务器的类型并不重要。只知道我需要调用`Save()`才能将模型推送到`Server.`

**调整一：**

*   `Model.Title`需要调用该属性`RaisePropertyChanged()`才能将 对 所做的更改`Model`转换`Server`为`View`。这很好用，因为它`Model`是 DataContext 的`View`

还不错。

**调整二：**

*   下一步是调用`Save()`以保存从`View`到 对`Model`所做的更改`Server`。这就是我卡住的地方。当模型发生更改时，我可以处理调用 Save() 的`Model.PropertyChanged`事件，`ViewModel`但这会使其回显服务器所做的更改。

我正在寻找一个优雅且合乎逻辑的解决方案，并且如果它有意义，我愿意改变我的架构。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-04T08:34:03.533

过去，我编写了一个支持从多个位置“实时”编辑数据对象的应用程序：应用程序的许多实例可以同时编辑同一个对象，当有人将更改推送到服务器时，其他人都会收到通知并（在最简单的情况下）立即看到这些变化。以下是它是如何设计的摘要。

## 设置

1.  视图*总是*绑定到 ViewModel。我知道它有很多样板，但是直接绑定到模型是不可接受的，除了最简单的场景；它也不符合 MVVM 的精神。

2.  ViewModel*独自*负责推动更改。这显然包括将更改推送到服务器，但也可能包括将更改推送到应用程序的其他组件。

    为此，ViewModels 可能希望*克隆*它们包装的模型，以便它们可以向应用程序的其余部分提供事务语义，就像它们提供给服务器一样（即，您可以选择何时将更改推送到应用程序的其余部分，您如果每个人都直接绑定到同一个模型实例，则无法做到）。像这样隔离更改需要更多的工作，*但*它也开辟了强大的可能性（例如，撤消更改是微不足道的：不要推动它们）。

3.  ViewModel 依赖于某种数据服务。数据服务是一个应用程序组件，位于数据存储和消费者之间，并处理它们之间的所有通信。每当 ViewModel 克隆其模型时，它还会订阅数据服务公开的适当“数据存储更改”事件。

    这允许 ViewModel 被通知其他 ViewModel 已推送到数据存储的“他们的”模型的更改并做出适当的反应。通过适当的抽象，数据存储也可以是任何东西（例如，该特定应用程序中的 WCF 服务）。

## 工作流程

1.  创建一个 ViewModel 并分配一个模型的所有权。它立即克隆模型并将这个克隆暴露给视图。它依赖于数据服务，它告诉 DS 它想要订阅通知以更新此特定模型。ViewModel 不知道是什么标识了它的模型（“主键”），但它不需要，因为这是 DS 的责任。

2.  当用户完成编辑时，他们与调用 VM 上的命令的视图交互。然后 VM 调用 DS，将所做的更改推送到其克隆模型。

3.  DS 保持这些更改并另外引发一个事件，通知所有其他感兴趣的 VM 已对 Model X 进行了更改；新版本的模型作为事件参数的一部分提供。

4.  已分配同一模型所有权的其他虚拟机现在知道外部更改已经到来。他们现在可以决定如何更新手头所有拼图的视图（模型的“先前”版本，它被克隆；“脏”版本，它是克隆；和“当前”版本，它作为事件参数的一部分被推送）。

## 笔记

*   模型`INotifyPropertyChanged`仅由视图使用；如果 ViewModel 想知道模型是否“脏”，它总是可以将克隆版本与原始版本进行比较（如果它一直保留，我建议如果可能的话）。
*   ViewModel 以原子方式将更改推送到服务器，这很好，因为它确保数据存储始终处于一致状态。这是一种设计选择，如果您想以不同的方式做事，另一种设计会更合适。
*   `this`如果 ViewModel作为参数传递给“推送更改”调用，则服务器可以选择不为负责此更改的 ViewModel 引发“模型更改”事件。即使它没有，如果 ViewModel 看到 Model 的“当前”版本与其自己的克隆相同，它也可以选择什么都不做。
*   通过足够的抽象，可以将更改推送到其他机器上运行的其他进程，就像它们可以推送到 shell 中的其他视图一样容易。

希望这可以帮助; 如果需要，我可以提供更多说明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T08:52:28.203

我建议将控制器添加到 MVVM 组合（MVCVM？）以简化更新模式。

控制器在更高级别侦听更改并在模型和视图模型之间传播更改。

保持清洁的基本规则是：

*   ViewModel 只是保存某种形状数据的愚蠢容器。*他们不知道数据来自哪里或显示在哪里。*
*   视图显示特定形状的数据（通过绑定到视图模型）。 *他们不知道数据来自哪里，只知道如何显示。*
*   模型提供真实数据。*他们不知道在哪里消费。*
*   控制器实现逻辑。诸如在 VM 中为 ICommand 提供代码、监听数据更改等事情。它们从模型中填充 VM。让他们监听 VM 更改并更新模型是有意义的。

正如另一个答案中提到的，您`DataContext`应该是虚拟机（或它的属性），而不是模型。指向 DataModel 使得分离关注点变得很困难（例如，对于测试驱动开发）。

大多数其他解决方案将逻辑放在“不正确”的 ViewModel 中，但我看到控制器的好处一直被忽视。*该死的 MVVM 首字母缩写词！*:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:49:09.317

仅当模型实现 INotifyPropertyChanged 接口时，绑定模型才能直接查看。（例如，您的模型由实体框架生成）

## 模型实现 INotifyPropertyChanged

你可以这样做。

```
public interface IModel : INotifyPropertyChanged //just sample model
{
    public string Title { get; set; }
}

public class ViewModel : NotificationObject //prism's ViewModel
{
    private IModel model;

    //construct
    public ViewModel(IModel model)
    {
        this.model = model;
        this.model.PropertyChanged += new PropertyChangedEventHandler(model_PropertyChanged);
    }

    private void model_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "Title")
        {
            //Do something if model has changed by external service.
            RaisePropertyChanged(e.PropertyName);
        }
    }
    //....more properties
} 
```

## ViewModel 作为 DTO

如果 Model 实现 INotifyPropertyChanged（取决于），在大多数情况下，您可以将其用作 DataContext。但在 DDD 中，大多数 MVVM 模型将被视为 EntityObject 而不是真正的域模型。

更有效的方法是使用 ViewModel 作为 DTO

```
//Option 1.ViewModel act as DTO / expose some Model's property and responsible for UI logic.
public string Title
{
    get 
    {
        // some getter logic
        return string.Format("{0}", this.model.Title); 
    }
    set
    {
        // if(Validate(value)) add some setter logic
        this.model.Title = value;
        RaisePropertyChanged(() => Title);
    }
}

//Option 2.expose the Model (have self validation and implement INotifyPropertyChanged).
public IModel Model
{
    get { return this.model; }
    set
    {
        this.model = value;
        RaisePropertyChanged(() => Model);
    }
} 
```

上面两个 ViewModel 的属性都可以用于绑定，而不会破坏 MVVM 模式（模式！= 规则），这真的取决于。

还有一件事.. ViewModel 依赖于 Model。如果模型可以被外部服务/环境改变。使事情变得复杂的是“全球状态”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:29:34.653

如果您唯一的问题是服务器的更改会立即重新保存，为什么不执行以下操作：

```
//WARNING: typed in SO window
public class ViewModel
{
    private string _title;
    public string Title
    {
        get { return _title; }
        set
        {
            if (value != _title) 
            {
                _title = value;
                this.OnPropertyChanged("Title");
                this.BeginSaveToServer();
            }
        }
    }

    public void UpdateTitleFromServer(string newTitle)
    {
        _title = newTitle;
        this.OnPropertyChanged("Title"); //alert the view of the change
    }
} 
```

此代码手动提醒来自服务器的属性更改视图，而无需通过属性设置器，因此无需调用“保存到服务器”代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T05:52:35.940

你有这个问题的原因是你的模型不知道它是否脏。

```
string Title {
  set {
    this._title = value;
    this._isDirty = true; // ??!!
  }
}} 
```

解决方案是通过单独的方法复制服务器更改：

```
public void CopyFromServer(Model serverCopy)
{
  this._title = serverCopy.Title;
} 
```

# .htaccess - 这个网页有一个带代码的重定向循环

> ID：10437243
> 
> 赞同：-2
> 
> 时间：2012-05-03T18:24:28.713
> 
> 标签：.htaccess, mod-rewrite, redirect

[http://www.gls.in/](http://www.gls.in/)的网页导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。以下是一些建议： 稍后重新加载此网页。了解有关此问题的更多信息。错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

```
RewriteCond %{HTTP_HOST} ^gls\.in$ [OR]
RewriteCond %{HTTP_HOST} ^www\.gls\.in$
RewriteRule ^/?$ "http\:\/\/www\.gls\.in\/" [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:32:08.163

问题是最后一行：

```
RewriteCond %{HTTP_HOST} ^gls\.in$ [OR]
RewriteCond %{HTTP_HOST} ^www\.gls\.in$
RewriteRule ^/?$ "http\:\/\/www\.gls\.in\/" [R=301,L] 
```

你到底想达到什么目的？如果你总是想重定向到 www.gls.in 然后删除第二个 RewriteCond 并重写每个访问。

```
RewriteCond %{HTTP_HOST} ^gls\.in$
RewriteRule .* "http\:\/\/www\.gls\.in\/" [R=301,L] 
```

# wordpress - 如果我为复杂但“标准”的 web 应用程序使用 Wordpress 而不是 php 框架，我会失去什么？权衡是否值得？

> ID：10437247
> 
> 赞同：28
> 
> 时间：2012-05-03T18:24:45.970
> 
> 标签：wordpress, codeigniter, web-applications, php

我知道这已经被问了很多，并且我已经探索了其他答案，但我仍然有问题，所以希望这能为辩论提供新的见解。

一年前，我在 CodeIngniter 中从头构建了一个服务调度 Web 应用程序，具有以下功能：

*   具有不同角色和功能的用户管理
*   每个用户的不同后端
*   用于安排服务的交互式和可管理日历
*   领土管理和分配
*   服务状态管理
*   报告和记录
*   使用 authorize.net 计费
*   前端信息页面

所有非常标准的东西和 codeIgniter 都很好用。现在，一年后，我正在修改代码。客户需要一些不同的管理功能，比如页面的 CMS 以及添加新服务和更改计算价格点等。我需要添加新的类和代码来完成这项工作。

在过去的一年里，我非常深入地研究了 Wordpress，并意识到我可以使用自定义帖子类型、分类法、自定义字段和通过自定义插件扩展的自定义功能在 wordpress 中构建整个应用程序。在许多方面，这似乎会更好。

使用 Wordpress 而不是 php 框架的优点：

*   现有的CMS基础，用户管理，熟悉的后端，从数据库结构入手，节省大量开发时间
*   不断更新的安全性
*   稳定
*   健壮性（我知道 wordpress 可以处理这个问题，即使它的预期用途是用于博客）

使用框架的原因：

*   灵活性
*   甲骨文
*   MVC
*   其他？

那么……哪个更好？我真的需要这个项目的 ORM 或 MVC 吗？我觉得如果我使用 Wordpress，我的开发工作和客户体验会更容易。

如果我切换到 wordpress，我还会失去什么？

在框架中结合 Wordpress 怎么样，反之亦然？建议？

什么时候使用框架而不是 wordpress 才有意义？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T09:59:14.327

这是一个相当广泛的问题，所以这里有一个相当广泛的答案......

Wordpress 是一个 CMS。这是一个很好的、灵活的 CMS，具有许多内置优点，但它的最佳点是管理一个主要与内容有关的网站，其中内容被非常广泛地定义为“文字、图片和其他资产”。插件模型允许您构建/使用附加功能，并且广泛的用户社区提供大量稳定性/安全性/可扩展性帮助。

Code Igniter 是一个为功能性 Web 应用程序设计的框架（实际上，这通常意味着数据库驱动的应用程序）。它的最佳点是管理与业务领域的复杂交互。它是用于构建任何类型应用程序的框架（包括，如果你是贪吃的惩罚，一个 CMS）。

如果您的业务领域与内容有关（根据您的描述，我认为不是），那么 Wordpress 显然是赢家。在您的情况下，我认为您可能可以使用 Wordpress 构建解决方案，但这将是一个真正的边缘案例 - 您提到的“安全性、稳定性、稳健性”的好处可能不适用，因为您需要构建很多的自定义代码。我想你很快就会明白“嗯，这不是 Wordpress 想要我工作的方式，但要提供这个功能，我必须这样做”这一点。

当业务用户说他们想要 CMS 时，他们通常并不意味着他们想要 Wordpress（或 Drupal、Sitecore 或 Magnolia）；他们希望能够管理他们的网站，而不必去找技术人员。如果您的站点主要是数据库驱动的，那意味着管理数据库记录的屏幕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T11:07:05.577

在我看来，这是关于结构和功能的。CMS（Wordpress）和 PHP 框架都提供结构/功能来构建您自己的功能。您可以在 CMS 和 Framework 上执行相同的操作。它们在众所周知的框架和 CMS 之间的性能和安全性应该没有太大差异。

然而，CMS 专注于前端（内容？），提供现成的 CSS、Javascript（前端），以便轻松快速地构建/管理网站和基于 Web 的应用程序。但是，与 MVC 模型相比，它的结构并不是很清楚。

如果你自己发展，两者都会做同样的工作，但在一个团队中，框架可以提供好处。

这只是我的观点，我经常使用 Wordpress，并且对框架有一点了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T02:58:14.720

我使用 CodeIgniter，我的偏见是因为你已经在其中构建了大部分应用程序，而且它看起来比 Wordpress 更灵活/预配置更少。我也感觉到 CI 相对于 WP 的使用在开发人员中越来越多，所以 CI 似乎更有可能面向未来，尽管公平地说它们都很受欢迎。

你能说清楚你是老板的要求吗？我读到你说的内容的方式是，你已经完成了 80% 的工作，然后正在考虑抓取（或至少可能不得不大量修改）这 80%，因为其他 20% 似乎在 Wordpress 中更合乎逻辑。

随着我对 PHP 的了解越来越多，我实际上发现自己使用的 CI 更少，而是更直接地编写 PHP 或 JavaScript（以获得更好的用户体验）。所以我想我很惊讶听到有人想要从最小的 PHP/ruby/Python 框架切换到更重的框架，因为这些天大部分工作都在转移到 JavaScript。

直接使用 PHP 的另一个关键点是，了解 PHP 的人数使熟悉 CI 或 WP 特定语法的人数相形见绌。因此，您更有可能获得帮助/合作/职业发展，重点是这些少数民族方言的“母语”的坚实基础。使用 PHP 执行此操作还有助于帮助我更好地理解其他语言，例如 JavaScript，因为抽象级别与 php-ruby-python 在同一页面上，而框架带来了完全不同的（在我越来越多的观点中） , 无关的) 词汇。

# sqlite - Sqlite频繁的Header访问

> ID：10437250
> 
> 赞同：1
> 
> 时间：2012-05-03T18:25:17.443
> 
> 标签：sqlite

我在我的应用程序中使用 sqlite 仅用于读取访问。数据库经常被我的应用程序访问，我可以看到每次访问数据库时都会读取数据库的标头（100 字节）。准确地说，每次从头的第 24 个字节开始读取 16 个字节。我的问题是，如果数据库仅用于读取目的，为什么每次都读取标题，因为数据库连接没有关闭？..我们可以让它只读取一次吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:40:21.317

谷歌搜索给了我这个链接，它说

“您的进程可能承诺它只会读取数据库，但可能还有其他进程写入它。不是服务器，sqlite 没有其他方法可以找到它，只能一遍又一遍地读取标题。它有检查架构是否已更改，或这些字节中的任何其他信息。”

[http://www.mail-archive.com/sqlite-users@sqlite.org/msg69900.html](http://www.mail-archive.com/sqlite-users@sqlite.org/msg69900.html)

# java - 启动启动另一个命令行应用程序的命令行应用程序永远不会响应

> ID：10437252
> 
> 赞同：0
> 
> 时间：2012-05-03T18:25:25.260
> 
> 标签：java, 7zip, psexec

当我从命令行运行以下命令时，我可以以远程用户身份运行 7-zip 并将文件解压缩到网络共享：

```
C:\PsExec.exe -u username -p password "C:\7z.exe" x -y -o\\network\extractedfiles\ C:\compressed.zip toextract.txt 
```

我正在运行这个生成的行，就像我的应用程序正在运行它一样（注意我已经更改了目录、路径、用户名和密码，以便我可以在线发布它）。事实上，该行是从我的应用程序日志中复制的。

但是由于某种原因，当我使用以下代码从 Java 运行此命令时，它会一直等待。“\network\extractedfiles\”路径上没有文件出现。

```
final Process copyFile = Runtime.getRuntime().exec( cmd );
final int exit = copyFile.waitFor(); 
```

其中 cmd 是上面的字符串。有任何想法吗？

更多信息1：

我还想说，我注意到当它通过命令行运行时，psexec 在单独的命令窗口中启动 z-zip。问题可能是 zip 的输出没有被处理吗？我尝试关闭输入流，但似乎并没有解决我面临的问题。

更多信息 2：

我尝试从命令中注销输出，这就是我得到的：

```
INFO 2012-05-03 15:07:55,188 - Command output: PsExec v1.98 - Execute processes remotely
INFO 2012-05-03 15:07:55,188 - Command output: Copyright (C) 2001-2010 Mark Russinovich
INFO 2012-05-03 15:07:55,188 - Command output: Sysinternals - www.sysinternals.com
INFO 2012-05-03 15:07:55,188 - Command output: 
```

然后它永远坐着。在命令行上运行时，下一行输出是：

```
C:\7z.exe exited with error code 0. 
```

所以看起来 7-zip 挂了。它甚至没有开始提取文件 - 当我检查文件预计提取的目录时，什么都没有出现。

更多信息 3：

我使用 ionic.zip.dll 在 .net 中创建了自己的解压缩器。我的解压器非常简单——通过命令行接受参数，没有任何输出。但它仍然做了完全相同的事情 - 解压缩没有开始并且执行挂起。也许 psexec 正在做一些奇怪的事情？？？psexec 想要在外部命令控制台中运行解压缩程序这一事实是否会导致 Java 出现任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:29:35.990

可能有一个错误，你应该从你的进程中读取流来确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:46:36.973

就像更新一样；我尝试使用 C# .net 创建自己的解压缩器、psexec 甚至我自己的命令行包装器（不想重新制作整个应用程序），这两个自定义应用程序都没有任何输出，并且我正在运行的命令有效每次从以外部用户身份运行的 cmd 窗口中。但是，从 Java 开始，它工作了一次，然后第二次解压缩器冻结了，再也没有工作过。似乎是防病毒或防火墙问题。不幸的是，它现在不在我的手中，这里的 IT 部门目前正在帮助我们运行它，我一直在等待他们的回复。

# c# - 在 win 表单上动态添加元素？

> ID：10437253
> 
> 赞同：2
> 
> 时间：2012-05-03T18:25:30.737
> 
> 标签：c#, winforms

我有两种形式。单击 form1 上的按钮打开 form2，用户在其中添加详细信息并将其返回到 form1，信息存储到`List`并创建 TextBoxes 和其他界面元素。

我有 5 个不同级别的选项卡，但添加的信息是相同的。

如何避免使用 5 次创建类似的代码

```
if (level==5) {//do this whole code again} 
```

添加的元素示例：

```
int _nextTextBoxTop=15;
List<TextBox> CodesMy = new List<TextBox>();

var code = new TextBox();
CodesMy.Add(code);
code.Location = new Point(12, _nextTextBoxTop);
_nextTextBoxTop += 36;
code.Size = new Size(80, 25);
code.Text = mcode;
tabPageLevel5.Controls.Add.Controls.Add(code); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:28:50.457

最简单的解决方案可能是将您的元素创建重构为一个单独的函数，如下所示：

```
CreateControls(TabPage tabPage)
{
var code = new TextBox();
CodesMy.Add(code);
code.Location = new Point(12, _nextTextBoxTop);
_nextTextBoxTop += 36;
code.Size = new Size(80, 25);
code.Text = mcode;
tabPage.Controls.Add.Controls.Add(code);     
} 
```

您的客户端代码将如下所示：

```
if (level==5) {CreateControls(tabPageLevel5);} 
```

比动态添加控件更简单的方法是创建用于每个标签页的用户控件。

即使您需要动态添加控件，您仍然可以使用用户控件执行此操作，并在每个附加标签页每次克隆它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:29:13.500

您不应该绝对指定职位。创建一个`FlowLayoutPanel`并将每个新文本框（或带有代表要添加的新“事物”的所有控件的用户控件）添加到该面板，以便将它们添加到前一个文本框的下方。

您将`FlowLayoutPanel`它们添加到哪个选项卡可能会有所不同，具体取决于您要将它们添加到哪个选项卡。您可以将其作为方法的参数，类似于 Paul 的建议，或者您可以有一个 variable`currentTab`或`panelInCurrentTab`类似设置适当的东西，然后是一个简单地将新控件添加到该容器的方法。

# c# - 需要使用asp.net c#获取客户端机器名称或他的Mac地址

> ID：10437258
> 
> 赞同：0
> 
> 时间：2012-05-03T18:25:56.840
> 
> 标签：c#, asp.net

> **可能重复：**
> [获取 ASP.NET 网站用户的 MAC](https://stackoverflow.com/questions/1342738/get-the-mac-of-asp-net-website-user)

我正在开发一个本地 Web 应用程序。我需要获取访问该网站的客户端 PC 的 Mac id。该站点是本地的，因此我可以安装一些 dll 或库，但我仍然需要 mac 地址。我搜索了它，但没有任何解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:48:35.187

简短的回答：在一般情况下这是不可能的。MAC 地址是 TCP 堆栈的硬件层详细信息，本地子网的 DCHP 服务器以外的远程计算机不需要知道该地址。它实际上是一个广为人知的客户端 MAC 的安全漏洞。

您可以使用通过 Page.Request 属性获得的 HttpRequest 实例获取远程 HTTP 客户端的 IP 地址。如果该地址恰好在同一个子网中，您可以使用命令行工具或通过“嗅探”DHCP 数据包（广播到网络上的所有计算机）让机器报告其 MAC 地址建立自己的 MAC 地址数据库；但是，除了 IPCONFIG（不能用于询问其他计算机）之外，任何 Windows 工具都不会根据请求提供此信息。

# google-analytics - Google Analytics 中的电子商务跟踪代码

> ID：10437260
> 
> 赞同：0
> 
> 时间：2012-05-03T18:26:05.367
> 
> 标签：google-analytics, e-commerce, tracking

我的公司使用网站中所有页面共享的 layout.phtml，我在其中插入了基本的 Google Analytics 代码。现在我想将电子商务跟踪代码插入部分头部（特定于该页面的任何代码都在此处）仅用于也共享 layout.phtml 页面的确认页面。除了 Basic GA 中的代码之外，我是否必须再次为电子商务跟踪代码添加此代码？

```
var _gaq = _gaq || []; 
_gaq.push(['_setAccount', 'UA-XXXXX-X']);** 
```

<---电子商务跟踪代码将在这里---->

```
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

其他我的电子商务跟踪代码，主要是：

```
_gaq.push(['_addTrans','','','','']);

_gaq.push(['_addItem','','','','','',]);

_gaq.push(['_trackTrans']); 
```

它仍然在 Basic Google Analytics 代码之外。它还会起作用吗？

**当我查看确认页面的源代码时，这就是我的代码现在的样子：**

```
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-XXXXX-X']);

_gaq.push(['_trackPageview']);

(function() {

 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

<!------Ecommerce tracking code for confirmation page--->

<?php if($this->tx_id == true && $this->rd['total'] == true){?>

_gaq.push(['_addTrans',<?=$this->tx_id ?>,'',<?=$this->rd['total']?>,'','','','','']);

<!------Items purchased------>

<?php foreach($this->dd as $sku=>$val) {

$i++;

$product_title= $this->pp[$sku]['title'];

$qty = $val['pt']['qty']; ?>

_gaq.push(['_addItem',

<?= $this->tx_id ?>,

<?= $sku ?>,

<?= $this->pp[$sku]['title'] ?>,

'',

<?= $this->pp[$sku]['price']?>,

<?= $qty ?>

 ]);

<?php }?>

 _gaq.push(['_trackTrans']); 

<?php  }?>

<!-------Ecommerce tracking code ends here----> 
```

任何人都可以审查它吗？还有在发送到生产之前有什么方法可以测试它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:53:28.667

您无需复制跟踪代码。
addTrans、addItem 和 trackTrans 可以分别调用。

（你的代码似乎没问题。）

# lua - 链接到 Asana 的 Lua 示例

> ID：10437270
> 
> 赞同：0
> 
> 时间：2012-05-03T18:26:46.177
> 
> 标签：lua, asana

您是否有任何 Lua 示例来访问和更改 Asana 数据。这将非常有帮助。我想将 Asana 链接到我在 Lua 中的离线任务管理器，这为我提供了一些额外的灵活性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:45:41.043

（我在 Asana 工作）

文档中没有可用的 Lua 示例。如果您以前曾使用 Lua 连接到 RESTful API，向 POST 和 GET 发出 HTTP 请求，我希望体验会类似。

# windows - 与父母 1-2 的 git diff

> ID：10437271
> 
> 赞同：2
> 
> 时间：2012-05-03T18:26:49.190
> 
> 标签：windows, git, tortoisegit

我在看 Tortoise 的日志，这条消息在那里 Commit:ab77ac9ca5264c531586ad9c5f007395d3e7ae9b

*   合并 repo 的“master”分支：R:/AAL/dotNET/OPDash

还有“与父母 1 的差异”和“与父母 2 的差异”不确定我应该做什么。

我应该只在 Tortoise 中运行合并选项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:34:47.957

日志表明某人（例如您）已经进行了合并。如果您的本地分支与跟踪的分支不同，并且您从分支的上游“拉”，就会发生这种情况。

git 将尝试自动合并您的分支和拉取的分支，这是您从中获取通用日志消息的地方。

一般来说，在合并它们之前，您应该检查来自外部且您不 100% 信任的任何变更集。

# c++ - 哪个ctor被称为？

> ID：10437277
> 
> 赞同：0
> 
> 时间：2012-05-03T18:27:11.300
> 
> 标签：c++, copy-constructor

> **可能重复：**
> [为什么在这种情况下不调用复制构造函数？](https://stackoverflow.com/questions/1758142/why-copy-constructor-is-not-called-in-this-case)
> [什么是复制省略，它如何优化复制和交换的习惯用法？](https://stackoverflow.com/questions/2143787/what-is-copy-elision-and-how-does-it-optimize-the-copy-and-swap-idiom)

我一直在尝试理解 ctor 和运算符重载。

```
#include <iostream>
using namespace std;

class number {
   int n;
 public:
   number(int i=0):n(i)     {       cout<<"in ctor"<<endl;    }
    ~number()               {       cout<<"in dtor"<<endl;    }
   number(const number& obj):n(obj.n)   {
                                    cout<<"in copy ctor"<<endl;   }
   number operator+(const number & obj)  {
                                     return number(n+obj.n);   }

    number operator=(const number &rhs)  {
               n = rhs.n;        cout<<"in assignemnt opr"<<endl;    }
   void disp() {cout<<n<<endl;}
};

int main()
{
        number one(1),two(2);
        number three =one + two; //was expecting copy ctor being called here
        three.disp();
} 
```

当我运行上面的代码时，我得到了以下输出

![在此处输入图像描述](../Images/cf78e8391b3fca293983ad12a05929e8.png)

我知道在重载运算符中调用了三个构造函数`one`和`two`对象`un-named`。`+`我无法理解`three`是如何构造的。我认为应该调用复制ctor。但似乎不是。有人可以解释一下吗。谢谢。

# forms - 如何在使用 struts2 的组合框中使用 i18n？

> ID：10437279
> 
> 赞同：1
> 
> 时间：2012-05-03T18:27:12.470
> 
> 标签：forms, jsp, internationalization, combobox, struts2

我有一个带有组合框的表单，允许人们选择他们是男性还是女性。我想用其他语言将相同的词更改为*男性*和*女性*。

我的实际组合框是：

```
<s:combobox readonly="true" key="sex" 
list="{'Male', 'Female'}" value="Male" /> 
```

有没有办法把这个组合框放在不同的语言中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:50:07.350

最后，我找到了解决方案。我必须实现一个动作来显示这个 jsp 页面，其中包含一个属性列表和一个 getter。

```
public class Action extends ActionSupport {
    ...
    private List<String> genders = new ArrayList<String> ();

    public Action ()
    {
        genders.add(getText("male"));
        genders.add(getText("female"));
    }

    @Override
    public String input() throws Exception {    
        return NONE;
    }
    ...
} 
```

然后在jsp页面中，我使用这个属性作为组合框中需要的列表。

```
<s:combobox readonly="true" key="generos" list="genders"/> 
```

# qt - Qt Translation 返回相同的字符串而不是翻译

> ID：10437283
> 
> 赞同：3
> 
> 时间：2012-05-03T18:27:27.960
> 
> 标签：qt

我遇到了一个奇怪的 Qt 翻译问题。

由于我无法更改涉及翻译表的遗留数据库的原因，我们的“自然语言”是“枚举”。

```
QString myString = tr("OUR_APP_MY_STRING"); 
```

我有一个脚本，可以从我们的数据库中构建 *.TS 文件以供 Qt 使用。

*.TS 文件中英文的条目如下所示：

```
<message>
    <source>OUR_APP_MY_STRING</source>
    <translation>My String</translation>
</message> 
```

*.TS 文件可以很好地加载到 Qt Linguist 中。那里的一切看起来都很好。找到“OUR_APP_MY_STRING”，它的“英文翻译”看起来没问题。

QT 项目文件在 TRANSLATION 部分中有 *.TS 文件，我使用 lRelease 生成*.QM 文件并将它们放入应用程序的资源 (* .qrc) 文件中。

在我的应用程序的设置函数（构造后由 main() 调用）中，我有以下代码：

```
// initialize translator
this->currentTranslator = new QTranslator(instance());

if (this->currentTranslator->load(":/translation/myApp_en.qm"))
{
  this->installTranslator(this->currentTranslator);
  QString test = tr("OUR_APP_MY_STRING");  // <<----- problem. output is always "OUR_APP_MY_STRING"

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T19:39:37.723

不清楚`instance()`这一行是什么

```
 this->currentTranslator = new QTranslator(instance()); 
```

但无论如何，这里有一些事情要检查：

*   你有这样的东西`YourProjectName.pro`吗？

> ```
> RESOURCES += \
>    resources.qrc 
> ```

（`resources.qrc`是我通常使用的名称。替换为您选择的任何名称。）

*   你检查你的前缀了`resources.qrc`吗？你确定里面有`translation/`前缀吗？像这样的东西也应该起作用：

> ```
>  <RCC>
>     <qresource prefix="/">
>       <file>translation/YourProjectName_en.qm</file>
>       <!-- other resources here -->
>     </qresource>
>   </RCC> 
> ```

前提是您`YourProjectName_en.qm`在`translation/`子目录中。

这就是***Works for Me™***：

在`main.cpp`：

```
 QApplication app(argc, argv);
 QApplication::setApplicationName("MyApplication");
 QApplication::setApplicationVersion("4.4");
 QApplication::setOrganizationName("FUBAR");
 QApplication::setOrganizationDomain("www.fu.bar");

 QTranslator translator;
 translator.load(app.applicationName() + "_" + QLocale::system().name(), ":/ts");
 app.installTranslator(&translator); 
```

在`resources.qrc`：

> ```
> <RCC>
>    <qresource prefix="/">
>      <file>resources/pixmaps/exit.png</file>
>      <!-- ... -->
>      <file>ts/MyApplication_en.qm</file>
>      <file>ts/MyApplication_es.qm</file>
>    </qresource>
> </RCC> 
> ```

在`MyApplication.pro`：

```
 TRANSLATIONS += \
   ts/MyApplication_en.ts \
   ts/MyApplication_es.ts

 RESOURCES += \
   resources.qrc

 win32 {
   RC_FILE = win32.rc
 }

 OTHER_FILES += \
     win32.rc \
     TODO.txt 
```

以下是项目树的简要说明：

```
MyApplication
 ├── resources
 │   ├── pixmaps
 │   └── ...
 ├── (sources are here)
 ├── MyApplication.pro
 ├── resources.qrc
 ├── TODO.txt
 ├── ts
 │   ├── MyApplication_en.qm
 │   ├── MyApplication_en.ts
 │   ├── MyApplication_es.qm
 │   └── MyApplication_es.ts
 └── win32.rc 
```

这是一个非常小的项目，源代码与一些工件混合在一起。

**编辑：**

我认为您应该尝试将分隔的文件名和目录部分传递给加载方法。简而言之，改变这一行

```
 if (this->currentTranslator->load(":/translation/myApp_en.qm")) 
```

对此

```
 if (this->currentTranslator->load("myApp_en.qm", ":/translation/")) 
```

# ssis - SSIS文件系统任务错误：分配给变量的值的类型...与当前变量类型不同

> ID：10437284
> 
> 赞同：3
> 
> 时间：2012-05-03T18:27:41.283
> 
> 标签：ssis, sql-server-2008-r2

好的...我有一个相对简单的 SSIS 包（DTSDesigner100、Visual Studio 2008 版本 9.0.30729.4462 QFE、.NET Framework 3.5 SP1）。在包的 SSIS 控制流的末尾是一个**文件系统任务**，它是一个**重命名文件**操作。

此文件系统任务的属性如下：

*   IsDetinationPathVariable：真
*   目标变量：用户::输出文件名
*   覆盖目标：真
*   描述：文件系统任务
*   操作：重命名文件
*   IsSourcePath 变量：假
*   SourceConnection：Excel 模板复制目标

没有定义的表达式。如您所见，我将 Destination 分配为变量 User::OutputFileName。那么让我们看看这个变量......

*   名称：输出文件名
*   范围：包
*   数据类型（ValueType）：字符串
*   价值：
*   命名空间：用户
*   EvaluateAsExpression：真
*   只读：错误
*   表达式：（见下文）

.

```
"\\\\SERVER\\Folder\\" + "MyAwesomeExcelWorkbook_"
+ (DT_WSTR,4)DATEPART("year", GETDATE())+ "-"
+ RIGHT("0" + (DT_WSTR,2)DATEPART("mm", GETDATE()), 2) + "-"
+ RIGHT("0" + (DT_WSTR,2)DATEPART("dd", GETDATE()), 2) + "-"
+ RIGHT("0" + (DT_WSTR,2)DATEPART("hh", GETDATE()), 2) + "-"
+ RIGHT("0" + (DT_WSTR,2)DATEPART("mi", GETDATE()), 2) + "-"
+ RIGHT("0" + (DT_WSTR,2)DATEPART("ss", GETDATE()), 2)
+ ".xlsx" 
```

所以我可以成功地评估这个表达式。正如人们所期望的那样，每次包运行（和失败）时，它的 Value 都是评估表达式的值。

当我运行包时，会发生以下情况......

1.  前面的步骤运行成功。
2.  文件系统任务启动，文件成功重命名。
3.  但是，由于文件系统任务失败并出现以下错误，包现在失败：

.

```
Error: 0xC001F009 at Package: The type of the value being assigned to variable "User::OutputFileName" differs from the current variable type. Variables may not change type during execution. Variable types are strict, except for variables of type Object.
Task failed: Rename Excel Workbook
Error: 0xC0019001 at Rename Excel Workbook: The wrapper was unable to set the value of the variable specified in the ExecutionValueVariable property.
Warning: 0x80019002 at Package: SSIS Warning Code DTS_W_MAXIMUMERRORCOUNTREACHED.  The Execution method succeeded, but the number of errors raised (4) reached the maximum allowed (1); resulting in failure. This occurs when the number of errors reaches the number specified in MaximumErrorCount. Change the MaximumErrorCount or fix the errors.
SSIS package "Package.dtsx" finished: Failure. 
```

显然，我在这里忘记了一些小细节。现在，我已经尝试将整个表达式转换为 DT_WSTR,512 - 计算结果很好，但文件系统任务仍然会失败并出现同样的错误。

谁能指出我忽略的细节？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-17T18:46:33.427

我也遇到了同样的错误。我使用“执行 SQL 任务”来运行存储过程，从中使用单行结果集值来设置 SSIS 包变量。存储过程中的变量被声明为“varchar(max)”，我将它们分配给定义为“字符串”的包级变量。

所以我尝试将存储过程声明更改为 varchar(512) 和“VOILA”......不再出现错误。实际上......它也适用于varchar（8000）和nvarchar（4000）......但SSIS没有像varchar（max）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:54:37.857

问题是变量的范围是包，而不是任务。
更改要作用于任务的变量会导致成功执行。

**编辑：**我想我需要问 - 为什么？老实说，这不符合我对 SSIS 的理解——自从它通过每个 Denali CTP 引入以来，我一直在使用它。幕后发生了什么导致这对于任务范围的变量来说是笨拙的，而不是*在文件系统任务中使用的*包范围的变量？在某些任务之外没有问题，但是当我在某些任务中使用它们时会有一个问题。这是怎么回事？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:30:49.830

您可能需要检查 SSIS 包中的“额外”变量。包范围的变量应该在任务中可用。打开“变量”窗口并单击“显示所有变量”窗口以查看您是否有两个变量 - 在不同的范围内 - 名为 OutputFileName。

![显示所有变量](../Images/0f78011c86ad9d36011d674f7884a781.png)

由于在 SSIS 中变量是按名称标识的，因此如果两个变量的名称相同，则较低范围的变量（例如包含文件系统任务的序列容器）将有效地*拦截包范围变量的变量标识：*

![多个同名变量](../Images/40bf8345c39d5e0f16cdacab0f208867.png)

希望这会有所帮助，安迪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T02:16:44.140

我想补充一些信息，这是对我当前问题的最接近的描述，希望它能对其他人有所帮助。我正在从参数化的 SQL 任务加载记录集对象，然后在记录集上使用 for each 循环并将字段加载到变量中。

对于我在 for each 循环中加载的变量之一，我收到了上述错误。

当我更改填充记录集的*先前*SQL 任务时，问题就消失了。

即，当在先前的 SQL 任务中使用它时，在随后的 for each 循环中将 COL2 加载到变量中时会导致错误：

```
SELECT COL1, COL2 FROM Table WHERE COL2 = ? OR ? = '' 
```

（或者）

```
SELECT COL1, COL2 FROM Table WHERE COL2 = ? OR ? = N'' 
```

这停止了​​发生的错误：

```
SELECT COL1, COL2 FROM Table WHERE COL2 = ? 
```

SSIS 中的参数功能令人失望。

*   不能在选择部分放参数
*   无法围绕参数包装转换函数
*   不能在 UDF 或任何相当复杂的查询中使用参数
*   需要根据驱动查找深奥的参数代码（OLEDB/ADO.Net/ODBC）
*   从上述错误看来，使用字段作为参数会以某种方式影响查询的字段输出上的元数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T15:38:10.313

我收到以下异常。我已经解决了。我将解释问题以及我为解决问题所采取的步骤。

```
 **Error Message :** The type of the value being assigned to 
variable differs from the current variable type..

              **When :** Executing SSIS package. SSIS package is calling batch script. 
        Batch script is calling Python script. SSIS package is expecting output from 
    batch file. After executing the batch file and python script output 
should be delivered to SSIS package.  But Here I am getting the exception.

    **Python Script writing output into stdout :** 
    //Python code start
    print >>sys.stdout, "output" 
    //Python code End
    So here the output is written to standard out.

        **Issue :**  When I am calling the batch file, I am writing the log 
into one log file.
    Please check the following batch script.
    //Batch File script start
    C:\Python25\python.exe GetValFromPYthonSCript.py > scriptLog.txt  
    //Batch File script End
        So what happend is, the output is written in the log.But again 
I tried to read the output using the following line in SSIS.
    //SSIS coding start
    Dim objProcess As Process
    objProcess = New Process()
    objProcess.StartInfo.FileName = "batchFile location"
    objProcess.start()
    System.Windows.Forms.MessageBox.Show(objProcess.StandardOutput.ReadLine())
    //SSIS coding End

    So when I am trying to display I am getting the above exception.

    **Fix** : Just I have removed the log. I did not write the output into the log file.
    C:\Python25\python.exe GetValFromPYthonSCript.py
    Now I am getting the output properly. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-18T13:17:27.130

SQL Server 2016 VS2015 社区 14.0.25431.01 U3 SSDT 14.0.61712.050

这个让我的大脑发痒的时间比我承认的要长。我有两个包，每个包都有一个返回分配给变量的不同 sql 语句的过程。其中一个软件包有效，而其中一个无效。

在工作包/程序中，我将变量`@sql`声明为`varchar(max)`. 在查询中，我添加了一个存储为变量的回溯日期`@dt` `varchar(7)`。我正在连接`@dt`到`@sql`.

在非工作包/过程中，我将变量`@sql`声明为`varchar(max)`. 在此查询中，我添加了一个存储为变量的回溯日期`@dt varchar(max)`。在 SSMS 中，此过程起作用并返回可执行的语句。然而，在 SSIS 中，这不起作用。

一旦我将后一个变量更改为更短的 char length `(varchar(7))`，VS 中的任务/变量分配就成功了。

希望有帮助。

# asp.net-mvc - 多个 PUT 操作，asp.net mvc 4 web api

> ID：10437293
> 
> 赞同：2
> 
> 时间：2012-05-03T18:28:07.333
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我正在尝试为此使用 asp.net mvc 4 构建一个 web api。假设我们有 Books 资源。获取，发布，删除工作正常，但万一发布我有点困惑。我想使用 PUT 的方式是 CQRS，例如：一个操作 PUT 用于更新标题，另一个操作 PUT 用于更新作者，另一个操作用于使这本书成为收藏夹。所有这些 PUT 操作都被不同类型的命令重载，它们只有一个参数。当我尝试从 MVC 向此资源路由发出 PUT 请求时失败，说明这是与请求匹配的多个 PUT 操作。任何人都可以建议如何配置路由来处理：

```
public HttpResponseMessage Put(MakeFavorite mf){/*code*/}

public HttpResponseMessage Put(ChangeTitle ct){/*code*/}

public HttpResponseMessage Put(UpdateAuthor ua){/*code*/} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T18:57:47.667

我认为最好不要在这里应用 RPC，即使是大卫解决方案也有一些 RPC 工件。首先你应该设计你的URI结构。例如：

```
/books/{bookId}/favouritestate/{state}  
/books/{bookId}/title/{title}  
/books/{bookId}/author/{author} 
```

然后更新您的路由表以处理此问题：

```
 routes.MapHttpRoute(
                name: "BookTitleApiRoute",
                routeTemplate: "books/{bookId}/title/{title}  ",
                defaults: new {controller = "BookTitleController", title = RouteParameter.Optional}
                ); 
```

然后添加一些控制器。例如：

```
 public class BookTitleController : ApiController
    {
        // GET /books/{bookId}/title/
        public HttpResponseMessage Get(string bookId)
        {
            return your book title
        }
        // PUT /books/{bookId}/title/{title}
        public HttpResponseMessage Put(string bookId,string title)
        {
            update book title and return result
        }

    } 
```

您还可以在诸如此类的对象之间进行交互。

希望这将有助于 ypu 构建好的 RESTful API =))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:44:48.537

由于每个函数之间实际上并没有太大关系，因此您应该尝试将每个 put 方法放在单独的相应控制器中。

```
public class MakeFavoriteController : ApiController
{
    public HttpResponseMessage Put(MakeFavorite mf)
    {
        // Code
    }
}

public class ChangeTitleController : ApiController
{
    public HttpResponseMessage Put(ChangeTitle ct)
    {
        // Code
    }
}

public class UpdateAuthorController : ApiController
{
    public HttpResponseMessage Put(UpdateAuthor ua)
    {
        // Code
    }
} 
```

# php - ping HTTP 代码的最有效方法

> ID：10437295
> 
> 赞同：0
> 
> 时间：2012-05-03T18:28:26.017
> 
> 标签：php, http

我正在考虑为我运行的 SaaS 提供网站监控功能。它不需要非常复杂（即没有来自多个位置的检查，没有花哨的报告，并且最多 15-30 分钟的频率）。如果站点以意外的 HTTP 代码响应，只需向管理员发送一封快速电子邮件即可。

我最初的想法是每 15 分钟运行一次 crobjob，并让 PHP 脚本检查每个站点。使用[php-multi-curl](https://github.com/jmathai/php-multi-curl)，我能够平均每秒最多两个站点。对于 10,000 或 20,000 个站点，这可能需要一段时间，所以我的问题是，有什么更好的方法？一个守护进程？多个服务器处理一个中央队列？

我正在寻找可以处理 ping 大量站点而又不会占用过多资源的东西。这不是专门的监控服务——只是现有服务的附加功能。

**编辑：**了解 Pingdom 和 AreMySitesUp 等服务的运作方式可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:01:35.820

如果 crontab 上的东西足够好，您可以为此编写一个 shellscript。要弄清楚该网站的情况，您可以使用：

```
curl -w %{http_code} -o /dev/null --silent (your target) 
```

如果域无法访问（无论出于何种原因），它只会返回 http 状态代码或 000。

然后，您使用另一个命令行工具来发送邮件，并且速度非常快。

（我不确定您希望得到的答案有多详细，有关更多详细信息，请发表评论。）

# c++ - 在嵌套模板专业化期间初始化嵌套模板类的静态成员？

> ID：10437298
> 
> 赞同：1
> 
> 时间：2012-05-03T18:28:34.340
> 
> 标签：c++, templates, static

这是我的问题：

```
template<typename T>
class Outer 
{
public:
    template<typename U>
    class Inner 
    {
    private:
        static int count;
    };

    static int code;
    void print() const
    {
        std::cout << "generic";
    }
};

template<>
template<>
class Outer<bool>::Inner<bool> 
{
    static int count;
};

template<>
template<>
int Outer<bool>::Inner<bool>::count = 4; // ERROR 
```

如何正确初始化它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T18:32:16.993

完全专业化的模板实际上不再是模板，因此您的定义应该是：

```
int Outer<bool>::Inner<bool>::count = 4; 
```

完整地，所有定义都已到位，您的代码应如下所示：

```
template<typename T>
class Outer 
{
public:
    template<typename U>
    class Inner 
    {
    private:
        static int count;
    };

    static int code;
    void print() const
    {
        std::cout << "generic";
    }
};

template<typename T>
int Outer<T>::code = 0;

template<typename T>
template<typename U>
int Outer<T>::Inner<U>::count = 0;

template<>
template<>
class Outer<bool>::Inner<bool> 
{
    static int count;
};

int Outer<bool>::Inner<bool>::count = 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-23T11:27:46.397

要为每个内部模板类实例获取一个静态成员，您可以作为替代方案使用单独的模板类。

```
template<typename T>
class Outer 
{
public:
    template<typename U>
    class Inner 
    {
    };
};

template <typename T>
struct InnerStatic
{
  static int count;
};

template <typename T>
int InnerStatic<T>::count = 4;

int main(int argc, char** argv)
{
  std::cout << InnerStatic<Outer<int>::Inner<int>>::count << std::endl;
  return 0;
} 
```

# sql-server-2008 - 将 INT 转换为 VARCHAR

> ID：10437300
> 
> 赞同：8
> 
> 时间：2012-05-03T18:28:51.327
> 
> 标签：sql-server-2008

全部，

我有一个填充表，其中“ **SSN** ”列作为数据类型**INT**。是否可以将列“ **SSN** ”和列中的数据转换为 VARCHAR(#)。

```
ALTER TABLE Table1
 MODIFY SSN varchar(9); 
```

那会奏效吗？

谢谢！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T18:30:23.403

```
alter table Table1
  alter column SSN varchar(9); 
```

您可以进行快速测试以验证这将保留数据。

```
create table #data(
  ssl int
)

insert into #data values(1)
insert into #data values(2)
insert into #data values(3)
insert into #data values(4)

select * from #data

alter table #data
  alter column ssl varchar(9)

select * from #data 
```

在做这样的事情之前有备份永远不会有坏处。如果不是大量数据，即使快速插入另一个表也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-16T19:31:26.347

对于那些需要 MySQL 语法而不是 ANSI SQL 语法的人，请尝试以下操作：

```
ALTER TABLE Table1 MODIFY SSN varchar(9) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-06-11T08:54:33.953

如果您有数据已经​​存在，它不允许您更改列类型。您可以备份数据，然后在更改表后重新填充表。

# php - 使输出在客户端浏览器上显示得更快

> ID：10437301
> 
> 赞同：0
> 
> 时间：2012-05-03T18:28:55.607
> 
> 标签：php, asp-classic, buffer, flush, output-buffering

当我在 while 循环中处理大型记录并且循环的每次迭代都会为屏幕输出一些信息时，我总是发现自己在看一个旧屏幕。我看到的只是活动图标旋转 - 这表明服务器正在处理一些数据。

我没有遇到超时问题，因为我已经`set_time_limit (3600);`在脚本的顶部找到了。只是无聊的屏幕让我担心。

在 ASP（我来自哪里）中，我去 response.flush 并解决了这个问题。顺便说一句，在 ASP 中，我总是使用 response.buffer=true 打开缓冲。在 PHP 中，这是一个备受争议的领域，我仍然不清楚是否应该打开或关闭 ob。

在这里，我没有打开`ob_start`缓冲，问题是为什么不回显将内容推送到浏览器？

当服务器中的 while 循环处理信息时，您如何使浏览器逐步获取 html 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:04:23.840

禁用输出缓冲，减少 php.ini 中的缓冲区大小，使用隐式刷新或显式刷新使用`flush()`. 但是，如果您必须显示大量数据，则在处理需要太多时间时对内容进行分页或使用命令行脚本可能是一个更好的主意。

# clearcase - 是什么导致 CRVAP0237E 错误，如何解决？

> ID：10437302
> 
> 赞同：2
> 
> 时间：2012-05-03T18:29:00.193
> 
> 标签：clearcase

我收到一条错误消息：

```
An error occurred during a clearcase operation" 
```

然后：

```
CRVAP0237E Resource 'cc.repo.cc-activity:1225576@bd0e4b228d5e4e24b0e5a5a785af21': 
not found 
```

您是否有任何线索可以作为这些错误的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:14:51.683

此`CRVAP0237E`错误代码通常与 ClearQuest 相关联（例如在[此技术](http://www-01.ibm.com/support/docview.wss?uid=swg21373108)说明中）。
因此，如果您的 UCM 项目还激活了 ClearQuest 链接，那么这可能是一个线索。

当资源被重命名时，ClearCase 也可以找到它：[technote swg1PM11476](http://www-01.ibm.com/support/docview.wss?uid=swg1PM11476)。
这意味着，这取决于您的确切 ClearCase 版本（因为该特定错误已被修复）。

ClearCase 通过提及PVob ( )的*id而不是 PVob 的**名称*来引用活动这一事实让我认为 PVob 在您当前的环境中不再可用，可能是因为**它的名称（标签）不再在您当前的 ClearCase 区域中引用**。`bd0e4b228d5e4e24b0e5a5a785af21`

 ***您需要检查是否仍与和`bd0e4b228d5e4e24b0e5a5a785af21`中列出的 (p)vob 匹配。`<ClearCase server>/rgy/vob_object``<ClearCase server>/rgy/vob_tag`

您还需要提及发生此错误时您正在执行的确切 ClearCase 操作（结帐？交付？变基？）。***

# php - 从 a 获取文本

> ID：10437303
> 
> 赞同：1
> 
> 时间：2012-05-03T18:29:09.833
> 
> 标签：php, html, parsing, domparser

我在`<li>`里面有几个标签是`<div>`这样的：

```
<li> <a href="link1"> one <li>
<li> <a href="link2"> two <li>
<li> <a href="link3"> three <li> 
```

如何`two`使用 HTML DOM 解析器获取文本，然后将其放入数组中以供以后使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:44:17.877

您需要确保`a`标签已关闭，然后您可以这样做：

```
<?php 
$html = '<li> <a href="link1"> one </a> <li>
<li> <a href="link2"> two </a> <li>
<li> <a href="link3"> three </a> <li>
';

// Create a new DOM Document
$xml = new DOMDocument();

// Load the html contents into the DOM
$xml->loadHTML($html);

// Empty array to hold all links to return
$result = array();

//Loop through each <li> tag in the dom
foreach($xml->getElementsByTagName('li') as $li) {
    //Loop through each <a> tag within the li, then extract the node value
    foreach($li->getElementsByTagName('a') as $links){
        $result[] = $links->nodeValue;
    }
}
//Return the links
print_r($result);
/*
Array
(
    [0] =>  one 
    [1] =>  two 
    [2] =>  three 
)

*/
?> 
```

全部在[domDocument的手册中](http://php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:43:00.450

考虑使用[Simple HTML Dom Parser](http://simplehtmldom.sourceforge.net)来实现这一点。示例代码：

```
// include the simple html dom parser
include 'simple_html_dom.php'; 

// load the html with one of the sutiable methods available with it
$html = str_get_html('<li><a href="link1">one</a></li><li><a href="link2">two</a></li>');

// create a blank array to store the results
$items = array();

// loop through "li" elements and store the magic plaintext attribute value inside $items array
foreach( $html->find('li') as $li ) $items[] = $li->plaintext;

// this should output: Array ( [0] => one [1] => two ) 
print_r( $items ); 
```

# css - css :hover 仅在 safari 中无法正常工作，找到了一些关闭的答案，但没有解决。请帮忙 ：）

> ID：10437307
> 
> 赞同：0
> 
> 时间：2012-05-03T18:29:18.287
> 
> 标签：css, safari, hover, drop-down-menu

我已经在论坛上搜索了几天，找到了与我的问题相近的答案，但没有一个能帮助我解决它。

有些话题与这个问题很接近，所以如果我重复一个问题，我很抱歉，但似乎没有人直接处理这个问题。

所以我在 a`<div>`中设置了一个简单的悬停`<li>`来显示另一个`<div>``<li>`

```
.flowerChoice { 
display: none;
width:100px;
height:100px;
position:relative;
top:-17px;
}

.flowerShow:hover   {
height:100px;
width:100px;
}

.flowerShow:hover   div.flowerChoice {
display: block;
} 
```

然后是html

```
<ul id="navlist">
    <li class="" >
       <a href="store.html">
           <img src="./images/nav-spacer.gif" />
       </a>
    </li>
    <li>
         <div class="flowerShow">
             <a href="#">
                  <img src="./images/nav-spacer.gif" />
             </a>
             <div class="flowerChoice">
                 <img usemap="#flowerChoice" border="0" src="images/flowerChoice.png" />
                 <map name="flowerChoice">
                     <area shape="rect" coords="2,59,100,76" href="arrangements.html" alt="Flower Arrangements" />
                     <area shape="rect" coords="0,29,98,46" href="weddings.html" alt="Wedding Flower Arrangements" />
                 </map>
             </div>
         </div>
    </li>
    <li class="" >
        <a href="http://blog.passionflowerdesign.com/" alt="Passionflower Design Blog">
            <img src="./images/nav-spacer.gif" />
        </a>
    </li>
    <li class="" >
        <a href="contact.html">
           <img src="./images/nav-spacer.gif" />
        </a>
    </li>
</ul> 
```

当您将鼠标悬停在 div 上时，您会得到第二个 div，它会为您提供几个链接，它基本上是一个下拉菜单。

在所有浏览器中，但 Safari（我从未与 safari 对抗）您可以将鼠标悬停在该区域上，它会停留并让您访问新链接。

但是在野生动物园中，它在您到达它们之前就关闭了。

我尝试将悬停添加到`<a>`and ，`<li>`但是它完全破坏了我的代码。

对此的任何启示都非常感谢！

[http://www.thetclub.com/test/passionflower/www/index.html](http://www.thetclub.com/test/passionflower/www/index.html)

干杯!

奈特~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:11:00.920

听起来您悬停的部分与与其连接的下拉菜单之间存在间隙。也许将顶部向上移动一点，然后添加一些额外的顶部填充以使其看起来相同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:00:45.027

尝试这个

```
.flowerShow:hover li {
height:100px;
width:100px;
} 
```

在 Safari 窗口中为我工作

# dojo - dojo contentpane-如何保持默认关闭

> ID：10437308
> 
> 赞同：0
> 
> 时间：2012-05-03T18:29:24.557
> 
> 标签：dojo, dijit.layout

我已经设置了一个包含一些 dojo 小部件的布局，并且希望默认关闭具有内容窗格的侧边菜单。发生的情况是第一个保持打开状态并导致其他内容窗格消失。顺便说一句，内容窗格都在手风琴容器中

```
<!doctype html>
<html lang="en" dir="ltr">
<head>
   <script src=
     "https://ajax.googleapis.com/ajax/libs/dojo/1.5/dojo/dojo.xd.js"
      djConfig="parseOnLoad: true"></script>

    <title>Dijit Template</title>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/
      libs/dojo/1.5/dijit/themes/claro/claro.css" />
    </head>
    <body class="claro">
    <div style="width: 535px; height: 290px">
    <div dojoType="dijit.layout.BorderContainer" style="width: 100%; 
     height: 100%;">
    <div dojoType="dijit.layout.ContentPane" region="top" splitter="true">
        This is the content in the top section.
    </div>
    <div dojoType="dijit.layout.ContentPane" region="left" style="width: 100px;" 
      splitter="true">
        <div dojoType="dijit.layout.AccordionContainer"minSize="20" 
         style="width:  300px;" id="leftAccordion" region="leading" splitter="true">
         <div dojoType="dijit.layout.ContentPane" title="HOME">
          </div>
         <div dojoType="dijit.layout.ContentPane" title="INSTANCES">
          <div dojoType="dijit.TitlePane" title="Reader01">
                    </div>
       </div>
      <div dojoType="dijit.layout.ContentPane" title="DISCOVERY">
                  </div>
     </div><!-- end AccordionContainer -->
    </div>
    <div dojoType="dijit.layout.ContentPane" region="center" splitter="true">
        This is the content in the center section.
    </div>
    <div dojoType="dijit.layout.ContentPane" region="right" 
            style="width: 100px;"splitter="true">
        This is the content in the right section.
    </div>
    <div dojoType="dijit.layout.ContentPane" region="bottom" splitter="true">
         This is the content in the bottom section.
     </div>
 </div>
  </div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:51:51.253

在 AccorionContainer 的 addChild 函数中，您将看到以下几行

```
this.layout();
if(!this.selectedChildWidget){
   this.selectChild(child);
} 
```

一个孩子总是会被选中，但是让我们在这里画一条线

试试这个，它是您的代码片段，在所有其他内容窗格（主页、实例等）之上添加一个空子项，我们将其设置为选中 - 并隐藏 onload

```
 <div dojoType="dijit.layout.AccordionContainer"  
         style="width:  300px;" id="leftAccordion" region="leading" splitter="true">
            <script type="dojo/connect" events="onLoad">
                // at this point, children have not yet been added, release and let widget complete workflow
                var acc_container = this;
                setTimeout(function() {
                   // get the child, then hack to get its wrapper (includes titlenode)
                   var hiddenChild = acc_container.getChildren()[0].id+"_wrapper"
                   hiddenChild = dijit.byId(hiddenChild);
                   acc_container._hideChild(hiddenChild);
               }, 100);
            </script>

         <div dojoType="dijit.layout.ContentPane" dojoProps="selected:true" selected="true">
          </div> 
```

# session - 经典 ASP - 除了会话之外还设置 cookie

> ID：10437309
> 
> 赞同：4
> 
> 时间：2012-05-03T18:29:30.517
> 
> 标签：session, asp-classic

我正在尝试跟踪系统中的用户活动，直到会话过期 - 如果他们请求页面，则会话丢失，但他们的用户信息也是如此。

我有太多页面无法通过查询字符串传递任何类型的会话 id，所以我想也许在我的顶级包含中我可以设置一个不会随会话过期的 cookie，并在每次登录时重置它。这样我就可以跟踪用户/页面。

这可以与会话变量一起做吗？我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T20:52:57.560

您需要使用 cookie，因为如果您使用会话，它也会过期

**设置 cookie**

```
Response.Cookies("TrackID") = 'Something'
Response.Cookies("TrackID").expires = DateAdd( "yyyy", 5, Date ) 
```

**获取 cookie**

```
TrackID = Request.Cookies("TrackID") 
```

# c++ - 在 C++11 中处理可变参数模板

> ID：10437315
> 
> 赞同：11
> 
> 时间：2012-05-03T18:29:59.710
> 
> 标签：c++, c++11, variadic-templates

我最近开始使用 C++11，并且阅读了关于可变参数模板的教程。我知道我们可以像这样定义一个可变参数模板

```
// example class that uses variadic template
template<typename ...Args> struct mtuple; 
```

但是如何处理`mtuple`类的模板参数（即`get<int>(mtuple_obj)`看起来如何？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:30:17.803

没有简单的机制来迭代可变参数模板的值。但这可以递归地完成。这是一个例子：

```
template<typename T, typename... Args>
void print_values(const char *s, T value, Args... args)
{
    while (*s) {
        if (*s == '%' && *(++s) != '%') {
            std::cout << value;
            ++s;
            print_values(s, args...);
            return;
        }
        cout << *(s++);
    }
} 
```

所以，如果我打电话，`print_values("%d %d %d", 1, 2, 3)`我会得到这个递归树：

```
print_values("%d %d %d", 1, 2, 3) // value -> 1, args... -> 2,3
print_values("%d %d", 2, 3) // value -> 2, args... -> 3
print_values("%d", 3) // value -> 3, args... -> NULL
print_values("") // value -> NULL, args... -> NULL 
```

`print_values()`即使 *s == 0我也会递归调用以检测额外的参数

来源：[http ://en.wikipedia.org/wiki/Variadic_templates](http://en.wikipedia.org/wiki/Variadic_templates)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T13:58:08.033

外观`get<1>(t)`将取决于. `mtuple`典型的实现递归地继承自包含每个参数的类型，因此`mtuple<A,B,C>`继承自`TupleHead<A>`（具有 type 的成员`A`）并且还继承自 `TupleTail<B,C>`。 `TupleTail<B,C>`继承自`TupleHead<B>`（具有类型的成员`B`）和`TupleTail<C>`. `TupleTail<C>`继承自`TupleHead<C>`（它有一个类型的成员`C`。）

现在，如果你也给每个基类一个整数参数：

`mtuple<A,B,C>`继承自`TupleHead<0,A>`和`TupleTail<1,B,C>`

`TupleTail<1,B,C>`继承自`TupleHead<1,B>`和`TupleTail<2,C>`

`TupleTail<2,C>`继承自`TupleHead<2,C>`

现在写起来相对简单`get<1>`，因为它`mtuple`有一个唯一的类型基类，`TupleHead<1,B>`可以通过向上转换获得，然后返回该`B`基类的成员。

[编辑：`get<1>(m)`需要知道`B`与索引为 1 的元组元素对应的类型，因为您使用类似的东西，`std::tuple_element`它也依赖于上述递归继承层次结构并使用部分特化来获取`TupleHead<1,T>`索引为 1 的基类，然后确定`T`该部分专业化中的参数，`B`在我的示例中给出。]

可变参数模板使用的许多技术都是函数式编程技术，例如对模板参数包的第一个元素进行操作，然后对包的其余部分递归地执行相同的操作，直到处理完所有元素。除了计算它的大小（用`sizeof...`）或用它实例化另一个模板之外，您可以直接使用模板参数包做的事情并不多，因此通常的方法是实例化另一个模板，将包`Args`分成`ArgHead, ArgsTail...`并处理头部，然后递归做同样的事情`ArgsTail`

# html - CSS Target伪类不改变DIV属性

> ID：10437317
> 
> 赞同：1
> 
> 时间：2012-05-03T18:30:08.317
> 
> 标签：html, css, css-selectors, pseudo-class

当针对不同的 DIV 时，我想更改一个 DIV 的属性。

这是我的CSS：

```
#boards-list:target{
    background-color: black;
}
#boards-list:target  div#schools-list{
    background-color: blue;
} 
```

这是我的 HTML：

```
<body>

<div id="schools-sub-nav">

<a href="#schools-list">Schools List</a> <a href="#boards-list">Boards List</a>

</div>

<div id="schools-container">

    <div id="schools-list">
    One
    </div>

    <div id="boards-list">
    Two
    </div>

</div> 
```

我唯一的想法是我在使用目标伪类的语法中犯了一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:34:29.047

现在，您想要学校列表为蓝色而董事会列表为黑色吗？如果是这样，只需`boards-list`从第二条语句中删除选择器？所以你应该有：

```
#boards-list:target
{
    background-color: black;
}

#schools-list:target
{
     background-color: blue;
}​ 
```

**演示：http: [//jsfiddle.net/3dbTq/1](http://jsfiddle.net/3dbTq/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:34:35.493

你的最后一条规则：

```
#boards-list:target  div#schools-list       {
                                        background-color: blue;
                                        } 
```

不会工作，因为`boards-list`他们`schools-list`是兄弟姐妹，他们不是父母/孩子。

将其更改为：

```
#schools-list:target       {
                                            background-color: blue;
                                            } 
```

# c# - 在 BackgroundWorker 中运行类方法时，如何以不同的形式重用类？

> ID：10437318
> 
> 赞同：-1
> 
> 时间：2012-05-03T18:30:19.970
> 
> 标签：c#, backgroundworker

我在 Form1 中有这个功能，效果很好。这个想法是从一个大的 xml 文件中检索一些文本。所以在 Form1 构造中我做了：

```
r = new StreamReader(@"D:\Deponia_Work\Deponia Extracted Files\000004aa.xml");
f = r.ReadToEnd();
r.Close(); 
```

变量 f 是字符串。

现在我在 Form1 中有这个函数，我调用了 test()，它正在从 000004aa.xml 大文件中检索/提取文本。

```
private void test()
        {
            int countFiles = 0;
            byte[] a;
            string startTag = "T256=\"";
            string endTag = "\"";
            int index = 0;
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            int fileLength = f.Length;
            w = new StreamWriter(@"d:\testingdeponias.txt");
            while (true)
            {
                if (index > f.LastIndexOf(startTag))
                {
                    break;
                }
                int startTagIndex = f.IndexOf(startTag, index);
                int stringIndex = startTagIndex + startTagWidth;
                index = stringIndex;

                int endTagIndex = f.IndexOf(endTag, index);
                int stringLength = endTagIndex - stringIndex;
                if (stringLength == 0)
                {
                }
                else
                {
                    string test = f.Substring(stringIndex, stringLength);
                    if (test.Contains("&lt;pa&gt;"))
                    {
                        string t = "&lt;pa&gt;";
                        int y = t.Length;
                        string test1 = test.Substring(0, stringLength - y);
                        listBox1.Items.Add(test1);
                        w.WriteLine(test1);
                    }
                    //else
                    // {
                    listBox1.Items.Add(test);
                    w.WriteLine(test);
                    // }
                }
            }
            w.Close();
        } 
```

然后我在 Form1 中添加了一个新的 backgroudnworker2 事件：

这是 DoWork 事件：

```
private void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker2 = sender as BackgroundWorker;
            lists1.extractTextDeponia(worker2, backgroundWorker2, listBox1, textBox1,f, w, e);
        } 
```

这是我启动后台工作程序的按钮单击事件：

```
private void button8_Click(object sender, EventArgs e)
        {
            backgroundWorker2.RunWorkerAsync();
        } 
```

在新类中，我创建了一个从 Form1 获取一些变量的新函数公共函数。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Web;
using System.Text.RegularExpressions;
using System.Xml;
using System.Xml.Linq;

namespace List_Words
{
    class Lists
    {

        public void List_Words()
        {

        }

        public void extractTextDeponia(BackgroundWorker worker, BackgroundWorker backgroundWorker2, ListBox lbox , TextBox tbox , StreamWriter streamW , string read, DoWorkEventArgs e)
        { 
```

我的问题是如何更改并将 test() 函数从 Form1 转换为新类到新函数，以便它也可以与 backgroundworker2 一起工作和使用？

我尝试在那里使用/添加 FileStream 并添加了 while 循环，该循环将逐行读取，但效果不佳。

** 这是带有函数的新类，它的作用与 Form1 中的 test() 不同**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Web;
using System.Text.RegularExpressions;
using System.Xml;
using System.Xml.Linq;

namespace List_Words
{
    class Lists
    {

        public void List_Words()
        {

        }

        public void extractTextDeponia(BackgroundWorker worker, BackgroundWorker backgroundWorker2, ListBox lbox , TextBox tbox , StreamWriter streamW , string read, DoWorkEventArgs e)
        {
            string startTag = "T256=\"";
            string endTag = "\"";
            int index = 0;
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            int fileLength = read.Length;
            using (var fs = new FileStream(@"D:\Deponia_Work\Deponia Extracted Files\000004aa.xml", FileMode.Open, FileAccess.Read))
            {

                using (var h = new StreamReader(fs))
                {
                    string line;
                    line = h.ReadLine();
                    while ((line = h.ReadLine()) != null)
                    {
                        if (worker.CancellationPending == true)
                        {
                            e.Cancel = true;
                            break;
                        }
                        else
                        {
                            int percent = (int)(fs.Position * 100 / fs.Length);
                            backgroundWorker2.ReportProgress(percent);
                            if (index > read.LastIndexOf(startTag))
                            {
                                break;
                            }
                            int startTagIndex = read.IndexOf(startTag, index);
                            int stringIndex = startTagIndex + startTagWidth;
                            index = stringIndex;

                            int endTagIndex = read.IndexOf(endTag, index);
                            int stringLength = endTagIndex - stringIndex;
                            if (stringLength == 0)
                            {
                            }
                            else
                            {
                                line = read.Substring(stringIndex, stringLength);
                                if (line.Contains("&lt;pa&gt;"))
                                {
                                    string t = "&lt;pa&gt;";
                                    int y = t.Length;
                                    string test1 = line.Substring(0, stringLength - y);
                                    if (lbox.InvokeRequired)
                                    {
                                        lbox.Invoke(new MethodInvoker(delegate { lbox.Items.Add(test1); }));
                                    }
                                    //w.WriteLine(test1);
                                    line = h.ReadLine();
                                    if (tbox.InvokeRequired)
                                    {
                                        tbox.Invoke(new MethodInvoker(delegate { tbox.Text = test1; }));
                                    }
                                }
                                //else
                                // {
                                if (lbox.InvokeRequired)
                                {
                                    lbox.Invoke(new MethodInvoker(delegate { lbox.Items.Add(line); }));
                                }
                                //w.WriteLine(line);
                                if (tbox.InvokeRequired)
                                {
                                    tbox.Invoke(new MethodInvoker(delegate { tbox.Text = line; }));
                                }
                                // }
                            }
                        }
                    }
                }
            }
            streamW = new StreamWriter(@"d:\testingdeponias.txt");
            streamW.AutoFlush = true;
            streamW.Write(read);
            streamW.Close();
        }

    }
} 
```

在 form1 中，我将其称为：

```
BackgroundWorker worker2 = sender as BackgroundWorker;
lists1.extractTextDeponia(worker2, backgroundWorker2, listBox1, textBox1,w, f, e); 
```

w 是流编写器 f 是字符串，e 是 backgroundowrker2 DoWork e 变量 正如我上面所展示的，我在 Form1 构造函数中使用 f 来读取大的 xml 文件，但我也在新类中执行它，并且使用 FileStream 函数真是一团糟。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:52:14.330

可能有帮助的一件事是稍微改变您的编程思维方式。不要考虑表单和事件，而是考虑这些数据实体上的数据实体和操作，然后您可以使用服务类型模式。

所以你要做的是创建一个服务类，它可以做你想做的任何事情。由于您使用的是后台工作人员，因此我会将其创建为实例类而不是静态的。

```
public class FileWorkerService
{
   private BackgroundWorker _worker;

   public FileWorkerService()
    {
       _worker = new BackgroundWorker();
    }

   public void ReadFileAndProcessIt()
    {
      if (!_worker.IsBusy)
        {
          _worker.RunWorkerAsync();
        }
    } 
 } 
```

现在，只需以与之前相同的方式将 _worker 与事件连接起来，您的服务类就可以开始工作了。

为了让它做某事，你只需创建它的一个实例并调用启动worker的函数。

因此，在您的表单按钮上单击您将拥有...

```
private void button8_Click(object sender, EventArgs e)
        {
            var newService = new FileWorkerService();
            newService.ReadFileAndProcessIt();
        } 
```

> > > ================= 编辑================================ == -- 添加了如何从服务中更新后台工作人员的进度。<<< ================================================ ===========

在您的 FileWorkerService 类中

```
public void SetWorkerProgress(int currentValue)
{
   _worker.ReportProgress(currentValue);
} 
```

要在课堂外打电话，从你的主表格，你会做......

```
newService.SetWorkerProgress(whatever); 
```

# javascript - Tag-it jquery：从网络服务中获取标签

> ID：10437322
> 
> 赞同：0
> 
> 时间：2012-05-03T18:30:44.673
> 
> 标签：javascript, jquery, asp.net, tag-it

我正在尝试从 web 服务获取 tag-it 标签，问题是我什至可以成功，警报永远不会出现，也不会出现错误事件。

```
 $('#singleFieldTags').tagit({
    //availableTags: sampleTags,
    // This will make Tag-it submit a single form value, as a comma-delimited field.
    singleField: true,
    placeholderText: "Start typing your tags...",
    singleFieldNode: $('#ContentPlaceHolder1_hidTags'),
    availableTags: function () {
        $.ajax({
            url: "WServices/TypeService.asmx/getTags",
            type: "POST",
            data: JSON.stringify({ para_Parent_Name: "tags" }),
            dataType: "json",
            async: true,
            success: function (data) {
                console.log(data);
                alert(data);
                return data;
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("errer");
                debugger;
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:59:00.363

确保您返回有效的 JSON。我将准确地返回返回的内容（通过 FireBug/Development 工具）并将其放入[http://jsonlint.com/](http://jsonlint.com/)以查看它是否有效。

我提供这个作为答案是因为我们在 jQuery 的主要版本之间切换时遇到了很大的问题。我们所有的 AJAX 东西都坏了。我们最终发现这是返回的 JSON。如果它无效，那么 jQuery 会默默地失败。

希望这为寻找解决方案提供了一个可能的开始。

# android - 为什么没有 GPS 更新

> ID：10437324
> 
> 赞同：0
> 
> 时间：2012-05-03T18:31:09.127
> 
> 标签：android, gps

我使用了[这里](http://hejp.co.uk/android/android-gps-example/)的示例，在我的 Galaxy Tab 上运行它，但 20 分钟没有任何变化。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:58:41.083

在您的示例中，以这种方式请求位置更新：

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10f, this); 
```

**首先**，这仅使用 GPS**位置提供程序**，而 Google 地图使用任何可用的位置传感器（GPS、Wifi 等）。为了使用 GPS，您必须能够接收来自卫星的信号，因此请将您的设备放在窗户旁边，或者更好的是放在室外。

在状态栏中，盘子图标在搜索时断断续续地闪烁，在修复时持续闪烁。您可以使用这样的应用程序更准确地检查手机上 GPS 定位的状态：https: [//play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2)

**其次**，该**参数**`10f`的值告诉系统仅在位置移动超过 10 米时给您更新；因此，如果 GPS 认为您停留在您第一次定位的 10m 半径范围内，它不会因为新位置而打扰您。**`minDistance`**

# salesforce - 如何在标准对象中预填充标准查找字段？

> ID：10437326
> 
> 赞同：1
> 
> 时间：2012-05-03T18:31:16.513
> 
> 标签：salesforce, apex-code, visualforce

**设置：**

在我的事件对象上，我想使用与当前所有者不同的用户名“Babe Ruth”预先填充“分配给”字段。该字段是一个查找字段。字段名称是所有者，如果这有区别的话。我们通过使用调用 Apex 的 S-Controls 修改 url 来实现这一点。

**问题：**

1.  我不确定如何获取该字段的字段名称。我检查了元素，它说是`evt_1`. 有没有办法验证是绝对字段名称，而不是相对名称？

2.  我无法使用我的更改保存页面。在 URL hacking 中，我添加了: `evt_1=Babe%20Ruth&saveURL=...`，它成功显示了更改，但是当我单击保存时，该字段没有保存为“Babe Ruth”，而是我的名字作为所有者！

我已经查看了此参考资料和其他参考资料，但仍然卡住了。

[http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html](http://raydehler.com/cloud/clod/salesforce-url-hacking-to-prepopulate-fields-on-a-standard-page-layout.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T00:29:00.393

如果您查看您发送的链接，它会说：

> 我发现获取要填充的字段 ID 的最佳方法是导航到设置中的字段。例如，如果我想预填充 ObjectDetail_c.TextField_c *，*我会转到 Setup => Create => Objects => ObjectDetail => TextField，这会将我带到 URL

一旦知道要填充的字段的 ID，就可以使用 <fieldId>=TextValue&_lkid=<recordId>。使用链接中的示例，如果fieldId为CF00NA0000005JzZX，则参数为

```
CF00NA0000005JzZX=Babe+Ruth&CF00NA0000005JzZX_lkid=<userId> 
```

其中 <userId> 是 Babe Ruth 的用户记录的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:33:12.163

对于标准对象，您可以使用 Firebug 定位编辑页面中的元素并获取组件的 id。您应该找到类似“cas4_”、“cas3_”、... 之类的东西，它们代表标准字段 id ==> 例如 cas4 用于我认为 Case 对象中的 Account 查找。网址参数：cas4=Hello+World&cas4_lkid=001000000dgst4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T07:59:14.457

您可以尝试此解决方案，在这里我动态获取字段 ID，而不是在任何地方对其进行硬编码。

[http://customforce.wordpress.com/2014/05/06/getting-field-id-dynamically-to-pre-populate-fields-value-for-new-record/](http://customforce.wordpress.com/2014/05/06/getting-field-id-dynamically-to-pre-populate-fields-value-for-new-record/)

# windows-8 - 如何翻转 Windows 8 Metro 动态磁贴内的图像按钮？

> ID：10437327
> 
> 赞同：1
> 
> 时间：2012-05-03T18:31:32.267
> 
> 标签：windows-8, windows-runtime, windows-store-apps, live-tile

我在 Win8 Metro 动态磁贴（在网格中）中有一些图像按钮，Metro 可以很容易地为整个磁贴设置动画，但不是其中的项目。定期在单个图像按钮（或至少图像）上执行“翻转”动画的最简单方法是什么？我应该使用[createPeekAnimation](http://msdn.microsoft.com/en-us/library/windows/apps/br212659.aspx)吗？我愿意使用 C# 或 HTML5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:38:01.360

这是不支持的。只有您可以使用的磁贴模板。您不能在磁贴内执行自定义动画。

# objective-c - 推送带有自定义动画的 UITableViewController 始终为 UINavigationItem 标题设置动画

> ID：10437329
> 
> 赞同：8
> 
> 时间：2012-05-03T18:31:42.217
> 
> 标签：objective-c, ios, animation, uinavigationcontroller, uinavigationitem

我使用以下代码作为扩展`UINavigationController`来推送具有自定义动画的视图控制器：

```
@implementation UINavigationController (PushAnimation)

- (void)pushViewController:(UIViewController*)controller  withTransition:(UIViewAnimationTransition)transition
{
    [UIView beginAnimations:nil context:NULL];
    [self pushViewController:controller animated:NO];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationBeginsFromCurrentState:YES];        
    [UIView setAnimationTransition:transition forView:self.view cache:YES];
    [UIView commitAnimations];
}

@end 
```

启用缓存后，我在推送`UITableViewController`. 自定义动画完成后出现推送视图的标题。使用过渡样式`UIViewAnimationTransitionNone`，很明显标题本身是动画的。它从屏幕的左上角移动到`UINavigationBar`.

在禁用缓存的情况下，由于其速度，此动画不可见，但帧速率显着下降。

如何防止标题被动画化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:33:55.427

问题是您正在为整个视图设置*动画*`self.view`。`self.view`包含视图控制器以及`UINavigationBar`. 因此，您可能必须获取所有子视图，`self.view`然后仅对`view`与您的视图控制器相关的子视图进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:20:40.353

使用此代码以非常直接的方式自定义导航过渡动画：

```
CATransition* transition = [CATransition animation];
transition.duration = 0.5;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionMoveIn; //kCATransitionPush; //kCATransitionReveal; //kCATransitionFade; 
//transition.subtype = kCATransitionFromRight; //transition.subtype = kCATransitionFromLeft; //transition.subtype = kCATransitionFromTop; //transition.subtype = kCATransitionFromBottom;
transition.subtype = kCATransitionFromRight;
[self.navigationController.view.layer addAnimation:transition forKey:nil];
[[self navigationController] popViewControllerAnimated:NO]; 
```

和推动同样的事情。

**确保`#import <QuartzCore/QuartzCore.h>` 在您的课程中，并将框架添加到您的项目中

> target > Build Phases > Link Binary With Libraries > “+”按钮 > QuartzCore.framework

.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T14:11:02.737

只是一个快速更新我的修复到底是什么。无法覆盖 的默认行为`UINavigationBar`，因为 iOS 使用私有 API 来实现动画。所以我最终`UINavigationBar`使用以下代码删除了 及其各种子视图上的所有动画：

```
[self.navigationBar.layer removeAllAnimations];
for (UIView *view in self.navigationBar.subviews) {
    [view.layer removeAllAnimations];
    for (UIView *sub in view.subviews) {
        [sub.layer removeAllAnimations];
    }
} 
```

在 之后调用它很重要`[self pushViewController:controller animated:NO];`。

# ios - CoreData IOS：如何创建具有值的对象而不将其标记为具有更改

> ID：10437330
> 
> 赞同：3
> 
> 时间：2012-05-03T18:31:42.917
> 
> 标签：ios, core-data, initialization, nsmanagedobject

我不知道这有多复杂，

我有一个使用 CoreData 的应用程序。

当我创建一个新的托管对象时，我用 plist 中的默认值填充它的字段。

然后我显示一堆表单（将保存的值加载到表单中并在我进行过程中更新对象的值）。

最后我检查对象是否有更改并建议保存对象。

这部分工作正常。

但是，当用户在界面中点击“返回”时遇到问题。如果用户更改了对象中的任何内容，我希望能够显示警报，或者如果没有任何更改，则让用户返回。

但是，我希望你有更改，因为我使用默认数据填充对象，CoreData 承认该对象已更改为开始。

那么如何创建一个新的托管对象并对其进行初始化而不被视为更改

```
- (Company *)createNewDefaultCompany:(NSString *)name{
    Company *company = [Company insertInManagedObjectContext:managedObjectContext];
    [company setName:name];
    [company setDate:[NSDate date]];
    [company setLocalisation:@"en_UK"];

    Input *input = [Input insertInManagedObjectContext:managedObjectContext];
    [input populateWithDefault];
    [company setCompanyInputs:input];

    Formulas *formulas = [Formulas insertInManagedObjectContext: managedObjectContext];
    [formulas populateWithDefault];
    [company setCompanyFormula:formulas];

    [company createCalculus];
    return company;
} 
```

托管对象的创建。

```
+(Company *)insertInManagedObjectContext:(NSManagedObjectContext *)managedObjectContext{
    return (Company *)[NSEntityDescription insertNewObjectForEntityForName:@"Company" inManagedObjectContext:managedObjectContext]; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:14:11.397

我无法真正对此进行测试，但您可能会考虑在`company`设置托管对象后保存托管对象上下文，然后在保存后检查更改。如果用户退出，要摆脱您的新对象，您可以`deleteObject`在托管上下文中调用该方法，将引用传递给您的新对象。只需确保在删除对象后再次保存上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T13:46:42.660

为确保 NSManagedObject 未被标记为已更改，您不应使用普通的设置器，而应使用 setPrimitiveValue: 代替。顺便说一句：通常，NSManagedObject 初始化是在 awakeFromInsert 方法中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:58:08.490

一次可能的方法是在托管对象上下文中使用 NSUndoManager。您可以将默认值设置包装在禁用撤消注册的代码块中：

```
- (Company *)createNewDefaultCompany:(NSString *)name{
    [[managedObjectContext undoManager] disableUndoRegistration];

    Company *company = [Company insertInManagedObjectContext:managedObjectContext];
    [company setName:name];
    [company setDate:[NSDate date]];
    [company setLocalisation:@"en_UK"];

    Input *input = [Input insertInManagedObjectContext:managedObjectContext];
    [input populateWithDefault];
    [company setCompanyInputs:input];

    Formulas *formulas = [Formulas insertInManagedObjectContext: managedObjectContext];
    [formulas populateWithDefault];
    [company setCompanyFormula:formulas];

    [company createCalculus];

    [managedObjectContext processPendingChanges];
    [[managedObjectContext undoManager] enableUndoRegistration];

    return company;
} 
```

然后检查`canUndo`撤消管理器的状态。假设没有可撤消的操作进入此视图控制器（您可以`-removeAllActions`在进入或退出视图控制器时在撤消管理器上清除它），撤消状态应反映在创建和初始化此 NSManagedObject 后是否进行了任何更改。

但是，如果您想在托管对象上下文的其他地方使用撤消，这可能不是最佳解决方案，因为需要在创建公司对象之前擦除撤消状态。

# java - java中多次try/catch执行之间有什么优先级吗？

> ID：10437331
> 
> 赞同：3
> 
> 时间：2012-05-03T18:31:57.987
> 
> 标签：java

在下面的程序中，有时我得到以下输出：

```
Number Format Execption For input string: "abc"
123 
```

有时：

```
123
Number Format Execption For input string: "abc" 
```

在 try/catch 块之间或 System.out 和 System.err 之间是否有任何优先级？

随机输出的原因是什么？

代码：

```
String str1 = "abc";
String str2 = "123";

     try{
         int firstInteger = Integer.parseInt(str1);
         System.out.println(firstInteger);
     }
     catch(NumberFormatException e){
         System.err.println("Number Format Execption " + e.getMessage());
     }

       try{
         int SecondInteger = Integer.parseInt(str2);
         System.out.println(SecondInteger);
         }
     catch(NumberFormatException e){
         System.err.println("Number Format Execption " + e.getMessage());
     } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T18:33:20.797

它与 try/catch 无关，也与您写入 System.out 和 System.err 的一切有关；它们是两个不同的流，当它们被写入控制台时，您无法控制它们的交错顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:43:45.633

尝试显式刷新流，

```
System.out.flush();
System.err.flush(); 
```

# python - 为什么我的 bash 脚本试图将注释作为代码运行？

> ID：10437332
> 
> 赞同：4
> 
> 时间：2012-05-03T18:31:59.847
> 
> 标签：python, bash

我正在编写一个 bash 脚本以按特定顺序运行多个 python 程序，它看起来像这样：

```
#!/bin/bash
set -e
python prog1.py #make database
python prog2.py #plots
python prog3.py #more plots 
```

这运行正常，但是当我注释掉第一行时：

```
#!/bin/bash
set -e
#python prog1.py #make database
python prog2.py #plots
python prog3.py #more plots 
```

它崩溃了：

```
./python_progs.sh: line 3: plots: command not found 
```

就好像它忽略了 'plots' 前面的 '#' 并试图将其作为代码运行。另一个奇怪的事情是这种情况并非一直发生，有时第二个代码运行没有问题，有时它会崩溃。我是否遗漏了一些关于在 bash 脚本中如何进行评论的基本知识？

对于下面评论的人，这里是确切的代码：

```
#!/bin/bash
set -e
python footprint_hex.py >> ./paper/qso_num.txt #this makes the footpring figures
python sed_db_read.py #makes the inital databases
python sed_db_read2.py #makes the new databases for lum and civ and modles
python sed_db_plots_paper.py #plots
python sed_db_plots_paper_png.py #plots 
```

当没有注释行时，它可以正常工作，但是在注释掉第 3 行和第 4 行时，它会崩溃：

```
./compile_dbs.sh: line 5: and: command not found 
```

当注释掉第 3、4 和 5 行时，它会崩溃：

```
./compile_dbs.sh: line 6: plots: command not found 
```

我运行脚本的确切步骤是：

```
./compile_dbs.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:23:55.807

我发现了问题！我在运行时正在编辑 bash 脚本，这就是导致崩溃的原因。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T18:36:23.117

我不完全确定发生了什么，但我的猜测是它被解释`#plots`为脚本的参数`prog2.py`

为了安全起见，您可能只想将评论放在单独的行上

# java - 将自定义对象传递给活动

> ID：10437336
> 
> 赞同：0
> 
> 时间：2012-05-03T18:32:18.580
> 
> 标签：java, android, android-intent, bundle

我想将自定义对象从一个 Activity 传递到另一个，这是我目前所拥有的：

**客人.java：**

```
public class Guest extends Booking implements Serializable {
    public String SampleFunc(){
        return "hello";
    }
} 
```

**FirstActivity.this ：**

```
private ArrayList<Guest> guests = new ArrayList<Guest>();
....
this.guests.add(new Guest("Joe Blog","Standart","F01","22/22/2012"));
this.guests.add(new Guest("Herpa Bunn","Standart","F02","22/22/2012"));

Intent i = new Intent(FirstActivity.this, SecondActivity.class);
i.putExtra("guests", this.guests);
startActivity(i); 
```

**第二活动.java：**

```
ArrayList<Guest> basket =
         (ArrayList<Guest>).getIntent().getSerializableExtra("guests");
//this will crashes the program 
```

**日志猫：**

```
05-03 18:30:34.216: W/System.err(492): java.lang.RuntimeException: Parcelable encountered IOException reading a Serializable object (name = ie.wit.hotelmanager.models.Guest)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readSerializable(Parcel.java:1886)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readValue(Parcel.java:1761)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readSerializable(Parcel.java:1886)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readValue(Parcel.java:1761)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readSerializable(Parcel.java:1886)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readValue(Parcel.java:1761)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readListInternal(Parcel.java:1956)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readArrayList(Parcel.java:1403)
05-03 18:30:34.216: W/System.err(492):  at android.os.Parcel.readValue(Parcel.java:1734)
05-03 18:30:34.226: W/System.err(492):  at android.os.Parcel.readMapInternal(Parcel.java:1947)
05-03 18:30:34.226: W/System.err(492):  at android.os.Bundle.unparcel(Bundle.java:169)
05-03 18:30:34.226: W/System.err(492):  at android.os.Bundle.getSerializable(Bundle.java:1126)
05-03 18:30:34.226: W/System.err(492):  at android.content.Intent.getSerializableExtra(Intent.java:3311)
05-03 18:30:34.226: W/System.err(492):  at ie.wit.hotelmanager.ViewGuestActivity.onCreate(ViewGuestActivity.java:25)
05-03 18:30:34.226: W/System.err(492):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-03 18:30:34.226: W/System.err(492):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-03 18:30:34.226: W/System.err(492):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-03 18:30:34.226: W/System.err(492):  at 05-03 18:30:34.216: W/System.err(492):   at android.os.Parcel.readListInternal(Parcel.java:1956)
.... 
```

我应该怎么办？我在上面添加了目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:57:02.803

你应该实现 Parcelable 然后发送你的数组

```
Intent.putParcelableArrayListExtra("array",yourarray); 
```

和其他活动得到它

```
 Bundle bundle = getIntent().getExtras();
    List<Guest> guestList = bundle.getParcelableArrayList("array"); 
```

# windows-phone-7 - 如何添加 LoopingSelector？

> ID：10437337
> 
> 赞同：1
> 
> 时间：2012-05-03T18:32:24.937
> 
> 标签：windows-phone-7, silverlight-toolkit

我正在尝试在我的 MainPage 中添加一个“微调器”，以使用户从字符串列表中进行选择并导航到第二页。我发现我可以通过 LoopingSelector 做到这一点，但我看不到任何添加它的方法！如果我放入`<toolkit:LoopingSelector>`xaml VS2010 无法识别它.. 我在我的目录中找不到 .dll！

可以使用 LoopingSelector 还是应该只使用列表框？

编辑：顺便说一句，我发现一个更容易使用的微调器，它是 ListPicker！现在我正在尝试实现这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:39:42.660

```
Maybe you are not properly defining "toolkit"?
    <controls:LoopingSelector 
           ItemSize="128,128" 
           ItemTemplate="{StaticResource NumberTemplate}">
        <controls:LoopingSelector.DataSource>
            <local:NumbersDataSource />
        </controls:LoopingSelector.DataSource>
    </controls:LoopingSelector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:47:20.863

好的，我发现..这是“愚蠢的”。

我还没有安装 Silverlight 工具包（[在此处](http://silverlight.codeplex.com/releases/view/55034)可用于 LoopingSelector），所以我找不到 .dll。现在它可以正确识别程序集了！让我们看看如何让这件事发挥作用..

干杯!

# android - 单击按钮上的随机文本

> ID：10437341
> 
> 赞同：0
> 
> 时间：2012-05-03T18:32:50.127
> 
> 标签：android, button

我有大约 150 种不同的文本，当我按下 a 时，我想以随机顺序显示它们`Button`。每次按 时都会有一个新的`Button`。我已经弄清楚了这段代码：

```
 Random myRandom = new Random();
   TextView textblondin = (TextView) findViewById(R.id.textblondin);
   switch(myRandom.nextInt() %3) {
      case 0:
         textblondin.setText("Text 1");
         break;
      case 1:
         textblondin.setText("Text 2");
         break;
      case 2:
     textblondin.setText("Text 3");
     break;
      default:
     break;
   }
}
} 
```

我可以把它链接到一个`Button`. 有人知道怎么做吗？

```
public class Blondinskamt extends Activity {           <----X

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.blondintext);
    View myRandom = findViewById(R.id.myRandom);
    myRandom.setOnClickListener(null);

    myRandom.setOnClickListener(new View.OnClickListener() {
    Random myRandom = new Random();
    TextView textblondin = (TextView) findViewById(R.id.textblondin);    <----X
    switch(myRandom.nextInt() %3) {
    case 0:
        textblondin.setText("Skämt");
        break;
    case 1:
        textblondin.setText("Roligt");
        break;
    case 2:
        textblondin.setText("kul kul kul kul");
        break;
      default: 
```

} }

我在放置“<----X”的地方仍然出现错误我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:33:25.413

您的 onClickListener 没有可以从中调用的上下文`findViewById()`。我可能会改为使用您的活动实现点击侦听器的设计模式。阅读[http://android-developers.blogspot.com/2009/10/ui-framework-changes-in-android-16.html](http://android-developers.blogspot.com/2009/10/ui-framework-changes-in-android-16.html)并搜索“Easier click listeners”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:55:06.193

您必须向您的按钮添加一个侦听器。

```
textblondin.setOnClickListener(new View.OnClickListener() {
    ... your code here ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:46:05.773

将所有 150 个字符串存储在 Arraylist 中，并通过随机生成的数字显示文本。

样品；

```
ArrayList<String> arr_str = new ArrayList<String>();

arr_str.add(String Parameter) // add the all strings in arraylist by using the method.

Random randomGenerator = new Random();
int randomInt = 0;

within  the button onclick listener write the following code.
{
  randomInt = randomGenerator.nextInt(149);  // this will generate random number b/w 0 to 149.
textView.setText(arr_str.get(randomInt));  // you can get the n th number of string stored in the arraylist.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:37:47.677

在 Android Docs 中，您可以找到如何在单击按钮时执行代码。

[http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

# validation - 字段验证 - 服务器和客户端

> ID：10437342
> 
> 赞同：0
> 
> 时间：2012-05-03T18:32:53.330
> 
> 标签：validation, jquery, jquery-validate

我有一个特定字段需要服务器端和客户端验证的表单。我正在使用 jquery 验证插件来执行客户端验证。下面是相同的代码。

```
$('#createapp').validate({
    rules: {
      appname: {
        minlength: 8,
        required: true
      },
      apptitle: {
        required: true
      }
    },
    highlight: function(label) {
        $(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
        label
            .text('OK!').addClass('valid')
            .closest('.control-group').addClass('success');
    }
  }); 
```

现在我需要检查用户尝试输入的 appname 是否已经存在于 DB 中。我正在使用 ajax 使用此代码执行检查

```
$('#appname').focusout(function(){
    $.ajax({
        type: "POST",
        url: "<?php echo base_url();?>index.php/app/application/check_app",
        data: "appname="+$("#appname").val(),
        success: function(msg){

            if(msg == "false")
            {
               var controlDiv = $('#appname').closest('.control-group');
                   controlDiv.addClass('error');
                   controlDiv.removeClass('success');
            }
            else
            {
                var controlDiv = $('#appname').closest('.control-group');
                   controlDiv.addClass('success');
                   controlDiv.removeClass('error');
            }
        }
    });
}); 
```

虽然这会使字段控件变为红色，但它不会停止表单提交。我不想复制服务器端的逻辑来检查并返回错误。

如果应用名称已被占用，我可以在哪里添加代码以禁用表单提交？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:38:18.207

我可能会遗漏一些东西，但我认为你采取了错误的方法。jQuery Validate 支持远程验证，但您没有使用它。

请看[`remote`](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:37:34.917

尝试使用`$('#createapp').validate( ...code...).cancelSubmit = true;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:38:36.430

我猜那`#createapp`是你的表格？如果是这样，如果名称已被占用，我会更改提交属性。

```
$('#appname').focusout(function(){
    $.ajax({
        type: "POST",
        url: "<?php echo base_url();?>index.php/app/application/check_app",
        data: "appname="+$("#appname").val(),
        success: function(msg){

            if(msg == "false")
            {
               var controlDiv = $('#appname').closest('.control-group');
                   controlDiv.addClass('error');
                   controlDiv.removeClass('success');
               $('#createapp').attr('submit', 'return false;');
            }
            else
            {
                var controlDiv = $('#appname').closest('.control-group');
                   controlDiv.addClass('success');
                   controlDiv.removeClass('error');
            }
        }
    });
}); 
```

# javascript - 如何使容器滚动到元素

> ID：10437344
> 
> 赞同：2
> 
> 时间：2012-05-03T18:33:15.450
> 
> 标签：javascript, jquery, scroll, containers

我有一个包含一大堆文本的容器，我想自动滚动到该容器中的各种元素。我可以使用 jQuery 为容器设置动画以很好地滚动一定距离，但是我在确定该距离是多少时遇到了很多麻烦。

我看到的大多数提示都建议使用 .offset().top 属性来获得该距离，但这在这种情况下不起作用。 [以这个 jsfiddle 为例。](http://jsfiddle.net/doub1ejack/anNxU/)

**注意**：小提琴的目标是作为容器直接子级的段落标签，但我不想依赖它。我希望能够为任何元素获得适当的滚动距离，无论它们嵌套的深度如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T18:42:24.917

尝试使用这个：

```
var pOffset = $("#lipsum").scrollTop();
pOffset = pOffset + $("#lipsum p.active").position().top; 
```

`.scrollTop()`给出 DIV 的当前滚动位置，将 P 元素的位置添加到它，滚动就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T18:39:21.217

`.offset()`获取元素相对于整个页面的位置。

您在这里需要的是`.position()`让您获得元素相对于其包含元素顶部的位置。

编辑：在这里它适用于更新的[JSFiddle](http://jsfiddle.net/anNxU/7/)

编辑2：我只是注意到如果不添加滚动位置它就无法工作。您需要`.scrollTop()`从包含的 div 添加。这是一个更新的[JSFiddle](http://jsfiddle.net/anNxU/14/)。（这次有效）

# fiddler - 如何在自定义 Fiddler 检查器中获取传输时间

> ID：10437347
> 
> 赞同：1
> 
> 时间：2012-05-03T18:33:24.573
> 
> 标签：fiddler, extensibility

我正在编写一个自定义 Fiddler 检查器（从 Inspector2 继承并实现 IResponseInspector2），我想在检查器的输出中显示的一件事是从服务器返回响应所花费的时间（相对于时间相应的请求是从客户端发送的）。

我基本上希望用户看到请求花费了多长时间，而不必切换到时间轴视图。

有谁知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:31:26.527

在 FilderScript 中找到变量 m_ShowTTLB 和 m_ShowTimestamp 并将所有设置为 true。将结果显示到自定义列

```
 // Show the duration between the start of Request.Send and Response.Completed in Milliseconds
    public static RulesOption("&Show Time-to-Last-Byte", "Per&formance")
    var m_ShowTTLB: boolean = true;

    // Show the time of response completion
    public static RulesOption("Show Response &Timestamp", "Per&formance")
    var m_ShowTimestamp: boolean = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:55:25.843

好的 - 我找到了一种方法，但它似乎有点 hacky - 也许有更好的方法。

```
Session[] sessions = FiddlerApplication.UI.GetSelectedSessions();
if (sessions != null && sessions.Length == 1)
{
    Session s = sessions[0];
    if (s != null && (s.state == SessionStates.Done))
    {
        TimeSpan totalTime = s.Timers.ClientDoneResponse - s.Timers.ClientBeginRequest;
        Debug.WriteLine("Time = " + totalTime.ToString());
    }
} 
```

我想我想要一种更优雅的方式来获取`Session`与检查员当前正在处理的响应相关联。

# windows - Windows XP SP3 URL 命名空间保留

> ID：10437349
> 
> 赞同：0
> 
> 时间：2012-05-03T18:33:39.753
> 
> 标签：windows, windows-xp, acl, windows-security

我有一台 Windows XP SP3 机器，我正在尝试在其上设置 URL 保留。我正在使用 httpcfg 实用程序来尝试设置以下**netsh**保留的等效项：

```
netsh http add urlacl url=http://+:8080/ user=Everyone 
```

我正在参考这篇 MSDN[文章](http://msdn.microsoft.com/en-us/library/ms733768.aspx)。让我困惑的是必需的 ACL 参数

```
httpcfg set urlacl /u {http://URL:Port/ | https://URL:Port/} /a ACL 
```

文档表明 ACL 必须作为 SDDL 格式的字符串传递，我对 SDDL 语法不是很熟悉，所以我不确定如何获取每个人的 SDDL 字符串。是否有一些默认的 SDDL 字符串可用于向各个组授予完全权限？还是我必须手动生成 SDDL 字符串？有没有其他方法可以像**netsh**一样简单地设置权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:52:27.790

创建一个新文件（例如`foo.txt`），删除所有继承的权限，然后仅添加具有完全控制权的“所有人”。然后使用命令提示符执行：

```
cacls foo.txt /s 
```

然后控制台输出将包含文件的 SDDL ACL。

否则，您可以使用[UrlAclModifier.exe](http://urlreservation.codeplex.com/)来执行此操作，它比`httpcfg`. 确保在 Windows Vista+（和 Windows Server 2008+）中以管理员身份运行

# scheduled-tasks - 来自 web.config 的 Sitecore 任务配置

> ID：10437353
> 
> 赞同：1
> 
> 时间：2012-05-03T18:33:58.210
> 
> 标签：scheduled-tasks, sitecore, sitecore6

我正在尝试将任务配置为每 5 秒运行一次（在生产中，频率将设置为 30 分钟，但我将其设置为 5 秒以进行调试）。

```
<scheduling>
  <!-- Time between checking for scheduled tasks waiting to execute -->
  <frequency>00:00:10</frequency>
....
<agent type="MyStuff.Sitecore.Tasks.UpdateJob" method="Run" interval="00:00:05">
        <LogActivity>true</LogActivity>
      </agent> 
```

我的课看起来像：

```
namespace MyStuff.Sitecore.Tasks
{
    public class UpdateJob
    {
       public void Run()
       {
          //debugger never enters here
       }
    }
} 
```

但无论如何，代码似乎永远不会被调用。我试过点击其他网页，所以我知道 asp.net 工作进程还活着。

该类位于网站项目中调用的共享库中，因此无论 sitecore 配置正在寻找该`MyStuff.Sitecore.Tasks.UpdateJob`类型，都应该能够找到它。另外，我检查了 Sitecore 日志，我没有看到任何错误或与任务有关的任何内容

知道我缺少什么吗？

* * *

**编辑**我在日志中看到的唯一“可疑”是：

```
ManagedPoolThread #12 15:53:10 INFO  Starting update of index for the database 'master' (1 pending).
ManagedPoolThread #12 15:53:10 INFO  Update of index for the database 'master' done.
ManagedPoolThread #18 15:53:36 ERROR Exception in geoip worker thread.
Exception: System.Reflection.TargetInvocationException
Message: Exception has been thrown by the target of an invocation.
Source: mscorlib
   at System.RuntimeMethodHandle._InvokeConstructor(IRuntimeMethodInfo method, Object[] args, SignatureStruct& signature, RuntimeType declaringType)
   at System.RuntimeMethodHandle.InvokeConstructor(IRuntimeMethodInfo method, Object[] args, SignatureStruct signature, RuntimeType declaringType)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Sitecore.Reflection.ReflectionUtil.CreateObject(Type type, Object[] parameters)
   at Sitecore.Configuration.Factory.CreateFromTypeName(XmlNode configNode, String[] parameters, Boolean assert)
   at Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper)
   at Sitecore.Configuration.Factory.GetProviders[TProvider,TCollection](List`1 nodes)
   at Sitecore.Configuration.Factory.GetProviders[TProvider,TCollection](String rootPath, TProvider& defaultProvider)
   at Sitecore.Configuration.ProviderHelper`2.ReadProviders()
   at Sitecore.Configuration.ProviderHelper`2.get_Provider()
   at Sitecore.Analytics.Lookups.GeoIpWorker.ProcessGeoIp()
   at Sitecore.Analytics.Lookups.GeoIpWorker.<Wakeup>b__3(Object a) 
```

我正在使用 Sitecore 6.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:45:15.247

您可以尝试将您的代理声明更新`<agent type="Mystuff.Sitecore.Tasks.UpdateJob, Mystuff" method="Run" interval="00:00:05">`为 Mystuff 是您的程序集名称。似乎缺少组件。

*根据 techphoria414 的建议添加为答案。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:53:31.053

The answer lies in `<frequency>00:00:10</frequency>`, this should always be as low as your most frequent task, so in this case 00:00:05.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:04:42.060

虽然我稍微回避了你的问题，但我从来没有成功地在处理计划任务时调用调试器。我改为使用`Sitecore.Diagnostics.Log`然后我希望显示的相关调试级别。很多时候我发现这相当有限，但是使用第三方尾部实用程序，您可以轻松地查看日志。

也许这会给你一个临时解决方案，直到其他人回答。

# iphone - 如何在导航控制器中合并所有四个方向？

> ID：10437360
> 
> 赞同：0
> 
> 时间：2012-05-03T18:34:38.607
> 
> 标签：iphone, ios, ios4

我有标签栏，每个标签都有四个导航视图控制器。在选择一行时，在一个选项卡中，我显示了一张照片数组的第一张照片。这个 Present 控制器是一个导航控制器，我有一个按钮，它调用下一个显示专辑的视图控制器。

我的问题是当用户改变方向并且它没有反映在屏幕上时。我已经尝试过 shoulAutorotateToInterrfaceOrientation 方法，并且我已经在我的标签栏按钮将调用的每个导航控制器中调用了这个函数。

请帮助我，我对此感到震惊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:07:10.093

您必须确保层次结构中的**每个**视图控制器都支持您需要的方向。您可以将您的标签栏缩减为单个标签，并确保您的视图控制器（现在？）返回 YES 到 shouldAutorotate 进行检查。

# css - 调整大小时将列表元素保持在同一行。CSS 液体布局

> ID：10437366
> 
> 赞同：1
> 
> 时间：2012-05-03T18:35:19.310
> 
> 标签：css, overflow, menuitem, drop-down-menu, liquid-layout

我有这个菜单，我在教程中找到了如何制作，但我只有一个麻烦。当我调整页面大小时，所有布局都会更改以适应新的窗口大小，但是当文本不适合屏幕时，菜单似乎会换行。我希望所有菜单都保留在一行中，即使窗口的大小太小而无法全部显示。我已经尝试了很多我在这里找到的黑客，但似乎没有一个适合我。这是我正在使用的 CSS。

```
#navcontainer {
margin: auto;
width: 95%;
}
#menu
{
width: 100%;
margin: 0;
padding: 0 0 0 0;
list-style: none;
background: #C2D1DA;
background: -moz-linear-gradient(#DDE7ED, #C2D1DA);
background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #C2D1DA),color-stop(1, #DDE7ED));
background: -webkit-linear-gradient(#DDE7ED, #C2D1DA);
background: -o-linear-gradient(#DDE7ED, #C2D1DA);
background: -ms-linear-gradient(#DDE7ED, #C2D1DA);
background: linear-gradient(#DDE7ED, #C2D1DA);
-moz-border-radius: 50px;
border-radius: 50px;
-moz-box-shadow: 0 2px 1px #9c9c9c;
-webkit-box-shadow: 0 2px 1px #9c9c9c;
box-shadow: 0 2px 1px #9c9c9c;
}
#menu li
{
float: left;
padding: 0 0 10px 0;
position: relative;
line-height: 0;
}
#menu a
{
float: left;
height: 13px;
padding: 0 25px;
color: #1A6B91;
text-transform: uppercase;
font: bold 12px/25px Arial, Helvetica;
text-decoration: none;
text-shadow: 0 0px 1px #004063;
}
#menu li:hover > a
{
color: #333;
}
*html #menu li a:hover /* IE6 */
{
color: #333;
}
#menu li:hover > ul
{
display: block;
}
/*SUB MENU*/
#menu ul
{
list-style: none;
margin: 0;
padding: 0;
display: none;
position: absolute;
top: 23px;
left: 0;
z-index: 99999;
background: #DDE7ED;
background: -moz-linear-gradient(#DDE7ED, #C2D1DA);
background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #C2D1DA),color-stop(1, #DDE7ED));
background: -webkit-linear-gradient(#DDE7ED, #C2D1DA);
background: -o-linear-gradient(#DDE7ED, #C2D1DA);
background: -ms-linear-gradient(#DDE7ED, #C2D1DA);
background: linear-gradient(#DDE7ED, #C2D1DA);
-moz-box-shadow: 0 0 2px rgba(255,255,255,.5);
-webkit-box-shadow: 0 0 2px rgba(255,255,255,.5);
box-shadow: 0 0 2px rgba(255,255,255,.5);
-moz-border-radius: 5px;
border-radius: 5px;
}
#menu ul ul
{
top: 0;
left: 190px;
}
#menu ul li
{
float: none;
margin: 0;
padding: 0;
display: block;
-moz-box-shadow: 0 1px 0 #0A486C, 0 2px 0 #1A6891;
-webkit-box-shadow: 0 1px 0 #0A486C, 0 2px 0 #1A6891;
box-shadow: 0 1px 0 #0A486C, 0 2px 0 #1A6891;*/
}
#menu ul li:last-child
{
-moz-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
}
#menu ul a
{
padding: 10px;
height: 10px;
width: 170px;
height: auto;
line-height: 1;
display: block;
white-space: nowrap;
float: none;
text-transform: none;
}
*html #menu ul a /* IE6 */
{
height: 10px;
width: 170px;
}
*:first-child+html #menu ul a /* IE7 */
{
height: 10px;
width: 170px;
}
#menu ul a:hover
{
background: #0186ba;
background: -moz-linear-gradient(#04acec,  #0186ba);
background: -webkit-gradient(linear, left top, left bottom, from(#04acec), to(#0186ba));
background: -webkit-linear-gradient(#04acec,  #0186ba);
background: -o-linear-gradient(#04acec,  #0186ba);
background: -ms-linear-gradient(#04acec,  #0186ba);
background: linear-gradient(#04acec,  #0186ba);
}
#menu ul li:first-child a
{
-moz-border-radius: 5px 5px 0 0;
border-radius: 5px 5px 0 0;
}
#menu ul li:first-child a:after
{
content: '';
position: absolute;
left: 30px;
top: -8px;
width: 0;
height: 0;
border-left: 5px solid transparent;
border-right: 5px solid transparent;
border-bottom: 8px solid #DDE7ED;
}
#menu ul ul li:first-child a:after
{
left: -8px;
top: 12px;
width: 0;
height: 0;
border-left: 0; 
border-bottom: 5px solid transparent;
border-top: 5px solid transparent;
border-right: 8px solid #DDE7ED;/*cambiar por gradiente*/
}
#menu ul li:first-child a:hover:after
{
border-bottom-color: #04acec;
}
#menu ul ul li:first-child a:hover:after
{
border-right-color: #04acec; /*cambiar por gradiente*/
border-bottom-color: transparent;   
}
#menu ul li:last-child a
{
-moz-border-radius: 0 0 5px 5px;
border-radius: 0 0 5px 5px;
}
/* Clear floated elements */
#menu:after
{
visibility: hidden;
display: block;
font-size: 0;
content: " ";
clear: both;
height: 0;
} 
```

菜单结构的 HTML 代码在这里。

```
<script type="text/javascript">
$(function() {
if ($.browser.msie && $.browser.version.substr(0,1)<7)
{
    $('li').has('ul').mouseover(function(){
        $(this).children('ul').show();
    }).mouseout(function(){
        $(this).children('ul').hide();
    })
}
});
</script>
<div id="navcontainer">
<ul id="menu">
<li><a href="#" onclick="inicio();">Inicio</a></li>
<li><a href="#">ISO 9001</a>
    <ul>
        <li><a href="#">Nueva A.C. o A.P.</a></li>
        <li><a href="#">Tabla A.C. y A.P.</a></li>
    </ul>
</li>
<li><a href="#" onclick="muestras();">Muestras</a>
    <ul>
        <li><a href="#" onclick="muestras();">Solicitud de Muestra</a></li>
        <li><a href="#" onclick="muestrasPendientes();">Muestras Pendientes</a></li>
        <li><a href="#">Muestras Terminadas</a></li>
        <li><a href="#">Garant&iacute;as</a></li>
        <li><a href="#">Cat&aacute;logo de Productos</a></li>
    </ul>
</li>
<li><a href="#" onclick="proyectos();">Proyectos</a>
    <ul>
        <li><a href="#" onclick="proyectos();">Nuevo Proyecto</a></li>
        <li><a href="#" onclick="proyectosVista();">Proyectos</a></li>
        <li><a href="#">Nueva Actividad</a></li>
        <li><a href="#">Actividades Proyectos</a></li>
    </ul>
</li>
<li><a href="#" onclick="tickets();">Tickets</a>
    <ul>
        <li><a href="#" onclick="tickets();">Nuevo Ticket</a></li>
        <li><a href="#" onclick="ticketsAbiertos();">Tickets Abiertos</a></li>
        <li><a href="#" onclick="ticketsTerminados();">Tickets Terminados</a></li>
        <li><a href="#" onclick="ticketsPorTerminar();">Tickets por Terminar</a></li>
    </ul>
</li>
<li><a href="#" onclick="iCalendar();">iCalendar</a></li>
<li><a href="#" onclick="mkt();">MKT</a>
    <ul>
        <li><a href="#" onclick="publicidad();">Enviar Boletin</a></li>
    </ul>
</li>
<li><a href="#">Juntas</a>
    <ul>
        <li><a href="#">Nuevo Compromiso</a></li>
        <li><a href="#">Compromisos Abiertos</a></li>
        <li><a href="#">Compromisos Terminados</a></li>
        <li><a href="#">Todos los Compromisos</a></li>
        <li><a href="#">Nueva Minuta</a></li>
        <li><a href="#">Minutas Anteriores</a></li>
        <li><a href="#">Calendario de Eventos</a></li>
        <li><a href="#">Recordar Compromisos</a></li>
    </ul>
</li>
<li><a href="https://www.estatec.com/webmail" target="_blank">Mail</a></li>
</ul>
</div>
* html #menu{
zoom: 1;
} /* IE6 */
*:first-child+html #menu{
zoom: 1;
} /* IE7 */ 
```

这是我需要的菜单 [http://i.stack.imgur.com/wXLSw.png](http://i.stack.imgur.com/wXLSw.png)

这是我遇到的问题 [http://i.stack.imgur.com/B01H9.png](http://i.stack.imgur.com/B01H9.png)

我不在乎菜单是否显示完整，但我需要它在同一行。我希望你能帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:55:50.273

[http://jsfiddle.net/3aSTE/](http://jsfiddle.net/3aSTE/)

`#menu`为and设置一个硬高度`overflow-y:hidden`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T05:39:27.077

这是最简单的答案！

只需将以下两个属性添加到您的#menu css 文件中，

```
 text-align: left;
    width: 1010px; 
```

希望它会奏效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:55:07.403

```
#menu {
    width: 100%;
    margin: 0;
    padding: 0 0 0 0;
    list-style: none;
    background: #C2D1DA;
    background: -moz-linear-gradient(#DDE7ED, #C2D1DA);
    background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #C2D1DA),color-stop(1, #DDE7ED));
    background: -webkit-linear-gradient(#DDE7ED, #C2D1DA);
    background: -o-linear-gradient(#DDE7ED, #C2D1DA);
    background: -ms-linear-gradient(#DDE7ED, #C2D1DA);
    background: linear-gradient(#DDE7ED, #C2D1DA);
    -moz-border-radius: 50px;
    border-radius: 50px;
    -moz-box-shadow: 0 2px 1px #9c9c9c;
    -webkit-box-shadow: 0 2px 1px #9c9c9c;
    box-shadow: 0 2px 1px #9c9c9c;
    min-width: 952px;
} 
```

使用`min-width`CSS 中的属性。

# hex - 为什么将数据文件保存为十六进制（二进制）而不是纯文本？

> ID：10437367
> 
> 赞同：2
> 
> 时间：2012-05-03T18:35:24.890
> 
> 标签：hex

我正在查看 Infinity Engine（在诸如 Baldur's Gate 等游戏中使用的文件格式）[文件格式](http://www.ugcs.caltech.edu/~jedwin/baldur.html)，并查看文件结构我要问，为什么以十六进制格式保存引擎文件（我认为这也被称为“二进制格式”）而不仅仅是纯文本？

我有一些假设（与“避免您的答案与问题一起提供，并且您期望更多答案”的stackoverflow规则不同）：

1.  试图保留文件的知识产权（无用）。
2.  为了节省空间，因为某些文件可能会变得非常大，而当时（1990 年代末）空间不像现在那么大。
3.  拥有结构化数据（这也可以通过在平面文件中使用固定长度的选项卡来实现）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:47:07.533

[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)不是二进制。

在十六进制中，每个字符（使用 ASCII 编码的字节/八位字节）可以表示 16 个值：0-9 和 AF。它需要两个十六进制字符来表示 256 个值。

在“二进制文件”中，每个字节（八位字节）可以表示 256 个值。

现在，使用二进制的意义在于它是“最原始”的格式，不需要以任何方式供人类使用。这大大增加了文件的数据/八位字节比率。

二进制格式有助于“IP”，但这不一定是主要目标。有很多粉丝编写的编辑器工具（如证据所示），以及不时出现的官方工具。

二进制文件结构可以在*偏移量*中确定，并且可以直接查找，而不是像文本文件那样需要“读取到 X 行和 Y 列”。这使得资源的随机访问更加有效。对于许多 Baulder's Gate 文件，许多文件都是“固定格式”，可以轻松（并且快速）加载到布局相同的内存结构中。（有时堆和其他数据结构将直接编码在二进制文件中。）

二进制文件是*数据的**不透明*结构：它只是结束的手段。里面的*信息*只为特定场景下的访问而设计。（将此与 JSON 或 SQL 数据库进行比较；前者不是不透明的，因为它是“人类可消费的”，而后者仅公开信息。）

 **看看*不同*种类的二进制文件和每个文件提供的服务：音频？图片？路线？实体位置和统计信息？对话？每一个都是根据引擎的特定需求而制作的，虽然有些“可以做不同的”，但如果不需要并且现有工具已经到位：为什么要改变？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:43:13.807

更紧凑，不需要字符串解析。例如，要存储数字“123”，您将需要一个字节。要存储字符串“123”，您将需要三个字节和至少一个字节的长度。如果有人认为今天我们不需要考虑空间，那么他/她不应该编写代码。这会区分好应用程序和坏应用程序。**

# jquery - Ajax 新手...如何在 ajax 调用后将我的 CSS 恢复为默认值？（例如重新加载 CSS）

> ID：10437370
> 
> 赞同：0
> 
> 时间：2012-05-03T18:35:49.553
> 
> 标签：jquery, css, ajax, less

好的，所以我使用 jQuery ajax() 调用从 php 页面获取响应，以便提交/检查表单。当它成功时，它会返回一个表单元素列表和相应的消息，说明它们有什么问题（例如缺少字段、无效输入等）。

然后，它再次使用 jQuery 循环遍历由 ajax 调用返回的每个表单元素并更改它们的 css（通过 导入） - 例如使元素边框变为红色，以指示该元素的错误。

这工作得很好。但是，假设我提交了缺少字段的表单 - ajax 进行了调用，并且页面的 css 被更改为用红色突出显示该字段。现在假设我解决了该字段的问题（例如，给它提供有效数据）并重新提交，但这次缺少不同的字段。虽然它会正确地为新的缺失字段提供红色边框，但它不会从重新提交时正确的字段中删除红色边框。换句话说，一旦红色边界出现，我就永远无法清除它。

我想我可能需要在 javascript 中做一个“重新加载 css”类型的函数来在 ajax 调用之后重新加载 css ......或者什么？我真的不知道。不过，这似乎应该是一件非常普遍的事情。环顾四周，它看起来可能与缓存页面有关，但我认为我无法控制这类事情。

可能值得一提的是，我正在使用 Less CSS。哈尔普兹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:40:41.050

不确定如何在回调中添加边框/样式，但我建议在该类中声明的样式中缺少的表单字段中添加一个 css 类。然后使用 'if' 语句或 :focus 事件，在用户点击返回类时删除类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:44:31.740

我觉得你想多了。您不想直接使用 jQuery 修改 CSS。您只想打开和关闭课程。

因此，如果这是您的领域：

```
<input type="text" /> 
```

并且有一个错误，让服务器返回这个：

```
<input type="text" class="error" /> 
```

然后，如果您需要关闭错误状态

```
$theInput.removeClass("error") 
```

这样你就不会直接接触 CSS，也没有必要“重新加载”它（不是这样就能解决问题）。

# c# - asp.net 部署 - 找不到 Main.Master.cs 文件

> ID：10437371
> 
> 赞同：6
> 
> 时间：2012-05-03T18:35:55.227
> 
> 标签：c#, asp.net, azure

我目前正在 azure 上部署我的网站。我的一个页面工作正常，但我有另一个使用母版页的页面，由于我收到此错误而未加载：

```
Server Error in '/' Application.

Parser Error

Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: The file '/Main.master.cs' does not exist.

Source Error: 

Line 1:  <%@ Master Language="C#" AutoEventWireup="true" CodeFile="Main.master.cs" Inherits="ThirdEye.Main" %>
Line 2:  
Line 3:  <%@ Register Src="~/controls/Footer.ascx" TagName="Footer" TagPrefix="ThirdEye" %>

Source File: /Main.master    Line: 1 

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

我无法弄清楚我有什么问题。我已经上传了可执行文件，页面在 bin 文件夹的同一目录中。您认为我必须在 CodeFile 属性或 Inherits 属性前添加句点或波浪号吗？

我正在使用 .net 框架 v4。我不能使用 3.5，我认为这不应该是问题。

Main.Master

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Main.master.cs" Inherits="Main" %> 
```

Main.Master.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using ThirdEye;

public partial class Main : System.Web.UI.MasterPage
    {.... 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T20:41:36.773

您正在使用 Web 应用程序项目（而不是网站项目）吗？如果是这样，更改`CodeFile`为`CodeBehind`应该可以解决错误。

Web 应用程序部署已编译，并且不包含使用`CodeFile`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-03T14:34:53.163

要确保在部署到 Azure 时包含代码文件 (*.cs)，请转到项目属性并在 PACKAGE/Publish Web 下选择“此项目文件夹中的所有文件”作为要部署的选项项目（适用于所有部署方法）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T00:22:29.120

基于上述错误，tt 似乎 MainMaster.master.cs 未部署到 Windows Azure。

当您在项目中添加新的母版页名称“MainMaster.master”时，是否将其属性设置为“复制到输出目录”为“始终复制”，因为默认情况下未设置，因此该文件不会您的 Windows Azure 包的一部分并导致此类错误。

请您确认是否是这种情况？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T08:35:24.277

答案是您永远不应该将页面命名为“主要”！非常愚蠢的错误！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-05T19:07:07.063

我以前也遇到过同样的问题。这个问题有两种解决方案。

1.  正如@Eric 提到的，在主文件中使用`CodeBehind`而不是`CodeFile`.

    ```
    <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Main.master.cs" Inherits="ThirdEye.Main" %> 
    ```

2.  复制，cs文件到部署；在这种情况下，将 'Main.master.cs' 复制到 IIS 的“App_Master”文件夹中。通常，当您部署`cs`文件时不会包含在内。

# c# - 如何使某些代码行只运行一次

> ID：10437374
> 
> 赞同：4
> 
> 时间：2012-05-03T18:36:00.603
> 
> 标签：c#

同一程序集中的两个类：`Class A`和`Static` `Class B`

在...的方法中`ClassA`，我正在调用`ClassB`...中的方法，但我希望仅调用一次，而不是每次调用...的方法时，`ClassA`我正在设置全局属性-Ran-看看该方法是否已经运行过......它工作得很好，但我觉得这不是最好的设计。我想知道是否有更好的方法可以做到这一点？

谢谢。

```
ClassA.MyMethod(...)
{
....
//.... 
if (ClassB.Ran != 1)
    ClassB.Foo();
....
//...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T18:46:11.220

您需要注意解释“仅一次”限制的严格程度。静态方法通常被认为是线程安全的；如果你真的想确保你的方法只运行一次，即使是在竞速线程的情况下，那么你需要使用同步机制，最简单的例子是`lock`：

```
private static bool isRun = false;
private static readonly object syncLock = new object();

public void MyMethod()
{
    lock (syncLock)
    {
        if (!isRun)
        {
            Foo();            
            isRun = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T18:42:33.280

我通常会这样做[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

考虑：

```
public static class Test // this is your ClassB
{
    private static Lazy<string> m_Property = new Lazy<string>( ()=>
    {
        Console.WriteLine("Lazy invoked"); 
        return "hi";
    },true);
    public static string Property
    {
        get
        {
            Console.WriteLine("value request");
            return m_Property.Value;
        }
    }
}

//....consuming code, this is in your ClassA somewhere

var test1 = Test.Property; // first call, lazy is invoked
var test2 = Test.Property; // cached value is used, delgate not invoked
var test3 = Test.Property; // cached value is used, delgate not invoked
var test4 = Test.Property; // cached value is used, delgate not invoked
var test5 = Test.Property; // cached value is used, delgate not invoked 
```

这是输出：

```
value request
Lazy invoked
value request
value request
value request
value request 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T18:41:00.320

您可以在类上使用私有静态字段，以便在第一次调用该方法时设置结果，防止它再次运行：

```
class B
{
  private static bool fooRun = false;

  public static void Foo()
  {
    if (fooRun) { return; }
    ...
    fooRun = true;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:38:07.450

只需将 bool 传递给构造函数，无论您是否希望该事物运行？就像是：

```
ClassA(bool runA)
{
    if (runA) 
    {
        ClassB.Foo();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T18:55:45.030

没有更多细节，很难说，但听起来B类中的这个方法包含某种初始化逻辑。如果是第一次引用B类时需要发生的事情，那么你可以把它放在B类的静态构造函数中。如果B类中的方法只需要在引用A类时运行，那么它可能是从 A 类的静态构造函数调用。如果在调用 A 类的某个方法之前无法调用它，并且它只能从任何地方调用一次，那么我会说你应该从内部检查 B 类中的私有静态变量该方法，如果它已经被调用，则立即返回。否则，作为最后的手段，我会说在 A 类中拥有一个私有静态变量比全局变量更可取。

In all of these cases, however, I'd say that you are creating global state, which is almost always indicative of a poor design. In my humble opinion, this kind of problem is just screaming the need for a bit of "dependency injection".

# jquery - jQuery移动多选菜单显示项？

> ID：10437375
> 
> 赞同：3
> 
> 时间：2012-05-03T18:36:04.847
> 
> 标签：jquery, select, jquery-mobile, menu

我在 Jquery Mobile 1.1 中有一个多选菜单。我知道默认行为是在您选择项目并关闭菜单后显示所选项目和数字。

我的问题是我宁愿总是显示第一个项目和数字而不是选定的项目。例如，如果我有一个菜单：

```
<select name="color-choice" id="color-choice" data-mini="true" multiple="multiple" data-native-menu="false" >
   <option>Color Choices</option>
   <option value="red">Red</option>
   <option value="blue">Blue</option>
   <option value="green">Green</option>
</select> 
```

并且用户选择红色和绿色，我希望关闭菜单读取“颜色选择（2）”而不是默认的“红色，蓝色（2）”。

这是为了节省空间，因为我有几个菜单，想省掉标签，让用户一眼就知道一个菜单是“颜色选择”，他们选择了 2。

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T21:41:12.853

添加一个功能，该功能将在选择选项时保存所选项目，然后重置为默认选项。

```
<select name="color-choice" id="color-choice" data-mini="true" multiple="multiple" data-native-menu="false" >
    <option value="" selected="selected">Color Choices</option>
    <option value="red">Red</option>
    <option value="blue">Blue</option>
    <option value="green">Green</option>
</select>
<div>
    <input style="display:none;" id="hidden-choice" name="hidden-choice" value="" />        
</div>

$(document).ready(function(){

    $('#color-choice').change (function (e) { 
            hidden-choice.value = document.getElementById('color- choice').value;
            color-choice.value = "";
    });
}); 
```

希望这可以帮助。

# python - 我可以自定义 ff-find-other-file 以在测试和实现之间切换吗？

> ID：10437377
> 
> 赞同：6
> 
> 时间：2012-05-03T18:36:11.547
> 
> 标签：python, emacs

每当我必须编辑 C++ 代码时，我都会`ff-find-other-file`在头文件和实现文件之间来回切换。我可以将它用于 Python 文件在实现和测试之间来回切换吗？例如，如果我在`foo.py`，我希望能够切换到`foo_test.py`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:52:19.850

您实际上想要设置`ff-other-file-alist`（并且可能还有`ff-search-directories`）。这些变量是自动缓冲区本地的，因此您可以在模式挂钩中安全地设置它们。

`cc-other-file-alist`是 C/C++ 文件的预配置映射，它只是`ff-other-file-alist`.

要处理从测试到实现的反向映射，您将添加第二个条目，因此 alist 将如下所示：

```
'(("_test\\.py$" (".py"))
  ("\\.py$" ("_test.py"))) 
```

在这种情况下需要先进行反向映射，因为规则按顺序处理并`.py`匹配两个文件名。如果它们是相反的方式，您仍然会从`foo_test.py`to `foo_test_test.py`，依此类推...

有关更多信息和示例，请参阅此相关问题：

[如果我打开 doc.foo 文件，我希望 emacs 在同一文件夹中查找并打开 doc.bar 文件](https://stackoverflow.com/questions/10958672/if-i-open-doc-foo-file-i-want-emacs-to-look-for-and-open-doc-bar-file-in-the-sa/10958810#10958810)

对于您的情况，您可以使用：

```
(add-hook 'python-mode-hook 'my-python-mode-hook)

(defun my-python-mode-hook ()
  "My python customisations."
  (setq ff-search-directories '(".")
        ff-other-file-alist '(("_test\\.py$" (".py"))
                              ("\\.py$" ("_test.py"))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T20:01:03.847

您需要创建一个 .emacs 规则设置 cc-other-file-alist，例如：

```
(setq cc-other-file-alist
  `(("\\.py$" ("_test.py")))) 
```

# javascript - HTML4 后备在 URL 中提供尾随点

> ID：10437378
> 
> 赞同：0
> 
> 时间：2012-05-03T18:36:12.147
> 
> 标签：javascript, history.js, html4

我正在使用 history.js 和 pushState 为我的公司构建一个新的投资组合， [http: //saturate.se](http://saturate.se)

该站点需要与 HTML4 兼容，并且当我设法使事情与 pushState 一起工作时，我在创建片段标识符等效项时遇到了问题。如果您尝试在 IE <10 中浏览该站点，您将看到标识符添加了一个尾随点。此外，当尝试访问子目录中的链接时，URL 似乎在标识符后面缺少一个“/”（例如，“http://saturate.se/work/example”变成了[http://saturate.se/#work /example](http://saturate.se/#work/example) "。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:49:39.183

> 只是寻找方向（提示，教程等）

忘记使用片段标识符来跟踪历史。

*   你会被诅咒永远支持它（其他人到你页面的链接不会消失）
*   服务器永远不会看到它，因此您将遭受在 Twitter 上获得的默认页面的 Flash
*   一个标准的、更好的替代品已经存在，所以它已经死了

如果浏览器支持历史 API，则使用它。

如果没有，回退到非 Ajax 而不是非历史 API（这是[Github 所做的](https://github.com/blog/760-the-tree-slider)）。

# javascript - jquery开始时间/结束时间验证

> ID：10437381
> 
> 赞同：0
> 
> 时间：2012-05-03T18:36:26.247
> 
> 标签：javascript, jquery, jquery-plugins

我需要验证开始时间和结束时间。我似乎得到了部分验证，但是当两者都没有价值时，我不需要验证，所以不需要它。

```
$.validator.addMethod("endTimeRange", function() {
        var n=new Date();
        var st = Date.parse( n.getMonth()+1+'/'+n.getDate()+'/'+n.getFullYear() + ' ' + $("#startTime").val());
        var nd = Date.parse( n.getMonth()+1+'/'+n.getDate()+'/'+n.getFullYear() + ' ' + $("#endTime").val());
        return  nd > st;
    }, "Please specify a correct end time, the end time must be before the second.");

    $.validator.addMethod("startTimeRange", function() {
        var n=new Date();
        var st = Date.parse( n.getMonth()+1+'/'+n.getDate()+'/'+n.getFullYear() + ' ' + $("#startTime").val());
        var nd = Date.parse( n.getMonth()+1+'/'+n.getDate()+'/'+n.getFullYear() + ' ' + $("#endTime").val());
        return  st < nd;
    }, "Please specify a correct start time, the start time must be after the end time.");

startTime: {
             required: function(element) {
             return $("#endTime").val().length > 0;

            },
            startTimeRange:true
        },

        endTime: {
             required: function(element) {
             return $("#startTime").val().length > 0;
            },
            endTimeRange:true

        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:56:05.083

首先，您的两种验证方法做同样的事情。如果一个或两个字段为空，要实现成功验证，只需将它们添加到您的退货中：

```
// default is true
var isValid = true;

// if either value is empty, dont validate
if ($("#endTime").val() !== '' && $("#startTime").val() !== '') {
    // start time must be before end time
    isValid = startTime <= endTime;
}

return isValid; 
```

# javascript - 使用 RegExp 删除数组项？

> ID：10437384
> 
> 赞同：2
> 
> 时间：2012-05-03T18:36:48.143
> 
> 标签：javascript, jquery, regex, arrays

我有一堆用来过滤信息的链接，见：http: [//i.imgur.com/Huoqb.png](http://i.imgur.com/Huoqb.png)

当您单击链接时，我会将其添加到数组中。例如：

```
Venue>All = venue-0, Venue>Home = venue-1, Venue>Away = venue-2, 
Vs>All = vs-0, Vs>Lefties = vs-1, Vs>Righties = vs-2
 etc, etc, etc. 
```

如果用户单击任何类别中的“全部”，我想搜索整个数组并删除包含该类别的所有项目。例如：`myArray['venue-1','venue-2','vs-1']`...单击`Venue>all`、删除`'venue-1'`和`'venue-2'`离开`myArray['vs-1']`。

我可以使用正则表达式来执行此操作，例如：`/^venue/`并根据您单击的“全部”更改单词吗？

我知道我需要组合使用`$.inArray`or`indexOf()`和，`splice()`但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:45:06.060

您可以使用该`$.grep`实用程序简单地执行此操作：

```
var someArray = [1, 2, 3];

var numbersGreaterThanOne = $.grep(someArray, function(item)
{
    return item > 1;
}); 
```

这只是一个示例，但您可以执行任何回调来过滤您喜欢的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:00:37.260

尝试这个：

```
var newList = $.filter(function () {
    return this.indexOf('venue') != 0;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:51:12.457

对于就地改变数组的非 jQuery 解决方案：

```
for (var i=myArray.length;i--;){
  if (...) myArray.splice(i,1);
} 
```

您想要的任何测试在哪里`...`，例如：

```
if (myRegeEx.test(myArray[i])) 
```

# facebook - 基于 xid 的 fb:comments 会在 6 月 1 日丢失吗？

> ID：10437385
> 
> 赞同：0
> 
> 时间：2012-05-03T18:36:54.397
> 
> 标签：facebook, comments, fbml, facebook-comments, xfbml

据我所知，没有办法将使用 fb:comments/xid 的现有 Facebook 评论迁移到新的 fb:comments/href 版本。有一些 StackOverflow 主题（[如何将 Facebook 评论从使用“URL”属性迁移到“HREF”](https://stackoverflow.com/questions/8417170/how-to-migrate-facebook-comments-from-using-url-property-to-href)， http: [//facebook.stackoverflow.com/q/8487357/138526](http://facebook.stackoverflow.com/q/8487357/138526)）支持这种解释。

现在 Facebook 在他们的[FBML 文档](http://developers.facebook.com/docs/reference/fbml/comments/)中说：

> 从 2012 年 6 月 1 日开始，FBML 应用程序将不再工作，因为所有 FBML 端点都将被删除

根据文档，“xid”是 FBML，而不是 XFBML。这是否意味着所有旧评论都将永远消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:31:23.017

我得到了 Facebook 的官方回复（终于），我想我在这里分享它：即使 XFBML 文档中没有提到“xid”参数，它在某种程度上也是 XFBML 的一部分。添加 'migrated="1"' 将使弃用警告消失。

来源：[https ://developers.facebook.com/bugs/244684962306617](https://developers.facebook.com/bugs/244684962306617)

# c++ - 之前的行在 ofstream 上被清除

> ID：10437386
> 
> 赞同：0
> 
> 时间：2012-05-03T18:37:00.847
> 
> 标签：c++, ofstream

当调用 writeToFile 函数时，我想在文件上写一个带有字符串的新行。如果不清除前一行或整个 txt，这可能吗？

```
void writeToFile(string str) {
    ofstream fileToWrite;
    fileToWrite.open("C:/Users/Lucas/Documents/apps/resultado.txt");
    if(fileToWrite.good()) {
        //write the new line without clearing the txt
                //fileToWrite << str won't work for this reason
    }
    fileToWrite.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:41:38.357

是的。向上看`std::ios_base::ate`和`std::ios_base::app`。

```
void write_to_file(std::string const &str) { 
    std::ofstream fileToWrite("C:/Users/Lucas/Documents/apps/resultado.txt", 
                              std::ios_base::app);
    fileToWrite << str << "\n";
} 
```

在这种情况下，两者之间的区别无关紧要，但这`ios_base::ate`意味着当您打开文件时，它位于末尾，因此您写入的内容会添加到末尾 - 但如果您愿意，您可以查找文件的较早部分文件并覆盖那里的内容。使用`ios_base::app`, 在您进行任何写入之前，它会自动搜索到末尾，因此您所做的任何写入都会附加到末尾，而不是覆盖任何现有数据。

# php - str_replace 与 array_keys/array_values 返回奇怪的结果

> ID：10437387
> 
> 赞同：2
> 
> 时间：2012-05-03T18:37:09.893
> 
> 标签：php, str-replace

出于某种奇怪的原因，下面的函数`11`在 input 时返回`2`，我希望它返回`1`。怎么了？

```
<?php 
function convert($v){

  $arr = array(
    2 => 1,
    21 => 1,

    3 => 2,
    6 => 2,
    11 => 2,
    12 => 2,

    4 => 3,
    14 => 3,
    19 => 3,

    9 => 5,

    1 => 11,
    10 => 11,

    22 => 12,
    23 => 13,
    14 => 14,
    );

  $ret = str_replace(array_keys($arr), array_values($arr), $v);
  return $ret;

}

echo convert(2); // echoes 11

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:48:35.663

您使用了错误的功能，请尝试[`strtr`](http://php.net/strtr)：

```
function convert($v){

  $arr = array(
    2 => 1,
    21 => 1,
    ...
    23 => 13,
    14 => 14,
    );

  $ret = strtr($v, $arr);
  return $ret;

} 
```

无论如何：如果您发现 PHP 函数有什么奇怪的地方，请访问它的手册页并阅读它，因为[`str_replace`](http://php.net/str_replace)给出了一个解释您的问题的具体示例：[示例 #2 潜在 str_replace() 陷阱的示例](http://php.net/str_replace#example-4479)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T18:47:06.097

这是因为`str_replace()`从左到右处理每个替换。因此，当它与`2`数组中的键匹配时，它会更改为`1`. 之后，它击中键`1`并更改为`11`. 作为一个简短的例子：

```
function convert($v) {

    $arr = array(
        1 => 2,
        2 => 3,
        3 => 'cat',
    );

    $ret = str_replace(array_keys($arr), array_values($arr), $v);
    return $ret;
}

echo convert(1); //cat is echoed 
```

所以在这种情况下，`1`去 a `2`，然后`2`去 a `3`，最后去`3`到`cat`。

# php - 如何将ajax中的javascript关联数组传递给php文件

> ID：10437391
> 
> 赞同：4
> 
> 时间：2012-05-03T18:37:27.810
> 
> 标签：php, javascript, ajax

我如何将数据（关联数组）传递给 php 文件。

```
 function ajax(url,data,callback)
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                xmlhttp.onreadystatechange = function() {
                    if ( xmlhttp.readyState === 4 ) {
                        callback( xmlhttp.responseText );
                    }
                }
            }
            xmlhttp.open("POST",url,true);
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.send(data);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T18:55:13.800

我读这个的方式，你在javascript中，你有一个javascript对象（javascript没有关联数组，只有数组和对象）。因此，无论您拥有什么数据，您都需要将其转换为字符串并通过 POST 或 GET 发送到您的 php 脚本。我建议将[JSON3](http://bestiejs.github.com/json3/)作为 polyfill 包含在内，以确保您`JSON.stringify`的页面上有（用于跨浏览器）。代码将是这样的：

```
var data = {
    someData: 'data',
    moreData: [
        'blah',
        'bleh'
    ]
};

var stringData = JSON.stringify( data );

// using jquery ajax for brevity (http://api.jquery.com/jQuery.ajax/)
$.ajax({
  type: "POST",
  url: "your-php-script.php",
  data: { data: stringData }
}); 
```

现在您的 php 脚本可以捕获该字符串并将其转换回 json 本身：

```
<?php
    $dataString = $_POST['data'];
    $data = json_decode($dataString); 
```

希望这就是你要找的。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:40:48.737

您可以使用 PHP 的[JSON 函数](http://php.net/manual/en/ref.json.php)来实现这一点。它将数组编码/解码为 javascript 可以处理的符号。

# jquery - 将 div id 的 jQuery 脚本转换为循环 div 类

> ID：10437392
> 
> 赞同：0
> 
> 时间：2012-05-03T18:37:32.810
> 
> 标签：jquery, class, loops, click, hover

下面的脚本将数组中的随机颜色应用于 div id，并在悬停时更改颜色。我想对其进行修改，使其循环遍历 div 类并将随机颜色应用于页面上的所有类。显然，点击功能必须由 id 完成，但我想有一种循环遍历 div 类的方法，这样它们都有不同的随机颜色，在悬停时会发生变化。

有人可以帮忙吗？

谢谢

缺口

```
$(document).ready(function() {
  var test = $("#example").text().split('');

    var normal = generateColors(test);
    var hover = generateColors(test);
    $("#example").html(normal);

    $("#example").hover( 
      function(event) { $("#example").html(hover) }, 
      function(event) { $("#example").html(normal) });

    $("#example").click(function() { 
    location.href = "http://www.google.co.uk"; 
    });

});

function generateColors(characters) {
    var result = "";
    var i = 0;
    for(i=0; i < characters.length; i++) {
        result += "<span style='color:"+getColor()+"'>"+characters[i]+"</span>";
    }

   return result;
}        

function getColor() {
    var colList = ['#7EA404', '#14AFB0','#B05718', '#B0A914', '#B01617','#902BB0', '#B003A2', '#4A429C','#33821E', '#226795', '#D0B600','#886833'];

    var i = Math.floor((Math.random()*colList.length));
  return colList[i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:57:20.540

要应用颜色并将它们存储在不同的元素上，您可以执行以下操作：

```
$(".example").each(function() {
    var text = $(this).text().split(''),
        normal = generateColors(text),
        hover = generateColors(text);

    $(this).html(normal).data('hover', hover).data('normal', normal);
});

$(".example").hover( 
    function() {
        $(this).html($(this).data('hover'));
    }, 
    function() { 
        $(this).html($(this).data('normal'));
}); 
```

在单击时使用 location.href 设置每个链接似乎是一个非常糟糕的主意，但这取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:41:44.253

> 显然，点击功能必须由 id 完成

我不确定为什么会这样。

如果您愿意，可以通过类将点击函数应用于 jQuery 对象数组：

```
$('.myDivs').click(...) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-03T18:57:09.990

你在找类似的东西吗

```
$('div').each(function(){
  //code
}) 
```

# prolog - Prolog - 如何仅断言/创建数据库一次

> ID：10437395
> 
> 赞同：3
> 
> 时间：2012-05-03T18:37:41.073
> 
> 标签：prolog, rule

```
resultList(UsersQuery):-
    question(X,H),
    write(H),
    myintersection(H,UsersQuery,Match,TotalQuestionKeywords),
    Percent is Match/TotalQuestionKeywords*100,
    write('Question: '),
    write(X),nl,write('Quality: '), write(Percent),write('%'),nl,

    /* please look at this part
    Percent>=50,
    assert(listofQuestions(Percent,Question)),
    write(Percent),write(Question),nl,
    fail.
resultList(_). 
```

我想填充一个名为“listofQuestions”的事实数据库。一切正常，但我断言的东西留在内存中。所以，如果我再次运行我的程序，我会在“问题列表”中添加相同的事实。

我只想拥有一组数据。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:15:15.973

为断言创建一个单独的谓词，检查事实是否尚未断言：

```
assertThisFact(Fact):-
    \+( Fact ),!,         % \+ is a NOT operator.
    assert(Fact).
assertThisFact(_). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T20:05:18.610

也许`retractall/1`在你重新运行你的程序之前做。

# actionscript-3 - 如何在静态上下文中使用内部类？

> ID：10437399
> 
> 赞同：4
> 
> 时间：2012-05-03T18:38:00.260
> 
> 标签：actionscript-3, flash

我想使用内部类来创建对象层次结构以避免混乱我当前项目的 API。基本思想是使用这样的东西：

```
package foo {
    public class Bar {
        public static const BLUBB:Blubb = new Blubb();
        public static const ZONK:Zonk = new Zonk();
    }
}
class Blubb {
    public const GNARF:Gnarf = new Gnarf();
    public const BLUBB_BLAH:String = "blubb-blah";
}
class Gnarf {
    public const GNARF_BLAH:String = "gnarf-blah";
}
class Zonk {
    public const ZONK_BLAH:String = "zonk-blah";
} 
```

这样我就可以像使用它一样`someFunction(Bar.BLUBB.GNARF.GNARF_BLAH);`

但是，显然 Actionscript 不太喜欢这种结构（尽管 FDT5 编译它时没有给出任何关于它的问题）并给我以下运行时错误：

```
Exception fault: TypeError: Error #1007: Instantiation attempted on a non-constructor.
    at foo::Bar$cinit()
    at global$init()
    at ... 
```

堆栈跟踪的其余部分导致我第一次尝试访问`Bar`.

真的不可能以这种方式使用内部类，还是我只是错过了一些秘密的巫术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:19:57.893

我无法让它按您的意愿工作，但我发现了一些可能有用的东西：

```
package foo {
    public class Bar {
        public const BLUBB:Blubb = new Blubb();
        public const ZONK:Zonk = new Zonk();
    }
}
class Gnarf {
    public const GNARF_BLAH:String = "gnarf-blah";
}
class Blubb {
    public static const GNARF:Gnarf = new Gnarf();
    public const BLUBB_BLAH:String = "blubb-blah";
}
class Zonk {
    public const ZONK_BLAH:String = "zonk-blah";
} 
```

我不得不取出 Bar 变量的静态修饰符，但我发现*只要在*Blubb 上方定义 Gnarf，我就可以将“静态”添加到 Blubb.GNARF。基于此，我尝试将所有三个内部类都移到包定义之上，但事实证明这是不允许的。（此外，您不能直接从另一个文件访问内部类，因此在其中一个文件中包含静态变量本身并没有用。）

我还尝试将 Bar.BLUBB 设为静态 var 并在静态初始化块而不是内联中对其进行初始化，但这并没有什么区别。我认为，如果您想为静态变量使用某种类类型，则必须在单独的文件中定义该类类型。

# c# - WPF TreeView 刷新的性能

> ID：10437400
> 
> 赞同：0
> 
> 时间：2012-05-03T18:38:03.027
> 
> 标签：c#, wpf, performance, treeview

我有一个后台工作人员，我用它来填充我的 TreeView 绑定到的集合。在后台工作程序运行时，我让 GUI 显示一个进度对话框。我在后台工作人员的 RunWorkerCompleted 事件中关闭了进度对话框。这一切都很好，正如预期的那样。

问题是，在进度对话框关闭后，TreeView 通常仍需要一段时间才能更新。有时，已将大量数据添加到 TreeView，因此刷新可能需要 10 秒左右。这会导致用户感到沮丧和困惑。

*   为什么 TreeView 刷新需要这么长时间？
*   有没有办法加快速度？
*   或者要知道刷新/重绘何时完成，以便我可以关闭进度对话框，而不是在我的后台工作人员完成时？

更新：我打开了虚拟化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:09:19.007

您是否尝试过性能分析您的应用程序？有几个工具可以帮助您做到这一点。他们将让您查看为您的更新过程调用了哪些方法，并且您可能能够发现一些仍在执行更新过程的代码。

链接 [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

[http://www.yourkit.com/](http://www.yourkit.com/)

[http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

# c++ - 错误 LNK2019 致命错误 C

> ID：10437401
> 
> 赞同：2
> 
> 时间：2012-05-03T18:38:03.950
> 
> 标签：c++

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)
> [简单模板类的“未定义符号”链接器错误](https://stackoverflow.com/questions/999358/undefined-symbols-linker-error-with-simple-template-class)

**队列.h**

```
#include<iostream>
using namespace std;

template <class t>
class queue {  

    public:  
        queue(int=10);  
        void push(t&);  
        void pop();  
        bool empty();    

    private:  
        int maxqueue;  
        int emptyqueue;  
        int top;  
        t* item;  
}; 
```

**队列.cpp**

```
#include<iostream>

#include"queue.h"
using namespace std;

template <class t>
queue<t>::queue(int a){
    maxqueue=a>0?a:10;
    emptyqueue=-1;
    item=new t[a];
    top=0;
}

template <class t>
void queue<t>::push(t &deger){

    if(empty()){
        item[top]=deger;
        top++;
    }
    else
        cout<<"queue is full";
}
template<class t>
void queue<t>::pop(){
    for(int i=0;i<maxqueue-1;i++){
        item[i]=item[i+1];
    }
    top--;
    if(top=emptyqueue)
        cout<<"queue is empty";
}
template<class t>
bool queue<t>::empty(){
    if((top+1)==maxqueue)
        return false
    else
        return true 
} 
```

**主文件**

```
#include<iostream>
#include<conio.h>

#include"queue.h"
using namespace std;

void main(){
    queue<int>intqueue(5);
    int x=4;
    intqueue.push(x);

    getch();
} 
```

我已经使用模板创建了队列。编译器给出了这个错误。我无法解决这个问题。

> 1>main.obj：错误 LNK2019：未解析的外部符号“public：void __thiscall queue::push(int)”(?push@?$queue@H@@QAEXH@Z) 在函数 _main 1>main.obj 中引用：错误 LNK2019：函数 _main 1>c:\users\pc\documents\ 中引用的未解析外部符号“public: __thiscall queue::queue(int)”(??0?$queue@H@@QAE@H@Z) visual studio 2010\Projects\lab10\Debug\lab10.exe : 致命错误 LNK1120: 2 unresolved externals

[编辑：这里](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)给出了解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:41:55.340

将所有模板相关的队列实现放在头文件中。就像：[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:51:17.113

模板类不能分成 .cpp 和 .h 文件，因为编译器需要实现的副本才能从模板生成所需的类。

您需要将 queue.cpp 的内容移动到 queue.cpp

# windows-phone-7 - 将图像上传到 Azure

> ID：10437403
> 
> 赞同：-1
> 
> 时间：2012-05-03T18:38:11.113
> 
> 标签：windows-phone-7, azure, windows-phone

作为个人项目的一部分，我希望我可以从我的 Windows Phone 发送一张图片到存储 Azure。

我可以用我的手机拍照，但我不知道如何发送到存储

你能帮助我吗？教程，文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:40:45.307

我想你会在 Channel9 上找到你的快乐，这个视频准确地解释了你想要做什么（并且在 4 分钟内！）；）

[在 Windows Phone 上使用 Windows Azure 存储](http://channel9.msdn.com/Events/windowsazure/learn/Using-Windows-Azure-Storage-on-Windows-Phone)

# c++ - boost::split 在字符串的开头和结尾留下空标记 - 这是理想的行为吗？

> ID：10437406
> 
> 赞同：11
> 
> 时间：2012-05-03T18:38:30.847
> 
> 标签：c++, boost, c++11, split

由于我在文档中找不到任何关于此的[内容](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo.html)，我想我在这里问它。我有以下程序（C++ 11）：

```
#include <iostream> 
#include <boost/algorithm/string.hpp>

using namespace std;
using namespace boost;

int main () {
    string tmp = " #tag #tag1#tag2  #tag3 ####tag4   ";
    list<iterator_range<string::iterator> > matches;
    split( matches, tmp, is_any_of("\t #"), token_compress_on );

    for( auto match: matches ) {
            cout << "'" << match << "'\n";
    }
} 
```

输出是：

```
''
'tag'
'tag1'
'tag2'
'tag3'
'tag4'
'' 
```

我原以为该`token_compress_on`选项会删除所有空标记。例如，解决方案是使用`boost::trim_if`. 不过我想知道这是否是 boost::split 的期望行为，为什么会这样？

（g++ 4.6.3，提升 1.48）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:56:00.040

如果`eCompress`参数设置为`token_compress_on`，则将相邻的分隔符合并在一起。否则，每两个分隔符分隔一个标记。

[这里](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/algorithm/split_id820181.html)

它不会删除标记，只会合并它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T18:46:00.803

该行为是有意的，因为您可以从拆分版本重新创建字符串（完整的起始和尾随空格）。Boost 不知道该空格对您是否重要（例如，某些文件格式可能会强制使用前导空格/特定空间计数）。

如果确实需要删除前导/尾随空格，则应该`trim_if`或按原样进行。`trim`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-12T01:52:10.920

`boost::split`总是返回`n + 1`标记，其中`n`是输入字符串中的分隔符数。因此，当您将一个空字符串传递给它时，当它返回 1 个令牌时不要感到惊讶。

其背后的理由很简单。假设您正在解析一个 CSV 文件。无论最后一个标记是否为空，您都需要获得完全相同数量的元素。

删除空标记比猜测它们是否应该出现在结果中要容易得多。[信用](http://boost.2283326.n4.nabble.com/Result-of-boost-split-against-empty-string-changed-in-post-1-45-release-tp4631147p4631393.html)

这种行为类似于python

```
>>> len("".split(','))
1 
```

# java - 简单的 RMI 回调示例

> ID：10437408
> 
> 赞同：6
> 
> 时间：2012-05-03T18:38:31.360
> 
> 标签：java, callback, rmi

有人可以给出一个简单的 RMI 回调示例 Hello World 吗？我一直在尝试研究它，但我似乎无法找到我理解的一个。我不明白回调是/做什么。

这是我目前的 Hello World RMI，如果它有帮助的话......

界面

```
package example.hello;

import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Hello extends Remote {
    String sayHello() throws RemoteException;
} 
```

客户

```
package example.hello;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class Client {

    private Client(){}

    public static void main(String[] args){

        String host = (args.length < 1) ? null : args[0];

        try{
            Registry registry = LocateRegistry.getRegistry(host);
            Hello stub = (Hello) registry.lookup("Hello");
            String response = stub.sayHello();
            System.out.println("response: " + response);
        } catch (Exception e) {
            System.err.println("Client exception: " + e.toString());
            e.printStackTrace();
        }
    }

} 
```

服务器

```
package example.hello;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;

public class Server implements Hello {

    public Server(){}

    @Override
    public String sayHello() {
        System.out.println("responded!");
        return "Hello, world!";
    }

    public static void main(String[] args) {

        try{
            Server obj = new Server();
            Hello stub = (Hello) UnicastRemoteObject.exportObject(obj, 0);

            // Bind the remote object's stub in the registry
            Registry registry = LocateRegistry.getRegistry();
            registry.bind("Hello", stub);

            System.err.println("Server ready");
        } catch (Exception e) {
            System.err.println("Server exception: " + e.toString());
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T19:26:05.420

我不是 RMI 方面的专家，但我可以告诉你的是，你可以从“David and Michael Reilley”中搜索“Java Network Programming and Distributed Computing”一书。您将能够找到从第 278 页开始的 RMI CALLBACK 实现的一个很好的示例！

作者定义了一种理解它的好方法，所以我认为复制/粘贴比尝试自己制作更好，这里是：

*   “理解回调的最简单方法是想一通电话。假设您想知道股票价格是否达到某个水平，并要求您的经纪人在达到某个水平时回电。当经纪人（事件）注意到股票价格反映了你的参数，他或她给你回电，通知你新的价格。那是一个回调。”

在默认实现中，RMI 只允许 CLIENT 与 SERVER 之间的通信，请求服务器主机中远程服务（远程对象）的操作。您可以使用回调方法而不是让您的服务器与您的客户端对话！

太好了！想象一下，如果您有一台服务器，您想检查它是否在线（或者如果没有删除/关闭）客户端！您必须请求持续使用一个远程对象，该对象应该返回一些布尔值（例如），告诉您这实际上是在线的。

那将是可怕的！因为你会失去一些网络带宽，所以一次又一次地请求服务器，一次又一次……导致一些连接池！

那应该很有用，在这些情况下使用 CALLBACK ;-)

我希望您能通过我的回答稍微了解回调是/做什么。

此致，

# c# - RestSharp：执行异步 从不回应

> ID：10437410
> 
> 赞同：3
> 
> 时间：2012-05-03T18:38:43.900
> 
> 标签：c#, asynchronous, asp.net-web-api, restsharp

我正在尝试使用 发出异步获取请求`ExecuteAsync<T>`，但它从不响应。令我困惑的是，`ExecuteAsync`同步方法`Execute`和`Execute<T>`.

这是我的代码：

```
var restClient = new RestClient("http://localhost:44268/api/");
var request = new RestRequest("jobs/{id}", Method.GET);
request.AddUrlSegment("id", "194");

// works
var req1 = restClient.Execute(request).Content;

// works
var req2 = restClient.Execute<Job>(request).Content;

// works
var req3 = restClient.ExecuteAsync(request, (restResponse) =>
{
    var test = restResponse.Content;
    Console.WriteLine(test);
});

var req4 = restClient.ExecuteAsync<Job>(request, (restResponse) =>
{
    // this code is never reached
    var test = restResponse.Content;
    Console.WriteLine(test);
}); 
```

它成功*地*调用了 API，但它永远不会回调。为什么？难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:58:24.830

`ExecuteAsync`是异步的。

这意味着对它的调用会立即返回，而无需等待响应。

然后您的程序将照常继续。如果这是一个控制台应用程序并且执行到您的`Main`方法结束，则整个程序将退出。

所以，你有一个竞争条件。大多数情况下，您的程序将在延续（lambda 回调）有机会运行之前退出。

尝试在方法`Console.ReadLine();`结束时调用`Main`以防止提前退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T14:26:04.093

通过升级到最新版本的 RestSharp 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T11:41:14.397

```
public  Task<IRestResponse> ExecuteAsync<T>(RestRequest request, RestClient client)
{
  EventWaitHandle executedCallBack = new AutoResetEvent(false);
  TaskCompletionSource<IRestResponse> tcs = new TaskCompletionSource<IRestResponse>();

IRestResponse res = new RestResponse();   
    try
    {
      var asyncHandle = client.ExecuteAsync<RestResponse>(request, response =>
        {
          res = response;
          tcs.TrySetResult(res);
          executedCallBack.Set();
        });

    }
    catch (Exception ex)
    {
      tcs.TrySetException(ex);
    }

    return tcs.Task;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T05:41:44.447

```
IRestResponse loginResponse = new RestResponse();
                    TaskCompletionSource<IRestResponse> tcs = new TaskCompletionSource<IRestResponse>();

//Task task = new Task(() => {client.ExecuteAsync<RestResponse>(request, tcs.SetResult);});// Lambda and anonymous method  
Task task = new Task(() =>client.ExecuteAsync<RestResponse>(request, tcs.SetResult)); // Lambda and named method                    
task.Start();
loginResponse = await tcs.Task; 
```

# c# - 如果它们已经存在，如何检查插入新值？

> ID：10437415
> 
> 赞同：-3
> 
> 时间：2012-05-03T18:39:02.343
> 
> 标签：c#, asp.net

我有一个 gridview 和 sqldatasource 来将数据绑定到 gridview。

*   我在数据库中有 3 列：姓名、年龄、生日。
*   我有 3 个文本框和一个按钮，用于在数据表 gridview 中添加带有来自文本框的值的新行。

当我单击添加包含这些信息的新行的按钮时，我需要检查“名称”文本框中的值是否已经存在于“名称”列的数据表中，如果是，则取消更新并且用户是要求输入另一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:15:03.683

您最好在表中的列名上定义唯一索引。您可以让代码在不检查名称是否存在的情况下执行。如果名称已经存在，它将返回错误（您可以捕获并很好地显示给用户）；如果该名称在表中不存在，则成功。

我不知道您使用哪个数据库，但是这样的东西应该适用于大多数数据库。

```
CREATE UNIQUE INDEX index_name
ON your_table (name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:12:55.303

根据我对您问题的理解，最简单的解决方案是在插入之前运行快速查询。

```
SELECT COUNT(*) FROM tblName WHERE Name = @Name 
```

而且，如果该值为零，则您的数据库中没有与该名称匹配的任何内容。或者，如果您想在选择时找到匹配名称的 ID，您可能需要设置一个存储过程。有一个初始查询匹配名称的返回值，并且：如果（@ReturnValue 为空），执行插入并返回值

```
SELECT SCOPE_IDENTITY() 
```

# c# - 时间：2019-06-10 标签：c#decimal to string for currency

> ID：10437416
> 
> 赞同：22
> 
> 时间：2012-05-03T18:39:05.423
> 
> 标签：c#, decimal, currency, tostring

要显示货币，我们这样做：

```
ToString("0.##") 
```

对于价值`5.00`，输出是：

```
5 
```

对于价值`5.98`，输出是：

```
5.98 
```

对于价值`5.90`，输出是：

```
5.9 
```

我需要第三种情况得出 2 个小数点，例如：

```
5.90 
```

我怎样才能做到这一点而不影响其他结果？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T18:41:26.317

尝试：

```
value.ToString("#,##0.00") 
```

要不就：

```
value.ToString("C") 
```

我知道只有当两者都不为零时，才能扩展所有小数点后两位的内置方法。可能会为此使用一个`if`声明。

```
if (s.EndsWith(".00"))
    s = s.Substring(0, s.Length - 3); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-03T18:52:56.030

我知道这并没有为您提供解决问题的格式，但它是解决问题的简单解决方案。

```
(5.00).ToString("0.00").Replace(".00","");  // returns 5
(5.90).ToString("0.00").Replace(".00", ""); // returns 5.90
(5.99).ToString("0.00").Replace(".00", ""); // returns 5.99 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-03T19:03:56.093

您可以使用扩展方法，如下所示：

```
public static string ToCurrencyString(this decimal d)
{
    decimal t = Decimal.Truncate(d);
    return d.Equals(t) ? d.ToString("0.##") : d.ToString("#, ##0.00")
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-03T18:44:31.553

`#`表示如果没有数字则留空 0 表示如果没有数字则输入 0

> ToString("0.00")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-17T18:22:05.640

不知道我是否遗漏了什么，但你不能这样做：

```
decimal moneyvalue = 1921.39m;
string html = String.Format("Order Total: {0:C}", moneyvalue);
Console.WriteLine(html); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-12T08:01:47.487

只需使用`myDecimal.ToString("N")`，

使用“N”参数会将小数转换为字符串，显示的小数位数将由您的 SO 设置定义。

[https://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimaldigits(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimaldigits(v=vs.110).aspx)

# java - 通过 Java 加载文件而不使用新的 URL()

> ID：10437418
> 
> 赞同：1
> 
> 时间：2012-05-03T18:39:19.347
> 
> 标签：java, url, dropbox

所以我正在制作一款小游戏，而我所在的市场非常……竞争激烈……竞争如此激烈，以至于将它免费泄露给公众是非常普遍的。要泄露游戏，此人必须移除 HWID 系统和 Killswitch 系统。为此，最常用的方法是在整个项目中搜索“新 URL”并检查它创建的所有链接，然后在需要时将其删除。

这必须只使用默认的 Java 类，我不能使用任何库或其他可链接下载。

我的问题是：“是否可以在不使用 URL 类的情况下向我的保管箱文件发出请求以读取文本文档？”

不确定我是否涵盖了我需要涵盖的所有内容，因此如果您感到困惑，我可以提供更多信息。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:16:07.893

这真的是古老的“如何保护我的 Java 应用程序免受 X 攻击？”。

事实是你不能。任何有足够时间和工作的人都可以拆开您的 Java 应用程序并将其重新组合在一起。你当然可以使用一些很棒的混淆器，这对于任何想要快速完成它的人来说都是不切实际的。

过了那一点，你问了一个有点微不足道的问题。这是“我如何隐藏'新网址'”。我假设您最终将依赖 urlconnection 类来实际使用 url。这可以处理大量优化，您可以添加更多层，例如将类名和 url 存储为字节数组以及许多其他内容。它也可以与构造函数和类的一些缓存有关。**我真的建议你不要使用这个！**

```
public static URLConnection getConnection() {
    try {
        Class<?> cla = Class.forName("java.net.URL");
        return (URLConnection) cla.getMethod("openConnection", new Class[0]).invoke(cla.getConstructor(String.class).newInstance("http://somtopsecereturl.tld"), new Object[0]);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    }
    return null;
} 
```

您当然可以继续向下堆栈并通过反射调用进行实际读取，因此您永远不会引用真实的对象类型，因此很难找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:28:06.350

一个相当低技术的混淆：创建一个包含 URL 实例的类：

```
class myFoo {
    private URL url;
    myFoo (String s)  throws MalformedURLException {
        this.url = new URL(s);
    }
    public getHatSize() {
        return this.url;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T19:20:03.767

您可以改用 URI。

```
URI uri = new URI("http://...");
uri.toURL().openConnection(): 
```

# php - 如何传递一组 PDO 参数但仍指定它们的类型？

> ID：10437423
> 
> 赞同：18
> 
> 时间：2012-05-03T18:40:00.357
> 
> 标签：php, mysql, pdo

```
$sql = "SELECT * FROM table WHERE id LIKE CONCAT('%', :id, '%')
LIMIT :limit1, :limit2"; 
```

我想仍然像这样使用数组输入：

```
$stmt->execute($array); 
```

否则我不能重用相同的方法来执行我的查询。

同时， :limit1 和 :limit2 不起作用，除非像这样放入：

```
$stmt->bindParam(':limit1', $limit1, PDO::PARAM_INT); 
```

我试图同时做这两个，但它没有与 bindParams 一起执行：

```
$stmt->bindParam(':limit2', $limit2, PDO::PARAM_INT);
$stmt->execute($array); 
```

周围的方法是什么？

我以为我可以扩展 PDOStatement 并添加一个新方法“bindLimit”或其他东西，但我不知道 PDO 使用什么内部方法将参数绑定到变量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T19:24:24.313

如果您关闭 的默认设置`PDO::ATTR_EMULATE_PREPARES`，那么它将起作用。我刚刚发现 mysql 默认情况下该设置处于启用状态，这意味着您实际上从未使用过准备好的语句，php 在内部为您创建动态 sql，为您引用值并替换占位符。是的，一个主要的wtf。

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$stmt = $pdo->prepare($sql);
$stmt->execute(array(5)); //works! 
```

由于性能原因，默认情况下会模拟准备。

另见[**PDO MySQL：使用 PDO::ATTR_EMULATE_PREPARES 与否？**](https://stackoverflow.com/questions/10113562/pdo-mysql-use-pdoattr-emulate-prepares-or-not)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T19:10:32.653

如文档中所述[`PDOStatement::execute`](http://www.php.net/manual/en/pdostatement.execute.php)：

> ***`input_parameters`***
> 
> > 一个包含与正在执行的 SQL 语句中的绑定参数一样多的元素的值数组。所有值都被视为`PDO::PARAM_STR`。

在大多数情况下，这完全没有被注意到，因为 MySQL 的[隐式类型转换](http://dev.mysql.com/doc/en/type-conversion.html)处理其余部分（但如果 MySQL 使用特别奇怪的连接字符集，它可能会导致一些不良行为，因为将数字字符串转换回它们的数值可能不会给出预期结果）。

在您的情况下，MySQL 正在尝试执行`LIMIT`具有字符串参数的子句。虽然它*可以*尝试使用其隐式类型转换来解决这个问题，就像它在其他任何地方一样，字符串出现在整数应该出现的位置，[但它根本不会打扰](http://sqlfiddle.com/#!2/d41d8/410)，而是哭着跑掉。

因此，您需要告诉 PDO 这些特定参数是整数。因为即使 PHP 也不知道它的变量是什么类型，我相信唯一的方法是直接将它们绑定到[`PDOStatement::bindParam`](http://www.php.net/manual/en/pdostatement.bindparam.php)或者[`PDOStatement::bindValue`](http://www.php.net/manual/en/pdostatement.bindvalue.php)像你正在做的那样（尽管将参数指定为简单的强制转换并不是*绝对*必要的）为PHP 的其他毫无头绪的类型系统提供了足够的支持）。`$data_type``(int)``$variable`

至于 PDO 用于将参数绑定到变量的内部方法，请看一下[`really_register_bound_param()`](https://github.com/php/php-src/blob/master/ext/pdo/pdo_stmt.c#L302)（不出所料，没有暴露于 PHP，因此您将在 C 中获得很多乐趣）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:10:30.593

为什么当它们不是用户输入时绑定限制值？

```
$start = 0;
$limit = 20;
$sql = "SELECT * FROM table WHERE id LIKE CONCAT('%', :id, '%')
    LIMIT $start, $limit"; 
```

即使`$start`和`$limit`是根据用户输入确定的，例如从 a `$_GET`，您也可以使用 测试该值`is_int()`。

# semaphore - 了解信号量

> ID：10437428
> 
> 赞同：3
> 
> 时间：2012-05-03T18:40:20.947
> 
> 标签：semaphore, critical-section

我正在阅读“操作系统概念”中的信号量（对于那些知道它的人），我以为我完全理解了信号量，直到我读到这段话：

> 信号量的关键方面是它们是原子执行的。我们必须保证没有两个进程可以同时对同一个信号量执行等待和信号操作。

并且：

> 如果硬件不提供任何特殊的原子指令，我们可以使用任何软件解决临界区问题，其中临界区由等待和信号过程组成。

这段话是指面对`Signal`和`Wait`操作必须是原子的。我认为信号量的全部目的是在任何给定时间只让一个进程进入关键部分 - 如果我必须使用另一种算法（如面包店算法），为什么我还需要信号量？

我意识到我的问题可能令人困惑。如果是，那只是因为主题对我来说还很模糊，所以即使问一个问题也有点困难。

很想阅读任何澄清...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:47:05.207

我认为您在区分信号量和互斥量时遇到了麻烦。二进制信号量可以以与互斥锁相同的方式实现，但它们实际上用于不同的目的。信号量保护资源，而互斥锁严格保护代码块。区别往往是微妙的。

使用信号量，您会遇到诸如计数信号量之类的变化，因此只有一个进程可以访问资源的想法并不总是正确的。您可能希望阻止对一个进程或线程的写入，但允许从多个（读取器/写入器锁）读取。

我建议您查看有关该主题的维基百科文章。它实际上非常好。
[http://en.wikipedia.org/wiki/Semaphore_（编程）](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T19:14:30.373

原子性是实现互斥的方式。假设您一次只希望一个线程进入代码的关键部分。你是怎样做的？好吧，您有一个“锁定/解锁”指示器。并且您强制线程在进入代码的关键部分之前将指示器从“解锁”更改为“锁定”。

但是，是什么阻止了两个线程都看到指示器“解锁”，同时将其切换为“锁定”，然后同时执行代码的关键部分？而答案是，从“解锁”切换到“锁定”的操作必须是原子的。也就是说，它必须同时发生，所以两个线程不可能都成功地将指示器更改为“锁定”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:46:45.240

这是在谈论信号量的实现，而不是它们的使用。如果硬件支持信号量之类的原子操作，它们将在用户调用`Signal`/时使用`Wait`。如果硬件不支持，信号量实现本身会寻找其他方法来确保相同的功能。

这对用户来说是透明的，只是没有这种支持的系统在调用`Signal`和时会花费更长的时间`Wait`。（此外，大多数（如果不是全部）现代硬件平台都支持信号量的原子操作。）

如果你想要互斥，那么你用来获得它的机制必须是原子的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T07:54:35.940

*将信号量*想象成*夜总会*的*保镖*。俱乐部允许有特定数量的人同时进入。如果俱乐部已满，则不允许任何人进入，但一旦一个人离开，另一个人可能会进入。

 *这只是一种限制特定资源的消费者数量的方法。例如，限制应用程序中同时调用数据库的数量。

[来源：](https://stackoverflow.com/a/40473/730807)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-18T18:03:12.463

我在课堂上向教授问了同样的问题，他的回答是“把信号量想象成一把锤子，一旦你有了一把锤子，你就可以用它做很多事情，而在硬件或软件解决方案的原子支持下相互排斥，例如彼得森或面包店是有限的”。*

# ffmpeg - FFMpeg 连续实时图像到视频编码

> ID：10437430
> 
> 赞同：5
> 
> 时间：2012-05-03T18:40:24.713
> 
> 标签：ffmpeg, unity3d, unityscript

我正在尝试使用 FFMpeg 获取图像文件流并将它们转换为视频。现在，我已经成功地做到了，但前提是我已经捕获了所有我想要的图像。我想做的是将图像保存到磁盘（实时录像机）时将其转换为视频。目前，当我在仍在抓取帧的同时调用 FFMpeg 时，它只对调用时存在的图像数量进行编码。如果每次抓取图像时都调用 FFMpeg，它会用大量进程淹没 CPU。理想情况下，FFMpeg 将继续对图像进行编码，直到没有更多图像被捕获（IE，检查自第一次调用以来是否有更多图像文件）。有没有我想念的关于 FFMpeg 的论点，或者这是不可能的？或者是通过弄乱图书馆来做到这一点的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:48:46.877

一种我不喜欢的解决方案是：在 Mpeg2 VOB 中编码基本视频。每 X 帧编码最后 X 帧的新视频。由于 VOB 文件没有文件头，因此您只需将新文件的二进制文件附加到现有 VOB 即可。FFMPEG 只需要在几帧上运行。其他一些视频格式也可能有效。

# objective-c - AFNetworking - 向 REST 服务发出 XML POST 请求？如何形成 NSDictionary 参数？

> ID：10437432
> 
> 赞同：2
> 
> 时间：2012-05-03T18:40:30.150
> 
> 标签：objective-c, xml, cocoa, rest, afnetworking

我正在尝试创建对 REST API 的 POST 请求以发布新的时间条目。post请求所需的XML结构如下：

```
<time-entry>
  <person-id>#{person-id}</person-id>
  <date>#{date}</date>
  <hours>#{hours}</hours>
  <description>#{description}</description>
</time-entry> 
```

使用 AFNetworking 是否仅通过将参数的 NSDictionary 传递给 POST 请求就在幕后完成 XML 编码？到目前为止，这是我的代码：

从我的 APIClient：

```
-(void)postTimeEntry:(TLActiveWork *)work {

[self setAuthorizationHeaderWithUsername:[self.activeUser username] 
   password:[self.activeUser password]];

// Most of the following is static data. Just trying to get a successful POST at the 
// moment.
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSString stringWithFormat:@"%@",[[self activeUser] personId]], @"person-id",
                        [NSString stringWithFormat:@"%@",[NSDate date]], @"date",
                        @"1", @"hours",
                        @"testing...!", @"description",
                        nil];

NSDictionary *wrapper = [NSDictionary dictionaryWithObjectsAndKeys:
                         params, @"time-entry",
                         nil];

 NSLog(@"Params: %@", wrapper);

// AFNetworking call!

[self postPath:[NSString stringWithFormat:@"/projects/%@/time_entries.xml",
   [[work project] projectId]] parameters:wrapper 
   success:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSLog(@"-----SUCCESS!!!-----");

} failure:^(__unused AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"failure: %ld - %@", [operation.response statusCode], 
           [error description]);
}];
} 
```

是的。我的 APIClient 操作通过以下方式为 XML 配置：

```
[self registerHTTPOperationClass:[AFXMLRequestOperation class]]; 
```

现在，每次我尝试使用此代码进行 POST 时，我总是会收到 422 响应代码失败，我认为这意味着传递的实体无法处理。[https://stackoverflow.com/a/3291292/312411](https://stackoverflow.com/a/3291292/312411)

我认为我的问题只是没有通过 NSDictionary 参数传递正确构建帖子的 XML 吗？

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T08:10:02.840

虽然我的回答不及时，但我希望它可以帮助遇到这个问题的其他人。下面是一个如何`XML POST`使用`AFNetworking`.

```
AFHTTPClient *HTTPClient = [[AFHTTPClient alloc] initWithBaseURL:@"https://stackoverflow.com"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:HTTPClient.baseURL];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[[NSFileManager defaultManager] contentsAtPath:[[NSBundle mainBundle] pathForResource:@"TheNameOfTheXMLFileToSend" ofType:@"xml"]];

AFHTTPRequestOperation *operation = [HTTPClient HTTPRequestOperationWithRequest:request 
success:^(AFHTTPRequestOperation *operation, id responseObject)
{
     // The server responded without an error.
} 
failure:^(AFHTTPRequestOperation *operation, NSError *error) 
{
    // The server responded with an error.
}];

[HTTPClient enqueueHTTPRequestOperation:operation]; 
```

# java - 无法在模拟器上从 developer.android.com 启动蓝牙聊天示例应用

> ID：10437433
> 
> 赞同：2
> 
> 时间：2012-05-03T18:40:37.023
> 
> 标签：java, android, eclipse, bluetooth, emulation

我已经从现有的 android 2.3 蓝牙聊天示例构建了一个项目，我知道模拟器不支持蓝牙。

早些时候，我能够在模拟器上运行该应用程序。这些功能不起作用，但我至少能够看到它正在运行。我可以看到用户界面和所有内容。

但是突然之间，今天当我尝试同一个应用程序时，我收到一条错误消息`bluetooth is not available`并退出。

我不知道eclipse中是否有任何设置被错误地改变了，但是有人可以帮助我让它以某种方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:06:37.137

您一定是在使用早期的 SDK 版本的应用程序，它没有检查系统中是否缺少蓝牙支持......

我正在运行演示的 2.1 SDK 版本，并且在那里进行了检查。

你有两个选择：

1) 找到之前用于早期 SDK 的相同演示代码，

2）进入代码（bluetoothChat 类，onCreate() 方法）并注释掉这段代码片段：

```
 // Get local Bluetooth adapter
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
    } 
```

实际上——如果你只是注释掉“finish();” 应该允许应用程序继续运行，同时仍显示警告的行。

# javascript - 删除 cookie 的按钮

> ID：10437436
> 
> 赞同：0
> 
> 时间：2012-05-03T18:40:46.250
> 
> 标签：javascript, html, button

> **可能重复：**
> [使用 JavaScript 清除所有 cookie](https://stackoverflow.com/questions/179355/clearing-all-cookies-with-javascript)

我有`index.html`，我有一个`iframe`

我也有这个按钮，它应该清除 cookie。

虽然它没有。

```
<input type="button" value="Clear Session" onclick="deleteAllCookies()" /> 
```

我正在尝试这个按钮，但我似乎无法让它在我的 html 文档中工作。? 有什么好的建议吗？

此致

维克

# android - Android java.lang.NoClassDefFoundError 使用 JODA 库

> ID：10437438
> 
> 赞同：5
> 
> 时间：2012-05-03T18:40:51.450
> 
> 标签：android, date, jar, jodatime

我被困在一个我认为很容易解决的问题上大约 2 个小时。我正在为 android 平台构建一个自定义日期时间选择器，并且由于标准 java.util.Calendar 和 java.util.Date 类的速度很慢，我决定使用 JODA 库。

不幸的是，我没有使用“JAR”引用的经验（请原谅我......我来自 COM 和 .NET 程序集世界 =）......），但我在互联网上学习了一些技巧，但显然它们似乎是错误的...... . 这些是我在项目中使用该库所采取的步骤：

1.  下载最新的 JODA 库 2.1
2.  在我的项目文件夹中创建“lib”文件夹
3.  将“joda-time-2.1.jar”添加到“lib”文件夹。
4.  将“joda-time-2.1.jar”库添加到构建路径。
5.  将“joda-time-2.1-javadoc.jar”和“joda-time-2.1-sources.jar”添加到“lib”文件夹
6.  将上述库设置为 joda-time-2.1 引用库的“java 源附件”和“javadoc 位置”。
7.  在我的代码中使用新库（ehm ehm 'intelli-sense' 和编译器不会抛出任何错误或警告）
8.  在真实或虚拟设备上开始调试。

当涉及到以下行（使用 JODA BTW 的第一行）时，调试停止：

```
DateTime newDate = new DateTime(2012, 5, 3, 12, 0, 0); 
```

并返回以下堆栈跟踪：

```
05-03 19:09:14.349: E/AndroidRuntime(4071): java.lang.NoClassDefFoundError: org.joda.time.DateTime
05-03 19:09:14.349: E/AndroidRuntime(4071):     at it.paganel.droidMessageExport.Control.TimePickerControl.SetTimePart(TimePickerControl.java:83)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at it.paganel.droidMessageExport.Control.TimePickerControl.onClick(TimePickerControl.java:116)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.view.View.performClick(View.java:2454)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.view.View$PerformClick.run(View.java:9030)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.os.Handler.handleCallback(Handler.java:587)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.os.Looper.loop(Looper.java:123)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at android.app.ActivityThread.main(ActivityThread.java:4641)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at java.lang.reflect.Method.invokeNative(Native Method)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at java.lang.reflect.Method.invoke(Method.java:521)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:870)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at dalvik.system.NativeStart.main(Native Method)
05-03 19:09:14.349: E/AndroidRuntime(4071): Caused by: java.lang.ClassNotFoundException: org.joda.time.DateTime in loader dalvik.system.PathClassLoader[/data/app/it.paganel.droidMessageExport-2.apk]
05-03 19:09:14.349: E/AndroidRuntime(4071):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-03 19:09:14.349: E/AndroidRuntime(4071):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-03 19:09:14.349: E/AndroidRuntime(4071):     ... 13 more 
```

有人可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T19:18:30.167

将 lib 文件夹重命名为 libs。从 ADT Tools 开始，只有在此文件夹中的 17 个外部 jars 才会被打包到 apk 中。或者，您可以转到“配置构建路径..”->“订购和导出”，然后单击 jar 旁边的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T14:46:50.480

对于可能正在寻找解决方案的其他人，我刚刚发现了另一个可能的原因：打开*Project>Properties>Java Build Path>Libraries*并检查 JodaTime 是否在*Android Dependencies*或*Android Private Libraries*下。然后确保在*Order and Export*选项卡上选中相应的选项。我必须检查*Android Private Libraries*（其中列出了 JodaTime）才能使其正常工作。

我认为这也适用于类似的问题，并且不一定与 JodaTime 相关。

# java - 如何在 JAXB xml 中隐藏“null='true'”

> ID：10437439
> 
> 赞同：1
> 
> 时间：2012-05-03T18:40:55.397
> 
> 标签：java, xml, jaxb

我正在通过 JAXB 生成一个 xml 文件，它会生成如下所示的元素：

```
<someData null="true"/> 
```

Java 类如下所示：

```
@XmlType(propOrder={"someData"})
public class someClass implements Serializable {
    private String someData;

    public String getSomeData() {
        return someData;
    }

    public void setSomeData(String someData) {
        this.someData = someData;
    }
} 
```

是否有注释或其他机制会产生输出，如果它是 nil，则从 xml 中删除 someData，或者产生像这样的空元素？：

```
<someData/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:20:43.120

给定您的对象模型以下演示代码：

```
package forum10437439;

import javax.xml.bind.*;
import javax.xml.namespace.QName;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(someClass.class);

        someClass someClass = new someClass();
        someClass.setSomeData(null);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        JAXBElement<someClass> je = new JAXBElement<someClass>(new QName("root"), someClass.class, someClass); 
        marshaller.marshal(je, System.out);
    }

} 
```

将产生您正在寻找的 XML 结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root/> 
```

**可能的原因**

您是否`XmlAdapter`在可能将实例转换为`String`您所看到的表示的包级别注册了一个？

# r - 在点周围放置边框

> ID：10437442
> 
> 赞同：64
> 
> 时间：2012-05-03T18:41:04.527
> 
> 标签：r, ggplot2

我想使用 ggplot2 在基于数据填充的散点图上的点周围放置一个黑色边框。另外，我想避免为黑色边框添加图例条目，因为它将在每个点上。基本上我正在寻找这个情节，但每个点周围都有黑色边框。

```
df <- data.frame(id=runif(12), x=1:12, y=runif(12))
ggplot(df, aes(x=x, y=y))+geom_point(aes(colour=id), size=12) 
```

![我想要的情节，除了点周围没有边框](../Images/2fa8806ea8b54ccf09176d49a335e381.png)

作为奖励，我不想为黑色边框添加图例条目。我最好的尝试是：

```
df <- data.frame(id=runif(12), x=1:12, y=runif(12))
ggplot(df, aes(x=x, y=y))+geom_point(aes(fill=id, colour="black"), size=12) 
```

这使：

![根本不是我想要的情节](../Images/70176e8d0ab464790a09bd546356c46c.png)

我不明白为什么这不能给我想要的东西，更糟糕的是（对于我在 ggplot2 中的教育）我不明白为什么它似乎没有将填充颜色映射到任何东西！有什么帮助吗？

[也许如果我能正确地获得轮廓和填充映射，我可以使用像这里](http://wiki.stdout.org/rcookbook/Graphs/Legends%20%28ggplot2%29/)最后一组数字中的一个黑客来关闭图例。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-03T18:49:21.020

这有点晦涩，但您必须使用`pch`>20（我认为 21:25 是相关形状）：`fill`控制内部颜色（u）环并`colour`控制边缘周围的线。

```
(g0 <- ggplot(df, aes(x=x, y=y))+geom_point(aes(fill=id), 
       colour="black",pch=21, size=5)) 
```

**更新**：对于最近的 ggplot2 版本（例如 2.0.0，不知道它有多远），默认指南是一个颜色条。需要`g0 + guides(fill="legend")`得到一个带有点的图例，如图所示。默认中断也发生了变化：要*准确*复制您需要的这个情节`g0 + scale_fill_continuous(guide="legend",breaks=seq(0.2,0.8,by=0.1))`......

![在此处输入图像描述](../Images/f80cae9db6aa879533cccef356bb3bab.png)

相关但不相同：[如何在 R 中创建带有自定义点的图？](https://stackoverflow.com/questions/9958025/how-to-create-a-plot-with-customized-points-in-r). 该问题的公认答案使用@joran 的答案中显示的分层技术，但是（IMO）使用该`pch=21`技术的@jbaums 的答案更好。（我认为`shape=21`是一种替代方案，甚至可能是首选`pch=21`。）

PS如果你想绝对设置它而不是根据某个变量的值，你应该把它放在映射（位）`colour` **之外......**`aes`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-03T18:47:06.367

第一个问题是给我的：

```
ggplot(df, aes(x=x, y=y)) + 
    geom_point(aes(colour=id), size=12) + 
    geom_point(shape = 1,size = 12,colour = "black") 
```

而且，哦，你*不*想要一个额外的传说。我认为这样做：

![在此处输入图像描述](../Images/5f1ad7307369ce96778d41d2fcb5a65a.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-19T00:34:29.277

我遇到了同样的问题，但我也需要一个允许抖动的解决方案。为此，您确实需要使用一个 pch ，它是一个带有边框的填充形状和来自 gridExtra 包的 grid.edit 函数。使用您的示例：

```
df <- data.frame(id=runif(12), x=1:12, y=runif(12))
ggplot(df, aes(x=x, y=y, fill=id))+geom_point(pch=21, colour="Black", size=12)

library(gridExtra)
grid.edit("geom_point.points", grep = TRUE, gp = gpar(lwd = 3)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-07T17:43:26.347

我有同样的问题，但也许因为我使用的是带有纬度和经度的 geom_map，所以截至 2020 年 1 月的其他答案对我不起作用。

重申问题，其中以下点周围没有黑色轮廓：

```
df <- data.frame(id=runif(12), x=1:12, y=runif(12))
ggplot(df, aes(x=x, y=y))+geom_point(aes(colour=id), size=12) 
```

如果我同时声明颜色和填充美学，然后使用形状 21，问题就解决了。

```
ggplot(df, aes(x=x, y=y)) + 
  geom_point(aes(colour=id, fill=id), 
  shape = 21,size = 12,colour = "black") 
```

[![用黑色标出的点](../Images/5e51f2cdfe0cc0311ad72bfaec93257f.png)](https://i.stack.imgur.com/vVER7.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-27T14:13:30.997

如果您想要更多控制（例如，具有各种形状和透明度的点的边界），请使用`fill`形状的美学`21:25`

```
ggplot(aes(x = Sepal.Length, y = Petal.Width, fill = Species, shape = Species), data = iris) + # notice: fill
    geom_point(size = 4, alpha = 0.5) + # transparent point
    geom_point(size = 4, fill = NA, colour = "black") + # black border
    scale_shape_manual(values = c(21:23)) + # enable fill aesthetic
    theme_classic() 
```

# types - std.algorithm.map 的结果

> ID：10437448
> 
> 赞同：6
> 
> 时间：2012-05-03T18:41:46.593
> 
> 标签：types, map, d

有人可以说什么`std.algorithm.map`返回吗？（非常感谢链接到一些文档页面）从错误消息中它的结果是类型`Result`

```
ulong[] x = [1,2,3];
ulong[] y = std.algorithm.map!"a"(x); // Error: cannot implicitly convert <..> of type Result to ulong[] 
```

在[http://dlang.org/phobos/std_algorithm.html#map](http://dlang.org/phobos/std_algorithm.html#map)中，关于它的信息很少：

```
The call map!(fun)(range) returns a range of which elements are obtained by applying fun(x) left to right for all x in range 
```

由此不清楚，我能用它做什么或不能做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T20:35:16.070

您不应该知道或关心`std.algorithm.map`返回的内容，因为它是与传入的类型相同的范围（前向、双向、随机等）。大多数基于范围的函数就是这样。它们几乎总是返回一个包含传入的新范围的新范围，或者返回与传入的范围完全相同的范围（例如`map`，前者是；`find`后者是）。使用`auto`：

```
ulong[] x = [1, 2, 3];
auto y = map!"a"(x); 
```

返回的范围`map`是惰性的。在您迭代它之前它不会做任何事情（然后它在每个连续`front`的基础范围上调用给定函数）。这种方式更有效（以及启用无限范围）。确切的返回类型取决于您传入的范围类型，并且是本地的，`map`因此您无法直接创建一个。您需要使用`auto`来推断类型或`typeof`获取类型：

```
typeof(map!"a"(x)) y = map!"a"(x); 
```

但是，您通常仅`typeof`在需要无法直接初始化的变量时使用。`auto`几乎总是要走的路。

`map`如果您需要从（或任何其他范围）的结果创建数组，请使用[`std.array.array`](http://dlang.org/phobos/std_array.html#array)：

```
ulong[] y = array(map!"a"(x)); 
```

如果您对范围不太了解，那么您可能应该阅读[这篇](http://ddili.org/ders/d.en/ranges.html)文章。不幸的是，目前 dlang.org 上没有一篇文章解释范围，但该链接是 D 社区的一位成员用土耳其语写的一本书中的一章，并一直在翻译成英文，它相当覆盖范围好。

**编辑**：

Walter Bright 最近写了一篇关于函数本地但由函数返回的类型的文章，这也可能有助于启发您。他们甚至有一个很酷的名字：[`Voldemort Types in D`](http://www.drdobbs.com/blogs/cpp/232901591).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T20:30:12.063

结果范围是“惰性的”，它不代表最终结果。

如果你导入 std.array 并像这样包装它，它可以变成一个数组：

```
ulong[] y = array(std.algorithm.map!"a"(x)); 
```

或者

```
ulong[] y = std.algorithm.map!"a"(x).array; 
```

如果您使用 dmd 2.059 或更高版本

映射结果也可以直接使用 foreach 进行迭代：

```
auto result = std.algorithm.map!"a"(x);
foreach (element; result)
  writeln(to!string(element)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:48:31.360

`Result`是一种`map()`无法命名的内部类型，因为它是[Voldemort Type](http://www.drdobbs.com/article/print?articleId=232901591&siteSectionName=cpp)。

Phobos 中的实际[源代码如下所示：](https://github.com/D-Programming-Language/phobos/blob/master/std/algorithm.d#L366)

```
template map(fun...) if (fun.length >= 1)
{
    auto map(Range)(Range r) if (isInputRange!(Unqual!Range))
    {
        //...
        struct Result
        {
            //...
        }
        return Result(r);
    }
} 
```

如果您研究源代码，您会注意到它`Result`只是一个范围：它具有通常的`popFront()`和`empty()`方法，以及取决于需要返回的范围类型的其他方法。如果你使用类型推断，

```
auto r = map!("a*a")(data); 
```

`r`将输入为`Result`，但您不能直接实例化它。

# c# - 避免重复对象初始值设定项值

> ID：10437451
> 
> 赞同：0
> 
> 时间：2012-05-03T18:41:59.253
> 
> 标签：c#, object-initializers

我的项目中有许多对象，它们的字段**在初始化时**将包含匹配的值- 请参阅下面的代码片段以获取示例，特别是`AddedDateTime`and`ModifiedDateTime`属性：

```
User user = new User()
{
    FirstName = "Tex",
    Surname = "Murphy",
    AddedDateTime = DateTime.Now,
    ModifiedDateTime = DateTime.Now
}; 
```

设置后是否可以在 {...} 块内将的值设置`ModifiedDateTime`为 的值？`AddedDateTime`

我觉得这是不可能的，但认为值得要求确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:56:13.387

我不确定这是否是您的追求，但这合适吗？

```
var now = DateTime.Now;
User user = new User
{
     FirstName = "Tex",
     Surname = "Murphy",
     AddedDateTime = now,
     ModifiedDateTime = now
}; 
```

如果您想让它们初始化为相同的值，那么您必须设置为一个公共变量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:57:06.950

您可以将此逻辑放入属性的实现中：

```
public class User{
  private DateTime added;
  private DateTime? modified;

  string FirstName {get;set;}
  string SurName {get;set;}

  DateTime AddedDateTime { 
   get { return added; } 
   set { added = value;
         modified = modified ?? value;
       }
   }

  DateTime? ModifiedDateTime {
    get { return modified }
    set { modified = value; }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:47:53.760

```
User user = new User
            {
                FirstName = "Tex",
                Surname = "Murphy",
                AddedDateTime = DateTime.Now < Something? DateTime.Now : SomeOtherValue,
                ModifiedDateTime = DateTime.Now < Something? DateTime.Now : SomeOtherValue
            }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:51:30.540

如评论中所述，您可以制作仅包含您需要的数据的构造函数，即：

```
public User(string firstName, string sirname)
{
    FirstName = firstName,
    Surname = sirname,
    AddedDateTime = DateTime.Now,
    ModifiedDateTime = DateTime.Now
}; 
```

您还可以使用辅助方法来创建类的实例。它们可能在课堂内或不在课堂内（如果你无法控制课堂本身，这很有用）

```
public static User CreateUser(string firstName, string sirname)
{
    User newUser = new User();
    newUser.FirstName = firstName,
    newUser.Surname = sirname,
    newUser.AddedDateTime = DateTime.Now,
    newUser.ModifiedDateTime = DateTime.Now

    return newUser;
}; 
```

你也可以有类似的东西：

```
public static User CreateUser(string firstName, string sirname, string otherdata)
{
    User newUser = new User();
    newUser.FirstName = firstName,
    newUser.Surname = sirname,
    newUser.AddedDateTime = DateTime.Now,
    newUser.ModifiedDateTime = DateTime.Now,
    newUser.SomeField = otherdata,
    newUser.SomeOtherField = otherdata

    return newUser;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T18:54:41.287

您可以将逻辑放入 AdditionalDateTime 的设置器中，检查 ModifiedDateTime 上的最小值并进行相应设置。例如

```
public DateTime ModifiedDateTime { get; set; }
private DateTime _addedDateTime;
public DateTime AddedDateTime {
    get { return _addedDateTime; }
    set 
    {
        if (ModifiedDateTime == DateTime.MinValue)
        {
            ModifiedDateTime = _addedDateTime = value;
        };
    }
}

...

var test = new Test 
{ 
   AddedDateTime = DateTime.Now
}; 
```

# firefox - 如何判断过渡/变换是否在 Firefox 中进行了 3d 加速？

> ID：10437452
> 
> 赞同：1
> 
> 时间：2012-05-03T18:42:02.030
> 
> 标签：firefox, css, 3d, hardware-acceleration

在 Chrome 中，您有调试标志：`--show-composited-layer-borders`. Firefox中是否有等价物？谷歌搜索收效甚微。

# perl - 如果宽字符错误，Perl 停止打印

> ID：10437455
> 
> 赞同：3
> 
> 时间：2012-05-03T18:42:05.817
> 
> 标签：perl

我有一个简单的打印脚本

```
my $pdf_data = $agent->content;
open my $ofh, '>:raw', "test.pdf"
or die "Could not write: $!";
print {$ofh} $pdf_data;
close $ofh; 
```

有时我会收到“宽字符警告”，我知道为什么会收到此消息，并且希望能够取消打印而不是打印损坏的失败。就像是

```
if(wideCharWarning)
{
delete "test.pdf"
}
else{
print {$ofh} $pdf_data;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T18:51:24.767

如果你想检测你的字符串是否包含宽字符，你可以使用这样的正则表达式：

```
/[^\x00-\xFF]/; 
```

（如下 ikegami 所述，我的第一个建议不正确：`/[^[:ascii:]]/;`会产生误报）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T18:49:21.633

您指定要打印字节（：raw），但不是。

```
$ perl -we'
   open(my $fh, ">:raw", "file") or die $!;
   for (0..258) {
      print "$_\n";
      print $fh chr($_);
   }
'
...
249
250
251
252
253
254
255
256
Wide character in print at -e line 5.
257
Wide character in print at -e line 5.
258
Wide character in print at -e line 5. 
```

要“取消打印”，您只需检查您打印的内容是否不包含非字节。

```
die if $to_print =~ /[^\x00-\xFF]/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:51:49.417

您可以设置一个`__WARN__`信号处理程序并根据警告消息执行任何您想做的事情。

```
my $wideCharWarningsIssued = 0;
$SIG{__WARN__} = sub {
    $wideCharWarningsIssued += "@_" =~ /Wide character in .../;
    CORE::warn(@_);     # call the builtin warn as usual
};

print {$ofh} $data;
if ($wideCharWarningsIssued) {
    print "Never mind\n";
    close $ofh;
    unlink "test.pdf";
} 
```

# jquery - Jquery - 在我的可见字段集中查找我的必填字段并显示消息

> ID：10437463
> 
> 赞同：0
> 
> 时间：2012-05-03T18:42:33.157
> 
> 标签：jquery

我想**在**我的表单上找到**当前可见的字段集中的****所有必填字段**。当用户提交表单时，我实际上会使用此代码，但为了测试，我使用一个简单的按钮来检查可见字段集，然后检查那些可见字段集中需要的字段[**由以 -required 结尾的类名注明**] . 这些字段可以是文本框、单选框、复选框等。然后确定它们是否为空。如果在我的 div 中为空提供消息，告诉用户哪些字段不完整。 我以为我已经在另一个 stackOverflower 的帮助下弄清楚了这段代码，但它在我的代码中不起作用。有人可以提供一些见解吗？

 ********我的小提琴在这里：http:** [//jsfiddle.net/justmelat/jVktq/](http://jsfiddle.net/justmelat/jVktq/)

**我的html在这里：**

```
<form method="post" action="">
    <div id="holdErrMsg"></div>
    <fieldset id="mainSection" name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px;">Name</td>
                        <td style="height: 33px"><input  id="1125" name="1125" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px;">Email</td>
                        <td style="height: 33px"><input  id="1026" name="1026" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type</td>
                        <td><select id="1169" name="1169">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select></td>
                    </tr>
                                        <tr><td>
                                        <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                                        </td></tr>
                                    </table>
            </fieldset>

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:*</label></td>
                        <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                        <select id="1433" class="1433-required" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color*:</td>
                        <td style="height: 35px">
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Orange" class="1433[]-required"/>Orange
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Blue" class="1433[]-required"/>Blue
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Green" class="1433[]-required"/>Green
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                                                <input type="radio" name="1834" id="1834" value="None" class="valuetext" class="1834-required">None
                                                <input type="radio" name="1834" id="1834" value="All" class="valuetext" class="1834-required">All
                       </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

</form>​ 
```

**我的jQuery在这里：**

```
$("#section-11").hide();
$("#section-12").hide();
$("#section-13").hide();
$("#section-1011").hide();

var projtype = new Array(
        {value : 'Cars', sect_id : 'fieldset#section-11'},
        {value : 'Planes', sect_id : 'fieldset#section-12'},
        {value : 'Boats', sect_id : 'fieldset#section-13'}
    );
$("select#1169").on('change',function () {
var thisVal = $(this).val();
 var sect_id ="";
     //$('fieldset[id!="mainSection"]').hide();
    $(projtype).each(function() {
$(this.sect_id).hide();
        if(this.value == thisVal) {
        $(this.sect_id).show();
        }
    });        
});

$("#btnCatchReqFlds").on('click', function() {
    var requiredButEmpty = $("fieldset:visible").find('input[class*="-required"], select[class*="-required"]').filter(function() {
      return $.trim($(this).val()) === "";  
    });
    if ($requiredButEmpty.length) {
        $requiredButEmpty.each(function () {

            $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
        });
    }
    return !$requiredButEmpty.length;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:57:04.540

也许超出您的代码上下文，但它可以回答您的问题：

如果使用 html5，您只需`required`向所需的输入添加一个属性，如下所示：

```
<input type="text" required /> 
```

在您的 jQuery 中验证它们：

```
var errorList = [];

function validateRequiredFields(){
    $("input").each(function(){
        if($(this).attr("required") && $(this).val() === ""){
            errorList.push($(this).attr("name"));
        }
    });
    showErrors();
}

function showErrors(){
    $("#holdErrMsg").html("Please fill in this fields: " + errorList.toString());
    errorList = [];
} 
```

提交前调用 validateRequiredFields。

此外，如果您想匹配特定模式（即仅数字），您可以`pattern`向输入添加一个属性（如果它是文本类型）并尝试匹配正则表达式。即一个 10 位数的电话号码字段：

```
<input type="text" required pattern="^[0-9]{0,10}$" /> 
```

然后您的 validateRequiredFields() 将类似于：

```
function validateRequiredFields(){
    $("input").each(function(){
        if($(this).attr("required")){
            if($(this).attr("pattern") && !(new RegExp($(this).attr("pattern"))).test($(this).val())){
                errorList.push($(this).attr("name"));
            }
            else if($(this).val() === ""){
                errorList.push($(this).attr("name"));
            }
        }
    });
    showErrors();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:48:59.013

首先，你有一个错字。

```
var requiredButEmpty 
```

需要是

```
var $requiredButEmpty 
```

此外，您不能真正使用该功能来检查复选框和单选按钮，因为您需要查看它们是否被选中或选中。检查这些值是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:52:06.790

其次，您的选择器找到 0 个匹配项，我会选择：

[http://jsfiddle.net/justmelat/jVktq/](http://jsfiddle.net/justmelat/jVktq/)

您的示例小提琴有 0 个具有所需类的类。一旦我添加了它，您的代码就可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T19:33:17.997

我不知道你们在小提琴上运行什么代码，因为当我尝试运行它们时，上面链接的两个小提琴都会出错。

只是从代码清理开始：

```
if ($requiredButEmpty.length) {
    $requiredButEmpty.each(function () {

        $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
    });
} 
```

真的没有必要。它可以是：

```
 requiredButEmpty.each(function () {
        $("#holdErrMsg").append("Please fill in the " + this.name + "<br />");
    }); 
```

因为如果没有长度，它不会运行超过 0 次。

***另外请注意，当您返回一个 jquery 对象时，我已经删除了 requiredButEmpty 前面的 $，您不需要继续使用 $(var) 引用它（除非这只是一个错字然后 n/m）。

我也不知道这条线是干什么用的

```
 return !$requiredButEmpty.length; 
```

由于它是从事件处理程序调用的匿名函数，因此无需返回任何内容，因此您不会将其返回到任何地方。

* * *

我认为 lu1s 非常正确。唯一的细微变化是，如果您不使用 html5，或者您知道您将拥有不使用支持它的浏览器的用户，您可以手动为他们添加一个 class="required"，然后搜索：

```
$('.required').forEach(function(){
    if ($(this).val==='')
        --push to array
}); 
```******

# hyperlink - 如何在没有宏/vba 的情况下创建从 Word 到 Excel 特定单元格的超链接？

> ID：10437469
> 
> 赞同：9
> 
> 时间：2012-05-03T18:43:11.360
> 
> 标签：hyperlink, excel-2010, word-2010

参考[创建从 Excel 流程图到 MS Word 标题的超链接](https://stackoverflow.com/questions/10436591/creating-hyperlink-from-excel-flowchart-to-ms-word-heading/10436699#10436699)

我想知道**从**Word 文档超链接到 Excel 工作簿中特定单元格的正确语法。

例如：假设我在 word 文档“解释”中，我想插入 Excel 文件 DataStuff 的超链接，但要插入**Cell ZX200**。如果没有 VBA/MACROS，我将如何手动执行此操作？

我已经知道要超链接到 DataStuff 我会输入

```
 File:///c:\users\Win7User\desktop\DataStuff.xlsx 
```

然后按 ENTER。（然后它变成带下划线的超链接。单击它会打开 DataStuff）

但是，我想补充一点，它应该转到单元格 ZX200，而不仅仅是在单元格 A1 处打开 DataStuff。以下不起作用。有人可以为我修复语法吗？

```
 Does not work:
    File:///[c:\users\Win7User\desktop\DataStuff.xlsx]Sheet1!ZX200 
```

* * *

我不明白 Excel 到 Word 的问题是如何在大约 10 分钟内得到回答的，而且我的 Word 到 Excel 的问题积累了蟋蟀和风滚草。没有 MS Word 专家？？

在浏览了许多无用且有用的文档后，我发现了这一点。正确的语法是：

```
 File:///c:\users\Win7User\desktop\DataStuff.xlsx#Sheet1!ZX200 
```

这应该输入到您的 Word 文档中，并将转到 Excel 中工作表 Sheet1 中的单元格 ZX200。使用来自我在问题中的超链接的信息，您现在在 Word 和 Excel 超链接之间有了一个很棒的双向链接。这样当你把人送到某个地方时，你也可以把他们送回去！

[http://www.shaunakelly.com/word/word-and-excel/excelhyperlinks.html](http://www.shaunakelly.com/word/word-and-excel/excelhyperlinks.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T16:28:57.933

您需要做的就是在 Excel 中复制要引用的单元格，然后在 Word 中，在您希望链接所在的位置，您将“选择性粘贴”>“链接和合并格式”

然后发生的情况是在 Word 中插入了一个字段（看起来不像超链接，但如果光标放在文本中，则会显示为灰色）。通过执行以下步骤，此字段可以链接回 Excel 文件中的特定单元格：

1.  右键单击该字段
2.  然后选择`Linked Worksheet Object`>`Open Link`

您的 Excel 文件应该打开到所需的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T15:51:57.530

我一直在阅读这些链接，并且可能对非 VS 大师（如我）有另一种解决方案。

1.  打开您的 Excel 工作簿，转到公式 -> 定义[名称](https://support.office.com/en-us/article/Define-and-use-names-in-formulas-4d0f13ac-53b7-422e-afd2-abd7ff379c64#bmlearn_more_about_using_names)
2.  为您要链接的每个单元格或单元格组创建一个“名称”。例如，我将 Word 文档中的问题 # 超链接到我的 Excel 文档，该文档用于将问题导入我们的学习管理系统。 **示例 NAME = Question_22 并引用单元格范围 =WBT16DS058!$A$90 (=worksheet!cellrange)**
3.  保存并关闭 Excel 工作簿。

4.  打开 Word 文档并创建文本（问题 022），突出显示并插入超链接。

5.  浏览并选择您的 Excel 文档，在地址末尾添加#NAME。（即 - R312Test.xlsx#Question_22）。
6.  选择新链接，您的 Excel 文档将打开正确的问题。

我们已经插入和删除了行，以确保在 Word 中选择超链接时 Excel NAME 的引用与单元格区域保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T01:01:51.733

对于执行此操作的各种方法（Office 2013），我发现的最简洁的解释实际上是在打开包含链接的文件时弹出的对话框中（展开`Show Help`按钮后）。前 2 个选项与 Excel 相关：

![Word - 链接更新对话框](../Images/ebd93fdfe2a0e18b8f79137d8d91219d.png)

其中的文本列出了您创建链接的选项：

> *   通过使用“**选择性粘贴”**命令（在“开始”**选项卡上的“剪贴板”组中，单击“****粘贴**”下方的箭头，然后单击“**选择性粘贴”**），然后单击“**粘贴链接**”选项。
> *   通过使用**Object**命令（在**Insert**选项卡上的**Text**组中，单击**Object**，然后单击**Object**），然后单击**Create from File**选项卡上的**Link to file**选项。
> ***   通过使用“**插入图片”**对话框中的“**链接到文件**”或“**插入并链接”**命令（在“**插入**”选项卡上的“**插图”组**中，单击**“图片**”，然后单击“**插入**”旁边的箭头）。**

 ******您还可以很容易地在一个地方管理多个链接，如[本文](http://www.officetooltips.com/word/tips/creating__updating__locking_and_unlocking_links.html)所述，它还直观地说明了上述过程。选项包括自动/手动更新和锁定当前值不更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T01:57:28.657

我相信预期的问题与指向特定 Excel 值的永久链接有关，即使该值移动到新单元格也是如此。使用粘贴链接，如果在所需值的上方或下方插入行或列，则引用的单元格不再包含所需的值。链接的完整性受到损害，将不正确的数据或空白数据带入 Word 文档。理想情况下，用户可以在 Excel 中使用命名范围并超链接到命名范围。如果项目在 Excel 中移动，命名范围仍将跟随该值。******

# android - 检查 GPS 可访问性

> ID：10437472
> 
> 赞同：1
> 
> 时间：2012-05-03T18:43:18.253
> 
> 标签：android, gps, satellite

我想检查设备是否从卫星获取数据。如果我得到我当前的位置，那么我会做一些事情。否则，如果我还没有任何坐标，我想给我留言。我怎么知道我是否已经得到了坐标？

```
GeoPoint h = null;
double latitude = 10, longitude = 10;
public void onClick(View v) 
{
    switch (v.getId())
    {
      case R.id.get_GPS:
          final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
          if(isInternetOn() && manager.isProviderEnabled(LocationManager.GPS_PROVIDER))
          {
//I want here to check, if I get latitude and longitude values, which differ from 10 x 10, I go to my map, otherwise I say, that there's no information received from satellite.
/*
              h = new GeoPoint((int) (latitude * 1000000), (int) (longitude * 1000000));

              if(h.getLatitudeE6()==h.getLongitudeE6() && h.getLongitudeE6()==10000000)
              {
                  Toast.makeText(this, "No information received from satellite yet.", Toast.LENGTH_LONG).show();
                  break;
              }
              */
              Intent i = new Intent (this,getGPS.class);
              startActivity(i);
          }
          else
          {   
              if(!isInternetOn() && !manager.isProviderEnabled( LocationManager.GPS_PROVIDER))
              {
                  buildAlertMessageNoGpsNoInternet();
                  break;
              }

              if(!isInternetOn())
              {
                  buildAlertMessageNoInternet();
                  break;
              }
              if(!manager.isProviderEnabled( LocationManager.GPS_PROVIDER))
              {
                  buildAlertMessageNoGps();
                  break;
              }
          }

        break;
      case R.id.about_button:
        Intent j = new Intent(this, About.class);
        startActivity(j);
        break;
      case R.id.exit_button:
        this.moveTaskToBack(true);
        break;
    }
} 
```

山姆，我在“如果”中得到空指针异常：

```
if(manager.isProviderEnabled(LocationManager.GPS_PROVIDER))
          {

              Location location = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

              /*Here ->*/if(location.getTime() > ((Calendar.getInstance().getTimeInMillis()) - 10000))
              {
                  Intent i = new Intent (this, getGPS.class);
                  startActivity(i);
              }

              else 
              {
                    // Wait for new location
                    LocationListener locationListener = new myLocationListener();
                    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,locationListener);
              }
} 
```

日志猫

05-05 11:42:49.444: E/AndroidRuntime(300): java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:14:37.833

我会尝试这样的事情：

```
public class Example extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LocationManager manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location location = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if(location.getTime() > Calendar.getInstance().getTimeInMillis() - 2 * 60 * 1000) {
            // Do something with the recent location fix
        }
        else {
            // Wait for new location
            LocationListener locationListener = new myLocationListener();
            manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,locationListener);
        }
    }

    private class myLocationListener implements LocationListener {
        public void onLocationChanged(Location location) {
            if (location != null) {
                Log.v("Location Changed", location.getLatitude() + " " + location.getLongitude());
                // Do something with current location
            }
        }

        // Must implement missing functions!
    }
} 
```

**添加**

如果此处的位置为空，则可能意味着无论出于何种原因都没有最后一个已知位置。简单修复：

```
if(location != null && location.getTime() > ((Calendar.getInstance().getTimeInMillis()) - 10000)) 
```

# ios - IOS：在视图之间切换时内存占用增加（启用ARC）

> ID：10437473
> 
> 赞同：1
> 
> 时间：2012-05-03T18:43:21.323
> 
> 标签：ios, views, automatic-ref-counting, xib

我是 X-code 的新手，一直在到处搜索并尝试“一切”但没有运气。如果你能帮助我，我会为你唱首歌:)

我正在制作一个使用大量内存的 iPad 应用程序。项目的大小约为 100mb（许多图像），但活动监视器显示，在我在所有视图（xib 文件）之间切换后，我使用了高达 140mb 的“真实内存”:(

每次在视图（xib 文件）之间切换时，我的内存占用都会增加。ARC 已启用，因此我无法从内存中释放上一个视图。我有 10 页（xib 文件）可以切换。

我使用此代码在 xib 文件之间切换：

```
viewController2 *view2 = [[viewController2 alloc] initWithNibName:@"viewController2" bundle:nil];
view2.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:view2 animated:YES]; 
```

当我切换回或切换到下一个视图时，我使用相同类型的代码。

我尝试使用`[self dismissModalViewControllerAnimated:NO];`, `[self.view removeFromSuperview];`，`self.view = nil;`但内存不断增加。

据我了解，这些视图相互堆叠，导致内存增加。

如何切换到下一个视图（xib 文件）并同时终止第一个视图的内存使用？

这个问题让我把所有的头发都拔了出来:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:11:26.813

我有一个包含 40 个不同全屏视图控制器的应用程序。这是一种交互式幻灯片放映，其中每张幻灯片都有某种交互。我已经用一个主视图控制器设置了这个应用程序，它控制在哪个时间呈现哪个单独的视图控制器。我通过将新视图控制器添加为子视图控制器并将新视图控制器的视图添加为主视图控制器视图的子视图，从一个视图控制器转换到下一个视图控制器：

```
[self addChildViewController:newView];
[self.view addSubview:newView.view]; 
```

`self`作为主视图控制器。然后我使用`UIView`'s`transitionWithView:duration:options:animations:completion:`类方法来显示新视图。在完成块中，视图和视图控制器被删除，允许 ARC 处理该内存（只要这些对象没有其他强引用）：

```
void (^theCompletion)(BOOL) = ^(BOOL finished) { 
    [oldView.view removeFromSuperview]; 
    [oldView removeFromParentViewController]; 
}; 
```

# java - 注册接收 SSLSocket 握手完成的事件通知

> ID：10437475
> 
> 赞同：1
> 
> 时间：2012-05-03T18:43:31.770
> 
> 标签：java, ssl, handshake, jsse

根据[SSLSocket 上的文档](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html)：

> 您可以注册以接收握手完成的事件通知。

你为什么不注册这个？SSLSocket.startHandshake() 在没有 SSLException 发生的情况下成功的事实是否确保证书是可信的？或者您是否通过等待握手完成来获得一些额外的保证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:55:51.493

在 上开始握手有 3 个条件[`SSLSocket`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html)：

> *   调用显式开始握手的 startHandshake，或
> *   任何在此套接字上读取或写入应用程序数据的尝试都会导致隐式握手，或者
> *   如果当前没有有效会话，则调用 getSession 会尝试建立会话，并完成隐式握手。

任何握手失败都会产生异常（包括证书不受信任时）：

> 如果由于某种原因握手失败，SSLSocket 将关闭，并且无法进行进一步的通信。

通常，`startHandshake()`在建立连接时显式调用是不必要的，因为当您开始从输入流读取（或写入输出流）时会启动握手。那里的任何故障都会导致异常并停止正常的控制流。在这些情况下，您无需显式注册以捕获握手的完成：如果您可以从流中读取/写入，则完成。

如果您是请求重新协商的服务器（通过`startHandshake()`在交换某些应用程序数据后调用），握手完成的通知最有用。在这种情况下，您可能希望等待握手完成后再继续。例如，如果服务器在接收到特定路径的 HTTP 请求后请求客户端证书，它可能希望等待握手成功完成以便能够授权客户端证书，然后再发送响应。这是因为[`startHandshake()`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html#startHandshake%28%29)不会停止应用程序数据的流动：

> 如果数据已在连接上发送，则在此握手期间继续传输。

# actionscript-3 - AS3 - 通过变量访问类信息

> ID：10437479
> 
> 赞同：0
> 
> 时间：2012-05-03T18:43:46.913
> 
> 标签：actionscript-3, flash, actionscript

目前我有一个类需要来自另一个类的信息，但是必须在运行时根据其他变量确定哪个类。

实际上，我需要我的类 BUTTON.as 能够访问 GUN(1-9).as，而不知道它将是什么数字。

我认为可行的代码是这样的：

```
public function enableButton(shortcut:int):void{
        trace(ID)
        dtf_ammo.text = gun[ID].ammo
        refreshThis(shortcut, true)
        this.alpha = 1
        isActive = true
    } 
```

ID 是类的编号（在本例中为 gun1）。

以下确实有效：

```
public function enableButton(shortcut:int):void{
        trace(ID)
        dtf_ammo.text = gun1.ammo
        refreshThis(shortcut, true)
        this.alpha = 1
        isActive = true
    } 
```

但是，由于有 9 把枪，并且按钮只有 1 个类，我需要能够使用此 ID 变量来访问其中的功能。

这可能吗，如果没有，有没有办法做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:52:25.957

为了访问名称仅在运行时已知的类的静态属性，您可以使用以下代码。

```
getDefinitionByName("gun" + i).ammo 
```

`getDefinitionByName`返回代表由传入的 String 命名的类的 Class 对象。该 Class 对象包含对类的所有静态属性的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:49:59.693

你说第二个代码块正在工作。所以如果你创建和数组说

```
 var gun:Array = new Array( gun1, gun2,gun3,gun4,gun5,gun6,gun7,gun8,gun9 )
 //gun1 to gun9 , being the instances of the Gun class
public function enableButton(shortcut:int):void{
        trace(ID)
        dtf_ammo.text = gun[ID].ammo
        refreshThis(shortcut, true)
        this.alpha = 1
        isActive = true
    } 
```

因此，函数 enableButton 可以正常工作。

# asp.net-mvc - 重定向到动作时传递参数

> ID：10437483
> 
> 赞同：0
> 
> 时间：2012-05-03T18:44:07.367
> 
> 标签：asp.net-mvc

我想在重定向到动作时传递一个参数，然后将该参数绑定到模型。这是我到目前为止所拥有的，有人可以告诉我该怎么做吗？

执行重定向的操作使用以下语句：

```
return RedirectToAction("TwinWithFacebook", new { id = facebookID }); 
```

然后我得到的是：

```
[HttpGet]
    public ActionResult TwinWithFacebook(long id)
    {
        //use viewdata to store id here?
        return View();
    } 
```

我的帖子：

```
 [HttpPost]
    public ActionResult TwinWithFacebook(FacebookConnectModel fbc)
    {
        //assign this here?
        //fbc.facebookId = id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:17:06.540

您必须将模型提供给您的视图，仅分配 id 参数

```
public ActionResult TwinWithFacebook(long id)
{
     FacebookConnectModel fbc = new FacebookConnectModel(id);
     return View(fbc);
} 
```

然后在您的视图中，您可以使用 Html 帮助器来放置这样的表单：

```
@model FacebookConnectModel
@Html.BeginForm()
{
    @Html.TextBoxFor(x => x.Name)
    @Html.HiddenFor(x => x.Id)
    <input type"submit" />
} 
```

然后当您点击提交按钮时，您发布模型，正确且完全填充的模型将作为参数传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:49:32.110

当您执行 GET 时，您想查找具有该 ID 的对象，对吗？

```
public ActionResult TwinWithFacebook(long id)
{
    // Basically, use the id to retrieve the object here
    FacebookConnectModel fbc = new FacebookConnectModel(id);

    // then pass the object to the view.  Again, I'm assuming this view is based
    // on a FacebookConnectModel since that is the object you are using in the POST
    return View(fbc);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:46:40.017

```
return RedirectToAction("TwinWithFacebook", new FacebookConnectModel(...){ or here ...} ); 
```

# objective-c - 在 Cocos2D 中使用 CDAudioManager 动画卡通精灵

> ID：10437484
> 
> 赞同：0
> 
> 时间：2012-05-03T18:44:14.910
> 
> 标签：objective-c, cocos2d-iphone, avaudioplayer, ccsprite

在我的应用程序中，我有一个卡通动画，其中有两个互相交谈的角色。我需要为他们的嘴制作动画，以给人一种讲话和嘴巴张开/闭合之间同步的印象。

我知道这`CDAudioManager`是一个包装器`AVAudioPlayer`，所以我有`isMeteringEnabled`可用的属性。

有没有办法使用仪表级别更新角色嘴的两个框架（打开和关闭）？或者有更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:50:36.333

我认为您无法顺利解决它...要在特定时间获得仪表级别，您必须使用计时器以特定间隔检查它...因此，如果您发现声级很高..打开嘴巴那段时间..不确定...

我所做的是在整个演讲过程中播放持续的动画......

[在这里](http://itunes.apple.com/app/snuffles-lite/id411663433?mt=8)检查我的应用程序

我提供了这个链接作为它的一个免费应用程序。如果你有越狱的 iPhone 检查这个[应用程序](http://itunes.apple.com/app/kooka/id401134800?mt=8)

在所有字符中都实现了相同的东西.. :)

# sql-server - SQL Server 数据透视表 - 动态

> ID：10437491
> 
> 赞同：0
> 
> 时间：2012-05-03T18:44:40.073
> 
> 标签：sql-server, pivot-table

我有一个名为#MonthlySales 的表，它可以显示ItemNumber、MonYearNum 和UnitsSold。我使用以下脚本对此进行了调整：

```
选择
    项目编号 [SKU]
    , ISNULL([1-2011], 0) [1 月 11 日]
    , ISNULL([2-2011], 0) [2 月 11 日]
    , ISNULL([3-2011], 0) [3 月 11 日]
    , ISNULL([4-2011], 0) [4 月 11 日]
    , ISNULL([5-2011], 0) [5 月 11 日]
    , ISNULL([6-2011], 0) [6 月 11 日]
    , ISNULL([7-2011], 0) [7 月 11 日]
    , ISNULL([8-2011], 0) [8 月 11 日]
    , ISNULL([9-2011], 0) [9 月 11 日]
    , ISNULL([10-2011], 0) [10 月 11 日]
    , ISNULL([11-2011], 0) [11 月 11 日]
    , ISNULL([12-2011], 0) [12 月 11 日]

```
, ISNULL([1-2012], 0) [Jan 12]
, ISNULL([2-2012], 0) [Feb 12]
, ISNULL([3-2012], 0) [Mar 12]
, ISNULL([4-2012], 0) [Apr 12]
, ISNULL([5-2012], 0) [May 12]
, ISNULL([6-2012], 0) [Jun 12]
, ISNULL([7-2012], 0) [Jul 12]
, ISNULL([8-2012], 0) [Aug 12]
, ISNULL([9-2012], 0) [Sep 12]
, ISNULL([10-2012], 0) [Oct 12]
, ISNULL([11-2012], 0) [Nov 12]
, ISNULL([12-2012], 0) [Dec 12] 
```

从
    #每月销售
枢
    (
        SUM(UNITSSOLD) FOR MONTHYEARNUM IN
                                    (
                                    [1-2011]、[2-2011]、[3-2011]、[4-2011]、[5-2011]、[6-2011]、[7-2011]、[8-2011]、[9 -2011]、[10-2011]、[11-2011]、[12-2011]
                                    ,[1-2012], [2-2012],
 [3-2012], [4-2012], [5-2012], [6-2012], [7-2012], [8-2012], [9-2012], [10-2012], [11 -2012], [12-2012]
                                    )
    ) 作为 TOTSOLDPERMONTH
订购方式
    项目编号
```

如您所见，MonthYearNum 列被硬编码为 1-2011 等值。但是，我不能对这些进行硬编码，因为它们是动态的 - 根据运行此报告的日期，将从 #monthlysales 表返回不同的 MonthYearNum 值。

有没有办法让我动态地旋转返回的值？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:51:16.123

是的——写动态SQL。它很复杂，而不是重写类似的代码（因为我[很懒](http://blogoscoped.com/archive/2005-08-24-n14.html)），请参阅我对[这个问题](https://stackoverflow.com/questions/7555968/dynamic-sql-server-2005-pivot/7556220#7556220)的回答以获取示例。它是动态反透视的代码，但概念是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:54:02.910

或者 - 这是输出到什么？SSRS、报表生成器、Excel 和大多数第三方报表工具将为您进行交叉制表。

# javascript - phantomjs 总是在 Windows 上给出解析错误

> ID：10437492
> 
> 赞同：8
> 
> 时间：2012-05-03T18:44:42.670
> 
> 标签：javascript, phantomjs

这听起来像是一个愚蠢的问题，但我似乎完全不知道为什么

我下载了 Windows 二进制文件并遵循快速入门说明并尝试使用示例，但是无论何时我在控制台中输入任何内容，我总是会收到“解析错误”

我试过了：

```
phantom hello.js

phantomjs hello.js 
```

和一些示例脚本，我总是得到“解析错误”

hello.js 文件只有这个

`console.log('Hello, world!');`

`phantom.exit();`

我不知道出了什么问题...任何帮助将不胜感激...我敢肯定这会变得很愚蠢，因此感谢您的宝贵时间！谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T23:51:58.830

将**“phantomjs-1.5.0-win32-static”**文件夹路径添加到您的系统环境变量中，然后在新的 cmd 提示符下`path`尝试。`phantomjs --version`如果您能够正确获取版本，那么您可以执行您的 .js 如下

```
phantomjs hello.js 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-19T19:53:30.040

您应该直接运行**phantomjs.exe**文件。你必须从**CMD**运行它！

# deployment - 使用 Spoon Virtual Application Studio

> ID：10437509
> 
> 赞同：1
> 
> 时间：2012-05-03T18:46:22.590
> 
> 标签：deployment, virtualization

当我尝试使用 Spoon VAS 构建 DOTNET 应用程序时，它每次都会下载所需的 DOTNET 运行时。有什么方法可以在本地保存框架文件，而无需在每次构建应用程序时下载它们。该应用程序还使用 VistaDB 嵌入式数据库。我可以将数据库文件嵌入到虚拟化应用程序中，以便我得到的只是一个要分发给客户端的 exe 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:18:07.583

您可以使用 ILMerge 将 VistaDB 库嵌入到您的应用程序中。一般来说，“正常工作”，但在某些情况下，您必须稍微修改具有完全限定名称的配置文件（例如 app.config 文件）。如果您遇到任何问题，请联系直布罗陀支持。

# class - 从另一个类更改 UILabel 文本

> ID：10437514
> 
> 赞同：0
> 
> 时间：2012-05-03T18:47:05.377
> 
> 标签：class, text, uilabel

我在 UIViewController 中创建了一个 UILabel 和一个更改该标签的函数，它们在 .h 文件中初始化如下：

```
@interface StoreDetailsController : UIViewController {
UILabel *storeNameLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *storeNameLabel;

- (IBAction)LabelTheStore:(int)storeNumber; 
```

然后在 .m 文件中：

```
@synthesize storeNameLabel;

...

-(void)LabelTheStore:(int)storeNumber
{
    NSLog(@"CHECK NUMBER: %d", storeNumber);
    storeNameLabel = [[UILabel alloc] init];
    storeNameLabel.text = @"TEST";
} 
```

一个 int 变量被传递给随后将被使用的函数。日志根据我传递的内容显示正确的数字，因此我知道该函数被正确调用，但是当我从另一个类调用该函数时，标签永远不会更新。如果我在 storeNameLabel.text 上调用 NSLog，则显示为（null）。

storeNameLabel 在界面构建器中正确链接，程序构建正常。更新：

加载 StoreDetailsController 的方法：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    StoreDetailsController *storeDetailsController = [StoreDetailsController alloc];
    storeDetailsController = [storeDetailsController initWithNibName:@"StoreDetailsController" bundle:[NSBundle mainBundle]];

    NSInteger row = indexPath.row;
    [storeDetailsController LabelTheStore:row];

    [self.navigationController pushViewController:storeDetailsController animated:YES];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:59:56.313

在您的 LabelTheStore 方法中，您每次都分配一个 UILabel；那不是投票工作。在您的 UI 中，您有一个由 StoreDetailsController 控制的视图。视图中应该有一个 UILabel，它链接到控制器中 storeNameLabel 的 IBOutlet。你把它联系起来了；它已经分配，​​因此您无需再次分配它。

LabelTheStore 的内容应该是：

```
self.storeNameLabel.text = @"TEST"; 
```

如果正在调用该方法并且您仍然没有看到标签更改，请确保 StoreDetailsController 中的 IBOutlet 已连接到 UILabel。

# hibernate - 带注释的休眠一对多删除

> ID：10437522
> 
> 赞同：1
> 
> 时间：2012-05-03T18:47:43.340
> 
> 标签：hibernate, one-to-many, many-to-one

我在休眠时删除 OneToMany 和 ManyToOne 时遇到问题。我想问题是我有两个父母养一个孩子。这就是我得到它的方式

```
Persona        Rol        Pais
 id             id         id
 name           name       name
 Pais
 Rol 
```

如您所见，人（persona）与角色（rol）和国家（pais）相关。我的实体是这样的：

人

```
public class Persona  implements java.io.Serializable {
  @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="Pais", nullable=false)
    public Pais getPais() {
       return this.pais;
    }

@ManyToOne(fetch=FetchType.LAZY)
   @JoinColumn(name="Rol", nullable=false)
   public Rol getRol() {
      return this.rol;
   } 
```

派斯 (国家)

```
public class Pais  implements java.io.Serializable {
   private Set<Persona> personas = new HashSet<Persona>(0);
   @OneToMany(fetch=FetchType.LAZY, mappedBy="pais", cascade=CascadeType.ALL,orphanRemoval=true)
  public Set<Persona> getPersonas() {
    return this.personas; 
```

角色（角色）

```
public class Rol  implements java.io.Serializable {
  private Set<Persona> personas = new HashSet<Persona>(0);

  @OneToMany(fetch=FetchType.LAZY, mappedBy="rol", cascade=CascadeType.ALL,orphanRemoval=true)
    public Set<Persona> getPersonas() {
      return this.personas;
    } 
```

我正在尝试删除 Person 并且仅删除该人，所以我认为我必须先分离国家和角色，然后再删除该人，但这不起作用。这是我的删除代码

```
session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
Persona p = (Persona)session.load(Persona.class, idPersona);
Pais pais = (Pais)session.load(Pais.class, p.getPais().getId()); //try to p.getPais();
rol rol = (Rol)session.load(Rol.class,p.getRol().getId()); //try to p.getRol();
pais.getPersonas().remove(p);
rol.getPersonas().remove(p);
p.setPais(null);
p.setRol(null);
session.update(pais);
session.update(rol);
session.delete(p);
session.getTransaction().commit();
session.close(); 
```

希望你能帮助我，这个在休眠中删除的东西让我很害怕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:19:52.697

如果您只想删除 Person。你可以删除它。

```
session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
Persona p = (Persona)session.load(Persona.class, idPersona);
session.delete(p);
session.getTransaction().commit();
session.close(); 
```

# rrdtool - 从 RRD 到 CSV 的转换

> ID：10437523
> 
> 赞同：4
> 
> 时间：2012-05-03T18:47:45.927
> 
> 标签：rrdtool, rrd

我使用 JavaMelody 工具来监控我的应用程序，但可用的时间线设置不合适。这意味着我只想获得快速时间线的监控分数，比如 30 分钟，但 JavaMelody 的最低时间范围是 1 天。可能这个功能可以通过编写自定义插件来解决，但我熟悉那个工具 API。

JavaMelody 生成 RRD 格式的输出文件。我想将这些文件转换为更常见的格式，如 CSV，并使用 Excel 生成图表。我尝试在 Linux 下使用 'rrdtool dump' 命令，但没有任何效果。我有如下错误：`is not an RRD file`.

您知道从 RRD 转换为 CSV 的任何解决方案吗？

* * *

更新

```
 adam@adam-desktop:/tmp/javamelody/car-rental_adam-desktop$ rrdtool dump usedMemory.rrd > filename.xml
  ERROR: 'usedMemory.rrd' is not an RRD file
  adam@adam-desktop:/tmp/javamelody/car-rental_adam-desktop$ rrdtool dump usedMemory.rrd > filename.csv
  ERROR: 'usedMemory.rrd' is not an RRD file 
```

我的 *.rrd 文件是由`JavaMelody`工具生成的，因此我认为已正确保存。

* * *

更新 2

```
00000000  00 4a 00 52 00 6f 00 62  00 69 00 6e 00 2c 00 20  |.J.R.o.b.i.n.,. |
00000010  00 76 00 65 00 72 00 73  00 69 00 6f 00 6e 00 20  |.v.e.r.s.i.o.n. |
00000020  00 30 00 2e 00 31 00 20  00 00 00 00 00 00 00 3c  |.0...1\. .......<|
00000030  00 00 00 01 00 00 00 08  00 00 00 00 4f b9 47 0f  |............O.G.|
00000040  00 75 00 73 00 65 00 64  00 4d 00 65 00 6d 00 6f  |.u.s.e.d.M.e.m.o|
00000050  00 72 00 79 00 20 00 20  00 20 00 20 00 20 00 20  |.r.y. . . . . . |
00000060  00 20 00 20 00 20 00 20  00 47 00 41 00 55 00 47  |. . . . .G.A.U.G|
00000070  00 45 00 20 00 20 00 20  00 20 00 20 00 20 00 20  |.E. . . . . . . |
00000080  00 20 00 20 00 20 00 20  00 20 00 20 00 20 00 20  |. . . . . . . . |
00000090  00 00 00 00 00 00 00 78  00 00 00 00 00 00 00 00  |.......x........|
000000a0  7f f8 00 00 00 00 00 00  41 93 36 05 40 00 00 00  |........A.6.@...|
000000b0  41 e5 03 15 be 00 00 00  00 00 00 00 00 00 00 00  |A...............|
000000c0  00 41 00 56 00 45 00 52  00 41 00 47 00 45 00 20  |.A.V.E.R.A.G.E. |
000000d0  00 20 00 20 00 20 00 20  00 20 00 20 00 20 00 20  |. . . . . . . . |
000000e0  00 20 00 20 00 20 00 20  3f d0 00 00 00 00 00 00  |. . . . ?.......|
000000f0  00 00 00 01 00 00 05 a0  7f f8 00 00 00 00 00 00  |................|
00000100  00 00 00 00 00 00 00 00  00 00 00 21 41 89 70 79  |...........!A.py|
00000110  00 00 00 00 41 92 ae 5a  55 55 55 55 41 8f 9f 49  |....A..ZUUUUA..I|
00000120  95 55 55 55 41 96 43 4d  00 00 00 00 7f f8 00 00  |.UUUA.CM........|
00000130  00 00 00 00 7f f8 00 00  00 00 00 00 7f f8 00 00  |................| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-03T17:50:14.240

我也遇到了同样的错误`is not an RRD file`。
但是我现在可以按照以下步骤将 usedMemory.rrd 转储为 XML。

1.  [从https://github.com/OpenNMS/jrobin](https://github.com/OpenNMS/jrobin)下载项目
    并执行`maven pagckage`生成**jrobin-1.6.1-SNAPSHOT.jar**
    Java 版本：1.8.0_131 && Apache Maven 3.5.2

2.  `java -jar jrobin-1.6.1-SNAPSHOT.jar rrdtool dump usedMemory.rrd > test.xml`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:04:26.367

啊，我刚刚发现您提到您使用`rrdtool dump`“在 Linux 下”，暗示 RRD 文件来自其他地方。这可能是字节顺序问题；`rrdtool`/librrd创建和操作的 RRD 文件是依赖于体系结构的。

而且，可以肯定的是，您可能需要确认您的 RRD 文件的前三个字节是“RRD”。否则，它们实际上不是 rrdtool 理解的 rrd 格式。

（要检查，请执行类似的操作`dd if=usedMemory.rrd bs=1 count=3 2>/dev/null; echo`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T17:57:57.773

正如 chifangjang 所说，jrobin 控制台可用于从 javamelody rrd 文件中转储或获取数据。

并且为下一个 javamelody 版本（1.83）添加了来自浏览器或脚本的 xml 或 txt 转储，请参阅[doc](https://github.com/javamelody/javamelody/wiki/ExternalAPI#dump-graph-as-xml-or-txt)。

快照构建位于[http://javamelody.org/downloads/javamelody-core-1.83.0-SNAPSHOT.jar](http://javamelody.org/downloads/javamelody-core-1.83.0-SNAPSHOT.jar)

# jquery - 按数据过滤一组项目

> ID：10437525
> 
> 赞同：0
> 
> 时间：2012-05-03T18:47:49.077
> 
> 标签：jquery

假设有一组项目，其中包含一些数据，如下所示：

```
<li data-filtro="website, web app"><a href="trabajos.php?id=84"><img src="imgs/thumbs/item_tn_84.jpg" /></a></li>
<li data-filtro="website, banners"><a href="trabajos.php?id=131"><img src="imgs/thumbs/item_tn_131.jpg" /></a></li>
<li data-filtro="publicidad"><a href="trabajos.php?id=22"><img src="imgs/thumbs/item_tn_22.jpg" /></a></li>
<li data-filtro="publicidad"><a href="trabajos.php?id=45"><img src="imgs/thumbs/item_tn_54.jpg" /></a></li> 
```

并通过与名为“valor”的变量的值匹配的数据内容过滤一些，我想做类似的事情

```
var $set = $('li').filter(function(index){
    return $(this).data('filtro').indexOf(valor) > -1;
}); 
```

但不知何故我无法让它工作......你们有两分钟的时间让我睁开眼睛吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:53:19.303

我知道这是一个不同的解决方案，也许这不是你想要的，但你可以使用一个选择器：

```
$('li[data-filtro*="' + valor + '"]') //this should return all the elements you want. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:02:11.970

试试这个

```
$('li').each(function(){

        return $(this).data('filtro').indexOf(valor) > -1;
}); 
```

# android - sendBroadcast(intent) 如何在内部工作

> ID：10437530
> 
> 赞同：3
> 
> 时间：2012-05-03T18:48:04.660
> 
> 标签：android, android-intent

很想知道 sendBroadcast 在内部是如何工作的，如果有人可以解释一下，那就太好了。请指出我的实际实施。

我在看android源码

ContextWrapper.java 包含 sendBroadcast() 抽象方法的实现，它基本上只是调用基本实现。但是 sendBroadcast 通知所有已注册的 BroadcastReceiver 的实际实现在哪里？

```
@Override
public void sendBroadcast(Intent intent) {
    mBase.sendBroadcast(intent);
} 
```

编辑： mBase 来自 Context 类，它是一个抽象类，而 sendBroadcast 是那里的抽象方法定义，没有任何实现。

```
public abstract void sendBroadcast(Intent intent) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:00:24.313

[这](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java#L893)是 sendBroadcast 的实现。

# c# - 使用 JQuery 和 AJAX 加载 .Net WebControl

> ID：10437531
> 
> 赞同：0
> 
> 时间：2012-05-03T18:48:14.863
> 
> 标签：c#, jquery, .net, ajax, controls

我知道这是一个概念性问题，但我希望能够根据用户输入将 .Net WebControls 添加到页面。我希望这些控件是从服务器生成的 WebControls 和 UserControls。我不确定如何在确保控件完全呈现的同时执行此操作。我知道我可以轻松地从 JQuery 向服务器发出请求，然后毫无问题地将返回的标记添加到页面。有什么方法可以为 WebControl/UserControl 生成完整标记，以通过 AJAX 传递回 JQuery，以便我可以在页面上呈现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:00:56.203

您需要使用 AJAX 对页面进行异步回调。如果您想从客户端触发此操作，您可以使用`__doPostBack`并覆盖`RaisePostBackEvent`代码隐藏中的方法。

```
<script type="text/javascript">
    loadControls = function(input){
        __doPostBack(input.id, input.value);
    }
</script>
<asp:UpdatePanel ID="pnlLoadControls" runat="server">
    <ContentTemplate>
        <asp:TextBox ID="txtInput" runat="server" onkeyup="loadControls(this)" />
        <asp:PlaceHolder ID="plcLoadedControls" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

然后在代码隐藏中：

```
protected override void RaisePostBackEvent(IPostBackEventHandler source, string eventArgument)
{
    base.RaisePostBackEvent(source, eventArgument);
    if (source == txtInput)
    {
        plcLoadedControls.Controls.Add(new LiteralControl("Hello World!"));
    }
} 
```

# python - 为什么我在 Chrome 而不是 Firefox 中得到这个 WebDriver 异常

> ID：10437534
> 
> 赞同：1
> 
> 时间：2012-05-03T18:48:29.710
> 
> 标签：python, webdriver, selenium-webdriver, selenium-chromedriver

这是错误

```
WebDriverException: Message: "findElement execution failed;\\n Property \'Error\' of object [object DOMWindow] is not a function" 
```

我跑：

```
LoginPage.authenticate(self, self.admin_user) 
```

这工作正常，让我登录 OK，但是一旦我尝试使用 chrome 驱动程序在下一页上找到一个元素：

```
self.driver.find_element_by_id('Menu_LogInOut') 
```

我收到上述错误。它不会在 Firefox 中出错。

有没有其他人遇到过这个？到底是怎么回事？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:10:24.567

我们在应用程序中无意中覆盖了 window.Error。感谢 webdriver 指出这一点。

解决方法是不这样做，例如 window.Error_These_arent_the_droids_youre_looking_for。

XD

# node.js - 节点 AWS-lib：CreateTags 操作“对 Web 服务无效”

> ID：10437543
> 
> 赞同：2
> 
> 时间：2012-05-03T18:49:14.150
> 
> 标签：node.js, amazon-ec2, amazon-web-services, aws-lib

我正在使用 Node 的[aws-lib](https://github.com/livelycode/aws-lib)模块。我知道它是围绕节点 API 的一个相当薄的包装器，例如运行 call("CreateTags") 将包装 API 中记录的[CreateTags](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-CreateTags.html)调用。

**我成功地调用了其他 API 函数，例如 RunInstance 和 DescribeInstances 工作正常。**但是 CreateTags 会导致问题：

```
ec2.call("CreateTags", {
  'ResourceId.1':notmyrealresourceid,
  'Tag.1.Key':'Name'
  'Tag.1.Value':'Somemachine'
}, function(err, result){
  if ( err) {
    console.log('Failure tagging image');
    console.log(err)
  }
}) 
```

在 err 中响应以下内容：

```
The action CreateTags is not valid for this web service. 
```

API 明确提到 CreateTags 存在。我怎样才能让它工作？我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:22:41.617

这似乎源于[aws-lib中可选的](https://github.com/livelycode/aws-lib)[Amazon EC2](http://aws.amazon.com/ec2/) API 'version' 参数的可疑默认值，请参阅[var ec2Client](https://github.com/livelycode/aws-lib/commit/98b4a1bc3232f7333c75d107d066fc84480dbaae#L1R17)的当前主分支定义：

```
 // Amazon EC2 API handler which is wrapped around the genericAWSClient
  var ec2Client = function(obj) {
    var aws = genericAWSClient({
      host: obj.host, path: obj.path, accessKeyId: obj.accessKeyId,
      secretAccessKey: obj.secretAccessKey, secure: obj.secure
    });
    obj.call = function(action, query, callback) {
      query["Action"] = action
      query["Version"] = obj.version || '2009-11-30'
      query["SignatureMethod"] = "HmacSHA256"
      query["SignatureVersion"] = "2"
      return aws.call(action, query, callback);
    }
    return obj;
  } 
```

也就是说，所选的 EC2 API 版本默认为非常古老的“2009-11-30”（当前为“2012-04-01”），并且仅在 API 版本“2010-08-31”中引入了标签支持（参见[发布：Amazon EC2 于 2010年 9 月 19 日 - 通过](http://aws.amazon.com/releasenotes/Amazon-EC2/4174)[Amazon Elastic Compute Cloud API 参考](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/Welcome.html?r=96)中的[文档历史](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/WhatsNew.html)提供版本独立概述）。

因此，您只需要提供足够新的 EC2 API 版本就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:09:33.410

还...

确保您的任何参数中都没有多余的空格。例如

[https://ec2.amazonaws.com/?Action=RunInstances&ImageId=ami-7ba91a12&MaxCount=3&MinCount=1&Placement.AvailabilityZone=us-east-1b&Monitoring.Enabled=true&AWSAccessKeyId=AKIAJTLX2WXU44OXMBKQ&Version=2012-07-20](https://ec2.amazonaws.com/?Action=RunInstances&ImageId=ami-7ba91a12&MaxCount=3&MinCount=1&Placement.AvailabilityZone=us-east-1b&Monitoring.Enabled=true&AWSAccessKeyId=AKIAJTLX2WXU44OXMBKQ&Version=2012-07-20) &Timestamp=2012-09-19T21： 07:32&SignatureVersion=2&SignatureMethod=HmacSHA256&Signature=XXXXXXXXXXXXXXXXXXXXX

否则您将收到该错误消息。即使是版本以外的其他参数中的空格也会触发此错误。

您可以在此网站上找到最新版本的 ec2 工具。 [http://aws.amazon.com/developertools/351](http://aws.amazon.com/developertools/351)

# java - 通过 HTTPS 443 进行 Java 远程日志记录

> ID：10437544
> 
> 赞同：0
> 
> 时间：2012-05-03T18:49:15.193
> 
> 标签：java, sockets, logging, https, applet

如果我有一个站点的 Java 小程序，是否可以通过 HTTPS 进行远程日志记录？这是如何运作的？

我知道有 java sockethandler，它可以将日志定向到服务器，但是我应该在服务器端做什么，这样我才能获取日志并将其保存到服务器中的文件中。我尝试创建一个日志服务器应用程序并将其放在服务器上，但如果我指定端口 443，它会说

```
 `java.net.BindException: Address already in use: JVM_Bind` 
```

有人可以指出我并举一些例子，我应该在小程序端和服务器端做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:59:34.593

在该服务器上，TCP 端口 443 已在使用中 - 因此您必须使用不同的端口。

SSL 确实适用于任何端口 - 443 只是 HTTPS 的标准端口。因此，如果您启动 SSLServerSocket，您可以将其绑定到任何端口。

如果您的小程序使用端口 1234，那么在您的小程序中，您可以使用 SSLSocket 实例并让它连接到您的服务器 URL 和端口。

请注意，您很可能使用的是自签名证书。在这种情况下，您必须在您的小程序中嵌入自定义证书，并在打开 SSL 连接时将其设置为可信证书。

# php - 如何链接到数据库页面

> ID：10437546
> 
> 赞同：1
> 
> 时间：2012-05-03T18:49:21.210
> 
> 标签：php, mysql, html, database

我有一个页面显示我的数据库中的文章标题。它们是链接，单击时转到我想根据 id 显示标题和内容的单独页面。链接如下所示：

```
 echo '<h2><a href="../../pages/content_page/contents_page.php?id='.$review_id.'">'.$title.'</a></h2>'; 
```

并且显示它们的页面具有以下代码：

```
<?php
while ($row = mysql_fetch_assoc($query)){
    $review_id = $row['review_id'];
    $title = $row['title'];
    $review = $row['review'];
} ?>
<h1><?php echo $title; ?></h1><br /><br />

<p><?php echo $review; ?></p> 
```

但是当我点击一个链接时，url 会显示正确的 id 号，但我点击的每个链接的标题和显示的内容都是相同的。如何让他们为每个单独的 ID 进行更改？提前致谢！

编辑：

完整代码在这里：

```
<?php

include '../../mysql_server/connect_to_mysql.php';

$query = mysql_query("SELECT `review_id`, `title`, `review` FROM `reviews`");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Posts!</title>

<body>

<?php
while ($row = mysql_fetch_assoc($query)){
    $review_id = $row['review_id'];
    $title = $row['title'];
    $review = $row['review'];
} ?>
<h1><?php echo $title; ?></h1><br /><br />

<p><?php echo $review; ?></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:56:34.547

尝试这样的事情......

```
<?php
$id = $_GET['id'];
$query = mysql_query("SELECT `title`, `review` FROM `yourtable` WHERE `review_id` = '$id'");

$row = mysql_fetch_assoc($query);
//$review_id = $row['review_id']; **You will not need this because you already have it in the URL
$title = $row['title'];
$review = $row['review'];
?>

<h1><?=$title?></h1><br /><br />
<p><?=$review?></p> 
```

**编辑：**更改：

```
$query = mysql_query("SELECT `review_id`, `title`, `review` FROM `reviews`"); 
```

至：

```
$query = mysql_query("SELECT `title`, `review` FROM `reviews` WHERE `review_id` = '".$_GET['id']."'"); 
```

另外...您将需要对以下内容进行一些过滤`$_GET['id']`：

```
preg_match('/^[0-9]{1,9}$/', $_GET['id']) 
```

（假设您的 ID 是数字）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:52:20.543

您正在获取*所有*行。你需要一个`WHERE`条款。

```
$review_id = intval($_GET['review_id']);
$resource = mysql_query("SELECT title, review FROM reviews
                         WHERE review_id = $review_id");
if (!$resource) {
    trigger_error(mysql_error());
}
# etc.. 
```

# asp.net-mvc - MVC 4 - 访客审核和跟踪

> ID：10437549
> 
> 赞同：0
> 
> 时间：2012-05-03T18:49:25.533
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor, asp.net-mvc-4

在我开始自己的研究之前，我想我会把它放在那里。

在当前的 MVC 4 应用程序中，我正在寻找一种跟踪/审核访问者的方法。我正在寻找一种方法：

1.  记录每个站点请求的记录。

2.  记录将包括登录用户、会话 ID、请求的页面、来自的页面等内容。

3.  动作方法将用一个属性装饰以触发该记录的创建，因此我们可以准确指定要记录哪些动作方法。

有人尝试过或听说过这样的事情吗？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:07:27.357

ActionFilter 似乎是要走的路。我有一个类似要求的例子，我愿意发给你，让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:03:31.287

您应该考虑编写一个基本控制器，您的所有控制器都将从那里继承，然后在那里进行所有登录。

# java - PersistenceUtil.isLoaded 是什么意思？

> ID：10437552
> 
> 赞同：1
> 
> 时间：2012-05-03T18:49:47.813
> 
> 标签：java, hibernate, jpa-2.0

有人可以解释一下 PersistenceUtil.isLoaded 在 JPA 和休眠的上下文中返回什么。我的印象是它可以识别该值是否已加载并且可以在没有数据库访问权限的情况下访问。但是最近我遇到了一个案例，即 PesistenceUtil.isLoaded 返回 true，而该对象是 HibernateProxy 的一个实例，对它的任何访问都会引发 LIE。我将不胜感激任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:35:37.463

PersistenceUtil 中的方法 isLoaded 检查是否已加载实体。正在加载的实体意味着所有急切的属性都是从数据库加载或由应用程序分配的。在 JPA 2.0 规范中，这是用以下词语来说明的：

> 如果具有 FetchType.EAGER 的所有属性（无论是明确指定还是默认情况下）（包括关系和其他集合值属性）都已从数据库加载或由应用程序分配，则认为已加载实体。带有 FetchType.LAZY 的属性可能已加载，也可能未加载。

详细解释请参考*JPA 2.0 规范，3.2.9 加载状态*。

# c# - CDC DrawDragRect 等效项

> ID：10437556
> 
> 赞同：0
> 
> 时间：2012-05-03T18:49:58.290
> 
> 标签：c#, graphics

我正在将一些代码从 c++ 移植到 c#。我环顾四周，在 C# 中找不到与 DrawDragRect 等效的简单方法。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:37:43.963

```
ControlPaint.DrawReversibleFrame 
```

主要区别在于需要进行 2 次调用 - 一次使用旧的 rect，另一次使用新的。 `CDC::DrawDragRect`一次通话就完成了。

# python - 防止成员对象引用同一个列表

> ID：10437559
> 
> 赞同：1
> 
> 时间：2012-05-03T18:50:08.907
> 
> 标签：python, list, object

这应该很简单...

```
class Object:
    x = 0
    y = []

a = Object()
b = Object()

a.x = 1
b.x = 2
print a.x, b.x
# output: 1 2
# works as expected

a.y.append(3)
b.y.append(4)
print a.y, b.y
# output: [3, 4] [3, 4]
# same list is referenced  how to fix?
# desired output: [3] [4] 
```

据我所知，`a.y`并`b.y`引用相同的列表。我怎样才能让他们分开？最好不添加`__init__`方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:53:05.533

`y`当您定义类时，您只创建一次的值。要为 的每个实例分配不同的列表`y`，您确实需要一个 init 函数。只需放入`self.y = []`，`__init__`它就会按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:58:23.283

这里发生的情况是，您实际上已将 x 重新定义为**实例**级别属性，并且您的类定义将它们都作为**类**级别属性。

如果你这样做，你可以看到你原来的 x 仍然是 0。

```
>>> Object.x
0 
```

由于您没有创建新列表，因此它采用了 class 属性。如果你要这样做：

```
>>> a.y = []
>>> b.y = []
>>> a.y.append(1)
>>> b.y.append(2)
>>> print a.y, b.y
[1] [2] 
```

这就是你所期待的。真的，虽然你应该像这样定义你的类：

```
class Object(object):
    def __init__(self):
        self.y = []
        self.x = 0 
```

（并且不要使用 Object 作为类名！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T19:01:18.807

设置**实例**属性而不是**类**属性的最简单方法是使用`__init__`

当您引用**实例**属性（如`a.y`）时，解析器会首先尝试返回该属性，但如果未找到，则返回**类**属性 ( `Object.y`)。

在您的情况下，仅定义了一个由所有实例共享的**类属性。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T19:07:54.837

唯一的方法是创建`__init__`方法

```
class Object:
  def __init__(self):
    self.x = 0
    self.y = [] 
```

这样一来，在 Object 的构造中，一个新的值将被赋予，并为.**创建**`x`一个新的 List 。**`y`**

 **您之前所做的方式为 Object 创建了两个类/静态变量，但仅`y`保持不变，因为它仅静态保存对真实 List 的引用，反映到 Object 的所有实例。

关于另一个问题的类/静态变量的更多信息： [Python 中的静态类变量](https://stackoverflow.com/questions/68645/static-class-variables-in-python)

*对不起，如果我使用了错误的术语，我更像是一个 Java 人 ;-)**

# objective-c - 来自 iOS asihttprequest 的 Delphi XE2 DataSnap REST 处理参数

> ID：10437561
> 
> 赞同：2
> 
> 时间：2012-05-03T18:50:27.720
> 
> 标签：objective-c, json, delphi, delphi-xe2, datasnap

我正在为 iPhone 构建一个链接到**Delphi XE2 DataSnap REST server**的应用程序。

最初我是在 Embarcadero 的移动连接器的帮助下编写 iOS 前端的，但是由于许多错误，我不得不在 asihttprequest 的帮助下编写自己的链接。

虽然我可以让系统处理 JSON 请求并传递一两个参数（使用 URL），例如：-

```
NSURL *theURL = [NSURL URLWithString:@"http://192.168.1.2:8080/datasnap/rest/tservermethods1/SaveMileage/type1/100];
request = [ASIHTTPRequest requestWithURL:theURL]; 
```

（其中服务器方法为SaveMileage，两个参数值为type1和100）

但是，如果我想添加更复杂的参数，我需要使用 appendPostData 来使用 JSON 发布参数：-

```
[request appendPostData:jsonMutData]; 
```

下面是 jsonMutData 的输出： -

```
{
  "client_ref" : "ABC100",
  "mileage_type" : "Fee Work",
  "mileage_description" : "test",
  "mileage_id" : "0",
  "mileage_date" : "03\/15\/2012"
} 
```

但是，当我通过应用程序将其发布到我的服务器时，我收到以下响应，并且调用不是由 DataSnap 服务器处理的：-

```
{"error":"**Cannot convert JSON value** {\"client_ref\":\"ABC100",\"mileage_type\":\"Fee Work\",\"mileage_description\":\"test\",\"mileage_id\":\"\",\"mileage_date\":\"03\/15\/2012\"} input into TDBXTypes.WideString"} 
```

下面是 DataSnap 函数的结构： -

```
function TServerMethods1.updateSaveMileage(mileage_id: string; 
client_ref: string; mileage_date: String; mileage_type: string; 
mileagefigure: string; description: string; notepad: string): string; 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-19T19:18:08.910

我知道这个问题有点老了，但我遇到了同样的问题，我也找不到答案。

幸运的是，几个小时后，我终于想出了如何解决这个问题。

您需要做的就是修改您的函数以接受 TJSONObject，如下所示：

```
function TServerMethods1.UpdateMethod(AJSONObject: TJSONObject): TJSONObject;
var
  JSONText: string;
begin

  JSONText := AJSONObject.ToJSON;

  // code...

end; 
```

在 Delphi 10.1 Berlin 上测试。

# jquery - jquery ui对话框调用不会从外部文件打开

> ID：10437564
> 
> 赞同：1
> 
> 时间：2012-05-03T18:50:55.490
> 
> 标签：jquery, html, jquery-ui, modal-dialog

我几乎在每个页面上都有一个用于查看选择的 UI 对话框，因此我将其移至外部 js 文件。

它在点击函数调用它的每个页面上都能完美运行，但在一个页面上，我试图根据 javascript 变量的值自动打开对话框，但它失败了。

是不是因为加载外部js文件时，对话框的html不存在？如果我将外部移回页面，它可以正常工作。

谁能给我一个解决方案，我真的很想将视图对话框初始化代码保留在外部文件中。

外部js文件

```
$(function() { // ******* The Views Dialog
  var $divViewDialog = $('#divViewDialog');
  $divViewDialog.dialog({ autoOpen: false, modal: true,title: 'Select required view'});
  ..... etc 
```

调用对话框的页面代码 -

```
$(function() {

// ********* Other unrelated stuff

  if (ulx>1) { $divViewDialog.dialog('open');} // If logged in, Show View Dialog

  else {$divLoginDialog.dialog('open');}       // else show Login Dialog 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:53:51.617

可能是因为它们都设置为在文档就绪时执行，如果第二个先执行，则对话连线实际上还没有发生。您应该将连线更改为 JavaScript 函数，然后在打开对话框**之前在您的页面中调用该函数。**

**编辑：另外，您将`divViewDialog`放入一个只能由页面中的函数访问的变量中，因此它在您的外部文件中不起作用。我已更新下面的代码以不再使用该`divViewDialog`变量。**

尝试这个：

外部 JS 文件

```
function wireUpDialog() {
    $('#divViewDialog').dialog({ autoOpen: false, modal: true,title: 'Select required view'});
    ..... etc
} 
```

页：

```
$(function() {
    wireUpDialog();
    if (ulx>1) { $('#divViewDialog').dialog('open');}
    else {$divLoginDialog.dialog('open');}
}); 
```

# java - 我怎样才能访问放在 WEB-INF 文件夹中的文件

> ID：10437565
> 
> 赞同：1
> 
> 时间：2012-05-03T18:50:56.510
> 
> 标签：java, jsp, web-inf

我是java新手，遇到一个奇怪的问题。我在 WEB-INF 文件夹中创建了一些文件夹（主题、js、css）并将我的文件放到这个文件夹中。在 index.jsp 中，我通过以下方式使用 css 文件：

```
<style type="text/css"> 
        <%@include file="WEB-INF/css/style.css" %>
 </style> 
```

它运作良好。但在 style.css 文件中，我有一个 div 标签，它通过以下方式为标题标签设置背景：

```
#header{
background: url(../theme/violet/header.jpg) repeat-x;
} 
```

哦。我的问题就在这里。它不起作用。因为其他 css 命令工作得很好。我知道无法访问 WEB-INF 详细信息，但可能有一种方式类似于我在 index.jsp 页面中用于链接 style.css 的方式。

任何解决方案？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:34:44.967

从您包含 style.css 的方式来看，我猜您的 index.jsp 位于 WEB-INF 文件夹之外，客户端浏览器可以直接访问该文件夹。包含的 style.css 工作正常的原因是它包含在服务器端。但是在 style.css 中，为了获取背景图片，浏览器将启动一个新的连接到恰好位于 WEB-INF 文件夹内的图片，并且服务器拒绝将其发回，你注定要失败。

如果你有一个集中式控制器 servlet，你可以将你的 jsps 放在 WEB-INF 文件夹中，以防止直接访问它。您的 servlet 将根据请求参数将所有请求重定向到适当的 jsp。

据我所知，没有绝对的理由将图像、JavaScript 等放在这个文件夹中，当浏览器需要访问这个文件夹来检索数据时，你肯定会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:10:33.660

这是不可能的。如果您想从浏览器直接访问内容，它不能驻留在 WEB-INF 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:11:31.900

为什么要`theme, js, css`在`WEB-INF`文件夹中创建？`WEB-INF`目录包含有关应用程序的元数据。在正常操作期间，您应该不需要修改 WEB-INF 目录下的任何内容。

您可以直接在目录`theme, js, css`下`war`或`WebContent`目录下创建文件夹，这将很容易在您的jsp页面中使用。

[这个](http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html#bnadz)链接会帮助你。

# objective-c - 测量 CGFont 中最大字符的尺寸

> ID：10437567
> 
> 赞同：3
> 
> 时间：2012-05-03T18:51:05.777
> 
> 标签：objective-c, fonts, core-graphics

我正在使用 CoreAnimation 构建一个由多个图层组成的视图，稍后将对其进行动画处理。还有一些`CATextLayer`s 将只包含给定字体的给定大小的一个字符。为了让它漂亮，我想设置图层的边界，以便角色整齐地融入其中。

问题是我必须确定 a 中最大字符的大小，`CGFont`这将是文本层边界计算的基础。

在这个关于 SO [measure size of each character in a string 的](https://stackoverflow.com/questions/5129547/measure-size-of-each-char-in-an-nsstring)问题中，解释了如何获取每个字符的大小。所以一种解决方案是遍历字体的字符并找出最大的字符。

但是我找到了这个`CGFontGetFontBBox`功能。[文件](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGFont/Reference/reference.html#//apple_ref/c/func/CGFontGetFontBBox)说_

> **返回值**
> 
> 字体的边界框。
> 
> **讨论**
> 
> 字体边界框是 >font 中所有字形的所有边界框的联合。该值以字形空间单位指定。

在我看来，这正是我想要的。一个问题仍然是我必须将字形空间单位转换回像素。我使用以下代码进行了尝试，但结果很奇怪：

```
/* calculate the bounding box of the biggest character in the font with a given
 * font size
 */
- (CGSize) boundingBoxForFont:(CGFontRef)aFont withSize:(CGFloat)aSize
{
    if (!aFont) {
        CFStringRef fontName = CFStringCreateWithCString(NULL, "Helvetica", CFStringGetSystemEncoding());
        aFont = CGFontCreateWithFontName(fontName);
        CFRelease(fontName);
    }
    CGRect bbox = CGFontGetFontBBox(aFont);
    int units = CGFontGetUnitsPerEm(aFont);
    CGFloat maxHeight = ( CGRectGetHeight(bbox) / (CGFloat) units ) * aSize;
    CGFloat maxWidth = ( CGRectGetWidth(bbox) / (CGFloat) units ) * aSize;
    return CGSizeMake(maxWidth, maxHeight);
} 
```

奇怪的是 CGRect 比高`bbox`更宽，这对我来说毫无意义，因为字体中的字符通常比宽高，但也许我用错了。

是否有其他方法可以使用此功能？

**编辑**

是不是我把字符和字形混在一起了？会不会是字体包含代表多个字符的宽字形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:37:41.880

是的，我认为你在正确的轨道上。例如，像 ffl 这样的连字算作单个字形，并且很可能比高更宽。此外，破折号 - 应该与首都高度一样宽。

# ios - 如何在 iOS 上的 nsmutablearray 上存储 10 秒的 uislider 值以及如何将 nsmutablearray 值加载到其他 uislider

> ID：10437573
> 
> 赞同：0
> 
> 时间：2012-05-03T18:51:30.793
> 
> 标签：ios, nsmutablearray, uislider

我知道我必须将 uislider 值转换为 nsnumber 对象并将其存储在数组中，但是存储和加载值一段时间（例如 10 秒）所需的循环是什么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:01:06.777

好吧，你可以这样做：

```
 NSMutableArray *arrayWithSomeValues=[NSMutableArray array];
 // My options is the actual option from your slider. 
 [arrayWithSomeValues addObject:myOption];
 // ...
 // After adding everything you need
 // ...
 [self performSelector:@selector(switchValues:) withObject:arrayWithSomeValues afterDelay:10.0]; 
```

然后 switchValues 方法将接收您的数组，您可以在那里对它们做您想做的事情。

# xcode - 属性列表中的 Xcode 注释

> ID：10437578
> 
> 赞同：0
> 
> 时间：2012-05-03T18:51:44.617
> 
> 标签：xcode, mkmapview, plist, mkannotation, mkpinannotationview

我知道已经有人问过类似的问题，但我只能找到答案。因此，我正在构建一个拥有超过 100 个 Pin 图的应用程序，将其写入实现将是太多了。有人从您以前的经验中知道我如何使用属性列表文件来存储坐标，然后读取它们并将图钉放在我的地图上吗？最好的方法是什么，因为我确实使用过 plist 文件（编辑它们除外）。

有教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:13:21.997

这是来自我的一个应用程序：
这是在我的 MapViewController 类中：

```
 // Add annotations
    NSArray *bikePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *bikeDocumentsDirectory = [bikePath objectAtIndex:0];
    NSString *path = [bikeDocumentsDirectory stringByAppendingPathComponent:@"bikes.plist"];

    NSDictionary* bikesDictionary = [[NSDictionary alloc] initWithContentsOfFile:path];
    GetRacks *racks = [[GetRacks alloc] initWithDictionary:bikesDictionary];

    for(RackAnnotation *rackAnnotation in [racks getRacks])
    {
                [mapView addAnnotation:rackAnnotation];
    } 
```

GetRacks 类中的方法：

```
-(NSArray*)_parseXmlDictionary:(NSDictionary *)aDictionary
{
    if (aDictionary != NULL && [aDictionary count] > 0) {
        NSArray *locations = [aDictionary objectForKey:@"locations"];

        if (locations != NULL)
        {
            NSMutableArray *resultArray = [[NSMutableArray alloc] init];
            for (NSDictionary *currentResult in locations)
            {
                RackAnnotation *annotation = [[RackAnnotation alloc] init];
                annotation._address = [currentResult objectForKey:@"address"];
                annotation._id = [currentResult objectForKey:@"id"];
                annotation._information = [currentResult objectForKey:@"id"];
                annotation._stationType = [currentResult objectForKey:@"stationType"];
                annotation._readyBikes = [currentResult objectForKey:@"ready_bikes"];
                annotation._emptyLocks = [currentResult objectForKey:@"empty_locks"];
                annotation._lastUpdated = [currentResult objectForKey:@"last_update"];

                NSNumber *online = [currentResult objectForKey:@"online"];
                annotation._online = [online boolValue];

                CLLocationDegrees latitude = [[[currentResult objectForKey:@"coordinate"] objectForKey:@"latitude"] floatValue];
                CLLocationDegrees longitude = [[[currentResult objectForKey:@"coordinate"] objectForKey:@"longitude"] floatValue];
                CLLocationCoordinate2D location;
                location.latitude = latitude;
                location.longitude = longitude;

                annotation._coordinate = location;

                [resultArray addObject:annotation];
            }

            return resultArray;
        }
        else {
            return NULL;
        }
    }
    else {
        return NULL;
    }
} 
```

机架注释：RackAnnotation.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface RackAnnotation : NSObject <MKAnnotation> {
    NSString *_sub;

    NSString *_id;
    NSString *_address;
    NSString *_information;
    NSNumber *_stationType;
    NSString *_readyBikes;
    NSString *_emptyLocks;
    NSString *_lastUpdated;
    CLLocationCoordinate2D _coordinate;
    BOOL _online;
    CLLocationDistance _distance;
}

@property (nonatomic, strong) NSString *_sub;

@property (nonatomic, strong) NSString *_id;
@property (nonatomic, strong) NSString *_address;
@property (nonatomic, strong) NSString *_information;
@property (nonatomic, strong) NSNumber *_stationType;
@property (nonatomic, strong) NSString *_readyBikes;
@property (nonatomic, strong) NSString *_emptyLocks;
@property (nonatomic, strong) NSString *_lastUpdated;
@property (nonatomic, assign) CLLocationCoordinate2D _coordinate;
@property (nonatomic, assign) BOOL _online;
@property (nonatomic, assign) CLLocationDistance _distance;

- (NSNumber*)stationType;
- (NSString*)getInformation;
- (void)setSubTitle:(NSString*)newTitle;

- (NSString*)title;
- (NSString*)subtitle;
- (CLLocationCoordinate2D)coordinate;

@end 
```

机架注释.m：

```
#import "RackAnnotation.h"

@implementation RackAnnotation

@synthesize _sub, _id, _address, _information, _stationType, _readyBikes, _emptyLocks, _lastUpdated, _coordinate, _online, _distance;

#pragma mark Annotation functions

- (CLLocationCoordinate2D)coordinate
{
    return _coordinate;
}

- (NSString*)title
{
    return _address;
}

- (NSString*)subtitle
{
    return _sub;
}

#pragma mark -

@end 
```

plist 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>version</key>
    <string></string>
    <key>locations</key>
    <array>
        <dict>
            <key>id</key>
            <string>1</string>
            <key>address</key>
            <string>Djurgården Allmänna gränd</string>
            <key>information</key>
            <string></string>
            <key>stationType</key>
            <real>1</real>
            <key>ready_bikes</key>
            <string>0</string>
            <key>empty_locks</key>
            <string>0</string>
            <key>last_update</key>
            <string>2012-05-03 16:50:35</string>
            <key>coordinate</key>
            <dict>
                <key>latitude</key>
                <real>59.3242468</real>
                <key>longitude</key>
                <real>18.0948995</real>
            </dict>
            <key>online</key>
            <real>0</real>
        </dict>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:09:25.780

您还可以将注释存储在字典中，将它们全部放在一个数组中，然后将其保存在 NSUserDefaults 中。

像这样：

```
 NSString *latitude = [NSString stringWithFormat:@"%.06f", latitude];//latitude is a double here
    NSString *longitude = [NSString stringWithFormat:@"%.06f", longitude];//longitude is a double here
    NSString *title = [NSString stringWithFormat:@"%@", title];

    NSDictionary *annotation = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:latitude, longitude, title, nil] forKeys:[NSArray arrayWithObjects:@"latitude", @"longitude", @"title", nil]];

    NSMutableArray *annotations = [[pref objectForKey:@"annotations"] mutableCopy];
    [annotations addObject:annotation];

    NSUserDefaults pref = [[NSUserDefaults alloc] init];
    [pref setObject:annotations forKey:@"annotations"]; 
```

然后阅读注释，你会这样：

```
 NSMutableArray *annotations = [[pref objectForKey:@"annotations"] mutableCopy];

 for (NSDictionary *annotation in annotations)
 {
    latitude = [annotation objectForKey:@"latitude"]];
    longitude = [annotation objectForKey:@"longitude"]];
    title = [annotation objectForKey:@"title"]];
    //create an MKAnnotation and add to your maview
 } 
```

# c - K&R C 练习 4-11，静态变量

> ID：10437580
> 
> 赞同：3
> 
> 时间：2012-05-03T18:51:49.613
> 
> 标签：c

所以过去几周我一直在阅读 K&R 的书。我已经按顺序完成了所有操作，并没有真正跳过太多。如果我遇到问题，我通常可以用谷歌搜索示例并找到答案，但这一次，我被难住了。

4.6 节涉及在外部和内部声明静态变量。练习是这样说的：

> 练习 4-11。修改 getop 使其不需要使用 ungetch。提示：使用内部静态变量。

这与波兰计算器有关。getop 收集下一个运算符或操作数，然后 ungetch 将一个字符推回输入堆栈。

原始函数如下所示：

```
int getop(char s[])
{
int i, c;

while ((s[0] = c = getch()) == ' ' || c == '\t')
    ;

s[1] = '\0';    
if (!isdigit(c) && c != '.' && c != '-' )
    return c;       /* not a number */          
i = 0;
if (c == '-') {
    if (isdigit(c = getchar())) {
        s[i] = '-';
        ungetch(c);
    }
    else {
        ungetch(c);
        return '-';
    }
}

if (isdigit(c))     /* collect integer part */
    while (isdigit(s[++i] = c = getch()))
    ;

if (c == '.')       /* collect a fraction part */
    while (isdigit(s[++i] = c = getch()))
    ;

s[i] = '\0';

if (c != EOF)
    ungetch(c);

return NUMBER;
} 
```

我查找的大多数示例如下所示：

```
static int buf = EOF;

if (buf != EOF && buf != ' ' && buf != '\t'
    && !isdigit(buf) && buf != '.') {
    c = buf;
    buf = EOF;
    return c;
}
if (buf == EOF || buf == ' ' || buf == '\t') 
    while ((*s = c = getch()) == ' ' || c == '\t')
        ;
else 
    *s = c = buf;
buf = EOF; 
```

我的问题是这没有考虑到我们之前应该对 getop 进行的修改，即处理负数。我发现的所有示例似乎都没有利用变量是静态的这一事实，因此在调用函数后仍然存在。我们只是在最后将它设置为 EOF。如果函数调用之间的变量是什么并不重要，为什么要使用静态变量？

最后，我不确定如何使用静态变量将 c 重新粘贴到输入堆栈上。getch 使用 gettop 不知道的 getch 和 ungetch 之间的共享数组。

抱歉，对于这样一个简单的示例，帖子较长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:03:12.683

基本思想是，在`getop`您当前拥有的任何地方，您都`ungetch()`可以将静态变量设置为您无法获得的值。然后，在您调用的任何地方`getch()`，您都会从静态变量中获取值，而不是如果它有效（您可能需要第二个静态变量来说明它是否有效，您在阅读时清除它，并在您取消进入时设置它）。

# jersey - CRUD RESTful 教程

> ID：10437581
> 
> 赞同：0
> 
> 时间：2012-05-03T18:51:52.103
> 
> 标签：jersey, crud

我已经根据本[教程成功构建了一个](http://www.vogella.com/articles/REST/article.html)[CRUD RESTful Web 服务](http://www.vogella.com/articles/REST/article.html)。但是，我没有任何运气可以扩展它。具体来说，我正在尝试在某处（任何地方）插入一个新方法，该方法将接受来自网络浏览器的参数“ID”。

例如，我尝试了所有我能想到的方法来插入这个方法：

```
public class Gateway{

    public static void gateway (String id) throws IOException{
            FileWriter out = new FileWriter("C:\\Atest.txt");
            out.write("Hello "+id);
            out.close();
            }
} 
```

进入 5.3 类[TodoResource](http://www.vogella.com/articles/REST/article.html)或[TodosResource](http://www.vogella.com/articles/REST/article.html)。

例如在 TodoResource: Original-

```
// For the browser
@GET
@Produces(MediaType.TEXT_XML)
public Todo getTodoHTML() {
    Todo todo = TodoDao.instance.getModel().get(id);
    if(todo==null)
        throw new RuntimeException("Get: Todo with " + id +  " not found");
    return todo;
} 
```

我尝试通过网关（）-

```
// For the browser
@GET
@Produces(MediaType.TEXT_XML)
public Todo getTodoHTML() {
    Todo todo = TodoDao.instance.getModel().get(id);
    if(todo==null)
        throw new RuntimeException("Get: Todo with " + id +  " not found");
Bridge.gateway(id)  //Here I tried to pass id   
return todo;
} 
```

任何人都可以提一下如何将我的方法合并到这个例子中，这样它就不会忽略它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:49:20.087

根据您使用的浏览器，一些浏览器更喜欢 APPLICATION_XML 而不是 TEXT_XML。因此，很可能会调用以下方法，而不是您将 Bridge.gateway(id) 方法添加到的方法：

```
@GET
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public Todo getTodo() {
    Todo todo = TodoDao.instance.getModel().get(id);
    if(todo==null)
        throw new RuntimeException("Get: Todo with " + id +  " not found");
    return todo;
} 
```

# javascript - 套接字 IO 重新连接？

> ID：10437584
> 
> 赞同：44
> 
> 时间：2012-05-03T18:52:13.580
> 
> 标签：javascript, node.js, socket.io

`disconnect`一旦被调用，如何重新连接到套接字 io ？

这是代码

```
function initSocket(__bool){                    
    if(__bool == true){             
        socket = io.connect('http://xxx.xxx.xxx.xxx:8081', {secure:false});     
        socket.on('connect', function(){console.log('connected')});                                 
        socket.on('disconnect', function (){console.log('disconnected')});
    }else{
        socket.disconnect();
        socket = null;
    }
} 
```

如果我这样做`initSocket(true)`，它会起作用。如果我这样做`initSocket(false)`，它会断开连接。但是，如果我尝试使用 重新连接`initSocket(true)`，则连接不再起作用。如何使连接正常工作？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-04T05:26:23.260

好吧，您可以在这里选择...

第一次初始化应该连接的套接字值时`io.connect`，

下一次（在您调用 disconnect 一次之后），您应该重新连接`socket.socket.connect()`.

所以你的`initSocket`, 应该是

```
function initSocket(__bool){                    
    if(__bool){          
        if ( !socket ) {   
            socket = io.connect('http://xxx.xxx.xxx.xxx:8081', {secure:false});     
            socket.on('connect', function(){console.log('connected')});                                 
            socket.on('disconnect', function (){console.log('disconnected')});
        } else {
            socket.socket.connect(); // Yep, socket.socket ( 2 times )
        }
    }else{
        socket.disconnect();
        // socket = null; <<< We don't need this anymore
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-29T15:58:38.547

我知道你已经有了答案，但我来到这里是因为 socket.IO 客户端重新连接功能目前在节点中被破坏。

github repo 上的活动错误表明，很多人没有收到连接失败的事件，并且重新连接不会自动发生。

要解决此问题，您可以创建手动重新连接循环，如下所示：

```
var socketClient = socketioClient.connect(socketHost)

var tryReconnect = function(){

    if (socketClient.socket.connected === false &&
        socketClient.socket.connecting === false) {
        // use a connect() or reconnect() here if you want
        socketClient.socket.connect()
   }
}

var intervalID = setInterval(tryReconnect, 2000)

socketClient.on('connect', function () {
    // once client connects, clear the reconnection interval function
    clearInterval(intervalID)
    //... do other stuff
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-24T14:50:43.833

您可以按照客户端配置重新连接。

```
// 0.9  socket.io version
io.connect(SERVER_IP,{'force new connection':true });

// 1.0 socket.io version
io.connect(SERVER_IP,{'forceNew':true }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-17T11:02:12.593

这是一个老问题，但我最近一直在努力解决这个问题并在这里偶然发现。最新版本的 socket.io (>2.0) 不再具有[此处](https://stackoverflow.com/a/10443120/7948731)`socket.socket`指出的属性。

我正在使用`socket.io-client 2.2.0`，并且遇到了套接字似乎已连接（属性`socket.connected = true`）但未与服务器通信的情况。

所以，为了解决这个问题，我的解决方案是调用`socket.close()`和`socket.open`. 这些命令强制断开连接并建立新连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T15:16:51.777

我遇到了 socket-io 重新连接的问题。可能这种情况会帮助某人。我有这样的代码：

```
var io = require('socket.io').listen(8080);
DB.connect(function () {
    io.sockets.on('connection', function (socket) {
        initSockets(socket);
    });
}); 
```

这是错误的，因为开放端口分配的回调之间存在延迟。在 DB 初始化之前，一些消息可能会丢失。修复它的正确方法是：

```
var io = null;
DB.connect(function () {
    io = require('socket.io').listen(8080);
    io.sockets.on('connection', function (socket) {
        console.log("On connection");
        initSockets(socket);
    });
}); 
```

# java - 我的 JProgressBar 直到 100% 才更新

> ID：10437590
> 
> 赞同：5
> 
> 时间：2012-05-03T18:52:38.140
> 
> 标签：java, swing, swingworker, runnable, jprogressbar

好的，我有以下代码。

```
public class MyProgressBar extends JPanel implements MyData, Serializable {

    /**
     * 
     */

    public static final int MAX                = 10000;
    public static final int WIDTH              = 400;
    public static final int HEIGHT             = 75;

    private JProgressBar    MyBar              = new JProgressBar( SwingConstants.HORIZONTAL, 0, MAX );
    private JFrame          MyFrame            = new JFrame();

    private int             MyValue            = 0;

    private Thread          MyThread           = new Thread( new ProgressThread() );

    public MyProgressBar() {
        add(MyBar);

        int x = ( MyData.SCREEN.width  / 2 ) - ( WIDTH  / 2);
        int y = ( MyData.SCREEN.height / 2 ) - ( HEIGHT / 2);

        this.setBounds( x, y, WIDTH, HEIGHT );

        MyFrame.setBounds( x, y, WIDTH, HEIGHT );
        MyFrame.setUndecorated(true);
        MyFrame.getContentPane().setSize( new Dimension( WIDTH, HEIGHT ) );
        MyFrame.setMinimumSize( new Dimension( WIDTH, HEIGHT ) );
        MyFrame.setPreferredSize( new Dimension( WIDTH, HEIGHT ) );
        MyFrame.setSize( new Dimension( WIDTH, HEIGHT ) );
        MyFrame.setVisible(false);
        MyFrame.getContentPane().setLayout(null);

        MyBar.setStringPainted( true );
        MyBar.setBorderPainted( true );
        MyBar.setValue( 0 );
        MyBar.setBounds( 0, 0, WIDTH, HEIGHT );

        MyFrame.add( MyBar );
        MyFrame.pack();
        MyFrame.repaint();

    }

    public void MyUpdateBar() {
        MyBar.setValue( MyValue );
        MyBar.repaint();
        MyFrame.repaint();
        this.repaint();
        //dbug.Message( "MYPROGRESSBAR", "MyUpdateBar", "Value is %3.2f %d", MyBar.getPercentComplete(), MyValue );
    }

    public void MySetValue( int percent ) {
        MyValue = (int)( MAX * ( (double)percent / 100.0 ) );
        MyUpdateBar();
        //dbug.Message( "MYPROGRESSBAR", "MySetValue", "Value is %3.2f %d percent was %d", MyBar.getPercentComplete(), MyValue, percent );
    }

    public void CreateAndShow () {
        MyFrame.setVisible(true);
        MyThread.start();
    }

    public void HideAndClear () {
        MyThread.stop();
        //frame.setVisible(false);
    }

    class ProgressThread implements Runnable {
        public void run() {
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    while( MyValue < MyBar.getMaximum() ) {
                        MyBar.setValue( MyValue );
                        MyBar.repaint();
                        MyFrame.repaint();
                        dbug.Message( "MYPROGRESSBAR", "THREAD", "Value is %3.2f %d", MyBar.getPercentComplete(), MyValue );
                    }
                }
            });
        }

    }

} 
```

如您所见，我创建了一个我想展示进度的类。发生的事情是我实例化了这个类。加载我的 XML 文件，然后在我解析数据时，我调用更新 MyValue，当我让我的 dbug 消息出来时，我看到它。但是，在 100% 完成之前，栏本身甚至不会显示。我已经阅读了有关线程和遵循其他人的示例的信息，如果我将其作为他的示例，它就可以工作。如果我进行了一些调整（更改线程中的循环以填充进度条的设置值以读取值），它甚至不会显示，直到它为 100。

我做错什么了？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T18:58:47.340

你线程执行`SwingUtilities.invokeLater`。您正在有效地运行 Swing 的`Event Dispatch Thread`. 不知道你想达到什么目的。但看起来你正在阻塞`EDT`并且你的`while`循环没有更新，因为`MySetValue`没有执行。

考虑`SwingWorker`用于冗长的操作。[如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)演示了`SwingWorker`with 的使用`JProgressBar`。

确保`setValue`从`Event Dispatch Thread`. 你可以使用`SwingUtilities.invokeLater`它。阅读更多关于[Threads 和 Swing](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)的信息。

考虑这个简化的示例：

```
public static void main(String[] arguments) {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

    final JProgressBar bar = new JProgressBar(0, 100);

    Thread t = new Thread(){
        public void run(){
            for(int i = 0 ; i < 100 ; i++){
                final int percent = i;
                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        bar.setValue(percent);
                    }
                  });

                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {}
            }
        }
    };
    frame.add(bar);
    frame.pack();
    frame.setVisible(true);
    t.start();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T19:10:11.200

问题是您在 EDT 中使用了一个循环来更新进度。在该循环退出之前，EDT 无法调度事件（如重绘、重新验证、invokeLater、鼠标事件、按键事件等），从而阻止它刷新进度条。

您应该尝试找到一种方法，让 EDT 在每次更新进度条之间分派其事件。理想情况下，您可以使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)将“工作”移到 EDT 之外，同时通过 EDT 中的属性更改侦听器更新进度条。

供您参考，在 Java 中，方法和变量以小写字母开头。您的代码对其他人来说真的很难阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:39:25.760

因此，我尝试按照教程进行操作，这就是我所在的位置。

好的，我已经尝试过遵循教程，但我一直在某个地方迷路。我需要的是一个创建和显示进度条（JProgressBar）的类，当我迭代从文件加载并放入数据库内存中的数据时，我可以设置它的值。我的问题是，我发现的每个示例都有某种计数器，它填充进度条并从“主”函数执行。每次我将该教程更改为我可以随意调用并显示栏的类时，我都没有显示栏（即框架出现但栏甚至看起来不像是添加到框架中，直到之后迭代完成）。我曾尝试使用 SwingUtilities.invokeLater 和 SwingWorker （下面课堂上的最新尝试）都遇到相同的问题。更糟糕的是，我可以做一个 dbug.myMessage （基本上发送到 System. out) 并看到一条消息，显示该条在内存中发生变化，只是没有显示。我显然错过了一些可能很简单的东西，但我想不出它是什么。

哦，另一件事，如果我按原样离开本教程（[http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/ examples/components/ProgressBarDemo2Project/src/components/ProgressBarDemo2.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ProgressBarDemo2Project/src/components/ProgressBarDemo2.java)），只需将 main 更改为 createAndShow 方法，它就可以工作，但当然它不会做我需要它做的事情。

我确实发布了另一个关于此的问题，但是对课程进行了很大的改变，我认为最好发布一个新问题。

所以，这是我修改后的代码，似乎不起作用：

```
public class MyProgressBar extends JPanel implements PropertyChangeListener, 
                                                     MyData, 
                                                     Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -1632492668549544408L;

    private MyDebug         dbug               = new MyDebug( MyData.MYDEBUGCHECK.MYPROGRESSBAR.getOn() );

    public static final int MAX                = 100;
    public static final int WIDTH              = 400;
    public static final int HEIGHT             = 75;

    private JProgressBar    myBar              = new JProgressBar( SwingConstants.HORIZONTAL, 0, MAX );
    private JFrame          myFrame            = new JFrame();

    public  Task            task;

    class Task extends SwingWorker<Void, Void> {

        public int myValue = 0;

        @Override
        public Void doInBackground() {
            //Initialize progress property.
            setProgress(0);
            while (myValue < 100) {
                //Make random progress.
                //myValue += random.nextInt(10);
                setProgress( Math.min( myValue, 100 ) );
                dbug.myMessage( "MYPROGRESSBAR", "doInBackground", "Value is %3.2f %d", myBar.getPercentComplete(), myValue );
                myBar.repaint();
            }
            return null;
        }

        public void done() {
        }

        public void mySetValue( int percent ) {
            myValue = (int)( MAX * ( (double)percent / 100.0 ) );
            dbug.myMessage( "MYPROGRESSBAR", "mySetValue", "Value is %3.2f %d percent was %d", myBar.getPercentComplete(), myValue, percent );
        }

    }

    public MyProgressBar() {
        add(myBar);

        int x = ( MyData.SCREEN.width  / 2 ) - ( WIDTH  / 2);
        int y = ( MyData.SCREEN.height / 2 ) - ( HEIGHT / 2);

        this.setBounds( x, y, WIDTH, HEIGHT );

        myFrame.setBounds( x, y, WIDTH, HEIGHT );
        myFrame.setUndecorated(true);
        myFrame.getContentPane().setSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setMinimumSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setPreferredSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setSize( new Dimension( WIDTH, HEIGHT ) );
        myFrame.setVisible(false);
        myFrame.getContentPane().setLayout(null);
        myFrame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

        myBar.setStringPainted( true );
        myBar.setBorderPainted( true );
        myBar.setValue( 0 );
        myBar.setBounds( 0, 0, WIDTH, HEIGHT );
        myBar.addPropertyChangeListener( this );

        myFrame.add( myBar );

        //Create and set up the content pane.
        //JComponent newContentPane = new MyProgressBar();
        JComponent newContentPane = myBar;
        newContentPane.setOpaque(true);                     //content panes must be opaque

        myFrame.setContentPane(newContentPane);
        myFrame.pack();

    }

    public void createAndShow () {

        //Display the window.
        myFrame.setVisible(true);
        myFrame.repaint();

    }

    public void hideAndClear () {
        //myFrame.setVisible(false);
    }

    @Override
    public void propertyChange(PropertyChangeEvent args) {
        dbug.myMessage( "MYPROGRESSBAR", "propertyChange", "Value is %s", args.getPropertyName() );
        if ( "progress" == args.getPropertyName() ) {
            int progress = (Integer) args.getNewValue();
            //myBar.setValue(progress);
        }
    }

    public void start () {
        //Instances of javax.swing.SwingWorker are not reusuable, so
        //we create new instances as needed.
        task = new Task();
        task.addPropertyChangeListener(this);
        task.execute();
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-08T02:19:49.330

下面的代码片段在进行时更新进度条

```
 SwingUtilities.invokeLater(new Runnable() {
           public void run() {
           progressBar.setValue((int)percentage);
           //below code to update progress bar while running on thread
           progressBar.update(progressBar.getGraphics());}
         }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-29T06:14:11.283

进度条的动态进度更新通过以下代码实现：

```
 int progress = Math.round(((float)finished/(float)(total)) * 100);
 uploadPrgressBar.setIndeterminate(progress == 0);
 uploadPrgressBar.setValue(progress);
 uploadPrgressBar.update(uploadPrgressBar.getGraphics()); 
```

在循环中调用包含上述代码的方法（代码逻辑），每次迭代后都会动态更新进度条

# mysql - 带有子查询的 RLIKE？

> ID：10437593
> 
> 赞同：0
> 
> 时间：2012-05-03T18:52:46.730
> 
> 标签：mysql, sql, regex

我有一个查询

```
select X from survey
where survey_date > date_add(curdate(), interval -90 day) 
```

它显示了哪些 X 是当前的。但不幸的是，由于我无法控制的情况，返回的值不是值列表，而是逗号分隔值列表的列表。所以它返回

```
| X                  |
+--------------------+
|thing1              |
|thing2,thing3,thing4|
|thing5              |
|thing6,thing7       | 
```

等等。

现在我想用它作为子查询。如果数据是一对一的，我会做

```
select Y from othertable
where irrelevant_conditions && Y not in (
    select X from survey
    where survey_date > date_add(curdate(), interval -90 day)
); 
```

但这不起作用，因为我可能有，说`thing3`。

相反，我需要做`RLIKE`. （碰巧数据不能通过它们的形式发生冲突，所以这里不需要额外的正则表达式魔法来检查逗号。）这在 MySQL 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:04:13.593

要搜索逗号分隔的字符串，您可以使用[find_in_set](https://stackoverflow.com/questions/5458703/mysql-search-in-comma-list)。如果 Y 不是字符串，则进行隐式强制转换操作。

```
select Y from othertable 
where irrelevant_conditions && not exists (
    select  1
    from survey
    where 
     survey_date > date_add(curdate(), interval -90 day) and
     find_in_set(othertable.Y, X) > 0 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:47:42.140

danhip 的复杂查询可以简化为：

```
select Y from othertable 
join survey on survey_date > date_add(curdate(), interval -90 day)
    and find_in_set(othertable.Y, X) = 0 
where irrelevant_conditions 
```

# perl - 合并具有相似列的两个文件

> ID：10437594
> 
> 赞同：0
> 
> 时间：2012-05-03T18:52:49.713
> 
> 标签：perl

我有一个需要对齐的两个制表符分隔的文件。例如：

```
File 1:      File 2:
AAA 123      BBB 345
BBB 345      CCC 333
CCC 333      DDD 444 
```

（这些是大文件，可能有数千行！）

我想做的是让输出看起来像这样：

```
AAA 123
BBB 345  BBB 345
CCC 333  CCC 333
         DDD 444 
```

最好我想在 perl 中执行此操作，但不确定如何。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:13:49.800

如果它只是关于制作数据结构，这可能很容易。

```
#!/usr/bin/env perl

# usage: script.pl file1 file2 ...

use strict;
use warnings;

my %data;
while (<>) {
  chomp;
  my ($key, $value) = split;
  push @{$data{$key}}, $value;
}

use Data::Dumper;
print Dumper \%data; 
```

然后，您可以以您喜欢的任何格式输出。如果它真的是关于完全按原样使用文件，那么它有点棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:01:56.093

正如 ikegami 所提到的，它假定文件的内容按您的示例所示排列。

```
use strict;
use warnings;

open my $file1, '<file1.txt' or die $!;
open my $file2, '<file2.txt' or die $!;

my $file1_line = <$file1>;
print $file1_line;

while ( my $file2_line = <$file2> ) {
    if( defined( $file1_line = <$file1> ) ) {
        chomp $file1_line;
        print $file1_line;
    }

    my $tabs = $file1_line ? "\t" : "\t\t";
    print "$tabs$file2_line";
}

close $file1;
close $file2; 
```

查看您的示例，您在两个文件中显示了一些相同的键/值对。鉴于此，您似乎想要显示文件 1 独有的对、文件 2 独有的对，并显示常见的对。如果是这种情况（并且您没有尝试通过键或值匹配文件对），您可以`use List::Compare:`

```
use strict;
use warnings;
use List::Compare;

open my $file1, '<file1.txt' or die $!;
my @file1 = <$file1>;
close $file1;

open my $file2, '<file2.txt' or die $!;
my @file2 = <$file2>;
close $file2;

my $lc = List::Compare->new(\@file1, \@file2);

my @file1Only = $lc->get_Lonly; # L(eft array)only
for(@file1Only) { print }

my @bothFiles = $lc->get_intersection;
for(@bothFiles) { chomp; print "$_\t$_\n" }

my @file2Only = $lc->get_Ronly; # R(ight array)only
for(@file2Only) { print "\t\t$_" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:21:33.240

假设文件已排序，

```
sub get {
   my ($fh) = @_;
   my $line = <$fh>;
   return () if !defined($line);
   return split(' ', $line);
}

my ($key1, $val1) = get($fh1);
my ($key2, $val2) = get($fh2);

while (defined($key1) && defined($key2)) {
   if ($key1 lt $key2) {
       print(join("\t", $key1, $val1), "\n");
       ($key1, $val1) = get($fh1);
   }
   elsif ($key1 gt $key2) {
       print(join("\t", '', '', $key2, $val2), "\n");
       ($key2, $val2) = get($fh2);
   }
   else {
       print(join("\t", $key1, $val1, $key2, $val2), "\n");
       ($key1, $val1) = get($fh1);
       ($key2, $val2) = get($fh2);
   }
}

while (defined($key1)) {
   print(join("\t", $key1, $val1), "\n");
   ($key1, $val1) = get($fh1);
}

while (defined($key2)) {
   print(join("\t", '', '', $key1, $val1), "\n");
   ($key2, $val2) = get($fh2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:26:52.840

类似于 Joel Berger 的回答，但这种方法允许您跟踪文件是否包含给定的密钥：

```
my %data;

while (my $line = <>){
    chomp $line;
    my ($k)          = $line =~ /^(\S+)/;
    $data{$k}{line}  = $line;
    $data{$k}{$ARGV} = 1;
}

use Data::Dumper;
print Dumper(\%data); 
```

输出：

```
$VAR1 = {
  'CCC' => {
    'other.dat' => 1,
    'data.dat' => 1,
    'line' => 'CCC 333'
  },
  'BBB' => {
    'other.dat' => 1,
    'data.dat' => 1,
    'line' => 'BBB 345'
  },
  'DDD' => {
    'other.dat' => 1,
    'line' => 'DDD 444'
  },
  'AAA' => {
    'data.dat' => 1,
    'line' => 'AAA 123'
  }
}; 
```

# entity-framework - EF Code First 多个实体到同一个表

> ID：10437596
> 
> 赞同：5
> 
> 时间：2012-05-03T18:52:57.267
> 
> 标签：entity-framework, ef-code-first

我对如何通过首先使用代码将两个实体映射到同一个表感兴趣。这是一个例子：

```
public class User
{
    [Key]
    public int UserId { get; set; }
    public string Name { get; set; }
    public byte Age { get; set; }
    public bool Active { get; set; }
    public DateTime Created { get; set; }
}

public class UserViewModel
{
    [Key]
    public int UserId { get; set; }
    public string Name { get; set; }
    public byte Age { get; set; }
} 
```

基本上我受够了构建存储库。我想在模型构建器中为配置门户、用户门户和其他服务映射所有可能的模型，并且只使用 DbContext 进行所有操作。我想将 User 类设置为层次结构的顶部和一个构建数据库的类，而所有其他模型应该只用于各种应用程序。

我不想使用自动映射器。我还做了相当多的手动编码，这只是浪费了我的时间，而且每一次修改都需要我返回存储库并重新编码——这让我很恼火。

我尝试在模型构建器中使用它，但它警告我层次结构无效：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().Map(p => { p.ToTable("Users"); });
        modelBuilder.Entity<UserViewModel>().Map(p => { p.ToTable("Users"); });
    } 
```

另请记住，我并不是要实现“表拆分”。我不希望我的表被分成两个实体，我希望所有列都可以为空，除了一个具有主键的列，并允许不同的应用程序/Web 服务/Web 门户填充尽可能多的数据访问。

感谢所有的提示 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T08:29:10.287

你不能。一个表 = 一个实体（除了提到的表拆分和 TPH 继承等高级映射）。视图模型不是和实体。它只是查看数据/投影，所以以这种方式处理。您将始终与用户和项目用户一起查看您需要的模型：

```
var view = from u in context.Users
           select new UserViewModel
              {
                  UserId = u.UserId,
                  Name = u.Name,
                  Age = u.Age
              }; 
```

将此作为可重用的方法返回`IQueryable<UserViewModel>`，您可以做任何您想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T12:49:13.360

Table Per Hierarchy TPH 继承在实体框架中，代码优先

[https://www.youtube.com/watch?v=2i7jahkpeQ8&list=PL6n9fhu94yhUPBSX-E2aJCnCR3-_6zBZx&index=19](https://www.youtube.com/watch?v=2i7jahkpeQ8&list=PL6n9fhu94yhUPBSX-E2aJCnCR3-_6zBZx&index=19)

# iphone - 带有 AVAudioPlayer 的 UISwitch

> ID：10437598
> 
> 赞同：0
> 
> 时间：2012-05-03T18:53:09.770
> 
> 标签：iphone, xcode

playsound 部分有问题。当我关闭开关时 - soundchecker 将他的值更改为 NO，但 audioplayer 没有停止。出了什么问题？

```
-(IBAction)Settings {
    if(settingsview==nil) {
        settingsview=[[UIView alloc] initWithFrame:CGRectMake(10, 130, 300, 80)];
        [settingsview setBackgroundColor:[UIColor clearColor]];

        UILabel *labelforSound = [[UILabel alloc]initWithFrame:CGRectMake(15, 25, 70, 20)];
        [labelforSound setFont:[UIFont systemFontOfSize:18]];
        [labelforSound setBackgroundColor:[UIColor clearColor]];
        [labelforSound setText:@"Sound"];

        SoundSwitch = [[UISwitch alloc]initWithFrame:CGRectMake(10, 50, 20, 20)];
        SoundSwitch.userInteractionEnabled = YES;

        if(soundchecker == YES) [SoundSwitch setOn:YES];
        else [SoundSwitch setOn:NO];
        [SoundSwitch addTarget:self action:@selector(playsound:) forControlEvents:UIControlEventValueChanged];

        [settingsview addSubview:labelforSound];
        [settingsview addSubview:SoundSwitch];
        [self.view addSubview:settingsview];
   }

   else {
        [settingsview removeFromSuperview];
        [settingsview release];
        settingsview=nil;
   }
} 
```

// - - - -播放声音 - - - - - - - - - //

```
-(void)playsound:(id) sender {
    NSString *pathtosong = [[NSBundle mainBundle]pathForResource:@"Teachme" ofType:@"mp3"];
    AVAudioPlayer* audioplayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:pathtosong] error:NULL];
    if(SoundSwitch.on) {
        [audioplayer play];
        soundchecker = YES;
    }

    if(!SoundSwitch.on) {
        [audioplayer stop];
        soundchecker = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:23:48.673

它不会停止，因为每次`playsound`调用你都在创建一个 NEW `AVAudioPlayer`。因此，当您调用 时`[audioplayer stop]`，您不是在`AVAudioPlayer`当前正在播放的播放器上调用它，而是在刚刚创建的新播放器上调用它。

您可以将 AVAudioPlayer 变量添加到类的标题中（如果需要，可以作为属性）。然后你可以这样做：

```
-(void)playsound:(id) sender
{ 
    if(SoundSwitch.on) 
    {
        if(!audioPlayer) {
             NSString *pathtosong = [[NSBundle mainBundle]pathForResource:@"Teachme" ofType:@"mp3"];
             audioplayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:pathtosong] error:nil];
        }
        [audioplayer play];
        soundchecker = YES;
    } else {
        if(audioPlayer && audioPlayer.isPlaying) {
             [audioplayer stop];
        }
        soundchecker = NO;
    }
} 
```

# javascript - 如何解决处理 iframe 的此错误

> ID：10437600
> 
> 赞同：0
> 
> 时间：2012-05-03T18:53:21.770
> 
> 标签：javascript, jquery

当用户单击“取消”按钮时，我试图阻止文件上传。为此，我正在考虑停止 iframe 内的传输。问题是能够正确编码。下面是我想要实现的代码，但是当我单击“取消”按钮时出现此错误：

```
Uncaught exception: [Exception.... “Not enough arguments [nslDOMHTML.Document.execCommand]” nresult: “0x80570001 (NS_ERROR_XPC_NOT_ENOUGH_ARGS)” location: “JS frame;; https://......../QandATable.php = <TOP_LEVEL> ;; line 765” data: no] 
```

首先如何修复此错误，其次如何正确编写下面的代码，以便在单击“取消”按钮时停止 iframe 内的传输？

下面是开始上传文件的 startImageUpload() 函数。在该函数中是处理单击“取消”按钮的函数；

```
function startImageUpload(imageuploadform){

              $(".imageCancel").click(function() {
              $('.upload_target')[0].contentwindow

              if ($('.upload_target')[0].contentWindow.document.execCommand)
    { // IE browsers
       $('.upload_target')[0].contentWindow.document.execCommand('Stop');
    }
else
    { // other browsers
        $('.upload_target')[0].contentWindow.stop();
    }

          return stopImageUpload();

    });

      return true;
} 
```

以下是包含 iframe 的表单代码：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "</p><p class='imagef1_cancel' align='center'><label>" + 
    "<input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label></p>" + 
    "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:00:58.310

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms537423%28v=vs.85%29.aspx)，该`Stop`命令不受支持。

# ruby-on-rails - 无法让 Rails 调试在 Ubuntu 的 aptana 3 中工作

> ID：10437601
> 
> 赞同：2
> 
> 时间：2012-05-03T18:53:27.810
> 
> 标签：ruby-on-rails, ubuntu, aptana

在我解决问题之前，我已经尝试过教程并查看了 stackoverflow 问题，包括[这个](https://stackoverflow.com/questions/9831260/how-todebugging-rails-3-1-x-appruby-1-9-3-on-aptana-studio3-in-ubuntu)问题，所以我不认为这是一个重复的答案。

我正在使用 Aptana 3.0.4、Rails 3.14 和 ruby​​ 1.9.2。

我可以通过 aptana 或命令行正常启动服务器。当我尝试在调试模式下运行时，我得到了这个：http: [//i.imgur.com/vYKuY.jpg](https://i.imgur.com/vYKuY.jpg)

但是，我已经安装了 ruby​​-debug-ide gem，将它列在我的 gem 文件中，并安装了 bundle。我也尝试过使用 ruby​​-debug19 和 ruby​​-debug-ide19 （尝试每个 gem 后安装的包）。

`gem environment`是安装我的 gem 的正确路径。ruby-debug-ide 和所有其他都位于该路径中。

我不确定我做错了什么。请帮忙。

# .net - 无法在本地 IIS 上托管 Web 申请，因为 VS2010“确定”按钮被禁用

> ID：10437603
> 
> 赞同：1
> 
> 时间：2012-05-03T18:53:28.120
> 
> 标签：.net, visual-studio-2010

VS2010 -> 文件 -> 新项目 -> ASP.Net Web 应用程序模板 -> 位置：- 我键入[http://localhost/](http://localhost/) “OK” 被禁用。有人可以帮忙吗？我在 www.spiderdotnet.com 上引用了教程，并且编写了相同的程序，我们创建了 Web 应用程序并将其托管在本地。链接是[http://www.dotnetspider.com/tutorials/AspNet-Tutorial-64.aspx](http://www.dotnetspider.com/tutorials/AspNet-Tutorial-64.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:55:13.317

与所有其他普通项目类型一样，ASP.Net Web 应用程序存在于您的硬盘上。
您应该选择一个普通文件夹。

完成编写应用程序后，您可以将其*部署* 到 IIS。

# html - Cache-Manifest 如何处理身份验证 cookie？

> ID：10437605
> 
> 赞同：1
> 
> 时间：2012-05-03T18:53:31.983
> 
> 标签：html, authentication, cache-manifest

使用缓存清单时如何读取/存储身份验证 cookie？

我正在使用缓存清单来加速具有 Safari Mobile 浏览器基线的 jquery-mobile 应用程序。我正在使用多页模板，在其中一个页面中，我向我的服务器发出 ajax 请求以获取动态数据。

我遇到的问题是，当我缓存多页模板（index.html）时，从技术上讲，它在随后的重新加载/视图期间没有经过身份验证，并且当我发出 ajax 请求时，服务器无法读取预期的 cookie 值绕过 ACL，从而允许获取请求。

预先感谢您的回复。

# c# - 从后面的代码更改 SqlDataSource 中的选择查询

> ID：10437607
> 
> 赞同：0
> 
> 时间：2012-05-03T18:53:38.023
> 
> 标签：c#, asp.net, .net, telerik

我有 2 个 RadGridViews - Telerik。我对每一个都使用 sqlDataSource。在第一个我有客户，在第二个我有订单。

第一个网格是多选的。我可以选择多行。我想要的关键功能是，每次用户更改选择时，如果第一个网格，那么在第二个网格中应该是所有订单，其中 iserId 位于第一个网格的选定用户 ID 中。

有一个事件：

```
protected void GvUsers_OnSelectedIndexChanged(object sender, EventArgs e) 
```

在这种情况下，我想修改我的订单数据源上的选择命令并执行它。

我怎样才能做到这一点 ？

```
dsOrders.SelectCommand =
        select ...

    GvOrders.DataSource = dsOrders.Select(DataSourceSelectArguments.Empty);

    GvUserOrders.DataBind();
    GvUserOrders.Rebind(); 
```

这不起作用，使用探查器我什至看不到对数据库的查询

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:55:40.163

你是什​​么意思我该怎么做？你一开始是怎么做的？在选定的索引更改事件上，创建一个 sql 命令对象，使用新的选择，执行查询，将其分配给`dataset`// `datatable`。`reader`然后将该对象分配给gridview`datasource`和`databind()`它。

关键是您最初加载了网格视图。要再次更改 gridview 的内容，请遵循相同的过程，只需将新的 sqlcommand 对象（指向不同的 SQL Select 语句）分配给 gridview 的数据源。

# css - Firefox 中的微小可点击区域

> ID：10437617
> 
> 赞同：1
> 
> 时间：2012-05-03T18:54:19.837
> 
> 标签：css, html-lists, hyperlink, footer

在 Firefox 中，我页脚中链接的可点击区域是 TINY。可点击区域不跨越整个标签 - 无论是宽度还是高度。在 IE 中，这很好。有任何想法吗？

这是我的页脚代码：

```
<div id="footer">
<ul>
<li>RKM Research and Communications, Inc.&nbsp;&nbsp;|</li>
<li>1039 Islington St&nbsp;&nbsp;|</li>
<li>Portsmouth, NH  03801&nbsp;&nbsp;|</li>
<li>603.433.3982&nbsp;&nbsp;|</li>
<li><a href="mailto:info@rkm-research.com">email us</a></li>
</ul>
<ul class="copyright">
<li>&copy; 2012 RKM Research and Communications, Inc.   </li>
<li><a href="privacy.html">Privacy policy</a> </li>
<li><a href="terms.html">Terms of use</a></li>
</ul> 
```

和我的 CSS：

```
div#footer ul li{
color : #036;
background-color : transparent;
display: inline
}

div#footer ul li a{
color : #115EAC;
text-decoration : none;
display:inline-block;
paddding:10px 20px;
}

.footer ul li a:hover{color:#F6901E;
text-decoration : underline;
} 
```

我什至尝试使用类应用块样式，但它仍然没有帮助：

```
<li class="flink"><a href="mailto:info@rkm-research.com">email us</a></li>
</ul> 
```

CSS：

```
.flink ul li a{
color : #115EAC;
text-decoration : none;
display:block;
paddding:10px 20px;
float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:05:02.663

小世界，我也住在朴茨茅斯。

使用您提供的代码，可点击区域应有尽有。您可以在这里验证这一点：http: [//jsfiddle.net/cCDaL/1/](http://jsfiddle.net/cCDaL/1/)

我把每个`a`元素的背景都做成了黄色，这样你就可以清楚地看到可点击区域是什么，而且确实应该是这样。

我认为您的问题的答案是您有另一个 CSS 规则使可点击区域变小，可能`line-height`或`padding`（链接中的填充不可点击）。您可以使用 Chrome 或 Firefox 检查器查看此处可能存在的问题。

**另一个编辑：**在 Firefox Aurora 14.0a2 中，可点击区域确实也很正常，对我来说，在您的网站[http://www.rkm-research.com/](http://www.rkm-research.com/)上。这是 Firefox 检查器的屏幕截图： ![在此处输入图像描述](../Images/0191b72480ffcd7dc7ae0eb89abed7e1.png)

# jquery - 为什么没有记录 jQuery.camelCase() 函数？

> ID：10437619
> 
> 赞同：2
> 
> 时间：2012-05-03T18:54:25.530
> 
> 标签：jquery, api, camelcasing

我在 jQuery 文档中搜索“camelCase”，但一无所获，然后我开始寻找不同的方法名称。最终，我在源代码中找到了它，但这花费了我相当多的时间。

所以我想知道，为什么 API 中没有记录这个方法？我记得，它曾经是...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T18:55:51.787

因为它在公共 API 之外。它可以随时更改或删除。

# c++ - 如何实现无限多维数组？

> ID：10437622
> 
> 赞同：1
> 
> 时间：2012-05-03T18:54:31.880
> 
> 标签：c++, arrays, size

我想使用下面的代码，我想将它用于“未知大小的输入”。例如有一个数组`int cac[1000][1000]`。我可以使用`vector<vector<int> > array;`，那么我该如何初始化它`-1`呢？有什么建议么？

```
#include <sstream>
#include <iostream>
#include <vector>
#include <cstdlib>
#include <memory.h>

using namespace std;

int cac[1000][1000];
string res[1000][1000];
vector<string> words;
int M;

int go(int a, int b){
 if(cac[a][b]>= 0) return cac[a][b];
 if(a == b) return 0;

 int csum = -1;
 for(int i=a; i<b; ++i){
  csum += words[i].size() + 1;
 }
 if(csum <= M || a == b-1){
  string sep = "";
    for(int i=a; i<b; ++i){
        res[a][b].append(sep);
        res[a][b].append(words[i]);
        sep = " ";
    }
  return cac[a][b] = (M-csum)*(M-csum);
 }

 int ret = 1000000000;
 int best_sp = -1;
 for(int sp=a+1; sp<b; ++sp){
 int cur = go(a, sp) + go(sp,b);
 if(cur <= ret){
    ret = cur;
    best_sp = sp;
 }
 }
 res[a][b] = res[a][best_sp] + "\n" + res[best_sp][b];
 return cac[a][b] = ret;
 }

int main(int argc, char ** argv){
memset(cac, -1, sizeof(cac));
M = atoi(argv[1]);
string word;
while(cin >> word) words.push_back(word);
go(0, words.size());
cout << res[0][words.size()] << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:10:12.103

您可以做的是使用关联数组，其中键是一对 ( `rowPosition`, `ColumnPosition`)。当您想要设置时，`array[i][j]`您只需添加或更新值`assoArray[Pair(i,j)]`。您可以假设任何不在关联数组中的元素都具有初始值。

一般来说，无限多维数组用于理论目的。我希望我没有误解这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:15:15.587

使用 STL 中的 std::vector 比下面的解决方案简单得多，这篇文章的评论中已经指出了这一点。我发现这个网站有效地解释了这个话题：http: [//www.learncpp.com/cpp-programming/16-2-stl-containers-overview/](http://www.learncpp.com/cpp-programming/16-2-stl-containers-overview/)

无限大小的数组实际上是不可能的。但是，您可以使用动态分配基本上实现该效果。这是一些示例代码：

```
int counter = 0;
int* myArray = new int[1000]; 
```

用数据填充数组，每次添加值时递增计数器。当计数器达到 1000 时，执行以下操作：

```
int* largerArray = new int[2000];
for( int i = 0; i < 1000; i++ )
{
    largerArray[i] = myArray[i];
}
delete[] myArray;
myArray = largerArray; 
```

使用这种方法，您可以创建最接近无限大小的数组的东西，而且我不认为复制件的性能会成为问题

# java - 如何使用 Java 找到 Arraylist 的最大值及其两个索引位置

> ID：10437623
> 
> 赞同：-1
> 
> 时间：2012-05-03T18:54:35.813
> 
> 标签：java, arraylist

如何从`Arraylist`索引位置找到最大值？

```
ArrayList ar = new ArrayList();
ar.add(2); // position 0
ar.add(4); // position 1
ar.add(12); // position 2
ar.add(10); // position 3
ar.add(12); // position 4

String obj = Collections.max(ar);
int index = ar.indexOf(obj);

System.out.println("obj max value is " + obj + " and index position is " + index); 
```

上面的程序只是将输出作为具有 value`12`和 index position的第一个 max 对象返回`2`。

但我的实际输出应该是索引位置`2`和`4`（因为最大值`12`存在于两个索引位置）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-26T14:29:07.167

您可以使用**Collections**查找列表的最大值，然后使用属性**indexOf**查找其在列表中的位置。

```
List<Integer> myList = new ArrayList<Integer>();
myList.add(3); // adding some values
myList.add(5);
myList.add(7);
myList.add(3);
myList.add(1);

Integer maxVal = Collections.max(myList); // should return 7
Integer maxIdx = myList.indexOf(maxVal); // should return 2 (position of the value 7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-12T11:58:08.380

从 Java 8 开始，这可以通过以下方式完成：

```
int index = IntStream.range(0, ar.size()).boxed()
        .max(Comparator.comparing(ar::get)).orElse(-1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:56:08.297

只需遍历列表一次，有另一个列表来推送最大数量的索引

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T19:09:08.170

未经测试：

```
public static int maxIndex(List<Integer> list) {
  Integer i=0, maxIndex=-1, max=null;
  for (Integer x : list) {
    if ((x!=null) && ((max==null) || (x>max))) {
      max = x;
      maxIndex = i;
    }
    i++;
  }
  return maxIndex
}
// ...
maxIndex(Arrays.asList(1, 2, 3, 2, 1)); // => 2
maxIndex(Arrays.asList(null, null)); // => -1
maxIndex(new ArrayList<Integer>()); // => -1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T08:28:57.693

公共静态无效主要（字符串[]参数）{

```
 List<Integer> ar=new ArrayList<Integer>();
    ar.add(2); `adding the values in the list`
    ar.add(5);
    ar.add(6);
    ar.add(4);
    ar.add(6);
    ar.add(5);
    ar.add(6);

    int max=Collections.max(ar);

    while(ar.contains(max))
    {
        int i=ar.indexOf(max); 
        System.out.println("the index of 6:"+ar.indexOf(max));
        ar.set(i, -1);
        System.out.println(ar);
    } 
```

}

# java - 谷歌安卓应用内购买“内容交付”如何正确交付内容？

> ID：10437628
> 
> 赞同：4
> 
> 时间：2012-05-03T18:54:44.480
> 
> 标签：java, android, in-app-purchase

我目前正在尝试编写应用内购买。我一直在寻找有关 Google 无法处理的某些内容的最佳实践的文档、信息和教程。

到目前为止我做了什么：

我有一个正在运行的计费服务来处理与 Google Play 的对话。该服务可以完成“样本”交易，我的应用程序会收到消息。

我现在想将内容传送到设备。我认为接下来需要发生的事情：

1.  我的应用程序需要联系我的服务器并显示一些成功交易的证据。做一些 Cert 握手或一些类似的废话。

2.  然后我将下载内容并将该内容放入数据库中。我可能应该使用某种设备唯一加密来加密数据库。

我正在寻找学习如何做上述两件事以及其他任何需要做的事情。我想要合理数量的安全/加密。任何文档/教程/示例项目都会很棒，我试过搜索这些东西，但没有找到我想要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:39:15.080

您必须对示例中的计费服务客户端代码进行一些更改。

首先，您应该调用您的服务器以获取将用于 RestoreTransactions 或进行购买的 nonce，以使事情尽可能安全。

让我们看看会发生什么。以下是 Google Play 调用的 BillingReceiver：

```
/**
 * This is called when Android Market sends information about a purchase state
 * change. The signedData parameter is a plaintext JSON string that is
 * signed by the server with the developer's private key. The signature
 * for the signed data is passed in the signature parameter.
 * @param context the context
 * @param signedData the (unencrypted) JSON string
 * @param signature the signature for the signedData
 */
private void purchaseStateChanged(Context context, String signedData, String signature) {
    Intent intent = new Intent(Consts.ACTION_PURCHASE_STATE_CHANGED);
    intent.setClass(context, BillingService.class);
    intent.putExtra(Consts.INAPP_SIGNED_DATA, signedData);
    intent.putExtra(Consts.INAPP_SIGNATURE, signature);
    context.startService(intent);
} 
```

如果您查看 BillingService.java 中的 handleCommand，它会处理这个意图：

```
/**
 * The {@link BillingReceiver} sends messages to this service using intents.
 * Each intent has an action and some extra arguments specific to that action.
 * @param intent the intent containing one of the supported actions
 * @param startId an identifier for the invocation instance of this service
 */
public void handleCommand(Intent intent, int startId) {
    String action = intent.getAction();
    if (Consts.DEBUG) {
        Log.i(TAG, "handleCommand() action: " + action);
    }
    if (Consts.ACTION_CONFIRM_NOTIFICATION.equals(action)) {
        String[] notifyIds = intent.getStringArrayExtra(Consts.NOTIFICATION_ID);
        confirmNotifications(startId, notifyIds);
    } else if (Consts.ACTION_GET_PURCHASE_INFORMATION.equals(action)) {
        String notifyId = intent.getStringExtra(Consts.NOTIFICATION_ID);
        getPurchaseInformation(startId, new String[] { notifyId });
    } else if (Consts.ACTION_PURCHASE_STATE_CHANGED.equals(action)) {
        String signedData = intent.getStringExtra(Consts.INAPP_SIGNED_DATA);
        String signature = intent.getStringExtra(Consts.INAPP_SIGNATURE);
        purchaseStateChanged(startId, signedData, signature);
    } else if (Consts.ACTION_RESPONSE_CODE.equals(action)) {
        long requestId = intent.getLongExtra(Consts.INAPP_REQUEST_ID, -1);
        int responseCodeIndex = intent.getIntExtra(Consts.INAPP_RESPONSE_CODE,
                ResponseCode.RESULT_ERROR.ordinal());
        ResponseCode responseCode = ResponseCode.valueOf(responseCodeIndex);
        checkResponseCode(requestId, responseCode);
    }
} 
```

然后调用PurchaseStateChanged 函数。这个函数应该被调用你的服务器来为你的内容交付创建一个会话。来自 Security.java 的代码应该被移植到服务器端以验证云中的交易。

```
/**
 * Verifies that the data was signed with the given signature, and calls
 * {@link ResponseHandler#purchaseResponse(Context, PurchaseState, String, String, long)}
 * for each verified purchase.
 * @param startId an identifier for the invocation instance of this service
 * @param signedData the signed JSON string (signed, not encrypted)
 * @param signature the signature for the data, signed with the private key
 */
private void purchaseStateChanged(int startId, String signedData, String signature) {
    ArrayList<Security.VerifiedPurchase> purchases;
    purchases = Security.verifyPurchase(signedData, signature);
    if (purchases == null) {
        return;
    }

    ArrayList<String> notifyList = new ArrayList<String>();
    for (VerifiedPurchase vp : purchases) {
        if (vp.notificationId != null) {
            notifyList.add(vp.notificationId);
        }
        ResponseHandler.purchaseResponse(this, vp.purchaseState, vp.productId,
                vp.orderId, vp.purchaseTime, vp.developerPayload);
    }
    if (!notifyList.isEmpty()) {
        String[] notifyIds = notifyList.toArray(new String[notifyList.size()]);
        confirmNotifications(startId, notifyIds);
    }
} 
```

确保将您的公钥放在移植的 Security.java 文件中的服务器端。

# iphone - iOS：另一个 UITableView 问题中的水平 UITableView

> ID：10437632
> 
> 赞同：0
> 
> 时间：2012-05-03T18:54:58.210
> 
> 标签：iphone, uitableview, asynchronous, didselectrowatindexpath

我想创建一个水平滚动行的表。我在 Raywenderlich 的博客中关注了 Felipe Laso 的教程，[点击此处](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)。除了 2 个问题外，它工作得很好。

首先，内部水平表应该有一个基于数组的动态单元格数量，该数组使用来自外部垂直表的 ASIHTTPRequest 块异步获取。

```
//Inner horizontal table number of rows
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
    //self.articles is being assigned from cell.articles asynchronously from the outer vertical table
    return [self.articles count];
} 
```

如果 self.articles 尚未分配，上面的代码会给我一个错误。那么如何确定外部 ASIHTTPRequest 块的行数并重新加载内部表？

其次，我想根据每个单元格的水平和垂直索引推送另一个视图。

我在 2 表中有 2 个 didSelectRowAtIndexPath 方法，我尝试在两个表中对 indexpath.row 进行 NSLog 记录，内部表记录了单元格的索引，但是外部表记录了 NULL。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:32:48.413

如果你还没有读入你的数据，那么你没有任何行，你应该返回 0。当你读入你的数据，然后当读取完成时，在列表上调用 reloadData 以刷新所有调用. 此时您可能也想推动您的第二个视图。

# c# - datagridview 中的列值

> ID：10437641
> 
> 赞同：0
> 
> 时间：2012-05-03T18:55:25.563
> 
> 标签：c#

我使用以下代码在 datagridview 中获取单元格的值。这些代码告诉我每个单元格都被点击了。我想使用一些代码只是向我展示特殊的列，例如索引为 1 的列，但这些代码向我展示了每个已被点击的代码。想象一下，我只想显示第 1 列及其单击的单元格。请帮我解决这个问题

```
string str = dataGridView1.CurrentCell.Value.ToString(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:58:45.570

所以你试图从每一行的第二列获取数据？

```
int index = 1;
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    DataGridViewCell cell = row.Cells[index];
    // Do something.
} 
```

**编辑：**根据您的评论，当单击行中的任何单元格时，您试图获取第二列的值。试试这个：

```
string str = dataGridView1[1, e.RowIndex].Value.ToString(); 
```

# css - 内联块锚标记上的垂直对齐中间

> ID：10437643
> 
> 赞同：12
> 
> 时间：2012-05-03T18:55:34.313
> 
> 标签：css, internet-explorer-7, internet-explorer-6

我需要我的链接和按钮看起来相同，但我无法以与“按钮”标签相同的方式垂直对齐“a”标签内的文本。需要注意的是，标签需要能够处理多行文本（因此 line-height 不起作用）。

```
a,button {
  display: inline-block;
  -moz-box-sizing: border-box;
  width: 150px;
  height: 150px;
  vertical-align: middle;
  border: 1px solid #000;
  text-align: center;
} 
```

请参阅下面的 jsfiddle：

[http://jsfiddle.net/bZsaw/3/](http://jsfiddle.net/bZsaw/3/)

如您所见，我可以使用其中的 span 标签组合并将“display:table”设置为“a”并将“display:table-cell”和“vertical-align:middle”设置为跨度，但这在 IE7 中不起作用。

```
a,button {
    width: 150px;
    height: 150px;
    border: 1px solid #000;
    text-align: center;
}

a {
    display: table;
    -moz-box-sizing: border-box;
}

a span, button span {
    vertical-align: middle;
    text-align: center;
}

a span {
    display: table-cell; 
} 
```

寻找一个简单的纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T19:04:42.667

我发现垂直对齐文本并允许在文本太长时换行的唯一可靠方法是使用 2 容器方法。

外部容器的行高至少应为内部容器指定的行高的两倍。在您的情况下，这意味着以下内容：

```
a {
    width: 150px;
    height: 150px;
    border: 1px solid #000;
    text-align: center;
    line-height: 150px;
    display: block;
}

a span {
    display:inline;
    display:inline-table;
    display:inline-block;
    vertical-align:middle;
    line-height: 20px;
    *margin-top: expression(this.offsetHeight < this.parentNode.offsetHeight ? parseInt((this.parentNode.offsetHeight - this.offsetHeight) / 2) + "px" : "0");
} 
```

如果您希望所有内容都内联，请在 a 标签上添加左浮动。这是在 A 标签中也带有长文本的更新示例.. [http://jsfiddle.net/bZsaw/13/](http://jsfiddle.net/bZsaw/13/)

您可以将跨度上的行高设置为您喜欢的任何值，如果它小于父级行高的一半，如果您的文本超过父级容器宽度，它将居中并允许文本换行。据我所知，这适用于所有现代浏览器。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-06-02T22:57:42.023

所有答案都没有更新，而且基本上都是 hack，你应该使用新的 CSS3 特性，在这种情况下[是 flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

```
a,button {
  -moz-box-sizing: border-box;
  width: 150px;
  height: 150px;
  display:flex;/*CSS3*/
  align-items:center;/*Vertical align*/
  justify-content:center;/*horizontal align*/
  border: 1px solid #000;
}
```

```
<a href="#"><span>Testing 1,2,3</span></a>
    <button><span>Testing 1,2,3</span></button>
```

这应该适用于您的问题，请注意，如果设置`align-items`，`justify-content`则行为相反`flex-direction:vertical`，默认为`flex-direction:row`.

随意使用，所有浏览器都支持[caniuse.com/#search=flex](https://caniuse.com/#search=flex)

还可以查看免费和优秀的课程[flexbox.io/](http://flexbox.io/)他是这方面最好的老师

另请查看[css-grid](https://css-tricks.com/snippets/css/complete-guide-grid/)，也是 CSS3 中的新功能

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T18:58:28.567

如果您的文本不会大于框的宽度，您可以将 line-height 设置为等于框的高度。

`line-height:150px;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T04:25:44.263

我发现的最干净和最一致的方式是这个

```
display: grid;
place-items: center; 
```

[https://jsfiddle.net/j8bktum9/](https://jsfiddle.net/j8bktum9/)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-10-06T18:25:35.990

**使用** `line-height:150px;`和`display-inline:block;`

# java - java中的枚举类

> ID：10437647
> 
> 赞同：-1
> 
> 时间：2012-05-03T18:55:43.690
> 
> 标签：java, enumeration

嗨，我有一个要理解的代码，所以这里是枚举代码：

```
 package com.unice.miage.igift.enumeration;

  /**
   *
   * @author Root
   */
  public enum BookEnum {
      BOOK("BOOK"),
      MAGAZINE("MAGAZINE");

        private String bookText;

         BookEnum(String bookText){
        this.bookText = bookText;
          }

          public String getBookText() {
    return bookText;
           }

     public void setBookText(String bookText) {
       this.bookText = bookText;
       }

    } 
```

我找不到这个枚举的目标

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:58:43.750

枚举的“目标”可能不在枚举的*声明*中，它可能在枚举的**使用**中。

从这里有限的信息来看，它可能用于避免“字符串类型”的代码，该代码会在所有地方使用字符串“BOOK”和“MAGAZINE”。

例如：

```
// old code
void doSomething( String bookType )
{
    if (bookType.equals("BOOK")
    {
        // do something with book
    }
    else if (bookType.equals("MAGAZINE")
    {
        // do something with magazine
    }
    // OOPS, this code is broken if someone adds a new type of book, or uses the string "Book" or "book"
}

// new code
void doSomething( BookEnum bookType )
{
    switch (bookType)
    {
         // cases for each enum value
    }
} 
```

该方法的新版本不允许您传入不存在的书籍类型，或在“旧代码”中可能有效或无效的任意大小写字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T19:05:37.030

我没有看到额外`bookText`字段的任何好处。

遵循简单的枚举也会做同样的事情，

```
public enum BookEnum {
    BOOK,
    MAGAZINE;
} 
```

你可以得到这样的字符串，

```
BookEnum book = BookEnum.MAGAZINE;
String bookText = book.name(); 
```

# javascript - 调试 jQuery 插件——在 1.4 中工作，在 1.7 中似乎不工作

> ID：10437649
> 
> 赞同：0
> 
> 时间：2012-05-03T18:55:48.043
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用一个 JQuery 插件做一些工作，该插件在用户输入时对文本区域框中的文本进行倒计时。由于某种原因，该插件无法按我的预期工作。

我是一个合理的 javascript 开发人员，但之前没有构建过插件。我正在尝试调试这个并找出它为什么不起作用。

该插件将自己描述为使用 jQuery 1.3.x 和 1.4.x 进行测试。我必须使用 1.7.1。

我已经能够使用`alert()`'s 追踪到插件的这一部分——我可以看到处理到了一个特定的点，但似乎没有继续进行。或者我可能误读了它，因为我还在学习如何调试 jQuery 插件。

在代码片段中，我添加了注释，说明我可以在哪里`alert`工作，哪里不能工作。

```
$.fn.NobleCount = function(c_obj, options) {
    var c_settings;
    var mc_passed = false;

    // if c_obj is not specified, then nothing to do here
    if (typeof c_obj == 'string') {

        // check for new & valid options
        c_settings = $.extend({}, $.fn.NobleCount.settings, options);

        // was max_chars passed via options parameter? 
        if (typeof options != 'undefined') {
            mc_passed = ((typeof options.max_chars == 'number') ? true : false);
        }

                    // THIS ALWAYS FIRES
                    console.log("I am here");

        // process all provided objects
        this.each(function(){

                           // THIS NEVER FIRES
                           console.log("I DON'T SEEM TO EVER EXECUTE");

            var $this = $(this);

            // attach events to c_obj
            attach_nobility($this, c_obj, c_settings, mc_passed);
        });
    }

    return this;
}; 
```

函数中的代码`attach_nobility`似乎永远不会运行。

从 jquery 1.4 到 jquery 1.7 有什么改变使这项工作有所不同吗？

编辑：这是[原始 NobleCount jquery 插件](http://tpgblog.com/noblecount/)页面的链接

编辑：我这样调用插件：

```
(function() {

  $('#how_to_improve_input').NobleCount('#how_to_improve_count');

}).call(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:06:12.310

我不认为问题出在插件上。我用与您提供的代码相同的模式做了一个基本的。

```
(function( $ ){
    $.fn.foo = function (c_obj, options) {
        var c_settings;
        var mc_passed = false;
        if (typeof c_obj == 'string') {
            c_settings = $.extend({}, {a:"xxxx"}, options);
            console.log("aaaa");
            this.each(
                function(){
                    console.log("I DON'T SEEM TO EVER EXECUTE");
                    var $this = $(this);
                }
            );
        }
        return this;
    };
})( jQuery ); 
```

如果我用一个简单的选择器运行它

```
jQuery("div").foo("asdf"); 
```

我收到了大量的日志消息，因为它进入了每个循环。

如果我这样做

```
jQuery("sfsdfdiv").foo("asdf"); 
```

即使没有元素，它仍然会进入函数。我在控制台中看到“aaaa”。因此，您需要查看选择器而不是插件。

# python - python中的轻量级单元测试

> ID：10437650
> 
> 赞同：4
> 
> 时间：2012-05-03T18:55:48.857
> 
> 标签：python, racket

我正在考虑使用 Python 来教授入门编程，并且正在寻找一个轻量级的单元测试框架。我看过 unittest，而且——据我所知——它看起来非常*不*轻量级。

例如，这是我希望能够写的：

```
import unittest

def f(x):
  return x+2

checkEqual(f(3),5) 
```

……*没有别的*了。为了告诉你我从哪里来，这是我用 Racket 的初级学生语言写的：

```
(define (f x)
  (+ x 2))

(check-expect (f 3) 5) 
```

……就是这样。肯定有人写了这个工具，而我只是没有找到它？

（对于任何煽动火焰的行为，请提前道歉。这是一个严肃的问题。）

自我编辑：

在任何人指出这一点之前：是的，我可以写 def checkEqual(a,b): print(a==b) ; 我正在寻找更多的东西：它应该能够检查带有公差的数字，它应该支持只打印失败的测试用例，它应该能够告诉你有多少测试用例失败了。同样，我相信可以编写此代码；我只是想避免重新发明轮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:00:25.623

我会推荐[Doctest](http://docs.python.org/library/doctest.html)。

您的示例如下所示：

```
def f(x):
    """
    >>> f(3)
    5
    """
    return x + 2 
```

为什么？：

1.  超级简单：“当我运行这个东西时，我应该得到这个答案”
2.  它适用于功能级别 - 这可能允许您在上课之前引入测试
3.  反映交互式 Python 体验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T19:30:33.750

Doctests 是一个很好的建议，但如果你想接近你的示例代码，我建议使用 py.test (pytest.org)。你的例子会写成这样：

```
def f(x):
    return x+2

def test_equal():       # py.test looks for functions that start with test_
    assert f(3) == 5 
```

如果我把它放在一个名为 tt.py 的文件中并用 py.test 运行它，它看起来像这样：

```
w:\tmp>py.test tt.py
============================= test session starts =============================
platform win32 -- Python 2.6.6 -- pytest-2.2.3
collected 1 items

tt.py .

========================== 1 passed in 0.01 seconds =========================== 
```

如果我将断言更改为 f(3) == 6，然后再次运行它，我会得到：

```
w:\tmp>py.test tt.py
============================= test session starts =============================
platform win32 -- Python 2.6.6 -- pytest-2.2.3
collected 1 items

tt.py F

================================== FAILURES ===================================
_________________________________ test_equal __________________________________

    def test_equal():       # py.test looks for functions that start with test_
>       assert f(3) == 6
E       assert 5 == 6
E        +  where 5 = f(3)

tt.py:5: AssertionError
========================== 1 failed in 0.01 seconds =========================== 
```

py.test 也可以扩展，你可以让它运行覆盖率，在多个 CPU 上分发测试等。它还可以找到并运行 unittest 测试，还可以运行 doctests。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T20:16:20.347

两个常见的替代方案是[*nose*](https://github.com/nose-devs/nose)和[*py.test*](http://pytest.org/latest/)。它们都具有非常轻量级的语法，但也功能齐全。

这是对鼻子的扩展介绍：http: [//ivory.idyll.org/articles/nose-intro.html](http://ivory.idyll.org/articles/nose-intro.html)

这是一个示例函数并使用 py.test 进行测试：

```
# content of test_sample.py
def func(x):
    return x + 1

def test_answer():
    assert func(3) == 5 
```

从命令行运行测试：

```
$ py.test
=========================== test session starts ============================
platform darwin -- Python 2.7.1 -- pytest-2.2.2
collecting ... collected 1 items

test_sample.py F

================================= FAILURES =================================
_______________________________ test_answer ________________________________

    def test_answer():
>       assert func(3) == 5
E       assert 4 == 5
E        +  where 4 = func(3)

test_sample.py:5: AssertionError
========================= 1 failed in 0.02 seconds ========================= 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T19:02:01.930

```
import unittest

def f(x):
    return x + 2

class TestFunctionF(unittest.TestCase):
    def test_f(self):
        self.assertEqual(f(3), 5)

if __name__ == '__main__':
    unittest.main() 
```

产生：

```
----------------------------------------------------------------------
Ran 1 test in 0.000s
OK 
```

# average - 收集的传感器数据分析软件

> ID：10437654
> 
> 赞同：2
> 
> 时间：2012-05-03T18:55:52.647
> 
> 标签：average, sensors, smoothing, moving-average

我有一个应用程序，它从[智能房屋](http://2011.solarteam.org/)中的十几个传感器收集数据。它将数据存储在 MySQL 数据库中，表格格式如下：

```
CREATE TABLE IF NOT EXISTS `datapoints` (
  `PointID` int(11) NOT NULL,
  `System` varchar(50) NOT NULL,
  `Sensor` varchar(50) NOT NULL,
  `Value` varchar(50) NOT NULL,
  `Timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`PointID`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

该`System`字段用于对传感器进行分组，例如，“空气”系统具有“温度”和“湿度”传感器，“太阳能电池板”系统具有“发电量 (kW)”和“今日生产量 (kWh)”。这些字段都是`varchar`因为有几种数据类型来自传感器，而原始数据库设计者采取了简单的方法。（我知道这种数据结构效率不高，但改变它为时已晚。）

传感器包括空气温度、湿度、太阳能电池板输出、太阳能热水器温度等。

我们现在拥有这个每天收集数万个数据点的数据库。到目前为止，我们已经使用了一个查询数据库的应用程序来构建传感器数据随时间变化的图表。但是，我们现在有许多 GB 的数据，最终将耗尽日志硬件上的存储空间。

我正在寻找一种从数据中收集统计数据然后将其删除的方法。我在想一些很像 [Google Analytics | 皮维克 | Awstats] 用于数据。问题是我真的不知道从哪里开始。我希望能够查看更详细的数据，例如：

*   1 天的所有数据
*   1 周的每小时数据
*   1 个月的每日数据
*   我想我想永远保留每周和每月的统计数据。

但是，我不想过多地平滑数据。最终，我将不得不对数据进行平滑处理，但我想尽可能地保持详细。例如，如果我的电力生产有一个很大的峰值，如果它被平滑（降低）到每小时数据中，然后再次（降低）在每日数据中，然后再次（降低）在每周数据中，一周的数据不会反映出现峰值，因为平均值与所有点的平均值不同。

是否有任何软件已经可以做到这一点？如果没有，什么是开始的好方法？我可以用任何语言来做，但首选是 .NET、PHP 或 C（对于 Windows），（按此顺序），因为这些是其他项目成员已经知道的语言，并且日志硬件已经设置好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T03:43:11.193

您的数据问题是如此之大并且可能是开放式的，我认为没有任何单一工具可以解决您的问题。您可能需要针对您的特定问题发明自己的工具。

我认为你应该看看科学和工程社区使用的基于 Python 的工具。这包括用于交互式数据分析和可视化的[IPython](http://ipython.org/)和[Matplotlib 。](http://matplotlib.org/)使用[Numpy](http://www.numpy.org)和[Scipy](http://www.scipy.org)处理大型数据数组。最后，当您需要进行一些严肃的数字运算时，可以考虑[使用 SciKit Learn 。](http://scikit-learn.org/stable/)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-03T15:43:54.587

如果我今天仍在做这个项目（以及其他此类项目），我会使用[时间序列数据库（TSDB）](https://www.wikiwand.com/en/Time_series_database)。

TSDB 专门设计用于随着时间的推移摄取大量数据点并允许对其进行分析。

我现在一直在为另一个项目使用 PostgreSQL 的[TimeScale](https://github.com/timescale/timescaledb/)扩展，它完全可以满足我的需要。

# python - ImportError：没有名为 test_data 的模块，但 test_data.py 与 PyCharm 下使用 virtualenv 下的 test.py 位于同一目录中

> ID：10437661
> 
> 赞同：6
> 
> 时间：2012-05-03T18:56:18.847
> 
> 标签：python, import, virtualenv, pycharm, unittest2

在 test.py 中，我正在尝试导入 test_data：

```
import unittest2
import re

from test_data import receipt1_example 
```

test_data.py 与 test.py 位于同一目录中。我收到以下错误：

> /Users/ahammond/.virtualenvs/ric2.6/bin/python2.6 /Applications/PyCharm.app/helpers/pycharm/utrunner.py /Users/ahammond/src/hackfest_spring_2012/parse_me/test.py::test true 测试开始于上午 11:30 ... 回溯（最近一次通话最后一次）：
> 文件“/Applications/PyCharm.app/helpers/pycharm/utrunner.py”，第 121 行，在模块 = loadSource(a[0]) 文件中/Applications/PyCharm.app/helpers/pycharm/utrunner.py”，第 44 行，在 loadSource 模块 = imp.load_source(moduleName, fileName) 文件“/Users/ahammond/src/hackfest_spring_2012/parse_me/test.py”，行4、在 from test_data import receipt1_example ImportError: No module named test_data
> 
> 进程以退出代码 1 结束

如您所见，我使用 virtualenv 在 pycharm 下运行它。这是配置的屏幕截图：

![PyCharm 调试配置](../Images/3c4ab30eeb7c6d467b9616abdac43a75.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:18:39.460

我使用的解决方法是：

```
import sys
import os
try:
    import test_data
except ImportError:
    sys.path.append(os.path.dirname(__file__))
    try:
        import test_data
    finally:
        sys.path.remove(os.path.dirname(__file__)) 
```

一位朋友告诉我，还可以将目录条目添加到某些包含目录中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T19:27:11.610

请尝试[PyCharm 2.5.1 RC](http://confluence.jetbrains.net/display/PYH/JetBrains+PyCharm+Preview)，`sys.path`构建时出现错误（它包含不正确的、重复的项目源目录）。

如果不是这样，您可以在|中将其他目录标记为**Source** 或将它们**添加**到.`Preferences``Project Structure`**`Python Interpreters`**

# python - 查找字符串中的最后一个字符外观

> ID：10437663
> 
> 赞同：0
> 
> 时间：2012-05-03T18:56:28.323
> 
> 标签：python, string

如果有这个输入：

```
/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff 
```

我想找到字符最后一次 `"/"`出现的时间，并获取字符串`BasicTest`

这样做的好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:06:41.687

[os.path](http://docs.python.org/library/os.path.html)模块提供基本的路径名操作。

```
>>> from os.path import *
>>> file = '/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff'
>>> splitext(basename(dirname(file)))[0]
'BasicTest' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T18:59:20.150

```
>>> s = "/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff"
>>> ind = s.rfind('/')
>>> ind1 = s[:ind].rfind('/')
>>> print(s[ind1+1:ind].split('.')[0])
BasicTest 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T19:09:16.910

这是 os 的一个例子：

```
>>> p = '/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff'
>>> os.path.dirname(p)
'/Users/myMac/Desktop/MemoryAccess/BasicTest.asm'
>>> os.path.splitext(os.path.dirname(p))
('/Users/myMac/Desktop/MemoryAccess/BasicTest', '.asm')
>>> os.path.basename(os.path.splitext(os.path.dirname(p))[0])
'BasicTest' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:59:43.983

好吧，“BasicTest”紧随“/”的倒数第二个出现，但除此之外，试试[`rfind`](http://docs.python.org/library/stdtypes.html#str.rfind).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T19:01:30.900

以下将返回`BasicTest.asm`，这是成功的一半：

```
'/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff'.split('/')[-2] 
```

可以使用相同的技巧来拆分“。”

```
'BasicTest.asm'.split('.')[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T08:40:07.420

在 python 中使用 re

```
import re
s = "/Users/myMac/Desktop/MemoryAccess/BasicTest.asm/someStuff"
pattern = re.compile(r"/(\w+)\.\w+/\w*$")
match = re.search(pattern,s)
print match.group(1) 
```

# jaxb - 在带有 EclipseLink Moxy 的超类上使用带有 XmlTransient 注释的 xjc:superClass 时出错（jaxb 2.1 生成的代码）

> ID：10437666
> 
> 赞同：1
> 
> 时间：2012-05-03T18:56:39.317
> 
> 标签：jaxb, eclipselink, jaxb2, moxy

我在超类上使用 xjc:superClass 和 @javax.xml.bind.annotation.XmlTransient 注释。

我正在尝试切换到 Moxy，但出现此错误：

```
'Exception Description: Property [aspectStyleBlock] in class [com.aplia.q4.document.ValueStyle] references a class [com.aplia.q4.domain.AbstractBlock] that is marked transient, which is not allowed.
 - with linked exception:
[Exception [EclipseLink-50057] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.JAXBException
' . 
```

这一切在 jaxb 2.1 下都可以正常工作

如果我删除超类上的 XmlTransient 注释，则会收到此错误：

```
'ava.lang.RuntimeException: javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.NullPointerException]
....

'Caused by: javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.NullPointerException]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:825)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:136)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:142)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:129)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:93)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:331)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at com.aplia.q4.service.hosting.impl.JAXBAdapter.<init>(JAXBAdapter.java:35)
    ... 27 more
Caused by: java.lang.NullPointerException
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateChoiceCollectionMapping(MappingsGenerator.java:686)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMapping(MappingsGenerator.java:434)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMappings(MappingsGenerator.java:1996)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMappings(MappingsGenerator.java:1957)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateProject(MappingsGenerator.java:193)
    at org.eclipse.persistence.jaxb.compiler.Generator.generateProject(Generator.java:174)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:830)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:823)
    ... 41 more' 
```

我有大约 100 个从模式生成的类（我不控制模式）。我尝试使用[http://jaxb2-commons.dev.java.net/basic/inheritance](http://jaxb2-commons.dev.java.net/basic/inheritance)来实现接口而不是 xjc:superclass，但它需要我列出所有 100 个类，因为绑定 xpath 可以t 在多个节点上匹配。不愿意这样做，除非这是解决问题的唯一方法。

这阻碍了我转换为 Moxy impl 的努力。

有关我的设置的详细信息以及我选择添加 XmlTransient 注释的原因：

来自[https://sites.google.com/site/codingkb/java-2/jaxb/jaxb-4](https://sites.google.com/site/codingkb/java-2/jaxb/jaxb-4)

" 导致在派生另一个类的类上不允许使用 @XmlValue 您希望自动生成的 JAXB 类扩展一个公共父类...所以您将这样的内容添加到您的 XSD：

不幸的是，当您进行编译时，您会收到一条错误消息：线程“main”com.sun.xml.bind.v2.runtime.IllegalAnnotationsException 中的异常：IllegalAnnotationExceptions @XmlValue 的计数在派生另一个类的类上是不允许的.

解决方法是在基类中添加注解：@javax.xml.bind.annotation.XmlTransient public class JAXBSuperClass { ... }"

我的 pom 文件（仅相关部分）：

```
<dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.3.0</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.1.13</version>
        <scope>runtime</scope>
    </dependency>

        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <version>0.7.4</version>
            <executions>
                <execution>
                    <id>generate-q4-document-jaxb</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <extension>true</extension>
                        <args>
                            <arg>-Xboolean-getter</arg>
                            <arg>-Xinheritance</arg>
                        </args>
                        <plugins>
                            <plugin>
                                    <groupId>org.jvnet.jaxb2_commons</groupId>
                                   <artifactId>jaxb2-basics</artifactId>
                                   <version>0.5.3</version>
                               </plugin>
                            <plugin>
                                <groupId>com.nebulent.xjc</groupId>
                                <artifactId>boolean-getter</artifactId>
                                <version>1.0</version>
                            </plugin>
                        </plugins>
                        <schemaDirectory>${project.build.directory}/generated-sources/schema</schemaDirectory>
                        <bindingDirectory>${basedir}/src/main/resources/jaxb-bindings</bindingDirectory>
                        <forceRegenerate>true</forceRegenerate>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

让我知道您是否需要架构或任何其他信息。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:11:59.880

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

有几个与您的问题相关的问题：

* * *

**问题 #1 - MOXy 异常**

您能否提供一个小样本来展示您所看到的问题？

***更新 1：*** 我相信您看到的问题与以下 EclipseLink 错误有关：

*   [http://bugs.eclipse.org/378901](http://bugs.eclipse.org/378901)

***更新 2：*** 我们已经修复了 EclipseLink 2.3.3（可于 5 月 10 日下载）和 2.4.0（可于 5 月 11 日下载）流中的错误。您可以从以下位置下载这些：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

* * *

**问题 #2 - 子类上的 @XmlValue**

JAXB RI 无法处理此用例：

```
Exception in thread "main" com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
@XmlValue is not allowed on a class that derives another class.
    this problem is related to the following location:
        at public java.lang.String forum10437666.Child.getValue()
        at forum10437666.Child

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:472)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1140)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:154)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:121)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:363)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at forum10437666.ValueDemo.main(ValueDemo.java:11) 
```

只要父类不将其任何字段/属性映射到 XML 元素，EclipseLink JAXB (MOXy) 就可以：

***家长***

父类仅包含到 XML 属性的映射。

```
package forum10437666;

import javax.xml.bind.annotation.XmlAttribute;

public class Parent {

    private int id;

    @XmlAttribute
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

} 
```

***孩子***

`Child`扩展`Parent`并有一个用 . 映射的属性`@XmlValue`。

```
package forum10437666;

import javax.xml.bind.annotation.XmlValue;

public class Child extends Parent {

    private String value;

    @XmlValue
    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

***价值演示***

```
package forum10437666;

import javax.xml.bind.*;
import javax.xml.namespace.QName;

public class ValueDemo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Child.class);

        Child child = new Child();
        child.setId(123);
        child.setValue("ABC");

        JAXBElement<Child> je = new JAXBElement<Child>(new QName("child"), Child.class, child);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(je, System.out);
    }

} 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8"?>
<child xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="123">ABC</child> 
```

# android - 无法从 onListItemClick() 上的自定义 BaseAdapter 中删除项目

> ID：10437667
> 
> 赞同：0
> 
> 时间：2012-05-03T18:56:42.977
> 
> 标签：android, android-listview, android-adapter

我有一个`BaseAdapter`包含键值对的自定义。在我的`ListView`中，当我短按列表中的某个项目时，我想将其从列表中删除。我的问题是我不知道如何执行`notifyDataSetChanged`- 见`onListItemClick`下文。

我有一个`MyCustomAdapter`造成痛苦的构造函数。

下面的代码是两个类。

**1级**

`Dynamiclists extends ListActivity`

**2 级**

`MyCustomAdapter extends BaseAdapter`

在第 1 类中，我想从`HashMap`地图中删除指定的位置`onListItemClick`，然后更新第 2 类。

```
package telephone.org;

import java.util.HashMap;
import java.util.Set;
import java.util.Map.Entry;

import telephone.org.MyService.LocalBinder;
import android.app.ActivityManager;
import android.app.ListActivity;
import android.app.ActivityManager.RunningServiceInfo;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.ContactsContract;
import android.provider.ContactsContract.PhoneLookup;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemLongClickListener;

//class 1 
public class DynamicLists extends ListActivity { 

    MyService mService;
    boolean mBound = false;

//class 2 ///////////////////////////////////
public class MyCustomAdapter extends BaseAdapter { 

    public HashMap<String, Integer> mData = new HashMap<String,Integer>();
    private String[] mKeys;
    //constructor    
    public MyCustomAdapter(DynamicLists dynamicLists, int row, HashMap<String, Integer> map){ 
    mData = map;
    mKeys = mData.keySet().toArray(new String[map.size()]);
    Log.d(TAG, "INSIDE ADAPTER constructor HELLO WORLD " + map.entrySet()); 

}

public MyCustomAdapter(MyService mService, int row, Object map) {
        // TODO Auto-generated constructor stub
    }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
//TODO Auto-generated method stub

    Log.d(TAG, "inside getview  ");
  View row=convertView;

if (row==null){
    LayoutInflater inflater=getLayoutInflater();
    row=inflater.inflate(R.layout.row, null);
}

TextView label =(TextView)row.findViewById(R.id.blocked);
label.setText(mKeys[position] +  "   " + getItem(position).toString()); //key + value 
return row;   

}

@Override
public int getCount() 
{
    // TODO Auto-generated method stub
    return mData.size();
}
@Override
public Object getItem(int position) 
{
    // TODO Auto-generated method stub
    Log.d(TAG, "inside getitem " + mData.get(mKeys[position])); 
    return mData.get(mKeys[position]);
}
@Override
public long getItemId(int position) 
{
    // TODO Auto-generated method stub
    return position;
}

}  //end of class 2 ////////////////////////

private static final String TAG = "DynamicList";

//class 1 

public static  HashMap<String, Integer> map = new HashMap<String, Integer>(); 

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
//TODO Auto-generated method stub

//remove entries from hashmap map   
String selection = l.getItemAtPosition(position).toString();
String[] tkeys;
tkeys = map.keySet().toArray(new String[map.size()]);
Integer toremove = map.get(tkeys[position]);
Toast.makeText(this, "The value is" + map.get(tkeys[position]), Toast.LENGTH_LONG).show();
map.remove(toremove);
//how to notify MyCustomAdapter of changes 

//end of remove entries from hashmap map  
}

@Override
public void onStart() {
    super.onStart();
     isMyServiceRunning();

}

public void onStop() {
    super.onStop();
    // Unbind from the service
    if (mBound) {
    unbindService(mConnection);
    mBound = false;
    }
}

private boolean isMyServiceRunning() { 
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE); 
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) { 
        if ("telephone.org.MyService".equals(service.service.getClassName())) 
        { 
            Toast.makeText(getApplicationContext(),"SERVICE IS RUNNING", Toast.LENGTH_LONG).show();
            Intent intent = new Intent(this, MyService.class);
            bindService(intent, mConnection, Context.BIND_AUTO_CREATE);  //SEE INTERACT WITH SERVICE BELOW

            return true; 
        } 
    } 
           Toast.makeText(getApplicationContext(),"SERVICE IS STOPPED AND IS NOT RUNNING", Toast.LENGTH_LONG).show();
    return false; 
} 

//INTERACT WITH SERVICE
/** Defines callbacks for service binding, passed to bindService() */
private ServiceConnection mConnection = new ServiceConnection() {
@Override
public void onServiceConnected(ComponentName className, IBinder service) {
// We've bound to LocalService, cast the IBinder and get LocalService instance
LocalBinder binder = (LocalBinder) service;
mService = binder.getService();
mBound = true;
Set<Entry<String, Integer>> whatsup = mService.getNumbers();
Toast.makeText(getApplicationContext(),"NUMBER INTERACTION IS" + whatsup, Toast.LENGTH_LONG).show();
Log.d(TAG, "ELEMENTS from service are:" + whatsup);
Toast.makeText(getApplicationContext(),"NUMBER OF ENTRIES IS" + whatsup.size(), Toast.LENGTH_LONG).show();

//convert SET BACK TO HASHMAP 
for (Entry<String,Integer> entry : whatsup) { 

    String name = null; 
    String[] projection = new String[] { 
            ContactsContract.PhoneLookup.DISPLAY_NAME};
    Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(entry.getKey())); 
    Cursor cursor = getContentResolver().query(uri, projection, null, null, null);

    if (cursor.moveToFirst()) { 
        name = cursor.getString(cursor.getColumnIndex(ContactsContract.PhoneLookup.DISPLAY_NAME));
    }
    Toast.makeText(getApplicationContext(),"RESOLVED NAME IS " + name, Toast.LENGTH_LONG).show();
    projection = null;
    map.put(name,entry.getValue()); 
    }

setListAdapter(new MyCustomAdapter(DynamicLists.this, R.layout.row, map));

}

//end CONVERT SET BACK TO HASHMAP

@Override
public void onServiceDisconnected(ComponentName arg0) {
mBound = false;
}
};
//END INTERACTION WITH SERVICE 

} //end of class 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:19:20.293

我在缩进时遇到了一点问题，但是您确认您的 onListItemClick 函数删除了正确的 HashMap / 行吗？如果是这样，那么在 onListItemClick 调用结束时：

```
getListAdapter().notifyDataSetChanged(); 
```

但是我不喜欢你的使用方式`position`，例如这里`tkeys[position]`。position 是*可见*项的索引，id 是*所有*项的索引。但是，如果它有效，那么我没有任何抱怨。

我没有对此进行测试，但它应该可以作为一种替代方法（假设`map`ListView 是从以下集合构建的：

```
public void onListItemClick(ListView l, View v, int position, long id) {
    MyCustomAdapter adapter = getListAdapter();
    map.remove(adapter.get((int) id));
    adapter.notifyDataSetChanged();
} 
```

# php - 如何从 jQuery 对话框按钮部分修改当前选择器的 id 属性？

> ID：10437676
> 
> 赞同：0
> 
> 时间：2012-05-03T18:57:16.797
> 
> 标签：php, jquery, jquery-ui

我想用用户在 jquery 对话框输入字段中指定的用户名替换“间接”类的 id 中的用户名字符串。问题是我不能使用 this.id = this.id.replace('username', myvalue) 因为 $this 将引用到jquery对话框ui中的输入元素....请帮我用任何其他方法解决这个问题

```
<img src="images/AOL_button.png" id='http://openid.aol.com/username' class="indirect" />
<img src="images/google_button.png" id='https://www.username.google.com/accounts/o8/id' class="direct"/> 
```

==================================================== ===============================

```
$(.indirect).click(function(){
   $("#dialog").dialog({
     buttons: {
            "OK": function() {
                if($('#username').val() == '') {
                    $('#username').focus();
                } else {
                    var myvalue= $("#username").val();
                    var provider_url_post= // replace "username" in google id with myvalue
                    alert(provider_url_post);
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:03:00.847

您的 JS 中有一堆语法错误，但假设这些错误在您的实际代码中不存在：

```
$('.indirect').click(function() {
    var self = this;

    $("#dialog").dialog({
        buttons: {
            "OK": function() {
                if (!$('#username').val()) { // just check the truthiness
                    $('#username').focus();
                } else {
                    var myvalue = $("#username").val();
                    self.id = self.id.replace('username', myvalue);
                }
            }
        }
    });
});​ 
```

# validation - Weka 中的交叉验证

> ID：10437677
> 
> 赞同：29
> 
> 时间：2012-05-03T18:57:20.043
> 
> 标签：validation, weka, fold

我一直认为从我读到的交叉验证是这样执行的：

> 在 k 折交叉验证中，原始样本被随机划分为 k 个子样本。在 k 个子样本中，保留一个子样本作为验证数据用于测试模型，剩余的 k-1 个子样本用作训练数据。然后交叉验证过程重复 k 次（折叠），k 个子样本中的每个子样本仅使用一次作为验证数据。然后可以对来自折叠的 k 个结果进行平均（或以其他方式组合）以产生单个估计

因此建立了 k 个模型，最后一个是这些模型的平均值。在 Weka 指南中写道，每个模型始终使用所有数据集构建。那么 Weka 中的交叉验证是如何工作的呢？模型是根据所有数据构建的吗？“交叉验证”意味着创建了 k 个折叠，然后对每个折叠进行评估，最终输出结果只是折叠的平均结果？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-10T17:26:36.867

所以，这又是一个场景：你有 100 个标记数据

**使用训练集**

*   weka 将采用 100 个标记数据
*   它将应用一种算法从这 100 个数据中构建一个分类器
*   它将分类器再次应用于这 100 个数据
*   它为您提供分类器的性能（应用于开发它的相同 100 个数据）

**使用10倍简历**

*   Weka 需要 100 个标记数据

*   它产生 10 个相同大小的集合。每组分为两组：90 个标记数据用于训练，10 个标记数据用于测试。

*   它使用来自 90 个标记数据的算法生成一个分类器，并将其应用于集合 1 的 10 个测试数据。

*   它对集合 2 到 10 做同样的事情并产生 9 个以上的分类器

*   它平均了从 10 个相同大小（90 个训练和 10 个测试）集产生的 10 个分类器的性能

让我知道这是否回答了您的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-17T12:28:56.963

我会在评论中回答，但我的声誉仍然不允许我：

除了 Rushdi 接受的答案之外，我想强调的是，为交叉验证折叠集创建的模型在执行和平均性能测量后都会被丢弃。

无论您的测试选项如何，生成的模型*始终*基于完整的训练集。由于 MTA 要求更新引用的链接，这里是：[https ://web.archive.org/web/20170519110106/http://list.waikato.ac.nz/pipermail/wekalist/2009-December/ 046633.html/](https://web.archive.org/web/20170519110106/http://list.waikato.ac.nz/pipermail/wekalist/2009-December/046633.html/)。这是一位 WEKA 维护者的回答，指出了我写的内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T19:46:40.860

我想我想通了。以（例如）`weka.classifiers.rules.OneR -x 10 -d outmodel.xxx`。这做了两件事：

1.  它基于完整数据集创建模型。这是写入的模型`outmodel.xxx`。该模型**不用**作交叉验证的一部分。
2.  *然后*运行交叉验证。交叉验证涉及创建（在这种情况下）10 个新模型，如前所述，对数据段进行训练和测试。关键是交叉验证中使用的模型是临时的，仅用于生成统计信息。它们不等同于或用于提供给用户的模型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T00:02:03.770

Weka 遵循您在此处提到的传统 k 折交叉验证。您拥有完整的数据集，然后将其分成 k 个相等的集（k1、k2、...、k10，例如 10 倍 CV），没有重叠。然后在第一次运行时，以 k1 到 k9 作为训练集并开发一个模型。在 k10 上使用该模型来获得性能。接下来是 k1 到 k8 和 k10 作为训练集。从他们那里开发一个模型并将其应用于 k9 以获得性能。这样，将每个折叠最多使用 1 次的所有折叠用作测试集。

然后 Weka 对性能进行平均并将其呈现在输出窗格上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-28T17:50:38.537

一旦我们通过将数据划分为 10 段并创建决策树并评估完成了 10 次交叉验证，Weka 所做的就是在整个数据集上第十一次运行该算法。这将产生一个我们可能在实践中部署的分类器。我们使用 10 折交叉验证来得到评估结果和估计误差，最后我们再做一次分类，得到一个实际使用的分类器。在第 k 个交叉验证期间，我们将拥有不同的决策树，但最终的决策树是在整个数据集上创建的。CV 用于查看我们是否存在过拟合或大方差问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-19T13:50:51.367

根据怀卡托大学的“使用 Weka 进行数据挖掘”：

交叉验证是一种**改进重复坚持**的方法。
交叉验证是一种进行重复保持的系统方法，实际上通过减少估计的方差来改进它。

*   我们获取一个训练集并**创建一个分类器**
*   然后我们正在**评估**该分类器的性能，并且该评估存在一定量的差异，因为它在下面都是统计的。

*   我们希望将估计中的方差保持在尽可能低的水平。
    交叉验证是一种*减少方差*的方法，一种称为“分层交叉验证”的交叉验证变体可以进一步减少它。（与“重复保留”方法相反，我们保留 10% 用于测试，然后重复 10 次。）

* * *

那么 Weka 中的交叉验证是如何工作的呢？：
*通过交叉验证*，我们只将数据集划分一次，但我们划分为 k 块，例如 10 块。
然后我们取其中的 9 个用于训练，最后一个用于测试。然后用同样的划分，我们再取 9 块用于训练，留出的一块用于测试。我们做了 10 次整件事，每次都使用不同的部分进行测试。换句话说，我们将数据集分成 10 个部分，然后依次拿出这些部分进行测试，对其余部分进行训练，进行测试并平均 10 个结果。

* * *

那将是 10 倍交叉验证。将数据集分成 10 个部分（称为“折叠”）；依次拿出每个部分；并对结果进行平均。因此，数据集中的每个数据点**用于测试一次，用于训练 9 次**。
这是 10 倍交叉验证。

# wpf - 滚动条不适用于 WPF 数据网格

> ID：10437681
> 
> 赞同：1
> 
> 时间：2012-05-03T18:57:40.337
> 
> 标签：wpf, wpfdatagrid

我已使用此[链接中的 WPF 数据网格样式](http://www.silverlight.net/content/samples/sl4/themes/cosmopolitan.html)

我刚刚为可用于数据输入的数据网格创建了一个带有 ViewModel 的小窗口。

我有两个问题：

1.  如果行数很多，使用垂直滚动条本身时滚动条似乎不起作用。如果我在数据网格上移动鼠标滚轮，滚动虽然有效，但如果我尝试滚动条，滚动不会发生。我看到了一些示例，他们确实将滚动条的值设置为 Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}" 我无法弄清楚这里出了什么问题。

2.  当我在 WPF 网格上选项卡时，焦点移出网格。理想情况下，我希望它创建一个新行并突出显示要编辑的新行中的第一个单元格。

下面是代码：

一、查看型号：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace SampleAppTest
{
    public class MainWindowViewModel : INotifyPropertyChanged
    {

        public MainWindowViewModel()
        {
            this.Students = new ObservableCollection<Student>();
        }

        private ObservableCollection<Student> students;
        public ObservableCollection<Student> Students
        {
            get
            {
                return this.students;
            }
            set
            {
                this.students = value;
                this.RaisePropertyChanged("Students");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = this.PropertyChanged;
            if (handler != null)
            {
                var e = new PropertyChangedEventArgs(propertyName);
                handler(this, e);
            }
        }
    }

    public class Student : INotifyPropertyChanged
    {
        private string name;
        public string Name
        {
            get
            {
                return this.name;
            }
            set
            {
                this.name = value;
                this.RaisePropertyChanged("Name");
            }
        }

        private int totalMarks;
        public int TotalMarks
        {
            get
            {
                return this.totalMarks;
            }
            set
            {
                this.totalMarks = value;
                this.RaisePropertyChanged("TotalMarks");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = this.PropertyChanged;
            if (handler != null)
            {
                var e = new PropertyChangedEventArgs(propertyName);
                handler(this, e);
            }
        }
    }
} 
```

二、背后的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace SampleAppTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new MainWindowViewModel();
        }
    }
} 
```

三、XAML

```
<Window x:Class="SampleAppTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="200" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <Style TargetType="DataGrid" x:Key="DefaultDataGridStyle">
                <Setter Property="RowHeaderWidth" Value="0"/>
                <Setter Property="HorizontalGridLinesBrush" Value="Black"/>
                <Setter Property="VerticalGridLinesBrush" Value="Black"/>
                <Setter Property="Foreground" Value="Black"/>
                <Setter Property="FontFamily" Value="Segoe UI"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="BorderBrush" Value="Gray"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="RowBackground" Value="Transparent"/>
                <Setter Property="AlternatingRowBackground" Value="Transparent"/>
                <Setter Property="HeadersVisibility" Value="Column"/>
                <Setter Property="HorizontalScrollBarVisibility" Value="Hidden"/>
                <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
                <Setter Property="SelectionMode" Value="Single"/>
                <Setter Property="CanUserReorderColumns" Value="False"/>
                <Setter Property="CanUserResizeColumns" Value="True"/>
                <Setter Property="CanUserSortColumns" Value="False"/>
                <Setter Property="AutoGenerateColumns" Value="False"/>
                <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected"/>
                <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
                <Setter Property="CanUserAddRows" Value="True"/>
                <Setter Property="DropLocationIndicatorStyle">
                    <Setter.Value>
                        <Style TargetType="Separator">
                            <Setter Property="Background" Value="Gray"/>
                            <Setter Property="Width" Value="2"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Separator">
                                        <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="GridLinesVisibility" Value="None"/>
                <Setter Property="HorizontalGridLinesBrush" Value="Gray"/>
                <Setter Property="IsTabStop" Value="True" />
                <Setter Property="VerticalGridLinesBrush" Value="Gray"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="DataGrid">
                            <Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledVisualElement"/>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                    <ScrollViewer x:Name="DG_ScrollViewer"
                                          Focusable="false">
                                        <ScrollViewer.Template>
                                            <ControlTemplate TargetType="ScrollViewer">
                                                <Grid x:Name="Root" Background="{TemplateBinding Background}">
                                                    <Grid.Resources>
                                                        <ControlTemplate x:Key="TopLeftHeaderTemplate" TargetType="DataGridColumnHeader">
                                                            <Grid x:Name="Root">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                    <RowDefinition Height="Auto"/>
                                                                </Grid.RowDefinitions>
                                                                <Border BorderBrush="Gray" Background="White" Grid.RowSpan="2"/>
                                                                <Rectangle Fill="Gray" Height="1" Grid.RowSpan="2" StrokeThickness="1" VerticalAlignment="Bottom" Width="Auto" Visibility="Collapsed"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                        <ControlTemplate x:Key="TopRightHeaderTemplate" TargetType="DataGridColumnHeader">
                                                            <Grid x:Name="RootElement">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                    <RowDefinition Height="Auto"/>
                                                                </Grid.RowDefinitions>
                                                                <Border Background="White" Grid.RowSpan="2"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Grid.Resources>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <DataGridColumnHeader x:Name="TopLeftCornerHeader" Template="{StaticResource TopLeftHeaderTemplate}" Width="0"/>
                                                    <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1"/>
                                                    <DataGridColumnHeader x:Name="TopRightCornerHeader" Grid.Column="2" Template="{StaticResource TopRightHeaderTemplate}"/>
                                                    <Rectangle x:Name="ColumnHeadersAndRowsSeparator" Grid.ColumnSpan="3" Fill="WhiteSmoke" Height="1" StrokeThickness="1" VerticalAlignment="Bottom" Width="Auto" Visibility="Collapsed"/>
                                                    <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" Content="{TemplateBinding Content}" Grid.ColumnSpan="2" Grid.Row="1" CanContentScroll="{TemplateBinding CanContentScroll}" />
                                                    <Rectangle x:Name="BottomRightCorner" Grid.Column="2" Fill="{TemplateBinding Background}" Grid.Row="2"/>
                                                    <Rectangle x:Name="BottomLeftCorner" Grid.ColumnSpan="2" Fill="{TemplateBinding Background}" Grid.Row="2"/>

                                                    <ScrollBar x:Name="PART_VerticalScrollbar" 
                                                       Grid.Column="2" Grid.Row="1"
                                                       Width="18" Margin="0,-1,-3,-1" 
                                                       Orientation="Vertical"
                                                       Maximum="{TemplateBinding ScrollableHeight}"
                                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                                       Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                                                    <Grid Grid.Column="1" Grid.Row="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=NonFrozenColumnsViewportHorizontalOffset}"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Rectangle x:Name="FrozenColumnScrollBarSpacer"/>
                                                        <ScrollBar x:Name="PART_HorizontalScrollbar" Grid.Column="1" Height="18" Margin="-1,0,-1,-3" 
                                                           Orientation="Horizontal"
                                                           Maximum="{TemplateBinding ScrollableWidth}"
                                                           ViewportSize="{TemplateBinding ViewportWidth}"
                                                           Value="{Binding Path=HorizontalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                           Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                                                    </Grid>
                                                </Grid>
                                            </ControlTemplate>
                                        </ScrollViewer.Template>
                                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                    </ScrollViewer>
                                </Border>
                                <Border x:Name="DisabledVisualElement" Background="Gray" CornerRadius="2" HorizontalAlignment="Stretch" Height="Auto" IsHitTestVisible="False" Opacity="0" VerticalAlignment="Stretch" Width="Auto"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBox Margin="10,10,10,10" BorderBrush="Black" Grid.Row="0"></TextBox>
        <DataGrid Grid.Row="1" ItemsSource="{Binding Path=Students}" Style="{StaticResource DefaultDataGridStyle}">
            <DataGrid.Columns>
                <DataGridTextColumn Width="*" Header="Full Name" Binding="{Binding Path=Name}"/>
                <DataGridTextColumn Width="*" Header="Total marks" Binding="{Binding Path=TotalMarks}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

谢谢... Girija Shankar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:16:21.103

如果您只想要样式并且这个新的滚动对您来说并不重要，请执行此操作

```
<ResourceDictionary>
            <Style TargetType="{x:Type DataGrid}" x:Key="DefaultDataGridStyle">
                <Setter Property="RowHeaderWidth" Value="0"/>
                <Setter Property="HorizontalGridLinesBrush" Value="Black"/>
                <Setter Property="VerticalGridLinesBrush" Value="Black"/>
                <Setter Property="Foreground" Value="Black"/>
                <Setter Property="FontFamily" Value="Segoe UI"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="BorderBrush" Value="Gray"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="RowBackground" Value="Transparent"/>
                <Setter Property="AlternatingRowBackground" Value="Transparent"/>
                <Setter Property="HeadersVisibility" Value="Column"/>
                <Setter Property="HorizontalScrollBarVisibility" Value="Hidden"/>
                <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
                <Setter Property="SelectionMode" Value="Single"/>
                <Setter Property="CanUserReorderColumns" Value="False"/>
                <Setter Property="CanUserResizeColumns" Value="True"/>
                <Setter Property="CanUserSortColumns" Value="False"/>
                <Setter Property="AutoGenerateColumns" Value="False"/>
                <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected"/>
                <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
                <Setter Property="CanUserAddRows" Value="True"/>
                <Setter Property="DropLocationIndicatorStyle">
                    <Setter.Value>
                        <Style TargetType="Separator">
                            <Setter Property="Background" Value="Gray"/>
                            <Setter Property="Width" Value="2"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Separator">
                                        <Rectangle Fill="{TemplateBinding Background}" Height="{TemplateBinding Height}" Width="{TemplateBinding Width}"/>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="GridLinesVisibility" Value="None"/>
                <Setter Property="HorizontalGridLinesBrush" Value="Gray"/>
                <Setter Property="IsTabStop" Value="True" />
                <Setter Property="VerticalGridLinesBrush" Value="Gray"/>
                <!--<Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="DataGrid">
                            <Grid >
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="DisabledVisualElement"/>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                    <ScrollViewer x:Name="DG_ScrollViewer"
                                          Focusable="false">
                                        <ScrollViewer.Template>
                                            <ControlTemplate TargetType="ScrollViewer">
                                                <Grid x:Name="Root" Background="{TemplateBinding Background}">
                                                    <Grid.Resources>
                                                        <ControlTemplate x:Key="TopLeftHeaderTemplate" TargetType="DataGridColumnHeader">
                                                            <Grid x:Name="Root">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                    <RowDefinition Height="Auto"/>
                                                                </Grid.RowDefinitions>
                                                                <Border BorderBrush="Gray" Background="White" Grid.RowSpan="2"/>
                                                                <Rectangle Fill="Gray" Height="1" Grid.RowSpan="2" StrokeThickness="1" VerticalAlignment="Bottom" Width="Auto" Visibility="Collapsed"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                        <ControlTemplate x:Key="TopRightHeaderTemplate" TargetType="DataGridColumnHeader">
                                                            <Grid x:Name="RootElement">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                    <RowDefinition Height="Auto"/>
                                                                </Grid.RowDefinitions>
                                                                <Border Background="White" Grid.RowSpan="2"/>
                                                            </Grid>
                                                        </ControlTemplate>
                                                    </Grid.Resources>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <DataGridColumnHeader x:Name="TopLeftCornerHeader" Template="{StaticResource TopLeftHeaderTemplate}" Width="0"/>
                                                    <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1"/>
                                                    <DataGridColumnHeader x:Name="TopRightCornerHeader" Grid.Column="2" Template="{StaticResource TopRightHeaderTemplate}"/>
                                                    <Rectangle x:Name="ColumnHeadersAndRowsSeparator" Grid.ColumnSpan="3" Fill="WhiteSmoke" Height="1" StrokeThickness="1" VerticalAlignment="Bottom" Width="Auto" Visibility="Collapsed"/>
                                                    <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" Content="{TemplateBinding Content}" Grid.ColumnSpan="2" Grid.Row="1" CanContentScroll="{TemplateBinding CanContentScroll}" />
                                                    <Rectangle x:Name="BottomRightCorner" Grid.Column="2" Fill="{TemplateBinding Background}" Grid.Row="2"/>
                                                    <Rectangle x:Name="BottomLeftCorner" Grid.ColumnSpan="2" Fill="{TemplateBinding Background}" Grid.Row="2"/>

                                                    <ScrollBar x:Name="PART_VerticalScrollbar" 
                                                       Grid.Column="2" Grid.Row="1"
                                                       Width="18" Margin="0,-1,-3,-1" 
                                                       Orientation="Vertical"
                                                       Maximum="{TemplateBinding ScrollableHeight}"
                                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                                       Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                                                    <Grid Grid.Column="1" Grid.Row="2">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=NonFrozenColumnsViewportHorizontalOffset}"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Rectangle x:Name="FrozenColumnScrollBarSpacer"/>
                                                        <ScrollBar x:Name="PART_HorizontalScrollbar" Grid.Column="1" Height="18" Margin="-1,0,-1,-3" 
                                                           Orientation="Horizontal"
                                                           Maximum="{TemplateBinding ScrollableWidth}"
                                                           ViewportSize="{TemplateBinding ViewportWidth}"
                                                           Value="{Binding Path=HorizontalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                           Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                                                    </Grid>
                                                </Grid>
                                            </ControlTemplate>
                                        </ScrollViewer.Template>
                                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                    </ScrollViewer>
                                </Border>
                                <Border x:Name="DisabledVisualElement" Background="Gray" CornerRadius="2" HorizontalAlignment="Stretch" Height="Auto" IsHitTestVisible="False" Opacity="0" VerticalAlignment="Stretch" Width="Auto"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>-->
            </Style>
        </ResourceDictionary> 
```

我认为问题在于 DatagridScrollbar 已经存在并且正在使用中，所以你得到了类似的东西

```
<ScrollViewer> <-- behaves like the inner ScrollViewer because it's binded
    <ScrollViewer/> <-- i think this is "invisible" for you but still enabled and does what it wants because it isn't binded :D
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T16:56:02.287

我有同样的问题，而不是

```
 <ScrollBar x:Name="PART_VerticalScrollbar" 
                                                       Grid.Column="2" Grid.Row="1"
                                                       Width="18" Margin="0,-1,-3,-1" 
                                                       Orientation="Vertical"
                                                       Maximum="{TemplateBinding ScrollableHeight}"
                                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                                       Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/> 
```

将您的价值更改为`Value="{TemplateBinding VerticalOffset}"`

# c# - Xpath 错误有一个无效的令牌

> ID：10437684
> 
> 赞同：3
> 
> 时间：2012-05-03T18:58:10.727
> 
> 标签：c#, xml, xpath

我有以下 C# 代码：

```
var selectNode = xmlDoc.SelectSingleNode("//CodeType[@name='" + codetype + 
    "']/Section[@title='" + section + "']/Code[@code='" + code + "' and 
    @description='" + codedesc + "']") as XmlElement; 
```

当我运行我的代码时，它会引发错误说“上述语句有一个无效的令牌”

这些是上述语句的值。

```
codeType=cbc
section="Mental"
codedesc="Injection, enzyme (eg, collagenase), palmar fascial cord (ie, 
    Dupuytren's contracture" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T19:36:03.673

注意?中的撇号 ( `'`)`codedesc`

你需要以某种方式逃避它。XPath 解释器将其视为字符串分隔符，并且不知道如何处理其后的另一个撇号。

一种方法是用双引号而不是撇号将字符串括起来。

因此，您的代码可能变为：

```
var selectNode = xmlDoc.SelectSingleNode(
    "//CodeType[@name='" + codetype + "']" +
    "/Section[@title='" + section + "']" +
    "/Code[@code=\"" + code + "' and @description='" + codedesc + "\"]") 
    as XmlElement; 
```

（请注意，在第四行，撇号（`'`）变成了双引号（`\"`））

虽然这种方法适用于您提供的数据，但您仍然不是 100% 安全：其他记录本身可能包含双引号。如果发生这种情况，我们也需要为这种情况考虑一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-12T10:57:47.667

如果 xml 架构中有任何特殊字符，您可以根据 index 获取选定的节点。所以，这里看一下从 xml 模式中删除选定索引节点的实现。

## XML SelectSingleNode 删除操作

var schemaDocument = new XmlDocument();

```
 schemaDocument.LoadXml(codesXML);

        var xmlNameSpaceManager = new XmlNamespaceManager(schemaDocument.NameTable);

        if (schemaDocument.DocumentElement != null)
            xmlNameSpaceManager.AddNamespace("x", schemaDocument.DocumentElement.NamespaceURI);

        var codesNode = schemaDocument.SelectSingleNode(@"/x:integration-engine-codes/x:code-categories/x:code-category/x:codes", xmlNameSpaceManager);
        var codeNode = codesNode.ChildNodes.Item(Convert.ToInt32(index) - 1);

        if (codeNode == null || codeNode.ParentNode == null)
        {
            throw new Exception("Invalid node found");
        }

        codesNode.RemoveChild(codeNode);
        return schemaDocument.OuterXml; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-07-16T21:02:32.477

复制单引号，使其显示为“Dupuytren 的挛缩”

这样您就可以转义 xpath 表达式中的单引号。

# javascript - 单页网站，我想在刷新页面后的某个时间点获得

> ID：10437686
> 
> 赞同：0
> 
> 时间：2012-05-03T18:58:22.443
> 
> 标签：javascript, jquery, html, css, singlepage

我有一个单页网站，其中有一个名为 sitecontent 的 div，宽度为 4400，其中包含 4 个“页面”。页面从站点内容的 0 像素、站点内容的 1100 像素、站点内容的 2200 像素和 3300 像素开始。

我使用 Jquery 将 de div 位置设置为正确的 px，因此我可以显示正确的文本。按下链接后，我得到例如：

```
<div id="site-content" style="left: -1100px;"> 
```

在其中一个页面上，我必须刷新页面，刷新后我希望页面在 1100px 上显示相同的“页面”，但它从主页 0px 开始。

有什么办法可以确保站点内容从首页的-1100px开始？

提前致谢，

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:02:09.203

您需要将一些标识符附加到您可以在页面加载时解析的 URL 的哈希值上。

例如：

```
 http://www.somewebpage.com/somepage#page1 
```

然后在页面的加载中，您可以检查此哈希值并立即更改 UI 以显示新页面：

```
 var hash = window.location.hash;

 if(hash == "#page1")
    $('#site-content').css('left', '-1100px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:12:31.773

您可以使用 cookie 来存储值，然后，每次页面加载时，您都需要检查 cookie 并处理收集到的值：

带有下载和使用手册的[Jquery Cookie](https://github.com/carhartl/jquery-cookie)链接！

**HTML（示例）**

```
<a href="#" title="Go Page 1" id="page_01" class="setCookie">
  Click to view page 01
</a> 
```

**JQUERY (jquery.cookie)**

```
// SET THE COOKIE
$('.setCookie').bind("click", function() {
  var pageNumber = $(this).attr("id");
  $.cookie('the_cookie_name', pageNumber, { expires: 7, path: '/' });
});

// READ THE COOKIE
$(function() {
  var oldNumber = $.cookie('the_cookie_name');
  if (oldNumber !== NULL) {
   $("#page_"+oldNumber).trigger("click");
  }
}); 
```

**笔记：**

您当前用于更改页面的链接应该具有“setCookie”类来触发 cookie 创建，以及用于识别页码的 id。

这样做的一个好处是您可以控制 cookie 的保留时间，从而允许访问者恢复网站体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:32:36.857

一种与 Tejs 提议的方法非常相似的方法是使用基于哈希的路由框架来监听哈希变化。这将产生更简洁的代码，因为您不需要在两个不同的地方定义滚动。

jQuery 事件侦听器当前正在观察页面中的每个链接（onclick -> 将内容容器移动到显示所需的内容）。HTML 看起来可能有点像这样：`<a href="#">Contact details</a>`.

使用这种方法，您无需查看这些链接。相反，只需让他们更改哈希：`<a href="#page2">Contact details</a>`。

现在观察哈希并对变化做出反应。我正在使用 Simrou 框架（[https://github.com/buero-fuer-ideen/Simrou](https://github.com/buero-fuer-ideen/Simrou)），但您可以使用任何其他提供类似功能的框架。

```
jQuery(document).ready(function() {
    // Define a function that moves the content, e.g. moveContent(3300);
    function moveContent(pixelPosition) {
        $('#site-content').css('left', '-' + pixelPosition + 'px');
    }

    // Setup the router
    var router = new Simrou({
        'page1': function() { moveContent(0); },
        'page2': function() { moveContent(1100); },
        'page3': function() { moveContent(2200); },
        'page4': function() { moveContent(3300); }
    });
    router.start();
}); 
```

这就是您需要的所有javascript！

（这是一个快速而肮脏的小提琴，展示了整个事情：http: [//jsfiddle.net/R7F6r/](http://jsfiddle.net/R7F6r/)）

# python - Matplotlib，全局设置刻度数。X轴、Y轴、彩条

> ID：10437689
> 
> 赞同：4
> 
> 时间：2012-05-03T18:58:27.323
> 
> 标签：python, matplotlib

对于我喜欢使用的字体大小，我发现 5 个刻度是 matplotlib 中几乎每个轴上最令人愉悦的刻度数。我还喜欢修剪沿 x 轴的最小刻度以避免重叠刻度标签。因此，对于我制作的几乎每一个情节，我都发现自己使用以下代码。

```
from matplotlib import pyplot as plt
from matplotlib.ticker import MaxNLocator

plt.imshow( np.random.random(100,100) )
plt.gca().xaxis.set_major_locator( MaxNLocator(nbins = 7, prune = 'lower') )
plt.gca().yaxis.set_major_locator( MaxNLocator(nbins = 6) )
cbar = plt.colorbar()
cbar.locator = MaxNLocator( nbins = 6)
plt.show() 
```

是否有我可以使用的 rc 设置，以便我的 x 轴、y 轴和颜色条的默认定位器默认情况下是上面的 MaxNLocator，x 轴上有修剪选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:01:18.573

你为什么不写一个自定义模块`myplotlib`来设置你喜欢的默认值呢？

```
import myplt
myplt.setmydefaults() 
```

全局 rc 设置可能会破坏依赖这些设置而不被修改的其他应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T15:58:05.863

该类`matplotlib.ticker.MaxNLocator`具有可用于设置默认值的属性：

```
default_params = dict(nbins = 10,
                      steps = None,
                      trim = True,
                      integer = False,
                      symmetric = False,
                      prune = None) 
```

例如，脚本开头的这一行将在`MaxNLocator`轴对象每次使用时创建 5 个刻度。

```
from matplotlib.ticker import *
MaxNLocator.default_params['nbins']=5 
```

但是，默认定位器是`matplotlib.ticker.AutoLocator`，基本上`MaxNLocator`使用硬连线参数调用，因此如果没有进一步的黑客攻击，上述内容将不会产生全局影响。

要将默认定位器更改为`MaxNLocator`，我能找到的最好方法是`matplotlib.scale.LinearScale.set_default_locators_and_formatters`使用自定义方法覆盖：

```
import matplotlib.axis, matplotlib.scale 
def set_my_locators_and_formatters(self, axis):
    # choose the default locator and additional parameters
    if isinstance(axis, matplotlib.axis.XAxis):
        axis.set_major_locator(MaxNLocator(prune='lower'))
    elif isinstance(axis, matplotlib.axis.YAxis):
        axis.set_major_locator(MaxNLocator())
    # copy & paste from the original method
    axis.set_major_formatter(ScalarFormatter())
    axis.set_minor_locator(NullLocator())
    axis.set_minor_formatter(NullFormatter())
# override original method
matplotlib.scale.LinearScale.set_default_locators_and_formatters = set_my_locators_and_formatters 
```

这具有很好的副作用，即能够为 X 和 Y 刻度指定不同的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T19:09:53.397

正如 Anony-Mousse 所建议的那样

创建一个文件 myplt.py

```
#!/usr/bin/env python
# File: myplt.py

from matplotlib import pyplot as plt
from matplotlib.ticker import MaxNLocator

plt.imshow( np.random.random(100,100) )
plt.gca().xaxis.set_major_locator( MaxNLocator(nbins = 7, prune = 'lower') )
plt.gca().yaxis.set_major_locator( MaxNLocator(nbins = 6) )
cbar = plt.colorbar()
cbar.locator = MaxNLocator( nbins = 6)
plt.show() 
```

在您的代码或 ipython 会话中

```
import myplt 
```

# objective-c - 如何为 uibezierpath 设置动画以使其脱颖而出

> ID：10437693
> 
> 赞同：0
> 
> 时间：2012-05-03T18:58:38.993
> 
> 标签：objective-c, ios, uibezierpath

我的 iPad 应用程序的一部分允许用户绘制连接屏幕不同部分的路径。它们都具有相同的颜色（白色）和线宽。每个路径都表示为一个 UIBezierPath。除了它们的位置，它们看起来相同。由于用户一次只编辑一个路径，我想制作它，以便他们可以直观地看到他们正在编辑的路径。

有没有办法为路径设置动画，以便用户对他们正在编辑的路径有一个视觉队列？我在想也许当前的路径可能会发光或有移动的虚线。我不想更改基色，因为我在应用程序的其他部分使用了许多颜色（几乎所有主要颜色，除了白色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:17:30.790

我没有以动画方式完成此操作，但我使当前绘制的路径具有虚线，然后在绘图结束后变为实线。我将 NSBezierPath 子类化，并添加了一个选定的属性。setSelected 方法如下所示：

```
-(void)setSelected:(BOOL) yes_no {
    selected = yes_no;
   if (yes_no == YES) {
        CGFloat dashArray[2];
        dashArray[0] = 5;
        dashArray[1] = 2;
        [self setLineDash:dashArray count:2 phase:0];
       self.pathColor = [self.unselectedColor highlightWithLevel:.5];
   } else {
       [self setLineDash:nil count:2 phase:0];
        self.pathColor = self.unselectedColor;
   }
} 
```

我在 mouseDragged: 方法中将属性设置为 YES，然后在 mouseUP 中将属性设置为 NO：

# asp.net-mvc-3 - Telerik MVC3 Razor Grid - 从控制器返回的部分视图

> ID：10437700
> 
> 赞同：0
> 
> 时间：2012-05-03T18:58:56.610
> 
> 标签：asp.net-mvc-3, controller, partial-views, telerik-grid

我有几个用于搜索的控件的视图。当用户从这些中搜索（Ajax.BeginForm）时，我将数据返回到动态生成的 PartialView（Telerik MVC3 Grid）中。

这一切都很好。网格中有用于选择行的按钮。当我选择一行时，它会发布到我的控制器，我会做一些“事情”等。当我尝试返回视图时，我得到的只是页面上的网格数据，它显示为没有边框的表格，没有其他控件等。我的代码如下。

我的部分网格：

```
@model Highlander.Areas.Highlander.Models.ViewModels.DeliveriesGridViewModel
@using System.Data;

@(Html.Telerik().Grid<System.Data.DataRow>(Model.Data.Rows.Cast<System.Data.DataRow>())
.Name("Grid")
.DataKeys(dataKeys => dataKeys.Add("DeliveryID"))
.Columns(columns =>
{
    columns.Command(commandbutton =>
        {
            commandbutton.Select().ButtonType(GridButtonType.ImageAndText);
        }).Width(80).Title(ViewBag.Title);
    columns.LoadSettings(Model.Columns as IEnumerable<GridColumnSettings>);
})
    .DataBinding(dataBinding => dataBinding.Server().Select("_MarkSystem", "Deliveries"))
.EnableCustomBinding(true)
.Resizable(resize => resize.Columns(true))
) 
```

我的控制器：

```
[GridAction]
public ActionResult _MarkSystem(GridCommand command, int id)
{
    string shipDeliver = DataCache.ShipDeliver;
    DataTable fullTable = DataCache.FullTable;

    // call to function to get the datatable data based on the id
    rHelpers.GetDataTableRow(id, fullTable, shipDeliver);

    // get the data for the grid into the model
    fullTable = DataCache.FullTable;
    model = new DeliveriesGridViewModel();
    model.Data = fullTable;
    model.Columns = rHelpers.NewColumns(DataCache.FullTable);

    return PartialView("_DeliveryGrid", model);

    //if (Request.IsAjaxRequest())
    //{
    //    return PartialView("_DeliveryGrid", model);
    //}
    //return PartialView("_DeliveryGrid", model);
    //return PartialView("DeliveryManager", model);
} 
```

如您所见，我尝试了各种方法都没有成功。

谁能给我一些指导。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:22:01.873

据我了解，您正在使用`dataBinding.Server()`该调用服务器端绑定。使用`.Editable(editing => editing.Mode(GridEditMode.InLine)`它会起作用。

两种绑定（服务器和 Ajax）都需要编辑模式。设置编辑模式并重试。如果它不适合您，请回复。这里是数据绑定的完整代码：

```
 **.DataBinding(dataBinding => dataBinding.Ajax()
                                        .Select("myAction", "myController")
                                        .Update("myAction",myController")).
  Editable(editing => editing.Mode(GridEditMode.InLine))** 
```

# php - 将php变量值传递给javascript

> ID：10437703
> 
> 赞同：2
> 
> 时间：2012-05-03T18:59:25.997
> 
> 标签：php, javascript

我试图将 php 变量的值传递给 javascript，但我无法让它工作。我做错什么了吗？下面是我正在使用的代码行。

```
var dist = parseInt("<?php echo json_encode($distance); ?>"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T19:01:15.717

$distance 是一个整数？你为什么不写

```
var dist = <?php echo $distance; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:03:02.733

如果*$distance*中的值只是一个整数，则不需要 json_encode 调用。你可以做一个*$distance*的 php echo 。

就像是

```
var dist = <?php echo $distance; ?>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T19:04:09.690

如果您在 Web 浏览器中右键单击 > 查看 html 源代码，您会看到自己有一组额外的引号。

而且，使用 json_encode() 将其输出为字符串对您有好处。这是将值安全地输出到 javascript 的绝佳方式。虽然，如果它是一个整数，这里就没有必要了。

# c# - NIBerate计数查询

> ID：10437705
> 
> 赞同：0
> 
> 时间：2012-05-03T18:59:28.933
> 
> 标签：c#, .net, sql, nhibernate

在 NHiberante，我有这个声明

```
 (from p in Session.Query<MyObject>() select p).Count(); 
```

这等于这个吗？

```
select count(*) from MyObject 
```

假设对象名称与表名称相同。

如果表数据很大，我们有办法提高性能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:04:59.143

您可以更好地使用：

```
(from p in Session.Query<MyObject>() select p).LongCount(); 
```

SQLite 查询是：

```
select cast(count(*) as BIGINT) as col_0_0_ from MyObject myobject0_ 
```

您可以使用以下方法创建特定于 DBMS 的优化查询：

```
Session.CreateSQLQuery("sql query"); 
```

关于计数优化的问题：

[优化mysql计数查询](https://stackoverflow.com/questions/4400451/optimize-mysql-count-query)

# ruby-on-rails - 社交网络 gem / 插件

> ID：10437706
> 
> 赞同：0
> 
> 时间：2012-05-03T18:59:30.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否有人使用当前可用的任何 gem/插件/引擎构建了社交网络应用程序？像这样的帖子已经有4年了，所以我再次问这个问题。有什么建议吗？

[https://www.ruby-toolbox.com/categories/social_networking](https://www.ruby-toolbox.com/categories/social_networking)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:41:20.583

我遇到了同样的问题，但没有为我的目标找到现成的解决方案。在对该问题进行了简短的研究后，从 gem 中收集了必要的特征。它们的简短列表：

```
gem "devise", ">= 2.1.0.rc"
gem "paperclip", :git => "git://github.com/thoughtbot/paperclip.git"
gem "bootstrap-sass"
gem "simple_form"
gem "nested_form"
gem "chosen-rails"
gem "cancan"
gem "activeadmin"
gem "opinio"
gem "geocoder"
gem "gmaps4rails"
gem "sunspot_rails"
gem "sunspot_solr"
gem "thumbs_up" 
```

这个列表足以让我毫不费力地制作一个小型社交网络。根据您的目标，可能更容易采取完整的解决方案或一组宝石。

# jquery - jQuery：防止添加 on('click') 两次

> ID：10437709
> 
> 赞同：1
> 
> 时间：2012-05-03T18:59:57.530
> 
> 标签：jquery, onclick

我有一个用作异步加载选项卡和对话框的页面。它上面有一个按钮，我已经给出了一个事件：

```
<script type="text/javascript">
   $(document).ready(function () {
      $(document).on('click', '#my-id-name', function () {
         // do stuff;
      });
   });
</script> 
```

问题是这个选项卡/对话框的内容被刷新了多次，这意味着上面的脚本再次运行，并且事件被重复了。结果是，当单击该项目时，会多次调用该事件。

有什么方法可以防止重复事件，或者使用该`.on(...)`方法删除添加到文档中的现有事件？我无法删除文档上的所有点击事件，我需要在文档级别进行监听。

PS：我在 MVC 3 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:03:14.870

```
$(document).off('click', '#my-id-name') 
```

# android - Android 媒体播放器后退按钮空指针崩溃

> ID：10437710
> 
> 赞同：0
> 
> 时间：2012-05-03T19:00:00.240
> 
> 标签：android, nullpointerexception, android-mediaplayer

我的应用程序的其余部分运行得非常好，直到按下后退按钮停止并退出程序。我不知道这是代码行的这一部分还是在哪里，但这里是 DDMS logcat，下面是后退按钮编码。任何帮助将不胜感激。

```
05-03 18:32:35.597: W/KeyCharacterMap(475): No keyboard for id 0
05-03 18:32:35.597: W/KeyCharacterMap(475): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-03 18:32:35.667: D/AndroidRuntime(475): Shutting down VM
05-03 18:32:35.677: W/dalvikvm(475): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-03 18:32:35.736: E/AndroidRuntime(475): FATAL EXCEPTION: main
05-03 18:32:35.736: E/AndroidRuntime(475): java.lang.NullPointerException
05-03 18:32:35.736: E/AndroidRuntime(475):  at com.mrj05hua.skylanders.SkylandersSoundboardActivity.onBackPressed(SkylandersSoundboardActivity.java:344)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.app.Activity.onKeyUp(Activity.java:1888)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.app.Activity.dispatchKeyEvent(Activity.java:2068)
05-03 18:32:35.736: E/AndroidRuntime(475):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.os.Looper.loop(Looper.java:123)
05-03 18:32:35.736: E/AndroidRuntime(475):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-03 18:32:35.736: E/AndroidRuntime(475):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 18:32:35.736: E/AndroidRuntime(475):  at java.lang.reflect.Method.invoke(Method.java:521)
05-03 18:32:35.736: E/AndroidRuntime(475):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-03 18:32:35.736: E/AndroidRuntime(475):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-03 18:32:35.736: E/AndroidRuntime(475):  at dalvik.system.NativeStart.main(Native Method)
05-03 18:32:39.327: I/Process(475): Sending signal. PID: 475 SIG: 9
05-03 18:36:59.016: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 873 objects / 61256 bytes in 96ms
05-03 18:36:59.316: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 276 objects / 13632 bytes in 70ms
05-03 18:36:59.626: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 139 objects / 7040 bytes in 82ms
05-03 18:36:59.936: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 88 objects / 4552 bytes in 78ms
05-03 18:37:00.416: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 96 objects / 5184 bytes in 92ms
05-03 18:37:00.826: D/dalvikvm(484): GC_EXTERNAL_ALLOC freed 101 objects / 5520 bytes in 90ms
05-03 18:37:35.257: W/KeyCharacterMap(484): No keyboard for id 0
05-03 18:37:35.257: W/KeyCharacterMap(484): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-03 18:37:35.336: D/AndroidRuntime(484): Shutting down VM
05-03 18:37:35.349: W/dalvikvm(484): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-03 18:37:35.427: E/AndroidRuntime(484): FATAL EXCEPTION: main
05-03 18:37:35.427: E/AndroidRuntime(484): java.lang.NullPointerException
05-03 18:37:35.427: E/AndroidRuntime(484):  at com.mrj05hua.skylanders.SkylandersSoundboardActivity.onBackPressed(SkylandersSoundboardActivity.java:344)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.app.Activity.onKeyUp(Activity.java:1888)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.app.Activity.dispatchKeyEvent(Activity.java:2068)
05-03 18:37:35.427: E/AndroidRuntime(484):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.os.Looper.loop(Looper.java:123)
05-03 18:37:35.427: E/AndroidRuntime(484):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-03 18:37:35.427: E/AndroidRuntime(484):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 18:37:35.427: E/AndroidRuntime(484):  at java.lang.reflect.Method.invoke(Method.java:521)
05-03 18:37:35.427: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-03 18:37:35.427: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-03 18:37:35.427: E/AndroidRuntime(484):  at dalvik.system.NativeStart.main(Native Method) 
```

--

```
 @Override 
  public void onBackPressed(){
     //Handles back button to close MediaPlayer
        if (player.isPlaying()) {
            super.finish();
        }
        else if (player.isPlaying())
              player.stop();
          player.release();
          super.finish();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:11:52.803

好吧，对于一个你有一个多余的 if 语句

```
if (player.isPlaying()) 
...
else if (player.isPlaying())
... 
```

您在这两个语句中检查相同的内容

接下来，您获得空指针的原因是因为`player`当您尝试访问它时可能为空

确保在访问之前检查播放器是否为空

```
@Override 
public void onBackPressed(){
  if (player != null){
      if(player.isPlaying())
          player.stop();

      player.release();
  }

  //there is no reason to call super.finish(); here
  //call super.onBackPressed(); and it will finish that activity for you
  super.onBackPressed(); 
} 
```

# java - 具有两组标签的 Java JSlider

> ID：10437713
> 
> 赞同：2
> 
> 时间：2012-05-03T19:00:09.757
> 
> 标签：java, swing, jlabel, jslider

是否可以在 JSlider 上显示两组具有相同刻度的标签，一组在顶部，一组在底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:37:40.630

您可以实现自己的`SliderUI`，如此处所示[，](https://stackoverflow.com/a/6996263/230513)并覆盖`paintTicks()`。

![图片](../Images/9e2a01a5cb4abfd6e28d43d6f2eb1a72.png)

或者，您可能正在尝试表示替代单位，例如摄氏度 v. 开尔文。您可能需要考虑以下选项之一：

*   添加一个相邻的切换按钮来切换显示的刻度单位。

*   添加一秒钟`JSlider`，让每个人`ChangeListener`将对方的模型设置为等效设置。

# javascript - 如何在点击/表单提交时调用 jsp 方法

> ID：10437717
> 
> 赞同：3
> 
> 时间：2012-05-03T19:00:33.830
> 
> 标签：javascript, html, jsp

我有一个带有以下代码的jsp页面：

```
<script type="text/javascript">
function getWithdrawAmmount()
{
var withdraw=document.forms["WithdrawDeposit"]["AmountToWithdraw"].value;
document.getElementById('hidden').type = withdraw;
}
</script> 
```

* * *

```
<form method="POST" name="WithdrawDeposit" onsubmit="getWithdrawAmmount()">
<table>
<tr><td><input type="text" size=5 name="AmountToWithdraw"></td>
<td><input type="button" value="Withdraw"></td></tr>
</table>
</form>
<input type="hidden" name="hidden" value=""> 
```

* * *

```
<% String AmountWithdraw = request.getParameter("hidden");  %>
<%!
public void Withdraw(){     
    int Amount = Integer.parseInt("AmountWithdraw");
Deposit deposit = new Deposit();
deposit.WithdrawMoney(AmountWithdraw);  
} %> 
```

* * *

我需要在表单提交时激活 Withdraw() 方法并获取文本输入。javascript 保存在“隐藏”中插入的值，我以后可以访问它。但我不能调用：<% Withdraw(); %> 来自 javascript 内部。

单击按钮后如何调用 Withdraw()？

10倍

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:27:44.807

首先你的代码行有问题

```
document.getElementById('hidden').type = withdraw; 
```

它正在寻找一个 id 为 hidden 的元素。不是名字，是身份证。因此，为您引用的元素添加一个 id。

其次，您正在设置一种类型。你不想设置值吗？

所以 HTML 看起来像

```
<input type="hidden" name="hidden" id="hidden" value="" /> 
```

和 JavaScript 将是

```
document.getElementById('hidden').value = withdraw; 
```

现在，如果您想调用服务器上的函数，则需要回发表单或进行 Ajax 调用。

# javascript - 使用 jQuery.post() 的 for 循环中的关联数组只存储最后一个条目

> ID：10437720
> 
> 赞同：0
> 
> 时间：2012-05-03T19:00:42.300
> 
> 标签：javascript, jquery, for-loop, associative-array, .post

我正在尝试在多个文档名称列表的 for 循环中使用**jQuery.post()从服务器中提取 xml 内容。**只有最后一个响应成功存储在关联数组中，而其他条目最终为**undefined**。

```
var pagedata  = new Array () ;

loadpagexml = function ( liststring ) {
  var pagenames = liststring.split(',') ;

  for ( var i in pagenames ){
    xmltoget = pagenames[i]+'.xml' ;
    $.post( xmltoget , function(data) { 
      pagedata[ pagenames[i] ] = data ;
    }) ;
  }
}

var listofpages = 'poo,dung,corn' ;
loadpagexml ( listofpages )

>pagedata['poo']
  undefined
>pagedata['dung']
  undefined
>pagedata['corn']
  #document 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:05:29.157

您的回调遇到了闭包问题，因此捕获的值始终是循环中的最后一个值，特别是因为这是一个异步操作。

你应该能够做到这一点：

```
(function(id, url)
{
    var idInternal = id;
    $.post(url, function(data)
    {
       pagedata[pagenames[idInternal]] = data;
    });
})(i, $xmlToGet); 
```

# c# - 每次使用会话获取/设置对象属性

> ID：10437741
> 
> 赞同：4
> 
> 时间：2012-05-03T19:02:07.273
> 
> 标签：c#, asp.net, session

我尝试搜索这个，但我什至不知道如何用它来搜索。

我试图做的是有一个类，每次我访问它来更改它时，我真的从会话中获取和设置值。

这是我正在尝试做的事情（我到目前为止所做的事情。）：

```
public class example
{
   public int prop1 {get;set;}

   public static example Instance
   {
       return (example)(HttpContext.Current.Session["exampleClass"] ?? new example());
   }

}

public class main
{
   protected void Page_Load(object sender, EventArgs e)
   {
      example.Instance.prop1 = "aaa"; //stores value into session
      txtInput.Text = example.Instance.prop1; //retrieves value from session
   }
} 
```

我希望这对我正在尝试做的事情有意义。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T19:12:06.417

使用泛型很容易做到这一点。

试试这个。

```
public class Session
{
    public User User
    {
        get { return Get<User>("User"); }
        set {Set<User>("User", value);}
    }

    /// <summary> Gets. </summary>
    /// <typeparam name="T"> Generic type parameter. </typeparam>
    /// <param name="key"> The key. </param>
    /// <returns> . </returns>
    private T Get<T>(string key)
    {
        object o = HttpContext.Current.Session[key];
        if(o is T)
        {
            return (T) o;
        }

        return default(T);
    }

    /// <summary> Sets. </summary>
    /// <typeparam name="T"> Generic type parameter. </typeparam>
    /// <param name="key">  The key. </param>
    /// <param name="item"> The item. </param>
    private void Set<T>(string key, T item)
    {
        HttpContext.Current.Session[key] = item;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T19:11:45.293

看起来您已经很接近了，但是您没有任何东西可以将对象实际存储在会话中。尝试这样的事情：

```
public static Example Instance
{
    get
    {
        //store the object in session if not already stored
        if (Session["example"] == null)
            Session["example"] = new Example();

        //return the object from session
        return (Example)Session["example"];
    }
} 
```

这基本上只是[单例模式](http://www.oodesign.com/singleton-pattern.html)的网络友好实现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T19:27:23.457

```
using System.Web;
using System.Web.SessionState;
using System.Collections.Generic;

public static class ExampleSession
{
    private static HttpSessionState session { get { return HttpContext.Current.Session; } }

    public static string UserName
    {
        get { return session["username"] as string; }
        set { session["username"] = value; }
    }

    public static List<string> ProductsSelected
    {
        get
        {             
            if (session["products_selected"] == null)
                session["products_selected"] = new List<string>();

            return (List<string>)session["products_selected"];        
        }
    }
} 
```

你可以像这样使用它：

```
public class main
{
   protected void Page_Load(object sender, EventArgs e)
   {
      //stores value into session
      ExampleSession.UserName = "foo";
      ExampleSession.ProductsSelected.Add("bar"); 
      txtInput.Text = ExampleSession.UserName; //retrieves value from session
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T19:17:06.067

```
public class example {
   public int prop1 { get; set; } 

   public static example Instance {
       var exampleObject = (example)(HttpContext.Current.Session["exampleClass"]
                                     ?? new example());

       HttpContext.Current.Session["exampleClass"] = exampleObject;

       return exampleObject; 
   } 

} 
```

如果需要，您可以进一步优化它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T19:48:27.703

如果您正在寻找一种更加面向对象的会话方式，那么下面是一种很好的方式。

用户会话类

```
[Serializable()]
public class UserSession
{

    private CurrentRecord _CurrentRecord;
    public CurrentRecord CurrentRecord
    {
        get
        {
            if ((_CurrentRecord == null))
            {
                _CurrentRecord = new CurrentRecord();
            }
            return _CurrentRecord;
        }
        set
        {
            if ((_CurrentRecord == null))
            {
                _CurrentRecord = new CurrentRecord();
            }
            _CurrentRecord = value;
        }
    }
} 
```

* * *

全局类

```
public static class Globals
{
    public static UserSession TheUserSession
    {
        get
        {
            if ((HttpContext.Current.Session["UserSession"] == null))
            {
                HttpContext.Current.Session.Add("UserSession", new CurrentUserSession());
                return (CurrentUserSession)HttpContext.Current.Session["UserSession"];
            }
            else
            {
                return (CurrentUserSession)HttpContext.Current.Session["UserSession"];
            }
        }
        set { HttpContext.Current.Session["UserSession"] = value; }
    }
} 
```

* * *

当前记录类

```
[Serializable()]
public class CurrentRecord
{
    public int id { get; set; }
    public string name { get; set; }
} 
```

* * *

在后面的代码中使用

```
 public void SetRecordId(int newId)
    {
        Globals.TheUserSession.CurrentRecord.id = newId;
    } 
```

# ffmpeg - 如何在服务器端获取 MP3 文件（VBR 或 CBR）的真实持续时间

> ID：10437750
> 
> 赞同：27
> 
> 时间：2012-05-03T19:02:26.430
> 
> 标签：ffmpeg, mp3, duration

我曾经使用 ffmpeg 在服务器端计算 MP3 文件的持续时间 - 这似乎工作正常。今天我发现有些计算是错误的。不知何故，由于某种原因，ffmpeg 会错误计算持续时间，而且它似乎只发生在可变比特率 mp3 文件中。

在本地测试时，我注意到 ffmpeg 以绿色打印了两行额外的行。

使用的命令：

```
ffmpeg -i song_9747c077aef8.mp3 
```

ffmpeg 说：

```
[mp3 @ 0x102052600] max_analyze_duration 5000000 reached at 5015510
[mp3 @ 0x102052600] Estimating duration from bitrate, this may be inaccurate 
```

在一个不错的、温暖的谷歌会话之后，我发现了一些关于此的帖子，但没有找到解决方案。

然后我尝试增加最大持续时间：

```
ffmpeg -analyzeduration 999999999 -i song_9747c077aef8.mp3 
```

在此之后，ffmpeg 只返回了第二行：

```
[mp3 @ 0x102052600] Estimating duration from bitrate, this may be inaccurate 
```

但无论哪种情况，计算出的持续时间都是完全错误的。将其与 VLC 进行比较，我注意到持续时间是正确的。

经过更多研究后，我偶然发现了 mp3info - 我安装并使用了它。

```
mp3info -p "%S" song_9747c077aef8.mp3 
```

mp3info 然后返回了**正确**的持续时间，但只是作为一个整数，我不能使用它，因为我需要一个更准确的数字。*用户blahdiblah*在下面的评论中解释了其原因- mp3info 只是从文件中提取 ID3 信息而不实际执行任何计算。

我也尝试使用 mplayer 来检索持续时间，但就像 ffmpeg 一样，mplayer 返回错误的值。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-13T12:20:44.123

我终于找到了使用 sox 解决这个问题的正确方法——它返回了正确的信息。

```
sox file.mp3 -n stat
Samples read:          19321344
Length (seconds):    219.062857
Scaled by:         2147483647.0
Maximum amplitude:     1.000000
Minimum amplitude:    -1.000000
Midline amplitude:    -0.000000
Mean    norm:          0.141787
Mean    amplitude:     0.000060
RMS     amplitude:     0.191376
Maximum delta:         0.947598
Minimum delta:         0.000000
Mean    delta:         0.086211
RMS     delta:         0.115971
Rough   frequency:         4253
Volume adjustment:        1.000 
```

**长度（秒）：219.062857**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-10-14T01:50:12.213

您可以完全解码文件以获得实际持续时间：

```
ffmpeg -i input.mp3 -f null - 
```

控制台输出的倒数第二行将显示如下内容：

```
size=N/A time=00:03:49.12 bitrate=N/A 
```

`time`实际持续时间在哪里。在这个例子中，整个过程大约需要 0.5 秒。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-03-10T04:18:55.243

更简单的方法是使用 ffmpeg 从 ID3 标签中持续时间错误的文件中复制文件。这会导致它写入正确的信息。

```
ffmpeg -i "audio.mp3" -acodec copy "audio_fixed.mp3" 
```

因为它使用复制，所以它只需要原始编码时间的一小部分。这对于一首歌来说几乎是不明显的，但你真的很欣赏这本 7 小时的有声读物。重新编码后，ID3“持续时间”标签现在具有正确的信息。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-06T09:30:31.280

来自 llogan (LordNeckbeard) 的扩展解决方案。要仅获取统计信息，您可以添加标志 -v quiet -stats

```
ffmpeg -v quiet -stats -i input.mp3 -f null - 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-12-09T22:52:05.397

**如果没有提供其他参数， ffmpeg**将打印所有文件信息。

使用**grep**或**awk**仅返回“持续时间”：

`ffmpeg -i file.mp3 2>&1 | grep Duration`

`ffmpeg -i file.mp3 2>&1 | awk '/Duration/ { print substr($2,0,length($2)-1) }'`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-30T19:42:00.653

```
AV_LOG_FORCE_NOCOLOR=y ffmpeg -nostdin -hide_banner -nostats -loglevel info -i audio.mp3 -f null -vn -c:a copy - 2>&1 | tail -n 2 
```

```
declare out="$(AV_LOG_FORCE_NOCOLOR=y ffmpeg -nostdin -hide_banner -nostats -loglevel info -i video.mp4 -f null -vn -c:a copy - 2>&1 | tail -n 2 | head -n 1)"
if [[ "$out" =~ \ time=([0-9]+):([0-9]{2}):([0-9]{2})\.([0-9]+) ]]; then
  declare duration=0 us="${BASH_REMATCH[4]}" t
  for t in "${BASH_REMATCH[@]:1:3}"; do
    ((duration *= 60))
    ((duration += ${t#0} ))
  done
  while [ ${#us} -lt 6 ]; do us+=0; done
  ((us >= 500000)) && ((duration++))
  ((duration)) || ((duration++))
fi
echo -E Duration: "$duration" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-24T09:07:02.130

```
sudo apt install sox 
sudo apt-get install libsox-fmt-mp3 
```

进而：

```
sox yourfile.mp3 -n stat 
```

# php - 不推荐使用：在第 80 行的 D:\xampp\php\PEAR\Config.php 中不推荐使用通过引用分配 new 的返回值

> ID：10437751
> 
> 赞同：-1
> 
> 时间：2012-05-03T19:02:28.087
> 
> 标签：php, xampp, php-5.3, deprecated

```
 <?php
/**
* This class is sort of factory class that is responsible for loading
* classes, it check if this class is not defined then it includes the file
* So developer don't need to worry about including that file
* @author Haafiz
*/
class load{

    public static $app_path= APP_PATH;
    public static $model_path=MODEL_PATH;

    /*
    * @param string $model_name <>Name of class(model) that is required to instantiate/load</p>
    * @param bool $continue_on_error  this decide whether to have fatal error or continue on error loading
    * $return object 
    */
    public static function model($model_name,$conitnue_on_error=0){
        if(!class_exists($model_name)){
            $model_filename= strtolower($model_name).".php";
            try{
                include self::$model_path.$model_filename;
            }
            catch(Exception $e){
                if(!$continue_on_error){
                die($e);
                }
            }
            $model=new $model_name();
            return $model;
        }       
    }
}

?> 
```

在上面的代码中必须面对以下错误。有些人在其他一些线程中说问题在于使用`&`，我没有使用它。那么在我的情况下实际上是什么问题？一切似乎都正确地做每一件事。看到了一些其他线程，但没有找到任何解决方案。所以请如果其他人理解它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:20:47.970

第 80 行`php/PEAR/Config.php`确实在使用参考。

```
 function Config()
    {
        $this->container =& new Config_Container('section', 'root');
    } // end constructor 
```

请参阅有关此问题和更新 PEAR 包的问题[。](https://stackoverflow.com/questions/5617605/xampp-1-7-4-and-php-5-3-5-deprecated-warnings)

# xpath - 使用 XPath 定位评论的一部分

> ID：10437753
> 
> 赞同：1
> 
> 时间：2012-05-03T19:02:35.180
> 
> 标签：xpath

我正在尝试使用 xpath 从评论或后面的文本中返回值“Vancouver”。谁能指出我正确的方向？

位置 li 始终是第一项但并不总是存在，并且它之后的列表项的数量因每个项而异。

```
<item>
<title>
<description>
<!-- Comment #1 -->
<ul class="class1">
<li> <!-- ABC Location=Vancouver -->Location: Vancouver</li>
<li> <!-- More comments -->Text</li>
<li> text</li>
</ul>
</description>
</item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:29:24.293

这将从评论后的文本中提取它：

```
substring-after(//ul[@class='class1']/li[position()=1 and contains(.,'Location:')],'Location: ') 
```

这指定了类“class1”中的第一个，仅当它包含“Location:”时，并采用“Location:”之后的字符串`<li>`。`<ul>`如果你想放宽它是第一个 li 的要求，使用这个：

```
substring-after(//ul[@class='class1']/li[contains(.,'Location:')],'Location: ') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:28:41.743

这不是雄辩的，如果您的“位置：#####”在结构上发生变化，它可能会导致问题，因为这是一个静态解决方案，但它适用于上述情况：

```
substring(//item//li[1],12,string-length(//item//li[1])-10) 
```

这将返回等效的字符串，而不是节点。有点匆忙，所以我会随着时间的推移给出一个更好的解决方案，但这只是需要考虑的事情......（它只是剥离“位置：”并返回它之后的任何内容......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:25:06.270

**使用**：

```
 substring-after(/*/description/ul
                       /li[1]/text()[starts-with(., 'Location: ')],
                  'Location: '
                  ) 
```

**要从评论中提取位置，请使用**：

```
 substring-after(/*/description/ul
                       /li[1]/comment()[starts-with(., ' ABC Location=')],
                  ' ABC Location='
                  ) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "substring-after(/*/description/ul
                           /li[1]/text()[starts-with(., 'Location: ')],
                      'Location: '
                      )
     "/>
==========

     <xsl:copy-of select=
     "substring-after(/*/description/ul
                           /li[1]/comment()[starts-with(., ' ABC Location=')],
                      ' ABC Location='
                      )
     "/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<item>
    <title/>
    <description>
        <!-- Comment #1 -->
        <ul class="class1">
            <li>
                <!-- ABC Location=Vancouver -->Location: Vancouver
            </li>
            <li>
                <!-- More comments -->Text
            </li>
            <li> text</li>
        </ul>
    </description>
</item> 
```

**计算两个 XPath 表达式，并将计算结果复制到输出：**

```
Vancouver

==========

Vancouver 
```

# php - SQL，如何不计算 0 值

> ID：10437771
> 
> 赞同：0
> 
> 时间：2012-05-03T19:04:00.323
> 
> 标签：php, mysql

我正在尝试使用此代码查找总票数，我有 12 个标准；因此，我将每个 SHOP_ID 的 TOTAL 相加，然后除以 12（用于总计的列数）。COUNT(shop_id) 查找商店的数量，例如，如果我有 2 个 shop_id 输入一个，总共 0（12 个 0 条目），另一个总共 60，除以 12 个标准，然后除以 shop_id 计数2 (60/12)/2 = 2.5 我希望结果为 5。有些如何不计算除法中 0 的列。

```
$sel = mysql_query("SELECT SUM(comfort + service + ambience + mood + spacious + 

    experience + cleanliness+ price + drinks + food + music + toilets)/(12/COUNT(shop_id) as total                  
    FROM ratings         
    WHERE shop_id = $shop_id");                 

if(mysql_num_rows($sel) > 0){
    while($data = mysql_fetch_assoc($sel)){
        $total = $total + $data['total']; 
        $rows++;
    }
    $perc = ($total/$rows);
    return round($perc,2);
} else {
    return '0';
} 
```

如果我提供图像以便直观地显示要实现的目标会更好吗？

每行不是 1 票，每个 shop_id 是 12 票。每列类别名称：comfort + service + ambience，是一个列 id，该字段的条目为 1 票，它将 12 计为 1 票，如果您为 1 个标准投票，则其他 11 个为 0，并返回错误结果，因为除以 2 将是正确答案的一半

出于测试目的，我上传了一个可视化示例并将评分列从 12 缩短到 7。 ![表格示例](../Images/a1910d8a3ed9c48f6b971db89a75d336.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:30:01.473

添加到查询的末尾：

```
HAVING comfort + service + ambience + mood + spacious + experience + cleanliness+ price + drinks + food + music + toilets != 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:26:36.880

尝试使用 HAVING 子句：

```
select
...
from
...
where
...
having COUNT(shop_id) > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:29:12.837

```
SELECT SUM(comfort + service + ambience + mood + spacious + 
experience + cleanliness+ price + drinks + food + music + toilets)/(12/COUNT(shop_id) as total                  
FROM ratings         
WHERE shop_id = $shop_id
HAVING total > 0 
```

我很确定您的查询不太正确，但这可能是一个错字。

这里可能是一个更好的查询：

```
SELECT shop_id, SUM(comfort + service + ambience + mood + spacious + 
experience + cleanliness+ price + drinks + food + music + toilets)/12 as total_rating                 
FROM ratings         
GROUP BY shop_id
HAVING total > 0 
```

就个人而言，我认为如果有人全盘得分为 0，这值得注意，但上面应该为您提供每家商店的平均评分，并过滤掉任何不是至少 1 的评分。

如果每个类别的范围为 0 - 5 并且有 12 个类别，这意味着它们的百分比分数是（单个分数的总和）/（可能的总分）* 100，或者，在这种情况下，它们的总和个人分数/.6（结果相同）。如果您想要一个“星级”，其中星星的数量等于每个类别的最高分，那只是平均值。在这种情况下，我会四舍五入到小数点后一位。因此，如果您想走那条路，我会使用以下查询：

```
 SELECT shop_id, 
          Ceiling(
                 Sum(comfort + service + ambience + mood + spacious + 
                      experience + cleanliness + price + 
                      drinks + food + music + toilets
           ) /. 6) 
          AS  percent_rating, 
          ROUND(
            SUM(
              comfort + service + ambience + mood + 
              spacious + experience + cleanliness + 
              price + drinks + food + music + toilets
            )/12, 1)
          as star_rating
   FROM   ratings 
   GROUP  BY shop_id 
```

现在，如果你想让它在每个分数超出 100% 的位置进行布局，那么它将是 (cat_score/5) * 100 或 (cat_score/.05)。我不确定是否有一种简单的方法可以应用到所有类别，而不必明确地为每个字段进行数学运算，但我真的认为你不需要费心去弄清楚 4/ 5 为 80%。

至于如何处理默认 0 和故意 0，您无法知道其中的区别。如果有人没有足够的感动将其从 0（或空白）更改，那一定不是那么棒。最好的办法是将默认值设置为中间 (3)，如果它实际上非常糟糕，它是 0，大多数人会将它标记为更低。同样，如果您选择将其留空（不是 0，它是 NULL），然后你可以将它移动到 3（效果相同。如果他们把它全部留空，这与说“所以平均我没有填写它”是一样的）或者你可以把它变成一个数字你认为是公平的（可能是 1 或 2）。把它扔掉是一个痛苦的 mysql，并且在统计中会导致误导性数据（认为挂乍得结合语言障碍，所以他们把它留空）。最后，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T19:58:07.310

您的查询不太正确。它缺少一个括号。

正确一：

```
$sel = mysql_query("SELECT SUM(comfort + service + ambience + mood + spacious +  
experience + cleanliness+ price + drinks + food + music +toilets)/(12/COUNT(shop_id)) 
as total FROM ratings WHERE shop_id = $shop_id having COUNT(shop_id) > 0"); 
```

# c# - Linq：按名称选择所有项目组，计数等于0

> ID：10437772
> 
> 赞同：1
> 
> 时间：2012-05-03T19:04:03.220
> 
> 标签：c#, .net, linq, linq-to-objects

我有餐桌订单（姓名、日期、价格）

```
 horse, 7.5.2012, 100
  cat, 14.5.2012, 50
  horse, 8.5.2012, 70,
  dog, 13.5.2012, 40 
```

我想在星期一显示订单名称和价格总和。输出我想要的：

```
 horse, 100
  cat, 50
  dog, 0 
```

但现在我只有这个：

```
 horse, 100
  cat, 50 
```

使用此 linq 查询

```
 from c in orders
  where (int)c.date.DayOfWeek == this._monday
  group c by c.name into g
  select new {
    Name = g.Key,
    Price = g.Sum(c => c.Price)
  } 
```

你能帮我吗，我必须改变什么才能得到我想要的输出，好吗？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T19:14:25.677

先尝试分组，然后为星期一进行过滤

```
from c in orders  
group c by c.name into g
  select new {
    Name = g.Key,
    Price = g.Where(c => (int)c.date.DayOfWeek == this._monday).Sum(c => c.Price)
  } 
```

# c# - Parsing multi-level JSON array

> ID：10437774
> 
> 赞同：1
> 
> 时间：2012-05-03T19:04:07.137
> 
> 标签：c#, .net, json

I'm trying to get objects from a multi-level JSON array. This is the an example table: array(2) {

```
 ["asd"]=>
  array(3) {
    ["id"]=>
    int(777)
    ["profile"]=>
    array(4) {
      ["username"]=>
      string(5) "grega"
      ["email"]=>
      string(18) "random@example.com"
      ["image"]=>
      string(16) "http...image.jpg"
      ["age"]=>
      int(26)
    }
    ["name"]=>
    string(5) "Grega"
  }
  ["be"]=>
  array(4) {
    ["username"]=>
    string(5) "grega"
    ["email"]=>
    string(18) "random@example.com"
    ["image"]=>
    string(16) "http...image.jpg"
    ["age"]=>
    int(26)
  }
} 
```

The string I'm trying to reach is either of the emails (example). This is how I try it:

```
public class getAsd
    {
        public string asd;
    }
    public class Profile
    {
        public string username { get; set; }
        public string email { get; set; }
        public string image { get; set; }
        public string age { get; set; }  
    }
} 
```

And then using `JavaScriptSerilization.Deserilize<Asd>(jsonData);` to deserilize it, but when I try the same with "Profile", it gives me the following error:

```
No parameterless constructor defined for type of 'System.String'. 
```

JSON:

```
{"asd":{"id":777,"profile":{"username":"grega","email":"random@example.com","image":"http...image.jpg","age":26},"name":"Grega"},"be":{"username":"grega","email":"random@example.com","image":"http...image.jpg","age":26}} 
```

And idea what might be wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:31:36.723

[EDIT: Smarm removed. OP did add JSON in an edit.]

Your profile class, as JSON, should resemble the following.

```
{
    "username":"grega",
    "email":"random@example.com",
    "image":"http...image.jpg",
    "age":"26",
    "roles": [
        {"name": "foo"},
        {"name": "bar"}
    ]
} 
```

`array` should not show up in JSON unless its part of a property name (`"codearray"`) or property value(`"There's no 'array' in JSON. There's no 'array' in JSON."`).

Arrays of objects in JSON are encased in square brackets `[]` and comma-delimited. An array/collection of profiles in JSON:

```
[
    {
        "username":"gretta",
        "email":"mrshansel@example.com",
        "image":"http...image.jpg",
        "age":"37",
        "roles": [
            {"name": "foo"},
            {"name": "bar"}
        ]
    },
    {
        "username":"methusaleh",
        "email":"old@men.org",
        "image":"http...image.jpg",
        "age":"2600",
        "roles": [
            {"name": "foo"},
            {"name": "},
            {"name": "bar"}
        ]
    },
    {
        "username":"goldilocks",
        "email":"porridge@bearshous.com",
        "image":"http...image.jpg",
        "age":"11",
        "roles": [
            {"name": "foo"}
        ]
    }
] 
```

While that may not fully answer your question, could you start with that and update your question?

EDIT: See [this answer by Hexxagonal](https://stackoverflow.com/a/10438270/1193146) for the complete approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:41:41.457

Alright, here was what a "basic" version of your classes would be. You should really follow a standard of having properties have their first letter capitalized. Since you did not do this earlier, I maintained that style.

```
public class Type1
{
    public TypeAsd asd { get; set; }
    public TypeBe be { get; set; }
}

public class TypeAsd
{
    public int id { get; set; }
    public TypeBe profile { get; set; }
    public string name { get; set; }
}

public class TypeBe
{
    public string username { get; set; }
    public string email { get; set; }
    public string image { get; set; }
    public int age { get; set; }
} 
```

You deserialization code would then look something like the following:

```
string jsonString = "{\"asd\":{\"id\":777,\"profile\":{\"username\":\"grega\",\"email\":\"random@example.com\",\"image\":\"http...image.jpg\",\"age\":26},\"name\":\"Grega\"},\"be\":{\"username\":\"grega\",\"email\":\"random@example.com\",\"image\":\"http...image.jpg\",\"age\":26}}";
JavaScriptSerializer serializer = new JavaScriptSerializer();
Type1 obj = serializer.Deserialize<Type1>(jsonString); 
```

# php - MYSQL 查询同一个字段两次

> ID：10437778
> 
> 赞同：0
> 
> 时间：2012-05-03T19:04:24.580
> 
> 标签：php, mysql, field

我有以下不返回结果的查询：

```
1\. SELECT *
2\. FROM wp_postmeta pm
3\. LEFT JOIN wp_posts p ON (p.ID = pm.post_id)
4\. LEFT JOIN wp_term_relationships tr ON (p.ID = tr.object_id)
5\. LEFT JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id)
6\. WHERE p.post_status = 'publish' 
7\. AND p.post_type = 'post' 
8\. AND p.post_date < NOW()+INTERVAL 1 DAY 
9\. AND tt.taxonomy = 'category' 
10\. AND tt.term_id IN(3)
11\. AND (pm.meta_key = 'EndDate' AND pm.meta_value > DATE_ADD(NOW(), INTERVAL 3 HOUR)) 
12\. AND (pm.meta_key = 'NumPrizes' AND pm.meta_value > 1)
13\. GROUP BY ID
14\. ORDER BY p.ID DESC 
```

问题是由于第 11 行和第 12 行而出现的。我可以删除其中一个并获得结果，但我需要两者才能获得我想要的。

我想要的是获得 pm.meta_key EndDate 大于今天且 pm.meta_key NumPrizes 大于 0 的结果。

这个想法是输出数据库中的奖品总数。

数据库是wordpress建的，不能改。它的工作方式是 meta_key 有一个值，它是字段的名称，而 meta_value 是 meta_key 的实际值。

wp_postmeta 表的示例：

```
meta_id     post_id    meta_key   meta_value
1           45         EndDate    2012-01-01    <- too old
2           45         NumPrizes  5             <- since too old, don't count
3           76         EndDate    2012-07-03    <- valid date but...
4           76         NumPrizes  1             <- only 1 prize so don't count
5           90         EndDate    2012-06-02    <- valid date and
6           90         NumPrizes  4             <- more than one prize so count it
7           192        EndDate    2012-09-01    <- valid date and
8           192        NumPrizes  9             <- more than one prize so count it 
```

预期输出：奖品数量为 13。（4+9 = 13）。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:13:03.447

当然，单个列不可能同时采用两个不同的值：

> ```
> 11\. AND pm.meta_key = 'EndDate'      <<-- big error: column can't take two
> 12\. AND pm.meta_key = 'NumPrizes'    <<--      differents values at a time 
> ```

您应该规范化表和/或编写正确的查询：

```
1\. SELECT *
2\. FROM wp_postmeta pm
3\. LEFT JOIN wp_posts p ON (p.ID = pm.post_id)
4\. LEFT JOIN wp_term_relationships tr ON (p.ID = tr.object_id)
5\. LEFT JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id)
6\. WHERE p.post_status = 'publish' 
7\. AND p.post_type = 'post' 
8\. AND p.post_date < NOW()+INTERVAL 1 DAY 
9\. AND tt.taxonomy = 'category' 
10\. AND tt.term_id IN(3)
11\. AND (pm.meta_key = 'EndDate' AND pm.meta_value > DATE_ADD(NOW(), INTERVAL 3 HOUR)) 
12\. AND exists (
          select 1 from wp_postmeta pm2 where
          pm2.post_id  = pm.post_id and
          pm2.meta_key = 'NumPrizes' AND pm2.meta_value > 1
    )
13\. GROUP BY ID
14\. ORDER BY p.ID DESC 
```

**已编辑**

乔纳森，我不知道您的预期结果，因为您谈论的是单个标量结果（编号 13），但在您的查询中，您将主表与其他表连接起来。我希望我在这里编写的这段代码可以对您有所帮助，但您应该根据您的具体情况对其进行调整。

```
1\. SELECT *, sum( __your_prizes_agrregation__ )
2\. FROM wp_postmeta pm
3\. LEFT JOIN wp_posts p ON (p.ID = pm.post_id)
4\. LEFT JOIN wp_term_relationships tr ON (p.ID = tr.object_id)
5\. LEFT JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id)
6\. WHERE p.post_status = 'publish' 
7\. AND p.post_type = 'post' 
8\. AND p.post_date < NOW()+INTERVAL 1 DAY 
9\. AND tt.taxonomy = 'category' 
10\. AND tt.term_id IN(3)
11\. AND exists (
          select 1 from wp_postmeta pm2 where
          pm2.post_id  = pm.post_id and
          pm2.meta_key = 'EndDate' AND 
          pm2.meta_value > DATE_ADD(NOW(), INTERVAL 3 HOUR)
    )
12\. AND exists (
          select 1 from wp_postmeta pm2 where
          pm2.post_id  = pm.post_id and
          pm2.meta_key = 'NumPrizes' AND pm2.meta_value > 1
    )
13\. GROUP BY ID
14\. ORDER BY p.ID DESC 
```

# mysql - 如何创建这个建筑师

> ID：10437779
> 
> 赞同：-3
> 
> 时间：2012-05-03T19:04:27.523
> 
> 标签：mysql, sql

我有一个这样的矩阵

```
 User                                   trial                      free
package1      fullaccess                             limited access             very limited access
              partial access to downloads            previews                   expiration

package2      full access                            n/a                        n/a
              full access to assets 
```

我将如何为这种情况创建架构

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:11:16.440

最好有一个权限表：

```
Permission (PermissionID varchar) 
```

（包含诸如“完全访问”、“部分”等内容）这将是可用权限的列表。

然后创建包：我可能会将 User+Package 组合为包

```
Package (PackageID int, PackageName varchar) 
```

最后填充您的连接表：

```
PackagePermissions (PackageID int, PermissionID varchar) 
```

为您的用户提供 PackageID，您可以跨表查询授予的权限。

```
select PermissionID
from User
inner join Package 
  on User.PackageID = Package.PackageID
inner join PackagePermission
  on Package.PackageID = PackagePermission.PacakgeID 
```

这使您能够随着时间的推移更改包、添加包和轻松添加新权限，同时最大限度地减少对用户的管理。

# javascript - 不悬停时停止jquery动画

> ID：10437780
> 
> 赞同：1
> 
> 时间：2012-05-03T19:04:29.493
> 
> 标签：javascript, jquery

我之前发布了一个关于`div`动画的问题，我正在尝试对其进行一些修改。我有一个`div`在页面加载时旋转的。当悬停在它上面时，我想让它停下来。

这是脚本

```
rotate(); //the function which rotates the div 
$("#div2").hover(function() {
    $("#div2").stop();
});​ 
```

这是我的 JS 页面

```
var obj = "div2";
var angle = 0;
var interval = 2323;
increment = 5;

function rotate() {
    $('#' + obj).css({
        '-moz-transform': 'rotate(' + angle + 'deg)',
        'msTransform': 'rotate(' + angle + 'deg)',
        '-webkit-transform': 'rotate(' + angle + 'deg)',
        '-o-transform': 'rotate(' + angle + 'deg)'
    });
    angle += increment;
    setTimeout(rotate, interval);
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:07:20.167

使用`clearTimeout()`方法。举个例子：

```
var obj = "div2";
var angle = 0;
var interval = 100;
var increment = 5;
var timer = null;

function rotate() {
    $('#' + obj).css({
        '-moz-transform': 'rotate(' + angle + 'deg)',
        'msTransform': 'rotate(' + angle + 'deg)',
        '-webkit-transform': 'rotate(' + angle + 'deg)',
        '-o-transform': 'rotate(' + angle + 'deg)'
    });
    angle += increment;
    timer = setTimeout(rotate, interval);
}

$("#div2").hover(function() {
    clearTimeout(timer);
}, function() {
    rotate();
});

rotate(); //the function which rotates the div​​ 
```

**演示：http:** [//jsfiddle.net/Uf9qZ/](http://jsfiddle.net/Uf9qZ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T19:22:03.963

```
var elm = $("#div2"),
    angle = 0,
    interval = 2323,
    increment = 5,
    T = setInterval(rotate, interval);

elm.on({
    mouseenter: function () {
        clearInterval(T);
    },
    mouseleave: function() {
        T = setInterval(rotate, interval);
    }
});

function rotate() {
    elm.css({
        '-moz-transform': 'rotate(' + angle + 'deg)',
        'msTransform': 'rotate(' + angle + 'deg)',
        '-webkit-transform': 'rotate(' + angle + 'deg)',
        '-o-transform': 'rotate(' + angle + 'deg)'
    });
    angle += increment;
}​ 
```

[小提琴](http://jsfiddle.net/Y9ETt/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T19:10:25.603

您正在执行自己的轮换实现，您也必须自己处理管理，因此缓存`setTimeout`对象并`clearTimeout`在需要停止时使用

# javascript - 在 Meteor 中访问 node.js 文件系统模块

> ID：10437783
> 
> 赞同：9
> 
> 时间：2012-05-03T19:04:40.127
> 
> 标签：javascript, node.js, meteor

我正在创建一个网络应用程序，它将编辑存储在用户 HD 上的一些配置文件，并决定给 Meteor 一个机会。

我想使用 Node.js 的文件系统模块来处理配置文件的 I/O，但我无法弄清楚如何包含该模块。经过一番搜索，我在 StackOverlow 上找到了以下代码，这应该允许我需要该模块：

```
var require = __meteor_bootstrap__.require;
var fs = require('fs'); 
```

但是，即使将其放置在我的代码的 if(server) 部分中，我的应用程序仍然会抛出错误并告诉我“fs”未定义。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T07:12:54.840

从 0.6.0 开始，您需要使用**Npm.require**

```
var fs = Npm.require('fs'); 
```

# mobile - jquery mobile listview滚动缓慢且不流畅

> ID：10437786
> 
> 赞同：2
> 
> 时间：2012-05-03T19:04:51.700
> 
> 标签：mobile, jquery-mobile

用jquery mobile搭建了一个app，差不多完成了，将app部署到phonegap后发现滚动和总感觉不流畅，滚动很慢，感觉怪怪的。我几乎尝试了一切，

1)`$document.bind("touchstart", function(event){})`

2)`$.mobile.buttonMarkup.hoverDelay = 0;`

3）使用[scrollview.js](https://github.com/jquery/jquery-mobile/tree/master/experiments/scrollview)

4）移除`ul > li`并放置`divs`，而不是移除锚点`<a>`

以上所有内容都没有改变，滚动仍然卡住。你有什么主意吗？

尝试在您的 iPhone 中浏览 Safari 中的应用程序，看看我在说什么。

[http://saloona.co.il/mobile](http://saloona.co.il/mobile)

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:37:15.337

**jquery.mobile-1.1.1**

删除内容包装器为我修复了它。

```
<div data-role='content'> </div> 
```

它的滚动就像 Safari 中的网页一样流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:41:48.730

性能和滚动视图不佳存在一些问题，尤其是在 android 上。一般来说，你的 DOM 越复杂，滚动视图的性能就越差。JQM 团队[在他们上一个主要版本中解决了这个问题](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)：

> 替代方法使用基于 JavaScript 的动量滚动器来实现真正的固定工具栏，但这些仅适用于一小部分平台，具有非本地滚动物理特性，并且可能会在功能较弱的设备中引入性能和可用性问题。

因此，他们`position:fixed`在最新版本中切换到真正的固定工具栏 ( )，大多数设备都在使用该工具栏。我认为这是最好的方法。

# c++ - C/C++ 重复符号错误

> ID：10437789
> 
> 赞同：1
> 
> 时间：2012-05-03T19:05:21.497
> 
> 标签：c++, c, gcc, compiler-errors, g++

我目前正在尝试编译一个混合了 cpp 和 c 的现有项目。

我的makefile如下；

```
execute: mgnsvd.o multifit.o cit.o  main.o
    g++ -Wall -g multifit.o cit.o main.o mgnsvd.o -lgsl -lgslcblas -o execute 

main.o: main.cpp cit.cpp
    g++ -Wall -g -c main.cpp

cit.o: cit.cpp mgnsvd.c multifit.h
   g++ -Wall -g -c cit.cpp

multifit.o: multifit.c mgnsvd.c multifit.h
   g++ -Wall -g -c multifit.c

mgnsvd.o: mgnsvd.c
    g++ -Wall -g -c mgnsvd.c 
```

我的主要是一个相当简单的

```
// global libraries
#include <iostream>

// local files
#include "cit.cpp"

// using directives
using std::endl;
using std::cout;

// main
int main(){

  cout << "Hello, world" << endl; 

 return 0;
} 
```

如果注释掉#include "cit.cpp"，它编译得很好。但是，如果我包含它，则会发生以下错误；

```
ld: duplicate symbol _first_function_in_cit in main.o and cit.o for architecture x86_64 
```

_first_function 始终是第一个函数，并且没有在其他任何地方定义甚至声明/使用。目标文件的 grep 确认该函数似乎已合并到 main.o，但为什么呢？我以前没有从事过 C++/C 项目，所以也许我犯了一些规范错误？我也在 OSX 中，如果这有什么不同的话。

作为记录，没有类 - .h 文件包含一些结构和一些宏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:07:35.670

没有必要

```
 #include "cit.cpp" 
```

cit.cpp 被编译为一个单独的单元，然后被链接。

使用上述包含您可以两次获得代码，结果是重复的符号

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T19:07:53.897

`cit.cpp`正在自行编译，并且也包含在其中，`main.cpp`因此您将获得其中所有代码的两个副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T19:09:32.923

你正在编译 cit.cpp 以产生 cit.o，并且你正在用`#include "cit.cpp"`你的 main.cpp 中的那个暴行再次编译它。所以你当然会得到重复的符号。

# r - 从数据框中选择数字

> ID：10437793
> 
> 赞同：0
> 
> 时间：2012-05-03T19:05:44.920
> 
> 标签：r, dataframe

```
library("PerformanceAnalytics")
a<-seq(from=1,to=2,by=.01)
b<-table.Stats(a)
str(b)
'data.frame':   16 obs. of  1 variable:
  $ : num  101 0 1 1.25 1.5 ...
b
                      NA
Observations    101.0000
NAs               0.0000
Minimum           1.0000
Quartile 1        1.2500
Median            1.5000
Arithmetic Mean   1.5000
Geometric Mean    1.4828
Quartile 3        1.7500
Maximum           2.0000
SE Mean           0.0292
LCL Mean (0.95)   1.4422
UCL Mean (0.95)   1.5578
Variance          0.0858
Stdev             0.2930
Skewness          0.0000
Kurtosis         -1.2357 
```

我需要创建一个数据框“s”，它只包含数字，我不知道如何调用“b”来只返回数字。你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:16:14.710

不确定这是否是一个真正的问题。`b`确实只包含数字。您看到的单词是行名。您给出的示例的一个小修改显示了一个包含两列的数据框的创建：

```
library("PerformanceAnalytics")
a<-seq(from=1,to=2,by=.01)
b<-table.Stats(a)
c<-seq(from=5,to=6,by=.01)
d<-table.Stats(c)
e <- cbind(b,d)
str(e) 
```

# android - 3D旋转像Android中的信用卡

> ID：10437795
> 
> 赞同：1
> 
> 时间：2012-05-03T19:06:31.680
> 
> 标签：android, opengl-es

我需要提供一些图像的 3D 旋转，例如信用卡（请查看[链接](http://footage.shutterstock.com/clip-212878-stock-footage-rotating-credit-card.html)中的视频）

我想知道在Android的情况下是否可行。如果是，我该怎么做。

卡片必须有一定的厚度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:11:48.663

这绝对是可行的，但你必须做一些研究:-)。

从这里开始：http: [//developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)

但是您也可以通过仅使用您在链接中发布的视频来实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:16:53.080

某些上下文会很有用，例如这会是加载屏幕吗？视频里的东西？ETC？

例如，如果您正在尝试制作网站风格的布局并且让卡片始终在顶部旋转，我建议您不要在任何移动设备上这样做，因为它会浪费性能。

相反，如果您将其用作加载屏幕，那么我再次建议您反对它，因为您将花费大量时间初始化 open gl 并加载卡的纹理和网格以及您需要的任何照明，然后启动动画师并进行旋转等。

如前所述，OpenGL 将是这样做的一种方式；然而，这不是简单的几行代码。对于不熟悉 OpenGL 和 3D 建模的人来说，在短时间内完成这将是一项艰巨的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:30:25.800

问题：你需要一个原生的Android应用程序，还是可以使用Flash Player？[您可以在http://wonderfl.net](http://wonderfl.net)上找到大量交互式 3D 几何演示- 我将一个有平面的示例分叉，将其切换为立方体，您可以下载结果 -

[Wonderfl 上的 3d 盒子](http://wonderfl.net/c/zzVu "来自：PV3d 平面鼠标示例")

不是 OpenGL——我发现的例子是 Papervision3D（它已经过时了几年）——但软件渲染对于 12 个三角形来说很好。当然，如果你想让它看起来像一张信用卡，你必须将你的卡面作为纹理图像导入。

# c - libpng -- 错误：不是 PNG 文件 -- png_process_data()

> ID：10437798
> 
> 赞同：2
> 
> 时间：2012-05-03T19:06:44.177
> 
> 标签：c, libpng

我正在尝试使用 libpng 编写一个渐进式阅读器。我试图按照 libpng 源提供的 example.c 中的代码进行操作，但它不起作用。我也看过[libpng doc](http://www.libpng.org/pub/png/book/chapter14.html)。它指示您`png_set_progressive_read_fn()`与`png_process_data()`. 在按照文档中指定的内容进行设置之后。当我开始读取 png 文件的过程时，我从 libpng 收到以下错误。

> 不是PNG文件

单步执行代码会发现，当`png_process_data()`检查 PNG 文件的签名时，会发现它不是 png 文件。这是非常特殊的行为，因为在调用我的读取函数之前，我验证该文件是一个带有以下代码的 PNG 文件。

```
int check_png_sig(const char * file_name)
{
  FILE *fp = fopen(file_name, "rb");
  if(!fp) {
    return (0);
  }
  enum HeaderSize {Size = 8}; 
  png_byte header[Size];
  fread(header, 1, Size, fp);
  int is_png = !png_sig_cmp(header, 0, Size);
  if (!is_png) {
    fclose(fp);
    return (0);
  }
  fclose(fp);
  return (1);
} 
```

我关闭`FILE*`然后在我的读取函数中重新打开一个新的，所以我不必告诉 libpng 我已经用`png_set_sig_bytes(png_ptr, 8);`. 我的读取功能如下。

```
int read_png_file(const char * file_name)
{
  fprintf(stdout, "Reading PNG File %s\n", file_name);
  fflush(stdout);

  if (!png_ptr || !info_ptr) {
    return (0);
  }

  FILE *fp = fopen(file_name, "rb");
  if(!fp) {
    return (0);
  }

  png_init_io(png_ptr, fp);
  png_voidp user_chunkp = png_get_user_chunk_ptr(png_ptr);

  /*
   * Tell libpng to call read_chunk_callback if an unknown chunk is
   * encountered
   */
  png_set_read_user_chunk_fn(png_ptr, user_chunkp, read_chunk_callback);

  /*
   * Tell libpng to call read_row_callback if an known chunk is
   * encountered.
   */
  png_set_read_status_fn(png_ptr, read_row_callback);

  /*
   * Tell libpng to call the specified functions on info, rows, or
   * end.
   */
  png_set_progressive_read_fn(png_ptr, user_chunkp, info_callback,
    row_callback, end_callback);

  enum Size {DataSize = 8};
  unsigned char rawbuf[DataSize];
  int process = 1;
  if (setjmp(png_jmpbuf(png_ptr))) {
    free_png_resources();
    process = 0;
    return process;
  }

  /*
   * Check to see if libpng is confused
   */
  //png_set_sig_bytes(png_ptr, 8);

  while (process) {
    memset(rawbuf, 0, DataSize);
    png_process_data(png_ptr, info_ptr, rawbuf, DataSize);
  }

  fclose(fp);
  return (process);
} 
```

[我在（非渐进式阅读器](http://matthewh.me/graphics/browser/pngreader)）也有一个非渐进式阅读器的工作版本。它适用于我的文件。所以这不是我的文件的问题。

* * *

**完整代码**

```
#include <png.h>
#include <stdlib.h>

static png_structp png_ptr;
static png_infop info_ptr;
static png_bytep old_row = NULL;

/* Variable that loops untill data is read */
int run = 0;

//-------------------------------------------------------------------
// Callbacks
int read_chunk_callback(png_structp png_ptr, png_unknown_chunkp chunk)
{
  struct chunk
  {
    png_byte name[5];
    png_byte *data;
    png_size_t size;
  };

  return (0); /* did not recognize */
}

/*
 * This method will be called each time a row is read
 * and differs from the row_callback in that ...
 */
void read_row_callback(png_structp ptr, png_uint_32 row, int pass)
{
  fprintf(stderr, "read_row_callback\n");
}

int process_data(png_bytep buffer, png_uint_32 length)
{
  fprintf(stderr, "process_data\n");
  png_process_data(png_ptr, info_ptr, buffer, length);
  return 0;
}

void info_callback(png_structp png_ptr, png_infop info)
{
  fprintf(stderr, "info_callback\n");
  png_uint_32 width;
  png_uint_32 height;
  int         bit_depth;
  int         color_type;
  int         interlace_type;
  int         compression_type;
  int         filter_type;
  png_byte    channels;
  png_uint_32 rowbytes;
  png_bytep   signature;

  /*
   * This will get the information stored in the header
   * of the PNG file.
   */
  png_get_IHDR(png_ptr, info_ptr, &width, &height, &bit_depth, &color_type,
    &interlace_type, &compression_type, &filter_type);

  /*
   * Get the rest of the header information.
   */
  channels = png_get_channels(png_ptr, info_ptr);
  /* This is subject to change with transformations */
  rowbytes = png_get_rowbytes(png_ptr, info_ptr);
  signature = png_get_signature(png_ptr, info_ptr);

  fprintf(stdout,
    "width: %u"
    "height: %u"
    "bit_depth: %d"
    "color_type: %d"
    "interlace_type: %d"
    "compression_type: %d"
    "filter_type: %d"
    "channles: %d"
    "rowbytes: %u"
    "signature: %s", (unsigned int)width, (unsigned int)height, bit_depth, color_type,
    interlace_type, compression_type, filter_type, channels,
    (unsigned int)rowbytes, signature);
}

void row_callback(png_structp png_ptr, png_bytep new_row, png_uint_32 row_num,
  int pass)
{
  fprintf(stderr, "row_callback\n");
  png_progressive_combine_row(png_ptr, old_row, new_row);
}

void end_callback(png_structp png_ptr, png_infop info)
{
  fprintf(stderr, "end_callback\n");
  run = 1;
}

/*
 * Error handler local to his translation unit
 * Used by png_create_read_struct function.
 */
void progressive_reader_error_fn(png_structp png_ptr, png_const_charp msg)
{
  fprintf(stderr, "error: %s\n", msg);
  fflush(stderr);
  longjmp(png_jmpbuf(png_ptr), 1);
  exit(0);
}

//-------------------------------------------------------------------

/*
 * Free PNG resources on close
 */
void free_png_resources() 
{
  png_destroy_read_struct(&png_ptr, &info_ptr, NULL);
  png_ptr = NULL;
  info_ptr = NULL;

}

/*
 * All strings to this function must
 * be null terminated -- return 0 if
 * file is not in png format
 */
int check_png_sig(const char * file_name)
{
  FILE *fp = fopen(file_name, "rb");
  if(!fp) {
    return (0);
  }
  enum HeaderSize {Size = 8};
  png_byte header[Size];
  fread(header, 1, Size, fp);
  int is_png = !png_sig_cmp(header, 0, Size);
  if (!is_png) {
    fclose(fp);
    return (0);
  }
  fclose(fp);
  return (1);
}

/*
 * Create the png_structp and png_infop
 */
int create_png_structs()
{
  png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL,
    progressive_reader_error_fn, NULL);
  if (!png_ptr) {
    return 0;
  }

  info_ptr = png_create_info_struct(png_ptr);
  if (!info_ptr) {
    png_destroy_read_struct(&png_ptr, NULL, NULL);
    return 0;
  }

  if (setjmp(png_jmpbuf(png_ptr))) {
    png_destroy_read_struct(&png_ptr, &info_ptr, NULL);
    return 0;
  }

  return 1;
}

/*
 * This method does all the work
 */
int read_png_file(const char * file_name)
{
  fprintf(stdout, "Reading PNG File %s\n", file_name);
  fflush(stdout);

  if (!png_ptr || !info_ptr) {
    return (0);
  }

  FILE *fp = fopen(file_name, "rb");
  if(!fp) {
    return (0);
  }

  png_init_io(png_ptr, fp);
  png_voidp user_chunkp = png_get_user_chunk_ptr(png_ptr);

  /*
   * Tell libpng to call read_chunk_callback if an unknown chunk is
   * encountered
   */
  png_set_read_user_chunk_fn(png_ptr, user_chunkp, read_chunk_callback);

  /*
   * Tell libpng to call read_row_callback if an known chunk is
   * encountered.
   */
  png_set_read_status_fn(png_ptr, read_row_callback);

  /*
   * Tell libpng to call the specified functions on info, rows, or
   * end.
   */
  png_set_progressive_read_fn(png_ptr, user_chunkp, info_callback,
    row_callback, end_callback);

  enum Size {DataSize = 8};
  unsigned char rawbuf[DataSize];
  int process = 1;
  if (setjmp(png_jmpbuf(png_ptr))) {
    free_png_resources();
    process = 0;
    return process;
  }

  /*
   * Check to see if libpng is confused
   */
  //png_set_sig_bytes(png_ptr, 8);

  while (process) {
    memset(rawbuf, 0, DataSize);
    png_process_data(png_ptr, info_ptr, rawbuf, DataSize);
  }

  fclose(fp);
  return (process);
}

int main(int argc, char *argv[])
{
  if (check_png_sig("/home/matt6809/Downloads/png_image.png")) {
    if (create_png_structs()) {
      if (read_png_file("/home/matt6809/Downloads/png_image.png")) {
        fprintf(stderr, "SUCCESS!!!\n");
      }   
    }
  } 
  return 0;
} 
```

* * *

**生成文件**

```
CC = /usr/bin/gcc
LD = /usr/bin/gcc
CFLAGS = -c -Wall -g
LDFLAGS = -lpng

SRC = $(wildcard *.c)
OBJ = $(SRC:%.c=%.o)

TARGET = progressive

all : $(TARGET)

$(TARGET) : $(OBJ)
        $(LD) $(LDFLAGS) $^ -o $(TARGET)

%.o : %.c
        $(CC) $(CFLAGS) -o $@ $<

clean :
        rm -rf *.o $(TARGET) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T23:10:42.780

您忘记从文件中读取内容。

更换：

```
while (process) {
  memset(rawbuf, 0, DataSize);
  png_process_data(png_ptr, info_ptr, rawbuf, DataSize);
} 
```

和

```
size_t read;
while ((read = fread(rawbuf, 1, DataSize, fp))) {
  png_process_data(png_ptr, info_ptr, rawbuf, read);
} 
```

足以让解码继续进行。

我确实注意到另一件事：传递给`png_set_read_user_chunk_fn()`和的第二个参数`png_set_progressive_read_fn()`应该是回调函数以后可以获取的任意值（分别通过`png_get_user_chunk_ptr()`和`png_get_progressive_ptr()`）。

这些可以设置为您喜欢的任何值（如果您不需要它们，也可以设置为 NULL），但您不应该`png_get_*_ptr()`自己调用函数来获取传递给`png_set_*_fn()`. （我认为它是无害的，因为它们会返回 NULL 开始，但它充其量是令人困惑的。）

# python - ScraperWiki/Python：当属性为假时过滤掉记录

> ID：10437805
> 
> 赞同：0
> 
> 时间：2012-05-03T19:07:30.373
> 
> 标签：python, twitter, scraperwiki

我在 ScraperWiki 上使用以下代码在 Twitter 上搜索特定的主题标签。
它工作得很好，并且正在挑选推文中提供的任何邮政编码（如果没有可用的，则返回*false ）。*这是通过 line 实现的`data['location'] = scraperwiki.geo.extract_gb_postcode(result['text'])`。
但我**只**对包含邮政编码信息的推文感兴趣（这是因为它们将在稍后阶段被添加到谷歌地图中）。
最简单的方法是什么？我对 PHP 比较熟悉，但 Python 对我来说是一个全新的领域。在此先感谢您的帮助。
最好的祝愿，
马丁

```
import scraperwiki
import simplejson
import urllib2

QUERY = 'enter_hashtag_here'
RESULTS_PER_PAGE = '100'
NUM_PAGES = 10

for page in range(1, NUM_PAGES+1):
    base_url = 'http://search.twitter.com/search.json?q=%s&rpp=%s&page=%s' \
         % (urllib2.quote(QUERY), RESULTS_PER_PAGE, page)
    try:
        results_json = simplejson.loads(scraperwiki.scrape(base_url))
        for result in results_json['results']:
            #print result
            data = {}
            data['id'] = result['id']
            data['text'] = result['text']
            data['location'] = scraperwiki.geo.extract_gb_postcode(result['text'])
            data['from_user'] = result['from_user']
            data['created_at'] = result['created_at']
            print data['from_user'], data['text']
            scraperwiki.sqlite.save(["id"], data)
    except:
        print 'Oh dear, failed to scrape %s' % base_url
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:16:36.130

你只是想要这个吗？我在免费的 ScraperWiki 测试页面上进行了尝试，似乎可以满足您的要求。如果您正在寻找更复杂的东西，请告诉我。

```
import scraperwiki
import simplejson
import urllib2

QUERY = 'meetup'
RESULTS_PER_PAGE = '100'
NUM_PAGES = 10

for page in range(1, NUM_PAGES+1):
    base_url = 'http://search.twitter.com/search.json?q=%s&rpp=%s&page=%s' \
         % (urllib2.quote(QUERY), RESULTS_PER_PAGE, page)
    try:
        results_json = simplejson.loads(scraperwiki.scrape(base_url))
        for result in results_json['results']:
            #print result
            data = {}
            data['id'] = result['id']
            data['text'] = result['text']
            data['location'] = scraperwiki.geo.extract_gb_postcode(result['text'])
            data['from_user'] = result['from_user']
            data['created_at'] = result['created_at']
            if data['location']:
                print data['location'], data['from_user']
                scraperwiki.sqlite.save(["id"], data)
    except:
        print 'Oh dear, failed to scrape %s' % base_url
        break 
```

输出：

```
P93JX VSDC
FV36RL Bootstrappers
Ci76fP Eli_Regalado
UN56fn JasonPalmer1971
iQ3H6zR GNOTP
Qr04eB fcnewtech
sE79dW melindaveee
ud08GT MariaPanlilio
c9B8EE akibantech
ay26th Thepinkleash 
```

我已经对其进行了一些改进，因此它比用于提取 gb 邮政编码的 scraperwiki 检查更容易选择，这会导致相当多的误报。基本上我从[这里](https://stackoverflow.com/questions/164979/uk-postcode-regex-comprehensive)得到了接受的答案，并添加了一些负面的后视/前瞻来过滤掉更多。看起来刮板 wiki 检查没有负面的后向/前瞻的正则表达式。希望有点帮助。

```
import scraperwiki
import simplejson
import urllib2
import re

QUERY = 'sw4'
RESULTS_PER_PAGE = '100'
NUM_PAGES = 10

postcode_match = re.compile('(?<![0-9A-Z])([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {0,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)(?![0-9A-Z])', re.I)

for page in range(1, NUM_PAGES+1):
    base_url = 'http://search.twitter.com/search.json?q=%s&rpp=%s&page=%s' \
         % (urllib2.quote(QUERY), RESULTS_PER_PAGE, page)
    try:
        results_json = simplejson.loads(scraperwiki.scrape(base_url))
        for result in results_json['results']:
            #print result
            data = {}
            data['id'] = result['id']
            data['text'] = result['text']
            data['location'] = scraperwiki.geo.extract_gb_postcode(result['text'])
            data['from_user'] = result['from_user']
            data['created_at'] = result['created_at']
            if data['location'] and postcode_match.search(data['text']):
                print data['location'], data['text']
                scraperwiki.sqlite.save(["id"], data)
    except:
        print 'Oh dear, failed to scrape %s' % base_url
        break 
```

# ruby-on-rails-3 - 使用 rails 为电子邮件生成一个真实的 url

> ID：10437811
> 
> 赞同：1
> 
> 时间：2012-05-03T19:07:55.103
> 
> 标签：ruby-on-rails-3, email, url, dynamic, hyperlink

我们想发送一封自动生成的电子邮件，其中包含配置文件的完整路径。我们如何做到这一点

```
<%=link_to('Link', :controller => 'mycontroller', :action => 'show', :id => @mycontroller.id )%> 
```

link_to 命令仅像这样在邮件中构建链接

```
mycontroller/show/id 
```

我们需要一个像这样的结构的链接

```
http://www.server.tld/mycontroller/show/id 
```

大家可以帮帮我们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:14:30.970

你可以通过 :only_path => false

```
<%= link_to('Link', :controller => 'mycontroller', :action => 'show', :id => @mycontroller.id, :only_path => false ) %> 
```

# c++ - C++ 随机生成数

> ID：10437815
> 
> 赞同：-4
> 
> 时间：2012-05-03T19:08:28.907
> 
> 标签：c++, random, multidimensional-array

我正忙于玩游戏，需要在数组上的随机位置将一个数字放入二维数组中。我怎样才能做到这一点？

我有

```
for(int i = 0; i < rows; i++)
{
   for(int j = 0; j < cols; j++)
   {
      array[1 + rand() % row][1 + rand() % col] == 5;
   }
} 
```

我的程序在运行时崩溃。问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:22:51.407

正如评论中所说，数组是从零开始的，因此您生成了 range 中的数字`[0,n-1]`。

此外，您是在比较而不是分配（注意`==`）

此外，使用更现代的随机生成器，它们不仅在产生正确分布的意义上更好，而且更易于使用（不再需要算术摆弄）。例如，使用[C++11 的 random](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)，您将拥有以下内容（这也可以通过c++03 之前的[boost来实现）：](http://www.boost.org/libs/random/)

```
std::mt19937 gen(std::random_device{}());
std::uniform_int_distribution<> disRows(0, rows-1);
std::uniform_int_distribution<> disCOls(0, cols-1);
for(int i = 0; i < rows; i++)
{
   for(int j = 0; j < cols; j++)
   {
      array[disRows(gen)][disCols(gen)] = 5;
   }
} 
```

此外，双循环在这里没有多大意义，如果你想随机分配 5 'N' 次，只需循环 from `0`to `N`(`N`可能是`rows*cols`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:13:09.687

`array[1 + rand() % row][1 + rand() % col]`

不正确，因为第一个元素位于位置 0，而不是 1。

尝试`array[rand() % row][ rand() % col]`

编辑： 从到`rand() % n`返回数字。在您的情况下，添加 1 可以尝试访问位置or的元素，这些元素不是有效的索引。即使你写了`0``n-1``row``col`

`array[1 + rand() % (row-1)][1 + rand() % (col-1)]`

它不是真正随机的，因为第一行和第一列都不会被触及。

# .net - 无法绑定到自己的依赖属性

> ID：10437817
> 
> 赞同：0
> 
> 时间：2012-05-03T19:08:50.653
> 
> 标签：.net, silverlight, binding, silverlight-4.0, dependency-properties

我有一个下载器，它有一个进度属性，即：

```
 public static readonly DependencyProperty ProgressProperty = DependencyProperty.Register("Progress", typeof(int), typeof(Downloader), new PropertyMetadata(0, new PropertyChangedCallback(OnProgressChange)));

    public int Progress
    {
        get { return (int)this.GetValue(ProgressProperty); }
        private set { this.SetValue(ProgressProperty, value); }
    }

    private static void OnProgressChange(DependencyObject @object, DependencyPropertyChangedEventArgs e)
    {
        Downloader d = @object as Downloader;
        if (d.PropertyChanged != null) d.PropertyChanged(d, new PropertyChangedEventArgs("Progress"));
    } 
```

当我尝试在其他类 xaml 中使用它时（m_downloader 是 Downloader 类型的私有字段）：

```
<sdk:Label Height="24" HorizontalAlignment="Left" Margin="360,12,0,0" Name="ProgressLabel" VerticalAlignment="Top" Width="38" Content="{Binding Path=m_downloader.Progress, StringFormat='\{0\} %'}" /> 
```

什么都没发生。在调试期间，我可以看到 d.PropertyChanged 始终为空。如何在标签中显示进度？

**编辑1：**

m_downloader 像这样工作（临时更改属性后）：

```
public partial class AudioPlayer : UserControl
{
    public AudioPlayer()
    {
        m_downloader = new Downloader();
        InitializeComponent();
    }
    ...
    public Downloader m_downloader {get; private set;}
} 
```

**编辑2：**

我已经在 Blend 中完成了绑定，它将 xaml 更改为：

```
<UserControl x:Name="audioPlayer" x:Class="Media.Controls.AudioPlayer"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="125" d:DesignWidth="410" xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk">

<Grid x:Name="LayoutRoot" Background="White">
    ...
    <sdk:Label Height="24" HorizontalAlignment="Left" Margin="337,12,0,0" Name="ProgressLabel" VerticalAlignment="Top" Width="61" Content="{Binding m_downloader.Progress, ElementName=audioPlayer, Mode=OneWay}" />
    ...
</Grid>
</UserControl> 
```

为什么 ElementName 设置为**嵌套**的名称，而不是嵌套的名称？这对我来说没有意义......但在这个改变之后它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:15:19.230

由于您在进行解释，因此绑定机制的工作方式如下：

1.  绑定机制取决于两件事：Binding 上的 Path 和 Source

2.  在您的情况下，路径是“m_Downloader.Progress”，如果未明确设置源，则绑定回退到使用标签上的 DataContext

3.  如果标签上没有设置 DataContext，它会在可视树上搜索 DataContext。

4.  您可以使用 {Binding Source=...} 或 {Binding ElementName=...} 显式设置源

例如，以下将不起作用：

```
<sdk:Label 
   x:Name="ProgressLabel"
   Content="{Binding Path=Progress}" /> 
```

这是因为没有源，也没有设置 DataContext。

您可以使用以下代码在代码中设置它：

```
ProgressLabel.DataContext = m_Downloader 
```

或者，您可能希望相对于嵌套对象进行绑定。

```
<sdk:Label
   Content="{Binding m_Downloader.Progress}" /> 
```

但是，这将不起作用

1.  m_Downloader 不公开，并且

2.  m_Downloader 甚至不是属性

3.  未设置 DataContext。

要解决此问题，请使用以下命令：

公共下载器 下载器 {get; 设置;|

public void InitializeComponent() { // ...

```
 // set DataContext to nesting object
 ProgressLabel.DataContext = this; 
```

}

如果不想在代码中设置 DataContext，可以显式设置源。由于 AudioPlayer 有一个元素名称

```
<UserControl x:Name="AudioPlayer" ... /> 
```

您可以在绑定中引用它

```
<sdk:Label
   Content="{Binding m_Downloader.Progress, ElementName=AudioPlayer}" /> 
```

最后，您还可以通过将 AudioPlayer 上的 DataContext 设置为自身来完成此操作。

```
<UserControl
   DataContext="{Binding RelativeSource={RelativeSource Self}}" />

<sdk:Label
   Content="{Binding m_Downloader.Progress}" /> 
```

# ajax - 如何从第三方网站加载内容，从哪里加载？

> ID：10437821
> 
> 赞同：0
> 
> 时间：2012-05-03T19:09:13.193
> 
> 标签：ajax, auto-update

我正在开发一个工地。我喜欢从任何地方（如博客、其他网站、RSS 等）加载职业建议，如果来源发生变化，它应该会自动更新。

我怎样才能做到这一点，我可以从哪里获得所需的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:13:25.787

每隔一段时间执行一次ajax请求，如果有变化，则更新页面内容

带有 jquery 的 Ajax：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - 新 QSB/搜索管理器内容提供商的自动/程序化选择

> ID：10437826
> 
> 赞同：0
> 
> 时间：2012-05-03T19:09:31.947
> 
> 标签：android, android-qsb

我编写了一个新的 Content Provider 来为 Search Manager 提供一个新的 Searchable Item 类。

据我所知，用户必须选择加入，以便我的新可搜索项目类包含在他们的全局搜索中。

安装我的应用程序时，有没有办法自动选择加入？或者以编程方式执行此操作，以便我可以提供一个对话框，用户可以轻松地通过我的应用程序选择加入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:20:06.397

> 安装我的应用程序时，有没有办法自动选择加入？

不。

> 或者以编程方式执行此操作，以便我可以提供一个对话框，用户可以轻松地通过我的应用程序选择加入？

不可以。但是，您可以尝试调用[`ACTION_SEARCH_SETTINGS`](http://developer.android.com/reference/android/provider/Settings.html#ACTION_SEARCH_SETTINGS)以启动“设置”应用程序的搜索页面，用户可以在其中选中复选框。

# xcode - 如何关闭为现有项目自动创建本地存储库？

> ID：10437839
> 
> 赞同：1
> 
> 时间：2012-05-03T19:10:50.243
> 
> 标签：xcode

我有一个现有的 Xcode (4.3) 项目，它将始终自动创建一个本地 git 存储库（如果我通过 Organizer 删除存储库，然后关闭并重新打开它已重新创建的项目）。我怎样才能禁用它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:16:26.167

如果我没记错，您必须重新创建项目，但这次不要选择使用本地 git 存储库创建选项。

# c++ - 限制整数模板参数

> ID：10437843
> 
> 赞同：3
> 
> 时间：2012-05-03T19:11:14.787
> 
> 标签：c++, templates, int, restrictions

我有这样的代码：

```
template<int N, typename T>
class XYZ {
public:
  enum { value = N };
  //...
} 
```

有没有办法以某种方式限制 N？具体来说，我只想在 N 除以某个数字（比如 6）时才允许编译。所以它不仅仅是类型限制。首选方法是在没有 Boost 的情况下执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T19:15:48.610

一种 C++03 方法：

```
template<int X, int Y>
struct is_evenly_divisible
{
    static bool const value = !(X % Y);
};

template<int N, typename T, bool EnableB = is_evenly_divisible<N, 6>::value>
struct XYZ
{
    enum { value = N };
};

template<int N, typename T>
struct XYZ<N, T, false>; // undefined, causes linker error 
```

对于 C++11，您可以避免一些样板文件并提供更好的错误消息：

```
template<int N, typename T>
struct XYZ
{
    static_assert(!(N % 6), "N must be evenly divisible by 6");
    enum { value = N };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-07T16:08:18.263

我把它留在这里以备将来使用，因为在发布时我无法在网上找到一个很好的例子。

带有概念的 C++20 方式：

```
template<int X, int Y>
concept is_evenly_divisible = X % Y == 0;

template <int N, int M> requires is_evenly_divisible<N, M>
struct XYZ
{
    enum class something { value = N };
};

XYZ<12, 6> thing; // OK
//XYZ<11, 6> thing; // Error 
```

甚至更短：

```
template <int N, int M> requires (N % M == 0)
struct XYZ
{
    enum class something { value = N };
}; 
```

# ruby-on-rails-3 - Rails 3 - 传递参数以显示动作

> ID：10437848
> 
> 赞同：0
> 
> 时间：2012-05-03T19:11:31.650
> 
> 标签：ruby-on-rails-3

我有一个模型，它的控制器`College`中有一个`show`动作。所以我可以访问 /colleges/1 并且该视图将显示有关 id 为 1 的大学的信息。在该视图中，我有一些标签“学生”、“比赛”等。我的意图是当用户点击“学生”时，该视图显示了该学院的学生。当用户点击“竞赛”时，视图会显示该学院安排的竞赛。

支持这一点的最佳方法是什么？
1\. 自定义操作，例如 /colleges/1/showstudents 和 /colleges/1/showcontests ？
2\. 显示带有参数的动作，例如 /colleges/1/show?type=students, ?type=contests ?

我在想＃2，在视图中我可以做，`<% if params[:type] <=> "contests" .. %>` 但是如何在“比赛”选项卡中放置一个链接？

好像不太对。

那么这种情况的最佳实践是什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:16:29.270

所以我认为你应该有一个college_controller.rb，然后在那里只有一个学生方法，它将评估一个大学参数并显示该大学的学生，即。

```
def students
  college = College.find(params[:college_id])
  @students = college.students
end 
```

# git - 破坏性的 Git 提交？

> ID：10437855
> 
> 赞同：3
> 
> 时间：2012-05-03T19:12:07.723
> 
> 标签：git

我开始学习 Git，到目前为止，它很棒。我只是在一个领域感到困惑，这可能只是一个误解。

假设 John 在“john”目录中工作，而 Bob 在“bob”目录中工作。

如果 John 的代码不是我们想要的“john”目录的最后一项，并且 Bob 从 dev 分支中提取，Bob 将得到 John 的所有“坏”代码，对吗？

因此，Bob 对“bob”目录应用了一个简单的修复并推送到生产分支。John 在“john”目录下的坏代码不是通过 Bob 的 push 潜入生产分支吗？

这甚至会发生吗？这是如何避免的？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:16:47.360

推送 dev -> production 和直接向生产分支提交修复是有区别的。后者对鲍勃来说是安全的。

知道代码是否安全的唯一方法是在推送之前对其进行测试。这可能是 QA 团队、回归/单元测试等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:15:38.760

您通常不会将“损坏的代码”提交到`develop`, 或`master`（这是常用名称）。该`develop`分支通常用于“应该工作”的代码，`master`用于“稳定代码”（类似于`trunk`svn）。如果要创建新内容，请为其创建一个新分支，例如`feature/myFeature`. 现在每个人都知道，这段代码可能不完整，也可能不完整，通常会避免将其合并到自己的分支中。完成后（“它应该可以工作”），将其合并回`develop`.

但是，即使您的情况发生了，git 也会识别出这个坏代码已经是 的一部分`develop`，并且不会再次应用它。

# excel - 使用 VBA 在 Excel 中搜索单元格

> ID：10437858
> 
> 赞同：1
> 
> 时间：2012-05-03T19:12:30.687
> 
> 标签：excel, vba

问题：我想在单元格内容旁边或下方找到一个单元格的值，作为工作簿的文本值。

示例：在 Sheet2 中，我有两个随机放置的单元格（假设它的索引未知且总计不是定义的名称）

![在此处输入图像描述](../Images/0f8fb8341927bde3e0a3766826f190e8.png)

我想在总数旁边搜索值“200”并将其放入工作表 2（活动单元格）中。如果有多个单元格包含“总计”一词，请列出所有单元格，如果可能，请输入包含我要查找的单元格的工作表名称。价值 200 表 2

![在此处输入图像描述](../Images/1b77b10fb3bce452624d3ef35afe5ed9.png)

我的方法： 1\. 用户输入

![在此处输入图像描述](../Images/6c840f2f933781d253d6e794852012d6.png)

2.  转到每个单元格并搜索它。如果在 excel 中搜索整个单元格的限制，这将需要一些时间。所以搜索仅限于 100 列 x 10000 行。

3.  找到它的索引后，偏移到 1 列得到值

4.  写出结果 ActiveCell.Value = Search_Value。然后继续搜索其余的工作表。偏移 1 列和 1 行以写入第二个值...

搜索是一个非常困难的概念，我真的不知道如何做搜索部分。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:33:58.197

```
With Worksheets(1).Range("a1:a500")
    counter=0
    Set c = .Find("Total", lookin:=xlValues)
    If Not c Is Nothing Then
        firstAddress = c.Address
        Do
            counter=counter+1
            Worksheets(2).range("A1").offset(counter,0)=c.offset(0,1)
            Set c = .FindNext(c)
        Loop While Not c Is Nothing And c.Address <> firstAddress
    End If
End With 
```

**firstaddress**保存找到的第一个单元格的位置（因此我们知道何时停止）；**firstaddress.offset(0,1)**将为您提供您尝试保存的值，因此设置**worksheet(2).range("a1").offset(counter,0)**将列出它在第二个选项卡上找到的所有值, 从 a1 到它在该范围内找到的任何数量

# android - WakeLocks 是否会阻止屏幕锁定（密码/PIN 锁定）？如果是这样，我可以解决这个问题吗？

> ID：10437862
> 
> 赞同：0
> 
> 时间：2012-05-03T19:12:42.477
> 
> 标签：android, security

我有一项服务可以在某些时候将显示器保持在昏暗的水平，它使用“昏暗”的 WakeLock 来实现这一点。它运作良好......除了屏幕从不锁定。也就是说，当保持昏暗的 WL 时，不会出现要求用户滑动和验证的锁定屏幕。

请注意，我正在开发的平台可能对低级 Android Java 框架代码进行了供应商更改，因此这可能不是标准的 Android 行为。而且，我可以访问框架代码，并且可以在必要时更改它。我只是无法弄清楚该策略在代码中的执行位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:08:19.440

> When the device is on external power, we want to keep the screen contents visible - but we still want it to lock.

The only way I can think of to do that is for you to maintain your own timer for when to trigger the lock, then to use `DevicePolicyManager` and `lockNow()` to lock the device at that point. This requires extra permissions and extra setup work (enabling your app as a device manager).

# c# - 如何修改要与自定义帐户关联的 Windows 服务的 vdproj

> ID：10437863
> 
> 赞同：1
> 
> 时间：2012-05-03T19:12:44.497
> 
> 标签：c#, .net, installation, windows-installer

我有一个普通的 vdproj 部署项目，用于安装我编写的服务。我希望安装程序为服务分配某个用户/通行证，而不是本地系统帐户。

我看过示例，但它们似乎涉及代码，而我的部署项目*没有*代码文件。只是 .vdproj 文件。

我怎样才能做到这一点？谢谢。

背景：该服务是一个 C#.NET 服务目标框架 4\. 安装程序只是 VS2010 中提供的库存安装程序/部署项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:30:40.330

如果您查看 Windows 服务的服务进程安装程序对象，您可以将帐户属性设置为用户。这样做将在安装过程中提示输入用户凭据。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.serviceprocess.serviceprocessinstaller.account.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceprocessinstaller.account.aspx)

如果要预先设置帐户值，可以将帐户类型设置为用户，然后设置用户名和密码属性。

由于 ServiceProcessInstaller 是安装服务的实际组件（不是 Visual Studio 部署项目），因此安装过程的界面就在那里。

# php - 用星号替换整个字符串

> ID：10437865
> 
> 赞同：6
> 
> 时间：2012-05-03T19:12:59.690
> 
> 标签：php, replace

我需要一个解决方案来用 PHP 中的星号替换整个字符串，例如有如下字符串：

> 测试
> 
> 测试123
> 
> 测试1234

并且取决于字符串长度，它将用星号替换字符串，例如：

`test`长度为 4 个字符，因此将替换为 4 个星`****`。

`test123`长度为 7 个字符，因此将替换为 7 个星`*******`。等等...

有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T19:14:34.963

```
$string = str_repeat('*', strlen($string)); 
```

只需制作一个由所有星组成的新字符串，其长度等于原始字符串。

# ftp - Bash 脚本中需要 FTP 连接确认

> ID：10437867
> 
> 赞同：1
> 
> 时间：2012-05-03T19:13:03.863
> 
> 标签：ftp, ksh

我正在使用以下代码连接 ftp 节点。我只想知道如何检查我是否无法连接到 ftp 服务器或 ftp 服务器没有响应。在任何情况下，它都会提醒我 ftp 服务器正常或关闭。实际上我想嵌入普通的 bash 代码来检查连接性。

```
#!/bin/ksh  
ftp -nv <<EOF  
open xxx.xx.xx.xx  
user xxx xxxxxxxxx  
bye  
EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:38:30.270

grepping ftp 的输出怎么样？我不确定您的 ftp 版本在成功上传后会返回什么，但类似于：

```
#!/bin/ksh

(
ftp -nv <<EOF
open xxx.xx.xx.xx
user xxx xxxxxxxxx
bye
EOF
) | grep -i "success"
if [[ "$?" -eq "0" ]]
then
        echo "FTP SUCCESS"
else
        echo "FTP FAIL"
fi 
```

应该管用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:20:11.370

我之前遇到过同样的问题，通过检查 ftp 命令的输出解决了它。尽管如此，还是觉得它很奇怪，所以我决定使用 PERL。

```
#!/usr/bin/perl
use strict;
use warnings;
use Net::FTP;

# open connection
my $ftp = Net::FTP->new("127.0.0.1");
if (! $ftp) {
    print "connection failed!";
    exit 1;
}

# in case you would need to test login too
# if (! $ftp->login("username", "password")) {
#    print "login failed!";
#    exit 2;
#}

$ftp->close();
exit 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T10:15:11.390

使用此命令检查 ftp 服务器是否可用：

`sleep 1 | telnet ftp.example.com 21 2> /dev/null | grep -c 'FTP'`

它能做什么：

*   通过端口 21 建立与 ftp.example.com 的连接（将端口 22 用于 sftp）
*   等待一秒钟，然后终止连接
*   忽略“远程主机关闭的连接”-来自 telnet 的响应为“2> /dev/null”
*   如果来自寻址服务器的响应包含“FTP”，则返回“1”，否则返回“0”。

如果您要检查的 ftp 服务器的预期欢迎响应与标准响应不同，您可能需要调整 grep 模式“FTP”，标准响应通常如下所示：

```
 Trying 93.184.216.34...
   Connected to ftp.example.com.
   Escape character is '^]'.
   220 FTP Service 
```

# for-loop - 在 Lua 中用另一个 2DArray 填充 2dArrays

> ID：10437870
> 
> 赞同：0
> 
> 时间：2012-05-03T19:13:09.370
> 
> 标签：for-loop, lua, multidimensional-array

有没有办法在 Lua 中用另一个 2dArray 填充 2d 数组？我现在用的是这个

```
local T4 = {
    {0, 0, 0, 0, 0},
    {0, 0, 1, 0, 0},
    {0, 1, 1, 1, 0},
    {0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0}
};

function myFunc()
local Pieces = {}

        for x = 1, 5 do
        Pieces[x]={}
           for y = 1, 5 do
           Pieces[y][x] = T4[y][x]--the error is probably here
           end
        end
end 
```

但这不起作用，我有充分的理由这样做，因为这个过程会重复很多次，所以使用 T4 不是一个选项

我也没有收到错误，程序只是停在那里，所以知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T20:02:38.747

你的索引搞砸了：

```
function myFunc()
    local Pieces = {}
    for y = 1, 5 do
        Pieces[y]={}
        for x = 1, 5 do
            Pieces[y][x] = T4[y][x]
        end
    end
    return Pieces
end 
```

您可以使用以下内容复制任何表：

```
function copytable(t)
    local copy = {}
    for key,val in pairs(t) do
        if type(val) == 'table' then
            copy[key] = copytable(val)
        else
            copy[key] = val
        end
    end
    return copy
end 
```

这是我的头顶，所以与阳离子一起使用。它绝对不处理循环引用（包含对同一表的引用的表）。

# c# - 可以使用 Response.BinaryWrite 和 Server.Mappath 将文件下载到特定位置？

> ID：10437872
> 
> 赞同：2
> 
> 时间：2012-05-03T19:13:14.290
> 
> 标签：c#, asp.net

我有与数据库中的文件关联的 varbinary 数据。这是我在单击链接时用来下载此文件的代码 -

```
//a is my attachment object
var r = context.Response;
r.AddHeader("Content-Disposition", "attachment; filename=" + a.FileName);
r.Charset = "";
r.ContentType = a.MIME;   
r.BinaryWrite(a.Content.ToArray()); 
```

目前，此文件已下载到 Downloads 文件夹。有没有办法在用户系统中创建一个新文件夹并在那里下载这个文件？我读到**server.mappath**可以与 r.WriteFile 一起使用，但我不太确定。这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:15:04.643

不，这是不可能的。否则，人们可能会恶意地将各种文件写入特定的系统目录。一旦您将文件发送给用户，您现在就无法控制。

# database - oracle如何清空数据库

> ID：10437879
> 
> 赞同：5
> 
> 时间：2012-05-03T19:13:32.323
> 
> 标签：database, oracle

我们在 oracle 10g 中有一个旧数据库。我们想用新的 dmp 文件替换它（这就是我们所拥有的）。我可以简单地删除旧数据库，然后运行 ​​impdp 创建一个新数据库吗？我们不担心旧数据库中的数据。你能给我这样做的步骤吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:49:38.927

正如评论中所述，您可以使用 cascade 删除用户，然后导入用户。

如果您使用较旧的 exp 命令创建了导出，并且它只是一个用户/模式的导出，那么您可能必须在运行 imp 之前手动创建用户/模式。exp/imp 在这方面不如 expdp/impdp 聪明。

# c++ - 在 C++ 中添加多行注释时如何在 Visual Studio 2010 中启用自动星号？

> ID：10437885
> 
> 赞同：6
> 
> 时间：2012-05-03T19:14:07.830
> 
> 标签：c++, ide, styles, comments

我看到很多人抱怨 Visual Studio 自动在 C# 的多行注释中添加星号。**我的问题是**：如何为 C++*启用*此行为？

例子：

```
/**
 * I want
 * my comments
 * to look like this
 */

/**
But,
they look like this
*/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-16T15:30:46.963

我在 Visual Studio 2019 中注意到，如果将文本光标放在块注释中的第一个星号之后并按 Enter，它将自动在下一行放置一个星号。

> 步骤 1) 将文本光标放在由换行符分隔的块注释中第一个星号的右侧。

[![第1步](../Images/5495a4d524234472eae4cc7be7617b8c.png)](https://i.stack.imgur.com/5PrYL.png)

> 步骤 2) 按回车键，Visual Studio 2019 将自动在下一行放置一个星号。

[![第2步](../Images/1ebbb3d5fddb7fcdb7f99c2605ea6d86.png)](https://i.stack.imgur.com/QZrmm.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-02T21:40:35.587

此行为在新的 Visual Studio 安装中自动启用，但您可以通过转到“工具”->“选项”，然后在“文本编辑器”->“C/C++”->“代码”下设置是启用还是禁用它样式”[->“常规”]，然后根据自己的喜好旋转“在写评论时在新行的开头插入现有的评论样式”： [![选项面板](../Images/ed54e6d23bbe271ea03de9c36b366035.png)](https://i.stack.imgur.com/nKY60.png) 选项面板的强制性图像，因为没有人再阅读文本了。

（我自己禁用了这个功能，因为我觉得它很烦人——当我注释掉代码时，在我做小的改动时添加随机星号显然是有害的。）

# ruby - 最佳实践：在 Ruby 中进行文本搜索，还是让 MongoDB 完成这项工作？

> ID：10437886
> 
> 赞同：2
> 
> 时间：2012-05-03T19:14:08.390
> 
> 标签：ruby, mongodb

我有一个关键字数组，可以有可变长度。对于这个例子，假设有 50 个：

```
keywords = ['dog','cat','monkey'...'bird'] 
```

我有一个句子数组（同样是可变长度），我想循环遍历，搜索每个关键字。

```
sentences = [ ['My dog ate cat food'], ['I went to the store.'], ... ] 
```

如果句子包含任何关键字，那么我将把它移到一个新的“匹配”数组中。所以在 Ruby 中，我的代码看起来像这样：

```
sentences.each do |sentence|
  keywords.each do |keyword|
    if sentence.match(/\b#{keyword}\b/i)
      matched << sentence
    end
  end
end 
```

这需要相当长的时间，而且似乎效率很低——特别是如果我有一个大的关键字列表和一个大的句子列表。我是第一个承认我的 Ruby 开发还不是很好的人——有没有更简单、更有效的方法来做到这一点？

我正在使用 MongoDB 来存储关键字和句子。如果有更好的方法使用数据库，我很想探索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:32:07.353

我以前没有使用过 MonogDB，但你可以稍微优化一下你的 ruby​​ 代码。由于您只关心句子中是否有*任何*关键字匹配，因此我会将逻辑推入 Ruby 正则表达式引擎：

```
regexp = keywords.map { |keyword| Regexp.quote(keyword) }.join('|')

matched = sentences.select do |sentence|
  sentence[0].match(/\\b(?:#{regexp})\\b/i)
end 
```

这样做是制作一个结合了所有关键字的正则表达式。这样你只循环句子而不是每个关键字。

# ios - ZXing Xcode 4.2 iOS 编译错误

> ID：10437887
> 
> 赞同：0
> 
> 时间：2012-05-03T19:14:10.653
> 
> 标签：ios, xcode, compiler-errors, zxing

我正在尝试将 ZxingWidget 包含到我的项目中。我将 ZXingWidget.xcodeproj 复制到我的项目中，将 ZXingWidget 添加到“Target Dependencies”中，并将 libZXingWidget.a 添加到“Link Binary With Libraries”中，然后开始编译，但苹果 LLVM compiler3.0 错误很少。

我尝试了一个新项目并按照步骤操作，它可以正常工作。我不确定我当前项目的设置是否有任何问题。任何想法？ ![在此处输入图像描述](../Images/e6b25c7b99fd930944c69611569749f4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T01:57:07.773

您应该尽量不要将 ZXingWidget.xcodeproj 复制到您的项目中。

*   将 ZXingWidget.xcodeproj 拖放到 Xcode 项目的“组和文件”侧边栏的根目录下。
*   确保未选中“复制项目”并且“参考类型”为“相对于项目”。

链接 ZXingWidget 库并添加依赖后，您还应该在项目设置中添加标题搜索路径：

1.  选择项目目标的构建设置
2.  将项目目录中的相对路径添加到该 `zxing/iphone/ZXingWidget/Classes`目录。记得启用“递归路径”。
3.  将 zxing cpp headers 添加到 headers 搜索路径，添加 的相对目录路径`cpp/core/src/`，并记住不要启用“递归路径”。

在项目目标中导入“Link Libraries with Binary”框架：

*   AV基金会
*   音频工具箱
*   核心视频
*   核心媒体
*   libiconv
*   地址簿
*   地址簿UI

然后导入`<ZXingWidgetController.h>`并`<QRCodeReader.h>`在您的目标视图控制器中，记住将后缀“.m”编辑为“.mm”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:24:16.413

尝试突出显示第一个错误并右键单击“显示日志”（或类似的东西）。它应该打开完整/长错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:29:28.270

问题解决了，thnx @bradley 问题是你必须检查你的路径......

**这是我的例子：**

我当前的项目路径：

> ~/Dropbox/Tesis 项目/Celedex

我当前的图书馆 ZXing：

> ~/Dropbox/Tesis 项目/ZXingWidget

**所以标题搜索路径如下所示：**

> ../ZXingWidget/Classes（递归）
> 
> ../../cpp/core/src（非递归）

祝你好运，并致以最良好的祝愿。

# java - 处理 ExecutionException 的最佳方法是什么？

> ID：10437890
> 
> 赞同：48
> 
> 时间：2012-05-03T19:14:25.417
> 
> 标签：java, executorservice, future, executionexception

我有一种方法可以在超时的情况下执行某些任务。我使用 ExecutorServer.submit() 来获取 Future 对象，然后我调用 future.get() 并超时。这工作正常，但我的问题是处理我的任务可能引发的已检查异常的最佳方法。以下代码有效，并保留了已检查的异常，但如果方法签名中的已检查异常列表发生更改，它似乎非常笨拙并且容易中断。

对于如何解决这个问题，有任何的建议吗？我需要以 Java 5 为目标，但我也很想知道在较新版本的 Java 中是否有好的解决方案。

```
public static byte[] doSomethingWithTimeout( int timeout ) throws ProcessExecutionException, InterruptedException, IOException, TimeoutException {

    Callable<byte[]> callable = new Callable<byte[]>() {
        public byte[] call() throws IOException, InterruptedException, ProcessExecutionException {
            //Do some work that could throw one of these exceptions
            return null;
        }
    };

    try {
        ExecutorService service = Executors.newSingleThreadExecutor();
        try {
            Future<byte[]> future = service.submit( callable );
            return future.get( timeout, TimeUnit.MILLISECONDS );
        } finally {
            service.shutdown();
        }
    } catch( Throwable t ) { //Exception handling of nested exceptions is painfully clumsy in Java
        if( t instanceof ExecutionException ) {
            t = t.getCause();
        }
        if( t instanceof ProcessExecutionException ) {
            throw (ProcessExecutionException)t;
        } else if( t instanceof InterruptedException ) {
            throw (InterruptedException)t;
        } else if( t instanceof IOException ) {
            throw (IOException)t;
        } else if( t instanceof TimeoutException ) {
            throw (TimeoutException)t;
        } else if( t instanceof Error ) {
            throw (Error)t;
        } else if( t instanceof RuntimeException) {
            throw (RuntimeException)t;
        } else {
            throw new RuntimeException( t );
        }
    }
} 
```

=== 更新 ===

许多人发布的回复建议 1）作为一般异常重新抛出，或 2）作为未经检查的异常重新抛出。我不想做这些，因为这些异常类型（ProcessExecutionException、InterruptedException、IOException、TimeoutException）很重要——它们各自将被处理的调用以不同的方式处理。如果我不需要超时功能，那么我希望我的方法抛出这 4 种特定的异常类型（好吧，TimeoutException 除外）。我不认为添加超时功能应该改变我的方法签名来抛出一个通用的异常类型。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-06T04:21:44.847

我已经深入研究了这个问题，结果一团糟。在 Java 5、6 或 7 中都没有简单的答案。除了您指出的笨拙、冗长和脆弱之外，您的解决方案实际上还有一个问题，`ExecutionException`即您在调用时剥离的`getCause()`实际包含大部分重要的堆栈跟踪信息！

也就是说，你提供的代码中执行方法的线程的所有堆栈信息都只在ExecutionException中，而不是在嵌套原因中，它只覆盖`call()`Callable中开始的帧。也就是说，您的`doSomethingWithTimeout`方法甚至不会出现在您在这里抛出的异常的堆栈跟踪中！您只会从 executor 那里获得无实体的堆栈。这是因为`ExecutionException`是在调用线程上创建的唯一一个（请参阅 参考资料`FutureTask.get()`）。

我知道的唯一解决方案很复杂。很多问题源于`Callable`-的自由异常规范`throws Exception`。您可以定义新的变体，`Callable`具体指定它们抛出的异常，例如：

```
public interface Callable1<T,X extends Exception> extends Callable<T> {

    @Override
    T call() throws X; 
} 
```

这允许执行可调用对象的方法具有更精确的`throws`子句。如果您想支持最多包含 N 个异常的签名，那么不幸的是，您将需要此接口的 N 个变体。

现在您可以围绕 JDK 编写一个包装器，该包装器`Executor`采用增强的 Callable，并返回一个增强的`Future`，类似于 guava 的[CheckedFuture](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/CheckedFuture.html)。检查的异常类型在编译时从 的创建和类型传播`ExecutorService`到返回`Future`的 s，并`getChecked`在未来的方法上结束。

这就是你如何通过编译时类型安全。这意味着，而不是调用：

```
Future.get() throws InterruptedException, ExecutionException; 
```

您可以致电：

```
CheckedFuture.getChecked() throws InterruptedException, ProcessExecutionException, IOException 
```

因此避免了展开问题 - 您的方法立即抛出所需类型的异常，并且它们在编译时可用和检查。

在里面`getChecked`，但是你*仍然*需要解决上面描述的“缺失原因”展开问题。您可以通过将当前堆栈（调用线程的）拼接到抛出异常的堆栈上来做到这一点。这是扩展 Java 中堆栈跟踪的常用用法，因为单个堆栈跨越线程，但是一旦您知道发生了什么，它就可以工作并且很容易理解。

另一种选择是创建*另一个*与被抛出的相同事物的异常，并将原始异常设置为新异常的原因。您将获得完整的堆栈跟踪，原因关系将与它的工作方式相同`ExecutionException`- 但您将拥有正确类型的异常。但是，您需要使用反射，并且不能保证可以工作，例如，对于没有具有常用参数的构造函数的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-17T20:07:35.090

这是我在这种情况下所做的。这完成了以下工作：

*   重新抛出检查的异常而不包装它们
*   将堆栈跟踪粘合在一起

代码：

```
public <V> V waitForThingToComplete(Future<V> future) {
    boolean interrupted = false;
    try {
        while (true) {
            try {
                return future.get();
            } catch (InterruptedException e) {
                interrupted = true;
            }
        }
    } catch (ExecutionException e) {
        final Throwable cause = e.getCause();
        this.prependCurrentStackTrace(cause);
        throw this.<RuntimeException>maskException(cause);
    } catch (CancellationException e) {
        throw new RuntimeException("operation was canceled", e);
    } finally {
        if (interrupted)
            Thread.currentThread().interrupt();
    }
}

// Prepend stack frames from the current thread onto exception trace
private void prependCurrentStackTrace(Throwable t) {
    final StackTraceElement[] innerFrames = t.getStackTrace();
    final StackTraceElement[] outerFrames = new Throwable().getStackTrace();
    final StackTraceElement[] frames = new StackTraceElement[innerFrames.length + outerFrames.length];
    System.arraycopy(innerFrames, 0, frames, 0, innerFrames.length);
    frames[innerFrames.length] = new StackTraceElement(this.getClass().getName(),
      "<placeholder>", "Changed Threads", -1);
    for (int i = 1; i < outerFrames.length; i++)
        frames[innerFrames.length + i] = outerFrames[i];
    t.setStackTrace(frames);
}

// Checked exception masker
@SuppressWarnings("unchecked")
private <T extends Throwable> T maskException(Throwable t) throws T {
    throw (T)t;
} 
```

似乎工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T20:00:40.630

这里有一些关于检查和反对检查异常的有趣信息。[Brian Goetz 讨论和](http://www.ibm.com/developerworks/java/library/j-jtp05254/index.html)[Eckel Discussion](http://www.mindview.net/Etc/Discussions/CheckedExceptions)中反对检查异常的论点。但我不知道你是否已经实现并考虑了 Joshua 在[本书](http://www.informit.com/store/product.aspx?isbn=9780321356680&aid=3B419801-6640-4A1F-A653-6CD00295FCDD)中讨论的检查异常重构。

根据 Effective Java 珍珠，处理 Checked 异常的首选方法之一是将已检查异常转换为 Un-Checked Exception。例如，

```
try{
obj.someAction()
}catch(CheckedException excep){
} 
```

将此实现更改为

```
if(obj.canThisOperationBeperformed){
obj.someAction()
}else{
// Handle the required Exception.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:33:23.677

恐怕你的问题没有答案。基本上，您在与您所在的线程不同的线程中启动任务，并希望使用 ExecutorService 模式来捕获任务可能抛出的所有异常，以及在一定时间后中断该任务的好处。你的方法是正确的：你不能用一个裸的 Runnable 来做到这一点。

而这个你没有任何信息的异常，你想再次抛出它，具有某种类型：ProcessExecutionException、InterruptedException 或 IOException。如果它是另一种类型，您希望将其作为 RuntimeException 重新抛出（顺便说一句，这不是最好的解决方案，因为您没有涵盖所有情况）。

所以你有一个阻抗不匹配：一方面是 Throwable，另一方面是已知的异常类型。您必须解决的唯一解决方案是执行您已完成的操作：检查类型，然后使用强制转换再次抛出它。它可以写成不同的，但最终看起来是一样的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T19:30:14.230

我不确定为什么你在 catch 中有 if/else 块`instanceof`，我认为你可以做你想做的事： -

```
catch( ProcessExecutionException ex )
{
   // handle ProcessExecutionException
}
catch( InterruptException ex )
{
   // handler InterruptException*
} 
```

为了减少混乱，要考虑的一件事是在可调用方法中捕获异常，然后作为您自己的域/包特定异常或异常重新抛出。您需要创建多少异常很大程度上取决于您的调用代码将如何响应异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T00:26:40.853

在调用类中，抓住`Throwable`最后一个。例如，

```
try{
    doSomethingWithTimeout(i);
}
catch(InterruptedException e){
    // do something
}
catch(IOException e){
    // do something
} 
catch(TimeoutException e){
    // do something
}
catch(ExecutionException e){
    // do something
}
catch(Throwable t){
    // do something
} 
```

的内容`doSomethingWithTimeout(int timeout)`应该是这样的，

```
.
.
.
ExecutorService service = Executors.newSingleThreadExecutor();
try {
    Future<byte[]> future = service.submit( callable );
    return future.get( timeout, TimeUnit.MILLISECONDS );
} 
catch(Throwable t){
    throw t;
}
finally{
    service.shutdown();
} 
```

它的方法签名应该是这样的，

`doSomethingWithTimeout(int timeout) throws Throwable`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-02T18:34:29.300

这是我的答案。假设这段代码

```
public class Test {

    public static class Task implements Callable<Void>{

        @Override
        public Void call() throws Exception {
            throw new IOException();
        }

    }

    public static class TaskExecutor {

        private ExecutorService executor;

        public TaskExecutor() {
            this.executor = Executors.newSingleThreadExecutor();
        }

        public void executeTask(Task task) throws IOException, Throwable {
            try {
                this.executor.submit(task).get();
            } catch (ExecutionException e) {
                throw e.getCause();
            }

        }

    }

    public static void main(String[] args) {
        try {
            new TaskExecutor().executeTask(new Task());
        } catch (IOException e) {
            System.out.println("IOException");
        } catch (Throwable e) {
            System.out.println("Throwable");
        }
    }

} 
```

将打印 IOException。我认为这是一个可以接受的解决方案，缺点是投掷和捕捉 Throwable 有力，并且最终的接球可以减少到

```
} catch (Throwable e) { ... } 
```

另外，另一个机会是通过以下方式进行

```
public class Test {

public static class Task implements Callable<Void>{

    private Future<Void> myFuture;

    public void execute(ExecutorService executorService) {
        this.myFuture = executorService.submit(this);
    }

    public void get() throws IOException, InterruptedException, Throwable {
        if (this.myFuture != null) {
            try {
                this.myFuture.get();
            } catch (InterruptedException e) {
                throw e;
            } catch (ExecutionException e) {
                throw e.getCause();
            }
        } else {
            throw new IllegalStateException("The task hasn't been executed yet");
        }
    }

    @Override
    public Void call() throws Exception {
        throw new IOException();
    }

}

public static void main(String[] args) {
    try {
        Task task = new Task();
        task.execute(Executors.newSingleThreadExecutor());
        task.get();
    } catch (IOException e) {
        System.out.println("IOException");
    } catch (Throwable e) {
        System.out.println("Throwable");
    }
} 
```

}

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-04T08:55:03.610

javadoc 的 `java.util.concurrent.Future.get()`状态如下。那么为什么不直接捕获 ExecutionException （以及由 Cancellation 和 Interrupted 声明的`java.util.concurrent.Future.get()`）方法呢？

> > ...
> > 抛出：
> > 
> > CancellationException - 如果计算被取消
> > 
> > **ExecutionException - 如果计算抛出异常**
> > 
> > InterruptedException - 如果当前线程在等待时被中断

所以基本上你可以在你的 callable 中抛出任何异常，然后 catch `ExecutionException`。然后`ExecutionException.getCause()`将保留您的可调用对象抛出的实际异常，如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutionException.html)中所述。这样，您就可以免受与检查异常声明相关的方法签名更改。

顺便说一句，你不应该抓住`Throwable`，因为这也会抓住`RuntimeExceptions`and `Errors`。捕捉`Exception`稍微好一点，但仍然不推荐，因为它会捕捉`RuntimeExceptions`。

就像是：

```
try {  
    MyResult result = myFutureTask.get();
} catch (ExecutionException e) {
    if (errorHandler != null) {
        errorHandler.handleExecutionException(e);
    }
    logger.error(e);
} catch (CancellationException e) {
    if (errorHandler != null) {
        errorHandler.handleCancelationException(e);
    }
    logger.error(e);                
} catch (InterruptedException e) {
    if (errorHandler != null) {
        errorHandler.handleInterruptedException(e);
    }
    logger.error(e);
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-06-30T20:27:17.070

这是另一种方法，尽管我不相信这比使用您的问题中的 instanceof 检查更不笨拙或更不容易中断：

```
public static byte[] doSomethingWithTimeout(int timeout)
        throws ProcessExecutionException, InterruptedException, IOException, TimeoutException {
    ....
    try {
        ....
        return future.get(1000, TimeUnit.MILLISECONDS);
        .....
    } catch (ExecutionException e) {

        try {
            throw e.getCause();
        } catch (IOException ioe) {
            throw ioe;
        } catch (InterruptedException ie) {
            throw ie;
        } catch (ProcessExecutionException pee) {
            throw pee;
        } catch (Throwable t) {
            //Unhandled exception from Callable endups here
        }

    } catch (TimeoutException e) {
        throw e;
    } catch.....
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-07-01T16:08:54.843

我不会说我推荐这个，但这里有一种方法可以做到。它是类型安全的，在你之后修改它的人可能会对它不满意。

```
public class ConsumerClass {

    public static byte[] doSomethingWithTimeout(int timeout)
            throws ProcessExecutionException, InterruptedException, IOException, TimeoutException {
        MyCallable callable = new MyCallable();
        ExecutorService service = Executors.newSingleThreadExecutor();
        try {
            Future<byte[]> future = service.submit(callable);
            return future.get(timeout, TimeUnit.MILLISECONDS);
        } catch (ExecutionException e) {
            throw callable.rethrow(e);
        } finally {
            service.shutdown();
        }
    }

}

// Need to subclass this new callable type to provide the Exception classes.
// This is where users of your API have to pay the price for type-safety.
public class MyCallable extends CallableWithExceptions<byte[], ProcessExecutionException, IOException> {

    public MyCallable() {
        super(ProcessExecutionException.class, IOException.class);
    }

    @Override
    public byte[] call() throws ProcessExecutionException, IOException {
        //Do some work that could throw one of these exceptions
        return null;
    }

}

// This is the generic implementation. You will need to do some more work
// if you want it to support a number of exception types other than two.
public abstract class CallableWithExceptions<V, E1 extends Exception, E2 extends Exception>
        implements Callable<V> {

    private Class<E1> e1;
    private Class<E2> e2;

    public CallableWithExceptions(Class<E1> e1, Class<E2> e2) {
        this.e1 = e1;
        this.e2 = e2;
    }

    public abstract V call() throws E1, E2;

    // This method always throws, but calling code can throw the result
    // from this method to avoid compiler errors.
    public RuntimeException rethrow(ExecutionException ee) throws E1, E2 {
        Throwable t = ee.getCause();

        if (e1.isInstance(t)) {
            throw e1.cast(t);
        } else if (e2.isInstance(t)) {
            throw e2.cast(t);
        } else if (t instanceof Error ) {
            throw (Error) t;
        } else if (t instanceof RuntimeException) {
            throw (RuntimeException) t;
        } else {
            throw new RuntimeException(t);
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-03-15T14:18:58.550

我找到了一种解决问题的方法。如果是 ExecutionException，您可以通过调用 exception.getCause() 来获得原始异常然后您需要将异常包装在某种运行时异常中，或者（对我来说最好的方法是）使用来自项目 lombok 的 @SneakyThrows 注释（[https:// projectlombok.org/](https://projectlombok.org/)）。我给出一小段代码示例。此外，您可以在抛出异常之前添加一些 instanceof 检查，以确保这是您所期望的。

```
@SneakyThrows
public <T> T submitAndGet(Callable<T> task) {
    try {
        return executor.submit(task).get(5, TimeUnit.SECONDS);
    } catch (InterruptedException | ExecutionException | TimeoutException e) {
        throw e.getCause();
    }
} 
```

# css - 列表样式问题

> ID：10437892
> 
> 赞同：0
> 
> 时间：2012-05-03T19:14:27.293
> 
> 标签：css, styles

我正在使用以下 CSS

```
#basic li, #standard li, #premium li {
padding-left: 30px;
padding-top: 3px;
padding-bottom: 5px;
background-image: url(../assets/misc/blue_yes.png);
background-repeat: no-repeat;
background-position: 0 .5em;
border-bottom: 1px dotted #CCC;
}
#high li {
padding-left: 30px;
padding-top: 3px;
padding-bottom: 5px;
background-image: url(../assets/misc/green_yes.png);
background-repeat: no-repeat;
background-position: 0 .5em;
border-bottom: 1px dotted #CCC;
} 
```

为四个单独的列表设置样式

```
<ul id="basic">
                    <li>A</li>
                    <li>B</li>
                    <li>C</li>
                    <li>D</li>
                    <li>E</li>
                </ul>
<ul id="standard">
                    <li>A</li>
                    <li>B</li>
                    <li>C</li>
                    <li>D</li>
                    <li>E</li>
                </ul>

<ul id="high">
                    <li>A</li>
                    <li>B</li>
                    <li>C</li>
                    <li>D</li>
                    <li>E</li>
                </ul>

<ul id="premium">
                    <li>A</li>
                    <li>B</li>
                    <li>C</li>
                    <li>D</li>
                    <li>E</li>
                </ul> 
```

问题是只有第一个列表将删除的项目符号替换为图像。清单 2-4 在项目符号旁边有图像。我怎样才能让所有的四肢列表样式相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:17:07.923

添加`list-style-type:none` 到ul的CSS代码中。

**编辑：** -添加代码

***CSS：***

```
#basic,#standard,#premium,#high,#basic li, #standard li, #premium li,#high li{
    margin: 0;
    padding: 0;
    border: 0;
    vertical-align: baseline;
}
#basic,#standard,#premium,#high{
    list-style: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:17:02.380

尝试将一个类添加到您的样式的每个列表中，并为该类添加 css 而不是 ID。

# linq - 在列表中获取嵌套属性 - 使用索引

> ID：10437896
> 
> 赞同：0
> 
> 时间：2012-05-03T19:14:34.767
> 
> 标签：linq, nosql, ravendb

我正在尝试使用 RavenDB 获取 MVC 应用程序的所有剧院名称列表。所以我希望从 ravendb 文档中的嵌套对象中获取剧院名称列表...

示例 RavenDB 文档：

```
{
    "City": "NY",

    "Theaters": [
        {
            "TheaterName": "TheaterA",
            "TheaterId": "Theater/1693",
            "Description": ""               
        },
        {
            "TheaterName": "TheaterB",
            "TheaterId": "Theater/16393",
            "Description": ""               
        }
    ]
} 
```

索引（GetCityTheatersIndex）：

```
docs.CityTheaters
    .Select(doc => new {Theaters = doc.Theaters, City= doc.City}) 
```

代码：

```
 var query =  

 session.Advanced.LuceneQuery<CityTheaters>("CityTheaters/GetCityTheatersIndex"); 
```

如何操作上面的变量“查询”.. 以获取仅包含 TheatreNames 的列表.. 现在上面的代码让我获得了变量“查询”中的整个文档.. 我需要能够解析出“剧院名称”在嵌套对象中并填充到列表中.. 感谢您的帮助。

我尝试过类似的东西..

query.ElementAt(1).. 但这并没有让我到任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:02:39.450

您可以使用带有字段存储的地图索引来执行此操作：

```
public class CityTheaters : AbstractIndexCreationTask<City>
{
    public class Result
    {
        public string Name { get; set; }
    }

    public CityTheaters()
    {
        Map = cities => from city in cities
                        from theater in city.Theaters
                        select new
                        {
                            theater.Name
                        };

        Store(x => x.Name, FieldStorage.Yes);
    }
} 
```

稍后，您可以这样查询：

```
var results = session.Query<City, CityTheaters>()
    .AsProjection<CityTheaters.Result>()
    .ToList(); 
```

# c# - 当我想加载另一个页面时，为什么会触发 Page_Load 事件？

> ID：10437898
> 
> 赞同：3
> 
> 时间：2012-05-03T19:14:35.633
> 
> 标签：c#, asp.net, events, pageload

对 ASP 非常陌生，我觉得这是一个非常基本的问题。我的 default.aspx.cs 文件中有以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            //Get one day ago
            DateTime oneDayAgo = DateTime.Now.ToLocalTime().AddDays(-1);
            String strOneDayAgo = oneDayAgo.ToString();

            //Declare the query string
            String queryString = "Select * from Computers Where whenCreated >= '" + strOneDayAgo + "' ORDER BY whenCreated DESC";

            //Show the query being used to the user
            lblQueryUsed.Text = queryString;

            // Run the query and bind the resulting DataSet to the GridView control.
            DataSet ds = GetData(queryString);
            if (ds.Tables.Count > 0)
            {
                GridView1.DataSource = ds;
                GridView1.DataBind();
            }
        }
    } 
```

所有这些都非常好，但问题是当用户单击该页面上的链接以转到另一个名为 Reports.aspx 的页面时，会触发相同的 Page_Load 事件，并且所有控件（lblQueryUsed、GridView1）都设置为 NULL出于某种原因，我得到了一个例外。

当我想加载 Reports.aspx 时，为什么要加载 default.aspx 的 Page_Load 事件？为什么控件为空？

非常感谢您的帮助。

**编辑：这是该页面的完整代码，您还需要什么？**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.DirectoryServices;
using System.Data.SqlClient;
using Sorter;
using System.Data;

namespace AD_watcher_web_app
{
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            //Get one day ago
            DateTime oneDayAgo = DateTime.Now.ToLocalTime().AddDays(-1);
            String strOneDayAgo = oneDayAgo.ToString();

            //Declare the query string
            String queryString = "Select * from Computers Where whenCreated >= '" + strOneDayAgo + "' ORDER BY whenCreated DESC";

            //Show the query being used to the user
            lblQueryUsed.Text = queryString;

            // Run the query and bind the resulting DataSet to the GridView control.
            DataSet ds = GetData(queryString);
            if (ds.Tables.Count > 0)
            {
                GridView1.DataSource = ds;
                GridView1.DataBind();
            }
        }
    }

    protected void Label1_PreRender(object sender, EventArgs e)
    {
        //Populate the labels
        lblCompCount.Text = GridView1.Rows.Count.ToString();
        lblTimeRun.Text = DateTime.Now.ToLocalTime().ToString();
    }

    ///////////////////////METHODS///////////////////////

    DataSet GetData(String queryString)
    {
        // Set the connection string
        SqlConnectionStringBuilder conBuilder = new SqlConnectionStringBuilder();
        conBuilder.DataSource = "dbsql01dev.llnl.gov";
        conBuilder.InitialCatalog = "XloadDB";
        conBuilder.IntegratedSecurity = true;

        String connectionString = conBuilder.ConnectionString;

        //Declare a new dataset
        DataSet ds = new DataSet();

        try
        {
          // Connect to the database and run the query.
          SqlConnection connection = new SqlConnection(connectionString);        
          SqlDataAdapter adapter = new SqlDataAdapter(queryString, connection);

          // Fill the DataSet.
          adapter.Fill(ds);
        }
        catch(Exception ex)
        {
          // The connection failed. Display an error message.
            lblExceptions.Text = ex.ToString();
            lblExceptions.Visible = true;
        }
        return ds;
      }
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T19:18:30.520

为了使服务器端控件正常工作，页面需要在控件事件触发之前重新加载。

这是[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的一部分。

这种行为也会发生在服务器端链接上——一旦发生回发，页面就会重新加载并`page_load`触发。

为避免这种情况，请将您的链接设为纯客户端链接。

所以，不是`runat="server"`，而是正确的 HTML`<a href="">link</a>`链接。

# c - 当计算结果为 0 的整数枚举用作指针时，gcc 是否应该发出警告？

> ID：10437900
> 
> 赞同：1
> 
> 时间：2012-05-03T19:14:45.330
> 
> 标签：c, gcc, gcc-warning

下面的程序编译时没有警告（这是不可取的，因为省略第 19 行和第 21 行的数组索引会有效地破坏数组）。如果您使用 -D CHECK_NONZERO 进行编译，您将看到第 23 行不会在没有警告的情况下编译，因为枚举 BBB 的计算结果为 1，而 AAA 和 aaa 的计算结果为 0。

看起来，如果一个枚举的计算结果为 0，gcc 会将它无缝地转换为一个 NULL 指针。

这应该被认为是一个错误吗？

编辑：我认为我对我认为是问题的问题并没有那么清楚。在我看来，在将枚举解析为其常量值*之前*，出于警告目的对枚举进行类型检查并没有什么害处，但这不是 gcc 目前的工作方式。但是，我不确定这是否值得向 gcc 项目提交错误报告或功能请求。

```
#include <stdio.h>
#include <stdlib.h>

typedef enum {
    AAA,
    BBB,
} alpha_e;

enum {
    aaa,
    bbb,
};

int main(void) {
    alpha_e *alpha_array = malloc(sizeof(*alpha_array) * 2);
    alpha_array[0] = AAA;
    alpha_array[1] = BBB;
    printf("1: alpha_array[0] == %u, alpha_array[1] == %u\n", alpha_array[0], alpha_array[1]);
    alpha_array = AAA;
    printf("2: alpha_array[0] == %u, alpha_array[1] == %u\n", alpha_array[0], alpha_array[1]);
    alpha_array = aaa;
#ifdef CHECK_NONZERO
    alpha_array = BBB;
#endif
    return 1;
} 
```

gcc -v：

```
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 4.4.3-4ubuntu5.1' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --program-suffix=-4.4 --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i486 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5.1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:17:52.140

任何计算结果为 0 的整型常量表达式都应被视为空指针。我认为枚举值被认为是恒定的——它不是你可以改变的值。

设置指向任何其他整数值的指针是不合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:25:48.777

整数文字`0`是一个空指针常量。

> （C99，6.3.2.3p3 指针）：“值为 0 的整数常量表达式，或转换为 void * 类型的此类表达式称为空指针常量。”

```
int *p = 0;   // p is a null pointer 
```

> （C99，6.3.2.3p3）“如果将空指针常量转换为指针类型，则生成的指针（称为空指针）保证与指向任何对象或函数的指针不相等。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:28:08.363

> **6.3.2.3 指针**
> ...
> 3 值为 0 的整数常量表达式，或转换为 type 的这种表达式 `void *`，称为*空指针常量*。^(66))如果将空指针常量转换为指针类型，则生成的指针（称为*空指针*）保证与指向任何对象或函数的指针不相等。
> 
> 4 将空指针转换为另一种指针类型会产生该类型的空指针。任何两个空指针应该比较相等。
> 
> 5 整数可以转换为任何指针类型。除非前面指定，结果是实现定义的，可能没有正确对齐，可能不指向引用类型的实体，并且可能是陷阱表示。^(67))
> ...
> 
> * * *
> 
> 66) 宏 NULL 在 <stddef.h> （和其他头文件）中定义为空指针常量；见 7.19。
> 
> 67) 将指针转换为整数或将整数转换为指针的映射函数旨在与执行环境的寻址结构保持一致。

所以，不是错误。

# sql - Django SQL Select 日志 - 为什么我会看到这么多？

> ID：10437901
> 
> 赞同：2
> 
> 时间：2012-05-03T19:14:45.647
> 
> 标签：sql, django, performance, select, logging

我试图了解我的应用程序上的每个请求需要多少 SQL 选择查询（Django+Tastypie）。我更改了日志记录配置，以便可以查看相关日志。出于某种原因，我看到了大量这些日志。例如，对于简单的 get_list - 我看到 ~100 选择行。当我尝试调试以查看它们的来源时，我无法进入生成这些日志的行。我还注意到左侧的数字非常低（通常为 0.001）。我假设这个数字是执行查询的时间（以秒为单位）。

知道所有这些行的解释是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:24:57.497

在你的 sweetpie api.py 文件中，你可能需要将默认查询集更改为包含 prefetch_related 或 select_related。您使用哪个取决于您的实际型号。这是一个例子：

```
class OfferResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user', full=False)
    country = fields.ForeignKey(CountryResource, 'country', full=True) 
    campaign = fields.ForeignKey(CampaignResource, 'campaign', full=False)    
    network = fields.ForeignKey(NetworkResource, 'network', full=False, null=True)       
    class Meta:
        queryset = Offer.objects.prefetch_related('offerstat').select_related('country', 'campaign', 'network').all() 
```

# asp.net-mvc - 添加值以选择列表

> ID：10437903
> 
> 赞同：0
> 
> 时间：2012-05-03T19:14:58.573
> 
> 标签：asp.net-mvc, drop-down-menu

这是我的选择列表：

```
ViewBag.gov = new SelectList(entity.gouvernerat, "Idgov", "Nomg"); 
```

在我看来，这就是我所说的：

```
 <%: Html.DropDownListFor(model => model.gov, ViewBag.gov as SelectList) %> 
```

所以我想知道如何在不将其添加到我的 DateBase 实体的情况下将 Value 添加到此 DropdownList 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:37:34.853

类似的东西，我想

```
var list = new SelectList(entity.gouvernerat, "Idgov", "Nomg").ToList();
list.Insert(0, (new SelectListItem { Text = "<MyText>", Value = "0" }));
ViewBag.gov=list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:46:21.007

您可以使用以下重载来提供默认值：

```
<%= Html.DropDownListFor(
    model => model.gov, 
    ViewBag.gov as SelectList,
    "-- select a value --"
) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:24:16.597

```
var list = new SelectList(entity.gouvernerat, "Idgov", "Nomg");
ListItem li = new ListItem(value, value);
list.items.add(li);
ViewBag.gov = list; 
```

# java - 检索用户指定表的内容

> ID：10437904
> 
> 赞同：0
> 
> 时间：2012-05-03T19:14:59.607
> 
> 标签：java, mysql, sql

下面的代码显示特定表的元组。我怎样才能把它变成动态代码？因此，用户将输入表格的名称，然后显示除表格内容之外的行和列名称。

*** 请记住 res.getInt 和 res.getString 需要按原样指定。在动态模型中，我不需要知道列的数量、类型和名称。***

```
public void displayTableA()
{
    //Connection already established

    Statement st = conn.createStatement();
    ResultSet res = st.executeQuery("SELECT * FROM A");
    System.out.println("A_code: " + "\t" + "A_name: ");
    while (res.next()) {
        int r = res.getInt("A_code");
        String s = res.getString("A_name");
        System.out.println(r + "\t\t" + s);
    }
    conn.close();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:23:41.377

```
public void displayTable(String table)
{
    //Connection already established

    Statement st = conn.createStatement();
    ResultSet res = st.executeQuery("SELECT * FROM " + table);
    ResultSetMetaData rsmd = res.getMetaData();
    while (res.next()) {
        for(int ii = 1; ii <= rsmd.getColumnCount(); ii++) {
            // get type
            int type = rsmt.getColumnType(ii);
            String value = null;
            switch (type) {
                case Types.VARCHAR: value = res.getString(ii); break;
            }
            // print value.
            System.out.print(rsmd.getColumnName(ii) + ": " + value);
        }
    }
    conn.close();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:28:30.853

直接回答：查询只是一个字符串。您可以根据用户输入构建它。就像将表的名称读入一个变量，说“字符串表名”，然后

```
String query="select * from " + tablename; 
```

然后运行查询以获取结果集：

```
ResultSet rs=st.executeQuery(query); 
```

然后获取结果集的元数据：

```
ResultSetMetaData meta=rs.getMetaData(); 
```

然后遍历获取它们的名称的列：

```
for (int x=1;x<=meta.getColumnCount();++x)
{
  String columnName=meta.getColumnName(x);
  ... do whatever you want with this column name ...
} 
```

（请注意，列从 1 开始编号，而不是 0。）

至于数据本身，如果你只是把它转储出去，你不需要知道类型。只需对所有内容执行 getString 即可。每种数据类型都可以转换为字符串。好吧，如果您有斑点或图像，您可能需要检查它们。有一个 ResultSetMetaData 函数来获取列类型，我认为它是 getType 或类似的东西。检查javadocs。

也就是说，你为什么要这样做？如果您正在构建某种工具以供开发人员使用来执行临时查询，那很好。但我会非常谨慎地将此类内容暴露给最终用户。(a) 他们不太可能理解数据，并且 (b) 你会制造一个巨大的安全漏洞，用户可以看到系统中的任何数据。您可以将其包装在检查中以将用户限制为他们有权查看的内容，但要做到这一点需要做很多工作。说“这是你被允许看到的”比尝试说“这是你不被允许看到的”要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:41:07.047

如果要在转换in`ResultSet`实例的动态查询中打印 a ：`ResultSet``String`

```
public static String toString(ResultSet rs) throws SQLException {
    StringBuilder sb = new StringBuilder();
    ResultSetMetaData metaData = rs.getMetaData();
    int columnCount = metaData.getColumnCount();
    Map<Integer, Integer> sizeMap = new HashMap<>();
    for (int column = 1; column <= columnCount; column++) {
        int size = Math.max(metaData.getColumnDisplaySize(column), metaData.getColumnName(column).length());
        sizeMap.put(column, size);
        sb.append(StringUtils.rightPad(metaData.getColumnName(column), size));
        sb.append(' ');
        sb.append(' ');
    }
    sb.append('\n');
    for (int column = 1; column <= columnCount; column++) {
        sb.append(StringUtils.rightPad("", sizeMap.get(column), '-'));
        sb.append(' ');
        sb.append(' ');
    }
    while(rs.next()) {
        sb.append('\n');
        for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
            String str = rs.getString(columnIndex);
            if (str == null) {
                str = "(null)";
            }
            sb.append(StringUtils.rightPad(str, sizeMap.get(columnIndex)));
            sb.append(' ');
            sb.append(' ');
        }
    }
    return sb.toString();
} 
```

对于打印类似的东西：

```
user_id       user_code             date_update          
------------  --------------------  -------------------  
01006393      00989573              2011-09-29 19:23:46  
00984742      20192498              2011-12-21 00:00:00 
```

此方法使用[Commons Lang 3](http://commons.apache.org/lang/)

注意：您应该小心使用它以避免内存错误。您可以更改`sb.append`with`System.out.print`或`System.out.println`

# c - C中的内存溢出

> ID：10437905
> 
> 赞同：3
> 
> 时间：2012-05-03T19:15:03.353
> 
> 标签：c

```
#include <stdlib.h>
#include <stdio.h>
int main (){
   int n, cont, fib, na = 0, nb = 1, sum_even = 0;
   printf ("Insert a number and I'll tell you the respective Fibonacci: ");
   scanf ("%d", &n);
   for (cont = 1; cont < n; cont++) {
      na += nb;
      nb = na - nb;
      fib = na + nb;
      if (fib % 2 == 0) {
         sum_even += fib;
      }
   }
   printf ("%d\n", sum_even);
   return 0;
} 
```

我试图做 Project Euler [Problem 2](https://projecteuler.net/problem=2)，然后我想出了这段代码。问题是：我在斐波那契数列上找不到超过 400 或接近数字的数字对的总和，因为内存溢出。结果，我无法解决这个练习，因为它要求在斐波那契数列中找到低于 4000000 的对数之和。谁能帮我？

编辑：我尝试使用浮点类型数字来增加答案的容量，它似乎可以工作到一千左右，但是如果我尝试使用更大的数字，我会在 bash 处理 15 秒后出现 -nan 错误（我没有'不知道这意味着什么）。

```
#include <stdlib.h>
#include <stdio.h>
int main () {
   int n, cont, div;
   float sum_even = 0, na = 0, nb = 1, fib;
   printf ("Insert a number and I'll tell you the respective Fibonacci: ");
   scanf ("%d", &n);
   for (cont = 1; cont <= n; cont++) {
      na += nb;
      nb = na - nb;
      fib = na + nb;
      div = fib / 2;
      if (div % 2 == 0) {
         sum_even += fib;
      }
   }
   printf ("%f\n", sum_even);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T19:18:54.930

您观察到的不是内存溢出，而是数字溢出。练习的重点是表明溢出确实会发生，并让你学习处理它的技巧。在这种特殊情况下，他们希望您实现[任意精度整数算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)，或者借用预制实现并将其与您的解决方案一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T19:58:49.933

您误解了问题陈述。任务是找到总和

```
{ fib(n) : fib(n) <= 4000000 && fib(n) % 2 == 0 } 
```

并不是

```
{ fib(n) : n <= 4000000 && fib(n) % 2 == 0 } 
```

只需对您的代码稍作修改，即可轻松解决该任务。代替

```
for (cont = 1; cont < n; cont++) { 
```

利用

```
while(fib <= n) { 
```

# matlab - fscanf 文件在 matlab 中读取，用于混合数字和非数字数据（textscan 不可用）

> ID：10437909
> 
> 赞同：1
> 
> 时间：2012-05-03T19:15:13.050
> 
> 标签：matlab, file-io

我正在尝试读取数据文件，但我有一个不包含 textscan 的旧版本的 Matlab。我正在尝试使用 fscanf 但我无法弄清楚如何读取时间格式的第二个元素。txt 数据如下所示：

20120502,16:30:00,1397.5,1397.5,1397.0,1397.5,1283
20120502,16:32:00,1397.25,1397.5,1397.0,1397.0,582

我已经尝试过这个，在找出第二列是时间向量方面进行了不同的尝试，但我没有任何运气。

```
fid = fopen('C:\matlab\data\GLOBEX.txt','r');  
[c] = fscanf(fid, '%f %s %f %f %f %f %f'); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:59:03.020

尝试以下操作：

```
[c] = fscanf(fid, '%f,%d:%d:%d,%f,%f,%f,%f,%f');  
c = reshape(c, 9, length(c)/9)'; 
```

现在，您在第 2、3 和 4 列中有小时、分钟和秒。

# jquery - 一个或两个用于添加和编辑的对话框实例？

> ID：10437915
> 
> 赞同：-1
> 
> 时间：2012-05-03T19:15:55.763
> 
> 标签：jquery, jquery-ui

最好创建两个对话框实例，一个用于添加，一个用于编辑，还是可以使用一个对话框？

**示例**这是我目前正在使用的

```
 // Add Dialog 
        $('#addProgramDialog').dialog({
            autoOpen: false,
            width: 400,
            height: 500,
            title: 'Add Program',
            buttons: {
                'Cancel': function () {
                    $(this).dialog('close');
                },
                'Save': function () {
                    saveProgramRequest();
                }
            }
        });

        // Edit Dialog 
        $('#editProgramDialog').dialog({
            autoOpen: false,
            width: 400,
            height: 500,
            title: 'Edit Program',
            buttons: {
                'Cancel': function () {
                    $(this).dialog('close');
                },
                'Update': function () {
                    updateProgramRequest();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:49:43.713

根据 DRY 原则，您永远不应该重复自己。在您的示例中，您复制了宽度、高度、autoOpen 参数和取消按钮的声明。您可以通过简单地使用 jQuery 的 each 方法来循环对话框并根据需要进行自定义来防止这种情况。举个例子：

```
$('#addProgramDialog, #editProgramDialog').each(function(index, node) {
    var options = {
        //autoOpen: false,
        width: 400,
        height: 500,
        buttons: {
            'Cancel': function() {
                $(this).dialog('close');
            }
        }
    };

    if (node.id == "addProgramDialog") {
        options.title = 'Add Program';
        options.buttons['Save'] = function() {
            saveProgramRequest();
        }
    } else {
        options.title = 'Edit Program';
        options.buttons['Update'] = function() {
            updateProgramRequest();
        }
    }

    $(node).dialog(options);
}); 
```

这是一个 jsFiddle 来现场展示这个例子 - [http://jsfiddle.net/YTbnN/](http://jsfiddle.net/YTbnN/)。

# html - Google 地图 API 未全尺寸显示

> ID：10437919
> 
> 赞同：2
> 
> 时间：2012-05-03T19:16:12.430
> 
> 标签：html, google-maps, jquery-mobile

我将 jQuery mobile 用于我的 iOS 应用程序。这是我加载地图时内部发生的情况：

![在此处输入图像描述](../Images/d82d940f5772034ecd9bd4cea349f2e2.png)

我使用以下脚本来生成它。

```
var map
var mark

function initialize() {
    var latlng = new google.maps.LatLng(52.404657,-1.491413);
    var myOptions = {
    zoom: 13,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),
                              myOptions);

    mark = new google.maps.Marker( {
                                      position: latlng,
                                      map:map   
                                      })
}

function mostrarUbicacion(){
    navigator.geolocation.getCurrentPosition( lecturaGPS , errorGPS , {enableHighAccuracy:true} )  
}

function lecturaGPS(ubicacion){

    var miubicacion = new google.maps.LatLng(ubicacion.coords.latitude, ubicacion.coords.longitude);

    map.setCenter(miubicacion)
    mark.setPosition(miubicacion)

}

function errorGPS(){
    alerta(" unable to connect")
} 
```

html:

```
<body onload="initialize()" style="height:100%">
<div id="map_canvas" style="width:100%; height:50%; padding:0;"></div>
<button onClick="mostrarUbicacion()"> Click to find where you are! </button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T00:06:08.593

尝试以这种方式设置地图和 css的*div ：*

HTML：

```
<div class="Flexible-container" id="map" style="margin:1.5%;">
    <!-- this is the div for the map -->
</div> 
```

CSS：

```
/* Flexible iFrame */

.Flexible-container {
    position: relative;
    padding-bottom: 32.25%;
    padding-top: 30px;
    height: 0;
    overflow: hidden;
}

.Flexible-container iframe,   
.Flexible-container object,  
.Flexible-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

调整*div*使用*百分比*的宽度；您可以调整高度设置*padding-bottom*。

[这里是文档](http://niklausgerber.com/blog/responsive-google-or-bing-maps/)

# cocoa-touch - UIDate 选择器的替代品 - 用于选择日期和时间的更好的 UI 元素。

> ID：10437920
> 
> 赞同：1
> 
> 时间：2012-05-03T19:16:12.630
> 
> 标签：cocoa-touch, ios4

我只是讨厌 Apple 提供的 UIDate 和 Time Picker。您是否知道任何其他创建用于选择时间和日期的等效 UI 元素的库，至少可以更好地自定义？我不想重新发现轮船。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:44:23.643

只是对于任何其他想知道我的结论的人......我认为使用日历来选择日期并为到目前为止的时间保留一个选择器会更好。

对于日历，这里有一个很好的实现： [https ://github.com/klazuka/Kal](https://github.com/klazuka/Kal)

# php - CakePHP：网站未在网络服务器上打开迁移问题在本地主机上正常工作

> ID：10437939
> 
> 赞同：0
> 
> 时间：2012-05-03T19:17:08.927
> 
> 标签：php, mysql, cakephp

好的，这就是正在发生的事情。我正在学习蛋糕 PHP 并最近使用它开发了一个博客。博客文章和评论在本地服务器上运行良好。但是当我将它迁移到我的网络服务器（bluehost）时。该网站不打开。它说它在视图文件夹中找不到 index.ctp。我解决了这个问题，发现我在 /Views/ 中的文件夹名称很小，例如 /Views/posts 而不是 /Views/Posts 。该站点在本地服务器上运行良好（文件夹名称仍然是 /Views/posts）。但它不会在 Bluehost 服务器上打开。它与 mod_rewrite 有什么关系。PLz帮帮我。早期回答将不胜感激。明天是我的外部 Viva，我的网站无法正常打开！！！！帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:35:54.607

尝试绕过 url 重写并直接点击前端控制器（例如[http://www.example.com/index.php?url=/views/posts](http://www.example.com/index.php?url=/views/posts)）

如果正确解决，那么您的 url 重写设置肯定有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:32:08.010

您是否在 Windows PC 上开发了您的网站？Windows 不关心文件夹名称是大写还是小写。

# prolog - Prolog - 断言到新数据库

> ID：10437943
> 
> 赞同：1
> 
> 时间：2012-05-03T19:17:23.563
> 
> 标签：prolog, prolog-assert

```
:-dynamic listofQuestions/2.
myrule:-
    write('P = '), write(Percent), write('-'),write(X),
    ( listofQuestions(Percent,X) -> true ; assert(listofQuestions(Percent,X)) ), 
```

可能不需要代码片段来回答我的问题。

每次我调用我的规则时，我都想断言一个空白的“问题列表”。仅当我关闭 prolog 窗口并重新启动它时，才会发生这种情况。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:38:36.403

`abolish/1`从数据库中删除给定谓词的所有子句。`abolish(PredName/Arity)`因此，只要您需要删除有关此谓词的信息，只需添加一个调用即可。注意取消对动态谓词的调用后不会失败而是报错。

```
12 ?- f(X,Y).
false.

13 ?- assert(f(a,b)).
true.

14 ?- f(X,Y).
X = a,
Y = b.

15 ?- abolish(f/2).
true.

16 ?- f(X,Y).
ERROR: user://2:67:
        toplevel: Undefined procedure: f/2 (DWIM could not correct goal) 
```

在 SWI-Prolog 中`abolish`，除非 prolog 标志`iso`设置为 true，否则适用于静态过程。如果您打算仅删除动态谓词，则最好尝试`retractall`. 请注意，在这种情况下，删除不会导致报告错误，而是导致失败。

```
17 ?- [user].
:- dynamic f/2.
|: 
% user://3 compiled 0.00 sec, 264 bytes
true.

18 ?- f(X,Y).
false.

19 ?- assert(f(a,b)).
true.

20 ?- f(X,Y).
X = a,
Y = b.

21 ?- retractall(f(X,Y)).
true.

22 ?- f(X,Y).
false. 
```

# android - 适用于 Android 的 Mono 的 ActionBarSherlock 的 jar-Binding

> ID：10437949
> 
> 赞同：32
> 
> 时间：2012-05-03T19:18:01.817
> 
> 标签：android, xamarin.android, actionbarsherlock

我想在我的 Mono For Android 项目中绑定 ActionBarSherlock 的 jar 库。我崇敬这份文档：[http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_(.jar)](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_%28.jar%29)

我已经成功绑定了 ActionBarSherlock 需要的 android-support-v4.jar。但是当我尝试编译 actionbarsherlock.jar 时，它给了我以下错误消息：

```
Target ResolveLibraryProjects:
    Skipping target "ResolveLibraryProjects" because it has no inputs.
    Target _ResolveMonoAndroidSdks:
        MonoAndroid Tools: C:\Program Files (x86)\MSBuild\Novell\
        MonoAndroid Framework: C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v2.2\;C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\
        Android SDK: C:\Program Files (x86)\Android\android-sdk\
        Java SDK: C:\Program Files (x86)\Java\jdk1.6.0_31\
    Target ExportJarToXml:
          SourceJars:
            Jars\actionbarsherlock.jar
          ReferenceJars:
            Jars\android-support-v4.jar
        C:\Program Files (x86)\Java\jdk1.6.0_31\bin\java.exe -jar "C:\Program Files (x86)\MSBuild\Novell\jar2xml.jar" --jar=C:\Users\assrock\Documents\JavaBind\JavaBind\Jars\actionbarsherlock.jar --ref="C:\Program Files (x86)\Android\android-sdk\platforms\android-8\android.jar" --out=C:\Users\assrock\Documents\JavaBind\JavaBind\obj\Release\api.xml --ref=C:\Users\assrock\Documents\JavaBind\JavaBind\Jars\android-support-v4.jar 
        Couldn't load class com/actionbarsherlock/internal/ActionBarSherlockNative$ActionModeCallbackWrapper
        Couldn't load class com/actionbarsherlock/internal/app/ActionBarWrapper$TabWrapper
        Couldn't load class com/actionbarsherlock/internal/app/ActionBarWrapper
        Couldn't load class com/actionbarsherlock/internal/view/ActionProviderWrapper
        Couldn't load class com/actionbarsherlock/internal/view/menu/MenuItemWrapper$1
        Exception in thread "main" java.lang.NoClassDefFoundError: com/actionbarsherlock/R
            at java.lang.Class.getDeclaringClass(Native Method)
            at jar2xml.JavaClass.getConstructorParameterOffset(JavaClass.java:149)
            at jar2xml.JavaClass.appendCtor(JavaClass.java:138)
            at jar2xml.JavaClass.appendToDocument(JavaClass.java:462)
            at jar2xml.JavaPackage.appendToDocument(JavaPackage.java:66)
            at jar2xml.Start.main(Start.java:157)
        Caused by: java.lang.ClassNotFoundException: com.actionbarsherlock.R
            at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
            ... 6 more
C:\Program Files (x86)\MSBuild\Novell\Xamarin.Android.Bindings.targets(170,5): error MSB6006: "java.exe" exited with code 1.
    Task "JarToXml" execution -- FAILED
    Done building target "ExportJarToXml" in project "C:\Users\assrock\Documents\JavaBind\JavaBind\JavaBind.csproj".-- FAILED
Done building project "C:\Users\assrock\Documents\JavaBind\JavaBind\JavaBind.csproj".-- FAILED
Build FAILED.
Warnings:
C:\Program Files (x86)\MSBuild\Novell\Xamarin.Android.Bindings.targets(40,11): warning MSB4011: There is a circular reference involving the import of file "c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.Targets". This file may have been imported more than once, or you may have attempted to import the main project file. All except the first instance of this file will be ignored.
Errors:
C:\Users\assrock\Documents\JavaBind\JavaBind\JavaBind.csproj (Build) ->
C:\Program Files (x86)\MSBuild\Novell\Xamarin.Android.Bindings.targets (ExportJarToXml target) ->
    C:\Program Files (x86)\MSBuild\Novell\Xamarin.Android.Bindings.targets(170,5): error MSB6006: "java.exe" exited with code 1.
     1 Warning(s)
     1 Error(s)
Time Elapsed 00:00:00.4730270
--------------------- Fertig ---------------------
Build: 1 Fehler, 0 Warnungen 
```

对于 android-support-v4.jar，我找到了这些 xml 文件并将它们放在 Transforms 目录中：

枚举字段.xml

```
<enum-field-mappings>
  <mapping jni-class="android/support/v4/app/FragmentActivity$FragmentTag" clr-enum-type="Android.Support.V4.App.FragmentTagType">
    <field  jni-name="Fragment_id"    clr-name="Id"   value="1" />
    <field  jni-name="Fragment_name"  clr-name="Name" value="0" />
    <field  jni-name="Fragment_tag"   clr-name="Tag"  value="2" />
  </mapping>
</enum-field-mappings> 
```

枚举方法.xml

```
<enum-method-mappings>
  <mapping jni-class="android/support/v4/app/Fragment$SavedState">
        <method jni-name="writeToParcel"  parameter="p1"    clr-enum-type="Android.OS.ParcelableWriteFlags" />
    <method jni-name="writeToParcel"  parameter="flags" clr-enum-type="Android.OS.ParcelableWriteFlags" />
    </mapping>
</enum-method-mappings> 
```

元数据.xml

```
<metadata>
  <remove-node path="/api/package[@name='android.support.v4.app']/class[@name='BackStackState']" />
  <remove-node path="/api/package[@name='android.support.v4.app']/class[@name='FragmentState']" />
  <remove-node path="/api/package[@name='android.support.v4.app']/class[@name='FragmentManagerState']" />
  <remove-node path="/api/package[@name='android.support.v4.widget']/class[@name='CursorAdapter']/implements[@name='android.support.v4.widget.CursorFilter.CursorFilterClient']" />
  <remove-node path="/api/package[@name='android.support.v4.widget']/class[@name='CursorAdapter']/field[@name='mCursorFilter']" />

  <remove-node path="/api/package[@name='android.support.v4.content']/class[@name='AsyncTaskLoader.LoadTask']" />
  <!-- FIXME:
        This method is an override of another method in the base types.
        The base method expects JLO, but this method returns Cursor.
        So we somehow have to fill the gap between them.
  -->
  <remove-node path="/api/package[@name='android.support.v4.content']/class[@name='CursorLoader']/method[@name='loadInBackground']" />

  <remove-node path="/api/package[@name='android.support.v4.view.accessibility']/class[@name='AccessibilityNodeInfoCompat.AccessibilityNodeInfoIcsImpl']" />
  <remove-node path="/api/package[@name='android.support.v4.widget']/class[@name='CursorAdapter.ChangeObserver']" />
  <remove-node path="/api/package[@name='android.support.v4.view.accessibility']/class[@name='AccessibilityNodeInfoCompat.AccessibilityNodeInfoIcsImpl']" />
  <remove-node path="/api/package[@name='android.support.v4.view.accessibility']/class[@name='AccessibilityNodeInfoCompat.AccessibilityNodeInfoStubImpl']" />
  <remove-node path="/api/package[@name='android.support.v4.view']/interface[@name='ViewPager.OnAdapterChangeListener']" />

  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='initLoader']/parameter[@name='p2']" name="type">android.support.v4.app.LoaderManager.LoaderCallbacks</attr>
  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='initLoader']/parameter[@name='callback']" name="type">android.support.v4.app.LoaderManager.LoaderCallbacks</attr>
  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='initLoader']" name="return">android.support.v4.content.Loader</attr>
  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='restartLoader']/parameter[@name='p2']" name="type">android.support.v4.app.LoaderManager.LoaderCallbacks</attr>
  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='restartLoader']/parameter[@name='callback']" name="type">android.support.v4.app.LoaderManager.LoaderCallbacks</attr>
  <attr path="/api/package[@name='android.support.v4.app']/class[@name='LoaderManager']/method[@name='restartLoader']" name="return">android.support.v4.content.Loader</attr>
</metadata> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T18:53:18.533

ActionBarSherlock 包括 UI 元素、样式和其他无法编译到 JAR 文件中的东西。[ActionBarSherlock FAQ](http://actionbarsherlock.com/faq.html)上有关于此的说明。

> 问：为什么 ActionBarSherlock 是一个库项目，而原来的兼容库只是一个 .jar？
> 
> 答：ActionBarSherlock 中的自定义操作栏实现依赖于样式、主题、布局和可绘制对象才能正确显示。由于 Android 和 .jar 文件的限制，目前无法通过其他任何方式完成。

**编辑：**在此链接中，有一些关于尝试在 Mono for Android 中跨库项目共享资源的其他信息：http: [//mono-for-android.1047100.n5.nabble.com/Resources-from-a-Library-Project -td4657828.html](http://mono-for-android.1047100.n5.nabble.com/Resources-from-a-Library-Project-td4657828.html)。简短的回答是目前看起来不可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T15:40:00.277

我相信我已经成功地在 Mono for Android 中绑定了 ActionBarSherlock。

您需要将 java 文件打包为 JAR 文件，但没有资源和 R java 类文件。在打包文件之前，请确保选中 Android 设置中的“是库”框，这样资源 ID 就不会被创建为常量并内联到已编译的 Java 类中。

完成此操作后，您可以使用最新版本的 Mono for Android 来绑定 JAR 文件。

资源需要从 JAR 文件中单独复制，并直接放在主 android 应用程序项目中。不幸的是，目前在使用 Mono for Android 时，没有办法将资源隔离在单独的库项目中，但我预计这将很快改变。

最后，您需要编辑您的 C-Sharp 项目文件，以便在每次重建时自动创建新版本的 com.actionbarsherlock.R java 类文件。这是保持所有资源 ID 同步所必需的。

我可能错过了一两步，但这些是最重要的。

请参阅我的博客文章以获取更多信息以及带有源代码的下载链接：

[http://www.craigsprogramming.com/2012/07/actionbarsherlock-with-mono-for-android.html](http://www.craigsprogramming.com/2012/07/actionbarsherlock-with-mono-for-android.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:23:13.793

这似乎是一种大锤方法，但可能会解决您的问题......

我建议使用 Maven 构建，它可以更好地处理这些依赖关系。您将能够在您的 POM 中引用 ActionBarSherlock 项目，MVN 将为您管理依赖项。

我也可以确认原始答案是正确的 - 包含包含布局资源的 JAR 文件是有限制的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T13:33:13.037

看起来 Xamarin 解决了 ActionBarSherlock 绑定问题

[https://bugzilla.xamarin.com/show_bug.cgi?id=6186](https://bugzilla.xamarin.com/show_bug.cgi?id=6186)

此修复已包含在 4.2.5 中，现在可在 alpha 通道上使用。

# smartgwt - 处理对大表格的更改。关闭模态之前的警报

> ID：10437950
> 
> 赞同：0
> 
> 时间：2012-05-03T19:18:01.750
> 
> 标签：smartgwt

我目前正在开发一个用 SmartGWT 2.0 制作的客户管理应用程序。

添加客户表单是一个相当大的表单，有多个选项卡，每个选项卡都有很多字段。此表单在一个模式窗口中打开，该窗口底部有一个保存和关闭按钮。

由于这是一个巨大的表格，有时代表会意外点击`Close`，而没有注意到其中一个选项卡中有一些信息。

当用户在更改表单后尝试关闭表单时，我们希望添加某种警报。

我看到有`ChangeHandler`文本项可以标记可以在触发关闭事件之前评估的更改。然而，目前为这么多领域做这件事有点麻烦。有没有办法在一个层面上实现这一目标，`DynamicForm`甚至在`Window`层面上更好？

我正在寻找与此 jquery 代码等效的 SmartGWT：

```
$("input:text, select, input:checkbox, input:radio, input:password").change(function(){
    unloadRoutineFlag = true;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:23:14.770

在 dynamicForm 级别仔细查看此处理程序。

```
addItemChangedHandler(ItemChangedHandler handler) 
```

> 当在此表单中的 FormItem 上触发 changed() 事件时触发处理程序。

通常，当 formItem 触发 changed() 事件时，表单会收到通知。让我们知道这是否有效。

# spring - Spring 如何实例化此类及其依赖关系

> ID：10437951
> 
> 赞同：1
> 
> 时间：2012-05-03T19:18:09.030
> 
> 标签：spring

不确定这是否与弹簧有关：

我有一个像这样的豆类

```
class BeanClass {
    private ServiceA serviceA;
    private ServiceB serviceB;

    public BeanClass() {}

    public void setServiceA(ServiceA serviceA) {
        this.serviceA = serviceA;
    }

    public void setServiceB(ServiceB serviceB) {
        this.serviceB = serviceB;
    }

    public void callService() {
        serviceA.a();
        serviceB.b();
    }
} 
```

及其配置：

```
<bean id="beanClass" class="BeanClass">
    <property name="serviceA" ref="serviceA"/>
    <property name="serviceB" ref="serviceB"/>
</bean> 
```

但我在控制器类中使用 new 关键字实例化 bean：

```
class ControllerClass {
    public void someMethod() {
        BeanClass beanClass = new BeanClass();
        beanClass.callService();
    }
} 
```

我的问题是 ServiceA 和 ServiceB 如何正确实例化？因为我使用 new 来获取一个类对象，并且从不设置它的字段成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:22:17.133

你不想这样做：

```
BeanClass beanClass = new BeanClass(); 
```

简而言之，这就是 Spring 的 IOC 容器的全部意义所在。您应该让 IOC 容器为您提供 BeanClass 的引用

```
@Autowired
BeanClass myBeanClass; 
```

*这并不完全，因为您需要为控制器增加一些额外的接线。

# ffmpeg - 分割音频流或仅音频文件

> ID：10437953
> 
> 赞同：1
> 
> 时间：2012-05-03T19:18:22.010
> 
> 标签：ffmpeg, http-live-streaming

HTTP-live 流需要一个纯音频链接。我现在将 FFMPEG 中的分段器用于视频，效果很好。但是，在提供音频文件时，分段器似乎不起作用，只创建一个片段。

对 FFMPEG 进行分段的调用是：

> ffmpeg -i data/media/1/2/encoded.mp3 -y -c copy -flags global_header -map 0 -f segment -segment_time 10 -segment_list data/media/1/2/fileList.txt -segment_format libmp3lame data/media /1/2/segment_%05d.mp3

我确实将 -segment_format 'libmp3lame' 放入其中，但似乎没有什么区别。

第一步是编码，这是臭虫的输出：

```
20:11:36,158 DEBUG ~ FFMPEG: ffmpeg version 0.10.2.git-d3d5e84 Copyright (c) 2000-2012 the FFmpeg developers
20:11:36,158 DEBUG ~ FFMPEG:   built on May  2 2012 19:00:38 with clang 3.0 (tags/Apple/clang-211.10.1)
20:11:36,158 DEBUG ~ FFMPEG:   configuration: --prefix=/opt/local --enable-gpl --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libxvid --enable-libx264 --enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm
20:11:36,158 DEBUG ~ FFMPEG:   libavutil      51\. 44.100 / 51\. 44.100
20:11:36,158 DEBUG ~ FFMPEG:   libavcodec     54\. 12.100 / 54\. 12.100
20:11:36,158 DEBUG ~ FFMPEG:   libavformat    54\.  3.100 / 54\.  3.100
20:11:36,158 DEBUG ~ FFMPEG:   libavdevice    53\.  4.100 / 53\.  4.100
20:11:36,158 DEBUG ~ FFMPEG:   libavfilter     2\. 66.101 /  2\. 66.101
20:11:36,158 DEBUG ~ FFMPEG:   libswscale      2\.  1.100 /  2\.  1.100
20:11:36,158 DEBUG ~ FFMPEG:   libswresample   0\. 10.100 /  0\. 10.100
20:11:36,158 DEBUG ~ FFMPEG:   libpostproc    52\.  0.100 / 52\.  0.100
20:11:36,162 DEBUG ~ FFMPEG: Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'data/media/1/1/test.m4a':
20:11:36,162 DEBUG ~ FFMPEG:   Metadata:
20:11:36,162 DEBUG ~ FFMPEG:     major_brand     : mp42
20:11:36,162 DEBUG ~ FFMPEG:     minor_version   : 1
20:11:36,163 DEBUG ~ FFMPEG:     compatible_brands: mp42mp41
20:11:36,163 DEBUG ~ FFMPEG:     creation_time   : 2011-12-07 18:53:04
20:11:36,163 DEBUG ~ FFMPEG:   Duration: 00:00:24.20, start: 0.000000, bitrate: 40 kb/s
20:11:36,163 DEBUG ~ FFMPEG:     Stream #0:0(eng): Audio: aac (mp4a / 0x6134706D), 22050 Hz, stereo, s16, 39 kb/s
20:11:36,163 DEBUG ~ FFMPEG:     Metadata:
20:11:36,163 DEBUG ~ FFMPEG:       creation_time   : 2011-12-07 18:53:04
20:11:36,163 DEBUG ~ FFMPEG:       handler_name    : Apple Sound Media Handler
20:11:36,170 DEBUG ~ FFMPEG: [mpegts @ 0x7fe4c404d000] muxrate VBR, pcr every 4 pkts, sdt every 200, pat/pmt every 40 pkts
20:11:36,171 DEBUG ~ FFMPEG: Output #0, mpegts, to '/Users/Luuk/Documents/Java/idoms-server/data/media/1/2/encoded.mp3':
20:11:36,171 DEBUG ~ FFMPEG:   Metadata:
20:11:36,171 DEBUG ~ FFMPEG:     major_brand     : mp42
20:11:36,171 DEBUG ~ FFMPEG:     minor_version   : 1
20:11:36,171 DEBUG ~ FFMPEG:     compatible_brands: mp42mp41
20:11:36,171 DEBUG ~ FFMPEG:     creation_time   : 2011-12-07 18:53:04
20:11:36,171 DEBUG ~ FFMPEG:     encoder         : Lavf54.3.100
20:11:36,171 DEBUG ~ FFMPEG:     Stream #0:0(eng): Audio: mp3, 48000 Hz, stereo, s16, 64 kb/s
20:11:36,171 DEBUG ~ FFMPEG:     Metadata:
20:11:36,171 DEBUG ~ FFMPEG:       creation_time   : 2011-12-07 18:53:04
20:11:36,171 DEBUG ~ FFMPEG:       handler_name    : Apple Sound Media Handler
20:11:36,171 DEBUG ~ FFMPEG: Stream mapping:
20:11:36,171 DEBUG ~ FFMPEG:   Stream #0:0 -> #0:0 (aac -> libmp3lame)
20:11:36,171 DEBUG ~ FFMPEG: Press [q] to stop, [?] for help
20:11:36,673 DEBUG ~ FFMPEG: size=     109kB time=00:00:12.79 bitrate=  69.5kbits/s    
20:11:37,156 DEBUG ~ FFMPEG: size=     209kB time=00:00:24.24 bitrate=  70.7kbits/s    
20:11:37,156 DEBUG ~ FFMPEG: video:0kB audio:190kB global headers:0kB muxing overhead 10.301383% 
```

然后接下来是分段（0.10.2 版还不能同时进行）：

```
20:11:37,211 DEBUG ~ FFMPEG: ffmpeg version 0.10.2.git-d3d5e84 Copyright (c) 2000-2012 the FFmpeg developers
    20:11:37,212 DEBUG ~ FFMPEG:   built on May  2 2012 19:00:38 with clang 3.0 (tags/Apple/clang-211.10.1)
    20:11:37,212 DEBUG ~ FFMPEG:   configuration: --prefix=/opt/local --enable-gpl --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libxvid --enable-libx264 --enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm
    20:11:37,212 DEBUG ~ FFMPEG:   libavutil      51\. 44.100 / 51\. 44.100
    20:11:37,212 DEBUG ~ FFMPEG:   libavcodec     54\. 12.100 / 54\. 12.100
    20:11:37,212 DEBUG ~ FFMPEG:   libavformat    54\.  3.100 / 54\.  3.100
    20:11:37,212 DEBUG ~ FFMPEG:   libavdevice    53\.  4.100 / 53\.  4.100
    20:11:37,212 DEBUG ~ FFMPEG:   libavfilter     2\. 66.101 /  2\. 66.101
    20:11:37,212 DEBUG ~ FFMPEG:   libswscale      2\.  1.100 /  2\.  1.100
    20:11:37,212 DEBUG ~ FFMPEG:   libswresample   0\. 10.100 /  0\. 10.100
    20:11:37,212 DEBUG ~ FFMPEG:   libpostproc    52\.  0.100 / 52\.  0.100
    20:11:37,226 DEBUG ~ FFMPEG: [mpegts @ 0x7fccc2049800] max_analyze_duration 5000000 reached at 5016000
    20:11:37,226 DEBUG ~ FFMPEG: Input #0, mpegts, from '/Users/Luuk/Documents/Java/idoms-server/data/media/1/2/encoded.mp3':
    20:11:37,226 DEBUG ~ FFMPEG:   Duration: 00:00:24.12, start: 1.376978, bitrate: 71 kb/s
    20:11:37,226 DEBUG ~ FFMPEG:   Program 1 
    20:11:37,226 DEBUG ~ FFMPEG:     Metadata:
    20:11:37,226 DEBUG ~ FFMPEG:       service_name    : Service01
    20:11:37,226 DEBUG ~ FFMPEG:       service_provider: FFmpeg
    20:11:37,226 DEBUG ~ FFMPEG:     Stream #0:0[0x100](eng): Audio: mp3 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, s16, 64 kb/s
    20:11:37,226 DEBUG ~ FFMPEG: Output #0, segment, to '/Users/Luuk/Documents/Java/idoms-server/data/media/1/2/segment_%05d.mp3':
    20:11:37,226 DEBUG ~ FFMPEG:   Metadata:
    20:11:37,226 DEBUG ~ FFMPEG:     encoder         : Lavf54.3.100
    20:11:37,226 DEBUG ~ FFMPEG:     Stream #0:0(eng): Audio: mp3 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, 64 kb/s
    20:11:37,226 DEBUG ~ FFMPEG: Stream mapping:
    20:11:37,226 DEBUG ~ FFMPEG:   Stream #0:0 -> #0:0 (copy)
    20:11:37,226 DEBUG ~ FFMPEG: Press [q] to stop, [?] for help
    20:11:37,238 DEBUG ~ FFMPEG: size=       0kB time=00:00:24.28 bitrate=   0.0kbits/s    
    20:11:37,238 DEBUG ~ FFMPEG: video:0kB audio:190kB global headers:0kB muxing overhead -100.000000% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T17:09:08.300

这是 FFMPEG 中的一个错误。已提交错误：http: [//ffmpeg.org/trac/ffmpeg/ticket/1290](http://ffmpeg.org/trac/ffmpeg/ticket/1290)

# php - 如何将数组中的真假字符串解析为布尔值

> ID：10437960
> 
> 赞同：5
> 
> 时间：2012-05-03T19:18:47.183
> 
> 标签：php, arrays, boolean

如果它们存在，我如何解析数组中的`true`和字符串以变为布尔值？`false`

例如，

形式

```
$config = array(
    "allow_n" => "true",
    "allow_m" => "false",
    "say"     => "hello"
); 
```

到

```
$config = array(
    "allow_n" => true,
    "allow_m" => false,
    "say"     => "hello"
); 
```

是否可以？

**编辑：**

谢谢你们的帮助。

抱歉，我忘了从一开始就澄清 - 例如，这种情况可能发生在多维数组中，

```
$config = array(
    "allow_n" => "true",
    "allow_m" => "false",
    "say"     => "Hello",
    "php"   => array(
        "oop" => "true",
        "classic" => "false"
    )
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:24:30.640

你可以`array_walk_recursive`用来实现这一点：

例子

```
$config = array (
        "allow_n" => "true",
        "allow_m" => "false",
        "say" => "Hello",
        "php" => array (
                "oop" => "true",
                "classic" => "false" 
        ) 
);
var_dump ( $config );

array_walk_recursive ( $config, function (&$item) {
    if ($item == "true") {
        $item = true;
    } else if ($item == "false") {
        $item = false;
    } else if (is_numeric ( $item )) {
        $item = intval ( $item );
    }
} );

var_dump ( $config ); 
```

输出之前

```
'allow_n' => string 'true' (length=4)
  'allow_m' => string 'false' (length=5)
  'say' => string 'Hello' (length=5)
  'php' => 
    array
      'oop' => string 'true' (length=4)
      'classic' => string 'false' (length=5) 
```

输出后

```
 array
  'allow_n' => boolean true
  'allow_m' => boolean false
  'say' => string 'Hello' (length=5)
  'php' => 
    array
      'oop' => boolean true
      'classic' => boolean false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T19:21:28.810

```
foreach ($config as $k=>$v)
{
  $low_v = strtolower($v);
  if ($low_v == 'true')
    $config[$k] = true;
  else if ($low_v == 'false')
    $config[$k] = false; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T19:21:30.893

这是一个可以做到的循环

```
foreach ($config as $key => $val) {
    if ($val == 'true') {
        $config[$key] = true;
    } elseif ($val == 'false') {
        $config[$key] = false;
    }
} 
```

编辑：这是一个递归和处理多维数组的函数

```
function tfSwap($arr) {
    foreach ($arr as $key => $val) {
        if (is_array($val)) {
            $arr[$key] = tfSwap($val);
        } else {
            if ($val == 'true') {
                $arr[$key] = true;
            } elseif ($val == 'false') {
                $arr[$key] = false;
            }
        }
    }  
    return $arr;
} 
```

然后你可以这样称呼它：

```
$config = tfSwap($config); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T19:24:48.730

我确定还有其他解决方案，但是您应该能够使用该[`filter_var`](http://php.net/manual/en/function.filter-var.php)功能并传入`FILTER_VALIDATE_BOOLEAN`标志。这会给你一个单行而不是写出一个循环。:)

```
filter_var($config, FILTER_VALIDATE_BOOLEAN); 
```

// 编辑：与此处建议的相同：[如何在 PHP 中解析布尔逻辑字符串](https://stackoverflow.com/questions/2761215/how-to-parse-a-string-of-boolean-logic-in-php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-03T19:34:22.920

您还可以维护一个转换数组，并在遍历数组时查看那里。

```
$map = array("true" => true, "false"  => false);
foreach ($config as $key => $value) {
    if (array_key_exists($value, $map)) {
        $config[$key] = $map[$value];
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T20:38:00.473

我的方法是：

```
function boolify( $var ) {
    if( is_array( $var ) ) foreach( $var as $ek=>$ev ) $ret[$ek] = boolify( $ev );
    else if( $var === 'false' ) $ret = false;
    else if( $var === 'true' ) $ret = true;         
    else $ret = $var;
    return $ret;
}

$config = array(
    "allow_n" => "true",
    "allow_m" => "false",
    "say"     => "Hello",
    "php"   => array(
        "oop" => "true",
        "classic" => "false"
    )
);

$config = boolify( $config ); 

var_dump( $config );

// output: array(4) { ["allow_n"]=> bool(true) ["allow_m"]=> bool(false) ["say"]=> string(5) "Hello" ["php"]=> array(2) { ["oop"]=> bool(true) ["classic"]=> bool(false) } } 
```

# ios5 - 两个 iCloud 设备使用 NSMetaDataQuery 得到不同的结果

> ID：10437963
> 
> 赞同：3
> 
> 时间：2012-05-03T19:18:59.430
> 
> 标签：ios5, icloud, nsmetadataquery

我正在使用 iCloud 来存储带有简单 UIDocument 类的小音频文件。在 iPhone 4s 和 iPad 1 上运行 iOS 5.1。iPad 与 iCloud 容器正常通信。当我创建文档时，我看到它们从 iPhone 和 iPad 上的 Settings->iCloud->Storage&Backup->ManageStorage->MyAppName 弹出到 iCloud 商店。然而，iPhone 似乎正在连接到它自己的独立商店。我在那里创建的文件不会显示在任一设备的“设置”中，但似乎会转到某个容器。我可以在运行 NSMetaDataQuery 时看到它们（但我没有看到来自真实 iCloud 容器的文档）。

问题是如何开始的：当我第一次创建 iCloud 权利和容器标识符时，我省略了“com”。商店名称的前缀。这一直很好，直到我向 Apple 提交了应用程序更新，他们立即拒绝了上传，理由是 iCloud 容器标识符无效。更改标识符后，我的问题就开始了。我已经在两台设备上删除并重新加载了该应用程序，但 iPhone 仍然使用看似不可见的 iCloud 容器卡住。

请帮我让我的手机与真正的 iCloud 容器同步。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:54:24.093

这似乎是 iCloud 的 Apple 错误。我将 iPhone 4s 恢复为原始设置，现在一切正常。

# php - Zend 框架指定模块控制器目录实现？

> ID：10437965
> 
> 赞同：0
> 
> 时间：2012-05-03T19:19:18.830
> 
> 标签：php, zend-framework, controller, directory

我正在尝试为 zend 框架项目创建一个模块化结构，我想做的是创建一个看起来像这样的模块

```
docroot/
    index.php
application/
    default/
        controllers/
            IndexController.php
            FooController.php
        models/
        views/
            scripts/
                index/
                foo/
            helpers/
            filters/
    blog/
        controllers/
            IndexController.php
        models/
        views/
            scripts/
                index/
            helpers/
            filters/
    news/
        controllers/
            IndexController.php
            ListController.php
        models/
        views/
            scripts/
                index/
                list/
            helpers/
            filters/ 
```

阅读文档后我无法理解的是在哪里添加以下代码，或者我应该重构 /zendlibrary/Controller/front.php 吗？

```
$front->setControllerDirectory(array(
    'default' => '/path/to/application/controllers',
    'blog'    => '/path/to/application/blog/controllers'
)); 
```

或者

```
$front->addControllerDirectory('/path/to/application/news/controllers',
                               'news'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:00:41.300

你试过[Zend 工具吗](http://framework.zend.com/manual/en/zend.tool.framework.clitool.html)吗？

这很容易：

```
zf create module mymodule 
```

阅读更多关于 Akrabat[在 ZF 中发布的 Bootstrapping 模块](http://akrabat.com/zend-framework/bootstrapping-modules-in-zf-1-8/)的信息。

您可以使用命令行在模块内轻松创建控制器、操作、模型、表单。该工具将为您生成一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:29:57.210

首先，当我们这样做时，我们将模块放在**application/modules/**而不是 application/

在配置（application/configs/configuration.ini）中，你需要这样的东西：

```
[bootstrap]

Autoloadernamespaces[] = "Zend_"
Autoloadernamespaces[] = "default_"
Autoloadernamespaces[] = "blog_"
Autoloadernamespaces[] = "news_"

resources.frontController.moduleDirectory = APPLICATION_PATH "modules"
resources.frontController.defaultModule = "default"
resources.frontController.prefixDefaultModule = 1
resources.frontController.throwErrors = true

resources.modules[] = "default"
resources.modules[] = "blog"
resources.modules[] = "news"
resources.layout.layout = "layout"

resources.view.encoding = "UTF-8"
resources.view.basePath = APPLICATION_PATH "modules/default/views/" 
```

可能还有更多，让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:12:35.970

向引导程序添加方法可能是最简单的方法：

```
protected function _initFrontController()
{
    $front = Zend_Controller_Front::getInstance();
    $front->setControllerDirectory(array(
        'default' => APPLICATION_PATH.'/default/controllers',
        'blog'    => APPLICATION_PATH.'/blog/controllers'
    ));

    return $front;
} 
```

# logging - 在 Apache/mod_wsgi 下运行时如何取回 web.py 的标准输出日志？

> ID：10437967
> 
> 赞同：1
> 
> 时间：2012-05-03T19:19:21.123
> 
> 标签：logging, python-2.7, mod-wsgi, wsgi, web.py

我开发了一个 web.py 应用程序并在独立模式下对其进行了很多测试（从命令行运行 myapp.py），它的 stdout 输出对于调试非常有用。现在我在 Apache/mod_wsgi 下运行它，很多东西都不起作用。例如，我曾经有效的基本身份验证方案总是拒绝它给出的用户名/密码。我需要的第一件事是能够查看我曾经拥有的调试消息。但是找不到脚本的输出。

我怎样才能再次“调试打印”？

在解决这么多问题之前，我不想询问我的应用程序中的具体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:28:39.047

```
>>> class STDOUT(object):
    def __init__(self, next):
        self.next = next
        self.file = open('stdout.txt', 'w')
    def write(self, thing):
        self.file.write(thing)
        l.append(thing)
        self.next.write(thing)

>>> import sys
>>> s = STDOUT(sys.stdout)
>>> sys.stdout = s
>>> l = []
>>> print 4
4
>>> l
['4', '\n'] 
```

# jquery - 始终将 Div 元素定位在可调整大小和可拖动的第二个 Div 的中心

> ID：10437969
> 
> 赞同：0
> 
> 时间：2012-05-03T19:19:31.083
> 
> 标签：jquery, html, draggable, centering, resizable

我尝试了一些不同的 jQuery 居中插件，但似乎无法解决这个问题。基本上，我将三个 DIV 放置在彼此之上，如图所示：

-----（DIV 1 - 也拖动 DIV 3 的可拖动元素）

--------（DIV 2 - 包含透明图像 - 保持静止）

---------（DIV 3 - 包含使用 DIV 1 拖动但也可调整大小并可以旋转的图像）

所以基本上 DIV1 包含一个图像（移动图标），当拖动 DIV3 时，我需要 DIV1 中的图标始终位于 DIV3 的中心，无论 (3) 移动、调整大小或旋转的位置。我真的很感激任何帮助，似乎无法让任何东西正常工作。

小提琴：http: [//jsfiddle.net/EBNDf/1/](http://jsfiddle.net/EBNDf/1/)

谢谢，

肖恩

```
 <h1>Preview</h1>
                            <br>
                            <!-- Zoom Slider -->
                            <div id="zoomslider" style="float:left; width:55px; height:405px;">
                                    <div id="slider-vertical" style="height:100%; margin: auto auto;"></div>
                            </div>

                            <!--- Preview Container -->
                            <div id="previewcontainer" style="float:left; width:485px; height:405px;">

                                <div id="drag-overlay"></div>

                                <div id="background-overlay">
                                </div>  

                                    <!-- Loaded Face Image  -->
                                    <div id="loaded-image" class="preview ui-widget-content ui-draggable"></div>

                            </div>

                                <!-- Clear Fix -->
                                <div id="blank" style="float:left; width:55px; height:55px;"></div>

                            <!-- Rotate Slider -->
                            <div id="rotateslider" style="float:left; width:485px; height:55px;">
                                <br>
                                    <div id="slider" style="width:100%; margin: auto auto;"></div>
                            </div>                                  

                            <script>
                                //make resizable and rotate via slider
                                //make draggable
                                //get position of loaded-image
                                $("#drag-overlay").multiDraggable({ group: [$("#drag-overlay"),$(".preview") ]});

                                $("#slider-vertical").slider({
                                    orientation: "vertical",
                                    value: 50,
                                    max: 500,
                                    min: 100,
                                    slide: function(event, ui) {
                                        $( ".preview" ).width(ui.value);
                                        $( ".preview" ).height(ui.value);
                                 }
                                });

                                $("#slider").slider({
                                  min: 0, // degrees
                                  max: 360, // degrees
                                  slide: function(e, ui) {
                                    $('.preview').jangle(ui.value);
                                  },
                                  stop: function(e, ui) { // in case you out slide the slider
                                    $('.preview').jangle(ui.value);
                                  }
                                });

                                //center drag element onto loaded-image 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:59:25.810

我只是稍微改变了数学，不依赖于原始的 css 定位，而是完全动态的和实际的元素尺寸。

查看下面的代码，了解我所说的完全动态的示例。我已经使用 $drag_overlay 来“优化”您的选择，因此 dom 不会重复 document.getElementByIds。由于它是一个直接 ID，因此优化不会证明任何令人难以置信的性能提升，但一点点效率可以有很长的路要走:) 然而它确实对 $('.preview') 选择器有更实质性的影响 :)

```
var $drag_overlay = $('#drag-overlay'),
    $preview = $('.preview');

$drag_overlay.css({
    top : $preview.height() / 2 - $drag_overlay.height() / 4,
    left : $preview.width() / 2 - $drag_overlay.width() / 4   
}); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:19:35.723

终于让它工作了，如果有人需要它，你可以在这里查看小提琴：http: [//jsfiddle.net/EBNDf/12/](http://jsfiddle.net/EBNDf/12/)

也愿意接受更好的建议。

# android - 如何在大位图上绘制图标？

> ID：10437972
> 
> 赞同：1
> 
> 时间：2012-05-03T19:19:39.513
> 
> 标签：android, bitmap, icons, overlay, drawable

我是 android 开发的新手，我现在正在开发一个项目。这个项目是关于使用位图将图片加载到屏幕上。将图片加载到屏幕后，我想在加载的位图上添加一些图标/drawable，然后保存。

这是我用于将单个图像加载到屏幕的代码的一部分。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode){
    case SELECT_PICTURE_ACTIVITY_REQUEST_CODE:
        if (resultCode == RESULT_OK){
            Uri selectedImage = data.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};
            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn,
                    null, null, null);
            if (cursor.moveToFirst()){
                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                Bitmap bitmap = BitmapFactory.decodeFile(filePath);
                targetImage.setImageBitmap(bitmap);
            }
            cursor.close();
        }
        break;
    }
} 
```

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/background"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</ImageView> 
```

我的 xml 代码只包含一个，这意味着整个屏幕将用于显示我的图片。

现在，我面临一个问题，如何在我的位图上加载一些图标或可绘制然后保存它？我的选项菜单中有一个“添加”选项，我希望当我在选项菜单中按下“添加”按钮时，我的可绘制文件中有一个列表显示一些图标/可绘制对象，在我选择一个图标后，选定的图标将出现在我的原始位图图片之上。另外，我希望我可以将图标拖到任意位置，然后保存。

请给我一个帮助，这是非常紧急的！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:35:48.240

我不是 100% 确定您为什么要以这种方式解决问题。我认为将背景设置为主要可绘制对象的标准布局会更好，但我相信 LayerDrawable 是您正在寻找的。

```
Drawable[] layers = new Drawable[2];
layers[0] = bitmap;
layers[1] = icon;
... add more here

LayerDrawable layerDrawable = new LayerDrawable(layers);
targetImage.setImageDrawable(layerDrawable); 
```

# jquery - 更换手风琴看起来不像手风琴

> ID：10437973
> 
> 赞同：0
> 
> 时间：2012-05-03T19:19:42.190
> 
> 标签：jquery, jquery-ui

我想我在这里遗漏了一些简单的东西。最初手风琴看起来不错。我有一个替换手风琴的 Ajax 调用，但在替换后，它看起来不像手风琴。问题提炼如下。

小提琴：http: [//jsfiddle.net/tzerb/5nJH7/](http://jsfiddle.net/tzerb/5nJH7/)

HTML：

```
<div id="theAcc">
    <h3><a href="#">1</a></h3>
    <div>One</div>
    <h3><a href="#">2</a></h3>
    <div>Two</div>
    <h3><a href="#">3</a></h3>
    <div>Three</div>    
</div>

​&lt;button id="btnReplace">Replace</button>​​​​​​​​​​​​​​​​​​ 
```

Javascript：

```
$(function() {
    $( "#theAcc" ).accordion();
});

​$("#btnReplace").click(function() {
    $("#theAcc").html("<h3><a href='#'>A</a></h3><div>AAAA</div><h3><a href='#'>B</a></h3><div>BBBB</div><h3><a href='#'>C</a></h3><div>CCCC</div>");
});​​​​​​​​​​​​ 
```

任何反馈表示赞赏。

TIA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T19:29:12.447

这是一个更新的 jsFiddle，它具有您希望看到的行为：http: [//jsfiddle.net/5nJH7/5/](http://jsfiddle.net/5nJH7/5/)

更新后的代码是：

```
$(function() {
    $( "#theAcc" ).accordion();
});

$("#btnReplace").click(function() {
    $("#theAcc")
        .accordion("destroy");
        .html("<h3><a href='#'>A</a></h3><div>AAAA</div><h3><a href='#'>B</a></h3><div>BBBB</div><h3><a href='#'>C</a></h3><div>CCCC</div>")
        .accordion();
});​ 
```

您会看到这些问题，因为您已经部分破坏了手风琴绑定的 HTML 元素（单击事件等）。在进行替换之前拆下手风琴可能是获得预期行为的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:29:27.490

您可以将根据包装在另一个 div 中：

```
<div id="wrapper">    
<div id="theAcc">
        <h3><a href="#">1</a></h3>
        <div>One</div>
        <h3><a href="#">2</a></h3>
        <div>Two</div>
        <h3><a href="#">3</a></h3>
        <div>Three</div>    
    </div>
</div>
<button id="btnReplace">Replace</button>​​​​​​ 
```

这是你的新 jQuery：

```
$(function() {
    $( "#theAcc" ).accordion();
});

$("#btnReplace").click(function() {
    $("#wrapper").html("<div id='theAcc'><h3><a href='#'>A</a></h3><div>AAAA</div><h3><a href='#'>B</a></h3><div>BBBB</div><h3><a href='#'>C</a></h3><div>CCCC</div></div>");        $( "#theAcc" ).accordion();
});​ 
```

# java - 丰富：面板在标题中设置文本和 X（关闭）

> ID：10437982
> 
> 赞同：1
> 
> 时间：2012-05-03T19:20:58.360
> 
> 标签：java, jsf-2, richfaces

我正在尝试在rich:panel 的标题中设置一个文本**和**X（关闭）标签，但我一次只能一个。

示例：

[http://docs.jboss.org/richfaces/latest_4_0_X/Component_Reference/en-US/html/images/figu-Component_Reference-richpopupPanel-Header_and_controls.png](http://docs.jboss.org/richfaces/latest_4_0_X/Component_Reference/en-US/html/images/figu-Component_Reference-richpopupPanel-Header_and_controls.png)

但是这个例子是用rich:popupPanel 运行的，我需要在rich:panel 组件中实现。

我试过了：

```
<rich:panel>
      <f:facet name="header">
          <h:outputText value="Text Header here" />
      </f:facet>
   <f:facet name="controls">
       <h:outputLink value="#" onclick="#{rich:component('component')}.hide()return false;">
          <h:outputText value="X" />
       </h:outputLink>
   </f:facet> 
</rich:panel> 
```

和：

```
<rich:panel>
   <f:facet name="header">
           <h:outputText value="Text Header here" />
   </f:facet>
       <f:facet name="controls">
           <h:outputLink value="#" onclick="#{rich:component('component')}.hide(); return false;">
               X
           </h:outputLink>
       </f:facet>
</rich:panel> 
```

和其他人，但都没有工作

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:19:44.310

您可以尝试通过执行类似的操作来模拟相同的行为

```
<h:form id="frmTest">
    <rich:panel id="panelTest" style="width: 200px">
        <f:facet name="header">
            <h:outputText value="Text Header here" />
            <div style="position: relative; float: right;">
                <a4j:commandLink
                    onclick="document.getElementById('frmTest:panelTest').style.display='none'; return false;">
                    <h:outputText value="X" />
                </a4j:commandLink>
            </div>
        </f:facet> 
        <p>
            Some text here!
        </p>
    </rich:panel>
    <br />
    <a4j:commandLink onclick="document.getElementById('frmTest:panelTest').style.display='block'; return false;">
        <h:outputText value="Show panel" />
    </a4j:commandLink>
</h:form> 
```

# jquery - 随窗口调整大小的等高列

> ID：10437983
> 
> 赞同：0
> 
> 时间：2012-05-03T19:21:10.203
> 
> 标签：jquery, resize, height

我认为这个标记应该可以工作，但我一定做错了什么。我有两个 div，我希望它们具有相同的高度并在调整窗口大小时动态调整大小。当框内的文本换行时，其中一个框变得更高。

编辑：两个 div 并排，我希望较短的 div 调整为与较高的 div 相同的高度。如果用户有一个屏幕较小的设备或将窗口大小调整为更小，则会导致文本在一个框中换行。无论用户如何更改窗口大小，我都希望它们保持相同的高度。

JS

```
$(document).ready(function () {    
    $('div.subFeaturedContainer > section').each(function() {

        var $sameHeightChildren = $(this).find('.subFeatured');
        var maxHeight = 0;

        $sameHeightChildren.each(function() {
            maxHeight = Math.max(maxHeight, $(this).outerHeight());
        });

        $sameHeightChildren.css({ height: maxHeight + 'px' });

    });
}); 
```

HTML

```
<div class="subFeaturedContainer">
    <section class="subFeatured">
        <h2>Header</h2>
        <a href="#">Nam vel risus mauris, id lacinia nulla</a>
    </section>

    <section class="subFeatured">
        <h2>Header</h2>
        <a href="#">Donec tincidunt tellus ac dolor tristique blandit. Nam vel iaculis lorem.</a>
    </section>
</div> 
```

CSS

```
.subFeatured {
width: 43.5%;
float: left;
background: rgba(0, 0, 0, 0.7);
border-top: 1px solid #b1bdbe;
padding: 2% 3% 2% 3%;
}

.subFeatured:nth-child(even) {
float: right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:34:41.847

只需删除 `> section`：您没有使用第一个选择器找到 englobing 元素。

见[http://jsfiddle.net/dystroy/Pzm8k/](http://jsfiddle.net/dystroy/Pzm8k/)

此外，也许您也想使用 jquery $(window).resize 绑定函数调用您的函数，以便在调整窗口大小时这些部分保持相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T07:45:27.200

后期添加，但供将来参考，在较新的浏览器上，您可以使用它`flexbox`来实现这一点。

这是一个具有相同高度的 2 个 div 的示例（**[FIDDLE HERE](http://cssdesk.com/72Z3Z)**）

# HTML

```
<div class="container">
  <div class="col-1">
    <p>I'm column one</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>Here's my bottom text</p>
  </div>
  <div class="col-2">I'm just a small div</div>
</div> 
```

* * *

# CSS

```
.container {
  display: -webkit-flex;
  display: -ms-flex;
  display: flex;
} 
```

* * *

# 参考

*   **[flexbox 选项的综合列表](http://css-tricks.com/snippets/css/a-guide-to-flexbox/)**
*   **[浏览器支持（caniuse flexbox）](http://caniuse.com/#feat=flexbox)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:56:24.013

这很容易做到

```
 $(document).ready(function () { 

        maxHeight = 0;
        $('.subFeatured').each(function() {
            maxHeight = Math.max(maxHeight, $(this).outerHeight());
        });

        $('.subFeatured').css({ height: maxHeight + 'px' });  
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:22:20.280

这并不完美，但我最终使用了在这里找到的脚本：

[http://www.tutrino.com/2011/12/08/equal-height-columns-with-jquery-jxcol-plugin/](http://www.tutrino.com/2011/12/08/equal-height-columns-with-jquery-jxcol-plugin/)

# php - 有 facebook 和 windowslive openid 网址吗？

> ID：10437988
> 
> 赞同：2
> 
> 时间：2012-05-03T19:21:36.113
> 
> 标签：php, facebook, openid, lightopenid, windows-live

我阅读了[stackoverflow.com/questions/1827997/is-facebook-an-openid-provider](https://stackoverflow.com/questions/1827997/is-facebook-an-openid-provider.)问题。

我还阅读了[stackoverflow.com/questions/2264266/what-is-the-openid-url-of-facebook](https://stackoverflow.com/questions/2264266/what-is-the-openid-url-of-facebook)问题。但是这些问题是2年前问的，不知道facebook和windowslive openid有什么变化。

**openid 的**index.php在这里（从**[这里](http://qpleple.com/how-to-make-people-login-into-your-website-with-their-google-account/)下载 ）（我使用**lightopenid**）：**

 **```
<?php
require_once 'openid.php';
$openid = new LightOpenID("yourdomain.com");

$openid->identity = 'https://www.google.com/accounts/o8/id  ';
$openid->required = array(
'namePerson/first',
'namePerson/last',
'contact/email',
);
$openid->returnUrl = 'http://yourdomain.com/login.php'
?>

<a href="<?php echo $openid->authUrl() ?>">Login with Google</a> 
```

**我尝试并取得成功的**$openid->identity在这里：****

 **谷歌：[https ://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id)

谷歌个人资料：[http ://www.google.com/profiles/~YOURUSERNAME](http://www.google.com/profiles/~YOURUSERNAME)

雅虎：[https ://me.yahoo.com](https://me.yahoo.com)

美国在线：[https ://www.aol.com](https://www.aol.com)

WordPress : [http://YOURBLOG.wordpress.com](http://YOURBLOG.wordpress.com)

LiveJournal：[http ://www.livejournal.com/openid/server.bml](http://www.livejournal.com/openid/server.bml)

**我的问题是**：上面有关于 facebook 和 windowslive 的链接吗？我查看了 facebook 网站（developer.facebook.com），但它有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:32:05.993

[Facebook](http://developers.facebook.com/docs/concepts/login/)和 windowslive（[尽管他们宣布了](http://en.wikipedia.org/wiki/Microsoft_account#Support_for_OpenID)）仍然不是 OpenID 提供者。（截至发文时）****

# gcc - 重新加载“asm”时在“CREG”类中找不到寄存器 - memcpy inline asm

> ID：10437990
> 
> 赞同：1
> 
> 时间：2012-05-03T19:21:38.290
> 
> 标签：gcc, assembly, x86, inline-assembly

我正在尝试编译早期版本的 Linux，您可以从 git://github.com/azru0512/linux-0.12.git 下载源代码。在编译 ''kernel/blk_drv/ramdisk.c'' 时，我收到以下错误消息，

```
ramdisk.c:36:10: error: can't find a register in class 'CREG' while reloading 'asm'
ramdisk.c:40:10: error: can't find a register in class 'CREG' while reloading 'asm'
ramdisk.c:36:10: error: 'asm' operand has impossible constraints
ramdisk.c:40:10: error: 'asm' operand has impossible constraints 
```

ramdisk.c 中有什么，

```
 if (CURRENT-> cmd == WRITE) {
    (void) memcpy(addr,
            CURRENT->buffer,
            len);
  } else if (CURRENT->cmd == READ) {
    (void) memcpy(CURRENT->buffer,
            addr,
            len);
  } else
    panic("unknown ramdisk-command"); 
```

memcpy 是，

```
extern inline void * memcpy(void * dest,const void * src, int n)
{
__asm__("cld\n\t"
  "rep\n\t"
  "movsb"
  ::"c" (n),"S" (src),"D" (dest)
  :"cx","si","di");
return dest;
} 
```

我猜这是 memcpy (include/string.h) 内联 asm 问题，所以我从中删除了 clobber 列表，但没有运气。你能帮我找出问题所在吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:34:35.433

GCC 的语法已经改变/进化了一点。

您现在必须将每个特殊目标寄存器指定为输出操作数：

```
...("...instructions..."
   : "=c"(n), "=S"(src), "=D"(dest) 
```

然后另外作为与源操作数*相同*的寄存器：

```
 : "0"(n), "1"(src), "2"(dest) 
```

最后你需要破坏“内存”（如果这会影响条件代码，我不记得了，如果是这样你还需要“cc”）：

```
 : "memory") 
```

接下来，由于不应移动或删除此指令，因此您需要使用`volatile`or `__volatile__`（我不完全确定为什么，但在我的测试用例中，如果没有此指令，则说明已被删除）。

最后，尝试覆盖不再是一个好主意，`memcpy`因为 gcc“知道”如何实现该功能。你可以用`-fno-builtin`.

这可以编译（无论如何，对我来说，在 x86-64 机器上使用有点旧的 gcc）：

```
extern inline void * memcpy(void * dest,const void * src, int n)
{
    __asm__ volatile("cld\n\t"
        "rep\n\tmovsb\n\t"
        : "=c" (n), "=S" (src), "=D" (dest)
        : "0" (n), "1" (src), "2" (dest)
        : "memory", "cc");
    return dest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:56:24.140

这个确切的问题及其原因在 GCC 的 bugzilla 上进行了讨论：

[错误 43998 - 内联汇编程序：无法为输入寄存器设置破坏](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43998)

gcc 不允许输入和输出寄存器作为破坏者。如果您损坏了输入寄存器，请对同一寄存器执行虚拟输出：

```
unsigned int operation;
unsigned int dummy;
asm ("cpuid" : "=a" (dummy) : "0" ( operation) :); 
```

# linux - 自定义 Linux 内核中内置的 Initramfs 未运行

> ID：10437995
> 
> 赞同：23
> 
> 时间：2012-05-03T19:22:08.077
> 
> 标签：linux, linux-kernel

我正在构建一个自定义 initramfs 映像，我将其作为 CPIO 存档构建到 Linux 内核 (3.2) 中。

我遇到的问题是，无论我尝试什么，内核似乎都没有尝试从 initramfs 运行。

我在 CPIO 存档中的文件：

```
cpio -it < initramfs.cpio
.
init
usr
usr/sbin
lib
lib/libcrypt.so.1
lib/libm.so
lib/libc.so.6
lib/libgcc_s.so
lib/libcrypt-2.12.2.so
lib/libgcc_s.so.1
lib/libm-2.12.2.so
lib/libc.so
lib/libc-2.12.2.so
lib/ld-linux.so.3
lib/ld-2.12.2.so
lib/libm.so.6
proc
sbin
mnt
mnt/root
root
etc
bin
bin/sh
bin/mknod
bin/mount
bin/busybox
sys
dev
4468 blocks 
```

初始化非常简单，应该只初始化设备并生成一个 shell（现在）：

```
#!/bin/sh

mount -t devtmpfs none /dev
mount -t proc none /proc
mount -t sysfs none /sys
/bin/busybox --install -s
exec /bin/sh 
```

在内核 .config 我有：

```
CONFIG_INITRAMFS_SOURCE="../initramfs.cpio"
CONFIG_INITRAMFS_ROOT_UID=0
CONFIG_INITRAMFS_ROOT_GID=0
CONFIG_BLK_DEV_INITRD=y
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_COUNT=1
CONFIG_BLK_DEV_RAM_SIZE=32768 
```

内核构建和 uImage 大小取决于 initramfs 大小，所以我知道图像正在被打包。但是，当我启动时，我得到了这个输出：

```
console [netcon0] enabled
netconsole: network logging started
omap_rtc omap_rtc: setting system clock to 2000-01-02 00:48:38 UTC (946774118)
Warning: unable to open an initial console.
Freeing init memory: 1252K
mmc0: host does not support reading read-only switch. assuming write-enable.
mmc0: new high speed SDHC card at address e624
mmcblk0: mmc0:e624 SU08G 7.40 GiB
 mmcblk0: p1
Kernel panic - not syncing: Attempted to kill init!
[<c000d518>] (unwind_backtrace+0x0/0xe0) from [<c0315cf8>] (panic+0x58/0x188)
[<c0315cf8>] (panic+0x58/0x188) from [<c0021520>] (do_exit+0x98/0x6c0)
[<c0021520>] (do_exit+0x98/0x6c0) from [<c0021e88>] (do_group_exit+0xb0/0xdc)
[<c0021e88>] (do_group_exit+0xb0/0xdc) from [<c0021ec4>] (sys_exit_group+0x10/0x18)
[<c0021ec4>] (sys_exit_group+0x10/0x18) from [<c00093a0>] (ret_fast_syscall+0x0/0x2c) 
```

从该输出来看，它看起来甚至没有尝试将 CPIO 存档提取为 initramfs。我希望看到这个 printk 输出，它存在于 linux 代码 init/initramfs.c 中：

```
printk(KERN_INFO "Trying to unpack rootfs image as initramfs...\n"); 
```

一旦启动完成（使用chroot），我就尝试了文件系统，它工作正常......所以我相信文件系统/库是理智的。

谁能给我一些关于我可能不正确的指示？提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-04T18:34:03.090

我想到了。如果其他人有这个问题，我会发布答案。

我错过了一个控制台设备，这条线是线索：

```
Warning: unable to open an initial console. 
```

添加 printk 以便我更好地了解启动顺序后，我意识到控制台设备在运行 init 脚本之前已打开。因此，控制台设备必须直接在 initramfs 文件系统中，我们不能依赖 devtmpfs 挂载来创建它。

我认为当 init 脚本运行时，shell 试图打开控制台并失败，这就是内核输出的原因：

```
Kernel panic - not syncing: Attempted to kill init! 
```

从内核构建机器上的 initramfs 的 /dev 目录中执行以下命令将生成所需的设备节点：

```
mknod -m 622 console c 5 1
mknod -m 622 tty0 c 4 0 
```

在重新 CPIO 归档文件系统并重建内核之后，我终于在 initramfs 中有一个工作文件系统，内核将启动它。

# javascript - jQuery Mobile changePage 显示透明

> ID：10437998
> 
> 赞同：1
> 
> 时间：2012-05-03T19:22:20.687
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试使用 jQuery Mobile 转换到新页面，但是每次我这样做时，新页面都会显示在旧页面的顶部，并且只会使旧页面黯然失色。我知道它应该覆盖，但我知道我不能同时看到这两页。

这是我的 JavaScript 代码

```
<script>
$(document).bind('pageinit', function() {
    $("#page2 *").swipeleft(function(event) {
        $.mobile.changePage("page3.html", {
            transition : "slideup"
        });
    });

    $("#page2 *").swiperight(function(event) {
        $.mobile.changePage("page1.html", {
            transition : "slideup"
        });
    });
});
</script> 
```