# StackOverflow 问答 11581000-11581999

# android - 图片不会保存在三星 Nexus 上

> ID：11581013
> 
> 赞同：0
> 
> 时间：2012-07-20T14:06:11.500
> 
> 标签：android

我有个问题。我从我自己的应用程序开始，即带有 Photo-Intent 的内置 Photoapplication。

```
 String photoName = System.currentTimeMillis() + ".jpg"; 

        File file = new File(getFilesDir(),//Environment.getExternalStoragePublicDirectory(
                //Environment.DIRECTORY_DCIM),
                photoName); // Anlegen der Datei im entsprechenden
                            // Verzeichnis
        FileOutputStream fos = null;
        try {
            fos = openFileOutput(photoName, Context.MODE_WORLD_WRITEABLE);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            fos.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        outputFileUri = Uri.fromFile(file);
        intentPhoto.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
        //startActivity(intentPhoto);
        startActivityForResult(intentPhoto, TAKE_PICTURE); 
```

这是我启动活动的代码。正如你所看到的，我做的第一件事是在目录中设置文件，然后给意图文件的位置来存储它。

但每次我拍照时，它都不会保存到图片目录中。保存图片的唯一方法是关闭手机并重新启动。然后我以前拍的每张照片都在那里。这是自上次更新到 4.1.1 后发生的。在我更新手机之前，一切正常，但自从更新后我遇到了这个问题。

有人可以帮助我吗？有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:45:32.160

确保您提供要扫描的新文件：

```
MediaScannerConnection.scanFile(this,
          new String[] { file.toString() }, null,
          new MediaScannerConnection.OnScanCompletedListener() {
      public void onScanCompleted(String path, Uri uri) {
          // code to execute when scanning is complete
      }
 }); 
```

如果您不需要在扫描仪拾取它时收到通知，您可以为 OnScanCompletedListener 传入一个空参数，但您可能希望至少在其中放置一个日志记录语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:28:03.257

现在工作正常，问题是我自己创建了文件，其中：

```
File file = new File(..); 
```

但是你必须使用：

```
ContentValues values = new ContentValues();
values.put(MediaStore.Images.Media.TITLE, "IMG_"+ timeStamp+.jpg"); 
```

并将其放入意图立即保存文件而无需重新启动手机。

# mysql - Net::SSH::Service::Forward::UNIXServer

> ID：11581019
> 
> 赞同：0
> 
> 时间：2012-07-20T14:06:29.643
> 
> 标签：mysql, ruby, rubygems

我正在尝试使用 Net::SSH:Gateway gem，但没有任何运气。我正在执行这个：

```
gateway = Net::SSH::Gateway.new(
ssh_host,
user,
:port => ssh_port,
:keys => keys,
:passphrase => passphrase)
port = gateway.open(ssh_host, 3036,3037) 
```

但是会弹出这个错误：

```
C:/Programs/Ruby193/lib/ruby/gems/1.9.1/gems/net-ssh-2.5.2/lib/net/ssh/service/forward.rb:60:in `local': uninitialized constant Net::SSH::Service::Forward::UNIXServer (NameError)
from C:/Programs/Ruby193/lib/ruby/gems/1.9.1/gems/net-ssh-gateway-1.1.0/lib/net/ssh/gateway.rb:127:in `block in open'
from <internal:prelude>:10:in `synchronize'
from C:/Programs/Ruby193/lib/ruby/gems/1.9.1/gems/net-ssh-gateway-1.1.0/lib/net/ssh/gateway.rb:126:in `open'
from C:/Users/Joker/RubymineProjects/test/asd3.rb:26:in `<top (required)>'
from -e:1:in `load'
from -e:1:in `<main>' 
```

有没有人看到这个，你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:48:45.137

我已经多次看到这一点。我不知道这是否能解决您的问题，但我经常需要插入：

Net::SSH::Service::Forward::UNIXServer = nil

甚至让脚本运行。让我知道这是否有帮助。

另外，我要指出，如果您使用 MySQL，我相信默认端口是 3306，而不是 3036。

我尝试通过 SSH 隧道连接到 MySQL 数据库的尝试没有成功，所以祝你好运。我可能会切换到 ODBC/RBI 方法

# ruby-on-rails - Sqlite3 到 Postgresql 的迁移通过在 pull 时点击错误

> ID：11581024
> 
> 赞同：1
> 
> 时间：2012-07-20T14:06:41.010
> 
> 标签：ruby-on-rails, postgresql, taps

我正在尝试将我的 sqlite3 数据库迁移到 Postgresql（我正在关注 Railscasts #342，但我在 ubuntu 上）。在`rake db:create:all`我的`aperitime_development`数据库上之后，我用 Taps 启动了一个 Sinatra 服务器（推送 mi sqlite3 db），但是当我尝试做

```
taps pull postgres://willy:piero@localhost/aperitime_development http://willy:ciao@localhost:5000' 
```

数据未在 postgres db 上复制，并且控制台未正确终止：

```
Receiving schema
Schema:          0% |                                          | ETA:  --:--:--
Schema:         25% |==========                                | ETA:  00:00:07
Schema:         50% |=====================                     | ETA:  00:00:03
Schema:         75% |===============================           | ETA:  00:00:01
Schema:        100% |==========================================| Time: 00:00:04
Receiving data
4 tables, 800 records
/usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in 'async_exec': PG::Error: ERROR:  integer out of range (Sequel::DatabaseError)
from /usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block (2 levels) in execute'
from /usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/database/logging.rb:28:in `log_yield'
from /usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block in execute'
from /usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:158:in `check_disconnect_errors'
from /usr/lib/ruby/gems/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `execute' 
```

错误还在继续。

有任何想法吗？

那是我的 database.yml

```
development:
adapter: postgresql
encoding: unicode
database: aperitime_development
pool: 5
username: willy
password: piero

test:
adapter: postgresql
encoding: unicode
database: aperitime_test
pool: 5
username: willy
password: piero 
```

这是我的 schema.rb

```
ActiveRecord::Schema.define(:version => 20120630154954) do

create_table "locals", :force => true do |t|
t.string   "nome"
t.string   "indirizzo"
t.text     "descrizione"
t.integer  "Tel", :limit => 8
t.integer  "voto"
t.string   "mappa"
t.datetime "created_at",  :null => false
t.datetime "updated_at",  :null => false
end

create_table "users", :force => true do |t|
t.string   "nome"
t.string   "email"
t.datetime "created_at",                         :null => false
t.datetime "updated_at",                         :null => false
t.string   "password_digest"
t.string   "remember_token"
t.boolean  "admin",           :default => false
end

add_index "users", ["email"], :name => "index_users_on_email", :unique => true
add_index "users", ["remember_token"], :name => "index_users_on_remember_token"

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:26:32.287

> 当您声明该列时，这是您迁移中的魔法咒语：

```
create_table :example do |t|  
 t.integer :field, :limit => 8 
end 
```

这

> :limit => 8 在这种情况下是神奇的，因为当你只说整数时，postgres 只做有符号的 4 字节整数。这使用 8 字节有符号整数。
> 
> 保罗·鲁贝尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:32:30.337

Tel 列设置为整数，您的一些数据溢出了 postgresql 的整数类型 通常我看到电话号码作为字符串存储在数据库中。因为在某些时候你可能需要一个不能作为 int 工作的扩展或类似的东西。

要将现有表从整数更改为 posgresql 中的字符变化，您可以使用以下内容创建迁移。

```
def up 
    execute <<-SQL
        ALTER TABLE locals ALTER COLUMN Tel type character varying(255)
    SQL
end 
```

这应该将列类型更改为 rails 默认字符串表示形式。它还应该转换现有的整数。但一定要测试。

# java - 服务器端的axis2标头

> ID：11581033
> 
> 赞同：0
> 
> 时间：2012-07-20T14:07:04.547
> 
> 标签：java, web-services, soap, header, axis2

在服务器端，可以获取请求对象，并在业务逻辑向客户端返回响应后。下面是从客户端获取请求并返回响应的服务器端函数。如何在服务器端获取客户端请求标头？我想看看那些标题。

```
public String findPerson(FindPersonRequest findPersonaRequest) {

    System.out.println("clientRequest = " + clientRequest);
    ..........
    return response;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:09:52.593

我相信[MessageContext](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/context/MessageContext.html)是您正在寻找的...

[这里](http://amilachinthaka.blogspot.de/2008/11/accessing-axis2-information-at-client.html)还有一个简短的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:41:52.650

如果您想查看带有标题的完整消息，为什么不使用 Eclipse TCP/IP 监视器？在这里，简单的教程：

[http://www.mkyong.com/webservices/jax-ws/how-to-trace-soap-message-in-eclipse-ide/](http://www.mkyong.com/webservices/jax-ws/how-to-trace-soap-message-in-eclipse-ide/)

# python - 我如何（使用 python）正确创建 ctypes 结构并将其传递给 WER API 函数？

> ID：11581038
> 
> 赞同：0
> 
> 时间：2012-07-20T14:07:12.210
> 
> 标签：python, windows, ctypes, windows-error-reporting

首先，我发现了以下两个类似的问题：

[在python ctypes中将结构传递给Windows API](https://stackoverflow.com/questions/7909090/passing-structure-to-windows-api-in-python-ctypes)

[ctypes 并通过引用传递一个函数](https://stackoverflow.com/questions/7530473/ctypes-and-passing-a-by-reference-to-a-function)

第一个没有公认的答案，我*认为*我没有在单独的进程中做任何事情。第二个简单地指出了pointer() 和byref()，这两个我都试过没有用。

现在，关于我的问题：

我试图用我自己的 pReportInformation 调用函数 WERReportCreate （这是一个指向其第一个数据值是它自己的大小的结构的指针）。这会以各种方式失败，具体取决于我的处理方式，但我不确定如何正确执行。由于其中一个要求是结构知道它自己的大小，我不确定如何以编程方式确定（尽管如果这是唯一的问题，我想我现在已经猜到了正确的值，这一事实使情况变得复杂） ）。WER API 的相关信息如下所示：

```
HRESULT WINAPI WerReportCreate(
  __in      PCWSTR pwzEventType,
  __in      WER_REPORT_TYPE repType,
  __in_opt  PWER_REPORT_INFORMATION pReportInformation,
  __out     HREPORT *phReportHandle
); 
```

（完整信息在[http://msdn.microsoft.com/en-us/library/windows/desktop/bb513625%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb513625%28v=vs.85%29.aspx)）

```
typedef struct _WER_REPORT_INFORMATION {
  DWORD  dwSize;
  HANDLE hProcess;
  WCHAR  wzConsentKey[64];
  WCHAR  wzFriendlyEventName[128];
  WCHAR  wzApplicationName[128];
  WCHAR  wzApplicationPath[MAX_PATH];
  WCHAR  wzDescription[512];
  HWND   hwndParent;
} WER_REPORT_INFORMATION, *PWER_REPORT_INFORMATION; 
```

（完整信息在[http://msdn.microsoft.com/en-us/library/windows/desktop/bb513637%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb513637%28v=vs.85%29.aspx)）

这是我尝试过的代码：

```
import ctypes
import ctypes.wintypes

class ReportInfo( ctypes.Structure):
    _fields_ = [ ("dwSize", ctypes.wintypes.DWORD),
                 ("hProcess", ctypes.wintypes.HANDLE),
                 ("wzConsentKey", ctypes.wintypes.WCHAR * 64),
                 ("wzFriendlyEventName", ctypes.wintypes.WCHAR * 128),
                 ("wzApplicationName", ctypes.wintypes.WCHAR * 128),
                 ("wzApplicationPath", ctypes.wintypes.WCHAR * ctypes.wintypes.MAX_PATH),
                 ("wzDescription", ctypes.wintypes.WCHAR * 512),
                 ("hwndParent", ctypes.wintypes.HWND) ]

def genReportInfo():
    import os
    size = 32 #Complete SWAG, have tried many values
    process = os.getpid()
    parentwindow = ctypes.windll.user32.GetParent(process)
    werreportinfopointer = ctypes.POINTER(ReportInfo)
    p_werinfo = werreportinfopointer()
    p_werinfo = ReportInfo(size, process, "consentkey", "friendlyeventname", "appname", "apppath", "desc", parentwindow)
    return p_werinfo

if __name__ == '__main__':
    reporthandle = ctypes.wintypes.HANDLE()
    res = ctypes.wintypes.HRESULT()

            ### First pass  NULL in as optional parameter to get default behavior ###
    p_werinfo = None
    res = ctypes.windll.wer.WerReportCreate(u'pwzEventType', 2, p_werinfo, ctypes.byref(reporthandle))
    print "Return Code",res,"\nHandle",reporthandle #Return Code 0, reporthandle is correct (verified by submitting report in a different test)

    p_werinfo = genReportInfo() # Create our own struct

            ### Try Again Using Our Own Struct (via 'byref')  ###      
    res = ctypes.windll.wer.WerReportCreate(u'pwzEventType', 2, ctypes.byref(p_werinfo), ctypes.byref(reporthandle))
    print "Return Code",res,"\nHandle",reporthandle #Return Code Nonzero, reporthandle is None

            ### Try Again Using Our Own Struct (directly)  ###
    res = ctypes.windll.wer.WerReportCreate(u'pwzEventType', 2, p_werinfo, ctypes.byref(reporthandle))
    print "Return Code",res,"\nHandle",reporthandle #Exception Occurs, Execution halts 
```

这是我得到的输出：

```
Return Code 0
Handle c_void_p(26085328)
Return Code -2147024809
Handle c_void_p(None)
Traceback (most recent call last):
  File "test.py", line 40, in <module>
    res = ctypes.windll.wer.WerReportCreate(u'pwzEventType', s.byref(reporthandle))
WindowsError: exception: access violation writing 0x0000087C 
```

当我传入一个空值时它起作用，但当我实际传递我的（引用我的？）结构时它不起作用的事实表明我遇到了三个问题之一：我没有正确创建结构（我不确定wzConsentKey 定义正确），或者我没有正确计算出结构的大小（我实际上使用 struct.calcsize 和各种选项来获得初始猜测，并随机加减 1），或者我没有正确传递（参考到？）结构。

这是我遇到死胡同的地方。任何帮助将不胜感激（以及如何提高我的问题的清晰度、格式或质量的建议；这是我的第一篇文章）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:03:41.610

对发布的问题的一般简短回答是：确保将正确的信息放入结构中，除此之外，提供的代码是创建和传递结构的一个很好的例子。这是专门解决我的问题的方法：

提供的代码存在两个问题：首先，正如 Mark Tolonen 所指出的，我传递的大小不正确。使用 ctypes.sizeof(ReportInfo) 解决了这个问题。第二个问题是我使用了需要进程句柄的进程 ID。使用 OpenProcess 获取有效的进程句柄来代替我的“进程”参数解决了第二个问题。

对于将来调试类似问题的任何人，将 HRESULTS 打印为十六进制数字而不是整数，以便更好地理解返回码：

```
print "Return Code %08x" % (res & 0xffffffff) 
```

就我而言，这产生了以下结果：

```
Return Code 80070057 
```

对于我原来的错误，和

```
Return Code 80070006 
```

对于第二个错误。使用[http://msdn.microsoft.com/en-us/library/bb446131.aspx](http://msdn.microsoft.com/en-us/library/bb446131.aspx)上的信息，我看到前半部分是元数据，后半部分是我的实际错误代码。将十六进制数的错误代码部分转换回十进制后，我使用[http://msdn.microsoft.com/en-us/library/bb202810.aspx](http://msdn.microsoft.com/en-us/library/bb202810.aspx)确定

错误代码 87（十六进制中的 57）表示“参数不正确”（大小错误）和

错误代码 6（十六进制中的 6）表示“句柄无效”（我正在传递进程 ID）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T02:08:09.370

您可以使用`ctypes.sizeof(ReportInfo)`来获取结构的大小（以字节为单位）。

只需`ReportInfo`使用`genReportInfo`. 此时您不需要指针：

```
def genReportInfo():
    import os
    size = ctypes.sizeof(ReportInfo)
    process = os.getpid()
    parentwindow = ctypes.windll.user32.GetParent(process)
    return ReportInfo(size, process, "consentkey", "friendlyeventname", "appname", "apppath", "desc", parentwindow) 
```

像这样打电话`WerReportCreate`。`byref`将指针传递给`ReportInfo`实例。

```
werinfo = genReportInfo()
res = ctypes.windll.wer.WerReportCreate(u'pwzEventType', 2, ctypes.byref(werinfo), ctypes.byref(reporthandle)) 
```

我认为这对你有用。我没有，`wer.dll`所以无法测试。

# sql - 查询中的舍入错误？

> ID：11581042
> 
> 赞同：2
> 
> 时间：2012-07-20T14:07:21.630
> 
> 标签：sql, sql-server-2008, tsql

我被卡住了......为什么这两个查询返回不同的结果？

```
declare @div varchar
set @div = cast(4/3.0 as varchar) 
select @div
-- returns 1 

select cast(4/3.0 as varchar)
-- returns 1.3333 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T14:09:41.773

因为您声明 varchar 没有长度。IE

```
declare @div varchar 
```

是相同的

```
declare @div varchar(1) 
```

# macos - NSShadow 绘图错误

> ID：11581045
> 
> 赞同：1
> 
> 时间：2012-07-20T14:07:29.513
> 
> 标签：macos, cocoa, core-graphics, calayer, nsshadow

嗨，在我的应用程序中，我有一个带有 CALayer 的自定义视图（我将它用于过渡动画），在该视图中我添加了一些子视图，其中一个是带有 NSTableView 的视图。NSTableView 的每个单元格都用阴影绘制它的内容。像这样的代码：

```
NSShadow* shadow = [[NSShadow alloc] init];
[shadow setShadowOffset:NSMakeSize(2.0, -2.0)];
[shadow setShadowBlurRadius:2.0];
[shadow setShadowColor:[[NSColor blackColor] colorWithAlphaComponent:0.3]];
[shadow set];

[self.stringValue drawInRect:NSMakeRect(x, y, w - 60, h) withAttributes:attributes]; 
```

当我的 NSTableView 在 CALayer 开启的情况下少于约 50 行时，或者当我在 IB 中关闭 CALayer 时，我会像这样绘制单元格：http: [//i.stack.imgur.com/zMxmK.png](http://i.stack.imgur.com/zMxmK.png)

但是当我的 NSTableView 有超过 50 行并且我在 IB 中打开 CALayer 时，我会像这样绘制单元格：http: [//i.stack.imgur.com/IMyIP.png](http://i.stack.imgur.com/IMyIP.png)

怎么会这样？我打破了我的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:17:32.070

*   尝试更改`-2.0`为`+2.0`取决于`[[NSGraphicsContext currentContext] isFlipped]`属性。
*   尝试根据视图是否分层以及 CALayer 是否打开来更改它`isGeometryFlipped`。
*   如果您应用了翻转转换，请注意它们不会影响 NSShadow：

    > 阴影总是在默认的用户坐标空间中绘制，而不管对该空间应用的任何变换。这意味着当前变换矩阵（CTM）的旋转、平移和其他变换不会影响生成的阴影。考虑这一点的另一种方法是，对 CTM 的更改不会移动或更改阴影光源的表观位置。

# redirect - 在屏幕中使用远程（分离）命令执行中的 stdout/stderr 而无需文件访问

> ID：11581048
> 
> 赞同：1
> 
> 时间：2012-07-20T14:07:44.197
> 
> 标签：redirect, ssh, stdout, gnu-screen, lxc

我在 Linux 机器上的单独 GNU 屏幕会话中运行隔离的 bash 控制台（在 Linux 容器/网络名称空间的上下文中）。

我可以使用 ssh 和屏幕功能在这些控制台上远程执行命令，正如在其他几个线程中讨论的那样，使用：

```
ssh <hostname> screen -S <sessionname> -X <cmd> 
```

我还可以依靠硬拷贝功能（`screen -S <sessionname> -X hardcopy`）或日志功能（`screen -S <sessionname> -l`）运行上述命令来获取输出，但是这些都需要文件访问。当输出重定向到日志文件（例如使用“> logfile.txt”）等时，也会发生类似的事情。

有没有办法在重定向执行命令的输出时避免文件访问？这将减少执行机器上的文件访问压力。我想将从屏幕会话中运行的 stdout/stderr 数据重定向到调用环境，以便在执行时在屏幕上返回输出`ssh <hostname> screen -S <sessionname> ... <magiccommand>`。

有什么建议么？

# visual-studio-2010 - 自定义控件的 FxCop 自定义规则

> ID：11581052
> 
> 赞同：1
> 
> 时间：2012-07-20T14:07:49.853
> 
> 标签：visual-studio-2010, c#-4.0, fxcop

在我的项目中，我使用自定义控件而不是普通的 ASP.NET 控件。我们已经在 .NET 上构建了一个体系结构并正在使用它的控件。

现在我需要编写一个自定义规则来检查是否正在使用某些 Windows 控件。原因是，我的团队需要仅限于我旨在替换 Windows 控件的自定义控件。

示例：我需要搜索，如果他们正在使用 System.Windows.Controls.Textbox .....我需要它是一个错误。

谁能帮我写代码？

我希望问题很清楚.....如果需要进一步澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:54:34.133

[NDepend](http://www.ndepend.com/)工具让我们在 .NET 代码上编写自定义代码规则比使用 FxCop 更容易。*免责声明：我是该工具的开发人员之一*

使用此工具，您可以在 LINQ 查询（称为[CQLinq](http://www.ndepend.com/Features.aspx#CQL)）上编写自定义代码规则。例如，您要查询的查询可以用 CQLinq 以这种方式编写：

```
// <Name>Don't use system controls</Name>
warnif count > 0

let systemControls = ThirdParty.Types.Where(
          t => t.DeriveFrom("System.Windows.Forms.Control".AllowNoMatch()))
where systemControls.Count() > 0

from t in systemControls 
let methodsThatCreateT = t.TypesUsingMe.ChildMethods().Where(m => m.CreateA(t))
select new { t, methodsThatCreateT } 
```

在编辑此类代码规则时，会立即显示可浏览的结果（此处为*3 毫秒*）。双击此结果中的任何类型或方法，将跳转到 Visual Studio 源代码中的声明：

![CQLinq 不使用系统控件](../Images/c9abddcf6f9797d52bc5f87aa0fe9b90.png)

[提出了200 条默认代码规则](http://www.ndepend.com/DefaultRules/webframe.html)。该工具 100% 集成在 Visual Studio 2012、2010 和 2008 中。*默认或自定义*代码规则可以[在 Visual Studio 中验证](http://www.ndepend.com/Doc_VS_CQL.aspx)，和/或在构建过程时，在[生成的 HTML+javascript 报告](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:43:49.220

这种规则的逻辑相当简单：

1.  检查方法体，访问每个构造函数调用以查看目标类是否继承自基 Control 类。
2.  如果是，请验证目标类是否在您的命名空间或程序集中（或者您最好将其标识为“您的”）。

这个比较简单。一个更大的问题是，通常会在设计器生成的代码中调用相关的构造函数，而大多数人在执行 FxCop 时倾向于忽略这些代码。要使您的规则生效，您需要在分析中包含设计器生成的代码。

# php - 如何使用 AJAX 自动更新小部件？

> ID：11581057
> 
> 赞同：0
> 
> 时间：2012-07-20T14:08:08.307
> 
> 标签：php, ajax

我不希望有完整的例子，我只是需要一个开始的方向。

因此，为了解释我想要做什么，我有一个应用程序，用户可以在其中登录、注销、添加内容、在站点中执行操作等。我想知道是否可以使用 PHP 和 AJAX 制作一个自动的小部件像这样的更新：

*   有人登录...
*   有人加了照片...
*   ETC..

我只想要一个指导方针或方向，我将如何制作自动更新和提取数据/操作/等的实时小部件。它会是时间间隔更新吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:13:31.120

您可以使用`setTimeout()`javascript 方法每 X 毫秒触发一次小部件的重新加载。

```
var delay = 5000; // 5 seconds
setTimeout('refresh();', delay );
function refresh(){
   doAjaxCall(); // ajax call to get new data and update the widget
   setTimeout('refresh();', delay ); // schedule next refresh
} 
```

将重新调度（最后一行）放在 ajax 回调中以仅在当前刷新完成时启动计时器可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:24:39.220

首先，您需要存储要在小部件中显示的操作列表，例如，您可以使用 (id, created_at, action_description) 创建一个数据库表，并且每当用户执行应在小部件中显示的操作时 (例如上传照片等），在该表中插入一条记录（请注意，如果您有很多用户，这不是很有效并且不能很好地扩展）其次，在浏览器端，您会定期调用一个函数（例如使用 setInterval）查询服务器的更新并更新小部件

上述解决方案非常简单且无法扩展。希望有帮助

# java - 如何使用 Spring Security 命名空间设置和配置 ProviderManager？

> ID：11581058
> 
> 赞同：5
> 
> 时间：2012-07-20T14:08:16.823
> 
> 标签：java, configuration, spring-security

Spring 文档说这`ProviderManager`是 的默认实现，但它是由安全命名空间自动创建和连接`AuthenticationManager`的实例吗？`ProviderManager`

换句话说，这样的配置会自动创建一个实例`ProviderManager`：

```
<authentication-manager>
    <authentication-provider>
       <password-encoder hash="md5"/>
       <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider>
</authentication-manager> 
```

否则，我需要做什么（或声明）？

假设我想插入我自己的实现`AuthenticationManager`，我将如何使用命名空间来配置它？

我还想指定哪些`AuthenticationProvider`应该在`ProviderManager`. 我找到了以下配置代码：

```
<bean id="authenticationManager"
    class="org.springframework.security.authentication.ProviderManager">
    <property name="providers">
        <list>
            <ref local="daoAuthenticationProvider"/>
            <ref local="anonymousAuthenticationProvider"/>
        </list> 
    </property>
</bean> 
```

但够了吗？声明列表的正确方法是`AuthenticationProvider`什么？关于这个问题的文档不是很清楚和完整。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:54:15.793

> 换句话说，这样的配置会不会自动创建一个ProviderManager的实例：

根据附录 B2 部分，答案是肯定的。

> 假设我想插入自己的 AuthenticationManager 实现，我将如何使用命名空间来配置它？

根据 B.3.1 节：

```
<global-method-security authentication-manager-ref="..." > 
```

> 声明 AuthenticationProvider 列表的正确方法是什么？

在一篇[博客文章](http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/)`<authentication-manager> ... </authentication-manager>`中，应该使用类似以下的东西，而不是 using ：

```
<bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <property name="providers">
        <list>
            <ref bean="authenticationProvider" />
            <ref bean="anonymousProvider" />
        </list>
    </property>
</bean>

<bean id="authenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <property name="passwordEncoder">
        <bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" />
    </property>
    <property name="userDetailsService" ref="userService" />
</bean>

<bean id="anonymousProvider" class="org.springframework.security.authentication.AnonymousAuthenticationProvider">
    <property name="key" value="SomeUniqueKeyForThisApplication" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:26:24.650

我将以下配置与自定义身份验证提供程序一起使用；

```
 <authentication-manager>

        <authentication-provider user-service-ref="myUserDetailsService">
            <password-encoder hash="md5">
                <salt-source user-property="username" />
            </password-encoder>
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="myUserDetailsService" autowire="byType" class="my.user.UserDetailsServiceImpl">
        <beans:property name="userManagementService" ref="userManagementService"></beans:property>
    </beans:bean> 
```

# c# - c# 面向对象编程基础

> ID：11581059
> 
> 赞同：0
> 
> 时间：2012-07-20T14:08:19.413
> 
> 标签：c#, oop, class, object

我是面向对象编程方法的新手：

我有一个 MyClass1 类如下：

```
public class MyClass1
{
    public int id { get; set; }
    public string name { get; set; }
} 
```

还有一个类 MyClass2 定义为：

```
public class Myclass2
{
    public int id { get; set; }
    public string name { get; set; }

    public Myclass2(MyClass1 m) { }

} 
```

MyClass2 仅在存在 MyClass1 时才存在，因为在 MyClass2 中我需要 MyClass1 的一些属性。

对我来说最好的是这样的：

```
MyClass1.MyClass2 = new MyClass2(); 
```

当然MyClass2 的构造函数应该取MyClass1。

使用 C# 面向对象编程实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:10:57.360

[继承](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.80%29.aspx)：

```
public class Myclass2 : Myclass1
{
    public Myclass2() { }
} 
```

您可能还想查看[嵌套类型](http://msdn.microsoft.com/en-us/library/ms173120%28v=vs.80%29.aspx)

```
public class Myclass2
{
    public class Myclass1
    { 
        Myclass1(){}
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:11:08.230

看起来 MyClass2 应该从 MyClass1 继承，但是您还没有真正解释您要完成的工作，以确保这就是您想要的。

# ruby-on-rails - Ruby on Rails 修改引用

> ID：11581067
> 
> 赞同：0
> 
> 时间：2012-07-20T14:08:50.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

所以我最初的问题是[Association Ruby on Rails](https://stackoverflow.com/questions/11572293/association-ruby-on-rails)。然而，当提到一个帖子时，我遇到的问题是它的空白。什么都看不见。经过研究，我相信是因为当我创建我的测试帖子时，我没有定义与之相关的客户。

```
class CustomersController < ApplicationController

  before_filter :signed_in_customer, only: [:edit, :update]
  before_filter :correct_customer,   only: [:edit, :update]

  def index
    @customers = Customer.all
  end

  def show
    @customer = Customer.find(params[:id])
    **@posts = @customer.posts**
  end 
```

这是允许我暂时创建帖子的表格。

```
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_field :description %>
  </div>
  <div class="field">
    <%= f.label :frienship_group_id %><br />
    <%= f.text_field :frienship_group_id %>
  </div>
  <div class="field">
    <%= f.label :post_size_id %><br />
    <%= f.text_field :post_size_id %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是我在创建新表单时使用的。我想如何允许自定义更新与 customer_id 字段中的当前用户相关的字段？

这里的模型

```
 class Post < ActiveRecord::Base

    belongs_to :customer

    validates :title, presence: true
    validates :description, presence: true
    validates :customer_id, presence: true
    validates :frienship_group_id, presence: true
    validates :Post_size_id, presence: true 
```

更新：

这是我的 new.html.erb 的帖子

```
<h1>New post</h1>
<%= render 'form' %>
<%= link_to 'Back', posts_path %> 
```

这里的控制器

```
class PostsController < ApplicationController

  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])
        respond_to do |format|
            format.html # show.html.erb
            format.json { render json: @post }
        end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:29:45.160

我对 Rails 还很陌生，但我认为这就是你的做法。我假设您当前登录的用户是`current_user`.

```
def create
    @post = current_user.posts.build(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# ruby-on-rails-3 - 为什么哈希方法在 Rails 控制台中返回不同的值？

> ID：11581071
> 
> 赞同：1
> 
> 时间：2012-07-20T14:09:17.127
> 
> 标签：ruby-on-rails-3

在我的应用程序中

```
<%= "a_string".hash %> 
```

呈现为 4318227885144361583

在 Rails 控制台中：

```
$ rails console
Loading development environment (Rails 3.2.3)
1.9.2p290 :001 > "a_string".hash 
 => -917414088101530508 
```

相同的机器，相同的 rails 应用程序，相同的环境，相同的 ruby​​ 版本。

为什么它会得到不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:31:43.463

这与 Rails 无关。

再次启动 IRB，看看你在会话中得到了什么：

```
1.8.7 :003 > "a_string".hash
 => -1300030395 
1.8.7 :004 > exit
$ irb
1.8.7 :001 > "a_string".hash
 => 1520614759 
1.8.7 :002 > exit
$ irb
1.8.7 :001 > "a_string".hash
 => 1991940479 
```

[http://www.ruby-doc.org/core-1.9.3/String.html#method-i-hash](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-hash)

我会提出，你很可能想做这样的事情？

```
require 'digest/md5' 
Digest::MD5.hexdigest("a_string")
 => "7a0d3f5c88466513b32cee16e0620162" 
```

这将始终返回相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:40:35.870

Ruby 1.9 一直有这种行为：进入散列算法的部分信息是在每个进程的基础上随机挑选的

直到 p352 的 ruby​​ 1.8.7 版本的行为符合您的预期：字符串的哈希值仅取决于字符串的内容。

不幸的是，这为一种类型的拒绝服务攻击打开了大门：您可以选择大量的参数，这些参数都散列到相同的值，并因此会调用 ruby​​ Hash 类中的病态行为：而不是 O(1) 访问时间你会得到 O(n)。这已在 ruby​​ 1.8.7p357 中修复。[这篇文章](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/391607)中有更多关于ruby​​ 谈话列表的详细信息。

# image - 资源列表

> ID：11581082
> 
> 赞同：1
> 
> 时间：2012-07-20T14:09:48.803
> 
> 标签：image, file, resources, wicket, directory-listing

我写检票口 webapp。我想要：

1.  列出所有资源 - 文件夹中的 videoPreview
2.  预览
3.  添加链接以显示在主预览面板中。

我阅读了很多并查看了有关资源的示例，但似乎无法理解。我写了这么有趣的代码：

```
 RepeatingView rv = new RepeatingView("showVideo");
    add(rv);
    File vidPrevDir = (new File("data/catalog/"+product+"/videoPreview"));
    File[] list = vidPrevDir.listFiles();

    for (File file : list) {
        final String previewFile = file.getName();
        AjaxLink link = new AjaxLink(rv.newChildId()){              
            @Override
            public void onClick(AjaxRequestTarget target) {
                container.name="iframe";
                container.attrs.clear();
                container.attrs.put("class", "viewPanel");
                container.attrs.put("allowfullscreen", "yes");
                container.attrs.put("src", "http://www.youtube.com/embed/"+previewFile.substring(previewFile.indexOf("___"), previewFile.length()-4));
                target.add(container);                  
            }

        };
        rv.add(link);
        link.add(new Image("videoPreview", product+"/videoPreview/"+file.getName()));
    } 
```

在应用程序中，我调用 getResourceSettings().addResourceFolder("data");

这是工作，但当我看到它时我感觉很糟糕。所以我的问题是如何在检票口中制作这样的东西？也许有资源列表或 java.io.File->wicket.Image 转换器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:27:19.820

我只找到了内置方法：

ServletContext 上下文 = WicketApplication.get().getServletContext(); 设置 productList = context.getResourcePaths("/catalog");

它列出文件名，而不是资源，但它是更可取的方法，然后我使用有问题。

# asp.net-mvc - MVC 和 IE6 上仪表板的 Web UI 组件

> ID：11581085
> 
> 赞同：1
> 
> 时间：2012-07-20T14:09:52.503
> 
> 标签：asp.net-mvc, internet-explorer-6

作为我正在进行的下一个项目的一部分，客户要求提供用户可自定义的仪表板样式网页，他们可以在其中放置多个不同的图表控件，其中填充了各种数据位。

有大量的库可以让你做这种事情，但大多数不支持 IE6。（这不在我的控制范围内，我们必须针对 IE6。我知道，可怜我）

我很难找到适用于 IE6 且仍受支持的任何合适的 3rd 方控件库，因此欢迎任何建议。

该应用程序的其余部分是 ASP.NET (3.5)，但我们希望将仪表板部分设为 MVC，因此本机 ASP.NET 或 MVC 组件都可以，但 MVC 更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:03:00.217

到目前为止，最好的 IE6 兼容图表库是[Raphael](http://raphaeljs.com/)及其姊妹库[g.Raphael](http://g.raphaeljs.com/)。主库为通用图形库；姐妹库用于图形和图表。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T10:35:11.843

[jqChart](http://www.jqchart.com/)支持 IE6。它有 ASP.NET MVC 的版本 - [http://www.jqchart.com/SamplesAspNetMVC](http://www.jqchart.com/SamplesAspNetMVC)

# python - Google 应用引擎批量加载程序环境变量

> ID：11581086
> 
> 赞同：0
> 
> 时间：2012-07-20T14:09:53.117
> 
> 标签：python, google-app-engine, bulkloader

我依靠 python`os.environ`来确定我的应用程序应该使用什么配置（例如不同主机的不同 API 密钥）。

似乎bulkloader无法访问这些变量，无论如何我可以知道bulkloader运行时我的应用程序的当前版本或当前主机是什么？

通常我在我的`config_helper`：

```
env = os.environ[ 'CURRENT_VERSION_ID' ].split( '.' )[ 0 ] 
```

并且 bulkloader 报告了关于 的 KeyError `CURRENT_VERSION_ID`，所以我使用了这个：

```
if os.environ.get('HTTP_HOST'): 
    host = os.environ['HTTP_HOST'] 
else: 
    host = os.environ['SERVER_NAME']
if host is not None:
    if host.find( 'locahost' ):
        env = 'local'

    elif host.find( 'prod-server' ):
        env = 'prod'

    elif host.find( 'dev-server' ):
        env = 'dev'

    elif host.find( 'stage-server' ):
        env = 'stage'

    os.environ[ 'CURRENT_VERSION_ID' ] = env + '.1' 
```

但是 bulkloader 抱怨这`SERVER_NAME`是一个无效的对象，这意味着它也找不到`HTTP_HOST`.

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:42:16.573

Environment variables like HTTP_HOST and CURRENT_VERSION_ID are only available when your app is running as a web application.

Probably you can just pass the variables with env command as follows:

```
$ env CURRENT_VERSION_ID=local.1 bulkloader .... 
```

# jquery - jquery选择样式编辑

> ID：11581091
> 
> 赞同：0
> 
> 时间：2012-07-20T14:10:29.670
> 
> 标签：jquery

对于我当前的项目，我需要编辑选择元素的默认样式。现在通常我不会打扰，但它是设计的一部分，幸运的是它是整个网站上唯一的一个。

现在我正在尝试：[https](https://github.com/scottdarby/Stylish-Select/) ://github.com/scottdarby/Stylish-Select/插件来编辑样式。我添加了我自己的自定义精灵，这很好。但我想知道，我将如何进行，或者是否可以轻松地为此添加“切换”功能？

如果有人可以提供帮助，我真的很感激。

### 编辑

这是我使用的代码：http: [//jsfiddle.net/TvqqN/12/](http://jsfiddle.net/TvqqN/12/)也许切换是错误的描述。我基本上想知道我是否可以在选择中动画显示列表？

问候米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:25:07.653

例如，您可以更改时尚选择的源代码以使用不同的动画（如果您有 jQuery UI）来切换下拉菜单。

使用 jQuery 默认的线性摆动过渡找到包含 h 的行`$containerDivWrapper.toggle();`并将其替换为`$containerDivWrapper.toggle("slow");`切换它。

这是一个包含 jQuery UI 的版本（通过 jsfiddle）和 3 秒长的 easeInCirc 过渡：http: [//jsfiddle.net/TvqqN/15/](http://jsfiddle.net/TvqqN/15/)

# c++ - 扩展 opencv/find_obj.cpp 以识别多个对象

> ID：11581093
> 
> 赞同：1
> 
> 时间：2012-07-20T14:10:31.823
> 
> 标签：c++, linux, opencv, webcam, surf

我对 OpenCV 很陌生，所以请多多包涵。

我已设法修改 find_obj.cpp 示例以使用网络摄像头/实时视频源而不是“scene_filename”参数。

这样，当我调用示例时，我给它一个图像作为我要检测的对象。然后，视频源会查看该“对象”的场景。

令我惊讶的是，这个扩展示例运行良好。我想扩展它以识别多个对象，但是我不知道该怎么做。

这些“多个对象”将是目录中的各种图像文件。

谁能给我任何建议和/或提示我如何解决这样的问题？

在这一点上，由于这是一个学习练习，我不是在寻找速度或性能，而只是了解它是如何工作的。

顺便说一句，我的开发是在 Linux/Ubuntu 平台上进行的，并且我正在使用 C/C++（尽管我也对 python 感到满意。）

# android - 从android上传图像文件到wcf时，图像文件损坏

> ID：11581096
> 
> 赞同：1
> 
> 时间：2012-07-20T14:10:44.077
> 
> 标签：android, wcf, image, uploading

我无法发布我的好问题文档。因为，我是新来的，所以我不能在帖子上添加任何图像。太糟糕了。

无论如何，我尝试在没有图像的情况下进行解释。

我从 android 发送图像文件，如底部源代码。它作为流发送到 WCF。没有问题。

```
File file = new File(path);
FileBody bin = new FileBody(file);
DefaultHttpClient httpClient = new DefaultHttpClient();         
HttpPost postRequest = new HttpPost(this.SERVICE_URI);
MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("imageData", bin);
postRequest.setEntity(reqEntity);
HttpResponse response = httpClient.execute(postRequest); 
```

当我想在服务器上查看上传的文件时，寡妇无法打开。首先，我打开原始文件属性。我可以看到图像的所有属性，如宽度、高度、dpi。

但是当我打开上传的图像文件属性时，我只能看到文件的大小。然后我想查看记事本上的文件。原始文件和上传文件之间存在差异。那是

```
--kpKP7FRpS5aYCWRNH0NHd0tGRj7hs2QYhVai_
Content-Disposition: form-data; name="imageData"; filename="ty-uz.jpg"
Content-Type: application/octet-stream 
```

然后我在文件底部也看到了一个标签 --kpKP7FRpS5aYCWRNH0NHd0tGRj7hs2QYhVai_--

Android在发送之前在原始图像文件上添加了标签，然后我无法将其视为图像。那么问题是什么？我在 silverlight 应用程序上使用相同的 WCF，它运行得非常好。没问题。图像文件上传原始。

但是我的 android 应用程序在图像文件中添加了标签。问题是什么？

现在已经谢谢你了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T04:38:02.437

我也有同样的问题。我已经响应了客户端文件的大小，然后看到上传到服务器时的文件大小大于客户端中的文件并且它已被破坏。

我认为数据已被修改，正在将数据发送到服务器。因此，在客户端应用时将文件上传到 wcf 服务的方式是不正确的。您可以在此处引用[相同的主题](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4c86592e-a534-40a4-81ae-7b459b689a9c/)

# ruby-on-rails - 加速我的 Rails 应用程序，它使用 Typhoeus 发出多个 Web 服务 HTTP 请求

> ID：11581097
> 
> 赞同：2
> 
> 时间：2012-07-20T14:10:55.030
> 
> 标签：ruby-on-rails, ruby, performance, ruby-on-rails-3.2, typhoeus

我当前的应用程序发出大约 30 个并行 HTTP 请求，以从各种网站的 API 获取各种数据，并从一些网站中删除一些内容。我正在使用 Typhoeus，因为我听说它可以快速发出 HTTP 请求。但我非常想要为了加快我的应用程序，我已经对其进行了研究，并获得了将 Typhoeus get 请求转为头请求的建议。我还实现了急切加载技术，解决了 N+1 个问题。但我仍然需要加快我的应用程序很多。

欢迎任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T16:32:07.123

我之前使用[resque](https://github.com/defunkt/resque/)在后台处理长时间运行的进程，这极大地帮助了网站性能。如果您从主进程发出这 30 个并行请求，它可能会减慢速度，因为我已经读过 Ruby 和线程存在一些问题。

您可以尝试将抓取代码放入工作进程中，然后设置页面刷新以查看更新。

# sql - 经典asp中数据库查询返回的部分数据

> ID：11581100
> 
> 赞同：2
> 
> 时间：2012-07-20T14:10:59.227
> 
> 标签：sql, database, asp-classic, db2

**有没有人遇到过来自经典 ASP 页面的 SQL 查询返回*部分*结果但没有错误的问题？**

我有一种情况，页面上的特定查询（整个系统中的许多查询之一）每次运行时返回**不同数量的行，并且总是****小于**“正确”数量，这是通过针对直接服务器。

我认为这可能与连接超时有关（因为这发生在长时间运行的查询中，并且我的时间显示它返回的时间非常接近超时），但我没有收到超时错误。相反，据我所知，它不会导致任何错误，并返回一个有效值`DataSet`，然后代码会循环该值以构建结果表。

由于没有迹象表明发生了错误，因此没有迹象表明数据不完整，这意味着用户不再信任此报告。通常在这个系统中，对于“大”查询确实经常发生 SQL 超时，我们会在页面上显示错误消息。

**调查**

*   我检查了 HTML 源代码，以确保没有我遗漏的注入错误，并且所有标签的格式都正确，并且存在预期的页面元素。这表明从结果中写入特定行不是错误。** 此外，每次返回的行数都**不同。**
*   我已经验证每次都在运行完全相同的查询。
*   我已经验证数据库中的数据在报告下没有变化（它是历史数据，我已经通过同时运行报告和对数据库的查询进行了交叉检查。）
*   我尝试手动打印[查询](https://stackoverflow.com/a/635717/15667)中的任何错误，但一无所获。
*   [我尝试更改超时（尽管这没有帮助，因为我只能在开发环境中执行此操作，并且由于此](https://stackoverflow.com/questions/3095487/classic-asp-application-experiencing-sql-server-timeouts-and-sql-server-does)问题，数据库中没有足够的数据来达到超时。）。
*   预计总共只有大约 20 行，因此对于非常大的数据集来说不是问题。

**有没有人遇到过来自经典 asp 页面的 SQL 查询只返回部分结果的情况，有没有办法检查或防止这种情况？**

**设置**：

*   经典的asp网页应用
*   大量使用`ADODB.Connection`对象连接到 DB2 服务器后端数据库。
*   就查询的数据而言，数据库是**静态的。**

共享连接初始化如下：

```
connString = "Provider=MSDASQL.1;User ID=xxx;Data Source=XXX;Extended Properties=""DSN=XXX;UID=XXX;PWD=XXX;"""
Set conn = Server.CreateObject( "ADODB.Connection" )
Set cmd = Server.CreateObject("ADODB.Command")
conn.Mode = adOpenReadOnly
conn.Open connString
cmd.ActiveConnection = conn
cmd.CommandTimeout = 600 
```

用法如下：

```
query = " SELECT blah FROM Foo WHERE ... " ' big long list of clauses defined from user selections.
cmd.CommandText = sql
Set oRs = cmd.Execute

Resposne.Write "<table>..." ' Write table headers here'
Do while (Not oRs.eof)
     Response.Write "<tr>...</tr>" ' WRite details from oRs here
     oRs.MoveNext
Loop
Response.Write "</table>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:18:44.127

尝试向`order by`查询添加一个，这样它应该一次发送所有行，您可以排除或排除超时问题

# c# - C# 转换列表 到字典

> ID：11581101
> 
> 赞同：158
> 
> 时间：2012-07-20T14:11:06.290
> 
> 标签：c#, list, dictionary

这似乎是一件奇怪的事情，但忽略了这一点，是否有一种简洁的方式将 a 转换为`List<string>`字典`Dictionary<string, string>`中的每个键值对只是列表中的每个字符串。IE

```
List = string1, string2, string3
Dictionary = string1/string1, string2/string2, string3/string3 
```

我已经做了很多搜索，仅在 Stackoverflow 上就有几十个例子，它们是在相反的方向上做的，但不是这样。

这样做的原因是我有两个第三方组件，并且无法更改它们。一个返回电子邮件地址列表作为 a `List<string>`，另一个发送 To 参数为 a 的电子邮件`Dictionary<string, string>`。字典的键是电子邮件地址，值是他们的真实姓名。但是，我不知道真实姓名，但如果您将真实姓名也设置为电子邮件地址，它仍然有效。因此，为什么我要将 List 转换为`Dictionary<string, string>`. 有很多方法可以做到这一点。列表上的一个`foreach`循环，将 kvp 添加到字典中。但我喜欢简洁的代码，想知道是否有单行解决方案。

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-07-20T14:11:59.810

试试这个：

```
var res = list.ToDictionary(x => x, x => x); 
```

第一个 lambda 让您选择键，第二个选择值。

您可以使用它并使值与键不同，如下所示：

```
var res = list.ToDictionary(x => x, x => string.Format("Val: {0}", x)); 
```

如果您的列表包含重复项，请`Distinct()`像这样添加：

```
var res = list.Distinct().ToDictionary(x => x, x => x); 
```

**编辑**要评论有效原因，我认为对这样的转换有效的唯一原因是，在某些时候，结果字典中的键和值会出现分歧。例如，您将进行初始转换，然后将某些值替换为其他值。如果键和值*始终*相同，`HashSet<String>`则更适合您的情况：

```
var res = new HashSet<string>(list);
if (res.Contains("string1")) ... 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-20T14:12:06.717

用这个：

```
var dict = list.ToDictionary(x => x); 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/de-de/library/bb549277.aspx)。

正如 Pranay 在评论中指出的那样，如果列表中多次存在一个项目，这将失败。
根据您的具体要求，您可以使用`var dict = list.Distinct().ToDictionary(x => x);`来获取不同项目的字典，也可以使用`ToLookup`：

```
var dict = list.ToLookup(x => x); 
```

这将返回与`ILookup<string, string>`基本相同的 an `IDictionary<string, IEnumerable<string>>`，因此您将拥有一个不同键的列表，其中每个字符串实例都在其下。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-20T14:13:52.910

**编辑**

另一种处理重复的方法是你可以这样做

```
var dic = slist.Select((element, index)=> new{element,index} )
            .ToDictionary(ele=>ele.index.ToString(), ele=>ele.element); 
```

或者

* * *

简单的方法是

```
var res = list.ToDictionary(str => str, str=> str); 
```

**但请确保没有重复的字符串...再次否则上面的代码对您不起作用**

**如果有字符串重复比这样做更好**

```
Dictionary<string,string> dic= new Dictionary<string,string> ();

    foreach(string s in Stringlist)
    {
       if(!dic.ContainsKey(s))
       {
        //  dic.Add( value to dictionary
      }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:13:04.097

通过使用[`ToDictionary`](http://msdn.microsoft.com/en-us/library/bb549277.aspx)：

```
var dictionary = list.ToDictionary(s => s); 
```

如果有可能重复任何字符串，[`Distinct`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)请先在列表上进行调用（以删除重复项），或者使用[`ToLookup`](http://msdn.microsoft.com/en-us/library/bb549073.aspx)允许每个键有多个值的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T14:20:07.373

您可以使用：

```
var dictionary = myList.ToDictionary(x => x); 
```

# android - 如何有可能在位置更新的频率（每秒、每分钟等）之间进行选择？

> ID：11581109
> 
> 赞同：0
> 
> 时间：2012-07-20T14:11:38.043
> 
> 标签：android, geolocation, gps, locationlistener

您好，我只是想知道如何通过单击菜单项来修改位置更新的频率我试过了，但我在这里所做的似乎并不好（代码添加在下面），因为我没有得到位置更新选择的频率。我只想知道是否可以更改频率以及最好的实施方式。我希望能够通过单击子菜单项刷新位置：仅一次、每秒或每 2 分钟。项目选择结束

谁能告诉我，如果我做的是对的，而不是让我知道我该怎么做？提前致谢

这是代码：

```
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import com.google.android.maps.OverlayItem;

import android.content.Intent;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;

 public class MapLocator extends MapActivity implements LocationListener {
/** Called when the activity is first created. */

 private LocationManager lm;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    mapView = (MapView) this.findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mc = mapView.getController();
    mc.setZoom(14);

    int FIVE_MINUTES = 5 /*Minutes*/ * 60 /*sec per min*/ * 1000 /*ms per sec*/;
    lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  FIVE_MINUTES, 0, this);

    Drawable drawable= this.getResources().getDrawable(R.drawable.loc_seven);
    ListItimizedOverlay itemizedoverlay = new ListItimizedOverlay(drawable);
    GeoPoint p = new GeoPoint(33000000,84000000);
    OverlayItem overlayitem = new OverlayItem(p, "Hello from", "Tahiti");
    itemizedoverlay.addOverlayItem(overlayitem);
    mapView.getOverlays().add(itemizedoverlay);

 }

 @Override
 protected boolean isRouteDisplayed()
 {
 return false;
 }

 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)
 {
     if (keyCode == KeyEvent.KEYCODE_S)
     {
         mapView.setSatellite(!mapView.isSatellite());
         return true;
     }
 return super.onKeyDown(keyCode, event);
 }

 @Override
 public void onLocationChanged(Location location)
 {
     Log.d("msg","1");

     lat = location.getLatitude();
     lng = location.getLongitude();

        Toast.makeText(
                getBaseContext(),
                "Location change to : Latitude = " + lat + " Longitude = "
                    + lng, Toast.LENGTH_SHORT).show();
     GeoPoint p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
     mc.animateTo(p);
     mc.setCenter(p);
     mc.setZoom(14);
     Drawable drawable= this.getResources().getDrawable(R.drawable.loc_seven);
     ListItimizedOverlay itemizedoverlay = new ListItimizedOverlay(drawable);
     OverlayItem overlayitem = new OverlayItem(p, "", "");
     itemizedoverlay=  (ListItimizedOverlay ) mapView.getOverlays().get(0);
     itemizedoverlay.clear();
     itemizedoverlay.addOverlayItem(overlayitem);
     mapView.getOverlays().add(itemizedoverlay);

 }

 @Override
 public void onProviderDisabled(String provider)
 {
     if(provider.equals("LocationManager.GPS_PROVIDER")){
         Toast.makeText(MapLocator.this, "GPS is off", Toast.LENGTH_LONG).show();

         startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
         }

     }

 @Override
 public void onProviderEnabled(String provider)
 {

    Log.v("main", "Enabled");
        Toast.makeText(MapLocator.this, "GPS Enabled", Toast.LENGTH_SHORT).show();
 }

 @Override
 public void onStatusChanged(String provider, int status, Bundle extras)
 {
 }

 @Override
 public void onPause() {
     super.onPause();
     lm.removeUpdates(this);
     }

  //Méthode qui se déclenchera lorsque vous appuierez sur le bouton menu du téléphone
    public boolean onCreateOptionsMenu(Menu menu2) {

        //Création d'un MenuInflater qui va permettre d'instancier un Menu XML en un objet Menu
        MenuInflater inflater = getMenuInflater();
        //Instanciation du menu XML spécifier en un objet Menu
        inflater.inflate(R.layout.menumap, menu2);

        return true;
     }

 public boolean onOptionsItemSelected(MenuItem item) {
         //On regarde quel item a été cliqué grâce à son id et on déclenche une action

          switch (item.getItemId()) {
            case R.id.refresh:
                return true;

            case R.id.refreshonce:

                 this.lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, this, null);
                 Toast.makeText(MapLocator.this, "refreshnow", Toast.LENGTH_LONG).show();
                return true;

            case R.id.refresheachsec:

                this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  0, 0, this);
                 Toast.makeText(MapLocator.this, "refresh2", Toast.LENGTH_LONG).show();
                return true;   

            case R.id.refresheach2min:

                this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  2*60*1000, 0, this);
                 Toast.makeText(MapLocator.this, "refresh2", Toast.LENGTH_LONG).show();
                return true;        

            case R.id.refresheach5min:

                this.lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,  5*60*1000, 0, this);
                 Toast.makeText(MapLocator.this, "refresh5", Toast.LENGTH_LONG).show();
                return true;   

           case R.id.quitter:

               finish();
               return true;
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:00:27.677

我建议在使用`LocationManager.removeUpdates()`新时间请求更新之前使用。另请注意，在 JellyBean (4.1) 中，更新之间的最短时间不再只是一个提示。

请参阅：[Android 中的位置管理器](http://developer.android.com/reference/android/location/LocationManager.html)

“在 Jellybean 之前，minTime 参数只是一个提示，一些位置提供程序实现忽略了它。从 Jellybean 及以后，Android 兼容设备必须同时观察 minTime 和 minDistance 参数。”

# java - Assert.assertAllValuesInArrayAreEqual - 使用junit在java中进行单元测试，有没有这样的方法？

> ID：11581112
> 
> 赞同：0
> 
> 时间：2012-07-20T14:11:51.010
> 
> 标签：java, unit-testing, junit

或者有吗？

我只有

```
int[] results 
```

并想检查数组中的每个元素是否具有相同的 int 值。

（是的，我可以遍历它们）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T14:21:02.377

无需循环，只需将数组转换为 Set 对象，然后检查其长度，如果长度为 1，则数组中的所有内容都相等。

```
 Integer[] myArray = ...;
    assertThat(new HashSet(Arrays.asList(myArray)).size(), is(1)); 
```

# file-upload - 这些 liferay 配置参数实际上是什么意思？

> ID：11581113
> 
> 赞同：1
> 
> 时间：2012-07-20T14:11:56.403
> 
> 标签：file-upload, configuration, liferay

在我的 portal-ext 属性文件中，我找到了这些参数。我不记得为什么将它们放入配置文件中，我想我只是从其他一些网页上复制了它们，有人说它会有所帮助。

有评论解释了参数的作用，但我仍然不明白潜在的问题。

上传的数据如何被外部序列化？

为什么大于 10 MB 的文件被认为过大，为什么必须缓存它们？

```
#Set the threshold size to prevent extraneous serialization of uploaded data.

com.liferay.portal.upload.LiferayFileItem.threshold.size=262144

#Set the threshold size to prevent out of memory exceptions caused by caching excessively 
#large uploaded data. Default is 1024 * 1024 * 10.

com.liferay.portal.upload.LiferayInputStream.threshold.size=10485760 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:57:32.987

当您在门户中具有外部文件上传功能时，将调用这些属性。

当您上传较大的文件时，需要将其写入磁盘上的临时文件。

由于文件上传过程的一部分是在将文件写入磁盘/数据库之前将文件保存在内存中，因此必须避免使用较大的文件，并防止内存不足的异常。

如果您想了解这方面的更多细节，

请通过此[链接。](http://commons.apache.org/fileupload/using.html)

Liferay 的文档库使用其他属性来限制文件大小。如

```
 dl.file.max.size=3072000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:07:02.053

这些属性与上传的最大文件大小有关（例如，对于文档库）。然而，这些似乎是默认值。

# java - 在 Java 中作为输出参数列出

> ID：11581115
> 
> 赞同：4
> 
> 时间：2012-07-20T14:12:01.213
> 
> 标签：java, list, function-calls, output-parameter

我正在尝试编写一个以 List 对象作为输出参数的 Java 函数。

```
boolean myFunction(int x, in y, List myList)
{
    ...Do things...
    myList=anotherList.subList(fromIndex, toIndex);
    return true
} 
```

在此之前，我调用我声明 myList 的函数，如下所示： List myList=null; 然后我调用函数 myFunction(x,y,myList) 但是当我尝试操作 myList 时，我发现 myList 仍然为空。

我确信我的函数代码中的变量“antherList”不为空，并且我确信 subList 函数返回一个非空列表。

原因是什么，如何在 Java 函数中将 List 作为输出参数传递？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:14:38.183

Java 总是使用按值传递。这意味着操作传递的变量不会影响调用者传递的变量。

为了解决您的问题，有一些可能性：

*   返回子列表：

    ```
    List myFunction(int x, int y) { return anotherList.subList(....);} 
    ```

    我知道这种方式可以消除您的布尔返回值。

*   创建一个包含指向 List 和的指针的结构。

    ```
    class Reference <T>
    {
        public T ref;
    }

    boolean myFunction(int x, int y, Reference<List> listRef)
    {
          listRef.ref = anotherList.subList(....);
          return true;
    } 
    ```

*   创建一个结构，其中包含您希望该方法返回的所有输出：

    ```
    class MyFunctionOutput
    {
         List list;
         boolean b;
    }

    MyFunctionOutput myFunction(int x, int y)
    {
         MyFunctionOutput out = new MyFunctionOutput();
         out.list = anotherList.subList(....);
         out.b = true;
         return out;
    } 
    ```

*   或者最简单的方法：传递一个初始化的 List 而不是 null 并让函数添加子列表，就像 Attila 建议的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:14:59.293

您不能在 Java 中传递*out*参数。您需要将返回类型声明为 List 或更改传递列表的*内容*：

```
boolean myFunction(int x, in y, List myList) 
{
  ...Do things... 
  myList.clear();
  myList.addAll(anotherList.subList(fromIndex, toIndex)); 
  return true 
} 
```

*注意*：out-parameter 意味着您更改包含传递给函数的值的变量的值。在您的情况下，这意味着返回一个不同的 List 对象。相反，您返回的是*相同*的List 对象，但内容已更改。

将参数视为传递值的本地副本：替换整个对象的任何更改都将在函数返回时丢失。如果您只是更改其内容/状态，则当您访问传入的同一对象时，该更改将保持不变（本地副本由指向同一对象的引用组成）

*注意*：这可能是出于演示目的，但您应该使用泛型来指定列表包含的对象：例如`List<String>`，而不是原始`List`类型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T14:16:13.520

*Java 中的引用*是按值传递的。所以你不能指定一个*out 参数*。

但是，您可以做的是改变传入的对象。因此，在上面的示例中，您可以传入一个 empty `List`，并将其填充到您调用的方法中。

即在上面：

```
myList.addAll(...); 
```

您可能希望断言传递的列表为空作为先决条件。

我可能会建议这在 Java 世界中不是很常见的模式。因为*out 参数*不存在，所以作为参数传入的参数不会发生变化，这不是预期的行为，您最好创建一个合适的对象类型来返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:18:09.370

myList 变量是该函数的本地变量。引用是按值传递的，而不是 Java 世界中的指针。一旦退出，它就会从上下文堆栈中删除。一个可能的选择是不返回布尔值，而是返回列表本身。然后您可以测试该列表是否为 null 以查看您的功能是否有效。

另一种选择是实际创建您的列表，然后将其传递给函数（非空）。然后你的函数不需要创建一个新列表，而只需向它添加值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T14:18:09.727

一个简短的答案 - 只需将新列表作为函数的返回值返回：

```
List myFunction(int x, in y, List myList) {
    ...Do things...
    return anotherList.subList(fromIndex, toIndex);
} 
```

长答案是java在调用函数时复制对象的指针，这意味着如果将新对象分配给方法参数，它不会影响原始变量。因此，如果要更改对象值，则必须保存参数引用。

# android - 在 Android 中命名 XML Element 的 id 的最佳做法是什么？

> ID：11581116
> 
> 赞同：13
> 
> 时间：2012-07-20T14:12:04.847
> 
> 标签：android, xml

我不确定以前是否有人遇到过这个问题，但这对我来说是一大痛苦。

你如何给android中的xml元素一个id？

现在，我使用模式**[activity/fragment name][element type][specific name]**设置 id 。例如，如果我有一个 EditText 来保存在 LoginActivity 中使用的电子邮件，我将提供 id 'LoginEditTextEmail'。

我面临的问题是，使用这种方法，id 通常会以很长的形式结束。

你是怎么设置id的？最佳做法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T14:18:00.697

描述性名称是理想的（与任何编程语言中的任何变量的名称相同）。

我认为你已经有了一个很好的系统我会提供这些潜在的方法来减少你的 ID 大小

**[活动/片段名称]** - 我个人会放弃这个，无论如何我倾向于为每个活动/片段使用一个布局文件，因此不会混淆视图的意图是什么活动。有时我会重复使用一些查看多个活动中的小部件，我将使用相同的 ID 保留它们，以便简化查找和交互它们的代码（即可以复制/粘贴或放入 Activity 的子类）

**[元素类型]** - 我对小部件类型使用 3 个字母的速记：

*   编辑 = 编辑文本
*   文本 = 文本视图
*   Lbl = TextView 是静态的，用于标记某些东西
*   Btn = 按钮
*   Prg = 进度条
*   Lyt = 布局
*   ETC...

**[具体名称]** - 这里没有真正的改进，只要描述它的用途就行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T14:13:59.243

You're overcomplicating things. Just name it in whatever way is memorable to you. IDs only have to be unique per XML (i.e. you can have 50 different layouts with the id of `my_edittext`) since you find a view by it's ID only through a single view hierarchy.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:14:17.397

Much like naming anything, I tend to use the shortest name possible that accurately describes it. In the case of ids for layouts, just make sure each id is unique in your layout (you can reuse the same id in a different layout).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T11:28:42.497

除非您在编码中限定它们，否则丢弃片段、活动和类型，因此：

`boolean isLoggedIn = false;`

`android:id="@+id/is_logged_in"`

正如在其他回复中提到的那样，XML 提供了限定符，现在您必须决定是否需要一致性和/或进一步的限定，以及它是否适合。你真的需要有资格吗？如果你不支持代码，你或其他人会更难吗？

那么呢`strings.xml`？

在 id 前加上 frag 或活动限定符。因此，例如：

`<string name="**profile**_is_logged_in_true">Logged in.</string>`

`<string name="**profile**_is_logged_in_false">Not logged in.%</string>`

还…

`<plurals name="plural_is_logged_in_duration">...`

我*玩过*：

`<string name="**profile**_isloggedin_false">Not logged in.</string>`

但还没有被说服。这实际上是一个分类问题，现在已经通过标记在其他学科中解决了。Java 提供了点分命名空间和类型限定符，所以

`com.example.android.app.profile.State.isLoggedIn`

Android 使用类似`R.string`:-) 的东西所以你有 Java 加上一些来自 Android 的额外命名空间。不要忘记您可以拥有多个字符串资源文件，所以也许：

`res/values/widget_defaults.xml`

可以包含一些默认值，比如 a `TextView`。真假字符串应该由复数来处理——但这个例子希望能有所帮助，尽管有点做作。

# iphone - 在现有应用程序上更改设备类型

> ID：11581121
> 
> 赞同：0
> 
> 时间：2012-07-20T14:12:45.473
> 
> 标签：iphone, ipad, flurry

我在 Flurry for iPhone 上做了一个应用程序。我想为 iPhone 和 iPad 版本使用相同的 app-id。iPad版本首先发布。但我现在需要有一个单独的应用程序 ID 和 iPhone 版本的统计信息。
有没有一种方法可以更改应用程序上的设备类型，而无需更改应用程序 ID，因为该应用程序已经发布。我想将应用程序设备从 iPhone 更改为 iPad。我可以为 iPhone 创建一个新的。

如果flurry中提到的设备仍然是iPhone，但应用程序在iPad上运行，有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:23:19.420

Flurry 如何检测和存储设备类型？如果它通过查看设备规格自行完成，它应该检测它何时在 ipad 上运行。如果它从应用程序的设置（plist 等）中获取数据，这是一个问题，因为您仅指定了 iphone。如果你能告诉 Flurry 类型，就告诉它

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
    //tell Flurry we are running on iphone 
else 
    //...on ipad 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:34:08.393

我发现设备类型只是对应用程序进行分类，因此我们也可以拥有设备方面的统计信息。就 iPhone 和 iPad 而言，Flurry 中的设备类型没有其他影响。我添加了另一个具有一些 UI 更改的版本，并更正了其中的设备类型。除此之外没有其他选择。

# wpf - 如何在wpf datagrid中显示空行（datagridtemplatecolumn）

> ID：11581123
> 
> 赞同：2
> 
> 时间：2012-07-20T14:12:51.900
> 
> 标签：wpf, datagrid, rows

任何人都可以帮我将空行显示到数据网格中。这样我应该能够在单击按钮时动态地在数据网格单元格中创建一个控件。

提前致谢。

# css - 指定一个很长的字体堆栈有什么缺点吗？

> ID：11581124
> 
> 赞同：3
> 
> 时间：2012-07-20T14:12:55.160
> 
> 标签：css

这就是我所拥有的：

```
body {
    font-family: Frutiger, "Frutiger Linotype",
                 "Frutiger LT Std", Univers, Calibri, "Myriad Pro",
                 Myriad, "DejaVu Sans Condensed", "Liberation Sans",
                 "Nimbus Sans L", "Helvetica Neue", Helvetica, Arial,
                 sans-serif;
} 
```

那是多达 14 种字体！使用像这样的长字体堆栈对页面加载时间或性能有显着影响，还是根据需要包含尽可能多的字体总是一个好主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:38:32.053

有趣的是，字体堆栈似乎来自这里：[http](http://www.sitepoint.com/eight-definitive-font-stacks-2/) ://www.sitepoint.com/eight-definitive-font-stacks-2/ （修改为删除 Gill Sans，这是有道理的，因为该字体确实不适合这个团体）。

从某种意义上说，这有点矫枉过正（除非你真的*非常*讨厌 Arial），但是知道很多这些字体，我可以看到创作者心中的逻辑假设（并不是说我会这样做）。Frutiger 和 Univers 非常少见，但都是不错的设计师字体。Calibri 是自 Office 2007 以来发布的一种字体，而 Myriad Pro 已经与 Acrobat Reader 一起发布了很长时间，因此您可以使用 Windows 计算机。有三种 Linux 字体（DejaVu Sans、Liberation Sans、Nimbus Sans）来覆盖你的基础。正如我所提到的，Gill Sans 在这里被淘汰了，但该字体随 Mac 一起提供。Helvetica Neue 也是如此。

因此，为了达成共识，它可能不会损害任何东西，但除非您想对其进行广泛测试，否则您所做的就是为您的设计添加页面重量和许多未知变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T01:26:52.907

我说这是矫枉过正，除非您打算像我一样将其分解：

```
/* Web Safe Font Stacks */
.head {font-family: Georgia,'Times New Roman',serif}
.para {font-family: Verdana,Arial,sans-serif}
.mono {font-family:'Courier New',Courier,monospace}
.fant {font-family: Papyrus,Impact,fantasy}
.curs {font-family:'Apple Chancery','Lucida Calligraphy',cursive} 
```

欢迎您在 CSS 中使用此示例代码。

# razor - 访问 blogengine.net 中的仪表板会尝试下载 cshtml 文件而不是加载页面

> ID：11581125
> 
> 赞同：1
> 
> 时间：2012-07-20T14:12:55.167
> 
> 标签：razor, blogengine.net

我最近在本地测试服务器和实时 Web 服务器上都安装了 blogengine.net 应用程序。它们都是带有 IIS6 的 Windows Server 2003。该应用程序在我的本地测试服务器上运行良好，但它在实时服务器上部分运行。当我尝试访问设置部分中的仪表板时，浏览器不加载页面，而是尝试下载页面。当我点击主题（另一个cshtml页面）时，我会收到很多以`@using BlogEngine.Core.Packaging @{ Page.Title = Resources.labels.themes;`.....等开头的奇怪文本

我一直在谷歌搜索，但大多数答案似乎都集中在 IIS7 上，而那些似乎适用于 IIS6 的答案似乎并不适用，因为他们提到了检查丢失的 DLL（事实并非如此，因为 bin 文件夹包含完全相同文件作为工作服务器中的文件）。

我尝试过的事情：

1）重新安装博客引擎

2) 安装 MVC 3

3) 在网站属性的 HTTP 标头选项卡下的“.cshtml”扩展名中添加一个 mime 类型“text/html”（在 IIS6 中）

4）为网站添加专用的应用程序池

我发现的一些建议建议我应该将应用程序池设置为使用 .Net 4，但我不知道如何在 IIS6 中进行设置（与 IIS7.5 不同），我在网站属性中设置了 asp.net 设置到 4。

任何帮助或指示将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:32:36.810

好的。现在看来问题已经解决了。为了其他有同样问题的人的利益，这里是如何做到的：

1) 在 IIS 管理器中，转到网站 > 属性 > 主目录 > 配置

2) 为 .cshtml 和 .cshtm 添加两个应用程序扩展名，将两者设置为：

可执行文件 = c:\windows\microsoft.net\framework\v4.0.30319\aspnet_isapi.dll

限制为 = GET、HEAD、POST、DEBUG

请注意，在这样做之后，我仍然遇到浏览器尝试下载文件而不是加载页面的问题。这是通过清除浏览器缓存（使用 Chrome）解决的。

# objective-c - RPN计算器作业2，descriptionOfProgram

> ID：11581126
> 
> 赞同：1
> 
> 时间：2012-07-20T14:13:01.813
> 
> 标签：objective-c, ios, calculator

到目前为止，我已经为这个任务工作了 6 天，我特别感到沮丧，因为我没有更多的想法或方法来完成任务想要的。

我正在描述程序部分（我已经开始使用它，还没有完成其余的分配部分），我不知道该怎么做。这是我目前的实现。

```
+(NSString *)descriptionOfProgram:(id)program
{
if (![self isValidProgram:program]) 
    return @"Invalid program!";
NSMutableArray *stack = [program mutableCopy];
return [self descriptionHelper:stack];
}
+(NSString *)descriptionHelper:(NSMutableArray *)stack
{
NSString *result;
id topOfStack = [stack lastObject];
if (topOfStack) [stack removeLastObject];
if ([topOfStack isKindOfClass:[NSNumber class]]) 
{
   result = [topOfStack stringValue];
}
else if ([topOfStack isKindOfClass:[NSString class]])
{
    result = [NSString stringWithFormat:@"(%@ %@ %@)",[self descriptionHelper:stack],topOfStack,[self descriptionHelper:stack]];
    return result = [self bracketHandler:result];
}
return result;
}
+(NSString *)bracketHandler:(NSString *)stringWithBrackets
{
int lengthOfString = [stringWithBrackets length];
NSString *newString = stringWithBrackets;
if (lengthOfString < 8)
{
    newString = [newString stringByReplacingOccurrencesOfString:@"(" withString:@""];
    newString = [newString stringByReplacingOccurrencesOfString:@")" withString:@""];
}
else 
{
    <#statements#>
}
return newString;
} 
```

我被困在这一点上，我知道我当前的实现似乎很糟糕，但我只想要一个小的指导，告诉我在哪里移动、寻找什么、如何实际完成这项任务并始终显示我的程序的人类可读描述，具有最少数量的括号和逻辑方式。

请我真的很感激只是朝着正确的方向前进，我很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:58:37.993

我不确定，如果我明白你的问题是什么。**如果**您难以确定您的字符串代表什么类型的数据，您可以尝试创建一个字符集 ( `NSCharacterSet* yourSet = [NSCharacterSet characterSetWithCharactersInString:yourString]`) 并测试该字符集是否是您提供的标准集的子集，例如：

```
if ([[NSCharacterSet decimalDigitCharacterSet] isSupersetOfSet: yourSet]) { 
   /* integer number */
} else if ([[NSCharacterSet characterSetWithCharactersInString:@"*/"] isSupersetOfSet: yourSet]) {
   /* multiplication or division */
} else ... 
```

这可能不是最优雅的解决方案，但是它很容易应用并且应该可以工作。

# jsf - 如何将值从循环传递到托管 Bean？

> ID：11581129
> 
> 赞同：2
> 
> 时间：2012-07-20T14:13:11.880
> 
> 标签：jsf

我正在尝试将值从循环传递到托管 Bean。并在视图页面中取回值。这就是我想要做的：

如果我这样做，它只会在 UserPage.xhtml 上打印值

```
<ui:repeat var="userGrp" value="#{printUser.userGroups}">
    <h:outputText value="#{userGrp.name}"/> 
    <br/>                                           
</ui:repeat> 
```

用户页面.xhtml

```
<h:link value="Group" outcome="userDetails">                    
    <ui:repeat var="userGrp" value="#{printUser.userGroups}">
      <f:param name="uGroups" value="#{userGrp.name}"/>                                             
    </ui:repeat>
</h:link> 
```

如何在其他页面上获取这些值？这就是我目前正在做的事情，但它不起作用：

```
<ui:repeat var="userGrp" value="#{param.userGroups}">
    <h:outputText value="#{userGrp.name}"/> 
    <br/>                                           
</ui:repeat> 
```

帮助！

# php - 这个 php for 循环正确吗？

> ID：11581130
> 
> 赞同：0
> 
> 时间：2012-07-20T14:13:20.947
> 
> 标签：php, for-loop

我正在尝试运行我在[http://www.getrank.org/pagerank-script/](http://www.getrank.org/pagerank-script/)上找到的 pagerank 脚本。但是当我尝试它时会收到一条错误消息。下面的错误信息。

这是一个合法的php代码吗？

```
...
function _strord($string){
for($i=0;$i $result[$i] = ord($string{$i});
return $result;
}
... 
```

我在 for 语句开始的行上收到此错误。

```
Parse error: syntax error, unexpected T_VARIABLE, expecting ';' in /home/Desktop/test/pagerank-checker.php on line 73 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:16:03.877

你需要一个比较和一个增量：

```
function _strord( $string) {
    $result = array();
    for( $i = 0, $len = strlen( $string); $i < $len; $result[$i] = ord($string[$i]), $i++);
    return $result;
} 
```

我还对其进行了优化，以省略`strlen()`循环内重复的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:18:07.687

如果您查看该页面上所写内容的**源代码**，您会看到：

```
function _strord($string){<br>
   for($i=0;$i<strlen($string);$i++)<br>
       $result[$i] = ord($string{$i});<br>
   return $result;<br>
}<br> 
```

代码没有被正确转义，因此浏览器将文本`<strlen`视为 HTML 标记的开头，并遗漏了一些重要的代码......

如果没有标记，它会显示：

```
function _strord($string){
   for($i=0;$i<strlen($string);$i++)
       $result[$i] = ord($string{$i});
   return $result;
} 
```

* * *

**编辑**一个更清洁的实现是这样的：

```
function _strord($string) {
    return array_map('ord', str_split($string, 1));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:16:45.283

不知道你想到达那里，但函数应该是这样的：

```
function _strord ($string ) {

  for( $i=0; $i<strlen( $string ); $i++ ) {
    $result[$i] = ord( $string[$i] );
  }

  return $result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:15:48.030

```
function _strord($string){
    $result = "";
    for($i=0;$i < strlen($string), $i++)
        $result[$i] = ord($string[$i]);
    return $result;
} 
```

# windows - 用于 windows 的 espresso 替代品

> ID：11581134
> 
> 赞同：0
> 
> 时间：2012-07-20T14:13:33.550
> 
> 标签：windows, ide, editor, macrabbit-espresso

Espresso 具有实时预览功能，可在我们编写代码时显示代码的实时更改。

我正在寻找 Windows 工具中的相同功能？

Dreamweaver 有那个，但不支持 JS。是否有其他 Web 编辑器或 IDE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:39:50.430

我所知道的最接近的是带有实时编辑插件的[IntelliJ 平台](http://jetbrains.com)（[WebStorm](http://www.jetbrains.com/webstorm/) / [IntelliJ IDEA ）。](http://www.jetbrains.com/idea/)它与 Chrome 插件结合使用。

[您可以在此处](http://www.youtube.com/watch?feature=player_embedded&v=wCVwdvufTds)观看实时编辑演示

设置 Chrome 插件的说明在[这里](http://confluence.jetbrains.net/display/WI/How+to+install+Chrome+extension)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T06:45:15.937

无耻插件：[LIVEditor](http://liveditor.com) - 产品名称中包含**live**一词，以强调其显示**实时 html/css 预览**的功能，即单独与集成**的类似 Firebug 的 html 元素检查**器用于显示**应用的 css 样式**，最重要的性质这个代码编辑器。

![实时 html 代码编辑器，显示所选 html 元素的应用 css 样式](../Images/c2d069bfb4877f5a7d052078e2f6e0dd.png)

# css - CSS issues with horizontal alignment

> ID：11581138
> 
> 赞同：0
> 
> 时间：2012-07-20T14:13:48.530
> 
> 标签：css, alignment

On my website [http://goo.gl/KwP9I](http://goo.gl/KwP9I) section "PRESSE ET MEDIAS" I'd like the youtube video to be centered horizontally and next to it (with a few px space) I'd like to see a text box.

I tried various things found via google but nothing is working.

Any idea how to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:16:39.533

将此添加到您的`.youtube-player`课程中：

```
.youtube-player
{
display:block;
margin-left:auto;
margin-right:auto;
} 
```

编辑：

要获得视频旁边的标题，您必须`float:left`使用视频和`float:right`包装您的 div`<p>hello</p>`

然后保持白色背景，在你的 div 之后，`hello`你需要添加另一个带有样式的空 div`clear:both`

# mysql - 记录与特定的其他记录具有一种关系

> ID：11581143
> 
> 赞同：0
> 
> 时间：2012-07-20T14:13:53.373
> 
> 标签：mysql, sql

这些是我的表：

```
------    ----------     -------
|tags| -- |tagitems|  -- |items|
------    ----------     ------- 
```

所以标签与项目有 am:n 关系。

我想获取所有标签的列表，其中包含一个额外的布尔列，该列是动态创建的，并为每个标签保存布尔值，无论标签与我指定的项目 id 是否相关。

所以想要的结果是：

```
------------------------------
|tag.id | is_assigned_to_item|
------------------------------
|   1   |          true      |
|   3   |          false     |
------------------------------ 
```

使用 mysql 可以查询什么？

干杯

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:18:16.070

```
select tag.tag_id, 
case when item.is_assigned_to_item is null then 'false' else 'true' end
from tag left join item on tag.tag_id=item.tag_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:21:57.360

```
select  t.id , case when t2i.tagid is null then true else false end
from tags t lef join tagitems t2i on t.tagitemid=t2i.tagid [left join items it om it.id =  t2i.itemid ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:23:20.393

使用外连接将标记表关联到 tagitems 表，包括您在 ON 子句中指定的相关 item_id。

```
select tag.tag_id, 
  (count(tagitems.tag_id) > 0) as is_assigned_to_item
from tag 
  left outer join tagitems on tagitems.tag_id=tag.tag_id and tagitems.item_id = ?
group by tag.tag_id 
```

# android - How to show textview at bottom over imageview when size unknown

> ID：11581145
> 
> 赞同：2
> 
> 时间：2012-07-20T14:13:56.217
> 
> 标签：android, android-layout, android-widget

I would really appreciate a little assistance in getting my ui complete.

I am trying to implement my own newsfeed list from facebook. The problem I have is for posts which are photo type or video type. The image resolution they send to preview the post is different each time depending on the resolution of the image initially (i think).

What im wanting to do is display this image in the center of a listview like the facebook app does, whilst having a textview at the bottom of the imageview.

My attempts so far only seem to overlay the textview at the bottom of some of the imageviews (depending on their size) and is distorting the image probably due to my width and height values.

This is what i currently trying

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:background="#ffffff"
android:layout_width="fill_parent" android:layout_height="wrap_content">

<ImageView android:id="@+id/thumbImage" 
    android:padding="10dp"
    android:focusable="true"
    android:background="#ffffff"
    android:layout_width="200dp"
    android:scaleType="centerInside"
        android:layout_height="150dp"
    android:layout_centerInParent="true"
      />

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="180dp"
android:layout_height="50dp"

android:background="#AA000000"
   android:layout_centerHorizontal="true"
android:layout_alignParentBottom="true"
android:orientation="horizontal" >
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent" android:layout_height="fill_parent">
<TextView
    android:id="@+id/imagename" 
android:layout_width="180dp"
android:layout_height="wrap_content" 

android:layout_centerHorizontal="true"
android:layout_alignParentBottom="true"

android:textColor="#ffffff"

android:text="" /></RelativeLayout></LinearLayout> 
```

and i am also doing this

imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:45:34.977

尝试以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff" >

    <RelativeLayout
        android:layout_width="180dp"
        android:layout_height="80dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="#ff0000" >

        <ImageView
            android:id="@+id/thumbImage"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:background="#0000ff"
            android:focusable="true"
            android:padding="0dp"
            android:scaleType="centerInside"
            android:src="@drawable/img3" />

        <TextView
            android:id="@+id/imagename"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Image description is too large that it can not be fit in one line" />

    </RelativeLayout>

</RelativeLayout> 
```

# google-app-engine - 使用 Google Cloud Storage 服务文件未检索到 MIME 类型

> ID：11581146
> 
> 赞同：1
> 
> 时间：2012-07-20T14:13:57.100
> 
> 标签：google-app-engine

我正在使用 Google Cloud Storage 在 Google App Engine 中存储一个文件。该文件加载正常，但服务返回一个解释为二进制文件而不是原始 mime 类型的文件。您将在后面找到代码。有没有人知道发生了什么？

## 一、存储文件

```
GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
.setBucket(BUCKET_NAME)
.setKey(objectId)
.setAcl("project-private")
.setMimeType(mimeType)
.setContentDisposition("attachment;filename "+item.getName()); 
```

## 二、服务文件

blobKey = blobstoreService.createGsBlobKey("/gs/"+BUCKET_NAME+"/"+ fileName);

blobstoreService.serve(blobKey, resp);

## 三、与在 blobstore 中提供文件的区别

我有一段过去可以工作的代码。问题在于，显然 BlobInfo 对象仅适用于存储在 blobstore 中的对象，而不适用于存储在 Google Cloud Storage 中的对象

```
BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(blobKey); 
resp.setContentLength(new Long(blobInfo.getSize()).intValue()); 
resp.setHeader("content-type", blobInfo.getContentType()); 
resp.setHeader("content-disposition", "attachment; filename=" + 
blobInfo.getFilename()); 
        blobstoreService.serve(blobKey, resp); 
```

非常欢迎任何帮助！

谢谢，

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:56:55.537

因为您自己为 blob 提供服务，所以使用 blob 服务服务，您可以正确设置所有 HTTP 标头，包括内容类型。如果你想使用存储对象的内容类型，你应该自己获取它并在标题中设置它。

或者，您可以直接链接到 Google Storage 中的对象路径，在这种情况下，它将由 Google Storage 基础设施提供服务，并具有正确的 mimetype。

# c# - 实体框架异常：无效的对象名称

> ID：11581147
> 
> 赞同：27
> 
> 时间：2012-07-20T14:13:57.523
> 
> 标签：c#, .net, entity-framework

我正在尝试使用 Code First 方法创建数据库。当我运行以下代码时，出现以下异常。我定义的字段有什么问题吗？我们怎样才能克服这一点？

**例外**：

> 更新条目时出错。有关详细信息，请参阅内部异常。

**内部异常**：

> “无效的对象名称'dbo.Dinners'。

**注意**：我的数据库中没有这样的表（晚餐）。该代码应该创建表。[如EF Code First: Cannot connect to SQL Server](https://stackoverflow.com/questions/11580431/ef-code-first-cannot-connect-to-sql-server)中所述，我只是给出了连接字符串来标识服务器。我应该更改连接字符串吗？

**连接字符串：**

> string connectionstring = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";

LibraryReservationSystem 数据库已经是现有的数据库。它没有桌子。我期待 EF 创建表。

我从工作中的 LINQ 2 SQL 应用程序复制的连接字符串。我需要对其进行任何更改以提供给 EF 吗？

![在此处输入图像描述](../Images/aa5fe40341b7ca7d2feeb8e262ecf425.png)

**更新**

当我包含以下代码时，异常发生了变化。现在它说 - “无效的对象名称'dbo.Dinner'。”。它现在抱怨餐桌；不是餐桌。

```
 protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    } 
```

**原始代码**

```
 static void Main(string[] args)
    {

        string connectionstring = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";

        using (var db = new NerdDinners(connectionstring))
        {
            var product = new Dinner { DinnerID = 1, Title = 101 };
            db.Dinners.Add(product);
            int recordsAffected = db.SaveChanges();
        }

    }

using System.Data.Entity;
namespace LijosEF
{
public class Dinner
{
    public int DinnerID { get; set; }
    public int Title { get; set; }

}

public class RSVP
{
    public int RSVPID { get; set; }
    public int DinnerID { get; set; }

    public virtual Dinner Dinner { get; set; }
}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    public DbSet<Dinner> Dinners { get; set; }
    public DbSet<RSVP> RSVPs { get; set; }
}
} 
```

**参考**

1.  [http://nerddinner.codeplex.com/discussions/358197](http://nerddinner.codeplex.com/discussions/358197)
2.  [实体框架 - 无效的对象名称](https://stackoverflow.com/questions/9367379/entity-framework-invalid-object-name)
3.  [从生成的表中检索数据时对象名称“dbo.TableName”无效](https://stackoverflow.com/questions/10473184/invalid-object-name-dbo-tablename-when-retreiving-data-from-generated-table)
4.  [http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-23T15:46:28.933

> LibraryReservationSystem 数据库已经是现有的数据库。它没有桌子。我期待 EF 创建表。

这是不正确的。如果数据库存在，EF 不会在此数据库中创建任何表。如果数据库不存在，EF 可以创建它。`CreateDatabaseIfNotExists`如果您不明确更改它，那将是默认的数据库初始化程序。您可以选择其他两个初始化程序：`DropCreateDatabaseAlways`或`DropCreateDatabaseIfModelChanges`. 但是这些都不会只在现有数据库中创建表，而是完全删除数据库并从头开始创建它，包括所有表。

你能做什么：

*   手动删除数据库（例如在 SSMS 中），然后 EF 将创建一个包含表的新数据库
*   或者使用`DropCreateDatabaseAlways`初始化器*一次*让 EF 创建包括表的数据库，然后再次删除初始化器
*   ~~或者，如果您出于某种原因无法删除数据库，请在`Seed`将表添加到数据库的方法中~~编写 SQL 代码（错误，感谢 Mark Stafford 的评论）
*   或者，当您添加新实体时，使用*Code-First Migrations* (EF >= 4.3) 将新表添加到现有数据库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T15:58:21.840

@Slauma 的答案是正确的 - 表是在初始化时创建的。删除数据库并让 EF 创建它可能是最简单的（如果您保留连接字符串，它将在本地计算机上创建一个名为 LibraryReservationSystem 的数据库；如果要使用，您可能应该指定一个明确的主机名此时配置中的连接字符串）。

你需要一些类似的东西：

```
public class NerdDinnersInitializer : DropCreateDatabaseIfModelChanges<NerdDinners> { } 
```

您还需要在 Main 方法中设置初始化程序：

```
Database.SetInitializer(new NerdDinnersInitializer()); 
```

明智的说法：永远不要使用上面提到的初始化程序部署应用程序。您可以查看[这篇关于如何通过配置文件控制初始化程序的博客文章](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)，了解有关如何在生产应用程序中控制初始化程序的更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T10:00:36.273

我刚刚遇到了完全相同的问题——我已经在需要 SQL 身份验证的网络内的开发 SQL 框上创建了我的数据库。

当我运行我的应用程序时，没有创建任何表。我发现这篇关于创建[Code First Database Initializer Strategy](http://www.codeproject.com/Articles/203618/Creating-a-Code-First-Database-Initializer-Strateg)的精彩但简单的文章首先检查数据库是否存在，然后针对数据库运行脚本以创建表。

如文章所述 - 请**注意，当部署这样的策略时，每当应用程序重新启动时，所有数据库表都会重新创建！这个策略应该只运行一次。**

但你已经知道了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:15:41.710

正如错误所暗示的，您的数据库中没有调用表`Dinners`。

您使用的是单表名还是复数表名？即晚餐或晚餐？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T15:14:02.597

据我了解，您期​​望代码根据您的实体描述自动创建数据库。但除非您明确创建数据库，否则这不会发生。请检查以下链接[http://www.simple-talk.com/dotnet/.net-framework/entity-framework-4460---learn-to-create-databases-from-the-model/](http://www.simple-talk.com/dotnet/.net-framework/entity-framework-4460---learn-to-create-databases-from-the-model/) 和本教程EF 代码优先：http: [//codefirst.codeplex.com/](http://codefirst.codeplex.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T20:21:19.517

设计好实体后，您可以右键单击 EDMX 文件的工作区并选择“从模型生成数据库...”。单击直到您的窗口中有一个脚本。对于该脚本，您必须删除数据库创建步骤（如果存在）并直接进行 CREATE TABLE ...

复制粘贴并在您拥有的任何数据库中执行。您可能需要针对特定​​的 RDBMS 调整脚本。

# ios5 - setxattr fails with errno 2 (ENOENT) on iOS 5.0 or less

> ID：11581153
> 
> 赞同：0
> 
> 时间：2012-07-20T14:14:11.267
> 
> 标签：ios5, backup, icloud

I am storing some persistent data in /Documents directory which app gets from an API call and is needed to start the app. Apple rejected the app suggesting to skip the iCloud backup.

I used the code described in [https://developer.apple.com/library/ios/#qa/qa1719/_index.html](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)

which is

```
if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        assert([[NSFileManager defaultManager] fileExistsAtPath: path]);

        const char* filePath = [path fileSystemRepresentation];
        printf("[path fileSystemRepresentation] %s\n",filePath);
        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;
        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        NSLog(@"errno %d", errno);
        return result == 0;
    } else { // iOS >= 5.1
        NSURL* url = [NSURL fileURLWithPath:path];
        NSError *error = nil;
        BOOL success = [url setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        NSLog(@"Error excluding %@ from backup %@", [url lastPathComponent], error);
        return success;

    } 
```

It works fine with iOS 5.1 simulator. I checked in filesystem using

```
$xattr "filename" 
```

and it shows me

```
filename: com.apple.metadata:com_apple_backup_excludeItem 
```

However its not working on 5.0 simulator and also on 5.0.1 3GS device that I tested on.

I stepped thru the code and in the if part (<=5.0.1), I also printed the global var errno as suggested in the Technical Q&A article by apple. However the call to setxattr is failing and errno is printing to be 2 which is ENOENT as per [http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/intro.2.html](http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/intro.2.html)

I am also printing out the filePath and its not empty and printing out correctly. I checked using iExplorer, the files are on the device as well as in the Simulator folder, they are getting created.

Has anyone faced this? Not sure how to address this?

Any help highly appreciated!

Thanks for you time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:42:01.070

好的......我的坏......它做的一切都是正确的。它应该返回 0 以成功执行 setxattr ......但它仍然返回一个让我绊倒的错误代码......无论如何代码都按预期工作。

# ruby-on-rails - Apply I18 to Ruby on Rails Completed Site.

> ID：11581154
> 
> 赞同：0
> 
> 时间：2012-07-20T14:14:16.187
> 
> 标签：ruby-on-rails, internationalization, i18n-gem

I am new to **Internationalization(I18)**. I want to apply I18 to my Ruby on Rails site but the problem is site is already complete and I don't want to go to each HTML page change the code. I want my site in English, French, and Spanish language.

Please show me the way and I appreciate any example or tutorial for I18.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:27:13.403

除非您继承站点上的开发团队在创建站点时考虑了 future-I18n（例如，字符串不是硬编码的，而是使用该方法在**config/locales/en.yml**`I18n.translate`中找到的引用值），否则您将别无选择进入并更改使用您要翻译的字符串的每个文件。

我确定您已经找到了以下参考资料，但以防万一，您可能应该从这些参考资料开始：

*   [Rails I18n 指南](http://guides.rubyonrails.org/i18n.html)
*   [Rails I18n Railscast](http://railscasts.com/episodes/138-i18n)
*   [Rails I18n 后端 Railscasts](http://railscasts.com/episodes/256-i18n-backends)
*   StackOverflow 上的其他 Rails I18n 问题

正如@Dougui 指出的那样，您可能还有很多工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:36:26.450

对不起，但我认为没有办法做到这一点。这只是一个很长的工作......祝你好运！

# c++ - Flush queued GPIB responses

> ID：11581160
> 
> 赞同：0
> 
> 时间：2012-07-20T14:14:35.633
> 
> 标签：c++, linux, embedded, gpib

Architecture ->GBIP from external interface is connected to target ( linux) system via gpib bus. Inside Linux box , there is ethernet cable from GPIB to motherboard.

The PIC_GPIB card on external interface is IEEE 488.2

I am sending a query from external interface to linux box.

Few scenarios

1) If I send a query which does not expect a response back , then next query send will work.

2) If I send a query which expect response back , and when I have received the response and read it and then fire next query it works fine.

**3) BUT if I send a query from external interface and got response back and I ignore to read the response , then Next query fails. I am requesting help for scenario 3.**

The coding is done on linux side and its a socket programming , which uses linux inbuilt function from unistd.h for read and write.

**My investigation** : I have found there is a internal memory on gbib card on external interface which stores the value of previous response until we have the read. Generally I use IEEE string utility software to write commands that goes to linux box and read reposne via read button .

Could someone please direct me how to clean input buffer or memory which stores value so that write from external command contiunues without bothering to read it.

My code on linux side has been developed in C++ and socket programming. I have used in bulit write and read function to write and read to the gpib and to json server.

Sample code is shown below

```
 bool GpibClass::ReadWriteFromGPIB()
{
  bool check = true;
  int n = 0;
  char buffer[BUFFER_SIZE];
  fd_set read_set;
  struct timeval lTimeOut;

  // Reset the read mask for the select
  FD_ZERO(&read_set);
  FD_SET(mGpibFd, &read_set);
  FD_SET(mdiffFd, &read_set);

  // Set Timeout to check the status of the connection
  // when no data is being received
  lTimeOut.tv_sec = CONNECTION_STATUS_CHECK_TIMEOUT_SECONDS;
  lTimeOut.tv_usec = 0;

  cout << "Entered into this function" << endl;

  // Look for sockets with available data
  if (-1 == select(FD_SETSIZE, &read_set, NULL, NULL, &lTimeOut))
  {
    cout << "Select failed" << endl;

    // We don't know the cause of select's failure.
    // Close everything and start from scratch:
    CloseConnection(mGpibFd);
    CloseConnection(mdifferntServer); // this is different server

    check = false;
  }

  // Check if data is available from GPIB server,
  // and if any read and push it to gpib
  if(true == check)
  {
    cout << "Check data from GPIB after select" << endl;

    if (FD_ISSET(mGpibFd, &read_set))
    {
      n = read(mGpibFd, buffer, BUFFER_SIZE);

      cout << "Read from GPIB" << n << " bytes" << endl;

      if(0 < n)
      {
        // write it to different server and check if we get response from it
      }
      else
      {
        // Something failed on socket read - most likely
        // connection dropped. Close socket and retry later
        CloseConnection(mGpibFd);

        check = false;
      }
    }
  }

  // Check if data is available from different server,
  // and if any read and push it to gpib
  if(true == check)
  {
    cout << "Check data from diff server after select" << endl;

    if (FD_ISSET(mdiffFd, &read_set))
    {
      n = read(mdiffFd, buffer, BUFFER_SIZE);

      cout << "Read from diff servewr " << n << " bytes" << endl;

      if (0 < n)
      {
        // Append, just in case - makes sure data is sent.
        // Extra cr/lf shouldn't cause any problem if the json
        // server has already added them
        strcpy(buffer + n, "\r\n");

        write(mGpibFd, buffer, n + 2);
        std::cout <<" the buffer sixze  = " << buffer << std::endl;

      }
      else
      {
        // Something failed on socket read - most likely
        // connection dropped. Close socket and retry later
        CloseConnection(mdiffFd);

        check = false;
      }
    }
  }

  return check;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:42:28.820

您通常应该在任何可能生成响应的操作之后阅读响应。

如果您不这样做，一个简单的解决方案是循环读取响应，直到您将队列排空。

您可以重置仪器（可能是 *RST），但您也可能会失去其他状态。您将不得不检查它的文档以查看是否有仅重置响应队列的命令。检查文档始终是一个好主意，因为精确符合规范的仪器数量与以独特方式增加或省略部件的数量相比相形见绌。

# javascript - Firefox 不呈现 jQuery 模板

> ID：11581165
> 
> 赞同：0
> 
> 时间：2012-07-20T14:15:17.380
> 
> 标签：javascript, jquery, templates, firefox, jquery-templates

我正在为我开发的网站使用 jQuery 模板，它们在 Chrome、Safari 甚至 IE9 上运行良好，但模板无法在 Firefox 上呈现。我在外部加载它们，并且 $.get 被处理（我已经检查了 Firebug，get 通过并提取了正确的文件），但是随后我看到了一个空白页面并检查了 html 显示了 body 元素仅包含页脚（包含在 html 中），但显示：无，这是它应该的样子，所以 javascript 运行完成（因为页脚隐藏在 loadtemplate 函数中）。Firefox 似乎只是跳过了 $.tmpl() 调用。这是功能：

```
var loadTemplate = function(templateName){
     $.get(templateName, function(template){
        $.tmpl(template).appendTo("body");
    });
};
var loadHomePage = function(){
    history = [];
    clearPage();
    loadTemplate("./templates/home.tmpl");
    current_page = "./templates/home.tmpl";
}
var clearPage = function(){
  $(".page-content").remove();
  $(".page-header").remove();
  $("#popup-container").remove();
  $(".page-footer").hide();
}; 
```

任何帮助将不胜感激，如果需要，我也可以跟进更多代码。

编辑：即使在 Opera 上工作，我也不需要支持它，所以样式不起作用（使用 Opera 不支持的 LESS 和严格用于 IE 的 css 文件），但它仍然可以毫无问题地加载模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:09:09.187

请求模板可能会被某些浏览器处理为 HTML，这反过来又会导致模板损坏。尝试将数据类型设置为“文本”，以便所有浏览器正确返回未修改的文本。

```
$.get(templateName, function(template){
    $.tmpl(template).appendTo("body");
}, "text"); 
```

# heroku - Heroku error can't login

> ID：11581166
> 
> 赞同：0
> 
> 时间：2012-07-20T14:15:17.787
> 
> 标签：heroku, facebook-apps

I'm using a mac with leopard 10.5.8 after installing the Heroku Toolbelt, I type in the Terminal the command Heroku but I end up with this message:

```
> /usr/local/heroku/vendor/gems/heroku-api-0.2.13/lib/heroku/api.rb:3:in `require': no such file to load -- securerandom (LoadError)
    from /usr/local/heroku/vendor/gems/heroku-api-0.2.13/lib/heroku/api.rb:3
    from /usr/local/heroku/vendor/gems/heroku-api-0.2.13/lib/heroku-api.rb:1:in `require'
    from /usr/local/heroku/vendor/gems/heroku-api-0.2.13/lib/heroku-api.rb:1
    from /usr/local/heroku/lib/heroku/cli.rb:7:in `require'
    from /usr/local/heroku/lib/heroku/cli.rb:7
    from /usr/bin/heroku:22:in `require'
    from /usr/bin/heroku:22 
```

# android - android play 商店更新和恢复

> ID：11581170
> 
> 赞同：0
> 
> 时间：2012-07-20T14:15:22.830
> 
> 标签：android, google-play

谢天谢地，我认为我的应用程序没有问题，但是这个问题的机会让我想问关于 SO 的问题。

场景：假设很多人都为我的应用程序设置了自动更新（就像我一样），如果我发布了一个在市场上渗透的更新，结果却发现我已经搞砸了一些重大的事情并且需要时间来修复，会发生什么。我的第一个动作是停用最新版本，并激活下一个旧版本。

问题：如果他们有更新的版本，电话会发生什么？它会自动更新到较旧的“实时”版本吗？

是的，我知道我应该测试，测试，测试，这样我就永远不会进入这个位置......;-)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:25:32.810

不，降级不起作用，但是，通过取消发布有问题的应用程序，您可以防止那些尚未升级的人面临问题，但那些已经升级的人可以简单地卸载该应用程序并重新安装，从而恢复到上一个​​稳定版本。Market 不会降级已安装的应用程序。它仅适用于更新（比较版本代码）

# c++ - 为什么我可以为除 self 之外的每个类创建强制转换运算符

> ID：11581174
> 
> 赞同：-3
> 
> 时间：2012-07-20T14:15:41.727
> 
> 标签：c++

```
struct B 
{

};

struct A
{
    operator A&() const;
    operator B&() const;
};

int main()
{
    const A a;
    B& br = a;
    A& ar = a;  
} 
```

为什么我可以创建强制转换运算符 to `B&`，但不能创建`A&`.

可能它没有多大意义（可以用它来擦除`const`修饰符，如示例），但它至少不一致！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:11:06.043

你不能这样做，因为它被明确禁止。N3290 § 12.3.2 规定：

> 此类函数称为转换函数。不能指定返回类型。如果转换函数是成员函数，则转换函数的类型（8.3.5）是“不带参数返回转换类型ID的函数”。**转换函数永远不会用于将（可能是 cv 限定的）对象转换为（可能是 cv 限定的）相同的对象类型（或对它的引用）**，转换为该类型的（可能是 cv 限定的）基类（或对它的引用）或（可能是 cv 限定的）void。

（强调我的）

这在注释中进一步讨论：

> 出于重载决议 (13.3.3.1, 13.3.3.1.4) 以及因此初始化 (8.5) 和显式转换 (5.2.9) 的目的，这些转换被视为标准转换。

这解释了这个决定 - 它会过多地干扰内置机制。（收获甚微）。

如果你真的想要一些非对象的东西`const`，`const`唯一聪明的方法是使用复制构造函数构造一个新实例。

作为一种解决方法，您可以引入一个轻量级中介（如智能指针）：

```
struct B {};

struct A {};

namespace {
  B b_inst;
  A a_inst;
}

struct A_wrapper {
  A& inst;
  // This is perfectly fine: const alters the reference, not what it refers to
  operator A&() const { return inst; }
  operator B&() const { return b_inst; }
  A_wrapper() : inst(a_inst) {}
};

int main() {
  const A_wrapper a;
  B& br = a;
  A& ar = a;
} 
```

但实际上，一开始就想做这件事看起来像是代码味道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:18:48.420

正确的方法是使用[const_cast](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/keyword_const_cast.htm)。

例如，

```
#include <iostream>
using namespace std;

void f(int* p) {
  cout << *p << endl;
}

int main(void) {
  const int a = 10;
  const int* b = &a;

  // Function f() expects int*, not const int*
  //   f(b);
  int* c = const_cast<int*>(b);
  f(c);

  // Lvalue is const
  //  *b = 20;

  // Undefined behavior
  //  *c = 30;

  int a1 = 40;
  const int* b1 = &a1;
  int* c1 = const_cast<int*>(b1);

  // Integer a1, the object referred to by c1, has
  // not been declared const
  *c1 = 50;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T15:03:35.127

声明转换为对 self 的引用并不是错误的。您的问题出现在您的引用被初始化的时候。由于引用的类型和初始化表达式的类型相同，因此`bound directly`永远不会考虑引用和您的用户定义的转换运算符。因此，正常的转换规则适用，而 const 转换使代码格式错误。

无论如何，您所做的基本上是要求自己中弹。如果您不喜欢`constness`，**请不要使用它**。如果你一直这样做，它永远不会打扰你，但它不会让你结交新朋友。

# scala - How to generate the power set of a set in Scala

> ID：11581175
> 
> 赞同：21
> 
> 时间：2012-07-20T14:15:41.587
> 
> 标签：scala, set, powerset

I have a Set of items of some type and want to generate its power set.

I searched the web and couldn't find any Scala code that adresses this specific task.

This is what I came up with. It allows you to restrict the cardinality of the sets produced by the length parameter.

```
def power[T](set: Set[T], length: Int) = {
   var res = Set[Set[T]]()
   res ++= set.map(Set(_))

   for (i <- 1 until length)
      res = res.map(x => set.map(x + _)).flatten

   res
   } 
```

This will not include the empty set. To accomplish this you would have to change the last line of the method simply to res + Set()

Any suggestions how this can be accomplished in a more functional style?

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-29T05:32:56.960

看起来在 7 月份没有人知道它，但是有一个内置的方法：`subsets`.

```
scala> Set(1,2,3).subsets foreach println
Set()
Set(1)
Set(2)
Set(3)
Set(1, 2)
Set(1, 3)
Set(2, 3)
Set(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-20T14:25:01.197

请注意，如果您有一个集合`S`和另一个集合`T`where `T = S ∪ {x}`（即`T`添加`S`了一个元素），那么`T`- `P(T)`- 的幂集可以用`P(S)`以下形式表示`x`：

```
P(T) = P(S) ∪ { p ∪ {x} | p ∈ P(S) } 
```

也就是说，您可以**递归地定义幂集**（注意这如何免费为您提供幂集的大小 - 即添加 1 个元素会使幂集的大小加倍）。因此，您可以在 scala 中以递归方式执行此操作，如下所示：

```
scala> def power[A](t: Set[A]): Set[Set[A]] = {
   |     @annotation.tailrec 
   |     def pwr(t: Set[A], ps: Set[Set[A]]): Set[Set[A]] =
   |       if (t.isEmpty) ps
   |       else pwr(t.tail, ps ++ (ps map (_ + t.head)))
   |
   |     pwr(t, Set(Set.empty[A])) //Powerset of ∅ is {∅}
   |   }
power: [A](t: Set[A])Set[Set[A]] 
```

然后：

```
scala> power(Set(1, 2, 3))
res2: Set[Set[Int]] = Set(Set(1, 2, 3), Set(2, 3), Set(), Set(3), Set(2), Set(1), Set(1, 3), Set(1, 2)) 
```

它实际上看起来好多了`List`（即递归 ADT）：

```
scala> def power[A](s: List[A]): List[List[A]] = {
   |     @annotation.tailrec 
   |     def pwr(s: List[A], acc: List[List[A]]): List[List[A]] = s match {
   |       case Nil     => acc 
   |       case a :: as => pwr(as, acc ::: (acc map (a :: _)))
   |     }
   |     pwr(s, Nil :: Nil)
   |   }
power: [A](s: List[A])List[List[A]] 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-20T15:20:14.173

这是编写它的更有趣的方法之一：

```
import scalaz._, Scalaz._

def powerSet[A](xs: List[A]) = xs filterM (_ => true :: false :: Nil) 
```

哪个按预期工作：

```
scala> powerSet(List(1, 2, 3)) foreach println
List(1, 2, 3)
List(1, 2)
List(1, 3)
List(1)
List(2, 3)
List(2)
List(3)
List() 
```

例如，请参阅[此讨论线程](http://www.haskell.org/pipermail/haskell-cafe/2009-August/064911.html)以了解其工作原理。

（正如 debilski 在评论中指出的那样，`ListW`也拉皮条`powerset`到`List`，但这并不好玩。）

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-20T15:19:10.677

使用内置`combinations`函数：

```
val xs = Seq(1,2,3)
(0 to xs.size) flatMap xs.combinations

// Vector(List(), List(1), List(2), List(3), List(1, 2), List(1, 3), List(2, 3),
// List(1, 2, 3)) 
```

请注意，我作弊并使用了 a `Seq`，因为未知原因，`combinations`在`SeqLike`. 因此，使用一组，您需要转换为/从 a `Seq`：

```
val xs = Set(1,2,3)
(0 to xs.size).flatMap(xs.toSeq.combinations).map(_.toSet).toSet

//Set(Set(1, 2, 3), Set(2, 3), Set(), Set(3), Set(2), Set(1), Set(1, 3), 
//Set(1, 2)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-24T10:44:53.897

可以很简单：

```
def powerSet[A](xs: Seq[A]): Seq[Seq[A]] = 
  xs.foldLeft(Seq(Seq[A]())) {(sets, set) => sets ++ sets.map(_ :+ set)} 
```

递归实现：

```
def powerSet[A](xs: Seq[A]): Seq[Seq[A]] = {
  def go(xsRemaining: Seq[A], sets: Seq[Seq[A]]): Seq[Seq[A]] = xsRemaining match {
    case Nil => sets
    case y :: ys => go(ys, sets ++ sets.map(_ :+ y))
  }

  go(xs, Seq[Seq[A]](Seq[A]()))
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-08T17:24:37.437

所有其他答案似乎有点复杂，这是一个简单的函数：

```
 def powerSet (l:List[_]) : List[List[Any]] =
      l match {
       case Nil => List(List())
       case x::xs =>
         var a = powerSet(xs)
         a.map(n => n:::List(x)):::a
      } 
```

所以

```
 powerSet(List('a','b','c')) 
```

将产生以下结果

```
 res0: List[List[Any]] = List(List(c, b, a), List(b, a), List(c, a), List(a), List(c, b), List(b), List(c), List()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-27T19:21:57.203

这是另一个（懒惰的）版本......因为我们正在收集计算幂集的方法，我想我会添加它：

```
def powerset[A](s: Seq[A]) =
  Iterator.range(0, 1 << s.length).map(i =>
    Iterator.range(0, s.length).withFilter(j =>
      (i >> j) % 2 == 1
    ).map(s)
  ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-24T21:59:18.047

这是一个使用辅助函数的简单递归解决方案：

```
def concatElemToList[A](a: A, list: List[A]): List[Any] = (a,list) match {
    case (x, Nil)                 => List(List(x))
    case (x, ((h:List[_]) :: t))  => (x :: h) :: concatElemToList(x, t)
    case (x, (h::t))              => List(x, h) :: concatElemToList(x, t)
}

def powerSetRec[A] (a: List[A]): List[Any] = a match {
    case Nil    => List()
    case (h::t) => powerSetRec(t) ++ concatElemToList(h, powerSetRec (t))
} 
```

所以呼唤

```
powerSetRec(List("a", "b", "c")) 
```

会给出结果

```
List(List(c), List(b, c), List(b), List(a, c), List(a, b, c), List(a, b), List(a)) 
```

# android - What should the Android device ID length be

> ID：11581177
> 
> 赞同：8
> 
> 时间：2012-07-20T14:15:45.343
> 
> 标签：android, udid

Can anybody please tell me the length for device UDID in Android, because I got the UDID in android and it is only 16 characters, but the iPhone UDID length is 40.

I am using the following code to detect the ID:

```
id = android.provider.Settings.System.getString(super.getContentResolver(),
    android.provider.Settings.Secure.ANDROID_ID); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-02-08T12:03:57.600

安卓 ID 是

## **最多 16 个字符**

因为至少在某些常见的 Android 版本中没有假装前导零。看看这个类似问题的答案，为什么会这样： [https ://stackoverflow.com/a/29890124/2066744](https://stackoverflow.com/a/29890124/2066744)

文档在此处将其指定为*64 位数字（表示为十六进制字符串）*： [https ://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID](https://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T14:24:12.587

我有两个使用此代码的设备

```
String device_id =  Secure.getString(getContentResolver(), Secure.ANDROID_ID); 
```

# javascript - What is this functionality called, and is it in HTML or Javascript?

> ID：11581179
> 
> 赞同：0
> 
> 时间：2012-07-20T14:15:47.520
> 
> 标签：javascript, html, css

I'd like to find out how this is commonly implemented, mainly because I can't seem to find it in the source code - it's the "graying out" of text that happens whenever a menu-option/button is unable to be clicked. I'm trying to find it in firebug but this is what I find for the image:

```
<input
    type="submit"
    onclick="LoadingMsg();"
    class="btnclass"
    disabled="disabled"
    id="ctl00_ctl00_Content_ContentItems_btnUpdateQuotas1"
    value="Update Quotas"
    name="ctl00$ctl00$Content$ContentItems$btnUpdateQuotas1"
> 
```

This is what it looks like:

![enter image description here](../Images/fe7e03917833fe25f466b5ed783bc5ec.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:16:49.540

它是 HTML，但可以使用 JavaScript 来操作 HTML 输入/选择元素以具有该属性。

这是执行此操作的属性：`disabled="disabled"`

JavaScript 操作此属性的一个基本示例是：

```
document.getElementById('elementid').disabled = true;  // Disable element
document.getElementById('elementid').disabled = false; // Enableelement 
```

资源：[禁用属性](http://reference.sitepoint.com/html/input/disabled)

# asp.net - HTML rendered incorrectly for dynamic HTML content using master page

> ID：11581187
> 
> 赞同：0
> 
> 时间：2012-07-20T14:16:09.963
> 
> 标签：asp.net, html, dynamic, rendering

I have a content page which has some dynamic HTML and some static HTML. This dynamic HTML is assigned to a hidden variable in page load.

Content page HTML

```
<asp:HiddenField id = "hid"  runat="server"></asp> 
```

CS of content page

```
protected void Page_Load(object sender, EventArgs e)
{
  hid.Value = node1.InnerText;
} 
```

This content page has master page. Below is its page directive

```
<%@ Page Title="" Language="C#" MasterPageFile="~/log.Master"
  AutoEventWireup="true" CodeBehind="Log.aspx.cs" Inherits="s.Log"
  ValidateRequest="false" %>` 
```

Below is snippet of Content page

```
<%@ Page Title="" Language="C#" MasterPageFile="~/log.Master"
  AutoEventWireup="true"  CodeBehind="Log.aspx.cs" Inherits="s.Log"
  ValidateRequest="false" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
  <asp:HiddenField id = "hid"  runat="server"/>
</asp:Content>` 
```

Now when content page loads, static HTML is loaded inside master page, but dynamic contents are rendered outside master page hence shows wrong rendering.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:08:01.527

关键`<asp:HiddenField>`是它是隐藏的——因此其中包含的任何信息都应该定义永远不会在页面上呈现。

如果该字段的内容包含任何可能导致其中断的 HTML 代码（例如尚未编码的 HTML 代码）......那么它可能会显示某些内容，但很可能是不正确的。我想这就是你所看到的。

我不完全确定您为什么要使用`HiddenField`，或者您要对它的内容做什么，但我建议您更改以下行...

```
hid.Value = node1.InnerText; 
```

和...

```
hid.Value = Server.HtmlEncode(node1.InnerText); 
```

# javascript - get rotating points of canvas after rotating the canvas

> ID：11581189
> 
> 赞同：0
> 
> 时间：2012-07-20T14:16:13.737
> 
> 标签：javascript, html

I am rotating an image with shape(e.g. Rectangle, Circle etc).

On rotation value 0, i can draw all my shapes on mouse move smoothly.

but on rotation value(e.g 90,180,270 means greater than o) :- On apply rotation i am rotating image and shapes simultaneously. But when i am trying to draw any shape, drawing is happen directionlessly. If am moving annotation from **left to right** then shape is drawing from **right to left**, from **top to bottom** to "bottom to top"..

I am rotating both canvas image as well as for shapes.

I have tried a lots from my side. But i am finding way to do this.

**Thanks In Advance**

# java - Spring 3 MVC 会话变量存在多长时间？

> ID：11581191
> 
> 赞同：0
> 
> 时间：2012-07-20T14:16:20.883
> 
> 标签：java, spring-mvc, session-variables

我正在尝试实现一种客户端分页，一次只显示 X 条记录，然后当客户端想要查看更多数据时，我会显示下一条 X 条记录，依此类推。为此，我尝试使用会话变量，但每次检查它的值时它都是空的。我真的不太了解 Spring MVC，所以任何帮助将不胜感激：

```
@Controller
@RequestMapping(value = "/api/rest/da")
@SessionAttributes({"sessionRowKey"})
public class DAController {
    /**
     * Default constructor for DAController
     */
    public DAController() {
    }

    /**
     *  Initialize the SessionAttribute 'sessionRowKey' if it does not exist
     */
    @ModelAttribute("sessionRowKey")
    public String createSessionRowKey()
    {
        return "";
    } 
```

在这里我检查值是否为空，这是我初始化它的值，然后设置值：

```
@RequestMapping(value = "/getModelData/{namespace}/{type}/{rowkey:[^\\.]*\\.[^\\.]*}", method = RequestMethod.GET)
public
@ResponseBody
Map<String, Map<String, String>> getModelData(String namespace,
                                              String type,
                                              String rowkey,
                                              @ModelAttribute("sessionRowKey") String sessionRowKey,
                                              HttpServletRequest request)
{
    try 
    {
        ModelType modelType = ModelType.fromString(type);
        Model model;
        if(modelType == ModelType.STATISTICAL)  //page the data
        {
            //code abstracted
            List<KeyValue> records = results_arr[30].list();

            if(sessionRowKey.equals(""))
            {
                model = modelReader.readModel(namespace, modelType, rowkey);
                request.getSession().setAttribute("sessionRowKey", records.get(0).toString());
            }
            else model = modelReader.readModel(namespace, modelType, sessionRowKey);
        }
        else
        {
            model = modelReader.readModel(namespace, modelType, rowkey);
        }
    } 
    catch (Exception e) 
    {
        logger.log(Level.ERROR, "Error in DAController.getModelData: " + e.getMessage());
    }
} 
```

每次我检查会话变量时，它总是“”，会话变量的生存时间是多久？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:42:45.273

使用 HttpSession 参数并使用此参数获取 sessionRowKey，而不是 @ModelAttribute 注释参数 (sessionRowKey)。例如：

```
... HttpSession httpSession, ...

...

String sessionRowKey = (String)httpSession.getAttribute("sessionRowKey");

... 
```

注意：以上适用于 Java EE 5 及更高版本。对于 J2EE 1.4 和之前的版本，使用 HttpSession.getValue 和 HttpSession.setValue 方法。

# ios - MBProgressView 睡眠混合视图

> ID：11581193
> 
> 赞同：0
> 
> 时间：2012-07-20T14:16:25.407
> 
> 标签：ios, mbprogresshud

我试图在我的应用程序中显示 HUD 的混合，例如，当用户点击“登录”时，我希望我的 HUD 显示微调器说“登录...”，然后更改为复选标记图像说“登录！”，然后隐藏。我正在尝试使用以下代码来完成此操作：

```
MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
HUD.labelText = @"Logging in";
\\Do network stuff here, synchronously (because logging in should be synchronous)

\\ Then upon success do:
HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkmark.png"]];
HUD.mode = MBProgressHUDModeCustomView;
HUD.labelText = @"Logged in!";
sleep(2);
[MBProgressHUD hideHUDForView:self.view animated:YES]; 
```

这里的问题是，`sleep(2)`它被应用于初始微调器，而不是复选标记 HUD。所以微调器显示的时间更长，而复选标记会在一瞬间消失。我该怎么做才能使复选标记在 HUD 隐藏之前在那里停留更长时间？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:18:43.220

作为最佳实践，不要使用睡眠。尝试使用“performSelector:withObject:afterDelay”方法。创建一个方法

```
[MBProgressHUD hideHUDForView:self.view animated:YES]; 
```

操作并在您选择的预定义延迟后调用它。不要忘记您正在处理 UI，因此请确保您在主线程上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:20:54.980

我会创建两个HUD。第一个用于“等待”部分，第二个用于成功。在您的网络任务之前启动 loadingHUD，并在完成后将其隐藏：

```
MBProgressHUD *loadingHUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
loadingHUD.mode = MBProgressHUDModeIndeterminate;
loadingHUD.labelText = @"Please wait...";
loadingHUD.detailsLabelText = @"Connection in progress";
[loadingHUD show:YES];
// Do the network stuff here
[loadingHUD hide:YES]; 
```

之后，通知成功，根据需要创建成功HUD，并在延迟后隐藏它：

```
MBProgressHUD *successHUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
successHUD.mode = MBProgressHUDModeCustomView;
successHUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"checkmark.png"]];
successHUD.labelText = @"Logged in !";
[successHUD show:YES];
[successHUD hide:YES afterDelay:2.0]; 
```

您的成功 HUD 将显示 2 秒，然后自动隐藏。

这就是我一直使用 MBProgressHUD 的方式。

# cordova - 字段集在 sencha touch 中不滚动

> ID：11581194
> 
> 赞同：0
> 
> 时间：2012-07-20T14:16:25.570
> 
> 标签：cordova, sencha-touch, sencha-touch-2

我的应用程序中有一个标签视图，它停靠在底部。在顶部有一个带有日志的顶部栏。在屏幕中间，我设置了按钮和字段。由于设备高度较小，我想滚动字段集，以便用户可以输入文本并按下提交按钮。但是字段集没有滚动。这是我的代码部分::

```
 {            xtype : 'container',
            styleHtmlContent : true,
            scrollable: true,
            layout : {
                type : 'card'
            },
            title : 'Home',
            iconCls : 'home',
            items : [ {
                xtype : 'image',
                docked : 'left',
                height : 92,
                id : 'Logoimage',
                ui : '',
                width : 120,
                src : 'app/images/small_logo.png'
            }, {
                xtype : 'titlebar',
                cls : 'mytitlebar',
                docked : 'top',
                height : 80,
                ui : 'blue',
                items : [ {
                    xtype : 'label',
                    height : 36,
                    html : 'Consumer signup',
                    id : 'title',
                    margin : 20,
                    style : 'font: normal Bold 20px droid sans; color:#AB3951',
                } ]
            },  {
                xtype : 'container',
                docked : 'top',
                id : 'dashboardiconcontainer',
                scroll: 'vertical',
                layout : {
                    type : 'fit',
                    pack  : 'center',
                    align : 'middle'
                },

                items : [ {
                    xtype : 'label',
                    docked : 'top',
                    margin : '20 0 0 0',
                    html : 'Signup your customers to Teritree Portal',
                    id : 'signuplabel',
                    style : 'font: normal 24px droid sans'
                }, {
                    xtype : 'fieldset',
                    docked : 'top',
                    margin : '20 0 0 0',
                    width : 600,
                    height : 200,

                    items : [ {
                        xtype : 'textfield',
                        id : 'consumername',
                        style : 'font: Droid Sans',
                        label : 'Consumer Name',
                        labelWidth : '30%'
                    }, {
                        xtype : 'numberfield',
                        id : 'Mobilenum',
                        style : 'font: Droid Sans',
                        label : 'Mobile',
                        labelWidth : '30%'
                    }, {
                        xtype : 'emailfield',
                        id : 'email',
                        label : 'Customer Email id',
                        labelWidth : '30%',
                        placeHolder : 'email@example.com'
                    }, {
                        xtype : 'textareafield',
                        id : 'adressfield',
                        style : 'font: Droid Sans',
                        label : 'Address',
                        labelWidth : '30%'
                    }, {
                        xtype : 'textfield',
                        id : 'areafield',
                        style : 'font: Droid Sans',
                        label : 'Area/Location',
                        labelWidth : '30%'
                    }, {
                        xtype : 'selectfield',
                        label : 'City',
                        labelWidth : '30%',
                        options : [ {
                            text : 'Bangalore',
                            value : 'first'
                        }, {
                            text : 'Delhi',
                            value : 'second'
                        }, {
                            text : 'Mumbai',
                            value : 'third'
                        } ]
                    }, {
                        xtype : 'numberfield',
                        id : 'pinfield',
                        style : 'font: Droid Sans',
                        label : 'Pincode*',
                        labelWidth : '30%'
                    }, ]
                }, {
                    xtype : 'button',
                    height : 40,
                    id : 'submitbtn',
//                    margin : '30 0 0 500',
                    ui : 'orange',
                    width : 220,
                    text : 'Submit'
                } ]
            }
            ]
        } 
```

上面的代码仅用于选项卡。那么我怎样才能使该字段集可滚动？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:50:30.620

我可以通过将字段设置为可滚动来解决它：true

# facebook - OpenId 或 Facebook Connect：如何强制用户再次进行身份验证？

> ID：11581197
> 
> 赞同：1
> 
> 时间：2012-07-20T14:16:44.597
> 
> 标签：facebook, security, openid

对于我们网站上的敏感操作（例如修改密码），我们通常会要求用户再次输入旧密码，然后再输入新密码。

对于使用 OpenId 或 Facebook Connect 的用户，我们希望强制执行类似的操作：即使用户仍在 Facebook 上登录，在我们的网站上做一些敏感的事情将需要他再次在 Facebook 上进行身份验证（如再次输入他的密码）。

我设法使用 PAPE 扩展为 google 实现了它，但我找不到为其他 OpenId 提供程序或 Facebook Connect 执行此操作的方法。

实施它的首选方法是什么？

此外，与此相关的是，我们有年轻用户（15-18 岁）使用 Facebook Connect：当他们从我们的网站注销时，他们没有意识到他们也需要从 Facebook 注销（因为他们从未真正上过 Facebook ）。因为他们在学校使用公共计算机，所以可能会造成一些麻烦。

我们正在考虑注销时的警告消息，例如“不要忘记从 XXXX 注销”之类的内容，并带有这样做的链接。

在这种情况下，常见的做法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:32:25.923

> 即使用户仍然登录 Facebook，在我们的网站上做一些敏感的事情也需要他在 Facebook 上再次进行身份验证（如再次输入他的密码）。

[https://developers.facebook.com/docs/authentication/reauthentication/](https://developers.facebook.com/docs/authentication/reauthentication/)

> 此外，与此相关的是，我们有年轻用户（15-18 岁）使用 Facebook Connect：当他们从我们的网站注销时，他们没有意识到他们也需要从 Facebook 注销（因为他们从未真正上过 Facebook ）。

通过您正在使用的 SDK 生成一个注销 URL（[PHP SDK 的示例](https://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/)）——单击该链接会使用户退出 Facebook。（并且平台政策要求提供这样的链接。）

# php - PHP：从字符串中提取数字的最佳方法

> ID：11581199
> 
> 赞同：3
> 
> 时间：2012-07-20T14:16:53.033
> 
> 标签：php, string, preg-match

> **可能重复：**
> [从 php 中的字符串返回数字的简单函数](https://stackoverflow.com/questions/4175941/a-simple-function-for-return-number-from-string-in-php)

从字符串中提取一组特定数字的最佳/最有效方法是什么？例如：我想在 sring "blah blah Case#004522 blah blah" 中的 Case# 之后立即获取一组数字。我想 Case# 之后的数字字符数将始终相同，但我希望代码不要像我一样做出这样的假设。

到目前为止，我一直在使用 strpos 方法来定位 Case#，然后使用 substr 提取特定数量的字符后缀。我只是觉得这很笨拙。也许 preg_match 会更有效或更简化？

```
$text = "blah blah Case#004552 blah blah";
$find = strpos($text,'Case#');
if ( $find )
  $numbers = substr($text, $find+5, 6); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:19:16.603

您可以使用正则表达式首先匹配您的字符模式（`Case#`），然后您希望仅匹配数字（数字），即`\d`在 PCRE（[Demo](http://codepad.viper-7.com/ispV1l)）中：

```
$numbers = preg_match("/Case#(\d+)/", $text, $matches)
              ? (int)$matches[1]
              : NULL
    ;
unset($matches); 
```

一次进行多个（整数）匹配：

```
$numbers = preg_match_all("/Case#(\d+)/", $text, $matches)
              ? array_map('intval', $matches[1])
              : NULL
    ;
unset($matches); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:21:07.640

您可以像以前一样找到它，然后扫描号码（[Demo](http://codepad.org/S39Qfa4Q)）：

```
$find = strpos($text, 'Case#');
sscanf(substr($text, $find), 'Case#%d', $numbers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:21:18.950

使用 PHP 的 preg_match 和以下正则表达式：

```
(?<=case#)[0-9]+ 
```

可以测试@http ://regexr.com? [31jdv](http://regexr.com?31jdv)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:23:18.553

最简单的解决方案是

```
if (preg_match('/Case#\s*(\d+)/i', $test, $m)) {
    $numbers = $m[1];
} 
```

# select - dijit.form.Select onChange() 在页面加载时运行

> ID：11581204
> 
> 赞同：1
> 
> 时间：2012-07-20T14:17:13.653
> 
> 标签：select, dojo, onchange

我是 Dojo 的新手，我的 onChange() 事件有问题，它在页面加载时运行，而不是在选择框中的值更改时运行。这是我的代码，全部在页面的正文部分。谢谢你的帮助。

```
<div id="supportCentersListBox" data-dojo-type="dijit.form.Select"></div>

<script type="text/javascript">
    dojo.require("dojo.data.ItemFileReadStore");
    dojo.require("dijit.form.Select");      

    function populateSupportCenters() {
        var supportCenters = new dijit.form.Select({
        maxHeight:"300",
            id: "supportCenters",
            onChange: changeTest(),
            store: new dojo.data.ItemFileReadStore( { url: "some url address here" })
        }, 'supportCentersListBox');
    }

    function changeTest() {
        alert("Changed");
    }

    populateSupportCenters();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:04:47.417

修复您的代码，使 onChange 不是一个函数`call`，而是一个函数指针/引用

你有这个“问题”：

1.  `<div id="supportCentersListBox" data-dojo-type="dijit.form.Select">`DOM 渲染（data-dojo-type 仅用于 parseOnLoad (dojo.parser)，不需要它，因为您自己创建它
2.  你实例化一个商店
3.  您实例化一个 Select 并在 supportCentersListBox 中呈现 - 使用`store`set 获取`url`
4.  fetch完成并`Select`填写
5.  具有属性`selected:true`或索引中第一个的项目被设置为值
6.  `onChange`火灾

# ruby-on-rails - 设计：如何存储特定位置，不一定是最后一个位置？

> ID：11581205
> 
> 赞同：0
> 
> 时间：2012-07-20T14:17:15.570
> 
> 标签：ruby-on-rails, devise

我想知道我是否对设计提出了太多要求。我想让访问者填写表格，然后在他们按下“提交”按钮时被要求注册。那是容易的部分。我的问题是，一旦用户被重定向到注册表单并填写了它，我就无法将他们重定向回原始表单，以便可以提交*该表单（但现在使用用户 ID）。*

我在应用程序控制器中使用过“after_sign_in_path_for(resource)”方法，但我的问题是注册后，request.referer 不是原始表单，而是注册表单。我考虑过使用 before_filter :store_location 回调，但后来我意识到它会存储最近的位置，即注册表单的 url。

如何设置将原始表单设计为注册后要呈现的正确位置？

PS 这个问题来自一个相关的问题，位于[此处](https://stackoverflow.com/questions/11578892/modifying-devise-with-after-sign-in-path-forresource#comment15319436_11578892)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:30:03.987

在 ApplicationController 中尝试这个 make 2 方法，它将当前 url 保存到会话，另一个重定向到存储的 url（如果找不到它应该有一个默认值）。然后，在我想为返回添加书签的页面中（您可能不希望某人被送回某些页面），然后保存 url。

应用程序中的 EG.rb

```
 def store_location
      session['saved_location'] = request.request_uri
   end

   def redirect_to_back_or_default(default)
     if session['saved_location'].nil?
            redirect_to default
     else
       redirect_to session['return-to']
       session['saved_location'] = nil
     end
   end 
```

然后，在您希望用户能够返回的页面中：

然后，只需在 after_sign_in_path_for(resource_or_scope) 中调用 redirect_to_back_or_default('在此处输入您选择的默认网址，具体取决于上下文') 即可将某人送回。

# objective-c - 启用 App Sandboxing 导致应用程序不保存文件

> ID：11581207
> 
> 赞同：1
> 
> 时间：2012-07-20T14:17:18.683
> 
> 标签：objective-c, cocoa, xcode4.3

我有一个生成条形码的应用程序，一旦生成，用户可以将代码保存为 png、jpeg 等......在苹果引入沙盒之前它工作正常，一旦我启用它，应用程序不会保存文件，它只会当它被禁用时，我尝试使用他们在 xcode 沙箱下拥有的访问权限，我也尝试启用它下的所有内容，但似乎没有任何东西可以解决问题，所以我不确定我还能做什么尝试，任何想法将不胜感激。

如果这会有所不同，我的项目将保存在文档文件夹中。

应用程序已签名，尝试自签名并通过苹果开发人员程序生成代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:59:50.777

确保使用`NSSavePanel`, 或`NSOpenPanel`, 因为只有这两个对象可以显式地让您访问用户选择的文件。

并确保在权利选择下您对用户选择的文件具有读/写访问权限：

![在此处输入图像描述](../Images/8b41126faf5497d9c0dd4f468561cb77.png)

如果您已经在执行这两个步骤，但仍然无法正常工作，请告诉我。

# android - 安卓 4.0 SSL 认证

> ID：11581208
> 
> 赞同：0
> 
> 时间：2012-07-20T14:17:25.267
> 
> 标签：android, ssl, ssl-certificate, android-authenticator

我正在尝试构建一个需要进行一些客户端 SSL 身份验证的 RSS 提要阅读器。

我有，或者至少认为我有，证书。但是我现在无法弄清楚如何设置 ssl 隧道将证书发送到服务器进行身份验证。

这是我到目前为止所拥有的：

```
public class Authenticator extends Activity {

PrivateKey privateKey = null;
String SavedAlias = "";
private static final String TAG = "AUTHENTICATOR.CLASS";
final HttpParams httpParams = new BasicHttpParams();
private KeyStore mKeyStore = KeyStore.getInstance();

public Handler mHandler = new Handler(Looper.getMainLooper());

public void run()
{
   mHandler.post(new Runnable() {
      public void run() {
          new AliasLoader().execute();
      }
   });
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getCertificates("TEST");
}

public class AliasLoader extends AsyncTask<Void, Void, X509Certificate[]> 
{
    X509Certificate[] chain = null;

    @Override protected X509Certificate[] doInBackground(Void... params) {
        android.os.Debug.waitForDebugger();

        if(!SavedAlias.isEmpty())
        {
                try {
                    chain = KeyChain.getCertificateChain(getApplicationContext(),SavedAlias);
                } catch (Exception e) {
                    Log.e(TAG, e.getMessage());
                }
        }
        else
        {
            this.cancel(true);
        }

        return chain;
    }

    @Override 
    protected void onPostExecute(X509Certificate[] chain) 
    {

        if(chain != null)
        {
            Toast.makeText(getApplicationContext(), "YAY, Certificate is not empty", Toast.LENGTH_LONG).show();
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Certificate is Empty", Toast.LENGTH_LONG).show();
        }

        /*
        if (privateKey != null) {
            Signature signature = null;
            try {
                signature = Signature.getInstance("SHA1withRSA");
            } catch (NoSuchAlgorithmException e) {
                Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
            }
            try {
                signature.initSign(privateKey);
            } catch (InvalidKeyException e) {
                Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
            }
        }
        */
    }
}

public void getCertificates(String Host)
{
    KeyChainAliasCallback callBack = new KeyChainAliasCallback() {

        @Override
        public void alias(String alias) {               
            if (alias != null) 
            {
                Looper.prepare();
                saveAlias(alias);
                run();
                Looper.loop();
            }
        }
    };

    KeyChain.choosePrivateKeyAlias(this, callBack,
    new String[] {"RSA", "DSA"}, // List of acceptable key types. null for any
    null,                        // issuer, null for any
    null,      // host name of server requesting the cert, null if unavailable
    443,                         // port of server requesting the cert, -1 if unavailable
    null);                       // alias to preselect, null if unavailable
}

public void saveAlias(String alias)
{
    SavedAlias = alias;
}
} 
```

任何有关如何做到这一点的帮助将不胜感激，因为我以前从未做过任何身份验证，而且我发现很难找到关于 android 4.0 这个主题的任何内容，因为 4.0 在实现上似乎与旧版本不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:54:30.297

您应该能够检索证书链以及私钥并将其存储到临时内存中`KeyStore`：

```
String alias = "test";
KeyStore memoryKeyStore = KeyStore.getInstance("BKS");
memoryKeyStore.load(null);
X509Certificate[] chain = KeyChain.getCertificateChain(getApplicationContext(),alias);
PrivateKey key = KeyChain.getPrivateKey(getApplicationContext(),alias);
memoryKeyStore.setKeyEntry(alias, key.getEncoded(), chain); 
```

之后，您可以使用此密钥库来初始化 SSLContext 实例。

警告：请注意，示例代码包含`X509TrustManager`不执行服务器证书验证的实现。最好不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:54:57.033

建议的解决方案不适用于 4.1+。那里的私钥不可导出，也无法将其放入内存密钥存储中。检查[How to make client certificate authentication from Android 4.1 with Apache client and the KeyChain API](https://stackoverflow.com/questions/13363940/how-to-make-client-certificate-authentication-from-android-4-1-with-apache-clien) on how to do it in 4.1

# javascript - 使用 ng-repeat 对列表进行分页

> ID：11581209
> 
> 赞同：133
> 
> 时间：2012-07-20T14:17:28.403
> 
> 标签：javascript, angularjs, pagination

我正在尝试将页面添加到我的列表中。我遵循 AngularJS 教程，关于智能手机的教程，我试图只显示一定数量的对象。这是我的html文件：

```
 <div class='container-fluid'>
    <div class='row-fluid'>
        <div class='span2'>
            Search: <input ng-model='searchBar'>
            Sort by: 
            <select ng-model='orderProp'>
                <option value='name'>Alphabetical</option>
                <option value='age'>Newest</option>
            </select>
            You selected the phones to be ordered by: {{orderProp}}
        </div>

        <div class='span10'>
          <select ng-model='limit'>
            <option value='5'>Show 5 per page</option>
            <option value='10'>Show 10 per page</option>
            <option value='15'>Show 15 per page</option>
            <option value='20'>Show 20 per page</option>
          </select>
          <ul class='phones'>
            <li class='thumbnail' ng-repeat='phone in phones | filter:searchBar | orderBy:orderProp | limitTo:limit'>
                <a href='#/phones/{{phone.id}}' class='thumb'><img ng-src='{{phone.imageUrl}}'></a>
                <a href='#/phones/{{phone.id}}'>{{phone.name}}</a>
                <p>{{phone.snippet}}</p>
            </li>
          </ul>
        </div>
    </div>
  </div> 
```

我添加了一个带有一些值的选择标签，以限制将显示的项目数量。我现在想要的是添加分页以显示接下来的 5、10 等。

我有一个适用于此的控制器：

```
function PhoneListCtrl($scope, Phone){
    $scope.phones = Phone.query();
    $scope.orderProp = 'age';
    $scope.limit = 5;
} 
```

而且我还有一个模块可以从 json 文件中检索数据。

```
angular.module('phonecatServices', ['ngResource']).
    factory('Phone', function($resource){
        return $resource('phones/:phoneId.json', {}, {
            query: {method: 'GET', params:{phoneId:'phones'}, isArray:true}
        });
    }); 
```

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-07-20T15:07:58.340

如果您没有太多数据，您绝对可以通过将所有数据存储在浏览器中并过滤特定时间可见的内容来进行分页。

这是一个简单的分页示例：http: [//jsfiddle.net/2ZzZB/56/](http://jsfiddle.net/2ZzZB/56/)

该示例位于 angular.js github wiki 上的小提琴列表中，这应该会有所帮助：[https ://github.com/angular/angular.js/wiki/JsFiddle-Examples](https://github.com/angular/angular.js/wiki/JsFiddle-Examples)

编辑： [http://jsfiddle.net/2ZzZB/16/](http://jsfiddle.net/2ZzZB/16/) 到 [http://jsfiddle.net/2ZzZB/56/](http://jsfiddle.net/2ZzZB/56/)（如果有 45 个结果，则不会显示“1/4.5”）

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-01T09:07:05.860

*我刚刚制作了一个 JSFiddle，使用Build with Twitter Bootstrap*代码 在每列上显示分页 + 搜索 + 排序 ：http: [//jsfiddle.net/SAWsA/11/](http://jsfiddle.net/SAWsA/11/)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-07-10T15:30:13.473

我构建了一个模块，使内存分页非常简单。

它允许您通过简单地替换来进行分页`ng-repeat`，`dir-paginate`将每页的项目指定为管道过滤器，然后以单个指令的形式将控件放置在您喜欢的任何位置，`<dir-pagination-controls>`

以 Tomarto 提出的原始示例为例，它看起来像这样：

```
<ul class='phones'>
    <li class='thumbnail' dir-paginate='phone in phones | filter:searchBar | orderBy:orderProp | limitTo:limit | itemsPerPage: limit'>
            <a href='#/phones/{{phone.id}}' class='thumb'><img ng-src='{{phone.imageUrl}}'></a>
            <a href='#/phones/{{phone.id}}'>{{phone.name}}</a>
            <p>{{phone.snippet}}</p>
    </li>
</ul>

<dir-pagination-controls></dir-pagination-controls> 
```

控制器中不需要任何特殊的分页代码。这一切都由模块内部处理。

## 演示：[http ://plnkr.co/edit/Wtkv71LIqUR4OhzhgpqL?p=preview](http://plnkr.co/edit/Wtkv71LIqUR4OhzhgpqL?p=preview)

## 来源：[GitHub 的 dirPagination](https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-02T15:09:39.223

我知道这个线程现在很旧，但我正在回答它以保持更新。

使用 Angular 1.4 及更高版本，您可以直接使用[limitTo](https://docs.angularjs.org/api/ng/filter/limitTo)过滤器，它除了接受`limit`参数外还接受`begin`参数。

用法：`{{ limitTo_expression | limitTo : limit : begin}}`

所以现在您可能不需要使用任何第三方库来实现分页之类的功能。我创建了一个[小提琴](http://jsfiddle.net/BharatG/dura418x/)来说明这一点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-22T10:28:26.690

查看此指令：[https ://github.com/samu/angular-table](https://github.com/samu/angular-table)

它可以自动进行排序和分页，并为您提供足够的自由来自定义您想要的表格/列表。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-13T11:04:42.700

这是一个演示代码，其中有分页 + 使用 AngularJS 过滤：

[https://codepen.io/lamjaguar/pen/yOrVym](https://codepen.io/lamjaguar/pen/yOrVym)

**JS：**

```
var app=angular.module('myApp', []);

// alternate - https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination
// alternate - http://fdietz.github.io/recipes-with-angular-js/common-user-interface-patterns/paginating-through-client-side-data.html

app.controller('MyCtrl', ['$scope', '$filter', function ($scope, $filter) {
    $scope.currentPage = 0;
    $scope.pageSize = 10;
    $scope.data = [];
    $scope.q = '';

    $scope.getData = function () {
      // needed for the pagination calc
      // https://docs.angularjs.org/api/ng/filter/filter
      return $filter('filter')($scope.data, $scope.q)
     /* 
       // manual filter
       // if u used this, remove the filter from html, remove above line and replace data with getData()

        var arr = [];
        if($scope.q == '') {
            arr = $scope.data;
        } else {
            for(var ea in $scope.data) {
                if($scope.data[ea].indexOf($scope.q) > -1) {
                    arr.push( $scope.data[ea] );
                }
            }
        }
        return arr;
       */
    }

    $scope.numberOfPages=function(){
        return Math.ceil($scope.getData().length/$scope.pageSize);                
    }

    for (var i=0; i<65; i++) {
        $scope.data.push("Item "+i);
    }
  // A watch to bring us back to the 
  // first pagination after each 
  // filtering
$scope.$watch('q', function(newValue,oldValue){             if(oldValue!=newValue){
      $scope.currentPage = 0;
  }
},true);
}]);

//We already have a limitTo filter built-in to angular,
//let's make a startFrom filter
app.filter('startFrom', function() {
    return function(input, start) {
        start = +start; //parse to int
        return input.slice(start);
    }
}); 
```

HTML：

```
<div ng-app="myApp" ng-controller="MyCtrl">
  <input ng-model="q" id="search" class="form-control" placeholder="Filter text">
  <select ng-model="pageSize" id="pageSize" class="form-control">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
     </select>
  <ul>
    <li ng-repeat="item in data | filter:q | startFrom:currentPage*pageSize | limitTo:pageSize">
      {{item}}
    </li>
  </ul>
  <button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">
        Previous
    </button> {{currentPage+1}}/{{numberOfPages()}}
  <button ng-disabled="currentPage >= getData().length/pageSize - 1" ng-click="currentPage=currentPage+1">
        Next
    </button>
</div> 
```

# google-apps-script - GAS 将变量传递给基于时间的触发器

> ID：11581211
> 
> 赞同：2
> 
> 时间：2012-07-20T14:17:34.720
> 
> 标签：google-apps-script, google-sheets

我有一个带有`onEdit()`触发器的 Google 电子表格来创建基于第二次的触发器。

简单地说：当状态栏被编辑为“已批准”时，会创建一个触发器以在提供的项目完成日期发送反馈电子邮件。

```
var oneTimeOnly = ScriptApp.newTrigger("emailFeedback").timeBased().at(endDate).create(); 
```

我希望将变量传递给第二个触发器。我可以创建项目属性或在电子表格中添加一列。但是，在创建触发器时传递变量会更简单。

当我在 newTrigger 引号内插入任何其他字符时，这会导致函数的全部内容存储在触发器中（随后失败）。

```
var oneTimeOnly = ScriptApp.newTrigger("emailFeedback<strong>(regEmail)</strong>").timeBased().at(endDate).create(); 
```

.

有没有办法在触发器中存储变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T15:00:05.547

使用 ScriptDB 和 new Function()，我能够创建一种用于创建动态触发函数的方法。

解决方案的要点是将要触发的代码存储为带有要传递的参数的数据库：

```
"myFunction('Hello world')" 
```

然后，当脚本启动时，作为全局变量，您从`ScriptDB`. （我在下面的链接中动态地完成了这个。）

```
globalFunctions.callThisOne = new Function("e", "myFunction("Hello world")); 
```

最后，当您创建触发器时，您使用全局可访问函数创建它，如下所示：

```
ScriptApp.newTrigger("globalFunctions.callThisOne").timeBased().everyDay(1).create(); 
```

我已经写了一篇关于这个的简短文章并发布了来源。希望它有用。

你可以在这里阅读更多关于它的信息：http: [//goo.gl/wbUqH6](http://goo.gl/wbUqH6)

或者在这里查看代码：http: [//goo.gl/zjUiYe](http://goo.gl/zjUiYe)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:07:18.843

正如我正确理解的那样，问题是如何将数据传递给谷歌脚本项目中的时间触发函数。Eoin 描述了一种情况，但您可能面临很多情况。当您的脚本处理可能运行很长时间的复杂电子表格时的典型情况。您可能知道每个脚本都有大约 6 分钟的运行时间限制。在这种情况下，您应该将脚本划分为更小的逻辑分区，并在每个分区结束时为下一部分创建一个新触发器。好的，但是下一部分必须了解当前运行脚本的变量的一些数据。因为无法通过 newTrigger() 传递这些数据，您可以创建快照并以序列化的方式放入脚本属性上下文中。[ScriptProperties.setProperty()](https://developers.google.com/apps-script/class_scriptproperties)的一种简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:47:08.217

抱歉，没有办法做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T17:21:20.813

使用 ScriptProperties.setProperty() 存储可以通过触发方法访问的序列化参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T14:47:00.493

@user2166613 是对的，但有点短。这是如何做到的。

我展示了一个使用 after() 触发器的示例。这是一个非常有趣的用例，因为它允许将耗时的任务与 Web 应用程序调用分离，因此调用会立即返回控制并在后台完成处理。

在我的示例中，我在此运行延迟的函数中调整了工作表的列宽。

```
// call this function to set a time based trigger and transfer parameters
function setTimeTrigger_AdaptColumnWidths() {  
  var ssId = SpreadsheetApp.getActiveSpreadsheet().getId();
  var wsId = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getSheetId();

  var scriptProperties = PropertiesService.getScriptProperties();
  scriptProperties.setProperty('spreadsheetId', ssId);
  scriptProperties.setProperty('worksheetId', wsId);

  // Delay 10 secs, but real execution time may vary up to 15 min!
  ScriptApp.newTrigger('adaptColumnWidths').timeBased().after(10000).create();  
}

// this function is called by the trigger
function adaptColumnWidths() {  
  var scriptProperties = PropertiesService.getScriptProperties();
  ssId = scriptProperties.getProperty('spreadsheetId');
  wsId = scriptProperties.getProperty('worksheetId');

  // getSheetById() is a custom function – see below – not yet in Spreadsheet Class!
  sheet = getSheetById(SpreadsheetApp.openById(ssId), wsId);  

  // now do what we want to do in the timeBased trigger
  for (var i = 1; i <= sheet.getLastColumn(); i++){
    sheet.autoResizeColumn(i);
  }
}

// -----

// custom function – hopefully this will become a method of Spreadsheet Class any time soon
function getSheetById(ss, wsId) {
  var sheets = ss.getSheets();
  for (var i=0; i<sheets.length; i++) {
    if (sheets[i].getSheetId() == wsId)  return sheets[i];
  }
} 
```

请注意，您在此处存储在**所有函数调用通用**的数据空间中。因此，短时间内多次调用可以覆盖彼此的参数。

在我的用例中，这不是问题，因为电子表格和工作表不会改变。但不要尝试传输可能因呼叫而异的数据。

真正的执行时刻最多可以变化 15 分钟（无论您要求什么确切时间），因此有足够的空间让多个函数调用相互干扰！！！

# c# - XSL 转换 C# - 缺少根元素

> ID：11581214
> 
> 赞同：5
> 
> 时间：2012-07-20T14:17:41.800
> 
> 标签：c#, xml, xslt, transform

长期读者第一次海报！

我的问题相对简单...

源 XML：[http://pastebin.com/xHnv20Ej](http://pastebin.com/xHnv20Ej) XSLT： http: [//pastebin.com/bAk6sZ9V](http://pastebin.com/bAk6sZ9V)

我正在尝试使用 XSLT 转换 XML。我使用的所有编辑器都已验证两个文件的格式正确并且转换成功。

一旦我在 C# 中使用 XslTransform 类，我就会得到一个“缺少根元素”异常。

```
XslTransform myXslTransform;
myXslTransform = new XslTransform();
myXslTransform.Load(Utility.getTransformerToUse());
myXslTransform.Transform(fullPath, targetFile); 
```

据我所知，所有根元素都存在，其他变压器都没有这个问题。关于 C# 的 XSLTransform 类，我有什么遗漏吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:46:13.550

问题解决了！- XML 文件在转换之前被 XMLValidatingReader 格式错误！谢谢你的所有回复，很抱歉这个解决方案可能永远不会帮助任何人..哈哈。

# python - Django 社区是否广泛使用基于类的视图？

> ID：11581216
> 
> 赞同：9
> 
> 时间：2012-07-20T14:17:56.890
> 
> 标签：python, django, django-class-based-views

我是 Django 和 Python 的新手，在阅读了很多内容后，我决定不使用全局函数作为视图（可能是因为我不习惯全局函数，但主要是因为我想要更好的重用级别并且更喜欢使用更小的代码块）。问题是我一直在检查的大多数 Django 应用程序都没有使用基于类的方法。

这是因为我在错误的地方检查代码（我从 Django 教程开始，然后在 github 上）？

我问这个是因为将来我希望与更多的 Django 程序员一起工作，并且不想一开始就采用非标准的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T14:25:23.870

一个事实是在[Django 1.3](https://docs.djangoproject.com/en/dev/topics/class-based-views/)中添加了基于类的视图，因此如果您打算支持旧的 Django 版本，那么您将不得不坚持使用功能视图，例如，如果您想创建一个通用应用程序并在 GitHub 中启动它或以供其他人使用。

至于何时使用基于类的视图而不是函数视图，我认为这取决于您的用例，我的建议是您必须了解每种方式的[优势](https://stackoverflow.com/questions/4370650/what-is-the-advantage-of-class-based-views)，恕我直言，在一个项目中同时实现这两种方式是很正常的。

Nick Coghlan有一篇很好的[文章](http://www.boredomandlaziness.org/2012/05/djangos-cbvs-are-not-mistake-but.html)回应了另一篇很棒的文章[CBV 是一个](http://lukeplant.me.uk/blog/posts/djangos-cbvs-were-a-mistake/)值得检查的错误。

希望这有帮助:)

# vb.net - VB.NET 如何使用 TimeSpan 将时间添加到另一个 TimeSpan

> ID：11581217
> 
> 赞同：-1
> 
> 时间：2012-07-20T14:17:57.857
> 
> 标签：vb.net, winforms, timespan

我的第一个时间跨度是：`"00:01:03,160"`
我的第二个时间跨度是：`"00:00:01,100"`
我想在**00:01:03,160**到**00:00:01,100之间进行加法或减法**

```
00:01:03,160 + 00:00:01,100 = 00:01:04,260 
```

我认为格式是：hh\:mm\:ss\,fff

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:23:03.993

您可以使用 TimeSpan.Add 和 TimeSpan.Subtract 方法，例如：

ts1.添加（ts2）；

或者

ts1.减去（ts2）；

此外，您处理的是字符串而不是 TimeSpan 对象——如果您需要将这些转换为 TimeSpan 对象，您可以使用 TimeSpan.Parse。Parse 方法理解的完整语法在这里：

[http://msdn.microsoft.com/en-us/library/se73z7b9.aspx](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:32:22.930

这个怎么样

```
Thread.CurrentThread.CurrentCulture = New CultureInfo("hr-HR")

TimeSpan.Parse("00:01:03,160").Add(TimeSpan.Parse("00:00:01,100").ToString() 
```

如果您当前的文化支持 TimeSpan 字符串表示的格式，则不需要第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:21:21.907

使用`TimeSpan.Add`方法：

```
ts1.Add(ts2) 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.timespan.add.aspx#Y684](http://msdn.microsoft.com/en-us/library/system.timespan.add.aspx#Y684)

# javascript - 使用 javascript 进行浏览器和平台检测

> ID：11581219
> 
> 赞同：0
> 
> 时间：2012-07-20T14:18:00.377
> 
> 标签：javascript, css, browser, platform

> **可能重复：**
> [在页面上显示操作系统名称/版本和浏览器名称/版本？](https://stackoverflow.com/questions/7370200/displaying-the-os-name-version-and-the-browser-name-version-on-the-page)

有谁知道是否有任何模板可以使用 Javascript 将特定的 CSS 文件分配给特定的浏览器和平台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:20:47.597

在你问这样的问题之前，你应该使用谷歌：

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:26:09.860

您可以使用 jQuery 来检测浏览器，这是我认为最快的方法[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)然后只需为 css 创建或更新您的链接标签（就像您更改 ant DOM 节点一样)

```
<link id="my_css" src="" /> 
```

在 jQuery 中：

```
$('#my_css').attr({src:"my_css_for"+$.browser+".css"}) 
```

此外，如果您想为不同的 ie 版本添加 css，您可以在 html 中执行此操作：

```
<!--[if IE 6]>
Special instructions for IE 6 here
<![endif]--> 
```

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# codeigniter - Codeigniter，多个域

> ID：11581228
> 
> 赞同：0
> 
> 时间：2012-07-20T14:18:26.237
> 
> 标签：codeigniter, dns

我正在建立一个英语和法语的多语言网站。该站点的创建使我的默认控制器是/en，而法语站点入口控制器将位于/fr。

问题是法语站点将有一个不同的域，将法语域指向 /fr 控制器会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:40:04.857

不，不应该。如果您有 2 个域，那么最好从 URI 中“隐藏” `/fr`and部分（使用），否则您将得到and 。`/en``.htaccess``domain.com/en``domain.fr/fr`

这是一篇关于这个主题的有趣文章：http: [//googlewebmastercentral.blogspot.nl/2010/03/working-with-multi-regional-websites.html](http://googlewebmastercentral.blogspot.nl/2010/03/working-with-multi-regional-websites.html)

# php - 需要为 gmail 收件箱设置谷歌密钥

> ID：11581233
> 
> 赞同：0
> 
> 时间：2012-07-20T14:19:03.873
> 
> 标签：php, web-services, soap, wsdl, google-api

我正在使用 SOAP 网络服务来获取 gmail 收件箱。但是，它要求我为各自的 API 设置 Google Key。

如何为 wsdl 设置谷歌密钥？有任何想法吗？

我正在连接到 gmail API，但是我无法将响应放入我的页面。

**代码：-**

```
"<div>
<a href='https://accounts.google.com/o/oauth2/auth?client_id=954719584955.apps.googleusercontent.com&redirect_uri=https://localhost/gmail&scope=https://mail.google.com/mail/feed/atom/&response_type=code'> Retrieve your Google Mails using webservices.</a>
</div>" 
```

它重定向到我已注册的页面，但没有获得我请求的谷歌内容。

**代码：-**

```
 $client_id='954719584955.apps.googleusercontent.com';
    $client_secret='vyY-DRInNsofJL2MTmpaVRYP';
    $redirect_uri='https://localhost/gmail';
    $max_results = 200;

    $auth_code = $_GET["code"];

    function curl_file_get_contents($url)
    {
     $curl = curl_init();
     $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';

     curl_setopt($curl,CURLOPT_URL,$url);   //The URL to fetch. This can also be set when initializing a session with curl_init().
     curl_setopt($curl,CURLOPT_RETURNTRANSFER,TRUE);    //TRUE to return the transfer as a string of the return value of curl_exec() instead of outputting it out directly.
     curl_setopt($curl,CURLOPT_CONNECTTIMEOUT,5);   //The number of seconds to wait while trying to connect.    

     curl_setopt($curl, CURLOPT_USERAGENT, $userAgent); //The contents of the "User-Agent: " header to be used in a HTTP request.
     curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE);  //To follow any "Location: " header that the server sends as part of the HTTP header.
     curl_setopt($curl, CURLOPT_AUTOREFERER, TRUE); //To automatically set the Referer: field in requests where it follows a Location: redirect.
     curl_setopt($curl, CURLOPT_TIMEOUT, 10);   //The maximum number of seconds to allow cURL functions to execute.
     curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); //To stop cURL from verifying the peer's certificate.

     $contents = curl_exec($curl);
     curl_close($curl);
     return $contents;
    }

$fields=array(
    'code'=>  urlencode($auth_code),
    'client_id'=>  urlencode($client_id),
    'client_secret'=>  urlencode($client_secret),
    'redirect_uri'=>  urlencode($redirect_uri),
    'grant_type'=>  urlencode('authorization_code')
);
$post = '';
foreach($fields as $key=>$value) { $post .= $key.'='.$value.'&'; }
$post = rtrim($post,'&');

$curl = curl_init();
curl_setopt($curl,CURLOPT_URL,'https://accounts.google.com/o/oauth2/token');
curl_setopt($curl,CURLOPT_POST,5);
curl_setopt($curl,CURLOPT_POSTFIELDS,$post);
curl_setopt($curl, CURLOPT_RETURNTRANSFER,TRUE);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER,FALSE);
$result = curl_exec($curl);
curl_close($curl);

$response =  json_decode($result);
$accesstoken = $response->access_token;

$url = 'https://mail.google.com/mail/feed/atom/??max-results='.$max_results.'&oauth_token='.$accesstoken;
$xmlresponse =  curl_file_get_contents($url);
if((strlen(stristr($xmlresponse,'Authorization required'))>0) && (strlen(stristr($xmlresponse,'Error '))>0)) //At times you get Authorization error from Google.
{
    echo "<h2>OOPS !! Something went wrong. Please try reloading the page.</h2>";
    exit();
} 
```

这是 gmail API 的完整代码。

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:21:43.000

您应该访问[google apis 控制台](https://code.google.com/apis/console)。在那里您可以注册一个应用程序并设置您将要使用的 API。

# android - 带有 asytask 的简单进程栏

> ID：11581235
> 
> 赞同：2
> 
> 时间：2012-07-20T14:19:17.280
> 
> 标签：android, process, android-asynctask

我想用 asy 任务在我的代码中添加一个简单的进程栏。我尝试了一些示例，但看不到该进程栏正常工作。我在这里发布我的代码希望你能帮助我。当我的一些代码完成时，我想停止进程栏，比如使用一些标志来停止散文栏。请发布一些代码。

多谢！

这是我的代码：

```
private class loading extends AsyncTask<Void, Void, Integer> {

    Context context;
    ProgressBar progressBar;
    static final long waitTime = 1 * 4000L;
    long preTime;
    int progress;

    public loading(Context context) {

        this.context = context;
        progressBar = (ProgressBar) findViewById(R.id.progress_bar);
        progressBar.setProgress(0);

    }

    protected void onPostExecute(Integer result) {
        Intent intent = new Intent(this.context, first.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        context.startActivity(intent);
        finish();
  return;
    }

    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    preTime = System.currentTimeMillis();

    }

    protected void onProgressUpdate(Integer... values) {
        progressBar.setProgress(values[0]);

    }

    @Override
    synchronized protected Integer doInBackground(Void... arg0) {
        int waited = 0;
        while (waited < 3000) {
            try {

                //   SystemClock.sleep(100); 
                this.wait(100);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            waited += 100;
        }
        return null;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:23:45.410

您的`doInBackground`方法需要调用[publishProgress()](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)才能更新 UI。

在行后`waited += 100;`添加：

```
int progress = Math.round((float)waited / 3000 * 100);
publishProgress(progress); 
```

`AsyncTask`此外，如果您打算使用整数来反映您的进度，则 的签名是错误的。通用参数是`AsyncTask<Params, Progress, Result>`，因此在您的情况下，您不接受任何参数，或从 中返回任何有意义的值`doInBackground`，但是，您*确实*希望返回 an`Integer`以指示进度。因此，更改您的类声明以匹配：

```
private class loading extends AsyncTask<Void, Integer, Integer>
{
    //your implementation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:24:57.750

您没有调用[AsyncTask.publishProgress](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)，这就是为什么您的`onProgressUpdate`方法永远不会被调用的原因。

顺便说一句，您的类名`loading`违反了命名约定，这不是一个好习惯。

# c# - C#线程运行和取消按钮，需要能够取消长时间的处理运行

> ID：11581236
> 
> 赞同：3
> 
> 时间：2012-07-20T14:19:36.110
> 
> 标签：c#, multithreading

当用户单击运行时，应用程序会运行大量代码以生成模型并将其显示在图表中。跑步大约需要 1-2 分钟。我还有一个取消按钮，在单击“运行”按钮后启用。我正在使用 DotSpatial，因此我的按钮位于功能区 UI 的插件面板上。插件中Run和Cancel上的click事件启动，调用后端类的代码Run和Click。

当用户在运行开始后点击取消时，有一个延迟，但取消方法被调用并执行，但运行从未停止，我们最终看到图表显示。所以，我想我需要一个单独的线程来运行。我对编程相当陌生，从未使用过线程。我已经查看并添加了以下代码，但我的线程方法没有运行。这是我的代码：

单击运行按钮：

这是在顶部：

```
//check to see if RunModel thread needs to stop or continue
private volatile bool stopRun = false;
private Thread runThread; 
```

然后这是从 click 事件中调用的方法：

```
public void btnRun_testingThread(object sender, EventArgs e)
{
   //create a new thread to run the RunModel
   if (runThread == null)
   { 
       //we don't want to stop this thread
       stopRun = false;

       runThread = new Thread(RunModel);  
       runThread.Start();              <--this isn't doing anything
   } 
```

所以，我认为当代码到达 runThread.Start() 时，它会跳转到我的 RunModel 方法并开始运行代码。但事实并非如此。此外，我想取消这个线程（一旦我让它正常工作），所以我有这个，它从取消点击方法中调用：

```
private void StopRunThread()
{
    if (runThread != null)
    {
        //we want to stop the thread
        stopRun = true;
        //gracefully pause until the thread exits
        runThread.Join();
        runThread = null;
    }
} 
```

然后这是我偶尔检查的 RunModel() 以查看 stopRun 布尔值是否已更改。

```
public void RunModel()
{
    ...some code.....

    //check to see if cancel was clicked
    if (stopRun)
    {
        ....clean up code....
        return;
    }

    ....some more code....

    //check to see if cancel was clicked
    if (stopRun)
    {
      ....clean up code....
       return;
    }
} 
```

以及取消按钮的点击方法：

```
public void btnCancel_Click(Object sender, EventArgs e)
{
    stopRun = true;
    StopRunThread();
    //the model run has been canceled

    ....some code.....
} 
```

对让 thread.start 实际运行 Run 方法有任何帮助吗？那么我是否需要不断检查运行中的 volatile bool 以便在停止时清理所有内容？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:43:00.367

我认为你最好看看 BackgroundWorker - 这基本上是单独运行的，但可以注意取消命令。确保在初始化时添加“WorkerSupportCancellation”：

```
BackgroundWorker backgroundWorker1 = new BackgroundWorker();
backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork); // This does the job ...
backgroundWorker1.WorkerSupportsCancellation = true; // This allows cancellation. 
```

然后单击即可开始您的过程：

```
public void btnRun_testingThread(object sender, EventArgs e)
{
   backgroundWorker1.RunWorkerAsync();
} 
```

您的取消按钮可以发出取消请求：

```
public void btnCancel_Click(Object sender, EventArgs e)
{
    backgroundWorker1.CancelAsync();
} 
```

然后，您的工作人员可以在工作时对此进行监控...

```
void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    for (int i = 0; i < 100; i++)
    {
        if (backgroundWorker1.CancellationPending)
        {
            break;
        }
        else
        {
            // Do whatever you're doing.
        }
    }
    e.Result = backgroundWorker1.CancellationPending ? null : orders;
} 
```

您可以通过添加进度条等来进一步增强这一点，但这会变得有点复杂，所以我不会在这里讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:26:02.950

考虑到推荐中提供的新信息，我相信您只是`RunModel()`因为对`thread.Start()`方法行为的错误假设而错过了调试器中方法的开始。

请参阅 MSDN 的注释，[Thread.Start 方法](http://msdn.microsoft.com/en-us/library/a9fyxz7d.aspx)

> 一旦线程处于 ThreadState.Running 状态，操作系统**就可以调度它执行**。线程从提供给线程构造函数的 ThreadStart 或 ParameterizedThreadStart 委托表示的方法的第一行开始执行。

线程启动需要一些时间的小演示，对我来说它在 38-40 毫秒内开始：

```
Stopwatch watch = new Stopwatch();
Thread thread = new Thread((ThreadStart)watch.Stop);
thread.Start();
watch.Start();

Thread.Sleep(5000);
double startedAfter = watch.ElapsedMilliseconds; 
```

由于 .NET Framework 4.0 考虑使用 TPL 任务而不是显式使用线程，一些优点：

*   您可以通过传入`Task`UI 线程同步上下文轻松地与 UI 线程同步
*   您可以使用轻松停止 Taks`CancellationToken`

# c++ - 如何以 int 形式访问 BGL 的 vertex_descriptor

> ID：11581245
> 
> 赞同：4
> 
> 时间：2012-07-20T14:20:18.087
> 
> 标签：c++, boost

我有一个定义如下所示的邻接列表。此时我需要将 vertex_descriptor 作为 int 类型访问。我怎么能做到这一点`tvertex source = ...; int source_as_int = ???source???`我记得以前遇到过同样的问题并解决了它，但不记得如何使用它作为参考，而且 BGL 文档没有用，他们应该尝试查看 Javadocs 并从中学习。

另一种可能性是为此目的使用该类型的可能成员函数`vertex_descriptor`或其他一些全局 BGL 函数......人们永远不知道在哪里寻找这个，他们似乎在制作全局函数或成员函数之间随机选择，总共如果你问我，直觉设计就失败了。

```
typedef adjacency_list_traits<setS, setS, bidirectionalS> ttraits;

typedef adjacency_list<setS, setS, bidirectionalS,
        // vertex properties
        property<vertex_color_t, default_color_type>,
        // edge properties
        property<edge_capacity_t, int,
        property<edge_residual_capacity_t, int,
        property<edge_reverse_t, ttraits::edge_descriptor> > >, no_property, vecS> tbgl_adjlist_bidir;

typedef graph_traits<tbgl_adjlist_bidir>::vertex_descriptor     tvertex;
typedef graph_traits<tbgl_adjlist_bidir>::edge_descriptor       tedge;
typedef property_map<tbgl_adjlist_bidir, edge_capacity_t>::type tedge_capacity_map;
typedef property_map<tbgl_adjlist_bidir, edge_reverse_t>::type  treverse_edge_map;
typedef property_map<tbgl_adjlist_bidir, vertex_color_t>::type  tvertex_color_map;
typedef graph_traits<tbgl_adjlist_bidir>::out_edge_iterator     tout_edge_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::in_edge_iterator      tin_edge_iterator; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:03:14.773

好的，我想通了。添加顶点属性`vertex_index_t`解决了这个问题。然后我可以像这样访问顶点的 int 索引：

```
typedef adjacency_list_traits<setS, vecS, bidirectionalS> ttraits;

typedef adjacency_list<setS, vecS, bidirectionalS,
        // vertex properties
        property<vertex_index_t, int,
        property<vertex_color_t, default_color_type> >,
        // edge properties
        property<edge_capacity_t, int,
        property<edge_residual_capacity_t, int,
        property<edge_reverse_t, ttraits::edge_descriptor> > >, no_property, vecS> tbgl_adjlist_bidir;

typedef graph_traits<tbgl_adjlist_bidir>::vertex_descriptor     tvertex;
typedef graph_traits<tbgl_adjlist_bidir>::edge_descriptor       tedge;
typedef property_map<tbgl_adjlist_bidir, edge_capacity_t>::type tedge_capacity_map;
typedef property_map<tbgl_adjlist_bidir, edge_reverse_t>::type  treverse_edge_map;
typedef property_map<tbgl_adjlist_bidir, vertex_color_t>::type  tvertex_color_map;
typedef property_map<tbgl_adjlist_bidir, vertex_index_t>::type  tvertex_index_map;
typedef graph_traits<tbgl_adjlist_bidir>::vertex_iterator       tvertex_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::edge_iterator         tedge_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::out_edge_iterator     tout_edge_iterator;
typedef graph_traits<tbgl_adjlist_bidir>::in_edge_iterator      tin_edge_iterator; 
```

然后我像这样使用它：

```
 tbgl_adjlist_bidir bgl_adjlist_bidir;
    // ...
    tvertex_index_map indices = get(vertex_index, bgl_adjlist_bidir);
    // ...
    tvertex source; 
    // ...
    int source_as_int = indices[source]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:55:09.600

a 的类型`vertex_descriptor`取决于 的`VertexListS`-template 参数的底层结构`adjacency_list`。我知道的唯一情况`int`是，当 VertexList-Type 是时，描述符是 an `vecS`。但请记住：如果您选择`vecS`VertexList-Type 作为您的 VertexList-Type，那么当您更改图形的结构时（如[迭代器和描述符稳定性/无效](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/adjacency_list.html)中所述），所有（存储的）描述符都可能变得无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:21:03.810

我可以对您使用自定义顶点和边类型感兴趣吗？在您自己的代码中[使用它们要容易](https://stackoverflow.com/a/1125750/1088)得多。至于调用 BGL 算法，您可以使用[Bundled Properties](http://www.boost.org/doc/libs/release/libs/graph/doc/bundles.html)。

# junit - junit 4.11 挂起 java 1.7

> ID：11581248
> 
> 赞同：0
> 
> 时间：2012-07-20T14:20:23.797
> 
> 标签：junit, java-7

我有以下简单的 JUnit 配置；在 Java 6 下编译和运行代码工作正常，但在 Java 7 下编译和运行会挂起应用程序（在 Ubuntu 10.04 和 MS Vista 下）。

```
public class TextAreaThread extends Thread {
     @Override
     public void run() {
         JUnitCore junitcore = new JUnitCore();
         MyListener listener = new MyListener();
         junitcore.addListener(listener);
         junitcore.run(CheckerTest.class);
         listener.testRunFinished(null);
         try {
            listener.getRiport();
         } 
         catch (BadLocationException ex) {
             ex.printStackTrace();
         } 
         catch (IOException ex) {
             ex.printStackTrace();
     }

} 
```

CheckerTest 仅包含使用@Test 注释的基本方法：

```
 @Test
    public void checkWellFormed() throws AssertionError {
        fail("failed"); 
    } 
```

有任何想法吗？

谢谢，克里斯

* * *

马修，代码如下：

```
public class Validator extends JFrame {
     public Validator() {
         startMenu.addMenuListener(new MenuListener() {
            @Override
            public void menuSelected(MenuEvent arg0) { 
                    TextAreaThread tframe = new TextAreaThread(textArea, inputXMLPath);
                    tframe.start();
//some other stuff 
```

# asp.net - 如何在 iFrame 上显示 Div 或 Panel

> ID：11581252
> 
> 赞同：4
> 
> 时间：2012-07-20T14:20:40.857
> 
> 标签：asp.net, css

如何在 iframe 上显示面板。我曾尝试使用 z-Index，但它无法正常工作，请查看示例图像。我们将我没有尝试使用 css 我使用 Z-Index 但它不起作用。下面是我的代码...

```
<table border="0" cellpadding="0" cellspacing="0" width="100%"><tr align="left"><td align="left"><iframe width="70%" frameborder="0" height="770" id="myframe" runat="server" src="about:blank"></iframe></td></tr></table>
<div class="slide-out-div"><a class="handle" href="http://link-for-non-js-users">Content</a><h3 class="style1">Menu Items</h3><table border="0">
        <tr style=" float:left; height:39px"><td><ul><li><a href="">Special Instructions</a></li></ul></td></tr>
        <tr style=" float:left; height:39px"><td><ul><li><a href="">Processing Exception</a></li></ul></td></tr>
        <tr style=" float:left; height:39px"><td><ul><li><a href="">Account Coding</a></li></ul></td></tr>
        <tr style=" float:left; height:39px"><td><ul><li><a href="">View My Notes</a></li></ul></td></tr>
        <tr style=" float:left; height:39px"><td><ul><li><a href="">Approve/Disapprove</a></li></ul></td></tr>
        <tr style=" float:left; height:39px"><td><ul><li><a href="">Save & Close</a></li></ul></td></tr>
    </table>
</div> 
```

![在此处输入图像描述](../Images/d719a1a0fd69aa2a1320089188286c22.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:34:39.250

您应该考虑使用`position:absolute`CSS 样式。

这是一个例子......

```
<div id="straddle">
    Here is the straddling div<br/>
    Here is the straddling div
</div>
<iframe id="myframe" src="about:blank"></iframe> 
```

使用以下示例 CSS...

```
#myframe {
    height:100px;
    width:200px;
    margin-left:100px;
}
#straddle {
    position:absolute;
    width:200px;
    border:1px solid red;
} 
```

请看[这个 jsfiddle 现场演示](http://jsfiddle.net/RRUUQ/1/)

# git - GIT 首次推新项目

> ID：11581255
> 
> 赞同：8
> 
> 时间：2012-07-20T14:20:51.867
> 
> 标签：git, version-control, repository, git-push

我在我的本地机器上有一个项目，我一直在单独工作，我想推送到远程服务器（运行 ubuntu 和 gitosis）

在我做的远程服务器上

```
git init
Initialized empty Git repository in /home/stefan/.git/ 
```

当地人`git status`说

```
git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .DS_Store
#   .travis.yml
#   license.txt
#   nbproject/
#   bla/.DS_Store
#   bla/cache/
nothing added to commit but untracked files present (use "git add" to track) 
```

我也做过

```
git remote add origin dev@123.456.xx.xxx:psdemo.git 
```

现在：当我尝试推动时，会发生以下情况

```
git push origin master
fatal: 'psdemo.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

这在某种程度上是有道理的，因为我只有一个空的 git repo。

如何将我的文件推送到这个远程服务器？我想我需要的是从我的本地机器克隆到远程机器，不知何故？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:27:09.777

字符串

> ```
> dev@123.456.xx.xxx:psdemo.git 
> ```

应该是有效的 ssh 路径。据我在上一行中看到：

> ```
> git init
> Initialized empty Git repository in /home/stefan/.git/ 
> ```

您在 /home/stefan/ 中创建了一个存储库，所以我希望是这样的：

```
stefan@123.456.xx.xxx:~ 
```

但可能这不是你想要的。您应该在远程服务器的家中创建一个文件夹`psdemo.git`。为此，做一个

```
git init --bare ~/psdemo.git 
```

在那里，然后添加遥控器：

```
 stefan@123.456.xx.xxx:~/psdemo.git 
```

那你应该可以推了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:28:31.197

您不能将空项目推送到上游。您必须通过添加一些文件，`git add`然后它们在本地使用`git commit`. 只有在那之后，您才能将更改推送到上游。

确保远程存储库可以接受提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:23:44.090

远程存储库的路径可能不完整。而不是`psdemo.git`，尝试类似的东西`/home/stefan/.git/`，然后再试一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:26:50.983

看看这`Initialized empty Git repository in /home/stefan/.git/`部分，你的远程仓库不是 psdemo.git，而是 /home/stefan（或者 /home/stefan/.git 可能会工作）。

顺便说一句：您通常在遥控器 ( `git init --bare`) 上使用裸存储库，因此它们在那里没有工作副本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T14:28:49.263

这样：

> 在 /home/stefan/.git/ 中初始化空的 Git 存储库

看起来您将远程服务器上的主目录初始化为存储库。

但是这个：

> git remote add origin dev@123.456.xx.xxx:psdemo.git

正在添加您`${HOME}/psdemo.git`的远程 URL。这不匹配，这就是您收到错误的原因。

试试`git init /home/stefan/psdemo.git`遥控器。

# android - “启动超时已过期，放弃唤醒锁定”的侦听器或通知

> ID：11581256
> 
> 赞同：3
> 
> 时间：2012-07-20T14:20:52.580
> 
> 标签：android, android-activity

在我的一个测试设备中，我在 LogCat 中收到了这个可怕的警告：

```
07-20 09:57:02.093: W/ActivityManager(1159): Launch timeout has expired, giving up wake lock!
07-20 09:57:02.218: W/ActivityManager(1159): Activity idle timeout for HistoryRecord{4072b5e8 com.rero.myapp/.MyActivity} 
```

我最初的研究表明，这是一个常见的挑眉：

1.  “该应用程序可能[超出了 VM 预算](https://stackoverflow.com/a/6028975)并且内存不足。”
2.  “这个[可以忽略](https://stackoverflow.com/a/10069805)。”
3.  [网络问题](https://stackoverflow.com/a/9870499)？
4.  Activity[需要很长时间才能启动](https://stackoverflow.com/a/7490208)（UI 线程处理过多？）
5.  涉及[HTTP](https://stackoverflow.com/a/3520254/576267)的服务和广播。
6.  并且不断[...](https://stackoverflow.com/search?q=Launch%20timeout%20has%20expired,%20giving%20up%20wake%20lock!)

我的问题是：

1.  “启动超时已过期”的含义是什么？系统是做什么的？（例如，一个消息来源声称它会杀死我的应用程序，但实际上我看到我的应用程序在 1-2 分钟的感知冻结后正常进行）
2.  有没有**办法在我的应用程序中收到**有关此警告的通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:00:31.427

这是我将尝试的一般*想法*，但您如何处理 AsyncTask 取决于您在获得状态后正在做什么。我会做这样的事情：

```
private class GetHttpStatus extends AsyncTask<String, Void, Boolean> {
    @Override
    protected Boolean doInBackground(String[] params) {
        private boolean status;

        //this will be the string you pass in execute()
        String urlString = params[0];

        HttpURLConnection httpConnection;
        try {
            URL gurl = new URL(urlString);
            URLConnection connection = gurl.openConnection();
            connection.setConnectTimeout(5 * 1000);
            httpConnection = (HttpURLConnection) connection;
            int responseCode = httpConnection.getResponseCode();
            if(responseCode == HttpURLConnection.HTTP_OK) {
                status = true;
            }
        } catch (Exception e) {
            status = false;
        } finally { 
            if(httpConnection != null) httpConnection.disconnect();
        }
        return status;
    }

    @Override
    protected Void onPostExecute(Boolean result) {
        //Here you'll do whatever you need to do once the connection
        //status has been established
        MyActivity.notifyHttpStatus(result);
    }
}

//in your Activity somewhere, you would call...

new GetHttpStatus.execute("http://www.amazon.com"); 
```

# iphone - ffmpeg 与 AudioUnit

> ID：11581265
> 
> 赞同：1
> 
> 时间：2012-07-20T14:21:26.427
> 
> 标签：iphone, ios, ffmpeg, audiounit, audioqueue

**我有的**

我的目标是使用 ffmpeg 解析一些媒体文件并提供视频和音频播放。我成功地将 OpenGL 用于视频和 AudioQueue 用于音频。

**我需要做的是** 我需要将 AudioQueue 更改为 Audio Unit 服务，因为它确实为音频操作提供了一些令人讨厌的功能。

基本上我对将音频单元集成到 ffmpeg 运行循环中感到困惑。所以想从你们那里获得一些参考/样本，其中音频单元与 ffmpeg 媒体播放循环集成，即媒体数据包提取并将其推入音频单元可以播放的某个缓冲区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T07:00:41.227

是的，我已经使用 AudioUnit 使用 ffmpeg 播放解码的音频。

我从 github ( [https://github.com/alexbw/novocaine](https://github.com/alexbw/novocaine) ) 获取了 Novocaine 项目并做了一些更改（主要是为输入和 OSX 抛出代码）。

参见 kxmovie 项目中的 KxAudioManager 类：[https ://github.com/kolyvan/kxmovie](https://github.com/kolyvan/kxmovie)

如果您打算为 iOS 编写代码，请注意需要将声音重新采样到 44100Hz。许多电影都有 48000 Hz 采样率的音频流。我得到的最好结果是：通过 libswresample lib 中的 swr_convert 函数重新采样。

# ruby-on-rails - 未初始化的常量 Order::PAYMENT_TYPES

> ID：11581266
> 
> 赞同：0
> 
> 时间：2012-07-20T14:21:26.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

当我第一次在我的 Orders 控制器中调用一个动作时，我得到以下信息：

`uninitialized constant Order::PAYMENT_TYPES`刷新我得到`undefined method 'key?' for nil:NilClass`。

这表明我的模型代码中有一个错误。我能够追踪到以下几行：

```
 validates :pay_type, inclusion: PAYMENT_TYPES

  PAYMENT_TYPES = [ "Check", "Credit Card", "Purchase Order"] 
```

我的验证行做错了什么？

我也尝试过使用`validates :pay_type, inclusion: {in: PAYMENT_TYPES}`，但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:37:26.937

这是因为您在课堂上使用 PAYMENT_TYPES 常量后定义了它。颠倒顺序应该没问题。

# xslt - XSLT 1.0：对 XSLT 中的节点进行计数

> ID：11581270
> 
> 赞同：0
> 
> 时间：2012-07-20T14:21:44.757
> 
> 标签：xslt, xslt-1.0

我需要输出具有正确序列号的附属节点（仅且仅具有“空”子节点的节点）（请参阅 XML）

下面的 XML 中没有属性，只有元素和值。

```
<stuff>
    <locations>
        <location>
            <properties>
                <property>
                    <belongings>
                        <house>
                            <houseWithAC/>
                        </house>
                    </belongings>
                </property>
                <property>
                    <belongings>
                        <outbuilding/>
                    </belongings>
                </property>
                <property>
                    <belongings>
                        <outbuilding>
                            <vacant/>
                        </outbuilding>
                    </belongings>
                </property>
                <property>              
                    <belongings>
                        <outbuilding>
                            <vacant/>
                        </outbuilding>
                    </belongings>
                </property>
                <property>
                    <belongings>
                        <vehicle/>
                    </belongings>
                </property>
            </properties>
        </location>
        <location>
            <properties>
                <property>
                    <belongings>
                        <vehicle/>
                    </belongings>
                </property>
                <property>
                   <belongings>
                       <outbuilding/>
                   </belongings>
                </property>
                <property>
                    <belongings>
                        <house/>
                    </belongings>
                </property>
                <property>
                     <belongings>
                        <outbuilding>
                            <vacant/>
                        </outbuilding>
                     </belongings>
                 </property>
                 <property>
                     <belongings>
                         <barn/>
                     </belongings>
                 </property>
             </properties>
          </location>
      </locations>
</stuff> 
```

1.  排序：我需要计算每个位置的每个所属子节点（例如房屋、附属建筑、车辆） **注意，带有 houseWithAC 子节点的房屋算作两个节点！** 序列格式为 Loc ### / Item ###

2.  我需要用正确的序列号输出每个有空子的附属节点（见上文）

另请注意：“集合”节点如位置、属性有许多子节点，而节点所有物 - 只有一个。

我试图创建一个递归循环，但 id 不起作用：如果我有没有“空”子的附属节点，我仍然会进入 if 语句（看起来那个条件总是正确的）

像这样的东西：。. . . . . . . . . .

```
<xsl:for-each select="Locations/Location">
    <xsl:variable name="LOCID">
        <xsl:number level="single" count="*" format="001"/>
    </xsl:variable>
   <xsl:call-template name="WriteItems">
       <xsl:with-param name="propertiesNodes" select="properties/property"/>
       <xsl:with-param name="NumberOfProperties" select="count(properties/property)"/>
       <xsl:with-param name="LocCount" select="$LOCID"/>
   </xsl:call-template>
</xsl:for-each>     
. . . . . . . . . . . . .

<xsl:template name="WriteItems">
    <xsl:param name="propertiesNodes"/>
    <xsl:param name="NumberOfProperties"/>
    <xsl:param name="LocCount"/>
    <xsl:param name="Index">1</xsl:param>
    <xsl:param name="ItemCount">1</xsl:param>     
    <xsl:choose>
        <xsl:when test="$Index > $NumberOfProperties"/>
         <xsl:otherwise>
           <xsl:choose>
               <xsl:when test="$propertiesNodes[$Index]/belongings/house/houseWithAC">
                  <xsl:call-template name="WriteItems">
                      <xsl:with-param name="propertiesNodes" select="$propertiesNodes"/>
                      <xsl:with-param name="NumberOfProperties" select="$NumberOfProperties"/>
                      <xsl:with-param name="LocCount" select="$LocCount"/>
                      <xsl:with-param name="Index" select="$Index + 1"/>
                      <xsl:with-param name="ItemCount" select="$ItemCount + 2"/>
                  </xsl:call-template>
               </xsl:when>
               <xsl:when test="$propertiesNodes[$Index]/belongings/house">
                   <xsl:call-template name="WriteItems">
                       <xsl:with-param name="propertiesNodes" select="$propertiesNodes"/>
                       <xsl:with-param name="NumberOfProperties" select="$NumberOfProperties"/>
                       <xsl:with-param name="LocCount" select="$LocCount"/>
                       <xsl:with-param name="Index" select="$Index + 1"/>
                       <xsl:with-param name="ItemCount" select="$ItemCount + 1"/>
                   </xsl:call-template>
               </xsl:when>
               <xsl:when test="$propertiesNodes[$Index]/belongings/vehicle">
                   <xsl:call-template name="WriteItems">
                       <xsl:with-param name="propertiesNodes" select="$propertiesNodes"/>
                       <xsl:with-param name="NumberOfProperties" select="$NumberOfProperties"/>
                       <xsl:with-param name="LocCount" select="$LocCount"/>
                       <xsl:with-param name="Index" select="$Index + 1"/>
                       <xsl:with-param name="ItemCount" select="$ItemCount + 1"/>
                   </xsl:call-template>
               </xsl:when>
               <xsl:when test="$propertiesNodes[$Index]/belongings/barn">
                   <xsl:call-template name="WriteItems">
                       <xsl:with-param name="propertiesNodes" select="$propertiesNodes"/>
                       <xsl:with-param name="NumberOfProperties" select="$NumberOfProperties"/>
                       <xsl:with-param name="LocCount" select="$LocCount"/>
                       <xsl:with-param name="Index" select="$Index + 1"/>
                       <xsl:with-param name="ItemCount" select="$ItemCount + 1"/>
                   </xsl:call-template>
               </xsl:when>
               <xsl:when test="$propertiesNodes[$Index]/belongings/outbuilding">
                  <xsl:if test="$propertiesNodes[$Index]/belongings/outbuilding/vacant">
                        <xsl:variable name="ITEMID">
                             <xsl:value-of select="format-number($ItemCount,'000')"/>
                        </xsl:variable>  

                         .... output as  concat('-  ', $LocCount, '/', $ITEMID) ...... some description ....

                   </xsl:if>
                   <xsl:call-template name="WriteItems">
                       <xsl:with-param name="propertiesNodes" select="$propertiesNodes"/>
                       <xsl:with-param name="NumberOfProperties" select="$NumberOfProperties"/>
                       <xsl:with-param name="LocCount" select="$LocCount"/>
                       <xsl:with-param name="Index" select="$Index + 1"/>
                       <xsl:with-param name="ItemCount" select="$ItemCount + 1"/>
                   </xsl:call-template>
               </xsl:when>
           </xsl:choose>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T16:39:12.967

我不确定我是否正确理解了您的问题，但如果这是您想要的：

对于每个空的“项目”，输出：

1.  包含位置在所有位置中的位置，以及
2.  “项目”在包含位置的所有“项目”中的位置

然后，您可以通过遍历位置和“项目”并使用该[`position()`](http://www.w3.org/TR/xpath/#function-position)函数在找到匹配项时告诉位置来实现这一点。像这样：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:for-each select="//location">
      <xsl:variable name="locposition" select="position()"/>
      <xsl:for-each select=".//belongings//*[not(self::vacant)]">
        <xsl:if test="vacant">
          <xsl:value-of select="format-number($locposition, '000')"/>
          <xsl:text> / </xsl:text>
          <xsl:value-of select="format-number(position(), '000')"/>
          <xsl:text>&#xa;</xsl:text>
        </xsl:if>
      </xsl:for-each>
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

使用您的示例输入，这将输出以下内容：

```
001 / 004
001 / 005
002 / 004 
```

* * *

**编辑添加：**[`xsl:number`](http://www.w3.org/TR/xslt/#number)这是避免显式循环的替代解决方案：

```
<xsl:stylesheet version="1.0"
                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="*[vacant]">
    <xsl:number count="location" format="001"/> 
    <xsl:text> / </xsl:text>
    <xsl:number count="*[not(self::vacant)][ancestor::belongings]"
                level="any" from="location" format="001"/>
    <xsl:text>&#xa;</xsl:text>
  </xsl:template>

  <xsl:template match="text()"/>

</xsl:stylesheet> 
```

# r - 在 R 上：我无法使用 list() 执行构建函数，输入

> ID：11581271
> 
> 赞同：1
> 
> 时间：2012-07-20T14:21:50.493
> 
> 标签：r

我是 R 新手并尝试使用我自己的函数进行计算：

```
library(lubridate)
diffWeekdays<-function(df,ds){
  df<-as.Date(df)
  ds<-as.Date(ds)

    ndays<-as.integer(0)
  for(i in ds:df) {
    if(wday(ds)>1& wday(ds)<7){ #only weekdays count
      ndays<-ndays+1
    }
   ds<-ds+1
  }
    if(ndays>0){
      ndays<-ndays-1
    }
  return(ndays)
} 
```

我有一个 B（列表 [2]）。当我执行 B[2] 或 B[1] 时，会显示所有值，但是当我执行时

```
diffWeekdays(B[[2]],B[[1]]) 
```

我收到错误：as.Date.default(df) 中的错误：
不知道如何将“df”转换为“日期”类

```
>B[[2]] 
```

6193 2012-07-19
6194 2012-07-17
6195 2012-07-16

有人可以告诉我我做错了什么。谢谢

# jquery - 通过jquery将相同的文本分配给多个DIV

> ID：11581273
> 
> 赞同：0
> 
> 时间：2012-07-20T14:21:55.910
> 
> 标签：jquery

假设我有很多`DIV`s 不同`ID`的 s，我想将一小段 html 插入到所有这些`DIV`不同`ID`s 的 s 中。我试过了

```
$("#lblTopPager", "#lblBottomPager").html('hello my data'); 
```

但它不起作用。谁能告诉我正确的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:22:54.270

元素需要是一个逗号分隔的列表，现在您正在提供上下文，并且基本上在带有 ID`lblTopPager`的元素内寻找带有 ID 的元素`lblBottomPager`，就像您在 where using 一样`$('#lblBottomPager').find('#lblTopPager')`。

要同时定位两个或多个元素，您可以执行以下操作：

```
$("#lblTopPager, #lblBottomPager").html('hello my data'); 
```

# jquery - jquery在拖动中创建选择器以用于放置

> ID：11581275
> 
> 赞同：0
> 
> 时间：2012-07-20T14:21:59.093
> 
> 标签：jquery, drag-and-drop

我是 jQuery 新手，我正在尝试使用可拖动和可放置的交互。有没有办法在拖动框时设置可放置选择器？我尝试在拖动事件中解析可拖动选择器，将值设置为变量并将变量用作可放置选择器，但执行放置事件时变量永远不会改变。这是我的 JSFiddle 代码：

[http://jsfiddle.net/tjohnson/DNxpv/161/](http://jsfiddle.net/tjohnson/DNxpv/161/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:28:25.877

当你调用它时`$(section).droppable({...})`，它只适用于*你调用它时的*`section`任何值。

 *您不能`section`稍后再更改（根据您的`SetSection`功能）并期望您之前的调用`.droppable`仍然适用。

您需要在函数`.droppable()` *内部*`SetSection`调用 - 必须从之前拥有的任何元素中删除可放置状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:36:02.787

[http://jsfiddle.net/DNxpv/165/](http://jsfiddle.net/DNxpv/165/)

你的意思是这样的吗？

我在开始和停止事件中对可放置选​​择器进行了绑定和解除绑定！此外，我稍微调整了 Selector 方法。*

# android - Android Webservice 会话管理

> ID：11581279
> 
> 赞同：1
> 
> 时间：2012-07-20T14:22:15.567
> 
> 标签：android, service, web

我正在开发一个使用 web 服务的 android 应用程序。首先，应用程序通过下面编写的 httppost 方法登录。

```
public void postData() throws ParseException, IOException 
{
    httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://192.168.0.46:8080/login");
    httppost.addHeader("Content-Type", "application/x-www-form-urlencoded");;
    HttpResponse responses = null;

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("LoginForm[email]", "t@a.com"));
    nameValuePairs.add(new BasicNameValuePair("LoginForm[password]", "tttttt"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    responses = httpclient.execute(httppost);

    HttpEntity responseEntity = responses.getEntity();
    String apitoken = EntityUtils.toString(responseEntity);

} 
```

现在 apitoken 是密钥（seesion 密钥），它将返回服务关于该用户的其他数据

```
public void getCategories {
      HttpClient httpclient = new DefaultHttpClient();
          HttpPost httppost = new HttpPost("http://192.168.0.46:8080/usercategories");
          httppost.addHeader("Content-Type", "application/x-www-form-urlencoded");;

          HttpResponse responses = null;
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
          nameValuePairs.add(new BasicNameValuePair("api_token", apitoken));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

         try {
              responses = httpclient.execute(httppost);
         } catch (ClientProtocolException e) {
              // TODO Auto-generated catch block
          } catch (IOException e) {
              // TODO Auto-generated catch block
          }

         HttpEntity responseEntity = responses.getEntity();
        String category =EntityUtils.toString(responseEntity) ;
}
} 
```

现在的问题是服务器上的会话密钥（api_token）没有被识别。我已经在服务器上检查过，它与应用程序从服务器获得的密钥完全相同。我在 iPhone 中实现了相同的 web 服务。效果很好..我是 android 新手，我不明白是什么问题。我是否还应该在客户端或其他地方保持会话。欢迎任何帮助

# xml - 使用 XML::Simple 从带有一些键作为属性的哈希数组构建 XML

> ID：11581292
> 
> 赞同：4
> 
> 时间：2012-07-20T14:23:21.137
> 
> 标签：xml, perl

我正在使用[`XML::Simple`](http://p3rl.org/XML%3a%3aSimple)并且希望将此数据转换为 XML：

```
@rooms = (
   {
      id => 4,
      is_key => 0,
      name => B507,
      capacity => 35
   },
   {
      id => 5,
      is_key => 1,
      name => B502,
      capacity => 24
   }
); 
```

我想输出这个：

```
<rooms>
   <room id=4 is_key=0>
      <name>B507</name>
      <capacity>35</capacity>
   </room>
   <room id=5 is_key=1>
      <name>B502</name>
      <capacity>24</capacity>
   </room>
</rooms> 
```

我看不出有办法做到这一点`XML::Simple::XMLout`。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:00:46.093

我发现[`XML::Simple`](http://p3rl.org/XML%3a%3aSimple)使用起来不直观且非常尴尬。很容易最终只是向它抛出随机选项以尝试使其正常工作。

但是，如果您坚持使用它，则有一种方法。首先，该`ForceArray`选项非常有用，正如文档所述，

> 查看“ForceArray”，因为您几乎肯定会想要打开它

因此，您需要调整数据，使其看起来`ForceArray`在解析原始 XML 时生效。这只涉及将所有应该是元素内容而不是属性值的数据放入匿名数组中。

这段代码可以满足您的需要。该`KeepRoot`选项只是告诉`XMLout`顶级哈希是根元素，它不必将整个东西包装在另一个元素中。

```
use strict;
use warnings;

use XML::Simple;

my @rooms = (
   {
      id => 4,
      is_key => 0,
      name => 'B507',
      capacity => 35
   },
   {
      id => 5,
      is_key => 1,
      name => 'B502',
      capacity => 24
   }
);

for my $room (@rooms) {
  for my $k (keys %$room) {
      $room->{$k} = [ $room->{$k} ] unless grep $k eq $_, qw/ is_key id /;
  }
}

my $xml = {rooms => {room => \@rooms} };

print XMLout($xml, KeepRoot => 1); 
```

**输出**

```
<rooms>
  <room id="4" is_key="0">
    <name>B507</name>
    <capacity>35</capacity>
  </room>
  <room id="5" is_key="1">
    <name>B502</name>
    <capacity>24</capacity>
  </room>
</rooms> 
```

* * *

**更新**

您可能更喜欢使用 的解决方案[`XML::Smart`](http://p3rl.org/XML%3a%3aSmart)，它允许您指定哪些节点是元素，哪些是标签。这使您可以保持原始数据`@rooms`不变。

该程序接受对`XML::Simple`解决方案的类似哈希引用，它们循环遍历所有`/rooms/room`元素，将所有节点`name`和`capacity`子节点设置为使用`set_tag`.

请注意，使用 XML 输出是`scalar $smart->data()`因为在列表上下文中调用该`data`方法时将返回第二个值：指示 XML 是否为 Unicode 编码的布尔标志。这似乎没有记录在 POD 中。

`$smart->set_order`如果您不关心属性和元素在 XML 中出现的顺序，则可以省略调用。

```
use strict;
use warnings;

use XML::Smart;

my @rooms = (
   {
      id => 4,
      is_key => 0,
      name => 'B507',
      capacity => 35
   },
   {
      id => 5,
      is_key => 1,
      name => 'B502',
      capacity => 24
   }
);

my $smart = XML::Smart->new;
$smart->{rooms} = { room => \@rooms };

for my $room (@{$smart->{rooms}{room}}) {
  $room->set_order(qw/ id is_key name capacity /);
  $room->{name}->set_tag;
  $room->{capacity}->set_tag;
}

print scalar $smart->data(noheader => 1, nometagen => 1); 
```

**输出**

```
<rooms>
  <room id="4" is_key="0">
    <name>B507</name>
    <capacity>35</capacity>
  </room>
  <room id="5" is_key="1">
    <name>B502</name>
    <capacity>24</capacity>
  </room>
</rooms> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:53:09.753

哈希值 arrayrefs 成为 XML 元素内容，简单的哈希值成为 XML 属性值。

```
use strictures;
use XML::Simple qw(:strict);

print XMLout(
    {
        room => [
            {
                id       => 4,
                is_key   => 0,
                name     => ['B507'],
                capacity => [35],
            },
            {
                id       => 5,
                is_key   => 1,
                name     => ['B502'],
                capacity => [24],
            }
        ]
    },
    KeyAttr  => [],
    RootName => 'rooms'
); 
```

* * *

```
<rooms>
  <room id="4" is_key="0">
    <capacity>35</capacity>
    <name>B507</name>
  </room>
  <room id="5" is_key="1">
    <capacity>24</capacity>
    <name>B502</name>
  </room>
</rooms> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T16:01:18.610

Daxim 的回答已经是正确的。既然我已经打出来了，我还是会发布这个。这是一段代码，可以将您的数据结构转换为您需要的数据结构（Daxim 已经指出）。

```
my $stuff = { 
  'room' =>  [ 
    map { { 
      'id' => $_->{'id'}, 
      'is_key' => $_->{'is_key'}, 
      'name' => [ $_->{'name'} ], 
      'capacity' => [  $_->{'capacity'} ] 
    } } @rooms 
  ]
};

print XMLout($stuff, RootName=> 'rooms', ); 
```

# android - Titanium 2：获取图像大小？

> ID：11581293
> 
> 赞同：0
> 
> 时间：2012-07-20T14:23:22.927
> 
> 标签：android, iphone, titanium

我用钛。我使用 Android Nexus S 进行测试。

我有一个 blob，它是来自画廊的照片。我找不到获取这张照片的宽度和高度的方法。

我已经看到了一些关于 auto 属性的提示，但是这个提示似乎**从 Titan 2.0 开始**就没有运行了。

* * *

## 第一次尝试

```
Ti.Media.openPhotoGallery({
    success : function(e) {
        alert(e.media.width + " x " + e.media.height);
}}); 
```

***结果“0 x 0”***

* * *

## 第二次尝试

```
Ti.Media.openPhotoGallery({
    success : function(e) {
        var img = Ti.UI.createImageView({
                    image : e.media, 
                    width: 'auto', 
                    height: 'auto' });
        alert(img.width + " x " + img.height);
}}); 
```

***结果“自动 x 自动”***

* * *

所以，我的简单问题：

**如何获取从图库中获得的照片的大小？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:23:22.927

经过几次尝试（在写这个问题期间），我找到了它：

```
Ti.Media.openPhotoGallery({
    success : function(e) {
        var img = Ti.UI.createImageView({
                    image : e.media, 
                    width: 'auto', 
                    height: 'auto' });
        alert(img.toImage().width + " x " + img.toImage().height);
}}); 
```

提示是使用 img.toImage().width

# backbone.js - View 事件未触发

> ID：11581296
> 
> 赞同：2
> 
> 时间：2012-07-20T14:23:28.910
> 
> 标签：backbone.js

我正在使用以下视图。问题是#likeCar 的点击事件没有被触发。我在这里做错了什么？

```
window.LikeView = Backbone.View.extend({
    events: {
        "click #likeCar":"likeCar"
    },

    initialize : function(){
        this.el = $("#liker");
        this.template = _.template($('#like-template').html());
        //_.bindAll(this,"render");
        this.model.bind("change", this.render, this);
    },

    render : function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },

    likeCar : function(e) {
        console.log("like car")
    }
}); 
```

模板：

```
<script type="text/template" id="like-template">
<a id="likeCar" class="btn btn-mini" href="#">Like</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:30:18.373

尝试在视图定义中包含这一行：

```
el: $('#liker') 
```

而不是在初始化方法中对其进行初始化。

似乎在这里奏效：

[http://jsfiddle.net/xqREW/6/](http://jsfiddle.net/xqREW/6/)

# c# - 为什么不是以 C# 上的正则表达式开头，结尾？

> ID：11581297
> 
> 赞同：1
> 
> 时间：2012-07-20T14:23:31.073
> 
> 标签：c#, regex

为什么我的正则表达式找不到我的字符串？

```
 Regex.Replace(" SCRIPT language=Javascript src=\"\"\r\ntype=text/javascript ",
    "^language=Javascript$",
    "language=\"Javascript\"",
    RegexOptions.Multiline | RegexOptions.Compiled
); 
```

不`^language=Javascript$`工作。如果我删除它，它会起作用，但我想确保部分相似的字符串不会被替换（它在我的测试中发生过）。字符串不是常量，我实际上使用变量，但这只是我使用的一种情况。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:26:09.143

嗯，这是因为`^`代表了字符串的*开始和*字符串`$`的*结束*。您的正则表达式根本无法匹配。你可以使用

```
\blanguage=Javascript\b 
```

如果您只想确保`foolanguage=Javascript`不匹配，则可以作为一种解决方法。但这在一定程度上取决于您期望的数据以及该方法中的内容。更安全的方法是

```
(?<= )language=Javascript(?= ) 
```

这将确保比赛前后有一个空格。您可以从那里使它更复杂（和可靠），例如

```
(?<= )language=Javascript(?= |>) 
```

匹配甚至`<script type='text/javascript' language=Javascript>`。

# objective-c - 如何从objective-c中的文件中读取值列表？

> ID：11581299
> 
> 赞同：-4
> 
> 时间：2012-07-20T14:23:31.367
> 
> 标签：objective-c, cocoa, file-handling

我有一个来自这种格式的文件的值列表：

```
#number of items#
#item type#value x#value y#
#... 
```

例子：

```
#100#
#1#150#200#
#1#250#200#
#2#350#200#
#2#450#250#
#1#550#350#
#... 
```

想将其读入代码中...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:26:37.110

You can do something like this, don't know about performance though

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"txt"];
NSString *fileContent = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

NSArray *lines = [fileContent componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

if (lines.count > 1)
{
    NSString *firstLine = [lines objectAtIndex:0];
    NSCharacterSet *seperatorSet = [NSCharacterSet characterSetWithCharactersInString:@"#"];

    int itemCount = [[firstLine stringByTrimmingCharactersInSet:seperatorSet] intValue];

    for (int i = 1; i < lines.count; ++i)
    {
        NSString *line = [lines objectAtIndex:i];
        NSArray  *components = [line componentsSeparatedByCharactersInSet:seperatorSet];

        //starts at 1 because first and last are empty strings
        int type = [[components objectAtIndex:1] intValue];
        int x    = [[components objectAtIndex:2] intValue];
        int y    = [[components objectAtIndex:3] intValue];
    }
} 
```

# javascript - 在按钮单击时从 Grails 模板添加表行

> ID：11581300
> 
> 赞同：2
> 
> 时间：2012-07-20T14:23:36.710
> 
> 标签：javascript, templates, grails

因此，与我的 create.gsp 关联的 _form.gsp 模板从该行的模板创建一个初始表，如下所示：

```
<table id="myTable">
<!-- define table headers here -->
<g:each var="i" in="${1..5}">
    <g:render template="tableRow" model="['i': i]" />
</g:each>
</table> 
```

我想做的是在该表下方添加一个按钮或一个链接，让您可以再添加五行，同时保留到目前为止您在表单中输入的所有数据。

我可以看到这在“纯”javascript 中是如何实现的，但我基本上必须在我的 javascript 文件中重复 _myTable.gsp HTML。我想避免这种情况（干燥等）。

我怎样才能做到这一点？

**编辑** 所以，我尝试了 Gregg 的解决方案（如下）。这就是我想出的。

控制器有一个动作：

```
def addMoreRows() {
    println params
    def i = params.rowNumber + 1
    def j = i+5
    println "i is set to " + i
    render(template: "foapRow", bean:i, var:i, model: ['rowStart': i, 'rowEnd': j])
    } 
```

create.gsp 页面照常调用 _form.gsp，将 rowStart 和 rowEnd 添加到模型中。

*创建.gsp*

```
<g:render template="form" model="['userId':userId, 'rowStart':1, 'rowEnd':5]"/> 
```

*_form.gsp* 反过来将这些参数传递给行模板，并创建一个链接来调用上述控制器操作。它也有 javascript Gregg 推荐：

```
<script type="text/javascript">
    $("#addRowsLink").on("click", function(e) {
        e.preventDefault();
            $.get("/Controller/addMoreRows", function(html) {
                $("#theTableInQuestion>tbody").append(html);
            });
        });
    </script>
    <table>
    ...
        <g:render template="tableRow" model="['rowStart':1, 'rowEnd':5]"/>
    </table>
    <g:remoteLink id="addRowsLink" action="addMoreRows" update="theTableInQuestion" onSuccess="addRows(#theTableInQuestion, data, textStatus)" params="['rowNumber':data]">Add More Rows</g:remoteLink> 
```

*_tableRow.gsp* 开始和结束于：

```
<g:each var="i" in="${rowStart..rowEnd}">
    <tr>
    ...
    </tr>
</g:each> 
```

从以前的尝试中，我在包含的 javascript 文件中有这个函数：

```
function addRows(tableId, rowCode, status) {
    $(tableId + ' tr:last').after(rowCode);
} 
```

现在，当我单击“添加更多行”链接时，我仍然会被带到一个新页面，并且它只有一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:49:04.953

一种可能的解决方案。您将需要更改您的模板，以便它执行循环：

普惠制：

```
<table id="myTable">
<tbody>
    <g:render template="tableRows" model="[loopCount:loopCount, moreData:moreData]" />
</tbody>
</table> 
```

模板：

```
<g:each in="${loopCount}" var="idx">
  <tr>
     <td>.....</td>
     ......
  </tr>
</g:each> 
```

JavaScript：

```
$("#someButtonId").on("click", function(e) {
  e.preventDefault();
  $.get("/controller/someAction", function(html) {
    $("#myTable>tbody").append(html);
  });
}); 
```

控制器：

```
def someAction = {
  // logic here
  render template: "tableRows", model="[loopCount: 5, moreData:moreData]"
} 
```

您还可以每次将表中的所有数据提交到服务器并刷新整个页面，添加逻辑以循环一些可变数量的行。但是您需要收集服务器上的所有数据并确保将其放回请求中。

可能有十几种方法可以做到这一点，所以如果你得到这么多答案，不要感到惊讶。:o)

# database-design - 规划和设计Web应用程序结构和逻辑

> ID：11581301
> 
> 赞同：1
> 
> 时间：2012-07-20T14:23:38.147
> 
> 标签：database-design, web-applications

我已经构建一个网络应用程序一年多了。这是我在学习 PHP 和 MYSQL 等时开始构建的第一件事。它已经从一个用原始 PHP 编码的非常简单的预算应用程序发展成为一个完整的个人财务跟踪器，我每天都在 Codeigniter 上使用它。同时，我还构建了其他几个小型 Web 应用程序，因此我比我刚开始这个项目时的经验多了 1 年，我认为由于基本设计，我的开发开始受到影响我在第一天做出的决定。

尽管代码已被重写以与 codeigniter 一起使用，但数据库结构仍然相同，我觉得我必须编写比解决数据库架构问题所需的更多代码。

我的问题是：

1.  有没有什么好的资源来学习如何有效地设计数据库？书籍、课程等
2.  回到我开始这个项目的时候，我非常“像我编码一样设计”，但我觉得也许更明智的方法是在功能级别设计所有东西，这样你就可以在编写一行代码之前看到流程和逻辑是什么. 这种类型的开发是否有一个特定的名称，或者它只是标准做法？（我没有接受过网络开发方面的正式培训，所以我觉得我可能只是偶然发现了每个人都已经知道的东西）
3.  我应该设计我的逻辑和功能然后我的数据库还是从数据库开始然后逻辑和功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:43:27.357

> 1）是否有学习如何有效设计数据库的好资源？

了解实体关系建模。[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)是一个好的开始。

但在现实世界中，数据库不只是存储数据——它们与客户端应用程序交互并且性能需要良好。[使用索引喜欢！](http://use-the-index-luke.com/)是关于这个话题的一个很好的介绍。

> 2) ...

理想情况下，您将有一组固定的需求，然后基于它们设计一个模型，然后基于该模型编写代码。不幸的是，不断变化的需求是不争的事实，而这种“瀑布模型”在面对不断变化的需求时是脆弱的。

在光谱的另一端是“敏捷”软件开发，强调变化。

事实是[没有灵丹妙药](http://en.wikipedia.org/wiki/No_Silver_Bullet)，最佳值通常介于两者之间。

> 3）我应该设计我的逻辑和功能然后我的数据库还是从数据库开始然后逻辑和功能？

数据往往比代码寿命更长。所以我首先会专注于让数据模型正确。如果您必须在更清洁的数据和更清洁的代码之间做出决定，请选择更清洁的数据。

话虽如此，请尝试使您的数据模型“可进化”。不要走极端，例如在实际上不需要的地方实施[EAV ，而是做一些明智的事情，例如通过规范化避免冗余，](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)[明智地选择自然键与代理键](https://stackoverflow.com/a/11230592/533120)，而不是人为地限制项目的数量等......

# jquery - 查找多个属性并将其传递给ajax

> ID：11581306
> 
> 赞同：1
> 
> 时间：2012-07-20T14:23:46.600
> 
> 标签：jquery, dom-traversal

我有 jquery 代码，可以找到 div 中所有图像的“src”属性（每个图像都有相同的类：.image_class），然后将其发送到 ajax（然后发送到找到该图像并删除它们的 php 文件）。这是代码：

```
$remove_images = $.each($("#main_div").find(".image_class").attr(""));
$.ajax({
    type: 'POST',
    data: {
        action: 'delete_images',
        imagefile: $remove_images
    },
    url: 'delete.php',
    success: function(msg) {
        alert("" + msg + "");
    }
}) 
```

PHP 文件如下所示：

```
 if($_POST["action"]=="delete_images"){
    @unlink($_POST['imagefile']);
  } 
```

但这不起作用。我怀疑 $remove_images 有问题（可以说“$.each 不好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:26:02.770

您可以使用该[`.map()`](http://api.jquery.com/map/)方法从 jQuery 集合中收集内容。

`.find()`在我们的例子中，回调将针对集合中返回的每个元素运行。`this`将代表当前的 DOM 元素。从回调返回的任何内容都将包含在结果中。

```
var $remove_images = $("#main_div").find(".image_class").map(function () {
    return $(this).attr('src');
}).get(); 
```

[jsFiddle 演示](http://jsfiddle.net/bazmegakapa/6Um7a/)

我使用该`.get()`方法将结果转换为纯 Javascript 数组。

请阅读手册以`.map()`获取更多信息（并且通常习惯于使用手册，因为您可以在那里找到问题的答案 - 在大多数情况下，这些示例都很棒）。

# ruby - 什么是 procs 和 lambdas？请举个实际例子

> ID：11581308
> 
> 赞同：3
> 
> 时间：2012-07-20T14:24:00.557
> 
> 标签：ruby, lambda, block, proc

> **可能重复：**
> [何时使用 lambda，何时使用 Proc.new？](https://stackoverflow.com/questions/626/when-to-use-lambda-when-to-use-proc-new)

（我知道它已经被问了好几次，但我找不到满意的答案）有人可以解释一下 Blocks、Procs 和 Lambdas 以及为什么应该使用一个而不是另一个，什么情况下应该使用 proc，类似和/或拉姆达。对计算机内存也有影响。请提供实际示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:29:17.250

试试[Robert Sosinski 的教程](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)或[Chris Pine 的学习编程](http://pine.fm/LearnToProgram/?Chapter=10)。

对于更多的基础，我建议你阅读[Why's (poignant) Guide to Ruby](http://mislav.uniqpath.com/poignant-guide/book/)。本指南负责创建当今许多 Ruby 的 Pro！一定要看看！

***[乔伊·德维拉](https://stackoverflow.com/users/216/joey-devilla)的解释***

另一个重要但微妙的区别是 procs created with`lambda`和 procs created with`Proc.new`处理`return`语句的方式：

*   在`lambda`-created proc 中，`return`语句仅从 proc 本身返回
*   在`Proc.new`-created proc 中，该`return`语句更令人惊讶：它不仅从 proc 中返回控制权，**而且还从包含 proc 的方法中返回控制！**

这是`lambda`-created proc 的`return`实际操作。它以您可能期望的方式运行：

```
def whowouldwin

  mylambda = lambda {return "Freddy"}
  mylambda.call

  # mylambda gets called and returns "Freddy", and execution
  # continues on the next line

  return "Jason"

end

whowouldwin
=> "Jason" 
```

现在这是一个`Proc.new`-created proc`return`做同样的事情。您即将看到 Ruby 打破了广受赞誉的“最小惊喜原则”的案例之一：

```
def whowouldwin2

  myproc = Proc.new {return "Freddy"}
  myproc.call

  # myproc gets called and returns "Freddy", 
  # but also returns control from whowhouldwin2!
  # The line below *never* gets executed.

  return "Jason"

end

whowouldwin2         
=> "Freddy" 
```

*由于这种令人惊讶的行为（以及更少的打字），我倾向于在制作 procs 时使用`lambda`over 。`Proc.new`*

# linq - 如果它们被其他键分隔，Linq GroupBy 不合并具有相同键的分组

> ID：11581309
> 
> 赞同：3
> 
> 时间：2012-07-20T14:24:04.183
> 
> 标签：linq, group-by

我想归档类似于 Pythons 的 groupby 的行为。

```
[1, 1, 2, 1].GroupBy() => [[1, 1], [2], [1]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:46:33.637

我想这就是你要找的：

```
var data = new int[] { 1, 1, 2, 1 };
var results = Enumerable.Range(0, data.Count ())
    .Where (i => i == 0 || data.ElementAt(i - 1) != data.ElementAt(i))
    .Select (i => new
                  {
                  //Key = data.ElementAt(i),
                  Group = Enumerable.Repeat(
                     data.ElementAt(i), 
                     data.Skip(i).TakeWhile (d => d == data.ElementAt(i)).Count ())
                  }
             ); 
```

这是它运行的示例和结果：http: [//ideone.com/NJGQB](http://ideone.com/NJGQB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:05:49.593

这是一个懒惰的通用扩展方法，可以满足您的需求。

* * *

**代码：**

```
public static IEnumerable<IEnumerable<T>> MyGroupBy<T>(this IEnumerable<T> source)
{
    using(var enumerator = source.GetEnumerator())
    {
        var currentgroup = new List<T>();
        while (enumerator.MoveNext())
        {
            if (!currentgroup.Any() || currentgroup[0].Equals(enumerator.Current))
                currentgroup.Add(enumerator.Current);
            else
            {
                yield return currentgroup.AsReadOnly();                 
                currentgroup = new List<T>() { enumerator.Current };
            }
        }
        yield return currentgroup.AsReadOnly();
    }
} 
```

* * *

**测试：**

```
void Main()
{
    var data = new int[] { 1, 1, 2, 1 };

    foreach(var g in data.MyGroupBy())
        Console.WriteLine(String.Join(", ", g));
} 
```

**输出：**

> 1, 1
> 2
> 1

# c - C - 函数未执行。调用错误？

> ID：11581312
> 
> 赞同：0
> 
> 时间：2012-07-20T14:24:19.357
> 
> 标签：c, function, network-programming

我正在尝试构建一个可以发送 TCP 数据包的程序，但是当我编译我的代码来测试发送功能时，它并没有按应有的方式运行。当给定参数时，它会跳到 getchar 并退出程序，就好像根本没有调用该函数一样。现在我不是特别有经验，这可能是一个愚蠢的问题，但我无法在其他地方找到解决方案。我的猜测是我以某种方式调用它是错误的，也许 send_tcp 函数不能在 forgepacket 函数中。

以下是我的代码（根本没有完成，但应该足以进行一点测试运行），给我带来问题的函数是 forgepacket。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <getopt.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>

#define VERSION "1.0"
#define PCKT_LEN 8192

/* Prototypes */    

void forgepacket (unsigned int, unsigned int, unsigned short, unsigned short);  
void usage(); 

/* Checksum */
unsigned short checksum (unsigned short *pac, int len)
{ 
    unsigned long sum;
    for (sum = 0; len > 0; len--)
            sum += *pac++;
    sum = (sum >> 16) + (sum & 0xffff);
    sum += (sum >> 16);
    return(~sum);
}               

in_addr_t sip;
in_addr_t dip;
int sport;
int dport;                  

int main(int argc,char **argv)
{
int c;

/* Are we in root? */   
if(geteuid() !=0)
    {
        printf("Root access is required to run this program.\n\n");
        exit(0);        
    }   

while (1)
    {
        static struct option long_options[] =
            {
                /* Options */
            {"send",       no_argument,       0, 's'}, /* args s, r and f have no function yet */
            {"recieve",    no_argument,       0, 'r'},
            {"file",       required_argument, 0, 'f'},
            {"destip",     required_argument, 0, 'i'},
            {"destport",   required_argument, 0, 'p'},
            {"sourceip",   required_argument, 0, 'o'},
            {"sourceport", required_argument, 0, 't'},
            {0, 0, 0, 0}
            };

           int option_index = 0;

           c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
                        long_options, &option_index);

                      /* Detect the end of the options. */
           if (c == -1)
             break;

           switch (c)
             {
             case 0:
               /* If this option set a flag, do nothing else now. */
               if (long_options[option_index].flag != 0)
             break;
               printf ("option %s", long_options[option_index].name);
               if (optarg)
             printf (" with arg %s", optarg);
               printf ("\n");
               break;

             case 's':
               puts ("option -s\n");
               break;

             case 'r':
               puts ("option -r\n");
               break;

             case 'f':
               printf ("option -f with value `%s'\n", optarg);
               break;

             case 'i':
               dip = inet_addr(optarg);
               break;

             case 'p':
               dport = htons(atoi(optarg)); 
               /* Add handling of bad/non number input here */
               break;

             case 'o': 
               sip = inet_addr(optarg);
               break;

             case 't': 
               sport = htons(atoi(optarg));
               break;

             case '?':
               /* Error message printed */
               break;

             default:
               abort ();
             }
         }

           /* Print any remaining command line arguments (not options). */
        if (optind < argc)
    {
        printf ("non-option ARGV-elements: ");
        while (optind < argc)
        printf ("%s ", argv[optind++]);
        putchar ('\n');
    }

            /* check if all mandatory options are set and for unknown arguments */
            /* This REALLY needs changing... */
     if (dip, sip, dport, sport == 0)
        {
            usage();
            return (-1);
        }

    forgepacket(dip, sip, dport, sport);

    getchar ();
    exit (0);

}

void forgepacket(unsigned int sourceip, unsigned int destip, unsigned short sourceport,
                 unsigned short destport)
{           
    /* IP header structure */
    struct ipheader {

        unsigned char      iph_ihl:5, 
                           iph_ver:4;
        unsigned char      iph_tos;
        unsigned short int iph_len;
        unsigned short int iph_id;
        unsigned char      iph_flags;
        unsigned short int iph_offset;
        unsigned char      iph_ttl;
        unsigned char      iph_protocol;
        unsigned short int iph_chksum;
        unsigned int       iph_sourceip;
        unsigned int       iph_destip;

        };

    /* TCP header structure */      
    struct tcpheader {

        unsigned short int tcph_sourceport;
        unsigned short int tcph_destport;
        unsigned int       tcph_seqnum;
        unsigned int       tcph_acknum;
        unsigned char      tcph_reserved:4, tcph_offset:4;
        unsigned int

            tcp_res1:4,       
            tcph_hlen:4,      
            tcph_fin:1,       
            tcph_syn:1,       
            tcph_rst:1,       
            tcph_psh:1,       
            tcph_ack:1,       
            tcph_urg:1,       
            tcph_res2:2;

        unsigned short int tcph_win;
        unsigned short int tcph_chksum;
        unsigned short int tcph_urgptr;

        };

    int send_tcp()
        {
            int sock, one = 1;
            char buffer[PCKT_LEN];
            struct sockaddr_in sin, din;
            const int *val = &one;

            sock = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);
            if (sock < 0)
                {
                    printf("\nError: socket()\n\n");
                    exit (-1);
                }
            else
                    printf ("\nsocket() - Using SOCK_RAW and TCP protocol is OK.\n\n");

            /* Size of the headers */           
            struct ipheader *ip = (struct ipheader *) buffer;
            struct tcpheader *tcp = (struct tcpheader *) (buffer + sizeof (struct ipheader));
            memset (buffer, 0, PCKT_LEN);

            /* IP attributes */
            ip->iph_ihl = 5;
            ip->iph_ver = 4;
            ip->iph_tos = 16;
            ip->iph_len = sizeof(struct ipheader) + sizeof(struct tcpheader);
            ip->iph_id = htons(54321);
            ip->iph_offset = 0;
            ip->iph_ttl = 64;
            ip->iph_protocol = 6;
            ip->iph_chksum = 0; 

            ip->iph_sourceip = sip;
            ip->iph_destip = dip;

            /* TCP attributes */
            tcp->tcph_sourceport = sport;
            tcp->tcph_destport = dport;

            tcp->tcph_seqnum = htonl(1);
            tcp->tcph_acknum = 0;
            tcp->tcph_offset = 5;
            tcp->tcph_syn = 1;
            tcp->tcph_ack = 0;
            tcp->tcph_win = htons(32767);
            tcp->tcph_chksum = 0; 
            tcp->tcph_urgptr = 0;

            ip->iph_chksum = checksum ((unsigned short *) buffer, (sizeof (struct ipheader )+ sizeof (struct tcpheader)));

            /* Address family */ 
            sin.sin_family = AF_INET;
            din.sin_family = AF_INET;

            /* Source port */
            sin.sin_port = sport;
            din.sin_port = dport;

            /* Source IP */
            sin.sin_addr.s_addr = sip;
            din.sin_addr.s_addr = dip;      

            /* Tell the Kernel we're building our own packet */
            if ((setsockopt(sock, IPPROTO_IP, IP_HDRINCL, (char *)&one, sizeof (one))) < 0)
                {
                    printf("\nError: Can't set socketoptions\n\n");
                    return (-1);
                }

            /* Send */
            if (sendto(sock, buffer, ip->iph_len, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
                {
                    printf("\nError: Can't send packet\n\n");
                    return (-1);
                }

            else
                    printf("Packet sent to %d", dip); 

            close(sock);
        }           
}

void usage() 

{
 /* This is the user manual */  

    printf("\nTCP project %s\n\n", VERSION);

    printf("Usage:  -s -f <file> -i <destip> -p <destport> -o <sourceip> -t <sourceport>\n\n"); 

    printf("-s, --send,         Puts program in send mode\n");
    printf("-r, --recieve,      Puts program in recieve mode\n"); 
    printf("-f, --file,         Specify file containing steganographic message\n");         
    printf("-i, --destip,       Destination IP address\n"); 
    printf("-p, --destport,     Destination port\n"); 
    printf("-o, --sourceip          Source IP address\n"); 
    printf("-t, --sourceport        Source port\n"); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:30:42.620

看起来函数定义`send_tcp()`在函数定义中`forgepacket()`（我不知道这甚至可能吗？？），但没有调用它。复制您对 for 的`forgepacket()`安排`send_tcp()`：

```
/* Prototype. */
int send_tcp(); /* add whatever parameters are required. */ 
```

并移动`send_tcp()`outside of 的定义并添加对inside`forgepacket()`的调用。`send_tcp()``forgepacket()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:31:39.743

默认情况下，C 不允许嵌套函数。此外，即使确实如此，我也没有在代码中看到对 send_tcp 的调用（它可能在那里，但快速扫描并没有显示出来）。

如果您将 send_tcp 函数从 forge_packet 中分离出来，并确保将所需的数据作为参数传入，会发生什么？

# extjs - 在 Ext.data.Store 上使用 storeId 不会生成唯一实例

> ID：11581315
> 
> 赞同：3
> 
> 时间：2012-07-20T14:24:40.013
> 
> 标签：extjs, extjs-mvc, extjs4.1

我有一家商店`APP.store.Posts`，我想实例化 3 次不同的时间。它们都将保存相同类型的数据，但在重新加载、分页等时将使用不同的参数。在控制器中，我在`onLaunch`函数中执行此操作。

```
onLaunch: function() {

    Ext.create('APP.store.Posts',{
        storeId: 'unclassifiedPosts'
    });
    Ext.create('APP.store.Posts',{
        storeId: 'positivePosts'
    });
    Ext.create('APP.store.Posts',{
        storeId: 'negativePosts'
    });
}, 
```

然后，在`beforerender`我在控制器上创建的侦听器方法中，我这样做：

```
beforeRenderPostsGrid: function(grid) {
    var store = Ext.getStore('unclassifiedPosts');
    store.load();
},
beforeRenderPositivePostsGrid: function(grid) {        
    var store = Ext.getStore('positivePosts');
    store.getProxy().extraParams = {'some_param' : 'some_value'};
    store.load();
    var checkOtherStore = Ext.getStore('unclassifiedPosts'); //THIS STORE NOW HAS SAME PARAMS AS positivePosts STORE
}, 
```

问题是，无论`beforerrender`最后调用哪个网格，所有 3 个商店都有这些参数。所以初始负载很好，但如果我进行任何刷新、分页等。它们都显示相同的数据 b/c 每个商店的代理都有相同的 extraParams 不知何故。

据我了解，该`storeId`参数应该使我的商店独一无二，所以我错过了一步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:32:03.957

我遇到了同样的问题。我的商店实例*是*独一无二的，但由于某种原因，它们每个都有相同的代理。我发现解决此问题的唯一方法是在创建商店时包含代理配置。但是必须包含完整的代理配置，这是实际代码：

```
missingStore = Ext.create('ST.store.Attendance', {
    storeId: 'Missing_Attendance',
    proxy: {
        type: 'ajax', 
        url: 'query',
        extraParams: {
            resource: 'Attendance',
            parameters: '6'
        },
        writer: 'pipe'
    }
}),
partialStore = Ext.create('ST.store.Attendance', {
    storeId: 'Partial_Attendance',
    proxy: {
        type: 'ajax', 
        url: 'query',
        extraParams: {
            resource: 'Attendance',
            parameters: '5'
        },
        writer: 'pipe'
    }
}),
attendedStore = Ext.create('ST.store.Attendance', {
    storeId: 'Attended_Attendance',
    proxy: {
        type: 'ajax', 
        url: 'query',
        extraParams: {
            resource: 'Attendance',
            parameters: '4'
        },
        writer: 'pipe'
    }
}), 
```

# objective-c - 如何在 NSOutlineView 中创建右键菜单？

> ID：11581316
> 
> 赞同：1
> 
> 时间：2012-07-20T14:24:39.610
> 
> 标签：objective-c, cocoa, nstableview, nsoutlineview

我是这项技术的新手，我想在*父节点*和*子节点*上显示不同的*上下文菜单*..`Right click`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:35:33.877

子类化`NSOutlineView`并实现`- (NSMenu *)menuForEvent:(NSEvent *)theEvent`.

```
-(NSMenu*)menuForEvent:(NSEvent*)evt 
{
    NSLog(@"menuForEvent %@ %@",self, [self delegate]);
    NSPoint pt = [self convertPoint:[evt locationInWindow] fromView:nil];
    int row=[self rowAtPoint:pt];
    // create menu ...
    return menu;
} 
```

在 Mac OS 10.5 及更高版本上，在 nib 中创建 NSMenu 并设置委托并实现：

```
-(void)menuNeedsUpdate:(NSMenu *)menu 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-14T19:22:53.247

斯威夫特版本：

```
class SubclassOutlineView: NSOutlineView {

    override func menu(for event: NSEvent) -> NSMenu? {
        let point = convert(event.locationInWindow, from: nil)
        let row = self.row(at: point)
        let item = self.item(atRow: row)

        let menu = NSMenu()
        // ...

        return menu
    }

} 
```

我缺少的一点是`item(atRow:`，它为您提供了所需的数据源项。发现在这个相关的问题上：

[如何将上下文相关菜单添加到 NSOutlineView（即右键菜单）](https://stackoverflow.com/questions/1309602/how-do-you-add-context-senstive-menu-to-nsoutlineview-ie-right-click-menu)**

# maven - Maven 模块通过设置路径，而不是复制文件夹

> ID：11581318
> 
> 赞同：0
> 
> 时间：2012-07-20T14:24:44.433
> 
> 标签：maven

Maven 的多模块插件文档清楚地[说明](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)：

> 模块是常规的 Maven 项目，必须位于子目录下，以便父项目可以轻松检索它们。

问题是我不想在子目录下找到它们。**我只想指出一些可用于编译依赖项的文件路径。**（突出显示，因为这实际上是问题）。

我想要它的原因很简单：我只是不想在一个文件夹中混淆两个完全不同的范例——maven 模块和 git 子模块。此外，我不想在项目中有任何类型的 git 依赖项。

解决方案编号 0，即创建 simlink 并将它们放入`.gitignore`不计算在内；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:58:08.020

最好的解决方案是在单个 git 存储库中创建目录结构，并且不要在 Git 中使用子模块。这将导致这样的结构：

```
root (pom.xml)
  +-- module1 (pom.xml)
         +-- src/main/java
         +-- src/test/java
  +-- module2 (pom.xml)
         +-- src/main/java
         +-- src/test/java
  +-- module3 (pom.xml)
         +-- src/main/java
         +-- src/test/java 
```

上述结构将置于 Git 版本控制之下，根文件夹也包含子模块。不是 Git 中的子模块等。如果您在这种情况下有依赖项，则必须使用模块依赖项，这是 Maven 中的最佳实践。

# vb.net - 更改 VB.net 任务栏上的图标

> ID：11581320
> 
> 赞同：1
> 
> 时间：2012-07-20T14:24:47.050
> 
> 标签：vb.net, visual-studio-2010

我在 vb.net 中有一个可以发布的程序。

这是一个小细节，但我想更改桌面上已发布应用程序快捷方式上的图标，但更重要的是在我的任务栏上（如 chrome 圆圈出现的位置）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:27:49.450

要更改应用程序的主图标，请转到项目属性页面下的“应用程序”选项卡，然后更改“图标：”组合框。

# c++ - 构造函数转换

> ID：11581321
> 
> 赞同：5
> 
> 时间：2012-07-20T14:24:55.993
> 
> 标签：c++, constructor, c++11, copy-constructor, implicit-conversion

X类->通过两种方式转换为Y：1）构造函数，2）通过转换函数。
我了解单参数构造函数用于转换。

在规范中：

> 隐式声明的复制构造函数不是显式构造函数；可能会调用它进行隐式类型转换。

问题：

因此，这意味着不仅使用单参数构造函数进行转换，还使用复制构造函数？如果是这样，它使用哪种场景？任何示例代码片段？

如果这个问题非常有根据，请多多包涵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:33:40.650

复制构造函数不是显式构造函数，因此将尽可能使用它。复制构造函数只会从同一类型“转换”，因此它不是完全意义上的转换。但是，为了概括起见，将其称为一个很方便。

如果您想了解有关转换构造函数的更多详细信息，请阅读本文：[http ://www.keithschwarz.com/cs106l/winter20072008/handouts/180_Conversion_Constructors.pdf。](http://www.keithschwarz.com/cs106l/winter20072008/handouts/180_Conversion_Constructors.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:40:42.770

这基本上意味着您可以执行以下操作：

```
struct A {};
A a;
A b = a; 
```

如果复制构造函数被标记为显式，则编译失败。您可以通过将：添加`explicit A( A const & ) {}`到结构并重新编译程序来测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:34:41.467

隐式复制构造函数是编译器为您编写的。它总是有形式

```
T(const T&); 
```

这意味着`const T&`可以隐式复制具有转换运算符的任何对象，即使这不是您想要的。最常见的触发方式是从派生类复制到基类；这称为对象切片，因为副本与原始副本的类型不同，并且可能会丢失一些重要的属性或行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:28:52.287

隐式声明的复制构造函数不能用于转换，因为它是`copy-ctor`, 已声明为`T(const T&)`or `T(T&)`。

n3337 标准 12.8 C++ 标准草案。

> 8 类 X 的隐式声明的复制构造函数的形式为 X::X(const X&) 如果 — X 的每个直接或虚拟基类 B 都有一个复制构造函数，其第一个参数的类型为 const B& 或 const volatile B& , 并且 — 对于 X 的所有属于类类型 M（或其数组）的非静态数据成员，每个此类类型都有一个复制构造函数，其第一个参数的类型为 const M& 或 const volatile M&.119 否则，隐式声明的复制构造函数的形式为 X::X(X&)

由于复制 c-tor 不明确，您可以使用此类代码

```
struct So
{
};

int main()
{
    So s = So();
} 
```

如果`copy-ctor`是明确的，您只能使用初始化，例如`So s((So()));`

# php - 使用 PHP X-Path 提取网页的特定部分

> ID：11581324
> 
> 赞同：0
> 
> 时间：2012-07-20T14:25:02.337
> 
> 标签：php, xpath, domdocument

我正在从 webapge 获取特定值；h1 标签中的产品名称：

```
<div id="extendinfo_container">
  <a href="/someproduct.html"><h1><strong>Product Name</strong></h1></a>
  <div style="font-size:0;height:4px;"></div>
  <p class="text_breadcrumbs">
  <a href="/Our-Brands.html" target="_self"><img src="arrow_091.gif" align="absmiddle"/></a>
  <a href="/someproduct.html" target="_self" class="link_breadcrumbs">Product Name</a><img src="arrow_091.gif" align="absmiddle"/>
  <strong>Product Name</strong>
  <div class="dotted_line_blue">
    <img src="theme_shim.gif" height="1" width="100%" alt=" " />
  </div>
</div> 
```

这是一个结构很差的网站，有多个 h1，所以我不能简单地做 getElementById('h1')。

我想尽可能具体地了解我得到的元素，这是我拥有的代码：

```
$doc = new DOMDocument();
@$doc->loadHTML(file_get_contents('http://url/to/website'));

// locate <div id="extendinfo_container"><a><h1><strong>(.*)</strong></h1></a> as product name
$x = new DOMXPath($doc);
$pName = $x->query('//div[@id="extendinfo_container"]/a/h1/strong');
var_dump($pName->nodeValue); 
```

这是回报`null`。我需要使用什么查询来获取我想要的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:28:04.040

[`query()`](http://php.net/domxpath.query)返回 a [`DOMNodeList`](http://php.net/manual/en/class.domnodelist.php)，它没有`nodeValue`属性。您必须选择一个元素（即第一个元素）：

```
$pName = $x->query('//div[@id="extendinfo_container"]/a/h1/strong')->item(0); 
```

或者迭代它：

```
foreach( $pName as $el) {
    var_dump( $el->nodeValue);
} 
```

其中任何一个都可以让您访问 a [`DOMNode`](http://us3.php.net/manual/en/class.domnode.php)，这就是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:27:58.580

PHP 的 DOM对加载到其中的 html**非常**挑剔。它会呕吐并拒绝加载即使是格式不正确的文档。

关闭错误抑制（`@$doc->loadHTML`，删除`@`）并确保它没有在您尝试分析的页面上出现。否则，您的 XPath 查询看起来很好，并且如果文档确实被正确加载/解析，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:30:11.013

查询工作正常。我访问的值错误。这是访问该值的正确方法：

`var_dump($pName->item(0)->nodeValue);`

# .htaccess - 为什么我的 htaccess 重定向不起作用？

> ID：11581325
> 
> 赞同：0
> 
> 时间：2012-07-20T14:25:04.260
> 
> 标签：.htaccess, redirect, http-status-code-301

我并试图让我们的网站重定向到资产库。所以 hexarmor.com/library 应该重定向到`http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi`而不是你被送到`http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi/?/library/`

添加会`/library/`引发 500 服务器错误。为什么这个变量与我的重定向一起传递，我该如何删除它？我在下面包含了我的整个 htaccess。感谢您的任何帮助，您可以提供。

```
RewriteEngine On
Redirect 301 /library http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi
Redirect 301 /library/ http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi

RewriteCond $1 !.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ /index.php?/$1 [L]

FileETag MTime Size
ExpiresActive On
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 7 days"
</FilesMatch>

# gzip on Apache 2
AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xml text/javascript text/css application/x-javascript application/xhtml+xml application/javascript

# these browsers do not support deflate
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4.0[678] no-gzip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:33:11.040

在表弟的帮助下解决了这个问题。想我会努力帮助未来的访问者遇到类似问题。

以供参考

```
Redirect 301 /library http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi
Redirect 301 /library/ http://209.62.107.135/cgi-bin/ImageFolio43/imageFolio.cgi 
```

改为

```
RewriteRule ^library$ "http\:\/\/209\.62\.107\.135\/cgi\-bin\/ImageFolio43\/imageFolio\.cgi" [R=301,L]
RewriteRule ^library/$ "http\:\/\/209\.62\.107\.135\/cgi\-bin\/ImageFolio43\/imageFolio\.cgi" [R=301,L] 
```

将重定向更改为重写规则，而不是在末尾设置 301 重定向标志。

```
[R=301,L] 
```

目标 url 用引号括起来并用正斜杠转义。希望这可以帮助。

# c# - 未检测到 CheckBoxList 选择

> ID：11581329
> 
> 赞同：1
> 
> 时间：2012-07-20T14:25:27.723
> 
> 标签：c#, asp.net, sql, checkboxlist

（C# ASP 站点）现在我有一个预先检查的 CheckBoxList，这取决于用户在表单早期选择的内容。这是编写预检查以供参考的代码。它完美地工作。每当由于用户选择=>回发而发生新的预检查时

```
 DataTable DefaultActivity = GetData();
        // Resets checkboxes to blank in between postbacks
        for (int p = 0; p < CheckBoxList1.Items.Count; p++)
        {
            CheckBoxList1.Items[p].Selected = false;
        }
        // Fills in the prechecked boxes
        if (DefaultActivity.Rows.Count > 0)
        {
            int SelectedRoleID = Int32.Parse(RadioButtonList2.SelectedValue);
            for (int i = 0; i < DefaultActivity.Rows.Count; i++)
            {
                int DatabaseRoleID = Convert.ToInt32(DefaultActivity.Rows[i]["roleid"]);
                if (SelectedRoleID == DatabaseRoleID)
                {
                    int DatabaseActivityID = Convert.ToInt32(DefaultActivity.Rows[i]["activityid"]);
                    for (int j = 0; j < CheckBoxList1.Items.Count; j++)
                    {
                        if (DatabaseActivityID == Convert.ToInt32(CheckBoxList1.Items[j].Value))
                        {
                            CheckBoxList1.Items[j].Selected = true;
                        }
                    }
                }
            }
        } 
```

我遇到的问题是用户应该能够选中除了预先选中的框之外的更多框，但是当他们单击提交按钮时，它不会检测到新选中的框。这是提交按钮代码。

```
 // Data into the request table
        SqlConnection sqlConn = new SqlConnection("Server=x;Database=x;User=x;Password=x;Trusted_Connection=False;");
        string Statement = "INSERT INTO table (x) OUTPUT INSERTED.requestid VALUES (x)";
        SqlCommand sqlComm = new SqlCommand(Statement, sqlConn);

        // Grabs the auto-created RequestID to forward to the next page
        sqlComm.Connection.Open();
        string RequestID = Convert.ToString((Int32)sqlComm.ExecuteScalar());
        sqlComm.Connection.Close();
        sqlComm.Connection.Dispose();

        // Data into the x table
        SqlConnection ActivitysqlConn = new SqlConnection("Server=x;Database=x;User=x;Password=x;Trusted_Connection=False;");
        string ActivityStatement = "INSERT INTO table (x) VALUES (x)";
        for (int k = 0; k < CheckBoxList1.Items.Count; k++)
        {
            if (CheckBoxList1.Items[k].Selected == true)
            {
                SqlCommand ActivitysqlComm = new SqlCommand(ActivityStatement, ActivitysqlConn);
                ActivitysqlComm.Connection.Open();
                ActivitysqlComm.ExecuteNonQuery();
                ActivitysqlComm.Connection.Close();
            }
        }
        Response.Redirect("nextscreen.aspx?RequestID=" + RequestID); 
```

为什么提交按钮看不到新支票的任何想法？它读取预检查很好。附带问题 - 是否有更有效的方法来打开/关闭连接？很好，我是新人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:42:43.363

简单修复 - 我将预检查代码从 PageLoad 移动到 RadioButtonList，即影响预检查的对象。现在所有预检查和附加检查都已正确保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:37:40.823

要回答您的 SQL 问题，这是“干净”的方式：

```
using (SqlConnection connection = new SqlConnection(connectionString))  
{  
    SqlCommand command = connection.CreateCommand();  

    command.CommandText = "mysp_GetValue";  
    command.CommandType = CommandType.StoredProcedure;  

    connection.Open();  
    object ret = command.ExecuteScalar();  
} 
```

您应该将连接字符串存储在某处的配置中，并在可行的情况下使用存储过程来帮助缓解 SQL 注入漏洞。

在您回答评论后，我们可以解决您失败的检查状态更改。

# r - 在 R 中转换 3D 数组中的表格

> ID：11581333
> 
> 赞同：5
> 
> 时间：2012-07-20T14:25:43.980
> 
> 标签：r, matrix, multidimensional-array

我有一个矩阵：

```
R> pippo.m
     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8
[3,]    9   10   11   12
[4,]   13   14   15   16
[5,]   17   18   19   20
[6,]   21   22   23   24 
```

我想用dim =（2,4,3）将这个矩阵转换为3D数组。通过 pippo.m 的 transponse，我可以获得类似的结果，但列和行旋转。

```
> pippo.t <- t(pippo.m)

> pippo.vec <- as.vector(pippo.t)

> pippo.arr <- array(pippo.vec,dim=c(4,2,3),dimnames=NULL)

> pippo.arr
 , , 1
     [,1] [,2]
 [1,]    1    5
 [2,]    2    6
 [3,]    3    7
 [4,]    4    8

 , , 2
     [,1] [,2]
[1,]    9   13
[2,]   10   14
[3,]   11   15
[4,]   12   16

, , 3
     [,1] [,2]
[1,]   17   21
[2,]   18   22
[3,]   19   23
[4,]   20   24 
```

实际上，我更愿意保持原始数据的相同分布，因为行和列代表经度和纬度，第三维是时间。所以我想获得这样的东西：

```
pippo.a 
, , 1
     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8

, , 2
     [,1] [,2] [,3] [,4]
[1,]    9   10   11   12
[2,]   13   14   15   16

, , 3
     [,1] [,2] [,3] [,4]
[1,]   17   18   19   20
[2,]   21   22   23   24 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T14:37:46.623

[看看aperm](http://stat.ethz.ch/R-manual/R-devel/library/base/html/aperm.html)的魔力！

```
m <- matrix(1:24,6,4,byrow = TRUE)
> aperm(array(t(m),c(4,2,3)),c(2,1,3))
, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    5    6    7    8

, , 2

     [,1] [,2] [,3] [,4]
[1,]    9   10   11   12
[2,]   13   14   15   16

, , 3

     [,1] [,2] [,3] [,4]
[1,]   17   18   19   20
[2,]   21   22   23   24 
```

# javascript - 为什么 WebView.loadUrl("javascript: someFunction()") 不适用于本地 html 文件？

> ID：11581335
> 
> 赞同：1
> 
> 时间：2012-07-20T14:25:55.430
> 
> 标签：javascript, android, html, android-webview

我正在使用 android 的`WebView.loadUrl()`方法从 SD 卡加载 HTML 文件。此 html 文件包含 JavaScript 函数，例如`someFunction()`.

由于某种原因，我仍然不明白，呼吁`mWebView.loadUrl("javascript:someFunction()");`不要“触发”HTML文件中的函数。（我在 html 完成加载后调用它......）

当我从**远程服务器加载到 Web 查看****相同的 HTML 文件**，并从 webView 启动相同的 javascript 调用时 - 它确实有效！所以我知道问题在于我从本地文件加载它，而不是我的 html 文件中的错误。

 **我知道需要启用 javascript：

```
 WebSettings webSettings = mWebView.getSettings();
    webSettings.setJavaScriptEnabled(true); 
```

它没有帮助！

我还注意到`WebViewClient.onLoadResource()`回调也存在同样的问题。当文件是本地文件而不是来自远程服务器（或者准确地说是从 HTTP Web 服务器的 uri 访问）时，似乎我对 javascript 有一般问题。

有什么建议为什么会发生，以及我需要做些什么才能让它发挥作用？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:41:08.813

看来这是我的错误。即使 html 文件位于 SD 上，java 脚本功能也能正常工作。这是我使用的特定功能根本没有像其他原因那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:53:36.263

mWebView.loadUrl("javascript:someFunction();"); 怎么样？? 和 ”;”**

# vba - 使用 vba excel 将列与其他列进行比较

> ID：11581336
> 
> 赞同：0
> 
> 时间：2012-07-20T14:25:56.413
> 
> 标签：vba, excel

我有以下问题要解决。

我有一个 3 列和 29000 行的 excel 表。

a 列是索引号。

b列是一个id号。

c 列是一个数字，它指向 a 列的索引

因此，如果 c 列是 200。我需要转到 a 200 列并将它的列 b id 放在与 c 列索引相同的行上。

这样做的目的是链接这列 c 链接的两个项目的 ID 号。

（我希望我说得通：/）

所以我一直在尝试在 VBA 中编写代码。目前我正在使用嵌套的 for 循环，但正如您可以想象的那样，运行时间很长......

```
dim i as integer
dim v as integer
dim temp as integer
i = 1
v=1

for i = 1 to 29000
   if cells(i,3).value > 0 then
    temp = cells(i,3).Value
     cells(i,5).value = cells(1,2).value
     for v = 1 to 29000
       if cells(v,1).value = temp and cells(i,5).value <> cells(v,2).value then
            cells(i,6).value  = cells(v,2).value
       end if
      next
    end if
 next 
```

所以它确实可以工作并执行我想要的，但是运行时间太长了。任何想法如何简化程序？

我对 vba 和编程很陌生。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:14:42.607

未经测试，但编译正常

```
Sub Test()

Dim dict As Object
Dim i As Long
Dim temp As Long
Dim sht As Worksheet
Dim oldcalc

    Set sht = ActiveSheet
    Set dict = GetMap(sht.Range("A1:B29000"))

    With Application
        .ScreenUpdating = False
        oldcalc = .Calculation
        .Calculation = xlCalculationManual
    End With

    For i = 1 To 29000
       If Cells(i, 3).Value > 0 Then
            temp = Cells(i, 3).Value
            Cells(i, 5).Value = Cells(1, 2).Value
            If dict.exists(temp) Then
               If sht.Cells(i, 5).Value <> dict(temp) Then
                   sht.Cells(i, 6).Value = dict(temp)
               End If
            End If
        End If
     Next

     With Application
        .ScreenUpdating = True
        .Calculation = oldcalc 'restore previous setting
     End With

End Sub

Function GetMap(rng As Range) As Object
    Dim rv As Object, arr, r As Long, numRows As Long
    Set rv = CreateObject("scripting.dictionary") 'EDITED to add Set
    arr = rng.Value
    numRows = UBound(arr, 1)
    For r = 1 To numRows
        If Not rv.exists(arr(r, 1)) Then
            rv.Add arr(r, 1), arr(r, 2)
        End If
    Next r
    Set GetMap = rv
End Function 
```

# java - float 和 double 的不同值

> ID：11581337
> 
> 赞同：14
> 
> 时间：2012-07-20T14:25:58.687
> 
> 标签：java

我不明白为什么浮点值与双精度值不同。从下面的示例中可以看出，对于相同的操作，float 提供的结果与 double 不同：

```
public class Test {

    public static void main(String[] args) {
        double a = 99999.8d;
        double b = 99999.65d;
        System.out.println(a + b);

        float a2 = 99999.8f;
        float b2 = 99999.65f;
        System.out.println(a2 + b2);
    }
} 
```

输出：

```
199999.45
199999.44 
```

你能解释一下 float 和 double 之间的区别是什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-20T14:28:33.353

浮点数是 32 位 IEEE 754 浮点数。

双精度是 64 位 IEEE 754 浮点数。

所以这只是一个精度问题，因为小数部分 .8 和 .65 都没有终止二进制表示，因此存在一些舍入误差。双精度更高，因此舍入误差略小。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-20T14:36:04.407

> 你能解释一下 float 和 double 之间的区别是什么吗？

当然。想象一下，您有两种*十进制*类型，一种有 5 个有效数字，另一种有 10 个。

您将使用什么值来表示每种类型的 pi？在这两种情况下，您都会尝试尽可能接近无法*准确*表示的数字- 但您最终不会得到相同的值，对吗？

`float`和-相同，`double`都是二进制浮点类型，但`double`比`float`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-02T09:42:31.553

```
public class Main {

    public static void main(String[] args) {
        float  a=12.6664287277627762f;
        double b=12.6664287277627762;

        System.out.println(a);
        System.out.println(b);
    }
} 
```

输出：

```
12.666429
12.666428727762776 
```

float 可以处理大约 7 个小数位。double 可以处理大约 16 位小数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T14:27:17.847

双精度数是浮点数的两倍。因此它们具有较小的舍入误差。

浮点数（通常）具有 32 位和双 64 位（通常也是如此）。因此，浮点数在比双精度数更多的数字上具有舍入误差。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T14:30:02.023

浮点数的精度低于双精度数。

它大约是原来的一半——23 位对双倍的 52 位（非常感谢 Skeet 先生！）！

[浮点数为 32 位，双精度数为 64 位。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)...请记住，“float”这个词的字母比“double”少，这是一个“记忆”技巧:)

# c - 我怎么知道我的程序在哪个步骤（预处理器、编译、链接）编译失败？

> ID：11581344
> 
> 赞同：1
> 
> 时间：2012-07-20T14:26:11.227
> 
> 标签：c, header, linker, c-preprocessor

我如何知道我的程序在哪个步骤（预处理器、编译、链接）编译失败？

例如，我写了一个包含 3 个源文件的程序： 三个源文件`a.c ,b.c, c.c`都包含头文件，`h.h`，其中包含所有源文件的所有原型，但我也实现了一个功能，在头文件中。我知道这样做是错误的，但是我想知道程序在哪个阶段崩溃了，是链接还是编译，我收到一条错误消息，这是说问题出在链接阶段吗？（否则我只会在编译器的错误上得到一个红色下划线？）

我在哪里可以阅读有关链接的信息以及关于头文件和源文件以及链接错误我不应该做什么？

（我在 Linux 中工作，使用 Eclipse）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:41:23.653

您可以通过分离编译和链接来找到错误的位置。由于预编译器的错误是不寻常的，并且在编译过程中也会发现。这是在命令行上进行编译的方式：

编译步骤：

```
gcc -c -o a.o -pedantic -Wall a.c 
gcc -c -o b.o -pedantic -Wall b.c 
gcc -c -o c.o -pedantic -Wall c.c 
```

链接步骤：

```
gcc a.o b.o c.o -o prog 
```

当然，您需要指定任何其他必要的标志（例如 -l 用于链接到库等）

然后仔细阅读错误和警告（！），你会发现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:30:07.017

只有在您对程序进行了预处理、编译和链接以生成可以运行的可执行文件后，您的程序才会崩溃*。*崩溃是*运行时*错误。

*重新预处理器/编译/链接*：

您没有指定您正在使用的平台/环境，但在 Linux/Unix 环境中，很容易确定您是否遇到了链接器问题，因为您通常会收到带有`ld`.

编译错误通常与语法相关并且易于识别（例如，不匹配的括号、缺少分号等）（此外，作为一般规则，我建议您*始终*以最高警告级别进行编译，然后*有意识地*确定哪个警告要忽略的消息。）

我不在一个系统上我可以尝试一下，所以我不确定预处理器是否会抛出特定的易于识别的错误/警告消息，或者它们是否只是传递给编译器并被吐出阶段。

这些步骤都不会使您的程序崩溃，只有在所有这些步骤都成功完成后才会发生（如果确实如此）。

# voice-recognition - .Net Gadgeteer 的语音和面部识别库

> ID：11581346
> 
> 赞同：2
> 
> 时间：2012-07-20T14:26:18.327
> 
> 标签：voice-recognition, robotics, face-recognition, .net-micro-framework, .net-gadgeteer

最近，我一直在研究机器人技术，并且对尝试制作自己的机器人产生了兴趣。这将是一个简单的，但我希望它至少能够进行面部和语音识别。

我已经找到了一个名为 EZ-Robots 的集合，它已经带有面部/语音识别库，但认为 .NET gadgeteer 会更好（更简单，可扩展......）。到目前为止，我还没有尝试任何编程，我仍然需要决定买哪一套（走哪条路）。

我是一位经验丰富的程序员，但绝对是硬件方面的初学者。

我的愿景是我主要专注于软件，只构建基本的、简单的硬件。我想与机器人互动，所以他必须认出我（或至少将人类与其他物体区分开来）。我想和它说话，给它命令等等。我住在捷克共和国，我的语言没有太多可用于语音识别的软件。如果我可以记录一个命令并且他会识别它，那就足够了。

这更像是一种爱好:)。

对于任何建议，我将不胜感激。

# javascript - JavaScript - putImageData 不会绘制每个图块

> ID：11581348
> 
> 赞同：2
> 
> 时间：2012-07-20T14:26:21.653
> 
> 标签：javascript, html, canvas

似乎某些瓷砖不会被绘制。我将瓦片集拆分为 32x32 方格，并使用 2D 100x100 数组将地图绘制到画布上。

然后它为播放器设置“视口”。由于这是一张大地图，玩家总是以边缘为中心，除非他们跑到边缘附近。

然而，这导致了绘制地图的问题。红块是“玩家”

![在此处输入图像描述](../Images/17dccb42dcc1081a1991c7aa1846b20b.png)

我发现，更高的视口 (15x10) 将能够绘制一些以前未绘制的图块。

这是代码。您可以在 jsFiddle [http://mystikrpg.com/images/all_tiles.png上下载瓷砖集以在 localhost 或以下位置进行测试](http://mystikrpg.com/images/all_tiles.png)

下面的所有内容都得到了很好的评论。

即使更改视口，我也确实看到绘制 **了一些图块，而不是全部。**[http://pastebin.com/cBTum1aQ](http://pastebin.com/cBTum1aQ)

这里是**jsFiddle**：http: [//jsfiddle.net/weHXU/](http://jsfiddle.net/weHXU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:55:23.270

**[工作演示](http://jsfiddle.net/loktar/weHXU/2/)**

基本上我采用了不同的方法来绘制瓷砖。使用`putImageData`and`getImageData`可能会导致性能问题，而且在开始时预先分配所有图像数据也会导致内存损失。您已经拥有图像形式的数据，您不妨直接引用它，它实际上应该更快。

这是我使用的方法

```
 for (y = 0; y <= vHeight; y++) {
     for (x = 0; x <= vWidth; x++) {
         theX = x * 32;
         theY = y * 32;

         var tile = (board[y+vY][x+vX]-1),
             tileY = Math.floor(tile/tilesX),
             tileX = Math.floor(tile%tilesX);

          context.drawImage(imageObj, tileX*tileWidth, tileY*tileHeight, tileWidth, tileHeight, theX, theY, tileWidth, tileHeight);
    }
} 
```

它*几乎*相同，但我没有查看预先保存的数据数组，而是引用已加载图像的区域。

**获取引用瓦片的说明**

假设我有一个 4x4 的网格，我需要获得 7 号瓷砖，以获得`y`我会做 7/4，然后获得`x`我会使用 7/4 的剩余部分（7 mod 4）。

至于原来的问题..我真的不知道是什么导致了丢失的瓷砖，我只是把它改成了我的方法，所以我可以从那里测试，但它对我来说马上就起作用了。

# python - 如何使用 Python 库验证 XML 文件时出现多个错误？

> ID：11581351
> 
> 赞同：3
> 
> 时间：2012-07-20T14:26:23.880
> 
> 标签：python, xml, validation, error-handling, lxml

我有一些要验证的 XML 文件，我必须使用 Python 来验证。我尝试使用带有 lxml 的 XSD 验证它。但是我只得到一个首先发生的错误，但我需要 XML 文件中的所有错误和不匹配。有什么方法可以让我使用 lxml 获取所有错误的列表吗？或者还有其他 Python 解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:18:58.373

解决这个问题的方法是：

> ```
> try:
>     xmlschema.assertValid(xml_to_validate)
> except etree.DocumentInvalid, xml_errors:
>     pass
> print "List of errors:\r\n", xml_errors.error_log 
> ```

可能有更好的方法来解决这个问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-26T17:03:21.130

使用`lxml`，您可以迭代`error_log`并打印每个错误的行号和错误消息：

```
def validate_with_lxml(xsd_tree, xml_tree):
    schema = lxml.etree.XMLSchema(xsd_tree)
    try:
        schema.assertValid(xml_tree)
    except lxml.etree.DocumentInvalid:
        print("Validation error(s):")
        for error in schema.error_log:
            print("  Line {}: {}".format(error.line, error.message)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-18T18:36:35.263

使用[XMLSchema](https://xmlschema.readthedocs.io)库，您可以使用以下`iter_errors`方法：[https ://xmlschema.readthedocs.io/en/latest/api.html?highlight=iter_errors#xmlschema.XMLSchemaBase.iter_errors](https://xmlschema.readthedocs.io/en/latest/api.html?highlight=iter_errors#xmlschema.XMLSchemaBase.iter_errors)

这是我的代码（Python 3）：

```
def get_validation_errors(xml_file, xsd_uri='example.xsd'):
    xml_string = xml_file.read().decode('utf-8')
    dir_path = os.path.dirname(os.path.realpath(__file__))
    xsd_path = os.path.join(dir_path, xsd_uri)
    schema = xmlschema.XMLSchema(xsd_path)
    validation_error_iterator = schema.iter_errors(xml_string)
    for idx, validation_error in enumerate(validation_error_iterator, start=1):
        print(f'[{idx}] path: {validation_error.path} | reason: {validation_error.reason}') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:28:17.857

您可以 [阅读有关错误异常的 Python 文档](http://docs.python.org/tutorial/errors.html)以了解如何执行`try/except`设计模式，并且在该`except`部分中您可以存储不匹配项（例如列表或对列表），然后从*后面*`try/except`的点再次递归第一个错误。让我知道这是否不够描述。

 *干杯!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-29T11:18:23.423

由于几个错误，提供的解决方案不再起作用。在 xmlschema 上应用 assertValid 之前，您必须按如下方式指定它：

```
try:
   xmlschema_doc = lxml.etree.parse(filename)
   xmlschema = lxml.etree.XMLSchema(xmlschema_doc)
   xmlschema.assertValid(elem_tree)
except lxml.etree.ParseError as e:
   raise lxml.etree.ParserError(str(e))
except lxml.etree.DocumentInvalid as e:
   if ignore_errors:
    raise lxml.etree.ValidationError("The Config tree is invalid with error 
       message:\n\n" + str(e)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-23T07:25:07.697

```
def get_validation_errors(xml_file, xsd_file):
    schema = xmlschema.XMLSchema(xsd_file)
    validation_error_iterator = schema.iter_errors(xml_file)
    errors = list()
    for idx, validation_error in enumerate(validation_error_iterator, start=1):
        errors.append(validation_error.__str__())
        print(
            f'[{idx}] path: {validation_error.path} | reason: {validation_error.reason} | message: {validation_error.message}')
    return errors 
```*

# javascript - 检查两个数组是否具有相同值的元素

> ID：11581360
> 
> 赞同：11
> 
> 时间：2012-07-20T14:26:43.913
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [javascript中数组交集的最简单代码](https://stackoverflow.com/questions/1885557/simplest-code-for-array-intersection-in-javascript)

假设我有数组：

```
[0,1] 
```

和

```
[1,2,3] 
```

我需要验证这些数组是否有共同的元素，对于这种情况，它会是`1`

使用 jQuery 我按以下方式检查它：
**1.**获取第一个数组的长度
**2.**获取第二个数组的长度
**3.**合并数组
**4.**获取合并数组的长度
**5.**如果合并数组的长度不等于长度 2 个初始数组，它们有共同要素

一行代码是：

```
(event2Zone[0].length+event2Zone[1].length)==$.unique($.merge(event2Zone[0].zo,event2Zone[1].zo)).length 
```

是否有更标准或更优雅的方式来执行相同的操作？

# java - 带宽对 DatagramChannel 数据包的影响

> ID：11581363
> 
> 赞同：0
> 
> 时间：2012-07-20T14:27:05.083
> 
> 标签：java, udp, bandwidth, datagram

我的带宽有限 512 Kbps 下载 368 Kbps 上传

我在循环中以**10 毫秒**的常规间隔发送**40 字节的 UDP 数据包**

 **使用**Thread.sleep(10)**语句。

虽然接收数据包（UDP）的大小可以是 0-1500 字节，并且可以在任何时间以我收到的任何数量出现

**频道.receive();** 在 **while(true){}** 循环中。Channel 处于阻塞模式。

我想我缺少带有此代码的数据包。

如何防止由于下载速度低而导致丢包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:39:59.253

> 如何防止由于下载速度低而导致丢包。

你无法阻止它。即使您有很多带宽，一定程度的数据包丢失也是不可避免的。

如果您打算使用 UDP 作为您的传输，您将不得不设计您的应用程序协议以在面对丢包时具有弹性……并且避免过多的流量淹没您的网络链接。这些都是不小的问题。

一个更简单的替代方案是使用 TCP，并让它*处理*面对丢包和流量控制问题时的重试。**

# iphone - 如何在 UITableView 中重新加载单个部分

> ID：11581370
> 
> 赞同：2
> 
> 时间：2012-07-20T14:27:28.723
> 
> 标签：iphone, uitableview, nsindexpath

嘿，我在尝试解决这个问题时遇到了麻烦。UITableView 有一个方法 [tableView reloadSections:(NSIndexSet *) withRowAnimation:(UITableViewRowAnimation)] 现在根据 Apple 文档，此方法接受一个 NSIndexSet 对象并重新加载索引集指定的任何部分。问题是即使我只将一个部分发送到此方法，它最终会重新加载所有部分，我不明白为什么会发生这种情况。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:29:59.417

即使您尝试仅重新加载一个部分，您也必须逐节提供填充过程：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"DetailViewCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}

   if (indexPath.section == 0){
      //blablabla
      cell.textLabel = blabla
   }
   else if (indexPath.section == 1){
      ///blablabla
      cell.textLabel = blabla2
   }
return cell;
} 
```

...因为重新加载表格（只是一个部分还是整个表格）将调用上面的方法

# javascript - JQuery如何替换文本区域内的字符串？

> ID：11581372
> 
> 赞同：1
> 
> 时间：2012-07-20T14:27:39.983
> 
> 标签：javascript, jquery, html, regex, replace

当前文本区域：

```
<textarea id="event_content">
This text area could be full of information..www.london2012.com
And might contain upto 5 links that all need updating.
www.rio2016.org

Link already converted. this should be left.
<a href="http://www.thetimes.co.uk" target="_blank">www.thetimes.co.uk</a>
</textarea> 
```

* * *

jquery后所需的Textarea：所有链接都用标签和目标属性清理/替换

```
<textarea id="event_content">
This text area could be full of information
<a href="http://www.london2012.com" target="_blank">www.london2012.com</a>
And might contain upto 5 links that all need updating.
<a href="http://www.rio2016.org" target="_blank">www.rio2016.org</a>

Link already converted. this should be left.
<a href="http://www.thetimes.co.uk" target="_blank">www.thetimes.co.uk</a>
</textarea> 
```

* * *

2012 年 7 月 21 日 - [Ωmega 的](https://stackoverflow.com/users/1215106/mega)代码非常感谢，但可以通过保留已转换的链接来改进吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T19:18:57.257

我相信你正在寻找这样的东西（点击[这里](http://jsfiddle.net/jrx5Z/1/)测试这个小提琴）：

```
$('#event_content').val(
  $('#event_content').val().replace(/\b(http(s|):\/\/|)(www\.\S+)/ig,
    "<a href='http\$2://\$3' target='_blank'>\$3</a>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:30:30.103

```
var link = $("#event_content");
var text = link.html();
var linktext = '<a href="' + text + '" target="_blank">' + text + '</a>'
link.html(linktext); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:31:43.130

```
$(function(){
    var old = $('#event_content').val();

    var news = '<a href="http://'+old+'" target="_blank">'+old+'</a>';

    $('#event_content').val(news);
}); 
```

请注意，`<a>`不会在 textarea 中显示，而是会显示纯文本。

演示：http: [//jsfiddle.net/3xEh2/1/](http://jsfiddle.net/3xEh2/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:51:31.630

[小提琴](http://jsfiddle.net/3xEh2/7/)

这将替换所有链接并将其他文本也保留在那里。

```
$(function(){
var old = $('#event_content').val();
var news = old.replace("www.london2012.com", '<a href="http://www.rio2016.com" target="_blank">www.rio2016.com</a>');   
$('#event_content').val(news);
}); 
```

# jquery - 用于截断表格单元格的 jQuery 和 dotdotdot

> ID：11581374
> 
> 赞同：1
> 
> 时间：2012-07-20T14:27:57.317
> 
> 标签：jquery, html-table

我对 Javascript 和 jQuery 知之甚少，我正在尝试使用 jQuery 和[dotdotdot](http://dotdotdot.frebsite.nl/)插件*在第二个换行后*截断表中的 TD 。

我想我永远不会不问就学；

A. 这甚至可能吗？

B. 我将如何使用 dotdotdot 来实现这一点 - 或者 - 有没有更好的方法？

另一个问题中的图像（[Cross-browser multi-line text overflow with ellipsis added within a width and height fixed `<div>`](https://stackoverflow.com/questions/3404508/)）正是我想要发生的，但我不知道如何适应它在表格单元格中使用。在不了解 Javascript 的情况下，jQuery 似乎最适合我的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:28:10.687

在这里，跳过空单元格，不适用于少于定义的最大字符数的单元格。

```
$(function(){
  $.each($('td').not(':empty'), function(i,v){
    var count = parseInt($(v).text().length);
    var maxChars = 210;
    if(count > maxChars){
      var str = $(v).text();
      var trimmed = str.substr(0, maxChars - 2);
      $(v).text(trimmed + '...');          
    }  
  });
}); 
```

*为 CraftyFella 的评论 +1*

[这是工作的jsFiddle](http://jsfiddle.net/Ohgodwhy/Bk5Uq/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:26:53.883

你能检查一下这个jsFiddle吗，它不使用jQuery，因为根据我从你的问题中了解到的，你需要知道如何制作省略号，这可以用css而不是需要jQuery。

[http://jsfiddle.net/xjLA7/1/](http://jsfiddle.net/xjLA7/1/)

如果您需要通过脚本完成它，请告诉我您希望如何实现它，我会多玩一点，但我希望这是您需要使用省略号而不是扩展 td 来使 td 溢出。

这是我的来源：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css"> 
td.test div
{
    white-space: nowrap;
    width: 70px;
    overflow: hidden;
    border: 1px solid #000000;
    text-overflow: ellipsis;
}
</style>
</head>
<body>

<table>
    <tr>
        <td class="test">
            <div>This is some long text that will not fit in the box</div>
        </td>
    </tr>
    </table>
</body>
</html>​ 
```

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T15:54:05.537

`td`dotdotdot 直接在元素上调用时无法正常工作。您必须`div`在元素内部创建一个`td`，将您的内容放入 . 中`div`，指定`td`元素的最大宽度/高度，然后在`div`.

```
<table>
<tr>
    <th>Short Column</th>
    <th>Long Column</th>
</tr>
<tr>
    <td>Some info</td>
    <td height=50px width=50px>
        <div id='long-column'><p>This is a long column that should be truncated by the dotdotdot plugin.</p></div>
    </td>
</tr>
</table>

<script type=text/javascript>
    $(document).ready(function () {
        $('#long-column').dotdotdot({});
    });
</script> 
```

请参阅此小提琴以获取工作示例：

[https://jsfiddle.net/q3wdqtw5/](https://jsfiddle.net/q3wdqtw5/)

# php - 使用 cURL POST 登录站点后，您将如何在站点上执行 cURL 功能？

> ID：11581376
> 
> 赞同：0
> 
> 时间：2012-07-20T14:28:00.013
> 
> 标签：php

我正在尝试使用他们的登录 API - [https://github.com/reddit/reddit/wiki/API%3A-login](https://github.com/reddit/reddit/wiki/API%3A-login)登录 Reddit 。我能够使用成功验证并存储 cookie

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, 'http://www.reddit.com/api/login/USERNAME');
curl_setopt ($ch, CURLOPT_REFERER, "http://www.reddit.com");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt($ch, CURLOPT_POST, 1); 
$postData = 'api_type=json&user=USERNAME&passwd=PASSWORD'; 
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt'); 
curl_exec($ch); 
```

但是当我添加

```
curl_setopt($ch, CURLOPT_URL, 'http://www.reddit.com/r/pics');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($ch);
echo $data; 
```

在身份验证代码的末尾，我收到了来自 Reddit 的“找不到页面”页面，即使我已成功登录并且该页面似乎表明我确实在 /r/pics 子reddit 中。我想知道是否发生了某种重定向，或者是否有任何选项丢失或不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:30:55.377

当您加载第二个 URL 时，您仍然会执行 POST 操作。除非您告诉 CURL，否则 CURL 不会“返回”到 GET。尝试添加

```
curl_setopt($ch, CURLOPT_HTTPGET, TRUE); 
```

# javascript - 如果不在 fb iframe 中，则 js 重定向

> ID：11581379
> 
> 赞同：4
> 
> 时间：2012-07-20T14:28:09.060
> 
> 标签：javascript, facebook, redirect

我想将转到我服务器上我的 Facebook 应用程序选项卡的所有流量直接重定向到我的 Facebook 应用程序。因此，如果用户在 Facebook iframe 内或在我的网页上，我会检查以下代码：

```
<!-- language: lang-js -->
function referrerIsFacebookApp() {
    if(document.referrer) {
        return document.referrer.indexOf("facebook.com") !== -1;
    }
    return false;
}

if (!referrerIsFacebookApp()) {
    top.location.replace("https://www.facebook.com/bommelME/app_264697733636385");
}; 
```

如果我用浏览器打开页面，一切正常。但是，如果我链接到此页面并打开链接，则重定向不起作用。有什么提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:41:36.263

使用 window.top 来检测您的应用是否在 iFrame 中。尝试这个。

```
if (window!=window.top) { 
   /* I'm in a frame! */ 
   window.location = "https://www.facebook.com/bommelME/app_264697733636385";
} 
```

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:38:01.477

我认为您应该检查`window.parent`对象而不是`document.referrer`，因为可以按照您所说的从另一个页面引用该页面，但不能通过 iframe 包含该页面

# audio - IMFMediaPlayer 在 SetSourceFromByteStream 期间挂起

> ID：11581384
> 
> 赞同：0
> 
> 时间：2012-07-20T14:28:31.647
> 
> 标签：audio, windows-runtime, ms-media-foundation

背景：我正在为 Win8 编写一个 Metro 风格的应用程序。我需要能够播放音乐文件。由于质量和空间要求，我们使用编码音频 (mp3/ogg)。

我正在使用 XAudio2 播放音效（.wav 文件），但由于我无法找到使用它播放编码音频的方法，我决定使用 Media Foundation（IMFMediaPlayer 接口）播放音乐文件。

我下载了 metro 应用程序示例，发现 Media Engine Native C++ 视频播放示例最接近我的需要。

现在我的应用程序有 MediaPlayer 播放音乐，我遇到了一个问题。如果运行应用程序的设备足够慢，MediaPlayer 就会挂起。当我在我的设备上运行应用程序的发布版本时，它很好，我可以很好地听到音乐。但是，当我附加调试器或在较慢的设备上运行它时，它会在我为 MediaPlayer 设置字节流播放时挂起。

这是一些代码，您会发现它与示例非常相似：

```
StorageFolder^ installedLocation = Windows::ApplicationModel::Package::Current->InstalledLocation;  
m_pickFileTask = Concurrency::task<StorageFile^>(installedLocation->GetFileAsync(filename)), m_tcs.get_token());    
auto player = this;
m_pickFileTask.then([player](StorageFile^ fileHandle)
{
    player->SetURL(fileHandle->Path);
    Concurrency::task<IRandomAccessStream^> fOpenStreamTask = Concurrency::task<IRandomAccessStream^> (fileHandle->OpenAsync(Windows::Storage::FileAccessMode::Read));
    fOpenStreamTask.then([player](IRandomAccessStream^ streamHandle)
        {                               
            MEDIA::ThrowIfFailed(
                    player->m_spMediaEngine->Pause()
                    );
            MEDIA::GetMediaError(player->m_spMediaEngine);

            player->SetBytestream(streamHandle);                        
            if (player->m_spMediaEngine)
            {
                MEDIA::ThrowIfFailed(
                    player->m_spEngineEx->Play()
                    );
                MEDIA::GetMediaError(player->m_spMediaEngine);
            }
        }
    );      
}
); 
```

这是 SetBytestream 方法：

```
SetBytestream(IRandomAccessStream^ streamHandle)
{
    if(m_spMFByteStream != nullptr)
    {
        m_spMFByteStream->Close();
        m_spMFByteStream = nullptr;
    }

    MEDIA::ThrowIfFailed(
        MFCreateMFByteStreamOnStreamEx((IUnknown*)streamHandle, &m_spMFByteStream)
        );

    MEDIA::ThrowIfFailed(
        m_spEngineEx->SetSourceFromByteStream(m_spMFByteStream.Get(), m_bstrURL)
        );
    MEDIA::GetMediaError(m_spEngineEx); 

    return;
} 
```

它挂起的行是：

```
m_spEngineEx->SetSourceFromByteStream(m_spMFByteStream.Get(), m_bstrURL) 
```

当我调试应用程序时，我可以按暂停并查看堆栈。好吧，不多，但至少我可以看到它无限期地在

```
ntdll.dll!77b7f4dc() 
```

任何想法为什么我的应用程序会以这种方式挂起？

（可选：如果您知道在 c++ Metro 风格应用程序中播放 mp3/ogg 的更好方法，请告诉我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:53:33.593

无法弄清楚为什么会发生这种情况，但我设法编写了一个工作循环：

`IMFSourceReader`可用于解码 MP3 并将字节输入`XAudio2SourceVoice`.

`XAudio2 audio stream effect sample`包含如何做到这一点的好例子。

# ios - 为什么双击 tabbaritem 使选定的图像返回？

> ID：11581389
> 
> 赞同：0
> 
> 时间：2012-07-20T14:28:45.803
> 
> 标签：ios, custom-controls, uitabbar

在这个[链接](http://blog.theanalogguy.be/2011/09/14/custom-colored-uitabbar-icons-an-update/)中，作者提供了一种有用的方法来实现自定义标签栏。但是遇到一个bug，双击tabbaritem，又会出现灰色图像，为什么？

[http://blog.theanalogguy.be/2011/09/14/custom-colored-uitabbar-icons-an-update/](http://blog.theanalogguy.be/2011/09/14/custom-colored-uitabbar-icons-an-update/)

# java - 如何从 Grails 中的 Http 响应中获取布尔值

> ID：11581394
> 
> 赞同：0
> 
> 时间：2012-07-20T14:28:53.637
> 
> 标签：java, grails, https, http-post, httpresponse

我有一个愚蠢的问题，但由于我无法弄清楚，我想我会在这里发布它，看看是否有人可以提供帮助！

我有一些代码`HttpPost`向我们的服务器发出请求。我以 XML 格式完美接收结果。问题是我想获得返回的布尔值，而不仅仅是一个字符串。例如，对 Web 服务的成功调用会返回以下 xml：

```
<boolean xmlns="https://myWebService/">false</boolean> 
```

我可以使用这一行访问和阅读：

`String responseBody = EntityUtils.toString(response.getEntity());`

有没有办法以布尔值的形式访问返回的数据（在这种情况下为 false），还是我必须手动解析返回字符串来获取值？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:31:36.973

> 我是否必须手动解析返回字符串才能获取值？

是的，但是您可以简单地滚动自己的方法来进行解析（等等），然后返回`boolean`.

```
public boolean asBoolean(Entity e){
    return Boolean.parseBoolean(EntityUtils.toString(e));
} 
```

# objective-c - 声明Objective C对象时哪个更有效

> ID：11581396
> 
> 赞同：3
> 
> 时间：2012-07-20T14:29:15.350
> 
> 标签：objective-c, oop, object

在标题中我使用了 Objective C，但这个问题对于其他 OOP 语言也是可行的，我的问题是：**下面哪个声明（示例）更有效？**

1)

```
NSString        *urlString=@"string_literal_for_URL";
NSURL           *url         =   [NSURL urlWithString:urlString];
NSURLRequest    *request     =   [NSURLRequest requestWithURL:url                  cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                              timeoutInterval:40];
NSURLConnection *connection  =   [[NSURLConnection alloc] initWithRequest:requestFromLogin 
                                                                 delegate:self]; 
```

2)

```
NSURLRequest *requestFromLogin = [NSURLRequest requestWithURL:[NSURL URLWithString[NSString stringWithFormat:@"http://%@:%@/ipad/login.php?username=%@&password=%@",server.text,port.text,username.text,password.text]]  
                                                  cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                              timeoutInterval:40];

[[NSURLConnection alloc] initWithRequest:requestFromLogin delegate:self]; 
```

注意：据我记得[CS193p Video Lectures](http://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=10) iOS 擅长惰性实例化（据我了解，第一个示例更好），但我不确定.. 任何人都可以从 OOP 的角度给出答案。 。 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:51:32.927

使用 ARC 编译代码并关闭优化时存在细微差别：第一个示例将增加和减少`url`对象上的引用计数一次。然而，当优化打开时，编译器应该能够找出在调用的初始化程序`url`之外没有使用该变量，并对其进行优化。`NSURLRequest`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:34:45.173

坦率地说，这两个例子在功能上是相同的。这里唯一真正的区别是，在第一个示例中，您可以进一步重用 urlString、url 等对象，因为您可以访问它们的指针。

# struts2 - 使用范围模型驱动的指南

> ID：11581399
> 
> 赞同：3
> 
> 时间：2012-07-20T14:29:28.797
> 
> 标签：struts2

我的问题是我正在检索课程，但在使用编辑选项时无法设置它并将其显示在表单上。

流量是

1.  单击编辑并检索要更新的类
2.  现在在表单上显示检索到的内容，然后更新值。

问题是我能够检索但无法在我的表单中设置值。

我正在使用模型驱动。

我在网上搜索，解决方案是使用范围模型驱动，但我没有得到任何关于如何使用它的示例。

如果有人可以指导我会很有帮助，我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:55:56.600

发送主键和操作 = EditOption -getModel 上的编辑将在再次调用该操作后立即调用，并且在您的操作中您可以定义为

```
if("Edit".equalsIgnoreCase(operation)){
   user = userServiceInterface.get(user);----(get by primary key)
System.out.println or log->("user==> "+user);
} 
```

现在使用表单将其重定向到您的 jsp 希望这会有所帮助

# java - 在 Android 中解析 JSON 包

> ID：11581404
> 
> 赞同：-1
> 
> 时间：2012-07-20T14:29:41.463
> 
> 标签：java, android, json

我在解析 Android 中的 JSON 包时遇到了一些困难。

我目前已经完成了所有设置，因此 JSON 是一个对象数组，然后每个对象都有一个属性数组。例如，假设我的包中有一个名为 Colors 的对象。然后每个 Color 条目将位于 Colors 对象中。每个颜色条目也将包含 R、G、B 值的条目。

这种类型，我可以应付得很好。但是，我现在遇到了一个实例，其中其中一个条目（R、G、B 值所在的位置）中有一个数组。我不知道如何去访问和处理它。

我将使用 JSON 包的示例进行更新，因为我担心我不是很清楚。

编辑：这是 JSON。假设我想访问 ColorOverlays 中的 R 值。

{"Package":[ {"Things":[{"ProgramId":73,"TypeId":68,"CategoryId":null,"CategoryName":null,"ThingId":121,"ThingName":"Mahalo" ,"ThingDescription":"开始您的节日并拍摄一些照片！","ThingPrice":0.00,"SellerProductId":null,"Number2":1342655700,"Number1":1342655700,"IsAvailable":true,"ImageOverlays" :[{"ThingId":121,"ThingOverlayId":295,"ImageOverlayBase64":null,"ImageOverlayFileTypeExtension":null,"Width":1024,"Height":1024,"A":1.00000,"BlendModeId":1 ,"OrderNum":2,"IsUseSource":false}],"ColorOverlays":[{"ThingId":121,"ThingOverlayId":294,"R":157.00000,"G":71.00000,"B":187.00000,"A":0.52873,"BlendModeId":6,"OrderNum":1}],"ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"", "ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":87,"ThingId":121,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342637814,"LastUpdated ":1342637814,"饱和度":0.0,"对比度":0.0,"亮度":0.0,"低":null,"中":null,"高":null,"IsBlackWhite":null,"IsInvert": null,"IsSepia":null}],"IsRemoved":false},{"ProgramId":73,"TypeId":68,"CategoryId":null,"CategoryName":null,"ThingId":122,"ThingName":"Lots of Love","ThingDescription":"使用这个！","ThingPrice":0.00,"SellerProductId":null,"Number2":1342667100 ,"Number1":1342667100,"IsAvailable":true,"ImageOverlays":[{"ThingId":122,"ThingOverlayId":298,"ImageOverlayBase64":null,"ImageOverlayFileTypeExtension":null,"Width":1024,"高度":1024,"A":1.00000,"BlendModeId":4,"OrderNum":3,"IsUseSource":false}],"ColorOverlays":[{"ThingId":122,"ThingOverlayId":296," R":213.00000,"G":86.00000,"B":143.00000,"A":0.77777,"BlendModeId":4,"OrderNum":1},{"ThingId":122,"ThingOverlayId":297,"R":127.00000,"G":127.00000,"B":127.00000,"A":0.50000,"BlendModeId":1,"OrderNum":2}]," ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved ":false,"AddDate":1342649164,"LastUpdated":1342649164,"Saturation":0.0,"Contrast":0.0,"Brightness":0.0,"Low":null,"Mid":null,"High": null,"IsBlackWhite":null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}ThingOverlayId":297,"R":127.00000,"G":127.00000,"B":127.00000,"A":0.50000,"BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null," ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate ":1342649164,"LastUpdated":1342649164,"Saturation":0.0,"Contrast":0.0,"Brightness":0.0,"Low":null,"Mid":null,"High":null,"IsBlackWhite": null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}ThingOverlayId":297,"R":127.00000,"G":127.00000,"B":127.00000,"A":0.50000,"BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null," ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate ":1342649164,"LastUpdated":1342649164,"Saturation":0.0,"Contrast":0.0,"Brightness":0.0,"Low":null,"Mid":null,"High":null,"IsBlackWhite": null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}00000,"G":127.00000,"B":127.00000,"A":0.50000,"BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth" :546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164 ,"饱和度":0.0,"对比度":0.0,"亮度":0.0,"低":null,"中":null,"高":null,"IsBlackWhite":null,"IsInvert":null," IsSepia":null}],"IsRemoved":false}]} ]}00000,"G":127.00000,"B":127.00000,"A":0.50000,"BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth" :546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164 ,"饱和度":0.0,"对比度":0.0,"亮度":0.0,"低":null,"中":null,"高":null,"IsBlackWhite":null,"IsInvert":null," IsSepia":null}],"IsRemoved":false}]} ]}BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88, "ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164,"Saturation":0.0,"Contrast":0.0,"Brightness":0.0,"Low ":null,"Mid":null,"High":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}BlendModeId":1,"OrderNum":2}],"ThingsampleImageBase64":null,"ThingsampleImageFileTypeExtension":"","ThingsampleImageWidth":546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88, "ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164,"Saturation":0.0,"Contrast":0.0,"Brightness":0.0,"Low ":null,"Mid":null,"High":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164, "饱和度":0.0,"对比度":0.0,"亮度":0.0,"低":null,"中":null,"高":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia ":null}],"IsRemoved":false}]} ]}546,"ThingsampleImageHeight":546,"Captures":[{"ThingCaptureId":88,"ThingId":122,"CaptureFrameOverlayId":null,"IsRemoved":false,"AddDate":1342649164,"LastUpdated":1342649164, "饱和度":0.0,"对比度":0.0,"亮度":0.0,"低":null,"中":null,"高":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia ":null}],"IsRemoved":false}]} ]}null,"Mid":null,"High":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}null,"Mid":null,"High":null,"IsBlackWhite":null,"IsInvert":null,"IsSepia":null}],"IsRemoved":false}]} ]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:56:04.490

您的代码示例对尝试提供帮助最有帮助。取决于您的 RGB 值数组的构建和传递方式。如果它是一个简单的逗号分隔字符串，那么你可以这样做：

```
try {

        JSONArray jArray = new JSONArray(jString);

        for (int i=0; i<jArray.length(); i++) {

            JSONObject jo = jArray.getJSONObject(i);
                    String RGBVal = jo.getString("rgb_list");
                    String[] rgbArray = RGBVal.split(",");
                    .... 
```

同样，取决于条目在 JSON 字符串中的传递方式。

没关系...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:05:47.673

如果这不是您在第一次使用后会丢弃的东西，那么您可能会考虑通过在您的域之后建模 Java 对象来提高它的水平。

使用任何在线 JSON 可视化工具以 3D 形式查看您的 JSON。

然后，按照以下教程进行操作。

[http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

# php - PHP 5.3 页面在加载时冻结

> ID：11581414
> 
> 赞同：1
> 
> 时间：2012-07-20T12:27:55.410
> 
> 标签：php, buffer, printing

我的一个网页出现了一个非常奇怪的问题。它是用 PHP 编写的，今天突然，在没有对站点进行任何更改的情况下，它在加载某个页面（并且仅此页面）时开始冻结。冻结意味着一半的页面加载然后它停止并且看起来浏览器正在等待来自服务器的更多信息（在所有流行的浏览器中都是一样的）。

该页面有 2 种类型的用户，它适用于管理员，但对用户冻结。唯一的区别是用户在特定状态下没有用于表格行的单选按钮。现在，当我试图解决这个问题时，我开始操作代码，希望我能找到导致问题的部分，但事实证明我可以删除页面的**任何**部分，问题就会消失。我也可以添加一两行，问题就消失了。更具体：并非每次都有效。我添加了一个附加行，它向表单添加了一个隐藏字段，问题仍然存在，但我添加了另一个名称不同的行，现在它可以工作了。

我正在使用 PHP“打印”函数将每一行代码输出到浏览器。

什么会导致这个问题？这太奇怪了，我只需要知道！:)

我做了一些额外的测试。现在它只添加了一行。这一行是：

```
print "<input type=\"hidden\" name=\"a\" value=\"123456789012345678901234567890\">"; 
```

如果我从“123456789012345678901234567890”号码中删除**一位数字，它就会再次冻结！**如果我添加更多数字，它仍然可以正常工作......

页面加载后没有任何 javascript 代码扫描。

这是该页面的全部代码。它嵌入到 index.php 中最大的问题是：为什么它对“管理员”有效而对“用户”无效（这些是数据库中的字段）

```
<?
//$gdzie = "noworodki";
$userx = $_SESSION['userx'];
$result2=mysql_query("SELECT * FROM porody_ludzie WHERE login = '$userx'");
$row5=mysql_fetch_array($result2);

$dzisiaj = getdate(); 
$rok     = $dzisiaj['year']; 

$ilosc_rekordow = 15;
$ktora_tabela = "porody_karta";
if(($filter=="Filtruj")||($filter=="filtrowane")){
  if($filter=="Filtruj"){
    $strona=0;
  }
  if($numer_karty!=""){
    $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela WHERE numer = '$numer_karty'");
  }else{
    if($rodzaj_porodu!="-----"){
      $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela WHERE rodzaj_p LIKE '$rodzaj_porodu'");
    }else{
      if($status!="-----"){
        $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela WHERE status = '$status'");
      }else{
        //po nazwisku matki
        if($nazwisko_matki!=""){
          $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela WHERE nazwisko LIKE '$nazwisko_matki'");
        }else{          
          //print "po all<br>";
          $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela");
        }
      }
    }
  }
}else{
  $query = mysql_query("SELECT COUNT(*) FROM $ktora_tabela");
}
$ilosc_rekordow_w_tabeli = mysql_result($query, 0, 0); 
$max = ceil($ilosc_rekordow_w_tabeli/$ilosc_rekordow);
if($next=="następna"){
  $strona++;
}elseif($next=="poprzednia"){
  $strona--;
}elseif($next=="pierwsza"){
  $strona=0;
}elseif($next=="ostatnia"){
  if($max>1){
    $strona=$max-1;
  }
}
$offset = $strona*$ilosc_rekordow;
print '<table border=0 width="100%">
      <tr>
        <td width="30%">&#160;</td>
        <td width="10%">';
  print "<form method=\"post\" action=\"index.php\">";
  print "<input type=\"hidden\" name=\"action\" value=\"0\">";
  print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">";    
  print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";  
  if($filter!=""){  
    print "<input type=\"hidden\" name=\"filter\" value=\"filtrowane\">";
  }
  print "<input type=\"hidden\" name=\"rodzaj_porodu\" value=\"$rodzaj_porodu\">";
  print "<input type=\"hidden\" name=\"nazwisko_matki\" value=\"$nazwisko_matki\">";
  print "<input type=\"hidden\" name=\"status\" value=\"$status\">";
  print "<input type=\"hidden\" name=\"numer_karty\" value=\"$numer_karty\">";
  print "<center><input type=\"submit\" name=\"next\" value=\"pierwsza\"></form></td>";                     
  print '<td width="10%">';
if($strona>0){
  print "<form method=\"post\" action=\"index.php\">";
  print "<input type=\"hidden\" name=\"action\" value=\"0\">";
  print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">";    
  print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";
  if($filter!=""){  
    print "<input type=\"hidden\" name=\"filter\" value=\"filtrowane\">";
  }
  print "<input type=\"hidden\" name=\"rodzaj_porodu\" value=\"$rodzaj_porodu\">";
  print "<input type=\"hidden\" name=\"nazwisko_matki\" value=\"$nazwisko_matki\">";
  print "<input type=\"hidden\" name=\"status\" value=\"$status\">";
  print "<input type=\"hidden\" name=\"numer_karty\" value=\"$numer_karty\">";      
  print "<center><input type=\"submit\" name=\"next\" value=\"poprzednia\"></form>";    
}else{
  print '&#160;';
}
print '</td><td width="10%">';
if($strona<$max-1){
  print "<form method=\"post\" action=\"index.php\">";
  print "<input type=\"hidden\" name=\"action\" value=\"0\">";
  print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">";    
  print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";  
  if($filter!=""){  
    print "<input type=\"hidden\" name=\"filter\" value=\"filtrowane\">";
  }
  print "<input type=\"hidden\" name=\"rodzaj_porodu\" value=\"$rodzaj_porodu\">";
  print "<input type=\"hidden\" name=\"nazwisko_matki\" value=\"$nazwisko_matki\">";
  print "<input type=\"hidden\" name=\"status\" value=\"$status\">";
  print "<input type=\"hidden\" name=\"numer_karty\" value=\"$numer_karty\">";          
  print "<center><input type=\"submit\" name=\"next\" value=\"następna\"></form>";  
}else{
  print '&#160;';
}
print '</td><td width="10%">';
print "<form method=\"post\" action=\"index.php\">";
print "<input type=\"hidden\" name=\"action\" value=\"0\">";
print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">";  
print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";    
if($filter!=""){    
    print "<input type=\"hidden\" name=\"filter\" value=\"filtrowane\">";
}
print "<input type=\"hidden\" name=\"rodzaj_porodu\" value=\"$rodzaj_porodu\">";
print "<input type=\"hidden\" name=\"nazwisko_matki\" value=\"$nazwisko_matki\">";
print "<input type=\"hidden\" name=\"status\" value=\"$status\">";
print "<input type=\"hidden\" name=\"numer_karty\" value=\"$numer_karty\">";    
print "<center><input type=\"submit\" name=\"next\" value=\"ostatnia\"></form></td>";                       
print '<td width="30%">&#160;</td></tr></table>';

$strona++;

  print "<form name=\"ludzie\" method=\"post\" action=\"index.php\">";
  print "<table border=0 width=\"100%\">
      <tr>
        <td width=\"15%\">
          <font size=\"-1\">Numer strony: $strona</font><br>";
  $strona--;
  print "       </td>
        <td width=\"25%\">
          <font size=\"-1\">Status: <br>
          <select id=\"status\" name=\"status\">";  

    print "<option>-----</option>";
    print "<option>otwarty</option>";
    print "<option>zamknięty</option>";

    print "</select>
        </td>
        <td width=\"20%\">
          <font size=\"-1\">Numer karty: <br><input name=\"numer_karty\">
        </td>
        <td width=\"20%\">
          <font size=\"-1\">Rodzaj porodu: <br>";
        print "<select name=\"rodzaj_porodu\" id=\"rodzaj_porodu\">";
        print "<option>-----</option>";
        $rodzajPoroduResult=mysql_query("SELECT * FROM porody_rodzaje_porodow");
        while($rodzajPoroduRow=mysql_fetch_array($rodzajPoroduResult)){
          print "<option value=\"$rodzajPoroduRow[id]\">$rodzajPoroduRow[nazwa]</option>";
        }
        print "</select>";
        print "</td>
        <td width=\"20%\">
          <font size=\"-1\">Nazwisko matki: <br><input name=\"nazwisko_matki\" id=\"nazwisko_matki\">
        </td>
        <td width=\"5%\">";
          print "<input type=\"hidden\" name=\"action\" value=\"0\">";              
          print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";
          print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">
          <input type=\"submit\" name=\"filter\" value=\"Filtruj\"></form>
        </td>
    </table>";

print "<form method=\"post\" action=\"index.php\">
<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" valign=\"top\">";

$result2 = "";

if(($filter=="Filtruj")||($filter=="filtrowane")){
  if($numer_karty!=""){
    $result2=mysql_query("SELECT * FROM $ktora_tabela WHERE numer = '$numer_karty' ORDER BY numer DESC LIMIT $offset,$ilosc_rekordow");
  }else{
    if($rodzaj_porodu!="-----"){
      $result2=mysql_query("SELECT * FROM $ktora_tabela WHERE rodzaj_p LIKE '$rodzaj_porodu' ORDER BY numer DESC LIMIT $offset,$ilosc_rekordow");
    }else{

      if($status!="-----"){
        $result2 = mysql_query("SELECT * FROM $ktora_tabela WHERE status = '$status' ORDER BY numer DESC LIMIT $offset,$ilosc_rekordow");
      }else{
        if($nazwisko_matki!=""){
          $result2=mysql_query("SELECT * FROM $ktora_tabela WHERE nazwisko LIKE '$nazwisko_matki' ORDER BY numer DESC LIMIT $offset,$ilosc_rekordow");
        }else{
          //print "po all<br>";
          $result2 = mysql_query("SELECT * FROM $ktora_tabela ORDER BY numer DESC LIMIT $offset,$ilosc_rekordow");
        }
      }
    }
  }
}else{
  $result2=mysql_query("SELECT * FROM $ktora_tabela ORDER BY rok DESC, numer DESC LIMIT $offset,$ilosc_rekordow");
}

print "<tr><td border=\"0\" valign=\"top\" width=\"2%\"><center>#</center></td>";
print "<td border=\"0\" valign=\"top\" width=\"20%\"><b><center>Numer</center></b></td>";
print "<td border=\"0\" valign=\"top\" width=\"15%\"><b><center>Data porodu</center></b></td>";     
print "<td border=\"0\" valign=\"top\" width=\"23%\"><b><center>Imię i nazwisko pacjentki</center></b></td>";   
print "<td border=\"0\" valign=\"top\" width=\"30%\"><b><center>Rodzaj porodu</center></b></td>";       
print "<td border=\"0\" valign=\"top\" width=\"20%\"><b><center>Status</center></b></td></tr>";     

$user=0;
if($_SESSION['userx']!=""){
  $login = $_SESSION['userx'];
  $result4=mysql_query("SELECT * FROM porody_ludzie WHERE login = '$login'");
  $row4=mysql_fetch_array($result4);
  if($row4['status']=="user"){
    $user=1;
  }
}

while($row3=mysql_fetch_array($result2))
{
  $dzisiaj = getdate(); 
  $rok     = $dzisiaj['year']; 
  print "<tr><td align=\"center\">";
  if(($row3['status']!="otwarty")&&($user==1)){
    print '&nbsp;';
  }else{
    print "<INPUT TYPE=\"radio\" NAME=\"ludzie\" VALUE=\"$row3[id]\">";         
  }
  print "</td>";
  print "<td><center><font size=\"-1\"><a href=\"szczegoly.php?gdzie=$gdzie&&rekord=$row3[id]\" target=\"_blank\"><font color=\"black\">
  $row3[numer]/$row3[rok] BI</font></a></font></center></td>";                      
  print "<td><center><font size=\"-1\">$row3[data_por]</font></center></td>";
  print "<td><center><font size=\"-1\">$row3[imie] $row3[nazwisko]</font></center></td>";
  $rodzajPoroduResult=mysql_query("SELECT * FROM porody_rodzaje_porodow WHERE id = '$row3[rodzaj_p]'");
  $rodzajPoroduRow=mysql_fetch_array($rodzajPoroduResult);
  if($rodzajPoroduRow[nazwa]==""){
    $rodzajPoroduRow[nazwa] = "---";
  }
  print "<td><center><font size=\"-1\">$rodzajPoroduRow[nazwa]</font></center></td>";       
  print "<td";
  if($row3[status]=="otwarty"){
    print ' bgcolor="yellow"';
  }elseif($row3[status]=="zamknięty"){
    print ' bgcolor="green"';       
  }
  print "><center><font size=\"-1\">$row3[status]</font></center></td>";        
  print "</tr>";
}
print "</table><br>";
print "<input type=\"hidden\" name=\"action\" value=\"61\">";
print "<input type=\"hidden\" name=\"gdzie\" value=\"$gdzie\">";
print "<input type=\"hidden\" name=\"strona\" value=\"$strona\">";          
print "<center><input type=\"submit\" name=\"ok\" value=\"Edytuj\">";   
print "<input type=\"submit\" name=\"ok\" value=\"Kasuj\">";        
print "<input type=\"submit\" name=\"ok\" value=\"Dodaj\">";        
print "<center><input type=\"submit\" name=\"ok\" value=\"Zmień status\"></center>";                
print "<input type=\"hidden\" name=\"a\" value=\"1234567890123456789012345678901234567890\">";

print "</form>";        

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:50:43.730

输出缓冲是原因。我在开发服务器上重新安装了 IIS 和 php，试图解决这个问题，输出缓冲设置为 4096。我在 php.ini 文件中将其更改为 On，它工作正常。在每个表格或 div 块之后最好使用 ob_flush(); 和冲洗（）；然后用户将看到页面加载。如果在某些浏览器中没有这个，它会将所有代码以一个块的形式输出到浏览器，因此在用户看到任何内容之前需要一个大页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:20:13.407

您是否有 jquery 或某种在页面加载后正在扫描页面的 javascript。我已经看到如果某处存在错误，javascript 函数可以在哪里锁定浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:38:24.673

不确定您发布的内容是否会导致问题（考虑到您尚未发布所有代码，缺少分号或引号等其他内容可能会导致问题，而且我们不知道您是否曾经关闭输入字段）。

尝试这个：

```
echo "<input type='hidden' name='a' value='123456789012345678901234567890'>"; 
```

我更改了转义引号，因为转义可能会导致问题，具体取决于您测试代码的位置（即，如果您使用网站测试短代码，它们会双重转义反斜杠）。还将 print 更改为 echo，因为 echo 更快一些，如果您习惯使用 print 并转移到使用它实际打印（到打印机）的语言，它会变得混乱。

# android - Adobe 空气播放器：安卓

> ID：11581415
> 
> 赞同：0
> 
> 时间：2012-07-20T14:30:35.727
> 
> 标签：android, flash, mobile, air, adobe

Android 支持 adobe air player 吗？我是这些移动技术的新手。我知道，Adobe 不会为 android 平台的 flash 播放器提供支持。Air Player 也是如此吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:34:40.360

[http://blogs.adobe.com/flashplayer/2011/02/adobe-air-2-6-for-android-is-now-available.html](http://blogs.adobe.com/flashplayer/2011/02/adobe-air-2-6-for-android-is-now-available.html)

是的，根据 adobe 网站，AIR 播放器可以从 Android Market 下载。

# java - 如何向 Gradle 添加新的源集？

> ID：11581419
> 
> 赞同：113
> 
> 时间：2012-07-20T14:30:47.770
> 
> 标签：java, gradle, build, integration-testing, source-sets

我想将集成测试添加到我的 Gradle 构建（版本 1.0）中。它们应该与我的正常测试分开运行，因为它们需要将 web 应用程序部署到 localhost（它们测试该 web 应用程序）。测试应该能够使用我的主要源集中定义的类。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-07-20T14:30:47.770

**2021 年更新：**

8年来发生了很多变化。Gradle 仍然是一个很棒的工具。现在，文档中有一个完整的部分专门用于配置集成测试。我建议您现在[阅读文档](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests)。

**原答案：**

这花了我一段时间才弄清楚，并且在线资源不是很好。所以我想记录我的解决方案。

这是一个简单的 gradle 构建脚本，除了 main 和 test 源集之外还有一个 intTest 源集：

```
apply plugin: "java"

sourceSets {
    // Note that just declaring this sourceset creates two configurations.
    intTest {
        java {
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
    }
}

configurations {
    intTestCompile.extendsFrom testCompile
    intTestRuntime.extendsFrom testRuntime
}

task intTest(type:Test){
    description = "Run integration tests (located in src/intTest/...)."
    testClassesDir = project.sourceSets.intTest.output.classesDir
    classpath = project.sourceSets.intTest.runtimeClasspath
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-05-29T16:34:43.993

这是我在不使用`configurations{ }`.

```
apply plugin: 'java'

sourceCompatibility = JavaVersion.VERSION_1_6

sourceSets {
    integrationTest {
        java {
            srcDir 'src/integrationtest/java'
        }
        resources {
            srcDir 'src/integrationtest/resources'
        }
        compileClasspath += sourceSets.main.runtimeClasspath
    }
}

task integrationTest(type: Test) {
    description = "Runs Integration Tests"
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath += sourceSets.integrationTest.runtimeClasspath
} 
```

***测试使用：** Gradle 1.4 和 Gradle 1.6*

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-06-17T12:49:53.720

> 这**曾经是 2016 年为 Gradle 2.x / 3.x 编写的，并且已经过时了**！！请查看[Gradle 4 及更高版本中记录的解决方案](/a/54695537/529977)

* * *

总结两个旧答案（获得两个世界的最佳和最小可行）：

先说几句暖心的话：

1.  首先，我们需要定义`sourceSet`：

    ```
    sourceSets {
        integrationTest
    } 
    ```

2.  接下来我们扩展`sourceSet`from `test`，因此我们使用`test.runtimeClasspath`（包括`test`AND`test`本身的所有依赖项）作为派生的类路径`sourceSet`：

    ```
    sourceSets {
        integrationTest {
            compileClasspath += sourceSets.test.runtimeClasspath
            runtimeClasspath += sourceSets.test.runtimeClasspath // ***)
        }
    } 
    ```

    *   **注意**）以某种方式需要重新声明/扩展`sourceSets.integrationTest.runtimeClasspath`，但应该无关紧要，因为`runtimeClasspath`总是扩展`output + runtimeSourceSet`，不要明白
3.  我们定义了一个专门的任务来运行集成测试：

    ```
    task integrationTest(type: Test) {
    } 
    ```

4.  配置使用的`integrationTest`测试类和类路径。`java`插件的默认值使用`test` `sourceSet`

    ```
    task integrationTest(type: Test) {
        testClassesDir = sourceSets.integrationTest.output.classesDir
        classpath = sourceSets.integrationTest.runtimeClasspath
    } 
    ```

5.  *（可选）**测试*后自动运行

    ```
    *integrationTest.dependsOn 测试* 
    ```

**   *（可选）*添加依赖项`check`（因此它总是在执行时`build`运行`check`）

    ```
    tasks.check.dependsOn(tasks.integrationTest) 
    ```

    *   *（可选）*添加 java,resources 以`sourceSet`支持自动检测并在您的 IDE 中创建这些“部分”。即 IntelliJ IDEA 将为`sourceSet`每个集合自动创建目录 java 和资源，如果它不存在：

    ```
    sourceSets {
         integrationTest {
             java
             resources
         }
    } 
    ```* 

 ****tl;博士***

```
apply plugin: 'java'

// apply the runtimeClasspath from "test" sourceSet to the new one
// to include any needed assets: test, main, test-dependencies and main-dependencies
sourceSets {
    integrationTest {
        // not necessary but nice for IDEa's
        java
        resources

        compileClasspath += sourceSets.test.runtimeClasspath
        // somehow this redeclaration is needed, but should be irrelevant
        // since runtimeClasspath always expands compileClasspath
        runtimeClasspath += sourceSets.test.runtimeClasspath
    }
}

// define custom test task for running integration tests
task integrationTest(type: Test) {
    testClassesDir = sourceSets.integrationTest.output.classesDir
    classpath = sourceSets.integrationTest.runtimeClasspath
}
tasks.integrationTest.dependsOn(tasks.test) 
```

指：

*   [gradle java 第 45.7.1 章。源集属性](https://docs.gradle.org/current/userguide/java_plugin.html#N1569A)
*   [gradle java 第 45.7.3 章。一些源集示例](https://docs.gradle.org/current/userguide/java_plugin.html#N1582C)

不幸的是， github.com/gradle/gradle/subprojects/docs/src/samples/java/customizedLayout/ [build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/customizedLayout/build.gradle)或[…/gradle/…/withIntegrationTests/build.gradle](https://github.com/gradle/gradle/blob/master/subprojects/docs/src/samples/java/withIntegrationTests/build.gradle)上的示例代码似乎没有处理这个问题或有不同的/更复杂/对我来说没有更清晰的解决方案！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-09T18:03:46.200

[nebula-facet](https://github.com/nebula-plugins/nebula-project-plugin#nebula-facet-plugin)插件消除了样板：

```
apply plugin: 'nebula.facet'
facets {
    integrationTest {
        parentSourceSet = 'test'
    }
} 
```

特别是对于集成测试，即使[这是为您完成的](https://github.com/nebula-plugins/nebula-project-plugin#nebula-integtest-plugin)，只需申请：

```
apply plugin: 'nebula.integtest' 
```

每个 Gradle 插件门户链接是：

1.  [星云面](https://plugins.gradle.org/plugin/nebula.facet)
2.  [nebula.integtest](https://plugins.gradle.org/plugin/nebula.integtest)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-02-14T17:02:19.540

如果你正在使用

*   Gradle 5.x，请查看[文档部分“测试 Java > 配置集成测试](https://docs.gradle.org/5.2.1/userguide/java_testing.html#sec:configuring_java_integration_tests) 示例 14 和 15 以了解详细信息（适用于 Groovy 和 Kotlin DSL，您更喜欢哪一个）

    *   alt：“当前”Gradle 文档链接位于[2](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests)，但将来可能会延迟，如果示例更改，您应该查看）
*   对于 Gradle 4，看看古老的版本[3 ，它与](https://docs.gradle.org/4.10.2/userguide/java_testing.html#sec:configuring_java_integration_tests)[@Spina 在 2012 年发布的](/questions/11581419/11581420#11581420)内容很接近

要让 IntelliJ 将自定义源集识别为测试源根：

```
plugin {
    idea
}

idea {
    module {
        testSourceDirs = testSourceDirs + sourceSets["intTest"].allJava.srcDirs
        testResourceDirs = testResourceDirs + sourceSets["intTest"].resources.srcDirs
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-02T15:31:34.113

从 Gradle 4.0 开始，这对我有用。

```
sourceSets {
  integrationTest {
    compileClasspath += sourceSets.test.compileClasspath
    runtimeClasspath += sourceSets.test.runtimeClasspath
  }
}

task integrationTest(type: Test) {
  description = "Runs the integration tests."
  group = 'verification'
  testClassesDirs = sourceSets.integrationTest.output.classesDirs
  classpath = sourceSets.integrationTest.runtimeClasspath
} 
```

从 4.0 版开始，Gradle 现在为源集中的每种语言使用单独的类目录。因此，如果您的构建脚本使用`sourceSets.integrationTest.output.classesDir`，您将看到以下弃用警告。

> Gradle 现在为每种 JVM 语言使用单独的输出目录，但此构建假定源集中的所有类都有一个目录。此行为已被弃用，并计划在 Gradle 5.0 中删除

要摆脱此警告，只需切换到`sourceSets.integrationTest.output.classesDirs`。有关详细信息，请参阅[Gradle 4.0 发行说明](https://docs.gradle.org/4.0/release-notes.html#detecting-test-classes-for-custom-test-tasks)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-28T11:19:31.003

我收集的文档在 2012 年被问到这个问题时并不是很好，但是对于在 2020 年以上阅读此内容的任何人：文档中现在有一整节内容是关于[如何为集成测试添加源集](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests)。您真的应该阅读它，而不是在此处复制/粘贴代码片段并将头撞到墙上，试图弄清楚为什么 2012-2016 年的答案不太有效。

答案很可能很简单，但比您想象的更微妙，您需要的确切代码可能与我需要的代码不同。例如，您是否希望您的集成测试使用与单元测试相同的依赖项？

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-12-23T16:46:21.717

我是 Gradle 新手，使用 Gradle 6.0.1 JUnit 4.12。这是我想出解决这个问题的方法。

```
apply plugin: 'java'
repositories { jcenter() }

dependencies {
    testImplementation 'junit:junit:4.12'
}

sourceSets {
  main {
    java {
       srcDirs = ['src']
    }
  }
  test {
    java {
      srcDirs = ['tests']
    }
  }
} 
```

注意主源和测试源是分开引用的，一个下一个，一个下`main`一个`test`。

下的`testImplementation`项目`dependencies`仅用于编译源代码`test`。如果您的主代码实际上依赖于 JUnit，那么您还可以`implementation`在`dependencies`.

我必须指定`repositories`部分才能使其正常工作，我怀疑这是最好/唯一的方法。*

# protobuf-net - 将 RuntimeTypeModel 克隆到解冻状态？

> ID：11581423
> 
> 赞同：1
> 
> 时间：2012-07-20T14:30:57.017
> 
> 标签：protobuf-net

是否可以从定义的模型访问现有的序列化模型，然后向其附加一个 Contracted 但未知的子类型，然后将其用于序列化？

还是我需要明确创建一个新模型？即在这种情况下为 ModuleTwoFoo

* * *

## 更新

```
var model = TypeModel.Create();
model[typeof(IFooChild)].AddSubType(2, typeof(ModuleTwoFooChild));
model.CompileInPlace(); 
```

**RuntimeModel.Default[] // model[] 是访问... Doh**！

如果有的话，我唯一的抱怨......希望有一种方法可以访问原始模型然后在其上构建而不是再次重新生成模型

正如马克所说“基本上需要的是克隆但未冻结的模型”

* * *

```
public interface IFoo
{
    int FooNumber { get; set; }
    IList<IFooChild> Children { get; set; }
}

[ProtoContract, ProtoInclude(1, typeof(ModuleOneFooChild))]
public interface IFooChild
{
    IFoo Foo { get; set; }
    string Detail { get; set; }
}

[ProtoContract]
public class ModuleOneFoo : IFoo
{
    [ProtoMember(1)]
    public int FooNumber { get; set; }

    [ProtoMember(2)]
    public IList<IFooChild> Children { get; set; }    
}

[ProtoContract]
public class ModuleOneFooChild : IFooChild
{
    public IFoo Foo { get; set; }

    [ProtoMember(1)]
    public string Detail { get; set; }    
}

[ProtoContract]
public class ModuleTwoFoo : IFoo
{
    [ProtoMember(1)]
    public int FooNumber { get; set; }

    [ProtoMember(2)]
    public IList<IFooChild> Children { get; set; }    
}

[ProtoContract]
public class ModuleTwoFooChild : IFooChild
{
    public IFoo Foo { get; set; }

    [ProtoMember(1)]
    public string Detail { get; set; }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:05:06.770

我假设您想在生成序列化程序后对模型进行更改，这包括添加子类型。目前不支持 -*目前*您需要重新创建类型模型。在开始使用它**之前**，您应该知道要使用什么！

但是，我可以看到两个功能请求之一的价值：

1.  解冻 MetaType（吹走任何生成的序列化器/策略）
2.  克隆 MetaType 或 RuntimeTypeModel，但未冻结

# javascript - 设计代码工作流程

> ID：11581425
> 
> 赞同：1
> 
> 时间：2012-07-20T14:31:05.207
> 
> 标签：javascript, design-patterns

我正在编写一些代码来与 API 交互，为了使用 API，您需要获取用于其余请求的会话密钥，会话密钥将在一段时间后变为无效，因此代码还需要准备重新认证。

代码本身与 API 无关，因为它是关于如何设计代码流的问题，我正在寻找最好的方法。

我这里没有代码（javascript/node.js），但这里基本上是它在伪代码中的样子：

```
function getResult {
  data = foobar
  return getData(data, callback)
}

function getData(data, callback) {
  *building query (including the session-key) and getting data via http*
  if error == noauth
    auth()
    // What should happen here, I need to rerun the query
  else
   callback(result)
}

function auth {
  data = foobar
  getData(data, callback(?))
  // it returns a session-key to use 
  //What should happen here?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:07:18.993

我会做类似的事情：

```
function GetAuth(auth_params)
{
    // get session key
    return session key;
}

function MyAPIWorker(auth_params)
{
    this._auth_params = auth_params;
    this._current_auth = null;
}

MyAPIWorker.prototype.do(action)
{
    if (this._current_auth == null)
    {
    this._current_auth = GetAuth();
    }
    var result = action(this._current_auth);
    if (result == no_auth_error)
    {
    this._current_auth = GetAuth();
    result = action(this._current_auth);
    }
    return result;
} 
```

然后使用它：

```
worker = new MyAPIWorker(/* auth params here */);
worker.do(function (sessionKey) { /* do something with session key */});
/** blah blah **/
worker.do(function (sessionKey) { /* do other something with session key */}); 
```

工人将为您处理所有繁重的工作......

# xcode - 如果我不在其中开发，我可以将 XCode 拖到垃圾箱吗？

> ID：11581426
> 
> 赞同：0
> 
> 时间：2012-07-20T14:31:05.350
> 
> 标签：xcode, osx-lion

我在 Emacs 中完成所有开发工作。我从不使用 XCode。最新的 XCode (4.3.3) 作为应用程序安装，而不是 /Developer 和其他地方的一堆文件。我必须使用它来安装命令行工具，但现在我想知道：如果我想要的只是命令行工具，将 XCode.app 拖到垃圾箱是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:38:22.540

是的，您可以删除 XCode。如果您只需要命令行工具，则可以在 Apple Developer 链接上单独下载它们：[https ://developer.apple.com/downloads](https://developer.apple.com/downloads)

# jquery - 如何使用通配符 jquery 绑定单击事件？

> ID：11581437
> 
> 赞同：0
> 
> 时间：2012-07-20T14:32:14.117
> 
> 标签：jquery

> **可能重复：**
> [jQuery 选择器：ID 以？](https://stackoverflow.com/questions/609382/jquery-selector-id-ends-with)

假设我有名为**ctl00_mstPartBase_lblTopPager**和 **ctl00_mstPartBase_lblBottomPager**的控件。

这些控件有许多超链接。我想为这些超链接绑定一个点击事件。我努力了：

```
$('#lblTopPager #lblBottomPager a').click(function (e) {
        alert("click occured");
        e.preventDefault();

}); 
```

但是上面的代码不起作用，因为我的控件名称是 **ctl00_mstPartBase_lblTopPager**

当父控件的名称不固定时，如何将单击事件与这些超链接绑定，唯一固定的部分是`lblTopPager`and `lblBottomPager`。

我应该编写什么代码，以便单击绑定将适用于两个容器中的所有超链接。请帮忙。谢谢

## 我是这样做的

```
 $('[id$=lblTopPager] a, [id$=lblBottomPager] a').live("click", function (e) {
        alert($(this).text() + ' this is my anchor text ');
        e.preventDefault();
    }); 
```

$(document).ready(function () { $('[id*=btnOk]').live("click", function () {

});

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:36:05.707

这应该选择 id 以**lblTopPager结尾的所有元素**

```
$("[id$=lblTopPager]") 
```

这应该选择`a`父母ID以**lblTopPager结尾的所有元素**

```
$("[id$=lblTopPager] a") 
```

# java - SmartGWT：无法检查 SelectItem 的值

> ID：11581442
> 
> 赞同：1
> 
> 时间：2012-07-20T14:32:29.267
> 
> 标签：java, smartgwt

我面临一个问题，即我无法从 SelectItem 中填充的值中进行检查。

```
DataSource ds = Datasource.get("users");

SelectItem selectItem = new SelectItem("Select One");
selectItem.setRequired(true);
selectItem.setAllowEmptyValue(false);
selectItem.setOptionDataSource(ds);
selectItem.setDisplayField("username");

myDynamicForm.setFields(selectItem); 
```

SelectItem 填充了数据源中的项目，并使用“用户名”字段正确显示选项。但除了第一个选项之外，我无法选择任何选项。我不确定我是否遗漏了什么。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T19:08:47.300

哎呀。将在 SelectItem 上调用 setValueField 方法。一旦我设置了它，它就可以正常工作。

# php - 一次将所有 SQL 查询提取到一个数组中？

> ID：11581443
> 
> 赞同：0
> 
> 时间：2012-07-20T14:32:30.027
> 
> 标签：php, sql

`url`好吧，下面的 php 代码成功地添加了该字段中的所有行。

```
$sql = "SELECT * FROM table WHERE url <> ''";
$result = mysql_query($sql,$con);
$sql_num = mysql_num_rows($result);

while($sql_row=mysql_fetch_array($result)) 
{
    urls[] = $sql_row["url"];
} 
```

问题是如果 url 的列表以百万为单位，那么它会花费很多时间（尤其是在 localhost 中）。所以，我想知道另一种将 sql 查询结果直接放入数组而不使用循环的方法。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:34:51.680

您应该考虑为此目的使用 mysqli。该`fetch_all()`方法将允许这样做。

[http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

**更新**

根据评论，我尝试了这两种方法。我尝试在我们生产的一张大桌子上`mysql_fetch_array`循环使用，并使用方法。确实使用了更少的内存并且比循环运行得更快。`mysqli::fetch_all()``mysqli::fetch_all()``mysql_fetch_array`

该表有大约 500000 行。`mysqli::fetch_all()`在 2.50 秒内完成将数据加载到数组中，并且没有达到脚本中设置的 1G 内存限制。`mysql_fetch_array()`3.45 秒后因内存耗尽而失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:35:09.430

问题不在于循环，而在于您将数百万条数据（可能很大）从数据库传输到内存中。无论您采用哪种方式，都需要时间。无论如何，有人需要在某个地方循环。

简而言之：减少从数据库中获取的数据量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:35:59.040

`mysql`已弃用，您想要的功能在`mysqli`和中找到`PDO`。这是切换到较新的 MySQL 扩展的完美借口。对于`mysqli`和`PDO`，方法是`fetchAll`（注意`mysqli::fetch_all`需要`mysqlnd`驱动程序运行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:36:23.430

mysql中没有它的选项。虽然你可以使用 pdo 的 fetchall()

[http://php.net/pdostatement.fetchall](http://php.net/pdostatement.fetchall)

# xml - 将 Confluence xml 转储导入 Mediawiki

> ID：11581445
> 
> 赞同：17
> 
> 时间：2012-07-20T14:32:44.787
> 
> 标签：xml, mediawiki, porting, sample, confluence

是否可以将 Confluence xml 转储导入 Mediawiki？如果是这样，任何指导将不胜感激。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T02:15:26.777

有一个从 Confluence 到 Twiki 的转换器：

[http://twiki.org/cgi-bin/view/Plugins/ConfluenceToTWikiAddOn](http://twiki.org/cgi-bin/view/Plugins/ConfluenceToTWikiAddOn)

以及从 Twiki 到 MediaWiki 的转换器：

[https://www.mediawiki.org/wiki/Twiki](https://www.mediawiki.org/wiki/Twiki)

以下是一些标记翻译工具：

*   [汇合到 MediaWiki 转换器](http://www.infinality.net/files/confluence-to-mediawiki-converter/)
*   [维基百科](http://www.amnet.net.au/~ghannington/confluence/wikifier/)
*   [多霞](http://maven.apache.org/doxia/doxia-tools/doxia-converter/index.html)
*   [米林](http://wiki.eclipse.org/Mylyn/Incubator/WikiText)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T22:08:06.927

仍在研究这是否是解决方案，但是....

1.  从汇合导出空间，作为HTML
2.  然后使用[https://github.com/svick/LINQ-to-Wiki](https://github.com/svick/LINQ-to-Wiki)
3.  从 confluence 导出创建的 index.html 页面中的蜘蛛
4.  并将新页面插入 MediaWiki

如果这可行，上帝帮助我（我鄙视 mediawiki）

# struts2 - Struts 2 - struts标签错误

> ID：11581451
> 
> 赞同：0
> 
> 时间：2012-07-20T14:33:28.550
> 
> 标签：struts2

![在此处输入图像描述](../Images/0631118c886823294e1c86351415cd03.png) 我在尝试执行 struts 2 应用程序时收到此消息。请问有人可以帮忙吗？我应该提供其他信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:04:10.573

虽然我无法清楚地看到图像以及那里的错误，但是查看您正在点击的 URL 我可以告诉您此异常的原因。

在 Struts2 中，您需要为每个请求调用过滤器以使 Struts2 特定标记工作，因为调用过滤器意味着让框架完成其初始化工作，以便它应该为您提供您需要的东西，在您的情况下，您遇到了jsp 页面直接，这意味着您不会让 S2 过滤器及其其他关联类来完成初始工作，并且由于这个 Struts2 标记没有导致此错误的所需数据。

我建议你使用 action 来调用其他 JSP 以便让框架完成它的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T10:40:20.967

您需要在 web.xml 中为 struts 创建一个过滤器。像这样的东西

```
<filter>
  <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter    </filter-class>
</filter>
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# iphone - 如何将数据存储在tableView中并下次更新

> ID：11581456
> 
> 赞同：0
> 
> 时间：2012-07-20T14:33:50.117
> 
> 标签：iphone

```
-(IBAction)btnSaveScore:(id)sender
{
   if(!dictWinData)
      dictWinData = [[NSMutableDictionary alloc] init];

    array = [NSMutableArray arrayWithObjects:txt_EnterName.text,
                                             [NSString stringWithFormat:@"%i",iTap], nil];

    int increment = 0;

    NSLog(@"array data is:--> %@",array);

    for (int intWinData = 1; intWinData < [array count]; intWinData++)
    {
        [dictWinData setObject:array forKey:[NSString stringWithFormat:@"NameScore%d",increment]];
        increment++;
    }
} 
```

这是使用名称添加我的游戏分数的代码。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dictWinData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        ArrStr = [dictWinData valueForKey:[NSString stringWithFormat:@"NameScore%d",indexPath.row]];
        UILabel *lblDayName = [[UILabel alloc] initWithFrame:CGRectMake(10, 50, 160, 21)];
        lblDayName.text = [ArrStr objectAtIndex:0];
        lblDayName.textColor = [UIColor blackColor];
        lblDayName.font = [UIFont boldSystemFontOfSize:17.0];
        lblDayName.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:lblDayName];
        [lblDayName release];

        UILabel *lblLow = [[UILabel alloc] initWithFrame:CGRectMake(180, 50, 40, 21)];
        lblLow.text = [ArrStr objectAtIndex:1];
        lblLow.textColor = [UIColor blackColor];
        lblLow.font = [UIFont boldSystemFontOfSize:17.0];
        lblLow.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:lblLow];
        [lblLow release];
    }
return cell;
} 
```

这是存储玩家的姓名和分数，但每次它只在表格中显示一条记录。

它必须显示列表中最后的前十名。

主要问题是这不是存储和显示每个分数数据。

请指导我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:28:06.763

`UITableView`您需要为要在条件内外显示的每个控件提供标记，`cell==nil`您需要使用特定标记检索该控件，然后为其分配文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:09:37.533

您不能使用表视图来存储数据。表格视图是一个 UI 元素，可用于显示您的数据。[UITableView 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)。对于存储数据，您可以使用：

1.  [核心数据](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)
2.  [方镁石](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)
3.  [列表](http://www.youtube.com/watch?v=MuzKKr4frIM)

# git - 有没有办法在 Git 中进行分叉，然后从原始项目中维护或合并？

> ID：11581458
> 
> 赞同：1
> 
> 时间：2012-07-20T14:33:55.953
> 
> 标签：git, open-source, github, git-fork

我想从 GitHub 获取一个开源项目 (A)，将其 fork 到我的帐户，然后进行一些修改 (B)。

然后过了一会儿，原始（A）存储库会发生变化，同时我对我的存储库（B）进行了更改

问题是：有没有办法维持或合并从 repo (A) 到 repo (B) ？

另一个问题是：是个好主意吗？我知道这取决于我对源代码所做的更改类型，但这是一种好的做法，还是通常在分叉时，项目以非常不同的方式进行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:35:07.060

您可以将分叉的存储库添加为远程

```
git remote add upstream PATH_TO_REPO 
```

然后你可以

```
get fetch upstream
git merge upstream/BRANCH_NAME 
```

# jquery - 使用 preventDefault() 时如何在单击按钮时提交表单？

> ID：11581462
> 
> 赞同：10
> 
> 时间：2012-07-20T14:34:19.587
> 
> 标签：jquery, forms, submit

当用户单击 [ENTER] 键时，我正在使用 jQuery`.preventDefault()`来防止表单提交。问题是当我单击提交按钮时它也会停止表单提交。

我看到 Stackoverflow 上有很多关于 的线程`.preventDefault()`，但没有一个能解决我的问题。

这是我目前正在处理的代码。

```
// Part of my form
<form id="subscription_order_form" class=""  method="post" action="some_url"> 
  <button id="btn_order" type="submit">Order</button>
</form>

// Prevent the form to be submitted on ENTER
$('#subscription_order_form').submit(function(e){
  e.preventDefault();
});

// Controll data
$('#btn_order').click(function(){
  checkMandatoryFields();
});

// Check mandatory fields before subitting:
function checkMandatoryFields(e){

  // Code for testing here

  // Set "error" message and abort submission
  if(msg.length > 0) {
    // Do something
  } else {

    //submit or trigger is not recognized as functions
    $('#subscription_order_form').submit(); //.trigger('submit');

  }
} 
```

谁能告诉我他在单击按钮时提交表单的代码是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T14:44:03.427

在 DOM 节点上触发提交事件，而不是 jQuery 对象。

```
$('#subscription_order_form')[0].submit(); 
```

或者

```
$('#subscription_order_form').get(0).submit(); 
```

或者

```
document.getElementById("subscription_order_form").submit(); 
```

这绕过了允许表单正常提交的 jQuery 绑定事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T14:38:06.663

将提交按钮更改为普通按钮并在其 onClick 事件中处理提交。

据我所知，无法判断表单是通过 Enter Key 还是提交按钮提交的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T14:39:14.520

你需要使用

```
$(this).parents('form').submit() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T14:42:55.453

替换这个：

```
$('#subscription_order_form').submit(function(e){
  e.preventDefault();
}); 
```

有了这个：

```
$('#subscription_order_form').on('keydown', function(e){
    if (e.which===13) e.preventDefault();
}); 
```

[小提琴](http://jsfiddle.net/kqqbx/1/)

这将阻止表单在按下 Enter 键时提交，因为它会阻止键的默认操作，但表单将在单击时正常提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T14:41:12.770

好的，首先`e.preventDefault();`它不是一个 Jquery 元素，它是一个 javascript 的方法，现在它是真的，如果你添加这个方法，你可以避免提交事件，现在你可以做的是通过 ajax 发送表单这样的东西

```
$('#subscription_order_form').submit(function(e){
    $.ajax({
     url: $(this).attr('action'),
     data : $(this).serialize(),
     success : function (data){

      }
   });
    e.preventDefault();
}); 
```

# frameworks - EF 代码优先：更新实体

> ID：11581472
> 
> 赞同：1
> 
> 时间：2012-07-20T14:34:53.290
> 
> 标签：frameworks, entity

我有以下实体：

```
Partial Public Class Workflow
    Sub New()
        Activities = New List(Of WFActivity)
    End Sub
    <Key()>
    Public Property ID As Long
    Public Property Customer As Customer
    <Required(), MaxLength(100)>
    Public Property Name As String
    Public Property Activities As List(Of WFActivity)
End Class 
```

要添加和更新实体，我使用以下过程：

```
Public Sub SaveWorkflow(ByVal WF As Workflow)
    Dim wfa As WFActivity
    Try
        Using ctx = New MyContext

            ctx.Workflow.Add(WF)
            If WF.ID > 0 Then
                ctx.Entry(WF).State = EntityState.Modified
            End If

            For Each wfa In WF.Activities
                If wfa.ID > 0 Then
                    ctx.Entry(wfa).State = EntityState.Modified
                End If
            Next

            If WF.Customer.ID > 0 Then
                ctx.Entry(WF.Customer).State = EntityState.Modified
            End If

            ctx.SaveChanges()
        End Using

    Catch ex As Exception

    End Try
End Function 
```

插入新实体可以正常工作。但是在此过程中第二次使用相同的 WF 对象进行更新时出现以下错误：

*保存不为其关系公开外键属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地在保存时处理异常。有关详细信息，请参阅 InnerException。*

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:07:20.860

这发生在我身上一次。我想我只是通过暴露 EF 要求的键来解决它（暴露键意味着持有引用的实体也有一个包含外键的属性）例如：

```
public class Holder
{
    public Held HeldObject{get;set;}
    public int HeldID //this is the primary key for the entity Held (exact same name)
} 
```

这将在数​​据库中创建一个 FK 限制

# javascript - 可以更改部分字母的衬线吗？

> ID：11581473
> 
> 赞同：0
> 
> 时间：2012-07-20T14:34:55.047
> 
> 标签：javascript, html, css, text

我想知道是否可以调整文本的字体系列。我的意思是 time new roman 在整个字母上都有小线（衬线）。是否可以只在字母的顶部放置衬线。这似乎是不可能的，但我想我在某个地方看到了它。如果可能的话，这是我的代码...

```
<style type="text/css">
p.pnc{font-size:8em; padding-top:0px; margin-top:-385px; margin-left:250px; color:#0054A8; font-family:arial;}
</style>        

</head>

<body>

<div id="sample-2" style=" background-color:#F0F0F0; width:1000px; height:500px;">
</div>
<div>
<p class="pnc">PNC</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:36:34.020

不，你不能（合理地）用 JavaScript 做到这一点。它需要用衬线字体渲染顶部，用无衬线字体渲染底部，除非设计为以这种方式使用，否则结果可能不可读（或至少非常没有吸引力）。

当然，您可以创建一个[网络字体](http://en.wikipedia.org/wiki/Web_typography)，它只在您想要的位置有衬线。或者你可能会发现一种网络字体基本上已经有了你想要的外观，有数千种（例如，[这里](http://www.google.com/webfonts/)）......

# ruby-on-rails - 如何用水豚和硒填充tinymce-rails编辑器？

> ID：11581474
> 
> 赞同：11
> 
> 时间：2012-07-20T14:34:58.713
> 
> 标签：ruby-on-rails, selenium, tinymce, cucumber, capybara

我无法使用 capybara 测试 tinymce 形式。我正在使用[tinymce-rails](https://github.com/spohlenz/tinymce-rails)并在我的表单中有 7 个编辑器。我也在使用带有tinymce的asciimath插件。

一切正常，但我无法编写测试来填写 tinymce 编辑器。

这是我的步骤定义代码的样子，与[此处](https://groups.google.com/forum/?fromgroups#!msg/ruby-capybara/BxHQjdzrknY/VXCsaDTMPMQJ)描述的非常相似：

```
within_frame("content_ifr") do
  editor = page.find_by_id('tinymce')
  editor.native.send_keys 'test'
end 
```

问题是当我运行以下命令时：

```
editor.native.clear            # works, clear the editor area, I'm testing this with pry
editor.native.send_keys :tab   # works, moves focus to next input
editor.native.send_keys 'test' # returns "", nothing happens, nothing in editor 
```

所以`clear`并按`send_keys :tab`预期工作。但我不能发送任何字符串。`send_keys`函数总是返回空字符串，当我使用 pry 进行测试时没有任何反应。

这里出了什么问题？以及如何调试/调查问题？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-16T19:51:38.493

我知道这是一个老问题，但我只是在尝试解决这个问题时才发现它。

虽然最初的问题说他在同一页面上有 7 个 tinymce，但我认为我的解决方案也可能适用于他，但我知道如果像我的情况一样有一个 tinymce，它会起作用。

在我的请求规范中，我使用了这个：

```
page.execute_script('$(tinymce.editors[0].setContent("my content here"))') 
```

with 告诉它`page.execute_script`运行 jQuery 函数。然后它会找到第一个 tincymce 编辑器并设置内容。

对我来说就像一个魅力。我认为如果有不止一个tinymce，它可以通过它的位置来调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:17:32.417

[如此处](http://collectiveidea.com/blog/archives/2011/09/27/use-chrome-with-cucumber-capybara/)所述切换到 chrome解决了我的问题。

显然问题与Firefox驱动程序中的错误有关。

我仍然认为这对 Firefox 来说是一个有效的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:24:22.963

尝试切换到包含 tinymce textarea 输入的 iframe，而不是 send_keys：

```
# +session+ is an instance of Capybara::Session class
browser = session.driver.browser
browser.switch_to.frame(iframe_id)
editor.native.send_keys(text)
browser.switch_to.default_content 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-31T19:10:32.547

我遇到过同样的问题。经过一天的战斗，我的测试终于通过了。

我正在使用的代码是：

```
within_frame("producto_condiciones_ifr") do
  editor = page.find_by_id('tinymce')
  editor.native.send_keys 'filling text'
end 
```

第一行是水豚的方法。传递的参数是 iframe 的 ID。

第 2 行是必须的。

第 3 行是您希望放置在 TinyMCE 中的文本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T21:35:06.683

刚刚遇到了 RoR 和 rspec 的这个问题

我设法通过这样做来解决：

```
within_frame { page.find_by_id("tinymce").set("new content here") } 
```

该`set`方法将用新内容替换任何现有内容

如果要保留当前内容并向其中添加内容，请使用该`send_keys`方法

# wpf - 从默认样式继承样式

> ID：11581475
> 
> 赞同：41
> 
> 时间：2012-07-20T14:34:58.530
> 
> 标签：wpf, xaml, styling

在我的项目中，文本框有一个自定义样式。它被定义为：

```
<Style TargetType="TextBox"/> 
```

所以它默认应用于所有文本框子控件。

我需要创建另一种基于默认样式的样式。但是如何在 BasedOn 属性中指定我的新样式应该使用默认样式？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-20T14:39:57.400

使用您想要扩展的控件类型

```
BasedOn="{StaticResource {x:Type TextBox}}" 
```

完整示例：

```
<Style x:Key="NamedStyle" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
    <Setter property="Opacity" value="0.5" />
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-21T16:24:28.630

@Aphelion 有正确的答案。我想补充一下在这个`ResourceDictionary`问题中定义项目的顺序。

如果您覆盖滑块的默认样式，并且您希望在此基础上创建另一个滑块样式，则必须在覆盖样式之后声明“基于”滑块。

例如，如果您这样做：

```
<Style x:Key="BlueSlider" TargetType="{x:Type Slider}" BasedOn="{StaticResource {x:Type Slider}}">
    <Setter Property="Background" Value="Blue"/>
</Style>

<Style TargetType="{x:Type Slider}">
    <Setter Property="Foreground" Value="Yellow"/>
</Style> 
```

`BlueSlider`将具有默认（白色）前景的蓝色背景。

但如果你这样做：

```
<Style TargetType="{x:Type Slider}">
    <Setter Property="Foreground" Value="Yellow"/>
</Style>

<Style x:Key="BlueSlider" TargetType="{x:Type Slider}" BasedOn="{StaticResource {x:Type Slider}}">
    <Setter Property="Background" Value="Blue"/>
</Style> 
```

`BlueSlider`将有蓝色背景和黄色前景。

# asp.net - .NET UserControls 首次加载或后续重新加载标志

> ID：11581482
> 
> 赞同：1
> 
> 时间：2012-07-20T14:35:20.523
> 
> 标签：asp.net, user-controls

我相信每个使用 asp.net 用户控件编程的人都遇到过需要某种方式来检查用户控件是第一次加载还是重新加载的情况。除了设置隐藏的“currentOpenControl”标志之外，有没有人提出任何其他解决方案。如果您想知道我需要检查控件是第一次打开还是重新打开，那么其中一个重要原因是数据绑定。当控件第一次打开时，即我想要数据绑定，然后重新打开，如果我再次数据绑定，我将丢失用户可能添加的任何更改。所以我只是想知道是否有人有比设置标志更优雅的解决方案来控制是否打开。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:44:44.050

我曾经设法做到这一点的唯一方法是使用 ViewState ...

```
Private Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
  If ViewState["postBack"] Is Nothing Then
    ' Do everything you'd normally do with Page.IsPostBack
    ViewState["postBack"] = true
  End 
End Sub 
```

或者对于 C#...

```
protected void Page_Load(object sender, EventArgs e)
{
  if (ViewState["postBack"] == null)
  {
    // Do everything you'd normally do with Page.IsPostBack
    ViewState["postBack"] = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:46:37.910

您可以使用它，它在 VB.NET 中转换为 c#

```
 Private currentPage As Page = HttpContext.Current.Handler
    If (Not currentPage.IsPostBack) Then 
    End if 
```

# php - 创建动态 .htaccess 禁令的问题

> ID：11581483
> 
> 赞同：0
> 
> 时间：2012-07-20T14:35:22.923
> 
> 标签：php, mysql, .htaccess

我正在尝试实现一个供我自己使用的小应用程序，它可以读取从联系表单发送到我的数据库的数据，并且我希望能够禁止不受联系表单内容欢迎的用户，等等。所以我，我有每个用户的 IP，它是随表格发送的。但是，每次我点击禁止按钮时，它只会将拒绝保存到数据库，我想知道为什么。这是整个代码：

```
<?php
if(isset($_POST['submit'])) {
// Read the while file into a string $htaccess
$htaccess = file_get_contents('.htaccess');
// Stick the new IP just before the closing </files>
$new_htaccess = str_replace('allow from all', "deny from "."$unwanteduser"."\nallow from all", $htaccess);
// And write the new string back to the file
file_put_contents('.htaccess', $new_htaccess);
}
?>
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Yhteydenottopyynnöt</title>
<style>
body{width:100%;}

tr:nth-child(even) { background: #ccc; }
</style>
</head>

<body>
<?php
$con = mysql_connect("localhost","user","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("db", $con);

$result = mysql_query("SELECT * FROM wp_contactform");
$f = fopen(".htaccess", "a+");
$ip = $row['IP'];
    fwrite($ip , $f);
    fclose($f);

echo "<table border='1'>
<tr>
<th style='width:5%;'>ID</th>
<th style='width:10%;'>Nimi</th>
<th style='width:10%;'>Puhelin</th>
<th style='width:10%;'>Sposti</th>
<th style='width:40%;'>Viesti</th>
<th style='width:10%;'>P&auml;iv&auml;</th>
<th style='10%;'>IP</th>
<th style='5%;'>Ban</th>
</tr>";

$i = 0;
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td style='width:10%;'>" . $row['ID'] . "</td>";
  echo "<td style='width:10%;'>" . $row['Nimi'] . "</td>";
  echo "<td style='width:10%;'>" . $row['Puhelin'] . "</td>";
  echo "<td style='width:10%;'><a href='mailto:" . $row['Email'] . "'>" . $row['Email'] . "</a></td>";
  echo "<td style='width:40%;'>" . $row['Viesti'] . "</td>";
  echo "<td style='width:10%;' >" . $row['Day'] . "</td>";
  echo "<td style='width:10%;'>" . $row['IP'] . "</td>";
  $unwanteduser = $row['IP'];
  echo "<form action='thissamepage' method='post'><input type='hidden' value='$unwanteduser' name='gtfo'><input type='submit' name='submit' value='Ban'>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:41:45.290

**$unwanteduser**提交后未从您的表单中分配值

试试这个

```
<?php
if(isset($_POST['submit'])) {
// Read the while file into a string $htaccess
$htaccess = file_get_contents('.htaccess');
// Stick the new IP just before the closing </files>
$unwanteduser = $_POST['gtfo']; 
$new_htaccess = str_replace('allow from all', "deny from "."$unwanteduser"."\nallow from all", $htaccess);
// And write the new string back to the file
file_put_contents('.htaccess', $new_htaccess);
}
?> 
```

INFO : 一旦你提交了表单，它似乎就像一个页面刷新，所以你在提交表单之前在 $unwanteduser 分配的任何东西都会丢失

我很困惑

```
$result = mysql_query("SELECT * FROM wp_contactform");
$f = fopen(".htaccess", "a+");
$ip = $row['IP']; 
```

此时，价值是`$row['IP']`多少？以及您要附加的内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T09:35:23.340

正如评论中所写，如果您将构成逻辑单元的那些部分放入它自己的函数中，事情就会变得更加简单：

```
/**
 * add an ip to ban to a .htaccess file
 *
 * @param string $htaccess_file
 * @param string $ip
 * @return int Number of bytes that were written to the file, or FALSE on failure.
 */
function htaccess_add_ban_ip($htaccess_file, $ip)
{
    $htaccess_original = file_get_contents($htaccess_file);
    if (false === $htaccess_original) {
        return false;
    }
    $htaccess_changed = str_replace(
        'allow from all',
        "deny from $ip\nallow from all",
        $htaccess_original,
        $count
    );
    if ($count != 1) {
        return false;
    }
    return file_put_contents($htaccess_file, $htaccess_changed);
} 
```

然后，您只需在需要该功能的地方调用该函数：

```
$result = htaccess_add_ban_ip($file, '127.0.0.1'); 
```

检查返回值以控制事情是否正确，例如测试：

```
if (false === $result) {
    die(sprintf('Could not write .htaccess file "%s".', $file));
}

if ($result < 36) {
    die(sprintf('Very little bytes (%d) written to .htaccess file "%s", this makes no sense, please check.', $result, $file));
}

die(sprintf('Successfully wrote IP %s to .htaccess file "%s" (%d bytes written).', $ip, $file, $result)); 
```

将来，您可以在函数中引入所需的功能（如文件锁定），并且您通常不能更改脚本的大部分其余部分。

如果您正在寻找一种方法来简化连接和查询您的 mysql 数据库，请参阅这个对不同问题的相关答案：

*   [PHP 文件无法输入部分代码](https://stackoverflow.com/a/11580420/367456)

它包含一个 MySql 类/对象以及另一个示例，如何使用/创建函数以使代码更易于处理。

# grails - 对域类的更改不会反映对 grails 应用程序中视图的更改

> ID：11581484
> 
> 赞同：0
> 
> 时间：2012-07-20T14:35:25.163
> 
> 标签：grails

我想知道为什么我的域类的创建页面不会反映我对域类所做的更改。我尝试添加一些额外的字段，但它不会出现在 UI 上。

我还尝试更改在*静态约束 = {}*闭包上键入的字段的顺序，但无济于事，它们看起来仍然与我进行更改之前的顺序相同

还尝试了*grails clean*，没有任何反应

我很确定我在正确的目录中并且我正在使用开发环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:51:47.047

如果您通过执行 generate-all 命令创建了脚手架，则您使用的是静态脚手架。如果您使用的是静态脚手架，则必须在修改域类后重新执行 generate-all 命令。静态脚手架是一个模板，您可以根据需要进行修改。它并不意味着在您的域类发生时自动更改。当您的域类发生变化时，动态脚手架将发生变化，但提供的定制能力较少。一般来说，静态脚手架更适合自定义 UI，而动态脚手架适用于大多数用户看不到的管理页面等内容。

# php - 是否有可能 HTML5 Metro 应用程序在 PHP 中使用 Web 服务？

> ID：11581486
> 
> 赞同：1
> 
> 时间：2012-07-20T14:35:28.887
> 
> 标签：php, javascript, web-services, html, microsoft-metro

我通过网络和stackoverflow搜索，但仍然无法获得一些教程。我更熟悉如何在 php 中创建函数来处理数据库并使用 javascript 与 php 对话，比如[将 php 托管在数据库的其他地方，并从 windows 8 调用函数来处理数据库并使用数据](http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap)。可以通过windows 8完成吗？或者除了 WCF、RIA 之外，这种方式或任何替代方式是否有任何限制？

谢谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:47:13.177

HTML Metro 应用程序与浏览器中的任何应用程序相同；它可以以一个优势进行相同的 XHR 调用；您可以通过在清单中声明目标主机来克服同源策略。

您通常使用 XHR 或类似工具执行的任何操作也可以在这里使用。

# jena - Jena 在尝试转换为 OntClass 时抛出 ConversionException

> ID：11581494
> 
> 赞同：2
> 
> 时间：2012-07-20T14:36:03.557
> 
> 标签：jena

我有一个特定的类 URI，我正在尝试为其获取 OntClass。该模型是常规模型。

我写了一些代码来找出模型中是否有正确的语句，而且似乎它们是这样我不明白为什么它不会让我将其视为 OntClass。（tblURI 是作为方法参数传递的字符串）

```
Resource tblR = m.createResource(tblURI);
List<Statement> prp = tblR.listProperties().toList();
for(Statement s : prp)
    System.out.println(s);
System.out.println(tblR.canAs(OntClass.class));
OntClass tbl = tblR.as(OntClass.class); 
```

这是输出：

```
[kps:datasource/EnsembleMS#translation_stable_id, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/2002/07/owl#Class]
[kps:datasource/EnsembleMS#translation_stable_id, http://www.w3.org/1999/02/22-rdf-syntax-ns#type, http://www.w3.org/2000/01/rdf-schema#Class]
[kps:datasource/EnsembleMS#translation_stable_id, http://www.w3.org/2000/01/rdf-schema#isDefinedBy, kps:datasource/EnsembleMS]
[kps:datasource/EnsembleMS#translation_stable_id, http://www.w3.org/2000/01/rdf-schema#label, "translation_stable_id"]
false
com.hp.hpl.jena.ontology.ConversionException: Cannot convert node kps:datasource/EnsembleMS#translation_stable_id to OntClass: it does not have rdf:type owl:Class or equivalent
    at com.hp.hpl.jena.ontology.impl.OntClassImpl$1.wrap(OntClassImpl.java:81)
    at com.hp.hpl.jena.enhanced.EnhNode.convertTo(EnhNode.java:155)
    at com.hp.hpl.jena.enhanced.EnhNode.convertTo(EnhNode.java:34)
    at com.hp.hpl.jena.enhanced.Polymorphic.asInternal(Polymorphic.java:66)
    at com.hp.hpl.jena.enhanced.EnhNode.as(EnhNode.java:110)
    at com.KPS.myApp.exampleMethod(myApp.java:123) 
```

为什么它会引发异常，我如何使用 uri tblURI 获取资源的 OntClass？

感谢您的任何指点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:15:46.303

你不说是什么样的模型`m`。特别是，如果`m`是使用 RDFS 语言配置文件创建的，`OntModel`则将寻找`rdf:type`of `rdfs:Class`，而不是`owl:Class`。如果这不是问题，那么一个完整的最小（即可运行）示例会有所帮助。

顺便说一句，我可以看到另一个问题：模型中的资源 URI 应该是绝对形式，而不是缩写形式。您的模型中有 q-name URI，例如`kps:datasource/EnsembleMS#translation_stable_id`，这一事实表明您的前缀处理出了问题。这本身不会导致您报告的问题，但这是一个需要调查的危险信号。

**更新**

回答问题：

*   是的，您需要使用 OntModel，否则无法`OntClass`知道要使用哪种语言配置文件。首先创建模型`OntModel`：

    ```
    OntModel m = modelFactory.createOntologyModel( OntModelSpec.OWL_MEM ); 
    ```

    或将您的普通模型包装为`OntModel`：

    ```
    OntModel om = modelFactory.createOntologyModel( OntModelSpec.OWM_MEM, m ); 
    ```

    当然，您多使用任何型号规格，随心所欲，`OWL_MEM`只是一种选择。

*   `createResource`不会为您扩展前缀。因此，您应该在创建资源之前自行扩展它们：

    ```
    m.createResource( m.expandPrefix( "foo:bar" ) ); 
    ```

    当然，这需要将前缀`"foo"`注册为前缀。如果您阅读在其语法中定义前缀的 RDF 文档，这会自动发生，否则可以使用[`setNsPrefix`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/shared/PrefixMapping.html#setNsPrefix%28java.lang.String,%20java.lang.String%29).

# php - 在 PHP 的 foreach 中声明一个静态变量

> ID：11581503
> 
> 赞同：0
> 
> 时间：2012-07-20T14:36:26.060
> 
> 标签：php, static, for-loop, foreach, scope

我有一个非常简单的问题。我怎样才能制作这个代码

```
$i = 0;
foreach($Array as $Value)
{

    echo $i;
    $i++
} 
```

但是这样写？

```
foreach($Array as $Value)
{
    $i = 0;
    echo $i;
    $i++
} 
```

我应该使用静态变量吗？或者是什么？我对此没有明确的看法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:41:14.027

你真的不应该那样做。静态变量用于在调用它们嵌入的函数之间保持变量的值。它们对于简单的循环没有用。您的第二个代码只会在每次迭代时将计数器重置为零。

例如，这是一个正确的用法：

```
function count() {
   static $x = 0; // executed the first time count() is called, then never again"
   echo ++$x;
}
count(); // 1
count(); // 2
count(); // 3 
```

你当然可以拥有

```
foreach($array as $val) {
   static $x = 0;
   echo ++$x;
} 
```

但是你什么也得不到，因为那段特定的代码在循环期间永远不会超出范围，所以 $x 的值永远不会“丢失”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:38:28.570

你可能想要使用

```
foreach($Array as $i => $Value)
{
    echo $i;    
} 
```

或者

```
foreach(array_values($Array) as $i=>$Value)
{

    echo $i;
} 
```

虽然首先你的例子也是正确的

# xamarin.ios - Monotouch - 快进/快退音频流

> ID：11581507
> 
> 赞同：3
> 
> 时间：2012-07-20T14:37:00.773
> 
> 标签：xamarin.ios, audio-streaming, fast-forward

我正在使用 Monotouch 示例从远程服务器 (https://github.com/xamarin/monotouch-samples/tree/master/StreamingAudio) 播放音频文件，我需要实现快进和快退功能。

StreamingPlayback 类实现了 OutputAudioQueue 播放和暂停功能。我曾在 Objective-C 中使用过 AVAudioPlayer，并且可以执行以下操作：

```
-(void) rewind()   
{   
         myPlayer.currentTime -= 10.0;   
} 
```

但是对于 OutputAudioQueue，CurrentTime 是只读的，在我看来，没有办法用它来实现倒带/快进。有人对此有解决方案，或者有更好的方法来播放我的远程音频文件吗？

谢谢

# java - 正则表达式检查日期和时间

> ID：11581508
> 
> 赞同：-5
> 
> 时间：2012-07-20T14:37:08.840
> 
> 标签：java, regex

如何编写正则表达式来检查给定格式是否只有日期/只有时间或两者都有以下格式“DD-MM-YYYY HH:MM AM”或“DD-MM-YYYY HH:MM”

我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:40:44.170

使用这个正则表达式`\d{2}-\d{2}-\d{4}\s\d{2}:\d{2}(\s(A|P)M)?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:40:37.443

像这样的东西？未经测试。

```
\b(\d{1,2}\-\d{1,2}-\d{4} \d{1,2}\:\d{1,2}( (AM|PM))?)\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:07:51.333

```
^((0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[012])-\d{4} (20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})( (AM|PM))?)$ 
```

你让我在闰年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:48:28.613

查看[https://stackoverflow.com/a/11579461/872803](https://stackoverflow.com/a/11579461/872803)并管理`"dd-MM-yyy hh:mm"`：

```
if (myString.endsWith("AM") {
    // use "dd-MM-yyy hh:mm"
} else {
   // use "dd-MM-yyy HH:mm"
} 
```

# android - Cordova 的状态栏通知插件错误

> ID：11581510
> 
> 赞同：7
> 
> 时间：2012-07-20T14:37:14.483
> 
> 标签：android, eclipse, cordova, phonegap-plugins

我正在尝试将 Cordova 的状态栏通知插件添加到我的 Android 应用程序中，但它的代码出现错误。

这是有问题的代码：

```
 Notification noti = new Notification.Builder(context)
    .setContentTitle(contentTitle)
    .setContentText(contentText)
    .setSmallIcon(icon)
    .build(); 
```

错误在`.build()`Eclipse 告诉我：

> “Notification.Builder 类型的 build() 方法未定义”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T01:33:42.437

我有相同的问题。看起来与 sdk 版本不匹配，现在已贬值的方法。

getNotification() 是自 API 11 build() 被添加到 API 16 以来调用的方法

如果你和我一样，你使用的是 < 16 的版本，所以使用 .getNotification() 代替。

我现在不会担心 API 16，但我敢打赌，如果我下载 16 并将我的目标设置为这样，build() 将起作用。

请让我知道这对你有没有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:04:01.560

对我来说 .getNotification() 没有解决问题，因为我需要 API 10 及更高版本的解决方案。

我找到了处理它的方法。如果其他人有同样的问题，我建议这样做：

1) 浏览 StatusBarNotification 的说明（[点击](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)）

2）修改StatusBarNotification.java

*   添加

    > 私人通知通知；
    > 
    > 私有 PendingIntent 内容意图；

在 StatusBarNotification 类的底部，例如在 NotificationManager 声明之前

*   修改 showNotification 方法

评论或删除：

```
导入android.app.Notification.Builder；
```

和

`Notification noti = new Notification.Builder(context) .setContentTitle(contentTitle) .setContentText(contentText) .setSmallIcon(icon) .build();`

而不是这部分，粘贴：

```
noti = new Notification(android.R.drawable.btn_star_big_on, contentText, System.currentTimeMillis() );
noti.flags = Notification.FLAG_AUTO_CANCEL；

Intent notificationIntent = new Intent(context, !yourMainActivityClass!.class);
notificationIntent.setAction(Intent.ACTION_MAIN);
notificationIntent = notificationIntent.setFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

noti.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
```

*   改变 !yourMainActivityClass! 到你的班级
*   在 index.html 中添加调用方法对于测试，您可以使用 JQM 按钮

    > onclick='window.plugins.statusBarNotification.notify("把你的标题放在这里", "把你的消息放在这里");return false;'

我知道这个解决方案正在使用折旧的方法，但我花了很多时间让它工作，我没有看到 API 10 的另一个解决方案。如果有人有更好的想法，请与我分享；）

# php - 安装 GD Toolkit 时出错

> ID：11581511
> 
> 赞同：2
> 
> 时间：2012-07-20T14:37:14.720
> 
> 标签：php, ubuntu, gd, apt-get, php-gd

我一直在尝试在我的 Ubuntu VM 上安装 GD 工具包。操作很简单：

```
sudo apt-get install php5-gd 
```

但是，当我运行它时，我得到一个包的 404（未找到错误）：

```
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  php5-gd
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
3 not fully installed or removed.
Need to get 38.8 kB of archives.
After this operation, 163 kB of additional disk space will be used.
Err http://us.archive.ubuntu.com/ubuntu/ precise-updates/main php5-gd amd64 5.3.10-1ubuntu3.1
  404  Not Found [IP: 91.189.92.153 80]
Err http://security.ubuntu.com/ubuntu/ precise-security/main php5-gd amd64 5.3.10-1ubuntu3.1
  404  Not Found [IP: 91.189.92.151 80]
Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/p/php5/php5-gd_5.3.10-1ubuntu3.1_amd64.deb  404  Not Found [IP: 91.189.92.151 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:47:31.303

从 user1190992 得到答案 apt-get 只是过时了....

这个命令成功了：

```
sudo apt-get update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:25:49.927

Internets might be all broken. try

> $ curl 91.189.92.153

# javascript - 获取 CodeMirror 实例

> ID：11581516
> 
> 赞同：31
> 
> 时间：2012-07-20T14:37:47.253
> 
> 标签：javascript, codemirror

我想获取 CodeMirror 的实例（它绑定到 textarea '#code'）。从 onclick 事件中，我想向 CodeMirror 实例的当前值添加一个值。如何做到这一点？从文档中，我似乎找不到任何东西来获取实例并将其绑定到 javascript 中的 loca var。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-07-28T02:05:04.363

我在[其他地方](http://wisercoder.com/get-reference-codemirror-instance/)找到的另一种方法如下：

```
//Get a reference to the CodeMirror editor
var editor = document.querySelector('.CodeMirror').CodeMirror; 
```

当您动态创建 CodeMirror 实例或用 CodeMirror 实例替换现有 DOM 元素时，这很有效。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T15:01:30.007

有人刚刚发布了答案，但将其删除。尽管如此，这是一个可行的解决方案。谢谢！

- 基本上这是他的解决方案：

```
// create an instance
var editor = CodeMirror.fromTextArea('code');
// store it
$('#code').data('CodeMirrorInstance', editor);
// get it
var myInstance = $('code').data('CodeMirrorInstance');
// from here on the API functions are available to 'myInstance' again. 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-10T12:38:42.380

有一个`getWrapperElement`代码镜像编辑器对象，它为您提供代码镜像实例的根 DOM 元素：

```
var codemirrorDomElem = editor.getWrapperElement(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-17T02:25:21.760

您可以找到以 the 开头`<textarea>`并移动到下一个兄弟的实例。

### 本国的

*   功能性

    ```
    document.querySelector('#code').nextSibling, 
    ```

*   选择器

    ```
    document.querySelector('#code + .CodeMirror'), 
    ```

### jQuery

*   功能性

    ```
    $('#code').next('.CodeMirror').get(0), 
    ```

*   选择器

    ```
    $('#code + .CodeMirror').get(0) 
    ```

> ***额外：涉及***[*clipboard.js*](http://zenorocha.github.io/clipboard.js/)的更高级的解决方案-> [**JSFiddle Demo**](http://jsfiddle.net/MrPolywhirl/3phdkg66/)

* * *

# 例子

```
// Selector for textarea
var selector = '#code';

$(function() {
  var editor = CodeMirror.fromTextArea($(selector).get(0), {
    mode: 'javascript',
    theme: 'paraiso-dark',
    lineNumbers : true
  });
  editor.setSize(320, 240);
  editor.getDoc().setValue(JSON.stringify(getSampleData(), null, 4));

  $('#response').text(allEqual([
    document.querySelector(selector).nextSibling,        // Native - Functional
    document.querySelector(selector + ' + .CodeMirror'), // Native - Selector
    $(selector).next('.CodeMirror').get(0),              // jQuery - Functional
    $(selector + ' + .CodeMirror').get(0)                // jQuery - Selector
  ]));
});

function allEqual(arr) {
  return arr.every(function(current, index, all) {
    return current === all[(index + 1) % all.length];
  });
};

// Return sample JSON data.
function getSampleData() {
	return [
        { color: "red",     value: "#f00" },
        { color: "green",   value: "#0f0" },
        { color: "blue",    value: "#00f" }
    ];
}
```

```
#response { font-weight: bold; }
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/theme/paraiso-dark.min.css" rel="stylesheet"/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div>All equal?: <span id="response"></span></div>
<textarea rows="10" cols="60" id="code"></textarea>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-28T06:58:05.797

我正在使用 with `Vue CLI 3`，`vue-codemirror`这样的组件：

```
<codemirror id="textarea_editor" v-model="textarea_input" :options="cm_editor_config"></codemirror> 
```

导入`codemirror`以在页面内使用：

```
import { codemirror } from 'vue-codemirror'
import 'codemirror/lib/codemirror.css' 
```

并简单地添加`codemirror`内部`components`对象，此后`data`部分中的配置为：

```
codemirror_editor: undefined,
cm_editor_config: {
    tabSize: 4,
    mode: 'application/json',
    theme: 'base16-dark',
    lineNumbers: true,
    // lineWrapping: true,
    styleActiveSelected: true,
    line: true,
} 
```

`mounted`并在生命周期部分初始化对象`Vue`：

```
mounted () {
    if ( !this.codemirror_editor ) {
        this.codemirror_editor = $('#textarea_editor').find('.CodeMirror').get(0).CodeMirror;
    }
    // do something with this.codemirror_editor
} 
```

希望这会帮助很多人。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-07T15:21:18.663

您可以简单地删除**var** : 而不是

```
var editor = CodeMirror.fromTextArea... 
```

只要有

```
editor = CodeMirror.fromTextArea... 
```

然后**编辑器**可以直接在其他功能中使用

# c# - 从其他项目打开 wpf 窗口

> ID：11581522
> 
> 赞同：8
> 
> 时间：2012-07-20T14:38:12.567
> 
> 标签：c#, wpf, reflection, .net-assembly

我有两个单独的项目，例如 project1 和 project2。那么我在project1中有一个window1，那么我如何从project2显示这个window1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T14:55:11.123

您只需向要从中调用其他项目的项目添加项目引用。然后你可以做这样的事情。我有 2 个不同的命名空间，但这样的东西应该可以工作。

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        WpfApplication2.MainWindow newForm;

        public MainWindow()
        {
            InitializeComponent();

        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            newForm = new WpfApplication2.MainWindow();

            newForm.Show();  // or newForm.ShowDialog();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:52:32.357

您需要做的是将 Project 1 引用添加到 Project 2 项目，然后像以前那样调用 window1 （在调用之前不要忘记：您需要`using Project1;`在哪里调用 window1 以便智能感知很容易找到它你）

# latex - 带有 pdflatex 绑定的 Vim 产生不可读的输出

> ID：11581526
> 
> 赞同：0
> 
> 时间：2012-07-20T14:38:19.927
> 
> 标签：latex, vim

我的 .vimrc 中有以下行：

```
autocmd FileType tex map <C-L> :!pdflatex % &<CR> 
```

现在，绑定工作正常，但是当 vim 切换到生成 pdflatex 的输出时，它会在随机位置断行，产生不可读的输出，并且很难调试错误。有什么办法可以纠正这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:19:57.067

如果您想在 vim 会话中不显示任何内容的情况下完成此操作，您可以采用不同的方法。例如：

```
au FileType tex map <silent> <expr> <C-L> system("pdflatex ".expand("%")) 
```

见`:help <silent>`和`:help <expr>`。

当我使用`:silent !ls`屏幕闪烁并且通常需要重绘时，这是一种解决方法。

# iphone - 在 AppStore 上发布多语言 iPhone 游戏的最佳方式是什么？

> ID：11581532
> 
> 赞同：1
> 
> 时间：2012-07-20T14:38:28.877
> 
> 标签：iphone, app-store

我即将在 AppStore 上发布一款 iPhone 游戏，我想知道发布多语言游戏的最佳方式是什么……

*   我应该使用 iPhone 语言设置来相应地加载语言吗？
*   以不同的语言发布同一游戏的多个版本？
*   在游戏上设置一个更改语言的设置（或者用户不想使用这个设置......）？

任何想法、建议或最佳实践将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:42:10.880

一个应用程序。时期。

始终使用用户当前的语言环境，并为默认设置做出合理的假设，以防您缺少用户可能使用的本地化。我见过最常用的英语被用作默认值。我自己，我什至不会提供覆盖；用户已经拥有他们首选本地化的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:42:34.230

我肯定会在一个应用程序中包含所有语言。您可以将默认语言设置为用户在其手机上启用的语言，并在您的应用设置中添加一个附加选项。

# postgresql - 动态改变 PL/pgSQL RECORD 列的值

> ID：11581534
> 
> 赞同：1
> 
> 时间：2012-07-20T14:38:34.597
> 
> 标签：postgresql, plpgsql

我有一个具有双重嵌套 FOR 循环的 Postgresql PL/pgSQL 函数，我想在其中动态设置列名。但是我找不到以编程方式访问 RECORD 列的方法。

我将直接跳到一个带有一些代码的示例：

```
FOR loop_helper1 IN SELECT
  id, name1, name2, name3, nameN,
  FROM table1
  LOOP
    FOR loop_helper2 IN SELECT name FROM table2 LOOP
      -- I want to set values of columns in loop_helper1,
      -- with the column name given by loop_helper2.name
      -- An EXECUTE would not allow me to do this:
      EXECUTE 'loop_helper1.' || loop_helper2.name || ':= function_call(123);'
      -- (Eg. 'loop_helper1.name2 := function_call(123);')
      -- However, this produces: ERROR:  syntax error at or near "loop_helper1"
    END LOOP;
END LOOP; 
```

有任何想法吗？

当然必须有办法做到这一点，但我似乎无法找到它。感谢所有帮助和建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:07:13.600

我想你可能想要我们在[**这个相关问题**](https://stackoverflow.com/q/7711432/939860)下设计的功能。
使用此函数，您的代码片段可能如下所示：

```
 FOR loop_helper1 IN
    SELECT id, name1, name2, name3, nameN,
    FROM   table1
LOOP
    FOR loop_helper2 IN
        SELECT name
        FROM   table2
    LOOP
       **loop_helper1 := public.setfield (loop_helper1
                                      ,loop_helper2.name
                                      ,function_call(123));**
    END LOOP;
END LOOP; 
```

可能有更简单的方法，特别是如果你想分配一个完整的复合类型......

# macos - 如何在 Interface Builder 中对 OS X 切换按钮进行分组

> ID：11581535
> 
> 赞同：2
> 
> 时间：2012-07-20T14:38:54.587
> 
> 标签：macos, cocoa, interface-builder

在 iTunes 上，视图按钮按如下方式组合在一起：

![在此处输入图像描述](../Images/b346b7d53e67d409726504d52cc998e7.png)

我想在我的 OS X 应用程序中实现这种效果。我找不到这方面的说明或教程。我怀疑我的问题是我不知道在搜索中使用什么术语。

我有一个 NSToolBar。我可以添加一个按钮，但我不知道如何对多个按钮进行分组并使它们依赖于彼此的切换状态。

你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:44:51.783

那是一个分段控制。(NSSegmentedControl)

只需将它从对象库拖到工具栏中，然后您就可以单独配置每个单元格。

# php - OOP 内聚/耦合混淆

> ID：11581538
> 
> 赞同：2
> 
> 时间：2012-07-20T14:39:12.257
> 
> 标签：php, oop

我对拆分对象的正确方法有疑问。

假设我有两个对象，例如工具和技术。一个技术可以有多个与之关联的工具对象，但它是否被认为是低内聚/紧密耦合让技术直接了解一个工具？让 Technology 对象包含一组 Tool 对象是不好的做法，还是应该有某种第三类将它们联系在一起？

```
Tool
private id;
private title;

Technology
private id;
private title;
private tools; 
```

您能否提供一个简单的概述，说明如何最好地将这些对象相互关联？乍一看，这对我来说似乎没问题，但是技术对象具有用于添加工具的 getter/setter 方法真的合适吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:47:54.750

如果`Technology`需要`Tool`对象，保留它们并没有错。

如果`Tool`s 与`Technology`对象状态相关，那么它应该将它们包含在其中。

相关可能的方法：

```
public addTool(Tool $tool);
public removeTool(Tool $tool);
public removeToolByIndex($index);
public getToolFromIndex($index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:50:05.217

我绝不是 OOP 方面的专家，但我会说这取决于您的领域。如果您的领域正在处理技术而反过来处理工具，那么我会说在技术中拥有一个工具阵列是可以的。我要做的是让每个工具对象都符合相同的接口，这样任何技术都可以拥有任何工具。

此外，根据我所学到的，我认为当你跨越层（域、持久性、服务层......）时，解耦很重要。所以一个层不应该依赖于另一个层，但是你的领域对象可以相互依赖。

如果您正在对一个实体依赖于另一个实体的域进行建模，那么对象也将相互依赖（如果一项技术没有工具就毫无用处，那么它就依赖于它们）。以常见的 Car/Wheel/Driver 为例，在现实世界中，汽车同时依赖于车轮和驾驶员，因此对象也会如此，因为如果它们丢失了，它就完全没用了。

我希望这是有道理的，如果我弄错了，那么我也会从别人那里学到一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T07:49:26.900

您给出的示例是多对多关联，因此最好使用 3d 对象来表示关联。如果它在路上（一对多），那么你提到的简单组合就可以了。

下面是示例代码，可以在代码 1 中进行一些改进。为工具和技术实现 getter setter 并将变量设为私有。2\. 直接为工具和技术使用接口而不是类。3.在pair类中使用2个不同的索引（数组）来提高get函数的性能，如果不关心性能，那么你可以只使用一个数组。

```
<?php
class Technology{
    public  $id;
    public  $title;

    public function __construct($id, $title){
        $this->id = $id;
        $this->title = $title;
    }
}

class Tool{
    public $id;
    public $title;

    public function __construct($id, $title){
        $this->id = $id;
        $this->title = $title;
    }
}

class TechnologyToolPair{
    private $techIndex = array();
    private $toolIndex = array();

    //Index by id, you can replace title if u maily search by title
    public function addPair($tech, $tool){
        $this->techIndex[$tech->id]['technology'] = $tech;
        $this->techIndex[$tech->id]['tool'][] = $tool;

        $this->toolIndex[$tool->id]['tool'] = $tool;
        $this->toolIndex[$tool->id]['technology'][] = $tech;
    }

    public function getByTechnologyId($id){
        return $this->techIndex[$id];
    }

    public function getByToolId($id){
        return $this->toolIndex[$id];
    }

    public function getByTechnologyName($name){
        foreach($this->techIndex as $index => $value){
            if(!strcmp($name, $value['technology']->title)){
                return $value;
            }
        }
    }
}

$tech1 = new Technology(1, 'php');
$tech2 = new Technology(2, 'java');

$tool1 = new Tool(1, 'eclipse');
$tool2 = new Tool(2, 'apache');
$tool3 = new Tool(3, 'tomcat');

$pair = new TechnologyToolPair();
$pair->addPair($tech1, $tool1);
$pair->addPair($tech1, $tool2);
$pair->addPair($tech2, $tool1);
$pair->addPair($tech2, $tool3);

var_dump($pair->getByToolId(1));
var_dump($pair->getByTechnologyId(2));
var_dump($pair->getByTechnologyName('java')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T15:11:29.773

您应该查看工具和技术之间的行为和交互，而不仅仅是数据。这决定了如何在 OOP 中建模。您目前正在做数据建模，而面向对象应该提供更好的模块化。您可能希望通过测试来驱动设计，展示它们的使用方式。

# javascript - 在页面之间传递 javascript 变量

> ID：11581543
> 
> 赞同：6
> 
> 时间：2012-07-20T14:39:20.837
> 
> 标签：javascript, html, forms

> **可能重复：**
> [跨页面保留 javascript 变量？](https://stackoverflow.com/questions/1981673/persist-javascript-variables-across-pages)
> [如何在两个html页面之间交换变量](https://stackoverflow.com/questions/3724106/how-to-exchange-variables-between-two-html-pages)

我正在创建一个“测验”，允许用户回答问题，然后将他们的答案和当前分数传递到下一个问题的下一页。我使用了这篇文章，并且能够让用户的答案传递到下一个窗口：

[http://www.htmlgoodies.com/beyond/javascript/article.php/3471111/A-Quick-Tutorial-on-JavaScript-Variable-Passing.htm](http://www.htmlgoodies.com/beyond/javascript/article.php/3471111/A-Quick-Tutorial-on-JavaScript-Variable-Passing.htm)

问题是这会通过表单传递信息。一旦我在第二页收到分数，如果答案正确，我需要增加分数。我不知道如何使用 html 表单传递 javascript 变量。

我觉得这应该是一个相对容易解决的问题，我只是难住了。

任何想法或建议将不胜感激！xoxo

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:42:04.860

有两种明显的方法可以在浏览器中维护状态，而无需服务器在页面之间记住它：

1.  饼干

2.  [`localStorage`](https://developer.mozilla.org/en/DOM/Storage)

后者实现起来很简单，但仅在 HTML5 中可用。

请注意，两者都不是*安全*的 - 一个确定的页面黑客可以将任何一个设置为他们想要的任何值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:47:27.487

您可以使用 get 方法提交表单，`<form method="get"`然后使用 javascript 解析 url 中的参数。[参考](https://www.google.com.kh/search?q=javascript%20html%20params&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)这里：

# php - 将 rel="nofollow" 添加到 joomla 菜单项

> ID：11581544
> 
> 赞同：1
> 
> 时间：2012-07-20T14:39:22.310
> 
> 标签：php, joomla, joomla2.5, nofollow

我想添加`rel="nofollow"`到 joomla 菜单项上的链接。此选项在管理后端不可用。机器人将属性“nofollow”添加到该菜单项上的页面元数据，而不是实际链接。任何帮助，将不胜感激。

我正在使用 joomla 2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:39:07.750

您实际上不需要向菜单项添加任何参数，您可以通过覆盖菜单模块来完成此操作。在菜单模块中，检查 robots 参数的值，然后将适当的 rel 添加到它创建的链接中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:03:08.197

您必须覆盖显示菜单项的方法。在网站上有很多关于此的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:06:36.753

试试这些链接：

[http://forum.joomla.org/viewtopic.php?t=470383](http://forum.joomla.org/viewtopic.php?t=470383)

[http://extensions.joomla.org/extensions/structure-a-navigation/site-links/8733](http://extensions.joomla.org/extensions/structure-a-navigation/site-links/8733)

# python - 强制 python 子类初始化使用子类变量，而不是父类

> ID：11581546
> 
> 赞同：4
> 
> 时间：2012-07-20T14:39:41.563
> 
> 标签：python

在以下代码中：

```
class A(object):
  VALUE = 1
  def __init__(self, value=VALUE):
    self.value = value

class B(A):
  VALUE = 2 
```

我希望 B().value 应该等于 2，但是：

```
B().value = 1 
```

有没有一种优雅的方式来定义一个类层次结构，其中子类可以只声明他们想要覆盖的类变量并将它们作为实例变量的默认值？我仍然希望允许在每个实例级别上更改这些，例如。

```
b = B(value=3) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T14:43:35.653

这是另一个[默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)问题。关键是当你写

```
def foo(value=VALUE): 
```

函数内部的代码被编译并制成函数对象。是在*这个*时候——不是在通话时间！-- 存储默认参数。所以当你定义的时候已经`B`太晚了：默认值`foo`已经设置好了，改变`VALUE`不会有任何效果。

如果这看起来很奇怪，那么假设`foo`是一个全局函数：

```
default = 3
def foo(x=default): pass 
```

`foo`然后任何其他代码，任何地方，都可能搞砸

```
global default
default = 4 
```

这可以说同样令人困惑。

* * *

要强制在运行时而不是编译时进行查找，您需要将它们*放在*函数中：

```
def foo(value=None):
    self.value = self.VALUE if value is None else value 
```

或（不完全相同但更漂亮）

```
self.value = value or self.VALUE 
```

（这是不同的，因为它将*任何*'falsy' 值视为哨兵——也就是说，`0`,`[]`等都`{}`将被 覆盖`VALUE`。）

* * *

编辑：@mgilson 指出了另一种方法：

```
def foo(**kwargs):
    self.value = kwargs.get("value", self.VALUE) 
```

这更简洁，因为它不需要您创建标记值（例如`None`or `object()`，但它确实从根本上改变了参数规范，`foo`因为现在它将接受*任意*关键字参数。您的电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:59:12.717

默认值不应该在func声明行中定义，否则，当python读取这一行时，默认值会被聚焦，以后无论你改变VALUE，默认值都不会改变。

你可以这样写：

```
class A:
    VALUE = 1
    def __init__(self, value=None):
        if value is None:
            value = self.VALUE
        self.value = value

class B(A):
    VALUE = 2

print(A().value)
print(B().value) 
```

# c# - 读取 xml 文件以保存新按钮，然后从该 xml 读取以在程序重新加载时显示新按钮

> ID：11581553
> 
> 赞同：0
> 
> 时间：2012-07-20T14:40:05.757
> 
> 标签：c#, xml, visual-studio-2010, flowlayoutpanel

在我的程序中，我从一开始就有八个按钮（每个按钮都代表房子里的一盏灯）。用户可以在程序中添加一个新按钮（灯）。我在 FlowLayoutPanel(FLP) 中有这些，每次程序关闭时都会保存表单的当前状态，包括 FLP 的位置、其高度和宽度以及按钮的当前信息（包括它们的名称、文本、颜色等）到一个 XML 文件。

如果 FLP 的位置或大小发生变化，当程序重新加载时，它们将被更新，就像您想的那样，如果按钮发生了变化，那么它们将被更新。但是，除了我提供的默认八个按钮之外，如果用户添加一个或几个新按钮，那么它们会保存到 xml 文件中，但程序会重新加载，从该 xml 读取，这些新按钮将被丢弃。

对此有任何想法。

当前代码：读取 XML 文件（来自另一个 .cs 文件）

```
if (roomCtrl is Button)

{

xmlSerialisedForm.WriteElementString("Text", ((Button)roomCtrl).Text);
xmlSerialisedForm.WriteElementString("Backcolor",((Button)roomCtrl).BackColor.ToString());

}

if (roomCtrl is FlowLayoutPanel)
{
xmlSerialisedForm.WriteElementString("Width", ((FlowLayoutPanel)roomCtrl).Size.Width.ToString());     
xmlSerialisedForm.WriteElementString("Height",   ((FlowLayoutPanel)roomCtrl).Size.Height.ToString());

xmlSerialisedForm.WriteElementString("X", ((FlowLayoutPanel)roomCtrl).Location.X.ToString());
 xmlSerialisedForm.WriteElementString("Y",((FlowLayoutPanel)roomCtrl).Location.Y.ToString());

} 
```

当前代码：从 XML 文件中读取（这是来自另一个 .cs 文件）

```
case "System.Windows.Forms.Button":
if (n["Backcolor"].InnerText == "Color [LawnGreen]")
{
((System.Windows.Forms.Button)ctrlToSet).BackColor = System.Drawing.Color.LawnGreen;
}
else if (n["Backcolor"].InnerText == "Color [Tomato]")
{
((System.Windows.Forms.Button)ctrlToSet).BackColor = System.Drawing.Color.Tomato;
}
break;

case "System.Windows.Forms.FlowLayoutPanel":
((System.Windows.Forms.FlowLayoutPanel)ctrlToSet).Size = new System.Drawing.Size(Convert.ToInt32(n["Width"].InnerText), Convert.ToInt32(n["Height"].InnerText));

((System.Windows.Forms.FlowLayoutPanel)ctrlToSet).Location = new System.Drawing.Point(Convert.ToInt32(n["X"].InnerText), Convert.ToInt32(n["Y"].InnerText));

if (controlType == "System.Windows.Forms.Button")
{
Button b = new Button();
b.Name = controlName;
b.Text = n["Text"].InnerText;
if (n["Backcolor"].InnerText == "Color [LawnGreen]")
{
((System.Windows.Forms.Button)ctrlToSet).BackColor = System.Drawing.Color.LawnGreen;

{
((System.Windows.Forms.Button)ctrlToSet).BackColor = System.Drawing.Color.Tomato;
}
FlowLayoutPanel flpSockets = (FlowLayoutPanel)ctrlToSet;
flpSockets.Controls.Add(b);
}
break; 
```

我想我在读取 FLP 的 xml 文件时遗漏了一些东西，但不确定。

添加按钮的代码（来自另一个表单）

```
private void button2_Click(object sender, EventArgs e)
{
if (rt.roomBool == true)
{
socket = new Button();
socket.Name = "btn"+txtSocketName.Text;
socket.Text = txtSocketName.Text;
socket.Size = new System.Drawing.Size(70, 60);
socket.BackColor = Color.LawnGreen;
rt.flpSockets.Controls.AddRange(new System.Windows.Forms.Control[] { this.socket });

rt.flpSockets.Height = 199;
rt.flpSockets.Location = new System.Drawing.Point((rt.flpSockets.Location.X), 20);

rt.Show(); 
} 
```

从 xml 文件目标读取的代码

```
FormSerialisor.Serialise(this, Application.StartupPath + @"\roomTemplate.xml"); 
```

# php - PHP：解码 Html 实体

> ID：11581555
> 
> 赞同：6
> 
> 时间：2012-07-20T14:40:14.863
> 
> 标签：php, html-entities

我想使用 php html_entity_decode() 解码 html 实体，但我的 html 实体似乎与该函数不兼容。

```
Example Input String: html_entity_decode('&amp;lt;strong&amp;gt;');
Outputs: &lt;strong&gt; 
```

删除`'amp;'`解决了问题并产生了，`<strong>`但我的文件`'amp;'`在每个 html 实体之前都有。大规模删除`amp;`可能会解决问题，但对 html 也非常具有破坏性。是否可以在所有实体之前以这种额外的情况转换我的`amp;`实体？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T14:40:43.630

它是双重编码的 - 将字符串运行[`html_entity_decode()`](http://php.net/html_entity_decode)两次。

```
echo html_entity_decode( html_entity_decode('&amp;lt;strong&amp;gt;')); 
```

这[将输出](http://viper-7.com/of9gyV)：

```
<strong> 
```

# ios - ios 如何正确使用 NSPredicate 与 Core Data 匹配 NSString？

> ID：11581566
> 
> 赞同：0
> 
> 时间：2012-07-20T14:40:44.160
> 
> 标签：ios, core-data, nsstring, match, nspredicate

我正在尝试使用以下代码将实体插入或更新（如果存在）到核心数据中：

```
- (void)insertFriendWithDictionary:(NSDictionary *)friendInfo {

    NSFetchRequest *req = [[NSFetchRequest alloc] initWithEntityName:@"Friend"];

    NSString *atributeName = @"identifier";
    NSString *valueName = [[friendInfo objectForKey:@"id"] stringFromMD5];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K like %@",atributeName,valueName ];
    req.predicate = predicate;

    req.fetchLimit = 1;
    NSError *requestError = nil;
    NSArray *tmp = [self.managedObjectContext executeFetchRequest:req error:&requestError];

    if (tmp && tmp.count >0) {
        Friend *friend = [tmp objectAtIndex:0];
        friend.name = [friendInfo objectForKey:@"name"];
        friend.identifier = [NSString stringWithFormat:@"%@",[[friendInfo objectForKey:@"id"] stringFromMD5]];
        [self saveContext];
        return;
    }   

    Friend *friend = 
    [NSEntityDescription insertNewObjectForEntityForName:@"Friend"
                                  inManagedObjectContext:self.managedObjectContext];
    friend.name = [friendInfo objectForKey:@"name"];
    friend.identifier = [friendInfo objectForKey:@"id"];
    friend.noOfMessagesReceived = [NSNumber numberWithInt:0];
    friend.email = @"";
    friend.selected = [NSNumber numberWithBool:NO];
    friend.frooiFriend = [NSNumber numberWithBool:NO];
} 
```

但是第二次运行代码时谓词不匹配任何结果。我相信这是 NSPredicate 的问题。

下面是为 Friend 生成的代码：

```
@interface Friend : NSManagedObject

@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSNumber * frooiFriend;
@property (nonatomic, retain) NSString * identifier;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSNumber * noOfMessagesReceived;
@property (nonatomic, retain) NSData * profileImage;
@property (nonatomic, retain) NSNumber * selected;
@property (nonatomic, retain) NSNumber * frooliMessagesSentTo;

@end 
```

难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:48:06.600

`[friendInfo objectForKey:@"id"]`等于`[[friendInfo objectForKey:@"id"] stringFromMD5]`? _

如果不是：这是您的问题，因为您正在设置`friend.identifier = [friendInfo objectForKey:@"id"];`一个新朋友，但您搜索朋友的谓词使用`[[friendInfo objectForKey:@"id"] stringFromMD5]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:52:34.107

尝试使用这个谓词：

```
[NSPredicate predicateWithFormat:@"%@ MATCHES[cd] '.*%@.*'",atributeName,valueName ]; 
```

这不是最好的性能，但它确实有效。之后您可以提高性能。

# android - Android绘制纹理扩展绘制白色纹理

> ID：11581567
> 
> 赞同：1
> 
> 时间：2012-07-20T14:40:49.147
> 
> 标签：android, opengl-es, textures

我开始使用 OpenGL-ES 为 Android 编写游戏，并且刚刚完成了使用 glDrawTexfOES 扩展的绘制代码。当我在模拟器上测试它时它工作正常，但在我的三星 Galaxy S2 上测试它似乎所有的纹理都是白色的。

为了确保我没有犯任何错误，我从教程中复制了源代码并以相同的结果运行它。我正在使用的教程代码可以在[这里](http://apecoder.net/2010/11/17/using-2d-opengl-on-android-part-2/)看到。

我的纹理是 .PNG 格式和 2 的幂，我从 R.drawable 文件夹加载，尽管我已经尝试了一些其他位置，例如我所看到的 drawable-nodpi。

我还检查了我读过的 glGenTextures 的结果，它可以为某些手机提供奇数值，但似乎给出了正确的值（1、2、3 ..）。

有谁知道为什么会发生这种情况或建议我可以做一些其他检查来找出问题所在？

这是我上面链接的示例代码的略微修改版本，以保持简单。

```
public void onSurfaceCreated(GL10 gl10, EGLConfig eglConfig) {

    gl10.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
    // Set the background colour to black ( rgba ).
    gl10.glClearColor(0.0f, 0.0f, 0.0f, 1);
    // Enable Flat Shading.
    gl10.glShadeModel(GL10.GL_FLAT);
    // We don't need to worry about depth testing!
    gl10.glDisable(GL10.GL_DEPTH_TEST);
    // Set OpenGL to optimise for 2D Textures
    gl10.glEnable(GL10.GL_TEXTURE_2D);
    // Disable 3D specific features.
    gl10.glDisable(GL10.GL_DITHER);
    gl10.glDisable(GL10.GL_LIGHTING);

    gl10.glTexEnvx(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_MODULATE);
    // Initial clear of the screen.
    gl10.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Test for draw texture

    // Test for device specific extensions
    String extensions = gl10.glGetString(GL10.GL_EXTENSIONS);
    boolean drawTexture = extensions.contains("draw_texture");
    Log.i("OpenGL Support - ver.:",
            gl10.glGetString(GL10.GL_VERSION) + " renderer:" +
            gl10.glGetString(GL10.GL_RENDERER) + " : " +
            (drawTexture ? "good to go!" : "forget it!!"));

    // LOAD TEXTURE

    mTextureName = new int[1];

    // Generate Texture ID
    gl10.glGenTextures(1, mTextureName, 0);
    assert gl10.glGetError() == GL10.GL_NO_ERROR;

    // Bind texture id / target (we want 2D of course)
    gl10.glBindTexture(GL10.GL_TEXTURE_2D,  mTextureName[0]);

     // Open and input stream and read the image
    InputStream is = mContext.getResources().openRawResource(R.drawable.asteroid);
    Bitmap bitmap;
    try {
        bitmap = BitmapFactory.decodeStream(is);
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // Build our crop region to be the size of the bitmap (ie full image)
    mCrop = new int[4];
    mCrop[0] = 0;
    mCrop[1] = imageHeight = bitmap.getHeight();
    mCrop[2] = imageWidth = bitmap.getWidth();
    mCrop[3] = -bitmap.getHeight();

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
    assert gl10.glGetError() == GL10.GL_NO_ERROR;

    bitmap.recycle();
}

public void onSurfaceChanged(GL10 gl10, int i, int i1) {

    gl10.glViewport(0, 0, i, i1);
    /*
     * Set our projection matrix. This doesn't have to be done each time we
     * draw, but usually a new projection needs to be set when the viewport
     * is resized.
     */
    float ratio = (float) i / i1;
    gl10.glMatrixMode(GL10.GL_PROJECTION);
    gl10.glLoadIdentity();
    gl10.glFrustumf(-ratio, ratio, -1, 1, 1, 10);
}

public void onDrawFrame(GL10 gl) {
    // Just clear the screen and depth buffer.
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Begin drawing
    //--------------
    // These function calls can be experimented with for various effects such as transparency
    // although certain functionality maybe device specific.
    gl.glShadeModel(GL10.GL_FLAT);
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glColor4x(0x10000, 0x10000, 0x10000, 0x10000);

    // Setup correct projection matrix
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glPushMatrix();
    gl.glLoadIdentity();
    gl.glOrthof(0.0f, mWidth, 0.0f, mHeight, 0.0f, 1.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glPushMatrix();
    gl.glLoadIdentity();

    gl.glEnable(GL10.GL_TEXTURE_2D);

    // Draw all Textures
    gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureName[0]);
    ((GL11)gl).glTexParameteriv(GL10.GL_TEXTURE_2D, GL11Ext.GL_TEXTURE_CROP_RECT_OES, mCrop, 0);
    ((GL11Ext)gl).glDrawTexfOES(0, 0, 0, imageWidth, imageHeight);

    // Finish drawing
    gl.glDisable(GL10.GL_BLEND);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glPopMatrix();
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:55:17.850

您是否尝试过将所有图像都放在 drawable-nodpi 上而没有其他地方？

我认为这可能并不重要，但在附加渲染之前尝试这些行。

```
 glSurfaceView.setZOrderOnTop(true);
 glSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
 glSurfaceView.getHolder().setFormat(PixelFormat.RGBA_8888); 
```

该错误可能与透明度和 PNG 格式有关。

如果它不起作用，请您粘贴与 GLSurfaceView 和 Renderer 相关的代码吗？

谢谢！

# ruby-on-rails - 为什么 Rails 会在页面上显示所有信息？

> ID：11581570
> 
> 赞同：2
> 
> 时间：2012-07-20T14:40:53.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, views

我的 rails 3.2 应用程序中有以下代码：

```
 <ul>            
          <% user_to_show.topics.each do |topic| %>
          <li> <%= link_to topic.name, topic %> 
              <ul>
                <%= topic.nodes.each do |node| %>
                  <li> <%= link_to node.title, node %> </li>
                <% end %>
              </ul>
          </li>
          <% end %>    
  </ul> 
```

当我转到用户页面时，我希望它只显示每个主题的链接以及该主题中的节点。它会这样做，但它也会在最后显示每个节点的实际数据（见下文）。怎么会，我该如何解决？

```
Sample Topic  
node1  
node2 

[#<Node id: 1, title: "node1", intro_content: "sample content", user_id: 2, date_modified: nil, created_at: "2012-07-19.." [etc..] #<Node id: 2, title: "node2", intro_content: "sample 2 content..", user_id: 2, etc.. ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T14:43:41.533

因为这条线：

```
<%= topic.nodes.each do |node| %> 
```

每个 Ruby 语句都是一个表达式。所以每个方法都会返回一些东西（即使它是 nil）。因此，如果您调用“each”，它将在循环完成后返回数组。因此，正如您使用的那样`<%=`，它将在循环结束后写入此数组。

你应该使用过：

```
<% topic.nodes.each do |node| %> 
```

# java - org.omg.CORBA.OBJECT_NOT_EXIST 尝试获取根命名上下文“NameService”时

> ID：11581572
> 
> 赞同：2
> 
> 时间：2012-07-20T14:40:57.327
> 
> 标签：java, jakarta-ee, corba, omniorb

我正在尝试创建一个使用 CORBA 进行交互的 java 客户端/服务器应用程序。我遵循[了这个示例](http://docs.oracle.com/javase/1.4.2/docs/guide/idl/GShome.html)，并能够使用“Java IDL 对象请求代理守护程序，orbd”使其工作。但是，当我将服务器更改为指向我们的本地omniNames 安装而不是orbd 时，我收到此错误：

```
C:\Hello>java HelloServer -ORBInitialPort 7000 -ORBInitialHost 192.168.1.5
ERROR: org.omg.CORBA.OBJECT_NOT_EXIST:   vmcid: OMG  minor code: 1  completed: No
org.omg.CORBA.OBJECT_NOT_EXIST:   vmcid: OMG  minor code: 1  completed: No
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:355)
        at java.lang.Class.newInstance(Class.java:308)
        at com.sun.corba.se.impl.protocol.giopmsgheaders.MessageBase.getSystemException(MessageBase.java:897)
        at com.sun.corba.se.impl.protocol.giopmsgheaders.ReplyMessage_1_0.getSystemException(ReplyMessage_1_0.java:94)
        at com.sun.corba.se.impl.protocol.CorbaMessageMediatorImpl.getSystemExceptionReply(CorbaMessageMediatorImpl.java:572)
        at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.processResponse(CorbaClientRequestDispatcherImpl.java:452)
        at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.marshalingComplete(CorbaClientRequestDispatcherImpl.java:339)
        at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.invoke(CorbaClientDelegateImpl.java:129)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(BootstrapResolverImpl.java:89)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(BootstrapResolverImpl.java:107)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:22)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(ORBImpl.java:1151)
        at HelloServer.main(HelloServer.java:51)
HelloServer Exiting ... 
```

导致错误的行：

```
org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService"); 
```

就 omniNames 服务器而言，我知道它已正确安装和配置，因为我们有无数其他应用程序已经在使用它 (c++)。我查看了这些其他应用程序的源代码，它们似乎在做同样的事情：

```
tmpRef = moOrb->resolve_initial_references("NameService"); 
```

我知道这不是网络错误，因为如果我使用错误的端口，则会出现无连接错误。我已经走到了尽头，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:15:18.897

问题最终出现在我的 java 服务器和我的 CORBA 服务器之间。我使用omniNames 作为CORBA 服务器（omniOrbs 的一部分）。显然 java 有一个非标准的引导程序，默认情况下与omniNames 不兼容。要启用对 java 引导程序的支持，omniNames 可以使用以下参数启动：

```
'-ORBsupportBootstrapAgent 1' 
```

添加后一切正常。[可以在这里阅读更多内容。](http://www.omniorb-support.com/pipermail/omniorb-list/2009-May/030095.html)

# java - 如何在 logback 中捕获 kill -3 信息

> ID：11581573
> 
> 赞同：1
> 
> 时间：2012-07-20T14:41:03.980
> 
> 标签：java, profile, monitor, logback

我们在项目中有两个日志，一个是标准输出，使用：java project.jar > output.log；另一个是logback.groovy中配置的logback。

当我使用 kill -3 捕获线程转储信息时，它们会转到 output.log。有什么方法可以将这些信息输出到 logback ？

如果我添加参数-verbose：gc，如何输出到logback？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:52:19.537

据我所知，您无法在 Java 应用程序中捕获此信息。在这两种情况下，输出都来自 JVM 本机代码库，而不是通过 Java IO 库。

# sql - SSRS 报告错误：XML 解析错误：未找到元素位置：http://report_name

> ID：11581577
> 
> 赞同：1
> 
> 时间：2012-07-20T14:41:16.807
> 
> 标签：sql, reporting-services, ssrs-2008

我进入`XML parse error`它`SSRS reports`之前工作正常

> SSRS 报告错误：XML 解析错误：未找到元素位置：`http://report_name`

为什么这么猜测我需要在哪里进行更改或查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:46:36.770

解决方法：运行 SSRS Manager 并将此文件夹绑定到特定主机和/或 IP 地址。

# sql - Ruby DataMapper - 串行列生成空错误？

> ID：11581584
> 
> 赞同：0
> 
> 时间：2012-07-20T14:41:56.320
> 
> 标签：sql, ruby, sqlite, sinatra, datamapper

在将我的一些配置移动到我构建的测试应用程序的数据库中的过程中，我遇到了一个非常奇怪的问题。每当我尝试在表中创建新记录时都会生成错误。该错误表示由于 ID 列（模型中的 DataMapper Serial）为空，SQL 查询失败。此表的架构和用于创建新行的代码在我所做的更改中没有被修改。

```
sinatra.error   
#<DataObjects::IntegrityError: transactions.id may not be NULL (code: 19, sql state: , query: INSERT INTO "transactions" ("uuid", "oid", "store", "txndatetime", "chargetotal") VALUES ('...', '', '...', '...', '...') 
```

用于创建行的 ruby​​ 语句：

```
txn = Transaction.create(:uuid => @uuid, :txndatetime => @timestr, :store => store, :chargetotal => params[:subtotal], :oid => params[:oid]) 
```

表的型号：

```
class Transaction
  include DataMapper::Resource

  property :id,             Serial
  property :uuid,           String,   :key => true
  property :oid,            String
  property :store,          String
  property :txndatetime,    String
  property :status,         String
  property :refnumber,      String
  property :chargetotal,    String
  property :response_hash,  String,   :length => 255
  property :approval_code,  String
  property :tdate,          String

  validates_presence_of :uuid, :store
  validates_uniqueness_of :uuid
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:57:47.550

终于想通了。DataMapper 自动升级！破坏了 sqlite 数据库中的模式。删除表并重新生成它可以解决问题。

Schema 以前看起来像这样：

```
CREATE TABLE `transactions` (`id` integer NOT NULL, `uuid` varchar(50) NOT NULL, `oid` varchar(50), `store` varchar(50), `txndatetime` varchar(50), `status` varchar(50), `refnumber` varchar(50), `chargetotal` varchar(50), `response_hash` varchar(255), `approval_code` varchar(50), `tdate` varchar(50), `cc_num` varchar(50), `cc_expm` varchar(50), `cc_expy` varchar(50), PRIMARY KEY (`id`, `uuid`)); 
```

现在看起来像这样：

```
CREATE TABLE "transactions" ("id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, "uuid" VARCHAR(50) NOT NULL, "oid" VARCHAR(50), "store" VARCHAR(50), "txndatetime" VARCHAR(50), "status" VARCHAR(50), "refnumber" VARCHAR(50), "chargetotal" VARCHAR(50), "response_hash" VARCHAR(255), "approval_code" VARCHAR(50), "tdate" VARCHAR(50), "cc_num" VARCHAR(50), "cc_expm" VARCHAR(50), "cc_expy" VARCHAR(50)); 
```

缺少的 AUTOINCREMENT 似乎是这里的罪魁祸首。

# regex - 删除空格：Unicode 属性 - 字符类

> ID：11581590
> 
> 赞同：4
> 
> 时间：2012-07-20T14:42:33.143
> 
> 标签：regex, perl

这两个替换总是产生相同的结果吗？

```
$data =~ s/\p{Space}//g;

$data =~ s/[\h\v]//g; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:50:49.007

是的。

```
$ diff -U0 \
      <( unichars -au '\p{Space}' ) \
      <( unichars -au '[\h\v]'    ) \
   && echo No differences
No differences 
```

对比

```
$ diff -U0 \
      <( unichars -au '\p{Space}' ) \
      <( unichars -au '\s'        ) \
   && echo No differences
--- /dev/fd/63  2012-07-20 11:28:33.356934588 -0400
+++ /dev/fd/62  2012-07-20 11:28:33.356934588 -0400
@@ -3 +2,0 @@
- ---- U+0000B LINE TABULATION 
```

`\s`不过，可能很快就会开始包括 U+000B。

`unichars`由[Unicode::Tussle](http://search.cpan.org/perldoc?Unicode%3a%3aTussle)安装。

* * *

注意：如果没有`/u`or `use 5.012;`，`\s`有时与 NBSP 不匹配。

* * *

我刚刚在 Perl (5.16.0) 中发现了一个错误。立即报告。

```
$ perl -le'print "\xA0" =~ /\p{Space}/ ?1:0'
1

$ perl -le'print "\xA0" =~ /\s/ ?1:0'
0

$ perl -le'print "\xA0" =~ /\s/u ?1:0'
1
                                         __
$ perl -le'print "\xA0" =~ /\h/ ?1:0'      \
1                                           \
                                             > huh??
$ perl -le'print "\xA0" =~ /[\h]/ ?1:0'     /
0                                        __/

$ perl -le'print "\xA0" =~ /[\h]/u ?1:0'
1 
```

所以这意味着，不，`\p{Space}`并且只有在使用or`[\h\v]`时才等效。`/u``use 5.012;`

[票#114220](https://rt.perl.org/rt3/Ticket/Display.html?id=114220)

地位：

*   `/\h/`相当于`/[\h]/`5.10、5.12、5.14 和 5.18
*   `/\h/`不等于`/[\h]/`5.16.0
*   不知道 5.16.1

# asp.net - 检查当前用户是否有权访问指定的 MVC 路径

> ID：11581602
> 
> 赞同：0
> 
> 时间：2012-07-20T14:43:32.467
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

我需要扩展 asp:Menu 以支持链接到 MVC 路由（我的项目混合了 MVC 和非 MVC 页面）。我的菜单是使用自定义类生成的，该类根据用户对其引用的文件的权限确定是否应向用户显示节点。

MVC 页面使用 AuthorizeAttribute 进行限制。避免嘲笑（如果可能的话）我想

1.  确定路径是指 MVC 页面还是标准页面
2.  如果是MVC，判断用户是否有权限访问它

这是我在菜单生成类中的方法签名：

```
Private Function CanAccessPage(path As String) As Boolean 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:57:26.247

这是我用于此的算法，

1.  基于@SLaks answer [here](https://stackoverflow.com/questions/4882324/how-can-i-check-if-a-route-asp-net-mvc-exists-for-a-given-path)，我能够确定路径是否引用了 MVC 路由。
2.  如果是 MVC，我获取了控制器类型（这需要知道我的控制器所在的命名空间）
3.  通过 controllerType.GetMethods(actionMethodName) 获取操作方法（如果您有多个具有相同名称的方法，则必须选择链接所指的方法。可能是具有 HttpGet 属性的方法）。
4.  使用 actionMethodInfo.GetCustomAttributes(GetType(AuthorizationAttribute), False) 来获取指定操作的所有授权过滤器的集合
5.  使用我在步骤 1 中为每个属性构建的虚假上下文信息调用 OnAuthorization。
6.  检查 TypeOf filterContext.Result 是否为 HttpUnauthorizedResult 并相应返回

# javascript - 智能地增加/减少值

> ID：11581608
> 
> 赞同：0
> 
> 时间：2012-07-20T14:43:59.847
> 
> 标签：javascript, html

**背景** 我有一个 PHP 从我的数据库生成的表单。该页面是晚宴活动的座位注册。每个 [晚餐] 餐桌都会收到一定数量的招待会门票。例如，一张 10 个座位的桌子，可能有 7 张晚宴门票和 3 张主席招待会门票。

每行都有一个前缀值，它将前缀存储在一个数组中，我循环通过该数组来获取我的值。看起来像：

```
<select name='prefix[]'  onchange='prefixCheck(this.value)' >
    <option value=''>Select</option>
    <option value='Mr.'selected >Mr.</option>
    <option value='Ms.' >Ms.</option>
    <option value='Dr.' >Dr.</option>
    <option value='Sen.' >Sen.</option>
    <option value='Sec.' >Sec.</option>
    <option value='Rep.' >Rep.</option>
</select> 
```

`prefix[]`我的表单上会有不同数量的这些字段。我的页面顶部还有一个计数器，显示一张桌子目前有多少张联欢晚会和主席招待会门票：

```
<td align = left>
    Total Gala Reception Tickets Available:
</td>
<td align = center>
    <input  type='text' size='2' id='gala' name='gala' value=7 style='background-color:#C8C8C8  '>
    <input  type='hidden' size='2' id='gala_orig' name='gala' value=7 >
</td>
 </tr>
 <tr>
    <td align = left>
        Total Chairman's Reception Tickets Available
    </td>
    <td align = center>
        <input type='text' id='chairman' name='chairman' size='2' value=3 style='background-color:#C8C8C8  '>
        <input type='hidden' id='chairman_orig' name='chairman' size='2' value=3 >
    </td>
 </tr> 
```

**目标**`Sen.`, `Sec.`, 的前缀值`Rep.`是特殊的，这意味着如果用户为每个座位选择其中任何一个，我`gala`想要减少的计数和`chairman`增加的数字。我有这个 javascript 函数，但我似乎是一个关键部分。如果用户选择`Sen.`，则动作发生，但如果他们选择另一个限定前缀，则动作再次发生；减少晚会，增加椅子。

```
function prefixCheck(v){
                gala_limit = document.getElementById('gala').value;
                chair_limit = document.getElementById('chairman').value;

                if(v == 'Sec.' || v == 'Sen.' || v == 'Rep.'){
                    gala_limit--;
                    chair_limit++;

                    document.getElementById('gala').value = gala_limit;
                    document.getElementById('chairman').value = chair_limit;
                }
                else{
                    document.getElementById('gala').value = document.getElementById('gala_orig').value;
                    document.getElementById('chairman').value = document.getElementById('chair_orig').value
                }

            } 
```

我不想改变`prefix`数组的对象结构。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:54:08.337

您的`prefixCheck`函数没有足够的信息来执行此操作。

至关重要的是，如果当前`chair_limit`计数大于零，那是因为当前的一位或多位客人有资格获得主席的接待。Thus when a prefix is selected, you should only increase the `chair_limit`if the prefix qualifies **and** if their previous prefix *didn't* qualify. 正如您非常正确地指出的那样，从 切换`Sen.`到`Sec.`不应该改变任何一个计数。

然而，该`prefixCheck`功能目前没有足够的信息来进行这种区分。如果将新值*和*旧值都作为参数传入，它将能够正确执行计算。

（并且不要忘记实现硬币的另一面 - 也就是说，如果有人从 eg 切换到，则*减少* `chair_limit`和增加）`gala_limit``Sec.``Mr.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:13:11.630

您没有做的是跟踪可能已选择的先前值。您的代码可以很容易地更改为这样做，但是：

1.  更改`'prefixCheck(this.value)`为`'prefixCheck(this)`传递对元素本身的引用。

2.  稍微改变你的功能：

* * *

```
function prefixCheck(v)
{//v is now a reference to the changed elem:
    var wasSpecial = elem.oldValue || '';//if nothing was selected, it wasn't a special guest before
    //don't use globals, use var inside functions
    var gala_limit = document.getElementById('gala').value;
    var chair_limit = document.getElementById('chairman').value;
    if(v.value == 'Sec.' || v.value == 'Sen.' || v.value == 'Rep.')
    {
        if (wasSpecial === '')
        {
            gala_limit--;
            chair_limit++;
            if (gala_limit < 0)
            {
                alert ('No room for you '+ v.value);
            }
        }
        document.getElementById('gala').value = gala_limit;
        document.getElementById('chairman').value = chair_limit;
        v.oldValue = 'yes';//set some oldValue property, to mark that this element has been set to a special guest value
    }
    else
    {
        if (wasSpecial !== '')
        {
            document.getElementById('gala').value = ++gala_limit;
            document.getElementById('chairman').value = --chair_limit;
        }
        if (chair_limit < 0)
        {
            alert('erm... no more chairs?');
        }
        v.oldValue = '';//always set your oldValue to mark a non special value was selected
        //I see no real reason why you should reset your counters here, but you can
        //Though I'd suggest just setting the #gala and #chairman elements when the page loads and keep using the values herein.
        //document.getElementById('gala').value = document.getElementById('gala_orig').value;
        //document.getElementById('chairman').value = document.getElementById('chair_orig').value
    }
} 
```

您还可以将事件本身传递给函数：`prefixCheck(this,event)`而不是警报，而是捕获它（`e.preventDefault()`或`e.returnValue = false`）。
另一件事：而不是`if ((v.value === 'Sen.'....`正则表达式`v.value.match(/^[SR]e[cnp]\.$/`甚至更好：`if (v.value.charAt(1) === 'e'`也可以正常工作并且更具可读性...

虽然我不确定这是否能回答你的问题，但我希望它至少有一些用处。

# php - 从 php 运行 shell 命令

> ID：11581609
> 
> 赞同：1
> 
> 时间：2012-07-20T14:44:02.610
> 
> 标签：php, shell

下面的命令是一个适用于我的 shell 命令。

`php -f /home3/kintest2/www/project/keygen_msql_adjuster.php`

我想做的是让这个命令从一个 php 文件运行。

欢迎任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:47:05.463

您可以使用[反引号](http://php.net/manual/en/language.operators.execution.php)或[system](http://php.net/manual/en/function.system.php)或[shell_exec](http://php.net/manual/en/function.shell-exec.php)或[popen](http://php.net/manual/en/function.popen.php)，具体取决于您要对启动的进程执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:48:47.403

有什么问题：

```
include('/home3/kintest2/www/project/keygen_msql_adjuster.php'); 
```

或者有什么特别的原因要启动一个全新的 PHP 解释器实例？

我注意到*不*使用的一个很好的理由`include`是因为其中声明的任何内容都会污染您当前实例的命名空间。

另一方面，打电话`shell_exec`或类似的事情可能是一个*巨大的*安全漏洞。但是，如果您的代码在受限环境中运行，那可能并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T20:09:03.870

你也可以考虑使用一个命令运行库来正确处理错误和事情： [https ://github.com/kamermans/command](https://github.com/kamermans/command)

然后你可以像这样运行程序：

```
use kamermans\Command\Command;
$cmd = Command::factory('php')
    ->option('-f', 'keygen_msql_adjuster.php')
    ->setDirectory('/home3/kintest2/www/project')
    ->run(); 
```

或者，更简单地说：

```
use kamermans\Command\Command;
$cmd = Command::factory('php -f /home3/kintest2/www/project/keygen_msql_adjuster.php'); 
```

与 PHP 的内置方法不同，如果命令失败，此方法将抛出 PHP 异常，如果需要，您可以捕获并处理：

```
use kamermans\Command\Command;
use kamermans\Command\CommandException;

$cmd = Command::factory('php')
    ->option('-f', 'keygen_msql_adjuster.php')
    ->setDirectory('/home3/kintest2/www/project');

try {
    $cmd->run();
} catch (CommandException $e) {
    die("The command failed: ".$e->getMessage()."\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:46:48.493

我想你正在寻找[`shell_exec`](http://php.net/manual/en/function.shell-exec.php)：

```
echo shell_exec ( "php -f /home3/kintest2/www/project/keygen_msql_adjuster.php" ); 
```

# requirejs - 使用 RequireJs 按特定顺序加载文件

> ID：11581611
> 
> 赞同：23
> 
> 时间：2012-07-20T14:44:10.983
> 
> 标签：requirejs

我是 RequireJS 的新手，我坚持加载顺序。

我有一个全局项目配置，需要在 js/app/* 中的模块之前加载它。

这是我的结构：

```
index.html
config.js
js/
    require.js
    app/
        login.js
    lib/
        bootstrap-2.0.4.min.js 
```

这是 config.js 文件：

```
var Project = {
    'server': {
        'host': '127.0.0.1',
        'port': 8080
    },
    'history': 10,      // Number of query kept in the local storage history
    'lang': 'en',       // For future use
}; 
```

这是我的requirejs文件（app.js）：

```
requirejs.config({
    //By default load any module IDs from js/lib
    baseUrl: 'js/lib',
    //except, if the module ID starts with "app",
    //load it from the js/app directory. paths
    //config is relative to the baseUrl, and
    //never includes a ".js" extension since
    //the paths config could be for a directory.
    paths: {
        bootstrap: '../lib/bootstrap-2.0.4.min',
        app: '../app',
    },
    shim: {
        'app': {
            deps: ['../../config'],
            exports: function (a) {
                console.log ('loaded!');
                console.log (a);
            }
        } // Skual Config
    },
});

var modules = [];
modules.push('jquery');
modules.push('bootstrap');
modules.push('app/login');

// Start the main app logic.
requirejs(modules, function ($) {}); 
```

但有时，当我加载页面时，我有一个“项目”未定义，因为 login.js 已在 config.js 之前加载。

无论如何，我如何强制首先加载 config.js？

注意：我看到 order.js 是 RequireJS 的插件，但它显然从 v2 开始就不受支持，由`shim`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-03T15:42:09.993

今天遇到了一个类似的问题——我们有引导数据，我们希望确保在其他任何东西之前加载，并且在评估任何其他模块之前设置暴露该数据的模块。

我发现强制加载顺序的最简单解决方案是在继续应用程序初始化之前简单地要求加载模块：

```
require(["bootstrapped-data-setup", "some-other-init-code"], function(){
    require(["main-app-initializer"]);
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-27T08:57:15.527

有一种可能的解决方案可以为要加载的模块构建队列。在这种情况下，所有模块将按确切顺序一个接一个地加载：

```
var requireQueue = function(modules, callback) {
  function load(queue, results) {
    if (queue.length) {
      require([queue.shift()], function(result) {
        results.push(result);
        load(queue, results);
      });
    } else {
      callback.apply(null, results);
    }
  }

  load(modules, []);
};

requireQueue([
  'app',
  'apps/home/initialize',
  'apps/entities/initialize',
  'apps/cti/initialize'
], function(App) {
  App.start();
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-28T17:23:50.020

如果将 js 文件定义为 AMD 模块，则不必担心加载顺序。（或者，如果您不能修改`config.js`and`login.js`来调用，您可以使用 shim 配置`define`）。

config.js 应该看起来像这样：

```
define({project: {
    'server': {
        'host': '127.0.0.1',
        'port': 8080
    },
    'history': 10,      // Number of query kept in the local storage history
    'lang': 'en',       // For future use
}}); 
```

登录.js：

```
define(['jquery', '../../config'], function($, config) {

    // here, config will be loaded
    console.log(config.project)

}); 
```

`define()`同样，仅当无法在模块内部调用时才应使用 shim 配置。

# jenkins - 通过使用变量来调用 jenkins 作业以构建名称

> ID：11581620
> 
> 赞同：3
> 
> 时间：2012-07-20T14:44:52.920
> 
> 标签：jenkins, start-job

我尝试从参数化触发器启动作业，并从给定变量计算名称。是否可以在字段中设置：构建触发器项目以构建像这样的值 ${RELEASE}-MAIN-${PROJECT}-LOAD_START

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:06:46.500

不幸的是，构建触发器无法做到这一点。我为这个“高阶构建作业”寻找一种解决方案，它允许您使用参数化构建插件之一创建动态构建名称，但我找不到。

但是，使用[Groovy Postbuild Plugin](http://wiki.hudson-ci.org/display/HUDSON/Groovy+Postbuild+Plugin "Groovy Postbuild 插件")，您可以做很多强大的事情。下面是一个脚本，可以修改它来做你想做的事。特别是，请注意它使用`build.buildVariables.get("MY_ENV_VAR")`. 环境变量`TARGET_BUILD_JOB`指定要构建的构建作业的名称。在您的情况下，您可能希望`TARGET_BUILD_JOB`使用这两个环境变量进行构建：

```
build.buildVariables.get("RELEASE")
build.buildVariables.get("PROJECT") 
```

该脚本已被注释，因此如果您不熟悉基于 Java 的 Groovy，那么它应该是有意义的！

```
import hudson.model.*
import hudson.model.queue.*
import hudson.model.labels.*
import org.jvnet.jenkins.plugins.nodelabelparameter.*

def failBuild(msg)
{
     throw new RuntimeException("[GROOVY] User message, exiting with error: " + msg)
}

// Get the current build job
def thr = Thread.currentThread()
def build = thr?.executable

// Get the parameters for the current build job
// For ?:, see "Elvis Operator" (http://groovy.codehaus.org/Operators#Operators-ElvisOperator)
def currentParameters = build.getAction(ParametersAction.class)?.getParameters() ?: 
    failBuild("There are no parameters to pass down.")

def nodeName = build.getBuiltOnStr()
def newParameters = new ArrayList(currentParameters); newParameters << new NodeParameterValue("param_NODE", 
    "Target node -- the node of the previous job", nodeName)

// Retrieve information about the target build job
def targetJobName = build.buildVariables.get("TARGET_BUILD_JOB")
def targetJobObject = Hudson.instance.getItem(targetJobName) ?: 
    failBuild("Could not find a build job with the name $targetJobName. (Are you sure the spelling is correct?)")
println("$targetJobObject, $targetJobName")
def buildNumber = targetJobObject.getNextBuildNumber()

// Add information about downstream job to log
def jobUrl = targetJobObject.getAbsoluteUrl()
println("Starting downstream job $targetJobName ($jobUrl)" +  "\n")
println("======= DOWNSTREAM PARAMETERS =======")
println("$newParameters")

// Start the downstream build job if this build job was successful
boolean targetBuildQueued = targetJobObject.scheduleBuild(5,
      new Cause.UpstreamCause(build),
      new ParametersAction(newParameters)
    );

if (targetBuildQueued)
{
    println("Build started successfully")
    println("Console (wait a few seconds before clicking): $jobUrl/$buildNumber/console")
}
else
    failBuild("Could not start target build job") 
```

# codeigniter - 如何向 Phil Sturgeon 的 CodeIgniter RestServer 发送 POST 请求

> ID：11581624
> 
> 赞同：5
> 
> 时间：2012-07-20T14:45:06.520
> 
> 标签：codeigniter, rest, rest-client, http-post

我是 CodeIgniter 的新手。我正在使用 Phil Sturgeon 的 RestServer 和 RestClient。我一直试图在我的 CodeIgniter RestClient 控制器中发出 POST 请求以更新我的 CodeIgniter RestServer 中的数据，但它从不更新我的数据库中的数据。我认为我的 POST 请求不正确。

这是我在控制器中的 RestClient POST 请求：

```
$result = $this->rest->post('newscontroller/news/format/json', 
          array('news_id' => $news_id,
                'news_title' => $news_title,
                'news_category' => $news_category ),
                'json'); 

if(isset($result->status) && $result->status == 'success')  
{  
        $data['message'] ='News has been updated.';  
        $this->load->view('otherpageview',$data);
}     
else  
{  
        $data['message'] ='Something has gone wrong';  
        $this->load->view('otherpageview',$data);
} 
```

似乎**$result**没有任何价值，因为我确实回显了**$result->status**并且它没有任何内容可显示。而且我在这个控制器的构造函数中也有这个：

```
// Load the rest client spark
$this->load->spark('restclient/2.1.0');

// Load the library
$this->load->library('rest');

// Run some setup
$this->rest->initialize(array('server' => 'http://api.therestserver.com/index.php/')); 
```

在 RestServer 的控制器中，也就是**newscontroller**，有这个方法：

```
function news_post()
{
    $news=array(
        'news_id' => $this->post('news_id'),
        'news_title' => $this->post('news_title'),
        'news_category' => $this->post('news_category') );

    $result = $this->News_model->UpdateNews($news);  

    if($result === FALSE)  
    {  
        $this->response(array('status' => 'failed'));  
    }  
    else  
    {  
        $this->response(array('status' => 'success'));  
    }
} 
```

使用**News_model**：

```
public function UpdateNews($news)
{
    $this->db->where('news_id',$news->news_id);
    $this->db->update('news',$news);        
} 
```

我只是不知道我在哪里做错了，因为我仍然不明白 POST 请求和方法是如何工作的。我已经阅读了 Nettuts 中的教程并搜索了这个，但仍然......可能是因为我的英语阅读能力不好。我希望有人可以帮助我，任何帮助将不胜感激。万分感谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:12:03.113

终于解决了这个问题！我在 RESTClient 控制器中的 POST 请求是错误的。在进行了一些搜索和大量尝试/更改代码之后，此代码适用于我的 RESTClient 控制器中的 POST 请求：

```
$news_id = 12; //this is the id of the news that you want to edit

$method = 'post';
$params = array('news_id' => $news_id, 
'news_title' => $this->input->post('news_title'), 
'news_category' => $this->input->post('news_category') );
$uri = 'newscontroller/news';

$this->rest->format('application/json');

$result = $this->rest->{$method}($uri, $params);

if(isset($result->status) && $result->status == 'success')  
{  
    $data['message'] ='News has been updated.';  
    $this->load->view('otherpageview',$data);
}     
else  
{  
    $data['message'] ='Something has gone wrong';  
    $this->load->view('otherpageview',$data);
} 
```

在此[参考资料的帮助下](http://codeigniter.com/forums/viewthread/157000)

如果有人需要 RESTClient 和 RESTServer 中正确 POST 请求的示例，我会发布此内容，因为我发现很难在 Phil Sturgeon 的 RESTClient-Server*** 中寻找 POST 请求的示例。

我正在使用 ：

*   RESTServer (philsturgeon) v.2.6.0
*   RESTClient (philsturgeon) v.2.1.0
*   cURL (philsturgeon) v.1.2.1
*   CodeIgniter v.2.0.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:15:07.020

帖子的实施方式存在问题。请参阅github 上的问题和[github 上的](https://github.com/philsturgeon/codeigniter-restserver/issues/119)[另一个问题](https://github.com/philsturgeon/codeigniter-restserver/issues/91)。

您可以修补您的代码，或获取最新的源代码。

基本上你可以在 RestServer 中找到 post 函数，`application/libraries/REST_Controller.php`如果它看起来不像下面那样，那么将其更改为：

```
public function post($key = NULL, $xss_clean = TRUE)
{
    if ($key === NULL)
    {
        return $this->_post_args;
    }

    return array_key_exists($key, $this->_post_args) ? $this->_xss_clean($this->_post_args[$key], $xss_clean) : FALSE;
} 
```

# c# - HttpWebRequest 通过两个代理

> ID：11581625
> 
> 赞同：4
> 
> 时间：2012-07-20T14:45:08.743
> 
> 标签：c#, .net, proxy

我最近建立了一个网站，该网站使用地理 DNS 将 DNS 解析为两个不同的 IP，具体取决于您的位置。

但是，这意味着要监控网站，我需要确保该网站在两个地理位置都可用。为此，我在 .net 中编写了一个小程序，以不断尝试使用 HttpWebRequest 在网站上获取一个小 html 文件，一旦使用本地互联网设置并使用基于区域的代理，该代理会将名称解析为第二个 IP 地址.

这在我在家中的笔记本电脑上运行良好，但在办公室中，要在几乎所有需要通过代理的机器上连接到互联网，这意味着我之前设置的代理不再有效。

我需要做的是通过办公室代理发送请求，然后通过远程国家的代理，最后到网站。

如果这还不够清楚，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:28:05.493

首先，您需要确保两个代理都是 HTTPS 并且它们都支持 CONNECT 方法，即“代理链”。通常的 HTTP 协议的设计不提供对“代理链”的支持。这个想法是建立 2 个 CONNECT 隧道，一个在另一个内部。算法如下：

1.  通过 TCP 连接到第一个代理
2.  请求连接隧道到第二个代理
3.  创建隧道后，向目标主机请求隧道
4.  发送请求。请求将通过代理 #1 和代理 #2 到达目标主机。以下是我在我的盒子上测试过的示例代码：

    ```
    string host = "encrypted.google.com";
    string proxy2 = "213.240.237.149";//host;
    int proxyPort2 = 3128;//443;
    string proxy = "180.183.236.63";//host;
    int proxyPort = 3128;//443;

    byte[] buffer = new byte[2048];
    int bytes;

    // Connect to the 1st proxy
    TcpClient client = new TcpClient(proxy, proxyPort);
    NetworkStream stream = client.GetStream();

    // Establish tunnel to 2nd proxy
    byte[] tunnelRequest = Encoding.UTF8.GetBytes(String.Format("CONNECT {0}:{1}  HTTP/1.1\r\nHost:{0}\r\n\r\n", proxy2, proxyPort2));
    stream.Write(tunnelRequest, 0, tunnelRequest.Length);
    stream.Flush();

    // Read response to CONNECT request
    // There should be loop that reads multiple packets
    bytes = stream.Read(buffer, 0, buffer.Length);
    Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));

    // Establish tunnel to target host
    tunnelRequest = Encoding.UTF8.GetBytes(String.Format("CONNECT {0}:443  HTTP/1.1\r\nHost:{0}\r\n\r\n", host));
    stream.Write(tunnelRequest, 0, tunnelRequest.Length);
    stream.Flush();

    // Read response to CONNECT request
    // There should be loop that reads multiple packets
    bytes = stream.Read(buffer, 0, buffer.Length);
    Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));

    // Wrap into SSL stream
    SslStream sslStream2 = new SslStream(stream);
    sslStream2.AuthenticateAsClient(host);

    // Send request
    byte[] request = Encoding.UTF8.GetBytes(String.Format("GET https://{0}/  HTTP/1.1\r\nHost: {0}\r\n\r\n", host));
    sslStream2.Write(request, 0, request.Length);
    sslStream2.Flush();

    // Read response
    do
    {
        bytes = sslStream2.Read(buffer, 0, buffer.Length);
        Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));
    } while (bytes != 0);

    client.Close();
    Console.ReadKey(); 
    ```

# php - 使用jquery将记录插入mysql

> ID：11581635
> 
> 赞同：-3
> 
> 时间：2012-07-20T14:45:34.500
> 
> 标签：php, jquery

我想使用包含表单的克隆 div 使用此代码将记录插入数据库

```
$(document).ready(function() {

    $("#button").click(function() {
        $("<div class='newclone' id='xxx'><article><form method='post' id='aj'><input type='checkbox'><label>Firstname</label><input type='text' value='' name='firstname'><label>Secondname</label><input type='text' value='' name='secondname'><label>City</label><input type='text' value='' name='city'><input type='hidden' value='4'></article><input type='submit' value='insert' class='one'><button class='two'>Delete</button><button class='three'>Cancel</button></form></div>").appendTo('.clone-container');
    }); 

    $('.one').click(function() {
        $.ajax({
            type: "POST",
            url: "insert.php",
            data: $("#aj").serialize(),
            success: function() {
                alert('Inserted!');
            }
        });
    });
}); 
```

这是php文件

```
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("clone", $con);

$firstname=$_POST['firstname'];
$secondname=$_POST['secondname'];
$city=$_POST['city'];
mysql_query("INSERT INTO clone(firstname,secondname,city) VALUES ('$firstname','$secondname','$city')"); 
```

编辑

问题是似乎没有发布任何内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:49:41.630

分别测试每个部分。Ajax 请求是否发送了正确的数据？PHP脚本甚至可以获取数据吗？（尝试`echo <pre>;print_r($_POST);exit;`。）您的`INSERT`查询公式是否正确？成功了吗？

你还不知道你的问题到底是什么。首先弄清楚问题是什么。然后可能很容易弄清楚如何解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:50:35.627

仅在单击后才添加`$('.one')`到 DOM 。`$("#button")`因此，何时`$('.one').click(`运行，`$('.one')`尚不存在，因此该事件未绑定。

您需要使用委托（或“实时”）事件。

```
$(document).on('click', '.one', function(){
    // Click handler here
}); 
```

# php - 致命错误：在第 5 行调用 C:\wamp\www\Test-CI\application\views\layout.php 中未定义的函数 base_url()

> ID：11581636
> 
> 赞同：46
> 
> 时间：2012-07-20T14:45:38.777
> 
> 标签：php, codeigniter

您好，我是 CodeIgniter 和 PHP 的新手，我正在尝试第一次设置它，但它给出了以下错误。

> 致命错误：调用未定义的函数 base_url()
> 
> 1.  C:\wamp\www\Test-CI\application\views\layout.php 在第 5 行
>      
>     
>     
> 2.  {main}() IN ..\index.php:0 require_once('C:\wamp\www\Test-CI\system\core\CodeIgniter.php') IN ..\index.php:202
>     
>     
> 3.  call_user_func_array () IN ..\CodeIgniter.php:359
>     
>     
> 4.  主页->index() IN ..\CodeIgniter.php:0
>     
>     
> 5.  CI_Loader->view() IN ..\home.php:17
>     
>     
> 6.  CI_Loader->_ci_load() IN ..\Loader.php:419
>     
>     
> 7.  包括（'C:\wamp\www\Test-CI\application\views\layout.php'）IN ..\Loader.php:833

我的代码：

```
 <html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>Galleriffic | Custom layout with external controls</title>
        <link rel="stylesheet" href="<?php base_url(); ?>/assets/css/basic.css" type="text/css" />
        <link rel="stylesheet" href="<?php base_url(); ?>/assets/css/galleriffic-5.css" type="text/css" />

        <!-- <link rel="stylesheet" href="<?php base_url(); ?>/assets/css/white.css" type="text/css" /> -->
        <link rel="stylesheet" href="<?php base_url(); ?>/assets/css/black.css" type="text/css" />

        <script type="text/javascript" src="<?php base_url(); ?>/assets/js/jquery-1.3.2.js"></script>
        <script type="text/javascript" src="<?php base_url(); ?>/assets/js/jquery.history.js"></script>
        <script type="text/javascript" src="<?php base_url(); ?>/assets/js/jquery.galleriffic.js"></script>
        <script type="text/javascript" src="<?php base_url(); ?>/assets/js/jquery.opacityrollover.js"></script>
        <!-- We only want the thunbnails to display when javascript is disabled -->
        <script type="text/javascript">
            document.write('<style>.noscript { display: none; }</style>');
        </script>
    </head> 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-07-20T14:51:23.547

您必须加载[url](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)帮助程序才能访问该功能。要么你加

```
$this->load->helper('url'); 
```

在你的控制器的某个地方。

或者，要让它在任何地方自动加载，请确保[application/config/autoload.php](http://ellislab.com/codeigniter/user-guide/general/autoloader.html)中的行看起来像

```
$autoload['helper'] = array('url'); 
```

在那个数组中有`'url'`（如上所示）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-10-17T05:26:33.193

只需添加

```
$autoload['helper'] = array('url'); 
```

在你的配置文件中的 autoload.php

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-20T14:51:35.150

您需要先加载帮助程序，然后再将视图加载到控制器中的某个位置。

但我认为你想在这里使用该功能`site_url()`

在加载视图之前，基本上是在控制器方法中的任何位置，将其添加到代码中：

`$this->load->helper('url');`

然后使用函数 `site_url()`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-07T19:28:04.753

只有三种方法可以解决。在此路径 application/config/autoload.php 中粘贴以下代码。

他们中的大多数我都用这个

```
require_once BASEPATH . '/helpers/url_helper.php'; 
```

这很好，但有些时候，它失败了

```
$autoload['helper'] = array('url'); 
```

我从不使用它，但我知道它有效

```
$this->load->helper('url'); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-09-20T07:04:40.107

在 codeigniter 项目中加载其他文件（css，js）和文件夹（images）

我们必须遵循两个简单的步骤：

1.在您的codeigniters文件夹中创建文件夹public（可以给出任何名称）将您的引导文件css和js文件夹放在公共文件夹中。[https://i.stack.imgur.com/O2gr6.jpg](https://i.stack.imgur.com/O2gr6.jpg)

2.现在我们必须使用两行代码 1.load->helper('url'); ?> 2。

转到您的视图文件

将第一行用于加载基本 URL

```
 <?php $this->load->helper('url'); ?> 
```

其次在你的 html 头标签中放这个

```
 <link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>/public/css/bootstrap.css"> 
```

现在你可以在你的 codeigniter 中享受 bootstrap

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-19T07:47:06.057

你必须使用`echo`之前的`base_url()`功能。否则它不会打印基本网址。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-24T20:08:28.727

转到 application/config/autoload.php

```
$autoload['helper'] = array('url'); 
```

在任何地方添加这个

并在控制器中

```
function __construct()
{
    parent::__construct();
$this->load->helper('url');

} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-12T06:52:44.950

codeigniter 需要加载 url helper 来调用`base_url()`函数。

利用`application->config->autoload.php`

编辑自动加载帮助器数组并添加 url 帮助器..

`base_url()`功能现在正在工作..

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-06T09:35:06.163

首先，您必须提供 echo 以显示基本 url。然后在您的应用程序/配置/文件夹中的 autoload.php 中更改以下值。 `$autoload['helper'] = array('url');` 那么您的问题将得到解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-20T14:51:51.747

检查您是否`CI_Controller`在控制器中扩展类，并且在您必须`echo base_url($path)`运行的视图中，否则它将不起作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-21T10:18:00.403

只需添加`$autoload['helper'] = array('url');`到`autoload.php`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-25T06:47:16.593

只需创建一个变量`$base_url`

```
$base_url = load_class('Config')->config['base_url'];

<?php echo $base_url ?> 
```

并在您的代码中调用它..

# regex - 如何在 Notepad++ 中使用正则表达式来删除起始字符串、结束字符串以及介于两者之间的所有内容？

> ID：11581637
> 
> 赞同：-2
> 
> 时间：2012-07-20T14:45:38.787
> 
> 标签：regex, notepad++

我正在尝试从 Notepad++ 中的 .x 文件中删除数据，并且数据始终以

```
FVFData  { 
```

并以

```
} 
```

用逗号或分号分隔的数字填充行，例如

```
258;
408;
1040987000,
1061457122, 
```

有没有一种简单的方法可以在 Notepad++ 中使用查找/替换工具中的正则表达式来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:08:41.290

请参考以下网站来制作验证表达式。

[http://www.regexlib.com/DisplayPatterns.aspx](http://www.regexlib.com/DisplayPatterns.aspx)

在您实施验证之前，请使用以下站点检查该表达式。一旦你在网站上获得成功，然后在你的项目上实施表达式。

[http://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

[在此处输入链接描述](http://tools.netshiftmedia.com/regexlibrary/)

# xml - 如何使用 PowerShell 过滤掉 XML 中的节点？

> ID：11581638
> 
> 赞同：1
> 
> 时间：2012-07-20T14:45:41.513
> 
> 标签：xml, powershell, powershell-2.0

对于以下问题，我非常感谢您提供的任何帮助：

XML 数据存储在 .xml 文件中。

如果它们具有正确的“可分辨名称”（通过名称验证），我想过滤掉一些 XML 节点。

下面是 XML 结构：

```
<Objs Version="1.1.0.1" xmlns="http://schemas.microsoft.com/powershell/2004/04">
  <Obj RefId="0">
    <TN RefId="0">
      <T>Selected.Microsoft.ActiveDirectory.Management.ADGroup</T>
      <T>System.Management.Automation.PSCustomObject</T>
      <T>System.Object</T>
    </TN>
    <MS>
      <S N="Samaccountname">user.name</S>
      <S N="distinguishedname">CN=Domain Users,CN=Users,DC=company,DC=com</S>
    </MS>
  <Obj RefId="1">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name1</S>
      <S N="distinguishedname">CN=app_name_1,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="2">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name1</S>
      <S N="distinguishedname">CN=app_name_2,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="3">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name2</S>
      <S N="distinguishedname">CN=CN=app_name_3,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="4">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name2</S>
      <S N="distinguishedname">CN=app_name_4,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
</Objs> 
```

内容先读

```
$filedata = gc $Env:HOMEDRIVE\users.xml 
```

然后过滤掉

```
$filedata = foreach ($obj in $filexml.Objs.Obj){
        $obj.MS.S | ?{ $_.N -eq "distinguishedname"} | 
        %{if( $_."#text" -match "*name_1" -or $_."#text" -match "*name_4*") 
    {$obj}}} 
```

在我的示例中`<Obj RefId="2">`，并`<Obj RefId="4">`没有问题，应该被过滤，`<Obj RefId="0">`并且`<Obj RefId="1">`应该从 XML 中完全删除。

我真的很感激任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:25:28.070

Well, for a start you are not assigning the variable $filexml as anything so you probably need

```
$filexml = [xml] fileData 
```

If you're not using powershell ISE to debug your code you are missing out, setting a breakpoint on your foreach would have shown you that the $FileXml variable was null

And your xml is invalid, it should be

```
 <Objs Version="1.1.0.1" xmlns="http://schemas.microsoft.com/powershell/2004/04">
  <Obj RefId="0">
    <TN RefId="0">
      <T>Selected.Microsoft.ActiveDirectory.Management.ADGroup</T>
      <T>System.Management.Automation.PSCustomObject</T>
      <T>System.Object</T>
    </TN>
    <MS>

      <S N="Samaccountname">user.name</S>
      <S N="distinguishedname">CN=Domain Users,CN=Users,DC=company,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="1">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name1</S>
      <S N="distinguishedname">CN=app_name_1,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="2">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name1</S>
      <S N="distinguishedname">CN=app_name_2,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="3">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name2</S>
      <S N="distinguishedname">CN=CN=app_name_3,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
  <Obj RefId="4">
    <TNRef RefId="0" />
    <MS>
      <S N="Samaccountname">user.name2</S>
      <S N="distinguishedname">CN=app_name_4,OU=publ,OU=app,DC=comp,DC=com</S>
    </MS>
  </Obj>
</Objs> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:52:54.547

假设以下 xml，目标是删除所有不等于 2 和 4 的 Obj RefId：

```
<Objs Version="1.1.0.1" xmlns="http://schemas.microsoft.com/powershell/2004/04">
<Obj RefId="0">
<TN RefId="0">
  <T>Selected.Microsoft.ActiveDirectory.Management.ADGroup</T>
  <T>System.Management.Automation.PSCustomObject</T>
  <T>System.Object</T>
</TN>
<MS>
  <S N="Samaccountname">user.name</S>
  <S N="distinguishedname">CN=Domain Users,CN=Users,DC=company,DC=com</S>
</MS>
</Obj>
<Obj RefId="1">
<TNRef RefId="0" />
<MS>
  <S N="Samaccountname">user.name1</S>
  <S N="distinguishedname">CN=app_name_1,OU=publ,OU=app,DC=comp,DC=com</S>
</MS>
</Obj>
<Obj RefId="2">
<TNRef RefId="0" />
<MS>
  <S N="Samaccountname">user.name1</S>
  <S N="distinguishedname">CN=app_name_2,OU=publ,OU=app,DC=comp,DC=com</S>
</MS>
</Obj>
<Obj RefId="3">
<TNRef RefId="0" />
<MS>
  <S N="Samaccountname">user.name2</S>
  <S N="distinguishedname">CN=CN=app_name_3,OU=publ,OU=app,DC=comp,DC=com</S>
</MS>
</Obj>
<Obj RefId="4">
<TNRef RefId="0" />
<MS>
  <S N="Samaccountname">user.name2</S>
  <S N="distinguishedname">CN=app_name_4,OU=publ,OU=app,DC=comp,DC=com</S>
</MS>
</Obj>
</Objs> 
```

定义过滤器：

```
$filters = [regex]".*(name_2|name_4).*" 
```

加载 xml：

```
$xml = [xml](Get-Content "$home\Documents\test.xml") 
```

删除不需要的元素：

```
$xml.Objs.Obj | ?{ ($_.MS.S | ?{$_.N -eq "distinguishedname"}).'#text' -notmatch $filters} | %{$xml.Objs.RemoveChild($_)} 
```

保存 xml：

```
$xml.Save("$home\Documents\test2.xml") 
```

# asp.net - 在 asp.net 中使用 Image Map 控件导航

> ID：11581639
> 
> 赞同：0
> 
> 时间：2012-07-20T14:45:43.700
> 
> 标签：asp.net

`Image Map`当用户单击它时，我正在使用diff 页面来引导用户。我写了这段代码

`<asp:ImageMap ID="ImageMap1" runat="server" AlternateText="Amazon" BorderStyle="Groove" DescriptionUrl="~/Images/TT.jpg" Height="29px" ImageAlign="Baseline" ImageUrl="~/Images/amazon.png" ToolTip="Amazon" Width="82px" HotSpotMode="Navigate"> <asp:CircleHotSpot NavigateUrl="http://www.amazon.com" Target="_blank" HotSpotMode="Navigate" /> </asp:ImageMap>`

它可以工作，但不能在点击时导航，所以一旦我添加`OnClick"ImageMapID"`它就会给我一个错误。我还缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:58:32.420

哇..ImageMap 认为我已经回到了 1999 年！

无论如何，不​​确定添加 OnClick 是什么意思，但您还没有添加热点的尺寸，因此它不知道哪个区域是可点击的 - 设置 x、y 和半径属性，请参阅[http://msdn.microsoft。 com/en-us/library/system.web.ui.webcontrols.circlehotspot(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.circlehotspot(v=vs.80).aspx) )

# c# - 命名空间 bla 已经包含（我的部分）类的定义

> ID：11581640
> 
> 赞同：2
> 
> 时间：2012-07-20T14:45:48.270
> 
> 标签：c#, class, partial

我创建了一个包含一些非常大的 .cs 文件的程序。所以我试图通过使用部分类来拆分其中一个。所以我创建了第二个文件，里面有相同的类名和相同的命名空间。我从一个文件中剪切了一些函数并将其粘贴到第二个文件中。但是当我想运行程序时，它说该类已经存在。但它是一个部分类，它必须具有相同的名称：S

在第一个文件 (ChartWidget.cs) 中，它以：

```
namespace UGS.Sidebar.ChartWidget
{
    public partial class ChartWidget : UserControl
    {
        #region declarations
        private int id = -1; 
```

......

在第二个文件 (Debugging.cs) 开始：

```
namespace UGS.Sidebar.ChartWidget
{
    public partial class ChartWidget : UserControl
    {

        #region debugvars
        Random _r = new Random();
        #endregion
        ..... 
```

这些文件来自用户控件（如您所见），但我不认为这是问题所在？

希望你们能告诉我为什么它不起作用:(对不起我的英语不好我真的很烂...... :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T19:38:35.193

检查您没有将类名附加到命名空间的末尾。例如，如果您将新类放入同名文件夹中，它将自动在命名空间名称上添加后缀

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:47:15.977

无需从第二类中的 UserControl 继承

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T14:59:19.507

检查是否在其他地方定义了没有部分的类。`Right click on the class name + Find All Reference`有帮助。

# android - 将 ImageView 数组添加到 RelativeLayout

> ID：11581641
> 
> 赞同：0
> 
> 时间：2012-07-20T14:45:48.353
> 
> 标签：android, android-layout, android-relativelayout, android-imageview

我正在尝试`RelativeLayout`在运行时将一系列图像添加到当前的另一个`TextView`. 到目前为止，我让它显示部分正确，但不完全正确。我不能让他们搬到另一排。我希望有人能帮我一把，告诉我正确的方法。该系列图像将出现在此`TextView`( `R.id.date`) 下方：

```
 TextView date = (TextView) findViewById(R.id.date);

    //// image view start //////
    int photos = Integer.parseInt(total_photo);
    RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.relative_layout_b);
    for (int i = 0; i < limit; i++){
        final ImageView imageView = new ImageView (this);
        imageView.setId(i);
        imageView.setImageResource(R.drawable.photo_frame);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        imageView.setPadding(10, 10, 0, 0);
        imageView.setAdjustViewBounds(true);
        imageView.setMaxHeight(80);
        imageView.setMaxWidth(80);
        lp.addRule(RelativeLayout.BELOW, R.id.date);
        lp.addRule(RelativeLayout.RIGHT_OF, imageView.getId() - 1);
        imageView.setLayoutParams(lp);
        mainLayout.addView(imageView);
    } 
```

目前只显示总照片数量 - 1（即：有5张时，只显示4张）；我想让每一行显示 5，如果达到 6、11、16....等，我会立即移动到下一行。此布局嵌套在 a`ScrollView`和 a 中，`RelativeLayout`因为其中有很多视图。所以，我将不得不坚持`RelativeLayout`这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:38:56.423

如果我理解你想要做什么，看看下面的代码是否`ImageViews`像你想要的那样（我不知道它的效率如何）：

```
 private static final int ROW_ITEMS = 5; // 5 ImageViews per row

    // ...
    RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.relative_layout_b);
            int limit = 13; // I assume that limit is the number of ImageView that you'll put in the layout
            int rows = limit / ROW_ITEMS; // the number of rows that results from limit
            int leftOver = limit % ROW_ITEMS; // see if we have incomplete rows
            if (leftOver != 0) {
                rows += 1;
            }
            int id = 1000; // the ids of the ImageViews 1000, 1001, 1002 etc
            int belowId = R.id.date; // this id will be used to position the ImageView on another row
            while (rows > 0) {
                int realItemsPerRow = ROW_ITEMS;
                if (leftOver != 0 & rows == 1) {
                    realItemsPerRow = Math.min(ROW_ITEMS, leftOver);
                }           
                for (int i = 0; i < realItemsPerRow; i++) {
                    final ImageView imageView = new ImageView(this);
                    imageView.setId(id);
                    imageView.setImageResource(R.drawable.ic_launcher);
                    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                            RelativeLayout.LayoutParams.WRAP_CONTENT,
                            RelativeLayout.LayoutParams.WRAP_CONTENT);
                    imageView.setPadding(10, 10, 0, 0);
                    imageView.setAdjustViewBounds(true);
                    imageView.setMaxHeight(80);
                    imageView.setMaxWidth(80);
                    if (i == 0) {
                        lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
                    } else {
                        lp.addRule(RelativeLayout.RIGHT_OF, imageView.getId() - 1);
                    }
                    lp.addRule(RelativeLayout.BELOW, belowId);              
                    imageView.setLayoutParams(lp);
                    mainLayout.addView(imageView);
                    id++;
                }           
                belowId = id - 1; 
                rows--; 
            } 
```

此外，正如 kcoppock 在他的评论中已经说过的那样，可能值得关注`GridView`效率。

# jsp - 将变量传递给 jsp:include 不起作用

> ID：11581645
> 
> 赞同：0
> 
> 时间：2012-07-20T14:46:02.690
> 
> 标签：jsp, foreach, scope

我有一个带有以下内容的jsp文件

```
<c:forEach var="node" items="${tree.children}">
  <c:set var="currentNode" value="${node}" scope="request"/>
  <c:out value="${currentNode.displayName}" />
  <jsp:include page="currentNode.jsp"/>
  <br/>
</c:forEach> 
```

currentNode.jsp 目前只包含

```
X<c:out value="${currentNode.displayName}" />Y 
```

该变量`currentNode`应该在包含的 jsp 文件中可用。例如，看到这个[问题](https://stackoverflow.com/questions/7799716/passing-cforeach-variable-to-a-jspinclude)。

但即使是这个简单的例子也不起作用。我得到以下输出

```
Node 1 XY
Node 2 XY
Node 3 XY 
```

我期待的地方

```
Node 1 XNode 1Y
Node 2 XNode 1Y
Node 3 XNode 1Y 
```

我缺少什么来完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:21:48.270

我敢打赌，您忘记在包含的 JSP 中声明核心标记库。因此，`<c:out>`标签将按原样发送到输出，浏览器将忽略它们。检查生成的 HTML 代码。

# ruby - 使用 XPath 在 NodeSet 中查找字符串 (Nokgiri)

> ID：11581646
> 
> 赞同：1
> 
> 时间：2012-07-20T14:46:03.550
> 
> 标签：ruby, xml, xpath, nokogiri

我有这个 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE pdf2xml SYSTEM "pdf2xml.dtd">

<pdf2xml>
    <page number="1">
        <text top="91">Rapport</text>
        <text top="102">foo</text>
    </page>
    <page number="2">
        <text top="91">Rapport</text>
        <text top="102">bar</text>
    </page>
    <page number="3">
        <text top="91">Rapport</text>
        <text top="102">asdf</text>
    </page>
</pdf2xml> 
```

我正在这样做：

```
require 'nokogiri'
doc = Nokogiri::XML(File.read("file.xml"))
pages = doc.xpath("//page")
nodeset = pages[0].xpath("./text") + pages[1].xpath("./text") 
```

我想在节点集中通过字符串找到一个节点，像这样

```
irb(main):011:0> nodeset.at_xpath("//text[text()[contains(., 'bar')]]")
=> #<Nokogiri::XML::Element:0x3fea6a4821d4 name="text" attributes=[#<Nokogiri::XML::Attr:0x3fea6a482170 name="top" value="102">] children=[#<Nokogiri::XML::Text:0x3fea6a481cac "bar">]> 
```

但我不想使用`//`

我设法做到了

```
irb(main):018:0> nodeset.at_xpath("text()[contains(., 'bar')]")
=> #<Nokogiri::XML::Text:0x3fea6a481cac "bar"> 
```

但我想要整个`<text>`节点。

我对节点集的 xpath 查询应该是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:51:22.820

比选择`text()`节点然后选择父节点更简单的是首先选择您想要的节点：

```
pages = doc.xpath("//page")
puts pages.xpath("text[contains(.,'bar')]")
#=> <text top="102">bar</text> 
```

如果它让您感觉更好，您也可以显式测试元素的`text()`子节点，`text`而不是使用元素的等效文本：

```
pages.xpath("text[contains(text(),'bar')]") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:36:25.863

我刚刚发现

```
nodeset.at_xpath("../text[text()[contains(., 'bar')]]") 
```

也可以。

编辑：但我认为这比`/..`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:36:44.883

要选择当前节点的父节点，您可以使用`..`例如，

```
/pdf2xml/page[1] 
```

指向第一个`<page>`节点。如果你想再次选择它的父母，你可以写

```
/pdf2xml/page[1]/.. 
```

这将选择`<pdf2xml>`作为`<page>`.

在类似的行上，您可以在示例中使用`..`选择`parent`节点。

有关更多信息，您可以参考[**此**](http://www.w3schools.com/xpath/xpath_syntax.asp)

希望这可以帮助。

# android - 关于 Android 图像和资产大小

> ID：11581649
> 
> 赞同：87
> 
> 时间：2012-07-20T14:46:29.853
> 
> 标签：android, android-resources, android-image, android-screen-support

我需要澄清对我的应用程序的图像资产的一些疑问，

如果我在 xml 文件中指定某物 [图像视图] 的高度为 50 倾角高度

我应该从资源文件夹中选择哪种类型的屏幕？

```
drawable, hdpi, ldpi, mdpi, xhdpi, 
```

拥有 50 px 高度的图像，

与基本图像相比，更大、更小尺寸的图像的百分比是多少，

就像在 iOS 中一样，@2x 实际上是图像大小的 2 倍，而您以编程方式说是正常大小，

谢谢！

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-07-20T14:54:48.803

`mdpi`是参考密度——也就是说，`mdpi`显示器上的 1 px 等于 1 dip。资产缩放比例为：

```
ldpi | mdpi | tvdpi | hdpi | xhdpi | xxhdpi | xxxhdpi
0.75 | 1    | 1.33  | 1.5  | 2     | 3      | 4 
```

尽管除非您是专门为 Google TV 或最初的 Nexus 7 开发，否则您实际上不需要担心`tvdpi`——但即使是 Google 也建议简单地使用`hdpi`资产。

这意味着如果您正在制作 48dip 图像并计划支持高达`xxhdpi resolution`，则应从 144px 图像开始（如果您想要 xxxhdpi 的原生资源，则为 192px）并为密度制作以下图像：

```
ldpi    | mdpi    | tvdpi    | hdpi    | xhdpi     | xxhdpi    | xxxhdpi
36 x 36 | 48 x 48 | 64 x 64  | 72 x 72 | 96 x 96   | 144 x 144 | 192 x 192 
```

并且这些应该在任何设备上以大致相同的大小显示，前提是您已将它们放置在特定于密度的文件夹中（例如`drawable-xhdpi`,`drawable-hdpi`等）

作为参考，这些像素密度为：

```
ldpi  | mdpi  | tvdpi  | hdpi  | xhdpi  | xxhdpi  | xxxhdpi
120   | 160   | 213    | 240   | 320    | 480     | 640 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-05T13:01:42.590

根据**kcoppock**的回答，我创建了以下 shell 脚本，以自动将所有图像调整为正确的大小，并将它们复制到相应的 Android drawable-* - 文件夹中！

创建一个 shell 脚本并粘贴以下代码：

**创建AndroidImages.sh**

```
#!/bin/bash

read -p "Please enter the subfolder of the original images? " folder
read -p "How many DP (width) should the image have? " dp

for i in $(find $folder/. -type f -name "*[A-Z]*"); do mv "$i" "$(echo $i | tr A-Z a-z)"; done

mkdir drawable-ldpi
mkdir drawable-mdpi
mkdir drawable-tvdpi
mkdir drawable-hdpi
mkdir drawable-xhdpi
mkdir drawable-xxhdpi
mkdir drawable-xxxhdpi

cp $folder/* drawable-ldpi/
cp $folder/* drawable-mdpi/
cp $folder/* drawable-tvdpi/
cp $folder/* drawable-hdpi/
cp $folder/* drawable-xhdpi/
cp $folder/* drawable-xxhdpi/
cp $folder/* drawable-xxxhdpi/

sips -Z $(echo $dp*3/4 | bc) drawable-ldpi/*
sips -Z $(echo $dp | bc) drawable-mdpi/*
sips -Z $(echo $dp*4/3 | bc) drawable-tvdpi/*
sips -Z $(echo $dp*3/2 | bc) drawable-hdpi/*
sips -Z $(echo $dp*2 | bc) drawable-xhdpi/*
sips -Z $(echo $dp*3 | bc) drawable-xxhdpi/*
sips -Z $(echo $dp*4 | bc) drawable-xxxhdpi/* 
```

将您的脚本放在一个文件夹中，将您的原始图像放在一个子文件夹中，例如：

```
/
.. createAndroidImages.sh
.. originalImages/
....a123.png
....b456.png 
```

在终端中运行 shell 脚本：`sh createAndroidImages.sh`

要将创建的图像直接复制到您的 Android Studio 项目中：

```
cp -R drawable-* ~/AndroidStudioProjects/ESCRating/app/src/main/res/ 
```

你完成了！希望这对某人有帮助！

PS 请注意，为了获得最佳效果，原始图像的像素宽度应至少是所需宽度 dpi 的四倍（例如 4（因子 xxxhdpi）* 30dpi => 120px）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-08T20:37:34.817

kcoppock 在解释 Andorid 屏幕密度方面做得很好。我只想就原始问题再补充一点。

**Android 平板电脑启动器图标使用一个密度桶。**

根据 Google 的开发者 Nick Butcher 在 Google+ 上的帖子

> Nexus 10 上华丽的屏幕属于 XHDPI 密度桶。在平板电脑上，Launcher 使用上一个密度桶 [0] 中的图标来使它们稍微变大。为了确保您的启动器图标（可以说是您的应用程序最重要的资产）清晰，您需要在 drawable-xxhdpi 或 drawable-480dpi 文件夹中添加一个 144*144px 的图标。

[在此处](https://plus.google.com/+NickButcher/posts/ePQya3KsTjW)查找来源

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-17T17:33:19.630

这是我为 android 放大和缩小图像的计算结果-

ldpi（120 dpi，低密度屏幕）- 36px x 36px **(0.19) (1)**

mdpi（160 dpi，中等密度屏幕）- 48px x 48px **(0.25) (1.33)**

hdpi（240 dpi，高密度屏幕）- 72px x 72px **(0.38) (2)**

xhdpi (320 dpi, 超高密度屏幕) - 96px x 96px **(0.5) (2.67)**

xxhdpi（480 dpi，超超高密度屏幕）- 144px x 144px **(0.75) (4)**

xxxhdpi（640 dpi，超超超高密度屏幕）- 192px x 192px **(1.0) (5.33)**

当有多个图像时，[我的短文有助于使用 imagemagick 创建图像资源。](http://www.vishalkumarsahu.in/blog/windows-script-to-create-all-image-assets-for-android-and-ios-app/)

# extjs - 在 ExtJS 中，我如何知道商店何时开始排序并完成排序？

> ID：11581653
> 
> 赞同：1
> 
> 时间：2012-07-20T14:46:35.447
> 
> 标签：extjs, extjs3

我有一个网格商店。用户可以单击标题进行排序。我需要知道商店何时开始分类并完成分类。我附在什么上面？我看不到商店的开始排序和结束排序事件。

这是我正在使用的那种：

```
Ext.override(Ext.data.Store, {
    // override
    createSortFunction: function (field, direction) {
        direction = direction || "ASC";
        var directionModifier = direction.toUpperCase() == "DESC" ? -1 : 1;
        var sortType = this.fields.get(field).sortType;

        //create a comparison function. Takes 2 records, returns 1 if record 1 is greater,
        //-1 if record 2 is greater or 0 if they are equal
        return function (r1, r2) {

            var v1;
            var v2;

            v1 = sortType(r1.data[field]);
            v2 = sortType(r2.data[field]);

            // To perform case insensitive sort
            if (v1.toLowerCase) {
                v1 = v1.toLowerCase();
                v2 = v2.toLowerCase();
            }

            return directionModifier * (v1 > v2 ? 1 : (v1 < v2 ? -1 : 0));
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:53:04.780

一般的解决方案是你应该使用 Ext.util.Observable.capture() 来监听 store 上的所有事件，这样你就可以看到真正发生了什么。

答案是，这取决于`remoteSort`是否`true`。如果是`true`，它的作用与从服务器加载商店相同。如果是`false`，那么它似乎是同步的。

远程排序：

```
beforeload
datachanged
refresh
load
read 
```

本地排序：

```
datachanged
read 
```

排序大约 1000 个元素需要 20 毫秒

示范：

[http://jsfiddle.net/el_chief/q9cvs/3/](http://jsfiddle.net/el_chief/q9cvs/3/)

您也可以触发自己的事件：

```
Ext.data.Store.override({

  sort: function(sorters, direction){

    this.fireEvent('sorting', this, {});

    this.callParent(arguments);

    this.fireEvent('sorted', this, {});

  }
}); 
```

# twitter-bootstrap - Twitter Bootstrap 响应式 css 不会从较少的文件中生成

> ID：11581658
> 
> 赞同：4
> 
> 时间：2012-07-20T14:46:57.747
> 
> 标签：twitter-bootstrap

我已经从[带有文档](http://twitter.github.com/bootstrap/index.html)链接的下载中下载了 .less 文件，并将其添加到我的项目中。我已经下载了 less.js 并将其添加到我的项目中。如果我在页面头部包含以下内容：

```
<link rel="stylesheet/less" href="@routes.Assets.at("less/bootstrap.less")">
    <script src="@routes.Assets.at("less/less-1.3.0.min.js")"></script> 
```

引导似乎工作，减去响应部分（即，如果浏览器窗口变得太窄，导航栏不会折叠）。我可以通过手动添加 bootstrap-responsive.css 来解决这个问题

```
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/bootstrap-responsive.css")" /> 
```

问题是，如果我想修改我的页面的颜色主题，我需要在 bootstrap-responsive.css 中编辑颜色值，这很痛苦。看起来某些 .less 文件旨在生成 bootstrap-responsive.css（例如 responsive-navabar.less），但它们不起作用。

关于如何从 .less 文件中获取 bootstrap-responsive.css 文件的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T15:33:23.100

您还需要明确包含此文件：

```
responsive.less 
```

假设您使用的是 Twitter Bootstrap 的最新版本 (2.0.x)。

正如他们的网站（[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)）所述：

> Bootstrap 不会自动包含这些媒体查询，但理解和添加它们非常容易，并且需要最少的设置。**您有几个选项可以包含 Bootstrap 的响应式功能**：
> 
> 1.  使用编译好的响应式版本，bootstrap-responsive.css
> 2.  添加 @import "responsive.less" 并重新编译 Bootstrap
> 3.  将 responsive.less 修改并重新编译为单独的文件
> 
> 为什么不直接包括它？说实话，并非所有事情都需要响应。我们认为最好启用它，而不是鼓励开发人员删除此功能。

# asp.net-mvc-3 - 更新 ASP.NET MVC 中的相对位置

> ID：11581659
> 
> 赞同：0
> 
> 时间：2012-07-20T14:46:59.843
> 
> 标签：asp.net-mvc-3

我的文件结构如下所示：

```
/root
  /images
    image1.png
    image2.png
    button1.png
    button2.png
  /css
    app.css
    core.css
  /scripts
    jquery-1.6.4.min.js
    jquery.mobile-1.1.0.min.js
  /path1
    /pathA
      index.cshtml
      page1.cshtml
    index.cshtml
  /path2
    /pathA
      index.cshtml
      page1.cshtml
    /pathB
      index.cshtml
      page1.cshtml
    index.cshtml
  index.cshtml
  _layout.cshtml 
```

所有 .cshtml 文件都依赖 _layout.cshtml 来共享内容。我的 _layout.cshtml 文件如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="stylesheet" href="/css/core.css" />    
    <link rel="stylesheet" href="/css/app.css" />

    <script src="/scripts/jquery-1.6.4.min.js" type="text/javascript"></script> 
    <script src="/scripts/jquery.mobile-1.1.0.min.js" type="text/javascript"></script>

    <style type="text/css">
        #button1 .ui-icon { background: url(/images/button1.png) }
        #button2 .ui-icon { background: url(/images/button2.png)  }     
    </style>

</head>
<body>
    @RenderBody()
</body>
</html> 
```

此文件以“/”开头引用所有 url。不幸的是，当我将我的应用程序移至 PhoneGap 时，这将不起作用。我希望用相对路径替换所有开头的“/”。例如，如果我访问 /path1/pathA/index.cshtml 我希望两个按钮 css 定义看起来像：

```
 #button1 .ui-icon { background: url(../../images/button1.png) }
  #button2 .ui-icon { background: url(../../images/button2.png)  } 
```

有没有一种方法可以自动更改我的路径，以便它们是相对的，如上所示？我对我想要的东西有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:51:59.727

我建议您使用内置的 html 助手，例如：

```
<script src="@Url.Content("~/Scripts/jquery-1.6.4.min.js")" type="text/javascript"></script> 
```

...

```
#button1 .ui-icon { background: url(@Url.Content("~/Content/images/button1.png")) } 
```

# iphone - 安装 Facebook SDK - iPhone

> ID：11581666
> 
> 赞同：0
> 
> 时间：2012-07-20T14:47:16.327
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我已经坚持了一段时间......如何安装 Facebook SDK？

我导入了一个名为 FBConnect 的组，其中包含 9 个头文件（这就是我所做的全部），但我发现所有这些教程都告诉我要创建一个像这样的对象......

```
Facebook *facebook; 
```

但是我根本没有 Facebook 课程……我怎样才能在我的 iPhone 应用程序/项目中做到这一点？以下是我真正想做的事情，这就是......

```
http://stackoverflow.com/questions/6638955/facebook-ios-sdk-get-list-of-friends 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:51:19.693

如果您从此[链接](https://github.com/facebook/facebook-ios-sdk)下载了官方 SDK，您应该按照本[教程](https://developers.facebook.com/docs/mobile/ios/build/#sdk)进行操作。它有 Facebook 类和获取好友列表所需的一切。

# javascript - 从外部类获取 CSS

> ID：11581672
> 
> 赞同：1
> 
> 时间：2012-07-20T14:47:42.437
> 
> 标签：javascript, jquery, css

**编辑** 添加了一个带有 regexpr 的测试来解决 techfoobar 指出的问题

**为其他人编辑 2 个** 更正的代码 hf :)

我正在寻找一种从指定类中获取所有静态样式的方法。我不想附加一个新的 div 并从中提取所有可能的值，因为值通常只是计算出来的......

以下是一些相关的帖子：

[jQuery CSS插件返回元素的计算样式以伪克隆该元素？](https://stackoverflow.com/questions/1004475/jquery-css-plugin-that-returns-computed-style-of-element-to-pseudo-clone-that-el)

[jQuery 可以获取与元素关联的所有 CSS 样式吗？](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)

[http://quirksmode.org/dom/w3c_css.html](http://quirksmode.org/dom/w3c_css.html)

这是我到目前为止提出的：

```
function getExternalCSS(className) {
    var cssText = false;
    $.each(document.styleSheets, function(key, value) {
        $.each(value.cssRules, function(k, v) {
            if(new RegExp(className, "i").test(v.selectorText)) {
                cssText = v.cssText;
                return false;
            }
        });
        if(cssText !== false) {
            return false;
        }
    });
    return cssText;
} 
```

css 浏览：

```
.someClass {
    style1...
}
.someOtherClass {
    style2...
}
.myClassToFind {
    style3...
} 
```

用法：

```
 getExternalCSS(".myClassToFind");  //note the . for class 
```

selectorText 正确返回，但`if`从未触发。我已经尝试解析为字符串等。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:59:27.443

**更新**

检查这个演示：http: [//jsfiddle.net/XaB3T/1/](http://jsfiddle.net/XaB3T/1/)

有几个问题：

a）您需要`return false`从 a`$.each`停止循环，就像`break`. 没有这样做。b）您正在检查肯定无法匹配的，因为`v.selectorText.toLowerCase()`并非都是小案例`'.myClass'``'.myClass'`

* * *

**解释**_`For counting in only those styles that will be applied at the end, you might need to do a lot more!`

CSS 特殊性规则请参考：

*   [http://www.htmldog.com/guides/cssadvanced/specificity/](http://www.htmldog.com/guides/cssadvanced/specificity/)
*   [http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)
*   [http://reference.sitepoint.com/css/specificity](http://reference.sitepoint.com/css/specificity)
*   [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

`if`永远不会返回 true，因为：

a) 选择器文本不必完全是`.yourClass`. 它可以是`.a .yourClass`，`div.yourClass`甚至`.anotherClass, .yourClass`等等……都指向你的元素

b）检查需要类似于：

```
for each selectorText {
   strip off any { character
   split the selector text by ',' into an array called parts
   for each part {
      check if it ends with '.yourClass' // if it does, this class is match
   }
} 
```

另一个问题是 CSS 特异性。为了只计算那些将在最后应用的样式，您可能需要做更多的事情！

# iphone - 如何声明“动画停止动画”的命令？

> ID：11581673
> 
> 赞同：0
> 
> 时间：2012-07-20T14:47:46.563
> 
> 标签：iphone, objective-c, xcode, audio, animation

我有一个正在创建的应用程序，我需要一些帮助。在视图下确实加载了我有一个播放音乐的代码，这很好。然后当他们单击播放音乐停止并开始动画时，按钮会显示“播放”。现在动画完成后出现2个按钮。我将如何声明动画像 void 或 ibaction 一样停止动画，这样我就可以在动画停止动画发生时再次播放音乐。如果这有意义，请随时提问，我是初学者，所以请放轻松:)谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:52:02.583

```
+ (void)animateWithDuration:(NSTimeInterval)duration 
                 animations:(void (^)(void))animations 
                 completion:(void (^)(BOOL finished))completion 
```

让您知道动画何时完成，完成块中的代码将在动画完成时执行。

# netbeans - Netbeans 分析器的“自我时间”实际上是什么意思？

> ID：11581686
> 
> 赞同：8
> 
> 时间：2012-07-20T14:48:32.130
> 
> 标签：netbeans, profiling

我一直对我的简单游戏需要运行的时间感兴趣，所以我使用了 Netbeans Java 分析器（Java 1.7），我可以在“热点”选项卡中看到“自我时间”和“调用”列。

例如，我的渲染方法有：

**自拍时间**：1025 毫秒

**调用**：2311

所以，如果我理解得很好，这是否真的意味着所有渲染方法调用的总时间为 1025 毫秒，而一个方法执行的平均时间为 1025 / 2311 = **0.44 毫秒**？

如果是这样，我可以强制 IDE 显示平均时间而不是总时间吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T23:41:33.527

通常，“自我时间”测量在方法主体内花费的时间——不包括在它调用的方法中花费的时间*。*例如，假设您有一个简单的方法来检索已排序的用户，`getUsers`该方法调用了两个自己不进行任何其他调用的方法。

```
UserList getUsers() {
    return sortUsers(loadUsers());
} 
```

由于`getUsers`不起作用，即使调用该方法很昂贵，它的自身时间也会非常低。

```
Method       Self Time  Call Time
-----------  ---------  ---------
getUsers          3 ms   1,184 ms
loadUsers       923 ms     923 ms
sortUsers       258 ms     258 ms 
```

这是基于我使用过的其他配置文件——不是 NetBeans。希望有人可以为 NetBeans 本身确认或否认这一点。

# java - Eclipse 是否需要构建项目来执行“Java 搜索”

> ID：11581691
> 
> 赞同：1
> 
> 时间：2012-07-20T14:48:49.447
> 
> 标签：java, eclipse

在 Eclipse 中，我可以单击一个标识符并按 Ctrl-H 来执行“Java 搜索”以查找该标识符（方法、类等）的定义或使用。但是，如果我禁用普通的 Java 构建器（项目使用 ant），数据是否会与实际源不同步？我知道在 Visual Studio 中它必须偶尔重建智能感知数据；这在 Eclipse 中是如何工作的？它与编译器有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:53:05.090

Eclipse 会自动编译和构建您的代码（默认情况下，每次保存时）。当您进行 Java 搜索时，它会搜索您的 Java 文件 (.java) 而不是类文件。这很有帮助，因为类文件签名可以在每次重建时更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:37:28.023

您应该已经注意到，即使 Java 构建器被禁用，Java 编辑器仍会为您所有输入错误的代码添加下划线。这是因为 JDT 有 2 种不同的 Java 代码内部表示，它们独立于 java 或类文件（并且在编辑时已经更新）：所谓的 Java 模型和非常详细的类似 DOM 的抽象语法树。

代码完成、交叉引用和类似的东西通常可以**直接从 Java 模型中查询**，这就是为什么菜单项“引用”或“声明”通常非常快的原因。

[您可以从这个EclipseCon 演示文稿](http://www.eclipsecon.org/2005/presentations/EclipseCON2005_Tutorial29.pdf)中获得有关所有这些的更多详细信息。

# xml - 如何在 VB.NET 中读取 XML 元素

> ID：11581692
> 
> 赞同：3
> 
> 时间：2012-07-20T14:48:51.347
> 
> 标签：xml, vb.net

我有一个非常简单的问题，但是由于我是 XML 新手，所以我遇到了一些问题。我有这个 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>  
<Form_Layout>
  <Location>
    <LocX>100</LocX>
    <LocY>100</LocY>  
  </Location>  
  <Size>  
    <Width>300</Width>  
    <Height>300</Height>  
  </Size>  
</Form_Layout> 
```

我想要做的是将 LocX、LoxY、Width 和 Height 元素中的值读取到我相应的变量中。

这是我尝试过的：

```
Dim XmlReader = New XmlNodeReader(xmlDoc)  
While XmlReader.Read  
    Select Case XmlReader.Name.ToString()  
        Case "Location"  
            If XmlReader.??  
        Case "Size"  
            If XmlReader.??
    End Select  
End While 
```

但是，我无法弄清楚如何访问每个子节点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:00:15.203

如果您能够使用 Linq to XML，则可以使用 VB 的[XML Axis Properties](http://msdn.microsoft.com/en-us/library/bb384769.aspx)：

```
Dim root As XElement = XDocument.Load(fileName).Root

Dim LocX = Integer.Parse(root.<Location>.<LocX>.Value)
Dim LocY = Integer.Parse(root.<Location>.<LocY>.Value) 
```

而且`root.<Location>.<LocY>.Value = CStr(120)`也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:02:50.007

以下是使用`XmlDocument`XPath 的方法。我相信其他人会很乐意自愿提供一个使用`XDocument`和 LINQ 的示例。

```
Dim doc As New XmlDocument()
doc.LoadXml("...")
Dim locX As Integer = Integer.Parse(doc.SelectSingleNode("/FormLayout/Location/LocX").InnerText)
Dim locY As Integer = Integer.Parse(doc.SelectSingleNode("/FormLayout/Location/LocY").InnerText)
Dim width As Integer = Integer.Parse(doc.SelectSingleNode("/FormLayout/Size/Width").InnerText)
Dim height As Integer = Integer.Parse(doc.SelectSingleNode("/FormLayout/Size/Height").InnerText) 
```

此外，您可能想查看`XmlSerializer`该类，看看您是否对它感兴趣。该类将读取 XML 文档并使用它来填充新对象的属性值。您只需要创建一个模仿 XML 结构的类，即可将其反序列化为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:21:57.527

使用 LINQ-XML，

```
Dim root As XElement = XDocument.Load(fileName).Root

Dim LocX = Integer.Parse(root.Element("Location").Element("LocX").Value)
Dim LocY = Integer.Parse(root.Element("Location").Element("LocY").Value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T13:26:12.543

每个 XML 文档可能在最顶部位置有一个声明节点。声明节点提供有关 xml 文档的信息：

```
<?xml version="1.0" encoding="utf-8"?> 
```

在声明节点之后的 xml 文档中必须存在根节点。在您的情况下，根节点名为“Form_Layout”。

```
<Form_Layout> 
```

System.Xml 命名空间中可用的类对象可用于读取和操作，然后将数据保存到 xml 文件。您可以使用文件流对象读取 xml 文件的全部内容。您可以修改节点，然后将其保存到新文件或覆盖现有文件。以下代码可用于将 xml 文件加载到 XmlDataDocument 对象中。

```
 Dim xmlDoc As System.Xml.XmlDataDocument = New System.Xml.XmlDataDocument
    Dim filepath As String = "C:\Users\mraso\Documents\location.xml"
    Dim loadedIn As Boolean = False, readbln As Boolean = False
    Dim fstream As System.IO.FileStream = New System.IO.FileStream(filepath, System.IO.FileMode.Open, System.IO.FileAccess.Read)
    If fstream IsNot Nothing Then
        xmlDoc.Load(fstream)
        loadedIn = True
    End If
    fstream.Close()
    fstream.Dispose()
    fstream = Nothing 
```

您可以使用 XmlDataDocument 对象的 ChildNodes 属性来读取 xml 文档的声明节点和根节点。你也可以调用每个节点的 ChildNodes 属性来得到它​​的子节点作为回报。您可以遍历 XmlNodeList 对象中的项目以访问各个节点。使用您的 xml 文件的整个代码如下所示。

```
Private Sub TestReadingAndSavingXml()
    Dim xmlDoc As System.Xml.XmlDataDocument = New System.Xml.XmlDataDocument
    Dim filepath As String = "C:\Users\mraso\Documents\location.xml"
    Dim loadedIn As Boolean = False, readbln As Boolean = False
    Dim fstream As System.IO.FileStream = New System.IO.FileStream(filepath, System.IO.FileMode.Open, System.IO.FileAccess.Read)
    If fstream IsNot Nothing Then
        xmlDoc.Load(fstream)
        loadedIn = True
    End If
    fstream.Close()
    fstream.Dispose()
    fstream = Nothing
    Dim ndList1 As System.Xml.XmlNodeList = xmlDoc.ChildNodes
    If ndList1 IsNot Nothing Then
        Dim cnt As Integer = ndList1.Count
        For Each nd1 As System.Xml.XmlNode In ndList1
            If nd1.Name = "Form_Layout" Then
                Dim nd2 As System.Xml.XmlNode = GetChildNode(nd1, "Location")
                If nd2 IsNot Nothing Then
                    Dim nd3 As System.Xml.XmlNode = GetChildNode(nd2, "LocX")
                    If nd3 IsNot Nothing Then
                        Dim LocX_value As Integer = nd3.InnerText
                        Dim s = LocX_value
                    End If
                End If
            End If
        Next
    End If
    'Save data to a new xml file
    Dim outputXml As String = "C:\Users\mraso\Documents\location2.xml"
    xmlDoc.Save(outputXml)
End Sub

Function GetChildNode(ByRef node As System.Xml.XmlNode,
                      ByVal nodeName As String) As System.Xml.XmlNode
    If node IsNot Nothing Then
        Dim ndList1 As System.Xml.XmlNodeList = node.ChildNodes
        If ndList1 IsNot Nothing Then
            For Each nd1 As System.Xml.XmlNode In ndList1
                If nd1.Name = nodeName Then
                    Return nd1
                End If
            Next
        End If
    End If
    Return Nothing
End Function 
```

上面的代码将读取放在以下 xml 文件中节点“LocX”中的值 100。

```
<?xml version="1.0" encoding="utf-8"?>  
<Form_Layout>
  <Location>
    <LocX>100</LocX>
    <LocY>100</LocY>  
  </Location>  
  <Size>  
    <Width>300</Width>  
    <Height>300</Height>  
  </Size>  
</Form_Layout> 
```

# linux - 高级while控制语句

> ID：11581695
> 
> 赞同：2
> 
> 时间：2012-07-20T14:48:53.720
> 
> 标签：linux, scripting

我正在开发一个 posix 脚本 (Linux)，它获取网页、将内容存储在变量中并查找字符串“SUCCESS”。如果找到字符串，则不应执行循环的内容，如果未找到字符串，则应一遍又一遍地执行循环，直到找到为止。我试图让所有 curl 和 grep 的东西都发生在 while 循环的控制语句中，但我不确定这是否可能，到目前为止还没有成功：

```
while [ -z "site_status=`curl http://www.example.com/index.html | grep -o 'SUCCESS'`"     ];
do
if [ `echo "$site_status" | grep -o 'WAIT'` ]; then
    sleep 10s
elif [ `echo "$site_status" | grep -o 'RETRY'` ]; then
    sleep 10s
else
    exit 1
done 
```

我希望脚本尽可能干净，因此我尽量避免创建将网页内容保存在全局变量中的函数，并在 while 循环中使用此变量。

关于如何使上述while循环工作的任何建议？或者可能是更好的清洁解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:12:02.150

这个似乎可以满足您对我的要求：

```
until { t=`curl http://www.example.com 2> /dev/null` && echo $t | grep -q SUCCESS; };
    do (echo $t | grep -q "\(WAIT\|RETRY\)" && sleep 10) || exit 1
done 
```

# asp.net - 有没有办法强制 ASP.NET Web API 返回纯文本？

> ID：11581697
> 
> 赞同：131
> 
> 时间：2012-07-20T14:49:01.790
> 
> 标签：asp.net, asp.net-web-api

我需要从 ASP.NET Web API 控制器以纯文本形式返回响应。

我尝试过提出请求，`Accept: text/plain`但似乎没有奏效。此外，该请求是外部的，不受我的控制。我要做的是模仿旧的 ASP.NET 方式：

```
context.Response.ContentType = "text/plain";
context.Response.Write("some text); 
```

有任何想法吗？

*编辑，解决方案*：根据 Aliostad 的回答，我添加了[WebAPIContrib](http://nuget.org/packages/WebAPIContrib)文本格式化程序，在 Application_Start 中对其进行了初始化：

```
 config.Formatters.Add(new PlainTextFormatter()); 
```

我的控制器最终变成了这样：

```
[HttpGet, HttpPost]
public HttpResponseMessage GetPlainText()
{
  return ControllerContext.Request.CreateResponse(HttpStatusCode.OK, "Test data", "text/plain");
} 
```

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-10-23T10:04:42.423

嗯...我认为您不需要创建自定义格式化程序来完成这项工作。而是像这样返回内容：

```
 [HttpGet]
    public HttpResponseMessage HelloWorld()
    {
        string result = "Hello world! Time is: " + DateTime.Now;
        var resp = new HttpResponseMessage(HttpStatusCode.OK);
        resp.Content = new StringContent(result, System.Text.Encoding.UTF8, "text/plain");
        return resp;
    } 
```

这对我有用，无需使用自定义格式化程序。

如果您明确想要创建输出并覆盖基于 Accept 标头的默认内容协商，您将不想使用`Request.CreateResponse()`，因为它会强制使用 mime 类型。

而是显式地创建一个新`HttpResponseMessage`的并手动分配内容。上面的示例使用`StringContent`但还有很多其他内容类可用于从各种 .NET 数据类型/结构返回数据。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-04-04T21:30:30.650

对于 .net 核心：

```
[HttpGet("About")]
public ContentResult About()
{
    return Content("About text");
} 
```

[https://docs.microsoft.com/en-us/aspnet/core/mvc/models/formatting](https://docs.microsoft.com/en-us/aspnet/core/mvc/models/formatting)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-13T07:35:25.480

如果您只是在寻找一个简单的纯/文本格式化程序而不添加额外的依赖项，那么这应该可以解决问题。

```
public class TextPlainFormatter : MediaTypeFormatter
{
    public TextPlainFormatter()
    {
        this.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));
    }

    public override bool CanWriteType(Type type)
    {
        return type == typeof(string);
    }

    public override bool CanReadType(Type type)
    {
        return type == typeof(string);
    }

    public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, TransportContext transportContext)
    {
        return Task.Factory.StartNew(() => {
            StreamWriter writer = new StreamWriter(stream);
            writer.Write(value);
            writer.Flush();
        });
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
    {
        return Task.Factory.StartNew(() => {
            StreamReader reader = new StreamReader(stream);
            return (object)reader.ReadToEnd();
        });
    }
} 
```

* * *

不要忘记将它添加到您的 Global web api 配置中。

```
config.Formatters.Add(new TextPlainFormatter()); 
```

现在您可以将字符串对象传递给

```
this.Request.CreateResponse(HttpStatusCode.OK, "some text", "text/plain"); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-07-20T15:19:56.087

*   **请注意**不要在 ASP.NET Web API 中使用上下文，否则您迟早会后悔的。ASP.NET Web API 的异步特性使得使用`HttpContext.Current`成为一种负担。
*   使用纯文本格式化程序并添加到您的格式化程序。周围有几十个。你甚至可以很容易地写你的。[WebApiContrib](https://github.com/WebApiContrib/WebAPIContrib)有一个。
*   如果您已注册纯文本格式化程序，您可以通过在控制器中设置内容类型标题来强制它`httpResponseMessage.Headers`。`text/plain`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-20T14:53:32.673

当 Accept: text/plain 不起作用时，则没有为 text mime 类型注册的格式化程序。

您可以通过从服务配置中获取所有支持的格式化程序列表来确保没有指定 MIME 类型的格式化程序。

创建一个支持文本 mime 类型的非常简单的媒体类型格式化程序。

[http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-04T22:11:33.483

像下面这样的扩展可以减少行数并美化你的代码：

```
public static class CommonExtensions
{
    public static HttpResponseMessage ToHttpResponseMessage(this string str)
    {
        var resp = new HttpResponseMessage(HttpStatusCode.OK)
        {
            Content = new StringContent(str, System.Text.Encoding.UTF8, "text/plain")
        };

        return resp;
    }
} 
```

现在您可以在您的 : 中使用定义的扩展名`Web API`：

```
public class HomeController : ApiController
{
    [System.Web.Http.HttpGet]
    public HttpResponseMessage Index()
    {
        return "Salam".ToHttpResponseMessage();
    }
} 
```

通过路由`{DOMAIN}/api/Home/Index`可以看到以下纯文本：

> MyPlainTextResponse

# c - 在 cygwin 上使用 fscanf() 读取“文本”文件的行

> ID：11581698
> 
> 赞同：0
> 
> 时间：2012-07-20T14:49:02.067
> 
> 标签：c, windows, file-io, cygwin

考虑这段代码：

```
FILE * fp = fopen( filename, "r" );
int ret = fscanf(fp, "%d, %d, %d, %d, %d\n", &a, &b, &c, &d, &e);
if (ret != 5)
{
    // error and exit
}
long file_pos = ftell(fp);
printf("file position: %ld\n", file_pos); 
```

正在读取的文件行是：

```
6, 5, 3, 2, 6\r\n 
```

也就是说，该文件具有 Windows 行结尾。

文件位置是 20，而我预计它是 15。
但是，如果我将文件打开模式更改为二进制 ( `"rb"`)，文件位置是 15，正如预期的那样。

谷歌搜索后，我找不到任何关于为什么会发生这种情况的线索，但只发现人们建议不要使用 fscanf() 。

但我想知道为什么文件指针不在它应该在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:55:09.537

fscanf 可能正在缓冲文件 - 即它读取某个大小的块，然后对其进行解析以解码内容。

# jquery - JQuery 修改脚本

> ID：11581700
> 
> 赞同：0
> 
> 时间：2012-07-20T14:49:09.397
> 
> 标签：jquery

我目前有这个脚本可以使用提交按钮，谁能帮我修改这个脚本也可以使用链接（a href）

```
$(document).ready(function(e) {
    $('div.submitbutton').click(function(event) {
        $(this).val('Loading.. Please wait');
        $('#loading').show();
        setTimeout(function() {
            $('#myform').submit();
        }, 200);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:52:25.967

```
$(document).ready(function(e) {
  $('div.submitbutton, a').click(function(event) {
    $(this).val('Loading.. Please wait');
    $('#loading').show();
    setTimeout(function() {
        $('#myform').submit();
    }, 200);
  });
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T14:55:46.700

您只需要将`<a>`提交按钮添加到您的选择器中，例如

`$('div.submitbutton a').click(function.....`

# php - Memcached - 它是如何工作的

> ID：11581702
> 
> 赞同：6
> 
> 时间：2012-07-20T14:49:24.490
> 
> 标签：php, mysql, memory-management, memcached

我是 memcached 的新手，刚刚开始使用它。我有几个问题：

1.  我在我的 php 数据库类中实现了 MemCached，我将结果集（数组）存储在 memcache 中。我的问题是，对于网站来说，如果 4 个用户访问相同的页面和相同的查询执行过程，那么 memcache 会做什么？根据我对 1 个用户的理解，它将从 DB 中获取，其余 3 个系统将使用 Memcache。？那正确吗？

2.  4个用户意味着它的memcache对象会生成吗？但所有人都会使用相同的内存吗？是否同样适用于网站上的 2 个不同页面？因为 bith pages 将使用

    ```
    $obj = memcached->connect(parameter); 
    ```

3.  我进行了一个小测试。但是结果很惊人，当我使用普通的 mysql 语句执行查询时，执行时间比我的代码使用 memcached 时要短吗？这是为什么？如果是这样，为什么每个写入内存缓存的地方都很快。？

4.  请举一些例子来有效地测试 memcached 与 mormal 相比的执行时间`mysql_fetch_object`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:23:12.310

1.  Memcache 不能“自动”工作。它只是一个键 => 值映射。您需要确定如何使用它并实施它。

    首选方法是：
    A. 尝试从 memcache 获取
    B. 如果 A. 失败，从 db 获取，添加到 memcache
    C. 返回结果
    D. 如果您更新了该数据，则使所有关联的键失效

    这不会阻止在数据库上多次执行相同的查询。如果 2 个用户同时获得相同的数据，并且几乎同时执行所有操作，则从 memcache 获取的两个尝试都将失败并添加到 memcache。这通常没问题。

2.  在代码中，它将创建与当前用户一样多的连接，因为它是从为每个用户执行的 php 运行的。您也可能会连接多次（如果您对代码不小心的话），因此可能会连接更多次。

3.  很多时候，memcache 和 sql 的最大延迟实际上是网络延迟。如果 sql 在同一台机器上而 memcache 在不同的机器上，您可能会看到 memcache 的时间较慢。

    此外，许多框架/人没有正确实现多获取。因此，如果您有 100 个 id，并且您通过 id 从 memcache 中获取，它将执行 100 次单次获取而不是 1 次多次获取。这是一个巨大的减速。

    内存缓存很快。带有用于简单选择的查询缓存的 SQL 也很快。通常，您在以下情况下使用内存缓存：

    您正在运行的查询很复杂/很慢，
    或者
    使用 memcache 更具成本效益，然后让每个人都访问 SQL 服务器，
    或者
    您有这么多用户，数据库不足以跟上负载，
    或者
    您想尝试一个技术，因为你认为在你的简历上有很酷或很好。

4.  您可以使用各种分析软件，例如 xdebug 或 phprof。

或者，您可以这样做，尽管由于服务器上发生的其他事情不太可靠：

```
$start = microtime(true);
// do foo
echo microtime(true) - $start;

$start = microtime(true);
// do bar
echo microtime(true) - $start; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:58:23.570

使用 memcache 有两个原因：

**1\. 卸载您的数据库服务器**

也就是说，如果您的数据库服务器负载很高，因为您一遍又一遍地查询相同的内容，并且内部 mysql 缓存的工作速度没有预期的那么快。或者您可能会遇到阻塞服务器的写入性能问题，那么 memcache 将帮助您以一致且更好的方式卸载 mysql。

如果您自己的服务器没有压力，如果主要是为了提高性能，使用 memcached 可能没有任何优势。Memcached 仍然是一个服务器，你仍然必须连接到它并与之交谈，所以仍然保持网络方面。

**2\. 在用户之间共享数据而不依赖于数据库**

在另一种情况下，您可能希望在 Web 应用程序的用户之间共享一些数据或状态，而不依赖于文件或 sql 服务器。使用 memcached，您可以从用户的角度设置一个值并从另一个用户加载它。

很好的例子是用户之间的聊天日志，你不想将所有内容都存储在数据库中，因为它会进行大量的写入和读取，并且你想共享数据并且不在乎丢失所有内容以防出错来了，服务器重新启动......

我希望我的回答是令人满意的。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:00:17.270

1.  是的，这是正确的。基本上，这称为缓存，与 Memcached 本身无关。

2.  我不完全明白。如果所有 4 个用户都连接到同一个 memchache 守护程序，他们将使用共享内存，是的。

3.  你没有给出任何代码，所以很难说。可能有很多原因，所以我不会在提供这么少的信息的情况下得出结论。

4.  您需要通过深度数据包检测来衡量您的网络流量，以有效地测试和比较两个执行时间。我不能在这个答案中举一个例子。您可能只需要使用`microtime`并记录缓存是否被命中（结果已经在缓存中）或错过（尚未在缓存中，需要从数据库中获取）。

# python - Python：相对导入导入整个包

> ID：11581703
> 
> 赞同：1
> 
> 时间：2012-07-20T14:49:32.083
> 
> 标签：python

我刚刚注意到这样的相对导入：

```
from .foo import myfunc
print myfunc  # ok
print foo  # ok 
```

导入 foo 和 myfunc。这种行为是否记录在任何地方？我可以禁用它吗？

- 更新

基本上问题如下。

`bar/foo/__init__.py`：

```
__all__ = ['myfunc']

def myfunc(): pass 
```

`bar/__init__.py`：

```
from .foo import *
# here I expect that there is only myfunc defined 
```

`main.py`：

```
import foo
from bar import *  # this import shadows original foo 
```

我也可以添加`__all__`，`bar/__init__.py`但这样我必须在几个地方重复名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:57:15.197

我假设你的包布局是

```
my_package/
    __init__.py
        from .foo import myfunc
    foo.py
        def myfunc(): pass 
```

该语句`from .foo import myfunc`首先导入模块`foo`，通常不将任何名称引入本地范围。在这第一步之后，`myfunc`被导入到本地命名空间。

然而，在这种特殊情况下，第一步还将模块导入本地命名空间：包的子模块在导入时被放入包的命名空间，无论它们是从哪里导入的。由于`__init__.py`也在包的命名空间中执行，这恰好与本地命名空间一致。

您不能合理地禁用此行为。如果您不想`foo`在包的命名空间中使用该名称，我的建议是重命名模块以`_foo`将其标记为内部。

# macos - 在 Cocoa OS X 应用程序中，如何在启动时打开两个窗口？

> ID：11581704
> 
> 赞同：3
> 
> 时间：2012-07-20T14:49:34.403
> 
> 标签：macos, cocoa, interface-builder

我的 OS X 应用程序有两个窗口。我将一个放在 MainMenu.xib 中，另一个放在 SecondaryWindow.xib 中。

当我运行我的应用程序时，会显示 MainMenu.xib 中的窗口。我还希望 SecondaryWindow.xib 中的第二个窗口在启动时显示。我如何实现这一目标？为第二个窗口使用单独的 xib 文件是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:54:34.453

如果您想在没有一行代码的情况下执行此操作，请将`NSWindowController`对象添加到`MainMenu.xib`并将第二个 xib 的名称写入它的属性。加载 MainMenu.xib 时，将创建此窗口控制器并加载第二个 xib，如果第二个窗口配置为在启动时可见，则会弹出第二个窗口。

或者从例如`applicationDidFinishLaunching:`或以编程方式进行`awakeFromNib:`。

除了作为一种将 UI 分解为独立模块的工具之外，单独的 xib 还可以例如卸载其中的一些并节省内存（例如，当窗口关闭时）或多次加载。

在您的情况下，如果两个窗口始终必须在内存中，您可以安全地将它们保存在同一个 xib 中。

# java - Netbeans 拒绝识别 Eclipse 工作区

> ID：11581709
> 
> 赞同：2
> 
> 时间：2012-07-20T14:49:59.090
> 
> 标签：java, netbeans

当我尝试根据此说明 (http://netbeans.org/kb/docs/java/import-eclipse.html) 将我的 eclipse 项目导入我的 netbeans 时，我从 Netbeans 收到一条消息，说我的 eclipse 工作区无效. 我创建了一个新的工作区并在其中创建了 Eclipse 项目，只是为了调查我的初始工作区是否真的有问题，但我仍然从 netbeans 收到相同的消息。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:24:51.313

我有一个类似的问题，在我的案例中解决的问题是：

**`File -> Import Project -> Eclipse Project`**（就像你以前做的那样）

但是现在选择**“Import Project ignoring Project Dependencies”**。

# architecture - 领域对象设计

> ID：11581715
> 
> 赞同：3
> 
> 时间：2012-07-20T14:50:14.077
> 
> 标签：architecture, domain-driven-design, audit

在设计你的领域模型时，应该坚持代表问题领域的东西，并且领域模型不应该包含审计信息。

所以，如果我在设计一只猫，它可能看起来像这样：

```
public Cat {
    private Color furColor;
    private Color eyeColor;
    private boolean isDeclawed;
    etc...
} 
```

我不应该有像“updateDate”和“createTime”这样的属性，对吗？

现在，如果一个 Web 应用程序要在屏幕上显示一张猫的表格，你可能会有类似的东西：

```
名称眼睛颜色爪？最近更新时间
------ --------- ------ ------------
蓬松的绿色 No 10/31/2012
ETC...

```

因此，如果您不在域模型中保留上次更新时间，那么如何（正确地）将该数据获取到页面？

显然，我可能有一个设计不佳的域模型，但我想做得更好。

我曾考虑创建一个接受泛型的对象，以便我可以保持我的域模型原始。IE

```
public PersistableObject<T,K> {

    private T domainObject;
    private Date updateDate;
    private User updateUser;

    getters, setters, etc...
} 
```

但是，我担心我会遇到一些问题。

我已经对“域模型”和“更新日期”等进行了很多搜索......但我认为我错过了正确的术语。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:02:29.463

在您的情况下，我不确定我是否同意第一句话。如果您的域的一般用途包括需要显示这些日期，那么它们可能（并且可能应该）成为您的正常域对象的一部分。

如果你想清理你的域对象，你可以简单地创建一个接口来保存这些公共字段。

```
public interface ITrackedObject
{
    DateTime LastUpdated { get; set; }
    //etc....
}

public class Cat : ITrackedObject
{
    public DateTime LastUpdated { get; set; }
    //....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:36:59.893

我会尽力而为。我认为您可能将对象与记录混合在一起。最后更新的日期不是猫的更新时间，而是记录的更新时间。在 OO 中，很自然地认为您可以将关于该对象的所有内容封装在一个对象中。但是一个对象本身并不表达任何上下文。即使在你的猫中，你也有一个颜色类型，如果你没有办法获得 rgb 或 cmyk 值，它本身就什么都不是。

在 OO 的第一天展示的第一个示例讲师之一是，猫是动物，动物是生物等等。没有理由不能在您的域对象中进行最后一次修改，甚至最后一次更新在大多数情况下都是一个很好的调用。但是，如果您可以分离和建模对象将如何与其他对象交互，以及如果它们有太多定义，它们将如何受到限制（是的，我说限制是因为它已经决定了很多事情）。我并不是要建议过度考虑对象的重用，但是对于一个应该能够在 10 英尺或 10000 英尺视图中提供上下文和意义的模型来说，适当的关系非常重要。

我在平台研发工作了近 9 年，建模和开发平台跨越了很多年才完成。总是杀死我们的一件事是让一两个 ia-a 和 has-a 关系倒退。这将使模型变得无用，此时还不如拥有一个包含 200 列的平面表，但在大型甚至小型模型中重构几个关系永远是一个重大挫折。对象不是记录，甚至不是类，它们是赋予数据意义的东西。

所以简而言之 MyBizObject 扩展了 MyBizRecord 它是如何在所有书籍中推荐的，除了 MyBizProduct ... extend MyBizMaterial Array MyBizRecord[] changeHistory; .... 功能强大得多，如果有一天您需要添加 MyBizOrders[] 作为历史记录，您将不必重新设计整个模型和工厂。我确定这不是您所期望阅读的内容，但我希望它能让车轮转向您正在寻找的答案。

# ruby-on-rails-3 - 如何取消 before_add 关联回调中的保存？

> ID：11581716
> 
> 赞同：4
> 
> 时间：2012-07-20T14:50:15.403
> 
> 标签：ruby-on-rails-3, activerecord, exception-handling, has-many, model-associations

如果重复，我正在尝试取消（优雅地）has_many 元素的保存。这就是我的意思：

```
class AdmininstratorRole < ActiveRecord::Base
   has_many :permissions, before_add: :avoid_repetition

   def avoid_repetition(permission)
     raise "Repeated Permission" if self.permissions.where(klass: permission.klass, action: permission.action).count > 0
   end
end 
```

如果它不是关联的回调，我可以只返回 false 并且这将取消保存。但由于是关联的回调，因此我需要引发异常以取消保存，如此[处](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)所述。问题是我不知道如何从那个异常中优雅地恢复。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T05:49:13.267

您需要从添加权限角色的任何代码中捕获异常。

```
begin
  role.permissions.add(permission)
rescue
  # do whatever should happen here.
end 
```

虽然，您可能希望在尝试添加权限之前检查该权限是否存在。

# hibernate - 我们可以从@Embedded 类扩展@Entity 类吗

> ID：11581718
> 
> 赞同：1
> 
> 时间：2012-07-20T14:50:25.883
> 
> 标签：hibernate, jpa

```
@Embeddable
@MappedSuperclass
public class Address {
  private String street;
  private String city;

public String getStreet(){ return street;}
public String getCity(){ return city;}
public String setStreet(Sting street){ this.street= street;}
public String setCity(String city){ this.city=city;}

}

import org.hibernate.annotations.Entity;
@Entity
public class AddressHistory extends Address {
 Long id;
 @Id @XmlTransient
 @GeneratedValue(strategy = GenerationType.AUTO)
  public Long getId() {
    return m_id;
  }

 public void setId(Long m_id) {
    this.m_id = m_id;
 }
} 
```

这是我的场景，我想存储一个人的地址。而且我还必须存储一个人以前住过的所有地址。所以我正在做的是将当前地址嵌入到个人表中，并希望将他/她的所有先前地址存储在历史表中。为达到这个。我将 Address 类嵌入到 person 表和 HistoryAddress 表中。但就 OOPS 概念而言。HistoryAddress 是一个地址，因此将 Address 类组合成 AddressHistory 是不好的。然后我决定从 Address 类扩展 AddressHistory。但是当我这样做时，休眠给了我这个错误

```
Use of @OneToMany or @ManyToMany targeting an unmapped class AddressHistory. 
```

但显然我已经映射了 AddressHistory 我们可以这样做吗？我们可以从嵌入式类扩展实体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:07:44.797

不，实体不能扩展可嵌入。在 JPA 2.0 规范中，这被告知如下：

> 一个实体可以有一个非实体超类，它可以是一个具体的或抽象的类。 [22]
> ...
> [22] 超类不能是可嵌入类或 id 类。

关系的目标也必须是实体。Embeddable 不是实体，它没有自己的身份。如果您想要收集可嵌入物，请使用[@ElementCollection](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)。

# ruby-on-rails - Nokogiri 选择了太多文本

> ID：11581720
> 
> 赞同：0
> 
> 时间：2012-07-20T14:50:37.777
> 
> 标签：ruby-on-rails, ruby, regex, nokogiri

使用 Nokogiri 和 Ruby，我正在尝试使用 CSS 选择器解析街道地址。但是，它也包括我不想要的城市。

这是我正在使用的声明：

```
address = listing.at_css(".address").text 
```

这是HTML：

```
<div class="address">
  117/1 Main St ,
  <span class="green">
  <strong>
   <u>
    <a href="city">Chicago</a>
   </u>
  </strong>
  </span> 
```

我想要的结果：

```
117/1 Main St 
```

但我得到的结果是：

```
117/1 Main St , Chicago \n 
```

我正在考虑将正则表达式与 Nokogiri 结合使用，但我不确定 Ruby 是否可以在`" ,"`包括返回删除`" , "`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:08:25.830

这将返回`117/1 Main St ,`（带空格和逗号）：

```
listing.at_css(".address").child.text 
```

这将返回`117/1 Main St`（删除空格和逗号）：

```
listing.at_css(".address").child.text.sub(/ ,$/,"") 
```

# java - Require one argument only in Apache Commons CLI?

> ID：11581723
> 
> 赞同：6
> 
> 时间：2012-07-20T14:50:50.160
> 
> 标签：java, apache-commons, apache-commons-cli

I'm just wondering is there any way in the Apache Commons CLI library to specify that exactly one argument must be provided?

E.g. I have 2 command line arguments, but one (no more or no less) must be provided? I want either the ip or msisdn, but not neither and not both:

```
OptionBuilder.hasArg(true);
OptionBuilder.withDescription("Bla bla");
OptionBuilder.isRequired(false);
commandLineOptions.addOption(OptionBuilder.create("ip"));

OptionBuilder.hasArg(true);
OptionBuilder.withDescription("Bla bla");
OptionBuilder.isRequired(false);
commandLineOptions.addOption(OptionBuilder.create("msisdn")); 
```

Many thanks!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T14:54:42.143

It looks like you want a required [`OptionGroup`](http://commons.apache.org/proper/commons-cli/javadocs/api-1.2/org/apache/commons/cli/OptionGroup.html) containing the two mutually-exclusive `Option` values. Add that option group to `commandLineOptions`.

(This is only a guess based on the documentation. I've never actually used the project myself...)

# java - 圆内点碰撞响应：如何将点保持在圆内？

> ID：11581738
> 
> 赞同：1
> 
> 时间：2012-07-20T14:51:41.857
> 
> 标签：java, collision-detection, geometry, point

![这个问题的含义示意图。](../Images/d3f5397780ad96524c3ac561c28eb88c.png)

我已经给出了我当前需要帮助的小问题的图表。我的主要目的是防止该点**超出**圈子。没有其他的。

圆的中心位于 (x, y)。

我只解决了一点问题，这就是我的问题的碰撞检测部分，如下所示：

```
public void bound(Point p, Circle c){
    double distance = Math.hypot(p.x - c.x, p.y - c.y);
    if (distance >= c.radius){
        //Clueless from here on out.
    }
} 
```

我留下评论的部分是我无法弄清楚的地方。我确实尝试将点的`velocityX`和设置`velocityY`为 0，但我意识到只要它触及圆，该点就会保持原样。

所以，我有点卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:26:34.387

我已经解决了这个问题。

```
public void reflect(Hole h){
    //R = -2*(V dot N)*N + V
    //N is normalized.
    double nx = (this.position[0]+this.diameter/2) - (h.x+16);
    double ny = (this.position[1]+this.diameter/2) - (h.y+16);
    double nd = Math.hypot(nx, ny);
    if (nd == 0)
        nd = 1;
    nx /= nd;
    ny /= nd;
    double dotProduct = this.speed[0]*nx+this.speed[1]*ny;
    this.speed[0] += (float)(-2*dotProduct*nx);
    this.speed[1] += (float)(-2*dotProduct*ny);
}

public void reflectResponse() {
    for (int i = 0; i <= 1; i++) {
        position[i] -= speed[i];
        speed[i] *= 0.992f;
    }
} 
```

我从评论中尝试了 Oli Charlesworth 的方法，但它让事情变得更加……“复杂”，超出了我的预期。其他人提到我使用了完全 100% 基于矢量的算法，因为我非常依赖基于矢量的动作。

**给读过这篇文章的人的提示：**

1.  如果您正在处理对象移动和与矢量的碰撞，请寻求基于矢量的算法。
2.  如果您使用角度（度或弧度），请使用 Oli Charlesworth 的方法。

# javascript - 循环遍历一个 javascript 对象

> ID：11581742
> 
> 赞同：0
> 
> 时间：2012-07-20T14:51:52.803
> 
> 标签：javascript, jquery, object, jquery-animate

我有一个看起来像这样的 javascript 对象，

```
var telephones = {
        /*
        "phone" : {
            duration    :   time it takes to animate element in,
            leftIn      :   position of element once on the incoming animation
            leftOut     :   position of element on the outgoing animation
            delay       :   delay between two animations
        }
        */
        "phone1": {
            duration    :   850,
            leftIn      :   "408px",
            leftOut     :   "9999px",
            delay       :   0,
        },
        "phone2" : {
            duration    :   600,
            leftIn      :   "962px",
            leftOut     :   "999px",
            delay       :   setDelay(),
        },
        "phone3" : {
            duration    :   657,
            leftIn      :   "753px",
            leftOut     :   "9999px",
            delay       :   0,
        },
        "phone4" : {
            duration    :   900,
            leftIn      :   "1000px",
            leftOut     :   "9999px",
            delay       :   setDelay(),
        },
        "phone5" : {
            duration    :   1200,
            leftIn      :   "800px",
            leftOut     :   "9999px",
            delay       :   0,
        },
        "phone6" : {
            duration    :   792,
            leftIn      :   "900px",
            leftOut     :   "9999px",
            delay       :   setDelay(),
        },

    }; 
```

我正在使用上面的对象来尝试为幻灯片中的单个元素设置动画，这些元素已经通过 jquery 循环插件进行了动画处理。我按以下方式使用代码，

```
$('#slideshow').cycle({
    fx: 'scrollHorz',
    before  :   triggerParralex,
    after   :   removeParralex,
    easing  :   'easeOutCubic',
    speed   :   2000
}); 
```

所以上面的代码启动了循环插件。然后我使用之前和之后的回调来运行另外两个函数，这些函数看起来像这样，

```
function bgChange(curr, next, opts) {
    var background = $(".current").attr('data-background');
    $.backstretch(background, {target: "#backstrectch", centeredY: true, speed: 800});
}

function triggerParralex(curr, next, opts) {
    //move any phones that are in the viewport
    for (var key in telephones) {
        var obj = telephones[key];
        for (var prop in obj) {
            if($(".current ." + key).length) { //does .custom .phone1/2/3/4/5/6 exist if it does we can carry on
                setTimeout(function() {
                    $(".current ." + key).animate({
                        "left"      :   obj["leftOut"],
                        "opacity"   :   0
                    }, obj["duration"]);
                }, obj["delay"]);
            }
        }
    }

    //change the background
    bgChange();

    //remove the current class from the DIV
    $(this).parent().find('section.current').removeClass('current');

}

function removeParralex(curr, next, opts) {

    //give the slide a current class so that we can identify it.
    $(this).addClass('current');

    //animate in any phones that belong to the current slide
    for (var key in telephones) {
        var obj = telephones[key];
        for (var prop in obj) {
            console.log(obj["leftIn"])
            if($(".current ." + key).length) { //does .custom .phone1/2/3/4/5/6 exist if it does we can carry on
                setTimeout(function() {
                    $(".current .phone1").animate({
                        "left"      :   obj["leftIn"],
                        "opacity"   :   1
                    }, obj["duration"]);
                }, obj["delay"]);
            }
        }
    }

} 
```

我的问题如下，

我正在尝试为我的部分元素中的图像设置动画，部分元素已经通过循环插件滑动，这对我来说感觉就像它正在阻止我的图像在后期被动画化？

第二个问题似乎是，虽然我的脚本会很高兴地发现`$(".current .phone1")`似乎只是从对象中添加了 phone6 的属性，但我做了一个[fiddle](http://jsfiddle.net/BzLLH/)。

正如您从小提琴中看到的那样，这些部分`#slideshow`正在循环但其中的图像没有动画......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:10:12.070

正如 Felix Kling 在评论中所说，你有一个经典的“闭环内循环”问题。

这是一个（经典）解决方案：

```
for (var key in telephones) {
    if($(".current ." + key).length) { //does .custom .phone1/2/3/4/5/6 exist if it does we can carry on
        var obj = telephones[key];
        (function(obj){
            setTimeout(function() {
                $(".current .phone1").animate({
                    "left"      :   obj["leftIn"],
                    "opacity"   :   1
                }, obj["duration"]);
            }, obj["delay"]);
        })(obj);
    }
} 
```

这个想法是将 obj 嵌入另一个闭包中，将其与循环隔离，从而防止其更改。

# magento - Magento：在代码的配置 xml 数据中设置一个节点？

> ID：11581751
> 
> 赞同：2
> 
> 时间：2012-07-20T14:52:23.363
> 
> 标签：magento, routing

我配置了一个路由器，如下所示：

```
<rewrite>
   <My_Module>
        <from><![CDATA[#^/computer/configuration/#]]></from>
        <to>/config/configuration/</to>
        <complete>1</complete>
    </My_Module>
</rewrite> 
```

这有效，每当我访问一个看起来像*/computer/configuration/*的 URL 时，它都会路由到*/config/configuration/*。我想要的是改变代码中的这种行为。所以，在我的代码中，我得到了这样的信息：

```
$from = (string) Mage::getConfig()->getNode('global/rewrite/My_Module/from'); 
```

这行得通，我得到的是*#^/computer/configuration/#*。现在我尝试更改来自：

```
$from = '#^/somethingelse/configuration/#';
Mage::getConfig()->setNode('global/rewrite/My_Module/from', $from);
Mage::getConfig()->saveConfig();

// This returns me the new value (#^/somethingelse/configuration/#)
$from = (string) Mage::getConfig()->getNode('global/rewrite/My_Module/from'); 
```

但是路由不起作用，它给了我 404 not found 页面。看来，我设置的值并没有真正保存。我是否忘记了代码中的某些内容？

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:38:30.997

我相信配置保存后需要重新初始化。尝试这个：

```
Mage::app()->getConfig()->reinit(); 
```

...你可能还需要这个：

```
Mage::app()->reinitStores(); 
```

# ruby-on-rails-3 - 在rails 3.2中使用关联上的构建方法在内存中创建对象

> ID：11581753
> 
> 赞同：1
> 
> 时间：2012-07-20T14:52:30.270
> 
> 标签：ruby-on-rails-3, activerecord

我有 2 个模型，如下所示

```
 Class Post  
      has_many :comments, :dependent => :destroy 
    end  

    Class Comment  
      validates_presence_of :post
      validates_presence_of :comment
      belongs_to :post  
    end 
```

在评论控制器中，

```
 def create
      comment = @post.comments.build(params[:comment])
      if comment.save
        // some code
      else
        // some code
      end
    end 
```

当评论根据验证无效时，不会保存评论。但是当在视图中访问 @post 对象时，它包含一个带有 nil id 的评论对象。这在 Rails 2.3.11 中没有发生。我们升级到 Rails 3.1，然后现在升级到 Rails 3.2。当我执行@post.reload 时，这个带有 nil id 的评论对象消失了。我们正在使用 REE。

我试图交换构建和新方法。它的结果与构建相同。在我们的应用程序中发现了类似的行为。这是预期的行为还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:15:20.577

这对我来说似乎是预期的行为。

通过[http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference](http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference)

> 4.1.1.3 build_association(属性 = {})
> 
> build_association 方法返回关联类型的新对象。该对象将从传递的属性中实例化，并 **设置通过该对象的外键的链接**，但尚未保存关联的对象。

当您调用时`@post.comments.build(...)`，Rails：

1.  创建一个新`Comment`对象
2.  设置`comment.post_id`为`@post.id`。
3.  将其插入`comments`数组（在内存中）。

当验证失败时，它不会删除评论，并且评论会保留在内存中的评论数组中。当`@post`得到你的观点时，`@post.comments`仍然包括那个经过严重验证的评论。

至于如何处理，我不确定。也许你可以（在你的控制器中）做类似的事情......（虽然感觉很丑。）

```
def create
  comment = @post.comments.build(params[:comment])
  if comment.save
    // some code
  else
    @bad_comment = @post.comments.pop
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T09:53:32.910

我在使用 rails 3.2 时遇到了类似的问题

首先，您需要在控制器中创建两个单独的方法。它们将如下所示：

1.  用于使用**“build_association”构建评论的“新”方法**

    ```
    def new
        @post = Post.new
        comment = @post.build_comments
    end 
    ```

2.  使用**“create_association”实际创建评论的“创建”方法**

    ```
    def create 
        @post = Post.new(params[:post])
        comment = @post.create_comments(params[:post][:comment_attributes])

        if comment.save
            // some code
        else
            @bad_comment = @post.comments.pop
        end
    end 
    ```

**注意：**我建议使用“fields_for”通过表单将“comment”属性作为“post”的嵌套属性传递。

**请参考：** [http ://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# android - 用于 phonegap/jquerymobile 应用程序的 Android 模拟器上未显示图像

> ID：11581756
> 
> 赞同：4
> 
> 时间：2012-07-20T14:52:35.937
> 
> 标签：android, jquery-mobile, cordova, android-emulator

我正在使用 jQuery Mobile 开发 PhoneGap 应用程序，由于某种原因，jQuery 移动图像不会显示在模拟器中或部署到手机时。然而，当使用 Web 浏览器在本地运行站点时，它们可以正常工作吗？

这是我第一次使用 Eclipse（老实说希望是我最后一次）。有什么我想念的吗？

文件夹结构

![文件夹结构](../Images/5969a779b0b51820d4253459b75c55ce.png)

铬合金：

![铬合金](../Images/0051f0ced0e39f35893d112445560bd6.png)

模拟器： ![模拟器](../Images/837b19e52b37e9ec820d07f3ff97abbc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:20:29.937

令人惊讶的是，这是因为 css 图像引用在设备上区分大小写。将“Images”文件夹重命名为“images”解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T11:33:17.497

如果您使用具有 32 位 CMYK 颜色模式的图像，则您的图像将不会显示。要解决此问题，请完全使用 PNG 图像或 RGB 颜色模式。

# javascript - 文本区域。在 Shift + Enter 上，追加 html 换行符。如何？

> ID：11581757
> 
> 赞同：2
> 
> 时间：2012-07-20T14:52:36.353
> 
> 标签：javascript, jquery, html

我在互联网上找到了一个 textarea 插件，并对其进行了一些修改以满足我的需要。它以我想要的方式工作，除了一个小细节。

如您所见，当我键入或删除字符时，它会展开和折叠文本区域。

如果我按下回车键，它会生成一个评论 div，其中包含我在 textarea 中输入的内容。

我的问题是，**如何在`<br />`每次用户按下 Shift + Enter 时将一个附加到我的 new_comment 变量？

```
/*!
 * ----------------------------------------------------------------------------
 * "THE BEER-WARE LICENSE" (Revision 42):
 * <jevin9@gmail.com> wrote this file. As long as you retain this notice you
 * can do whatever you want with this stuff. If we meet some day, and you think
 * this stuff is worth it, you can buy me a beer in return. Jevin O. Sewaruth
 * ----------------------------------------------------------------------------
 *
 * Autogrow Textarea Plugin Version v2.0
 * http://www.technoreply.com/autogrow-textarea-plugin-version-2-0
 *
 * Date: March 13, 2011
 */
jQuery.fn.autoGrow = function(){

    return this.each(function(){
        // Variables
        var colsDefault = this.cols;
        var rowsDefault = this.rows;

        //Functions

        var grow = function() {
            growByRef(this);
        }

        var onFocus = function(obj) {

      if ($(this).val() != 'Write a comment...') {
        return;
      } else {
        $(this).parents(".comment_new_container").children("img").show();
        //$(this).height(34);
        $(this).width(745);
        $(this).val(''); 
      }

        }

        var onBlur = function(obj) {

      if ($(this).val().length == 0) { 
        $(this).parents(".comment_new_container").children("img").hide();
        //$(this).height(16);
        $(this).width(795);
        $(this).val('Write a comment...');
      } 

        }

        var growByRef = function(obj) {

        var new_comment = '';

      if (!obj.shiftKey && obj.keyCode == 13) {

        obj.preventDefault();

        new_comment += '<div class="comment_container" id="001">';
        new_comment += '<a href="#"><i class="comment_delete">&nbsp;</i></a>';
        new_comment += '<img src="img/avatar45.png" />';
        new_comment += '<a href="/">Mickey Mouse</a>';
        new_comment += '<br/>';
        new_comment += '<div class="comment_content">' + $(this).val(); + '</div> <!-- End comment_content -->';
        new_comment += '<div class="comment_timestamp">13 minutes ago</div> <!-- End comment_timestamp -->';
        new_comment += '</div> <!-- End comment_container -->';

        $(new_comment).insertBefore($(this).parents(".comment_new_container"));

            var comment_total = parseInt($('.social_menu_right li a').children('.meta.comment_total').text(), 10) + 1;
          $('.social_menu_right li a').children('.meta.comment_total').text(comment_total);

        $(this).val('Write a comment...');
        $(this).blur();
        growByRef(this);

      } else {

        var linesCount = 0;
        var lines = obj.value.split('\n');

        for (var i=lines.length-1; i>=0; --i)
        {
          linesCount += Math.floor((lines[i].length / colsDefault) + 1);
        }

        if (linesCount >= rowsDefault) {
          obj.rows = linesCount + 1;
        } else {
          obj.rows = rowsDefault;           
        }

            }

    }

        var characterWidth = function (obj){
            var characterWidth = 0;
            var temp1 = 0;
            var temp2 = 0;
            var tempCols = obj.cols;

            obj.cols = 1;
            temp1 = obj.offsetWidth;
            obj.cols = 2;
            temp2 = obj.offsetWidth;
            characterWidth = temp2 - temp1;
            obj.cols = tempCols;

            return characterWidth;
        }

        // Manipulations

        $(this).css("width","auto");
        $(this).css("height","auto");
        $(this).css("overflow","hidden");

        this.style.width = ((characterWidth(this) * this.cols) + 6) + "px";

        $(this).bind("focus", onFocus);
        $(this).bind("blur", onBlur);
        $(this).bind("keypress", growByRef);
        $(this).bind("keyup", grow);

    });
}; 
```

感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:15:31.923

尝试在 growByRef 函数的顶部添加它：

```
 if (obj.shiftKey && obj.keyCode == 13) {
    $(this).val($(this).val() + "\n");
    return;
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T15:12:03.423

[在此处](http://api.jquery.com/keydown/) 查看这两个链接

此案例与您的[相似](https://stackoverflow.com/a/5842842/1529584)

# c - 指向 char 数组的 char 指针

> ID：11581759
> 
> 赞同：1
> 
> 时间：2012-07-20T14:52:49.883
> 
> 标签：c

```
#include<stdio.h>
int main(){
 char a[3];
 char *b=NULL;
 a[0]=0;
 a[1]=1;
 a[2]=2;
 b = a;
 printf("%c",b);
 b++;
 printf("%c",b);
 b++;
 printf("%c",b);
 return 0;
} 
```

我试图通过将指针增加 1 来打印值 0、1、2。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:55:42.987

b 本身就是一个指针，您必须取消引用它才能获得实际值：

```
printf("%d", *b);
b++;
printf("%d", *b);
b++; 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:55:23.790

`%c`告诉`printf`将`char`参数解释为字符代码（很可能是 ASCII）。改为使用`%d`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T14:57:30.433

```
#include<stdio.h>
int main(){
 char a[3];
 char *b=NULL;
 a[0]='0';
 a[1]='1';
 a[2]='2';
 b = a;
 printf("%c",*b);
 b++;
 printf("%c",*b);
 b++;
 printf("%c",*b);
 return 0;
} 
```

# html - IFrame 请求已取消

> ID：11581760
> 
> 赞同：4
> 
> 时间：2012-07-20T14:52:52.253
> 
> 标签：html, iframe

这个[在 iframe 中加载 url 的示例有效](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe)。但是，当我将 url 更改`http://www.yahoo.com`为 iframe 之类的内容时[，不会加载 antyhing](http://jsfiddle.net/5bAXh/1/)

这是一个[并排的例子](http://jsfiddle.net/5bAXh/2/)。

在 Chrome 的开发人员工具的网络选项卡中，我看到对雅虎的请求已被取消。在 FF 中它不会给出任何错误，只是不会返回任何内容。IE9 会提示无法显示此内容。

![在此处输入图像描述](../Images/6e8df7990968a3d77f7fd8430860775c.png)

这发生在 Chrome、FF 和 IE9 中（我没有测试过以前版本的 IE）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:19:21.667

那是因为雅虎本身阻止了这种情况的发生。

这里已经注意到：[https ://stackoverflow.com/a/9013722/476786](https://stackoverflow.com/a/9013722/476786)

要亲自查看，请尝试将源设置为[http://www.google.com/](http://www.google.com/)，这将无法正常工作，但然后尝试[http://www.bbc.co.uk/](http://www.bbc.co.uk/)即可。

可能按此处所述工作：[https](https://stackoverflow.com/a/2896705/476786) ://stackoverflow.com/a/2896705/476786使用`X-FRAME-OPTIONS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T17:46:27.653

如果托管网页的站点强制使用安全`HTTPS`连接，则某些浏览器（当然是 chrome）将要求同时使用所有网络资源`HTTPS`。

基本上，如果您的网站强制`HTTPS`，请尝试设置`src="https://yahoo.com"`

这不会直接解决 OP 的答案，因为它是 Yahoo 本身的限制，但是查看此页面的其他人可能会因此而遇到此问题（我是）。

# java - 使用泛型来避免循环和强制转换

> ID：11581762
> 
> 赞同：0
> 
> 时间：2012-07-20T14:52:55.423
> 
> 标签：java, generics

我有一个对象转换类，可以将我的域级别对象转换为 DTO。

我实际上具有以下结构

```
class RuleGroupDTO {
List<RuleDTO> ruleDTOs;
// other members 
```

`EvaluationRuleDTO`并且`AssignmentRuleDTO`都从 RuleDTO 扩展

我的转换 API 如下：

```
public RuleGroupDTO convert(RuleGroup ruleGroup); 
```

因此，当我将域传递`RuleGroup`给转换类时，它会查看与 关联的代码`RuleGroup`，然后构造`EvaluationRuleDTO`或`AssignmentRuleDTOs`封装在`RuleGroupDTO`.

当我取回我的 RuleGroupDTO 时，我知道它将包含一个`List<RuleDTO>`要么是`List<EvaluationRuleDTO>`要么`List<AssignmentRuleDTO>`。

但是，要获得正确的类版本，我需要遍历`List<RuleDTO>`并强制转换为`List<EvaluationRuleDTO>`或`List<AssignmentRuleDTO>`

这看起来很乱，我想我可以利用一些通用概念来避免执行这个循环+强制转换。

在这里更改我的 API 或对象结构以利用泛型的可能方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:39:34.520

用来避免强制转换，看在`List<RuleDTO>`上帝的份上，不要写循环。让 RuleDTO 实现访问者模式，允许任何消费者以类型安全的方式处理任何一种子类。

Java[很讨厌](http://jazzjuice.blogspot.com/2010/10/6-things-i-hate-about-java-or-scala-is.html)变体类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:58:44.110

如果您有一定数量的类型并且希望将它们分开，则返回一个 pojo，其中将各种类型分成不同的集合，例如：

```
public class DTOResult {
  public List<EvaluationRuleDTO> evalDTOs;
  public List<AssignmentRuleDTO> assignDTOs;
} 
```

# c# - C# .net windows 服务与远程 Web 服务通信

> ID：11581763
> 
> 赞同：0
> 
> 时间：2012-07-20T14:52:59.693
> 
> 标签：c#, .net, web-services, soap, filesystemwatcher

我有一个在 C#/.net 中实际上无法实现的要求。

这是我必须做的：

*   编写一个持续运行并监视文件夹的 C# windows 服务
*   更改后，它会启动并解析该文件夹中的文件
*   获取此文件并将其传递给远程 Web 服务（soap 封装）。

这看起来很简单，但如果无法做到这一点，我愿意接受其他更简单或更好的解决方案。

* * *

我要补充的一件事是文件实际上位于 FTP 文件夹而不是常规文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:55:44.560

是的，有可能

1.  [FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)可让您监控文件系统更改
2.  [WCF上传](http://code.msdn.microsoft.com/windowsdesktop/Upload-files-using-a-REST-13f16af2)文件示例示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:56:01.333

这就像听起来一样简单。创建 Windows 服务，通过“添加 Web 引用”引用您的 SOAP API，并使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)监视文件更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T14:59:55.873

你可以`FileSystemWatcher`喜欢其他人的建议，但我个人不会，因为它不可靠。

我会使用`File.Exists`结合 a`Timer`和 poll 的方法，更可靠

# android - android检查项目是否被点击

> ID：11581766
> 
> 赞同：4
> 
> 时间：2012-07-20T14:53:28.007
> 
> 标签：android, gridview, click, boolean

我刚开始使用 Android 编程，事情就是这样。

如何检查 GridView 中的项目是否已被单击？类似于为 Grid 中的每个项目分配一个布尔“单击”并在每次单击该项目时更改它的值。

目前我只是使用一个布尔数组，所以如果我点击 item[x] 它会切换 bool[x] 然后我检查它是否为真/假并相应地修改项目，但必须有一个更整洁的方式做同样的事情！

我的代码：

```
package com.example.mojrecnik;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.AdapterView;
import android.widget.TextView;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class Glavna extends Activity implements AdapterView.OnItemClickListener {

    private static final int LENGTH_SHORT = 0;
    GridView grid;
    TextView tekst;
    String[] izfajla = new String[200];
    String[] izfajla2 = new String[200];
    boolean[] kliknutmrs = new boolean[200];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_glavna);

        grid=(GridView)findViewById(R.id.grid);
        grid.setAdapter(new MojAdapter());
        grid.setOnItemClickListener(this);

        //tekst=(TextView)findViewById(R.id.tekst);

        citaFajl();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_glavna, menu);
        return true;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        TextView klik = (TextView)arg1.findViewById(R.id.gridtekst2);
        if(kliknutmrs[arg2]) {
            kliknutmrs[arg2]=!kliknutmrs[arg2];
            klik.setText(izfajla[arg2]); }
        else {
            kliknutmrs[arg2]=!kliknutmrs[arg2];
            klik.setText(izfajla2[arg2]); }
    }

    public void onNothingSelected(AdapterView<?> arg0) {

    }

    public void citaFajl() {
        File kartica = Environment.getExternalStorageDirectory();
        File fajl = new File(kartica, "reci.txt");
        StringBuilder tekst = new StringBuilder();
        int i=0;
        try {
            BufferedReader br = new BufferedReader(new FileReader(fajl));
            String linija;
            String[] prva;

            while ((linija = br.readLine())!=null) {
                prva = linija.split("-");
                izfajla[i]=prva[0];
                if(prva[1].length()>0)
                    izfajla2[i]=prva[1];
                i++;
            }
        }
        catch (IOException e) {
            Toast greska = Toast.makeText(this, e.getMessage().toString(), LENGTH_SHORT);
            greska.show();
        }
    }

    private class MojAdapter extends ArrayAdapter {

        public MojAdapter() {
            super(Glavna.this, R.layout.gridvju, izfajla);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            //vazno!! pravim vju od inflatera i vracam vju a ne convertvju!
            View gridvju;

            if(convertView==null) {
                LayoutInflater inflater = getLayoutInflater();
                gridvju = inflater.inflate(R.layout.gridvju, parent, false);
            }
            else
                gridvju=convertView;

            TextView tekst2 = (TextView)gridvju.findViewById(R.id.gridtekst2);
            tekst2.setLines(2);
            tekst2.setText(izfajla[position]);

            return(gridvju);
        }
    }
} 
```

和 XML（主要）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<!--  
    <TextView
        android:id="@+id/tekst"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="20dp"
        android:layout_below="@id/tekst" >
    </TextView> -->

    <GridView
        android:id="@+id/grid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:horizontalSpacing="@dimen/padding_medium"
        android:numColumns="3"
        android:stretchMode="columnWidth" >

    </GridView>

</RelativeLayout> 
```

和布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/gridtekst2" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:01:35.400

Here is how i worked it in the end. I created a custom class to contain text which is displayed and also added a bool in there so now every element in my gridview has its own 'click-checker'. note: this program simply alternates between 2 words onClick, if you wanna try it use text file with data formated 'word1 - word2'

Code:

```
package com.example.mojrecnik;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.AdapterView;
import android.widget.TextView;
import android.widget.Toast;

public class Glavna extends Activity implements AdapterView.OnItemClickListener {

    private static final int LENGTH_LONG = 1;
    GridView grid;
    List<Rec> lReci = new ArrayList<Rec>(); //this is our list of data which contains text and bool check

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_glavna);

        citaFajl();

        grid=(GridView)findViewById(R.id.grid);
        grid.setAdapter(new MojAdapter());
        grid.setOnItemClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_glavna, menu);
        return true;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        VjuHolder holder=(VjuHolder)arg1.getTag();

        if(!lReci.get(arg2).clicked)
            holder.text.setText(lReci.get(arg2).rec2);
        else
            holder.text.setText(lReci.get(arg2).rec1);

        lReci.get(arg2).clicked = !lReci.get(arg2).clicked;
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        //////////////////////////////////////////
    }

    public void citaFajl() {

        try {
            BufferedReader br = new BufferedReader(new FileReader(new File(Environment.getExternalStorageDirectory(), "reci.txt")));
            String[] reci = new String[2];
            String linija;
            Rec rec;

            while ((linija = br.readLine()) != null) {
                reci = linija.split("-"); //because data in my file is formatted 'word1 - word2', we separate them now so we can alternate between them
                reci[1]=reci[1].trim();
                rec = new Rec(reci[0], reci[1], false);
                lReci.add(rec);
            }
        }
        catch (IOException e) {
            Toast.makeText(this, e.getMessage().toString(), LENGTH_LONG).show();
        }
    }

    private class MojAdapter extends ArrayAdapter<String> {

        public MojAdapter() {
            super(Glavna.this, R.layout.gridvju);
        }

        public int getCount() {
            return lReci.size(); //here we explicitly set the total number of grid elements so it doesn't go out of index range
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            VjuHolder holder;

            if(convertView==null) {
                LayoutInflater inflater = getLayoutInflater();
                convertView = inflater.inflate(R.layout.gridvju, parent, false);
                holder = new VjuHolder();
                holder.text = (TextView)convertView.findViewById(R.id.gridtekst2);
                convertView.setTag(holder); }
            else
                holder=(VjuHolder)convertView.getTag();

                if(lReci.get(position).clicked) //check to make grid update according to the clicked state of our elements [when scrolling]
                    holder.text.setText(lReci.get(position).rec2);
                else
                    holder.text.setText(lReci.get(position).rec1);

                holder.text.setLines(2);

            return(convertView);
        }
    }
}

//holder class
class VjuHolder {
    TextView text;
}

//here we put the text to be displayed along with bool to check in which state is the clicked element
class Rec {
    String rec1, rec2;
    boolean clicked;

    Rec(String rec, String druga, boolean klik) {
        rec1 = rec;
        rec2 = druga;
        clicked = klik;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:25:44.793

First of all initialize your boolean array in onCreate as:

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grid);

    grid=(GridView)findViewById(R.id.grid);
    grid.setAdapter(new MojAdapter());
    grid.setOnItemClickListener(this);

  //   HERE  I have initialized with true valuse
    for(int i=0; i<kliknutmrs.length; i++) {
        kliknutmrs[i] = true;
    }
   //tekst=(TextView)findViewById(R.id.tekst);

   citaFajl();
} 
```

Then at onClick, just ckeck that the boolean array hav **"true"** value; so make that position value **"false"** and same time invert the text value with another String[] array.

At second time it will goto to else part:

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    TextView klik = (TextView)arg1.findViewById(R.id.gridtekst2);
    if(kliknutmrs[arg2]) {
        System.out.println(" ------------ 11111111111 -----------");
        kliknutmrs[arg2]=!kliknutmrs[arg2];
        klik.setText(izfajla2[arg2]); }
    else {
        System.out.println(" ------------- 222222222 -----------");
                //  NO  NEED   //kliknutmrs[arg2]=!kliknutmrs[arg2];
        klik.setText(izfajla2[arg2]); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:01:37.473

没有办法查明按钮之前是否被点击过。我认为您一直在寻找某种类属性，例如

```
 if(button.wasOnceClicked){         //THERE IS NO CODE LIKE THIS
    } 
```

我对吗？好吧，Button 类没有这个。但是，您可以创建 Button 的子类并添加该属性，还可以添加一些处理该属性的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:58:47.507

没有保留“点击历史”之类的东西。如果用户点击任何东西，如果分配了 onClickListener，您将收到有关该点击的通知。但是您无法通过查询 UI 对象来检查。布尔数组没问题，但我会改用 List 或 ArrayList 并在我的 onClickListener 中简单地添加被点击项目的 id。

# java - 如何动态映射 spring-webmvc 路径？

> ID：11581767
> 
> 赞同：12
> 
> 时间：2012-07-20T14:53:30.407
> 
> 标签：java, spring-mvc, path

这是一个交叉帖子。我也在春季论坛上发布了同样的问题。[http://forum.springsource.org/showthread.php?128579-Database-driven-Controller-Mapping](http://forum.springsource.org/showthread.php?128579-Database-driven-Controller-Mapping)

您好我正在尝试进行**数据库驱动的控制器映射**，以便它们可以在**运行时**更改。

到目前为止，我所拥有的如下。

自定义处理程序适配器，以后总是可以优化。

```
@Component
public class DatabasePageUrlHandlerMapping extends AbstractUrlHandlerMapping implements PriorityOrdered {

    @Override
    protected Object getHandlerInternal(HttpServletRequest request)
            throws Exception {
        String lookupPath = getUrlPathHelper().getLookupPathForRequest(request);
        List<Page> pages = Page.findAllPages();
        for (Page page : pages) {
            if (lookupPath.equals(page.getSeoPath())) {
                Object handler = getApplicationContext().getBean("_pageViewController");
                return new HandlerExecutionChain(handler);
            }
        }
        return super.getHandlerInternal(request);
    }

} 
```

我的 webmvc-config 如下所示（相关部分）

代码：

```
<context:component-scan base-package="com.artiststogether"
    use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller"
        type="annotation" />
</context:component-scan>

<!-- If I don't put an order into this it doesn't fail over to the implementation why? -->
<bean class="com.artiststogether.web.DatabasePageUrlHandlerMapping" p:order="-1" />
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

这似乎选择了正确的控制器。但是，当转到数据库定义的路径（例如“/a”）时，我收到一个错误

```
java.lang.NullPointerException
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodResolver.useTypeLevelMapping(AnnotationMethodHandlerAdapter.java:675)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodResolver.resolveHandlerMethod(AnnotationMethodHandlerAdapter.java:585)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:431)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        .... 
```

我需要定义一个自定义注释处理程序吗？

老实说，这整个过程似乎比它应该的更困难。我想要 1 个控制器来处理对外部定义的 url 路径的所有请求，这是正确的解决方法。

如果可能的话，我还想将匹配到控制器的对象传递给控制器​​，而不是在控制器中进行新的查找。这基本上将形成我的视图模型。

关于如何使它工作的任何建议？

**编辑** 为了记录，NPE在这里

```
 private boolean useTypeLevelMapping(HttpServletRequest request) {
        if (!hasTypeLevelMapping() || ObjectUtils.isEmpty(getTypeLevelMapping().value())) {
            return false;
        }
        return (Boolean) request.getAttribute(HandlerMapping.INTROSPECT_TYPE_LEVEL_MAPPING);
    } 
```

**另一个** 从 pom.xml 编辑版本号

```
<properties>
    <aspectj.version>1.6.12</aspectj.version>
    <java.version>6</java.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <roo.version>1.2.1.RELEASE</roo.version>
    <slf4j.version>1.6.4</slf4j.version>
    <spring.version>3.1.0.RELEASE</spring.version>
<spring-security.version>3.1.0.RELEASE</spring-security.version>
</properties> 
```

**我已经在下面自己回答了这个问题，但我仍然对人们权衡正确的方法很感兴趣。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:15:27.557

[显然，从这里和spring 论坛](http://forum.springsource.org/showthread.php?128579-Database-driven-Controller-Mappings)上缺乏相反的答案来看，似乎在 spring 框架内没有更简单的方法可以做到这一点。

然而，我设法让它工作，我在 github 上共享了一个项目，该项目可以使用 maven 构建，添加 4 个类以简化动态添加类的过程。这个项目可以在[https://github.com/Athas1980/MvcBackingBean](https://github.com/Athas1980/MvcBackingBean)找到。我还将分享另一个项目以证明它有效。

感谢 Marten Deinum 和 Rossen Stoyanchev

* * *

**对于那些对如何自己实现这一目标感兴趣的人，您需要执行以下操作**

1.  实现 HandlerMapper 的实例 这为您提供了控制器类和您要映射到的 url 之间的映射。

    ```
    //   Copyright 2012 Wesley Acheson
    //
    //   Licensed under the Apache License, Version 2.0 (the "License");
    //   you may not use this file except in compliance with the License.
    //   You may obtain a copy of the License at
    //
    //       http://www.apache.org/licenses/LICENSE-2.0
    //
    //   Unless required by applicable law or agreed to in writing, software
    //   distributed under the License is distributed on an "AS IS" BASIS,
    //   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    //   See the License for the specific language governing permissions and
    //   limitations under the License.

    package com.wesley_acheson.spring;

    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import org.springframework.core.PriorityOrdered;
    import org.springframework.web.servlet.HandlerExecutionChain;
    import org.springframework.web.servlet.handler.AbstractUrlHandlerMapping;
    import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

    /**
     * A Handler mapper that delegates to a {@link UrlBackingBeanMapper} to know
     * whether it should match a url. If it does match a url then it adds the bean
     * which matches the url to the request.
     * 
     * @author Wesley Acheson
     * 
     */
    public class BackingBeanUrlHandlerMapper extends AbstractUrlHandlerMapping
            implements PriorityOrdered {

        private UrlBackingBeanMapper<?> urlMapper;

        /**
         * 
         * @param urlMapper
         *            The bean which matches urls with other beans.
         */
        public void setUrlMapper(UrlBackingBeanMapper<?> urlMapper) {
            this.urlMapper = urlMapper;
        }

        protected UrlBackingBeanMapper<?> getUrlMapper() {
            return urlMapper;
        }

        public static final String BACKING_BEAN_ATTRIBUTE = BackingBeanUrlHandlerMapper.class
                .getName() + ".backingBean";

        /**
         * The controller which control will be passed to if there is any beans
         * matching in @{link {@link #setUrlMapper(UrlBackingBeanMapper)}.
         */
        public Object controller;

        /**
         * @param controller
         *            <p>
         *            The controller which control will be passed to if there is any
         *            beans matching in @{link
         *            {@link #setUrlMapper(UrlBackingBeanMapper)}.
         */
        public void setController(Object controller) {
            this.controller = controller;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.web.servlet.handler.AbstractUrlHandlerMapping#
         * lookupHandler(java.lang.String, javax.servlet.http.HttpServletRequest)
         */
        @Override
        protected Object lookupHandler(String urlPath, HttpServletRequest request)
                throws Exception {

            if (urlMapper.isPathMapped(urlPath)) {
                Object bean = urlMapper.retrieveBackingBean(urlPath);
                return buildChain(bean, urlPath);
            }

            return super.lookupHandler(urlPath, request);
        }

        /**
         * Builds a handler execution chain that contains both a path exposing
         * handler and a backing bean exposing handler.
         * 
         * @param bean
         *            The object to be wrapped in the handler execution chain.
         * @param urlPath
         *            The path which matched. In this case the full path.
         * @return The handler execution chain that contains the backing bean.
         * 
         * @see {@link AbstractUrlHandlerMapping#buildPathExposingHandler(Object, String, String, java.util.Map)}
         *    
         */
        protected HandlerExecutionChain buildChain(Object bean, String urlPath) {
            // I don't know why but the super class declares object but actually
            // returns handlerExecution chain.
            HandlerExecutionChain chain = (HandlerExecutionChain) buildPathExposingHandler(
                    controller, urlPath, urlPath, null);
            addBackingBeanInteceptor(chain, bean);
            return chain;
        }

        /**
         * Adds an inteceptor which adds the backing bean into the request to an
         * existing HandlerExecutionChain.
         * 
         * @param chain
         *            The chain which the backing bean is being added to.
         * @param bean
         *            The object to pass through to the controller.
         */
        protected void addBackingBeanInteceptor(HandlerExecutionChain chain,
                Object bean) {
            chain.addInterceptor(new BackingBeanExposingInteceptor(bean));

        }

        /**
         * An Interceptor which adds a bean to a request for later consumption by a
         * controller.
         * 
         * @author Wesley Acheson
         * 
         */
        protected class BackingBeanExposingInteceptor extends
                HandlerInterceptorAdapter {
            private Object backingBean;

            /**
             * @param backingBean
             *            the bean which is passed through to the controller.
             */
            public BackingBeanExposingInteceptor(Object backingBean) {
                this.backingBean = backingBean;
            }

            @Override
            public boolean preHandle(HttpServletRequest request,
                    HttpServletResponse response, Object handler) throws Exception {
                request.setAttribute(BACKING_BEAN_ATTRIBUTE, backingBean);
                return true;
            }
        }

    } 
    ```

2.  实现 HandlerMethodArgumentResolver 以从会话中获取值。（假设您对会话中的设置感兴趣）

    ```
    //   Copyright 2012 Wesley Acheson
    //
    //   Licensed under the Apache License, Version 2.0 (the "License");
    //   you may not use this file except in compliance with the License.
    //   You may obtain a copy of the License at
    //
    //       http://www.apache.org/licenses/LICENSE-2.0
    //
    //   Unless required by applicable law or agreed to in writing, software
    //   distributed under the License is distributed on an "AS IS" BASIS,
    //   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    //   See the License for the specific language governing permissions and
    //   limitations under the License.

    package com.wesley_acheson.spring;

    import javax.servlet.http.HttpServletRequest;

    import org.springframework.core.MethodParameter;
    import org.springframework.web.bind.support.WebDataBinderFactory;
    import org.springframework.web.context.request.NativeWebRequest;
    import org.springframework.web.method.support.HandlerMethodArgumentResolver;
    import org.springframework.web.method.support.ModelAndViewContainer;

    /**
     * Resolves method parameters which are annotated with {@link BackingBean}.
     * 
     * <b>Note:</b> Only works for Http requests.
     * 
     * @author Wesley Acheson
     * 
     */
    public class BackingBeanValueResolver implements HandlerMethodArgumentResolver {

        /**
         * Constructor.
         */
        public BackingBeanValueResolver() {
        }

        /**
         * Implementation of
         * {@link HandlerMethodArgumentResolver#supportsParameter(MethodParameter)}
         * that returns true if the method parameter is annotatated with
         * {@link BackingBean}.
         */
        @Override
        public boolean supportsParameter(MethodParameter parameter) {
            return parameter.hasParameterAnnotation(BackingBean.class);
        }

        @Override
        public Object resolveArgument(MethodParameter parameter,
                ModelAndViewContainer mavContainer, NativeWebRequest webRequest,
                WebDataBinderFactory binderFactory) throws Exception {
            return webRequest.getNativeRequest(HttpServletRequest.class)
                    .getAttribute(
                            BackingBeanUrlHandlerMapper.BACKING_BEAN_ATTRIBUTE);
        }

    } 
    ```

3.  实现自定义 WebArgumentResolver 以获取传递的 Bean 的实例。将此设置为 AnnotationMethodHandler 实例的属性。

    ```
    /**
     * 
     */
    package com.wesley_acheson.spring;

    import javax.servlet.http.HttpServletRequest;

    import org.springframework.core.MethodParameter;
    import org.springframework.web.bind.support.WebArgumentResolver;
    import org.springframework.web.context.request.NativeWebRequest;

    /**
     * @author Wesley Acheson
     *
     */
    public class BackingBeanArgumentResolver implements WebArgumentResolver {

        /* (non-Javadoc)
         * @see org.springframework.web.bind.support.WebArgumentResolver#resolveArgument(org.springframework.core.MethodParameter, org.springframework.web.context.request.NativeWebRequest)
         */
        @Override
        public Object resolveArgument(MethodParameter methodParameter,
                NativeWebRequest webRequest) throws Exception {
            if (methodParameter.hasParameterAnnotation(BackingBean.class))
            {
                HttpServletRequest request = webRequest.getNativeRequest(HttpServletRequest.class);
                Object parameter = request.getAttribute(BackingBeanUrlHandlerMapper.BACKING_BEAN_ATTRIBUTE);
                if (parameter == null)
                {
                    return UNRESOLVED;
                }
                if (methodParameter.getParameterType().isAssignableFrom(parameter.getClass()))
                {
                    return parameter;
                }
            }

            return UNRESOLVED;
        }

    } 
    ```

4.  我还创建了一个 BackingBean 注释和一个接口来传递给我的处理程序添加器，因为我觉得它们更容易。

5.  创建你的控制器。如果您使用我的代码，您将希望使用 @BackingBean 注释注入参数。控制器本身的请求映射不能匹配任何好的 url（这是因为我们使用处理程序适配器绕过了这一步，并且我们不希望默认的注解处理程序获取它。

6.  在春天把所有东西都连接起来。这是我的工作示例项目中的示例文件。

    ```
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

        <!-- The controllers are autodetected POJOs labeled with the @Controller 
            annotation. -->
        <context:component-scan base-package="com.wesley_acheson"
            use-default-filters="false">
            <context:include-filter expression="org.springframework.stereotype.Controller"
                type="annotation" />
        </context:component-scan>

        <bean class="com.wesley_acheson.spring.BackingBeanUrlHandlerMapper"
            p:order="-1">
            <property name="controller">
                <!-- A simple example controller. -->
                <bean class="com.wesley_acheson.example.PageController" />
            </property>
            <!--  A simple example mapper. -->
            <property name="urlMapper">
                <bean class="com.wesley_acheson.example.PageBeanUrlMapper" />
            </property>
        </bean>

        <util:map id="pages">
            <entry key="/testPage1">
                <bean class="com.wesley_acheson.example.Page">
                    <property name="title" value="Test Page 1 title" />
                    <property name="contents"
                        value="This is the first test page.&lt;br /&gt; It's only purpose is to check
                        if &lt;b&gt;BackingBeans&lt;/b&gt; work." />
                </bean>
            </entry>

            <entry key="/test/nested">
                <bean class="com.wesley_acheson.example.Page">
                    <property name="title" value="Nested Path" />
                    <property name="contents"
                        value="This is another test page its purpose is to ensure nested pages work." />
                </bean>
            </entry>
        </util:map>

        <bean
            class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
            <property name="customArgumentResolver">
                <bean class="com.wesley_acheson.spring.BackingBeanArgumentResolver" />
            </property>
        </bean>

        <!-- Turns on support for mapping requests to Spring MVC @Controller methods 
            Also registers default Formatters and Validators for use across all @Controllers -->
        <mvc:annotation-driven />

        <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
            up static resources -->
        <mvc:resources location="/, classpath:/META-INF/web-resources/"
            mapping="/resources/**" />

        <!-- Allows for mapping the DispatcherServlet to "/" by forwarding static 
            resource requests to the container's default Servlet -->
        <mvc:default-servlet-handler />

    </beans> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:17:31.790

只是为了解决这个特定问题，让我现在推荐一种解决方法 -

在内部创建自己的 handlerAdapter 来组成 AnnotationMethodHandlerAdapter：

```
public DBAnnotationMethodHandlerAdapter implements HandlerAdapter,{
    private AnnotationHandlerAdapter target;

    @Override
    public boolean supports(Object handler) {
        return this.target.supports(handler);
    }

    @Override
    public ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        request.setAttribute(HandlerMapping.INTROSPECT_TYPE_LEVEL_MAPPING, true);
        return this.target.handle(request, response, handler);
    }

    public void setTarget(AnnotationHandlerAdapter target){
        this.target = target;
    }

}

   <bean class="mypkg.DBAnnotationMethodHandlerAdapter">
        <property name="target">
            <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>
        </property>
    </bean> 
```

这应该可以解决当前问题，但您可能会遇到其他问题

# ios - 如何制作像 Apple Color Emoji.ttf 这样使用彩色位图图像的字体？

> ID：11581772
> 
> 赞同：7
> 
> 时间：2012-07-20T14:53:49.797
> 
> 标签：ios, fonts, emoji

我想用相同格式的PNG图像制作一个彩色位图字体，`Apple Color Emoji.ttf`以便它可以在iOS应用程序中使用。但我找不到任何参考资料。可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:50:45.947

[TypeTool](http://www.fontlab.com/font-editor/typetool/)的第 3 版添加了此功能。使用该工具创建带有所需图标的 TTF 文件。

创建 TTF 文件后，请按照[以下说明](http://blog.beefyapps.com/?p=316)将字体嵌入应用程序。

# mysql - 如何逃避 Ruby on Rails 的 MYSQL 查询？

> ID：11581773
> 
> 赞同：8
> 
> 时间：2012-07-20T14:53:53.813
> 
> 标签：mysql, ruby-on-rails, escaping

在 MYSQL 数据库中搜索 Rails 2.3.14 应用程序时，我需要适当地转义搜索字符串，以便搜索包含单引号（撇号）的字符串。最好的方法是什么？我正在使用`mysql`宝石，以防万一。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-07T18:14:04.887

Rails[引用字符串](https://github.com/rails/rails/blob/v4.0.0/activerecord/lib/active_record/connection_adapters/abstract/quoting.rb#L82)如下：

```
# Quotes a string, escaping any ' (single quote) and \ (backslash) characters.
def quote_string(s)
  s.gsub(/\\/, '\&\&').gsub(/'/, "''") # ' (for ruby-mode)
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T14:53:53.813

使用`mysql`宝石时，您将获得方法`Mysql.escape_string()`。使用如下：

```
search_terms = Mysql.escape_string("it's working!")
conditions = [ "table1.name LIKE '%#{search_terms}%'" ]
# use conditions for MYSQL query as appropriate 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-21T05:29:17.183

您可以使用 ActiveRecord 的`quote`方法（例如`ActiveRecord::Base.connection.quote("string with ' apostrophe")`），但 ActiveRecord 的查询方法已经为您转义了 SQL。例如：

```
a = "string with ' apostrophe"
ModelName.where("field1 = ?", a) 
```

将“带有'撇号的字符串”更改为“带有''撇号的字符串”

# html - 如何在 ERB（Rails）中包装父 div 中的每 N 个元素？

> ID：11581775
> 
> 赞同：8
> 
> 时间：2012-07-20T14:53:55.960
> 
> 标签：html, ruby-on-rails, ruby, erb

我的成员索引页面只是一个成员列表，但我希望每 3 个成员都包含在一个包含的 div 中（这将像一行一样）。所以而不是：

```
<div class="member"></div>
<div class="member"></div>
<div class="member"></div>
<div class="member"></div>
<div class="member"></div> 
```

我需要标记为：

```
<div class="row">
  <div class="member"></div>
  <div class="member"></div>
  <div class="member"></div>
</div>
<div class="row">
  <div class="member"></div>
  <div class="member"></div>
</div> 
```

我确实有一个解决方案，但我对此并不满意。实际上，我以前在 ERB 中看到过更好的方法，但再也找不到了。

我当前的代码：

```
<div class="row">
  <% @members.each do |member| %>
    <div class="member"><%=member.name%></div>
    <%= cycle("", "", "</div><div class=\"row\">".html_safe) %>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T15:07:20.713

这个怎么样：

```
<% @members.each_slice(3) do |slice| %>
  <div class="row">
    <% slice.each do |member| %>
      <div class="member">
      ...your markup here
      </div>
    <% end %>
  </div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:07:15.913

我找到了我正在寻找的方法。它与@HargrrimmTheBleak 发布的基本相同`each_slice()`，但名称更友好：

[`in_groups_of()`](http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Array/Grouping.html#M000833)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:08:19.520

听起来像是使用模数的好机会

```
<div class="row">
<% for(i=1, i<=@members.size, i++ %>
    <% if i%4 == 0 %>
        </div>
        <div class="row">
    <% end %>
    <div class="member"><%=@members[i-1]%></div>
<% end %>
</div> 
```

# facebook - Facebook 与 DotNetOpenAuth 4.1.0.12182

> ID：11581776
> 
> 赞同：5
> 
> 时间：2012-07-20T14:53:57.020
> 
> 标签：facebook, oauth-2.0, dotnetopenauth

我正在尝试使用**DotNetOpenAuth 4.1.0.12182为 Facebook 和 Windows LiveId 创建用户登录名**

但是，下载中的示例使用了当前版本`DotNetOpenAuth.ApplicationBlock`中`DotNetOpenAuth.ApplicationBlock.Facebook`不存在的示例。

取而代之的是`DotNetOpenAuth.AspNet.Clients`名称空间，其中包括`FacebookClient`并且`WindowsLiveClient`-但是我找不到任何有关如何使用它们的示例。

**是否存在任何示例或文档？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T19:12:58.860

通过创建派生自 DotNetOpenAuth.OAuth2.WebServerClient 的 FacebookAuthClient，我已经能够让 DNOA 版本 4.1.0.12182、.Net 3.5 和 Facebook 相互协作。我发现的一个小问题是，如果您使用基于 cookie 的会话，那么您必须在使用 OAuth 功能之前访问该会话。据我所知，这是因为 DNOA 使用会话 ID 作为状态参数，如果会话从未被访问过，它可以在请求之间更改。当响应从 Facebook 返回时，这将导致状态参数不匹配错误。

FacebookAuthClient：

```
public class FacebookAuthClient : DotNetOpenAuth.OAuth2.WebServerClient
{
    private static readonly DotNetOpenAuth.OAuth2.AuthorizationServerDescription Description = new DotNetOpenAuth.OAuth2.AuthorizationServerDescription
    {
        TokenEndpoint = new Uri("https://graph.facebook.com/oauth/access_token"),
        AuthorzationEndpoint = new Uri("https://graph.facebook.com/oauth/authorize")    
    };

    public static readonly string [] ScopeNeeded = { "publish_stream" };

    public FacebookAuthClient()
       : base(Description)

    {
    }
} 
```

Facebook.aspx.cs：

```
public partial class FacebookPage : System.Web.UI.Page
{
    private FacebookAuthClient _client = new FacebookAuthClient
    {
        ClientIdentifier = ConfigurationManager.AppSettings["FBClientId"], //The FB app's Id
        ClientCredentialApplicator = DotNetOpenAuth.OAuth2.ClientCredentialApplicator.PostParameter(ConfigurationManager.AppSettings["FBClientSecret"]) // The FB app's secret
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        DotNetOpenAuth.OAuth2.IAuthorizationState auth = _client.ProcessUserAuthorization();
        if (_auth == null)
        {
            // Kick off authorization request with the required scope info
            client.RequestUserAuthorization(FacebookAuthClient.ScopeNeeded);
        }
    }
} 
```

这只是一个测试应用程序，因此没有错误处理，但它似乎可以工作。

**编辑** 我对所有这些都使用了 DotNetOpenAuth(unified) NuGet 包。

**编辑** 在创建 ClientCredentialApplicator 时添加了缺少的 .PostParameter 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:38:50.487

您需要使用 DNOA 的 ctp 3.5 版。版本 4+ 已与后来 Facebook 使用的 OAuth 2 草案一起使用。

您可以在所有者 GitHub 上找到它： [https ://github.com/AArnott/dotnetopenid](https://github.com/AArnott/dotnetopenid)

# regex - 在记事本++中用正则表达式替换文本

> ID：11581777
> 
> 赞同：1
> 
> 时间：2012-07-20T14:54:02.100
> 
> 标签：regex, notepad++

我想替换所有以**www.sitename.com/xxx/xxx.html**开头的网址，并且字符串的最后一部分在每个网址上都不同。notepad++ 中是否有任何公式可以用`"#"`或任何自定义字符替换整个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:01:58.300

打开`Find and Replace`对话框，选择`Replace`( `Ctrl+H`)

搜索模式：`Regular expression`

找什么：`www\.sitename\.com/\w+/\w+\.html`

替换为：（`#`或任何你想要的）

这将替换您提供的相关类型的 URL ( `www.sitename.com/xxx/xxx.html`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:05:15.850

按 Ctrl+H 调出替换窗口。在以下`Find what:`部分输入：

```
www\.sitename\.com(/\w+)*\.?\w* 
```

和任何你想要的 (#) 在`Replace with:`. 确保`Search Mode`打开`Regulare Expression`并且点击`Find next`,`Replace`或`Replace All`

这将替换所有以和扩展名（.html、.jpg、...）开头`www.sitename.com`和结尾的 URL

# java - 当我尝试连接数据库时，Axis 2 Web 服务停止

> ID：11581783
> 
> 赞同：0
> 
> 时间：2012-07-20T14:54:34.203
> 
> 标签：java, android, webserver

我有一个使用 Axis2 创建的网络服务器。我的客户是安卓应用。Web 服务连接到数据库。但网络服务会自动停止。

连接数据库的代码`public class Connect { public Connection Connection() {

```
 Connection conn = null;

    try {
        String userName = "Admin";
        String password = "admin";
        //String url = "jdbc:mysql://mysql.cs.nott.ac.uk:3306/svp01m";
        String url = "jdbc:mysql://localhost/tests";
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(url, userName, password);

        System.out.println ("\n Database connection established");

    } catch (Exception e) {
         e.printStackTrace();
        System.err.println("\n Cannot connect to database server");
        System.exit(0);
    }

    return conn;
} 
```

}`

从 web 服务调用的代码是

```
public class Calculate 
```

{

```
public boolean populateLeagues(String username, String password){

    try {
        /*Create object of the Connect class*/
        Connect connect = new Connect();
        /* calling the Connection method of Connect class to establish a database connection*/
        Connection conn = connect.Connection();

        java.sql.PreparedStatement preparedStatement = null;
        /* Creating a query to be executed with prepared statement*/
        String query = "select name from users where name=?";

        preparedStatement = conn.prepareStatement(query);
        /*substitutes the value for ? in the prepared Statement */
        preparedStatement.setString(1, username);
        /* Result set to capture the results of the query*/
        ResultSet rs = preparedStatement.executeQuery();

        boolean empty = true;
        while (rs.next()) {
            empty=false;
            System.err.println("\n User Name exists  \n");
            return true;
        }

        if(empty)
        {
            System.out.println("\n the userame does not exists");
            return false;
        }
        rs.close();
        conn.close();

    } catch (Exception e) {
        //e.printStackTrace();
         System.err.println ("Cannot connect to database server");
         System.exit(0);
    }
    return true;

} 
```

我得到的例外是

> java.lang.ClassNotFoundException: com.mysql.jdbc.Driver at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526 ) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Unknown Source) 在 org.web.backend.calculate.Connect.Connection(Connect.java:17) 在 org.web.backend .calculate.Calculate.populateLeagues(Calculate.java:17) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在java.lang.reflect.Method.invoke(Unknown Source) at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:194) at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:102) at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40) at org.apache.axis2.receivers.AbstractMessageReceiver.receive( AbstractMessageReceiver.java:100) 在 org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:176) 在 org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275) 在 org.apache .axis2.transport.http.AxisServlet.doPost(AxisServlet.java:133) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717 ) 在 org.apache 的 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)。catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java: 191) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) .invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) 在 org. org.apache.tomcat.util.net.JIoEndpoint$Worker 上的 apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)。在 java.lang.Thread.run 运行（JioEndpoint.java:489）（未知来源）

无法连接到数据库服务器

# ios - 在 PhoneGap 应用程序中使用缓存清单

> ID：11581785
> 
> 赞同：0
> 
> 时间：2012-07-20T14:54:43.913
> 
> 标签：ios, html, cordova

我有一个典型的电话间隙应用程序，文件夹中有一个和其他`index.html`各种文件。`.js``.css``/www`

现在，我应该如何更新这些 javascript/css 文件？（除了推送一个新的应用程序）。我想我可能会使用缓存清单，但这要求它们在同一个域上，所以我认为这不会起作用......

我唯一能想到的是在本地脚本之后提供脚本的在线副本，覆盖本地文件中的所有函数定义，但这似乎真的很蹩脚。

```
<script src="script.js"></script>
<script src="http://online.com/script.js></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:07:11.567

把你的代码赢得 googlecode.com ，在那里更新你的 javascripts ，链接你的应用程序 在你的 phonegap.plist 中添加外部主机以匹配 *.googlecode.com 并在那里改变你的代码，它会自动用新的更新应用程序

# ms-access - 处理 Access 表单上的 ActiveX 事件

> ID：11581787
> 
> 赞同：0
> 
> 时间：2012-07-20T14:54:55.897
> 
> 标签：ms-access, activex, ms-access-2007, vba

我有一个用于打开和操作专有图像类型的 ActiveX 控件。我能够将控件嵌入到 Access 表单中，并且通过使用对象浏览器能够确定所有类成员。我遇到的唯一问题是处理控件引发的一些事件。

例如，从对象浏览器中，我可以看到以下事件定义：

```
Event RightClicked() 
```

当我将以下代码添加到表单时：

```
Private Sub CtrlInstanceName_RightClicked()
  'Anything here
End Sub 
```

一切都按预期工作。但是，如果事件声明有传递给它的参数，例如：

```
Event MeasurementUpdated(id as Long) 
```

添加：

```
Private Sub CtrlInstanceName_MeasurementUpdated(id as Long)
  'Anything here
End Sub 
```

产生以下错误：

> 作为事件属性设置输入的表达式 ... 产生了以下错误：过程声明与具有相同名称的事件或过程的描述不匹配。

添加第二个处理程序后更奇怪的是，窗体上的**所有事件处理程序都会**产生此错误，包括由窗体和窗体上的其他控件引发的事件。

我已经在 C# .NET 应用程序中测试了 ActiveX 控件，并且能够处理那里的事件（尽管它们并没有按预期工作）。在 Visual Studio 中，函数原型最终与自动定义的事件处理程序类类型有点奇怪。

关于如何更改事件过程声明以避免此错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:45:13.310

就像大多数星期五的问题一样，我后来发现这个问题的答案相当简单。

首先，由于我不熟悉 VBA 代码编辑器，我不知道可以使用代码上方的 Object 组合框为嵌入式控件创建存根。选择我的控件名称后，我`MeasurementUpdate`从过程组合框中选择了事件。

正确的声明很简单：

```
Private Sub CtrlInstanceName_MeasurementUpdated(ByVal id as Long)
  'Anything here
End Sub 
```

关键区别在于`ByVal`修饰符。

# javascript - 获取 IE 版本 + 添加类到正文

> ID：11581788
> 
> 赞同：1
> 
> 时间：2012-07-20T14:54:57.120
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试查找人们正在使用哪个版本的 IE，并根据哪个浏览器向 body 标签添加一个类。

我的代码是

```
if (navigator.appName == "Microsoft Internet Explorer") {
//Set IE as true
ie = true;
//Create a user agent var
var ua = navigator.userAgent;
//Write a new regEx to find the version number
var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
//If the regEx through the userAgent is not null
if (re.exec(ua) != null) {
    //Set the IE version
    ieVersion = parseInt(RegExp.$1);
}

}

else {
    ie = false;
}

function ieTag() {
    if (ie == true) {
        if (ieVersion == 7) {
            $('body').addClass('IE7');
        }
    }
    if (ie == true) {
        if (ieVersion == 8) {
            $('body').addClass('IE8');
        }
    }
    if (ie == true) {
        if (ieVersion == 9) {
            $('body').addClass('IE9');
        }
    }

} 
```

我用它来调用函数

```
<script type="text/javascript">
    $(document).ready(function () {
        //IE Version Control
        ieTag();
    });
</script> 
```

但我只是出于某种原因选择了 IE 9，我之前有过这个脚本，所以我真的不明白出了什么问题！！！

我什至尝试过使用这个脚本

```
function ieTag() {
if (ie == true) {
    $('body').addClass('IE' + ieVersion);
} 
```

}

但仍然只拿起IE9

我使用 IE（和开发人员工具来更改版本（这两个脚本之前都在使用过）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T15:01:00.473

这可能不是您正在寻找的答案，但它似乎是最简单的解决方案：

```
<!--[if lt IE 7]>      <body class="ie6">    <![endif]-->
<!--[if IE 7]>         <body class="ie7">    <![endif]-->
<!--[if IE 8]>         <body class="ie8">    <![endif]-->
<!--[if IE 9]>         <body class="ie9">    <![endif]-->
<!--[if gt IE 9]>      <body class="ie10+">  <![endif]-->
<!--[if !IE]><!-->     <body>                <!--<![endif]--> 
```

当然添加到你的 body 标签应该开始的 HTML 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:00:15.460

您可以使用条件注释，这样它就不会影响其他浏览器。

```
<!--[if IE 6]>
<script>
$(document).ready(function(){
    $("body").addClass("ie-6");
});
</script>
<![endif]-->
<!--[if IE 7]>
<script>
$(document).ready(function(){
    $("body").addClass("ie-7");
});
</script>
<![endif]-->
<!--[if IE 8]>
<script>
$(document).ready(function(){
    $("body").addClass("ie-8");
});
</script>
<![endif]-->
<!--[if IE 9]>
<script>
$(document).ready(function(){
    $("body").addClass("ie-9");
});
</script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:00:57.443

为此，您不需要 JavaScript。

```
<!--[if IE 9]>
  <body class='ie9'>
<![endif]-->
<!--[if IE 8]>
  <body class='ie8'>
<![endif]--> 
```

等对于普通浏览器，您可以：

```
<!--[if IE]><!-->
  <body class='normal'>
<!--<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:54:01.933

问题中的 js 在 IE 7 和 IE 8 中失败的原因是我使用 application/javascript 而不是 text/javascript 包含了脚本，

原因是不适用于应用程序/javascript，因为这是一种包含仅现代浏览器支持的脚本的新方法，而旧浏览器不支持此方法，因此 IE 7 和 8 失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:37:20.873

如果你有 jQuery，你可以像这样将 ie 类添加到 body

```
$(function(){
  if ($.browser.msie && $.browser.version == 8) {
    $('body').addClass('ie8');
  }
}); 
```

# iphone - 是否可以在 UITextView iPhone 中跟踪输入下一行的文本？

> ID：11581792
> 
> 赞同：0
> 
> 时间：2012-07-20T14:55:08.757
> 
> 标签：iphone, ios, uiimageview, uitextview, frame

我正在为 iPhone 消息应用程序的 UITextView 工作。我在 UITextView 上添加了一个 UIImage 作为子视图。我想调整 UIImage 框架大小，如 UITextView 框架高度。现在我已经为此进行了编码，但是当文本进入下一行时，图像帧高度没有增加。在我们输入更多字符后，图像帧大小会增加。

```
 messageTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 5, 210, 30)];
    messageTextView.delegate = self;
    messageTextView.backgroundColor = [UIColor clearColor];
    messageTextView.clipsToBounds = NO;  
    messageTextView.font = [UIFont fontWithName:@"Helvetica" size:14];

    textViewImageView = [[UIImageView alloc]initWithFrame: CGRectMake(0, 0, 210, 30)];
    textViewImageView.image = [UIImage imageNamed: @"textbg.png"];
    textViewImageView.contentMode    = UIViewContentModeScaleToFill;
    textViewImageView.contentStretch = CGRectMake(0.5, 0.5, 0, 0);

    [messageTextView addSubview: textViewImageView];
    [messageTextView sendSubviewToBack: textViewImageView];
    [messageTextView addSubview:textViewLabel];
    [self.view addSubview:messageTextView];

-(BOOL) textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
        CGRect frame = messageTextView.frame;
        frame.size.height = messageTextView.contentSize.height;

        messageTextView.frame = CGRectMake(35, 5, 210, frame.size.height);
        textViewImageView.frame = CGRectMake(0, 0, 210, frame.size.height);
} 
```

当文本进入下一行时，您能否请任何人帮助解决增加 UIImageview 高度的问题？提前致谢。

![在此处输入图像描述](../Images/60ff693ae1e72da0739da8f840f0f08c.png)

![在此处输入图像描述](../Images/5a3a14c696c761f7f869546652761740.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:23:26.420

![enter image description here](../Images/1b9bab5d5ce7ccacfdec28772ffb0595.png)

change

```
 [messageTextView addSubview: textViewImageView];

 textViewImageView = [[UIImageView alloc]initWithFrame: CGRectMake(0, 0, 210, 30)];

 textViewImageView.frame = CGRectMake(0, 0, 210, frame.size.height); 
```

into

```
 [messageTextView.superview addSubview: textViewImageView];

 textViewImageView = [[UIImageView alloc]initWithFrame: CGRectMake(35, 5, 210, 30)];

 textViewImageView.frame = CGRectMake(35, 5, 210, frame.size.height); 
```

As I tested just now, it works fine.

**Edit 2** In my test.

**TestViewController.h**

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController <UITextViewDelegate>{

}

@property (nonatomic, strong) IBOutlet UITextView *textView;
@property (nonatomic, strong) IBOutlet UIImageView *imageView;

@end 
```

**TestViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.textView.delegate = self;

    // Do any additional setup after loading the view, typically from a nib.
}

-(BOOL) textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    CGRect frame = self.textView.frame;
    frame.size.height = self.textView.contentSize.height;

    self.textView.frame = frame;
    self.imageView.frame = frame;

    return YES;
} 
```

# python - 如何在每个记录器的基础上更改 Python 日志消息的格式？

> ID：11581794
> 
> 赞同：52
> 
> 时间：2012-07-20T14:55:15.107
> 
> 标签：python, logging, python-3.x

阅读[文档后`logging`](http://docs.python.org/py3k/library/logging.html#module-logging)，我知道我可以使用这样的代码来执行简单的日志记录：

```
import logging

def main():
    logging.basicConfig(filename="messages.log",
                        level=logging.WARNING,
                        format='%(filename)s: '    
                                '%(levelname)s: '
                                '%(funcName)s(): '
                                '%(lineno)d:\t'
                                '%(message)s')

    logging.debug("Only for debug purposes\n")
    logging.shutdown()

main() 
```

但是，我意识到我不知道如何在每个记录器的基础上更改日志消息的格式，因为`basicConfig`它是一个模块级功能。此代码适用于创建具有不同级别、名称等的不同记录器，但有没有办法以类似于`basicConfig`？

```
import inspect
import logging

def function_logger(level=logging.DEBUG):
    function_name = inspect.stack()[1][3]
    logger = logging.getLogger(function_name)
    logger.setLevel(level)
    logger.addHandler(logging.FileHandler("{0}.log".format(function_name)))
    return logger

def f1():
    f1_logger = function_logger()
    f1_logger.debug("f1 Debug message")
    f1_logger.warning("f1 Warning message")
    f1_logger.critical("f1 Critical message")

def f2():
    f2_logger = function_logger(logging.WARNING)
    f2_logger.debug("f2 Debug message")
    f2_logger.warning("f2 Warning message")
    f2_logger.critical("f2 Critical message")

def main():
    f1()
    f2()
    logging.shutdown()

main() 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-20T15:14:42.723

尝试这个

```
import logging

logger = logging.getLogger('simple_example')
logger.setLevel(logging.DEBUG)
# create file handler that logs debug and higher level messages
fh = logging.FileHandler('spam.log')
fh.setLevel(logging.DEBUG)
# create console handler with a higher log level
ch = logging.StreamHandler()
ch.setLevel(logging.ERROR)
# create formatter and add it to the handlers
formatter = logging.Formatter(
    '%(asctime)s - %(name)s - %(levelname)s - %(message)s')
ch.setFormatter(formatter)
fh.setFormatter(formatter)
# add the handlers to logger
logger.addHandler(ch)
logger.addHandler(fh)

# 'application' code
logger.debug('debug message')
logger.info('info message')
logger.warn('warn message')
logger.error('error message')
logger.critical('critical message') 
```

有关更多信息，请参阅[http://docs.python.org/howto/logging-cookbook.html#multiple-handlers-and-formatters](http://docs.python.org/howto/logging-cookbook.html#multiple-handlers-and-formatters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:11:22.240

您必须创建或使用现有的子类，并使用自定义子类的实例`logging.Handler`调用其实例的方法。如果您为已附加到要修改其输出的记录器的处理程序设置格式化程序，则很好，否则您必须使用您设置的处理程序类的实例检索记录器对象并调用其方法格式化程序作为参数。`setformatter()``logger.Formatter``logging.getLogger()``addHandler()`

# css - 在媒体查询更改时将列宽从 60% 更改为 100%

> ID：11581795
> 
> 赞同：0
> 
> 时间：2012-07-20T14:55:19.630
> 
> 标签：css, media-queries, zurb-foundation

我正在使用[Zurb Foundation 3](http://foundation.zurb.com/docs/grid.php)框架，并且有以下布局。

```
<div class="row">
  <div class="eight columns">
    Main content...
  </div>
  <div class="four columns hide-for-medium">
    Sidebar...
  </div>
</div> 
```

[当四列网格在中型显示器上消失](http://foundation.zurb.com/docs/elements.php)时，如何使八列网格占据 100% 的宽度？在中型显示器上，当四列网格变为“显示：无”时，八列网格仍然只占用八列，而理想情况下它会填满 12 列（全宽）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:40:23.410

我设法解决了我的问题，它只需要一个特定的媒体查询并覆盖宽度和浮点值。

```
@media only screen and (max-width: 1279px) and (min-width: 768px) { 
  .test { 
    float: none !important; 
    width: auto !important;
  }
} 
```

# java - Jackson JSON 到 JAVA 的转换问题

> ID：11581797
> 
> 赞同：1
> 
> 时间：2012-07-20T14:55:27.930
> 
> 标签：java, json, jackson

所以我使用 Jackson 将对象转换为 JSON，然后通过连接发送它们并将它们转换回连接另一端的对象。我在读取 JSON 并尝试将其转换为 JAVA 对象时遇到问题，它成功地将 JSON 更改为多个对象。在示例中更容易看到：

```
ObjectMapper map = new ObjectMapper();
    Boolean test1 = null;
    String test2 = null;
    Integer test3 = null;
    Boolean obj = false;
    byte[] bytes = null;
    try {
        bytes = map.writeValueAsBytes(obj);
    } catch (Exception e) {
        e.printStackTrace();
    }
    try {
         test1 = map.readValue(bytes, Boolean.class);
         test2 = map.readValue(bytes, String.class);
         test3 = map.readValue(bytes, Integer.class);
    } catch (Exception e)
    {
        System.out.println("FAILED");
    }
    System.out.println("test1: " + test1 + "\ntest2: " + test2 + "\ntest3: " + test3); 
```

和输出：

> 失败测试1：错误测试2：错误测试3：空

当尝试将 JSON 布尔值转换为字符串时，它是成功的，这对我来说是个问题，因为我当前的方法看起来类似于下面的方法，并且当对象反序列化的类型错误时，它会导致问题出现。

```
public void JSONtoJAVA(Class<?> clazz)
{
    for(Event event : Events)
    {
        try
        {
            Object deserialized = map.readValue(bytes, event.getC());
            Event.getMethod().invoke(deserialized);
        }
        catch(Exception e)
        {
            //Failed ignore
        }
    }
} 
```

感谢您的帮助！

# php - PHP计算时差，结果1小时错误

> ID：11581798
> 
> 赞同：2
> 
> 时间：2012-07-20T14:55:31.593
> 
> 标签：php, date, timezone

我想计算两次的差异并以漂亮的方式打印出来。我知道差异永远不会超过 24 小时，所以我尝试了以下

```
$time = 7200; //time difference in seconds
date("H:i:s", $time); // should print 02:00 
```

结果出乎意料，它改为打印 03:00。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:01:31.920

为什么不是 DateTime::diff??

在这里，检查 PHP.net 的[DateTime](http://php.net/manual/en/datetime.diff.php)类

从 php.net datetime diff 页面获取：

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days');

//Outputs +2 days 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:14:01.227

PHP`date()`函数用于格式化绝对时间戳（如“2012 年 7 月 20 日星期五 15:02 UTC”），而不是用于时差（如“3 小时 5 分钟前”）。

在某些情况下，*可以*`date()`通过将您的时区设置为 UTC 并依靠 Unix 纪元恰好在 UTC 的午夜这一事实来欺骗生成看起来格式正确的时差。但是，即便如此，这也仅适用于小于 24 小时的正时差。

相反，正确的解决方案是使用为格式化时差而设计的函数，或者自己编写一个。这是一个简单的功能：

```
function format_time_difference ( $delta ) {
    $sign = ( $delta < 0 ? "-" : "" );
    $delta = abs( $delta );
    return sprintf( "%s%02d:%02d:%02d", $sign, $delta / 3600,
                    ($delta / 60) % 60, $delta % 60 ); 
} 
```

当然，如果您愿意，您可以扩展此功能，例如在输出中包含天数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T14:55:31.593

你永远不应该用它`date`来计算时差。首先，它是丑陋的黑客。它不是为了那个目的。其次，它只有在时区设置为 UTC 时才能可靠地工作。

现在，为什么它不起作用：PHP 函数 date 有两个参数，`format`并且`timestamp`，后者被定义为从 1970 年 1 月 1 日 00:00 UTC 开始的秒数，称为 unix epoch。因此，如果您调用 date("H:i", 3600) 并且您的时区设置为 UTC，它将返回“01:00”，因为它表示 unix 纪元后一小时的时间，而纪元是在午夜。

问题是，unix 纪元仅在 UTC 的午夜出现，而不是在其他时区。这就是错误结果的根源。

# sql - 如何在字段之后分隔中间名/首字母，应该在插入之前/之后完成

> ID：11581799
> 
> 赞同：0
> 
> 时间：2012-07-20T14:55:31.707
> 
> 标签：sql, sql-server-2008, parsing, insert

我有下表：

```
InventorLast    InventorFirst
Bram            Ernst Arne Johan
Gesing          Ernst Rudolf F.
Beranek         Ernst W.
Koch            Ernst-Christian
Bozak           Erol
Kurtas          Erozan Mehmet
Calder          Errol Jay
Binder          Erwin
Goetschi        Erwin 
```

我想在第一个空格或 - 如 Ernst-Christian 示例中看到的分隔中间名/首字母。

在创建表之后或从源数据插入时，我会更容易执行此操作吗？

现有的插入顺序如下：

```
insert into Inventor (PatentNo, InventorFirst, InventorLast, City, statename, country, NationalityCountry, ResidenceCountry)
select PatentNo, InventorFirstname, InventorLastname, City, statename, country, NationalityCountry, ResidenceCountry
from InventorUpdate
where InventorFirstName is not null 
and InventorLastName is not null 
```

我知道我将不得不添加 InventorMiddle 列。我只需要一些编码方面的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:24:57.960

rather ugly,but...

Think you just didn't say what to do when there's just a "no space no - name"

```
select substring(InventorFirst, 0, (case when  
                 patindex('%[ -]%', InventorFirst) = 0
                 then len(InventorFirst) + 1
                 else patindex('%[ -]%', InventorFirst)
                 end)
                 ) as middleValue,
       case 
         when patindex('%[ -]%', InventorFirst) = 0
          then '' 
          else substring(InventorFirst, 
                         patindex('%[ -]%', InventorFirst)+1, 
                         len(InventorFirst))
       end as endValue 
                 from inventor 
```

[http://sqlfiddle.com/#!3/57fa7/20](http://sqlfiddle.com/#!3/57fa7/20)

# salesforce - 是否可以检查用户是否被锁定？

> ID：11581806
> 
> 赞同：3
> 
> 时间：2012-07-20T14:55:44.810
> 
> 标签：salesforce

使用 Salesforce Web 服务 API 是否可以检查（或查询）用户是否被锁定（如果他们尝试登录失败太多次并因此被阻止登录）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T15:27:37.847

尽管 User 对象上没有特定字段来指示它们被锁定，但您可以查询该`LoginHistory`对象。

```
select Id, UserId, LoginTime, Status from LoginHistory where
    UserId = 'xxxxxxxxx' order by LoginTime desc limit 20 
```

然后循环遍历结果，检查`Status`字段的值。如果用户已被锁定，则最近的登录尝试将在此字段中具有“密码锁定”值。

该字段的其他可能值`Status`包括：

*   成功
*   用户处于非活动状态
*   无效的密码
*   失败：需要 API 安全令牌
*   失败：计算机激活挂起
*   失败：需要计算机激活
*   失败：时间戳无效
*   失败：需要移动许可证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T22:53:50.240

对于管理员用户 - 现在可以通过 SalesforceA 移动应用程序解锁 iphone / ipad 上的用户。[https://itunes.apple.com/au/app/salesforcea/id731117958?mt=8](https://itunes.apple.com/au/app/salesforcea/id731117958?mt=8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:06:30.840

没关系; 我找到了答案。

它在[文档](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_user.htm)中说：

> 密码**锁定状态**和**重置用户锁定状态**的功能无法通过 API 获得。您必须使用用户界面检查并重置用户密码锁定状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T05:28:52.683

在 Apex 中，我可以检查 UserLogin 对象上的 IsPasswordLocked 字段，以检查用户是否被锁定，方法是使用以下 SOQL -：

[SELECT IsPasswordLocked FROM UserLogin WHERE UserId = 'ENTER YOUR USER ID HERE'];

# iphone - 禁用除一个之外的所有视图的用户交互

> ID：11581808
> 
> 赞同：0
> 
> 时间：2012-07-20T14:55:48.850
> 
> 标签：iphone

我是 iphone 新手。我对我的项目感到震惊，因为我在很多按钮中有一个视图控制器，当我点击 webview 时，它会识别手势并为 webview 设置一些大小，但是有一些当时屏幕上的按钮是可见的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:53:49.647

这将禁用除 uiwebview 之外的所有视图上的用户交互

```
for(UIView *currentView in self.view.subviews)
{
     if([currentView isKindOfClass: [UIWebView class]])
     {
          currentView.userInteractionEnabled = NO;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:01:02.680

您可以设置任何 UI 对象的属性 userInteractionEnabled=YES //或 No。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:01:41.213

你可以把你的 webview 放在一个透明的 view 上（让我们把它命名为“coverView”），它的 frame 等于 screen 的 frame。当您展示coverView（带有webview）时，用户将看到webview周围的一切（因为coverView是透明的），但是与webview周围其他对象的任何交互都将被coverView阻止。

# json - Ruby On Rails 将 2 个数据库列映射到 2D JSON 数组

> ID：11581809
> 
> 赞同：0
> 
> 时间：2012-07-20T14:55:54.007
> 
> 标签：json, activerecord, ruby-on-rails-3.1

我试图从数据库中获取两列数据，使用 Ruby on Rails ActiveRecord 调用并将它们放入 2D JSON 数组中以传递给客户端。

我让它为一列工作。现在我需要让它为 2 列工作。

这是我到目前为止的数据库调用：

```
select("TOTAL").map{|x| x.TOTAL.ceil} 
```

这就是我为控制器所拥有的：

```
@results = JSON.dump({ :totals => PerformanceResults.find_totals }) 
```

这给了我这样的东西：{“总计”[145,132,863,693,372,74,838,91,18,172,84,90,373,161,160,173,1910,210,513,14,79,21,84,41,2630,0,93,150,2971]}

要获得两列，这就是我开始的方式，但进展不顺利：

数据库调用：

```
select("TOTAL, time_stamp ").map{|x| x.attributes.slice(:x.TOTAL.ceil, x.time_stamp)} 
```

它告诉我“:x:Symbol 的未定义方法 `TOTAL'”，我理解，但由于我是 Ruby on Rails 和 JSON 的新手，我想我会寻求一些帮助...

我的目标是将其传递给客户端：{"totals" [['timestamp', data], ['timestamp', data], etc.... ]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:33:15.453

在 Rails 控制台中，要获取多个列，您还可以使用以下方法。假设您有一个 User 表，并且您希望打印用户的 id 和电子邮件，您必须按如下所示进行：

```
User.all.map{|user| "#{user.id},#{user.email}"} 
```

这是上面已经解释的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:06:56.287

对于将来寻找此解决方案的任何人，我已经使用以下方法自行解决了这个问题。

```
select("TOTAL, time_stamp ").map{|x| [x.TOTAL.ceil, x.time_stamp]} 
```

# linux - 在 Redhat 上安装 Cutter

> ID：11581814
> 
> 赞同：1
> 
> 时间：2012-07-20T14:56:12.500
> 
> 标签：linux, tcp, ip, redhat, tcpdump

我正在尝试安装裁纸器。我从那里获得源代码并编译它。当我运行切割机时出现错误。

打开/proc/net/ip_conntrack：没有这样的文件或目录

我尝试运行命令 sudo modprobe ip_conntrack

但我仍然得到同样的错误。

请帮忙！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:19:27.450

你用的是哪个redhut版本？？

这些模块不称为 ip_conntrack 而是 nf_conntrack_ipv4。
尝试`sudo modprobe nf_conntrack_ipv4`然后安装裁纸器

# html - 根据屏幕大小显示文本

> ID：11581815
> 
> 赞同：0
> 
> 时间：2012-07-20T14:56:16.730
> 
> 标签：html, scroll, responsive-design, resize

我正在制作一个网站，它显示了一定数量的文本。例如：

> “Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse imperdiet venenatis nulla, sed viverra arcu eget ornare。Morbi commodo, ullamcorper nec neque egestas, est est iaculis massa, massa metus et semper at purus. Etiam nisl sed sed sapien in dapibus aliquet.
> 
> Etiam auctor dui quis。Nam et nisi viverra scelerisque 获释。在 hac habitasse dictumst 观众中。Donec gestas 在各种矢状面骨瓮处疼痛。Enim etiam urn consequat et eget sollicitudin，舌侧矢状面。Maecenas euismod, enim a dictum iaculis, enim vestibu turpis sapien, non convallis my vitae risus libero。Nullam in egestas dui。Etiam in wk erat，sit amet arcu ultricies。
> 
> Maecenas quis turpis release, id condimentum neque。Aenean 释放 enim，tempus vitae lobortis sat amet，vulputate id augue。Lorem ipsum dolor sit amet, consectetur adipiscing elit。"

如果用户从平板电脑连接，此文本会产生滚动，但我希望此文本分页，例如，每个段落中显示 3 页第 1 页。

我想要的是在数据库、json、xml 或其他任何东西中存储一个很长的文本，并按设备和屏幕大小、显示页面、并且没有滚动。

¿ 有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:25:43.420

使用 css 媒体查询来确定不同设备类型/屏幕尺寸的样式： http: [//css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:10:29.260

您可以使用[PHP-Mobile-Detect](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)来检测平板电脑的用户代理并显示相应的内容。

# c# - 从文档 docx 中删除 permStart 和 permEnd 标签

> ID：11581816
> 
> 赞同：1
> 
> 时间：2012-07-20T14:56:34.933
> 
> 标签：c#, .net, openxml

我有 2 个 docx 文档，这些文档在文档级别是只读的。但是这些文档中少数段落的编辑选项是通过使用 permStart 和 permEnd 标签启用的。

我必须合并这两个文档并使新文档可编辑。我正在使用 PowerTools DocumentBuilder 来合并这两个 docx。最终的 docx 是可编辑的，但由于存在 permStart 和 permEnd 标签，所有段落都以灰色背景突出显示。

我想知道我们如何删除这些 permStart 和 permEnd 标签。我尝试了以下代码但无法正常工作。

wordD.MainDocumentPart.Document.Body.RemoveAllChildren< PermStart>(); wordD.MainDocumentPart.Document.Body.RemoveAllChildren< PermEnd>();

我正在使用 OpenXML SDK2.0、VS2010、.NET 4.0 和 Powertools 文档生成器。任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:09:25.557

您需要删除文档保护。除此之外，您还需要删除 PermStart 和 PermEnd，因为这些标签仅在文档受到保护时才相关。代码将是

1.  删除文档保护。

    DocumentSettingsPart documentSettingsPart = wordprocessingDocument.MainDocumentPart.GetPartsOfType().FirstOrDefault();

    ```
     if (documentSettingsPart != null)
        {
            documentSettingsPart.Settings.RemoveAllChildren<DocumentProtection>();
        } 
    ```

2.  删除 PermStart 和 PermEnd 标记，就像您已经在做的那样

    wordD.MainDocumentPart.Document.Body.RemoveAllChildren(); wordD.MainDocumentPart.Document.Body.RemoveAllChildren(); wordD.MainDocumentPart.Document.Save();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:16:25.863

这是我删除 permStart 和 permEnd 标签的方式。欢迎对以下代码进行任何改进。

```
 foreach (PermStart p1 in wordD.MainDocumentPart.Document.Body.Descendants<PermStart>())
                {
                    p1.Parent.RemoveChild<PermStart>(p1);
                }

                foreach (PermEnd p2 in wordD.MainDocumentPart.Document.Body.Descendants<PermEnd>())
                {
                    p2.Parent.RemoveChild<PermEnd>(p2);
                }
                wordD.MainDocumentPart.Document.Save(); 
```

# entity-framework - EF 5 更新-数据库协助

> ID：11581818
> 
> 赞同：0
> 
> 时间：2012-07-20T14:56:42.627
> 
> 标签：entity-framework

我正在使用 Code First 数据迁移，并且我的开发数据库已经建立起来，以至于我真的不想重新开始。由于这个挥之不去的幻像表，我删除了一个旧表，并且无法让 EF 接受任何模型更改。如何根据当前存在的模型获得数据库上下文的干净版本？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:39:28.673

您可以使用“代码第二”方法并从数据库中对模型进行逆向工程。一个很好的方法是使用 VS 的 [Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d/)进行逆向工程。安装后，只需右键单击项目并选择 Entity Framework > Reverse Engineer Code First 并在对话框中选择相关数据库。这将在 Model 文件夹中生成一个模型。

我通常在一个虚拟项目中执行此操作，然后复制文件。模型生成实际上非常干净，并添加了一些不错的功能，例如将 ICollections 初始化到构造函数中的新列表，这些功能有时会被原始 Code First 模型遗漏。

**编辑** 这是一篇文章，它概述了 [将 EF 与现有数据库一起使用的过程](http://judeokelly.com/entity-framework-existing-sql-server-database-code-second/)

# .net - 为什么此过程适用于记事本，但不适用于 Microsoft Access

> ID：11581820
> 
> 赞同：1
> 
> 时间：2012-07-20T14:56:44.187
> 
> 标签：.net, winforms, ms-access, pinvoke, panel

我正在尝试实施[Luke Quinane](https://stackoverflow.com/users/18437/luke-quinane)[对此问题](https://stackoverflow.com/questions/758494/how-can-i-run-another-application-within-a-panel-of-my-c-sharp-program)的回答以与 Microsoft Access 一起使用。

我使用的代码正是答案中发布的代码，但为了方便起见，我将其放在下面。可以说，我的 Windows 窗体由一个面板和一个按钮组成：

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Windows.Forms;

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Process p = Process.Start("MSACCESS.exe");
        p.WaitForInputIdle();
        SetParent(p.MainWindowHandle, panel1.Handle);

    }

    [DllImport("user32.dll")]
    static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

    private void Form1_Load(object sender, EventArgs e)
    {

    }
} 
```

Microsoft Access 启动正常，但每当我尝试将其放在面板内时就会消失。

每当我替换`MSACCESS.exe`为 时`notepad.exe`，程序都会按预期使用记事本运行。

是否需要做一些额外的事情才能使此过程与 Microsoft Access 一起使用？

# magento - Magento Hosted - 更改搜索布局/默认布局

> ID：11581821
> 
> 赞同：0
> 
> 时间：2012-07-20T14:56:52.470
> 
> 标签：magento

我想弄清楚如何将默认布局从 3 列更改为 2 列。除了搜索结果之外，我已经能够在每个页面上成功地做到这一点。我不介意将默认布局更改为 2 列，因为我希望它是统一的。

**这是**一个问题，我在一个托管的解决方案上（我讨厌它，但是嘿，我只是开发人员）。我无权访问文件系统或单个文件。我还没有找到上传和替换任何文件的方法，所以我所做的所有更改都必须从后端完成。我真的希望这可以做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:23:37.607

答案是，你不能。干净利落。

但是，您可以使用 jQuery 破解它并让它正常工作。这是我使用的代码：

```
//Check for 3 col layout.
if($j('.col3-layout').length>0){
    //swap the 3 col layout for the 2 col layout
    $j('.col3-layout').addClass('col2-left-layout').removeClass('col3-layout');
    //grab all the code in the wapper, and place it in the main
    var html=$j('.col-wrapper').html();
    $j('.main').html(html);
    //If products are shown as a grid, reorder them.  If it is a list, leave it alone.
    if(!$j('.grid').attr('href')){
        //Grab all items in the list, push them into an array, and then remove all the data.
        var items=new Array();
        $j('.products-grid .item').each(function(){
            items.push($j(this).html());
        });
        $j('.products-grid').remove();
        //build your output
        var html='';
        var gridsize=4; //items per row
        for(var i=0;i<items.length;i++){
            if(i%gridsize==0){//start a new row
                html+='<ul class="products-grid '
                if(i/gridsize==0)//very first row
                    html+='first ';
                else if(i==items.length-gridsize)//last row
                    html+='last '
                if(i/gridsize%2==0)//even class
                    html+='even">';
                else
                    html+='odd">';//odd class
                html+='<li class="item first">'+items[i]+"</li>";
            }else if(i%gridsize==gridsize-1){//very item in row
                html+='<li class="item last">'+items[i]+"</li></ul>";
            }else
                html+='<li class="item">'+items[i]+"</li>";
        }
        $j('.category-products').html(html);  //populate the data.
    }
} 
```

而且......它的工作原理！ 如何获取提要的描述？我几乎什么都试过了！ 谢谢！ 在巨大的位图中搜索第一个设置位 面试题： 在一个可以容纳百万辆汽车的停车位中，您需要找到一个免费的停车位。停车位可以在哪里没有条件，即停车场可以有多个入口，在入口附近找到一个停车位等都没有关系。问题是应该使用什么样的数据结构以及各种操作的复杂性。 我建议使用百万位的位数组，0/1 用于占用/空闲槽，因此为了找到空闲点，问题转化为查找第一个设置位。不要假设那里有多少辆车等，即位数组可以是稀疏的或密集的。 在巨大的位图中找到一组位的最快方法是什么？我确实建议将二进制搜索 + 每个单词的高效 ffs() 作为方案。 phpcdatasimplepie 4 1 回答 1 This answer is useful 3 get_description ()和get_content()方法都对原始数据进行清理，但您可以使用get_item_tags ()方法将其原封不动地提取出来，如下所示： $desc_tags = ($item->get_item_tags('', 'description')); // empty namespace is RSS2.0 if ($desc_tags) { print $desc_tags[0]['data']; } 唯一需要注意的是，当get_contentorget_description将尝试检测命名空间时，您必须将其提供给get_item_tags，您可以在此处查看命名空间常量。如果您事先知道提要格式，那应该不是问题，否则您可能需要进行反复试验get_description。 于 2012-07-20T15:39:32.983 回答 Related 1 android - 拥有代理经理是一个好的设计理念吗？ 2 r - R lp解决如何定义旅行商的约束 1 jquery - Jquery loop data 1 eclipse - 以编程方式验证 OSGi 捆绑包依赖项（导入包） 1 html - 如何在浏览器屏幕调整html大小时修复图像大小 0 python - 基于wireshark中生成的图形验证结果的方法 1 c# - 使用内容控制生成 Word 文档 1 linux - Linux 发现磁盘和分区 1 ios - 有没有办法在手势后获取街景坐标？ 1 java - 添加一个线程以每次仅处理 1 个套接字 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# php - 我一直在研究一些 RSS抓取工具，它可以解析来自多个来源的数据。也就是说，所有这些来源都有自己的 RSS 描述实现。 特别是，使用 CDATA 标记将描述写在 like 上，例如 SOME TEXT GOES HERE]]> 但是，如果我尝试使用 SimplePie 获取项目描述，则会得到此输出我正在使用这个 php 脚本来完成这一切 foreach($feed->get_Items() as $item) { $title = $item->get_title(); $description = $item->get_description(); //some other stuff } 现在好的部分 提要上的标题也是这样的 <title><![CDATA[ Nice title ]]></title> 而且......它的工作原理！ 如何获取提要的描述？我几乎什么都试过了！ 谢谢！ 在巨大的位图中搜索第一个设置位 面试题： 在一个可以容纳百万辆汽车的停车位中，您需要找到一个免费的停车位。停车位可以在哪里没有条件，即停车场可以有多个入口，在入口附近找到一个停车位等都没有关系。问题是应该使用什么样的数据结构以及各种操作的复杂性。 我建议使用百万位的位数组，0/1 用于占用/空闲槽，因此为了找到空闲点，问题转化为查找第一个设置位。不要假设那里有多少辆车等，即位数组可以是稀疏的或密集的。 在巨大的位图中找到一组位的最快方法是什么？我确实建议将二进制搜索 + 每个单词的高效 ffs() 作为方案。 phpcdatasimplepie 4 1 回答 1 This answer is useful 3 get_description ()和get_content()方法都对原始数据进行清理，但您可以使用get_item_tags ()方法将其原封不动地提取出来，如下所示： $desc_tags = ($item->get_item_tags('', 'description')); // empty namespace is RSS2.0 if ($desc_tags) { print $desc_tags[0]['data']; } 唯一需要注意的是，当get_contentorget_description将尝试检测命名空间时，您必须将其提供给get_item_tags，您可以在此处查看命名空间常量。如果您事先知道提要格式，那应该不是问题，否则您可能需要进行反复试验get_description。 于 2012-07-20T15:39:32.983 回答 Related 1 android - 拥有代理经理是一个好的设计理念吗？ 2 r - R lp解决如何定义旅行商的约束 1 jquery - Jquery loop data 1 eclipse - 以编程方式验证 OSGi 捆绑包依赖项（导入包） 1 html - 如何在浏览器屏幕调整html大小时修复图像大小 0 python - 基于wireshark中生成的图形验证结果的方法 1 c# - 使用内容控制生成 Word 文档 1 linux - Linux 发现磁盘和分区 1 ios - 有没有办法在手势后获取街景坐标？ 1 java - 添加一个线程以每次仅处理 1 个套接字 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11581823
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, cdata, simplepie

我一直在研究一些 RSS**抓取工具**，它可以解析来自多个来源的数据。也就是说，所有这些来源都有自己的 RSS 描述实现。

特别是，使用 CDATA 标记将描述写在 like 上，例如

```
<![CDATA[
<p align=justify><font face="verdana, arial, helvetica, sans-serif" size=1>
<font color=#004080></font>
SOME TEXT GOES HERE 
 </font></p>
]]> 
```

但是，如果我尝试使用 SimplePie 获取项目描述，则会得到此输出

```
<div><p align="justify"></p></div> 
```

我正在使用这个 php 脚本来完成这一切

```
 foreach($feed->get_Items() as $item)
 {

        $title = $item->get_title();
         $description = $item->get_description();
        //some other stuff
 } 
```

现在好的部分

提要上的标题也是这样的

```
<title>
  <![CDATA[ 
     Nice title
  ]]>
</title> 
```

而且......它的工作原理！

如何获取提要的描述？我几乎什么都试过了！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:39:32.983

get_description [()](http://simplepie.org/api/source-class-SimplePie_Item.html#308)和[get_content()](http://simplepie.org/api/source-class-SimplePie_Item.html#386)方法都对原始数据进行清理，但您可以使用[get_item_tags](http://simplepie.org/api/source-class-SimplePie_Item.html#180) [()](http://simplepie.org/api/class-SimplePie_Item.html#_get_item_tags)方法将其原封不动地提取出来，如下所示：

```
$desc_tags = ($item->get_item_tags('', 'description')); // empty namespace is RSS2.0
if ($desc_tags) {
    print $desc_tags[0]['data'];
} 
```

唯一需要注意的是，当`get_content`or`get_description`将尝试检测命名空间时，您必须将其提供给`get_item_tags`，您可以在[此处查看命名空间常量](http://simplepie.org/wiki/faq/supported_xml_namespaces)。如果您事先知道提要格式，那应该不是问题，否则您可能需要进行反复试验`get_description`。

# c - 在巨大的位图中搜索第一个设置位

> ID：11581824
> 
> 赞同：10
> 
> 时间：2012-07-20T14:56:57.477
> 
> 标签：c

面试题：

在一个可以容纳百万辆汽车的停车位中，您需要找到一个*免费*的停车位。停车位可以在哪里没有条件，即停车场可以有多个入口，在入口附近找到一个停车位等都没有关系。问题是应该使用什么样的数据结构以及各种操作的复杂性。

我建议使用百万位的位数组，0/1 用于占用/空闲槽，因此为了找到空闲点，问题转化为查找第一个设置位。不要假设那里有多少辆车等，即位数组可以是稀疏的或密集的。

在巨大的位图中找到一组位的最快方法是什么？我确实建议将二进制搜索 + 每个单词的高效 ffs() 作为方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:19:06.153

一百万个 32 位整数需要大约 4MB 的内存。所以我会说你保留一个空闲插槽列表。每当汽车进入时，您就从列表中取出一个项目并分配它。每当一辆车离开时，您将释放的插槽号放入列表中。

由于您只会操作列表的末尾（因此这实际上用作[堆栈](http://en.wikipedia.org/wiki/Stack_%28data_structure%29)或[LIFO](http://en.wikipedia.org/wiki/LIFO_%28computing%29)结构），因此这为您提供了最佳的 O(1) 性能，无论是查找空闲插槽还是将插槽返回空闲状态。如果您在低级别使用原始内存块执行此操作，则需要一个指示列表当前结尾的指针。找到一个插槽会递减该指针并返回其值。返回一个插槽分配给指针并在之后增加它。

如果您决定稍后添加其他要求，您可以对您的数据进行一些操作，例如将其转换为[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。使用 0/1 位的大图，这样的扩展是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:17:05.627

你可以这样：

将最后一个空闲槽的索引存储在一个变量中，然后寻找下一个不要从头扫描位图，而是从这个值开始。

如果您需要释放一些插槽，请将其分配给最后一个索引。

`std::vector<bool>`可以是您的位数组，因此您不需要自己处理位（布尔在内部被打包成整数）。

你可以引入一个`mip-mapped`结构：

```
``std::vector<bool>`` Bitmap;
``std::vector<bool>`` Bitmap2; // half-sized
``std::vector<bool>`` Bitmap4; // 1/4
``std::vector<bool>`` Bitmap8; // 1/8
// etc 
```

上层数组中的`free`值对应于下层数组有任何空闲槽的情况。您可以使用二进制搜索来遍历此结构。

# linq-to-sql - Linq-to-SQL 添加不需要的子行

> ID：11581825
> 
> 赞同：1
> 
> 时间：2012-07-20T14:56:59.223
> 
> 标签：linq-to-sql

我正在使用带有 MVC 3.0 的 Linq-to-SQL。我有一个通过外键与值表关联的主表（外键是存储在主表中的值表 ID）。

当`id`主表中的值表发生更改时，Linq-to-SQL 在值表中创建一个新的（不需要的）行，其中所有列与选定的值行相同，但具有新的自动 ID。

跟踪代码并监视 SQL Server 表的行会发现新行是从存储库中生成的，`db.SubmitChanges();`但通过它进行跟踪`designer.cs`并不清楚如何添加不需要的行。

# c++ - 错误 C2678：“==”二进制：未找到采用“CSchemaString”类型的左操作数的运算符（或没有可接受的转换）

> ID：11581828
> 
> 赞同：0
> 
> 时间：2012-07-20T14:57:22.370
> 
> 标签：c++, .net, c++-cli

我正在将一个项目从 转移`VC++6`到`VC++ 2005`，并且在编译时出现以下错误。

> 错误 C2678：“==”二进制：未找到采用“CSchemaString”类型的左操作数的运算符（或没有可接受的转换）

这是代码；

```
CSchemaString References("id");
for(j=0;j<=tpChild.GetUpperBound();j++)
{
    if(References == "id") //error C2678: '==' binary: no operator found which takes a left operand of type 'CSchemaString' (or there is no acceptable conversion)

        References = References + intToString(((Component*)tpChild.GetAt(j))->GetComponentID()) +"_"+ ((Component*)tpChild.GetAt(j))->GetName();
    else
        References = References + " id" + intToString(((Component*)tpChild.GetAt(j))->GetComponentID()) +"_"+((Component*)tpChild.GetAt(j))->GetName();
}
if(References != "id") //si references n'est pas vide
    XComponent.AddPlant_Item_Ref(References);

return XComponent; 
```

}

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:00:07.460

CSchemaString 不是字符串。你需要做

```
References.ToString() == "id" 
```

# ruby-on-rails - ruby rails helper full_title

> ID：11581830
> 
> 赞同：0
> 
> 时间：2012-07-20T14:57:32.517
> 
> 标签：ruby-on-rails, rspec, view-helpers

I am on Chapter 4 of Michael Hartl's RoR tutorial, and having some troubles with rspec and using the full_title helper function. In part 4.1 of the tutorial, I have the helper code as follows. It's purpose is to make it so my help, contact, home, and about pages don't need to be supplied a title on each view.

```
module ApplicationHelper

# Returns the full title on a per-page basis.
def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
        base_title
    else
        "#{base_title} | #{page_title}"
    end
end 
```

end

My layout page looks like

```
<!DOCTYPE html>
<html>
  <head>
    <title><title><%= full_title(yield(:title)) %></title></title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield %>
  </body>
</html> 
```

and my static_pages_spec.rb file looks like:

```
require 'spec_helper'

describe "Static Pages" do

  include ApplicationHelper

    describe "Home page" do

        it "should have the h1 'Sample App'" do
            visit '/static_pages/home'
            page.should have_selector('h1', :text => 'Sample App')
      end
      it "should have the base title 'Home'" do
        visit '/static_pages/home'
        page.should have_selector('title',
                              :text => "Ruby on Rails Tutorial App")

      end
      it "should not have a custom page title" do
        visit '/static_pages/home'
        page.should_not have_selector('title', :text => '| Home')
      end
  end

  describe "Help page" do

    it "should have the h1 'Help'" do
        visit '/static_pages/help'
        page.should have_selector('h1', :text => 'Help')
    end
    it "should have the right title 'Help'" do
        visit '/static_pages/help'
        page.should have_selector('title',
                              :text => "#{base_title} | Help")
    end
  end

  describe "About us" do

    it "should have the h1 'About Us'" do
      visit '/static_pages/about'
      page.should have_selector("h1", :text => "About Us")
    end
    it "should have the right title 'About Us'" do
        visit '/static_pages/about'
        page.should have_selector('title',
                              :text => "#{base_title} | About Us")
    end
  end

  describe "Contact" do

    it "should have the h1 'Contact'" do
      visit '/static_pages/contact'
      page.should have_selector('h1', :text => "Contact")
    end
    it "should have the right title 'Contact'" do
        visit '/static_pages/contact'
        page.should have_selector('title',
                              :text => "#{base_title} | Contact")
    end
  end
end 
```

Yet when I run rspec, I get 4 test failures. 3 of them refer to the contact, about us, and help pages and say something along the lines of

Failure/Error: :text => "#base_title} | Contact") NameError: undefined local variable or method "base_title" for #

Can anyone tell me what's going wrong here? I suspect it has something to do with the helper function ans the base_title variable not being recognized by Rspec, but according to the tutorial the test suite should be passing all green.

**Update:** I figured out why one of the tests was failing. But I still have a problem with those 3 views saying base_title is an undefined method.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:02:01.547

In the following test, how rspect knows what is `base_title` (2nd last line).

```
describe "Help page" do

  it "should have the h1 'Help'" do
    visit '/static_pages/help'
    page.should have_selector('h1', :text => 'Help')
  end
  it "should have the right title 'Help'" do
    visit '/static_pages/help'
    page.should have_selector('title',
                          :text => "#{base_title} | Help")
  end
end 
```

You have not defined it. I guess that's why your tests are failing.

# python - win32com.client.Dispatch() 32-64 位程序

> ID：11581832
> 
> 赞同：1
> 
> 时间：2012-07-20T14:57:38.173
> 
> 标签：python, com, 32bit-64bit, win32com

我正在尝试在 python 中使用 win32com 创建一个 com 对象。使用这些命令：

```
import win32com.client
com_nxn = win32com.client.Dispatch("NxNNamespace.NxNNamespaceHelper") 
```

我尝试了 2 次，首先是我的 64 位 python2.6 安装和 win32 64 位安装。我能够使用 import win32com.client 行。但是 con_nxn 命令仍然不起作用并给我以下错误：

```
File "C:\Python26\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch) 
```

pywintypes.com_error: (-2147221164, 'Classe non enregistr\xe9e', None, None)

另一方面，安装了 python 和 win32com 32 位，一切正常，我的 Com 对象已创建。我认为问题在于我要实例化的软件是 32 位的，并且不提供 64 位 Com 对象

所以我的问题是：我怎样才能让它在我的 python 64Bit 上工作？我可以在我的 python 64Bit 上以某种奇怪的方式（复制 dll）使用 win32Com 32 位吗？或者问题可能不是我想的那样，在这种情况下，如果有人能启发我，我将不胜感激，我完全是 com Object 的初学者：D

（我在 Windows 7 64 位）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:28:11.973

根据对象的实现方式，您可以通过将 clsctx=pythoncom.CLSCTX_LOCAL_SERVER 添加到传递给 Dispatch 的参数来更改激活上下文。如果这不起作用，请为 clsctx 尝试 CLSCTX_ACTIVATE_32_BIT_SERVER (0x40000)。如果这些都不起作用，您仍然可以使用控制面板->管理工具->组件服务为应用程序创建进程外代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T07:46:23.350

尝试这个。我不确定这个解决方案
C:\Windows\SysWOW64>.\msiexec.exe /i ' *path of application* '

附加信息在[这里](http://python.6.x6.nabble.com/Problem-using-win32com-client-Dispatch-on-Win7-64bit-td1957248.html)

# java - Java 蔚来。为什么翻转（）方法会破坏我的程序？

> ID：11581835
> 
> 赞同：0
> 
> 时间：2012-07-20T14:57:51.207
> 
> 标签：java, nio, bytebuffer, socketchannel

Java 代码如下：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.SocketChannel;

public class Test {
    public static void main(String args[]) throws IOException {

        SocketChannel c = SocketChannel.open();
        c.connect(new InetSocketAddress("google.com", 80));

        ByteBuffer b = ByteBuffer.allocate(1024);
        b.put("Request".getBytes());

        System.out.println("Write: " + c.write(b));

        int i;
        while ((i = c.read(b)) != -1) {

            System.out.println("Read: " + i);
            b.clear();

        }
    }
} 
```

实际结果：

> 写入：1017 读取：0 读取：1024 读取：44

第一次，方法`read()`读取 0 个字节。这并不酷。

我修改了我的代码：

```
 b.put("Request".getBytes());

    System.out.println("Write: " + c.write(b));

    b.flip(); //I added this line
    int i;
    while ((i = c.read(b)) != -1) {

        System.out.println("Read: " + i);
        b.clear();

    } 
```

实际结果：

> 写入：1017 读取：1024 读取：44

它已经看起来更好了。谢谢你`flip()`！

接下来，我放入缓冲区 String **"Request"**，该 String 的长度为**7**，但方法`write()`返回**1017**。

什么信息方法写入通道？

我不确定，该方法写了字符串**"Request"**。

好的，我再次修改了我的代码：

```
 b.put("Request".getBytes());

    b.flip(); // I added this line
    System.out.println("Write: " + c.write(b));

    b.flip();
    int i;
    while ((i = c.read(b)) != -1) {

        System.out.println("Read: " + i);
        b.clear();

    } 
```

实际结果：

> 写：7

和代码崩溃了......

**凭什么？我的错误在哪里？**

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:17:32.723

`flip`需要在从缓冲区读取数据**之前**调用该方法。该`flip()`方法将缓冲区重置`limit`为当前位置，并将缓冲区重置`position`为 0。

所以，如果你有 7 个字节的数据`ByteBuffer`，你的位置（从 0 开始）将`flip()`是`limit = 7`7 `position = 0`。现在，可以进行阅读了。

这是一个关于如何最好地使用的示例`flip()`：

```
public static final void nioCopy(ReadableByteChannel input, WritableByteChannel output) throws IOException {
    ByteBuffer buffer = ByteBuffer.allocate(DEFAULT_BUFFER_SIZE);
    while (input.read(buffer) != -1) {
        //Flip buffer
        buffer.flip();
        //Write to destination
        output.write(buffer);
        //Compact
        buffer.compact();
    }

    //In case we have remainder
    buffer.flip();
    while (buffer.hasRemaining()) {
        //Write to output
        output.write(buffer);
    }
} 
```

*   [附加资源](http://www.tech-recipes.com/rx/1438/java-working-with-buffers/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T19:43:42.267

尽管它的（选择不当）名称，`flip()`它不是对称的。您必须在从缓冲区获取任何操作（写入或获取）之前调用它，然后调用其中一个`compact()`或`clear()`之后将缓冲区恢复到准备好读取或放置的状态。

# c# - c#面向对象编程问题

> ID：11581843
> 
> 赞同：0
> 
> 时间：2012-07-20T14:58:28.773
> 
> 标签：c#, class, object, nested

```
class Program
{
    static void Main(string[] args)
    {
        Master m = new Master(37);
        Content c = new Content(m);
    }
} 
```

我定义了两个类。第一个如下：

```
internal class Content 
{
    private Master _parentMaster;

    private Content _contentChildren;

    #region Constructor

    internal Content(Master master)
    {
        this._parentMaster = master;
    }
    internal Content(Master master, long contentId)
    {
        this._parentMaster = master;
        _getContent(contentId);
    }

    #endregion

    #region Private Methods

    private void _getContent(long contentId)
    {
        contentRepository.getContent(contentId, _parentMaster.MasterId);
    }

    #endregion

    #region Internal Methods

    internal void AddContent()
    {
        // code omitted
    }
    internal void UpdateContent()
    {
        // code omitted
    }

    internal void GetChildren()
    {
        // code imitted
    }
    internal void GetRootContent()
    {
        // code omitted
    }

    #endregion

    #region Properties

    // code omitted

    #endregion

} 
```

第二个：

```
public class Master
{
    private MasterEntities _master;
    private List<Master> _masters;

    #region Constructor

    internal Master()
    {
        _master = new MasterEntities();
    }
    internal Master(long masterId)
    {
        _getMaster(masterId);
    }

    #endregion

    #region Private Methods

    internal void _getMaster()
    {
            // code omitted
    }

    #region Properties

    internal long MasterId
    {
        get
        {
            return _master.id;
        }
        set
        {
            _master.id = value;
        }
    }
    // code omitted

    #endregion

} 
```

这是实现这两个类的正确方法吗？还是更好地实现嵌套类？如果是，如何使用嵌套类获得“Main”中所述的相同结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:40:40.013

无论您是否有嵌套类，都没有太大区别。它只会改变您访问类类型的方式，但不会改变类的行为。嵌套类看不到封闭类的成员，除非它有对它的引用。

说，我们有这个嵌套类

```
public class Containing
{
    public class Nested
    {
    }
} 
```

现在您可以从外部访问`Containing`课程

```
Containing.Nested obj = new Containing.Nested(); 
```

包含类的行为类似于命名空间。对于其他嵌套类型也是如此。如果嵌套类型紧密绑定到包含类，我只会使用嵌套类型。一个很好的例子是`enum`仅在特定类中使用。

```
public class SomeData
{
    public enum MyValueType
    {
        Aaa, Bbb, Ccc
    }

    public MyValueType MyValue { get; set; }
} 
```

`Content`您的班级可能就是这种情况。是否让您的代码更易于理解和结构更好由您决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:07:36.127

如果一个类完全是另一个类的实现细节，我通常只使用嵌套类——在这种情况下，我将嵌套类设为私有。如果一个类需要在另一个类之外使用，在这种情况下我通常不会有嵌套类。

例外可能是应用于另一个类、委托签名或 EventArgs 派生类的枚举。

但是，在大多数情况下，它是风格的。如果您发现将一个类嵌套在另一个类中可以提供更好的可读性或可维护性，那么这确实是个人选择。

# java - 观察者在改变后停止

> ID：11581845
> 
> 赞同：0
> 
> 时间：2012-07-20T14:58:34.177
> 
> 标签：java

如何将下面的 Watcher 转换为持续运行？我希望它即使在检测到更改后也能继续侦听文件。也许是一个线程？

```
import java.io.IOException;
import java.nio.file.*;
import java.util.List;

public class Listener {

    public static void main(String[] args) {

        Path myDir = Paths.get("C:/file_dir/listen_to_this");

        try {
            WatchService watcher = myDir.getFileSystem().newWatchService();
            myDir.register(watcher, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE, StandardWatchEventKinds.ENTRY_MODIFY);
            WatchKey watckKey = watcher.take();
            List<WatchEvent<?>> events = watckKey.pollEvents();
            for (WatchEvent event : events) {
                if (event.kind() == StandardWatchEventKinds.ENTRY_CREATE) {
                    System.out.println("Created: " + event.context().toString());
                }
                if (event.kind() == StandardWatchEventKinds.ENTRY_DELETE) {
                    System.out.println("Delete: " + event.context().toString());
                }
                if (event.kind() == StandardWatchEventKinds.ENTRY_MODIFY) {
                    System.out.println("Modify: " + event.context().toString());
                }
            }
        } catch (IOException | InterruptedException e) {
            System.out.println("Error: " + e.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:18:54.800

不再需要任何线程。你可以简单地把它放在一个`while`循环中：

```
public static void main(String[] args) throws Exception {
    Path myDir = Paths.get("C:/file_dir/listen_to_this");

    WatchService watcher = myDir.getFileSystem().newWatchService();
    myDir.register(watcher, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE, StandardWatchEventKinds.ENTRY_MODIFY);

    while (true) {
        WatchKey watckKey = watcher.take();
        List<WatchEvent<?>> events = watckKey.pollEvents();
        for (WatchEvent event : events) {
            if (event.kind() == StandardWatchEventKinds.ENTRY_CREATE) {
                System.out.println("Created: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKinds.ENTRY_DELETE) {
                System.out.println("Delete: " + event.context().toString());
            }
            if (event.kind() == StandardWatchEventKinds.ENTRY_MODIFY) {
                System.out.println("Modify: " + event.context().toString());
            }
        }
        watchKey.reset();
    }
} 
```

# sql - SQL 动态 WHERE 子句

> ID：11581847
> 
> 赞同：0
> 
> 时间：2012-07-20T14:58:42.627
> 
> 标签：sql, sql-server-2008, dynamic-sql

全部，我有下表`Foo`，它是一个复杂`PIVOT`查询的输出

![示例结果集](../Images/ea89f7a7c9e72f1d06fa97ce0ddc1578.png)

我需要删除此表中具有 (DB1, DB2, DB3) all 的行`NULL`。正常情况下，我们可以使用类似的东西

```
DELETE FROM Foo 
WHERE [DB1] IS NULL 
  AND [DB2] IS NULL 
  AND [DB3] IS NULL; 
```

但问题是这段代码是从 C# 调用的，并且列（DB1、DB2、DB3）将从执行到执行发生变化。

**我怎样才能动态地做到这一点？**

谢谢你的时间。

***编辑1。**我有另一个`Bar`包含可用`DB#`列的表，因此可以使用此表来获取子句`SELECT DISTINCT ...`中我需要的列列表。`WHERE`但是，我以前从未这样做过，不知道从哪里开始......感谢任何帮助。*

***编辑2。我不能以任何方式使用 C#**。C# 代码是 SQL 解析器，可与给定的 .sql 文件一起使用。这必须完全在 SQL 中完成。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:03:08.567

您可以使用 StringBuilder 动态构建 WHERE 子句，假设 C# 代码知道输出中应该存在的列。

通常，当您这样做时，您会希望在动态 WHERE 子句中包含参数占位符，并动态地将参数添加到查询中以避免 SQL 注入。但是，在这种情况下，没有变量值。只需在 C# 中动态连接 WHERE 子句的各个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:11:36.137

`sp_executesql`允许您执行在 SQL 脚本中构建的 SQL 字符串。

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

从你的吧台

```
create proc DumpFooJunk 
as
begin 
    declare @strCols nvarchar(max)
    select @strCols = N''
    select @strCols = @strCols + ' AND ' + name + ' IS NULL ' from [bar]
    select @strCols = N'DELETE FROM [foo] WHERE ' + substring(@strCols,5,LEN(@strcols))
    select @strCols
    -- exec sp_executesql @strCols
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T15:22:18.660

除了`WHERE`动态构建之外，您还可以尝试以下操作：

```
DELETE FROM Foo 
WHERE
  (0 = @db1 AND [DB1] IS NULL)
  AND (0 = @db2 AND [DB2] IS NULL)
  AND (0 = @db3 AND [DB3] IS NULL)
  -- Etc...
; 
```

通过将绑定参数设置`@db_`为 0，您可以有效地“关闭”相应的`IS NULL`. 因此，只需将需要测试的那些设置为不同于 0 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:22:07.197

如果它们始终位于相同的位置，请尝试通过它们的索引值获取列，并获取列标题名称，然后使用它们构造 SQL 语句。

例如

```
string colHeader1 = (string)dr[3];
string colHeader2 = (string)dr[4];
string colHeader3 = (string)dr[5]; 
```

# c# - 如何使用 AND 运算符？

> ID：11581852
> 
> 赞同：0
> 
> 时间：2012-07-20T14:58:56.580
> 
> 标签：c#, regex

如何在 C# 中使用正则表达式匹配句子中的多个字符串？
例如，在下面的句子中，我想检查字符串是否`L - V`存在`Dom`。

> L - V 8:30 a 22:00 小时。Sab y Dom..11:00 a 22:00 hrs。

我在正则表达式中遇到 AND 运算符的问题。

```
Regex.IsMatch(hours, @"\bL - V\b.*?\Dom\b") 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:02:08.020

您可以将其作为单个正则表达式来执行，例如，`/L - V.*Dom/`也可以进行两个匹配和一个和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:14:30.913

将术语与 AND 组合是 RegEx 的默认行为。你的表达几乎是正确的，除了“Dom”的“D”之前的反斜杠。您还可以在“Dom”之前附加一个“\b”，以便仅查找整个单词。还有“？” 如果您只想检查模式是否存在，则没有区别。

```
\bL - V\b.*\bDom\b 
```

如果字符串应包含“L - V”或“Dom”，则表达式为

```
\b(L - V|Dom)\b 
```

如果找到整个单词并不重要，您可以在两个表达式（`"L - V.*Dom"`resp. `"L - V|Dom"`）中删除所有的“\b”，或者只是这样做

```
hours.Contains("L - V") && hours.Contains("Dom") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T15:01:58.467

[使用两个单独的正则表达式（或仅使用`String.indexOf(String)`method](http://msdn.microsoft.com/en-us/library/aa904283)）和 C# 的常规运算符可能更清楚`&&`；但如果你想把它放到一个单一的正则表达式中，那么你可以编写以下任何一个：

```
L - V.*Dom                <-- if `L - V` will always come before `Dom`
(L - V.*Dom|Dom.*L - V)   <-- if you don't know which will come first 
```

（`.`表示“除换行符以外的任何字符”，因此`.*`表示“零个或多个非换行符”，即“任何不包含换行符的子字符串”）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T15:02:00.303

它可以简单地完成

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      string txt="L - V 8:30 a 22:00 hrs. Sab y Dom..11:00 a 22:00 hrs.";

      string re1="(L)"; // Any Single Character 1
      string re2=".*?"; // Non-greedy match on filler
      string re3="(-)"; // Any Single Character 2
      string re4=".*?"; // Non-greedy match on filler
      string re5="(V)"; // Any Single Character 3
      string re6=".*?"; // Non-greedy match on filler
      string re7="(Dom)";   // Word 1

      Regex r = new Regex(re1+re2+re3+re4+re5+re6+re7,RegexOptions.IgnoreCase|RegexOptions.Singleline);
      Match m = r.Match(txt);
      if (m.Success)
      {
            String c1=m.Groups[1].ToString();
            String c2=m.Groups[2].ToString();
            String c3=m.Groups[3].ToString();
            String word1=m.Groups[4].ToString();
            Console.Write("("+c1.ToString()+")"+"("+c2.ToString()+")"+"("+c3.ToString()+")"+"("+word1.ToString()+")"+"\n");
      }
      Console.ReadLine();
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T15:08:51.210

如果您想使用正则表达式，请尝试：

```
bool isMatch = Regex.IsMatch(hours, @"^\bL - V\b.*?\Dom.*$"); 
```

但你也可以说

```
bool isMatch = hours.IndexOf("L - V") != -1 && hours.IndexOf("Dom") != -1 
```

也许没有正则表达式更简单，在我看来，如果没有正则表达式可以做某事，那就不用正则表达式。也许在这种情况下，如果您想更加宽容，例如匹配偶数`L-V`或`L- V`值得使用正则表达式（但我们需要修改表达式）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T15:13:52.583

好吧，您的正则表达式返回 true，所以我不确定您为什么会遇到问题。话虽如此，正则表达式在这里似乎有点过头了，特别是如果您不知道哪个字符串先出现。我可能会这样做：

```
var haystack = "L - V 8:30 a 22:00 hrs. Sab y Dom..11:00 a 22:00 hrs.";
if (new List<string> { "L - V", "Dom" }.TrueForAll(needle => haystack.Contains(needle))) 
{
  ///stuff
} 
```

# php - Joomla Module Chrome 模块索引

> ID：11581856
> 
> 赞同：0
> 
> 时间：2012-07-20T14:59:15.433
> 
> 标签：php, html, css, joomla

我正在使用 Joomla Module Chrome 来设置侧边栏的样式。是否可以找出当前模块是否是 modules.php 文件中的最后一个模块？

基本上我想在 CountModules 函数中找到当前模块的索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:12:55.643

我猜你正试图在最后一个侧边栏项目中添加额外的 CSS，对吧？我自己不使用 Joomla，但如果可能的话，您可以`id="last-item"`为最后一个模块元素添加一个属性。然后在 CSS 中，您可以使用`#last-item`.

此外，如果您只是想在底部添加一条线或其他东西（应该像背景颜色一样），您可以在底部添加另一个模块，只包含它。这有点乱，但它可以工作。

# windows - 观看后自动标记电影文件

> ID：11581864
> 
> 赞同：2
> 
> 时间：2012-07-20T14:59:42.910
> 
> 标签：windows, powershell, tags

我想在我看过电影后自动为我的电影添加一个“已观看”的标签，这样我就可以跟踪我还没有看过的电影。现在，我有两个文件夹“未观看”和“已观看”，我必须在它们之间手动移动电影。

我这个懒惰的开发者宁愿花几个小时编写一个脚本来为我做这件事，而不是手动移动文件几秒钟。我在互联网上简要阅读了有关 Powershell 的 getMetadata 的信息，但我仍然对这种方法一无所知。是否有关于 Powershell 及其所有功能的良好文档？这会做我想做的事吗？

我想要的一个高级功能是告诉我播放文件多长时间。有时我打开一个电影文件来检查质量，然后立即关闭它。我通常在 Windows 7（64 位）上使用 VLC，但如果我在 WMP 中观看电影时可以更轻松地做到这一点，我将对此持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:34:12.480

这可能不简单！

在一个理想的世界里，你想要什么（如果我理解的话）它让你的媒体播放器自动将视频标记为在其元数据中查看。这里确实有两个单独的难题 - 第一个是如何让您的媒体播放器在您看完视频后运行脚本，第二个是如何更新视频元数据。

我不确定是否有任何媒体播放器能够在视频完成后运行脚本。我想您可以深入研究并编写自己的媒体播放器，使用 Silverlight 之类的东西来完成困难的工作。祝你好运！:-)

更简单的说法可能是使用 PowerShell 函数，如下所示：

```
Show-Video {
  param ( $filetoplay,
       [switch] $tag)

# play the video
  mediaplayer $filetoplay # check with your media player for details on how to call it

# when we're done:
  If ($tag) {Update-Metadata -file $filetoplay}

} 
```

您想整理一下，添加一些错误检查等。但是您明白了。

第二个问题是如何更新元数据。元数据是关于数据的数据。有问题的数据是 AVI（或任何媒体），元数据是有关该 AVI 的信息。元数据被添加到媒体文件中，通常在文件的开头。您的挑战将是打开该元数据，并以媒体播放器等可以理解的方式对其进行更新！

我发现 Joel 的一篇很酷的帖子解释了如何做到这一点 - [http://huddledmasses.org/editing-media-tags-from-powershell/](http://huddledmasses.org/editing-media-tags-from-powershell/)。它需要一个外部库（TabLib Sharp - 下载地址：http: [//download.banshee.fm/taglib-sharp](http://download.banshee.fm/taglib-sharp)）。我不确定您是否可以使用“已观看”/“未观看”元数据项目，但希望这可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T08:22:26.100

推荐使用基于标签的文件系统。

```
Some of those are:
https://www.tagspaces.org/
https://www.tagsistant.net/ 
```

这样您就可以在观看视频时标记文件。这是未来的文件系统。Windows 已经内置了此功能。

# google-app-engine - NDB 的 GAE Memcache 使用率似乎很低

> ID：11581866
> 
> 赞同：2
> 
> 时间：2012-07-20T14:59:45.750
> 
> 标签：google-app-engine, memcached, app-engine-ndb

我有一个带有约 40 GB 数据库的 Google App Engine 项目，但使用 NDB 的读取性能很差。我注意到我的内存缓存大小（在仪表板上列出）只有大约 2 MB。我希望 NDB 隐含地更多地使用 memcache 来提高性能。

有没有办法调试 NDB 的 memcache 使用情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T20:24:37.417

这个问题的表述相当糟糕——读取性能差的原因有很多，大多数是由于应用程序编写不佳，但您没有告诉我们有关该应用程序的任何信息。

唯一可以回答的问题是最后一个问题：“有没有办法调试 NDB 的 memcache 使用情况？” 除了 Sologoub 的指针之外，我还建议使用 Appstats 来查明是否确实进行了预期的 memcache 调用。阅读 NDB 源代码，尤其是 context.py 中的 get() 和 put()，也可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:31:53.620

此页面很好地解释了 NDB 缓存的工作原理： [https ://developers.google.com/appengine/docs/python/ndb/cache](https://developers.google.com/appengine/docs/python/ndb/cache)

我要检查的第一个地方是策略设置，以确保您实际上是在告诉 NDB 缓存您想要缓存的内容：[https ://developers.google.com/appengine/docs/python/ndb/cache#policy_functions](https://developers.google.com/appengine/docs/python/ndb/cache#policy_functions)

# jsp - 在jsp中显示RDF模型

> ID：11581867
> 
> 赞同：0
> 
> 时间：2012-07-20T14:59:50.413
> 
> 标签：jsp, rdf

我目前正在编写一个程序，该程序从表单获取用户输入并将其输入 RDF 模型并在 JSP 页面上显示模型。到目前为止，我有表单和 RDF 模型，但我无法显示 RDF 模型.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:03:30.220

您可能要考虑为什么要尝试向用户展示模型以及您希望他们用它做什么。我认为在大多数情况下，向用户展示一组三元组，特别是如果他们不熟悉 RDF，是充满敌意的。那是机器可读的信息。

如果您只想告诉用户，这是您输入的信息，那么[RDFa](http://www.w3.org/TR/xhtml-rdfa-primer/)之类的内容可能是相关的。人们将能够比序列化的 RDF 更容易地消化一个普通的网页。或者，也许您可​​以以某种图形格式输出结果，也许使用[库](http://thejit.org/)来显示 RDF 图。图表有时可能很有趣，您可能会想出一些有趣的可视化，但这不一定是一种可以与大图表一起扩展的方法，而且人们消费起来仍然比仅仅向他们展示一个普通的网络更难页。

如果您只是为了调试而这样做，请将模型写入字符串并将字符串打印到 JSP 中。否则，将 RDF 详细信息留给自己，并向用户显示一个普通页面，这是我的建议。仅仅因为您在后台使用 RDF 并不意味着您应该将其强加给用户。您不会看到人们构建一个 Rails 应用程序，其中用户的所有显示都在 Ruby 代码中。不，他们向他们展示 HTML。

# ios - ios 今天凌晨 12 点

> ID：11581870
> 
> 赞同：1
> 
> 时间：2012-07-20T15:00:06.813
> 
> 标签：ios, nsdate, nscalendar, nsdatecomponents

```
NSDate *today = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[calendar setLocale:[NSLocale currentLocale]];
[calendar setTimeZone:[NSTimeZone timeZoneWithName:@"US/Central"]];

NSDateComponents *nowComponents = [calendar components:NSYearCalendarUnit | NSWeekCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:today];

[nowComponents setHour:hour];
[nowComponents setMinute:0];
[nowComponents setSecond:0];

NSLog(@"%@", [calendar dateFromComponents:nowComponents]); 
```

日志`2012-01-01 06:00:00 +0000`。根据时区设置，时间是正确的，但今天是 7 月 20 日……我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:02:53.573

您需要提取年、月和日组件，并构造一个新的`NSDate`，如下所示：

```
NSDate *today = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[calendar setLocale:[NSLocale currentLocale]];
[calendar setTimeZone:[NSTimeZone timeZoneWithName:@"US/Central"]];

NSDateComponents *nowComponents = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];
today = [calendar dateFromComponents:nowComponents]; 
```

您不需要获取时间组件然后将它们设置回零：您可以通过*不*要求首先提取它们来将它们保持在默认值。

# android - Android模拟器无法使用缓慢

> ID：11581875
> 
> 赞同：1
> 
> 时间：2012-07-20T15:00:22.777
> 
> 标签：android, performance, simulator

对于 PhoneGap 项目，我需要一个正在运行的 Android 模拟器。于是从安卓官网安装并尝试运行……但是这东西太慢了，开发是不可能的。

我在 27 英寸 iMac、12 GB RAM Core i5 和 SSD 上的 OS X Lion 下运行它。

让这个东西运行有什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:03:48.657

只要您不使用 HC/ICS/JB（但是每个版本都变得越来越好）或者您不使用 OpenGL，Android 模拟器就非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:04:44.523

我使用真实设备进行开发，但如果您真的想使用模拟器，这里有一些提示；

[http://developer.android.com/tools/devices/emulator.html#accel-vm](http://developer.android.com/tools/devices/emulator.html#accel-vm)

# r - 在 R 中绘制相关矩阵，如 Excel 示例

> ID：11581879
> 
> 赞同：5
> 
> 时间：2012-07-20T15:00:34.067
> 
> 标签：r, plot

我一直在尽量减少对 Excel 的使用以支持 R，但在显示简单数据单元格时仍然卡住了，因为这通常需要作为分析的最后一步。以下示例是我想破解的示例，因为它可以帮助我在工作流程的这个关键部分切换到 R。

我想在 R 中说明以下相关矩阵：

```
matrix_values <- c(
  NA,1.54,1.63,1.15,0.75,0.78,1.04,1.2,0.94,0.89,
  17.95,1.54,NA,1.92,1.03,0.78,0.89,0.97,0.86,1.27,
  0.95,25.26,1.63,1.92,NA,0.75,0.64,0.61,0.9,0.88,
  1.18,0.74,15.01,1.15,1.03,0.75,NA,1.09,1.03,0.93,
  0.93,0.92,0.86,23.84,0.75,0.78,0.64,1.09,NA,1.2,
  1.01,0.85,0.9,0.88,30.4,0.78,0.89,0.61,1.03,1.2,
  NA,1.17,0.86,0.95,1.02,17.64,1.04,0.97,0.9,0.93,
  1.01,1.17,NA,0.94,1.09,0.93,17.22,1.2,0.86,0.88,
  0.93,0.85,0.86,0.94,NA,0.95,0.96,24.01,0.94,1.27,
  1.18,0.92,0.9,0.95,1.09,0.95,NA,1.25,21.19,0.89,
  0.95,0.74,0.86,0.88,1.02,0.93,0.96,1.25,NA,18.14)
cor_matrix <- matrix(matrix_values, ncol = 10, nrow = 11)

item_names <- c('Item1','Item2','Item3','Item4','Item5',
                'Item6','Item7','Item8','Item9','Item10')
colnames(cor_matrix) <- item_names
rownames(cor_matrix) <- c(item_names, "Size") 
```

单元格应根据它们的等级进行着色（例如，> 95 个百分位是完全绿色，<5 个百分位是完全红色）。最后一行应该用水平条表示（代表最大值的分数）。

我在 Excel 中制作了我想要的输出： ![相关矩阵](../Images/a0e0863c8df76b31ec42cb77cbfccc9f.png)

理想情况下，我还想突出显示相关组（手动或通过脚本），如下图所示： ![带亮点的相关矩阵](../Images/0e70564c602fc2561d739fe62600dd3f.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T15:29:48.663

您的相关矩阵有几个大于 1 的值，这是不可能的。但无论如何...

试试这个

```
library(reshape2)
dat <- melt(cor_matrix[-11, ])

library(ggplot2)
p <- ggplot(data =  dat, aes(x = Var1, y = Var2)) +
  geom_tile(aes(fill = value), colour = "white") +
  geom_text(aes(label = sprintf("%1.2f",value)), vjust = 1) +
  scale_fill_gradient(low = "white", high = "steelblue") 
```

`print(p)`

![在此处输入图像描述](../Images/30b135b937e302a79c9f82b93463d509.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T17:02:36.413

Myaseen208 的答案有一个良好的开端。我想我会再填写一些内容：在您指定的红色/绿色中获取颜色渐变，翻转 y 轴的顺序，并清理其他一些点（灰色背景和图例）。

```
library("reshape2")
library("ggplot2")

cor_dat <- melt(cor_matrix[-11,])
cor_dat$Var1 <- factor(cor_dat$Var1, levels=item_names)
cor_dat$Var2 <- factor(cor_dat$Var2, levels=rev(item_names))
cor_dat$pctile <- rank(cor_dat$value, na.last="keep")/sum(!is.na(cor_dat$value))

ggplot(data =  cor_dat, aes(x = Var1, y = Var2)) +
  geom_tile(aes(fill = pctile), colour = "white") +
  geom_text(aes(label = sprintf("%1.1f",value)), vjust = 1) +
  scale_fill_gradientn(colours=c("red","red","white","green","green"),
                       values=c(0,0.05,0.5,0.95,1),
                       guide = "none", na.value = "white") +
  coord_equal() +
  opts(axis.title.x = theme_blank(),
       axis.title.y = theme_blank(),
       panel.background = theme_blank()) 
```

![在此处输入图像描述](../Images/0ce05203b7797c63da0a5c3e598eddf0.png)

编辑：

现在尝试获取底部的蓝色尺寸条。

使尺寸条更难的是，它们是不同数据的完全不同的表示，而不是相关矩阵。因此，我将首先尝试将那部分分开，然后将它们组合在一起。

与 cor 数据一样，首先从矩阵中提取大小数据，然后将其转换为具有有用值的 data.frame，包括总数的分数。

```
size_dat <- melt(cor_matrix[11,,drop=FALSE])
size_dat$Var2 <- factor(size_dat$Var2, levels=item_names)
size_dat$frac <- size_dat$value / max(size_dat$value)

ggplot(data=size_dat, aes(x=Var2, y=Var1)) +
  geom_blank() +
  geom_rect(aes(xmin = as.numeric(Var2) - 0.5, 
                xmax = as.numeric(Var2) - 0.5 + frac),
            ymin = -Inf, ymax = Inf, fill="blue", color="white")  +
  coord_equal() +
  opts(axis.title.x = theme_blank(),
       axis.title.y = theme_blank(),
       panel.background = theme_blank()) 
```

该`geom_rect`调用使用了一些技巧，例如使用分类（离散）变量的数字表示来仔细定位事物。每个“项目”从它下面的 0.5 到它上面的 0.5。所以矩形的左边缘比项目值低 0.5，而右边缘在`frac`它的右边。对 y 限制使用`Inf`and`-Inf`意味着走极端。这给

![在此处输入图像描述](../Images/f799fd951fc8d0eef8e5f1c977022b2a.png)

现在试着把它们放在一起。x 比例是通用的，y 比例可以是通用的（尽管不相交）。玩水平和订单是必要的。另外，我在原始文件中翻转了 x 和 y（这很好，因为它是对称的）。由于数据集的提取和格式略有不同，因此我将它们重命名。

```
cor_dat2 <- melt(cor_matrix[-(nrow(cor_matrix),])
cor_dat2$Var1 <- factor(cor_dat$Var1, levels=rev(c(item_names, "Size")))
cor_dat2$Var2 <- factor(cor_dat$Var2, levels=item_names)
cor_dat2$pctile <- rank(cor_dat$value, na.last="keep")/sum(!is.na(cor_dat$value))

size_dat2 <- melt(cor_matrix["Size",,drop=FALSE])
size_dat2$Var1 <- factor(size_dat$Var1, levels=rev(c(item_names, "Size")))
size_dat2$Var2 <- factor(size_dat$Var2, levels=item_names)
size_dat2$frac <- size_dat$value / max(size_dat$value)

ggplot(data = cor_dat2, aes(x = Var2, y = Var1)) +
  geom_tile(aes(fill = pctile), colour = "white") +
  geom_text(aes(label = sprintf("%1.1f",value))) +
  geom_rect(data=size_dat2,
            aes(xmin = as.numeric(Var2) - 0.5, 
                xmax = as.numeric(Var2) - 0.5 + frac,
                ymin = as.numeric(Var1) - 0.5,
                ymax = as.numeric(Var1) + 0.5),
            fill="lightblue", color="white")  +
  geom_text(data=size_dat2, 
            aes(x=Var2, y=Var1, label=sprintf("%.0f", value))) +
  scale_fill_gradientn(colours=c("red","red","white","green","green"),
                       values=c(0,0.05,0.5,0.95,1),
                       guide = "none", na.value = "white") +
  scale_y_discrete(drop = FALSE) +
  coord_equal() +
  opts(axis.title.x = theme_blank(),
       axis.title.y = theme_blank(),
       panel.background = theme_blank()) 
```

![在此处输入图像描述](../Images/fb93ec2dd06cf41239b735b1fb7ec0c3.png)

这个最终版本不假设它是一个 10x10 的关联与额外的行。它可以是任何数字。`cor_matrix`必须有正确的名称（并且“Size”必须是最后一行）并且`item_names`必须包含项目列表。但它不一定是 10。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T19:49:10.190

这是一种使用基本图形的方法：

```
par(mar=c(1, 5, 5, 1))
plot.new()
plot.window(xlim=c(0, 10), ylim=c(0, 11))

quant_vals <- findInterval(cor_matrix[-11, ], 
                           c(-Inf, quantile(cor_matrix[-11, ],
                                            c(0.05, 0.25, 0.45, 0.55, 0.75, 0.95), 
                                            na.rm=TRUE), 
                             Inf))
quant_vals[is.na(quant_vals)] <- 4
cols <- c('#ff0000', '#ff6666', '#ffaaaa', '#ffffff', '#aaffaa', 
          '#66ff66', '#00ff00')
colmat <- matrix(cols[quant_vals], ncol=10, nrow=10)

rasterImage(colmat, 0, 1, 10, 11, interpolate=FALSE)
for (i in seq_along(cor_matrix[11, ])) {
  rect(i - 1, 0.1, i - 1 + cor_matrix[11, i]/max(cor_matrix[11, ]), 0.9, 
       col='lightsteelblue3')
}

text(col(cor_matrix) - 0.5, 11.5 - row(cor_matrix), cor_matrix, font=2)
rect(0, 1, 10, 11)
rect(0, 0, 10, 1)
axis(2, at=(11:1) - 0.5, labels=rownames(cor_matrix), tick=FALSE, las=2)
axis(3, at=(1:10) - 0.5, labels=colnames(cor_matrix), tick=FALSE, las=2)

rect(0, 8, 3, 11, lwd=2)
rect(4, 4, 7, 7, lwd=2)
rect(8, 1, 10, 3, lwd=2) 
```

[![在此处输入图像描述](../Images/93e648ba4db618c35f90922fe042d486.png)](https://i.stack.imgur.com/VERA3.png)

**数据**

```
cor_matrix <- structure(c(NA, 1.54, 1.63, 1.15, 0.75, 0.78, 1.04, 1.2, 0.94, 
0.89, 17.95, 1.54, NA, 1.92, 1.03, 0.78, 0.89, 0.97, 0.86, 1.27, 
0.95, 25.26, 1.63, 1.92, NA, 0.75, 0.64, 0.61, 0.9, 0.88, 1.18, 
0.74, 15.01, 1.15, 1.03, 0.75, NA, 1.09, 1.03, 0.93, 0.93, 0.92, 
0.86, 23.84, 0.75, 0.78, 0.64, 1.09, NA, 1.2, 1.01, 0.85, 0.9, 
0.88, 30.4, 0.78, 0.89, 0.61, 1.03, 1.2, NA, 1.17, 0.86, 0.95, 
1.02, 17.64, 1.04, 0.97, 0.9, 0.93, 1.01, 1.17, NA, 0.94, 1.09, 
0.93, 17.22, 1.2, 0.86, 0.88, 0.93, 0.85, 0.86, 0.94, NA, 0.95, 
0.96, 24.01, 0.94, 1.27, 1.18, 0.92, 0.9, 0.95, 1.09, 0.95, NA, 
1.25, 21.19, 0.89, 0.95, 0.74, 0.86, 0.88, 1.02, 0.93, 0.96, 
1.25, NA, 18.14), .Dim = 11:10) 
```

# php - 如何触发 MySQL 查询

> ID：11581880
> 
> 赞同：1
> 
> 时间：2012-07-20T15:00:37.647
> 
> 标签：php, mysql

如何在每小时触发一次 MySQL 查询……</p>

有没有办法通过自触发 SQL 查询而不刷新页面技术来更新记录？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:05:22.347

看看这个：[使用事件调度器](https://dev.mysql.com/doc/refman/5.5/en/events.html)

# javascript - 在颜色框中加载视频的 IE 错误

> ID：11581882
> 
> 赞同：0
> 
> 时间：2012-07-20T15:00:41.697
> 
> 标签：javascript, jquery, html

我在彩盒中动态加载视频，一切正常，除了 IE 显示隐藏 div 内的视频。如何管理？

这是我的彩盒电话：

```
$('#play-button').colorbox({
        inline : true,
        opacity: 0.6,
        width  : 920,
        height : 690,
        top    : 160,
        href   : "#video-player-lightbox"
    }).data('css-class','soccer-lightbox'); 
```

这是我的html结构：

```
<div style="display: none;">
    <div id="video-player-lightbox">
        <h2>Goals player</h2>
        <?php echo print_full_player( ); ?>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:00:24.237

它是一个Flash视频播放器吗？您确定 IE 中视频的窗口模式设置为`opaque`或`transparent`而不是`window`,`direct`或`gpu`？如果您没有使用某种脚本来生成您的 Flash 代码，您可能在对象标签或对象标签内有某种嵌入标签，用于嵌入 Flash 播放器，您必须`wmode`为两者设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:05:46.077

尝试一些类似的东西

```
<div style="display:none;visibility:hidden"> 
```

# php - 如何替换特定标签之间的代码并在其上应用 php eval

> ID：11581889
> 
> 赞同：-1
> 
> 时间：2012-07-20T15:01:17.617
> 
> 标签：php

我有一个从数据库调用内容的变量，示例如下

```
$content = '<div><h1>content here</h1>
<img src = 'image.jpg' /><br />

[code]echo 'welcome';[/code]

<h2>some content here</h2>
<p> some large content here</p>

[code]echo 'Click Here';[/code]

Thank you.';

echo 'headers here' .$content . 'footers here'; 
```

如何为 [code] 和 [/code] 标签之间的内容执行 PHP？剩余的文本将写为 html execpt 中使用的代码**[code] some php code [/code] tags**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:20:31.477

如果这是针对您网站的模板类型系统，我建议采用不同的路线。

首先，您的上述代码会发生变化，以便您的代码之间的部分如下所示：

```
[code]{{msg}}}[/code] 
```

现在，如果您愿意，您仍然可以将您的东西作为 php 代码存储在数据库中，但是在将其放入数据库之前对其进行评估更有意义，但我强烈建议不要使用查找/替换系统。

现在，您会想要一个可以执行以下操作的函数：

```
function output_template( $name, $data ) {
    $template_string = get_template_from_db( $name );
    for( $data as $k )
    {
        $template_string = str_replace( $k, $data[$k], $template_string );
    }
    return $template_string;
} 
```

然后你可以回显这个函数的返回值。如果您认为需要使用 eval，请重新考虑您在做什么，尤其是对于看似模板系统的东西。

# wampserver - WAMPSERVER 无法从 url localhost 访问，但 127.0.0.1 可以（在 win8 上）

> ID：11581892
> 
> 赞同：11
> 
> 时间：2012-07-20T15:01:24.230
> 
> 标签：wampserver

我只是从win 7切换到win 8。在win7上，wampserver一切正常，但是

当我尝试在 win8 上通过 url localhost 访问我的 wampserver 时，出现此错误

> 禁止的
> 
> 您无权访问此服务器上的 /。

但通过 url 127.0.0.1 是可以的。

我尝试通过将 phpmyadmin.conf 更改为来修复该错误

```
<Directory "c:/wamp/apps/phpmyadmin3.4.9/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow        
    Allow from all  
</Directory> 
```

谁能帮我解决这个错误？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-16T13:43:29.867

修改 apache HTTPD.CONF 文件。将“听 80”更改为“听 0.0.0.0:80 [http://forum.wampserver.com/read.php?2,93143](http://forum.wampserver.com/read.php?2,93143)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T17:07:27.740

更改 httpd.conf 并将 Allow from all 如下所示。

```
<Directory "c:/wamp/www/">
    Options Indexes FollowSymLinks
    AllowOverride all
    Order Deny,Allow
    Allow from all
</Directory> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T05:51:33.997

如果您有 AVIRA 或 AVG 之类的防病毒软件，它会通过在 c:\windows\system32\drivers\etc\HOSTS 的 HOSTS 文件中添加“::1”条目来阻止对 localhost 的更改。您所要做的就是删除此行 (::1) 或通过在 hosts 文件中在其前面添加“#”符号对其进行注释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-25T03:54:08.890

您必须安装 Visual Studio C++ 2010 SP1 Redistributable Package x86 或 x64

当您在 Windows 8 机器上安装[WampServer](http://www.wampserver.com/en/)时，这是必须的。

问题是，有些软件是在 MS Visual Studio 上构建的，因此需要 VS C++ 可再发行包才能运行。

VC10 SP1 vcredist_x86.exe 32 位：microsoft.com/download/en/details.aspx?id=8328

VC10 SP1 vcredist_x64.exe 64 位：microsoft.com/download/en/details.aspx?id=13523

如果以上下载不起作用，请尝试：

适用于 Visual Studio 2012 Update 4 的 Visual C++ Redistributable

[http://www.microsoft.com/en-us/download/details.aspx?id=30679](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

这适用于基于最新 Visual Studio 2012 构建的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T15:12:31.303

```
<Directory "c:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

这是我的 .conf 文件...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-30T23:12:45.727

我遇到了同样的问题，我尝试了以上所有方法，但没有结果。然后，我重新安装了 WampServer（手动删除 wamp 文件夹），这很有效，但最后我发现我的情况出了什么问题......

我对 http.conf 文件进行了更改，我取消了对此的注释>

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

然后我打开了未注释的文件来添加我的虚拟主机，但忘记为本地主机添加一个......所以，只需在 httpd-vhosts.conf 文件中添加它>

```
<VirtualHost *:80>
    DocumentRoot "C:\wamp\www"
    ServerName localhost
</VirtualHost> 
```

一切都恢复了正常...

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-02T23:32:05.130

这是一个对我有用的答案：在 httpd.conf 文件中：我改变了这个：

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

至

```
<Directory />
    AllowOverride none
    Require all granted
</Directory> 
```

这可能不是一个好的解决方案，但是在没有 sql 或 php 的 localhost 上简单地运行独立项目就可以了。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-26T15:58:54.323

我通过禁用端口 80 的防火墙解决了这个问题。

1.  转到窗口右侧的搜索。
2.  搜索“防火墙”。
3.  打开“高级防火墙”。
4.  转到入站规则。
5.  点击“新规则”。
6.  选择“端口”选项。
7.  点击下一步”
8.  选择“TCP”选项。
9.  选择“特定本地端口：”。
10.  在下一个文本框中输入“80”
11.  点击下一步。
12.  选择“允许连接”。
13.  点击下一步”。
14.  点击下一步”。
15.  命名为“端口 80 允许规则”。
16.  点击下一步”。

**注意：这不是一种安全的方式。完成工作后删除这条新创建的规则。**

# makefile - 添加到简单扩展变量

> ID：11581893
> 
> 赞同：4
> 
> 时间：2012-07-20T15:01:25.603
> 
> 标签：makefile, gnu-make

我正在使用一些需要运行的 MPI 代码`mpirun`。

我正在使用一个已经存在的 shell 脚本，我想添加到一个已经存在的行。

所以梦想是：

```
app=mpirun $(app) 
```

我知道可以使用 += 附加到变量，但我可以在前面添加吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:56:51.250

如果`app`应该成为（或保持）一个简单的扩展变量，那么以下内容就足够了：

```
app := mpirun $(app) 
```

# php - 使用 Codeigniter (v2) 在线跟踪用户数量

> ID：11581895
> 
> 赞同：0
> 
> 时间：2012-07-20T15:01:30.303
> 
> 标签：php, codeigniter, session, frameworks, tracking

我正在使用 Codeigniter 2，并希望将站点上当前用户的数量跟踪到数据库中。我知道这可以使用内置的会话类来实现，但我不确定我做错了什么——我在 MySQL 中创建了 ci_sessions 表并在配置中设置了以下内容——我是否需要进行任何其他调整当有人访问该站点时自动将会话记录到数据库中？

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:41:48.557

**模型**

```
class online_users_mod extends CI_Model
{
  function __construct(){
    parent::__construct();
  }

  //getting all session data
  function get_all_session_data(){
    $query=$this->db->select('user_data')->get('ci_sessions');
    return $query;
  }
} 
```

**控制器**

```
class online_users_lib extends CI_Controller{
  //put your code here

/**
 * CodeIgniter global
 *
 * @var string
 **/
protected $ci;

public function __construct() {
  $this->ci =& get_instance();
  $this->ci->load->model('online_users_mod');
}

//getting all online session data

function get_all_session_data(){
  $query=$this->ci->online_users_mod->get_all_session_data();
  $user = array();

    /* array to store the user data we fetch */
    $j=0;$k=0;
    foreach ($query->result() as $row)
    {
        $udata = unserialize($row->user_data);

        /* put data in array using username as key */

        if(isset($udata['yourlogin_data'])) 
        {
            if($udata['yourlogin_data']['User_cat']==2)
            {
                $user[$j]['yourlogin_data'] = $udata['yourlogin_data'];
                $j++;
            }

        }
    }
    return $user ;
 }
} 
```

# python - hdf5 / h5py ImportError: libhdf5.so.7

> ID：11581898
> 
> 赞同：24
> 
> 时间：2012-07-20T15:01:37.107
> 
> 标签：python, importerror, hdf5, h5py

我正在开发一个涉及 RHEL 6.3 (x86_64) 系统上的网络消息队列（msgpack、zmq、...）的项目。我正在安装最新的 glib、gevent、pygobject、pygtk 等软件包，以使 pylab / matplotlib 工作（也没有成功）。

放弃后，我回到了我的代码，不知何故我设法破坏了我的 hdf5 / h5py 安装 - h5py 在导入时找不到 libhdf5.so.7。我立即在 RHEL 6.3 (x86_64) 上的 /usr/local/hdf5 中重新安装了 hdf5-1.8.9，如下所示：

```
./configure --prefix=/usr/local/hdf5
make
make check
sudo make install
make check install 
```

这似乎工作得很好。然后我去重新安装h5py（在python 2.7.3中）：

```
python2.7 setup.py build --hdf5=/usr/local/hdf5/
python2.7 setup.py test   # optional
# sudo python2.7 setup.py install 
```

无法在测试中导入 _errors 文件，如下所示：

```
======================================================================
ERROR: _hl.tests.test_attrs_data (unittest.loader.ModuleImportFailure)
----------------------------------------------------------------------
ImportError: Failed to import test module: _hl.tests.test_attrs_data
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/unittest/loader.py", line 252, in _find_tests
    module = self._get_module_from_name(name)
  File "/usr/local/lib/python2.7/unittest/loader.py", line 230, in _get_module_from_name
    __import__(name)
  File "/home/cronburg/Downloads/h5py-2.0.1/build/lib.linux-x86_64-2.7/h5py/_hl/tests/test_attrs_data.py", line 5, in <module>
    import h5py
  File "/home/cronburg/Downloads/h5py-2.0.1/build/lib.linux-x86_64-2.7/h5py/__init__.py", line 1, in <module>
    from h5py import _errors
ImportError: libhdf5.so.7: cannot open shared object file: No such file or directory

----------------------------------------------------------------------
Ran 12 tests in 0.001s

FAILED (errors=12) 
```

在我安装上述软件包/压缩包之前，h5py 工作正常，我不记得碰过任何看起来像 hdf5 的东西。有任何想法吗？

编辑：试图找到文件只显示在我解压它的位置：

```
cronburg@rhel:~/Downloads/h5py-2.0.1$ locate libhdf5.so.7
/home/cronburg/tmp/hdf5-1.8.9/hdf5/lib/libhdf5.so.7
/home/cronburg/tmp/hdf5-1.8.9/hdf5/lib/libhdf5.so.7.0.3
/home/cronburg/tmp/hdf5-1.8.9/src/.libs/libhdf5.so.7
/home/cronburg/tmp/hdf5-1.8.9/src/.libs/libhdf5.so.7.0.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-11T17:52:22.033

看看： [http://rpm.pbone.net/index.php3/stat/3/srodzaj/1/search/libhdf5.so.7()(64bit)](http://rpm.pbone.net/index.php3/stat/3/srodzaj/1/search/libhdf5.so.7()(64bit))

或者应该试试这个 repo：[https ://ius.io/Packages/](https://ius.io/Packages/)

我更喜欢始终以包格式使用最新的 python 版本。

[https://dl.iuscommunity.org/pub/ius/stable/Redhat/6/x86_64/repoview/python27.html](https://dl.iuscommunity.org/pub/ius/stable/Redhat/6/x86_64/repoview/python27.html)

```
sudo yum install -y https://centos6.iuscommunity.org/ius-release.rpm
sudo yum install -y python27
sudo yum install -y python27-devel 
```

做一个`pip install`快乐的事：

```
$ sudo pip install h5py
Installing collected packages: h5py
Successfully installed h5py-2.6.0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-24T20:02:46.563

在干净的 raspbian 上使用 h5py 时，这也发生在我身上。您需要先安装系统库。

```
apt install libhdf5-dev 
```

然后

```
pip install h5py 
```

# c++ - 什么表达式创建 xvalues？

> ID：11581903
> 
> 赞同：27
> 
> 时间：2012-07-20T15:01:47.660
> 
> 标签：c++, c++11, language-lawyer, xvalue

我试图理解 C++11 的概念。

我的标准草案说：

> 一个 xvalue（一个“eXpiring”值）也指一个对象，通常接近其生命周期的末尾（例如，它的资源可能会被移动）。xvalue 是某些涉及右值引用的表达式的结果 (8.3.2)。[ 示例：调用返回类型为右值引用的函数的结果是 xvalue。—结束示例]

好的，那么产生 xvalues 的“某些类型的表达式”到底*是什么？*规范的这一部分没有详细列出这些表达式。

我理解左值和纯右值（至少我认为，我理解）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T01:43:28.273

§5 (C++11 §5[expr]/6) 的介绍中有一个有用的非规范性注释：

> [ 注意：表达式是一个 xvalue，如果它是：
> 
> *   调用函数的结果，无论是隐式还是显式，其返回类型是对对象类型的右值引用，
>     
>     
> *   转换为对对象类型的右值引用，
>     
>     
> *   一个类成员访问表达式，指定一个非引用类型的非静态数据成员，其中对象表达式是一个 xvalue，或
>     
>     
> *   一个`.*`指向成员的表达式，其中第一个操作数是一个 xvalue，第二个操作数是一个指向数据成员的指针。
>     
>     
> 
> 一般来说，这条规则的效果是命名的右值引用被视为左值，而对对象的未命名的右值引用被视为xvalue；对函数的右值引用被视为左值，无论是否命名。——尾注]

搜索 §5 的其余部分，这个列表似乎很详尽。该列表后面是一个示例：

> ```
> struct A {
>     int m;
> };
> 
> A&& operator+(A, A);
> A&& f();
> A a;
> A&& ar = static_cast<A&&>(a); 
> ```
> 
> 表达式`f()`、`f().m`、`static_cast<A&&>(a)`和`a + a`是 xvalues。表达式`ar`是一个左值。

获取 xvalue 表达式的常用方法有两种：

*   用于`std::move`移动对象。 `std::move`对右值引用类型执行 a`static_cast`并返回右值引用。

*   用于`std::forward`转发右值。 `std::forward`通常在函数模板中使用，以实现函数参数的完美转发。

    如果提供给函数模板的参数是右值，则参数类型将是右值引用，即左值。在这种情况下，对右值引用类型`std::forward`执行 a`static_cast`并返回右值引用。

    （注意：如果提供给函数模板的参数是左值，则参数类型将是左值引用并`std::forward`返回左值引用。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T02:47:40.470

第 5 章描述了有效表达式的语法，为每个表达式语法列出了表达式是左值、xvalue 或 prvalue 的条件。第 5 条中可能的 xvalue 的完整列表是：

> 5.2.2 第 10 段：如果结果类型是对对象类型的右值引用，则函数调用是……一个 xvalue。

（在标准的技术语言中，“对象类型”与“类类型”的含义不同。“对象类型”包括基本类型、指针和数组，仅不包括函数类型。对函数类型的右值引用始终被视为左值，而不是 xvalue。）

返回右值引用的最值得注意的函数当然是`std::move`有时`std::forward`。

> 5.2.5 第 4 段：如果`E2`是一个非静态数据成员……如果`E1`是一个 xvalue，那么`E1.E2`是一个 xvalue

（另一方面，数据成员查找`E1->E2`始终是左值。）

类似地，如果`E1`是一个 xvalue，则数据成员查找`E1.*E2`是一个 xvalue：

> 5.5 第 6 段：`.*`第二个操作数是指向数据成员的指针的表达式的结果与其第一个操作数具有相同的值类别 (3.10)。

对于各种类型的演员表：

*   `dynamic_cast<Type>(expr)`: 5.2.7 第 2 段
*   `static_cast<Type>(expr)`: 5.2.9 第 1 段
*   `reinterpret_cast<Type>(expr)`: 5.2.10 第 1 段
*   `const_cast<Type>(expr)`: 5.2.11 第 1 段
*   `(Type) expr`: 5.4 第 1 段

当且仅当`Type`是对对象类型的右值引用时，表达式才是 xvalue。对于 也是如此`Type(expr)`，因为

> 5.2.3 第 1 段：如果表达式列表 [在类型名称后面的括号中] 是单个表达式，则类型转换表达式等效于（在定义上，如果在含义上定义）对应的强制转换表达式 (5.4)。

（另一方面，`Type{expr}`始终是prvalue。）

关于条件运算符的第 5.16 节最后说`A ? B : C`如果 B 和/或 C 是​​ xvalue，则有时可以是 xvalue。但完整的规则很难总结。

如果表达式最终调用用户定义的重载运算符函数，则第 5.2.2 节适用于该表达式，而不是描述内置运算符行为的表达式。（请参阅`a + a`@James 发布的示例中的表达式。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-02T12:26:09.540

正如你提到的，

> 一个 xvalue（一个“eXpiring”值）也指一个对象，通常接近其生命周期的末尾（例如，它的资源可能会被移动）。

重点： `object`, `be moved`,`end lifetime`

这是一个例子：

```
void move_test(){
    std::string s = "I'm here!";
    std::string m  =  std::move(s);  // move from <s> to <m>
    // s is now in an undefined, but valid state; 
    std::cout << "s=" << s << "; &s=" << &s << std::endl;
} 
```

通过移动，我们可以将命名值（左值，这里是`s`）转换为右值（即`std::move(s)`）。更具体地说，因为它不能是 a `prvalue`（它有一个名字！换句话说，它有一个身份），它最终是一个`xvalue`.

`xvalue`始终服务于*C++ 移动语义*。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T02:53:45.273

我从我所读到的内容中收集到的是，将某些东西称为 xvalue 是一种奇特的说法：

xvalue 只是一个右值，其存储可能已被释放，因此使用它意味着您必须自己验证它的存在。

通常，它是远离实际右值的一个或多个间接级别。

相比之下，只要右值在范围内，就可以保证其存储空间存在。

我可能错了，但这是我所理解的。

# html - 如何将文本输入保存为 HTML 和 Django 中的文件

> ID：11581904
> 
> 赞同：3
> 
> 时间：2012-07-20T15:01:52.403
> 
> 标签：html, django, file, text, django-models

我正在构建一个站点，用户可以在其中输入文本并提交文本，以便可以将其保存为服务器上的文件并进行访问。不幸的是，我不太确定如何获取输入的文本并将其保存为文件。

谁能指出我如何做到这一点或详细说明我必须采取的步骤的正确方向？如果我错过了一个明显的谷歌结果，抢先式道歉。作为 Django 的新手，我可能无意中忽略了有用的资源。

这是相关的 HTML，主要是从文件上传表单复制的表单：

```
<form name="myWebForm" id="submissionCode_codeEditor" action="uploadFile/" method="post" enctype="multipart/form-data">
    <input type="hidden" name="MAX_FILE_SIZE" value="500" />
    <input type="text" name="title" placeholder="File Name"/>
    <input type="hidden" name="taskID" value={{ taskID }} />
    <input type="submit" value="Submit This Code" />
</form> 
```

这是相关的 Django 模型：

```
class Upload(models.Model):
    title = models.CharField(max_length=50)
    fileUpload = models.FileField(upload_to='file_uploads')
    userID = models.ForeignKey(User)
    task = models.ForeignKey(Task)
    uploadTime = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return self.title 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:37:14.603

你正在寻找[`ContentFile`](https://docs.djangoproject.com/en/dev/ref/files/file/#the-contentfile-class). 它是一个 Django`File`子类，它使用文本字符串而不是文字文件进行实例化。然后，您可以`ContentFile`将`FileField`.

```
from django.core.files.base import ContentFile

content = ContentFile(some_text)
upload_instance.fileUpload.save('/path/to/where/file/should/save.txt', content)
upload_instance.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:43:26.893

首先使用命令在您的媒体文件夹中创建一个文件，我假设用户发布了带有名称内容的文本

```
from app.models import Upload
from django.conf import settings
content = request.GET("content")
file_object = open("%s/%s"%(settings.MEDIA_ROOT, filename),w)  #Take file name as hash of content posted and username so that no class
upload = Upload(title=title, fileUpload=filename,user_id=request.user.id) 
```

您的文件已上传，可以使用设置中的 MEDIA_URL 访问

# jquery - Youtube 使用什么网络技术来创建它的播放列表栏？

> ID：11581906
> 
> 赞同：-4
> 
> 时间：2012-07-20T15:01:56.337
> 
> 标签：jquery, asp.net, html, ajax

www.youtube.com/disco，在页面的最底部是一个很酷的播放列表栏，有人知道它使用什么技术来创建它吗？或者任何人都可以建议一个新手网络开发人员研究的起点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:39:47.527

作为初学者，请尝试按照这些链接了解用于创建 YouTube 在其播放列表栏上的效果的技术类型。我不确定他们使用什么来创建您想要模拟的效果，但是了解一些 wizzy 控件对您有好处。希望这些链接可以为您指明正确的方向。

如果您是新手，请在此处尝试并按照教程进行操作：

[基础 jQuery 教程](http://www.w3schools.com/jquery/default.asp)

然后你可以在这里查看一些小部件等：

[jQuery 小部件、效果等](http://jqueryui.com/demos/)

对于播放列表之类的内容，您需要使用 YouTube 提供和开发的 api，它会在视频完成时通知您，然后您可以进行 ajax 回调以重新加载视频：

[jQuery Ajax 文档](http://api.jquery.com/category/ajax/)

为了回答您的问题，我认为他们使用自己的[YouTube API](https://developers.google.com/youtube/)

# x86 - 将 IP 地址转换为十六进制

> ID：11581914
> 
> 赞同：1
> 
> 时间：2012-07-20T15:02:11.103
> 
> 标签：x86, hex

我想知道如何在 x86 机器上手动将 IP 地址转换为十六进制值。例如，我正在阅读的书将 192.168.42.72 的十六进制表示为：

```
 0x482aa8c0 
```

但从不解释转换是如何工作的。那么，它是怎么做到的呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T15:09:29.883

When you convert an IP to a long integer, you take each octet in reverse order and multiply it by `256^n` where *n* is the zero-based reverse index of the octet

So for this ip you're doing

```
(72 * 256^0) + (42 * 256^1) + (168 * 256^2) + (192 * 256^3)
= 3232246344
= 0xc0a82a48 
```

It looks like the book is doing it backwards, but you get the idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T23:12:07.113

Don't see any powershell answers, so here goes.

This first sample converts IP address to hex.

```
$Octet1 = "{0:X2}" -f 192
$Octet2 = "{0:X2}" -f 168
$Octet3 = "{0:X2}" -f 42
$Octet4 = "{0:X2}" -f 72
$IPAddress = "0x"+$Octet1 + $Octet2 + $Octet3 + $Octet4
$IPAddress 
```

Result

`0xC0A82A48`

and this one converts hex back to decimal IP address.

```
$Octet1 = "{0:D}" -f 0xC0
$Octet2 = "{0:D}" -f 0xA8
$Octet3 = "{0:D}" -f 0x2A
$Octet4 = "{0:D}" -f 0x48
$IPAddress = $Octet1 +"."+ $Octet2 +"."+ $Octet3 +"."+ $Octet4
$IPAddress 
```

Result

`192.168.42.72`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:25:23.133

有时您会看到带有 IP 地址的 HEX 格式如下。

```
 0xC0.0xA8.0x2A.0x48 
```

这是我在脑海中的做法，因为我不擅长处理大数字，因为十六进制是基于 16 的。下面的图表是左边的 DEC 和右边的 HEX。

```
0 = 0
1 = 1
2 = 2
3 = 3
4 = 4
5 = 5
6 = 6
7 = 7
8 = 8
9 = 9
10 = A
11 = B
12 = C
13 = D
14 = E
15 = F 
```

然后一旦你记住了图表，这只是基本的数学

```
192 = C0 =  (192/16) = 12.0 =  take the remainder (0 x 16) = 0 convert it to Hex (0)      
then take the result (12) divide it by 16 (12/16) and if it's less then 1 then just 
covert the remainder to hex 12 = C then add it up backwards for C0

168 = A8 = (168/16) = 10.8 = he remainder (.8 x 16) = 12.8 convert it to hex (A) then 
take the result (12) divide it by 16 (12/16) and if it's less then 1 then just covert 
the remainder to hex 0 = 0 then add it up backwards for 0A8 or A8

42  = 2A = (42/16) = 2.625 = The remainder (.625 x 16) = 10 convert it to hex (A) then 
take the result (2) divide it by 16 (2/16) and if it's less then 1 then just covert the  
remainder to hex 2 = 2 then add it up backwards for 2A

72  = 48 = Your turn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T15:50:53.867

首先将 192.168.42.72 转换为二进制数 as- 11000000.10101000.00101010.01001000 然后在二进制到十六进制数转换中取 4-4 位.. 所以.. 1100 0000\. 1010 1000\. 0010 1010\. 0100 1000 和十六进制为C 0\. A 8.2 A.4 8 现在以精确的十六进制表示 IP 地址。十六进制代码为：0xC0A82A48。

我知道的最简单的方法...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T23:26:31.223

```
$ip = "192.168.2.14"
$ar = $ip.Split('.')
$Octet1 = "{0:X2}" -f [int]$ar[0]
$Octet2 = "{0:X2}" -f [int]$ar[1]
$Octet3 = "{0:X2}" -f [int]$ar[2]
$Octet4 = "{0:X2}" -f [int]$ar[3]
$IPAddress = $Octet4 + $Octet3 + $Octet2 + $Octet1
$IPAddress 
```

# c# - 如何让 .net c# webAPI PUT 和 DELETE 方法/动词工作

> ID：11581919
> 
> 赞同：0
> 
> 时间：2012-07-20T15:02:30.437
> 
> 标签：c#, .net, asp.net-web-api, httpverbs

-设置

## IIS 7.5 和 Visual Studio 2012 4.5

我已经在我的机器上创建了第一个 webAPI 项目。使用下面的代码，我可以将动词的类型更改为 POST 或 GET，并且对服务器的请求和对客户端的响应都可以正常工作。

由于代码如下，我不断收到 405 错误代码或 404 not found 错误代码。

我的问题是我需要添加到 .config 文件中的某种类型的设置，或者我需要在 iis7.5 Web 服务器上进行的设置，以便我可以让它工作？

我一遍又一遍地用谷歌搜索，找不到这个问题的答案。

在我客户端上的 JavaScript 文件中。

```
 $.ajax(
                     {
                         url: "/api/project",
                         type: "PUT",
                         contentType: "application/json",
                         data:'3',
                         success: function (result) {
                            alert(result);
                         }
                     }); 
```

在 c# 类的控制器中

```
 public void Put(int intt)
    {
        var obj = intt;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:22:41.900

找到了神奇的、难以捉摸的链接。

[http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx](http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx)

我收回我收到另一个服务器 500 错误。

请参阅下面的错误。这个在驱使我...

![IIS 500 错误](../Images/02da46f27305c607eddc0cb54d41f1cb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:52:40.337

我也遇到了 500 错误，在阅读[了这篇文章后](https://stackoverflow.com/questions/10059304/asp-net-web-api-put-with-catch-all-route)，我发现如果我将 Content-Type 更改为“application/json”，500 错误代码就会消失。

但是，我希望“text/plain”能够正常工作，所以我按照[这里](http://myadventuresincoding.wordpress.com/2012/06/19/c-supporting-textplain-in-an-mvc-4-rc-web-api-application/)的教程进行操作，并且成功地工作了。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:05:20.623

似乎您可能需要禁用 WebDAV 服务。看这里：

[在 IIS 7.5 上启用 html PUT 方法](https://stackoverflow.com/questions/3946283/enabling-html-put-method-on-iis-7-5)

# vb.net - 寻找用 OCaml 编写的 VBA/VB 解析器/编译器

> ID：11581920
> 
> 赞同：2
> 
> 时间：2012-07-20T15:02:32.060
> 
> 标签：vb.net, parsing, vba, compiler-construction, ocaml

我打算编写一个编译器（包括解析器）`OCaml`来解析和运行`VBA`或/和`VB`程序。我已经为简单的命令式语言做到了这一点，但我不确定如何处理`VBA`or/and的“对象”特性`VB`......

有谁知道是否有任何现有的工作可以激发我的灵感？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:31:14.367

不是 OCaml 解决方案（但 OP 询问）：

我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)是通用程序分析和转换工具。它旨在成为用于计算机语言的定制软件工程工具的便捷基础，其目标是帮助工具工程师完成工作，而不是花时间重新发明轮子。特别是，许多人认为获取解析器是这项工作的重要组成部分。这完全是错误的。请参阅[解析后的生活](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)。

DMS 具有多种语言的[生产前端，包括现代语言和传统语言，包括各种方言中的](http://www.semanticdesigns.com/Products/FrontEnds)[Visual Basic](http://www.semanticdesigns.com/Products/FrontEnds/VisualBasicFrontEnd.html)（VB6、VBA [与 VB6 基本相同]）和 VB.net。

通过生产，我的意思是已应用于规模很大的实际代码系统并处理所有相应的解析问题。这对于传统语言（例如 VB）来说是相当困难的，尤其是较旧的方言，因为这些语言的文档通常很差（尤其是 VB6 和 VBA）。做到这一点的唯一方法是构建一个解析器草案，根据实际情况运行它，然后修改直到大量代码合理地通过。这通常比草稿解析器花费更长的时间，因为不容易理解错误（它们没有记录！），您必须确定它们是真实的还是代码库只是有垃圾（比您想象的更多） )，猜猜它对语法意味着什么，然后再试一次。

这些前端作为最小解析源代码并构建 AST；他们还可以反转此过程以重新生成*合法*的可编译代码，并将注释作为源文本文件返回。VisualBasic 前端执行此操作。我们的一些其他前端（C、C++、Java、COBOL）走得更远：名称/类型解析、流分析等；他们通过从特定语言的 AST 中收集关键程序事实来做到这一点，然后应用 DMS 提供的机器来计算结果。如果这些事实有用的话，这对于 VisualBasic 也是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T04:37:49.503

有关用 OCaml 编写的小型 OO 语言的示例，请查看 boa 的源代码：http: [//andrej.com/plzoo/](http://andrej.com/plzoo/)。

OO 风格不是基于类的，所以我不确定它会有多大用处。

# javascript - extjs 中的事件处理函数中的这个上下文

> ID：11581921
> 
> 赞同：2
> 
> 时间：2012-07-20T15:02:38.197
> 
> 标签：javascript, extjs

我是javascript的新手，有些头疼。我注意到事件处理函数中的“this”对象不是主类，如下所示：

```
Ext.define('App.controls.VerticalMenu', {
extend: 'Ext.panel.Panel',

setMenu: function(item) { 

    "this" here, is a "VerticalMenu"
    var theBtn = Ext.create('App.controls.VerticalMenuItem',{
        listeners: {
            onOpenClose: function(btn){
                "this" here is a "VerticalMenuItem"
            }
        }
    });
}, 
```

如何访问此事件处理函数中的主要“this”对象（VerticalMenu）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:04:51.667

许多人使用“我”。例子：

```
Ext.define('App.controls.VerticalMenu', {
extend: 'Ext.panel.Panel',

    setMenu: function(item) { 
        var me = this;
        var theBtn = Ext.create('App.controls.VerticalMenuItem',{
            listeners: {
                onOpenClose: function(btn){
                    me.DoSomethingUseful();
                }
            }
        });
    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:11:42.363

J Torres 的回答是一种方式。在 Ext 中，根据您添加监听器的方式，有时您可以指定一个范围。

```
setMenu: function(item) { 

    var theBtn = Ext.create('App.controls.VerticalMenuItem',{});
    theBtn.on('openclose',function(btn){
        //what we want to do
    }, this); // Preserves the current scope of this for use inside the handler
}, 
```

# mysql - 打击平均 MySQL 查询

> ID：11581922
> 
> 赞同：0
> 
> 时间：2012-07-20T15:02:49.137
> 
> 标签：mysql

您可能需要一些板球知识来帮助解决这个问题。给定下表，这个查询会产生这个结果吗？

```
Table: batsmen
batsmanname | runsscored | howout
Colin       | 10         | bowled
Colin       | 20         | caught
Steve       | 10         | bowled
Steve       | 20         | not out

SELECT batsmanname, SUM(runsscored) / COUNT(howout) AS battingavg
FROM batsmen 
WHERE howout <> 'not out' 
GROUP BY batsmananme

Result:
batsmanname | battingavg
Colin       | 15
Steve       | 30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:13:57.247

这应该会产生您想要的结果：

```
SELECT b1.name, SUM(b1.runsscored) / b2.NumOut as bat_avg
FROM batsmen b1
INNER JOIN
(
  select name, COUNT(howout) as NumOut
  from batsmen
  WHERE howout <> 'not out' 
  GROUP BY name
) b2
  ON b1.name = b2.name
GROUP BY b1.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5f835/12)

# bash - 在 grep 中，为什么它需要转义 [ 而不是 for ]

> ID：11581926
> 
> 赞同：1
> 
> 时间：2012-07-20T15:02:54.850
> 
> 标签：bash, shell, command-line, grep

文件中有一行`data`，如

> [总体]， ....

当使用`grep`获取这条线时，我发现这只能通过

> grep "\[整体]" 数据

只是出于好奇，为什么它需要逃跑`[`而不是为了`]`。

编辑：这是在 ubuntu 12.04 上测试的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:06:41.557

因为`]`only 当它前面已经有一个`[`没有转义的 a 时，它才具有任何特殊含义。

您可以通过以下方式获得乐趣（如果您有正确的，有些扭曲的心态）：

```
grep '[][-]' ... 
```

这将搜索`]`或。您必须小心放置; 它必须在角色类的开头。您必须小心放置; 它必须在课程开始或结束时进行。否定类的插入符号必须先出现。`[``-``]``-`

```
grep '[^][-]' ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:05:55.970

我猜如果没有开头 [ 来指定字符类，则结尾 ] 没有意义。因此，一旦您转义了左括号，就不需要转义右括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T16:34:13.497

我赞同 Derek 和 Jonathan 的回答。一年多来，我发现自己使用`fgrep`超过`grep`. 与or`fgrep`相同，其中搜索词只是一个字符串，而不是正则表达式。例如，如果我想搜索：`grep -F``grep --fixed-strings``[overall]`

```
fgrep "[overall]" file 
```

# ios - 我可以传输哪些设备信息？

> ID：11581931
> 
> 赞同：2
> 
> 时间：2012-07-20T15:03:10.370
> 
> 标签：ios

我找不到关于允许我在服务器上传输和保存哪些设备信息的 Apple 文档或指南。我记得读过发送 UDID 是一个很大的禁忌。我不关心唯一标识符，但我想发送基本设备信息和系统时区。我发送以下信息是否违反了任何政策？政策链接（如果存在）也很可爱。

```
NSMutableDictionary *params = [NSMutableDictionary dictionary];
UIDevice *device = [UIDevice currentDevice];
[params setObject:device.name forKey:@"deviceName"];
[params setObject:device.systemName forKey:@"deviceSystemName"];
[params setObject:device.systemVersion forKey:@"deviceSystemVersion"];
[params setObject:[NSTimeZone systemTimeZone].description forKey:@"deviceSystemTimeZone"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T01:27:10.907

来自[App Store 最终用户许可协议](http://www.apple.com/legal/itunes/appstore/dev/stdeula/)

> 湾。同意使用数据：您同意应用程序提供商可以收集和使用技术数据和相关信息，包括但不限于有关您的设备、系统和应用程序软件以及外围设备的技术信息，这些信息会定期收集以促进软件的提供与许可应用程序相关的更新、产品支持和其他服务（如果有）。应用程序提供商可以使用这些信息，只要它的形式不会识别您的个人身份，以改进其产品或向您提供服务或技术。

您描述的数据是足够匿名的，除了`UIDevice.name`可能包含用户名（甚至可能包含用户的全名）的数据。如果您确实需要设备模型，请使用 UIDevice.deviceModel 或相应`sysctl()`的来获取底层模型字符串（例如 iPhone 4 的“iPhone3,1”）。

关于 UDID 是否是个人身份的争论大致等同于关于 IP 地址是否是个人身份的争论——如果你有额外的信息，它们通常是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:51:18.973

所有这些字段都是允许的。有一些框架可以获取此类统计信息（例如[http://localytics.com](http://localytics.com/)或[flurry.com](http://www.flurry.com)。只要他们被允许发送，您也允许。此外，您可以只使用其中一个来获取所需的信息您的应用程序，而无需制作自己的服务器端解决方案。

# ruby-on-rails - 如何根据类型创建具有不同属性的模型

> ID：11581932
> 
> 赞同：0
> 
> 时间：2012-07-20T15:03:13.163
> 
> 标签：ruby-on-rails, associations, models

我有一个类别模型

```
 default_scope :order => 'display_order asc'
   has_many :resources, :dependent => :destroy

# == Schema Information
#
# Table name: categories
#
#  id          :integer(4)      not null, primary key
#  name        :string(255)
#  description :string(255)
#  created_at  :datetime        not null
#  updated_at  :datetime        not null
# 
```

我有一个资源模型：

```
belongs_to :category
  # belongs_to :submitter, :class_name => 'User', :foreign_key => "submitter_id"
  has_and_belongs_to_many :filetypes
  has_many :users, :through => :kits
  has_many :kits
  belongs_to :submitter, class_name: "User"
  belongs_to :author 
```

# == 架构信息

```
#
# Table name: resources
#
#  id                 :integer         not null, primary key
#  title              :string(255)
#  url                :string(255)
#  description        :string(255)
#  price              :decimal(, )
#  created_at         :datetime        not null
#  updated_at         :datetime        not null
#  category_id        :integer
#  image_file_name    :string(255)
#  image_content_type :string(255)
#  image_file_size    :integer
#  image_updated_at   :datetime
#  status             :string(255)
#  submitter_id       :integer
#  author_id          :integer
# 
```

客户希望能够创建类别，但根据类别为资源分配不同的属性。

示例：创建的类别：“书籍” 他希望将字段“作者”例如存储在资源模型中。

创建的类别：“会议”他希望将字段“位置”、“日期”例如存储在资源模型中。

我如何对其进行建模，使其动态且易于长期维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:43:35.810

一个想法是为一个类别的字段创建一个单独的表。例如，您的设置可能如下所示：

```
category HABTM category_fields
category_field HABTM categories
category_field has_many category_field_values
category_field_value belongs_to category_field 
```

然后，当您的客户创建一个新类别时，即`Books`，他可以向该类别添加一个新的 category_field，名为`author`. 然后，如果他想将新作者添加到 Books 类别，他将添加一个 category_field_value（即 JK Rowling）到`author` `category_field`.

因此， the`Books category`将有一个`author category_field`，而 the`author category_field`将有一个`category_field_value`(JK Rowling)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:49:18.367

你可以看看这个>> [https://github.com/moiristo/dynamic_attributes](https://github.com/moiristo/dynamic_attributes)

或者您考虑使用 MongoDB 或 redis 等无模式数据库？

您还可以使用 hstore，它是 postgresql 中的键值类型。

# javascript - 在 VB.net/C# 或 Objective-C 上将 JPEG 或 PNG 转换为 SVG 格式

> ID：11581935
> 
> 赞同：0
> 
> 时间：2012-07-20T15:03:26.843
> 
> 标签：javascript, objective-c, vb.net, cordova, ios5

我想将 PNG 或 JPEG 文件转换为 SVG。但我找不到任何关于如何做到这一点的信息。问题是我正在使用 devexpress 报告将其导出为图像，因此格式可以是 .jpg 或 .png。现在我想要将它转换为 SVG，以便图像在通过 Javascript 并最终传递给 Objective-C 时仍然具有更好的质量。

进一步解释一下。

我有一个使用 VB.net 编码的服务。这是服务器端；客户端是 Javascript 和 HTML：我正在使用 Phonegap 来桥接 Objective-C。我实际上正在做的是创建一个插件，该插件将从 Javascript 传递一个 URL 并让 Objective-C 捕获该 URL，然后将其作为图像加载并将其传递给 ePOS SDK 以作为图像打印。

我注意到的是，当我使用 devexpress 作为 png 导出报告时，图像会变得像素化并且有点颗粒感，因为我正在缩放图像以使其更大以填充热敏纸（80 毫米）。这就是为什么我希望它在 SVG 中而不是 PNG 来保持图像的质量。

我的问题是我应该在哪里转换图像？在服务器端还是在 Objective-C 中？我将如何完成如此艰巨的任务？我正在考虑在 Objective-C 中进行，但我认为在服务器端进行转换要好得多。你怎么看？

也可以将 .png 或 .jpeg 转换为 .svg 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:39:48.077

您可以使用 ImageMagick 在服务器端执行此操作，但我认为由于您要将位图图像转换为矢量图形，因此您只会得到同样的低质量废话。您可以将报告导出为 PDF 或其他矢量图形格式吗？

# c++ - 从数组中删除零并将数组调整为新的元素数量？

> ID：11581940
> 
> 赞同：2
> 
> 时间：2012-07-20T15:03:48.683
> 
> 标签：c++, arrays, for-loop

我在处理 C++ 数组中的数据时遇到了另一个问题。我现在想通过从中删除所有零来抽取数组。

因此，例如说在我​​拥有`array[4] = {1,2,0,0,4}`它之前会变成`array[3] = {1,2,4}`.

我知道我需要使用 for 循环来遍历存储主要数据的数组，并且我很可能需要初始化一个新数组来存储抽取的数据，但我不太确定如何去做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T15:13:33.283

您无法调整普通数组的大小，因为它是静态分配的。因此，使用[`vector`](http://en.cppreference.com/w/cpp/container/vector)标准库 (STL) 中的 a 可能会更好。以这种方式，您不需要创建新数组。实际上，除非有充分的理由，否则通常使用`std::vector`or `std::array`（在 C++11 中）比使用普通的类 C 数组更好。

通过使用`vector`，您可以执行以下操作：

```
std::vector<int> v{1,2,0,0,4};
v.erase(
    std::remove(v.begin(), v.end(), 0),
    v.end()); 
```

擦除零元素后，向量的容量仍然为 5（当然`v.size()`会返回 3，正如预期的那样）。如果您可以使用 C++11，那么您可以走得更远一点：

```
v.shrink_to_fit(); 
```

调用`shrink_to_fit`减少了向量的容量以适应其中的实际元素数量（示例中为 3）。这可能会节省内存（尤其是当向量中有很多元素时）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:10:00.523

如果您必须调整数组的大小，为什么不简单地使用 std::vector。这个例子做到了。

```
#include <vector>
#include <algorithm>

bool isZero (int i) 
{
    return i == 0;
}

int main()
{

    std::vector<int> myarray;

    myarray.push_back( 0 );
    myarray.push_back( 1 );
    myarray.push_back( 0 );
    myarray.push_back( 3 );
    myarray.push_back( 9 );

    std::vector<int>::iterator newIter = std::remove_if( myarray.begin() , myarray.end() , isZero);
    myarray.resize( newIter -  myarray.begin() );

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T15:11:04.550

如果你不知道数组的内容，你就无法知道有多少值是非零的，所以你的内存必须是动态分配的。使用`std::vector`.

```
std::vector<int> v;
std::copy_if(begin(array), end(array), std::back_inserter(v),
             [](int x) { return x != 0; }); 
```

如果您从 a`vector`开始，您可以使用擦除删除就地操作数据。

```
v.erase(std::remove(begin(v), end(v), 0), end(v)); 
```

如果您真的想以艰难的方式做到这一点：

```
// count
auto non_zero_count = std::count_if(begin(array), end(array), 
                                    [](int x) { return x != 0;});
// allocate
int* new_array{new int[x]};
std::copy_if(begin(array), end(array), new_array,
             [](int x) { return x != 0; }); 
```

除非您知道所有输入，否则实际上没有解决方案可以在这里达到固定大小的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T16:19:14.703

假设你有一个数组，你想删除数组中的 0 值并调整它的大小。

```
int toResize[] = {4,3,2,0,8,7,9,0,5,4,7,0}; //12 elements
vector<int>resized;
vector<int>::iterator it;
for(int i=0;i<12;i++){
int check = toResize[i];
    if(check!=0){
     resized.push_back(check);
    }
}

for ( it=resized.begin() ; it < resized.end(); it++ )
cout << " " << *it; 
```

如果您满意，请随时标记已回答的问题。

# security - 同步 CRM 2011 和 SharePoint 安全性

> ID：11581941
> 
> 赞同：4
> 
> 时间：2012-07-20T15:03:50.017
> 
> 标签：security, sharepoint-2010, synchronization, dynamics-crm-2011

我已经集成了我们的 SharePoint 站点和我们的 Dynamics CRM 2011 系统，以便我们可以从 CRM 上传文档。但我有一个想法，通过 CRM 中的安全性，用户只能看到与他们相关的记录，但如果他们只是去 SharePoint 网站，他们将能够看到与任何记录相关的文档，即使他们在 CRM 中看不到它.

所以我想知道是否有可能以某种方式将 CRM 的安全性“同步”到 SharePoint 中，这样用户就无法在任何一个系统中看到他们不想要的东西。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-06T12:04:14.247

开箱即用是可能的。有一个商业[CB Replicator](https://www.connecting-software.com/dynamics-crm-sharepoint-permissions-replicator/)解决方案正好解决了这个问题。它执行 CRM 安全模型到 SharePoint 组和文件夹级别权限的复杂映射。

简而言之，它将微型插件部署到 CRM 中，收集所有可能需要更改权限的事件。有一个独立的服务可以获取这些事件并将适当的权限写入 SharePoint，作为 sharepointdocumentlocation 实体对引用文件夹的项目级权限。

它支持 CRM 中导致权限更改的各种操作，例如安全角色、业务单位层次结构、权限深度、团队成员资格、访问团队、访问团队模板、共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:32:10.040

不幸的是，这不可能开箱即用。SharePoint 的安全模型通常基于 AD 组，而 CRM 使用每个用户应用的应用内安全角色。

为了使这些保持同步，需要在服务器端进行一些自定义开发，如果有可能的话。

# php - Where 子句 php 不起作用

> ID：11581944
> 
> 赞同：0
> 
> 时间：2012-07-20T15:04:03.057
> 
> 标签：php, mysql

这是我在第一名的第一个 php。如果我做的有什么问题，请帮我写代码。因为我刚开始学习。我尝试了很多教程，但我无法理解我做错了什么。

```
 <?php

include "db_config.php";

$query = mysql_query("SELECT * FROM places WHERE place_id ='".mysql_real_escape_string($_REQUEST[place_id])."'");

while($e=mysql_fetch_assoc($query))
        $output[]=$e;

echo $row['name'];

mysql_close();
?> 
```

这个对吗？我不确定它是如何工作的。

```
$stmt = $db->prepare("SELECT * FROM table WHERE $_REQUEST[place_id]");
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:05:11.867

你在这一行有一个错字：

```
 while($e=mysql_fetch_assoc($q)) 
```

`$q`需要`$query`。`$q`我在您的代码中没有看到变量。这是 php 代码中的一个常见问题，就好像你引入一个像`$q`php 这样的名字“很好”，足以为你创建变量并将其初始化为，`null`而不是理智地给你一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:07:27.777

您需要将 mysql_query 的结果提供给 mysql_fetch_assoc()，这里是 $query。

```
<?php

include "db_config.php";

$query = mysql_query("SELECT * FROM places WHERE place_id='".mysql_real_escape_string($_POST[place_id])."'");

while($e=mysql_fetch_assoc($query))
    $output[]=$e;

print(json_encode($output));

mysql_close();
?> 
```

此外，您需要使用一些 pdo 或 mysqli，因为不推荐使用 mysql_：[http ://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# javascript - 使用 .content().get().nodevalue 后在 firebug 中出现类型错误；

> ID：11581945
> 
> 赞同：0
> 
> 时间：2012-07-20T15:04:12.357
> 
> 标签：javascript, jquery

我正在尝试从 LI 中的每个 html LI 中获取一个数字，其中包含如下 html 代码所示的链接：

```
<div id="summary">
        <ul class="nobullets last-child">
           <li><a href="#">Blog Posts</a> (9)</li>
           <li><a href="#">Photos</a> </li>
           <li><a href="#">Discussion</a> (10)</li>
       </ul>
</div> 
```

正如您所看到的，每个 LI 内的一些链接旁边都有数字，我只想获取那些有数字（博客文章）的链接，然后将该数字存储到一个变量中，如果它们没有数字，它只会放一个 0进入变量。

但这是我的 jquery 代码：

```
var getblog;
var getphoto;
      //blogs
      if($('#summary').find('ul li:first-child').contents().get(1).nodeValue != 'undefined'){
        getblog = $('#summary').find('ul li:first-child').contents().get(1).nodeValue;
        getblog = parseFloat( getblog.substr(2) );

      }
      else{
        getblog = '0';
      }

      //photos
      //+ li to get the second child
      if($('#summary').find('ul li:first-child + li').contents().get(1).nodeValue != 'undefined'){

        getphoto = $('#summary').find('ul li:first-child + li').contents().get(1).nodeValue;
        getphoto = parseFloat( getphoto.substr(2) );
      }
      else{
         getphoto = '0';
      } 
```

firebug 向我抛出一个错误： **TypeError: $("#summary").next().find("ul li:first-child + li").contents().get(1) is undefined**

这是 jsfiddle [http://jsfiddle.net/hP3Wq/](http://jsfiddle.net/hP3Wq/)

博客显示 9 有效，但**照片显示 NaN 而不是 0**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:37:30.337

我不确定你的代码都试图完成什么，但如果它只是匹配例如可能明显的前缀`(3)`，你可以使用如下：http: [//jsfiddle.net/hP3Wq/2/](http://jsfiddle.net/hP3Wq/2/)。`.text()``.match()`

```
$(document).ready(function(){
    // use a generic function so as not to repeat things
    var getNumber = function(index) {
        return ($("#summary li")  // from the lis
                .eq(index)        // a specific li from the lis
                .contents()       // its contents
                .last()           // number is apparent in the last text node
                .text()           // its text
                // match it against a regexp defining "(somenumbers)";
                // in case of no match, use a dummy array with zeroes
                // (this defines the fallback)
                .match(/\((\d*)\)/) || [0, 0]
               )[1];
    };
    var getblog = getNumber(0);
    var getphoto = getNumber(1);

    $('#summary').after(getblog + '<br>' + getphoto);
}); 
```

# css - @font-face 无法使用自定义 WordPress 主题

> ID：11581947
> 
> 赞同：0
> 
> 时间：2012-07-20T15:04:26.307
> 
> 标签：css, wordpress, font-face

我正在开发主题不那么流行和深刻的 WordPress。可以肯定地说，它是一个完全自定义的主题。我面临的问题是关于@font-face。我在这里有工作字体结构：http: [//akshay2000.pcriot.com/Trial/index1.html](http://akshay2000.pcriot.com/Trial/index1.html)
我用我的 WordPress 主题创建了相同的结构。它没有用。现在，我的 CSS 如下：

```
 @font-face {
    font-family: 'SegoeWP-Light';
    src: url('segoewp-light.eot');
    src: url('segoewp-light.eot?#iefix') format('embedded-opentype'),
         url('segoewp-light.woff') format('woff'),
         url('segoewp-light.ttf') format('truetype'),
         url('segoewp-light.svg#segoewp-light') format('svg');
    font-weight: normal;
    font-style: normal;
    } 
```

字体文件与 style.css 和 index.php 位于同一目录中。我正在使用萤火虫进行调试。当我将鼠标悬停在单个*文件名*（如 segoewp-light.woff）上时，萤火虫显示正确的字体。但是，当我将鼠标悬停在字体系列名称（即“SegoeWP-Light”）上时，我会看到常规衬线字体。显然，现场生成的字体是衬线字体。我不明白出了什么问题。相同的设置适用于普通（非 WordPress）页面。我还尝试将字体上传到不同的服务器并使用绝对公共 URL。那也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:14:49.667

这可能与您使用相对路径有关，但需要更多信息，您能否打开控制台并告诉我们您在那里看到的错误？此外，这些文件相对于您的站点根目录位于何处？

如果您的用户位于`http://yoursite.com/blog/hello-world`，它将查找位于的字体`http://yoursite.com/blog/hello-world/segoewp-light.[ext]`

您可能需要指定这些文件的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:10:21.240

我不知道这是否会有所帮助，但这就是 fontsquirrel 所说[的 Troubleshooting Font-Face Problems](http://www.fontsquirrel.com/blog/2010/11/troubleshooting-font-face-problems)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T11:48:38.457

问题确实是关于字体的路径。我将 WordPress 托管在[http://indestructible.in/wp](http://indestructible.in/wp)并且子域[http://blog.indestructible.in](http://blog.indestructible.in)指向该目录。当 CSS 尝试在子域上加载字体时，字体将从主域加载。如上所述，Firefox 和 IE 需要它们位于同一个域中。（这在某些情况下可能有效，但在我的情况下，主域和子域有单独的 A 记录。因此，它们可能会被区别对待。）这就是为什么当浏览器直接指向目录时一切正常的原因。我所做的是，我在子域上创建了一个全新的 WordPress 安装，一切都运行得非常好！
**TL;博士：**Firefox 和 IE 需要在同一个域上使用 @font-face 字体，最好直接在子域上安装 WordPress，而不是将子域指向 WordPress 目录。

# c# - 显示/隐藏父控件面板

> ID：11581954
> 
> 赞同：0
> 
> 时间：2012-07-20T15:05:14.273
> 
> 标签：c#, windows, visual-studio-2010, forms, designer

我有一个继承自 UserControl 的基类，上面有一个面板。我创建了一个允许我显示/隐藏面板的属性。

```
public partial class BaseControl : UserControl
{
    // ...

    private Panel panTitle; // this is actually declared in the designer file..

    public BaseControl()
    {
        InitializeComponent();

        // hide the panel by default
        IsTitlePanelVisible = false;
    }

    [DefaultValue(false)]
    public bool IsTitlePanelVisible
    {
        get { return panTitle.Visible; }
        set { panTitle.Visible = value; }
    }
} 
```

现在，如果我在设计器中打开从 BaseControl 继承的其他控件，则面板可见！在属性窗口中将 IsTitlePanelVisible 属性更改为 true 并返回 false 后，它就消失了。

我还在 BaseControl 的设计器中将面板本身的 Visible 属性设置为 false，但它仍然显示。

在设计器中打开派生控件时，有没有人建议如何让面板不显示？

编辑：为了让事情更清楚，有以下补充：我已经有相当多的派生控件，我不想改变所有这些。如果我打开派生控件并将值手动设置为 false，一切正常，但我不明白为什么它不起作用，因为在基本控件的构造函数中将值设置为 false..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:18:44.617

也许您需要调用基本构造函数

```
class DerivedControl : BaseControl
{
     public DerivedControl()
        : base()
    {

    }
}

class BaseControl : UserControl
{
     public BaseControl ()
    {
        InitializeComponent(); // makes the panel visible by default
        IsTitlePanelVisible = false // makes the panel hidden explicity
    }
} 
```

同样来自[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.COMPONENTMODEL.DEFAULTVALUEATTRIBUTE%29;k%28DEFAULTVALUE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)：

> DefaultValueAttribute 不会导致成员使用属性值自动初始化。您必须在代码中设置初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:17:06.603

我做了一个快速测试应用程序，看看我是否可以复制你的问题。我唯一不同的是在设计器中添加面板并将其可见性设置为 false。它工作正常。看起来您正在手动创建 panTitle 面板。您在何处/何时将其添加到您的控件中，最好的选择是像我上面所说的那样添加面板。

* * *

**编辑：**

在仔细阅读您的问题时，您似乎不希望在查看 DerivedUserControl 的设计选项卡时显示面板。我发布的内容不会改变这一点，我不确定这种行为是否可以改变。但是，当您将其放在表单上时，它将不可见，并且以这种方式的行为与预期的一样。

* * *

这是一个快速工作的例子。

**表格1**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        DerivedUserControl dv = new DerivedUserControl();

        public Form1()
        {
            InitializeComponent();

            this.Controls.Add(dv);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (dv.IsTitlePanelVisible)
                dv.IsTitlePanelVisible = false;
            else
                dv.IsTitlePanelVisible = true;
        }
    }
} 
```

**基本用户控件**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class BaseControl : UserControl
    {
        public BaseControl()
        {
            InitializeComponent();
        }

        [DefaultValue(false)]
        public bool IsTitlePanelVisible
        {
            get { return panTitle.Visible; }
            set { panTitle.Visible = value; }
        } 

    }
} 
```

**BaseControl.Designer.cs 初始化组件**

```
private void InitializeComponent()
{
    this.panTitle = new System.Windows.Forms.Panel();
    this.SuspendLayout();
    // 
    // panTitle
    // 
    this.panTitle.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(255)))), ((int)(((byte)(192)))), ((int)(((byte)(255)))));
    this.panTitle.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
    this.panTitle.Location = new System.Drawing.Point(0, 0);
    this.panTitle.Name = "panTitle";
    this.panTitle.Size = new System.Drawing.Size(150, 147);
    this.panTitle.TabIndex = 0;
    this.panTitle.Visible = false;
    // 
    // BaseControl
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 16F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.Controls.Add(this.panTitle);
    this.Name = "BaseControl";
    this.ResumeLayout(false);

} 
```

**派生用户控件**

```
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class DerivedUserControl : BaseControl
    {
        public DerivedUserControl()
        {
            InitializeComponent();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:15:44.450

您是否尝试过`panTitle.Visible`默认设置为 false ？

ComponentModel`DefaultValue`属性仅用于设计者确定 propertyGrid 中的属性是否应该显示为粗体（脏），以及它的值是否应该生成到*派生*类的`InitializeComponent`方法中*`BaseControl`*

# c# - 应该如何从两个几乎相同的控制器动作转移到一个同时处理两个必要任务的动作？

> ID：11581962
> 
> 赞同：1
> 
> 时间：2012-07-20T15:05:37.060
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, refactoring, dry

我有以下操作：

```
public ActionResult ProductList(int category)
{
    IEnumerable<Product> productList = repository.Products.Where(p => p.CategoryId == category);
    return PartialView("ProductList", productList);
}

public ActionResult CategoryList(int parentCategory)
{
    IEnumerable<Category> categoryList = repository.Categories.Where(p => p.ParentCategoryId == parentCategory);
    return PartialView("CategoryList", categoryList);
} 
```

构建以下部分视图：

```
@model POS.Domain.Entities.Product

<div class = "item">
    <h3>@Model.Name</h3>
    @Model.Description
    @Model.Category.Name
    <h4>@Model.Price.ToString("c")</h4>
</div>

@model POS.Domain.Entities.Category

<div class = "category" id= "@Model.CategoryId">
    <h2>@Model.Name</h2>
    <a href='/get-partial-view'>Get Products from the category: @Model.Name </a>
    <div class="divResult">
    </div>
</div> 
```

并通过以下单元测试进行测试：

```
[TestMethod]
public void ProductListReturnsAppropriateProducts()
{
    // Arrange - create a controller
    var controller = new ProductController(_mockRepository.Object);

    // Action
    var result = (PartialViewResult) controller.ProductList(2);

    // Assert
    Assert.AreEqual(((IEnumerable<Product>) result.ViewData.Model).Count(), 2);
    Assert.IsTrue(((IEnumerable<Product>) result.ViewData.Model).Count(o => o.Name == "P4") == 1);
}

[TestMethod]
public void CategoryListReturnsAppropriateCategories()
{
    // Arrange - create a controller
    var controller = new ProductController(_mockRepository.Object);

    // Action
    var result = (PartialViewResult) controller.CategoryList(2);

    // Assert
    Assert.AreEqual(((IEnumerable<Category>) result.ViewData.Model).Count(), 3);
    Assert.IsTrue(((IEnumerable<Category>) result.ViewData.Model).Count(o => o.Name == "C4") == 1);
} 
```

这几乎是完全的重复——我想学习更紧密地遵守[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则。

我的操作几乎做同样的事情——除了我需要一个来生成产品列表和一个类别列表。. . （这最终用于生成列出类别的页面，用户可以单击以查看这些类别中的所有产品）。

必须有一种方法可以将这些几乎重复的方法合并为一种可以适当处理产品与类别的方法。我应该如何从拥有这两个单独的动作转变为拥有一个同时处理`products`和的动作`categories`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T15:13:41.527

你把 DRY 有点过分了..这是样板代码是的..但它处理不同的实体，应该保持分开。

通过将它们组合在一起，您将打破单一责任原则。如果您需要更改其中一个的工作方式，则不必更改与另一个相关的任何内容。

# gcc - GCC 4.0.0 以下版本中的结构成员对齐

> ID：11581966
> 
> 赞同：0
> 
> 时间：2012-07-20T15:05:47.860
> 
> 标签：gcc, alignment

**当我在in6_addr**这样的结构中只包含一个字符数组时，当这个**in6_addr**与另一个结构中的其他数据类型结合 时，我应该注意哪些对齐问题？

我在使用 GCC 版本 3.4.3 时遇到 SOLARIS 生成总线错误的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:07:40.760

A`char`不能错位，即使它是数组的成员也不行。其他数据类型仍应以适当的偏移量对齐到结构的开头。结构本身是否正确对齐？

# vb.net - 即时创建 WebBrowser 控件并为其使用单个 DocumentComplete 事件

> ID：11581971
> 
> 赞同：1
> 
> 时间：2012-07-20T15:06:00.180
> 
> 标签：vb.net, browser

如何创建 webbrowser 控件并将单个 DocumentComplete 事件关联到它？基本上我希望能够重用相同的 DocumentComplete 事件，但由于某种原因，它永远不会停止触发该事件，因此当我处理 webbrowser 对象时，它会停止触发该事件。但我希望能够创建另一个控件并为其重用该事件！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:20:12.253

```
Dim web1 As New WebBrowser()
AddHandler web1.DocumentComplete, AddressOf DocumentCompleteEventHandler
' Do stuff
RemoveHandler web1.DocumentComplete, AddressOf DocumentCompleteEventHandler
web1.Dispose()

Dim web2 As New WebBrowser()
AddHandler web2.DocumentComplete, AddressOf DocumentCompleteEventHandler
' Do stuff
RemoveHandler web2.DocumentComplete, AddressOf DocumentCompleteEventHandler
web2.Dispose() 
```

# c++ - 从不同的线程写入 boost::asio 套接字

> ID：11581978
> 
> 赞同：5
> 
> 时间：2012-07-20T15:06:20.093
> 
> 标签：c++, multithreading, sockets, boost, boost-asio

在我们的应用程序中，我们使用 Boost 库（以及用于网络通信的 ASIO）。

最近，我们发现如果我们通过同一个套接字从不同的线程发送数据，我们的客户端应用程序正在接收垃圾数据。

突出问题的小测试：

```
#include <stdio.h>
#include <boost/thread.hpp>
#include <boost/asio.hpp>

void send_routine(boost::shared_ptr<boost::asio::ip::tcp::socket> s, char c)
{
  std::vector<char> data(15000, c);
  data.push_back('\n');

  for (int i=0; i<1000; i++)
    boost::asio::write(*s, boost::asio::buffer(&data[0], data.size()));
}

int main()
{
  using namespace boost::asio;
  using namespace boost::asio::ip;

  try {
    io_service io_service;
    io_service::work work(io_service);

    const char* host = "localhost";
    const char* service_name = "18000";

    tcp::resolver resolver(io_service);
    tcp::resolver::query query(tcp::v4(), host, service_name);
    tcp::resolver::iterator iterator = resolver.resolve(query);

    auto socket = boost::shared_ptr<tcp::socket>(new tcp::socket(io_service));
    socket->connect(*iterator);

    boost::thread t1(send_routine, socket, 'A');
    boost::thread t2(send_routine, socket, 'B');
    boost::thread t3(send_routine, socket, 'C');

    t1.join();
    t2.join();
    t3.join();
  }
  catch (std::exception& e) {
    printf("FAIL: %s\n", e.what());
  }
    return 0;
} 
```

因此，我们在这里创建套接字，连接`localhost:18000`并启动 3 个将写入套接字的线程。

在不同的终端窗口中，我运行`nc -l -p 18000 | tee out.txt | sort | uniq | wc -l`. 我希望`3`作为输出，但它在网络流中返回超过 100 个“不同的字符串”（因此，数据已损坏）。但它适用于较小的缓冲区大小（例如，如果我们将更`15000`改为`80`）。

所以，问题是：它是 ASIO 库的正确行为吗？还有一个：如何解决？我应该`mutex`在我的`send_routine`函数中使用（还是有其他解决方案）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T15:40:42.900

`write`并且`async_write`在您使用它们的方式上不是线程安全的。解决此问题的规范方法是将您的消息排队，然后一次写出一条。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T15:19:47.490

根据[文档](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/ip__tcp/socket.html) `tcp::socket`，在多个线程之间共享时不是线程安全的。
因此，您要么按照建议的方式进行同步，`boost::mutex`要么使用异步写入。为`io_service`你工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T13:19:54.250

是的，还有另一种解决方案！ [Strands：使用没有显式锁定的线程](http://www.boost.org/doc/libs/1_54_0/doc/html/boost_asio/overview/core/strands.html)。请注意，strands 只为“事件处理程序”提供对套接字的“原子”访问，当然您需要使用 asio“事件处理程序”，这不是您的代码的情况。换句话说，您需要使用 boost::asio::async_write 而不是 boost::asio::write。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T15:19:41.967

您可能有两个问题，线程问题可以通过例如有一个专用于写入的线程和一个所有线程发布响应的队列来解决。您还可以将您的设计更改为异步设计并使用 write_some() 函数并让线程由 io_service::run() 完成，它可以由多个线程运行。

其次，如果客户希望以相同的顺序回答问题，您可能会遇到协议问题。

hth

托尔斯滕

# ruby-on-rails - 如何解析 Delivered-To 标头？

> ID：11581979
> 
> 赞同：1
> 
> 时间：2012-07-20T15:06:20.560
> 
> 标签：ruby-on-rails, ruby, parsing

我正在尝试在 Ruby on Rails 中解析一封作为附件的电子邮件？我不担心正则表达式，但更担心我用来获取解析输出的方法。我希望在没有任何邮件解析宝石的情况下做到这一点。下面的代码似乎有效，这是正确的方法吗？

模型.rb

```
def parse_delivered_to
  str = File.read("public/emails/email.txt").to_s
  delivered_to = str.match(/(Delivered-To: )[\w+\-.]+@[a-z\d\-.]+\.+[a-z]+[a-z]+[a-z]/i)
end 
```

显示.html.erb

```
<%= @email.parse_delivered_to %><br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:36:39.817

### 分析

电子邮件规范允许您当前的表达式不匹配的[多行标题。](https://www.rfc-editor.org/rfc/rfc2822#section-2.2.3)此外，我认为您的正则表达式不允许所有允许的地址字符。

### 解决方案

使用 procmail`^TO_`语法的变体应该允许您更自由地匹配多行地址模式。例如：

```
header.scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im ).flatten.map(&:strip) 
```

### 一些测试和示例

```
header = "Delivered-To:\n  Foo <foo@example.com>"
header.scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im ).flatten.map(&:strip)
header.scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im ).flatten.map(&:strip)
=> ["Foo <foo@example.com>"]

header.scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im).
 flatten.map(&:strip).to_s.scan(/[\w@.+_-]+/).grep(/@/).first.to_s
=> "foo@example.com"

'Delivered-To: foo.bar+extension@example.com'.
  scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im).
  flatten.map(&:strip).to_s.scan(/[\w.+_-]+/)
=> ["foo.bar+extension"]

'Delivered-To: foo.bar-extension@example.com'.
  scan( /^Delivered-To:(.*[^-a-zA-Z0-9_.])?/im).
  flatten.map(&:strip).to_s.scan(/[\w.+_-]+/)
=> ["foo.bar-extension"] 
```

# java - 设置 GL_RGBA16F 纹理格式时获取不完整的 FBO

> ID：11581980
> 
> 赞同：3
> 
> 时间：2012-07-20T15:06:21.833
> 
> 标签：java, opengl, fbo

我正在为 OpenGL 使用 Java 包装器（LWJGL）我得到

```
 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT 
```

如果我将 FBO 纹理附件格式设置为 GL_RGBA16F，则状态。事实上，除了 GL_RGBA 之外的任何内容都会导致此错误。这是我的 FBO 纹理设置：

```
glBindTexture(GL_TEXTURE_2D, texId);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA16F, _width, _height, 0, GL_RGBA, GL_FLOAT, (ByteBuffer) null);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glBindFramebuffer(GL_FRAMEBUFFER, _frameBuffer);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texId, 0);
glDrawBuffers(GL_COLOR_ATTACHMENT0); 
```

这是深度附件：

```
_depthBuffer = glGenRenderbuffers();
glBindRenderbuffer(GL_RENDERBUFFER, _depthBuffer);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, _width, _height);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, _depthBuffer); 
```

更新：

实际上，如果我像这样交换内部格式和格式的位置： GL_RGBA,GL_RGBA16F 比 FBO 完成就可以了。但是在我看到的示例中，使用的是 GL_RGBA16F 先行。

更新 1：到目前为止，LWJGL 论坛上没有任何人回答。也将此问题作为错误提交，但也没有得到开发团队的回答。如果其他人可以测试带有纹理附件的 FBO，它使用浮点格式并报告完整性实现的效果很好。目前我认为我的代码没有错误。另外我已经在 2 台机器上对其进行了测试并得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T21:42:26.630

那是我的错误。我在传递 GL_RGBA 作为格式时错误地将 GL_RGBA16F 作为内部格式参数。问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:31:50.173

您命名的纹理是“tex”，但您绑定到颜色附件的纹理是“texId”。

编辑：

我正在使用 FBO，当我在 Intel HD3000 上尝试我的应用程序时得到 GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT，但在 AMD 或 NVIDIA（OpenGL 4.2）上却没有。不同的是，Intel HD3000 只支持 OpenGL 3.1。GL_RGBA16F 在 OpenGL 3.3 中不可用，也许这是你的问题？

# tfs - 重用 TFS 构建过程模板的各个部分

> ID：11581982
> 
> 赞同：3
> 
> 时间：2012-07-20T15:06:31.010
> 
> 标签：tfs, build-automation

TFS 构建流程在 TFS 2010 的构建模板（实际上是带有 *.xaml 扩展名的 Windows Workflow Foundation 文件）中定义。
在简单项目中处理单个构建定义非常方便，但在不久的将来我们将拥有更复杂的项目，我们将有许多非常不同的构建定义，但同时其中一些会有一些重要的共同点逻辑部分。

并且不希望在每个构建模板中复制通用逻辑，另一方面，拥有一个超级智能参数化构建被认为不是最好的主意。

长话短说，但**问题是**：
是否有可能将通用逻辑放入另一个构建模板/或_whatever中并重用它？

如果没有 - 您对这种情况有一些方法/建议吗？

**更新**
如前所述`K.Hoff`，有可能创建自定义活动，但我想更深入地重用活动和序列（简单地说，类似于 Ant 或 NAnt 所做的 - 将一个文件包含到另一个文件中，从另一个，等等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:34:29.980

我们有类似的情况，但是由于我们的大多数构建场景都是相似的（即 get->build->test->deploy），我们主要通过一个大定义和自定义活动来解决它。**但**我们也利用[Community TFS Build Extensions](http://tfsbuildextensions.codeplex.com)`ExecuteWorkflow`提供的活动。

这适用于“简单”场景，我们不更广泛地使用它的原因是因为在工作流执行之间传递参数非常复杂。这是我遇到的问题[的链接（以及我找到的解决方案）。](http://social.msdn.microsoft.com/Forums/sk/tfsbuild/thread/5b1ab1f3-4c4f-49b0-b03f-9f613c569b40)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:02:57.783

我建议您检查是否可以编写代码活动来执行具有通用构建功能的工作流（.xaml 文件）。因此，可以将此类代码活动放入多个“主”构建模板中，以便重用通用流程。这是一个如何动态加载和执行工作流的示例 - [http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtowf_topic8.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_introtowf_topic8.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:09:41.527

[您可以按照此处](http://www.ewaldhofman.nl/post/2011/04/06/Customize-Team-Build-2010-e28093-Part-16-Specify-the-relative-reference-path.aspx)的说明创建自定义代码活动，并在其他构建模板中重用它们。

另一种方法是实现良好的旧 msbuild 脚本并将它们放在 msbuild 执行活动中，以便在许多构建过程模板中重用它们。

我找不到快速重用完整序列的方法，我们找到的唯一方法是尽可能通用地编写活动并注入参数以使其运行。

但我认为这不是 TFS 问题，而是工作流问题。

# c# - c#连接到不同服务器上的mysql

> ID：11581983
> 
> 赞同：0
> 
> 时间：2012-07-20T15:06:31.963
> 
> 标签：c#, mysql

我在与我的 MySQL 数据库不同的 webspace 上运行 ac# web 服务。我想将它们链接在一起，所以有以下 c# 代码。

```
 server = "www.***.com";
        database = "MyDataBase";
        uid = "admin";
        password = "Password";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" +
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        connection = new MySqlConnection(connectionString);
        try
        {
            connection.Open();
        }
        catch (MySql.Data.MySqlClient.MySqlException ex)
        {
            Console.WriteLine(ex.Message);
        } 
```

在捕获异常时，我收到以下错误

“用户'admin'@'cpc13-ches4-2-0-cust195.9-1.cable.virginmedia.com'的访问被拒绝（使用密码：是）”

我目前只在本地运行它，所以我不知道这是帮助还是阻碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:08:55.457

检查您的 MySQL 用户设置，以确保`admin`允许该帐户从`localhost`.

您可以验证允许用户从哪些主机连接，如下所示：

```
select user, host from mysql.user 
```

如果`admin`用户只能从 localhost 进行连接，那么您需要为要连接的新主机或使用`%`.

您可以`admin`像这样查看 localhost 上的权限：

```
show grants for 'admin'@'localhost' 
```

然后，您可以复制/粘贴那些更改主机部分的授权，以在另一台主机上授予相同的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:09:50.400

确保您的 MySql 服务器允许远程连接。也许您的连接字符串不是确切的。在此处检查连接字符串：[http ://connectionstrings.com/mysql](http://connectionstrings.com/mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T15:10:12.897

你会想去：

`Security > Logins > Click your account > Properties > User Mappings`

并确保您拥有正确的权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T14:36:51.290

*   [在http://dev.mysql.com/downloads/connector/odbc/3.51.html](http://dev.mysql.com/downloads/connector/odbc/3.51.html)下载并安装“MySQL ODBC 3.51 驱动程序” 。
*   使用 IP 地址而不是 www。*** .com
*   需要在服务器上打开端口 3306

    ```
     string MyConString = "DRIVER={MySQL ODBC 3.51 Driver};" +
                                  "SERVER=112.***.**.***;" +
                                  "DATABASE=dbname;" +
                                  "UID=u_name;" +
                                  "PASSWORD=u_pass;port=3306;" +
                                  "OPTION=3";
            OdbcConnection MyConnection = new OdbcConnection(MyConString);
            MyConnection.Open(); 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T15:09:40.930

You have to grant access for admin @ cpc.......

Login to mysql and do the following:

```
mysql> GRANT ALL PRIVILEGES ON *.* TO 'admin'@'%'
->     WITH GRANT OPTION; 
```

Or first check with this command to see the priv first.

```
SHOW GRANTS FOR 'admin'@'localhost'; 
```

And try again...

# asp.net-mvc-3 - UrlHelper.Action 方法添加了一些奇怪的字符

> ID：11581985
> 
> 赞同：0
> 
> 时间：2012-07-20T15:06:37.373
> 
> 标签：asp.net-mvc-3, url-routing

我有以下代码来创建动态 ul 和 li

```
linkBuilder.Attributes.Add("href", urlHelper.Action(actionName, controllerName, routeValues)); 
```

但由于某些我不知道的原因，urlHelper.Action 方法在 url 的开头添加了一些奇怪的字符（例如“%E2%80%8C”）。它只发生在我的一些自定义控制器上。错误的网址是 %E2%80%8C/Article/Create 知道为什么吗？

# sql - 为什么这个左连接似乎没有按预期工作？

> ID：11581989
> 
> 赞同：0
> 
> 时间：2012-07-20T15:06:50.540
> 
> 标签：sql, db2

这是在工作中出现的，这真的只是一个谜......

查询一：

```
SELECT * FROM
SYSIBM.SYSTABLES A LEFT JOIN
SYSIBM.SYSTABLESPACE B
ON A.DBNAME = B.DBNAME
AND A.TSNAME = B.NAME
AND A.TSNAME LIKE 'HIB%'
; 
```

此查询不按`HIB%`条件过滤，这与查询应该执行的操作相反。我认为将这些标准放入`JOIN`应该会产生相同的结果。

查询 2 按预期工作：

```
SELECT * FROM
(SELECT * FROM SYSIBM.SYSTABLES
WHERE TSNAME LIKE 'HIB%') A
LEFT JOIN
SYSIBM.SYSTABLESPACE B
ON A.DBNAME = B.DBNAME
AND A.TSNAME = B.NAME
; 
```

第一个查询有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:15:34.550

尝试

```
SELECT * FROM SYSIBM.SYSTABLES A 
LEFT JOIN SYSIBM.SYSTABLESPACE B 
  ON A.DBNAME = B.DBNAME AND A.TSNAME = B.NAME 
WHERE A.TSNAME LIKE 'HIB%' ; 
```

当您将条件放在用于过滤连接记录的左连接中时，但由于是左连接，它会返回表 A 中的所有记录，因为您没有对此设置任何条件。

现在，如果条件在表 B 上会有所不同。它属于左连接（除非它类似于 B.id 为空），否则您会将查询转回内部连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T15:14:34.597

您是否尝试将“Like”部分移至 where 子句？

```
SELECT * 
FROM SYSIBM.SYSTABLES A 
LEFT JOIN SYSIBM.SYSTABLESPACE B ON A.DBNAME = B.DBNAME AND A.TSNAME = B.NAME
WHERE A.TSNAME LIKE 'HIB%'
; 
```

# php - 在php中发布数据时出现错误字符？

> ID：11581991
> 
> 赞同：0
> 
> 时间：2012-07-20T15:06:57.263
> 
> 标签：php

我有一个样本数据：![图像1](../Images/2ddf06e87a3c8d119b48c7d0ec8308f0.png)

```
<form action="index.php" method="post">
<input type="text" name="name" value="3602s，5300,5300XM，6126,6131，6131 NFC,6133,"  />
<input type="submit" name="submit" value="submit" /> 
</form> 
```

索引.php

```
if($_POST['name']){
   echo $_POST['name'];
} 
```

当我回显 $_POST['name'] 结果是：

![图2](../Images/20e320fdeddfb4764410fb1e9a4d695c.png)

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T15:09:07.280

# iis - 需要帮助了解 IIS、IWA 和 kerberos 的问题

> ID：11581993
> 
> 赞同：0
> 
> 时间：2012-07-20T15:06:59.183
> 
> 标签：iis, kerberos, windows-authentication, http-status-code-401

在工作中，我在 XP 上安装了 IE8，在带有 IIS6 的 WinServer 2003 上调用 .net 4.0 Web 应用程序。IWA 已打开。当我调用页面时，最初的 aspx 页面调用当然会在 Fiddler 中显示 3 行。首先是匿名请求，第二个有一些 AUTHORIZATION:NEGOTIATE 标头，然后第三个具有相同标头的更长值（可能是令牌）。前两个导致 401 错误，最后一个是 200 成功。但这是意料之中的。

问题：当调用以下资源文件（CSS、JS、图像）时，大部分（但不是全部）都经过相同的 3 步调用。前两个是 401 错误，然后第三个给我 200 代码和内容。

这是正常的吗？我认为只是页面本身的第一次调用是唯一需要 3 步过程的事情。

仅供参考 - 我们在服务器上有 OAM 和 WebGate，但我们卸载了它，我们仍然会遇到这种行为。应用程序池是否可能没有正确设置身份/域 ID？我真的不想在 Anonymous 上打开样式、脚本和图像文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:22:14.917

如果您的服务器配置为保护任何资源，这是正确的。由于 HTTP 是无状态的，因此每个请求都必须经过身份验证。如果使用记忆身份验证的会话 cookie，则可以避免这种情况。否则每次都会发生这种情况。

# java - Log4j Logger 垃圾收集？

> ID：11581997
> 
> 赞同：0
> 
> 时间：2012-07-20T15:07:12.230
> 
> 标签：java, garbage-collection, log4j

有没有办法强制`Logger`释放 Log4j/收集垃圾？

一般来说，Log4j 是否“挂在”`Logger`某些`static`集合中的引用？

我看到了该`Logger.shutdown()`方法，该方法已被弃用并引用`LoggerManager.shutdown()`，这听起来不像是针对单个`Logger`实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:26:48.700

您可以自己查看 log4j 源代码。

基于快速拖网，我认为答案是：

> 有没有办法强制释放 Log4j 记录器/收集垃圾？

没有那个级别的粒度。我唯一能找到的是一个方法 ( `Heirarchy.clear()`)，它释放所有记录器......并在过程中破坏记录层次结构。

> 一般来说，Log4j 是否“挂在”某些静态集合中的 Logger 引用？

是的。并且该集合不使用弱引用...