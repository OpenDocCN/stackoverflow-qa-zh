# StackOverflow 问答 11405000-11405999

# reference - 找不到 andengine.apk？

> ID：11405000
> 
> 赞同：0
> 
> 时间：2012-07-10T00:12:29.977
> 
> 标签：reference, apk, andengine

我尝试将一些代码从一个项目复制到另一个项目，但在第二个项目中，当我运行它时，出现错误：

```
 [2012-07-09 17:06:34 - AndEngine] Could not find AndEngine.apk!
[2012-07-09 17:06:34 - AndEnginePhysicsBox2DExtension] Could not find AndEnginePhysicsBox2DExtension.apk! 
```

和： ![错误](../Images/26a307f012416c1f4656b8ca4ea119c9.png)

我已经阅读了许多建议的解决方案，但似乎没有任何效果。到目前为止，我已经尝试删除 r.java，删除并重新导入项目，清理，刷新，将 AndEngine 的 libs 文件夹移动到当前项目，确保未选中“is library”，运行 2.2，并使用 Java 1.6。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:36:52.487

我不太确定解决方案，但这里有一些建议：

在您的库部分下，有 2 个`X`，这意味着您的项目引用了 2 个其他库项目，但无法在路径中正确找到它们。尝试`Add`正确的 AndEngine 或 PhysicsBox2D 库项目路径和`remove`错误的路径。然后，您将看到 a`tick`而不是`X`.

除此之外，您的 AndEngine 或 PhysicsBox2D 库项目也可能没有正确编译（由于错误或错误设置）。如果是这种情况，您需要解决这些错误。

* * *

编辑1：我认为我提到的第二种情况不会发生： ![在此处输入图像描述](../Images/94de5efbafbd4992c1bc218650bfac5e.png) 图片表明即使AndEngine项目包含错误，Reference状态仍然会显示`tick`.

因此，路径被破坏的可能性更大。由于您已经将 AndEngine 添加到当前工作区，您可能想尝试重新添加您的参考库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T07:42:35.563

我不确定，但如果是第三方库，如果你遇到一些 R.JAVA 问题，那么这个问题与构建路径有关。

因此，删除所有第三方 jar 文件，再次将其粘贴到项目的根目录和库中。清理你的项目，运行它。希望问题能得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T13:20:15.743

尝试将 andengine 添加到项目的构建路径并启动项目。

# c# - 如何撤消强类型视图？

> ID：11405005
> 
> 赞同：1
> 
> 时间：2012-07-10T00:13:25.883
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, strongly-typed-view

好的，所以我正在使用 ASP.NET MVC 3 项目。当我第一次开始学习 C# ASP.NET 时，我为控制器操作创建了一个强类型视图。然而，我现在意识到我不再需要那个模型（我的视图被强类型化到的模型）了。我怎样才能摆脱模型？我尝试将它从项目中排除，但是当我在 VS2010 中编译我的项目时，它说`The page not found`. 有什么方法可以撤消 VS2010 中的强类型部分，并且仍然能够在我的视图中保留和显示内容？

**编辑：**

```
@using IntraNet.Areas.Roc.Models.ViewModels; @* This is for SiteLookupVM *@
@{ Layout = "~/Views/Shared/_LayoutIntranet.cshtml"; }

<div id="mdPageHdr">FindnSave Metrics</div>
@Html.Partial("_PartialSiteLookup", (SiteLookupVm) ViewBag.SiteLookup)

@if (ViewBag.SiteId > 0)
{   @Html.ActionLink("Bounce Metrics", "BounceMetrics", "Metrics",new { siteId =     @ViewBag.SiteId }, null)
@Html.Partial("_PartialChartDisplay")
}
else
{ 
<div id="tabsWrapper">
<ul id="tabs_menu">
<li>@Html.ActionLink("Page Loads", "Index", null, new { id = "active" })</li>
<li>@Html.ActionLink("Metrics Data", "DashMetrics")</li>
</ul>
</div>

<div id='dashboard'>

    @Html.Partial("_partialMetricsDashboard")
    </div>

 } 
```

**行动**

```
protected MetricsDashboardRepository _mdr = new MetricsDashboardRepository();
private LoadHistoryDBEntities db = new LoadHistoryDBEntities();
private AvailabilityContext context = new AvailabilityContext();

public ActionResult Index(int? SiteId)
    {
        SiteLookupVm SiteLookup = new SiteLookupVm();
        SiteLookup.ActionName = "Index";
        SiteLookup.ControllerName = "Metrics";
        ViewBag.SiteLookup = SiteLookup;
        ViewBag.Title = "FNS Metrics";

        if (SiteId != null && SiteId > 0)
        {
            string site = new WPDE().Sites.Where(r => r.SiteId == SiteId).Select(r => r.Name).FirstOrDefault();
            SiteLookup.CurrentSite = site == null ? "Site does not exist" : site;
            ViewBag.SiteId = SiteId;
            ViewBag.FnsId = db.fns_sites.Where(f => f.3id == SiteId && f.enabled).Select(s => s.id).FirstOrDefault();
            ViewBag.RegionData = context.Regions.ToList();
            ViewBag.PathData = context.TestPaths.ToList();
        }
        else
        {
            _mdr.DashSetup();
            ViewBag.mdr = _mdr;
            ViewBag.date = 30;
            ViewBag.order = 0;
            ViewBag.totPageView = _mdr.TotPageView();
            ViewBag.totMonthUni = _mdr.TotMonthUni();
        }
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:15:05.020

在您的视图顶部，您应该看到如下内容：

剃刀：

```
@model YourType 
```

ASPX：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<YourType>" %> 
```

如果是 Razor，请删除该行。如果是 ASPX，请更改`<YourType>`为`<dynamic>`

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:44:30.667

紧随下面安德烈的回答。我建议将 ViewModel 从“YourType”更改为“动态”。

当您选择不使用强类型视图时，这就是 MVC 所做的。

在 ASP.NET 中：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %> 
```

在 Razor 中，只需从页面顶部删除“@model”行。

有关 .NET 4.0 动态类型的更多信息，请查看：[Dynamic .NET (MSDN Mag)](http://msdn.microsoft.com/en-us/magazine/gg598922.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:53:33.010

你说当你编译它时，你会得到一个“找不到页面”的错误。对我来说，这听起来像是一条浏览器错误消息，您会在运行项目并浏览页面时收到该消息 - 而不仅仅是编译它。

您是否在浏览器中看到此“找不到页面”错误？如果是这样，请检查浏览器中的 URL，这可能是一个无效的 URL。

如果它类似于`http://localhost:12234/View/Blah/Blah.cshtml`，请尝试移除该`/View/Blah/Blah.cshtml`位，看看会发生什么。

# database - SQLite Autoincrement 重置按 varchar 列排序

> ID：11405018
> 
> 赞同：0
> 
> 时间：2012-07-10T00:15:13.043
> 
> 标签：database, sqlite, auto-increment

我填满了一个数据库，我想重置数字自动增量 ID，但我想保持它的顺序与通过检索表中的项目按特定的 varchar（文本）值列对它们进行排序得到的顺序相同。

我知道有很多这样的问题，但我还没有找到任何这样的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:30:15.320

您应该能够从 select 语句中插入如下内容：

```
INSERT INTO 
  new_table (col_a, col_b)
SELECT 
  col_a, 
  col_b
FROM old_table
ORDER BY 
  col_b 
```

# vb.net - vb.net 中的单选按钮和数据绑定

> ID：11405020
> 
> 赞同：2
> 
> 时间：2012-07-10T00:15:34.903
> 
> 标签：vb.net, winforms, data-binding

我有一个具有一些属性的对象，其中之一是`CarpetColor`. 我在它们自己的容器中的表单上也有三个单选按钮 ( `rbRed`, `rbBlue`, )。`rbGreen`我想使用数据绑定将对象设置`CarpetColor`为选中的任何按钮。

我知道如何做一个简单的绑定，其中一个控件的属性绑定到一个对象属性。我想不通的是如何将三个控件的结果绑定到一个属性。例如，如果用户单击“红色”，则 的值`CarpetColor`应为“红色”。同样，如果他选择“Green”，则 的值`CarpetColor`应更改为“Green”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:07:13.547

在名为 CarpetColor 的表单上创建一个属性，如下所示：

```
enum Color { Red, Blue, Green } 
public Color CarpetColor
{ 
get { return rbGreen.Checked ? Green : (rbRed.Checked ? Red : Blue); }
set 
  {  
    if (value == Green)
        rbGreen.Checked = true;
    else
        if (value == Red)
           rbRed.Checked = true;
        else
           rbBlue.Checked = true;
   }
} 
```

然后您可以简单地将表单上的 CarpetColor 属性绑定到数据源的 CarpetColor。

我会让表单实现[INotifyPropertyChanged 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx) 并使用单选按钮事件来引发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged)事件

```
protected void OnPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
    {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}

rbGreen.CheckedChanged += (s, args) => OnPropertyChanged("CarpetColor");
rbRed.CheckedChanged += (s, args) => OnPropertyChanged("CarpetColor");
rbBlue.CheckedChanged += (s, args) => OnPropertyChanged("CarpetColor"); 
```

# r - 生成带有值标志的矩阵

> ID：11405024
> 
> 赞同：1
> 
> 时间：2012-07-10T00:16:30.780
> 
> 标签：r

对于以下问题，我确实有一个解决方案，但它非常难看，而且很可能以更短的方式完成。能得到你的帮助会很棒。

我的输入如下所示：

```
C1     C2 
A      B     
B      D    
D      C 
A      D 
```

我的输出应该是这样的：

```
A B C D
1 1 0 0
0 1 0 1
0 0 1 1  
1 0 0 1 
```

我目前的解决方案是：

```
index <- unique(unlist(input[,1:2]))
output <- matrix(0,nrows=dim(input),ncols=length(index))
for(i in 1:dim(input)) {
    output[i, input[i,]$C1] <- 1
    output[i, input[i,]$C2] <- 1
} 
```

当然 4-5 行实际上是好的 - 但即使作为 R 初学者，使用*for*循环也不合适。除此之外，我的实际数据不止两列，因此最终看起来不太好。我将如何以更聪明的方式做到这一点？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:52:09.703

这是一种方法：

```
library(plyr)
all.levels <- sort(levels(unlist(input)))
adply(input, 1, function(x)table(factor(unlist(x), all.levels)))
#   C1 C2 A B C D
# 1  A  B 1 1 0 0
# 2  B  D 0 1 0 1
# 3  D  C 0 0 1 1
# 4  A  D 1 0 0 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:13:37.673

基础解决方案：

```
test <- data.frame( C1=c("A","B","D","A"),
                C2=c("B","D","C","D"),
                stringsAsFactors=FALSE
            )

uniqnames <- sort(unique(unlist(test[,1:2])))
idcols <- (t(apply(test, 1 , '%in%', x = uniqnames)) + 0) #thanks mnel!
colnames(idcols) <- uniqnames

result <- cbind(
    test,
    idcols
    ) 
```

最终数据集：

```
> result
  C1 C2 A B C D
1  A  B 1 1 0 0
2  B  D 0 1 0 1
3  D  C 0 0 1 1
4  A  D 1 0 0 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:01:18.330

我认为你可以`cast`从`reshape`包中做到这一点。~~我现在无法测试代码（我的 R 版本太旧，目前正在重新编译）~~

```
cast(cbind(input, 1), C1 ~ C2, sum, add.missing=T) 
```

这实际上会计算每对出现的次数，以改变这种行为`sum`，用一个常量函数替换（可能有一种更漂亮的方法，不需要 cbind/sum，但我的 R 很生锈）。

编辑：添加 add.missing

# java - 只有在 birt 发生分页时才添加底部边框

> ID：11405027
> 
> 赞同：4
> 
> 时间：2012-07-10T00:16:52.090
> 
> 标签：java, border, birt, page-break

我正在寻找一种将底部边框添加到 birt 中的组页脚行的方法，但我只想在发生分页时才这样做。谢谢你 ！

# ruby - 迭代器内的 Ruby instance_variable_set 错误：“market_0_home”不允许作为实例变量名

> ID：11405030
> 
> 赞同：1
> 
> 时间：2012-07-10T00:17:23.390
> 
> 标签：ruby, iterator, block, variable-assignment, each

首先，这是@market_0_home 在下面迭代之外的分配，只是为了向您展示我尝试过

```
>> @market_0_home = 3
=> 3 
```

好的，那里没有错误，现在让我们在一个有点复杂的迭代中尝试一下

```
>> markets
=> [{"home"=>"CO", "name"=>"David Douglas"}, {"home"=>"SC", "name"=>"David Robertson"}]
>> markets.each_with_index do |market, i|
?> market.each do |name, v|
?> instance_variable_set "market_#{i}_#{name}", v
>> end
>> end
NameError: `market_0_home' is not allowed as an instance variable name
from (irb):23:in `instance_variable_set'
from (irb):23
from (irb):22:in `each'
from (irb):22
from (irb):25:in `each_with_index'
from (irb):21:in `each'
from (irb):21:in `each_with_index'
from (irb):21
>> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T00:29:16.497

我`@`在下面的行中添加了一个变量名`instance_variable_set`：

```
@market_0_home = 3
markets = [{"home"=>"CO", "name"=>"David Douglas"}, {"home"=>"SC", "name"=>"David Robertson"}]
markets.each_with_index do |market, i|
  market.each do |name, v|
    instance_variable_set "@market_#{i}_#{name}", v
  end
end 
```

当我运行它时，它工作正常。

```
=> 3
>> markets = [{"home"=>"CO", "name"=>"David Douglas"}, {"home"=>"SC", "name"=>"David Robertson"}]
=> [{"home"=>"CO", "name"=>"David Douglas"}, {"home"=>"SC", "name"=>"David Robertson"}]
>> markets.each_with_index do |market, i|
?>       market.each do |name, v|
?>           instance_variable_set "@market_#{i}_#{name}", v
>>       end
>>   end
=> [{"home"=>"CO", "name"=>"David Douglas"}, {"home"=>"SC", "name"=>"David Robertson"}]
>> @market_0_home
=> "CO"
>> @market_1_home
=> "SC" 
```

# liquibase - Liquibase add-foreign-key-constraint deferable：这是什么意思？

> ID：11405034
> 
> 赞同：11
> 
> 时间：2012-07-10T00:17:46.193
> 
> 标签：liquibase

查看 liquibase 和[add-foreign-key-constraint](http://www.liquibase.org/manual/add_foreign_key_constraint)的文档，有一个名为 deferable 的属性。但是文档并没有真正提到该属性的作用。有人知道吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T00:31:25.353

**DEFERRABLE**
**NOT DEFERRABLE**
这控制是否可以延迟约束。在每个命令之后将立即检查不可延迟的约束。可延迟约束的检查可以推迟到事务结束（使用 SET CONSTRAINTS 命令）。NOT DEFERRABLE 是默认值。目前只有外键约束接受这个子句。所有其他约束类型都是不可延迟的。

[来源] [http://www.postgresql.org/docs/8.1/static/sql-createtable.html](http://www.postgresql.org/docs/8.1/static/sql-createtable.html)

简而言之，假设两个表具有循环 FK 依赖关系。当我们执行插入数据时，两个表中都不存在引用数据并且 FK 约束没有延迟，因为违反了 FK 约束，DB 会抛出错误。如果延迟，验证将在提交事务时执行。

# testflight - 为 TestFlight 创建 IPA，开发者 ID

> ID：11405040
> 
> 赞同：-1
> 
> 时间：2012-07-10T00:20:02.997
> 
> 标签：testflight

我对 Xcode 4.3 很陌生，每当我尝试将我的项目编译为 TestFlight 所需的 IPA 格式时，它会要求我提供开发人员 ID，这是支付 99 美元/年费用的唯一方法吗？

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:54:52.197

是的，您需要订阅才能推广到（非越狱）设备。如果没有订阅，您只能在模拟器中进行测试。

# hibernate - 使用 JPQL（使用 hibernate jpa）的 join 语句存储在列表中

> ID：11405042
> 
> 赞同：0
> 
> 时间：2012-07-10T00:20:17.850
> 
> 标签：hibernate, jakarta-ee, jpa, jpql

我有一个工作日志表，它与 Jiraissue 表有 onetomany 连接，而 Jiraissue 表也有 ManyToOne 连接到其他几个表。

我根据我的要求写了如下的 jqpl 语句。

```
@NamedQueries({
    @NamedQuery(name = "Worklog.findbySelection", query = "SELECT distinct workl.jiraissueWorklog.pkey, workl.jiraissueWorklog.summary, workl.jiraissueWorklog.issuestatusOBJ.pname, workl.jiraissueWorklog.cwduserOBJ.displayName, workl.jiraissueWorklog.created, workl.jiraissueWorklog.updated   FROM Worklog workl where workl.jiraissueWorklog.project = :project  and  workl.startdate between :startDate AND  :endDate" ),
     }) 
```

现在我想将输出存储在一个列表对象中，所以我把它作为 Worklog 对象。

```
 @SuppressWarnings("unchecked")
    public List<JiraissueColumns> findByDateProject(Date startDate,Date endDate,long projectID){

        Query query = em.createNamedQuery("Worklog.findbySelection");
        query.setParameter("startDate", startDate);
        query.setParameter("endDate", endDate);
        query.setParameter("project", projectID);
        this.listOfWorklog = (List<JiraissueColumns>) query.getResultList();
            return listOfWorklog;
    } 
```

当我使用 for 循环查找列表中的内容时，出现以下错误。

```
Caused by: java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to listOfWorklog 
```

我确实明白 listOfWorklog 只能接受类型 Worklog 和 Jiraissue 对象，但 Jiraissue 又具有 Project，issuelist 对象。那些会被继承到 Worklog。

从 JPQL 语句获取输出的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:02:45.963

您正在使用非通用查询类。对于参数化类型的 Query，有一个 TypedQuery：

```
TypedQuery<JiraissueColumns> query = em.createNamedQuery(
    "Worklog.findbySelection",
    JiraissueColumns.class);

query.setParameter("startDate", startDate);
query.setParameter("endDate", endDate);
query.setParameter("project", projectID);

return listOfWorklog = query.getResultList(); 
```

这将`List<JiraissueColumns>`通过调用返回`query.getResultList()`。

# django - Django ORM：使用具有“和”功能的对象列表进行过滤

> ID：11405044
> 
> 赞同：2
> 
> 时间：2012-07-10T00:20:36.363
> 
> 标签：django, orm

新手问题...

楷模：

```
Item(model.Models):
    ...
    attributes = models.ManyToManyField('Attributes', null=True)
    ...

Attributes(models.Models):
    title = models.CharField(max_length=100, unique = True)
    value = models.TextField()
    ... 
```

我有一个`[attObj1, attobj2, attObj3, attObjN]`在过滤表时要使用的属性对象`Item`列表。以下查询有效。

`items = Item.objects.filter(attributes = attObj1 and attObj2 and attObj3)`

***问题***是我需要动态创建查询（即`attObj1 and attObj2 and attObj3... and attObjN`：），因为列表中的属性数量是未知的。

我尝试使用以下复杂**的查询集但没有运气**（[来源](https://stackoverflow.com/questions/5783588/django-filter-on-same-option-with-multiple-possibilities)）。它返回一个空列表。

```
attList = [attObj1, attObj2, attObj3]
query = Q(attributes = attList.pop(0))
for att in attList:
    query = query & Q(attributes=att)

items = Item.objects.filter(query) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:55:24.593

你可以试试：

```
items = Item.objects.filter(attributes__in=attList) 
```

编辑：您也可以尝试链接/多个过滤器

```
attList = [attObj1, attObj2, attObj3]
fitems = Items.objects.filter()
for att in attList:
     fitems = fitems.filter(attributes=att) 
```

`fitems`被简化为包含在 attList 中具有属性的对象的集合。

# iphone - 显示来自 plist 的随机单词

> ID：11405047
> 
> 赞同：0
> 
> 时间：2012-07-10T00:21:08.273
> 
> 标签：iphone, objective-c, xcode

我制作了一个包含一些单词的 ap 列表，现在我尝试从该 plist 中显示一个随机单词

这是我的代码

```
NSArray *randomAddons = [NSArray arrayWithContentsOfFile: @"wordsENG.plist"];
int randomIndex = arc4random() % [randomAddons count];
mainTextController.text = [username2 stringByAppendingString:[randomAddons objectAtIndex:randomIndex]]; 
```

这会崩溃，当我更改 % [randomAddons count]; 至 % 3; 它崩溃了，但我不知道如何正确编码，有人可以帮我吗？

谢谢

**编辑：**

根据提供的链接jackjr300，我编辑的plist文件有问题，看下面的评论。我仍然面临着从一开始就遇到的崩溃。崩溃说：

```
Array: (
        (
        SAMSAM,
        SELSEL,
        DONDON
    )
)
2012-07-10 03:41:11.048 spinningyarn[1590:1bb03] -[__NSCFArray length]: unrecognized selector sent to instance 0xcfcfdd0
2012-07-10 03:41:11.048 spinningyarn[1590:1bb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray length]: unrecognized selector sent to instance 0xcfcfdd0'
*** First throw call stack:
(0x1b04022 0x1ee0cd6 0x1b05cbd 0x1a6aed0 0x1a6acb2 0x1468bd9 0x115dc3 0x3de995 0x979ed9 0x981725 0x8ea4ab 0x9837c6 0x8c9885 0x2166330 0x2168509 0x1a3b803 0x1a3ad84 0x1a3ac9b 0x26287d8 0x262888a 0xb3d626 0x29e2 0x2955 0x1)
terminate called throwing an exception(lldb) 
```

SAMSAM、SELSEL、DONDON 是我的 P 列表文件中的 3 个单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:31:53.317

问题是 plist 文件不是一个数组，它是一个字典 :)
代码应该是（假设是，有一个数组，其中存储了关键字（keyForArray）的单词：（
正确的实现取决于字典中的整体 - 如何将行添加到 plist 文件）

```
NSDictionary *randomEntriesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"wordsENG" ofType:@"plist"]];

NSUInteger dictionaryCount = [randomEntriesDictionary count];
if(nil != dictionaryCount)
{
   NSArray *randomWords = [randomEntriesDictionary objectForKey:keyForArray];
   NSUInteger randomIndex = arc4Random % dictionaryCount;
   NSString *randomWord = [randomWords objectAtIndex:randomIndex];
}
else
{
  // check if file exists  and not empty?
  // is it in plist format ?
  ... do the needed.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:24:10.597

您的文件似乎未正确包含在您的应用程序的主包中。在项目导航器中，单击项目，然后为您的应用程序选择目标。选择“构建阶段”部分，然后查找“复制捆绑资源”构建阶段。如果您没有，您可以使用“添加构建阶段”按钮创建一个。

完成 Copy Bundle Resource 构建阶段后，请确保您的 plist 文件在该部分中列为捆绑资源。如果不是，您可以按 + 按钮添加它，或者将文件从主项目导航器文件列表拖到捆绑资源列表中。

完成此操作后，您可以重建并且该文件应包含在您的捆绑包中。如果文件在您的捆绑包中，则可以使用`[[NSBundle mainBundle] pathForResource:@"wordsENG" ofType@"plist"]`另一个答案中建议的内容

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T05:18:26.180

如数组中的控制台数组所示。所以试试这个希望它对你有帮助......

```
NSArray *randomAddons = [NSArray arrayWithContentsOfFile: @"wordsENG.plist"];

NSArray *randomArray = [[NSArray alloc] initWithObjects:[ randomAddons objectAtIndex:0], nil];

int randomIndex = arc4random() % [randomArray count];
mainTextController.text = [username2 stringByAppendingString:[randomArray objectAtIndex:randomIndex]]; 
```

# objective-c - 故事板转场问题

> ID：11405048
> 
> 赞同：-2
> 
> 时间：2012-07-10T00:21:12.857
> 
> 标签：objective-c, ios, xcode, storyboard, segue

我正在 Xcode 4 中开发 iPhone 应用程序，并且正在使用情节提要。我正在使用单视图应用程序。我有一个连接我的主页（由我的视图控制器类 ViewController 控制）和另一个包含 UIImageView 的视图的 segue。在主页上，用户可以选择一个图像，然后另一个视图上的 UIImageView 将显示该图像。起初我以为 UIImageView 仍会在 ViewController 类上，但是当我推送第二个视图时，它显示它是 UIView 并且我无法更改。我相信我必须创建另一个类来处理第二个视图，但我不知道该怎么做。其次，我不知道如何将该类与视图联系起来，然后进行 segue 工作。我是在正确的轨道上还是我完全错了。请帮助...谢谢。PS 现在我输入了这个，我查看了一些类似的问题，并且我正在阅读很多关于这个 prepareForSegue 方法的内容。那是用来在视图控制器之间进行分隔的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:49:46.890

The best way to address your question is a good hand on tutorial on Storyboards. Try this two parts [tutorial](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1) series.

# python - 如何从 Python 获取 UTC 格式的文件修改日期

> ID：11405049
> 
> 赞同：22
> 
> 时间：2012-07-10T00:21:31.170
> 
> 标签：python

我想从 Python 获取 UTC 文件的修改日期。以下代码返回我的 Linux 配置时区 (GMT-5) 中的日期。我想要它在UTC。或者我如何获得 os 配置的时区以将其转换为 pytz ？

```
$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from datetime import datetime
>>> import os
>>> dt=os.path.getmtime('/home/user/.bashrc')
>>> datetime.datetime.fromtimestamp(dt)
datetime(2012, 5, 30, 21, 18, 10) 
```

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-10T00:28:19.080

试试[datetime.datetime.utcfromtimestamp](http://docs.python.org/library/datetime.html#datetime.datetime.utcfromtimestamp)

```
import datetime
import os
dt=os.path.getmtime('/home/me/.bashrc')
print (datetime.datetime.fromtimestamp(dt))
print (datetime.datetime.utcfromtimestamp(dt)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:33:11.733

使用您当地的时区代替“America/New_York”，以下应该可以解决问题。

```
In [11]: import datetime, pytz

In [12]: right_now = datetime.datetime.now()

In [13]: right_now_utc = right_now.replace(tzinfo=pytz.timezone("America/New_York")).astimezone(pytz.utc)

In [14]: right_now
Out[14]: datetime.datetime(2012, 7, 9, 20, 31, 21, 999536)

In [15]: right_now_utc
Out[15]: datetime.datetime(2012, 7, 10, 1, 31, 21, 999536, tzinfo=<UTC>) 
```

# php - 更新后如何刷新特定图像？

> ID：11405050
> 
> 赞同：0
> 
> 时间：2012-07-10T00:21:39.507
> 
> 标签：php, jquery

我有几个具有唯一 ID 的 div 标签，在特定图像的点击事件之后，我试图刷新它。我怎样才能做到这一点？到目前为止，这就是我的代码：

HTML：

```
<div class="photo_gallery_container" <?php echo($div_id); ?>>
    <table class="table table-bordered table-condensed">
        <thead >
            <tr style="background-color: #f5f5f5;">
                <th colspan="2" style="text-align: right;"><span style="cursor:pointer" id="delimg_<?php echo($id); ?>" class="delimg"><span class="label label-important">Delete</span></span></th>
            </tr>               
        </thead>
        <tbody>
            <tr>
                <td>
                    <img src="<?php echo($url['url'])?>" style="height:120px;"/>
                </td>
                <td>
                    <a href="#" id="rotateimg_<?php echo($id); ?>" class="rotateimg">Rotate</a>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

我的旋转点击事件如下所示：

```
$('.rotateimg').click(function(e) {
    e.preventDefault();
    var id = $(this).attr('id').substr(10);

    $.post("/functions/photo_functions.php", { f: 'rotate', imgid: id }, function(status){

        if (status == 'true') {

            // How can I reload the specific image after being rotated

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:23:08.990

只需将查询字符串附加到`img`的 URL（例如`?v=1`），这会使浏览器误以为这是一个新图像。

这是一个示例（假设`id`是页面上图像的 id）：

```
$('#' + id).prop('src', function(i, v)
{
    var separator = v.indexOf('?') == -1 ? '?' : '&';

    return v + separator + 'v=' + ( new Date() ).getTime();
}); 
```

* * *

由于您`img`在页面上似乎没有 ID，因此您可以遍历 DOM 来找到它，如下所示：

```
$(this).parent().prev().find('> img') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:30:44.543

插件怎么样？

```
$.fn.refresh(function() {
  return this.each(function() {
    var $this = $(this);
    var source = $this.data('orig-src');
    var timestamp = (new Date()).getTime();

    if (!source) {
      $this.data('orig-src', $this.prop('src'));
      source = $this.data('orig-src');
    }

    if (source.indexOf('?') != -1) {
      $this.prop('src', source + '&t=' + timestamp)
    } else {
      $this.prop('src', source + '?t=' + timestamp)
    }
  });
}); 
```

`<img />`现在您可以在标签上调用它：

```
$('img.foo').refresh(); 
```

# php - PHP在字符串中查找链接

> ID：11405053
> 
> 赞同：0
> 
> 时间：2012-07-10T00:22:14.980
> 
> 标签：php

我在下面的 php 示例中有一个字符串。

```
$string = "This is my website example.org check it out!";
if( preg_match( '/\w+\.(?:com|org)/i', $string, $matches)) {
var_dump( $matches[0]);
echo '' . $matches[0] . '';
} 
```

它会回响

```
string(11) "example.org" example.org 
```

我只需要它只回显

例子.org

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:26:55.913

您将需要一个正则表达式来执行此操作。这是一个开始：

```
$string = "This is my website example.org check it out!";
if( preg_match( '/\w+\.(?:com|org)/i', $string, $matches)) {
    // var_dump( $matches[0]);
    // echo '<a href="' . $matches[0] . '">' . $matches[0] . '</a>';
    echo $matches[0];
} 
```

正则表达式是：

```
\w+\.(?:com|org)
^   ^^
|   |Match either com or org
|   Match a period
Match one or more word character [A-Za-z0-9_] 
```

这[将输出](http://codepad.viper-7.com/Q4vbDz)：

```
string(11) "example.org" 
```

如有必要，您将需要对其进行调整以包含子域和协议。

# ruby-on-rails - 带有嵌套属性的“无法批量分配受保护的属性”

> ID：11405065
> 
> 赞同：4
> 
> 时间：2012-07-10T00:23:49.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

我已经看到有关此问题的其他问题，但到目前为止，答案对我没有用。我正在尝试创建一个注册用户并同时创建组织的表单。用户和组织通过分配表关联。

这是我的表格：

```
= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|

  = devise_error_messages!

  = f.fields_for :organizations do |f|

    = f.label :name
    = f.text_field :name

  = f.label :email
  = f.email_field :email

  = f.label :password
  = f.password_field :password

  = f.label :password_confirmation
  = f.password_field :password_confirmation 
```

我的注册控制器：

```
class Users::RegistrationsController < Devise::RegistrationsController
  def new
    @user = User.new
    @user.organizations.build
  end

  def create
    super
  end

  def update
    super
  end
end 
```

我的组织模型：

```
class Organization < ActiveRecord::Base
  has_many :organization_assignments
  has_many :users, :through => :organization_assignments

  attr_accessible :name
end 
```

和我的用户模型：

```
class User < ActiveRecord::Base

  has_many :organization_assignments
  has_many :organizations, :through => :organization_assignments

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  accepts_nested_attributes_for :organizations

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :organization_attributes
  # attr_accessible :title, :body

end 
```

我得到的确切错误是：

> 无法批量分配受保护的属性： organizations_attributes

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T00:35:54.870

您必须`:organizations_attributes`在`attr_accessible`模型`User`中添加。

# php - Wordpress-不要在代码标签内执行简码

> ID：11405066
> 
> 赞同：3
> 
> 时间：2012-07-10T00:23:58.853
> 
> 标签：php, wordpress

我只是注意到当我试图在页面上打印如何执行某个短代码时，即使在 < code > 标签内也会执行该短代码。

我正在尝试将它放到可以在代码标签中显示所有内容的位置，并且不让 wordpress 对其进行任何操作，即：

```
<code>[shortcode]</code> 
```

正如您在 stackoverflow 上看到的上述行一样，我希望它显示在我的 wordpress 博客上，即使`[shortcode]`是简码（不要执行简码）。

我尝试使用`strip_shortcodes()` [http://codex.wordpress.org/Function_Reference/strip_shortcodes](http://codex.wordpress.org/Function_Reference/strip_shortcodes)

然而，这实际上将整个文本从内容中取出，而不仅仅是阻止它被执行。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T00:28:38.713

我刚刚找到了答案，我想我不会删除我的问题，而是自己回答。我多年来一直在使用 Wordpress，但从未听说过这个问题。

要让 wordpress 显示短代码而不执行它们，您必须使用双括号，即：

```
[[shortcode]] 
```

Wordpress 会将其显示在单括号中，未执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T13:06:24.157

如果您有包含内容的短代码，请尝试此操作

```
[[shortcode]this is the content[/shortcode]] 
```

# jquery - jQuery .each() 函数问题

> ID：11405068
> 
> 赞同：0
> 
> 时间：2012-07-10T00:24:16.100
> 
> 标签：jquery, loops, each

我使用 jQuery 的 .each() 函数遇到了这个问题。我想对我拥有的表的行和列进行排序，我试图通过将名为“row”和“col”的属性添加到我的“td”标签来实现。

基本上我的代码如下所示：

```
$('tr').each(function(tr_index) {
    $('td').each(function(td_index) {
        $(this).attr({
            'row' : tr_index,
            'col' : td_index,
        });
    });
}); 
```

但这给了我以下输出：

```
<td row="6" col="0"></td>
<td row="6" col="1"></td>
<td row="6" col="2"></td>
<td row="6" col="3"></td>
<td row="6" col="4"></td>
<td row="6" col="5"></td>
<td row="6" col="6"></td> 
```

row 属性在每个“td”标签上输出 6。这是否意味着第一个 .each() 循环在任何第二个 .each() 循环被触发之前执行？

任何想法我可以如何改变它，以便我有这样的东西：

```
<td row="0" col="0"></td>
<td row="0" col="1"></td>
<td row="0" col="2"></td>
<td row="1" col="0"></td>
<td row="1" col="1"></td>
<td row="1" col="2"></td>
<td row="2" col="0"></td> 
```

ETC...

如果有人能为我解决这个问题，我将不胜感激，因为我似乎无法解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:37:24.427

试试这个

```
 $('tr').each(function(idx_row){
            $(this).children().each(function(idx_col){
                $(this).attr({'row':idx_row, 'col':idx_col});
            })
        }); 
```

# c++ - 内部类访问外部类

> ID：11405069
> 
> 赞同：22
> 
> 时间：2012-07-10T00:24:25.133
> 
> 标签：c++, structure

我对 C++ 比较陌生，我已经为这件事寻找了很多答案，但我从来没有得到令人满意的答案。

假设我有一个名为`FSM`. `FSM`最终在我的代码中，可以创建多个实例。`FSM`的属性之一`int X`是不是静态的，每个实例都`FSM`应该有自己的值`X`。

现在，`FSM`的属性之一是另一个`submachine`需要读取值的结构，`X`如下所示：

```
struct FSM
{
  public:
    int x;

    int getX(){return x;}

    struct submachine
    {
        void onentry() {int g = getX();};
    };
}; 
```

这给出了以下错误：

> 错误：“FSM::getX”：非法调用非静态成员函数

我的问题是，`submachine`是 的成员`FSM`，所以它不应该有权访问 的所有属性的本地实例`FSM`吗？如果不是，当我们创建 的实例时`FSM`，我们不会创建其所有成员的实例，即 ie`submachine`吗？如果是这样，那我们为什么需要创建一个需要的对象`onentry()`呢？

我假设编译器是正确的，所以我也想知道是否有办法让它工作。

注意：不幸的是，内部结构 ( `submachine`) 的实例在调用事件时被实例化，因此我只能定义类型，而不能在`FSM`.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-10T00:29:37.677

> 我的问题是，submachine 是 FSM 的成员，所以它应该可以访问 FSM 的所有属性的本地实例，不是吗？

不。与 Java 不同，内部类对象没有对外部对象的隐式引用。

> 我们不会创建所有成员的实例，即 submachine 吗？

`submachine`是一种*类型*，而不是成员变量。如果你想要一个成员变量，你必须做这样的事情：

```
struct FSM {
    struct submachine {
        ...
    };

    submachine sm;  // Member variable of type submchine
}; 
```

如果你想`sm`“看到”它的父对象，你需要明确地传递它：

```
struct FSM {
    struct submachine {
        FSM &parent;  // Reference to parent
        submachine(FSM &f) : parent(f) {}  // Initialise reference in constructor
    };

    submachine sm;

    FSM() : sm(*this) {}  // Pass reference to ourself when initialising sm
}; 
```

请注意，相同的原则适用于`submachine`不是成员变量的实例。如果您希望他们能够访问`FSM`实例，则需要传递对实例的引用。

另请注意，您可以使用指针而不是引用。事实上，指针在许多情况下提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T00:56:31.807

考虑到在你的例子中，我可以合法地编写一个自由函数

```
void foo()
{
    FSM::submachine sub;
    sub.onentry();
} 
```

没有可以引用的*FSM*实例。`sub`

正如 Oli 所说，要么让`submachine`对象存储对其父`FSM`对象的引用，要么直接将值传递`x`到`onentry`（目前尚不清楚它是如何被调用的）。

* * *

通过快速浏览[Boost.MSM 文档](http://www.boost.org/doc/libs/1_50_0/libs/msm/doc/HTML/index.html)，我发现了这个关于[non-default-constructed submachines 的](http://www.boost.org/doc/libs/1_50_0/libs/msm/doc/HTML/ch03s05.html#d0e2419)注释。

这很丑陋，我对后端的理解不够，无法在这里解释它，而且文字代码孤立起来也没有足够的意义，值得粘贴。

从那里链接的示例代码还显示了具有以下签名的子机的进入方法：

```
template <class Event,class FSM> void on_entry(Event const&,FSM& ); 
```

如果这是准确的，您可以存储指向外部状态机的指针`on_entry`，或者在那里提取 x 的值并将其记录在子机中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T00:31:13.580

请注意，声明`struct submachine`仅定义*类型*；它实际上并没有在该类型的类中创建一个字段。

您将需要以下其中一项：

```
struct submachine mysub; // creates a field after the class is defined 
```

或者

```
struct submachine
{
  . . .
} mysub; // creates the field "mysub" also, as the structure is being defined 
```

这使得`mysub`该字段，然后您以与访问相同的方式访问它`x`。

的定义`submachine`需要包括一个特定的`FSM`（例如一个指针字段`FSM*`，并且可能是一个喜欢`submachine(FSM* fsm): fsm_(fsm) {}`初始化它的构造函数），以便您可以说`fsm_->getX()`访问某个`X`值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T00:50:36.597

我只是在猜测你想做什么，但如果我的猜测是正确的，你可能会想到类似下面的东西。

```
struct FSM_Base {
    int x;

    struct submachine1;
    struct submachine2;

    FSM_Base () : x(0) {}
    virtual ~FSM_Base () {}
};

struct FSM_Base::submachine1 : virtual public FSM_Base {
    void oneentry () { int g = x; }
};

struct FSM_Base::submachine2 : virtual public FSM_Base {
    void oneentry () { int g = x; }
};

struct FSM : public FSM_Base::submachine1,
             public FSM_Base::submachine2 {
    FSM_Base::submachine1 * sub1 () { return this; }
    FSM_Base::submachine2 * sub2 () { return this; }
}; 
```

# ruby-on-rails-3 - 使用参数向路由添加例外

> ID：11405071
> 
> 赞同：0
> 
> 时间：2012-07-10T00:24:43.830
> 
> 标签：ruby-on-rails-3

我有这两条路线

```
get     '/opportunities/:id(/:tab_name)'  => 'opportunities#show',     as: 'opportunity'
get     '/opportunities/:id/edit'         => 'opportunities#edit',     as: 'edit_opportunity' 
```

但当然，该`edit`路线不起作用，因为它是作为`:tab_name`. 我怎样才能`edit`破例？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:02:56.413

Putting the edit route above the other route is the only way to fix this. Routes are matched in a top-down fashion.

# php - 调用数据库中的多个值

> ID：11405072
> 
> 赞同：0
> 
> 时间：2012-07-10T00:25:08.207
> 
> 标签：php, javascript, database

我正在尝试从表中检索几个不同的值。我让它工作了，但它实际上只是向我发送了它调用的最后一个值。我做了几件不同的事情，试图调用我所有的价值观，但它不起作用。这就是我所拥有的。

```
$infoChanger = $_GET['changer'];
$username = $_GET['user'];
$sql="SELECT * FROM Login_Info WHERE user='".$username."'";
$r = mysql_query($sql,$con);
$row = mysql_fetch_array($r);

if ($row[7] != "") 
{
    if ( $infoChanger == 1 ) {
        echo $row['user'];
    }
    else if ( $infoChanger == 2 ) {
        echo $row['health'];
    }
    else if ( $infoChanger == 3 ) {
        echo $row['maxHealth'];
    }
    else if ( $infoChanger == 4 ) {
        echo $row['gold'];
    }
    else if ( $infoChanger == 5 ) {
        echo $row['xp'];
    }
    else if ( $infoChanger == 6 ) {
        echo $row['xpRequire'];
    }
    else if ( $infoChanger == 7 ) {
        echo $row['eg'];
    }
}
else
{
    echo "false";
} 
```

这是我最后一次尝试这样做。但它只返回最后一个“eg”的值。我把它设置在一个循环上，在这里调用是我用来调用它的。

```
function recallCharInfo(user)
{
    xmlHttp=GetXmlHttpObject()
    if (xmlHttp==null)
    {
      alert ("Browser does not support HTTP Request")
      return
    }
    while (infoChanger < 7) {
      infoChanger += 1;
      xmlHttp=GetXmlHttpObject();
      var url="charinfo.php?user=" + user + "&changer=" + infoChanger;
      xmlHttp.onreadystatechange=stateChanged
      xmlHttp.open("GET",url,true)
      xmlHttp.send(null);
    }
} 
```

我试图让它们全部显示，但只是不正常工作，我不想为我试图调用的每个值创建一个函数。有谁知道这有什么问题还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:51:39.157

对于您的特定情况，数组索引从 0 开始，因此如果这些是数组中的所有行 $row[7] 将永远不会是任何东西，并且总是会返回 false。

您的初始检查应该是：

```
if($row !== false && $row[6] != "") 
```

对于循环的替代解决方案：

你的php可以是：

```
$infoChanger = $_GET['changer'];
$username = $_GET['user'];
$sql="SELECT * FROM Login_Info WHERE user='".$username."'";
$r = mysql_query($sql,$con);
$row = mysql_fetch_array($r);
echo json_encode($row); 
```

这应该将整行作为 JSON 对象返回，然后您可以在成功方法中将其解析为 Javascript 对象：

```
var rowData = JSON.parse(data); 
```

然后你应该能够访问你的所有字段

```
rowData.user;
and
rowData.health; 
```

# crystal-reports - Crystal Reports 运行总公式不起作用

> ID：11405079
> 
> 赞同：0
> 
> 时间：2012-07-10T00:25:43.917
> 
> 标签：crystal-reports, cumulative-sum

```
WhileReadingRecords;
numbervar Samples;
if {product.sku}="card-sample" then
    Samples = Samples + {@num_qty};

Samples; 
```

上面的公式总是返回零，我知道@num_qty 中有值，并且在某些行中它有 NULL，如果我尝试使用下面的代码评估 NULLS，它也会给我一个错误

```
if (not (isnull{@num_qty})) then 
```

有任何想法吗 ？？？注意：我正在尝试这个，因为对于我的情况，我不能使用运行总计中内置的 CR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:58:28.887

我相信你的`Samples`变量赋值是错误的，你需要使用`:=`而不是`=`，像这样：

```
WhileReadingRecords;
numbervar Samples;
if {product.sku}="card-sample" then
    Samples := Samples + {@num_qty};

Samples; 
```

# xcode - 为 git 创建别名文件夹？

> ID：11405080
> 
> 赞同：0
> 
> 时间：2012-07-10T00:25:55.993
> 
> 标签：xcode, git

我有一个 1 TB 的 Mac 服务器，有两个分区：100 GB 用于系统和软件，900 GB 用于任何其他文件。我的 git 文件夹存储在 900 GB 分区上。该分区名为`Other`.

现在，要访问我的 git 存储库，我必须去这里：

```
ssh://git@example.com:22/Volumes/Other/git/repo.git 
```

是否可以创建`git`文件夹的别名（别名也将命名为`git`）并将其放在第一个分区的根目录（`/`），以便我可以输入以下内容？

```
ssh://git@example.com:22/git/repo.git 
```

我创建了别名，但无法从上述地址访问存储库。我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:35:20.393

我会尝试链接文件夹，因为它也会链接内容：

```
# sudo ln -s /Volumes/Other/git /git 
```

# wpf - WPF自定义图片按钮

> ID：11405083
> 
> 赞同：1
> 
> 时间：2012-07-10T00:26:17.677
> 
> 标签：wpf, wpf-controls

我在 WPF 中使用 png 文件创建了一个图像按钮。但是，按钮图像外总是有一个边框。有没有办法摆脱它？我试图将按钮的 image'stretch ='fill',borderthickness 设置为 0，但到目前为止还没有工作。

感谢所有的答复。这是我的代码。我试图用一种风格来设置东西。我的代码和你的代码有什么区别？我对你们提到的 contentTemplate 和控件模板有点困惑。

```
<Style x:Key="TopPositionButtonStyle" TargetType="Button">        

    <Setter Property="Width" Value="50" />
    <Setter Property="Height" Value ="30" />
    <Setter Property="Padding" Value="0" />
    <Setter Property="BorderBrush" Value="SteelBlue" />
    <Setter Property="BorderThickness" Value="0" />

    <Setter Property="ContentTemplate">
        <Setter.Value>

            <DataTemplate>
                <Grid Background="SteelBlue">
                    <Image Source="images/button_up.png"
                           HorizontalAlignment="Center" 
                           Margin="0,0,0,0" Height="30" Width="50" 
                           Stretch="Fill"/>

                    <TextBlock Text="POSITION" 
                               HorizontalAlignment="Center" 
                               Foreground="White" 
                               Margin="5,5,0,0"/>
                </Grid>
            </DataTemplate>
        </Setter.Value>

    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:09:46.333

间距很可能来自默认`Padding`值。首先要尝试的应该是：

```
Padding="0" 
```

如果这不能为您提供您想要的下一步是自定义模板以删除所有间距，例如：

```
<Button Content="{StaticResource HowEverYourImageIsSet}">
    <Button.Template>
        <ControlTemplate TargetType="{x:Type Button}">
            <Border Background="{TemplateBinding Background}" 
                    BorderThickness="0" Padding="0">
                <ContentPresenter/>
            </Border>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:29:54.430

不确定您是将其设置为背景还是仅将图像设置为内容。你总是可以像 HB 提到的那样重写模板。

您也可以使用 ToolBar.ButtonStyleKey 因为它没有边框。

任何一个：

```
<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
    <Image Source="my.png"/>
</Button> 
```

或类似的东西：

```
<Button>
    <Button.Style>
        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
            <!-- Set your properties here -->
        </Style>
     </Button.Style>
</Button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:37:11.333

您需要重写[`Button.Template`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)以更改此类详细信息，文档中有一个自定义按钮模板的简单[`ControlTemplate`示例](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.aspx)。

# sql - 使用存储过程对行受限的 SQL 查询进行排序

> ID：11405091
> 
> 赞同：0
> 
> 时间：2012-07-10T00:27:46.600
> 
> 标签：sql, sql-server-2008, stored-procedures

我正在使用存储过程尝试从排序的 SQL 查询中获取前几行，其中输入参数指定要检索的行数和排序条件。

我已经能够正确检索前几行，但是当我尝试对结果进行排序时，它们只是使用默认条件（主键）排序。

所以我想知道是否有人可以看看它？

```
USE [database]
GO
SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
ALTER PROCEDURE [dbo].[x0] 
@username nvarchar(50),
@sortBy varchar(50),
@sortDirection varchar(4),
@startRow int,
@endRow int

AS
With Ordering AS(

    SELECT ROW_NUMBER() OVER (Order by
        CASE    WHEN @sortBy='datecreate' THEN 'datecreate'
                WHEN @sortBy='id' THEN 'id'
                WHEN @sortBy='DisplayName' THEN 'DisplayName'
        END,
        CASE    WHEN @sortDirection='asc' THEN 'asc'
                WHEN @sortDirection='desc' THEN 'desc'
        END) AS RowNumber,

    dbo.x1.*, dbo.x2.* 
    FROM  dbo.x1 INNER JOIN dbo.x2 ON dbo.x1.type = dbo.x2.type
    where username = @username
)
SELECT     RowNumber, *, DisplayName AS DisplayName
FROM         Ordering
Where RowNumber BETWEEN @startRow AND @endRow 
```

我还尝试将排序条件移动到外部 SQL 查询（Where RowNumber BETWEEN @startRow AND @endRow），但运气不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:46:04.603

你可以这样做：

```
;WITH Ordering AS
(
   SELECT rnd  = ROW_NUMBER() OVER (ORDER BY datecreate),
          rni  = ROW_NUMBER() OVER (ORDER BY id),
          rnn  = ROW_NUMBER() OVER (ORDER BY DisplayName),
          rndd = ROW_NUMBER() OVER (ORDER BY datecreate DESC),
          rnid = ROW_NUMBER() OVER (ORDER BY id DESC),
          rnnd = ROW_NUMBER() OVER (ORDER BY DisplayName DESC),
    dbo.x1.*, dbo.x2.* 
    FROM dbo.x1 INNER JOIN dbo.x2 ON dbo.x1.type = dbo.x2.type
    where username = @username
),
x AS 
(
  SELECT RowNumber = CASE @SortDirection 
    WHEN 'asc' THEN CASE @SortBy
      WHEN 'datecreate'   THEN rnd
      WHEN 'id'           THEN rni
      WHEN 'DisplayName'  THEN rnn 
    END
    WHEN 'desc' THEN CASE @sortBy
      WHEN 'datecreate'   THEN rndd
      WHEN 'id'           THEN rnid
      WHEN 'DisplayName'  THEN rnnd
    END, *, DisplayName AS DisplayName
  FROM Ordering
)
SELECT * FROM x
WHERE RowNumber BETWEEN @startRow AND @endRow 
ORDER BY RowNumber; 
```

但老实说，我认为您将从动态 SQL 中获得更好的性能（并且如果`optimize for ad hoc workloads`启用该设置，它将不会受到上述解决方案中固有的参数嗅探问题或计划缓存膨胀的影响）：

```
DECLARE @sql NVARCHAR(MAX);

SET @sql = N';WITH Ordering AS
  (
    SELECT ROW_NUMBER() OVER (ORDER BY ' + @SortBy + ' '
      + @SortDirection + ') AS RowNumber,
     dbo.x1.*, dbo.x2.* 
   FROM  dbo.x1 INNER JOIN dbo.x2 ON dbo.x1.type = dbo.x2.type
   where username = @username
  )
  SELECT RowNumber, *, DisplayName AS DisplayName
   FROM Ordering
   Where RowNumber BETWEEN @startRow AND @endRow 
   ORDER BY RowNumber;';

EXEC sp_executesql @sql, 
  N'@username NVARCHAR(50), @startRow INT, @endRow INT',
  @username, @startRow, @endRow; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T00:46:40.443

您的问题是在查询中使用常量。您正在按常量字符串而不是列进行排序。我认为您正在混淆动态 SQL 和常规 SQL。

要获取名称，您需要使用：

```
SELECT ROW_NUMBER() OVER (Order by
        CASE    WHEN @sortBy='datecreate' THEN datecreate
            WHEN @sortBy='id' THEN id
            WHEN @sortBy='DisplayName' THEN DisplayName
        END, 
```

但是，由于类型冲突，这不起作用。你有两个选择。首先，将所有类型转换为具有正确排序顺序的字符串（YYYY-MM-DD 用于日期，零填充用于数字）。或者，因为这是一个存储过程，所以为每个创建一个单独的查询。

问题是您可能将所有内容都作为字符串获取，但我仍然不确定如何获取 ASC 和 DESC。我认为您将需要两个查询，这是可行的，因为这是在存储过程中。

我喜欢亚伦的回答，但我认为它可以改进。

```
WITH Ordering AS (
   SELECT ROW_NUMBER() OVER
                 (ORDER BY (case when @sortBy = 'datecreate' and @sortdirection = 'ASC'
                                 then datecreate
                            end),
                           (case when @sortBy = 'datecreate' and @sortdirection = 'DESC'
                                 then datecreate
                            end) desc,
                           (case when @sortBy = 'id' and @sortdirection = 'ASC'
                                 then id
                            end),
                           (case when @sortBy = 'id' and @sortdirection = 'DESC'
                                 then id
                            end) desc,
                           (case when @sortBy = 'DisplayName' and @sortdirection = 'ASC'
                                 then DisplayName
                            end),
                           (case when @sortBy = 'DisplayName' and @sortdirection = 'DESC'
                                 then DisplayName
                            end) desc
                 ) as rn,
          dbo.x1.*, dbo.x2.*
   FROM dbo.x1 INNER JOIN dbo.x2 ON dbo.x1.type = dbo.x2.type
   where username = @username
) 
```

等等。不同之处在于只有一个 row_number() 调用，具有更复杂的排序表达式。除了实际用于排序的值之外，所有值都将为 NULL。

# grails - 安装 grails csv 插件时遇到问题

> ID：11405093
> 
> 赞同：0
> 
> 时间：2012-07-10T00:28:29.063
> 
> 标签：grails, dependencies, grails-plugin

我试图安装 grails csv 插件，我输入了“grails install-plugin csv”，当我尝试安装它时，它给了我一个错误，说“UNRESOLVED DEPENDENCIES”、“net.sf.opencsv#opencsv;2.3: not found " 并在其下方表示插件缺少 jar 依赖项。我能够毫无问题地安装 spring-security-core 插件，为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:21:10.927

当我进入我的 buildConfig 并在该文件中我取消注释以下代码行时它起作用了：

```
mavenLocal()
mavenCentral()
mavenRepo "http://snapshots.repository.codehaus.org"
mavenRepo "http://repository.codehaus.org"
mavenRepo "http://download.java.net/maven/2/"
mavenRepo "http://repository.jboss.com/maven2/" 
```

一旦我这样做并再次运行 grails install-plugin 插件安装成功

# javascript - 无法从 PrettyPhoto 中的输入中获取 .val()

> ID：11405095
> 
> 赞同：0
> 
> 时间：2012-07-10T00:28:43.400
> 
> 标签：javascript, jquery, html, input, prettyphoto

这是我的代码的结构：

```
<div class='img_box' title='icon'>
  <div>
    <a href='#lightbox_add' rel='prettyPhoto[g1]'>
      <img alt='' src='images/img_plus_green.png' title=''/>
      <span class='description'>
        <span class='title'>Click to Answer</span>
      </span>
    </a>
    <div id='lightbox_add' class="hide">
        <div class='lightbox_add_cand'>
            <h4>Add a new answer</h4>
            <div class='block_answer'>
                <div class='line'>
                </div>
                <br/>
                <form action='/add/1' id='add_cand_form' method='post'>
                    <div class='input_box'>
                        <input class='s_inp_text' id='cand_title' name='cand_title' title='Write a title...' type='text'/>
                    </div>
                    <div class='input_box'>
                        <input class='s_inp_text' id='pic_url' name='pic_url' title='URL of picture...' type='text'/>
                    </div>
                    <a class='button_big dark_red' href='' id='add_cand_button'>
                      <span class='left'>
                        <span class='right'>
                          Save
                                               </span>
                      </span>
                    </a>
                </form>
            </div>
        </div>
    </div>
</div> 
```

<a href="#lightbox_add"> 元素在单击时会启动 PrettyPhoto 灯箱，并加载到由 <div id="lightbox_add"> 定义的 html 中。在灯箱里面，有一个表格。我的问题是通过 javascript 读取表单元素的值：

```
$("#add_cand_button").live('click', function() {
  alert( $("#cand_title").val());              //shows an empty alert box
  alert( $("#pp_full_res #cand_title").val());  //shows an alert box that says "undefined"
}); 
```

我知道 $("#pp_full_res #cand_title").val(); 应该是正确的方法，但它不起作用。另一件需要注意的事情：当我在 DOM 中搜索 #cand_title 时，它​​没有找到任何东西。

有人知道访问漂亮照片中输入元素值的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:07:40.860

没有名为`pp_ful_res`这就是为什么它返回“未定义”的元素

这是您在 jsfiddler [http://jsfiddle.net/screepts/DpeTr/中的代码](http://jsfiddle.net/screepts/DpeTr/)

您的`alert( $("#cand_title").val());` 返回值很好。

# html - 如何从链接中打开地址

> ID：11405101
> 
> 赞同：1
> 
> 时间：2012-07-10T00:29:31.433
> 
> 标签：html

我想在我的页面上创建一个链接，我只想从我的网站打开 www.google.com。

我有这样的标签： `<a target='_blank' href='www.google.com'>` 它正在打开这个链接`http://localhost:78/efm/efm21/www.google.com`

我读了一些文章，他们说要使用 ../ 返回一个目录，在我的情况下，我必须移动 ../../../ 才能访问 www.google.com 才能打开，但我仍然卡住了在它上面，它打开`localhost:78/www.google.com.`

我的问题是我如何从链接直接打开 www.google.com。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T00:30:59.780

您必须指定相对于协议或更高协议的完整路径。

```
<a href="//www.google.com/">link</a>
or
<a href="http://www.google.com/">link</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T00:31:14.700

添加协议 http://

```
<a href="http://www.google.com">Google</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T00:39:11.083

您必须指定协议，否则浏览器将尝试打开`www.google.com`在您的站点上调用的文件。

你有两个选择。

**#1：**

`<a href="//www.google.com" target="_blank">`将使用与您网站相同的协议打开 Google，例如

```
https://example.com 
```

将打开

```
https://www.google.com 
```

和 [http://example.com](http://example.com) 将打开

```
http://www.google.com 
```

.

**#2：**

`<a href="http://www.google.com" target="_blank">`or将使用or`<a href="https://www.google.com" target="_blank">`打开 Google ，不受您网站协议的影响。`HTTP``HTTPS`

# batch-file - 批处理 - 如何读取脚本中另一个命令行函数的输出？

> ID：11405107
> 
> 赞同：3
> 
> 时间：2012-07-10T00:30:25.183
> 
> 标签：batch-file, phpunit

我对批处理脚本相当陌生，但是，我以前做过一些 bash 脚本。我的批处理文件将运行另一个程序（即 phpunit），该程序将向命令提示符输出一些内容。我将如何让批处理脚本拦截这些已输出的内容并根据它做出决策。例如，phpunit 通常会打印一个 '.' 成功运行的每个测试和失败的每个测试的“F”。我如何让批处理脚本捕捉这个输出并根据它是否看到'。'做一些不同的事情 还是“F”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T00:00:45.470

我将首先不回答您的实际问题，但这些建议可能对您要解决的任何潜在问题有用：

1.  您可以以一种更易于机器阅读的方式[获取 phpunit 日志结果](http://www.phpunit.de/manual/3.6/en/logging.html)。
2.  PHP 是用于编写命令行脚本的 BASH 的有效替代方案。我将 BASH 用于简单的东西，但是一旦它超出了几行，或者当我想添加循环、if 语句等时，我决定在 PHP 中正确地完成它。其他人可能会使用 perl 或 python。

在你的特殊情况下，我会用 PHP，而不是 BASH，因为它最终可能需要一些复杂的解析。但是让我们看看如何在 BASH 中做一些简单的事情。挑战在于输出可能如下所示：

```
PHPUnit 3.4.5 by Sebastian Bergmann.

......................................

Time: 10 seconds, Memory: 9.00Mb

OK (38 tests, 660 assertions) 
```

或者可能看起来像这样：

```
PHPUnit 3.4.5 by Sebastian Bergmann.

............................................................  60 / 380
............................................................ 120 / 380
...............................................S............ 180 / 380
.......S.................................................... 240 / 380
............................................................ 300 / 380
............................................................ 360 / 380
....................

Time: 01:44, Memory: 14.50Mb

OK, but incomplete or skipped tests!
Tests: 380, Assertions: 6546, Skipped: 2. 
```

或者可能看起来像这样：

```
PHPUnit 3.4.5 by Sebastian Bergmann.

..IF

Time: 0 seconds, Memory: 8.00Mb

There was 1 failure:

1) MyTest::testTemp
Failed asserting that <boolean:false> is true.

/path/to/myTest.php:68

FAILURES!
Tests: 4, Assertions: 5, Failures: 1, Incomplete: 1. 
```

我猜你的应用程序就像一个每小时一次的 cron 工作来运行你的所有测试并确保没有任何问题。所以我将[使用正则表达式](https://stackoverflow.com/questions/304864/how-do-i-use-regular-expressions-in-bash-scripts)来寻找“失败”这个词：

```
#!/bin/bash

RESULT=`phpunit tests/myTest.php`

if [[ $RESULT =~ FAILURES ]]
then
    echo "Excuse me, Sir, but we have a problem in the unit tests...";echo "$RESULT"
fi 
```

我正在使用反引号来捕获输出。一些 BASH 专家会告诉你`$()`改用。无论哪种方式都在这里工作：

```
....
RESULT=$(phpunit tests/myTest.php)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:15:43.300

如果其他人碰巧正在寻找相同的解决方案，可以通过以下方式实现：

```
setlocal
someprog.exe > temp.txt
set /p PROGOUTPUT= < temp.txt
del temp.txt
REM do something with %PROGOUTPUT% here
endlocal 
```

希望这会有所帮助。

编辑：我还想注意，虽然您可以使用上面的方法，但我最终还是使用 PHP 来执行此操作，类似于下面 Darren Cook 的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:52:06.830

关于您的解决方案的一个注意事项：如果`someprog.exe`生成一个空输出（什么都没有或只是一个空行），则该`SET/ P`语句不会更改 的值`PROGOUTPUT`，这意味着该变量将保留其先前的值（如果有的话）。因此，如果该段代码可能在每次执行脚本时运行多次，您可能需要确保获得的输出与最近的调用相关，`someprog`而不是与之前的调用相关。

除此之外，您的代码很好，但是您可以在`FOR /F`循环的帮助下不使用临时文件：

```
SETLOCAL
SET PROGOUTPUT=
FOR /F "delims=" %%L IN ('someprog.exe') DO SET "PROGOUTPUT=%%L"
REM do something with %PROGOUTPUT% here
ENDLOCAL 
```

请注意，这假设程序只产生一行输出。

该`"delims="`参数告诉循环命令忽略任何分隔符并将整行视为单个值。是循环变量，在这种`%%L`情况下，循环体只包含一个命令，即后面的命令`DO`。如果要添加更多命令，请将正文括在括号中。如果将命令`&`放在同一行，则可以将它们分开，也可以将正文分成多行，如下所示：

```
FOR /F "delims=" %%L IN ('someprog.exe') DO (
  SET "PROGOUTPUT=%%L"
  *do something else*
) 
```

如果您的程序可以被教导返回退出代码，那么还有一种完全不同的方法。如果可以，请使用`0`成功返回和非零代码来指示任何类型的失败。在这种情况下，您的批处理脚本可能如下所示：

```
someprog.exe && (
  *do something in case of "success" (one or more commands)*
) || (
  *do something in case of "failure" (one or more commands)*
) 
```

而且您可能仍希望生成一个输出作为结果的视觉指示（在将程序与批处理脚本分开运行时可能很有用）。要在批处理脚本中运行时隐藏输出，只需将其重定向到`NUL`：

```
someprog.exe **> NUL** && (
... 
```

# ruby - 黄瓜（即使没有铁轨）非常慢

> ID：11405110
> 
> 赞同：1
> 
> 时间：2012-07-10T00:30:46.807
> 
> 标签：ruby, cucumber

在我的机器上执行这个简单的命令`cucumber -h`需要 4-6 秒。毫不奇怪，运行最基本的黄瓜测试，即使在 Rails 之外，也需要相同的时间。

有什么办法可以加快这个速度吗？如果测试本身被列为运行时间约为 100 毫秒，究竟需要这么长时间？

我在 win7、ruby 1.9.2、2.5GHz 处理器和 6G 内存上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:09:49.773

我有同样的问题，黄瓜非常慢。您可以对启动时间进行的一项重大改进是使用此[补丁](https://gist.github.com/1688857?utm_source=rubyweekly&utm_medium=email)升级到 Ruby 1.9.3 。在我的机器上，我发现启动时间加快了 30%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:36:28.363

我发现（在开发 Rails 应用程序时）黄瓜实际上减慢了我的测试速度。我最终将 rspec 与警卫一起使用（当我喜欢时使用 spork）。Rspec 是基本的 Rails 测试套件之一，guard 智能地运行您的所有测试（它会在一次测试失败后停止，因此不会让您不知所措），而 spork 是一个在您更改文件时重新运行测试的进程。

我从来没有弄清楚为什么黄瓜花了这么长时间，所以为了简单和时间，我只是切换回 rspec。

# java - .net soap 客户端到 java soap 服务，完全限定的命名空间

> ID：11405125
> 
> 赞同：1
> 
> 时间：2012-07-10T00:32:33.473
> 
> 标签：java, .net, wcf, c#-4.0, soap

最近，我进行了一项集成工作，尝试使 WCF 与旧版 Java 肥皂服务一起工作。在通过 wsdl 命令生成代理后，我们发现 WCF 生成的肥皂消息未针对该服务进行验证。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/03/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<soap:Header>
    <wsse:Security soap:mustUnderstand="1">
        <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-e497560b-df45-457d-b60d-1dd68430eec8">
            <wsse:Username xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">.....</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">.....</wsse:Password>
        </wsse:UsernameToken>
        <OrganizationToken xmlns="http://www.strongmail.com/services/2009/03/02/schema">
            <organizationName xmlns="">.....</organizationName>
        </OrganizationToken>
    </wsse:Security>
</soap:Header>
<soap:Body>
    <list xmlns="http://www.strongmail.com/services/2009/03/02/schema">
        <filter xsi:type="SystemAddressFilter">
            <isAscending>true</isAscending>
            <pageNumber>0</pageNumber>
            <recordsPerPage>10</recordsPerPage>
            <typeCondition>
                <value>FROM</value>
                <operator>EQUAL</operator>
            </typeCondition>
        </filter>
    </list>
</soap:Body> 
```

但是java服务期望

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Header>
    <wsse:Security soap:mustUnderstand="1">
        <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-e497560b-df45-457d-b60d-1dd68430eec8">
            <wsse:Username xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">.....</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">.....</wsse:Password>
        </wsse:UsernameToken>
        <OrganizationToken xmlns="http://www.strongmail.com/services/2009/03/02/schema">
            <organizationName xmlns="">.....</organizationName>
        </OrganizationToken>
    </wsse:Security>
</soap:Header>
<soap:Body>
    <list xmlns="http://www.strongmail.com/services/2009/03/02/schema">
        **<filter xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="SystemAddressFilter">**
            <isAscending>true</isAscending>
            <pageNumber>0</pageNumber>
            <recordsPerPage>10</recordsPerPage>
            <typeCondition>
                <value>FROM</value>
                <operator>EQUAL</operator>
            </typeCondition>
        </filter>
    </list>
</soap:Body> 
```

任何人都知道是否只有一个属性或设置可以进行更改？

# javascript - 如何找出在 sammyjs 中启动事件的元素？

> ID：11405131
> 
> 赞同：0
> 
> 时间：2012-07-10T00:33:27.533
> 
> 标签：javascript, sammy.js

假设我有以下标记

```
<ul class="app-nav">
  <li><a href="#!/testing">Link to testing route</a>
</ul>
...
<a href="#!/testing">Other link to testing route</a> 
```

使用 jQuery

```
$('a').click(function() {
   console.log( $(this) ); //the event sender and can be 'a' or 'ul>li>a'
}); 
```

使用 sammy.js

```
this.get('#!/testing', function(context) {
  //how I can get the event sender?
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:46:07.227

使用 jQuery 将您的请求绑定到文档并检查目标属性：

```
$(document).on('click', function( e ){

    var sender = e.target; // <-- Your event initiator

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T09:02:04.523

根据文档，[事件上下文](http://sammyjs.org/docs/api/#Sammy.EventContext)似乎就是您要寻找的。

> ***这个.target***
> 
> 包含此上下文的事件源自的 DOM 元素。对于 post、put 和 del 路由，这是触发路由的表单元素。

所以对于一个 post 请求，你可以从提交的表单中获取序列化的对象。

```
this.post('#:id', function() {
  // this.target is the DOM form element that triggered the route
  console.log($(this.target).serialize());
}); 
```

# python - mongodb：当两个客户端操作同一个集合时，它的行为如何？

> ID：11405133
> 
> 赞同：3
> 
> 时间：2012-07-10T00:33:45.343
> 
> 标签：python, mongodb

我有两个客户端（python）操作同一个集合，集合用作池，集合中的每条记录只能在一个客户端中使用。我使用下面的代码来确保它（它不是关键系统，所以可以容忍一点点错误）。

```
for i in range(100):
    record = collection.find_one({"used1":{"$exists":False}})
    record["used1"] = True
    collection.save(record)
    ...do sth I want... 
```

但我发现有时两个客户端不同步，本地客户端获取记录，10秒后远程客户端也将相同的记录。

其实如果2个客户端在不到2秒的时间内拿到记录，那是可以容忍的，但是10秒就太长了。

我认为这里存在缓冲区/同步问题，我能做些什么来减少这些问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:24:09.217

您的代码不是线程安全的——这意味着它不能保证两个客户端不能都将记录 [“used”] 字段更新为“True”并且都认为他们是第一个/唯一这样做的。

您需要使用的是[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)命令，如果该字段不存在，它将用“True”自动更新记录，然后将相同的记录返回给刚刚更新的客户端。

这保证了每个文档只能由一个线程处理，但是，您仍然必须处理您的代码现在遇到的相同问题 - 如果客户端进程在将此“used1”字段设置为 true 之后但在其工作之前死亡，您的数据将处于不一致的状态。

# git - 识别一个标签属于git中的哪个分支

> ID：11405134
> 
> 赞同：4
> 
> 时间：2012-07-10T00:33:49.673
> 
> 标签：git, tags, repository, branch, remote-branch

我首先将 repo 同步到一个分支名称 myBranch 的清单。然后我从

```
git tag -l 
```

现在我想知道使用 git 作为 git tag -l 结果获得的每个标签实际上是在哪个分支上创建的。请注意：我不希望 myBranch 作为输出，而是希望在其上创建标签的远程分支名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T05:48:15.733

撇开可以随时重命名或删除分支（不会丢失任何提交，仍然可以在另一个分支的路径中引用）这一事实不谈，您能做的最好的事情是：

*   获取包含标记引用的提交的分支

请参阅“[显示提交的原始分支](https://stackoverflow.com/questions/4535251/show-the-original-branch-for-a-commit)”，结合“ [Git - 如何判断标签指向哪个提交](https://stackoverflow.com/questions/1862423/git-how-to-tell-which-commit-a-tag-points-to)”。
（即，与 的`git rev-parse <tag>~0`组合`git branch --contains <sha1>`）

*这与创建*标签的分支无关，而是*当前引用*所述标签的分支。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T01:02:38.110

没有这样的事。标签指向提交，分支指向提交。单个提交可以指向（或成为）数十个不同分支的父级；没有办法将一个特定的分支缩小为“此标签的所有者”。该分支可能在您获取它之前已从上游删除，并且只保留提交，这是为什么这不起作用的另一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T13:29:51.160

尝试这个：

```
branch=$(git for-each-ref | grep ${commit_num} | grep origin | sed "s/.*\///") 
```

# ruby-on-rails - 将参数传递给 rspec 测试

> ID：11405135
> 
> 赞同：1
> 
> 时间：2012-07-10T00:34:03.767
> 
> 标签：ruby-on-rails, rspec

我正在尝试将额外的参数传递给 rspec 测试，因此（额外的参数是两个数组，guest_value 和 bar_value）：

```
 it "should create an outing" do 
            lambda do 
                post :create, :outing => FactoryGirl.attributes_for(:outing), :guest_value => [55,66], :bar_value => [66,77]
            end.should change(Outing, :count).by(1)
        end 
```

但是，我的测试完全忽略了它们，就好像它们甚至不存在一样。

此外，语法：

```
 post :create, :outing => { FactoryGirl.attributes_for(:outing), :guest_value => [55,66], :bar_value => [66,77] } 
```

引发错误：

```
NoMethodError:
   undefined method `each' for nil:NilClass 
```

这是我的控制器代码的结果：

```
def create
@outing = Outing.new(params[:outing])

@outing.user_id = @user.id

if @outing.save 

    params[:guestvalue].each do |guest_id|
        @outing.add_guest(guest_id)
    end 

    params[:barvalue].each do |bar_id|
        @outing.add_bar(bar_id)
    end 

    TimeRange.create(:element_id => @outing.id, :element_type => 'outing', :start_time => params[:day][:start_time], :end_time => params[:day][:end_time])  

    flash[:notice] = "Outing created successfully!" 

    redirect_to @outing
else 
    flash[:notice] = "Error creating outing!"
    @outing = Outing.new
    render(new_outing_path)
end 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:39:40.217

那么你肯定需要花括号来让命令做你想做的事情（将数组传递给 factorygirl 函数）。发布错误，也许我可以提供更多帮助？

里根

# android - Eclipse 从不要求我安装 android，SDK 管理器说没有设置目录

> ID：11405141
> 
> 赞同：0
> 
> 时间：2012-07-10T00:35:02.107
> 
> 标签：android, sdk, avd

我只安装了部分 AVD 管理器

我们可以在这里问故障排除问题吗？我只是看到很多Android问题

无论如何，我的困境 - 即使在尝试重新安装 eclipse，卸载插件之后 - 是 Android 插件永远不会提示我下载实际的 SDK

我被卡住了，如果我点击任何与 Android 相关的东西，它就会说 SDK 文件夹不存在。我已经知道了，因为我第一次询问我时取消了下载（我改变了关于位置的想法，无论如何这打开了一罐蠕虫）

我还能如何获得 SDK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:39:53.563

自行下载 SDK（来自 android 页面）。保存在电脑上。然后在 Eclipse 中：Window->Preferences->Android，您将看到“SDK Location”：只需浏览到您下载的 SDK。

你也可以按照这个链接[Android SDK](http://developer.android.com/sdk/index.html)，如果你一步一步去应该没有任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:41:49.777

您可以从[这里](http://developer.android.com/sdk/index.html)下载，也可以在 Eclipse Market 中搜索。

下载后，您必须在首选项（窗口 > 首选项 > Android）中设置*SDK 位置。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T06:35:59.913

首先下载 Android SDK 并将其安装在您的 PC 中，然后您应该从 Eclipse 为该 SDK 设置路径

然后在 Eclipse 中：Window->Preferences->Android，您将看到“SDK Location”：只需浏览到您下载的 SDK。

# asp.net-mvc-3 - LINQ 左加入列表

> ID：11405144
> 
> 赞同：1
> 
> 时间：2012-07-10T00:35:33.793
> 
> 标签：asp.net-mvc-3, linq, linq-to-entities

假设您有一个 ID 列表：

```
string str = "82174F2000000, 82174F2000001, 82174F2000002, 82174F2000003, 82174F2000004, 82174F2000005"; 
```

你这样做：

```
var tids = new List<string>(str.Replace(", ", ",").Split(','));
var tntable = tids.AsQueryable(); 
```

您想将其与带有左连接的表进行比较：

```
var line = from c in db.Ctable
 join l  in tntable on c.CarID equals l.CarID into c_j
  from l in c_j.DefaultIfEmpty()
  select new
  {
 Name =  c.OwnerName,
 Hours = c.Hours
  }; 
```

看起来 tntable 没有名为“CarID”的字段。

有人可以帮忙吗？

这是针对 LINQ to Entity 的。

我见过这个：

[如何使用 LINQ 将 List<String> 与 DB 表进行比较](https://stackoverflow.com/questions/3922619/how-to-compare-liststring-to-db-table-using-linq)

但不知道做一个 LEFT JOIN。

蒂亚！

我知道这很长；但感谢阅读。

**为 MichaC 更新：**

在 CTable 的数据库中，我们有这些 CarID：

```
CarID
_____
82174F2000000
82174F2000001
82174F2000002
82174F2000003 
```

假设表 (tntable) 包含分解为记录的字符串：

```
CarID
_____
82174F2000000
82174F2000001
82174F2000002
82174F2000003
82174F2000004
82174F2000005 
```

所以，像这样的 LEFT JOIN：

```
SELECT C.CarID, T.CarID
FROM CTable C
LEFT JOIN tntable T ON C.CarID = T.CarID 
```

会给你这个：

```
T.CarID         C.CarID
_______         _______
82174F2000000   82174F2000000
82174F2000001   82174F2000001
82174F2000002   82174F2000002
82174F2000003   82174F2000003
82174F2000004   NULL
82174F2000005   NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:42:29.490

如果我正在阅读您的问题，那么您似乎想根据 ID 列表进行过滤，而不是执行左连接。我想你想要这样的东西：

```
var line = from c in db.Ctable
           where tntable.Contains(c.CarID)
           select new 
           {
              Name =  c.OwnerName,
              Hours = c.Hours
           }; 
```

更新：您可以将包含检查移动到选择语句以返回所有内容。

```
var line = from c in db.Ctable
           select new 
           {
              IsMatch = tntable.Contains(c.CarID),
              Name =  c.OwnerName,
              Hours = c.Hours
           }; 
```

更新2：好的，这个怎么样。使用我的原件从 SQL 中提取相关项目，然后使用 Linq to Objects 以您想要的方式实际构建列表。.ToList() 强制它进行 SQL 查询。您也可以使用 .AsEnumerable()。

```
var filtered = from c in db.Ctable
           where tntable.Contains(c.CarID)
           select new 
           {
              CarID = c.CarID,
              Name =  c.OwnerName,
              Hours = c.Hours
           };

var line = from x in tntable
           join i in filtered.ToList() on x equals u.CarID into i_match
           from i in i_match.DefaultIfEmpty()
           select { x, i }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:26:38.807

从您的评论中，您希望 null 仍然为每个 ID 选择一个对象，`tntable`即使在`ctable`? 如果我理解正确的话，我相信这会给你想要的效果。

```
var desired = from l in tntable
              join c in ctable on l equals c.CarID into lj
              from c in lj.DefaultIfEmpty()
              select
                  new
                      {
                          Name = c == null ? null : c.OwnerName,
                          Hours = c == null ? (int?)null : c.Hours
                      }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:45:04.813

看看这个：

```
string str = "Pat, Boots";
var names = new List<string>(str.Replace(", ", ",").Split(',')).AsQueryable();

Pet defaultPet = new Pet { Name = "Default Pet", Age = -1 };

List<Pet> pets1 = new List<Pet>{ 
            new Pet { Name="Barley", Age=8 },
            new Pet { Name="Boots", Age=4 },
            new Pet { Name="Whiskers", Age=1 } 
    };

var pets = from name in names
            join pet in pets1 on name equals pet.Name into gj
            from subpet in gj.DefaultIfEmpty(defaultPet)
            select new { Name = name, Age = subpet.Age };

foreach(var newPet in pets) {
    Console.WriteLine("\nName: {0}, Age: {1} ", newPet.Name, newPet.Age );
} 
```

这会产生：

```
Name: Pat, Age: -1
Name: Boots, Age: 4 
```

如果这不能满足您的要求，请仔细查看[MSDN 上的 How to: Perform Left Outer Joins (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/bb397895.aspx)。

我为 DefaultIfEmpty() 使用了上面的链接和 MSDN 的帮助页面。

# php - PHP MySQLi (mysqli_result) 可用方法

> ID：11405146
> 
> 赞同：0
> 
> 时间：2012-07-10T00:36:01.843
> 
> 标签：php, mysqli

我想在我正在创建的 MySQLi 扩展中实现特定功能，但如果它已经存在或大部分存在，我不想这样做。我已经彻底阅读了文档，但我不确定这个或类似的功能是否是内置的；有人知道吗？

```
$db = new mysqli;

$sql = 'SELECT whatever...';
$obj = $db->fetchUpdate($sql);

// overwrite previous values
$obj->result['first'] = 'John';
$obj->result['last'] = 'Smith';

$obj->update(); // save to db 
```

再一次，我可以组合一个轻量级的包装扩展来做这件事；我只是想确保它还不是 mysqli 基本方法的一部分，我只是在文档中忽略了它。谢谢指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:38:02.527

它没有在 MySQLi 中实现，这就是为什么有这么多 ORM 的原因 :)

# windows - 如何以编程方式设置 Windows 便携式设备文件属性？

> ID：11405147
> 
> 赞同：1
> 
> 时间：2012-07-10T00:36:04.417
> 
> 标签：windows, winapi, wpd

[我的应用程序需要不使用WPD API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389005%28v=vs.85%29.aspx)直接访问便携式设备的内容。有人可以提供一些关于此的指示吗？

我`dbcc_name`用作我的设备接口路径。当我试图打电话时，`GetFileAttributes(dbcc_name)`我收到“拒绝访问”错误。如何正确设置便携式设备的 ACL？

我需要用来`SetupDiSetDeviceRegistryProperty()`设置`SPDRP_SECURITY`属性吗？

谢谢。

# linux - 如何在 zsh 或 bash 中获得逻辑 CPU 的数量？

> ID：11405157
> 
> 赞同：1
> 
> 时间：2012-07-10T00:37:34.263
> 
> 标签：linux, bash, zsh

如何在 zsh 或 bash 中获得逻辑 CPU 的数量？我想创建一个 makep 别名，将 # of cpus 传递给“make -j”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:41:04.500

对于 Linux：

```
grep -c proc /proc/cpuinfo 
```

外壳无所谓。这将适用于任何情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T09:52:22.990

最简单的解决方案是调用“nproc”，它只返回逻辑核心的数量

nproc --all 为您提供所有已安装的处理器（在 openvz 上，这将返回系统的 CPU，而不是您容器中可能有限的数量！）

不带任何选项的 nproc 为您提供当前进程可用的核心数量（因此在您的情况下为 bash 或 zsh） nproc 是 coreutils 的一部分。

无需 grep :)

有关详细信息，请参阅“man nproc”

高温高压

# jboss7.x - JBoss AS 7 Restful Webservices 不自动部署

> ID：11405158
> 
> 赞同：2
> 
> 时间：2012-07-10T00:37:58.023
> 
> 标签：jboss7.x, resteasy

我正在尝试将内置的 Restful WebServices 与 JBoss AS 7 一起使用。我的 web.xml 是..

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
       version="2.5">

</web-app> 
```

我的应用程序类是...

```
package com.robert;

import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;
import java.util.HashSet;
import java.util.Set;

@ApplicationPath("/services")

public class HelloWorld extends Application {
private Set<Object> singletons = new HashSet<Object>();

public HelloWorld() {
    singletons.add(new Library());
}

@Override
public Set<Class<?>> getClasses() {
    Set<Class<?>> classes = new HashSet<Class<?>>();
    classes.add(Library.class);
    return classes;    //To change body of overridden methods use File | Settings | File Templates.
}

@Override
public Set<Object> getSingletons() {
    return singletons;
} 
```

}

我的课是

```
import javax.ws.rs.*;

@Path("/library")
public class Library {

@GET
@Path("/books")
public String getBooks() {
    return "this is all your books";
}

@GET
@Path("/book/{isbn}")
public String getBook(@PathParam("isbn") String id) {
    // search my database and get a string representation and return it
    return "Its a good book; I read it";
}

@PUT
@Path("/book/{isbn}")
public void addBook(@PathParam("isbn") String id, @QueryParam("name") String name) {
    System.out.println("Adding book "+name);
}

@DELETE
@Path("/book/{id}")
public void removeBook(@PathParam("id") String id ){
    System.out.println("Removing book "+id);

} 
```

}

但是，当我启动 JBoss AS7 时，WebService 永远不会启动。我在 JBoss 管理页面中看不到它，在

```
http://foobar:8080/MyWar/services/library/books 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:09:34.413

好的，我发现了问题。按照 RestEasy 的指示，我已将最新版本的 RestEasy 安装到 JBoss 模块中。当我恢复到默认安装时，它可以工作。请注意，web.xml*不得*包含对 Restful servlet 的任何引用，因为 JBoss 部署程序在看到类上的 @ApplicationPath 注释时会自动部署 RestEasy。Web.xml 应该是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:11:43.780

您需要添加 REST servlet 映射

在**web.xml**你需要添加一个 servlet 映射到 REST Servlet，像这样

```
<servlet-mapping>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

URL 模式应与应该作为 RESTFUL 处理的任何内容匹配（或使用 /* - 这将使您的 Rest servlet 处理对此应用程序的所有请求）

我不知道为什么，但我**从未在 JBoss 管理控制台的 Web 服务部分看到**我的任何**Restful** Web 服务，但我在该列表中看到了我的基于 WSDL SOAP 的 Web 服务。

但是我确实在管理控制台的管理部署部分看到了 Restful 项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:22:50.120

要修复您的应用程序：

1.  采用`<web-app version="3.0" ..`
2.  添加 servlet 映射，如@austin's answer
3.  或者，阅读`2.3.2 Servlet`jax-rs-1.1[规范](http://jcp.org/en/jsr/detail?id=311)部分，这将帮助您设置其余部分`web.xml`，尽管在您的示例中它是多余的。

您也可以使用jbossas-7 随附的[helloworld-rs](https://github.com/jboss-developer/jboss-eap-quickstarts/) quickstart 作为 JavaEE 6 RESTful webapp 的起点。

# django - 尝试同步数据库时出现 Django 语法错误

> ID：11405160
> 
> 赞同：0
> 
> 时间：2012-07-10T00:38:12.807
> 
> 标签：django

我正在做一个来自 HackedExistence 的教程，并且在尝试 syncdb 时收到以下错误：

```
class Beer(models.Model):
    ^

SyntaxError: invalid syntax 
```

我在 virtualenv 上运行 Django

代码如下：

```
BEER_CHOICES = (
    ('D', 'Domestic'),
    ('I', 'Import'),

class Beer(models.Model):

    name = models.CharField(max_length=200)
    slug = models.Slugfield(unique=True)
    brewery = models.foreignKey('Brewery')
    locality = models.CharField(max_length=1, choice=BEER_CHOICES)
    description = models.TextField(blank=True)

    def __unicode__(self):
        return self.name

class Brewery(models.Model):

    name    = models.CharField(max_length=200)
    slug    = models.Slugfield(unique=True)
    description = models.TextField(blank=True)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T00:45:56.700

[选择应该在两个元组的列表或元组中定义](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.choices)。
您忘记了元组的端括号。

```
BEER_CHOICES = ( 
    ('D', 'Domestic'), 
    ('I', 'Import'),
) # <- missing end-bracket 
```

# ssl - 我可以在 Sinatra 中使用 Thin 启用 SSL 吗？

> ID：11405161
> 
> 赞同：8
> 
> 时间：2012-07-10T00:38:21.307
> 
> 标签：ssl, sinatra, thin

我正在寻找一种简单的方法来在通过 Thin 运行的独立 Sinatra 应用程序中启用 SSL，而无需通过 Thin 命令行传递`--ssl`,`--ssl-key-file`和`--ssl-cert-file`参数。

是否可以直接在 Sinatra 应用程序中或通过 config.ru 文件定义它们？

我花了几个小时寻找这个问题的答案，但到目前为止还没有找到任何有效的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T01:48:06.113

我只是花了几个小时试图自己解决这个问题。

事实证明，它在其方法期间`Thin::Server.initialize`丢弃了`ssl`选项`initialization`（它委托给它的实例`Backend`，该实例立即将其设置`ssl`为`nil`，忽略您传递给的任何 ssl 选项。这意味着您必须在实例化服务器*后*`Thin::Server.new`设置 ssl 选项。 )

 *这是如何做到的：

```
class App < Sinatra::Base

  # ...

  def self.run!
    rack_handler_config = {}

    ssl_options = {
      :private_key_file => '/path/to/foo.key',
      :cert_chain_file => '/path/to/bar.crt',
      :verify_peer => false,
    }

    Rack::Handler::Thin.run(self, rack_handler_config) do |server|
      server.ssl = true
      server.ssl_options = ssl_options
    end
  end
end

App.run! 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T22:12:48.240

这些天（sinatra 1.4.1）`run!`接受一个产生服务器的块。所以你可以这样做：

```
MyApp.run! do |server|
  ssl_options = {
    :cert_chain_file => '/path/to/bar.crt',
    :private_key_file => '/path/to/foo.key',
    :verify_peer => false
  }
  server.ssl = true
  server.ssl_options = ssl_options
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-21T07:52:08.390

我正在使用[Rack::SslEnforcer](https://github.com/tobmatth/rack-ssl-enforcer)使用 SSL 运行 Sinatra 和 Thin（在 Heroku 上） ，这样做：

```
if production?
    require 'rack/ssl-enforcer'
    use Rack::SslEnforcer
end 
```

这应该在您在文件中启用 :sessions 之前。*

# node.js - 在 Node.js 应用程序的机架空间云文件中为许多用户组织图像的正确方法？

> ID：11405163
> 
> 赞同：1
> 
> 时间：2012-07-10T00:38:35.567
> 
> 标签：node.js, mongodb, rackspace-cloud, express

我有一个简单的 Node.js 应用程序。我将拥有用户个人资料，每个用户都可以上传几张图片。图像将上传到 Rackspace Cloudfiles。

我目前正在使用[Rakit](https://github.com/rossj/rackit)模块。

它目前的工作方式：

我向 Rackit 传递了一个文件，该文件将其上传到 Rackspace Cloudfiles，并将 CDN url 返回到该图像（图像名称已由 rackit 散列）（url 看起来像这样）：
[http://c15142174.r14.ca2.rackcdn。 com/Y20h30Jd918aHV3pKROzejdq](http://c15142174.r14.ca2.rackcdn.com/Y20h30Jd918aHV3pKROzejdq)

Rackit 当前将所有图像保存到一个容器中。

**以下是我的问题：**
1) 我是否应该将每个用户的图像保存到一个单独的容器中（为了隐私、安全以及确保一个用户不能删除另一个用户）？

2) 只需将上面的 url ref 存储在数据库中并在将来以这种方式引用它就足够了吗？我可以指望这个网址不会改变吗？

3) 在用户图像前加上用户名或哈希值将图像与给定用户联系起来是否更有意义？

最佳实践方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:39:13.407

我被提到了这篇很棒的文章，它很好地回答了我的问题： [http ://www.rackspace.com/knowledge_center/content/best-practices-using-cloud-files](http://www.rackspace.com/knowledge_center/content/best-practices-using-cloud-files)

总结一下我的用例的文章：

1）**使用多个容器**。在一个容器中拥有大量图像会减慢您的速度，尤其是因为您可以对同一容器进行写入的频率受到限制。如果 2 个用户同时尝试将图像上传到同一个容器，这可能会特别成问题。因此，在这里为每个用户使用不同的容器是有意义的。

2)如果需要，**您可以使用伪文件夹**进行组织。您可以将您的图像（它是 rackspace 云中的一个对象）命名为“/user123/ducks/duck_small.jpg”。在这种情况下，图像的名称是整个字符串（包括斜杠）。

3）**在您的数据库中存储对图像的引用**。访问 cloudfiles 以列出容器的内容比简单地从数据库中获取图像的 cdn url 慢得多。

# jquery - JQuery - 使彩色条扩展为活动链接/悬停动画

> ID：11405164
> 
> 赞同：2
> 
> 时间：2012-07-10T00:38:43.130
> 
> 标签：jquery, hover

所以我在让这种效果发挥作用时遇到了一些麻烦。这是我正在尝试的图像。看起来很简单，但不确定要搜索什么。

活动链接是图像中的红色链接，当您将鼠标悬停在其他链接上时，我希望它展开。

[http://i.imgur.com/TjZK8.png](http://i.imgur.com/TjZK8.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:48:55.653

**演示：http:** [//jsfiddle.net/vChNU/](http://jsfiddle.net/vChNU/)

因此，我创建了一个您想要达到的效果的快速示例（根据我的理解）。

代码应该是不言自明的，但如果您需要更多解释，请询问。

也可以通过百分比来实现，这样就省去了计算父级高度的问题`li`。[http://jsfiddle.net/vChNU/1/](http://jsfiddle.net/vChNU/1/)

此外，您的问题表明您还想要一个活跃状态：http: [//jsfiddle.net/vChNU/2/](http://jsfiddle.net/vChNU/2/)

# google-maps-api-3 - 分组标记以便在地图上更好地查看

> ID：11405167
> 
> 赞同：0
> 
> 时间：2012-07-10T00:39:31.910
> 
> 标签：google-maps-api-3, google-maps-markers

我创建了一个函数，可以在 Google Maps 地图槽标记上显示我的所有照片。我对结果感到非常高兴，但问题是很多标记几乎都在同一个位置（见图#1）。我已经测试了 MarkerClustererPlus 解决方案，但是当我将其放大到最大时它并没有显示每个标记（参见图片 #2，地图上的位置与图片 #1 上的位置相同）。

如果有超过 10 个标记靠在一起，我想要一个显示单个标记的函数（参见图片 #3）。当我单击这些分组标记时，将出现一个信息窗口并显示属于分组标记的所有分组照片，如果您知道我的意思的话。我怎样才能完成这样的事情？

提前致谢。

图片1 ![很多标记在同一个地方](../Images/fb837c6d2e6cc09e4e7bde735464b570.png)

图片#2 ![MarkerClustererPlus 问题](../Images/a870a54724ae8216d7636114d1f5a06c.png)

图片#3 ![更好的分组标记](../Images/34f95bf86819d9eb151096a0c073abdb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:50:25.773

答案：[https](https://stackoverflow.com/a/10674273/1314132) ://stackoverflow.com/a/10674273/1314132与我认为的您正在寻找的内容很接近。它涵盖：

*   对标记进行排序并识别占据相同位置的标记。
*   将同一位置的标记合并为一个标记。
*   创建一个`InfoWindow`在表格中为共享相同位置的标记显示单独数据的单个。

我相信您只需要更改在同一位置识别标记的逻辑，以识别一组靠近的特定标记，然后修改`InfoWindow`内容以显示您的照片，而不是当前示例中显示的数据。进行这两项更改似乎相当简单。

## 更新原始答案以使用 Google Maps v3 的编辑：

**第 1 步：**对标记数据进行排序，以便识别占据相同位置的标记：

```
markerArray.sort( function( a, b ) {
    var aLat = a.Latitude, bLat = b.Latitude;               
    if ( aLat !== bLat ) { return aLat - bLat; }
    else { return a.Longitude - b.Longitude; }
}); 
```

**第 2 步：**添加一个新函数，为 的并置成员创建一个“特殊”标记`markerArray`：

```
var specialMarkers = null;

function createSpecialMarker( specialMarkers ) {
    var infoWinContent = "<table class='special-infowin-table'>";

    for ( var i = 0; i < specialMarkers.length; i++ ) {
        infoWinContent +=
            "<tr>" +
            "<td class='special-table-label'>" +
                "Visited Place [" + (i+1) + "]" +
            "</td>" + 
            "<td class='special-table-cell'>" +
                specialMarkers[i].nome + " on : " + specialMarkers[i].data +
            "</td></tr>";
    }
    infoWinContent += "</table>";

    var mrkrData = specialMarkers[0];
    var point = new google.maps.LatLng( mrkrData.Latitude, mrkrData.Longitude );
    var marker = new google.maps.Marker( point );
    google.maps.event.addListener(marker, "click", function() {
        map.openInfoWindowHtml( point, infoWinContent );
    });

    return marker;
} 
```

**第 3 步：**遍历标记数据，识别具有纬度和经度在预定义范围内的位置的分组，*使用*特殊`margin`标记在地图上显示它们，并“正常”处理其他位置的所有标记数据：

```
var margin = 50;
for ( var i = 0; i < markerArray.length; i++ ) {
    var current = markerArray[i];
    var coLocated = null;
    var j = 0, matchWasFound = false;

    if ( i < ( markerArray.length - 1 ) ) {
        do {
            var next = markerArray[ i + ++j ];
            if ( next !== undefined ) {    //just to be safe
                if ( ( ( next.Latitude - current.Latitude ) < margin ) &&
                       ( ( next.Longitude - current.Longitude ) < margin ) )
                {
                    matchWasFound = true;
                    if ( coLocated === null ) {
                        coLocated = new Array( current, next);
                    }
                    else { coLocated.push( next ); }
                }
                else { matchWasFound = false; }
            }
            else { matchWasFound = false; }
        }
        while ( matchWasFound )

        if ( coLocated != null ) {
           var coLoMarker = createSpecialMarker( coLocated );
            if ( specialMarkers === null ) {
                specialMarkers = new Array( coLoMarker );
            }
            else {
                specialMarkers.push( coLoMarker );
            }

            i += --j;
            continue;
        }

        var point = new google.maps.LatLng(
            markerArray[i].Latitude, markerArray[i].Longitude);
        description = "Visited place : " + markerArray[i].name +
                        " on : " + markerArray[i].data;
         //Simply creates a regular marker:
        createMarker( point, i + 1, description );
    }
} 
```

这个想法是产生一个单一的标记，让 InfoWindow 传达关于位置的多条重要信息，最终得到如下所示的内容：

![在此处输入图像描述](../Images/45f15eb46535d1fa91dab48080898ef3.png)

我没有运行这个实际的代码，但它是基于每天运行的代码。这更旨在让您对该方法有一个相当详细的了解，并分享一段代码，这些代码应该让您非常接近可用的解决方案，但要了解它可能需要一些调整和调试。

# iphone - 从循环中添加多个 MKPolyline

> ID：11405173
> 
> 赞同：0
> 
> 时间：2012-07-10T00:40:22.453
> 
> 标签：iphone, mkmapview, mapkit

这里发生了奇怪的事情。

我有一个 FOR 循环，它试图从 NSArray 中的位置添加多条折线。

循环中使用的代码是这样的

```
 CLLocationCoordinate2D coordinateArray[2];
    float lat1 = locationDep.coordinate.latitude;
    float lat2 = locationDest.coordinate.latitude;

    float lon1 = locationDep.coordinate.longitude;
    float lon2 = locationDest.coordinate.longitude;

    coordinateArray[0] = CLLocationCoordinate2DMake(lat1, lon1); 
    coordinateArray[1] = CLLocationCoordinate2DMake(lat2, lon2);

    MKPolyline *myPolyline = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
    [self.worldMap addOverlay:myPolyline]; 
```

我已经实现了委托方法如下：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay{
// create a polygonView using polygon_overlay object
MKPolylineView *polyLine = [[[MKPolylineView alloc] initWithPolyline:overlay] autorelease];

polyLine.lineWidth = 5;
// apply stroke & fill color
polyLine.strokeColor = [UIColor colorWithRed:86/255.0f green:156/255.0f blue:203/255.0f alpha:1.0f];

return polyLine;
} 
```

地图委托设置为自我......但是......

折线永远不会出现在地图上！

我使用 NSArray 中的相同位置来设置引脚注释，并且这些确实出现了，因此这些位置是有效的。

有任何想法吗？

谢谢！

# javascript - 在观看视频时将课程应用于身体

> ID：11405175
> 
> 赞同：0
> 
> 时间：2012-07-10T00:40:23.693
> 
> 标签：javascript, jquery

有没有办法先检查浏览器是否是 webkit，然后在用户单击视频播放时将类应用于正文？如果浏览器是 webkit，我想应用 .blur 类，如果浏览器不是 webkit，我想添加一个深色覆盖，以便用户可以专注于视频。除了应用模糊之外，我不知道如何做到这一点，呵呵。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:44:14.300

```
if (/webkit/i.test(navigator.userAgent)) {
    document.body.className += ' blur';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:46:55.807

jQuery 提供了[jQuery.browser](http://api.jquery.com/jQuery.browser/)，它为您提供有关正在访问页面的浏览器的信息，包括渲染引擎。

至于检测用户何时播放视频，这取决于您的视频是如何嵌入的。如果您使用 HTML5 并使用`<video>`标签，HTML5 会提供播放、暂停、搜索等事件。请参见此处：[http ://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T00:48:04.340

也许你可以使用 navigator.userAgent 的值来 check.like：

```
var UA = navigator.userAgent.toLowerCase();
function testWebkit(){
    if(/webkit/i.test(UA))
        return true;
    else
        return false;
} 
```

# java - 哪些代码用于绘制单个对象，而不使用 repaint() 方法来更新整个屏幕？

> ID：11405178
> 
> 赞同：3
> 
> 时间：2012-07-10T00:40:51.067
> 
> 标签：java, swing, graphics

我正在创建一个视频游戏，当我调用 repaint() 方法时，整个屏幕会更新并不规则地闪烁。通过在这行代码中指定重绘的内容（charRect，它是一个 Rectangle 对象），我稍微解决了这个问题： repaint(charRect.x, charRect.y, 20, 32); 整个屏幕停止闪烁，但这个角色却出奇地小故障。我只需要帮助让动画从移动（a 和 d）和跳跃（w）顺利运行。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.util.*;
import java.io.*;
import java.net.*;
import java.lang.*;
import static java.lang.Math.*;
import static java.lang.System.out;
import java.util.Random.*;
import javax.swing.JApplet;
import java.awt.Graphics;

public class UltimaBlade extends JApplet implements KeyListener
{
public final int        WIDTH = 900;
public final int        HEIGHT = 650;

public  int             score = 0;
private boolean         jumping = false;
private boolean         moveRight = false;
private boolean         moveLeft = false;
private boolean         jumpRight = false;
private boolean         jumpLeft = false;
private boolean         moveRightWhileJumping = false;
private boolean         moveLeftWhileJumping = false;

public  JFrame          JTitle = new JFrame("UltimaBlade"); 
        Image           characterImg = null;
        Image           blockImg1 = null;
        Image           floorImg1 = null;
        Image           wallImg1 = null;
             JLabel          scoreLabel = new JLabel("Score: " + score);

        Rectangle       charRect = new Rectangle(25, 450, 20, 32);
        Rectangle       blockRect1 = new Rectangle(25, 482, 30, 30);
        Rectangle       floorRect1 = new Rectangle(25, 482, 200, 1);CHANGE BACK TO 30
        Rectangle       wallRect1 = new Rectangle(55, 490, 1, 30);
        //Rectangle       tempGhost = new Rectangle(charRect.x, charRect.y, 20, 32);

public  JMenuBar        mb = new JMenuBar();
public  JMenu           menuFile = new JMenu("File");
public  JMenuItem       menuItemSave = new JMenuItem("Save");
public  JMenuItem       menuItemLoad = new JMenuItem("Load");
        Container       cont;
        Runner          runner;

public void init()
{
    setSize(WIDTH, HEIGHT);

    JTitle.setJMenuBar(mb);
    menuFile.add(menuItemSave);
    menuFile.add(menuItemLoad);
    mb.add(menuFile);
    JTitle.getContentPane().setLayout(new BorderLayout());
    menuItemSave.addActionListener(new ListenMenuSave());
    setJMenuBar(mb);
    new UltimaBlade();
}

public UltimaBlade()
{
    setLayout(null);
    setSize(WIDTH, HEIGHT);
    setVisible(true);

    cont = getContentPane();
    cont.setLayout(null);
    addKeyListener(this);
    cont.setBackground(Color.WHITE);

    cont.add(scoreLabel);
    scoreLabel.setBounds(50, 50, 100, 30);
    scoreLabel.setForeground(Color.BLACK);
    cont.setLayout(null);

    repaint();
    cont.validate();

    runner = new Runner();
    runner.start();
    setContentPane(cont);
}

public class ListenMenuSave implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        new Save();
    }
}

public void paint(Graphics g)
{
    super.paint(g);

    try
    {
        URL     url1 = this.getClass().getResource("character.gif");       //Character
                characterImg = Toolkit.getDefaultToolkit().getImage(url1);
        URL     url2 = this.getClass().getResource("block.gif");           //Block
                blockImg1 = Toolkit.getDefaultToolkit().getImage(url2);
        URL     url3 = this.getClass().getResource("floor_line.gif");      //Floor Line
                floorImg1 = Toolkit.getDefaultToolkit().getImage(url3);
        URL     url4 = this.getClass().getResource("wall_line.gif");      //Wall Line
                wallImg1 = Toolkit.getDefaultToolkit().getImage(url4);
    }
    catch(Exception e)
    {

    }

    g.drawImage(characterImg, charRect.x, charRect.y, this);
    g.drawImage(floorImg1, floorRect1.x, floorRect1.y, this);
    g.drawImage(blockImg1, blockRect1.x, blockRect1.y, this);
    g.drawImage(wallImg1, wallRect1.x, wallRect1.y, this);
}

public void keyPressed(KeyEvent e)
{
    if(e.getKeyChar() == 'd' || e.getKeyChar() == 'D')
    {
        moveRight = true;
        if(jumping)
            moveRightWhileJumping = true;
    }
    if(e.getKeyChar() == 'a' || e.getKeyChar() == 'A')
    {
        moveLeft = true;
        if(jumping)
            moveLeftWhileJumping = true;
    }
}

public void keyReleased(KeyEvent e)
{
    if(e.getKeyChar() == 'd' || e.getKeyChar() == 'D')
    {
        moveRight = false;
        if(!jumping)
            moveRightWhileJumping = false;
    }
    if(e.getKeyChar() == 'a' || e.getKeyChar() == 'A')
    {
        moveLeft = false;
        if(!jumping)
            moveLeftWhileJumping = false;
    }
}

public void keyTyped(KeyEvent e)
{
    if(e.getKeyChar() == 'w' || e.getKeyChar() == 'W')
    {
        jumping = true;
    }
}

public class Runner extends Thread// implements Runnable
{
    public void run()
    {
        while(true)
        {
            try
            {
                int     j = 5;     //Beginning velocity
                double  t = 0;
                double  sum = j/5;
                while(jumping)
                {
                    repaint(charRect.x, charRect.y, 20, 32);
                    cont.validate();
                    int jump = (int)((-4.9 * ((t * t)/10)) + (j * t));
                    if(moveRightWhileJumping)
                    {
                        charRect.x = charRect.x + j; // Move Right while jumping.
                        if(charRect.intersects(wallRect1))
                        {
                            charRect.x = wallRect1.x - 21;
                            moveRightWhileJumping = false;
                        }
                    }
                    if(moveLeftWhileJumping)
                    {
                        charRect.x = charRect.x - j;  //Move Left while jumping.
                        if(charRect.intersects(wallRect1))
                        {
                            charRect.x = wallRect1.x + 1;
                            moveLeftWhileJumping = false;
                        }
                    }
                    if(jump > 0)
                    {
                        charRect.y = charRect.y - Math.abs(jump);
                        if(charRect.intersects(floorRect1))
                        {
                            charRect.y = floorRect1.y - 32;
                            jumping = false;
                            moveRightWhileJumping = false;
                            moveLeftWhileJumping = false;
                            break;
                        }
                    }
                    else if(jump < 0)
                    {
                        charRect.y = charRect.y + Math.abs(jump);
                        if(charRect.intersects(floorRect1))
                        {
                            charRect.y = floorRect1.y - 32;
                            jumping = false;
                            moveRightWhileJumping = false;
                            moveLeftWhileJumping = false;
                            break;
                        }
                    }
                    else
                    {
                        if(charRect.intersects(floorRect1))
                        {
                            charRect.y = floorRect1.y - 32;
                            jumping = false;
                            moveRightWhileJumping = false;
                            moveLeftWhileJumping = false;
                            break;
                        }
                    }

                    t++;
                    Thread.sleep(30);
                }

                while(moveLeft)
                {
                    repaint(charRect.x, charRect.y, 20, 32);
                    cont.validate();
                    charRect.x = charRect.x - j;  //Move Left speed.
                    if(charRect.intersects(wallRect1))
                    {
                        charRect.x = wallRect1.x + 1;
                    }
                    if(charRect.intersects(floorRect1))
                    {
                        charRect.y = floorRect1.y - 32;
                        jumping = false;
                        moveRightWhileJumping = false;
                        moveLeftWhileJumping = false;
                        break;
                    }
                    t++;
                    Thread.sleep(30);
                }

                while(moveRight)
                {
                    repaint(charRect.x, charRect.y, 20, 32);
                    cont.validate();
                    charRect.x = charRect.x + j;  //Move Left speed.
                    if(charRect.intersects(wallRect1))
                    {
                        charRect.x = wallRect1.x + 1;
                    }
                    if(charRect.intersects(floorRect1))
                    {
                        charRect.y = floorRect1.y - 32;
                        jumping = false;
                        moveRightWhileJumping = false;
                        moveLeftWhileJumping = false;
                        break;
                    }
                    t++;
                    Thread.sleep(30);
                }
            }
            catch(Exception e)
            {
                break;
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:42:39.447

您的主要问题之一是您直接在`paint(...)`JApplet 方法本身中进行绘制，而不是在`paintComponent(...)`applet 所持有的 JPanel 或 JCompnent 方法中进行绘制。如果您使用后者，您将受益于 Swing 的默认双缓冲，而这会带来很大的不同。此外，您可以使用其中一个`repaint(...)`重载重绘 GUI 的较小矩形，但这是次要的。首先你应该解决你缺乏双缓冲的问题。

请从本教程开始学习基础知识：[课程：执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)

然后继续阅读本文，了解有关在 Swing 中绘图的更多高级信息：[在 AWT 和 Swing 中绘图](http://www.oracle.com/technetwork/java/painting-140037.html)

**Edit**
Also, you should never read in files from within the `paint(...)` or `paintComponent(...)` methods as this will slow painting down and thereby reduce perceived responsiveness of your GUI several fold. Why not simply read in the files once and on applet startup, and then store their contents into a variable?

# javascript - jQuery 或 Javascript：按字符偏移和长度查找 HTML 文本

> ID：11405181
> 
> 赞同：1
> 
> 时间：2012-07-10T00:41:33.733
> 
> 标签：javascript, jquery, html, jquery-selectors

我有一些 JSON： `{"div_id":"pie1","str_offset":"5","str_length":"6"}`

我有以下 HTML：

```
<div id="pie1">I like pie!</div> 
```

我希望能够`<span>`在匹配文本周围包裹一个元素，即从文本节点开头开始的 5 个字符长的 6 个文本字符。所以在这个例子中，它将包裹“e pie！”。理想情况下，该解决方案将忽略任何其他标签的存在，例如`I like <b>pie!</b>`仅计算文本字符。

如果类似 jQuery 的选择器不可行，只需找到 str_offset 的位置，编写 HTML，然后找到结束位置并关闭标签即可。

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:37:11.023

从我们假设 div 不包含任何子元素的简单示例开始，您可以这样做：

```
function wrapText(id, offset, length){
    $("#"+id).html(function(i,oldHtml) {
        return oldHtml.substr(0,offset) +
               "<span>" +
               oldHtml.substr(offset, length) +
               "</span>" +
               oldHtml.substr(offset + length);
    });
}
wrapText("pie1",5,6);   // obviously use values from your JSON here 
```

演示：http: [//jsfiddle.net/TfAAC/](http://jsfiddle.net/TfAAC/)

当您使用回调函数调用 jQuery 的[`.html()`方法](http://api.jquery.com/html/)时，jQuery 使用当前的 html 文本调用您的函数并返回新值。

如果 div 中有子元素，则以下更复杂的代码“有效”，但在插入 span 标签时可能会创建重叠标签：

```
function wrapText(id, offset, length){
    $("#"+id).html(function(i,oldHtml) {
        var i, c, spanStart, spanStop;
        for (i = 0, c = 0; i < oldHtml.length; i++) {
            if (c === offset)
               spanStart = i;
            else if (c === offset+length) {
               spanStop = i;
               break;
            }
            if (oldHtml.charAt(i) === "<"){
               while (++i < oldHtml.length && oldHtml.charAt(i) != ">" && oldHtml.charAt(i+1) != "<");
            }else
               c++;
        }        
        if (spanStart === undefined)
           return oldHtml;
        if (spanStop === undefined)
           spanStop = oldHtml.length;
        return oldHtml.slice(0, spanStart) +
               "<span>" + oldHtml.slice(spanStart, spanStop) + "</span>" +
               oldHtml.slice(spanStop);
    });
} 
```

您可以在这个演示中看到：http: [//jsfiddle.net/TfAAC/1/](http://jsfiddle.net/TfAAC/1/)上面生成的 html 在“正确”的地方有 span 标签，但是当浏览器实际显示它时它不喜欢它（至少，Firefox 没有）因为重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:15:39.550

看看这段代码：http: [//jsfiddle.net/5J93b/4/](http://jsfiddle.net/5J93b/4/)

用于`wrapText(elem, 5, 6);`从位置 5 开始换行六个字符。

用于`wrapText(elem, elem.textContent.length - 6, 6);`换行最后六个字符。

它将忽略 HTML 标签（副作用：最后不会出现 HTML 标签）。

这是代码：

```
function wrapText(elem, start, length) {
    var before = elem.textContent.substr(0, start);
    var after = elem.textContent.substr(start + length, elem.textContent.length - length);
    var letters = elem.textContent.substr(start, length);
    elem.innerHTML = '';
    var text1=document.createTextNode(before);
    var text2=document.createElement('span');
    text2.style.backgroundColor='red';
    text2.innerHTML = letters;
    var text3=document.createTextNode(after);
    elem.appendChild(text1);
    elem.appendChild(text2);
    elem.appendChild(text3);
} 
```

# javascript - 如何从同一对象中的不同函数调用对象定义函数？

> ID：11405186
> 
> 赞同：0
> 
> 时间：2012-07-10T00:42:01.040
> 
> 标签：javascript, function, object, google-maps-api-3

我正在使用 javascript 为小型个人项目制作自定义对象，主要用于平板电脑（但也用于笔记本电脑）。该对象处理谷歌地图、gps 跟踪以及其他程序。在对象内部，我定义了要从对象（`enableGps, disableGps`）外部调用的耦合函数。在 enableGps 内部，我开始跟踪，同时使用外部 error_handler 和内部对象函数 ( `this.handleGps`) 处理 gps 数据（纬度、经度、精度等）。在`this.handleGps`我尝试调用`this.updateGpsMarker`函数来更新地图上的实际标记但抛出异常。

> 未捕获的类型错误：对象 [对象窗口] 没有方法“updateGpsMarker”

我该如何`this.updateGpsMarker`打电话`this.handleGps`？请注意，我需要`this.updateGpsMarker`作为从外部调用的函数可用（长解释）我将抛出代码只是为了更清楚地说明我想要做什么。

```
function RouteAssistant(mapCanvas, mapOptions)
{
    // Google mapping and geocoding
    this.map = new google.maps.Map(mapCanvas, mapOptions);
    this.geo = new google.maps.Geocoder();
    this.gpsMarker = null;

    this.updateGpsMarker = function(lat, lon)
    {
        console.log("Updating GPS marker");
        if (this.gpsMarker == null)
        {
            console.log("GPS Marker not created. Creating GPS marker at " + lat + "," + lon);
            this.gpsMarker = new google.maps.Marker(
            {
                position: new google.maps.LatLng(lat,lon),
                map: this.map,
                title: "I am here!"
            });
            this.map.setCenter(new google.maps.LatLng(lat,lon));
        }
        else
        {
            console.log("GPS Marker created. Updating GPS marker to " + lat + "," + lon);
            this.gpsMarker.setPosition(new google.maps.LatLng(lat,lon));
        }
    }

    // GPS and tracking
    this.gpsProcess = null;
    this.enableGps = function (handle_errors)
    {
        if (this.gpsProcess == null) {
            console.log("Enabling GPS");
            this.gpsProcess = navigator.geolocation.watchPosition(this.handleGps, handle_errors);
        }
    };
    this.disableGps = function()
    {
        if (this.gpsProcess != null)
        {
            console.log("Disabling GPS");
            navigator.geolocation.clearWatch(this.gpsProcess);
            this.gpsProcess = null;
        }
    };
    this.handleGps = function(position)
    {
        this.updateGpsMarker(position.coords.latitude, position.coords.longitude);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:16:51.837

可能您可以使用诸如显示模数模式之类的东西来创建一个干净的对象，然后将所有功能放入其中。例如

```
 var routeAssistant = function(mapCanvas, mapOptions) {

     var map = new google.maps.Map(mapCanvas, mapOptions).
     updateGpsMarker = function(lat, long) {
         //You can directly access 'map' here.
     };
     return {
      updateGpsMarker : updateGpsMarker
     }; 
 }; 
```

然后你可以通过这样做来使用它

```
 var myObject = new routeAssistant(mapCanvas, mapOptions);
  myObject.updateGpsMarker(latitude,longtitude); 
```

# android - Android 的 build.xml 中的“gettarget”宏定义在哪里

> ID：11405187
> 
> 赞同：2
> 
> 时间：2012-07-10T00:42:01.860
> 
> 标签：android, macros, build.xml

因此，Google 继续发布了对 Android 在 R20 中使用的 build.xml 的更改，删除了我在项目中依赖的类路径变量。现在看起来它正在使用：

```
project.target.class.path 
```

所以我在我的 build.xml 中使用它，并在我的机器上安装了最新的 SDK 工具，我的一切都很好......但我的远程 Jenkins 服务器不喜欢。为了解决两端的问题，我想我只需从 Android build.xml 中提取设置此属性的代码，然后设置我自己的属性。Android build.xml 中似乎设置此属性的代码位是 -build-setup 目标中的这个块：

```
<gettarget
     androidJarFileOut="project.target.android.jar"
     androidAidlFileOut="project.target.framework.aidl"
     bootClassPathOut="project.target.class.path"
     targetApiOut="project.target.apilevel"
     minSdkVersionOut="project.minSdkVersion" /> 
```

我假设这是一个宏，但是当我在 IntelliJ 中查看它时，整个代码块在暴风雪中发出的红光比鲁道夫的鼻子还要亮。这个东西是在哪里定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:46:15.760

gettarget 是一个 Android ant 任务，com.android.ant.GetTargetTask。

我的猜测是 gettarget 任务设置了名称作为参数传入的所有属性的值。

# android - Android 更新 lib-project 构建文件创建 apk 而不是 jar

> ID：11405195
> 
> 赞同：0
> 
> 时间：2012-07-10T00:43:02.630
> 
> 标签：android, ant, build

我最近升级到了 Android SDK Tools Ref 20、Platform-tools rev 12、Android 4.1 (API 16)。当我为我的项目执行“Android update lib-project”，然后使用“ant debug”或“ant release”时，会为该项目创建一个 apk 文件。以前的版本创建了一个 jar 文件（这是我想要的）。这是中断还是这是新的预期行为。

谢谢——丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:10:13.430

我可能对您的问题没有确切的答案，但我可以告诉您，我尝试使用 ADT20 构建库项目并且输出为`classes.jar`. 所以我没有看到任何问题。我尝试了一个现有的项目。

您是否正在创建一个新的库项目然后尝试它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:11:54.670

问题是当您执行 android create lib-project 时，它会添加`android.library=true`到文件中`project.properties`

如果你这样做了，那么 android update lib-project，由于一个奇怪的原因，`android.library=true`它被删除了（参见[Android 问题 38270](https://code.google.com/p/android/issues/detail?id=38270#c1)）

解决方案：

移动到android更新项目，并确保你有project.properties而不删除它

# javascript - 仅在有连接时更新消息

> ID：11405196
> 
> 赞同：1
> 
> 时间：2012-07-10T00:43:03.357
> 
> 标签：javascript, jquery, ajax

我建立了一个显示消息的站点，因此 msgloader.js 每 10 秒从管理员那里更新一次消息。客户端不断地在屏幕上显示该站点。

问题是有时互联网连接不太好，显示断开连接，msgloader.js 仍然更新消息，最后屏幕冻结（我知道的原因是网站上也有时钟，时钟从本地机器获取时间，它只是一次冻结，直到我们刷新页面，这是一个问题）。

我怀疑这个冻结问题是因为运行的脚本太多并且机器内存已被占用。

回到问题，有什么办法可以将以下代码设置为在有互联网连接时每 10 秒更新一次消息，否则在没有互联网连接时每隔一小时/两小时更新一次消息。

任何帮助表示赞赏。谢谢。

```
--------------------------------------------------------------------
Update the data for the static sections
--------------------------------------------------------------------
*/
function updateSection(sect) 
{   
    setTimeout('updateSection(' + sect + ')', 10000);

    //alert('updateSection: ' + sect);
    var ajax = new sack();
    ajax.requestFile = 'ajax/getMessages.php?section='+sect;
    ajax.method = 'post';
    /*ajax.onError = whenError;*/
    ajax.onCompletion = whenComplete;
    ajax.runAJAX();

/*  function whenError() 
    {
        alert('Could not return getMessages values. <br />Please notify the system administrator.');
    }*/

    function whenComplete() 
    {
        var messages = ajax.response;

        var messages1 = messages.split('---');

        var num_messages    = messages1[0];
        //alert('Num Lines: ' + num_messages );
        var messages_list   = messages1[1];
        //alert('MESSAGES: '+messages);
        var msg_data_array  = messages_list.split('::');

        var i=0;            
        switch(sect)
        {
            case 1:

                for(i=0;i<=num_messages;i++)
                {

                    var j = i + 1;
                    icon_to_use = 'icon'+j;

                    // Set icon class
                    var icon = document.getElementById('icon_' + sect + '_' + j);
                    icon_to_use.className = 'icon_pointer';

                    // Set message text
                    // -------------------------------------------                  
                    var msgtext_array = msg_data_array[i].split('##');

                    // Here's the title
                    // -------------------------------------------
                    var msgtext_1a = msgtext_array[1];

                    // Here's the text
                    // -------------------------------------------
                    var msgtext_1 = msgtext_array[2];

                    // Set the title space
                    // -------------------------------------------
                    var msg_1a = document.getElementById('msg_text_' + sect + '_' + j + 'a');

                    // Set the text space
                    // -------------------------------------------
                    var msg_1 = document.getElementById('msg_text_' + sect + '_' + j);

                    // Write in the title
                    // -------------------------------------------                      
                    msg_1a.innerHTML = msgtext_1a;
                     msg_1.innerHTML = "<img src='[url_of_image]' /> " + msgtext_1;
                    // Write in the text
                    // -------------------------------------------                      
                    msg_1.innerHTML = (msgtext_1) ? separator + msgtext_1 : msgtext_1;

                    //msg_1a.style.borderBottom="2px solid white";
                    msg_1a.style.borderBottom="2px solid white";
                    msg_1.style.borderBottom="2px solid white";

                }   break;
            default:
                break;          
        }

        // DEBUG
        if(debug)
        {
            debugReport
            (
                'updateSection():ID: '+msg_id+
                '<br />'+'updateSection():TIMEOUT: '+timeout+
                '<br />'+'ROTATE: '+rotate
            );
        } 
        else 
        {
            debugReset();
        }
    }
}
/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:48:41.113

尝试使用这个，

```
var online = navigator.onLine; 
```

现在你可以这样做，

```
if(online){
    alert('Connection is good');
}
else{
    alert('There is no internet connection');
} 
```

**更新：**

试着把警报放在这里，

```
if(online){
    setTimeout('updateSection(' + sect + ')', 10000);

    //alert('updateSection: ' + sect);
    var ajax = new sack();
    ajax.requestFile = 'ajax/getMessages.php?section=1';
    ajax.method = 'post';
    /*ajax.onError = whenError;*/
    ajax.onCompletion = whenComplete;
    ajax.runAJAX();
}
else{
    alert('There is no internet connection');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T00:55:06.883

如果我对您的理解正确，您可以执行以下操作：

每次在 ajax 请求上发生 onerror 事件时，都会增加一个计数器。在连续失败的设定限制/在一段时间内失败后，您可以更改超时的长度。

```
var timeoutLength = 10000
setTimeout('updateSection(' + sect + ')', timeoutLength); 
```

ajax 请求失败后更改 timeoutLength，IE 没有互联网连接。

**编辑**

```
var errorCount = 0;

ajax.onError = whenError;

function whenError() {
  errorCount++
  if(errorCount < 5) {
    timeoutLength = 3600000
  }
}

function whenComplete() {
   errorCount = 0
   ...
} 
```

这需要连续 5 个错误才能假设 Internet 已关闭。你可能应该玩弄那个。但这应该向您展示总体思路。

# xml - 具有不同命名空间的 XML 反序列化

> ID：11405197
> 
> 赞同：1
> 
> 时间：2012-07-10T00:43:35.760
> 
> 标签：xml, serialization, xml-deserialization

我正在尝试通过 xml 反序列化向 xml 提供一个 java web 服务，但似乎我拥有的 xml 文件缺少名称空间。这是从 WSDL 生成的 C# 类：

```
[XmlTypeAttribute(Namespace="http://mynamespace.com")]
public class Customer {

    [XmlElementAttribute(IsNullable=true)]
    public string customerNo {
        get; set;
    }

    [XmlElementAttribute(IsNullable=true)]
    public string customerType {
        get; set;
    }
} 
```

看到命名空间定义了吗？实际的 XML 文件缺少命名空间声明，如下所示：

```
<?xml version="1.0"?>
<Customer>
    <customerNumber>1234</customerNumber>
    <customerType />
</CreditCard> 
```

Xml 反序列化器反序列化根对象，但所有属性均为空。我设法通过删除 XmlTypeAttribute 或通过添加命名空间来调整 xml 文件来使其工作：

```
<xml version="1.0"?>
<Customer>
    <customerNumber xmlns="http://mynamespace.com">1234</creditCardNo>
    <customerType xsi:nil="true" xmlns="http://mynamespace.com" />
</Customer> 
```

问题是实际的 xml 文件很大，我不想手动执行，也不想删除该属性。让它工作的最简单方法是什么？使用适当的 xmlns 属性重新生成整个文档并使用它来反序列化？

# symfony - Symfony 2 - 无法清除缓存 - 您无法创建非活动范围（“请求”）的服务（“请求”）

> ID：11405202
> 
> 赞同：20
> 
> 时间：2012-07-10T00:44:29.240
> 
> 标签：symfony

每当我尝试清除控制台上的缓存时，都会出现以下错误：

```
 [Symfony\Component\DependencyInjection\Exception\InactiveScopeException]   
  You cannot create a service ("request") of an inactive scope ("request"). 
```

有谁之前经历过这个吗？谢谢。

**编辑：代码示例：**

```
//accessing request object
namespace Greg\TestBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\DependencyInjection\ContainerInterface;
use HvH\APIschemaBundle\Controller\Validation;
use HvH\APIschemaBundle\Controller\Helpers;

//FOSRestBundle
use FOS\RestBundle\View\View;

class TestController extends Controller
{
    public function testAction(Request $request) 
    {                       
        //get any query strings
        $query_strings = $request->query->all();
        return($query_strings);
    }
} 
```

**XML** 不确定您要查找的文件...

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-03T04:08:54.633

例如，要在 CLI 中手动创建范围“请求”，您可以重载**AppKernel类中的****initializeContainer**内核方法，只需执行以下操作：

 **```
class AppKernel extends Kernel {
    public function registerBundles() {
        // ...
    }

    public function registerContainerConfiguration(LoaderInterface $loader) {
        // ...
    }

    protected function initializeContainer() {
        parent::initializeContainer();
        if (PHP_SAPI == 'cli') {
            $this->getContainer()->enterScope('request');
            $this->getContainer()->set('request', new \Symfony\Component\HttpFoundation\Request(), 'request');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T22:09:26.283

通过删除构造函数中的请求对象修复了这个问题。由于 CLI 是无头的，因此没有“请求”对象，除非它是手动创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:21:22.850

试试运行这个`rm -rf app/cache/*`……这个方法只是linux的删除方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T20:32:22.360

为了扩展[Шатов Максим](https://stackoverflow.com/users/1737151/%D0%A8%D0%B0%D1%82%D0%BE%D0%B2-%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC)的回答，我创建了一个对站点根目录的请求，以便资产树枝资产过滤器（css​​rewrite）能够解析资产网址：

```
class AppKernel extends Kernel
{
    public function registerBundles()
    {
        // ...
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        // ...
    }

    protected function initializeContainer()
    {
        parent::initializeContainer();
        if (PHP_SAPI == 'cli') {
            $request = new Request();
            $request->create('/');
            $this->getContainer()->enterScope('request');
            $this->getContainer()->set('request', $request, 'request');
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-08T11:43:55.130

我遇到了这个问题，但我没有对自己的服务中的请求做任何特别的事情——看起来这个错误与 Symfony 核心中的请求服务本身有关。

我解决了这个问题，它`composer install`没有改变供应商（已经安装）但确实`Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::buildBootstrap`作为副作用运行，这似乎解决了问题。**

# php - Codeigniter 上传库获取拇指文件名

> ID：11405204
> 
> 赞同：2
> 
> 时间：2012-07-10T00:44:30.477
> 
> 标签：php, codeigniter, file-upload

我找不到任何关于此的文档。我正在上传图片并使用

```
$config['create_thumb'] = TRUE; 
```

创建拇指并保留原始图像。

有没有办法获取拇指图像的文件名？`_thumb`会自动添加到缩略图的名称中，但没有提取全名的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T08:35:36.300

确实有一种更简单的方法可以做到这一点：

```
if ($this->upload->do_upload())  // If file was uploaded
{           
    $data = $this->upload->data(); // Returns information about your uploaded file.
    $thumbnail = $data['raw_name'].'_thumb'.$data['file_ext']; // Here it is
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T06:13:41.770

CodeIgniter 不提供任何函数来提取缩略图名称。它将在您的文件名中添加**_thumb**。如果您想编写自定义函数来获取缩略图名称，请使用它。

```
function generate_thumb($filename, $path = '')
{
    // if path is not given use default path //
    if (!$path) {
        $path = FCPATH . 'somedir' . DIRECTORY_SEPARATOR . 'images' . DIRECTORY_SEPARATOR;
    }

    $config['image_library'] = 'gd2';
    $config['source_image'] = $path . $filename;
    $config['create_thumb'] = TRUE;
    $config['maintain_ratio'] = TRUE;
    $config['width'] = 75;
    $config['height'] = 50;

    $this->load->library('image_lib', $config);

    if (!$this->image_lib->resize()) {
        echo $this->image_lib->display_errors();
        return FALSE;
    }
    // get file extension //
    preg_match('/(?<extension>\.\w+)$/im', $filename, $matches);
    $extension = $matches['extension'];
    // thumbnail //
    $thumbnail = preg_replace('/(\.\w+)$/im', '', $filename) . '_thumb' . $extension;
    return $thumbnail;
} 
```

输入 ：

```
echo generate_thumb('someimage.jpg');
echo generate_thumb('other_image.png', FCPATH . 'dirname' . DIRECTORY_SEPARATOR); 
```

输出 ：

```
someimage_thumb.jpg
other_image_thumb.png 
```

希望这对您有所帮助。谢谢！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T08:56:48.750

```
function general_thumbnail_image($source_image_path, $width, $height){

    $thumbnail_config['image_library'] = 'gd2';
    $thumbnail_config['source_image'] = $source_image_path;
    $thumbnail_config['thumb_marker'] = '_'.$width.'x'.$height;
    $thumbnail_config['create_thumb'] = TRUE;
    $thumbnail_config['maintain_ratio'] = TRUE;
    $thumbnail_config['width'] = $width;
    $thumbnail_config['height'] = $height;

    $this->load->library('image_lib', $thumbnail_config);

    if($this->image_lib->resize()){
        $result['status'] = True;

        //If you need complete base path of the thumbnail.
        $result['thumbnail_base_path'] = $this->image_lib->full_dst_path;

        //If you just need name of the thumbnail.
        $source_image_name = $this->image_lib->source_image;
        $extension = strrchr($source_image_name , '.');
        $name = substr($source_image_name , 0, -strlen($extension));
        $result['thumbnail_image_name'] = $name.$config['thumb_marker'].$extension;

        //If you need path similar to source image path.
        $source_image_path = $source_image_path;
        $extension = strrchr($source_image_path , '.');
        $name = substr($source_image_path , 0, -strlen($extension));
        $result['thumbnail_image_path'] = $name.$config['thumb_marker'].$extension;

    }
    else{
        $result['status'] = false;
        $result['error'] = $this->image_lib->display_errors('', '');
    }
    return $result;
} 
```

调用函数。

```
$thumbnail_result = $this->generate_thumbnail_image('./assests/images/apple.jpg', 180, 180);
print_r($thumbnail_result); 
```

输出将如下所示：

```
 Array
   (
       [status] => 1
       [thumbnail_base_path] => D:/xampp/htdocs/project_name/assets/images/apple_180x180.jpg
       [thumbnail_image_name] => apple_180x180.jpg
       [thumbnail_image_path] => ./assets/images/apple_180x180.jpg 
   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:10:27.077

我认为您应该创建一个函数来生成拇指图像，如下所示：

```
 function generateThumb($fileName) {
    $config['image_library'] = 'gd2';
    $config['source_image'] = './upload/images/clca/' . $fileName;
    $config['create_thumb'] = TRUE;
    $config['maintain_ratio'] = TRUE;
    $config['width'] = 90;
    $config['height'] = 90;
    var file = "";
    $this->load->library('image_lib', $config);
    if(!$this->image_lib->resize()) {
        echo $this->image_lib->display_errors();
    } else {
        // Get File Name
        var file = $fileName."_thumb";
    }        
} 
```

要调用该函数，首先您必须上传文件，获取文件名并调用该函数->`$this->generateThumb($file_resp['file_name']);`

在您上传的文件夹中，将有 2 张图像（原始图像和生成的带有 _thumb 后缀的拇指图像）

为了获取文件名，我使用“if”条件来确保生成拇指图像没有任何错误，然后加入$fileName+“_thumb”。我使用这种方式是因为我检查了`$this->image_lib`对象，但没有任何对生成的拇指图像文件名的引用。

编辑：

*   抱歉，我有点想念你关于获取拇指文件的文件名的问题，我已经编辑了我的帖子和代码:)

希望能帮助到你 ：）

# java - Java 编译器要求分号

> ID：11405206
> 
> 赞同：0
> 
> 时间：2012-07-10T00:44:43.567
> 
> 标签：java, android

我已经浏览了这段代码一段时间，计算了括号，所有这些东西。而且我找不到错误。我正在使用 Eclipse，为 Android 开发，它要求一个分号（评论，它靠近底部）。

```
package com.example.lesson1;

import android.app.Activity;
import android.os.Bundle;
import android.text.InputType;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.ToggleButton;

public class TextPlay extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.text);

        final Button checkCommand = (Button) findViewById(R.id.bResults);
        final ToggleButton passToggle = (ToggleButton) findViewById(R.id.tbPassword);
        final EditText input = (EditText) findViewById(R.id.etCommands);
        final TextView display = (TextView) findViewById(R.id.tvResults);

        passToggle.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if (passToggle.isChecked()) {
                    input.setInputType(InputType.TYPE_CLASS_TEXT
                            | InputType.TYPE_TEXT_VARIATION_PASSWORD);
                } else {
                    input.setInputType(InputType.TYPE_CLASS_TEXT);
                }

            }
        });
        checkCommand.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                String check = input.getText().toString();
                if (check.toLowerCase().equals("boss")) {
                    display.setText("Yup, pretty damn boss!");
                } else if (check.toLowerCase().equals("password")) {
                    display.setText("Simple");
                }
            }
        }); // here is the semicolon it wants
    }

} 
```

截图：[https ://dl.dropbox.com/u/986549/error.png](https://dl.dropbox.com/u/986549/error.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T00:54:44.340

尝试进入项目 > 清洁。看看这是否消除了错误。另外，保留分号。

# android - 适用于 Android 的 GPUimage 端口

> ID：11405207
> 
> 赞同：19
> 
> 时间：2012-07-10T00:45:41.673
> 
> 标签：android, gpuimage

有人把这个移植到`android`了吗？比着色器更多的框架。诸如将相机数据带入`openGL`. 我已经使用它了`iOS`，而且速度非常快。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T08:54:15.590

GPUImage for Android Idea来自：iOS GPUImage框架

目标是尽可能地拥有类似于 GPUImage 的东西。顶点着色器和片段着色器完全相同。这样就可以更轻松地将过滤器从 GPUImage iOS 移植到 Android。

链接如下：

[这个库是使用 Android OpenGL ES 2.0 实现的](https://github.com/CyberAgent/android-gpuimage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T04:39:42.963

您也可以使用 Gpuimage 进行视频预览和拍照，只需使用 ndk 编译 gpuimage 库中的 jni 文件，并将 YuvtoRgb 转换的方法放在 GPUImageLibrary for android 的 GPUImageNativeLibrary.java 类中。

```
public static void YUVtoRBGA(byte[] yuv, int width, int height, int[] rgb) {

final int frameSize = width * height;
    int r, g, b, y1192, y, i, uvp, u, v;
    for (int j = 0, yp = 0; j < height; j++) {
        uvp = frameSize + (j >> 1) * width;
        u = 0;
        v = 0;
        for (i = 0; i < width; i++, yp++) {
            y = (0xff & ((int) yuv[yp])) - 16;
            if (y < 0)
                y = 0;
            if ((i & 1) == 0) {
                v = (0xff & yuv[uvp++]) - 128;
                u = (0xff & yuv[uvp++]) - 128;
            }

            y1192 = 1192 * y;
            r = (y1192 + 1634 * v);
            g = (y1192 - 833 * v - 400 * u);
            b = (y1192 + 2066 * u);

            // Java's functions are faster then 'IFs'
            r = Math.max(0, Math.min(r, 262143));
            g = Math.max(0, Math.min(g, 262143));
            b = Math.max(0, Math.min(b, 262143));

            rgb[yp] = 0xff000000 | ((r << 6) & 0xff0000)
                    | ((g >> 2) & 0xff00) | ((b >> 10) & 0xff);
            // rgba, divide 2^10 ( >> 10)
            /*
             * rgb[yp] = 0xff000000 |((r << 14) & 0xff000000) | ((g << 6) &
             * 0xff0000) | ((b >> 2) | 0xff00);
             */
        }
    }
} 
```

用这个替换 GPUImageNativeLibrary.java 类的 public static Native YUVtoRBGA 中的方法，你就完成了。

# wpf - UIAutomation 测试以检测按钮是否设置为默认值

> ID：11405208
> 
> 赞同：0
> 
> 时间：2012-07-10T00:45:42.187
> 
> 标签：wpf, ui-automation

我一直在谷歌搜索这个问题的答案，但到目前为止还没有找到任何东西。

我正在为 WPF 应用程序编写许多 UIAutomation 测试，但我似乎无法确定按钮是否设置为默认值。

例如，假设您在表单上有多个文本框。当地址文本框具有焦点时，有一个查找按钮被设置为默认按钮（即，当您按 ENTER 时将调用您）。

我遇到的麻烦是如何确定当地址字段有焦点时 IsDefault 是否为真，当地址没有焦点时为假。

从我所见，似乎没有办法评估这个属性。

所以，任何帮助解决这个问题都会有帮助。

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:48:08.967

*   如果 TextBox 是标准的 WPF 控件“System.Windows.Controls.TextBox”，我认为您可以监视“TextPattern.TextSelectionChangedEvent”。

MSDN 中的详细信息 (TextPattern.TextSelectionChangedEvent) -> [http://msdn.microsoft.com/en-us/library/system.windows.automation.textpattern.textselectionchangedevent.aspx](http://msdn.microsoft.com/en-us/library/system.windows.automation.textpattern.textselectionchangedevent.aspx)

您可以通过 UISpy 检查和监视此事件： i. 在树中选择目标编辑控件。ii. 选择菜单“事件”->“配置”（选择范围和事件） iii．选择菜单“事件”->“开始”

当 EditBox 上发生一些事件时，UISpy 会将事件跟踪到输出面板。

*   如果这些编辑框不是标准的 WPF 控件“System.Windows.Controls.TextBox”。您可以尝试检查 UISpy 中的“ControlPatterns”并检查模式的相关信息。

# php - 根据所选链接在页面加载时显示特定幻灯片

> ID：11405209
> 
> 赞同：0
> 
> 时间：2012-07-10T00:45:48.427
> 
> 标签：php, jquery, slider

我正在使用一个 JQuery 滑块，它在一张幻灯片中显示 4 个相邻的 Wordpress 帖子。这些帖子正在显示用户可以单击以查看所选服务的服务。有 2 张幻灯片展示了这些服务 - 每张幻灯片中有 4 张。每个服务页面都包括顶部的滑块，其下方是服务描述。

[http://www.richmindonline.com/virtual/service-options/](http://www.richmindonline.com/virtual/service-options/)

问题是我希望首先加载第二张幻灯片 - 仅当用户在第二张幻灯片上选择产品时。

我该如何设置？这是加载滑块的脚本 - 它位于 Wordpress 的插件中。

如果需要，我将上传其他代码。

```
 //$upload_dir = wp_upload_dir();
$output = '<!--Automatic Image Slider w/ CSS & jQuery with some customization-->';
$output .='<script type="text/javascript">
$j = jQuery.noConflict();
$j(document).ready(function() {';

//Set Default State of each portfolio piece
if ($pagination_style != '3' ){
    $output .='$j("#rps .paging").show();';
}
$output .='$j("#rps .paging a:first").addClass("active");

$j(".slide").css({"width" : '.$width.'});
$j("#rps .window").css({"width" : '.($width).'});
$j("#rps .window").css({"height" : '.$height.'});

$j("#rps .col").css({"width" : '.(($width/$post_per_slide)-2).'});
$j("#rps .col").css({"height" : '.($height-4).'});
$j("#rps .col p.post-title span").css({"color" : "'.($post_title_color).'"});
$j("#rps .post-date").css({"top" : '.($height-20).'});
$j("#rps .post-date").css({"width" : '.(($width/$post_per_slide)-12).'});';

if (!empty($post_title_bg_color_js)){
    $output .='$j("#rps .col p.post-title").css({"background-color" : "'.($post_title_bg_color_js).'"});';
}

$output .='var imageWidth = $j("#rps .window").width();
//var imageSum = $j("#rps .slider div").size();
var imageReelWidth = imageWidth * '.$paging.';

//Adjust the image reel to its new size
$j("#rps .slider").css({"width" : imageReelWidth});

//Paging + Slider Function
rotate = function(){    
    var triggerID = $active.attr("rel") - 1; //Get number of times to slide
    //alert(triggerID);
    var sliderPosition = triggerID * imageWidth; //Determines the distance the image reel needs to slide

    $j("#rps .paging a").removeClass("active"); 
    $active.addClass("active");

    //Slider Animation
    $j("#rps .slider").stop(true,false).animate({ 
        left: -sliderPosition
    }, 500 );
}; 
var play;
//Rotation + Timing Event
rotateSwitch = function(){      
    play = setInterval(function(){ //Set timer - this will repeat itself every 3 seconds
        $active = $j("#rps .paging a.active").next();
        if ( $active.length === 0) { //If paging reaches the end...
            $active = $j("#rps .paging a:first"); //go back to first
        }
        rotate(); //Trigger the paging and slider function
    }, '.$slider_speed.');
};

rotateSwitch(); //Run function on launch

//On Hover
$j("#rps .slider a").hover(function() {
    clearInterval(play); //Stop the rotation
}, function() {
    rotateSwitch(); //Resume rotation
}); 

//On Click
$j("#rps .paging a").click(function() { 
    $active = $j(this); //Activate the clicked paging
    //Reset Timer
    clearInterval(play); //Stop the rotation
    rotate(); //Trigger rotation immediately
    rotateSwitch(); // Resume rotation
    return false; //Prevent browser jump to link anchor
}); 
});

</script>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:38:35.557

将此 jQuery 添加到您的页面将使滑块移动，以便当前产品可见

```
jQuery(".slider").css("left", jQuery("a[href='" + document.location.pathname + "']").parents().find(".slide").index() * -955); 
```

确保您`.slide`的 ' 始终具有 955px 的宽度，否则您应该将 955 设为变量。

（它不是使用片段的最漂亮和更少的资源，但它会以最少的努力完成这项工作;-)

# android - Android SDK 未显示适用于 Android 2.2 的 SDK

> ID：11405212
> 
> 赞同：2
> 
> 时间：2012-07-10T00:46:02.537
> 
> 标签：android, android-emulator

今天我想安装 SDK Api level 8 即 Android 2.2。令我惊讶的是，我在其中找不到 2.2 Sdk。谷歌是否停止了对 2.2 的支持，或者它是我遇到的某种错误。这是一个显示问题的 printScreen ![在此处输入图像描述](../Images/9a6215b50a963e08b6b71cc3be3c8f03.png)

我不想更新我的 SDK 工具和平台工具，因为更新后我的 AppEngine Connected Project 无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:12:01.553

扩展 Chris 解决方案：

您可以从此 URL 下载 SDK 2.2 (Froyo rev3)

[http://dl.google.com/android/repository/android-2.2_r03-linux.zip](http://dl.google.com/android/repository/android-2.2_r03-linux.zip)

在您的 Android SDK 安装目录下创建一个文件夹 'android-8' 并在那里解压缩 zip：

```
/android_sdk/platforms/android-8/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:02:45.843

您的问题是重复的：[Android SDK 和 AVD Manager 只显示最新版本（不显示版本 5 或 6）？](https://stackoverflow.com/questions/3090433/android-sdk-and-avd-manager-only-shows-latest-version-not-showing-versions-5-or)

取消选中显示更新/新复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:09:10.723

谷歌似乎正在重新整理各种版本的 repository.xml 文件，这是您在那里看到的列表的来源。由于这很可能会再次发生，我认为长期的解决方案是尝试寻找文件名的变体，即 repository-#.xml，直到找到带有所需 SDK 版本链接的文件。然后手动下载解压。

# android - ADT rev20 - 应用程序不安装在任何 AVD 上

> ID：11405220
> 
> 赞同：0
> 
> 时间：2012-07-10T00:47:31.830
> 
> 标签：android, adt

我将 ADT 更新到 Rev. 20，不知何故我的 android 项目不会安装在任何模拟器上。我创建了一个新的 - 并且仍然无限地停留在“安装......”。我如何恢复到旧版本或者也许有人知道如何解决这个问题？

# mysql - MYSQL组合2个表

> ID：11405221
> 
> 赞同：0
> 
> 时间：2012-07-10T00:47:36.853
> 
> 标签：mysql, database

我有两张桌子

参与者：thread_id，participant_id

消息：message_id、thread_id、message_poster_id、消息

提供了 thread_id 我如何确保不是参与者的人不会阅读他们不属于的线程？这可能在一个查询中还是我必须运行一个查询然后使用 php 来说明是否允许他们运行第二个查询来获取消息？

我拥有的两个变量是 sessionid 和 thread_id。

我的逻辑是选择消息。* WHERE thread_id = '1' 并且参与者是 thread_id = '1' FROM 参与者表的一部分（不是和）。

问题在于还有其他参与者，我需要显示该线程的所有消息，而不仅仅是会话持有者。换句话说，我正在寻找一个查询来获取会话持有者参与的给定线程中的所有消息，即使他没有发布消息（参与者在参与者表中给出）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:04:53.823

```
SELECT m.* FROM messages m INNER JOIN participants p 
ON m.thread_id=p.thread_id 
WHERE m.thread_id = '1' AND p.participant_id='the-session-holder-id' 
```

如果上述查询返回 0，则表示 session-holder-id 不是参与者。否则，查询将返回属于该线程的所有消息。

# shell - 手册页标题中 shell 命令名称后括号中的数字是什么意思？

> ID：11405225
> 
> 赞同：10
> 
> 时间：2012-07-10T00:48:01.410
> 
> 标签：shell, manpage

我到处都能看到这些数字。例如，在这个页面上：http: [//linux.die.net/man/1/tar](http://linux.die.net/man/1/tar)

`1`数字中的含义是什么`tar(1)`？我也看过2、5等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T00:51:30.310

它会告诉您其联机帮助页所在的组，或者更一般地说，该项目本身属于哪个组。以下是各部分及其内容的列表：

```
 1   Executable programs or shell commands
   2   System calls (functions provided by the kernel)
   3   Library calls (functions within program libraries)
   4   Special files (usually found in /dev)
   5   File formats and conventions eg /etc/passwd
   6   Games
   7   Miscellaneous  (including  macro  packages  and  conventions), e.g.
       man(7), groff(7)
   8   System administration commands (usually only for root)
   9   Kernel routines [Non standard] 
```

有关更多详细信息，请参见“man”的联机帮助页。或者看看这里： http: [//linux.die.net/man/](http://linux.die.net/man/)

有时来自不同组的项目可以具有相同的名称，这是区分它们的方法。例如，有一个**printf(1)**的手册页，它是一个可执行文件，可从 shell 调用，还有一个**printf(3)**的手册页，它是一个在 stdio.h 中定义的 C 函数。

使用 bash 中的 man 二进制文件，您可以通过以下方式调用不同的联机帮助页：

```
man printf       # displays printf(1)
man 1 printf     # displays printf(1)
man 3 prinft     # displays printf(3)
man -a printf    # displays all manpages matching printf 
```

根据系统上安装的手册页，您有时会从不同手册中获取同一项目的页面。例如，Linux 程序员手册中的**printf(3)**可以有Posix 程序员手册中的**printf(3p)对应物。**

# db2 - COBOL 程序、JCL 作业，还是两者兼而有之？

> ID：11405227
> 
> 赞同：2
> 
> 时间：2012-07-10T00:48:06.960
> 
> 标签：db2, cobol, mainframe, jcl

我必须执行 3 个任务：
插入、删除和写入

我不确定最好的方法是什么。我的大型机程序设计技能不是太紧，所以我正在寻求建议。

我可以避免为此做一个 COBOL 程序吗？
在我看来，我只需要执行 SQL 语句的 JCL。如果我正确地设计了我的陈述，那么他们应该能够以这种方式执行任务 1 和 2。但我想我可能需要一个 COBOL 程序来写入文件？

我将概述我对这 3 个任务的思考过程。每个任务看起来都差不多，但是它们查询的结果不同，所以 SQL 语句有很大的不同。但他们都在同一张桌子上工作。

任务 1： -
执行 SQL 查询
-对于查询选取的每一行
--根据该行插入一个新行

任务 2：-执行 SQL 查询
-对于查询提取的每一行
--删除记录

任务 3： -
执行 SQL 查询
-对于查询获取的每一行
--将该记录写入文件

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T14:00:40.133

您不能仅使用 JCL 执行这些任务，JCL（大多数情况下）只会导致程序执行。为了完全准确，JES 在解释 JCL 时执行这些功能。

现在，您可以避免使用现有实用程序或一组实用程序来*编写程序。*

例如，SyncSort 可以执行 SELECT 语句并将结果写入文件。

例如，DSNTEP4 可以批量执行 SQL 语句，包括 DELETE、UPDATE 和 INSERT 语句。

因此，您可以在不*编写*COBOL（或汇编程序、PL/I、C/C++ 或 Rexx 等）程序的情况下执行此操作，而无需*执行*程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:27:04.453

您无法在 JCL 中编写程序来完成您需要的工作，因为 JCL 是为定义和提交作业而设计的，而不是通用编程。您可以使用任何受支持的 Mainframe 语言来访问 DB2，因此您可以使用 COBOL、Java、C、C++ 等编写程序。然后您需要编写 JCL 来执行该程序。JCL 将列出任何所需的信息，例如程序的参数，以及输入/输出所需的数据集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T20:25:04.880

DB2（和大多数其他数据库）具有可以通过 JCL 运行任意 SQL 语句的批处理或命令行实用程序。这是最简单的方法，只需要 JCL 和一些控制语句。您可能还拥有一些来自 CA、BMC 或 IBM 的 DB2 管理工具，它们也允许处理任意查询。诀窍是将您的需求表达为一个 SQL 查询，而无需额外的逻辑（鉴于您记录的需求，我相信这绝对是可能的）。

# c++ - luabind 获取 c++ 对象的类元表以将 obj 作为参数推送给 lua 函数

> ID：11405228
> 
> 赞同：0
> 
> 时间：2012-07-10T00:48:15.683
> 
> 标签：c++, lua, luabind

我注意到性能受到严重影响，将我的一个 c++ 对象作为 lua 函数 arg 引入，例如

```
function luaFunc(someString)
 print someString
end 
```

这非常快 - 100k 次调用不到 30 毫秒

现在，我添加了另一个对象

```
function luaFunc(myCObj, someString)
 print somestring
 myCObj:doStuff()
end 
```

10 万次通话现在需要超过 1 秒。（添加另一个原语，如 int 或 string 作为 arg 不会影响性能！另外，将对象放入全局范围（例如，不要每次都将它作为 func arg 推送，也没有性能影响 - 但我需要它作为参数）

这就是我使用 luabind 调用它的方式

```
 luabind::call_function<void>(fn,myCObj,message); 
```

通过简单地直接使用 luas pcall 函数，我能够将时间减少 0.5 秒 - 使用这个“hack”：

```
// this will automatically set the correct class metatable for me
luabind::globals(fn.interpreter())["myCObj"] = myCObj;  
// push my userdata obj onto the stack including the class metatable
lua_getglobal(fn.interpreter(), "myCObj");
lua_pushstring(fn.interpreter(),message);               
lua_pcall(fn.interpreter(), 2, 0,0)); 
```

尽管如此，我认为它可以更快更好 - 这就是我想做的

```
void *pUserData = lua_newuserdata( fn.interpreter(), sizeof( MyCClass ) );
pUserData  = myCObj;
lua_getmetatable(fn.interpreter(),????);  
lua_setmetatable( fn.interpreter(), -2 );
lua_pushstring(fn.interpreter(),message);
lua_pcall(fn.interpreter(), 2, 0,0)); 
```

所以，我相信 luabind 为每个类管理一些元表——但我不知道如何检索它——我在源代码中看到了一些关于“__luabind_classrep”的东西——另外——在全局中有一个用户数据 obj，其名称是我注册的类罗宾德。

编辑：我实际上追踪了最初的减速问题 - 它既不是 luabind 也不是我的代码 - 我正在使用 VS2010 F5 进行基准测试，它会自动附加调试器 - 出于某种原因，当将 MyCObj 作为 arg 添加到 lua 函数时 -调试器减慢了整个处理速度 - 我从 shell 手动运行我的命令行程序，它再次在可接受的范围内（我只是偶然认识到这一点，因为具有相同 VS 项目的更快的计算机需要 4 秒而不是 1 秒不太可能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:42:55.237

> 尽管如此，我认为它可以更快更好 - 这就是我想做的

然后别再想那个了。

无法保证 Luabind 以这种特定方式使用用户数据。你当然不知道它的 userdata 是类的确切大小；它可以将所有 C++ 对象包装在某种容器对象中。

简而言之，没有办法*确切地*知道 Luabind 是如何表示 C++ 对象的。并非没有查看 Luabind 的来源（可能会发生变化）。

`MyCClass`由于您在 Luabind中的不断编组，您很可能会遇到性能问题。避免它的最简单方法是只进行一次编组。使用 .将对象存储在 Lua 中`luabind::object`。只需使用您的口译员创建一个并保留它。然后在调用该方法时使用该对象。Luabind 不需要在每次调用函数时重新编组对象。

# ruby - 没有链轮、SASS 或 LESS 的 Rails 资产

> ID：11405234
> 
> 赞同：0
> 
> 时间：2012-07-10T00:49:28.983
> 
> 标签：ruby, ruby-on-rails-3

当我创建我的 Rails 站点时，我删除了 Sass，还删除了 sprockets。我想从 app/assets/stylesheets 等生成我的所有资产，但一切都返回 404。如何在`stylesheet_link_tag(:name)`没有安装 Sprockets 或 Sass-Rails 的情况下使用，以便提供原始 CSS？还是我的配置有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:01:00.727

把你的样式表放进去`public/stylesheets`，资产管道就会找到它们。

# ruby-on-rails - 红宝石：水龙头不工作？

> ID：11405235
> 
> 赞同：2
> 
> 时间：2012-07-10T00:49:33.353
> 
> 标签：ruby-on-rails, ruby, class, tap

为我的 application_controller 编写代码以将用户输入转换为查询，这是有效的：

```
result_set =  model  # some implementation of ActiveRecord::Base as a Class
.includes(:metric_template => [:group]) #still need to abstract this
.where(f)  
.order(sort_string)
.limit(rows)
.offset((page-1)*rows) 
```

这不起作用，因为似乎没有调用 where 方法：

```
result_set =  model
.includes(:metric_template => [:group])  #still need to abstact this
.tap{|o| o.where(f) if f}
.order(sort_string)
.limit(rows)
.offset((page-1)*rows) 
```

我真的很想 .tap() 在这里工作。为什么不呢？它不能作为类方法使用吗？可以说服吗？

感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:10:10.447

`where`被调用就好了。问题是它`where`没有任何可见的副作用 - 它仅用于其返回值。

由于`tap`不对块的返回值做任何事情，因此`tap`与没有可见副作用的块一起使用是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:41:13.307

这就是你（实际上）想要的：

```
result_set = model.
  includes(:metric_template => [:group]).  #still need to abstact this
  order(sort_string).
  limit(rows).
  offset((page-1)*rows)
result_set = result_set.where(f) if f 
```

这并不是真正需要 的情况`tap`，这对于在不更改方法的返回值的情况下对方法内的项目进行操作最有用（出于 sepp2k 已解释的原因）。

此外，最好将此查询移动到模型内的方法中。

# javascript - 像 Pinterest 一样接管浏览器滚动条的模态窗口

> ID：11405238
> 
> 赞同：11
> 
> 时间：2012-07-10T00:49:57.087
> 
> 标签：javascript, jquery, css, backbone.js

我有一个模态窗口，它显示的内容比浏览器的窗口高度更长，所以我需要创建一个模态窗口来接管浏览器的滚动条，就像我们在 Pinterest 上看到的那样。此外，单击图像将导致该图像转换到模态窗口中的位置。

**注意打开模式如何改变滚动条**

![在此处输入图像描述](../Images/1d754521cd827f0d449e99e29e665557.png)

**问题：**如何创建相同的模式窗口（接管滚动条）和图像动画？我知道当模态窗口出现时浏览器地址栏中的 URL 会发生变化，但是您会注意到页面并没有真正改变。我可以使用backbone.js 做到这一点，所以不用担心。

**HTML 代码**

```
<div id="showModal">Click me!</div>

<div class="modal">
    <div class="modal_item">
        <div class="modal_photo_container">
            <img src="img/posts/original/1019_bb8f985db872dc7a1a25fddeb3a6fc3c43981c80.jpg" class="modal_photo">
        </div>
    </div>
</div> 
```

**JS代码**

```
$('#showModal').click(function() {
    $('.modal').show();
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-10T02:05:25.190

首先，我会为你的模态建议一个类似于这个的 html 结构：

```
 <div class="modal-container">
        <div class="modal">
        </div>
    </div> 
```

然后，在“点击”时，您将添加`overflow:hidden`到`body`，并且以某种方式添加`display:block`到`.modal-container`. `.modal-container`会有相应的css：

```
.modal-container {
   display: none;
   overflow-y: scroll;
   position: fixed;
   top: 0; right: 0;
   height: 100%; width: 100%; 
} 
```

看看[http://jsfiddle.net/joplomacedo/WzA4y/上的一个工作示例](http://jsfiddle.net/joplomacedo/WzA4y/)

# php - 在 SQL 查询中正确使用索引

> ID：11405249
> 
> 赞同：0
> 
> 时间：2012-07-10T00:51:48.550
> 
> 标签：php, sql, indexing

我对使用 SQL 有点陌生，我正在尝试运行一个查询，比较两个单独表中的两个值。我已经索引了正在使用的列，但我不完全确定索引是如何工作的。我将它嵌入到 PHP 中，当我尝试运行查询时，它目前需要很长时间（有时甚至超时）。这两个表各有大约 250k 行，因此查询不应该太大。这是我的代码：

```
$users1 = mysql_num_rows(mysql_query("SELECT DISTINCT idtracker.uuid
  FROM idtracker, download_tracker 
  WHERE idtracker.uuid = download_tracker.pluginId
  && idtracker.date > (NOW() - (2000000))", $con)); 
```

我不确定像我在这里做的那样直接比较两行是否非常有效。如果我能深入了解我可以做些什么来提高这个查询的速度，那将非常有帮助。

谢谢-瑞恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:02:10.213

在进行任何真正的测试/优化之前，您需要修复查询：

```
idtracker.date > (NOW() - (2000000)) 
```

是错的。

如果你`idtracker.date`的类型是`DATE`or`DATETIME`并且你想将它与另一个日期（`NOW()`减去一些东西）进行比较，你需要使用 mysql[`DATE_ADD`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数或类似的东西。

# javascript - 实时点击显示另一个 div

> ID：11405250
> 
> 赞同：0
> 
> 时间：2012-07-10T00:51:58.767
> 
> 标签：javascript, jquery, live, show

我有两个 div 在页面加载后被放置在 DOM 中，使用 jquery。我很难将一个 div 动作绑定到显示另一个元素。任何指针？

```
 jQuery('#create-account-btn').live('click',function(){
    jQuery('#create-account').show();
    jQuery(this).hide();
  }); 
```

现在将显示创建帐户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:03:22.503

**工作演示** [http://jsfiddle.net/Zvd8J/](http://jsfiddle.net/Zvd8J/)

Jquery`.on`事件在此处阅读更多内容，但仅在 v 1.7 以上： http: [//api.jquery.com/on/](http://api.jquery.com/on/) `.live`此处：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

如果你热衷：[jQuery .live() 和 .on() 有什么区别](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)

此外，如果您变得更加热衷：请参阅此处为什么：[jQuery live 方法有什么问题？](https://stackoverflow.com/questions/11115864/whats-wrong-with-the-jquery-live-method/11115926#11115926)

冒昧地为您记下小html和演示。

希望这可以帮助，`:)`

另请注意：您可以这样做：

```
$(document).on('click','#create-account-btn',function(){

}); 
```

**代码**

```
$('.hulk').hide();
$('#create-account-btn').on('click',function(){
    $('.hulk').hide();
    $('#create-account').show();

  });

$('#foo').on('click',function(){
    $('.hulk').hide();
    $('#create-whatever').show();

  }); 
```

**html**

```
<div class="hulk" id="create-whatever">
hulk yada yada
</div>
  <div class="hulk" id="create-account">
ironman yada yada crea accoutn show
</div>
<input type="button" id="create-account-btn" value="click me" />

<input type="button" id="foo" value="click me to show another" /> 
```

# javascript - 服务器收到的请求与我组装的请求不同

> ID：11405253
> 
> 赞同：0
> 
> 时间：2012-07-10T00:52:13.327
> 
> 标签：javascript

所以我有这三行javascript：

```
 var source = "text/" + image + ".html";
alert(source);
document.getElementById('imgtext').src = source; 
```

警告框向我显示 text/Maintainance/img7.html 是正确的并且应该是正确的（更重要的是，该文件确实存在）。

imgtext 是一个 iframe，因此 html 文档中的文本应该加载到框架中。相反，我收到一个 404 错误，表示服务器试图检索 /text/Maintainance.html/img13.html （显然不存在）。警报和设置 iframe 的源之间绝对没有代码。我正在用 chrome 和 firefox 对此进行测试，两者都给出了相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:55:33.400

也许使用 jquery 来访问`imgtext`而不是`doc.getElementById`. `$('#imgtext').src = source;`应该做的伎俩。

# javascript - HTML5 视频作为背景在窗口调整大小时留下 HTML 工件

> ID：11405254
> 
> 赞同：0
> 
> 时间：2012-07-10T00:52:24.340
> 
> 标签：javascript, html, video, css, html5-video

我有一个 HTML5 视频作为背景图像运行，z-index 为 -1000。我在 z-index:0 的视频顶部有一些 html 元素。每当调整窗口大小时，都会留下 HTML 工件，这些工件在页面刷新之前不会消失。似乎是渲染层的问题，但我无法弄清楚。建议？

这是正在发生的事情的图片：

![在此处输入图像描述](../Images/55ffb5098225b3dbc3d22a129ca9c4a3.png)

灰色的部分不应该在那里。

编辑：到目前为止只在 webkit 上测试过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:51:10.430

将 HTML5 视频元素移动到正文的末尾，它奇怪地解决了这个问题。

# image - 如何在MATLAB中找到连接在一起的黑色像素的数量？

> ID：11405255
> 
> 赞同：0
> 
> 时间：2012-07-10T00:52:40.267
> 
> 标签：image, matlab, math

假设我有一张黑白照片。图片（白色背景）上有一些不规则的形状（黑色）。我需要通过计算黑色像素的数量来找出该图片中有多少个形状以及每个形状的大小。有什么简单的方法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:22:09.267

使用该[`bwconncomp`](http://www.mathworks.com/help/toolbox/images/ref/bwconncomp.html)功能。假设您的图像存储为二进制矩阵`img`：

```
CC = bwconncomp(img);
num = CC.numObjects;
sizes = cellfun(@length, CC.PixelIdxList); 
```

# image - 我如何获得 Spotify 艺术家图像/肖像？

> ID：11405258
> 
> 赞同：0
> 
> 时间：2012-07-10T00:53:15.287
> 
> 标签：image, api, model, spotify

我正在尝试获取艺术家的图像/肖像。但是，使用 Artist.fromURI() 将返回一个艺术家对象，但没有肖像。我在 StackOverflow 上阅读了一些其他帖子，有人建议使用：

```
sp.core.browseURI() 
```

因为 fromURI 仅出于性能原因检索基本信息。然而最近 spotify 声明我们不再被允许使用 sp.core 调用。那么替代方案是什么？

相反，这就是我正在使用的：

```
models.Artist.fromURI(uri, function(artist) {
   // this is called when artist is loaded but the following shows blank even
   // when the artist has an image
   console.log(artist.data.portrait);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:12:29.297

该`Artist`对象具有`image`属性，一旦加载了艺术家，该属性就会填充一个 URI。

一旦你有了那个 URI，你就可以像使用任何其他图像 URI 一样简单地使用它——把它放在一个`img`元素中，等等。

值得注意的是，有些艺术家没有肖像。在这种情况下，您应该改用他们专辑的封面之一。

# mingw - 将静态 MSVC 2010 库 (.lib) 与 MinGW 一起使用？

> ID：11405261
> 
> 赞同：2
> 
> 时间：2012-07-10T00:53:37.533
> 
> 标签：mingw, static-libraries, visual-studio-2010, .a, .lib

由于一些与 WIN32 相关的东西在使用 MinGW 时不太有效，因此我决定使用 MSVC 2010 创建一个小型静态库，然后将其与 MinGW 链接。但是，我目前正在寻找一种工具，可以将静态 MSVC 库（.lib）转换为 MinGW 静态库（.a）。在网上搜索，我发现了各种工具，例如“lib to a”，由于某种原因需要一个 .dll 文件，所以我认为这不是我想要的。

该库是用 C 编译的，并且可以使用 MSVC 完美运行。这是头文件：

```
#ifndef _GWSI_H
#define _GWSI_H

#include <Windows.h>

#define GWSI_HEIGHT             0x0001
#define GWSI_WIDTH              0x0002

#define GWSI_OSVI_MAJOR         0x0010
#define GWSI_OSVI_MINOR         0x0011
#define GWSI_OSVI_BUILD         0x0012

#ifdef __cplusplus
extern "C" {
#endif

float GWSI_getCpuSpeed();
int GWSI_getOSV(unsigned int flag);
int GWSI_getScreenResolution(unsigned int flag);
unsigned _int64 GWSI_getTotalSystemMemory();

#ifdef __cplusplus
}
#endif

#endif /*_GWSI_H*/ 
```

尝试简单地尝试链接 .lib，假装它是一个 .a，（当然，使用带有 MinGW 而不是 VisualStudio 的 Netbeans）导致了这个错误：

```
GWSI.h:26:17: error: expected initializer before GWSI.h:26:17: error: expected initializer before 'GWSI_getTotalSystemMemory' 
```

删除 'GWSI_getTotalSystemMemory();' 后 我收到此错误，我认为这意味着该库未链接到开头：

```
main.o:main.cpp:(.text+0xf): undefined reference to `GWSI_getCpuSpeed' 
```

您对我如何实现将这个静态库与 MinGW 一起使用的目标有任何想法吗？另外，什么可能导致第一个错误？我看不到任何无效的减速。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:24:54.697

我相信您无法将在 MSVC 中编译的库链接到您的 MinGW 代码。

# html - chrome输入中的未知边框

> ID：11405263
> 
> 赞同：2
> 
> 时间：2012-07-10T00:53:58.720
> 
> 标签：html, css, google-chrome

我有一个带有奇怪边框的搜索输入。我已经尝试删除轮廓、阴影、:focus 和 :active 样式，但没有得到任何结果。

这只发生在 Chrome 上。在 Firefox 和 Safari 上，边框不存在。

这是一个屏幕截图 - [http://d.pr/i/yPNo](http://d.pr/i/yPNo) - 这是我正在使用的代码 - [http://jsfiddle.net/3CDcV/](http://jsfiddle.net/3CDcV/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:52:21.093

干得好

```
input[type="search"]{
    border-radius:4px;
    -webkit-border-radius: 4px;
    height:25px;
    width:150px;
    background:#181818;
    border:1px solid #0e0e0e;
    padding-left:5px;
    color:#666;
    font-size:10px;
    -webkit-box-shadow:  1px 1px 0px 1px #202020;
    box-shadow:  1px 1px 0px 1px #202020;
    margin-left:5px;
    margin-right:5px;

    -moz-appearance:none;
   -webkit-appearance:none;
}  ​ 
```

[**演示。**](http://jsfiddle.net/3CDcV/4/)

# javascript - 求多边形内折线段的总距离

> ID：11405264
> 
> 赞同：0
> 
> 时间：2012-07-10T00:53:59.577
> 
> 标签：javascript, google-maps-api-3

我有一张由多个“区域”组成的地图，每个区域都创建为多边形叠加层。我还允许用户定义路线并使用 DirectionsService，我将路线渲染为同一地图[http://i.stack.imgur.com/DDZI1.png](http://i.stack.imgur.com/DDZI1.png)上的折线。您可以看到两个区域，一个为绿色，另一个为蓝色，路线为红色。在最终版本中将定义多达 30 个区域。

我需要做的是计算折线（路线）在每个区域中花费的距离。根据道路的曲折情况，路线可能多次进出区域，也可能完全存在于区域中而不与区域的边界相交。

我该怎么办？

这是我目前拥有的代码，它只是在地图上添加两个区域并绘制线。我还添加了“包含”方法，该方法允许我确定坐标是否位于多边形内，我使用该多边形在地图上（黑色）为位于区域“a”中的段绘制一条新的折线。然而，这不足以知道它何时首次进入区域，这可能发生在顶点之间。

```
// Functions ===============
// =========================

var calcRoute = function (start, end) {

var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.TravelMode.DRIVING,
    provideRouteAlternatives: false,
    avoidHighways: false,
    avoidTolls: false,
    optimizeWaypoints: false
};

// Load directions
directions.service.route(request, function (result, status) {

    if (status == google.maps.DirectionsStatus.OK) {

        // Iterate through each route, adding it to th map
        $(result.routes).each(function onEach(index, route) {

            // Create a new Polyline, set its path to the route path
            var line = new google.maps.Polyline({
                path: route.overview_path,
                strokeColor: "#FF0000",
                strokeOpacity: 1,
                strokeWeight: 2
            });

            // Add line to the map
            line.setMap(map);

            // Find individual line segments
            var inside = [];
            var vertices = line.getPath();
            for (var i = 0; i < vertices.length; i++) {

                var vertix = vertices.getAt(i);

                // Check to see if the vertix exists within a specified Polygon
                if (zones.a.polygon.contains(vertix)) {
                    inside.push(vertix);
                }

            }

            // Add another Polyline for the segments inside the polygon
            var line = new google.maps.Polyline({
                path: inside,
                strokeColor: "#000000",
                strokeOpacity: 1,
                strokeWeight: 4
            });

            // Add line to the map
            line.setMap(map);

        });

    }

});

}

// ray casting alogrithm http://rosettacode.org/wiki/Ray-casting_algorithm
google.maps.Polygon.prototype.contains = function(point) {

var crossings = 0,
    path = this.getPath();

// for each edge
for (var i=0; i < path.getLength(); i++) {
    var a = path.getAt(i),
        j = i + 1;
    if (j >= path.getLength()) {
        j = 0;
    }
    var b = path.getAt(j);
    if (rayCrossesSegment(point, a, b)) {
        crossings++;
    }
}

// odd number of crossings?
return (crossings % 2 == 1);

function rayCrossesSegment(point, a, b) {
    var px = point.lng(),
        py = point.lat(),
        ax = a.lng(),
        ay = a.lat(),
        bx = b.lng(),
        by = b.lat();
    if (ay > by) {
        ax = b.lng();
        ay = b.lat();
        bx = a.lng();
        by = a.lat();
    }
    // alter longitude to cater for 180 degree crossings
    if (px < 0) { px += 360 };
    if (ax < 0) { ax += 360 };
    if (bx < 0) { bx += 360 };

    if (py == ay || py == by) py += 0.00000001;
    if ((py > by || py < ay) || (px > Math.max(ax, bx))) return false;
    if (px < Math.min(ax, bx)) return true;

    var red = (ax != bx) ? ((by - ay) / (bx - ax)) : Infinity;
    var blue = (ax != px) ? ((py - ay) / (px - ax)) : Infinity;
    return (blue >= red);

}

};

// Variables ===============
// =========================
var $map = document.getElementById('map_canvas'),
defaultLocation = new google.maps.LatLng(-37.813553, 144.96341899999993), // Melbourne CBD
directions = {
    display: new google.maps.DirectionsRenderer(),
    service: new google.maps.DirectionsService()
},
initialLocation = defaultLocation,
map = null,
options = {
    center: initialLocation,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    zoom: 13
},
zones = {
    a: {
        options: {
            path: [
                new google.maps.LatLng(-37.839848,144.916192),
                new google.maps.LatLng(-37.831374,144.911557),
                new google.maps.LatLng(-37.822358,144.911128),
                new google.maps.LatLng(-37.806627,144.908038),
                new google.maps.LatLng(-37.794148,144.914218),
                new google.maps.LatLng(-37.787636,144.924518),
                new google.maps.LatLng(-37.788586,144.947520),
                new google.maps.LatLng(-37.787365,144.950953),
                new google.maps.LatLng(-37.789536,144.958507),
                new google.maps.LatLng(-37.793063,144.966060),
                new google.maps.LatLng(-37.792656,144.975501),
                new google.maps.LatLng(-37.807983,144.972239),
                new google.maps.LatLng(-37.815035,144.975158),
                new google.maps.LatLng(-37.833069,144.971210),
                new google.maps.LatLng(-37.836594,144.968463),
                new google.maps.LatLng(-37.849066,144.950438),
                new google.maps.LatLng(-37.839848,144.916192)
            ],
            fillColor: "#00FF00",
            fillOpacity: 0.35,
            strokeColor: "#00FF00",
            strokeOpacity: 1,
            strokeWeight: 2
        },
        polygon: null
    }, // End zone a
    b: {
        options: {
            path: [
                new google.maps.LatLng(-37.840119,144.915591),
                new google.maps.LatLng(-37.865465,144.914561),
                new google.maps.LatLng(-37.867905,144.908467),
                new google.maps.LatLng(-37.871970,144.902974),
                new google.maps.LatLng(-37.859096,144.873277),
                new google.maps.LatLng(-37.867498,144.843064),
                new google.maps.LatLng(-37.870208,144.838944),
                new google.maps.LatLng(-37.815984,144.849587),
                new google.maps.LatLng(-37.812187,144.860230),
                new google.maps.LatLng(-37.781531,144.864350),
                new google.maps.LatLng(-37.770134,144.865724),
                new google.maps.LatLng(-37.757378,144.859544),
                new google.maps.LatLng(-37.728872,144.867097),
                new google.maps.LatLng(-37.734574,144.904176),
                new google.maps.LatLng(-37.732673,144.920999),
                new google.maps.LatLng(-37.746791,145.022622),
                new google.maps.LatLng(-37.764706,145.020562),
                new google.maps.LatLng(-37.764435,145.027085),
                new google.maps.LatLng(-37.790485,145.027429),
                new google.maps.LatLng(-37.792927,145.031205),
                new google.maps.LatLng(-37.826561,145.025369),
                new google.maps.LatLng(-37.837136,145.026742),
                new google.maps.LatLng(-37.836865,145.037042),
                new google.maps.LatLng(-37.845812,145.039445),
                new google.maps.LatLng(-37.847710,145.042535),
                new google.maps.LatLng(-37.871292,145.038415),
                new google.maps.LatLng(-37.879693,145.034295),
                new google.maps.LatLng(-37.884571,145.038758),
                new google.maps.LatLng(-37.903807,145.035325),
                new google.maps.LatLng(-37.927371,145.029145),
                new google.maps.LatLng(-37.931433,145.025712),
                new google.maps.LatLng(-37.975560,145.015412),
                new google.maps.LatLng(-37.969606,145.008546),
                new google.maps.LatLng(-37.961485,145.011292),
                new google.maps.LatLng(-37.944701,144.995843),
                new google.maps.LatLng(-37.937932,144.996873),
                new google.maps.LatLng(-37.925476,144.984857),
                new google.maps.LatLng(-37.911392,144.984857),
                new google.maps.LatLng(-37.894054,144.985200),
                new google.maps.LatLng(-37.881861,144.977647),
                new google.maps.LatLng(-37.856927,144.966660),
                new google.maps.LatLng(-37.849066,144.951554),
                new google.maps.LatLng(-37.837136,144.969064),
                new google.maps.LatLng(-37.833340,144.971810),
                new google.maps.LatLng(-37.814899,144.976274),
                new google.maps.LatLng(-37.807847,144.973527),
                new google.maps.LatLng(-37.792384,144.976274),
                new google.maps.LatLng(-37.791299,144.967004),
                new google.maps.LatLng(-37.785873,144.952584),
                new google.maps.LatLng(-37.786958,144.947434),
                new google.maps.LatLng(-37.786144,144.924088),
                new google.maps.LatLng(-37.791842,144.915162),
                new google.maps.LatLng(-37.805135,144.906236),
                new google.maps.LatLng(-37.820052,144.908982),
                new google.maps.LatLng(-37.831171,144.910012),
                new google.maps.LatLng(-37.840119,144.915591)
            ],
            fillColor: "#0000FF",
            fillOpacity: 0.35,
            strokeColor: "#0000FF",
            strokeOpacity: 1,
            strokeWeight: 2
        }
    } // End zone b
};

// Load reference to map
map = new google.maps.Map($map, options);

// Load zones
zones.a.polygon = new google.maps.Polygon(zones.a.options);
zones.a.polygon.setMap(map);

zones.b.polygon = new google.maps.Polygon(zones.b.options);
zones.b.polygon.setMap(map);

// Load route
calcRoute(
    'Dandenong',
    'South Melbourne'
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:19:34.953

*   搜索[线多边形交点](https://www.google.com/search?btnG=1&pws=0&q=line+polygon+intersection)
*   选择一个你理解的算法或在 javascript 中找到一个实现，你可以移植到 API
*   用它来找到你的路线与你的多边形的交点
*   使用几何库确定每个多边形内线段的长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:01:24.380

根据您使用的距离增量（英尺，米，公里，英里），这就是我要做的......

```
var increment = 0;
var zone = initial_zone;

//loop structure
if(current zone == zone){
   increment = increment + 1;
}
else{
    zone = zone_2;
} 
```

等等……等等

# macos - 如何在视网膜显示器上强制放大模式？

> ID：11405266
> 
> 赞同：3
> 
> 时间：2012-07-10T00:54:30.690
> 
> 标签：macos, retina-display

正如[“高分辨率解释：功能和优势”一文所述](https://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Explained/Explained.html)，在视网膜显示器上，如果应用程序在高分辨率显示器上出现问题，用户可以使用“以低分辨率打开”复选框打开应用程序。

我们的一个应用程序显然在视网膜显示器上存在性能问题，而且我们没有足够的带宽来立即找到并解决问题。同时，有没有办法自动禁用应用程序的缩放，这样用户就不必选中复选框来使应用程序正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:56:31.240

为 定义了一个`NSHighResolutionCapable`布尔值`Info.plist`。我只在文档中看到将其设置为 true 的引用，但如果将其设置为 false，则默认值也可能是硬编码的。

# haskell - 使用 Haskell 包“插件”时如何减少二进制占用？

> ID：11405275
> 
> 赞同：14
> 
> 时间：2012-07-10T00:55:41.090
> 
> 标签：haskell, plugins, footprint

我已经为我的 Main.hs 模块的 haskell 插件实现了一个简单的加载器。我现在使用的唯一功能`load`来自[这个网站](http://hackage.haskell.org/packages/archive/plugins/1.5.2.1/doc/html/System-Plugins-Load.html)

查看我编译的应用程序大小，可以看到在 x86 架构上的可执行文件超过 53 MB。我知道 GHC 的大部分是链接的（由于 haskell-source-to-binary-plugin 功能），但这对于我的目的来说是多余的。

**是否有官方认可的方式来削减额外的功能并只保留`(dyn-)load`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:17:47.153

取决于“官方认可”的含义。`plugins`（以前称为`hs-plugins`）旨在成为一个包罗万象的解决方案，具有代码生成和动态加载功能。它的目标不是最小化。

名称下提供了一个不太复杂的包`direct-plugins`，它专注于插件的动态加载。这个包读取 Haskell 接口 ( `.hi`) 文件以获取符号的实际类型，因此类型安全是可能的，但也提供了一个不安全的变体。不幸`direct-plugins`的是，它被比特腐烂了，并且不适用于 GHC v7.6（atm）。

在频谱的最低端，有一个`unix`包提供了一个类似`dlopen`/`dlsym`的机制来获取从共享库导出的符号。还提供了一个便利层，用于在处理结束后自动关闭打开的库。然而，这些符号是作为 FFI 获得`Ptr`的，并且不是 Haskell 可调用的。

通过搜索互联网，我发现了一个似乎在中间地带运行的废弃包：

*   提供了使用 Haskell 调用约定加载符号
*   可以声明依赖项和包/模块层次结构
*   依赖环境以线程安全的方式管理。

原始包由 Hampus Ram 编写。我只为最新发布的 GHC 准备了它，并做了一些非常浅显的测试。这是存储库：

> [https://github.com/ggreif/dynamic-loader](https://github.com/ggreif/dynamic-loader)

唯一缺少的部分是类型安全的符号访问（通过可能的可配置机制）。欢迎评论和补丁。

# uitableview - IB 中的 UITableViewCell 外观与运行时不同

> ID：11405277
> 
> 赞同：0
> 
> 时间：2012-07-10T00:56:03.693
> 
> 标签：uitableview, interface-builder, runtime

iPhone开发问题！

所以我有一个自定义的 UITableViewCell 类，我在 Interface Builder 中配置了它，高度为 79。我的问题是，一旦我运行应用程序，单元格的高度只有 20。我不知道为什么这两个是不同的。

如果有人以前遇到过这种情况，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:27:44.597

我认为您忘记在 Viewcontroller 的 .m 文件中实现 table view 的 heightForRowAtIndexPath 方法。在该方法中，只需添加 "return 79" 。这将解决您的问题

# java - struts2 s:property tag：替换值的更好方法？

> ID：11405282
> 
> 赞同：0
> 
> 时间：2012-07-10T00:56:54.693
> 
> 标签：java, jsp, struts2

我有一个 POJO，我使用 Struts2 属性标签在 JSP 上显示其属性：

```
public Class message
{
    string messageText;
    string messageType;

    //getters and setters, here
}

Text: <s:property value="messageBean.messageText"/>
Type: <s:property value="messageBean.messageType"/> 
```

该对象由用户输入或从数据库中读取创建。“messageType”属性中只有整数值，用作数据库中查找表的键。

选择“类型”值时，用户会在前一页获得单选选项，每个选项对应一个整数。当我显示值时，我目前只显示整数。我想显示与整数对应的文本，我将通过在操作类中使用键/值查找方法来完成此操作，并将代码更改为如下所示：

```
//in Action class
public String getTranslatedType()
{
    if (messageBean.getMessageType().equals("12"))
        return "Message for frequent callers.";

    if (messageBean.getMessageType().equals("17"))
        return "Message for first time callers.";
    //etc
}

Text: <s:property value="messageBean.messageText"/>
Type: <s:property value="translatedType"/> 
```

有一个更好的方法吗？

这似乎不起作用：

```
Type: <s:property value="Utility.getTranslatedText(messageBean.messageType)"/> 
```

是否有从属性标记中调用静态实用程序方法的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:13:17.153

我不确定您要达到的目标。为什么您更喜欢使用静态调用而不是从 ValueStack（访问操作属性的地方）访问数据？如果可能，最好避免静态调用，并坚持框架的预期设计并从 ValueStack/action 访问数据。

如果您只想将逻辑与您的操作分开，您可以将您的方法更改为：

```
public String getTranslatedType() {
   return Utility.getTranslatedText(getMessageBean().getMessageType());
} 
```

或者您希望翻译后的文本动态显示在页面上？如果是这样，也许您可​​以使用 Javascript 和 JSON 通过以下步骤来实现您的目标：

1.  将您的 messageType 整数（作为键）和您的 translateText 字符串（作为值）放入沿线的地图`messageTypeText.put(12, "Message for frequent callers.");`

2.  使用类似的东西[将其转换为 JSON](https://stackoverflow.com/questions/906530/using-json-to-return-a-java-map)`(new JSONObject(messageTypeText)).toString();`

3.  然后通过多种方式中的任何一种将其公开给客户端，例如`var messageTypeText = <s:property value="messageTypeText"/>;`

4.  将 javascript 方法绑定到 messageType 单选按钮，然后通过使用当前选择的 radio/messageType 的值从 javascript 映射/数组访问它来显示翻译的文本。我可以提供有关此方法的更多详细信息，但如果它不是您想要的，我不想浪费我的时间！:)

# jakarta-ee - 在 HTML 表格中显示 2 个 ArrayList

> ID：11405286
> 
> 赞同：0
> 
> 时间：2012-07-10T00:57:20.233
> 
> 标签：jakarta-ee, arraylist, html-table

我的学校项目需要一些帮助。

我有 2 个对象的 ArrayLists。一种是学生对象，一种是课程对象。

每个 ArrayList 实际上包含一个来自 DB 的表（老师说这样做）。

```
One table is Student(student_id INT PRIMARY KEY, name VARCHAR,  year INT), one table is Course (course_id INT PRIMARY KEY, title VARHAR). 
```

我需要在 HTML 表中显示 2 个表（2 个 ArrayLists）。

此代码仅返回表头。

```
<table border="1" cellspacing="1" cellpadding="8" bgcolor= #EBDDE2> 
                <tr>
                    <td bgcolor= #FF9966><b>ID</b></td>
                    <td bgcolor= #FF9966><b>Title</b></td>
                    <td></td>
                    <td bgcolor= #FF9966><b>ID</b></td>
                    <td bgcolor= #FF9966><b>Name</b></td>
                    <td bgcolor= #FF9966><b>Year</b></td>
                </tr>

                <tr>
                   <% for (Course cs : courses){%>

                        <td><%= cs.getCourse_id() %></td>
                        <td><%= cs.getTitle() %></td>
                        <td></td>
                   <%}%>

                     <% for (Student st : students){ %>

                        <td><%= st.getStudent_id() %></td> 
                        <td><%= st.getName() %></td> 
                        <td><%= st.getYear() %></td>    
                </tr>

                      <%}%> 
                 </table>

              </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:38:50.833

我解决了它：

```
<table>
                   <tr>
                      <td>
                         <select id = "mySelect" multiple name = "sid" size = "5">
                             <% for (Student st : students){%>
                                   <option value="<%= st.getStudent_id() %>"><%= st.getStudent_id() %></option>
                                <%}%>
                         </select>                

                       </td>

                       <td><input type="submit" value = "Link"/></td>

                       <td>
                          <select  multiple name = "cid" size = "5">
                              <% for (Course cs : courses){%>
                                    <option value="<%= cs.getCourse_id() %>"><%= cs.getCourse_id() %></option>
                               <%}%>
                          </select>

                        </td>
                    </tr>
                 </table> 
```

# boost-spirit - 检索 token_def<> 的 ID

> ID：11405288
> 
> 赞同：2
> 
> 时间：2012-07-10T00:57:53.263
> 
> 标签：boost-spirit, boost-spirit-qi, boost-spirit-lex

是否可以像这样检索词法分析器中定义的标记的 ID：`token_def<> tok;`从 Spirit 解析器的语义操作内部。

我正在尝试做的是使用每个运算符的令牌 ID（如 +、-、* 等）并从解析器语义操作中检索该运算符的相应名称（如加、减、次、 ETC。）

据我了解，在这样的制作中：

> toks.symbol >> toks.plus >> toks.symbol;

如果`toks.plus`是或类型`token_def<> plus;`，_1 将引用第一个`toks.symbol`，_2 将引用第二个`toks.symbol`。真的吗？如果是这样，我如何访问中间令牌（只是为了检索 ID）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:49:00.993

您可以使用内置的惰性占位符[`lex::_tokenid`](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/lex/abstracts/lexer_semantic_actions.html#spirit.lex.abstracts.lexer_semantic_actions.lexer_semantic_actions_using_phoenix)，请参阅文档：

*   [使用 Phoenix 的 Lexer 语义动作](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/lex/abstracts/lexer_semantic_actions.html#spirit.lex.abstracts.lexer_semantic_actions.lexer_semantic_actions_using_phoenix)

我改编了[教程中的第二个字数示例](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/lex/tutorials/lexer_quickstart2.html)以即时打印令牌 ID：

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>
#include <boost/spirit/include/phoenix_algorithm.hpp>
#include <boost/spirit/include/phoenix_core.hpp>

#include <iostream>
#include <string>

namespace lex = boost::spirit::lex;
namespace phx = boost::phoenix;

struct distance_func
{
    template <typename Iterator1, typename Iterator2>
    struct result : boost::iterator_difference<Iterator1> {};

    template <typename Iterator1, typename Iterator2>
    typename result<Iterator1, Iterator2>::type 
    operator()(Iterator1& begin, Iterator2& end) const
    {
        return std::distance(begin, end);
    }
};
boost::phoenix::function<distance_func> const distance = distance_func();

template <typename Lexer>
struct word_count_tokens : lex::lexer<Lexer>
{
    word_count_tokens()
      : c(0), w(0), l(0)
      , word("[^ \t\n]+")     // define tokens
      , eol("\n")
      , any(".")
    {
        using boost::spirit::lex::_start;
        using boost::spirit::lex::_end;
        using boost::spirit::lex::_tokenid;
        using boost::phoenix::ref;

        // associate tokens with the lexer
        this->self 
            =   word  [++ref(w), ref(c) += distance(_start, _end), phx::ref(std::cout) << _tokenid << ";" ]
            |   eol   [++ref(c), ++ref(l), phx::ref(std::cout) << _tokenid << ";" ] 
            |   any   [++ref(c), phx::ref(std::cout) << _tokenid << ";" ]
            ;
    }

    std::size_t c, w, l;
    lex::token_def<> word, eol, any;
};

///////////////////////////////////////////////////////////////////////////////
int main(int argc, char* argv[])
{
    typedef 
        lex::lexertl::token<char const*, lex::omit, boost::mpl::false_> 
        token_type;

    typedef lex::lexertl::actor_lexer<token_type> lexer_type;

    word_count_tokens<lexer_type> word_count_lexer;

    std::string str ("the lazy moon jumped over the brazen mold");
    char const* first = str.c_str();
    char const* last = &first[str.size()];

    lexer_type::iterator_type iter = word_count_lexer.begin(first, last);
    lexer_type::iterator_type end = word_count_lexer.end();

    while (iter != end && token_is_valid(*iter))
        ++iter;

    if (iter == end) {
        std::cout << "\nlines: " << word_count_lexer.l 
            << ", words: " << word_count_lexer.w 
            << ", characters: " << word_count_lexer.c 
            << "\n";
    }
    else {
        std::string rest(first, last);
        std::cout << "Lexical analysis failed\n" << "stopped at: \"" 
            << rest << "\"\n";
    }
    return 0;
} 
```

输出：

```
65536;65538;65536;65538;65536;65538;65536;65538;65536;65538;65536;65538;65536;65538;65536;
lines: 0, words: 8, characters: 41 
```

# php - 分组多维数组

> ID：11405290
> 
> 赞同：1
> 
> 时间：2012-07-10T00:58:37.687
> 
> 标签：php, javascript, arrays, multidimensional-array

给定以下数组：

```
var dates = ['2012-10-01', '2012-10-02', '2012-10-03', '2011-01-01', '2011-01-02', '2011-06-03', '2010-09-01', '2010-09-02', '2010-08-22' ]; 
```

我需要它按年、月、日分组，这样我的最终结果是这样的：

```
Array (
   "2012" => 
       Array ( "10" => Array ["01", "02", "03"] )

   "2011" =>
       Array ( "01" => Array ["01", "02"] )
       Array ( "06" => Array ["03"] )

   "2010" =>
       Array ( "09" => Array ["01", "02"] )
       Array ( "08" => Array ["22"] )
) 
```

最后，我将自动填充 MM/DD/YYYY 下拉菜单。因此，如果用户选择 2012 年，则下个月的下拉值只有 10，然后是只有 01、02、03 的天下拉值。如果他们选择 2011 年，下个月的下拉值只会显示 01、06。如果他们选择 01，那么接下来的日子只会是 01 或 02。

希望这不会让任何人感到困惑，而且问题很清楚。多维数组是我所知道的最糟糕的。

理想情况下，我喜欢在 Javascript 中执行此操作，但 PHP 也可以。一进一出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:25:23.843

这会做到：

```
$dates = array('2012-10-01', '2012-10-02', '2012-10-03', '2011-01-01', '2011-01-02', '2011-06-03', '2010-09-01', '2010-09-02', '2010-08-22');

$out = array();

foreach($dates as $date)
{
    $parts = explode('-',$date);

    if (!isset( $out[$parts[0]] ))
        $out[$parts[0]] = array();

    if (!isset( $out[$parts[0]] [$parts[1]] ))
        $out[$parts[0]] [$parts[1]] = array();

    if (!in_array($parts[2], $out[$parts[0]] [$parts[1]] )) 
        $out[$parts[0]] [$parts[1]] [] = $parts[2];
}

var_dump($out); 
```

输出：

```
array
  2012 => 
    array
      10 => 
        array
          0 => string '01' (length=2)
          1 => string '02' (length=2)
          2 => string '03' (length=2)
  2011 => 
    array
      '01' => 
        array
          0 => string '01' (length=2)
          1 => string '02' (length=2)
      '06' => 
        array
          0 => string '03' (length=2)
  2010 => 
    array
      '09' => 
        array
          0 => string '01' (length=2)
          1 => string '02' (length=2)
      '08' => 
        array
          0 => string '22' (length=2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T01:36:24.050

# 使用[Underscore.js](http://underscorejs.org/)

> [_.map](http://underscorejs.org/#map) (list, iterator, [context])*别名*：**collect**
> 通过转换函数（迭代器）映射列表中的每个值来生成一个新的值数组。如果存在原生 map 方法，则会使用它。如果 list 是 JavaScript 对象，迭代器的参数将是 (value, key, list)。
> 
> [_.reduce](http://underscorejs.org/#reduce) (list, iterator, memo, [context])*别名*：**inject** , **foldl**
> 也称为 inject 和 foldl，reduce 将值列表归结为单个值。备忘录是归约的初始状态，它的每一步都应该由迭代器返回。

## [例子：](http://jsfiddle.net/shAtH/1/)

```
var dates = ['2012-10-01', '2012-10-02', '2012-10-03', '2011-01-01', '2011-01-02', '2011-06-03', '2010-09-01', '2010-09-02', '2010-08-22' ];
_.chain(dates)
    .map(function(date){ return date.split('-'); })
    .reduce(function(memo, num){ 
        if(!memo[num[0]]){ memo[num[0]] = {}; }
        if(!memo[num[0]][num[1]]){ memo[num[0]][num[1]] = []; }
        memo[num[0]][num[1]].push(num[2]);
        return memo;
    }, {})
    .tap(function(curVal){ alert(JSON.stringify(curVal)); })

//Produces
​{
   "2010":{
      "09":[
         "01",
         "02"
      ],
      "08":[
         "22"
      ]
   },
   "2011":{
      "01":[
         "01",
         "02"
      ],
      "06":[
         "03"
      ]
   },
   "2012":{
      "10":[
         "01",
         "02",
         "03"
      ]
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:20:16.053

首先，您将所有日期字符串解析为各自的部分。然后，您遍历这些部分，并将它们放入适当的数组中。

（一个非常笼统的问题的非常笼统的答案。）

# ruby-on-rails - heroku 在应该执行 DELETE 请求时执行 GET 请求

> ID：11405291
> 
> 赞同：1
> 
> 时间：2012-07-10T00:58:40.200
> 
> 标签：ruby-on-rails, heroku, routing

当我在我的应用程序中单击“退出”时，Heroku 在应该执行 DELETE 请求时对 URL 执行 GET 请求。当我在本地开发环境中单击“退出”时，它会将我退出。

```
user-users-macbook-air:app user$ heroku run rake routes
           root        /                         home#show
      users GET    /users(.:format)          users#index
            POST   /users(.:format)          users#create
   new_user GET    /users/new(.:format)      users#new
  edit_user GET    /users/:id/edit(.:format) users#edit
       user GET    /users/:id(.:format)      users#show
            PUT    /users/:id(.:format)      users#update
            DELETE /users/:id(.:format)      users#destroy
   sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
    session DELETE /sessions/:id(.:format)   sessions#destroy
     signup        /signup(.:format)         users#new
     signin        /signin(.:format)         sessions#new
    signout DELETE /signout(.:format)        sessions#destroy 
```

在我的应用程序中单击注销链接后：

```
user-users-macbook-air:app user$ heroku logs
2012-07-10T00:55:13+00:00 app[web.1]: Started GET "/signout" for 128.36.168.39 at 2012-07-10 00:55:13 +0000
2012-07-10T00:55:13+00:00 app[web.1]: 
2012-07-10T00:55:13+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/signout"):
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-ssl-1.3.2/lib/rack/ssl.rb:27:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:17:in `call'
2012-07-10T00:55:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2012-07-10T00:55:13+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
2012-07-10T00:55:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2012-07-10T00:55:13+00:00 app[web.1]: 
2012-07-10T00:55:13+00:00 app[web.1]: 
2012-07-10T00:55:13+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2012-07-10T00:55:13+00:00 heroku[router]: GET glassboard.herokuapp.com/signout dyno=web.1 queue=0 wait=0ms service=9ms status=404 bytes=728 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:05:37.557

我已经看过很多次了。这不是 Heroku 特有的——它发生在用户的浏览器中。

我正在为我的身份验证包使用设计，并且能够通过修改我的路由以允许用户通过使用`GET`reuest 而不是`DELETE`.

这是一个众所周知的问题，允许 HTTP`GET`注销的选项被普遍接受。

请参阅： [没有路线匹配“/users/sign_out”设计rails 3](https://stackoverflow.com/questions/6557311/no-route-matches-users-sign-out-devise-rails-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T06:03:06.653

No-Script will cause this behavior, if heroku is not 'allowed'. I verified that my page-source, rendered from Heroku, does specify the 'Delete' method, while the heroku logs show a 'Get' was executed, instead, when scripts were blocked.

Therefore, we need to write something into our app that signals the user ala, "Hey buddy, allow scripts to run or you cannot log-out."

The Heroku docs point to this stackoverflow-page as authoritative, so the more info here, the better.

# jquery - 可编辑 + 可排序 + 克隆

> ID：11405294
> 
> 赞同：0
> 
> 时间：2012-07-10T00:59:11.480
> 
> 标签：jquery, events, clone, jquery-ui-sortable, jeditable

我已经非常彻底地研究了这个问题，但到目前为止我还没有能够解决它。我了解 clone(true,true) 和使函数 live()，但事件仍然会失败。

这是我的示例 - [http://jsfiddle.net/vAfMf/2/](http://jsfiddle.net/vAfMf/2/) - 单击 + 号，然后尝试单击克隆的元素以触发 Jeditable。

以下是相关代码：

```
var fixHelper = function(e, ui) {
    ui.children().each(function() {
        $(this).width($(this).width());
    });
    return ui;
};
$(".tracklist").sortable({
        placeholder: "track-highlight",
        helper: fixHelper,
        items: "tr",
        start: function(event, ui) {
        i=0;    
        notdragged = false;
        thisthing = $(this);
    },
     stop: function(event, ui) {
         notdragged = true;
     },
    revert: true,
    update: function(event, ui) {
        $(".tracklist .numcol").each(function(){
        $(this).html("");
        });    
        $(".tracklist .numcol").each(function(){
        i++
        $(this).html(i+".&nbsp;&nbsp;");
        });
    }

});    

$(".eachtrack").editable("save.php", {
      select : true,
      style   : "display: inline",
      width : "95%",
      cancel    : "<button class=\'cancelthistrack\'>Cancel<\/button>",
      submit    : "<button class=\'savethis\'>Save<\/button>",    
      event : "custom_event"
});

$(".tracklist tr td .eachtrack").live("mousedown", function() {
    notdragged = true;
}).live("mouseup", function() {
    if (notdragged) {
        $(this).trigger("custom_event");
        $(this).parent().css("height", "auto");
    }
});
$(".artistcol,.infocol,.titlecol").live("mousedown", function() {
    notdragged = true;
}).live("mouseup", function() {
    if (notdragged) {    
        $(this).children(".eachtrack").trigger("custom_event");

    }
});

$(".tracklist tr .btnwrap .addt_outer .addt_inner .addt .pngfix").click(function(){
    var thisrow = $(this).parent().parent().parent().parent().parent();
    var newrow = thisrow.clone(true,true);
    newrow.insertAfter(thisrow);
    return false;
}); 
```

[基本上我在这里遇到了与这张海报](http://old.nabble.com/jEditable-Clone-Referring-to-the-Original-Element-td19574439s27240.html)完全相同的问题——当我克隆 Jeditable 元素时，单击克隆会打开原始元素而不是克隆。虽然回答了关于做什么的问题——重新绑定事件——但没有显示如何做的例子，我不知所措。我的示例很复杂，因为我有一些功能可以防止在 Sortable 完成时触发 Jeditable。

任何有关如何取消绑定原始元素的事件并重新绑定到克隆的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:25:21.693

我在 ExpertsExchange 上发布了这个问题并得到了一个我从中学到很多东西的答案。对于那些像我一样刚接触 JQuery 的人，我分享它是希望它能像对我一样具有启发性。

更新示例 - [http://jsfiddle.net/vAfMf/4/](http://jsfiddle.net/vAfMf/4/)

创建克隆的元素，抓取所有绑定的事件，然后以优雅的链将其反弹到克隆。

```
var fixHelper = function(e, ui) {
    ui.children().each(function() {
        $(this).width($(this).width());
    });
    return ui;
};
$(".tracklist").sortable({
    placeholder: "track-highlight",
    helper: fixHelper,
    items: "tr",
    start: function(event, ui) {
        notdragged = false;
    },
    stop: function(event, ui) {
        notdragged = true;
    },
    revert: true,
    update: function(event, ui) {
        $(".tracklist .numcol").each(function() {
            $(this).html("");
        });
        $(".tracklist .numcol").each(function(index) {
            $(this).html(index + 1 + ".&nbsp;&nbsp;");
        });
    }

});

$(".eachtrack").editable("save.php", {
    select: true,
    style: "display: inline",
    width: "95%",
    cancel: "<button class=\'cancelthistrack\'>Cancel<\/button>",
    submit: "<button class=\'savethis\'>Save<\/button>",
    event: "custom_event"
});

$(".tracklist tr td .eachtrack").live("mousedown", function() {
    notdragged = true;
}).live("mouseup", function() {
    if (notdragged) {
        $(this).trigger("custom_event");
        $(this).parent().css("height", "auto");
    }
});
$(".artistcol,.infocol,.titlecol").live("mousedown", function() {
    notdragged = true;
}).live("mouseup", function() {
    if (notdragged) {
        $(this).children(".eachtrack").trigger("custom_event");
    }
});

$(".tracklist tr .btnwrap .addt_outer .addt_inner .addt .pngfix").click(function() {
    var thisrow = $(this).parents("tr");
    var clone = thisrow.clone(false, false);
    clone.find(".eachtrack").editable("save.php", {
        select: true,
        style: "display: inline",
        width: "95%",
        cancel: "<button class=\'cancelthistrack\'>Cancel<\/button>",
        submit: "<button class=\'savethis\'>Save<\/button>",
        event: "custom_event"
    }).end().find(".tracklist tr td .eachtrack").live("mousedown", function() {
        notdragged = true;
    }).live("mouseup", function() {
        if (notdragged) {
            $(this).trigger("custom_event");
            $(this).parent().css("height", "auto");
        }
    }).end().find(".artistcol,.infocol,.titlecol").live("mousedown", function() {
        notdragged = true;
    }).live("mouseup", function() {
        if (notdragged) {
            $(this).children(".eachtrack").trigger("custom_event");
        }
    });
    thisrow.after(clone);
    $(".tracklist .numcol").each(function(index) {
        $(this).html(index + 1 + ".&nbsp;&nbsp;");
    });
    return false;
}); 
```

# asp.net - 使用自定义基类访问母版页会导致页面不呈现

> ID：11405295
> 
> 赞同：0
> 
> 时间：2012-07-10T00:59:31.920
> 
> 标签：asp.net, c#-4.0, master-pages

我在使用 ASP.NET/C# 4.0 时遇到了一个非常奇怪的问题，我无法找到答案。我的子母版页有一个自定义基础母版页，我的页面有一个自定义基础页类。我的问题是，如果我从我的任何页面访问主成员，页面内容本身不会被呈现，只有母版页。

因此，以不同的方式回顾一下：“母版页”继承 System.Web.UI.MasterPage “嵌套母版”使用“母版页”继承 System.Web.UI.MasterPage

“WebForm”使用“Nested Master”，WebForm 继承了继承 System.Web.UI.Page 的 CustomPageBase

当 CustomBaseMaster 访问 this.Master 时，它不会呈现 webform 的内容，只会呈现“Nested Master”和“Master Page”内容。我试过只读一个成员，写一个成员，同时读写，甚至不访问成员，只调用Debug.WriteLine(this.Master)

如果有帮助，我在“WebForm”上使用页面装饰器，需要更新“母版页”上的控件

不幸的是，我的谷歌搜索查询显示了如何访问母版页的公共成员的结果。但是我找不到任何东西来解释为什么在访问母版页时会导致页面内容不显示。

有没有人看到类似的东西并可以提供任何建议？谷歌没有太多帮助，现在已经搜索了几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:05:42.987

好的，当在类的顶部使用 Page 装饰器时，它会在 PreInit 完成之前分配页面类的属性。我使用 ILSpy 来查看访问页面的 Master 属性时会发生什么，如果在创建 Master 页面之前访问它（内部为 null）并且在调用所有 PreInit 方法之前，它将创建一个新的 master 页面并使用该内容。有点烦人。无论如何，我的解决方案是不要让属性在获取和设置它们时将值冒泡到父母版页，而是在我的基础页面和基础母版类中重载 OnLoad 事件，并在那里设置父级的属性。

所以，而不是这样做：

```
namespace MyWebsite
{
    public abstract class MyPageBase : Page
    {
        public int PropertyName
        {
            get
            {
                return ((MyMaster)this.Master).RatePageId;
            }
            set
            {
                ((MyMaster)this.Master).RatePageId;
            }
        }
    }
} 
```

我这样做了：

```
namespace MyWebsite
{
    public abstract class MyPageBase : Page
    {
        public int? PropertyName
        {
            get;
            set;
        }

        protected override void OnInit(EventArgs e)
        {
            base.OnInit(e);

            if (PropertyName != null)
            {
                ((MyMaster)this.Master).PropertyName = PropertyName.Value;
            }
        }
    }
} 
```

# jquery - JQuery Slider - 范围未以颜色突出显示

> ID：11405297
> 
> 赞同：0
> 
> 时间：2012-07-10T01:00:50.493
> 
> 标签：jquery

我的范围没有突出显示任何人都可以看到以下代码的任何问题

```
 var minA = 0;
            var maxA = 900;

            if (getParameterByName("min")) {
                minA = getParameterByName("min");
            }
            if (getParameterByName("max")) {
                maxA = getParameterByName("max");
            }

            $("#sliderbar").slider({
                range: true,
                orientation: "horizontal",
                min: 0,
                max: 900,
                values: [minA, maxA],
                slide: function (event, ui) {
                    $("#dnn$Menu1$lowerPrice").val(ui.values[0]);
                    $("#dnn$Menu1$upperPrice").val(ui.values[1]);
                    $("#low").val("$" + ui.values[0]);
                    $("#high").val("$" + ui.values[1]);
                },
                stop: function (event, ui) {
                    $("#dnn$Menu1$lowerPrice").val(ui.values[0]);
                    $("#dnn$Menu1$upperPrice").val(ui.values[1]);
                    $("#low").val("$" + ui.values[0]);
                    $("#high").val("$" + ui.values[1]);
                    var url = "BuyAccessories?min=" + ui.values[0] + "&max=" + ui.values[1];
                    $(location).attr('href', url);
                    window.location.href(url);

                }
            });
            $("#low").val("$" + minA);
            $("#high").val("$" + maxA); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:13:21.727

这纯粹是由于样式设置不正确。添加以下内容使其可见。

```
.ui-widget { font-family: Verdana,Arial,sans-serif; font-size: 1.1em; }
.ui-widget .ui-widget { font-size: 1em; }
.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif; font-size: 1em; }
.ui-widget-content { border: 1px solid #aaaaaa; background: #ffffff url(img/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x; color: #222222; }
.ui-widget-content a { color: #222222; }
.ui-widget-header { border: 4px solid #aaaaaa; background: #cccccc url(img/ui-bg_flat_75_cccccc_40x100.png) 50% 50% repeat-x; color: #222222; font-weight: bold; }
.ui-widget-header a { color: #222222; }
/* Overlays */
.ui-widget-overlay { background: #aaaaaa url(img/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; opacity: .30;filter:Alpha(Opacity=30); }
.ui-widget-shadow { margin: -8px 0 0 -8px; padding: 8px; background: #aaaaaa url(img/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; opacity: .30;filter:Alpha(Opacity=30); -moz-border-radius: 8px; -khtml-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; } 
```

# php - 页面上的分页粗体点击

> ID：11405299
> 
> 赞同：0
> 
> 时间：2012-07-10T01:01:03.150
> 
> 标签：php, pagination

当我点击页面时，我试图让链接变为粗体，但下面的代码让我失望了。有人可以指出我做错了什么吗？

```
for($i=1;$i<=$pages;$i++)
{       
    echo ($i == @$page) ? '<strong><a href="?page='.$i.'">'.$i.'</a> </strong> ': '<a href="?page='.$i.'">'.$i.'</a> ';
} 
```

# javascript - 在 Javascript 中从 JSON 对象中查找键值

> ID：11405306
> 
> 赞同：0
> 
> 时间：2012-07-10T01:02:09.807
> 
> 标签：javascript, json

我的 javascript 代码中有一个 JSON 对象，如下所示：

```
{"0" : "Jul 09, 2012 05:05 PM", "3" : "Jul 09, 2012 05:08 PM"} 
```

我已经使用解码了这个 JSON

```
var jsonObj = eval('(' + {/literal}{$json}{literal} + ')'); 
```

我可以使用访问值

```
jsonObj[i] 
```

但是如果我访问 jsonObj[2]，这会给我一个错误，因为它不在我的 json 中。

所以我希望有一种方法可以访问 JSON 的第一部分，即关键部分。以便我将它们存储在 JS 中的数组中并循环遍历它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:06:10.373

评估是邪恶的。无论如何，如果你想遍历你的 json 的属性（'keys'），你可以这样做

```
for(key in jsonObj) {
   if(jsonObj.hasOwnProperty(key)) {
     //do something with the values
     // jsonObj[key] 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:03:35.177

```
if (jsonObj.hasOwnProperty('2')) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:08:17.970

现代浏览器具有“静态”方法 Object.keys()。旧浏览器有一个垫片。然后，您可以遍历返回的键数组，或者如果您使用大多数框架，则使用 .indexOf() 或 .inArray() 。

# android - 导入 android-remote-stacktrace 时遇到问题

> ID：11405314
> 
> 赞同：0
> 
> 时间：2012-07-10T01:04:33.130
> 
> 标签：android, stack-trace

我正在尝试在崩溃时获取远程堆栈跟踪，因此我正在尝试使用[android-remote-stacktrace](http://code.google.com/p/android-remote-stacktrace/)。在 Eclipse 中，我将其导入并添加到我的构建路径中，但出现此错误：

```
07-09 20:54:32.983: E/AndroidRuntime(1814): java.lang.NoClassDefFoundError: com.nullwire.trace.ExceptionHandler 
```

这很奇怪，因为我在“参考库”中看到了 trace.jar，并且在那里看到[了这个类，您可以在我的 Eclipse 窗口的截图中看到](http://www.flickr.com/photos/gnychis/7539696150/in/photostream)。

有什么我想念的吗？ [这是调用此类的代码](https://github.com/gnychis/phone-activity/blob/master/src/com/gnychis/PhoneActivity/ActivityService.java#L109)，我链接到 github，以便您可以看到它在服务中使用。是因为“this”指的是服务而不是活动吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:06:38.087

您可以`libs`在项目文件夹中创建文件夹（如果没有的话）。把你`trace.jar`的`libs`。

# objective-c - NSPopUpButton + 绑定 + 显示所有选项

> ID：11405317
> 
> 赞同：3
> 
> 时间：2012-07-10T01:04:50.920
> 
> 标签：objective-c, cocoa, cocoa-bindings, nsarraycontroller, nspopupbutton

我正在尝试开发一个`NSPopUpButton`用作某些数据源的过滤器的过滤器，比方说一个`NSArrayController`填充表格的过滤器。

我可以将`NSArrayController`菜单中的 绑定到选择键路径，以便正确过滤数据，这没问题。

棘手的部分是，我希望它的内容`NSPopUpButton`依赖于`NSArrayController`使用绑定，但我想添加一个“显示全部”菜单项，或者至少一些不是来自核心数据并执行一些特殊的项目除了使用绑定和核心数据过滤表之外的操作。

我正在尝试`NSPopUpButton`在过滤器栏中执行类似 finder 使用的操作，菜单的最后一项执行特殊操作，而其他项只是过滤结果。

我知道这种方法是忘记绑定并以编程方式完成所有事情，因为我相信没有办法弄乱`NSArrayController`和绑定来添加这个不依赖核心数据的自定义菜单项，但因为我没有在 Apple Docs 上找到任何东西，在这里，我想分享我的想法……有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T23:22:45.600

听起来你在寻找 NSContentPlacementTagBindingOption。

您编辑附加到 NSPopupButton 的 NSMenu，如下所示

![设置弹出菜单按钮的菜单](../Images/0aefe1ec5800ff4d495c5f501a8343d2.png)

然后，您编辑要替换为数组控制器内容的 NSMenuItem 上的设置，以便它具有与之关联的有意义的标记

![将被绑定动态替换的项目的设置](../Images/ee4d7b73f7a7c1f480c64f5bc7a1d5aa.png)

然后，您将该标记指定为 NSPopupButton 的 content/content* 绑定上的内容放置标记值。

![弹出按钮本身的绑定](../Images/77187b6b0aee7e7c1ecc01ac6ccbbe42.png)

# java - 使用 JDOM 使所有属性名称小写

> ID：11405321
> 
> 赞同：0
> 
> 时间：2012-07-10T01:05:38.947
> 
> 标签：java, xml, parsing, lowercase, jdom

我想解析一个 XML 文档并使用 JDOM 将属性名称更改为小写。

例如，我想要以下内容：

```
<record ID="1" name="Dom" />
<record iD="2" nAmE="Bob" /> 
```

成为：

```
<record id="1" name="Dom" />
<record id="2" name="Bob" /> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:24:36.363

使用 JDOM 2.0.2，您可能会使用 XPath，并循环名称。问题是，例如，如果一个元素具有多个解析为相同小写名称的属性，例如“ID”和“id”...，那么您最终可能会发生冲突。但这可能是您赢得的不必处理。

尝试一些类似的代码（只会返回无命名空间命名空间中的属性）：

```
XPathExpression<Attribute> xp = XPathFactory.instance().compile("//@*", Filters.attribute());
for (Attribute a : xp.evaluate(mydoc)) {
    a.setName(a.getName().toLowerCase());
} 
```

如果您不想使用 XPaths（这种方式也可能更快），您可以循环后代：

```
for (Element e : mydoc.getDescendants(Filters.element())) {
    if (e.hasAttributes()) {
        for (Attribute a : e.getAttributes()) {
            a.setName(a.getName().toLowerCase());
        }
    }
} 
```

罗尔夫

# c# - 隐形边框 C#

> ID：11405325
> 
> 赞同：0
> 
> 时间：2012-07-10T01:06:51.603
> 
> 标签：c#, winforms, border, collision, mousemove

好的，所以我用 C# 制作了一个表单。您可以在运行时移动控件，例如按钮，您可以移动它或图片。无论如何，我想知道是否无论如何你可以制作某种不可见的边框，这样你就不能将控件拖出程序的屏幕。就像在 Windows 中一样，您可以将窗口拖出屏幕区域。我不希望你能做到这一点，我想看看你是否也能做到你可以在控件周围制作边框，这样你就不能将它们拖到彼此上。任何帮助都会很棒！谢谢！

好吧，我正在使用带有 WinForms 的 DevExpress DXv2。

```
 private void groupControl2_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            groupControl2.Left += e.X - move.X;
            groupControl2.Top += e.Y - move.Y;
        }
    }

    private void groupControl2_MouseDown(object sender, MouseEventArgs e)
        {
             move = e.Location;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:59:40.947

似乎您正在使用某种控制组件，为您提供拖放面板。

**首先检查该控件库是否具有用于移出可见窗口区域的内置功能。**

我想它有事件表明面板已经移动。检查这个伪代码：

```
if (panel.Left < 0) { } // Outside left border
if (panel.Top < 0) { } // Outside top border
if ((panel.Left + panel.Width) > form.Width){ } // Outside right border
if ((panel.Top + panel.Height) > form.Height) { } // Outside bottom border 
```

任何一个：

如果事件支持取消，则在上述任何一种情况下取​​消它。否则你可以实现类似这个伪代码的东西（实际的 WinForms 尺寸需要一些不同的值）

```
// Outside left border
if (panel.Left < 0) { panel.Left = 0; }

// Outside top border
if (panel.Top < 0) { panel.Top = 0; } 

// Outside right border
if ((panel.Left + panel.Width) > form.Width)
{
    panel.Left = form.Width - panel.Width;
} 

// Outside bottom border
if ((panel.Top + panel.Height) > form.Height)
{
    panel.Top = (form.Height - panel.Height);
} 
```

# c - 分离 fscanf 错误检查以便我可以传递特定消息？

> ID：11405326
> 
> 赞同：2
> 
> 时间：2012-07-10T01:07:04.507
> 
> 标签：c, error-handling, scanf

在这里对 C 来说是全新的。该程序应该在单行上读入一个片段文件，在它们之前和之后用“#”分隔。例如#fragment1##fragment2##fragment3#

我要检查的两个错误是片段不超过 1000 个字符，并且文件遵循片段两侧的正确格式“#”。我真的不明白 fscanf 语法是如何工作的，但我认为以下内容会检查错误：

```
 char buffer[MAX_FRAG_LEN+1];
  if (fscanf(fp, "#%1000[^#]#", buffer) == 1) {
    return strdup(buffer);
  } else {
    fprintf(stderr, "Error! Incorrect format.\n");
  } 
```

但是，我想将这些错误分开，以便我可以明确地传递一个消息，说明它是两者中的哪一个。如何单独进行支票？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:24:44.053

为了使您的技术发挥作用，您应该手动检查缓冲区之后的下一个字符是否是`'#'`后`fscanf`返回。这使您可以将过长的字符串错误与丢失的`"##"`错误区分开来。

```
 char buffer[MAX_FRAG_LEN+1];
  if (fscanf(fp, "#%1000[^#]", buffer) == 1) {
    int c = fgetc(fp);
    if (c == '#') return strdup(buffer);
    if (c != EOF) {
      ungetc(c, fp);
      fprintf(stderr, "Error! More than 1000 characters.\n");
    } else {
      fprintf(stderr, "Error! Last fragment did not end with '#'.\n");
    }
  } else {
    fprintf(stderr, "Error! Fragment did not start with '#'.\n");
  } 
```

但是，`fscanf`用于解析通常很棘手。如果输入的格式完全出乎意料，则可能很难从它们中正确恢复。因此，按照 Duck 的建议，通过在单个缓冲区中读取整行然后解析该行通常更容易处理错误。

# javascript - 如何在创建对象时运行函数？

> ID：11405332
> 
> 赞同：0
> 
> 时间：2012-07-10T01:08:57.223
> 
> 标签：javascript, jquery, canvas

### 问题：

我正在创建一个 HTML5 画布游戏，我想为我的船创建一个对象，将船的 src 分配给 images/powship.png。如果我创建船然后为 i 变量分配一个 src，它会起作用，但我想知道在我建造船时是否可以一次完成所有操作。

如果我做这样的事情有效：

```
ship = { //a class for my ship
    x : $(window).width()/2,
    y : $(window).height()/2,
    i : new Image()
}
ship.i.src="images/powship.png"; 
```

当我创建我的船时，我想一次完成所有事情（将所有东西放在一起）。像这样的东西：

```
ship = { //a class for my ship
    x : $(window).width()/2,
    y : $(window).height()/2,
    i : new Image(),
    src : function() {
        return this.i.src="images/powship.png"
    }
} 
```

但这似乎不起作用。

[有效的代码在这里](https://github.com/planetoftheweb/CanvasGame)

[演示在这里](http://planetoftheweb.com/exercises/canvasgame/)

[未缩小的 JS 文件](http://planetoftheweb.com/exercises/canvasgame/_/js/script.js)

### 问题：

如何在创建对象时运行函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:13:30.310

该函数`ship.src();`未运行，这`.src`就是未设置的原因。

您的船类可能希望在创建时运行更多的东西，因此构造函数是合适的。

```
var Ship = function(){
    // set up basic components of your class
    this.x = $(window).width()/2;
    this.y = $(window).height()/2;
    this.i = new Image(); 

    // preform any construction requirements
    this.i.src = "images/powship.png";
};

var ship = new Ship(); 
```

或者你可以这样咖喱：

```
var ship = function(){
    result = {
       x : $(window).height()/2,
       y : $(window).height()/2,
       i : new Image()
    }
    result.i.src = "images/powship.png";
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:21:13.507

您应该创建一个构造函数，它可以让您重用代码。

```
function Ship() {
    var win = $(window);
    this.x = win.width()/2;
    this.y = win.height()/2;
    this.i = new Image();
    this.src = this.i.src = "images/powship.png";
}

var ship1 = new Ship();
var ship2 = new Ship(); 
```

你不能做你想做的事情，因为对象在你创建它之后才存在，所以你不能在用文字符号创建它时引用它的属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T01:14:03.493

```
i : new Image({src : "images/powship.png" }) 
```

试试看，应该可以的。

# unity3d - Unity：第三人称与动画平台的碰撞

> ID：11405337
> 
> 赞同：1
> 
> 时间：2012-07-10T01:09:47.387
> 
> 标签：unity3d

第一次在堆栈上发帖，到目前为止一切看起来都很有希望！我在这里有一个复杂的问题，所以我会尽力提供我想要完成的确切细节。我正在与一个第三人称控制器一起工作，到目前为止一切都很好。我涉足了基本的上下平台，有点小故障，但一切正常。每当我的玩家穿过网格时，我都会确保网格碰撞器正在工作，并且将“刚体”附加到 Kinematic。这是踢球者，在我的游戏中，我有玩家可以跳上的转动齿轮。这很好，除了玩家没有用我的装备转身，这根据我的游戏玩法是有意义的。让我的角色与这个动画网格交互的过程是什么？我想象某种脚本，在我的统一生涯中，我的小白脑子现在无法理解。如果有人知道这个问题的解决方案，我很乐意得到任何帮助，无论哪种方式，我都会寻求解决方案。再次感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:56:43.813

这是假设您正在使用 Unity3D 附带的软件包，听起来像您。导入**Character Controllers**包后，您将在项目层次结构视图的*Standard Assets\Character Controllers\Sources\Scripts*文件夹中拥有一堆脚本。那里有一个名为**CharacterMotor.js**的脚本，将它附加到您正在运行 ThirdPersonController 的同一个 GameObject 上。

本质上，这个脚本在角色和场景之间增加了更多的交互性。该脚本中有几种方法可以在与移动对象接触时自动移动角色（只要它具有碰撞网格），基本上是通过继承对象的速度。

如果您的齿轮/齿轮设置了正确的碰撞网格，则只需将此脚本添加到您的角色中即可。

# jquery - 使用 jquery 的 next() 函数获取列表中的下一个元素时，如何在到达列表末尾后获取第一个元素？

> ID：11405338
> 
> 赞同：0
> 
> 时间：2012-07-10T01:09:50.323
> 
> 标签：jquery, next

从技术上讲，这不是针对“列表”（ul -> li），而是针对`div`容器内的一系列块`div`。我尝试了许多不同的方法来尝试实现这一目标，但它们都不起作用。发生的情况是，当我到达最后一个元素，然后单击“下一个按钮”时，它会将我带到列表中的第二个元素，而不是第一个元素。这通常是我正在使用的代码：

```
<div class="wrapperClass">
<div class="myClass" id="ID1">
    <div class="anotherClass">
        <input value="myValue1"/>
    </div>
</div>
<div class="myClass" id="ID2">
    <div class="anotherClass">
        <input value="myValue2"/>
    </div>
</div>
<div class="myClass" id="ID3">
    <div class="anotherClass"">
        <input value="myValue3"/>
    </div>
</div>
...
</div> 
```

和

```
var nextID = $('div#'+ID).next().find('input').val();
var lastID = $('div#'+ID+':last').find('input').val();

if( nextID == lastID )
{
    nextID = $('.wrapperClass').find('input:first').val();
}
// other code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:32:25.633

我意识到我的错误。我应该写

```
if( currentID == lastID )
{
    // blah
} 
```

我写的也不正确

```
$('div#'+ID+':last') 
```

由于 id 必须是唯一的。感谢“未定义”（指出这一点的未透露姓名的人）。我显然是一个新手。

# php - PHP如何截断数组？

> ID：11405342
> 
> 赞同：0
> 
> 时间：2012-07-10T01:10:31.053
> 
> 标签：php, truncate

> **可能重复：**
> [PHP 如何截断数组](https://stackoverflow.com/questions/7985416/php-how-to-truncate-an-array)

我有一个显示来自 MySQL 表的文本的数组。我想将数据截断到一定长度（未确定）并在截断末尾添加“...阅读更多”。

这是相关的代码块：

```
while($rows = mysql_fetch_array($getNews)){
                  $id = $rows['id'];
                  $title = strip_tags(stripslashes($rows['title']));
                  $editor1 = $show->news_article = stripslashes(html_entity_decode($rows['editor1']));
                  $poster = $rows['poster'];
                  $date = $rows['date']; 
```

（该脚本有效并且确实显示了数据，这是整个脚本：）

```
<?php

function getColour($number){
    switch ($number) {        
    }
    return $colour;
}
// For the header
$colour = 1;

if($_POST['submit']){
    // Clean the submitted form
    $comment = cleanTag($_POST['comment']);
    $name = cleanTag($_POST['name']);
    $tstamp = time();
        $ip = getenv("REMOTE_ADDR");
    $id = cleanTag($_POST['id']);

    if(!$id){
        die("Oops: Unexpected error!");
    }
    if($name == "" || $comment == ""){
        die("You cannot leave any fields blank");
    }
    // Insert the comment
    mysql_query("INSERT INTO comments_articles (comment, name, article, tstamp, ip) VALUES ('{$comment}', '{$name}', '{$id}', '{$tstamp}', '{$ip}')") or die(mysql_error());

    // Tell them the form was submitted
    echo("Your comment has been posted!");

# Insert action log
$date = date("d/m/y - h:ia");
$insertLog = "INSERT INTO `logs` ( `log` , `date` ) VALUES ('<strong>$name ($ip)</strong> has posted a comment<strong>$title</strong>', '$date')";
mysql_query($insertLog) or die('MySQL Error.');

} else if($_GET['id']){
    // Get the id and clean it
    $id = cleanTag($_GET['id']);

    // Get the news and the comments
    $getNews = mysql_query("SELECT * FROM news WHERE category = 1 AND approved = 1 AND id = {$id} ORDER BY id DESC") or die(mysql_error());
    $newsRows = mysql_fetch_array($getNews);

    $getCom = mysql_query("SELECT * FROM comments_articles WHERE article = {$id} ORDER BY tstamp DESC") or die(mysql_error());

    // Show the news article again
    $id = $newsRows['id'];
    $title = strip_tags(stripslashes($newsRows['title']));
    $editor1 = $show->news_article = stripslashes(html_entity_decode($newsRows['editor1']));
    $poster = $newsRows['poster'];
    $date = $newsRows['date'];

    $headColour = getColour($colour);

    echo("<h1>{$title}</h1>
        $editor1
        <i>Posted by $poster on $date</i><br>
    <hr>");

    // Get the amount of comments
    $numrows = mysql_num_rows($getCom);
    // Echo out the comments
    if(!$numrows){
        // There are no comments
        echo("<i>There are no comments for this article</i>");
    } else {
        // Show the comments
        echo("<i>There are $numrows comment(s) for this article</i><br><br>");
        while($rows = mysql_fetch_array($getCom)){
            $comment = strip_tags($rows['comment']);
            $name = $rows['name'];
            $article = $rows['article'];
                        $ip = $rows['ip'];
            $timestamp = date("m/d/y - h:ia", $rows['tstamp']);
            echo("$comment <br>Posted by $name on $timestamp <br> <br><hr>");
        }

    }

    // Show the form to submit a comment
    echo("<form method=\"post\">
        Comment: <textarea name=\"comment\" id=\"comment\" cols=\"45\" rows=\"5\"></textarea><br>
        Name:<input type=\"text\" name=\"name\"><br>
        <input type=\"hidden\" name=\"id\" value=\"{$id}\">
        <input type=\"submit\" name=\"submit\" value=\"Post comment!\"><br>
          </form>");
} else {
    // Show the main news articles
    $getNews = mysql_query("SELECT * FROM news WHERE category = 1 AND approved = 1 ORDER BY id DESC") or die(mysql_error());

    // If there are no articles
    if(mysql_num_rows($getNews) == 0){
          echo("<br /><br /><br /><div class=\"warning\"><center><b>There are currently no news articles. Please check back later!</center></b></div>");
      } else {
        // Otherwise show the articles
          while($rows = mysql_fetch_array($getNews)){
                  $id = $rows['id'];
                  $title = strip_tags(stripslashes($rows['title']));
                  $editor1 = $show->news_article = stripslashes(html_entity_decode($rows['editor1']));
                  $poster = $rows['poster'];
                  $date = $rows['date'];
     {
    $headColour = getColour($colour);
        $commentQ = mysql_query("SELECT * FROM comments_articles WHERE article='{$id}'");
        $commentR = mysql_num_rows($commentQ);
        echo("<h1>{$title}</h1>
        $editor1
        <a href=\"index.php?id=$id\">$commentR comment(s)</a> <i>Posted by $poster on $date</i><hr>");
    $colour ++;
        // If the colour count is 5 (we only have four colours), reset it back to 1
        if($colour == 5){
            $colour = 1;
        }
          } 

          }
    }
}
  ?> 
```

提前感谢您的帮助！丹尼尔·米内特

# mysql - 根据另一列的值插入重复记录

> ID：11405344
> 
> 赞同：0
> 
> 时间：2012-07-10T01:11:20.573
> 
> 标签：mysql, zend-framework

我有一个名为 的数据库表`Student`，列为`id`, `name`, `age`。 `id`是主键，`name`不为空，`age`可以为空

我想在 php Zend 中实现以下内容： 如果**值不同，则仅****在 db 中****添加重复的学生。`name``age`**

在 function/action 内部`addStudentAction`，我正在调用 Student 模型的函数 -`findStudent`以实现要求：

```
public function findStudent($name)
{
    $result = null;

    $select = $this->select(Zend_Db_Table::SELECT_WITH_FROM_PART)
    ->setIntegrityCheck(false)
    ->where('student.name = ?', $name);

    //error_log($select->assemble());

    $result = $this->getAdapter()->fetchRow($select);

    return $result;
}

public function addStudentAction() {
    $data = $_POST;
    $studentModel = new Application_Model_Student;
    $result = $studentModel->findStudent($data['name']);

    if(!empty($result)) { 
        error_log("found student name in db, going to get age");

       //Check for age
       if( (!empty($result['age'] )) {
             if( $result['age'] != $data['age']) {
                  error_log("going to add student as new record");
                  return $this->insert($data);
             }
             else {
                  error_log("not adding new student record ");
             }
       }
    }
} 
```

现在，**可能有多个学生记录具有相同`name`但不同的`age`值。**因此，在添加新学生时，我需要将所有记录的年龄（如果名称匹配）与传入的年龄值进行比较。

实现此要求的最佳方法是什么？任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:30:58.733

最简单的方法是在名称上创建一个复合唯一索引，然后是年龄字段。UNIQUE 允许多个 NULL 值，因此这不是问题。根据您的数据库大小和使用情况，这可能不是最优选的选项，在这种情况下，在 INSERT 之前对学生信息进行简单的 SELECT 以检查他/她是否已经在其中将是最佳解决方案。

让我知道是否需要详细说明。我很乐意给你举一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:30:19.427

你如何用名字和年龄做一个新的 SELECT：

```
public function findStudentWithAge($name, $age =null)
{
    $result = null;

    $select = $this->select(Zend_Db_Table::SELECT_WITH_FROM_PART)
    ->setIntegrityCheck(false)
    ->where('student.name = ?', $name);
    if($age) $select->where('student.age = ?', $age);

    //error_log($select->assemble());

    $result = $this->getAdapter()->fetchRow($select);

    return $result;
} 
```

现在在 addStudentAction 中：

```
public function addStudentAction() {
    $data = $_POST;
    $studentModel = new Application_Model_Student;
    $result = $studentModel->findStudent($data['name'], $data['age']);

    if(!empty($result)) { 
        error_log("found student with this age, cannot add the record");
    } else {
        $this->insert($data);
    }
} 
```

# iphone - 为什么我无法从 MFMailComposeViewController 发送邮件？

> ID：11405345
> 
> 赞同：7
> 
> 时间：2012-07-10T01:11:53.040
> 
> 标签：iphone, ios, xcode, mfmailcomposeviewcontroller

我从这里找到了这个源代码并尝试使用它发送邮件。我成功收到了“MFMailComposeResultSent”消息，但没有发送实际邮件。我不明白为什么不工作。另外，我附上了一张来自 NSData 的图片，但它没有显示在 mailcomposeview 中。这段代码有什么问题？实际上，我只需要使用附件图像调用本机邮件应用程序，但我听说无法使用附件调用本机应用程序。请让我知道我的代码有什么问题。问题 1：不从 mailcomposeview 发送邮件，问题 2：不显示附加图像。最佳：运行带有附加图像的本机邮件应用程序。我会很高兴地等待你的答复。谢谢。

```
-(void) sendMail
{
NSLog(@"Mail");
MFMailComposeViewController *mfMailView = [[MFMailComposeViewController alloc]init];
NSData *imgData = UIImagePNGRepresentation(imgPreview.image);
mfMailView.mailComposeDelegate = self;

[mfMailView addAttachmentData:imgData mimeType:@"image/png" fileName:@"Me.png"];

//also tried this
//[mfMailView addAttachmentData:imgData mimeType:@"image/png" fileName:@"Me"];

[mfMailView setSubject:@"TE~st"];

[mfMailView setMessageBody:@"Download Me~!" isHTML:YES];
[self presentModalViewController:mfMailView animated:YES];
}

-(void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
switch (result) {
    case MFMailComposeResultCancelled:
        NSLog(@"cancel?");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"saved?");
        break;
    case MFMailComposeResultSent:
        NSLog(@"Sent succed");
        [controller dismissModalViewControllerAnimated:YES];
        break;
    case MFMailComposeResultFailed:
        NSLog(@"sent failue");
        NSLog(@"%@",error);
        break;
    default:
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T04:05:59.070

1.  确保您在设置中配置了一个帐户。
2.  我没有找到任何收件人？？

您可以从此[链接](http://www.roseindia.net/answers/viewqa/Mobile-Applications/18176-iPhone-MFMailcomposeviewcontroller-example.html)中获取参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T08:41:35.207

在 swift 3 中，您可以使用这个清晰的代码：

```
 @IBAction func sendMail(_ sender: Any) {

        print(MFMailComposeViewController.canSendMail())
        if MFMailComposeViewController.canSendMail() {
            let mail = MFMailComposeViewController()
            mail.mailComposeDelegate = self
            mail.setToRecipients(["test@test.com"])
            mail.setMessageBody("<p>This is test Mail!</p>", isHTML: true)

            present(mail, animated: true)
        } else {
             let email = "test@test.com"
             if let url = URL(string: "mailto:\(email)") {
             UIApplication.shared.open(url)
             }

        }

    }

    func mailComposeController(_ controller: MFMailComposeViewController, didFinishWith result: MFMailComposeResult, error: Error?) {
        controller.dismiss(animated: true)
        switch result {
        case .cancelled:
            print("Mail cancelled")
        case .saved:
            print("Mail saved")
        case .sent:
            self.allertInfo(_title: "Mail Info", _message: "Mail is sent successfuly", _actionTitle: "OK")
            print("Mail sent")
        case .failed:
            self.allertInfo(_title: "Mail Info", _message: "Mail isn't sent.",
_actionTitle: "OK")
            print("Mail sent failure: \(error?.localizedDescription)")
        default:
            break
        }

    }

    func allertInfo(_title:String, _message:String, _actionTitle:String) {

        let alert = UIAlertController(title: _title, message: _message, preferredStyle: UIAlertControllerStyle.alert)
        alert.addAction(UIAlertAction(title: _actionTitle, style: UIAlertActionStyle.default, handler: nil))
        self.present(alert, animated: true, completion: nil)

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T10:59:24.883

斯威夫特 5 和 Xcode 12.5.1 ....

打开配置邮件（如果存在）或转到其他选项...

声明反馈邮件

```
let recipientEmail = "feedback@gmail.com" 
```

点击事件

```
 @IBAction func openEmail(_ sender: Any) {

        if MFMailComposeViewController.canSendMail() {
            self.sendEmail(title: "Subject")
        } else {
            if let emailUrl = createEmailUrl(to: recipientEmail,
                                             subject: "Subject", body: "Send from my iPhone") {
                UIApplication.shared.open(emailUrl)
            }
        }
    }

func sendEmail(title : String){
    let EmialVC = configuredMailForWriteWithUs(title: title)
    self.present(EmialVC, animated: true, completion: nil)
}

       private func createEmailUrl(to: String, subject: String, body: String) -> URL? {
           let subjectEncoded = subject.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!
           let bodyEncoded = body.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!

           let gmailUrl = URL(string: "googlegmail://co?to=\(to)&subject=\(subjectEncoded)&body=\(bodyEncoded)")
           let outlookUrl = URL(string: "ms-outlook://compose?to=\(to)&subject=\(subjectEncoded)")
           let yahooMail = URL(string: "ymail://mail/compose?to=\(to)&subject=\(subjectEncoded)&body=\(bodyEncoded)")
           let sparkUrl = URL(string: "readdle-spark://compose?recipient=\(to)&subject=\(subjectEncoded)&body=\(bodyEncoded)")
           let defaultUrl = URL(string: "mailto:\(to)?subject=\(subjectEncoded)&body=\(bodyEncoded)")

           if let gmailUrl = gmailUrl, UIApplication.shared.canOpenURL(gmailUrl) {
               return gmailUrl
           } else if let outlookUrl = outlookUrl, UIApplication.shared.canOpenURL(outlookUrl) {
               return outlookUrl
           } else if let yahooMail = yahooMail, UIApplication.shared.canOpenURL(yahooMail) {
               return yahooMail
           } else if let sparkUrl = sparkUrl, UIApplication.shared.canOpenURL(sparkUrl) {
               return sparkUrl
           }

           return defaultUrl
       } 
```

如果用户没有任何邮件配置，它将要求其他邮件选项...

# ruby - 如何使用带有指定路径的 Bundler Ruby 版本

> ID：11405348
> 
> 赞同：1
> 
> 时间：2012-07-10T01:12:17.260
> 
> 标签：ruby, bundler

我在一个系统 Ruby 版本为 1.9.3p0 的 VM (Lucid 64b) 上。

我有一个创建 .deb 文件的 Ruby 脚本——该脚本需要使用我安装的 Ruby 1.8.7 `/foo/ruby/1.8.7`。有一个现有`Gemfile`的要与 Bundler 一起使用，我不能使用 RVM，也不能在系统级别安装 gem。

我的`.bashrc`包括（并已获得来源）

```
export PATH=$PATH:/foo/ruby/1.8.7/bin 
```

但`ruby -v`仍然给我

```
ruby 1.9.3p0 (2011-10-30) [x86_64-linux] 
```

## 问题

*   如何更改 Ruby 版本以供我的用户使用 Ruby 1.8.7？

    我跑过：`bundle install --path vendor/bundle`

    所以在那个目录中（实际上`./vendor/bundle/ruby/1.8/cache/gems`）是我需要的所有 gem，但是当我运行 Ruby 脚本时，它没有找到所需的 gem。我像这样运行脚本`/foo/ruby/1.8.7 script_to_gen_deb_file.rb`

*   如何让红宝石查看/使用捆绑的宝石？

## 更新

我能够解决它。我需要使用

```
/foo/ruby1.8.7/bundle exec /foo/ruby1.8.7/ruby script_to_gen_deb_file.rb 
```

我以前试过这个，但我得到了一个不相关的错误，并认为是环境问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:49:12.163

Change your path so the special ruby gets precedence?

```
export PATH=/foo/ruby/1.8.7/bin:$PATH 
```

# ruby-on-rails - Ruby on Rails：如何在控制器函数之间传递变量？

> ID：11405356
> 
> 赞同：1
> 
> 时间：2012-07-10T01:13:48.623
> 
> 标签：ruby-on-rails

我需要在 create 函数中使用新函数中的 params[:number] ，我该怎么做呢？

```
def new
   @test_suite_run = TestSuiteRun.new

    @tests = Test.find(:all, :conditions => { :test_suite_id => params[:number] })
end

def create        
    @test_suite_run = TestSuiteRun.new(params[:test_suite_run])

    @tests = Test.find(:all, :conditions => { :test_suite_id => //I need the same params[:number] here})   
end 
```

编辑：我想我对 new 和 create 之间的区别感到困惑。我通过将参数 :number 传递给 new 来获取它。

`new_test_suite_run_path(:number => ts.id)`

然后我用它来生成表格。我不明白在 create 函数中该做什么。如果我删除控制器中的创建功能，当我以新的形式提交表单时，它会给我一个错误，说控制器中没有创建操作。这是否意味着我必须将所有新内容移到 create 函数中？这怎么可能，我必须创建一个 create.html.erb 并移动我的所有表单信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T01:15:34.100

您可以使用 Flash： [http ://api.rubyonrails.org/classes/ActionDispatch/Flash.html](http://api.rubyonrails.org/classes/ActionDispatch/Flash.html)

> flash 提供了一种在动作之间传递临时对象的方法。你放在闪光灯里的任何东西都会暴露在下一个动作中，然后被清除。

* * *

```
def new
   @test_suite_run = TestSuiteRun.new
   @tests = Test.find(:all, :conditions => { :test_suite_id => params[:number] })

   flash[:someval] = params[:number]
end

def create        
    @test_suite_run = TestSuiteRun.new(params[:test_suite_run])

    @tests = Test.find(:all, :conditions => { :test_suite_id => flash[:someval] })   
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T01:51:11.820

> 我想我对 new 和 create then 之间的区别感到困惑。

让我们先解决这个问题。

`new`方法为 Rails 构建 TestSuiteRun 实例的表单生成视图。此实例仅*暂时*存在于内存中。

`create`方法获取表单中输入的数据，并将创建的实例*永久*保存到数据库中。

我认为你不需要改变你的`new`方法。

尝试将您的`create`方法更改为此。

```
def create
  @test_suite_run = TestSuiteRun.new(params[:test_suite_run])
  @test_suite_run.save
end 
```

# php - 哪些东西要放在 symfony 包中

> ID：11405362
> 
> 赞同：1
> 
> 时间：2012-07-10T01:14:33.710
> 
> 标签：php, symfony

我是 symfony 的新手，我的项目是在 symfony 中构建一个复杂的 Web 应用程序。

会有很多小功能，比如 pdf 导出、xls 导出、文档上传，可以在以后的项目中使用。

但我不确定是否应该为 pdf、xls、图像上传或其他内容制作单独的捆绑包。

我想要的只是我可以重用这些类。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:57:30.273

从一个捆绑包中的所有内容开始。特别是如果您不打算重新分发捆绑包。在开发类时使用适当的关注点分离对于您自己的任何项目都具有足够的可重用性。您可以在单个包中使用命名空间来组织更多内容。过早地将您的项目分成多个捆绑包会增加不必要的复杂性，并且几乎没有（如果有的话）优势。当/如果对捆绑包的需求变得更加明显时，请将其保存以进行重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:06:23.273

这取决于。有些人认为所有东西都打包在一起。我个人认为这是错误的，正确的方法是开发小组件并将捆绑包集成到框架中，就像 FrameworkBundle、SecurityBundle 等所做的那样。

有关小型组件的示例，您可以查看 Vandpibe。这只是 Symfony2 组件的小组件/桥梁。

[http://github.com/vandpibe](http://github.com/vandpibe)。

# ruby-on-rails - 如何通过考虑 rails3 的数据库设计来设置操作

> ID：11405363
> 
> 赞同：0
> 
> 时间：2012-07-10T01:14:46.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

假设您将模型称为“主题”作为父模型，将“评论”模型作为子模型。在 url 'topics/show/35' 上，您可以看到属于该主题 ID#35 的所有评论。

当登录的用户想在这个页面发表他的新评论时，我应该在topics_controller.rb中写'comment_create'动作吗？或者只是在comments_controller.rb 中编写“创建”操作，然后从该页面调用它？哪个是常规方式？？

如果我在comments_controller 中调用“创建”操作，我如何在视图中写入以通过

1.  '模型名称'添加评论
2.  '型号 ID#'
3.  '评论正文'

还是我应该像这样单独编写动作？

控制器/comments_controller.rb

```
 def create_in_topic
   code here! to add new comment record that belongs to topic....
  end

  def create_in_user
   code here! to add new comment record that belongs to user....
  end 
```

供您参考，评论添加操作应该是这样的。

```
 def create

   @topic = Topic.find(params[:topics][:id] )
   @user_who_commented = current_user 
   @comment = Comment.build_from( @topic, @user_who_commented.id, params[:topics][:body] )
   @comment.save
   redirect_to :back   
   flash[:notice] = "comment added!"

  end 
```

**示例**更新！！！

意见/主题/show.html.erb

```
<table>
  <tr>
    <th>ID</th>
    <th>Title</th>
    <th>Body</th>
    <th>Subject</th>
    <th>Posted by</th>
    <th>Delete</th>
  </tr>

<% @topic.comment_threads.each do |comment| %>
  <tr>
    <td><%= comment.id %></td>
    <td><%= comment.title %></td>
    <td><%= comment.body %></td>
    <td><%= comment.subject %></td>
    <td><%= comment.user.user_profile.nickname if comment.user.user_profile %></td>
    <td> **Comment destroy method needed here!!!** </td>
    </tr>
<% end %>
</table>

<%=form_for :topics, url: url_for( :controller => :topics, :action => :add_comment ) do |f| %>

    <div class="field">
      <%= f.label :'comment' %><br />
      <%= f.text_field :body %>
    </div> 

    <%= f.hidden_field :id, :value => @topic.id %>

  <div class="actions">
    <%= f.submit %>

<% end %> 
```

控制器/topics_controller.rb

```
 def add_comment
   @topic = Topic.find(params[:topics][:id] )
   @user_who_commented = current_user
   @comment = Comment.build_from( @topic, @user_who_commented.id, params[:topics][:body] )
   @comment.save
   redirect_to :back
   flash[:notice] = "comment added!"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:45:50.160

我认为最直接的实现将是您的主题控制器中的一个动作（即：add_comment）。一旦视图调用 TopicController#add_comment 操作，您将拥有所有主题信息以及评论数据，因此您可以轻松地将评论添加到主题中。

如果您需要进一步的帮助，请告诉我。联邦快递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:25:36.893

好吧，我不确定，因为那个宝石，但你可以尝试这样的事情：

```
<%=form_for @topic, url: url_for( :controller => :topics, :action => :add_comment ) do |f| %>
    <table>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Body</th>
            <th>Subject</th>
            <th>Posted by</th>
            <th>Delete</th>
        </tr>

    <% @topic.comment_threads.each do |comment| %>
        <%= f.fields_for :comment_threads, comment do |comment_form| %>
            <tr>
                <td><%= comment.id %></td>
                <td><%= comment.title %></td>
                <td><%= comment.body %></td>
                <td><%= comment.subject %></td>
                <td><%= comment.user.user_profile.nickname if comment.user.user_profile %></td>
                <td>Delete? <%= comment_form.check_box :_destroy %></td>
            </tr>
        <% end %>
    <% end %>
    </table>

    <div class="field">
        <%= f.label :'comment' %><br />
        <%= f.text_field :body %>
    </div> 

    <%= f.hidden_field :id, :value => @topic.id %>

    <div class="actions">
        <%= f.submit %>
    </div>
<% end %> 
```

让我知道它是否对您有帮助！联邦快递

# html - IE 仅填充下拉问题我有一个左侧有一些填充的选择列表： <select><option>Opt A</option> <option>Opt B</option></select> CSS select { padding-left:20px; } 在除 IE 之外的所有浏览器中（我使用的是 IE8、Win XP、IE8 标准），我可以通过单击下拉列表左侧的填充轻松打开选择。但是，在 IE 中，需要两次单击才能使

> ID：11405364
> 
> 赞同：1
> 
> 时间：2012-07-10T01:14:53.103
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:34:36.420

这是 IE 中的一个常见问题，一些属性被破坏了`<select>`，现在，由于您对新的和不同的解决方案持开放态度，我会推荐这些 jquery 解决方案：

*   [选项1](http://harvesthq.github.com/chosen/)
*   [选项 2](http://jquery.sanchezsalvador.com/jquery/page/jquerycomboboxexamplebasic.aspx)
*   [选项3](http://developer.yahoo.com/yui/examples/autocomplete/ac_combobox.html)（这个不是jquery）

希望能帮助到你！

# extjs - Sencha Touch Ext.picker setData 无法正常工作

> ID：11405365
> 
> 赞同：2
> 
> 时间：2012-07-10T01:14:56.847
> 
> 标签：extjs

我一直试图弄清楚为什么我无法使用 setData 方法更新 Sencha Touch 选择器数据字段（请参阅帖子末尾的代码）。我创建了一个名为 slotsdata 的数组，在其中定义了我的数据。数据看起来完全像这样：

```
{text: '50 KB/s', value: 50},  
         {text: '100 KB/s', value: 100},  
         {text: '200 KB/s', value: 200},  
         {text: '300 KB/s', value: 300} 
```

1.  当我尝试使用 setData() picker.setData(slotsdata); 设置数据时 不显示错误，但选取器不显示任何数据。

2.  当我尝试像这样更新数据时： 它不起作用。控制台中没有错误。选择器是空的。
    `slots: [
    {
    name : 'picker_slot1',
    title: 'slot1',
    data: [slotsdata]
    }
    ]`

3.  我可以更新的唯一方法是使用以下语法：

    `slots: [
    {
    name : 'picker_slot1',
    title: 'slot1',
    data: slotsdata
    }
    ]`

我希望能够使用方法 #1 更新我的选择器数据。谁能帮我解决这个问题。任何帮助将不胜感激。

这是代码：

```
myFunction: function(){  
var data = this.getData();  
var slotsdata = [];  
var pickerData = data.dosage.split(',');  
for( var i = 0; i < pickerData.length; i++ ){  
    slotsdata.push({text: pickerData[i], value: pickerData[i]})  
}  
var picker = Ext.create('Ext.Picker', {  
    slots: [  
        {  
            name : 'picker_slot1',  
            title: 'slot1',  
            data: slotsdata  
        }  
    ]  
});  
//this does not work  
//picker.setData(slotsdata); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:02:58.030

您可以使用`setSlots()`选择器类的方法，例如：

```
picker.setSlots({
    name: 'limit_speed',
    title: 'Speed',
    data: [
        { text: '50 KB/s', value: 50 },
        { text: '100 KB/s', value: 100 }
    ]
}); 
```

# php - 基于浏览器特性动态包含 PHP

> ID：11405366
> 
> 赞同：0
> 
> 时间：2012-07-10T01:14:58.007
> 
> 标签：php, javascript, html, xhtml, include

**改写**

我有一个用 HTML5 编写的网站，以及用 XHTML 编写的同一个网站。我想根据某人是否使用支持 HTML5 的一些最基本功能的浏览器来呈现一个或另一个。

**笔记**

该站点不使用 HTML5 的画布、音频或视频功能。它只是简单地标记为side、section、nav 等，并使用CSS3 的一些有趣功能进行样式装饰。HTML5 站点和 XHTML 站点之间的差异很小，如果我能做到这一点，任何人都可能几乎不会注意到。内容相同，只是呈现方式略有不同。

**我这样做的原因**

一旦恐龙浏览器消失，我希望我可以简单地发布 HTML5 站点，并废除旧的 XHTML。

我遇到了一些后勤障碍，还没有完全确定我想如何去做。我最初的想法是使用 Javascript 条件语句来确定要渲染的 PHP。是的，继续笑吧，我可能有一天也会笑。在对此进行调查时，有人评论说 XML 可能使这成为可能。我相当有能力使用 Javascript、PHP 和 XML。这是我第一次尝试将 Javascript 与 PHP 集成，所以现在我明白了为什么我最初的计划需要更多的工作。

最终，我强烈地感觉到这就是我想要前进的方式。我阅读了渐进增强与优雅降级的文章，但我决定为我的客户提供一个漂亮的网站，使用所有新的语义标签和简单的样式选择器来增加 SEO 并保证当 HTML4 消失时，这个新网站将继续存在时间的考验……至少是一小会儿。

如果您强烈反对这种方法，我愿意听听您的意见。无论哪种方式，请分享您的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:17:34.850

不不不不不不！

两点：

1.  使用[HTML5 shiv](http://code.google.com/p/html5shiv/) - 为旧的 IE 浏览器提供 HTML5 功能）
2.  [渐进式增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)- 您不应该为不同的浏览器编写代码。您的代码应该适用于*所有*浏览器。然后添加增强用户体验的功能，但站点运行不需要这些功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T01:44:12.787

你所求是不可能的；正如我已经解释过的，PHP 是服务器端，而 JS 是客户端；php 端所做的任何事情都在页面交付给用户时完成，因此 js 不可能影响 php 端，除非您的网站或内容交付*完全*在 ajax 中完成，这是一种使用 js 的方法和php 检索信息；简而言之，js 向您服务器上的另一个 php 页面发送请求并返回结果。

然而，这要复杂得多，在您对 JS 和 PHP 都更加熟悉之前，我不建议您这样做。

然而，除此之外，php 中有一个解决方案，虽然我现在没有完整的代码。

解决方案是 php 4 和 5 的函数[`get_browser()`](http://php.net/manual/en/function.get-browser.php)：

```
$arr = get_browser(null, true);
$var = "some browser";
if ($arr['parent'] == $var) {
   require('/php/file.php');
}
else {
   //etc
} 
```

以上是您的答案更新之前；关于上述更新，我无话可说。

**更新：**关于下面关于 ajax 的评论之一，我将尝试.. 一个例子。我不会尝试称它为“简单”，因为 ajax 绝不是……虽然回到正题……

HTML：

```
<html>
    <body>
        <div id="main_body">
        </div>
    </body>
</html> 
```

JS：

```
//some code to determine user-agent/browser, set variable 'agent' with result
var use_html5;
if (agent == browser) {
    use_html5 = 'yes'
}
else {
    use_html5 = 'no'
}

function retrv_body() {
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4) {//readState 4 is when the request has finished;
            //0: request not initialized 
            //1: server connection established
            //2: request received 
            //3: processing request 
            //4: request finished and response is ready
            document.getElementById('main_body').innerHTML = xmlhttp.responseText;
            //set html of div with id 'main_body' to rendering retrieved from php_file_in_same_dir.php
        }
    }
    xmlhttp.open("POST","php_file_in_same_dir.php",true); 
    //set type of form, boolean is in regards to whether the request is asynchronus or synchronous
    //most ajax requests are async, which means they themselves finish executing usually after the function itself has run.  I'm not truly knowledgeable regarding this specific thing since I've only ever used async requests, though I would assume being a sync request would mean the function actually waits until it returns a value before it finishes executing.
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    //set the headers of the content.
    xmlhttp.send("html5=" + use_html5);
    //finally, send the data.  Depending on the data, the data may need to be url-encoded.
}

retrv_body(); 
```

PHP：

```
<?php
if ($_POST['html5'] == 'yes') {
    include('body5.php');
}
else {
    include('body_other.php');
}
//body generating code, render page.
?> 
```

以上只是一个例子，我不建议实际使用它，保存`retrv_body()`功能，并将其更改为您真正可以使用的东西。

希望我在代码中的注释有助于理解；如果还有什么要问的，请随时要求我更彻底地解释。

# vb.net - 解析 csv 文件时，索引超出了数组的范围

> ID：11405367
> 
> 赞同：-1
> 
> 时间：2012-07-10T01:15:08.623
> 
> 标签：vb.net, parsing, csv

```
Do While inputstream.Peek <> -1
    newstr = inputstream.ReadLine().Split(",")
    item1 = newstr(0)
    item2 = newstr(1)
    item3 = newstr(2)
    item4 = newstr(3)
    item20 = newstr(19)
    Me.ListView1.Items.Add(item1)
    Me.ListView1.Items.Item(ListView1.Items.Count - 1).SubItems.Add(item2)
    Me.ListView1.Items.Item(ListView1.Items.Count - 1).SubItems.Add(item3)
    Me.ListView1.Items.Item(ListView1.Items.Count - 1).SubItems.Add(item4)
    Me.ListView1.Items.Item(ListView1.Items.Count - 1).SubItems.Add(item20)
Loop
inputstream.Close() 
```

我收到索引越界错误，CSV 文件是一个 winamp 库。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:42:37.790

我猜你的一首歌曲标题包含一个逗号。没有 CSV 标准，但这个网站很接近：[creativyst](http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm)。

包含逗号的元素通常用引号括起来（十进制的 ASCII 字符 34）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:47:54.740

这只是另一种猜测，但也许您的歌曲或专辑标题中包含换行符。我怀疑额外的逗号会导致索引越界异常（因为您最终会得到更多“列”，而不是更少），但意外的换行符肯定会。您需要确保引号之间的文本被视为单列，否则您将遇到严重问题。

我建议使用解析器，而不是尝试自己拆分文件。如果您使用的是 VB.NET，那么我认为您应该可以使用 JET OLE DB。

请参阅[http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom](http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom)

# php - 如何在 Facebook 上发送请求？

> ID：11405371
> 
> 赞同：0
> 
> 时间：2012-07-10T01:15:58.757
> 
> 标签：php, facebook, facebook-graph-api, facebook-requests

我阅读了有关如何提出请求的 Facebook 开发信息（位于[此处](https://developers.facebook.com/docs/reference/dialogs/requests/)），但我并不完全了解它的作用。这就是我想做的。我正在使用 PHP 和 javascript。

我希望登录用户向多个 Facebook 用户（已注册我的网站的用户）发送对特定 URL（附加参数）的请求。此外，我需要能够获取他们选择的用户并将其保存在数据库中，因为只有这些用户才能访问他们被邀请访问的 URL。

对我如何做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:32:13.410

我在想你在谈论一个 url 请求。根据我的经验，这可以使用一个简单的 JQuery 请求来完成。[你可以在这里](http://thenewboston.org/watch.php?cat=32&number=97)找到一个例子，你也可以阅读 java API 以及如何使用这些方法（谷歌它）。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:39:10.773

请求对话框用于邀请 Facebook Canvas 应用程序。

您很可能正在考虑发送对话框：[https ://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

为保存 id 的 FB.ui 调用添加一个回调函数，这仅在用户 id 被硬编码时才有效。如果用户手动添加它们，我怀疑你可以跟踪它。

# javascript - 如何在Javascript中将多个项目的列表减少为键值对对象？

> ID：11405375
> 
> 赞同：1
> 
> 时间：2012-07-10T01:17:02.603
> 
> 标签：javascript, arrays

我有一系列状态：

```
['CO','CA','CO','AL', ... ,'NV'] 
```

我想减少到：

```
{ 'CO': 9, 'CA':17, 'AL':1, etc} 
```

该值是每个状态在数组中出现的次数。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T01:36:11.337

```
function compress2dict( raw_arr )
{ 
  var ret={}; 
  for(var i=0;i<raw_arr.length;i++)
  {
     var item=raw_arr[i];
     ret[item]|=0;
     ret[item]++;
  }
  return ret;
}

a = ['CO','BO','CO','CC','CC','CO','CC']
b = compress2dict(a)
b
{'BO':1, 'CC':3, 'CO':3} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:19:30.490

你可能对[`array_count_values`](http://phpjs.org/functions/array_count_values:308)PHPJS 感兴趣。由于 PHP[`array_count_values`](http://php.net/array-count-values)函数完全符合您的要求，因此该函数的 JavaScript 端口很适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:22:09.357

我希望您只需遍历数组，将成员值分配给对象属性名称并将出现次数作为值：

```
function toObj(arr) {
  var item, obj = {};

  for (var i=0, iLen=arr.length; i<iLen; i++) {
    item = arr[i];
    obj[item]? ++obj[item] : (obj[item] = 1);
  }

  return obj;
} 
```

或者如果你喜欢 while 循环（有时它们更快，有时不是）：

```
function toObj(arr) {
  var item, obj = {}, i = arr.length;

  while (i) {
    item = arr[--i];
    obj[item]? ++obj[item] : (obj[item] = 1);
  }

  return obj;
} 
```

# msdn - 如何转换（托管）数组中包含的数据 到其他托管类型？

> ID：11405378
> 
> 赞同：0
> 
> 时间：2012-07-10T01:17:11.783
> 
> 标签：msdn

我在 Visual C++ 中以数组< System::Byte^ > 的形式读取数据，并希望将其分配给 UInt16、UInt32 等托管类型。如何在 Visual C++ 中执行此操作？

假设我有一个函数参数-array<System::Byte^> receivedBytes，我想将前 2 个字节分配给 UInt16，将接下来的 4 个字节分配给 UInt32。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:39:06.113

这并不是真正（托管）C++ 特定的，但您可以尝试使用[BitConverter](http://msdn.microsoft.com/en-us/library/bzx26z14)类的各种`To`* 方法。我已经在完全托管的 C# 中使用它们（例如将原始 SHA1 值读入 5 个整数），它们运行良好。

# php - PHP 接收 XML

> ID：11405379
> 
> 赞同：0
> 
> 时间：2012-07-10T01:17:32.477
> 
> 标签：php, xml, curl

我有一个小 PHP 脚本正在侦听 POST 请求。我一直在期待 xml。通常我是发送 xml 请求的人。但今天我在接收方。

我认为这将是一个简单的监听 $_POST 的案例，但我想我可能是不正确的——我什么也没得到。

这是我等待任何 xml 的脚本：

```
<?php
if(isset($_POST)) {
    mail("me@myemail.com","some title i want", print_r($_POST, true)); 
}else{
    die("uh, what happened?");
}
?> 
```

这是我从另一个地方发送的一个简单的 xml 字符串：

```
<?php
$xml_data ='
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don\'t forget me this weekend!</body>
</note>
';

function sendXML2Server($URL,$XML){
    $xml_data = trim($XML);
    $ch = curl_init($URL);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);

    return $output;
}

echo sendXML2Server('https://someurl.com/inboundxml.php',$xml_data)
?> 
```

这是我在电子邮件中收到的内容：

**大批 （ ）**

我猜我没有正确使用数组，但也许在这一切中我还缺少其他东西。我期待取回实际的 xml 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:22:22.643

您只发送数据，这就是为什么 PHP 不能将此数据解释为某些键和值的原因。因此，您需要将其作为变量值发送：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array('xml_data' => $xml_data)); 
```

或作为原始帖子数据接收：

```
<?php
if(isset($HTTP_RAW_POST_DATA)) {
    mail("me@myemail.com","some title i want", print_r($HTTP_RAW_POST_DATA, true)); 
}else{
    die("uh, what happened?");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:23:24.873

CURLOPT_POSTFIELDS 需要一个数组：

`curl_setopt($ch, CURLOPT_POSTFIELDS, array('content'=>$xml_data));`

然后像这样检索它：

```
<?php
if($_SERVER['REQUEST_METHOD']=='POST' && isset($_POST['content'])) {
    mail("me@myemail.com","some title i want", print_r($_POST['content'], true)); 
}else{
    die("uh, what happened?");
}
?> 
```

# python - 无法将字符串转换为浮动奇怪的 Django/Python 错误。

> ID：11405382
> 
> 赞同：0
> 
> 时间：2012-07-10T01:18:03.570
> 
> 标签：python, django

我正在构建一些简单的东西，即在 Django 的列表中添加数字。但是，每当我尝试将浮点数的字符串值转换为浮点数时，它都会引发错误。在代码中更容易看到。

首先是我的观点：

```
def submitworkout(request):

       user =User.objects.get(username = request.session['username'])

       bodyweight =request.GET['weight']
       repinputboxes = request.GET['repinputboxes']
       totalreps = summation(list(repinputboxes))
       try: 
           float(bodyweight)

       except:
           bodyweight = None 
       w = workout(userid = user.id, datesubmitted =datetime.datetime.now(), workoutdate = request.GET['workoutdate'],
                    bodyweight = bodyweight, 
                    totalreps = totalreps, 
                    totalweight = summation(request.GET['weightinputboxes']),
                    numexercises = int(request.GET['numexercises']),
                    numsets = summation(request.GET['numsets']),
                    )
      # w.save()
      # workoutid = workout.objects.get(id = w.id)
       #createxercise(dict(request.GET),user.id,workoutid.id)  
       return render_to_response('home.html',{'infoprompt': request.GET},context_instance=RequestContext(request))

def summation(x):   
    suma = 0 

    for i in x: 
        suma += float(i)
    return suma 
```

接下来是回溯：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/submitworkout/?workoutdate=&weight=&numexercises=1&exercisename=b&numsets=1&weightinputboxes=32.5&repinputboxes=1

Django Version: 1.3.1
Python Version: 2.7.0
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'authentication',
 'tracking')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Chris\testdjango\fitness\views.py" in submitworkout
  45\.                     totalweight = summation(request.GET['weightinputboxes']),
File "C:\Users\Chris\testdjango\fitness\views.py" in summation
  89\.         suma += float(i)

Exception Type: ValueError at /submitworkout/
Exception Value: could not convert string to float: . 
```

最后但并非最不重要的是我的本地 var 给了我这个问题：

```
weightinputboxes = u'32.5' 
```

在此之前，我遇到了另一个像这样的奇怪错误： [string index out of range Python, Django](https://stackoverflow.com/questions/11385237/string-index-out-of-range-python-django)

我认为这与那个问题类似。但是，我仍然无法弄清楚。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:20:49.533

最好使用内置的 sum`getlist`和`request.GET` `sum(map(float, request.GET.getlist('weightinputboxes')))`

# powershell - 如何将参数从 C# 传递到 PowerShell 脚本文件？

> ID：11405384
> 
> 赞同：12
> 
> 时间：2012-07-10T01:18:10.007
> 
> 标签：powershell

从命令行我可以做到。

```
.\test.ps1 1 
```

从 C# 执行此操作时如何传递参数？我试过了

```
 .AddArgument(1)
   .AddParameter("p", 1) 
```

我已经尝试在 .Invoke() 中将值作为 IEnumerable<object> 传递，但 $p 没有得到该值。

```
namespace ConsoleApplication1
{
    using System;
    using System.Linq;
    using System.Management.Automation;

    class Program
    {
        static void Main()
        {
            // Contents of ps1 file
            //  param($p)
            //  "Hello World ${p}"

            var script = @".\test.ps1";

            PowerShell
                .Create()
                .AddScript(script)
                .Invoke().ToList()
                .ForEach(Console.WriteLine);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T01:44:18.913

这个怎么样？

```
static void Main()
{
    string script = @"C:\test.ps1 -arg 'hello world!'";
    StringBuilder sb = new StringBuilder();

    PowerShell psExec = PowerShell.Create();
    psExec.AddScript(script);
    psExec.AddCommand("out-string");

    Collection<PSObject> results;
    Collection<ErrorRecord> errors;
    results = psExec.Invoke();
    errors = psExec.Streams.Error.ReadAll();

    if (errors.Count > 0)
    {
        foreach (ErrorRecord error in errors)
        {
            sb.AppendLine(error.ToString());
        }
    }
    else
    {
        foreach (PSObject result in results)
        {
            sb.AppendLine(result.ToString());
        }
    }

    Console.WriteLine(sb.ToString());
} 
```

这是一个类似的版本，它传递了一个 DateTime 的实例

```
static void Main()
{
    StringBuilder sb = new StringBuilder();

    PowerShell psExec = PowerShell.Create();
    psExec.AddCommand(@"C:\Users\d92495j\Desktop\test.ps1");
    psExec.AddArgument(DateTime.Now);

    Collection<PSObject> results;
    Collection<ErrorRecord> errors;
    results = psExec.Invoke();
    errors = psExec.Streams.Error.ReadAll();

    if (errors.Count > 0)
    {
        foreach (ErrorRecord error in errors)
        {
            sb.AppendLine(error.ToString());
        }
    }
    else
    {
        foreach (PSObject result in results)
        {
            sb.AppendLine(result.ToString());
        }
    }

    Console.WriteLine(sb.ToString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T14:34:08.493

因此，为了简短的回答：使用 AddCommand 而不是 AddScript

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T19:24:03.720

另一种方法是用变量填充运行空间。

```
 public static string RunPs1File(string filePath, Dictionary<string, object> arguments)
    {
        var result = new StringBuilder();

        using (Runspace space = RunspaceFactory.CreateRunspace())
        {
            space.Open();

            foreach (KeyValuePair<string, object> variable in arguments)
            {
                var key = new string(variable.Key.Where(char.IsLetterOrDigit).ToArray());
                space.SessionStateProxy.SetVariable(key, variable.Value);
            }

            string script = System.IO.File.ReadAllText(filePath);
            using (PowerShell ps1 = PowerShell.Create())
            {
                ps1.Runspace = space;
                ps1.AddScript(script);

                var psOutput = ps1.Invoke();

                var errors = ps1.Streams.Error;
                if (errors.Count > 0)
                {
                    var e = errors[0].Exception;
                    ps1.Streams.ClearStreams();
                    throw e;
                }

                foreach (var line in psOutput)
                {
                    if (line != null)
                    {
                        result.AppendLine(line.ToString());
                    }
                }
            }
        }

        return result.ToString();
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-14T11:23:07.120

目前更简单的解决方案是首先将脚本作为字符串读取。

```
PowerShell
    .Create()
    .AddScript(File.ReadAllText(script)).AddParameter("p", 1)
    .Invoke().ToList()
    .ForEach(Console.WriteLine); 
```

# ruby-on-rails - 在 rspec 中模拟数组

> ID：11405386
> 
> 赞同：0
> 
> 时间：2012-07-10T01:18:43.170
> 
> 标签：ruby-on-rails, rspec

以下代码应该创建一个数组并将其作为参数哈希的一部分发送：

```
 it "should create an outing" do 
            lambda do 
                post :create, { :outing => FactoryGirl.attributes_for(:outing), :guestvalue => ["80","89"] , :barvalue => ["2976","2973"] }
            end.should change(Outing, :count).by(1)
        end 
```

相反，它给了我错误：

```
 NoMethodError:
   undefined method `[]' for nil:NilClass 
```

参数被传递到我的控制器的这一部分：

```
 params[:guestvalue].each do |guest_id|
        @outing.add_guest(guest_id)
    end 

    params[:barvalue].each do |bar_id|
        @outing.add_bar(bar_id)
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:42:34.420

对于仍然感兴趣的任何人，以下是传递数组的正确语法：

```
post :create, { :outing => FactoryGirl.attributes_for(:outing), :guestvalue => ["80","89"] , :barvalue => ["2976","2973"] } 
```

# javascript - 使用键盘键作为导航

> ID：11405387
> 
> 赞同：1
> 
> 时间：2012-07-10T01:18:54.613
> 
> 标签：javascript, jquery, keyboard

我正在开发一个博客主题，我想要键盘导航。我知道这与键盘键的 id 有关，但我已经寻找了 3 个小时，但仍然没有找到一个简单的解决方案。这是我想按下的键以及我想让他们做什么。

*   J - 向下滚动到下一篇文章
*   K - 向上滚动到上一篇文章
*   R - 使用该帖子的转发 URL 打开一个新选项卡
*   P - 使用该帖子的永久链接 URL 打开一个新选项卡

如果有人可以帮助我，那将非常有帮助。另外，我知道你可以通过在 URL 中设置链接来做一些事情，`<article data-reblog-url="http://reblogurl" data-permalink-url="{Permalink}">`但我不知道如何在按下 R & P 键时让浏览器打开一个新选项卡，并将该​​数据作为 URL。另外，J & K，我希望浏览器平滑滚动到帖子的顶部，包括帖子的边缘顶部。

如果有人可以帮助我完成整个代码，我将不胜感激。我知道这很多，我可能会对此表示反对，但就像我说的那样，我已经尝试了一个多小时，我只需要专家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:24:26.310

一个多小时不算多。但这里有一些东西可以让你开始：

`which`您可以通过检查事件对象来可靠地检查按下了哪个键。我做了一个演示，所以你可以看到如何检查按下了哪个键。

**演示：http:** [//jsfiddle.net/RXPhP/](http://jsfiddle.net/RXPhP/)

Gotcha：该事件仅在具有焦点的元素上触发，因此您最好将其绑定到`body`或`document`用于导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:35:35.580

这样的事情会给你一个好的开始。如果您不能使用任何库，那么您可以

```
<script>

var keyMap = [];
keyMap["j"] = 106;
keyMap["k"] = 107;
keyMap["r"] = 114;
keyMap["p"] = 112;

window.onkeypress = function (event) {
 var asciiVal = (event.which) ? event.which : event.keyCode;
 //Write a switch here to individually handle input.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T01:26:55.527

[http://www.w3schools.com/jsref/event_onkeypress.asp](http://www.w3schools.com/jsref/event_onkeypress.asp)用于按键事件。它允许您在按下某个键时执行 js。js 会收到一个事件`event`，它会告诉你按下了什么键。根据按键，你`do something`会`nothing`

# java - 在java SWING中创建文明游戏将地图放置在屏幕上的最佳方式？

> ID：11405390
> 
> 赞同：1
> 
> 时间：2012-07-10T01:19:24.327
> 
> 标签：java, swing

我正在为一个项目创建一个文明游戏，只是想知道当它读取 .map 文件时最好的方法是什么为北极。

我只是在问什么最好的方法将它放入java SWING中的视图中，以查看地图，因为我现在正在做的是创建二维jbuttons数组并将地形图像放置在其中，但我在想当我开始向地图添加精灵时，它会搞砸我。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:33:12.497

考虑为每个地形的背景使用 ImageIcons，然后可能创建一个 JLabel 网格，每个网格都包含对应于正确地形的 ImageIcon。

**编辑**
如果您的精灵要保留在图块上，则将其作为组件添加到图块中（只需确保为 JLabel 提供一个体面的布局管理器）。如果精灵要在瓷砖上移动，那么它应该在不同的层中绘制，要么在顶层窗口的玻璃窗格上，要么在 JLayeredPane 中。

# ruby-on-rails - 如何使用 right_aws gem 打开加密？

> ID：11405395
> 
> 赞同：0
> 
> 时间：2012-07-10T01:20:16.447
> 
> 标签：ruby-on-rails, ruby, amazon-s3, right-aws

right_aws 文档指出：

```
put(key, data=nil, meta_headers={}, perms=nil, headers={}) 
```

存储对象数据。键是 String 或 Key 实例。返回真。

```
bucket.put('logs/today/1.log', 'Olala!') #=> true 
```

这个看跌期权如何与签名匹配？

要开启加密：

> ...当您上传新对象或复制现有对象时，您可以通过将 x-amz-server-side-encryption 标头添加到请求中来指定是否希望 Amazon S3 加密您的数据。将标头的值设置为 Amazon S3 支持的加密算法 AES256

你如何打开加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:24:41.837

`put(key, data=nil, meta_headers={}, perms=nil, headers={})`是签名。

`bucket.put('logs/today/1.log', 'Olala!')`是没有第 3、第 4 和第 5 个参数的调用。

要加密数据并设置私有访问，请使用：

`bucket.put('logs/today/1.log', 'Olala!', {}, 'private', {'x-amz-server-side-encryption' => 'AES256'})`

请注意，这`:x-amz-server-side-encryption`不起作用，因为它不是有效的 Ruby 符号。

# php - 按日期对数组键进行排序

> ID：11405400
> 
> 赞同：0
> 
> 时间：2012-07-10T01:21:15.187
> 
> 标签：php

如何使用键按日期对该数组进行排序

```
Array
(
    [Jun '12] => 2037
    [May '12] => 4615
    [Apr '12] => 4175
    [Mar '12] => 4548
    [Feb '12] => 2758
    [Jan '12] => 3077
    [Jul '12] => 0
) 
```

我用这个回调函数尝试了 uksort，但没有这样的运气。

```
function datediff($a, $b) {
     strtotime($a);
    $a = date('U',strtotime($a));
    $b = date('U',strtotime($b));

    if ($a == $b) $r = 0;
    else $r = ($a > $b) ? 1: -1;

    return $r;
} 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:38:48.480

您可以创建自定义映射

```
$date_map = array("Jan" => 1, "Feb" => 2, "Mar" => 3, "Apr" => 4, "May" => 5, "Jun" => 6, "Jul" => 7, "Aug" => 8, "Sep" => 9, "Oct" => 10, "Nov" => 11, "Dec" => 12);

function date_compare($a, $b) {
  global $date_map;

  $a_month = $date_map[substr($a, 0, 3)];
  $b_month = $date_map[substr($b, 0, 3)];

  if ($a_month == $b_month) return 0;
  return ($a_month > $b_month) ? 1 : -1;
} 
```

使用 date_compare 和 uksort

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:33:22.583

**datediff()**总是返回**0**，因为**strtotime()**不理解 12 前面的单引号。因此，$a 和 $b 为空（因此相等）。

因此，如果可能的话，您应该使用“Mar 12”之类的东西作为您的密钥，而不是“Mar '12”。否则，您必须在调用**strtotime()之前在****datediff**中添加某种字符串操作。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:32:41.667

您需要将密钥中的 ' 替换为“20”

[http://codepad.org/sNv9QRtg](http://codepad.org/sNv9QRtg)

这应该是一个带有一些测试代码的工作示例。

```
$values = array
(
    "Jun '12" => 2037,
    "May '12" => 4615,
    "Apr '12" => 4175,
    "Mar '12" => 4548,
    "Feb '12" => 2758,
    "Jan '12" => 3077,
    "Jul '12" => 0
);

//I tried uksort with this callback function with no such luck.

function datediff($a, $b) {
     strtotime($a);
    $a = date('U',strtotime(str_replace("'", "20", $a)));
    $b = date('U',strtotime(str_replace("'", "20", $b)));

    if ($a == $b) $r = 0;
    else $r = ($a > $b) ? 1: -1;

    return $r;
}

foreach($values as $key=>$val) {
    echo $key . " = " . strtotime(str_replace("'", "20", $key)) . "\n";
}

// before
print_r($values);

uksort($values, "datediff");

// after
print_r($values); 
```**

# c++ - 如何将 allegro 4.4 与 Visual Studio 2010 链接

> ID：11405401
> 
> 赞同：3
> 
> 时间：2012-07-10T01:21:21.323
> 
> 标签：c++, visual-c++, allegro

我已经尝试了几个小时将 allegro 4.4 与 Visual Studio 2010 链接起来。我正在使用 microsoft visual C++ 2010 express edition。这是我所做的：

1.  [我从http://www.allegro.cc/files/?v=4.4](http://www.allegro.cc/files/?v=4.4)下载了 Windows 二进制文件（我下载了 MSVC 2010 一个）

2.  我将 zip 存档中的三个文件夹解压缩到以下位置“C:\allegro”

3.  我启动了 MSVC 并创建了一个新的 Windows 控制台应用程序

4.  我创建了一个 main.cpp 文件

5.  在项目属性中，我转到 VC++ 目录并将包含目录设置为“C:\allegro\include”

6.  在 VC++ 目录中，我将库目录设置为“C:\allegro\lib”

7.  在 Linker->Input 我将“allegro-4.4.2-md.lib”添加到附加依赖项中。

8.  在配置属性->调试中，我将“环境”设置为“PATH=c:\allegro\bin;%PATH%”

9.  我应用了所有更改并将这个简单的程序输入到 main.cpp

    ```
    #include <allegro.h>
    int main()
    {
        return 0;
    }
    END_OF_MAIN(); 
    ```

10.  当我尝试调试它时，我得到了两个错误`Error 1 error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup`和`Error 2 error LNK1120: 1 unresolved externals`

我一直在沮丧地拔头发！有人可以帮助我或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:02:14.937

好吧，我现在感觉自己像个白痴，但在阅读[http://www.allegro.cc/manual/4/miscellaneous/frequently-asked-questions-(faq)/windows-problems/d4cf0624ded68003a11b4892102bbc66](http://www.allegro.cc/manual/4/miscellaneous/frequently-asked-questions-(faq)/windows-problems/d4cf0624ded68003a11b4892102bbc66)后我明白了。我意识到问题是我创建了一个控制台应用程序而不是一个窗口应用程序。我通过转到配置属性-> 链接器-> 系统并将子系统设置为“Windows (/SUBSYSTEM:WINDOWS)”来解决此问题，我希望这对遇到此问题的任何其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:09:21.783

需要添加这个Project Properties->Linker->Input->Additional Dependencies：编辑添加如下 **alld.lib**

# cakephp - Cakephp 和多个 CSS 设计在一个控制器中

> ID：11405403
> 
> 赞同：0
> 
> 时间：2012-07-10T01:21:48.643
> 
> 标签：cakephp, routes, themes

我正在运行 Cake 2，网站的设置如下：

```
/internal/company1
/internal/company2
/internal/company3 
```

以上所有内容都使用页面控制器，我使用路由在这些 url 之后添加页面。例如

```
Router::connect('/company1/tests', array('controller' => 'tests', 'action' => 'index')); 
```

我没有使用主题。我遇到的问题是，例如我想要一个完全不同的 CSS 布局（我猜是主题？）company1/minisite（标题和所有）

实现这一目标的最佳方法是什么？主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:41:54.207

根据传递给控制器​​方法的参数，您可以使用以下语法更改布局：

```
$this->layout = 'layout1'; 
```

使用不同的 css 创建不同的布局。希望它对你有用。

# javascript - 在非锚元素上呈现 Tweet 按钮

> ID：11405414
> 
> 赞同：1
> 
> 时间：2012-07-10T01:23:04.297
> 
> 标签：javascript, html, twitter

我有一个包含各种元素的锚，因为它使它触摸友好并且是有效的 html5：

```
<a href="whatever.html">
   <h2>Title</h2>
   <p>Paragraph</p>
</a> 
```

现在，我想向这个锚点添加一个 Tweet 按钮。但是，嵌套锚点在 html5 中是无效的。因此，这将在锚点之外呈现 Twitter iframe：

```
<a href="whatever.html">
   <h2>Title</h2>
   <p>Paragraph</p>
   <a href="https://twitter.com/share" class="twitter-share-button">...</a>
</a> 
```

如果我将标记更改为这样的话，它将不会呈现按钮：

```
<a href="whatever.html">
   <h2>Title</h2>
   <p>Paragraph</p>
   <div class="twitter-share-button">...</div>
</a> 
```

facebook like 按钮可以很好地呈现，因为它不需要锚元素即可工作。有人知道 Twitter 的解决方法吗？这是jsfiddle：http: [//jsfiddle.net/xdEwg/](http://jsfiddle.net/xdEwg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:50:25.267

最后我把它放在锚之外并使用绝对位置，比如......

```
<div class="module">
  <a href="whatever.html">
    <h2>Title</h2>
    <p>Paragraph</p>
  </a>
  <a href="https://twitter.com/share" class="twitter-share-button">...</a>
</div>

.module {
  position: relative; 
}
.twitter-share-button {
  position: absolute;
  bottom: 0;
} 
```

但我仍然对解决方法感兴趣。

# java - 快速静态持久哈希表

> ID：11405421
> 
> 赞同：0
> 
> 时间：2012-07-10T01:24:30.740
> 
> 标签：java, hashtable

我在 Java 中的应用程序需要一个哈希表来进行计算，并且它必须对这个哈希表进行数百万次查找。哈希表必须可以非常快速地从磁盘读取到 HashTable 实用程序中，并且 hast 表中的数据是静态的，不需要插入或删除。

您是否建议使用任何可用的库来这样做？

此外，数据的大小小于 200MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:52:47.070

如果您的数据是静态的，为什么不使用普通的旧数组并按索引查找呢？无论`key`您打算使用什么，只需提供一个`index`属性。当然，如果超过了[可能的最大数组长度](https://stackoverflow.com/questions/3038392/do-java-arrays-have-a-maximum-size)，则需要跨多个数组进行分片。

我想说没有哈希函数可以击败直接随机访问，并且在初始化期间而不是每次查找时，为您的密钥集（您的“完美哈希函数”）分配索引的成本将是预先的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:54:15.260

如果人类可读性不是必需的，那么您可以只需要**确保**您的数据实现 Serializable 接口并使用 ObjectOutputStream 序列化 HashMap 即可。这很丑陋，但它可以完成工作。

另一种选择是 DataInputStream 和 DataOutputStream。这些允许您读/写结构化的二进制数据。

假设你有一个 HashMap，你可以这样写：

```
// realOutputStream should probably be a BufferedOutputStream
DataOutputStream output = new DataOutputStream( realOutputStream );
for (Map.Entry<Long, String> entry : map.entrySet()) {
    // Write the key
    output.writeLong(entry.getKey().longValue());
    byte bytes[] = entry.getBytes("UTF-8");
    // Writing the string requires writing the length and then the bytes
    output.writeInt(bytes.length);
    output.write(bytes, 0, bytes.length);
}

// realInputStream should probably be a BufferedInputStream
DataInputStream input = new DataInputStream ( realInputStream );
Map<Long, String> map = new HashMap<Long, String>();
while ( true ) {
   try {
     // read the key
     long key = output.readLong();
     // read the string length in bytes
     int strlen = output.readInt();
     // read the bytes into an array
     byte buf[] = new byte[strlen];
     output.readFully(buf, 0, strlen);
     // Create the map entry.
     map.put(Long.valueOf(key), new String(buf,"UTF-8"));
   }
   catch (EOFException e) {
     // input is exhausted
     break;
   }
} 
```

请记住，这是假设您要将字符串存储和读取为 UTF。您可以轻松地不提供字符集并使用 jvm 默认编码。另请注意，具有可变长度的东西（如字符串）将要求您在写入实际数据之前先写入该数据的长度。这样您就可以知道需要读取多少字节才能重建该字符串。

# text - 在 j2me 中换行标签文本

> ID：11405422
> 
> 赞同：2
> 
> 时间：2012-07-10T01:24:33.990
> 
> 标签：text, java-me, label, lwuit, word-wrap

我已经建立了一个列表并在每个单元格中插入了标签。现在，太长的文本会消失。我想包装文本，使其在每个单元格内完全可见。

你能帮忙吗？

## 更新：问题已解决

对于那些需要答案的人，我在容器中使用了 LWUIT 的 HTMLComponent。HTMLComponent 允许您使用 HTML 代码。这将允许您按照您希望的方式格式化您的列表。

* * *

这是有关解决方案的更多详细信息。

在带有 LWUIT 的 Java ME 中，我使用 HTMLComponent 来获得我想要的精确布局。对我来说最好的方法是在 HTMLComponent 中使用 HTML Table。它的行为就像 HTML。

```
String html_code = "";

html_code  = "<table width='100%'>";
html_code += "<tr><td><strong>"+fullname+"</strong></td></tr>";
if (title.length()>0) { html_code += "<tr><td><i>"+title+"</i></td></tr>"; }
if (message.length()>0) { html_code += "<tr><td>"+message+"</td></tr>"; }
if (date.length()>0) { html_code += "<tr><td><i>"+date+"</i></td></tr>"; }
html_code += "</table>";       

HTMLComponent html = new HTMLComponent(null);
html.setBodyText(html_code); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:33:47.507

如果您正在寻找更“优雅”的解决方案，我在网上找到了一个方便的资源。我在这里发布以供参考，但 HtmlComponent 可以完成这项工作。

```
 import com.sun.lwuit.Font;

/** A class supporting word wrap for MIDP. */

public class WordWrap {

Font font;
int width;
String txt;
int pos;

/**
* Initializes the WordWrap object with the given Font, the text string
* to be wrapped, and the target width.
*
* @param font: The Font to be used to calculate the character widths.
* @param txt: The text string to be wrapped.
* @param width: The line width.
*/

public WordWrap (Font font, String txt, int width) {

this.font = font;
this.txt = txt;
this.width = width;
}

/**
* returns the next line break position. If no text is left, -1 is returned.
*/

public int next () {

int i = pos;
int len = txt.length ();

if (pos >= len) return -1;

int start = pos;

while (true) {
while (i < len && txt.charAt (i) > ' ')
i++;

int w = font.stringWidth (txt.substring (start, i));
if (pos == start) {
if (w > width) {
while (font.stringWidth (txt.substring (start, --i)) > width)
{ }
pos = i;
break;
}
}

if (w <= width) pos = i;

if (w > width || i >= len || txt.charAt(i) == '\n') break;
i++;
}

return pos >= len ? pos : ++pos;
}

}

import com.sun.lwuit.Button;
import com.sun.lwuit.Component;
import com.sun.lwuit.Container;
import com.sun.lwuit.Display;
import com.sun.lwuit.Label;
import com.sun.lwuit.events.ActionListener;
import com.sun.lwuit.events.FocusListener;
import com.sun.lwuit.geom.Dimension;
import com.sun.lwuit.layouts.BoxLayout;
import com.sun.lwuit.plaf.Border;
import com.sun.lwuit.plaf.Style;

/**
 *
 * @author rubycube
 */
public class WrapList extends Container {

    private Button hiddenButton;
    private int id;

    public WrapList(String text, int containerID) {
        id = containerID;
        this.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
        this.setFocusable(false);
        final Style thisContainerStyle = this.getStyle();
        Border thisContainerBorder = Border.createRoundBorder(20, 20, 0xcccccc);
        thisContainerStyle.setBorder(thisContainerBorder);

        hiddenButton = new Button(" ");
        hiddenButton.setPreferredSize(new Dimension(1, 1));
        Style style = hiddenButton.getStyle();
        style.setBgTransparency(0, false);
        style.setBorder(Border.createEmpty());

        FocusListener hiddenButtonFL = new FocusListener() {

            public void focusGained(Component cmp) {

                WrapList parentContainer = ((WrapList) (cmp.getParent()));
                Border parentContainerBorder = Border.createRoundBorder(20, 20, 0xff6600);
                Style parentContainerStyle = parentContainer.getStyle();
                parentContainerStyle.setBorder(parentContainerBorder);
                parentContainerStyle.setBgColor(0xff9900);
                parentContainerStyle.setBgTransparency(50);
                parentContainer.repaint();
            }

            public void focusLost(Component cmp) {
                WrapList parentContainer = ((WrapList) (cmp.getParent()));
                Border parentContainerBorder = Border.createRoundBorder(20, 20, 0xcccccc);
                Style parentContainerStyle = parentContainer.getStyle();
                parentContainerStyle.setBorder(parentContainerBorder);
                parentContainerStyle.setBgTransparency(0);
                parentContainer.repaint();
            }
        };
        hiddenButton.addFocusListener(hiddenButtonFL);

        Label l = new Label(text);
        l.setSelectedStyle(thisContainerStyle);
        //l.setUnselectedStyle(thisContainerStyle);
        WordWrap ww = new WordWrap(l.getStyle().getFont(), text, (Display.getInstance().getDisplayWidth() - 10));
        int si = 0;
        int ei = 0;
        while (true) {
            int np = ww.next();
            if (np == -1) {
                break;
            } else {
                si = ei;
                ei = np;
            }
            String lineText = text.substring(si, ei);
            Label line = new Label(lineText);
            line.setEndsWith3Points(false);
            this.addComponent(line);
        }
        this.addComponent(hiddenButton);
    }

    public void addActionListener(ActionListener actionlistener) {
        hiddenButton.addActionListener(actionlistener);
    }

    /**
     * @return the id
     */
    public int getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(int id) {
        this.id = id;
    }
} 
```

# mysql - phpMyAdmin MIME 可以指向本地文件和缩略图吗？文件：\\

> ID：11405432
> 
> 赞同：0
> 
> 时间：2012-07-10T01:25:55.620
> 
> 标签：mysql, phpmyadmin, mime

我试图让 phpMyAdmin 显示具有本地路径的字段的图像/链接。比如我图片的路径是**Z:/Koala.jpg**。

我设置了**MIME 类型：plain/txt**和**浏览器转换：txt/plain imagelink**。它适用于图片具有 http:// 的在线图像，但不适用于存储在本地硬盘上的文件。

它实际上将**Z:/Koala.jpg**显示为链接并带有下划线，但是当我单击时它不会打开任何东西。phpMyAdmin 附加文件：\\ 但我已经尝试了两种方法，但没有运气。也有多个浏览器。

PS Z:/ 是我的网络附加存储的映射网络驱动器。但即使我使用 C:/.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:32:42.100

你试图做的事情是不可能的。现代网络浏览器中的安全限制禁止网站从本地文件系统（*例如* `file://`）加载资源。

# java - 进行年龄验证的最佳方法是什么？

> ID：11405434
> 
> 赞同：2
> 
> 时间：2012-07-10T01:26:01.813
> 
> 标签：java, algorithm

我很好奇是否有“最佳实践”方法来进行年龄验证。我在想我会抓住现在的毫秒数和他们生日的毫秒数，然后看看他们的生日 + ageReq * (365 * millPerYear) > currentMillisecond。

我相信这会起作用，但我想知道这种方法是否有任何问题和/或是否有一个库可以解决我在这里可能没有预料到的任何陷阱（例如，是否存在闰年问题？）

这个问题与语言无关，我目前在 Java 中，但很好奇无论语言如何，正确的方法是什么。

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T01:38:23.447

你可以试试[joda-time](http://joda-time.sourceforge.net/)。是的，您的支票有轻微缺陷。这不是很准确。根据您必须遵守的法律合规程度，您可以接受也可以不接受。Joda time 是一个很好的库，因为它确实负责所有基本检查。

如果您正在寻找语言不可知论者。然后你可以查看 Joda-time 的代码。因为它精确地计算了日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T01:29:55.070

如果您使用现有的生日，请使用 Date 和 Calendar 类来获得准确的差异。如果您使用您的方法，那么由于闰年/秒等原因，它并不准确......日期是手工计算的一团糟。

如果您目前没有生日并且不需要记录它，我建议您不要实际要求您的应用程序，因为这很烦人，当我必须这样做时，我只需向下滚动年份并随机选择一个较旧的超过20个左右。如果您超过/低于 X，只需询问是或否。

# html - 更改窗口宽度时，页脚背景图像会缩小

> ID：11405442
> 
> 赞同：0
> 
> 时间：2012-07-10T01:26:59.177
> 
> 标签：html, css

我有一个为网站创建的页脚，但由于某种原因，当我更改窗口的宽度时，背景图像似乎只是在整个右侧消失，因为我正在缩小窗口的宽度。

页脚应该在屏幕底部拉伸 100%，直到我开始将窗口的宽度缩小到某个点。

[您可以在此处](http://syndicatebox.com/footerissue/)查看我的问题示例

任何想法如何解决这一问题？我完全被难住了。也许我在宽度上做错了什么？

![例子](../Images/4f3032131727143dbd51b541a3202eb0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:30:16.317

的宽度`#footer`设置为`auto`，( `#content-wrapper`) 内的内容为固定宽度。

这导致出现水平条。

要解决这个问题，您可以设置`overflow:hidden`为父 div ( `#footer`)。

尝试这个：

```
#footer {
    background-image: url("images/footer-bg.png");
    background-repeat: repeat-x;
    height: 451px;
    margin: auto 0;
    width: 100%;

    overflow: hidden; //What you're looking for.
} 
```

如果您还希望内部 div ( `#content-wrapper`) 动态调整自身大小，请使用百分比，而不是宽度的像素尺寸：

```
#footer #content-wrapper {
    height: 451px;
    margin: auto;
    width: 83%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:24:56.097

嗨，我已经检查了您的演示页面，您已经定义了页脚`width 1265px` ，现在

比你定义的最小宽度你的`html`或`body`像这样

```
body, html {
    min-width: 1265px;
} 
```

因为你的最大宽度是 1265 定义到你的页脚，所以**你定义** `same width`你的`body or html`

# javascript - 引导登录下拉菜单“单击”不起作用

> ID：11405443
> 
> 赞同：1
> 
> 时间：2012-07-10T01:27:48.597
> 
> 标签：javascript, jquery, css, forms, drop-down-menu

我已经研究过这个问题，但当我单击由于 boostrap-dropdown.js 而关闭的表单时，我仍然无法让它工作。但是，我正在按照本指南使用 bootstrap: [Guide](http://mifsud.me/adding-dropdown-login-form-bootstraps-navbar/)在我的导航栏上创建登录下拉菜单，并且它们包含 JS 以阻止表单关闭，但它对我不起作用。

这是我的代码：

```
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container"><!-- Collapsable nav bar -->
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>

<!-- Your site name for the upper left corner of the site -->
<a class="brand"><img name="" src="bglogo.png"  alt=""></a>

<!-- Start of the nav bar content -->
<div class="nav-collapse"><!-- Other nav bar content -->

<!-- The drop down menu -->
<ul class="nav pull-right">
<li><a href="/users/sign_up">Sign Up</a></li>
<li class="divider-vertical"></li>
<li class="drop down">
<a class="dropdown-toggle" href="#" data-toggle="dropdown">Sign In <strong class="caret"></strong></a>
<div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
<!-- Login form here -->
<form action="Checklogin.php" method="post" accept-charset="UTF-8">
<input id="user_username" style="margin-bottom: 15px;" type="text" name="user[username]" size="30" />
<input id="user_password" style="margin-bottom: 15px;" type="password" name="user[password]" size="30" />
<input id="user_remember_me" style="float: left; margin-right: 10px;" type="checkbox" name="user[remember_me]" value="1" />
<label class="string optional" for="user_remember_me"> Remember me</label>

<input class="btn btn-primary" style="clear: left; width: 100%; height: 32px; font-size:    13px;" type="submit" name="commit" value="Sign In" />
</form>
</div>
</li>
</ul>
</div>
</div>
</div>
</div> 
```

以及我在关闭正文标记之前插入的 Javascript：

```
<!-- Placed at the end of the document so the pages load faster -->

<script src="twitter-bootstrap-v2/docs/assets/js/jquery.js"></script>

<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-transition.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-alert.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-modal.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-dropdown.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-scrollspy.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-tab.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-tooltip.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-popover.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-button.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-collapse.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-carousel.js"></script>
<script src="twitter-bootstrap-v2/docs/assets/js/bootstrap-typeahead.js"></script>
<script>
$(function() {
// Setup drop down menu
$('.dropdown-toggle').dropdown();

// Fix input element click problem
$('.dropdown input, .dropdown label').click(function(e) {
e.stopPropagation();
});
});</script> 
```

谢谢！

编辑：我想得越多，我就越意识到它必须是一个 Javscript 问题，因为表单和导航栏都很好，但是当我“单击”下拉菜单时它会关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:17:56.717

您在 js 中引用了错误的容器`.dropdown`，它应该是`.dropdown-menu`; 试试这个：

**JS**

```
$('.dropdown-menu input, .dropdown-menu label').click(function(e) {
    e.stopPropagation();
}); 
```

快速提示：您可以通过使用[bootstrap.js](http://twitter.github.com/bootstrap/assets/js/bootstrap.js)脚本包而不是一个一个地加载它们来最小化页面中 js 调用的数量。

# sql - 查找昨天日期的每个 BUYER_ID 的 TOP 10 最新记录

> ID：11405446
> 
> 赞同：3
> 
> 时间：2012-07-10T01:28:12.067
> 
> 标签：sql, group-by, sql-order-by, hive, hiveql

这是下表

```
CREATE TABLE IF NOT EXISTS TestingTable1 
( 
BUYER_ID BIGINT,
ITEM_ID BIGINT, 
CREATED_TIME STRING
) 
```

这是上表中的以下数据-

```
BUYER_ID    |    ITEM_ID       |    CREATED_TIME
------------+------------------+-----------------------
1015826235      220003038067        2012-07-09 19:40:21,
1015826235      300003861266        2012-07-09 18:19:59,
1015826235      140002997245        2012-07-09 09:23:17,
1015826235      210002448035        2012-07-09 22:21:11,
1015826235      260003553381        2012-07-09 07:09:56,
1015826235      260003553382        2012-07-09 19:40:39,
1015826235      260003553383        2012-07-09 06:58:47,
1015826235      260003553384        2012-07-09 07:28:47,
1015826235      260003553385        2012-07-09 08:48:47,
1015826235      260003553386        2012-07-09 06:38:47,
1015826235      260003553387        2012-07-09 05:38:47,
1015826235      260003553388        2012-07-09 04:55:47,
1015826235      260003553389        2012-07-09 06:54:37,
34512201        597245693           2012-07-09 16:20:21,
34512201        8071787728          2012-07-09 15:19:59,
34512201        5868222883          2012-07-09 08:23:17,
34512201        2412180494          2012-07-09 22:21:11,
34512201        2422054205          2012-07-09 06:09:56,
34512201        1875744030          2012-07-09 19:40:39,
34512201        5639158173          2012-07-09 06:58:47,
34512201        5656232360          2012-07-09 07:28:47, 
34512201        959188449           2012-07-09 08:48:47,
34512201        4645350592          2012-07-09 06:38:47,
34512201        5657320532          2012-07-09 05:38:47,
34512201        290419656539        2012-07-09 04:55:47, 
```

如果您在表中看到上述数据，则只有两个 UNIQUE`BUYER_ID`并且对应于我拥有的那些`ITEM_ID`AND `CREATED_TIME`。每当我为每个`BUYER_ID`.

所以为此`BUYER_ID`-我只需要昨天日期`34512201`的每个`BUYER_ID`基础上的 10 条最新记录。`CREATED_TIME`

每个都`BUYER_ID`可以有任何一天的数据。但是我对今天的数据（总是指昨天的日期）特别感兴趣，方法是查看`CREATED_TIME`

**查找`TOP 10`每个`BUYER_ID`昨天日期的最新数据。下面是我应该得到的与每个`BUYER_ID`.**

样本输出。

```
BUYER_ID    |    ITEM_ID       |    CREATED_TIME
------------+------------------+-----------------------
34512201        2412180494          2012-07-09 22:21:11
34512201        1875744030          2012-07-09 19:40:39
34512201        597245693           2012-07-09 16:20:21
34512201        8071787728          2012-07-09 15:19:59
34512201        959188449           2012-07-09 08:48:47
34512201        5868222883          2012-07-09 08:23:17
34512201        5656232360          2012-07-09 07:28:47 
34512201        5639158173          2012-07-09 06:58:47
34512201        4645350592          2012-07-09 06:38:47
34512201        2422054205          2012-07-09 06:09:56
1015826235      210002448035        2012-07-09 22:21:11
1015826235      260003553382        2012-07-09 19:40:39
1015826235      220003038067        2012-07-09 19:40:21
1015826235      300003861266        2012-07-09 18:19:59
1015826235      140002997245        2012-07-09 09:23:17
1015826235      260003553385        2012-07-09 08:48:47
1015826235      260003553384        2012-07-09 07:28:47
1015826235      260003553381        2012-07-09 07:09:56
1015826235      260003553383        2012-07-09 06:58:47
1015826235      260003553389        2012-07-09 06:54:37 
```

我正在使用`Hive`并`Hive`支持类似 SQL 的语法。所以我需要确保 SQL 也应该在 Hive 环境中工作。

谁能帮我这个？

**更新：-**

我正在使用下面的查询，我需要从下面的查询中获取最新的前 10 名，并且需要再添加一个限定符以进行日期检查，这意味着`where clause for yesterday's date`- 我不能`TOP 10`在这里使用，因为 Hive 不支持`TOP 10`sql 语法。我需要其他方法来解决这个问题。

```
SELECT * FROM TestingTable1 WHERE ORDER BY buyer_id, created_time DESC; 
```

**另一个更新：-**

我在下面的查询中使用`RANK UserDefinedFunction`.

```
SELECT buyer_id, item_id, created_time, rk
FROM (
    SELECT buyer_id, item_id, rank(item_id) as rk, created_time
    FROM testingtable1
    DISTRIBUTE BY buyer_id, item_id
    SORT BY buyer_id, item_id, created_time desc
) a 
WHERE rk < 10
ORDER BY buyer_id, created_time, rk; 
```

这是Java中的RANK UDF函数-

```
package com.example.hive.udf;
import org.apache.hadoop.hive.ql.exec.UDF;

    public final class Rank extends UDF{
        private int  counter;
        private String last_key;
        public int evaluate(final String key){
          if ( !key.equalsIgnoreCase(this.last_key) ) {
             this.counter = 0;
             this.last_key = key;
          }
          return this.counter++;
        }
    } 
```

上面的查询不能按照我想要的方式工作，我猜在那个查询中必须做出某种扭曲。

**有什么方法可以在不使用 HiveQL 中的任何 UDF 的情况下做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:51:58.050

```
 SELECT FIRST 10 *
    FROM TestingTable1
   WHERE buyer_id = 34512201
ORDER BY created_time DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T09:15:10.403

我迟到了回答这个问题，我相信你一定知道在 Hive 中使用 row_number 函数。只是作为对先前良好讨论的参考的补充。

```
select * from
(select buyer_id,item_id,created_time, row_number() over(partition by buyer_id over
created_time asc) row_num from yourtable)tab
where tab.row_num<=5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T12:57:51.893

```
select * 
from (select buyer_id,item_id,created_time,row_num() over (partition by buyer_id order by created_time DESC)) a 
where a.row_num<=10 
```

# javascript - javascript 用正则表达式拆分

> ID：11405449
> 
> 赞同：0
> 
> 时间：2012-07-10T01:28:28.927
> 
> 标签：javascript, regex

我想使用带有正则表达式的 javascript 将字符拆分为数组

foo=foobar=&foobar1=foobar2=

进入

富，富吧 =，富吧 1，富吧 2 =

抱歉不清楚，让我重新描述一下场景。首先我会用“&”分割它，然后想稍后处理它。

```
str=foo=foobar=&foobar1=foobar2=
var inputvars=str.split("&")
for(i=0;i<inputvars.length;i++){
   var param = inputvars[i].split("=");
   console.log(param);
} 
```

返回

```
[foo,foobar]
[]
[foobar1=foobar2]
[] 
```

我尝试使用 .split("=") 但 foobar= 被拆分为 foobar。

我本质上希望它是

```
[foo,foobar=]
[foobar1,foobar2=] 
```

使用 javascript 仅拆分第一次出现的 = 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:32:45.097

```
/^([^=]*)=(.*)/.exec('foo=foobar=&foobar1=foobar2=') 
```

或更简单的编写但使用较新的“惰性”运算符：

```
/(.*?)=(.*)/.exec('foo=foobar=&foobar1=foobar2=') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:54:37.650

从malvolio，我得出以下结论

```
var str = 'foo=foobar=&foobar1=foobar2=';
var inputvars = str.split("&");
var pattern =  /^([^=]*)=(.*)/;
for (counter=0; counter<inputvars.length; counter++){

     var param = pattern.exec(inputvars[counter]);         
    console.log(param)
} 
```

和结果（这是我的意图）

```
[foo,foobar=]
[foobar1,foobar2=] 
```

感谢@malvolio 提示正则表达式干杯

# html - 从 HTML 中选择图像以用作页面缩略图/预览的最佳方式

> ID：11405454
> 
> 赞同：5
> 
> 时间：2012-07-10T01:29:08.303
> 
> 标签：html, web-crawler, thumbnails, facebook-opengraph

假设没有 og:image 或链接 rel img_source，是否有人对优于随机技术的实际经验或建议来选择最能代表网页的图像？

**更新**：所有答案都很好，因此全部投票并选择了一个，尽管似乎没有很好的方法可以做到这一点。我将在低分辨率客户端上尝试最大的图片和屏幕截图。谢谢大家！

**PS**：我发现很多页面似乎都有 og:image 或 link rel img_source 反正。超出我的预期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:45:12.067

以尽可能小的形式截取网站的屏幕截图，看看它在笔记本电脑甚至移动设备（但不是移动网站版本）上的外观，将是一种非随机方法。

大多数优秀的网页设计师都会尝试确保用户能够在加载后立即看到页面内容，并按照他们所说的“首屏”包含最重要和最相关的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:31:53.427

选择您页面的徽标作为 og:image。这样一来，您的品牌就会与您的所有帖子相关联，而不必担心哪个图像最能定义每个单独的页面。

对于其他页面，您无法控制它们拥有的图像。

您可以研究[sharer.php 的](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)工作原理，但除此之外，没有灵丹妙药可以为没有可定义图像的网页选择哪个图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T08:41:43.533

我对 Facebook opengraph 没有任何经验，但我之前使用过的一个技巧是抓取我链接到的网站的图标并将它们用作链接按钮图标......它们很小，通常总是与公司名称和/或徽标，它们在大多数专业网站中都非常普遍。通常通用的文件名 favicon.ico 使得从 html 中挑选出来（或链接属性，如果他们更改文件名）变得非常容易。

如果可以适应您正在尝试做的事情，可能会试一试。如果你觉得这看起来不太好，你可以尝试更“web 2.0”并检查 iPhone/iPad 按钮 apple-touch-icon png 图像（虽然可能只能在大牌网站上找到它们）

[http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T09:50:32.410

我通常*会*建议你简单地刮掉`img`标签页。但是，这些天来，CSS背景图像经常应用于`h1`/ `header`/ `div`/ `a`/等。标签以显示徽标代替文本。

一种可能的解决方案是获取 ID/类名中带有“logo”的所有元素：

```
var l = $('[id*="logo"],[id*="Logo"],[class*="logo"],[class*="Logo"]'); 
```

如果这是/包含`img`标签，那么您很可能拥有该网站的徽标。否则，如果它是一个`div`或其他此类容器，您需要深入研究子元素的 CSS 属性以查看它们是否具有背景图像。

由此，您可以构建一组候选图像，当与基于（例如）图像尺寸的启发式方法结合使用时，应该希望每次都能吐出一个徽标。

我希望这对您有所帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T13:13:06.937

寻找标志通常是错误的方式。从您网站的用户的角度来看，我一直宁愿没有图像而不是徽标。这与 Google+ 或 Facebook 链接中的相同。仅在确实有意义时才显示图像。

但是，如果没有`og:image`或`rel="image_source"`提供相应的图像，找到相应的图像可能并不总是微不足道的。

一篇文章通常有一个显示为`<h1>`或`<h2>`标签的标题。最近的图像可能是正确的图像。但是，最近的也可能是徽标，因此可能会出错。

我会这样做非常务实。我会首先获取最有可能的图像并读取给定的`EXIF`数据，如果这是真实图像，则提供信息。如果这只是一个标志、间隔或其他类型的布局图形，它没有 EXIF 数据，因此不相关。如果第一张照片不合适，我会拿下一张，依此类推。

另一个线索可能是 HTML5`<article>`标记，它通常具有嵌套的帖子的相应图像。

然而，有几个*网页设计师*不使用*标准*，他们的网页可能不是很好的比喻。

# java - 如何在java中获取错误的行号？

> ID：11405455
> 
> 赞同：-1
> 
> 时间：2012-07-10T01:29:11.313
> 
> 标签：java, error-handling

我知道出错的行是`to_return = find(list,false);`How can I get this line of the line of the line when there is `NullPointerException`type error? 还是一般的行号？

我尝试了几件事。最接近的是这个`Called.getLineNumber()`给我的行号`StackTraceElement Called = new Throwable().fillInStackTrace().getStackTrace()[0];`

```
public TestObject[] myfind(Subitem list )throws Exception{
    TestObject[]to_return=null;
    try {
        to_return = find(list,false);
    }
    catch (RationalTestException ex) {
        //logStoreException(ex);
        StackTraceElement Called = new Throwable().fillInStackTrace().getStackTrace()[0];
        StackTraceElement Calling = new Throwable().fillInStackTrace().getStackTrace()[1];
        throw new Exception (this.add_debugging_info(Called, Calling, ex.getMessage()));

    }   
    catch (NullPointerException npe) {
        StackTraceElement Called = new Throwable().fillInStackTrace().getStackTrace()[0];
        StackTraceElement Calling = new Throwable().fillInStackTrace().getStackTrace()[1];
        logStoreException(npe);
        System.out.println("Line number: "+npe.getStackTrace()[0].getLineNumber()); 
        System.out.println("Line number2: "+Integer.toString(Called.getLineNumber()));
        System.out.println(this.add_debugging_info(Called, Calling, npe.getMessage()));
        throw new Exception (this.add_debugging_info(Called, Calling, npe.getMessage()));
    }   
    catch (Exception ex) {
        StackTraceElement Called = new Throwable().fillInStackTrace().getStackTrace()[0];
        StackTraceElement Calling = new Throwable().fillInStackTrace().getStackTrace()[1];
        throw new Exception (this.add_debugging_info(Called, Calling, ex.getMessage()));

    } 
    finally {
        //unregisterAll();
        //unregister(to);
        return to_return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T09:27:31.480

1.  如果您只想要当前堆栈跟踪，请使用`Thread.currentThread().getStackTrace()`

2.  如果您想强制 JVM 填写堆栈跟踪，请`-XX:-OmitStackTraceInFastThrow`在您的 JVM 上设置该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T16:11:28.950

在 Eclipse 中运行时，要获取行号本身，您需要获取 StackTrace 数组并对其调用 getLineNumber()。

以下内容在我的 Utils 类 isSessionConnectible 方法中为我工作：

```
... catch (ClassFormatError cfe) {
        logger.error("Problem ClassFormatError connecting. " + cfe.getMessage() + " " + cfe.getCause());
        int size = cfe.getStackTrace().length - 1;
        logger.error("   Root cause: " + cfe.getStackTrace()[size].getMethodName() + " " + cfe.getStackTrace()[size].getClassName());
        if (size>1) { 
            logger.error("   Penultimate cause: method=" + cfe.getStackTrace()[size-1].getMethodName() + " class=" + cfe.getStackTrace()[size-1].getClassName() + 
                    " line=" + cfe.getStackTrace()[size-1].getLineNumber()); 
        } 
```

抛出时的结果：

```
2018-07-06 12:00:12 ERROR Utils:319 - Problem ClassFormatError connecting to Hibernate. Absent Code attribute in method that is not native or abstract in class file javax/transaction/SystemException null
2018-07-06 12:00:12 ERROR Utils:322 -    Root cause: main <mypackage>.Utils
2018-07-06 12:00:12 ERROR Utils:324 -    Penultimate cause: method=isSessionConnectible class=<mypackage>.Utils line=306 
```

顺便说一句，在 Eclipse 中，确保 Window --> Preferences --> Java --> Compiler 在“将行号属性添加到生成的类文件”处标记了复选框。

# ios - iOS ShareKit 取消按钮不适用于 Xcode 4.2

> ID：11405457
> 
> 赞同：0
> 
> 时间：2012-07-10T01:29:42.803
> 
> 标签：ios, viewcontroller, sharekit

iOS Sharekit 可与以前的 Xcode 一起使用，但 4.2 将不再工作，当我点击取消按钮时，它会进入此例程

SHK.m内部

```
 - (void)hideCurrentViewControllerAnimated:(BOOL)animated
  {

if (isDismissingView)
return;

if (currentView != nil)
{
    // Dismiss the modal view
    if ([currentView parentViewController] != nil)
    {
        self.isDismissingView = YES;
        [[currentView parentViewController] dismissModalViewControllerAnimated:animated];
    }

    else
        self.currentView = nil;
} 
```

}

我步进了代码，它只是点击了 if (isDissmissingView) 然后它就返回了。
所以，我手动插入了代码

```
 [[currentView parentViewController] dismissModalViewControllerAnimated:animated]; 
```

到例程的顶部，但这没有任何作用。

我还包括一些其他代码供参考

```
 - (void)showViewController:(UIViewController *)vc 
```

{

```
 if (rootViewController == nil)
{
    // Try to find the root view controller programmically

    // Find the top window (that is not an alert view or other window)
    UIWindow *topWindow = [[UIApplication sharedApplication] keyWindow];
    if (topWindow.windowLevel != UIWindowLevelNormal)
    {
        NSArray *windows = [[UIApplication sharedApplication] windows];
        for(topWindow in windows)
        {
            if (topWindow.windowLevel == UIWindowLevelNormal)
                break;
        }
    }

    UIView *rootView = [[topWindow subviews] objectAtIndex:0];  
    id nextResponder = [rootView nextResponder];

    if ([nextResponder isKindOfClass:[UIViewController class]])
        self.rootViewController = nextResponder;

    else
        NSAssert(NO, @"ShareKit: Could not find a root view controller.  You can assign one manually by calling [[SHK currentHelper] setRootViewController:YOURROOTVIEWCONTROLLER].");
}

// Find the top most view controller being displayed (so we can add the modal view to it and not one that is hidden)
UIViewController *topViewController = [self getTopViewController];  
if (topViewController == nil)
    NSAssert(NO, @"ShareKit: There is no view controller to display from");

// If a view is already being shown, hide it, and then try again
if (currentView != nil)
{
    self.pendingView = vc;
    [[currentView parentViewController] dismissModalViewControllerAnimated:YES];
    return;
}

// Wrap the view in a nav controller if not already
if (![vc respondsToSelector:@selector(pushViewController:animated:)])
{
    UINavigationController *nav = [[[UINavigationController alloc] initWithRootViewController:vc] autorelease];

    if ([nav respondsToSelector:@selector(modalPresentationStyle)])
        nav.modalPresentationStyle = [SHK modalPresentationStyle];

    if ([nav respondsToSelector:@selector(modalTransitionStyle)])
        nav.modalTransitionStyle = [SHK modalTransitionStyle];

    nav.navigationBar.barStyle = nav.toolbar.barStyle = [SHK barStyle];

    [topViewController presentModalViewController:nav animated:YES];            
    self.currentView = nav;
}

// Show the nav controller
else
{       
    if ([vc respondsToSelector:@selector(modalPresentationStyle)])
        vc.modalPresentationStyle = [SHK modalPresentationStyle];

    if ([vc respondsToSelector:@selector(modalTransitionStyle)])
        vc.modalTransitionStyle = [SHK modalTransitionStyle];

    [topViewController presentModalViewController:vc animated:YES];
    [(UINavigationController *)vc navigationBar].barStyle = 
    [(UINavigationController *)vc toolbar].barStyle = [SHK barStyle];
    self.currentView = vc;
}

self.pendingView = nil; 
```

}

*   (void)hideCurrentViewController { [self hideCurrentViewControllerAnimated:YES]; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:41:40.827

这是一个已知错误，出现在 ios5 上。很久以前，[ShareKit 2.0](https://github.com/sharekit/sharekit)已经修复了这个问题。如果您决定升级，请务必非常仔细地按照[新的安装 wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)进行操作，因为与原始的 sharekit 相比，许多事情都发生了变化。

# macos - Mac Firefox 和 CSS3 过渡

> ID：11405461
> 
> 赞同：0
> 
> 时间：2012-07-10T01:30:01.420
> 
> 标签：macos, firefox, css, css-transitions

我妻子的博客（日语）在评论表单的样式上存在问题。当您将鼠标悬停在底部的提交按钮（深红色）上时，它在 Windows Firefox 和其他浏览器上看起来不错。在 Firefox for Mac 上，悬停效果就像按钮的 1/2 得到正确的颜色，而下半部分。它在 Mac Safari 中看起来不错。我的某些颜色属性是否错误？ [http://www.miwacle.com/?p=20246](http://www.miwacle.com/?p=20246)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:40:18.223

试试看这里

[https://developer.mozilla.org/en/CSS_Reference/Mozilla_Extensions](https://developer.mozilla.org/en/CSS_Reference/Mozilla_Extensions)

这将为您提供 Firefox 的特定 CSS 列表。

希望这可以帮助。

# php - 如何使用 .htaccess 将请求从图像重写为 PHP 脚本？

> ID：11405462
> 
> 赞同：1
> 
> 时间：2012-07-10T01:30:03.183
> 
> 标签：php, .htaccess

我有一个 PHP 脚本，`http://sb1.dev.codeanywhere.net/~a70097sb/hc/onlinestatus/image.php`它需要两个`GET`变量：`ign`和`style`. 我的`.htaccess`文件与`image.php`.

我希望将表单的请求`http://sb1.dev.codeanywhere.net/~a70097sb/hc/onlinestatus/{style}/{ign}.png`重写为`http://sb1.dev.codeanywhere.net/~a70097sb/hc/onlinestatus/image.php?style={style}&ign={ign}`. 我该怎么做，因为我没有使用 mod_rewrite 的经验，并且无法使用我在 Google 上找到的任何教程来让它工作。

试过了，但没有用，我只是得到一个 404 页面：

```
Options +FollowSymlinks -MultiViews
RewriteEngine on

RewriteRule ^([^.]*)/([^.]*)\.png$ image.php?style=$1&ign=$2 [L,NC] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:59:28.307

你在正确的轨道上。捕获模式`([^/]+)`将所有内容匹配到下一个`/`，因此您需要其中两个。

```
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)\.png$ image.php?style=$1&ign=$2 [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:59:19.803

尝试这样的事情：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{HTTP_HOST} ^www\.mysite\.com [NC]
   RewriteRule ^hc\/onlinestatus\/(.*)\/(.*)\.png /hc/onlinestatus/image.php?style=$1&ign=$2 [NC,L]
</IfModule> 
```

# asp.net-mvc-3 - ReportServer 的 HTML5 和 iFrame 替换

> ID：11405465
> 
> 赞同：0
> 
> 时间：2012-07-10T01:30:46.747
> 
> 标签：asp.net-mvc-3, html, reporting-services

我们的客户端有一堆用 SQL Reportng Server 编写的报告，我们需要在 MVC 应用程序中显示它们。

但是，我们知道 HTML5 不再支持使用 iFrame，因此我们需要找到另一种方法。

我尝试了以下但没有成功。

```
<div id="rptViewer" style="width: 800px; height: 800px;"></div>

$(function () {
    $("#rptViewer").load("URL/ReportViewer.aspx?/NewDailyReport/DailyReport&date=2012-05-30&rs:Format=HTML4.0", function (response, status, xhr) {
        if (status == "error") {
            var msg = "Sorry but there was an error: ";
            alert(msg + xhr.status + " " + xhr.statusText);
        }
    });
}); 
```

**编辑**

也不行；

```
 $.get("URL/ReportViewer.aspx?/NewDailyReport/DailyReport&date=2012-05-30&rs:Format=HTML4.0", function (response) {
        alert(8);
        $('#rptViewer').html(response);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:29:18.293

HTML 5 确实支持 iframe。添加了一些有趣的属性，例如“sandbox”和“srcdoc”。

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# android - Android，帮助在触摸时旋转图像

> ID：11405466
> 
> 赞同：6
> 
> 时间：2012-07-10T01:30:55.990
> 
> 标签：android, bitmap, touch, rotation, motion

我正在尝试旋转此图像上的一个透明 PNG。数字部分是我想要旋转的。我能够做到这一点，但这不是我想要达到的目标

[![](../Images/48c13624ef3097b604a6c8688db1186d.png)](https://i.stack.imgur.com/yLWvH.png)

我想像真正的密码锁一样旋转数字。所以用户将触摸并在一个圆圈中移动他们的手指。我在触摸/移动事件上查看了不太精确的图像旋转，但它们还不够。

这是目前我的代码

```
 public boolean onTouch(View v, MotionEvent event) {
    double r=Math.atan2(event.getX()-lockNumbers.getWidth(), lockNumbers.getHeight()-event.getY());
    int rotation=(int)Math.toDegrees(r);
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            break;
        case MotionEvent.ACTION_MOVE:
            x=event.getX();
            y=event.getY();
            updateRotation(rotation);
            break;
        case MotionEvent.ACTION_UP:
            break;
    }//switch       

    return true;

}//onTouch
private void updateRotation(double rot){
    float newRot=new Float(rot);
    Bitmap bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.numbers);
    Matrix matrix=new Matrix();
    matrix.postRotate(newRot,bitmap.getWidth(),bitmap.getHeight());
    if(y>250){
        Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
        lockNumbers.setImageBitmap(reDrawnBitmap);
    }
    else{
        Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
        lockNumbers.setImageBitmap(reDrawnBitmap);
    }
} 
```

由于矩阵参数，它还会在您触摸位图时调整其大小。这不是预期的效果。

用户几乎需要用手指转一圈。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T05:03:30.247

将以下代码写入您的触摸事件。

```
switch (event.getAction()) {    
    case MotionEvent.ACTION_DOWN:
        // reset the touched quadrants
        for (int i = 0; i < quadrantTouched.length; i++) {
            quadrantTouched[i] = false;
        }
        allowRotating = false;
        startAngle = getAngle(event.getX(), event.getY());
        break;
    case MotionEvent.ACTION_MOVE:
        double currentAngle = getAngle(event.getX(), event.getY());
        rotateDialer((float) (startAngle - currentAngle));
        startAngle = currentAngle;
        break;
    case MotionEvent.ACTION_UP:
        allowRotating = true;
        break;
}

// set the touched quadrant to true
quadrantTouched[getQuadrant(event.getX() - (dialerWidth / 2), dialerHeight - event.getY() - (dialerHeight / 2))] = true;
detector.onTouchEvent(event);
return true; 
```

并使用下面的链接以获得更多参考。

[旋转拨号器示例](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T06:49:39.053

通过接受[@Dipak Keshariya 的](https://stackoverflow.com/a/11406904/501483)回答，我正在努力获得角度旋转，这可以帮助您识别车轮的选定部分。

```
private float copy[] = new float[9];
    matrix.getValues(copy);
float wheelAngle = Math.round(Math.atan2(copy[Matrix.MSKEW_X],
                copy[Matrix.MSCALE_X]) * (180 / Math.PI)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:20:17.510

我想您想在用户触摸屏幕的位置旋转图像？如果是这样，请扩展`SimpleOnGestureListener`如下示例：

```
public class MyGestureDetector extends SimpleOnGestureListener
{  
     @Override
     public void onLongPress(MotionEvent event)
     {
         int X = (int)event.getX();          
         int Y = (int)event.getY();

         ...Rotate the image
     }
} 
```

一旦你得到了触摸事件的屏幕坐标，你就可以应用一个关于该点的旋转动画——更多细节请看这里：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

# facebook - 自定义 Facebook 操作

> ID：11405468
> 
> 赞同：0
> 
> 时间：2012-07-10T01:31:14.410
> 
> 标签：facebook, api, facebook-graph-api

在 Facebook Graph 中，我创建了一个名为 movie 的内置 Facebook 对象，它具有名为“Title”、“Description”等的对象属性，我通过调用使用它

`https://graph.facebook.com/me/[ns]:watch?movie=http://www.example.com/movie.html&desc='nice movie'&___`ETC..

现在我创建了一个名为“opera”的自定义对象，属性的形式为：

```
og:url - URL
og:title - String
og:image - Image[]
og:description - String 
```

我将如何使用它以使用户墙上的帖子成为“用户”观看了“歌剧” *_*

我可以使用 og 标签作为我的请求 URL 的一部分吗？或者我可以将它用作：

`https://graph.facebook.com/me/[ns]:watch?opera=http://www.example.com/opera.html&title='opera title'`*_*等...

我很困惑如何以与使用电影对象相同的方式使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:39:39.677

您不需要在调用中包含标签，或者您不能。

如果您想拥有`opera`（类型）的不同页面（对象），那么您需要通过创建新的对象类型并创建该类型的页面（对象）来将其添加到您的应用程序设置中。

查看配方示例：http: [//developers.facebook.com/docs/opengraph/objects/](http://developers.facebook.com/docs/opengraph/objects/)

```
 <meta property="fb:app_id"           content="YOUR_APP_ID" /> 
 <meta property="og:type"             content="recipebox:recipe" /> 
 <meta property="og:title"            content="Chocolate Chip Cookies" /> 
 <meta property="og:image"            content="http://www.example.com/cookies.png" /> 
 <meta property="og:description"      content="Best Cookies on Earth!" /> 
 <meta property="recipebox:chef"      content="http://www.example.com/john_smith"/> 
```

如果您的页面（对象）在该部分中定义了它的元标记，`<head>`那么您应该会看到标题、描述等。这是为您的操作调用提取数据的地方。

很遗憾

> 将不再接受自定义 Watch 操作的提交。

所以你需要使用内置的 watch action `me/video.watches`，`/me/[ns]:watch`不会被接受。

# session - 取消设置 Twig 会话变量

> ID：11405469
> 
> 赞同：4
> 
> 时间：2012-07-10T01:31:15.727
> 
> 标签：session, variables, twig

我们如何销毁 twig 中的会话变量？我可以通过 app.session.get('$name') 获取会话变量。之后我想出于某些目的将其销毁。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:48:07.807

Flash Messages 是做到这一点的正确方法。

Symfony2 食谱示例：

```
{% if app.session.hasFlash('notice') %}
    <div class="flash-notice">
        {{ app.session.flash('notice') }}
    </div>
{% endif %} 
```

有关更多信息，请查看 Symfony 文档[flash 消息](http://symfony.com/doc/current/book/controller.html#flash-messages)。

# php - 检索 MySQL 中特定月份的所有记录

> ID：11405470
> 
> 赞同：0
> 
> 时间：2012-07-10T01:31:46.143
> 
> 标签：php, mysql

我正在寻找可以从所有年份的记录中获取特定月份记录的 sql 查询。即，我有从 2001 年至今的记录...我想从所有年份带来**五月的记录。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:33:17.160

查看 MySQL 函数“MONTH”...

```
WHERE MONTH(some_date) = 5 
```

# asp.net - 将 DateTime 变量传递到 Visual Studio 2008 中的 SQL Server 存储过程

> ID：11405474
> 
> 赞同：0
> 
> 时间：2012-07-10T01:32:14.947
> 
> 标签：asp.net, sql-server-2005, visual-studio-2008, datagridview

我在 SQL Server 2005 中有一个如下所示的存储过程：

```
CREATE PROCEDURE [dbo].[REP_PayRange]
    @StartDate datetime = NULL,
    @EndDate datetime = NULL
AS
BEGIN
    SET NOCOUNT ON;
    SELECT * FROM Payment WHERE PayTime BETWEEN @StartDate AND @EndDate
END 
```

它执行，我通过运行从 SQL 中获取结果：

```
EXEC REP_PayRange '1 Jan 2012', '10 Jan 2012' 
```

我遇到困难的地方是 Visual Studio。

以下是我正在采取的步骤：

1.  创建一个新的空白“Web 窗体”/aspx 页面，并选择 Visual Basic 语言
2.  插入一个 GridView
3.  选择一个数据源并选择“数据库”
4.  选择我已确认有效的数据连接（SQL Server Native）
5.  “指定自定义 SQL 语句或存储过程”
6.  选择“存储过程：”“REP_PayRange”
7.  为 StartDate 选择“参数来源：无”和默认值“2012 年 1 月 1 日”，为 EndDate 选择“参数来源：无”和默认值“2012 年 1 月 10 日”
8.  在测试查询页面上，我点击了“测试查询”，确保我的值是我上面指定的值并且没有返回数据。如果我保存它并在浏览器中预览它，则 GridView 为空。

我想使用这种方法创建我的网页，以便以后可以将参数源更改为日历而不是默认值。

提前感谢您的任何帮助或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:40:44.580

你需要做两件事：

(a) 停止使用区域性、依赖于语言的样式来格式化您的字符串。使用适当、标准、明确的格式，例如`'YYYYMMDD'`. 您的 Web 表单应该传递正确键入的参数和/或用于`.Format()`摆脱这种“2012 年 1 月 1 日”的废话。

(b) 停止使用`BETWEEN`日期范围查询，因为这可能很模糊（即使您认为您的日期时间列不包含时间，您确定之间的意思是您认为的意思吗）？

一些背景：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# jquery - 实现小提琴的问题

> ID：11405482
> 
> 赞同：0
> 
> 时间：2012-07-10T01:33:14.397
> 
> 标签：jquery, css, jsfiddle

我正在使用我在网站上找到的小提琴，并且我已经对其进行了修改以配合我想要完成的工作。我让它在小提琴中工作，在这里：

[http://jsfiddle.net/7pdwP/](http://jsfiddle.net/7pdwP/)

**HTML**

```
<div id="fish">test 123</div> 
```

**CSS**

```
#fish{background-image:url(http://testsite.perseocigar.com/menu_nohover.png);width:120px;height:108px;} 
```

**JavaScript**

```
$('#fish').hover(
  function(){$('#fish').css("background-image", "url(http://testsite.perseocigar.com/menu_hover.png)")},
  function(){$('#fish').css("background-image", "url(http://testsite.perseocigar.com/menu_nohover.png)")}
); 
```

但是让它在网站上运行，我显然错过了一些我猜是非常明显的东西。我只是在我的主站点，测试页面上完成了我尝试做的事情，但它仍然无法正常工作。

[http://testsite.perseocigar.com/Untitled-2.html](http://testsite.perseocigar.com/Untitled-2.html)是测试站点的链接。

我试图让它在我的本地机器上工作，同时我建立网站，还试图看看它是否在网络服务器上工作，但在两者上都无处可去。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:48:17.590

我看到了这个问题并亲身经历了几次，我读到的最好的建议是获取并使用 Notepad++ 来定位 \u8203 字符。我使用 emacs，当我尝试保存 iso-8859-1 编码时，它会为我指出字符。

[完全相同的代码在 Dreamweaver 中无法正常工作](https://stackoverflow.com/questions/11234578/the-exact-same-code-doesnt-work-as-it-should-in-dreamweaver)

[适用于 jsFiddle 但不适用于我的网站](https://stackoverflow.com/questions/9322628/works-in-jsfiddle-but-not-in-my-site)

[代码工作 jsfiddle 不能在 Dreamweaver 上工作](https://stackoverflow.com/questions/10368047/codes-works-jsfiddle-not-working-on-dreamweaver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:44:47.370

我在 Chrome 中运行了您的测试页面，显示了开发人员工具，在控制台下出现错误：

```
Unexpected Token ILLEGAL 
```

行尾可能有一些奇怪的字符。我建议您删除该行并重新输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:44:48.413

你试过把它放在一个

```
$(document).ready(function() {
   $('#fish').hover(function() {
      $('#fish').css("background-image", "url(http://testsite.perseocigar.com/menu_hover.png)");
   }, function() {
      $('#fish').css("background-image", "url(http://testsite.perseocigar.com/menu_nohover.png)");
   });
}); 
```

如果您想对多个元素使用相同的代码。不要这样做

```
$(document).ready(function() {
    $('#fish').hover(function() {
       $('#fish').css("background-image", "url(images/menu_hover.png)");
    }, function() {
       $('#fish').css("background-image", "url(images/menu_nohover.png)");
    });
});

$(document).ready(function() {
     $('#fish1').hover(function() {
       $('#fish1').css("background-image", "url(images/menu_hover.png)");
     }, function() {
       $('#fish1').css("background-image", "url(images/menu_nohover.png)");
      });
 }); 
```

你可以像这样把它们放在一起

```
$(document).ready(function() {
    $('#fish,#fish2,#fish3,#fish4,#fish5').hover(function() {
       $(this).css("background-image", "url(images/menu_hover.png)");//<-- Then use 'this' to refer to the current element firing the event
    }, function() {
       $(this).css("background-image", "url(images/menu_nohover.png)");
    });
}); 
```

或者甚至更好地给你的元素一个他们共享的类。

```
<div id="fish" class="fishhover">test 123</div>
<div id="fish1" class="fishhover">test 123</div>
<div id="fish2" class="fishhover">test 123</div>
<div id="fish3" class="fishhover">test 123</div>
<div id="fish4" class="fishhover">test 123</div> 
```

然后按班级选择它们

```
$(document).ready(function() {
    $('.fishhover').hover(function() {
       $(this).css("background-image", "url(images/menu_hover.png)");//<-- Then use 'this' to refer to the current element firing the event
    }, function() {
       $(this).css("background-image", "url(images/menu_nohover.png)");
    });
}); 
```

# php - Drupal6：将查询字符串附加到主链接

> ID：11405484
> 
> 赞同：0
> 
> 时间：2012-07-10T01:33:21.447
> 
> 标签：php, drupal-6, navigation, drupal-hooks

我正在尝试以编程方式将查询字符串“？device=mobile”添加到所有主要链接上。

在我主题的 page.tpl.php 文件中，我尝试了以下内容，

```
<?php if (is_array($primary_links)) : ?>
    <?php foreach ($primary_links as $link): ?>
             $link['href'] = $link['href'].'?device=mobile';
    <?php endforeach; ?>
<?php endif; ?> 
```

然而，这只是将代码打印到页面上。目前我正在尝试使用 hook_menu_link_alter，但到目前为止我还没有成功。为了仅在一个主要链接项上测试我的代码，我尝试了以下代码：

```
myModule_menu_link_alter(&$item, $map){
    $items['photo_gallery']['href'] = 'photo_gallery?device=mobile';
} 
```

不幸的是，链接没有变化。我还将从我的 template.php 文件中调查 hook_menu_item_link()，但此时我希望有人能指出我正确的方向，并让我知道我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:11:42.270

您放入 page.tpl.php 的代码有正确的想法，但您缺少一些东西：

1.  **foreach**循环的主体应该被 PHP 标记包围，以便 PHP 解释和执行代码。这就是为什么您看到 Drupal 只是“打印出代码”的原因：因为您将其置于 PHP“世界”之外，所以它只是成为模板 HTML 的一部分。
2.  即使您正确执行代码，也不会看到任何更改，因为默认情况下，**foreach**循环中的`$link`变量是数组中原始项的**副本**，因此不会修改原始项。要修改原始文件，您可以使用**参考**语法，例如：. （与号前缀的变量名称，请参阅[PHP 文档参考](http://php.net/manual/en/language.references.php)）。****`$link['href'] = 'stuff'`**`foreach ($primary_links as &$link)`******
*******   最后，即使你修复了前两个问题，它可能仍然无法正常工作，因为链接的 HREF 属性可能稍后会被 theme('links') 处理，而你的“？” 和“=”将被编码，它会破坏链接。******

 ******所以，解决这三个问题，我会说你应该修改你的 page.tpl.php 代码看起来像：

```
<?php if (is_array($primary_links)) : ?>
  <?php foreach ($primary_links as &$link): ?>                           
  <?php $link['query'] = array('device' => 'mobile'); ?>
  <?php endforeach; ?>                                                   
<?php endif; ?> 
```

或者，如果您不得不在每一行上打开/关闭 PHP，您只需使用普通块，例如：

```
<?php 
  if (is_array($primary_links)) {
    foreach ($primary_links as &$link) {
      $link['query'] = array('device' => 'mobile');
    }
  }
?> 
```

注意 1.`&$link`语法（使用引用而不是复制），和 2\. 数组的**查询**数组键`$link`，这是 Drupal 将搜索的那些“特殊”数组键之一，如果找到，则利用它来构建适当的附加到最终链接的 URL 查询（请参阅 Drupal 的[url()](http://api.drupal.org/api/drupal/includes%21common.inc/function/url/6)函数的文档）。

此外，请记住在看到“没有任何变化”时清除缓存，尤其是在处理主题时。******

# html - 为我的网站存储图像

> ID：11405486
> 
> 赞同：0
> 
> 时间：2012-07-10T01:33:32.587
> 
> 标签：html, image, spring-mvc

我想设置单独的亚马逊 ec2 实例，在其中存储用户通过我的网站上传的所有图像。我希望能够显示来自这个独家服务器的图像。我知道如何设置指向该服务器的 DNS 名称。但我想知道如何设置目录，例如，如果我将图像 url 称为[http://images.mydomain.com/images/sample.jpg](http://images.mydomain.com/images/sample.jpg)，那么

images.mydomain.com 是服务器名称，

图像应该是文件夹名称

现在的问题是是否应该在此服务器上运行一个网络服务器，该服务器将为图像提供服务，还是我可以将图像文件夹公开，以便全世界都可以看到它？如何避免目录列表？

指向任何文档的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:39:20.697

当然可以设置一个单独的 EC2 实例来为您的图像提供服务。您可能有充分的理由这样做 - 例如，您可能希望仅授权特定用户或用户组访问某些图像，这种方式受程序逻辑的严格控制。

OTOH，如果您只是希望将图像/媒体文件的访问与提供 HTML/Web 内容的服务器分开，通过将这些文件移动到专门针对存储和调整的服务，您将获得更好的性能/可扩展性网络访问。Amazon 的 S3（简单存储服务）是一种相对简单的选择。Amazon 的 CloudFront 内容分发网络 (CDN) 或与之竞争的 CDN 将是性能更高的选择。

使用 CDN 进行文件访问确实增加了配置 CDN 的复杂性，但是如果您遇到从主 Web 服务器分割媒体访问的麻烦，并且如果您期望任何显着的 I/O 负载，我已经发现这是一种高回报的努力付出的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:07:04.727

我绝对不会按照您的计划实施此操作。您应该将所有图像存储在 Amazon S3 存储桶中，并通过 Amazon 的 CloudFront CDN 提供它们。为什么要经历设置和维护 EC2 实例的麻烦来做亚马逊已经做过的事情？S3 提供无限存储、管理权限、元数据等。CloudFront 提供对图像的快速访问，将它们缓存在世界各地的边缘位置。此外，您可以使用 Amazon Route 53（或其他一些 DNS 服务）将各种 CNAME 指向您的 CloudFront 分配。

如果您对这种方法感兴趣，我很乐意提供有关如何设置的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:38:17.047

是的，您肯定需要在机器上运行网络服务器。否则客户端将无法通过 http/port 80 连接并在浏览器中查看图像。这与启用目录列表无关。运行网络服务器后，您可以在其配置中禁用目录列表。

在您的服务器上安装 apache 并运行它（[http://httpd.apache.org/docs/2.0/install.html](http://httpd.apache.org/docs/2.0/install.html)）。然后，您在其配置中设置所谓的“站点”，它指向一个本地目录，该目录将成为您服务器的基本目录。例如，它可以是 Unix 系统上的 /home/apache。在那里你创建你的图像文件夹。如果您的 apache 设置正确，您可以通过[http://images.mydomain.com/images/sample.jpg](http://images.mydomain.com/images/sample.jpg)访问您的图像。

# iphone - 在 iOS 应用程序中计算时间间隔

> ID：11405488
> 
> 赞同：1
> 
> 时间：2012-07-10T01:33:52.853
> 
> 标签：iphone, objective-c, ios

我正在为 iPod Touch 开发一个 iOS 应用程序，其中我的应用程序始终显示服务器时间。每当应用程序通过对服务器进行 Web 服务调用而进入前台时，我总是将应用程序时间与服务器时间同步。如果我的服务器和客户端之间的连接丢失几个小时，我将无法同步应用程序时间。我读过iOS不支持在应用程序处于后台时运行计时器，除了下面提到的少数有限情况：

*   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
*   让用户随时了解其位置的应用程序，例如导航应用程序
*   支持互联网协议语音 (VoIP) 的应用程序
*   需要下载和处理新内容的报亭应用
*   从外部配件接收定期更新的应用程序

那么如何跟踪申请时间呢？每当用户切换到我的应用程序时，他都需要查看服务器时间，因此我需要运行一个计时器来更新上次同步的服务器时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:46:20.820

结合其他答案，创建一个类，负责获取服务器时间*并*`NSDate* lastSync`使用和的组合维护应用程序上次同步到服务器的时间`applicationDidBecomeActive`。例如：

```
-(void)applicationDidBecomeActive:(UIApplication*)application {
  [ServerTimeSync sharedInstance] resync];
} 
```

ServerTimeSync 将维护一个`NSDate*`具有上次同步时间的属性（您需要将服务器提供给您的内容转换为`NSDate*`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:39:59.397

您可以存储`NSDate`应用程序何时进入后台。当它恢复时，再次获取当前`NSDate`时间，并将差异添加到您存储的服务器时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:42:42.163

您根本不需要计时器。

我建议当您与服务器同步时间时，让它返回其当前的 UNIX 时间戳。然后你可以这样做：

```
[[NSDate date] timeIntervalSince1970]; 
```

...获取设备的当前 UNIX 时间戳。然后你可以做的是存储这两个时间戳之间的差异。这是服务器时间和设备时间之间的时钟偏差。

您现在可以通过获取设备的当前 UNIX 时间戳并向其添加时钟偏差来计算服务器的大致时间。显示时调整时区（如果你愿意），你就完成了。每当您与服务器同步时间时，您只需刷新存储的时钟偏差值。

如果您想花哨的话，您还可以在确定时钟偏差时尝试测量并考虑网络延迟。

这种方法应该比尝试存储服务器的绝对时间戳然后使用计时器（或任何其他机制）跟踪已经过去了多少时间要好得多。

# java - 写入 excel 文件模板不遵循定义的单元格数据格式

> ID：11405490
> 
> 赞同：0
> 
> 时间：2012-07-10T01:34:43.630
> 
> 标签：java, servlets, apache-poi

我有一个 excel 文件，其单元格具有不同的数据格式，从简单的货币格式`$#,##0.00 ($1,200.00)`到更复杂的格式。

问题是当我写这些单元格时，格式没有被遵循。因此，如果我在货币格式的单元格中输入一个值，则该值会显示为没有格式：

例如：我输入了`1234`。我期望的是`$1,234.00`（在 excel 单元格中定义）。我得到的仍然是`1234`

在我的尝试中，我什至尝试将单元格自己的格式应用于自身

这是我使用的代码：

```
ServletContext context = getServletContext();
InputStream inp = context.getResourceAsStream("/WEB-INF/MyExcel.xlsx");

Workbook wbTemp = new XSSFWorkbook(inp);    
Sheet wbTempSheet = wbTemp.getSheetAt(0);

Cell targetCell = wbTempSheet.getRow(0).getCell(0);
targetCell.setCellValue(request.getParameter("myNumber"));

//i even tried reapplying the cell's own format to itself
CellStyle cs = targetCell.getCellStyle();
String df = cs.getDataFormatString();
System.out.println(df);
cs.setDataFormat(wbTemp.createDataFormat().getFormat(df));
targetCell.setCellStyle(cs); 
```

在检查 excel 文件时，我注意到这些格式确实得到了实施。但是我需要按每个单元格的**选项卡**才能看到它生效。是否有替代或至少一种方法来模拟选项卡操作，以便在打开时格式化单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:00:49.483

发现了什么问题。它的这一行： `targetCell.setCellValue(request.getParameter("myNumber"));`

它应该是： `targetCell.setCellValue(Double.parseDouble (request.getParameter("myNumber") ));`

忘记了数字 excel 单元格的格式正确，因为必须通过双精度数。

# php - 如何获得某个角色之后的所有内容？

> ID：11405493
> 
> 赞同：174
> 
> 时间：2012-07-10T01:35:19.230
> 
> 标签：php, string

我有一个字符串，我想在某个值之后得到所有东西。字符串总是以一组数字开始，然后是一个下划线。我想在下划线之后得到字符串的其余部分。因此，例如，如果我有以下字符串以及我想要返回的内容：

```
"123_String" -> "String"
"233718_This_is_a_string" -> "This_is_a_string"
"83_Another Example" -> "Another Example" 
```

我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2012-07-10T01:38:39.883

找到下划线的[`strpos()`](http://php.net/strpos)偏移量，然后 substr 获取从该索引加 1 开始的所有内容。

```
$data = "123_String";    
$whatIWant = substr($data, strpos($data, "_") + 1);    
echo $whatIWant; 
```

* * *

如果您还想`_`在尝试获取字符串之前检查下划线字符 ( ) 是否存在，您可以使用以下命令：

```
if (($pos = strpos($data, "_")) !== FALSE) { 
    $whatIWant = substr($data, $pos+1); 
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-11-24T08:11:21.487

`strtok`是这类事情的一个被忽视的功能。这意味着非常快。

```
$s = '233718_This_is_a_string';
$firstPart = strtok( $s, '_' );
$allTheRest = strtok( '' ); 
```

像这样的空字符串将强制返回字符串的其余部分。

请注意，如果在“_”之后什么都没有，您将获得一个`FALSE`值`$allTheRest`，如[文档](http://php.net/manual/en/function.strtok.php)中所述，必须使用 === 对其进行测试，以区别于其他虚假值。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-07-23T14:56:46.237

这是使用的方法`explode`：

```
$text = explode('_', '233718_This_is_a_string', 2)[1]; // Returns This_is_a_string 
```

或者：

```
$text = end((explode('_', '233718_This_is_a_string', 2))); 
```

通过指定`2`in`limit`参数[`explode()`](http://php.net/explode)，它返回由字符串分隔符分隔的最多 2 个元素的数组。返回第二个元素 ( `[1]`)，将给出字符串的其余部分。

* * *

这是另一种使用方式`strpos`（如[@flu](https://stackoverflow.com/questions/11405493/how-to-everything-after-a-certain-character/45266494#comment44047446_11405509)建议的那样）：

```
$needle = '233718_This_is_a_string';
$text = substr($needle, (strpos($needle, '_') ?: -1) + 1); // Returns This_is_a_string 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-08T00:44:53.037

另一种简单的方法，使用[strchr()](http://php.net/manual/en/function.strchr.php)或[strstr()](http://php.net/manual/en/function.strstr.php)：

```
$str = '233718_This_is_a_string';

echo ltrim(strstr($str, '_'), '_'); // This_is_a_string 
```

在您的情况下，仅 ltrim() 就足够了：

```
echo ltrim($str, '0..9_'); // This_is_a_string 
```

但前提是字符串的右边部分（_之后）不以数字开头，否则也会被修剪。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-07-23T13:03:52.907

我使用 strrchr()。例如，要查找文件的扩展名，我使用此函数：

```
$string = 'filename.jpg';
$extension = strrchr( $string, '.'); //returns "jpg" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-27T09:54:15.360

如果有人需要提取字符串的第一部分，那么可以尝试，

**询问：**

```
$s = "This_is_a_string_233718";

$text = $s."_".substr($s, 0, strrpos($s, "_")); 
```

**输出：**

*this_is_a_string*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-19T21:25:05.277

```
$string = "233718_This_is_a_string";
$withCharacter = strstr($string, '_'); // "_This_is_a_string"
echo substr($withCharacter, 1); // "This_is_a_string" 
```

在一个单一的声明中。

```
echo substr(strstr("233718_This_is_a_string", '_'), 1); // "This_is_a_string" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-04T02:54:31.487

如果您想在某些字符之后获取所有内容，并且这些字符位于字符串的开头，则可以使用如下更简单的解决方案：

```
$value = substr( '123_String', strlen( '123_' ) );
echo $value; // String 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-24T11:20:32.587

使用此行返回符号后的字符串，如果字符不出现，则返回原始字符串：

```
$newString = substr($string, (strrpos($string, '_') ?: -1) +1); 
```

# php - 如何显示此图像？

> ID：11405496
> 
> 赞同：0
> 
> 时间：2012-07-10T01:35:45.580
> 
> 标签：php, image

```
<?php
require 'db.php';
include_once("header.php");
include_once("functions.php");
include_once("profile.php");

if(isset($_POST['search_term'])){
    $search_term = mysql_real_escape_string(htmlentities ($_POST['search_term']));

    if(!empty($search_term)){

        $search = mysql_query("SELECT `username`,`id` FROM `users` WHERE `username` LIKE '%$search_term%' and `business` <> 'business'");

        $result_count = mysql_num_rows($search);

        $suffix = ($result_count != 1) ? 's' : '';

        echo '<div data-theme="a">Your search for <strong>' , $search_term ,'</strong> returned <strong>', $result_count,' </strong> record', $suffix, '</div>';

        while($results_row = mysql_fetch_assoc($search)){
            echo '<div data-theme="a"><strong>', "<img src='/image/<?php echo $image; ?>' width= 50px height=50px>", $results_row['username'],  '</strong></div>';

$following = following($_SESSION['userid']);

    if (in_array($key,$following)){
        echo ' <div action= "action.php" method="GET" data-theme="a">
        <input type="hidden" name="id" value="$key"/>
        <input type="submit" name="do" value="follow" data-theme="a"/>
</div>';

    }else{
        echo " <div action='action.php' method='GET' data-theme='a'>
        <input type='hidden' name='id' value='$key'/>
        <input type='submit' name='do' value='follow' data-theme='a'/>
        </div>";

}

}

        }

}

?> 
```

我需要一些帮助，将用户图像放入此代码的回显部分。我不确定如何做到这一点，以便将图像放在正确的搜索行上。任何建议将不胜感激。下面是我所指的代码行。谢谢。

> 而（$results_row = mysql_fetch_assoc（$search））{
> 
> echo ' **', "' width= 50px height=50px>", $results_row['username'], '** ';

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:42:38.980

我在你的代码中没有看到`$image`任何定义，所以我假设图像是从数据库中提取的。

如果是这种情况，那么您将需要执行以下操作：

```
while($results_row = mysql_fetch_assoc($search)){
    echo '<div data-theme="a"><strong><img src="/image/'.$results_row['image'].'" style='width:50px;height:50px' />'.$results_row['username'].'</strong></div>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:45:21.930

写吧：

```
..."<img src='/image/<?php echo $image; ?>' width='50' height='50'>", ... 
```

但是你确定**50x50**合适吗？您可能只想设置`width=50`并让浏览器相应地设置高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:45:30.017

```
$image = 'someImage.png';    
echo '<div data-theme="a"><strong>', "<img src='/image/{$image}' width= 50px height=50px>", $results_row['username'],  '</strong></div>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T01:45:43.840

你会想要这样的东西：

```
<?php 
while($results_row = mysql_fetch_assoc($search)){
?>
<div data-theme="a">
  <img src="/image/<?php echo $image; ?>" width="50px" height="50px">
  <strong>
    <?php echo  $results_row['username']; ?>
  </strong>
</div>

<?php
}
?> 
```

有几件事要检查：

*   不要使用标签来包装标签。它们通常仅用于文本
*   您没有在查询中选择任何图像。
*   不要使用 echo 来输出丑陋的 html。
*   不要使用 GET。
*   使用准备好的语句（PDO 或 mysqli）来防止 mysql 注入。

# sql - 用零填充一个数字，但前提是它低于一定长度？

> ID：11405501
> 
> 赞同：1
> 
> 时间：2012-07-10T01:37:15.500
> 
> 标签：sql, sql-server, sql-server-2008

我的数字必须至少为 7 位数字。例如：

```
0000001
123456789
0012345 
```

都是有效的。只有当它的长度低于 7 时，我才需要用 0 填充数字。我如何在 SQL Server 中执行此操作？我能得到的最好的方法是在长度小于 7 时填充数字，但在此之上，它开始截断数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T01:42:23.003

```
 SELECT CASE WHEN LEN(CONVERT(VARCHAR(12), column)) > 7 THEN 
    CONVERT(VARCHAR(12),column) ELSE
     RIGHT('0000000' + CONVERT(VARCHAR(12), column), 7) END
  FROM dbo.table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:50:59.163

Aaron Bertrand 打败了我。

我想补充一点，封装字符和必须重复的次数也可能很有用，这样如果将来某个时候需要更改，很容易做到。您可以使用[REPLICATE](http://msdn.microsoft.com/en-us/library/ms174383.aspx)执行此操作。所以扩展亚伦的例子：

```
DECLARE @num_digits as int = 7
SELECT RIGHT(REPLICATE('0', @num_digits) + col, @num_digits) FROM dbo.table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:00:13.153

嗨，看看这个。

```
declare @num table(num varchar(10))
insert into @num
VALUES('0000001'),('123456789'),('0012345'),('123'),('11')

select CASE when len(num) < 7 then REPLICATE('0',(7-len(num)))+num else num END from @num 
```

# visual-studio - 为什么我需要安装 MSVC++ redist.?

> ID：11405506
> 
> 赞同：5
> 
> 时间：2012-07-10T01:38:24.627
> 
> 标签：visual-studio, winapi, visual-c++, msvcrt

我正在学习 VC++，但我想知道为什么最终用户也需要 MSVC++？

据我在 MSDN 中看到的，我的程序使用的大多数库（实际的 DLL 文件）已经随系统本身提供（user32.dll、kernel32.dll 等）。

但是为什么画图和记事本不需要 MSVC++，但是我的软件，比记事本简单得多，需要这个运行时？运行时做什么？它是如何工作的？有没有办法让我的软件在没有 MSVC++ 的情况下工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T01:44:17.173

运行时提供所有标准函数和类，例如`std::string`and `std::vector`，以及运行全局对象的构造函数和析构函数、查找异常处理程序等的支持代码。Windows 提供了所有这些的版本，并且有一段时间使用 Visual C++它，但发现与标准不兼容，因此较新版本的编译器带有修复程序（Windows 不能捆绑新修复程序来代替旧的 DLL，因为它会破坏现有程序）。

是的，您可以避免使用运行时可再发行安装程序。您可以使用`/MT`build 选项，它将所有必需的库函数直接捆绑到您的可执行文件中。之后，您将只需要 Windows 附带的 DLL。

该设置位于 C/C++ -> 代码生成 -> 运行时库下的项目配置中

但请注意，这会使您的可执行文件稍大一些，并且任何错误修复（尤其是通过 Windows 更新分发的安全修复）都不会影响您的程序，因为您有一个特定的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T01:55:07.340

添加到本的答案：

运行时为每个各自版本的 Visual Studio 捆绑了许多功能。使用运行时的 DLL 版本的主要优点是，只要系统更新有问题的 DLL，您就可以“免费”获得（安全）更新。

有人会指出的另一个优点是，*如果*许多进程通过 DLL 使用运行时，它可以节省使用 DLL 版本的资源。这是因为 Windows 有一种机制可以跨进程（或其中的主要部分）共享内存中的 DLL。

您会注意到将运行时捆绑到您的二进制文件中（也称为**静态链接**）将使您的二进制文件更大，因为您的每个二进制文件现在都带有自己的运行时版本（如果不重新链接程序就无法替换）。

还要注意混合（您自己的）DLL，这些 DLL 静态链接到运行时的不同版本（即调试与发布），或者根据 DLL 动态和静态链接到运行时。这里的问题是分配器。分配 ( `malloc`, `calloc`, `new`) 和释放内存的函数在这些函数中是不兼容的。在这种情况下，最好的方法是使用独立的机制，例如`IMalloc`- 或始终在对象实例中携带释放器，确保对`free`/的调用`delete`不会跨越模块边界，即使实例在另一个模块中处理。

# c++ - exit() 函数无法退出进程

> ID：11405507
> 
> 赞同：2
> 
> 时间：2012-07-10T01:38:35.100
> 
> 标签：c++, linux, glut, exit, freeglut

我正在使用 FreeGLUT 在 Linux 中开发多线程 C++ 应用程序。奇怪的是，在我的一个线程中调用 exit() 会导致调用并完成 onexit() 回调，但无法退出我的程序。相反，根据 GDB，它挂在 GLUT 库中的 select() 调用中。

当我按下“q”时，我还有一个键盘回调退出。如果我在程序挂起时按“q”，GLUT 退出正常。

似乎没有人遇到类似的问题。文档说 exit() 应该关闭整个进程，而不仅仅是一个线程，所以不是这样。我难住了。你有什么想法？

编辑：我发现了问题。我错了退出处理程序已经完成。一个库函数调用正在等待一个在调用 exit() 时已经锁定的互斥锁。GLUT 只是利用了空闲时间。谢谢大家的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:48:59.930

### In C++03

Note: exit() is a C function.

C as a language does not have the concept of threads at the language level.
Threads are usually added to C via a library support. So you need to read the library documentation of the affects of calling exit() from a thread that is not the main thread.

It is probably not portable across threading implementations.

Your best bet is to only call exit() from the main thread.
In a child thread you should probably just set some state that is viewed by the main thread. Let the main thread see this state and call exit manually. Note even calling exit on the man thread may hang some threading libraries if their are child threads still running. So best to get the main thread to wait for all children before exiting if you want your code to be portable.

### In C++11

Now that C++11 has entered the since with explicit threading in the language there is more to it. `See n3376 Section 18.4.1 [cstdint.syn] Paragraph 8`

> The function exit() has additional behavior in this International Standard:
> 
> — First, objects with thread storage duration and associated with the current thread are destroyed. Next, objects with static storage duration are destroyed and functions registered by calling atexit are called.
> 
> ```
>  See 3.6.3 for the order of destructions and calls. (Automatic objects are not destroyed as a result of calling exit().)
> 
>       If control leaves a registered function called by exit because the function does not provide a handler for a thrown exception, std::terminate() shall be called (15.5.1). 
> ```
> 
> — Next, all open C streams (as mediated by the function signatures declared in ) with unwritten buffered data are flushed, all open C streams are closed, and all files created by calling tmpfile() are removed.
> 
> — Finally, control is returned to the host environment. If status is zero or EXIT_SUCCESS, an implementation-defined form of the status successful termination is returned. If status is EXIT_FAILURE, an implementation-defined form of the status unsuccessful termination is returned. Otherwise the status returned is implementation-defined.

# tmux - tmux 两个绑定键

> ID：11405511
> 
> 赞同：2
> 
> 时间：2012-07-10T01:38:50.917
> 
> 标签：tmux

我尝试使用两个键为 tmux 创建一个绑定键，例如

```
bind-key Vs split-window "command00" 
```

我尝试在我的`~/.tmux.conf`

```
bind-key V split-window "~/.tmux/tmux-v.sh" 
```

和这个脚本`tmux-v.sh`

```
#!/bin/bash                                                                              
read -n 1 input                                                                          
case $input in                                                                           
    s ) tmux split-window 'vim +VimShell' ;;                                             
    S ) tmux new-window 'vim +VimShell' ;;                                               
    * ) tmux new-window "vim" ;;                                                         
esac 
```

这项工作，但这个解决方案拆分了窗口。

我尝试，`command-prompt`但`run-shell`有必要按`ENTER`

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:51:23.703

尝试这个：

```
bind V send-keys "~/.tmux/tmux-v.sh" \; send-keys "Enter" 
```

# iphone - 更新sqlite iphone sdk中的值

> ID：11405517
> 
> 赞同：0
> 
> 时间：2012-07-10T01:39:58.497
> 
> 标签：iphone, sqlite, sdk

我有一个简单的程序来更新表的记录

该表是“人”，有“姓名”和“年龄”两列；插入了一些记录，如下：

```
name age
tom 20
andy 30
han 25 
```

现在我正在编写一个程序来更新表中的一行：

```
 NSString *database=[[NSBundle mainBundle] pathForResource:@"mytable" ofType:@"sqlite"];
    sqlite3_open([database UTF8String],&contactDB);
    NSString *text=@"andy";
    NSString *query=[NSString stringWithFormat:@"UPDATE person SET age=%d WHERE name='%@'",30,text];
    sqlite3_stmt *statement;
    sqlite3_prepare_v2(contactDB,[query UTF8String],-1,&statement,NULL);
    sqlite3_finalize(statement);
    sqlite3_close(contactDB); 
```

程序运行良好，但数据库没有更新（我正在使用 SQLite Manager 浏览数据库）

当我尝试从数据库中读取时，它运行良好：

```
NSString *database=[[NSBundle mainBundle] pathForResource:@"mytable" ofType:@"sqlite"];
    sqlite3_open([database UTF8String],&contactDB);
    NSString *query1=[NSString stringWithFormat:@"SELECT * FROM person WHERE age=%d;",30];
    sqlite3_stmt *statement;
    sqlite3_prepare_v2(contactDB,[query1 UTF8String],-1,&statement,NULL);
    sqlite3_step(statement);    
    NSString *result=[[NSString alloc] initWithUTF8String:(const char *)sqlite3_column_text(statement, 0)];
    label.text=result;
    sqlite3_finalize(statement);
    sqlite3_close(contactDB); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:17:41.900

```
 -(void)updateSetting:(NSArray *)arr
  {    
 if(sqlite3_open([databasePath UTF8String],&myDatabase)==SQLITE_OK)
  {
 sqlite3_stmt *compiledStmt;

  NSString *sqlStmt=[NSString stringWithFormat:@"UPDATE setting SET    flow='%@',formate='%@'  WHERE primaryKey=%i;",[arr objectAtIndex:0],[arr objectAtIndex:1],1];
  if(sqlite3_prepare_v2(myDatabase, [sqlStmt UTF8String],-1,&compiledStmt, NULL)==SQLITE_OK)    
  {
  NSLog(@"Successful update");
  }
sqlite3_step(compiledStmt);
sqlite3_close(myDatabase);  
  }

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:08:36.153

我已经面临这个问题。这背后的问题是您将查询作为字符串格式传递，因此您必须`;`在查询语句的末尾使用。

```
NSString *query=[NSString stringWithFormat:@"UPDATE questionbank SET age=%d WHERE name='%@';",30,text]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:27:19.100

在执行您的`sqlite3_step`方法之前，请进行如下检查。

```
const char      *sqlQuery           = "UPDATE SETTINGS SET someFlag = 0";
sqlite3_stmt    *insertStatement    = nil;
int              success            = 0;
if(sqlite3_prepare_v2(sqliteDatabase, sqlQuery, -1, &insertStatement, NULL) == SQLITE_OK)
{
    success = sqlite3_step(insertStatement);

    if(insertStatement)
    {
        sqlite3_finalize(insertStatement);
    }

    if(success == SQLITE_ERROR)
    {
        return NO;
    }
    return YES;
}
return NO; 
```

这样您就可以弄清楚问题出在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T04:03:26.710

您需要检查您是否可以访问和打开数据库。只需将您的更新段放在这样的 if 语句中：`if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)`.

也尝试`NSLog(@"%s", sqlite3_errmsg(database));`在您准备好后添加，看看是否有任何错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T15:24:27.547

这个问题的答案是主包中的数据库是只读的

[我无法将数据插入到 XCode 上的 sqlite3 文件中](https://stackoverflow.com/questions/11170851/i-can-not-insert-data-into-sqlite3-file-on-xcode)

# asp.net - 我可以在发布时创建 TFS 分支吗？

> ID：11405526
> 
> 赞同：0
> 
> 时间：2012-07-10T01:41:25.920
> 
> 标签：asp.net, build, tfs, publish

当我将 Web 应用程序发布到我们的生产服务器时，我正在寻找一种自动创建分支或类似（在 TFS 中）的方法。

我们在 DEV 分支中完成所有工作，当它准备好发布时，我们将站点发布到 Web 服务器。我所追求的是当前在我们的生产服务器上运行的代码的快照。

我意识到我可以手动创建一个分支或标签，但我正在寻找一种自动化的方法。我希望使发布程序尽可能简单，因为我们倾向于经常发布。

我们没有发布时间表，而是在更改完成和测试时发布。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:32:06.860

这是一个示例，我修改了 TFS 构建过程以自动创建一个分支并将代码签入其中。如果您有任何问题，请告诉我。

[http://www.codesmartnothard.com/2009/07/02/HowToBranchWithinInATFSBuild.aspx](http://www.codesmartnothard.com/2009/07/02/HowToBranchWithinInATFSBuild.aspx)

# vim - 使用 Rails vim 插件运行错误版本的 Rake

> ID：11405527
> 
> 赞同：0
> 
> 时间：2012-07-10T01:41:26.963
> 
> 标签：vim, rake, bundler

我在 Fedora 上使用带有 Tim Pope Rail 插件的 vim - 我想使用 :Rake 运行测试，但 rake 0.9.3.beta.1 出现错误我知道 bundle exec rake 可以解决这个问题，但我想运行我的vim 中的测试 - Rails 插件文档似乎表明 :Rake 调用 bundle exec 但它不在我的系统上

我试图删除 rake 0.9.3.beta.1 但没有成功

有人知道解决这个问题的方法吗？

我不介意只删除 rake 0.9.3.beta.1 但 gem uninstall 不会这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:46:21.883

通过 rails.vim 的文档：

```
:[range]Rake {targets}  Calls |:make!| {targets} (with 'makeprg' being rake,
        or `bundle exec rake` if bundler.vim is active) 
```

[bundler.vim](https://github.com/tpope/vim-bundler)是否处于活动状态？

# php - 无法使用php在mysql表中插入数据

> ID：11405530
> 
> 赞同：0
> 
> 时间：2012-07-10T01:41:53.860
> 
> 标签：php, mysql

这是我几年前做的一个小 php 程序（当时它工作了......）当我最近试图将它合并到我的新“网站”时，我的表中没有插入任何数据......

（当我运行它时，我没有收到任何错误消息）

如果有人能告诉我出了什么问题，我会很高兴的。谢谢！

* * *

```
// data,from a form on another page, that I want to insert in my db

$nom = $_POST['nom'];  
$prenom = $_POST['prenom'];  
$date = $_POST['date'];  
$identifiant = $_POST['identifiant'];  
$password = $_POST['password'];

// connexion to my database  
$connexion = mysql_connect("mysql5.000webh.com","a888888_user","mypassword");
mysql_select_db("a888888_mydatabase",$connexion);

// creation and sending of SQL query  
$requete = "insert into panel values   
('','$nom','$prenom','$date','$identifiant','$password')";
mysql_query($requete);

echo "Vos donnees ont ete envoyees !";  
include('page.html');

// closing Mysql connexion
mysql_close(); 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:11:56.713

而不是直接执行您的查询，例如，

```
mysql_query($requete); 
```

使用变量来获取使用变量的查询结果，例如，

```
$result = mysql_query($requete); 
```

现在使用 if 语句来简单检查您的查询是否已执行，然后使用该`mysql_error()`函数查看错误。

```
if ( !$result ) {
    die( mysql_error() );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:55:59.543

您没有指定插入值的字段：

```
$requete = "insert into panel values   
('','$nom','$prenom','$date','$identifiant','$password')" 
```

# java - 如何获取 CloudFoundry MySQL 连接参数？

> ID：11405537
> 
> 赞同：4
> 
> 时间：2012-07-10T01:43:01.800
> 
> 标签：java, spring, cloud-foundry

我已经在 CloudFoundry 上部署了一个带有 MySQL 服务的 Spring 应用程序。我想从 MySQL Workbench/QueryBrowser 连接到该 CloudFoundry MySQL 实例。

有没有办法在 CloudFoundry 上获取该 mysql 数据库的连接参数（驱动程序、url、用户名、密码）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:54:06.637

尝试使用 cadlecott 应用程序（[vmc 隧道](http://docs.cloudfoundry.com/tools/vmc/caldecott.html "vmc隧道")）连接到您的 mysql 服务。您可以将提供的用户名、密码和服务名称用于您的 MySQL Workbench。

例如

```
vmc create-service mysql mysql-test
vmc tunnel mysql-test
Service connection info: 
  username : u5B3ShwOIX40c
  password : p2VoxZqZQRxTz
  name     : d5dc313431cff4046b68798a8bba1328c

Starting tunnel to mysql-test on port 10000.

**1: none**

2: mysql

3: mysqldump

Which client would you like to start?: 1 
```

（选择第一个选项）

然后打开 MySQL Query Browser 并使用上面的用户名/密码。将主机名设置为 127.0.0.1 而不是 localhost 并记住设置端口号。默认值为 10000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:27:58.670

请快速阅读此处的 vmc 隧道文档：- [http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

正如 Nikos 已经指出的，只需在连接隧道后选择选项一，然后使用提供的参数连接 MySQL Workbench。

# javascript - 未捕获的 ReferenceError $ 未定义

> ID：11405538
> 
> 赞同：2
> 
> 时间：2012-07-10T01:43:06.370
> 
> 标签：javascript, jquery, html

我对 JavaScript 很陌生（几个小时前才开始尝试让脚本正常工作）。我浏览了一些关于 W3 的教程，当我将它直接粘贴到我的 HTML 中时， *“hello world”*代码可以工作，但是我遇到了一个脚本问题（我也遇到了其他脚本的问题，但我不确定我做错了什么）。

我有这段[代码](http://jsfiddle.net/BxpSF/)，我想在我的 HTML 中进行测试，我复制了 HTML，它看起来一样，然后我在我的静态文件夹中创建了一个名为的文件`edit.js`并将 JavaScript 复制到其中（如图所示）。它在页面上没有任何错误，但是当我单击它时没有任何反应。我试图在其中粘贴一个 W3 *'hello world'*代码并且有效，但这个脚本没有。

我试图检查 Chrome 中的代码，这就是我看到上述错误的地方（在资源选项卡下）。我可以使用 Chrome 打开 js 文件，这让我认为 js 文件可以访问并正确指向，但我不确定如何让它工作。我使用 Jinja2 作为我的模板引擎来呈现 HTML，在我的标题中我有：

```
<script language="JavaScript" type="text/javascript" src="static/edit.js"></script> 
```

在我的主模板（在所有页面上呈现的模板）中，我有：

```
<script language="JavaScript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

**编辑.js：**

（即使将它直接放在我想要使用它的页面上的脚本标记中也不起作用）

```
$('#editvalue').click(function(e){$('#storedvalue').hide();$('#altervalue').show();});
$('#savevalue').click(function(e){
   var showNew = $('#changevalue').val();
   $('#altervalue').hide();
   $('#storedvalue').show();
   $('#storedvalue span').text(showNew);
});​ 
```

**HTML：**

（它嵌入在更大的页面中）

```
 <head>
        <script language="JavaScript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script language="JavaScript" type="text/javascript" src="static/edit.js"></script>
    </head>
... my html code..
        <div id="wrapper">
           <div id="container">
              <div id="storedvalue"><span>Hello</span> [<a href="javascript:void(0);" id="editvalue">edit</a>]</div>
              <div id="altervalue" style="display:none;"><input type="text" name="changevalue" id="changevalue" value="Hello"> [<a href="javascript:void(0);" id="savevalue">save</a>]</div>
           </div>
        </div> 
```

我从来没有能够成功运行 W3 上还没有的 JavaScript。即使我看到网上有人说他们对他们来说工作得很好，我也会遇到其他脚本同样的问题。我需要做任何额外的事情来完成这项工作吗？

我的两个问题是：

*   我究竟做错了什么？
*   因为 Javascript 在出现问题时似乎无法正常工作，有没有办法获取错误或有关实际错误的信息？

我读[了 Uncaught ReferenceError: $ is not defined？](https://stackoverflow.com/questions/2075337/uncaught-referenceerror-is-not-defined)在过去的一个小时里一直试图解决这个问题，但看不到我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:48:04.813

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

jQuery 的脚本标签应该在您的自定义 javascript 之前。

遵从`edit.js`

```
<script type="text/javascript" src="static/edit.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T01:52:37.030

首先，您需要先放置 jQuery 脚本标签。

其次，您需要执行以下操作之一：

1.  将您的代码放入此函数中：

    ```
    $(document).ready(function(){/*CODE HERE*/}); 
    ```

2.  或者像这样：

    ```
    $(function(){
        /*CODE HERE*/
    }); 
    ```

DOM 需要准备好才能使用它。将代码放在在 DOM 的就绪事件上执行的匿名函数中就是这样做的。

**编辑：**

```
$(function(){
   $('#editvalue').click(function(e){$('#storedvalue').hide();$('#altervalue').show();});
   $('#savevalue').click(function(e){
     var showNew = $('#changevalue').val();
     $('#altervalue').hide();
     $('#storedvalue').show();
     $('#storedvalue span').text(showNew);
   });​
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T03:35:02.360

尝试删除语言属性..有时对我有用。现在已经过时了..我想

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T01:50:45.037

您需要先包含 jquery，然后才能使用它。

# c# - 使用 Moles 框架模拟静态依赖

> ID：11405540
> 
> 赞同：1
> 
> 时间：2012-07-10T01:43:24.193
> 
> 标签：c#, .net, asp.net-mvc, unit-testing, moles

我正在学习用于单元测试的 Moles 框架。我有一个带有 AccountController 的模板 ASP MVC 项目，我想测试的方法是 Register()

```
 [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, false, null, out createStatus);
            if (createStatus == MembershipCreateStatus.Success)
            {
                string confirmationGuid = Membership.GetUser(model.UserName).ProviderUserKey.ToString();
                string confirmUrl = System.Web.HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) +
                    "/account/confirm?id=" + confirmationGuid;
                var message = new MailService.MessageModel
                                  {
                                      UserName = model.UserName,
                                      MessageSubject = "Registration confirmation",
                                      MessageBody = "Please follow the link below in order to activate your account:\n" + confirmUrl
                                  };
                MailService.SendConfrimationEmail(message);
                return RedirectToAction("Confirmation", "Account");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }
        return View(model);
    } 
```

它依赖于静态方法`Membership.CreateUser`。测试方法如下所示：

```
 [TestMethod()]
    [HostType("Moles")]
    public void RegisterTest()
    {
        using (MolesContext.Create())
        {                
            var target = new AccountController();
            var model = new RegisterModel
            {
                UserName = "TestUser1",
                Password = "12345678",
                ConfirmPassword = "12345678",
                Email = "mail@mail.com"
            };
            target.Register(model);
            var exists = Membership.GetUser("TestUser1") != null;
            Assert.IsTrue(exists);
        }
    } 
```

我希望 Moles 框架模拟方法内部的静态方法，`Register`但是在调试时我发现它`createStatus`总是`InvalidAnswer`有价值，因此测试失败。如何在不手动创建任何接口或委托的情况下使用 Moles 框架来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T01:22:31.873

我终于找到了一种模拟`Membership.CreateUser`方法的方法，尽管实现有点长。

```
MMembership.CreateUserStringStringStringStringStringBooleanObjectMembershipCreateStatusOut = 
   (string userName, string password, string email, string passwordQuestion, 
    string passwordAnswer, bool isApproved, object providerUserKey,
    out MembershipCreateStatus @createStatus) =>
{
    @createStatus = MembershipCreateStatus.Success;
    return null;
}; 
```

# asp.net - ASPNETDB.MDF 版本冲突

> ID：11405541
> 
> 赞同：0
> 
> 时间：2012-07-10T01:43:43.623
> 
> 标签：asp.net

我正在我的家用计算机上开发一个项目，该计算机上装有 Visual Studio 2010 Ultimate。我将项目保存到闪存驱动器并在安装了 Visual Web Developer 2010 的办公室中对其进行了一些工作。

到目前为止，该项目只有使用 .net 登录控件的登录屏幕。它在我的家用电脑上工作，在我的工作电脑上工作。但是在我把它带回家并尝试运行它之后，我收到一条错误消息：

“数据库'（我的闪存驱动器路径）/ASPNETDB.MDF'无法打开，因为它是版本 661。此服务器支持版本 655 及更早版本。不支持降级路径。”

所以很明显，当我在我的工作计算机上运行它时，它会将数据库设置为版本 661。我现在可以做什么才能在我的家用计算机上运行它？我需要做哪些改变来确保我可以在两个地方继续这个项目？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:55:21.070

最简单的解决方案是将家用计算机上的 SQL Server（或 SQL Server Express，视情况而定）更新到[当前发布的版本](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)。

# javascript - JavaScript 中的调试技术。异步回调

> ID：11405545
> 
> 赞同：3
> 
> 时间：2012-07-10T01:44:20.660
> 
> 标签：javascript, jquery, debugging, asynchronous, coffeescript

在我正在开发的现有 Backbone/jQuery/CoffeeScript 应用程序中，似乎有一个函数 ( `Backbone.Collection.fetch()`) 被多次调用（有时数字可能会有所不同）。我认为这可能是一个时间问题，因为我正在做很多嵌套回调（如 AJAX 等）并且它变得难以调试。我可能应该尝试将代码转换为使用 jQuery deferred 但与此同时，我能做什么？

刚刚尝试在 Chrome 中浏览代码，但似乎代码在这里和那里跳跃，也许它同时处理不同的回调？

我在想也许我在每个函数 + 它的参数中添加了一个 console.log，但一定有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:44:26.863

您可以向该`fetch()`函数添加堆栈跟踪，并查看从何处调用它。JS 有许多不错的堆栈跟踪实现。我在 [Eric Wendelin 的版本上](https://github.com/eriwen/javascript-stacktrace)取得了很大的成功，但还有[很多其他](https://www.google.com/search?q=javascript+stack+trace)版本。

通过堆栈跟踪，也许您至少可以看到该函数最常见的路径，这可能有助于缩小搜索范围。它甚至可以弄清楚潜在的罪魁祸首。

# objective-c - Objective-C，为什么这些 NSArrays 不匹配？

> ID：11405546
> 
> 赞同：1
> 
> 时间：2012-07-10T01:44:44.093
> 
> 标签：objective-c, comparison, nsarray

我有两个要比较的 NSArray — 在 NSLog 输出中它们看起来相同，但不知何故它们并不相等。如果我将 NSArray 转换为 NSString 我会得到相同的结果。将它们与自己进行比较将是平等的。如何确定为什么一和二不相等？谢谢你。

```
- (void)confused:(NSArray *)two {

    NSArray *one = [NSArray arrayWithObjects:@"16777223", @"7", nil];
    NSArray *two = [[NSBundle bundleWithPath:@"/path/to/bundle"] executableArchitectures];

    // NSArray "two" shows as 16277223, 7 in NSLog

    if ([two firstObjectCommonWithArray:(NSArray *)one])
    {
        NSLog(@"- it's equal %@ %@", one, two);
        // if array one matches array two then this will output
    }
    else {
        NSLog(@"- it's NOT equal %@ %@", one, two);
    }

    return;
} 
```

这是控制台的输出：

```
myApp (
    16777223,
    7
)
myApp (
    16777223,
    7
)
myApp - it's NOT equal (
    16777223,
    7
)(
    16777223,
    7
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:59:02.597

`-[NSBundle executableArchitectures]`返回一个对象数组`NSNumber`，而不是`NSString`对象，因此您传入的数组中没有字符串。如果你改变

```
NSArray *one = [NSArray arrayWithObjects:@"16777223",@"7", nil]; 
```

到

```
NSArray *one = [NSArray arrayWithObjects:[NSNumber numberWithUnsignedInteger:NSBundleExecutableArchitectureX86_64], 
                                         [NSNumber numberWithUnsignedInteger:NSBundleExecutableArchitectureI386], 
                  nil]; 
```

您的代码应该可以工作。

# python - 如何在 Windows 上安装 PyCrypto？

> ID：11405549
> 
> 赞同：151
> 
> 时间：2012-07-10T01:44:52.070
> 
> 标签：python, windows, python-2.7, pycrypto

我已经阅读了所有其他谷歌源代码和 SO 线程，但没有任何工作。

`Python 2.7.3 32bit`安装在`Windows 7 64bit`. 下载、解压，然后尝试安装 PyCrypto 结果`"Unable to find vcvarsall.bat".`

因此，我安装了 MinGW 并将其作为首选编译器添加到安装行。但后来我得到了错误`"RuntimeError: chmod error".`

我到底该如何解决这个问题？我试过使用 pip，它给出了相同的结果。我找到了一个预构建的 PyCrypto 2.3 二进制文件并安装了它，但在系统上找不到它（不工作）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-07-10T02:19:54.200

如果您尚未安装与 Python.org 分发的 Visual Studio 二进制文件兼容的 C/C++ 开发环境，那么您应该坚持只安装纯 Python 包或提供 Windows 二进制文件的包。

幸运的是，有可用于 Windows 的 PyCrypto 二进制文件： [http ://www.voidspace.org.uk/python/modules.shtml#pycrypto](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)

**更新：**
正如@Udi 在下面的评论中所建议的那样，以下命令也可以安装`pycrypto`并且也可以用于`virtualenv`：

```
easy_install http://www.voidspace.org.uk/python/pycrypto-2.6.1/pycrypto-2.6.1.win32-py2.7.exe 
```

[请注意从此列表中](http://www.voidspace.org.uk/python/pycrypto-2.6.1/)为您的设置选择相关链接

如果您正在寻找 Python 3.5 的构建，请参阅 Python 3.5[上的 PyCrypto](https://stackoverflow.com/q/32800336/4565685)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-12-06T01:22:05.193

Microsoft 最近发布了一个独立的、专用的[Microsoft Visual C++ Compiler for Python 2.7](http://www.microsoft.com/en-us/download/details.aspx?id=44266)。如果您使用的是 Python 2.7，只需安装该编译器和 Setuptools 6.0 或更高版本，大多数带有 C 扩展的包现在都可以轻松编译。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-12-07T05:21:07.950

**多年以后**，python 终于同意了一个名为的二进制分发`wheel`，它允许在 Windows 上安装二进制扩展，而无需使用简单的编译器`pip install packagename`。有一个[流行包的列表](http://pythonwheels.com/)及其状态。Pycrypto 还没有，但例如 lxml、PySide 和 Scrapy。

**2015 年 11 月编辑**：`pip uninstall pycrypto`& `pip install pycryptodome`。它是`pycrypto`具有新功能的前叉，它支持车轮。它取代了`pycrypto`，因此现有代码将继续工作（请参阅[https://pycryptodome.readthedocs.org/en/latest/src/examples.html](https://pycryptodome.readthedocs.org/en/latest/src/examples.html)）

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-06-06T07:09:41.673

对于 VS2010：

```
SET VS90COMNTOOLS=%VS100COMNTOOLS% 
```

对于 VS2012：

```
SET VS90COMNTOOLS=%VS110COMNTOOLS% 
```

然后调用：

```
pip install pyCrypto 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-07-10T01:54:32.980

### 一般来说

`vcvarsall.bat`是 Visual C++ 编译器的一部分，你需要它来安装你想要安装的东西。如果您的 Python 是使用 Visual Studio 工具链编译的，甚至不要尝试处理 MingGW，反之亦然。甚至微软工具链的**版本也很重要。**使用 VS 2008 编译的 Python 不适用于使用 VS 2010 编译的扩展！

您必须使用与编译 Python 版本相同的编译器来编译 PyCrypto。谷歌搜索*“无法找到 vcvarsall.bat”*，因为这是问题的根源，[这是在 Windows 上编译 Python 扩展的一个非常常见的问题。](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)

[要在使用此链接的任何系统上正确执行此操作，需要阅读大量信息和大量信息。](http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/)

### 注意使用 Visual Studio 2010 或不使用 Visual Studio 2008

据我所知，以下内容仍然正确。这是 2010 年 6 月在上面的链接中发布的，指的是尝试使用 VS 2010 Express 针对 python.org 上提供的 Python 安装程序构建扩展。

> 如果你这样做，请小心。来自 python.org 的 Python 2.6 和 2.7 是使用 Visual Studio 2008 编译器构建的。您将需要使用与 Python 相同的 CRT (msvcr90.dll) 进行链接。
> 
> Visual Studio 2010 Express 链接到错误的 CRT 版本：msvcr100.dll。
> 
> 如果这样做，您还必须使用 Visual Studio 2010 Express 重新构建 Python。您不能使用适用于 Windows 的标准 Python 二进制安装程序。您也不能使用使用与 Visual Studio 2010 (Express) 不同的编译器构建的任何 C/C++ 扩展。

*意见：这是我放弃 Windows 来为 OSX 进行所有严肃开发工作的原因之一！*

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2015-09-20T07:25:00.963

[PyCryptodome](http://www.pycryptodome.org/)是一个几乎兼容的 PyCrypto 分支，在[pypi](https://pypi.python.org/pypi/pycryptodome)上有 Windows 轮子。

您可以通过简单的方式安装它：

```
pip install pycryptodome 
```

该网站还包含使用 Microsoft 编译器从源代码构建它的说明。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-01-22T19:17:33.003

我已经设法`pycrypto`通过使用`MinGW32`and进行编译`MSYS`。这假定您已经`pip`或`easy_install`已安装。

我是这样做的：

1) 安装[MinGW32](http://www.mingw.org/)。为了便于解释，我们假设它安装在`C:\MinGW`. 使用我推荐的安装程序时，选择`.` MSYS 应该安装的 C++ 编译器`MinGW`

2) 添加`c:\mingw\bin,c:\mingw\mingw32\bin,C:\MinGW\msys\1.0, c:\mingw\msys\1.0\bin and c:\mingw\msys\1.0\sbin`到您的`%PATH%`. 如果你不熟悉，[这篇文章](https://stackoverflow.com/questions/6318156/adding-python-path-on-windows-7)很有帮助。

3) 从搜索栏中运行`msys`，MSYS 终端将打开。对于熟悉 的人来说`Cygwin`，它的工作方式类似。

4) 在此之后，从 MSYS 终端中`pip install pycrypto`应该可以正常运行。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-04-12T09:46:35.743

**对于 Windows 7：**

要在 Windows 中安装 Pycrypto，

在命令提示符中试试这个，

设置path=C:\Python27\Scripts（即easy_install所在的路径）

然后执行以下，

easy_install pycrypto

**对于 Ubuntu：**

试试这个，

[从“ https://pypi.python.org/pypi/pycrypto](https://pypi.python.org/pypi/pycrypto) ”下载 Pycrypto

然后使用终端将当前路径更改为下载路径，用户应该是 root：

例如：root@xyz-virtual-machine:~/pycrypto-2.6.1#

然后使用终端执行以下命令：

python setup.py 安装

它对我有用。希望对所有人都有效..

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-07-13T14:50:39.620

对于那些寻找 python 3.4 的人，我找到了一个带有安装程序的[git repo ，它可以正常工作。](https://github.com/axper/python3-pycrypto-windows-installer)这是[x64](https://github.com/axper/python3-pycrypto-windows-installer/blob/master/pycrypto-2.6.1.win-amd64-py3.4.exe?raw=true)和[x32的直接链接](https://github.com/axper/python3-pycrypto-windows-installer/blob/master/pycrypto-2.6.1.win32-py3.4.exe?raw=true)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-01-04T16:22:09.547

尝试使用：

```
pip install pycryptodome 
```

或者：

```
pip install pycryptodomex 
```

来源：[https ://pypi.python.org/pypi/pycryptodome](https://pypi.python.org/pypi/pycryptodome)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-07-10T07:21:24.797

可以使用 Windows 7 SDK 工具包构建 PyCrypto。Windows 7 SDK 有两个版本。原始版本（用于 .Net 3.5）包括 VS 2008 命令行编译器。可以安装 32 位和 64 位编译器。

第一步是编译[mpir](http://mpir.org/)以提供快速算术。我已经记录了我在[gmpy](http://code.google.com/p/gmpy/)库中使用的过程。使用 SDK 编译器构建 mpir 的详细说明可以在[sdk_build找到](http://code.google.com/p/gmpy/source/browse/trunk/win_x64_sdk_build.txt)

在 DOS 提示符下使用 SDK 编译器的关键步骤是：

1) 根据需要运行 vcvars32.bat 或 vcvars64.bat。

2）在提示符下，执行“set MSSdk=1”

3）在提示符下，执行“set DISTUTILS_USE_SDK=1”

假设 C 代码没有其他问题，这应该允许“python setup.py install”成功。但我隐约记得，我必须编辑几个 PyCrypto 文件才能启用 mpir 并找到 mpir 库，但目前我的 Windows 系统还没有启动。几天后我才有时间重新创建这些步骤。如果到那时您还没有报告成功，我将发布 PyCrypto 步骤。这些步骤将假设您能够编译 mpir。

我希望这有帮助。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-05-22T08:30:05.620

如果您在 Windows 上安装 Pycrypcto，只需使用：pip install pycryptodome。它就像一个奇迹，它会让你的生活比尝试进行大量配置和调整要容易得多。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-09-24T10:11:08.307

> 因此，我安装了 MinGW 并将其作为首选编译器添加到安装行。但后来我收到错误“RuntimeError：chmod 错误”。

发生此错误`"RuntimeError: chmod error"`是因为安装脚本没有找到该`chmod`命令。

> 我到底该如何解决这个问题？

## 解决方案

您只需**将 MSYS 二进制文件添加到 PATH 并重新运行安装脚本**。

（注意：请注意 MinGW 带有 MSYS 所以）

## 例子

例如，如果我们在文件夹中`C:\<..>\pycrypto-2.6.1\dist\pycrypto-2.6.1>`

`C:\.....>`**`set PATH=C:\MinGW\msys\1.0\bin;%PATH%`**
`C:\.....>`**`python setup.py install`**

可选：您可能需要在重新运行脚本之前进行清理：

```
`C:\<..>\pycrypto-2.6.1\dist\pycrypto-2.6.1> python setup.py clean` 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-07-30T22:02:36.623

1.  转到[“ **Microsoft Visual C++ Compiler for Python 2.7** ”](https://www.microsoft.com/en-us/download/details.aspx?id=44266)并根据“系统要求”继续（这是我将以下步骤放在一起的操作）。

2.  **通过以下方式安装 setuptools**（Python 需要 setuptools 6.0 或更高版本才能自动检测此编译器包） **：** `pip install setuptools` **或**从 下载“Setuptools bootstrapping installer”源[，](https://bootstrap.pypa.io/ez_setup.py)将此文件保存在文件系统中的某个位置为“ez_python.py”并安装：`python ez_python.py`

3.  **安装轮子**（建议使用轮子来生成预构建的二进制包）。您可以使用以下方式安装它：`pip install wheel`

4.  打开 Windows 提升的命令提示符 cmd.exe（使用“以管理员身份运行”）为所有用户**安装“Microsoft Visual C++ Compiler for Python 2.7”**。您可以使用以下命令来执行此操作： msiexec /i`C:\users\jozko\download\VCForPython27.msi ALLUSERS=1`只需使用您自己的文件路径：`msiexec /i <path to MSI> ALLUSERS=1`

5.  **现在您应该可以使用以下命令安装 pycrypto：`pip install pycrypto`**

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-08-18T17:01:19.033

我的回答可能与此处提到的问题无关，但我在**Python 3.4**中遇到了同样的问题，其中 Crypto.Cipher 不是有效的导入。所以我尝试安装 PyCrypto 并遇到了问题。

经过一些研究，我发现 3.4 你应该使用**pycryptodome**。

我使用 pycharm 安装了 pycryptodome，我很好。

从**Crypto.Cipher**导入 AES

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-07-10T01:51:15.770

这可能不是最佳解决方案，但您可以从 MS 下载并安装免费的 Visual C++ Express 包。这将为您提供编译 PyCrypto 代码所需的 C++ 编译器。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-04-26T17:47:00.263

> 因此，我安装了 MinGW 并将其作为首选编译器添加到安装行。但后来我收到错误“RuntimeError：chmod 错误”。

需要在MinGW下安装msys包

![在此处输入图像描述](../Images/4194d972bf30d45a2300ccb404c0e96d.png)

并在您的 PATH 环境变量中添加以下条目。

*   `C:\MinGW\bin`
*   `C:\MinGW\msys\1.0\bin`[这是你可以找到 chmod 可执行文件的地方]

然后从普通的 Windows 命令提示符运行您的命令。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-08T04:45:33.783

[第 1 步：从此处](http://download.microsoft.com/download/1/D/9/1D9A6C0E-FC89-43EE-9658-B9F0E3A76983/vc_web.exe)安装 Visual C++ 2010 Express 。

（不要安装 Microsoft Visual Studio 2010 Service Pack 1）

第 2 步：从控制面板\程序和功能中删除所有 Microsoft Visual C++ 2010 Redistributable 包。如果您不这样做，那么安装将失败，并出现一个模糊的“安装过程中的致命错误”错误。

[第 3 步：从此处](https://download.microsoft.com/download/F/1/0/F10113F5-B750-4969-A255-274341AC6BCE/GRMSDKX_EN_DVD.iso)安装 Windows SDK for Visual Studio 2010 (v7.1) 的离线版本。这是 64 位扩展所必需的。Windows 为 Pismo 等 ISO 提供了内置安装。

第 4 步：您需要使用 Pismo File Mount Audit Package 安装 ISO 文件。[从这里](https://blogs.technet.microsoft.com/odsupport/2011/04/19/how-to-extract-the-contents-from-an-iso-file-without-burning-the-iso-to-disc/)下载 Pismo

第 5 步：右键单击下载的 ISO 文件并选择使用 Pismo 安装。此后，安装 Setup\SDKSetup.exe 而不是 setup.exe。

步骤 6a：在 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\amd64 中创建一个 vcvars64.bat 文件，方法是将目录更改为 C:\Program Files (x86)\Microsoft Visual Studio version\VC\ on命令提示符。在命令提示符下键入命令： `cd C:\Program Files (x86)\Microsoft Visual Studio version\VC\r`

步骤 6b：要为针对 x86 平台的 64 位命令行构建配置此命令提示符窗口，请在命令提示符下输入： `vcvarsall x86`单击[此处](https://msdn.microsoft.com/en-us/library/x4d2c09s.aspx)获取更多选项。

第 7 步：在命令提示符下，键入以下命令安装 PyCrypto： `C:\Python3X>pip install -U your_wh_file`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-07-04T14:32:53.550

我有 python 的 Pycharm。

1.  去`pycharm -> file -> setting -> project interpreter`

2.  点击`+`

3.  搜索`"pycrypto"`并安装包

**注意：**如果您没有安装“Microsoft Visual C++ Compiler for Python 2.7”，它会提示安装，安装完成后尝试上述步骤应该可以正常工作。

# notepad++ - 将书签插入记事本++中的下一行？

> ID：11405550
> 
> 赞同：2
> 
> 时间：2012-07-10T01:45:22.103
> 
> 标签：notepad++

我有一些行书签。我想在这些行的下一行插入一个书签。

![http://img259.imageshack.us/img259/5674/nextbookmark.png](../Images/ce665b19bc135c556a8302c305a11b63.png)

我在记事本++上记录了这个宏，但我不明白，因为效果不好：

```
F2
down arrow
ctrl+F2 
```

这种简单的组合给了我错误，有解决办法吗？

这是原始宏代码：

![http://img411.imageshack.us/img411/5002/macrocode.png](../Images/2f7a4325298c226660b6a5c5d36f5b1b.png)

在这种情况下，我记录了 3 次**F2-down arrow-ctrl+F2**。

但我不想记录标记的行数（21、59、63），我只想应用宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:01:25.413

我使用 AutoHotKey 解决了这个问题。我录制了一个脚本并用这个文本编辑它：

```
WinWait, *new  2 - Notepad++, 
IfWinNotActive, *new  2 - Notepad++, , WinActivate, *new  2 - Notepad++, 
Sleep, 100
Send, {F2}{DOWN}{CTRLDOWN}{F2}{CTRLUP} 
```

**`new 2`是我当前打开的记事本++ 窗口的名称

** `Send, {F2}{DOWN}{CTRLDOWN}{F2}{CTRLUP}`是在上述书签之后创建书签所需的键盘命令。如果我复制多次*发送，{F2}{DOWN}{CTRLDOWN}{F2}{CTRLUP}*我会得到想要的结果

# python - 如何向这个 Python 开启器添加用户代理？

> ID：11405558
> 
> 赞同：0
> 
> 时间：2012-07-10T01:46:00.080
> 
> 标签：python, url

> **可能重复：**
> [如何向 urllib2 开启程序添加标题？](https://stackoverflow.com/questions/6259489/how-do-i-add-a-header-to-urllib2-opener)

```
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
```

如何为此添加用户代理标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:57:03.417

不是一个直接的答案——因为 Mateusz 对你的直接问题是正确的，但我强烈建议如果你要做很多这样的事情，你可以考虑[http://docs.python-requests.org/en/latest](http://docs.python-requests.org/en/latest/index.html)`requests`上的库[/index.html](http://docs.python-requests.org/en/latest/index.html)

这样就很简单了：

```
import requests

r = requests.get('http://whatever.com/', headers={'User-Agent': 'xxxx'}) 
```

您还可以为您处理 cookie，基本身份验证更容易，并且很容易插入 OAuth 位 - 查看文档，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:51:33.080

```
request = urllib2.Request(your_webpage)
request.add_header('User-Agent', your_user-agent) 
data = opener.open(request).read() 
```

# java - 如何在没有数组的情况下访问不同的“全局”元素？（爪哇）

> ID：11405564
> 
> 赞同：1
> 
> 时间：2012-07-10T01:47:30.230
> 
> 标签：java, android

我目前正在做Android开发。

R 类（一个自动生成的类）有很多“全局”值，可以从任何地方访问，如下所示：

```
R.drawable.<file_name_ignoring_suffix> 
```

我有很多名为“item_0.png”、“item_1.png”、“item_2.png”等的文件。

有没有一种简单的方法可以在不先将它们放入数组的情况下遍历这些项目？

我目前的实现：

```
int[] itemResources = { R.drawable.item_0, R.drawable.item_1, R.drawable.item_2,
                        R.drawable.item_3, R.drawable.item_4, R.drawable.item_5  }; 
```

...然后遍历数组。

这很好用，但它不是特别可维护，并且当我有很多项目时会变得很费力。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:01:41.113

您当然可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)来获取`R.drawable`. 这有点hacky，但它可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:06:31.670

我认为，没有简单的方法可以做到这一点。这是我试图获取可绘制对象的小代码。

```
 R.drawable d = new R.drawable();
    try {
        for (Field fld : declaredFields) {
            Integer id = fld.getInt(d);
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), id);
            if (bitmap != null)
                Log.d("tag", "success");
            else
                Log.d("tag", "failed");
        }
    } catch (Exception e) {
        Log.d("tag", "" + e);
    } 
```

在上述测试中，其中一些失败了。我不知道原因，因为它需要进一步调查。但是，这将让你开始。

其次，如果您想使用 android 平台用于根据方向、区域设置等查找合适资源的规则来选择正确的 png ，也可以[从 theme 中查找此 api 。](http://developer.android.com/reference/android/content/res/Resources.Theme.html#obtainStyledAttributes%28android.util.AttributeSet,%20int%5B%5D,%20int,%20int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:54:04.110

将它们放在同一个目录中，然后自动查询目录内容并让它使用内容创建一个数组怎么样？

# cocoa - NSPredicate：验证用户输入

> ID：11405566
> 
> 赞同：2
> 
> 时间：2012-07-10T01:47:48.393
> 
> 标签：cocoa, core-data, validation, nspredicate

我允许用户使用 Core Data 搜索数据并在表格视图中显示结果。Apple 建议验证传递给 的任何用户输入`[NSPredicate predicateWithFormat:]`，但我似乎找不到任何关于如何执行此操作的示例或讨论。

我的第一个想法是只转义“*”和“？” 因为我正在使用替换变量，并且我假设框架会转义任何引号，因为它会在替换值周围添加引号。

这是最好的方法吗？任何人都可以指出在 Cocoa 中安全验证用户输入的讨论或示例代码吗？

# django - django 中的时区支持

> ID：11405567
> 
> 赞同：0
> 
> 时间：2012-07-10T01:47:53.713
> 
> 标签：django, timezone

我正在尝试让 Django 支持各种美国时区。我可以得到`America/New_York`等。但我的问题是夏威夷这样的地方？我找不到合适的时区设置？是否有我们可以在 Django 中使用的所有可用设置的地方？我想构建一个应用程序并让用户能够选择他们所在的时区。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:04:01.190

请参阅“[关于日期/时间您需要了解的内容](http://pyvideo.org/video/946/what-you-need-to-know-about-datetimes)”（来自 PyCon 2012 的精彩视频）。

```
>>> import pytz
>>> pytz.all_timezones
['Africa/Abidjan',
'Africa/Accra',
'Africa/Addis_Ababa'
...
'US/Pacific-New',
'US/Samoa',
'UTC',
'Universal',
'W-SU',
'WET',
'Zulu'] 
```

可用数据：

```
all_timezones = ['Africa/Abidjan', 'Africa/Accra', ...]
all_timezones_set = set(['Africa/Abidjan', 'Africa/Accra', ...]
common_timezones = ['Africa/Abidjan', 'Africa/Accra', ...]
common_timezones_set = set(['Africa/Abidjan', 'Africa/Accra', ...])
country_names = {u'BD': u'Bangladesh', u'BE': u'Belgium', ...}
country_timezones = {u'BD': [u'Asia/Dhaka'], u'BE': [u'Europe/Brussels'] ...} 
```

# javascript - Javascript数组和循环

> ID：11405577
> 
> 赞同：0
> 
> 时间：2012-07-10T01:49:06.787
> 
> 标签：javascript, arrays, loops

我需要帮助才能让我的代码正常工作。我希望能够循环我的数组并使用 if 命令来确保数组在那里。

```
arr = ["1","2","3","4"];
for (var i = 0; i < arr.length; i++) {
   if (string != arr[i]) {
  //do something
   }
} 
```

但它不起作用。if 命令忽略。

```
 var arr = ["150","-75"];

right = righ + "px";
leftpl=left * 1; 
    if (left < 325){        
leftplu = leftpl + 10; leftplus = leftplu + 'px ';
    for (var i = 0; i < arr.length; i++) {
    if (leftplus+right != arr[i]){
document.getElementById("new").innerHTML=leftplu+'px ' + righ+'px';
        }
    }
    } 
```

或者我可以将 for 循环放在“if (leftplus+right != arr[i])” 中，例如“if (leftplus+right != for for (var i = 0; i < arr.length; i++) {arr [一世]}）”

我很抱歉，我很难理解。我是 javascript 新手，正在努力学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:50:13.980

改变这个：

```
string != arr[i] 
```

对此：

```
typeof arr[i] != "string" 
```

JavaScript 是一种松散类型的语言，因此没有关键字`string`。相反，如上所示，您可以使用`typeof`运算符将​​其操作数的数据类型作为字符串获取。

通过此更改，您的最终代码应如下所示：

```
arr = ["1","2","3","4"];
for (var i = 0; i < arr.length; i++) {
   if (typeof arr[i] != "string") {
       //do something
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:33:09.240

这一行：“左加右”

包含像“123px456px”这样的字符串，将它们与数组值进行比较是没有意义的......

我猜你的意思是把数字加在一起而不是连接这些字符串

# doctrine - 无法加载 Doctrine 库和 PDO 驱动程序

> ID：11405579
> 
> 赞同：1
> 
> 时间：2012-07-10T01:49:28.890
> 
> 标签：doctrine, pdo, php

我正在使用 Win 7、Apache 2.2 和 PHP 5.4.4。我想将学说库和 PDO 添加到我的本地服务器。

*   PHP安装路径：`C:\php\`
*   教义库路径：`C:\php\extras\doctrine-dbal`
*   PDO 驱动程序路径：`C:\php\ext`
*   Apache2.2路径：`C:\Apache`

**php.ini**

```
; Windows: "\path1;\path2"
include_path = ".;C:\php\extras;C:\php\extras\doctrine-dbal"
extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
;extension=php_pdo_oci.dll
extension=php_pdo_odbc.dll
extension=php_pdo_pgsql.dll
extension=php_pdo_sqlite.dll
extension=php_pgsql.dll 
```

**phpinfo() 图片**

![PDO 驱动程序](../Images/fb3096839975cfd4811f1a533032530b.png)

![包含路径](../Images/d3d6b2a0c3de05265ec469dd13ad8c0d.png)

网络应用程序给出以下错误

```
Warning: require_once(Doctrine/Common/ClassLoader.php): failed to open stream: No such file or directory in C:\Apache\htdocs\stack\UMS\classes\class.dbextractor.php on line 2

Fatal error: require_once(): Failed opening required 'Doctrine/Common/ClassLoader.php' (include_path='.;C:\php\pear') in C:\Apache\htdocs\stack\UMS\classes\class.dbextractor.php on line 2 
```

如何在 php.ini 文件中更改学说和 PDO 驱动程序的包含路径

# java - 尝试写入文件时出现损坏的管道异常

> ID：11405582
> 
> 赞同：1
> 
> 时间：2012-07-10T01:49:51.787
> 
> 标签：java, http, sockets

我正在尝试编写一个非常简单的应用程序，它将使用 PUT 请求通过 HTTP 将视频上传到我的一个服务器。这是我的代码的样子：

```
socket = new Socket();
socket.connect(new InetSocketAddress(ticket.getHost(), 80));

outputStream = socket.getOutputStream();

// begin forming the request
outputStream.write(("PUT " + ticket.getEndpoint() + " HTTP/1.1\r\n" +
        "Host: " + ticket.getHost() + "\r\n" + 
        "Content-Length: " + getStreamFile().length() + "\r\n" +
        "Content-Type: video/mp4\r\n\r\n").getBytes());

// now, let's write us some binary data
fileInputStream = new FileInputStream(getStreamFile());
inputStream = new BufferedInputStream(fileInputStream);

byte[] fileBytes = new byte[1024];
int bytesRead = 0;
int totalBytesRead = 0;

while ((bytesRead = inputStream.read(fileBytes)) > 0) {
    outputStream.write(fileBytes, 0, bytesRead);

    totalBytesRead += bytesRead;

    notifyListenersOnProgress((double)totalBytesRead / (double)getStreamFile().length());
} 
```

很简单，对吧？直到我在大约两个循环后看到这个错误：

```
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method) ~[na:1.6.0_23]   
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) ~[na:1.6.0_23]
    at java.net.SocketOutputStream.write(SocketOutputStream.java:141) ~[na:1.6.0_23] 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:57:09.277

不确定这是否是问题所在，但您`\r\n`在`video/mp4`.

您还应该修改您的`write`调用以仅写入`bytesRead`数组的第一个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:17:35.857

套接字的接收端由于某种原因关闭了连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:28:15.880

不要用手做这些事情。为此使用 HttpURLConnection，这就是它的用途。创建一个 URL，从中获取 HttpURLConnection，将请求方法设置为“PUT”，设置内容类型，*不*设置内容长度，获取输出流，开始编写。

# java - GroupLayout 边距/填充是自动生成的？

> ID：11405587
> 
> 赞同：1
> 
> 时间：2012-07-10T01:50:52.493
> 
> 标签：java, swing, layout, grouplayout

我正在使用 grouplayout 来管理 3 个 jpanels。下面是它的截图（出于保密原因，我无法获得完整的截图）。绿色边框是 mainPanel，它附加了 grouplayout。三个黑色边框是三个具有不同组件的 jpanel。如您所见，grouplayout 会自动创建一个内边距（大约 20 像素）。这只发生在右侧边框和左侧边框是可以的。我试过*setAutoCreateContainerGaps(false)*和*setAutoCreateGaps(false)*似乎没有任何效果。另外，mainPanel 的最大尺寸，由 groupLayout 的*maximumLayoutSize(mainPanel)返回*是 642px,540px，但是这三个面板中最长的 jpanel 只有 630px（明确设置）。为什么它会添加那些额外的像素？只在右边？我如何摆脱这个填充/空间？

![在此处输入图像描述](../Images/29f66bcd3aa1ffb5bdc3d7b5bdb6bb7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:15:32.987

我想我明白了。我尝试设置 mainPanel.setPreferredSize() 并且 grouplayout 开始兑现这一点。

# google-app-engine - Google App Engine 中的 java.lang.UnsupportedClassVersionError

> ID：11405588
> 
> 赞同：0
> 
> 时间：2012-07-10T01:50:54.017
> 
> 标签：google-app-engine, gwt, rpc

我正在运行 Windows 7 和 Juno。Jdk 1.7，gwt 2.4，应用引擎 1.7。

我在[这里](https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted)做了 stockwatcher 教程，一切都很好。然后我将它部署到应用程序引擎。一切仍然很好！

[但是，我随后在此处](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)完成了本教程的 RPC 部分。当我在本地运行时，我得到了一个 java.lang.VerifyError，我通过遵循[这个](https://stackoverflow.com/questions/7970622/java-7-jvm-verifyerror-in-eclipse)线程（将 -XX:-UseSplitVerifier 放在默认 VM 参数中）修复了它。然后它在本地工作，我部署到应用引擎。

在应用引擎中，我得到一个 java.lang.UpsupportedClassVersionError。[我在这里](https://stackoverflow.com/questions/8139477/google-app-engine-and-java-version)和[这里](https://stackoverflow.com/questions/8568083/java-lang-unsupportedclassversionerror-com-google-mystorage-server-greetingserv)发现了两个似乎有相同问题的线程。我正在使用全新安装的 Windows 7，我下载的唯一 jdk 是 1.7。通过eclipse，我看到了jre7、jdk 1.7和app engine 1.7。

我在某处读到应用引擎不适用于 1.7。但是下载页面上的 app engine sdk 版本是 1.7（我认为这可能是最新的），但我真的不知道这些东西是否相关。我继续下载了 java 6 和 app engine sdk 1.6.6，将 jre6 添加到已安装的 jres 中，将编译器合规级别设置为 1.6，在我的项目中也进行了更改，并将默认的 app engine sdk 更改为 1.6。 6.

现在我收到错误消息“Java 编译器级别与安装的 Java 项目方面的版本不匹配”。我用谷歌搜索了这个问题，每个人都说要右键单击该项目并更改方面，但我似乎找不到该选项。我也不知道我是否以正确的方式去做这件事。如果可能的话，我宁愿使用最新版本的一切。我也不明白为什么应用引擎第一次在没有 RPC 的情况下工作，但与 RPC 中断了。

任何帮助将不胜感激！！！谢谢你！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:05:39.080

GAE does not currently support java 1.7, only 1.5 and 1.6 are supported. See the [java docs](https://developers.google.com/appengine/docs/java/overview) for more information.

The relevant paragraph is the following:

> App Engine runs Java applications using the Java 6 virtual machine (JVM). The App Engine SDK supports Java 5 and later, and the Java 6 JVM can use classes compiled with any version of the Java compiler up to Java 6.

The version of the GAE sdk you downloaded (1.7) isn't related in any way with the java version.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:56:56.150

GAE 是一个沙盒环境。目前它只支持Java 6。但是为了解决你的问题，如果你可以将你的编译版本降级到Java 6，你应该能够利用GAE。但是，如果您想要一个没有任何限制的独立服务器环境，请查看其他云平台，例如[heroku](http://www.heroku.com/)或[cloudbee](http://www.cloudbees.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T13:37:03.613

## 目前，...已经支持 java 7

警告：在未来的版本中，将删除对 Java 6 的支持，因此最好立即开始迁移到 Java 7。如果您一直在使用 Java 6，并且有兴趣了解迁移到 Java 7 可能遇到的问题，那么这份白皮书可能会有所帮助。

来自：[https ://developers.google.com/appengine/docs/java/overview](https://developers.google.com/appengine/docs/java/overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:15:13.167

可能性是

*   您没有正确的 JDK 或
*   您使用的 GAE 不支持 1.7

在 .settings 下打开下面的文件（使用导航器窗口）并将 java 项目方面更改为 1.6 org.eclipse.wst.common.project.facet.core.xml

更改后，您必须关闭并重新启动 Eclipse。

# ajax - InDesign CS5 脚本：如何使用 BridgeTalk 从 Photoshop 保存新图像？

> ID：11405590
> 
> 赞同：0
> 
> 时间：2012-07-10T01:50:57.610
> 
> 标签：ajax, adobe, adobe-indesign, extendscript

该脚本试图：

*   新建一个文件夹
*   扫描 InDesign 文档中的所有图像
*   在 Photoshop 中将所有图像转换为灰度
*   从 Photoshop 将新的灰度图像保存在新文件夹中

在 Photoshop 中将图像转换为灰度需要使用`BridgeTalk`对象，这允许 InDesign 和 Photoshop 之间进行通信（`BridgeTalk`对象的使用似乎是 Ajax 的一种形式）。

到目前为止，我*几乎*可以正常工作，因为创建了一个新文件夹，并且 InDesign 似乎确实通过`BridgeTalk`. 但是当打开 Photoshop 时，什么也没有发生——没有新的图像被保存，我不确定灰度转换是否正在发生......

这是我的代码：

```
#target "InDesign"

var inDesignDocument = app.activeDocument;
var newFolder = createFolder(inDesignDocument); // if subdirectory images DNE, create this folder with the function below

sendImagesToPhotoshop(inDesignDocument, newFolder);

//---------------------------------------------------------------------------------------------------------------

function createFolder(doc)
{
    try
    {
    /*
         * type-casting the filePath property (of type object) into a String type;
         * must be a String type to concatenate with the subdirectory variable (also of type String)
         */
        var docPath = String(doc.filePath);
        var subdirectory = "/BLACK AND WHITE IMAGES";
    }
    catch(e)
    {
        alert(e.message);
        exit();
    }

    var imagesFolder = docPath + subdirectory; // concatenating the two variables
    if(!Folder(imagesFolder).exists)
    {
        Folder(imagesFolder).create();
    }

    return imagesFolder; // for instantiation outside of this function

} // end of function createFolder

//---------------------------------------------------------------------------------------------------------------

function sendImagesToPhotoshop(doc, folder)
{
    var imgs = doc.allGraphics;
    var fileName = "";
    var img = "";
    var imgType = "";

    for(var i = 0; i < imgs.length; i++)
    {
        if(imgs[i].itemLink != null)
        {
            fileName = imgs[i].itemLink.name;
            img = new File(folder + "/" + fileName); // each image instantiated here
            imgType = imgs[i].imageTypeName; // image type is determined here (.tif, .jpg, .png, etc..)

            alert("The file \"" + fileName + "\"\n\tis a " + imgType + " file.");

            // each image exported to the new folder here, by file type
            switch(imgType)
            {
                case "GIF":
                    alert("This script cannot convert and export the GIF file:\n\t" + fileName + " !");
                    break;

            case "JPG":
            case "EPS":
                case "PNG":
                case "TIFF":

            createBridgeTalkMessage(folder);
                    break;

                default:
                    alert("\tUnlisted image type: " + imgType + "!\nAdd this type to the switch statement.");
                    break;

            } // end of switch statement

        } // end of if statement
    } // end of for loop

} // end of function sendImagesToPhotoshop

//---------------------------------------------------------------------------------------------------------------

function createBridgeTalkMessage(imagesFolder)
{
    var bt = new BridgeTalk();
    bt.target = "photoshop";
    bt.body = saveNewImageInPhotoshop.toSource() + "(" + imagesFolder.toSource() + ");";

    bt.onError = function(e)
    {
        alert("Error: " + e.body);
    }

    bt.onResult = function(resObj){};

    bt.send();

}// end of function createBridgeTalkMessage

//---------------------------------------------------------------------------------------------------------------

    // called from function createBridgeTalkMessage
    function saveNewImageInPhotoshop(imagePath)
    {
        var photoshopDoc = "";
        app.displayDialogs = DialogModes.NO; // Photoshop statement, prevents status alerts from interrupting
        photoshopDoc.changeMode(ChangeMode.GRAYSCALE); // convert image to GRAYSCALE

        photoshopDoc.saveAs(new File(imagePath) );
        photoshopDoc.close(SaveOptions.DONOTSAVECHANGES);

    } // end of function saveNewImageInPhotoshop 
```

这是基于 Kasyan Servetsky 的工作，可在此处找到：   [http ://forums.adobe.com/message/3817782](http://forums.adobe.com/message/3817782)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:27:01.100

Yeah I experienced issues recently with single line comments and indeed using /* ... */ did the trick. I think you can pass a string for your url but need to escape the slashes characters.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:48:41.197

您似乎将文件夹而不是实际的图像文件传递给 Photoshop。这可能可以解释你的问题；）

洛伊克

# php - 以字符串为参数的 IN() 不适用于 PDO

> ID：11405602
> 
> 赞同：0
> 
> 时间：2012-07-10T01:53:07.003
> 
> 标签：php, mysql, pdo

我正在尝试将包含以下内容的 mysql_query 语句转换为 PDO：

```
$string = '2, 3, 4, 5, 7, 8'; 
```

`mysql_query(" ... IN($string) ...");`

这适用于`mysql_query`语句，但不适用于 PDO 准备和执行（不返回结果）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T01:58:50.113

如果查询 sql 与`mysql_query`. 一起正常工作，那么它将与 pdo 一起正常工作。

如果你只用一个占位符绑定整个字符串，那将不起作用。您需要为`IN`子句的每个值绑定。

***例子：***

```
$string = '2, 3, 4, 5, 7, 8';
$params = explode(', ', $string);
$sth = $pdo->prepare(' ... IN('.join(',', array_fill(0, count($params), '?')).') ...');
$ret = $sth->execute($params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:59:09.970

请参阅[MySQL IN 语句的 PDO 绑定值](https://stackoverflow.com/questions/1586587/pdo-binding-values-for-mysql-in-statement)或[我可以将数组绑定到 IN() 条件吗？](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition).

我认为这是您正在寻找的解决方案，因为您无法将多个值绑定到单个命名参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:54:53.230

“您不能将多个值绑定到单个命名参数，例如 SQL 语句的 IN() 子句。”

[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

这违背了准备好的陈述的全部目的。

# javascript - 相关产品展示为思维导图视图

> ID：11405604
> 
> 赞同：0
> 
> 时间：2012-07-10T01:53:13.273
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, jquery-plugins

我在项目中有以下需求。我需要一个功能来显示一个产品的相关产品。相关产品的视图应该像思维导图视图。当用户点击一个产品时，我需要显示另一个相关产品像思维导图视图一样展开。![在此处输入图像描述](../Images/b203dbc40c167de50ebe0a7baedcafe5.png)

所以相关产品在点击父产品时会展开或折叠。是否可以使用javascript/jquery来完成。

我将 asp.net mvc 3 用于开发目的。

此外，如果可能的话，我们应该设计它而不需要像 flash 或 Silverlight 这样的插件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:04:53.043

There are a number of Javascript mind map implementations, several of them ports of [Kenneth Kufluk's version](http://kenneth.kufluk.com/google/js-mindmap/). You could probably expand these into what you are looking for.

# java - 如何正确添加声音？

> ID：11405611
> 
> 赞同：1
> 
> 时间：2012-07-10T01:54:06.043
> 
> 标签：java

好的，所以我正在开发我的程序，一旦单击按钮就会播放一首歌曲，我有代码，当单击按钮时我的音频正在播放，但现在唯一的问题是我的程序完全疯了，只是单击按钮时播放音频！！！！该程序只是冻结音频继续播放，但程序不会执行它的其他功能！我究竟做错了什么？我该如何解决？

这是动作侦听器按钮的代码

在 myFrame.java 中

```
sound sound = new sound();
private File pokemonBattle = new File(".\\audio\\"+"sound.wav");

private void dualButtonActionPerformed(java.awt.event.ActionEvent evt)       
    {                                           
    // TODO add your handling code here:
    for (int i = 0; i<1; i++){
    c = deck.getNextCard();
    p1hand[i] = c;
    p1.setCard(c);                   //ignore all this
    c = deck.getNextCard();
    p2hand[i] = c;
    p2.setCard(c);
     }

    pokemon1.setEnabled(true);
    pokemon2.setEnabled(true);
    pokemon1.setIcon(p1hand[0].getImage()); //ignore all this as well
    pokemon2.setIcon(p2hand[0].getImage());
    textArea.setText("Pokemon 1:"+p1hand[0].toString()+"\nPokemon 2:   
 "+p2hand[0].toString());
    p1ResultLabel.setText("");
    p2ResultLabel.setText("");

      //this is where im calling my audio
     sound.playAudio(pokemonBattle);//this is where im calling my play audio method

 } 
```

sound.java 我有 playAudio()

```
import java.io.File;
import javax.sound.sampled.*;

public class sound {

public void playAudio(File sf){
    AudioFormat audioFormat;
    AudioInputStream audioInputStream;
    SourceDataLine sourceDataLine;

    try
    {
        audioInputStream = AudioSystem.getAudioInputStream(sf);
        audioFormat = audioInputStream.getFormat();
        System.out.println(audioFormat);

        DataLine.Info dataLineInfo = new  
  DataLine.Info(SourceDataLine.class,audioFormat);

        sourceDataLine =(SourceDataLine)AudioSystem.getLine(dataLineInfo);

        byte tempBuffer[]=new byte[100000];
        int cnt;
        sourceDataLine.open(audioFormat);
        sourceDataLine.start();
        while((cnt=audioInputStream.read
                     (tempBuffer,0,tempBuffer.length))!=-1){
            if(cnt>0){
                sourceDataLine.write(tempBuffer,0,cnt);
            }

        }

    }
    catch (Exception e)
    {
        e.printStackTrace();
        System.exit(0);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:03:19.660

You need to play the audio in a separate thread. The program becomes unresponsive because it is playing your audio on the [event dispatch thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html) instead of drawing the UI and responding to user interaction.

instead of:

```
sound.playAudio(pokemonBattle); 
```

do:

```
Thread t = new Thread( new SoundPlayer( sound, pokemonBattle );
t.start(); 
```

and also:

```
public class SoundPlayer implements Runnable
{
    private final sound sound;
    private final File soundFile;

    public SoundPlayer( sound sound, File soundFile )
    {
        this.sound = sound;
        this.soundFile = soundFile;
    }

    public void run()
    {
       sound.playAudio( soundFile );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:09:34.113

约瑟夫是对的。但在这种情况下，问题是

```
 while((cnt=audioInputStream.read
                     (tempBuffer,0,tempBuffer.length))!=-1){
            if(cnt>0){
                sourceDataLine.write(tempBuffer,0,cnt);
            }

        } 
```

您的 while 循环将无限运行，从而冻结您的应用程序。由于您正在一次读取和写入整个缓冲区，因此不需要 while 循环。在循环之外执行此操作，您会没事的。

# java - 我可以使用 Google App Engine 来托管 Java IRC Bot 吗？

> ID：11405612
> 
> 赞同：2
> 
> 时间：2012-07-10T01:54:26.750
> 
> 标签：java, google-app-engine, irc

我有一个完全用 Java 编写的 IRC 机器人，它一直托管在我的家用计算机上，但我不稳定的互联网连接已经断开了很多。我一直想知道是否可以使用 Google Apps Engine 来托管具有持续连接的机器人？如果是这样，我将不得不做出什么样的改变？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T02:01:25.523

不，你不能那样做。Google App Engine 不允许任意传出`Socket`连接（可能是因为他们不希望人们使用他们的平台作为代理服务器）。他们提供的最接近的东西是用于通过网络/Internet 访问外部内容的[URL Fetch API](https://developers.google.com/appengine/docs/java/urlfetch/)。

使用它，您可能会想出一些东西来使用 App Engine 应用程序驱动现有的基于 Web 的 IRC 客户端。虽然我不确定与直接使用基于 Web 的 IRC 客户端相比有什么好处。

此外，您不能与 App Engine 应用程序建立“持续连接”（或来自）。平台将在大约 30 秒左右的时间内自动超时/关闭任何未完成处理的请求。

# jsf - Primefaces p:inplace：如何更优雅地传播 EL 表达式以使实体合并

> ID：11405613
> 
> 赞同：1
> 
> 时间：2012-07-10T01:54:30.557
> 
> 标签：jsf, jsf-2, primefaces, inplace-editing

我想分享以下强大的“hack”，用于获取使用 p:inplace 编辑其值的实体。

我的问题是关于如何使用 p:inplace 或其他的其他现有属性更优雅地实现这一点。

该技巧改编自 BalusC 在 Stackoverflow 上的建议：

[JSF（和 PrimeFaces）如何将参数传递给 ManagedBean 中的方法](https://stackoverflow.com/questions/9805276/jsf-and-primefaces-how-to-pass-parameter-to-a-method-in-managedbean)

那里的问题涉及获取已编辑 ap:inplace #{emp.firstName} 的 Employee 对象：

```
<h:outputText value="First name:"/>
<p:inplace id="firstname" editor="true">
 <p:ajax event="save" onsuccess="#{employeeController.saveName()}"/>
 <p:inputText id="firstName" value="#{emp.firstName}"  
              required="true" label="text"
              valueChangeListener="#{employeeController.firstNameChanged}">
 <p:ajax event="valueChange" listener="#{employeeController.onValueChangedStart}"/>
 </p:inputText>
</p:inplace> 
```

BalusC 的建议是：

> 假设您确实在一个重复组件中，其中 #{emp} 被其 var 属性公开，您可以从值更改侦听器内的 EL 范围中获取它，如下所示：

```
FacesContext context = FacesContext.getCurrentInstance();
Employee employee = context.getApplication().evaluateExpressionGet(context, "#{emp}", Employee.class);
Long id = employee.getId(); 
```

这样做的问题是 EL 表达式（在本例中为 #{emp}）是硬编码的，因此不可重用。

我现在正在使用 p:inplace 的 id 成功地传播一个字符串，该字符串可以被解析为侦听器中实体的 EL 表达式，但是因为不能使用点 '。在 id 字符串中，我必须翻译每个“。” 作为一个 hiphen '-' 然后将其转换为侦听器中的有效 EL 表达式。通过这种方式，我可以传播非常复杂的 EL 表达式，然后我知道要合并到数据库的实体（或任何需要的持久性操作）。

```
public static String policy_convert_id_to_el_expression(String $id) {
    if ($id == null) {
        throw new IllegalArgumentException("null String $id");
    }
    return $id.replaceAll("-", ".");
} 
```

我有一系列深值实体，它们包装特定的浅值，例如 BooleanValue、FloatQuantity 等，每个都有一个特定类型的 getValue() 方法和一个通用的瞬态 getObject() 方法，并携带有关包装的浅值的其他持久元数据（如单位、作者等）。

我有一个 ValueManager 支持 bean：

```
public void onInplaceSaveEvent(AjaxBehaviorEvent ae) {
    UIComponent component = ae.getComponent();
    String id = component.getId();
    String $el = policy_convert_id_to_el_expression(id);
    FacesContext context = FacesContext.getCurrentInstance();
    Value v = context.getApplication().evaluateExpressionGet(context, "#{" + $el + "}", Value.class);
..
// merge Value entity to database (catches change to shallow wrapped value) 
// and/or perform other persistence operations such as metadata updates
.. 
```

}

现在这是一种高度可重用的策略。

例如，我有一个带有 List getFloors() 的实体 OfficeBuilding，每个 BuildingFloor 都有一个深 FloatQuantity getArea() 实体，其中 FloatQuantity 扩展了 Value。

在 dataTable 中，我使用 var=floor over value=#{officeBuilding.floors} 进行迭代，并就地编辑该区域的浅层 .value ，因此：

```
<p:inplace 
 id="floor-area" 
 editor="true" 
 emptyLabel="UNDEF"
>
 <p:ajax 
  event="save" 
  update="@form" 
  listener="#{valueManager.onInplaceSaveEvent}"
  process="@this floor-area-value"
 />
 <p:inputText 
  id="floor-area-value" 
  value="#{floor.area.value}" 
 />
</p:inplace> 
```

这可以封装为高度可重用和方便的复合组件资源/util/inplaceValue.xhtml，因此：

```
<cc:interface>
  <cc:attribute name="value" type="com.example.entity.value.Value" required="true"/>
  <cc:attribute name="elid" required="true"/>
</cc:interface>

<cc:implementation>
    <p:inplace 
        id="#{cc.attrs.elid}" 
        editor="true" 
        emptyLabel="UNDEF"
        >
        <p:ajax 
            event="save" 
            update="@form" 
            listener="#{valueManager.onInplaceSaveEvent}"
            process="@this #{cc.attrs.elid}-value"
            />
        <p:inputText 
            id="#{cc.attrs.elid}-value" 
            value="#{cc.attrs.value.value}"                
            />
   </p:inplace>
</cc:implementation> 
```

使用上面的例子，这被称为：

```
<util:inplaceValue elid="floor-area" value=#{floor.area}/> 
```

只需要记住在指定所有出现的“。”的 elid 属性时要小心。在 EL 表达式中被翻译为 hiphen “-”，但它对于各种复杂情况的作用就像一个魅力，它节省了大量的编码。它非常优雅，但它仍然是一个 hack。

问：如何更好地将访问其值已被编辑的实体所需的 EL 表达式传播给侦听器？

我还专门为此目的为 p:inplace 的新属性[提出了 Primefaces 功能建议。](http://code.google.com/p/primefaces/issues/detail?id=4331&thanks=4331&ts=1341884219)

# mysql - 如何在 Grails 中加密我的表列？

> ID：11405616
> 
> 赞同：2
> 
> 时间：2012-07-10T01:55:03.773
> 
> 标签：mysql, grails

我一直在这样做来加密我在 mysql 表中的列：

```
INSERT INTO credit_card_info (card_id, card_num) VALUES (UUID() , AES_ENCRYPT(${params.card_num_enc},'*************')) 
```

而对于解密，我只是使用了`AES_DECRYPT`方法。现在我转向使用 GORM。

我想用 GORM 达到同样的效果。这可能吗，在域类中我可以指定加密技术吗？那么我该如何解密它们呢？`UUID`可以在 GORM中使用函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:45:15.373

[spring-security-core 插件](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)执行类似的任务，用于在保存之前加密用户密码。

[GORM 域对象具有](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)可以在插入之前、加载之后等触发的事件，这将允许您加密/解密数据。

# ruby-on-rails - 我可以在不重新编译 slug 的情况下更新 Heroku 上的单个源文件吗？

> ID：11405619
> 
> 赞同：14
> 
> 时间：2012-07-10T01:55:20.437
> 
> 标签：ruby-on-rails, git, heroku

我正在开发一个托管在 Heroku 上的 Rails 项目。我想知道是否可以在不重新启动应用程序的情况下更新一个文件。

为什么。我有一个错误，但我无法追踪它。它在我的本地系统上完美运行，但它似乎在 heroku 处理的中途停止。

由于没有断点，我在代码中分散状态更新。（稍后将被删除）但是向 Rails 应用程序添加一行代码就像是一个五分钟的过程。

1.  更改文件
2.  暂存文件到 git
3.  提交文件
4.  push git（以上都挺快的）
5.  等待 heroku 拉下应用程序，执行看起来像 gem 安装的操作，或者至少进行 gem 更新。
6.  更改一些文件以反映本地 url
7.  再次启动服务。

有没有办法在不运行所有其他东西的情况下推送 git？也许是要添加到推送中的特殊参数？

* * *

更令人烦恼的是，我的 git 现在有一堆我不想让我的同事看到的签到。我的目标是我自己的非生产 heroku 实例（仅测试），没有理由将所有这些尝试包含在全局源代码控制中。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T07:51:08.643

有一个很好的理由说明为什么这是不可能的。当您推送到 Heroku 时，它们会生成您应用程序的“slug”（[https://devcenter.heroku.com/articles/slug-compiler](https://devcenter.heroku.com/articles/slug-compiler)）。为了提供 Heroku 提供的大规模可扩展性，这个 slug 是只读的，以便它可以在多个可能分布在许多不同物理机器上的 dyno 上旋转。这些 dyno 中的每一个都运行您的应用程序的一个单独实例，而路由网格确保对您的应用程序的请求转到正确的 dyno。

现在考虑如果这些实例中的任何一个是可写的会发生什么，如果您正在运行 5 个 dyno，那么您的应用程序将在 5 个单独的实例上运行 - 如果一个文件被写入，那么它是如何分布在您正在运行的 dyno 上的？是的，Heroku 可以考虑使用某种共享文件系统来运行应用程序，但这很复杂。通过使文件系统只读（[https://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)）这个问题得到缓解。

如果您已经构建了一个应用程序并部署到 Heroku，但忘记使用 S3 类型的永久存储，您的应用程序将允许您将文件上传到它（通过 Ruby 世界中的 Paperclip 之类的），但该上传的资产将仅存在于 dyno 上收到它，然后在部署新代码或重新启动应用程序时丢失，因为测功机从 slug 接收到最新代码。

如果您正在针对 Heroku 进行调试，请不要忘记您已经获得了常用的 git 库，`git commit --amend`. 或者在一个分支中工作并将其直接部署到 Heroku ( `git push heroku <yourbranchname>:master`) 然后当你隔离问题 rebase ( [http://git-scm.com/book/en/Git-Branching-Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing) ) 你的分支到 master 压缩任何提交你不再需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T08:27:18.867

### XY 问题

这是一个经典的[XY 问题](http://mywiki.wooledge.org/XyProblem)。X 是您的非工作代码；Y 是您对不存在的 Git 错误功能的搜索。

### Git 是如何工作的

Git 提交基本上在树级别工作，而不是文件级别。作为一个严重的过度简化，提交指向一棵树，它指向一组文件。当你推送一个提交时，你必须推送与该提交相关的所有对象，除非这些对象已经存在于接收器上。

### Heroku 的工作原理

Heroku将 Git 存储库中[的应用程序编译](https://devcenter.heroku.com/articles/slug-compiler#compilation)为 slug。虽然您可以在编译期间[忽略某些文件](https://devcenter.heroku.com/articles/slug-compiler#ignoring_files_with_)，但您无法避免编译 slug。这就是平台的工作方式。

如果你有一个合理的蛞蝓大小，这不是问题；我的 Heroku 应用程序只需几秒钟即可编译。如果您的 slug 非常大，因此需要很长时间来编译（您声称这需要 5 分钟以上），那么如果您尝试解决“不编译”的问题，那么您手上还有另一个 XY 问题。

### 在 Heroku 上调试

Heroku 有很多特性和附加组件来帮助调试。这是一个简短的列表，可以帮助您入门。

*   [交互式控制台会话](https://devcenter.heroku.com/articles/console#interactive_console_sessions)
*   [日志记录](https://devcenter.heroku.com/articles/logging)
*   [卓越的附加组件](https://addons.heroku.com/exceptional)

### 也可以看看

*   [https://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)
*   [https://devcenter.heroku.com/articles/dynos#ephemeral_filesystem](https://devcenter.heroku.com/articles/dynos#ephemeral_filesystem)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T04:10:53.370

这是不可能的。heroku 的设置方式，每次推送更改时服务器都会重新启动。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-10T01:58:40.710

是的你可以。

首先，列出自上次提交以来已修改的所有文件。

`git status`

添加要单独提交的文件。

`git add location/file_name.rb` `git add location/file_name2.rb` ...

提交您添加到推送的文件。

`git commit -m "committing files one at a time or two at a time"`

现在推

`git push heroku`

# javascript - Function.prototype.propertyname === Object.propertyname 是真的吗？

> ID：11405635
> 
> 赞同：3
> 
> 时间：2012-07-10T01:57:54.360
> 
> 标签：javascript

为了更好地理解 javascript 背后的原型，我偶然发现了以下内容，到目前为止我还无法理解。

我知道函数是第一类对象，但我不明白为什么 Object 在 Function.prototype 上设置属性后会获取此属性

```
Function.prototype.foo = 'bar';

Object.foo // Object now has this property and returns 'bar'

Object.foo === Function.prototype.foo // returns true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:05:09.253

`Object`是函数，`typeof Object == 'function'`是真的。因此，您分配 的属性`Function.prototype`，它也会让`Object`具有该属性。（在财产链中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:00:56.060

如果我没记错的话 Function.prototype 是所有继承对象的原型。因为你设置`Function.prototype.foo = 'bar';`的所有对象都继承了这个`foo`属性。这就是第三行代码返回 true 的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:21:47.103

这是因为`Object`和`Function`对象共享相同的内部`[[Prototype]]`属性。

正如 Ecma-262 所说：

> Function原型对象的内部[[Prototype]]属性的值就是Object原型对象。

因此，如果您向`Function`的原型添加任何属性，该属性也可以通过`Object`对象访问，反之亦然。

如果你想深入了解它，我建议你看一下**[Ecma-262 Specification](http://www.ecma-international.org/publications/standards/Ecma-262.htm)**。

希望能帮助到你。

# ios - Obj-C - 如何使用单例在视图控制器之间传递数据？

> ID：11405636
> 
> 赞同：-10
> 
> 时间：2012-07-10T01:57:56.967
> 
> 标签：ios, xcode

好的，所以这是对我昨晚提出的问题的扩展。我对如何使用各种技术在视图控制器之间传递数据有了更深入的了解。我想走 MVC 路线，创建一个 Singleton 类似乎是与 MVC 最接近的概念。

基本上我创建了一个带有两个视图控制器和一个单例类的简单应用程序。我正在尝试将文本字段的值传递给 UILabel。无论出于何种原因，它都不起作用。这就是我的代码的样子。

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "Model.h"
#import "ViewController2.h"

@interface ViewController : UIViewController {

NSString *text2pass;
}

@property (weak, nonatomic) IBOutlet UITextField *tf;
@property (weak, nonatomic) IBOutlet UILabel *btn;
- (IBAction)go:(id)sender;
@end 
```

**视图控制器.m**

```
 #import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tf = _tf;
@synthesize btn = _btn;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

NSString *tfstring = _tf.text;
NSLog(@"string = %@",tfstring);
}

 - (void)viewDidUnload
{
[self setTf:nil];
[self setBtn:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (IBAction)go:(id)sender {
NSLog(@"btn pressed");

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewController2 *vc2 = (ViewController2 *) [storyboard instantiateViewControllerWithIdentifier:@"home"];

text2pass = _tf.text;

[self passValues];

[self presentModalViewController:vc2 animated:YES];
}

-(void) passValues {
Model *model = [Model sharedModel];
model.passedText = text2pass;
}
@end 
```

**ViewController2.h**

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface ViewController2 : UIViewController {

NSString *passedText;
}

@property (nonatomic)NSString *passedValue;

@property (weak, nonatomic) IBOutlet UILabel *lbl;

- (IBAction)back:(id)sender;

@end 
```

**视图控制器2.m**

```
#import "ViewController2.h"

@interface ViewController2 () {
NSString *passedtext;
}
@end
@implementation ViewController2
@synthesize lbl = _lbl;
@synthesize passedValue = _passedValue;
 - (void)viewDidLoad
{

 // do code stuff here
NSLog(@"passedText = %@",passedText);
_lbl.text = passedText;

[super viewDidLoad];
}
- (void)viewDidUnload
{
[self setLbl:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
}
- (IBAction)back:(id)sender {

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewController *vc = (ViewController *) [storyboard instantiateViewControllerWithIdentifier:@"welcome"];
[self presentModalViewController:vc animated:YES];
}
@end 
```

**模型.h**

```
#import <Foundation/Foundation.h>

@interface Model : NSObject {

NSString *passedText;
}

@property (nonatomic, strong) NSString* passedText;

+ (Model *) sharedModel;

@end 
```

**模型.m**

```
#import "Model.h"

@implementation Model

@synthesize passedText = _passedText;

static Model *sharedModel = nil;

+ (Model *) sharedModel {
@synchronized(self){
    if (sharedModel == nil){
        sharedModel = [[self alloc] init];
    }
}
return sharedModel;
}

@end 
```

该项目可以从这里完整下载[http://chrisrjones.com/files/KegCop-Test.zip](http://chrisrjones.com/files/KegCop-Test.zip)

如果您知道为什么 UILabel 不显示文本字段文本，请告诉我。哦，我非常关注这个 -> [http://www.youtube.com/watch?v=ZFGgMPcwYjg&feature=plcp](http://www.youtube.com/watch?v=ZFGgMPcwYjg&feature=plcp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T02:58:12.970

您的寻址和内存管理很简单......关闭。首先，绝对没有理由为此创建一个单例，但这不是重点。

其次，在声明属性时， (atomic, assign) 如果没有另外指定，则默认为，这意味着您的字符串：

```
@property (nonatomic)NSString *passedValue; 
```

是弱酱，已经成熟，可以立即释放和销毁。声明它`copy`、`strong`或`retain`。

第三，在推送视图控制器中绝对没有引用您的单例，但您似乎相信在不同类中命名相同的对象保留其价值（尤其是在#import'ed 时）。不是这样。您需要引用您的单例并将值拉`[Model sharedModel].passedText`入该文本字段。

实际上，我将您的示例固定在两行中：

```
//ViewController2.m
#import "ViewController2.h"

//actually import the singleton for access later
#import "Model.h"

@interface ViewController2 () {
    NSString *passedtext;
}
@end
@implementation ViewController2
@synthesize lbl = _lbl;
@synthesize passedValue = _passedValue;
- (void)viewDidLoad
{

 // do code stuff here
    NSLog(@"passedText = %@",passedText);
    //actually reference the singleton this time
    _lbl.text = [Model sharedModel].passedText;

    [super viewDidLoad];
}
- (void)viewDidUnload
{
    [self setLbl:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
- (IBAction)back:(id)sender {

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    ViewController *vc = (ViewController *) [storyboard instantiateViewControllerWithIdentifier:@"welcome"];
    [self presentModalViewController:vc animated:YES];
}
@end 
```

这产生了这个：

![修复了代码](../Images/d6348a51c3b79e673c8b26e35c858690.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:04:11.247

我不建议使用 Singleton 作为在应用程序中传递数据的好方法。大多数应用程序都很简单，不需要这种集中访问，而且它通常会造成维护噩梦......但我认为您使用单例的事实对于让您的代码正常工作实际上并不重要。

假设您可以访问 ViewController1 中的数据，在您的情况下是通过 Model 的 Singleton 实例（需要一个更具描述性的名称），那么您所要做的就是在创建和呈现数据时将数据传递给 ViewController2，这完全消除了对 Singleton 的需要。

一旦你创建了控制器，设置你需要的数据，然后呈现视图控制器——这基本上就是你正在做的事情。

至于为什么它不起作用：视图控制器是否被呈现，只是没有正确的数据？或者实际上是否存在呈现控制器的问题？我会在`go:`ViewController1 的操作中设置一个断点，确保您期望的数据在文本字段中，正确填充模型并且该值被正确地从 ViewController2 中的模型中提取出来。

除非您删除了一些代码，否则看起来您在 ViewController1 中正确填充了 Model 属性，但在 ViewController2 中您引用的是本地 ivar `passedText`，而不是从模型中提取它。

在单独的说明中，从呈现的模态视图控制器*返回*的方法通常是关闭该控制器，而不是重新创建初始控制器并将其呈现在顶部。

# android - Android 开发新手。DL做什么？

> ID：11405637
> 
> 赞同：-2
> 
> 时间：2012-07-10T01:57:58.823
> 
> 标签：android, development-environment

我一直在搜索并找到很多关于 Eclipse 的文章。我看到一篇文章表明我想要 Eclipse 用于 RPC。我看到另一个表明我应该 DL Eclipse for Java EEE。但有人说它是针对 Android 2.0 的，而另一位则没有说任何一种方式。

所以我不知道该走哪条路。

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:01:51.973

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# web-services - 为什么我应该使用轴 2 来进行符合 jax-ws 2 的 Web 服务开发

> ID：11405639
> 
> 赞同：0
> 
> 时间：2012-07-10T01:58:39.143
> 
> 标签：web-services, websphere, jax-ws, axis2

基于此链接[http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html](http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html) 我假设轴 2 为符合 JAX-WS 2 的 Web 服务开发提供完全支持。我的问题是为什么我应该使用 Axis-2 作为 Web 服务运行时，而不是使用我的应用服务器（如 websphere）对 JAX-WS Web 服务开发的内置支持。

使用 AXIS 2 之类的运行时是否有任何特殊原因。我的假设是它们是作为可嵌入的 Web 服务运行时实现提供的，可以与不提供开箱即用的 Web 服务支持的 tomcat/resin 等一起使用。并且它们不需要与 websphere 或 weblogic 等应用程序服务器一起使用，它们已经为开箱即用的完全 jax-ws 2 兼容的 Web 服务开发提供了支持。

请确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:46:55.493

我绝对建议尽可能使用 WebSphere 或任何其他服务器提供的开箱即用的功能。你会知道它已经过测试和支持。

真正了解 Axis2 的人可能有理由更喜欢它的第 3 方版本（WebSphere 的 JAX-WS 支持实际上是基于 Axis2），但我不能这么说。

# ajax - Youtube API 响应数据

> ID：11405641
> 
> 赞同：0
> 
> 时间：2012-07-10T01:58:41.793
> 
> 标签：ajax, json, api, parsing, youtube

Youtube 的 API 文档在我看来完全是垃圾，我花了几个小时阅读它，似乎无法弄清楚如何显示视频的简单缩略图，即使只是通过测试复制和粘贴他们给出的代码在几个例子中。有人可以解释或指出如何从视频搜索查询中检索数据的至少一半体面的教程的方向吗？顺便使用 JSON

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:05:24.293

过去我忽略了 youtube api，只是使用带有 node 的 imagemagick 制作了我自己的缩略图，但听起来不像你在使用 node。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T10:27:02.610

如果将 JSON 响应粘贴到此[JSON 到 CSV](https://json-csv.com)转换器中，则可以在电子表格中打开 CSV 文件。在电子表格中，您将拥有许多工具来帮助您解析数据。

# ios - 如何转换到视图控制器

> ID：11405648
> 
> 赞同：0
> 
> 时间：2012-07-10T01:59:19.507
> 
> 标签：ios

我在情节提要中制作了一个视图控制器 A 并与其他视图控制器链接。现在我有另一个视图控制器 B，我想编写一个可以从 B 转移到 A 的方法。我该怎么做？情节提要中的控制器 A 有一个转场。控制器 B 是从我以编程方式创建的另一个视图加载的，因此我无法在情节提要中设置 segue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:04:35.900

由于您使用的是故事板。这更准确，试试这个：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"YOUR VIEW CONTROLLER"];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:vc animated:YES completion:NULL]; 
```

但请务必命名您的视图，`identifier`否则它将崩溃并且无法正常工作。

然后当你想关闭视图时：

```
[self dismissModalViewControllerAnimated:YES]; 
```

# java - 套接字连接不适用于无 IP 地址

> ID：11405650
> 
> 赞同：0
> 
> 时间：2012-07-10T01:59:24.947
> 
> 标签：java, sockets, connection

我的套接字连接有问题。当我用“localhost”替换我的无 IP 地址时，它工作正常，但是一旦我输入我的无 IP 地址，它就无法连接。我已经从我的路由器转发了端口（端口 12345 TCP 和 UDP 转发到我的本地 IP 地址 192.168.1.116）。我不明白为什么它可以与“localhost”一起使用，但不能与“myaddress.no-ip.org”一起使用。据我了解，您所要做的就是将路由器上的端口转发到您的本地 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:23:11.327

You can't forward your internal IP address. A 192.168.x.x address is only usable on your internal network. You need to forward you external address. [http://whatismyipaddress.com/](http://whatismyipaddress.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:35:15.247

好的，这是问题的最可能解决方案。我从时代华纳 (RoadRunner) 购买的调制解调器有一个内置调制解调器。我必须让他们桥接连接，以便它通过路由器。我的路由器正在寻找可以通过端口 12345 进入的内容，以便将其定向到我的计算机。问题是TWCs路由器没有将它转发到我的路由器。桥接连接后，它应该只是通过调制解调器到我的路由器。

# zend-framework - zend 框架两步视图

> ID：11405653
> 
> 赞同：3
> 
> 时间：2012-07-10T01:59:38.690
> 
> 标签：zend-framework

我是 zendframework 的新手。我正在尝试实现两步视图布局：

Bootstrap.php(查看/Bootstrap.php)

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

     public function _initRoutes()
    {
        $options = array(
    'layout'     => 'layout',
    'layoutPath' => '/layout/layout.phtml',);
$layout = Zend_Layout::startMvc($options);
    }
}?> 
```

layout.phtml（应用程序/视图/脚本/布局/layout.phtml）

```
<?php
        include "header.php";

?>
// view contents goes here.
<?php

       $this->layout()->content;

?>
// footer goes here.
<?php
        include "footer.phtml";
?> 
```

我是一个绝对的初学者，一步一步的解释更受欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T04:12:57.207

启用布局的最简单方法是从命令行运行 Zend_Tool 命令`zf enable layout`，这会将行添加
`resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"`
到您的*application.ini*并为布局和默认文件构建目录`layout.phtml`。

或者，您可以在*application.ini*文件中使用 2 行指定布局路径和默认布局名称：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts" //path to layout
resources.layout.layout = master //name of layout without extension 
```

可以在您的 application.ini 中设置其他布局/视图选项以在您的视图中调用：

```
;View Settings
;*************
resources.view[]=
resources.view.charset = "UTF-8"
resources.view.encoding = "UTF-8"
resources.view.doctype = "HTML5"
resources.view.language = "en"
resources.view.contentType = "text/html; charset=UTF-8" 
```

然后在您的*bootstrap.php*中，您可以调用这些资源来初始化您的视图：

```
 /**
     * initialize the registry and asign application.ini to config namespace
     */
    protected function _initRegistry() {

        //make application.ini configuration available in registry
        $config = new Zend_Config($this->getOptions());
        Zend_Registry::set('config', $config);
    }

    /**
     * initialize the view and return it
     * @return \Zend_View
     */
protected function _initView() {
        //Initialize view
        $view = new Zend_View();
        //add custom view helper path
        $view->addHelperPath('/../library/Application/View/Helper');
        //set doctype for default layout
        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);
        //set default title
        $view->headTitle('Our Home');
        //set head meta data
        $view->headMeta()->appendHttpEquiv('Content-Type', Zend_Registry::get(
                        'config')->resources->view->contentType);
        //set css includes
        $view->headLink()->setStylesheet('/css/normalize.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/liquid.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/typography.css');
        $view->headLink()->appendStylesheet(
                '/javascript/mediaelement/build/mediaelementplayer.css');
        $view->headLink()->appendStylesheet('/css/main.css');
        $view->headLink()->appendStylesheet('/css/nav.css');
        $view->headLink()->appendStylesheet('/css/table.css');
        //add javascript files
        $view->headScript()->setFile('/javascript/mediaelement/build/jquery.js');

        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                        'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

我还包括了一个方便的方法 _initRegistry() 以使用最少的代码使配置选项随处可用。

ZF 中的布局是一个简单的 html 页面，其中为动态或配置选项添加了占位符：

```
<?php
echo $this->doctype() . "\n"; //placeholder assigned in bootstrap $view->doctype
?>
<html>
    <head>
        <title></title>
        <?php echo $this->headMeta() . "\n" //placeholder assigned in bootstrap ?>
        <?php echo $this->headLink() . "\n" //placeholder assigned in bootstrap ?>
        <?php echo $this->headscript(). "\n" //placeholder assigned in bootstrap?>
    </head>
    <body>
        <section class="container">
            <header class="block">
                <hgroup id="header" class ="column span-24">
                    <h1>Our Page</h1>
                </hgroup>
                <nav>
                    <div id="nav" class="column span-24">
                        <?php echo $this->layout()->nav //custom placeholder ?>
                    </div>
                </nav>
            </header>
            <section class="block">
                <div id="main" class="column span-18 border">
                    <div id="flash">
                        <?php
                        //flash messenger display location
                        if (count($this->messages) > 0) {
                            printf("<h3 id='flash'>%s</h3>", $this->messages[0]);
                        }
                        ?>
                    </div>
                    <?php echo $this->layout()->content; //placeholder for redering views ?>
                </div>
                <aside id="sidebar" class="column span-4 last">
                    <?php echo $this->layout()->search //custom placeholder ?>
                    <div id="subNav">
                        <?php echo $this->layout()->subNav //custom placeholder ?>
                    </div>
                    <div id="adminMenu">
                        <?php echo $this->layout()->adminMenu //custom placeholder ?>
                    </div>
                </aside>
            </section>
            <footer class="block">
                <div id="footer" class="column span-24">
                    <p>Created by <em>Your Name</em> with <a href="http://framework.zend.com/">Zend Framework. &COPY; </a></p>
                </div>
            </footer>
        </section>
    </body>
</html>
<?php echo $this->inlineScript() ?> //javascript includes at bottom of page 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:15:55.733

首先，您正在以一种似乎适合您的路由的方法初始化布局 - 可能是个坏主意。其次，如果您使用[Zend_Application](http://framework.zend.com/manual/en/zend.application.quick-start.html)的完整堆栈，那么您可以使用提供的并从[配置](http://framework.zend.com/manual/en/zend.config.html)[`Zend_Application_Resource_Layout`](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.layout)中设置所有[选项](http://framework.zend.com/manual/en/zend.layout.options.html)。

此外，您不想使用原始语句从布局文件`include`中提取您应该使用的内容。`$this->render('thetemplate.phtml')`查看[`Zend_Layout`快速入门](http://framework.zend.com/manual/en/zend.layout.quickstart.html)了解更多信息。

# ruby - 如此透明以至于我无法捕捉到它...使用 Rghost 模拟 ghostscript 命令，就像在虚拟打印机上一样

> ID：11405655
> 
> 赞同：1
> 
> 时间：2012-07-10T02:00:33.547
> 
> 标签：ruby, ghostscript, shoes, virtual-printer

作为一个红宝石新手，我一直在寻找幽灵，你可能会有所帮助

我读了很多书，并被告知让这些鬼鬼祟祟的家伙最好的方法是使用脚本：ghostscript。

我正在尝试执行在虚拟打印机中运行的 ghostscript 命令，但在 ruby​​（鞋子）文件的上下文中：

我的命令是：

```
C:\Programas\gs\gs9.05\bin\gswin64c.exe -IC:\Programas\gs\gs9.05\lib;C:\Programas\gs\fonts -sDEVICE=pdfwrite -r300 -dNOPAUSE -dSAFER -sPAPERSIZE=a4 -sOutputFile=c:\tempRep\temp.pdf - 
```

如果我只是把这个命令放在一个批处理文件中，并将这个批处理设置为程序来调用虚拟打印机上的端口重定向，那么它就可以了，编写 temp.pdf 文件。这个解决方案的问题实际上是两个：

1.  不是很干
2.  exe文件没有被执行

我的文件create.bat

```
C:\Programas\gs\gs9.05\bin\gswin64c.exe -IC:\Programas\gs\gs9.05\lib;C:\Programas\gs\fonts -sDEVICE=pdfwrite -r300 -dNOPAUSE -dSAFER -sPAPERSIZE=a4 -sOutputFile=c:\tempRep\temp.pdf -

c:\tempRep\myapp.exe 
```

所以，如果它不是 DRY 并且蝙蝠似乎没有帮助，那么在这里寻找鬼魂是没有意义的。我们都知道，要捉鬼，它必须是干燥的！

于是我走向了Rghost：显鬼才是真正的意思。

我称之为的上下文：

![在此处输入图像描述](../Images/f0f6dbf4f061320b1519f4be555b24d3.png)

我的鞋子应用程序来源：

```
Shoes.setup do
   gem 'rghost'
end

require 'RGhost'

RGhost::Config::GS[:path]= 'C:\\Programas\\gs\\gs9.05\\bin\\gswin64c.exe'

doc=Document.new

doc.render :raw => "-sDEVICE=pdfwrite -r300 -dNOPAUSE -dSAFER -sPAPERSIZE=a4 -sOutputFile=c:\tempRep\temp.pdf -" 
```

我开始感到寒冷，但没有幽灵文件出现......

关于如何抓住这个的任何想法？

我也在考虑使用类似的东西

```
system("C:\Programas\gs\gs9.05\bin\gswin64c.exe -IC:\Programas\gs\gs9.05\lib;C:\Programas\gs\fonts -sDEVICE=pdfwrite -r300 -dNOPAUSE -dSAFER -sPAPERSIZE=a4 -sOutputFile=c:\tempRep\temp.pdf -") 
```

但这似乎不起作用：S ...我可能做错了什么？

# html - 从 XHTML1 Trans 更改为 HTML5 doctype 后 line-height 不起作用

> ID：11405656
> 
> 赞同：1
> 
> 时间：2012-07-10T02:00:35.963
> 
> 标签：html, xhtml, css

我一直在做的一个网站最初是使用 XHTML 1.0 Transitional 创建的——但是，由于我不喜欢它，我切换到了 HTML5 文档类型。

当我刷新页面时，由于某种原因，页面上的文本发生了微妙的变化。

当行高低于某个像素（通常是字体大小）时，行高停止工作。这会破坏我为登录用户设置的菜单的视觉对齐方式。例如，如果字体大小设置为 14 像素，则显示的内容与您知道 1px 应具有重叠文本且任何字体大小超过 1px 时`line-height:14px;`完全相同。`line-height:1px;`

您可以在 [removed, out of date] -> Test login is: TestPile/test 查看演示。菜单显示您登录的位置（登录后）。

关于如何让 line-height 做出正常反应的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:07:37.430

HTML5 doctype，作为更现代的 doctype，在浏览器中产生标准模式。XHTML 1.0 过渡文档类型会导致有限的怪癖模式。您使用 HTML5 doctype 获得的行为是正确的，所以您真的在问“我如何让 line-height 表现得像它**不应该的那样**？”。那会很困难。

以下是有限怪癖（又名几乎标准）和标准模式之间行高计算差异的描述：http: [//msdn.microsoft.com/en-us/library/ff405794%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ff405794%28v=vs.85%29)

您将需要接受标准模式行为并相应地调整布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T17:38:33.780

我有一个类似的问题。在 quirks 模式`<span>`（和其他内联元素）中，行高可以比它们的父元素更小。在 HTML5 模式下，它的工作方式不同。我切换到`<div>`那里，它将像以前一样处理行高。或者您将内联元素更改为使用`display:inline-block`.

# regex - 正则表达式 - 如何搜索单词的单数或复数版本

> ID：11405660
> 
> 赞同：6
> 
> 时间：2012-07-10T02:00:53.843
> 
> 标签：regex, sublimetext

我正在尝试做一个简单的正则表达式，我想做的就是匹配单词的单数部分，无论它是否有一个 s 结尾。所以如果我有以下的话

```
test
tests 
```

编辑：进一步的例子，我需要这对于许多单词来说都是可能的，而不仅仅是这两个

```
movie
movies
page
pages
time
times 
```

对于他们所有人，我需要得到最后没有 s 的单词，但我找不到一个正则表达式，它总是会在没有 s 的情况下抓住第一位并且适用于这两种情况。

我尝试了以下方法：

```
([a-zA-Z]+)([s\b]{0,}) - This returns the full word as the first match in both cases
([a-zA-Z]+?)([s\b]{0,}) - This returns 3 different matching groups for both words
([a-zA-Z]+)([s]?) - This returns the full word as the first match in both cases
([a-zA-Z]+)(s\b) - This works for tests but doesn't match test at all
([a-zA-Z]+)(s\b)? - This returns the full word as the first match in both cases 
```

我一直在使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)来尝试不同的正则表达式。

编辑：这是一个崇高的文本片段，对于那些不知道崇高文本中的片段的人来说，这是一个快捷方式，这样我就可以输入我的数据库的名称并点击“运行片段”，它会将它变成一些东西喜欢：

```
$movies= $this->ci->db->get_where("movies", "");
if ($movies->num_rows()) {
    foreach ($movies->result() AS $movie) {

    }
} 
```

我需要的只是将“电影”变成“电影”并自动将其插入到 foreach 循环中。

这意味着我不能只对文本进行查找和替换，我只需要考虑 60 - 70 个单词（它只针对我自己的表格，而不是英语中的每个单词）。

谢谢！- 蒂姆

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T02:50:51.193

Ok I've found a solution:

```
([a-zA-Z]+?)(s\b|\b) 
```

Works as desired, then you can simply use the first match as the unpluralized version of the word.

Thanks @Jahroy for helping me find it. I added this as answer for future surfers who just want a solution but please check out Jahroy's comment for more in depth information.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T02:18:11.693

对于简单的复数，使用这个：

```
test(?=s| |$) 
```

对于更复杂的复数，您在使用正则表达式时遇到了麻烦。例如，这个正则表达式

```
part(y|i)(?=es | ) 
```

将返回“party”或“parti”，但我不确定你会做什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T02:12:56.967

以下是使用 vi 或 sed 的方法：

```
s/\([A-Za-z]\)[sS]$/\1 
```

这会将一堆以 S 结尾的字母替换为除最后一个字母之外的所有字母。

笔记：

> 转义字符（括号前的反斜杠）在不同的上下文中可能不同。

还：

> （这`\1`意味着*第一个模式*）也可能因上下文而异。

还：

> 仅当您的*单词*是该行中唯一的单词时，这才有效。

如果您的表名是该行中的多个单词之一，您可以将`$`（代表*行尾*）替换为表示空格或单词边界的通配符（这些因上下文而异）。

# c++ - C++ 应用程序中的持久数据/设置

> ID：11405662
> 
> 赞同：1
> 
> 时间：2012-07-10T02:00:56.700
> 
> 标签：c++, settings, application-settings

第一次，我正在编写一个相当复杂的应用程序，它会记住用户的姓名、性别、年龄等。这是我需要做的事情：

*   应用程序启动，并检查信息（姓名、年龄等）是否已保存。
    *   如果没有，应用程序会获取此信息并保存它。

当用户重新启动该程序时，程序应该会看到信息已保存，并将此信息保存为 C++ 变量。

如果您不知道我想要什么，我可以提供更多信息。我以前从来没有这样做过，在网上搜索了很长时间后，我变得更加困惑，所以我怕我需要一些**认真的手，**对不起。

谢谢，

-克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:17:59.430

看起来您是 C++ 新手，所以我建议您将信息保存到文件中。（那是我的课程开始的地方，而不是数据库）

像这样的东西应该可以解决问题：

```
#include <iostream>
#include <fstream>
#include <string>
int main(){
    ifstream input("your_saved_file.txt");
    string name="", age="", etc="";
    input >> name >> age >> etc;
    if(name=="" || age=="" || etc==""){
        input.clear(); input.close();
        ofstream output("your_saved_file.txt");
        cout << "Enter name: ";
        cin >> name;
        cout << "Enter age: ";
        cin >> age;
        cout << "Enter etc: ";
        cin >> etc;
        output << name << endl << age << endl << etc << endl;
        output.close(); output.clear();
    }
    else{
        input.clear(); input.close();
        cout << "Name: " << name << " Age: " << age << " Etc: " << etc;
    }
    return 0;
} 
```

希望这就是你要找的东西

里根

# php - PHP page process separation

> ID：11405669
> 
> 赞同：0
> 
> 时间：2012-07-10T02:02:04.843
> 
> 标签：php, http, caching, process

If some php page is running some long process such as sleep or while loop that makes it take a while till it loads, does it affect on other processes from the same page ?,
I noticed when i try to open the same page with different short process, it also takes so long to load and to be clear it doesn't load before the first one (long process) does,

is it true or something's wrong with my code and how to prevent it ?
i think it has something to do with cache, i don't wanna mess up though before getting a tip or an answer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:14:43.803

PHP 在单个进程中运行，每次访问页面时，它都会启动进程、处理并完成。每个过程都不​​会影响其他过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:35:57.447

> 我注意到当我尝试使用不同的短进程打开同一页面时，[...] 它不会在第一个（长进程）之前加载

最常见的原因：

*   您的脚本“按原样”使用 PHP 会话，它使用文件锁定。文件锁定机制确保一次只有一个脚本可以编辑每个用户的会话数据，但这确实意味着如果来自同一用户的两个请求同时发生，则第二个脚本不会在第一个脚本完成之前启动，如果它们都依赖在会话上（虽然两个不同的用户有不同的会话文件，所以他们不能冲突）
*   浏览器会自动检测到页面花费了很长时间，并在后台故意延迟后续请求——我相信这是谷歌浏览器默认做的事情。

然而，这两种情况都相对安全，因为只有在同一用户尝试同时加载多个页面时才会出现延迟，这并不常见——无论实际页面加载多长时间，不同的用户都不会看到延迟。

更多关于[这个优秀的 SO answer](https://stackoverflow.com/a/1430890/1329367)的主题。

# c++ - C/C++ shared memory, atomic operations, Linux

> ID：11405672
> 
> 赞同：2
> 
> 时间：2012-07-10T02:02:38.400
> 
> 标签：c++, c, linux, atomic, inter-process-communicat

I'm doing inter-process communication using shared memory on a multi-*processor* server. I've simplified the code to the following:

```
struct MyStruct {
  uint64_t x;
};

volatile MyStruct* my_struct;  // initialized elsewhere

void MyFunction(uint64_t y) {
   while (true) {
      uint64_t current_x = my_struct->x;
      if (__sync_bool_compare_and_swap(&my_struct->x, current_x, y)) {
         DoWork(current_x, y);  // do work here depending on current_x and y
         return;
      }
   }
} 
```

My question: is this code correct?

In particular, do I need to add a

`__sync_synchronize()`

before the line

`uint64_t current_x = my_struct->x` or will that be redundant since the atomic CAS on the following line effectively does that anyways? As you can see, what effectively I want is the __sync_lock_test_and_set functionality. However, from [http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html) it looks like that function may not work always as expected.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:15:56.137

```
 while (true) {
      uint64_t current_x = my_struct->x;
      /* CAVEAT: my_struct may point to something different now */
      if (__sync_bool_compare_and_swap(&my_struct->x, current_x, y)) { 
```

如果您不关心它`my_struct`可能指向不同的结构，但具有与`x`原始结构相同的值，那么代码看起来不错。您的代码似乎暗示它没问题，因为您`DoWork`只关心`current_x`and `y`。

# python - Python: Cosine Similarity m * n matrices

> ID：11405673
> 
> 赞同：1
> 
> 时间：2012-07-10T02:02:43.317
> 
> 标签：python, vector, numpy, cosine-similarity

I have two M X N matrices which I construct after extracting data from images. Both the vectors have lengthy first row and after the 3rd row they all become only first column. for example raw vector looks like this

```
1,23,2,5,6,2,2,6,2,
12,4,5,5,
1,2,4,
1,
2,
2
: 
```

Both vectors have a similar pattern where first three rows have lengthy row and then thin out as it progress. Do do cosine similarity I was thinking to use a padding technique to add zeros and make these two vectors N X N. I looked at Python options of cosine similarity but some examples were using a package call numpy. I couldn't figure out how exactly numpy can do this type of padding and carry out a cosine similarity. Any guidance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:23:21.787

如果两个数组具有相同的维度，我会使用 NumPy 将它们展平。NumPy（和 SciPy）是一个强大的科学计算工具，它使矩阵操作更容易。

这是我如何使用 NumPy 和 SciPy 进行操作的示例：

```
import numpy as np
from scipy.spatial import distance

A = np.array([[1,23,2,5,6,2,2,6,2],[12,4,5,5],[1,2,4],[1],[2],[2]], dtype=object )
B = np.array([[1,23,2,5,6,2,2,6,2],[12,4,5,5],[1,2,4],[1],[2],[2]], dtype=object )

Aflat = np.hstack(A)
Bflat = np.hstack(B)

dist = distance.cosine(Aflat, Bflat) 
```

这里的结果是`dist = 1.10e-16`（即0）。

请注意，我在这里使用了 ，`dtype=object`因为这是我知道能够将不同形状存储到 NumPy 中的数组中的唯一方法。这就是为什么后来我使用`hstack()`为了展平数组（而不是使用更常见的`flatten()`功能）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T21:52:05.377

我会将它们制成一个 scipy 稀疏矩阵（[http://docs.scipy.org/doc/scipy/reference/sparse.html](http://docs.scipy.org/doc/scipy/reference/sparse.html)），然后从 scikit learn 模块运行余弦相似度。

```
from scipy import sparse
sparse_matrix= scipy.sparse.csr_matrix(your_np_array)

from sklearn.metrics import pairwise_distances
from scipy.spatial.distance import cosine

distance_matrix= pairwise_distances(sparse_matrix, metric="cosine") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:46:51.223

为什么你不能只在两个锯齿状列表上运行一个嵌套循环（大概），使用欧几里得/向量点积对每一行求和，并将结果用作相似性度量。这假设锯齿状尺寸是相同的。

虽然我不太确定如何从位图图像中获取锯齿状数组（我假设它是 MxN 形式的适当密集矩阵）或者上面的锯齿状数组数组如何表示 MxN 矩阵/图像数据，因此，用零填充数据如何有意义？如果这是一种稀疏矩阵表示，人们会期望使用值注释的行/列信息。

# grails - Adding .jar to Grails Dependencies of a Project

> ID：11405684
> 
> 赞同：4
> 
> 时间：2012-07-10T02:04:09.623
> 
> 标签：grails, sqljdbc

I have this project having MSSQL 2008 R2 as its database server. The connection between the `Services` view of IReport and the database is established and running. The problem here is that the project cannot connect to the database server when running it.

These is the error showned on grails console prior to start-up completion:

> ERROR hbm2ddl.SchemaUpdate - could not complete schema update

I've seen similar case but the way to resolve it is having the driver `sqljdbc4.jar` put inside the `[Project Name]\classpath\Grails Dependencies` (project explorer heirarchy) where the driver is located in the `[Project Name]\lib`. But the do how has gone missing.

I've also tried to manually install the dependency following the commmand below but grails return that the driver is not found.

> grials> install-dependency sqljdbc4

The question is how can I include the driver into the Grails Dependencies?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:31:05.090

假设您正在运行 Grails 2+，[这篇文章](http://www.tonyzampogna.com/2011/12/28/grails-2-0-0-lib-directory-fix/)应该对您有所帮助。在一切真正正确显示之前，我还必须重新启动 Eclipse。

# c# - Resharper API for selected text and remote code generation

> ID：11405690
> 
> 赞同：3
> 
> 时间：2012-07-10T02:04:58.660
> 
> 标签：c#, visual-studio-2010, visual-studio, resharper, resharper-plugins

I'd like to write a Resharper plugin that lets me generate code in another class based on highlighted text, and the API isn't the most transparent. What methods should I look at to get access to selected text, and to code generation outside of the current class?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:59:38.533

当您编写上下文动作或类似的东西时（在此处阅读[http://confluence.jetbrains.net/display/ReSharper/ReSharper+7+Plugin+Development](http://confluence.jetbrains.net/display/ReSharper/ReSharper+7+Plugin+Development)关于动作和上下文动作），您会收到一个 IDataContext 实例。以这种方式从中获取文本控件、文档和选择：

```
var textControl = context.GetData(TextControl.DataContext.DataConstants.TEXT_CONTROL);
var document = textControl.Document;
var solution = projectFile.GetSolution();
TextRange selection = textControl.Selection.OneDocRangeWithCaret(); 
```

使用 document.GetText 获取选择范围的文本。

为了在当前类之外生成代码，您需要找到其他类声明的元素。为此，您需要使用 IDeclarationsCache，请参阅[http://confluence.jetbrains.net/display/ReSharper/4.01+Caches+%28R7%29](http://confluence.jetbrains.net/display/ReSharper/4.01+Caches+%28R7%29)关于它。当您获得声明的元素时，使用 GetDeclarations() 方法接收对所有类声明的访问权（由于部分类可能有多个声明）并将其转换为 IClassLikeDeclaration。使用 AddClassMemberDeclaration 方法添加成员和 RemoveClassMemberDeclaration 删除。添加类成员时，使用元素工厂创建添加的元素（参见[http://confluence.jetbrains.net/display/ReSharper/3.2+Creating+Code+Elements+%28R7%29](http://confluence.jetbrains.net/display/ReSharper/3.2+Creating+Code+Elements+%28R7%29)）。

如果您有其他问题，请随时与我联系。

# entity-framework-4 - Can one use a parameterized constructor with DbSet.Create(Type)?

> ID：11405699
> 
> 赞同：0
> 
> 时间：2012-07-10T02:06:39.730
> 
> 标签：entity-framework-4, entity

I have a base class and a few different subclasses set up to instantiate as change-tracking proxies, and I’d like to use the DbSet.Create(Type) method to create additional proxies to add to my Model.

My application was developed before Code First became available, so before, when I created these objects, I’d use a parameterized constructor to initialize both the object and its base member variables and properties.

Will Entity Framework allow me to create a change-tracking proxy using a constructor containing a parameter list? Would I be able to pass some of these parameters to the base class (proxy) as well? (I’d like to stick with the Object Oriented paradigm if I can because it’ll make the code easier to maintain.) If you can show me how to use parameterized constructors to do this, I’d be grateful.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:05:33.340

EF 不能使用参数化构造函数。您必须始终提供无参数构造函数（但不一定是`public`）。

# android-emulator - emulator stopped working in eclipse

> ID：11405703
> 
> 赞同：0
> 
> 时间：2012-07-10T02:06:54.913
> 
> 标签：android-emulator

```
[2012-07-10 07:11:32 - imageview] Android Launch!
[2012-07-10 07:11:32 - imageview] The connection to adb is down, and a severe error has occured.
[2012-07-10 07:11:32 - imageview] You must restart adb and Eclipse.
[2012-07-10 07:11:32 - imageview] Please ensure that adb is correctly located at 'F:\android\android-sdk_r12-windows\android-sdk_r12-windows\android-sdk-windows\platform-tools\adb.exe' and can be executed. 
```

it was working fine yesterday..but now not working.i have deleted previous one and created new emulators.they are also not working,giving same error as above.please help me out.

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:23:06.337

转到任务管理器-> 进程并结束进程“adb.exe”。关闭你的模拟器和 Eclipse 并重新启动。它会正常工作。

# xamarin.ios - 从 monotouch 到 monodroid - 异步和线程移植

> ID：11405704
> 
> 赞同：0
> 
> 时间：2012-07-10T02:07:15.020
> 
> 标签：xamarin.ios, xamarin.android

我有一个小型 iOS 应用程序（使用 monotouch 编写），我想将它引入 monodroid。该端口导致了一些问题，其中一些问题取决于两个平台执行 UI 并围绕它们创建类的方式。

在iOS应用程序中有这样的代码

```
private void BtnSomething_TouchUpInside (object sender, EventArgs e)
    {
        string f = this.foo;
                    LGPM gpm = new LGPM(Constants.a, Constants.b, f);
        this.auth = new Auth("cheese", gpm);
    (*) this.auth.TokenReceived += (o, e, a, aTS, r) => {
                    // more stuff here
        };

        this.PresentModalViewController(this.auth, true);
    } 
```

auth 类看起来像这样

```
public partial class Auth
{
    public Auth(string m, data d)
    {
       this.d = d;
       this.m = m;
    }

 // create a UIWebView and do things 
```

结果 - auth 创建 web 视图，执行操作并将控制权返回到 (*) 行

对于 monodroid，情况有所不同，因为您不能真正创建这样的类。我想出的最好的就是这个

```
private void BtnSomething_TouchUpInside (object sender, EventArgs e)
    {
        string f = this.foo;
                    LGPM gpm = new LGPM(Constants.a, Constants.b, f);
        this.auth = new Auth("cheese", gpm, context);
    (*) this.auth.TokenReceived += (o, e, a, aTS, r) => {
                    // more stuff here
        };

        this.PresentModalViewController(this.auth, true);
    } 
```

然后在 Auth 类中

```
public class Auth : Application
{
    public Auth(string m, data d, Context c)
    {
       this.d = d;
       this.m = m;
       Intent t = new Intent(this, typeof(webview));
       t.PutExtra("todo", 1);
       c.StartActivity(t);
    }
}

[Activity] 
```

然后是“正常”的 webview 活动。

这似乎有效，但是，一旦 webview 完成，控制就不会返回到 (*) 行。

webview 本身正在执行来自网站的异步数据抓取（称为 AuthToken），一旦完成就会引发一个事件。我不确定这是否取决于两者之间类和活动的编写方式不同，但在 iOS 版本中，事件被触发，在 Android 版本中，它被错过了。

这让我想知道平台处理异步事件的方式是否不同。是否有关于两个平台如何处理异步事件之间差异的教程？

我知道很多问题，但线程和异步事件很重要。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T11:57:18.057

在某些处理事件之后，使用 startActivityForResult 或其他 Android 主义来获取线程。

# c - Case insensitive comparison of constant strings

> ID：11405705
> 
> 赞同：1
> 
> 时间：2012-07-10T02:07:17.613
> 
> 标签：c, string, case-insensitive

I'm trying to use this function to compare two strings, case insensitively.

```
int strcasecmp(const char *x1, const char *x2); 
```

I have the copy piece correct, yet the case sensitive portion is giving me some trouble as const is a constant, thus read only, making these fail:

```
*x1 = (tolower(*x1)); // toupper would suffice as well, I just chose tolower
*x2 = (tolower(*x2)); // likewise here 
```

Both chars must remain `const`, otherwise I think this would work... So my question: is there a way to ignore capitalization while keeping the `char`-strings `const`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:12:10.473

您可以使用临时 char 变量：

```
char c1 = tolower(*x1);
char c2 = tolower(*x2);

if (c1 == c2)
 ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:16:00.447

当然 - 您可以在语句中比较`tolower`right的结果：`if`

```
while (*x1 && *x2 && tolower(*x1) == tolower(*x2)) {
    x1++;
    x2++;
}
return tolower(*x1)-tolower(*x2); 
```

# javascript - jquery ajax async false 不起作用

> ID：11405710
> 
> 赞同：0
> 
> 时间：2012-07-10T02:09:21.870
> 
> 标签：javascript, jquery, ajax, synchronization

我有一个执行大约 8 或 9 个特定步骤的 python 脚本。这些步骤被记录在一个文件中。为了让 Web GUI 显示状态更改或错误消息，我使用了 jquery PeriodicalUpdater 插件下面的脚本。我需要程序同时运行，以便当文件中的值发生变化时，它会被轮询并显示。

请在下面找到我的 jquery 代码。请注意 url "/primary_call/" 大约需要 2 分半钟才能执行。问题是 async :false 不起作用。浏览器等待 2.5 分钟，然后进入下一个级别。我在 Firefox 和 Chrome 中尝试过，它给出了相同的结果。

当我调用另一个浏览器选项卡的 URL 时，它运行良好，但是当我尝试从同一页面调用时，我无法同时运行两个脚本组件。我应该怎么做才能让浏览器启动“/primary_call/”，它在后台运行 Python 脚本，同时前进到称为 PeriodicUpdate 的部分。

```
$(document).ready(function()
$.ajax({
type: 'GET', // Or any other HTTP Verb (Method)
url: '/primary_call/',
async: false,
success: function(r){
    return false;
},
error: function(e){
}
});

$.PeriodicalUpdater({
                url : '/static/12.txt',
                method: 'post',
                maxTimeout: 6000,

           },
            function(data){
                var myHtml = data + ' <br />';
                $('#results').append(myHtml);
        });

    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:13:29.230

设置`async:false`意味着您正在使流程**同步**，因此浏览器将挂起直到完成 - 它无法继续使用您的其他方法。删除该选项将使调用异步（默认情况下它应该是），此时浏览器将在单独的线程中初始化每个 ajax 调用。

简而言之，删除`async:false`.

# unit-testing - Spock 保存测试

> ID：11405713
> 
> 赞同：-1
> 
> 时间：2012-07-10T02:09:42.493
> 
> 标签：unit-testing, grails, spock

我正在尝试测试这种方法

```
 def save() {

        def activityArtifactInstance = new ActivityArtifact(params)
        def activityInstance = Activity.get(params.activity.id)

        def uploadedFile = request.getFile('myFile')
        if (!uploadedFile.empty) {
            def userDir = new File(ConfigurationHolder.config.getProperty("userfiles").toString(), "/files")
            userDir.mkdirs()
            uploadedFile.transferTo(new File(userDir, uploadedFile.originalFilename))
            activityArtifactInstance.fileName = uploadedFile.originalFilename
        }

        if (!activityArtifactInstance.save(flush: true)) {
            render(view: "create", model: [activityArtifactInstance: activityArtifactInstance, activityInstance: activityInstance])
            return
        }

        flash.message = message(code: 'default.created.message', args: [message(code: 'activityArtifact.label', default: 'ActivityArtifact'), activityArtifactInstance.id])
        redirect(controller: "activity", action: "show", id: activityInstance.id, params: [phaseId:activityInstance.phase.id])
    } 
```

这是我的测试代码：-

```
 def 'save action: valid activity artifact'() {

        setup:
        mockDomain(ActivityArtifact)
        mockI18N(ActivityArtifactController)
        controller.params.name = "Activity Artiface"

        when:
        controller.save()

        then:
        redirectArgs.action == "show"
        controller.flash.message != null

    } 
```

我得到这个错误： -

**java.lang.NullPointerException：无法在空对象上获取属性“id”**

我如何调用活动对象的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:19:50.173

您的控制器操作假定将有一个`activity.id`参数，并且您的测试没有设置一个。

# c# - 是否可以将 EventHandler 添加到在 Page_Load 之后在运行时添加的控件中？

> ID：11405715
> 
> 赞同：0
> 
> 时间：2012-07-10T02:10:07.780
> 
> 标签：c#, asp.net

根据下面的代码，它似乎不起作用。我可以在 Page_Load 之后动态地将控件添加到页面，但我无法将 EventHandler 连接到它。

这是我的代码隐藏：

```
public partial class AddingControlsToPanelAtRuntime : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        DrawPage();
    }

    private void DrawPage()
    {
        Label label;

        label = new Label();
        label.ID = "Label1";
        label.Text = "Label 1";
        Panel1.Controls.Add(label);
        Panel1.Controls.Add(new LiteralControl("<br />"));

        label = new Label();
        label.ID = "Label2";
        label.Text = "Label 2";
        Panel1.Controls.Add(label);
        Panel1.Controls.Add(new LiteralControl("<br />"));

        LinkButton linkButton1 = new LinkButton();
        linkButton1.ID = "linkButton1";
        linkButton1.Text = "linkButton 1";
        linkButton1.Click += new EventHandler(LinkButton_Click);
        Panel1.Controls.Add(linkButton1);
        Panel1.Controls.Add(new LiteralControl("<br />"));

        LinkButton linkButton2 = new LinkButton();
        linkButton2.ID = "linkButton2";
        linkButton2.Text = "linkButton 2";
        linkButton2.Click += new EventHandler(LinkButton_Click);
        Panel1.Controls.Add(linkButton2);

    }

    protected void LinkButton_Click(object sender, EventArgs e)
    {
        Panel1.Controls.Add(new LiteralControl("<p>"));
        LinkButton linkButton4 = new LinkButton();
        linkButton4.ID = "linkButton4";
        linkButton4.Text = "linkButton 4";
        linkButton4.Click += new EventHandler(LinkButton_Click);
        Panel1.Controls.Add(linkButton4);
    }

} 
```

因此，在从 Page_Load 调用的 DrawPage() 中，所有控件都很好地添加到了面板中，并且事件处理程序完美地连接起来。

当我单击 LinkBut​​ton1 或 LinkBut​​ton2 时，它们会正确调用 LinkBut​​ton_Click()。在 LinkBut​​ton_Click() 中，我在运行时添加了另一个控件并连接了 EventHandler，但是当我点击该链接按钮时，它只回发到 Page_Load 而不会调用 LinkBut​​ton_Click()。

那么，基于 ASP.NET 管道，我在这里尝试做的事情是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:58:31.080

你想做什么都是可能的。真正了解页面生命周期会有所帮助。 [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

这是您页面上当前发生的事情。

```
Page_Load
     Create Controls (label 1/2, linkbutton 1/2)

-> Browser renders label 1/2, linkbutton 1/2
-> User Clicks link button 1 or 2

Page_Load
     Create Controls (label 1/2, linkbutton 1/2)
Control events fire
     LinkButton_Click fires
          Adds another linkbutton (linkbutton 4)

-> Browser renders label 1/2, linkbutton 1/2 AND 4
-> User Clicks link button 4

Page_Load
     Create Controls (label 1/2, linkbutton 1/2)
Control events fire
     (There is no link button 4 so nothing happens)

-> Browser renders label 1/2, linkbutton 1/2 (4 is missing) 
```

您缺少的核心部分是重新添加动态创建的控件。每个控件都需要在每个帖子中读取（如果您关心视图状态，则以相同的顺序读取）。您可以通过视图状态或任何其他回发持久性机制来跟踪需要读取的内容。

# php - 销毁会话后重定向到上一页

> ID：11405728
> 
> 赞同：0
> 
> 时间：2012-07-10T02:12:55.503
> 
> 标签：php, javascript, session, redirect, destroy

我正在使用 php 会话和用户帐户。当他们点击页面上的注销链接时，它会在 logout.php 中生成代码，即...

```
<? 
session_start();
session_destroy();
Header( “Location: http://www.espn.com” );
?> 
```

该页面破坏了会话，并且由于某种原因它只是返回到 index.php 页面。我想拥有它，以便当用户注销时，他们被重定向到他们刚刚注销的页面。我想我只需要更改 logout.php 中的代码，但我不知道该怎么做。我尝试通过将用户带到 espn.com 来对其进行测试，但这甚至都不起作用。有人可以帮我设置它，以便将用户发送到他们刚刚所在的页面。健康长寿·繁荣昌盛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:21:09.337

```
Header( “Location: http://www.espn.com” ); 
```

应该

```
header("Location: http://www.espn.com"); //<--NOTE: You are using wrong quotes! 
```

***PS：***虽然php函数是不区分大小写的，但是最好`head`和manual一样使用小写。

***更新：*** 如果你想重定向到上一页，你可以这样做：

```
if (!empty($_SERVER['HTTP_REFERER'])) {
    header("Location: ".$_SERVER['HTTP_REFERER']);
} else {
    header("Location: http://www.espn.com");
}
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:25:06.523

采用：

```
header("Location: ".$_SERVER['HTTP_REFERER']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:25:51.700

您可以使用以下方式访问上一页：

```
$_SERVER['HTTP_REFERER']; 
```

因此，如果您将标头位置设置为该地址，它应该将用户发送回上一页

```
header('Location: '.$_SERVER['HTTP_REFERER']); 
```

虽然被警告`$_SERVER['HTTP_REFERER']`可能是空的，但您应该首先检查它，如果它是空的，请将它们发送到其他地方，例如您的主页。

# php - PHP如何将日期设置为提前一周？

> ID：11405731
> 
> 赞同：0
> 
> 时间：2012-07-10T02:13:09.200
> 
> 标签：php

我有数据库中的日期和月份，存储在单独的变量中。但是，如果今天是第 7 号，而我减去一周，则该月将是 0 相同的情况。我想添加`lo_date`到`lockin_period_date`和减去 3 个月，因为我希望它提前 3 个月向我发送电子邮件。如何将数据库中的值设置为我想要的日期？请帮忙。

```
<?php
include"connect_mysql.php";
$reminder_dates = mysql_query("SELECT*FROM registration_form");
while($row = mysql_fetch_array($reminder_dates)){
$main_dob_day = $row['main_dob_day'];
$main_dob_month = $row['main_dob_month'];   
$main_dob_year = $row['main_dob_year'];

$joint_dob_day = $row['joint_dob_day'];
$joint_dob_month = $row['joint_dob_month'];
$joint_dob_year = $row['joint_dob_year'];

$loan_lo_day = $row['loan_lo_day'];
$loan_lo_month = $row['loan_lo_month'];
$loan_lo_year = $row['loan_lo_year'];

$lockin_period_day = $row['lockin_period_day'];
$lockin_period_month = $row['lockin_period_month'];
$lockin_period_year = $row['lockin_period_year'];

$legal_fee_clawback_day = $row['legal_fee_clawback_day'];
$legal_fee_clawback_month = $row['legal_fee_clawback_month'];
$legal_fee_clawback_year = $row['legal_fee_clawback_year'];     

date_default_timezone_set('UTC');   

$m = date("n"); 
$d = date("j"); 
$y = date("Y");
$time = time();
$today = date('n-j-Y', $time);

//main applicant birthday - reminder 7days in advance
$main_day = $main_dob_day-7;
if($main_day == $d && $main_dob_month == $m){
echo "Mail Sent!";  
}
//

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:18:07.837

一个[可行的解决方案](http://codepad.viper-7.com/0jbvUH)是：

```
$main_day = date( 'n-j-Y', strtotime( "today -1 week")); 
```

要将其应用于您的用例：

```
$time = mktime( 0, 0, 0,  $main_dob_month, $main_dob_day, $main_dob_year);
$main_day = date( 'n-j-Y', strtotime( "-1 week", $time)); echo $main_day; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:15:22.957

```
$oneWeekAdv=$main_dob_year.'-'.$main_dob_month.'-'.$main_dob_day;
$oneWeekAdv=strtotime(date("y-m-d", strtotime($oneWeekAdv)) . " -1 week");
$oneWeekAdv=date('m-d', $oneWeekAdv); 
```

# android - 带有AIR本机扩展的android AlarmManager不起作用

> ID：11405735
> 
> 赞同：0
> 
> 时间：2012-07-10T02:13:40.930
> 
> 标签：android, air, alarmmanager, flex-mobile, air-native-extension

我正在尝试创建一个用于发送预定通知的 AIR 本机扩展，我有以下代码：

```
package com.ane.notification.functions;

public class ScheduledNotificationFunction implements FREFunction {

  Context androidActivity;
  Context androidContext;

  @Override
  public FREObject call(FREContext context, FREObject[] args) {
      androidActivity = context.getActivity();
      androidContext = androidActivity.getApplicationContext();
      AlarmManager alarmManager = (AlarmManager) androidContext.getSystemService(Context.ALARM_SERVICE);
      int id = (int) System.currentTimeMillis();
      Intent intent = new Intent(androidContext, SendNotification.class);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(androidContext, id, intent, 0);
      alarmManager.set(AlarmManager.RTC_WAKEUP, (System.currentTimeMillis()+30000), pendingIntent);
      return null;
    }
} 
```

类发送通知

```
package com.ane.notification.functions;

public class SendNotification extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
      // Send Notification Code
  }
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.ane.notification"
   android:versionCode="1"
   android:versionName="1.0">
   <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
   <application android:label="@string/app_name"
       android:icon="@drawable/ic_launcher"
       android:theme="@style/AppTheme">
       <receiver android:name=".functions.SendNotification"/>
   </application>
</manifest> 
```

问题是没有调用 SendNotification 一次标志着发送通知的确定时间。我认为 ScheduledNotificationFunction 代码很好，因为我已经放入了 try / catch 并且不会生成异常，所以我假设警报已在系统中注册。

我对android中的编程不是很熟悉，所以这个错误中缺少任何东西或者让我知道，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:13:43.913

我建议您使用操作来过滤这些类型的请求，因此您应该有一些看起来更像这样的东西：

```
long fireTime = SystemClock.elapsedRealtime() + 1000;

Intent intent = new Intent( "com.ane.notification.functions.SOME_ACTION" );
PendingIntent delayPendingIntent = PendingIntent.getBroadcast(appContext, 0, intent, 0);
AlarmManager am = (AlarmManager)appContext.getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.ELAPSED_REALTIME, fireTime, delayPendingIntent); 
```

然后，您需要将该清单添加到您的 AIR 应用程序描述符而不是 Android 清单中。您还需要在清单中使用完整的类包：

```
<android>
    <manifestAdditions><![CDATA[
        <manifest android:installLocation="auto" >
            <uses-permission android:name="android.permission.INTERNET"/>
            <application> 
                <receiver android:name="com.ane.notification.functions.SendNotification">
                    <intent-filter>
                        <action android:name="com.ane.notification.functions.SOME_ACTION"/>
                    </intent-filter>
                </receiver>
            </application>
        </manifest>

    ]]></manifestAdditions>
</android> 
```

您必须在清单中注册接收器，以便系统在应用程序未运行时调用它。如果您在应用程序运行时只想要一个接收器而不处理清单添加，您可以在代码中执行此操作。

注意：如果您的应用程序在警报触发之前已停止，即使您能够在 SendNotification 接收器中运行代码，您的 FREContext 也不会被初始化。

# django - 在 Django 模板中使用点符号访问字典时遇到问题

> ID：11405736
> 
> 赞同：2
> 
> 时间：2012-07-10T02:13:58.807
> 
> 标签：django

我在使用模板语言点符号访问字典中的值时遇到问题。

这是我的一本字典可能看起来像的示例：

```
{2L: {'dob': datetime.date(2012, 7, 7), 'image': u'', 'user_id': 3L, 'id': 2L, 'email': u'blank@blank.com'}, 3L: {'dob': datetime.date(2012, 7, 7), 'image': u'', 'user_id': 4L, 'id': 3L, 'email': u'blank@blank.com'}} 
```

我在 Python 中访问它的方式是这样的：

```
D[2]['email'] 
```

这是我在模板中尝试过的：

```
{% for d in D %}
    {% if d == a.user_id %} {{ D.d.email }} {% endif %}
{% endfor %} 
```

它没有打印出任何东西......（我已经通过在执行块中添加一些 HTML 来测试我的布尔值评估为 True。

你能帮我这里的符号吗？我知道这`{{ D.d.email }}`是错误的。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T02:26:16.730

你不想`{{ D.d.email }}`，那查找 D['d']。Django 模板中没有使用变量作为键的语法。

用这个：

```
{% for d,v in D.items %}
    {% if d == a.user_id %} {{ v.email }} {% endif %}
{% endfor %} 
```

# javascript - Javascript 自动刷新切换复选框

> ID：11405738
> 
> 赞同：3
> 
> 时间：2012-07-10T02:14:25.403
> 
> 标签：javascript, refresh, reload

我希望我的访问者能够使用复选框（无 iframe）切换自动页面刷新。
这是我在 Google 上找到的最相似的代码，但它是在 2004 年创建的，我似乎无法让它工作。
我在 wordpress 上使用此代码。所以问题可能出在下面的“”timerRefresh.htm？Checked“”中，我不知道将其重命名为什么，因为我的WP页面不以.html/.php/etc结尾......它只是以“/ “
ps 我知道有用于自动重新加载的浏览器扩展，我不是在寻找那个。

谢谢！

```
 var asdf = false;
      function StartTime(){
        if(asdf)clearTimeout(asdf)
        asdf = setTimeout("RefreshPage()",5000);
      }
      function RefreshPage(){
clearTimeout(asdf)
        if(document.Test.CB1.checked)
          document.location.href= "timerRefresh.htm?Checked"
      }
      function LoadPage(){
        var findCheck = document.location.href.split("?Chec");
        if(findCheck.length == 2){
          document.Test.CB1.checked=true;
          StartTime()
        }
      } 
```

```
<body onload="LoadPage()">
    <form name="Test">
      <input type="checkbox" name="CB1" onclick="StartTime()">
    </form>
  </body> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-10T02:24:42.050

Try this:

**HTML:**

```
<input type="checkbox" onclick="toggleAutoRefresh(this);" id="reloadCB"> Auto Refresh 
```

**JavaScript:**

```
var reloading;

function checkReloading() {
    if (window.location.hash=="#autoreload") {
        reloading=setTimeout("window.location.reload();", 5000);
        document.getElementById("reloadCB").checked=true;
    }
}

function toggleAutoRefresh(cb) {
    if (cb.checked) {
        window.location.replace("#autoreload");
        reloading=setTimeout("window.location.reload();", 5000);
    } else {
        window.location.replace("#");
        clearTimeout(reloading);
    }
}

window.onload=checkReloading; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-19T05:12:09.450

接受的答案太复杂了，对我来说不太适用。这是我所做的：

```
<span>Auto Refresh</span>&nbsp;<input type="checkbox" id="autoRefreshCheckbox" value="true" checked="checked" />
<script type="text/javascript">
setInterval(function ()
{
    if (document.getElementById('autoRefreshCheckbox').checked)
    {
        location.reload();
    }
}, 60000); // interval is in milliseconds
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:22:51.380

如果您没有扩展名，请不要包含扩展名。就那么简单。

`timerRefresh.htm?Checked`将会`nameOfThePage?Checked`

例如：`http://www.someblog.com/somePage/`=>`somePage/?Checked`

# less - 你可以在 LESS CSS 的 mixin 中设置一个变量吗？

> ID：11405742
> 
> 赞同：4
> 
> 时间：2012-07-10T02:15:30.117
> 
> 标签：less

我知道 LESS 没有 if/else 结构，而是依赖于受保护的 mixin 语句。不过，它似乎无法在 mixin 中设置 LESS CSS 变量。

任何人都知道我如何实现某些效果。

```
if( ispercentage( @height ) {
  @height: "1024px";
}

// Calculations dependent on @height
@textAreaHeight = 0.5 * @height;
@buttonHeight = 0.2 * @height; 
```

我查看了其他几个 stackoverflow 问题，包括： [LESS CSS - 在 mixin 中设置变量](https://stackoverflow.com/questions/9489892/less-css-setting-variable-within-mixin)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:13:16.630

Yes, it can be done. There was one bug that needed to be worked around.

**Example LESS Code**

```
//Set up guarded mixins
.setHeight(@h) when (ispercentage(@h)) { 
   @height: 1024px;
}

.setHeight(@h) when not (ispercentage(@h)) { 
   @height: @h;
}

//set up main height
@mainHeight: 50%;
body { height: @mainHeight;}

//call it by itself to make global
//.setHeight(@mainHeight); <-this failed (appears to be a bug)
.setHeight(50%); // <-this worked

.subsection { height: @height; /* just to show it is setting it */}

//use it for other globals
@textAreaHeight: 0.5 * @height;
@buttonHeight: 0.2 * @height;

textarea { height: @textAreaHeight}
button { height: @buttonHeight}

//override it locally
body.fixedHeight {
    .setHeight(300px);
    @textAreaHeight: 0.333 * @height;
    height: @height;
    textarea { height: @textAreaHeight}
} 
```

**Example CSS Output**

```
body {
  height: 50%;
}
.subsection {
  height: 1024px; /* just to show it is setting it */
}
textarea {
  height: 512px;
}
button {
  height: 204.8px;
}
body.fixedHeight {
  height: 300px;
}
body.fixedHeight textarea {
  height: 99.9px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:48:54.613

您可以创建一个由类型“保护”的mixin，例如

```
.doHeightSet(@height) when ispercentage(@height) {
   .doheightSet(1024px)
}

.doHeightSet(@height) when not ispercentage(@height) {
   // Calculations dependent on @height
   @textAreaHeight: 0.5 * @height;
   @buttonHeight: 0.2 * @height;

   /* use variables here */
} 
```

抱歉，我没有时间尝试这个，所以我可能犯了语法错误。

**编辑**更正的语法。

# android - android AsyncTask - 无法执行 onPostExecute 方法

> ID：11405751
> 
> 赞同：0
> 
> 时间：2012-07-10T02:16:38.730
> 
> 标签：android, android-asynctask

我编写了一个应用程序来运行 AsyncTask，部分代码如下所示。问题是当 AsyncTask 通过执行代码开始时 - “new AddImageTask().execute();” 在线程处理程序中，任务将启动，一切似乎都正确。但是，在“doInBackground”方法中的所有代码都已执行后，应用程序最终将停留在“doInBackground”方法中。该任务无法转到“onPostExecute”方法。（即不能关闭对话框......）出了什么问题？

谢谢您的帮助......

```
private Handler handleFetchResult = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        progressDialog.dismiss();
        Log.d(TAG, "Start handle fetch result");
        try {
            JSONArray ja = new JSONArray(fetchResult);
            Log.d(TAG, "JSON Array Length = " + ja.length());
            JSONObject jo = new JSONObject();

            for (int i = 0; i < ja.length(); i++) {
                jo = ja.getJSONObject(i);
                PhotoURLs.add(PAT_url + jo.getString("filePath"));
                Log.d(TAG, PhotoURLs.get(i));
            }
        } catch (JSONException e) {
            Log.d(TAG, "Fetch result error: " + e.getLocalizedMessage());
            e.printStackTrace();
        }

        //TODO: display thumbnail
        new AddImageTask().execute();

    }//void handleMessage
};//Handler handleFetchResult

class AddImageTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        loadThumbnailDialog.show(SitePhotoGallery.this, "Fetch thumbnails from server",
                "Loading...", true, true);
        Log.d("AddImageTask.onPreExecute","onPreExecute");
    }
    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub
        for (String url : PhotoURLs) {

            String filename = url.substring(url.lastIndexOf("/") + 1, url.length());

            String thumburl = url.substring(0, url.lastIndexOf("/")+1);

            imgAdapter.addItem(LoadThumbnailFromURL(thumburl + filename));
            publishProgress();

        }
        Log.d("AddImageTask.doInBackground","doInBackground");
        return null ;
    }

    @Override
    protected void onProgressUpdate(Void... unused) {
        super.onProgressUpdate();
        imgAdapter.notifyDataSetChanged();
        Log.d("AddImageTask.onProgressUpdate","OnProgressUpdate");

    }

    protected void onPostExecute(Void... unused) {
        super.onPostExecute(null);
        loadThumbnailDialog.dismiss();
        Log.d("AddImageTask.onPostExecute","onPostExecute");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:31:20.900

我认为这是因为`onPostExecute()`应该带一个`Void`参数而不是一个`Void...`参数。（您还应该`@Override`像 Soxxeh 在上面的评论中指出的那样指定。）

# java - 使用 JFrame 的 JAVA 贷款计算器的例外情况？

> ID：11405753
> 
> 赞同：0
> 
> 时间：2012-07-10T02:17:10.307
> 
> 标签：java, swing, exception, jframe, calculator

我想如果我能摆脱程序在我尝试运行它时给我的一些异常，我几乎就明白了。这是我的代码：

```
package RandomMathGame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class RandomMathGame {

    public static void main(String[] args) {
        RandomProblemGenerator randomProblems = new RandomProblemGenerator(10);
        final int numberProblems = 10;
        int correctScore = 0;
        JPanel panel = new JPanel();
       int answer;
        int correctAnswer;
        JLabel[] mathProblems = new JLabel[numberProblems];
        final JTextField[] mathAnswers = new JTextField[numberProblems];
        JLabel[] correctYesNo = new JLabel[numberProblems];
        final JLabel score = new JLabel(correctScore + "/10");
        JButton submit = new JButton("Submit");
        for (int i = 1; i <= numberProblems; i++)
        {
            final int X = randomProblems.createNumberX();
            final int Y = randomProblems.createNumberY();

            mathProblems[i] = new JLabel("" + X + " * " + Y + " = ");
            mathAnswers[i] = new JTextField();

             answer = Integer.parseInt(mathAnswers[i].getText());
             correctAnswer = X * Y;

            if (answer == correctAnswer)
            {
                correctYesNo[i] = new JLabel("Correct answer; good job!");
                correctScore = correctScore + 1;
            }
            else
            {
               correctYesNo[i] = new JLabel("Incorrect answer; try again!");

            }
             panel.add(mathProblems[i]);
             panel.add(mathAnswers[i]);
             panel.add(correctYesNo[i]);
            }

        final int temp = correctScore;
      submit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                score.setText("Score: " + temp + "/10");
            }
        });

        panel.add(submit);
        panel.add(score);

        JFrame gameFrame = new JFrame();
        gameFrame.setTitle("Random Math Game");
        gameFrame.setSize(150, 150);
        gameFrame.setVisible(true);
        gameFrame.setContentPane(panel);

        }
  } 
```

这些是我运行它时给我的例外情况：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:504)
    at java.lang.Integer.parseInt(Integer.java:527)
    at RandomMathGame.RandomMathGame.main(RandomMathGame.java:33)
Java Result: 1 
```

我时间紧迫，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:33:22.500

您正在尝试从刚刚创建的空白字段中获取信息。

```
mathAnswers[i] = new JTextField();
answer = Integer.parseInt(mathAnswers[i].getText()); 
```

所以在这里你只是从错误的地方检查。似乎在第一步您要创建文本字段，而第二行应该在其他事件中出现。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:33:04.353

```
 String answerStr = mathAnswers[i].getText();

    if(answerStr.isEmpty()){

          correctYesNo[i] = new JLabel("Not a valid answer/answer field empty!");
    } else {

         answer = Integer.parseInt(answerStr);
         correctAnswer = X * Y;
         //Rest of your code goes here
    } 
```

希望这对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:30:14.307

```
answer = Integer.parseInt(mathAnswers[i].getText()); 
```

是什么导致了错误。这是因为您的文本字段之一是空白的。在接受用户输入之前做一些验证，除非你想让你的应用程序出错。

# ios - 测试在 UIView 中绘制的图形上的点击

> ID：11405758
> 
> 赞同：1
> 
> 时间：2012-07-10T02:17:44.093
> 
> 标签：ios, xcode, core-graphics, opacity, alpha

我已经使用核心图形将非矩形形状绘制到 UIView 子类中。现在我想让这个形状“可点击”，而不是 UIView 的透明区域。IE UIView 子类背景颜色为 alpha 0。当用户点击图形本身但仍在视图上时，我如何测试它以便我可以执行适当的操作？

# crystal-reports - 如何处理 Crystal Reports 中的空数字字段/变量？

> ID：11405759
> 
> 赞同：0
> 
> 时间：2012-07-10T02:17:45.097
> 
> 标签：crystal-reports, formula, isnull

我的组页脚中有以下公式，但如果 sample_perc 为空，则显示 0 时出现问题；如果#rt_sample_ordered 为空，则此值为空。

```
NumberVar sample_perc := {#rt_sample_ordered}%{@sum_of_sample};
if (sample_perc>0)then
   sample_perc
else
  0 
```

当 sample_perc 为空白时如何打印 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:34:22.037

```
If Isnull({#rt_sample_ordered}) Or Isnull({@sum_of_sample}) Then
  0
Else If ( {#rt_sample_ordered}%{@sum_of_sample} ) > 0 Then
  sample_perc
Else
  0 
```

# tableview - updateItem 的第二个参数在 javafx2 中永远不会为假

> ID：11405761
> 
> 赞同：2
> 
> 时间：2012-07-10T02:17:57.717
> 
> 标签：tableview, javafx-2

我使用 javafx2 控件 TableView 来显示数据库中的记录（我现在有 20 条记录）。当显示记录时，我想在每一行中添加按钮。所以我用谷歌搜索了很多文章，并在下面写了一些代码。

关键代码是：

```
 protected void updateItem(Long item, boolean empty) {
    super.updateItem(item, empty);
    if(empty) {
        setText(null);
        setGraphic(null);
    } else {
        final Button button = new Button("modifty");
        setGraphic(button);
        setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
    }
} 
```

我调试这段代码，参数“empty”永远不会是“false”，所以按钮永远不会显示在表格视图中，

谁能帮我？谢谢

下面是完整的代码（java 和 fxml）：

爪哇：

```
 package com.turbooo.restaurant.interfaces.javafx;

import java.io.IOException;
import java.net.URL;
import java.text.SimpleDateFormat;
import java.util.List;
import java.util.ResourceBundle;

import javafx.beans.property.SimpleStringProperty;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ContentDisplay;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.util.Callback;

import com.turbooo.restaurant.domain.Customer;
import com.turbooo.restaurant.domain.CustomerRepository;
import com.turbooo.restaurant.interfaces.facade.dto.CustomerDto;
import com.turbooo.restaurant.interfaces.facade.dto.assembler.CustomerDtoAssembler;
import com.turbooo.restaurant.util.ContextHolder;
import com.turbooo.restaurant.util.UTF8Control;

public class CustomerController implements Initializable {

    @FXML
    private TableView<CustomerDto> customerTableView;

    @Override
    public void initialize(URL arg0, ResourceBundle arg1) {

        TableColumn<CustomerDto, Long> idCol = new TableColumn<CustomerDto, Long>("id");
        idCol.setCellValueFactory(
            new PropertyValueFactory<CustomerDto,Long>("id")
        );

        TableColumn<CustomerDto, String> nameCol = new TableColumn<CustomerDto, String>("name");
        nameCol.setMinWidth(100);
        nameCol.setCellValueFactory(
            new PropertyValueFactory<CustomerDto,String>("name")
        );

        TableColumn<CustomerDto, String> birthdayCol = new TableColumn<CustomerDto, String>("birthday");
        birthdayCol.setCellValueFactory(
                new Callback<TableColumn.CellDataFeatures<CustomerDto, String>, ObservableValue<String>>() {
                    @Override
                    public ObservableValue<String> call(TableColumn.CellDataFeatures<CustomerDto, String> customer) {
                        if (customer.getValue() != null) {
                            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                            return new SimpleStringProperty(sdf.format(customer.getValue().getBirthday()));
                        } else {
                            return new SimpleStringProperty("");
                        }
                    }
                });

        TableColumn<CustomerDto, Long> actionCol = new TableColumn<CustomerDto, Long>("action");
        actionCol.setCellFactory(
                new Callback<TableColumn<CustomerDto,Long>, TableCell<CustomerDto,Long>>() {
                    @Override
                    public TableCell<CustomerDto, Long> call(TableColumn<CustomerDto, Long> arg0) {
                        final TableCell<CustomerDto, Long> cell = new TableCell<CustomerDto, Long>() {
                            @Override
                            protected void updateItem(Long item, boolean empty) {
                                super.updateItem(item, empty);
                                if(empty) {
                                    setText(null);
                                    setGraphic(null);
                                } else {
                                    final Button button = new Button("modifty");
                                    setGraphic(button);
                                    setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                                }
                            }
                        };

                        return cell;
                    }
                });

        //TODO add button column

        customerTableView.getColumns().addAll(idCol, nameCol, birthdayCol, actionCol);       

        loadData();

    }

    public void loadData() {
        CustomerRepository cusRepo = (CustomerRepository)ContextHolder.getContext().getBean("customerRepository");

        List<Customer> customers = cusRepo.findAll();
        CustomerDtoAssembler customerDTOAssembler = new CustomerDtoAssembler();
        List<CustomerDto> customerDtos = customerDTOAssembler.toDTOList(customers);

        ObservableList<CustomerDto> data = FXCollections.observableArrayList(customerDtos);
        customerTableView.setItems(data);        
    }

    public void showNewDialog(ActionEvent event) {
        ResourceBundle resourceBundle = ResourceBundle.getBundle(
                "com/turbooo/restaurant/interfaces/javafx/customer_holder",
                new UTF8Control());

        Parent container = null;
        try {
            container = FXMLLoader.load(
                    getClass().getResource("customer_holder.fxml"), 
                    resourceBundle);

        } catch (IOException e) {
            e.printStackTrace();
        }

        container.setUserData(this);    //pass the controller, so can access LoadData function in other place later

        Scene scene = new Scene(container, 400, 300);
        Stage stage = new Stage();
        stage.setScene(scene); 
        stage.initModality(Modality.APPLICATION_MODAL);
        stage.show();

    }
} 
```

文件格式：

```
 <?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane prefHeight="345.0" prefWidth="350.0" xmlns:fx="http://javafx.com/fxml" fx:controller="com.turbooo.restaurant.interfaces.javafx.CustomerController">
  <center>
    <TableView fx:id="customerTableView" prefHeight="200.0" prefWidth="200.0" />
  </center>
  <top>
    <HBox alignment="CENTER_LEFT" prefHeight="42.0" prefWidth="350.0">
      <children>
        <Button text="new" onAction="#showNewDialog"/>
        <Separator prefHeight="25.0" prefWidth="13.0" visible="false" />
        <Button text="modify" />
        <Separator prefHeight="25.0" prefWidth="15.0" visible="false" />
        <Button text="delete" />
      </children>
    </HBox>
  </top>
</BorderPane> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:43:30.080

您尚未为您的操作列设置 cellValueFactory，因此它始终为空。一个简单的方法就是将单元格值设置为记录的 id。

```
actionCol.setCellValueFactory(
    new PropertyValueFactory<CustomerDto,Long>("id")
); 
```

此外，我创建了一个简单的[示例](https://gist.github.com/3081826)来创建一个包含添加按钮的表格，如果需要，您可以参考。

# twitter-bootstrap - Twitter 引导导航栏在移动设备/平板电脑上自动扩展

> ID：11405765
> 
> 赞同：4
> 
> 时间：2012-07-10T02:18:18.290
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我正在使用 Twitter 引导程序。它运行良好，导航栏运行良好。它具有响应性并进行相应调整，但是当您在桌面上缩小屏幕或在手机上拉起网站时，它开始扩展时已经占据了一大块屏幕。我希望它开始折叠并选择扩展。

代码如下：

```
<div class="navbar navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container">

 <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">         
<span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    </a>

    <a class="brand" href="/">My Site</a>
     <div class="nav-collapse collapse">
    <ul class="nav">

      <li <% if @league=='recruiting' %>class="active"<% end %>><%= link_to "Recruiting", :controller => "league", :action=>"index", :league=>"recruiting" %></li>
      <li <% if @league=='college' %>class="active"<% end %>><%= link_to "College", :controller => "league", :action=>"index", :league=>"college" %></li>
      <li <% if @league=='nfl' %>class="active"<% end %>><%= link_to "NFL", :controller => "league", :action=>"index", :league=>"nfl" %></li>

    </ul>

     <ul class="nav pull-right">
        <li><a href="/blog">Blog</a></li>
        <li <% if params[:controller]=='chart' %> class="active"<% end %>><a href="/data/all/hundred">Data</a></li>
        <% if user_signed_in? %>
            <li><%= link_to "My Profile", user_profile_path(:username => current_user.username) %></li><li><%= link_to('Logout', destroy_user_session_path, :method => :delete) %></li>
        <% else %>
            <li><%= link_to "Login", "#login-lightbox", 'data-toggle'=>"modal", 'id'=>'login-link' %></li>
        <% end %>
     </ul>
    </div>
    </div>
  </div>
</div> 
```

# python - 获取特定文本中的文本？

> ID：11405766
> 
> 赞同：-4
> 
> 时间：2012-07-10T02:18:46.137
> 
> 标签：python, string

如何在特定文本中获取文本？就像，如果我有这样的文字：

`'lololol \r asdfasdf r\ gfhfgr'`

我怎样才能让它返回'asdfasdf'。基本上，获取位之间的文本`'\r'`和`'r\'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:41:42.320

另一个重新解决方案，

```
import re

s = r'lololol \r asdfasdf r\ gfhfgr'
pattern = re.compile('\\\\r (.*?) r\\\\')

print pattern.findall(s) 
```

结果是`['asdfasdf']`

**编辑：**

好吧，*伙计*，这就是您在示例中所说的想要的。如果您愿意，欢迎您使用

```
pattern = re.compile('\\\\r(.*?)r\\\\') 
```

这会给你`[' asdfasdf ']`。

由于 Python 和重新解析字符串的方式，需要“所有斜线”；斜杠用作`\n`（换行符）等有向图的转义字符。因此，要表示斜线，您必须使用有`\\`向图。试着`print('\\')`看看这个。

然后，您必须将其加倍，因为 re 会根据其自己的有向图集再次解析字符串（\d 表示数字，\s 表示空格等）。因此，如果您输入`'\\\\'`，Python 会将其理解为由两个斜杠 组成的字符串`\\`，并将其传递给 re，re 对其进行解析并认为您正在寻找单个`\`字符。

有时你可以不这样做就逃脱；如果您有一个类似 的字符串`'\m'`，其中尾随字符不会产生有效的二合字母，则结果实际上是两个字符的字符串`\m`（try `print('\m')`）。\r 有点时髦；Python 将其识别为回车有向图，但 re 不使用 \r 作为有向图，因此给 Python '\r' 或 '\\r' 都将导致重新查找文字字符串 '\r'。我更喜欢双双斜杠，因为这意味着您不必记住两个单独的定义什么是或不是一个合法的有向图！另一方面，Python 和 re 都将 \' 识别为单引号有向图（`print('\'')`打印一个`'`字符） - 所以两个斜杠都必须完全双转义，否则你会得到一个“嘿，字符串的其余部分在哪里？ ？” 错误 （'

另一种选择是输入原始字符串 ( `r'abc'`)；这告诉 Python 不要解析字符串中的有向图，但 re 仍然会这样做，所以你的模式必须看起来像

```
pattern = re.compile(r'\\r(.*?)r\\') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:32:18.653

您可以在 Python 中使用正则表达式。

```
>>> import re
>>> s = 'lololol \r asdfasdf r\ gfhfgr'
>>> e = re.search(r'\r (?P<boxflux>.*) r\\', s)
>>> e.group('boxflux')
'asdfasdf' 
```

boxflux.com

# jboss - 在 zk.xml 中设置错误页面会导致 JBoss 出现异常

> ID：11405770
> 
> 赞同：2
> 
> 时间：2012-07-10T02:19:57.590
> 
> 标签：jboss, zk

我在 zk.xml 中设置了错误页面，但它在 Jboss 中抛出了 IllegalStateException：java.lang.IllegalStateException：在提交响应后无法重置缓冲区

但是，它在 Tomcat 中运行良好。是配置问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:25:45.187

有这个问题的解决方法，您可以在 error.zul 页面中删除**javax.servlet.error.exception 。**例如，

```
<zscript>
    execution.removeAttribute("javax.servlet.error.exception");
</zscript> 
```

或者使用最新的ZK版本，已经修复[了这个bug](http://tracker.zkoss.org/browse/ZK-1144)

# android - 尝试将数据（捆绑/附加）传递到片段中

> ID：11405772
> 
> 赞同：2
> 
> 时间：2012-07-10T02:20:26.777
> 
> 标签：android, android-fragments, bundle, android-activity

这就是我正在做的事情：

在 ListActivity（不是 ListFragment）中：

```
Intent i = new Intent(getApplicationContext(), MyFragmentActivity.class);
i.putExtra("name", items.get(arg2));
startActivity(i); 
```

然后在 MyFragmentActivity （使用支持库）：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_layout);

    this.initialiseTabHost(savedInstanceState);
    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));

        RateFrag rate = new RateFrag();
        rate.setArguments(getIntent().getExtras());
        getSupportFragmentManager().beginTransaction().add(android.R.id.content, rate).commit();

    }

    this.intialiseViewPager();
} 
```

然后在速率片段中：

```
 public class RateFrag extends Fragment {

  public static RateFrag newInstance(CharSequence name) {
    RateFrag f = new RateFrag();
    Bundle args = new Bundle();
    args.putCharSequence("name", name);
    f.setArguments(args);
    return f;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Item = getArguments().getString("name");

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    title = (TextView) getActivity().findViewById(R.id.tvRateItem);
    ratingsBar = (RatingBar) getActivity().findViewById(R.id.theRatingBar);

    title.setText(Item);

}

 // stuff!

 } 
```

因此，我实际上是在尝试将原始 ListActivity 中的“额外”传递到上面最后一行代码的 Fragment 中的 textview 中。

这是我在单击 ListItem 时在 LogCat 中得到的：

```
07-09 19:12:39.998: E/AndroidRuntime(1788): FATAL EXCEPTION: main
07-09 19:12:39.998: E/AndroidRuntime(1788): java.lang.NullPointerException
07-09 19:12:39.998: E/AndroidRuntime(1788):     at com.---.---.RateFrag.onCreate(RateFrag.java:61)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:834)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:768)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.app.Fragment.setUserVisibleHint(Fragment.java:746)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.app.FragmentPagerAdapter.setPrimaryItem(FragmentPagerAdapter.java:128)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.view.ViewPager.populate(ViewPager.java:802)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.View.measure(View.java:15172)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.Choreographer.doFrame(Choreographer.java:525)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.os.Handler.handleCallback(Handler.java:615)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.os.Looper.loop(Looper.java:137)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-09 19:12:39.998: E/AndroidRuntime(1788):     at dalvik.system.NativeStart.main(Native Method) 
```

将我的应用程序转换为使用 Fragments 让我抓狂！不可否认，最终产品的外观要好得多，其复杂性令人非常沮丧。有人可以指出我正确的方向，看看我在哪里失败了吗？

编辑：这是我的标签布局：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0"/>

            <FrameLayout
                android:id="@+android:id/content"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"/>
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:44:23.340

问题是您正试图在`Fragment`此处实例化两个...一个正在从 膨胀`fragment_layout.xml`，另一个正在以编程方式实例化并使用`FragmentTransaction`.

*只*选择这两种方法中的一种来实例化您的`Fragment`......无论哪种选择最适合这种情况（我无法从您提供的最少代码中看出）。

# java - 为什么 Eclipse 忽略运行配置环境变量？

> ID：11405775
> 
> 赞同：1
> 
> 时间：2012-07-10T02:21:21.440
> 
> 标签：java, eclipse, osx-lion, environment-variables, java-6

Mac OSX 狮子 10.7.4。Eclipse“朱诺版本 20120614-1722”。

好的，几个小时以来一直在抨击我的头。我有一个使用 JNI 库的 Java 控制台应用程序。一旦我满足了 JNI 库对我设置的环境变量的依赖关系，它就可以从命令行运行得很好。但是我无法获得任何运行配置来使用我在 shell 中的相同环境变量从 Eclipse 运行应用程序。

我已将这些变量重复添加到不同类型的运行配置中。

我添加了一个前导方法来发出所需的环境变量，它们不断出现，不是未设置，而是空的。啊？？？？

我删除了我所有的 Eclipse 首选项文件和缓存等，但它仍然无法工作。

我让它在某一时刻工作，但再也没有。

Mac 上的 Eclipse 或者 Juno 版本肯定有什么问题，这让我很生气。有人有什么想法或建议吗？

谢谢，

安德鲁·沃尔夫

# hadoop - 在 Hadoop 集群上运行 Mahout

> ID：11405780
> 
> 赞同：2
> 
> 时间：2012-07-10T02:22:34.277
> 
> 标签：hadoop, mahout

我是 Mahout/Hadoop 初学者。

我正在尝试运行“Mahout in Action”书中给出的 Mahout 示例。我可以在没有 Hadoop 的情况下在 Eclipse 中运行这些示例。您能否让我知道如何在 Hadoop 集群中运行相同的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:19:23.197

这个[wiki](https://cwiki.apache.org/confluence/display/MAHOUT/Algorithms)页面包含在 Mahout 中实现的不同文章以及如何运行它们。他们中的许多人将以下内容作为论据

> -xm "执行方法：顺序或mapreduce"

Mahout[要求](https://cwiki.apache.org/confluence/display/MAHOUT/System+Requirements)提到它适用于 Hadoop 0.20.0+。请参阅本教程，了解如何在 Ubuntu上的[单节点](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)和[多节点集群上设置 Hadoop。](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

# javascript - 在 android 设备上使用 html5 播放视频

> ID：11405783
> 
> 赞同：3
> 
> 时间：2012-07-10T02:23:07.497
> 
> 标签：javascript, android, jquery

我正在构建一个移动网站，但在 Android 设备上播放视频时遇到问题。我可以播放视频，但发现它不稳定。有时它会导致浏览器崩溃，有时控件没有响应。我的大部分测试都是在 Galaxy S3 和 Nexus 上进行的。

该代码是一个链接，您可以单击该链接来播放视频。

```
<div id="player"></div>
<a href="#" onclick="DoNav('<?php echo $url; ?>');" title="Click to play video"> <?php echo $result_videos[$i]["camera_name"]; ?> </a> 
```

javascript/jquery 组合（不是非常理想，所以也许这就是问题所在）：

```
function DoNav(theUrl)
{

// only add the player if it doesn't yet exist
if($('#myfileplayer').length == 0) {
    var mydiv = $("#player");
        var myvideo = $("<video id='myfileplayer' src='"+ theUrl + "' width='320' height='240' controls></video>");
           mydiv.append(myvideo);
} else {
   $('#myfileplayer').attr("src",theUrl); 
}

var video = document.getElementById('myfileplayer');
video.addEventListener('click',function(){
  video.play();
},false);

} 
```

我不确定这里还有什么要调试的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:20:15.797

感谢@akonsu，他提到了为什么我什至需要点击事件监听器？好点，我不知道。我删除了它，所有奇怪的行为都消失了。

```
function DoNav(theUrl)
{

  // only add the player if it doesn't yet exist
  if($('#myfileplayer').length == 0) {
    var mydiv = $("#player");
    var myvideo = $("<video id='myfileplayer' src='"+ theUrl + "' width='320' height='240' controls></video>");
       mydiv.append(myvideo);
  } else {
     $('#myfileplayer').attr("src",theUrl); 
  }

} 
```

# javascript - 如何在 THREE.js 中定位纹理图像

> ID：11405784
> 
> 赞同：4
> 
> 时间：2012-07-10T02:23:10.243
> 
> 标签：javascript, webgl, three.js

我有一个带有地球纹理的球体。我可以在球体上绘制精确的点，但需要调整纹理的位置（旋转它）以匹配坐标的放置位置。有没有办法在球体上旋转纹理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T16:57:06.873

尝试玩这个：

```
texture.offset.x = 0.5; // 0.0 - 1.0
texture.offset.y = 0.5; // 0.0 - 1.0 
```

# c++ - __try 不在 HeapFree 上捕获异常

> ID：11405786
> 
> 赞同：1
> 
> 时间：2012-07-10T02:23:40.707
> 
> 标签：c++, visual-studio-2010, try-catch, seh

我试图捕捉一个`HeapFree`异常..

在 MSDN 上，它说`HeapFree`在尝试释放已释放的指针时具有未定义的行为。好吧，我在VS2010上试过了，它“抛出”了一个断点（windows已经触发了一个断点），然后是一个异常（一个堆已损坏）

我试图用 _ *try/* _except 来捕捉它，但它没有被触发：

```
__try{      
  HeapFree(hHeap, 0, pMem);
}

__except(EXCEPTION_EXECUTE_HANDLER){
   DWORD exception = GetExceptionCode();
} 
```

我怎样才能捕捉到这个异常？正常的 try/catch 也不起作用。我不知道发生了什么；我对解释比对解决方案本身更感兴趣。

# ruby-on-rails-3 - 在rails 3中编程非持久分页数组

> ID：11405787
> 
> 赞同：0
> 
> 时间：2012-07-10T02:23:59.440
> 
> 标签：ruby-on-rails-3, get, persistence, kaminari

我有一个关于对源自远程 http 请求到 API（或许多）的非持久数据进行分页的问题。

我的 Rails 3 应用程序向搜索引擎 API 发送一个 net/http 请求并接收一个 JSON 对象。我将其加载到 ruby​​ 中并在视图中对结果进行分页。初始查询收到 50 次点击，Kaminari 显示：

`@items = Kaminari.paginate_array(array).page(params[:page]).per(10)`

现在，当我在视图中单击第 2 页时，控制器会再次执行 JSON 请求，而不是使用`array`.

此代码在辅助方法中，这是一个问题。我意识到将分页代码移动到控制器中将使这成为可能。`bing_search`现在回来`@items`了。

```
if params[:bing]
  @bing = bing_search(@query)
end 
```

我需要类似的东西：

`@items = Kaminari.paginate_array(@bing).page(params[:page]).per(10)`

我只是想知道如何`array`在分页时坚持下去。我刚刚看过缓存，这看起来很有希望，但我还不知道它是如何工作的。

# java - 在 XML Config 文件中有某种表达式

> ID：11405788
> 
> 赞同：0
> 
> 时间：2012-07-10T02:24:16.120
> 
> 标签：java, xml

我对 xml 很陌生，有没有办法，我可以在 xml 中定义某种表达式，以便在 java 中正确解释它。

我有一个配置文件，我想定义某种表达式，
即`#{age > 27 or location != US }`当它被解析时，它会被正确解释。

如果有任何例子，那将有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:32:42.227

如果您问是否有办法让 XML 解析器做到这一点，那么答案是否定的。

您的替代方法是在尝试解析 XML 之前（即在某种预处理器中）或在解析 XML 之后（即在 Java 代码中）进行“解释”。

jjathman 提到了 Spring 表达式语言。这是在 Java 代码中进行表达式评估的一种方法，但我不知道它是否可以在解析 XML 之前应用。

jjathman 所链接的 Spring 表达式语言的描述主要集中在接线文件中的 EL 上。那里发生的情况是，表达式被 XML 解析器视为文本，Spring bean 基础结构在稍后阶段对表达式进行扩展。除非您的 XML 是 Spring bean 定义，否则该特定描述并不直接适用于您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:59:35.080

在您的类路径中导入 Groovy jar 并使用 Eval.xy 方法。

```
assert true == Eval.xy(30, "US", ' x > 27 or y != US') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T03:06:36.527

如果你使用 Spring，有一种方法可以做这样的事情。您基本上可以将代码放入特殊表达式中。见[http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html#expressions-beandef](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html#expressions-beandef)

# ios - 这个效果怎么做

> ID：11405789
> 
> 赞同：-5
> 
> 时间：2012-07-10T02:24:33.737
> 
> 标签：ios, show-hide

我想知道如何做到这一点：

当用户点击初始屏幕上的加号时（见第一张截图），列表将下拉，加号变为减号（见第二张截图）。

[![前](../Images/4f3f72233612b6a4ce369ebf090c6ef8.png)](https://i.stack.imgur.com/n3y2k.gif)
[（来源：[store.qq.com](http://b223.photo.store.qq.com/psb?/V11ixOec0KfVzE/fJBNAGr5NKNwTnFR7sqIfQWS5qPgVfChmOvMY1g79WY!/b/YZ1h94QZPQAAYpra9YT1PAAA)）]

![](../Images/2b8ab8fadc8fb10959efec8d805fc6df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:03:38.493

你必须自己写。例如，这是一个超级简单的例子，它向您展示了如何隐藏和显示内容。我没有使用图形 +/- 按钮（而是一个简单的文本按钮），但希望这可以为您提供足够的线索，让您自己正确地执行此操作。这只是演示了显示文本面板的动画（您可以在此面板上放置图形或任何内容）。

有很多方法可以做到这一点，这过于简单化了，显然我没有花任何时间在美学上，但希望它向您展示了一些您可以使用的技术。我认为关键技巧是将要显示的内容放在主视图上的 UIView 上，将其高度设为零，然后对要扩展的框架的更改进行动画处理。您还可以移动按钮，更改用于按钮的 UIImage，等等，但您明白了。

```
//  SlideInViewController.m

#import "SlideInViewController.h"

@interface SlideInViewController ()
{
    UIView *_hiddenPanel;
    UIButton *_hideShowButton;
    BOOL _panelHidden;
}
@end

@implementation SlideInViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // initialize the flag

    _panelHidden = YES;

    // create the panel that will be hidden initially (height of zero), but will be revealed when you click on the button

    _hiddenPanel = [[UIView alloc] initWithFrame:CGRectMake(0.0, 300.0, self.view.frame.size.width, 0.0)];
    _hiddenPanel.clipsToBounds = YES;
    [self.view addSubview:_hiddenPanel];

    // add the button

    _hideShowButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    _hideShowButton.frame = CGRectMake(40.0, 260.0, 40.0, 40.0);
    [_hideShowButton setTitle:@"+" forState:UIControlStateNormal];
    [_hideShowButton addTarget:self action:@selector(hideShowPanel:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:_hideShowButton];

    // now put whatever you want on this hidden panel.

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, self.view.frame.size.width, 200.0)];
    label.lineBreakMode = UILineBreakModeWordWrap;
    label.numberOfLines = 0;
    label.text = @"This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. This is a very long label. ";
    [_hiddenPanel addSubview:label];

    // Do any additional setup after loading the view.
}

- (IBAction)hideShowPanel:(id)sender
{
    if (_panelHidden)
    {
        // if the panel was already hidden, let's reveal it (and move/adjust the button accordingly)

        [UIView animateWithDuration:1.0 animations:^{
            _hideShowButton.frame = CGRectMake(40.0, 60.0, 40.0, 40.0);
            [_hideShowButton setTitle:@"-" forState:UIControlStateNormal];

            _hiddenPanel.frame = CGRectMake(0.0, 100.0, self.view.frame.size.width, 200.0);
        }];
    }
    else
    {
        // if the panel was already shown, so now let's hide it again (and move/adjust the button accordingly)
        [UIView animateWithDuration:1.0 animations:^{
            _hideShowButton.frame = CGRectMake(40.0, 260.0, 40.0, 40.0);
            [_hideShowButton setTitle:@"+" forState:UIControlStateNormal];

            _hiddenPanel.frame = CGRectMake(0.0, 300.0, self.view.frame.size.width, 0.0);
        }];
    }

    _panelHidden = !_panelHidden;
}

@end 
```

# python - 在 GAE db.Model python 2.7 上覆盖 __setattr__

> ID：11405790
> 
> 赞同：0
> 
> 时间：2012-07-10T02:24:35.170
> 
> 标签：python, google-app-engine, google-cloud-datastore, python-2.7

GAE db.Model 无法存储元组列表。因此，当我将列表从实体中拉出时，我需要将列表保存为 json.dumps 字符串和 json.loads 字符串。我想自动化这个。这是我的尝试：

```
class example(db.Model):
    someAttr = db.StringListProperty()
    A = db.StringProperty()
    B = db.StringProperty()
    C = db.StringProperty()

    def __setattr__(self, name, value):
        #convert json to string for storage
        if name in ("A", "B", "C"):
            value = json.dumps(value)
        #call default set method
        return super(Quote, self).__setattr__(name, value)

    def __getattribute__(self, name):
        #convert string to json for retrieval
        if name in ("A", "B", "C"):
            val = super(Quote, self).__getattribute__(name)
            return json.loads(val)
        else: 
            # default get behavior
            return super(Quote, self).__getattribute__(name) 
```

当我尝试设置实体的 A、B、C 属性时，我得到：

```
BadValueError: Property C must be a str or unicode instance, not a list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:54:27.177

如果您不需要存储非常大的 JSON，我建议您查看 NDB。它具有内置的 JsonProperty：[https](https://developers.google.com/appengine/docs/python/ndb/properties#types) ://developers.google.com/appengine/docs/python/ndb/properties#types 。

我还在 App Engine Googl Group 中看到了一篇有趣的帖子，其中讨论了一种更有效的存储大型 JSON 的方法：https://groups.google.com/forum/#!msg/google-appengine/WPfAvHDGNjQ/ [XfakEMm1qzoJ](https://groups.google.com/forum/#!msg/google-appengine/WPfAvHDGNjQ/XfakEMm1qzoJ)

# android - Setting up a process to deal with GPS for multiple activities

> ID：11405792
> 
> 赞同：0
> 
> 时间：2012-07-10T02:24:41.890
> 
> 标签：android

I am writing an application that uses GPS to give distance to a starting line and speed and direction to that line. I have GPS running fine in a test file I wrote that prints out latitude and longitude and time to my cell phone display but it is a single activity. I need to have my program do calculations in the background on the GPS data, for example calculating speed from differences in location 10 seconds apart. This information needs to be viewed from several of my activity pages, which are individual classes. I think I need to create a helper class that contains the GPS service but I am not sure and not sure of the many things that are on the web what I should be looking at. Not sure how or where to fire off the helper and even if it is called helper as I can't find that in the Android docs. Also not sure what the best way to get the information from the GPS helper, if that is what it is called. After several hours of googling and searching Youtube, I am coming here for help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:51:31.810

What I would suggest doing is using a [Service](http://developer.android.com/reference/android/app/Service.html) to store the data you need and perform the calculations. You can then create custom methods in the service and access them directly or via [AIDL](http://developer.android.com/guide/components/aidl.html). The `Activities` that view the data can then access the data either using something like a refresh button to call the methods that access the data or by using a timer to poll those methods at regular intervals.

# javascript - 如何为谷歌地图的 addDOMListener 添加一个动作？

> ID：11405795
> 
> 赞同：0
> 
> 时间：2012-07-10T02:24:52.410
> 
> 标签：javascript, jquery, google-maps, dom-events

我只想根据不同 div 元素的 Mouseover 事件加载谷歌地图。为此，我只使用了以下简单代码。这段代码本身不起作用，有人能告诉我我犯了什么错误吗？

```
<script type="text/javascript">

  function initialize() {
    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(40.740, -74.18),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var content = '<strong>A info window!</strong><br/>That is bound to a marker';

    var infowindow = new google.maps.InfoWindow({
      content: content
    });

    var marker = new google.maps.Marker({
      map: map,
      position: map.getCenter(),
      draggable: true
    });

    infowindow.open(map, marker);
  }

  google.maps.event.addDomListener($("#showmap"), 'mouseover', function(){ alert("Hi");});
</script>

<div id='showmap'>
  Show Map
</div>
<div id="map-canvas" style="width: 500px; height: 400px"></div> 
```

上面简单的警报函数本身并不需要这个简单的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:34:08.973

选择器返回 jQuery 对象，并且可以使用`[0]`. 另外，将其设为“addDomListenerOnce”，只需要初始化一次。

```
$("#showmap")[0] 
```

[**看演示**](http://jsfiddle.net/yV6xv/145/)

```
google.maps.event.addDomListenerOnce($("#showmap")[0], 'mouseover', 
                                 function(){ initialize(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:06:39.683

我只是尝试使用它，这也有效。

**Java脚本代码：**

```
 function initialize(lat,longit,content) {
    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(lat, longit),
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow({
      content: content
    });

    var marker = new google.maps.Marker({
      map: map,
      position: map.getCenter(),
      draggable: false
    });

    infowindow.open(map, marker);
  } 
```

**html代码：**

```
 <div id='showmap' onclick="initialize(1.37422,103.945,'<h2>Tampines</h2>')">
  Show Map
</div> 
```

我刚刚尝试使用来自 java 的想法，我们可以尝试从 onclick 调用方法并检查它是否有效，令我惊讶的是它有效。

# php - 如何群发邮件？

> ID：11405810
> 
> 赞同：0
> 
> 时间：2012-07-10T02:27:39.250
> 
> 标签：php, mysql, email

我有一个基于浏览器的游戏服务器，但配置不正确。三天内有 420 人加入，但由于 mysql 崩溃和加载时间慢而全部离开。

我升级了 mysql 并将服务器配置为在低内存上运行。现在它超级快速且防撞。然而，所有的球员都已经走了。

好消息是我有一个包含 420 封电子邮件的数据库。我可以告诉他们回来奖励他们。谁能给我看一个 php-mysql 群发电子邮件脚本的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:29:56.030

您将不得不遍历一个针对选择所有用户电子邮件运行相同邮件程序的函数...

我的意思是说实话，如果 ISP 没有标记你或者你的托管服务提供商没有限制你，你会很幸运。

我实际上建议这样做慢于快。试着每分钟做一次，这样在 6 小时的周期内，它们都会被推出。

您可以在脚本中使用暂停或运行持久的 cron 作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:58:01.640

## 这两种解决方案都可以让您每月少花几分钱就不会被列入黑名单

### 为这几封电子邮件设置一个 mailchimp 帐户，它应该是免费的：

[http://mailchimp.com/pricing/free/](http://mailchimp.com/pricing/free/)

将您的邮件列表导入 mailchimp，然后将用户分成多个活动并将邮件发送到其中一个活动跟踪成功，然后调整并启动其他活动之一。

或者

### 使用 sendgrid 的 SMTP 服务。

[http://sendgrid.com/pricing.html](http://sendgrid.com/pricing.html)

使用 sendgrid，您只需将邮件脚本配置为通过 smtp 连接（PHP Mailer 可以轻松完成此操作）。每发送一千封电子邮件 0.10 美元...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:36:40.007

你不应该在离岸 VPS 上这样做，因为这实际上是邮件炸弹。只需在 php.ini 中使用 mail() 命令即可。

# php - 如何使用 preg_replace 删除 php 中不需要的字符？

> ID：11405811
> 
> 赞同：0
> 
> 时间：2012-07-10T02:27:57.817
> 
> 标签：php

我正在使用此代码

```
$output = preg_replace('/[^(\x20-\x7F)]*/','', $output); 
```

我的目标是删除此字符，但代码删除了所有不需要的字符。

请帮我删除那个字符。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:38:14.277

我使用[这个站点](http://code.cside.com/3rdpage/us/javaUnicode/converter.html)来查找该字符的代码。您的代码替换*不在*范围内的所有字符`\x20-\x7F`

我不知道如何使用该代码来做到这一点，但如果你只是把角色放在那里，它就可以工作。但要小心，如果您的文本编辑器不支持 Unicode，它可能会用任何内容替换它，因此当您保存文件时，它将无法工作。

```
echo preg_replace('/*/','', $str);
> ter but th
echo str_replace('', '',  $str);
> ter but th 
```

# java - 尝试从命令行调用 Java 程序时出现“无法识别为命令”消息

> ID：11405815
> 
> 赞同：0
> 
> 时间：2012-07-10T02:28:16.193
> 
> 标签：java, command, command-line-arguments

我无法从命令行调用我的 java 程序。我不断收到此消息：

> “InitArray 不是内部或外部命令、可运行程序或批处理文件。”

我可以使用 'dir' 命令读取目录并查看我正在尝试启动但无法通过此错误消息的程序！

这是我看到的： C:\Users\myName\Java_WorkSpace> 然后我输入： InitArray 5 0 4

同样，我可以在目录中看到这个程序，但我无法访问它。我究竟做错了什么？？？

这是程序代码：

```
public class InitArray 
{
public static void main(String[] args)
{
    // check number of command-line arguments
    if ( args.length != 3)
        System.out.println(
    "Error: Please re-enter the entire command, including\n" +
    "an array size, initial value and increment.");
    else
    {
    int arrayLength = Integer.parseInt(args[0]); 
    int[] array = new int[arrayLength];

    int initialValue = Integer.parseInt(args[1]);
    int increment = Integer.parseInt(args[2]);

    // calculate value for each array element
    for ( int counter = 0; counter < array.length; counter++ )
        array[counter] = initialValue + increment * counter;

    System.out.printf("%s%8s\n", "Index", "Value");

    // display array index and value
    for ( int counter = 0; counter < array.length; counter++ )
        System.out.printf("%5d%8d\n", counter, array[counter]);
    } // end else
} // end main
} // end class InitArray 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:30:33.623

您需要先键入`java`才能调用 Java 可执行文件。

尝试这个：

`java InitArray 5 0 4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:32:35.283

基本上在使用命令行 java 时，您必须使用 - `java`。

例如，您使用此命令从 CMD 调用您的应用程序 -

```
java InitArray 5 0 4 
```

如果您将文件捆绑在一个 jar 中，那么调用它的方式是 -

```
java -jar InitArray 5 0 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T15:23:19.297

我将假设您使用的是 Windows。

以下是解决问题的方法：

*   从 java 中获取 JDK。这个[链接](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)应该让你到下载页面。安装适合您系统的 Windows 32 或 64 位。安装它。
*   `java -version`通过在命令行中 运行，确保 jdk 在您的 PATH中。
    *   如果你得到**“'java' is not Recognized as an internal or external command, operable program or batch file”**，你需要将 jdk 添加到你的路径。
    *   导航到 C:/Program Files/Java/ *your_jdk* /bin 并查找**java.exe**。右键单击 java.exe，单击属性，然后复制文件路径。
    *   打开命令提示符，运行`SET PATH="%PATH%;path_to_java"`
        *   要粘贴到命令提示符，请右键单击左上角的图标，导航到编辑，然后粘贴
    *   再次运行`java -version`并检查它是否正常工作。
*   在 Windows 资源管理器中转到包含 java 源文件的目录。
*   按住shift，在文件夹内容旁边的空白处右击，点击“在此处打开命令窗口”。
*   运行 javac "name_of_your_java_file.java"
*   运行 java "same_name" 5 0 4

快乐的爪哇！顺便说一句，Eclipse 会为您完成所有这些工作。考虑使用 IDE。

# webkit - 本地存储教程？

> ID：11405816
> 
> 赞同：1
> 
> 时间：2012-07-10T02:28:39.150
> 
> 标签：webkit, google-chrome-extension, local-storage

我正在寻找学习如何在 chrome 扩展中使用本地存储的地方。

进一步来说：

我想使用选项和变量的本地存储来根据存储的变量运行不同的 css 内容脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:35:30.083

查看 chrome.* API 参考，尤其是[此处](http://code.google.com/chrome/extensions/storage.html)的 chrome.storage 部分。他们还提供了一些示例，[这里是一个](http://code.google.com/chrome/extensions/samples.html#sty).

# linux - struct hostent 是否有字段“h_addr”？

> ID：11405819
> 
> 赞同：21
> 
> 时间：2012-07-10T02:29:07.997
> 
> 标签：linux, hostent

我遇到了以下代码快照：

```
struct hostent *hp;
 hp = my_gethostbyname(localhost);
    if (hp == NULL) {
       ls_syslog(LOG_ERR, I18N_FUNC_FAIL, fname, "my_gethostbyname()");
       return -1;
    }
    strcpy(localhost, hp->h_name);

    memcpy(&addr, hp->h_addr, hp->h_length); 
```

我对最后一条语句感到很困惑，struct hostent 的声明是这样的：

```
struct hostent {
   char *h_name;       /* official name of host */
   char **h_aliases;   /* alias list */
   int h_addrtype;     /* host address type */
   int h_length;       /* length of address */
   char **h_addr_list; /* list of addresses */
}; 
```

它没有名为“h_addr”的字段，但代码确实可以编译，谁能告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T02:36:21.587

你错过了它下面的这一点：

```
#define h_addr h_addr_list[0] /* for backward compatibility */ 
```

所以不，没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-22T04:37:05.230

在[GNU 的文档页面](http://www.gnu.org/software/libc/manual/html_node/Host-Names.html)中，他们说

*“回想一下，主机可能连接到多个网络并且每个网络都有不同的地址”*

他们还提供了 a *`h_addr`*，它只是 vector 的第一个元素*`h_addr_list`*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-20T01:38:13.670

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-16T09:49:57.380

请注意，`h_addr`宏在某些系统上仅在您定义 `_BSD_SOURCE`和/或`_DEFAULT_SOURCE`包含头文件之前可见。

# asp.net - IIS 7 问题 - 服务器会话混合到不同的用户

> ID：11405821
> 
> 赞同：0
> 
> 时间：2012-07-10T02:29:22.823
> 
> 标签：asp.net, iis-7, webserver

请帮助解决我们在用户会话中的问题。登录并选择一个菜单后，它将落在不同的用户会话上。

正常的 URL 应该是这样的：http: [//www.company.com/mams/Sales/AccountForecasting.aspx](http://www.company.com/mams/Sales/AccountForecasting.aspx)

但它转到这个 URL： [http ://www.company.com/mams/(X(1)S(hm4occ2bbcefegbj1gws4kwf))/Sales/AccountForecasting.aspx](http://www.company.com/mams/(X(1)S(hm4occ2bbcefegbj1gws4kwf))/Sales/AccountForecasting.aspx)

请注意，URL 中有一个脚本，我不确定它来自哪里。

在我回收应用程序池并重新启动网站后，它会恢复正常，但在重新启动后 1 或 2 天后会再次出现此问题。

任何帮助将不胜感激....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:16:20.570

对我来说，这看起来像是一个无 cookie 的会话。很可能您运行的是较旧版本的 .net，而浏览器文件无法识别较新的浏览器，因此默认为无 cookie。

一种解决方法是将会话设置为始终使用 cookie。（配置会话链接中的 cookieless="UseCookies"）。

另一种选择是使用浏览器文件来修改问题浏览器的默认功能。这将需要了解哪些浏览器导致了问题。或者您可以将所有下层浏览器配置为默认支持 cookie。（见[http://www.hanselman.com/blog/FormsAuthenticationOnASPNETSitesWithTheGoogleChromeBrowserOnIOS.aspx](http://www.hanselman.com/blog/FormsAuthenticationOnASPNETSitesWithTheGoogleChromeBrowserOnIOS.aspx)）

关于无 cookie 会话 [http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

关于配置会话 [http://msdn.microsoft.com/en-us/library/h6bb9cz9.aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9.aspx)

# heroku - 在 Heroku 上部署错误 H14（没有运行 Web 进程）

> ID：11405826
> 
> 赞同：11
> 
> 时间：2012-07-10T02:30:28.717
> 
> 标签：heroku, cloud

我尝试在 Heroku 上创建简单的 java 应用程序。[我从http://samuelsharaf.wordpress.com/2011/11/06/create-a-simple-java-web-app-using-maven-and-upload-to-heroku/](http://samuelsharaf.wordpress.com/2011/11/06/create-a-simple-java-web-app-using-maven-and-upload-to-heroku/)一步一步地去做。

但是当我尝试在 heroku 项目上部署我的应用程序时，当我尝试查看日志时收到如下错误消息

```
$ heroku logs -t
2012-07-10T02:15:14+00:00 heroku[slugc]: Slug compilation started
2012-07-10T02:15:27+00:00 heroku[api]: Add shared-database:5mb add-on by anwar@meruvian.org
2012-07-10T02:15:27+00:00 heroku[api]: Release v2 created by anwar@meruvian.org
2012-07-10T02:15:27+00:00 heroku[api]: Add MAVEN_OPTS, PATH, JAVA_OPTS config by anwar@meruvian.org
2012-07-10T02:15:27+00:00 heroku[api]: Release v3 created by anwar@meruvian.org
2012-07-10T02:15:28+00:00 heroku[api]: Release v4 created by anwar@meruvian.org
2012-07-10T02:15:28+00:00 heroku[api]: Deploy cb1cfa2 by anwar@meruvian.org
2012-07-10T02:15:28+00:00 heroku[web.1]: State changed from starting to down
2012-07-10T02:15:28+00:00 heroku[slugc]: Slug compilation finished
2012-07-10T02:16:51+00:00 heroku[router]: Error H14 (No web processes running) -> GET fierce-ocean-9944.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

这是我在 heroku 上的网址：

[http://fierce-ocean-9944.herokuapp.com/](http://fierce-ocean-9944.herokuapp.com/)

那是什么错误？

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-10T11:16:13.397

您是否尝试过扩展您的一种流程类型？例如`heroku ps:scale web=1`

或者更确切地说，使用“heroku ps”检查您当前的网络计数是多少，请参阅[https://devcenter.heroku.com/articles/scaling](https://devcenter.heroku.com/articles/scaling)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-04T01:59:25.020

我一直遇到同样的问题。示例 python 应用程序运行良好，但我的没有。我登录仪表板并注意到我的应用程序的网络测功机计数显示为零。所以我在 web gui 上将它撞了起来（即，拉伸滑块小部件，直到你得到一个非零计数。）并且它起作用了。我的仪表板还显示 heroku ps:scale web=1 dyno 为零，我将其保留为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-18T16:14:53.650

您需要删除您的 ProcFile 并再次添加

```
git rm ProcFile –f 
```

再次将 ProcFile 添加到项目中

1.  检查拼写
2.  ProcFile 的内容结构
3.  ProcFile 不应包含任何扩展名。

之后执行正常的 git 程序，

```
 git add . 

    git commit –m “add procfile” 

    git push heroku master 
```

你会看见，

**Procfile 声明类型 -> web**

代替

**Procfile 声明类型->（无）**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-02T19:53:02.803

如果您使用容器来构建 Web 应用程序，`heroku.yaml`请在项目的根目录中创建如下文件：

```
build:
docker:
    web: Dockerfile
run:
    web: [PUT YOUR CMD COMMAND IN DOCKERFILE HERE] 
```

然后添加`heroku.yaml`到 git 存储库。您可以删除`Procfile`（可选）。最后部署您的存储库，如下所示：

```
git add .
git commit -m "Add heroku.yml"
heroku stack:set container -a [YOUR APP NAME]
git push heroku master 
```

如果您是第一次推送到 heroku，您应该`heroku git:remote -a [YOUR APP NAME]`先运行`git push heroku master`

# php - 原则 2：加载实体和子项计数

> ID：11405829
> 
> 赞同：1
> 
> 时间：2012-07-10T02:31:19.127
> 
> 标签：php, count, doctrine-orm

我有这两个实体：

**消息实体**

```
class Message
{
    /**
    * @ManyToOne(targetEntity="User")
    * @JoinColumn(name="author", referencedColumnName="id_user")
    */
    protected $author; 
```

**用户实体**

```
class User
{
    /**
     * @Id
     * @Column(type="integer", nullable=false, name="id_user")
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @Column(type="string", nullable=false)
     */
    protected $name; 
```

我需要获取用户的消息总数及其数据，以便 *回*显如下内容：

```
echo $user->getName() . " have {$user->totalOfMessage()}"; 
```

我现在可以在用户实体中建立关系以获取消息集合。但我不知道是否只需要获取尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:43:44.223

嗯，我找到了答案。至少一个不错的选择。

从 Doctrine 2.1 开始，您可以将关联标记为额外懒惰。这意味着调用 $user->getMessages()->count() 不会加载消息，它只会向数据库发出 COUNT 查询。

您可以在此处阅读有关额外惰性集合的信息：[https ://www.doctrine-project.org/projects/doctrine-orm/en/2.7/tutorials/extra-lazy-associations.html](https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/tutorials/extra-lazy-associations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T09:24:30.293

我最近一直在尝试让 EXTRA_LAZY 加载工作，并发现我认为文档中存在一个重大错误，如页面所示：-

[http://www.doctrine-project.org/docs/orm/2.1/en/tutorials/extra-lazy-associations.html](http://www.doctrine-project.org/docs/orm/2.1/en/tutorials/extra-lazy-associations.html)

我希望大多数 Doctrine 用户可能会意识到 fetch="EXTRA_LAZY" 需要放在 ManyToMany 关系的“拥有”端，但该示例显示注释被添加到包含“mappedBy”的行中，而不是拥有边？

通过将 fetch="EXTRA_LAZY" 指令添加到非拥有方，它会被完全忽略，因为我现在知道它应该是。我认为这应该在文档中更清楚地说明。

经过详尽的搜索后，我在任何地方都找不到任何解释这一点的文章，所以我想说这可能值得对文档进行修改？

在我们的用例中，它构成了一个特别密集的处理块，它使用了相当多的“包含”调用，并且由于超出内存限制而不断崩溃，进入一个快速进程，现在执行速度提高了几个数量级。

希望这些信息可以帮助那里的人...

# android - 无法过滤 2 行的列表视图

> ID：11405831
> 
> 赞同：0
> 
> 时间：2012-07-10T02:31:22.267
> 
> 标签：android

我正在尝试提供可搜索的列表视图。每个列表项都有一个名称和地址文本框，但我只想过滤名称。我当前的代码什么都不做，即根本没有过滤。有没有办法设置要过滤的列？

```
 //class variables
private SimpleCursorAdapter mAdapter;
private EditText filterText = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

       setContentView(R.layout.add_customer_listview);

       //listViewCustomers = (ListView) findViewById(R.id.list);
       buildingListViewAdaptor();
       setListAdapter(mAdapter);

       // set up the filter
       filterText = (EditText) findViewById(R.id.search_box);
       filterText.addTextChangedListener(filterTextWatcher);

}

private TextWatcher filterTextWatcher = new TextWatcher() {

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        mAdapter.getFilter().filter(s);
        Log.d(GlobalTools.ErrorCodes.INFO, "Searchtext="  + s.toString());
    }

    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    }

};

private void buildingListViewAdaptor(){

    //1\. Get the data
    CustomerLocationDataHandler clDataHandler = new CustomerLocationDataHandler(getContentResolver());
    Cursor cursor = clDataHandler.allCustomerLocations();
    clDataHandler=null;

    //2\. Build the adaptor
    mAdapter = new SimpleCursorAdapter(this, 
            R.layout.list_item_custom_font, // was list_item_custom_font
            cursor,  
            new String[]{MyobiliseData.Columns_CustomerLocations.CUSTOMER_NAME,MyobiliseData.Columns_CustomerLocations.CITY},
            new int[] {R.id.text1,R.id.text2}
            );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:49:48.907

查看这篇文章：[ListView、SimpleCursorAdapter、一个 EditText 过滤器——为什么它不做任何事情？](https://stackoverflow.com/questions/5322412/listview-simplecursoradapter-an-an-edittext-filter-why-wont-it-do-anything?rq=1)

我已经添加了类似的方法，它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T05:52:41.163

为了实现这一点，我需要在用户每次在搜索框中输入时重新查询数据库。我在这里包含了工作代码：

```
public class AddCustomerActivity extends ListActivity{

//constants
public static final String B4ME = "B4ME";  //Used when passing a boolean to this activity

// dialog constants
private static final int DIALOG_CHECKINSERT = 0;

//class variables
private SimpleCursorAdapter mAdapter;
private EditText filterText = null;
private boolean mInsertB4;   //if false ->means insert after
private Long mRunDetailID;
private Long mCustomerLocationId;
private int mSelectedItemPosition;
private long mSelectedItemId;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

       setContentView(R.layout.add_customer_listview);
       readVariablesPassedToThis();

       //listViewCustomers = (ListView) findViewById(R.id.list);
       buildingListViewAdaptor();
       setListAdapter(mAdapter);

       // set up the filter
       filterText = (EditText) findViewById(R.id.search_box);
       filterText.addTextChangedListener(filterTextWatcher);

       mAdapter.setFilterQueryProvider(new FilterQueryProvider() {
           public Cursor runQuery(CharSequence constraint) {

               return filterRefresh(constraint);
           }
       });

}

private TextWatcher filterTextWatcher = new TextWatcher() {

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        mAdapter.getFilter().filter(s);
    }

    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    }

};
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    super.onListItemClick(l, v, position, id);
    mSelectedItemPosition = position;
    mSelectedItemId = id;
    Log.d(GlobalTools.ErrorCodes.INFO, "Selected ItemPosition=" + mSelectedItemPosition + " and itemid ="+mSelectedItemId);
    showDialog(DIALOG_CHECKINSERT);

}

private void buildingListViewAdaptor(){

    //2\. Build the adaptor
    mAdapter = new SimpleCursorAdapter(this, 
            R.layout.list_item_custom_font, // was list_item_custom_font
            filterRefresh(null),  
            new String[]{MyobiliseData.Columns_CustomerLocations.CUSTOMER_NAME,MyobiliseData.Columns_CustomerLocations.CITY},
            new int[] {R.id.text1,R.id.text2}
            );

}

private Cursor filterRefresh(CharSequence constraint){
    //1\. Get the data
    CustomerLocationDataHandler clDataHandler = new CustomerLocationDataHandler(getContentResolver());
    Cursor cursor = clDataHandler.customerLocationsFilteredOn(constraint);
    clDataHandler=null;
    return cursor;
} 
```

# asp.net - 从几个超链接中识别 ajax 形式 mvc3 中的特定 id

> ID：11405832
> 
> 赞同：0
> 
> 时间：2012-07-10T02:31:25.690
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我目前正在做一个 MVC3 项目。我目前坚持这部分。

我有这个包含几个超链接的 Ajax 表单

```
@using (Ajax.BeginForm("Click", new AjaxOptions { UpdateTargetId = "showpage" }))
{
     <a href="#" id="0" onclick='document.forms[0].submit()'>Link 0</a>
     <a href="#" id="1" onclick='document.forms[0].submit()'>Link 1</a>
} 
```

我在控制器中有一个名为“Click”的函数，每当点击链接时就会触发。

```
public ActionResult Click(String id)
{
   // Action here
} 
```

但是，每当我单击其中一个超链接时，单击函数都会将 id 接收为“null”。我希望该功能知道进入控制器时单击了哪个超链接。需要帮助 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:56:32.657

据我了解，我***认为***您追求的是这样的：

**HTML**：

```
 <div id="showpage">
    </div><br />
    @using (Ajax.BeginForm("Click", "", new AjaxOptions { UpdateTargetId = "showpage" }, 
               new { @id = "myAjaxForm" }))
    {
        @Html.ActionLink("Link 0", "Click", null, new { @id = "Link0", @data_val = "0", @class = "links" })
        @Html.ActionLink("Link 1", "Click", null, new { @id = "Link1", @data_val = "1", @class = "links" })
        @Html.Hidden("id", "");
    } 
```

**脚本**：

```
<script>
    $(function () {
        $('a[class=links]').click(function (e) {
            e.preventDefault();
            $("input#id").val($(this).attr("data-val"));
            $('form#myAjaxForm').submit();
        });
    });
</script> 
```

**控制器**：

```
 public ActionResult Click()
    {
        var m = new MyModel();
        return View(m);
    }

    [HttpPost]
    public ActionResult Click(string id)
    {
        return Content("ID = " + id, "text/html");
    } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:15:33.487

我建议您为每个按钮使用单独的表单（这与经典的 WebForms 不同，这是您在 ASP.NET MVC 中不应该害怕的东西），当然使用提交按钮而不是超链接，这是语义上正确的元素来提交形式：

```
@using (Ajax.BeginForm("Click", new { id = "0" }, new AjaxOptions { UpdateTargetId = "showpage" }))
{
    <button type="submit" value="Link 0" />
}

@using (Ajax.BeginForm("Click", new { id = "1" }, new AjaxOptions { UpdateTargetId = "showpage" }))
{
    <button type="submit" value="Link 1" />
} 
```

现在在您的`Click`操作中，您将获得正确的 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T03:41:15.430

`name`您可以使用带有属性的提交按钮来代替超链接。

```
@using (Ajax.BeginForm("Click", new AjaxOptions { UpdateTargetId = "showpage" }))
{
   <input type="submit" name="action" value="0" />
   <input type="submit" name="action" value="1" />
}

public ActionResult Click(string action, ... )
{
   // Action here
} 
```

# asp.net - 在 VB.Net 中将字符串转换为 Guid

> ID：11405834
> 
> 赞同：5
> 
> 时间：2012-07-10T02:31:33.277
> 
> 标签：asp.net, vb.net, casting, guid

我有 Guid "UserID" ，它需要用 Session("UserID") 填充，它是一个 String ，但格式化为完美转换为 Guid。

如果我尝试这个，“无法将类型字符串转换为类型 Guid”

```
 Dim UserID As New Guid()
       If HttpContext.Current.Session("UserID") IsNot Nothing Then
          UserID = HttpContext.Current.Session("UserID")
       End If 
```

如果我尝试这个“无法将类型字符串转换为类型 Guid”

```
 Dim UserID As New Guid()
       If HttpContext.Current.Session("UserID") IsNot Nothing Then
          UserID = DirectCast(HttpContext.Current.Session("UserID"), Guid)
       End If 
```

这会将字符串完美地转换为 Guid，但在 If 语句之外无法访问它

```
 If HttpContext.Current.Session("UserID") IsNot Nothing Then
         Dim UserID As new Guid(HttpContext.Current.Session("UserID"))
       End If 
```

我不知道如何在 If 语句之外定义 UserID，然后有条件地分配它

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T02:35:04.390

试试这个

```
Dim UserID As New Guid()
If HttpContext.Current.Session("UserID") IsNot Nothing Then
    UserID = Guid.Parse(HttpContext.Current.Session("UserID").ToString())
End If 
```

以防万一您感到困惑，请考虑到，除非我的记忆失败，否则 Guid 构造器将生成一个“空”的 guid。如果要生成新的 guid，请使用[`Guid.NewGuid()`](http://msdn.microsoft.com/en-us/library/system.guid.newguid)

# css - html中textarea中行的等效div属性

> ID：11405835
> 
> 赞同：0
> 
> 时间：2012-07-10T02:31:58.353
> 
> 标签：css, html, razor, textarea

我可以知道 textarea 中 row 的等效 div 属性吗？

```
<textarea class="case-notes" rows="5">

<div class="case-notes"> 
```

基本上我想在 div 中显示一些文本，以便用户可以向下滚动。在 textarea 中禁用会删除向下滚动功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:42:07.013

您可以`<div>`以单位为单位给出高度，`em`这有点像`rows`a 的属性`<div>`，然后将其设置`overflow`为，`auto`这样您就可以滚动内容，如果它们高于`<div>`.

**HTML**

```
<div class="scroll">Lots of content here.</div> 
```

**CSS**

```
div.scroll { height:10em; overflow:auto; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:35:12.563

也许您正在寻找...

```
<div style="overflow: auto; height: 100px">Long text</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:33:42.800

使用空`<span></span>`来保持滚动？

# java - 设置 ListSelectionListener

> ID：11405843
> 
> 赞同：1
> 
> 时间：2012-07-10T02:32:50.310
> 
> 标签：java, swing, listselectionlistener

目前正在开发 Swing 应用程序，我需要使用 ListSelectionListener 来获取 JList 中当前选择的值。我知道如何将它添加到 JList 本身，但是无论我实现什么，编译器都找不到该符号。有什么建议么？

来源：

```
import javax.swing.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.*;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    public ClientApp()
    {
        this.setSize(750,380);
        this.setTitle("Honeydukes Muggle Ordering System");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel infoPanel = new JPanel(new CardLayout());
        JPanel invntryPanel = new JPanel();

        //Creating the array for the invntryPanel Jlist

        String[] candy = {"Acid Pops", "Bat's Blood Soup",
                          "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs", "Chocolate Skeletons",
                          "Chocolate Wands", "Choco-Loco", "Cockroach Clusters",
                          "Nougat", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Toffees", "Fizzing Whizzbees",
                          "Fudge Flies", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Peppermint Toads",
                          "Pink Coconut Ice", "Pixie Puffs",
                          "Pumpkin Fizz", "Salt Water Taffy",
                          "Shock-o-Choc", "Skeletal Sweets",
                          "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Sugared Butterfly Wings",
                          "Toothflossing Stringmints", "Tooth-Splintering Strongmints",
                          "Treacle Fudge", "Chocolates", "Wizochoc"};
        JList candyList = new JList(candy);
        candyList.setVisibleRowCount(18);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        ListSelectionListener sl = new ListSelectionListener() {
           public void valueChanged(ListSelectionEvent e) {
            if (e.getValueIsAdjusting() == false) {
                String currentCard = (String)candyList.getSelectedValue();
            }
           }
        };

        candyList.addListSelectionListener(sl);

        //Creating a scrollpane for the JList
        JScrollPane scroll = new JScrollPane(candyList, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                             JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        invntryPanel.add(scroll);

        //Creating the cards
        JPanel startCard = new JPanel(new BorderLayout());
        JPanel acidPopsCard = new JPanel();
        JPanel batsBloodSoupCard = new JPanel();
        JPanel bertieBottsCard = new JPanel();
        JPanel bloodPopsCard = new JPanel();
        JPanel cauldronCakesCard = new JPanel();
        JPanel charmChocCard = new JPanel();
        JPanel chocoballsCard = new JPanel();
        JPanel chocCauldronsCard = new JPanel();
        JPanel chocFrogsCard = new JPanel();
        JPanel chocSkeleCard = new JPanel();
        JPanel chocWands = new JPanel();
        JPanel chocolocoCard = new JPanel();
        JPanel roachClustersCard = new JPanel();
        JPanel nougatCard = new JPanel();
        JPanel crystalPineappleCard = new JPanel();
        JPanel droobleGumCard = new JPanel();
        JPanel explodeBonbonsCard = new JPanel();
        JPanel toffeesCard = new JPanel();
        JPanel fizzWhizCard = new JPanel();
        JPanel fudgeFliesCard = new JPanel();
        JPanel iceMiceCard = new JPanel();
        JPanel jellySlugsCard = new JPanel();
        JPanel liquorWandsCard = new JPanel();
        JPanel pepImpsCard = new JPanel();
        JPanel pepToadsCard = new JPanel();
        JPanel pinkCocoIceCard = new JPanel();
        JPanel pixiePuffsCard = new JPanel();
        JPanel pumpkFizzCard = new JPanel();
        JPanel saltTaffeyCard = new JPanel();
        JPanel shockChocCard = new JPanel();
        JPanel skeleSweetsCard = new JPanel();
        JPanel spindleSpidersCard = new JPanel();
        JPanel sugarQuillsCard = new JPanel();
        JPanel sugarWingsCard = new JPanel();
        JPanel flossMintsCard = new JPanel();
        JPanel splintMintsCard = new JPanel();
        JPanel treacleFudgeCard = new JPanel();
        JPanel chocolatesCard = new JPanel();
        JPanel wizochocCard = new JPanel();

        //Adding the cards to the infoPanel
        infoPanel.add(startCard, "Start");
        infoPanel.add(acidPopsCard, "Acid Pops");
        infoPanel.add(batsBloodSoupCard, "Bat's Blood Soup");
        infoPanel.add(bertieBottsCard, "Bertie Bott's Every Flavour Beans");
        infoPanel.add(bloodPopsCard, "Blood-flavoured Lollipops");
        infoPanel.add(cauldronCakesCard, "Cauldron Cakes");
        infoPanel.add(charmChocCard, "Charm Choc");
        infoPanel.add(chocoballsCard, "Chocoballs");
        infoPanel.add(chocCauldronsCard, "Chocolate Cauldrons");
        infoPanel.add(chocFrogsCard, "Chocolate Frogs");
        infoPanel.add(chocSkeleCard, "Chocolate Skeletons");
        infoPanel.add(chocWands, "Chocolate Wands");
        infoPanel.add(chocolocoCard, "Choco-Loco");
        infoPanel.add(roachClustersCard, "Cockroach Clusters");
        infoPanel.add(nougatCard, "Nougat");
        infoPanel.add(crystalPineappleCard, "Crystallised Pineapple");
        infoPanel.add(droobleGumCard, "Drooble's Best Blowing Gum");
        infoPanel.add(explodeBonbonsCard, "Exploding Bonbons");
        infoPanel.add(toffeesCard, "Toffees");
        infoPanel.add(fizzWhizCard, "Fizzing Whizzbees");
        infoPanel.add(fudgeFliesCard, "Fudge Flies");
        infoPanel.add(iceMiceCard, "Ice Mice");
        infoPanel.add(jellySlugsCard, "Jelly Slugs");
        infoPanel.add(liquorWandsCard, "Liquourice Wands");
        infoPanel.add(pepImpsCard, "Pepper Imps");
        infoPanel.add(pepToadsCard, "Peppermint Toads");
        infoPanel.add(pinkCocoIceCard, "Pink Coconut Ice");
        infoPanel.add(pixiePuffsCard, "Pixie Puffs");
        infoPanel.add(pumpkFizzCard, "Pumpkin Fizz");
        infoPanel.add(saltTaffeyCard, "Salt Water Taffy");
        infoPanel.add(shockChocCard, "Shock-o-Choc");
        infoPanel.add(skeleSweetsCard, "Skeletal Sweets");
        infoPanel.add(spindleSpidersCard, "Splindle's Lick'O'Rish Spiders");
        infoPanel.add(sugarQuillsCard, "Sugar Quills");
        infoPanel.add(sugarWingsCard, "Sugared Butterfly Wings");
        infoPanel.add(flossMintsCard, "Toothflossing Stringmints");
        infoPanel.add(splintMintsCard, "Tooth-Splintering Strongmints");
        infoPanel.add(treacleFudgeCard, "Treacle Fudge");
        infoPanel.add(chocolatesCard, "Chocolates");
        infoPanel.add(wizochocCard, "Wizochoc");

        //startCard building
        JLabel startLbl = new JLabel("<html><center>Welcome to the Honeydukes Muggle Ordering System!<br />Please select from one of our products to the left to begin!</center></html>");
        startCard.add(startLbl, BorderLayout.CENTER);

        this.add(invntryPanel, BorderLayout.LINE_START);
        this.add(infoPanel, BorderLayout.CENTER);
        this.setVisible(true);
    }
} 
```

错误：

```
ClientApp.java:54: error: local variable candyList is accessed from within inner
 class; needs to be declared final
                                String currentCard = (String)candyList.getSelect
edValue();
                                                             ^
Note: ClientApp.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:37:19.267

ListSelectionListener 是一个接口，您不能只使用构造函数来创建一个接口。您必须仅实例化一个具体类，可能为此实例化一个抽象内部类。这样做：

```
ListSelectionListener sl = new ListSelectionListener() {
   // place the necessary method(s) here as dictated by the interface
}; 
```

由于这是家庭作业，我将留给您确定需要哪些方法，但是使用 JList 的[教程和编写 ListSelectionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)的教程可以帮助您。

**编辑**
另外，您是否导入了所有需要的类？包括 ListSelectionListener 类？

IE，
`import javax.swing.event.ListSelectionListener;`

# iphone - Facebook 集成 (iphone)

> ID：11405845
> 
> 赞同：-3
> 
> 时间：2012-07-10T02:33:00.597
> 
> 标签：iphone, objective-c, xcode

我遵循了 Facebook 开发人员关于 facebook 集成的教程[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

但大部分代码都放在 App 委托文件中。登录后，我想被重定向到我的视图控制器，我将在其中发布我的帖子。我应该将代码从 appdelegate 文件传输到视图控制器吗？有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:32:27.877

在您的 App 委托中添加这 2 个方法。

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [ [[MyFacebookConnect sharedGameObject] facebook] handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [[[MyFacebookConnect sharedGameObject] facebook] handleOpenURL:url];
} 
```

# html - 网页设计：字体大小/布局/移动设备

> ID：11405846
> 
> 赞同：0
> 
> 时间：2012-07-10T02:33:09.367
> 
> 标签：html, css, layout, font-size

我有以下网页：

[http://www.deutschschule.net/wb/default.asp?s=kaufen](http://www.deutschschule.net/wb/default.asp?s=kaufen)

它应该可以在手机上运行。现在，它看起来应该，但存在以下问题：某些元素太宽。用户应该能够水平滚动，但这是不可能的。

我试过了：

1）删除： `<meta name="viewport" content="width=device-width" />`

字体变得非常小。用户可以放大，但这不是所希望的。

2）删除： `overflow-x: hidden;`

来自 a.aResult 元素，设计变得混乱，字体有点太小。

3）删除：

```
@media only screen and (max-device-width: 480px) {
    body {
       -webkit-text-size-adjust: none;
    }
} 
```

并且没有变化。我想知道这实际上应该做什么。

基本上，我想得到我现在看到的东西，但应该有水平滚动的可能性。因为最右边的信息不是那么重要，但应该仍然可以访问。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:36:54.017

在我看来，最好只垂直滚动，但是如果你想这样做，你只需要声明一个内容容器，就像`<div width="2000px"></div>`将空间扩展到右边界之外。

# javascript - Google Maps Apiv3 - 获取纬度经度的地理编码功能不起作用

> ID：11405849
> 
> 赞同：0
> 
> 时间：2012-07-10T02:34:02.003
> 
> 标签：javascript, google-maps-api-3, geocode

我将 javascript 从[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)修改为

```
var geocoder;
var postalArr = []; 
postalArr.push(249586);
postalArr.push(266751);
var map;

function initialize(){

 var myLatlng = new google.maps.LatLng(1.3667, 103.7500);
   var myOptions = {
     zoom: 13,
     center: myLatlng,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
   };

  if (postalArr) {
      for (var i = 0; i < postalArr.length; i++ ) {
        codeAddress(postalArr[i]);
     }
  }

  map = new google.maps.Map(document.getElementById('map_canvas'),
      myOptions);  
}

function codeAddress(postal) {
    geocoder.geocode( { 'postal': postal}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var markerE = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    }); 
```

该脚本进入 for 循环，但不运行 codeAddress 函数。我不确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:45:09.950

两件事情。

(1)需要在`geocoder`某处定义，我把它放在`initialize`

```
function initialize(){
  geocoder = new google.maps.Geocoder(); 
```

(2) 没有`postal`属性可以为地理编码器提供数据。有效请求是针对 a`latlng`或 an 的`address` [，如此处所述](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingRequests)。

所以至少你必须指定一个国家。我不确定 249586 是针对哪个国家/地区的，在[**我的演示**](http://jsfiddle.net/yV6xv/146/)中，我使用了两个加利福尼亚邮政编码，并在地址中添加了“，美国”。

```
geocoder.geocode( { 'address': postal + ", United States"}, 
```

# security - MSOLAP 连接字符串：是否可以作为特定用户访问 Cube

> ID：11405856
> 
> 赞同：2
> 
> 时间：2012-07-10T02:35:11.927
> 
> 标签：security, ssas

在 SQL Server Management Studio 中浏览 MS OLAP 多维数据集时，我可以单击更改用户按钮来更改我查看多维数据集的用户。这让我可以测试对数据各个部分的安全访问。

![在此处输入图像描述](../Images/3ca1cf8ec4d110dcfc5bf5173f57a2d5.png)

我想知道是否也可以在连接字符串中执行此操作？据我了解，我可以更改连接字符串中的**Roles**属性，但是由于从特定人的角度来看数据是锁定的，因此这无济于事。此外，多维数据集使用 Windows 安全性，因此特定的用户和密码组合也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:20:58.217

是的，通过连接字符串中的以下属性：

```
EffectiveUserName=DOMAIN\UserName 
```

**这仅适用于 SSAS 管理员**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:36:50.487

在您的 ConnectionString 中您可以使用`CustomData="Username"`，之后您可以像`UserName()`Function 一样使用它。请参阅此链接以获取有关 CustomData() 的更多信息 [http://www.mdxpert.com/Functions/MDXFunction.aspx?f=154](http://www.mdxpert.com/Functions/MDXFunction.aspx?f=154)

# drawing - libgdx 和 drwaing 应用程序

> ID：11405859
> 
> 赞同：1
> 
> 时间：2012-07-10T02:35:37.883
> 
> 标签：drawing, libgdx

我正在考虑使用 LibGdx 编写一个简单的绘图应用程序。用户手势将用于绘制矩形和其他形状。为这样的应用程序使用 Libgdx 是个好主意吗？如果是的话，有人可以指出一个示例，该示例显示了如何使用 libgdx 和手势绘制形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:11:43.353

LibGDX 测试中有一个示例可以进行绘图。LibGDX 的所有源代码（包括测试）都可以在这里找到：

[http://github.com/libgdx/libgdx](http://github.com/libgdx/libgdx)

至于形状，有一个形状渲染器，我从来没有用过，但你可以将它用于绘图游戏。祝你好运。

# objective-c - Objective-C/iOS：如何从 CoreData 中的属性中删除“值”？

> ID：11405863
> 
> 赞同：2
> 
> 时间：2012-07-10T02:36:22.110
> 
> 标签：objective-c, ios, ios5, core-data, ios5.1

Objective-c 非常新，CoreData 非常新 - 这个问题感觉非常简单，但尽管搜索了 1.5 小时，我还是无法弄清楚！寻找更伟大的思想。

**情况：** CoreData 中有一个实体（“AssetType”），并且该实体有一个属性（“标签”）。AssetType与另一个实体（“项目”）具有*一对多*关系。Items与 AssetType具有*一对一的关系，“label”当前可能有 3 个值 - “Electronics”、“Furniture”、“Jewelry”。*

**目标：**很简单，我想从所有对象中删除其中一个值。我更希望这一切一次性完成，而不是通过“许多”对象（eww）上的 for 循环，但说实话，我只是迷失在 CoreData 和语法中，所以无论你能提供什么都很棒。

**代码结构/背景：**如果需要，我可以粘贴更多内容，但我使用通用 UITableView + UINavigationItem editButtonItem 来执行编辑（如果重要，在 UIPopoverController 内） - 这就是删除方法的来源 - 我正在捕获它通过 tableView:commitEditingStyle:forRowAtIndexPath: 委托/协议方法。这部分不是问题——我知道把代码放在哪里，我只是迷失在 CoreData 中。:(

**扭曲：** AssetType 目前没有一个类 - 它纯粹作为 Item 类中的一个属性（以及 CoreData 中的一个单独实体）存在，到目前为止一直很好.. 但也许当我需要操纵属性时（例如删除他们！），这是我需要介绍自己的课程的时候吗？希望不是这样。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:51:27.307

或者，如果您真的想`AssetType`完全删除，您可以在模型中为从`AssetType`back 到的反向关系设置删除规则`Item`。在这种情况下，听起来你想要一个`Nullify`规则，

然后，您只需删除有`AssetType`问题的对象，该对象将自动取消下一次保存时`Items`具有该对象的所有链接。`AssetType`

![在此处输入图像描述](../Images/910f757bfc79bf665c6b0f6297443dc4.png)

```
// Get descriptions of our entities so we can create some.
NSEntityDescription *assetTypeEntityDescription = [NSEntityDescription entityForName:@"AssetType" inManagedObjectContext:self.managedObjectContext];
NSEntityDescription *itemEntityDescription = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:self.managedObjectContext];

// Create some asset types
AssetType *furnitureAssetType = [[AssetType alloc] initWithEntity:assetTypeEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];
AssetType *electronicsAssetType = [[AssetType alloc] initWithEntity:assetTypeEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];
AssetType *jewelryAssetType = [[AssetType alloc] initWithEntity:assetTypeEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];

furnitureAssetType.label = @"Furniture";
electronicsAssetType.label = @"Electronics";
jewelryAssetType.label = @"Jewelry";

// Create some items
Item *item1 = [[Item alloc] initWithEntity:itemEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];
item1.assetType = furnitureAssetType;

Item *item2 = [[Item alloc] initWithEntity:itemEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];
item2.assetType = electronicsAssetType;

Item *item3 = [[Item alloc] initWithEntity:itemEntityDescription insertIntoManagedObjectContext:self.managedObjectContext];
item3.assetType = jewelryAssetType;

[self.managedObjectContext save:nil];

NSLog(@"item1 asset type is:%@", item1.assetType.label);
// Output: item1 asset type is:Furniture

// Delete the furniture asset type
[self.managedObjectContext deleteObject:furnitureAssetType];

NSLog(@"item1 asset type is:%@", item1.assetType.label);
// Output: item1 asset type is:Furniture

// Save the changes..
[self.managedObjectContext save:nil];    

NSLog(@"item1 asset type is:%@", item1.assetType.label);
// Output: item1 asset type is:(null)
// Because of the delete rule when the furniture object is deleted relationships that pointed to it are nulled out.  
// The furniture asset type no longer exists.  
// There are now only 2 asset types in the persistent store. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:45:13.913

需要明确一点：您有两个实体，“资产类型”和“项目”，它们具有多对多关系。您希望所有项目同时切断与特定资产类型的连接，理想情况下，您不希望遍历项目。我得到了吗？

如果您的资产类型确实是独一无二的（例如，恰好有一个带有“家具”标签），那么您可以直接取消链接——Core Data 中的关系始终是双向的，并且从一侧取消链接会自动从另一侧取消链接. NSManagedObject 子类还具有访问器，可以在集合中的“对多”关系的末尾添加或删除事物。所以例如

```
[furnitureObject removeItems:furnitureObject.items]; 
```

这是假设您的资产类型实体有一个名为“items”的“to many”连接，该连接链接到项目。

否则，您可以运行一个谓词来获取字符串名称为“家具”的所有资产的列表，并遍历这些资产，我猜。

# apache - 如何更改 php.ini 文件中的包含路径

> ID：11405864
> 
> 赞同：2
> 
> 时间：2012-07-10T02:36:34.053
> 
> 标签：apache, php

我的 php.ini(C:\php) 文件包含路径

```
; Windows: "\path1;\path2"
include_path = ".;C:\php\extras;C:\php\extras\doctrine-dbal" 
```

但 phpinfo() 看起来像 include_path =.;C:\php\pear

我如何将包含路径更改为 include_path = ".;C:\php\extras;C:\php\extras\doctrine-dbal"

我确定不再有 php.ini 文件，并且我的 apache 网络服务器已重新启动

当我查看包含路径时使用

```
<?php
phpinfo();
?> 
```

![在此处输入图像描述](../Images/8eba26f1e2fa8acdb0c3c6b14f940d2e.png)

![在此处输入图像描述](../Images/684447fc68f6b321d53df6b71645a4e9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:40:54.333

您可以修改`php.ini`配置文件中的值，也可以在运行时使用[set_include_path](http://php.net/manual/en/function.set-include-path.php)函数。您的系统/服务器上可能有各种版本的`php.ini`配置文件。请参阅您`phpinfo()`的输出以了解您的实例使用的位置。

您的位置似乎符合`C:\php\php.ini`指令`Loaded Configuration File`，因此您需要修改该版本。

```
;;;;;;;;;;;;;;;;;;;;;;;;;
; Paths and Directories ;
;;;;;;;;;;;;;;;;;;;;;;;;;

; UNIX: "/path1:/path2"
;include_path = ".:/php/includes"
;
; Windows: "\path1;\path2"
;include_path = ".;c:\php\includes"
;
; PHP's default setting for include_path is ".;/path/to/php/pear"
; http://php.net/include-path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:39:23.510

确保您正在查看正确的`php.ini`.

除此之外，您可以使用[set_include_path](http://php.net/manual/en/function.set-include-path.php)函数在代码中设置包含路径。

# vb.net - JAX-WS 可以返回布尔值吗？

> ID：11405869
> 
> 赞同：1
> 
> 时间：2012-07-10T02:37:31.657
> 
> 标签：vb.net, jax-ws, axis2

我们使用返回布尔值的 Apache Axis 2 开发了 JAX-WS。在 vb.net 中使用此 Web 服务时，会引发以下错误：

“**没有为‘Public Sub MyMethod(Item as MyWebservice.Item, ByRef return As Boolean, ByRef returnSpecified as Boolean)’的参数‘returnSpecified’指定参数**”

我在 Jax-WS 中的方法需要单个对象参数，而在客户端代码中，它需要三个参数，如下所示：

```
Dim Myws As New Webservice.MyWebservice
Dim MyItem As New Myws.Item
Myws.myMethod(MyItem, Nothing, Nothing) 
```

然而，如果我们返回 String 类型，那么它的工作方式如下，一切正常：

```
Myws.myMethod(MyItem) 
```

请告诉我，我们是否可以使用 JAX-WS 返回布尔值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:43:10.753

您不能分配`Nothing`给简单类型。

```
Dim retValue1 as Boolean
Dim retValue2 as Boolean
Myws.myMethod(MyItem, retValue1, retValue2) 
```

# image - 如何让实际图像显示在我的页面上而不是文本上？

> ID：11405870
> 
> 赞同：0
> 
> 时间：2012-07-10T02:37:42.320
> 
> 标签：image, echo

```
<?php
require 'db.php';
include_once("header.php");
include_once("functions.php");

if(isset($_POST['search_term'])){
    $search_term = mysql_real_escape_string(htmlentities ($_POST['search_term']));

    if(!empty($search_term)){

        $search = mysql_query("SELECT users.username, users.id, tbl_image.photo, tbl_image.userid FROM users LEFT OUTER JOIN tbl_image ON users.id=tbl_image.userid WHERE users.username LIKE '%$search_term%' and users.business <> 'business'");

        $result_count = mysql_num_rows($search);

        $suffix = ($result_count != 1) ? 's' : '';

        echo '<div data-theme="a">Your search for <strong>' , $search_term ,'</strong> returned <strong>', $result_count,' </strong> record', $suffix, '</div>';

        while($results_row = mysql_fetch_assoc($search)){
            echo '<div data-theme="a"><strong>',$results_row['photo'], $results_row['username'],  '</strong></div>';

$following = following($_SESSION['userid']);

    if (in_array($key,$following)){
        echo ' <div action= "action.php" method="GET" data-theme="a">
        <input type="hidden" name="id" value="$key"/>
        <input type="submit" name="do" value="follow" data-theme="a"/>
</div>';

    }else{
        echo " <div action='action.php' method='GET' data-theme='a'>
        <input type='hidden' name='id' value='$key'/>
        <input type='submit' name='do' value='follow' data-theme='a'/>
        </div>";

}

}

        }

}

?> 
```

> 我如何获得在页面上显示的实际图像而不是图像的名称。我在文件系统中有一个名为 image 的文件夹下的图像。我如何在屏幕上回显该图像，或者如果回显不是正确的方法，您将如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:39:43.493

你的意思是这样吗？

```
echo '<img src="'.$results_row['photo'].'" width="80">'; 
```

# javascript - 免费存储用户数据

> ID：11405874
> 
> 赞同：0
> 
> 时间：2012-07-10T02:38:22.087
> 
> 标签：javascript, mysql, database, api, google-docs

我将创建一个用户登录的网站，以根据每个用户特定的方式组织网站信息，具体取决于他们在登录时可以设置/保存的设置。但他们不会添加内容或上传任何内容. 所以我想，这不会是很多数据 - 每个用户只有几行文本。

所以，首先，我想使用一些免费的东西来存储用户数据。Dropbox 或 Google 文档，我自己的电脑……我不知道。

然后，当我获得足够多的用户使投资物有所值时，就为更合法的解决方案付费。

我的问题是，与此同时，存储该用户数据的最佳方式是什么？我应该使用 javascript 和 Google docs API 来读取/写入电子表格吗？

当我的用户群增长到足够大并且需要将所有这些转移到更大的系统时，最方便的是什么？

还有其他我应该考虑的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:41:50.043

考虑使用像 MySQL 这样的轻量级 DBMS。如果您愿意，您可以使用您的计算机在本地提供它，但不要指望它会处理大量流量。最好找一台旧电脑作为服务器使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:41:58.560

您的托管解决方案是什么？许多包括免费的 mySQL 数据库，这应该足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:41:04.060

我建议使用 sqlite3 或其他东西进行数据库设置。它们可以是非常小的文件并且易于管理。从长远来看，sqlite3 并不是一个很好的选择。假设你吸引了很多用户，你会想要转移到一个更强大的数据库。

# javascript - 更改 Div 的内容以循环浏览广告或内容或其他内容

> ID：11405875
> 
> 赞同：0
> 
> 时间：2012-07-10T02:38:25.113
> 
> 标签：javascript, jquery, html

我有一个正在开发的网站，并且主页上有多个 Div。我在页面右侧有一个标有 right_bar2 的 div，我希望它每 5-10 秒更改一次。整个 div 将只是一个链接的图像。基本上，我认为最简单的方法是创建一个 div，其中包含一堆隐藏的 div，然后可能是一些 javascript 一次取消隐藏一个 div，然后再次隐藏它并取消隐藏另一个。但是我不确定最好的方法。我查看了一堆示例，但无法使其 100% 正确工作。

感谢您的任何建议；）

JsFiddle 的例子会很棒！

我尝试了类似[http://jsfiddle.net/VENLh/4/](http://jsfiddle.net/VENLh/4/)的东西，但在我的 rails 环境/设置中，它破坏了很多东西，所以我想要更干净、更容易的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:25:40.570

在这种情况下我能看到的唯一问题是，如果您要使用重图像，加载可能需要一些时间。因为图像将在您第一次显示时开始加载。所以为此我会说你应该保持不透明度0并在页面加载时加载图像。

并且还可以通过使用不透明度来消除一个 div 被隐藏而另一个 div 变得可见的延迟。将一个的不透明度从 100 降低到 0%，将其他的不透明度从 0 增加到 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:20:33.383

[我在这个 fiddle](http://jsfiddle.net/VENLh/6/)中对其进行了一些清理，但是如果您说原始版本在原始环境中破坏了多个东西，那么这可能无法解决它们。它具体破坏了什么？

我清理的是避免需要手动计算 JS 的 DIV 或担心它们的 ID。代码非常简单：

```
$(function() {
    var $divs = $('div', '#container'),
        total = $divs.length,
        counter = 0,

        showDiv = function() {
            $divs.stop().hide();
            $($divs[counter]).show('fast');
            counter = (conter + 1) % total;
            setTimeout(showDiv, 3000);
        };
    $divs.hide();
    showDiv();
}); 
```

我没有执行一项可能应该完成的优化。您可能应该在每个 DIV 上缓存 jQuery 选择器的结果。使用 jQuery 语句很容易做到`map`，但我不想在这里搅浑水。

# python - 如何使用 Pastebin API 获取一些字符串并将它们放入 Pastebin？

> ID：11405877
> 
> 赞同：0
> 
> 时间：2012-07-10T02:39:13.540
> 
> 标签：python, api, pastebin

我现在正在做一个项目，它涉及为几个不同的项目保存很多名称、价格等。我希望能够将所有这些项目放入 Pastebin 粘贴中。

如果重要的话，我正在使用 Python 2.7（我认为`urllib.urlopen`适用于 Python 2.x，`urllib.request.urlopen`适用于 Python 3.x）

这是我现在的代码：

```
#-*- encoding: UTF-8 -*-
import urllib

pastebin_vars = {'api_dev_key':'57fe1369d02477a235057557cbeabaa1','api_option':'paste','api_paste_code':'testing pastebin right now'}
response = urllib.urlopen('http://pastebin.com/api/api_post.php'[, urllib.parse.urlencode(pastebin_vars)[, read().encode('UTF-8')]]) 
```

是格式有问题还是什么？这是我在运行 .py 文件时遇到的错误：

```
AttributeError: 'module' object has no attribute 'parse' 
```

我试过玩代码。自从我得到了`AttributeError`，我拿出了说的部分`.parse`并得到了这个错误：

```
NameError: Name 'read' is not defined 
```

之后，我取出了说的部分`read().`并得到了这个错误：

```
NameError: Name 'encode' is not defined 
```

然后我叹了口气，但删除了说`,encode('UTF-8')`执行代码后没有任何返回的部分。

那么这是什么一回事？我究竟做错了什么？=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:00:37.257

采用`urllib.urlencode()`

```
#-*- encoding: UTF-8 -*-
import urllib

pastebin_vars = {'api_dev_key':'57fe1369d02477a235057557cbeabaa1','api_option':'paste','api_paste_code':'testing pastebin right now'}
response = urllib.urlopen('http://pastebin.com/api/api_post.php', urllib.urlencode(pastebin_vars))
url = response.read()

>>> print url
http://pastebin.com/4wfzATQR 
```

# jquery - jQuery UI 中的基本拖放方法

> ID：11405878
> 
> 赞同：-2
> 
> 时间：2012-07-10T02:39:15.760
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-draggable

这里有没有人有关于在 jQuery UI 中拖放元素的基本教程，比如图像、文本等。我​​非常感谢你的帮助，我真的需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:48:45.757

You can go through following samples. it contains 25 ways to do this.

[http://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html](http://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:40:03.303

把自己打昏：

[http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/](http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:54:38.270

由于您已经在使用 jQuery ，您可以考虑使用[jQuery UI](http://jqueryui.com/demos/droppable/#default)库。实现起来很简单

```
<div class="demo">      
  <div id="draggable" class="ui-widget-content">
     <p>Drag me to my target</p>
  </div>
  <div id="droppable" class="ui-widget-header">
     <p>Drop here</p>
  </div>    
</div>
 <script>
$(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
        drop: function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                    .html( "Dropped!" );
        }
    });
});
</script> 
```

# jquery-ui - 无法同时使用可调整大小和可拖动的 jQuery UI

> ID：11405881
> 
> 赞同：1
> 
> 时间：2012-07-10T02:39:39.310
> 
> 标签：jquery-ui, jquery

我试图让放置的元素在父容器中既可拖动又可调整大小。

这是我的CSS：

```
.toolitem {padding:5px 10px;background:#ececec;border:1px solid silver}.labelitem {width:114px;padding:10px 5px;color:#222;background:#fff;border:1px solid silver} 
```

这是我的html：

```
<header>
 <ul>
     <li><div id="atool" class="toolitem droppable">A</div></li>
     <li><div id="btool" class="toolitem droppable">B</div></li>
 </ul>
 <div class="clear"></div></header><section id="container"/> 
```

这是我的 JS：

```
$(".toolitem").draggable({
    opacity:1,
    tolerance:'fit',
    helper:'clone'
});
$("#container").droppable({
    accept:'.droppable',
    drop: function (event, ui) {
        // Check for new or already dropped element
        var dropped = ui.draggable.data("dropped");
        if (dropped == null && dropped != "1") {
            // Create new element only once
            var label = $('<div class="labelitem droppable">[Label]</div>');
            // Set flag as dropped
            label.data("dropped", "1");
            // Make new element draggable within parent
            label.draggable({ containment: 'parent', grid: [2, 2], helper: 'original' });
            // Make new element resizable within parent
            label.resizable({ containment: 'parent' });
            // Append new element to parent
            label.appendTo(this);
        }
    }
}); 
```

上面的代码执行得很好，除了删除的 div 不可调整大小。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:44:35.510

我自己解决了。谷歌搜索一个小时后，我发现我缺少以下内容

```
<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/base/jquery-ui.css" /> 
```

它是调整 div 样式大小所必需的。现在一切都按预期工作。但是，奇怪的是它从未在 jQueryUI 文档中提及，或者我错过了它。

# wordpress - Wordpress 永久链接结构 301 重定向

> ID：11405885
> 
> 赞同：0
> 
> 时间：2012-07-10T02:40:34.113
> 
> 标签：wordpress, redirect, permalinks

目前我正在使用 Wordpress v3.4 并使用以下永久链接自定义结构

```
/%category%/%postname%-%post_id%.html 
```

现在我想从中删除 .html 所以我确实喜欢这个

```
/%post_id%/%postname%/ 
```

我想 301 从旧结构重定向到新结构。

有没有人有解决方案或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:47:57.103

老实说，你不应该放扩展名，老实说，我很惊讶 Wordpress 允许这样做。但是，如果您更改永久链接结构，通常它会更新所有以前的帖子和页面。这里不是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:20:50.337

只需使用[**Redirection WordPress 插件**](http://wordpress.org/extend/plugins/redirection/)来管理 301 重定向，跟踪 404 错误，并通常整理您网站可能存在的任何松散端。

# php - 不自然的 PHP 数组

> ID：11405886
> 
> 赞同：0
> 
> 时间：2012-07-10T02:40:48.110
> 
> 标签：php, arrays, sorting

我在 PHP 中有一个简单的字符串数组。这些字符串表示不同距离的家庭之间可能发生的关系。它看起来像这样：

```
0 => 'Unknown',
1 => 'Parent',
2 => 'Grandparent',
3 => 'Sibling',
4 => 'Child',
5 => 'Grandchild',
6 => 'Spouse',
7 => 'Self',
9 => 'Step Parent',
10 => 'Step Sibling',
11 => 'Step Child',
etc... 
```

这个数组很好用，但是我遇到了一个问题，我希望能够以纯粹的自定义方式对这些项目进行排序（特别是从配偶/兄弟姐妹开始，以最远的关系结束，例如 X- in-law），但我也希望随着时间的推移添加列表。我最初的想法是简单地对它们进行排序，因为它们需要在数组中进行排序，但这不允许我在以后添加关系（尽管我怀疑这是否会发生，我宁愿安全也不要抱歉）。我能想出的最佳解决方案（在我看来似乎是一个不错的解决方案）是制作一个简单的 PHP 对象，该对象将包含关系的名称和像这样的任意“排序”值`new Relation('Unknown', 0);`。问题是，您似乎无法在使用`X => Y`语法，因为我在尝试编写此代码时遇到语法错误：

```
 0 => new Relation('Unknown', 0),
    1 => new Relation('Grandparent', 1),
    etc... 
```

有没有办法可以工作或可能是更好的解决方案？在这一点上，我可能必须在第一次请求它时（在 getter 中）使用 Array pushes 生成数组，然后存储它，但我宁愿让它格式化得很好。我只是运气不好？

编辑 - 澄清：现在的键被用作数据库中的存储值。本质上，我们将数组用作其他语言的枚举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:51:05.610

You could write this in a array. What happens to be a syntax error is if you wrote that in a class property.

You can't do this:

```
class A {
  public $relations = array(
    0 => new Relation('Unknown', 0),
    1 => new Relation('Grandparent', 1)
  );
} 
```

But you could do the init in the constructor.

```
class A {
   public $relations;
   public function __construct() {
      $this->relations = array(
         0 => new Relation('Unknown', 0),
         1 => new Relation('Grandparent', 1)
      );
   }
} 
```

***PS:*** if the keys is just 0,1,... you could omit them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:08:00.330

使用数组作为映射，例如relationship_name => relationship_distance。如果更方便，可以做relationship_distance => relationship_name。使relationship_distance值任意，中间有间隙，以便以后可以添加中间距离。例如：

```
'Sibling' => 1,
'Parent' => 10,
'Grandparent' => 20,
'Greatgrandparent' => 30,
'Uncle' => 13,
'BrotherInLaw' => 17, 
```

然后，您可以按键或值对地图进行排序，并根据需要添加新条目。

# javascript - 为什么在 each() 中未定义 jQuery 选择器属性？

> ID：11405894
> 
> 赞同：1
> 
> 时间：2012-07-10T02:41:38.677
> 
> 标签：javascript, jquery

给定以下代码，为什么选择器属性在第一个实例中起作用，而在第二个实例中不起作用？它们不是 jQuery 对象吗？

```
<span class='tst'>span</span>​

var tst = $('.tst');
console.log(tst.selector); 
// prints '.tst'

$('.tst').each(function() { console.log(this.selector);});
// prints undefined​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T02:42:50.997

`this`，在`.each()`循环的上下文中，不是 jQuery 对象，因此该`selector`属性是未定义的。

您需要先使其成为 jQuery 对象：`$(this).selector`

但是，应该注意的是，该`selector`属性将在`.each()`循环内返回一个空字符串。

**编辑**

如果您绝对需要 中的`selector`属性`.each()`，一种选择是缓存您的选择器：

```
var cached = $('.tst');

cached.each(function() { 
    console.log(cached.selector); // Will display ".tst"
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:43:06.070

`this != $(this)`

在您的第一种情况下`tst`是对 jQuery 对象的引用，但在第二种`this`情况下只是相应的 DOM 元素。

但是，在`.each()`循环中， .selector 属性不可用。要访问“.tst”，您可以这样做`$(this).attr("class")`（当您使用类选择器时）——尽管如果您已经在每个中使用它，您可以事先将它缓存在一个变量中。

请注意，这将返回该元素的所有类，因此如果它有多个类，您可以稍后对其进行解析。

根据您的确切描述，最好的解决方法是：

```
var $tst = $(".tst");
$tst.each(function() {
    console.log($tst.selector); //prints .tst
}); 
```

但是我看不出你真的需要这样做的任何理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:46:18.187

**工作演示** [http://jsfiddle.net/wA6Yv/](http://jsfiddle.net/wA6Yv/) **或** [http://jsfiddle.net/a3CYR/2/](http://jsfiddle.net/a3CYR/2/)

> 这！= $（这个）

如果你热衷：[jQuery：'$(this)' 和 'this' 之间有什么区别？](https://stackoverflow.com/questions/1051782/jquery-this-vs-this)

**代码**

```
var tst = $('.tst');
console.log(tst.selector);
// prints '.tst'
$('.tst').each(function() {
    alert($(this).text());
});
// prints undefined 
```

# python - ImportError：没有名为 twisted 的模块

> ID：11405897
> 
> 赞同：8
> 
> 时间：2012-07-10T02:41:47.487
> 
> 标签：python, pydev

我对 python 和扭曲很陌生，我尝试运行一个简单的扭曲脚本但失败了。

我的环境：

MacOX 10.7.2 + Python 2.7.1 + Twisted 11.0.0 + eclipse + PyDev

名为 test.py 的脚本：

```
from twisted import reactor
reactor.run() 
```

我尝试在终端中运行它，一切正常。

然后我打开 eclipse 并创建了一个新的 PyDev 项目，然后添加一个名为 test.py 的 py 文件并输入上面的代码。

当我尝试运行它时，出现如下错误：

```
Traceback (most recent call last):
File "/Users/user/Documents/workspace/TwistedDemo/test.py", line 2, in <module>
from twisted import reactor
ImportError: No module named twisted 
```

然后我检查了 PYTHONPATH 并在外部库选项卡中添加了“扭曲的源文件夹”，但错误仍然存​​在。（没有改变）

希望有人可以在这里帮助我，在此先感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:52:10.600

有几件事可以在这里尝试 -

1.  由于您的环境是 Mac OSX。我从 Xcode 安装了命令行工具，解决了这个问题。[Xcode 4.4 及更高版本安装命令行工具](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)

2.  为了完整起见。如果这在 Ubuntu 上，那么`apt-get install python-twisted`通常可以工作。

3.  从你的日食中把它放在你的python脚本中 -

    python -c '导入系统；打印 sys.path'

    这告诉了当你`import something`. 如果你在那里没有找到扭曲的路径，那么像这样将它添加到这个 -`sys.path.append(twisted_dir_path)`

4.  最后，如果以上所有方法都没有帮助。`type -p python`在 shell 中会告诉你你正在使用哪个版本；我主要是`/usr/bin/`它或它的一些变体。

    那么`/usr/bin/python2.7 -c 'from twisted.internet.protocol import Factory,Protocol'`应该会成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T20:04:54.060

这在我身上发生了很多次，但我以前想通了。基本上，如果你的 mac 上有太多版本`python`，Aptana Studio 会因为某种原因感到困惑，所以请确保你的`twisted`安装使用与命令行相同的 python（即使你已经添加了 twisted 到 Aptana）。稍后我会详细介绍

好的，我认为这就是你的做法：

1.  抓取已经正确安装的python的python路径，使用this
    `import sys`
    `print sys.path`
    并且只抓取基本路径，没什么特别的。
2.  去`Aptana-preferences-PyDev-Interpreter-Python`
3.  然后只需添加一个新的`interpreter`（在我的情况下，我只是调用它`python1`并且 set 是第一个。如果这不起作用，那么只需`PYTHONPATH`在其下方设置一个新的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-11T10:21:21.140

您需要在扭曲之前安装增量

```
pip install --upgrade incremental
pip install Twisted 
```

这应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T03:51:05.087

您应该在 Eclipse 中设置正确的 PYTHONPATH，如下所示：

1.  右键单击您的项目。
2.  选择*属性*
3.  选择*pyDev-PYTHONPATH*
4.  *在外部库*中添加您的 twised

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T11:18:34.863

不知道你是怎么安装twis​​ted的，你试过easy_install还是pip，还是手动安装？

如果您想确保它已正确安装，请尝试打开终端，输入 python，然后“import twisted”。如果它返回没有错误，那么它已安装。您可能需要设置 PYTHONPATH 变量以包含源文件夹。

然后，由于您在 Eclipse 中使用 pydev，因此每次添加新库时都需要刷新配置。

在 Mac 上，这是在首选项 -> PyDev -> Interperter-Python 下

我发现删除我的配置并重新添加它最有效，因为它可以获取所有内容。但是你可以点击新文件夹（选择带有**init** .py 的文件夹），或者新的 egg，如果它是一个 easy_install egg（一个 .egg 文件是一个 zip 文件，如果它被解压缩，你会看到一个 EGG-INFO您要选择的文件夹的子目录中的文件夹）。*

# c++ - 何时在多人游戏循环中发送数据包？

> ID：11405900
> 
> 赞同：-2
> 
> 时间：2012-07-10T02:41:58.087
> 
> 标签：c++, multiplayer

我正在编写我的第一个多人游戏循环，现在我的循环包括：

1.  逻辑
2.  处理键盘输入
3.  处理鼠标输入
4.  画

在循环中的哪个点最好将数据包发送到服务器？

我当前的游戏循环：

```
 while (!key[KEY_ESC]) {
        while (speed_counter > 0) {
            update();
            keyboard();
            mouse();
            speed_counter--;
        }
        if(game_time - old_time >= 10) {
            fps = frames_done;
            frames_done = 0;
            old_time = game_time;
        }
        draw();
        frames_done++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:45:13.493

您可能希望在收到输入后发送数据包（在这种情况下是键盘和鼠标），以便可以同时更新所有移动。`update other players`如果我正确理解你的问题，你会想要一个步骤 3.5

# android - Galaxy Nexus 未出现在设备选择器对话框中

> ID：11405902
> 
> 赞同：3
> 
> 时间：2012-07-10T02:41:58.797
> 
> 标签：android

大家好，我想将我的galaxy nexus连接到eclipse，这样我就可以使用真实设备调试我的程序，但是，即使我在开发人员模式下点击了usb调试选项，我的galaxy nexus也没有出现。谁能帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T02:57:32.827

**您使用的是哪个操作系统？**

如果在**Windows**上：

*   你安装了[ADB](http://en.wikipedia.org/wiki/Android_Debug_Bridge)和[FastBoot](http://en.wikipedia.org/wiki/Fastboot)吗？如果你这样做了，你的设备会出现`adb devices`吗？
*   如果没有，请按照[此处](http://developer.android.com/sdk/win-usb.html)或[此处](http://developer.android.com/tools/extras/oem-usb.html)的说明进行操作。
*   重新连接您的设备，打开控制台窗口并输入：`adb devices`。如果您的设备在输出中列出，Eclipse 也会选择它。
*   对于三星提供的固件和驱动程序，请查看[此处](http://www.samsung.com/us/support/downloads/SCH-I515MSAVZW)。

如果在**Linux**上：

*   遵循[本](http://forum.xda-developers.com/showthread.php?t=883032)教程。您不一定要解锁引导加载程序。只要在 中`adb devices`添加设备标识行后显示您的设备`udev`，然后使用`udev`重新启动`sudo service udev restart`，一切都应该是好的。

[这](http://www.theandroidsoul.com/how-to-install-adb-and-device-drivers-automatically-works-for-windows-linux-mac/)是另一个声称可以[`ADB`](http://en.wikipedia.org/wiki/Android_Debug_Bridge)在 Windows、Linux 和 Mac 上自动安装的教程。我自己没试过。因此，`Knives-&-Forks`在执行脚本之前窥视脚本可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:47:52.433

确保已安装 USB 驱动程序。说明可以在[这里找到。](http://developer.android.com/tools/extras/oem-usb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T00:15:51.050

您需要从三星安装 Galaxy Nexus 驱动程序

[Galaxy Nexus USB 驱动程序](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)

# entity-framework - 实体框架 ExecuteSqlCommand 返回对象列表

> ID：11405904
> 
> 赞同：1
> 
> 时间：2012-07-10T02:42:09.317
> 
> 标签：entity-framework, dbcontext

我对 EF Code First 感到沮丧，因为不支持视图映射而不是表。所以我要从 ExecuteSqlCommand 中检索视图数据类。但我无法弄清楚如何做到这一点？有什么帮助吗？

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Ignore<m_box>();
    }
protected override void Seed(eBagasiContext context)
    {
        context.Database.ExecuteSqlCommand(m_boxView.GetInitView(),new object[]{});
     }
public static class m_boxView
{
    public static string GetInitView()
    {
        return "CREATE VIEW m_box " +
            "AS " +
            "SELECT AgencyRef.Code AS ModuleCode, " +                
            "Price.Scale, "+
            "Price.Amount "+
            "FROM Price " +
            "LEFT JOIN AgencyRef " +
            "ON (Price.Code = AgencyRef.Code) " +
            "WHERE LEFT(Price.Code,1)='C'";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:59:12.230

如果要将视图映射到实体，则必须执行以下几个步骤：

*   首先将其映射为表（所以不要忽略`m_box`）并让 EF 创建`m_box`表。
*   在您的`Seed`方法中，您必须删除该创建的表并创建具有相同名称的视图。

# php - 在 Facebook Graph API 中为“/me/photos”调用设置偏移量/限制

> ID：11405905
> 
> 赞同：2
> 
> 时间：2012-07-10T02:42:16.103
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

这将返回一个按时间顺序排列的数组。如何为查询指定偏移量/限制？

```
$photos = $facebook->api('me/photos'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:28:29.120

订单是根据`created_time`自己的参数检查来验证的

`http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fphotos%3Ffields%3Dcreated_time%2Cupdated_time`

每个 JSON 响应末尾的分页属性允许您遍历集合。

```
"paging": {
    "previous": "https://graph.facebook.com/me/photos?fields=created_time\u00252Cupdated_time&value=1&redirect=1&limit=25&since=1341554766", 
    "next": "https://graph.facebook.com/me/photos?fields=created_time\u00252Cupdated_time&value=1&redirect=1&limit=25&until=1311564489"
  } 
```

例如要获取所有照片，

```
if($user_id) {
    $the_photos = array();

    $your_photos = $facebook->api("me/photos");

    while ($your_photos['data'])
    {
        $the_photos = array_merge( $the_photos, $your_photos['data'] );

        $paging = $your_photos['paging'];
        $next = $paging['next'];

        $query = parse_url($next, PHP_URL_QUERY);
        parse_str($query, $par);

        $your_photos = $facebook->api(
                "me/photos", 'GET', array(
                'limit' => $par['limit'],
                'until'  => $par['until'] ));
    }

    echo count($the_photos);
} 
```

如果您仍然对此感到不舒服，那么只需切换并使用`offset`and `limit`，它们也被允许作为参数。`offset`使用每次遍历的限制增加参数。

# python - pyParallel python交换引脚

> ID：11405906
> 
> 赞同：1
> 
> 时间：2012-07-10T02:42:46.300
> 
> 标签：python, parallel-processing

所以我对并行端口很陌生，我一直在这里研究这段代码->> [http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyparallel/examples/lcd.py?revision=49&view =标记](http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyparallel/examples/lcd.py?revision=49&view=markup)

我对这里发生的事情感到困惑

```
def reveseout(self, x):
    r = ((x & (1<<0) and 1) << 7) |\
        ((x & (1<<1) and 1) << 6) |\
        ((x & (1<<2) and 1) << 5) |\
        ((x & (1<<3) and 1) << 4) |\
        ((x & (1<<4) and 1) << 3) |\
        ((x & (1<<5) and 1) << 2) |\
        ((x & (1<<6) and 1) << 1) |\
        ((x & (1<<7) and 1) << 0)
    #print "%02x" % r, "%02x" %x
    self.p.setData(r) 
```

我知道这是反转引脚，但我不理解语法本身以及它的字面意思。
任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T02:49:27.507

Let's take it piece by piece: `1<<n` is a 1 shifted n places to the left, so these values give us 0x01, 0x02, 0x04, 0x08, 0x10, etc, the bits in a byte. `x & (1<<n)` is x masked with that bit, so we get the individual bits of x. `x & (1<<n) and 1` is tricky: if the bit is set in x, then it will evaluate as the second argument, and it will be 1\. If the bit is not set in x, then it will be zero. So `x & (1<<n) and 1` is 1 if the bit is set in x, 0 if not.

`(x & (1<<n) and 1) << m` takes that zero or one and shifts it to the left m places, so it essentially copies the n'th bit and puts it in the m'th bit. The eight lines use 0 and 7 for n and m, then 1 and 6, then 2 and 5, etc, so we get eight values. The first is the 0th bit in the 7th place, then the 1th bit in the 6th place and so on. Finally, they are all or'ed together with `|` to build a single byte with the bits reversed.

# nhibernate - Fluent Nhibernate 使用复合键映射 Legacy DB

> ID：11405910
> 
> 赞同：1
> 
> 时间：2012-07-10T02:43:17.883
> 
> 标签：nhibernate, fluent-nhibernate

我在使用旧版 Oracle DB 开发的应用程序中使用 Fluent NHibernate（我对它相当陌生）。数据库具有由外键和数据库生成的列组成的复合键。通过使用表名和其他外键部分之一调用 DB 函数来提供生成的列。生成的复合键部分不是唯一的，我无法更改。生成的键部分也经常用作其他表的外键。

如果我创建实体映射来指定数据库中的复合键，那么我们不能使用任何身份生成策略，这会破坏工作单元

如果我创建仅将生成的列指定为主键的实体映射，那么我可以使用 trigger-identity 来生成 id，并且我得到了工作单元，但是当我想要更新或访问一个子集合：键的其他部分不包含在 WHERE 语句中。

谁能给我任何关于如何进行的建议？

*   如果我坚持使用映射复合键，我可以扩展 nhibernate 以输出 SQL 以使用触发器身份吗？如果是这样，你能建议一个起点吗？
*   如果我映射单个列键，我可以在 HasMany 映射和更新的 WHERE 子句中包含其他属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:18:14.770

不幸的是，正如您已经发现的那样，根本不支持此设置。

我的建议是手动执行 INSERTS（例如，使用自定义 SQL）。是的，这打破了 UoW，但也是如此`identity`。

# javascript - 向正则表达式添加异常

> ID：11405911
> 
> 赞同：1
> 
> 时间：2012-07-10T02:43:34.093
> 
> 标签：javascript, regex, replace

我正在使用我偶然发现的这段代码来使用 jquery '清理' url：

```
.replace(/[^\w ]+/g,'') // and
.replace(/ +/g,'-') 
```

第一个删除非字母数字字符，而第二个将空格变成破折号

我的问题是：在我的情况下，有没有办法排除一个字符， # ，首先`.replace()`？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:44:21.107

```
.replace(/[^\w#\/ ]+/g,'') // and 
```

# sql - 如何通过电子邮件发送查询输出

> ID：11405912
> 
> 赞同：0
> 
> 时间：2012-07-10T02:44:09.000
> 
> 标签：sql, stored-procedures, smtp, sql-server-2000

我有一个基本查询，我想通过电子邮件发送结果。如何在查询级别执行此操作？因此，如果我的查询是：

```
SELECT 
    Store_Id, Paid_Out_Amount, Paid_Out_Comment, 
    Paid_Out_Datetime, Update_UserName
FROM Paid_Out_Tb
WHERE (Store_Id = 1929) OR
      (Paid_Out_Amount > 50) AND 
      (Paid_Out_Datetime BETWEEN 
             CONVERT(DATETIME, '2012-06-01 00:00:00', 102) AND 
             CONVERT(DATETIME, '2012-06-30 00:00:00', 102)) 
```

我将如何通过电子邮件发送输出？我有一个通过 SMTP 发送电子邮件的程序，参数是`@From, @To, @Subject`和`@body`......哪个有效.. 我如何让正文成为查询的结果？

```
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO

CREATE PROCEDURE [dbo].[sp_SQLNotify] 
   @From varchar(100) ,
   @To varchar(100) ,
   @Subject varchar(100)=" ",
   @Body varchar(4000) = "Test"
/*********************************************************************

This stored procedure takes the above parameters and sends an e-mail. 
All of the mail configurations are hard-coded in the stored procedure. 
Comments are added to the stored procedure where necessary.
Reference to the CDOSYS objects are at the following MSDN Web site:
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cdosys/html/_cdosys_messaging.asp

***********************************************************************/ 
   AS
   Declare @iMsg int
   Declare @hr int
   Declare @source varchar(255)
   Declare @description varchar(500)
   Declare @output varchar(1000)

--************* Create the CDO.Message Object ************************
   EXEC @hr = sp_OACreate 'CDO.Message', @iMsg OUT

--***************Configuring the Message Object ******************
-- This is to configure a remote SMTP server.
-- http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cdosys/html/_cdosys_schema_configuration_sendusing.asp
   EXEC @hr = sp_OASetProperty @iMsg, 'Configuration.fields("http://schemas.microsoft.com/cdo/configuration/sendusing").Value','2'
-- This is to configure the Server Name or IP address. 
-- Replace MailServerName by the name or IP of your SMTP Server.
   EXEC @hr = sp_OASetProperty @iMsg, 'Configuration.fields("http://schemas.microsoft.com/cdo/configuration/smtpserver").Value', '10.1.1.10' 

-- Save the configurations to the message object.
   EXEC @hr = sp_OAMethod @iMsg, 'Configuration.Fields.Update', null

-- Set the e-mail parameters.
   EXEC @hr = sp_OASetProperty @iMsg, 'To', @To
   EXEC @hr = sp_OASetProperty @iMsg, 'From', @From
   EXEC @hr = sp_OASetProperty @iMsg, 'Subject', @Subject

-- If you are using HTML e-mail, use 'HTMLBody' instead of 'TextBody'.
   EXEC @hr = sp_OASetProperty @iMsg, 'TextBody', @Body
   EXEC @hr = sp_OAMethod @iMsg, 'Send', NULL

-- Sample error handling.
   IF @hr <>0 
     select @hr
     BEGIN
       EXEC @hr = sp_OAGetErrorInfo NULL, @source OUT, @description OUT
       IF @hr = 0
         BEGIN
           SELECT @output = '  Source: ' + @source
           PRINT  @output
           SELECT @output = '  Description: ' + @description
           PRINT  @output
         END
       ELSE
         BEGIN
           PRINT '  sp_OAGetErrorInfo failed.'
           RETURN
         END
     END

-- Clean up the objects created.
   EXEC @hr = sp_OADestroy @iMsg

   PRINT 'Mail Sent!'

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

这是我用来发送邮件的过程...有效...我只想在其中添加一个点以发送上面的查询结果...这可以在过程中轻松完成吗?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:23:02.803

Use the SQL Server Powershell pack. An example (with detailed explanation) of using it to obtain output is [here](http://www.mssqltips.com/sqlservertip/1684/powershell-support-in-sql-server-2008-with-the-invoke-sqlcmd-cmdlet/).

(The above is taken from [this SO answer](https://stackoverflow.com/a/553190/1180926), but to clarify something s/he says: SQL Server 2008 client components is required (Express should be fine), but it can work with SQL Server 2000 databases ([source](http://technet.microsoft.com/en-us/library/cc281962%28v=sql.100%29.aspx)).)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:20:38.150

您还可以将变量用于直接循环连接。请参阅[https://stackoverflow.com/a/4447564/1180926](https://stackoverflow.com/a/4447564/1180926)（尽管您将使用制表符和换行符而不是 HTML 代码）。

然后，您只需相应地更改您的查询，将其存储在 中`@Body`，您就完成了！

# c++ - 如何在lua代码中重载c++成员函数

> ID：11405913
> 
> 赞同：2
> 
> 时间：2012-07-10T02:44:13.883
> 
> 标签：c++, lua, overloading

我想编写一些 lua 代码以在 C++ 中过载回调成员函数，我该怎么做？我使用 tolua++ 作为胶水库。谢谢您的答复。

# java - SQL 语句（排序依据）

> ID：11405916
> 
> 赞同：1
> 
> 时间：2012-07-10T02:44:26.057
> 
> 标签：java, mysql

我需要在最晚日期之前订购我的数据。

此 SQL 语句正在**运行**

```
final String selectSql = "select * from questionnaire where userprofileid=" + userProfileID ; 
```

此 SQL 语句****不工作****

```
final String selectSql = "select * from questionnaire where userprofileid=" + userProfileID +"ORDER by datecreated desc"; 
```

> 错误消息：
> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行的“by datecreated desc”附近使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T02:45:27.433

您需要在 ORDER 之前添加一个空格：

```
final String selectSql = "select * from questionnaire where userprofileid=" + userProfileID +" ORDER by datecreated desc"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:45:38.970

请尝试在 ORDER BY 之前留一个空格。`" ORDER BY datecreated desc"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T02:48:42.210

最终字符串应如下所示：

```
final String selectSql = "select * 
                          from questionnaire 
                          where userprofileid=" + userProfileID + 
                          " ORDER by datecreated desc"; // add a space
                                                        // after the double 
                                                        // quote 
```

# bash - 图像文件太小。我希望它增加

> ID：11405918
> 
> 赞同：2
> 
> 时间：2012-07-10T02:44:31.417
> 
> 标签：bash, jpeg

有没有办法在 bash 中填充或“解压缩”图像（JPEG）？我的意思是，例如，如果图像大小为 1.5MB，我希望它填充到 5MB。图像的最终质量并不（那么）重要。如果此填充在图像旁边留下一个黑色矩形，则它是可以接受的。

编辑：下面的唯一答案正确猜测这是一个 XY 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:50:56.973

A quick experiment indicates that just appending zero bytes to a `*.jpg` image file still allows it to be viewed.

On Unix, I used a command like this:

```
( cat original.jpg ; dd if=/dev/zero bs=1024 count=1024 ) > bigger.jpg 
```

I suspect that any arbitrary data, not just zeros, would have the same result.

(Using an image editor to append a black rectangle to an image probably wouldn't increase the file size by much; compression works really well on blocks of solid color.)

I can hardly imagine a good reason to do this, though.

**Update :**

Based on your comment, this answers the question you asked, but almost certainly won't address your actual problem. You haven't given us enough information to guess how to do that.

This is a classic [XY problem](https://meta.stackexchange.com/a/66378/167210).

# php - 无尽的 If-Else 语句

> ID：11405919
> 
> 赞同：0
> 
> 时间：2012-07-10T02:44:55.993
> 
> 标签：php, sqlite

我正在尝试更新记录，我发现我将做很多 If-Else 语句进行检查。例如，现在我的表单中有 4 个上传按钮。如果文件已附加，则不会有任何上传按钮。但它更新到数据库，它会显示错误，因为用户没有附加任何文件。也许我会在我的代码中解释出来并给出更清晰的画面。

```
Code for my form:
<form id = "update" action ="update.php">
//Code is repeated for all upload and download buttons just that one is for test, assign, and papers
<?php
if ($Attached== "No")
{
            echo "<select name=\"Test\" id=\"Test\">";
            echo "<option value=\"No\" selected=\"selected\">No</option>";
            echo "<input name=\"Attached[test]\" id=\"Test\" type=\"file\"/>";
            echo "</select>";

}
else
{ 
         Button to download the document
            $fullpath = "./documents/."$Test"; 
        echo "<input type=\"hidden\" name=\"fullpath\" value=\"$fullpath \"/>";
        echo "<input type=\"submit\" name=\"download\" value=\"download\"/>";
}
?>
</form>

Update.php code:
//So if i wish to update into my database sqlite3, i'll need to check as follows:
$test = $_POST['Attached[test]'];
$ID = 1;
$DB = = new PDO('sqlite:database/Test.DB');
If ($test != "")
{
    $update = $DB->prepare('update test set test =?, assign =?, papers =?);
    $execute = $update-> execute (array($test, $assign, $paper));

}
else if ($test == $test)
{
    $update = $DB->prepare('update test set assign =?, papers =? where ID=?);
    $execute = $update-> execute (array($assign, $paper));
}
else
{
    moveuploaded_files();
} 
```

所以我的问题是如何缩短我的 ife-else 语句以检查数据库中是否已经存在单个值并且不更新该特定列。请指教谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:50:41.747

Code for my form:

```
<form id = "update" action ="update.php">
<?php
if ($Attached== "No")
{
            echo "<select name=\"Test\" id=\"Test\">";
            echo "<option value=\"No\" selected=\"selected\">No</option>";
            echo "<input name=\"Attached[test]\" id=\"Test\" type=\"file\"/>";
            echo "</select>";

}
else
{ 
            Button to download the document
            echo "<input type=\"submit\" name=\"download\" value=\"download\"/>";
}
?>
</form> 
```

Update.php code:

```
<?php
$test = $_POST['Attached[test]'];
$DB = new PDO('sqlite:database/Test.DB');
if (!empty($test))
{
    $update = $DB->prepare('update test set test =?, assign =?, papers =? WHERE idk = you tell me');
    $execute = $update-> execute (array($test, $assign, $paper));

}
else
{
    moveuploaded_files();
}
?> 
```

use empty()

you dont need the $test == $test case becuase if the same then it will just update it to be the same.

# java - XML DOM createchild takes Node instread of Element

> ID：11405926
> 
> 赞同：0
> 
> 时间：2012-07-10T02:45:20.793
> 
> 标签：java, xml

I am creating a XML using DOM as below using online examples,

```
DocumentBuilderFactory docfac= DocumentBuilderFactory.newInstance();
    DocumentBuilder docb= docFactory.newDocumentBuilder();

    Document doc = docb.newDocument();

    // root
    Element rootElement = (Element)doc.createElement("TEST");

    doc.appendChild(rootElement); //Compiler error
... 
```

appenchild takes Node object, not Element object. I was trying to use Node but, it seems like there is no methods exposed to set attribute, therefore, I can't really use node.

Any help would be really appreciate it.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:04:16.057

请验证您已导入的包：`import org.w3c.dom.Document`和`import org.w3c.dom.Element;`更改`docfac.newDocumentBuilder()`；

无需类型转换，`org.w3c.dom.Element`因为`doc.createElement("TEST")`返回的对象`org.w3c.dom.Element`是`org.w3c.dom.Node`.

```
org.w3c.dom.Element rootElement = doc.createElement("TEST");
doc.appendChild(rootElement) 
```

# java - Java Generic Linked List ADT

> ID：11405930
> 
> 赞同：1
> 
> 时间：2012-07-10T02:46:13.460
> 
> 标签：java, adt

Going through some past Java exercises so I can improve my programming in general and I've been stuck on this for quite a while. I'm going to post all of the source that's required, since this project is quite large and there's a lot of interfaces and subclasses that just offer to confuse.

```
public class Board {
public final static char NOUGHT = 'O';
public final static char CROSS = 'X';
public final static char EMPTY = ' ';

// Each cell is indexed as follows:
// 1 2 3
// 4 5 6
// 7 8 9
private char[][] grid;         // a matrix to store the positions of the board
private int numOfMarks;        // number of moves made on the board
private int lastMarkPosition;  //position of last move maode in the board

public Board() {
    grid = new char[3][3];
    for (int row = 0; row < 3; row++) {
        for (int col = 0; col < 3; col++) {
            grid[row][col] = EMPTY;
        }
    }
    numOfMarks = 0;
    lastMarkPosition = 0;
}

//post: Returns true if the board is finished.
//      A board is finished because either there is a winner or the board is full.
public boolean isFinished() {
    return numOfMarks == 9 || getWinnerMark() != EMPTY;
}

//post: Records the position of the last mark made on the board. 
public void setLastMarkPosition(int lastPosition){
    lastMarkPosition = lastPosition;
}   

//post: Returns the position of the last mark
public int getLastMarkPosition(){
    return lastMarkPosition;
}

//post: Returns the mark ('X' or 'O') of the winner player if a winning condition exists in the board,
//      returns EMPTY otherwise.
public char getWinnerMark() {
    for (int i = 0; i < 3; i++) {
        // check if there are three in a horizontal row
        if (grid[i][0] != EMPTY && grid[i][0] == grid[i][1]
                && grid[i][1] == grid[i][2]) {
            return grid[i][0];
        }

        // check if there are three in a vertical row
        if (grid[0][i] != EMPTY && grid[0][i] == grid[1][i]
                && grid[1][i] == grid[2][i]) {
            return grid[0][i];
        }
    }

    // check if there are three in a diagonal row
    if (grid[1][1] != EMPTY
            && (grid[1][1] == grid[0][0] && grid[1][1] == grid[2][2] || grid[1][1] == grid[0][2]
                    && grid[1][1] == grid[2][0])) {
        return grid[1][1];
    }

    // otherwise, return EMPTY as there is no winner
    return EMPTY;
}

//post: Sets the given mark at the given position in the board
public void setMark(int pos, char mark) throws GameException {
    if (numOfMarks == 9) {
        throw new GameException("attempted to set mark on a full board.");
    }

    if (pos < 1 || pos > 9) {
        throw new GameException(
                "attempted to set mark in a wrong position: " + pos);
    }

    if (mark != NOUGHT && mark != CROSS) {
        throw new GameException("attempted to set an invalid mark: "
                + String.valueOf(mark));
    }

    // perform board update
    int row = (pos - 1) / 3;
    int col = (pos - 1) % 3;

    if (grid[row][col] != EMPTY) {
        throw new GameException(
                "attempted to set mark on a non-empty position: "
                        + pos);
    } else {
        grid[row][col] = mark;
        numOfMarks++;
    }
}

//post: Returns the mark that is at a given position in the board
public char getMark(int pos) {
    return grid[(pos-1)/3][(pos-1)%3];
}

//post: If the grid is not full, calculates whose turn is, based on the marks in the grid.
//      Returns EMPTY if the board is already full.
public char getTurn() {
    if (numOfMarks == 9) {
        return EMPTY;
    } else if (numOfMarks % 2 == 0) {
        // by default, CROSS should go first
        return CROSS;
    } else {
        return NOUGHT;
    }
}

//post: Copy the board and returns it
public Board makeCopy() {
    Board copy = new Board();
    for (int row = 0; row < 3; row++) {
        for (int col = 0; col < 3; col++) {
            copy.grid[row][col] = this.grid[row][col];
        }
    }
    copy.numOfMarks = this.numOfMarks;

    return copy;
}

//post: Prints the given board
public static void display(Board board) {
    for (int row = 0; row < 3; row++) {
        for (int col = 0; col < 3; col++) {
            System.out.print(" ");
            char mark = board.grid[row][col];
            if (mark != EMPTY) {
                System.out.print(mark);
            } else {
                System.out.print((row)*3+(col+1));
            }
            System.out.print(" ");
            if (col < 2) {
                System.out.print("|");
            }
        }
        System.out.println();
        if (row < 2) {
            System.out.println("-----------");
        }
    }
} 
```

GameTreeInterface

```
public interface GameTreeInterface {

//post: Returns the board at the root of the game tree. 
public Board getRootItem();

//post: Expands the game tree fully by adding all possible boards in the game.
//      It uses a recursive auxiliary method.
public void expand();

//pre:  The game tree is fully expanded.
//post: Assigns a score to each board in the game tree. 
//      It uses a recursive auxiliary method.
public void assignScores();

//pre:  Each board in the game tree has a score.
//post: Computes an array of positions (1..9) optimal available moves. 
//      These are the last mark positions in the children boards that have the highest score. 
public int[] BestMoves();

//post: Returns the number of boards stored in a game tree.
//      It uses a recursive auxiliary method.
public int size();
} 
```

GameTree

```
public class GameTree implements GameTreeInterface {

private GameTreeNode root; // reference to the root board of a game tree

public GameTree(Board board) {
    this.root = new GameTreeNode(board);
}

// post: Returns the board at the root of a game tree.
public Board getRootItem() {
    return root.getBoard();
}

// post: Returns the number of boards stored in a game tree.
// It uses a recursive auxiliary method.
public int size() {
    return sizeTree(root) + 1;
}

// post: Returns the number of boards stored in a game tree, excluded
// the root.
private int sizeTree(GameTreeNode node) {
    int total = 0;

    for (int i = 1; i < node.numberOfChildren(); i++) {
        if (node.getChild(i).getBoard() != null)
            total++;
    }

    return total;
}

// post: Expands the game tree fully by adding all possible boards in
// the game.
// It uses a recursive auxiliary method.
public void expand() {
    expandTree(root);
}

// post: Expands the game tree from the given node by adding
// all the possible moves that the computer and the user player
// can make, until the game is finished, from the given node onwards.
private void expandTree(GameTreeNode node) {
    if (!node.getBoard().isFinished()) {
        char c = node.getBoard().getTurn();

        for (int i = 1; i < 9; i++) {
            if (node.getBoard().getMark(i) == Board.EMPTY) {
                GameTreeNode n = new GameTreeNode(node.getBoard());
                n.getBoard().setMark(i, c);
                n.getBoard().setLastMarkPosition(i);
                node.getChildren().add(2, n);
                expandTree(n);
            }

        }
    }
}

// pre: The game tree is fully expanded.
// post: Assigns a score to each board in the game tree.
// It uses a recursive auxiliary method.
public void assignScores() {
    char player = (root.getBoard()).getTurn();
    assignScoresTree(root, player);
}

// post: Assigns scores to each board in a game tree for the computer
// player.
private void assignScoresTree(GameTreeNode node, char player) {

    Board board = node.getBoard();

    if (board.isFinished()) {
        // base case of recursion

        // score 3 for a winning board for the given player,
        // score 2 for a draw baord,
        // score 1 for a losing board for the given player
        char winner = board.getWinnerMark();
        if (winner == Board.EMPTY) {
            // this is a draw!
            node.setScore(2);
        } else {
            node.setScore(winner == player ? 3 : 1);
        }
    }

    else {

        // tries to assign the scores to all the children boards
        // first, recursively
        int minScore = Integer.MAX_VALUE;
        int maxScore = Integer.MIN_VALUE;

        GenericList<GameTreeNode> children = node.getChildren();

        for (Iterator<GameTreeNode> it = children.iterator(); it
                .hasNext();) {

            GameTreeNode child = it.next();
            assignScoresTree(child, player);

            // keeps track of the maximum and minimum scores
            // of the children boards so far
            int childScore = child.getScore();
            if (childScore > maxScore)
                maxScore = childScore;
            if (childScore < minScore)
                minScore = childScore;
        }

        // Assigns score to the current board in the recursion
        // according to the player's turn
        if (board.getTurn() == player) {
            // get the maximum score as the player wants to
            // win
            node.setScore(maxScore);
        } else {
            // get the minimum score (as the player wants
            // the opponent to lose;)
            node.setScore(minScore);
        }
    }
}

// pre: Each board in the game tree has a score.
// post: Computes an array of positions (1..9) optimal available moves.
// These are the last mark positions in the children boards that have
// the highest score.
public int[] BestMoves() {

    int maxScore = Integer.MIN_VALUE;
    GenericList<GameTreeNode> highestScoreBoards = new GenericList<GameTreeNode>();
    GenericList<GameTreeNode> children = root.getChildren();

    for (Iterator<GameTreeNode> it = children.iterator(); it
            .hasNext();) {

        GameTreeNode nextBoard = it.next();
        int curScore = nextBoard.getScore();

        if (maxScore < curScore) {

            maxScore = curScore;
            highestScoreBoards.clear();
            highestScoreBoards.add(1, nextBoard);

        } else if (maxScore == curScore) {
            highestScoreBoards.add(1, nextBoard);
        }
    }

    int[] moves = new int[highestScoreBoards.size()];
    for (int i = 0; i < moves.length; i++) {
        Board board = (highestScoreBoards.get(i + 1))
                .getBoard();
        moves[i] = board.getLastMarkPosition();
    }

    return moves;
}
} 
```

GameTreeNode

```
public class GameTreeNode{
private GameTreeItem item; // includes the board object and the score
private GenericList<GameTreeNode> children;   //list of gameTreeNodes of possible                        next moves.

public GameTreeNode(Board newBoard) {
    this.item = new GameTreeItem(newBoard);
    this.children = new GenericList<GameTreeNode>();
}

//post: Returns the board stored in a GameTreeNode
public Board getBoard() {
    return item.board;
}

//post: Returns the children stored in a GameTreeNode, as a list of GameTreeNodes
public GenericList<GameTreeNode> getChildren(){
    return children;
}

//post: Returns the score of the board
public int getScore() {
    return item.score;
}

//post: Sets the score of the board to be equal to the given score 
public void setScore(int score) {
    item.score = score;
}

//post: Removes all the children
public void removeChildren(){
    children = null;
}

//post: Returns the number of children
public int numberOfChildren(){
    return children.size();
}

//post: Returns the child at a given position in the list of children, as a 

 GameTreeNode 
public GameTreeNode getChild(int i){
    return children.get(i);
}

//Inner class for storing a board and the score 
private class GameTreeItem{     

private Board board;
private int score;

public GameTreeItem(Board newBoard) {
    this.board = newBoard;
    score = 0;
}
} 
```

Apologies for the rather large amount of code but I don't think I could explain the problem without having everything here. There's still a lot of extra code for the GenericList but it's a pretty straightforward implementation for a generic linked list.

If anyone does go through this code, my problem is in the GameTree class with the sizeTree() method. I offered a solution but I think it's far too simple to be correct. As I understand it, a GameTreeNode includes a GameTreeItem containing the current state of play and a reference to a linked list of GameTreeNode. However, my specification says that I have to use recursion to implement this method but I'm not sure how. Would my method work since it goes through every single child of the root and checks for the boards?

I know it's a long shot but if anyone can offer any help I'd really appreciate it!

# ruby - 遍历哈希时，得到“TypeError：无法将字符串转换为整数”

> ID：11405934
> 
> 赞同：0
> 
> 时间：2012-07-10T02:46:42.867
> 
> 标签：ruby, typeerror

我有一个哈希（真正的要大得多）

```
parsed = {"follower_count" => 500, "something_else" => "etc", "xyz" => "abc"} 
```

和一个看起来像这样的班级

```
 class Company
   attr_accessor :followers

   def initialize(thehash)
      @followers = thehash['follower_count']
   end
 end 
```

所以最后有这段代码会在我担心其他任何问题之前抛出错误

```
>> parsed.map {|t| Company.new(t)}
TypeError: can't convert String into Integer
  from (irb):7:in `[]'
  from (irb):7:in `initialize'
  from (irb):12:in `new'
  from (irb):12
  from (irb):12:in `map'
  from (irb):12:in `each'
  from (irb):12:in `map'
  from (irb):12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:58:44.993

当您遍历 Hash 时，该块获取一个数组作为其参数，并且该数组包含（按顺序）Hash 中一对的键和值。所以，在这里：

```
parsed.map { |t| ... } 
```

`t`实际上是一个二元数组，通常写成：

```
parsed.map { |k, v| ... } 
```

然后，在里面，当它实际上是一个二元素数组时`Company#initialize`，您将其视为 Hash。`t`

你根本不想使用`map`on `parsed`，你只想使用`Company.new(parsed)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:59:10.907

`map`在散列上使用时，应在块中使用两个变量：

```
parsed.map {|k,v| .. use k and v here .. } 
```

您似乎根本不想迭代`parsed`，您想将其用作以下参数`Company.new`：

```
Company.new(parsed) 
```

# php - 为 CakePHP 控制器单元测试设置头文件

> ID：11405936
> 
> 赞同：1
> 
> 时间：2012-07-10T02:46:59.343
> 
> 标签：php, unit-testing, cakephp, cakephp-2.0

我正在为控制器编写一些单元测试，其中响应行为略有不同，具体取决于`$this->request->is('ajax')`. 我一直在查看[测试控制器的文档](http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers)，但似乎找不到模拟通过 AJAX 发出的请求的方法。

有没有办法发送标头，`testAction()`以便我可以设置 X-Requested-With 标头？

**编辑：**您可以通过编辑超全局变量来解决这个问题。任何人都有一个不那么hacky的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:56:15.630

一种解决方案是在测试期间手动声明必要的环境变量：

```
$_ENV['HTTP_X_REQUESTED_WITH'] = 'XMLHttpRequest';
// Run your AJAX test...
unset($_ENV['HTTP_X_REQUESTED_WITH']); 
```

# asp.net - 运行 .NET 3.5 的网站不能使用不属于 ISO-2 规范的功能

> ID：11405937
> 
> 赞同：0
> 
> 时间：2012-07-10T02:47:16.863
> 
> 标签：asp.net, visual-studio-2010, linq, .net-3.5

我经常收到这个错误：

> 无法使用功能“ *{在此处插入功能} ”，因为它不是 ISO-2 C# 语言规范的一部分*

我在一个 .NET 3.5 网站上工作，我已经在这个网站上工作了大约两年。在我最近一次更新之前，我从未见过这个错误。我在整个过程中使用了大量的 LINQ 编码，并且我得到了与大部分 LINQ 代码相关的这些错误。根据我所读到的内容，即使我使用的是 .NET 3.5，由于某种原因它认为我使用的是 2.0。但我找不到任何说明如何解决它的东西。

问题的一个示例是，如果我尝试将新项目添加到 App_Code 目录，我没有获得添加 LINQ to SQL dbml 文件的选项。

如果有人能阐明我将如何解决这个问题，我将不胜感激。

我无法在构建选项卡下找到“高级”选项。我有一种感觉，这可能是因为它是一个网络应用程序。我查看了 web.config，发现了 2 个可能很重要的部分。大多数东西都引用了 3.5.0.0 或 v3.5。这些设置与没有错误时的 web.config 旧备份一致。顺便说一句，只有智能感知和 VS2010 中的东西给我带来了问题。该网站运行无错误。

我已经完成了 VS2010 的完全卸载和重新安装，但我仍然遇到同样的问题。我启动了旧安装的 VS2008，但我没有遇到这个问题。但是，我更喜欢在这个项目上使用 VS2010。

我在工作电脑上用VS2010打开网站，没有报错。这让我觉得我的笔记本电脑上有什么东西导致了这个问题。如上所述，我完全重新安装了 Visual Studio 2010，但问题仍然存在。这会留下什么？我在 VS 中只安装了一个扩展，它在工作中和我的笔记本电脑上都是一样的。另外，我重装VS后没有重装扩展，问题依旧。

两台 PC 都运行 Win7 Ultimate。已安装 VS2008 和 VS2010。VS2010 在两者上都安装了相同的扩展。在我的笔记本电脑上，我安装了完整版的 SQL Server 2008，但我的桌面上只安装了 Management Studio（我们办公室里有一台服务器）。SS2008和它有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:56:51.330

转到您的项目属性，构建选项卡，高级 - 这应该允许您设置要使用的 C# 版本。它应该默认为您正在使用的 Visual Studio 版本支持的最新版本，但听起来好像在某些时候您已将其切换到 ISO-2。

（对于 Windows 项目和类库当然是这样 - Web 应用程序中*可能*存在不同的位置。特别是，请查看 Web.config。）

If this has only started happening recently, I'd have a look through your source control history at changes to any configuration files. Also try creating a new project of the same type, and see if that has the same problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:36:52.973

Jon Skeet's answer is mostly correct. The location for the update is in the "Property Pages" which I got to by right-clicking on the name of the website, clicking Property Pages, the Build item, then target framework.

The extension I use, Solution Navigator, has it's own heading for the solution. Right-clicking on it DOES NOT give me the Property Pages option. By chance I right clicked on the title of the website under the solution heading and was presented with the Property Pages option. In there was the Build tab which contained the target framework option.

Once I finally found the target framework option, it was indeed set to .NET 2.0 for some reason. I changed it to 3.5, reloaded the solution, and now it works great.

Thanks a million Jon for your help and time working with me!!

# php - Create Bundle from 3rd party

> ID：11405940
> 
> 赞同：1
> 
> 时间：2012-07-10T02:47:34.517
> 
> 标签：php, symfony, bundle

Looking around I found nothing that addresses my issue so here goes.

I have a 3rd party library I will to use Symfony2, It has it's own Auto Loader and the project of structured into something like this

```
-project
   - Classes
      - Actions
   - Library
      - Package Name
         - Actions
         - Connection 
```

The project is namespaced.

My question is should I

```
a- re-write this into a Bundle (In-house)
b- add this to the Vendors directory and create a wrapper for this 
```

If option a would you also point me on how to structure the app for Symfony, Or if option b do I use their Auto Loader or Symfonys?

Thanks for any help on this

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:26:36.657

绝对 B。

像所有其他供应商一样包含供应商库，然后创建您自己的捆绑包，它将“桥接”任何 symfony 特定的功能（如果有的话）。如果他们有自动加载器，那么使用它应该没问题。

# android - TextViews overlapping using a RelativeLayout

> ID：11405941
> 
> 赞同：2
> 
> 时间：2012-07-10T02:47:50.807
> 
> 标签：android, android-layout, android-relativelayout

I know I can use a `LinearLayout` to do this, but I have to use a `RelativeLayout` because I have another `RelativeLayout` that I need to anchor to the bottom of the overall layout, as sort of a "status" bar, and I want the title and text to be above the status bar, aligned to the top. Using a `RelativeLayout` was the only way I could get the status bar to work. The only problem is the title and text `TextViews` overlap each other and I need the text to be immediately below the title:

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingTop="10dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
         >       

            <RelativeLayout
                android:id="@+id/status" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_alignParentBottom="true"
                android:paddingTop="10dp"
              >
                    <TextView 
                        android:id="@+id/status" 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:layout_alignParentLeft="true" 
                    />      
            </RelativeLayout>

            <TextView 
                android:id="@+id/title" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_above="@id/status"       
                android:layout_alignParentTop="true"
            />

            <TextView 
                android:id="@+id/text" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/title"    
                android:layout_alignParentTop="true"    
            />

    </RelativeLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:43:38.487

您可以将 LinearLayout 用作 RelativeLayout 的子级。

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentTop="true">     
        <TextView 
            android:id="@+id/title" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
        />
        <TextView 
            android:id="@+id/text" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
        />
  </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:03:44.580

XML 布局是按照它们“读取”的顺序呈现的。所以你会想要做这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingTop="10dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
         >       

           <TextView 
                android:id="@+id/title" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_above="@id/status"       
                android:layout_alignParentTop="true"
            />

            <TextView 
                android:id="@+id/text" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/title"    
                android:layout_alignParentTop="true"    
            />

            <RelativeLayout
                android:id="@+id/status" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_alignParentBottom="true"
                android:paddingTop="10dp"
              >
                    <TextView 
                        android:id="@+id/status" 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_centerVertical="true"
                        android:layout_alignParentLeft="true" 
                    />      
            </RelativeLayout>

    </RelativeLayout>

</FrameLayout> 
```

我也会像其他人提到的那样将两个 textViews 包装在一个 linearLayout 中。这会对你有很大帮助。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:48:23.247

`android:layout_alignParentTop="true"`从您的文本 TextView 中删除。那会解决你的问题！

# node.js - socket.io - 为一个套接字获取多个字段？

> ID：11405943
> 
> 赞同：3
> 
> 时间：2012-07-10T02:47:58.087
> 
> 标签：node.js, socket.io

当用户断开连接时，我有以下代码。我想用房间名称和用户名发出信号。

```
client.get('nickname', function(err, name) {
  client.get('room', function(err2, room) {
    io.sockets.in(room).emit('disconnect', name);
  });
}); 
```

我的问题是，有没有办法避免`.get`像这样包装电话？对于我的应用程序，它们将很快加起来。`get()`我可以从一个命令中获得多个值吗？还是我只是处理这一切都错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T03:07:39.940

如果您需要获取大量值，请查看[async](https://github.com/caolan/async/)之类的流控制库。例如，以下是您可以[并行](https://github.com/caolan/async/#parallel)`get`从客户端获取多个值的方式：

```
var async = require('async');

async.parallel([
  client.get.bind(this, 'nickname'),
  client.get.bind(this, 'room'),
  client.get.bind(this, 'anotherValue')
], function(err, results) {
  // here, `err` is any error returned from any of the three calls to `get`,
  // and results is an array:
  //    results[0] is the value of 'nickname',
  //    results[1] is the value of 'room',
  //    results[2] is the value of 'anotherValue'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:52:01.867

如果您在对象/数组中拥有用户的所有属性，并且在对象/数组中拥有房间的所有属性，那么您仍然只需要这两个嵌套调用。你做对了。

# c# - How can I get location of an .aspx file using Reflection

> ID：11405944
> 
> 赞同：0
> 
> 时间：2012-07-10T02:48:04.037
> 
> 标签：c#, asp.net, .net, visual-studio-2010

I'm searching my assembly (using `System.Reflection`) for classes that are inherited from a specific class (`System.Web.UI.Page`).

All these inherited classes have pages in my web.

How can I read `.aspx` file path too (relative to web root)?

I know I can read this path from `.pdb` file, however this file does not exists in live server.

**Edit** to avoid confusion, here is a sample of my code. doSomeProcess is not exact process. in fact it receives the class itself and analyzes it too. however it is not important for this code sample.

```
using System;
using System.IO;
using System.Reflection;

namespace ... {
    public class FixPaths: System.Web.UI.Page {

        void SearhcAssembly(){
            Assembly library = Assembly.GetExecutingAssembly();
            string FileName = Path.GetFileName(library.Location);
            foreach (Type type in library.GetTypes()) {
                if (FileName == type.Module.Name) {
                    if (type.BaseType != null && (type.BaseType.FullName == "System.Web.UI.Page")) {

                        string NameSpace = type.Namespace;
                        string ClassName = type.Name;

                        // -- This need to be changed --
                        string PageUrl = "/" + type.Namespace.ToLower().Replace(".", "/") + "/" + type.Name + ".aspx";
                        // -------------------------------------

                        doSomeProcess(NameSpace, ClassName, PageUrl);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:57:08.043

Bob，不幸的是，这不是一个合适的解决方案。然而，就我们在评论中讨论的情况而言，它可能是我们能得到的最接近它的地方。

1.  通过反射，获取程序集中从**Page**继承的所有类型。
2.  使用递归 I/O 搜索，查找根文件夹下的所有 *.aspx 文件并将它们保存在一个列表中（这样您就可以检索它们的完整路径等等
3.  将您找到的类型与您获取的文件进行比较。这样，您可以报告不在正确文件中的页面（类）和不在正确位置的 ASPX。

我找不到类型与其源文件之间的关系。此外，我们谈论的是页面（在程序集中声明）和 ASPX 文件，它们根本不相关。

如果有人有更好的解决方案，我也想看看它。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:19:58.477

页面从根的相对路径在`AppRelativeTemplateSourceDirectory`属性中（在页面上）。这就是你所追求的吗？

# c - 给定键盘事件，在 C 中实现键盘缓冲区

> ID：11405945
> 
> 赞同：0
> 
> 时间：2012-07-10T02:48:07.743
> 
> 标签：c, io, keyboard, buffer

我有一个检测键盘事件的 C 程序，但我需要知道实现输入缓冲区的最佳技术和一个简单的`getch`函数来检索缓冲区中最旧的字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:27:03.567

一种方法是使用[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。您创建一个固定大小的数组并具有两个索引，一个读取索引和一个写入索引。每次触发键盘事件时，您将值放在写入索引和增量处。调用该`getch`函数时，您从读取索引中读取并递增它。如果任一索引超过数组的大小，它就会重置到开头。

如果读索引和写索引相等，则没有键在等待。如果写索引刚好在读索引之前，则缓冲区已满，需要删除键盘事件。

如果您不想要“完整”缓冲区，它会变得更加复杂。

# objective-c - instance method not found when using more than one parameter

> ID：11405949
> 
> 赞同：-1
> 
> 时间：2012-07-10T02:49:04.380
> 
> 标签：objective-c

My question is about a case where things work fine for a method with one parameter, but not for two. The code comes from Apple animation sample code.

the main view object, (self), has readonly reference to an abstract superclass object, s.

It can call methods on an instance that inherits from the superclass like this:

```
[self.s myMethod:param1]; 
```

and it works fine.

However, when I try:

```
[self.s anotherMethod:param1 secondParam:param2]; 
```

I get the compile error:

> Semantic Issue > Instance method '-anotherMethod:secondParam:' not found (return type defaults to 'id')

Both the methods have return type - (void).

Everything is declared and defined in the same way for the first case and the second.

Any suggestions would be greatly appreciated.

(I don't really want to resort to bundling up parameters into a single object!)

* * *

amendment with example added below

declarations like this in .h files of superclass and inherited class

for the super class:

```
@interface SuperClass : NSObject
{
...
}
...
- (void) myMethod:(SomeObject *) param1;
- (void) anotherMethod:(SomeObject *) param1: (int) param2;
@end 
```

for the inherited class:

```
#import "SuperClass.h"
@interface InheritedClass : SuperClass
{
...
}
...
- (void) myMethod:(SomeObject *) param1;
- (void) anotherMethod:(SomeObject *) param1: (int) param2;
@end 
```

implementations in .m file of each class

have tried adding this to the inherited class .m file.

```
@interface InheritedClass ()
- (void) anotherMethod:(SomeObject *) param1: (int) param2;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:53:02.613

这个电话：

```
[self.s anotherMethod:param1 secondParam:param2]; 
```

...表示方法名称是`anotherMethod:secondParam:`.

本声明：

```
- (void) anotherMethod:(SomeObject *) param1: (int) param2; 
```

...没有相同的名称。

有没有可能你的意思是：

```
- (void) anotherMethod:(SomeObject *)param1 secondParam:(int)param2; 
```

?

# android - 如何更改网格视图中的一个按钮背景？ - 安卓

> ID：11405954
> 
> 赞同：0
> 
> 时间：2012-07-10T02:50:01.037
> 
> 标签：android, gridview, imageview

我有一个带有 16 个 ImageView 按钮的 GridView。我的程序生成一个随机数，当用户单击网格视图中的按钮时，我希望它采用随机数（0-15）并将图块的背景设置为与随机数相同的位置（0-15）到不同的图像。如何只更改其中一个按钮背景？到目前为止，这是我的代码：

```
public class ButtonHider extends Activity {
    Random random = new Random();
    int pos;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.button_hider);
        pos = random.nextInt(15);

        GridView gridview = (GridView) findViewById(R.id.gvBH);
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
                pos = random.nextInt(16);
                if (position == pos) {
                    Toast.makeText(ButtonHider.this, "Found Me!",
                    Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(ButtonHider.this, "Try Again!!",
                    Toast.LENGTH_SHORT).show();
                }

            }
        });
    }

    public class ImageAdapter extends BaseAdapter {
        private Context mContext;

        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getCount() {
            return 16;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) { // if it's not recycled, initialize some
                // attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(15, 15, 15, 15);
            } else {
                imageView = (ImageView) convertView;
            }

            imageView.setImageResource(R.drawable.bh_b);
            return imageView;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:55:23.573

我想你想要这样的东西..

```
 gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {
                int randomNumber = random.nextInt(16);
                ImageView imageView=(ImageView) parent.getChildAt(randomNumber);
                imageView.setImageResource(R.drawable.random_bg);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T03:32:54.023

您可以使用 GridView 的[getChildAt(int position)](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)方法在指定索引处获取子 (ImageView)。

从那里，您当然可以将孩子投射到 ImageView 并设置背景。

# ubuntu - is there a way to move winsock lib from windows to ubuntu?

> ID：11405962
> 
> 赞同：0
> 
> 时间：2012-07-10T02:51:25.727
> 
> 标签：ubuntu, codeblocks, winsock2

I've created a `server` project in Windows 7 using `winsock` library. However, My friend want to use this project in `Ubuntu` with `Code::Blocks` framework. When I move the project to `Ubuntu`, I realize that there's no `winsock` library!! So, I want to ask for a suggestion to use `winsock` lib in Ubuntu or a way to run my project in `ubuntu`. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:39:02.847

而不是与 ws2_32 库（windows 上的 winsock）链接，而是需要链接 glibc，这在使用 g++/gcc 构建时总是这样做。

但是，您需要用#ifdef 替换一些系统调用。例如在 linux 上你有 close() 而不是 closesocket()，ioctl() 而不是 ioctlsocket() 等等。

尝试在您的代码中使用此块：

```
#if defined(__unix__)
typedef int SOCKET;
#define closesocket(i) close(i)
#define ioctlsocket(i,l,ul) ioctl(i,l,ul)
#endif 
```

对于您的套接字，您将需要使用 typedef SOCKET。

# c++ - c 和 c++ 与库的链接

> ID：11405966
> 
> 赞同：0
> 
> 时间：2012-07-10T02:51:40.227
> 
> 标签：c++, c, extern, linkage

假设我有一个使用类和模板的 C++ 库 lib.h。还假设我有一个自定义 C++ 头文件 myLink.h，其中包含以下内容：

```
#include "lib.h"

  //call methods from lib.h that use templates and classes
  //  and return an integer based off of the information gained from calling functions lib.h  
  extern "C" int foo(int param1, const int param2); 
```

现在假设我在一个名为 test.c 的 C 文件中。如下调用函数 foo() 是否合法？

```
//in test.c
int first = foo(5, 6); 
```

另外，编译的目标代码/链接器阶段发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:07:35.303

> 如下调用函数 foo() 是否合法？

```
 int first = foo(5, 6); 
```

是的，这是合法的。尽管您应该阅读以下内容以确保此合法电话将链接。

> 编译的目标代码/链接器阶段发生了什么？

使用类不会干扰。C++ 类将被编译为链接器能够理解的目标代码。

**编辑克里斯多德的评论：**

您的模板也将通过`foo`调用它们来创建。

# python - 如何使用 python 登录并保存 cookie，然后使用该信息仅查看会员页面

> ID：11405975
> 
> 赞同：2
> 
> 时间：2012-07-10T02:52:24.857
> 
> 标签：python

我是 python 的新手，并试图编写一个脚本来登录[http://ryushare.com/login.python](http://ryushare.com/login.python)的页面。

我尝试了很多尝试，但它无法登录，我不知道为什么。登录页面后希望得到[http://ryushare.com/file-manager.python的返回](http://ryushare.com/file-manager.python)

这是我尝试通过阅读其他人的示例来尝试的代码。

```
import urllib, urllib2, cookielib
username = 'myusername'
password = 'mypassword'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'login' : username, 'password' : password})
opener.open('http://www.ryushare.com/login.python', login_data)
resp = opener.open('http://ryushare.com/file-manager.python')
print resp.read() 
```

我检查了登录页面的源代码，它说用户名和密码值为“登录名和密码”，所以我更改了它。我尝试了其他一些可以在此处找到的示例，例如谷歌新闻提要，它也无法登录：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:13:50.003

在页面的源代码中，我们有以下 HTML：

```
<form method="POST" action="http://ryushare.com/" name="FL"> 
```

您应该打开（）“操作”页面，例如

```
opener.open('http://ryushare.com/", login_data)
# Now you can interact with site 
```

[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)：

> 提交按钮
> 
> `<input type="submit" />`定义一个提交按钮。
> 
> 提交按钮用于将表单数据发送到服务器。**数据被发送到表单的 action 属性中指定的页面。**action 属性中定义的文件通常对接收到的输入做一些事情：
> 
> ```
> <form name="input" action="html_form_action.asp" method="get">
> Username: <input type="text" name="user" /> <input type="submit"
> value="Submit" /> </form> 
> ```
> 
> 上面的 HTML 代码在浏览器中的外观：
> 
> 用户名：（输入框）
> 
> 如果您在上面的文本字段中键入一些字符，然后单击“提交”按钮，浏览器会将您的输入发送到一个名为“html_form_action.asp”的页面。该页面将向您显示收到的输入。

# 编辑：其他表格数据

从评论中可以看出，OP 在应用此修复程序后仍然遇到问题。答案是经常有隐藏的表单标签，包括提交按钮。在您的请求中包含这些标签的数据以及您的用户名和密码。

# php - 增加 MySQL 查询的深度

> ID：11405979
> 
> 赞同：1
> 
> 时间：2012-07-10T02:53:41.033
> 
> 标签：php, mysql, html, codeigniter

```
public function get_children($id)
{
        $query = $this->db->query("SELECT 
          @last_id := id AS id,
          parent_id,
          FIO,
          @depth := IF(parent_id = ".$id.", 1, @depth + 1) AS depth,
          @first := IF(id = ".$id.", 'first', null) AS first
          FROM 
          users 
          FORCE INDEX (index_parent_id, PRIMARY, index_both),
          (SELECT @last_id := ".$id.", @depth := -1) vars
          WHERE id = ".$id." OR parent_id = @last_id OR parent_id = ".$id."
          ");

    return $query;

} 
```

如何使用相邻模型列表和此查询增加子节点的级别深度，现在它给了我根父节点（由函数中的 id 选择）及其子节点，但不是更深，有什么想法吗？

```
foreach($query->result() as $q){

    if($q->first == 'first')
    {
        $parent_id = $q->parent_id;
        break;
    }

}
function print_list($array, $parent=0) {
        print "<ul>";
        foreach ($array as $row) {
            if ($row->parent_id == $parent) {
                print "<li>$row->FIO";
                print_list($array, $row->id);  # recurse
                print "</li>";
        }   }
        print "</ul>";
    }
echo print_list($query->result(), $parent_id); 
```

然后我将它呈现在视图文件中......请帮助或任何关于更改或查看以增加 mysql 查询深度的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:41:27.283

我不确定数据库的架构，但这基本上是您可能正在寻找的东西的精简版本。基本上，您需要一个调用自身的函数，但参数会发生变化。

在这种情况下，它会查找具有 parent_id = $parent_id 的用户（假设 root 的 parent_id 为 0）列表，然后对于每个用户，它会查找具有 parent_id = $id 的其他用户（其中​​ $id 是他们的 id ) 所以基本上，你有无限的深度

```
<?
function print_list($parent_id) {
    $query = "SELECT * FROM users WHERE parent_id=".$parent_id;

    print "<ul>";
    foreach($query->result() as $q) {
        $id = $q->id;
        print "<li>";
            print $q->FIO;
        print "</li>";
        print_list($id); //Here, it calls itself again
    }
    print "</ul>";
}
print_list(0); //Assuming the root-parent-id number is 0 
```

# ios - Quartz 2D 绘制不同颜色的 PDF 页面

> ID：11405980
> 
> 赞同：1
> 
> 时间：2012-07-10T02:53:44.907
> 
> 标签：ios, pdf, colors, palette

我有一堆 PDF，在我正在编写的应用程序中用作矢量图。我正在使用 CG Context 命令 CGContextDrawPDFPage 来绘制 PDF，到目前为止效果很好。我遇到的一个问题是我希望能够在运行时修改矢量图的颜色。目前所有的 PDF 都按照设计的方式绘制为纯黑色。

是否可以绘制 PDF 但以某种方式更改它绘制的颜色？也许修改调色板以便黑色映射到其他东西，或者在运行时实际更改 PDF 本身？我意识到 PDF 文件中已经包含颜色信息，所以也许可以告诉 Quartz 忽略这些颜色并使用其他颜色？

更多信息：我正在绘制的 PDF 是程序需要绘制的各种图标/形状。它们是一些黑色的形状，带有透明的背景。我需要能够绘制该 PDF 但使用不同的颜色，或者像比尔威尔逊提到的那样使用混合模式覆盖不同的颜色。我试过 kCGBlendModeLighten 但问题是如果我在 pdf 周围填充一个矩形，外部透明区域会变成红色，所以只有一个红色框而不是红色形状。

所以我需要一种将黑色映射到颜色 X 但保持透明的方法。

这是我需要以不同颜色绘制的 PDF 示例：http: [//davidevansgames.com/res/FON179.pdf](http://davidevansgames.com/res/FON179.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:51:04.100

绘制 PDF 后，将 CGConext 的混合模式设置为`kCGBlendModeLighten`并用您想要的颜色填充上下文，这应该会给您一些帮助。

如果您正在对上下文进行任何其他绘图，请确保将混合模式设置为正常。`CGContextSaveGState`或者使用and保存和恢复上下文状态`CGContextRestoreGState`。

尝试其他混合模式，看看哪种最适合您...

我不确定这是否是您想要的，所以如果不是，您可以详细说明，也许分享您正在使用的 pdf。

```
 CGContextSaveGState(context);
 CGContextSetBlendMode(context, kCGBlendModeLighten);
 CGColorRef redColor = [UIColor colorWithRed:1.0 green:0.0 
                                         blue:0.0 alpha:1.0].CGColor;

 CGContextSetFillColorWithColor(context, redColor);
 CGContextFillRect(context, CGRectMake(0, 0, width, height));
 CGContextRestoreGState(context) 
```

# php - 按顺序生成随机数

> ID：11405981
> 
> 赞同：0
> 
> 时间：2012-07-10T02:53:57.647
> 
> 标签：php, arrays, sorting, random

有没有办法从数字列表中获取随机数，然后将它们按顺序排列？

例如，如果我想要 1 到 12 之间的 4 个数字，我怎样才能按升序获得这些数字？

编辑：我需要数字是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T02:59:06.007

```
$output = array();
for($i=1;$i<=4;$i++){
   $output[] = mt_rand(1, 12);
}
sort($output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T02:54:46.040

将随机值存储在一个数组中，然后使用 PHP 的排序函数： http: [//php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

```
$numbers = range(1, 12); 
shuffle($numbers); 
$numbers=array_slice($numbers, 0, 4); 
sort($numbers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T02:59:40.783

```
<?
$y=array();
for($i=0;$i<4;$i++){$y[$i]=mt_rand(1,12);}
sort($y);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:00:58.720

试试这个，添加到数组，然后排序。

**foreach**和**range**会更容易阅读，所以更容易维护:)

```
<?php
$b1 = 1;
$b2 = 12;

$nums = array();
foreach(range(1,4) as $i){
   $nums[] = rand($b1,$b2);
}
sort($nums);
var_dump($nums); 
```

有关排序的更多信息 [http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

# error-handling - InDesign CS5 脚本：为什么 `#targetengine` 不能正常工作？

> ID：11405987
> 
> 赞同：0
> 
> 时间：2012-07-10T02:54:46.137
> 
> 标签：error-handling, adobe, adobe-indesign, extendscript

我知道该声明`#targetengine "myEngineName"`将用于 InDesign 来记住全局变量（在此处找到相关信息：http:   [//incom.org/post/89818](http://incom.org/post/89818)）。

* * *

但是，这仍然不足以记住全局变量，因为它仍然会引发有关全局变量的错误`imgs`：

> 错误号：30476
> 错误字符串：“if(imgs[i].itemLink != null)”无法完成，因为对象不再存在。

...或者类似的东西。它不喜欢我的代码中的那一行，并且似乎忘记了全局变量`imgs`被实例化为什么。

* * *

所以我实现了一个try-catch语句，并恢复了变量`imgs`并减少了catch中的迭代器......虽然这**确实**解决了问题，但为什么没有`#targetengine "myEngineName"`像它应该的那样解决问题？

这是我的代码：

```
#target "InDesign" // this solves the "Error Number: 29446" problem
#targetengine "session" // this solves the "Error Number: 30476" problem

var imgs; // global variable for the #targetengine "session" to keep track of
var document = app.activeDocument;
var newFolder = createFolder(document); // if subdirectory images DNE, create this folder with the function below

saveAllImages(document, newFolder); // with the function below

alert("The file conversion is complete!\n\nAll black & white images have been copied to:\n" + newFolder +
        "\.\n\nAll color images have been replaced with the new black & white images in the current InDesign document.");

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function createFolder(doc)
{
    try
    {
      /*
         * type-casting the filePath property (of type object) into a String type;
         * must be a String type to concatenate with the subdirectory variable (also of type String)
         */
        var docPath = String(doc.filePath);
        var subdirectory = "/BLACK AND WHITE IMAGES";
    }
    catch(e)
    {
        alert(e.message + "\n - reload the script, and it should work.");
        exit();
    }

    var imagesFolder = docPath + subdirectory; // concatenating the two variables
    if(!Folder(imagesFolder).exists)
    {
        Folder(imagesFolder).create();
    }

    return imagesFolder; // for instantiation outside of this function

} // end of function createFolder

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function saveAllImages(doc, folder)
{
    imgs = document.allGraphics; // this is a global variable, for the #targetengine "session" to keep track of
    var fileName = "";
    var img = "";
    var imgType = "";

    for(var i = 0; i < imgs.length; i++)
    {
        try
        {
            if(imgs[i].itemLink != null)
            {
                fileName = imgs[i].itemLink.name;

                img = new File(folder + "/" + fileName); // each image instantiated here
                imgType = imgs[i].imageTypeName; // image type is determined here (.tif, .jpg, .png, etc..)

                //alert("The file \"" + fileName + "\"\n\tis a " + imgType + " file."); // Note: escape characters

               /*
                     * array for image options, instantiated from the function below;
                     * options[0] is the "MAXIMUM" image quality property, &
                     * options[1] is the "GRAY" image conversion property;
                     */
                var options = convertToBlackAndWhite(imgType);

                // each image exported to the new folder here, by file type
                switch(imgType)
                {
                    case "GIF":
                        alert("This script cannot convert and export the GIF file:\n\t" + fileName + " !"); // Note: escape characters
                        break;

                    case "Adobe PDF":
                        break;                            
                    case "EPS":
                        break;
                    case "Windows Bitmap":
                        break;
                    case "JPEG":
                        break;
                    case "PNG":
                        break;
                    case "TIFF":
                        options[0]; // maximum image quality
                        options[1]; // black & white conversion

                        imgs[i].exportFile(ExportFormat.JPG, img, false);
                        replaceWithNewImage(doc, fileName, img); // with the function below
                        break;

                    default:
                        alert("\tUnlisted image type: " + imgType + "!\nAdd this type to the switch statement.");
                        break;
                } // end of switch statement

            } // end of if statement
        } // end of try statement
        catch(e)
        {
            /*
                * in case the #targetengine is overloaded, this solves the "Error Number: 30476" problem:
                *           - "The requested action could not be completed because the object no longer exists."
                *               (the second statement #targetengine "session" is also in place to solve this error)
                */
            imgs = document.allGraphics; // global variable reinstantiated in case of error
            i--; // retry the same iteration again, in case of error (the variable " i " is the iterator in the for loop)
        }
    } // end of for loop

} // end of function saveAllImages

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

        function convertToBlackAndWhite(fileType)
        {
            // array for image-quality and color-conversion values
            var settings = [];

            // each image exported to the new folder here, by file type
            switch(fileType)
            {                    
                    case "Windows Bitmap":
                        break;
                    case "JPEG":
                        break;
                    case "PNG":
                        break;
                    case "TIFF":
                    settings[0] = "app.jpegExportPreferences.jpegQuality = JPEGOptionsQuality.MAXIMUM"; // maximum image quality
                    settings[1] = "app.jpegExportPreferences.jpegColorSpace = JpegColorSpaceEnum.GRAY"; // black & white conversion
                    break;

                default:
                    break;
            } // end of switch statement

            return settings; // for instantiation outside of this function

        } // end of function convertToBlackAndWhite

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function replaceWithNewImage(doc, imageName, newImage)
{
    var links = doc.links;
    var link = "";
    for(var i = 0; i < links.length; i++)
    {
        link = links[i];
        if ( (link.status == LinkStatus.NORMAL) && (link.name == imageName) )
        {
            try
            {
                link.relink(newImage);
                link.update();
            }
            catch(e)
            {
            }
        } // end of if statement
    } // end of for loop

} // end of function replaceWithNewImage 
```

这是我能找到的关于这个错误的唯一信息：   [http ://forums.adobe.com/thread/748419](http://forums.adobe.com/thread/748419)

**编辑**——

我很确定这个问题与函数有关`replaceWithNewImage`，因为这个错误没有没有这个函数就会发生，然后就不需要 try-catch 语句......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:20:40.790

阅读您的代码，我发现可能确实存在问题。您将文档的引用设置为活动文档。但是这个参考在整个会话中仍然存在。事实上，如果您切换到另一个文档或关闭该文档，那么引用就会丢失。这可以解释为什么 imgs 在某些时候可能是未定义的，尽管我认为它应该引发错误。一定要把你的变量包装在一个函数范围内，我保证你一切都会好起来的；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:26:24.230

首先，尽可能避免使用全局变量，尤其是在使用会话引擎时。

如果您的脚本的目的是简单的导出链接/修改链接/替换链接，为什么要拥有持久变量？

以我的拙见，我将摆脱引擎并进行常规的函数调用

```
//myscript.jsx
mySuperFunction();
function mySuperFunction()
{
    var doc;
    if ( app.documents.length == 0 ){ return; }
    doc = app.activeDocument;
    //Do all your stuff
} 
```

它应该是你所需要的;)

洛伊克

# php - PHP 到 MySQL 到 XML 文件

> ID：11405991
> 
> 赞同：-1
> 
> 时间：2012-07-10T02:55:24.447
> 
> 标签：php, javascript, jquery, mysql, xml

我正在尝试创建一个将数据保存到 MySQL 数据库的 php web 表单，并且一旦将数据保存到数据库中，就会生成一个 xml 文件。我有将数据保存到数据库的代码，我可以从数据中创建一个 xml，但我不能一次全部完成。

我在想我可以使用 javascript 重定向来启动 .php 文件来创建我的 xml 文件，但这就是我卡住的地方。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:37:32.797

有一些出色的函数、类和外部库，只需看看[http://css.dzone.com/news/creating-xml-documents-php](http://css.dzone.com/news/creating-xml-documents-php)和[如何使用 PHP 动态生成 XML 文件？](https://stackoverflow.com/questions/486757/how-to-generate-xml-file-dynamically-using-php)

# python - 如何使用 Python 替换 HTML 转义字符？

> ID：11405996
> 
> 赞同：7
> 
> 时间：2012-07-10T02:55:58.710
> 
> 标签：python

> **可能重复：**
> [解码 Python 字符串中的 HTML 实体？](https://stackoverflow.com/questions/2087370/decode-html-entities-in-python-string)

我有一个充满 HTML 转义字符的字符串，例如`&quot;`、`&rdquo;`和`&mdash;`.

是否有任何 Python 库为我提供了可靠的方法来用它们各自的实际字符替换所有这些转义字符？

例如，我希望将所有`&quot;`s 替换为 "s。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-10T03:04:14.287

你想用这个：

```
try:
    from html.parser import HTMLParser  # Python 3
except ModuleNotFoundError:
    from HTMLParser import HTMLParser  # Python 2
parser = HTMLParser()
html_decoded_string = parser.unescape(html_encoded_string) 
```

我也看到了对 BeautifulSoup 的喜爱

```
from BeautifulSoup import BeautifulSoup
html_decoded_string = BeautifulSoup(html_encoded_string, convertEntities=BeautifulSoup.HTML_ENTITIES) 
```

这些现有问题的重复：

[在 Python 字符串中解码 HTML 实体？](https://stackoverflow.com/questions/2087370/decode-html-entities-in-python-string)

[使用 Python 解码 HTML 实体](https://stackoverflow.com/questions/1208916/decoding-html-entities-with-python)

[使用 Python 解码 HTML 实体](https://stackoverflow.com/questions/628332/decoding-html-entities-with-python)

# php - PHP JSON 将输出数字编码为字符串

> ID：11405997
> 
> 赞同：7
> 
> 时间：2012-07-10T02:56:22.453
> 
> 标签：php, jquery, json

我正在尝试使用 PHP 和 MySQL 输出 JSON 字符串，但纬度和经度作为字符串输出，值周围有引号。当我尝试将标记添加到谷歌地图时，这会导致问题。

这是我的代码：

```
$sql = mysql_query('SELECT * FROM markers WHERE address !=""');
$results = array();
while($row = mysql_fetch_array($sql))
{
   $results[] = array(
      'latitude' =>$row['lat'],
      'longitude' => $row['lng'],
      'address' => $row['address'],
      'project_ID' => $row['project_ID'],
      'marker_id' => $row['marker_id']
   );
}
$json = json_encode($results);

echo "{\"markers\":";
echo $json;
echo "}"; 
```

这是预期的输出：

```
{"markers":[{"latitude":0.000000,"longitude":0.000000,"address":"2234 2nd Ave, Seattle, WA","project_ID":"7","marker_id":"21"}]} 
```

这是我得到的输出：

```
{"markers":[{"latitude":"0.000000","longitude":"0.000000","address":"2234 2nd Ave, Seattle, WA","project_ID":"7","marker_id":"21"}]} 
```

注意纬度和经度值周围的引号。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T03:01:42.500

你也可以试试

```
echo json_encode( $results, JSON_NUMERIC_CHECK ); 
```

一些参考：

[PHP JSON 常量](http://php.net/manual/en/json.constants.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:03:23.713

```
$results[] = array(
  'latitude' => (float)$row['lat'],
  'longitude' => (float)$row['lng'],
  'address' => $row['address'],
  'project_ID' => $row['project_ID'],
  'marker_id' => $row['marker_id']
); 
```

纬度和经度应该是一个浮点数，但你可以试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T03:06:13.333

这里有一些你可能不知道的事情：在 PHP 中从 MySQL 检索数据时，无论实际值是什么，你**总是会返回字符串。**然而，一个简单的类型转换为浮动应该可以解决问题：

```
$sql = mysql_query('SELECT * FROM markers WHERE address !=""');
$results = array();
while($row = mysql_fetch_array($sql))
{
   $results[] = array(
      'latitude' => (float) $row['lat'],
      'longitude' => (float) $row['lng'],
      'address' => $row['address'],
      'project_ID' => $row['project_ID'],
      'marker_id' => $row['marker_id']
   );
}
$json = json_encode($results);

echo "{\"markers\":";
echo $json;
echo "}"; 
```

或者，由于浮点数可能不够准确，无法存储纬度/经度坐标，请将它们存储为字符串并使用字符串操作函数（例如 str_replace）动态删除引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T03:02:54.763

在客户端使用 javascripts[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)在必要时将字符串值转换为整数：

```
typeof parseInt("56") # returns number
typeof "56" # returns string 
```